# StackOverflow 问答 11683000-11683999

# asp.net - IIS6无法连接sql server 2008

> ID：11683000
> 
> 赞同：0
> 
> 时间：2012-07-27T07:06:52.943
> 
> 标签：asp.net, sql-server-2008

我在 asp.net 中做一个简单的应用程序`sql server 2008`，我的应用程序可以完美地使用`visual studio 2010`。但是当我在上面部署相同的应用程序时，`Internet Information Services(IIS)`它会显示 m 错误说

```
" Login Failed for user sumit-3A81ED\IUSR_ sumit-3A81ED". 
```

有什么我需要做的吗？请帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:18:42.063

您应该在 SQL Server 上启用混合模式身份验证，在 Web 应用程序访问的数据库中创建登录名和用户，并在连接字符串中指定此用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:22:10.123

似乎您的连接字符串不正确.. 更新连接字符串中的服务器名称和登录凭据

# ruby-on-rails - 恼人的验证红宝石

> ID：11683002
> 
> 赞同：1
> 
> 时间：2012-07-27T07:07:03.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

您好，我是 ruby​​ on rails 的新手，我在验证旧密码时遇到问题。如果我要进入编辑帐户页面并且如果我保存旧密码验证显示即使编辑帐户页面和更改密码页面是不同的页面但它们在一个模型中共享。请帮助我。

**这是我的模型：**

```
validates_presence_of :firstname, :message => 'First Name is required'
  validates_format_of :firstname, :with => /\A[a-zA-Z]+([a-zA-Z]|\d)*\Z/, :message => 'First name must not contain special characters'
  validates_presence_of :lastname, :message => 'Last Name is required'
  validates_format_of :lastname, :with => /\A[a-zA-Z]+([a-zA-Z]|\d)*\Z/, :message => 'Lastname name must not contain special characters'
  validates_presence_of :email, :message => 'Email Address is required'
  validates_uniqueness_of :email, :message => 'Email address is already taken, please select a new one'
  validates_format_of :email, :with => /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i, :message => "Please enter a valid email address"
  validates_presence_of :username, :message => 'Username is required'
  validates_uniqueness_of :username, :message => 'Username is already taken, please select a new one'
  validates_length_of :username, :within => 3..15, :message => "Username must be at least 3 - 15 characters in length", :on => :create

  validates_presence_of :password_old, :on => :update, :message => "Old password is required" 
```

如果您需要更多信息，请发表评论....提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:56:46.200

所以你说它不应该在更新帐户信息时检查密码。如果用户在更改密码字段中提供了新密码，您可以编写一个条件验证来检查 old_password。

```
validates_presence_of :password_old, :on => :update, :unless => :current_password.nil?,:message => "Old password is required" 
```

# java - 带有静态最终列表的 JUnit 中的错误

> ID：11683007
> 
> 赞同：0
> 
> 时间：2012-07-27T07:07:14.567
> 
> 标签：java, junit

我写了一个调用常量类的 JUnit，在这里我们试图访问一个**静态的最终列表**

```
public static final List<String> SKIPPED_DIMENSION_LIST = new ArrayList<String>();

static{ SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_DISPLAY); 
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_SUB); 
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_SUB_GROUP); 
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_SUB_GROUP_ID); 
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_ID); 
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_GROUP_ID); } 
```

现在，在通过 JUnit 线程访问这个列表时，我遇到了这个错误。

```
 java.lang.ExceptionInInitializerError
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:222)
        at com.mns.commerce.searchnav.constants.MSEndecaConstants.<clinit>(MSEndecaConstants.java:169)
        at java.lang.J9VMInternals.initializeImpl(Native Method)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
        at com.mns.commerce.searchnav.utils.MSSearchResposeBOTransformer.getRefinementsDetails(MSSearchResposeBOTransformer.java:460)
        at com.mns.commerce.searchnav.utils.MSSearchResposeBOTransformer.buildFacets(MSSearchResposeBOTransformer.java:362)
        at com.mns.commerce.searchnav.utils.MSSearchResposeBOTransformer.populateResults(MSSearchResposeBOTransformer.java:106)
        at com.mns.commerce.searchnavunit.test.MSSearchResposeBOTransformerTest.testPopulateResults(MSSearchResposeBOTransformerTest.java:97) 
```

然而，如果`Enum`定义了一个静态而不是一个，`static final list`那么它工作正常。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:49:30.367

这段代码也在运行，这段代码没有任何错误。我的 JDK 版本是 1.6。

导入 java.util.ArrayList；导入 java.util.List；

```
public class test {

private static final String PRODUCT_CATEGORY_DISPLAY = "a";
private static final String PRODUCT_CATEGORY_SUB = "b";
private static final String PRODUCT_CATEGORY_SUB_GROUP = "c";
private static final String PRODUCT_CATEGORY_SUB_GROUP_ID = "d";
private static final String PRODUCT_CATEGORY_ID = "e";
private static final String PRODUCT_CATEGORY_GROUP_ID = "f";
public static final List<String> SKIPPED_DIMENSION_LIST = new ArrayList<String>();

static{          
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_DISPLAY);
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_SUB);
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_SUB_GROUP);
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_SUB_GROUP_ID);
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_ID);
    SKIPPED_DIMENSION_LIST.add(PRODUCT_CATEGORY_GROUP_ID);
}      /**      * @param args      */     
public static void main(String[] args) {   
    System.out.println(SKIPPED_DIMENSION_LIST); 
} 

} 
```

# linux - 内核任务可以访问它的 vm_area_struct 吗？

> ID：11683011
> 
> 赞同：0
> 
> 时间：2012-07-27T07:07:30.213
> 
> 标签：linux, kernel

我的理解是用户任务可以访问3G的用户空间和1G的内核空间。但是内核任务只能访问其仅有的 1G 内核空间。但是在task_struct中，它链接到指向用户空间的vm_area_struct，对吗？如果正确，那么这是否意味着内核任务也可以直接访问用户空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:51:36.417

用户任务只能访问低3G的用户空间（被映射的区域），内核可以访问所有的3G+1G空间。内核不直接访问用户空间地址，它使用 copy_from(to)_user() API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:26:57.143

以下来自 Robert Love 的 LKD3：mm_struct 和内核线程 (P309)

内核线程没有进程地址空间，因此没有关联的内存描述符。因此，内核线程的进程描述符的 mm 字段为 NULL。这是内核线程的定义——没有用户上下文的进程。

这种缺少地址空间的情况很好，因为内核线程从不访问任何用户空间内存。（他们会访问谁？）因为内核线程在用户空间中没有任何页面，所以它们不应该拥有自己的内存描述符和页表。（页表将在本章后面讨论。）尽管如此，内核线程需要一些数据，例如页表，甚至访问内核内存。为内核线程提供所需的数据，而不会将内存浪费在内存描述符和页表，或者在内核线程开始运行时浪费处理器周期切换到新的地址空间，内核线程使用之前运行的任何任务的内存描述符。

每当一个进程被调度时，该进程的 mm 字段引用的进程地址空间就会被加载。然后更新进程描述符中的 active_mm 字段以引用新的地址空间。内核线程没有地址空间， mm 为 NULL 。因此，当一个内核线程被调度时，内核注意到 mm 为 NULL 并保持前一个进程的地址空间加载。内核然后更新内核线程的进程描述符的 active_mm 字段以引用前一个进程的内存描述符。内核线程然后可以根据需要使用前一个进程的页表。因为内核线程不访问用户空间内存，所以它们只使用与内核内存相关的地址空间中的信息，这对于所有进程都是相同的。

# sharepoint - Sharepoint 2010：移动按钮在网站内容和结构中消失

> ID：11683015
> 
> 赞同：1
> 
> 时间：2012-07-27T07:07:58.657
> 
> 标签：sharepoint, sharepoint-2010, shared-libraries

我有一个子站点 (http://mysite/documentcenter)。我的用户在网站集管理员中，所以我可以看到并单击站点内容和子站点结构中的移动按钮。

但是其他拥有所有文档访问权限的用户看不到“移动”按钮——它完全消失了，没有变灰。

如何为其他用户显示移动按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T20:33:10.063

确保存在添加和自定义页面权限。可能有来自中央管理员的用户策略的拒绝掩码，它可以覆盖网站集管理员权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T14:17:08.633

我知道这个问题有点老了，但是您需要启用以下权限级别，否则移动不可用。

> *管理网站 - 授予对网站执行所有管理任务以及管理内容的能力。*

我会非常小心地分配此权限，因为它为用户增加了一大堆额外的访问权限。

# makefile - 检查 iconv.h 的头文件

> ID：11683018
> 
> 赞同：0
> 
> 时间：2012-07-27T07:08:29.930
> 
> 标签：makefile, autoconf

我正在使用 FreeBSD 并安装了`iconv`包形式的端口集合。我写了

`AC_CHECK_HEADER([iconv.h], ,[AC_MSG_ERROR([can not find iconv.h])])` `AC_CHECK_LIB([iconv], [iconv_open], ,[AC_MSG_ERROR([can not find iconv_open])])`

在configure.ac中。但是当我运行./configure时，它给了我以下消息

`checking iconv.h usability... no`

`checking iconv.h presence... no`

`checking for iconv.h... no`

`configure: error: can not find iconv.h`

我确定在和的目录中有，`iconv.h`。那么我应该如何编写正确的语句来检查头文件和库。谢谢提前！`libiconv.la``libiconv.so``/usr/local/include``/usr/local/lib`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:58:07.380

你不应该`configure.ac`以任何方式修改你的。用户负责告诉工具链在哪里寻找库。对于用户（运行 configure 时的用户），一个简单的事情是设置一个 config.site 以便设置适当的标志。例如，在您的 .bashrc:`export CONFIG_SITE=$HOME/CONFIG_SITE`中，然后在 中`$HOME/CONFIG_SITE`，类似：

```
test "$prefix" = NONE && pfx=/usr/local || pfx=$prefix
: ${CPPFLAGS=-I$pfx/include}
: ${LDFLAGS=-L$pfx/lib} 
```

这将向编译器和链接器插入适当的标志，以始终查看一些常见位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:08:36.223

很可能是路径`/usr/local/include`，并且`/usr/local/lib`默认情况下编译器不会搜索。您可以在 configure.ac 脚本中修改`CFLAGS`和变量：`LDFLAGS`

```
CFLAGS="$CFLAGS -I/usr/local/include"
LDFLAGS="$LDFLAGS -L/usr/local/lib" 
```

在检查标题和库之前添加这两行。

可能您可能还必须设置`CPPFLAGS`（对于预处理器）和`CXXFLAGS`（如果您正在构建 C++ 代码）以添加包含路径。

**编辑：**`configure.ac`正如 William Pursell 所指出的，设置这些标志并不是真正推荐的。`configure`相反，您在调用生成的脚本时将这些设置为环境变量：

```
$ CPPFLAGS=-I/usr/local/include LDFLAGS=-L/usr/local/lib ./configure 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:05:58.123

总是有[AM_ICONV](http://www.gnu.org/software/gettext/manual/html_node/AM_005fICONV.html) automake 宏 (iconv.m4)，它是 GNU gettext 的一部分。您无需使用 gettext.m4。

# c++ - Openssl C++ 获取到期日期

> ID：11683021
> 
> 赞同：4
> 
> 时间：2012-07-27T07:08:50.993
> 
> 标签：c++, openssl, x509certificate

我应该使用什么函数来获取 x509 证书到期日期？我将首先检查证书的有效性。如果它已过期，我需要获取证书的过期日期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T07:12:05.900

我认为你应该使用这个。

```
#define     X509_get_notBefore(x) ((x)->cert_info->validity->notBefore)
#define     X509_get_notAfter(x) ((x)->cert_info->validity->notAfter) 
```

看看这个例子。示例使用此宏。

[http://www.openssl.org/docs/crypto/X509_STORE_CTX_set_verify_cb.html](http://www.openssl.org/docs/crypto/X509_STORE_CTX_set_verify_cb.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T08:27:47.637

编辑：您应该在使用 X509_get_notAfter 和 X509_get_notBefore 之后执行以下操作，如“永远”之前回答的那样。

要转换，`ASN1_TIME`您可以使用`ASN1_TIME_print()`asn1.h 中声明的例程。

这将完成这项工作：

```
BIO *bio;
int write = 0;
bio = BIO_new(BIO_s_mem());
if (bio) {
    if (ASN1_TIME_print(bio, tm))
        write = BIO_read(bio, buf, len-1);
    BIO_free(bio);
}
buf[write]='\0';
return write; 
```

# java - 重新格式化文本文件中的字符串并重新打印到另一个文本文件中 Java？

> ID：11683025
> 
> 赞同：-1
> 
> 时间：2012-07-27T07:09:16.443
> 
> 标签：java, string, text, text-files

文本文件中的字符串是这样的：

```
 Fulton County 6
    County Grand 1
    Grand Jury 2
    Jury said 1
    said Friday 4
    Friday an 1
    an investigation 5
    investigation of 15
    of Atlanta's 1
    Atlanta's recent 1
    recent primary 1
    primary election 2
    election produced 1
    produced `` 1
    `` no 6 
```

我想从中读取并重新打印到另一个文本文件中，格式如下：

```
 Fulton County           6
    County Grand            1
    Grand Jury              2
    Jury said               1
    said Friday             4
    Friday an               1
    an investigation        5
    investigation of        15
    of Atlanta's            1
    Atlanta's recent        1
    recent primary          1
    primary election        2
    election produced       1
    produced ``             1
    `` no                   6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:13:13.493

您可以使用来自 apache commons lang 的**StringUtils - 检查这个**[http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)和特别严重的**rightPad**方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:14:11.713

您可以使用 regexp " (\d+)" 查看[String .replaceAll](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)，然后将其替换为包含 \t + digit 的字符串以用于制表符

# c - 将数组传递给c中的函数

> ID：11683026
> 
> 赞同：0
> 
> 时间：2012-07-27T07:09:20.260
> 
> 标签：c, arrays, scope

我对将数组传递给函数有疑问。

考虑以下代码片段。

```
void main()
{
    int a[4]={10,20,30,40};
    fun1(a);
}

void fun1(int a1[])
{
  for(int i=0;i<4;i++)
  {
      printf("%d\n",a1[i]);
  }
} 
```

传递数组只不过是传递第一个位置的地址。我应该传递上面的数组及其名称（数组的起始地址）。我的怀疑是因为 a[4] 是一个自动变量，它应该在它从主函数中出来时死掉并且它应该给出意想不到的结果（指针应该是悬空的）。但它工作正常。

我对此感到非常困惑，请您清除它。

即使我们将单个元素`int a`作为传递`f(&a)`，它也不应该存在于函数 f 中，如果它被声明为自动（主函数中的局部变量）。

请也清除这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T07:12:10.407

是的，变量在终止`a`时将超出范围。`main()`

但是当`fun1`正在执行时，`main()`还没有达到终止，所以 的内容`a`仍然是完全有效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T07:18:12.620

你在做什么很好。该数组`a`确实超出了范围，但此时您的函数已经完成，因此您不必担心访问不再存在的数据。如果您担心将变量作为数组名称传递（这很好），您可以随时单步执行您的代码，以确保您访问的是您认为的数据。

您还可以通过传递一个额外的整数参数来指定您的数组的大小而不是将其硬编码为 4，从而使您的函数更安全。如果您使用了您拥有的函数并传递了一个长度小于 4 的整数数组，它将是访问越界内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:22:37.287

1.  void fun1 (int a1[]) 正在创建进入函数的任何数组的副本。所以它会存在。

2.  您也可以将其视为堆栈。将为 main() 方法创建一个堆栈。而且由于 fun1() 是从 main 方法调用的，所以 main 方法的堆栈只有在 fun1() 的堆栈被销毁时才会销毁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:12:32.363

`int a[]`在函数声明/定义中等于`const int *a`所以不会发生任何不好的事情，也不会隐式释放内存。

# javascript - 从 java 脚本函数调用 ruby 函数

> ID：11683028
> 
> 赞同：2
> 
> 时间：2012-07-27T07:09:45.290
> 
> 标签：javascript, html, ruby-on-rails, ruby, client-server

我写了一个ruby函数，想把它放在js文件中，js函数应该能够调用ruby函数并存储返回值。

是否可以？这个任务怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:15:08.853

我认为不可能，有几个原因：

1.  浏览器不支持 Ruby
2.  JavaScript 和 Ruby 有不同的类型系统，我不知道它们之间的任何接口
3.  此外，您不能将 JavaScript 代码和 Ruby 代码放在一个文件中，因为此类文件没有 mime 类型

所以我想你应该将你的 Ruby 函数转换为 JavaScript 函数。

或者，您可以将 Ruby 函数实现为服务器 API 的一部分，并通过 Ajax 从 JavaScript 调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:24:44.837

您需要的实现取决于您何时调用 ruby​​ 代码或函数

1.  是在构建或渲染页面或 js 时？

    然后你可以使用带有 .erb 扩展名的 js。（正如超级工程师所建议的那样）这允许你调用视图和应用程序助手中可用的任何 ruby​​ 代码和函数。

    例如 demo.js.erb

    ```
    var arr = "<%= call_function %>" 
    ```

2.  您需要客户端的功能吗？那么直接调用函数是不可能的，这种场景需要使用ajax。（由 Spernsky Daniel 建议）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:17:14.903

JavaScript 是客户端语言，Ruby 是服务器端语言，它们不能直接相互调用，使用 AJAX 或 WS 代替服务器端和客户端之间的通信。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T08:10:11.477

那么你可以有**js.erb**文件。您可以在其中包含 ruby​​ 代码。看看我项目中的这个代码片段。

```
$("#myModal").modal('hide');
<% if @status == "ok" %>
  <%= add_gritter("We will contact you as soon as possible!", :image => :success, :class_name => "gritter-light") %>
<% else %>
  <%= add_gritter("Something went wrong while saving you request. Please try again!", :image => :error, :class_name => "gritter-light") %>
<% end %> 
```

# deployment - .jar 下载时在 Web 浏览器上出现乱码输出

> ID：11683034
> 
> 赞同：0
> 
> 时间：2012-07-27T07:10:45.860
> 
> 标签：deployment, java-me, midlet

我将 .jar 文件部署到 Web 服务器并尝试使用旧诺基亚手机通过其 Web 浏览器下载 .jar 文件。下载完成后，网页浏览器会显示乱码输出，而不是提示安装。什么地方出了错？我是否必须为我的 .jar 应用程序创建某种安装文件？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:14:59.813

MIDlet 是 a`jad`和`jar`文件的组合。虽然有些浏览器允许直接安装 jar，但通常会将浏览器指向`jad`要安装的 jar。

并确保正确设置 MIME 类型。

`jad`s 需要 MIME 类型`text/vnd.sun.j2me.app-descriptor`，而`jar`s 是`application/java-archive`。

# android - cocos2dx 自动调整大小

> ID：11683036
> 
> 赞同：4
> 
> 时间：2012-07-27T07:10:57.263
> 
> 标签：android, ios, cocos2d-iphone, cocos2d-x

**我已经为大小为480*320**的设备使用 cocos2dx 制作了 android 构建，它工作正常，但是当我将相同的构建放入另一个大小为**640*480**的 android 设备中时，会出现缩放问题....

我正在使用以下代码自动重新调整大小，但它不起作用：

```
AppDelegate app;
CCEGLView& eglView = CCEGLView::sharedOpenGLView();
eglView.setViewName("Hello Lua");
eglView.setFrameSize(480, 320);

// set the design resolution screen size, if you want to use Design Resoulution scaled to current screen, please uncomment next line.
// eglView.setDesignResolutionSize(480, 320); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-04T21:56:54.733

首先，您粘贴的代码来自 main.cpp 文件，当您为 android 或 windows phone 或 ios 编译应用程序时，该文件不起作用。该文件适用于 win32 项目。

现在，对于应用程序的自动缩放，AppDelegate.cpp 中的函数应该设置设计分辨率以及策略。我使用 ExactFit 策略，因为它可以将应用程序拉伸以填充整个屏幕区域，并且它适用于 Android、Windows、iOS 一切（我已经开发了应用程序并进行了测试）：

```
bool AppDelegate::applicationDidFinishLaunching()
{
    // initialize director
    CCDirector *pDirector = CCDirector::sharedDirector();
    pDirector->setOpenGLView(CCEGLView::sharedOpenGLView());
    // turn on display FPS
    CCEGLView::sharedOpenGLView()->setDesignResolutionSize(1200, 720, kResolutionExactFit);
    pDirector->setDisplayStats(false);

    pDirector->setAnimationInterval(1.0 / 60);

    CCScene *pScene = HelloWorld::scene();

    pDirector->runWithScene(pScene);
    return true;
} 
```

您还应该查看[多分辨率支持的详细说明](http://www.cocos2d-x.org/wiki/Detailed_explanation_of_Cocos2d-x_Multi-resolution_adaptation)以更好地理解它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:20:41.607

如果您不知道拉伸外观，请执行此操作。它适用于所有设备。

```
pDirector->setOpenGLView(pEGLView);

CCSize frameSize = pDirector->getOpenGLView()->getFrameSize();
CCLog("%.2f and %.2f is Frame size\n",frameSize.width,frameSize.height);
pEGLView->setDesignResolutionSize(960, 640, kResolutionExactFit); 
```

注意：以上设置是针对横向的，如果您需要纵向设置，只需反转 pEGLView->setDesignResolutionSize(640, 960, kResolutionExactFit) 等值

这里要理解的是，您将在 640X960 的坐标上设计的所有内容，并且 kResolutionExactFit 会将这些内容修复为适合屏幕。为了更容易做到这一点，您应该使用 Coocos Builder [http://cocosbuilder.com/](http://cocosbuilder.com/)并在 640X960 的自定义布局上设计所有内容

我推荐双分辨率（640X960），因为这样质量不会降低，并且在所有类型的设备上看起来都很清晰，但是拉伸外观的缺点会存在。

如果你想以多种方式考虑多种分辨率，那么你必须制作多个图形和多个布局，再次，Cocos Builder 将是做到这一点的最佳方式。

即，对于 iPhone 5，它会有所不同，而对于 iPad 和标准 480X320，它会有所不同。为此，您可以检查帧大小以选择相应的视图。

```
CCSize frameSize = pDirector->getOpenGLView()->getFrameSize(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T22:29:50.363

您应该在每一侧都经历一些切割。这样做是因为兼容模式与 480x320 的屏幕分辨率匹配的最佳方式。其他选项是保留部分高度或拉伸图像（以牺牲一些性能（？）为代价）。

第一个`CCEGLView::create`方法很容易完成，您可以在比例因子公式中将 MIN 更改为 MAX 并完成，但这可能会破坏`y`您的精灵的所有位置：P

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-03T03:21:54.837

```
bool AppDelegate::applicationDidFinishLaunching()
{
    // initialize director
    CCDirector* pDirector = CCDirector::sharedDirector();
    CCEGLView* pEGLView = CCEGLView::sharedOpenGLView();

    pDirector->setOpenGLView(pEGLView);

    // Set the design resolution
    // iPad size
    CCPoint res = CCPoint(768,1024);
    pEGLView->setDesignResolutionSize(res.x,
                                      res.y,
                                      kResolutionNoBorder);
  .....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T18:53:35.377

检查分辨率并更改屏幕尺寸：（此示例为纵向游戏）

```
typedef struct tagResource
{
   cocos2d::Size size;
   char directory[100];
}Resource;

std::vector<std::string> searchPath;
static Resource designResource =  { cocos2d::Size(768, 1024),  "ipad"};
static Resource smallResource  =  { cocos2d::Size(320, 480),   "iphone"};
static Resource galax7Resource =  { cocos2d::Size(600, 1024),  "gt_7p"  };
static Resource mediumResource =  { cocos2d::Size(768, 1024),  "ipad"};
static Resource galax10Resource =  { cocos2d::Size(800, 1280),  "gt_10p"};
static Resource fullHDResource  =  { cocos2d::Size(1080, 1920), "fullhd"};
static Resource largeResource  =  { cocos2d::Size(1536, 2048), "ipadhd"};
auto director = Director::getInstance();
auto glview = director->getOpenGLView();
glview->setDesignResolutionSize(designResource.size.width, designResource.size.height, ResolutionPolicy::EXACT_FIT);
Size frameSize = glview->getFrameSize();
Resource realResource;
// if the frame's height is larger than the height of medium size.
if (frameSize.height > fullHDResource.size.height) {
    realResource = largeResource;
    CCLOG("largeResource");
} else if (frameSize.height > galax10Resource.size.height) {
    realResource = fullHDResource;
    CCLOG("fullHDResource");
} else if (frameSize.height > mediumResource.size.height) {
    realResource = galax10Resource;
    CCLOG("galax10Resource");
} else if (frameSize.height > smallResource.size.height) {
    if(frameSize.width > galax7Resource.size.width){
        realResource = mediumResource;
        CCLOG("mediumResource");
    }else {
        realResource = galax7Resource;
        CCLOG("galax7Resource");
    }
} else {
    realResource = smallResource;
    CCLOG("smallResource");
}
director->setContentScaleFactor(MIN(realResource.size.height/designResource.size.height, realResource.size.width/designResource.size.width));
searchPath.push_back(realResource.directory);
    auto fileUtils = FileUtils::getInstance();
fileUtils->setSearchPaths(searchPath); 
```

我正在使用 cocos2dx V3，但 V2 的想法是相同的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-04T10:25:48.850

我在 AppDelegate.cpp 中的 3match 游戏中使用了以下分辨率策略

```
#define IS_LANDSCAPE

#ifdef IS_LANDSCAPE
static cocos2d::Size designResolutionSize = cocos2d::Size(1136,768);
#else
static cocos2d::Size designResolutionSize = cocos2d::Size(768,1136);
#endif

//==========================
bool AppDelegate::applicationDidFinishLaunching() {

    // initialize director
    auto director = Director::getInstance();
    auto glview = director->getOpenGLView();
    if(!glview) {
        glview = GLViewImpl::create("My Game");
        director->setOpenGLView(glview);
    }

    // turn on display FPS
    director->setDisplayStats(false);

    // set FPS. the default value is 1.0/60 if you don't call this
    director->setAnimationInterval(1.0 / 60);

    // Set the design resolution
     glview->setDesignResolutionSize(designResolutionSize.width, designResolutionSize.height, ResolutionPolicy::NO_BORDER);

    register_all_packages();

    // create a scene. it's an autorelease object
    auto scene =loading::createScene();

    // run
    director->runWithScene(scene);

    return true;
} 
```

# sql - 如何为员工轮班管理建模（mvc）抽象时间段

> ID：11683042
> 
> 赞同：1
> 
> 时间：2012-07-27T07:11:40.803
> 
> 标签：sql, model-view-controller, time, icalendar, overlapping

*我已经开始考虑一个员工轮班管理应用程序来处理我当前工作场所的轮班（谁在什么时候工作，交易等）（使用笔和纸，而且无论如何我们员工都无法在不经过的情况下就变化进行沟通老板并在现场）。*

目前，这些转变被松散地建模为：

*   有一个重复的 4 周周期（从周一第 1 周到周日第 4 周）
*   有一个模板可以在这 4 周内安排员工
*   每 4 个月（即每年 3 次）在接下来的 4 个月期间预测 4 周模板

*很长一段时间以来，轮班都是一样的，似乎许多员工更愿意改变他们（我可以通过每次设定新的 4 个月时提出的变更请求来说明这一点）。*

我的目标是模型：

*   Shift_group_tpl（上面的 4 周）
*   Shift_tpl（4 周内的单次轮班，包括有关谁默认在此轮班工作的信息）
*   Shift_group（实际班次的设定时间段）
*   班次（具有实时时间段和员工的固定班次 - 以及在 start_time、end_time 和员工中都可以更改的可能性）

我已经想到了一种通过重复 iCalendar 事件执行此操作的方法：创建 RRULE（没有结束时间），然后计算（使用临时开始和结束时间）是否可以在真正的 Shift_group 中使用特定的 Shift_group_tpl。（这种方法的问题是我不知道如何修剪 Shift_group_tpl 以适应 Shift_group 的开头或结尾。）

我正在寻找的是其他一些观点或方法，甚至只是拍拍肩膀让我知道我在正确的轨道上（然后就修剪问题提供建议）。

/iole1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:26:44.440

> 我的目标是模型：
> 
> Shift_group_tpl（上述 4 周期间） Shift_tpl（4 周期间的一个班次，包括有关谁默认工作此班次的信息） Shift_group（实际班次的设定时间段） Shift（实际时间段的设定班次）和员工 - 以及在 start_time、end_time 和员工中都可以更改的可能性）

你有“sql”作为这篇文章的标签吗？所以我猜你想要这些作为 SQL 表？

从声音上看，问题在于您考虑的是您拥有的数据，而不是存储该数据所需的抽象概念。这是创建应用程序所需要做的。（很可能是“班次”表，而不是上面的四个表）。

这里几乎没有信息可以提供帮助，请考虑完善您的想法并提出另一个问题。

# django - Django modelformset 创建新记录而不是更新现有记录

> ID：11683043
> 
> 赞同：2
> 
> 时间：2012-07-27T07:11:46.960
> 
> 标签：django, django-forms

我有一个可以有一个或多个模型的系统。我已经在数据库中用多对多字段建模了这种关系。下面的代码用于在单个表单中编辑系统及其相关方法。

通过填写表单并按下提交来添加*新方法**仅在第一次时*有效。如果我再做一个小改动并再次提交，我会收到以下消息（由下面的代码生成）：

```
METHODFORMSET.ERRORS: [{}, {'name': [u'Method with this Name already exists.']}] 
```

这是由于 name 字段是唯一的，但它应该已经*更新*，而不是*创建*新记录，即使我使用 POST 数据来生成 methodformset 实例......

请注意，此行为仅适用于最后附加的方法实例，不适用于表中已经存在的方法实例。

这是相关代码，谁能告诉我我做错了什么？

```
def sysedit(request, sys_id):

    system = System.objects.get(id=sys_id)
    MethodFormSet = modelformset_factory(Method, form=MethodForm)

    post = None
    if request.POST:
        post = request.POST.copy()
        if 'add_method' in request.POST:
            post['method-TOTAL_FORMS'] = repr(int(
                                                post['method-TOTAL_FORMS'])+ 1)

    systemform = SystemForm(data=post, instance=system)

    methodformset = MethodFormSet(data=post, prefix='method',
            queryset=Method.objects.filter(id__in=system.method.all()))

    if methodformset.is_valid():
        mfs = methodformset.save()
        print 'SAVED-method', mfs
        for mf in mfs:
            if systemform.is_valid():
                sp = systemform.save(mf)
                print 'SYSTEM', sp
            else:
                print 'SYSFORMSET.ERRORS:', systemform.errors
    else:
        print 'METHODFORMSET.ERRORS:', methodformset.errors

    return render_to_response('sysedit.html', 
            {'systemform': systemform, 
            'methodformset': methodformset, 
            'system': system},
            context_instance=RequestContext(request))

class System(models.Model):
    method = models.ManyToManyField(Method)
    ...

class Method(models.Model):
    name = models.CharField(unique=True)
    ...

class MethodForm(ModelForm):
    class Meta:
        model = Method

class SystemForm(ModelForm):
    def save(self, new_method=None, commit=True, *args, **kwargs):
        m = super(SystemForm, self).save(commit=False, *args, **kwargs)
        if new_method:
            m.method.add(new_method)
        if commit:
            m.save()
        return m

    class Meta:
        model = System
        exclude = ('method') 
```

[**在 Sergzach 回答后编辑**]：

问题不在于如何处理`Method with this name already exists`错误，而是首先防止错误发生。我认为实际问题可能与 modelformsets 处理新表单的方式有关。不知何故，它看起来总是试图为最后一个表单集创建一个新实例，无论它是否已经退出。

因此，如果我在添加最后一个表单集后不添加新表单集，则模型表单集将尝试重新创建最后一个表单集（即使它只是在上次提交时创建的）。

最初的情况是我在 methodformset 中有 1 个有效的 Method 实例和 1 个新的未绑定实例。然后我填写表格并点击保存，这将验证两个方法并绑定第二个方法，然后将其保存到表中。到目前为止一切都很好，但是如果我第二次点击保存，就会发生错误。也许这与method-TOTAL_FORMS=2 和method-INITIAL_FORMS=1 的事实有关。难道这会导致modelformset强制在第二种方法上创建？

任何人都可以确认/否认这一点吗？

[**在一个周末不看代码后编辑**]：

问题是由于我将表单保存在视图中并且在保存之后，我将原始的 methodformset 实例（从保存**之前**）发送到模板。**可以通过在保存后**使用查询集而不是 POST 数据重新实例化模型表单集来解决该问题。

因此，防止此类错误的一般规则是在保存后转到不同的页面（完全避免），或者使用上述解决方案。

在我将此作为解决方案发布之前，我需要进行更多测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:59:19.390

您可以在保存表单集时验证每个表单。我创建了一个简单的示例（类似于您的代码），它对我来说效果很好。如果没有具有此类名称的对象，它将创建新对象，否则它会编辑现有对象。

您需要一个表单来编辑模型对象：

```
class EditMethodForm( forms.ModelForm ):
   class Meta:
      model = Method
      exclude = ( 'name', ) 
```

然后代替 methodformset.is_valid() 你做下一个：

```
for methodform in methodformset:
    try:
        instance = Method.objects.get( name = request.POST[ 'name' ] )
    except Method.DoesNotExist:
        methodform.save()
    else:
        editmethodform = EditMethodForm( request.POST, instance = instance )
        if editmethodform.is_valid():
            editmethodform.save() 
```

您的代码中有一些附加功能。我展示了工作原理。了解解决方案就足够了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:27:46.460

我已经通过在保存后重新实例化 modelformset 解决了这个问题（请参阅问题底部的编辑）

# java - 返回 ArrayList 还是列表？

> ID：11683044
> 
> 赞同：13
> 
> 时间：2012-07-27T07:11:48.183
> 
> 标签：java, list, optimization

我正在创建一个供人们使用的库，但为什么我的方法应该返回**List**而不是**ArrayList**？

因为如果用户知道真正的类型是**ArrayList**，他将在循环中使用访问器 [] 而不是迭代器，但如果他不知道，他将使用迭代器。

**LinkedList**同样的问题，如果返回类型是 List 他将无法使用正确的访问器。

我对吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T07:13:52.863

返回**List**将使您的库的用户可以使用任何实现**List**接口的东西，而使用**ArrayList**将迫使他们使用**ArrayList**。

如果将来您作为库创建者决定更改您的内部实现，那么这些更改将通过您库的通用接口对最终用户隐藏。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T07:17:43.717

因为您库的用户永远不应该知道您在内部使用 ArrayList。

例如，假设您返回一个 ArrayList 并且很多人已经开始使用您的库。现在，如果您突然意识到 LinkedList 更适合您的目的，那么您就破坏了所有当前使用您的代码的人的兼容性。

这就是为什么编写接口而不是实现总是更好的原因，当您编写专门用于重用的代码时更是如此。接口（在本例中为 List）充当您的代码和客户端代码之间的契约。它告诉他们你的代码做了*什么*（接口），而不告诉他们它是*怎么*做的（通过不公开实现）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-27T07:17:13.543

如果可能，返回一个接口（或失败的超类？）。这样，如果被覆盖，该方法可以具有更广泛的应用。这可能会阻止某些特定于类的方法在返回的对象上可用，但没有什么能阻止程序员获取`List`数据并将其复制到`Collection`他们喜欢使用的任何地方。

```
List myList = new MyLibrary().getList();

ArrayList myArrayList = new ArrayList(myList);
LinkedList myLinkedList = new LinkedList(myList); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T07:24:25.620

**1.**它的概念`Interface Polymorphism`。

**2.**最好有`List<My_Obj> arr = new ArrayList<My_Obj>;`

**3.**假设你想使用**LinkedList而不是ArrayList作为某个点，那么你不需要担心如何去做。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T07:28:08.020

如果您要返回 List，那么您的库的用户可以使用任何实现 List 接口的东西。它可能是数组列表或链表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-27T07:15:04.173

因为您的用户可以从您的列表中选择`ArrayList`或`LinkedList`，所以您将给他一个选择。它被称为[接口编程](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)。你应该给你的 API 用户尽可能多的自由，而这种技术是实现它的方法之一。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-27T07:15:39.440

他们不必使用迭代器 - List 接口支持`get(int index)`作为一种方法。如果您希望灵活地将底层容器更改为支持列表接口的任何内容，请使用`List`. 如果返回的内容需要特定`ArrayList`方法，请使用`ArrayList`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-31T22:23:46.383

我通常会选择最通用的类​​型。在这种情况下，您可以返回比 List 更通用的类型，例如`Collection`or `Iterable`。

通过返回 Iterable，编译器将阻止调用代码尝试将元素添加到您的列表中。这比依靠`Collections.unmodifiableList()`在运行时失败要强大得多。

使用更通用的类型也为您在未来提供了更多的回旋余地。也许您的方法会从流式源而不是内存中的源加载数据：那么 Iterable 变得比 List 更合适。

# php - ECHO page1.php textarea 值转换为 page2.php

> ID：11683049
> 
> 赞同：0
> 
> 时间：2012-07-27T07:12:10.970
> 
> 标签：php, html, forms

我的文件夹中有 2 个 php 文件。在 page1.php 中有一个 textarea，用户应该在其中输入一些值。在 page2.php 中，它将抓取 textarea 中的内容并使用它的程序。但是我找不到在 textarea 中获取值的命令。有人能帮我吗？

page1.php：

```
<?
$hello = "hello";
?>
<html>
<input type = "text" name = "user_input">
</input>
</html> 
```

page2.php

```
<?
ob_start();
include 'page1.php';
ob_end_clean(); 
echo $hello;
?> 
```

那么，有没有人可以解决这个问题？=/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:16:18.663

在 page2.php 中使用`$_GET`或`$_POST`

page1.php

```
<?
 $hello = "hello"; 
?>
<html>
<form method="get" action="page2.php" enctype="multipart/form-data">
<input type = "text" name = "user_input">
<input type="submit">
</form>
</html> 
```

page2.php

```
<?
$text=$_GET['user_input'];
ob_start();
include 'page1.php';
ob_end_clean(); 
echo $hello;
echo $text;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:23:24.670

您可以使用`$_GET['user_input']`或`$_POST['user_input']`。

不同之处在于，您可以在使用方法时看到 url 中的数据（每个人都可见），`GET`而不是在其他方法中。

此外，始终`<input>`在 a 中使用元素（您要传递给另一个文件）`<form>`并指定`action="file.php"`要传递数据的位置，以及方法，或者`method="get"`或`method="post"`，例如；

`<form method="get" action="page2.php">`

还指定在目标文件中获取数据的方法，例如；

`$text=$_GET['user_input'];`或者`$text=$_POST['user_input'];`

在你的情况下，你可以使用；

**方法一**

```
<?php
 $hello = "hello"; 
?>
<html>
<form method="get" action="page2.php">
<input type="text" name="user_input">
<input type="submit">
</form>
</html> 
```

*page2.php*

```
<?php
$text=$_GET['user_input'];
echo $text;
?> 
```

**方法二**

```
<?php
 $hello = "hello"; 
?>
<html>
<form method="post" action="page2.php">
<input type="text" name="user_input">
<input type="submit">
</form>
</html> 
```

*page2.php*

```
<?php
$text=$_POST['user_input'];
echo $text;
?> 
```

如果您想在多个页面上共享数据，您可以使用**PHP Session**或将数据保存在 cookie 中。

**1\. 使用会话**

```
<?php
session_start(); 
$_SESSION['data'] = 1; // store session data
echo "Pageviews = ". $_SESSION['data']; //retrieve data
?> 
```

确保`session_start();`在要处理会话的每个页面上添加

您可以在此处阅读有关 php 会话的更多信息[www.tizag.com/phpT/phpsessions.php/](http://www.tizag.com/phpT/phpsessions.php/)

**2\. 使用 Cookie**

```
<?php
setcookie("user", "Alex Porter", time()+3600);
?> 
```

并使用

```
echo $_COOKIE["user"]; 
```

您可以在此处阅读有关 php 会话的更多信息[http://www.w3schools.com/php/php_cookies.asp](http://www.w3schools.com/php/php_cookies.asp)

希望这可以帮助...`:)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:22:46.540

基本上，您的 page1.php 是一个带有某种形式的页面，其中包含一个文本区域。现在用户必须填写它并将表单提交给 page2.php。您不能像那样回显它的内容，因为这将在浏览器上受用户操作的影响。使用表单并将数据提交到 page2.php。像这样：

page1.php

```
<html>
    <head>
    </head>
<body>
    <form action="page2.php" method="post">
    <textarea name="t1">
    </textarea>
    </form>
</body>
</html> 
```

page2.php

```
<?php
$textAreaContents = isset($_POST['t1'])?$_POST['t1']:'';
echo "You submitted: ".$textAreaContents;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:56:06.380

如果我是你，我应该为此使用会话。那是他们被制造的地方..

示例：当用户单击提交时。

```
<?php
if($_SERVER['REQUEST_METHOD'] == 'POST')
  {
    $_SESSION['post'] = $_POST;
  } 
```

这就是将每个 post 变量放入会话的地方。你的输入框将是这样的..

```
<textarea name="message" type="text" value="" rows="0" cols="0" placeholder=""  ><?php if(isset($_SESSION['post'])){echo $_SESSION['post']['message'];}  ?></textarea> 
?> 
```

请注意，您现在可以通过 echo 使用您在表单中使用的每个 post 变量（示例）

```
echo $_SESSION['post']['message'] 
```

其中 message 是输入框的名称。在这种文本区域的情况下

当你不想再使用会话时，不要忘记最后使用 session_destroy(); 否则，您将继续以您的形式拥有它。并且不要忘记 session_start(); 在您计划使用会话的每一页上方（它必须始终位于文档的第一行）

# api - JIRA Rest API - 使用“order by”的 JQL 高级搜索

> ID：11683050
> 
> 赞同：2
> 
> 时间：2012-07-27T07:12:14.823
> 
> 标签：api, rest, jira

我已经实现了一项服务，通过 Rest 调用来查找 JIRA 问题。在我使用 SOAP API 之前，但我读到，这个 API 仍然存在，但不会进一步开发。在我的旧服务中，我在查询中有一个带有“order by”的 JQL 高级搜索，一切正常。现在，在 Rest 调用中，“order by”不再起作用。有没有可能这样做或者我做错了什么？我尝试了两个不同的版本：

[https://www.jirawebsite.de/rest/api/2/search?jql=project=](https://www.jirawebsite.de/rest/api/2/search?jql=project=) 'projectname'&update>='2012/07/15%2012:00'&update<='2012/07/25%2012 :00'+order+by+key+DESC

[https://www.jirawebsite.de/rest/api/2/search?jql=project=](https://www.jirawebsite.de/rest/api/2/search?jql=project=) 'projectname'&update>='2012/07/15%2012:00'&update<='2012/07/25%2012 :00'%20order%20by%20key%20DESC

两者都不起作用，这意味着我遇到了问题，但没有特定的顺序。在我读过的 atlassian 页面上，过滤器会覆盖“order by”。这是否意味着无法通过查询对问题进行排序，或者我的通话有误？我的谷歌和论坛搜索对我没有任何结果..

谢谢。

问候卡斯滕

# android - 如何使用 Eclipse 在 Java 中创建 Web 服务

> ID：11683052
> 
> 赞同：0
> 
> 时间：2012-07-27T07:12:32.093
> 
> 标签：android, eclipse, web-services

谁能告诉我，如何使用 eclipse 在 java 中创建一个简单的 Web 服务，然后告诉我如何在云上托管该服务。

是否有任何方法或方法来创建 Web 服务而不是使用 ECLIPSE？谁能给我一些简单的步骤或例子？

感谢您宝贵的时间！......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:16:49.033

[This](http://www.vogella.com/articles/JavaPersistenceAPI/article.html "这")和[This](http://www.objectdb.com/tutorial/jpa/eclipse "这个链接")将帮助您在 Eclipse 中使用 JPA 在 Java 中创建 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:18:56.220

你应该检查[这个](http://www.vogella.com/articles/REST/article.html)。Jersey 是用于在 JAVA 中创建 REST Web 服务的框架。

# git - 致命的：不是 git 存储库：'git'

> ID：11683056
> 
> 赞同：0
> 
> 时间：2012-07-27T07:12:46.193
> 
> 标签：git, https, ssh

我使用 git+bitbucket 作为我的版本控制系统。

当我这样做`git push -u origin master`（`origin`使用https）时，我得到：

```
fatal: not a git repository: 'git'
fatal: the remote end hung up unexpectedly 
```

我的 git bash 版本是 1.7.10。我的操作系统是Win7。

令我惊讶的是，如果我使用 SSH 协议，我可以推送。我认为我的 https 或我的计算机环境存在一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:36:17.497

在大多数情况下，您无法推送**https**。为此，您需要更多。在大多数情况下，您会推送**ssh**或**git** protocoll，因为这样您就有足够的权限访问 git 文件。

通常，当您所在的文件夹没有**.git**文件夹时，您收到的消息不是 git 存储库。但是很奇怪，您可以推送 ssh。

第二种方法是当远程仓库不存在并且他无法在远程服务器上找到裸文件时，您会收到消息。**当您通过https**尝试时，这是可能的。

# xcode - 适用于 mac os 10.7.3 的 xcode

> ID：11683057
> 
> 赞同：-2
> 
> 时间：2012-07-27T07:12:49.070
> 
> 标签：xcode, macos, gcc, rvm

我最近得到了一个 mac 并且对 macos 的经验很少。**操作系统为 10.7.3* *a

我安装了 RVM ，并注意到在安装 ruby​​ 时它抱怨 gcc 没有用。[我的机器上也没有clang]

在网上，我发现有人要求 dnload xcode 捆绑了必要的 lib。

但是，我无法为我的操作系统找到指向兼容版本的 xcode 的链接。

好像我已经设法安装了 xcode [出现了一个应用程序，其中包含档案、文档、项目等选项卡..它们都是空的]。

我需要安装“xcode 工具”吗？是否有直接链接可用，苹果网站令人困惑，应用商店上的那个无法安装在我的操作系统上。

这可能是一个新手问题，但我看到许多用户试图获得详细的程序。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:20:04.870

安装 Xcode 应该意味着 gcc 现在可用，尽管您可能需要安装“命令行工具”。可以在[此处](https://developer.apple.com/downloads/index.action)找到所有 Apple Developer 下载，包括 10.7 的“命令行工具”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:38:39.317

安装[osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer/downloads)足以在 RVM 中编译 rubies

请务必阅读`rvm requirements`，因为它提供了安装 rubies 的重要信息。

# java - 如何使用椭圆验证框架验证数组？

> ID：11683070
> 
> 赞同：2
> 
> 时间：2012-07-27T07:13:44.307
> 
> 标签：java, arrays, validation, oval

我有一个 bean 对象，想使用椭圆验证框架来验证它的字段。例如

```
public class Demo{

    @Range(min=1)
    private long id;

    @NotNull
    private long[] values;
} 
```

如上所述，我有一个类型为 long 数组的字段。我想确保数组不为空，并且其中的每个元素都必须大于零。我不知道如何验证以确保其元素大于零。谁能告诉我？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T00:19:21.960

您可以使用 applyTo 属性：

```
@NotNull(appliesTo = {ConstraintTarget.CONTAINER, ConstraintTarget.VALUES})
private long[] values; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-07T04:00:37.783

```
/* ConstraintTarget.CONTAINER(i.e List) and 
 * ConstraintTarget.VALUES( i.e List elements)
 * it means List shouldn't be null & Its elements shouldn't be null 
 */
@NotNull(appliesTo= {ConstraintTarget.CONTAINER,ConstraintTarget.VALUES})
/*
 * List size should be greater than or equal to 1
 */
@Size(min=1)
/*
 * ConstraintTarget.VALUES means List elements shouldn't be empty
 */
@NotEmpty(appliesTo = {ConstraintTarget.VALUES})
private List<String> roles; 
```

# sql - 仅在更新特定列时创建新行

> ID：11683072
> 
> 赞同：1
> 
> 时间：2012-07-27T07:13:47.410
> 
> 标签：sql, sql-server, sql-server-2008

我有以下 SQL 触发器：

```
ALTER TRIGGER [dbo].[DIENSTLEISTUNG_Update]
ON [dbo].[DIENSTLEISTUNG]
INSTEAD OF UPDATE
AS
BEGIN

SET  NOCOUNT ON;

        INSERT INTO [DIENSTLEISTUNG] 
                 (DESCRIPTION, QUANTITY, 
                  PRICE, AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
                  AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
                  UPDATE_USER, UPDATE_DATE,
                  PERMISSIONS, KONTRAKTPOSITION,ITEMNUMBER,
                  PRIORITY, VALID)
        SELECT  DESCRIPTION, QUANTITY, PRICE AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
                AZ_SA,AZ_SO,SERVICETYPE_ID, UPDATE_USER,GETDATE(),
                PERMISSIONS, KONTRAKTPOSITION,ITEMNUMBER, PRIORITY, 'Y',VALID
        FROM INSERTED

        UPDATE  SERVICE
        SET  VALID = 'N' 
        FROM    SERVICE
                INNER JOIN INSERTED ON INSERTED.ID = SERVICE.ID

SET  NOCOUNT OFF;      
END 
```

如果原始行发生更改，触发器会复制具有新 ID 的整行。到现在为止还挺好。我希望触发器仅在更新`PRICE`或`DESCRIPTION`更新时创建一个新行。如果我对`PRIORITY`or`ITEMNUMER`或其他列进行更新，则触发器应该只更新行，而不是创建新行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:29:46.903

您可以使用 INSERTED 和 DELETED 表：

```
INSERT INTO [DIENSTLEISTUNG] 
         (DESCRIPTION, QUANTITY, 
          PRICE, AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
          AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
          UPDATE_USER, UPDATE_DATE,
          PERMISSIONS, KONTRAKTPOSITION,ITEMNUMBER,
          PRIORITY, VALID)
SELECT  i.DESCRIPTION, i.QUANTITY, i.PRICE, i.AZ_MO, i.AZ_DI,i.AZ_MI,i.AZ_DO,i.AZ_FR,
        i.AZ_SA,i.AZ_SO,i.SERVICETYPE_ID, i.UPDATE_USER,GETDATE(),
        i.PERMISSIONS, i.KONTRAKTPOSITION,i.ITEMNUMBER, i.PRIORITY, 'Y',i.VALID
FROM INSERTED i
     JOIN deleted d ON i.ID=d.ID
WHERE i.PRICE<>d.PRICE
      or i.DESCRIPTION<>d.DESCRIPTION

    UPDATE  S
    SET  s.VALID = 'N',
         s.priority=i.priority,
         s.QUANTITY =i.QUANTITY,
         ...  
    FROM    SERVICE s
            JOIN INSERTED i ON I.ID = S.ID
            JOIN deleted d ON i.ID=d.ID
    WHERE i.PRICE=d.PRICE
          or i.DESCRIPTION=d.DESCRIPTION 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:19:33.780

您需要检查 COLUMNS_UPDATED 属性。结果值取决于表的结构。

[http://msdn.microsoft.com/en-us/library/ms186329.aspx](http://msdn.microsoft.com/en-us/library/ms186329.aspx)

或者您可以比较删除表和插入表中的值。

# wicket - 在检票口中添加 .properties 文件

> ID：11683075
> 
> 赞同：1
> 
> 时间：2012-07-27T07:14:07.850
> 
> 标签：wicket

我正在使用 wickets 1.5。我有注册页面，其中的文件必须仅验证数字（如电话号码）。我有一个验证类如下

```
public class Validator implements IValidator<String> {
        Pattern pattern;
        public Validator() {
        pattern = Pattern.compile("[0-9]+");
        }

        public void validate(IValidatable<String> validatable) {
        final String field = validatable.getValue();

        if (pattern.matcher(field).matches() == false) {

            error(validatable, "phoneno" );
        }

        }

    private void error(IValidatable<String> validatable, String errorKey) {
    ValidationError error = new ValidationError();
    error.addMessageKey(getClass().getSimpleName() + "." + errorKey);
    validatable.error(error);
    }

} 
```

我的 Registration.properites 文件与 Registation.html 和 .java 文件位于同一个包中。我的**Registration.properites**是

**Registration.phoneno= 请只输入数字**

我在我的检票口类
**phoneno.add(new Validator());**

我得到以下错误

**找不到组件的错误消息：TextField@sendform:phoneno 和错误：[ValidationError message=[null]，keys=[Validator.phoneno]，variables=[null]]。尝试过的键：phoneno.Validator.phoneno、Validator.phoneno。**

我做错了什么？我已经按照下面的链接 [http://www.mkyong.com/wicket/create-custom-validator-in-wicket/](http://www.mkyong.com/wicket/create-custom-validator-in-wicket/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:38:34.727

我认为您没有正确指定属性键。`getClass().getSimpleName()`当您的密钥以“注册”开头时，该方法将返回“验证器”。试试这个：

```
error.addMessageKey("Registration.phoneno"); 
```

# css - Chrome CSS 背景图像出现白色区域

> ID：11683077
> 
> 赞同：0
> 
> 时间：2012-07-27T07:14:14.873
> 
> 标签：css, image, google-chrome, background

我有一个神秘的（至少对我而言）css 背景图片问题，我只在 Google Chrome 中遇到过。我发现了类似的主题，但与那些不同的是，这里不涉及 Javascript、JQuery 或其他任何内容，它是纯 CSS。它只是没有按应有的方式工作。

如果您打开页面 www.bodrogietterem.hu，背景图像应该位于整个内容区域的下方（就像在其他浏览器中一样）。在 Chrome 中会出现一个水平和垂直的白色区域。

一旦你开始滚动，背景图像就会显示一切正常，并且从那时起它就一直存在。同样，当您使用检查元素打开开发工具时，背景图像会立即出现，并且也会保留在那里。

这是相关的CSS：

```
body.page-node-1  div#main{
background:#FFFFFF url('/sites/all/themes/bodrogietterem/images/bodrogi_bodrogi.jpg') bottom;
background-repeat:no-repeat;
background-attachment:fixed;
background-position:50% 135px;
padding-bottom:0px;
margin-bottom:0px;
} 
```

并附上两个关于它的外观和外观的屏幕截图（好吧，作为新用户，我不允许附加这些，但请看这里：

[http://www.bodrogietterem.hu/chrome_issue.JPG](http://www.bodrogietterem.hu/chrome_issue.JPG)

和这里

[http://www.bodrogietterem.hu/should_look_like.JPG](http://www.bodrogietterem.hu/should_look_like.JPG)

它也发生在子页面上，但我认为问题的根源必须相同。

我正在使用 Vista、最新的 Chrome (20.0.1132.57) 和最新的其他浏览器。顺便说一句，第二张截图也是在 Chrome 中拍摄的，但是在打开开发工具之后

非常感谢您的帮助，最好的，Zsolt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:01:01.307

感谢您的帮助，我终于设法解决了这个问题。

在摆弄的同时，我测量了白色区域的高度，结果是 135px（这正是上面 CSS 中背景的顶部位置）。所以我决定无论出于何种原因，该属性导致了问题，我是对的。

作为一个快速而肮脏的解决方案，我在背景图像的顶部添加了 135px 的白色区域，并将 background-position 属性的顶部设置为 0px - 这立即解决了问题。

至于垂直白色区域，它是通过将背景图像绑定到#main-wrapper div而不是#main div（它是Drupal 7构建）来解决的。同样，我不完全知道为什么，但它立即解决了问题。

我喜欢，网络应该如何精确和合乎逻辑，并且有时它仍然保持随机和临时性

再次感谢您的时间和精力，最好的，Zsolt

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:54:50.400

Chrome 的最新版本是 21.0...所以尝试更新 chrome 浏览器，看看它在最新版本中是否正常。屏幕截图会导致 404 错误页面，因此请尝试再次上传屏幕截图。

我还检查了 IE7、IE8、IE9 中的页面，页面在所有 3 中看起来都不错，但 IE7 在底部显示了一个水平滚动条，但背景图像看起来还不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T19:50:48.800

您的页面在 Windows 7 中的 Chrome 中看起来不错（Chrome 20.0.1132.57）

过去我遇到过一些问题，即已安装的各种工具栏/插件会干扰页面上的 CSS，从而显着导致 Chrome 在孤立事件中出现故障。尝试在未安装插件/插件的情况下运行 chrome，看看它是否能解决您的问题。

对 CSS 的一项观察：`#content`包含未清除的浮动元素。我不认为这是这里的问题，但可能与上述问题混合在一起。

让我知道这是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T15:17:56.393

[http://www.stoerbeton.nl](http://www.stoerbeton.nl)的两页也有同样的问题，但我想我在阅读了你的上述帖子和一些想法后解决了这个问题。

问题可能出在一般背景中： url; 网站css的属性和加载。我替换了所有一般背景：#222222 url repeat 等；对于背景图像：；，背景重复：；和背景颜色：；等等

请让我知道您的网站在编辑您的 CSS 后是否可以正常工作。我还在测试。

问候，aquaster.nl

# css - 需要在 css 图像库中进行更正

> ID：11683081
> 
> 赞同：0
> 
> 时间：2012-07-27T07:15:01.000
> 
> 标签：css

在下页的图片库中，如何将图片库的缩略图对齐到中心。 [http://kbay.in/details.php?id=5](http://kbay.in/details.php?id=5)

我尝试了所有方法，包括对齐表格和 tds ......非常需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:15:04.220

尝试这个

1) - 从**div id="galleryVideo** "正上方的表格数据中删除**align="center "**

 **`<td colspan="4" height="310" align="center" valign="middle">`

2) - 然后在 ID Gallery 添加 padding-left: 50px; 或您喜欢的百分比。

```
<div id="gallery" style="padding-left: 50px;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:20:30.113

恐怕使用表格进行这种布局并不是最佳选择。您应该重新考虑使用 div 元素创建它。

这是一个带有示例布局的 jsfiddle：http: [//jsfiddle.net/J4bkm/10/](http://jsfiddle.net/J4bkm/10/)**

# javascript - 第二次单击时“阻止此页面创建其他对话框”

> ID：11683090
> 
> 赞同：0
> 
> 时间：2012-07-27T07:15:29.543
> 
> 标签：javascript, html

我的应用程序中的 javascript 警报中有一个奇怪的问题。单击按钮时，会显示带有确定按钮的警报。**对于第二次单击**，我得到一个带有复选框“防止此页面创建其他对话框”的句子。

我知道这是浏览器的一个功能。但对于所有其他网站，这是在第 10 次点击后显示的。对于我的应用程序，这是第二次点击。请帮助。

由于 ajax 调用，警报即将到来。

```
if (result.message!=null && result.message!=''){
    alert(result.message);
} 
```

我发现只有当点击之间的时间小于 4 秒时才会出现问题，任何意见如何增加这个。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:32:35.223

大多数常见的浏览器都实现了这样的功能，以防止`alert`垃圾邮件。使用另一种通知方法，例如[绝对定位的 div](http://jsfiddle.net/MxQWJ/)。

jQuery.UI[对话框模块](http://jqueryui.com/demos/dialog/)可以给你一些想法。

# multithreading - Perl 从 Thread::Queue 读取超时

> ID：11683097
> 
> 赞同：1
> 
> 时间：2012-07-27T07:16:04.047
> 
> 标签：multithreading, perl

我正在使用 Perl 中的 Thread::Queue 在老板工作人员的多线程场景中工作。
老板将任务入队，工作人员从队列中出队。
我需要实现工作人员发送下游 ping 消息，以防老板在 x 秒内没有通过队列发送任务。
不幸的是，似乎没有超时的出队方法。
我是否遗漏了什么，或者您会推荐不同的方法/不同的数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:29:12.537

您可以自己添加功能，知道`Thread::Queue`对象是对共享数组的祝福引用（我相信这是从 5.8 到 5.16 的实现）：

```
package Thread::Queue::TimedDequeue;

use parent 'Thread::Queue';
use threads::shared qw(lock cond_timedwait);

sub timed_dequeue {
  my ($q, $patience) = @_; # XXX revert to $q->dequeue() if $patience is negative?
                           #     $q->dequeue_nb() if $patience is zero?

  my $timelimit = time() + $patience;
  lock(@$q);
  until (@$q) {
    last if !cond_timedwait(@$q, $timelimit);
  }
  return shift if @$q; # We got an element

  # else we timed out.
}

1; 
```

然后你会做类似的事情：

```
# main.pl
use threads;
use strict; use warnings;

use Thread::Queue::TimedDequeue;

use constant WORKER_PATIENCE => 10; # 10 seconds

my $queue = Thread::Queue::TimedDequeue->new();
...
sub worker {
  my $item = $queue->dequeue(WORKER_PATIENCE);
  timedout() unless $item;
  ...
} 
```

请注意，上述方法假设您*没有*入队`undef`或其他错误值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:34:37.590

您的方法/结构没有任何问题，您只需要在“Thread::Queue”上添加一些超时控制。那是：

*   创建一些基于“yield”的循环来从子端检查您的队列，同时使用时间参考来检测超时。
*   使用“Thread::Queue::Duplex”或“Thread::Queue::Multiplex”模块，这可能有点过分，但确实实现了超时控制。

# php - 从数据库中检索 longblob 时出错

> ID：11683098
> 
> 赞同：0
> 
> 时间：2012-07-27T07:16:12.297
> 
> 标签：php, mysql

我按照教程显示数据库中的图像，这就是我的数据库中表格的样子。我究竟做错了什么？

```
Display
+-------+------------+----------+
| Index | Display_ID | Picture  |
+-------+------------+----------+
|     1 |         12 | longblob |
+-------+------------+----------+ 
```

```
<?php
if (!function_exists("GetSQLValueString"))
 {
function GetSQLValueString($theValue, $theType, 
$theDefinedValue = "", $theNotDefinedValue = "")
{
 // function definition omitted
}
}

$colname_getImage = "-1";
if (isset($_GET['image_id'])) 
{
  $colname_getImage = $_GET['image_id'];
}
$db = mysql_connect("localhost", "root");
mysql_select_db("draftdb",$db);
$query_getImage = sprintf("SELECT mimetype, PICTURE FROM display
WHERE DISPLAY_ID = %s", GetSQLValueString($colname_getImage, "int"));
$getImage = mysql_query($query_getImage, $db) or
die(mysql_error());
$row_getImage = mysql_fetch_assoc($getImage);
$totalRows_getImage = mysql_num_rows($getImage);
mysql_free_result($getImage);

header('Content-type: image/jpeg ' . $row_getImage['mimetype']);
echo $row_getImage['image'];

?> 
```

* * *

```
> <img src="show_image.php?image_id=12 <?php echo
> $row_getdetails['image_id']; ?>" alt="Image from DB" /> 
```

> 错误： **> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '' 附近使用正确的语法**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:21:09.863

好吧，据我所知，您的表中没有字段`mimetype`。这可能会导致错误 + 如果您的数据库有 field `Picture`，请不要要求一个名为`PICTURE`.

# cluster-computing - Go 中的集群计算

> ID：11683102
> 
> 赞同：8
> 
> 时间：2012-07-27T07:16:32.753
> 
> 标签：cluster-computing, go

Go中有集群计算的框架吗？（我希望将多台 PC 放在一起进行自定义并行计算，并想知道 Go 是否适合使用）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T10:49:39.670

我不知道您计划在集群中拥有的连接级别，但是 go 的 RPC 包使节点之间的通信变得微不足道。它可能会成为您工作的支柱，您可以在其之上构建抽象（例如，如果您需要将请求多播到不同的节点）。文档中给出的示例假设您的节点将通过 HTTP 进行通信，但该位在 net/rpc 中被抽象出来以允许不同的传输。

[http://golang.org/pkg/net/rpc/](http://golang.org/pkg/net/rpc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:56:39.743

您可以将[Hadoop Streaming](http://hadoop.apache.org/common/docs/r0.15.2/streaming.html)与 Go 一起使用。[请参阅此处](http://go-wise.blogspot.com/2011/09/go-on-hadoop.html)的（有点过时的）示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-19T09:40:48.227

你应该看看[Go Circuit](http://www.gocircuit.org/)。

引自介绍：

> 该电路将复杂的大规模系统的人力开发和维持成本降低到几乎与单进程对应的水平。...

... 和：

> 例如，我们已经能够用多达 200 行代码从头开始编写大型现实世界的云应用程序——例如流式多阶段 MapReduce 管道。

此外，对于一些更简单的用例，您可能需要查看[Golem](http://code.google.com/p/golem/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T15:29:17.063

您可以尝试使用[https://github.com/bketelsen/skynet](https://github.com/bketelsen/skynet)。这是基于doozer的面向服务的框架。

# ruby-on-rails - Rails + Nokogiri + Heroku - 来自 StackOverflow 的 URL 响应 503

> ID：11683103
> 
> 赞同：0
> 
> 时间：2012-07-27T07:16:38.040
> 
> 标签：ruby-on-rails, html-parsing, nokogiri, stack-overflow

我正在编写一个有趣的应用程序供我使用。在这个应用程序中，我将 URL 放入经典的 POST 表单中，从中提取一些信息。例如，这一行是我提取页面标题的地方：

```
self.name = Nokogiri::HTML(open(self.url)).css('title').to_s.sub('<title>','').to_s.sub('</title>','') 
```

我正在使用 Nokogiri (v1.5.4) 从源页面解析数据。我不知道我是否在这里遗漏了什么，但应用程序的行为很奇怪。

如果我在我的机器上的开发环境中的本地主机上运行，​​一切正常并且在我看来还不错。但是，在推动 Heroku 之后，出现了一些问题。例如，[来自 StackOverflow 的 URL](https://stackoverflow.com/questions/11681526/rails-precedence-on-class-method-vs-database-field)总是有这种类型的错误：

```
OpenURI::HTTPError (503 Service Unavailable):
app/models/url.rb:67:in `set_name'
app/controllers/urls_controller.rb:48:in `block in create'
app/controllers/urls_controller.rb:46:in `create' 
```

我不明白为什么它只发生在 Heroku 上。在我的本地机器上，它可以完美地使用相同的 URL。我可能遗漏了 Heroku 的某些内容，但其他 URL 正在返回正常的 200 状态并且工作正常。它只是来自 StackOverflow 的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:17:20.277

不要使用：

```
.to_s.sub('<title>','').to_s.sub('</title>','') 
```

而是使用：

```
.text 
```

例如：

```
html = '<head><title>foo</title></head>'
Nokogiri::HTML(html).css('title').text 
```

在 IRB 中：

```
irb(main):055:0> html = '<head><title>foo</title></head>'
"<head><title>foo</title></head>"
irb(main):056:0> Nokogiri::HTML(html).css('title').text
"foo" 
```

为什么 StackOverflow 的 URL 在 Heroku 上失败并出现 503 失败可能是路由或托管问题，因为您得到的是 503。

您可能需要考虑“ [Stack Overflow 的公共数据转储在哪里？](https://meta.stackexchange.com/questions/19579/where-is-stack-overflows-public-data-dump) ”和“ [Stack Overflow 知识共享数据转储](https://blog.stackoverflow.com/2009/06/stack-overflow-creative-commons-data-dump/)”，而不是抓取页面。

# java - 在 JAVA 中的 OS 上添加监听器

> ID：11683104
> 
> 赞同：1
> 
> 时间：2012-07-27T07:16:38.427
> 
> 标签：java

```
JFrame frame = new JFrame();
Robot bot = new Robot();
frame.addMouseListener(new MouseAdapter(){
  public void mouseClicked(MouseEvent e){
  bot.keyPress(KeyEvent.VK_SHIFT);
  bot.keyRelease(KeyEvent.VK_SHIFT);
}
}); 
```

当我点击 JFrame 时，我用 Java 编写了程序，它会自动按下 SHIFT 键。但我不想要这个程序。我希望当我单击桌面或操作系统的任何位置（不仅是 JFrame）时，它会执行该命令。有没有办法做到这一点？请帮我。提前欣赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:22:00.487

您需要使用 JNI 来执行此操作。

[此博客条目http://ksquared.de/blog/2011/07/java-global-system-hook/](http://ksquared.de/blog/2011/07/java-global-system-hook/)中给出了在 Windows 上执行此操作的方法

希望能帮助到你。

# regex - 正则表达式匹配受保护的分隔值

> ID：11683108
> 
> 赞同：3
> 
> 时间：2012-07-27T07:17:09.757
> 
> 标签：regex, perl

我想要一个正则表达式来匹配分隔值和一些可以包含分隔符的受保护值。

例如：

```
"A,B,{C,D,E},F" 
```

会给：

*   “一种”
*   “乙”
*   “{C,D,E}”
*   “F”

请注意，受保护的值可以嵌套，如下所示：

```
"A,B,{C,D,{E,F}},G" 
```

会给：

*   “一种”
*   “乙”
*   “{C,D,{E,F}}”
*   “G”

我已经使用字符迭代对该功能进行了编码，如下所示：

```
sub Parse
{
  my @item;

  my $curly;
  my $string;
  foreach(split //)
  {
    $_ eq "{" and ++$curly;
    $_ eq "}" and --$curly;

    if(!$curly && /[,:]/)
    {
      push @item, $string;
      undef $string;
      next;
    }
    $string .= $_;
  }

  push @item, $string;
  return @item;
} 
```

但是使用正则表达式肯定会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:35:19.523

支持嵌套的正则表达式如下所示：

```
my @items;
push @items, $1 while
   /
      (?: ^ | \G , )
      (
         (?: [^,{}]+
         |   (
                \{
                   (?: [^{}]
                   |   (?2)
                   )*
                \}
             )
         |   # Empty
         )
      )
   /xg; 
```

```
$ perl -E'$_ = shift; ... say for @items;' 'A,B,{C,D,{E,F}},G'
A
B
{C,D,{E,F}}
G 
```

假定输入有效，因为它不能同时提取和验证。（好吧，不是没有让事情变得非常混乱。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:24:24.183

```
$a = "A,B,{C,D,E},F";
while ($a =~ s/(\{[\{\}\w,]+\}|\w)//) {
    push (@res, $1);
}
print "\@res: @res\n" 
```

结果：

```
@res: A B {C,D,E} F 
```

解释：我们尝试在循环中连续匹配受保护的块`\{[\{\}\w,]+\}`或仅单个字符`\w`，如果匹配，则将其从原始字符串中删除。每次有匹配时，我们将它（意思是`$1`）存储在数组中，等等！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T10:28:57.257

从 nhahtdh 的答案改进。

```
$_ = "A,B,{C,D,E},F";
while ( m/(\{.*?\}|((?<=^)|(?<=,)).(?=,|$))/g ) {
    print "[$&]\n";
} 
```

* * *

再次改进它。请看这个！

```
$_ = "A,B,{C,D,{E,F}},G";
while ( m/(\{.*\}|((?<=^)|(?<=,)).(?=,|$))/g ) {
    print "$&\n";
} 
```

它会得到：

```
A
B
{C,D,{E,F}}
G 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:23:55.900

这是 bash 中的正则表达式：

```
chronos@localhost / $ echo "A,B,{C,D,E},F" | grep -oE "(\{[^\}]*\}|[A-Z])"
A
B
{C,D,E}
F 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T07:25:08.227

试试这个正则表达式。使用正则表达式匹配并提取令牌。

```
/(\{.*?\}|(?<=,|^).*?(?=,|$))/ 
```

我没有在 Perl 中测试过这段代码。

这里有一个关于正则表达式引擎如何工作的假设（我假设它会`\{.*?\}`在第二部分之前尝试匹配第一部分）。我还假设没有嵌套的大括号，也没有成对的大括号。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-27T07:59:25.663

```
$s = "A,B,{C,D,E},F";
@t = split /,(?=.*{)|,(?!.*})/, $s; 
```

# visual-c++-2008 - 在发布 Visual C++ 中执行时程序崩溃

> ID：11683118
> 
> 赞同：0
> 
> 时间：2012-07-27T07:17:38.820
> 
> 标签：visual-c++-2008

我刚刚开始使用 Visual C++ 2008 为我的 PC 创建应用程序。当从 Visual c++ 运行时，程序在调试和发布模式下工作。

当我在 Visual c++ 关闭并单击按钮时运行释放时发生未处理的异常。

那么这实际上意味着什么？如何解决问题？

谢谢

```
 See the end of this message for details on invoking 
 just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.OverflowException: Value was either too large or too small for a character.
   at System.Convert.ToChar(Int32 value)
   at gorskikotar.Form1.chekSum(String DtCS) in c:\users\freza\desktop\ozalj jednajedinica v100\gorskikotar\form1.h:line 1151
   at gorskikotar.Form1.slanjeKomande(String tip, String group, String unit, String komanda) in c:\users\freza\desktop\ozalj jedna jedinica v100\gorskikotar\form1.h:line 1127
   at gorskikotar.Form1.testAlarmi(String group, String unit) in c:\users\freza\desktop\ozalj jedna jedinica v100\gorskikotar\form1.h:line 1024
  at gorskikotar.Form1.uredajiZaTest() in c:\users\freza\desktop\ozalj jedna jedinica v100\gorskikotar\form1.h:line 1011
   at gorskikotar.Form1.button8_Click(Object sender, EventArgs e) in c:\users\freza\desktop\ozalj jedna jedinica v100\gorskikotar\form1.h:line 529 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:32:36.820

我发现了你的问题：在你链接到的代码中（它应该真的在问题中）你声明了变量`sum`，但你没有*初始化*它。Visual Studio 很有帮助并为您清除它，但是当在 VS 之外运行时，这个变量可以是任何东西。

将声明行更改为：

```
long  sum = 0, i, a, b; 
```

# matlab - 为什么缩放标记会改变位置？

> ID：11683119
> 
> 赞同：3
> 
> 时间：2012-07-27T07:17:40.283
> 
> 标签：matlab, plot, zooming

我在上面绘制图形和标记。但是我看到了奇怪的行为 - 标记在缩放时改变了它的位置。我已经制作了关于这个的[视频](http://www.youtube.com/watch?v=j1zc6jRqh0g&feature=youtu.be)（请在观看时切换到全高清以便能够看到数字）

我的代码：

```
clear

fDevide = fopen('devideHistory.log');
data = textscan(fDevide, '%f:%f:%f:%f %f,%f %f,%f');
fclose(fDevide);

% hh:min:sec:millisec
secvec = [60*60 60 1 1e-3];
x = [data{1:4}] * secvec';

flvec = [1 1e-16];
y = [data{5:6}] * flvec';

xindays = x / (24*60*60);

plot(xindays, y);
set(gca, 'YTickLabel', get(gca,'YTick'))
datetick('x', 'HH:MM:SS');

hold on

fDeals = fopen('deals.log');
data = textscan(fDeals, '%f:%f:%f:%f %f,%f %f,%f %f,%f %f');
fclose(fDeals);

% hh:min:sec:millisec
secvec = [60*60 60 1 1e-3];
x = [data{1:4}] * secvec';

flvec = [1 1e-16];
y = [data{5:6}] * flvec';

xindays = x / (24*60*60);

plot(xindays, y, 'go','MarkerSize',6,'LineWidth',3); 
```

源文件：[devideHistory.log](https://dl.dropbox.com/u/49126809/matlab/devideHistory.log) [deal.log](https://dl.dropbox.com/u/49126809/matlab/deals.log)

问题是为什么标记会改变它的位置。我希望它总是在同一个位置（来自文件 Deals.log）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:24:25.013

这是因为您设置了 y 轴标签

```
set(gca, 'YTickLabel', get(gca,'YTick')) 
```

当您现在开始缩放时，刻度本身会发生变化，但标签不会。您可以通过放大来注意到这一点，同时观察 y 轴的范围没有改变。

我认为您打算对上述 yticklabel 否决做的是提高这些 ytick 标签的准确性。但是您忘记使这些标签与实际值保持同步。

这个人：[http](http://undocumentedmatlab.com/blog/setting-axes-tick-labels-format/) ://undocumentedmatlab.com/blog/setting-axes-tick-labels-format/花了一些时间使用回调使这个过程成为一个自动过程。

在文件交换中，同一个人有一个脚本可以为您自动执行：http: [//www.mathworks.com/matlabcentral/fileexchange/36254-ticklabelformat](http://www.mathworks.com/matlabcentral/fileexchange/36254-ticklabelformat)

所以你只需要打电话

```
ticklabelformat(gca,'y','%.6g') 
```

或您想要的任何其他格式

# javascript - Javascript，执行函数

> ID：11683120
> 
> 赞同：2
> 
> 时间：2012-07-27T07:17:42.240
> 
> 标签：javascript

我有下一个功能

```
 var hideAll = function() {
    // code  
    return ///...  
  }; 
```

我在另一个函数中使用这个函数，就像回调一样。
当我使用它时

```
function (params, hideAll) {} 
```

一切正常，但是当我使用

```
function (params, hideAll() ) {} 
```

一切都不好使！

`hideAll`所以我的问题是，函数执行和函数执行有什么区别`hideAll()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:19:10.843

`hideAll`- 这是对函数的引用
`hideAll()`- 这是函数的执行，它的结果

`function (params, hideAll) {}`是正确的函数定义，
而`function (params, hideAll() ) {}`不是 - 您无法在函数定义中调用另一个函数。

但是，您仍然可以编写以下有效代码：

```
var hideAll = function() {
    // code  
    return ///...  
  };  

  var functionWithCallback = function(callback){
      callback();
  }
  var closureReferringHideAll = function(){
      hideAll();
  }

  // The following two lines will do exactly the same in current context,
  // i.e. execute hideAll.
  functionWithCallback(hideAll);
  closureReferringHideAll(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:23:59.577

让我们退后一步，假设您`foo` 首先会像这样调用一个方法：

```
foo(params, hideAll() ) {} 
```

这使用 hideAll 的*返回值*作为值

然而

```
foo(params, hideAll) {} 
```

使用 hideAll 函数*本身*作为值

但是，您实际上尝试做的是*声明*这样的函数：

```
function (params, hideAll() ) {} 
```

这是没有意义的。您不能*声明*与参数列表中的参数不同的函数。

因此，虽然这两种形式对于*函数调用*都是合法的（仍然具有完全不同的含义），但后者对于*函数声明是不合法的*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:42:54.917

在 Javascript 和许多其他语言中，函数是“第一类对象”，这意味着您可以调用/执行函数，但您也可以将函数存储在变量或数组中，或者您可以将函数传递给另一个函数。

请注意，我不是在谈论传递调用函数产生的值……而是函数本身。考虑：

```
function test10(f) {
    for (var i=0; i<10; i++)
        alert(f(i));
}

function square(x) { return x*x*; }
function cube(x) { return x*x*x; }

test10(square);
test10(cube); 
```

最后两行将函数 (`square`和`cube`) 作为参数传递给 function `test10`。

该`()`语法告诉 Javascript 您要进行调用，并且不仅可以与函数名称一起使用，还可以与变量或数组元素等任何表达式一起使用......例如：

```
var f_arr = [square, cube];
for (var i=0; i<2; i++)
  alert(f_arr[i](i+42));  // Will call square(42) and cube(43) 
```

实际上在Javascript中的代码

```
function square(x) {
  return x * x;
} 
```

不相同但相似

```
square = function(x) {
    return x * x;
}; 
```

所以定义一个函数确实接近于分配一个变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:20:04.200

**hideAll()**不是函数，它是执行函数的结果。

```
function hideAll(){
    return 0;
} 
```

**hideAll()** - 数字 0

**hideAll** - 功能

# c - 硬件编程

> ID：11683123
> 
> 赞同：-1
> 
> 时间：2012-07-27T07:18:04.073
> 
> 标签：c

如何在设备驱动程序或寄存器上的特定位置/地址上写入？

我认为我们应该创建一个指向给定寄存器地址的无符号指针，以便访问寄存器的内容。

```
 #define REG *(unsigned int *)&0xABCBBABA 
```

谁能告诉我一些有关硬件级编程的基础知识/先决条件？

如果有人对 Qualcom 的软件配置文件工作有所了解。请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:22:04.480

`&`是的，除了您示例中的无关运算符之外，基本上就是这样。您只需创建一个指向特定地址的指针，然后您就可以通过该指针读取或写入。

当然，它不是可移植的，但是，由于您是在嵌入式空间中，所以这不是什么大问题。

您往往会看到一个头文件，其中包含您指定的各种地址：

```
// Bit masks for control, and control/data locations.

#define UART_CTRL_READREADY 0x01
#define UART_CTRL_WRITREADY 0x01

#define UART_CTRL      (*((unsigned char *)(0xcafebabe)))
#define UART_DATA_READ (*((unsigned char *)(0xdeadbeef)))
#define UART_DATA_WRIT (*((unsigned char *)(0xca11ab1e))) 
```

（并且`volatile`关键字可能在这里派上用场）以便您可以简单地编写代码：

```
// Wait for data to become available.

while (!(UART_CTRL & UART_CTRL_READREADY))
    ;

// Get it then clear flag for next byte

databyte = UART_DATA_READ;

UART_CTRL &= ~UART_CTRL_READREADY; 
```

当然，您也可以考虑将复杂性隐藏在函数内部，以便您可以在没有太大影响的情况下对其进行更改。像：

```
int getFlag (char *location, unsigned char mask);
void setFlag (char *location, unsifgned char mask, int setFlag);
unsigned char getData (char *location); 
```

虽然这*可能*会更慢，但如果您需要更改代码，它将大大简化您的任务。

就像这样的低级编码指针而言，它与 C 中的“常规”编码没有什么不同。您可能需要阅读[按位运算符](https://stackoverflow.com/questions/1746613/bitwise-operation-and-usage/1746642#1746642)，因为某些低级设备可能需要这种级别的操作。

# regex - 如何使用正则表达式匹配所有不以字符结尾的空格？

> ID：11683126
> 
> 赞同：1
> 
> 时间：2012-07-27T07:18:31.530
> 
> 标签：regex

我有一个引擎，它接受一个**行正则表达式**（提取单行）和一个**公共列正则表达式**（从每一行中提取列）

但我无法获得一个**通用列正则表达式**，它可以将下面的示例文本提取到具有通用索引的列中（由引擎完成）

示例文本：您可以[在此处进行测试](http://regexr.com?31lgb)

```
/misc/qk12              (innfs1:/vol/fs06/qk12  ) : 314572800 total allocated Kb
                                                  62636476 free allocated Kb
                                                  251936324 used allocated Kb
                                                        81 % allocation used
/home/psum           (innfs2_42:/vol/goshihome/goshihome/home/psum) : 2349649104 total allocated Kb
                                                  405498596 free allocated Kb
                                                  1944150508 used allocated Kb
                                                        83 % allocation used
/home/aman           (innfs2_42:/vol/goshihome/goshihome/home/aman) : 2349649104 total allocated Kb
                                                  405498596 free allocated Kb
                                                  1944150508 used allocated Kb
                                                        83 % allocation used
/u01                   (/dev/vg00/u01vol      ) :  9559429 total allocated Kb
                                                   4077136 free allocated Kb
                                                   5482293 used allocated Kb
                                                        58 % allocation used 
```

现在在[测试中](http://regexr.com?31lgb)

您可以看到第一 2 行很好地`\s+`用于将每一行划分`0,1,3,7,11,15`为相关信息的索引，但是对于接下来的 2 行它会失败，因为`(innfs1:/vol/fs06/qk12 )`.

所以我想知道是否有人可以帮助我使用正则表达式来匹配所有不以直接字符结尾的空格`)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:44:15.373

您可能想在 Regex 结束时尝试积极的前瞻。积极的前瞻部分是非捕获的，但它有助于缩小匹配范围：

`\s+(?!\s*\))`

该`(?! )`构造是一个*group*，由圆括号定义，该`?!`部分创建一个非捕获前瞻，这意味着该组被用作匹配的一部分，但该组匹配的内容不包含在匹配的输出中.

创建一个“`\s*`零个或多个空格”，并且在`\)`空格之后需要一个括号。

参考非常好的页面，解释了前瞻/后视（环顾）正则表达式：[http ://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:30:43.610

我的第一个想法是否定括号。(\s*?!\))

# php - 更改复选框时的ajax发布表单jquery ajax不起作用

> ID：11683128
> 
> 赞同：3
> 
> 时间：2012-07-27T07:18:33.560
> 
> 标签：php, javascript, jquery, ajax, checkbox

我正在尝试在更改复选框时创建表单提交，我的代码如下所示。. 我的问题是什么都没有发生

> gotofile.php

文件但//在成功函数上的dosomething被执行

jQuery：

```
$("#container input[type=checkbox]").change(function(e){
                if($(this).attr('checked')) 
                {

                    var cnType=$(this).attr("id");

                    $.ajax({
                        type: "POST",
                        url: "gotofile.php",
                        data: "typID="+cnType ,
                        cache: false,
                        success: function(){ 
                            //do something 
                        }
                    });
                }
            }); 
```

php：

```
include '../dbconnection/dbconfig.php';

$typeID=$_POST['typID'];
$qryConnections="INSERT INTO ...";
$rslt1 = mysql_query($qryConnections); 
```

html

```
<form id="cnct" method="POST">
                            <div id="container" style="">
                                <ul style="list-style: none;">
                                   <li><input type="checkbox" id="1" />A</li>
                <li><input type="checkbox" id="2" />B</li>

                                </ul>
                            </div></form> 
```

谁能帮助我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:30:06.980

**几个安全问题**

请始终记住，导航到您网站的任何人都可以查看您的 JS。使用：

```
data : "typID="+cnType 
```

会让我认为 typID 是您的 SQL 中的字段。您没有 CSRF 过滤器，因此我可以编写一个 ajax 脚本来欺骗有效请求并从外部位置更新您的所有字段。需要记住的一点是，我建议您阅读 CSRF 或 Cross Site Request Forgery。

**为什么你的脚本不起作用**

如果成功函数正在触发，则脚本已运行。通过在 PHP 中输​​出 $_POST['typID'] 的值来调试它。如果发送正确，您将在控制台中看到变量值。

除此之外，让您的 PHP 为您的成功函数回显 JSON 响应以验证一切顺利，这总是很好的。

```
echo json_encode(array('response' => 'success')); 
```

或`('response' => 'failed')`或任何你需要的。然后，您可以在`success`函数中评估 JSON。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:47:50.977

尝试

```
 $("#container input[type='checkbox']").click(function(e){

                var cnType=$(this).attr("id");

                $.ajax({
                    type: "POST",
                    url: "gotofile.php",
                    data: "typID="+cnType ,
                    cache: false,
                    success: function(){ 
                        //do something 
                    }
                });
         }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:20:38.377

第一件事是您应该在 Jquery 代码中为复选框使用`click`而不是事件。`change`

第二件事，您没有为 html 代码中的复选框提供任何值。

请询问它是否不适合您。

# magento - 500 管理员登录中的内部服务器错误在 magento 上

> ID：11683129
> 
> 赞同：1
> 
> 时间：2012-07-27T07:18:34.540
> 
> 标签：magento

在 magento 站点中，我无法访问管理面板。

当我使用管理面板时，它会在火灾错误中显示错误：

```
"NetworkError: 500 Internal Server Error - http://192.168.1.100/magento_upgrade/admin"

The character encoding of the HTML document was not declared. The document will render with garbled text in some browser configurations if the document contains characters from outside the US-ASCII range. The character encoding of the page must to be declared in the document or in the transfer protocol. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:43:17.937

我们在聊天中讨论过。但几个月前我遇到了同样的问题。该系统在我的本地机器上工作，但不在我的网络服务器上。

这是因为我的 FTP 客户端（FileZilla）更改了文件的编码，之后出现 500 错误。当您搜索该问题时，您找不到任何解决方案。但我认为有错误的权利。或者在上传过程中发生了一些变化。

我制作了一个 zip 文件，并通过我的服务器上的 ssh 将它们解压缩。当您没有某些**SSH**访问权限时，这是一个问题。

[http://trac.filezilla-project.org/ticket/2830](http://trac.filezilla-project.org/ticket/2830)

FileZilla 中的一些设置可能会导致一些问题。在**“设置-> 传输-> 过滤非法字符”下，**我希望它是正确的，我的客户是德语禁用此过滤器。

“编辑：好的，没有安装 curl 模块”

# javascript - 带有 SVG 和 jQuery 的可缩放和可点击的座位图

> ID：11683130
> 
> 赞同：3
> 
> 时间：2012-07-27T07:18:40.567
> 
> 标签：javascript, jquery, svg

有谁知道可缩放、可点击的座位图——最好是内联 SVG？

这是用于电影院、剧院等的座位选择；有时超过 900 个座位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:07:26.177

您可以尝试为此使用[jVectorMap](http://jvectormap.com)。没有用于创建非地理地图的工具，但我看到了一些开发人员的报告，他们成功地将使用 Illustrator/Inkscape 创建的 SVG 文件转换为地图。您可以查看以下教程：

*   [绘制法国地图](http://www.jaffredo.com/2012/tutoriel-jquery-creer-ses-propres-cartes-pour-jvectormap-et-jqvmap/)（法语）
*   [创建自定义地图](http://matthiasschuetz.com/jquery-tutorial-svg-daten-mit-jvectormap-darstellen)（德语）

您可以使用谷歌翻译阅读英文教程。

# java - jsoup 图像未得到解析

> ID：11683132
> 
> 赞同：3
> 
> 时间：2012-07-27T07:18:50.937
> 
> 标签：java, jsoup

我正在使用 jsoup 从闲置网页中检索图像 { [http://www.jcpenney.com/dotcom/jewelry-watches/fine-jewelry/mens-jewelry/bulova%25c2%25ae-mens-stainless-steel-watch/ prod.jump?ppId=180d97e&catId=cat100240089&selectedLotId=0514592&selectedSKUId=05145920000&navState=navState-:catId-cat100240089:subcatId-:subcatZone-false:N-100240089%20158:Ns-:Nao-Ntt-2:2 -:Nf-:action-guided%20navigation&catId=SearchResults](http://www.jcpenney.com/dotcom/jewelry-watches/fine-jewelry/mens-jewelry/bulova%25c2%25ae-mens-stainless-steel-watch/prod.jump?ppId=180d97e&catId=cat100240089&selectedLotId=0514592&selectedSKUId=05145920000&navState=navState-:catId-cat100240089:subcatId-:subcatZone-false:N-100240089%20158:Ns-:Nao-0:ps-24:pn-1:Ntt-:Nf-:action-guided%20navigation&catId=SearchResults) } 我的代码是

```
String url = "http://www.jcpenney.com/dotcom/jewelry-watches/fine-jewelry/mens-jewelry/bulova%25c2%25ae-mens-stainless-steel-watch/prod.jump?ppId=180d97e&catId=cat100240089&selectedLotId=0514592&selectedSKUId=05145920000&navState=navState-:catId-cat100240089:subcatId-:subcatZone-false:N-100240089%20158:Ns-:Nao-0:ps-24:pn-1:Ntt-:Nf-:action-guided%20navigation&catId=SearchResults";

           Document doc= Jsoup.connect(url).userAgent("Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.120 Safari/535.2").get();

          String imgUrl=doc.select("#mapImageSjElement4 img").attr("abs:src"); 
```

它应该返回我的图片网址，但我没有收到图片网址。有什么建议吗？？？？？？我想检索位于网页左侧的主要产品图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:38:27.833

如果您打印整个文档，您会看到该图像以及网站内的更多内容是由散布在页面上的 javascript 脚本加载的。为了获得该图像，您必须在 2 之间进行选择：

1.  使用无 GUI 的网络浏览器，如 Selenium、Webdriver、HTTPClient；并在页面完全加载后，获取它的 html 内容
2.  通过研究它的代码来模拟 javascript，并检索你想要的数据

这将是一种使用我提到的第二种方法而不向您的项目添加任何额外库的方法：

```
//Let's say you have the right script in a String
//variable named javascript.
String[] html = javascript.split("\n");

String imgUrl = "";
for(String line : html) {
    if (line.contains("imgUrl variable name here")) {
        imgUrl = line;
        break;
    }
}

//Now that you have what you want in a variable
//just split / substring it, untill you narrowed
//it down to what you want. 
```

# c++ - 如何编码 webm 标头以在 Firefox 中打开？

> ID：11683133
> 
> 赞同：0
> 
> 时间：2012-07-27T07:18:54.417
> 
> 标签：c++, header, webm

我使用此代码创建带有 webm 视频的 mkv 文件： [代码](http://www.webmproject.org/docs/vp8-sdk/example__simple__encoder.html)

生成的视频可以在vlc和mplayer中打开，但是firefox sais: *video can't be play because the file is corrupt*

如何更改标题以便我也可以在 Firefox 中打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:05:06.573

找到了解决方案……这段代码实际上输出了一种所谓的 ivf 格式，而真正的 mkv 输出代码可以在[这里](http://www.webmproject.org/tools/vp8-sdk/example__vpxenc.html "这里")找到：

（虽然要复杂得多）

# sql - 需要对复杂数据排序 SQL Server 的帮助

> ID：11683134
> 
> 赞同：1
> 
> 时间：2012-07-27T07:19:05.697
> 
> 标签：sql, sql-server

我需要从数据库中进行复杂数据排序的帮助。假设我的数据存储在这样的表中：

```
Description
--------------
JCB Excavator - ECU P/N: 728/35700
Geo Prism 1995 GEO - ABS #16213899 GEO pump
Geo Prism 1995 - GEO ABS #16213897
Geo Prism 1995 - ABS #16213897
Ersatz Airbags, Gurtstrammer und Auto Körper  Teile
this test JCB pipe & JCB pump
Wie man BBA reman erreicht 
```

有7行。我想以这样的方式编写一个 SQL 查询，结果它将根据我的输入词对数据进行排序。假设我的搜索词是`GEO,JCB`用逗号分隔的两个单词。首先出现的行是搜索词找到最大时间的那些行。所以对于`GEO`这个词在大多数行中都有最长的时间。

将需要两种类型：

*   首先以搜索词找到最大时间的方式对数据进行排序。
*   根据在每行中找到的搜索词的最大出现次数对数据进行第二次排序。

假设`GEO`在最大行中找到搜索词。

所以所有有`GEO`关键字的行都会先出现，然后`JCB`相关数据才会出现。

在相关数据中，那些具有最大关键字`GEO`的行将首先出现。`GEO`

所以输出看起来像。

```
Description
--------------
Geo Prism 1995 GEO - ABS #16213899 GEO pump
Geo Prism 1995 - GEO ABS #16213897
Geo Prism 1995 - ABS #16213897
this test JCB pipe & JCB pump
JCB Excavator - ECU P/N: 728/35700
Ersatz Airbags, Gurtstrammer und Auto Körper  Teile
Wie man BBA reman erreicht 
```

请帮助我构建这种适用于所有 SQL Server 版本的 sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:14:55.437

1.  编写一个函数将字符串标记为单词表。例如：[如何拆分字符串以便访问项目 x？](https://stackoverflow.com/questions/2647/split-string-in-sql)
2.  将此函数应用于搜索字符串和描述表
3.  用 cross apply 连接两个结果；对结果进行分组、计数和排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:23:15.153

干得好

```
declare @t table(Description varchar(1000))
insert into @t
select 'JCB Excavator - ECU P/N: 728/35700 ' union all
select 'Geo Prism 1995 GEO - ABS #16213899 GEO pump ' union all
select 'Geo Prism 1995 - GEO ABS #16213897 ' union all
select 'Geo Prism 1995 - ABS #16213897 ' union all
select 'Ersatz Airbags, Gurtstrammer und Auto Körper  Teile ' union all
select 'this test JCB pipe & JCB pump ' union all
select 'Wie man BBA reman erreicht'

declare @search_term varchar(100)
set @search_term ='GEO'
select Description from @t
order by len(Description)-len(replace(Description,@search_term,'')) desc 
```

结果

```
Description
----------------------------------------------------------
Geo Prism 1995 GEO - ABS #16213899 GEO pump 
Geo Prism 1995 - GEO ABS #16213897 
Geo Prism 1995 - ABS #16213897 
Ersatz Airbags, Gurtstrammer und Auto Körper  Teile 
this test JCB pipe & JCB pump 
Wie man BBA reman erreicht
JCB Excavator - ECU P/N: 728/35700 
```

# sharepoint - 以编程方式为 SPAlert 创建过滤器

> ID：11683137
> 
> 赞同：0
> 
> 时间：2012-07-27T07:19:18.863
> 
> 标签：sharepoint, sharepoint-2007

我们正在 Sharepoint 2007 门户中以编程方式创建 SPAlert。我们在为要过滤的八个参数创建 CAML 查询时遇到问题。邮件被触发过滤两个或一个参数。

下面是 alert.Filter 对八个参数的查询，但没有得到我做错了什么

```
<Query>
  <Or>
    <Or>
      <Eq><FieldRef Name='consulting' /><ValueType='Text'>cbYes</Value></Eq>
      <Or>
        <Eq><FieldRef Name='consulting1' /><Value Type='Text'>cbNo</Value></Eq>
        <Or>
          <Eq><FieldRef Name='tags' /><Value Type='Text'>strTags</Value></Eq>
          <Eq><FieldRef Name='domain' /><Value Type='Text'>strDomain</Value></Eq>
        </Or>
      </Or>
    </Or>
    <Or>
      <Eq><FieldRef Name='consulting' /><ValueType='Text'>cbYes</Value></Eq>
      <Or>
        <Eq><FieldRef Name='stype' /><Value Type='Text'>strContentSubType</Value></Eq>
        <Or>
          <Eq><FieldRef Name='vertical' /><Value Type='Text'>strSubVertical</Value></Eq>
          <Eq><FieldRef Name='account' /><Value Type='Text'>strAccount</Value></Eq>
        </Or>
      </Or>
    </Or>
  </Or>
</Query> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:29:27.793

您需要关闭查询标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:05:11.810

可能只是问题中的错字，但两行内容如下：

```
<FieldRef Name='consulting' /><ValueType='Text'>cbYes</Value> 
```

'Value' 和 'Type' 之间应该有一个空格，如下所示：

```
<FieldRef Name='consulting' /><Value Type='Text'>cbYes</Value> 
```

# mysql - 如何从 MySQL 表中删除大数据峰值

> ID：11683140
> 
> 赞同：0
> 
> 时间：2012-07-27T07:19:37.727
> 
> 标签：mysql

我有一个输入图表的数据库。出于某种原因，我的 PHP 脚本时不时会在我的数据库中插入非常大的尖峰......

例如：[![截屏](../Images/fffb496e20b5a29bb600619b41404b27.png)](https://i.stack.imgur.com/IpT6t.png)

正如您所看到的，图表中存在随机峰值，其中数据有时会从 300 上升到 3000，然后又直接下降到 300。

我需要的是一种整理这些表并删除比前一行和下一行大得多的数据的方法。

我做了一些谷歌研究，但什么都想不出来！

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T11:38:56.097

您可以采取一些措施来删除这些“异常值”数据点：

您可以删除与平均值相差超过标准偏差 N 倍的点。例如，如果数据是正态分布的，这将删除大约前 2.5%：

```
delete from datapoints where value > (select avg(value)+2*stddev(value) 
                                      from datapoints); 
```

或者，您可以直接删除前 1% 的数据，留下第 99 个百分位的数据。有效地找到百分位点是一个更难的问题，但这样的事情可能会奏效：

```
set @rownum = 0;
@percentile = select value from (select value, @rownum:=@rownum+1 as rownum from datapoints) D
              where rownum > (select 0.99*count(value) from datapoints) limit 1;
delete from datapoints where value > @percentile; 
```

这些方法通常会删除所有异常大的数据点，而不考虑数据中的一般趋势或周期。这意味着山谷中的尖峰可能不会被发现。需要更高级的算法来处理这些情况。例如，您可以修改第一种方法以根据特定环境中的数据点删除异常值：

```
delete from datapoints d2 where value > 
    (select avg(value)+2*stddev(value) 
     from datapoints d1 
     where d1.dt between d2.dt - interval 2 hour 
                     and d2.dt + interval 2 hour); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:22:37.803

如果您只想删除值超过某个阈值的所有行（这里我使用了 300），那么您可以使用：

```
DELETE FROM table WHERE value > 300; 
```

为了防止它们被插入，您可以在插入时测试您的值，并且只插入那些低于阈值的行。

```
if ($data['value'] < 300) {
    // insert
} 
```

# .net - 一次打开一个子窗体

> ID：11683141
> 
> 赞同：0
> 
> 时间：2012-07-27T07:19:45.400
> 
> 标签：.net, vb.net, winforms

我目前正在用 c# 开发独立的应用程序，我也是 c# 的新手，所以不知道它的所有功能..

在我的应用程序中，我有一个具有 MDIContainer 属性 true 的主窗体。在该主窗体中，我创建了一个菜单，通过该菜单可以打开不同的子窗体...

问题是，如果用户单击菜单项，则表单正在打开，因为我创建了它的实例并在单击事件上显示它。但是，如果一个子表单已经打开并且用户单击另一个子表单，那么它也正在打开..

在那种情况下，我想自动关闭以前的子窗体..

下面是示例代码..

```
public void menu1_click(sender,e)
{
  Dim objForm1 As New Form1()
  objForm1.ShowDialog()
} 
```

而对于码表，

```
public void menu2_click(sender,e)
{
Dim objForm2 As New Form2()
objForm2.ShowDialog()
} 
```

所以这里两种形式都可以一次打开，但如果新的打开，我希望前一个关闭..一次一种形式..

请忽略语法和准时错误，因为它只是示例。请建议我最好的方法！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:57:53.043

在您的 MDI 表单中创建以下函数。

```
public void OpenForm(Form toOpen)
{
    foreach (Form child in MdiChildren)
        child.Close();

    toOpen.MdiParent = this;
    toOpen.Show();
} 
```

在您的菜单项事件处理程序中调用它，如下所示`OpenForm(new Form1())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:46:18.110

不要在单击事件中声明窗口，而是将它们设为全局。然后你要做的是检查表单中的[Visible](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.visible.aspx)属性。如果其他表单是正确的，那么您尝试打开的表单可以使用[Close()](http://msdn.microsoft.com/en-us/library/system.windows.window.close.aspx)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T08:06:56.670

要关闭所有其他表单，您需要创建一个类和静态方法，如下所示：

```
class Helper
{

    public static void HideAllForms()
    {
        Assembly currentAssembly = Assembly.GetExecutingAssembly();
        int count = Application.OpenForms.Count;
        for (int i = 0; i < count; i++)
        {
            Form f = Application.OpenForms[i];
            if (f.GetType().Assembly == currentAssembly && f.Name != "frmMDI") //Here 'frmMDI' is the name of mdiform.
            {
                f.Close();
            }
        }
    }
} 
```

现在在你的函数中调用这个方法

```
 public void menu2_click(sender,e)
  {
    Helper.HideAllForms();
    Form2 objForm2 =New Form2();
    objForm2.Show();
  } 
```

这对我来说很好，希望这也对你有用..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:28:53.947

您需要编写代码来打开该表单，如下所示：

对于打开第一个表单，在 MDI 表单的点击事件中编写代码，

```
Dim iobjForm1 As New Form1()
iobjForm1.ShowDialog() 
```

而对于码表，

```
Dim iobjForm2 As New Form2()
iobjForm2.ShowDialog() 
```

它将一次打开两个表格。

希望这会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T07:45:56.373

将第一个表单显示为模态。模态表单将不允许打开新表单，直到您关闭它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T08:25:04.730

如果您希望一次只存在一个子表单，则可能有比 MDI 表单更适合的其他机制。

例如，您可以创建用户控件，而不是使用子表单。在主窗体的固定位置显示一个用户控件（例如，在面板内，用于定位），然后将其换成不同的用户控件；这不是打开一个新的子窗口并关闭旧的。

# php - 按内部索引排列 PHP 多维数组

> ID：11683142
> 
> 赞同：0
> 
> 时间：2012-07-27T07:19:45.993
> 
> 标签：php, arrays, multidimensional-array

如何按最后一个内部索引（ 0, 1, 2 ）排列此数组，并获取最后一个内部索引的值作为每个第二个索引的值：

```
Array
(
    [text] => Array
        (
            [grid] => Array
                (
                    [0] => 3
                    [1] => 4
                    [2] => 5
                )

            [image] => Array
                (
                    [0] => 
                    [1] => 
                    [2] => 
                )

            [align] => Array
                (
                    [0] => left
                    [1] => right
                    [2] => left
                )

            [title] => Array
                (
                    [0] => 
                    [1] => 
                    [2] => 
                )

            [content] => Array
                (
                    [0] => 
                    [1] => 
                    [2] => 
                )

        )

) 
```

结果如下：

```
Array
(
    [text] => Array
        (
            [0] => Array
                (
                    [grid] => 3
                    [image] => 
                    [align] => left
                    [title] => 
                    [content] => 
                )

            [1] => Array
                (
                    [grid] => 4
                    [image] => 
                    [align] => right
                    [title] => 
                    [content] => 
                )

            [2] => Array
                (
                    [grid] => 5
                    [image] => 
                    [align] => left
                    [title] => 
                    [content] => 
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:38:29.043

这将完成工作

```
function restructure($arr){
    $newArr = array();
    foreach($arr as $k => $v){
        foreach($v as $k1 => $v1){
            foreach($v1 as $k2 => $v2){
                $newArr[$k][$k2][$k1] = $v2; 
            }
        }
    }
    return $newArr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:30:07.503

正如 SiGanteng 建议的那样，除了循环之外，我没有看到其他方法`for/foreach`：

```
function buildArray($source, $key = false)
{
    // Build the new array
    $new_array = array();
    // Define groups
    $groups = $key === false ? array_keys($source) : array($key);

    foreach($groups AS $group)
    {
        // Get the keys
        $keys = array_keys($array[$group]);
        // Count the values
        $num_entries = count($array[$group][$keys[0]]);

        for($i = 0; $i < $num_entries; $i++)
        {
            foreach($keys AS $key)
            {
                $new_array[$group][$i][$key] = $array[$group][$key][$i];
            }
        }
    }
    return $new_array;
} 
```

这允许您定义您需要构建的密钥；如果未指定，该函数为每个键构建数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:27:34.977

这应该有效。

```
function formatit($arr) {

  $new = array();

  foreach($arr as $k=>$v) {
    foreach($v as $k1=>$v1) {
     $new[$k1][$k] = $v1;
    }
  }
  return $new;
} 
```

经测试。称它为

```
$arr['text'] = formatit($arr['text']); 
```

[http://ideone.com/rPzuR](http://ideone.com/rPzuR)

# lisp - lisp 符号的有效字符

> ID：11683143
> 
> 赞同：5
> 
> 时间：2012-07-27T07:19:57.290
> 
> 标签：lisp, scheme, common-lisp

首先，据我了解，变量标识符在普通 lisp 中称为符号。

我注意到，在像 C 语言这样的语言中，变量标识符只能是字母数字和下划线，Common Lisp 允许使用更多的字符，比如“*”和（至少方案可以）“？”

所以，我想知道的是：Common Lisp 允许在符号中包含的完整字符集（或变量标识符，如果我错了）到底是什么？Scheme也一样吗？

另外，函数名称的字符集是否不同？

我一直在谷歌上搜索，在 CLHS 和 Practical Common Lisp 中查找，在我的一生中，一定有问题，因为我似乎找不到答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T07:52:34.963

详细的答案有点棘手。Common Lisp 有 ANSI 标准。它定义了[可用字符](http://www.lispworks.com/documentation/HyperSpec/Body/02_ac.htm)集。基本上，您可以将所有这些定义的字符用作符号。另请参阅[作为标记的符号](http://www.lispworks.com/documentation/HyperSpec/Body/02_cd.htm)。

例如

```
|Polynom 2 * x ** 3 - 5 * x ** 2 + 10| 
```

是一个有效的符号。请注意，竖线标记符号，不属于符号名称。

然后是 Common Lisp 的现有实现及其对各种字符集和字符串类型的支持。所以有几个支持 Unicode（或类似的）并允许在符号名称中使用 Unicode 字符。

LispWorks：

```
CL-USER 1 > (list 'δ 'ψ 'σ)
(δ ψ σ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T08:25:52.280

[从计划者的角度来看。尽管 Scheme 和 Common Lisp 中的某些概念具有相同的名称，但这并不意味着这两种语言中的含义相同。]

首先请注意，符号和标识符是两个不同的东西。

符号可以被认为是支持快速相等比较的字符串。如果拼写相同，两个符号`s`和`t`相等（或多或少）。该操作`string=?`需要遍历 the 中的字符并查看它们是否都相似。这花费的时间与最短字符串的长度成正比。另一方面，符号会自动（在运行时系统中）放入（通常）哈希表中。因此`symbol=?`归结为简单的指针比较，因此非常快。符号通常用于 C 语言中使用枚举的情况。

符号是可以在运行时出现的值。

标识符只是程序中变量的名称。

现在，如果要将所述程序表示为 Scheme 值，则一种选择是使用符号来表示标识符 - 但这并不意味着符号是标识符（反之亦然）。标识符的更好表示（仍在 Scheme 中）是语法对象，除了标识符的名称之外，它还记录了读取（或构造）标识符的位置。假设您遇到一个未定义的变量，并想指示未定义变量在程序中的位置，那么源位置是标识符表示的一部分非常方便。

最后但并非最不重要的。标识符的法律特征是什么？这里最好引用 R6RS 的章节和版本：

> **4.2.4 标识符**
> 
> 其他编程语言允许的大多数标识符也是 Scheme 可接受的。通常，字母、数字和“扩展字母字符”序列是一个标识符，当它以一个不能开始表示数字对象的字符开始时。此外，+、- 和 ... 是标识符，以两个字符序列 -> 开头的字母、数字和扩展字母字符序列也是标识符。以下是标识符的一些示例：
> 
> ```
> lambda         q                soup
> list->vector   +                V17a
> <=             a34kTMNs         ->-
> the-word-recursion-has-many-meanings 
> ```
> 
> 扩展的字母字符可以在标识符中使用，就好像它们是字母一样。以下是扩展的字母字符：
> 
> ```
> ! $ % & * + - . / : < = > ? @ ^ _ ~ 
> ```
> 
> 此外，所有 Unicode 标量值大于 127 且 Unicode 类别为 Lu、Ll、Lt、Lm、Lo、Mn、Mc、Me、Nd、Nl、No、Pd、Pc、Po、Sc、Sm、Sk 的字符、So 或 Co 可以在标识符中使用。此外，当通过 <inline hex escape> 指定时，可以在标识符中使用任何字符。例如，标识符与标识符`H\x65;llo`相同，标识符 `Hello`与标识符`\x3BB;`相同 `λ`。
> 
> 任何标识符都可以在 Scheme 程序中用作变量或语法关键字（参见 5.2 和 9.2 节）。任何标识符也可以用作句法数据，在这种情况下，它代表一个 *符号*（参见第 11.10 节）。

来自：[http ://www.r6rs.org/final/html/r6rs/r6rs-ZH-7.html#node_sec_4.2.4](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-7.html#node_sec_4.2.4)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T08:06:05.487

请参阅 CLHS 的第 2 章，其中详细描述了阅读器算法。但简单的答案是，如果一个标记不是一个 readmacro 调用（第 2.4 节），也不是一个数字或所有点，它默认被解释为一个符号。

# sharepoint - SharePoint VS ASP.NET 开发

> ID：11683145
> 
> 赞同：0
> 
> 时间：2012-07-27T07:19:58.227
> 
> 标签：sharepoint

我有一种情况，我需要开发一个具有 20% 功能的应用程序，例如可以在 SharePoint 中实现的文档管理、文档搜索、wiki 和博客。其余 80% 是自定义功能。此外，只有 20% 的功能相关数据（如文档、wiki 和博客）应该在 SharePoint 数据库中。其余 80% 的特征数据应在单独的 SQL Server 数据库中进行管理。

鉴于这种情况，

我有两种方法可以继续。

方法 1：在 SharePoint 中实现所有功能（包括自定义）

方法 2：在 SharePoint 中实现 SharePoint 功能，并使用另一个 ASP.NET 应用程序来实现 80% 的自定义功能。要在 ASP.NET 应用程序中检索博客信息或 wiki，请使用 SharePoint Web 服务。

请让我知道哪种方法更好？

# php - TypeError：错误 2007：参数文本必须为非空

> ID：11683146
> 
> 赞同：1
> 
> 时间：2012-07-27T07:19:58.783
> 
> 标签：php, flash

我正在尝试在 Flash 中开发一个具有联系表格的网站。

我的 as3 代码：

```
processing_mc.visible = false;
var variables:URLVariables = new URLVariables;

var varSend:URLRequest = new URLRequest("form_parse.php");
varSend.method = URLRequestMethod.POST;
varSend.data = variables;

var varLoader:URLLoader = new URLLoader();
varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
varLoader.addEventListener(Event.COMPLETE, completeHandler);

function completeHandler(event:Event):void { 
processing_mc.visible=false;
name_txt.text="";
email_txt.text="";
msg_txt.text="";
//load response on php here
status_txt.text="In submit button";
status_txt.text = event.target.data.return_msg;

}
//add event listener to Submit button
submit_btn.addEventListener(MouseEvent.CLICK, ValidateAndSend);
//function validate and send
function ValidateAndSend(event:MouseEvent):void{
//validate fields

if(!name_txt.length){
status_txt.text="Please enter your Name";
} else if(!email_txt.text){
status_txt.text="Please enter your E-mail address";
} else if(!msg_txt.text){
status_txt.text="Please enter your Message";
} else {
//all is good, send data to php
processing_mc.visible=true;
//ready the variables to send
variables.userName = name_txt.text;
variables.userEmail = email_txt.text;
variables.userMsg = msg_txt.text;
// send the data to php now.
varLoader.load(varSend);
}//close for error handling 
}//close validate and send function 
```

PHP代码：

```
<?php

$senderName =$POST['userName'];
$senderEmail =$POST['userEmail'];
$senderMsg =$POST['userMsg'];

$senderName =stripslashes('userName');
$senderEmail =stripslashes('userEmail');
$senderMsg =stripslashes('userMsg');

$to="gidwani.hina14@gmail.com";
$from="$senderEmail";
$subject="enquiry";
$message=" Enquiry from:

Name:$senderName
Email:$senderEmail

The message sent :

Message:$senderMsg";

$headers= "From:$from\r\n";
$headers= "Content-type:text\r\n";
$to= "$to";

mail($to,$subject,$message,$headers);

$my_msg="Thanks $senderName,your data has been sent";

print"return_msg=$my_msg";

exit();
?> 
```

我收到一个错误：

TypeError：错误 #2007：参数文本必须为非空。在 flash.text::TextField/set text() at AS3_PHP_Components_Form_fla::wholeForm_1/completeHandler() 在 flash.events::EventDispatcher/flash.events:EventDispatcher::dispatchEventFunction() 在 flash.events::EventDispatcher/dispatchEvent()在 flash.net::URLLoader/flash.net:URLLoader::onComplete()

有什么问题？

# android - Android ssl 会话票支持

> ID：11683150
> 
> 赞同：1
> 
> 时间：2012-07-27T07:20:07.993
> 
> 标签：android, ssl, reusability

一个服务器支持 rfc5077，所以支持 ssl session ticket 和 session ticket 重用，我也测试了服务器使用 c/c++ 客户端。

和我使用的 android 客户端

m = mSSLSocket.getClass().getMethod("setUseSessionTickets", boolean.class); m.invoke(mSSLSocket, true);

所以客户端可以从服务器端获取会话票，但不能重用会话票，我使用这样的代码片段：

```
 SSLSessionCache cache = new SSLSessionCache(mContext);
 socketFactory = SSLCertificateSocketFactory.getInsecure(30000000, cache); 
```

为什么它不起作用？

提前感谢您的任何建议。

# c# - ItextSharp 文本操作

> ID：11683151
> 
> 赞同：0
> 
> 时间：2012-07-27T07:20:11.327
> 
> 标签：c#

```
table.AddCell(new Paragraph("Sample text", font)); 
```

如何将此文本设置为单元格的中心并添加单元格的背景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:37:11.407

这是它的示例代码：

```
 PdfPCell c;
    c = new PdfPCell(new Paragraph(@"Sample text", font));
    c.HorizontalAlignment = Element.ALIGN_CENTER;
    c.VerticalAlignment = Element.ALIGN_MIDDLE;
    c.BackgroundColor = iTextSharp.text.Color.BLACK;
    table.AddCell(c); 
```

希望这会奏效..

# objective-c - 纵向和横向模式之间的转换

> ID：11683152
> 
> 赞同：0
> 
> 时间：2012-07-27T07:20:19.407
> 
> 标签：objective-c, ios, ipad, scrollview

对于一个新的 iPad 应用程序，我有 2 种不同的设计，一种用于横向模式，一种用于纵向模式。

竖屏模式基本上由带有拇指网格的滚动视图组成。

```
-----------------
|   O       O   |
|               |
|   O       O   |
|               |
|   O       O   |
-----------------

-----------------
|               |
|       O       |
|               |
|               |
|      ...      |
----------------- 
```

在横向模式下，此滚动视图将成为带有页面控件的滚动视图，但我想知道如何正确处理此问题。

我应该只使用 1 个滚动视图并在旋转时更改它的属性吗？

你将如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:51:32.533

看起来你有两种完全不同的观点，并没有大量地将它们联系在一起。使用完全独立的视图控制器来实现它们会容易得多，然后在界面旋转时将一个换成另一个。这也将具有使视图更加可重用的优点。

除非您想要在视图之间进行更复杂的过渡（例如，纵向模式下的缩略图之一缩小以成为横向模式下的大图像），否则这绝对是我要走的路。

# asp.net - 我需要一个链接到另一个页面的下拉值

> ID：11683154
> 
> 赞同：0
> 
> 时间：2012-07-27T07:20:23.640
> 
> 标签：asp.net

我有一个下拉列表，我使用代码隐藏从我的数据库中获取了值。

从源读取数据后，我添加了一个新值，称为“..添加新技能”。

现在，当用户单击该项目时，我需要打开一个小页面（或者更确切地说是一个新页面）以添加 DropDownList 中未提及的技能。

```
if (!IsPostBack)
{
    SqlConnection myConn = new SqlConnection(@"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=KKSTech;Integrated Security=True");
    SqlCommand myCmd = new SqlCommand(
        "SELECT SkillName, SkillID FROM Skills", myConn);
    myConn.Open();
    SqlDataReader myReader = myCmd.ExecuteReader();

    //Set up the data binding.
    DropDownList1.DataSource = myReader;
    DropDownList1.DataTextField = "SKillName";
    DropDownList1.DataValueField = "SkillID";
    DropDownList1.DataBind();

    //Close the connection.
    myConn.Close();
    myReader.Close();

    //Add the item at the first position.
    DropDownList1.Items.Insert(0, "..Add New Skill");
} 
```

这是我的代码隐藏文件。我现在如何链接它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:25:26.740

像这样添加一个`SelectedIndexChanged`事件处理程序`dropdown`

```
void ddl_SelectedIndexChanged(object sender, EventArgs e)
    {
        if(ddl.SelectedIndex == 0)
        Response.Redirect("Add_New_Skill.aspx");
    } 
```

如果您希望“...添加新技能”的位置位于列表的最后

用这个

```
ddl.Items.Insert(ddl.Items.Count, "...Add New Skill"); 
```

现在要重定向到另一个页面，您应该这样做

```
void ddl_SelectedIndexChanged(object sender, EventArgs e)
{
    if(ddl.SelectedIndex == ddl.Items.Count-1)
       Response.Redirect("Add_New_Skill.aspx");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:36:03.697

您应该使用 SelectedIndexChanged 事件和 SelectedValue 属性：

```
 void ddl_SelectedIndexChanged(object sender, EventArgs e)
    {
       if(String.Compare(ddl.SelectedValue,"..Add New Skill",true)==0)
       Response.Redirect("Add_New_Skill.aspx");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:25:02.780

设置`AutoPostBack`为真。这样，当用户更改选项时，它会自动将页面发布到服务器。

处理这个 SelectedIndexChanged 事件，并在那里重定向到您的添加页面。

*   将您的用户带到添加页面。
*   将详细信息添加到数据库。
*   将用户带回此页面。
*   列表将从数据库中重新加载，直到获得您的价值。

不需要特殊链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T08:05:01.870

这是有效的

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            bindDropdownlist()
        }
    }
    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        string getvalue = DropDownList1.SelectedItem.Value;
        if (getvalue == "..Add New Skill")
        {
            Response.Redirect("Default.apsx");
        }
    }

  public void bindDropdownlist()
    {
        SqlDataAdapter dap = new SqlDataAdapter("select coloumn1,colum2 from table", con);
        DataSet ds = new DataSet();
        dap.Fill(ds);
        DropDownList1.DataSource = ds.Tables[0];
        DropDownList1.DataTextField = "coloumn1";
        DropDownList1.DataValueField = "colum2 ";
        DropDownList1.DataBind();
        DropDownList1.Items.Insert(0, "..Add New Skill");
    }
} 
```

* * *

```
<div>
    <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
            onselectedindexchanged="DropDownList1_SelectedIndexChanged">
    </asp:DropDownList>
    </div> 
```

# ruby-on-rails - 在代理后面的 Ubuntu 上安装 Rails

> ID：11683157
> 
> 赞同：0
> 
> 时间：2012-07-27T07:20:30.703
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ubuntu

我在 Ubuntu 12.04 LTS 下。
我在代理后面。
我已经安装了 rvm 来管理 ruby​​ 版本。我想安装导轨，但遇到了问题：

```
test@U205-UBUNTU:~$ gem install rails
ERROR:  Could not find a valid gem 'rails' (>= 0) in any repository
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
    bad response Forbidden 403 (http://rubygems.org/latest_specs.4.8.gz) 
```

我尝试了不同的方法来强制 gem 使用代理设置：

```
1\. gem install rails --http-proxy=http://10.10.16.8:3128  

2\. gem install rails -p=http://10.10.16.8:3128  

3\. export http_proxy=http://10.10.16.8:3128  

4\. I have added to .bashrc lines:   
export http_proxy=http://10.10.16.8:3128  
export https_proxy=https://10.10.16.8:3128  

5\. I have added to /etc/environment lines:   
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games"  
http_proxy=http://10.10.16.8:3128  
https_proxy=https://10.10.16.8:3128 
```

**但没有任何帮助。
我仍然收到消息：**

```
test@U205-UBUNTU:~$ gem install rails
    ERROR:  Could not find a valid gem 'rails' (>= 0) in any repository
    ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
        bad response Forbidden 403 (http://rubygems.org/latest_specs.4.8.gz) 
```

但是**apt-get**和**rvm**工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:04:46.063

我的代理设置有问题，限制了对 Internet 的访问。抱歉问题不正确）。这里的解决方案是（作为超级用户）将以下内容添加到文件中`/etc/environment`：

```
http_proxy=http://<proxy-host>:<proxy-port> 
```

在哪里

*   `<proxy-host>`是您的代理机器的真实名称（或 ip 地址）
*   `<proxy-port>`是您必须使用的端口号

您不必为 Gem 设置代理。

# php - bp_get_options_nav 外组？

> ID：11683159
> 
> 赞同：2
> 
> 时间：2012-07-27T07:20:54.120
> 
> 标签：php, wordpress, buddypress, bbpress

是否可以为特定组调用 bp_get_options_nav() ？我需要在具有已定义帖子类型的每个帖子中获得相同的组内导航。

帖子通过 slugs 与 Groups 相关联，并且该组都具有 post id 的 meta 和 post 具有 group id 的 meta （组是从帖子创建的），我试图使它们之间的导航无缝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:07:24.153

阅读此网址：-

[http://www.generalthreat.com/2011/10/creating-a-buddypress-group-home-page/](http://www.generalthreat.com/2011/10/creating-a-buddypress-group-home-page/)

[https://wordpress.stackexchange.com/questions/58485/adding-navigation-item-page-for-quick-chat-plugin-to-each-of-my-buddypress-group](https://wordpress.stackexchange.com/questions/58485/adding-navigation-item-page-for-quick-chat-plugin-to-each-of-my-buddypress-group)

或尝试

创建 BuddyPress 组主页

![在此处输入图像描述](../Images/94df7f1a363667fb14d0c5a2e9edfc8b.png)

**第一步：为活动流创建一个活动选项卡，因为我们要替换它。**

为此，我们将使用 Group Extension API 的一部分来为组创建一个新的导航项。

在主题的 functions.php 中，添加以下内容：

```
function add_activity_tab() {
    global $bp;

    if(bp_is_group()) {
        bp_core_new_subnav_item( 
            array( 
                'name' => 'Activity', 
                'slug' => 'activity', 
                'parent_slug' => $bp->groups->current_group->slug, 
                'parent_url' => bp_get_group_permalink( $bp->groups->current_group ), 
                'position' => 11, 
                'item_css_id' => 'nav-activity',
                'screen_function' => create_function('',"bp_core_load_template( apply_filters( 'groups_template_group_home', 'groups/single/home' ) );"),
                'user_has_access' => 1
            ) 
        );

        if ( bp_is_current_action( 'activity' ) ) {
            add_action( 'bp_template_content_header', create_function( '', 'echo "' . esc_attr( 'Activity' ) . '";' ) );
            add_action( 'bp_template_title', create_function( '', 'echo "' . esc_attr( 'Activity' ) . '";' ) );
        }
    }
}

add_action( 'bp_actions', 'add_activity_tab', 8 ); 
```

这会在每个组的导航栏中添加一个名为“活动”的选项卡，指向组内名为“活动”的页面。这个新的活动页面调用与当前主页相同的 groups/single/home.php 模板文件。该模板实际上处理所有组页面的路由，我们稍后会看到。

**第二步：为您的群组主页创建模板文件**

如果您要拥有一个组主页，您需要控制它的显示方式。为此，您需要在主题的 groups/single 目录中有一个模板文件。它可以任意命名，但对于本指南，我们坚持使用 front.php。

创建此文件并将您想要的任何内容放入其中。该模板将在“组循环”中，因此您可以使用 bp_group_description() 之类的函数来显示组信息。

这是一个例子：

```
<div class="home-page single-group" role="main">
<?php if(bp_is_item_admin()) { ?>
    <div class="notice info">
        <p>Welcome to your group home page!<br />
        Click <a href="<?php bp_group_admin_permalink() ?>">Admin</a> above to set the content for this page.</p>
    </div>
<?php } ?>
<?php bp_group_description(); ?>
</div> 
```

到目前为止，我们所做的只是在组页面上创建一个新的活动选项卡，该选项卡甚至不显示活动流。但最后一块将使一切正常：

**第三步：编辑主题的 groups/single/home.php 模板文件**

在 home.php 文件中查找此部分：

```
elseif ( bp_group_is_visible() && bp_is_active( 'activity' ) ) :
    locate_template( array( 'groups/single/activity.php' ), true );

elseif ( bp_group_is_visible() ) :
   locate_template( array( 'groups/single/members.php' ), true ); 
```

这会将访问者引导至活动流或成员列表，具体取决于活动是否已启用。这是一个包罗万象的路由部分，我们将在其中添加我们的组主页。

将上面的行更改为：

```
elseif ( bp_group_is_visible() && bp_is_group_activity() ) :
    locate_template( array( 'groups/single/activity.php' ), true );

elseif ( bp_group_is_visible() ) :
    locate_template( array( 'groups/single/front.php' ), true ); 
```

这将启用“活动”选项卡并将组主页的请求发送到您的新模板！当然，如果您使用的名称不是front.php，则需要更改该行以匹配您选择的名称。

**更新！第四步——让 BuddyPress JS 知道如何对你的新活动帖子进行分类**

现在您可以进行活动更新，但 BuddyPress 不会记住它们来自您的小组。为了解决这个问题，我们需要放松对另一个文件 activity/post-form.php 的检查。

```
<?php elseif ( bp_is_group_home() ) : ?>

    <input type="hidden" id="whats-new-post-object" name="whats-new-post-object" value="groups" />
    <input type="hidden" id="whats-new-post-in" name="whats-new-post-in" value="<?php bp_group_id(); ?>" />

<?php endif; ?> 
```

如果没有这些隐藏字段，BuddyPress 认为我们只是在发布个人状态更新。所以让我们扩展它以覆盖我们的新活动页面：

```
<?php elseif ( bp_is_group() ) : ?>

    <input type="hidden" id="whats-new-post-object" name="whats-new-post-object" value="groups" />
    <input type="hidden" id="whats-new-post-in" name="whats-new-post-in" value="<?php bp_group_id(); ?>" />

<?php endif; ?> 
```

现在，无论我们在群组中的哪个位置发布更新，BuddyPress 都会将更新绑定到一个群组。

就是这样！查看您的新群组主页并享受您的 BuddyPress 黑客攻击的结果。如果您在群组主页上做了一些非常酷的事情，请以我的方式发送链接！

# git - 在 OS/X 和 Windows 之间共享一个 git 存储库

> ID：11683161
> 
> 赞同：2
> 
> 时间：2012-07-27T07:21:17.070
> 
> 标签：git, version-control, newline

我有一个存储在 Dropbox 文件夹中的 git 存储库，用于在运行 OS/X 和 Windows 的系统之间进行同步。

由于 OS/X 使用换行符（LR）作为换行符，而 Windows 使用回车和换行符（CR+LF），每当我在机器之间移动时，我会看到一堆非内容更改，它们只是修改换行符。

有什么好的方法可以解决这个问题吗？我可以告诉 git 忽略换行符修改吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T07:25:08.610

GitHub 有一篇关于此的有用文章：

[https://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

一般来说，他们建议`git config --global core.autocrlf true`在 Windows 和`git config --global core.autocrlf input`OS X上使用。

# javascript - Javascript match() 和无效的量词

> ID：11683164
> 
> 赞同：4
> 
> 时间：2012-07-27T07:21:24.857
> 
> 标签：javascript, regex, match

我在 javascript 中使用这个正则表达式有问题：

```
(?<= Received: )(.*?)(?=; ) 
```

我正在尝试匹配两个字符串之间的所有内容，在这种情况下，在“Received:”和“;”之间。

这是我的代码：

```
var someString = "BlaBlaBla Received: blablabla; BlaBlaBla"

var receivedString = someString.match(/(?<= Received: )(.*?)(?=; )/); 
```

但是对于第二行，我在 firebug 中遇到错误：

```
Error: invalid quantifier
Source Code:
  var receivedDateString = dates.match(/(?<= Received: )(.*?)(?=; )); 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T07:36:18.607

JavaScript 不支持后向断言：`(?<= Received: )`不是一个有效的构造。这似乎是您错误的根源。

您需要将lookbehind集成到您的匹配中：

```
someString.match(/ Received: ([^;]*)/); 
```

使用`[^;]*`，您甚至不再需要前瞻。

如果你需要直接访问第一个捕获组的内容，你可以试试这个：

```
var receivedDateString = / Received: ([^;]*)/.exec(someString)[1] 
```

请注意，这假设会有匹配项（如果`Received:`在字符串中没有找到，则索引操作将失败）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:39:41.997

`?<=`javascript 不支持类似的构造。看看[https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。

# xml - xslt 中无法识别 XPath 和 min 函数

> ID：11683165
> 
> 赞同：0
> 
> 时间：2012-07-27T07:21:35.353
> 
> 标签：xml, xslt-2.0, xpath-2.0

```
<td class="num">
                                        <xsl:if test="min(//vrednostDelnice)=trgovalniPodatki/vrednostDelnice">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//vrednostDelnice)=trgovalniPodatki/vrednostDelnice">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="format-number(trgovalniPodatki/vrednostDelnice, '#.###,00 €', 'euro')"/>
                                    </td> 
```

但我明白了

```
This document had an invalid XSLT stylesheet. Error message from the XSLT engine:
Error: XPath expression compilation failed: min(//vrednostDelnice)=trgovalniPodatki/vrednostDelnice
Details: compilation error (characters 1-22, "min(//vrednostDelnice)"): unknown function called: 'min' 
```

为什么 min 无法识别。Min 的有效函数：[http ://www.xsltfunctions.com/xsl/fn_min.html](http://www.xsltfunctions.com/xsl/fn_min.html)

编辑：

XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="xhtml" version="1.0" encoding="UTF-8" indent="yes"/> 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="odlocitvenProblem.xsl"?>
<delnice xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:noNamespaceSchemaLocation="odlocitvenProblem.xsd"> 
```

整个xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="xhtml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:decimal-format name="euro" decimal-separator="," grouping-separator="."/>
    <xsl:variable name="kolicnik" select="'1000'"/>
    <xsl:key name="id" match="delnica" use="@id"/>
    <xsl:template match="/">
        <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
                <title>Delnice - seznam alternativ</title>
                <style type="text/css">
                    body {font: normal 12px/1.6em Arial, Helvetica, sans-serif;color: #2a3845;margin: 0;padding-left: 5px;padding-right: 5px; background: #FFFFFF; width: 100%; }
                    table { margin: 0;padding  0; border: 1px solid #efece7; margin: 0 auto; font : normal 12px/1.6em Arial, Helvetica, sans-serif;color: #2a3845; width: 100%; border-collapse: collapse; }
                    td { border: 1px solid #efece7; padding: 2px; }
                    th { border: 1px solid #efece7; padding: 2px; }
                    td.num { text-align: right;}
                    td.green { text-align: right; color: green;}
                    td.red { text-align: right; color: red;}
                    h1 { color: #7a2e40;margin: 0px 0px 10px 0px;padding-bottom: 10px;font: normal 17px Georgia, serif;border-bottom: 1px solid #efece7;}
                    #wrapper {margin: 0 auto;border-left: 1px solid #f0e9eb;border-right: 1px solid #f0e9eb;}
                    #header {margin: 0 0px; background: #7a2e40;color: #f6dde3; height: 30px;}
                    #main-content { margin: 0 auto; float: left; padding-top: 30px; padding-right: 10px; padding-bottom: 30px; padding-left: 10px;}
                    #footer {background: #f7f7f7; border-top: 1px solid #f0e9eb; border-bottom: 1px solid #f0e9eb; clear: both; height: 30px; }
                    tr.footer { font-size: 10px; vertical-align: top;}
                </style>
            </head>
            <body>
                <div id="wrapper">
                    <div id="header">&#160;</div>
                    <div id="main-content">
                        <h1>Delnice - seznam alternativ</h1>
                        <br/>
                        <table cellspacing="0">
                            <tr>
                                <th rowspan="2"></th>
                                <th rowspan="2">Naziv</th>
                                <th rowspan="2">Kratica</th>
                                <th rowspan="2">Vrednost delnice<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='vrednostDelnice']/@utez"/>)
                                </th>
                                <th colspan="3">Sprememba tečaja</th>
                                <th rowspan="2">Vrednost dividende<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='vrednostDividende']/@utez"/>)
                                </th>
                                <th rowspan="2">Dividendni donos<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='dividendniDonos']/@utez"/>)
                                </th>
                                <th rowspan="2">Promet<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='promet']/@utez"/>)
                                </th>
                                <th rowspan="2">Tržna kapitalizacija<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='trznaKapitalizacija']/@utez"/>) *
                                </th>
                                <th rowspan="2">Število delnic</th>
                                <th rowspan="2">Čisti dobiček<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='cistiDobicek']/@utez"/>) *
                                </th>
                                <th rowspan="2">Finančna sredstva<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='financnaSredstva']/@utez"/>) *
                                </th>
                            </tr>
                            <tr>
                                <th>Letna<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='zadnjeLeto']/@utez"/>)
                                </th>
                                <th>Mesečna<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='zadnjiMesec']/@utez"/>)
                                </th>
                                <th>Dnevna<br/>
(<xsl:value-of select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='zadnjiDan']/@utez"/>)
                                </th>
                            </tr>
                            <xsl:for-each select="/delnice/*">
                                <xsl:sort select="nazivDruzbe"/>
                                <xsl:call-template name="alternative">
                                    <xsl:with-param name="node" select="."/>
                                </xsl:call-template>
                            </xsl:for-each>
                            <tr class="footer">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='vrednostDelnice']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja" /> - <xsl:value-of select="zgMeja" />
                                    <br/>
                                </xsl:for-each></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='zadnjeLeto']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja" /> - <xsl:value-of select="zgMeja" />
                                    <br/>
                                </xsl:for-each></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='zadnjiMesec']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja" /> - <xsl:value-of select="zgMeja" />
                                    <br/>
                                </xsl:for-each></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='zadnjiDan']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja" /> - <xsl:value-of select="zgMeja" />
                                    <br/>
                                </xsl:for-each></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='vrednostDividende']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja" /> - <xsl:value-of select="zgMeja" />
                                    <br/>
                                </xsl:for-each></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='dividendniDonos']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja" /> - <xsl:value-of select="zgMeja" />
                                    <br/>
                                </xsl:for-each></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='promet']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja" /> - <xsl:value-of select="zgMeja" />
                                    <br/>
                                </xsl:for-each></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='trznaKapitalizacija']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja div number($kolicnik)" /> - <xsl:value-of select="zgMeja div 1000" />
                                    <br/>
                                </xsl:for-each></td>
                                <td></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='cistiDobicek']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja div number($kolicnik)" /> - <xsl:value-of select="zgMeja div 1000" />
                                    <br/>
                                </xsl:for-each></td>
                                <td><xsl:for-each select="document('uteziParametrov.xml')/uteziDelnic/parameter[@naziv='financnaSredstva']/zalogaVrednosti">
                                    <xsl:value-of select="@ocena"/>:&#160;<xsl:value-of select="spMeja div number($kolicnik)" /> - <xsl:value-of select="zgMeja div 1000" />
                                    <br/>
                                </xsl:for-each></td>
                            </tr>
                        </table>
                        <span style="font-size: 80%;">* v <xsl:value-of select="$kolicnik"/></span>
                    </div>
                    <div id="footer">&#160;</div>
                </div>
            </body>
        </html>
    </xsl:template>

    <xsl:template name="alternative">
        <xsl:param name="node"/>
            <tr>
                <td>
                    <xsl:number value="position()" format="1" />
                </td>
                <td>
                    <xsl:value-of select="$node/nazivDruzbe"/>
                </td>
                <td>
                    <xsl:value-of select="kratica"/>
                </td>
                                    <td class="num">
                                        <xsl:if test="fn:min(//vrednostDelnice)=trgovalniPodatki/vrednostDelnice">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//vrednostDelnice)=trgovalniPodatki/vrednostDelnice">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="format-number(trgovalniPodatki/vrednostDelnice, '#.###,00 €', 'euro')"/>
                                    </td>
                                    <td class="num">
                                        <xsl:if test="min(//zadnjeLeto)=trgovalniPodatki/spremembaTecaja/zadnjeLeto">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//zadnjeLeto)=trgovalniPodatki/spremembaTecaja/zadnjeLeto">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="trgovalniPodatki/spremembaTecaja/zadnjeLeto"/>%</td>
                                    <td class="num">
                                        <xsl:if test="min(//zadnjiMesec)=trgovalniPodatki/spremembaTecaja/zadnjiMesec">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//zadnjiMesec)=trgovalniPodatki/spremembaTecaja/zadnjiMesec">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="trgovalniPodatki/spremembaTecaja/zadnjiMesec"/>%</td>
                                    <td class="num">
                                        <xsl:if test="min(//zadnjiDan)=trgovalniPodatki/spremembaTecaja/zadnjiDan">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//zadnjiDan)=trgovalniPodatki/spremembaTecaja/zadnjiDan">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="trgovalniPodatki/spremembaTecaja/zadnjiDan"/>%</td>
                                    <td class="num">
                                        <xsl:if test="min(//vrednostDividende)=trgovalniPodatki/vrednostDividende">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//vrednostDividende)=trgovalniPodatki/vrednostDividende">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="trgovalniPodatki/vrednostDividende"/>
                                    </td>
                                    <td class="num">
                                        <xsl:if test="min(//dividendniDonos)=trgovalniPodatki/dividendniDonos">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//dividendniDonos)=trgovalniPodatki/dividendniDonos">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="trgovalniPodatki/dividendniDonos"/>%</td>
                                    <td class="num">
                                        <xsl:if test="min(//promet)=trgovalniPodatki/promet">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//promet)=trgovalniPodatki/promet">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="trgovalniPodatki/promet"/>
                                    </td>
                                    <td class="num">
                                        <xsl:if test="min(//trznaKapitalizacija)=trgovalniPodatki/trznaKapitalizacija">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//trznaKapitalizacija)=trgovalniPodatki/trznaKapitalizacija">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="format-number(trgovalniPodatki/trznaKapitalizacija div number($kolicnik), '###.###.###', 'euro')"/>
                                    </td>
                                    <td class="num">
                                        <xsl:value-of select="financniPodatki/steviloDelnic"/>
                                    </td>
                                    <td class="num">
                                        <xsl:if test="min(//cistiDobicek)=financniPodatki/cistiDobicek">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//cistiDobicek)=financniPodatki/cistiDobicek">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="financniPodatki/cistiDobicek div number($kolicnik)"/>
                                    </td>
                                    <td class="num">
                                        <xsl:if test="min(//financnaSredstva)=financniPodatki/financnaSredstva">
                                            <xsl:attribute name="class">red</xsl:attribute>
                                        </xsl:if>
                                        <xsl:if test="max(//financnaSredstva)=financniPodatki/financnaSredstva">
                                            <xsl:attribute name="class">green</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="financniPodatki/financnaSredstva div number($kolicnik)"/>
            </td>
        </tr>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:03:24.517

该`min`函数是 XSLT 和 XPath 2.0 的一部分，并且这种方式受到 Saxon 9、AltovaXML 或 XmlPrime 等 XSLT 2.0 处理器的支持。[除非您使用Saxon-CE](http://www.saxonica.com/ce/download.xml)，否则在浏览器内部不支持 XSLT 2.0 。因此，您得到的错误仅仅意味着您正在尝试使用 XSLT 1.0 处理器运行 XSLT 2.0 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T10:37:07.850

如果您调用的 XSLT 处理器只理解 XSLT 1.0，那么说您的样式表是 2.0 版样式表是没有用的。我不认识您收到的错误消息，并且您的帖子中没有其他线索说明您正在使用哪个 XSLT 处理器，但它似乎是 XSLT 1.0 处理器。告诉我们您是如何运行转换的，例如从命令行、浏览器或某种编程语言的应用程序。

# magento - 如何获取特定类别的所有启用和禁用产品？

> ID：11683166
> 
> 赞同：4
> 
> 时间：2012-07-27T07:21:37.587
> 
> 标签：magento, magento-1.6

我正在尝试获取所有启用和禁用的产品，并且我正在使用此代码：

```
/*$categoryId = 3; // a category id that you can get from admin
    $category = Mage::getModel('catalog/category')->load($categoryId);

    $collection = Mage::getModel('catalog/product')
                    ->getCollection()
                   ->addCategoryFilter($category)
                    ->addAttributeToSelect('*')
                    ->addAttributeToFilter('status', array('gt' => 0))
                    ->load();

$categoryId = 3; // a category id that you can get from admin
    $category = Mage::getModel('catalog/category')->load($categoryId);*/ 
```

以上代码仅带来启用的产品。

通过评论状态过滤器，它仍然会带来相同的结果，即仅启用产品。

```
 /*$collection = Mage::getModel('catalog/product')
                    ->getCollection()
                   ->addCategoryFilter($category)
                    ->addAttributeToSelect('*')
                    //->addAttributeToFilter('status', array('gt' => 0))
                    ->load();*/ 
```

它仍然只带来已启用的产品。**但是当我评论类别检查时，它会带来所有产品**:(有人可以帮忙吗？

**笔记：**

对于那些不清楚这个查询的人，让我告诉你**Status Enabled = 1**和**Status Disabled = 2**。

所以大于零的状态应该给我带来启用和禁用的产品，但它没有这样做。所以有什么想法吗？？？

我编辑代码和它

```
$collection = Mage::getModel('catalog/category')->load(3)
                    ->getProductCollection()
                    ->addAttributeToSelect('*')
                    ->addAttributeToSort('entity_id', 'ASC');

die((string) $collection->getSelect()); 
```

这带来了这个查询：

```
SELECT `e`.*, `cat_index`.`position` AS `cat_index_position` FROM `catalog_product_entity` AS `e` INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id AND cat_index.store_id=1 AND cat_index.category_id='3' ORDER BY `e`.`entity_id` ASC 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T13:41:20.800

我找到了为什么会这样。

这是因为当您想使用`$productCollection->addCategoryFilter()`或使用`$category->getProductCollection()`查询从类别中获取产品时，使用产品到类别连接 INDEX 表。当您运行重新索引时，该产品类别连接 INDEX 表仅填充启用的产品，并且您无法以这种方式获得禁用的产品。Magento 中是否存在此错误我不知道，您可以使用 Raw SQL 查询从特定类别中获取您的产品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T07:30:29.303

您`->addAttributeToFilter('status', array('gt' => 0))`在您的收藏中使用，过滤已启用的产品，因此您可以删除此行以获取所有产品

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T09:11:23.603

使用您的示例，稍作更改以反映我的类别 ID。

在类别 233 中，我有 44 个产品，全部启用。

```
 $categoryId = 233; // a category id that you can get from admin

$category = Mage::getModel('catalog/category')->load($categoryId);

$collection = Mage::getModel('catalog/product')
    ->getCollection()
    ->addCategoryFilter($category)
    ->addAttributeToSelect('*')
//  ->addAttributeToFilter('status', array('gt' => 0)) //filter commented, show all products
    ->load();

echo $collection->count(); // 44 products

$category = Mage::getModel('catalog/category')->load($categoryId);

$collection = Mage::getModel('catalog/product')
    ->getCollection()
    ->addCategoryFilter($category)
    ->addAttributeToSelect('*')
    ->addAttributeToFilter('status', array('eq' => 1)) //show only enabled
    ->load();

echo $collection->count(); // 44 products

$collection = Mage::getModel('catalog/product')
    ->getCollection()
    ->addCategoryFilter($category)
    ->addAttributeToSelect('*')
    ->addAttributeToFilter('status', array('eq' => 2)) //only disabled 
    ->load();

echo $collection->count(); // 0 products 
```

正如我在评论中所说，如果您想同时获得两种可能的状态，我不明白为什么要过滤状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-16T21:17:17.463

您可以使用 Magento 的常量 `Mage_Catalog_Model_Product_Status::STATUS_DISABLED`将只返回一个类别中禁用的产品

```
$products = Mage::getModel('catalog/category')->load($category_id)
->getProductCollection()
->addAttributeToSelect('*')
->addAttributeToFilter(
    'status',
    array('eq' => Mage_Catalog_Model_Product_Status::STATUS_DISABLED)
); 
```

# mysql - mysql 100 后从表中删除

> ID：11683168
> 
> 赞同：0
> 
> 时间：2012-07-27T07:21:39.347
> 
> 标签：mysql

现在我试图在数据库中保留一个用户的 100 条消息，并试图从 100 条消息中删除另一条消息

我的数据库是mysql。我的 sql 是

```
DELETE FROM userMessage WHERE id = ? limit 100, 9999; 
```

但是我的数据库版本不支持这个sql。

谢谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:29:47.300

也许是这样的？

```
DELETE FROM userMessage WHERE id not in
(SELECT id FROM userMessage uM where user_id = ? ORDER BY id DESC LIMIT 100) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:23:48.053

为什么不选择 100 条记录到临时表中。然后删除旧表，然后重命名临时表名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:30:44.977

具有独特性`id`，您可以使用此查询 -

```
DELETE t1
FROM
  table1 t1
LEFT JOIN (SELECT * FROM table1 ORDER BY id LIMIT 100) t2 -- Specify your LIMIT values here
  ON t1.id = t2.id
WHERE
  t2.id IS NULL 
```

此查询将删除 100 之后的所有记录。

# android - 我们应该分别向nook color和nook tablet提交申请吗？

> ID：11683171
> 
> 赞同：0
> 
> 时间：2012-07-27T07:21:53.060
> 
> 标签：android, nook, nook-tablet

我有一个应用程序我想部署它 Nook Market，我找到了两个设备 NOOK COLOR 和 NOOK TABLET ..我是否需要分别提交应用程序，请帮助我...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:33:39.990

If the app runs fine on both devices, then no, you don't have to submit it separately. You can submit it for both devices at the same time. That's how I submitted my apps to B&N.

# iphone - 如何将3个参数传递给@selector

> ID：11683173
> 
> 赞同：3
> 
> 时间：2012-07-27T07:22:00.160
> 
> 标签：iphone, objective-c, ios

我创建了一个动作

```
-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event 
```

就像这样：

```
self.moveAction = [CCSequence actions:                          
                   [CCMoveTo actionWithDuration:moveDuration position:touchLocation],
                   [CCCallFunc actionWithTarget:self selector:@selector(guyMoveEnded)],
                   nil
                  ]; 
```

但现在，我想通过以下方式自动调用以下方法`@selector`：

```
-(void)guyMoveEnded:(BOOL)flag AndWhere:(CGPoint)where Andtime:(float)time{
    //do something...
} 
```

我该怎么做？请帮助我，我对选择器感到困惑。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T07:24:33.887

您可以将参数添加到 a 中`NSArray`，然后将其作为参数提供给您的选择器：

```
NSArray *params = [NSArray arrayWithObjects:@"a str", [NSNumber numberWithInt:42],myObj];
[self performSelector:@selector(myMethod:)withObject:params]; 
```

然后解压缩方法中的参数：

```
-(void)myMethode:(NSArray*)params
{
    NSString *strArg = [params objectAtIndex:0];
    NSNumber * numVal = [params objectAtIndex:1];
    NSObject *objArg = [params objectAtIndex:2];
    int intArg = [numVal intValue];
    .
    .
    .   
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T07:41:38.467

当您需要传递超过 2 个参数时，[Apple 建议](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/performSelector:withObject:withObject:)使用[NSInvocation 。](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html)这是一个很好的例子：[NSInvocation for Dummies?](https://stackoverflow.com/questions/313400/nsinvocation-for-dummies#313455)

该答案的简短摘要，没有任何解释：

```
// Prepare the object
NSMethodSignature * mySignature = [NSMutableArray 
    instanceMethodSignatureForSelector:@selector(addObject:)];
NSInvocation * myInvocation = [NSInvocation
    invocationWithMethodSignature:mySignature];

// Set selector and object
[myInvocation setTarget:myArray];
[myInvocation setSelector:@selector(addObject:)];

// Set arguments
[myInvocation setArgument:&myString atIndex:2];

// Invoke it
[myInvocation invoke]; 
```

它不仅仅是使用 调用选择器的代码`performSelector:`，但它允许您使用任意数量的参数调用方法。正如 Cipramill 建议的那样，如果您无法更改签名以减少参数计数，这将特别有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:50:03.303

使用您的参数准备一个 NSDictionary 对象并将该字典传递给您的选择器，您可以从字典中获取方法中的值。以下供参考：

```
 "NSDictionary *dictionary = nil;
  BOOL flag = YES;
  CGFloat time;
  CGPoint pt;
 [dictionary setValue:flag forKey:FIRSTPARAM];
  [dictionary setValue:time forKey:SECONDPARAM];
  [dictionary setObject:point forKey:THIRDPARAM];
[self performSelector:@selector(methodName:) withObject:dictionary];

" 
```

您可以为该类的对象创建自定义类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-06T06:58:54.770

```
[favProductCell.btnAddtoCart addTarget:self action:@selector(arrayForAddToCart:) forControlEvents:UIControlEventTouchUpInside];

[favProductCell.btnAddtoCart setTag:indexPath.row];

-(void)arrayForAddToCart:(id)sender
{
    if (![self.addToCartProductIdArray containsObject:self.favoriteProductArray[[sender tag]]])
        [self.addToCartProductIdArray addObject:self.favoriteProductArray[[sender tag]]];
} 
```

# c++ - 是否存在用于线程间通信的 stl 或 boost 线程安全结构 - 具有队列等行为？

> ID：11683175
> 
> 赞同：1
> 
> 时间：2012-07-27T07:22:05.527
> 
> 标签：c++, multithreading, boost, stl

我有游戏，我有两个线程，一个生成自定义类并需要存储它（我将其推送到队列中，但我不确定这是否是线程安全的，第一个线程每 50 毫秒生成一个新实例，第二个可以更快地读取如果有任何或更慢 - 速度随时间变化）。如果队列不为空，则另一个线程使用，首先弹出并计算一些东西。在 stl 或 boost 中是否有针对此问题的任何数据结构线程安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:41:45.560

使用`std::queue`或任何类似的容器都不是线程安全的。如果您希望您的访问（推送/弹出）是线程安全的，那么在使用 std::queue 时，您应该`boost::mutex`在每次访问之前使用或类似的机制来锁定。您可以查看`boost::shared_mutex`是否需要来自多个线程的不可变读取（根据您的描述不确定是否需要）。

除此之外，您可以查看`boost::interprocess::message_queue`，正如有人已经提到的那样-> [http://www.boost.org/doc/libs/1_50_0/boost/interprocess/ipc/message_queue.hpp](http://www.boost.org/doc/libs/1_50_0/boost/interprocess/ipc/message_queue.hpp)以获取最新版本的 boost .

此外，还有无锁队列的概念[en.wikipedia.org/wiki/Non-blocking_algorithm](http://en.wikipedia.org/wiki/Non-blocking_algorithm)。我无法提供这种实现的示例，但我相信如果你用谷歌搜索，你可以找到一些。

# uiview - 如何在打开其他子视图时将打开的 uikeyboard 发回？

> ID：11683179
> 
> 赞同：0
> 
> 时间：2012-07-27T07:22:24.743
> 
> 标签：uiview, subview, uikeyboard, addsubview

*   在我的应用程序中，我有一个 uiview。
*   我正在向该视图添加另一个子视图，其中包含一个文本字段。
*   当用户单击该字段时，它会显示键盘。
*   该子视图还包含一个添加和删除按钮。

    *   当用户单击该按钮时，将打开另一个视图，该视图也是主视图的子视图，并且该视图包含表中的选择列表。
*   这里的问题是当用户在文本字段中键入某些内容时，键盘是打开的。

*   如果用户没有关闭该键盘并单击添加按钮以从选择列表中进行选择，则只有一半的选择列表可见，因为键盘仍处于打开状态。我想把键盘寄回去。

*   在这里，我不想关闭键盘。当用户单击添加按钮时。我只想将其发送回选择视图。当用户完成选择视图时，键盘应该按原样打开。我该如何解决这个问题?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:45:07.133

如果您希望键盘消失，您需要在他们单击按钮时使用 关闭它`[yourTextField resignFirstResponder];`。

如果您希望它在他们选择一个项目时返回，您需要调用`[yourTextField becomeFirstResponder];`.

# python - XPath 表达式无法提取 mailto: 属性

> ID：11683185
> 
> 赞同：1
> 
> 时间：2012-07-27T07:22:38.783
> 
> 标签：python, regex, xpath

我正在使用这个 XPath 来获取 mailto 之后的 text()：

```
//a[starts-with(@href, 'mailto')]/text() 
```

现在我希望能够提取此类属性*之后的内容：* `mailto:`

```
<a href="mailto:info@info.com?subject=hello">here</a> 
```

我想得到：`info@info.com?subject=hello`

我应该使用什么 XPath 在 mailto: 之后获取字符串？

编辑：似乎 mailto: 是使用 javascript 生成的。scrapy可以处理这样的事情吗？

```
 <script type="text/javascript">
 <!--
 var prefix = '&#109;a' + 'i&#108;' + '&#116;o';
 var path = 'hr' + 'ef' + '=';
 var addy54802 = '&#105;nf&#111;' + '&#64;';
 addy54802 = addy54802 + 'zl&#97;ng&#111;' + '&#46;' + 'c&#111;m?s&#117;bj&#101;ct=C&#97;r&#101;&#101;r%20&#97;t%20Zl&#97;ng&#111;';
 var addy_text54802 = 'here';
 document.write('<a ' + path + '\'' + prefix + ':' + addy54802 + '\'>');
 document.write(addy_text54802);
 document.write('<\/a>');
 //-->\n </script> 
```

解决方案：我认为我应该将 Selenium 用于 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:51:02.953

```
for $a in //a[starts-with(@href, 'mailto')]
    return substring-after(normalize-space($a/@href),'mailto:') 
```

**更新**

```
//a[starts-with(@href, 'mailto')]/substring-after(normalize-space(./@href),'mailto:') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:06:29.217

考虑下面的示例 XML，用于在之后获取字符串`mailto:`

```
<?xml version="1.0" encoding="UTF-8"?>
<div>
    <a href="mailto:info@info.com?subject=hello">here</a>
</div> 
```

您可以使用下面的 xpath 表达式

```
substring-after(/div/a/@href,'mailto:') 
```

它返回`info@info.com?subject=hello`

***在您的情况下，xpath 将如下所示：***

```
substring-after(//a[starts-with(@href, 'mailto')]/@href,'mailto:') 
```

# jquery - Jquery/HTML 下拉菜单悬停状态

> ID：11683193
> 
> 赞同：0
> 
> 时间：2012-07-27T07:23:13.010
> 
> 标签：jquery, html

我正在尝试创建一个下拉菜单，即使它悬停在下拉 div（'#units-menu-links'）上，它也会在悬停时保持打开状态。当用户仍将鼠标悬停在“units-menu-links”div 上时，我无法让它保持打开状态。目前它什么都不做，但在我在第二个函数中使用 .toggle 之前，只要用户没有将鼠标悬停在“#units-nav”div 上，它就会消失。

这是我的 HTML 的样子：

```
<div id="units-menu-links">
    <center>
            <p class="units-menu-links-items" href="dynamically generated URL">Menu Item</p>
    </center>
</div>

<div id="menu">
        <div id="menu-inside">
                <div class="bar">
                        <div class="nav-block" id="units-nav">
                                <a href="/link/">Menu Button</a>
                        </div>
                </div>
        </div>
</div> 
```

这是我的jQuery：

```
$('#units-menu-links').hide();
    $("#units-nav").hover(
            function () {
                // Over the hover.
                $('#units-menu-links').toggle();
            },
            function () {
                // PLEASE READ THE FOLLOWING COMMENTS TO UNDERSTAND THE FUNCTIONALITY I AM TRYING TO GET.
                // When the users leaves #units-nav and #units-menu-links
                // then do the "$('#units-menu-links').toggle();" again to hide this.
                // However if the user is hovering over "$('#units-menu-links').toggle();" then don't do anything.
            }
    ); 
```

（我在 SO 以及在 Google 上查看了很多问题和答案，但找不到任何可以帮助我解决这个问题的东西。这似乎是一个非常普遍的问题，但人们已经创建了他们的HTML 结构与我的不同，因此很难找到资源。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:35:44.083

当鼠标移出子菜单时尝试隐藏菜单：

```
$('#units-menu-links').hide();
$("#units-nav").hover(
    function () {
        $('#units-menu-links').show();
    },
    function () {
    }
);
$("#units-menu-links").hover(
    function () {
    },
    function () {
        $('#units-menu-links').hide();
    }
);

​ 
```

理想情况下，我建议不要使用 JavaScript。

HTML：

```
<div id="menu" style="background-color: red">
    <div id="menu-inside">
        <div class="bar">
            <div class="nav-block" id="units-nav">
                <a href="/link/">Menu Button</a>
            </div>
        </div>
    </div>
    <div id="units-menu-links" style="background-color: green">
        <center>
            <p class="units-menu-links-items" href="dynamically generated URL">Menu Item</p>
        </center>
    </div>
</div> 
```

​CSS：

```
#menu #units-menu-links {
    display: none;
}

#menu:hover #units-menu-links {
    display: block;
}
​ 
```

这是[小提琴](http://jsfiddle.net/RBzbY/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:55:01.730

```
$('#units-menu-links').hide();
var timeOut;
$("#units-nav").hover(
    function () {
        // Over the hover.
        $('#units-menu-links').show();
        clearTimeout(timeOut);
    },
    function () {
        timeOut = setTimeout(function(){
            $('#units-menu-links').hide();
        }, 100);
    }
);

$('#units-menu-links').hover(
    function () {
        clearTimeout(timeOut);
    },
    function () {
        timeOut = setTimeout(function(){
            $('#units-menu-links').hide();
        }, 100);
    }
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:35:48.823

使用悬停时，您应该将子菜单嵌套在`#units-nav`元素下。然后它将起作用。如果不可能这样做，您可以对悬停函数的第二个回调实现一些超时，如果用户将悬停，您可以停止超时`#units-menu-links-element`..但这有点糟糕，用户可能会对这种行为感到困惑。

# static - 在 Eclipse 和 Maven2 中运行测试时，JUnit 4 PermGen 大小溢出

> ID：11683196
> 
> 赞同：9
> 
> 时间：2012-07-27T07:23:18.333
> 
> 标签：static, junit, mockito, powermock, permgen

我正在用 JUnit、PowerMock 和 Mockito 做一些单元测试。我有很多测试类注释`@RunWith(PowerMockRunner.class)`和`@PrepareForTest(SomeClassesNames)`模拟最终类和超过 200 个测试用例。

最近，当我在 Eclipse 或 Maven2 中运行我的整个测试套件时，我遇到了 PermGen 空间溢出的问题。当我一个一个地运行我的测试时，他们每个人都成功了。

我对此进行了一些研究，但是没有任何建议对我有帮助（我增加了 PermGenSize 和 MaxPermSize）。最近我发现有一个类只包含静态方法，每个方法都返回用 PowerMockito 模拟的对象。我想知道这是否是一种好习惯，也许这是问题的根源，因为静态变量在单元测试之间共享？

一般来说，拥有一个包含许多返回静态模拟对象的静态方法的静态类是一种好习惯吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-12T22:00:13.237

我也从 Eclipse 中的 Junit 收到 PermGen 错误。但我没有使用任何模拟库，如 Mockito 或 EasyMock。但是，我的代码库很大，而且我的 Junit 测试使用的是 Spring-Test（并且是密集而复杂的测试用例）。为此，我需要真正增加所有 Junit 测试的 PermGen。

Eclipse 将 Installed JRE 设置应用于 Junit 运行，而不是 eclipse.ini 设置。所以要改变那些：

*   Window > Preferences > Java > Installed JRE's
*   选择默认的 JRE，编辑...按钮
*   添加到默认 VM 参数：-XX:MaxPermSize=196m

此设置将允许 Junit 测试在 Eclipse 中运行更密集的 TestCases，并避免 OutOfMemoryError: PermGen。这也应该是低风险的，因为大多数简单的 Junit 测试不会分配所有的内存。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T10:02:45.173

正如@Brice 所说，PermGen 的问题将来自您对模拟对象的广泛使用。Powermock 和 Mockito 都创建了一个新类，它位于被模拟的类和您的测试代码之间。此类在运行时创建并加载到 PermGen 中，并且（实际上）永远不会恢复。因此，您对 PermGen 空间的问题。

对于你的问题：

1) 共享静态变量被认为是代码异味。在某些情况下这是必要的，但它会在测试之间引入依赖关系。测试 A 需要在测试 B 之前运行。

2）使用静态方法返回一个模拟对象并不是真正的代码味道，它是一种经常使用的模式。如果你真的不能增加你的 permgen 空间，你有很多选择：

使用模拟池，`PowerMock#reset()`当模拟放回池中时。这会减少你正在做的创作的数量。

其次，你说你的课程是最终的。如果这是可以更改的，那么您可以在测试中使用匿名类。这再次减少了使用的 permgen 空间量：

```
Foo myMockObject = new Foo() {
     public int getBar() { throw new Exception(); }
} 
```

第三，您可以引入一个接口（在 Eclipse 中使用 Refactor->Extract Interface），然后用一个什么都不做的空类来扩展它。然后，在您的课堂上，您执行与上述类似的操作。我经常使用这种技术，因为我发现它更容易阅读：

```
public interface Foo {
  public int getBar();
}

public class MockFoo implements Foo {
  public int getBar() { return 0; }
} 
```

然后在课堂上：

```
Foo myMockObject = new MockFoo() {
     public int getBar() { throw new Exception(); }
} 
```

我不得不承认我不是特别喜欢模拟，我只在必要时使用它，我倾向于使用匿名类扩展类或创建一个真正的 MockXXX 类。有关此观点的更多信息，请参阅[模拟模拟和测试结果。鲍勃叔叔](http://blog.objectmentor.com/articles/2010/01/23/mocking-mocking-and-testing-outcomes)

顺便说一句，在 maven surefire 中，您始终可以[forkMode=always](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#forkMode)为每个测试类分叉 jvm。不过，这不会解决您的 Eclipse 问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-27T09:14:32.143

首先：Mockito 使用 CGLIB 创建模拟，PowerMock 使用 Javassist 处理其他一些东西，比如删除最终标记，Powermock 还在新的 ClassLoader 中加载类。**CGLIB 以吃永久代而闻名**（只需谷歌[CGLIB PermGen](https://www.google.com/search?q=CGLIB%20permgen)即可找到有关此事的相关结果）。

这不是一个直接的答案，因为它取决于您的项目的细节：

1.  正如您指出的那样，有静态帮助程序类，我不知道是否也包含带有模拟的静态变量，我不知道您的代码的细节，所以这是纯粹的猜测，其他真正了解的读者可能会纠正我.

    可能是加载这个静态类的 ClassLoader（以及至少他的一些孩子）在测试中保持活动状态 -**这可能是因为静态**（它存在于*Class 领域*）或因为某处的某些引用 - 这意味着**如果 ClassLoader 仍然存在**（*即*没有被垃圾收集），他加载的类不会被丢弃，*即* **包括生成的类仍然在 PermGen 中**。

2.  这些类的大小也可能很大，如果要加载很多这些类，这可能与更高的 PermGen 值相关，特别是因为 Powermock 需要为每个测试在新的 Classloader 中重新加载类。

同样，我不知道您的项目的详细信息，所以我只是猜测，但是您的永久代问题可能是由于第 1 点或第 2 点，甚至两者兼而有之。

无论如何，一般来说我会说是的：拥有一个可能返回静态模拟对象的静态类在这里看起来确实是一种不好的做法，因为它通常在生产代码中。如果设计不当，可能会导致 ClassLoader 泄漏（这很糟糕！）。

在实践中，我已经看到运行了数百个测试（仅使用 Mockito）而没有更改内存参数，也没有看到 CGLIB 代理被卸载，而且我没有使用静态的东西 appart 来自 Mockito API 的东西。

如果您使用的是 Sun/Oracle JVM，您可以尝试以下选项来跟踪正在发生的事情：

`-XX:+TraceClassLoading`和`-XX:+TraceClassUnloading`或`-verbose:class`

希望有帮助。

* * *

*在这个问题的范围之外：*

个人而言，无论如何我都不喜欢使用 Powermock，我只在极端情况下使用它，*例如*测试不可修改的遗留代码。Powermock 太侵入性了，它必须为每个测试产生一个新的类加载器来执行它的行为（修改字节码），你必须对测试类进行大量注释才能模拟，......在我看来，对于通常的开发来说这些小小的不便超过了模拟决赛的能力所带来的好处。甚至 Powermock 的作者 Johan 也曾告诉我，他正在推荐 Mockito 并将 Powermock 保留用于某些特定目的。

不要误会我的意思：Powermock 是一项了不起的技术，当您必须处理无法更改的（糟糕的）设计遗留代码时，它真的很有帮助。但不适用于日常开发，尤其是在练习 TDD 时。

# java - 如何在 JPanel 上显示双精度或浮点数到小数点后两位

> ID：11683201
> 
> 赞同：1
> 
> 时间：2012-07-27T07:23:34.993
> 
> 标签：java, user-interface, jframe, jpanel

> **可能重复：**
> [将双精度数舍入到小数点后 2 位有效数字](https://stackoverflow.com/questions/2808535/round-a-double-to-2-significant-figures-after-decimal-point)

我有一个问题，我想绘制一个字符串，其中包含一个双精度或浮点值，最多两个十进制值。使用起来很容易，`System.out.Printf()`但如何使用`drawString`

就像下面的语句计算要在 JPanel 上解开的数字。但实际显示的是一个字符串，其值最多为小数点后 14 位。我需要将显示限制为小数点后 2 位

```
double size= ((int)((((float) maxSize / (float) (40 * 1.0))*100.0))/100.0);

g.drawString("" + size, 135, 100 + range * i); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T07:26:06.360

您必须使用[java.text.DecimalFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)类。

```
String value= new DecimalFormat("#.##").format(number); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T07:29:04.133

```
 double inputNumber = 1.234567;
 DecimalFormat df = new DecimalFormat("#.##");
 String printValue = df.format(inputNumber));
 g.drawString(printValue); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:31:21.090

用这个...`java.text.DecimalForamt`

```
 DecimalFormat df = new DecimalFormat("#.##");
    decimal d = new decimal("10.2344");
    df.format(d); 
```

# windows-phone-7 - windows phone 中的 webbrowser 控件中的身份验证

> ID：11683205
> 
> 赞同：0
> 
> 时间：2012-07-27T07:23:55.493
> 
> 标签：windows-phone-7, authentication

我正在 Windows Phone 网络浏览器控件中导航到网页。如何在网络浏览器控件中检测请求的网页 url 是否经过身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:28:09.377

我认为没有办法让 Web 浏览器控件中的 cookie 无法访问。如果它们可以访问，我们可以检查它们的价值，这很容易。

# c# - 使用 .ToDictionary 返回另一个 Dictionary 类型

> ID：11683215
> 
> 赞同：0
> 
> 时间：2012-07-27T07:24:25.370
> 
> 标签：c#, dictionary, casting, linq-to-objects

我有一本字典，它的类型是`Dictionary<int, fooClass> fooDic`，另一个字典是`Dictionary<int, string> barlist`，我正在使用这个 linq 返回结果

```
var foobarList = fooDic.Where(kvp => 
       !barlist.ContainsKey(((fooClass)kvp.Value)._fooID))
       .ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

这将返回 fooDic 类型的结果。但我需要将强制转换输出键入为`barlist(Dictionary<int, string>)`类型。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:33:14.053

如果这是一个相当简单的转换，关键是你的最后一部分

```
var foobarList = fooDic.Where(kvp => 
    !barlist.ContainsKey(((fooClass)kvp.Value)._fooID))
    .ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

陈述。在您当前使用的地方`kvp => kvp.Value`，您将其替换为`kvp => kvp.Value._foobarValue`.

根据 OP 的评论编辑“完整”解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:35:53.303

假设你的班级 Foo 看起来像这样：

```
public class Foo
{
    public string SomeValue { get; set; }
    public int SomeOtherStuff { get; set; }
} 
```

创建一个新字典：

```
var fooDict = new Dictionary<int, Foo>() {
    {0, new Foo() {SomeOtherStuff=10, SomeValue="some value"} },
    {1, new Foo() {SomeOtherStuff=15, SomeValue="some other value"} }
}; 
```

转换它：

```
Dictionary<int, string> stringDict = 
    fooDict.ToDictionary(x=> x.Key, x=> x.Value.SomeValue);  //<- note x.Value.SomeValue 
```

stringDict 现在将包含：

```
{0, "some value"}, {1, "some other value"} 
```

# nlp - 实现一个时间标记器有多难？

> ID：11683218
> 
> 赞同：0
> 
> 时间：2012-07-27T07:24:35.550
> 
> 标签：nlp

我想实现我自己的时间标记器只是为了我的经验。我只想知道自己（只有我自己）实现一个好的时间标记系统有多难，我应该采取什么样的方法。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T02:54:28.503

尝试复制 Angeli、Manning 和 Jurafsky 在 NAACL 2012 中最近的工作，“解析时间：学习解释时间表达式”，看看你会得到什么。 [http://scholar.google.com/scholar?hl=en&q=angeli+manning+jurafsky+parsing+time&btnG=&as_sdt=1%2C33&as_sdtp=](http://scholar.google.com/scholar?hl=en&q=angeli+manning+jurafsky+parsing+time&btnG=&as_sdt=1%2C33&as_sdtp=)

没有浪费大量时间编写正则表达式，直到周日（并且可能仍然没有涵盖像“直到周日”这样的表达式），这可能是任何人做过的最好的事情。如果您打算走正则表达式路线，至少尝试改进 Ruby 的日期模块或其他一些免费软件日期/时间解析器之类的东西，以便其他人可以从您的工作中受益，因此您不必重新发明*每个*轮子。

如果你真的在做这件事，我很想听听你把它带到哪里去。

# ruby - ruby 简单的命令行脚本（餐厅查找器）

> ID：11683219
> 
> 赞同：0
> 
> 时间：2012-07-27T07:24:48.660
> 
> 标签：ruby

我刚刚完成了 Ruby 基本培训课程我想知道如何仅在可能的情况下使用命令行为 Restaurant Finder 编写一个非常简单的脚本？

所需功能：用户要求输入 1- 餐厅名称 2- 餐厅类型 3- 餐厅平均价格

用户在会话期间仅在内存中获取餐厅的响应列表（不会保存在文件中）。

另外我怎样才能让用户显示添加的餐厅列表？

我想让它尽可能简单，以便我能以 Lynda.com 讲师错过的方式理解语言。一旦这位讲师到达了实际的脚本构建，他就开始修改它并编写了许多让我感到困惑的快速代码，让我几乎觉得这是我正在观看的 PHP 而不是 Ruby 视频培训。

我知道如何创建类和方法以及使用数组哈希等...想要基本的简单开始尝试自己如何编写简单的程序而不使用文件来存储任何东西

之后，我将进入下一个级别。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:40:29.137

我也是 Ruby 的新手，但这是我的简单实现：

```
 class Restaurant
  attr_accessor :name, :type, :avg_price
   def initialize(name, type, avg_price)
     @name = name
     @type = type
     @avg_price = Float(avg_price)
   end   
 end

 class RestaurantsList < Array
  def read_from_keyboard
    print "Restaurant name: "
    name = gets.chomp
    print "Restaurant type: "
    type = gets.chomp
    print "Restaurant average price: "
    avg_price = gets.chomp
    self << Restaurant.new( name, type, avg_price )
  end
  def print_list
    puts sprintf("%17s %15s %s", "Name |", "Type |", "Avg price |")
    self.each { |e|  puts sprintf("%15s |%14s |%10d |", e.name, e.type, e.avg_price)}    
  end
 end

restaurants_list = RestaurantsList.new
loop do
  print "1 - add restaurant, 2 - print list, 3 - exit : "
  answer = Integer(gets.chomp)
  case answer
  when 1
    restaurants_list.read_from_keyboard
  when 2
    restaurants_list.print_list
  when 3
    break    
  end    
end 
```

# android - 如何将coverflow（动态视图）添加到main.xml

> ID：11683226
> 
> 赞同：0
> 
> 时间：2012-07-27T07:25:13.043
> 
> 标签：android, gallery, coverflow

我尝试在我的应用程序中使用[coverflow](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)我想在main.xml 中具有特定尺寸的线性布局中使用coverflow .. 我试过但我收到了这个错误..

```
07-27 19:43:23.427: E/AndroidRuntime(1111): FATAL EXCEPTION: main
07-27 19:43:23.427: E/AndroidRuntime(1111): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android/com.android.Coverflow_displayerActivity}: java.lang.NullPointerException
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.os.Looper.loop(Looper.java:132)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.app.ActivityThread.main(ActivityThread.java:4123)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at java.lang.reflect.Method.invokeNative(Native Method)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at java.lang.reflect.Method.invoke(Method.java:491)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at dalvik.system.NativeStart.main(Native Method)
07-27 19:43:23.427: E/AndroidRuntime(1111): Caused by: java.lang.NullPointerException
07-27 19:43:23.427: E/AndroidRuntime(1111):     at com.android.Coverflow_displayerActivity.onCreate(Coverflow_displayerActivity.java:48)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.app.Activity.performCreate(Activity.java:4397)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
07-27 19:43:23.427: E/AndroidRuntime(1111):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
07-27 19:43:23.427: E/AndroidRuntime(1111):     ... 11 more 
```

这是我尝试过的代码

```
package com.android;

import java.io.FileInputStream;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.LinearGradient;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.PorterDuff.Mode;
import android.graphics.PorterDuffXfermode;
import android.graphics.Shader.TileMode;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ImageView.ScaleType;
import android.widget.Toast;

import com.android.CoverAdapterView.OnItemClickListener;

public class Coverflow_displayerActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        CoverFlow coverFlow = (CoverFlow) findViewById(R.id.coverflow);

//      
//      CoverFlow coverFlow;
//      coverFlow= new CoverFlow(this);

        coverFlow.setAdapter(new ImageAdapter(this));

        ImageAdapter coverImageAdapter = new ImageAdapter(this);

        coverImageAdapter.createReflectedImages();

        coverFlow.setAdapter(coverImageAdapter);

        coverFlow.setSpacing(-15);
        coverFlow.setSelection(5, true);

        setContentView(R.layout.main);
//      setContentView(coverFlow);
        coverFlow.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(CoverAdapterView<?> parent, View view,
                    int position, long id) {
                // TODO Auto-generated method stub
                Log.v("this happens only in india", "ok i know this position"
                        + position);
                Toast.makeText(getApplicationContext(), "position " + position,
                        Toast.LENGTH_SHORT).show();
            }
        });

        // Use this if you want to use XML layout file
    //  setContentView(R.layout.main);

    }

    public class ImageAdapter extends BaseAdapter {
        int mGalleryItemBackground;
        private Context mContext;

        private FileInputStream fis;

        private Integer[] mImageIds = { R.drawable.kasabian_kasabian,

        R.drawable.killers_day_and_age, R.drawable.garbage_bleed_like_me,
                R.drawable.death_cub_for_cutie_the_photo_album,
                R.drawable.kasabian_kasabian,
                R.drawable.massive_attack_collected, };

        private ImageView[] mImages;

        public ImageAdapter(Context c) {
            mContext = c;
            mImages = new ImageView[mImageIds.length];
        }

        public boolean createReflectedImages() {
            // The gap we want between the reflection and the original image
            final int reflectionGap = 4;

            int index = 0;
            for (final int imageId : mImageIds) {
                Bitmap originalImage = BitmapFactory.decodeResource(
                        getResources(), imageId);
                int width = originalImage.getWidth();
                int height = originalImage.getHeight();

                // This will not scale but will flip on the Y axis
                Matrix matrix = new Matrix();
                matrix.preScale(1, -1);

                // Create a Bitmap with the flip matrix applied to it.
                // We only want the bottom half of the image
                Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0,
                        height / 2, width, height / 2, matrix, false);

                // Create a new bitmap with same width but taller to fit
                // reflection
                Bitmap bitmapWithReflection = Bitmap.createBitmap(width,
                        (height + height / 2), Config.ARGB_8888);

                // Create a new Canvas with the bitmap that's big enough for
                // the image plus gap plus reflection
                Canvas canvas = new Canvas(bitmapWithReflection);
                // Draw in the original image
                canvas.drawBitmap(originalImage, 0, 0, null);
                // Draw in the gap
                Paint deafaultPaint = new Paint();
                canvas.drawRect(0, height, width, height + reflectionGap,
                        deafaultPaint);
                // Draw in the reflection
                canvas.drawBitmap(reflectionImage, 0, height + reflectionGap,
                        null);

                // Create a shader that is a linear gradient that covers the
                // reflection
                Paint paint = new Paint();
                LinearGradient shader = new LinearGradient(0,
                        originalImage.getHeight(), 0,
                        bitmapWithReflection.getHeight() + reflectionGap,
                        0x70ffffff, 0x00ffffff, TileMode.CLAMP);
                // Set the paint to use this shader (linear gradient)
                paint.setShader(shader);
                // Set the Transfer mode to be porter duff and destination in
                paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
                // Draw a rectangle using the paint with our linear gradient
                canvas.drawRect(0, height, width,
                        bitmapWithReflection.getHeight() + reflectionGap, paint);

                ImageView imageView = new ImageView(mContext);
                imageView.setImageBitmap(bitmapWithReflection);

                imageView.setLayoutParams(new CoverFlow.LayoutParams(120, 180));
                imageView.setScaleType(ScaleType.MATRIX);
                mImages[index++] = imageView;

            }
            return true;
        }

        public int getCount() {
            // Log.v("getCoutn(int count)", "" + mImageIds.length);
            return mImageIds.length;
        }

        public Object getItem(int position) {
            // Log.v("getItem(int position)", "" + position);
            return position;
        }

        public long getItemId(int position) {
            // Log.v("getItemID(int position)", "" + position);
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            // Use this code if you want to load from resources
            // ImageView i = new ImageView(mContext);
            // i.setImageResource(mImageIds[position]);
            // i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
            // i.setScaleType(ImageView.ScaleType.MATRIX);
            // return i;

            // Log.v("getview int position mImages", ""+position);

            return mImages[position];
        }

        /**
         * Returns the size (0.0f to 1.0f) of the views depending on the
         * 'offset' to the center.
         */
        public float getScale(boolean focused, int offset) {
            /* Formula: 1 / (2 ^ offset) */
            Log.v("getScale float ", " " + focused + " " + offset);
            return Math.max(0, 1.0f / (float) Math.pow(2, Math.abs(offset)));
        }

        // View v=getView(position, convertView, parent);

    }

} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <LinearLayout
        android:id="@+id/add_here"
        android:layout_width="700dp"
        android:layout_height="700dp"
        android:orientation="vertical" 
        android:background="@android:color/darker_gray"
        >

     <com.android.CoverFlow
            android:id="@+id/coverflow"
            android:layout_width="700dp"
            android:layout_height="700dp" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:30:01.030

您首先需要设置活动的视图，以便`findViewById`从该视图中获取 ID 并映射控件。所以写

`setContentView(R.layout.main);`在映射控件之前，即

```
CoverFlow coverFlow = (CoverFlow) findViewById(R.id.coverflow); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T07:30:12.497

似乎您的`onCreate()`. `setContentView(R.layout.main);`应该在您尝试分配coverFlow ( `CoverFlow coverFlow = (CoverFlow) findViewById(R.id.coverflow);`) 之前调用。这就是为什么 coverFlow 是`NULL`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T07:37:57.343

我同意这里的其他答案。问题是在调用 setContentView() 之前尝试初始化小部件。但我相信用户正在尝试遵循同样的事情，因为他无法区分从 XML 设置内容与在代码中创建视图并将其设置为内容之间的区别。

在上面的例子中，如果你可以看到，作者尝试通过这里的代码创建一个 Coverflow 视图，

```
 CoverFlow coverFlow;
    coverFlow= new CoverFlow(this); 
```

然后他设置了这个视图使用，`setContentView(coverFlow);`

但在我们的例子中，我们使用 XML 生成的资源，

第一件事是使用 .xml 将 xml 映射到我们的 Activity `setContentView()`。因为只有这样系统才会知道它必须从我们使用 .xml 文件提供给它的 XML 中查找资源`SetContentView()`。如果不是，它将导致 NullPointerException，因为我们没有指定在哪里查找，andorid 将找不到资源。

因此，对于您的情况，只需遵循上述答案并提供

```
setContentView(R.layout.main); 
```

首先，然后使用参考形式初始化您的视图，例如，

```
CoverFlow coverFlow = (CoverFlow) findViewById(R.id.coverflow); 
```

# c# - 打印输出时缺少列

> ID：11683228
> 
> 赞同：1
> 
> 时间：2012-07-27T07:25:22.050
> 
> 标签：c#, sql

我越来越沮丧了。是的，我是一个新手，在 C# 和 sql server 中使用了 2 周。请对我放轻松。该命令应该打印出 InvDate、InvoiceNo、TaxAmount 和 SubTotal 作为 Amount。它还应该从另一个名为 PatientDetails 的表中拖动 Patientdetails。两者的关键是 MedicalRecordID。

```
SqlCommand objCmd = 
  new SqlCommand("SELECT CONVERT(char(80), inv.[InvDate],3) 
                     AS InvDate,inv.[InvoiceNo],inv.[TaxAmount] + inv.[SubTotal] 
                     AS Amount, 
                     '' AS Payment 
                     FROM [Invoice] inv 
                     LEFT JOIN [PatientDetails] tab 
                     ON inv.[MedicalRecordID] = tab.[MedicalRecordID] 
                     WHERE (inv.[InvDate] >= CONVERT(datetime, '" + 
                                                      dtpFrom.Text + "', 105 )) 
                     AND (inv.[InvDate] <= CONVERT(datetime, '" + 
                                                    dtpTo.Text + "', 105))", 
                   objConn); 
```

下一组命令将按我想要的方式打印出来。

```
for (int i = 0; i < 4; i++)
{
    if (!objReader.IsDBNull(i))
    {
        string s;
        s = objReader.GetDataTypeName(i);
        //MessageBox.Show(s);
        if (objReader.GetDataTypeName(i) == "char")
        {
            sw.Write(objReader.GetString(i));
        }
        else if (objReader.GetDataTypeName(i) == "money")
        {
            sw.Write(objReader.GetSqlMoney(i).ToString());
        }
        else if (objReader.GetDataTypeName(i) == "nvarchar")
        {
            sw.Write(objReader.GetString(i));
        }
    }

    if (i < 3)
    {
        sw.Write("\t");
    }
}

count = count + 1;
sw.WriteLine(); 
```

这是我的 SQL 查询，我猜这显然是错误的，因为我没有添加 SubTotal，但这实际上是我想要的。标记给用户的 InvoiceNo、InvDate、SubTotal。

```
SELECT Invoice.InvDate, 
        Invoice.InvoiceNo, 
        Invoice.TaxAmount + Invoice.SubTotal, 
        PatientDetails.GivenName 
FROM Invoice 
INNER JOIN PatientDetails 
ON (Invoice.MedicalRecordID = PatientDetails.MedicalRecordID) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:43:42.213

尝试以下写出结果

```
for (int i = 0; i < 4; i++)
{
    if (!objReader.IsDBNull(i))
        sw.Write(objReader.GetValue(i).ToString());
    else
        sw.Write("NULL");

    if (i < 3) 
        sw.Write("\t");
}

count += 1;
sw.WriteLine(); 
```

如果您仍然缺少字段，我会按如下方式编写您的查询

```
SqlCommand cmd = objConn.CreateCommand();
cmd.CommandText = @"SELECT inv.[InvDate]
                          ,inv.[InvoiceNo]
                          ,inv.[TaxAmount] + inv.[SubTotal] AS Amount
                          ,tab.GivenName
                      FROM [Invoice] inv 
                           LEFT JOIN [PatientDetails] tab 
                                  ON inv.[MedicalRecordID] = tab.[MedicalRecordID] 
                     WHERE inv.[InvDate] BETWEEN @From AND @To";
cmd.Parameters.AddWithValue("@From", fromDate);
cmd.Parameters.AddWithValue("@To", toDate); 
```

您也可以使用`WHERE inv.[InvDate] >= @From AND inv.[InvDate] <= @To`而不是`BETWEEN`

# c# - 如何从方法中获取 OpenReadCompleted 结果

> ID：11683229
> 
> 赞同：0
> 
> 时间：2012-07-27T07:25:22.670
> 
> 标签：c#, windows-phone-7

我想从 webClient_OpenReadCompleted 获得结果，并且我想在 getMethod 中获得响应。但是在这段代码中，首先 getMehod 有效，然后只有当 getMethod 完成时，webClient_OpenReadCompleted 才有效。如何在 getMethod 中得到结果？

ps 这一切都在 Windows Phone 上

```
public string apiUri = "https://api.vk.com/method/";
public string response = "";

public void getMethod(string parameters)
{
    var webClient = new WebClient();
    webClient.OpenReadCompleted += webClient_OpenReadCompleted;
    string uri = apiUri + parameters + "&access_token=" + access_token;
    webClient.OpenReadAsync(new Uri(uri));
}

void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    XDocument xml = XDocument.Load(e.Result);
    response = xml.ToString();
}

public void statusGet(string uid)
{
    getMethod("status.get.xml?uid" + uid);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:02:06.973

如果你想返回数据，我建议你设置 1) 自定义 EventArgs 来保存数据 2) 自定义事件。

获取数据时，设置事件参数，然后设置事件，以便订阅者获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:50:06.050

我没有尝试过，但我问了一位高级 c# 开发人员，他建议创建 bool 并写下这个：

```
bool work;

public void getMethod(string parameters)
{
    var webClient = new WebClient();
    webClient.OpenReadCompleted += webClient_OpenReadCompleted;
    string uri = apiUri + parameters + "&access_token=" + access_token;
    webClient.OpenReadAsync(new Uri(uri));
    work = true;
    while(work) { Thread.Sleep(100); }
}

void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    XDocument xml = XDocument.Load(e.Result);
    response = xml.ToString();
    work = false;
} 
```

现在，问题不是实际的，因为我改变了我的应用程序的架构。

# svn - 巡航控制：是否可以从新的 SVN 项目自动创建新项目

> ID：11683235
> 
> 赞同：1
> 
> 时间：2012-07-27T07:25:47.370
> 
> 标签：svn, automation, continuous-integration, cruisecontrol

我刚刚开始考虑从个人工具迁移到巡航控制。我正在使用 SVN，我有这样的结构：

```
svn
  projects
    project1
    project2
    ...
    projectn
  libs
    lib1
    lib2
    ...
    libn
  system
  prototypes 
```

目前，

*   我使用稀疏目录在 SVN 结构中导航（svn up -N svn/projects/project1），当有一个带有 Trunk 或标签或分支的最终节点时，我递归更新树（svn up svn/projects/project1/Trunk ）。
*   我已经成功地为我的每个项目创建了新的 build.xml + main config.xml 文件调整的 svn build。

理想情况下，由于我所有的构建步骤都是相同的（cd svn/projects/project1/Trunk && make all unit），我想自动化巡航控制构建步骤。所以我仍然想知道两件事：

1.  有什么办法可以避免为我的每个项目创建一个新的 build.xml + main config.xml 文件调整的步骤。例如，告诉 Cruise crontrol one for all 使用模板 build.xml，因为我所有的构建都包括调用“make”和“make unit”命令 + 主 config.xml 中的通用正则表达式，例如 svn/(projects |libs)/(.*)/(Trunk|Tags|Branches)。
2.  是否可以在巡航控制仪表板的树视图中显示所有这些项目，以便更容易链接到 SVN 存储库？

我一直在寻找，但如果您对如何做到这一点有任何建议，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:12:03.857

1.->您可以使用模板并定义预处理器元素。在您必须通过解析 xml 的软件替换所有定义值之后：

```
<cb:define mylabel="labelIwant"/> 
```

2.->您可以通过修改源来自定义ccnet，但对我来说很难。首选 perharps 使用安全权限和 viewProject 以启用根据角色查看某些项目

```
 <rolePermission ..> 
```

# vb.net - 读取 XML 文件 VB.NET

> ID：11683241
> 
> 赞同：0
> 
> 时间：2012-07-27T07:26:19.690
> 
> 标签：vb.net, xml-parsing

我正在尝试在 VB.NET 中读取以下 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<mame build="0.129 (Jan  8 2009)" debug="no">
    <game name="puckman" sourcefile="pacman.c">
        <description>PuckMan (Japan set 1, Probably Bootleg)</description>
        <year>1980</year>
        <manufacturer>Namco</manufacturer>
        <rom name="namcopac.6e" size="4096" crc="fee263b3" sha1="87117ba5082cd7a615b4ec7c02dd819003fbd669" region="main" offset="0"/>
        <rom name="namcopac.6f" size="4096" crc="39d1fc83" sha1="326dbbf94c6fa2e96613dedb53702f8832b47d59" region="main" offset="1000"/>
        <rom name="namcopac.6h" size="4096" crc="02083b03" sha1="7e1945f6eb51f2e51806d0439f975f7a2889b9b8" region="main" offset="2000"/>
        <rom name="namcopac.6j" size="4096" crc="7a36fe55" sha1="01b4c38108d9dc4e48da4f8d685248e1e6821377" region="main" offset="3000"/>
        <rom name="pacman.5e" size="4096" crc="0c944964" sha1="06ef227747a440831c9a3a613b76693d52a2f0a9" region="gfx1" dispose="yes" offset="0"/>
        <rom name="pacman.5f" size="4096" crc="958fedf9" sha1="4a937ac02216ea8c96477d4a15522070507fb599" region="gfx1" dispose="yes" offset="1000"/>
        <rom name="82s123.7f" size="32" crc="2fc650bd" sha1="8d0268dee78e47c712202b0ec4f1f51109b1f2a5" region="proms" offset="0"/>
        <rom name="82s126.4a" size="256" crc="3eb3a8e4" sha1="19097b5f60d1030f8b82d9f1d3a241f93e5c75d6" region="proms" offset="20"/>
        <rom name="82s126.1m" size="256" crc="a9cc86bf" sha1="bbcec0570aeceb582ff8238a4bc8546a23430081" region="namco" offset="0"/>
        <rom name="82s126.3m" size="256" crc="77245b66" sha1="0c4d0bee858b97632411c440bea6948a74759746" region="namco" offset="100"/>
        <chip type="cpu" tag="main" name="Z80" clock="3072000"/>
        <chip type="audio" tag="namco" name="Namco" clock="96000"/>
        <display type="raster" rotate="90" width="288" height="224" refresh="60.606061" pixclock="6144000" htotal="384" hbend="0" hbstart="288" vtotal="264" vbend="0" vbstart="224" />
        <sound channels="1"/>
        <input players="2" buttons="1" coins="2" service="yes">
            <control type="joy4way"/>
        </input>
        <dipswitch name="Rack Test (Cheat)">
            <dipvalue name="Off" default="yes"/>
            <dipvalue name="On"/>
        </dipswitch>
        <dipswitch name="Service Mode">
            <dipvalue name="Off" default="yes"/>
            <dipvalue name="On"/>
        </dipswitch>
        <dipswitch name="Cabinet">
            <dipvalue name="Upright" default="yes"/>
            <dipvalue name="Cocktail"/>
        </dipswitch>
        <dipswitch name="Coinage">
            <dipvalue name="2 Coins/1 Credit"/>
            <dipvalue name="1 Coin/1 Credit" default="yes"/>
            <dipvalue name="1 Coin/2 Credits"/>
            <dipvalue name="Free Play"/>
        </dipswitch>
        <dipswitch name="Lives">
            <dipvalue name="1"/>
            <dipvalue name="2"/>
            <dipvalue name="3" default="yes"/>
            <dipvalue name="5"/>
        </dipswitch>
        <dipswitch name="Bonus Life">
            <dipvalue name="10000" default="yes"/>
            <dipvalue name="15000"/>
            <dipvalue name="20000"/>
            <dipvalue name="None"/>
        </dipswitch>
        <dipswitch name="Difficulty">
            <dipvalue name="Normal" default="yes"/>
            <dipvalue name="Hard"/>
        </dipswitch>
        <dipswitch name="Ghost Names">
            <dipvalue name="Normal" default="yes"/>
            <dipvalue name="Alternate"/>
        </dipswitch>
        <driver status="good" emulation="good" color="good" sound="good" graphic="good" savestate="supported" palettesize="512"/>
    </game>
    <game name="puckmana" sourcefile="pacman.c" cloneof="puckman" romof="puckman">
        <description>PuckMan (Japan set 2)</description>
        <year>1980</year>
        <manufacturer>Namco</manufacturer>
        <rom name="pacman.6e" size="4096" crc="c1e6ab10" sha1="e87e059c5be45753f7e9f33dff851f16d6751181" region="main" offset="0"/>
        <rom name="pacman.6f" size="4096" crc="1a6fb2d4" sha1="674d3a7f00d8be5e38b1fdc208ebef5a92d38329" region="main" offset="1000"/>
        <rom name="pacman.6h" size="4096" crc="bcdd1beb" sha1="8e47e8c2c4d6117d174cdac150392042d3e0a881" region="main" offset="2000"/>
        <rom name="prg7" size="2048" crc="b6289b26" sha1="d249fa9cdde774d5fee7258147cd25fa3f4dc2b3" region="main" offset="3000"/>
        <rom name="prg8" size="2048" crc="17a88c13" sha1="eb462de79f49b7aa8adb0cc6d31535b10550c0ce" region="main" offset="3800"/>
        <rom name="chg1" size="2048" crc="2066a0b7" sha1="6d4ccc27d6be185589e08aa9f18702b679e49a4a" region="gfx1" dispose="yes" offset="0"/>
        <rom name="chg2" size="2048" crc="3591b89d" sha1="79bb456be6c39c1ccd7d077fbe181523131fb300" region="gfx1" dispose="yes" offset="800"/>
        <rom name="pacman.5f" merge="pacman.5f" size="4096" crc="958fedf9" sha1="4a937ac02216ea8c96477d4a15522070507fb599" region="gfx1" dispose="yes" offset="1000"/>
        <rom name="82s123.7f" merge="82s123.7f" size="32" crc="2fc650bd" sha1="8d0268dee78e47c712202b0ec4f1f51109b1f2a5" region="proms" offset="0"/>
        <rom name="82s126.4a" merge="82s126.4a" size="256" crc="3eb3a8e4" sha1="19097b5f60d1030f8b82d9f1d3a241f93e5c75d6" region="proms" offset="20"/>
        <rom name="82s126.1m" merge="82s126.1m" size="256" crc="a9cc86bf" sha1="bbcec0570aeceb582ff8238a4bc8546a23430081" region="namco" offset="0"/>
        <rom name="82s126.3m" merge="82s126.3m" size="256" crc="77245b66" sha1="0c4d0bee858b97632411c440bea6948a74759746" region="namco" offset="100"/>
        <chip type="cpu" tag="main" name="Z80" clock="3072000"/>
        <chip type="audio" tag="namco" name="Namco" clock="96000"/>
        <display type="raster" rotate="90" width="288" height="224" refresh="60.606061" pixclock="6144000" htotal="384" hbend="0" hbstart="288" vtotal="264" vbend="0" vbstart="224" />
        <sound channels="1"/>
        <input players="2" buttons="1" coins="2" service="yes">
            <control type="joy4way"/>
        </input>
        <dipswitch name="Rack Test (Cheat)">
            <dipvalue name="Off" default="yes"/>
            <dipvalue name="On"/>
        </dipswitch>
        <dipswitch name="Service Mode">
            <dipvalue name="Off" default="yes"/>
            <dipvalue name="On"/>
        </dipswitch>
        <dipswitch name="Cabinet">
            <dipvalue name="Upright" default="yes"/>
            <dipvalue name="Cocktail"/>
        </dipswitch>
        <dipswitch name="Coinage">
            <dipvalue name="2 Coins/1 Credit"/>
            <dipvalue name="1 Coin/1 Credit" default="yes"/>
            <dipvalue name="1 Coin/2 Credits"/>
            <dipvalue name="Free Play"/>
        </dipswitch>
        <dipswitch name="Lives">
            <dipvalue name="1"/>
            <dipvalue name="2"/>
            <dipvalue name="3" default="yes"/>
            <dipvalue name="5"/>
        </dipswitch>
        <dipswitch name="Bonus Life">
            <dipvalue name="10000" default="yes"/>
            <dipvalue name="15000"/>
            <dipvalue name="20000"/>
            <dipvalue name="None"/>
        </dipswitch>
        <dipswitch name="Difficulty">
            <dipvalue name="Normal" default="yes"/>
            <dipvalue name="Hard"/>
        </dipswitch>
        <dipswitch name="Ghost Names">
            <dipvalue name="Normal" default="yes"/>
            <dipvalue name="Alternate"/>
        </dipswitch>
        <driver status="good" emulation="good" color="good" sound="good" graphic="good" savestate="supported" palettesize="512"/>
    </game>
</mame> 
```

**这是我使用的代码**

```
Imports System.IO
Imports System.Xml
Public Class Form1

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Try
        Dim m_xmld As XmlDocument
        Dim m_nodelist As XmlNodeList
        Dim m_node As XmlNode

        m_xmld = New XmlDocument()
        m_xmld.Load("C:\mame2.xml")
        m_nodelist = m_xmld.SelectNodes("/mame/game")

        For Each m_node In m_nodelist

            Dim GameAttribute = m_node.Attributes.GetNamedItem("name").Value
            Dim name = m_node.ChildNodes.Item(0).InnerText
            Dim description = m_node.ChildNodes.Item(1).InnerText
            Dim manufacturer = m_node.ChildNodes.Item(2).InnerText
            Dim rotate = m_node.ChildNodes.Item(15).Attributes.GetNamedItem("rotate").Value
            Dim controles = m_node.ChildNodes.Item(17).ChildNodes.Item(0).Attributes.GetNamedItem("type").Value

            MessageBox.Show("ROM: " & GameAttribute _
              & "-- Description: " & name & "-- Year: " _
              & description & "-- Manufacturer: " _
              & manufacturer & "-- Rotate: " _
              & rotate & "-- Control Type: " & controles)

        Next
    Catch errorVariable As Exception

        MessageBox.Show(errorVariable.ToString())
    End Try
    Me.Close()
End Sub
End Class 
```

* * *

我正在尝试阅读“名称”、“描述”、“年份”、“制造商”、“旋转”和“输入播放器控制类型”。

使用此代码，我可以读取第一个游戏，但不能读取 XML 文件的其余部分（在此示例中，我粘贴了 2 个游戏）。我可以通过子节点编号读取子节点和属性，问题是“rom”中的游戏有不同数量的子节点，程序返回错误。

我想还有另一种方式来阅读这份文件，但我不知道是哪种方式。

感谢您的提前和对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:20:19.480

您需要使用 XPath 按名称访问子节点，而不是按索引。例如：

```
Dim name As String = m_node.SelectSingleNode("@name").InnerText
Dim description As String = m_node.SelectSingleNode("description").InnerText
Dim manufacturer As String = m_node.SelectSingleNode("manufacturer").InnerText
Dim rotate As String = m_node.SelectSingleNode("display/@rotate").InnerText
Dim controls As String = m_node.SelectSingleNode("input/control/@type").InnerText 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:38:52.057

这应该可以解决问题，尽管我确实对您尝试反序列化的对象类型采取了一些自由。还有一些工作要做（如“TODO”所述）。我遗漏的唯一代码是将文件路径解析为流以传递给主类的序列化/反序列化方法。我希望这有帮助。

```
#Region "Imports"
'first, import some usefull namespaces
Imports System
Imports System.IO
Imports System.Xml.Serialization
#End Region
#Region "Classes"
'then, start constructing your classes by drilling down in sequence
''' <summary>
''' A class to hold your xml file's data.
''' </summary>
''' <remarks>This class will hold the the data from your file.</remarks>
<XmlRoot("mame")> _
Public Class YourXML_File
#Region "Properties"
    <XmlAttribute(AttributeName:="build")> _
    Public Property Build As String
    <XmlAttribute(AttributeName:="debug")> _
    Public Property Debug As New StrangeBooleanNomenclatureType
    <XmlArray(ElementName:="game")> _
    Public Property Games As New List(Of Game)
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#Region "XML Serialization / Deserialization"
    ''' <summary>
    ''' Strongly typed method to serialize your object.
    ''' </summary>
    Public Shared Function Serialize(ByVal astream As Stream, ByVal axml_fileobj As YourXML_File) As Boolean
        'try to serialize the file stream
        Try
            'first create a xml serializer object
            Dim serializer As New XmlSerializer(GetType(YourXML_File))
            'then serialize the object
            serializer.Serialize(astream, axml_fileobj)
            'return a successful serialization
            Return True
        Catch ex As Exception

            'TODO: handle any exceptions here as you wish

            'let the calling method know the serialization failed
            Return False
        End Try
    End Function
    ''' <summary>
    ''' Strongly typed method to deserialize your object
    ''' </summary>
    Public Shared Function Deserialize(ByVal astream As Stream, ByVal axml_fileobj As YourXML_File) As Boolean
        'try to deserialize the file stream
        Try
            'first create a xml serializer object
            Dim serializer As New XmlSerializer(GetType(YourXML_File))
            'then deserialize the object
            axml_fileobj = serializer.Deserialize(astream)
            'return a successful deserialization
            Return True
        Catch ex As Exception

            'TODO: handle any exceptions here as you wish

            'let the calling method know the deserialization failed
            Return False
        End Try
    End Function
#End Region
#End Region
End Class
''' <summary>
''' A class to represent the "game" element.
''' </summary>
<XmlRoot("game")> _
Public Class Game
#Region "Properties"
    <XmlAttribute("name")> _
    Public Property Game_Name As String
    <XmlAttribute("sourcefile")> _
    Public Property Game_SourceFile As String
    <XmlElement("description")> _
    Public Property Game_Description As String
    <XmlElement("year")> _
    Public Property Game_Year As Integer
    <XmlElement("manufacture")> _
    Public Property Game_Manufacturer As String
    <XmlElement("roms")> _
    Public Property Game_Roms As New List(Of Rom)
    <XmlElement("chips")> _
    Public Property Game_Chips As New List(Of Chip)
    <XmlElement("display")> _
    Public Property Game_Display As New Display
    <XmlElement("sound")> _
    Public Property Game_Sound As New Sound
    <XmlElement("input")> _
    Public Property Game_Input As New Input
    <XmlElement("dipswitches")> _
    Public Property Game_Dipswitches As New List(Of DipSwitch)
    <XmlElement("driver")> _
    Public Property Game_Driver As New Driver
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
<XmlRoot("rom")> _
Public Class Rom
#Region "Properties"
    <XmlAttribute("name")> _
    Public Property Rom_Name As String
    <XmlAttribute("size")> _
    Public Property Rom_Size As Integer
    <XmlAttribute("crc")> _
    Public Property Rom_Crc As String
    <XmlAttribute("sha1")> _
    Public Property Rom_Sha1 As String
    <XmlAttribute("region")> _
    Public Property Rom_Region As New RomRegionType
    <XmlAttribute("dispose")> _
    Public Property Rom_Dispose As New StrangeBooleanNomenclatureType
    <XmlAttribute("offset")> _
    Public Property Rom_Offset As Integer
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
<XmlRoot("chip")> _
Public Class Chip
#Region "Properties"
    <XmlAttribute("type")> _
    Public Property Chip_Type As New ChipType
    <XmlAttribute("tag")> _
    Public Property Chip_Tag As String
    <XmlAttribute("name")> _
    Public Property Chip_Name As String
    <XmlAttribute("clock")> _
    Public Property Chip_Clock As Integer
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
<XmlRoot("display")> _
Public Class Display
#Region "Properties"
    <XmlAttribute("type")> _
    Public Property Display_Type As New DisplayType
    <XmlAttribute("rotate")> _
    Public Property Display_Rotate As Integer
    <XmlAttribute("width")> _
    Public Property Display_Width As Integer
    <XmlAttribute("height")> _
    Public Property Display_Height As Integer
    <XmlAttribute("refresh")> _
    Public Property Display_Refresh As Double
    <XmlAttribute("pixclock")> _
    Public Property Display_PixClock As Integer
    <XmlAttribute("htotal")> _
    Public Property Display_H_Total As Integer
    <XmlAttribute("hbend")> _
    Public Property Display_H_Bend As Integer
    <XmlAttribute("hbstart")> _
    Public Property Display_HbStart As Integer
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
<XmlRoot("sound")> _
Public Class Sound
#Region "Properties"
    <XmlAttribute("channels")> _
    Public Property Sound_Channels As Integer
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
<XmlRoot("input")> _
Public Class Input
#Region "Properties"
    <XmlAttribute("players")> _
    Public Property Input_Players As Integer
    <XmlAttribute("buttons")> _
    Public Property Input_Buttons As Integer
    <XmlAttribute("coins")> _
    Public Property Input_Coins As Integer
    <XmlAttribute("service")> _
    Public Property Input_Service As New StrangeBooleanNomenclatureType
    <XmlElement("control")> _
    Public Property Input_Controls As New List(Of Control)
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
<XmlRoot("control")> _
Public Class Control
#Region "Properties"
    <XmlAttribute("type")> _
    Public Property Control_Type As New ControlType
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
<XmlRoot("dipswitch")> _
Public Class DipSwitch
#Region "Properties"
    <XmlAttribute("name")> _
    Public Property DipSwitch_Name As String
    <XmlElement("dipvalue")> _
    Public Property DipSwitch_DipValues As New List(Of DipValue)
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
<XmlRoot("dipvalue")> _
Public Class DipValue
#Region "Properties"
    <XmlAttribute("name")> _
    Public Property DipValue_Name As String
    <XmlAttribute("default")> _
    Public Property DipValue_Default As New StrangeBooleanNomenclatureType
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
<XmlRoot("driver")> _
Public Class Driver
#Region "Properties"
    <XmlAttribute("status")> _
    Public Property Driver_Status As New StatusState
    <XmlAttribute("emulation")> _
    Public Property Driver_Emulation As New StatusState
    <XmlAttribute("color")> _
    Public Property Driver_Color As New StatusState
    <XmlAttribute("sound")> _
    Public Property Driver_Sound As New StatusState
    <XmlAttribute("graphic")> _
    Public Property Driver_Graphic As New StatusState
    <XmlAttribute("savestate")> _
    Public Property Driver_SaveState As New SaveStateType
    <XmlAttribute("palettesize")> _
    Public Property Driver_PaletteSize As Integer
#End Region
#Region "Methods"
#Region "Constructors"
    ''' <summary>
    ''' The default constructor.
    ''' </summary>
    ''' <remarks>The xml serializer requires a constructor which takes no arguments.</remarks>
    Public Sub New()
        'do stuff here if you need to, but try to relegate anything important to a constructor that takes a parameter accommodating said important behavior
    End Sub
#End Region
#End Region
End Class
#End Region
#Region "Enums"
'finally, introduce some enumerations to strongly define the exact range of the more loosely defined attributes used
Public Enum StatusState
    <XmlEnum("bad")> Bad = 0
    <XmlEnum("good")> Good = 1
End Enum
Public Enum StrangeBooleanNomenclatureType
    <XmlEnum("no")> No = 0
    <XmlEnum("yes")> Yes = 1
End Enum
Public Enum ChipType
    <XmlEnum("cpu")> CPU = 0
    <XmlEnum("audio")> Audio = 1

    'TODO: add other chip types here

End Enum
Public Enum RomRegionType
    <XmlEnum("main")> Main = 0
    <XmlEnum("gfx1")> GFX1 = 1
    <XmlEnum("proms")> Proms = 2
    <XmlEnum("namco")> Namco = 3

    'TODO: add more region types here

End Enum
Public Enum DisplayType
    <XmlEnum("raster")> Raster = 0

    'TODO: add more display types here

End Enum
Public Enum ControlType
    <XmlEnum("joy4way")> joy4way = 0

    'TODO: add more control types here

End Enum
Public Enum SaveStateType
    <XmlEnum("supported")> Supported = 0

    'TODO: add more save state types here

End Enum
#End Region 
```

# javascript - Javascript - 生成多个随机数而没有循环

> ID：11683242
> 
> 赞同：1
> 
> 时间：2012-07-27T07:26:21.233
> 
> 标签：javascript, random, vectorization

我想生成一个带有`n`随机数的数组（即`n`调用`Math.random()`）。**我不在乎它们是否独特**。

目前我正在使用一个循环：

```
let numbers = [];
for (let i = 0; i < n; ++i) {
    numbers.push(Math.random());
} 
```

我只是想知道这是否可以被矢量化——例如在其他语言中，我希望`Math.random(n)`能产生一个`n`随机数数组。或者循环是 Javascript 的方式吗？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:30:10.803

这样或那样你仍然会在下面的某个地方得到一个循环——即使有任何用于 javascript 的“矢量化”库，它也会归结为循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:10:08.610

在某些情况下，“懒惰”可能会有所帮助。如果您不确定是否需要所有 n 个生成的数字。你最好使用[yield](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7?redirectlocale=en-US&redirectslug=New_in_JavaScript_1.7#Generators) ...

# msbuild - 使用发布配置文件部署现有包

> ID：11683243
> 
> 赞同：27
> 
> 时间：2012-07-27T07:26:39.627
> 
> 标签：msbuild, msdeploy, webdeploy, web-publishing, msbuild-wpp

我正在尝试使用新的[发布配置文件支持](http://msdn.microsoft.com/en-us/library/dd394698%28v=vs.110%29)（在 VS2012 和 VS2010 中通过更新提供）来创建持续交付“部署管道”，从而在第一个“阶段”制作包/压缩包，并且*相同的包*是使用不同的配置部署到各种环境。

使用 pubxml 文件中定义的设置，从命令行部署现有包时涉及哪些任务/属性，并且不会导致构建？换句话说，我想“发布”到一个*包*，然后再将同一个包“发布”到另一个配置文件而不重建它。

（我知道我可以直接使用 MSDeploy，但如果可能的话，我希望每个项目的管道更少）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T01:08:35.690

**更新 2014-01-28**

使我的自定义脚本与 VS / Azure SDK 的不断变化的版本保持同步最终是一项艰巨的工作，所以我实际上已经恢复到使用生成的`deploy.cmd`脚本，但有一个细微的区别：

我已经开始将所有参数值从`ProfileName.pubxml`文件中删除，而是将它们放在一个`ProfileName.paramters.xml`（`.SetParameters.xml`使用包生成的示例，[此处的文档](http://msdn.microsoft.com/en-us/library/ff398068%28v=vs.110%29.aspx)）中。这些将按约定由 Visual Studio / MSBuild 自动拾取，我可以在运行时通过`-setParamFile:path\to\ProfileName.parameters.xml`调用时传入它们来使用它们`deploy.cmd`

**更新 - 现在正在 GitHub 上维护（并记录）此脚本的更新版本 - [https://github.com/richardszalay/msdeploy-package-publish](https://github.com/richardszalay/msdeploy-package-publish)**

经过大量挖掘，我发现 Microsoft.Web.Publishing.targets (v10.5) 中的几个问题阻止了它的工作。为了解决这些问题，我创建了以下 MSBuild 脚本，可以将其放置在与 Web 应用程序的 csproj 相同的目录中。我添加了与修复和实现细节相关的评论。

该脚本使用 Microsoft.Web.Publishing.targets，因此大多数标准属性应该仍然有效。以下是您可以使用它的一些方法：

```
# Convention based
msbuild PackageDeploy.build /p:PublishProfile=Stage;WebPublishPipelineProjectName=Name_of_your_web_application

# Absolute paths to profile + package
msbuild PackageDeploy.build /p:PublishProfile=Path\To\Profile.pubxml;PackageFileName=Path\To\Package.zip;WebPublishPipelineProjectName==Name_of_your_web_application 
```

如果您使用的是 VS2012，请确保您声明`VisualStudioVersion=v11.0`导入正确的发布文件。

使用此脚本，您无需在部署管道的后续阶段重新检查您的 Web 应用程序。在构建/打包阶段之后，您只需要保留以下工件：

*   PackageDeploy.build（下）
*   您的发布配置文件
*   Web 应用程序包 zip

这是 PackageDeploy.build 的源代码：

```
<!--
This build script supports deployment of a website package to a publish profile without rebuilding the project or package

If placed in the same directory as a web project that uses publish profiles, the following arguments will need to be defined:

Convention based required arguments:
  PublishProfile: the name of the publish profile (or a path to a pubxml file if using non-convention based)
  Configuration: Debug/Release

Convention based optional arguments:
  VisualStudioVersion: Property specific to this build script that determines which WPP version to use (v10.5 [default] for VS2010+Azure updates, v11.0 for VS2012)
  WebPublishPipelineProjectName:
  WebPublishPipelineProjectDirectory: The root to the web project directory if this build script isn't there and PublishProfile isn't a path (to auto-detect publish profile directory)

Non-convention based optional arguments:
  PackageFileName: The full path to the website package zip
  UseDeclareParametersXMLInMsDeploy: true to save the parameters to a file and then use that file; false to inline the parameters
  UseMsDeployExe: true to use msdeploy.exe; false to use the VS MSBuild task

-->
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="DeployFromPackage">

  <PropertyGroup>
    <!-- IMPL: Set this to v11.0 to use VS2012 -->
    <VisualStudioVersion>v10.5</VisualStudioVersion>
  </PropertyGroup>

  <PropertyGroup>
    <!-- IMPL: Declared in Microsoft.Web.Publishing.targets, but we need to declare PublishProfileRootFolder before it's imported -->
    <WebPublishPipelineProjectDirectory Condition="'$(WebPublishPipelineProjectDirectory)'==''">$(MSBuildProjectDirectory)</WebPublishPipelineProjectDirectory>

    <!-- IMPL: Usually detected by ".csproj" vs ".vbproj", but PackageDeploy.build is neither -->
    <PublishProfileRootFolder Condition="'$(PublishProfileRootFolder)' == '' and Exists('My Project\PublishProfiles')">$(WebPublishPipelineProjectDirectory)\My Project\PublishProfiles</PublishProfileRootFolder>
    <PublishProfileRootFolder Condition="'$(PublishProfileRootFolder)' == '' and Exists('Properties\PublishProfiles')">$(WebPublishPipelineProjectDirectory)\Properties\PublishProfiles</PublishProfileRootFolder>
  </PropertyGroup>

  <!-- IMPL: Select the correct version of Microsoft.Web.Publishing.targets (usually done by the csproj via WebApplication.targets) -->
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\$(VisualStudioVersion)\Web\Microsoft.Web.Publishing.targets" />

  <!-- FIX: MSDeployPublish depends on building the package (can be skipped by clearing MSDeployPublishDependsOn) -->
  <!-- IMPL: ImportPublishingParameterValues transforms all the MSDeployParameterValue+ParameterValue to MsDeployDeclareParameters+Value -->
  <Target Name="DeployFromPackage" Condition="'$(PublishProfile)' != ''" DependsOnTargets="ImportPublishingParameterValues">

    <PropertyGroup>
      <_PublishMsDeployServiceUrl>$(MsDeployServiceUrl)</_PublishMsDeployServiceUrl>
      <_PublishMsDeployServiceUrl Condition="('$(MSDeployPublishMethod)'=='INPROC')"></_PublishMsDeployServiceUrl>
    </PropertyGroup>

    <ItemGroup>
      <!-- IMPL: Always uses "package" source -->
      <MsDeploySourceProviderSetting Remove="@(MsDeploySourceProviderSetting)" />
      <MsDeploySourceProviderSetting Include="package">
        <Path>@(_MSDeployPackageFile->'%(FullPath)')</Path>
        <EncryptPassword>$(DeployEncryptKey)</EncryptPassword>
        <WebServerAppHostConfigDirectory>$(_MSDeploySourceWebServerAppHostConfigDirectory)</WebServerAppHostConfigDirectory>
        <WebServerManifest>$(_MSDeploySourceWebServerManifest)</WebServerManifest>
        <WebServerDirectory>$(_MSDeploySourceWebServerDirectory)</WebServerDirectory>
      </MsDeploySourceProviderSetting>

      <MsDeployDestinationProviderSetting Remove="@(MsDeployDestinationProviderSetting)" />
      <MsDeployDestinationProviderSetting Include="auto">
        <Path></Path>
        <ComputerName>$(_PublishMsDeployServiceUrl)</ComputerName>
        <UserName>$(UserName)</UserName>
        <Password>$(Password)</Password>
        <EncryptPassword>$(DeployEncryptKey)</EncryptPassword>
        <IncludeAcls>False</IncludeAcls>
        <AuthType>$(AuthType)</AuthType>
        <WebServerAppHostConfigDirectory>$(_MSDeployDestinationWebServerAppHostConfigDirectory)</WebServerAppHostConfigDirectory>
        <WebServerManifest>$(_MSDeployDestinationWebServerManifest)</WebServerManifest>
        <WebServerDirectory>$(_MSDeployDestinationWebServerDirectory)</WebServerDirectory>
      </MsDeployDestinationProviderSetting>
    </ItemGroup>

    <!--Debug/Diagnostic message is not localized-->
    <Message Text="MSDeployPublish MsDeploySourceProviderSetting is @(MsDeploySourceProviderSetting)" Condition="$(EnablePackageProcessLoggingAndAssert)" />
    <Message Text="MSDeployPublish MsDeployDestinationProviderSetting is @(MsDeployDestinationProviderSetting)" Condition="$(EnablePackageProcessLoggingAndAssert)"/>

    <ExportParametersFile
      Condition="!$(UseDeclareParametersXMLInMsDeploy) And $(EnablePackageProcessLoggingAndAssert)"
      Parameters="@(MsDeployDeclareParameters)"
      DeclareSetParameterFile="$(PackageLogDir)\MSDeployPublish.parameters.xml"
      GenerateFileEvenIfEmpty="True"
      />

    <!--First delete the ParameterFile-->
    <Delete Files="$(PublishParametersFile)"  Condition="Exists($(PublishParametersFile))" ContinueOnError="true"/>

    <!-- FIX: Use SetParameterFile (rather than DeclareSetParameterFile), which isn't used anywehere in Microsoft.Web.Publishing.targets -->
    <ExportParametersFile
      Parameters="@(MsDeployDeclareParameters)"
      SetParameterFile="$(PublishParametersFile)"
      GenerateFileEvenIfEmpty="True"
      Condition="$(UseDeclareParametersXMLInMsDeploy)"
      />

    <PropertyGroup>
      <_VsPublishParametersFile></_VsPublishParametersFile>
      <_VsPublishParametersFile Condition="$(UseDeclareParametersXMLInMsDeploy) and '$(_VsPublishParametersFile)'==''">$(PublishParametersFile)</_VsPublishParametersFile>
    </PropertyGroup>

    <ItemGroup Condition="!$(UseDeclareParametersXMLInMsDeploy)">
      <_VsPublish_MsDeployDeclareParameters Remove="@(_VsPublish_MsDeployDeclareParameters)" />
      <_VsPublish_MsDeployDeclareParameters Include="@(MsDeployDeclareParameters)" />

      <!-- IMPL: Utilising the real version of this has way too much baggage (simplifying it could have repercussions, though) -->
      <_VsPublish_MsDeployDeclareParameters Include="$(DeployParameterIISAppName)" Condition="'$(DeployIisAppPath)' != ''">
        <Value>$(DeployIisAppPath)</Value>
      </_VsPublish_MsDeployDeclareParameters>
    </ItemGroup>

    <!-- FIX: Microsoft.Web.Publishing.targets uses "SetParameterItems", which doens't appear to work. This uses SimpleSetParameterItems instead  -->
    <VSMSDeploy
      Condition="!$(UseMsdeployExe)"
      MSDeployVersionsToTry="$(_MSDeployVersionsToTry)"
      Source="@(MsDeploySourceProviderSetting)"
      Destination="@(MsDeployDestinationProviderSetting)"
      DisableLink="$(PublishDisableLinks)"
      EnableLink="$(PublishEnableLinks)"
      AllowUntrustedCertificate="$(AllowUntrustedCertificate)"
      BuildingInsideVisualStudio="$(BuildingInsideVisualStudio)"
      SkipExtraFilesOnServer="$(SkipExtraFilesOnServer)"
      SkipRuleItems="@(MsDeploySkipRules)"
      OptimisticParameterDefaultValue="$(EnableOptimisticParameterDefaultValue)"
      SimpleSetParameterItems="@(_VsPublish_MsDeployDeclareParameters)"
      ImportSetParametersItems="$(_VsPublishParametersFile)"
      RetryAttempts="$(RetryAttemptsForDeployment)"
      InvokedByPublish="true"
    >
      <Output TaskParameter="Result" PropertyName="_PublishResult" />
    </VSMSDeploy>

    <!-- FIX: Microsoft.Web.Publishing.targets uses "SetParameterItems", which doens't appear to work. This uses SimpleSetParameterItems instead  -->
    <MSdeploy
          Condition="$(UseMsdeployExe)"
          Verb="sync"
          Source="@(MsDeploySourceProviderSetting)"
          Destination="@(MsDeployDestinationProviderSetting)"
          DisableLink="$(PublishDisableLinks)"
          EnableLink="$(PublishEnableLinks)"
          EnableRule="$(MsDeployDoNotDeleteRule)"
          AllowUntrusted="$(AllowUntrustedCertificate)"
          SkipRuleItems="@(MsDeploySkipRules)"
          OptimisticParameterDefaultValue="$(EnableOptimisticParameterDefaultValue)"
          SimpleSetParameterItems="@(_VsPublish_MsDeployDeclareParameters)"
          ImportSetParametersItems="$(_VsPublishParametersFile)"
          RetryAttempts="$(RetryAttemptsForDeployment)"
          ExePath="$(MSDeployPath)" />
  </Target>

</Project> 
```

# java - 在 JSP 中获取客户端的 IP 地址

> ID：11683246
> 
> 赞同：7
> 
> 时间：2012-07-27T07:26:43.793
> 
> 标签：java, jsp, ip

我需要在 JSP 页面中获取客户端的 IP 地址。我尝试了以下方法：

```
request.getRemoteAddr()
request.getHeader("X_FORWARDED_FOR")
request.getHeader("HTTP_CLIENT_IP")
request.getHeader("WL-Proxy-Client-IP")
request.getHeader("Proxy-Client-IP")
request.getHeader("REMOTE_ADDR") 
```

但是，这些方法都没有返回所需的 IP 地址。如何在 JSP 页面中获取客户端的 IP 地址？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-19T10:32:45.477

要获取客户端的 IP 地址，我使用了以下方法

```
<%   String ip = request.getHeader("X-Forwarded-For");  
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
            ip = request.getHeader("Proxy-Client-IP");  
        }  
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
            ip = request.getHeader("WL-Proxy-Client-IP");  
        }  
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
            ip = request.getHeader("HTTP_CLIENT_IP");  
        }  
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
            ip = request.getHeader("HTTP_X_FORWARDED_FOR");  
        }  
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {  
            ip = request.getRemoteAddr();  
        }
        %> 
```

希望这有帮助，请留下反馈。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T07:41:59.623

```
<%
out.print( request.getRemoteAddr() );
out.print( request.getRemoteHost() );
%> 
```

如果客户端在代理后面，您可能无法获得真实的客户端 IP，您将获得代理的 IP 而不是客户端。但是，代理可能会在特殊的 HTTP 标头中包含请求客户端 IP。

```
<%
out.print( request.getHeader("x-forwarded-for") );
%> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T07:49:38.307

您的应用程序服务器是在负载平衡器、代理还是 Web 服务器后面？只是一个例子；F5 负载均衡器使用“rlnclientipaddr”标头公开客户端 IP 地址：

```
request.getHeader("rlnclientipaddr"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:36:25.720

你使用像apache代理这样的反向代理吗？ [http://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

在反向代理模式下（例如，使用 ProxyPass 指令），mod_proxy_http 添加几个请求标头以便将信息传递给源服务器。这些标题是：

```
X-Forwarded-For
The IP address of the client.
X-Forwarded-Host
The original host requested by the client in the Host HTTP request header.
X-Forwarded-Server
The hostname of the proxy server. 
```

# android - Android 自定义标题栏 - 居中文本

> ID：11683258
> 
> 赞同：0
> 
> 时间：2012-07-27T07:27:38.143
> 
> 标签：android, customization, titlebar

我已经用我自己的布局创建了自定义标题栏。我希望在与水平中心对齐的标题栏中显示文本（= 与默认标题栏相同）。但这对我不起作用，我的文本仍然对齐到 fitlebar 的顶部，而不是中心。你能给我一些建议吗？

我正在使用这段代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/top_back">
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:id="@+id/title"
        android:layout_gravity="center_vertical"
        android:paddingLeft="15dip"
    />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:32:45.660

对于重力和layout_gravity的简单理解：

> android:gravity => 设置其使用的视图内容的重力。
> 
> android:layout_gravity => 设置视图或布局在其父级中的重力。

更多信息：[Android 上的 Gravity 和 layout_gravity](https://stackoverflow.com/questions/3482742/android-gravity-and-layout-gravity)

现在，您需要`android:gravity="center_horizontal"`在`<TextView>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:35:00.747

将 android:layout_height="match_parent" 更改为 "wrap_content" 。它会起作用

```
 <TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/title"
    android:text="center"
    android:layout_gravity="center"></TextView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:30:42.393

这将起作用：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
android:background="@drawable/top_back">
<TextView 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/title"
    android:gravity="center_vertical"
    android:paddingLeft="15dip"
/> 
```

通过改变，`android:layout_width`和`android:gravity`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:43:20.553

您可以使用 RelativeLayout 而不是 LinearLayout。RelativeLayout 可以更好地处理视图的属性。

使用此代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/top_back">
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:id="@+id/title"
        android:layout_alignParentTop = "true"
        android:layout_centerHorizontal = "true"
    />
</RelativeLayout> 
```

在代码中，我为此更改了 XML 的最后几行：

```
 android:layout_alignParentTop = "true"
   android:layout_centerHorizontal = "true" 
```

第一行将 TextView 设置在视图的顶部，第二行将中心水平设置在顶部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T07:43:28.107

更改**android:layout_gravity="center_horizo​​ntal"**

请看一下代码，需要以完全相同的方式使其居中。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.playing_video);  // Actual Layout Name

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
            R.layout.custom_layout); // Layoutname of Title Text

    TextView titleText= (TextView) findViewById(R.id.title);

    titleText.setText("Your Text"); 
```

}

它对我有用，让我知道它是否对你有用。

# asp.net - 在子报表中传递查询

> ID：11683259
> 
> 赞同：0
> 
> 时间：2012-07-27T07:27:57.390
> 
> 标签：asp.net, crystal-reports

我有一个 Asp.net 水晶报告，其中我使用了 2 个子报告。
我将以下查询传递给我的主报告：

```
select * from VW_Report_PIGroup where Lc_No='NIB12INSU9001005253' 
```

我需要在 2 个子报告中传递查询的剩余部分，查询是：

```
1st Sub report=> and Group_Type ='PerfInv'  
2nd Sub report=> and Group_Type = 'Charges' 
```

帮助我在子报告中传递查询的剩余部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:26:46.307

在每个子报告中：
- 转到`Database Expert`\ `Edit command`（如果您还没有创建，则创建）
- 创建一个参数，命名它`QueryBegin` - 双击参数并键入查询的其余部分，这样您应该有这个命令： `{?BeginReport} and Group_Type ='PerfInv'`

现在在主报告中：
- 右键单击​​子报告，然后`Change Sub-Report Links`
- 传递给`BeginReport`查询的第一部分的参数，从存储位置获取

# php - 如何优化此查询以更快地从中获取结果？

> ID：11683260
> 
> 赞同：0
> 
> 时间：2012-07-27T07:28:00.657
> 
> 标签：php, mysql

我有这个查询，我执行了很多次。你能建议如何优化这个吗？索引已应用于表。

```
SELECT
    DISTINCT b.appearance_id,
    b.photo_album_id,
    b.eventcmmnt_id,
    b.id,
    b.mem_id,
    b.subj,
    b.body,
    b.date,
    b.parentid,
    b.from_id,
    b.visible_to,
    b.image_link,
    b.post_via,
    b.youtubeLink,
    b.link_image,
    b.link_url,
    b.auto_genrate_text
FROM
    bulletin b
INNER JOIN
    network n
ON
    ( n.mem_id = b.mem_id )
WHERE
    b.parentid = '0' AND 
    '$userid' IN (n.frd_id, b.mem_id))
GROUP BY
    b.id
ORDER BY
    b.date DESC
LIMIT
    0,20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:33:34.297

和所有`network.frd_id`的索引？如果不是，如果表中有一些较大的卷，您将陷入混乱。`network.mem_id``bulletin.mem_id`

此外，`and ('$userid' IN (n.frd_id, b.mem_id))`在成本方面是可怕的。如果可能的话，您应该始终坚持`=`,`!=`等等。是否可以用 替换这条线`and ('$userid' = n.frd_id or '$userid = b.mem_id)`？

最后，如果您正在查看一些重要的记录，重新排序表格可能对您来说是一个巨大的胜利。我在工作中运行一些庞大的数据库，其中包含由键值标识的大量数据。通常，我想将这些值聚合到某个级别。我发现偶尔运行`alter table someTableName order by col1, col2;`将记录分组到可能被聚合或筛选在一起的块中会产生巨大的改进。

# sharepoint - 使用powershell将sharepoint 2007列表数据保存为xml

> ID：11683263
> 
> 赞同：1
> 
> 时间：2012-07-27T07:28:06.443
> 
> 标签：sharepoint, powershell

我正在尝试迁移一些 sharepoint 2007 列表。谁能告诉我用powershell将sharepoint列表数据保存到xml的最佳方法是什么？我想保存列名和它们包含的数据。

请帮忙举一些例子。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:18:28.307

使用 Stsadm Gary la 点扩展来获取您的列和 CT

使用此信息构建您的列表。

将数据导出到 Excel 并复制。

看到这个其他线程

[关于从 2007 年到 2010 年共享点迁移的建议](https://stackoverflow.com/questions/11456556/advice-about-sharepoint-migration-from-2007-to-2010/11466225#11466225)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:33:10.247

Powershell 是为 SP2010 引入的，2007 年的替代方案是 stsadmin，但它没有任何迁移内置列表的功能。最好的办法是通过 STP 手动导出它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:50:49.413

您可以尝试其他 powershell 方式，即在 powershell 中加载 .NET sharepoint 程序集并使用 sharepoint 对象模型。

在这里你可以找到一个开始练习的链接：http: [//nickgrattan.wordpress.com/2007/09/03/preparing-powershell-for-sharepoint-and-moss-2007/](http://nickgrattan.wordpress.com/2007/09/03/preparing-powershell-for-sharepoint-and-moss-2007/)

# jquery - 使用 Firebug 加载页面后嵌入 jQuery

> ID：11683265
> 
> 赞同：2
> 
> 时间：2012-07-27T07:28:24.070
> 
> 标签：jquery, firefox, firebug

我想在加载完成后将 jQuery 嵌入到带有 Firebug 的网站上。

我尝试使用 Firebug 放入`<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>`标签`BODY`，但没有奏效。

使用 Firebug，我无法访问标签实际所属`HEAD`的网站部分。`<script>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:37:35.207

怎么样

```
var script = document.createElement('script');
script.src = '//code.jquery.com/jquery-latest.min.js';
document.getElementsByTagName('head')[0].appendChild(script); 
```

# actionscript-3 - Flash中的文本字段焦点无法在线工作

> ID：11683267
> 
> 赞同：0
> 
> 时间：2012-07-27T07:28:33.597
> 
> 标签：actionscript-3, flash-cs5.5

我创建了一个 Flash CS5.5 电影。设置是一个小游戏。电影从一个文本字段开始，用户必须输入代码。所以文本字段必须有一个焦点。我用这段代码做到这一点：

```
txtInput.stage.focus = txtInput; 
```

它工作正常！但是当我将我的 SWF 放入默认的 HTML 页面（在线）时，唯一发生的事情就是我的光标在文本字段中 ping，但我不能再输入了。我首先必须单击文本字段，然后才能输入。所以焦点设置正确，但我无法在我的文本字段中输入。有人可以帮我解决我的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:07:31.123

我认为在 HTML 中，您需要先将焦点添加到 Flash。

[http://helpx.adobe.com/flash/kb/give-keyboard-focus-embedded-movie.html](http://helpx.adobe.com/flash/kb/give-keyboard-focus-embedded-movie.html)

# c# - 如何使用进度条？

> ID：11683274
> 
> 赞同：0
> 
> 时间：2012-07-27T07:29:03.260
> 
> 标签：c#, wpf, telerik

我正在将数据从“WPF”中的一个位置复制到另一个位置。单击复制按钮时，应启用进度条，在立即复制所有数据后，应关闭进度条？请帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:30:06.963

只需设置 ProgressBar 的 IsEnabled 属性

将可见性设置为 System.Windows.Visibility.Collapsed 以隐藏它。

# java - Java 应用程序的 CPU 使用率是否与处理器相关

> ID：11683275
> 
> 赞同：0
> 
> 时间：2012-07-27T07:29:06.497
> 
> 标签：java, performance, cpu-usage

处理器的数量与 CPU 使用率的计算有什么关系。我从有关 CPU 使用率计算的各种链接中提到了进程 CPU`time/execution`时间。如果是双核处理器，是不是像

```
cpu usage = (process cpu time)/(execution time)*(no. of processors) 
```

或者

```
cpu usage = (process cpu time)/(execution time) 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:36:31.820

我喜欢让事情变得简单。在 Java 中，您可以获得每个线程的 cpu 使用率和总 cpu 使用率。

> 总 cpu 时间 = thread-1 cpu 时间 + thread-2 cpu 时间 + .. + thread-N cpu 时间；

`* no of processors`鉴于您很少希望所有线程执行完全相同的工作量，我认为 using 并不是那么有用。

CPU 使用率百分比为

> cpu 使用百分比 = 100 * 总 cpu 时间/经过时间。

这意味着，如果您看到大约 100% 的百分比使用率，您正在使用大约一个 CPU 线程。这可能意味着您的应用程序实际上是单线程的，您需要改进多线程的工作方式，即您需要更多线程或修复当前线程的行为方式。如果您看到您的 CPU 使用率远低于 100%，则可能您不需要多个线程并且您想要更少的线程。

# java - 未检测到子节点

> ID：11683277
> 
> 赞同：0
> 
> 时间：2012-07-27T07:29:08.197
> 
> 标签：java, xml, parsing

这是一个 XML：

```
<mesh>

  <triangles material="face" count="990">
          <input semantic="VERTEX" source="#boyShape-skin-vertices" offset="0"/>
          <input semantic="NORMAL" source="#boyShape-skin-normals" offset="1"/>
          <input semantic="TEXCOORD" source="#boyShape-skin-map-channel1" offset="2" set="1"/>
          <p>45 56 44 61 57 45 58 58 46 58 58 46 65 59 47 45 56 44 46 60 48 67 61 49 58 58 46 58 58 46 61 57 45 46 60 48 49 62 50 66 63 51 </p>
  </triangles>
  <triangles material="face" count="1320">
          <input semantic="VERTEX" source="#boyShape-skin-vertices" offset="0"/>
          <input semantic="NORMAL" source="#boyShape-skin-normals" offset="1"/>
          <input semantic="TEXCOORD" source="#boyShape-skin-map-channel1" offset="2" set="1"/>
          <p>45 46 60 48 49 62 50 66 63 51 45 56 44 61 57 45 58 58 46 58 58 46 65 59 47 45 56 44 46 60 48 67 61 49 58 58 46 58 58 46 61 57 45 46 60 48 49 62 50 66 63 51 </p>
  </triangles>
  <triangles material="face" count="1540">
          <input semantic="VERTEX" source="#boyShape-skin-vertices" offset="0"/>
          <input semantic="NORMAL" source="#boyShape-skin-normals" offset="1"/>
          <input semantic="TEXCOORD" source="#boyShape-skin-map-channel1" offset="2" set="1"/>
          <p>58 46 58 58 46 65 59 47 45 56 44 61 57 45 58 58 46 58 58 46 65 59 47 45 56 44 46 60 48 67 61 49 58 58 46 58 58 46 61 57 45 46 60 48 49 62 50 66 63 51 </p>
  </triangles> 
  </mesh> 
```

Java 代码是

```
for(int s=0; s<mesh.getLength() ; s++){
    Node firstPersonNode = mesh.item(s);
    System.out.println(mesh.item(s).getNodeName() + " Test");
    if(firstPersonNode.getNodeType() == Node.ELEMENT_NODE){
        Element firstPersonElement = (Element)firstPersonNode;
        NodeList source = firstPersonElement.getElementsByTagName("triangles");    
        System.out.println(source.getLength() + "Source Length");
        Node firstsource = source.item(1); // triangles index given here
        if(firstsource.getNodeType() == Node.ELEMENT_NODE){
            Element firstPersonElement1 = (Element)firstsource;
            System.out.println(firstPersonElement1.getAttribute("id") + " -->  <-- ");
            NodeList floatarray = firstPersonElement1.getElementsByTagName("p");
            Element firstNameElement = (Element)floatarray.item(0);
            NodeList textFNList = firstNameElement.getChildNodes();
            System.out.println("Vertexes : " + ((Node)textFNList.item(0)).getNodeValue().trim());  
        }
    }
} 
```

我正在尝试解析位于三角形节点内的输入和 p 但是，我有一个问题。问题是当我在上述代码中将索引指定为 1 时，所有子节点都被检测到并被解析。除了 1 它甚至没有检测到子节点 input 和 p。可能是什么问题？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:29:13.880

以下是使用 DOM API 解析文档的方法：

```
 NodeList triangles = document.getElementsByTagName("triangles");
    System.out.println("triangles: " + triangles.getLength());

    for (int i = 0; i < triangles.getLength(); i++) {
        Element triangle = (Element) triangles.item(i);
        System.out.println("triangle: material=" + triangle.getAttribute("material") + " count=" + triangle.getAttribute("count"));

        NodeList inputs = triangle.getElementsByTagName("input");
        for (int j = 0; j < triangles.getLength(); j++) {
            Element input = (Element) inputs.item(j);
            System.out.println("  input: semantic=" + input.getAttribute("semantic"));
        }

        Element vertices = (Element) triangle.getElementsByTagName("p").item(0);
        System.out.println("  vertices: " + vertices.getTextContent().trim());
    } 
```

# ios - iOS 自定义字体被取代

> ID：11683280
> 
> 赞同：3
> 
> 时间：2012-07-27T07:29:22.917
> 
> 标签：ios, ipad, uifont

对于一个项目，我购买了一种`OTF`字体并将其包含到我的项目中（添加到 plist 文件等）。它可以工作，我可以在我的按钮上设置字体，但是标签会被替换。我添加了一个屏幕截图，以便您查看我的问题。任何人都知道问题可能是什么？

系统：带有 iOS 6.0 beta 的 iPad 3，但在 iOS 5.1.1 上同样的问题

![在此处输入图像描述](../Images/3547f69adafd03ccb1bcdfb79a9e4dbb.png)

编辑：

我找到了一个关于这个问题的帖子。

[http://www.andyyardley.com/2012/04/24/custom-ios-fonts-and-how-to-fix-the-vertical-position-problem/](http://www.andyyardley.com/2012/04/24/custom-ios-fonts-and-how-to-fix-the-vertical-position-problem/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T13:00:39.217

好的，现在我明白了 :) 只需查看我在问题中链接的博文即可。

> [http://www.andyyardley.com/2012/04/24/custom-ios-fonts-and-how-to-fix-the-vertical-position-problem/](http://www.andyyardley.com/2012/04/24/custom-ios-fonts-and-how-to-fix-the-vertical-position-problem/)

概括：

*   下载 Apple 字体工具套件
*   终端：ftxdumperfuser -t hhea -A d font.ttf
*   在目录中创建的 XML 文件
*   使用文本编辑器打开 XML 并调整上行、下行的设置
*   终端：ftxdumperfuser -t hhea -A f font.ttf
*   将自定义字体添加到您的项目中（不要忘记 plist 项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:38:32.800

您可以重新对齐`UIButton`的文本位置：

```
[_button setTitleEdgeInsets:UIEdgeInsetsMake(0.f, 0.f, 10.f, 0.f)]; // e.g. 
```

# c# - 通过 Tamir.sharpSsh 的 SSH 连接未创建

> ID：11683282
> 
> 赞同：0
> 
> 时间：2012-07-27T07:29:37.643
> 
> 标签：c#, networking, ssh, client-server, sharpssh

我制作了一个应用程序，它使用 SSH 连接连接到设备，就像我们使用[PUTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)软件一样。在我的应用程序中，我使用了 Tamir.sharpSsh C# 库。它在建立 SSH 连接时出现异常。我不知道这是库或设备响应的问题还是其他问题。

下面是代码。

```
using Tamir.SharpSsh;

                        var obj = new SshStream(ip, username, password); // exception here
                        obj.Write("ls -a");
                        string rS = obj.ReadResponse();
                        richTextBox.Text = rS; 
```

这是例外

```
Exception : System.IO.IOException
   at Tamir.SharpSsh.jsch.Session.connect(Int32 connectTimeout)
   at Tamir.SharpSsh.jsch.Session.connect()
   at Tamir.SharpSsh.SshStream..ctor(String host, String username, String password) 
```

如果需要，我还可以提供 Wireshark 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:39:52.107

Tamir.SSH 已损坏且无法正常工作。.Net 目前唯一的开源 SSH 库是 SSH.Det。您可以在以下链接中找到它：[http](http://sshnet.codeplex.com/) : //sshnet.codeplex.com/ 看看这个 SO 问题：[有没有好的免费 .Net 网络库？（FTP、SFTP、SSH 等）](https://stackoverflow.com/questions/153220/are-there-any-good-free-net-network-libraries-ftp-sftp-ssh-etc)

# php - 拆分 CSV，但不能仅使用逗号（PHP）？

> ID：11683284
> 
> 赞同：-1
> 
> 时间：2012-07-27T07:29:40.210
> 
> 标签：php, csv

我想拆分一个 CSV 字符串。字符串如下所示：

**“val1”，“val2”，“val3，其他一些东西”，“val4”**

如您所见，值内可能有一个逗号（请参阅 val3），因此在逗号上使用 explode 将不起作用。

我也试过：

```
preg_split('/","/', $myLine) 
```

但这不起作用，否则我该怎么做？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:30:37.947

如果您的数据在文件中，您可以使用内置的[fgetcsv ，](http://php.net/manual/en/function.fgetcsv.php)

或[str_getcsv](http://php.net/manual/en/function.str-getcsv.php)如果您的数据是字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T07:31:26.893

对于 PHP 函数中的 CSV 文件：[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)

在第三个参数中，您可以设置分隔符，默认情况下 - “，”（逗号）

函数读取每一行并返回包含当前行元素的数组

**示例**：

```
$f = fopen('file.csv', 'r+');
while (($data = fgetcsv($f, 1000, ",")) !== FALSE) {
    /* $data is array with elements for current line */
}
fclose($f); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T07:36:09.237

```
$inputfiledelimiter="~";
if (($handle = fopen($target_path, "r")) !== FALSE) 
{       
    while (($data = fgetcsv($handle, 0, $inputfiledelimiter)) !== FALSE) 
    {

    }   
} 
```

# select - Dojo/Dijit 问题和表单选择中的空白选项

> ID：11683285
> 
> 赞同：0
> 
> 时间：2012-07-27T07:29:41.513
> 
> 标签：select, dojo, option, spring-roo

我对 Dojo 很陌生，我遇到了以下问题。

我有以下由 spring roo 生成的表单选择：

```
<div id="_f_trc_suivi_domain_Pli_conteneurNum_id">
            <label for="_conteneurNum_id">Conteneur Num : </label>
            <select id="_conteneurNum_id" name="conteneurNum">
            <option value="">Tous</option>
                <option value="1">951</option>
                <option value="2">753</option>
                <option value="3">753159</option></select><br />
            <script type="text/javascript">
                Spring.addDecoration(new Spring.ElementDecoration({
                    elementId : '_conteneurNum_id',
                    widgetType : 'dijit.form.FilteringSelect',
                    widgetAttrs : {
                        hasDownArrow : true
                    }
                }));
            </script>
        </div> 
```

在萤火虫中导致以下结果：

```
 <div wairole="combobox" dojoattachpoint="comboNode"
        id="widget__conteneurNum_id"
        class="dijit dijitReset dijitInlineTable dijitLeft dijitTextBox dijitComboBox dijitTextBoxError dijitComboBoxError dijitError"
        role="combobox" widgetid="_conteneurNum_id"
        aria-labelledby="_conteneurNum_id_label" aria-expanded="false">
        <div dojoattachevent="onmousedown:_onArrowMouseDown"
            wairole="presentation" dojoattachpoint="downArrowNode"
            class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"
            role="presentation">
            <input type="text" wairole="presentation" readonly="" tabindex="-1"
                value="? " class="dijitReset dijitInputField dijitArrowButtonInner"
                role="presentation">
        </div>
        <div class="dijitReset dijitValidationContainer">
            <input type="text" wairole="presentation" readonly="" tabindex="-1"
                value="? "
                class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner"
                role="presentation">
        </div>
        <div class="dijitReset dijitInputField dijitInputContainer">
            <input type="text" waistate="haspopup-true,autocomplete-list"
                wairole="textbox" dojoattachpoint="textbox,focusNode"
                dojoattachevent="onkeypress:_onKeyPress,compositionend"
                autocomplete="off" class="dijitReset dijitInputInner"
                role="textbox" aria-haspopup="true" aria-autocomplete="list"
                id="_conteneurNum_id" tabindex="0" aria-required="true"
                aria-invalid="true" value="" aria-owns="_conteneurNum_id_popup"><input
                type="hidden" name="conteneurNum" value="">
        </div>
    </div> 
```

但不幸的是，它总是在值为“Tous”的空白选项上方显示一个**白色选项。**

看下面的 gif：

![结果表单域](../Images/ed387fc01672e5a38633f1cf5ad911cb.png)

我做错了什么？欢迎任何线索。

**编辑**：我肯定知道问题出在这个：`<option value="">Tous</option>`尤其是`value=""`部分。我可以改写和细化我的问题如下：我怎样才能确保 Dojo/Dijit 正确处理这个问题：`value=""`？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-17T12:46:44.407

在与 MyEclipse 2014、Spring 3.1 和旧的 Dojo/Dijit 版本搏斗了几个小时后，我刚刚找到了一种解决方法，我知道这很旧，但 MyEclipse 将这些旧版本的所有东西都打包了，让人抓狂。

我尝试了 FilteringSelect、使用空值选择、使用值的 html 选项以及替换弄乱项目其余部分的 dojo 库。所以如果它可以帮助任何人，我会在这里发布：

如果您想在选择中使用虚拟提示选项，例如“-- 选择项目--”，则这种情况很常见，并且值为空。Dojo/dijit 版本与 MyEclipse 一起打包到 spring-js-2.3.1.RELEASE 中，用下拉列表中显示的分隔符将选项替换为空值。在 Dojo/Dijit 的最后几个版本中，这种行为似乎得到了纠正，正如您在 Craig Swing 的小提琴中看到的那样。

如果您绑定的属性不是字符串，您可以将单个 espace 指定为 dummy 选项的值而不是 null，因为稍后将在控制器中绑定为 null，因此将显示 dummy 选项。前任：

```
<option selected="selected" value="">Tous</option> 
```

但是如果属性是一个字符串，这样你会在你的控制器的属性中找到一个不需要的空格。

所以最后选择直接修改Select.js

将它放在你的项目中 webapps/resources/dijit/form/Select.js 注释这行：

```
/*
if(!_1.value){
return new dijit.MenuSeparator();
}else{
*/
var _2=dojo.hitch(this,"_setValueAttr",_1);
var _3=new dijit.MenuItem({option:_1,label:_1.label,onClick:_2,disabled:_1.disabled||false});
dijit.setWaiRole(_3.focusNode,"listitem");
return _3;
/*
}
*/ 
```

并且不要忘记在 web.xml 中为 Resource Servlet 覆盖此路径：

```
<servlet-mapping>
    <servlet-name>My Servlet</servlet-name>
    <url-pattern>/resources/dijit/form/Select.js</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T17:58:58.733

只需按预期将 0 值放在那里。我对以下代码没有任何问题：

```
<div id="_f_trc_suivi_domain_Pli_conteneurNum_id">
        <label for="_conteneurNum_id">Conteneur Num : </label>
        <select id="_conteneurNum_id" name="conteneurNum">
            <option value="0">Tous</option>
            <option value="1">951</option>
            <option value="2">753</option>
            <option value="3">753159</option>
          </select><br />
        <script type="text/javascript">
            Spring.addDecoration(new Spring.ElementDecoration({
                elementId : '_conteneurNum_id',
                widgetType : 'dijit.form.FilteringSelect',
                widgetAttrs : {
                    hasDownArrow : true
                }
            }));
        </script>
    </div> 
```

# loops - LOOP if-simulation，需要帮助理解

> ID：11683289
> 
> 赞同：0
> 
> 时间：2012-07-27T07:29:58.330
> 
> 标签：loops, if-statement, logic

我很难理解[LOOP](http://en.wikipedia.org/wiki/LOOP_%28programming_language%29)中的以下程序（您也可以阅读原文的[德语](http://de.wikipedia.org/wiki/LOOP-Programm)文章），它应该模拟`IF x=0 THEN A END`.

```
y:=1;
LOOP x DO y:=0 END;
LOOP y DO A END; 
```

这究竟是如何模拟一个`IF`语句的？为什么我不能这样做：

```
x:=0;
LOOP x DO A END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:37:42.833

我不知道这种语言是什么，但如果假设它的`LOOP cntr DO stmt END;`执行`stmt`时间`cntr`大于零（并且在每次迭代后递减），那么它的工作原理如下：

`1`分配给`y`。如果`x`大于零，则`y`赋值为`0`。如果`x`为零，则`y`保留的值`1`。在下一个循环中，`A`执行一次 if `y`is`1`仅当前一个`LOOP`语句未执行时才会执行一次，即 if`x`等于`0`。这种结构的主要优点`A`是只执行一次，而不是`x`如果它大于零的值`LOOP x DO A END;`会执行的次数。

这是逻辑，一步一步：

*   `y`被设定为`1`
*   `y`设置为零`x`次。这相当于`IF x <> 0 THEN y:=0 END`
*   `A`执行`y`次数（一次如果`x`为零，零次如果`x`非零）

这三个步骤转换为：如果`x`为零，则执行`A`一次，否则执行`A`零次（即不执行）。

# python - 在 Python 中将整数转换为十六进制

> ID：11683294
> 
> 赞同：2
> 
> 时间：2012-07-27T07:30:08.580
> 
> 标签：python, integer, hex

在 Python 中，我想将整数`3892`转换为具有给定格式和结果的十六进制代码`\x00\x00\x0F\x34`。如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T07:31:24.930

您正在转换为数字的二进制表示，而不是十六进制表示（尽管 Python 会将字节显示为十六进制）。使用该[`struct`模块](http://docs.python.org/library/struct.html)进行此类转换。

示范：

```
>>> struct.pack('>I', 3892)
'\x00\x00\x0f4'
>>> struct.pack('>I', 4314)
'\x00\x00\x10\xda' 
```

`\x`请注意，'4' 的 ASCII 码是 0x34，如果它是不可打印的字符，python 只会显示带有转义的字节。因为 0x34 是可打印的，python 将其输出为`4`。

上面格式代码中的“>”表示“大端”，“I”是无符号整数转换（4 个字节）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:07:37.367

```
import re
print re.sub(r'([0-9A-F]{2})',r'\\x\1','%08X' % 3892) 
```

给出：

```
\x00\x00\x0F\x34 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:50:50.137

如果您安装了 numpy：

```
>>> import numpy as np
>>> np.int32(3892).tostring()
'4\x0f\x00\x00' 
```

# c++ - 您如何知道客户端何时连接到服务器？

> ID：11683296
> 
> 赞同：0
> 
> 时间：2012-07-27T07:30:10.163
> 
> 标签：c++, sockets, networking, ubuntu

从下面的代码中，我需要添加什么代码才能知道客户端何时连接到服务器？谢谢！:D

```
int sd, rc;
socklen_t cliLen;
struct sockaddr_in cliAddr, servAddr;
char* argv = (char*) arg;

/* socket creation */
sd=socket(AF_INET, SOCK_DGRAM, 0);
if(sd<0) 
{
    printf("%s: cannot open socket \n",argv);
    //   exit(1);
}

/* bind local server port */
servAddr.sin_family = AF_INET;
servAddr.sin_addr.s_addr = htonl(INADDR_ANY);
servAddr.sin_port = htons(LOCAL_SERVER_PORT);
rc = bind (sd, (struct sockaddr *) &servAddr,sizeof(servAddr));
if(rc<0) 
{
    printf("%s: cannot bind port number %d \n",
    argv, LOCAL_SERVER_PORT);
    //    exit(1);
}

printf("%s: waiting for data on port UDP %u\n",argv,LOCAL_SERVER_PORT);

while(1)
{
    /* init buffer */
    memset(msg,0x0,MAX_MSG);

    /* receive message */
    n = recvfrom(sd, msg, MAX_MSG, 0,(struct sockaddr *) cliAddr,sizeof(cliAddr));
} 
```

* * *

由于这是通过 UDP（无连接）完成的，我们无法知道客户端何时连接。有没有办法让我们知道谁发送了数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:37:44.330

您正在使用`SOCK_DGRAM`which 指示 UDP 套接字。

UDP 不像 TCP，真的没有“连接”，你只是发送数据包并*希望*它们到达目标。

但是，如果您想表明收到某物的事实，您可以添加

```
printf("Recieved data"); 
```

后

```
 n = recvfrom(sd, msg, MAX_MSG, 0,(struct sockaddr *) cliAddr,sizeof(cliAddr)); 
```

# jquery - 禁用 Twitter Bootstrap 模式

> ID：11683299
> 
> 赞同：4
> 
> 时间：2012-07-27T07:30:37.347
> 
> 标签：jquery, twitter-bootstrap

我查看了 Bootstrap 的 JS 指南，这段代码禁用了 Twitter 的 Bootstrap 模式：

```
$('#myModal').on('show', function (e) {
if (!data) return e.preventDefault() // stops modal from being shown
}) 
```

但是，单击模式后，它不会打开对象（在这种情况下，使用 Bootstrap 图像库的图像：[https](https://github.com/blueimp/Bootstrap-Image-Gallery) ://github.com/blueimp/Bootstrap-Image-Gallery ）。它只是完全禁用点击功能。

我也试过这个片段来禁用模态库：

```
$(document.body).off('.modal-gallery.data-api') 
```

但它似乎并没有禁用它。

我将如何编写 jQuery 以便禁用模态库并定期打开图像作为链接？（在执行所有脚本之后，我需要此代码段用于将在页脚中实现的移动网站。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T07:36:02.383

您可以通过删除 data-toggle="modal" 并绑定您的点击事件来禁用自动模式绑定

```
$('#mybutton').click(function (e) {
  if (data) {
    e.preventDefault();
    $('#myModal').modal();
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T15:53:07.570

这只会打开没有引导模式的图像。

```
div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls" data-use-bootstrap-modal="false" 
```

# javascript - 如何将某个值推送到数组？

> ID：11683301
> 
> 赞同：-1
> 
> 时间：2012-07-27T07:30:39.453
> 
> 标签：javascript, arrays

我想推入对象中的所有 0.0 值，所以我可以计算一个对象中有多少 0.0 值。到目前为止，我已经编写了一个代码来推送所有值（包括 0.0），但现在我只想推送**0.0 VALUE**。
例如：
有`['cm_per1']`2 个“0.0”，然后我想`final_results['ESL']['cm_per1']`在调用时推送它们`final_results['ESL']['cm_per1'].length`，它会显示“ **2** ”（因为有 2 个“0.0” `cm_per1`）
这是我到目前为止所做的 >> [http://jsfiddle.net/xKJn8/26/](http://jsfiddle.net/xKJn8/26/)

```
var data = {
  "MyData": [
    {
      "cm_per1": "21.9",
      "cm_per2": "31.8",
      "tipe": "ESL"
    },
    {      
      "cm_per1": "8.6",
      "cm_per2": "7.0",
      "tipe": "ESL"
    },
    {      
      "cm_per1": "3.2",
      "cm_per2": "0.0",
      "tipe": "ESL"
    },
    {
      "cm_per1": "0.0",
      "cm_per2": "0.0",
      "tipe": "ESL"
    },
    {
      "cm_per1": "0.0",
      "cm_per2": "0.0",
      "tipe": "ESL"
    }
  ]
};

var final_results = {},
    type,
    current_row= "";
for (var i=0; i<data.MyData.length; i++) {
    current_row = data.MyData[i];
    type = current_row.tipe;

    //I want to count how many cm_per1 and cm_per2 that have 0.0 value    
    if (!final_results[type]) {
            final_results[type] = {
                  "cm_per1": [],
                  "cm_per2": []  
            };
    }

    final_results[type].cm_per2.push(current_row.cm_per2);
    final_results[type].cm_per1.push(current_row.cm_per1);
}
//but the result is it counts all cm_per1 and cm_per2, and what I need is only counts that have 0.0 value
console.log(final_results['ESL']['cm_per1'].length); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:33:44.437

```
var final_results = {};

data.MyData.forEach( function( o ) {
    // First check if it doesn't exist :-)
    if (!final_results[ o.tipe ]) {
        final_results[ o.tipe ] = {
            "cm_per1": [],
            "cm_per2": []  
        };
    }

    // Only push if the value is '0.0'
    if ( o.cm_per1 === '0.0' ) {
        final_results[ o.tipe ][ 'cm_per1' ].push( o.cm_per1 );
    }
    if ( o.cm_per2 === '0.0' ) {
        final_results[ o.tipe ][ 'cm_per2' ].push( o.cm_per2 );
    }
});
console.log( final_results[ 'ESL' ][ 'cm_per1' ].length ); // 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:45:13.883

您应该只需要更改这两行：

```
final_results[type].cm_per2.push(current_row.cm_per2);
final_results[type].cm_per1.push(current_row.cm_per1); 
```

至：

```
if (current_row.cm_per2 === '0.0') {
    final_results[type].cm_per2.push(current_row.cm_per2);
}
if (current_row.cm_per1 === '0.0') {
    final_results[type].cm_per1.push(current_row.cm_per1);
} 
```

# javascript - 使用 jQuery 删除 CSS 属性

> ID：11683307
> 
> 赞同：3
> 
> 时间：2012-07-27T07:31:09.017
> 
> 标签：javascript, jquery

> **可能重复：**
> [是否可以使用 jQuery 删除内联样式？](https://stackoverflow.com/questions/2465158/is-it-possible-to-remove-inline-styles-with-jquery)

我正在构建一个 javascript 应用程序来处理图像。

在某些时候，我有一个具有内联样式 css 属性（宽度和高度）的元素。我想用 javascript/jQuery 删除这些属性。我知道您可以使用 .css() 方法设置 css-properties。

有没有办法像使用 .removeAttr() 一样删除属性？不应删除潜在的其他 css 属性。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T07:35:26.487

试试这个 ：

```
$('div').css({'width' : '', 'height' : ''}); 
```

或者如果有一个类，你可以通过以下方式删除它：

```
$('div').removeClass('someClass'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T07:41:50.480

从[文档](http://api.jquery.com/css/)中：

> 将样式属性的值设置为空字符串 — 例如**$('#mydiv').css('color', '')** — 如果该属性已被直接应用，则从元素中删除该属性，无论是在 HTML 样式中属性，通过 jQuery 的 .css() 方法，或者通过 style 属性的直接 DOM 操作。但是，它不会删除在样式表或元素中使用 CSS 规则应用的样式。

所以你需要的是这样的：

```
$('element').css({width:'', height:''}); 
```

# iphone - Xcode 4.4 错误 - 等待应用程序启动超时

> ID：11683308
> 
> 赞同：101
> 
> 时间：2012-07-27T07:31:09.593
> 
> 标签：iphone, ios, xcode4.4

昨天我安装了 Xcode 4.4。

我正在开发一个需要在 ios 4.1 以上运行的项目，支持带摄像头的 iOS 设备。直到我安装了 Xcode 4.4 一切都很顺利，我可以在 iphone 3gs 和 4s 上测试应用程序。安装 Xcode 4.4 后，我无法在 iphone 3gs 上测试应用程序，每次我尝试这样做时，xcode 都会向我显示该消息： *- 无法启动“appname”。应用程序启动超时 -*

有人知道如何摆脱这个错误吗？

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2012-07-30T09:33:13.830

我在尝试使用 Ad-Hoc 配置调试应用程序时遇到了类似的问题...检查您正在使用的配置，似乎 ad-hoc 配置不能用于调试。

**编辑**事实上，似乎*只有开发*配置文件可以进行调试

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T19:22:23.263

![方案配置](../Images/45888f0aa017369b29641e34fb399d0f.png) 对我来说 ：
在配置选项卡 上`Edit Scheme`
对于 我选择 `Run`
`Info`
`Build Configuration`
`Release`

但是，它需要在`Debug`设备上本地运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T10:49:00.573

我有一个类似的问题。就我而言，原因是我将 Launch ( xcode -> product -> Edit Scheme) 的设置更改为 Wait 并忘记了它。

当我将设置更改回自动时，该应用程序将照常启动。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T16:44:56.153

我也有同样的问题。我从测试设备中删除了旧的配置和分发配置文件并安装了修改后的配置文件。这些配置文件的日期很重要。错误超时得到解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T21:11:42.230

从设备/模拟器中删除应用程序，然后重试，应该可以工作。看起来是xcode中的一个错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T12:13:16.217

这是供应配置文件的问题。我正在使用分发配置文件。从开发人员门户更改回开发配置文件并使用它，解决了这个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-01T18:56:19.110

这在 XCode 4.6 iOS 6.1.2 上对我有用

*   打开组织者
*   从左侧选择您的设备
*   添加到门户
*   输入您的开发人员凭据
*   关闭 Organizer 并在目标下的项目文件中选择“Build Settings”->“Code Signing Identity”选择配置文件“iOS Team Provisioning Profile”
*   清洁并运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-09T12:18:54.453

我有同样的问题现在我解决了..

请按照以下步骤解决问题。

**步骤：1**像这样进入 xcode 文件夹

![在此处输入图像描述](../Images/8e1261c2cf4b86e088f0f7aea300f1a5.png)

**Step2:**到达文件夹 xcode->DerivedData

**第三步：**删除 DerivedData 中的所有文件夹

它会为你工作谢谢

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-27T07:32:42.867

尝试从模拟器中删除您的应用程序和/或重置模拟器设置。

模拟器设置可能与旧设置不同。

一般来说，重置一切都很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-28T18:05:38.283

老问题，但为像我这样的罕见情况添加了我的解决方案。从设备/干净构建/配置更改中删除应用程序对我不起作用。我重新启动了 Xcode，它开始正常工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-23T14:17:24.487

在我的情况下，原因原来是启动守护程序无法加载应用程序图标并崩溃。即使它看起来不像崩溃 - 设备和操作系统变得非常缓慢或完全没有响应。我通过分析崩溃日志发现了这一点。（我的图标太大 - 大约 2,500x2,500 - 我只是忘记在将它们添加到资源之前适当地减小它们的大小）。希望这可以帮助某人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-08-14T08:18:59.177

我尝试了上述所有解决方案，但均未成功。但是当我用 iOS 7 彻底清理我的 iPhone 4S 时，这个问题就再也没有发生过。

# c++ - 在 QTextEdit 内移动光标

> ID：11683311
> 
> 赞同：12
> 
> 时间：2012-07-27T07:31:15.910
> 
> 标签：c++, qt, qtextedit, qtextcursor

我有一个表格，上面有一个`QTextEdit`，叫做`translationInput`. 我正在尝试为用户提供编辑功能。

这`QTextEdit`将包含 HTML 格式的文本。我有一组按钮，例如“**粗体**”、“*斜体*”等，它们应该将相应的标签添加到文档中。如果在没有选择文本时按下按钮，我只想插入一对标签，例如`<b></b>`. 如果选择了某些文本，我希望标签出现在它的左右两侧。

这工作正常。但是，我还希望在此之后将光标放在*结束标记之前*，这样用户就可以继续在新添加的标记内输入内容，而无需手动重新定位光标。默认情况下，光标出现*在*新添加的文本之后（所以在我的例子中，就在结束标记之后）。

这是*斜体*按钮的代码：

```
//getting the selected text(if any), and adding tags.
QString newText = ui.translationInput->textCursor().selectedText().prepend("<i>").append("</i>");
//Inserting the new-formed text into the edit
ui.translationInput->insertPlainText( newText );
//Returning focus to the edit
ui.translationInput->setFocus();
//!!! Here I want to move the cursor 4 characters left to place it before the </i> tag.
ui.translationInput->textCursor().movePosition(QTextCursor::Left, QTextCursor::MoveAnchor, 4); 
```

但是，最后一行什么也没做，光标也没有移动，即使`movePosition()`返回了`true`，这意味着所有的操作都成功完成了。

我也尝试过使用`QTextCursor::PreviousCharacter`而不是这样做`QTextCursor::Left`，并尝试在将焦点返回到编辑之前和之后移动它，但没有任何改变。

所以问题是，如何将光标移动到我的`QTextEdit`?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T07:47:28.220

通过深入研究文档解决了这个问题。

该`textCursor()`函数*从*`QTextEdit`. _ 因此，要修改实际的，`setTextCursor()`必须使用函数：

```
QTextCursor tmpCursor = ui.translationInput->textCursor();
tmpCursor.movePosition(QTextCursor::Left, QTextCursor::MoveAnchor, 4);
ui.translationInput->setTextCursor(tmpCursor); 
```

# java - ArrayList 循环

> ID：11683326
> 
> 赞同：-1
> 
> 时间：2012-07-27T07:32:11.263
> 
> 标签：java, loops, arraylist

在预订菜单中，我主要有 3 个选项：a、b 和 c。选项 'a' - 选择房间类型。5种不同的房型可供选择。选项“b”- 为每个房间选择附加组件。每个附加组件都可以额外付费选择。选项 'c' - 从进行预订页面返回到主页

我的程序需要显示 5 种不同类型的房间。此时客户只能选择选项“a”、“b”或“c”。

如果客户在选择房间时输入了无效的号码（包括1到5），系统会给出错误信息并提示用户重新输入。一旦用户输入了他/她想要的房间类型，他们可以继续输入每个房间的数量房间类型。选择房型后，系统会提示您选择每种房型的附加组件。

这是我下面的代码。当用户选择选项“b”时，我无法从选项“a”获取存储在整数数组列表中的附加组件数量。

我初始化了 2 个数组列表，但我不确定它们是否正确。第一个数组列表是存储房间类型和日期的字符串。第二个数组列表是整数，它存储房价、房间需求数量、附加组件数量、晚数、用户选择的附加选项和附加组件的数量。

我对编码很陌生，所以需要帮助。

```
import java.util.*;
import java.io.*;

public class RoomSelection {

    public RoomSelection() throws InputMismatchException {

        String choiceStr;//initialize choiceStr which is use for reading lines from scanner input
        char choiceChar;//initialize choiceStr which is use for reading character from scanner input
        int choice;//initialize choiceStr which is use for reading integer from scanner input
        String datee;
        String[] roomType = {"Single Room", "Double Room", "Deluxe Room", "Junior Room", "Suite"}; //Initialize a array for room type
        Integer[] priceRoom = {160, 200, 280, 380, 500}; //Initialize a array for room prices
        Integer[] priceAdd = {25, 60, 70, 100}; //Initialize a array for add-on prices

        ArrayList<String> roomAndDate = new ArrayList<String>();
        ArrayList<Integer> all = new ArrayList<Integer>();
        Scanner input = new Scanner(System.in); //Initialize a scanner input

        System.out.println("Room Selection");
        System.out.println("==============\n");
        System.out.println("[a] Room Type");
        System.out.println("[b] Add-Ons");
        System.out.println("[c] Main Menu");
        System.out.println("Type 'a' to select Room Type and state the desire quantity for each type.");
        System.out.println("Type 'b' to select the Add-Ons.");
        System.out.println("Type 'c' to exit from  the Booking Menu.");
        System.out.println("Please enter your option (a, b or c): ");

        choiceStr = input.nextLine();
        choiceChar = choiceStr.charAt(0);
        while (true) {

            switch (choiceChar) {
                case 'a':
                    System.out.println("Room Type");
                    System.out.println("=====================================================");
                    System.out.println("(1) Single Room (1 person) - Price: S$160");
                    System.out.println("(2) Double Room (2 persons) - Price: S$200");
                    System.out.println("(3) Deluxe Room (2 persons) - Price: S$280");
                    System.out.println("(4) Junior Suite (2 persons) - Price: S$380");
                    System.out.println("(5) Suite (2 persons) - Price: S$500\n");
                    System.out.println("Enter Room types (Enter '1' to '5')");
                    choice = input.nextInt();
                    while (choice > 5) {
                        if (choice > 5) {
                            System.out.println("Please enter number between '1' to '5'!");
                            choice = input.nextInt();
                        }
                    }

                    String roomTypess = roomType[choice - 1];
                    roomAndDate.add(roomTypess);
                    int storePricee = priceRoom[choice - 1];
                    all.add(storePricee);

                    System.out.println("Number of rooms required (maximum 10): ");
                    choice = input.nextInt();
                    while (choice > 10) {
                        if (choice > 10) {
                            System.out.println("Please enter again!");
                            choice = input.nextInt();
                        }
                    }
                    all.add(choice);

                    for (int i = 0; i < choice; i++) {
                        System.out.println("Enter the date of checked-in (dd/mm/yy) for " + roomAndDate.get(0) + " " + (i + 1));
                        choiceStr = input.nextLine();
                        choiceStr = input.nextLine();
                        roomAndDate.add(choiceStr);
                        System.out.println(roomAndDate);
                        System.out.println("Enter number of Add-on for " + roomAndDate.get(0) + " " + (i + 1) + ": ");
                        choice = input.nextInt();
                        while (choice > 4) {
                            if (choice > 4) {
                                System.out.println("Please enter again! Choose only option 1 to 4");
                                choice = input.nextInt();
                            }
                        }
                        all.add(choice);
                        System.out.println("Number of night(s) required (maximum 30) for " + roomAndDate.get(0) + " " + (i + 1) + ": ");
                        choice = input.nextInt();
                        while (choice > 30) {
                            if (choice > 30) {
                                System.out.println("Please enter again! Maximum is 30 days!");
                                choice = input.nextInt();
                            }
                        }
                        all.add(choice);

                    }

                    new RoomSelection();
                    break;
                case 'b':
                    System.out.println("Add-Ons");
                    System.out.println("=====================================================");
                    System.out.println("(1) Breakfast voucher (1 person) per day - Price: S$25");
                    System.out.println("(2) Spa voucher (1 person) - Price: S$60");
                    System.out.println("(3) Half Day Tour voucher (1 person) - Price: S$70");
                    System.out.println("(4) Full Day Tour voucher (1 person) - Price: $100\n");

                    for (int i = 0; i < (Integer) all.get(3); i++) {

                        System.out.println("Enter Add-On option");
                        choice = input.nextInt();
                        while (choice > 4) {
                            if (choice > 4) {
                                System.out.println("Please enter again! Choose only option 1 to 4");
                                choice = input.nextInt();
                            }
                        }
                        all.add(choice);
                        System.out.println("Enter quantity required for Add-On option " + (i + 1) + ": ");
                        choice = input.nextInt();
                        all.add(choice);
                    }

                    break;
                case 'c':
                    new MainPage1();
                    break;
                default:
                    continue;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:53:39.413

我看了你的代码，有些东西你不需要，你需要改进。

1.  而不是读取整数`input.nextInt();`，您应该读取输入字符串并尝试执行`Integer.parseInt(yourString)`并使用结​​果（如果它抛出 a`NumberFormatException`你会知道字符串不是有效的整数）。
2.  对于`while`循环，您应该排除值的情况`0`
3.  当条件包含在其中时，`if`从语句内部消除语句。`while``while``if`
4.  创建具有所需功能的对象数组列表，而不是两个数组列表：
    *   create 和 object 具有作为字段的房间类型，成本，...。
    *   在函数外部定义和分配这个对象数组列表，`RoomSelection()`这样您就可以一直访问它。
    *   如果您`RoomSelection()`在列表中定义它，当您调用时，您将`new RoomSelection();`创建列表的新实例而不是使用现有的实例。

希望我能有所帮助。最后一点非常重要。

# mysql - MySQL 查询日志

> ID：11683328
> 
> 赞同：0
> 
> 时间：2012-07-27T07:32:23.313
> 
> 标签：mysql

有没有办法可以找出 MySQL 服务器执行了多少选择、更新、插入和其余查询？可以在最后 1 天或最后一周吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:36:21.400

是的，有办法！您可以将服务器设置为将有关客户端连接/断开连接以及执行到日志文件的每条语句的日志写入日志。看看[这里](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:38:32.087

启动General Query Log，它允许将日志信息存储到表中。

然后编写一个 SELECT 查询从`mysql`. `general_log`表，添加 WHERE 条件以按日期过滤结果。然后分析（解析）来自该`argument`字段的数据，它包含已执行的查询。

# android - Android 新意图创建快捷方式

> ID：11683332
> 
> 赞同：0
> 
> 时间：2012-07-27T07:32:35.617
> 
> 标签：android, forms, android-intent

当我创建一个新活动并使用

```
Intent i = new Intent (this, Act.class);
startActivity(i); 
```

Android 创建了一个额外的快捷方式。我不想要捷径。我希望应用程序只有一个快捷方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:39:08.480

这是因为您在清单文件中使用 category=Launcher 注册您的活动..删除::

只有一项活动应注册到 Launcher 类别。

```
<activity android:name=".Test"
          android:label="@string/app_name">
     <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
     </intent-filter>
</activity> 
```

其他活动应该像这样声明，没有额外的权限。

```
<activity android:name=".Dashboard"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:38:44.470

在您的清单文件中，我认为您已经注册了其他活动：使用意图过滤器

```
 <action android:name="android.intent.action.MAIN" />

 <category android:name="android.intent.category.LAUNCHER" /> 
```

只有主要活动应该有上述过滤器

例如

```
//Main Activity
<activity
        android:name=".SplashCalendar"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
// Your Other acitivties
    <activity
        android:name=".CheeckerWebView"

        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:36:30.433

这是在您的清单中完成的。只有活动与

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

将显示在启动器中。只需将这些用于您不想显示的活动即可。

# c#-4.0 - C# 4.0 中极其昂贵的 Enum.IsDefined() 有什么替代方案？

> ID：11683333
> 
> 赞同：3
> 
> 时间：2012-07-27T07:32:38.667
> 
> 标签：c#-4.0, enums

我需要对我的数据多次执行此操作：

```
public void AddBehavior(BehaviorTypes type)
{
    if (Enum.IsDefined(typeof(BehaviorTypes), type))
    {
    switch (type)
    {
        case BehaviorTypes.render:
            return new renderable();
        break;   
    }
} 
```

那是两个显式的函数调用和一个对象装箱/拆箱操作！这个操作对于检查枚举来说太昂贵了。有人知道更便宜的替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:04:12.367

一个非常标准的技巧是将成员添加到指定第一个和最后一个值的枚举声明中：

```
enum BehaviorTypes {
    First = One,    
    One = 1,
    Two,
    Three,
    Last = Three
} 
```

现在它是一个超快的测试，大约需要一纳秒：

```
public void AddBehavior(BehaviorTypes type)
{
    if (type >= BehaviorTypes.First && type <= BehaviorTypes.Last) {
       // etc..
    }
} 
```

请注意，您的 switch 语句已经消除了此检查的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T10:08:40.970

您可以使用 Enum.GetValues 在优化的集合中、在静态成员中一劳永逸地提取枚举类型的所有现有值。接下来您只需搜索该集合。

我猜如果只考虑一个枚举，最快的将是一组布尔值，告诉你你的积分是否存在于枚举中。除了这个数组的构造（成本一次），你将有一个 enum 到 int 的转换，以及一个数组中的读取访问（如果我没记错的话，这是你能得到的最快的？）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-09T23:58:18.343

关于 .NET 的一个鲜为人知的事实是，您可以在枚举上声明扩展方法。避免拳击将是这样做的一个很好的理由。为了便于维护，您可以在与枚举相同的文件中定义静态方法，以便您知道同时更改它们。

```
public enum BehaviorTypes
{
    Render,
    Foo,
    Bar
}

public static class BehaviorTypesExtensions
{
    public static bool IsDefined(this BehaviorTypes behaviorTypes)
    {
        return behaviorTypes >= BehaviorTypes.Render && behaviorTypes <= BehaviorTypes.Bar;
    }
} 
```

## 用法

```
class Program
{
    static void Main(string[] args)
    {
        foreach (BehaviorTypes value in Enum.GetValues(typeof(BehaviorTypes)))
        {
            Console.WriteLine($"{value} is defined: {value.IsDefined()}");
        }

        Console.WriteLine($"43 is defined: {((BehaviorTypes)43).IsDefined()}");

        // Render is defined: True
        // Foo is defined: True
        // Bar is defined: True
        // 43 is defined: False
    }
} 
```

# c# - 在代码中获得提升的权限

> ID：11683334
> 
> 赞同：1
> 
> 时间：2012-07-27T07:32:40.717
> 
> 标签：c#, .net, security, windows-server-2008, windows-server-2008-r2

控制台应用程序在域中的服务器上运行，其任务是删除不再活动的用户的一些家庭区域。

该帐户在帐户的上下文中运行，该帐户也是每个存储服务器上本地管理员组的成员，该帐户对相关文件夹具有“完全控制”访问权限。

这在一堆较旧的服务器上效果很好，但在 Windows 2008 上会遇到问题。在这些服务器上，为“本地管理员”组启用了“管理员批准模式”。

例如，如果我右键单击一个文件夹并尝试访问属性/安全性（使用相同的服务帐户），我会收到以下提示：

![在此处输入图像描述](../Images/92648efb64e7df358e6695bd234adbc7.png)

我可以按继续，然后继续使用完全控制权限。如果我在删除文件时做同样的事情，事情就会像预期的那样工作。

在我看来，有两种可能的解决方案：

1.  “管理员审批模式”被删除。根据这里的安全人员，这不是一个可行的选择。
2.  控制台应用程序可以以某种方式执行相当于按“继续”并继续的代码。

是选项号。2 可能吗？如果是这样，该代码会是什么样子 - 或者我需要进一步研究哪些关键概念才能找到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:54:53.180

我想您可以将应用程序设置为以管理员身份运行。右键单击应用程序*exe*文件，选择*Properties*，*Compatibility*选项卡并选中*Run this program as administrator*复选框（选项名称可以不同，我的 Windows 是另一种语言）。

如果您希望应用程序自行请求提升的权限，您可以按照本文所述在**清单文件中进行修改：http:** [//www.codeproject.com/Articles/105506/Getting-Elevated-Privileges-on-Demand-使用-C](http://www.codeproject.com/Articles/105506/Getting-Elevated-Privileges-on-Demand-using-C)。它应该使应用程序请求管理员权限（因此应该出现权限提示），但我想您仍然必须单击“*继续*”按钮（这就是 UAC 的工作方式）。

还要考虑*亚历克斯*在他的回答中写的内容，也许您应该与 IT 人员交谈以适当地设置权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:39:43.397

据我所知，应用程序不能只是“绕过”Windows 的安全性。

我会让 IT 在服务器上设置一个本地“超级管理员”帐户，以便仅允许该特定用户绕过所有安全措施，以便让计划的应用程序正常运行。这就是我们在我们的服务器上所做的，这些帐户被锁定，但它们只有足够的权限让预定的任务毫无问题地运行。我对操作方法一无所知（我们的 IT 部门负责处理），但我认为 IT 人员会知道该怎么做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:46:57.733

感谢您的建议。

这个 BY DESIGN 没有解决方案，所以我把这个作为答案。

# sql-server-2005 - 将excel的动态文件路径传递给“OPENROWSET”

> ID：11683338
> 
> 赞同：0
> 
> 时间：2012-07-27T07:32:49.740
> 
> 标签：sql-server-2005, openrowset

我想将 excel 的动态 URL 传递给“OPENROWSET”。

注意 - 我将返回的 excel 文件结果传递给光标。我想将文件路径传递给“@excelpath”，我尝试了很多方法，但它给出了语法错误。

```
 ALTER procedure [dbo].[import_excel]
(
    @excelpath as nvarchar(max)
)
as      
begin
  set nocount on 
  DECLARE insert_cursor CURSOR FOR 
  select * FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0', 
    'Excel 12.0;Database=C:\memberdata.xlsx', [Sheet1$])
  OPEN insert_cursor;
  FETCH NEXT FROM insert_cursor
      INTO @id_number, @memberName

  WHILE @@FETCH_STATUS = 0
  BEGIN
  -- body of cursor
      FETCH NEXT FROM insert_cursor
      INTO @id_number, @memberName
  END
  CLOSE insert_cursor;
  DEALLOCATE insert_cursor;
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:00:03.563

您必须使用动态 SQL 构建查询，如[本问题](https://stackoverflow.com/questions/6935598/sql-openrowset-cant-build-for-the-request-string)所示。将查询中的数据插入到永久表中，然后在永久表上运行游标可能是最简单的。通过这种方式，您可以最大限度地减少需要动态处理的 SQL 数量。

# wix - 为什么 setup.exe 没有显示 ARPCOMMENTS & WIXUIBanner.bmp 但 setup.msi 显示这些东西？

> ID：11683341
> 
> 赞同：6
> 
> 时间：2012-07-27T07:33:02.203
> 
> 标签：wix, wix3.6

我有 Setup.Bootstrapper 项目来输出 Setup.exe 和 Setup 项目来提供 setup.msi 输出。但问题是为什么我的 setup.exe 没有显示 ARPCOMMENTS 并且在运行安装程序时也没有显示 Banner.bmp 文件。另一方面，Setup.msi 工作正常。

我用于 Setup.Bootstrapper(Bundle.wxs) 的 Bundle 代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
 <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">
   <Bundle Name="ABC" Version="3.0.0.0" Manufacturer="XYZ, Inc." UpgradeCode="1EB9EC76-9E5F-4471-B522-314A62518A80">
      <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense">
         <bal:WixStandardBootstrapperApplication LicenseFile="License.rtf" SuppressOptionsUI="yes" />
      </BootstrapperApplicationRef>
      <Chain>
        <PackageGroupRef Id="NetFx40ClientWeb" />
        <MsiPackage Compressed="yes" SourceFile="Setup.msi" Vital="yes" />
       </Chain>
      </Bundle>
  </Wix> 
```

使用 Banner.bmp & ARP 状态的设置项目是：

```
<UIRef Id="WixUI_InstallDir" />
<Property Id="WIXUI_INSTALLDIR" Value="INSTALLDIR" />
<WixVariable Id="WixUILicenseRtf" Value="License.rtf" />
<WixVariable Id="WixUIBannerBmp" Value="Bitmaps/Banner.bmp" />
<Property Id="ARPPRODUCTICON" Value="ABC.exe" />
<Property Id="ARPCONTACT" Value="XYZ, Inc." />
<Property Id="ARPURLINFOABOUT" Value="http://www.xyz.com/" />
<Property Id="ARPCOMMENTS" Value="abc" /> 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:00:33.010

捆绑包不使用这些。您可以通过 Bundle 元素中的属性设置捆绑属性。您可以使用 bal:WixStandardBootstrapperApplication 元素的属性设置 WixStandardBootstrapperApplication 属性。并非所有产品都以捆绑包和包的形式提供。

# python - Django：如何测试“HttpResponsePermanentRedirect”

> ID：11683347
> 
> 赞同：7
> 
> 时间：2012-07-27T07:33:24.460
> 
> 标签：python, django, http

我正在为我的 django 应用程序编写一些测试。在我看来，它使用“HttpResponseRedirect”重定向到其他一些 url。那么我该如何测试呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T09:07:05.603

Django`TestCase`类有一个[`assertRedirects`](https://docs.djangoproject.com/en/1.11/topics/testing/tools/#django.test.SimpleTestCase.assertRedirects)可以使用的方法。

```
from django.test import TestCase

class MyTestCase(TestCase):

    def test_my_redirect(self): 
        """Tests that /my-url/ permanently redirects to /next-url/"""
        response = self.client.get('/my-url/')
        self.assertRedirects(response, '/next-url/', status_code=301) 
```

状态码 301 检查它是否是永久重定向。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-27T07:38:04.173

```
from django.http import HttpResponsePermanentRedirect
from django.test.client import Client

class MyTestClass(unittest.TestCase):

    def test_my_method(self):

        client = Client()
        response = client.post('/some_url/')

        self.assertEqual(response.status_code, 301)
        self.assertTrue(isinstance(response, HttpResponsePermanentRedirect))
        self.assertEqual(response.META['HTTP_LOCATION'], '/url_we_expect_to_be_redirected_to/') 
```

响应的其他属性可能值得测试。如果您不确定对象上有什么，那么您可以随时执行

```
print dir(response) 
```

**编辑当前版本的 DJANGO**

现在更简单了，只需执行以下操作：

```
 self.assertEqual(response.get('location'), '/url/we/expect') 
```

我还建议使用 reverse 来查找您期望从名称中获得的 url，如果它是您应用程序中的 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-31T03:19:44.707

在 django 1.6 中，您可以使用（**不推荐**）：

```
from django.test import TestCase
from django.http import HttpResponsePermanentRedirect

class YourTest(TestCase):
    def test_my_redirect(self):
        response = self.client.get('/url-you-want-to-test/')
        self.assertEqual(response.status_code, 301)# premant 301, temporary 302
        self.assertTrue(isinstance(response, HttpResponsePermanentRedirect))
        self.assertEqual(response.get('location'), 'http://testserver/redirect-url/') 
```

instead, following is more powerful and concise and no `http://testserver/` need

```
from django.test import TestCase

class YourTest(TestCase):
    def test1(self):
        response = self.client.get('/url-you-want-to-test/')
        self.assertRedirects(
            response, '/redirect-url/',status_code=301,target_status_code=200) 
```

# javascript - 在哪里获得 jquery 图像精灵？

> ID：11683353
> 
> 赞同：1
> 
> 时间：2012-07-27T07:33:50.450
> 
> 标签：javascript, jquery, jquery-tools

好的，我知道这听起来像是一个愚蠢的问题，但我就是找不到答案（也许是因为它太愚蠢了？）

无论如何，我只是使用 jquery 工具做了一个覆盖，我只是不知道在哪里可以获得关闭按钮图像？它只是不在那里？功能在那里（即，如果我单击右上角的覆盖关闭）但不是按钮。

我用谷歌搜索，最后发现 jquery Image sprites 没有正确下载。但是我从哪里下载 jquery sprites：/ ??? 我检查了 jquery 工具下载页面[http://www.jquerytools.org/download/](http://www.jquerytools.org/download/)但你只从那里下载 .js 文件，没有图像什么都没有？

我错过了什么吗？导致有点难以相信他们没有为他们的叠加层提供近距离图像：/..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:47:19.837

转至：[http:](http://www.jquerytools.org/documentation/tabs/index.html) //www.jquerytools.org/documentation/tabs/index.html 向下滚动选项卡 图形 您有一个 zip 图像。点击那里。这是一个带有图像的 zip :)

# .net - 如何在 vb.net 中拆分字符串

> ID：11683357
> 
> 赞同：-4
> 
> 时间：2012-07-27T07:34:12.167
> 
> 标签：.net, vb.net

> **可能重复：**
> [如何在 vb.net 中拆分](https://stackoverflow.com/questions/1560401/how-to-split-in-vb-net)

我有一个字符串“1- ABCDEFGH - HIJKLMN - 1”

我只想从字符串中取出“1”（字符串中“-”之前的第一个数字）

![在此处输入图像描述](../Images/f088e2f0f9297ed270ae08ccefd46e50.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:38:19.110

使用[String.Split()](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

```
Dim s = "1- ABCDEFGH - HIJKLMN - 1"
Dim one = s.Split("-"c)(0) ' one = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:38:18.777

好吧，您可以将 .Net 中的字符串视为数组，因此您可以像这样获取第一个字符：

```
Sub Main()
    Dim myString As String = "1- ABCDEFGH - HIJKLMN -1"
    Dim firstCharacter As String = myString(0)
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:09:38.500

String stringPart = myString.Substring(0,myString.IndexOf('-')) 将从字符串开头（索引 0）到第一个字符 '-'（不包括）的所有字符放入 stringPart

# ios - 从多个 url 加载大量数据，然后在视图中显示

> ID：11683358
> 
> 赞同：0
> 
> 时间：2012-07-27T07:34:15.207
> 
> 标签：ios, iphone, multithreading, web-services, load

我正在开发一个 iPhone 应用程序。在应用程序中，我需要从 Web 加载大量数据 (JSON)，然后相应地创建视图。请建议我如何进行。

基本上我正在做的是

**1\. 从数组加载一个 json 网络服务。**

**2\. 上面收到的数组包含指向其他 Web 服务的 url。可以说，8**

**3\. 所以现在我需要调用 8 个 Web 服务，在获取之后，我必须解析数据，然后将其显示给用户。**

这是我第一次处理网络服务。所以不知道该怎么做。

主要问题是时间消耗。如何在其中实现多线程？

请提出任何可以帮助我的想法或链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:49:09.493

我会做什么：

1.  创建一个新的`NSThread`和相应`@autoreleasepool`的加载第一个 json
2.  加载“主 JSON”数据后：将所有 url 放入`NSMutableArray`
3.  加载上述数组的第一个 URL（同样在同一个线程中）的 JSON 日期
4.  加载 JSON 数据后，存储 JSON 数据
5.  从您在 [2] 中创建的数组中删除第一个元素。
6.  如果您的数组不为空 > 转到第 3 步。

像这样的东西？（没有测试过）：

```
#import "JSONKit.h"
- (void)viewDidLoad {
    [super viewDidLoad];    
    [NSThread detachNewThreadSelector:@selector(_loadJSON) toTarget:self withObject:nil];
};

-(void)_startNewThread {
    @autoreleasepool {
        NSError *error = nil;
        /*
         main json file:
         [
             { "url": "http://domain.com/file2.json" },
             { "url": "http://domain2.com/file.json" },
             { "url": "http://domain3.com/file.json" }
        ]
    */   
    NSMutableArray *mainUrls = [[NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://domain.com/file.json"] encoding:NSUTF8StringEncoding error:&error] mutableObjectFromJSONString];
    NSMutableArray *returnArray = [[NSMutableArray alloc] init];
    if (error == nil) {
        while ([mainUrls count]) {
            NSURL *url = [NSURL URLWithString:[[mainUrls objectAtIndex:0] objectForKey:@"url"]];
            NSDictionary *dictionary = [[NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error] objectFromJSONString];
            if (error == nil) {
                [returnArray addObject:dictionary];
            }
            [mainUrls removeObjectAtIndex:0];
        }
    }
    [returnArray autorelease];
    [self performSelectorOnMainThread:@selector(_finished:) withObject:[NSArray arrayWithArray:returnArray] waitUntilDone:YES];
    }
}

-(void)_finished:(NSArray *)__array {
    NSLog(@"Result: %@", __array);
} 
```

# java - 基本数学运算符的优先级

> ID：11683359
> 
> 赞同：-11
> 
> 时间：2012-07-27T07:34:29.343
> 
> 标签：java, operator-precedence

```
int a = 100,b = 3,c = 8,d = 6;
System.out.println(a - d * b + c); 
```

答案是 90。

这个计算是怎么做的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T07:42:58.450

**BODMAS**规则用于评估表达式。

1.  d*b = 18
2.  “+”和“-”具有相同的优先级。但是“-”在左边首先出现。所以 100 - 18 = 82
3.  然后是 82 + 8 = 90。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T07:35:32.400

`*`具有更高的优先级，因此将首先评估乘法

所以

`6*3`将首先得到评估

100- 18 + 8 = 90

**看**

*   [运算符优先级](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T07:36:34.677

```
a - (d * b) + c 
100 - 18 + 8 = 90 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T07:37:29.933

这是第一堂课的数学。

`*`前`+`

所以它`6 * 3`在第一步，然后是`100 - 18 + 8 = 90`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T07:41:34.233

*   乘除 - 同等对待，但优先于加减

*   加减法 - 同等对待，但优先级低于乘法和除法

按照上面的规则，我们先乘然后加/减。所以结果是 90。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T07:41:13.987

**1.** `*`优先级更高。所以，

```
a - 6 * 3 + c => a - 18 + c 
```

**2.** `+`具有更高的优先级`-`。所以，

```
a - 18 + 8 =>  a - 10 
```

**3.**最后。

```
100 - 10  => 90 
```

所以输出应该是90。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T07:35:48.297

```
a - (d * b) + c
= 100 - (6 * 3) + 8
= 100 - 18 + 8
= 100 - 10
= 90 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-27T07:36:16.017

```
100-6*3+8 = 100-18+8 = 100-10 = 90 
```

或者你是什么意思？

# twitter-bootstrap - Twitter Bootstrap：html 地图区域的工具提示

> ID：11683364
> 
> 赞同：10
> 
> 时间：2012-07-27T07:34:50.433
> 
> 标签：twitter-bootstrap, tooltip, area

来自 twiiter bootstrap 的工具提示很棒，但它们不适用于 <area> 标签:(我该如何解决？

我注意到 js 有效，创建了工具提示元素，但它的位置是错误的..

我做了一个小例子。 [http://jsfiddle.net/dhkFN/1/](http://jsfiddle.net/dhkFN/1/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T05:16:34.340

我喜欢 Twitter bootstrap，但一些 js 插件在当前形式下有点简单。

结帐 qTip 2 - [http://qtip2.com/](http://qtip2.com/)

包括图像地图在内的一切 - [http://qtip2.com/demos/#imagemaps](http://qtip2.com/demos/#imagemaps)

您可以将输出类调整为引导类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T11:58:26.173

我最近不得不用 Bootstrap 做类似的事情，并试图让工具提示与图像地图区域一起工作，但放弃了。

我选择了 ImageMaster，它是一个用于制作图像映射的 jQuery 插件，并具有工具提示等选项

[http://www.outsharked.com/imagemapster/](http://www.outsharked.com/imagemapster/)

[https://github.com/jamietre/ImageMapster](https://github.com/jamietre/ImageMapster)

ImageMapster 在 Bootstrap 的 CSS 方面确实存在一些问题，但作者为我解决了这个问题，所以它应该很好用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T07:29:28.013

经过一天的搜索和思考如何解决项目的工具提示（使用区域的地图图像），我发现这个[http://www.xing.net.au/blogs/displaying-page-in-jquery-tooltip](http://www.xing.net.au/blogs/displaying-page-in-jquery-tooltip)这更多在自定义要显示的内容方面比 JSFiddle 灵活。

JSFiddle 中的示例依赖于区域的 ALT 属性，而 Jtip 可以通过使用另一个页面进行自定义。

一切顺利！

# c# - NHibernate QueryOver 字典的值（地图）

> ID：11683365
> 
> 赞同：1
> 
> 时间：2012-07-27T07:34:58.010
> 
> 标签：c#, nhibernate, queryover, idictionary

对于我正在处理的项目，我需要查询 Nhibernate 中映射字典的值。就像是

```
SELECT * FROM EntityWithDictionary WHERE EntityWithDictionary 
    in (select EntityFromDictionaryId FROM Dictionary where value = 'testvalue') 
```

我已经尝试了几件事，但我无法弄清楚我该怎么做。这就是我所拥有的。

## 实体

```
public class EntityWithDictionary
{
    public virtual Guid Id { get; set; }
    public virtual string Description { get; set; }
    private IDictionary<string, string> _dictionary = new Dictionary<string, string>();
    public virtual IDictionary<string, string> Dictionary
    {
        get { return _dictionary; }
    }
} 
```

它在 EntityWithDictionary.Dictionary 中，我想调查这些值。

## 映射：

```
public EntityWithDictionaryMap()
{
    Id(s => s.Id);
    Map(s => s.Description);
    HasMany(m => m.Dictionary)
        .Table("`Dictionary`")
        .KeyColumn("EntityWithDictionaryId")
        .AsMap<string>("`Key`")
        .Element("`Value`")
        .LazyLoad()
        .Access.CamelCaseField(Prefix.Underscore)
        .Cascade.All();
} 
```

这是我迄今为止尝试过的：

## 查询查询：

```
EntityWithDictionary entityWithDictionary = null;
var result = session.QueryOver<EntityWithDictionary>(() =>entityWithDictionary)
        .JoinQueryOver(dictionary =>dictionary.Dictionary)
        .UnderlyingCriteria.Add(Restrictions.Eq("elements", "test")).List(); 
```

这导致以下 sql 语句 =>

```
SELECT this_.Id as Id0_0_, this_.Description as Descript2_0_0_ FROM
[EntityWithDictionary] this_ inner join [Dictionary] dictionary3_ on
this_.Id=dictionary3_.EntityWithDictionaryId WHERE dictionary1_.[Value] = @p0 ] 
```

在这个查询中，NHibernate 选择使用 2 个别名（dictionary1_，dictionary3_），其中只创建了 1 个（dictionary3_）。

## 标准

```
ICriteria criteria = session.CreateCriteria<EntityWithDictionary>();
criteria("Dictionary").Add(Restrictions.Eq("elements", "testValue"));
var result = criteria.List(); 
```

这会生成与 queryover 相同的 sql 查询，但问题与结果相同。

我知道这在 hql 中是可能的，但是我如何使用 ICriteria 的 QueryOver 来做到这一点？

```
from EntityWithDictionaryId e where 'aDictionaryValue' in elements(m.Dictionary). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:30:11.083

如果 Linq 是一个选项，请使用

```
session.Query<EntityWithDictionary>()
    .Where(f => f.Dictionary["key"] == "value")
    .ToList(); 
```

# aptana - Aptana Auto Complete Woes，使用后删除几行..

> ID：11683370
> 
> 赞同：1
> 
> 时间：2012-07-27T07:35:27.173
> 
> 标签：aptana, aptana3

Aptana 最近开始表现得很奇怪。每次我使用自动完成功能，并按 Tab 键完成时，它会删除它下面的 2 或 3 行。这导致必须撤消自动完成并手动键入文件名或目录名。它似乎只在自动完成 src 属性时发生。自动完成其他任何事情似乎都可以正常工作。

还有人看到这个吗？我尝试卸载并重新安装 Aptana 几次，但都没有成功。我还尝试创建新项目以查看它是否特定于该项目，并且还尝试禁用内容辅助和自动完成，但这似乎不起作用。

我正在运行 Aptana 3.2.0.201... 在 Windows 7 Ultimate x64 上

在此先感谢，这个问题真的让我很烦。

# c# - 来自 Windows 2000 的 WCF 客户端

> ID：11683376
> 
> 赞同：0
> 
> 时间：2012-07-27T07:35:44.517
> 
> 标签：c#, visual-studio-2010, wcf, web-services, windows-2000

我有一个托管在 IIS 上的 WCF 服务。该服务使用 wsHttpBinding X509 认证认证，一切正常。现在我需要从 Windows 2000 机器访问该服务，问题是 Framework 2.0 不支持 wsHttpBinding 身份验证，而只支持 basicHttpBinding。

我的问题：

*   是否可以在 SAME 服务（也称为 IIS 应用程序）中公开两个不同的端点（wsHttpBinding ssl X509 身份验证和匿名 basicHttpBinding）？

*   是否可以为 Windows 2000 编写客户端应用程序以通过 wsHttpBinding X509 身份验证连接到 WCF 服务（接受任何语言）

    ```
     <behaviors>
          <serviceBehaviors>
            <behavior name="CertBehavior">
              <serviceMetadata httpsGetEnabled="False"/>
              <serviceCredentials>
                <serviceCertificate findValue="CertServices" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName"/>
                <clientCertificate>
                  <authentication certificateValidationMode="PeerTrust"/>
                </clientCertificate>
              </serviceCredentials>
            </behavior>
            <behavior name="AnonBehavior">
              <serviceMetadata httpGetEnabled="True"/>
              <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
          </serviceBehaviors>
        </behaviors>

      <services>
          <service name="Server.Service1" behaviorConfiguration="CertBehavior">
            <host>
              <baseAddresses>
                <add baseAddress="http://192.168.1.112:8732/Service"/>
                <add baseAddress="https://192.168.1.112/Service"/>
              </baseAddresses>
            </host>

            <endpoint address="" binding="wsHttpBinding" bindingConfiguration="CertBinding" contract="Server.IService1"/>
          </service>
        </services> 
    ```

///////////////////////////////////////// //////////////////////////////////

我已经尝试过这个配置：

```
 <behaviors>
          <endpointBehaviors>
            <behavior name="basicHttpBehavior"/>
            <behavior name="certWsBehavior">
              <clientCredentials>
                <clientCertificate findValue="Services" storeLocation="LocalMachine" x509FindType="FindBySubjectName" /> 
                <serviceCertificate>
                  <defaultCertificate findValue="Services" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
                  <authentication certificateValidationMode="PeerTrust" />
                </serviceCertificate>
              </clientCredentials>
            </behavior>
          </endpointBehaviors>
        </behaviors>

        <services>
          <service name="Server.Service1">
            <clear />

            <endpoint address="" behaviorConfiguration="certWsBehavior" binding="wsHttpBinding"  contract="Server.IService1">
            </endpoint>

            <!--endpoint address="/basic" binding="basicHttpBinding" bindingConfiguration="BasicAnonBinding" contract="Server.IService1" /-->

            <host>
              <baseAddresses>
                <add baseAddress="http://192.168.1.112:8732/PcrService" />
                <add baseAddress="https://192.168.1.112/PcrService" />
              </baseAddresses>
            </host>
          </service>
        </services> 
```

非常感谢，里卡多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:44:58.640

> 是否可以在 SAME 服务（也称为 IIS 应用程序）中公开两个不同的端点（wsHttpBinding ssl X509 身份验证和匿名 basicHttpBinding）？

是的，您可以为同一服务拥有多个端点：

```
<service name="MyApp.MyService">
    <endpoint 
        address="/ws" 
        binding="wsHttpBinding" 
        contract="MyApp.IMyService" 
    />

    <endpoint 
        address="/basic" 
        binding="basicHttpBinding" 
        contract="MyApp.IMyService" 
    />
</service> 
```

`/basic`现在您可以从您的 Windows 2000 客户端连接到端点。

> 是否可以为 Windows 2000 编写客户端应用程序以通过 wsHttpBinding X509 身份验证连接到 WCF 服务（接受任何语言）

是的，您可以使用 WSE 3.0（Web 服务扩展）。它现在完全被弃用了，但我们能对 Windows 2000 说些什么呢？看看[下面的文章](http://msdn.microsoft.com/en-us/magazine/cc163674.aspx)。

# visual-studio-2010 - 如何添加 NOT NULL 列？

> ID：11683380
> 
> 赞同：6
> 
> 时间：2012-07-27T07:35:54.143
> 
> 标签：visual-studio-2010, database-project

我开始使用数据库项目并努力完成简单的任务。如果我想添加一个新列，`NOT NULL`如果表中已有数据，我该如何使其工作？

我曾经写过差异脚本，在这种情况下，我会写如下内容：

```
-- ... ADD COLUMN X ... 
-- insert data into x
-- ... ALTER COLUMN X NOT NULL 
```

我需要如何使用数据库项目处理这种情况？

感谢任何提示 sl3dg3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:35:39.270

我终于找到了两种可能的方法。简而言之：

*   使用默认约束（根据 Rain 的建议）
*   在部署后脚本中填入数据，去掉default-constraint
*   部署后，从源中删除默认约束

或者

*   将预部署脚本中的表数据备份到临时表中，从目标表中删除数据
*   在部署后脚本中，将数据移回目标表，包括新 NOT NULL 列的新数据，删除表

在这里找到：http: [//social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/49bf2a88-d80d-4a9f-970e-728bd530332e/](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/49bf2a88-d80d-4a9f-970e-728bd530332e/)

或在这里：http: [//blogs.msdn.com/b/bahill/archive/2009/03/30/managing-data-motion-during-your-deployments-part-1.aspx](http://blogs.msdn.com/b/bahill/archive/2009/03/30/managing-data-motion-during-your-deployments-part-1.aspx)

两者都意味着额外的工作，我希望框架能够为这种常见情况提供更多支持。但至少可以这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-11T12:37:51.247

您也可以从 Publish DB 对话框中，而不是为列指定 DEFAULT 值；进入高级->高级部署选项并选中“生成智能默认值”框。

来自 VS 中的描述：生成智能默认值：在更新包含数据的表时自动提供默认值，其中包含不允许空值的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:39:37.550

您可以通过在创建列时提供一些默认值来添加非空列。

# android - android 的 MAC id 会作为唯一标识符吗？

> ID：11683384
> 
> 赞同：0
> 
> 时间：2012-07-27T07:36:02.743
> 
> 标签：android

我正在寻找来自 android 设备的常量标识符，无论它是手机、平板电脑还是其他设备。我检查并找到了 4 个选项 IMEI、IMSI、Android_ID 和 MAC ID。前 3 个被发现不可靠，因为它们可以通过一种或其他方法进行更改。

那么，考虑到设备中有任何类型的网络，无论是蓝牙还是 wifi，我们可以信任设备的 MAC ID，它可以更改吗？

2个设备也有相同的MAC ID吗？

或者我可以从以上所有内容中制作一个唯一的 ID。请建议我一种从 android 设备获取唯一标识符的方法。我需要识别我的应用程序的所有用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:31:14.160

这取决于您使用应用程序的目的。就我而言，我开发了一个蓝牙应用程序，我从客户端获取的所有数据都将保存为一个文件，格式如下

```
[sendersMacAddress, Date, RandomGeneratedNumber] 
```

也许这个stackoverflow[帖子](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)会对你有所帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:24:32.370

在 root 设备的情况下，两个设备可能具有相同的 MAC。所以使用它们是不可靠的。有[一篇文章](http://android-developers.blogspot.it/2011/03/identifying-app-installations.html)解释了如何识别您的设备。他们建议使用`[ANDROID_ID][2]`来识别设备。

此外，如果您想增加区分两个不同设备的机会，您可以以某种方式将所有这些标识符（例如，将它们连接成一个字符串并获取它的哈希）组合成您自己的标识符。在我看来，您可以只使用 ANDROID_ID。

# cron - 每个月的第 2 和第 4 个星期六运行

> ID：11683387
> 
> 赞同：12
> 
> 时间：2012-07-27T07:36:05.620
> 
> 标签：cron, crontab

在每月的第二个和第四个星期六运行作业的 cron (linux) 语法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-27T07:52:57.383

^(该月的第二个星期六是从 8日)到 14^日（含）的日期中的一个（也是唯一一个） 。同样，第四个星期六是在22 日^和28^(日之间的)*某个*日期。

您可能认为您可以使用星期几字段将其限制为星期六（`6`在下面的行中）：

```
0 1 8-14,22-28 * 6 /path/to/myscript 
```

不幸的是，根据手册页，日期和星期几是一个 OR 命题，其中*任何一个*都会导致作业运行：

> `cron`当分钟、小时和年中的月份字段与当前时间匹配时，以及当两个日期字段（月中的日或周中的日）中的*至少一个*与当前时间匹配时，将执行命令。
> 
> 可以通过两个字段指定命令执行的日期 - 月中的日和周中的日。如果两个字段都受限制（即不是 *），则当任一字段与当前时间匹配时，将运行该命令。例如，`30 4 1,15 * 5`将导致在每个月的 1 日和 15 日以及每个星期五的凌晨 4:30 运行命令。

因此，您需要将您的`cron`工作设置为在这些日子的每一天运行，如果不是星期六，则立即退出。

`cron`条目是这样的：

```
0 1 8-14,22-28 * * /path/to/myscript 
```

（每天凌晨 1 点运行）。

然后，在 的顶部`/path/to/myscript`，输入：

```
# Exit unless Saturday
if [[ $(date +%u) -ne 6 ]] ; then
    exit
fi 
```

而且，如果您*不能*修改脚本（例如，如果它是一个程序），只需编写一个仅包含该检查和对该程序的调用的脚本，然后运行它`cron`。

您还可以将星期六的测试放入`crontab`文件本身，以将调度数据全部保存在一个位置：

```
0 1 8-14,22-28 * * [ `date +\%u` = 6 ] && /path/to/myscript 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-10-17T13:16:33.053

扩展@paxdiablo 的回复，为什么不将添加内容放入 crontab 而不是脚本？

```
#m h dom       mon dow command
0  1 8-14,22-28 *   *   [ `date +\%u` = 6 ] && /path/to/myscript 
```

请注意 %u 之前的反斜杠，当您在命令行上尝试此操作时不需要它，但在 crontab 条目中需要它以确保 shell 可以看到整个命令。

这样做会将选择合适日期的所有逻辑放在同事首先查看的位置，如果需要，您可以在另一天手动运行脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-20T00:03:08.953

有两份工作怎么办

```
0 0 0 ? * 7#2
0 0 0 ? * 7#4 
```

第一个给

```
2015-12-12 00:00:00 (-08:00)
2016-01-09 00:00:00 (-08:00)
2016-02-13 00:00:00 (-08:00)
2016-03-12 00:00:00 (-08:00)
2016-04-09 00:00:00 (-07:00) 
```

第二个给出

```
2015-11-28 00:00:00 (-08:00)
2015-12-26 00:00:00 (-08:00)
2016-01-23 00:00:00 (-08:00)
2016-02-27 00:00:00 (-08:00)
2016-03-26 00:00:00 (-07:00) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T18:01:40.020

如果你有它可用，你可以使用**ncal**来获取一个日历，在第一列的旁边有一个日期名称，你可以在其中 grep 一周中的哪一天，以便获取当天所在月份的日期：

```
    2012 年 8 月
苏 5 12 19 26
钼 6 13 20 27
涂 7 14 21 28
我们 1 8 15 22 29
2 9 16 23 30
周五 3 10 17 24 31
萨 4 11 18 25

```

如果你用**grep**表示星期六的“Sa”，你会得到一行包含星期六的月份日期。如果您使用**awk**解析出特定列（awk '{print($3)}' 用于“第二个”星期六，awk '{print($5)}' 用于第四个星期六）并将其与今天的日期（date + %e)，那么你就会知道脚本是否需要运行。

然后，您可以围绕此构建一个脚本，并将其链接到周六运行的 crontab 条目中。因此，当它在星期六运行时，如果日期等于第 2 个或第 4 个星期六，则干净地退出，然后在此脚本之后的 crontab 条目中使用 && 来运行实际作业。但如果是第 1 或第 3 个星期六，则退出 1，然后 && 将不会运行该作业。（你会收到一封 cron 错误电子邮件，说它没有完成或其他）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-10T19:26:48.280

上述解决方案效果很好。此外，我遇到了一个更复杂的挑战，我有多组脚本，每组都依赖于另一组。第一组脚本必须在每月的第三个星期日运行。每月第三个星期日之后的星期一的第二组脚本，依此类推。在上述解决方案的基础上，我提出的解决方案如下：

第三个星期日日期 15-21。

第 3 个星期日日期 16-22 之后的星期一。

第 3 个星期日日期 17-23 之后的星期二。

其他日期范围由与第一组脚本（即触发脚本）的天数差异抵消。

# java - Android：如何避免对话框中的蓝色（聚焦）按钮？

> ID：11683389
> 
> 赞同：0
> 
> 时间：2012-07-27T07:36:09.167
> 
> 标签：java, android, libgdx

我的一些 UI 对话框中有一些蓝色按钮，例如：

[图片 http://freigabe.philweb.de/bubblr/20120724_dialog_blue-button.png](http://freigabe.philweb.de/bubblr/20120724_dialog_blue-button.png)

我怎样才能避免按钮有焦点？我尝试了一些事情，`messageBox.getCurrentFocus().clearFocus();` 但是 evrything 使我的应用程序崩溃了。

这是我的代码：

```
case askRudeMode:
{   
    messageBox = new AlertDialog.Builder(context).create();
    messageBox.setTitle(dialogSubject);
    messageBox.setMessage(dialogText);
    messageBox.setButton(bubblr.lang.getString("YES"), new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {

        Gdx.app.postRunnable(new Runnable(){
            @Override
            public void run() {
                bubblr.prefs.setRudeMode(false);    //----- disable rudemode -> save to prefs
                bubblr.prefs.setAskRudeMode();
            }
        });
    }
});
messageBox.setButton2(bubblr.lang.getString("NO"), new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {    

        Gdx.app.postRunnable(new Runnable() {
            @Override
            public void run() {
                bubblr.prefs.setRudeMode(true); //----- enable rudemode -> save to prefs
                bubblr.prefs.setAskRudeMode();
            }
        });
    }
});

// messageBox.getCurrentFocus().clearFocus();                                               // führt zu crash der app
//      if (messageBox.getCurrentFocus() != null) messageBox.getCurrentFocus().clearFocus();    // funktioniert nicht :(

    messageBox.show();
    break;
} 
```

其他对话框没有焦点按钮....这是为什么呢？

再见菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:38:17.723

而不是只使用按钮，而是使用正面和负面的按钮：

```
case askRudeMode:
{   
    messageBox = new AlertDialog.Builder(context).create();
    messageBox.setTitle(dialogSubject);
    messageBox.setMessage(dialogText);
    messageBox.setPositiveButton(bubblr.lang.getString("YES"), new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {

        Gdx.app.postRunnable(new Runnable(){
            @Override
            public void run() {
                bubblr.prefs.setRudeMode(false);    //----- disable rudemode -> save to prefs
                bubblr.prefs.setAskRudeMode();
            }
        });
    }
});
messageBox.setNegativeButton(bubblr.lang.getString("NO"), new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {    

        Gdx.app.postRunnable(new Runnable() {
            @Override
            public void run() {
                bubblr.prefs.setRudeMode(true); //----- enable rudemode -> save to prefs
                bubblr.prefs.setAskRudeMode();
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:50:39.950

只需在此调用后添加以下代码：“messageBox.show();”

```
Button button = (Button) messageBox.findViewById(android.R.id.button1);
button.setFocusable(false); 
```

此代码避免聚焦您的第一个对话框按钮。

# flash - wmode 为透明或不透明时 Internet Explorer 中的 Flash 性能损失

> ID：11683402
> 
> 赞同：0
> 
> 时间：2012-07-27T07:36:43.957
> 
> 标签：flash, apache-flex

一段时间以来，当 wmode 为“透明”或“不透明”时，我们在 IE 中看到我们的 flash 内容（2 个相当大的 flash/flex 应用程序）的性能非常差。谷歌搜索没有产生可用的结果，也没有分析和优化我们的代码库以提高性能和低内存使用。我们可能忽略了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:46:44.570

我想我会在这里发布这个以节省其他人的时间：

罪魁祸首原来是一个仅用于 IE 的 css 语句，该语句用于向 IE 7 和 8 添加阴影，该语句最近被添加到我们的网站。

```
 filter: progid:DXImageTransform.Microsoft.Shadow(Color=#999999, Strength=3,
Direction=90), 
progid:DXImageTransform.Microsoft.Shadow(Color=#999999, Strength=3, Direction=180),
progid:DXImageTransform.Microsoft.Shadow(Color=#999999, Strength=3, Direction=270)\9; 
```

这会严重影响闪存性能，因此如果您遇到特定于 IE 的类似性能问题，请务必检查。

# mysql - 为自动增量字段设置起始值的存储过程

> ID：11683407
> 
> 赞同：1
> 
> 时间：2012-07-27T07:37:08.810
> 
> 标签：mysql, java-stored-procedures

我是 MySQL 的新手。我想要一个用于以下功能的用户定义函数。我有一个表，它的 rowid 列具有 UNIQUE、AUTO-INCREMENT、NOT NULL 值。当表有 100 行时，下一个 id 值默认设置为 101。但是当我删除 50 行，然后添加新行时，它又是 101 而不是 51。如何创建和调用根据当前 no 更新值的函数rows.Plz 给出完整的函数代码以及在表中删除某些行时如何调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:45:26.983

你可以试试下面：

```
SET @count = 0;
UPDATE `tblName` SET `id` = @count:= @count + 1; 
```

但是，我确实认为不建议重复使用已删除的行自动增量 ID，因为自动增量字段不是为此目的而设计的。这一点尤其重要，因为 id 字段可能用作与其他表相关的外键。

# ruby-on-rails - rails 使用经度和纬度从谷歌地图获取地址

> ID：11683408
> 
> 赞同：0
> 
> 时间：2012-07-27T07:37:08.807
> 
> 标签：ruby-on-rails, ruby, google-maps

我正在尝试编写一个接收 lat/lng 并返回适当位置的应用程序。（即我发送数据 lat/lng = 40.343545334/32.235308039 它返回例如纽约）我应该在这里使用什么？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:41:09.000

您可以为此使用[Geocoder gem](http://www.rubygeocoder.com/)。请参阅[此截屏视频](http://railscasts.com/episodes/273-geocoder)。

# android - 如何在Android中显示媒体播放视频图片

> ID：11683412
> 
> 赞同：0
> 
> 时间：2012-07-27T07:37:17.160
> 
> 标签：android, media-player, surfaceview

我的 android 活动使用 mediaplay 播放 rtsp 流，当切换 tabhost 时，我`setVisibility(View.INVISIBLE)`在 OnPaused 和`setVisibility(View.VISIBLE)`onResume 中使用。因此流播放表面不会显示在其他表面界面中。但是`setVisibility(View.VISIBLE)`函数会重新加载surfaceCreate函数，Mediaplay将继续播放而没有视频图片。似乎 Mediaplay 找不到新的表面。如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:18:25.817

我认为你应该在重新创建表面视图时重置表面。你可以调用 mediaplayer.setSurface(Surface surface) 或 mediaplayer.setDisplay(SurfaceHolder sh)。请试试这个。

# html - 居中一个 html div（margin 0 自动帮助）

> ID：11683417
> 
> 赞同：3
> 
> 时间：2012-07-27T07:37:30.010
> 
> 标签：html, css

我正在尝试将页脚菜单居中，但它没有正确定位。我尝试了一个margin auto 0，它适用于主容器div，但不适用于页脚。请帮忙。提前致谢。

html代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href="css.css" rel="stylesheet" type="text/css"/>
</head>

    <body>
        <div id="container">
            <p>stuff</p>
        </div>

        <div id="footer">
            <ul>
                <li><a href="">link</a></li>
                <li><a href="">link</a></li>
                <li><a href="">link</a></li>
                <li><a href="">link</a></li>
                <li><a href="">link</a></li>
            </ul>
        </div>

    </body>
</html> 
```

CSS代码

```
body {
    font-family: Arial;
    padding-bottom: 50px;
}

a, a:link, a:visited, a:active {
    text-decoration: none;
}

#container {
height: 300px;
width: 500px;
margin: 0 auto;
padding-bottom: 10px;
border: 5px solid #dbdbda;
}

/*footer*/
/*
#footer {
margin: 0 auto;
}
*/
#footer ul {
font-size: 10px;
list-style: none;
}

#footer li {
float: left;
}

#footer li a {
padding-left: 10px;
padding-right: 10px;
border-right: 1px solid #dbdbdb;
color: #323232;
}

#footer li a:hover {
color: #dbdbdb;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:41:00.697

`margin: 0 auto`没有就不行`width`，尝试设置`fixed width`，例如`width: 100px;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T07:41:52.463

你可以`display:inline-block`在你的页脚和页脚中给 ul 标签`text-align:center`。

这将有助于独立于页脚中的 li 数量。否则，您必须为您的页脚指定宽度，这在这种情况下是不正确的，因为您可能需要向页脚添加一些元素并且每次更改宽度都不是很好的解决方案。

查看更新[**的 jsfiddle**](http://jsfiddle.net/vMZSV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:40:29.447

给你的页脚一个固定的宽度，否则它不会知道“中心”相对于页面其余部分的实际含义。

```
#footer {
    width:500px;
    margin:auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T09:55:40.787

使用这个CSS，

```
#footer {
text-align:center;
}
#footer ul {
font-size: 10px;
list-style: none;
display:inline-block;
width:500px;

} 
```

# haskell - 缺少随附的绑定 - 这是什么意思？这个怎么运作？

> ID：11683419
> 
> 赞同：9
> 
> 时间：2012-07-27T07:37:39.403
> 
> 标签：haskell, haskell-platform

我在 LYAH 练习。

phoneBook.hs 文件包含以下代码：

> 电话簿 :: [（字符串，字符串）]

在尝试编译上述代码时，出现以下错误：

> *Main> :load "/home/optimight/phoneBook.hs" [1 of 1] 编译 Main（/home/optimight/phoneBook.hs，解释）
> 
> /home/optimight/phoneBook.hs:1:1：“phoneBook”的类型签名缺少随附的绑定失败，已加载模块：无。

在 brano 的回答和对该答案的后续评论之后添加的问题：我们如何为上述类型签名提供实现？

如果我添加这个：

> 输入电话簿 = [（字符串，字符串）]

我收到以下错误：

> Prelude> :load "/home/optimight/phoneBook.hs" [1 of 1] 编译主程序（/home/optimight/phoneBook.hs，解释）
> 
> /home/optimight/phoneBook.hs:2:6：类型或类声明格式错误：电话簿失败，加载模块：无

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T07:41:40.370

您需要为电话簿提供一个实现。

`phoneBook :: [(String, String)]` 只是签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:53:18.650

如果你想声明一个类型，它必须有首字母大写，即`type PhoneBook = [(String, String)]`。

如果你想声明一个函数，那么你需要要么只提供它的定义（绑定），要么提供它的定义和它的类型签名。编译代码的最小努力是：

```
phoneBook :: [(String, String)]
phoneBook = undefined 
```

然后你可以`undefined`用任何类型的值替换，`[(String, String)]`例如`[("Person","Number")]`。

# node.js - Azure 无法加载共享库 - 使用 nodejs

> ID：11683424
> 
> 赞同：1
> 
> 时间：2012-07-27T07:37:59.323
> 
> 标签：node.js, azure

我的页面上有这个错误。

iisnode 在处理请求时遇到错误。HRESULT：0x2 HTTP 状态：500 `enter code here` HTTP 原因：内部服务器错误

您收到此 HTTP 200 响应是因为 system.webServer/ii `enter code here`snode/@devErrorsEnabled 配置设置为“true”。

除了node.exe进程的stdout和stderr的日志，考虑使用debugging和ETW traces来进一步诊断问题。

node.exe进程生成到stdout和stderr的最后64k输出如下图所示：

node.js:201 抛出 e；// process.nextTick 错误，或第一次滴答时的“错误”事件 ^ 错误：无法加载共享库 C:\DWASFiles\Sites\leagues\VirtualDirectory0\site\wwwroot\node_modules\node-sqlserver\lib\sqlserver.node at Object..node (module.js:472:11) 在 Module.load (module.js:348:31) 在 Function._load (module.js:308:12) 在 Module.require (module.js:354: 17) 在 Object 的 require (module.js:370:17) 处。(C:\DWASFiles\Sites\leagues\VirtualDirectory0\site\wwwroot\node_modules\node-sqlserver\lib\sql.js:20:11) 在 Module._compile (module.js:441:26) 在 Object..js (module.js:459:10) 在 Module.load (module.js:348:31) 在 Function._load (module.js:308:12)

这是我的 server.js 代码

```
var sql = require('node-sqlserver');
var conn_str = the value of ODBC in Connection Strings;
var http = require('http');
var port = process.env.port;
http.createServer(function(req, res) {
res.writeHead(200, {'Content-Type': 'text/plain'});
res.write("start");
res.end("finish");
sql.query(conn_str, "SELECT * FROM GAME_PARTICIPANT", function(err, results) {
    if (err) {
        res.writeHead(500, {'Content-Type': 'text/plain'});
        res.write("Database Error: " + err)
        res.end("");
        return;
    }
    res.writeHead(200, {'Content-Type': 'text/plain'});
    for (var i = 0; i < results.length; i++) {
        res.write("ID: " + results[i].PlayerID + " GameID: " + results[i].GameID + " Team: " + results[i].Team + " Confirmed: " + results[i].Confirmed + " RoleID: " + results[i].RoleID);
    }
    res.end("; Done.");
});
}).listen(port); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:01:07.340

我在尝试驱动程序时也遇到了这个错误。

事实证明，我没有编译`.node`文件的所有先决条件，这似乎在部署时自动发生。

对我有用的是包含`.node`吉姆上面提到的文章中的预编译文件（直接链接在[http://www.microsoft.com/en-us/download/details.aspx?id=29995](http://www.microsoft.com/en-us/download/details.aspx?id=29995)）并将其放入`node_modules\node-sqlserver\lib`文件旁边的文件夹`sql.js`。重新部署所有内容（包括`.node`文件），您应该一切顺利。

哦 - 我记得仍然看到一个关于无法编译`.node`文件的错误，但它似乎运行正常，因为我自己提供了二进制文件。去搞清楚...

# facebook - 其他页面的 FB like 按钮

> ID：11683432
> 
> 赞同：0
> 
> 时间：2012-07-27T07:38:23.463
> 
> 标签：facebook, facebook-like, xfbml

我想在我的 facebook 页面选项卡中添加一个 facebook like 按钮，不是针对我自己的页面，而是针对用户来自的页面。
现在，如果我将页面的 id 用于我的喜欢按钮

```
<div class="fb-like" id="like-button" href="http://www.facebook.com/PAGE_ID
data-send="false" data-width="450" data-show-faces="false"></div>

<div id="fb-root"></div>
<script>
(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=MY_ID";
      fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>` 
```

该页面没有得到喜欢。

这是不可能的还是我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:22:25.717

Like 按钮不**打算**以这种方式使用。点赞按钮仅适用于不在 facebook.com 上托管的网页。

但是你试图做的实际上**可以工作**，尽管有问题。问题是您的页面 URL 不正确：

`http://www.facebook.com/PAGE_ID`

当您在网络浏览器中打开此 URL 时，它会将您重定向到正确的页面 URL。

如果您为点赞按钮使用正确的页面 URL，您的页面将收到点赞，但点赞按钮可能会报告错误。

# objective-c - 如何在 Xcode 中显示或隐藏 psd 文件的图层

> ID：11683434
> 
> 赞同：0
> 
> 时间：2012-07-27T07:38:28.057
> 
> 标签：objective-c, ios

我正在为视障人士开发一个应用程序。我想知道是否可以使用具有多个图层的 psd 文件，例如高对比度图层、中等对比度图层和小对比度图层，并使用 Xcode 更改这些图层，例如使用手势。我将不胜感激任何帮助 。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:45:43.160

PSD 原生于 adobe photoshop，不能在 OSX 应用程序中使用（或不容易），您最好将具有不同透明度/不透明度的单独图层导出到 .PNG 文件，然后使用手势将图像叠加在上面彼此。

# objective-c - 如何将多个视图添加到 UIScrollView

> ID：11683435
> 
> 赞同：0
> 
> 时间：2012-07-27T07:38:28.730
> 
> 标签：objective-c, uiviewcontroller, uiscrollview, addsubview

我有一个 ScrollView (contentScrollView)，它稍后应该包含 20 个页面，每个页面都有一个 UIViewController。

现在这是我将 UIViewControllers 视图添加到 contentScrollView 时得到的（右上角的 Button 来自 MainViewController，因此不会影响问题） ![顶部的灰色条？！](../Images/2f82f46f35e09b5ba34e702bb070c3e8.png)

我在我的 ContentScrollView所在的**MainViewController**类中得到了这段代码：

```
 Slide1ViewController*test = [[Slide1ViewController alloc] init];
test.view.frame = CGRectMake(0, 0, 1024, 768);
[self.contentScrollView addSubview:[test view]]; 
```

当我在设置框架后立即添加这样的背景时：

```
test.view.backgroundColor = [UIColor blackColor]; 
```

然后我得到黑色背景，顶部没有那个 Bar，但 Slide1ViewController.xib 中的标签不会出现。

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:51:06.110

对不起，我没有意识到 UINavigationController 仍然被选中，所以我创建了这个类，同时相信它是一个 UIViewController

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:11:02.100

如果你真的需要 20 个页面，每个页面都有一个视图控制器，你应该使用 uinavigationcontroller，如果你真的想要一个滚动视图，请使用 uitableview 并使每个单元格成为你的 uiviewcontroller 之一的视图，因为这样每个视图都将被加载需要时，而在滚动视图中，您可能会同时加载太多竞争。

# objective-c - 客观 c 方法星号

> ID：11683439
> 
> 赞同：-1
> 
> 时间：2012-07-27T07:38:37.890
> 
> 标签：objective-c, methods

> **可能重复：**
> [Objective-C 中括号中的星号……这是什么意思？](https://stackoverflow.com/questions/514139/asterisk-in-parenthesis-in-objective-c-what-does-it-mean)

是否有人可以找到有关以下代码的一些资源或详细说明

```
-(void) add:(Cal *)c; 
```

我对 obj-c 很陌生。星号在该代码中的含义是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:42:55.017

这意味着该方法的参数是**指向**“Cal”对象实例的指针。

# windows-phone-7 - 停用phone7键盘

> ID：11683440
> 
> 赞同：1
> 
> 时间：2012-07-27T07:38:42.053
> 
> 标签：windows-phone-7, windows-phone-7.1

当文本框获得焦点时，有没有办法在我的项目中停用 phone7 键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:54:22.687

您可以通过调用将焦点从键盘上移开来隐藏键盘

```
this.hide(); 
```

但是，这确实会闪烁.. 替代方法是将您的文本框设置为只读。我还没有尝试过这种方法

# c++ - 无效的纯说明符c ++

> ID：11683459
> 
> 赞同：1
> 
> 时间：2012-07-27T07:39:55.143
> 
> 标签：c++, codeblocks

谁能告诉我为什么这条线会产生这个错误？

```
virtual void Calculate(Pose *out_pose, HiBoneMask *mask = NULL, HiBoneMask *positionMask = NULL) = NULL; 
```

我一直在尝试为 Visual Studio 和代码块中的骨骼动画库编译这个演示。Visual Studio 只给了我 194 个错误代码块。我宁愿让代码块工作，这就是我提出这个错误的原因。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:42:00.373

最后替换`= NULL`为`= 0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T07:42:27.060

它应该是`=0;`一个纯虚函数。`NULL`不一定`0`（例如它可以`0L`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:43:26.570

c++ 中的[NULL](http://www.cplusplus.com/reference/clibrary/cstring/NULL/)有双重含义：

> NULL：空指针 此宏扩展为空指针常量。
> 
> 空指针通常用于表示指针不指向任何对象。在 C++ 中，NULL 扩展为 0 或 0L。

所以在你的情况下，你应该使用

`function(arguments) = 0;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T11:03:24.050

NULL != 0，但你可以使用#define NULL 0，如果你喜欢使用'NULL'。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T07:42:40.437

空！= 0。

```
virtual void Calculate(Pose *out_pose, HiBoneMask *mask = NULL, HiBoneMask *positionMask = NULL) = 0; 
```

是正确的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T07:43:25.990

声明你使用的纯虚函数

```
 virtual void function() = 0; 
```

而不是 NULL；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T07:44:34.830

你试过`= 0`代替`= NULL`吗？

# php - 在使用 php 上传多个图像时创建缩略图图像

> ID：11683464
> 
> 赞同：0
> 
> 时间：2012-07-27T07:40:23.380
> 
> 标签：php, image, upload, thumbnails, creation

我正在使用 PHP/MySQL 为相册上传多张图片。与图像相关的信息（文件名、扩展名、描述等）作为 base64 编码数据存储在数据库中。我还可以编辑专辑图片。我现在的问题是，我还想在插入和编辑模式下上传每个图像时为每个图像创建缩略图，并以与图像相同的方式存储缩略图的信息（base64 编码）。最好的方法是什么？谢谢 这是我的代码：

```
<?php

//Code for the editing albums in database   
if (isset($_REQUEST['action']) && $_REQUEST['action'] == 'edit') {

        //select photo album and get photos and descriptions to be merged with new.
        $album_id           = $_REQUEST['album_id'];    
        $old_photos         = null;
        $old_descriptions   = null;

        $getAlbumQ = mysql_query("select * from albums where id='$album_id'");

        while ($old_album = mysql_fetch_array($getAlbumQ)) {
            $old_photos         = unserialize(base64_decode($old_album['photos']));
            $old_descriptions   = unserialize(base64_decode($old_album['descriptions']));
            $old_timestamp=$old_album['timestamp'];
        }

        if (isset($_POST['album_name']) && isset($_POST['desc'])) {
            $name       = mysql_real_escape_string($_POST['album_name']);
            $desc       = mysql_real_escape_string($_POST['desc']);
            $idesc      = array();
            $target_path = "/uploads/albums/";

            foreach ($_FILES as $key => $value) {
                 foreach ($value as $k => $v) {
                         if ($k === 'name' && $v !== '') {
                             break;
                         } else {
                             unset($_FILES[$key]);
                         }

                    }

                //first upload photos
                $path = $target_path . basename($old_timestamp.$value['name']); 
                if(move_uploaded_file($value['tmp_name'], $path)) {

                  $hasUpload = true;

                }   

            }

            for ($j = 1; $j < 21; $j++) {
                    $img_index  = $j;
                    $img_desc   = $_POST['desc_' . $img_index];
                    array_push($idesc, $img_desc);

            }

             foreach ($_FILES as $key => $value) {

                    foreach ($value as $k => $v) {
                         if ($k=='name' && $v!='') {
                             break;
                         } else {
                             unset($_FILES[$key]);
                           }
                   }
            }

function merge(&$a, &$b){
     $keys = array_keys($a);
     foreach($keys as $key){
          if(isset($b[$key])){
              if(is_array($a[$key]) and is_array($b[$key])){
                 merge($a[$key],$b[$key]);
              }
              else{
                  $a[$key] = $b[$key];
              }
          }
     }
    $keys = array_keys($b);
    foreach($keys as $key){
        if(!isset($a[$key])){
            $a[$key] = $b[$key];
        }
    }
}

            for ($i = 1; $i < 21; $i++) {

                $file_index     = $i;
                $file_number    = $_POST['image_' . $file_index];

                if($_FILES['image_'.$i]['name']!= ''){

                  $hasUpload = true;

                  $presults         = merge($old_photos, $_FILES);
                  $dresults     = array_merge($old_descriptions, $idesc);

                  $images       = base64_encode(serialize($presults));
                  $descriptions = base64_encode(serialize($dresults));
                  $posted       = date("Y-m-d H:i:s");
                }
                else {
                  $hasUpload = false;

                  $presults         = $old_photos;
                  $dresults     = $idesc;

                  $images       = base64_encode(serialize($presults));
                  $descriptions = base64_encode(serialize($dresults));
                  $posted       = date("Y-m-d H:i:s");
                }
            }

}

    if (mysql_query("update albums set description = '$desc', name = '$name', photos='$images', descriptions='$descriptions' where id='$album_id'")) {
        $hasAlbums = true;
    } else {
        $hasErrors = true;
    }
} else {

    //Code for the inserting albums in database
    if (isset($_POST['album_name'])) {

        if (isset($_POST['album_name']) && isset($_POST['desc'])) {
            $name       = mysql_real_escape_string($_POST['album_name']);
            $desc       = mysql_real_escape_string($_POST['desc']);
            $idesc      = array();
            $timestamp = time();
            $target_path = "/uploads/albums/";

            foreach ($_FILES as $k => $v) {
                //first upload photos
                $path = $target_path . basename($timestamp.$v['name']); 
                if(move_uploaded_file($v['tmp_name'], $path)) {

                    $img_index  = explode('_', $k);
                    $img_index  = $img_index[1];
                    $img_desc   = $_POST['desc_' . $img_index];
                    array_push($idesc, $img_desc);

                    $file_name  = $timestamp.$v['name'];
                    $hasUpload = true;
                }   
            }

            $images         = base64_encode(serialize($_FILES));
            $descriptions   = base64_encode(serialize($idesc));
            $posted         = date("Y-m-d H:i:s");

            $query = mysql_query("
        INSERT INTO albums (description, posted, photos, name, descriptions, timestamp) 
                    VALUES ('$desc', '$posted', '$images', '$name', '$descriptions', '$timestamp')
            ");
        }
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:14:03.780

我尝试了一个在本教程中找到的简单缩略图脚本，它运行良好：http: [//net.tutsplus.com/articles/news/how-to-dynamically-create-thumbnails/](http://net.tutsplus.com/articles/news/how-to-dynamically-create-thumbnails/)

感谢您的建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:01:00.593

您可以使用 Thumbnail 类

[http://freecode.com/projects/easyphpthumbnailclass](http://freecode.com/projects/easyphpthumbnailclass)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:17:43.467

您可以使用**[ImageMagick](http://www.imagemagick.org/)**的`resizeImage`方法。

在这里的教程中解释了[http://coffeeshopped.com/2009/01/creating-image-thumbnails-using-php-and-imagemagick](http://coffeeshopped.com/2009/01/creating-image-thumbnails-using-php-and-imagemagick)

此外，您可以尝试`phpThumb()`功能，可在 sourceforge 获得[http://phpthumb.sourceforge.net/](http://phpthumb.sourceforge.net/)

希望这可以帮助..

# parsing - 配对时删除网页中的特殊错误字符

> ID：11683465
> 
> 赞同：0
> 
> 时间：2012-07-27T07:40:25.953
> 
> 标签：parsing, character

我有一个网页，上面写着“Alexander Macomb, Junior（1782 年 4 月 3 日 - 1841 年 6 月 25 日）是 1828 年 5 月 29 日至 1841 年 6 月 25 日期间美国陆军的指挥官。”。

这些字符（“？”）已经在网页中出现错误。顺便说一句，这些字符（-？）似乎是“-”。如何删除/更正此类字符。我的意思是，在将网页内容读取/加载到 java 或其他编程语言时，有什么方法可以检测和纠正这些字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:57:36.520

这是一个字符编码问题：某些软件执行了不正确的字符代码转换。如果没有有关情况的更多详细信息，例如 URL，则几乎不可能提出具体的补救措施。但是该页面似乎是[http://en.wikipedia.org/wiki/Alexander_Macomb_%28general%29](http://en.wikipedia.org/wiki/Alexander_Macomb_%28general%29)的一些扭曲副本，因此也许您可以使用该页面。失真显然包括以某种方式修改 EN DASH “-” U-2013 字符。

# spring - 端点 SWS 没有适配器

> ID：11683468
> 
> 赞同：7
> 
> 时间：2012-07-27T07:40:27.800
> 
> 标签：spring, soap, annotations, adapter, endpoint

我正在尝试使用 [本](http://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html)教程创建一个简单的 Hello World WebService。

我正在运行 Java 1.7.0_04、Spring 2.1，一切都是用 Maven 构建并用 Tomcat6 部署的。但是，当尝试发送 SOAP 请求 (soapUI) 时，服务器返回给我

```
No adapter for endpoint [public org.jdom.Element com.mycompany.hr.ws.HolidayEndpoint.handleHolidayRequest(org.jdom.Element) throws java.lang.Exception]: Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint? 
```

我认为注释存在问题，但是这是我的文件的样子：

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
         version="2.4">

    <display-name>Khozzy custom WebService</display-name>

    <servlet>
        <servlet-name>spring-ws</servlet-name>
        <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>

        <init-param>
            <param-name>transformWsdlLocations</param-name>
            <param-value>true</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring-ws</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

**spring-ws-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:sws="http://www.springframework.org/schema/web-services"
       xsi:schemaLocation=" http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                            http://www.springframework.org/schema/web-services
                            http://www.springframework.org/schema/web-services/web-services-2.0.xsd
                            http://www.springframework.org/schema/context
                            http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="com.mycompany.hr.ws" />
    <context:component-scan base-package="com.mycompany.hr.service" />

    <sws:annotation-driven />

    <sws:dynamic-wsdl id="holiday" portTypeName="HumanResource" locationUri="/holidayService/" targetNamespace="http://mycompany.com/hr/definitions">
        <sws:xsd location="/WEB-INF/hr.xsd"/>
    </sws:dynamic-wsdl>
</beans> 
```

**HolidayEndpoint.java**

```
package com.mycompany.hr.ws;

import com.mycompany.hr.service.HumanResourceService;
import org.jdom.Document;
import org.jdom.Element;
import org.jdom.JDOMException;
import org.jdom.Namespace;
import org.jdom.xpath.XPath;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.ws.server.endpoint.annotation.Endpoint;
import org.springframework.ws.server.endpoint.annotation.PayloadRoot;
import org.springframework.ws.server.endpoint.annotation.RequestPayload;
import org.springframework.ws.server.endpoint.annotation.ResponsePayload;

import java.text.SimpleDateFormat;
import java.util.Date;

@Endpoint
public class HolidayEndpoint {
    private static final String NAMESPACE_URI = "http://mycompany.com/hr/schemas";
    private XPath startDateExpression;
    private XPath endDateExpression;
    private XPath nameExpression;

    private HumanResourceService humanResourceService;

    @Autowired
    public HolidayEndpoint(HumanResourceService humanResourceService) throws JDOMException {
        this.humanResourceService = humanResourceService;

        Namespace namespace = Namespace.getNamespace("hr",NAMESPACE_URI);

        startDateExpression = XPath.newInstance("//hr:StartDate");
        startDateExpression.addNamespace(namespace);

        endDateExpression = XPath.newInstance("//hr:EndDate");
        endDateExpression.addNamespace(namespace);

        nameExpression = XPath.newInstance("concat(//hr:FirstName, ' ',//hr:LastName)");
        nameExpression.addNamespace(namespace);
    }

    @PayloadRoot(namespace = NAMESPACE_URI, localPart = "HolidayRequest")
    @ResponsePayload
    public Element handleHolidayRequest(@RequestPayload Element holidayRequest) throws Exception {
        Element toReturn = null;

        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        Date startDate = dateFormat.parse(startDateExpression.valueOf(holidayRequest));
        Date endDate = dateFormat.parse(endDateExpression.valueOf(holidayRequest));
        String name = nameExpression.valueOf(holidayRequest);

        humanResourceService.bookHoliday(startDate,endDate,name);
        return toReturn;
    }
} 
```

**hr.xsd**

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:hr="http://mycompany.com/hr/schemas"
           elementFormDefault="qualified"
           targetNamespace="http://mycompany.com/hr/schemas">

    <xs:element name="HolidayRequest">
        <xs:complexType>
            <xs:all>
                <xs:element name="Holiday" type="hr:HolidayType"/>
                <xs:element name="Employee" type="hr:EmployeeType"/>
            </xs:all>
        </xs:complexType>
    </xs:element>

    <xs:complexType name="HolidayType">
        <xs:sequence>
            <xs:element name="StartDate" type="xs:date"/>
            <xs:element name="EndDate" type="xs:date"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="EmployeeType">
        <xs:sequence>
            <xs:element name="Number" type="xs:integer"/>
            <xs:element name="FirstName" type="xs:string"/>
            <xs:element name="LastName" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>

</xs:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-24T16:39:10.580

这是您的问题的有效解决方案：

将此依赖项添加到您的**pom.xml**

![在此处输入图像描述](../Images/1b66d94384286d4420462d0834f0bc3a.png)

**将源中 jdom 的导入更改为 jdom2**

这是 HolidayEndpoint 的更新版本：

```
package com.mycompany.ws_template.endpoint;

import com.mycompany.ws_template.service.HumanResource;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.jdom2.JDOMException;
import org.jdom2.Namespace;
import org.jdom2.Element;
import org.jdom2.filter.Filters;
import org.jdom2.xpath.XPathExpression;
import org.jdom2.xpath.XPathFactory;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.ws.server.endpoint.annotation.Endpoint;
import org.springframework.ws.server.endpoint.annotation.PayloadRoot;
import org.springframework.ws.server.endpoint.annotation.RequestPayload;

@Endpoint
public class HolidayEndpoint {

private static final String NAMESPACE_URI = "http://www.mycompany.com/holiday-service/schemas/holiday-request";

private XPathExpression<Element> startDateExpression;
private XPathExpression<Element> endDateExpression;
private XPathExpression<Element> nameExpression;
private XPathExpression<Element> surnameExpression;

@Autowired private HumanResource holidayService;

public HolidayEndpoint() throws JDOMException {

    Namespace namespace = Namespace.getNamespace("hr", NAMESPACE_URI);

    XPathFactory xpathFactory = XPathFactory.instance();
    startDateExpression = xpathFactory.compile("//hr:StartDate", Filters.element(), null, namespace);
    endDateExpression = xpathFactory.compile("//hr:EndDate", Filters.element(), null, namespace);
    nameExpression = xpathFactory.compile("//hr:EmployeeName", Filters.element(), null, namespace);
    surnameExpression = xpathFactory.compile("//hr:EmployeeSurname", Filters.element(), null, namespace);
}

@PayloadRoot(namespace = NAMESPACE_URI, localPart = "HolidayRequest")
public void handleHolidayRequest(@RequestPayload Element holidayRequest) throws Exception {

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    Date startDate = sdf.parse(startDateExpression.evaluate(holidayRequest).get(0).getValue());
    Date endDate = sdf.parse(endDateExpression.evaluate(holidayRequest).get(0).getValue());
    String name = nameExpression.evaluate(holidayRequest).get(0).getValue() + surnameExpression.evaluate(holidayRequest).get(0).getValue();

    holidayService.bookHoliday(startDate, endDate, name);
}

} 
```

# php - 使用 PHP 输出和压缩 CSS 文件

> ID：11683470
> 
> 赞同：0
> 
> 时间：2012-07-27T07:40:38.070
> 
> 标签：php, css, caching, compression, obfuscation

每当用户像这样进入页面时，我都会从文件中生成 CSS：

```
<?php

header("Content-type: text/css");
$styles = array(
    'default',
    'reset',
    'notifybar',
    'jqui'
);
if (isset($_GET['page'])) {
    if (file_exists('styles/' . trim($_GET['page']) . '.css'))
        $styles [] = $_GET['page'];
    switch ($_GET['page']) {
        case "main":
            $styles [] = "treeview";
            $styles [] = "buttons";
            $styles [] = "wmd";
            $styles [] = "qa";
            $styles [] = "pretify";
            $styles [] = "code";
            $styles [] = "msgBoxes";
            break;
        case "payments":
            $styles [] = "tables";
            break;
    }
}

foreach ($styles as $style) {
    include 'styles/' . $style . '.css';
}
?> 
```

HTML像这样得到CSS

```
<link rel="stylesheet" href="design/css.php?page=<?= $pgdata['token'] ?>" type="text/css" media="screen" /> 
```

我有两个问题：

1.  我可以缓存 css 文件以获得更好的性能吗？如果是，那么如何？
2.  如何在输出期间压缩 css 文件？我的意思是类似混淆：删除空换行符，空格..换句话说，创建css的生产版本。如果可能的话，帮我做缓存。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:48:50.770

您可以使用 PHP5 库[minify](https://github.com/mrclay/minify)。

它确实会缩小、缓存和连接 JS 和 CSS 文件，因此它可能是解决方案。以下是如何实现它的演练：[http ://www.mrclay.org/2008/09/19/minify-21-on-mrclayorg/](http://www.mrclay.org/2008/09/19/minify-21-on-mrclayorg/)

# windows - 詹金斯的主人和奴隶之间没有握手

> ID：11683478
> 
> 赞同：1
> 
> 时间：2012-07-27T07:41:16.890
> 
> 标签：windows, hudson, jenkins, ubuntu-12.04, jenkins-plugins

如何解决这个错误？由于我将主 IP 设为公共并分配 DNS，因此发生错误。

```
Jul 27, 2012 12:44:17 PM hudson.remoting.jnlp.Main$CuiListener <init>
INFO: Hudson agent is running in headless mode.
Jul 27, 2012 12:44:17 PM hudson.remoting.jnlp.Main$CuiListener status
INFO: Locating server among [http://10.10.1.162:8080/jenkins/, http://dem
Jul 27, 2012 12:44:38 PM hudson.remoting.jnlp.Main$CuiListener status
INFO: Connecting to demo.sigmainfo.in:8050
Jul 27, 2012 12:44:38 PM hudson.remoting.jnlp.Main$CuiListener status
INFO: Handshaking
Jul 27, 2012 12:44:58 PM hudson.remoting.jnlp.Main$CuiListener error
SEVERE: The server rejected the connection:
java.lang.Exception: The server rejected the connection:
  at hudson.remoting.Engine.onConnectionRejected(Engine.java:258)
  at hudson.remoting.Engine.run(Engine.java:233) 
```

我已经看到了很多关于此的主题，但没有得到任何正确的答案。

我使用无头从代理连接并将 HOST:PORT 放在从配置的高级设置中。主机是linux，从机是windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:03:01.810

来自评论：

**==================================**

由于您在使用公共 IP 和 DNS 时遇到问题，您能否确保在您的网络上允许公共 IP 和 DNS 的路由。只是为了确保这不是防火墙问题。您在公司网络上吗？在这种情况下，您的公司防火墙可能会阻止所有 IP 地址上的某些端口。

# iphone - 如何使用phonegap从iphone上传pdf？

> ID：11683480
> 
> 赞同：0
> 
> 时间：2012-07-27T07:41:29.303
> 
> 标签：iphone, ios, pdf, cordova, upload

我可以使用 phonegap 应用程序上传图片库中的图片。我想知道我是否可以从 iphone 应用程序上传 pdf。使用 phonegap 或任何本机技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:38:41.783

您是否尝试过添加一个`<input type="file">`字段并将表单发送到您可以使用它的脚本？

[也许这会以正确的方式借给你](http://www.w3schools.com/php/php_file_upload.asp)。

# c# - 格式化十进制 c# - 保留最后一个零

> ID：11683484
> 
> 赞同：8
> 
> 时间：2012-07-27T07:41:37.780
> 
> 标签：c#, string-formatting

我一直在寻找这个，但似乎找不到答案。我有以下小数以及我想要的 String.Format 的相应输出

100.00 -> 100
100.50 -> 100.50
100.51 -> 100.51

我的问题是我似乎找不到一种格式，它可以在 100.50 的末尾保留 0 并从 100 中删除 2 个零。

任何帮助深表感谢。

**编辑** 为了更清楚。我有十进制类型的变量，它们只会是小数点后 2 位。基本上我想显示 2 个小数位（如果它们存在或没有），我不想在 100.50 变为 100.5 的情况下显示一个小数位

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T07:45:21.037

据我所知，没有这种格式。您将不得不手动执行此操作，例如：

```
String formatString = Math.Round(myNumber) == myNumber ? 
                      "0" :     // no decimal places
                      "0.00";   // two decimal places 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-27T07:45:14.473

你可以使用这个：

```
string s = number.ToString("0.00");
if (s.EndsWith("00"))
{
    s = number.ToString("0");
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-27T07:45:58.510

测试您的数字是否为整数，并根据格式使用：

```
string.Format((number % 1) == 0 ? "{0}": "{0:0.00}", number) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T07:45:36.937

好的，这伤害了我的眼睛，但应该给你你想要的：

```
string output = string.Format("{0:N2}", amount).Replace(".00", ""); 
```

**更新：**我更喜欢 Heinzi 的回答。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T13:55:00.347

这种方法将在应用指定的文化时达到预期的结果：

```
decimal a = 100.05m;
decimal b = 100.50m;
decimal c = 100.00m;

CultureInfo ci = CultureInfo.GetCultureInfo("de-DE");

string sa = String.Format(new CustomFormatter(ci), "{0}", a); // Will output 100,05
string sb = String.Format(new CustomFormatter(ci), "{0}", b); // Will output 100,50
string sc = String.Format(new CustomFormatter(ci), "{0}", c); // Will output 100 
```

您可以将文化替换为 CultureInfo.CurrentCulture 或任何其他文化以满足您的需求。

CustomFormatter 类是：

```
public class CustomFormatter : IFormatProvider, ICustomFormatter
{
    public CultureInfo Culture { get; private set; }

    public CustomFormatter()
        : this(CultureInfo.CurrentCulture)
    { }

    public CustomFormatter(CultureInfo culture)            
    {
        this.Culture = culture;
    }

    public object GetFormat(Type formatType)
    {
        if (formatType == typeof(ICustomFormatter))
            return this;

        return null;
    }

    public string Format(string format, object arg, IFormatProvider formatProvider)
    {
        if (formatProvider.GetType() == this.GetType())
        {
            return string.Format(this.Culture, "{0:0.00}", arg).Replace(this.Culture.NumberFormat.NumberDecimalSeparator + "00", "");
        }
        else
        {
            if (arg is IFormattable)
                return ((IFormattable)arg).ToString(format, this.Culture);
            else if (arg != null)
                return arg.ToString();
            else
                return String.Empty;
        }
    }
} 
```

# delphi - 如何调用带参数的 Word 宏

> ID：11683486
> 
> 赞同：3
> 
> 时间：2012-07-27T07:41:38.543
> 
> 标签：delphi, parameters, ms-word

我想从 Delphi 运行 Word 文档的宏（子）。

我在 Word 中的宏是

```
Sub Macro1()  
  'Do Something
End Sub 
```

在德尔福

```
Word := CreateOleObject('Word.Application');  
Word.visible := true;  
Word.Documents.Open('c:\_3\Doc\2.docm', true, false);  
word.Run('Macro1'); 
```

并且效果很好
但是当我想增强宏并将参数添加为

```
Sub Macro1( param1 as string, param2 as string)  
 'Do Something  
End Sub 
```

并调用

```
word.Run('Macro1 "Book", "Pool"'); 
```

我收到错误消息
**“无法运行指定的宏”**
如何使用参数调用宏（子）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:20:20.167

您必须像普通参数一样传递宏参数值。

```
word.Run('Macro1', 'Book', 'Pool'); 
```

有关更多信息，请阅读[`Application.Run Method`](http://msdn.microsoft.com/en-us/library/office/bb209121%28v=office.12%29.aspx)MSDN 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:43:57.527

宏代码：

```
Sub TestParams(param1 As String)
   MsgBox "Param1 := enter code here" & param1
End Sub 
```

这对我来说也是一场噩梦，因为一旦您创建带有参数的宏，它就不会显示在宏列表中。

我最终通过执行以下
德尔福代码使其工作：

```
procedure TUtils.RunMacro;
var Test : olevariant;
begin
  Test := 'Hello Word';
  WordApplication.Run('TestParams',Test);
end; 
```

# php - 矩形面积的计算

> ID：11683494
> 
> 赞同：0
> 
> 时间：2012-07-27T07:41:56.317
> 
> 标签：php, doctrine-orm, symfony-2.1

我很难组织我的代码，我想通过一个简单的例子与你分享我的“问题”：计算矩形的面积。我以代码为例，但阅读每个类部分的第一个介绍很容易解释这种情况。

## 实体矩形：

**实体 Rectangle 包含两个重要的属性`$length`和`$width`.**

```
// src/Acme/CalculationBundle/Entity/Rectangle.php

/**
 * @ORM\Entity(repositoryClass="Acme\CalculationBundle\Repository\RectangleRepository")
 * @ORM\Table(name="rectangle")
 */
class Rectangle
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="integer")
     */
    protected $length;

    /**
     * @ORM\Column(type="integer")
     */
    protected $width; 
```

## 形式

当然，用户可以通过表单设置长度和宽度

## 控制器

**CreateRectangleAction：** 在 GET 请求上呈现表单并在 POST 请求上处理数据。

**ViewRectangleAction：**显示矩形。

## 矩形管理器

现在，为了确保控制器不会做太多事情，我使用 RectangleManager 来实现对 Rectangle 对象的常用操作并将其用作服务（注入适当的元素）。

```
// src/Acme/CalculationBundle/Entity/RectangleManager.php
use Doctrine\ORM\EntityManager;
use Doctrine\ORM\EntityRepository;
use Acme\EmployerBundle\Entity\Manager;

class rectangleManager
{
    /**
     * Doctrine entity manager
     * @var EntityManager
     */
    protected $em;

    /**
     * @var EntityRepository
     */
    protected $repository;

    /**
     * 
     * @var string
     */
    protected $class;

    public function __construct(EntityManager $em, $class)
    {
        $this->em = $em;
        $this->class = $class;
        $this->repository = $em->getRepository($class);
    }

    /**
     * @param $id
     * @return Rectangle
     */
    public function find($id)
    {
        $rectangle =  $this->repository->find($id);
    } 
```

## 问题：如果？

**如果我需要对矩形进行一些计算怎么办？**例如，如果我需要添加一个区域属性，以便我可以直接在模板中渲染区域，而无需在模板中进行计算（长度*宽度）？

不知道如何正确执行此操作，我选择了这个非常糟糕的解决方案：

我创建了一个 RectangleDisplay 类（我在其中注入矩形实体）并在控制器中调用 ViewRectangleAction 时显示该实体而不是 Rectangle 实体。

```
// src/Acme/CalculationBundle/Entity/
class RectangleDisplay
{
    /**
     * @var Rectangle $rectangle
     */
    protected $rectangle;

    /**
     * @var Integer 
     */
    protected $area;

    /**
     * @param Rectangle $rectangle
     */
    public function __construct(rectangle $rectangle){

        $this->rectangle = $rectangle;
        //calculate are
        $area = this->calculateArea($this->rectangle->getLength(),$this->rectangle->getWidth());
        $this->area = $area;

    }

    /**
     * @return Integer $area
     */
    public function calculateArea($length,$width)
    {
         return $length * $width;
    } 
```

现在可以在模板中直接访问属性区域。在矩形的情况下，这很好，但在更复杂的元素（圆锥，...）的情况下，我可能想使用一个疯狂计算的服务。我不会将容器注入到我的 RectangleDisplayEntity 中，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:51:14.290

这属于您的实体。

```
class Rectangle
{
    // ...

    public function getArea()
    {
        return $this->length * $this->width;
    }
} 
```

矩形的面积是矩形的一个*属性*。这不是应该委托给另一个服务的疯狂计算，尤其是与显示无关的东西（尽管您可能会认为这是基于它在您的应用程序中显示的）。

现在，如果您正在计算更复杂的东西，那么可能值得转移到服务/另一个类。（服务 = 动词，实体 = 名词及其属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:09:44.950

你试过`RectangleDisplay extends rectangleManager`吗？`extend`这是具有您需要的类的正常方法，具有可用的所有可能属性`parent`和可能`override`的​​功能（[在这里您可以阅读有关它](http://php.net/manual/en/keyword.extends.php)的更多信息）。没有一个类是`final`，所以它不应该是一个问题。[`namespace`](http://php.net/manual/en/language.namespaces.php)不要忘记在你工作的时候考虑到类。

# android - 设备空闲时未调用 setTimeOut 函数 - android Titan mobile？

> ID：11683495
> 
> 赞同：1
> 
> 时间：2012-07-27T07:41:58.517
> 
> 标签：android, mobile, timeout, titanium

我在 20 分钟延迟后调用使用 setTimeOut 的方法。在 iPhone 中它工作正常，但在 20 分钟后在 android 中没有调用该方法。如果我们更改为 1 分钟，则调用该方法。我猜设备在android中闲置可能存在一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:43:39.730

我认为您需要使用 appcelerator 后台服务，但有 10 分钟的限制。

# ocean - 如何向 Ocean 声明我的自定义域对象可以释放内存？

> ID：11683502
> 
> 赞同：1
> 
> 时间：2012-07-27T07:42:18.780
> 
> 标签：ocean, petrel

我想将我的自定义域对象链接到 Petrel 空闲内存命令。我的域对象在可视化时缓存数据，并且当用户想要释放内存时可以清除此缓存。

我找到了 IMemorySaver 接口并尝试在我的自定义域对象上声明它，但是当用户选择释放 Petrel 中的内存时，不会调用 FreeMemory 方法。

有任何想法吗？

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T07:09:31.840

在 Ocean 2013.1 中引入了一个新的 API，它允许在用户调用“空闲内存”功能时告知自定义域对象和来自插件的 ToggleWindows（这也适用于对 PetrelSystem.ForceFreeMemory() 的编程调用） .

该 API 遵循与现有 INameInfoFactory 和 IImageInfoFactory API 类似的模式。

为了使用 API，您需要为实现新 IResourceSaverFactory 接口的自定义域对象（或 ToggleWindow）创建工厂对象。

此接口要求您实现一个名为 GetResourceSaver() 的方法。此方法将返回与您的自定义域对象（或 ToggleWindow）关联的 ResourceSaver 对象。

ResourceSaver 是一个抽象类，您应该在派生类上实现 FreeResources() 方法。

当调用“空闲内存”功能时，系统将使用您的 ResourceSaverFactory 为您的每个自定义域对象（或 ToggleWindow）实例获取 ResourceSaver 对象。

FreeResources() 方法将在您的 ResouceSaver 对象上调用。

问候，

奇皮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:06:33.553

Neal，IMemorySaver 被声明为一个服务接口，你不应该重新实现它。

话虽如此，参与 Petrel 的受控资源管理是一个公平的要求。

# ruby - ruby 中的 TDD/BDD 书籍/教程？

> ID：11683513
> 
> 赞同：2
> 
> 时间：2012-07-27T07:42:57.967
> 
> 标签：ruby, tdd, bdd

我写 ruby​​，但想从 TDD/BDD 开始一个新项目。是否有任何学习 TDD/BDD 的教程或好书。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T10:39:44.320

使用上面提到的关于黄瓜和 rspec 的 peepcode 截屏视频也不错。

链接 [黄瓜](https://peepcode.com/products/cucumber)和[rspec](https://peepcode.com/products/rspec-basics)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T07:44:33.377

我真的很喜欢这本书：[The RSpec Book: Behaviour-Driven Development with RSpec, Cucumber, and Friends](http://pragprog.com/book/achbd/the-rspec-book)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T08:01:39.327

[Cucumber Book](http://pragprog.com/book/hwcuc/the-cucumber-book)是一本很棒的书，虽然很小，但它不会错过任何关于使用 Cucumber 和 Ruby 进行 BDD 的知识。我也强烈推荐[越来越多的面向对象软件](http://www.growing-object-oriented-software.com/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T08:06:56.153

之前的所有答案都集中在**TDD/BDD**（即 rspec）背后的技术上。

如果您正在寻找一种方法来查看/理解整个**过程，**我真的很喜欢[Rails 3 in Action](http://manning.com/katz/)，因为它对整个应用程序进行了 TDD。

它很容易理解，而且非常开放！:)

# ruby-on-rails-3 - 邮件设置在 Rails 3 中不起作用

> ID：11683520
> 
> 赞同：-1
> 
> 时间：2012-07-27T07:43:30.363
> 
> 标签：ruby-on-rails-3

我想发邮件。这是我的`development.rb`设置：

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' }
config.action_mailer.smtp_settings = {
    address: "127.0.0.1",
    port: 25,
    domain: "mydomain.com",
    authentication: "plain",
    #enable_starttls_auto: true,
    user_name: ENV["prem.regmi@braindigit.com "],
    password: ENV[""]
  } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:52:08.163

`ENV`表示环境变量。我不认为你有一个名为`prem.regmi@braindigit.com`. 试试这个：

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' }
config.action_mailer.smtp_settings = {
  address: "127.0.0.1",
  port: 25,
  domain: "mydomain.com",
  authentication: "plain",
  # enable_starttls_auto: true,
  user_name: "prem.regmi@braindigit.com",
  password: ""
} 
```

# javascript - 将 C++ 游戏移植到网络的最佳方式

> ID：11683521
> 
> 赞同：4
> 
> 时间：2012-07-27T07:43:32.553
> 
> 标签：javascript, c++, html, activex, google-nativeclient

我意识到上述问题相当广泛，因此我将其缩小。我有一个简单的 opengl c++ 游戏引擎，它位于静态库中（可以转换为动态库）。

我一直在想办法让它在网络上运行。据我所知，我可以使用 ActiveX 或 Google NaCl 在浏览器中运行 c++ 代码。但这些技术似乎不容易跨平台？或者，也许我误解了。

我见过的另一个选择是将引擎转换为 javascript 和 WebGL 并在 HTML5 画布中运行。这会比 c++ 慢吗？不过，这将是非常跨平台的。

您认为最好的选择是什么，或者更好的是我错过了其他选择吗？

编辑：类似于统一网络播放器的自定义插件怎么样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T07:54:49.190

@kripken 创建了一个仍在开发中的库。它需要 LLVM 位码并转换为 Javascript。

您可以在此处查看项目页面，其中包含工作示例。 [https://github.com/kripken/emscripten/](https://github.com/kripken/emscripten/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T10:20:53.830

我强烈建议移植到 NaCl。

**优点：**

1.  **性能：**您可以使用 CPU 的全部功能来渲染您的游戏。如果您的游戏使用良好的 3D 图形或物理效果，即使在旧系统配置上，您也可以让它看起来很流畅。NaCl 的性能与 Native OS 应用程序相当，当我将相同的游戏与 Win32 版本进行比较时，它仅损失近 5% 到 10% 的 FPS。
2.  有很多已经移植的示例，NaCl 的游戏可以帮助您轻松完成。
3.  它已经是跨平台的了。Chrome 可在 Windows、Linux、Mac OSX 上运行。

**缺点：**

1.  可能需要一周左右的时间才能移植。您必须移植到 OpenGL ES 2.0（但是，它应该与任何基于浏览器的方法相同，尤其是 HTML5）
2.  仅在 Chrome 上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T08:02:16.083

如果你想在浏览器中移植一些东西，那么它必须依赖 Javascript（可能还有 WebGL，尽管 IE 不支持）。

ActiveX 和 NaCL 不能以任何方式、形状或形式进行移植。

我不能说哪个更容易，但是你可以选择用 Javascript 重写你的游戏，或者使用像[Emscripten](https://github.com/kripken/emscripten/)这样的工具将你的 C++ 编译为 JavaScript。

请注意，如果您使用后者，它仍然不是灵丹妙药。您可能必须对代码进行大量更改（例如，因为 C++ 游戏中使用的库和 API 在浏览器上不可用）

# objective-c - 需要 UIPickerView 键盘的帮助

> ID：11683523
> 
> 赞同：0
> 
> 时间：2012-07-27T07:43:51.443
> 
> 标签：objective-c, uitextfield, uipickerview, xcode4.3

目标 c 的新手，这可能是一个简单的错误。我正在尝试关闭`UITextField`我拥有的所有 3 个键盘`UIPickerView`。因此键盘不会出现，只会显示选择器视图。我做了一些研究，但无法弄清楚。这是 .m 文件的代码，它不起作用。

```
-(void)textFieldDidBeginEditing:(UITextField*)textField;
{
    [textField resignFirstResponder];
    modeArray = [[NSMutableArray alloc] init];
    if(textField.tag==1){
        [modeArray addObject:@" bus "];
        [modeArray addObject:@" bus/mrt "];
        tbMode.inputView = pickerView;
        pickerView.hidden = NO;
    }
    else{
        if(textField.tag==2){
            [modeArray addObject:@" 300 "];
            [modeArray addObject:@" 400 "]; 
            [modeArray addObject:@" 500 "];
            tbWalkDist.inputView = pickerView;
            pickerView.hidden = NO;
        }
        else{
            if(textField.tag==3){
                [modeArray addObject:@" cheapest "];
                [modeArray addObject:@" fastest "];
                tbRouteOpt.inputView = pickerView;
                pickerView.hidden = NO;
            }
            else{
                pickerView.hidden=YES;
            }
        }
    }
} 
```

我应该如何关闭只显示选择器视图的键盘？使用这条线`[textField resignFirstResponder];`我可以用来关闭键盘吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:12:38.247

您需要将所有文本字段委托给 viewController，然后使用该方法；

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField // called from textfield (keyboard) 
{
//... place your [textField resignFirstResponder]; logic here
} 
```

确保将文本视图委托协议添加到视图控制器 .h 文件

```
@interface ViewController : UIViewController <UITextViewDelegate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:13:16.680

我不清楚你的问题，但如果你想要这将隐藏键盘，如果你按回车键：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
  [textFieldName resignFirstResponder];
  return YES; 
```

}

# apache - 设置 Apache 集群

> ID：11683526
> 
> 赞同：0
> 
> 时间：2012-07-27T07:44:13.927
> 
> 标签：apache, cluster-computing

我是网络开发的新手，所以我的问题可能很愚蠢。

我想建立一个 Apache 集群。我有四台硬件机器，我想在它们之间分配 http 请求负载。现在我在每台机器上都安装了 Fedora。

目前它可以是简单的*负载平衡*集群，无需任何恢复技术（以防某些服务器出现硬件错误）。当然，我需要开源（免费用于商业用途）软件。

关于我应该学习如何设置这样的环境的软件/教程/书籍有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:49:12.087

Tony Bourke（现在运行 lbdigest.com）的 O'Reilly 书籍“服务器负载平衡”是经典之作。不幸的是，它有点过时了。也许托尼会考虑更新。

如果您真的想要“无恢复技术”，基本的 DNS Round-robin 可能对您有用，但它非常粗糙。有一个名为 Ultramonkey 的开源项目，但我还没有机会弄乱它。提供负载平衡、高可用性等的商业解决方案已经进行了很多开发，包括 Coyote Point 产品（我帮助编写了它）。基于电器的产品今天实际上是相当实惠的。

# wpf - DependencyProperty.OverrideMetadata 覆盖 PropertyChangedCallback

> ID：11683528
> 
> 赞同：2
> 
> 时间：2012-07-27T07:44:22.040
> 
> 标签：wpf, silverlight, dependency-properties

DependencyProperty.OverrideMetadata() 是否也覆盖了 PropertyChangedCallback ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T07:56:01.620

取自这里：http: [//msdn.microsoft.com/en-us/library/ms597491.aspx](http://msdn.microsoft.com/en-us/library/ms597491.aspx)

> 提供的元数据与依赖属性的属性元数据合并，因为它存在于基本所有者上。原始基础元数据中指定的任何特征都将保留；只有那些在新元数据中特别改变的特征才会覆盖基本元数据的特征。如果在新元数据中指定了某些特征，例如 DefaultValue，则会被替换。其他的，例如 PropertyChangedCallback，被组合在一起。

# c# - 将 JSON 字符串反序列化为 .NET 对象时反射太慢

> ID：11683530
> 
> 赞同：1
> 
> 时间：2012-07-27T07:44:30.727
> 
> 标签：c#, json, optimization, serialization, reflection

我在 C# 中遇到了 System.Reflection 的一些问题。我正在从数据库中提取数据并在 JSON 字符串中检索该数据。我已经使用反射实现了将 JSON 中的数据处理到我自己声明的对象中的实现。但是，由于我通常会得到一个包含 50 - 100 个对象的数组的 JSON 字符串，因此我的程序运行速度非常慢，因为我使用反射的循环。

我听说反射很慢，但不应该这么慢。我觉得我的实现有些不对劲，因为我有一个不同的项目，我在其中使用 JSON.NET 序列化程序并用反射实例化我的对象有点不同，反射在相同的输出上运行得很好（不到一秒），而我的慢程序需要50 个对象大约需要 10 秒。

以下是我用来存储数据的课程

```
class DC_Host
{
    public string name;

    public void printProperties()
    {
        //Prints all properties of a class usign reflection
        //Doesn't really matter, since I'm not usign this for processing
    }
}

class Host : DC_Host
{
    public string asset_tag;
    public string assigned;
    public string assigned_to;
    public string attributes;
    public bool? can_print;
    public string category;
    public bool? cd_rom;
    public int? cd_speed;
    public string change_control;
    public string chassis_type;
    //And some more properties (around 70 - 80 fields in total) 
```

您将在下面找到我将信息处理为存储在列表中的对象的方法。JSON 数据存储在一个字典中，该字典包含另一个字典，用于在 JSON 输入中定义的每个数组对象。反序列化 JSON 会在几毫秒内发生，所以那里不应该有问题。

```
public List<DC_Host> readJSONTtoHost(ref Dictionary<string, dynamic> json)
{
    bool array = isContainer();

    List<DC_Host> hosts = new List<DC_Host>();

    //Do different processing on objects depending on table type (array/single)
    if (array)
    {
        foreach (Dictionary<string, dynamic> obj in json[json.First().Key])
        {
            hosts.Add(reflectToObject(obj));
        }
    }
    else
    {
        hosts.Add(reflectToObject(json[json.First().Key]));
    }

    return hosts;
}

private DC_Host reflectToObject(Dictionary<string,dynamic> obj)
{
    Host h = new Host();

    FieldInfo[] fields = h.GetType().GetFields();

    foreach (FieldInfo f in fields)
    {
        Object value = null;

        /* IF there are values that are not in the dictionairy or where wrong conversion is
         * utilised the values will not be processed and therefore not inserted into the 
         * host object or just ignored. On a later stage I might post specific error messages
         * in the Catch module. */

        /* TODO : Optimize and find out why this is soo slow */
        try
        {
            value = obj[convTable[f.Name]];
        }
        catch { }

        if (value == null)
        {
            f.SetValue(h, null);
            continue;
        }
        // Het systeem werkt met list containers, MAAAR dan mogen er geen losse values zijn dus dit hangt
        // zeer sterk af van de implementatie van Service Now.
        if (f.FieldType == typeof(List<int?>)) //Arrays voor strings,ints en bools dus nog definieren 
        {
            int count = obj[convTable[f.Name]].Count;
            List<int?> temp = new List<int?>();
            for (int i = 0; i < count; i++)
            {
                temp.Add(obj[convTable[f.Name]][i]);
                f.SetValue(h, temp);
            }
        }
        else if (f.FieldType == typeof(int?))
            f.SetValue(h, int.Parse((string)value));
        else if (f.FieldType == typeof(bool?))
            f.SetValue(h, bool.Parse((string)value));
        else
            f.SetValue(h, (string)value);
    }

    Console.WriteLine("Processed " + h.name);

    return h;
} 
```

我不确定 JSON.NET 在后台使用反射的实现是什么，但我假设他们使用我缺少的东西来优化他们的反射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:02:35.113

基本上，像这样的高性能代码倾向于广泛使用元编程；很多`ILGenerator`等等（或者`Expression`/`CodeDom`如果你觉得这很可怕）。PetaPoco 今天早些时候展示了一个类似的例子：[防止 DynamicMethod VerificationException - 操作可能会破坏运行时](https://stackoverflow.com/q/11680490/23354)

您还可以查看其他序列化引擎的代码，例如 protobuf-net，它具有大量的元编程。

如果你不想走*那么*远，你可以看看[FastMember](http://nuget.org/packages/FastMember)，它为你处理疯狂的事情，所以你只需要担心对象/成员名称/值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:13:41.050

对于遇到这篇文章的人，我将在这里发布我对我的问题的解决方案。这个问题与反思无关。有一些方法可以使用反射来提高速度，比如 CodesInChaos 和 Marc Gravell 提到，Marc 甚至为没有太多低级反射经验的人创建了一个非常有用的库（FastMember）。

然而，解决方案与反射本身无关。我有一个 Try Catch 语句来评估我的字典中是否存在值。使用 try catch 语句来处理程序流不是一个好主意。处理异常对性能很重要，尤其是在运行调试器时，Try Catch 语句会严重影响性能。

```
//New implementation, use TryGetValue from Dictionary to check for excising values.
dynamic value = null;
obj.TryGetValue(convTable[f.Name], out value); 
```

由于我省略了 TryCatch 语句，我的程序现在运行得非常好。

# c# - 实体框架：在存储库中获取子类对象

> ID：11683536
> 
> 赞同：-1
> 
> 时间：2012-07-27T07:44:52.187
> 
> 标签：c#, .net, entity-framework, design-patterns, domain-driven-design

我有以下模型对应于下面列出的数据库表。

经理是雇员。会计师也是雇员。

1.  在存储库中获取所有管理器的最佳方法是什么？如何实现 GetAllManagers() 方法？
2.  它是正确的TPT吗？

![在此处输入图像描述](../Images/8073de4d080bdecd7659bec9d88f9050.png)

代码

```
MyRepository.MyEmployeeRepository rep = new MyEmployeeRepository();
List<Employee> e = rep.GetAllEmployees();

public class MyEmployeeRepository
{
    private string connectionStringVal;
    public MyEmployeeRepository()
    {
        SqlConnectionStringBuilder sqlBuilder = new SqlConnectionStringBuilder();
        sqlBuilder.DataSource = ".";
        sqlBuilder.InitialCatalog = "LibraryReservationSystem";
        sqlBuilder.IntegratedSecurity = true;

        // Initialize the EntityConnectionStringBuilder.
        EntityConnectionStringBuilder entityBuilder = new EntityConnectionStringBuilder();
        entityBuilder.Provider = "System.Data.SqlClient";
        entityBuilder.ProviderConnectionString = sqlBuilder.ToString();
        entityBuilder.Metadata = @"res://*/Test.csdl|res://*/Test.ssdl|res://*/Test.msl";

        connectionStringVal = entityBuilder.ToString();

    }

    public List<Employee> GetAllEmployees()
    {

        List<Employee> employees = new List<Employee>();
        using (var context = new MyEntityDataModelEDM.LibraryReservationSystemEntities1(connectionStringVal))
        {
            foreach (MyEntityDataModelEDM.Employee p in context.Employees)
            {
                employees.Add(p);
            }
        }

        return employees;
    }

    public List<Manager> GetAllManagers()
    {

        List<Manager> managers = new List<Manager>();
        using (var context = new MyEntityDataModelEDM.LibraryReservationSystemEntities1(connectionStringVal))
        {

        }

        return managers;
    }

} 
```

**编辑**

这个模型有缺点。应考虑以下几点：

1.  可以在没有任何角色的情况下创建员工。
2.  一名员工可以担任多个角色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:48:06.997

做就是了：

```
return context.Employees.OfType<Accountant>().ToList() 
```

然而，这是对员工进行建模的一种非常糟糕的方式。如果会计师换工作，您需要杀死并重新创建该对象。

[请参阅我对域模型中的继承与枚举属性的](https://stackoverflow.com/questions/4254182/inheritance-vs-enum-properties-in-the-domain-model/4254783#4254783)回答。

# objective-c - popViewControllerAnimated 会影响 viewwillappear 吗？

> ID：11683537
> 
> 赞同：2
> 
> 时间：2012-07-27T07:44:53.317
> 
> 标签：objective-c, uiviewcontroller, pushviewcontroller, viewwillappear, popviewcontrolleranimated

我有两节课。让我们说A，B类。从 A 类 pushviewController 被调用，然后会出现 B 类。那么问题来了。当我从 B 类调用 popviewcontrolleranimated 方法时，它会返回到 A，但是随后两个类的 viewwillappear 方法都被调用了。所以任何人都可以告诉我这里发生了什么。我被困住了！下面是A类。

```
@implementation ShakeViewController

- (id) init {
if (self = [super init]) {
    movieName = @"04";
    self.view = [[[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]] autorelease];
    [self.view setBackgroundColor:[UIColor whiteColor]];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"shake_it.png"]];
    [self.view addSubview:imageView];
    [imageView release];
    nextController = [[OtsugeViewController alloc] init];
}    
return self;
} 

- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
const float violence = 1.2;
static BOOL beenhere;
BOOL shake = FALSE;

if (beenhere) return;
beenhere = TRUE;

if (acceleration.x > violence || acceleration.x < (-1* violence))
    shake = TRUE;
if (acceleration.y > violence || acceleration.y < (-1* violence))
    shake = TRUE;
if (acceleration.z > violence || acceleration.z < (-1* violence))
    shake = TRUE;
if (shake && mPlayerPushed) {
    [self playSound:@"suzu"];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"noVib"] == NO) {
        AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);
    }

    [[UIAccelerometer sharedAccelerometer] setDelegate:nil];
    [self presentModalViewController:mMoviePlayer animated:YES];
    [self play];
    mPlayerPushed = YES;
}

beenhere = false;
}

- (void)toNext {
NSLog(@"ShakeViewController:toNext");
[self.navigationController pushViewController:nextController animated:NO];
}

- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
NSLog(@"Shake:viewWillAppear");
}

- (void)viewDidAppear:(BOOL)animated{
[super viewDidAppear:animated];
[[UIAccelerometer sharedAccelerometer] setDelegate:self];
[[UIAccelerometer sharedAccelerometer] setUpdateInterval:0.5];
}

- (void)dealloc {
[super dealloc];
}

@end 
```

这是B级

```
@implementation OtsugeViewController

- (id) init {
if (self = [super init]) {
    movieName = @"03";
    self.view = [[[OtsugeView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]] autorelease];
}
return self;
}

- (void) toNext {
NSLog(@"OtsugeViewController:toNext");
[self.navigationController popViewControllerAnimated:NO];
}

- (void) toToppage
{
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:NO];        

[self.navigationController popToRootViewControllerAnimated:NO];
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
NSLog(@"Screen touch Otsuge View");
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                          delegate:self 
                                                        cancelButtonTitle:@"Cancel"  destructiveButtonTitle:nil
                                                otherButtonTitles:@"Retry", @"Main Menu", nil];
actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;

actionSheet.cancelButtonIndex = 0;
[actionSheet showInView:self.view]; 
[actionSheet release];
}

- (void) actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex: (NSInteger)buttonIndex
{
switch (buttonIndex) {
    case 0: // Retry
        [self presentModalViewController:mMoviePlayer animated:YES];
        [self play];
        break;
    case 1: // Main Menu
        [self toToppage];
        break;
    case 2: // Cancel
        break;
    default:
        break;
}
}

- (void) viewWillAppear:(BOOL)animated {
mMoviePlayer.moviePlayer.backgroundView.backgroundColor = [UIColor blackColor];
[self playSound:@"taiko_1"];
NSLog(@"Otsuge:viewWillAppear");
[(OtsugeView *)self.view renewImageView];

[super viewWillAppear:animated];
}

- (void) viewDidAppear:(BOOL)animated{
NSLog(@"Otsuge:viewDidAppear");
[super viewDidAppear:animated];
}

- (void) dealloc {
[super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:06:21.230

这是正常的。每次出现视图时都会调用视图。如果您只想在视图第一次出现时调用方法，请使用 -viewdidload，因为在视图控制器中，堆栈中的每个视图都保存在内存中，但您弹出的视图会被释放。

# sitecore - Sitecore 声明是否知晓？

> ID：11683545
> 
> 赞同：1
> 
> 时间：2012-07-27T07:45:20.387
> 
> 标签：sitecore, sitecore6, adfs

我们希望将 ADFS 与我们的 Sitecore (6.4) 解决方案一起使用来验证用户。我们的 DMZ 中有一个 ADFS 代理，我们公司域中有一个 ADFS 服务器，我们的 Sitecore 解决方案在其他地方为我们托管。

我们被告知，如果 Sitecore 完全支持声明（即可以在不需要 Windows 登录会话的情况下使用联合声明），那么这个基本的基础架构就足够了。

如果 Sitecore 没有完全了解声明，那么我们需要建立一个外部域，在我们的 Sitecore 主机上使用域控制器和联合服务器。

那么，Sitecore 是否完全了解声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:57:52.830

您不太可能开箱即用。在此处查看有关 Sitecore 和 Windows Identity Foundation 的最新博客条目：[http ://webcmd.wordpress.com/2012/07/09/federated-authentication-with-sitecore-and-the-windows-identity-foundation/](http://webcmd.wordpress.com/2012/07/09/federated-authentication-with-sitecore-and-the-windows-identity-foundation/)

# android - 从 setOnItemClickListener 中的列表视图项中获取字符串

> ID：11683547
> 
> 赞同：4
> 
> 时间：2012-07-27T07:45:23.860
> 
> 标签：android, android-listview

我想知道如何从单击的列表视图的项目中获取字符串。例如，我有一个这种格式的条目。

＃ - 约翰·史密斯

john@gmail.com

3451234532

纽约

我想得到约翰史密斯。我可以在那个位置拿到物品，但我不知道其余的。

我的代码：

```
package com.example.deneme;
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class Activity2 extends Activity {

private SQLiteAdapter mySQLiteAdapter;
 ListView listContent;
 SimpleCursorAdapter cursorAdapter;
 Cursor cursor;
 Button buttonDeleteAll,buttonDeleteRow;

public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.activity2);

buttonDeleteAll = (Button)findViewById(R.id.deleteall);
buttonDeleteRow = (Button)findViewById(R.id.deleterow); 
listContent = (ListView)findViewById(R.id.contentlist);
listContent.setClickable(true);
buttonDeleteAll.setOnClickListener(buttonDeleteAllOnClickListener);
buttonDeleteRow.setOnClickListener(buttonDeleteRowOnClickListener);

mySQLiteAdapter = new SQLiteAdapter(this);
mySQLiteAdapter.openToWrite();

cursor = mySQLiteAdapter.queueAll();
String[] from = new String[]{ SQLiteAdapter.COLUMN_NAME, SQLiteAdapter.COLUMN_EMAIL,SQLiteAdapter.COLUMN_PHONE, SQLiteAdapter.COLUMN_ADDRESS};

int[] to = new int[]{R.id.text1, R.id.text2,R.id.text3, R.id.text4};

cursorAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
listContent.setAdapter(cursorAdapter);

listContent.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {

        String str = ((TextView)arg1).getText().toString();
        Toast.makeText(Activity2.this, str, Toast.LENGTH_SHORT).show();
    }
});

}

   Button.OnClickListener buttonDeleteRowOnClickListener = new Button.OnClickListener(){

       public void onClick(View arg0) {

     //    String n = inputContent1.getText().toString();
     //    mySQLiteAdapter.deleteRow(n);
           updateList();
           Toast.makeText(Activity2.this, "Entry Deleted", Toast.LENGTH_SHORT).show();      

       }
        };

        Button.OnClickListener buttonDeleteAllOnClickListener
        = new Button.OnClickListener(){
       public void onClick(View arg0) {

        mySQLiteAdapter.deleteAll();
        updateList();
        Toast.makeText(Activity2.this, "All Entries Deleted", Toast.LENGTH_SHORT).show();      

       }
        };

        private void updateList(){
              cursor.requery();
               }
} 
```

使用你的方式后，我得到了这些错误：

```
07-27 07:52:15.726: E/AndroidRuntime(856): FATAL EXCEPTION: main
07-27 07:52:15.726: E/AndroidRuntime(856): java.lang.ClassCastException:              android.widget.LinearLayout
07-27 07:52:15.726: E/AndroidRuntime(856):  at  com.example.deneme.Activity2$3.onItemClick(Activity2.java:58)
07-27 07:52:15.726: E/AndroidRuntime(856):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
07-27 07:52:15.726: E/AndroidRuntime(856):  at android.widget.ListView.performItemClick(ListView.java:3513)
07-27 07:52:15.726: E/AndroidRuntime(856):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:49:49.880

好吧，这取决于您在列表视图中填充了什么。如果这些是 TextView，那么您所要做的就是：

```
((TextView)arg1).getText().toString() 
```

本质`View arg1`上是点击的视图。鉴于您已经填充了该列表，您知道该视图是什么，因为您是创建并返回它的人（在您的适配器中）：

```
public View getView(int position, View convertView, ViewGroup parent) 
```

因此，无论该视图的类型如何，请检查其文档以了解如何从中获取文本

## 编辑：

好吧，您正在使用的光标适配器为每一行返回一个 LinearLayout。它有几个 TextView，每个选定的列都有一个。要获得第一列，请执行以下操作：

```
LinearLayout row = (LinearLayout)((LinearLayout)arg1).getChildAt(0);
TextView column = (TextView)row.getChildAt(0);
String text = column.getText().toString(); 
```

如果您想要不同的列，只需将参数更改为`getChildAt(i)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T08:23:13.787

```
listContent.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView parent, View v, int position, long id) {
        Cursor cursor = (Cursor) parent.getItemAtPosition(position);
        String name = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.COLUMN_EMAIL));
        Toast.makeText(Activity2.this, name, Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:48:58.913

要获取文本，只需使用

```
String item = ((TextView)arg1).getText().toString(); 
```

另一方面，如果您将实现的函数的参数重命名为：

```
public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) 
```

现在您可以清楚地看到每个参数的作用。

# c# - 在 DVI 和 VGA 之间切换

> ID：11683560
> 
> 赞同：2
> 
> 时间：2012-07-27T07:46:17.230
> 
> 标签：c#, monitor, vga, dvi

有没有办法在 C# 中以编程方式将显示器的输入从 VGA 切换到 DVI？我在这里找到了一篇关于如何打开或关闭它的[文章](http://www.codeproject.com/Articles/12794/Complete-Guide-on-How-To-Turn-A-Monitor-On-Off-Sta)。有什么建议么 ？

# javascript - 在使用带有 asp.net 的 jquery 验证插件时这可能吗

> ID：11683563
> 
> 赞同：1
> 
> 时间：2012-07-27T07:46:24.580
> 
> 标签：javascript, jquery, jquery-validate

我想像这样传递文件的名称属性...

```
rules: {               
             '($(txtFName).attr('name'))': {
             required: true,
             No_Spl_Char: "DFT"
             }
    }, 
```

这不起作用，我似乎找不到任何其他方法来传递名称属性。我也使用 UniqueID 来获取名称属性，但表单字段位于不同的控件中，因此它不起作用。任何人都可以提出更聪明的方法来获取名称属性并通过。帮助总是受到赞赏。

我有多个规则和消息......我不能再使用 UniqueID，因为一些文件在不同的控件中而不是在同一个控件中。

```
$(document).ready(function() {
    // validate the comment form when it is submitted
    $("#aspnetForm").validate({
    onfocusout: function(element) { $(element).valid(); },
    success: function(label) {
       label.addClass("validfld");
    },
    validClass: "validfld",  
    rules: {
            <%=txtFNameRoom.UniqueID%>: {
             required: true,
             No_Spl_Char: true
             },
             <%=txtLNameRoom.UniqueID%>: {
             required: true,
             No_Spl_Char: true
             },
             <%=txtEmail.UniqueID%>: {
             required: true,
             email: true
             },
             <%=ddlCountry.UniqueID%>: {
             required: true,
             valueNotEquals: "DFT"
             },
             <%=ddlMobileNumber.UniqueID%>: {
             required: true,
             valueNotEquals: "DFT"
             },
             <%=txtTelephone.UniqueID%>: {
             required: true,
             digits: true
             },
             <%=DropDownList1.UniqueID%>: {
             required: true,
             valueNotEquals: "DFT"
             }
    },
    messages: {
        <%=txtFNameRoom.UniqueID%>:{
            required: "Please enter your firstname.",
            No_Spl_Char: "Special Characters are not allowed."
        },
        <%=txtLNameRoom.UniqueID%>:{
            required: "Please enter your lastname.",
            No_Spl_Char: "Special Characters are not allowed."
        },
        <%=txtEmail.UniqueID%>:{
        required: "Please enter your email.",
        email: "Please enter valid email."
        },
        <%=ddlCountry.UniqueID%>:{
        required: "Please select your country.",
        valueNotEquals: "Please select your country."
        },
        <%=ddlMobileNumber.UniqueID%>: "Please enter your country code.",
        <%=txtTelephone.UniqueID%>:{
        required: "Please enter your email.",
        digits: "Please enter only digits."
        },
        <%=DropDownList1.UniqueID%>: "Please select your bed preference."

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:48:40.007

你可以试试这个：

```
var rulesObject = {};
rulesObject[$(txtFName).attr('name')] = {
   required: true,
   No_Spl_Char: "DFT"
};
rulesObject['<%=txtFNameRoom.UniqueID%>'] = {
    required: true,
    No_Spl_Char: true
};
rulesObject['<%=ddlCountry.UniqueID%>'] = {
    required: true,
    valueNotEquals: "DFT"
};
//etc...

//then

$("#aspnetForm").validate({
     //......
     rules: rulesObject
     //...... 
```

# mysql - 右连接不起作用

> ID：11683566
> 
> 赞同：0
> 
> 时间：2012-07-27T07:46:36.327
> 
> 标签：mysql, join

```
SELECT
  Student.id,
  Student.first_name,
  Student.last_name, 
  count(`Attendance`.`id`) as total 
FROM `karate`.`attendances` AS `Attendance` 
RIGHT JOIN `karate`.`students` AS `Student` ON (`Attendance`.`student_id` = `Student`.`id`)
WHERE 1
  AND `Attendance`.`attendance_date` BETWEEN '2012-07-01' AND '2012-07-31' 
  AND (Student.active = '1') 
  AND (Student.type = 'student') 
GROUP BY `Student`.`id` 
ORDER BY total ASC 
```

我希望所有学生记录在给定的日期范围内有出勤总数，但它只显示有出勤的学生的两个记录。但如果我们删除日期检查条件，它工作正常。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:26:51.487

这是因为`attendance_date`对于右连接的行，其值为 NULL。您需要在您的情况中包含此案例：

```
WHERE 1
  AND (`Attendance`.`attendance_date` IS NULL
         OR `Attendance`.`attendance_date` BETWEEN '2012-07-01' AND '2012-07-31')
  AND (Student.active = '1') 
  AND (Student.type = 'student') 
```

# php - php 修饰符和缓存概念

> ID：11683567
> 
> 赞同：0
> 
> 时间：2012-07-27T07:46:36.123
> 
> 标签：php, caching, browser-cache

Php 在 java 中是否有任何修饰符，如“持久”？

我的目的是将从数据库中检索到的结果集存储到服务器 RAM 上。当用户下次搜索相同的值时，我不会再去数据库检索。简单地说，我想模拟 RAM 上的缓存。

我没有线索。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:54:34.553

不，不是。

您可以将结果缓存到文件中，然后加载它，或者在数据库前面使用[memcached之类的东西来获得这种行为。](http://memcached.org/)

或者，您可以将数据存储在 $_SESSION 中，但这当然是针对每个用户而不是全局的。

# java - HTTP 请求中的转义斜杠

> ID：11683569
> 
> 赞同：3
> 
> 时间：2012-07-27T07:46:59.680
> 
> 标签：java, http, url, tomcat, jetty

我从 Javascript 向 Java Web 应用程序执行 http **DELETE请求。**该网络应用程序使用**Jersey**来发送 url。棘手的是，我正在使用包含正斜杠的路径参数（例如**"XX/6666"**）。当我在**Jetty**（maven 插件）中运行时，它工作正常，但是当我在生产服务器（**Tomcat**）上运行时，它没有，即我得到一个**404**。

正斜杠使用 %2F 转义，所以我的请求 URL 看起来像

删除`http://.../4776/shipmentOrders/XX%2F6666`

这在 http 规范中是否允许，Jetty 和 Tomcat 是否有可能以不同的方式解释这些？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T22:17:12.363

Tomcat（我相信在版本 5、6 和 7 中）有目的地阻止在路径中使用 %2f 以防止目录遍历攻击。据称，您可以通过设置 org.apache.tomcat.util.buf 来关闭此保护。UDecoder.ALLOW_ENCODED_SLASH=true。我没有亲自测试过，但看到网上其他人声称它为他们解决了这个问题。但是请注意，Tomcat 前面的 Web 服务器也可能拦截并重写 URL，自动将 %2f 解码为正斜杠。

参考：http: [//tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html](http://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:05:04.877

是的，两者都允许：这是允许的，但出于安全原因，某些服务器可能会拒绝该请求。

# c# - 实现轻量级 TransactionScope

> ID：11683572
> 
> 赞同：2
> 
> 时间：2012-07-27T07:47:10.777
> 
> 标签：c#, ado.net, transactionscope, dapper, micro-orm

我指的是这个 SO 问题： [Bulk inserts takes longer than expected using Dapper](https://stackoverflow.com/questions/10689779/bulk-inserts-taking-longer-than-expected-using-dapper)

以及对这个问题的@SamSaffron 评论：

*“TransactionScope 做了一堆你通常不关心的 DTC 废话，除非我需要那个功能，否则会避免它，很容易滚动你自己的上下文附加到线程本地存储”*

我知道如何通过使用附加到`[ThreadStatic]`变量的事务来滚动我自己的 TransactionManager，但是是否有一些可靠的方法来**模拟**这样`TransactionScope`命令将自动登记我的事务？最终产品将是一个没有我们任何 MSDTC 管道的事务范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:35:07.610

是的，请看我的[TextMetal](http://code.google.com/p/textmetal/)项目，示例代码，并注意 Plumbing 命名空间。如果您有任何问题，请给我发电子邮件。没有 MSDTC，只有 ADO.NET、工作单元模式和一些精心设计的数据访问代码！

# javascript - 如果选中某些单选按钮，如何制作动态结果？

> ID：11683573
> 
> 赞同：0
> 
> 时间：2012-07-27T07:47:10.763
> 
> 标签：javascript, jquery, html, dom, radio-button

```
<script type="text/javascript>
     $("input[type=checkbox]").on('change', function() {
         var val = this.value;
         var dataSplit = val.split("_");
         if (this.checked) {
            var result = '<div id="div'+dataSplit[0]+'"><input type="radio" class="choosen" name="rdb" value="'+val+'" id="'+dataSplit[0]+'" /><label class="'+dataSplit[0]+'">'+dataSplit[1]+'</label><br /></div>';
            $("#resultrdb").append(result);
         }else{
             $('#div'+dataSplit[0]).remove();
         }
    });

    $("#btnsubmitIndustry").click(function(){
         var n = $(".choosen").length;
         var valPrimary = $(".choosen:checked").val();
         var valSecondary = $(".choosen:not(:checked)").val();
         var data='<ul>';
         data += '<li>Primary = '+valPrimary+'</li><li>Secondary:'+valSecondary+'</li>';
         data += '</ul>';

         $("#result").html(data);
     });    ​
</script> 
```

在这里我可以获得 1 个未选中单选的值，那么我怎样才能获得另一个未选中单选按钮的值？我想让结果动态，我想我应该使用循环？示例：如果有 3 个单选，并且单击了 1 个，我想在结果中显示主要（单击的单选值）、次要和第三个数据

谢谢

小提琴= [http://jsfiddle.net/F3muF/8/](http://jsfiddle.net/F3muF/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:59:43.667

```
var data = '<ul><li>' + $('.choosen:checked').val() + '</li>';

$('.choosen:not(:checked)').each(function () {
  data += '<li>' + $(this).val() + '</li>';
});

data += '</ul>';

$("#result").html(data); 
```

# winforms - .NET WinForms 本地化 - 如何根据文本长度制作控件位置

> ID：11683577
> 
> 赞同：2
> 
> 时间：2012-07-27T07:47:35.813
> 
> 标签：winforms, localization, positioning, anchor

我正在通过附属程序集本地化 WinForms 应用程序。我面临的问题是，当我从英语切换到其他语言（例如日语）时，由于文本的变化，标签会重叠（或落后）组合框。文本的更改导致标签宽度增加，从而使它们跳转到其他控件。

有没有办法（可能通过锚定）来克服这个问题，以便组合框自动减小它们的宽度以补偿标签大小的增加？类似于将 WRT 锚定为控件而不是表单。

**更新**
确定。我想我已经找到了解决这个问题的方法。Form 有一个**Language**属性，用于设置 Form 的特定语言属性。如果我将其更改为日语并更改表单布局和控件位置，那么这些特定于语言的项目将存储在每个表单的新 .RESX 文件中。卫星程序集仍将用于提供本地化字符串，但这些 RESX 文件将相应地调整表单元素的大小。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:02:02.563

Form 有一个 Language 属性，用于设置 Form 的特定语言属性。如果我将其更改为日语并更改表单布局和控件位置，那么这些特定于语言的项目将存储在每个表单的新 .RESX 文件中。卫星程序集仍将用于提供本地化字符串，但这些 RESX 文件将相应地调整表单元素的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:00:42.857

我不知道任何可以令人满意地解决您的问题的方法。
有属性**AutoEllipsis=True**（使用**AutoSize=False**）可以缓解这种情况。

如果设置为 True，则当文本超出标签尺寸时，此属性会在标签右侧插入三个点。将鼠标放在标签上将显示带有全文的工具提示。

# email - 正在使用我的域发送垃圾邮件，我该怎么办？

> ID：11683580
> 
> 赞同：10
> 
> 时间：2012-07-27T07:47:48.167
> 
> 标签：email, dns, google-apps, spam

自从它发布以来，我一直在使用 Google Apps FYD 进行`stackednotion.com`. 我发送的所有电子邮件都通过 Google 的服务器，我使用 Gmail 查看我的电子邮件。我以前没有遇到过任何问题，但最近我看到奇怪的反弹最终出现在全能账户中。看起来有人在使用我的域发送垃圾邮件。我真的不希望我的域被标记为坏名声，那么我该如何阻止呢？

我按照 Google Apps 上的指南在域上设置了 SPF、DMARC 和 DKIM，这是我的区域文件：

```
; stackednotion.com [9548]
$TTL 86400
@   IN  SOA ns1.linode.com. luca.stackednotion.com. 2012072633 7200 7200 1209600 86400
@       NS  ns1.linode.com.
@       NS  ns2.linode.com.
@       NS  ns3.linode.com.
@       NS  ns4.linode.com.
@       NS  ns5.linode.com.
@           MX  1   ASPMX.L.GOOGLE.COM.
@           MX  5   ALT1.ASPMX.L.GOOGLE.COM.
@           MX  5   ALT2.ASPMX.L.GOOGLE.COM.
@           MX  10  ASPMX2.GOOGLEMAIL.COM.
@           MX  10  ASPMX3.GOOGLEMAIL.COM.
@           MX  30  ASPMX4.GOOGLEMAIL.COM.
@           MX  30  ASPMX5.GOOGLEMAIL.COM.
@           TXT "v=spf1 include:_spf.google.com ~all"
google._domainkey           TXT "v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDi19ipSdqDEpnJEWrVF7MarSLnlzXi0wPOHws2BY6oMQInbY5OHzdw9LcFr1biVvipErm4odyJfjZAIp5s8r6z50ZxQdW5Uwdy9krA1A9HMPaqVN+fm2xpntU//uXn0wD8sGc9CljYQIl+MusxQ690PfVGnAz/QeLqaZFxpHHmmQIDAQAB"
_dmarc          TXT "v=DMARC1; p=quarantine; rua=mailto:dmarc@stackednotion.com"
@           A   178.79.164.64
*           A   178.79.164.64
_xmpp-server._tcp       SRV 5 0 5269 xmpp-server.l.google.com.
_xmpp-server._tcp       SRV 20 0 5269 alt1.xmpp-server.l.google.com. 
```

这里还有垃圾邮件的标题（有人试图订阅我到 Zend 邮件列表，他们是什么样的病人？！？）：

```
Return-Path: <F776387@stackednotion.com>
Received: (qmail 20117 invoked from network); 27 Jul 2012 06:51:01 -0000
Received: from exprod7mx200.postini.com (HELO psmtp.com) (64.18.2.92)
  by rsmx2.zend.com with SMTP; 27 Jul 2012 06:51:01 -0000
Received: from source ([188.51.41.223]) by exprod7mx200.postini.com ([64.18.6.13]) with SMTP;
        Fri, 27 Jul 2012 02:51:00 EDT
To: <fw-docs-subscribe@lists.zend.com>
Subject: Invoice #48469883494
From: "Order" <F776387@stackednotion.com>
Date: Sat, 28 Jul 2012 09:40:03 +0300
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: IPS PHP Mailer
MIME-Version: 1.0
Content-type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
Message-ID: <20120728094003.9312B884F9D66F02CE7C@DELL-PC>
X-pstn-neptune: 500/484/0.97/100
X-pstn-levels:     (S: 0.00346/89.11253 CV:99.9000 FC:95.5390 LC:95.5390 R:95.9108 P:95.9108 M:97.0282 C:98.6951 )
X-pstn-dkim: 0 skipp 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-01T19:49:31.610

目前，减少不法分子[据称从您的域发送垃圾邮件的](https://en.wikipedia.org/wiki/Joe_job)方法是通知其他邮件服务器允许哪些服务器代表您的域发送邮件。机制是[SPF](http://www.openspf.org)，您已经有 SPF 记录：

```
TXT "v=spf1 include:_spf.google.com ~all" 
```

如果您希望阻止伪造尝试，则可以对此进行改进。阅读[SPF 记录语法页面](http://www.openspf.org/SPF_Record_Syntax)，该页面描述了您的 SPF 策略应该是什么。如果您有其他邮件服务器代表您的域发送邮件，请将它们添加到 SPF 记录并将您的策略​​更改为失败：

```
TXT "v=spf1 include:_spf.google.com -all" 
```

由于 SPF 部署如此广泛，这将产生影响。但是 SPF 存在 SPF 策略失败的边缘情况（转发、电子邮件列表等），因此大多数站点选择比您要求的更自由的 SPF 策略。例如，如果您的策略设置为拒绝，并且消息似乎来自电子邮件列表，大多数服务器都会以某种方式对其进行注释（为此目的定义了[Authentication-Results 标头）并允许它通过。](https://www.rfc-editor.org/rfc/rfc7001)

这就是[DMARC](http://www.dmarc.org)的用武之地。您已经添加了 DMARC 记录：

```
_dmarc TXT "v=DMARC1; p=quarantine; rua=mailto:dmarc@stackednotion.com" 
```

您的政策只是隔离失败的 DMARC 邮件。如果 DMARC 报告没有表明任何有效消息被阻止，并且/或者您愿意忍受一些有效消息被拒绝的极端情况，那么您可以使用 p=reject 对此进行改进。

毫不奇怪，由于垃圾邮件声称来自我的域之一而从邮件服务器退回，这正是迫使我开始[DKIM](http://www.dkim.org)对我的邮件进行签名的原因，以便我可以部署 DMARC。DMARC 是一种结合了 SPF 和 DKIM 的策略机制，因此域所有者可以向其他邮件服务器断言，“如果它不在此 IP 列表 (SPF) 中并且它没有经过 DKIM 签名，那么 [reject|quarantine|allow] 它。”

DMARC 工作出色。现在我收到 DMARC 报告，而不是收到退回邮件。我使用[Mail::DMARC](http://search.cpan.org/perldoc?Mail%3A%3ADMARC)解析报告并将摘要放入数据库。

DMARC 仍是 IETF 草案，并未广泛部署。但是，大多数大型电子邮件提供商都实施了它，并且覆盖范围非常好。在为我的域部署 DMARC 后，我为[Qpsmtpd](https://github.com/smtpd/qpsmtpd)编写了一个 DMARC 插件，因此我可以根据 DMARC 策略验证传入消息。作为 DMARC 操作员，我在[DMARC 常见问题解答](https://github.com/smtpd/qpsmtpd/wiki/DMARC-FAQ)中发表了我的一些发现。

我之前提到了边缘情况，所以我觉得有必要分享一个。

Google 通过将未对齐的邮件（SPF 和 DKIM 对齐失败的邮件）放入用户垃圾邮件文件夹来处理它们。我已经熟悉这一点，因为从我的域发送的电子邮件通常会被 gmail 很好地处理。通过某些电子邮件列表（例如 dmarc-discuss@dmarc.org）转发的消息除外。我发送到该列表的消息被列表处理软件修改，使我的 DKIM 签名无效。当邮件转发给 gmail 收件人时，这些邮件被标记为垃圾邮件，因为 a) 我发布了拒绝 DMARC 策略，b) 该电子邮件列表不是来自 tnpi.net 的电子邮件的有效 SPF 发件人，以及 c)带有我的域的 DKIM 签名验证失败。

除了修复列表软件之外，还有一些解决方法，例如将有问题的邮件列表服务器添加到我的 SPF 记录中。一些 DMARC 实现会检测来自邮件列表的邮件并降低策略严重性（即，Google 隔离我的列表邮件而不是拒绝）。

目前，没有比实施良好的 DMARC 策略更好的方法来抑制使用您的域的网络钓鱼和欺骗尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T13:30:38.953

在过去的几周里，我也注意到这种欺骗行为有所增加。

有关此问题的[Google 支持页面](http://support.google.com/mail/bin/answer.py?hl=en&answer=50200)指出：

> “由于这些邮件来自 Gmail 之外，我们无法阻止垃圾邮件发送者欺骗您的地址。但是，Google 通过设计我们的系统来验证真正来自您的所有邮件，从而帮助保护您的 Gmail 地址的声誉。当另一个域收到来自 Gmail 的未经身份验证的邮件，它可以表明您并没有真正发送邮件，并且您的电子邮件地址不太可能被阻止。就我们而言，我们担心欺骗和退回邮件。我们要求您报告这些邮件通过选中不需要的邮件旁边的框并单击收件箱顶部的报告垃圾邮件，或者打开邮件并单击邮件顶部的报告垃圾邮件。”
> 
> “您还可以通过 spam@uce.gov 将这些非法邮件的完整标头发送给联邦贸易委员会来帮助阻止垃圾邮件发送者。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T20:17:31.683

Afaik，据说 DMARC 将帮助您实现这一目标。根据[有关 DMARC 的 Google Apps 文章](http://support.google.com/a/bin/answer.py?hl=en&answer=2466563)，您应该开始使用“保守部署周期”，例如：

```
Monitor all.
Quarantine 1%.
Quarantine 5%.
Quarantine 10%.
Quarantine 25%.
Quarantine 50%.
Quarantine all.
Reject 1%.
Reject 5%.
Reject 10%.
Reject 25%.
Reject 50%.
Reject all. 
```

所以，我的建议是停止隔离电子邮件，监控一段时间，然后开始上升。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-08T11:20:08.760

您的邮件可能会被退回。因此，如果您在发送邮件的同一帐户上接收邮件。尝试更改数据库中域控制管理员的权限。

# jquery - jquery 更新视口？

> ID：11683589
> 
> 赞同：2
> 
> 时间：2012-07-27T07:48:23.773
> 
> 标签：jquery, layout, viewport, galleria

我在解决我遇到的布局问题时遇到了麻烦，希望能得到一些见解。

我在左侧有一个打开和折叠的菜单面板，在右侧我有 Galleria，它设置为响应模式，这意味着如果窗口大小发生变化，它会调整大小。

我要实现的目标是，当我的菜单面板折叠时，我希望响应式 Galleria 调整大小，反之亦然。

现在，如果面板从折叠位置开始并展开，则文档宽度会增加菜单面板的宽度，并且不会调整 Galleria 的大小。从这里开始，如果我手动调整浏览器的大小，即使是一个像素，布局也会刷新，一切都很好。

因此，我开始寻找可以更新视口的方法，而无需实际更改大小，这样 Galleria 的反应就好像视口发生了变化。下面是我切换菜单的代码。我正试图将文档大小强制为原始大小，但即使这样也无法产生结果。

谢谢您的帮助

```
var documentWidth = $(document).width();
    var documentHeight = $(document).height();
    function hideMenu() {
        $('#User_Menu').hide("slide", { direction: "left" }, 1000, function () {
            showOpenMenu();
            $.cookie('pj-userMenuTab', 'block')
            $(document).width(documentWidth);
        });
    }
    function showOpenMenu() {
        $('#Open_User_Menu').show("slide", { direction: "left" }, 500);
        $.cookie('pj-userMenu', 'none')
    }
    function showMenu() {
        $('#Open_User_Menu').hide("slide", { direction: "left" }, 500, function () {
            hideOpenMenu();
            $.cookie('pj-userMenu', 'block');
        });
    }
    function hideOpenMenu() {
        $('#User_Menu').show("slide", { direction: "left" }, 1000);
        $.cookie('pj-userMenuTab', 'none')
        alert('...' + documentWidth);
        $(document).width(documentWidth);
        alert($(document).width());
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T08:24:08.553

根据评论，有必要触发`resize`事件，以便 Galleria 插件调整大小。

以下代码（当添加到打开/关闭函数时）应该可以工作：

```
$(window).trigger("resize"); 
```

# playframework-2.0 - 在哪里可以找到 SecureSocial 的安装手册？

> ID：11683590
> 
> 赞同：0
> 
> 时间：2012-07-27T07:48:30.557
> 
> 标签：playframework-2.0, securesocial

我得到了这个链接[https://github.com/jaliss/securesocial/tree/master/samples/java/demo](https://github.com/jaliss/securesocial/tree/master/samples/java/demo)并且不理解 README 文件，该怎么做。将一些文件复制到哪里，第一件事..我找不到要复制到哪里的文件或目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:24:01.533

[http://www.securesocial.ws](http://www.securesocial.ws)上提供了用户指南。

# git - 我应该分叉和克隆我的存储库，还是只克隆原始存储库？

> ID：11683596
> 
> 赞同：18
> 
> 时间：2012-07-27T07:48:47.847
> 
> 标签：git, github

我正在使用几个 GitHub 存储库。到目前为止，我一直在使用的过程是 fork 原始存储库，然后克隆我的分支。如果我进行一些更改，我只需将它们推送到我的远程分支中。

我担心的是：在项目中我可能不会进行任何修改/提交，我应该像以前一样分叉原始项目并克隆我的分支，还是克隆原始项目？如果这些项目涉及一堆必须定制的文件（因此，我的本地项目与原始项目不同）怎么办？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-27T07:55:12.620

这并不重要。

如果您认为，您不进行任何更改，您可以安全地直接克隆原始存储库，这样做有什么好处，您可以通过`git pull`. 一旦你意识到你想要进行更改，你可以在 github 上 fork 并将 fork 添加为附加远程

另一方面，如果您认为您将对遥控器进行更改，您可以分叉它。一旦您意识到您错了并且您不需要进行更改，请将原始存储库添加为远程并删除分叉。

我自己更喜欢始终将分叉和原始分叉都添加为远程，因此我可以通过 (eg) 更新我的本地克隆`git pull original master`，然后我可以用`git push origin`( `origin`is my private fork here 更新我的分叉。名字并不真的也很重要）。如果我不需要叉子或不再需要它，我会摆脱它。如果我（再次）需要它，我（重新？）创建它。

作为旁注：您不需要在 github 上创建一个分支来进行更改，因为您的本地克隆也是一个完整的存储库，如果它足以将您的更改保留在那里，那没关系。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-27T07:56:31.970

如果您不打算对代码进行更改，请克隆但不要分叉。分叉旨在托管您对代码所做的提交，而克隆则非常适合复制项目的内容和历史。

如果您稍后改变主意并想要发布您对克隆存储库所做的提交，您始终可以将您的提交从原始克隆分叉并推送到分叉的存储库，只需将分叉的 URL 添加到存储库的远程。

# twitter-bootstrap - SimpLESS 不会编译 initializr 生成的 Bootstrap

> ID：11683600
> 
> 赞同：4
> 
> 时间：2012-07-27T07:49:13.273
> 
> 标签：twitter-bootstrap, less

我刚刚下载了一个 intializr 生成的 Bootstrap 版本。我还安装了 SimpLESS 以避免不断地手动重新编译我的 LESS 文件并避免使用浏览器内编译器。然而，SimpLESS 拒绝在我的目录中编译非常基本的 style.css 文件。它吐了：

```
Result of expresiin style.less on 'e.message' [undefined] is not an object. 
```

注意：“表达式”的拼写确实与上面出现的方式相同。

我的 style.less 文件目前如下所示：

```
@import "bootstrap/bootstrap.less";

body {
  padding-top: 60px;
  padding-bottom: 40px;
}

@import "bootstrap/responsive.less"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T22:33:25.877

我遇到了同样的问题，对我来说解决方法是不要嵌套@imports。我在 Win7 上使用 SimpLESS 1.4 和 Bootstrap 2.1.0，如果你的 style.less 文件如下所示，它可以工作：

```
// CSS Reset
@import "reset.less";

// Core variables and mixins
@import "variables.less"; // Modify this for custom colors, font-sizes, etc
@import "mixins.less";

// Grid system and page structure
@import "scaffolding.less";
@import "grid.less";
@import "layouts.less";

// Base CSS
@import "type.less";
@import "code.less";
@import "forms.less";
@import "tables.less";

// Components: common
@import "sprites.less";
@import "dropdowns.less";
@import "wells.less";
@import "component-animations.less";
@import "close.less";

// Components: Buttons & Alerts
@import "buttons.less";
@import "button-groups.less";
@import "alerts.less"; // Note: alerts share common CSS with buttons and thus have styles in buttons.less

// Components: Nav
@import "navs.less";
@import "navbar.less";
@import "breadcrumbs.less";
@import "pagination.less";
@import "pager.less";

// Components: Popovers
@import "modals.less";
@import "tooltip.less";
@import "popovers.less";

// Components: Misc
@import "thumbnails.less";
@import "labels-badges.less";
@import "progress-bars.less";
@import "accordion.less";
@import "bootstrap/carousel.less";
@import "bootstrap/hero-unit.less";

// Utility classes
@import "utilities.less"; // Has to be last to override when necessary

//Needed if using fixed navbar 
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
.sidebar-nav {
  padding: 9px 0;
}

// RESPONSIVE CLASSES
// ------------------

@import "responsive-utilities.less";

// MEDIA QUERIES
// ------------------

// Large desktops
@import "responsive-1200px-min.less";

// Tablets to regular desktops
@import "responsive-768px-979px.less";

// Phones to portrait tablets and narrow desktops
@import "responsive-767px-max.less";

// RESPONSIVE NAVBAR
// ------------------

// From 979px and below, show a button to toggle navbar contents
@import "responsive-navbar.less"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:32:56.793

我没有尝试很长时间使用 SimpleLESS，似乎根本没有编译引导程序。

您可以尝试使用[lesscss.org](http://lesscss.org/)提供的 JavaScript或[php less 编译器](http://leafo.net/lessphp/)（我没有尝试过这个）。

如果您只想不时编译，这里有一个非常基本的编译器示例。[http://pastebin.com/vXXFdvnk](http://pastebin.com/vXXFdvnk)

否则检查[lesscss.org 的建议](http://lesscss.org/#-client-side-usage)。

# image - Magento 中的自定义图像属性在未设置任何图像并从产品视图页面调用时会生成错误

> ID：11683602
> 
> 赞同：2
> 
> 时间：2012-07-27T07:49:18.727
> 
> 标签：image, magento, attributes, product

我创建了一个自定义图像属性并将其添加到Magento 中设置的*默认属性中。*我的新属性是**img_support**和**img_upgrade**。我已经使用这段代码在产品视图页面上显示了这两个图像：

```
<?php if ($_product->getimg_upgrade()):
 $_img = '<img src="'.$this->helper('catalog/image')->init($_product, 'img_upgrade')->resize(85).'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'"  "/>';
 echo $_helper->productAttribute($_product, $_img, 'img_upgrade');
 endif; 
?> 
```

与第二个自定义图像属性名称相同的代码将显示**img_support**图像。当我为这两个属性设置图像并选择它们时，它们会显示正常，但是当没有为这些属性上传和选择图像并且我尝试在产品视图页面上显示它时，它会生成错误。像这样的东西：

```
a:5:{i:0;s:25:"Image file was not found.";i:1;s:3911:"#0 C:\Program Files\EasyPHP-    5.3.8.0\www\mymagentoroot\app\code\core\Mage\Catalog\Helper\Image.php(163):
Mage_Catalog_Model_Product_Image->setBaseFile('no_selection')..... 
```

在那之后有很长的痕迹。所以基本上即使没有选择图像，它也会获取图像。谁能告诉我如何在所选产品的产品视图页面中显示我的自定义图像？我有，比如说 10 个带有**默认**属性集的产品。因此，所有这 10 种产品都可以使用 img_support 和 img_upgrade 进行设置，但我只想在 5 种选定产品上显示自定义图像。如果图像设置显示。否则不要。我怎样才能做到这一点？如果有任何其他适当或更好的方法可以做到这一点，那么请在这里帮助我。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T08:12:29.783

当产品没有给定属性的图像时，Magento 会使用占位符图像。
基本上，每个图像属性都必须在皮肤目录中有一个占位符图像，并以相应的属性代码命名。
在您的情况下，您应该为您的两个新属性创建两个新的占位符图像，`img_support`并且`img_upgrade`在此皮肤目录中：（`images/catalog/product/placeholder/your_attribute_code.jpg`使用新图像或使用基本占位符之一的副本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T07:05:54.490

如果您上传该属性的图像然后突然通过 FTP 删除图像文件，也会发生此问题。把网站展示下来是不好的。总而言之，有 3 种方法可以解决此问题：1）@blmage 的答案：使用占位符 2）使用 try catch：

```
<?php 
try {
if ($_product->getimg_upgrade()):
 $_img = '<img src="'.$this->helper('catalog/image')->init($_product, 'img_upgrade')->resize(85).'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'"  "/>';
 echo $_helper->productAttribute($_product, $_img, 'img_upgrade');
 endif; 
}
catch (Exception $e) {

}
?> 
```

3.  检查文件是否存在

    getBaseMediaPath(); $baseFile = $baseDir 。$_product->getImgUpgrade(); if (file_exists($baseFile)) { } ?>

# java - java中的IP伪装

> ID：11683604
> 
> 赞同：2
> 
> 时间：2012-07-27T07:49:23.860
> 
> 标签：java, linux, http

我必须通过在 JAVA 中的不同 URl 上发送 HttpRequest 来获取来自不同站点的用户数据。我得到的一个问题是，请求的 URL 在依赖于 URL 到 URL 的连续请求数之后阻止了我。解决此问题的一种方法是，每次发送请求时，我都必须通过更改 IP 将请求发送到相同的 URL 次数。但是我不知道通过在 Java 中不时更改 IP 来发送请求。

我已经尝试过**IP 伪装**，但我找不到任何一步一步的教程。我是这项技术的新手。我正在linux（Fedora）中尝试这个

在java中请帮助我得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:56:27.377

IP伪装对您没有帮助，它以相反的方式使用（通常是为了使私有IP范围可以通过伪装在一个公共IP后面来使用公共网络）。您遇到的问题需要您可以使用多个公共 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:06:11.780

您说您有来自多个用户的数据。作为一种解决方法，您可以尝试做的是从客户端完成对被阻止 URL 的请求，因此从用户的 IP 地址完成。然后将结果发送到您的服务器并在那里使用它。

# mysql - 我应该如何在mysql表设计中存储问题和答案

> ID：11683607
> 
> 赞同：1
> 
> 时间：2012-07-27T07:49:35.473
> 
> 标签：mysql, database-design, data-modeling

我有以下表格

1.  用户
2.  问题
3.  问题类别
4.  答案

现在我很困惑我的用户类是否应该有任何问题链接或只是答案

用户将回答表格上显示的问题。

所以每年对于不同的问题都会有不同的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:21:06.557

我假设一个用户可以提出问题，一个问题可以属于一个类别，并且许多用户可以发布答案。实际上，它是关于像 stackoverflow 这样的网站。

```
create table user (
  user_id integer primary key,
  name varchar(40) not null
);

create table category (
  category_id integer primary key,
  category varchar(40) not null
);

create table question (
  question_id integer primary key,
  question text,
  asked_by_id integer not null,
  category_id integer not null,
  foreign key asked_by_id references user(user_id),
  foreign key category_id references categor(category_id)
);

create table answer (
  answers_id     integer not null,
  answered_by_id integer not null,
  answer text,
  primary key (answers_id, answered_by_id), -- we allow one answer per person for a question
  foreign key answers_id references question(question_id),
  foreign key answered_by_id references user(user_id)
); 
```

然后是查询：

```
select qu.name as asked_by,    question, category,
       au.name as answered_by, answer
from user qu                                       -- iterating through users
join question q on qu.user_id    = asked_by_id     -- joining them to their questions
join category c on c.category_id = q.category_id   -- find the category
join answer     on answers_id    = question_id     -- join by what answers this question
join user au    on au.user_id    = answered_by_id; -- looking up the user who answered it 
```

（我没有在服务器上尝试过，所以可能有错别字。请随时纠正。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:55:09.457

好吧，这取决于你想做什么。用户可以发布问题吗？如果是，请链接它。如果不是，则链接没有意义，因为它会保持空白。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-04T03:13:00.280

无需更新多行，您只需将问题及其选项和答案转换为 json 并存储为单个字段。

# python - 当我添加`-k`时，为什么ApacheBench对龙卷风的测试会中止？

> ID：11683610
> 
> 赞同：0
> 
> 时间：2012-07-27T07:49:44.437
> 
> 标签：python, benchmarking, tornado, keep-alive, apachebench

我像这样启动一个龙卷风 http 服务器：

```
app = tornado.web.Application([
    (r'.*', MyRequestHandler),
])

http_server = tornado.httpserver.HTTPServer(app, no_keep_alive=True)
http_server.listen(port)
ioloop = tornado.ioloop.IOLoop.instance()

ioloop.start() 
```

我想用标头输入请求，`Connection: keep-alive`然后设置`no_keep_alive`为`True`.

当我跑步时

```
ab -n 1000 -c 10 -k http://127.0.0.1:28000/ 
```

输出

```
Benchmarking 127.0.0.1 (be patient)
apr_socket_recv: Connection reset by peer (104)
Total of 11 requests completed 
```

当我删除时`-k`，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:39:16.160

如果很短 - 因为 apache 基准测试会在测试中打开一次连接。在您的情况下，您有 10 个连接 - 在前 10 个请求后所有连接都被杀死。

这是来自龙卷风的 HTTPConnection 完成请求的代码。

```
def _finish_request(self):
    if self.no_keep_alive:
        disconnect = True
    else:
        connection_header = self._request.headers.get("Connection")
        if connection_header is not None:
            connection_header = connection_header.lower()
        if self._request.supports_http_1_1():
            disconnect = connection_header == "close"
        elif ("Content-Length" in self._request.headers
                or self._request.method in ("HEAD", "GET")):
            disconnect = connection_header != "keep-alive"
        else:
            disconnect = True
    self._request = None
    self._request_finished = False
    if disconnect:
        self.stream.close()
        return
    self.stream.read_until(b("\r\n\r\n"), self._header_callback) 
```

你的错误：

```
apr_socket_recv: Connection reset by peer (104) 
```

我们可以猜到，如果旧连接关闭，您必须强制 apache benchmark 打开新连接。我不确定在这种情况下您是否能够获得具有代表性的结果。

# .net - 在 VB.NET 中将内容保存到带有格式详细信息的文件

> ID：11683612
> 
> 赞同：1
> 
> 时间：2012-07-27T07:49:56.683
> 
> 标签：.net, vb.net, file-io, formatting, filewriter

我正在开发一个 VB.NET 项目，该项目从指定的数据库中检索数据并将结果保存到具有唯一扩展名的文件中（即 *.vcs）。困扰我的事情是我需要使用用户定义的格式（例如字体颜色、字体大小等）保存数据，以便他将来再次访问文件时以相同的格式找到它。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:11:10.923

您可以使用[RichTextBox](http://msdn.microsoft.com/en-us/library/3tdc88y7.aspx)控件以 RTF 格式保存 ( `RichTextBox.SaveFile()`) 和加载 ( `RichTextBox.LoadFile()`) 内容。

# vba - 从 VBA 开始一个形状动画？

> ID：11683613
> 
> 赞同：1
> 
> 时间：2012-07-27T07:49:57.900
> 
> 标签：vba, powerpoint

是否可以从 VBA 代码触发形状动画？

绒球

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T16:59:02.883

绒球，

在低于 powerpoint 2010 的任何版本中，不，它似乎不可能： http: [//www.pptalchemy.co.uk/vba_Triggers.html](http://www.pptalchemy.co.uk/vba_Triggers.html)。

但是，如果您使用的是 powerpoint 2010，MSDN 详细介绍了在 powerpoint 中触发形状动画的[简单演示：](http://msdn.microsoft.com/en-us/library/office/gg190747.aspx)

```
Sub TestShapeAnimation()

    With ActivePresentation.Slides(1)
        Dim shp1, shp2, shp3 As Shape
        ' This sets the initial shape, with which we will test the animation sequences.
        Set shp1 = .Shapes.AddShape(msoShape12pointStar, 20, 20, 100, 100)

        ' This creates the animations.
        .TimeLine.MainSequence.AddEffect shp1, msoAnimEffectFadedSwivel, , msoAnimTriggerAfterPrevious
        .TimeLine.MainSequence.AddEffect shp1, msoAnimEffectPathBounceRight, , msoAnimTriggerAfterPrevious
        .TimeLine.MainSequence.AddEffect shp1, msoAnimEffectSpin, , msoAnimTriggerAfterPrevious

        ' This acquires the animation... [i]
        shp1.PickupAnimation

        ' [i] ... and applies it to another shape.
        Set shp2 = .Shapes.AddShape(msoShapeHexagon, 100, 20, 100, 100)
        shp2.ApplyAnimation

        ' Another shape creation / animation application.
        Set shp3 = .Shapes.AddShape(msoShapeCloud, 180, 20, 100, 100)
        shp3.ApplyAnimation

    End With

End Sub 
```

如果您还有其他问题/想法，请告诉我 -

~乔尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-04T03:43:02.103

不幸的是，JackOrangeLantern 的回答对原始问题并没有特别敏感。JOL 的响应将帮助您在时间轴上复制动画并将它们应用到不同的形状，但它不会真正触发它们。

如果您有 Powerpoint 2010 或更早版本，则无法直接使用 VBA 实际触发动画。我对新版本的 Powerpoint 不是很熟悉，但我认为它们也没有这个功能。

实际上触发交互式动画似乎需要实际的鼠标单击，如果没有一些可能涉及实际混淆 Windows API 的高级且过于复杂的编码，则无法在 Powerpoint 中轻松模拟。我为此找到的最佳解决方法是不要将鼠标点击发送到幻灯片上的形状，而是发送键盘敲击。

我从 PPT Alchemy [Mouseover 中发现了这个解决方案 trigger an animation with vba code](http://www.pptalchemy.co.uk/vba_Triggers.html)

```
Sub anim()
   SendKeys("{TAB}")
   SendKeys("{ENTER}")
End Sub 
```

此代码将激活幻灯片上的第一个交互式触发器。要激活幻灯片上的第二个触发动画，您需要发送 {TAB} 键两次而不是一次。这无疑是在 PowerPoint 幻灯片上激活触发动画的最简单方法。很遗憾没有更好的方法。

点击链接以获得更详尽的解释。
小心。:)

# jquery - 具有只读和可编辑部分的 HTML5 文本控件

> ID：11683614
> 
> 赞同：0
> 
> 时间：2012-07-27T07:50:00.293
> 
> 标签：jquery, css, html

我试图获得一个文本输入视觉元素，它看起来是单一的，但有两个部分水平排列，具有不同的行为。左边的一个必须是只读的，而左边的一个应该是可编辑的。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:57:09.897

您可以将两个输入并排放置并适当地设置它们的样式。示例 jsfiddle 在[http://jsfiddle.net/xvKCH/1/](http://jsfiddle.net/xvKCH/1/)。

```
<input type='text' readonly class='readonly'></input><input type='text' class='writable'></input>​

input {
    display: inline;
    width: 100px;
    margin: 0;
    padding: 0;
    border: 1px solid black;      
}

.readonly {
    border-right: 0;
}

.writable {
    border-left: 0;
}​ 
```

# c# - 在 WinForms 和紧凑框架中使控件“移动”

> ID：11683616
> 
> 赞同：0
> 
> 时间：2012-07-27T07:50:05.857
> 
> 标签：c#, .net, winforms, windows-mobile, compact-framework

是否可以制作动画，例如在 WinForms 和 Compact Framework 中移动按钮和内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:51:39.520

是的，您可以做的最少的事情是更改控件的顶部和左侧以及高度和宽度，使其看起来像动画

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T07:53:09.553

使用循环构造和更改显示位置参数或交替颜色和边框样式等，您可以做最少的动画。您只需要对您的代码发挥创意，看看您能做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:53:32.920

你可以找到关于winforms的动画

[https://web.archive.org/web/20141223080308/http://bobpowell.net/animation.aspx](https://web.archive.org/web/20141223080308/http://bobpowell.net/animation.aspx)

# javascript - 如何在鼠标悬停时显示弹出文本？

> ID：11683620
> 
> 赞同：13
> 
> 时间：2012-07-27T07:50:26.200
> 
> 标签：javascript, jquery, html, css, tooltip

当我将鼠标悬停在图像上时，我想从 DIV 标记加载一些内容作为弹出文本。当我鼠标离开该图像时，弹出应该消失，当我再次将鼠标悬停在图像内容上时，应该显示为弹出文本。我为此使用 HTML、Jquery、JS。如果我使用 jquery load() 方法获得解决方案，这将非常有用。让我知道你的回应。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T08:03:43.587

或者，没有 javascript：

```
<div class="tooltip-wrap">
  <img src="/some/image/file.jpg" alt="Some Image" />
  <div class="tooltip-content">
    <p>Here is some content for the tooltip</p>
  </div> 
</div> 
```

这个CSS：

```
.tooltip-wrap {
  position: relative;
}
.tooltip-wrap .tooltip-content {
  display: none;
  position: absolute;
  bottom: 5%;
  left: 5%;
  right: 5%;
  background-color: #fff;
  padding: .5em;
}
.tooltip-wrap:hover .tooltip-content {
  display: block;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-02T18:38:42.330

您也可以尝试一些非常简单的方法，例如：

```
<acronym title="pop-up text"><img src=...></acronym> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-27T07:54:37.163

您可以将[Twitter Bootstrap](http://twitter.github.com/bootstrap)与[工具提示插件](http://twitter.github.com/bootstrap/javascript.html#tooltips)一起使用。

如果你只想要插件，[你可以只用插件构建你自己的 Bootstrap](https://stackoverflow.com/a/11640442/652669)。

最后，如果您想对工具提示进行风格化，请使用[CSStooltip.com](http://csstooltip.com/)。

例子 ：

![在此处输入图像描述](../Images/2ebea0978f18bddfa771ab38b2e80369.png)

```
span.tooltip:after {
      content: "";
      position: absolute;
      width: 0;
      height: 0;
      border-width: 10px;
      border-style: solid;
      border-color: transparent #FFFFFF transparent transparent;
      top: 11px;
      left: -24px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T23:42:59.940

您可以将`title`属性添加到图像。您不需要任何额外的标签或样式，只需要一个属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-03T12:41:31.647

```
<p id="icon">Text to hover over</p>
<p id="info" style="display: none">Text to popup</p> 
```

然后，用 javascript 完成它。

```
<script>
var e = document.getElementById('icon');
e.onmouseover = function() {
  document.getElementById('info').style.display = 'block';
}
e.onmouseout = function() {
  document.getElementById('info').style.display = 'none';
}
</script> 
```

如果将鼠标悬停在文本上，则会弹出另一个。

# android - 无论如何我可以指定蓝牙服务的频道吗？

> ID：11683624
> 
> 赞同：0
> 
> 时间：2012-07-27T07:50:50.387
> 
> 标签：android, bluetooth

我正在尝试随机创建一个蓝牙服务，`UUID`无论如何我可以指定该服务应该使用哪个频道？据我所知，频道绑定到 UUID。例如：

```
OBEX Object Push {00001105-0000-1000-8000-00805F9B34FB}:12 
```

这是`android kernel`具有 UUID`00001105-0000-1000-8000-00805F9B34FB`和 channel的 OBEX 对象推送`12`。对于此服务，频道保持静态，为什么我不能制作具有静态频道的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T03:03:19.193

你可以这样。

私人最终字符串 PBAP_UUID = "00001105-0000-1000-8000-00805F9B34FB";

mSocket = mDevice.createInsecureRfcommSocketToServiceRecord(ParcelUuid.fromString(PBAP_UUID).getUuid());

系统将根据您的 uuid 在通道 12 上创建套接字。

如果您连接到其他平台的手机，使用静态通道可能会失败。

频道可能不同，但 uuid 相同，无论平台如何，系统都会使用标准 uuid 找到正确的频道。

# java - 获取画布的中心点

> ID：11683644
> 
> 赞同：0
> 
> 时间：2012-07-27T07:53:08.297
> 
> 标签：java, android, android-canvas

我制作了一个画布，并在其上设置了一个图像，但我希望该图像应该位于每个屏幕的中心。当我更改选项卡、星系等屏幕时，它应该从自身中获取大小。但是使用下面的代码，我每次都会在屏幕的右下角得到一张图像。

这是我的代码：

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    this.w = w;
    this.h = h;
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    Bitmap b = BitmapFactory.decodeResource(getResource(), R.drawable.north_india);
    canvas.drawBitmap(b, w/2, h/2, mPaint);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:57:30.413

图像是从左上角绘制的。因此，您需要校正图像尺寸。

```
canvas.drawBitmap(b, (w - b.width()) / 2, (h - b.height()) / 2, mPaint); 
```

# mysql - 在没有 GroupConcat 的情况下将多行合并为一

> ID：11683647
> 
> 赞同：1
> 
> 时间：2012-07-27T07:53:16.487
> 
> 标签：mysql, join, row

**如何在没有组 concat**的情况下将多行加入一行？

考虑我有如下表：

表用户：

```
uid | name
-----------
 1  | A
 2  | B 
```

表元：

```
uid | metaid | metaval
------------------------
 1  |   1    |  Jsep St.
 1  |   2    |  St. Oak No. 15
 2  |   1    |  Dt. San Joseph
 2  |   2    |  St. Oak No. 17
 2  |   3    |  OA. 
```

表元属性：

```
metaid | metakey
-----------------
  1    | school
  2    | address 
  3    | dept
  4    | acc 
```

我想用他们的学校和地址选择一个用户，所以查询是

```
SELECT 
    uid, name, metaval 
FROM user 
INNER JOIN meta ON meta.uid = user.uid 
WHERE meta.metaid = 1 OR meta.metaid = 2 
```

它会输出

```
| UID | Name | MetaVal         |
--------------------------------
|  1  |  A   |  Jsep St.       |
|  1  |  A   |  St. Oak No. 15 | 
```

我想要的结果是这样的

```
uid | name | school  |    address 
-------------------------------------
 1  |   A  | Jsep St.| St. Oak No. 15 
```

使用组 concat，具有值“学校”和“地址”的元属性不在不同的列中，而是在**一列中**

我尝试加入两次并且它有效，但我认为它并不优雅

```
SELECT 
    uid, name, T1.metaval as school, T2.metaval as address 
FROM user 
INNER JOIN meta T1 ON T1.uid = user.uid AND T1.metaid = 1 
INNER JOIN meta T2 ON T2.uid = user.uid AND T2.metaid = 2 
```

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:02:33.620

> 有更好的解决方案吗？

**简短的回答**

不。

**中等长度的答案**

您的查询存在一些问题。

*   你忘了包括`user`表格。
*   格式化您的 SQL 以使其易于阅读。
*   `LEFT JOIN`如果某些数据可能丢失，请考虑使用。

试试这个：

```
SELECT uid, name, T1.metaval AS school, T2.metaval AS address
FROM user
LEFT JOIN meta T1 ON T1.uid = user.uid AND T1.metaid = 1
LEFT JOIN meta T2 ON T2.uid = user.uid AND T2.metaid = 2 
```

**长答案**

是的，那个查询很难看，但问题不在于查询，而在于数据库设计。您正在使用的设计称为[实体属性值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)(EAV)。尽可能避免使用 EAV 设计！每当您使用 EAV 时，您的所有查询都会变成多个连接怪物。如果您可以将每个值存储在同一行的单独列中，则会容易得多。

当然，在某些情况下您必须使用 EAV。然后你只需要接受你的查询会很长，难以阅读，不优雅和缓慢。这就是您为拥有灵活模式所做的权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:31:18.227

也许这是一个简短的答案：

```
SELECT uid, name,
       max(  case when meta.metaid = 1 then metaval  else '' end ) as school,
       max(  case when meta.metaid = 2 then metaval  else '' end ) as address
FROM user  
INNER JOIN meta 
    ON meta.uid = user.uid  
WHERE meta.metaid = 1 OR meta.metaid = 2 
group by uid, name 
```

# c# - 获取最后一个访问该站点的人的用户名

> ID：11683648
> 
> 赞同：0
> 
> 时间：2012-07-27T07:53:21.557
> 
> 标签：c#, asp.net, session, iis, global-asax

对于不清楚的问题标题，我真的很抱歉，但我自己对此有点困惑。

我在 IIS 上运行我的网站，并在顶部显示当前登录的用户的用户名。我的网站托管在本地服务器上，并且各种用户同时访问它。

**问题**

每次用户打开该站点时，它都会显示最近访问该站点的前一个用户的用户名。

**代码**

这是我在 global.asax 文件中使用的代码。

```
 void Session_Start(object sender, EventArgs e)
    {
        // Code that runs when a new session is started        
        // code to get the current user name when running from IIS
        System.Security.Principal.IPrincipal _User;
        _User = System.Web.HttpContext.Current.User;
        System.Security.Principal.IIdentity _Identity;
        _Identity = _User.Identity;
        string _Value;
        _Value = _Identity.Name.Substring(_Identity.Name.IndexOf(@"\") + 1);

 DataTable dtId = CetDatabase.GetEmployeDetails(_Value);
        if (dtId.Rows.Count > 0)
        {
            Session["teamid"] = dtId.Rows[0]["TEAMID"].ToString();
            Session["projectid"] = dtId.Rows[0]["PROJECTID"].ToString();
            Session["memberid"] = dtId.Rows[0]["MEMBERID"].ToString();
            CeteraQMS.Main_Master.projectname = dtId.Rows[0]["PROJECTNAME"].ToString();
            CeteraQMS.Main_Master.username = _Value;
            CeteraQMS.Main_Master.teamname = dtId.Rows[0]["TEAMNAME"].ToString();
            Session["role"] = dtId.Rows[0]["MEMBERROLE"].ToString();
        }
        else
        {
            Response.Redirect("AccessDenied.aspx");
        }
    } 
```

我不确定我哪里出错了。

在此先感谢阿基尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:16:50.683

这里：

```
CeteraQMS.Main_Master.username = _Value; 
```

看起来像在静态对象上设置属性。该`Main_Master`属性看起来像类上的静态属性`CeteraQMS`（无论是什么）。如您所知，静态对象在应用程序中的所有用户之间共享。所以不要使用任何静态对象来存储特定于当前用户的状态。如果要存储用户名和其他用户特定属性，最好将它们存储到 Session 中，就像使用、`teamid`和值一样。`projectid``memberid``role`

# java - 在视图中绘制真实距离度量

> ID：11683651
> 
> 赞同：1
> 
> 时间：2012-07-27T07:53:36.570
> 
> 标签：java, android, graphics

作为一个练习，我正在尝试实现一个简单的标尺应用程序。

是否可以准确地猜出屏幕中可绘制对象的大小？在 ecuation 中，我需要分辨率和屏幕密度（或屏幕的实际尺寸），但由于 Android 的 API 只返回：

```
 DisplayMetrics.DENSITY_LOW:
 DisplayMetrics.DENSITY_MEDIUM:
 DisplayMetrics.DENSITY_HIGH: 
```

我想知道是否有可能准确地完成这项任务。

# liferay - 如何禁用默认消息：“您的请求已成功处理”？

> ID：11683652
> 
> 赞同：8
> 
> 时间：2012-07-27T07:53:36.790
> 
> 标签：liferay, liferay-6

当在我的 portlet 中执行添加/更新操作时，如何为我的插件 portlet 禁用此默认消息：“您的请求已成功处理”？

此外，我想为我的自定义配置页面 ( `configuration.jsp`) 禁用此功能，这是当我们单击每个 portlet 右上角显示的扳手图标时显示的配置页面。

是否有我可以设置的任何配置选项或我可以编写一些代码来禁用它？

或者是否可以从我的自定义 portlet 中更改消息`ConfigurationActionImpl`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-27T07:53:36.790

1.  可以通过以下配置为我的 portlet 中的所有操作禁用此消息`portlet.xml`：

    ```
    <init-param>
        <name>add-process-action-success-action</name>
        <value>false</value>
    </init-param> 
    ```

2.  或者，它也可以针对特定操作而不是所有操作进行更改：

    ```
    public void addEmployee(ActionRequest actionRequest, ActionResponse actionResponse) throws IOException, PortletException {

        // ... all the code processing

        String successMsg = "Employee added Successfully!";

        SessionMessages.add(actionRequest, "request_processed", successMsg);
    } 
    ```

感谢此[链接](http://www.liferay.com/community/forums/-/message_boards/message/5872211)中提供的信息。

希望这可以帮助某人。

# php - http://example.com/main.php?add=

> ID：11683658
> 
> 赞同：-2
> 
> 时间：2012-07-27T07:54:23.997
> 
> 标签：php, mysql

我想创建一个我能够做到的 php 脚本

> http://example.com/main.php?add=[$id + 1]

它连接到一个mysql数据库。$id 是一个整数，假设值为 1（仅作为示例）。我希望它从名为 scriptid 的 mysql 表中收集 $id。（第 0 列）我希望它从名为 scriptlist 的 mysql 表中选择列。我希望列号是 $id + 1 的值，例如[http://example.com/main.php?add=2](http://example.com/main.php?add=2)。当它“添加”时，它会将输入的列的值 ($id + 1) 更改为 1。

到目前为止，我有这个，我对 php 和 mysql 都很陌生，并且很困惑，即使在阅读了大量指南之后也是如此。

```
$id = $_GET["id"];
$check = mysql_query("SELECT * FROM scriptlist");
$rowlist = mysql_fetch_row($check);
if($rowlist) {
mysql_query("UPDATE scriptlist SET user = 'dan' WHERE " . $rowlist['$id'] + 1 . " =     '1'"); 
echo($rowlist['$id'] + 1 . " = '1'");
} 
```

我认为我的代码实际上不会帮助您更多地理解它，但是是的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:32:39.357

我不知道您的要求，但也许这就是您要寻找的：

```
$id = $_GET["id"];
$check = mysql_query("SELECT * FROM scriptlist");
$rowlist = mysql_fetch_row($check);
if($rowlist) {
mysql_query("UPDATE scriptlist SET user = 'dan' WHERE " . $rowlist[$id + 1]. " =     '1'"); 
echo($rowlist[$id + 1] . " = '1'");
} 
```

# ruby - 我可以使用 1.6.4 Ruby 驱动程序继续使用 MongoDB v2.2.0rc 吗？

> ID：11683661
> 
> 赞同：2
> 
> 时间：2012-07-27T07:54:38.807
> 
> 标签：ruby, mongodb, nosql

MongoDB 2.2 的最新候选版本已经发布。似乎没有用于 MongoDB 的 Ruby 驱动程序的更新版本。Ruby 驱动程序 1.6.4 会在 MongoDB 2.2.0 下继续正常运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:14:49.033

我不想这么说，但答案是：也许，这取决于你想用它做什么。

如果您查看 1.7.0 的注释，您会发现当前正在处理的几个修复与支持 2.2 中的新功能（如聚合框架和读取首选项）有关：

[https://jira.mongodb.org/secure/ReleaseNote.jspa?projectId=10005&version=11154](https://jira.mongodb.org/secure/ReleaseNote.jspa?projectId=10005&version=11154)

因此，1.7.0 版本将允许您使用新功能，但 1.6.4 版本应该仍然有效，只要这些功能目前不在您的“必备”列表中。开发人员总是在合理的范围内尝试避免导致驱动程序版本不兼容的向后破坏问题。话虽如此，这里列出了 2.2 版本中的向后破坏性更改列表：

[https://jira.mongodb.org/secure/IssueNavigator.jspa?requestId=11225](https://jira.mongodb.org/secure/IssueNavigator.jspa?requestId=11225)

阅读这些内容，看看它们中的任何一个是否适用于您的使用。可以在此处找到其余的发行说明：

[http://docs.mongodb.org/manual/release-notes/2.2/](http://docs.mongodb.org/manual/release-notes/2.2/)

最后，一旦驱动程序（或候选版本）准备就绪，您将在[mongodb-announce](https://groups.google.com/forum/?fromgroups#!forum/mongodb-announce)用户组上看到一个公告

# wordpress - (sourcecode wraplines='true') 不适用于 SyntaxHighlighter

> ID：11683662
> 
> 赞同：1
> 
> 时间：2012-07-27T07:54:42.667
> 
> 标签：wordpress, syntax-highlighting

我最近将我的 wordpress.com 博客迁移到 wordpress.org。

当我的帖子包含没有**wraplines属性的 [** **sourcecode** ] 标记时，wordpress.com 上的行会被换行。这意味着当行到达我的博客的右边距的末尾时，行被断开，剩余部分被放置在下一行。

 **在 wordpress.org 上，我必须安装一个名为 SyntaxHighlighter 的插件，它应该使 [ **sourcecode** ] 标签就像在 wordpress.com 上一样工作，但是当这些标签不包含**wraplines**属性时，它们不会被包装。这意味着，当他们到达我博客的右边距的末尾时，会创建一个水平滚动条，并且该行继续作为一条长线。

这正是我的标签：

**[源代码语言=“文本”灯=“真”]**

在类路径资源 [net/ezswitch/registration/ComponentContext.xml] 中定义名称为“transactionManager”的 bean 创建错误：在设置 bean 属性“sessionFactory”时无法解析对 bean“sessionFactory”的引用

**[/源代码]**

这是我在 wordpress.com 上的帖子：http: [//hordine.wordpress.com/2012/06/25/junit-hides-info-with-assertionfailederror-cannot-instantiate-test-case/](http://hordine.wordpress.com/2012/06/25/junit-hides-info-with-assertionfailederror-cannot-instantiate-test-case/)

在 wordpress.org 上： [http ://hordine.com/?p=2081](http://hordine.com/?p=2081)

代码块是帖子最底部的代码块。

我正在使用 wordpress.org 3.4.1 和 SyntaxHighlighter 3.1.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:54:25.653

Wraplines 仅适用于此插件的第 2 版。

要更改插件的版本，您必须转到已安装的插件，在 SyntaxHighlighter Evolved 下会有一个设置链接。在那里您可以将版本更改为 2.x 并选中复选框“换行长行”，以使其默认换行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:15:06.717

我有同样的问题，我的解决方案是适应字体的大小：

```
.syntaxhighlighter {
font-size: 10px !important;
} 
```**

# oracle - 在 Oracle 中更新临时表数据

> ID：11683667
> 
> 赞同：-1
> 
> 时间：2012-07-27T07:54:54.540
> 
> 标签：oracle, plsql

如果我有一个临时表（10 个字段）并使用存储过程（单个列的单个更新语句）对其进行更新。

是否需要提交才能更新临时表？没有提交的事情会正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:41:22.847

如果它是一个真正的[临时表](http://docs.oracle.com/cd/E14072_01/server.112/e10713/tablecls.htm#CBBBADBI)，则其中的数据仅对您的会话可见，即使您提交，也不会对其他人可见。如果该[`on commit`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/statements_7002.htm#i2189569)子句`preserve rows`提交，那么即使对您也没有任何影响，但如果是，`delete rows`那么您会在您之后丢失数据`commit`，即使在您的会话中也是如此。

如果它不是真正的临时表，那么其中的数据将仅对您的会话可见，直到您提交为止。无论调用您的过程（通常）都将在同一个会话中，因此会看到数据更改，并且通常调用者将决定是提交还是回滚 - 在过程中执行此操作通常不是一个好主意。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T08:13:19.100

这样说 - 如果您不提交 - 只有您的会话会在任何时间点*看到更改。*

# regex - Perl 正则表达式查找准确的单词

> ID：11683672
> 
> 赞同：3
> 
> 时间：2012-07-27T07:55:12.087
> 
> 标签：regex, perl

我想`sprintf`在我的代码中找到这个词。应该使用什么 Perl 正则表达式？有些行包含类似 的文本`sprintf_private`，我想排除这些行，但只需要`sprintf`.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T07:58:30.257

您必须`\b`在单词的边界处使用：

```
/\bsprintf\b/ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T08:10:01.120

如果要查找所有`sprintf`不包含 的 on 行，`sprintf_private`可以使用一对正则表达式：

```
while( my $line = <DATA> ) {
    next if $line =~ m/\bsprintf_private\b/;
    while( $line =~ m/\bsprintf\b/g ) {
        print "[sprintf] found on line $. at column $-[0]\n";
    }
} 
```

这首先拒绝任何包含`sprintf_private`. 然后扫描不包含该取消资格的行以查找所有出现的`sprintf`. 无论在哪里找到，都会打印一条消息，标识文件中的行以及`sprintf`找到匹配项的起始列。

和特殊变量在[perlvar](http://perldoc.perl.org/perlvar.html)`$.`中描述。[在perlrequick](http://perldoc.perl.org/perlrequick.html)和[perlretut](http://perldoc.perl.org/perlretut.html)中可以找到一些关于正则表达式的好读物。第一个正则表达式非常简单；它只是使用零宽度断言来确保不合格的子字符串在其每一侧都有一个单词边界。第二个正则表达式使用相同的技术，但也应用修饰符迭代所有出现的，以防每行出现不止一次。`@-``\b``/g``sprintf`

零宽度断言`\b`匹配发生 a`\w\W`或`\W\w`转换的任何地方。由于字符类`\w`包含所有字母字符（其中“全部”的构成取决于您的`unicode_strings`标志或`/u`），加上下划线和数字（即，标识符中允许的任何字符），您可能会发现`\b`单词边界过于严格。如果您发现“简单”的解决方案过于幼稚，您可以加倍努力，通过使用如下所示的正则表达式来真正缩小应该作为单词边界的范围：

```
(?<!\p{Alpha})sprintf(?!\p{Alpha}) 
```

如果您选择走这条路，解决方案将如下所示：

```
while( my $line = <DATA> ) {
    next if $line =~ m/(?<!\p{Alpha})sprintf_private(?!\p{Alpha})/;
    while( $line =~ m/(?<!\p{Alpha})sprintf(?!\p{Alpha})/g ) {
        print "[sprintf] found on line $. at column $-[0]\n";
    }
} 
```

这使用零宽度的负向后查找和零宽度的负向后查找断言拒绝匹配，其中紧靠主子字符串左侧或右侧的字符是“Alpha”字符，而不是使用稍微更天真的`\b`.

# php - 如何正确编写正则表达式？

> ID：11683674
> 
> 赞同：1
> 
> 时间：2012-07-27T07:55:22.453
> 
> 标签：php, regex

```
$data = array(
    'core.*',
    'handlers.player.profile',
    'vendor.dummy\.test'
);

$re = '/(?!<\\\\)\./';

foreach ($data as $path) {
    $path = __DIR__ . DS . preg_replace($re, DS, $path) . '.php';
    echo "$path <BR>";
} 
```

我应该如何定义正则表达式来执行`\.`不转换为目录分隔符的序列（DS 是我项目中 DIRECTORY_SEPARATOR 的快捷方式）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:06:41.510

更新，根据评论：

```
php > var_dump(preg_replace('/(?<=[^\\\\])\./', DIRECTORY_SEPARATOR, 'vendor.dummy\.test'));
string(18) "vendor/dummy\.test" 
```

# php - 在 sql codeigniter 中查询

> ID：11683675
> 
> 赞同：0
> 
> 时间：2012-07-27T07:55:23.087
> 
> 标签：php, mysql, codeigniter

我有一张表门票（用户名，帖子，方案）用户可能有可能的帖子。例如，

```
____________________________________
username  |    posts   |    scheme |
__________|____________|___________|
A         |    post1   |      10   |
__________|____________|___________|
B         |    post2   |      2    |
__________|____________|___________|
B         |    post 3  |      13   |
__________|____________|___________|
A         |    post 4  |      21   |
__________|____________|___________|
A         |    post 5  |      -1   |
__________|____________|___________| 
```

我的查询应该生成具有标题总数和总声誉的输出不同用户名。IE，

```
_______________________
|A   |   3   |   30    |
|____|_______|_________|
|B   |   2   |   15    |
|____|_______|_________| 
```

我的模型功能：-

```
function getAllUsers(){                      
        $this->db->distinct();
        $this->db->select('username,COUNT(title) AS numtitle');
        $this->db->where('site_referers_id',1);
        return $this->db->get('tbl_tickets');
     } 
```

但这似乎不起作用:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:02:37.313

您应该使用`$this->db->group_by()`而不是`distinct`：

```
function getAllUsers(){                      
  $this->db->select('username, COUNT(*) AS numtitle, SUM(scheme) AS total');
  $this->db->where('site_referers_id',1);
  $this->db->group_by('username');
  return $this->db->get('tbl_tickets');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:12:11.243

检查此代码

```
 $this->db->select('username,COUNT(title) AS numtitle');
    $this->db->where('site_referers_id',1);
     $this->db->group_by('username');
    return $this->db->get('tbl_tickets'); 
```

你得到完美的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T06:09:23.537

我知道这个问题很早以前就问过了，但是旧的答案并没有引起作者的注意。**尝试使用 SQL：**

```
$sql ="SELECT count(*),username,SUM(scheme) FROM `tble_one` group by username";
$result = $this->db->query($sql)->get(); 
```

# c# - 在 ASP.NET 中的菜单上显示用户名的正确方法

> ID：11683677
> 
> 赞同：0
> 
> 时间：2012-07-27T07:55:31.220
> 
> 标签：c#, asp.net, session

我正在使用`ASP.NET/C#`.

我目前正在通过使用显示登录用户的名字和中间名`Session`。

这是代码

**HTML：**

```
<li><a href="#"><%=Session["UserFName"]%>&nbsp;<%=Session["UserMName"]%>&#9660;</a> 
```

**代码背后：**

```
//Call the function which returns User's Name
var userName = userBLL.GetUserName(HttpContext.Current.User.Identity.Name);
if (userName != null)
{
Session["UserFName"] = userName.FirstName;
Session["UserMName"] = userName.MiddleName; 
} 
```

**这是 GetUserName 函数**

```
public Users_AdditionalInfo GetUserName(string userCode)
{
using (var db = new DataClasses1DataContext())
{
var userName = db.Users_AdditionalInfos.Where(user => user.UserCode.Equals(userCode)).SingleOrDefault();
return userName; 
}

} 
```

用来`Session variables`做我想做的事可以吗？

你们中的许多人还有哪些其他方法可以实现这一目标？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:01:59.060

您可以尝试使用 ViewState，因为您只需要在带有菜单的页面上显示值（您不需要在另一个页面中）

```
ViewState["UserFName"] = userName.FirstName;
ViewState["UserMName"] = userName.MiddleName; 

Or with InputHidden 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:06:59.550

您只提到了 ASP.NET，而不是 MVC。您是否使用MVC？

如果没有，你为什么不在`Literal`里面放一个控件`<li>`并在页面加载时填充它

在你的 aspx 中是这样的：

```
<li><a href ="#"><asp:Literal ID="lt_name" EnableViewState="false" 
 runat="server" Text=""></asp:Literal></a> 
```

在页面加载中，您执行以下操作：

```
var userName = userBLL.GetUserName(HttpContext.Current.User.Identity.Name);  

lt_name.text = userName.Firstname + " " + username.Lastname; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T08:07:25.467

**在你的代码隐藏类中**

```
public string UserFName = "";
public string UserMName = ""; 
```

**您分配的代码后面的代码：**

```
//Call the function which returns User's Name
var userName = userBLL.GetUserName(HttpContext.Current.User.Identity.Name);
if (userName != null)
{
this.UserFName = userName.FirstName;
this.UserMName = userName.MiddleName; 
} 
```

**最后在 aspx 代码中：**

```
<li><a href="#"><%=UserFName%>&nbsp;<%=UserMName%>&#9660;</a> 
```

请记住，如果用户名中允许使用特殊的 html 字符 - 您需要先转义这些字符，然后再将它们打印出来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T08:32:04.807

在您的 aspx 页面或网站母版页中，只需放置一个标签，例如..

```
 <asp:Label ID="lblLoggedUser" runat="server" Font-Names="Verdana" Enabled="false"
                        ForeColor="Blue" Font-Size="13px"></asp:Label> 
```

像这样从登录页面获取登录用户值会话。

```
Session["USER"] =txtusername.text; 
```

以及您的 sitemaster.cs 页面的 page_load

```
 lblLoggedUser.text= Session["USER"].tostring(); 
```

# javascript - 我怎么知道元素是最后一项？

> ID：11683681
> 
> 赞同：1
> 
> 时间：2012-07-27T07:55:36.103
> 
> 标签：javascript, jquery, html

例如，我们有

```
<ul><li></li><li></li>....</ul> 
```

我们不知道这些代码中有多少个 li 标记，现在我引用了这些 li 元素之一。有没有一种简单的方法可以知道这个引用是否是最后一项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:56:32.167

您可以使用[`:last-child`](http://api.jquery.com/last-child-selector/)选择器，并检查元素是否匹配它：

```
if( $('li').is(':last-child') ) {
    // ...
} 
```

您应该将`'li'`上面的选择器替换为对元素的引用。

请注意，替换它是必要的，因为如果匹配集中的*任何*[`.is()`](http://api.jquery.com/is/)元素与新选择器匹配，将返回 true ，因此您真的只想在特定的列表项上调用它。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:57:48.690

```
$('ul li').each(function() {
   if($(this).is(':last-child')) { 
      // I am the youngest!
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:59:29.360

最有效的方法是`last`在服务器上渲染时为其分配一个类。

这样，一个简单、便宜、高效`$( this ).hasClass( 'last' )`的就足够了。

例子：

```
<ul>
    <li></li>
    <li></li>
    <li></li>
    <li class="last"></li>
</ul> 
```

jQuery：

```
if ( $( this ).hasClass( 'last' ) ) { // cheap
} 
```

[请记住：渲染页面的大部分时间都花在客户端上，效率越高越好。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:59:47.893

```
$('ul li').on('click', function() {
    console.log($(this).is(':last-child'));
}); 
```*

# javascript - Backbone.Model.extend 不创建实例属性

> ID：11683683
> 
> 赞同：1
> 
> 时间：2012-07-27T07:55:50.720
> 
> 标签：javascript, backbone.js

我是 Backbone 和 JS 的新手，如果我错了，请纠正我......

使用来自backbone.js 站点的示例，

```
var Note = Backbone.Model.extend({
    initialize: function() { ... },
    author: function() { ... },
    coordinates: function() { ... },
    allowedToEdit: function(account) {
        return true;
    } 
}); 
```

Backbone.js 说，

> “要创建自己的 Model 类，您可以扩展 Backbone.Model 并提供实例属性，以及 > 以及可直接附加到构造函数的可选 classProperties。”

所以我创建了两个对象，

```
var n1 = new Note;
var n2 = new Note; 
```

现在属性 autor、allowedToEdit 坐标等，不是 n1 和 n2 的实例属性。它们是在**proto**链接下创建的。如何在backbone.js 中创建实例属性

此外，如果我尝试在对象中修改 javascript 中的继承属性，则继承的属性不会更改。而是在对象实例属性中创建具有相同名称的新属性。我如何做到这一点？提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T10:09:04.697

我相信您对 extend 的作用有些困惑。扩展类似于继承。如果您`Model`以这种方式扩展，您将创建一个派生的“类” `Note`，该“类”现在具有这些成员函数。

但这不是你想要的，我不认为。您需要一个具有这些 DATA 属性的模型。向实例添加数据很简单：

```
var Note = Backbone.Model.extend({});
var n1 = new Note({
    author: "Gautham",
    coordinates: {x: 200, y: 100},
    allowedToEdit: true
});

var author = n1.get("author"); 
```

换句话说，Backbone 模型上的数据属性是动态的。您无需在`Note`派生中声明它们。

但是，如果您希望`Note`派生具有这样的属性，则始终可以将它们定义为代理到`get`函数：

```
var Note = Backbone.Model.extend({
    author: function() { return this.get('author'); },
    coordinates: function() { return this.get('coordinates'); }
    allowedToEdit: function() { return this.get('allowedToEdit'); }
});
var n1 = new Note({...});
var author = n1.author(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:31:50.577

您想使用 defaults 属性，这是您所期望的行为：

```
var Note = Backbone.Model.extend({
  defaults:function(){
    return {
      author : 'Default author',
      coordinates : [0,0],
    };
  }
});

var note1 = new Note;
var note2 = new Note;
var note3 = new Note({author: 'Daniel!', coordinates:[9,9]});

console.log( note1.toJSON() );
console.log( note2.toJSON() );
console.log( note3.toJSON() ); 
```

# asp.net - 与客户端的 WCF 通知和回调

> ID：11683684
> 
> 赞同：3
> 
> 时间：2012-07-27T07:55:52.857
> 
> 标签：asp.net, wcf, wcf-security, wcf-client

![](../Images/af615a45e7b0ad7d0748693fb7d2bea0.png)

如上所示，我试图实现相同的目标。详细地 ：

1.  我在公共 IP 和具有 Internet 访问权限的 WCF 客户端上有 WCF 服务

    **中央服务**：它应该检查中央节点的任何价格变化并将其通知给 WCF 客户端。

    **客户端服务**：根据中央服务的通知，客户端将执行从服务器拉取数据并确认相同的返回。

2.  *首先，我希望我的中央服务了解客户端并向客户端发送通知，我的问题是如何查看它们（WCF 客户端）？即使作为订阅者列出我应该通知 WCF 客户端的客户端的哪些数据。*

3.  *其次，客户端需要在完成特定任务时更新服务器。*

此外，我正在寻找有关模式建议或有关如何实现相同目标的任何想法的回答者。任何链接将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:40:29.217

> 首先，我希望我的中央服务了解客户端并向客户端发送通知，我的问题是如何查看它们（WCF 客户端）？即使作为订阅者列出我应该通知 WCF 客户端的客户端的哪些数据。

看起来你想实现一个发布者 - 订阅者架构，你通过回调实现你列出的要求。实现此目的的标准方法是让您的客户订阅您的中央服务。订阅后，您的中央服务将在字典中保留已连接客户端的列表（您将客户端表示为回调实例）（这是一种方式，静态列表是另一种方式）。例如：

`static Dictionary<INotificationCallback, string> subscribers = new Dictionary<INotificationCallback, string>();`

当客户端订阅您的服务时，您可以将每个回调实例添加到您的订阅者字典中（您实际上将连接到您的服务的回调客户端的每个实例与其用户名一起存储，即字典中的字符串 vlaue）。

您的中央服务还需要定义一个回调合约（这里我们的回调合约是`INotificationCallback`），以便它可以在连接到它的客户端上调用一些操作。这将允许您的中央服务向客户发送它想要的任何数据，即每当价格发生变化时。

> 其次，客户端需要在完成特定任务时更新服务器。

只需在您的中央服务上定义另一个操作合同，您的客户将在成功完成任务时调用该合同。如何跟踪已完成的任务以及如何跟踪它们完全取决于您。

最近有人问了一个类似的问题，我想如果你看看[我的回答](https://stackoverflow.com/a/11147968/189756)，你会发现它很有帮助。另外，当我想学习 WCF 中的 pub-sub 模式和双工通信时，我发现[这篇文章](http://tomasz.janczuk.org/2009/11/pubsub-sample-with-wcf-nettcp-protocol.html)很有帮助。但是，如果您希望通过 Internet 执行此操作，则不应使用，而应使用支持双工的基于 HTTP 的绑定，`netTcpBinding`例如Silverlight 客户端。`wsDualHttpBinding``HttpPollingDuplex`

更新：根据您的要求提供一些更有用的文章/示例：

1.  [设计模式：基于列表的发布-订阅](http://msdn.microsoft.com/en-us/library/ms752254.aspx)
2.  [发布者/订阅者模型的 WCF 实现](http://www.codeproject.com/Articles/22796/WCF-Implementation-of-the-Publisher-Subscriber-Mod)
3.  [一个 WCF-WPF 聊天应用程序](http://www.codeproject.com/Articles/25261/A-WCF-WPF-Chat-Application)

最后一个是聊天应用程序，它本质上使用双工，这是一种与您正在寻找的服务架构非常相似的服务架构。

# c# - windows phone 上的 XML 反序列化

> ID：11683690
> 
> 赞同：1
> 
> 时间：2012-07-27T07:56:23.810
> 
> 标签：c#

我正在尝试根据[在 Windows Phone 上处理 XML 文件来反序列化 Windows Phone 上的 XML 文件](http://diggthedrazen.com/2011/07/05/xml-deserialization-on-windows-phone/)

XML 文件与此类似

```
<positions>  
<POS LAT=12312312 LON=23113123\>
</positions> 
```

在我使用的 C# 中，

```
[XMLRoot("positions")]
public class Positions    
{
[XmlArray] //These two lines seem to be where the problem is...
[XmlArrayItem("POS")]
public ObservableCollection<POS> Collection {get;set;}
} 
```

POS.cs 类看起来像

```
public class POS.cs
{
[XMLAttribute("LAT")]
public string LAT{get;set;} 
```

[XmlArray("FOO")] 和 [XmlArrayItem("BAR")] 应该是什么样子？这里有些东西不能正常工作...感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:58:57.033

XmlArray/XmlArrayItem 用于您想要两层层次结构的地方；在您的情况下，`POS`是 的直接子级`positions`，因此`XmlElement`正确的布局也是如此：

```
[XmlRoot("positions")]
public class Positions    
{
    [XmlElement("POS")]
    public ObservableCollection<POS> Collection {get;set;}
} 
```

# javascript - 高图表定制上的 Yaxis 值

> ID：11683695
> 
> 赞同：1
> 
> 时间：2012-07-27T07:56:44.797
> 
> 标签：javascript, highcharts

我一直在尝试按照我的定义在我的 highchart 上填充 yaxis 值，结果应该相应地显示，但是我所有的努力都是徒劳的，我无法手动设置`this.value`highchart 的 yaxis 。以下是我的 Jsfiddle 的链接。请帮助..

[http://jsfiddle.net/CzHyC/12/](http://jsfiddle.net/CzHyC/12/)

在下面的 JS 代码中，我一直在尝试将 yaxis 设置`this.value`为 yAxisLabels 的数组值，但是没有标记值，并且没有相应地显示图表。

**YAXIS 的 JS 代码**

```
var yAxisLabels = ['5','10','20','30','40','50'];

yAxis: {
    labels: {
        formatter: function () {
            for (i=0; i<=5; i++) {
                this.value=yAxisLabels[i];
                return this.value;
            }
        }
    },

    title: {
        text: 'Total fruit consumption'
    },
    stackLabels: {
        enabled: true,
        style: {
            fontWeight: 'bold',
            color: (Highcharts.theme && Highcharts.theme.textColor) || 'blue'
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:18:48.543

你也可以这样设置

```
tickPositions: [0, 5, 10, 20, 30, 40, 50], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:59:59.323

您可以使用刻度定位器来定义您的轴刻度值：

[见 jsfiddle](http://jsfiddle.net/CzHyC/22/)

重要的部分是：

```
var yAxisLabels = [0, 5, 10, 20, 30, 40, 50]; 
```

您的轴标签数组包含数字而不是字符串

和

```
tickPositioner: function() {
                return yAxisLabels;
            }, 
```

tickPositioner 返回您的数组。

[TickPositioner 文档](http://www.highcharts.com/stock/ref/#yAxis--tickPositioner)

# google-app-engine - 一段时间后 Cron 作业失败

> ID：11683696
> 
> 赞同：1
> 
> 时间：2012-07-27T07:57:00.470
> 
> 标签：google-app-engine

我创建了一个每 5 分钟运行一次的 cron 作业。但是当我部署到服务器时，它成功运行了半小时（大约）。之后它停止运行。服务器上的消息显示为“按时失败”我有 Google App Engine。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:01:43.323

您的虚拟主机是否提供经常使用的 cronjobs？如果习惯了很多或者 crons 很重，一些主机不喜欢这样。

# android - 覆盖 Android 库项目中的 Activity

> ID：11683697
> 
> 赞同：4
> 
> 时间：2012-07-27T07:57:07.007
> 
> 标签：android, android-activity, android-library

我有一个安卓项目。现在我需要创建该项目的第二版。

**会有什么不同：**

项目的新版本应在其中一项活动中具有不同的内容。

我正在考虑创建一个库项目和两个将使用库项目的新项目（`project1`和`project2`），但我真的不明白如何设置它。

我是否应该将原始项目转换为库，然后创建两个新项目，*然后呢*？如何在同一个地方`project1`使用`activity1`和`project2`使用？`activity2`

**编辑**

到目前为止我设置的内容：

**MainProject，一个库**有 MainActivity.java 和 ChildActivity.java

* * *

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mainproject">
    <application>
        <activity
            android:name=".MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ChildActivity">
        </activity>
    </application>
</manifest> 
```

MainActivity.java

```
 public class MainActivity extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState) {

            ((Button)findViewById(R.id.button1)).setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent intent = new Intent(MainActivity.this, ChildActivity.class);
                    startActivity(intent);
                }
            });
        }
} 
```

**StandAloneProject：**它只有 ChildActivity.java

* * *

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.standaloneproject">
    <application>
        <activity
             android:name="com.example.mainproject.MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ChildActivity" >
        </activity>
    </application>
</manifest> 
```

**我的期望：**

当我启动 StandAloneProject 并单击按钮时，我希望启动 StandAloneProject（而不是 MainProject）中的 ChildActivity。

**我得到什么：**

当我启动 StandAloneProject 时，我从 MainProject 中看到 MainActivity，单击按钮并获取：

```
android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.standaloneproject/com.example.mainproject.ChildActivity}; have you declared this activity in your AndroidManifest.xml? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:16:00.460

问题是如何在 MainActivity.java 中启动子活动。您需要“手动”确保启动了正确的 ChildActivity。

一种方法是为意图显式设置组件。Context.getPackageName() 函数返回您正在运行的应用程序的包名称，您可以使用它来识别要启动的 ChildActivity 的“正确实例”。在 MainActivity.java 的*onClick()*处理程序中试试这个：

```
 Intent intent = new Intent();       
    intent.setComponent(new ComponentName(getPackageName(), getPackageName() + ".ChildActivity"));
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T08:17:19.903

你的方法是正确的。

1.  创建您的库项目。
2.  创建一个新项目，创建您需要的活动并将您的库项目添加到其中。
3.  将 AndroidManifest.xml 从库项目复制到新项目中，但指向与项目活动不同的活动，而不是库项目中的活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T08:22:26.333

你在正确的轨道上。设置一个库项目和两个包含 lib 项目的标准 android 项目。请记住将清单活动复制到新项目。当您想要分离活动时，您可以从您的 lib 项目中扩展这些活动。project1: MyActivty 扩展了 Activit1 .. 项目 2 MyActivit

# android - 在 Android 中将电话麦克风路由到 Sco 蓝牙耳机

> ID：11683704
> 
> 赞同：2
> 
> 时间：2012-07-27T07:57:37.503
> 
> 标签：android, bluetooth, audio-streaming, headset

去年我的帖子中的这些机会如何让我看到了我在这个应用程序上的挣扎。现在我已经到了最后阶段，我真的不明白为什么代码不起作用。我想要做的是将音频流从电话麦克风路由到 sco 蓝牙耳机。手机是三星 Galaxy s2，耳机是 Esco Plastronics。我遵循了 android 网站上的文档，这就是我到目前为止所做的：

```
tools.Log("&&&&&&&& debug &&&&&&&&&","");
tools.Log("&&&&&&&& debug &&&&&&&&&","");
tools.Log("&&&&&&&& debug &&&&&&&&&","");
tools.Log("FBR.SetUpAudioRecoder", "In");
public static final int SAMPPERSER =  8000;
public int channelConfiguration = AudioFormat.CHANNEL_IN_MONO;
public int audioEncoding = AudioFormat.ENCODING_PCM_16BIT;
public AudioManager AM = (AudioManager) mcontext.getSystemService(Context.AUDIO_SERVICE);

buffersizebytes = AudioRecord.getMinBufferSize(SAMPPERSEC,channelConfiguration, audioEncoding);     buffersizebytes = (short) (buffersizebytes * 20);
audioRecord = new AudioRecord(
      android.media.MediaRecorder.AudioSource.MIC,SAMPPERSEC,channelConfiguration,audioEncoding,buffersizeb   ytes); // constructor
//Debug
boolean tmp = AM.isBluetoothScoAvailableOffCall();//Returns true
tools.Log("AM.isBluetoothScoAvailableOffCall() is -",tools.BoolToString(tmp));
try {
    audioRecord.startRecording();
} catch (IllegalStateException e) {
    tools.Log("FBR.GetAudioFromMic:startRecording:Error ",
                e.getMessage());
    return "Get Audio From Mic Error";
}
AM.setStreamSolo(AudioManager.STREAM_VOICE_CALL, true);
AM.setBluetoothScoOn(true);
AM.startBluetoothSco();// HERE I GET A BEEP ON THE HEADSET
tmp = AM.isBluetoothScoOn();// Returns true
tools.Log("AM.isBluetoothScoOn() is - ",    tools.BoolToString(tmp));
tools.Log("&&&&&&&& end debug &&&&&&&&&","");
tools.Log("&&&&&&&& end debug &&&&&&&&&","");
tools.Log("&&&&&&&& end debug &&&&&&&&&",""); 
```

清单文件上的许可是：

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.BROADCAST_STICKY"/> 
```

日志给了我很多我无法理解的信息，所以我只附上了几行。

```
20 08:56:02.090:D/SpySitter(9659): &&&&&&&&& debug &&&&&&&&&&-
01-20 08:56:02.090: D/SpySitter(9659): FBR.SetUpAudioRecoder-In

01-20 08:56:02.100: I/AudioHardwareYamaha(1833): getInputBufferSize() rate 8000, size 512 

01-20 08:56:02.110: I/AudioPolicyManager(1833): getDeviceForInputSource()input source 1, device 00100000

01-20 08:56:02.110: I/AudioHardwareYamaha(1833): AudioStreamIn::set(1, 16, 8000)

01-20 08:56:02.110: I/AudioHardwareYamaha(1833): bufferSize() channels 2, bufferRatio 4, size 1024

01-20 08:56:02.115: I/AudioHardwareYamaha(1833): AudioStreamIn::standby()

01-20 08:56:02.120: D/SpySitter(9659): AM.isBluetoothScoAvailableOffCall() is - -true

01-20 08:56:02.125: I/AudioService(1989): isMediaSilentMode false

20 08:56:02.140: I/AudioPolicyManager(1833): getDeviceForStrategy() strategy 4, device 2

01-20 08:56:02.145: I/AudioPolicyManager(1833): setForceUse() usage 2, config 3, mPhoneState 0

01-20 08:56:03.475: E/DataRouter(1828): usb connection is true 

01-20 08:56:03.475: E/DataRouter(1828): DSR is ON. Don't send DTR ON

01-20 08:56:05.010: D/Bluetooth HS/HF(2240): initiateScoUsingVirtualVoiceCall: Received

01-20 08:56:05.010: V/Bluetooth AT sent(2240): +CIEV: 3,2

01-20 08:56:05.010: D/Bluetooth HS/HF(2240): initiateScoUsingVirtualVoiceCall: Sent Call-setup 
procedure

01-20 08:56:05.010: D/Bluetooth HS/HF(2240): audioOn()

01-20 08:56:05.010: D/Bluetooth HS/HF(2240): setAudioState(11)

01-20 08:56:05.015: D/Bluetooth HSHFP(2240): AudioStateIntent:  State: 11 PrevState: 10

01-20 08:56:05.015: V/BluetoothSocket.cpp(2240): initSocketNative

01-20 08:56:05.015: V/BluetoothSocket.cpp(2240): ...fd 99 created (SCO, lm = 0)

01-20 08:56:05.015: V/BluetoothSocket.cpp(2240): initSocketFromFdNative

01-20 08:56:05.040: D/Bluetooth HS/HF(2240): initiateScoUsingVirtualVoiceCall: Done

01-20 08:56:05.045: I/BluetoothPolicyService(1989): isPairingEnabled 

01-20 08:56:05.055: D/BluetoothUtils(2240): isSocketAllowedBySecurityPolicy start : device null

01-20 08:56:05.055: V/BluetoothSocket.cpp(2240): connectNative

01-20 08:56:05.065: V/Bluetooth AT recv(2240): AT+CLCC

01-20 08:56:05.070: V/Bluetooth AT sent(2240): +CLCC: 1,0

01-20 08:56:05.080: V/BluetoothSocket.cpp(2240): ...connect(99, SCO) = 0 (errno 115)

01-20 08:56:05.080: D/Bluetooth HS/HF(2240): Routing audio for outgoing SCO conection

01-20 08:56:16.455: D/SpySitter(9659): &&&&&&&&&&&& end debug&&&&&&&& 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T16:25:49.320

在 AM.setBluetoothScoOn(true) 附近，您可能需要调用 AM.setMode(MODE_IN_COMMUNICATION);

# bean-validation - 共享库中的 Bean 验证约束

> ID：11683708
> 
> 赞同：1
> 
> 时间：2012-07-27T07:57:54.400
> 
> 标签：bean-validation

我有许多使用相同验证约束的 jsf2 Web 项目。

1.  我可以将所有这些约束放在一个共享库中吗？
2.  如果是，我可以为验证消息提供翻译吗？
3.  如果是，我怎样才能以标准方式实现它？
4.  以下包结构是否正确？

commons.jar 库：

```
commons.jar
    |
    + library
    |   |
    |   + CustomConstraint1.class
    |   + CustomConstraint2.class
    |
    + ValidationMessages_it.properties
    + ValidationMessages_en.properties
    + ValidationMessages_de.properties 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T11:22:49.090

> 1.  我可以将所有这些约束放在一个共享库中吗？

是的你可以。

> 1.  如果是，我可以为验证消息提供翻译吗？

是的，这也是可能的。

> 1.  如果是，我怎样才能以标准方式实现它？

例如，您有这样的约束：

```
package com.example.constraints;

@Target({
        ElementType.FIELD,
        ElementType.PARAMETER,
        ElementType.METHOD
})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = {
    FooValidator.class
})
public @interface Foo
{
    String message() default "{com.example.constraints.Foo.message}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};
} 
```

`ValidationMessages.properties`在类路径的根目录中指定 a （对于应用程序的默认语言）。对于额外的语言环境，您应该指定一个`ValidationMessages_[locale].properties`文件。对于荷兰语语言环境，它应该是`ValidationMessages_nl.properties`.

然后在这些文件中，将消息变量定义为键，将消息定义为值，如下所示：

```
com.example.constraints.Foo.message=Foo is not valid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T15:06:33.230

您的捆绑适用于独立 jar。如果您将此 jar 放入具有自身约束和类路径根目录中的 ValidationMessages.properties 的 ear/war 中，它将无法工作。

# php - PHP中带有特殊字符的查询参数的正确URL编码

> ID：11683711
> 
> 赞同：0
> 
> 时间：2012-07-27T07:58:19.087
> 
> 标签：php, http, url

PHP 中的 urlencode() 或 htmlentities() 都没有正确编码某些字符，因为我猜它们不在初始集中。

例如，类似[http://youtu.be/2MfXW_lUZOc](http://youtu.be/2MfXW_lUZOc)的内容将被编码为“http%3A%2F%2Fyoutu.be%2F2MfXW lUZOc”（注意空格替换下划线）

我正在寻找类似于 encodeURIComponent() javascript 函数的东西。任何想法？

# mysql - SQL Group By and min (MySQL)

> ID：11683712
> 
> 赞同：7
> 
> 时间：2012-07-27T07:58:19.703
> 
> 标签：mysql, sql, group-by, min

我有以下 SQL：

```
select code, distance from places; 
```

输出如下：

```
CODE    DISTANCE            LOCATION
106     386.895834130068    New York, NY
80      2116.6747774121     Washington, DC
80      2117.61925131453    Alexandria, VA
106     2563.46708627407    Charlotte, NC 
```

我希望能够只获得一个代码和最近的距离。所以我希望它返回这个：

```
CODE    DISTANCE            LOCATION
106     386.895834130068    New York, NY
80      2116.6747774121     Washington, DC 
```

我最初有这样的事情：

```
SELECT code, min(distance), location
GROUP BY code
HAVING distance > 0 
ORDER BY distance ASC 
```

如果我不想获得与最短距离相关的正确位置，则最小值可以正常工作。我如何获得最小（距离）和正确的位置（取决于表中插入的顺序，有时您最终可能会得到纽约距离，但位置中的夏洛特）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T08:30:08.713

要获得正确的关联位置，您需要加入一个子选择，该子选择在外部主表中的距离与子选择中派生的最小距离匹配的条件下获得每个代码的最小距离。

```
SELECT a.code, a.distance
FROM   places a
INNER JOIN
(
    SELECT   code, MIN(distance) AS mindistance
    FROM     places
    GROUP BY code
) b ON a.code = b.code AND a.distance = b.mindistance
ORDER BY a.distance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:01:51.747

您可以尝试在最小分组和原始表之间进行嵌套查找。

这似乎可以解决问题

```
SELECT MinPlaces.Code, MinPlaces.Distance, Places.Location 
FROM Places INNER JOIN
(
    SELECT Code, MIN(Distance) AS Distance
    FROM Places
    GROUP BY Code
    HAVING MIN(Distance) > 0 
) AS MinPlaces ON Places.Code = MinPlaces.Code AND Places.Distance = MinPlaces.Distance
ORDER BY MinPlaces.Distance ASC 
```

**更新**：使用以下测试：

```
DECLARE @Places TABLE ( Code INT, Distance FLOAT, Location VARCHAR(50) )

INSERT INTO @Places (Code, Distance, Location)
VALUES
(106, 386.895834130068, 'New York, NY'),
(80, 2116.6747774121, 'Washington, DC'),
(80, 2117.61925131453, 'Alexandria, VA'),
(106, 2563.46708627407, 'Charlotte, NC')

SELECT MinPlaces.Code, MinPlaces.Distance, P.Location 
FROM @Places P INNER JOIN
(
    SELECT Code, MIN(Distance) AS Distance
    FROM @Places
    GROUP BY Code
    HAVING MIN(Distance) > 0 
) AS MinPlaces ON P.Code = MinPlaces.Code AND P.Distance = MinPlaces.Distance
ORDER BY MinPlaces.Distance ASC 
```

这会产生：

![在此处输入图像描述](../Images/407ffe1c94b02a84f0800c740c13d475.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:03:54.823

你没有说你的 DBMS。以下解决方案适用于 SQL Server。

```
WITH D AS (
   SELECT code, distance, location,
      Row_Number() OVER (PARTITION BY code ORDER BY distance) Seq
   FROM places
)
SELECT *
FROM D
WHERE Seq = 1 
```

如果您有一个带有唯一代码的表，并且在 [代码，距离] 上的 Places 表中有一个索引，那么 CROSS APPLY 解决方案可能会更好：

```
SELECT
   X.*
FROM
   Codes C
   CROSS APPLY (
      SELECT TOP 1 *
      FROM Places P
      WHERE C.Code = P.Code
      ORDER BY P.Distance
   ) X 
```

直到很久以后，我才能为 mysql 解决方案。

PS您不能依赖广告订单。不要尝试！

# algorithm - 一种在表面上排列随机大小的正方形的算法？

> ID：11683714
> 
> 赞同：2
> 
> 时间：2012-07-27T07:58:25.740
> 
> 标签：algorithm

这个问题真的很简单，我有一个随机大小的正方形数组（宽度，高度）和一个固定宽度的表面。在这个表面上排列正方形的最佳有效算法是什么？方格之间不能有无用的空隙。有可能吗？不使用人工智能或繁重的处理？

类似于这张图片的东西，但假设我的表面在底部没有界限，它是一个固定宽度和无界限高度的表面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T08:03:59.573

这个问题称为二维装箱。这是解决它的一种方法：

[http://codeincomplete.com/posts/2011/5/7/bin_packing/](http://codeincomplete.com/posts/2011/5/7/bin_packing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:07:51.353

对于这样的事情，您可以使用[Bin Packing Problem](http://en.wikipedia.org/wiki/Bin_packing_problem)的变体，尝试在工作表中*打包*尽可能多的正方形，或者使用（可能看起来更合适的）[Cutting Stock Algorithm](http://en.wikipedia.org/wiki/Cutting_stock_problem)。

但是请注意，在这两种情况下，您的方格之间不太可能没有间隙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:17:28.090

这种类型的优化问题被称为[线性规划（linear optimization）](http://en.wikipedia.org/wiki/Linear_programming)。坏消息是它很复杂。

看看[Simplex算法](http://en.wikipedia.org/wiki/Simplex_algorithm)代数方法，还有比较通用的数值方法，搜索内点方法。

有免费的图书馆，如：[LP_SOLVE](http://www.cs.sunysb.edu/~algorith/implement/lpsolve/implement.shtml)

# java - 抑制“Picked up _JAVA_OPTIONS”消息

> ID：11683715
> 
> 赞同：41
> 
> 时间：2012-07-27T07:58:26.193
> 
> 标签：java, rhel

我正在使用 _JAVA_OPTIONS 为 RHEL 上的 Java 设置一些默认值。它工作正常，但现在每次我启动 java 我都会收到以下消息

> 拿起_JAVA_OPTIONS：-foo -bar -baz

是否可以保留选项但禁止显示此消息。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-13T15:34:00.557

通过查看相关源代码（[openjdk 中的 arguments.cpp，第 2492 行](http://cr.openjdk.java.net/~gbenson/zero-11-hotspot/hotspot/src/share/vm/runtime/arguments.cpp.html)），无法控制此消息的输出。

我唯一能说的是它被打印到`stderr`. 因此，您可以包装您的命令以重定向`stderr`到`/dev/null`（如果您不关心其他任何内容`stderr`）。

*   或者编写一个`java`过滤掉这个消息的包装脚本。
*   或者向 openjdk 项目提交功能请求，尽管这不会解决您的直接问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-13T14:52:06.137

在哪里`_JAVA_OPTIONS`设置？在你的 .bashrc 中？

改用别名，例如

```
alias java="`which java` -Dwhatever" 
```

* * *

实际上，没有必要知道它被设置在哪里来完成这项工作：

```
_SILENT_JAVA_OPTIONS="$_JAVA_OPTIONS"
unset _JAVA_OPTIONS
alias java='java "$_SILENT_JAVA_OPTIONS"' 
```

# php - 使用 Php 将日期输入 Mysql 时遇到问题

> ID：11683717
> 
> 赞同：1
> 
> 时间：2012-07-27T07:58:26.440
> 
> 标签：php, mysql, forms, date, insert

嗨，我正在学习 php 和 mySQL，我在将日期插入或更新到 MySQl 时遇到问题。

我得到的错误通常是这样的：你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '08:17:00, 2012-07-12 08:17:00, 2012-07-12 08:17:00, 2012-07- 附近使用正确的语法12 08:17:00

我有 4 个日期条目，因此上面有 4 个日期的原因。所以日期似乎要到了，但时间有问题。在我的数据库中使用日期时间。

这是我的代码，我过滤掉了不必要的东西，因为如果我注释掉日期插入，其他所有内容都会很好地插入。

```
$end_date = ($_POST['end_date']);
$end_date = date('Y-m-d H:i:s',strtotime($end_date)); 
```

插入查询很简单：

```
mysql_query("INSERT INTO deals (end_date) 
VALUES ('$end_date')") 

or die(mysql_error()); 
```

现在我真的花了几个小时研究这个并尝试了一堆没有运气的组合，我确实应用于更新的一个解决方案是这个工作正常但我不知道如何将它应用到插入，因为我不需要在这个添加的 3 天情景，我想更好地在我学习的同时解决这个日期问题。

```
$sql = "UPDATE deals SET deal_end_date = DATE_ADD(now(), INTERVAL $my_expiry DAY)"; 
```

现在我的学习方式是观看一个 40 小时的基础教程，然后制作一个网站，对于网站的每个部分，我都会遇到不同的问题，我会研究如何编写代码并一次学习一点。我发现这比阅读手册更有动力。

将不胜感激任何帮助。因为我正在学习可能会简化代码以使其更具可读性，所以我可以稍后考虑剥离代码，但我想尝试更好地理解它，如果解决方案采用更易读的格式，那将有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:01:25.757

编写查询的方式是无效的语法。尝试转储组合字符串以进行调试，您会发现引号是错误的。

错误的：

```
INSERT INTO deals (end_date) VALUES ('2012-07-12 08:17:00, 2012-07-12 08:17:00, 2012-07-12 08:17:00'); 
```

正确的会是这样的：

```
INSERT INTO deals (end_date) VALUES ('2012-07-12 08:17:00', '2012-07-12 08:17:00', '2012-07-12 08:17:00'); 
```

# tomcat - 在tomcat中，如何在服务器端启用gzip配置后默认返回没有gzip压缩的原始响应有效负载？

> ID：11683718
> 
> 赞同：0
> 
> 时间：2012-07-27T07:58:26.783
> 
> 标签：tomcat, gzip

在 tomcat/conf/server.xml 中，我启用了 gzip 压缩，如下所示。

```
compression="on" compressableMimeType="application/json" compressionMinSize="2048" 
```

当客户端在请求标头中明确传递“Accept-Encoding：gzip，deflate”时，我想检查任何解决方案，然后使用 gzip 压缩的 tomcat retunr 响应有效负载。

否则，当请求头中没有更多的键值时，tomcat默认返回没有gzip压缩的payload。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:12:28.497

您描述的是Tomcat的默认行为。除非它找到包含值*gzip的**Accept-Encoding*标头，否则它不会压缩输出。

 *如果您想实现自己的、非常具体的压缩，那么您可以从 Tomcat 源代码`CompressionFilter`和`CompressionServletResponseWrapper`.*

# asp.net - 将 MVC3 中的视图到模型中的一对多表实体传递到数据库中的更新

> ID：11683726
> 
> 赞同：0
> 
> 时间：2012-07-27T07:59:02.807
> 
> 标签：asp.net, ajax, asp.net-mvc, asp.net-mvc-3, razor

当我提交 Ajax.BeginForm 表单时，我在 Controller 上得到了 Model 的 null 值。模型内部有另一个模型（一对多关系）

这是我的示例视图代码（删除了不必要的东西）

```
 <table id="PageSortTable" class="travelads_business_rules" cellspacing="0">
<thead>
    <tr valign="bottom">
        <th>ID</th>
        <th>&nbsp;</th>
        <th>&nbsp;</th>
        <th>Rule Name</th>
        <th>Business</th>
        <th>Region</th>
        <th>Form</th>
        <th>Company</th>
        <th>Team</th>
        <th>Language</th>
        <th>Media</th>
        <th>InsertLoc</th>
        <th>Size</th>
        <th>Access</th>
    </tr>
</thead>
<tbody>
    @foreach (var item in Model)
    {
        <tr valign="top">
            <td class="col_a">
                <span>@item.id</span>
            </td>
            <td class="col_b">
                <a href="@(Url.Action("EditTravelAdsRule", new { id = item.id }))">
                    <img alt="Edit" class="tableItemImage" src="../../Content/Images/Edit-icon.PNG" title="Edit" />
                </a><a href="@(Url.Action("DeleteTravelAdsRule", new { id = item.id }))">
                    <img alt="Delete" class="tableItemImage" src="../../Content/Images/delete-icon.PNG"
                        title="Delete" />
                </a>
            </td>
            <td class="col_c">
                <div class="tableButtonCell"><a href="#" onclick='DoExpandCollapsh("trMinimised@(item.id)")'>
                        <img alt="Details" class="tableItemImage" src="../../Content/Images/expand-icon.png"
                            title="Expand" /></a></div>
            </td>
            <td class="col_d"><span>@item.ad_rule_name</span></td>
            <td class="col_f"><span>@item.business</span></td>
            <td class="col_g"><span>@item.ad_region</span></td>
            <td class="col_h"><span>@item.ad_form</span></td>
            <td class="col_i"><span>@item.ad_company</span></td>
            <td class="col_j"><span>@item.ad_team</span></td>
            <td class="col_k"><span>@item.ad_language</span></td>
            <td class="col_l"><span>@item.ad_media_id</span></td>
            <td class="col_m"><span>@item.ad_insert_loc</span></td>
            <td class="col_n"><span>&nbsp;</span></td>
            <td class="col_o"><span>@item.access</span></td>
        </tr>
        <tr class="minimised" id='trMinimised@(item.id)'>
            <td colspan="13">
                @using (Ajax.BeginForm("_SaveGroupMatchs", null, new AjaxOptions { OnSuccess = "onSuccess", UpdateTargetId = "msgResult", LoadingElementId = "msgLoading" }, new { @id = "SaveForm"}))
                {  

                <div class="detail">
                    <div class="table_header">
                        <span class="col_a">Group</span> <span class="col_b">Group Scope</span> <span class="col_c">
                            Seq</span> <span class="col_d">&nbsp;</span> <span class="col_e">ID</span> <span
                                class="col_f">Match Location</span> <span class="col_g">Target Field</span>
                        <span class="col_h">Match Type</span> <span class="col_i">Set Name</span>
                    </div>
                    <!-- Loop for matches -->
                    <!-- start GROUP -->
                    <div class="group">
                        @foreach (var item1 in item.lstMatches)
                        {
                            <div id="rule@(item.id)_divRuleGroup_@(item1.match_group_num)">
                            <header id="header_rule_Group"><span class="col_a">@(item1.match_group_num)  </span><span class="col_b">
                                            @Html.DropDownListFor(model => item1.match_group_scope, new SelectList((List<QIOnlineMVC3.Helpers.clsGroupScope>)QIOnlineMVC3.Helpers.General.GetALLGroupScope(), "GroupNum", "GroupScope", item1.match_group_num))
                                          </span></header>
                            <div class="match">
                                <span class="col_c">@(item1.match_group_seq) @Html.HiddenFor(model=>item1.match_group_seq) </span> <span class="col_d"><a href="#">
                                    <img src="../../Content/Images/delete-icon.png" width="17" height="17" border="0"
                                        title="delete" /></a> </span><span class="col_e">@(item1.match_id)
                                        </span><span class="col_f">
                                            @Html.DropDownListFor(model => item1.match_loc, new SelectList((List<QIOnlineMVC3.Helpers.clsMatchLocations>)QIOnlineMVC3.Helpers.General.GetALLMatchLocations(), "MatchLocations", "MatchLocations", item1.match_loc))
                                        </span><span class="col_g">
                                            @Html.DropDownListFor(model => item1.match_target_field, new SelectList((List<QIOnlineMVC3.Helpers.clsTargetField>)QIOnlineMVC3.Helpers.General.GetALTargetField(), "TargetField", "TargetField", item1.match_target_field))
                                        </span><span class="col_h">
                                            @Html.DropDownListFor(model => item1.match_type, new SelectList((List<QIOnlineMVC3.Helpers.clsMatchType>)QIOnlineMVC3.Helpers.General.GetALLMatchType(), "MatchTypeID", "MatchType", item1.match_type))
                                        </span><span class="col_i">
                                            @Html.TextBoxFor(model => item1.match_set_name, new { @value = item1.match_set_name, @class="clsauto" })
                                           @* <input type="text" name="sets" id="sets" class="clsauto" style="width:200px;" value='@(item1.match_set_name)'/>*@
                                            </span>
                            </div>
                            </div>
                        }
                        <!-- end MATCH -->
                        <div class="new">
                            <a href="#">
                                <img src="../../Content/Images/new-icon.png" width="17" height="17" border="0" alt="New Match" />New
                                Match</a></div>
                    </div>
                    <!-- end MATCH GROUP -->
                    <!-- END Loop of Matches -->
                    <div class="new new_group">
                        <img alt="" src="../../Content/Images/new-icon.png" width="17" height="17" border="0" />@Ajax.ActionLink("New Group", "GetGroupMatch", new AjaxOptions{ UpdateTargetId = "divNewGroup", HttpMethod = "Get", InsertionMode = InsertionMode.InsertAfter})
                        <div class="delete_group">
                            Delete Group ID:
                            <input type="text" id='txtdeleteGroupNo_@(item.id)' />
                            <input type="submit" id='btnDeleteGroup_@(item.id)' value="Delete Group" class="btn btn_delete" style="float: none;" onclick="return DeleteGroup(this);" />
                        </div>
                    </div>
                    <div id="divNewGroup">
                    </div>
                    <div class="btn_row">
                        <input type="reset" name="reset" class="btn" value="Cancel" onclick='DoExpandCollapsh("trMinimised@(item.id)","main_collapsed@(item.id)","main_expanded@(item.id)")'/>
                        <input type="submit" name="btnSave" class="btn" value="Save" />
                        <a href="@(Url.Action("DeleteTravelAdsRule", new { id = item.id }))" class="btn btn_delete">
                            Delete Rule</a>
                    </div>
                </div>
                }

            </td>
        </tr>

    }
</tbody> 
```

这是我的控制器操作

```
 [Authorize]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult _SaveGroupMatchs(FormCollection fc, TravelAdsRulesMatchsGroups trmg)
    { 
   // trmg is null here... I  am getting form collection but its comma separated, very annoying to deal with that.
   } 
```

任何人都可以有想法，我如何获得模型值。

这是我的班级信息

主类 TravelAds - 需要显示邮件记录（网格）

TravelAdsRulesMatchsGroups - 表内的第一个 foreach 循环类

MatchCollection - TravelAdsRulesMatchsGroups 中的第二个 foreach 循环类

我试图在控制器中获取带有值和子类（匹配集合）的 TravelAdsRulesMatchsGroups 对象，我认为无论如何都应该有。

提前致谢 - Amit Prajapati

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:08:58.623

你写的那些`foreach`循环正在扼杀一切。请阅读您需要用于命名默认模型绑定器期望的输入元素的标准约定：http: [//haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

现在查看生成的页面的 HTML 源代码，更具体地说是输入字段的名称。什么乱七八糟的，不是吗？没有什么符合默认模型绑定器的预期。当您使用表达式（例如`model => item1.match_type`生成的输入字段的名称）时，不会考虑复杂属性的当前导航上下文。

一种可能性是使用编辑器模板而不是那些 foreach 循环。这是我推荐的解决方案。我写了无数关于他们的帖子，只是[谷歌](http://www.google.com/#hl=en&sclient=psy-ab&q=darin+dimitrov+editor+templates+asp.net+mvc+foreach+site%3ahttp://stackoverflow.com&oq=darin+dimitrov+editor+templates+asp.net+mvc+foreach+site%3ahttp://stackoverflow.com&gs_l=hp.3...2475.7013.1.7194.30.30.0.0.0.0.131.2830.20j10.30.0...0.0...1c.TtA2wHm0hbw&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=3d04e930a01db91d&biw=1600&bih=795)。

另一种可能性是修改模型以使用索引集合，然后使用`for`循环而不是`foreach`：

```
@for (var i = 0; i < Model.Count; i++)
{
    ... some stuff ....

    @Html.TextBoxFor(x => x[i].SomeProperty)

    @for (var j = 0; j < Model[i].SomeCollectionProperty.Count; j++)
    {
        ... some stuff, ajax forms etc ....
        @Html.TextBoxFor(x => x[i].SomeCollectionProperty[j].SomeOtherProperty)
    }
} 
```

注意现在使用的 lambda 表达式不仅包括导航属性名称，还包括索引。这将允许助手为输入字段生成正确的名称。

# .net - Windows 7 中的无边框窗口

> ID：11683739
> 
> 赞同：0
> 
> 时间：2012-07-27T07:59:58.133
> 
> 标签：.net, wpf, xaml, windows-7, border

我尝试删除 WPF 窗口的边框。在 Window XP 中运行良好。在 Windows 7 中，标题栏消失了（这没关系），但窗口边框没有消失：这就是问题所在。

**问题：我必须改变什么来移除边框？**

这是 XAML 代码：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" WindowStyle="None" >
    <Grid>
        <TextBlock Height="261" HorizontalAlignment="Left" Margin="55,29,0,0" Name="textBlock1" Text="Some text" VerticalAlignment="Top" Width="419" FontSize="36" />
    </Grid>
</Window> 
```

我在下面附上了一个打印屏幕： ![在此处输入图像描述](../Images/9a36cf4b11e1c90b19b8ffb259d1e513.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:05:34.770

将[ResizeMode](http://msdn.microsoft.com/en-us/library/system.windows.window.resizemode)设置 为`NoResize`：

```
<Window ... WindowStyle="None" ResizeMode="NoResize"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:12:56.337

可以设置`AllowsTransparency="True"`，边框会消失

# asp.net - 使用 ASP.NET 3.5 aspx 页面从同一域上的服务器调用 ASP.NET 4 MVC 资源

> ID：11683745
> 
> 赞同：0
> 
> 时间：2012-07-27T08:00:16.533
> 
> 标签：asp.net, asp.net-mvc, iis-7.5, asp.net-mvc-4

我是 ASP 领域的新手，想试用 ASP.NET Framework 4.0 MVC 4。在我们的域中，我有一个运行带有 MVC 的 IIS 7.5 的测试服务器和一个运行带有 .NET Framework 2.0 版本的 IIS 7.5 的生产服务器。我的问题：如何在不更改客户端浏览器中的 URL 的情况下将调用转移到生产服务器收到的 MVC 资源？修改生产服务器会导致我们的支持团队出现高血压，因此我的最后一个选择是使用 url 重写或对 IIS 进行任何其他修改的反向代理。我已经尝试过 server.transfer(url, true) 但它需要一个现有的 *.aspx 页面。欢迎解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:35:42.827

假设您的测试服务器上有 MVC 提供的部分视图，您可能可以执行以下操作：

```
protected void Page_Load(object sender, EventArgs e)
{
    string content = null;
    var mvcTestSiteUrl = "whatever";
    WebRequest request = WebRequest.Create(mvcTestSiteUrl);
    WebResponse response = request.GetResponse();
    Stream stream = response.GetResponseStream();
    if (stream != null)
    {
        StreamReader reader = new StreamReader(stream);
        content = reader.ReadToEnd();
        reader.Close();
        stream.Close();
    }
    response.Close();
    // now you can try to put content into an asp:Label or asp:Literal, 
    // so you have the content of the MVC page to put in a production aspx.
    // this keeps your URL in production, and allows you to use the MVC content
} 
```

# python - Django STATIC_URL 不工作

> ID：11683748
> 
> 赞同：14
> 
> 时间：2012-07-27T08:00:45.337
> 
> 标签：python, django, web, django-staticfiles

Django 版本是 1.4。我已经阅读了`official document`，并用谷歌搜索了我的问题。

首先我按照官方文档[管理静态文件](https://docs.djangoproject.com/en/1.4/howto/static-files/)添加了这个`settings.py`：

```
TEMPLATE_CONTEXT_PROCESSORS = (
  'django.core.context_processors.debug',
  'django.core.context_processors.i18n',
  'django.core.context_processors.media',
  'django.core.context_processors.static',
  'django.contrib.auth.context_processors.auth',
  'django.contrib.messages.context_processors.messages',
) 
```

在我的模板中：

```
<link href="{{ STATIC_URL }}css/main.css" ...> 
```

但是，在我的浏览器中是：

```
<link href="css/main.css" ...> (Just render `STATIC_URL` as empty) 
```

我的设置是：

```
STATIC_ROOT = os.path.join(PROJECT_PATH, 'static')
STATIC_URL = '/static/' 
```

在我的`views`

```
def register(request):
    ...
    return render_to_response('register.html', {'errors':errors}) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T08:50:48.157

改变

```
return render_to_response('register.html', 'errors':errors) 
```

到

```
return render_to_response('register.html', {'errors': errors}, RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T08:57:37.837

不幸的是，Django 的`render_to_response`快捷方式默认使用普通的模板上下文，它不包括上下文处理器以及它们所有花哨和有用的东西，比如`STATIC_URL`. 您需要使用[`RequestContext`](https://docs.djangoproject.com/en/1.3/ref/templates/api/#subclassing-context-requestcontext)，这正是这样做的。

这可以通过使用新的[`render`](https://docs.djangoproject.com/en/1.6/topics/http/shortcuts/#render)（从 Django 1.3 开始可用）来调用：

```
from django.shortcuts import render

return render(request, 'register.html', {'errors':errors}) 
```

在 Django 1.2 及更早版本中，您需要显式提供上下文：

```
from django.shortcuts import render_to_response
from django.template import RequestContext

return render_to_response('register.html', {'errors':errors},
    context_instance=RequestContext(request)) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-27T13:06:53.707

在 Django 1.4 中，您应该使用`static`templatetag ^([1](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#template-tags))。

尝试：

```
{% load staticfiles %}
<link href="{% static "css/main.css" %} ...> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T08:11:50.713

您在退货声明中不需要这个吗？：

`context_instance=RequestContext(request)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-21T18:35:10.260

我意识到这已经得到了回答，但我想提供另一个答案，以防即使使用 RequestContext 时 STATIC_URL 仍然呈现为空。

如果您正在运行开发服务器，请记住使用*不安全*标志启动服务器以让服务器为您的静态文件提供服务：

```
python manage.py runserver --insecure 
```

# c# - IComparer、OrderBy 和 Linq

> ID：11683749
> 
> 赞同：0
> 
> 时间：2012-07-27T08:00:46.173
> 
> 标签：c#, linq, sql-order-by, icomparer

我有一个要与 OrderBy 一起使用的自定义比较器。这个比较器可以按照我想要的方式对嵌套列表进行排序。我在其他地方完美地工作，但我不能让它以我想要的方式与 Linq 一起工作。你能告诉我哪里错了吗？

编辑：我想让它工作的方式是首先按类（BaseDirectory > BaseSite > VideoEntity，总是）对我的实体进行分组，然后按字母顺序对它们进行排序（升序 = A-> Z，或降序 Z-> A）。无论如何，当我使用 SortDirectoriesDescending() 时，我会返回按升序排序的集合。默认情况下，集合以升序模式排序（因此转换器可以工作，我已经对其进行了降序测试，也可以）

```
public class VideoEntityComparer : IComparer<VideoEntity>
{

    int order = 1;

    public VideoEntityComparer(Boolean ascending)
    {
        if (!ascending)
        {
            this.order = -1; // so descending
        }
    }

    public VideoEntityComparer()
    {

    }

    public int Compare(VideoEntity x, VideoEntity y)
    {
        if ((x is BaseDirectory && y is BaseDirectory) || (x is BaseSite && y is BaseSite) || (x is VideoEncoder && y is VideoEncoder))
        {
            return string.Compare(x.Nom, y.Nom, false) * order; // only objects of the same type are sorted alphabetically
        }
        else if ((x is BaseDirectory && y is BaseSite) || (x is BaseSite && y is VideoEncoder))
        {
            return -1;
        }else
        {
            return 1;
        }
    }
} 
```

* * *

```
private void SortDirectoriesDescending(object sender, RoutedEventArgs e)
    {
        ObservableCollection<BaseDirectory> tempDir  = new ObservableCollection<BaseDirectory>(
            Directories.OrderBy(directory => directory, new VideoEntityComparer(false)));
        Directories = tempDir;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:09:02.017

尝试对您的比较方法进行以下更改：

```
public int Compare(VideoEntity x, VideoEntity y)
{
    if ((x is BaseDirectory && y is BaseDirectory) || (x is BaseSite && y is BaseSite) || (x is VideoEncoder && y is VideoEncoder))
    {
        return string.Compare(x.Nom, y.Nom, false) * order; // only objects of the same type are sorted alphabetically
    }
    else if ((x is BaseDirectory && y is BaseSite) || (x is BaseSite && y is VideoEncoder) || (x is BaseDirectory && y is VideoEncoder)) // Added (x is BaseDirectory && y is VideoEncoder)
    {
        return -1;
    }
    else
    {
        return 1;
    }
} 
```

您的代码之前定义了 BaseDirectory < BaseSite 和 BaseSite < VideoEncoder，但 BaseDirectory **>** VideoEncoder 的顺序，这似乎很容易混淆，`OrderBy`因为您的顺序不是传递的。

# playframework - Model.find 返回相同的对象引用

> ID：11683751
> 
> 赞同：0
> 
> 时间：2012-07-27T08:00:58.580
> 
> 标签：playframework, playframework-1.x

我只是在创建一个设置页面，用户可以在其中更改他的用户名。奇怪的是我使用相同的 finder 方法在主视图和表单中显示它，但对象彼此不相关。

现在的副作用是，如果我不输入用户名并单击保存。两个对象都更新了。以及错误的视图中的显示。

我只想以单独的模型形式使用。我在这里做错了什么？我认为每次调用“Model.find”都会返回我一个对象的不同引用，即使它在数据库中的同一行也是如此。玩在这里做一些智能缓存吗？

这很烦人，因为更改表单中的用户意味着更改视图中所有其他相同的用户对象。

呈现创建/编辑页面的操作：

```
public static void index(){
        User appUser = User.findUser(SecureSocial.getCurrentUser().id);
        render(appUser);
 } 
```

我的视图（显示当前登录的用户名）

```
${models.User.findUser(user.id).username} 
```

我的模型：

```
public static User findUser(UserId userId){
        User user = User.find("externalId = ? and provider = ?", userId.id, userId.provider.name()).first();
        return user;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:09:15.290

Hibernate 支持您的持久存储。对于一个事务中的一个持久（逻辑）对象，Hibernate 将只创建并保留它的一个实例，原因有很多。所以你描述的行为实际上是可以预料的。

有关更多信息，请参阅[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-overview](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-overview)。

要同时拥有对象的两个实例，您必须将其分离（即，用 Hibernate 的说法删除指向 DB 对象的链接）。通常，您分离被编辑的对象，并让对象单独进行渲染。

因此，您将更改控制器功能以分离已编辑的对象：

`User.em().detach(user);`

# php - PHP下载图像脚本不起作用

> ID：11683756
> 
> 赞同：0
> 
> 时间：2012-07-27T08:01:22.653
> 
> 标签：php

我正在使用下面的代码将图像下载到我的硬盘。通过使用我放在新闻页面中的第一个链接，我可以下载图像。我放在图库中的第二个链接不起作用。路径是正确的，我打开了一个没有downlaod.php文件的图像，路径没有错误，但图像没有下载。我使用不同的图像 ID 尝试了不同的图像，但它不适用于该特定页面

```
<a href="<?php echo SITE; ?>download.php?filename=<?php echo SITE; ?>uploads/news/<?php echo $rowimg['image']; ?>" title="download"> 
```

## 下载图像

```
 <a href="<?php echo SITE; ?>download.php?filename=<?php echo SITE; ? >uploads/gallery/<?php echo $row['folder']; ?>/<?php echo $row1['folder']; ?>/<?php echo  $row2['folder']; ?>/<?php echo $rowimg['image']; ?>" title="Download">
download</a> 
```

## 错误是：文件可能已损坏或太大

下载.php

```
<?php    
$filename = $_GET["filename"];
$buffer = file_get_contents($filename);
/* Force download dialog... */
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Type: application/image");

/* Don't allow caching... */
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");

/* Set data type, size and filename */
header("Content-Type: application/octet-stream");
header("Content-Transfer-Encoding: binary");
header("Content-Length: " . strlen($buffer));
header("Content-Disposition: attachment; filename=$filename");

/* Send our file... */
echo $buffer; 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:36:06.033

使用`cURL`！

```
$ch = curl_init('http://my.image.url/photo.jpg');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // buffer output (`true` if you will be redirecting stream to the user, in $result will be your image content)
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1); // because image is binary data

// Within these two lines you can donwload image directly to the file on your server
// $fp = fopen('/my/saved/image.file', 'w');
// curl_setopt($ch, CURLOPT_FILE, $fp);

$result = curl_exec($ch); // executing requrest (here will be raw image data if RETURNTRANSFER == true)
$response_code = (int)curl_getinfo($ch, CURLINFO_HTTP_CODE); // getting response code to ensure that request was successfull
$content_type = curl_getinfo($ch, CURLINFO_CONTENT_TYPE); // getting return content-type

// Listing allowed image types    
$allowed_mimes = array(
            'image/jpeg',
            'image/gif',
            'image/png'
            );

if ($response_code == 200 AND in_array($content_type, $allowed_mimes) ) {
  header( 'Content-Type: '.$content_type );
  echo $result; // echoing image to STDOUT
} else
  return false; 
```

# mysql - 更改root密码mysql

> ID：11683758
> 
> 赞同：0
> 
> 时间：2012-07-27T08:01:25.510
> 
> 标签：mysql

嗨，我试图在 mysql 中更改我的 root 密码，但收到了意外的响应。你知道我如何设置root密码吗？

我明白了`ERROR 1142(42000) UPDATE COMMAND DENIED to user ''@localhost' for table user`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:10:53.710

看起来你没有'用户'没有权限更改密码......
如果你有外壳访问权限，你可以试试这个：

```
mysqladmin --user=root --password='old pw' password 'new pw' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:15:44.750

您可能已经以 root 身份安装了 mysql。尝试这个

```
su - rcmysql stop
rm -fr /var/lib/mysql/*
rcmysql start
mysqladmin -u root password 'rawr' 
```

删除 mysql 包不会删除数据库（出于显而易见的原因，其中可能包含重要信息）。因此，如果数据库是以前安装遗留下来的，或者以某种方式搞砸了，重新安装 mysql 并不能解决问题。

有时人们会通过手动以 root 身份启动 mysqld 来搞乱数据库。

您应该使用 init 脚本（或 YaST，如果您不了解 init 脚本）来启动 mysql。然后 mysqld 可以作为用户 mysql 运行。以 root 身份运行 mysqld 可以更改数据库文件的所有权，这样您就无法管理数据库，也无法通过重新安装来解决问题。

# ruby-on-rails - 保存 Ruby on Rails

> ID：11683759
> 
> 赞同：0
> 
> 时间：2012-07-27T08:01:27.880
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我是 Ruby on Rails 的新手，在保存数据时遇到问题。所有项目都保存除了`published`，但我不知道为什么。

这是我的表格：

```
<% form_for :product, @product do | fld | %>
    <span class="notice"><% if @product.errors.any? %><p class="error"><%= @product.errors.first[1] %></p><% end %></span>
    <table class="tbl-form" cellpadding="0" cellspacing="0">
      <tbody>
        <tr>
          <td class="name" width="100">Code:</td>
          <td colspan="99"><%= fld.text_field :product_code, :class => "large" %></td>
        </tr>
        <tr height="5"/>
        <tr>
          <td class="name" width="100">Name:</td>
          <td colspan="99"><%= fld.text_field :name, :class => "large" %></td>
        </tr>
        <tr height="5"/>
        <tr>
          <td class="name" width="100">Start Week:</td>
          <td colspan="99"><%= fld.select :start_week, options_for_select(StockMovement.order("year DESC, week DESC").map { | val | [ "#{ val.year }/#{ val.week }", val.id] }, :selected => @product.start_week), :class => "ddl_SW" %></td>
        </tr>
        <tr height="5"/>
        <tr>
          <td class="name" width="100">Category:</td>
          <td colspan="99"><%= fld.select :product_category, options_for_select(ProductCategory.where("jos_product_category.published = 1").all.map { | val | [ val.name, val.id] }, :selected => @product.product_category)%></td>
        </tr>
        <tr height="5"/>
        <tr>
          <td class="name">Thumbnail:</td>
          <td colspan="99"><%= fld.text_field :thumbnail, :class => "large" %></td>
        </tr>
        <tr height="5"/>
        <tr>
          <td class="name">Original Image:</td>
          <td colspan="99"><%= fld.text_field :original_image, :class => "large" %></td>
        </tr>
        <tr height="5"/>
        <tr><td class="name">Publish:</td><td><span id="yesno"><%= fld.check_box :published, :class => "hide-chk" %><a id="true" alt="1" rel="product_published" class="yes">Yes</a><a id="false" alt="0" rel="product_published" class="no on">No</a></span></td></tr>
        <tr height="25"/>
        <tr class="btn-holder">
          <td colspan="99">
            <input type="image" src="/images/btn-save.png" class="img-btn"><a href="<%= admin_products_path %>" class="lnk-btn back">Back</a>
          </td>
        </tr>
        <tr height="5"/>
      </tbody>
    </table>
    <% end %> 
```

这是我的控制器：

```
def new
    @product = Product.new

    if request.post? and params[:product]
      @product = Product.new(params[:product])
      @product.creator = logged_user['clientID']

      if @product.save
        #render :json => params[:product]
        redirect_to admin_product_show_url(:productID => @product.id), :notice => '<p class="success">You have successfully added a new product '"#{ @product.name }"'</p>'
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:09:08.000

您需要将`create`操作添加到您的控制器，这应该是表单操作的终点：

```
def create
  @product = Product.new(params[:product])
  if @product.save
    # set flash and redirect to somewhere
  else
    # set flash.now with a short message
    # and render the form here again (render :new)
  end
end 
```

# iphone - 一个后台运行的ios应用

> ID：11683760
> 
> 赞同：0
> 
> 时间：2012-07-27T08:01:29.980
> 
> 标签：iphone, ios, mobile, background, call

当我的应用程序在后台运行时，我想知道是否有来电并发送诸如“电话正在呼叫...”之类的电子邮件

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:04:04.820

不，你不能。这是不可能的。

除非您使用外部服务器发送电子邮件，否则在没有用户交互的情况下也无法发送电子邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:35:09.853

[CoreTelephony](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCall/Reference/Reference.html#//apple_ref/doc/c_ref/CTCall)中的 CTCall 可让您监控呼入和呼出的状态。确实，除非通过与 SMTP 的直接连接，否则您无法在没有用户交互的情况下发送电子邮件（而且我不想通过*我的*邮件服务器路由它们！）我认为 Nick Bull 是正确的，[关于长期运行的后台任务的限制.](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24)

# python - 编写一个不占用资源的python脚本

> ID：11683761
> 
> 赞同：1
> 
> 时间：2012-07-27T08:01:37.877
> 
> 标签：python

我有一个脚本，它做了大量的计算工作并且非常耗费资源。当我运行脚本时（通常需要几个小时才能完成），我几乎无法使用我的机器，因为它会停止运行。

我记得在过去的 VB 编程中，有一个`yield()`声明，它强制占用内存的例程很好，并将一些 CPU 周期交给其他进程。

我的问题是，在 Python 中是否有类似的结构允许我编写与我机器上的其他进程很好地配合的脚本？

下面的典型脚本....

```
# import required libs

if __name__ == '__main__':
    init()
    do_some_expensive_calcs()  # need to periodically 'yield' to other processes here - how do I do it? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:07:39.047

我认为您也可以使用 OS 包从脚本本身中执行此操作：

```
import os
os.nice(100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:05:49.890

如果您在 *ix 机器上，请很好地启动您的程序：

```
nice ./prog 
```

您还可以在程序运行时“调整”程序，例如使用`top`.

我一直值得考虑的另一个策略是改进算法。

# javascript - Sammy.js 不理解我的 json？

> ID：11683763
> 
> 赞同：1
> 
> 时间：2012-07-27T08:01:43.117
> 
> 标签：javascript, jquery, sammy.js

我正在使用带有 ASP.NET MVC 后端的 sammy.js。我有一条看起来像这样的路线：

```
 this.get("#/member/inbox", function (context) {
          this.load('CurrentUser/Messages')
            .then(function (items) {
                $.each(items, function (i, item) {
                    context.log(item.Subject, '-', item.Text);
                });
            }); 
```

但是 item.Subject 和 item.Text 是未定义的。我的 json 看起来像这样：

```
[{"Text":"Lorem ipsum","Created":"\/Date(1343375945089)\/","Subject":"test"},{"Text":"testext","Created":"\/Date(1343375945089)\/","Subject":"test2"}] 
```

如果我通过调用 $.get 来交换这个负载，它可以工作，但我想用“sammy way”来做这个有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:18:02.207

你确定“项目”是一个数组吗？快速检查一下`console.log(items)`，看看你得到了什么。很可能数组不是顶级的东西，而是有一个包装对象保存数组，这样你的 JSON 在它进入浏览器时实际上看起来更像这样（注意 object 和“d “ 财产）：

```
{"d": [{"Text":"Lorem ipsum","Created":"\/Date(1343375945089)\/","Subject":"test"},{"Text":"testext","Created":"\/Date(1343375945089)\/","Subject":"test2"}]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:18:56.853

生成 JSON 的脚本应将 HTTP 设置`Content-type`为`application/json`或`text/json`

对于 ASP.NET，这将是：

```
Response.ContentType = "application/json"; 
```

或者

```
Response.Headers.Add("Content-type", "application/json"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:12:22.343

好的，所以我将 sammy.js 中的第 1535 行从：

```
dataType: is_json ? 'json' : 'text' 
```

到：

```
dataType: is_json ? 'json' : null 
```

而现在sammy明白内容是json，此刻不知道为什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:01:52.957

我有同样的问题。我发现 sammy 会正确加载保存为 .json 的本地文件。但是任何从 http 调用的东西都不能使用 ("Content-type", "application/json")

您可以通过将自己的 api json 提要复制/粘贴到文件中来测试自己的设置。然后看看 sammy 是否能够正确加载它。

```
this.get('#/contact', function(context) {
     $('#header').html('This is the Contact Page')
       this.load('Backboneapp_data.json')
      .then(function(items) {
            $.each(items, function(i, item) {
              context.log(item);
            });
        });

    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T19:25:07.623

在这些情况下，Sammy 代码肯定有一些需要改进的地方。当我遇到这种情况时我会做的是使用

```
var jsonItems = $.parseJSON(items); 
```

这将从响应中生成正确的 JSON 对象。

# c# - 从代码访问资源字典（不是代码隐藏）

> ID：11683769
> 
> 赞同：2
> 
> 时间：2012-07-27T08:02:00.137
> 
> 标签：c#, wpf, resources, resourcedictionary

在我的应用程序中，我有一个资源字典定义为一个单独的文件。现在我想从 ac#-file 访问这个字典（**没有代码隐藏文件！**）

最好（最快，最干净）的方法是什么？

*   在代码中创建一个 ResourceDictionary 并将其与现有的合并？

*   将 ResourceDictionary 添加到应用程序的资源并使用 Application.Current.Resources 访问它们？

*   还有什么办法？？

问候，

于尔根

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:06:44.650

您可以使用 App.LoadComponent() 加载资源字典，例如：

```
var d = (ResourceDictionary)App.LoadComponent(new Uri("Dictionary1.xaml",UriKind.Relative)); 
```

不确定它是否是最快的，但它可能是更清洁的方式之一。

# javascript - 如何找到 Facebook 页面的管理员？

> ID：11683772
> 
> 赞同：-10
> 
> 时间：2012-07-27T08:02:09.310
> 
> 标签：javascript, facebook, facebook-apps

有没有使用 JavaScript、浏览器插件或软件找到 Facebook 页面的管理员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:42:55.473

不，没有 API。源中没有隐藏的管理员。如果此人选择保持匿名，您将无法获得 Facebook 页面的管理员。

这个“问题”可能也不属于SO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:20:46.807

它不可能通过 js 了解 fb 管理员......因为他们没有 API ......

# java - 如果有可用的堆空间，为什么会出现 OutOfMemoryError？

> ID：11683778
> 
> 赞同：0
> 
> 时间：2012-07-27T08:02:35.087
> 
> 标签：java, multithreading, debugging, memory-leaks, out-of-memory

这个问题与这个[有关](https://stackoverflow.com/questions/11682726/how-to-detect-the-cause-of-outofmemoryerror/11682810#comment15489544_11682810)：

如果我有一个堆转储报告说有一个`95%`线程处于`wait`或`parked`状态，并且有大约 750MB 可用堆内存可用，那么如何获得一个`java.lang.OutOfMemoryError`？
由于根据报告似乎有空闲堆，这对我来说似乎很奇怪！
谁能帮我解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:33:23.550

OOME 可以由堆溢出或堆栈溢出引发。因此，如果您确定堆足够，我建议检查堆栈大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:41:15.787

您使用的是哪种操作系统？是 32 位还是 64 位？您的 JDK 32 位还是 64 位？您总共需要多少堆空间？尝试使用更多的最大堆空间运行您的程序。我想转换 XML 文件时遇到了同样的问题。您只需设置以下参数：

在你的外壳中：

```
java -Xmx1024m -jar yourfile.jar 
```

# android - 服务停止时如何处理意图？

> ID：11683782
> 
> 赞同：0
> 
> 时间：2012-07-27T08:02:52.013
> 
> 标签：android, android-intent, broadcastreceiver

我是android编程的新手，所以这些可能是愚蠢的问题。我做了一些阅读，但不能完全得到答案。

我有一个广播接收器，其中包含从服务注册的一些意图 -

```
 receiver = new EventHandler();
    IntentFilter filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    filter.addAction(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    filter.addAction(TelephonyManager.ACTION_PHONE_STATE_CHANGED); // for calls
    registerReceiver(receiver, filter); 
```

由于我删除了我为保持服务运行而输入的“setForeground”调用（因为我不想要状态栏图标，我想知道我是否对这种方法很懒惰），我的服务现在将得到定期关闭并通常在短时间内重新启动（但有时我看到它是 5 分钟）。

问题 - 当我以编程方式注册我的意图时，如果我的进程恰好处于停止状态，Android 将如何知道发送我感兴趣的意图。我假设我会错过一些活动。

我尝试将意图放在清单中，但我已经阅读（并观察到）您不能将该技术用于电池更换意图。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:12:48.590

好的，首先，如果你想让你的服务保持活力，你必须`WakeLock`从`PowerManager`in获取 a`onCreate()`并在`onDestroy()`.

[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

操作系统有时可能仍会破坏并重新创建您的服务，但您不必担心它会长时间停止。（`startForeground()`也不能保证，`Service`例如，在您应用钥匙锁后您会活着。）

如果您的服务被破坏，那么操作系统仍然会触发`Intents`您只是看不到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:15:34.750

Intent 是 Android 中一种特殊的后期绑定机制。广播接收器、活动和服务在系统中注册意图过滤器，当一个意图被触发时，系统会激活可以处理这个意图的组件。因此，如果在系统中注册了一个意图过滤器，您的组件将被调用。如果系统中有静态意图过滤器（在 AndroidManifest.xml 中声明的那些），Android 操作系统会在系统启动期间注册。如果是动态意图过滤器（在广播接收器的代码中声明），您需要在启动后注册它们。因此，您可以为 onBoot 事件声明意图过滤器，并在此广播接收器中声明您的动态意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:30:19.993

关于您的服务被杀死并重新启动，这在android中是正常的，尤其是在内存不足的情况下。ACTION_BATTERY_CHANGED 不能放在清单中，但 ACTION_SCREEN_ON/OFF 可以。因此，您已经放入了一个 Service 并确保您的事件接收器正在运行，将 register 放入 onCreate() 方法中：

```
public void onCreate() {
    super.onCreate();

    // battery
    registerReceiver(mBatteryInfoReceiver, new IntentFilter(
        Intent.ACTION_BATTERY_CHANGED));
    ...
}

public void onDestroy() {
    super.onDestroy();

    unregisterReceiver(mBatteryInfoReceiver);
} 
```

当您的服务打算停止时，也不要忘记取消注册

# android - 键盘插入符号覆盖了我的 EditText

> ID：11683783
> 
> 赞同：1
> 
> 时间：2012-07-27T08:02:54.680
> 
> 标签：android, android-layout

这是我的注册屏幕。当我专注于 confirmPass EditText 时，软键盘覆盖了我的键盘。请注意插入符号覆盖了“q”键，我无法触摸它。这种情况的最佳解决方案是什么？

![在此处输入图像描述](../Images/f6abf426dc5cdf94bf94a8f9c85240ad.png)

屏幕 XML：

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/name"
        android:textSize="20sp" />

    <EditText
        android:id="@+id/nameEditText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPersonName"
        android:text=""
        android:hint="@string/nameHint" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/email"
        android:textSize="20sp"/>

    <EditText
        android:id="@+id/emailEditText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textEmailAddress"
        android:text=""
        android:hint="@string/emailHint"  />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/password"
        android:textSize="20sp" />

    <EditText
        android:id="@+id/passwordEditText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPassword"
        android:text="" 
        android:hint="@string/passwordHint" />

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/confirmPassword"
        android:textSize="20sp" />

    <EditText
        android:id="@+id/confirmPasswordEditText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPassword"
        android:text="" 
        android:hint="@string/confirmPasswordHint"/>

    <TextView
        android:id="@+id/messageTextView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text=""
        android:textColor="@color/red"
        android:textSize="16dip" />

    <Button
        android:id="@+id/registerButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/register" />

</LinearLayout> 
```

# matlab - 如何将集群标签与 Matlab 中的“基本事实”标签匹配

> ID：11683785
> 
> 赞同：4
> 
> 时间：2012-07-27T08:03:09.173
> 
> 标签：matlab, cluster-analysis, weka

我在这里搜索并用谷歌搜索，但无济于事。在 Weka 中进行聚类时，有一个方便的选项，即类到聚类，它将算法产生的聚类（例如简单的 k-means）与您作为类属性提供的“基本事实”类标签相匹配。这样我们就可以看到集群准确率（不正确的百分比）。

现在，我如何在 Matlab 中实现这一点，即将我的`clusterClasses`向量 eg`[1, 1, 2, 1, 3, 2, 3, 1, 1, 1]`转换为与提供的地面实况标签向量 eg 相同的索引`[2, 2, 2, 3, 1, 3]`？

我想可能是基于集群中心和标签中心，但我不知道如何实现！

任何帮助将不胜感激。

文森特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:53:42.603

几个月前，我在进行聚类时偶然发现了一个类似的问题。我没有很长时间搜索内置解决方案（尽管我确信它们一定存在），最后编写了我自己的小脚本，以将我找到的标签与基本事实相匹配。该代码非常粗糙，但它应该可以帮助您入门。

它基于尝试所有可能的标签重新排列，以查看最适合真值向量的女巫。这意味着给定一个`yte = [3 3 2 1]`带有 ground truth的聚类结果`y = [1 1 2 3]`，脚本将尝试匹配`[3 3 2 1], [3 3 1 2], [2 2 3 1], [2 2 1 3], [1 1 2 3] and [1 1 3 2]`以`y`找到最佳匹配。

这是基于使用内置脚本`perms()`无法处理超过 10 个独特的集群。对于 7-10 个独特的集群，代码也可能会变慢，因为复杂性会随着因子的增长而增长。

```
function [accuracy, true_labels, CM] = calculateAccuracy(yte, y)
%# Function for calculating clustering accuray and matching found 
%# labels with true labels. Assumes yte and y both are Nx1 vectors with
%# clustering labels. Does not support fuzzy clustering.
%#
%# Algorithm is based on trying out all reorderings of cluster labels, 
%# e.g. if yte = [1 2 2], try [1 2 2] and [2 1 1] so see witch fit 
%# the truth vector the best. Since this approach makes use of perms(),
%# the code will not run for unique(yte) greater than 10, and it will slow
%# down significantly for number of clusters greater than 7.
%#
%# Input:
%#   yte - result from clustering (y-test)
%#   y   - truth vector
%#
%# Output:
%#   accuracy    -   Overall accuracy for entire clustering (OA). For
%#                   overall error, use OE = 1 - OA.
%#   true_labels -   Vector giving the label rearangement witch best 
%#                   match the truth vector (y).
%#   CM          -   Confusion matrix. If unique(yte) = 4, produce a
%#                   4x4 matrix of the number of different errors and  
%#                   correct clusterings done.

N = length(y);

cluster_names = unique(yte);
accuracy = 0;
maxInd = 1;

perm = perms(unique(y));
[pN pM] = size(perm);

true_labels = y;

for i=1:pN
    flipped_labels = zeros(1,N);
    for cl = 1 : pM
        flipped_labels(yte==cluster_names(cl)) = perm(i,cl);
    end

    testAcc = sum(flipped_labels == y')/N;
    if testAcc > accuracy
        accuracy = testAcc;
        maxInd = i;
        true_labels = flipped_labels;
    end

end

CM = zeros(pM,pM);
for rc = 1 : pM
    for cc = 1 : pM
        CM(rc,cc) = sum( ((y'==rc) .* (true_labels==cc)) );
    end
end 
```

例子：

```
[acc newLabels CM] = calculateAccuracy([3 2 2 1 2 3]',[1 2 2 3 3 3]')

acc =

0.6667

newLabels =

 1     2     2     3     2     1

CM =

 1     0     0
 0     2     0
 1     1     1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:55:13.723

您可能想研究更灵活的评估集群的方法。例如配对计数指标。

“类=集群”假设对于从机器学习进入集群的人来说是典型的。但相反，您应该假设某些类可能由多个集群组成，或者多个类实际上是集群的。这些是聚类算法*应该*实际检测到的有趣情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-11T01:54:35.593

我需要 Python 的这个确切的东西，并转换了 Vidar 发布的代码（接受的答案）。我将代码分享给任何感兴趣的人。我重命名了变量并删除了混淆矩阵（大多数机器学习库都为此内置了函数）。我注意到文森特（[http://www.mathworks.com/matlabcentral/fileexchange/32197-clustering-results-measurement](http://www.mathworks.com/matlabcentral/fileexchange/32197-clustering-results-measurement)）链接的更快实现为时已晚。可能更好地适应 Python。

```
#tested with python 3.6
def remap_labels(pred_labels, true_labels):
    """Rename prediction labels (clustered output) to best match true labels."""
    # from itertools import permutations # import this into script.
    pred_labels, true_labels = np.array(pred_labels), np.array(true_labels)
    assert pred_labels.ndim == 1 == true_labels.ndim
    assert len(pred_labels) == len(true_labels)
    cluster_names = np.unique(pred_labels)
    accuracy = 0

    perms = np.array(list(permutations(np.unique(true_labels))))

    remapped_labels = true_labels
    for perm in perms:
        flipped_labels = np.zeros(len(true_labels))
        for label_index, label in enumerate(cluster_names):
            flipped_labels[pred_labels == label] = perm[label_index]

        testAcc = np.sum(flipped_labels == true_labels) / len(true_labels)
        if testAcc > accuracy:
            accuracy = testAcc
            remapped_labels = flipped_labels

    return accuracy, remapped_labels 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-14T15:16:28.980

遵循@Vidar 的想法，我编写了自己的代码来查找最佳标签对应关系。我假设初始标签是整数 $0..K$ 并找到最匹配的标签重命名。该代码依赖于功能`itertools.permutations`（由[this answer](https://stackoverflow.com/a/104436/6151828)建议）：

```
import numpy as np
from itertools import permutations

def match_labels(labels, labels0, K):
    perms = list(permutations(range(K)))
    nmatch = 0
    for jperm, perm in enumerate(perms):
        labs = np.array([perm[l] for l in labels])
        newmatch = (labs == labels0).sum()
        if newmatch > nmatch:
            nmatch = newmatch
            newlabels = labs
            matchtable = list(perm)
    return newlabels, matchtable 
```

[该线程](https://stats.stackexchange.com/q/95782/110833)建议使用更先进的技术来验证聚类的质量。第一个尝试的可能是[Rand index](https://en.wikipedia.org/wiki/Rand_index)，它在许多库中都可用（例如，在[scikit-learn 中](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.adjusted_rand_score.html)）。

# android - 加载数据、ListView 和 AsyncTask（需要建议）

> ID：11683787
> 
> 赞同：0
> 
> 时间：2012-07-27T08:03:16.397
> 
> 标签：android, listview, android-asynctask

所以我必须显示一个列表。数据是从数据库中检索的，作为 JSON 文件......我想要的是一些关于我的代码的评论以及最终我做错了什么（如果我是的话）。或者更好的方法来做到这一点。

我检索的列表可以随微调器上选择的任何内容而变化。列表中显示的行数是可变的，因此有时列表不会显示在屏幕底部。

我已经删除了一些无用的代码来解决这个问题。

如果缺少任何东西，请告诉我，我将编辑代码:)

```
public class EcranFavoris extends Activity implements OnScrollListener, OnItemClickListener, OnClickListener, OnItemSelectedListener
{
    /* ... */

    Spinner spinner;
    ArrayAdapter<CharSequence> spinner_adapter;
    ProgressDialog mProgressDialog;

    ListView listViewFavoris;

    /* This extends BaseAdapter */
    FavorisListAdapter adapter;
    ArrayAdapter<CharSequence> spinner_adapter;
    ArrayList<Profil> profil_array;

    /* ... */

    public static long currentId = 0;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.favoris_layout);

        /* ... */

        /* This contains the elements of my list. */
        profil_array = new ArrayList<Profil>();

        mProgressDialog = ProgressDialog.show(this, "Patientez...", "Chargement des favoris.", true);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);

        listViewFavoris = (ListView)findViewById(R.id.favoris_listView);
        adapter = new FavorisListAdapter(this, profil_array);
        listViewFavoris.setAdapter(adapter);
        listViewFavoris.setOnScrollListener(this);
        listViewFavoris.setOnItemClickListener(this);

        /* This is an AsyncTask i'm using for loading the data from the WebService. */
        new WebServiceWork().execute(profil_array);

    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount)
    {
        if(firstVisibleItem + visibleItemCount == QUANTITY*(currentPage-1))
        {
            if(pagesLeft == true && !(loadingMore))
            {
                Log.w("DV", "Loading more");
                loadingMore = true;
                mProgressDialog = ProgressDialog.show(this, "Patientez...", "Chargement des Favoris.", true);
                mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);

                new WebServiceWork().execute(this.profil_array);
            }
            else
            {
                if(pagesLeft == false)
                    Log.w("Favoris", "No pages left.");

                if(loadingMore)
                    Log.w("Favoris", "Loading more");

            }
        }

    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState){}

    private class WebServiceWork extends AsyncTask<ArrayList<Profil>, Void, ArrayList<Profil>>
    {
        //ArrayList<String> profil_string_array;
        boolean pagesLeft;

        protected void onPreExecute()
        {
            loadingMore = true;
        }

        @Override
        protected ArrayList<Profil> doInBackground(ArrayList<Profil>... profil_arrays)
        {
            WebService ws;
            int oldSize = profil_arrays[0].size();

            /* ... */

            //profil_arrays[0].addAll(ws.getProfilList());

                    /* getProfilList() return an ArrayList<Profil> */
            profil_arrays[0] = ws.getProfilList();

            pagesLeft = ws.pagesLeft();

            return profil_arrays[0];
        }

        @Override
        protected void onPostExecute(ArrayList<Profil> profil_arrays)
        {
            EcranFavoris.this.profil_array = profil_arrays;
            EcranFavoris.this.adapter.notifyDataSetChanged();

            EcranFavoris.this.mProgressDialog.dismiss();
            EcranFavoris.this.loadingMore = false;
        }

    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
    {
        if(id != EcranFavoris.currentId)
        {
            currentPage = 1;
            EcranFavoris.currentId = id;
            this.pagesLeft = true;
            //profil_array = new ArrayList<Profil>();
            new WebServiceWork().execute(profil_array);
        }

        Log.w("DebugFavs","the item: " + parent.getItemAtPosition(pos) + "has been selected. id = " + Long.toString(id));

        ((TextView)view).setTextColor(Color.WHITE);
        ((TextView)view).setPadding(0, 0, 0, 4);

    }

   /* ... */

} 
```

编辑：这是适配器。我没有发布函数 setListInfo() 因为它只是基本的 TextView 和 Image 视图设置。

第二次编辑：尝试使用 ViewHolders，但我的列表没有显示，并且 Logcat 中没有错误。

```
public class FavorisListAdapter extends BaseAdapter
{
private static final int TYPE_MEMBRE = 0;
private static final int TYPE_PUB = 1;

/* La structure utilisée est une liste de "Profil", type que j'ai creer. */
private List<Profil> p_list;

private Context context;
private LayoutInflater inflater;
private static int nbrPub = 0;

public FavorisListAdapter(Context context, List<Profil> profil_list)
{
    this.context = context;
    p_list = profil_list;
    inflater = LayoutInflater.from(context);
}

public int getItemViewType(int position)
{
    if(position % 4 == 0)
        return TYPE_PUB;
    return TYPE_MEMBRE;
}

public int getCount()
{
    return p_list.size();
}

public int getViewTypeCount()
{
    return 2;
}

public Object getItem(int pos)
{
    return p_list.get(pos);
}

public long getItemId(int pos)
{
    return pos;
}

static class PubViewHolder
{
    WebView pub;

    public void init(RelativeLayout layoutItem)
    {
        pub = (WebView)layoutItem.findViewById(R.id.visites_webView);
    }
}

static class MembreViewHolder
{
    TextView first_name;
    TextView age;
    TextView online;
    TextView lastVisit;

    ImageView image;

    public void init(RelativeLayout layoutItem)
    {
        first_name = (TextView)layoutItem.findViewById(R.id.visites_nameAge);
        age = (TextView)layoutItem.findViewById(R.id.visites_cityDistance);
        online = (TextView)layoutItem.findViewById(R.id.visites_online);
        lastVisit = (TextView)layoutItem.findViewById(R.id.visites_lastVisite);

        image = (ImageView)layoutItem.findViewById(R.id.visites_image);

    }
}

public View getView(int position, View convertView, ViewGroup parent) 
{
  RelativeLayout layoutItem = null;
  View v = convertView;
  int type = getItemViewType(position);

  MembreViewHolder membreHolder;
  PubViewHolder pubHolder;

  if(v == null)
  {
      switch(type)
      {
        case TYPE_MEMBRE:
            layoutItem = (RelativeLayout)inflater.inflate(R.layout.visites_list_row_layout, parent, false);
            membreHolder = new MembreViewHolder();
            membreHolder.init(layoutItem);
            v.setTag(membreHolder);
            this.setListInfo(membreHolder, position);
            break;

        case TYPE_PUB:
            layoutItem = (RelativeLayout)inflater.inflate(R.layout.visites_list_pub_layout, parent, false);
            pubHolder = new PubViewHolder();
            pubHolder.init(layoutItem);
            v.setTag(pubHolder);
            this.setListInfo(pubHolder, position);
            break;

      }
  }
  else
  {
      switch(type)
      {
        case TYPE_MEMBRE:
            membreHolder = (MembreViewHolder)v.getTag();
            this.setListInfo(membreHolder, position);
            break;

        case TYPE_PUB:
            pubHolder = (PubViewHolder)v.getTag();
            this.setListInfo(pubHolder, position);
      }
  }

  return layoutItem;
}

private void setListInfo(PubViewHolder p, int position)
{
    p.pub.getSettings().setJavaScriptEnabled(true);

}

private void setListInfo(MembreViewHolder m, int position)
{

    m.first_name.setText(p_list.get(position).getChamp("first_name") + ", " + p_list.get(position).getChamp("age") + " ans");
    m.age.setText(p_list.get(position).getChamp("city"));

    if(p_list.get(position).getChamp("online").equals("Oui"))
    {
        m.online.setText("En ligne");
        m.online.setTextColor(Color.GREEN);
    }
    else
    {
        m.online.setText("Hors ligne");
        m.online.setTextColor(Color.GRAY);
    }

    String last_visit = p_list.get(position).getChamp("visit_date");
    String formatted = last_visit.substring(6, 8) + "/" + last_visit.substring(4, 6) + "/"
            + last_visit.substring(0, 4);

    m.lastVisit.setText(formatted);

}
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:34:31.680

几点评论：

1.  永远不要使用你在代码中显示的字符串：`ProgressDialog.show(this, "Patientez...", "Chargement des Favoris.", true);`。请 `ProgressDialog.show(this, EcranFavoris.this.getString(R.string.title), EcranFavoris.this.getString(R.string.message), true);`改为在需要显示字符串的任何地方使用（不在 logcat 中，没关系）。这使您可以轻松地进行多语言应用程序。
2.  我不确定，但我认为您没有在适配器中使用 ViewHolders。您应该查看并使用它（优化点）。google上有很多tuts。
3.  您应该在`preExecute`asyncTask 的方法中显示您的对话框并在该方法中将其关闭`postExecute`。
4.  我认为您不应该将数据保存在 JSON 中，而应保存为数据库中的对象。初始化时会花费更多时间，但您可以制作游标等。

# php - 通过 AJAX 加载的页面上的 reCAPTCHA 字段不会加载。建议？

> ID：11683792
> 
> 赞同：3
> 
> 时间：2012-07-27T08:03:37.113
> 
> 标签：php, jquery, recaptcha

活生生的例子：

*   [没有 AJAX](http://utsarotaract.org/inc/email.php)
*   [使用 AJAX（单击向我们发送电子邮件链接）](http://utsarotaract.org/contact.php)

**当我查看源页面时，一切正常，但是当我通过 AJAX 请求加载时，在 reCAPTCHA应该**在的地方，我看到......

```
<noscript>
  <iframe src="http://www.google.com/recaptcha/api/noscript?k=6LfwkccSAAAAALr_z6vDBqkySowo5KIiR0mVM1BX" height="300" width="500" frameborder="0"></iframe><br/>
  <textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
  <input type="hidden" name="recaptcha_response_field" value="manual_challenge"/>
</noscript> 
```

显然，除非我的用户禁用了 JS，否则这无济于事。在此过程中不会引发任何错误。

以非 AJAX 请求的速度查看代码，我看到...

```
<script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge?k=6LfwkccSAAAAALr_z6vDBqkySowo5KIiR0mVM1BX"></script>

<noscript>
  <iframe src="http://www.google.com/recaptcha/api/noscript?k=6LfwkccSAAAAALr_z6vDBqkySowo5KIiR0mVM1BX" height="300" width="500" frameborder="0"></iframe><br/>
  <textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
  <input type="hidden" name="recaptcha_response_field" value="manual_challenge"/>
</noscript> 
```

请注意脚本顶部的附加行，它针对启用了 JS 的用户。

所以我想这个问题有两个方面。WTF 正在发生，我该如何解决？

我发现一些关于这个问题的模糊提及，但没有像样的答案。我发现有人提到了 reCAPTCHA API using `document.write`，但我不知道这是否有效。如果我忽略了一些明显的东西，请随时指出。

根据请求，AJAX 调用是...

```
$(document).ready(function() {
     $.get('/inc/email.php', 
           function(data){
                console.log('Get success!');
                $('#email-form').html(data);
                console.log('Get added to #email-form!');
                $('#email-form form').submit( function(){
                    $.ajax({
                      type: "POST",  
                      url: "/inc/email.php",  
                      data: $('#email-form form').serialize(),  
                      success: function() {
                            console.log('Submit success!');
                            $('#email-form').html(data);
                      }
                    });
                    return false;
                });
        }
     );
 }); 
```

到目前为止我所尝试的：

*   重写代码以获取远程 JS 文件，将 document.write() 子句替换为附加到我设置为特定 ID 的元素，然后在页面上内联运行修改后的代码
*   [显示没有插件](https://developers.google.com/recaptcha/docs/display)而不是[PHP reCAPTCHA 库的 reCAPTCHA](https://developers.google.com/recaptcha/docs/php)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T22:20:00.107

## 解释：

使用 AJAX 执行此操作时会中断的原因是，[jQuery`script`在将 HTML 附加到 DOM 之前会从 HTML 中去除任何标签，并在全局上下文中对其进行评估](http://old.nabble.com/jQuery.domManip---script-tag-will-be-removed-td24899315s27240.html#a24899512)。它不会将它与 HTML 的其余部分一起插入到 DOM 中。

* * *

## 在您的代码中：

您的代码中的罪魁祸首是这一行：

```
$('#email-form').html(data); 
```

您正在获取从服务器接收的原始 HTML 字符串，并将其附加到 DOM。但是，jQuery首先[从您的](http://jsfiddle.net/6VShs/)[变量](http://jsfiddle.net/6VShs/)[中删除`script``data`](http://jsfiddle.net/6VShs/)标签，并在全局上下文中对其进行评估。

由于`recaptcha.js`脚本用于`document.write`将其内容添加到 DOM，因此它会中断；`document.write`必须在您希望它输出 HTML 的位置准确运行。

* * *

## 解决方案：

有 2 种可能的解决方案。

### 解决方案#1：

您可以使用 vanilla JavaScript 自己插入标签，而不是完全依赖 jQuery `script`，这将导致`document.write`在您想要的地方运行 - 就在 DOM 中：

```
success: function() {
    var form = $('#email-form')[0],
        script = $('<script src="http://www.google.com/recaptcha/api/challenge?k=6LfwkccSAAAAALr_z6vDBqkySowo5KIiR0mVM1BX" />')[0];

    form.appendChild(script);
} 
```

请注意`[0]`这些行的末尾。它们用于访问底层的原生 DOM 对象，这样我们就可以使用 DOM 的原生`appendChild`.

### 解决方案#2：

与其通过 AJAX 加载数据，不如考虑将其放在自己的页面中，然后在`iframe`您的页面中插入一个：

```
success: function() {
    $('#email-form').html('<iframe src="path/to/reCAPTCHA/page.html" />');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T23:04:16.777

您可以在**/inc/email.php文件中****回**显所有内容！您必须提前包含所有必要的文件。

# java - Android MediaPlayer 链接

> ID：11683794
> 
> 赞同：0
> 
> 时间：2012-07-27T08:03:49.160
> 
> 标签：java, android, audio, media-player, midi

我读到 Android MediaPlayer 支持音频链接。

我正在播放一个连续的 MIDI 文件，我希望它们之间没有延迟（连续播放）。

我目前使用：*setOnCompletionListener*

eclipse 模拟器并没有明显的滞后。但是我在华硕变压器上尝试了我的应用程序（速度非常快），但延迟更大。我尝试使用 Android 4.0.3。

我应该使用其他方法播放下一首歌曲吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:51:49.023

我认为您应该尝试使用[SoundPool](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CHkQFjAD&url=http://developer.android.com/reference/android/media/SoundPool.html&ei=mFUSUN2sLceIrAetpICICg&usg=AFQjCNGRkmhF7cYLCrp6DiRejnM1FCMedA)类而不是 MediaPlayer。因为与 MediaPlayer 对象相比，SoundPool 是一个轻量级对象。

这是 SoundPool 的示例，

[http://blog.nelsondev.net/?p=207](http://blog.nelsondev.net/?p=207)

据说 SoundPool 最适合小声音文件和更快的播放能力。

这是一篇文章，它解释了有关 MediaPlayer 和 SoundPool 的事情。

[http://www.vogella.com/articles/AndroidMedia/article.html](http://www.vogella.com/articles/AndroidMedia/article.html)

这是基于它的问题的另一个链接，

[Soundpool 还是媒体播放器？](https://stackoverflow.com/q/10629812/603744)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T19:32:12.593

Jelly Bean 发行说明提到 MediaPlayer 现在支持“音频链接”功能，但没有指定实际的 API 实现。也就是说，如果您查看 MediaPlayer 上的开发人员参考资料，您会注意到从 Android 16 (Jelly Bean) 开始有一个名为“setNextMediaPlayer”的新方法可用：

[在这里阅读关于 setNextMediaPlayer()](http://developer.android.com/reference/android/media/MediaPlayer.html#setNextMediaPlayer%28android.media.MediaPlayer%29)

我不确定，但我相信这就是发行说明所指的。

[更正：在http://developer.android.com/about/versions/android-4.1.html](http://developer.android.com/about/versions/android-4.1.html) 的“无缝播放”标题下的发行说明中提到了 setNextMediaPlayer 。

# ios - 在多线程应用程序中保存核心数据的问题

> ID：11683798
> 
> 赞同：0
> 
> 时间：2012-07-27T08:04:00.187
> 
> 标签：ios, ios5, core-data, ios4, core-data-migration

我在使用多线程应用程序时在 Core Data 中保存数据时遇到问题。场景如下：

我有一些在后台线程中运行的 http 请求`NSOperation`。当 JSON 格式的数据到达时，我尝试将这些数据保存在 Core Data 中。`NSManagedObjectContext`现在，当我尝试保存它从未正确保存的数据时，我已经为每个线程创建了单独的线程。有时一半数据被保存有时没有。

任何猜测为什么这是hapaneing

```
+ (void) initialize {
    contextfactory = [[ThreadedContext alloc] init];
}

- (id) init {
    if((self = [super init])) {
    }
    [self setupObjectModel];
    [self setupStoreCoordinator];
    return self;
}

- (void) setupObjectModel {
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];
    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
}    

- (NSString*) sharedDocumentsPath {
    static NSString *SharedDocumentsPath = nil;
    if (SharedDocumentsPath)
        return SharedDocumentsPath;

    // Compose a path to the <Library>/Database directory
    NSString *libraryPath = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    return  [[libraryPath stringByAppendingPathComponent:@"Database"] retain];

}

- (NSURL *) storeUrl {

    NSString * const kCoreDataSQLiteName = @"XPPS.sqlite";
    // Get the paths to the SQLite file
    NSString *storePath = [[self sharedDocumentsPath] stringByAppendingPathComponent:kCoreDataSQLiteName];
    return [NSURL fileURLWithPath:storePath];
}

- (void) setupStoreCoordinator {
    NSError *error = nil;
    if(!_persistentStoreCoordinator)
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: _managedObjectModel];
    [_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL: [self storeUrl] options:nil error:&error];
    if(error) NSLog(@"%@", error);
}

- (NSManagedObjectContext *) createObjectContext {
    NSManagedObjectContext *output = [[[NSManagedObjectContext alloc] init] autorelease];
    [output setPersistentStoreCoordinator:_persistentStoreCoordinator];
    return output;
}

+ (NSManagedObjectContext *) buildContext {
    return [contextfactory createObjectContext];
}

+ (void) createStoreCoordinator {
    [contextfactory setupStoreCoordinator];
}

+ (NSString *) storePath {
    return [[contextfactory storeUrl] path];
} 
```

这是获取每个线程的托管上下文的代码。它源自`NSObject`而不是`NSOperation`。猜猜我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:06:07.620

您需要保存在主线程上。只需创建一个`NSNotification`并通知主线程新数据并保存在那里。不需要多个上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:07:01.203

你看到[这个苹果的例子](http://developer.apple.com/library/ios/#samplecode/ThreadedCoreData/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010723)了吗？

您的代码看起来不错，但为每个后台线程创建 NSManageObject 只是一个重要的想法。此示例可以向您展示如何 `NSManagedObjectContextDidSaveNotification`以安全的方式使用和保存数据。

# java - 无法在 Netbeans 7.2 IDE 上运行 Play Framework 项目

> ID：11683802
> 
> 赞同：1
> 
> 时间：2012-07-27T08:04:05.103
> 
> 标签：java, playframework, netbeans-7, playframework-1.x

我有一个有效的 Play Framework 项目。我正在使用 Play Framework 版本号**1.2.5**和 Java 版本**1.7 update 5**。我已经`play netbeansify`在终端上使用了命令并成功加载了项目。

但是，当我尝试运行该项目时，它无法运行，Netbeans 控制台显示如下错误：

```
C:\play-1.2.5\id doesn't exist
Listening for transport dt_socket at address: 8099
Error: Could not find or load main class ${jvm.memory}
Java Result: 1
BUILD SUCCESSFUL (total time: 3 seconds) 
```

我尝试将 Play Framework 版本号**1.2.5**替换为**1.2.4**，然后再次使用`play netbeansify`命令。然后，当我尝试运行该项目时，它正在运行。

Netbeans 7.2 IDE 不支持 Play Framework 版本号**1.2.5**吗？还是我忘记了在 Netbeans 中导入项目的步骤？

**-- 编辑 1**

对于规范细节，我使用的是 Windows 7 32 位操作系统、Java 7 update 5 32 位版本和 Netbeans 7.2 32 位版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:03:30.193

将以下内容添加到 application.conf 文件中：

```
jvm.memory=-Xmx256M -Xms32M 
```

您可以根据自己的喜好进行调整，但这应该是基本设置。

马特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:11:14.517

我在 1.2.2 上运行。从 Netbeans 7.1.1 更改为 7.2 时，没有问题。我什至不需要做任何额外的步骤，只需安装 Netbeans 7.2，它会自动导入 7.1.1 配置，然后点击 RUN 就可以了。

还没试过play!framework 1.2.5。

# scala - 使用 SBT 和 Android 插件从 AndroidManifest.xml 获取包名

> ID：11683803
> 
> 赞同：0
> 
> 时间：2012-07-27T08:04:05.830
> 
> 标签：scala, package, android-manifest, sbt, sbt-android-plugin

我正在使用 SBT 并修改 Jan Berkel 的 Android 插件，我需要有关我正在尝试构建的 Android 项目的包名称的信息。

我知道包名位于 中`AndroidManifest.xml`，但我想知道是否有任何方法使用 SBT 来获取该包名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:56:36.860

不太确定这是否是您需要的，但无论如何。Sbt 任务是用 scala 代码编写的，所以我们可以找到那个文件然后读取内容：

```
import java.io.File
import java.io.FileNotFoundException
def recursiveListFiles(f: File): Array[File] = {
  val these = f.listFiles
  if(these != null) 
    these ++ these.filter(_.isDirectory).flatMap(recursiveListFiles) 
  else Array[File]()
}

val projectFiles = recursiveListFiles(new File("."))
val manifestFile = projectFiles
  .filter(f => f.getCanonicalPath.endsWith("AndroidManifest.xml"))
  .toList.headOption
  .getOrElse(
    throw new FileNotFoundException("Your project doesn't contain manifest")
  )

val manifestXML = scala.xml.XML.loadFile(manifestFile)
val pkg = manifestXML.attribute("package").getOrElse("") 
```

# c# - 是否可以在运行时以现有类型发出方法？

> ID：11683804
> 
> 赞同：1
> 
> 时间：2012-07-27T08:04:09.047
> 
> 标签：c#, .net, reflection, reflection.emit

> **可能重复：**
> [是否可以在运行时向现有类添加方法？为什么或者为什么不？](https://stackoverflow.com/questions/11162094/is-it-possible-to-add-a-method-to-an-existing-class-at-runtime-why-or-why-not)

我的问题相当琐碎，但答案可能不是；）

**是否可以在运行时以现有类型发出新方法？**

我的直觉告诉我“检查 Reflection.Emit 命名空间”。

然而，我还不熟悉在运行时通过 Reflection.Emit 动态创建 IL 指令。我很快看了一眼（快速浏览这么大的话题并不多），在我看来，可以即时发出全新的类型或全局方法或其他整洁的东西，但实际上不可能将实例或静态方法添加到现有类型（我的上下文中的类）。

只是我还没有仔细观察 Relfection.Emit 还是它不可行？

谢谢 ！

# php - 为 html 和 php 文件获取相同的 PHP 会话 ID

> ID：11683805
> 
> 赞同：0
> 
> 时间：2012-07-27T08:04:14.963
> 
> 标签：php, html

我有两个文件：html php

其中 html 文件正在调用 php 文件来做某事。

现在我想将 PHP 会话 ID（php 代码）放入我的 html 文件和 php 文件中。

我想知道我将如何做到这一点，以便 html 文件和 php 文件具有相同的 PHP 会话 ID。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:18:43.847

您不能在 HTML 文件中使用 PHP 会话。最好将 HTML 文件更改为 PHP 文件。

正如评论中提到的 - 确保在打开 php 标记之前的任何空格之前在文件的最顶部开始会话。

要检索会话 ID，请使用 php 函数 session_id() 但如果这两个文件位于同一个域中，您只需在最顶部调用 session_start ，它将只使用相同的会话。

**编辑**

要在下面的评论中回答您的问题 - 是的，PHP 文件可以只有 HTML 代码，但根本没有 PHP 代码，或者在需要的地方添加 PHP。例如

我的文件.php

```
<html>
<head> ... </head>
<body>
<h1>some title</h1>
......
......
<a href="#">Go to next page (<?php echo $_GET['next_page']; ?>)</a>
......
</body>
</html 
```

因此，您只需打开和关闭需要 php 内容的 php 标签。

要打印会话 ID - 只需在 PHP 文件的 HTML 中的某处使用。

是的，session_id() 将在 php2 文件中为您提供相同的会话 ID - 再次确保您在 php2 文件的最顶部调用 session_start 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:27:05.213

如果您有权访问 apache 配置或简单的 .htaccess 文件，则可以告诉 Apache 处理 .html 文件中的 php 代码。您可以通过在站点的文档根目录（可能是 public_html/）上创建一个 .htaccess 文件（记住 .（点）作为该文件名中的第一个字符）并将其放入其中：

```
# Add this to public_html/.htaccess file
AddHandler application/x-httpd-php .html
AddHandler application/x-httpd-php .htm 
```

您应该能够重新加载 html 页面，并且您的 PHP 代码将运行良好。

# windows - 无法通过 vb.net 应用程序远程连接到 SQL Server 2008 express

> ID：11683810
> 
> 赞同：0
> 
> 时间：2012-07-27T08:04:21.247
> 
> 标签：windows, ssms, sql-server-2008-express

我已经对如何远程连接到 SQL Server 进行了后续研究，甚至将其配置为允许远程连接。

现在我可以通过 SSMS 连接到远程计算机上的 sql server 实例，但是通过我的 vb.net 应用程序连接时出现异常

> USER 登录失败。用户来自不受信任的域，不能用于 Windows 身份验证

请帮我解决这个问题。

这是我的连接字符串

```
Server=ACLMUMBAI;Database=Agrichemdb;User ID=xyz;Password=xyz;Trusted_Connection=Yes; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:20:43.300

你可以试试

```
Server=ACLMUMBAI;Database=Agrichemdb;User ID=xyz;Password=xyz;Trusted_Connection=False 
```

然后，您需要在混合模式下进行 SQL Server 身份验证，并且根据上述连接字符串中的 UserID 有一个 SQL Server 登录名，具有匹配的密码和对您的数据库具有适当权限。

我还要说这个解决方案不是很安全，如果这个数据库暴露在互联网上，你需要非常强的密码。尽管如此，你还是会受到无数的暴力攻击和意想不到的客人。

# django - PyCharm 和 Django Shell 网络

> ID：11683811
> 
> 赞同：3
> 
> 时间：2012-07-27T08:04:26.860
> 
> 标签：django, networking, connection, port, pycharm

（我的 Python 是通过 Homebrew 安装的，并被首选项正确引用为我的项目解释器）

我对 PyCharms Django Shell 有疑问。如果我启动 django shell，它会运行命令（端口正在改变）：

```
/usr/local/Cellar/python/2.7.3/bin/python2.7 -u /Applications/PyCharm.app/helpers/pydev/pydevconsole.py 52135 52136 
```

现在，这不起作用，它只是声明“PyDev 控制台：正在启动”，过了一会儿，它停止了。

**但是**当我**禁用我的 Wifi**时，它可以工作！现在，这可能是什么？

（我正在运行最新的 Mountain Lion OSX，防火墙禁用，PyCharm 2.5.2，Django 1.4）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T11:13:50.423

看起来问题与 Mac OS DNS 解析细节有关。在尝试使用 @ruffy 解决此问题时，解决的是将 LAN DNS 服务器更改为 Google ( `8.8.8.8`)。

我已经在 PyCharm 跟踪器中[记录了这个问题](http://youtrack.jetbrains.com/issue/PY-7070)，以便我们可以在未来的更新中提供解决方法。

相关话题：

*   [Mac OSX Lion DNS 查找顺序](https://stackoverflow.com/questions/6841421/mac-osx-lion-dns-lookup-order)
*   [Mac OS X Lion、/etc/hosts 错误和 DNS 解析](http://www.justincarmony.com/blog/2011/07/27/mac-os-x-lion-etc-hosts-bugs-and-dns-resolution/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T13:42:55.463

我也有这个问题，但这是因为我的主机名是'localhost'。一旦我将主机名更改为其他名称（来自首选项中的共享部分） - 它就像 (Py)Charm 一样工作。

The problem was somewhere in pydev-console, and I don't know why my solution worked - I only guessed it was the problem because originally the console worked, and then it didn't and the only thing had changed was my hostname (due to some fiddling at work)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T10:08:37.843

启动终端

> > 纳米 /Applications/PyCharm.app/helpers/pydev/pydevconsole.py

在第 160 行后添加：

```
 160 def process_exec_queue(interpreter):
  + 161     print 'here'
    162     while 1:
    163     # etcetera 
```

保存并再次运行shell，它是否显示打印消息？如果确实如此，请将其移入 while 循环并重复该过程，直到缩小问题范围

# .net - 如何使 WebProxy 类与 NTLM+Basic 代理一起使用

> ID：11683814
> 
> 赞同：3
> 
> 时间：2012-07-27T08:04:45.660
> 
> 标签：.net

有一个代理配置为最初使用 NTLM 协议进行身份验证，然后在基本身份验证方法之后进行身份验证。两种方法都可以正常工作。如果启用 NTLM 访问，所有 Internet 浏览器（IE、Chrome 和 Firefox）都可以使用。如果禁止 NTLM 访问，则只有 FF 正确处理这种情况。最初 FF 显示 NTLM 身份验证对话框，在按下对话框的取消按钮后，它显示基本方法的第二个身份验证对话框。输入正确的登录名和密码，FF就可以上网了。其他浏览器无法使用登录名和密码进行身份验证。

有一个任务是编写一个使用基本身份验证方法通过代理工作的程序。它应该使用[WebProxy](http://msdn.microsoft.com/en-us/library/system.net.webproxy.aspx)类。

我写了两种不同的方法来进行身份验证。第一个是直接使用[NetworkCredential](http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx)类实例`WebProxy`。

```
static private IWebProxy GetProxy00(string proxy_address, string proxy_login, string proxy_password) {
  WebProxy proxy = new WebProxy(proxy_address, true);
  proxy.Credentials = new NetworkCredential(proxy_login, proxy_password);
  proxy.UseDefaultCredentials = false;
  return proxy;
} 
```

第二种方法使用[CredentialCache](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.aspx)类

```
static private IWebProxy GetProxy01(string proxy_address, string proxy_login, string proxy_password) {
  CredentialCache cache = new CredentialCache();
  WebProxy proxy = new WebProxy(proxy_address, true);
  cache.Add(proxy.Address, "Basic", new NetworkCredential(proxy_login, proxy_password));
  proxy.Credentials = cache;
  proxy.UseDefaultCredentials = false;
  return proxy;
} 
```

两种方法都使用以下代码进行测试

```
string proxy_login = "here is login";
string proxy_password = "here is password";
string proxy_address = "here is proxy address";
WebRequest req = WebRequest.Create("http://www.google.com");
req.Proxy = GetProxy00(proxy_address, proxy_login, proxy_password);
WebResponse res = req.GetResponse(); 
```

他们都抛出`System.Net.WebException: The remote server returned an error: (407) Proxy Authentication Required.`异常。

如何使用 WebProxy 类通过代理使用基本身份验证方法进行身份验证？

# node.js - Mongo NodeJS映射减少

> ID：11683815
> 
> 赞同：2
> 
> 时间：2012-07-27T08:04:50.607
> 
> 标签：node.js, mongodb, mapreduce

无法正常工作..我在这里缺少什么..NodeJS，Mongoskin..我无法获得mapreduce的结果。数据库和收集似乎没问题。

```
var mongo = require('mongoskin');
var db = mongo.db('localhost:27017/testdb?auto_reconnect=true&poolSize=5');

db.collection('users');
db.bind('users');

db.users.find().sort({userid: -1}).skip(0).limit(0).toArray(function(err, users) {
        //console.log(err, users);
});

m = function() {
        emit( this.userid, this);
}
r = function(k, v) {
        return {k: v}
}
db.users.mapReduce(m, r, {out: 'coll'}, function(e, c) {
                console.log(c);
                process.exit(1);            
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T08:51:18.743

您需要将 map 和 reduce 函数作为字符串传递给 mongodb，以便它们在服务器中执行：

```
db.users.mapReduce(m.toString(), r.toString(), {out: 'coll'}, function(e, c) {
                console.log(c);
                process.exit(1);            
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-17T18:46:00.613

我需要将连接字符串作为前缀：

```
var db = mongo.db('mongodb://localhost:27017/testdb?auto_reconnect=true&poolSize=5'); 
```

# extjs - Extjs 禁用本机网格滚动

> ID：11683818
> 
> 赞同：1
> 
> 时间：2012-07-27T08:04:58.390
> 
> 标签：extjs, grid, scrollbar

我的 extjs 版本是 4.0.2a。有时网格中的垂直滚动条停止工作。这是常见的问题。我找到了一些解决方案，但它们对我不起作用：

```
this.Grid.hideVerticalScroller();
this.Grid.initVerticalScroller();
this.Grid.update();
this.Grid.determineScrollbars();
this.Grid.forceComponentLayout();
this.Grid.doComponentLayout(); 
```

我也试过滚动：假，但它也没有工作，让我的浏览器停止响应。我想，我可以禁用 extjs 网格滚动条并添加浏览器标准滚动条（溢出：自动），但我不知道如何。有什么建议么？

* * *

PS 我不能使用另一个版本的 Extjs，因为有一个非常大的工作项目，在一些核心文件中有一些修复。使用新版本的 Extjs 将很难使所有工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T18:19:07.310

这是我在 4.0.7 中使用的“修复”；它可能适用于 4.0.2。代码不是我的，我是从 sencha.com 论坛获取的：

```
Ext.define('Ext.ux.grid.Panel', {
    extend: 'Ext.grid.Panel',

    initComponent: function() {
        var me = this;

        me.callParent(arguments);

        me.on('scrollershow', function(scroller) {
          if (scroller && scroller.scrollEl) {
            scroller.clearManagedListeners(); 
            scroller.mon(scroller.scrollEl, 'scroll', scroller.onElScroll, scroller); 
          }
        });
    },

    onViewRefresh: function() {
        var me = this;

        try {
            me.callParent();
        }
        catch (e) {};
    }
}); 
```

使用 Ext.ux.grid.Panel 而不是 Ext.grid.Panel 来继承您的 Grid 类。它并不能完全解决问题，但会大大降低该特定错误的可见性。

附带说明一下，我建议您硬着头皮升级到 4.1.1，根据我的经验，这是非常值得的。首先从核心中删除您的自定义修复；您可以将它们重构为覆盖核心类的单独类。在那之后，它会变得更容易。我知道，我也经历过。

# ios - 更改 UITabbarController 中选项卡的位置

> ID：11683822
> 
> 赞同：1
> 
> 时间：2012-07-27T08:05:08.580
> 
> 标签：ios

我必须将第一个选项卡放在左下角，将其他选项卡放在中间。任何人都可以告诉如何更改选项卡的位置或更改 UItabbarController 中选项卡之间的间隙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:41:04.450

可能实现您想要的唯一方法是使用 UINavigationController，然后让它始终隐藏选项卡选项卡。您将编写自己的选项卡栏控制器和 UI，并根据需要创建选项卡。我很确定有一些开源类可以用作起点。

# objective-c - 如何在系统邮件应用中修改默认收件人列表

> ID：11683823
> 
> 赞同：0
> 
> 时间：2012-07-27T08:05:09.820
> 
> 标签：objective-c, email

我正在使用Objective-C。我想知道是否有任何插件或库可以让我修改系统邮件应用程序中的默认收件人列表？

例如，我做了一个应用程序，它可以扫描一张卡片并获取上面的电子邮件信息。

现在，我想将获取的电子邮件数据放入系统邮件应用程序的接收者列表中。也就是说，当我使用系统邮件应用程序并编写新邮件时，我可以在收件人栏中输入一些字母时看到我提取的电子邮件地址。

这有可能实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:42:43.120

此列表存储为 Sqlite 数据库，即使 Mail.app 正在运行，它也应该可以从另一个进程附加到它。不过，我还没有测试过。

下面的文章应该会有所帮助。它描述了如何删除条目，但添加新条目的工作方式几乎相同：[http ://hints.macworld.com/article.php?story=20110516152604993](http://hints.macworld.com/article.php?story=20110516152604993)

# php - 打开带有外部链接的手风琴

> ID：11683825
> 
> 赞同：1
> 
> 时间：2012-07-27T08:05:20.203
> 
> 标签：php, jquery-ui-accordion

我正在尝试使用外部链接打开手风琴。实际上页面上有三个主要的手风琴（关于、结果、联系方式）

并且有一个包含项目（关于，结果，联系方式）的菜单栏。

我想要的是当我点击**关于**菜单项时它应该打开关于手风琴

下面是jquery代码

```
$(function() {

    $( "#accordion" ).accordion({              
        collapsible: true,
        autoHeight: false , 
        active: false,
        navigation:true,       

    }); 

    $(".exlnk").click(function(event){
           window.location.hash=this.hash;
            });         
}); 
```

下面是html菜单栏代码：

```
 <div id="navmenu" style='z-index:9999;'>
      <ul>
        <li><a href="#anchor_about" class="anchor_about">About</a></li>
        <li><a href="#" >Results</a></li>
       <li><a href="#" class ="anchor_contact">Contact</a></li>
      </ul>
    </div> 
```

以下是外部链接的jquery代码

```
 <script>

     $(document).ready(function(){

     $('a.anchor_about').click(function(){

     $("#accordion").accordion("activate", '<?php echo $_GET['id']; ?>');

 return false;

  });
   });

   </script> 
```

但它不工作..:(

有人知道吗？提前致谢

**编辑1**

```
<script>

 $("#navmenu ul").children("li").click(function()
 {
  $("#accordion").accordion("activate", <?php echo (int)$_GET['id']; ?>);
}); 
```

**编辑2**

下面是手风琴代码

```
 <div class="demo">                      

            <div id="accordion">                                                       <!--- main accordion 1 demo-->
                <h3><a href="#anchor_home"></a></h3>                            
                    <div id="accordion1" style="margin-bottom:17px;"  >
                        <h1><a href="#" ></a></h1>
                            <div id="content_our_offer" >                              <!--- sub accordion 1 demo-->
                                <?php $page_id=1742;?>                      
                                <?php get_page( $page_id ) ;
                                $page_data = get_page( $page_id );
                                echo '<h3>'. $page_data->post_title .'</h3>';// echo the title
                                echo apply_filters('the_content', $page_data->post_content); ?>              
                            </div>

                    <div style="margin-top:20px;">                                   <!--- sub accordion 2 demo-->
                        <h2  ><a href="#" ></a></h2>    </div>          
                            <div id="content_our_offer" >
                                <?php $page_id=1742;?>                      
                                <?php get_page( $page_id ) ;
                                $page_data = get_page( $page_id );
                                echo '<h3>'. $page_data->post_title .'</h3>';// echo the title
                                echo apply_filters('the_content', $page_data->post_content); ?>              
                            </div>

            </div>

            <div style="margin-top:20px;">
            <h6><a class="exlnk" href="#about" title="About" ></a></h6>   </div>                                              <!--- main accordion 2 demo-->     
                <div id="id_ourresults">
                    <?php
                        $directory = 'our_results'; 
                        try {    
                            // Styling for images

                            foreach ( new DirectoryIterator("../" . $directory) as $item ) {            
                                if ($item->isFile()) {
                                    echo "<div class=\"expand_image\">";
                                    $path = "/" . $directory . "/" . $item;
                                    echo "<img src=\"" . $path . "\" width=861 height=443  />";
                                    echo "</div>";
                                    }
                                }
                            }
                            catch(Exception $e) {
                            echo 'No images found for this player.<br />';
                            }

       ?>

                </div>          
                <div style="margin-top:20px;">

            <h4><a href="#anchor_contact"></a></h4> </div>                                          <!--- main accordion 3 demo-->
                <div id="id_contactus">      
                    <?php $page_id=1791 ;?>
                    <?php get_page( $page_id ) ;
                    $page_data = get_page( $page_id );
                    echo '<h3>'. $page_data->post_title .'</h3>';// echo the title
                    echo apply_filters('the_content', $page_data->post_content); ?>              
                </div>        

            </div>

    </div><!-- End demo --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:27:30.253

```
$('a.anchor_about').click(function(){

   $("#accordion").accordion("activate", '<?php echo $_GET['id']; ?>');

   return false;

}); 
```

我不认为手风琴激活行中的 $_GET['id'] 会起作用，因为我猜你想要这样的东西

```
$('a.anchor_about').click(function(){
   var sectionId = $(this).attr("href");
   $("#accordion").accordion("activate", sectionId);

   return false;

}); 
```

检查这是否有效 - 如果有任何错误，请告诉我。

****编辑 ******

 **另外，我认为要打开手风琴，您需要一个`index`基于值而不是`ID`类似的值`#someId`（肯定适用于制表符）。该索引是从零开始的，因此可以通过传递零值来激活手风琴的第一部分，然后传递 1，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:50:36.597

根据索引为菜单项命名

```
<div id="navmenu" style='z-index:9999;'>
    <ul>
        <li><a href="#" name="0">About</a></li>
        <li><a href="#" name="1">Results</a></li>
        <li><a href="#" name="2">Contact</a></li>
    </ul>
</div> 
```

然后使用菜单项中给出的索引激活适当的手风琴项：

```
$("#navmenu ul").children("li").click(function()
{
    $("#accordion").accordion("activate", $(this).attr("name"));

    // ALSO POSSIBLE (name attribute not needed):
    // Only if the menu items are in the same order as the accordion items
    $("#accordion").accordion("activate", $(this).index());
}); 
```

* * *

## *编辑*

我只是认为您的代码位于不同的文件中，因此这里有一个选项可以最大限度地减少对代码的更改。看到您在新页面中发送哈希并获取 ID。手风琴需要一个***indexnumber***，而不是一个 ID：[Accordion Methods](http://jqueryui.com/demos/accordion/#method-activate)

```
<div id="navmenu" style='z-index:9999;'>
    <ul>
        <li><a href="#0">About</a></li>
        <li><a href="#1">Results</a></li>
        <li><a href="#2">Contact</a></li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T07:08:26.250

```
$('#accordion').accordion({"active": $(window.location.hash).index()}); 
```**

# php - 报告在时间戳中输入日期的已售产品数量

> ID：11683826
> 
> 赞同：2
> 
> 时间：2012-07-27T08:05:20.450
> 
> 标签：php, mysql

我有一个带有 product_id 和 entry_date 字段的产品表（它是 varchar，并且在 php 中具有 time() 函数的时间戳值）。我想获得每周上传多少产品的结果。请告诉我 SQL，以便我可以得到每周上传多少产品的结果。

我也有 user_id 字段。我还需要每个用户每周上传多少产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:15:01.740

```
SELECT CONCAT(YEAR(entry_date), '_', WEEKOFYEAR(entry_date)) AS week, COUNT(*) Count, user_id
FROM `tbl_products` 
GROUP BY week, product_id, user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:09:56.163

可能重复：[显示最近 7 天内添加的查看次数最多的条目](https://stackoverflow.com/questions/7145237/show-most-viewed-entries-that-have-been-added-in-the-last-7-days)

尝试这样的事情：

```
SELECT data-you-want-to-retrieve
FROM `Your-Table`
WHERE entry_date > (curdate() - 604800) 
```

所以它看到输入日期大于 7 天前的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:14:51.570

每周产品上传数：

```
SELECT   CONCAT(YEAR(entry_date), '_', WEEKOFYEAR(entry_date)) AS week, 
         COUNT(1) AS prodcnt
FROM     products
GROUP BY week 
```

特定用户每周的产品数量：

```
SELECT   CONCAT(YEAR(entry_date), '_', WEEKOFYEAR(entry_date)) AS week, 
         COUNT(1) AS prodcnt
FROM     products
WHERE    user_id = <userid here>
GROUP BY week 
```

您将获得按类似 分组的结果`2012_48`，其中`48`是一年中的第几周（从 1 到 53）。

# asp.net - 在 ASP.Net 身份验证中将 AuthorizeAttribute 扩展类放在哪里？

> ID：11683830
> 
> 赞同：0
> 
> 时间：2012-07-27T08:05:38.753
> 
> 标签：asp.net, asp.net-mvc-3, authentication, authorization

在为 ASP.NET 实现授权时，我应该将`AuthorizeAttribute`实现的类放在哪里？

在我的项目中，我创建了一个名为`BasicHttpAuthorizedAttribute`实现`System.Web.Http.AuthorizeAttribute`类的类，并且我已经覆盖了我想要的方法。

我已将此类注册`BasicHttpAuthorizedAttribute`为过滤器。

我的问题是即使我没有提到`[Authorized]`控制器方法之上的属性，`BasicHttpAuthorizedAttribute`类的`OnAuthorization()`方法也会被调用。

那不应该是这样的，对吧？`[Authorized]`仅当您在控制器方法之上提到了属性时，才应调用它。我对吗？

我在这里做错了什么？（我的项目是一个 ASP.Net web api 项目，我正在使用`System.Web.Http.AuthorizeAttribute`类）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:14:58.433

基本上，它每次都会进入`OnAuthorization()`事件，因为您已将其注册为过滤器。

这篇文章有一些关于一揽子过滤和匿名异常的巧妙技巧和旅行，我认为这就是你想要的。它可能适用于 MVC，但所使用的技术应该适用于大多数 ASP.NET 类型，只需稍加调整即可。

> [http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)

文章示例：

```
[HttpPost]
[AllowAnonymous]
public ActionResult LogOn(LogOnModel model, string returnUrl) 
```

# php - 从主机服务器发送电子邮件时出现连接错误

> ID：11683831
> 
> 赞同：0
> 
> 时间：2012-07-27T08:05:41.713
> 
> 标签：php

我在 php 中创建了一个 Web 应用程序。我正在使用 PHP Mailer 5.20 类。当我在本地服务器上使用 XAMPP 服务器时它工作正常但是当我们将它托管在网络服务器上并尝试发送电子邮件时它返回一个错误我向您显示下面的错误

> SMTP -> 错误：无法连接到服务器：连接超时 (110) SMTP 错误：无法连接到 SMTP 主机。

我尝试了所有配置并检查了所有但我在屏幕上收到相同的错误。

我的 PHP 邮件程序类如下

```
<?php   require("PHPMailer_5.2.0/class.phpmailer.php");

function send_email($tomail,$message,$subject)
{
//$dbObj = new Database();
//$dbObj->connect_db();
$mail = new PHPMailer();

$mail->IsSMTP();
$mail->Host = "smtp.mail.yahoo.com";  // specify main and backup server
$mail->SMTPAuth = true;     // turn on SMTP authentication

/////////////////////////////////( USER NAME AND PASSWORD )///////////////////////////// 
 $email = "xyxxxxx@yahoo.in";
$mail->Username = $email;  // SMTP username
$mail->Password ="xxxxxx"; // SMTP password

$mail->From = $email;
$mail->AddAddress($tomail, $tomail);

// set word wrap to 50 characters
$mail->WordWrap = 50;
// set email format to HTML
$mail->IsHTML(true);

$mail->Subject = $subject;
$mail->Body    = $message;
$mail->AltBody =$message;
$mail->Subject =  $subject;

$mail->FromName ="xyz (Online Booking Info)";

if(!$mail->Send())
{ $rr= $mail->ErrorInfo;
    exit;

}

 }

?> 
```

有人可以告诉我我在哪里错或错过配置吗？

# c# - 运动起点/终点检测

> ID：11683832
> 
> 赞同：5
> 
> 时间：2012-07-27T08:05:48.123
> 
> 标签：c#, wpf, kinect, gesture-recognition

我现在在我的工人支持项目中使用 Kinect。
我想使用 Kinect 来检测工作过程中指定运动的开始/结束时刻。
例如：
在纸上（在桌子上）画圆圈的工作过程有几个步骤：（测试人员）从桌子上拿起笔，**画圆圈**，把笔放回桌子上，换纸，...（重复多次）。
我想检测测试仪**开始**和**完成**画圈的**时刻。** 我必须提出一种不依赖于测试仪**位置**和**大小的****高精度**算法。 你能给我一些想法吗！ **********感谢您的帮助（对我的英语感到抱歉）！**********

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:20:50.633

也许这会给你一些想法？ [http://channel9.msdn.com/coding4fun/kinect/Open-source-Kinect-gesture-recognition-project-Kinect-DTW](http://channel9.msdn.com/coding4fun/kinect/Open-source-Kinect-gesture-recognition-project-Kinect-DTW)******

# gwt - GWT+HIBERNATE+GILEAD 不工作

> ID：11683838
> 
> 赞同：0
> 
> 时间：2012-07-27T08:06:10.167
> 
> 标签：gwt

您好 GWT+Hibernate+Gilead 不工作我已经从这个链接 [https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate](https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate)下载了示例代码。

> 我不知道出了什么问题，我不断收到此错误参数 0 的类型未知“com.google.musicstore.domain.Account/3669536145”

```
 [java] 16 [btpool0-0] INFO org.hibernate.cfg.Environment - Hibernate 3.3.1.GA
 [java] 20 [btpool0-0] INFO org.hibernate.cfg.Environment - hibernate.properties not found
 [java] 24 [btpool0-0] INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
 [java] 30 [btpool0-0] INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
 [java] 105 [btpool0-0] INFO org.hibernate.cfg.Configuration - configuring from resource: /hibernate.cfg.xml
 [java] 105 [btpool0-0] INFO org.hibernate.cfg.Configuration - Configuration resource: /hibernate.cfg.xml
 [java] 192 [btpool0-0] INFO org.hibernate.cfg.Configuration - Reading mappings from resource :com/google/musicstore/domain/Record.hbm.xml
 [java] 286 [btpool0-0] INFO org.hibernate.cfg.HbmBinder - Mapping class: com.google.musicstore.domain.Record -> PUBLIC.RECORD
 [java] 359 [btpool0-0] INFO org.hibernate.cfg.Configuration - Reading mappings from resource :com/google/musicstore/domain/Account.hbm.xml
 [java] 391 [btpool0-0] INFO org.hibernate.cfg.HbmBinder - Mapping class: com.google.musicstore.domain.Account -> PUBLIC.ACCOUNT
 [java] 468 [btpool0-0] INFO org.hibernate.cfg.HbmBinder - Mapping collection: com.google.musicstore.domain.Account.records -> PUBLIC.ACCOUNT_RECORD
 [java] 490 [btpool0-0] INFO org.hibernate.cfg.Configuration - Configured SessionFactory: null
 [java] 569 [btpool0-0] INFO org.hibernate.connection.DriverManagerConnectionProvider - Using Hibernate built-in connection pool (not for production use!)
 [java] 569 [btpool0-0] INFO org.hibernate.connection.DriverManagerConnectionProvider - Hibernate connection pool size: 2
 [java] 569 [btpool0-0] INFO org.hibernate.connection.DriverManagerConnectionProvider - autocommit mode: false
 [java] 577 [btpool0-0] INFO org.hibernate.connection.DriverManagerConnectionProvider - using driver: org.hsqldb.jdbcDriver at URL: jdbc:hsqldb:hsql://localhost/
 [java] 578 [btpool0-0] INFO org.hibernate.connection.DriverManagerConnectionProvider - connection properties: {user=sa, password=****}
 [java] 866 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - RDBMS: HSQL Database Engine, version: 2.2.8
 [java] 866 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - JDBC driver: HSQL Database Engine Driver, version: 2.2.8
 [java] 886 [btpool0-0] INFO org.hibernate.dialect.Dialect - Using dialect: org.hibernate.dialect.HSQLDialect
 [java] 899 [btpool0-0] INFO org.hibernate.transaction.TransactionFactoryFactory - Using default transaction strategy (direct JDBC transactions)
 [java] 903 [btpool0-0] INFO org.hibernate.transaction.TransactionManagerLookupFactory - No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
 [java] 903 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Automatic flush during beforeCompletion(): disabled
 [java] 903 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Automatic session close at endof transaction: disabled
 [java] 903 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - JDBC batch size: 15
 [java] 903 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - JDBC batch updates for versioned data: disabled
 [java] 904 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Scrollable result sets: enabled
 [java] 904 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - JDBC3 getGeneratedKeys(): enabled
 [java] 905 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Connection release mode: auto
 [java] 906 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Default schema: PUBLIC
 [java] 906 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Default batch fetch size: 1
 [java] 906 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Generate SQL with comments: disabled
 [java] 906 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Order SQL updates by primary key: disabled
 [java] 906 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Order SQL inserts for batching: disabled
 [java] 906 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
 [java] 910 [btpool0-0] INFO org.hibernate.hql.ast.ASTQueryTranslatorFactory - Using ASTQueryTranslatorFactory
 [java] 910 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Query language substitutions: {}
 [java] 910 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - JPA-QL strict compliance: disabled
 [java] 910 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Second-level cache: enabled
 [java] 910 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Query cache: disabled
 [java] 944 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Cache region factory : org.hibernate.cache.impl.bridge.RegionFactoryCacheProviderBridge
 [java] 945 [btpool0-0] INFO org.hibernate.cache.impl.bridge.RegionFactoryCacheProviderBridge -Cache provider: org.hibernate.cache.NoCacheProvider
 [java] 945 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Optimize cache for minimal puts: disabled
 [java] 945 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Structured second-level cache entries: disabled
 [java] 951 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Echoing all SQL to stdout
 [java] 952 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Statistics: disabled
 [java] 952 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
 [java] 952 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Default entity-mode: pojo
 [java] 952 [btpool0-0] INFO org.hibernate.cfg.SettingsFactory - Named query checking : enabled
 [java] 1067 [btpool0-0] INFO org.hibernate.impl.SessionFactoryImpl - building session factory
 [java] 1500 [btpool0-0] INFO org.hibernate.impl.SessionFactoryObjectFactory - Not binding factory to JNDI, no JNDI name configured
 [java] 1510 [btpool0-0] INFO org.hibernate.tool.hbm2ddl.SchemaExport - Running hbm2ddl schema export
 [java] 1511 [btpool0-0] INFO org.hibernate.tool.hbm2ddl.SchemaExport - exporting generated schema to database
 [java] GWT15
 [java] 1583 [btpool0-0] INFO org.hibernate.tool.hbm2ddl.SchemaExport - schema export complete 
```

这是我正在使用的 jar 文件

> 适配器4gwt-1.2.3.823.jar
> 
> 适配器核心 1.2.3.823.jar
> 
> antlr-2.7.6.jar
> 
> asm-3.2.jar
> 
> beanlib-hibernate-3.2.1.jar
> 
> cglib-2.2.jar
> 
> commons-collections-3.1.jar
> 
> commons-lang-2.4.jar
> 
> commons-logging-1.1.1.jar
> 
> dom4j-1.6.1.jar
> 
> hibernate-core-3.3.1.GA.jar
> 
> hibernate-jpa-2.0-api-1.0.0.Final.jar
> 
> hibernate-util-1.2.3.823.jar
> 
> hsqldb.jar
> 
> javassist-3.4.GA.jar
> 
> jboss-serialization.jar
> 
> jta-1.1.jar
> 
> log4j-1.2.15.jar
> 
> slf4j-api-1.5.2.jar
> 
> slf4j-simple-1.5.2.jar
> 
> trove-2.0.4.jar

请帮我解决这个问题，告诉我我错在哪里，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:30:09.120

那么，对于“较新”版本的 GWT（即我认为比 1.7 更新），您将需要使用更新版本的 Gilead。AFAIK，你描述的问题早就解决了。最后一个版本是2010 年 5 月 22 日的[1.3.2 版](http://sourceforge.net/projects/gilead/files/gilead/1.3.2/)。

是的，这个版本已经过时了，Gilead 也不再更新了。但是，即使使用最新的 GWT 版本（当前为 2.5 rc），只要您使用的是 Hibernate <= 3.5.x，它仍然有效。

我真的不建议现在与 Gilead 开始一个项目，请参阅[http://sourceforge.net/projects/gilead/forums/forum/868076/topic/4525959](http://sourceforge.net/projects/gilead/forums/forum/868076/topic/4525959)

# java - 带有泰语字符的 SOAP 响应

> ID：11683845
> 
> 赞同：0
> 
> 时间：2012-07-27T08:06:42.837
> 
> 标签：java, web-services, soap, character-encoding, thai

如何获得带有泰语字符的 SOAP 响应？

在数据源中，它被写为泰语字符，但我从 SOAP 响应中得到的是不同的符号集，我认为它是 ASCII 或其他东西，但不是泰语字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:18:59.057

*   检查`Content-Type`响应消息中的标头是否设置正确。它应该包含`charset=utf-8`.
*   检查soap WSDL的xml头是否有如下格式`<?xml version='1.0' encoding='UTF-8'?>`
*   字符编码之间也可能不匹配。检查数据库中的编码和返回消息的编码，看是否相同。

# sql - 仅在运行时查询错误

> ID：11683848
> 
> 赞同：0
> 
> 时间：2012-07-27T08:06:45.303
> 
> 标签：sql, common-table-expression

我有一个奇怪的行为，我执行一个运行查询的方法。它适用于本地主机，但在质量环境上失败。查询和错误如下：

```
WITH t AS 
(
    SELECT
        *,
        ROW_NUMBER() OVER(PARTITION BY matricola  ORDER BY esercizio DESC, cod_valutazione, valutaz_sintetica, matricola, FigureOrder) AS RowN 
    FROM 
        (SELECT DISTINCT 
            '' AS pdf,
            Vm.NomeManager + ' ' + Vm.CognomeManager AS valutatore,
            vpd.ESERCIZIO AS esercizio,
            vpd.cod_valutazione,
            Vm.NomeValutato +' ' + Vm.CognomeValutato AS valutato,
            vpd.matricola,
            valutaz_sintetica,
            vpd.COD_STATO AS stato_scheda,
            vpd.VALUTAZIONE_RANKING_SINTETICA,
            vvv.COD_FIGURA,
            CASE
                WHEN COD_FIGURA = 'OWNG' THEN 0
                WHEN COD_FIGURA = 'VAL1' THEN 1
                WHEN COD_FIGURA = 'OWN' THEN 2
            END AS FigureOrder      
        FROM
            View_SchedePerDistribuzione vpd
            INNER JOIN RL_VALUTAZIONE_VALUTATI_VALUTATORI vvv ON vpd.COD_VALUTAZIONE = vvv.COD_VALUTAZIONE AND vpd.MATRICOLA = vvv.MATRICOLA_VALUTATO 
            INNER JOIN ValutatiManager  Vm ON vpd.MATRICOLA = Vm.MatricolaVAlutato AND vpd.COD_VALUTAZIONE = Vm.COD_VALUTAZIONE
        WHERE 
            vpd.cod_valutazione='PA_SCI_11-12_test' AND 
            vpd.cod_stato='PROP' AND 
            chiusa = 0 AND 
            valutaz_sintetica <> '' AND 
            VVV.COD_FIGURA IN ('VAL1', 'OWN', 'OWNG') AND 
            VVV.Matricola = '06000013' 
        ) AS tab) 

        SELECT * 
          FROM t
         WHERE RowN = 1
         ORDER BY esercizio DESC, cod_valutazione, valutaz_sintetica, matricola, FigureOrder 
```

这是错误：

```
 nnString=Provider=SQLOLEDB;Data Sourcexxx;Initial Catalog=xxx;Persist Security Info=True;User ID=xxx;Password='xxx';Connect Timeout=xx System.Data.OleDb.OleDbException (0x80040E14): 
        Incorrect syntax near the keyword 'with'.     
        at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)     
        at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)     
        at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)     
        at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)     
        at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)     
        at System.Data.OleDb.OleDbCommand.ExecuteReader(CommandBehavior behavior)     
        at System.Data.OleDb.OleDbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)     
        at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)     
        at System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior)     
        at System.Data.Common.DbDataAdapter.Fill(DataTable dataTable)     
        at valDipLibrary.utility.getQuery(String qry, OleDbTransaction SqlTrn, String ConnString, Boolean fromPool, Boolean logReq, Int32 startRecord, Int32 maxRecord)     
        at valDipLibrary.utility.getQuery(String qry, OleDbTransaction SqlTrn, String ConnString, Boolean fromPool, Boolean logReq, Int32 startRecord, Int32 maxRecord) 
```

更多信息：

如果我在我的 SSMS 上运行查询，它就可以工作。如果我在质量服务器的 SSMS 上运行查询，它就可以工作。

仅当我运行执行查询的方法时它才起作用。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:13:21.833

我猜质量服务器的版本低于 2005。因为从 2005 版本开始支持 CTE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:16:05.657

尝试在单词前加分号 with

IE：

```
;WITH t AS  
( 
    SELECT 
    ... 
```

# linux-kernel - vm可以使用多少内存

> ID：11683850
> 
> 赞同：70
> 
> 时间：2012-07-27T08:06:47.970
> 
> 标签：linux-kernel

我阅读了[**了解虚拟内存**](http://www.redhat.com/magazine/001nov04/features/vm/)的文档，它说在 Linux VM 中更改可调参数的一种方法是命令：

```
sysctl -w vm.max_map_count=65535 
```

我想知道数字 65535 的含义以及该设置可以使用多少内存。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-07-27T09:37:21.750

从[Linux 内核文档](http://kernel.org/doc/Documentation/sysctl/vm.txt)：

> 最大地图计数：
> 
> 此文件包含进程可能拥有的最大内存映射区域数。内存映射区域用作调用 malloc 的副作用，直接由 mmap 和 mprotect 使用，也用于加载共享库时。
> 
> 虽然大多数应用程序需要少于一千个映射，但某些程序，特别是 malloc 调试器，可能会消耗大量映射，例如，每次分配最多一到两个映射。
> 
> 默认值为 65536。

底线：此设置限制了离散映射内存*区域的**数量- 就其本身而言，它对这些区域的**大小*或进程可用的内存没有限制。

 **是的，这个：

```
sysctl -w vm.max_map_count=65535 
```

只是写这个更好的方式：

```
echo 65535 > /proc/sys/vm/max_map_count 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-11-11T12:10:52.873

```
echo 'vm.max_map_count=262144' >> /etc/sysctl.conf

sysctl -p 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-12-02T09:29:30.607

```
echo "vm.max_map_count=262144" >> /etc/sysctl.conf
sysctl -p 
```

这不起作用，因为我们无法直接更改配置文件。运行以下命令。

```
echo vm.max_map_count=262144 | sudo tee -a /etc/sysctl.conf 
```

但是检查是否`vm.max_map_count`已经存在。您可以使用

```
grep vm.max_map_count /etc/sysctl.conf 
```**

# hibernate - 一次休眠 sessionFactory 创建

> ID：11683854
> 
> 赞同：1
> 
> 时间：2012-07-27T08:06:55.867
> 
> 标签：hibernate

我的休眠查询 SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory(); 有问题 sess =sessionFactory.openSession(); 我在每个函数中都调用它，我怎样才能避免它只创建一次 sessionFactory

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:50:12.917

您只需为每个应用程序创建一次实例，存储引用并提供访问它的方法。什么是正确的方法和地点完全取决于您的应用程序。

这是一种方式：

```
public final class SessionFactoryProvider {
    private static final SessionFactory sessionFactory;
    static {
        sessionFactory = new Configuration().configure().buildSessionFactory();
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    private SessionFactoryProvider() {
    }
} 
```

此外，您可能希望添加一些额外的信息收集并从静态初始化程序块中捕获和重新抛出可能的异常。

# ios - 在 iOS 上如何快速将 RGB24 转换为 BGR24？

> ID：11683864
> 
> 赞同：7
> 
> 时间：2012-07-27T08:07:31.717
> 
> 标签：ios, assembly, rgb, neon, accelerate-framework

我使用`vImageConvert_RGB888toPlanar8`and `vImageConvert_Planar8toRGB888`from Accelerate.framework将RGB24转换为BGR24，但是当需要转换的数据非常大时，比如3M或4M，这需要花费的时间大约是10ms。所以有人知道一些足够快的想法吗？我的代码是这样的：

```
- (void)transformRGBToBGR:(const UInt8 *)pict{
rgb.data = (void *)pict;

vImage_Error error = vImageConvert_RGB888toPlanar8(&rgb,&red,&green,&blue,kvImageNoFlags);
if (error != kvImageNoError) {
    NSLog(@"vImageConvert_RGB888toARGB8888 error");
}

error = vImageConvert_Planar8toRGB888(&blue,&green,&red,&bgr,kvImageNoFlags);
if (error != kvImageNoError) {
    NSLog(@"vImagePermuteChannels_ARGB8888 error");
}

free((void *)pict);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T08:41:06.627

使用 RGB888ToPlanar8 调用，您可以分散数据，然后再次收集数据。这是非常非常非常糟糕的。如果 33% 的内存开销是可以承受的，请尝试使用 RGBA 格式并就地置换 B/R 字节。

如果您想节省 33% 的费用，那么我可能会提出以下建议。迭代所有像素，但只读取 4 个字节的倍数（因为 lcm(3,4) 是 12，即 3 个双字）。

```
uint8_t* src_image;
uint8_t* dst_image;

uint32_t* src = (uint32_t*)src_image;
uint32_t* dst = (uint32_t*)dst_image;

uint32_t v1, v2, v3;
uint32_t nv1, nv2, nv3;
for(int i = 0 ; i < num_pixels / 12 ; i++)
{
     // read 12 bytes
     v1 = *src++;
     v2 = *src++;
     v3 = *src++;
     // shuffle bits in the pixels
     // [R1 G1 B1 R2 | G2 B2 R3 G3 | B3 R4 G4 B4]
     nv1 = // [B1 G1 R1 B2]
      ((v1 >> 8) & 0xFF) | (v1 & 0x00FF0000) | ((v1 >> 16) & 0xFF) | ((v2 >> 24) & 0xFF);
     nv2 = // [G2 R2 B3 G3]
       ...
     nv3 = // [R3 B4 G4 R4]
       ...
     // write 12 bytes
     *dst++ = nv1;
     *dst++ = nv2;
     *dst++ = nv3;
} 
```

使用 NEON 内在函数可以做得更好。

[请参阅ARM 网站上的](http://blogs.arm.com/software-enablement/161-coding-for-neon-part-1-load-and-stores/)此链接，了解 24 位交换是如何完成的。

BGR-to-RGB 可以像这样就地完成：

```
void neon_asm_convert_BGR_TO_RGB(uint8_t* img, int numPixels24)
{
    // numPixels is divided by 24
    __asm__ volatile(
        "0:                \n"
        "# load 3 64-bit regs with interleave: \n"
        "vld3.8      {d0,d1,d2}, [%0]   \n"
        "# swap d0 and d2 - R and B\n"
        "vswp d0, d2   \n"
        "# store 3 64-bit regs: \n"
        "vst3.8      {d0,d1,d2}, [%0]!      \n"
        "subs        %1, %1, #1       \n"
        "bne         0b            \n"
        :
        : "r"(img), "r"(numPixels24)
        : "r4", "r5"
     );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T14:53:53.210

## 只需交换通道 - BGRA 到 RGBA

```
- (void)convertBGRAFrame:(const CLPBasicVideoFrame &)bgraFrame toRGBA:(CLPBasicVideoFrame &)rgbaFrame
{
    vImage_Buffer bgraImageBuffer = {
        .width = bgraFrame.width,
        .height = bgraFrame.height,
        .rowBytes = bgraFrame.bytesPerRow,
        .data = bgraFrame.rawPixelData
    };

    vImage_Buffer rgbaImageBuffer = {
        .width = rgbaFrame.width,
        .height = rgbaFrame.height,
        .rowBytes = rgbaFrame.bytesPerRow,
        .data = rgbaFrame.rawPixelData
    };

    const uint8_t byteSwapMap[4] = { 2, 1, 0, 3 };

    vImage_Error error;
    error = vImagePermuteChannels_ARGB8888(&bgraImageBuffer, &rgbaImageBuffer, byteSwapMap, kvImageNoFlags);
    if (error != kvImageNoError) {
        NSLog(@"%s, vImage error %zd", __PRETTY_FUNCTION__, error);
    }
} 
```

# javascript - 检测圆圈 gmap3 内的标记，仅返回数据库中的最后一个标记

> ID：11683865
> 
> 赞同：0
> 
> 时间：2012-07-27T08:07:31.793
> 
> 标签：javascript, loops, google-maps-api-3, geometry, bounds

我正在尝试检测圆圈中的标记位置。从数据库中获取的标记纬度和经度。我设法检测到标记位置。但仅来自最后一个标记的警报。如何让每个标记/圆圈出现警报？

截图：[截图](http://i541.photobucket.com/albums/gg391/gre_rifky/detect.jpg)

查找更多详细信息，请参见此处：[链接](http://fasumsumedang.net/admin/rekomendasi_titik_test.php)

尝试将标记拖到每个圆圈。

提前谢谢，对不起我的英语不好:)

代码：

```
 <script type="text/javascript">
function init_terminal() {
  var mapOptions = { center: new google.maps.LatLng(-6.832858,107.953184), zoom: 10,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      scaleControl: true
      };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var dragable_marker = new google.maps.Marker({
    position : new google.maps.LatLng(-6.832858,107.953184),
    map : map,
    draggable : true
});
<?php 
        $link=koneksi_db();
        $sql="select f.*,j.*,ka.*,ke.*,i.*, a.meter from fasum f, jenis_fasum j, kategori_fasum ka, kecamatan ke, instansi i, aturan_jarak a WHERE f.id_jenis=j.id_jenis AND j.id_kategori=ka.id_kategori AND f.id_instansi=i.id_instansi AND f.id_kecamatan=ke.id_kecamatan AND j.id_jenis=a.id_jenis AND f.id_jenis=7"; 
        $res=mysql_query($sql,$link); 
            $i=0;
            while($data=mysql_fetch_array($res)){
                $i++; 
          ?>
var image = '../icon/<?php echo $data['icon'];?>';
var marker = new google.maps.Marker({
  position: new google.maps.LatLng(<?php echo $data['lat'];?>, <?php echo $data['lng'];?>),
  map: map,
  icon: image
});

var circle = new google.maps.Circle({
    center : new google.maps.LatLng(<?php echo $data['lat'];?>,<?php echo $data['lng'];?>),
    radius : <?php echo $data['meter'];?>,
    fillColor: "#00ff00",
    fillOpacity : .3,
    strokeOpacity : .4,
    map : map
});
google.maps.event.addListener( dragable_marker, 'dragend', function( e ) {
    if (circle.getBounds(this.center).contains(dragable_marker.getPosition() ) ){
    document.getElementById("latbox").value = null;
    document.getElementById("lngbox").value = null;
    alert("Inside!");
    }
    else {
    document.getElementById("latbox").value = this.getPosition().lat();
    document.getElementById("lngbox").value = this.getPosition().lng();
    }
});
<?php }?>
var kmlOptions = {preserveViewport: 1};
<?php 
        $res2=mysql_query("SELECT * FROM poligon");
        while($poli=mysql_fetch_array($res2)){
        ?>
    layersemua = new google.maps.KmlLayer('<?php echo $poli['url'];?>', kmlOptions);
    layersemua.setMap(map,this);
    document.getElementById('lihatsemua').checked = true; 
    <?php }?>
}

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:29:12.130

要检测这两个圆圈，请给它们唯一的名称（circle1，circle2）或使用函数闭包将侦听器与圆圈相关联。

# javascript - 调用 DIV 时将 DIV 加载到另一个 DIV 之上

> ID：11683868
> 
> 赞同：0
> 
> 时间：2012-07-27T08:07:42.617
> 
> 标签：javascript, html, overlay

好吧，我有这张幻灯片，上面有三个面板：

第 1 部分，第 2 部分，第 3 部分。

*   DIV 1 有 id=slide-one
*   DIV 2 有 id=slide-two
*   DIV 3 具有 id=slide-three

> 有导航按钮：Id1、Id2、Id3。

我想知道的功能是，如果可能当 Id1 调用 DIV1 并且 DIV1 滑入时，是否可以在 DIV1 顶部加载 DIV-new？
就像在调用 DIV1 时一样，它会在其顶部加载一个 DIV-new。
DIV 2 和 DIV 3 相同。
请参阅[此 html](http://www.temzlemdor.in/Slide.html)以获取上述示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:09:01.953

当然，只需使用`position:absolute`和`z-index`.

那是，

```
element.style.position = 'absolute';
element.style.zIndex = 10; 
```

...并确保底部`<div>`的 z-index 较低。`<div>`此外，如果绝对的父母有`position:relative`风格，生活会更轻松。

# php - 我无法在 php 代码中捕获异常

> ID：11683875
> 
> 赞同：3
> 
> 时间：2012-07-27T08:08:24.940
> 
> 标签：php, exception-handling

我有以下代码：

```
function doSomething()
{
     try {
         doSomeNastyStuff() // throws Exception
     } catch(\Exception $e) {
         if ($this->errorHandler) {
             call_user_func($e);
         } else {
             throw($e);
         }
     }
} 
```

但是，catch 块不起作用。堆栈跟踪向我显示了该行发生的错误`doSomeNastyStuff()`。哪里有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T08:08:24.940

问题是，您正在重新抛出异常。堆栈跟踪是`Exception`实例的一部分，并在创建异常时记录下来。您可以通过以下方式获取堆栈跟踪

```
 $e->getTrace(); // Exception $e 
```

当您在代码中重新抛出异常时，它仍然记录了旧的堆栈跟踪，这会欺骗您的框架向您显示，异常实际上发生在该行`doSomeNastyStuff()`并且似乎`catch`不起作用。

因此，最好通过以下方式重新引发异常：

```
/** instead of throw($e) do */
throw new \Exception("Unhandled exception", 1, $e); 
```

从 php5.3 开始，`Exception constructor`有可选的第三个参数`$previous`正是为此目的。然后你可以得到以前的`Exception`使用`$e->getPrevious();`

# xcode - Xcode 4.4 clang 错误：链接器失败

> ID：11683877
> 
> 赞同：4
> 
> 时间：2012-07-27T08:08:27.427
> 
> 标签：xcode, linker

今天升级到 Mountain Lion 和 Xcode 4.4 后，我的一个项目不再编译。我已经验证它在 Xcode 4.3 上仍然可以编译。这是我得到的输出 - 有什么想法吗？

```
Ld "/Users/Adam/Library/Developer/Xcode/DerivedData/Home_Loan_Finder-ciynsbeemzwbzhenhqlhhzbsgebo/Build/Products/Debug-iphonesimulator/Home Loan Finder.app/Home Loan Finder" normal i386
    cd "/Users/Adam/Aspyre/Code/Projects/Binary/Home Loan Finder"
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/Adam/Library/Developer/Xcode/DerivedData/Home_Loan_Finder-ciynsbeemzwbzhenhqlhhzbsgebo/Build/Products/Debug-iphonesimulator -F/Users/Adam/Library/Developer/Xcode/DerivedData/Home_Loan_Finder-ciynsbeemzwbzhenhqlhhzbsgebo/Build/Products/Debug-iphonesimulator "-F/Users/Adam/Aspyre/Code/Projects/Binary/Home Loan Finder/../../../SDKs" -filelist "/Users/Adam/Library/Developer/Xcode/DerivedData/Home_Loan_Finder-ciynsbeemzwbzhenhqlhhzbsgebo/Build/Intermediates/Home Loan Finder.build/Debug-iphonesimulator/Home Loan Finder.build/Objects-normal/i386/Home Loan Finder.LinkFileList" -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework CoreGraphics -framework Foundation -framework UIKit -framework MessageUI -framework CoreData -framework ShinobiCharts -framework OpenGLES -framework QuartzCore -framework Security -o "/Users/Adam/Library/Developer/Xcode/DerivedData/Home_Loan_Finder-ciynsbeemzwbzhenhqlhhzbsgebo/Build/Products/Debug-iphonesimulator/Home Loan Finder.app/Home Loan Finder"

0  0x103ced280  __assert_rtn + 144
1  0x103d43877  ld::tool::OutputFile::addressOf(ld::Internal const&, ld::Fixup const*, ld::Atom const**) + 215
2  0x103d4512c  ld::tool::OutputFile::applyFixUps(ld::Internal&, unsigned long long, ld::Atom const*, unsigned char*) + 300
3  0x103d46a6d  ld::tool::OutputFile::writeAtoms(ld::Internal&, unsigned char*) + 621
4  0x103d42c14  ld::tool::OutputFile::writeOutputFile(ld::Internal&) + 564
5  0x103d3d963  ld::tool::OutputFile::write(ld::Internal&) + 147
6  0x103ced8ef  main + 1263
7  0x103cdc234  start + 52
A linker snapshot was created at:
    /tmp/Home Loan Finder-2012-06-27-140754.ld-snapshot
ld: Assertion failed: (_mode == modeFinalAddress), function finalAddress, file /SourceCache/ld64/ld64-133.3/src/ld/ld.hpp, line 657.
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:45:58.540

我现在正在研究这个。

我们相当肯定这是因为当前的框架是使用 Xcode 4.3 构建的，而 4.4 编译器并没有正确地将所有内容链接在一起。

解决方案似乎只是在 Xcode 4.4 中构建框架——我们目前正在审查这个，应该很快就会更新框架！

完整披露：我在 ShinobiCharts 上为 ShinobiControls 工作。

编辑：现在可以使用新版本的 ShinobiCharts，修复了这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T11:59:41.247

对于那些使用 ShinobiCharts.framework 的人：在 Shinobi 类上创建类别会导致此类错误。作为一种解决方法，您可以用继承替换类别（这可能非常痛苦）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T12:02:38.780

为了对此有所了解，解决方法是将“条形样式”从“所有符号”更改为“非全局符号”，从而允许在类别中使用全局符号。

全面披露：我也为 ShinobiControls 工作！

# tfs - 我应该把那些在 TFS2010 中没有定义的源放在什么地方

> ID：11683878
> 
> 赞同：-2
> 
> 时间：2012-07-27T08:08:29.967
> 
> 标签：tfs

我有一些源代码和其他工件，例如不是在 Visual Studio 2010 中创建的图像。我想将它们放入 TFS 2010 版本控制中，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:18:57.103

TFS 不关心文件的格式是什么；您可以使用 TFS 存储**任何**类型的文件 - 无论是在 Visual Studio 还是任何其他程序中创建的。所有 TFS 版本都是如此。

评论已经在一定程度上解决了如何[使用 Source Control Explorer 将文件添加到 Source Control](http://msdn.microsoft.com/en-us/library/ms181374.aspx#AddNonSolToVC)；一旦有了[工作空间映射](http://msdn.microsoft.com/en-us/library/gg490753.aspx)，将文件或文件夹复制到工作空间中的映射文件夹中，在 Source Contol Explorer 中右键单击添加文件的文件夹，然后选择*Add Items to Folder*选项；这将启动一个向导，您可以使用该向导让 TFS 知道您要将选定的文件或文件夹添加到源代码控制 -*它可以是您计算机上的任何文件*。

添加文件后，通过右键单击源代码管理资源管理器中的文件或使用 Pending Changes 窗口（查看菜单 -> Other Windows -> Pending Changes）[签入或更改。](http://msdn.microsoft.com/en-us/library/ms181411%28v=vs.100%29.aspx)几乎 TFS 中的每个源代码控制操作都是一个*两阶段提交*，包括首先让 TFS 知道您想要做什么（例如添加或删除文件），然后通过签入实际提交该更改。

您还可以[从命令行使用 TF.exe或使用](http://msdn.microsoft.com/en-us/library/cc31bk2e%28v=vs.100%29.aspx)[Team Foundation Server Power Tools (TFPT)](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f/)单独安装的 Shell 集成功能执行这些步骤。请注意，虽然您可以使用 Web 访问用户界面列出和查看 TFS 中文件的内容，但您不能使用该界面签入或签出文件。[此外，如果没有 Visual Studio 或至少一个名为Team Explorer](http://www.microsoft.com/en-us/download/details.aspx?id=329)的免费版本，您将无法执行任何源代码控制更改。

与 TFS 的行为有关的文件的唯一质量是文件是否是可合并的文件类型以及文件的编码是什么；但是，在大多数情况下，TFS 中的默认设置对您来说就可以了。可合并文件类型是 TFS 将启用合并的文件；可合并文件类型的示例是文本文件；不可合并的文件类型是您不想合并的文件类型，例如图片或 Microsoft Excel 文件。您可以在 Microsoft 站点上阅读有关[管理文件类型的更多信息。](http://msdn.microsoft.com/en-us/library/ms181457.aspx)

# javascript - Jquery 扩展元素

> ID：11683879
> 
> 赞同：3
> 
> 时间：2012-07-27T08:08:34.350
> 
> 标签：javascript, jquery, html

我想扩展我的 textarea 元素的功能。当我调用这样的方法时，textarea 元素应该响应：

```
$('#jsedit').jsedit(); 
```

我知道可以这样做：

```
$(function() {
    $.fn.extend({
        jsedit: function() {
            alert(this.val());
        }
    });
}); 
```

但我怎样才能指定只有 textarea 可以做到这一点？因为现在每个元素都可以调用 jsedit() 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:16:23.287

像这样：

```
$(function() {
    $.fn.extend({
        jsedit: function() {
            if ($(this).is('textarea')) {
                 //your stuff
            }
        }
    });
});

console.log($('#your_textarea').jsedit()); 
```

**编辑**：完整声明

lg,

弗洛

# jquery - jQuery append() 在 IE 中不起作用，但在 Chrome 中起作用

> ID：11683880
> 
> 赞同：1
> 
> 时间：2012-07-27T08:08:34.850
> 
> 标签：jquery, flash

总之，我的网站flash复杂，html是这样的

```
<object type="application/x-shockwave-flash" data="/open-flash-chart.swf"
width="650" height="300" id="flash_content_aA1Fc6mD" style="visibility: visible; ">
    <param name="flashvars" value="data-file=%2Fother%2Ffinances%2Fgraph.json%3Fgraph%3Dbar%26action%3Dcompare_all%26controller%3Dother%252Ffinances">
    <param name="wmode" value="transparent">
</object> 
```

为了让这个 flash 透明，所以我使用 jquery 附加一些代码，jquery 代码是这样的

```
$(window).load(function(){
  $("object").append("<param name='wmode' value='transparent' />") 
}) 
```

它在镀铬中如此完美。但是当我打开 IE6 时（遗憾的是，超过 20% 的人在这里使用这个浏览器 T_T），我发现它不起作用。

然后我调试这段代码。起初，我猜是问题所在`$("object")`，但后来我发现 ie 可以在 ie6 中运行良好。

最后，我发现导致这个问题的原因是 append()。当我发现我无法`<object>`在 ie6 中附加任何东西时。

我的问题是如何`<object>`在 ie6 中将节点附加到节点

那么任何人都可以帮助我吗？？？帮助 ！！或者我必须加班加班......

# android - NFC 读卡器 ACR 122 与 Android 4.1 Jelly Beans 不兼容？

> ID：11683885
> 
> 赞同：9
> 
> 时间：2012-07-27T08:08:45.207
> 
> 标签：android, nfc, nfc-p2p

我之前使用过 ACR 122，它与 Android < 4.1 的手机完美配合。我用它来交换 P2P SNEP 消息...但是由于手机是 4.1，当您将手机放在阅读器上方时，阅读器开始发出哔哔声和闪烁。有没有其他人发现这种不兼容？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T19:30:51.537

从 Android 4.1 Jelly Bean 开始，NFC 点对点通信被配置为使用更高的比特率 (212 kbps)，而之前它使用的是 106 kbps（在安装了 Google Wallet 的 Android 设备中，它始终使用 212 kbps）。

不知道ACR122U能否通过`javax.smartcardio`. 里面的NFC芯片（NXP的[PN532](http://www.nxp.com/products/identification_and_security/reader_ics/nfc_devices/series/PN532.html)）当然可以做到。212 和 424 kbps 的低级 ISO18092/ECMA-340 协议不同于 106 kbps。对于 106 kbps，它使用与 ISO14443 相同的调制方式，而更高的比特率使用与 FeliCa 相同的调制方式（参见[标准的第 7 页和第 8](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-340.pdf)页）。所以我怀疑这无法通过`javax.smartcardio`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T12:23:31.180

很高兴看到其他人在这方面工作。您可以通过“直接”连接到阅读器。学分转到 Peter Kmet：[javax.smartcardio 无卡传输到 NFC USB 读卡器](https://stackoverflow.com/questions/12265807/javax-smartcardio-transmit-to-nfc-usb-reader-without-card)

此示例将仅切换灯光

```
 TerminalFactory factory;
        List<CardTerminal> terminals;
        factory = TerminalFactory.getDefault();
        terminals = factory.terminals().list();
        terminal = terminals.get(0);

        byte[] response = null;
        byte[] command = new byte[] { (byte) 0xff, (byte) 0x00, (byte) 0x40, (byte) 0xd0, (byte) 0x04,
            (byte) 0x05, (byte) 0x05, (byte) 0x02, (byte) 0x01 };
        int controlCode = 0x310000 + 3500 * 4;
        Card card = null;
        card = terminal.connect("DIRECT");
        response = card.transmitControlCommand(controlCode, command); 
```

如果您在 Jelly Bean 方面取得任何进展，请更新，我也会检查您的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T15:06:48.700

这有助于在范围内没有卡的情况下连接到终端：

```
terminal.connect("DIRECT"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T18:52:52.870

我用一个小“黑客”解决了这个问题。我正在使用带有 SAM 模块的 ACR122U，不知道哪个版本有这个，它是 TouchATag 阅读器。我发现阅读器必须通过这条线，当手机不在 NFC 领域时：

```
cardTerminal.connect("*").getBasicChannel(); 
```

这是因为您必须在手机进入 nfc 字段之前将阅读器置于初始化模式，而这只有在您可以发送 APDU 时才有效！

如果有人找到无需调用`connect()`.`cardTerminal`

这个问题与更高的比特率无关，我设法获得了 424 kbps 的通信。

您可以在 googel 代码中找到我用这些知识编写的 NFC API，我还将在那里提供一些文档：

[http://code.google.com/p/java-android-beam-api/](http://code.google.com/p/java-android-beam-api/)

非常欢迎评论！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-23T10:25:30.570

在 Java 语言中，您可以使用：

1）nfctools：[https](https://github.com/grundid/nfctools) ://github.com/grundid/nfctools 。它适用于 Android 4.0、4.1、4.2、4.3、4.4。

2) [http://code.google.com/p/ismb-snep-java](http://code.google.com/p/ismb-snep-java)。它适用于 Android 4.0 和 Android 4.4（但不适用于 4.1、4.2、4.3）。为了在 4.4 中支持三星设备，需要对协议进行一些更改（可以从 nfctools 获取，但最好使用 nfctools 来增加兼容性）。

# struts - 自定义 webapp 到 Magnolia？

> ID：11683896
> 
> 赞同：0
> 
> 时间：2012-07-27T08:09:08.170
> 
> 标签：struts, portlet, magnolia

是否可以将自定义 web 应用程序添加到 Magnolia？

我想编写一个 webapp 或 portlet 来显示电视节目（从自己的数据库中获取数据）并将其集成到 Magnolia 中。

我对编写 webapp（可能是 struts 应用程序或 portlet）没有任何问题。但是如何将其添加到 Magnolia 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:13:08.257

当然。您可以开始查看页面配置：您的应用可能是 Magnolia Page (mvc)。在“工具”菜单中查找示例：您有很多示例，源代码可在 GIT / SVN 上找到。

HTH，马特奥

# database - 我的数据库如何在不设置端口的情况下连接？

> ID：11683897
> 
> 赞同：2
> 
> 时间：2012-07-27T08:09:08.493
> 
> 标签：database, qt

我正在使用 Qt 连接到数据库（到目前为止使用 PostgreSQL 和 mySQL）并且对端口的工作方式有点困惑。如果这有所作为，我正在使用 Ubuntu。

根据此处的文档：http: [//doc.qt.nokia.com/4.8-snapshot/qsqldatabase.html#setPort](http://doc.qt.nokia.com/4.8-snapshot/qsqldatabase.html#setPort)端口没有默认值。但是，我注意到我的设置实际上并没有设置端口，但它仍然可以毫无问题地连接。

所以我把它设置成这样：

```
QSqlDatabase db = QSqlDatabase::addDatabase("QPSQL");
db.setHostName("localhost");
db.setDatabaseName("mydb");
db.setUserName("name");
db.setPassword("pass"); 
```

哪个有效（我也尝试过使用 mySQL 驱动程序）

如果我这样做，它也可以工作：`db.setPort(-1);`或者正如我所期望的那样使用默认端口：`db.setPort(5432);`

但其他端口不按预期工作。那么，鉴于它说没有默认端口值，并且 -1 显然不是有效端口，它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:35:41.567

Qt 本身可能不提供默认端口值，但各个驱动程序提供。当您`open`通过 Qt 时，它只是调用`open`特定于驱动程序的代码。

例如，Postgress 驱动程序代码包含以下`open`函数：

```
bool QPSQLDriver::open(const QString & db, const QString & user,
  const QString & password, const QString & host,
  int port, const QString& connOpts)
{
  if (isOpen()) close();

  QString conn;

  if (!host.isEmpty())
    conn.append(QLatin1String("host=")).append(qQuote(host));
  :
  if (port != -1)
    conn.append(QLatin1String(" port=")).append(qQuote(QString::number(port)));
  :
  d->connection = PQconnectdb(conn.toLocal8Bit().constData());
  :
  return true;
} 
```

同样，MySQL 的驱动程序代码`(port > -1) ? port : 0`作为端口参数传递给`mysql_real_connect()`，这意味着 的值`-1`被转换为`0`。而且，正如任何 MySQL 编码器会告诉你的那样，这会通知`mysql_real_connect()`使用默认端口。

换句话说，端口从 QT 通用默认值`-1`转换为特定驱动程序所需的任何合适的默认值（例如 MySQL 的 3306，DB2 的 50000（或 60000）等等）。

如果您*确实*设置了它，它会按原样传递给驱动程序。

# version-control - 在 windows server 2008 上设置没有 ssh 的 Bazaar SmartServer

> ID：11683898
> 
> 赞同：2
> 
> 时间：2012-07-27T08:09:09.187
> 
> 标签：version-control, windows-server-2008, dvcs, windows-server-2008-r2, bazaar

如何仅使用 Bazaar 协议（又名**bzr://**而没有**ssh** ）在 Windows 服务器上设置[Bazaar](http://bazaar.canonical.com/en/)智能服务器？**尽管**我仍然必须进行用户/密码身份验证。

 ******很难找到正确的文档，甚至是正确的信息来表明是否有可能这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:59:38.913

使用用户名和密码进行身份验证的可用 Bazaar 协议：**FTP、SFTP、HTTP、HTTPS。**

该`bzr://`协议不**支持**身份验证。

看看这里： [http ://doc.bazaar.canonical.com/developers/authentication-ring.html](http://doc.bazaar.canonical.com/developers/authentication-ring.html)******

# google-maps - 如何使用链接获取 kml 文件（谷歌地图）？

> ID：11683899
> 
> 赞同：2
> 
> 时间：2012-07-27T08:09:11.207
> 
> 标签：google-maps, kml

如何使用链接获取 Google 地图 kml 文件？

我试过了

```
http://maps.google.com/maps?f=d&hl=en&saddr=-8.703893,115.223558&daddr=-8.36429800000000,115.461588000000&ie=UTF8&0&om=0&output=kml 
```

但它返回谷歌地图视图。

一个月前，我尝试了这一步并获得了 kml：

```
 <?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://earth.google.com/kml/2.2"><Document><name>R. de Viana do Castelo to R. de Sá da Bandeira</name><Style id="roadStyle"><LineStyle><color>7fcf0064</color><width>6</width></LineStyle></Style><Snippet><![CDATA[<font size=+1><a href="http://maps.google.com/maps?hl=en&v=2.2&saddr=40.641963,-8.652592&mrsp=0&daddr=40.211490,-8.429200&mrad=41.149318,-8.607273&ie=UTF8&om=0">Printable view</a></font>]]></Snippet><Placemark><name>Head west on R. de Viana do Castelo toward R. José Estêvão</name><description><![CDATA[go 100&#160;m]]></description><address>R. de Viana do Castelo</address><StyleMap><Pair><key>normal</key><Style><IconStyle><Icon>
....

<coordinates>-8.429200,40.211490,0</coordinates></Point></Placemark><Placemark><name>Route</name><description><![CDATA[Distance: 68.4&#160;km (about 49 mins)<br/>Map data ©2012 Google, Tele Atlas]]></description><GeometryCollection><LineString><coordinates>-8.652610,40.641880,0.000000 -8.653620,40.641430,0.000000 -8.653620,40.641430,0.000000 -8.653820,40.641410,0.000000 -8.653880,40.641330,0.000000 -8.653840,40.641210,0.000000 -8.654680,40.641170,0.000000 -8.655050,40.641110,0.000000 -8.655720,40.640970,0.000000 -8.656380,40.640710,0.000000 -8.656380,40.640710,0.000000 -8.656780,40.640690,0.000000 -8.657100,40.640770,0.000000 -8.657280,40.640880,0.000000 -8.657930,40.641600,0.000000 -8.658400,40.641700,0.000000 -8.658400,40.641700,0.000000 -8.658440,40.641880,0.000000 -8.658610,40.642040,0.000000 -8.658890,40.642130,0.000000 -8.659080,40.642110,0.000000 -8.659290,40.642010,0.000000 -8.659430,40.641810,0.000000 -8.660240,40.641170,0.000000 -8.660420,40.641090,0.000000 -8.660730,40.641050,0.000000 -8.661010,40.641120,0.000000 -8.661110,40.641190,0.000000 -8.661260,40.641460,0.000000 -8.661200,40.641700,0.000000 -8.660880,40.642040,0.000000 -8.660880,40.642040,0.000000 -8.659510,40.643000,0.000000 -8.656300,40.644980,0.000000 -8.654190,40.646160,0.000000 -8.650060,40.648260,0.000000 -8.642070,40.652910,0.000000 -8.640550,40.653600,0.000000 -8.639300,40.654000,0.000000 -8.638260,40.654190,0.000000 -8.636930,40.654290,0.000000 -8.635650,40.654240,0.000000 -8.634620,40.654070,0.000000 -8.633690,40.653840,0.000000 -8.632850,40.653560,0.000000 -8.632020,40.653220,0.000000 -8.630330,40.652430,0.000000 -8.623800,40.649200,0.000000 -8.622170,40.648520,0.000000 -8.620320,40.648110,0.000000 -8.616880,40.647970,0.000000 -8.615880,40.647870,0.000000 -8.615050,40.647720,0.000000 -8.613940,40.647380,0.000000 -8.613090,40.647000,0.000000 -8.612710,40.646780,0.000000 -8.611850,40.646210,0.000000 -8.610560,40.645240,0.000000 -8.609240,40.644340,0.000000 -8.608390,40.643850,0.000000 -8.607770,40.643550,0.000000 -8.606120,40.642920,0.000000 -8.604950,40.642600,0.000000 -8.603840,40.642380,0.000000 -8.603840,40.642380,0.000000 -8.603660,40.642290,0.000000 -8.602670,40.642100,0.000000 -8.602130,40.641850,0.000000 -8.601820,40.641570,0.000000 -8.601540,40.641210,0.000000 -8.601360,40.640540,0.000000 -8.601600,40.639540,0.000000 -8.601590,40.639420,0.000000 -8.602790,40.635880,0.000000 -8.603100,40.634520,0.000000 -8.603120,40.633080,0.000000 -8.602910,40.631890,0.000000 -8.602550,40.630820,0.000000 -8.602110,40.629940,0.000000 -8.597920,40.623920,0.000000 -8.597610,40.623510,0.000000 -8.596790,40.622590,0.000000 -8.595850,40.621770,0.000000 -8.595000,40.621150,0.000000 -8.587700,40.616500,0.000000 -8.586670,40.615680,0.000000 -8.586260,40.615250,0.000000 -8.585680,40.614570,0.000000 -8.585200,40.613840,0.000000 -8.585030,40.613470,0.000000 -8.584490,40.611960,0.000000 -8.584380,40.611110,0.000000 -8.584380,40.610600,0.000000 -8.584490,40.609750,0.000000 -8.584730,40.608800,0.000000 -8.584880,40.608400,0.000000 -8.585650,40.607160,0.000000 -8.586680,40.606020,0.000000 -8.587080,40.605690,0.000000 -8.588150,40.604890,0.000000 -8.591140,40.602800,0.000000 -8.592310,40.601840,0.000000 -8.592920,40.601260,0.000000 -8.593860,40.600170,0.000000 -8.594560,40.599070,0.000000 -8.595060,40.598040,0.000000 -8.595390,40.596960,0.000000 -8.595630,40.595950,0.000000 -8.595760,40.594720,0.000000 -8.595890,40.592520,0.000000 -8.596140,40.591310,0.000000 -8.596330,40.590740,0.000000 -8.596540,40.590200,0.000000 -8.596900,40.589490,0.000000 -8.597560,40.588370,0.000000 -8.598080,40.587670,0.000000 -8.599420,40.586120,0.000000 -8.599420,40.586120,0.000000 -8.599520,40.586120,0.000000 -8.599580,40.586070,0.000000 -8.600460,40.585230,0.000000 -8.601140,40.584700,0.000000 -8.601350,40.584460,0.000000 -8.601350,40.584460,0.000000 -8.601880,40.584390,0.000000 -8.602070,40.584270,0.000000 -8.602210,40.584050,0.000000 -8.602250,40.583760,0.000000 -8.602210,40.583490,0.000000 -8.602060,40.583290,0.000000 -8.601670,40.583050,0.000000 -8.601360,40.583010,0.000000 -8.601020,40.583070,0.000000 -8.600690,40.583290,0.000000 -8.600610,40.583440,0.000000 -8.599470,40.583540,0.000000 -8.595860,40.583160,0.000000 -8.594770,40.582930,0.000000 -8.594130,40.582880,0.000000 -8.593490,40.582880,0.000000 -8.591910,40.582740,0.000000 -8.591240,40.582790,0.000000 -8.590980,40.582770,0.000000 -8.590720,40.582710,0.000000 -8.581530,40.578690,0.000000 -8.575560,40.573340,0.000000 -8.573830,40.571620,0.000000 -8.573050,40.571140,0.000000 -8.571290,40.570160,0.000000 -8.571170,40.570040,0.000000 -8.568990,40.568900,0.000000 -8.568990,40.568900,0.000000 -8.568840,40.569050,0.000000 -8.568740,40.569060,0.000000 -8.567510,40.569970,0.000000 -8.566860,40.570220,0.000000 -8.565970,40.570350,0.000000 -8.564840,40.570380,0.000000 -8.562610,40.570550,0.000000 -8.562610,40.570550,0.000000 -8.561800,40.570500,0.000000 -8.561500,40.570420,0.000000 -8.561240,40.570300,0.000000 -8.560880,40.570000,0.000000 -8.560740,40.569810,0.000000 -8.560580,40.569310,0.000000 -8.560730,40.567730,0.000000 -8.560640,40.567420,0.000000 -8.561140,40.564610,0.000000 -8.561350,40.562640,0.000000 -8.561410,40.561610,0.000000 -8.561380,40.560610,0.000000 -8.561320,40.559590,0.000000 -8.561170,40.558400,0.000000 -8.560340,40.554600,0.000000 -8.560180,40.553680,0.000000 -8.560050,40.552730,0.000000 -8.560010,40.551320,0.000000 -8.560050,40.550820,0.000000 -8.560350,40.549540,0.000000 -8.560750,40.548360,0.000000 -8.561710,40.546010,0.000000 -8.562030,40.544540,0.000000 -8.562080,40.543690,0.000000 -8.562010,40.542690,0.000000 -8.561850,40.541920,0.000000 -8.561590,40.541130,0.000000 -8.561240,40.540350,0.000000 -8.560610,40.539330,0.000000 -8.558140,40.536150,0.000000 -8.557160,40.534710,0.000000 -8.556260,40.533160,0.000000 -8.555290,40.531070,0.000000 -8.553650,40.526410,0.000000 -8.553010,40.524900,0.000000 -8.552630,40.524110,0.000000 -8.552070,40.523170,0.000000 -8.551390,40.522100,0.000000 -8.550670,40.521140,0.000000 -8.549660,40.519940,0.000000 -8.548460,40.518720,0.000000 -8.547190,40.517600,0.000000 -8.545850,40.516570,0.000000 -8.544240,40.515460,0.000000 -8.538960,40.512550,0.000000 -8.537560,40.511610,0.000000 -8.536570,40.510830,0.000000 -8.535830,40.510170,0.000000 -8.535200,40.509510,0.000000 -8.534170,40.508310,0.000000 -8.533380,40.507120,0.000000 -8.532720,40.505930,0.000000 -8.532480,40.505450,0.000000 -8.532040,40.504310,0.000000 -8.531720,40.503070,0.000000 -8.531550,40.502060,0.000000 -8.531390,40.499820,0.000000 -8.531240,40.498570,0.000000 -8.530870,40.497070,0.000000 -8.530440,40.495910,0.000000 -8.529810,40.494730,0.000000 -8.529250,40.493860,0.000000 -8.526170,40.489980,0.000000 -8.524850,40.488010,0.000000 -8.524020,40.486480,0.000000 -8.523290,40.484900,0.000000 -8.522770,40.483510,0.000000 -8.522360,40.482170,0.000000 -8.521900,40.479990,0.000000 -8.521690,40.477840,0.000000 -8.521660,40.476350,0.000000 -8.521800,40.471980,0.000000 -8.521690,40.469830,0.000000 -8.521570,40.468930,0.000000 -8.521270,40.467340,0.000000 -8.520920,40.465960,0.000000 -8.518930,40.460140,0.000000 -8.518590,40.458970,0.000000 -8.518220,40.457390,0.000000 -8.517970,40.455950,0.000000 -8.517780,40.454030,0.000000 -8.517660,40.450520,0.000000 -8.517520,40.448400,0.000000 -8.517370,40.447370,0.000000 -8.517140,40.446310,0.000000 -8.516860,40.445370,0.000000 -8.516490,40.444400,0.000000 -8.515800,40.442920,0.000000 -8.515260,40.441970,0.000000 -8.513490,40.439700,0.000000 -8.512770,40.438940,0.000000 -8.511460,40.437700,0.000000 -8.505890,40.433130,0.000000 -8.503860,40.431310,0.000000 -8.502460,40.429850,0.000000 -8.501720,40.428990,0.000000 -8.500820,40.427820,0.000000 -8.499850,40.426410,0.000000 -8.499130,40.425190,0.000000 -8.498380,40.423750,0.000000 -8.497860,40.422540,0.000000 -8.497100,40.420290,0.000000 -8.496410,40.417970,0.000000 -8.495670,40.415830,0.000000 -8.495380,40.415110,0.000000 -8.494370,40.413030,0.000000 -8.493030,40.410550,0.000000 -8.492570,40.409590,0.000000 -8.492010,40.408130,0.000000 -8.491580,40.406380,0.000000 -8.491420,40.405400,0.000000 -8.491260,40.401690,0.000000 -8.491110,40.400190,0.000000 -8.490950,40.399280,0.000000 -8.490720,40.398380,0.000000 -8.489630,40.394960,0.000000 -8.489350,40.393830,0.000000 -8.489120,40.392570,0.000000 -8.489030,40.391700,0.000000 -8.488980,40.390090,0.000000 -8.489010,40.389270,0.000000 -8.489300,40.387140,0.000000 -8.489440,40.386430,0.000000 -8.489790,40.385230,0.000000 -8.490440,40.383500,0.000000 -8.491990,40.380010,0.000000 -8.492690,40.378090,0.000000 -8.493110,40.376720,0.000000 -8.493490,40.374440,0.000000 -8.493640,40.372620,0.000000 -8.493600,40.370510,0.000000 -8.493480,40.369260,0.000000 -8.492840,40.365420,0.000000 -8.492630,40.363820,0.000000 -8.492620,40.361800,0.000000 -8.492710,40.360830,0.000000 -8.492980,40.359360,0.000000 -8.493310,40.358150,0.000000 -8.494180,40.355460,0.000000 -8.494480,40.354350,0.000000 -8.494750,40.352930,0.000000 -8.494830,40.351640,0.000000 -8.494820,40.349200,0.000000 -8.494880,40.347720,0.000000 -8.495020,40.346800,0.000000 -8.495470,40.344590,0.000000 -8.495660,40.343320,0.000000 -8.495680,40.341170,0.000000 -8.495530,40.340030,0.000000 -8.495270,40.338820,0.000000 -8.494840,40.337510,0.000000 -8.493700,40.334390,0.000000 -8.493170,40.332700,0.000000 -8.492980,40.331690,0.000000 -8.492830,40.330320,0.000000 -8.492700,40.325980,0.000000 -8.492580,40.324730,0.000000 -8.492460,40.324040,0.000000 -8.492270,40.323140,0.000000 -8.491800,40.321540,0.000000 -8.490560,40.318420,0.000000 -8.490190,40.317290,0.000000 -8.489950,40.316290,0.000000 -8.489730,40.314630,0.000000 -8.489590,40.312340,0.000000 -8.489450,40.311200,0.000000 -8.489220,40.310070,0.000000 -8.489070,40.309550,0.000000 -8.488570,40.308240,0.000000 -8.487020,40.304700,0.000000 -8.486760,40.303970,0.000000 -8.486380,40.302480,0.000000 -8.486250,40.301650,0.000000 -8.486170,40.300000,0.000000 -8.486150,40.297740,0.000000 -8.486070,40.296790,0.000000 -8.485860,40.295530,0.000000 -8.485590,40.294470,0.000000 -8.485200,40.293350,0.000000 -8.484870,40.292620,0.000000 -8.484500,40.291910,0.000000 -8.483360,40.290110,0.000000 -8.482780,40.289400,0.000000 -8.481640,40.288270,0.000000 -8.479890,40.286730,0.000000 -8.478940,40.285620,0.000000 -8.478560,40.285020,0.000000 -8.478110,40.284160,0.000000 -8.477780,40.283230,0.000000 -8.477550,40.282080,0.000000 -8.477480,40.281440,0.000000 -8.477520,40.280690,0.000000 -8.477700,40.279720,0.000000 -8.477990,40.278780,0.000000 -8.478400,40.277880,0.000000 -8.478960,40.276940,0.000000 -8.479840,40.275700,0.000000 -8.482320,40.272630,0.000000 -8.482760,40.271860,0.000000 -8.483130,40.271060,0.000000 -8.483370,40.270280,0.000000 -8.483470,40.268720,0.000000 -8.483450,40.268100,0.000000 -8.483070,40.265790,0.000000 -8.483040,40.264570,0.000000 -8.483200,40.263490,0.000000 -8.483430,40.262520,0.000000 -8.483680,40.261790,0.000000 -8.484460,40.260330,0.000000 -8.484950,40.259630,0.000000 -8.486370,40.257880,0.000000 -8.486640,40.257500,0.000000 -8.487000,40.256850,0.000000 -8.487250,40.256320,0.000000 -8.487470,40.255690,0.000000 -8.487670,40.254660,0.000000 -8.487720,40.254270,0.000000 -8.487640,40.251370,0.000000 -8.487700,40.250030,0.000000 -8.487970,40.248080,0.000000 -8.488630,40.245020,0.000000 -8.488750,40.244160,0.000000 -8.488800,40.243090,0.000000 -8.488750,40.242210,0.000000 -8.488620,40.241310,0.000000 -8.488320,40.240040,0.000000 -8.487740,40.237970,0.000000 -8.487330,40.236160,0.000000 -8.487100,40.234690,0.000000 -8.487020,40.233730,0.000000 -8.487000,40.232160,0.000000 -8.487390,40.226040,0.000000 -8.487420,40.223610,0.000000 -8.487370,40.221080,0.000000 -8.487140,40.217210,0.000000 -8.487130,40.216140,0.000000 -8.487260,40.214350,0.000000 -8.487460,40.213100,0.000000 -8.487770,40.211800,0.000000 -8.488630,40.208800,0.000000 -8.488810,40.208000,0.000000 -8.489070,40.205950,0.000000 -8.489090,40.204880,0.000000 -8.489030,40.203850,0.000000 -8.488770,40.202080,0.000000 -8.488420,40.200530,0.000000 -8.488420,40.200530,0.000000 -8.488390,40.200090,0.000000 -8.488480,40.199810,0.000000 -8.488630,40.199630,0.000000 -8.488760,40.199560,0.000000 -8.488930,40.199510,0.000000 -8.489120,40.199520,0.000000 -8.489370,40.199620,0.000000 -8.489510,40.199800,0.000000 -8.489650,40.200040,0.000000 -8.489940,40.200830,0.000000 -8.489940,40.200830,0.000000 -8.489950,40.201110,0.000000 -8.489870,40.201300,0.000000 -8.489720,40.201420,0.000000 -8.489270,40.201540,0.000000 -8.486220,40.201150,0.000000 -8.485420,40.201110,0.000000 -8.484470,40.201120,0.000000 -8.483620,40.201200,0.000000 -8.482360,40.201430,0.000000 -8.481520,40.201640,0.000000 -8.480280,40.202090,0.000000 -8.479550,40.202440,0.000000 -8.478650,40.202980,0.000000 -8.476520,40.204790,0.000000 -8.475410,40.205540,0.000000 -8.473820,40.206320,0.000000 -8.465660,40.209900,0.000000 -8.464990,40.210240,0.000000 -8.462840,40.211740,0.000000 -8.461550,40.212560,0.000000 -8.460230,40.213190,0.000000 -8.458820,40.213680,0.000000 -8.457860,40.213920,0.000000 -8.456050,40.214200,0.000000 -8.454780,40.214260,0.000000 -8.448700,40.214310,0.000000 -8.447990,40.214370,0.000000 -8.446930,40.214560,0.000000 -8.446760,40.214530,0.000000 -8.446670,40.214470,0.000000 -8.446570,40.214170,0.000000 -8.446400,40.214010,0.000000 -8.446090,40.213930,0.000000 -8.445790,40.213940,0.000000 -8.445150,40.214120,0.000000 -8.444990,40.214330,0.000000 -8.444790,40.214430,0.000000 -8.444540,40.214520,0.000000 -8.443610,40.214730,0.000000 -8.443100,40.214800,0.000000 -8.442160,40.214660,0.000000 -8.441560,40.214730,0.000000 -8.440890,40.215050,0.000000 -8.439290,40.216040,0.000000 -8.439290,40.216040,0.000000 -8.438930,40.216190,0.000000 -8.438600,40.216240,0.000000 -8.438240,40.216180,0.000000 -8.437900,40.216020,0.000000 -8.437900,40.216020,0.000000 -8.437730,40.216060,0.000000 -8.436850,40.215460,0.000000 -8.436680,40.215220,0.000000 -8.436530,40.215130,0.000000 -8.436530,40.215130,0.000000 -8.435830,40.215500,0.000000 -8.435830,40.215500,0.000000 -8.435700,40.215440,0.000000 -8.435460,40.215210,0.000000 -8.433630,40.213300,0.000000 -8.433390,40.213220,0.000000 -8.433390,40.213220,0.000000 -8.431690,40.214100,0.000000 -8.431690,40.214100,0.000000 -8.429410,40.211580,0.000000 -8.429310,40.211500,0.000000 -8.429200,40.211490,0.000000 </coordinates></LineString></GeometryCollection><styleUrl>#roadStyle</styleUrl></Placemark></Document></kml> 
```

但现在不能了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:01:04.010

Looks like Google no longer supports this url-parameter.

As a workaround you could use other mapping tools like [mapfab.com](http://www.mapfab.com/editor/new) After saving your map you can download it as kmz-file. (It also offers snapping polylines)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T11:43:04.710

`KML` 如果您单击站点上的 google-map 路线链接，您可以获得附件而不是地图窗口`https://code.google.com`。所以你只需要在那里做一个测试项目。

[在此处](https://stackoverflow.com/a/25567564/2066428)查看详细信息

# algorithm - 具有重复约束的洗牌袋

> ID：11683900
> 
> 赞同：2
> 
> 时间：2012-07-27T08:09:15.363
> 
> 标签：algorithm, random

我正在寻找一种算法来随机化一组具有 length 的项目`n`，其中每个项目可能有多个（1 到`m`）。另一个限制是同一项目可能不会出现`k`在前一个项目中。

您可能会假设`n`它远低于 100，并且总是有一个解决方案，即`m`很小`k`。如果有帮助，您还可以将输入更改为 <item, frequency> 对列表。

为了提供一些背景信息，假设我在游戏中生成任务并且有一组目标可供选择。有些目标可能会出现多次（例如“杀死老板”），但不应彼此靠近，因此简单地洗牌“袋子”是不好的。

我可以对列表进行洗牌，然后在跟踪项目间隔的同时对其进行迭代，如果测试失败，则从新的洗牌开始，但我正在寻找一种更优雅的解决方案，它也应该是紧凑、实用且易于实现的，例如C、C++ 或 JavaScript。换句话说，它不应该依赖于我可能不理解或很难实现的特殊语言特性或标准库函数。但是，您可以假设最常见的列表操作（例如排序和混洗）可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:45:52.223

如果您想要一组有效结果的统一概率，我的直觉是您提出的拒绝方案（如果安排不好，则重新排序然后重新启动）将是最容易正确编码、理解、阅读和维护的可能相当接近最快的，假设这些数字使得大多数排列都是有效的。

不过，这是另一种简单的方法，它基于贪婪地选择有效值并希望你不要把自己搞垮。如果有许多无效排列（高`m`和`k`），则根本不能保证找到解决方案。

```
shuffled = list of length n
not_inserted = {0, 1, ..., n-1}
for each item i, frequency m_i, nearness constraint k_i:
    valid = not_inserted
    do m_i times:
        choose an index j from valid
        shuffled[j] = i
        not_inserted.remove(j)
        valid.remove(j-k_i, j-k_i+1, ..., j, ..., j+k_i) 
```

如果`valid`为空，则您构建的部分解决方案很糟糕，您可能必须重新启动。我猜如果你按照递减的顺序循环，失败的可能性就会降低`m_i`。

与排序/拒绝方法相比，我不确定这种方法失败的频率有多高（实现并运行一些数字会很有趣......）。我猜想在`k`中等高的情况下它可能会更快，但通常更慢，因为洗牌对于`n << 100`.

# android - 检索数据 - SQLite 查询与从内存中存储和检索数据

> ID：11683914
> 
> 赞同：0
> 
> 时间：2012-07-27T08:10:31.423
> 
> 标签：android, database, performance, sqlite, arraylist

我有以下电影 SQLite 数据库的数据结构（我会保持简单，真正的表有更多字段）：

*   流派-（id，名称）
*   电影 - （id，genreId，名称，年份）
*   场景 - (id , movieId , name)

例如：

*   类型 - （7，惊悚）
*   电影 - (250 , 7 , 第六感 , 1999)
*   场景 - (15 , 250 , 我看到死人)

我将数据存储在我的 Android 应用程序的 SQLite 数据库中。我有一个数据管理器类，用于检索相关数据。

我需要能够执行以下操作：

*   获取所有类型
*   获取每个流派 id 的所有电影（+ 根据不同字段排序的能力）
*   根据电影 id 获取特定的电影项目
*   根据电影ID获取所有场景
*   ...

我想知道，性能方面，处理这些数据的更好方法是什么：

1.  每次我需要获取数据时执行 SQLite 查询。
2.  从 th db 获取一次数据后，将其存储在数组列表中，从而将其保存在内存中，例如 - 流派的 ArrayList，其中流派对象包含电影对象的数组列表...
3.  与选项 2 相同，但带有哈希映射。在那种情况下 - 在地图上循环时，有没有办法控制对象的顺序？
4.  想到任何其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:41:25.710

通常，您从数据库中检索数据并使用 CursorAdapter 在 ListView 中表示数据。所以，我想这是最有效的方法。如果您的表有不同的活动，在活动被销毁之前，它们会将您的数据存储在内存中。

# mysql - 用于留言板站点的 RDBMS 与 NoSQL

> ID：11683920
> 
> 赞同：3
> 
> 时间：2012-07-27T08:11:02.990
> 
> 标签：mysql, database, database-design, nosql, web-development-server

我正在设计和规划一个新网站。
它主要是一个留言板网站

我过去有使用 MySQL 的经验，但我听到很多声音（不是在我脑海中）
告诉 NoSQL 可以像 RDBMS 一样好的解决方案。

NoSQL 的主要诉求是性能。你怎么看待这件事？

所以，
我的网站需要一种可扩展的数据库设计技术。如果我使用 NoSQL，我知道这方面有几种技术
（文档存储、键值存储等）。如何选择？

你认为哪个更适合留言板网站：
NoSQL 还是 MySQL？

谢谢，
插座

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T17:09:46.050

SQL 和 no-SQL 都可以用于您的目的。使用无 SQL 的两个主要原因是，如果您*确实*有大量流量（并且您的 sql 解决方案在性能方面无法正常工作），以及您是否有大量非结构化和不断变化的数据，这些数据受益于无模式。

我个人认为您需要考虑的一个重要因素是可维护性。

如果你使用 no-sql 创建任何东西，与 SQL 相比，你将只有不到 10% 的用户来维护它。

程序员通常希望在技术上使用“最佳”解决方案，但不考虑可维护性和成本方面的因素，尤其是当他们认为解决方案“简单”时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:53:22.597

)，出于您的目的，我认为 NoSQL 可能是比 MySQL 更好的选择。您应该检查一下 MongoDB 或 CouchDB，它们都是开源可扩展的 NoSQL DB（正如已经提到的，还有其他商业可用的 NoSQL DB 和文件存储系统）基本上，消息板并不真的需要 DBMS。在 DBMS 中，查询处理操作比在 NoSQL DB 中慢，并且消息板可能具有大量流量以及不一定具有固定模式的数据。NoSQL 在数据结构方面的灵活性使得可以轻松地利用和实现分片、分区、索引和其他技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T17:04:01.427

虽然性能是关键要素之一，但这不是 NoSQL 中的特性，它更多是设计的结果，我认为特性是它的数据结构的灵活性以及将信息存储在单行中的可能性，避免了多个处理密切相关的记录时的往返行程（查看这篇文章[http://djondb.com/blog](http://djondb.com/blog)以更好地理解我在说什么）。对于任何需要每天更改其模型的网站，选择能够跟上这种灵活性的数据库是明智的。我有点偏见，因为我是 NoSQL 文档存储的作者，但我建议您尝试一下 NoSQL 文档存储，您会惊讶于使用这种易于存储的方法创建解决方案的速度有多快.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T17:16:40.200

你看过 Redis (http://redis.io/) 吗？

您可以使用 Redis 对 RDBMS 中的几乎所有内容进行建模。在大多数情况下，您将获得 x10 的性能，并且它得到了一个非常活跃的社区的支持。

我建议你在 Redis 论坛详细说明你的需求，你可能会得到最诚实、最专业的回复；其中一部分可能会建议您在架构的不同部分使用其他 NoSQL 技术

# java - FindBugs 的未经检查的铸造投诉

> ID：11683925
> 
> 赞同：3
> 
> 时间：2012-07-27T08:11:16.243
> 
> 标签：java, findbugs

考虑以下代码：

```
 public void broadcast(FacesEvent event)
    throws AbortProcessingException {

    if(!(event instanceof WrapperEvent)) {
      super.broadcast(event);
      return;
    }

    // Sets up the correct context and fire our wrapped event.
    GridWrapperEvent revent = (GridWrapperEvent)event; // FindBugs is complaining here 
    int oldRowIndex = getRowIndex();
    int oldColumnIndex = getColumnIndex();
    boolean oldClientIdRewritting = clientIdRewritting;
    setClientIdRewritting(revent.isClientIdRewritting());

    setActiveCell(revent.getRowIndex(), revent.getColumnIndex());

    FacesEvent rowEvent = revent.getFacesEvent();
    rowEvent.getComponent().broadcast(rowEvent);
    setActiveCell(oldRowIndex, oldColumnIndex);
    setClientIdRewritting(oldClientIdRewritting);
  } 
```

[FindBugs](http://findbugs.sourceforge.net/)抱怨注释行。有什么我可以做的吗？这是 FindBugs 所说的：

> **未经检查/未经确认** 的强制转换 这种强制转换是未经检查的，并且并非所有被转换类型的实例都可以转换为它被转换到的类型。确保您的程序逻辑确保此转换不会失败。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T08:29:48.240

如果您*知道*这`event`将始终是 a `GridWrapperEvent`，则可以忽略该警告。否则，您可以将演员表（以及取决于它的逻辑）包装在检查中，例如

```
if (event instanceof GridWrapperEvent) {
  // ...
} 
```

事实上你已经在这样做了，但是对于（我假设）更通用的`WrapperEvent`类。也许您可以调整该检查而不是添加新检查。

# c++ - boost::thread 生产者 消费者

> ID：11683927
> 
> 赞同：1
> 
> 时间：2012-07-27T08:11:35.783
> 
> 标签：c++, boost, boost-thread, producer-consumer

我是新手，`boost::thread`我正在使用监视器制作生产者消费者。这就是我到目前为止的编码方式。

```
//{ Declarations in header
private:
  boost::condition_variable    _condition;
  boost::mutex                 _mutex;
  std::deque<RawMatrix*>       _queue;
  boost::detail::atomic_count  _count;
//}

void MatrixMonitor::deposit(RawMatrix* rawMatrix){
    boost::unique_lock<boost::mutex> lock(_mutex);
    _condition.wait(lock, boost::bind(std::less_equal<int>(), boost::ref(_count), max));
    _queue.push_back(rawMatrix);
    ++_count;
    _condition.notify_one();
}

RawMatrix* MatrixMonitor::withdraw(){
    boost::unique_lock<boost::mutex> lock(_mutex);
    _condition.wait(lock, boost::bind(std::greater_equal<int>(), boost::ref(_count), min));
    RawMatrix* elem = _queue.front();
    _queue.pop_front();
    --_count;
    _condition.notify_one();
    return elem;
} 
```

可以吗 ？我无法理解的一件事是我现在将如何设计生产者和消费者？到目前为止我已经完成了

```
void MatrixProducer::produce(){
    boost::mutex::scoped_lock lock(_mutex);
    RawMatrix* matrix = rawMatrix();
    _monitor->deposit(matrix);
}
RawMatrix* MatrixProducer::rawMatrix(){/*Generates and returns a matrix*/} 
```

但是我如何/应该`produce()`在某个时间间隔内运行。而且我不知道我需要在消费者中写什么。谁将拥有此 Producer、Consumer 和 Monitor 的所有权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:48:41.007

> 可以吗 ？

1.  您不应将一个条件变量用于两个不同的谓词。对队列满条件使用一个条件变量，对队列空条件使用一个条件变量，否则您最终会丢失更新。

2.  在您的 producer() 函数中，如果没有必要，您不应该锁定第二个互斥锁。如果调用 rawMatrix() 是必要的谓词，您至少可以在调用 deposit() 之前释放互斥锁，以免锁定两个互斥锁。每次锁定多个互斥体时，都必须注意可能出现的死锁。避免死锁的一种方法是始终以相同的顺序锁定互斥锁（所谓的锁定层次结构）。

> 我现在将如何设计生产者和消费者？

设计您的生产者和消费者取决于您，并且很大程度上取决于您的要求。生产者/消费者模式用于将工作负载的产生与实际处理分离。这是工作的缓冲。

> 谁将拥有此 Producer、Consumer 和 Monitor 的所有权？

根据您的设计，生产者拥有队列而队列拥有消费者可能是有意义的。

# javascript - 使用纯 JavaScript 获取事件的选择元素值

> ID：11683934
> 
> 赞同：14
> 
> 时间：2012-07-27T08:12:01.773
> 
> 标签：javascript, event-handling, dom-events, html-select

我想在单击选择元素时获取选择元素的值！我想在 HTML 中没有`onchange`属性的情况下这样做。

我想在没有 jQuery 的情况下实现这一点。当这个小脚本是我唯一需要的东西时，我不想在这个网站中包含一个 jQuery 框架。

```
var select_element = document.getElementById('product-form-user-enquiry-type');

select_element.onchange = function(e){
    if (!e)
        var e = window.event;
    var svalue = select_element.value;
    alert( svalue );
}
if ( select_element.captureEvents ){
    select_element.captureEvents(Event.CHANGE);
} 
```

`select_element.value;`包含一个空字符串。我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T08:18:17.937

```
​document.getElementById('test').onchange = function() {
    alert(this.options[this.selectedIndex].val​​​ue);
};​ 
```

上面的工作吗？

编辑：

编辑以反映您选择的 ID 等。

```
var select_element = document.getElementById('product-form-user-enquiry-type');

select_element.onchange = function(e){
    if (!e)
        var e = window.event;
    var svalue = this.options[this.selectedIndex].value;
    alert( svalue );
}​ 
```

看到它在工作：http: [//jsfiddle.net/gRoberts/4WUsG/](http://jsfiddle.net/gRoberts/4WUsG/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-08-26T14:57:54.540

适用于所有浏览器（包括 IE8）的解决方案：

```
var select_element = document.getElementById('product-form-user-enquiry-type');

select_element.onchange = function() {
    var elem = (typeof this.selectedIndex === "undefined" ? window.event.srcElement : this);
    var value = elem.value || elem.options[elem.selectedIndex].value;
    alert(value);
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-17T10:21:52.177

`.onchange = function() { ... }`似乎覆盖了其他处理程序，所以我使用[addEventListener("change", function() { ... })](https://developer.mozilla.org/ru/docs/Web/API/EventTarget/addEventListener)

# abap - 如何在不首先填充所有其他必需参数的情况下为参数选择多个范围？

> ID：11683945
> 
> 赞同：6
> 
> 时间：2012-07-27T08:12:39.963
> 
> 标签：abap, sap-gui, dynpro

![图片](../Images/3db66fb6b5ee70abea8545bc2ce1959f.png)

我希望能够为“销售订单号”提供多个范围选择。

问题是：当我按下标有绿色的按钮时，我收到错误“填写所有必填字段”。

我将我的主要处理块放在 START-OF-SELECTION 事件中。

怎么做才能不发生这种情况？在我看来，我应该能够添加多项选择，而无需先填写所有其他必填字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T10:09:34.750

将参数/选择选项设置为 OBLIGATORY 时，这将不起作用。我前段时间遇到了同样的问题，默认情况下没有机会用有用的值填充 OBLIGATORY 输入参数，所以我做了以下操作：

*   从所有选择选项和参数中删除 OBLIGATORY 选项
*   在没有 F4、帮助、F1 帮助或按下任何选择选项旁边的按钮的情况下，自己处理强制性输入的检查：

代码：

```
AT SELECTION-SCREEN ON s_reswk.

IF sy-ucomm(1) <> '%' AND      " sel screen action request
   sy-ucomm(1) <> '_' AND      " scope option
   s_reswk IS INITIAL.         " Obligatory input missing
   MESSAGE text-e01 TYPE 'E'.  " Error message
ENDIF. 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-30T12:45:34.870

以下是我发现的完全重现了强制添加所设置的行为：

1：取出“强制”添加。

2：在公益组织：

```
LOOP AT SCREEN.
  IF screen-name cs 'name-of-your-select-options-or-parameter'.
    screen-required = 2.
    MODIFY SCREEN.
  ENDIF. 
```

3：在 PAI：

```
if sscrfields-ucomm = 'ONLI'.
    if 'name of your select-option-or-parameter' is initial.
      clear sscrfields.
      message 'Fill in all required fields.'(009) type 'E'.
    endif.
  endif. 
```

请注意第一个 if 语句包含一个“cs”逻辑运算符。那是因为您的控件名称也将包含其他奇怪的东西。例如 %_P_MATNR_% *SCREEN* %% （您的参数是 p_matnr）。

此外，声明 :`TABLES sscrfields.`是必要的。

# java - Java逐字加密

> ID：11683946
> 
> 赞同：1
> 
> 时间：2012-07-27T08:12:47.600
> 
> 标签：java, encryption, aes

我正在尝试接收一个长字符串并使用以下代码对其进行加密：

```
import java.security.*;
import javax.crypto.*;
import javax.crypto.spec.*;
import java.io.*;

public class AESEncrypt {

    /**
     * Turns array of bytes into string
     * 
     * @param buf
     *            Array of bytes to convert to hex string
     * @return Generated hex string
     */
    public static String asHex(byte buf[]) {
        StringBuffer strbuf = new StringBuffer(buf.length * 2);
        int i;

        for (i = 0; i < buf.length; i++) {
            if (((int) buf[i] & 0xff) < 0x10)
                strbuf.append("0");

            strbuf.append(Long.toString((int) buf[i] & 0xff, 16));
        }

        return strbuf.toString();
    }

    public static byte[] hexStringToByteArray(String s) {
        int len = s.length();
        byte[] data = new byte[len / 2];
        for (int i = 0; i < len; i += 2) {
            data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4) + Character
                    .digit(s.charAt(i + 1), 16));
        }
        return data;
    }

    public static void main(String[] args) throws Exception {

        String message = "Test text!";

        // Get the KeyGenerator
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        kgen.init(128); // 192 and 256 bits may not be available

        // Generate the secret key specs.
        SecretKey skey = kgen.generateKey();
        byte[] raw = skey.getEncoded();

        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        System.out.println("Key: " + asHex(raw));

        // Instantiate the cipher

        Cipher cipher = Cipher.getInstance("AES");

        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);

        byte[] encrypted = cipher.doFinal((args.length == 0 ? message : args[0]).getBytes());
        System.out.println("encrypted string: " + asHex(encrypted));

    }
} 
```

但是，我想逐字加密并打印出加密文本：

原始字符串 -> 测试文本！

加密字符串 -> 29f84h2f 23f9f92jf3

我在网上找不到任何可以帮助我的例子。无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:12:13.017

试试下面的例子；实际上，它只需要使用 StringTokenizer。首先，您必须标记您的目标字符串。之后，加密令牌字符串。

```
import java.util.StringTokenizer;

import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

public class AES {
    public static String asHex(byte[] buf) {
        StringBuffer strbuf = new StringBuffer(buf.length * 2);
        int i;

        for (i = 0; i < buf.length; i++) {
            if (((int)buf[i] & 0xff) < 0x10)
                strbuf.append("0");
            strbuf.append(Long.toString((int)buf[i] & 0xff, 16));
        }

        return strbuf.toString();
    }

    public static void main(String[] args) throws Exception {
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        kgen.init(128); // 192 and 256 bits may not be available
        // Generate the secret key specs.
        SecretKey skey = kgen.generateKey();
        byte[] raw = skey.getEncoded();

        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);

        String target = "This is just an example";
        StringTokenizer token = new StringTokenizer(target);
        while(token.hasMoreTokens()) {
            String temp = token.nextToken();
            byte[] encrypted = cipher.doFinal((args.length == 0 ?  temp : args[0]).getBytes());
            System.out.println(asHex(encrypted) + " ");
        }
    }
} 
```

输出 ：

```
 d40186eab04d10e299801e7ad9046c06 6a71265c768a3b6e1f1a8f891d621c1d 735e3f54c8ad7242466e3517e8dd1659 5216643345db0f0c12f65c66c5363be3 b823355d5bb31bf092df98e18fa8001c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:32:39.140

AES 是一种块密码，它使用 16 字节块。它不是在文字中起作用，而是在固定的块中起作用。如果您想将文本拆分为不同大小的单词，那么您可能会通过使用流密码（例如 RC4）或在 CTR 模式下使用 AES 来更接近您想要的内容，这可以有效地将 AES 转换为流密码。流密码不能以块为单位，而是以字节为单位。对于 3 个字母的单词，您可以从流中取出 3 个字节，对于 9 个字母的单词，您可以从流中取出 9 个字节。

你需要弄清楚如何处理单词之间的空格、标点符号等。您还需要考虑重新键入密码的频率。您想为每个单词重新键入，还是只是在每个字符串的开头重新键入？与任何流密码一样，永远不要使用相同的密钥两次。

# zend-framework - Doctrine2 - 为会话加载的实体不起作用

> ID：11683950
> 
> 赞同：0
> 
> 时间：2012-07-27T08:12:57.157
> 
> 标签：zend-framework, doctrine-orm

我在我的 ZendFramework 项目中使用 Doctrine2，但我遇到了一个不容易解决的问题......

因此，当用户成功登录页面时，我将他的对象放入会话中：

```
Zend_Auth::getInstance()->getStorage()->write($user); 
```

一切正常，但是当我刷新页面并从会话加载用户时：

```
$user = Zend_Auth::getInstance()->getStorage()->read(); 
```

有了这个 $user 我不能做任何 Doctrine2 操作 :-/. 我可以使用例如“getId()”方法，但是当我尝试在任何关系中使用 $user 时：

```
$session = new App_Model_LogSessions();
$session->setUser($user);
... 
```

我看到了 Doctrine2 异常：

> 实体 App_Model_Users 不受管理。如果实体从数据库中获取或通过 EntityManager#persist 注册为新实体，则该实体被管理

我怎样才能解决这个问题？有什么方法可以“重新加载”实体吗？我需要使用会话，我不想在每个页面请求中从数据库加载用户。我想加载他一次并让他参加会议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:24:22.377

在会话中保存 Doctrine 实体（基本上是您需要的）在这里得到了回答：[Doctrine 2: Can entity are saved into sessions？](https://stackoverflow.com/questions/7473115/doctrine-2-can-entities-be-saved-into-sessions)

取决于您将如何使用该实体，转换为数组可能会完成这项工作，同时它非常简单。您将无法将其用作实体（持久性等），但您将能够访问数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:24:23.860

我建议您只存储实际 ID 并使用缓存。但要解决您的问题，您始终可以重新附加实体。

这就是你要做的事情（我不建议这样做，但无论如何:-P）

```
// Assume that $em is a instance of the EntityManager
$attachedObject = $em->merge($object); 
```

# php - 为 AWS 测试我的 PHP/MySQL 应用程序的性能

> ID：11683951
> 
> 赞同：2
> 
> 时间：2012-07-27T08:13:00.587
> 
> 标签：php, mysql, performance, amazon-web-services, amazon-rds

我正在编写一个在后端使用 MySQL 的 PHP 应用程序。我预计每秒大约有 800 个用户访问我们的服务器，请求来自 iOS 应用程序。

该应用程序分布在大约 8 个不同的 PHP 脚本中，这些脚本正在执行非常简单的 SELECT 查询（有时使用 1 个连接）和简单的 INSERT 查询，我一次只插入一行（平均每行少于 10kb 的数据）。SELECTS 和 INSERTS 之间大约有 50/50 的比例。

该计划是使用 Amazon Web Services 并将应用程序托管在 EC2 上以分散 CPU 负载和 RDS（使用 MySQL）来处理数据库，但我知道 RDS 不会向外扩展，只会向上扩展。因此，在提交 AWS 解决方案之前，我需要在我们的开发服务器上对我的应用程序进行基准测试（不是一百万英里的中等 RDS 解决方案规范），以大致了解我的应用程序和 MySQL 每秒可以处理多少个请求（对于大概数字） - 在对 AWS 本身进行实际基准测试之前。

我相信我只需要在 PHP 中对查询进行性能测试，因为 EC2 应该处理 CPU 负载，但我确实需要查看 RDS（MySQL）是否/如何应对这么多用户。

任何有关如何处理这种情况的建议将不胜感激。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:16:43.097

您是否考虑过使用 Apache Benchmark？应该在这里完成工作。我也听说过关于[围攻](http://www.joedog.org/siege-home/)的好消息，但还没有测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:12:12.417

如果您每秒有 800 次用户点击，那么从一开始就考虑分片可能是个好主意。从一开始就设计和实施分片将使您从少量主机开始，然后更容易地向外扩展。如果你只为一台服务器设计，即使现在它可以处理负载，很快你就需要扩大规模，然后当应用程序已经投入生产时切换到分片架构会变得更加复杂。

# java - Luntbuild 没有定义模块！错误

> ID：11683952
> 
> 赞同：0
> 
> 时间：2012-07-27T08:13:01.260
> 
> 标签：java, build, continuous-integration, luntbuild

我正在尝试在我们的 UAT 环境中从头开始设置 Luntbuild 1.6.2。我已经创建了一个项目、构建器和时间表。我们使用 subversion 作为源代码控制，所以我在 luntbuild 中也指定了存储库和路径。

但是当我触发计划时，什么也没有发生，系统日志如下所示：

```
com.luntsys.luntbuild.utility.ValidationException: No modules defined! 
 at com.luntsys.luntbuild.vcs.Vcs.validateModules(Vcs.java:323) 
 at com.luntsys.luntbuild.vcs.SvnAdaptor.validateModules(SvnAdaptor.java:739) 
 at com.luntsys.luntbuild.vcs.Vcs.validate(Vcs.java:342) 
 at com.luntsys.luntbuild.db.Project.validate(Project.java:347) 
 at com.luntsys.luntbuild.db.Project.validateAtBuildTime(Project.java:363) 
 at com.luntsys.luntbuild.db.Schedule.validateAtBuildTime(Schedule.java:383) 
 at com.luntsys.luntbuild.BuildGenerator.execute(BuildGenerator.java:186) 
 at org.quartz.core.JobRunShell.run(JobRunShell.java:202) 
 at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:529) 
```

我不知道我错过了什么？任何线索...？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:41:01.433

在我的一位同事的帮助下，我能够解决这个问题......

您必须在 VCS 适配器选项卡中添加模块，并且不需要定义所有条目。我把它全部留空，它解决了这个问题。

# php - 如何在 PHP 中实现多线程递归？

> ID：11683953
> 
> 赞同：1
> 
> 时间：2012-07-27T08:13:05.243
> 
> 标签：php, recursion

我在 XML 中有一个类别树，例如

```
<cat name='cat_1' id='1'>

 <cat name='cat_2' id='2'>
   <cat name='cat_3' id='3'>

   </cat>
 </cat>

 <cat name='cat_4' id='4'>
   <cat name='cat_5' id='5'>

      <cat name='cat_6' id='6'>
        <cat name='cat_7' id='7'>

        </cat>
      </cat>
  </cat>  
 </cat>

</cat> 
```

现在我想实现代码，以便我可以遍历这棵树并按名称查找类别 ID，即如果输入是 cat_6，则结果应该是 6；

我做了什么

$xmlCatTree // 是我的简单 xml 对象

```
class MyClass{   
 public function traverseForId($cat_name , $xmlCatTree )
      {

        if($xmlCatTree->attributes()->name == $cate_name)
            {
              return $xmlCatTree->attributes()->id;
            }
        if(count($item->children())>0){
        foreach($item->children() as $child)
        {
             return $this->traverseForId($cat_name,$child);
        } } 

      } 

} 
```

它适用于单个分支，即 cat_2 的子节点将具有正确的结果，但如果我搜索 cat_7 则不会返回任何内容。我的事情是由于分支递归而发生的。我想知道如何应对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:19:28.367

看来，您正在使用`SimpleXML`，因此我建议直接查询树。

```
foreach ($xmlCatTree->xpath('//cat[@name=' . $cat_name . ']') as $node)
  return $node->attributes()->id;
}
return null; 
```

这更加优雅，因为它直接反映了您要实现的目标：给我所有属性为“name”且值为“ `$cat_name`”的节点。

或者（因为看起来，ID 已经是类别名称的一部分；））

```
list($unusedThingy, $id) = array_pad(explode('_', $cat_name, 2), 2, null);
return $id; 
```

但我想那不是真的，你在找什么；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:21:19.367

您的功能仅检查第一个孩子，尝试使用我的代码：

```
public function traverseForId($cat_name, $xmlCatTree)
{
    if ($xmlCatTree->attributes()->name == $cat_name)
        return $xmlCatTree->attributes()->id;

    foreach ($xmlCatTree->children() as $child) {
        $res = $this->traverseForId($cat_name, $child);
        if($res)
            return $res;
    }
    return NULL;

} 
```

# c++ - 复制构造函数可以采用非常量参数吗？

> ID：11683959
> 
> 赞同：8
> 
> 时间：2012-07-27T08:13:19.330
> 
> 标签：c++

我有这个问题，有一个功能`foo()`如下，

```
vector<ClassA> vec;

void foo()
{
    ClassA a;   //inside foo, a ClassA object will be created
    a._ptr = new char[10];

    vec.push_back(a);   //and this newly created ClassA object should be put into vec for later use
} 
```

并且 AFAIK`vec`将调用`ClassA`的 copy-ctor 来制作新创建的 object 的副本，`a`这就是问题所在。如果我`ClassA`以通常的方式定义 's copy-ctor，

```
ClassA::ClassA(const ClassA &ra) : _ptr(0)
{
    _ptr = ra._ptr;
} 
```

那么 object`a`及其副本（由 vec 创建）将具有`_ptr`指向同一区域的指针，当`foo`完成时，`a`将调用析构函数来 release `_ptr`，然后`a`' 的副本`vec`将是一个悬空指针，对吗？由于这个问题，我想以`ClassA`这种方式实现 's copy-ctor，

```
ClassA::ClassA(ClassA &ra) : _ptr(0) //take non-const reference as parameter
{
    std::swap(_ptr, a._ptr);
} 
```

我的实施好吗？或者任何其他方式可以帮助完成这项工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T08:25:23.100

回答您的名义问题：是的，`T`具有一个强制类型参数`T &`或`T const &`（它还可能具有更多默认参数）的类的任何构造函数都是复制构造函数。在 C++11 中，还有一个*移动*构造函数，它需要一个 type 参数`T &&`。

拥有一个实际改变参数的非常量复制构造函数会给你的类带来非常不寻常的语义（通常是“转移语义”），并且应该被广泛记录；它还可以防止您复制常量（显然）。老人`std::auto_ptr<T>`正是这样做的。

如果可能的话，新的 C++11 风格的可变右值引用和移动构造函数为原始对象中不再需要资源时“移动”资源的问题提供了更好的解决方案。这是因为右值引用是对*可变*对象的引用，但它只能绑定到“安全”表达式，例如临时对象或您已显式转换（通过`std::move`）并因此标记为一次性的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T08:16:49.870

C++11 为此目的引入了移动构造函数：

```
ClassA::ClassA(ClassA&& ra)
: _ptr(ra._ptr)
{
    ra._ptr = nullptr;
} 
```

或者，您可以声明`_ptr`为共享指针：

```
std::shared_ptr<char[]> _ptr; 
```

然后默认的 denerated 复制构造函数就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T08:32:59.097

你不应该复制指针，你应该复制指针指向的上下文。您还应该通过告诉它您想要多少元素来初始化该类，而不是通过访问公共指针来分配它。

由于您要**复制**对象，而不是移动它，因此您应该在复制时在新对象中分配资源。

```
class A {

        int* p_;
        int size_;
public:

        A(int size) 
        : p_(new int[size]()), 
        size_(size) {
        }

        A(const A &a) 
        : p_(new int[a.size_]),
         size_(a.size_) {               
                std::copy(a.p_, a.p_ + a.size_, p_);
        }

        ...

};

int main () {
        A a(10);
        vec.push_back(a);
} 
```

但是，如果您知道要复制的对象在复制后未使用，则可以移动它的资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T08:24:47.117

您的实现的问题是您将无法将临时对象作为此 copy-ctor 的参数传递（临时对象始终为`const`）。就像已经提到的那样，最好的解决方案是迁移到 c++11 并使用移动语义。如果不可能的话`shared_array`可以换一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T08:29:28.700

附加评论：

避免此类问题创建对象`new`并在向量中存储指向对象的指针。

# xml - xsd 唯一选择器路径：排除特定元素

> ID：11683960
> 
> 赞同：3
> 
> 时间：2012-07-27T08:13:20.913
> 
> 标签：xml, xpath, xsd, selector, unique

我有以下 xml 和 xsd 作为我的问题的基本示例：

### XML

```
 <parentgroup>

    <parent id="1">
      <child id="2" />
      <child id="3" />
      <childgroup id="4">
        <child id="5" />
        <child id="2" />
      </childgroup>
      <child id="5" />
    </parent>

    <parent id="2">
      <childgroup id="33">
        <child id="1" />
        <child id="4" />
      </childgroup>
      <child id="1" />
      <child id="5" />
      <childgroup id="4">
        <child id="1" />
        <child id="6" />
      </childgroup>
    </parent>

  </parentgroup> 
```

### XSD

```
<xsd:element name="parentgroup" type="parentgroup">
    <xsd:unique name="UniqueParentId">
      <xsd:selector xpath="child::parent"></xsd:selector>
      <xsd:field xpath="@id"></xsd:field>
    </xsd:unique>
  </xsd:element>

  <xsd:complexType name="parentgroup">
    <xsd:sequence maxOccurs="unbounded">
      <xsd:element name="parent" type="parent" maxOccurs="unbounded" minOccurs="1">

        <xsd:unique name="UniqueChildId">
          <xsd:selector xpath=".//*"></xsd:selector>
          <xsd:field xpath="@id"></xsd:field>
        </xsd:unique>

      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="id" type="xsd:int" />
  </xsd:complexType>

  <xsd:complexType name="parent">
    <xsd:choice maxOccurs="unbounded" minOccurs="1">
      <xsd:element name="child" type="child" maxOccurs="unbounded" minOccurs="1"></xsd:element>
      <xsd:element name="childgroup" type="childgroup" maxOccurs="unbounded" minOccurs="1"></xsd:element>

    </xsd:choice>

    <xsd:attribute name="id" type="xsd:int" />
  </xsd:complexType>

  <xsd:complexType name="childgroup">
    <xsd:sequence maxOccurs="unbounded">
      <xsd:element name="child" type="child" maxOccurs="unbounded" minOccurs="1"></xsd:element>

    </xsd:sequence>
    <xsd:attribute name="id" type="xsd:int" />
  </xsd:complexType>

  <xsd:complexType name="child">
    <xsd:attribute name="id" type="xsd:int" />
  </xsd:complexType> 
```

### 任务

1.  所有父母都有一个独特的“id”属性。并且没有孩子具有相同的“id”属性。就像他的父母一样。
2.  父项中的子项和子组具有唯一的“id”属性。不包括 Childgroup 中的 Childs。（ids 在第一个深度加上父级是唯一的）
3.  Childgroup 中的子项具有唯一的“id”属性。（因此允许子组中的子项的 id 等于同一父项中子组外的子项的 id，但不允许与自己的子组的 id 相同，如 2\. point [（ids are在第一个深度加上父级中是唯一的）]）

### 1\. 问题

第 1 点和第 2 点很清楚，但我不知道如何排除子组的后代，我尝试关注但总是出现 xpath 语法错误

第一次尝试

```
 <xsd:element name="parent" type="parent" maxOccurs="unbounded" minOccurs="1">

        <xsd:unique name="UniqueChildId">
          <xsd:selector xpath=".//*[not(childgroup)]"></xsd:selector>
          <xsd:field xpath="@id"></xsd:field>
        </xsd:unique>

      </xsd:element> 
```

第二次尝试

```
 <xsd:element name="parent" type="parent" maxOccurs="unbounded" minOccurs="1">

        <xsd:unique name="UniqueChildId">
          <xsd:selector xpath=".//*[not(child::childgroup)]"></xsd:selector>
          <xsd:field xpath="@id"></xsd:field>
        </xsd:unique>

      </xsd:element> 
```

第三次尝试

```
 <xsd:element name="parent" type="parent" maxOccurs="unbounded" minOccurs="1">

        <xsd:unique name="UniqueChildId">
          <xsd:selector xpath="child::*[not(childgroup)]"></xsd:selector>
          <xsd:field xpath="@id"></xsd:field>
        </xsd:unique>

      </xsd:element> 
```

谢谢你的帮助！

### 无效的 XML

例1

```
 <parentgroup>

    <parent id="1">
      <child id="2" />
      <child id="3" />
      <childgroup id="7">
        <child id="5" />
        <child id="6" />
      </childgroup>
      <child id="7" />
    </parent>

    <parent id="8">
      <childgroup id=9">
        <child id="10" />
        <child id="9" />
      </childgroup>
      <child id="12" />
      <child id="13" />
      <childgroup id="14">
        <child id="15" />
        <child id="16" />
      </childgroup>
    </parent>

  </parentgroup> 
```

原因

1.  无效，因为在第一个父项中：childgroup id="7" 与 child id="7" 具有相同的 id
2.  无效，因为在第二个父母中：孩子 id="9" 与他的“父亲”孩子组 id="9" 具有相同的 id

例2

```
 <parentgroup>

    <parent id="1">
      <child id="2" />
      <child id="3" />
      <childgroup id="4">
        <child id="5" />
        <child id="7" />
      </childgroup>
      <child id="7" />
    </parent>

    <parent id="8">
      <childgroup id=9">
        <child id="10" />
        <child id="8" />
      </childgroup>
      <child id="12" />
      <child id="14" />
      <childgroup id="14">
        <child id="15" />
        <child id="16" />
      </childgroup>
    </parent>

  </parentgroup> 
```

原因

1.  无效，因为在第二个父母中：childgroup id="14" 与 child id="14" 具有相同的 id

例2

```
 <parentgroup>

    <parent id="1">
      <child id="2" />
      <child id="7" />
      <childgroup id="4">
        <child id="5" />
        <child id="6" />
      </childgroup>
      <child id="7" />
    </parent>

    <parent id="8">
      <childgroup id=9">
        <child id="10" />
        <child id="11" />
      </childgroup>
      <child id="12" />
      <child id="14" />
      <childgroup id="15">
        <child id="16" />
        <child id="11" />
      </childgroup>
    </parent>

  </parentgroup> 
```

原因

1.  无效，因为在第一个父项中：child id="7" 与 child id="7" 具有相同的 id

例2

```
 <parentgroup>

    <parent id="1">
      <child id="2" />
      <child id="3" />
      <childgroup id="4">
        <child id="1" />
        <child id="2" />
      </childgroup>
      <child id="7" />
    </parent>

    <parent id="8">
      <childgroup id=9">
        <child id="10" />
        <child id="11" />
      </childgroup>
      <child id="12" />
      <child id="14" />
      <childgroup id="9">
        <child id="16" />
        <child id="11" />
      </childgroup>
    </parent>

  </parentgroup> 
```

原因

1.  无效，因为在第二个父项中：childgroup id="9" 与 childgroup id="9" 具有相同的 id

### 有效 Xml

例1

```
 <parentgroup>

    <parent id="1">
      <child id="2" />
      <child id="3" />
      <childgroup id="4">
        <child id="5" />
        <child id="6" />
      </childgroup>
      <child id="7" />
    </parent>

    <parent id="8">
      <childgroup id=1">
        <child id="2" />
        <child id="3" />
      </childgroup>
      <child id="4" />
      <child id="5" />
      <childgroup id="6">
        <child id="7" />
        <child id="9" />
      </childgroup>
    </parent>

  </parentgroup> 
```

例2

```
 <parentgroup>

    <parent id="1">
      <child id="2" />
      <child id="3" />
      <childgroup id="4">
        <child id="5" />
        <child id="7" />
      </childgroup>
      <child id="7" />
    </parent>

    <parent id="8">
      <childgroup id=1">
        <child id="2" />
        <child id="5" />
      </childgroup>
      <child id="4" />
      <child id="5" />
      <childgroup id="6">
        <child id="2" />
        <child id="5" />
      </childgroup>
    </parent>

  </parentgroup> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:32:53.233

我已经清理并纠正了你的错误。下面是与发布的 XML 一起使用的新 XSD 以及我理解它们的方式的要求。我希望下图可以帮助您更好地可视化约束和您应该使用的 XPath。

![显示 XSD 约束的 QTAssistant 图](../Images/715bf44e58cb4d62a95ea3cf277f1ba6.png)

修改后的 XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com)-->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="parentgroup" type="parentgroup">
        <xsd:unique name="UniqueParentId">
            <xsd:selector xpath="parent"/>
            <xsd:field xpath="@id"/>
        </xsd:unique>
    </xsd:element>

    <xsd:complexType name="parentgroup">
        <xsd:sequence maxOccurs="unbounded">
            <xsd:element name="parent" type="parent" maxOccurs="unbounded">
                <xsd:unique name="UniqueChildId">
                    <xsd:selector xpath=".|childgroup|child"/>
                    <xsd:field xpath="@id"/>
                </xsd:unique>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:int"/>
    </xsd:complexType>

    <xsd:complexType name="parent">
        <xsd:choice maxOccurs="unbounded">
            <xsd:element name="child" type="child" maxOccurs="unbounded"/>
            <xsd:element name="childgroup" type="childgroup" maxOccurs="unbounded">
                <xsd:unique name="UniqueChildIdInChildGroup">
                    <xsd:selector xpath=".|child"/>
                    <xsd:field xpath="@id"/>
                </xsd:unique>
            </xsd:element>
        </xsd:choice>
        <xsd:attribute name="id" type="xsd:int"/>
    </xsd:complexType>

    <xsd:complexType name="childgroup">
        <xsd:sequence maxOccurs="unbounded">
            <xsd:element name="child" type="child" maxOccurs="unbounded"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:int"/>
    </xsd:complexType>

    <xsd:complexType name="child">
        <xsd:attribute name="id" type="xsd:int"/>
    </xsd:complexType>
</xsd:schema> 
```

更新：XSD 适用于所有示例 XML。以下是 QTAssistant 对每个人的评价：

无效：例如 1：

`Error occurred while loading [], line 9 position 4 There is a duplicate key sequence '7' for the 'UniqueChildId' key or unique identity constraint. Error occurred while loading [], line 15 position 5 There is a duplicate key sequence '9' for the 'UniqueChildIdInChildGroup' key or unique identity constraint. ParentChildChildGroup-Inv-Eg1.xml is invalid.`

例如 2：

`Error occurred while loading [], line 21 position 5 There is a duplicate key sequence '14' for the 'UniqueChildId' key or unique identity constraint. ParentChildChildGroup-Inv-Eg2.xml is invalid.`

例如 2（3？）：

`Error occurred while loading [], line 9 position 4 There is a duplicate key sequence '7' for the 'UniqueChildId' key or unique identity constraint. ParentChildChildGroup-Inv-Eg3.xml is invalid.`

例如 2（4？）：

`Error occurred while loading [], line 21 position 5 There is a duplicate key sequence '9' for the 'UniqueChildId' key or unique identity constraint. ParentChildChildGroup-Inv-Eg4.xml is invalid.`

您所描述的有效 XML 已成功验证。

# ios - 在 UIPinchGestureRecognizer 中查找捏合或捏合

> ID：11683962
> 
> 赞同：20
> 
> 时间：2012-07-27T08:13:21.623
> 
> 标签：ios, uipinchgesturerecognizer

我正在使用`UIPinchGestureRecognizer`视图，现在我需要知道在我的选择器方法中是执行捏合还是执行捏合。一次其中之一。请给我一些想法来获得这个。谢谢你。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-27T08:16:44.887

使用`.scale`手势上的属性：

*   >1 捏出来
*   <1 夹入

# google-app-engine - 扩展 AppEngine 应用程序

> ID：11683963
> 
> 赞同：0
> 
> 时间：2012-07-27T08:13:23.460
> 
> 标签：google-app-engine

我最近一直在思考使用 AppEngine 的利弊。

我担心的是，当我们为 GAE 创建应用程序时，前端代码（UI 内容）是从 GAE 云中的同一个应用程序实例提供的，与 Datastore 代码一样。

问题是我的应用程序何时增长：

对于 GAE：

*   我需要创建我的应用程序的多个实例吗？
*   如果是这样，我需要什么来手动更新所有实例？

对于[Appscale](http://code.google.com/p/appscale/)：

*   我是否还需要创建我的应用程序的多个实例？
*   如果是这样，我需要什么来手动更新所有实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:20:38.497

GAE 会自动启动新的前端实例，您甚至无法创建或更新前端实例。您只需要在应用程序设置中配置最小/最大延迟、最小/最大空闲实例。[有关性能设置，](https://developers.google.com/appengine/docs/adminconsole/performancesettings)请参阅文档

顺便说一句，还有一些[后端实例](https://developers.google.com/appengine/docs/java/backends/overview)可以驻留并从管理控制台手动启动。但只有当你需要一些非常具体的东西时它才有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:02:37.017

您似乎错过了 AppEngine 的全部意义，即 Google 会自动为您扩展您的应用程序。您似乎将“实例”与“版本”混淆了——您可以控制应用程序的哪个版本，但 Google 会根据负载动态创建和终止该应用程序的实例。这是首先使用 AppEngine 的主要好处。

# android - 意图动画不起作用

> ID：11683969
> 
> 赞同：0
> 
> 时间：2012-07-27T08:13:53.777
> 
> 标签：android, android-animation

在`first Screen(exitIntent)`我得到了动画，但我没有在`2nd Intent(EntenIntent)`“我正在使用

```
@override
PendingTransition(R.layout.animation, R.layout.wavescale); 
```

在 onCreate 方法。

为什么动画不起作用，谁能解释一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:24:38.563

尝试在 overridePendingTransition 之后完成您的活动，或者我只是尝试过如果我使用 startActivityforResult 后退转换不显示

# ms-access - 保存记录、计算和同时发送给控制？

> ID：11683975
> 
> 赞同：1
> 
> 时间：2012-07-27T08:14:39.713
> 
> 标签：ms-access

我有这种形式，用户可以在其中输入物品的总量。为了方便他们计数，我在页脚中制作了一个带有求和控件的弹出式连续表单，让用户可以输入多个数量单位并只保存一个（例如：10;10;10;5 - 35 要在主目录中输入形式）

我设法让它使用`Forms![MainFormName]![ControlName].Value = Forms![PopupFormName]![NameOfSummingControl].Value`. 问题是光标必须位于要更新的​​ SumControl 的空/新记录行上，并且我想减少输入信息所需的时间。`DoCmd.RunCommand acCmdSaveRecord`我在上面代码行之前的按钮上做了一个事件，如果我按两次按钮，它就会起作用。仅按一次不会更改主窗体中的字段，这使我相信更新 SumControl 然后执行两个命令需要更多时间。

我该如何摆脱这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:40:04.597

你需要一个`Recalc`求和形式：

```
Private Sub Form_AfterUpdate()
    Me.Recalc
    Forms![MainFormName].[ControlName] = Me.[NameOfSummingControl]
End Sub 
```

我没有看到任何简单的方法可以转到下一行。After Update 事件可能是最好的，所以这意味着下一行。

# qt - Qt 4.7 - 使用paintEvent绘制带有动态反馈的2点线

> ID：11683976
> 
> 赞同：-1
> 
> 时间：2012-07-27T08:14:46.530
> 
> 标签：qt, line, mouseevent, qpainter, paintevent

所以我试图在两点之间画一条线。鼠标左键单击开始线条，然后我希望在鼠标移动时动态绘制线条（几乎就像线条的预览）。再次单击鼠标左键，线条将被永久绘制。我知道还有很多其他关于 QPaintEvents 的帖子，并且我结合了一些使用的技术，但由于某种原因，没有任何东西被绘制到画布上。下面是代码：

```
void Main::mousePressEvent(QMouseEvent * event)
{
    if (event->button() == Qt::LeftButton) {
    QPointF pos = event->pos();
        if( mStartPoint.isNull() ) {
            if(josh.contains(pos))
                mStartPoint = pos;
        } else {
            canvas.addLine(mStartPoint.x(),mStartPoint.y(),pos.x(),pos.y());
            mStartPoint = QPointF();
        }
    }
}

bool Main::eventFilter(QObject *obj, QEvent *event)
{
  if (event->type() == QEvent::MouseMove)
  {
    QMouseEvent *mouseEvent = static_cast<QMouseEvent*>(event);
    if (!mStartPoint.isNull()) {
        m_targetImage = QImage(canvas.width(),canvas.height(),QImage::Format_ARGB32);
        QPainter p;
        p.begin(&m_targetImage);
        p.drawLine(mStartPoint, mouseEvent->pos());
        p.end();
    }
    statusBar()->showMessage(QString("Mouse move (%1,%2)").arg(mouseEvent->pos().x()).arg(mouseEvent->pos().y()));
  }
  return false;
}

void Main::paintEvent(QPaintEvent *pe)
{
        QPainter painter(this);
        QPen pen(Qt::red);
        pen.setWidth(10);
        painter.setPen(pen);
        painter.drawImage(0, 0, m_targetImage);
} 
```

任何帮助表示赞赏！谢谢！乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:00:35.153

我想这就是你想要的。根据您的要求更改参数。

```
//In your constructor 
m_nInitialX = 0;
m_nInitialY = 0;
m_nFinalX = 0;
m_nFinalY = 0;
m_nPTargetPixmap = 0;
m_nPTargetPixmap = new QPixmap(400,400);
m_nbMousePressed = false;

void Main::mousePressEvent(QMouseEvent* event)
{
      m_nbMousePressed = true;
      m_nInitialX = event->pos().x();
      m_nInitialY = event->pos().y();
}

void Main::mouseReleaseEvent(QMouseEvent *event)
{
m_nbMousePressed = false;
}

void Main::paintEvent(QPaintEvent *e)
{
    if(m_nbMousePressed)
    {
    QPainter PixmapPainter(m_nPTargetPixmap);
    QPen pen(Qt::green);
    PixmapPainter.setPen(pen);
    PixmapPainter.drawLine(m_nInitialX, m_nInitialY, m_nFinalX, m_nFinalY);
    }
    QPainter painter(this);
    painter.drawPixmap(0, 0, *m_nPTargetPixmap);
}

void Main::mouseMoveEvent(QMouseEvent *event)
{
    if (event->type() == QEvent::MouseMove)
    {
     QPainter PixmapPainter(m_nPTargetPixmap);
     QPen pen(Qt::black);
     PixmapPainter.setPen(pen);
     PixmapPainter.drawLine(m_nInitialX, m_nInitialY, m_nFinalX, m_nFinalY);
     update(); // update your view
     m_nFinalX = event->pos().x();
     m_nFinalY = event->pos().y();
    }
     update(); // update your view
} 
```

这段代码会画出`2 point line`你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T10:06:05.260

这是我的示例，说明如何直接在小部件上以您的方式绘制线条。

宣言：

```
private:
    void drawLines(QPainter *p);

    QPoint startPos;
    QPoint endPos;
    bool inDrawing;
    QVector<QLine> lines; 
```

在构造函数中设置初始值：

```
Widget::Widget(QWidget *parent)
    : QWidget(parent)
{
    startPos = QPoint();
    endPos = QPoint();
    inDrawing = false;
    setMouseTracking(true);
} 
```

开始或结束画线：

```
void Widget::mousePressEvent(QMouseEvent *event)
{
    if (event->buttons() & Qt::LeftButton)
    {
        if (!inDrawing)
        {
            startPos = event->pos();
        }
        else
        {
            endPos = event->pos();

            QLine line = QLine(startPos, event->pos());
            lines.append(line);
        }

        inDrawing = !inDrawing;
    }
}

void Widget::mouseMoveEvent(QMouseEvent *event)
{
    if (inDrawing)
    {
        endPos = event->pos();
        update();
    }
} 
```

绘制当前和保存的线：

```
void Widget::drawLines(QPainter *p)
{
    if (!startPos.isNull() && !endPos.isNull())
    {
        p->drawLine(startPos, endPos);
    }

    p->drawLines(lines);
} 
```

绘画：

```
void Widget::paintEvent(QPaintEvent *event)
{
    QPainter p(this);
    QPen pen;
    pen.setColor(Qt::red);
    pen.setWidth(4);
    p.setPen(pen);

    drawLines(&p);
} 
```

# jquery - 如何在 JSF 页面中添加带有 jscript 标签（<%）的 html？

> ID：11683977
> 
> 赞同：0
> 
> 时间：2012-07-27T08:14:48.433
> 
> 标签：jquery, templates, jsf

我有一堆带有 jscript 语法的 jquery 模板，如下所示：

```
<script type="text/x-jquery-tmpl" id="template-dimensions">
    <ul>
    <% _.each(dimensions, function(dimension) { %>
    <% if (dimension.name != 'Measures') { %>
        <li class='parent_dimension'>
            <span class="root collapsed sprite"></span>
            <a class="folder_collapsed sprite" href="#" title="<%= dimension.description ? dimension.description : dimension.caption %>"><%= dimension.caption %></a>

            <ul>
            <% _.each(dimension.hierarchies, function(hierarchy) { %>
                <% if (dimension.hierarchies.length > 1) { %>
                    <li class="hierarchy hide">
                        <a class="dimension" href="#"><%= hierarchy.caption %></a>
                    </li>
                <% } %>
                <% _.each(hierarchy.levels, function(level) { %>
                    <li class="hide"><a title="<%= level.uniqueName %>" rel="<%= level.uniqueName %>" 
                        class="dimension" href="#<%= dimension.name %>/hierarchy/<%= hierarchy.uniqueName %>/<%= level.uniqueName %>"><%= level.caption %></a>
                    </li>
                <% }); %>
            <% }); %>
            </ul>
    <% } %>
    <% }); %>
    </ul>
    </script> 
```

我正在考虑使用 . 但是，它会抛出错误抱怨标签 "<%" 。任何人都知道我该如何解决这个问题？

# ide - Webstorm：如何扩展以处理 PHP 文件，甚至只是正确地突出显示代码？

> ID：11683978
> 
> 赞同：33
> 
> 时间：2012-07-27T08:14:49.447
> 
> 标签：ide, phpstorm, webstorm

我试过这个 IDE，我喜欢它。唯一的问题是，如果我在一个包含一些 PHP 的项目中，看到纯黑色文本而不是正确的 PHP 突出显示会令人困惑。

我不需要残酷的 PHP 自动完成功能，而是语法高亮。是否有可能在 Webstorm 中实现？

或者唯一的选择是使用 PHPStorm？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-06-07T04:43:37.267

为什么不

文件菜单 > 设置 > 文件类型 > 单击“ **PHP 文件**”> 在底部屏幕中单击“添加”> 输入“*.php”

（而不是带有.php的html）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-18T02:08:23.910

将 .php 文件扩展名关联到 HTML 文件会导致 IDE 至少正确突出显示 HTML 代码。

文件菜单 > 设置 > 文件类型 > 单击“HTML 文件”> 在底部屏幕中单击“添加”> 输入“*.php”。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-27T08:28:39.130

**更新**：由于 TextMate 捆绑包支持已添加到 IDE，如果有 TextMate 捆绑包，您可以将任何语言语法突出显示添加到 IDE。[请参阅我关于添加 Ruby highlighting 的回复](https://stackoverflow.com/a/16451778/104891)，它对于 PHP 是相同的，只是不同的包。

* * *

您最好的选择是使用[PhpStorm](http://www.jetbrains.com/phpstorm/download/index.html)。另一种选择是为基本语法突出显示[创建自定义文件类型](http://www.jetbrains.com/webstorm/webhelp/new-file-type.html)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-23T15:40:24.927

一个迟到的回复，但这对我有用：

使用这个 textmate 包：[https ://github.com/textmate/php.tmbundle](https://github.com/textmate/php.tmbundle)

然后转到设置 > 文件类型并将 *.php 关联到 PHP 文件。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-07T12:26:24.197

我尝试了 textmate 捆绑包，但似乎存在问题。我无法突出显示。我认为这是一个未解决的错误，所以我想知道是否有人想出了如何使用它。

[http://youtrack.jetbrains.com/issue/WEB-11065](http://youtrack.jetbrains.com/issue/WEB-11065)

[http://youtrack.jetbrains.com/issue/RUBY-14273](http://youtrack.jetbrains.com/issue/RUBY-14273)

所以我想我必须使用 PHPStorm 来获得基本的语法高亮。很伤心：/

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-02T16:31:51.597

这个问题描述了如何安装给你语法高亮的 textmate 插件：

[是否可以在 PHPStorm 中突出显示 Ruby 语法？](https://stackoverflow.com/questions/16451359/is-it-possible-to-get-ruby-syntax-highlighting-in-phpstorm/16451778#16451778)

唯一的区别是你想使用这个包：[https](https://github.com/textmate/php.tmbundle) ://github.com/textmate/php.tmbundle （但也许有更好的）

# javascript - 如何动态操作 jquery 可拖动 UL 元素的内容？

> ID：11683986
> 
> 赞同：0
> 
> 时间：2012-07-27T08:15:28.513
> 
> 标签：javascript, jquery-ui, jquery

我`<ul>`通过使用动态设置我的innerHTML`document.getElementById("myUL").innerHTML="<li...>`

我动态创建的`<li>`不能被 jquery 拖动。然而，静态 HTML 是。

如何使使用 innerHTML 指令创建的新创建的动态 HTML 可拖动？

这是一些代码：

```
function onAddTask() {
    var task = document.getElementById("task").value;

    for (i = 0; i < MAX_TASKS; i++)  {
        if (tasks[i] == null) {
            tasks[i] = task;
            break;
        }
    }

    /* construct HTML */
    var html = "<li class='ui-widget-content ui-corner-tr'>" +
            "<h5 class='ui-widget-header'>New Task</h5>" +
            "<a href='' onclick='return onCreateTask();'><img src='graphics/newtask.png' width='96' height='72'/></a>" +
            "<center>Create a new task</center>" +
            "</li>";
    for (i = 0; i < MAX_TASKS; i++) {
        if (tasks[i] != null) {
            html += "<li class='ui-widget-content ui-corner-tr ui-draggable' style='width: 96px; display: list-item;'><h5 class='ui-widget-hea
                + "<img src=graphics/task.png width=96 height=72>"
                + tasks[i]+"</li>";
        }
    }

    var todoList = document.getElementById("todo");
    todoList.innerHTML = html;

    tb_remove();

    return false;
} 
```

然后在我的 HTML 中

```
<body>
<ul id="todo" class="todo ui-helper-reset ui-helper-clearfix">
    <li class='ui-widget-content ui-corner-tr ui-draggable' style='width: 96px; display: list-item;'><h5 class='ui-widget-header'>blah</h5>
        <img src=graphics/task.png width=96 height=72>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="ui-widget-header">New Task</h5>
        <a href="" onclick='return onCreateTask();'><img src="graphics/newtask.png" width="96" height="72"/></a>
        <center>Create a new task</center>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="ui-widget-header">Task</h5>
        <img src="graphics/task.png" width="96" height="72" />
        <center>Task Data</center>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:24:45.513

在您的`onAddTask()`函数中，在行之前添加以下行`tb_remove();`

```
$("#todo li").draggable({
   helper : 'clone'
}); 
```

我假设包含了所有必需的 jquery+UI 库。希望能帮助到你。

# php - 使用 PHP 从 Mysql 显示图像

> ID：11683989
> 
> 赞同：2
> 
> 时间：2012-07-27T08:15:39.927
> 
> 标签：php, mysql

这就是我的表在我的数据库中的样子。我正在尝试显示我存储的图像，它是 mimetype (longblob) 。当我运行代码时，它给了我一个带有 ? ，没有错误只是那个框。有谁知道错误是什么以及我该如何解决？

```
Display
+-------+------------+----------+
| Index | Display_ID | Picture  |
+-------+------------+----------+
|     1 |         12 | longblob |
+-------+------------+----------+

<?php
    $mysqli=mysqli_connect('localhost','root','','draftdb');

    if (!$mysqli)
        die("Can't connect to MySQL: ".mysqli_connect_error());

    $imageid= 12;

    $stmt = $mysqli->prepare("SELECT PICTURE FROM display WHERE DISPLAY_ID=$imageid"); 
    $stmt->bind_param("i", $imageid);

    $stmt->execute();
    $stmt->store_result();

    $stmt->bind_result($image);
    $stmt->fetch();

    header("Content-Type: image/jpeg");
    echo $image; 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:52:05.803

这：

```
$stmt = $mysqli->prepare("SELECT PICTURE FROM display WHERE DISPLAY_ID=$imageid"); 
```

应该：

```
$stmt = $mysqli->prepare('SELECT PICTURE FROM display WHERE DISPLAY_ID=?'); 
```

您直接将变量嵌入到查询中，而不是像您打算的那样实际使用绑定变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:24:31.770

它没有直接回答这个问题，但通常这不是你这样做的方式。

通常，您会将图像的路径存储在数据库中（可能作为`varchar`字段），然后像往常一样加载图像。这样做的好处是它很容易，使数据库保持小并且更容易版本化，正常的缓存规则适用于图像等。

缺点是任何人都可以查看图像，这可能会也可能不会导致问题。

如果您需要沿着您开始的路线走，请先注释掉`header("Content-Type: image/jpeg");`并查看 PHP 错误是什么。这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T10:31:01.117

还需要指定内容长度标头：

```
header("Content-Length: ".strlen($image));
header("Content-Type: image/jpeg"); 
```

# javascript - 将 RGB 转换为十六进制颜色

> ID：11683992
> 
> 赞同：1
> 
> 时间：2012-07-27T08:15:47.820
> 
> 标签：javascript, colors, hex, rgb

下面是将 rgb 转换为十六进制颜色的函数。但这并不完全正确。使用 (0, 255, 0) (#00ff00)。它返回 ff00 ，因此它不是有效的颜色。我需要帮助来修改它以返回正确的十六进制值。

```
function rgbToHex(r, g, b) {
        var rgb = b | (g << 8) | (r << 16);
        return rgb.toString(16);
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T08:21:01.940

这个怎么样：

```
//...
return (0x1000000 | rgb).toString(16).substring(1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T08:24:35.407

试试这个：

```
return ("000000"+rgb.toString(16)).slice(-6);
//                                   ^----returns last 6 chars 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T08:26:21.410

```
return ((b | g << 8 | r << 16) / 16777216).toString(16).substring(2); 
```

或者

```
return ((b | g << 8 | r << 16) / 0x1000000).toString(16).substring(2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T16:39:40.900

*免责声明：我是下面提到的 pusher.color 库的作者。*

如果您不介意使用库，您可能想尝试使用[pusher.color](http://surfacecurve.org/libraries/color)或[xcolor 之](http://www.xarg.org/project/jquery-color-plugin-xcolor/)类的库。我注意到您在 Stackoverflow 上提出了一些关于 Javascript 中的颜色操作的问题，因此这可能会为您节省一些总体时间来使用库来解决您的问题。您想要的 pusher.color 语法是：

```
var hexString = pusher.color('rgb', r, g, b).hex6(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-19T13:26:28.627

只是另一种选择

```
function rgbToHex(r, g, b) {
    function c(v) {
        var hex = v.toString(16);
        return hex.length === 1 ? "0" + hex : hex;
    }
    return "#" + c(r) + c(g) + c(b);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-17T06:08:44.463

如何使用像[xolor 库这样的库](https://github.com/fresheneesz/xolor)：

```
var color = xolor([45, 100, 200])
color.rgb // "rgb(45,100,200)"
color.hex // "2D64C8"
color.hsl // {h: 219, s:63.3, l:48.0}
color.hsv // {h: 218.7, s:0.7750, v:0.7843}
color.name // "royalblue" 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-07-27T08:29:00.190

这个怎么样：

```
return $.sprintf("#%02x%02x%02x", r, g, b); 
```

为此，您需要使用 jQuery。

# html - 中心浮动 DIV

> ID：11683994
> 
> 赞同：2
> 
> 时间：2012-07-27T08:16:00.727
> 
> 标签：html, center

我试图将 3 个浮动 DIV 居中。如果我给父 DIV **display:table;它工作** 子 DIV**显示：单元格；**然后它将像一张桌子一样。还有其他方法吗？

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Center Div</title>
        <style type="text/css">
        #container
        {               
            text-align:center;
            margin:0 auto;          
            display:table;
        }
        #container div
        {           
            float:left;
            padding:5px;
            display:cell;
        }
        </style>
    </head>
    <body>  
        <div id="container">
            <div style="background-color:yellow">Text 1</div>
            <div style="background-color:lightgreen">Text 2</div>
            <div style="background-color:lightblue">Text 3</div>            
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:32:28.230

我认为如果您定义宽度，显示：块，边距 0px 自动，位置：相对它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:53:46.793

尝试这个，

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Center Div</title>
        <style type="text/css">
        #container
        {               
            text-align:center;
            margin:0 auto; 
            width:200px;

        }
        #container div
        {           
            float:left;
            padding:5px;
            display:cell;
        }
        </style>
    </head>
    <body>  
        <div id="container">
                <div style="background-color:yellow">Text 1</div>
                <div style="background-color:lightgreen">Text 2</div>
                <div style="background-color:lightblue">Text 3</div>

        </div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-27T08:30:44.470

您需要`div`像这样为父级分配宽度：

```
#container
  {               
    text-align:center;
    margin:0 auto;   
    width:150px;    
  } 
```

[**我的小提琴**](http://jsfiddle.net/FAR22/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-27T08:49:32.020

有什么理由不想使用桌子？

它可能会解决这个目的。桌子并不像他们想象的那么邪恶；）

```
<!DOCTYPE html> 
<html lang="en"> 
    <head> 
        <meta charset="UTF-8" /> 
        <title>Center Div</title> 
        <style type="text/css"> 
        #container 
        {                
            text-align:center; 
            margin:0 auto;
        } 
        #container td
        {   
            padding:5px;
        } 
        </style> 
    </head> 
    <body>   
        <div id="container">
            <table cellpadding="0" cellspacing="0" style="margin-left:auto;margin-right:auto;">
                <tr>
                    <td style="background-color:yellow">Text 1</td>
                    <td style="background-color:lightgreen">Text 2</td>
                    <td style="background-color:lightblue">Text 3</td>
                </tr>
            </table>
        </div> 
    </body> 
</html> 
```

# struts2 - 用户在 struts2 中重定向，数据不工作

> ID：11683995
> 
> 赞同：0
> 
> 时间：2012-07-27T08:16:02.660
> 
> 标签：struts2

我是struts2的新手。我正在使用 spring 应用程序开发 struts2。我开发了用户注册功能。在此注册过程中有 3 个步骤（3 个表格）。第一页是step1包含一些字段，第二页是step2包含一些其他字段，step3包含一些其他字段。我在action类中使用会话映射来放置所有表单的所有字段值。在step3中提交表单后它会调用休息服务并给出响应。如果响应正常，那么我将重定向到成功页面第 4 步。在某些情况下，如果用户已经退出，那么它会响应存在的用户，然后重定向到 step5 页面。在此页面中，我使用了一条消息“对不起用户已经存在”和一个链接“主页”。

我在第 5 步页面中使用了此链接`<s:a id="next" href="/sample/register/user.action"> Homepage </s:a>`。单击此链接后，它会转到主页（表示 step1 页面），但它不包含用户输入的值。我必须维护 step1、step2、step3 过程中的所有字段值。如何实现这个问题。

请任何人都可以提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:56:03.077

如果您使用会话映射来保留用户输入的值，我相信它们应该在会话中可用，直到您没有将它们从会话中删除或会话过期。更多当您重定向新请求时 - 响应周期开始框架将创建一个新的值堆栈，这意味着所有旧值都将丢失。

根据您的描述，我相信您正在创建类似向导的功能，如果是这种情况，我相信 struts2 会提供更优雅和灵活的解决方案

1.  [范围拦截器](http://struts.apache.org/2.2.3/struts2-core/apidocs/org/apache/struts2/interceptor/ScopeInterceptor.html)

这旨在解决一些与 Struts 中类似向导的功能相关的简单问题

如果出现故障或系统中已经存在用户，如您的案例所述，您仍然需要展示如何尝试显示用户填写的表单中的值。在这种情况下，您需要从会议。

# macos - 首选 Mac OS X 安装程序

> ID：11683997
> 
> 赞同：0
> 
> 时间：2012-07-27T08:16:10.910
> 
> 标签：macos, installation

在为我的应用程序选择 Mac OS X 安装程序版本时，我需要您的帮助，因为我不是本地 Mac 用户（我是 Windows 用户）。据我所知，有两种流行的安装程序版本：常规安装向导，以及使用窗口将文件拖到应用程序文件夹中的安装程序。哪个是首选，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T17:37:59.187

如果您不熟悉命令行工具或根本不喜欢，我会推荐两种不同的 IDE：

*   包 - 创建 OSX 安装程序包的免费且很棒的方法。它开箱即用，使用简单，但对于条件安装具有很大的深度。 [http://s.sudre.free.fr/Software/Packages/about.html](http://s.sudre.free.fr/Software/Packages/about.html)

*   DMGPackager - 共享软件 - 一个简单的应用程序，用于创建具有可选背景、许可证等的 DMG。 [http://www.skoobysoft.com/utilities/dmgp.html](http://www.skoobysoft.com/utilities/dmgp.html)

如果要分发，最好对安装程序进行签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:20:49.913

如果您的应用程序是完全自包含的，其所有资源都捆绑在一个`.app`包中（这是 Mac 应用程序的首选结构），则使用拖放安装。如果无法以这种方式捆绑您的应用程序，请使用安装程序`.pkg`。

可能有其他解决方案适用于某些类型的应用程序。例如，我开发了一个在许多平台（包括 Mac）上运行的大型 Java 应用程序，我们使用[IzPack](http://izpack.org/)构建了一个适用于所有平台的安装程序 JAR。然后，我们将其打包为 Windows 用户的 .exe（使用[Launch4J](http://launch4j.sourceforge.net/)）和 Mac 用户的 .app 包。

# java - 日期格式问题

> ID：11683998
> 
> 赞同：3
> 
> 时间：2012-07-27T08:16:17.243
> 
> 标签：java, date, timezone, format

以下 Java 测试在我们的美国托管构建服务器上通过。它还在非美国服务器上传递，例如在德国。它在我在爱尔兰运行的本地服务器上失败。以下代码说明了一个失败的测试。

```
org.junit.ComparisonFailure: expected:<[4/6/09 11:30 AM]> but was:<[06/04/09 11:30]> 
```

有没有我可以提供的系统设置来让这些测试在本地通过？

```
public void testFormattedDate() {
// Set the default time zone in case this unit test is executed in a different country
TimeZone.setDefault(TimeZone.getTimeZone(DateUtil.DEFAULT_TIMEZONE));
final Date utilDate = new Date();
utilDate.setDate(6);
utilDate.setHours(11);
utilDate.setMinutes(30);
utilDate.setMonth(3);
utilDate.setSeconds(45);
utilDate.setYear(109);

SimpleDateFormat dateFormatter = new SimpleDateFormat();        
final String formattedOutput = dateFormatter.format(utilDate);

Assert.assertEquals("4/6/09 11:30 AM", formattedOutput);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:21:36.573

必须尝试为[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)提供模式吗？

`SimpleDateFormat dateFormatter = new SimpleDateFormat("d/M/yy HH:mm a");`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T08:24:20.620

时间是正确的，但`SimpleDateFormat()`构造函数在内部使用`Locale.getDefault()`. 因此，您既可以提供自己的格式，也可以提供其他语言环境，这似乎只能使用自定义格式，即使用`SimpleDateFormat(String pattern, Locale locale)`.

问题是它`SimpleDateFormat()`使用了依赖于语言环境的模式，因此系统的默认语言环境可能会导致与您在美国获得的模式不同（我假设德国服务器不使用德语语言环境作为其默认设置，因为那时您应该得到一个日期如`06.04.09 11:30`）。