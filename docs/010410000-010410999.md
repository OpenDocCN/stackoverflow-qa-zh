# StackOverflow 问答 10410000-10410999

# asp.net - .net 的宁静服务

> ID：10410001
> 
> 赞同：1
> 
> 时间：2012-05-02T08:14:03.183
> 
> 标签：asp.net, web-services, rest, .net-4.0, .net-4.5

Microsoft 鼓励开发人员使用 asp.net web api 来创建 Restful 服务。我做了一些[谷歌搜索](https://www.google.com.pk/webhp?rlz=1C1_____enPK456PK456&sourceid=chrome-instant&ix=h9&ie=UTF-8#hl=en&gs_nf=1&pq=.net%20web%20api%20tutorial&cp=8&gs_id=5m&xhr=t&q=.net%204.0%20web%20api%20with&pf=p&rlz=1C1_____enPK456PK456&sclient=psy-ab&oq=.net%204.0%20web%20api%20with%20&aq=f&aqi=&aql=&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=beafa4bc4f8a5807&ix=h9&biw=1366&bih=624)
[http://www.matlus.com/asp-net-web-api-with-webforms/](http://www.matlus.com/asp-net-web-api-with-webforms/)

在我看来，我可以将它与 .net 4.5 一起使用，但不能与 4.0 一起使用。在 .net 4.0 中，我有哪些创建 Restful 服务的选项。是只有 wcf web api 还是应该使用的其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:39:16.393

不用安装.net 4.5也可以创建asp.net web api服务，VS2010只需要[安装](http://www.asp.net/web-api)asp.net mvc 4，.net 4.0正常使用即可。或者，您可以将 WCF 服务或 asp.net mvc 控制器用于 REST 架构，请参阅[这个](http://msdn.microsoft.com/en-us/magazine/dd943053.aspx)带有 asp.net mvc 的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:39:42.557

你的一个小错误，不再有 WCF Web Api。那是原来的名字，后来改名为 ASP.NET Web Api。

您可以将它与 .NET 4.0 一起使用。只需安装 ASP.NET MVC 4 即可获得 Web Api。但它仍处于测试阶段...

# c# - Winforms MDI 扭曲标签

> ID：10410002
> 
> 赞同：0
> 
> 时间：2012-05-02T08:14:15.040
> 
> 标签：c#, winforms, mdi

我有一个 winforms 应用程序，我使用以下类放置了自己的自定义标签

```
public class LabelWithBorder : Label
{
    protected override void OnPaint(PaintEventArgs e)
    {
        ColorMe(e);
    }

    private void ColorMe(PaintEventArgs e)
    {
        Color myColor = Color.FromArgb(104, 195, 198);
        Pen myPen = new Pen(myColor, 1);
        e.Graphics.DrawRectangle(myPen,
        e.ClipRectangle.Left,
        e.ClipRectangle.Top,
        e.ClipRectangle.Width - 1,
        e.ClipRectangle.Height - 1);
        base.OnPaint(e);
    } 
} 
```

生成的 LabelWithBorder 仅具有与我的客户自己的文献/网站等相匹配的颜色边框。下图（左侧）显示了它应该/最初的样子。但是我遇到的问题是，每当一个窗口被拖到另一个窗口上时，标签就会根据右侧的图片变形。

![带边框的标签](../Images/19ef52d5bfb0051f9f8be020e1fa6b0d.png)

任何人都可以建议导致这种失真的原因以及我应该如何纠正它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:50:54.913

这有效，代码很简单：

```
private Color myColor = Color.FromArgb(104, 195, 198);
protected override void OnPaint(PaintEventArgs e)
{
    ControlPaint.DrawBorder(e.Graphics, ClientRectangle, myColor, ButtonBorderStyle.Solid);
    base.OnPaint(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:29:19.463

尝试使用双缓冲，如下所示： [https ://web.archive.org/web/20140811193726/http://bobpowell.net/doublebuffer.aspx](https://web.archive.org/web/20140811193726/http://bobpowell.net/doublebuffer.aspx)

# html - 使用 Perl 正则表达式进行 HTML 排序

> ID：10410004
> 
> 赞同：1
> 
> 时间：2012-05-02T08:14:27.787
> 
> 标签：html, regex, perl, sorting, html-table

我有一个 HTML 文件，其中包含一个 HTML 表格，其中包含指向科学论文和作者的链接以及他们的出版年份。html 从最旧到最新排序。我需要通过解析文件并获取一个包含从最新到最旧排序的源代码的新文件来使用表格。

这是一个小的 perl 脚本，应该可以完成这项工作，但它会产生半排序的结果

```
local $/=undef;
open(FILE, "pubTable.html")  or die "Couldn't open file: $!";
binmode FILE;
my $html = <FILE>; 
open (OUTFILE, ">>sorted.html") || die "Can't oupen output file.\n";
map{print OUTFILE "<tr>$_->[0]</tr>"} 
sort{$b->[1] <=> $a->[1]} 
map{[$_, m|, +(\d{4}).*</a>|]}
$html =~ m|<tr>(.*?)</tr>|gs;
close (FILE);  
close (OUTFILE); 
```

这是我的输入文件： [链接](https://docs.google.com/open?id=0BxHnPTcuqJVmb1BQR19RWVJzMnM)

以及我得到的输出： [链接](https://docs.google.com/open?id=0BxHnPTcuqJVmbWZzNi0tMlVZZkk)

从输出中您可以看到订单进展顺利，但是我在 1992 年之后得到了 1993 年，而不是在列表的开头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:48:49.347

`map`由于 html 中的以下行，正则表达式存在问题。

```
<a href="http://www.icp.uni-stuttgart.de/~hilfer/publikationen/pdfo/">,{UCLA}-Report 982051,Los Angeles,,1989,</a></td>   </tr> 
```

和

```
<a href="http://www.icp.uni-stuttgart.de/~hilfer/publikationen/pdfo/">Phys.Rev.Lett., <b> 60</b>, 1514, 1988</a></td>   </tr>
<a href="http://www.icp.uni-stuttgart.de/~hilfer/publikationen/pdfo/">Phys. Rev. B, <b> 45</b>, 7115, 1992</a></td>   </tr>
<a href="http://www.icp.uni-stuttgart.de/~hilfer/publikationen/pdfo/">J.Chem.Phys., <b> 96</b>, 2269, 1992</a></td>   </tr> 
```

在 1989 行中，年份在末尾包含一个逗号，并且前面没有空格。正因为如此，脚本抛出了很多警告，并且总是把那行放在底部。

其他三行有一个四位数的数字`(\d{4})`，后面有一些东西`.*`（年份）。所以排序使用其他数字（7115、2269、1514）进行排序，这些数字与年份混淆。

您需要相应地调整正则表达式以解决这些问题。

前：

```
map{[$_, m|, +(\d{4}).*</a>|]} 
```

后：

```
map{[$_, m|, *(\d{4}),?</a>|]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:47:53.723

还有一个带有 XML::Twig 的解决方案，它也可以用来处理 HTML。它相当健壮：它不会处理文件中的其他表格，它会容纳像 UCLA 报告中一年中的错别字......

```
#!/usr/bin/perl 

use strict;
use warnings;

use XML::Twig;

my $IN  = 'sort_input.html';
my $OUT = 'sort_output.html';

my $t= XML::Twig->new( twig_handlers => { 'table[@class="pubtable"]' => \&sort_table,
                                        },
                       pretty_print => 'indented',
                     )
       ->parsefile_html( $IN)
       ->print_to_file( $OUT);

sub sort_table
  { my( $t, $table)= @_;
   $table->sort_children( sub { if($_[0]->last_child( 'td')->text=~ m{(\d+)\D*$}s) { $1; } },
                          type => 'numeric', order => 'reverse'
                        );
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:53:21.947

具有强大的 HTML 解析/操作库的解决方案：

```
use strictures;
use autodie qw(:all);
use Web::Query qw();
my $w = Web::Query->new_from_file('pubTable.html');
$w->find('table')->html(
    join q(),
    map { $_->[0]->html }
    sort { $a->[1] <=> $b->[1] }
    @{
        $w->find('tr')->map(sub {
            my (undef, $row) = @_;
            my ($year) = $row->find('.pubname')->text =~ /(\d\d\d\d) ,? \s* \z/msx;
            return [$row => $year];
        })
    }
);

open my $out, '>:encoding(UTF-8)', 'sorted.html';
print {$out} $w->html;
close $out; 
```

# ruby-on-rails - 我如何使用 Rails 1.2.3 包含 gems

> ID：10410007
> 
> 赞同：1
> 
> 时间：2012-05-02T08:14:34.213
> 
> 标签：ruby-on-rails, rubygems

我目前正在实习，正在学习 Ruby on Rails（主要是 3.x 版）。

我负责一个使用 Rails 1.2.3 回归的项目，所以它不包含“Gemfile”之类的东西，所以有人可以告诉我如何在我的项目中包含 gems 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T09:09:28.957

我开始使用 2.1 版的 Rails，但可能是一样的。`config/environnement.rb`因此，使用 rails 2，您可以像这样（例如）将您的 gem 放入：

```
config.gem 'mislav-will_paginate', :version => '2.3.6', :lib => 'will_paginate', 
:source => 'http://gems.github.com' 
```

接下来你运行`rake gems:install`

否则，其他方法，你必须在你的 shell 中运行`gem install yourgem`

我希望它与 Rails 1.2.3 的行为相同，但您可能会遇到与 Rails 1.2.3 不兼容的 gem 版本的问题

# flash - 在 Flash 中将两个文本输入相加并在文本字段中显示？

> ID：10410010
> 
> 赞同：0
> 
> 时间：2012-05-02T08:14:52.500
> 
> 标签：flash, actionscript-2

我想总结两个文本输入并在文本字段中显示结果。

我使用flash和as2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:46:53.307

你有任何代码可以发布显示努力吗？

以下是您应该查看的内容。

验证文本字段 1 和 2 以确保仅输入数字（查看“限制”）。

将您的文本转换为数字（查看“Number()”并执行数学运算（text3.text = num1 + num2 然后将其输出到另一个文本区域。

哎呀……今天早上我心情很好

```
private function addFields():void{    
    text3.text = (Number(text1.text) + Number(text2.text)).toString();
}

<s:textInput id="text1" restrict"0-9"/>
<s:textInput id="text2" restrict"0-9"/>
<s:textInput id="text3"/> 
```

然后只需添加一个按钮，其 onClick 设置为调用 addFields()。

下一次，发布一些你尝试过的东西，人们通常会更快，更愿意提供帮助。祝你有个好的一天。

# xcode4.2 - 似乎不是一个有效的故事板 - xcode 4.2

> ID：10410012
> 
> 赞同：4
> 
> 时间：2012-05-02T08:14:57.333
> 
> 标签：xcode4.2, storyboard

我的应用程序使用情节提要有问题。我有一个主视图和一个详细视图（当我按下主视图上的按钮时打开）；一切正常，当我按下主视图上的按钮时，详细视图正在打开，但只打开了 17 次！！在我第 18 次按下按钮时，应用程序崩溃并出现以下错误消息：

```
'nsinvalidargumentexception' reason 'there doesn't' seem to be a valid storyboard at path.... 
```

请帮我！！:)

斯特凡诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-06T08:08:01.377

“产品 -> 清洁”应该可以解决这个问题。至少它对我有帮助。

# c# - 没有 Ajax 的加载指示器

> ID：10410018
> 
> 赞同：-2
> 
> 时间：2012-05-02T08:15:16.583
> 
> 标签：c#, javascript, jquery, asp.net, load

我的 ASP.net 网页有几个 javascript 函数，它们仅在禁用 Ajax 时才有效。但我需要有一个等待屏幕/加载指示器，因为等待时间可能超过一分钟。谁能帮我获得一个 javascript/jquery 或其他非 Ajax 的东西，我可以在 ASP.net 中使用加载指示器？

例子：

![例子](../Images/8f76eb17cacdd051e6b3846303802e01.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:19:16.643

这很容易：

*   在此处创建加载图像：http: [//ajaxload.info/](http://ajaxload.info/)
*   当你的 JavaScript 启动时显示它
*   完成后隐藏

如果您想阻止用户交互，请查看[此问题](https://stackoverflow.com/questions/1262377/jquery-ajax-loading-overlay-plugin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:19:09.190

你可以：

```
var loading = document.createElement('img');
loading.src = "loading-animation.gif";
document.body.appendChild(loading); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T08:22:17.290

您可以尝试使用这些插件：

[http://james.padolsey.com/javascript/sonic-looping-loaders/](http://james.padolsey.com/javascript/sonic-looping-loaders/)

[http://heartcode.robertpataki.com/canvasloader/](http://heartcode.robertpataki.com/canvasloader/)

而这个有更多种类的装载机[http://preloaders.net/](http://preloaders.net/)

# delphi - 清除 TList 或 TObjectList

> ID：10410019
> 
> 赞同：16
> 
> 时间：2012-05-02T08:15:17.823
> 
> 标签：delphi, delphi-2007, tlist

我对使用什么将对象存储在列表中感到有些困惑。到目前为止，我已经`TList`在一个循环中使用并释放了每个项目。然后我发现`TObjectList`从`Free`. 然后我从以下文档中看到了这一点`TList.Clear`：

> 调用`Clear`以清空 Items 数组并将 设置`Count`为 0。`Clear`还释放用于存储`Items`数组的内存并将 设置`Capacity`为 0。

所以基本上是一样的。所以

为了`TList`

```
mylist.Clear;
myList.Free; 
```

和 for 一样`TObjectList`吗？

```
myList.Free; 
```

只能`TObjectList`用于作为类的项目还是可以存储记录？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T08:41:23.000

**1\. TList 不会释放元素，同时使用`Clear`or `Free`。**

aList.清除；

只会设置`aList.Count := 0`而不释放`aList.Items[]`元素。所以你会泄漏内存。你需要一个明确的免费这样的：

```
for i := 0 to aList.Count-1 do
  TObject(aList[i]).Free; 
```

但这就是`TObjectList`... :)

关于`TObjectList`，值得一说的`TObjectList.Destroy`是呼唤`Clear`。

所以

```
aObjectList.Clear;
aObjectList.Free; 
```

完全一样

```
aObjectList.Free; 
```

**2\. 要存储记录列表，可以使用动态数组。**

您将使用我们的[动态数组包装器](http://blog.synopse.info/post/2011/03/12/TDynArray-and-Record-compare/load/save-using-fast-RTTI)`TList`获得所有方法（以及更多方法）。也就是说，...`Add / Delete / Clear / Count / IndexOf / Find`

它具有内置的序列化功能（二进制或 JSON）、自动排序和比较（使用 RTTI），而`TList/TObjectList`. 从 Delphi 5 及更高版本开始。

使用更现代的 Delphi 版本，如果您不想使用第三方库，可以使用*泛型来处理动态数组。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-02T08:18:27.040

这不一样`TList.Clear`只释放分配用于存储指针的内存，而不是它们指向的对象。为避免内存泄漏，您需要自己释放内存 - 正如您一直在做的那样 - 或使用`TObjectList`.

回答第二个问题，`TObjectList`不支持存储记录。在这种情况下，您需要使用`TList`（或其他）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-02T18:56:10.053

仔细阅读文档所说的内容：

> Clear 还会释放**用于存储 Items 数组的内存**

只有数组本身的内存被释放，而不是数组内单个元素使用的内存。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-02T08:54:36.350

如果您使用的是最新版本的 Delphi，我建议您使用通用列表。

现在，当您使用列表中的对象时，您可能需要进行大量转换。有了通用列表，您就不必再这样做了。

例如，如果您有：

```
TMyObject = class(TObject); 
```

然后你制作这样的列表：

```
TMyObjectList = TObjectList<TMyObject>; 
```

Embarcadero Wiki 中有一篇文章：

[http://docwiki.embarcadero.com/CodeExamples/XE8/en/Generics_Collections_TObjectList_(Delphi)](http://docwiki.embarcadero.com/CodeExamples/XE8/en/Generics_Collections_TObjectList_(Delphi))

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-21T11:14:45.583

真正看`TObjectList`contnrs.pas 中的代码`OwnObjects`什么也没做。`FOwnObjects`是一个在其私有部分中声明的变量`TObjectList`，它不会在`TObjectList`代码中的任何地方使用（除了分配值），并且其中没有被覆盖`Clear`的过程。

所以恐怕有必要像`TList`.

# jsf - 如何使用primefaces在菜单栏/子菜单中应用热键

> ID：10410020
> 
> 赞同：0
> 
> 时间：2012-05-02T08:15:20.897
> 
> 标签：jsf, primefaces, hotkeys

我想使用 Prime Faces 在菜单栏/子菜单栏上申请热键。

当我应用热键（如 ctrl+f）时，菜单会像这样出现![在此处输入图像描述](../Images/bd86e2c029cb4d5308bc5fcbc34144b2.png)

![在此处输入图像描述](../Images/2c0059fd669dc65bbdd7b8516f5b4a1c.png)

当我单击文件菜单时，它工作正常，但使用热键它不会出现。

所以，任何朋友都可以告诉我我必须做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:27:45.933

从理论上你可以使用`<p:hotkey>`如[Primefaces 展示](http://www.primefaces.org/showcase/ui/hotkey.jsf)中所示。

但是，您需要将其绑定到客户端小部件操作。所以你需要找出哪个是你的菜单的widgetVar和打开菜单的javascript动作方法。

# iphone - XCode 应用程序未同步到 iTunes

> ID：10410021
> 
> 赞同：1
> 
> 时间：2012-05-02T08:15:21.607
> 
> 标签：iphone, xcode, itunes, ipa

我在 Xcode 上创建了一个应用程序并将其同步到 iPhone，它工作正常。现在，我想将应用程序同步到 iTunes，以便我可以复制 ipa 文件并将其发送给其他人进行测试。但该应用程序没有同步到 iTunes。

有没有办法获取ipa文件？我的应用程序使用 sqlite 数据库。这就是应用程序不同步的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:43:32.113

尝试这个：

1）构建一个应用程序。你会得到一个 .app

2) 打开 iTunes

3) 将 .app 拖放到顶部左侧面板的 iTunes 中。要真正放下，当您在面板上拖动 .app 时，您必须看到一个绿色的“+”关于光标。

4) iTunes 会将您的 .app 转换为 .ipa 文件

5) 查看 Users/{you}/Music/iTunes/iTunes Media/Mobile Applications 文件夹并找到您的 IPA 应用程序文件

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:19:13.160

我认为您在考虑这个问题，而不是部署到您的手机然后同步回 iTunes，尝试归档您的应用程序，然后进行临时分发。这将为您提供 IPA

![在此处输入图像描述](../Images/9f39894942fadf825dc0f49bcb833b1d.png)

![在此处输入图像描述](../Images/90a32da317efb194787e5e26901f1ba9.png)

现在，我对此并不完全确定，但 Apple 可能已经专门制定了协议，以防止您按照您描述的方式制作自己的 ad-hoc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:21:20.417

在 xcode 中，转到 Product->Archive。存档操作完成后，转到管理器，选择您的存档，选择共享，然后在“选择共享的内容和选项：”窗格中将内容设置为“iOS App Store Package (.ipa) 并将身份设置为 iPhone 分发（其中应与项目的临时/应用商店配置文件相匹配）。

# c# - C++ 中的 String.Format 替代方案

> ID：10410023
> 
> 赞同：34
> 
> 时间：2012-05-02T08:15:26.320
> 
> 标签：c#, c++, string, string-formatting

我没有太多使用 C++ 的经验。相反，我在 C# 中工作得更多，因此，我想通过与我将在那里做的事情相关联来问我的问题。我必须生成特定格式的字符串，我必须将其传递给另一个函数。在 C# 中，我可以通过下面的简单代码轻松生成字符串。

```
string a = "test";
string b = "text.txt";
string c = "text1.txt";

String.Format("{0} {1} > {2}", a, b, c); 
```

通过生成上面这样的字符串，我应该能够将它传递给`system()`. 不过`system`只接受`char*`

我在`Win32 C++`（不是 C++/CLI）上，并且不能使用，`boost`因为它会包含太多包含一个项目本身非常小的所有文件。like`sprintf()`对我来说看起来很有用，但不`sprintf`接受`string`,和参数。有什么建议可以在我的程序中生成这些格式化的字符串以传递给系统吗？`a``b``c`

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-02T08:19:53.263

C++ 方法是将`std::stringstream`对象用作：

```
std::stringstream fmt;
fmt << a << " " << b << " > " << c; 
```

C 方式是使用`sprintf`.

C 方式很难正确，因为：

*   这是类型不安全的
*   需要缓冲区管理

当然，如果性能是一个问题，您可能希望退回到 C 方式（假设您正在创建固定大小的百万小`stringstream`对象，然后将它们丢弃）。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-02T08:26:49.143

为了完整起见，您可以使用[`std::stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)：

```
#include <iostream>
#include <sstream>
#include <string>

int main() {
    std::string a = "a", b = "b", c = "c";
    // apply formatting
    std::stringstream s;
    s << a << " " << b << " > " << c;
    // assign to std::string
    std::string str = s.str();
    std::cout << str << "\n";
} 
```

* * *

或者（在这种情况下）`std::string`自己的字符串连接功能：

```
#include <iostream>
#include <string>

int main() {
    std::string a = "a", b = "b", c = "c";
    std::string str = a + " " + b + " > " + c;
    std::cout << str << "\n";
} 
```

以供参考：

*   [http://en.cppreference.com/w/cpp/string/basic_string/operator+](http://en.cppreference.com/w/cpp/string/basic_string/operator+)

* * *

如果你真的想走C路。给你：

```
#include <iostream>
#include <string>
#include <vector>
#include <cstdio>

int main() {
    std::string a = "a", b = "b", c = "c";
    const char fmt[] = "%s %s > %s";
    // use std::vector for memory management (to avoid memory leaks)
    std::vector<char>::size_type size = 256;
    std::vector<char> buf;
    do {
        // use snprintf instead of sprintf (to avoid buffer overflows)
        // snprintf returns the required size (without terminating null)
        // if buffer is too small initially: loop should run at most twice
        buf.resize(size+1);
        size = std::snprintf(
                &buf[0], buf.size(),
                fmt, a.c_str(), b.c_str(), c.c_str());
    } while (size+1 > buf.size());
    // assign to std::string
    std::string str(buf.begin(), buf.begin()+size);
    std::cout << str << "\n";
} 
```

以供参考：

*   [http://en.cppreference.com/w/cpp/io/c/fprintf](http://en.cppreference.com/w/cpp/io/c/fprintf)

* * *

然后是[Boost 格式库](http://www.boost.org/doc/libs/1_49_0/libs/format/doc/format.html)。为了您的示例：

```
#include <iostream>
#include <string>
#include <boost/format.hpp>

int main() {
    std::string a = "a", b = "b", c = "c";
    // apply format
    boost::format fmt = boost::format("%s %s > %s") % a % b % c; 
    // assign to std::string
    std::string str = fmt.str();
    std::cout << str << "\n";
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-23T00:27:40.033

除了其他人建议的选项外，我还可以推荐[fmt 库](https://github.com/fmtlib/fmt)，它实现了类似于[`str.format`](http://docs.python.org/2/library/stdtypes.html#str.format)Python 和`String.Format`C# 中的字符串格式。这是一个例子：

```
std::string a = "test";
std::string b = "text.txt";
std::string c = "text1.txt";
std::string result = fmt::format("{0} {1} > {2}", a, b, c); 
```

免责声明：我是这个库的作者。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-02T08:16:35.710

您可以`sprintf`与 结合使用`std::string.c_str()`。

`c_str()`返回 a`const char*`并使用`sprintf`：

```
string a = "test";
string b = "text.txt";
string c = "text1.txt";
char* x = new char[a.length() + b.length() + c.length() + 32];

sprintf(x, "%s %s > %s", a.c_str(), b.c_str(), c.c_str() );

string str = x;
delete[] x; 
```

`char`或者，如果您知道大小，则可以使用预分配的数组：

```
string a = "test";
string b = "text.txt";
string c = "text1.txt";
char x[256];

sprintf(x, "%s %s > %s", a.c_str(), b.c_str(), c.c_str() ); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-02T08:26:44.897

为了完整起见，提升方式是使用[`boost::format`](http://www.boost.org/doc/libs/1_49_0/libs/format/)

```
cout << boost::format("%s %s > %s") % a % b % c; 
```

任你选。boost 解决方案具有`sprintf`格式安全的优点（对于那些发现`<<`语法有点笨拙的人）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-02T08:28:01.907

如前所述，C++ 方式是使用字符串流。

```
#include <sstream>

string a = "test";
string b = "text.txt";
string c = "text1.txt";

std::stringstream ostr;
ostr << a << " " << b << " > " << c; 
```

请注意，您可以像这样从字符串流对象中获取 C 字符串。

```
std::string formatted_string = ostr.str();
const char* c_str = formatted_string.c_str(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-02T16:22:12.180

您可以连接字符串并构建命令行。

```
std::string command = a + ' ' + b + " > " + c;
system(command.c_str()); 
```

为此，您不需要任何额外的库。

# javascript - 如何使用javascript检查两个值是否不等于null？

> ID：10410024
> 
> 赞同：0
> 
> 时间：2012-05-02T08:15:43.853
> 
> 标签：javascript

我有以下代码：

```
var store = window.localStorage;
var a = store.getItem('AccountID');
var b = store.getItem('CityID') 
```

我怎样才能使它成为我的 refreshGrid("Page"); 函数仅在这两个都设置为值时运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T08:17:50.783

如果要检查它们是否明确`null`，只需将值与`null`：

```
if(a !== null && b !== null) {
    //Neither is null
} 
```

如果您在其中存储应该始终评估为 的值，则`true`可以跳过相等检查（如果该特定存储项中没有存储任何内容，这仍然会失败，因为`null`它是虚假的）：

```
if(a && b) {
    //Neither is falsy
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:20:26.667

你可以使用这个：

```
var a; var b;

if (a == null && b == null) {
   //a and b are null
} 
```

或者

```
if (!a && !b) {
   //a and b are null, undefined, 0 or false
} 
```

对于 James：**alert(null == undefined) // 返回 true**

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:23:07.690

我认为以下代码是您正在寻找的。

```
if(!!a && !!b){

  alert("this is not null")

}else{

  alert("this is null")

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:19:21.503

在函数顶部使用[保护条件：](http://en.wikipedia.org/wiki/Guard_%28computer_science%29)

```
function myFunction() {
    if(a==null || b==null) return;
    // ... rest of the code here
} 
```

# java - 我可以在测试运行时跳过 JUnit 测试吗？

> ID：10410025
> 
> 赞同：8
> 
> 时间：2012-05-02T08:15:43.950
> 
> 标签：java, testing, junit

假设我想从我的 IDE（Intellij IDEA 或 eclipse）手动运行 4000 个 JUnit 测试；前 1000 次测试运行得非常顺利（假设所有 1000 次测试都需要 3 分钟），但测试 1001 仅需要 30 多分钟。有没有办法我可以跳过测试 1001（当它仍在运行时）并让测试 1002（和其他测试）继续进行。我不想@Ignore 测试 1001 并重新运行套件，因为我已经有了测试 1-1000 的答案；我也不想选择测试 1001-4000，因为它需要太多时间。

我想要某种按钮 - 跳过当前测试 - 可以在测试运行时按下。

如果不存在这样的功能，IDE 开发人员或 JUnit 开发人员需要对其进行增强？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-02T12:08:54.170

这对于使用 JUnit 4 的`Assume`. `Assume`是一个像`Assert`. 不同的是，这`Assert`会使测试失败，而`Assume`会跳过它。

常见的用例是`Assume.assumeTrue( isWindows() )`仅适用于 Windows 文件系统的测试。

所以你可以做的是定义一个系统属性`skipSlowTests`并添加

```
Assume.assumeTrue( Boolean.getBoolean("skipSlowTests") ) 
```

在您通常想跳过的慢速测试开始时。创建一个定义属性的 Eclipse 启动配置，`true`您可以方便地在两者之间切换。

如果要运行慢速测试，请选择 Eclipse（或整个类）中的方法，然后从上下文菜单中使用“Run as JUnit Test”。由于该属性是`false`默认设置，因此将运行测试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-02T08:44:06.797

不，如果测试已经在运行，则不能跳过测试。

我建议您[`Categories`](http://kentbeck.github.com/junit/javadoc/latest/org/junit/experimental/categories/Categories.html)将慢速测试与其他测试分开。

例如：

```
public interface SlowTests {
}

public class MyTest {

     @Test
     public void test1{
     }

     @Category(SlowTests.class)
     @Test
     public void test1001{
         // this is a slow test
     }
} 
```

为快速测试创建一个测试套件。

```
@RunWith(Categories.class)
@ExcludeCategory(SlowTests.class)
@SuiteClasses(MyTest.class)
public class FastTestSuite {

} 
```

现在执行`FastTestSuite`如果您不想运行慢速测试（例如 test1001）。`MyTest`如果要运行所有测试，请照常执行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T09:41:48.130

What you're asking for is to stop executing your code while it is in mid test. You can't stop executing a current test without having hooks in **your code** to allow it. Your best solution is to use Categories as others have suggested.

Basically, JUnit executes all of the @Before methods (including @Rules), then your @Test method, then the @After methods (again, including @Rules). Even assuming that JUnit had a mechanism for stopping execution of it's bits of the code (which it doesn't), most of the time is spent in **your code**. So to 'skip' a test which has already started requires you to modify your test code (and potentially the code that it's testing) in order that you can cleanly stop it. Cleanly stopping an executing thread is a question in itself [*].

So what are your options?

1.  Run the tests in parallel, then you don't have to wait as long for the tests to finish. This may work, but parallelizing the tests may well be a lot of work.

2.  Stop execution of the tests, and fix the one that's you're working on. Most IDEs have an option to kill the JVM in which the tests are running. This is definitely the easiest option.

3.  Implement your own test runner, which runs the test in a separate thread. This test runner then either waits for the thread to finish executing, or checks a flag somewhere which would be a signal for it to stop. This sounds complicated, because you need t manage your threads but also to set the flag in a running jvm. Maybe creating a file somewhere? This runner would then fail the currently running test, and you could move on to the next. Please note that 'stopping' a test midway may leave stuff in an inconsistent state, or you may end up executing stuff in parallel.

There are parallel JUnit runners out there, and I don't think you're going to get much help from IDE developers (at least in the short term). Also, look at TestNG, which allows stuff to be run in parallel.

For using categories, one solution I use is to run the long running tests separately using maven surefire or similar, not through the IDE. This involves checking out the source code somewhere else on my machine and building there.

[*]: [Java, how to stop threads](https://stackoverflow.com/questions/8548483/java-how-to-stop-threads), [Regarding stopping of a thread](https://stackoverflow.com/questions/10371716/regarding-stopping-of-a-thread)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T09:22:52.970

我认为更常见的解决方案是拥有两个测试套件：一个用于快速测试，另一个用于慢速测试。这通常是您划分单元测试（快速）和集成测试（慢速）的方式。

对于这样的事情，您不太可能对 JUnit 或 IntelliJ 进行修改。最好改变你使用它们的方式——它会让你更快地得到答案。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-02T08:20:02.217

您可以修改您的主题并执行类似的操作

```
public void theTest(){
    if (System.getProperty("skipMyTest") == null){
         //execute the test
    }
} 
```

如果要跳过测试，请传递环境变量

# java - 如何在休眠中将查询结果作为 XML 获取？

> ID：10410027
> 
> 赞同：0
> 
> 时间：2012-05-02T08:16:06.567
> 
> 标签：java, xml, hibernate, struts2

我正在使用带有休眠功能的struts2。有谁知道是否可以将查询结果作为 XML 而不是域对象的 ArrayList 返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:45:06.717

Hibernate 默认映射和持久化数据库记录，认为是 POJO，但实际上它也支持通过使用称为 [动态模型](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/persistent-classes.html#persistent-classes-dynamicmodels)的实验特性以 XML 形式持久化、映射和表示数据库记录。

例如，要以 XML 格式输出记录：

```
/**Get the a new session that is in the DOM4J EntityMode**/
Session dom4jSession = session.getSession(EntityMode.DOM4J);
Element outputXML=(Element) dom4jSession.get(Employee.class, employeeId);
XMLWriter writer = new XMLWriter( System.out, OutputFormat.createPrettyPrint() );
writer.write( outputXML); 
```

要[配置输出 XML 的格式，](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/xml.html#xml-mapping)只能通过映射 XML 中的实体来实现。AFAIK，没有等效的注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:21:55.557

Hibernate 是一个对象关系映射器，这意味着它将关系数据库映射到对象。您想使用 Hibernate 返回一个对象，然后使用 XML Serializer 转换为 XML。

Simple Serializer 可能是最好的入门工具。该网站包含大量教程和示例。

[http://simple.sourceforge.net/](http://simple.sourceforge.net/)

但是有大量的用于 Java 的 XML 序列化器：

[http://karussell.wordpress.com/2009/09/03/xml-serializers-for-java/](http://karussell.wordpress.com/2009/09/03/xml-serializers-for-java/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:18:34.480

也许你可以，一旦你得到结果，使用[XStream](http://xstream.codehaus.org/)将整个结果解析为 XML。[此处](http://xstream.codehaus.org/tutorial.html)提供了有关 XStream 的简单教程。

# javascript - Map-Reduce 查询以计数标签

> ID：10410030
> 
> 赞同：3
> 
> 时间：2012-05-02T08:16:22.363
> 
> 标签：javascript, couchdb, mapreduce

我有一个带有关键字标记的文档数据库。我正在尝试查找（然后计算）彼此一起使用的唯一标签。因此，对于任何给定的标签，我想知道与该标签一起使用了哪些标签。

例如，如果我有一个包含标签的文档，`[fruit, apple, plant]`那么当我查询时，`[apple]`我应该得到`[fruit, plant]`. 如果另一个文档有标签`[apple, banana]`，那么我的查询`[apple]`将给我`[fruit, plant, banana]`。

这是我的地图函数，它发出所有标签及其邻居：

```
function(doc) {
  if(doc.tags) {
    doc.tags.forEach(function(tag1) {
      doc.tags.forEach(function(tag2) {
        emit(tag1, tag2);
      });
    });
  }
} 
```

所以在我上面的例子中，它会发出

```
apple -- fruit
apple -- plant
apple -- banana
fruit -- apple
fruit -- plant
... 
```

我的问题是：我的 reduce 函数应该是什么？reduce 函数本质上应该过滤掉重复项并将它们组合在一起。

我尝试了许多不同的尝试，但我的数据库服务器（CouchDB）一直给我一个**错误：reduce_overflow_error。减产必须收缩得更快**。

* * *

**编辑：我发现了一些似乎有效的东西，但我不知道为什么。**我看到reduce函数调用有一个可选的“rereduce”参数。如果我忽略这些特殊情况，它就会停止抛出 reduce_overflow_errors。谁能解释为什么？而且，我应该忽略这些，还是以后会咬我的屁股？

```
function(keys, values, rereduce) {
  if(rereduce) return null; // Throws error without this.

  var a = [];
  values.forEach(function(tag) {
    if(a.indexOf(tag) < 0) a.push(tag);
  });
  return a;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:27:35.973

您的回答很好，正如我在评论中所说，如果它对您有用，那就是您应该关心的全部。这是一个替代实现，以防您遇到性能问题。

CouchDB 喜欢高列表，而不是胖列表。此解决方案不是将视图行与以前见过的每个标记保持一个数组，而是将“兄弟”标记保留在视图行的**键**中，然后[将它们组合在一起](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Grouping)以保证每行有一个唯一的兄弟标记。每行只有两个标签，但可能有数千或数百万行：CouchDB 更喜欢的高列表。

主要思想是发出一个 2-array 的标签对。假设我们有一个文档，标记为`fruit, apple, plant`。

```
// Pseudo-code visualization of view rows (before reduce)
// Key         , Value
[apple, fruit ], 1
[apple, plant ], 1 // Basically this is every combination of 2 tags in the set.
[fruit, apple ], 1
[fruit, plant ], 1
[plant, apple ], 1
[plant, fruit ], 1 
```

接下来我标记一些东西`apple, banana`。

```
// Pseudo-code visualization of view rows (before reduce)
// Key         , Value
[apple, banana], 1 // This is from my new doc
[apple, fruit ], 1
[apple, plant ], 1 // This is also from my new doc
[banana, apple], 1
[fruit, apple ], 1
[fruit, plant ], 1
[plant, apple ], 1
[plant, fruit ], 1 
```

为什么总是值`1`？因为我可以制作一个非常简单的内置 reduce 函数：`_sum`告诉我所有标签对的计数。接下来，使用`?group_level=2`和 CouchDB 进行查询将为您提供唯一的对，并计算它们的总数。

生成这种视图的 map 函数可能如下所示：

```
function(doc) {
  // Emit "sibling" tags, keyed on tag pairs.
  var tags = doc.tags || []
  tags.forEach(function(tag1) {
    tags.forEach(function(tag2) {
      if(tag1 != tag2)
        emit([tag1, tag2], 1)
    })
  })
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:59:26.640

我找到了一个我更满意的正确解决方案。诀窍是必须将 CouchDB 设置为，`reduce_limit = false`以便它停止根据您的查询检查其启发式。

您可以通过 Futon 在**query_server_config**设置下的[http://localhost:5984/_utils/config.html](http://localhost:5984/_utils/config.html)上进行设置，方法是双击该值。

 **完成后，这是我的新 map 函数，它与 reduce 函数的“re-reducing”部分配合得更好：

```
function(doc) {
  if(doc.tags) {
    doc.tags.forEach(function(tag1) {
      doc.tags.forEach(function(tag2) {
        emit(tag1, [tag2]); // Array with single value
      });
    });
  }
} 
```

这是reduce函数：

```
function(keys, values) {
  var a = [];
  values.forEach(function(tags) {
    tags.forEach(function(tag) {
      if(a.indexOf(tag) < 0) a.push(tag);
    });
  });
  return a;
} 
```

希望这对某人有帮助！**

# java - Android：当前位置图钉大小根据准确性

> ID：10410034
> 
> 赞同：0
> 
> 时间：2012-05-02T08:16:55.040
> 
> 标签：java, android, google-maps, pushpin, currentlocation

我有这种方法可以在地图上设置当前位置图钉：

```
private void createPushPinOnMap(Canvas canvas, MapView mapView, BOMPushpin pushpin) {
    Location location = currentBestLocation;
    float accuracy = location.getAccuracy();

    Point pointPts = mapView.getProjection().toPixels(new GeoPoint(pushpin.getLatitude(), 
            pushpin.getLongtitude()), 
            null);
    Bitmap bmp1 = BitmapFactory.decodeResource(
            context.getResources(), R.drawable.pushpin);            
    canvas.drawBitmap(bmp1, pointPts.x-10, pointPts.y-34, null);

} 
```

但是我需要更改此代码，因此图钉大小在某种程度上等于准确性（例如在 maps.google.com 位置图钉中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:13:35.630

为什么没有人告诉我 androids google api 有一个名为 MyLocation 的类，它可以生成一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:37:52.660

这是我在 GTL 应用程序中使用的示例代码，有一点不同，我使用圆形而不是图钉。如果精度发生变化，您需要在 lastAccuracy 中进行设置。GPSSettings.IS_SHOW_ACCURACY_MARKER 默认为真。

这是代码

```
public class AccuracyOverlay extends Overlay {
    private GeoPoint geoPoint;
    private boolean isNeedClearCanvas = false;
    private float lastAccuracy;

    public void clearCanvas(Canvas canvas) {
        canvas.drawColor(Color.WHITE);
    }

    private void drawAccuracyCircle(Canvas canvas, MapView mapView, GeoPoint geoPoint) {
          // convert point to pixels
        Point screenPoint = new Point();
        mapView.getProjection().toPixels(geoPoint, screenPoint);

        Paint circlePaint = new Paint();
        circlePaint.setAntiAlias(true);
        circlePaint.setStrokeWidth(2.0f);
        circlePaint.setColor(0xff6666ff);
        circlePaint.setStyle(Paint.Style.FILL_AND_STROKE);
        circlePaint.setAlpha(64);

        double lat = geoPoint.getLatitudeE6();
        int radius = (int) mapView.getProjection().metersToEquatorPixels(lastAccuracy);
        canvas.drawCircle(screenPoint.x, screenPoint.y, radius, circlePaint);

    }

    public int metersToRadius(double latitude) {
        return (int) (mapView.getProjection().metersToEquatorPixels(lastAccuracy) * (1/ Math.cos(Math.toRadians(latitude))));
    }       

    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        if (GPSSettings.IS_SHOW_ACCURACY_MARKER) {
            if (!shadow && getLastLocation() != null) {
                geoPoint = getLastLocation();
            }

            if (geoPoint != null) {
                if (GPSSettings.IS_SHOW_ACCURACY_MARKER && (lastAccuracy > 0)) {
                    drawAccuracyCircle(canvas, mapView, geoPoint);
                }
            }
            if (isNeedClearCanvas) {
                boolean wasOn = GPSSettings.IS_SHOW_ACCURACY_MARKER;
                try {
                    try {
                        if (wasOn)
                            GPSSettings.IS_SHOW_ACCURACY_MARKER = false;
                        geoPoint = null;
                        canvas.drawColor(Color.WHITE);
                    }
                    finally {
                        if (wasOn) {
                            GPSSettings.IS_SHOW_ACCURACY_MARKER = true;
                        }   
                    }
                }
                finally {
                    isNeedClearCanvas = false;
                }
            }
        }
    }

    public AccuracyOverlay() {
        super();
    }

    public void clearMarks() {
        this.isNeedClearCanvas = true;
    }

    public void setLastAccuracy(float lastAccuracy) {
        this.lastAccuracy = lastAccuracy;
    }
} 
```

# asp.net - ado.net 查询在将字符串文件名添加到数据库时删除文件扩展

> ID：10410047
> 
> 赞同：0
> 
> 时间：2012-05-02T08:18:14.010
> 
> 标签：asp.net, .net, sql-server, ado.net, dataset

我使用下面的代码来保存上传的图片和 makigna 缩略图，但它保存了一个没有数据库扩展名的文件名，因此，我得到了断开的链接。如何停止强类型数据集和数据适配器以停止删除文件扩展名？我的 nvarchar 字段有 nvarchar(max) 所以问题不是字符串长度。

我意识到我的问题是数据集列中的 maxsize，而不是 sql 语句参数，所以我修复了它。您可以投票结束这个问题。

```
hasTableAdapters.has_actorTableAdapter adp1 = new hasTableAdapters.has_actorTableAdapter(); 
            if (Convert.ToInt16(adp1.UsernameExists(username.Text)) == 0)
            {
                adp1.Register(username.Text, password.Text, 
                    ishairdresser.Checked, city.Text, address.Text);

                string originalfilename = Server.MapPath(" ") + "\\pictures\\" + actorimage.PostedFile.FileName;
                string originalrelative = "\\pictures\\" + actorimage.FileName;
                actorimage.SaveAs(originalfilename);
                string thumbfilename = Server.MapPath(" ") + "\\pictures\\t_" + actorimage.PostedFile.FileName;
                string thumbrelative = "\\pictures\\t_" + actorimage.FileName;
                Bitmap original = new Bitmap(originalfilename);
                Bitmap thumb=(Bitmap)original.GetThumbnailImage(100, 100, 
                    new System.Drawing.Image.GetThumbnailImageAbort(ThumbnailCallback),
                    IntPtr.Zero);
                thumb=(Bitmap)original.Clone(
                    new Rectangle(new Point(original.Width/2,original.Height/2), new Size(100,100)),
                    System.Drawing.Imaging.PixelFormat.DontCare);
                /*
                  bmpImage.Clone(cropArea,bmpImage.PixelFormat);
                 */
                thumb.Save(thumbfilename);
                adp1.UpdatePicture(originalrelative, thumbrelative, username.Text);
                LoginActor();
                Response.Redirect("Default.aspx");
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:03:54.327

看起来问题是您正在使用[HttpPostedFile.FileName](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.filename.aspx)属性，该属性在客户端返回完全限定的文件名。因此，此代码`string originalfilename = Server.MapPath(" ") + "\\pictures\\" + actorimage.PostedFile.FileName;`生成如下内容：

> c:\inetpub\pictures\c:\Users\用户名\图片\image1.jpg

在任何地方使用[FileUpload.FileName](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.filename%28v=vs.90%29.aspx)属性，你可能会得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:11:38.907

使用它来获取图像或文件扩展名：

```
string Extension = System.IO.Path.GetExtension(FileUpload.FileName); 
```

# javascript - 这个小滚动条有什么问题？

> ID：10410050
> 
> 赞同：-1
> 
> 时间：2012-05-02T08:18:25.750
> 
> 标签：javascript, jquery, tinyscrollbar

[http://jsfiddle.net/J74VS/4/](http://jsfiddle.net/J74VS/4/)

我无法让它正常工作，我只是想创建一个[tinyscrollbar](http://baijs.nl/tinyscrollbar/)的基本小提琴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:26:43.217

问题是缺少 css。我错误地认为你只需要`$("#scrollbar1").tinyscrollbar()`激活它。

[工作小提琴](http://jsfiddle.net/J74VS/5/)。

# android - 在 HTML5 type="tel" 字段中按 Enter 在 Android 默认浏览器上不起作用

> ID：10410054
> 
> 赞同：0
> 
> 时间：2012-05-02T08:18:34.293
> 
> 标签：android, forms, html, tel

出于某种原因，当在默认的 Android 浏览器上从 tel 输入字段中按 enter 时，这将不会提交表单。

是否有任何已知的解决方法可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:34:44.453

可以将输入类型从 tel 更改为普通文本输入框，然后使用模式属性（[http://www.w3schools.com/html5/att_input_pattern.asp](http://www.w3schools.com/html5/att_input_pattern.asp)）限制可以输入的信息。

这可能足以作为一种解决方法，但您确实丢失了漂亮的数字输入键盘。

# android - Android 1.5 api 给出错误的输出

> ID：10410060
> 
> 赞同：0
> 
> 时间：2012-05-02T08:18:54.610
> 
> 标签：android

我正在使用 android 1.5 api，我知道它已被弃用，但它的客户端要求。我正在使用以下代码读取联系人地址，但每次它给地址计数为零。我无法找出问题所在

```
private void getAddress(String _Id)
{
    Cursor curAddress=null;
    try
    {
        String addrWhere = Contacts.ContactMethods.PERSON_ID + " = ? AND " + Contacts.ContactMethods.KIND + " = ?"; 
        String[] addrWhereParams = new String[]{_Id, Contacts.ContactMethods.CONTENT_POSTAL_ITEM_TYPE};
        curAddress = _resolver.query(Contacts.ContactMethods.CONTENT_URI, null, addrWhere, addrWhereParams, null);
        int i=0;
        int aCount = curAddress.getCount();
        String[] aType = new String[aCount];
        String[] aAddrss = new String[aCount];
        while(curAddress.moveToNext()) 
        {
            aType[i] = curAddress.getString(curAddress.getColumnIndex(Contacts.ContactMethodsColumns.TYPE));
            aAddrss[i] = curAddress.getString(curAddress.getColumnIndex(Contacts.ContactMethodsColumns.DATA));
            i++;
        }
    }
    catch (Exception e)
    {
        Log.e(StaticVariables.TAG, "getAddress: " + e.getMessage());
    }
    finally
    {
        if(curAddress!=null) curAddress.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:27:56.297

使用下面的代码，我希望它能工作。

```
curAddress = getContext().getContentResolver().query(Contacts.ContactMethods.CONTENT_URI, null, addrWhere, addrWhereParams, null); 
```

# ruby-on-rails - 使用 DataMapper 从不同的模式/用户访问表

> ID：10410061
> 
> 赞同：2
> 
> 时间：2012-05-02T08:18:59.993
> 
> 标签：ruby-on-rails, oracle, schema, jruby, datamapper

目前，我正在使用 DataMapper 让 JRuby on Rails 应用程序访问 Oracle 数据库。我想知道是否有一个配置/例程来访问来自不同用户/模式的表，例如：

```
SELECT * FROM "SCHEMAXY"."TABLEXY"; 
```

我已经通过指定模式和表名来实现一个 hack 来完成这项工作，但我怀疑这是一个很好的解决方案。

```
class Tablexy
  include DataMapper::Resource
  storage_names[:default] = "SCHEMAXY.TABLEXY"
end 
```

**黑客**（ish）

```
# Replace a dot in the name by a quoted one
# so "NAMESPACE.TABLE" gets "NAMESPACE"."TABLE"
module DataMapper
  module Adapters
    class OracleAdapter
      def quote_name(name)
          super.gsub('.', '"."')
      end
    end
  end
end 
```

我希望在 DataMapper 中有一个集成的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:54:00.770

如果您可以执行 SQL`ALTER SESSION`命令，则以下内容将起作用并允许您在以下位置使用不合格的表名`SCHEMAY`：

```
ALTER SESSION SET CURRENT_SCHEMA=SCHEMAXY; 
```

如果这不可能，您可以创建一个`SYNONYM`：

```
CREATE SYNONYM TABLEY FOR SCHEMAY.TABLEY; 
```

# facebook - 如何获取 Facebook Graph API (PHP SDK) 的 DELETE 权限？

> ID：10410062
> 
> 赞同：0
> 
> 时间：2012-05-02T08:19:03.787
> 
> 标签：facebook, facebook-graph-api, permissions

很简单，假设我正在通过 PHP 脚本在随机 Facebook 页面上发布墙帖或事件，并且我想删除该项目。我只是用这个：

```
$facebook->api('/'.FacebookId,'DELETE'); 
```

当然，FacebookId 的结构如下： userid_postid

但这不起作用。要了解原因，我只需访问此 URL：

[https://graph.facebook.com/](https://graph.facebook.com/) " + postID + "?method=delete&access_token=" + AccessToken;

这是结果：

```
{
   "error": {
      "message": "(#200) Permissions error",
      "type": "OAuthException",
      "code": 200
   }
} 
```

通过潜伏在 stackoverflow 周围，我发现了这个错误：[http](http://bugs.developers.facebook.net/show_bug.cgi?id=12777) ://bugs.developers.facebook.net/show_bug.cgi?id=12777 它仍然没有解决。

因此，如果有人知道如何获得此许可，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T08:25:43.887

根据[文档](http://developers.facebook.com/docs/reference/api/post/)：

> **只要您的应用程序创建了帖子，**您就可以删除帖子。您可以通过向具有 publish_stream 权限的 POST_ID 对象发出 HTTP DELETE 请求来删除帖子。

是这样吗？您的应用创建了帖子吗？它有“publish_stream”权限吗？

我刚刚使用图形资源管理器尝试过，我通过向*me/feed*创建了一个帖子，返回一个 id (USERID_POSTID)，然后向该 id 发出 DELETE 请求，它运行良好（返回的响应是“true” ）。

# facebook-apps - 绕过“请小心”插页式页面

> ID：10410064
> 
> 赞同：2
> 
> 时间：2012-05-02T08:19:09.687
> 
> 标签：facebook-apps, facebook-page, facebook-canvas, interstitial

当我们创建一个指向 FB 页面的新 FB 广告，该页面又设置为重定向到 FB 页面管理的外部网站时，FB 会在重定向之前显示一个插页式网页，其中显示“请小心”警告消息。您可以在此处查看此插页式网页：

[http://www.facebook.com/l.php?u=htt](http://www.facebook.com/l.php?u=htt) ...

这种插页式广告肯定会失去我们支付的一些流量。

我们想知道我们是否可以直接转到包含相同内容（视频以及 FB 评论流）的 FB 应用程序或画布页面，而无需获得插页式的“请注意”FB 网页？

有没有人对这个“请小心”插页式网页有经验并知道它什么时候会被触发？

# timer - 如何在 Metro Style App 中实现计时器

> ID：10410072
> 
> 赞同：4
> 
> 时间：2012-05-02T08:19:44.607
> 
> 标签：timer, windows-runtime

我正在开发一个游戏，我必须实现计时器来显示已经过去的时间。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T11:56:20.130

您是否尝试`DispatcherTimer`在命名空间中使用`Windows.UI.Xaml`？

如果此计时器不符合您的需求，请描述原因和您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:33:53.740

异步/等待方式：

```
private bool isTimerRunning;

private async void StartTimer()
{
    this.isTimerRunning = true;

    while (this.isTimerRunning)
    {
        OnOneSecondPassed();
        await Task.Delay(1000);
    }
}

private void StopTimer()
{
    this.isTimerRunning = false;
}

protected virtual void OnOneSecondPassed()
{
} 
```

# jquery - 如何查找具有特定属性及其值的标签

> ID：10410074
> 
> 赞同：6
> 
> 时间：2012-05-02T08:20:01.190
> 
> 标签：jquery

我有这样的页面布局

```
<input id="name" class="mandotary" type="text">
<label for="name">Name must be entered</label>

<input id="code" class="mandotary" type="text">
<label for="code">Code must be entered</label> 
```

现在我想在第一次加载页面时隐藏标签元素。如果它失去了焦点并且值为空，则应显示标签，否则应隐藏标签。我试过这个

```
var inputElementArray = $("input.mandotary");
$.each(inputElementArray, function(index, element){

    var id = $(element).attr("id");
    var label = $("label").attr("for", id);
   // label.hide();

    $(element).focus(function(){
        var next = $(element).next();
        $(element).next().hide();
    }); //end of focus()

    $(element).blur(function(){

        // get value of text area
        var text = $(element).val();
        if (text == "") {
            var next = $(element).next();
            $(element).next().show();
        } //end of if

    }); //end of blur()

}); //end of $(document).ready(fn) 
```

但是线

```
var label = $("label").attr("for", id); 
```

把两个标签都给我。我只想要那个 for 属性值为 id（名称或代码）的标签。**我在var id**中获得名称或代码作为id 。但它找到了两个问题。如何找到其 for 属性值等于我的输入元素 ID 的标签？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T08:21:50.003

```
var label = $('label[for="' + id + '"]');
// But it can be done simply with:
var label = $(element).next('label').attr("for", id); 
```

**注意事项和最佳附件：**

您的代码无缘无故地过度使用 jQuery：

```
var id = $(element).attr("id");
// Can be simply:
var id = element.id; 
```

您可以通过这种方式使用 jQuery 函数`each`：

```
var inputElementArray = $("input.mandotary");
$.each(inputElementArray, function(index, element){ 
```

用于直接元素：

```
$("input.mandotary").each(function(index, element){
    //...
}): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T16:01:02.743

您应该在标签之后搜索输入或选择并找到它，如下所示： $('#id of input or select').prev('label'); 例子：

```
<label for="my_input">Text of label</label>
<input type="text" name="" id="my_input" value="" />
<script type="text/javascript">
    var labelText = $('#my_input').prev('label').html();
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T08:36:36.880

您的代码的问题只是标签的选择器。您可以通过将 jQuery 元素“缓存”到封闭的变量中来进一步改进您的代码，而不是在每次调用函数时都运行选择器。

```
var inputElementArray = $("input.mandotary");
$.each(inputElementArray, function(index, element){

    // the local variables 'label' and 'input' are an enclosed
    // references to the corresponding  INPUT and LABEL jQuery objects

    var input = $(element);
    var label = $("label[for=" + input.attr("id") + "]");

    label.hide();

    input.focus(function() {
        label.hide();
    }); //end of focus()

    input.blur(function(){
        if(!input.val()) { label.show(); }
    }); //end of blur()

}); //end of $(document).ready(fn) 
```

# list - Prolog 中的谓词列表

> ID：10410082
> 
> 赞同：3
> 
> 时间：2012-05-02T08:20:47.963
> 
> 标签：list, prolog

是否可以定义一个由谓词组成的列表以及如何调用谓词。

此外，是否可以将一个谓词传递给另一个谓词（如传递原子）？

例子：

```
pre1:- something.
pre2(Predicate1, List):-
    call(Predicate1),
    append([Predicate1], List, R),
    ..... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:54:09.413

您不能将*谓词*存储在列表中，但可以存储*术语*（或函子）并将术语称为*目标*。

这是一个谓词，用于测试一个术语是否具有函子列表所描述的属性：

```
has_properties([], _).
has_properties([P|Ps], X) :-
    Goal =.. [P, X],            % construct goal P(X)
    call(Goal),
    has_properties(Ps, X). 
```

用法：

```
% is 4 a number, an integer and a foo?
?- has_properties([number, integer, foo], 4). 
```

当然，这个查询的答案取决于您对 的定义`foo/1`。如果需要，请参阅我的[解释。`=..`](https://stackoverflow.com/a/4131628/166749)

**编辑**：正如@false 在评论中报告的那样，没有必要使用`=..`，因为`Goal =.. [P, X], call(Goal)`可以替换为`call(P, X)`将具有相同的效果。不过，它可能仍然值得学习`=..`，因为您可能会在其他人的代码中遇到它。

# html - 没有结束标签的 HTML 标签元素是否有效？

> ID：10410083
> 
> 赞同：1
> 
> 时间：2012-05-02T08:20:50.330
> 
> 标签：html

这是有效的 `<label id="UserLNameLabel" />` 吗？

对比这个

```
<label id="UserLNameLabel"></label> 
```

将第一个版本从 DOM 中提取出来似乎存在一些问题，但在设计器和浏览器中看起来都是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T08:24:05.993

[https://www.w3.org/TR/html/sec-forms.html#the-label-element](https://www.w3.org/TR/html/sec-forms.html#the-label-element)

> 标签省略 标签元素必须同时具有开始标签和结束标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:23:05.617

在 XHTML 中它是有效的（任何没有内容的元素都可以使用自闭合标签语法）但不是[HTML-Compatible](http://www.w3.org/TR/xhtml-media-types/#compatGuidelines)。

在 HTML 中它是无效的。从[HTML 4](http://www.w3.org/TR/html4/interact/forms.html#h-17.9.1)：

```
<!ELEMENT LABEL - - (%inline;)* -(LABEL) -- form field label text --> 
```

注意`-`以上两点。第一个表示需要开始标签，第二个表示需要结束标签。

在任何一种情况下，它都是没有意义的，因为它没有文本内容并且不与表单控件关联（因为它不包含表单控件并且没有 id 属性）。

# expression-blend - CollectionViewSource、设计时数据、Blend 和 Windows 8

> ID：10410085
> 
> 赞同：7
> 
> 时间：2012-05-02T08:20:53.710
> 
> 标签：expression-blend, windows-8, collectionviewsource

我在混合中显示设计时数据时遇到问题这是我的代码这是我的集合视图源：

```
 <CollectionViewSource
        x:Name="DataSource"
        Source="{Binding Groups}"
        IsSourceGrouped="true"
        ItemsPath="Items"
        d:Source="{Binding ItemGroups, Source={d:DesignInstance Type=data:SampleData, IsDesignTimeCreatable=True}}"/> 
```

以及使用它的网格视图：

```
<GridView
                x:Name="itemGridView"                   
                ItemsSource="{Binding Source={StaticResource DataSource}}" 
```

我的问题是我只在 VS11 中看到设计时数据，但在 Blend 中没有。这是为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:05:30.803

答案取决于您如何实例化设计时数据。看来您可能一直在使用 ViewModel？如果是这样，请检查您在什么时候创建它。例如，您是在 XAML 中将其创建为元素，还是在视图的构造函数中创建它？

实际上，您在 Visual Studio 中设计时看到的内容与在 Expression Blend 中设计时看到的内容应该没有区别。如果有，您可能需要在其中一个程序中对项目进行清理和重建。如果问题仍然存在，请尝试关闭 Blend 并重新打开它。

# android - 播放动画时禁用屏幕上的触摸事件

> ID：10410087
> 
> 赞同：1
> 
> 时间：2012-05-02T08:21:21.190
> 
> 标签：android, events, animation, view, touch

嘿，我有很多子视图，可以制作一些动画。

问题是当播放动画时，视图仍然会对触摸事件做出反应，这是我不想要的。

我想过在所有视图的顶部设置透明视图，在播放动画时可以看到

还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T17:30:58.080

您可以在视图上添加一个透明布局（在 xml 宽度和高度填充父级中声明它）并在动画开始时使可点击为真，在动画结束时使可点击为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:29:29.413

您可以使用“OnAnimationStart”/“OnAnimationEnd”并在那里定义触摸行为。

# php - 数据库中的未知列问题

> ID：10410088
> 
> 赞同：0
> 
> 时间：2012-05-02T08:21:23.607
> 
> 标签：php, mysql

请帮我解决我遇到的这个问题。我在 'where 子句' 中得到 'Unknown column 'the_mother_church_id' 。我已经检查了几次数据库中列名的名称，我确定名称是相同的。

请问问题可能出在哪里。

谢谢

```
<?php
   $past = mysql_query("SELECT * FROM the_mother_church WHERE the_mother_church_id = '1'") or die(mysql_error()); 
?> 
```

**创建表**

```
CREATE TABLE IF NOT EXISTS `the_mother_church` (
  ` the_mother_church_id` int(255) NOT NULL,
  `the_mother_church_head` varchar(255) NOT NULL,
  ` the_mother_church_content` varchar(3000) NOT NULL,
  ` the_mother_church_tags` varchar(255) NOT NULL,
  ` the_mother_church_created` datetime NOT NULL,
  ` the_mother_church_image` blob NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:35:11.993

（*升级到答案*）

您的`CREATE TABLE`语句显示该列的名称在开头引号和字段名称之间有一个空格：`` the_mother_church_id``。任何一个：

1.  在查询中使用带有空格的列名：

    ```
    SELECT * FROM the_mother_church WHERE ` the_mother_church_id` = '1' 
    ```

2.  重命名列：

    ```
    ALTER TABLE `the_mother_church`
      CHANGE ` the_mother_church_id`
              `the_mother_church_id`      int(255)      NOT NULL,
      CHANGE ` the_mother_church_content`
              `the_mother_church_content` varchar(3000) NOT NULL,
      CHANGE ` the_mother_church_tags`
              `the_mother_church_tags`    varchar(255)  NOT NULL,
      CHANGE ` the_mother_church_created`
              `the_mother_church_created` datetime      NOT NULL,
      CHANGE ` the_mother_church_image`
              `the_mother_church_image`   blob          NOT NULL; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:25:20.967

再次检查该字段的名称。我还建议您将字段名称包含在反引号中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:35:04.890

表结构中的字段名称前面有一个空格。
我建议重新创建一个表，从字段名称中删除空格。

```
` the_mother_church_id`
 ^ an excessive space 
```

# python - 如何使用 Fabric 和 Python 与远程主机上的安装程序交互

> ID：10410091
> 
> 赞同：4
> 
> 时间：2012-05-02T08:21:34.273
> 
> 标签：python, installation, interactive, fabric

我使用结构在远程主机上运行安装程序

def test(): run("sh /opt/foo.bin") 输出如下：

[user@remoteHost:22] 出：按继续：

…………

在安装过程中，我需要按几次 Enter 并输入一些信息。是否有可能使用 Fabric 自动执行此操作（按下并输入文本信息）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:15:18.923

不，您正在寻找更多[pxepect](http://www.noah.org/wiki/pexpect)，但您可以使用此模块及其在结构任务中的功能。只是 Fabric 不保持状态，也没有以脚本方式与提示交互的功能。在这些情况下，它希望用户进行交互。

# web-crawler - 为什么使用 YQL 提取数据结果不完整？

> ID：10410092
> 
> 赞同：0
> 
> 时间：2012-05-02T08:21:35.657
> 
> 标签：web-crawler, extract, yahoo, yql, yahoo-api

我使用 YQL 从 answers.yahoo.com 中提取数据，方法是使用子句：“select * from answers.getbycategory where category_id=396545299”。您可以在[http://developer.yahoo.com/yql/console/](http://developer.yahoo.com/yql/console/)尝试一下。

[这里的 396545299 表示 catagory_id 是“书籍和作者”，您可以在http://answers.yahoo.com/dir/index;_ylt=Aptj80jBf2NtgwbZw_f_g5Kf5HNG;_ylv=3?sid=396545299&link=open#yan-questions](http://answers.yahoo.com/dir/index;_ylt=Aptj80jBf2NtgwbZw_f_g5Kf5HNG;_ylv=3?sid=396545299&link=open#yan-questions)中查看原始数据

我发现使用 YQL 的数据不完整，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:06:44.460

现在尝试这个似乎可以正常工作。这可能是一个临时错误，或者是 YQL 和 Yahoo Answers 之间的某种速率限制或阻塞。通常您可以查看`diagnostics`返回数据以获取更多线索。

例如这个查询：

[`select * from answers.getbycategory where category_id=396545299`](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20answers.getbycategory%20where%20category_id%3D396545299&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys)

结果返回此数据：

```
cbfunc({
 "query": {
  "count": 10,
  "created": "2012-06-20T01:02:27Z",
  "lang": "en-US",
  "diagnostics": {
   "publiclyCallable": "true",
   "url": {
    "execution-start-time": "22",
    "execution-stop-time": "779",
    "execution-time": "757",
    "proxy": "DEFAULT",
    "content": "http://answers.yahooapis.com/AnswersService/V1/getByCategory?category_id=396545299&start=0&results=10"
   },
   "user-time": "780",
   "service-time": "757",
   "build-version": "28117"
  },
  "results": {
   "Question": [
    {
     "id": "20120619180104AAhkAbT",
     "type": "Open",
     "Subject": "Cool names for Mage In novel?",
     "Content": "Ok, I'm writing a book about a boy that secretly does magic, but can't tell anyone because everybody disapproves, it's considered a sin to do magic to the people in the kingdom, and the king actually beheads people who do it. But I can't think of a good name for the Mage.\n",
     "Date": "2012-06-19 18:01:04",
     "Timestamp": "1340154064",
     "Link": "http://answers.yahoo.com/question/?qid=20120619180104AAhkAbT",
     "Category": {
      "id": "396545299",
      "content": "Books & Authors"
     },
     "UserId": "zpgtqzI6aa",
     "UserNick": null,
     "UserPhotoURL": null,
     "NumAnswers": "0",
     "NumComments": "0",
     "ChosenAnswer": null,
     "ChosenAnswererId": null,
     "ChosenAnswererNick": null,
     "ChosenAnswerTimestamp": null,
     "ChosenAnswerAwardTimestamp": null
    },
   ...etc... 
```

# eclipse-plugin - 如何为 TreeItem SWT 提供黑色边框？

> ID：10410093
> 
> 赞同：0
> 
> 时间：2012-05-02T08:21:35.520
> 
> 标签：eclipse-plugin, swt, eclipse-rcp, jface, draw2d

我使用 TreeColumn 创建了超过 1 列的树。现在我想要实现的是为 Tree 中的单元格项目创建边框单元格。这是我现在的实现： ![在此处输入图像描述](../Images/09bedef7588adccb6bea7ee1737667ce.png)

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:18:10.357

你的意思是tree.setLinesVisible(true); ?

# c# - 如何使用 C# 创建 Access 数据库并不断向其中保存实时数据

> ID：10410095
> 
> 赞同：5
> 
> 时间：2012-05-02T08:21:44.287
> 
> 标签：c#, ms-access

**我目前正在制作一个 24/7 运行并不断从 OPC 服务器收集信息的应用程序。**

我现在需要做的是将此信息发送到数据库（*.accdb-file*）。这需要非常非常迅速地发生。我每毫秒从服务器获取一个新值，我需要以相同的速度将该值发送到数据库。最后，我在每天 00:00 将数据库压缩为 .zip 文件。

我一直像疯子一样在网上搜索，但似乎找不到“最新”教程。到目前为止，我发现的每一个都使用“ *Microsoft.Jet.OLEDB.4.0* ”作为提供程序，但它在我的 Windows 7 PC 上不存在。

我已经制作了一个小应用程序来测试连接，我将在下面附上我当前的代码，以提示您到目前为止我已经尝试过什么，但这似乎都不起作用。

```
private void button1_Click(object sender, EventArgs e)
{
    System.Reflection.Assembly oAssembly = System.Reflection.Assembly.GetExecutingAssembly();
    System.IO.Stream oStream = oAssembly.GetManifestResourceStream("RSLogixDB.accdb");
    System.IO.FileStream fileStream = new System.IO.FileStream("C:\\Users\\sezettersth\\Documents\\RSLogixDB.accdb", System.IO.FileMode.Create);

    byte[] abyt = new byte[oStream.Length];
    oStream.Read(abyt, 0, (int)oStream.Length);
    fileStream.Write(abyt, 0, (int)oStream.Length);
    fileStream.Close();
    if (fileStream != null)
    {
        fileStream.Close();
        fileStream = null;
    }
    if (oStream != null)
    {
        oStream = null;
    }
} 
```

这是我尝试的第一种方法，这里我使用了一个用于创建和写入文件的自制类。不幸的是，它不适用于 .accdb 文件。（第一行的评论包括我尝试过的提供者。

```
private void button1_Click(object sender, EventArgs e)
{
    //sFileDia.ShowDialog();
    //Provider=Microsoft.ACE.OLEDB.12.0
    //Povider=.NET Framework Data Provider for OLE DB
    //Povider=Microsoft.Jet.OLEDB.4.0
    //Driver={Microsoft Access Driver (*.mdb, *.accdb)};
    //Data Source=C:\\Users\\sezettersth\\Documents\\RSLogixDB.accdb;
    //Persist Security Info=False;
    //Provider=Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\sezettersth\\Documents\\RSLogixDB.accdb;Persist Security Info=False
    string RSLogixDB = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\sezettersth\\Documents\\RSLogixDB.accdb;Persist Security Info=False";
    string RSLogixDBPath = "C:\\Users\\sezettersth\\Documents\\RSLogixDB.accdb";
    OleDbConnection connection = new OleDbConnection(RSLogixDB);
    string connectionStr = connection.ConnectionString;

    //OleDbDataReader dataReader = new OleDbDataReader(RSLogixDB);
    ImportExport textwriter = new ImportExport();
    textwriter.setExportPath(RSLogixDBPath);
    textwriter.endExport();
} 
```

*必须有一个简单的解决方案，如果没有“ Microsoft.Jet.OLEDB.4.0* ”提供程序，我不能成为唯一使用 Access 的人。

（我还没有开始压缩文件的代码，如果你知道如何做，我很高兴听到它，但这里的主要焦点是数据库问题。）

**更新：问题可能并不像我最初那样出在提供商身上，Microsoft.ACE.OLEDB.12.0 允许我创建一个 .accdb 文件，但它基本上只是一个带有花哨扩展名的空 txt 文件，并且无法打开或与 MS Access 一起使用。如何制作有效的 .accdb 文件？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T10:02:30.807

### 关于你的代码

老实说，我对您在提供的代码示例中试图实现的目标感到茫然。
据我所知，您只是在创建一个文件`RSLogixDB.accdb`。
也许我遗漏了一些东西，但这根本不是您创建数据库的方式。

您是否查看并尝试了这些 SO 问题的答案中的代码：

*   [我如何在 C# 中运行时创建 Access 数据库？](https://stackoverflow.com/questions/1388971)
*   [如何以编程方式在 C# 中创建 Microsoft Access 数据库？](https://stackoverflow.com/questions/4778548)

现在，一些更多的解释。

### 喷气机与王牌

首先，ACCDB 文件格式是对现在称为 ACE 的 Jet 进行全面改造的结果。它仅与 Access 2007/2010 一起使用，并且包含不向后兼容的新功能。

要打开这样的文件，您必须安装 Access 2007/2010（或至少免费的[Access Runtime ）或](http://www.microsoft.com/en-us/download/details.aspx?id=10910)[Microsoft 的特定 ACE 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=13255)。

### 关于 32/64 位

为了您的理智，无论您的操作系统位数如何，都只能使用 Office 和 Access 32 位。甚至[Microsoft 也不建议使用 64 位版本，](http://office.microsoft.com/en-us/products/office-2010-frequently-asked-questions-HA101674631.aspx#About_Office_2010_4)除非您将 Excel 推向极限。

*   您[不能混合使用 Office 32 位和 64 位应用程序](http://msdn.microsoft.com/en-us/library/ee691831.aspx)
*   您不能在同一台机器上安装 32 位和 64 位 ACE 驱动程序
*   使用版本 2007 或 2010 的 ACE 驱动程序，但避免同时安装两者。
*   确保您的 .Net 应用程序已编译为与安装的 Access/ACE 驱动程序相同的位数（因此，如果您遵循上述建议，则应专门编译为 x86，**而不是**AnyCPU！）。

### 表现

如果您遵守一些规则，您可以使用 Access 数据库获得非常不错的性能：

*   如果可能，将数据库与将写入它的应用程序保持在同一台机器上（避免网络速度变慢）

*   如果您的应用程序是唯一使用数据库的应用程序，请以独占模式而不是共享模式打开数据库：

    ```
    // Share Mode=16 - use if multiple users must have simultaneous access to the db
    string constr = @"Provider=Microsoft.ACE.OLEDB.12.0;Mode=16;Data Source=C:\...\RSLogixDB.accdb;user id=;password=;";

    // Share Mode=12 - exclusive mode if only your app needs access to the db
    string constr = @"Provider=Microsoft.ACE.OLEDB.12.0;Mode=12;Data Source=C:\...\RSLogixDB.accdb;user id=;password=;"; 
    ```

*   在您的应用程序启动时打开一个到数据库的虚拟连接并保持打开状态，直到您不需要数据库（例如压缩它或当您的应用程序关闭时）。
    这实际上是一个非常重要的性能改进：打开到 Access 数据库的新连接代价高昂，因为驱动程序需要创建/销毁/更新`.accdl`锁定文件。
    如果您与数据库保持始终打开的连接，您将大大加快对它的读/写。有关此主题的更多信息，请查看本文：
    [OLE DB 连接池在哪里？](http://immitev.blogspot.com/2005/01/where-is-ole-db-connection-pooling_28.html)

### 回到任务

我会做你想要达到的目标的方式：

*   使用 Access 手动创建一个简单的数据库`RSLogixDB.accdb`，其中包含将保存数据的表。
    还要在其中创建一个`dummy`只有很少数据或没有数据的表。我们将使用它来保持连接打开并避免锁定文件性能问题。

*   如果您需要每天从头开始重新创建数据库，则保留该原始数据库的副本作为模板，然后复制该模板并用新的每日数据填充副本。

*   如果您是数据库的唯一用户，请以独占模式打开它。

*   打开一个连接并从虚拟表中读取数据，但不要关闭它。保持开放。

*   全天将数据保存到您的数据表中

*   午夜，关闭数据库（关闭虚拟表），确保锁定文件`.accdl`已消失，然后压缩数据库。
    如果您需要从空数据库开始，请用模板替换数据库。
    在压缩之前，我还会压缩数据库以减小其大小。

*   如果 ADO.Net 数据访问的标准性能不足以满足您的情况，请查看使用本机 DAO 例程。查看此 SO 问题的答案：
    [Writing large number of records (bulk insert) to Access in .NET/C#](https://stackoverflow.com/questions/7070011)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T08:35:46.107

如果您需要连接字符串来连接到特定数据库，那么第一站应该始终是[http://www.connectionstrings.com/](http://www.connectionstrings.com/)

对于 Access，您可能会发现此页面很有帮助： http: [//www.connectionstrings.com/access-2007](http://www.connectionstrings.com/access-2007)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:31:55.470

我为你找到了这个。 [连接到 MS Access (Windows 7)](http://www.microsoft.com/en-us/download/details.aspx?id=23734)

此[论坛主题](http://social.msdn.microsoft.com/Forums/pl-PL/adodotnetdataproviders/thread/3d003721-6fb2-4927-9b29-bb6d7f35fa33)也将为您提供帮助。

谢谢

保罗。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T08:34:50.700

我相信您的连接无法建立，因为 Jet OLEDB 驱动程序没有随 Windows 7 提供，但需要单独安装。一种方法是安装 Microsoft Access，另一种方法是从 Microsoft 查找 MDAC 可再发行程序包（MDAC = Microsoft 数据访问组件）。

您可以按照以下链接上的说明检查您是否拥有 MDAC 版本，如果是的话：

[http://support.microsoft.com/kb/301202/en-us](http://support.microsoft.com/kb/301202/en-us)

# android - Android：按下后退按钮时如何使用 OnCreate()

> ID：10410096
> 
> 赞同：2
> 
> 时间：2012-05-02T08:21:46.837
> 
> 标签：android, back-button, oncreate

当按下我想要的后退按钮时，无论加载什么屏幕，都会执行 onCreate() 方法。我想要这个，因为在浏览应用程序时屏幕必须刷新。

我需要覆盖后退按钮方法吗？

```
if(keyCode == KeyEvent.KEYCODE_BACK)
{

    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-02T08:24:53.123

当您按下后退按钮时，将`onResume()`调用该方法，因此不要使用`onCreate()`，而是使用它并执行您需要做的任何事情来刷新活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:26:14.893

你的方法是错误的。onCreate() 只会在创建 Activity 时调用。但是每次Activity来到前面`onResume`都会调用Method，第一次启动也会调用这个Method。
查看活动生命周期以获取更多信息： http: [//fs01.androidpit.info/wiki/de/b/Beginners_Workshop_Activity_LC.png](http://fs01.androidpit.info/wiki/de/b/Beginners_Workshop_Activity_LC.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:25:13.497

当一个活动来自后台时，它的 onResume() 方法将被调用。您应该在那里更新您的 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:25:54.680

如果您想在后退按钮之后执行任何操作，则必须覆盖它。你可以只刷新活动的一部分，而不是整个活动吗？

# ruby-on-rails-3 - mongoid 查询 - 调用 size 方法会产生错误

> ID：10410097
> 
> 赞同：2
> 
> 时间：2012-05-02T08:21:48.347
> 
> 标签：ruby-on-rails-3, mongodb, mongoid, mongodb-query

当我执行此查询时：

```
User.where(:comments.size => 10) 
```

我收到以下错误：

```
undefined method `size' for :comments:Symbol 
```

但根据这里的文档：

> [http://mongoid.org/docs/querying/criteria.html](http://mongoid.org/docs/querying/criteria.html)

这应该是可能的。那么，为什么会出现错误？

注意：“comments”是与 User 具有“has_and_belongs_to_many”关系的单独集合。

我正在使用 mongoid 3.0.0 和 bson_ext 1.6.1

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:15:43.973

如果用户嵌入评论，这将起作用，但当您*将*用户与评论相关联时，这将起作用。由于 $size 运算符，它适用于嵌入（尽管这不是一个超级高效的查询。最好将大小缓存在单独的字段中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T01:08:16.253

在 Mongoid 3 中使用`with_size`, not `size`。它将转换为 MongoDB`$size`运算符。

> `Queryable#with_size`：添加`$size`选择。匹配数组字段具有所提供值的确切大小的文档。这被命名为`with_size`不与 Ruby 的`Enumerable#size`或冲突`Symbol#size`。”（来自[Origin Selection 文档](http://mongoid.org/en/origin/docs/selection.html)）

# json - Ext Ajax 请求未从 Grails 控制器接收 response.responseText 作为 JSON

> ID：10410099
> 
> 赞同：1
> 
> 时间：2012-05-02T08:21:53.037
> 
> 标签：json, grails, extjs4

我的 grails 应用程序中有一个控制器，它使用 HTTPBuilder 进行安静的调用，如下面的代码所示：

```
import grails.converters.deep.JSON
import groovyx.net.http.HTTPBuilder
import static groovyx.net.http.ContentType.JSON
import static groovyx.net.http.Method.GET

class NotificationController {

    def index() {
        redirect(action: "list", params: params)
    }

    def list()
    {
        println "in List Method of Notification Controller"
        def http1 = new HTTPBuilder("http://localhost:8082")

        // perform a GET request, expecting JSON response data
        http1.request(groovyx.net.http.Method.GET,      groovyx.net.http.ContentType.JSON) 
        {
            uri.path = '/Dummy/CASearchService/dummysearch/meta'

        // response handler for a success response code:
                response.success = {  resp, json ->
                println resp.statusLine
                // parse the JSON response object:
                println("json -- "+json)
                println((json as grails.converters.JSON).class)

                render json as grails.converters.JSON;      
        }
        // handler for any failure status code:
            response.failure = { resp ->
            println "Unexpected error: ${resp.statusLine.statusCode} : ${resp.statusLine.reasonPhrase}"
            }
        }

    }
} 
```

现在，这将返回一个 json 字符串作为响应，因为 println(json) 返回一个 json 字符串：

```
[[_id:[machine:680383044, inc:149754531, time:1334648778000, new:false], _class:com.mongodb.BasicDBObject, form1name:EmpForm, form2name:DeptForm, form3name:HRForm, form4name:AdminForm, form5name:FSIForm], [_id:[machine:680339682, inc:-2056232867, time:1334648869000, new:false], _class:com.mongodb.BasicDBObject, form1name:IHLForm, form2name:CCDForm, form3name:AHDForm, form4name:ServicecnteraForm, form5name:ISForm]] 
```

在通知下的 list.gsp 文件中，我有以下 Ext.Ajax 调用：

```
<html>
<head>
<meta name="layout" content="ext"/>
<title>List of Notifications</title>

<script>

 Ext.Ajax.request({
    url: '${createLink( action: 'list' )}',
    success: function (response){
            //Response json object
            alert("SUCCESS")
            var jsonData = (response.responseText);
            alert(jsonData)
         },
    failure: function (response){
        alert("Failure")
    }
});  
</script>
</head>
<body>
  <div class="body">
  In List gsp of Notification Controller
  </div>
</body>
</html> 
```

1.  在这一步之后，当我加载浏览器并调用 NotificationController 时，我得到了 json 字符串，直接显示在浏览器中。为什么会发生这种情况，为什么调用不去 Ajax.request.success？

    [{"_id":{"machine":680383044,"inc":149754531,"time":1334648778000,"new":false},"_class":"com.mongodb.BasicDBObject","form1name":"EmpForm ","form2name":"DeptForm","form3name":"HRForm","form4name":"AdminForm","form5name":"FSIForm"},{"_id":{"machine":680339682,"inc" :-2056232867,"time":1334648869000,"new":false},"_class":"com.mongodb.BasicDBObject","form1name":"IHLForm","form2name":"CCDForm","form3name":" AHDForm","form4name":"ServicecnteraForm","form5name":"ISForm"}]

2.  如果我将控制器中的响应从 render json 更改为 grails.converters.JSON; to render(view: "list", contentType: "application/json") 我被带到 list.gsp 页面，但是 response.responseText 是完整的 html 文本，而不是 json 字符串。任何线索为什么？

对此的任何帮助，以及理解 grails 控制器、json、ext ajax 将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:50:24.243

我不习惯grails。但是，在阅读您的代码后，有些地方不正确，所以我尝试解释您的 2 个问题：

> .1：使用“将 json 渲染为 grails.converters.JSON”：

当你运行控制器时，你没有指定要渲染/重定向的视图；因此 JSON 字符串被返回并显示在浏览器上（即尚未带到 list.gsp 页面）

> .2：将控制器中的响应从render json更改为grails.converters.JSON；渲染一个新视图：“list”，contentType：“application/json”）

可以直接在视图中访问json结果，所以这里不需要使用Ajax。只是回应它或做任何你想做的事情。

希望这可以帮助。

# javascript - 被覆盖的函数/方法仍然可以访问吗？

> ID：10410101
> 
> 赞同：0
> 
> 时间：2012-05-02T08:21:57.910
> 
> 标签：javascript, overloading

我正在考虑管理客户端上 JavaScript 行为的方法。

假设在我的 HTML 页面的顶部，我有...

```
<script>

var XMLHttpRequest = function () {
   this.send = function() {
     alert(args.toString());
   }

}; 
```

随后是否可以（在同一页面上）访问本机`XMLHttpRequest`对象？

（显然，从安全的角度来看，这不是防止 XSS 的最佳方法——这不是问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:29:47.860

由于`XMLHttpRequest`它是`window`对象的属性，因此您仍然应该能够通过它访问它。

你实际上并没有覆盖它，你只是隐藏了它的本机属性，`window`所以任何时候你试图`XMLHttpRequest`在你的声明范围内调用，你的覆盖版本将首先在范围链中遇到并因此被执行。如果您明确访问`window.XMLHttpRequest`，您将绕过您的覆盖版本并直接访问本机版本：

```
var XMLHttpRequest = function() {
   console.log('example');
}
var request = new XMLHttpRequest(); //Calls the above function
var request2 = new window.XMLHttpRequest(); //Calls the native function 
```

请注意，如果您没有使用`var`关键字声明您的版本，您实际上会覆盖本机函数，在这种情况下，您可以通过删除新属性来取回它（但不能在 Internet Explorer 中）：

```
delete window.XMLHttpRequest; 
```

**编辑**

我刚刚意识到上述内容有点误导。如果省略`var`关键字，则实际上并没有覆盖原始函数，您仍然只是遮盖它。那是因为原始函数是在`window`构造函数的原型上声明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:28:48.013

在 FF12 中，这是一个完全有效的覆盖。之后 XMLHttpRequest 将不再可用。

请记住，其他浏览器使用可能无法以这种方式访问​​的其他方法；我没有测试过这些。

编辑：在 IE9 中也进行了测试，XHR 也不再在那里工作了。

# iphone - 是否有必要在 UIView 动画的完成处理程序中测试 BOOL 完成？

> ID：10410104
> 
> 赞同：15
> 
> 时间：2012-05-02T08:22:06.423
> 
> 标签：iphone, objective-c, uiview

我从来没有考虑`BOOL finished`过 UIView 动画完成处理程序的返回，但是阅读 Apple UIView Programming Guide 中的一些示例代码显示了这一点：

```
completion:^(BOOL finished) {
 if (finished) { 
```

这是必要的吗？除非动画已经完成，否则完成块不应该运行，对吗？测试似乎是多余的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T18:37:20.253

在该代码片段中执行的实际操作非常重要。动画正在从一个视图过渡到另一个视图——第一个视图被替换，然后设置一个布尔值来跟踪当前显示的是哪个视图。布尔值在完成块中设置。

```
[UIView transitionFromView:(displayingPrimary ? primaryView : secondaryView)
    toView:(displayingPrimary ? secondaryView : primaryView)
    duration:1.0
    options:(displayingPrimary ? UIViewAnimationOptionTransitionFlipFromRight :
                UIViewAnimationOptionTransitionFlipFromLeft)
    completion:^(BOOL finished) {
        if (finished) {
            displayingPrimary = !displayingPrimary;
        }
}]; 
```

在这种情况下，如果动画（无论出于何种原因）没有完成，那么视图还没有被交换，你绝对不想翻转 的值`displayingPrimary`，因为这样你的记录就会不准确地位。这就是`finished`在这种情况下检查标志的原因。

请注意，在该指南中的大多数（如果不是全部）其他代码示例中，未检查该标志 - 这是因为它在这些情况下并不重要（例如，在第一个动画之后运行另一个动画，或者更改一些*不'不*依赖于动画的成功完成）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T08:36:07.950

是的，您确实应该在处理程序中尊重该布尔值。用户可能会启动动画，但在该动画正常完成之前，用户会执行其他操作以提前取消它。这个布尔很好地让你知道这种情况。

-- 更新 -- 只是为了详细说明。想象一些在屏幕上移动视图的动画。当视图完成移动时，处理程序可能会触发。假设用户触摸其他地方以产生一个新动画，该动画基本上取消了正在进行的第一个动画。您可以使用提供的 bool 来检测它。

# c# - 如何使用 PayPal API 创建带有项目列表和折扣代码的结帐？

> ID：10410105
> 
> 赞同：0
> 
> 时间：2012-05-02T08:22:07.977
> 
> 标签：c#, asp.net, paypal

我正在使用网络标准付款，我认为它不安全，因为用户可以随时编辑它并添加折扣代码。

我打算改用 PayPal 的 API，但我不知道如何使用它。你们有任何关于如何将它与 ASP.NET C# 一起使用的示例代码，它可以支持多个项目和折扣代码。

我想要完成的只是一个简单的结帐，没有什么花哨的。

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:45:26.347

您应该使用安全的 SSL 连接来防止篡改。您还应该使用 PayPal 的 IPN 来确认发送到 PayPal 的金额与原始价格相符。您可以使用 XDev Software 提供的免费[IPN 类](http://www.xdevsoftware.com/PPIPNDesc.aspx)来协助完成此操作。

我把PayPal与ASP.NET集成的三篇系列文章发了出来，随意使用代码：

[http://www.codersbarn.com/?tag=/paypal](http://www.codersbarn.com/?tag=/paypal)

# performance - 在 Retina iPad 上使用 CoreGraphics 绘制图像很慢

> ID：10410106
> 
> 赞同：10
> 
> 时间：2012-05-02T08:22:14.400
> 
> 标签：performance, ipad, core-graphics, retina-display

在我的 iPad 应用程序中，我渲染到离屏位图，然后将位图绘制到屏幕上。（这是因为我想重用现有的位图渲染代码。）在 iPad 2 上，这很有魅力，但在配备 Retina 显示屏的新 iPad 上，绘制位图真的很慢，尽管它的分辨率仍然是相同的。

为了绘制位图，我们使用常规的 Quartz 2D 函数：使用由32 位 RGBA 格式`CGImageCreate`创建的数据提供程序，使用. 在显示位图的 中，我们使用将其绘制到由返回的上下文中。`CGDataProviderCreateWithData``kCGImageAlphaNoneSkipLast``UIView``drawRect:``CGContextDrawImage``UIGraphicsGetCurrentContext`

请注意，我什至没有尝试以双倍分辨率绘制：现在我可以使用与 iPad 2 上相同的分辨率。看起来 CoreGraphics 在内部将像素加倍，然后将其发送到 GPU ，即使`CGImage`我正在制作的应该可以直接传递给 GPU。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T03:20:22.987

> 看起来 CoreGraphics 在内部将像素加倍，然后将其发送到 GPU，

差不多。更准确地说（至少在精神上）：

1.  UIKit`CGBitmapContext`以设备像素为单位制作视图边界的大小
2.  它使该上下文成为当前上下文
3.  你把你的画`CGImage`入那个语境
4.  ...因此 CG 必须重新缩放源图像，并触摸所有目标像素
5.  完成绘图后，UIKit`CGImage`从位图上下文中生成
6.  并将其分配给视图层的内容。

> 我正在制作的 CGImage 应该可以直接传递给 GPU。

如果您希望这种情况发生，您需要通过删除上述一些步骤来告诉系统这样做。

（UIKit、CoreAnimation 和 CoreGraphics 之间没有提供您期望的“快速路径”的链接。）

最简单的方法是制作一个`UIImageView`, 并将其设置`image`为`UIImage`包装你的`CGImageRef`.

或者，将您的设置`view.layer.contents`为您的`CGImageRef`. （并确保*不要*覆盖`-drawRect:`，*不要*调用，*并*`-setNeedsDisplay`确保`contentMode`不是。更容易使用。） *`UIViewContentModeRedraw``UIImageView`*

# iphone - 未通过 Graph API 接收 Facebook 图片

> ID：10410110
> 
> 赞同：2
> 
> 时间：2012-05-02T08:22:53.160
> 
> 标签：iphone, ios, xcode, facebook-graph-api

我似乎无法使用当前的 iOS 图形方法正确检索用户的个人资料图片。

我的电话：`self.pictureRequest = [facebook requestWithGraphPath:@"me/picture" andDelegate:self];`

我对结果做了什么：

```
-(void)request:(FBRequest *)request didLoad:(id)result{
    if(request == self.pictureRequest){
        UIImageView *image = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 500, 500)];
        image.image = [UIImage imageWithData:result];
        [self.view addSubview:image];
        NSLog("result is %@", result);
    } 
```

所以我现在只是想获取个人资料图片。结果在控制台中显示为 null。我想这意味着我实际上没有得到结果？（我试过`if(result) NSLog(@"got a result")`但它没有返回，所以我猜结果不是由 fb 发回的？）

有任何想法吗？我也在这里查找了一个类似的问题，但不确定他们有什么不同： [Problem getting Facebook pictures via iOS](https://stackoverflow.com/questions/5126678/problem-getting-facebook-pictures-via-ios)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:27:36.613

好吧，我可以像这样检索用户图片和其他信息..试试看

```
- (void)fetchUserDetails {
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"SELECT uid, name, pic, email FROM user WHERE uid=me()", @"query",nil];

    [fb requestWithMethodName:@"fql.query"
                                     andParams:params
                                 andHttpMethod:@"POST"
                                   andDelegate:self];

}//Call this function after the facebook didlogin 
```

并在*请求 didLoad*：

```
- (void)request:(FBRequest *)request didLoad:(id)result 
{

    if([request.url rangeOfString:@"fql.query"].location !=NSNotFound)
    {
        if ([result isKindOfClass:[NSArray class]] && [result count]>0) {
            result = [result objectAtIndex:0];
        }
        if ([result objectForKey:@"name"]) {

            self.fbUserName = [result objectForKey:@"name"];

           // Get the profile image
            UIImage *fbimage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[result objectForKey:@"pic"]]]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T12:12:50.560

您还可以通过以下方式获取 fb 个人资料图片网址，

```
NSString *userFbId;
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/picture", userFbId]];

NSData *imageData = [[NSData alloc] initWithContentsOfURL:url];
self.userProfileImage.image = [UIImage imageWithData:imageData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:33:00.463

如果您想使用 requestWithGraph 路径（而不是像@Malek_Jundi 提供的 requestWithMethodName ）获取图片 URL，请在此处查看我的答案：

[iOS Facebook Graph API 个人资料图片链接](https://stackoverflow.com/questions/8444931/ios-facebook-graph-api-profile-picture-link/10493637#10493637)

# c# - 如何为 SQL Server 和 MySql 制作数据访问层

> ID：10410118
> 
> 赞同：1
> 
> 时间：2012-05-02T08:23:24.057
> 
> 标签：c#, mysql, sql-server, architecture

我正在构建一个数据访问层，需要能够在不同环境中的两个提供者之间切换。

我该如何构建这个？我正在使用存储库模式，并且有一个`CarRepository`类和一个`Car`类。该类`CarRepository`负责从数据库中保存、删除和加载。

我有一个`Database`类，负责连接数据库，并执行查询（`SqlCommand`为 SQL Server 发送一个）。底层数据库的 SQL 语法不同，参数语法也不同（SQL Server 使用`@`，MySql 使用`?`）。

我想要一种方法，可以让我的应用程序在两个平台上都运行。

显而易见的方法是制作 a`MySqlCarRepository`和 a `SqlServerCarRepository`，但这会带来大量的维护。这种情况有什么好的方法吗？也许保留一个包含不同 SQL 风格的 SQL 语句的静态字符串的静态类？（那么参数语法呢？）

欢迎任何建议

（请注意 ORM（Nhibernate、Linq2Sql 等）不是一个选项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:47:08.600

我遵循的方法是首先使用 ADO 提供者工厂来抽象数据访问实现。所以我会`IDbConnection`在代码中使用等等。

然后我有一个查询的抽象。然后我可以使用`Query`包含实际 sql 语句的对象。这些`Query`对象是从`RawQuery`具有每个提供程序类型的实现的各种查询构建器（插入/更新/删除/等）创建的。特定的原始查询将需要针对您需要的数据库进行编码和获取，因为没有通过它。

编写这个“管道”需要做大量的工作，而且我还没有遇到过需要不同平台的情况，所以我没有费心编写一些我知道需要解决的小问题，但欢迎您联系如果您有兴趣查看一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:38:20.553

您可以使用任何代码生成工具吗？

我曾经在另一个生活中使用过**Code Smith**，并且有一些模板可以从 DB 表、每个对象的存储库类和存储过程中生成 POCO 对象。微调模板后工作正常，网上有很多例子。

但这是在我看到**NHibernate**的光芒之前的方式！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:51:30.753

访问多种数据库类型的模式是 DAO（数据访问对象）模式。如果您不能/不使用 ORM，这可能适合您的特定需求。以下文章解释了 Java 的模式，但它仍然与 C# 非常相关：

[http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)

# matlab - MATLAB：强制 doc 命令打开指定的参考 HTML 页面

> ID：10410120
> 
> 赞同：9
> 
> 时间：2012-05-02T08:23:48.113
> 
> 标签：matlab

假设我在一个包中编写了一个类，名为`mypackage.myclass`. 我已经为包和类编写了自己的 HTML 文档，并将其包含在 MATLAB 帮助浏览器中，如[MATLAB 文档中所述](http://www.mathworks.co.uk/help/techdoc/matlab_prog/f3-40511.html)。

我可以通过使用帮助浏览器直接导航到它来显示这个 HTML 文档，但是键入`doc mypackage.myclass`不显示它；相反，它显示了一些由自动生成的 HTML 文档`helpwin`（这是一个很好的功能，但不是我想要的 - 自动生成的文档对我的用户来说太技术性了）。

如何强制`doc`显示我的文档，而不是自动生成的文档？

等效地：

当您运行时`doc docTopic`，在 doc 命令中`com.mathworks.mlservices.MLHelpServices.showReferencePage(docTopic)`会调用 Java 类。如果存在参考页面`docTopic`，则显示它并返回成功值。如果参考页面不存在，它会返回一个失败值，然后导致`helpwin(docTopic)`被调用。某处必须有一些目录将 的值`docTopic`与单个参考 HTML 文件连接起来。我怎样才能摆弄那个目录——或者我可以为我的包裹创建一个目录？

MathWorkers 和@Yair，请给我足够的无证绳索让我上吊:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:21:37.800

据我所知，这是不可能的，也不是 MathWorks 的意图。我也不知道这样做的无证方式。据我记得，关键字在`doc`某处是硬编码的。

根据您的设置，您可以尝试以下操作： 准备您自己的`doc`命令，用于`web(..., '-helpbrowser')`在 MATLAB 的帮助浏览器中显示 HTML 页面：

```
function doc(topic)

    my_topics = {
        'foo', 'foo.html'
        'bar', 'bar/help/intro.html'
    };

    for i = 1 : size(my_topics, 1)
        if strcmpi(topic, my_topics{i, 1})      
            web(my_topics{i, 2}, '-helpbrowser');
            return;
        end
    end

    % Fall back to MATLAB's doc. Note that our doc shadows MATLAB's doc.
    docs = which('doc', '-all');
    old_dir = cd();
    c = onCleanup(@() cd(old_dir));
    cd(fileparts(docs{2}));
    doc(topic); 
end 
```

如果您将该函数放在一个文件中`doc.m`并将相应的目录放在 MATLAB 路径的开头（请参阅 参考资料`help addpath`），那么它将被调用而不是内置的`doc`.

当然，您可以使用其他地方来存储您的自定义文档映射（例如文件）或使用某种动态查找方案。

**更新：**从 MATLAB R2012b 开始，没有记录的`'-helpbrowser'`选项`web`。这可能与该 MATLAB 版本中的 GUI 更改有关，其中还包括帮助浏览器。`web(..., '-helpbrowser')`仍然可以按预期工作，但在未来的 MATLAB 版本中可能会发生变化。据我所知，在 R2012b 的帮助浏览器中，没有记录在案的方式可以打开*任何*HTML 页面。

# javascript - 通过 Javascript 选择列表中的新窗口打开链接

> ID：10410126
> 
> 赞同：0
> 
> 时间：2012-05-02T08:24:17.463
> 
> 标签：javascript, drop-down-menu

当我尝试使用 Firebug 进行调试时，我不确定导致该错误消息的问题是什么。一切对我来说都很好。

当前的问题：

```
$("#SlideList option:selected") is null 
```

选择箱码（删节）：

```
<select id="SlideList" name="D1" style="width: 130px;"> 
  <option value = "Numbers.pdf" >Numbers</option>
 </select>
 <img src="Button.png" onclick="SlidePDFOpen()" /> 
```

Javascript：

```
function SlidePDFOpen() {
window.open($("#SlideList option:selected").val());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:29:45.670

您正在使用 jquery 选择器，但页面中没有包含 jquery。因此，您得到的错误是有道理的，因为页面找不到函数 val()。

至少使用 jquery 你会得到一个空字符串。

# python - 使用 python 处理列表列表

> ID：10410134
> 
> 赞同：-1
> 
> 时间：2012-05-02T08:25:03.027
> 
> 标签：python, list

我正在使用 python 处理列表

输入 ：

```
[[u'Tempoh', '', '', u'Belanjawan semasa', '', '', u'Perbelanjaan pembangunan', '', '', u'Lebihan / kurangan(-) keseluruhan', u'Sumber-sumber kewangan', '', '', '', '', '', ''], ['', '', '', u'Current budget', '', '', u'Development expenditure', '', '', '', u'Sources of finance', '', '', '', '', '', ''], ['', '', '', u'Hasil', u'Perbelanjaan1', u'Lebihan / kurangan(-)', u'Perbelanjaan pembangunan kasar', u'Tolak: Terimaan balik pinjaman', u'Perbelanjaan pembangunan bersih', '', u'Pinjaman dalam negeri', '', '', u'Pinjaman luar negeri', '', '', u'Penggunaan harta2'], ['', '', '', '', '', '', '', '', '', '', u'Domestic borrowing', '', '', u'Foreign borrowing', '', '', ''], [u'Period', '', '', '', '', '', '', '', '', '', u'Peminjaman kasar dalam negeri', u'Tolak: Pembayaran balik dalam negeri', u'Peminjaman bersih dalam negeri', u'Peminjaman kasar luar negeri', u'Tolak: Pembayaran balik luar negeri', u'Peminjaman bersih luar negeri', ''], ['', '', '', u'Revenue', u'Expenditure1', u'Surplus / deficit(-)', u'Gross development expenditure', u'Less: Loan recoveries', u'Net development expenditure', u'Overall surplus / deficit(-)', u'Gross domestic borrowing', u'Less: Domestic repayment', u'Net domestic borrowing', u'Gross foreign borrowing', u'Less: Foreign repayment', u'Net foreign borrowing', u'Use of assets'] 
```

输出：

我希望这个空白空间被前一个字符串填充

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:31:28.010

您可以使用以下成语：

```
new = [s2 or s1 for s1, s2 in zip (stringList, stringList[1:])] # + last element 
```

# python - 计算 numpy 数组对的非唯一元素的平均值

> ID：10410135
> 
> 赞同：0
> 
> 时间：2012-05-02T08:25:07.600
> 
> 标签：python, numpy

我有三个数组，大小都一样：

```
arr1 = np.array([1.4, 3.0, 4.0, 4.0, 7.0, 9.0, 9.0, 9.0])
arr2 = np.array([2.3, 5.0, 2.3, 2.3, 4.0, 6.0, 5.0, 6.0])
data = np.array([5.4, 7.1, 9.5, 1.9, 8.7, 1.8, 6.1, 7.4]) 
```

arr1 可以占用任何浮点值，而 arr2 只能占用几个浮点值。我想获得 arr1 和 arr2 的唯一对，例如

```
arr1unique = np.array([1.4, 3.0, 4.0, 7.0, 9.0, 9.0])
arr2unique = np.array([2.3, 5.0, 2.3, 4.0, 6.0, 5.0]) 
```

对于每个非唯一对，我需要对`data`-array 中的相应元素进行平均，例如，对 9.5 和 1.9 进行平均，因为这对`(arr1[3], arr2[3])`和`(arr1[4], arr2[4])`相等。与索引 6 和 8 对应的数据中的值也是如此。因此，数据数组变为

```
dataunique = np.array([5.4, 7.1, 5.7, 8.7, 4.6, 6.1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T06:38:11.620

这是该问题的“纯numpy”解决方案。纯 numpy 引号，因为它依赖于我仍在研究的 numpy 增强提案，但您可以在此处找到完整代码：

[http://pastebin.com/c5WLWPbp](http://pastebin.com/c5WLWPbp)

```
group_by((arr1, arr2)).mean(data) 
```

瞧，问题解决了。比任何已发布的解决方案都要快；如果我自己可以这么说的话，也更优雅；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:34:37.837

将 arr1 中的字典作为键并将其等效的 arr2 存储为值。对于每个保存到字典的字典，都会生成其数据唯一条目。如果键已经存在，则跳过该迭代并继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:52:50.547

`defaultdict`可以在这里为您提供帮助：

```
>>> import numpy as np
>>> arr1 = np.array([1.4, 3.0, 4.0, 4.0, 7.0, 9.0, 9.0, 9.0])
>>> arr2 = np.array([2.3, 5.0, 2.3, 2.3, 4.0, 6.0, 5.0, 6.0])
>>> data = np.array([5.4, 7.1, 9.5, 1.9, 8.7, 1.8, 6.1, 7.4])
>>> from collections import defaultdict
>>> dd = defaultdict(list)
>>> for x1, x2, d in zip(arr1, arr2, data):
...   dd[x1, x2].append(d)
... 
>>> arr1unique = np.array([x[0] for x in dd.iterkeys()])
>>> arr2unique = np.array([x[1] for x in dd.iterkeys()])
>>> dataunique = np.array([np.mean(x) for x in dd.itervalues()])
>>> print arr1unique
[ 1.4  7\.   4\.   9\.   9\.   3\. ]
>>> print arr2unique
[ 2.3  4\.   2.3  5\.   6\.   5\. ]
>>> print dataunique
[ 5.4  8.7  5.7  6.1  4.6  7.1] 
```

此方法给出了您的答案，但会破坏排序。如果顺序很重要，你可以做基本相同的事情`collections.OrderedDict`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:55:13.570

您所要做的就是创建一个`OrderedDict`将键存储为 (arr1,arr2) 中的元素对，并将值存储为数据中的元素列表。对于任何重复键（arr1 和 arr2 对），重复条目将存储在列表中。然后，您可以重新遍历字典中的值并创建平均值。要获取唯一键，只需遍历键并拆分元组

尝试以下

```
>>> d=collections.OrderedDict()
>>> for k1,k2,v in zip(arr1,arr2,data):
    d.setdefault((k1,k2),[]).append(v)      
>>> np.array([np.mean(v) for v in d.values()])
array([ 5.4,  7.1,  5.7,  8.7,  4.6,  6.1])

>>> arr1unique = np.array([e[0] for e in d])
>>> arr2unique = np.array([e[1] for e in d]) 
```

# c++ - 这个错误是什么意思“表达式必须具有指向类的类型”？

> ID：10410139
> 
> 赞同：0
> 
> 时间：2012-05-02T08:25:22.877
> 
> 标签：c++, compiler-errors

我是初学者，我制作了一个树形树，我制作了一个类类型和指向这个的指针`class`，当我使用“`this`关键字”指向下一个出现的元素时

> 编译器错误：“表达式必须具有指向类的类型”

```
 this->right->search_el(k,p); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:26:15.127

这意味着你申请`operator ->`的是非指针类型。你可能想要：

```
this->right.search_el(k,p); 
```

由于`this`是指针，`right`因此似乎是唯一不是指针的候选者。在 C++ 中，您可以通过`.`是否有实例或`->`是否有指向实例的指针来访问类的成员。

# .htaccess - 带有密码保护站点 (.htaccess) 的 Cronjob

> ID：10410140
> 
> 赞同：7
> 
> 时间：2012-05-02T08:25:28.020
> 
> 标签：.htaccess, cron, wget, password-protection, cron-task

我想创建一个每次 X 次打开网页的 cronjob。

此网页受 .htaccess 密码保护（用户=管理员，密码=密码）。我给出的指令如下：

```
wget --user=admin --password='pass' http://www.mywebsite.com/test.php 
```

但是 cron 给了我以下错误：

```
--2012-05-02 10:14:01--  http://www.mywebsite.com/test.php
Resolving www.mywebsite.com... IP
Connecting to www.mywebsite.com|IP|:80... connected.
HTTP request sent, awaiting response... 401 Authorization Required
Reusing existing connection to www.mywebsite.com:80.
HTTP request sent, awaiting response... 403 Forbidden
2012-05-02 10:14:01 ERROR 403: Forbidden. 
```

我也尝试过这样做：

```
wget admin:pass@http://www.mywebsite.com/test.php 
```

但有类似的错误。我该如何解决？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-25T08:51:24.040

wget --user admin --password pass [http://www.mywebsite.com/test.php](http://www.mywebsite.com/test.php)

每分钟打开一个带有 htaccess 密码的网站

```
*/1 * * * *  wget -O /dev/null --user admin --password pass "http://www.mywebsite.com/test.php" > /dev/null 2>&1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T23:52:03.860

你犯了一个小错误。

将**http://**保留在 url 之前。

你有

> 管理员：pass@ [http://www.mywebsite.com/test.php](http://www.mywebsite.com/test.php)

将其更改为

> [http://admin:pass@www.mywebsite.com/test.php](http://admin:pass@www.mywebsite.com/test.php)

希望有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T15:00:22.010

将 auth 参数添加到 url。当直接调用 url 时，这对我有用。

```
http://yoururl.ext?auth=id:psw 
```

我不知道它有多安全......

# android - 列表中的垃圾值

> ID：10410143
> 
> 赞同：0
> 
> 时间：2012-05-02T08:25:41.843
> 
> 标签：android, sqlite, list, garbage

我正在填充列表视图以查看我的记录，我有以下代码...

```
 super.onCreate(savedInstanceState);
            setContentView(R.layout.total);
            ArrayList<Object> results = new ArrayList<Object>();
            // -- SQLiteOpenHelper dbHelper = new DatabaseHelper(this, SAMPLE_DB_NAME, null, 1);

            SQLiteDatabase myDB = this.openOrCreateDatabase(SAMPLE_DB_NAME, SQLiteDatabase.OPEN_READONLY, null);
            try { 
                 /* Create the Database (no Errors if it already exists) */
                           myDB.execSQL("PRAGMA foreign_keys = ON;");

                            // -- openOrCreateDatabase(name, mode, factory)
                            // myDB = dbHelper.getReadableDatabase();
                    Cursor c = myDB.query(DatabaseHelper.SAMPLE_TABLE_NAME, null, null, null, null, null, null);
                    Cursor d = myDB.query(DatabaseHelper.SAMPLE_TABLE_NAMES, null, null, null, null, null, null);

                    /* Check if our result was valid. */ 
                if (c != null && d != null) {

                    c.moveToFirst(); // it's very important to do this action otherwise your Cursor object did not get work
                    d.moveToFirst();
                    char cust_name = (char) c.getColumnIndex("cust_name");
                    char pro_name = (char) d.getColumnIndex("pro_name");
                    int pro_price = (int) d.getColumnIndex("pro_price");

                     /* Check if at least one Result was returned. */ 
                     if (c.isFirst() && d.isFirst()) { 
                          int i = 0; 
                          /* Loop through all Results */ 
                          do { 
                               i++; 
                               String cust_nameColumnIndex = c.getString(cust_name);
                               String pro_nameColumnIndex = c.getString(pro_name);
                               int pro_priceColumnIndex = c.getInt(pro_price);

                               /* Add current Entry to results. */ 
                               results.add("" + i + ": " + cust_name + " (" + pro_name + ": " + pro_price + ")"); 
                          } while (c.moveToNext()&& d.moveToNext());

                     } 
                }

            } catch (SQLiteException e) { 
            } finally { 
                 if (myDB != null) 
                      myDB.close(); 
            }

            // -- android.R.layout.simple_list_item_1 is object which belong to ListActivity itself
            // -- you only need to add list object in your main layout file
            this.setListAdapter(new ArrayAdapter<Object>(this, android.R.layout.simple_list_item_1, results)); 
        } 
```

总.xml

```
 <ListView
            android:id="@id/android:list"
            android:layout_width="fill_parent"
            android:layout_height="380dp"
            android:cacheColorHint="#00000000" >
        </ListView> 
```

数据已成功插入 sqlite（从 adb shell 确认）...它给了我垃圾值...任何人都可以解决这个问题....提前致谢

![在此处输入图像描述](../Images/446362d3c06fe7f081a8c31f94979ff4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:34:56.823

那不是垃圾值引用（内存）地址，使用下面的代码它将起作用。

```
 do { 
                               i++; 
                               String cust_nameColumnIndex = c.getString(cust_name);
                               String pro_nameColumnIndex = c.getString(pro_name);
                               int pro_priceColumnIndex = c.getInt(pro_price);

                               /* Add current Entry to results. */ 
                               results.add("" + i + ": " + cust_nameColumnIndex + " (" + pro_nameColumnIndex + ": " + pro_priceColumnIndex + ")"); 
                          } while (c.moveToNext()&& d.moveToNext());

this.setListAdapter(new ArrayAdapter<Object>(this, android.R.layout.simple_list_item_1, (String[]) results.toArray(new String[0]))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:39:56.127

尝试改变阅读光标的方式。类似的东西可能会更好：

```
//Get the indexes
        int cust_name =  cursor.getColumnIndex("cust_name");
        int pro_name =  cursor.getColumnIndex("pro_name");
        int pro_price =  cursor.getColumnIndex("pro_price");

        try {
            if(cursor.moveToFirst()){
                while (!cursor.isAfterLast()) {

                    //Get the data
                    String cust_nameColumnIndex = cursor.getString(cust_name);
                    String pro_nameColumnIndex = cursor.getString(pro_name);
                    int pro_priceColumnIndex = cursor.getInt(pro_price);

                    //Move to next cursor item
                    cursor.moveToNext();
                }
            }
            else {
                Log.i(TAG, "Empty cursor");
                //Do whatever
            }
        } catch (Exception e) {
            Log.i(TAG, "Exception while reading cursor: " + e.getMessage());
            //Do whatever
        }
        finally {
            cursor.close();
        } 
```

# javascript - 在 f4player 中使用外部 javascript，控制播放、停止、暂停等

> ID：10410149
> 
> 赞同：0
> 
> 时间：2012-05-02T08:26:27.517
> 
> 标签：javascript, actionscript

我搜索了很多，但我无法得到任何关于此的答案。我正在使用 f4player 在我的 HTML/JavaScript 文件中播放 mp4 视频。这个播放器很好用。但我想使用 JavaScript 控制 f4player 的播放/暂停/停止。请任何人都可以帮助我。

我用 [f4player](http://gokercebeci.com/dev/f4player)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:29:05.920

[通过查看 F4Player](https://github.com/gokercebeci/f4player)的源代码，它似乎不提供通过 JavaScript 控制播放器的能力。

通过使用[ExternalInterface.addCallback](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29)方法，可以对 SWF 文件进行编程以允许从 JavaScript 调用方法。你可以很容易地修改播放器的源代码来注册所需的 JavaScript 钩子：

```
// Create an instance of the F4Player - ensure you don't pass an initial stream.
var player : Player = new Player(null);

// Register some ExternalInterface callback to allow control from the JavaScript
ExternalInterface.addCallback("play", player.Play);

// Initialize the skin in the usual fashion
skin.initialization(
    player,
    stage.stageWidth
    // ...etc.
); 
```

说了这么多，您可能会更好地使用更完整的视频播放器解决方案，例如[video.js](http://videojs.com/)中的那个。

# mysql - 如何在 LEFT OUTER JOIN 中访问外部表

> ID：10410152
> 
> 赞同：0
> 
> 时间：2012-05-02T08:26:31.230
> 
> 标签：mysql

在下面的查询中，我尝试使用左外连接中的第一个表。但是我收到一个错误。

```
SELECT
       products.id,
       products_cstm.oem_c,
       products.mfr_part_num,
       products.description,
       products.cost,
       products.assigned_user_id,
       customfields_oo.ans
FROM products
          LEFT OUTER JOIN (SELECT  COUNT( q.id )  AS ans
                                  , pq.product_id
                           FROM   products_quotes pq 
                                     LEFT JOIN quotes q
                                           ON pq.quote_id = q.id
                           WHERE  q.deleted = 0
                           AND    pq.deleted = 0
                           AND    q.stage <> 4
                           AND  (pq.qty_shipped < pq.product_qty)
                           AND  pq.product_id = products.id
                           GROUP BY pq.product_id
                      ) AS customfields_oo
                ON customfields_oo.product_id = products.id
          LEFT JOIN products_cstm
                ON products.id = products_cstm.id_c
WHERE  products.deleted = 0
ORDER  BY ans DESC 
```

当我运行查询时，它给了我以下错误：

```
Error Code : 1054
Unknown column 'products.id' in 'where clause' 
```

它不允许左外连接查询中的第一个“产品”表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:19:14.247

问题是`customfields_oo`派生表不是相关子查询。因此，您不能从派生表的定义中引用外部表。在这种情况下，您不能`products`从`customfields_oo`定义中引用外部表。`On`相反，您必须在派生表定义之外的子句中执行该过滤器。

```
Select products.id,
       products_cstm.oem_c,
       products.mfr_part_num,
       products.description,
       products.cost,
       products.assigned_user_id,
       customfields_oo.ans
FROM products
    Left Join   (
                Select pq1.product_id
                    , Count( q1.id ) As ans
                From products_quotes As pq1 
                    Left Join quotes As q1
                        On pq1.quote_id = q1.id
                Where q1.deleted = 0
                    And pq1.deleted = 0
                    And q1.stage <> 4
                    And pq1.qty_shipped < pq1.product_qty
                Group By pq1.product_id
                ) As customfields_oo
        On customfields_oo.product_id = products.id
    Left Join products_cstm
        On products.id = products_cstm.id_c
Where products.deleted = 0
Order By customfields_oo.ans Desc 
```

现在，您在评论中说这太慢了，因为删除 <> 0 的产品可能会在派生表中进行评估。如果是这种情况，则只需扩展派生表以包含外部`products`表上的过滤器。

```
Select products.id,
       products_cstm.oem_c,
       products.mfr_part_num,
       products.description,
       products.cost,
       products.assigned_user_id,
       customfields_oo.ans
FROM products
    Left Join   (
                Select pq1.product_id
                    , Count( q1.id ) As ans
                From products_quotes As pq1 
                    Join products As p1
                        On p1.products.id = pq1.product_id
                    Left Join quotes As q1
                        On pq1.quote_id = q1.id
                Where q1.deleted = 0
                    And pq1.deleted = 0
                    And q1.stage <> 4
                    And pq1.qty_shipped < pq1.product_qty
                    And p1.deleted = 0
                Group By pq1.product_id
                ) As customfields_oo
        On customfields_oo.product_id = products.id
    Left Join products_cstm
        On products.id = products_cstm.id_c
Where products.deleted = 0
Order By customfields_oo.ans Desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:36:35.660

你不需要`AND pq.product_id = products.id`在where语句中有。因为你正在`LEFT JOIN`考虑这一点。所以我认为这样的事情会起作用：

```
AND (pq.qty_shipped < pq.product_qty)
GROUP BY pq.product_id) AS customfields_oo
ON customfields_oo.product_id = products.id
LEFT JOIN products_cstm
   ON products.id = products_cstm.id_c
WHERE products.deleted = 0
ORDER BY openorder DESC 
```

**编辑**

你不需要`LEFT JOIN`在你正在工作的桌子`COUNT`上。你也可以这样做：

```
SELECT
    .....
    (
        SELECT
           COUNT( q.id )
        FROM products_quotes pq
        LEFT JOIN quotes q
           ON pq.quote_id = q.id
        WHERE q.deleted = 0
        AND pq.deleted = 0
        AND q.stage <> 4
        AND (pq.qty_shipped < pq.product_qty)
        AND pq.product_id = products.id
    ) AS ans
 FROM products
 ..... 
```

# android - 在 Android 中使用现有的“.so”文件（在 Linux 上创建）

> ID：10410153
> 
> 赞同：3
> 
> 时间：2012-05-02T08:26:35.397
> 
> 标签：android, linux

我有一个`.so`在 Linux (Ubuntu) 上创建的文件。我没有它的来源。

我想`.so`在 Android 上使用相同的文件。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:29:37.207

您需要为 arm 处理器编译 lib 以在 Andriod 手机上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:26:36.477

您创建的 .so 文件是为`32bit`or编译的`64bit` `processors`，要使其在 Android 上运行，您必须`arm processor`按照其他答案中的说明对其进行编译。您可以使用`Android NDK`android 工具链交叉编译您的库。您还需要根据 arm 处理器提供**CFLAGS**、**CPPFLAGS**和**LDFLAGS 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:29:32.540

答案是不。如果您没有源代码，则无法在 Android 中使用它。如果你有源代码为 ARM 构建它，你可以使用..

# uiview - 我们可以将 UIView 对象分配给 XIB 的 UIView 对象吗？

> ID：10410154
> 
> 赞同：1
> 
> 时间：2012-05-02T08:26:35.433
> 
> 标签：uiview, xib, nib, iboutlet

我已经通过代码创建了 UIView（比如 A）对象，并通过代码添加了所有子视图，如 UIButton、UILabel 等。我在 XIB 中创建的另一个 UIView（比如 B）。现在我正在尝试将 A 分配给 B。当我在分配后记录 B 的子视图时，我可以在 B 中看到 A 的所有子视图，但视图中什么也没有出现。我知道我的逻辑可能是错误的，但我没有明白。请让我知道它是否可能！

这是我的代码：

```
- (UIView*)createButtonView:(NSInteger)viewTag avatarImageName:(NSString*)avatarImageName cardImageName:(NSString*)cardImageName ballImageName:(NSString*)ballImageName
{
    buttonBGView = [[UIView alloc] initWithFrame:CGRectMake(15,86,290,290)];
    buttonBGView.tag = viewTag;

    UIImageView *avatarImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 206, 84, 84)];
    avatarImageView.image = [UIImage imageNamed:avatarImageName];
    [buttonBGView addSubview:avatarImageView];

    UIButton *temoCardButton  = [[UIButton alloc] initWithFrame:CGRectMake(58, 42, 188, 222)];
    temoCardButton.tag = viewTag;
    [temoCardButton setImage:[UIImage imageNamed:cardImageName] forState:UIControlStateNormal];
    [temoCardButton addTarget:self action:@selector(cardButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
    [buttonBGView addSubview:temoCardButton];

    UILabel *scoreLabel = [[UILabel alloc] initWithFrame:CGRectMake(228, 0, 30, 30)];
    scoreLabel.text = [cardPointsArray objectAtIndex:randomIndex];
    scoreLabel.textAlignment = UITextAlignmentCenter;
    [buttonBGView addSubview:scoreLabel];

    buttonBGView.backgroundColor = [UIColor redColor];

    return buttonBGView;
}

-(void)cardButtonTapped:(id)sender
{
    NSLog(@"%@",[buttonBGView subviews]);

    self.cardTappedView = buttonBGView;

    NSLog(@"%@",[self.cardTappedView subviews]);
} 
```

**谢谢**

# java - 单击子菜单时，打开一个额外的窗口

> ID：10410155
> 
> 赞同：0
> 
> 时间：2012-05-02T08:26:38.060
> 
> 标签：java, swing, jbutton

我正在努力提高自己的 java 编程水平。

我想要做的是，我有一个菜单和子菜单，例如我点击文件菜单，然后选择转换器（子菜单），我希望它为我的转换器程序打开新窗口。

这是我的转换器窗口

```
public class Converter extends JFrame {

    private static final long   serialVersionUID    = 1L;
    private MoneyDetails        convertMe           = new MoneyDetails();
    private JLabel              tlLabel             = new JLabel("     Amount of TL");
    private JLabel              dollarsLabel        = new JLabel("Amount of Dollars");
    private JTextField          tlField             = new JTextField("0.0");
    private JTextField          dollarsField        = new JTextField("0.0");
    private JButton             tlButton            = new JButton("Convert to $");
    private JButton             dollarsButton       = new JButton("<<< Convert to TL");
    private JButton             setRates            = new JButton("Set Rates");

    public Converter() {
        JPanel dataPanel = new JPanel(new GridLayout(2, 2, 12, 6));
        dataPanel.add(tlLabel);

        dataPanel.add(dollarsLabel);
        dataPanel.add(tlField);
        dataPanel.add(dollarsField);
        JPanel buttonPanel = new JPanel();
        buttonPanel.add(tlButton);
        buttonPanel.add(dollarsButton);
        Container container = getContentPane();
        container.add(dataPanel, BorderLayout.CENTER);
        container.add(buttonPanel, BorderLayout.SOUTH);
        tlButton.addActionListener(new TLConverter());
        dollarsButton.addActionListener(new DollarsConverter());
        buttonPanel.add(setRates);
    }
    private class TLConverter implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            try {
                String input = tlField.getText();
                double tl = Double.parseDouble(input);
                convertMe.setTL(tl);
                double dollars = convertMe.getDollars();
                dollarsField.setText(String.format("%.2f", dollars));
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, "Please enter the amount that will be converted.");
            }
        }
    }

    private class DollarsConverter implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            String input = dollarsField.getText();
            double dollars = Double.parseDouble(input);
            convertMe.setDollars(dollars);
            double tl = convertMe.getTL();
            tlField.setText(String.format("%.2f", tl));
        }
    }

    public static void main(String[] args) {
        Converter theGUI = new Converter();
        theGUI.setTitle("TL to $ or $ to TL Converter");
        theGUI.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        theGUI.pack();
        theGUI.setVisible(true);
    }
} 
```

这是我的转换器类中的菜单

```
private JMenuBar menuBar = new JMenuBar(); // Window menu bar
public Converter(String title) {
    setTitle(title);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setJMenuBar(menuBar); // Add the menu bar to the window
    JMenu fileMenu = new JMenu("File"); // Create File menu
    JMenu elementMenu = new JMenu("Elements"); // Create Elements menu
    JMenuItem subTest = new JMenuItem("Test");
    menuBar.add(fileMenu); // Add the file menu
    menuBar.add(elementMenu); // Add the element menu

    fileMenu.add(subTest);

  }

public static void main(String [] args)
{

Converter window = new Converter("Para Dönüstürücü"); 
window.setBounds(30, 30, 300, 300);
window.setVisible(true);
Converter theGUI = new Converter(); 

} 
```

当我点击我的子菜单时，我希望它打开我的转换窗口。我怎么能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:37:30.807

您需要将监听器添加到您的 menuItem，监听器会在特定事件发生时为您提供回调，例如单击、鼠标移出等

您可以将 ActionListener 添加到您的 menuItem 并在回调方法中显示您的 GUI。

```
subTest.addActionListener(new ActionListener(){     
   public void actionPerformed(ActionEvent actionEvent){
       Converter convert = new Converter("Testing Opening this from Menu Item");
       convert.pack();
       convert.setVisible(true);
   }
}); 
```

[您可以在此处](http://docs.oracle.com/javase/tutorial/uiswing/events/eventsandcomponents.html)了解 Swing 提供的所有不同侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:31:38.060

您需要的是一个事件侦听器，如下所示：

```
fileMenu.addSelectionListener(new SelectionAdapter() {
      public void widgetSelected(SelectionEvent e) {
        new Converter();
      }
    }); 
```

[您可以在此处](http://www.java2s.com/Tutorial/Java/0280__SWT/AddclickeventlistenertoMenuItem.htm)查看更完整的示例。

# forms - 表单中的默认日期（symfony2）

> ID：10410164
> 
> 赞同：3
> 
> 时间：2012-05-02T08:27:13.897
> 
> 标签：forms, symfony

我用 Symfony2 创建了一个这样的表单：

```
$builder
                ->add('days', 'date', array(
                    'widget' => 'choice',
                                    'format' => 'dd-MM-yyyy',
                                    'pattern' => '{{ day }}-{{ month }}-{{ year }}',
                                    'years' => range(Date('Y'), 2010),
                                    'label' => 'Inactive participants since',
                                    'input' => 'string',
                    )); 
```

但我想显示一个默认日期，例如今天，所以，当我打印 de form 我看到

> 02 - 05 - 2012

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T12:11:39.000

这适用于约会吗？

```
 $builder
                    ->add('days', 'date', array(
                        'widget' => 'choice',
                                        'format' => 'dd-MM-yyyy',
                                        'pattern' => '{{ day }}-{{ month }}-{{ year }}',
                                        'years' => range(Date('Y'), 2010),
                                        'label' => 'Inactive participants since',
                                        'input' => 'string',
                                        'data'  => '01-01-2001'
                        )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:56:03.150

您必须在表单之前设置默认日期。

当您创建实体 ( `$entity = new Entity();`) 时，只需添加您的默认值，如下所示：

`$entity->setDays(my_value);`

如果要添加今天的日期，可以使用 DateTime 函数，如下所示：

`$entity->setDays(new \DateTime());`

希望我足够清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:37:59.080

对于 2.1，表单将默认为今天的日期：

```
 $builder
                    ->add('days', 'date', array(
                        'widget' => 'choice',
                                        'format' => 'dd-MM-yyyy',
                                        'pattern' => '{{ day }}-{{ month }}-{{ year }}',
                                        'years' => range(Date('Y'), 2010),
                                        'label' => 'Inactive participants since',
                                        'input' => 'string',
                                        'data'  => date_create()
                        )); 
```

# objective-c - 代理和 ARC，不兼容？

> ID：10410165
> 
> 赞同：0
> 
> 时间：2012-05-02T08:27:16.447
> 
> 标签：objective-c, automatic-ref-counting

我正在尝试为数据库存储过程实现代理。这个想法是让我的代码在数据库中找到一系列存储过程，然后在内存中创建一个代理对象，该对象将实现与这些存储过程匹配的方法。该代理对象可以从 NSProxy 或 NSObject 派生，两者都应该工作。基本思想是，对我的代理对象进行的任何方法调用都将转到 resolveInstanceMethod: 并在该方法调用与数据库中的存储过程匹配时在那里进行处理。

但在接近我的目标之前，我被 ARC 难住了，似乎不允许我对未声明的方法进行方法调用。回到 ARC 之前的日子，我们从编译器收到类似“对象可能不响应选择器”的警告，就是这样，但启用 ARC 后，我收到一个编译器错误，提示“选择器没有已知的实例方法.. ."。如果我首先将代理对象强制转换为 (id)，也会发生这种情况。

这一切似乎都在暗示 ARC 与方法的运行时发现不兼容，这是 Objective-c 的基本特征之一。似乎要求所有使用的方法都必须在编译之前在接口中声明，就像在 C++ 中一样。

或者，更有可能的是，我错过了一些重要的东西。如果是这样，是什么？

编辑以包含代码：

```
int main(int argc, const char * argv[])
{

@autoreleasepool {

    // insert code here...
    NSLog(@"Hello, World!");

    MyTargetClass *mtc = [[MyTargetClass alloc] init];
    [mtc doSomething];
}
return 0;
} 
```

MyTargetClass 不包含任何内容：

```
@interface MyTargetClass : NSObject

@end 
```

如果在非 ARC 项目中，[mtc doSomething] 调用会引发警告，但会在 ARC 中引发编译器错误。恕我直言，这意味着如果使用 ARC，我无法在运行时向类添加方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:12:38.427

mwehlou,

首先，如果您不向我们展示任何代码，那么真的很难帮助您。

其次，如果您知道您将提供实例方法，那么您可以使用以下`#pragma`s 使警告静音：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"

[Your Selector Based Code Here]

#pragma clang diagnostic pop 
```

如果那是警告符号，那么您可能可以在 Xcode 的构建设置中找到它。

安德鲁

# macos - 如何预定义 Apple Script 常量或变量

> ID：10410166
> 
> 赞同：1
> 
> 时间：2012-05-02T08:27:23.510
> 
> 标签：macos, cocoa, applescript

是否可以在可可应用程序中为 AppleScript 预定义常量或变量？换句话说，函数“addConstantToAppleScript”（在下面的代码中使用）是可定义的吗？

```
addConstantToAppleScript("myText", "Hello!");
char *src = "display dialog myText";
NSString *scriptSource = [NSString stringWithCString:src]; 
NSAppleScript *appleScript = [[NSAppleScript alloc] initWithSource:scriptSource];
NSDictionary *scriptError = [[NSDictionary alloc] init];
[appleScript executeAndReturnError:scriptError]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:34:17.660

如果您想在包含 AppleScript`NSDictionary`的开头添加一个键/值对，`NSString`您可以使用以下函数。就我个人而言，我会将此作为 NSString 上的一个类别，但您已要求提供一个函数。

```
NSString *addConstantsToAppleScript(NSString *script, NSDictionary *constants) {
    NSMutableString *constantsScript = [NSMutableString string];

    for(NSString *name in constants) {
        [constantsScript appendFormat:@"set %@ to \"%@\"\n", name, [constants objectForKey:name]];
    }   

    return [NSString stringWithFormat:@"%@%@", constantsScript, script];
} 
```

此函数将键/值对转换为形式的 AppleScript 语句`set <key> to "<value>"`。然后将这些语句添加到提供的`script`字符串的前面。然后返回生成的脚本字符串。

您将按如下方式使用上述函数：

```
// Create a dictionary with two entries:
//     myText = Hello\rWorld!
//     Foo    = Bar
NSDictionary *constants = [[NSDictionary alloc ] initWithObjectsAndKeys:@"Hello\rWorld!", @"myText", @"Bar", @"Foo", nil];

// The AppleScript to have the constants prepended to   
NSString *script = @"tell application \"Finder\" to display dialog myText";

// Add the constants to the beginning of the script 
NSString *sourceScript = addConstantsToAppleScript(script, constants);

// sourceScript now equals
//     set Foo to "Bar"
//     set myText to "Hello\rWorld!"
//     tell application "Finder" to display dialog myText

NSAppleScript *appleScript = [[NSAppleScript alloc] initWithSource:sourceScript]; 
```

# javascript - 如何从backbone.js的集合中调用模型的方法？

> ID：10410167
> 
> 赞同：1
> 
> 时间：2012-05-02T08:27:29.600
> 
> 标签：javascript, jquery, backbone.js

这些天我一直在努力学习backbone.js。我拥有的是一个模型和一个集合。该模型中定义了一些我想在集合中获取的默认属性。这是我的代码：

```
var model = Backbone.Model.extend({
    defaults : {
        done : true
    }
});

var collection = Backbone.Collection.extend({
    model : model,  

    pickMe : function () {
        log(this.model.get('done')); //return undefined
    }   
});

var col = new collection();
col.pickMe(); 
```

如何从集合中调用模型中定义的方法？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:48:17.873

@erturne 是正确的，您正在尝试在模型构造函数上调用方法，而不是模型实例。那没有意义。

如果您真的想在集合上定义方法，那么 @drinchev 提供了一个示例，说明如何遍历集合中的模型并调用它们的方法。虽然，这个例子相当笨拙——使用内置的迭代器方法会更优雅。

根据您要完成的工作，您可能只想使用内置的集合迭代器方法来调用每个模型上的方法，而不是在集合上定义方法。例如：

```
var Model = Backbone.Model.extend({
    defaults : {
      done : true
    }
});

var Collection = Backbone.Collection.extend({
    model : Model
});

var col = new Collection([{}, {done : false}, {}]);

col.each(function (model) {
  log(model.get('done'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:56:44.847

Backbone 的基本设置是这样的：

您有模型是集合的一部分。因此，在您的设置中，您有一个模型构造函数`model`和集合构造函数`collection`，但您的集合中没有模型，如果您有任何模型，它们将是一个数组，所以您的代码应该是这样的

```
var model = Backbone.Model.extend({
    defaults : {
        done : true
    }
});

var collection = Backbone.Collection.extend({
    model : model,  

    pickMe : function () {
        for ( i = 0; i < this.models.length; i++ ) {
            log(this.models[i].get('done')); // this prints 'true'
        }
    }   
});

// Here we are actually creating a new model for the collection
var col = new collection([{ name : 'jack' }]); 

col.pickMe(); 
```

您可以在这里检查工作的 jsFiddle：http: [//jsfiddle.net/S8tHk/1/](http://jsfiddle.net/S8tHk/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:05:19.313

我认为您最好将模型方法附加到模型本身，而不是集合中。所以你应该有这样的东西：

```
var model = Backbone.Model.extend({
    defaults : {
        done : true
    },
    pickMe : function () {
        log(this.get('done'));
    }
});

var collection = Backbone.Collection.extend({
    model : model,  
});

var model = collection.get(id)
model.pickMe() 
```

# asp.net-mvc - 控制器操作具有不同的授权级别是不好的做法吗？

> ID：10410168
> 
> 赞同：0
> 
> 时间：2012-05-02T08:27:38.210
> 
> 标签：asp.net-mvc, asp.net-mvc-3, single-responsibility-principle

我们正在开发一个网站，并且我们有一个控制器来处理模型（例如 Country）的 CRUD。仅允许管理员执行 CRUD 操作。但是，我们还希望控制器提供一个 JSON 选择实体列表来填充下拉列表。这种模式存在于整个应用程序中。

这意味着我们不能使用标准的授权属性来限制管理员在控制器入口处的访问。我们需要用特定的授权属性来装饰每个动作。

我们在单个控制器上需要多个授权级别这一事实是不是一个不好的信号？这是否表明我们违反了 SRP？

处理许多控制器与仅需要由管理员更新但为所有授权用户提供 JSON 选择列表的实体这一事实的最佳模式是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:38:10.963

这样做的唯一问题是您可能会忘记保护应该只是管理员的操作的风险。

真正解决此问题的首选方法是在您的站点上设置一个仅限管理员的区域（使用 MVC 区域）。

[http://msdn.microsoft.com/en-us/library/ee671793.aspx](http://msdn.microsoft.com/en-us/library/ee671793.aspx)

[http://sankarsan.wordpress.com/2012/04/14/asp-net-mvc-areasa-better-way-to-structure-the-application/](http://sankarsan.wordpress.com/2012/04/14/asp-net-mvc-areasa-better-way-to-structure-the-application/)

这样，整个 www.site.com/admin 部分将被保护为仅限管理员。

# php - 是否可以在多选下拉列表中设置限制？

> ID：10410169
> 
> 赞同：4
> 
> 时间：2012-05-02T08:27:38.507
> 
> 标签：php, multi-select

我在我的网站中使用了一个多选下拉列表。这工作正常，我们可以从该列表中选择多个选项。但我只想从该列表中选择 3 个选项。是否可以为此设置限制？ ?

我正在使用来自[http://www.aleixcortadellas.com/main/2009/03/20/492/的代码](http://www.aleixcortadellas.com/main/2009/03/20/492/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T08:31:37.213

使用**jQuery**和以下**点击**功能，它会有所帮助

```
$(document).ready(function() 
{
    $('#slectboxid option').click(function() 
    {
        var items = $(this).parent().val();
        if (items.length > 3) {
                       alert("You can only select 3 values at a time");
           $(this).removeAttr("selected");
        }
    });
   }); 
```

**编辑**：在最新的 jQuery 库中不推荐使用 use`.prop()`而不是`.removeAttr()`,`.removeAttr()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T08:37:45.130

在`formsubmit.php`第 3 行更改为以下行：

```
if (isset($options) && count($options) == 3) { 
```

然后使用以下内容修改第 26 行：

```
echo 'Please select exactly 3 options'; 
```

# apache - htaccess 重写规则问题

> ID：10410176
> 
> 赞同：0
> 
> 时间：2012-05-02T08:28:16.463
> 
> 标签：apache, .htaccess

我的 htaccess 文件中有一个重写规则，如下例所示：

```
 RewriteRule ^company\/([a-zA-Z0-9]+)\/(.+)$ comp_inf.php?cid=$1

     RewriteRule ^company\/([a-zA-Z0-9]+)\/img/(.*)$ ./img/$1 [L]
     RewriteRule ^company\/([a-zA-Z0-9]+)\/css/(.*)$ ./css/$1 [L]
     RewriteRule ^company\/([a-zA-Z0-9]+)\/js/(.*)$  ./js/$1  [L] 
```

url 链接将如下所示：

```
 http://www.example.com/company/1 
```

在谷歌搜索中，我发现了 htaccess 文件中未定义的重复页面

他们看起来像这样：

```
 http://www.example.com/company/1/page1.php
     http://www.example.com/company/1/page2.php 
```

我的问题是如何拒绝扫描这些页面以及为什么这种扫描专门针对这两个页面进行。

提前致谢。

提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:03:27.403

首先，您应该发送一个[X-Robots noindex,nofollow 标题](https://developers.google.com/webmasters/control-crawl-index/docs/robots_meta_tag)，其中包含那些意外被索引的页面。一旦这些页面不再在 google 上列出（[加快速度](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1663427)），您就可以创建一个 robots.txt，其中包含如下内容：

```
User-agent: *
Disallow: /company/*/*.php 
```

[注意http://www.example.com/company/1/](http://www.example.com/company/1/)到 page1.php 或 page2.php的非绝对链接- 例如：

```
<a href="page1.php">anchortext</a> 
```

# view - 跨多个数据库的 Sqlite 视图

> ID：10410180
> 
> 赞同：10
> 
> 时间：2012-05-02T08:28:36.807
> 
> 标签：view, sqlite

是否可以在附加了其他数据库的 Sqlite 数据库中创建 VIEW（不是临时视图）？该视图应该能够通过连接表访问所有数据库中的数据。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T08:31:51.247

不行，视图必须是临时的，否则会报错：

```
sqlite> create view view1 as select * from db2.foo union select * from main.foo;
Error: view view1 cannot reference objects in database db2
sqlite> create temp view view1 as select * from db2.foo union select * from main.foo;
sqlite> select * from view1;
... 
```

这是有道理的，因为临时视图是自动创建的`temp`数据库的一部分，它只存在于当前进程中。

**编辑：**

您可以通过以下方式列出临时表和视图（全部存储在自动创建的`temp`数据库中）：

```
sqlite> .headers on
sqlite> select * from sqlite_temp_master;
type|name|tbl_name|rootpage|sql
view|view1|view1|0|CREATE VIEW view1 as select * from db2.foo union select * from main.foo 
```

仅列出视图：

```
select * from sqlite_temp_master where type='view'; 
```

# php - 带有对话框的jquery表单（jquery中的if else循环问题）

> ID：10410182
> 
> 赞同：0
> 
> 时间：2012-05-02T08:28:38.943
> 
> 标签：php, jquery, html, jquery-ui

嗨，有一个表单要在 jquery 插件“openid”的帮助下提交。现在，当我点击 google_button 时，一切正常，但是当我点击 aol 时，它将打开对话框并提交表单（当 form.submit 返回 false 时注释掉）。当我删除评论时，aol 将正常工作，只有 aol 对话框打开并且没有提交表单，但在这种情况下也不会提交谷歌表单。

请帮帮我

==================================================== ===============================

```
<form action="example.php" method="post" >   
<input type="image" src="images/google_button.png" id='https://www.google.com/accounts/o8/id' class="google"/> 
          <input type="image" src="images/AOL_button.png" id='http://openid.aol.com/' class='aol' />
</form> 
```

==================================================== ===============================

```
 <script type="text/javascript">  
      $(document).ready(function(){
        $('form').openid(); 
      })
    </script> 
```

==================================================== ===============================

```
(function($){
  $.fn.openid = function() {
    $('input').click(function(e){
      var provider = $(this).attr('class');
     if (provider == 'aol') {
        $("#dialog").dialog();
         /*$('form').submit(function(){
             return false;   
    })*/
     }
     else{
      var provider_url = $(this).attr('id');  //get id
      var myinput = $('<input type="hidden" name="provider_url"/>').val(provider_url);
      $('form').append(myinput);
      $('form').submit();
    }  
    })
  }
})(jQuery); 
```

==================================================== ==============================

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:31:53.383

尝试在`if else`施工后发送表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:25:21.383

```
(function($){
  $.fn.openid = function() {
    $('input').click(function(e){
      var provider = $(this).attr('class');
     if (provider == 'aol') {
        $("#dialog").dialog();
         /*$('form').submit(function(){
             return false;   
    })*/
  ***return false;***   //add return false in this section
     }
     else{
      var provider_url = $(this).attr('id');  //get id
      var myinput = $('<input type="hidden" name="provider_url"/>').val(provider_url);
      $('form').append(myinput);
      $('form').submit();
    }  
    })
  }
})(jQuery); 
```

# class - Enterprise Architect 类填充颜色

> ID：10410183
> 
> 赞同：17
> 
> 时间：2012-05-02T08:28:43.423
> 
> 标签：class, colors, enterprise-architect

我有一个非常愚蠢的问题！我已经创建了类图，现在我正在尝试更改类背景填充颜色。我没有在帮助中找到任何信息如何做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-04T04:53:10.013

根本不是一个愚蠢的问题。有几种不同的方法可以做到这一点，具体取决于您想要的范围。

要更改单个图表中一个类的颜色，请在图表中右键单击它。这将打开上下文菜单，但也会打开一个迷你工具栏。在此工具栏中，左起第三个图标是类填充颜色。也可以通过选择类，然后单击 EA 显示在类（画笔）右侧的三个图标的中间来打开此工具栏。

使用此工具栏，您可以在本地更改类颜色。它不会影响类在其他当前或未来图表中的显示方式，它特定于您所在的图表。

如果要更改所有图表中类的外观，请右键单击它并选择外观 -- 默认外观。如果您在此处更改颜色，它将影响所有未来的图表和所有当前的图表，除了您为上述类指定本地颜色的图表。

最后，您可以在工具 -- 选项 -- 标准颜色中更改 EA 范围的配色方案。这会影响所有图表中的所有元素，除非您使用上述任何一种方法为元素指定了其他内容。

除此之外，如果您创建配置文件，您可以使用形状脚本为特定的原型指定不同的外观。但这是一个不同的问题。

# jsp - 付款完成后 Paypal 返回我的网站

> ID：10410188
> 
> 赞同：0
> 
> 时间：2012-05-02T08:29:08.093
> 
> 标签：jsp, paypal

我正在使用此代码将我的值传递给**paypal**。现在我的问题是，付款完成后我应该在我的页面上，这样我就可以操作一些事情，比如我应该保存**令牌**以供将来参考等等。**当用户在****付款完成**后隐式单击在**贝宝**页面中形成的链接时，我再次回到我的页面。但是这里的问题是我不能仅仅依靠用户单击或这样做。我希望它应该是隐式的任何用户干预。先谢谢了，请多指教。。。。。。

 **```
<% 

    String apiusername="USERNAME";
    String apipassword="PASSWORD";

    String truePath="http://localhost:8080/Befundo/xtraFiles/paypal/paypalResponse.jsp";
    String falsePath="http://localhost:8080/PaypalGS/paypalResponseCancel.jsp";

    String itemName="Computer Laptop";
    String quantity="2";
    String amount="100";
%>

<body >
<form name="paypalForm" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
     <input type="text" name="cmd" value="_xclick" />
     <input type="text" name="business" value="<%=apiusername %>" />
     <input type="text" name="password" value="<%=apipassword %>" />
     <input type="text" name="custom" value="1123" />
     <input type="text" name="item_name" value="<%=itemName%>" />
     <input type="text" name="amount" value="<%=amount%>"/>
     <input type="hidden" name="quantity" value="<%=quantity %>" />
     <input type="text" name="rm" value="1" />
     <input type="text" name="return" value="<%=truePath %>" />
     <input type="text" name="cancel_return" value="<%=falsePath %>" />
     <input type="text" name="cert_id" value="API Singature" />
     <input type='submit' value='Pay'>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:31:39.267

**是的，您可以通过在 paypal 配置文件中配置自动返回 url 来做到这一点。**

*要设置自动返回：*

```
1\. Log in and click the Profile subtab under My Account.
2\. Click the Website Payment Preferences link under Selling Preferences.
3\. Click the On radio button to enable Auto Return.
4\. Enter the Return URL. 
```

当您登录商家资料时，您会看到：

![偏好1](../Images/d59a6a028c7e1e5aa5cb19908405fdc3.png)

点击网站支付偏好链接后，您会看到：

![偏好2](../Images/35bf333943f5c4d608eed41592611b24.png)

在这里您可以提供自动返回 url。

这将启用自动退货，这意味着付款成功后，贝宝将自动重定向到您的网站，无需用户干预。

这是启用自动退货的贝宝指南：[https ://www.paypal.com/cgi-bin/webscr?cmd=p/mer/express_return_summary-outside](https://www.paypal.com/cgi-bin/webscr?cmd=p/mer/express_return_summary-outside)

希望这可以帮助。**

# javascript - Javascript正则表达式切断斜线之间的最后一个参数

> ID：10410189
> 
> 赞同：0
> 
> 时间：2012-05-02T08:29:14.643
> 
> 标签：javascript, regex

嗨，我是正则表达式的新手，找不到合适的解决方案：

我想截断两个斜杠“/1032/”之间的url的最后一个参数，形成url“http://www.blablabla.com/test.php/addpage/1032/”

我刚刚[http://www.blablabla.com/test.php/addpage/](http://www.blablabla.com/test.php/addpage/) ...虽然这部分对匹配并不重要...所以只需切断最后一个斜杠之间的参数...

我所做的是：

```
curr_url= "http://www.blablabla.com/test.php/addpage/1032/";
expression =/.*\/./;
alert(expression.exec(curr_url)); 
```

结果是“http://www.blablabla.com/test.php/addpage/1”现在我可以将最后一个参数剪掉，但我猜这不合理

有更好的解决方案吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:37:37.027

```
var parts=curr_url.split('/'); 
```

之后，您可以从阵列中获取任何部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:32:04.390

```
curr_url.match(/.+(\/.+\/)$/) 
```

["http://www.blablabla.com/test.php/addpage/1032/", "/1032/"]

首先贪心`.+`将所有内容捕获到最后一个斜线，然后退回到倒数第二个，因为否则模式的其余部分将失败。() 捕获此斜杠和最后一个 then 之间的所有内容，然后`\/$`告诉字符串应该在最后一个斜杠之后结束。如果您只想要数字本身，请将斜杠移到括号外。

看来我误解了你的意图。如果您需要字符串的第一部分，您可以使用下面建议的正则表达式并稍作改动：

```
curr_url.match(/(.+)\/.+/)[1] 
```

它捕获“直到斜线的所有内容，然后再捕获更多”。它将首先到达字符串中的最后一个斜杠，然后返回到上一个斜杠，因为没有“然后再多一些”，因此恰好留下了您想要的字符串部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:57:28.657

在你的表情中

```
/.*\/./ 
```

您需要最后一个点来告诉模式在斜线后面有一个字符，但这也是匹配的，因此在您的结果中。如果您删除它，它将匹配到最后一个斜线，所以没有解决方案。

但是有一种方法可以定义模式之后应该是什么，而不是匹配那些东西。它称为[前瞻断言](http://www.regular-expressions.info/lookaround.html)。

所以你可以做

```
/.*\/(?!$)/ 
```

并且`(?!$)`是一个否定的前瞻断言，这意味着“仅当字符串的结尾 (the `$`) 没有跟随时才匹配前一个斜杠”。

```
curr_url= "http://www.blablabla.com/test.php/addpage/1032/";
expression =/.*\/(?!$)/;
alert(expression.exec(curr_url)); 
```

也会返回你想要的。

# javascript - jQuery UI 最小脚本错误

> ID：10410191
> 
> 赞同：25
> 
> 时间：2012-05-02T08:29:20.487
> 
> 标签：javascript, jquery, eclipse, jquery-ui

使用 jquery-ui-1.8.19.custom.min.js 时，我从[Eclipse v3.7 (Indigo) 收到错误。](https://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases)脚本似乎工作正常，我没有从浏览器中得到任何错误。

我创建了一个自定义 jQuery UI 主题并从 jQuery 站点下载了它，但是当我将脚本放入 Eclipse 中的 Maven 项目时出现三个主要错误。

> 无法从函数或方法外部返回
> 令牌“无效的正则表达式选项”上的语法错误，没有可用的准确更正
> 语法错误，插入“）”以完成参数

还有几十个`missing semicolon`警告...

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-02T09:46:05.847

有[这个错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=349020)。[评论 15](https://bugs.eclipse.org/bugs/show_bug.cgi?id=349020#c15)有一个建议的解决方法，可以让验证器忽略某些文件，这可能值得一试。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-17T18:06:22.980

您必须忽略 JavaScript 验证器中的特定项目。

转到：菜单*Project* → *Properties* → *JavaScript* → *Include Path* → *Source*。

[请参阅以下内容](http://www.coderanch.com/t/554847/vc/JQuery-jquery-min-js-errors)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-11T11:18:58.663

对于此类错误，您无需担心。您只需要绕过验证错误，因此您需要忽略源代码中的 JavaScript Validator 库。

转到：菜单*项目*→*属性*→ *JavaScript* →*包含路径*→ *Source => 包含。单击*包含*并清理项目。现在您的项目将没有错误。

# ruby-on-rails - 在 Rails 中验证多态关联类型

> ID：10410201
> 
> 赞同：2
> 
> 时间：2012-05-02T08:30:10.200
> 
> 标签：ruby-on-rails, validation, activerecord, mongoid, polymorphic-associations

我正在开发一个控制器，它创建一个具有多态 belongs_to 关联的模型。我现在要找到它所属的模型如下：

```
 def find_polymorphic_model(classes)
   classes_names = classes.map { |c| c.name.underscore + '_id' }

   params.select { |k, v| classes_names.include?(k) }.each do |name, value|
     if name =~ /(.+)_id$/
       return $1.classify.constantize.find(value)
     end
   end

  raise InvalidPolymorphicType
end 
```

其中 classes 是关联的有效类型数组。

这种方法的问题是我必须在控制器中记住我正在创建的模型允许哪些类型。

**有没有办法找到某个多态的 belongs_to 关联允许哪些类型？或者也许我做错了，我不应该让多态控制器暴露而不将它嵌套在多态资源中（在路由器中）？**

我还认为 Rails 延迟加载类这一事实可能存在问题，因此为了能够找出这个问题，我必须在初始化时显式加载所有模型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T10:38:42.820

对于您的验证，您不必获得所有可能的多态类型。您只需要检查*指定的类型*（例如，`taggable_type`属性的值）是否合适。你可以这样做：

```
# put it in the only_polymorphic_validator.rb. I guess under app/validators/. But it's up to you.
class OnlyPolymorphicValidator < ActiveModel::EachValidator
    def validate_each(record, attribute, value)
        polymorphic_type = attribute.to_s.sub('_type', '').to_sym
        specified_class = value.constantize rescue nil
        this_association = record.class.to_s.underscore.pluralize.to_sym

        unless(specified_class.reflect_on_association(this_association).options[:as] == polymorphic_type rescue false)
            record.errors[attribute] << (options[:message] || "isn't polymorphic type")
        end
    end
end 
```

然后使用：

```
validates :taggable_type, only_polymorphic: true 
```

检查是否`:taggable_type`包含有效的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:51:48.893

回答得太快了，没有得到您正在查看多态关联。

对于一般关联，请使用[reflect_on_all_associations](http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html#M001861)。

然而，对于一些多态关联，没有办法知道所有可以实现关联的类。对于其他一些人，您需要查看类型字段。

# c++ - 这些本地函数的返回地址有什么区别？

> ID：10410208
> 
> 赞同：1
> 
> 时间：2012-05-02T08:31:04.610
> 
> 标签：c++, reference

我有以下功能（用 Visual C++ 2005 编写）

```
int &getInt_1()
{
    int a = 5;
    int &p = a;
    int p1 = p; // Line 1
    return p1;
}

int &getInt_2()
{
    int a = 5;
    int &p = a;
    return p;
} 
```

据我所知，上述两个函数都返回局部变量的地址。如果我是对的，那么我有一些问题如下：

1.  上述功能有什么区别？为什么`getInt_1()`从编译器 ( `"returning address of local variable"`) 得到警告而`getInt_2()`没有？

2.  是什么`Line 1`意思？之后`Line 1`，是否也`p1` 成为引用`a`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:34:35.563

1.  `getInt_1`返回对 p1 的引用。`getInt_2`返回对 a 的引用。两者都是相同的未定义行为，不要这样做。VC应该对两者都发出警告。
2.  不，您只需复制该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:33:04.110

1）由于您指出的，两者都是未定义的行为。这可能是 MSVS 中的一个疏忽。

2) 不，`p1`本身不会成为参考。那条线相当于`int p1 = a;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:33:38.190

在第一种情况下，编译器很容易表明您正在返回对局部变量的引用；在第二种情况下，它更难，因为它只是有一个恰好引用局部变量的任意引用。这可能就是您在第一种情况下收到警告但在第二种情况下没有收到警告的原因。

不，在第一种情况下`p1`只是一个普通的`int`，而不是一个`int&`。

# visual-studio-2010 - 提交和更新有什么区别？

> ID：10410210
> 
> 赞同：20
> 
> 时间：2012-05-02T08:31:19.410
> 
> 标签：visual-studio-2010, svn, ankhsvn

我是版本控制的新手，不确定在使用 ankhsvn 时使用[Commit](http://help.collab.net/index.jsp?topic=/com.collabnet.doc.anksvn_001/action/ankh_commit.html)与[Update之间的区别。](http://help.collab.net/index.jsp?topic=/com.collabnet.doc.anksvn_001/action/ankh_update_wc.html)

提交和更新有什么区别？我什么时候应该使用另一节经文？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-02T08:35:19.657

提交**将**您的更改**放入**存储库。

更新**从存储库中****获取**最新版本。

 *** * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-02T08:35:32.490

**更新**从存储库获取最新的到您的工作区。

**将您的更改**提交或签入到存储库中。****

 **最佳做法是先进行更新以获取最新信息，以便您可以合并更改并解决与工作区代码的任何冲突。

如果提交时存储库中有更改，您将被迫进行更新，但在尝试提交之前执行更新更快。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T08:35:56.170

提交 = 提交/确认您对存储库的更改。更新 = 从存储库中获取最新版本/更改。

当您更改文件并希望保留更改时，请将它们*提交*到存储库。

当您想从存储库中获取最新的可用版本时，请使用*update*来更新您的本地文件。

我希望这可以为您解决问题。

如果我没记错的话，更新在 TFS/Source Safe 中称为“获取最新”...

/弗雷德

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T08:34:46.467

提交会将您更改的文件上传到存储库并创建修订。而更新会将存储库中的任何修订下载到您的本地副本中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-02T08:35:15.393

**Commit**将您的更改上传到 CVS / SVN 服务器上，**Update**用服务器上的文件覆盖本地主机上的文件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-02T08:36:12.067

这是非常非常基本的 SVN 东西。阅读[SVN 书籍](http://svnbook.red-bean.com/en/1.7/svn-book.html)，或至少阅读有关基本概念和基本用法的章节。

更新意味着：“获取存储库中的所有新内容并将它们应用到我的工作副本中”。

提交意味着：“将我在工作副本中所做的所有更改都应用到存储库中”****

# java - 集群标记 OpenStreetMap java

> ID：10410217
> 
> 赞同：1
> 
> 时间：2012-05-02T08:31:49.540
> 
> 标签：java, android, openstreetmap, markerclusterer

目前在一个项目中，我使用 GoogleMaps 和基于 PhotSpot [http://code.google.com/p/android-playground-erdao/wiki/PhotSpot](http://code.google.com/p/android-playground-erdao/wiki/PhotSpot)的 ClusterMarker 。
我尝试将其转换为使用 OpenStreetMap 和 mapsforge 库（[http://code.google.com/p/mapsforge/](http://code.google.com/p/mapsforge/)），将引用的库从 googlemaps 替换为 mapsforge。

我需要在基于 ClusterMarker 的自定义类中覆盖和实现 mapsforge 库中的方法（[http://code.google.com/p/android-playground-erdao/source/browse/trunk/SampleClusterMap/src/com/erdao/ android/mapviewutil/markerclusterer/ClusterMarker.java](http://code.google.com/p/android-playground-erdao/source/browse/trunk/SampleClusterMap/src/com/erdao/android/mapviewutil/markerclusterer/ClusterMarker.java)）来自 photspot ，在这里我碰壁了。

```
@Override
    protected void drawOverlayBitmap(Canvas canvas, Point drawPosition, Projection projection,
            byte drawZoomLevel) {
    } 
```

你们中的任何人是否尝试过在 java 中的 openstreetmap 上创建集群标记覆盖，或者可能知道任何可以提供帮助的开源库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:55:28.917

感谢伟大的资源。巧合的是，我也在为 mapsforge 开发 ItemClustering 实现。

在导入 SampleClusterMap 源并对代码进行少许调整后，我得到了它的工作。这是当前项目源[http://ge.tt/7Zq63CH](http://ge.tt/7Zq63CH)的链接，大部分更改都是不言自明的。不要忘记添加 mapsforge 0.3.0 库来构建路径。

# ruby-on-rails - Mongoid：belongs_to 用户和 has_one 用户

> ID：10410219
> 
> 赞同：9
> 
> 时间：2012-05-02T08:31:52.433
> 
> 标签：ruby-on-rails, mongoid

我正在为我的应用程序使用 Mongoid，但在为用户和订阅设置正确关系时遇到问题。

我需要做的就是为 UserSubscription 模型建立一个简单的“有一个并且属于一个”关系。

```
class User
  has_many :user_subscriptions
end

class UserSubscription
  belongs_to :user

  has_one :user # user2 to which user1 is subscribed
  field :category, :String
end 
```

我想做的就是为每个用户提供一个订阅列表：

```
> user1.user_subscriptions # list of subscription objects
> user1.user_subscriptions << UserSubscription.create(:user => user2, :category => 'Test')
> user1.user_subscriptions.where(:user => user2).delete_all 
```

如何实施？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T14:18:49.223

问题是你有两个同名的关系，你的关系需要一个逆`has_one :user`关系。你总是可以尝试这样的事情：

```
class User
  include Mongoid::Document

  has_many :subscriptions
  has_many :subscribers, :class_name => "Subscription", :inverse_of => :subscriber
end

class Subscription
  include Mongoid::Document

  field :category

  belongs_to :owner, :class_name => "User", :inverse_of => :subscriptions
  belongs_to :subscriber, :class_name => "User", :inverse_of => :subscribers
end 
```

然后您应该能够执行以下操作：

```
> user1.create_subscription(:subscriber => user2, :category => "Test")
> user1.subscriptions.where(:subscriber => user2).delete_all 
```

# bash - 这个脚本是什么意思

> ID：10410227
> 
> 赞同：1
> 
> 时间：2012-05-02T08:32:38.430
> 
> 标签：bash, shell, command-prompt

我是脚本新手，我在脚本中发现了以下表达式。

```
if [ -d $_path ];then 
```

有人可以帮助我理解 -d $_path 在 if 语句中的含义吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:36:29.167

从[人测试](http://ss64.com/bash/test.html)：

```
-d FILE
    FILE exists and is a directory 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:37:30.753

测试 _path 是否为目录。

注意 bash 和 DOS 是两个完全不同的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:50:47.953

它检查的值是否`_path`是一个目录。请注意，`_path`是一个变量，而`$`是获取值操作（排序）；它不是在寻找一个名为`$_path`.

举个例子：

```
> mkdir dir
> touch file
> ls
dir/  file
> _path=dir    # set the variable `_path`
> if [ -d $_path ]; then echo yes; else echo no; fi
yes
> _path=file
> if [ -d $_path ]; then echo yes; else echo no; fi
no 
```

# javascript - IndexedDB 一个库，从多个不同的地方调用，具有不同的回调

> ID：10410230
> 
> 赞同：0
> 
> 时间：2012-05-02T08:32:55.607
> 
> 标签：javascript, asynchronous, callback, chaining

所以我有这个 JS indexedDB 库：

```
window.db = {
    name:"indexedDBname",
    varsion:0.7,
    _settings:"indexedDBobject",

    h:null, // Handler to the db

    open:function(callback,callback1) {
        var r = indexedDB.open( db.name );

        r.onupgradeneeded = function(e){ console.log(".onupgradeneeded is not yet supported by webkit"); };
        r.onsuccess = function(e){
            db.h = e.target.result;

            if( db.version !== db.h.version ) {

                var v = db.h.setVersion( db.version );
                v.onsuccess = function(e) {
                    if(db.h.objectStoreNames.contains( db._settings )) db.h.deleteObjectStore( db._settings );
                    db.h.createObjectStore(db._settings, { keyPath:"name" });
                };
                v.onfailure = db.onerror;
                v.onerror = db.onerror;
                v.onblocked = db.onerror;
            }

            // CALLBACKS
            if(typeof callback=="function" && typeof callback1=="function") callback.call(window,callback1);
            else if(typeof callback=="function" && typeof callback1!="function") callback.call(window);

        };
        r.onfailure = db.onerror;
    },
    getSettings:function(callback){ // retrieve user custom settings
        var t = db.h.transaction( [db._settings], IDBTransaction.READ_ONLY ),
            s = t.objectStore(db._settings),
            keyRange = IDBKeyRange.lowerBound(0),
            cursorRequest = s.openCursor(keyRange),
            tmp = {};

        cursorRequest.onsuccess = function(e) {
            var result = e.target.result;
            if(!!result==false) {

                // CALLBACKS
                if(typeof callback=="function") callback.call(window);

                return;
            }
            tmp[result.value.name] = result.value.value;
            result.continue();
        }
        cursorRequest.onerror = db.onerror;
    },
    onerror:function(e){ console.log("Handle and print error here:"+e); }
};

// actual run
db.open( db.getSettings, user.applySettings); 
```

我经常使用它，但正如你所看到的，那些回调看起来不太好......当我想做一系列任务甚至用它们自己的参数集调用这些函数中的任何一个时，我的代码开始看起来很不稳定，例如。 `db.open('forWhichUser',newSettingsToApplyObject, callback1, argumentForCallback1, secondOptionalArgument, callback2, etc);`

所以在过去，我会这样做：

```
db.open('userName', settingsMap);
var opts = db.getSettings();
user.downloadInfoBasedOn( opts );
user.renderInfoTo('userDataHolderId'); 
```

但是现在，由于一切都可以在不可预测的时刻开始/结束（取决于计算机性能、数据库大小等），我该如何处理所有这些异步性，以保持代码的优雅和可读性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:11:15.933

您可以使用 JavaScript 承诺/延迟模式：

1.  [http://wiki.commonjs.org/wiki/Promises/A](http://wiki.commonjs.org/wiki/Promises/A)
2.  [http://blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript-with-promises.aspx](http://blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript-with-promises.aspx)

Promises/deferreds 可以帮助您创建更容易和可读的异步代码。您可以使用 jQuery 延迟对象来实现（http://api.jquery.com/category/deferred-object/）

另一种选择是使用 story.js 包装 IndexedDB API 并以更简单的方式公开它 (http://blogs.microsoft.co.il/blogs/gilf/archive/2012/04/21/the-story-开始.aspx)

我希望你会发现这个答案有帮助。

吉尔

# asp.net - SQL 查询未按预期工作

> ID：10410235
> 
> 赞同：6
> 
> 时间：2012-05-02T08:33:08.370
> 
> 标签：asp.net, sql-server

我在 SQL Server 中使用标准的 ASP.NET Membership 表结构，并在 Management Studio 中进行了一些手动查询并运行了此查询

```
SELECT *
FROM [aspnet_Users]
WHERE UserId = '2ac5dd56-2630-406a-9fb8-d4445bc781da&cID=49' 
```

请注意末尾的 &cID=49 - 我从查询字符串中复制了它并忘记删除该部分。

然而，令我惊讶的是，它正确地返回了数据（有一个 ID 为 2ac5dd56-2630-406a-9fb8-d4445bc781da 的用户）——知道为什么会这样吗？在我看来，它不应该匹配或者更可能引发错误，因为它不应该能够转换为 Guid？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:41:26.327

出于从字符表达式转换的目的，该[`uniqueidentifier`](http://msdn.microsoft.com/en-us/library/ms187942%28v=sql.105%29.aspx)类型被视为字符类型，因此受用于转换为字符类型的截断规则的约束。也就是说，当字符表达式转换为不同大小的字符数据类型时，**对于新数据类型来说太长的值将被截断**。

因为 uniqueidentifier 类型**限制为 36 个字符**，所以超过该长度的字符将被截断。

[注意以上引用自[MSDN](http://msdn.microsoft.com/en-us/library/ms187942%28v=sql.105%29.aspx)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:39:32.597

在将字符串文字转换为 guid 文字时，解析器（非常）宽松，显然：

```
SELECT CAST('E63F4FFC-8574-428B-B6B8-95CFCA05ED52' AS uniqueidentifier)
SELECT CAST('E63F4FFC-8574-428B-B6B8-95CFCA05ED52a' AS uniqueidentifier)
SELECT CAST('E63F4FFC-8574-428B-B6B8-95CFCA05ED52-!' AS uniqueidentifier)
SELECT CAST('E63F4FFC-8574-428B-B6B8-95CFCA05ED52~#5' AS uniqueidentifier)
SELECT CAST('E63F4FFC-8574-428B-B6B8-95CFCA05ED52$3%] ' AS uniqueidentifier) 
```

都给出相同的结果，没有错误。

[这是记录在案的行为](http://msdn.microsoft.com/en-us/library/ms187942.aspx)，所以我们不能真正抱怨：

> 以下示例演示了当值对于要转换的数据类型而言太长时截断数据。因为 uniqueidentifier 类型限制为 36 个字符，所以超过该长度的字符将被截断。
> 
> ```
> DECLARE @ID nvarchar(max) = N'0E984725-C51C-4BF4-9960-E1C80E27ABA0wrong';
> SELECT @ID, CONVERT(uniqueidentifier, @ID) AS TruncatedValue; 
> ```
> 
> 这是结果集。
> 
> ```
> String                                       TruncatedValue
> -------------------------------------------- ------------------------------------
> 0E984725-C51C-4BF4-9960-E1C80E27ABA0wrong    0E984725-C51C-4BF4-9960-E1C80E27ABA0
> 
> (1 row(s) affected) 
> ```

# extjs4 - 更新条目的网格

> ID：10410236
> 
> 赞同：0
> 
> 时间：2012-05-02T08:33:19.633
> 
> 标签：extjs4

我执行了以下代码来列出网格中搜索到的项目。

```
Ext.onReady(function(){
            var rowEditing = Ext.create('Ext.grid.plugin.RowEditing');

            var searchUsers = new Ext.FormPanel({
                renderTo: "searchUsers",
                frame: true,            
                title: 'Search Users',
                bodyStyle: 'padding:5px',           
                width: 500,
                items:[{
                    xtype:'textfield',
                    fieldLabel: 'Username',
                    name: 'userName'            
                }],
                buttons:[
                        { 
                            text:'Search',
                            formBind: true,  
                            listeners: {
                                click: function(){
                                    Ext.Ajax.request({
                                        method:'GET',
                                        url : url+'/lochweb/loch/users/getUser',
                                        params : searchUsers.getForm().getValues(),
                                        success : function(response){
                                             console.log(response); //<--- the server response                           

                                             Ext.define('userList', {
                                                    extend: 'Ext.data.Model',
                                                    fields: [{ name: 'id', mapping: 'id' },
                                                             { name: 'name', mapping: 'name' },
                                                             { name: 'firstName' ,mapping:'personalInfo.firstName'},
                                                             { name: 'lastName' ,mapping:'personalInfo.lastName'}
                                                            ]
                                             });

                                             var store = Ext.create('Ext.data.Store', {
                                                    model: 'userList',
                                                    autoLoad: true,
                                                    proxy: {
                                                        type: 'ajax',
                                                        url : url+'/lochweb/loch/users/getUser',
                                                        reader: {
                                                            type: 'json',
                                                            root: 'Users'
                                                        }
                                                    }
                                             });

                                             var grid = Ext.create('Ext.grid.Panel', {
                                                    renderTo: "searchUsers",
                                                    plugins: [rowEditing],
                                                    width: 900,
                                                    height: 300,
                                                    frame: true,
                                                    title: 'Users',
                                                    store: store,
                                                    iconCls: 'icon-user',
                                                    columns: [{
                                                        text: 'ID',
                                                        width: 40,
                                                        sortable: true,
                                                        dataIndex: 'id'
                                                    }, 
                                                    {
                                                        text: 'Name',
                                                        flex: 1,
                                                        sortable: true,
                                                        dataIndex: 'name',
                                                        field: {
                                                            xtype: 'textfield'
                                                        }
                                                    },
                                                    {
                                                        text: 'FirstName',
                                                        flex: 1,
                                                        sortable: true,
                                                        dataIndex: 'firstName',
                                                        field: {
                                                            xtype: 'textfield'
                                                        }
                                                    },
                                                    {
                                                        text: 'LastName',
                                                        flex: 1,
                                                        sortable: true,
                                                        dataIndex: 'lastName',
                                                        field: {
                                                            xtype: 'textfield'
                                                        }
                                                    }]
                                                });
                                        }
                                    });
                                }
                            }
                    }
               ]

            });

            var win = new Ext.Window({
                layout:'fit',
                closable: false,
                resizable: true,
                plain: true,
                border: false,
                items: [searchUsers]
            });
            win.show();
        }); 
```

1.  如何在“**搜索用户**”窗口内调整网格
2.  在网格中添加一个图标，以便通过单击该图标，必须将网格中的值填充到输入表单以进行更新。![在此处输入图像描述](../Images/ca1b8f38361c1aac3a614e446aab3e29.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:02:20.593

在您的代码中，我发现了一些东西：

*   用于`renderTo: "searchUsers"`FormPanel 和 Grid：您将 FormPanel 添加到窗口，因此此配置不应该存在（请参阅`renderTo`文档）。所以删除它们。
*   用于`frame: true`FormPanel 和 Grid：您将窗口作为容器，因此 Form 和 Grid 一直在`framed`里面。所以删除它们。
*   您在搜索时动态添加 Grid：我建议您将结果 Grid 创建为单独的组件（不在成功的结果内），并将 Form 和 Grid 指定`items`为 window 的 ' 组件。您仍然可以使用`hidden`. 当 Ajax 成功时，您可以用返回的数据填充 Grid 并显示它。
*   “在网格中添加一个图标”：您可以在网格中指定一个新列，`columns`并使用`renderer`网格面板的配置来显示按钮。例如：

    渲染器：function(v) { return "<input type='button'.../>"; }

最后，您可以捕获`itemclick`网格事件以了解单击单元格的列是否是包含按钮的单元格，该条目将填充到您想要的位置。不要忘记将网格的选择模型指定为`cellmodel`

# ios - Apple 申请提交 - 无法填写税务信息（非美国居民）

> ID：10410238
> 
> 赞同：0
> 
> 时间：2012-05-02T08:33:29.570
> 
> 标签：ios, app-store-connect, itunes-store, itunes-app

我在下面提交了 TAX -

提交“**否**” - 您是美国公民、美国居民、美国合伙企业还是美国公司？

提交“**否**” - 您有任何美国商业活动吗？

在**下一页**我无法更改以下详细信息：

**1.个人或组织名称**& **2\. 注册国家**& **3\. 永久居留**

请帮助我如何修改这些，因为上述列中的信息不正确。我需要更改它们，苹果从哪里获取这些信息。

我的应用程序已经完成，我只是因为这一步而被卡住了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:52:00.447

这并不像应有的那么简单，但如果您已经输入了税务信息并希望更改它，您必须通过电子邮件向 Apple 提出请求，他们会准确告诉您必须填写哪些表格出去。我最近通过这个（在美国）将我的个人账户转换为企业账户，我想这个过程对你来说会是相似的。

![在此处输入图像描述](../Images/746b6e6eff9bc2c862afa83c7f5b4e20.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T00:19:18.107

税表上的**永久居留**面板不可编辑，因为它使用来自 Dun & Bradstreet 的信息。它具有您最初请求*DUNS 编号时的地址*

我怀疑其他两个细节也来自 D&B 记录。如果这三个都错了，则您的 Apple ID 可能有错误的 DUNS 详细信息。

您需要直接与他们联系 - 我刚刚在 Apple Developer 支持下通过电话进行了此操作，并被建议直接发送电子邮件`appdeveloper@dnb.com`

# multithreading - TBB::scalable_allocator、tcmalloc 和 jemalloc 之间有性能比较吗？

> ID：10410239
> 
> 赞同：1
> 
> 时间：2012-05-02T08:33:32.403
> 
> 标签：multithreading, memory, memory-management, memory-leaks, tbb

我想在多线程环境中使用内存分配器，每个线程都会占用大量内存。我应该选择哪个？这些分配器之间有什么性能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:24:38.487

“我想在多线程环境中使用内存分配器，每个线程都会占用大量内存。” - 为什么？做什么的？

“我应该选择哪个？” - 两种可能性：

1) 分析/分析您的应用程序并再次将内存要求特性与每个分配器的规格相匹配。

2) 使用每个分配器测试您的应用程序，以凭经验找出最适合您的应用程序的应用程序。

“这些分配器之间有什么性能吗？” - 我猜你的意思是“性能差异”。我几乎 100% 确定存在差异，是的。

# android - RotateAnimation.setFillAfter(true) 和 .setFillEnabled(true) 不起作用

> ID：10410247
> 
> 赞同：0
> 
> 时间：2012-05-02T08:33:53.503
> 
> 标签：android, image, animation, imageview, rotateanimation

我正在尝试`imageViews`用`rotateAnimation`. 我计算每 30 毫秒旋转的度数。如果角度发生变化，我创建旋转动画：

```
rpmAnim=new RotateAnimation((float)Rpmcurrentdegree, (float)Rpmdegree, ivNadel.getWidth()/2, ivNadel.getHeight()/2);
rpmAnim.setFillEnabled(true);
rpmAnim.setFillAfter(true); 
```

...然后我开始 imageView 的动画：

```
 ivNadel.startAnimation(rpmAnim); 
```

旋转工作正常，但是当度数**没有**改变时，它会跳回到起始位置。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:41:44.230

set the setAnimationListener on rpmAnim:

```
rpmAnim.setAnimationListener(new AnimationListener() {
        @Override
        public void onAnimationEnd(Animation arg0) {

          // here rotate the image

        }

        @Override
        public void onAnimationRepeat(Animation animation) {}
        @Override
        public void onAnimationStart(Animation animation) {}
    }); 
```

to rotate the image you **can**

1.  extends ImageView in order to create your custom image view
2.  override onDraw
3.  set your rotation angle
4.  invalidate your custom image view

the overridden `onDraw` could look like:

```
 protected void onDraw(Canvas canvas) {
     canvas.save()
     canvas.rotate(your rotation angle...)
     super.onDraw(canvas)
     canvas.restore()
 } 
```

# selenium - selenium 没有使用 xpath 找到正确的链接

> ID：10410249
> 
> 赞同：0
> 
> 时间：2012-05-02T08:33:57.020
> 
> 标签：selenium, xpath

我正在尝试删除先前测试生成的单击链接（删除链接），但我在使用 xpath 时遇到了很大困难

这是我收到的错误

```
Invalid response while accessing the Selenium Server at 'http://localhost:4444/s
elenium-server/driver/': ERROR: Element xpath=(//td[normalize-space() ='Test tit
le 2']/following-sibling::td[3]/descendant::a[.='delete']) not found 
```

这是我的测试

```
public function testdeleteStationTestCase()
    {
        $this->open("/upd8r_new/");
        $this->click("css=a > img");
        $this->waitForPageToLoad("30000");
        $this->type("name=username", "glass2");
        $this->type("name=password", "glass2");
        $this->click("name=submit");
        sleep(1);
        $this->click("xpath=(//td[normalize-space() ='Test title 2']/following-sibling::td[3]/a[.='delete'])");
        //$this->click("xpath=(//td[normalize-space() ='Test title 2']/following-sibling::td[3]/descendant::a[.='delete'][1])");

        sleep(1);

        $this->assertTrue($this->isTextPresent("Station deleted!"),"Station Deleted");
    } 
```

如您所见，我已注释掉的行我一直在尝试各种组合以使测试运行-

这是我正在测试的 html 页面-我添加了一行文本，我试图点击

```
<body>
<!-- social media header -->
<div class="main">
    <div class="header">
        Central Control Panel

    </div>

    <div class="logo">
                    <img src="http://localhost/upd8r_new/imgs/loyalty_connect2.png"/>
            </div>

    <div style="clear:both"></div>

    <ul class="Menu" id="maintab">
        <li class="selected" rel="home"><a href="http://localhost/upd8r_new/socialmedia">HOME</a>       </li>

        <li  rel="retail">
            <a href="http://localhost/upd8r_new/social_retail">RETAIL</a>       </li>

        <li   rel="stats"> <a href="http://localhost/upd8r_new/socialmedia/stats">STATS</a></li>
        <li 

            rel="social_media_settings"> <a href="http://localhost/upd8r_new/socialmedia/settings">SETTINGS</a></li>
        <li rel="logout"><a href="http://localhost/upd8r_new/login/logout">LOGOUT</a> </li>
    </ul>   

    <div style="clear:both"></div>
    <div style="text-align:left;width:980px;height:40px;background-color:#0E477A;margin:auto;padding-top:0px;">

        <div style="width:700px;text-align:left;padding-left:10px;float:left">

            <div id="logout" class="submenustyle">

            </div>
                        <div id="retail" class="submenustyle">
                <ul class="sub_menu">
                    <li><a href="http://localhost/upd8r_new/social_retail">USERS</a></li>
                    <li><a href="http://localhost/upd8r_new/social_retail/view_competitions">COMPETITIONS</a></li>

                </ul>               
            </div>
                        <div id="home" class="submenustyle">
                <ul class="sub_menu">
                    <li><a href="http://localhost/upd8r_new/socialmedia/add">ADD LIKESTATION</a></li>
                    <li><a href="http://localhost/upd8r_new/socialmedia/add_picstation">ADD PICSTATION</a></li>
                    <li><a href="http://localhost/upd8r_new/socialmedia/add_vidstation">ADD VIDSTATION</a></li>
                </ul>

            </div>
            <div id="socialmedia_users" class="submenustyle">

            </div>
            <div id="stats" class="submenustyle">
                <ul class="sub_menu">
                    <li><a href="http://localhost/upd8r_new/socialmedia/stats">STATS HOME</a></li>
                    <li><a href="http://localhost/upd8r_new/socialmedia/stats/facebook/stats">FACEBOOK STATS</a></li>

                </ul>
            </div>

            <div id="social_media_settings" class="submenustyle">
                <ul class="sub_menu">
                    <li><a href="http://localhost/upd8r_new/socialmedia/settings">SETTINGS HOME</a></li>
                    <li><a href="http://localhost/upd8r_new/socialmedia/registration_settings">NETWORKS TO USE</a></li>

                    <li><a href="http://localhost/upd8r_new/socialmedia/pre_settings">PRE REGISTRATION</a></li>
                                            <li>
                        <a href="http://localhost/upd8r_new/socialmedia/app_settings">APP SETTINGS</a>                  
                        </li>
                                    </ul>
            </div>

        </div>
        <div style="float:right;font-weight:bold;color:#fff;margin-top:12px;margin-right: 20px;">
                        Logged In As: glass2        </div>

    </div>
    <div style="clear:both"></div>

    <div style="padding-top:30px;padding-left:10px">Station deleted! </div>
    <div style="padding-left:10px">

                        <table width="700px" align="left" style="text-align:left;">
            <tr>
                <td style="font-weight:bold">Pre-Registration</td>
                <td><a href="http://localhost/upd8r_new/retail/register/80">http://localhost/upd8r_new/retail/register/80</a></td>
            </tr>

        </table>
                <div style="clear:both"></div>

        <table width="800px" align="left" style="text-align:left;">
            <tr style="font-weight:bold;background-color:#f1f1f1">
                <td colspan="6" STYLE="text-align:center;font-weight:bold">LIKESTATIONS</td>
            </tr>
            <tr style="font-weight:bold;background-color:#f1f1f1">
                <td width="10%">STATION ID</td>
                <td width="32%">STATION NAME</td>
                <td width="25%">LINK TITLE</td>
                <td width="10%">STATION STATS</td>
                <td width="15%">LAST POST</td>
                <td width="8%"></td>

            </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit/gla20311344">gla20311344</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit/gla20311344">http://localhost/upd8r_new/socialmedia/edit/gla20311344</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit/gla20311344">Webcast</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla20311344">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla20311344">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit/gla2084629867">gla2084629867</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit/gla2084629867">http://localhost/upd8r_new/socialmedia/edit/gla2084629867</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit/gla2084629867">tes this link title3</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla2084629867">STATS</a> </td>
                    <td>4 weeks ago</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla2084629867">delete</a></td>
                </tr>
                    </table>

        <div style="clear:both"></div>

        <table width="620px" align="left" style="text-align:left;">
            <tr style="font-weight:bold;background-color:#f1f1f1">
                <td colspan="5" STYLE="text-align:center;font-weight:bold">FACEBOOK PIC STATIONS</td>
            </tr>
            <tr style="font-weight:bold;background-color:#f1f1f1">
                <td width="15%">STATION ID</td>
                <td width="50%">STATION TITLE</td>
                <td width="10%">STATION STATS</td>
                <td width="15%">LAST POST</td>
                <td width="10%"></td>

            </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1079978359">gla1079978359</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1079978359">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla1079978359">STATS</a> </td>
                    <td>0</td>
                    <td>**link I'm trying to click**<a href="http://localhost/upd8r_new/socialmedia/delete/gla1079978359">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1229158969">gla1229158969</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1229158969">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla1229158969">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla1229158969">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1256364596">gla1256364596</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1256364596">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla1256364596">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla1256364596">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1529784490">gla1529784490</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1529784490">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla1529784490">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla1529784490">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla159062284">gla159062284</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla159062284">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla159062284">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla159062284">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla175038477">gla175038477</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla175038477">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla175038477">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla175038477">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1777127061">gla1777127061</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1777127061">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla1777127061">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla1777127061">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla180142977">gla180142977</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla180142977">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla180142977">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla180142977">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1950664292">gla1950664292</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1950664292">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla1950664292">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla1950664292">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1971709701">gla1971709701</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla1971709701">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla1971709701">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla1971709701">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2028774169">gla2028774169</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2028774169">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla2028774169">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla2028774169">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2035285297">gla2035285297</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2035285297">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla2035285297">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla2035285297">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2072665757">gla2072665757</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2072665757">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla2072665757">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla2072665757">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2115042517">gla2115042517</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2115042517">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla2115042517">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla2115042517">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2141659529">gla2141659529</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla2141659529">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla2141659529">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla2141659529">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla4705592">gla4705592</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla4705592">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla4705592">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla4705592">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla565900575">gla565900575</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla565900575">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla565900575">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla565900575">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla608150382">gla608150382</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla608150382">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla608150382">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla608150382">delete</a></td>
                </tr>
                            <tr>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla979271929">gla979271929</a> </td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/edit_picstation/gla979271929">Test title 2</a> </td>
                    <td><a href="http://localhost/upd8r_new/stats/home/station_stats/gla979271929">STATS</a> </td>
                    <td>0</td>
                    <td><a href="http://localhost/upd8r_new/socialmedia/delete/gla979271929">delete</a></td>
                </tr>
                    </table>

        <div style="clear:both"></div>

        <table width="520px" align="left" style="text-align:left;">
            <tr style="font-weight:bold;background-color:#f1f1f1">
                <td colspan="4" STYLE="text-align:center;font-weight:bold">FACEBOOK VIDEO STATIONS</td>
            </tr>
            <tr style="font-weight:bold;background-color:#f1f1f1">
                <td width="20%">STATION ID</td>
                <td width="60%">STATION TITLE</td>
                <td width="60%">STATION STATS</td>
                <td width="20%"></td>
            </tr>
                    </table>

        <div style="clear:both"></div>

</div>
</div>
<div class="footer">
    <div style="float:left;padding-top:20px;padding-left:20px;font-size:10px;font-family:arial"></div>
    <div style="padding-top:20px;float:right;padding-right:30px;"><img src="http://localhost/upd8r_new/imgs/excelerated.jpg"/></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:53:24.743

你的问题是`sleep(1);` 在这个地方，而不是`sleep(1);`你应该使用这个：

```
$this->waitForCondition("selenium.isElementPresent(\'css=table:contains(\'FACEBOOK PIC STATIONS\') a:contains(\'delete\')\')", "20000"); 
```

顺便说一句，当您使用 selenium RC 时，您可以使用此 css 访问您的删除链接（使用 webdriver 它不会工作，因为`:contains`它不是 css 规范的一部分）：

```
$this->click("css=table:contains('FACEBOOK PIC STATIONS') a:contains('delete')"); 
```

`sleep(1);`也用适当的`waitForCondition`命令替换所有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:20:29.210

在 Firefox 中安装“XPath Checker 4.4”附加组件。因此，对于该对象，您将使用此附加组件获得正确的 xpath..

所以，

单击该对象的 xpath=xpath

# c# - 我想创建一个安装在远程服务器上的应用程序安装程序

> ID：10410250
> 
> 赞同：2
> 
> 时间：2012-05-02T08:34:00.070
> 
> 标签：c#, .net, windows, setup-project

我想创建一个应用程序安装程序，将我的应用程序安装在远程服务器上。

基本上我希望我的安装程序将应用程序安装在 Windows 服务器上，我只需给它地址和凭据。

我已经让安装程序在本地机器上工作。但现在我希望它安装在给定的服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:34:00.017

[PSExec](http://technet.microsoft.com/en-us/sysinternals/bb897553)是您的朋友。

您可以使用它远程运行安装程序，但首先需要访问远程计算机才能安装它。

# magento - 复杂的可配置产品

> ID：10410252
> 
> 赞同：1
> 
> 时间：2012-05-02T08:34:04.227
> 
> 标签：magento, magento-1.6

这是场景。我有一个具有两个属性的可配置产品。但是，第二个属性的价格增量取决于第一个属性。价格增量是固定和百分比的组合。因此，让我们假设有问题的两个属性是尺寸和颜色 - 较大尺寸的添加量是固定的，但不同颜色的添加量是百分比。

问题在于，magento 将颜色的百分比增量添加到基本价格中，而不是价格加上大小的固定增量。

举个例子，假设我的产品有三种尺寸，小中号和大号；并且有红、绿、蓝三种颜色。中号和大号的增量分别为 5 英镑和 10 英镑，颜色的增量为绿色 5% 和蓝色 10%（根据所选尺寸应用）。我的产品的底价为 100 英镑。

购买中红色产品的客户将支付 105 英镑，但是 magento 对购买中蓝色产品的客户应用相同的价格（因为百分比增加是在选择尺寸之前计算的）。

有没有办法处理这个问题，以便在选择大小后计算正确的百分比增加？

干杯

西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:02:47.790

Generally I do not like to recommend this extension as it makes pricing in Magneto way more complicated and time consuming (I just got out of it myself and it was not the fault of the module), but I think this might be the solution for you:

[http://www.magentocommerce.com/magento-connect/simple-configurable-products.html](http://www.magentocommerce.com/magento-connect/simple-configurable-products.html)

Basically this modifies the way Configurable products are priced so that it uses the price of the simple product and not the values contained in the super attributes.

The upside is that the price of the simple product is the price that it will be sold for on the configurable page.

The downside is that it is very easy to have the website do some funky things with pricing if you are not careful. For example we had a lot of scenarios where the configurable product price was $10.00, but all the simple products price was $8\. Each item in the dropdown had a "negative upcharge" in there.

This was not the modules fault, rather carelessness of people managing the products.

# linux - 为初学者编译用户编写的源代码文件？

> ID：10410262
> 
> 赞同：0
> 
> 时间：2012-05-02T08:34:34.507
> 
> 标签：linux, fortran77

大家.. 我不是一个完全的 linux 菜鸟，我使用的是 Fedora 16，但我一直在从命令行编译程序时遇到困难，我真的很想学习如何以正确的方式去做。我有使用 Python、Ruby、Perl、PHP、Lua、bash 和其他语言的经验，最近我开始接触 Fortran 代码，问题是：每次我运行带有选项和文件名的 f77 命令时，我都会得到一个以下错误： [code] [Eddie_Nygma@localhost ~]$ f77 -S #classicpayroll.f# f77: no input files

[Eddie_Nygma@localhost ~]$ f77 -o #classicpayroll.f# f77: `-o' 参数丢失是某种语法错误，或者我该如何纠正？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-02T08:56:39.470

我很久以前使用过fortran。在 fortran 中，文件名中的第一个字母应该是 AZ 或 az。不允许使用数字或 #

# python - 我的 django 应用程序的 settings.py 文件中的这段代码有什么问题？

> ID：10410264
> 
> 赞同：0
> 
> 时间：2012-05-02T08:34:35.873
> 
> 标签：python, django, ubuntu

我正在使用 Django 1.4 和 Python 2.6，我的操作系统是 Ubuntu 11.10。我正在使用这些目录创建我的 Django 应用程序：

> 项目目录：/var/dj/oneliners/
> 
> 应用程序目录：/var/dj/oneliners/oneline/

现在我想为样式表提供静态目录，所以我配置`settings.py`如下：

```
MEDIA_ROOT = '/var/dj/oneliners/media/'

MEDIA_URL  = '/media/'

STATIC_ROOT = '/var/dj/oneliners/static/'

STATIC_URL = '/STATIC/' 
```

当我`index.html`转到`http://127.0.0.1:8000/oneline/`. 我究竟做错了什么？

您好，在此先感谢您，这是我的整个 settings.py 文件：

```
# Django settings for oneliners project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'db_oneliner',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': 'admin@ubc7',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
import os.path
MEDIA_ROOT = os.path.join(os.path.dirname(__file__), "media") 

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = os.path.join(os.path.dirname(__file__), "static")

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    "/var/dj/oneliners/static"
)
#ANONYMOUS_USER_ID = -1
# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '6h5dvw*-^hb=l*2v@sn15r36fy&amp;+mhv_+@#f=4az$-!()4hip_'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'oneliners.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'oneliners.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    "/var/dj/oneliners/mytemplates",
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    'oneline',
    'registration',
    'userena',
    'guardian',
    'easy_thumbnails',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
}
ANONYMOUS_USER_ID = -1
AUTHENTICATION_BACKENDS = (
    'userena.backends.UserenaAuthenticationBackend',
    'guardian.backends.ObjectPermissionBackend',
    'django.contrib.auth.backends.ModelBackend',
)
AUTH_PROFILE_MODULE = 'oneline.MyProfile'
EMAIL_BACKEND = 'django.core.mail.backends.dummy.EmailBackend' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:52:01.590

在开发中，您必须将特定的 URL 模式添加到`urls.py`.

[Django 文档在这里](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)详细讨论了这一点。

请注意，您应该**在生产中禁用此 url**。因此，仅在开发中启用 URL 模式，例如：

```
if settings.DEBUG:
    urlpatterns += patterns('',
        (r'^static/(?P<path>.*)$', 'django.views.static.serve',
         {'document_root': settings.STATICFILES_DIRS[0], 'show_indexes': True}),
    ) 
```

假设第一个[`STATICFILES_DIRS`](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#staticfiles-dirs)目录是包含您的 CSS（和其他静态文件）的目录。

在生产中，建议不要通过 Django 提供静态文件；通过 Apache 或更好的[Nginx](http://wiki.nginx.org/Main)来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:38:18.677

通常情况下，*无需*在其下方指定`if settings.DEBUG:`和行：[它们会在安装后自动加载](https://docs.djangoproject.com/en/1.4/howto/static-files/#serving-static-files-in-development)并`staticfiles`处于`runserver`调试模式。

您需要做的是`STATICFILES_FINDERS`找到css文件。对于你中定义的两个`settings.py`：在 中`FileSystemFinder`搜索 dirs `STATICFILES_DIRS`，`AppDirectoriesFinder`在已安装应用程序中搜索 css。

因此，将文件复制到`/var/dj/oneliners/static`或`some_installed_app/static`将做的伎俩。请注意，在开始将静态数据收集到 之前`STATIC_ROOT`，您可以简单地离开`STATIC_ROOT=''`，并且，`STATIC_ROOT`应该与`STATICFILES_DIRS`（可能包含）中定义的目录不同，因为它们在逻辑上是不同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:42:09.867

将此添加到您的 urlpatterns，它适用于我 (r'^css/(?P.*)$', 'django.views.static.serve', {'document_root': '/xxx/WebRoot/css'}) ,

# python - 为平面页面分配权限

> ID：10410268
> 
> 赞同：0
> 
> 时间：2012-05-02T08:34:49.580
> 
> 标签：python, django, permissions

我需要为 about-us 之类的平面页面分配权限。我没有它的模型，我只是安装了平面页面并从 url.py 访问它。有 django-guardian 和 django-authority 之类的选项，但我已经使用 django 基本权限开始了我的项目。

它可以处理平面页面权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:11:26.197

不，django 的默认权限设置只能处理模型级别的权限 - 例如，允许用户访问所有平面页面。对于行级权限——比如只将权限分配给 about-us 平面页面——你需要使用 django-guardian 或 django-authority 之类的东西。

Django-authority 的文档实际上以与平面页面的集成为例：

[http://packages.python.org/django-authority/create_custom_permission.html#create-a-custom-permission](http://packages.python.org/django-authority/create_custom_permission.html#create-a-custom-permission)

# javascript - 如何使 jQuery UI 滑块捕捉到预定义的值？

> ID：10410272
> 
> 赞同：6
> 
> 时间：2012-05-02T08:35:05.957
> 
> 标签：javascript, jquery, jquery-ui

我在 jQuery UI 中有一个滑块，其中有一些用户可以选择的预定义值。但是，现在，它只是从 1 到 60 并且没有使用我的值。我有以下数字：1,3,5,15,30,60

这是我的代码：

```
$(document).ready(function(){
    var valMap = [1,3,5,15,30,60];
    $("#resolution-slider").slider({
        min: 1,
        max: 60,
        values: [2],
        slide: function(event, ui) {                        
            $("#resolution").val(ui.values[0]);                
            $(".resolution-preview").html(ui.values[0]);                
        }       
    });
}); 
```

如何使滑块与我在 valMap 中的值对齐？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T10:11:19.510

为什么不这样做：

```
$(document).ready(function(){
    var valMap = [1,3,5,15,30,60];
    $("#resolution-slider").slider({
      max: valMap.length - 1, // Set "max" attribute to array length
      min: 0,
      values: [2],
      slide: function(event, ui) {
        $("#resolution").val(valMap[ui.values[0]]); // Fetch selected value from array               
        $(".resolution-preview").html(valMap[ui.values[0]]);
      }  
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T09:49:42.373

我想这就是你想要的，试试下面的代码：

```
<div id="slide"></div>

var valMap = [1,3,5,15,30,60];

$("#slide").slider({
  max: 60,
  min: 1,
  stop: function(event, ui) {
     console.log(ui.value);
  },
  slide: function(event, ui) {
    // 1,3,5,15,30,60
    return $.inArray(ui.value, valMap) != -1;
  }  
}); 
```

# c# - 如何在 Windows Phone 7 中将 Toast 通知保存到本地数据库？

> ID：10410278
> 
> 赞同：2
> 
> 时间：2012-05-02T08:35:30.833
> 
> 标签：c#, push-notification, windows-phone-7.1, mpns

我是 Windows phone 7 推送通知的新手。我可以在手机中发送和接收磁贴、吐司通知。但是，我的问题是，我想将所有这些通知保存到 windows phone7 中的本地数据库中。

当应用程序运行时，如果 toast 消息到达，我可以捕获该事件，我们可以将数据保存到本地数据库，这很好。

但是如果应用程序没有运行，并且如果我收到一条 toast 消息，我需要将此消息保存到本地数据库。我无法找到解决这个问题的方法。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:55:01.403

坏消息是你现在不能这样做（不是在 7.0 或 7.5 Mango 中）

您可以在运行 Mango (7.5) 的 WP7 设备上运行后台任务，而您的应用未运行，详见此处：[Windows Phone 7.5 Periodic Tasks](http://msdn.microsoft.com/en-us/library/hh202942%28v=vs.92%29)

但是有限制：该任务只会每 15 分钟左右触发一次，当应用程序关闭时，它无法监控 toast。

如果您控制发送 Toast 消息的服务器，那么最好的办法是让您的定期任务每 15 分钟连接一次服务器，如果有新的 Toast 消息，它会收集它们，然后将它们存储在本地数据库中.

# verilog - Verilog 4 位和

> ID：10410279
> 
> 赞同：-1
> 
> 时间：2012-05-02T08:35:32.107
> 
> 标签：verilog

有人知道这里的 PG 和 GG 变量是什么吗？

```
module sum(S, Cout,PG,GG,A,B,Cin);

wire [3:0] G,P,C;

output [3:0] S;
output Cout,PG,GG;
input [3:0] A,B;
input Cin;

assign G = A & B;
assign P = A ^ B; 
assign C[0] = Cin;
assign C[1] = G[0] | (P[0] & C[0]);
assign C[2] = G[1] | (P[1] & G[0]) | (P[1] & P[0] & C[0]);
assign C[3] = G[2] | (P[2] & G[1]) | (P[2] & P[1] & G[0]) | (P[2] & P[1] & P[0] & C[0]);
assign Cout = G[3] | (P[3] & G[2]) | (P[3] & P[2] & G[1]) | (P[3] & P[2] & P[1] & G[0]) |(P[3] & P[2] & P[1] & P[0] & C[0]);

 assign S[0] = P[0] ^ C[0];
assign S[1] = P[1] ^ C[1];
assign S[2] = P[2] ^ C[2];
assign S[3] = P[3] ^ C[3];
endmodule 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:35:02.590

您的代码是一个四位进位超前加法器单元。PG 和 GG 可以是 Group Propagate 和 Group Generate。PG 和 GG 可以交给另一个 CLA 加法器单元，将这些单元组合成一个更高位的加法器。它们被给出为

`assign PG = P[3] & P[2] & P[1] & P[0];`

`assign GG = G[3] | P[3] & G[2] | P[3] & P[2] | G[1] | P[3] & P[2] & P[1] & G[0];`

更多细节在这里。[http://en.wikipedia.org/wiki/Lookahead_Carry_Unit#16-bit_adder](http://en.wikipedia.org/wiki/Lookahead_Carry_Unit#16-bit_adder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:24:40.870

`GG`并且`PG`是`output`不是由您显示的代码驱动的端口。我想不出它们的用途。除非它们由该模块之外的分层说明符驱动（这是可能的，但不寻常），它们的值将始终是未知的 (x)。

也许最初的设计者打算使用这些输出，然后忘记删除它们。

# symfony - 简化 Controller 中的 Doctrine 代码

> ID：10410286
> 
> 赞同：0
> 
> 时间：2012-05-02T08:35:53.363
> 
> 标签：symfony, doctrine

（对不起，我的英语不好）

我是 Symfony2/Doctrine 的新手，目前正在做我的第一个项目。有没有办法简化下面的代码？

我有两个实体，一个包含订单，另一个实体包含订单状态（新、进行中、已发送……）。订单有一个“状态”字段，它与状态实体中的“状态”id 字段是一对多的。

当我创建一个新订单时，我必须为订单分配一个状态，代码如下：

```
$order = new Order();
$order->setStatus($this->getDoctrine()->getEntityManager()->getRepository('OrderBundle:Status')->findOneByStatus(0)); 
```

“0”表示状态“新”。我认为这段代码可以简化，但找不到如何做到这一点。

有任何想法吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:15:06.683

您需要的是引入实体之间的关系（例如，多对一）。查看[官方 Doctrine 文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html)。

另一种选择，如果您不想通过关系限制实体，您可以将逻辑放入[自定义实体存储库](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/working-with-objects.html)中。这将稍微减少代码量。

# ruby - ruby -e 'puts "something"' 在 Mac OS X 上不输出任何内容

> ID：10410290
> 
> 赞同：0
> 
> 时间：2012-05-02T08:36:11.980
> 
> 标签：ruby, macos, bundler

这就是在 Debian 机器上发生的事情

```
$ ruby -e 'puts "something"'
something
$ 
```

这是我所期望的。

但是，当我在我的 Mac（OS X 10.7.3）上运行相同的程序时，我得到了

```
1.9.3-p125-perf $ ruby -e "puts 'something'"

1.9.3-p125-perf $ ruby -e "print 'something'"
1.9.3-p125-perf $ rbenv shell 1.8.7-p358
1.8.7-p358 $ ruby -e "puts 'something'"

1.8.7-p358 $ ruby -e "print 'something'"
nil1.8.7-p358 $ rbenv shell system
system $ ruby -e "puts 'something'"

system $ ruby -e "print 'something'"
nilsystem $ 
```

有谁知道这里发生了什么以及我如何让 ruby​​ 再次输出有意义的东西？

我的 Ruby 版本：

1.9.3-p125-性能：`ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]`

1.8.7-p358：`ruby 1.8.7 (2012-02-08 patchlevel 358) [i686-darwin11.3.0]`

系统：`ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0]`

脚本或 IRB 可以正常工作，管道 ruby​​ 也可以：

```
1.9.3-p125-perf $ cat | ruby
puts "foo"
^D
foo 
```

它只是`ruby -e`表现得很时髦。这也发生在我的girlfirends Mac上。她使用 RVM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:50:27.817

我找到了罪魁祸首。我使用的是旧版本的[bundler-exec](https://github.com/gma/bundler-exec)。

`bundler-exec`为预定义的命令列表创建 shell 别名并将它们包装在此函数中：

```
run-with-bundler()
{
    if bundler-installed && within-bundled-project; then
        bundle exec "$@"
    else
        "$@"
    fi
} 
```

我的版本缺少引号`$@`，导致 ruby​​ 行为不端。

# asp.net - 如何从 Silverlight 获取文本框值到 aspx 页面

> ID：10410293
> 
> 赞同：1
> 
> 时间：2012-05-02T08:36:15.093
> 
> 标签：asp.net, silverlight

我在 Silverlight UserControl（在 MainPage.xaml）中定义了一个 TextBox，并在一个 aspx 页面中使用了它。现在我需要在我的 aspx 页面中获取 TextBox 的值。我怎样才能访问它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:40:26.963

你有 4 个选项：

1.  初始化参数。
2.  查询字符串。
3.  使用 HtmlPage.Document。
4.  使用对象序列化。

解决方案在以下帖子中：

[http://weblogs.asp.net/brijmohan/archive/2011/06/22/passing-parameters-between-silverlight-and-asp-net-part-1.aspx](http://weblogs.asp.net/brijmohan/archive/2011/06/22/passing-parameters-between-silverlight-and-asp-net-part-1.aspx)

另请阅读以下内容：

[将参数从 silverlight 传递到 ASP.net](https://stackoverflow.com/questions/1804250/passing-parameters-from-silverlight-to-asp-net)
[http://www.codeproject.com/Articles/233915/Passing-parameters-between-Silverlight-and-ASP-NET](http://www.codeproject.com/Articles/233915/Passing-parameters-between-Silverlight-and-ASP-NET)
[http://forums.silverlight.net/t/21071.aspx](http://forums.silverlight.net/t/21071.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:48:34.123

从 silverlight 获取价值到 aspx 页面的最佳方式是通过`InitParams`.

# php - 如何在我的 localhost php 服务器上安装 less

> ID：10410299
> 
> 赞同：1
> 
> 时间：2012-05-02T08:36:42.677
> 
> 标签：php, javascript, node.js, less, npm

根据网站lesscss.org，我需要做的就是写下这一行：

```
$ npm install less 
```

在我的 npm 里面。

我去了npm网站：[https ://github.com/isaacs/npm](https://github.com/isaacs/npm)

并下载了项目 - 我不明白我需要用它做什么。安装了 node.js，因为它被写在某个地方来安装它。这些都没有帮助。

它点击了 node.exe - 它为我打开了一个控制台：我尝试在那里写：

```
$ npm install less 
```

但这并没有做任何事情。

**我显然遗漏了一些东西，谁能告诉我如何使用 node.js ， npm 以及如何在我的服务器上获取 LESS 解析器？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:39:05.187

您需要在常规命令行上运行 npm，而不是节点控制台。

…不要写`$`, 表示提示，而不是你应该输入的东西。

# project-management - 在两台电脑上开发

> ID：10410300
> 
> 赞同：1
> 
> 时间：2012-05-02T08:36:44.553
> 
> 标签：project-management, xampp, desktop-sharing

我想有一台台式电脑和一台笔记本电脑可用于开发。我在用作主工作站的桌面上使用 XAMPP，但是我只想更改位置并能够继续在笔记本电脑上工作。似乎可以将 /htdocs 文件夹移动到 Dropbox，因此两台设备上的 XAMPP 实例将使用相同的共享文件夹。那将是部分解决方案，那么数据库问题呢，我将如何解决？我敢肯定还有其他人以类似的方式工作，所以我想要一些关于如何正确设置的指示。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:32:06.273

最好的办法是设置版本控制。鉴于您似乎假设您基本上总是联网，您可能喜欢使用 github 或 bitbucket 创建您的“中央”存储库，并使用您最喜欢的 DVCS 在存储库之间推送更改。

从概念上讲，最简单的，虽然可能不是最好的，取决于您喜欢如何开发，是通过“主”推动所有更改，并让您的两台计算机从那里拉出。使用 mercurial 或 git，您还可以直接在两台计算机上的存储库之间推送。

我使用 bitbucket 是因为它提供免费的私有存储库（github 是免费的，但免费版本只允许公共存储库）。

这也为您提供了异地备份的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:42:08.760

尝试使用 SVN 或 CVS 解决方案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:52:22.323

您可以使用虚拟化且具有高可用性的开发环境。您可以使用一些虚拟化服务，例如（amazon、Microsoft）（它们是付费服务）。

如果无法进行病毒化，您可能希望在版本控制工具中维护数据库的脚本。因此，当您在版本控制工具中切换提交数据库更改时，请在笔记本电脑上重新运行数据库脚本以使用最新信息升级数据库。同样的事情也适用于 HTTP 文件。

如果数据库创建脚本没有问题，您可能希望使用原始数据文件创建数据库快照，在切换和签出另一台机器之前，应将其签入版本控制工具。请参阅以下链接，了解您要将哪些文件签入到版本控制工具中。

`http://dev.mysql.com/doc/refman/5.0/en/replication-howto-rawdata.html`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T04:17:18.113

您可以在 Dropbox 文件夹中包含一个虚拟机。通过这种方式，您可以将开发环境封装在一个文件中，并随身携带。

我已经用 Ubuntu VM 做到了这一点，从来没有遇到过问题。

# java - Java 数据库自增主键算法

> ID：10410305
> 
> 赞同：0
> 
> 时间：2012-05-02T08:37:23.253
> 
> 标签：java, sql

我有一个带有自动增量主键的 sqlite 数据库，它通过 java 接口。由于应用程序的原因，我不能使用数据库中自动生成的主键，所以我需要为 java 中的每一行创建一个 id。

所以我的问题是，是否有一种适用于 java 的算法，我可以遵循它来为数据库创建唯一的整数 id。

我知道我可以增加等，但我需要使用回滚、溢出和间隙填充等东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:24:31.063

根据您的应用程序要求，您可以将主键 Integer 更改为 String 并使用可以轻松使用 java util 类`java.util.UUID`。它表示不可变的通用唯一标识符 (UUID)。UUID 代表一个 128 位的值。

如果应用程序具有整数主键的任何持久性。您可以编写一个产生序列号的函数。它背后的逻辑是，基本上它需要有当前序列。如果没有，则调用 db 并获取最大条目。

```
static Integer currentSequence=-1;
static Integer function primaryKeyGenerator(){
 if(currentSequence==-1){
   //Make a db call and get the max
  if(no data in table){
    currentSequence=1;
  }else
   currentSequence=rs.getInt(1);
 }
return currentSequence+=1;
} 
```

# java - 在 MyEclipse Workbench 中自动切换调试和变量/表达式视图

> ID：10410312
> 
> 赞同：0
> 
> 时间：2012-05-02T08:37:46.127
> 
> 标签：java, eclipse, myeclipse

我是初学者`MyEclispe Workbech`。`debug`当我在心情中运行我的应用程序时，`Debug`视图将自动启用，我手动启用`Expression`视图，当我按下`F6`键（`Step Over`键）或`F5`然后`Debug`自动再次启用视图。

我想要活动`Expression`视图并且不会自动更改。

（对不起，如果我使用了错误的术语或语法，我正在学习英语。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:46:37.427

转到 Window->Preferences->Run/Debug->Perspectives 上的菜单，然后选择是否希望它提示您进入调试视图或始终使用它或从不使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:16:54.753

我找到了解决这个问题的解决方案。我执行以下步骤：

1.  `Window`-> `Preferences`-> `运行/调试
2.  勾选或取消`Activate the debug view when a breakpoint is hit`勾选复选框。

通过这个解决方案，我的要求得到了解决。

# html - 从命令行删除/压缩多余的 XML/HTML 标签？

> ID：10410316
> 
> 赞同：1
> 
> 时间：2012-05-02T08:38:09.250
> 
> 标签：html, xml, formatting, pretty-print

考虑从导出中获得的这个片段：

```
<!--l. 266--><p class="indent" >
              <span 
class="ptmr8t-x-x-90">“&lt;/span><span 
class="ptmri8t-x-x-90">Blah blah blah, </span>
              <span 
class="ptmri8t-x-x-90">blah blah, blah blah blah, </span>
              <span 
class="ptmri8t-x-x-90">blah blah, blah blah, blah blah blah </span>
              <span 
class="ptmri8t-x-x-90">blah blah, blah </span>
              <span 
class="ptmri8t-x-x-90">blah blah, blah blah, blah</span>
              <span 
class="ptmri8t-x-x-90">blah blah, blah </span><span 
class="ptmr8t-x-x-90">(</span><a 
href="#X0-cite"><span 
class="ptmr8t-x-x-90">Testing </span>
              <span 
class="ptmr8t-x-x-90">Ref, </span><a 
href="#X0-cite"><span 
class="ptmr8t-x-x-90">1980</span></a></a><span 
class="ptmr8t-x-x-90">, pg.1)”&lt;/span>
         </p> 
```

* * *

编辑：我同意评论，没有一般的方法来指定什么是多余的 - 这就是我的意思：这个代码片段本质上是为了将单行表示为呈现的 HTML：

![firefox_html_render](../Images/eade95b706897d83440cb26ff8addb57.png)

...并且由于内容行中的所有“bla bla ...”都意味着采用相同的格式，我认为它的各个部分带有指定相同格式的单独跨度标签（实际上它们是相同的标签, 不改变属性，只是`<span class="ptmri8t-x-x-90">`) 是多余的——即使它们没有嵌套。

* * *

在此（例如 ）上运行 XML 格式化程序/漂亮的打印机`xml_pp -i a.xml`来缩进我们的标签将产生以下代码：

```
<!--l. 266--><p class="indent">
  <span class="ptmr8t-x-x-90">“&lt;/span>
  <span class="ptmri8t-x-x-90">Blah blah blah, </span>
  <span class="ptmri8t-x-x-90">blah blah, blah blah blah, </span>
  <span class="ptmri8t-x-x-90">blah blah, blah blah, blah blah blah </span>
  <span class="ptmri8t-x-x-90">blah blah, blah </span>
  <span class="ptmri8t-x-x-90">blah blah, blah blah, blah</span>
  <span class="ptmri8t-x-x-90">blah blah, blah </span>
  <span class="ptmr8t-x-x-90">(</span>
  <a href="#X0-cite">
    <span class="ptmr8t-x-x-90">Testing </span>
    <span class="ptmr8t-x-x-90">Ref, </span>
    <a href="#X0-cite">
      <span class="ptmr8t-x-x-90">1980</span>
    </a>
  </a>
  <span class="ptmr8t-x-x-90">, pg.1)”&lt;/span>
</p> 
```

注意这里：

*   我们有`<span class="X">text A, </span><span class="X">text B, </span>`没有意义的序列，因为它们可以简化为`<span class="X">text A, text B, </span>`
*   我们有双重嵌套`<a href="#X0-cite">`- 再次毫无意义，可以没有内部的

最终，我想运行一些东西，并获得以下“压缩”代码：

```
<!--l. 266--><p class="indent" >
              <span
class="ptmr8t-x-x-90">“&lt;/span><span
class="ptmri8t-x-x-90">Blah blah blah,
              blah blah, blah blah blah,
              blah blah, blah blah, blah blah blah
              blah blah, blah
              blah blah, blah blah, blah
              blah blah, blah </span><span 
class="ptmr8t-x-x-90">(<a
href="#X0-cite">
Testing
              Ref,
1980</a>
, pg.1)”&lt;/span>
         </p> 
```

...其中保留了文本空白（并且在每一行上分别删除了多余标签的各个部分），并且处理了诸如`<a href="#X0-cite">`中断`<span>`s 序列之类的情况；然后我可以美化为：

```
<!--l. 266--><p class="indent">
  <span class="ptmr8t-x-x-90">“&lt;/span>
  <span class="ptmri8t-x-x-90">Blah blah blah,
              blah blah, blah blah blah,
              blah blah, blah blah, blah blah blah
              blah blah, blah
              blah blah, blah blah, blah
              blah blah, blah </span>
  <span class="ptmr8t-x-x-90">(<a href="#X0-cite">
Testing
              Ref,
1980</a>
, pg.1)”&lt;/span>
</p> 
```

是否有（Linux）命令行工具可以帮助我进行描述的“压缩”？`awk`或者正则表达式脚本可以做到这一点，我猜 - 但这似乎有点复杂......

非常感谢您的任何答案，
干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:42:52.220

没有任何可以使用的预构建。

您要求更改将从标记生成的 DOM。缩小的通常情况是在不改变它所代表的模型的情况下改变标记。

您的空白保留要求还要求它保留未由标记表示的数据（因为除了 CDATA 块中的空白不会折叠）。

# sql - 在记录列表之间插入新记录

> ID：10410328
> 
> 赞同：2
> 
> 时间：2012-05-02T08:38:45.603
> 
> 标签：sql, oracle, oracle11g

我想在表中已有的记录之间插入一条记录。有超过 40000 条记录，我想把这个新记录放在第 19 位。我该怎么做？

让我们考虑一个有 5 条记录的示例：

表数据：

```
CREATE TABLE enum
  (identifier  VARCHAR2(64),
   code VARCHAR2(512),
   data VARCHAR2(4000))
/
INSERT ALL 
INTO enum VALUES ('HR_B_A', 'Halli, L6', 'Halli, L6')
INTO enum VALUES ('HR_B_A', 'Halli, L7', 'Halli, L7')
INTO enum VALUES ('HR_B_A', 'Halli, L8', 'Halli, L8')
INTO enum VALUES ('HR_B_A', 'Halli, L9', 'Halli, L9')
INTO enum VALUES ('HR_B_A', 'Halli, P6', 'Halli, P6')
INTO enum VALUES ('HR_B_A', 'Halli, P7', 'Halli, P7')
select * from dual
/ 
```

所以当我们检查表格时，我们得到：

```
SELECT * FROM enum

IDENTIFIER     CODE         DATA
----------   ---------    ---------
HR_B_A       Halli, L6    Halli, L6
HR_B_A       Halli, L7    Halli, L7
HR_B_A       Halli, L8    Halli, L8
HR_B_A       Halli, L9    Halli, L9
HR_B_A       Halli, P6    Halli, P6
HR_B_A       Halli, P7    Halli, P7 
```

当我运行选择查询时，我想要什么：

```
SELECT * from enum

IDENTIFIER     CODE         DATA
    ----------   ---------    ---------
    HR_B_A       Halli, L6    Halli, L6
    HR_B_A       Halli, L7    Halli, L7
    HR_B_A       Halli, L8    Halli, L8
    HR_B_A       Halli, L9    Halli, L9
    HR_B_A       Halli, L10   Halli, L10
    HR_B_A       Halli, P6    Halli, P6
    HR_B_A       Halli, P7    Halli, P7 
```

我能想到的唯一方法是将数据传输到表中的 L9 行（例如 enum_temp），插入 L10 行，然后传输该表中的剩余数据。但我似乎无法弄清楚查询的语法。

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T08:47:45.407

**关系数据库中的行未排序**

`ORDER BY`除非在 SELECT 中使用表达式，否则无法确保任何所需的顺序。

当您在值中混合多种类型的“信息”时，您将需要使用以下内容：

```
select *
from enum
order by regexp_replace(code, '[0-9]', ''), 
         to_number(regexp_replace(code, '[^0-9]', '')) 
```

第一个 order by 表达式按代码中不包含数字的部分排序。这样，所有`Halli, L`值都被排序在一起。然后第二个 order by 表达式按代码的数值排序（去除所有非数字字符）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T08:51:03.190

记录在表中的存储方式没有隐含的顺序。您可以在查询中使用排序以按所需顺序查看列表。

您可以添加一`POSITION`列（类型为`NUMBER`），指示记录在列表中的位置。然后，如果您想在列表的第 n 个位置插入一条记录，请执行以下操作：

```
UPDATE enum SET position = position + 1 WHERE position >= <desired nth position> 
INSERT INTO enum VALUES(<desired nth position>, ....) 
```

按顺序查看列表：

```
SELECT * FROM enum ORDER BY position ASC 
```

**编辑：** 并在 POSITION 列上添加一个索引（类型 b-tree 索引）以使您的查询更快

# jquery - 选择 jQuery 克隆元素

> ID：10410333
> 
> 赞同：2
> 
> 时间：2012-05-02T08:39:07.607
> 
> 标签：jquery, clone

我正在尝试选择已克隆的元素

```
$("THINGS TO CLONE").clone().appendTo("CONTAINER"); 
```

它应该看起来

```
> <CONTAINER>
> 
> <CLONED THING> <CLONED THING> <CLONED THING>
> 
> </CONTAINER 
```

我做到了，但是这些东西对于选择是不可见的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T08:45:14.917

那没有意义。如果你正确地克隆了你的元素，并以某种方式将它们插入到 DOM 中，那么使用 jQuery 就可以完美地选择它们。

但是，如果您想选择克隆的元素，一种方法是在将原始的内存中克隆对象放入 DOM 之前对其进行缓存。

```
var clone = $('#foo').clone();

// do stuff with clone
clone.doBackflips();

// append it to the DOM
clone.appendTo('#container'); 
```

# asp.net - 点网核

> ID：10410340
> 
> 赞同：0
> 
> 时间：2012-05-02T08:39:44.003
> 
> 标签：asp.net, web-config, dotnetnuke, custom-errors

我已经在本地主机上成功安装了 dotnetnuke 6 并且工作正常但是当我将它上传到共享托管网络服务器时它给出了错误

这是链接[http://www.pakwindow.com/pages/](http://www.pakwindow.com/pages/)

```
 <customErrors mode="Off"/> 
```

当我打开 web.config 文件时，它已经

```
 <customErrors mode="RemoteOnly" > 
```

现在我不明白发生了什么，也没有更多详细信息可能是错误的原因是我上传的网站不在根文件夹中，即 httpdocs

相反，我创建了一个名为 pages 的子文件夹，现在我已经上传了站点

有什么建议么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:05:01.913

错误消息是说如果您想查看错误的任何详细信息，您应该将 customerrors 设置为“关闭”模式。

像这样：

```
<customErrors mode="Off"/> 
```

如果这样做，您可能会看到描述性错误消息并能够修复它。

使用您现在拥有的“RemoteOnly”模式，您只会看到来自本地主机的详细错误。

# jsf - 使用 mod_proxy 的 Apache tomcat 集群为 JSF 应用程序提供不可序列化的异常

> ID：10410342
> 
> 赞同：0
> 
> 时间：2012-05-02T08:39:49.333
> 
> 标签：jsf, tomcat, cluster-computing, mod-proxy

我已经成功地使用 mod_proxy 为示例应用程序配置了集群，但是当我将此集群用于 JSF 应用程序时，我得到了不可序列化的异常：

```
java.lang.IllegalArgumentException: setAttribute: Non-serializable attribute ErrorDisplay
    at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1351)
    at org.apache.catalina.ha.session.DeltaSession.setAttribute(DeltaSession.java:647)
    at org.apache.catalina.ha.session.DeltaSession.setAttribute(DeltaSession.java:631)
    at org.apache.catalina.session.StandardSessionFacade.putValue(StandardSessionFacade.java:135)
    at com.avanza.unison.config.ApplicationRequestFilter.activityLoggingAspect(ApplicationRequestFilter.java:365)
    at com.avanza.unison.config.ApplicationRequestFilter.sessionDataAspect(ApplicationRequestFilter.java:317)
    at com.avanza.unison.config.ApplicationRequestFilter.transactionAspect(ApplicationRequestFilter.java:272)
    at com.avanza.unison.config.ApplicationRequestFilter.validURLForUser(ApplicationRequestFilter.java:244)
    at com.avanza.unison.config.ApplicationRequestFilter.authenticationAspect(ApplicationRequestFilter.java:217)
    at com.avanza.unison.config.ApplicationRequestFilter.licenseAuthentication(ApplicationRequestFilter.java:131)
    at com.avanza.unison.config.ApplicationRequestFilter.doFilter(ApplicationRequestFilter.java:113)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.avanza.unison.config.DataReloadFilter.doFilter(DataReloadFilter.java:42)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.avanza.unison.config.ApplicationRequestFilter.activityLoggingAspect(ApplicationRequestFilter.java:341)
    at com.avanza.unison.config.ApplicationRequestFilter.sessionDataAspect(ApplicationRequestFilter.java:317)
    at com.avanza.unison.config.ApplicationRequestFilter.transactionAspect(ApplicationRequestFilter.java:272)
    at com.avanza.unison.config.ApplicationRequestFilter.validURLForUser(ApplicationRequestFilter.java:244)
    at com.avanza.unison.config.ApplicationRequestFilter.authenticationAspect(ApplicationRequestFilter.java:217)
    at com.avanza.unison.config.ApplicationRequestFilter.licenseAuthentication(ApplicationRequestFilter.java:131)
    at com.avanza.unison.config.ApplicationRequestFilter.doFilter(ApplicationRequestFilter.java:113)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.ha.session.JvmRouteBinderValve.invoke(JvmRouteBinderValve.java:227)
    at org.apache.catalina.ha.tcp.ReplicationValve.invoke(ReplicationValve.java:347)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:619) 
```

将集群用于 JSF 应用程序是否有任何限制？作为例外指出一些不可序列化的类，我怎样才能使其可序列化。

```
 May 2, 2012 1:31:09 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet Faces Servlet threw exception
java.lang.IllegalArgumentException: setAttribute: Non-serializable attribute ErrorDisplay
    at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1351)
    at org.apache.catalina.ha.session.DeltaSession.setAttribute(DeltaSession.java:647)
    at org.apache.catalina.ha.session.DeltaSession.setAttribute(DeltaSession.java:631)
    at org.apache.catalina.session.StandardSessionFacade.putValue(StandardSessionFacade.java:135)
    at com.avanza.unison.config.ApplicationRequestFilter.activityLoggingAspect(ApplicationRequestFilter.java:365)
    at com.avanza.unison.config.ApplicationRequestFilter.sessionDataAspect(ApplicationRequestFilter.java:317)
    at com.avanza.unison.config.ApplicationRequestFilter.transactionAspect(ApplicationRequestFilter.java:272)
    at com.avanza.unison.config.ApplicationRequestFilter.validURLForUser(ApplicationRequestFilter.java:244)
    at com.avanza.unison.config.ApplicationRequestFilter.authenticationAspect(ApplicationRequestFilter.java:217)
    at com.avanza.unison.config.ApplicationRequestFilter.licenseAuthentication(ApplicationRequestFilter.java:131)
    at com.avanza.unison.config.ApplicationRequestFilter.doFilter(ApplicationRequestFilter.java:113)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.ha.session.JvmRouteBinderValve.invoke(JvmRouteBinderValve.java:227)
    at org.apache.catalina.ha.tcp.ReplicationValve.invoke(ReplicationValve.java:347)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:08:08.110

Q1。将集群用于 JSF 应用程序是否有任何限制？

回答：没有。

Q2。作为例外指出一些不可序列化的类，我怎样才能使其可序列化。

答：修改实现ErrorDisplay对象的类，实现Serializable。

# objective-c - 在解码对象时确定类

> ID：10410343
> 
> 赞同：2
> 
> 时间：2012-05-02T08:39:49.807
> 
> 标签：objective-c, cocoa-touch, nscoder

为了处理（几个）遗留通信协议，我尝试子类化`NSCoder`. 虽然编码工作正常，但我在解码时遇到了一些问题：协议不保留任何类型信息，但接收者“知道”消息的结构。我想知道，解码器如何确定对象（属性）属于哪个类。

对于 C 类型，这并不是真正的问题，因为可以调用`decodeIntFromKey`etc。但对于对象，必须调用`decodeObject`or `decodeObjectForKey:`。文档告诉，那`NSCoder`是实现调用`decodeValueOfObjCType:at:`，即它知道类型。也许这些信息存储在存档器等中。但在我的情况下这不是真的。

现在，我正在告诉编码器下一个属性的类是什么：

```
-(id)initWithCoder:(NSCoder *)aDecoder{
    if ([super init] != nil) {
        [aDecoder nextClass:[propertyA class]];
        [self setProperyA: [aDecoder decodeObjectForKey:kKeyPropA]];
        [aDecoder nextClass:[propertyB class]];
        [self setProperyB: [aDecoder decodeObjectForKey:kKeyPropB]];
        // etc.
    }
    return self; 
} 
```

我想，这不是一个非常优雅的解决方案。我想出的唯一其他方法是“滥用”类型信息的密钥。但是，在我的情况下，我需要密钥来确定协议中的相关对象。

因此我的问题是：解码器是否有一种优雅的方式来确定要解码的对象的类型，例如，通过回调拥有的对象？

# java - 询问运行jms程序

> ID：10410344
> 
> 赞同：0
> 
> 时间：2012-05-02T08:39:50.917
> 
> 标签：java, jms

我不明白什么不好，我需要有关此代码的帮助，所以这是代码

```
package chat;

        import javax.jms.*;
        import javax.naming.*;
        import java.io.*;
        import java.io.InputStreamReader;
        import java.util.Properties;

        public class pub implements javax.jms.MessageListener{
            private TopicSession pubSession;
            private TopicSession subSession;
            private TopicPublisher publisher;
            private TopicConnection connection;
            private String username;

            /* Constructor. Establish JMS publisher and subscriber */
            public pub(String topicName, String username, String password)
            throws Exception {
                // Obtain a JNDI connection
                Properties env = new Properties( );
                env.put(Context.SECURITY_PRINCIPAL, "guest"); 
                env.setProperty("java.naming.factory.initial", "org.jnp.interfaces.NamingContextFactory"); 
                env.setProperty("java.naming.provider.url", "localhost:1099"); 
                env.setProperty("java.naming.factory.url.pkgs", "org.jboss.naming");

                // ... specify the JNDI properties specific to the vendor

                InitialContext jndi = new InitialContext(env);

                // Look up a JMS connection factory
                TopicConnectionFactory conFactory =
                (TopicConnectionFactory)jndi.lookup("TopicConnectionFactory");

                // Create a JMS connection
                TopicConnection connection =
                conFactory.createTopicConnection(username,password);

                // Create two JMS session objects
                TopicSession pubSession =
                connection.createTopicSession(false,
                                              Session.AUTO_ACKNOWLEDGE);
                TopicSession subSession =
                connection.createTopicSession(false,
                                              Session.AUTO_ACKNOWLEDGE);

                // Look up a JMS topic
                Topic chatTopic = (Topic)jndi.lookup("topic/testTopic");

                // Create a JMS publisher and subscriber
                TopicPublisher publisher1 = 
                    pubSession.createPublisher(chatTopic);
                TopicSubscriber subscriber = 
                    subSession.createSubscriber(chatTopic);

                // Set a JMS message listener
                subscriber.setMessageListener(this);

                // Intialize the Chat application
                set(connection, pubSession, subSession, publisher1, username);

                // Start the JMS connection; allows messages to be delivered
                connection.start( );

            }
            /* Initialize the instance variables */
            public void set(TopicConnection con, TopicSession pubSess,
                            TopicSession subSess, TopicPublisher pub, 
                            String username) {
                this.connection = con;
                this.pubSession = pubSess;
                this.subSession = subSess;
                this.publisher = pub;
                this.username = username;
            }
            /* Receive message from topic subscriber */
            public void onMessage(Message message) {
                try {
                    TextMessage textMessage = (TextMessage) message;
                    String text = textMessage.getText( );
                    System.out.println(text);
                } catch (JMSException jmse){ jmse.printStackTrace( ); }
            }
            /* Create and send message using topic publisher */
            protected void writeMessage(String text) throws JMSException {
                TextMessage message = pubSession.createTextMessage( );
                message.setText(username+" : "+text);
                publisher.publish(message);
            }
            /* Close the JMS connection */
            public void close( ) throws JMSException {
                connection.close( );
            }
            /* Run the Chat client */
            public static void main(String [] args){
                try{
                    if (args.length!=3)
                        System.out.println("Topic or username missing");

                    // args[0]=topicName; args[1]=username; args[2]=password
                    pub chat = new pub("chat","temp","111");

                    // Read from command line
                    BufferedReader commandLine = new 
                      java.io.BufferedReader(new InputStreamReader(System.in));

                    // Loop until the word "exit" is typed
                    while(true){
                        String s = commandLine.readLine( );
                        if (s.equalsIgnoreCase("exit")){
                            chat.close( ); // close down connection
                            System.exit(0);// exit program
                        } else 
                            chat.writeMessage(s);
                    }
                } catch (Exception e){ e.printStackTrace( ); }
            }
        } 
```

这是我在 eclipce 中运行它时遇到的错误：

```
 javax.jms.JMSSecurityException: User: temp is NOT authenticated
        at org.jboss.mq.security.SecurityManager.authenticate(SecurityManager.java:230)
        at org.jboss.mq.security.ServerSecurityInterceptor.authenticate(ServerSecurityInterceptor.java:66)
        at org.jboss.mq.server.TracingInterceptor.authenticate(TracingInterceptor.java:613)
        at org.jboss.mq.server.JMSServerInvoker.authenticate(JMSServerInvoker.java:172)
        at org.jboss.mq.il.uil2.ServerSocketManagerHandler.handleMsg(ServerSocketManagerHandler.java:238)
        at org.jboss.mq.il.uil2.SocketManager$ReadTask.handleMsg(SocketManager.java:419)
        at org.jboss.mq.il.uil2.msgs.BaseMsg.run(BaseMsg.java:398)
        at EDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(PooledExecutor.java:756)
        at java.lang.Thread.run(Unknown Source) 
```

我不明白问题是来自 jboss 连接还是代码不正确，请我需要帮助来运行这个程序谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:44:16.840

似乎您尝试访问 JMS 提供程序的用户可能不允许访问该服务。

您确定用户名和密码正确且已被授予访问提供程序的正确权限吗？

# ios - iOS上的折叠地图效果

> ID：10410348
> 
> 赞同：1
> 
> 时间：2012-05-02T08:40:26.610
> 
> 标签：ios, mkmapview

我正在尝试将折叠效果添加到类似于此图像[http://dribbble.com/system/users/11236/screenshots/311711/app-ui.png?1321121645](http://dribbble.com/system/users/11236/screenshots/311711/app-ui.png?1321121645)中的地图的地图视图上。试图用谷歌搜索它，但没有运气。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:45:57.120

我的猜测是他们只是用褶皱/阴影/边缘覆盖图像来产生效果。实际的地图本身看起来根本不像是被操纵的。

# xml - 如何格式化日期和时间？

> ID：10410352
> 
> 赞同：1
> 
> 时间：2012-05-02T08:40:49.473
> 
> 标签：xml, datetime

我知道我的问题很不完整..我基本上是在将日期和时间写入 xml 以记录文件的创建时间..我想要的确切格式是“04/04/12 13:30:40”

我尝试了不同的方法来获得我想要的东西，我发现最接近的是使用这个..

```
 Dim Date_Time As Date = Date.Now 
```

这将显示为

![在此处输入图像描述](../Images/422731a92bbcd59c6ee0ff87b3aede90.png)

相当接近的仪式？但是当我将它变量 Date_Time 写入 XML 时，它变得完全不同.. 例如..

```
 2012-05-02T09:24:48.7005197+01:00 
```

希望有人可以帮助我..谢谢..

PS。我正在使用

```
 Dim xmlDoc As New XDocument(
          New XElement("FILE",
          New XAttribute("FileDate", Date_Time)) 
```

创建 xml。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T08:45:53.453

当您写入文件时尝试这样的事情：

```
date_time.ToString("dd/MM/yyyy HH:mm:ss") 
```

我认为如果你也想要的话，在末尾添加**tt**会给你 AM/PM 位。

只是为了添加更多信息，以下链接为您提供了所有不同日期格式的示例......可供参考......[点击我](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:05:18.310

日期格式的解释取决于某人来自的国家/地区。例如，日期 04/05/12 表示：

*   2012 年 5 月 4 日（如果您来自英国）
*   2012 年 4 月 5 日（如果您来自美国）
*   2004 年 5 月 12 日（其他人）

XML 的目的是为数据提供可扩展的交换格式。为了确保其他人理解给定日期的含义，将使用以下日期格式（[在 ISO 8601 中描述](http://www.iso.org/iso/iso_catalogue/catalogue_ics/catalogue_detail_ics.htm?csnumber=40874)）：

*   日期格式：YYYY-MM-DD
*   日期和时间格式：YYYY-MM-DDThh:mm:ss

在 XML 中使用 ISO 日期格式是一种常见的做法。您不必遵循这种做法，但这可能是一个好主意。

此日期格式的其他优点：

*   易于比较和分类
*   较大的单位写在较小的单位前面

根据我的经验，使用这种表示非常有帮助。甚至可以通过 XPath 进行简单的测试并比较不同的日期（更大或更小或介于两者之间）。

# c# - Kinect - 如何计算 1 秒内手关节的加速度

> ID：10410353
> 
> 赞同：-1
> 
> 时间：2012-05-02T08:40:49.697
> 
> 标签：c#, iphone, accelerometer, kinect, acceleration

我有一个使用 Microsoft Kinect 相机设备的应用程序。

在每一点，我都可以获得我的手在 3 维空间 ( X - Y - Z ) 中的位置，并且我想计算我的手在每个轴上每秒的加速度。

基本上，我有一个起点的坐标，也有从该起点开始的一秒钟后的坐标，我想计算我的手在这两个点之间的加速度。

`StartPoint - (x1, y1, z1)`

`EndPoint after 1 sec from StartPoint ( 30 frames ) - (x2, y2, z2)`

`Acceleration between StartPoint and EndPoint = ?`

此外，随着时间的推移，我可以获得手的所有其他坐标，但我想计算起点和终点之间时间段内的加速度。

你能解释一下或告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:59:59.853

从 StartPoint 到 EndPoint 的距离是一个具有 3 个值的向量，它可以为您提供速度（距离单位/秒）

`velocity(EndPoint.X - StartPoint.X, EndPoint.Y - StartPoint.Y, EndPoint.Z - StartPoint.Z)`

现在，如果你想要加速度，你必须对两个*速度*值做同样的事情：开始点的速度和一秒后的速度。

`acceleration(EndVelocity.X - StartVelocity.X, EndVelocity.Y - StartVelocity.Y, EndVelocity.Z - StartVelocity.Z)`

*加速度*表示每个轴（X、Y 和 Z）的加速度，用（距离单位/秒²）表示

# php - javascript和php中日期的奇怪问题

> ID：10410355
> 
> 赞同：0
> 
> 时间：2012-05-02T08:40:59.800
> 
> 标签：php, javascript, date

我对 javascript 和 php 中的日期感到困惑。

```
<?php 
$mydate = date('2012-05-02 17:00:00'); 
echo 'Today PHP  --'.$mydate;
$mytimstamp = strtotime($mydate);
echo '<br/>My PHP unix time stamp --'.$mytimstamp;
echo '<br/>'; ?>
<script type="text/javascript">
document.write('My Javascript unix time stamp --'+new Date(Number('<?php echo $mytimstamp;?>')*1000));
</script> 
```

**输出**

```
Today PHP -- 2012-05-02 17:00:00
My PHP unix time stamp --1335978000
My Javascript unix time stamp --Wed May 02 2012 22:30:00 GMT+0530 (India Standard Time) 
```

为什么我在 javascript 中得到不同的时间？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:53:51.543

如果你不改变你的时区而不是改变你的代码

```
<script type="text/javascript">
        var d = new Date();
        var offset = d.getTimezoneOffset();
        document.write('My Javascript unix time stamp --'+new Date(Number(<?php echo (intval($mytimstamp));?> + offset*60 )*1000));
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:51:20.043

除了在不同的时区外，您得到的时间相同。

在 PHP 方面，您有 GMT 时间，在 JavaScript 方面，您有印度时间。

看来你来自印度。只需确保您了解时区的概念，并将时间与时区信息或 GMT/UTC 时间一起存储。这样，您应该避免错误地使用来自不同时区的时间戳的问题。如果您知道生成时间的时区，那么以适合用户时区的形式显示此类时间变得微不足道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:47:54.917

在javascript中取决于您的浏览器。你最好在你的 javascript 上解码日期格式。您将在不同的浏览器上获得另一个不同的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:45:02.460

您的 PC 必须与运行 PHP 代码的服务器设置不同的时区。

PHP 日期/时间是使用服务器设置计算的，而 JavaScript 日期/时间是使用客户端 PC 设置计算的。

# c++ - 递增int时向量下标超出范围？

> ID：10410359
> 
> 赞同：-1
> 
> 时间：2012-05-02T08:41:06.437
> 
> 标签：c++, list, vector

如此奇怪的情况，我正在创建一个结构列表，然后我试图用新值更新列表成员之一，然后将其移回列表中。

我似乎能够在迭代器处复制结构的值就好了，但是当我尝试更新结构成员的值时（使用 int++;）它会在所有事物的向量类中引发异常。

任何关于这里可能发生的事情的解释都会有所帮助。

```
struct Blob
{
    int x;
    int y;
};

list<Blob> blob; 
// Add a Blob to blob using .push_back(); here 
for(list<Blob>::iterator iterator=blob.begin(); iterator!=blob.end(); ++iterator)
{
    Blob temp;
    temp.x = ((Blob)*iterator).x; 
    temp.y = ((Blob)*iterator).y; 
    if (temp.x < 10 - 1)
        temp.x++; /* Exception: vector: line 932 - "Vector subscript out of range"  */
    ((Rain)*iterator) = temp; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:15:16.197

如果您正在编写循环，则可能有另一种方法可以做到这一点。您可以使用[`std::for_each`](http://en.cppreference.com/w/cpp/algorithm/for_each)：

```
#include <list>
#include <algorithm>

struct Blob
{
    int x;
    int y;
};

void incrementXIfLessThanNine(Blob& blob)
{
    if(blob.x < 9)
    {
        blob.x++;
    }
}

int main()
{
    std::list<Blob> blobs;
    std::for_each(blob.begin(), blob.end(), incrementXIfLessThanNine);
    return 0;
} 
```

如果您使用的是 C++11：

```
#include <list>

struct Blob
{
    int x;
    int y;
};

int main()
{
    std::list<Blob> blobs;
    for(Blob& blob: blobs)
    {
        if(blob.x < 9)
        {
            blob.x++;
        }
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:55:15.783

当您想更新对象的现有值时，请对其进行引用。我写了一个示例代码来解释相同的

```
#include<list>
#include<iostream>
using namespace std;
struct Test
{
    int x;
    int y;
};

int main()
{
    list<Test> lTest;
    int i = 0;
    for(i=0;i<5;i++)
    {
        Test t1;
        t1.x = i;
        t1.y = i*i;
        lTest.push_back(t1);
    }

    list<Test>::iterator lIter = lTest.begin();
    for(;lIter != lTest.end();++lIter)
    {
        Test &t1 = *lIter;
        cout<<"1 Val is:"<<t1.x<<"|"<<t1.y<<endl;
        t1.x += 2;
        t1.y += 2;
        cout<<"2 Val is:"<<t1.x<<"|"<<t1.y<<endl;
    }

    lIter = lTest.begin();
    for(;lIter != lTest.end();++lIter)
    {
        Test t1 = *lIter;
        cout<<"3 Val is:"<<t1.x<<"|"<<t1.y<<endl;
    }

    return 0;
} 
```

# asp.net - 使用 ASP.NET 中的 Web 浏览器控件将 HTML 转换为 RTF（富文本）

> ID：10410361
> 
> 赞同：1
> 
> 时间：2012-05-02T08:41:10.727
> 
> 标签：asp.net, html, copy-paste, rtf

```
var webBrowser = new WebBrowser();
webBrowser.CreateControl(); // only if needed
webBrowser.DocumentText = *yourhtmlstring*;
while (_webBrowser.DocumentText != *yourhtmlstring*)
    Application.DoEvents();
webBrowser.Document.ExecCommand("SelectAll", false, null);
webBrowser.Document.ExecCommand("Copy", false, null);
*yourRichTextControl*.Paste(); 
```

上面的代码在本地计算机上运行良好，但是当我将它部署在远程计算机或共享托管网络服务器上时，复制命令根本不起作用。我查了一下，发现剪贴板总是空的，所以 RFT 文本总是空的。似乎 Web 浏览器控件`SelectAll`和`Copy`命令在部署服务器上不起作用。我正在寻找解决这个问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T00:57:17.893

我记得 Web 浏览器控件有类似的问题。我认为这与 Internet Explorer 的设置有关。尝试减少 Internet Explorer 中的安全设置。

# node.js - node.js 的进程内持久键值存储

> ID：10410364
> 
> 赞同：5
> 
> 时间：2012-05-02T08:41:34.393
> 
> 标签：node.js

我需要在我正在编写的 node.js 应用程序中存储一些元数据。我不想提出自己的文件格式并管理该文件，而是想使用进程内持久键值存储。

我正在查看 mongodb，但似乎 mongodb 必须始终在进程外运行（也就是说，您需要先启动一个 mongo 服务器，然后在 node.js 中连接到它。）我要求无论这是什么存储，它完全存在于 node.js 进程中——或者至少任何外部进程都完全由库透明地管理，并在应用程序关闭连接时终止它们。

我不太关心性能，但支持异步 IO 到存储以跟上 Node 的整个异步操作会很好。

如果商店支持索引也很好，因为我肯定会以索引有用的方式查询数据。

我很确定“sqlite”对我有用，只是我真的认为它不像键值存储那样方便。理想情况下，我应该能够用 JSON 说话，而不是 SQL。但是如果没有更好的存在，sqlite 将起作用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:37:30.473

试试 nStore。
[https://github.com/creationix/nstore](https://github.com/creationix/nstore)

它正在进行键值存储。使用也很简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-07T14:15:05.133

看看[https://github.com/sergeyksv/tingodb](https://github.com/sergeyksv/tingodb)。它与 MongoDB API 紧密兼容，因此您可以在需要时升级到 MongoDB。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T09:23:09.410

你可能有兴趣使用 redis [http://redis.io/](http://redis.io/)

有一个流行的节点助手库[https://github.com/mranney/node_redis](https://github.com/mranney/node_redis)

然后你可以这样做：

```
var redis = require("redis");
var client = redis.createClient();

client.set("foo_rand000000000000", "OK"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-03T15:27:10.403

我想你可能对[final-db](https://github.com/finalclass/finaldb)感兴趣。

FinalDB 使用文件系统来存储它的数据。它不是键值存储，而是**基于文档的**nosql 解决方案。它支持索引（地图） - 您可以在每个集合上指定**地图功能**，当然它是一个**进程中**的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-02T21:11:13.470

看看[升级](https://github.com/rvagg/node-levelup)。这是[leveldb](https://code.google.com/p/leveldb/)的包装。levelup 包装器通过 npm 安装 leveldb 并完全在您的节点进程中运行。

有许多建立在 leveldb 之上的数据库。查看[https://github.com/rvagg/node-levelup/wiki/Modules](https://github.com/rvagg/node-levelup/wiki/Modules)以获取列表。

为方便起见，您可以使用将levelup 和 leveldown 捆绑在一起的[level包](https://github.com/Level/level)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-02T09:05:39.910

怎么样...

```
var store = { };

//store 'myKey'
store.myKey = { foo: 'bar' };

//fetch 'myKey'
var x = store.myKey; 
```

此外，谷歌搜索几乎完全是你的问题标题，你会发现[http://pgte.github.com/alfred/](http://pgte.github.com/alfred/)

我真的不认为有很多特别稳定的可用。不过，外部产品非常好（例如 Redis）

# asp.net - 如果日期属性为 DateTime.MinValue，则启用 AJAX 的 WCF 服务失败

> ID：10410365
> 
> 赞同：0
> 
> 时间：2012-05-02T08:41:47.420
> 
> 标签：asp.net, vb.net, wcf

如果启用 AJAX 的 WCF 应返回一个对象，其日期属性为 Nothing，则对该服务的请求将失败。

测试.svc

```
Imports System.ServiceModel
Imports System.ServiceModel.Activation
Imports System.ServiceModel.Web
Imports System.Runtime.Serialization

<ServiceContract(Namespace:="WebApp")>
<AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)>
Public Class Test

   <OperationContract()>
   <WebGet()>
   Public Function TestOperation() As CompositeType
      Dim obj As New CompositeType
      obj.DateProp = Nothing
      obj.StringProp = "Test"
      Return obj
   End Function

End Class

<DataContract()>
Public Class CompositeType
   <DataMember()>
   Public Property DateProp() As Date
   <DataMember()>
   Public Property StringProp() As String

End Class 
```

Testform.aspx 上的脚本标签

```
<script type="text/javascript">
   $(document).ready(function () {
      $.getJSON('./Test.svc/TestOperation', function (data) {
         alert(data.d.DateProp);
      });
   });
</script> 
```

Web.config（服务模型部分）

```
<system.serviceModel>
    <behaviors>
        <endpointBehaviors>
            <behavior name="WebApp.TestAspNetAjaxBehavior">
                <enableWebScript />
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <services>   
        <service name="WebApp.Test">
        <endpoint address="" behaviorConfiguration="WebApp.TestAspNetAjaxBehavior"
        binding="webHttpBinding" contract="WebApp.Test" />
        </service>
    </services>
</system.serviceModel> 
```

Chrome 在此调用中显示以下错误消息：“加载资源失败”。

有没有人对这种行为有解释/想法，你应该如何防止这个问题？

谢谢你的建议 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:59:19.333

如果您希望能够分配`Nothing`给一个`DateTime`字段，您应该使其可以为空：

```
<DataMember()>
Public Property DateProp() As Nullable(Of DateTime) 
```

我不是 VB.NET 专家，但据我所知，VB.NET 中的关键字是[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)`Date`结构的别名（不能为空），除了 VB.NET 必须做一些黑色的巫术魔法才能让你没有分配任何东西。除了当序列化程序尝试将其序列化为 JSON 时，会引发以下异常：

> 尝试序列化参数 WebApp:TestOperationResult 时出错。InnerException 消息是“转换为 UTC 时大于 DateTime.MaxValue 或小于 DateTime.MinValue 的 DateTime 值无法序列化为 JSON。”。有关更多详细信息，请参阅 InnerException。

# wpf - 如何通过 xaml 更改动态资源值（例如触发器）

> ID：10410370
> 
> 赞同：2
> 
> 时间：2012-05-02T08:42:17.570
> 
> 标签：wpf, xaml, triggers, dynamicresource

例如，我有元素的样式，并且我想使用触发器更改特定资源

```
<Style x:Key="MyStyle" TargetType="{x:Type Tree:MyListBox}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Property}" Value="ItemSelected">
           <Setter Property="MydinamicResourceKey" Value="NewValue"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T21:44:04.990

也许尝试使用 VisualStateManager？

这是来自[Microsoft 的 ListBox Styles and Templates 页面的想法](http://msdn.microsoft.com/en-us/library/ms754242%28v=vs.110%29.aspx)

```
<Style x:Key="MyStyle" TargeType="{x:Type Tree:MyListBox}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type Tree:MyListBox}">
         <Border x:Name="Border">
           <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="SelectionStates">
                 <VisualState x:Name="Unselected"/>
                 <VisualState x:Name="Selected">
                    <Storyboard>
                       <ObjectAnimationUsingKeyFrames Storyboard.TargetName="myUIElementName"
                                                      Storyboard.TargetProperty="myUIElementProperty">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{DynamicResource MyResourceKey}"/>
                        </ObjectAnimationUsingKeyFrames>
                       </Storyboard>
                      </VisualState>
                     </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    .... more code here....
                  </Border>
                 </ControlTemplate>
                </Setter.Value>
               </Setter>
             </Style> 
```

我有一个[由 Shawn Wildermuth 编写](http://wildermuth.com/2008/7/18/Animating_Brushes_with_ObjectAnimationUsingKeyFrames)的关于此类动画/更改的教程——我仍然经常参考它。

希望这会有所帮助，并且可以使您朝着正确的方向前进。

# facebook - 使用 facebook-php-sdk 登录和注销问题

> ID：10410375
> 
> 赞同：1
> 
> 时间：2012-05-02T08:42:42.800
> 
> 标签：facebook

我正在网站上工作，我想在其中将 facebook 登录与我的网站登录系统集成。我已经在代码中集成了 facebook-php-sdk。登录功能工作正常。以下是我遇到的问题...

1.  **注销并单击登录后，Facebook 登录屏幕未打开。**
2.  **注销并刷新页面后，登录详细信息将再次显示。登录按钮消失。**
3.  **如果以上两点都解决了，那么如何通过网站维护登录会话？**

对于以上 2 点，我使用了以下代码。

```
 require 'src/facebook.php';

    $facebook = new Facebook(array(
      'appId'  => YOUR_APP_ID,
      'secret' => SECRET_KEY,
    ));

    session_start();

    if($_REQUEST['msg'] == 'logout'){
        setcookie('fbsr_'.$facebook->getAppId(), '', (time() - 3600), '/', 'domain.com');
        $sts = $facebook->destroySession();         
        session_destroy();
        header("Location: index.php");
        //echo '<meta http-equiv="refresh" content="2;url=index.php">';
    } 

    $userId = $facebook->getUser();
    if ($userId && !isset($_SESSION['fbdata'])) {
        $_SESSION['fbdata'] = array("userid" => $userId);       
    }

<?php if ($userId) {
        $userInfo = $facebook->api('/' + $userId); ?>
        Welcome <?= $userInfo['name'] ?>
    <?php } else { ?>
        <div id="fb-root"></div>
        <fb:login-button></fb:login-button>
    <?php } ?>
        <script type="text/javascript">
            window.fbAsyncInit = function() {
                FB.init({
                    appId      : '<?= YOUR_APP_ID ?>',
                    status     : true, 
                    cookie     : true,
                    xfbml      : true,
                    oauth      : true,
                });

                FB.Event.subscribe('auth.login', function(response) {
                    //window.location.reload();
                });
            };

            (function(d){
                var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
                js = d.createElement('script'); js.id = id; js.async = true;
                js.src = "//connect.facebook.net/en_US/all.js";
                d.getElementsByTagName('head')[0].appendChild(js);
            }(document));
        </script>
        <br />
        <br />
        <a href="<?php echo $_SERVER['PHP_SELF']."?msg=logout"; ?>">Logout</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:27:25.103

我在下面的问题中找到了答案。1.登出并点击登录后，facebook登录屏幕未打开。

> > Facebook cookie 没有被删除，或者我们可以说没有从 starage 中删除。为此，我在 javascript 下面使用了这个

```

    功能 removeCookie（名称，路径，域）{

        如果（getCookie（名称））

        {

            document.cookie = name + '=' + ( ( path ) ? ';path=' + path : '') + ( ( domain ) ? ';domain=' + domain : '' ) + ';expires=Thu, 1970 年 1 月 1 日 00:00:01 GMT';

        }

    }

```

这个对我有用。

2.登出并刷新页面后，再次显示登录详情。登录按钮消失。

> > 与上述问题相同的原因。

3.如果以上两点都解决了，那么如何保持整个网站的登录会话？

> > 在会话中维护 fb id，当请求注销时删除 cookie 并销毁会话。

# php - 在 Yii 的标准中如何只选择无 PK 列

> ID：10410381
> 
> 赞同：0
> 
> 时间：2012-05-02T08:43:10.143
> 
> 标签：php, yii

当我选择要选择的列时，Yii 正在选择 PK，但是当我将选择设置为 false 时，它​​可以正常工作......我该如何禁用`selecting the PK column by default`

IE 。

```
 $criteria->with = array(
        'provider' => array(
            'with' => array(
                'provider_offers' => array(
                    'select' => 'provider_id',// here it select the 'id' with the provider_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:06:44.777

它将始终被选中（当您访问另一个模型字段时需要关系）。如果您使用 CGridView 之类的小部件或其他东西，请尝试 CSqlDataProvider。

# opengl - CUDA 项目中 gluPerspective 的未解析外部符号

> ID：10410385
> 
> 赞同：1
> 
> 时间：2012-05-02T08:43:36.423
> 
> 标签：opengl, cuda, unresolved-external

实际上，我知道这是一个流行的链接问题，通常可以通过添加 #pragma(lib, "glu32.lib") 或在 Visual Studio 配置中添加 glu32.lib 来解决。

但是，我的问题很奇怪，上面的解决方案没用。

我将一些包含 OpenGL 函数（如 gluPerspective 和 gluBuild2DMipmaps）的额外文件添加到来自 CUDA SDK 的 CUDA 项目 VolumeRender 中。

编译后，我发现那些额外的文件会出现 glu 函数的 Unresolved External Symbol 错误。但是，当我将这些 glu 函数放入原始 Cpp 文件时，它工作正常。

我曾经尝试过上述两种解决方案，但没用。谁能给我一个提示来解决这个难题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:21:07.497

最后我放弃了。我试图将 CUDA 部分添加到 OpenGL 项目中。效果很好！

# c# - 更改底层 FlowDocument 的文本时，RichTextBox 丢失选择/插入符号位置

> ID：10410386
> 
> 赞同：0
> 
> 时间：2012-05-02T08:43:37.403
> 
> 标签：c#, .net, wpf

我已经为 RichTextBox 实现了“ChangeCase”键盘快捷键（如 MS WORD 中的 Shift+F3），它可以更改鼠标选择的文本，或者插入符号位置之前的最后一个单词。问题是，有时会丢失选择，或者将插入符号向左移动一个单词。一旦它改变了文本大小写而不改变插入符号的位置，那么它就永远不会改变插入符号的位置（可能是一些 WPF 的内部缓存。），所以它只会在我第一次对文本的一部分运行这个函数时发生。

使用的代码是此处[WPF Flowdocument "change case" feature](https://stackoverflow.com/questions/10380112/wpf-flowdocument-change-case-feature)中提到的解决方案。

一段有问题的代码肯定是

```
end = this.CaretPosition;
EditingCommands.MoveLeftByWord.Execute(null, this);
start = this.CaretPosition;
this.CaretPosition = end; 
```

但是我不知道为什么它有时只发生以及如何解决这个问题。我认为这与此 Execute() 方法的执行速度和一些副作用有关，因为在我的 WPF 应用程序中它只发生有时，但是当在 Winforms 中托管此 WPF 控件时，将插入符号向左移动一个单词会发生时间（如果我按住 Shift+F3，光标会逐字移动到文档的开头）

其他问题可能与更改 TextRange 的文本有关，这会导致选择丢失？但同样，它不会一直发生，我不知道如何解决它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:50:52.200

我最终有 2 个选项，忽略此错误或实施

```
MoveLeftByWord 
```

逻辑manully而不触及

```
CaretPosition 
```

# facebook - API 错误代码：Facebook 应用程序上的 191

> ID：10410390
> 
> 赞同：1
> 
> 时间：2012-05-02T08:43:54.020
> 
> 标签：facebook

[我在浏览我的应用程序http://apps.facebook.com/get-eye-rating](http://apps.facebook.com/get-eye-rating)时收到错误消息：“http://www.facebook.com/4oh4.php” 。

所有设置都正确；我之前已经创建了数千个具有相同设置的应用程序。

当我尝试直接通过[http://www.rat32.com/fruitname-a/](http://www.rat32.com/fruitname-a/)浏览时，会出现以下错误：

> 错误 获取您的眼睛评级时出错。请稍后再试。
> 
> API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序 错误消息：redirect_uri 不属于应用程序。

以前我从来没有收到过这样的错误信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:03:19.790

我删除了以前的应用程序并使用相同的设置创建了新应用程序。这可能是 facebook 内部系统错误。

# ruby - 如何在 ruby 中增强 attr_accessor？

> ID：10410391
> 
> 赞同：4
> 
> 时间：2012-05-02T08:43:56.403
> 
> 标签：ruby, attributes, metaprogramming, attr-accessor

我想实现一个（类）方法`attr_accessor_with_client_reset`，它做同样的事情`attr_accessor`，但在每个作家上它额外执行

```
@client = nil 
```

所以，例如，

```
attr_accessor_with_client_reset :foo 
```

应该产生相同的结果

```
attr_reader :foo

def foo=(value)
  @foo = value
  @client = nil
end 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T12:18:49.263

Sergio 的解决方案很好，但不必要的复杂：不需要复制 的行为`attr_reader`，您可以委托给它。并且不需要所有这个双模块包括钩子黑客。另外，`attr_accessor`需要多个名称，`attr_accessor_with_client_reset`也应该如此。

```
module AttrAccessorWithClientReset
  def attr_accessor_with_client_reset(*names)
    attr_reader *names

    names.each do |name|
      define_method :"#{name}=" do |v|
        instance_variable_set(:"@#{name}", v)
        @client = nil
      end
    end
  end
end

class Foo
  extend AttrAccessorWithClientReset

  attr_reader :client
  def initialize
    @foo = 0
    @client = 'client'
  end

  attr_accessor_with_client_reset :foo
end

f = Foo.new
f.foo    # => 0
f.client # => "client"
f.foo = 1
f.foo    # => 1
f.client # => nil 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:52:50.157

如果您有 ruby​​ 元编程方面的经验，这实际上非常简单。看一看：

```
module Ext
  def self.included base
    base.extend ClassMethods
  end

  module ClassMethods
    def attr_accessor_with_client_reset name
      define_method name do
        instance_variable_get "@#{name}"
      end

      define_method "#{name}=" do |v|
        instance_variable_set "@#{name}", v
        @client = nil
      end
    end
  end

end

class Foo
  include Ext

  attr_reader :client
  def initialize
    @foo = 0
    @client = 'client'
  end

  attr_accessor_with_client_reset :foo
end

f = Foo.new
f.foo # => 0
f.client # => "client"
f.foo = 1
f.foo # => 1
f.client # => nil 
```

如果这段代码对你来说不是很清楚，那么我强烈推荐这本书：[Metaprogramming Ruby](http://pragprog.com/book/ppmetr/metaprogramming-ruby)。

# opencv - 具有四个输入参数的卡尔曼滤波器

> ID：10410395
> 
> 赞同：6
> 
> 时间：2012-05-02T08:44:16.480
> 
> 标签：opencv, input, filter, matrix, kalman-filter

几天来，我一直在研究卡尔曼滤波器的操作，以提高我的人脸检测程序的性能。根据我收集的信息，我整理了一个代码。卡尔曼滤波器部分的代码如下。

```
int Kalman(int X,int faceWidth,int Y,int faceHeight, IplImage *img1){
CvRandState rng; 
const float T = 0.1;

// Initialize Kalman filter object, window, number generator, etc
cvRandInit( &rng, 0, 1, -1, CV_RAND_UNI );

//IplImage* img = cvCreateImage( cvSize(500,500), 8, 3 );
CvKalman* kalman = cvCreateKalman( 4, 4, 0  );

// Initializing with random guesses
// state x_k
CvMat* state = cvCreateMat( 4, 1, CV_32FC1 );
cvRandSetRange( &rng, 0, 0.1, 0 );
rng.disttype = CV_RAND_NORMAL;
cvRand( &rng, state );

// Process noise w_k
CvMat* process_noise = cvCreateMat( 4, 1, CV_32FC1 );

// Measurement z_k
CvMat* measurement = cvCreateMat( 4, 1, CV_32FC1 );
cvZero(measurement);

/* create matrix data */   
 const float A[] = {    
        1, 0, T, 0,   
        0, 1, 0, T,   
        0, 0, 1, 0,   
        0, 0, 0, 1   
    }; 

 const float H[] = {    
        1, 0, 0, 0,   
        0, 0, 0, 0,   
        0, 0, 1, 0,   
        0, 0, 0, 0   
    };

 //Didn't use this matrix in the end as it gave an error:'ambiguous call to overloaded function' 
/* const float P[] = {   
        pow(320,2), pow(320,2)/T, 0, 0,   
        pow(320,2)/T, pow(320,2)/pow(T,2), 0, 0,   
        0, 0, pow(240,2), pow(240,2)/T,   
        0, 0, pow(240,2)/T, pow(240,2)/pow(T,2)   
        }; */

 const float Q[] = {   
        pow(T,3)/3, pow(T,2)/2, 0, 0,   
        pow(T,2)/2, T, 0, 0,   
        0, 0, pow(T,3)/3, pow(T,2)/2,   
        0, 0, pow(T,2)/2, T   
        };   

 const float R[] = {   
        1, 0, 0, 0,   
        0, 0, 0, 0,   
        0, 0, 1, 0,   
        0, 0, 0, 0   
        };   

//Copy created matrices into kalman structure
memcpy( kalman->transition_matrix->data.fl, A, sizeof(A));   
memcpy( kalman->measurement_matrix->data.fl, H, sizeof(H));   
memcpy( kalman->process_noise_cov->data.fl, Q, sizeof(Q));   
//memcpy( kalman->error_cov_post->data.fl, P, sizeof(P));   
memcpy( kalman->measurement_noise_cov->data.fl, R, sizeof(R)); 

//Initialize other Kalman Filter parameters
//cvSetIdentity( kalman->measurement_matrix, cvRealScalar(1) );
//cvSetIdentity( kalman->process_noise_cov, cvRealScalar(1e-5) );
/*cvSetIdentity( kalman->measurement_noise_cov, cvRealScalar(1e-1) );*/
cvSetIdentity( kalman->error_cov_post, cvRealScalar(1e-5) );

/* choose initial state */  
kalman->state_post->data.fl[0]=X;   
kalman->state_post->data.fl[1]=faceWidth;   
kalman->state_post->data.fl[2]=Y;   
kalman->state_post->data.fl[3]=faceHeight;

//cvRand( &rng, kalman->state_post );

/* predict position of point  */
const CvMat* prediction=cvKalmanPredict(kalman,0);

//generate measurement (z_k)
cvRandSetRange( &rng, 0, sqrt(kalman->measurement_noise_cov->data.fl[0]), 0 );   
cvRand( &rng, measurement ); 
cvMatMulAdd( kalman->measurement_matrix, state, measurement, measurement );

//Draw rectangles in detected face location
cvRectangle( img1,
            cvPoint( kalman->state_post->data.fl[0], kalman->state_post->data.fl[2] ),
            cvPoint( kalman->state_post->data.fl[1], kalman->state_post->data.fl[3] ),
            CV_RGB( 0, 255, 0 ), 1, 8, 0 );

cvRectangle( img1,
            cvPoint( prediction->data.fl[0], prediction->data.fl[2] ),
            cvPoint( prediction->data.fl[1], prediction->data.fl[3] ),
            CV_RGB( 0, 0, 255 ), 1, 8, 0 );

cvShowImage("Kalman",img1);

//adjust kalman filter state
cvKalmanCorrect(kalman,measurement);

cvMatMulAdd(kalman->transition_matrix, state, process_noise, state);

return 0;
} 
```

在人脸检测部分（未示出）中，为检测到的人脸画了一个框。'X, Y, faceWidth and faceHeight' 是盒子的坐标以及传入卡尔曼滤波器的宽度和高度。“img1”是视频的当前帧。

结果：

虽然我确实从“state_post”和“prediction”数据中得到了两个新矩形（如代码中所示），但它们似乎都没有比没有卡尔曼滤波器绘制的初始框更稳定。

以下是我的问题：

1.  矩阵是否已初始化（转换矩阵 A、测量矩阵 H 等），对于这四个输入情况是否正确？（例如，四个输入的 4*4 矩阵？）
2.  我们不能将每个矩阵都设置为单位矩阵吗？
3.  我在绘制矩形之前遵循的方法理论上是否正确？我遵循了本文中的示例[以及](http://dasl.mem.drexel.edu/~noahKuntz/openCVTut9.html)不使用外部输入的“Learning OpenCV”一书。

任何有关这方面的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:45:31.830

如果您直接从图像中测量，H[] 应该是身份。如果您有 4 个测量值并且您在对角线上的某些值设为 0，那么当它不正确时，您将这些预期的测量值 (x*H) 设为 0。那么卡尔曼滤波器的创新（z-x*H）会很高。

R[] 也应该是对角的，尽管测量误差的协方差可以不同于 1。如果您有标准化坐标（宽度=高度=1），R 可能类似于 0.01。如果你在处理像素坐标，R=diagonal_ones 表示一个像素的误差，没关系。您可以尝试使用 2,3,4 等...

您的转换矩阵 A[] 应该在每一帧上传播状态，它看起来像一个由 x、y、v_x 和 v_y 组成的状态的转换矩阵。你没有在你的模型中提到速度，你只谈论测量。请注意，不要将 State（描述面部的位置）与 Measurements（用于更新状态）混淆。您的状态可以是位置、速度和加速度，您的测量值可以是图像中的 n 个点。或者人脸的 x 和 y 位置。

希望这可以帮助。

# jquery - 到达最后一个 div 时停止 .animate()

> ID：10410397
> 
> 赞同：0
> 
> 时间：2012-05-02T08:44:19.603
> 
> 标签：jquery, web-applications, jquery-mobile, jquery-animate

所以我有一个网络应用程序，其中每个面板都是 480x300（状态栏为-20px）和两个导航按钮来左右滚动。

现在一切正常，除了当您继续滚动显示的最大面板时，它会继续运行。

我想知道是否可以在 Jquery .animate() 到达最后一个面板后停止它。

[http://jsfiddle.net/gS33Y/](http://jsfiddle.net/gS33Y/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:01:02.667

嗨，**另一个演示** [http://jsfiddle.net/qpHSw/](http://jsfiddle.net/qpHSw/) **或** [http://jsfiddle.net/yEsDQ/](http://jsfiddle.net/yEsDQ/) **或** [http://jsfiddle.net/yEsDQ/show](http://jsfiddle.net/yEsDQ/show)

此示例动态计算 ul 中的 li 并据此调整动画。

**代码**

```
 var cur = 1;
var max = $(".scroll-content ul").children("li").length;

$("nav.back").click(function(){

    if (cur+1 > max) return;
    cur++;

    $("#panel").animate({
        marginLeft: "-=500px",
    }, 1000);

});

$("nav.forward").click(function(){
    if (cur-1 < 1) return;
    cur--; 
    $("#panel").animate({
        marginLeft: "+=500px",
    }, 1000);

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:50:14.387

如果它是最后一个面板，您可以将 x 坐标位置限制为某个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:51:36.877

您可以使用计数来跟踪当前显示。像这样[http://jsfiddle.net/gS33Y/3/](http://jsfiddle.net/gS33Y/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:54:02.653

您可以使用元素`data-x`上的属性`#panel`来计算面板的数量，并跟踪显示哪个面板以限制移动。此外，您应该将幻灯片边距增加 500 像素（460 宽度 + 20 像素边距 + 20 像素填充）。

试试这个：

```
var $panel = $("#panel")
$panel.data("slideCount", $("#panel li").length).data("currentSlide", 1);

$("nav.back").click(function() {
    if ($panel.data("currentSlide") < $panel.data("slideCount")) {
        $("#panel").animate({
            marginLeft: "-=500px",
        }, 1000);
        $panel.data().currentSlide++;
    }
});

$("nav.forward").click(function(){
    if ($panel.data("currentSlide") > 1) {
        $("#panel").animate({
            marginLeft: "+=500px",
        }, 1000);
        $panel.data().currentSlide--;
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/gS33Y/20/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T15:04:42.617

是否有办法检测窗口宽度何时接近并在幻灯片 5 的末尾终止 marginLeft，在右侧没有空白？

# flickr - 如何在 flickr 上找到照片的农场 ID 和其他信息

> ID：10410400
> 
> 赞同：2
> 
> 时间：2012-05-02T08:44:32.810
> 
> 标签：flickr

我试图在我的网站中显示来自我在 Flickr 中的照片集的照片。在文档中说：

> 一旦您知道照片的 ID、服务器 ID、农场 ID 和秘密（许多 API 方法返回），您就可以构建照片的源 URL。

但我只知道如何获取照片 ID。我怎样才能得到其余的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:53:49.033

最简单的 API 是 flickr.photos.search，您可以从

[http://www.flickr.com/services/api/flickr.photos.search.html](http://www.flickr.com/services/api/flickr.photos.search.html)

在那里可以找到一个示例输出。

当您获得输出时，可以通过以下方式访问照片

```
http://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}.jpg 
```

# jquery - 在添加的 div 上增量附加来自 JQuery 中的 html 源的内容

> ID：10410401
> 
> 赞同：0
> 
> 时间：2012-05-02T08:44:34.810
> 
> 标签：jquery

我在下面有一个示例 DOM，可以在其中添加新的子元素：

```
<div id='blog'>
     <div class='item-1'>html content with <b>tags</b> and more..</div>
    <div class='another-item'>more html content with <b>tags</b> and more..</div>
    <div class='item-1'>you <div id='stuff'>get the idea</div></div>
</div>

<div id='blog_article_container></div> 
```

我需要将这些子 div 分离并附加到新添加的 div 中。我需要上面看起来像这样：

```
 <div id='blog_article_container>
      <div id='content_container' class='article_brick'><div class='item-1'>html content with <b>tags</b> and more..</div></div>
      <div id='content_container' class='article_brick'><div class='another-item'>more html content with <b>tags</b> and more..</div></div>
       <div id='content-container' class='article_brick'><div class='item-1'>you <div id='stuff'>get the idea</div></div> 
```

任何帮助将不胜感激哦 Stackoverflow 之王！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:57:05.430

取每个 inner `div`，将其移动到容器中，然后`wrap`：

```
$('#blog > div').each(function() {
    $(this).appendTo('#blog_article_container')
        .wrap("<div id='content_container'class='article_brick'>");
});​ 
```

见[http://jsfiddle.net/alnitak/78BAx/](http://jsfiddle.net/alnitak/78BAx/)

注意：你真的不应该`id`对包装 div 使用相同的。

# security - 如何确保我使用的开源代码没有恶意？

> ID：10410404
> 
> 赞同：1
> 
> 时间：2012-05-02T08:45:02.867
> 
> 标签：security, open-source

我想知道如何确保开源项目中代码的安全性，尤其是那些有数千行代码的项目，包括对`popen()`或`system()`. 我怎么知道那里没有有害和恶意代码？无论如何我可以安全地检查代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:05:35.817

> 我想知道如何确定开源项目中代码的安全性

简短的回答是你不能。

是的，理论上，您可以检查整个代码库并对其进行审核，而使用专有代码则无法做到这一点，但是谁有时间呢？另一方面，许多较大的项目往往有大量的志愿者贡献者一直在注视着代码，而运行它们的组织（例如 Apache 和 GNU）表面上具有良性动机，所以我认为恶意代码可能会很快就能找到并标记。

话虽如此，我可以想到[一个完全灾难性的安全漏洞](http://www.debian.org/security/2008/dsa-1571)，它影响了开源软件并且在两年内未被检测到。它的出现正是*因为*第三方有可能修改一个极其复杂（并且写得不好）的开源产品。进行修改的人不明白他们在做什么。当他们可以阅读代码时，谁会想到这是可能的......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T09:32:26.753

您永远无法 100% 确定任何项目的任何代码的安全性，无论是否开源。在使用不是您自己编写的任何代码或软件时，您不可避免地会假设第三方作者有一定程度的信任。如果项目是开源的，您可以根据自己的意愿审核他们的代码，但正如其他响应者已经指出的那样，您不太可能有时间/资源来执行完整的逐行检查。

您可能会发现 Ken Thompson 的“对信任的反思”文章很有趣，可以进一步思考以下问题：

[http://cm.bell-labs.com/who/ken/trust.html](http://cm.bell-labs.com/who/ken/trust.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T08:48:16.570

因为它是开源的，所以您可以检查代码。与其他人一样，因此安全性可能比封闭源代码的安全性要好得多，在封闭源代码中，（非常）有限数量的人可以看到代码。您的版本控制系统 (git) 计算校验和以检测更改的代码。

通常在源代码上寻找十分钟就足以决定不信任软件。在有许多替代品的地方，这就足够了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T09:24:30.907

我还应该补充一点，开源项目中明显（并且理论上是可验证的）缺乏恶意代码并不能保证它们的安全性。

原因是可被恶意输入利用的**安全漏洞。**

例如，您最喜欢的开源图片/文档/任何查看器（或 Web 浏览器）可能存在一个或多个这些错误。如果您使用它打开恶意制作的文件，您可能会被盗用。

虽然我不能肯定地说开源软件比商业软件有更多的安全漏洞，但我会警告你，如果它不是一个非常受欢迎的项目，并且如果没有人为它的安全缺陷负责，导致你上当，很有可能存在这样的错误，并且很少有人对它们感兴趣并修复它们。我的意思是，程序员喜欢构建。好有趣。安全性很难，而且通常是次要的。

# android - 如何在 android 中停止滑盖手机中的传感器？

> ID：10410410
> 
> 赞同：-1
> 
> 时间：2012-05-02T08:45:46.577
> 
> 标签：android, slider, android-manifest, sensors

我开发了一个不需要传感器的应用程序。

为此我使用，

**清单文件中的android:screenOrientation="nosensor"**。

但是，在我打开滑块时在滑动设备中它不起作用。所以请给我一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:51:39.563

您可以查看 android:configChanges 属性。通过调用 android:configChanges="keyboardHidden" 您可以自己处理键盘更改（通过 onConfigurationChanged 方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:08:45.970

添加 configChanges 并使用 `onConfigurationChanged`

```
<activity
    android:name=".ABC"
    android:configChanges="orientation|keyboardHidden|screenSize"
    >
    </activity> 
```

配置更改功能被覆盖：

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);
            setContentView(R.layout.main);
    } 
```

添加所有三个并检查它。screenSize 是从 API13 添加的，是捕捉滑块方向变化所必需的。

# bash - 这个 bash 脚本是什么意思

> ID：10410411
> 
> 赞同：1
> 
> 时间：2012-05-02T08:45:48.827
> 
> 标签：bash, shell

我在脚本中找到了以下代码行。有人可以解释一下下面这行代码是什么意思吗？

基本上，这一行的目的是找到一组要归档的文件。由于我不熟悉 bash 脚本，所以我很难理解这行代码。

```
_filelist=`cd ${_path}; find . -type f -mtime ${ARCHIVE_DELAY} -name "${_filename}" -not -name "${_ignore_filename}" -not -name "${_ignore_filename2}"` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T08:54:34.000

让我们分解一下：

`cd ${_path}`: 更改存储在`${_path}`变量中的目录

`find`用于根据以下条件查找文件：

*   `.`: 查看当前目录并递归遍历所有子目录
*   `-type f`：仅查找常规文件（不是目录）
*   `-mtime ${ARCHIVE_DELAY}``${ARCHIVE_DELAY}*24`: 查找几小时前最后修改的文件
*   `-name "${_filename}"`: 查找名称匹配的文件`${_filename}`
*   `-not -name "${_ignore_filename}"`: 不查找名称匹配的文件`${_ignore_filename}`
*   `-not -name "${_ignore_filename2}"`: 不查找名称匹配的文件`${_ignore_filename2}`

找到的所有文件都存储在一个名为`_filelist`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T08:51:43.680

反引号 (`) 符号将命令的输出分配给变量。
您的脚本将您获得的内容分配给 $_filelist：

1.  将目录更改为 $_path
2.  在当前目录 (.) 中查找文件 (-type f) 其中
    1.  名称是 $_filename （我想是一种模式）
    2.  名称不是 $_ignore_filename 或 $_ignore_filename2

我认为您也可以将其更改为`find ${_path} ...`不使用 cd，但请尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:57:11.447

```
_filelist=`somecode` 
```

使变量 _filelist 包含命令 somecode 的**输出**。

在这种情况下，Somecode 主要是一个查找命令，它递归地搜索文件。

```
find . -type f -mtime ${ARCHIVE_DELAY} -name "${_filename}" -not -name "${_ignore_filename}" -not -name "${_ignore_filename2}"

find . 
```

搜索当前目录，但这只是在更改为 _path 之前。

```
-type f 
```

仅在普通文件中搜索（不是目录、套接字等）

```
-mtime 
```

指定该文件的修改时间，与 ${ARCHIVE_DELAY} 相同

```
-name explains 
```

本身，必须是“${_filename}”

```
-not name 
```

我猜也解释了自己。

所以整个部分将变量 filelist 设置为文件，通过一些标准找到：名称、年龄和类型。

# coldfusion - 在 ColdFusion 中定义组件范围变量

> ID：10410412
> 
> 赞同：1
> 
> 时间：2012-05-02T08:45:49.730
> 
> 标签：coldfusion

如何在组件的“init”函数中定义一个变量，我可以在所有组件函数中访问该变量。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T09:06:56.890

使用变量作用域，这是组件私有的，并且在组件内的任何函数中都可用

```
function init(somevalue) {
  variables.somevalue = arguments.somevalue
}

function getSomeValue() {
  return variables.somevalue;
} 
```

# java - 对多个项目使用公共源文件夹，并避免使用绝对路径

> ID：10410416
> 
> 赞同：2
> 
> 时间：2012-05-02T08:46:29.073
> 
> 标签：java, eclipse, classpath, relative-path

我需要有一个 lib-project (myLib) 和几个应该使用来自 myLib 的源代码的应用程序项目。我在配置 Eclipse 时遇到了麻烦。

所需的项目树是这样的：

```
myProject
   /src
      ..some files..
   /bin

myLib
   /src
      ..some files..
   /bin 
```

现在我正在尝试配置`myProject`的类路径，使其使用来自`myLib/src`.

如果我使用 Eclipse 的 GUI 添加链接源（**UPD：**我以这种方式添加到源文件夹的链接：*右键单击项目*->*构建路径*->*配置构建路径*->*转到“源”选项卡*->*按下按钮“链接Source..."* ->*指定`myLib/src`文件夹名称的路径：" `lib_src`"* )，然后我得到 的绝对路径`myLib/src`，即以下内容：

**`myProject/.classpath`**：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="lib_src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

**`myProject/.project`**：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>data_manager__gui</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
    <linkedResources>
        <link>
            <name>lib_src</name>
            <type>2</type>
            <location>/HERE/IS/FULL/PATH/TO/myLib/src</location>
        </link>
    </linkedResources>
</projectDescription> 
```

正如我已经说过的，我需要避免使用绝对路径。`myLib/src`所以，我需要这样指定路径：`../myLib/src`

然后我尝试手动指定 myLib/src 的路径，但是如果我在**`.classpath`**这样的行中添加：

```
<classpathentry kind="src" path="../myLib/src"/> 
```

然后 Eclipse 认为 .classpath 完全损坏，并将其重置为以下空白默认值：

```
<classpath>
    <classpathentry kind="src" path=""/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

然后我尝试更改文件中的路径**`.project`**，但文件中似乎完全不支持相对路径**`.project`**：Eclipse can't find my `myLib/src`，我尝试了很多变体。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:50:01.613

我不确定您是如何添加项目引用的，但就我而言，路径是相对的。

这是`.classpath`一个名为的项目`Adarsh`，它引用了另一个名为 的 Java 项目`raroscope`。

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
    <classpathentry combineaccessrules="false" kind="src" path="/raroscope"/>
    <classpathentry kind="lib" path="geocoder-java-0.9.jar" sourcepath="geocoder-java-0.9-sources.jar"/>
    <classpathentry kind="lib" path="commons-logging.jar"/>
    <classpathentry kind="lib" path="gson-2.1.jar"/>
    <classpathentry kind="lib" path="commons-lang.jar"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

您应该右键单击您的项目`myProject`，选择 Java Build Path > Projects 并添加`myLib`（`raroscope`此处），如下所示。

![在此处输入图像描述](../Images/a0806f98b61273f7b2c8042570f977a2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:16:29.500

将 .project 文件中链接资源的路径替换为：

```
<linkedResources>
    <link>
        <name>lib_src</name>
        <type>2</type>
        <locationURI>PARENT-1-PROJECT_LOC/myLib/src</locationURI>
    </link>
</linkedResources> 
```

它是`PARENT-1`使 Eclipse 从项目目录路径向上查找一个目录以查找您的库目录的修饰符。

# postgresql - PostreSQL 错误：函数 AVG（字符变化）不存在

> ID：10410417
> 
> 赞同：8
> 
> 时间：2012-05-02T08:46:29.247
> 
> 标签：postgresql, select, average

我想从 PostgreSQL 中的一列中计算平均数

```
SELECT AVG(col_name) 
From TableName 
```

它给了我这个错误：

```
ERROR: function avg (character varying) does not exist

LINE 1: SELECT AVG(col_name) 
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T08:50:19.967

将数字存储在数字字段、整数、小数或其他任何内容中。但不在 text/varchar 字段中。

检查所有[数字数据类型](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)的手册。

* * *

讨厌的解决方法：将一些记录转换为数值并将其他记录保留为文本。例子：

```
/*
create temp table foo AS
SELECT x FROM (VALUES('x'),('1'),('2')) sub(x);
*/

WITH cte AS (
SELECT
    CASE 
        WHEN x ~ '[0-9]' THEN CAST(x AS decimal) -- cast to numeric field
    END AS num,
    CASE 
        WHEN x ~ '[a-zA-Z]' THEN x
    END AS a
FROM foo
)
SELECT AVG(num), COUNT(a) FROM cte; 
```

# python - 加强python UDP服务器

> ID：10410419
> 
> 赞同：4
> 
> 时间：2012-05-02T08:46:36.077
> 
> 标签：python, network-programming, udp, robustness

我是 python (2.6/2.7) 的初学者，被投入到为现有 python 应用程序创建网络服务的深层次。

我已经启动并运行了一个 UDP 服务器，它工作得很好，但我正在寻求帮助，使其更加防弹。

这是我编写的基本代码，通常的标准样板：

```
import sys
import socket
from threading import Thread

def handleInput():
         sock = socket.socket( socket.AF_INET, socket.SOCK_DGRAM )
         sock.bind( ("127.0.0.1",5005) )
         # socket always binded?
         while True:
                 data, addr = sock.recvfrom(512)
                 # is 'data' usable?

t=Thread(target=handleInput)
t.daemon=True
t.start()
# can thread die? 
```

首先，我知道套接字在某种意义上总是可用的，它不必监听，所以没有失败，你必须重新连接。这个对吗？

其次，recvfrom 返回数据的问题。检查它是否有效是一个简单 **的“如果数据：那么”吗？**

第三，最后，线程。一根线能炸出来吗？如果它确实重新启动它的最佳方法是什么？

欢迎任何其他提示。

（注意：我不能使用外部库，例如扭曲等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:21:38.977

您的问题的一些答案：

1.  UDP 套接字是无连接的，因此“始终可用”。另请注意，UDP 消息长度限制为 65535 字节 IIRC。
2.  数据只是一个字符串，其有效性将取决于使用的协议。您`if data: ...`将作为接收某些东西的测试，但`recvfrom()`无论如何调用都会阻塞，直到它接收到某些东西，所以这似乎是多余的。
3.  一般来说，我对 python 线程的可靠性一无所知。

我还会检查`SocketServer`模块和相关的`UDPServer`类——这可能更容易实现。这`SocketServer`是python标准库的一部分。

# c# - 在 .NET 中实现 Perl 的打包函数

> ID：10410420
> 
> 赞同：0
> 
> 时间：2012-05-02T08:46:37.540
> 
> 标签：c#, perl

我需要一些关于 perl 中以下行的帮助：

```
pack "NN", $b, $a; 
```

我真的不明白如何将其转换为 C#。其中 a & b 都是 int

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T09:01:23.893

在 .NET 中，结果不是字符串，而是字节数组。字符串由 16 位`char`值组成，因此不方便表示 8 位数据。

使用这样的方法来获取整数的“网络”表示：

```
public static byte[] ToNetwork(int value) {
  byte[] data = BitConverter.GetBytes(value);
  if (BitConverter.IsLittleEndian) {
    Array.Reverse(data);
  }
  return data;
} 
```

将字节数组写入内存流：

```
int a = 1;
int b = 42;
byte[] result;

using (MemoryStream m = new MemoryStream()) {
  m.Write(ToNetwork(a), 0, 4);
  m.Write(ToNetwork(b), 0, 4);
  result = m.ToArray();
} 
```

现在你有一个包含 8 个字节的数组；大端格式的每个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:30:33.770

Mono 提供了一个不错的 Pack/Unpack API，[DataConverter](http://www.mono-project.com/Mono_DataConvert#Obtaining_Mono.DataConvert)（灵感来自 Perl 的 pack 和 unpack 函数）。源代码在 git [repro](https://github.com/mono/mono/blob/master/mcs/class/corlib/Mono/DataConverter.cs)中可用（BSD 许可证）

```
{
    byte [] data = DataConverter.Pack("^II", 12345678, 87654321);
    var result = DataConverter.Unpack("^II", data, 0);
    Console.Write ("{0}, {1}\n", result[0], result[1]);
} 
```

# php - 什么是存储大量日志数据的好数据库模式？

> ID：10410425
> 
> 赞同：1
> 
> 时间：2012-05-02T08:47:01.893
> 
> 标签：php, performance, database-design, logging

我正在向一个繁忙的网站添加“活动日志”，它应该向用户显示与他相关的最后 N 个操作，并允许转到专用页面以查看所有操作、搜索它们等。

使用的数据库是 MySQL，我想知道应该如何存储日志 - 我从用于 FULLTEXT 搜索的单个 Myisam 表开始，并避免对每个操作进行额外的选择查询：1）对该表的插入发生 2 ) 更新每个 APC 缓存，因此在下一页请求 mysql 上不使用。缓存有一个日志生命周期，如果它丢失，来自用户的第一个 AJAX 请求会创建它。

我为每个用户缓存 3 个最后的事件，所以当一个新事件发生时，我会抓取当前缓存，将新事件添加到开头并删除最旧的事件，所以缓存中总是有 3 个。该网站的每个页面都有一个显示这些内容的小框。

这是正确的设置吗？你会如何推荐实现这种功能？

我的架构是：

```
CREATE DATABASE `audit`;

CREATE TABLE `event` (
`eventid` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`userid` INT UNSIGNED NOT NULL ,
`createdat` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
`message` VARCHAR( 255 ) NOT NULL ,
`comment` TEXT NOT NULL
) ENGINE = MYISAM CHARACTER SET utf8 COLLATE utf8_unicode_ci;

ALTER DATABASE `audit` DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;

ALTER TABLE `audit`.`event` ADD FULLTEXT `search` (
    `message` ( 255 ) ,
    `comment` ( 255 )
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:25:31.723

根据您的架构，我猜测（缓存除外），您将每秒插入许多记录，并且`select * from event where user_id = ? order by created_date desc`可能使用分页策略（因此需要“limit x”）查询以向用户显示他们的历史记录。

您可能还希望找到受特定类型事件影响的所有用户——尽管更有可能在离线过程中（例如，每晚向所有已更新密码的用户发送邮件）；这可能需要按照`select user_id from event where message like 'password_updated'`.

是否有很多情况下您想搜索评论的正文？

您绝对应该阅读[MySQL Manual on Tuning for inserts](http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html)；如果您不需要搜索自由文本“评论”，我会关闭索引；我还会考虑“消息”表上的常规索引。

引入“message_type”的概念也可能是有意义的，这样您就可以引入关系一致性（而不是依靠您的代码来正确拼写“password_updat3”）。例如，您可能有一个“event_type”表，与您的事件表有外键关系。

至于缓存——我猜用户只会很少访问他们的历史页面。当他们访问站点时填充缓存，如果他们可能会访问他们的历史记录（如果我理解您的设计）会立即限制您的解决方案的可扩展性，即您可以将多少历史记录放入您的缓存中；由于您的用户的历史记录表将非常迅速地增长，这可能很快成为一个重要因素。

对于像这样快速移动且很少访问的数据，缓存可能不是正确的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T08:33:23.597

这就是 Prestashop 的做法： `CREATE TABLE IF NOT EXISTS `ps_log` ( `id_log` int(10) unsigned NOT NULL AUTO_INCREMENT, `severity` tinyint(1) NOT NULL, `error_code` int(11) DEFAULT NULL, `message` text NOT NULL, `object_type` varchar(32) DEFAULT NULL, `object_id` int(10) unsigned DEFAULT NULL, `id_employee` int(10) unsigned DEFAULT NULL, `date_add` datetime NOT NULL, `date_upd` datetime NOT NULL, PRIMARY KEY (`id_log`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ;`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T08:56:16.393

我的建议是使用无模式存储系统.. 它们在大容量日志数据中表现更好

尝试考虑

*   雷迪斯
*   MongoDB
*   里亚克

或任何其他`No SQL`系统

# java - 在启动时执行 Selenium

> ID：10410429
> 
> 赞同：0
> 
> 时间：2012-05-02T08:47:17.503
> 
> 标签：java, selenium, terminal, ubuntu-11.10

我正在使用 Selenium 从客户端自动执行服务器中的浏览器，但我希望服务器在启动时自动执行 selenium。

我在 /etc/init 中有 3 个文件：

**代理服务器.conf：**

```
respawn 
start on runlevel [23]
script
    exec java -jar selenium-server-standalone-2.20.0.jar -role hub -port 1111
end script 
```

**proxyserver2.conf**和**proxyserver3.conf**是同一件事，只改变“脚本”的内容：

```
exec java -Dwebdriver.chrome.driver=/home/marco/selenium-client/chromedriver -jar selenium-server-standalone-2.20.0.jar -role node -port 2222 -hub http://192.168.1.12:1111 -browserName=chrome,maxInstances=5 
```

如果我在启动时使用此方法执行此命令，当我在客户端上执行 Selenium 时，它会给我这个错误：

```
Exception in thread "main" org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. 
```

但是，如果我在终端中执行我在 /etc/init 中使用的相同命令，则一切正常……为什么？！

最后一件事，如果我执行：

```
ps aux | grep selenium 
```

当服务器在启动时提供脚本时，它给了我：

```
root 746 0.0 12.1 677080 124468 ? Ssl Apr23 8:10 java -Dwebdriver...
root 749 0.0 12.7 685552 130280 ? Ssl Apr23 8.09 java -Dwebdriver...
root 755 0.0 1.9  680168 20240  ? Ssl Apr23 8.08 java -jar selenium... 
```

当我在终端执行时，它给了我：

```
1000 9764 6.6  3.0 679236 30992 pts/0 Sl+ 10.33 0:01 java -jar...
1000 9783 14.0 3.0 677112 31752 pts/1 Sl+ 10.33 0:01 java -Dwebdriver...
1000 9792 12.6 3.0 675472 30944 pts/2 Sl+ 10.34 0:01 java -Dwebdriver... 
```

为什么它不能工作？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:16:03.997

当 chromedriver 路径错误时，我看到了这个错误。如果您看到 RC 控制台，它应该有 chromedriver not found 错误消息。

chromedriver 环境属性应作为参数传递给 selenium jar 文件。

```
exec java -Dwebdriver.chrome.driver=/home/marco/selenium-client/chromedriver -jar selenium-server-standalone-2.20.0.jar -role node -port 2222 -hub http://192.168.1.12:1111 -browserName=chrome,maxInstances=5 
```

应该改为

```
exec java -jar selenium-server-standalone-2.20.0.jar -role node -port 2222 -hub http://192.168.1.12:1111 -browserName=chrome,maxInstances=5 -Dwebdriver.chrome.driver=/home/marco/selenium-client/chromedriver 
```

# facebook - 如何将 Facebook 应用程序添加到首页的“书签”

> ID：10410430
> 
> 赞同：1
> 
> 时间：2012-05-02T08:47:28.240
> 
> 标签：facebook, bookmarks

我创建了一个 Facebook 游戏，它与一些 Ajax Javascript 和一个带有分数的 PHP/MySQL 服务器一起工作，但我不知道如何将它作为书签添加到应用程序用户的首页上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:00:46.460

您无需执行任何操作即可将应用程序添加到用户的书签中。如果用户使用该应用程序，它将自动添加到书签中，如[文档](http://developers.facebook.com/docs/channels/#bookmarks)中所述：

> 如果您的应用设置了 Canvas URL，则书签将出现在主页的左列以及 Canvas 页面本身的右上角。

# objective-c - 使用 MapKit 和 UIGestureRecognizer 在触摸时添加注释引脚

> ID：10410431
> 
> 赞同：3
> 
> 时间：2012-05-02T08:47:36.430
> 
> 标签：objective-c, ios, mapkit, uigesturerecognizer, mkannotation

当用户触摸地图时，我在添加注释时遇到了一些问题。

我`UIGestureRecognizer`用来检测用户的触摸。

当检测到长按时，我正在调用此函数：

```
- (void)handleLongPressGesture:(UIGestureRecognizer*)gestureRecognizer{
if (gestureRecognizer.state == UIGestureRecognizerStateEnded) return;

NSLog(@"long press");

CGPoint touchPoint = [gestureRecognizer locationInView:mapView];   
CLLocationCoordinate2D touchMapCoordinate = 
[mapView convertPoint:touchPoint toCoordinateFromView:mapView];

RdvAnnotation *rdvAnnotation = [[RdvAnnotation alloc] init];

[rdvAnnotation initWithCoordinate:touchMapCoordinate];

[mapView removeAnnotations:mapView.annotations]; 

[mapView addAnnotation:rdvAnnotation];

[rdvAnnotation release]; } 
```

我可以在控制台中看到 NSLog 并`rdvAnnotation`使用良好的坐标进行初始化。

我不明白为什么我在地图上看不到我的注释。

这是我的`- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation`方法：

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation{
if ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;

if ([annotation isKindOfClass:[RdvAnnotation class]]) 
{
    static NSString* RdvAnnotationIdentifier = @"rdvAnnotationIdentifier";
    MKPinAnnotationView* pinView = (MKPinAnnotationView *)
    [mapView dequeueReusableAnnotationViewWithIdentifier:RdvAnnotationIdentifier];

    if (!pinView)
    {
        MKPinAnnotationView* customPinView = [[[MKPinAnnotationView alloc]
                                               initWithAnnotation:annotation reuseIdentifier:RdvAnnotationIdentifier] autorelease];
        customPinView.pinColor = MKPinAnnotationColorPurple;
        customPinView.animatesDrop = YES;
        customPinView.canShowCallout = YES;

        return customPinView;

    }
    else
    {
        pinView.annotation = annotation;
    }
    return pinView;
}
return nil;} 
```

我的`viewDidLoad`方法：

```
- (void)viewDidLoad {
[super viewDidLoad];

mapView = [[MKMapView alloc] initWithFrame:self.view.frame];
[mapView setShowsUserLocation:TRUE];
[mapView setMapType:MKMapTypeStandard];
[mapView setDelegate:self];

CLLocationManager *locationManager=[[CLLocationManager alloc] init];

[locationManager setDelegate:self];

[locationManager setDesiredAccuracy:kCLLocationAccuracyNearestTenMeters];

[locationManager startUpdatingLocation];

self.navigationItem.title = @"Rendez-vous" ;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:25:59.320

我刚刚注意到一些看起来很奇怪的东西：

```
RdvAnnotation *rdvAnnotation = [[RdvAnnotation alloc] init];
[rdvAnnotation initWithCoordinate:touchMapCoordinate]; 
```

您在注释对象上调用了两次 init。你应该这样做：

```
RdvAnnotation *rdvAnnotation = [[RdvAnnotation alloc] initWithCoordinate:touchMapCoordinate]]; 
```

**编辑：** 如果您的 init 方法中有不想丢失的代码，请保留 init 并更改坐标属性的值：

```
RdvAnnotation *rdvAnnotation = [[RdvAnnotation alloc] init];
rdvAnnotation.coordinate = touchMapCoordinate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:54:59.327

在`viewDidLoad`您创建一个新的地图视图对象。

首先，这个新的地图视图对象没有被添加为子视图，`self.view`因此它存在于内存中但不可见。

其次，您可能已经在 Interface Builder 的视图中放置了一个地图视图对象，因此您不需要创建一个新对象。

所以可能发生的情况是，当您添加注释时，它被添加到内存中的地图视图对象，而不是可见的对象（在 IB 中创建的对象）。

无需在 中创建新的地图视图，而是`viewDidLoad`将`mapView`IBOutlet 连接到 Interface Builder 中的地图视图。

# ruby-on-rails - 检查函数是否有效以防止 Rails 中出现“未定义的方法错误”

> ID：10410432
> 
> 赞同：1
> 
> 时间：2012-05-02T08:47:37.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, will-paginate

我正在使用 gem，will_paginate，对 Rails 站点上的内容进行分页。

它的用法是：（来自官方示例）

```
## perform a paginated query:
@posts = Post.paginate(:page => params[:page])

# or, use an explicit "per page" limit:
Post.paginate(:page => params[:page], :per_page => 30)

## render page links in the view:
<%= will_paginate @posts %> 
```

现在在某些视图中，我需要分页，但有些视图我不需要。所以当使用通用布局渲染出内容时，没有分页的页面会显示错误。

> will_paginate 未定义方法错误

有没有办法在视图尝试显示之前检查 will_paginate 是否是有效函数？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:52:56.567

你可以利用`rescue`. 例如 ：

```
<%= do_something rescue do_something_else %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:54:36.440

您可以使用`defined? will_paginate`或`will_paginate @posts rescue _do_something_else_`。`defined?`告诉你函数是否被定义，任何你可以在 if 中使用它，处理`rescue`异常。

# drupal - Facebook 社交插件集成网址

> ID：10410437
> 
> 赞同：0
> 
> 时间：2012-05-02T08:47:50.480
> 
> 标签：drupal, drupal-modules

你好我有这个问题我希望网址只显示标题

由此：

![由此](../Images/1e495499a39eb7fc0ebf5b045d3f47f4.png) 对此：

![对此](../Images/56fd1a68c82aee0ba47acdb12bd2bf4a.png)

希望大家能帮忙

最好的问候 马茨克鲁格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:38:07.563

您不能 facebook 将读取元数据并自动显示描述和图像。您只能禁用 facebook 窗口中的图像。

# php - 用 PHP 更新 mysql 行的最佳策略？

> ID：10410441
> 
> 赞同：3
> 
> 时间：2012-05-02T08:48:03.597
> 
> 标签：php, mysql

假设我有 5 行带有`id`,`catname`和`order`字段：

```
+----+----------+-----+  
| id | catname  |order|
+----+----------+-----+  
|  1 | cat1     |   2 |
|  2 | cat2     |   1 |
|  3 | cat3     |   3 | 
|  4 | cat4     |   5 |
|  5 | cat5     |   4 |
+----+----------+-----+ 
```

我想从数组中更新这 5 个类别的顺序，例如：

```
array(1 => 3, 2 => 4, 3 => 5, 4 => 1, 5 => 2) 
```

最佳做法是什么？要选择每一行并使用数组中相应的顺序更新订单字段？或者创建一个包含所有这些类别的订单数组的新表，并将其用于使用例如 userid 的连接语句对两个表进行排序和链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:13:03.763

如果您想在一个查询中执行此操作，可以按如下方式生成 SQL 查询（假设键是现有`order`值）：

```
$orders = array(
    1 => 3,
    2 => 4,
    3 => 5,
    4 => 1,
    5 => 2,
);

$sql = 'UPDATE category SET order = CASE order ';

foreach ($orders as $old => $new) {
    $sql .= "WHEN $old THEN $new ";
}

$sql .= 'END'; 
```

如果键是`id`条目，请使用`CASE id`而不是`CASE order`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:58:21.540

您可以使用新顺序为它们分配负值，然后将负值乘以 -1。

```
array(1->-3,2->-4,3->-3,4->-1,5->-2) 
```

但是您必须通过循环遍历数组来更新每一行：

```
update yourTable set order=-3 where order=1; 
```

以后使用

```
update yourTable set order=-1*order where order < 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:53:40.093

无论如何，将订单数据放在您将要选择/获取的行中肯定比使用不同表的连接要快。在更新方面，这并不重要 - 只要您有良好的索引。所以，我会采用一张桌子的方法。

# visual-studio-2010 - 如何在 Visual Studio 2010 中打开 Visual Studio 11 项目

> ID：10410444
> 
> 赞同：3
> 
> 时间：2012-05-02T08:48:08.247
> 
> 标签：visual-studio-2010, backwards-compatibility, visual-studio-2012

我昨晚下载了 Visual Studio 11 Beta 并开始着手一个新项目，唯一的问题是现在我*无法*使用 Visual Studio 2010 打开该项目，有没有人知道这个或将项目保存在 Beta 中的方法与“旧版本”兼容，我已经看过并尝试过但仍然失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:56:03.580

只需在第二行的文本编辑器中打开解决方案，您就可以找到

```
Microsoft Visual Studio Solution File, Format Version 12.00 
```

将版本更改为`11.00`并保存。

尝试打开解决方案，它可以工作。

更新：原来的答案是*错误*的。与 Visual Studio 的版本不同，格式版本随着时间的推移而出现分歧。自己检查一下。VS 2010 解决方案的正确版本号是`11.00`，而不是`10.00`上面最初所述的版本号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:22:35.480

我也无法在 VS10 中打开 VS11 项目 - 出现错误消息“所选文件是解决方案文件，但由该应用程序的较新版本创建，无法打开”。

它有助于更​​改 .sln 文件第一行的版本号（将“Format Version 12.00”替换为“Format Version 11.00”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T19:27:16.943

我最近在工作中多次看到这种情况。您需要安装[Visual Studio 2010 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=23691)来解决此问题。

# git - GIT 远程无法通过 SSH 获取

> ID：10410456
> 
> 赞同：2
> 
> 时间：2012-05-02T08:48:51.110
> 
> 标签：git, ssh, repository, fetch

我刚刚在现有网站根目录中初始化了一个 GIT 存储库。我有这个站点的本地开发副本，它已经是一个 GIT 存储库。我不能只是从另一个克隆一个，因为多年来本地/实时版本已经不同步。

我试图让他们再次与 GIT 对齐，但我希望能够在实时站点上进行**提取**并运行**git diff**

我的问题是，在本地站点上，我已将实时站点添加为远程存储库：

```
git remote add live user@server.co.uk:/path/to/repo 
```

我可以通过 ssh 成功登录到我的服务器：

```
ssh user@server.co.uk 
```

但是当我尝试获取并输入 ssh 密码时，命令行只会返回密码提示，就好像我输入错误一样。但是我知道密码是正确的，因为我可以使用 SSH 登录。

我必须在远程 URL 之前指定**ssh://吗？**我必须做些什么才能使 ssh 远程存储库正常工作

**更新**

我添加了**ssh://**前缀，但没有任何区别。这就是它在 .git/config 中的样子

```
[remote "live"]
    url = ssh://user@server.co.uk/path/to/repo
    fetch = +refs/heads/*:refs/remotes/live/* 
```

运行**GIT_TRACE=true git fetch live**添加以下行：

```
trace: run_command 'ssh' 'user@server.co.uk' 'git-upload-pack '\''/path/to/repo'\''' 
```

在收到消息之前，我必须输入 3 次密码：

```
fatal: the remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:59:05.617

我认为您缺少遥控器的别名。

```
git remote add origin user@server.co.uk:/path/to/repo 
```

注意`origin`位。

您发布的 .git/config 是否准确？如果是，请尝试将远程 url 从

`url = ssh://user@server.co.uk/path/to/repo`

至

`url = user@server.co.uk:/path/to/repo`

请注意将`:`服务器名称与服务器路径分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:05:00.283

以下仅适用于您对服务器具有 shell 访问权限的情况。可能不是您想要的，但如果您想尝试设置公钥/私钥身份验证。只需使用命令生成 RSA 密钥对：

`ssh-keygen -t rsa` 我建议您使用密码，因为您可以`ssh-agent`在生成密钥对后将其存储，将公钥复制到您的服务器，您可以使用 scp ：

`scp -p ~/.ssh/id_rsa.pub host:~/.ssh/`然后在服务器上做`cat id_rsa.pub >> authorized_keys`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:58:22.907

是的，你需要 ssh://。只需在 .git/config 文件中更改它：

```
url = ssh://user@server.co.uk:/path/to/repo 
```

# php - 如何通过从当前日期减去前一个日期来查找天数

> ID：10410457
> 
> 赞同：0
> 
> 时间：2012-05-02T08:48:54.113
> 
> 标签：php

是否可以找到两个日期字段之间的天数。

如果用户在 30 天内未登录，我想删除该用户。每个登录`login_date`字段都会更新。

我想减去两个字段`login_date`，`current_date` 如果答案是 30 或大于 30，它将删除该用户。

我是 php 新手，需要帮助.. 我在 localhost 上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:51:58.237

我建议使用 DateTime 和 DateInterval 对象。

```
$date1 = new DateTime("2007-03-24");
$date2 = new DateTime("2009-06-26");
$interval = $date1->diff($date2);
echo "days difference ".$interval->d." days "; 
```

阅读更多 php [DateTime::diff 手册](http://php.net/manual/en/datetime.diff.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:51:26.727

如果您使用时间戳格式 - 您可以使用条件：

```
$month = 30*86400; 
if ($current_date - $login_date > $month){
    delete_user();
} 
```

如果您使用日期时间格式 - 您可以使用函数 strtotime 将此格式转换为时间戳

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:56:33.467

以下将返回两个日期之间的确切天数。

> ```
> $last_login_date = "2012-04-01";
> $current_date = "2012-04-30";
> 
> echo "Days: ".round(abs(strtotime($current_date)-strtotime($last_login_date))/86400); 
> ```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T08:57:28.253

嗨，试试这个函数会得到两个日期之间的天数。

```
function dateDiff($start, $end) {

  $start_ts = strtotime($start);

  $end_ts = strtotime($end);

  $difference = $end_ts - $start_ts;

  return round($difference / 86400);

 } 
```

谢谢

# iphone - reload json data to UITableView

> ID：10410461
> 
> 赞同：0
> 
> 时间：2012-05-02T08:49:13.763
> 
> 标签：iphone, objective-c, ios, json, uitableview

I'm a bit confused. I have 2 classes, an app delegate and a view controller. In my app delegate I get some data via this method:

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
[connection release];
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
[responseData release];

NSDictionary *results = [responseString JSONValue];

NSArray *allTweets = [results objectForKey:@"results"];

[viewController setTweets:allTweets];
[window addSubview:viewController.view];
[window makeKeyAndVisible];

} 
```

and in my view controller I have a button that should reload the data...I've tried a few things such as

```
Twitter_SearchAppDelegate *appDelegate= (Twitter_SearchAppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate connectionDidFinishLoading]; 
```

but none worked...am I going about this in the wrong way? I just want to be able to call the method that loads the data in the first place from the app delegate to the view controller. Any help is appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:56:05.933

Yes, you are going in the wrong direction.

You are trying to call the NSURLConnection delegate method your self (wrong). If you want to simply reload the JSON data, you should call in your App Delegates method that initiates the download request to force in the data reload!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:56:59.360

first of all , if i'm not wrong , `connectionDidFinishLoading` is a delegate method which is triggered when you start the connection process. have you test that your application enters `connectionDidFinishLoading` ?

in addition when you evaluate your array/dictionary as source to your tableview , did you call again `["your-table-view-name" reloadData]` ?

hope this helps..

# python - 使用 pyudev 设置键盘布局

> ID：10410462
> 
> 赞同：0
> 
> 时间：2012-05-02T08:49:18.327
> 
> 标签：python, linux, bash, xinput, xmodmap

我编写了这个脚本来自动更改插件上的 USB 键盘布局

```
import pyudev                                                                   
from subprocess import call

monitor = pyudev.Monitor.from_netlink(pyudev.Context())
monitor.filter_by('usb')

def kbd_event(action, device):
    if action == 'add':
        call(["setxkbmap", "carpalx"])

observer = pyudev.MonitorObserver(monitor, kbd_event)
observer.start() 
```

`setxkbmap carpalx`如果我在 bash 中键入它就可以工作，但它不会改变上面代码中的布局。所以我在 bash 中这样做了：

```
setxkbmap carpalx
xmodmap -pke > carpalx2 
```

将上面的调用行更改为`call(["xmodmap", "./carpalx2"])`，现在脚本可以工作了。我有以下问题：

1.  为什么 xmodmap 可以在代码中工作而 setxkbmap 不能，但两者都可以在 bash 中工作？
2.  目前，每个 USB 事件都会调用 kbd_event，并且`call(["xmodmap", "./carpalx2"])`会为我插入的每个 USB 设备运行。如何进一步过滤事件，以便只有在我插入键盘时布局才会改变？

使用我当前的代码，每次插入鼠标时键盘布局都会发生变化:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:45:05.030

您可以通过检查`ID_INPUT_KEYBOARD`属性来过滤键盘：

```
if action == 'add' and device['ID_INPUT_KEYBOARD'] == '1':
    print('a keyboard was added') 
```

关于直接调用和使用脚本之间的区别`setxkbmap`，我猜 X 服务器也需要时间来初始化键盘。UDev 在键盘完成 udev 处理后立即调用回调，但这很容易在 X11 服务器配置和初始化新键盘之前。

检查 X.org 日志以及`setxkbmap`可能打印的任何错误消息。

# ruby - 字符串到哈希的转换

> ID：10410470
> 
> 赞同：2
> 
> 时间：2012-05-02T08:50:22.043
> 
> 标签：ruby, string, hash

我如何将字符串转换为哈希？

现在我使用：

```
eval "{'1627207:28320'=>'text'}"
=> {'1627207:28320'=>'text'} 
```

但是“eval”不适合我的情况-从参数传递的字符串，这种情况下它不安全

**编辑：**

传递的字符串也可以是：

`"{'1627207'=>'text', '11:167:28320'=>'text 1 / text 2 / unicode=>привет!'}"`

然后需要结果哈希：

```
{'1627207:28320'=>'text',
'11:167:28320'=>'text 1 / text 2 / unicode=>привет!'} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T09:25:33.750

```
str = "{'1627207:28320'=>'text'}"
p Hash[*str.delete("{}'").split('=>')] #{"1627207:28320"=>"text"} 
```

编辑不同的输入：

```
str = "{'1627207:28320'=>'text', 'key2'=>'text2'}" 
p Hash[*str.delete("{}'").split(/=>|, /)] #{"1627207:28320"=>"text", "key2"=>"text2"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:45:11.083

```
class String
  def to_h
    h={}
    self.scan(/'(\w+.\w+)'=>'(\w+)'/).each { |k,v| h[k]=v }
    h
  end
end

p "{'1627207:28320'=>'text','test'=>'text2'}".to_h
=>{"1627207:28320"=>"text", "test"=>"text2"} 
```

编辑：较短的版本

```
class String
  def to_h
    Hash[self.scan(/'([^']+)'=>'([^']+)'/)]
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:53:52.120

很直接：

```
$ irb
irb(main):001:0> k='1627207:28320'
=> "1627207:28320"
irb(main):002:0> v='text'
=> "text"
irb(main):003:0> h={k => v}
=> {"1627207:28320"=>"text"}
irb(main):004:0> h
=> {"1627207:28320"=>"text"}
irb(main):005:0> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:02:03.103

你可以简单地试试这个：

```
text_hash['1627207:28320'] = 'text'
text_hash 
```

# php - PHP，在两个字符串之间选择一个字符串，然后从选中的字符串中取一个值

> ID：10410473
> 
> 赞同：0
> 
> 时间：2012-05-02T08:50:47.290
> 
> 标签：php

我有一个文件，其中包含许多代码部分。每个部分都以 开头`<form>`和结尾`</form>`。在每种形式之间，都有这样的东西：`<input type='text' name='date' value='2010-01-01'><input type='text' name='username' value='test'>`

我想用php解析代码的每一部分并获取输入用户名的值，其中输入日期的值为'2010-01-01'

请问有什么解决办法吗？

例子：

```
<form>
<input type='text' name='date' value='2010-01-01'>
<input type='text' name='username' value='test'> <!-- How can I get this value ('test')? -->
</form>
<form>
<input type='text' name='date' value='2010-01-02'>
<input type='text' name='username' value='test2'>
</form>
.
.
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:09:37.133

```
preg_match('/form.*name=\'date\' value=\'2010-01-01\'.*name=\'username\' value=\'(.*)\'/Usim', $f, $r);
printf($r[1]); 
```

# android - android : 从应用代码检测应用的重新安装

> ID：10410476
> 
> 赞同：5
> 
> 时间：2012-05-02T08:50:55.833
> 
> 标签：android, broadcast, reinstall

有没有办法在重新安装时从应用程序代码中检测出来。

我看到可以通过收听广播接收器中的 PACKAGE_REPLACED 事件来检测来自市场的应用程序更新。但是，如果从编辑器（eclipse）重新安装应用程序，这些事件不会传递给应用程序。

我的要求是我禁用一个组件（启动器活动）。如果未启用，应用安装将失败。所以每次重新安装之前我都想启用这个组件。

我说的是在市场上发布之前的重新安装。在开发过程中，每次我重新安装应用程序以测试一些修改时，我想从我的应用程序中检测到这一点并启用组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:18:21.843

我从我的示例中看到，当从 eclipse 重新安装应用程序时，将广播以下事件。

```
<intent-filter>
        <action android:name="android.intent.action.PACKAGE_ADDED"/>
        <action android:name="android.intent.action.PACKAGE_REPLACED"/>
             </intent-filter> 
```

我为这些动作定义了一个广播接收器，并且从 onreceive 我能够启用我的组件

# clearcase - 为什么拖放到 Clearcase 资源管理器时文件名会转换为小写？

> ID：10410488
> 
> 赞同：2
> 
> 时间：2012-05-02T08:51:31.373
> 
> 标签：clearcase, clearcase-ucm

我的一位同事在 clearcase 中报告了一个特殊问题。（这是一个基本的 clearcase 视图。）

当他将文件从 windows 资源管理器拖放到 clearcase 资源管理器时，文件名会自动转换为小写字母。

这让他很头疼，因为他必须再次手动更改它们。

我在我的 clearcase explorer 中尝试过，但没有发现这种行为。我尝试了选项，但找不到任何好的解决方案。

有没有人面对过这个问题并解决了这个问题？如果是这样，请帮助我解决问题的步骤。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T09:12:02.443

这可能是因为您没有激活此选项“ **Case Preserving** ”（对于动态视图，使用 MVFS）：

（这些选项可以在`ClearCase Home Base -- or type`clearhomebase中找到，在[评论](https://stackoverflow.com/users/10410/kevin-haines)`-- , Administration tab, Control Panel`中提醒我们[Kevin](https://stackoverflow.com/users/10410/kevin-haines)）

![不区分大小写](../Images/f1736aa13ab725b9db1087b1f6a2f08f.png)

注意：可能需要重新启动才能应用该选项。

使用**Case Preserving**，不应发生大小写转换。
查看更多信息：

*   "[在动态视图中设置区分大小写选项之前](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_mvfs/before_set_case_sens_dyn.htm)"

> **[...]如果您清除 Case Preserving (default)**，您在 VOB 命名空间中创建的视图私有对象不会发生这种情况。
> 在这种情况下，**MVFS 在创建文件时将名称转换为小写（即 util.obj）**。

*   “[关于区分大小写](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/about_case_sensitivity.htm)”。更一般地说（这不是你的问题），避免两个文件具有相同的名称和不同的大小写。Windows 不会很好地支持它。

# php - 图像编辑数学

> ID：10410490
> 
> 赞同：2
> 
> 时间：2012-05-02T08:51:36.067
> 
> 标签：php, math

我正在用 PHP 和 Javascript 创建一个图像编辑程序，但我无法计算出数学。

这个想法是，用户上传一张图片（它可以非常大，10 000 x 10 000 像素，也可以很小 500 x 500 像素），并使用 PHP 调整其大小以适应工作区域（调整为更小或更大）。工作区是根据用户屏幕大小计算的（使用 Javascript）。存储原始图像并生成拇指。此时，用户可以旋转和裁剪图像。使用拇指图像进行裁剪和旋转以节省资源（使用 PHP）。数据保存到会话中（数据如旋转角度、裁剪 - x、y、宽度、高度、调整大小 - 宽度和高度的比率 ( `original_image_width / thumb_image_width`)）。当用户单击完成按钮时，所有这些步骤都将应用于原始图像。如果它正在旋转，则计算总角度以避免多次调用旋转函数。如果是裁剪，则`x`, `y`,`width`和`height`必须计算使得裁剪只发生一次。

现在这是变得复杂的地方。由于调整大小发生在每次裁剪之间（以适应工作区域），我似乎无法计算出数学来计算所需的变量（`x`, `y`, `width`, `height`）。这是我到目前为止所拥有的。

```
list($width_original, $height_original) = getimagesize($_SESSION['original_file']);

// default variables
$angle = 0; $x = 1; $y = 1; $width = $width_original; $height = $height_original; $xx = 0; $yy = 0;
$ratio_x = 1; $ratio_y = 1;

foreach($_SESSION['history'] as $key => $history)
{
    if($history['action'] == 'resize')
    {
        $ratio_x = $history['ratio_x'];
        $ratio_y = $history['ratio_y'];
    }

    if($history['action'] == 'crop')
    {
        $xx += ($width * $history['x']) / ($history['width'] * $ratio_x);
        $yy += ($height * $history['y']) / ($history['height'] * $ratio_y);

        $x = $history['x'];
        $y = $history['y'];
        $width = $history['width'] * $ratio_x;
        $height = $history['height'] * $ratio_y;

    }
} 
```

这个想法是计算`x`并`y`从最后一个拇指（它调整大小，适合工作区域的更小或更大的图片）并将它们加在一起。之后，默认变量将替换为当前历史值。

我希望我说清楚了。我的头脑无法再弄清楚了，谁能指出我正确的方向？

编辑：我忘了添加会话数据。它看起来像这样：

```
Array
(
[history] => Array
    (
        [0] => Array
            (
                [action] => crop
                [x] => 173
                [width] => 629
                [y] => 124
                [height] => 208
                [file] => 4fa0f6ffe5844.jpg
            )

        [1] => Array
            (
                [action] => resize
                [ratio_x] => 0.69659863945578
                [ratio_y] => 1.1851851851852
            )

        [2] => Array
            (
                [action] => crop
                [x] => 200
                [width] => 1236
                [y] => 254
                [height] => 66
                [file] => 4fa0f70256940.jpeg
            )

        [3] => Array
            (
                [action] => resize
                [ratio_x] => 0.69659863945578
                [ratio_y] => 7.3846153846154
            )

    )

[id] => e03859m172blidbjl1sj8kfm94
[original_file] => 4fa0f6ffe5844.jpg
[current_file] => 4fa0f705e19d6_final.jpeg
[landscape] => 1
[workarea_height] => 613
[workarea_width] => 1470
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:21:28.260

如果我正确理解你，你想做图像编辑`crop`等，`re-size`但从你的代码中有一些我不明白的东西，比如

*   `$history`
*   `foreach($_SESSION['history'] as $key => $history)`不知道你为什么要循环历史
*   `$ratio_x = 1; $ratio_y = 1;`为什么你有多个比率

我对您的 javascript 的期望类似于

*   x1, y1
*   x2, y2
*   角度
*   高度
*   宽度

`x2`并且`y2`在大多数情况下可能不需要，特别是如果用户只是想重新调整大小..你不需要`x`和`y`比例......一个单一的比例或比例就可以了

简单计算

```
$ratio = $thumb_width/$width_original;
$newImageWidth = ceil($width * $ratio);
$newImageHeight = ceil($height * $ratio); 
```

结论

有很多开源的 java 脚本解决方案，你可以看看哪些有 PHP 后端

[http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/](http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/)

[http://odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)

[http://deepliquid.com/content/Jcrop_Download.html](http://deepliquid.com/content/Jcrop_Download.html)

# c# - 从 C# 权限问题执行批处理文件

> ID：10410494
> 
> 赞同：9
> 
> 时间：2012-05-02T08:51:50.077
> 
> 标签：c#, asp.net, vbscript, batch-file, windows-server-2008-r2

我有一个批处理文件来执行一个 VB 脚本。虽然通过双击执行批处理文件将起作用，但是当我对 C# 执行相同操作时，它在我的本地环境中工作但不在临时服务器（Windows 服务器 2008r2）中，是否有任何权限级别我需要申请此执行. 从登台服务器我可以双击并执行批处理文件...

我已经使用管理员帐户登录到服务器，并以 localhost 身份浏览了应用程序。

从 C# 执行批处理文件时我有什么遗漏吗，

我认为我的 C# 代码没有任何问题，因为它在我的本地环境中运行良好，无论如何以下是我的 C# 代码，

```
if (File.Exists(FileName*))
            {
                System.Diagnostics.ProcessStartInfo p = new System.Diagnostics.ProcessStartInfo(FileName);
                System.Diagnostics.Process proc = new System.Diagnostics.Process();
                proc.StartInfo.FileName = FileName;
                proc.StartInfo.RedirectStandardError = true;
                proc.StartInfo.RedirectStandardOutput = true;
                proc.StartInfo.UseShellExecute = false;

                proc.Start();

                proc.WaitForExit();

            }
            else
            {
                lblMsg.Text = "Sorry unable to process you request";
            } 
```

* **FileName**是批处理文件的路径。我还对包含批处理文件和 vbs 文件的文件夹设置了完全权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T09:11:25.310

为此，您的应用程序池需要以有权访问批处理文件的用户身份运行。检查如何更改[IIS 7](http://technet.microsoft.com/en-us/library/cc771170.aspx)或[IIS 6](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/f05a7c2b-36b0-4b6e-ac7c-662700081f25.mspx)的应用程序池标识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T23:38:25.077

扩展 Kartheek 所说的话：

*   在 IIS 7 应用程序池中作为应用程序池帐户运行，`IISAPPPOOL\AppPoolName`
*   在 IIS 6 应用程序池中运行为`Network Service`
*   在任何一种情况下，这些帐户都没有任何访问用户文档文件夹的权限，并且（默认情况下）只能从公共数据存储中读取。

通常，您希望保留应用程序池帐户，因为它有助于隔离数据——所以我要做的就是确保您授予对应用程序池帐户所需的 bat 文件的读取+执行权限。您还需要对蝙蝠需要读取/写入的任何填充/文件夹具有适当的权限。

您无需更改应用程序中的任何内容来纠正此问题，除非您希望 IIS 应用程序伪装成实际坐在网站上的用户（只有在您使用某种形式的身份验证时它才真正有效。）通常这个无论如何都是一个坏主意——所以最好只调整权限。

作为一般经验法则，在 Web 服务器上工作时，您希望将权限/执行级别保持在尽可能低/限制性的水平。

# c# - 即使更改大小写，ComboBox 项目也不会更新

> ID：10410495
> 
> 赞同：0
> 
> 时间：2012-05-02T08:51:56.263
> 
> 标签：c#, winforms, combobox

我有一个带有组合框、文本框和按钮的基本表单。组合框中的项目数量不可更改，但可以通过为所选项目输入新值来更改项目本身。

![在此处输入图像描述](../Images/f28fc546563c07807efc098ca2ab42fc.png)

从图中的示例中，如果我输入一个字符串，例如“标识符”，则组合框中的选定项从“ID”变为“标识符”，正如预期的那样。但是，如果我输入“id”，则逻辑（如下）正常执行，项目更新，但在视觉上，项目不会从“ID”变为“id”。

这是按钮的事件处理程序的代码

```
private void btnApply_Click(object sender, EventArgs e) {

    string newValue = txtNewName.Text;

    if(string.IsNullOrWhiteSpace(newValue)) {
        MessageBox.Show("Please input a new column name");
        return;
    }

    if(cmbHeaderNames.Items.Contains(newValue)) {
        MessageBox.Show("A column with that name already exists");
        return;
    }

    cmbHeaderNames.Items[cmbHeaderNames.SelectedIndex] = newValue;

    txtNewName.Text = "";

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:33:14.710

我相信 ComboBox 正在做一些字符串比较，因为下面的代码示例有效。

```
if (comboBox1.SelectedItem.ToString().ToUpper() == textBox1.Text.ToUpper())
{
     comboBox1.Items[comboBox1.SelectedIndex] = string.Empty;
     comboBox1.Items[comboBox1.SelectedIndex] = textBox1.Text;
} 
```

显然，如果在应用 ToUpper() 或 ToLower() 时两个字符串值不相同，则更新成功应用。

# testing - 如何在测试机中测试 JSP 和 Servlet？

> ID：10410499
> 
> 赞同：0
> 
> 时间：2012-05-02T08:52:06.713
> 
> 标签：testing

我是 Java Web 技术的新手，我想配置一个服务器并测试 Jsp 和 servlets 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:18:05.250

首先下载一个服务器安装程序（最好是 Tomcat），运行它，然后，安装完成后，打开你的 IDE（我猜是 Eclipse），查找“Servers”透视图，然后右键单击它. 在那里你可以创建一个新的服务器。

如需进一步阅读，[http://www.eclipse.org/webtools/jst/components/ws/M4/tutorials/InstallTomcat.html](http://www.eclipse.org/webtools/jst/components/ws/M4/tutorials/InstallTomcat.html)

# c# - .NET 2.0 等效于 C# 扩展方法

> ID：10410501
> 
> 赞同：1
> 
> 时间：2012-05-02T08:52:10.273
> 
> 标签：c#, oop, design-patterns

如何通过将扩展方法替换为等效的 .NET 2.0 来将这段代码更改为与 .NET 2.0 兼容？

```
public interface IMessagingService {
    void sendMessage(object msg);
}
public interface IServiceLocator {
    object GetService(Type serviceType);
}
public static class ServiceLocatorExtenstions {
    //.NET 3.5 or later extension method, .NET 2 or earlier doesn't like it
    public static T GetService<T>(this IServiceLocator loc) {
        return (T)loc.GetService(typeof(T));
    }
}
public class MessagingServiceX : IMessagingService {
    public void sendMessage(object msg) {
        // do something
    }
}
public class ServiceLocatorY : IServiceLocator {
    public object GetService(Type serviceType) {
        return null; // do something
    }
}
public class NotificationSystem {
    private IMessagingService svc;
    public NotificationSystem(IServiceLocator loc) {
        svc = loc.GetService<IMessagingService>();
    }
}
public class MainClass {
    public void DoWork() {
        var sly = new ServiceLocatorY();
        var ntf = new NotificationSystem(sly);
    }
} 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T08:54:38.517

只需`this`从扩展方法中删除关键字。

```
public static class ServiceLocatorExtensions
{    
    public static T GetService<T>(IServiceLocator loc) {
        return (T)loc.GetService(typeof(T));
    }
} 
```

并通过传递您正在“扩展”的对象实例将其作为任何其他静态方法调用：

```
IServiceLocator loc = GetServiceLocator();
Foo foo = ServiceLocatorExtensions.GetService<Foo>(loc); 
```

实际上，这就是 .Net 3.5 编译器在幕后所做的。`Extensions`顺便说一句，您也可以删除后缀。例如`Helper`，用于不迷惑人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:55:01.947

```
svc = loc.GetService<IMessagingService>(); 
```

等于

```
svc = ServiceLocatorExtenstions.GetService<IMessagingService>(loc); 
```

但是，您不必删除扩展方法并且仍然以 .NET 2.0 为目标 - 查看这篇文章（更多关于 google）： http: [//kohari.org/2008/04/04/extension-methods-in-net-20 /](http://kohari.org/2008/04/04/extension-methods-in-net-20/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:59:09.527

如果您不想使用扩展方法并避免代码中的歧义，那么最直接的解决方案是移动接口定义中`ServiceLocatorExtenstions`的所有方法`IServiceLocator`并删除`ServiceLocatorExtenstions`类。

但是，这可能会比这里提供的其他解决方案涉及更多的工作，顺便说一下，会产生更一致的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T08:59:37.677

为什么不将泛型方法放在您的界面中（以及）？由于您的扩展方法只会使调用更容易，所以首先让它更容易不是更好吗？

在 .NET 2.0 中有多种扩展方法：请参见[此处](https://stackoverflow.com/questions/1522605/using-extension-methods-in-net-2-0)或[此处](http://forums.asp.net/t/1466006.aspx/1)。

# java - 你如何计算GPS JAVA中两点之间的距离？

> ID：10410502
> 
> 赞同：0
> 
> 时间：2012-05-02T08:52:14.553
> 
> 标签：java

> **可能重复：**
> [如何计算两个经纬度点之间的距离？](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)

如何计算 JAVA 中纬度和经度值中的两点之间的距离？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:57:53.427

看看这个：[http ://www.zipcodeworld.com/samples/distance.java.html](http://www.zipcodeworld.com/samples/distance.java.html)

因为上面的链接坏了看这个：[计算两个经纬度点之间的距离？（Haversine 公式）](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points/12600225#12600225)。

这篇文章的摘要：

```
public final static double AVERAGE_RADIUS_OF_EARTH = 6371;
public int calculateDistance(double userLat, double userLng, double venueLat, double venueLng) {

    double latDistance = Math.toRadians(userLat - venueLat);
    double lngDistance = Math.toRadians(userLng - venueLng);

    double a = (Math.sin(latDistance / 2) * Math.sin(latDistance / 2)) +
                    (Math.cos(Math.toRadians(userLat))) *
                    (Math.cos(Math.toRadians(venueLat))) *
                    (Math.sin(lngDistance / 2)) *
                    (Math.sin(lngDistance / 2));

    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

    return (int) (Math.round(AVERAGE_RADIUS_OF_EARTH * c));

} 
```

# ios - 使用 Graph API 在 Facebook 墙上发布消息

> ID：10410508
> 
> 赞同：-1
> 
> 时间：2012-05-02T08:52:41.417
> 
> 标签：ios, facebook, facebook-graph-api

我已经使用了 Graph API，并且已经成功登录 Facebook 并获得了好友列表。

现在我需要在墙上贴一条消息。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:58:36.287

使用 url 在墙上发帖，并使用此方法在墙上发帖

```
- (void)postToWall 
{

FBStreamDialog *dialog = [[[FBStreamDialog alloc] init] autorelease];
dialog.userMessagePrompt = @"Enter your message:";
dialog.attachment = [NSString stringWithFormat:@"{\"name\":\"Facebook Connect for iPhone\",\"href\":\"http://developers.facebook.com/connect.php?tab=iphone\",\"caption\":\"Caption\",\"description\":\"Description\",\"media\":[{\"type\":\"image\",\"src\":\"http://img40.yfrog.com/img40/5914/iphoneconnectbtn.jpg\",\"href\":\"http://developers.facebook.com/connect.php?tab=iphone/\"}],\"properties\":{\"another link\":{\"text\":\"Facebook home page\",\"href\":\"http://www.facebook.com\"}}}"];
[dialog show];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:30:43.057

如果您想发布到您的墙上认为您的 FB 应用程序不显示对话框，您可以这样做

```
NSString *message = @"some text";
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:message, @"message",nil];                          
[fb requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; //fb here is the FaceBook instance. 
```

并且您肯定会在用户登录并授权权限后执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:03:24.733

[您还可以从facebook官方发布的demo “Hackbook for iOS”](https://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook)中学习如何发布墙和其他iOS Facebook开发的基本实践

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:06:50.593

NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:1];

```
[variables setObject:@"this is a test message: postMeFeedButtonPressed" forKey:@"message"];

FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"yourFriendFbID/feed" withPostVars:variables];

SBJSON *parser = [[SBJSON alloc] init];
NSDictionary *facebook_response = [parser objectWithString:fb_graph_response.htmlResponse error:nil];   
[parser release]; 
```

# c - 函数或类似于 linux 中“mountpoint”命令的系统调用

> ID：10410513
> 
> 赞同：0
> 
> 时间：2012-05-02T08:53:00.623
> 
> 标签：c, linux

我想要一个类似于 mountpoint 命令 Linux 的函数或系统调用。
（此命令将检查给定目录是否为挂载点）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T09:03:19.647

我不知道会执行此操作的实际系统调用，但您可以做的是比较您要检查的目录及其父目录的设备号。这可以用`stat`. 示例代码（省略错误检查）：

```
#include <stdio.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>

int main(void) {
  struct stat mp, mp_parent;
  stat("/boot", &mp);
  stat("/boot/..", &mp_parent);

  if (mp.st_dev != mp_parent.st_dev)
    printf("/boot is a mount point.\n");
  else
    printf("/boot is not a mount point.\n");

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:03:37.423

对这样的功能的需求通常（尽管并非*总是*）是一个危险信号，表明你没有接受系统的抽象......你应该重新考虑你正在做的任何事情。如果您根据某物是否是挂载点在软件中做出某些选择...请考虑将替代行为作为可以通过脚本控制的参数。人们可以通过使用本机 mountpoint 命令或其他任何方式参数化您的程序以采用该行为。

除了免责声明，这里有一个实现`mountpoint.c`：

[https://fossies.org/linux/sysvinit/src/mountpoint.c](https://fossies.org/linux/sysvinit/src/mountpoint.c)

...以及有关“测试文件类型”的参考

[http://www.aquaphoenix.com/ref/gnu_c_library/libc_160.html](http://www.aquaphoenix.com/ref/gnu_c_library/libc_160.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T14:58:13.643

编写自己的应用程序来解析`/proc/mounts`. 然后将您的路径与来自的路径进行比较`/proc/mounts`。如果它们相等，则路径是安装点。

# android - 是否可以通过一次调用 Canvas.drawText() 来显示多色文本？

> ID：10410515
> 
> 赞同：10
> 
> 时间：2012-05-02T08:53:07.097
> 
> 标签：android, android-canvas

我想使用 Canvas.drawText() 来显示多色文本。更具体地说，我想突出显示传递给 drawText() 方法的文本的子字符串。

文本采用 SpannableString 的形式，其中包含 0 个或多个 ForegroundColorSpan 对象。

查看 Canvas 代码，似乎对传递的 CharSequence 进行了 .toString() 调用，这意味着这是不可能的。

有替代方法吗？

编辑：文本可能偶尔会发生变化（全部变化，而不是增量）。此外，自定义视图中可能有多个文本位于不同的不相关位置。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-02T09:16:10.787

是的，可以使用[Layout](http://developer.android.com/reference/android/text/Layout.html)类之一。这些是用于将文本绘制到画布的辅助类，它们支持 Spannables。如果您的文本没有更改，请使用 StaticLayout。

**例子**

将此添加到您的自定义视图类

```
private StaticLayout layout; 
```

将此代码放入您的`onLayout`或`onSizeChanged`

```
Spannable wordtoSpan = new SpannableString("I know just how to whisper, And I know just how to cry,I know just where to find the answers");  

wordtoSpan.setSpan(new ForegroundColorSpan(Color.BLUE), 15, 30, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

TextPaint paint = new TextPaint();
paint.setTextSize(20f);
paint.setColor(Color.RED);
layout = new StaticLayout(wordtoSpan, paint, getWidth(), Alignment.ALIGN_NORMAL, 1, 0, false); 
```

然后在您的绘图方法中只需调用

```
layout.draw(canvas); 
```

如果您的文本经常更改，您可以使用`DynamicLayout`.

```
Editable.Factory fac = Editable.Factory.getInstance();
Editable edit = fac.newEditable(wordtoSpan);
DynamicLayout layout = new DynamicLayout(edit,paint,getWidth(),Alignment.ALIGN_CENTER,1,0,false); 
```

使用编辑对象更改文本

```
edit.append("hello"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:27:51.493

每当您为该视图编写该文本时，您都可以设置 **thatView.setBackgroundResource(R.drawable.multicolor);** 和

在**multicolor.xml**中 写入

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
android:shape="rectangle"> 
    <gradient 
            android:startColor="@color/tabBgStart"
            android:endColor="@color/tabBgEnd"
            android:angle="270"/> 
</shape> 
```

希望它肯定会起作用

要更改文本颜色，您可以使用**yourView.setTextColor(R.drawable.multicolor);**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:29:25.597

我没有在 Canvas 中使用过。请参阅下面的代码我如何在 textview 中使用它。

```
public TextView getTextClipArt1(){
    TextView textView = new TextView(context);
    Typeface tf = new MyTypeface(context, 0).getTypeface();

    Shader textShader=new LinearGradient(0, 0, 0, 30,
            new int[]{Color.GREEN,Color.BLUE},
            new float[]{0, 1}, TileMode.CLAMP);

    textView.setTypeface(tf);
    textView.getPaint().setShader(textShader);
    textView.getPaint().setStyle(Paint.Style.STROKE);
    textView.getPaint().setStrokeWidth(2);
    textView.setText("ABC");
    textView.setTextSize(30);
    textView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    return textView;
} 
```

您现在可以在画布上将 textview 绘制为位图，尽管我认为这些方法也存在于绘画类中。希望对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:06:15.890

如果您使用 TextView，请尝试这样的事情

```
String multiColorText = "<font color=0xff0000>Multi</font><font color=0x000000>Color</font><font color=0xccffff>Text</font>";

textView.setText(Html.fromHtml(multiColorText)); 
```

**编辑：** 对于 SpannableString，请检查以下内容是否对您有帮助

```
Spannable WordtoSpan = new SpannableString("partial colored text"); 

WordtoSpan.setSpan(new ForegroundColorSpan(Color.BLUE), 2, 4, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

# actionscript-3 - 将 FLV 作为特定类嵌入 FLEX

> ID：10410516
> 
> 赞同：0
> 
> 时间：2012-05-02T08:53:15.723
> 
> 标签：actionscript-3, flash, apache-flex, embed, flv

在 Flash 创作工具中，我可以将**FLV**文件嵌入为我希望的**任何类**，只要该类是**MovieClip**的子类。这是通过选择**“Export for ActionScript”**选项并输入一个扩展电影剪辑的**“基类”**来实现的。

我也需要使用 Flex 来实现这一点。如何嵌入 FLV 并使其成为 MovieClip 扩展类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:05:48.680

根据[这些文档，听起来您无法嵌入 FLV](http://livedocs.adobe.com/flex/3/html/help.html?content=embed_4.html)

去引用：

> 您可以在 Flex 应用程序中嵌入任何文件类型作为位图数组。但是，Flex 不会识别或处理除上述文件之外的文件。如果您嵌入任何其他文件类型，则必须提供转码逻辑以将其正确呈现给应用程序用户。

评论中甚至提到这是一个限制。如果可能的话，最好的办法是在运行时加载 flv 资产。

在 N AIR 应用程序 [包括移动设备] 中，您可以将 FLX 作为分发的一部分并从那里加载。在 Web 应用程序中，只需将其放在目录中即可。

# sql-server - SQL Server：如何改进基于 XQuery 的 GROUP_CONCAT

> ID：10410520
> 
> 赞同：0
> 
> 时间：2012-05-02T08:53:36.570
> 
> 标签：sql-server, sql-server-2008, xquery

我有以下查询来使用逗号连接值：

```
[Xml].query('for $x in //Name return concat($x, ", ")').value('.', 'nvarchar(max)') 
```

`value()`是否可以仅使用（不使用）来编写它`query()`？

# python - OpenCV Python保存jpg指定质量；给出 SystemError

> ID：10410521
> 
> 赞同：29
> 
> 时间：2012-05-02T08:53:39.107
> 
> 标签：python, opencv, jpeg

我刚刚在 Windows 7（32 位）/Python 2.7.3 上安装了最新的 OpenCV 2.4，
但我仍然遇到使用 beta 版本时遇到的相同错误：

```
>>> import cv2
>>> a = cv2.imread(r"DMap.jpg")
>>> a.shape
(1080, 1920, 3)
>>> cv2.imwrite('img_CV2_90.jpg', a, [cv2.IMWRITE_JPEG_QUALITY, 90])
Traceback (most recent call last):
  File "<input>", line 1, in <module>
SystemError: error return without exception set 
```

有任何想法吗 ？使用元组而不是列表，或在序列中添加尾随 0 无济于事 - 同样的错误。

谢谢 - 塞巴斯蒂安哈斯

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-04T21:23:24.887

这可能是由于`imwrite()`从 Python 到 C 的参数包装错误`cv2.IMWRITE_JPEG_QUALITY`（它是“long”类型），并导致一些奇怪的问题。您应该尝试将此常量转换为“int”类型：

```
cv2.imwrite('img_CV2_90.jpg', a, [int(cv2.IMWRITE_JPEG_QUALITY), 90]) 
```

对我来说它解决了这个问题（python 2.7.2，opencv 2.4.1）

# ruby-on-rails - 使用 Ruby 删除 URL 的一部分

> ID：10410523
> 
> 赞同：5
> 
> 时间：2012-05-02T08:53:42.010
> 
> 标签：ruby-on-rails, ruby, url, query-string

从 Ruby 中的 URL 中删除查询字符串可以这样完成：

```
url.split('?')[0] 
```

其中*url*是完整的 URL，包括查询字符串（例如`url = http://www.domain.extension/folder?schnoo=schnok&foo=bar`）。

有没有更快的方法来做到这一点，即不使用*split*，而是使用 Rails？

**编辑：**目标是从重定向`http://www.domain.extension/folder?schnoo=schnok&foo=bar`到`http://www.domain.extension/folder`.

**编辑：**我用过：

```
url = 'http://www.domain.extension/folder?schnoo=schnok&foo=bar'
parsed_url = URI.parse(url)
new_url = parsed_url.scheme+"://"+parsed_url.host+parsed_url.path 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-06-24T07:19:45.003

`fragment`如果您解析并设置& `query`to`nil`而不是重建 URL，则更容易阅读且更难搞砸。

```
parsed = URI::parse("http://www.domain.extension/folder?schnoo=schnok&foo=bar#frag")
parsed.fragment = parsed.query = nil
parsed.to_s

# => "http://www.domain.extension/folder" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T09:17:55.433

```
 url = 'http://www.domain.extension/folder?schnoo=schnok&foo=bar'
 u = URI.parse(url)
 p = CGI.parse(u.query)
 # p is now {"schnoo"=>["schnok"], "foo"=>["bar"]} 
```

看一下：[如何从 ruby​​ on rails 中传递的 url 获取查询字符串](https://stackoverflow.com/questions/7316656/how-to-get-query-string-from-passed-url-in-ruby-on-rails)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-14T16:20:08.927

您可以使用 Regex 获得性能

```
'http://www.domain.extension/folder?schnoo=schnok&foo=bar'[/[^\?]+/]

#=> "http://www.domain.extension/folder" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:11:31.337

可能不需要拆分网址。当您访问此链接时，您将两个参数传递给后端：

`http://www.domain.extension/folder?schnoo=schnok&foo=bar` `params[:schnoo]=schnok` `params[:foo]=bar`

尝试监控你的日志，你会看到它们，然后你可以直接在控制器中使用它们。

# sql - SELECT column FROM tab1 WHERE test=test AND (SELECT col FROM tab2 WHERE qwe=qwe)？是否可以？

> ID：10410530
> 
> 赞同：1
> 
> 时间：2012-05-02T08:54:22.743
> 
> 标签：sql, postgresql, subquery

如何进行这样的查询：

```
SELECT column1 FROM table1 WHERE ppp=$parameter 
AND (SELECT * FROM table2 WHERE parameter=$parameter AND qweqwe=$parameter2) 
```

PS：'$' 不是来自 PHP，我只是表明这个值是可变的。

实际上，我需要`AND qweqwe<650`在第二个查询中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:57:57.843

也许是这样的：

```
SELECT 
   column1 
FROM 
   table1 
WHERE 
   ppp=$parameter 
   AND EXISTS
       (
           SELECT
               NULL
           FROM
               table2
           WHERE
               table1.ppp=table2.parameter
               AND qweqwe<$parameter2
    ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T08:57:20.390

```
SELECT column1 FROM table1 WHERE parameter=$parameter 
AND  exists 
(SELECT 1 FROM table2 WHERE table2.parameter=table1.parameter AND table2.qweqwe=$parameter2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:06:41.893

这取决于你的数据。您可以使用如先前答案中所示的存在或使用连接。

```
 SELECT column1  FROM table1 
 join table2 on table1.ppp=table2.parameter  and  table2.qweqwe=$parameter2
 where table1.ppp=$parameter 
```

在大多数情况下，join 会比存在时快得多。但事实证明，如果 table2 中的每条记录有多个 recotd，则必须使用 distinct

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:55:47.240

你到底想做什么？第一个 AND 之后的东西应该是合乎逻辑的，例如

```
... AND 650<(SELECT qweqwe FROM table2 WHERE parameter=$parameter2) 
```

# svn - 在 Windows XP 上安装 TortoiseSVN 1.6.12 时出现问题

> ID：10410538
> 
> 赞同：0
> 
> 时间：2012-05-02T08:54:45.060
> 
> 标签：svn, tortoisesvn, windows-xp

我为 Windows XP SP1 安装了 TortoiseSVN 1.6.12 但它不工作。据我所知，当我右键单击任何文件夹时，上下文菜单中应该有一个*Checkout选项，但我什么也没看到。*我已经多次重新启动我的电脑，但这并没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:21:10.787

为什么没有安装 SP3？这将允许您安装 TortoiseSVN 的最新版本 1.7.6。

检查*控制面板 > 软件*是否安装正确。

还要确保您安装了正确的版本。32 位和 64 位版本之间似乎存在差异：

[http://tortoisesvn.net/faq.html#nomenus](http://tortoisesvn.net/faq.html#nomenus)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:09:40.430

**更新**：首先检查 Sebastian 的 32/64 位假设。它看起来更合理。

'Tortoise SVN' 项目是否出现在右键菜单中？如果“是”：转到*开始 -> 所有程序 -> Tortoise SVN -> 设置 -> 常规 -> 上下文菜单*。看看它是否选中了适当的框。

如果“否” - 你在*Start -> All Programs中有**Tortoise SVN*吗？如果没有 - Tortoise 根本没有安装。如果“是” - 那么你需要进一步挖掘。

# asp.net-mvc-3 - MVC3 导航属性属性和客户端验证

> ID：10410541
> 
> 赞同：0
> 
> 时间：2012-05-02T08:54:55.197
> 
> 标签：asp.net-mvc-3, attributes, validation, navigation-properties

我正在尝试进入 MVC3 的第一步，并且遇到了将模型中的导航属性转换为视图的问题。似乎在视图中导航属性不允许客户端验证，也没有选择“显示”标签属性。

我有以下简单模型：

```
public class Entity
{
    [Key,
    ScaffoldColumn(false)]
    public int Entity_Id { get; set; }

    [Display(Name = "Entity Name"),
    Required(ErrorMessage = "Please enter the entity name."),
    StringLength(150, ErrorMessage = "Please ensure that the entity name is under 150 characters.")]
    public string Entity_Nm { get; set; }

    [Display(Name = "Entity Type"), 
    Required(ErrorMessage="Please select the entity type"),
    ForeignKey("EntityType")]
    public int EntityType_Id { get; set; }

    public virtual EntityType EntityType { get; set; }
} 
```

其中引用了这个模型：

```
public class EntityType
{
    [Key]
    public int EntityType_Id { get; set; }

    [Display(Name = "Entity Name"), Required(ErrorMessage="Please enter the entity type name.")]
    public string EntityType_Nm { get; set; }
} 
```

当我为此模型创建具有读/写操作和视图的控制器时，我得到以下创建表单：

```
<fieldset>
    <legend>Entity</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Entity_Nm)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Entity_Nm)
        @Html.ValidationMessageFor(model => model.Entity_Nm)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.EntityType_Id, "EntityType")
    </div>
    <div class="editor-field">
        @Html.DropDownList("EntityType_Id", String.Empty)
        @Html.ValidationMessageFor(model => model.EntityType_Id)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

除了实体类型下拉列表的标签之外，这很好，由于某种原因，它没有拾取模型中导航属性的“显示”属性（注意缺少空格）。尽管使用“必需”属性装饰了属性，但也没有为下拉列表启用客户端验证（服务器端验证没有问题）。客户端验证适用于其他字段。请注意，所有必需的 .js 脚本文件都已包含在内，并且我还在 web.config 中添加了相关的启用验证密钥。

有什么想法我在这里想念的吗？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:03:30.713

对于 DropDownList 显示问题，请尝试以下

> @Html.LabelFor(model => model.EntityType_Id)

# jsf - JSF：UI 组件在单个页面中动态重新绑定，无需重新加载。可能的？

> ID：10410543
> 
> 赞同：0
> 
> 时间：2012-05-02T08:54:59.530
> 
> 标签：jsf, binding, jsf-2, dynamic-binding

受到[考虑动态表渲染的文章的](http://balusc.blogspot.com/2006/06/using-datatables.html#PopulateDatatable)启发（感谢 BalusC），我终于在稍早之前得到[了我想要的确切结果。](https://stackoverflow.com/questions/10229453/)这给出了非常完美的结果，因为我可以控制每一列尊重业务逻辑要求的行为。但是，如果该表是我正在进行一些动态绑定实验的实验性“静态”页面的一部分，那就太酷了。

一旦我不得不将这些想法合并到现有代码中（或多或少愚蠢地对动态表达式一无所知），我就面临以下问题：动态绑定在页面加载期间似乎只工作一次. 好的，我认为我缺少将动态绑定 bean 和“主”页面 bean 分开（控制用户操作，例如用户单击树节点）。

我当前页面的一个简化实例如下（假设你在左边有一棵树，当你点击一个树节点时，你必须得到另一个数据表 [PrimeFaces used]）：

***一棵树，表格选择器（非常完美）***

```
<p:tree value="#{tableViewsPageBean.root}" var="node" dynamic="true" cache="false"
        selectionMode="single" selection="#{tableViewsPageBean.selectedNode}">
    <p:ajax event="select" listener="#{tableViewsPageBean.onNodeSelect}" update=":form:scene"/>
    <p:treeNode id="treeNode">
        <h:outputText value="#{node}"/>
    </p:treeNode>
</p:tree> 
```

***一旦用户单击上面的树节点，就会动态呈现的表***

```
<h:panelGroup id="scene">
    ...
    <h:panelGroup binding="#{dynamicDataTableBean.dataTableGroup}"/>
</h:panelGroup> 
```

被`tableViewsPageBean`定义为一个`@ViewScoped`bean，并且`dynamicDataTableBean`是一个`@RequestScoped`bean（我不应该认为它可能有帮助——我只是有一个想法）。

但是，对我来说，在页面加载期间仅请求一次以下代码：

```
public HtmlPanelGroup getDataTableGroup() { ... } 
```

我不知道，但是是否可以强制执行此代码以重新绑定上面提到的面板组中的组件**而无需**重新加载页面？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:56:24.183

对不起这是我的错。我有以下内容`web.xml`：

```
<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param> 
```

该选项必须设置为`true`。但是，我仍然遇到[这里](https://stackoverflow.com/questions/10384959)描述的问题。

# c++ - 在 Omnet 中初始化循环队列

> ID：10410545
> 
> 赞同：0
> 
> 时间：2012-05-02T08:55:02.157
> 
> 标签：c++, queue, omnet++

我是 Omnet 的新手，在初始化时遇到了一些困难`circular queue`。我认为这与初始化的方式相同，`C++`但我不太确定。例如，当我有一个变量 int 数字时。我将它初始化为`numbers = par("numbers")`. 同样，我有一个循环队列`cQueue queue`。现在，我将如何初始化它？我没有找到任何有用的文档。我想将队列初始化为一个空数组。类似的东西`queue=[]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:20:07.713

萨迪克沙。

这不是询问 Omnet++ 的最佳地点。当您有更多疑问时，请访问[https://groups.google.com/forum/?fromgroups#!forum/omnetpp](https://groups.google.com/forum/?fromgroups#!forum/omnetpp)

无论哪种方式，我都会尝试回答您的问题；）

你把一些事情搞混了。该类`cQueue`不是一个循环队列，而是一个简单的队列，用于存储指向 cObject 类型对象的指针。另外，为了初始化一个空队列，你只需要声明它，比如

```
cQueue queue("Named Queue"); // creates a named queue 
```

然后，您可以使用 for 循环将默认对象添加到队列中：

```
for (int i = 0; i < num; ++i) {
    queue.insert(obj); // get this object somewhere
} 
```

我希望这有帮助。

问候

# asp.net - IIS 错误页面阻止我在 ASP.NET Web API 中发现错误

> ID：10410546
> 
> 赞同：1
> 
> 时间：2012-05-02T08:55:02.683
> 
> 标签：asp.net, .net, exception-handling, asp.net-web-api

我正在使用 ASP.NET Web API。在某些时候，在执行操作之前抛出异常（可能在控制器的 DI 期间），但我无法追踪它，因为我只是得到一个罐装的 IIS 错误页面。我不知道如何获取异常信息。

如何获得一些有用信息的回复？

编辑：我已经验证自定义 ExceptionFilter 将响应控制器抛出的异常，但不会响应*我*认为在任何控制器代码执行之前发生的异常。在 Global.asax 中添加代码`Application_Error()`也不会响应异常。该框架似乎对此异常视而不见。所以这很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:57:24.650

在应用程序日志中检查服务器上的 Windows 事件日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:57:29.967

您知道如何配置（或关闭）[自定义错误](http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:20:47.677

你试过添加这个吗

```
<system.webServer>
    <httpErrors existingResponse="PassThrough" />
</system.webServer> 
```

在配置文件中的配置节点下。它将通知 IIS7.5 忽略 IIS 设置并将错误传递给站点。

# jquery - Jquery 弹出模型窗口，如 mydala.com

> ID：10410547
> 
> 赞同：0
> 
> 时间：2012-05-02T08:55:07.803
> 
> 标签：jquery

我是 Jquery 和网络开发的新手。我只是在学习它。对于我的人员使用，我需要一个订阅弹出窗口，例如[http://www.mydala.com/](http://www.mydala.com/)。

除非他关闭站点，否则弹出窗口仅针对特定用户出现一次。

请帮助我，我需要怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:59:50.670

您可以使用[Jquery 对话框](http://jqueryui.com/demos/dialog/)并根据您的使用修改 css

（或）试试这个插件[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

**[演示](http://jsfiddle.net/duXbZ/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:00:35.713

检查这个网站[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)。它展示了如何使用 Jquery 创建一个对话框。我在我的项目中使用这个对话框，我没有遇到任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:01:24.707

如果您检查该网站的来源，您会看到它使用的是[Facebox](http://defunkt.io/facebox/)插件。

# tsql - 使用动态查询时的语法问题

> ID：10410561
> 
> 赞同：1
> 
> 时间：2012-05-02T08:56:15.570
> 
> 标签：tsql, sql-server-2005

查询一：

```
 SET @sql2 = 'insert into TempReport   
  select ID, max(TransactionTime),0 from  ClubTransaction with (nolock)  
  where ClubcardID in (select ClubcardID from TempCC)   
  and ClubcardTransaction.OfferID  not in (119,120,121)  
  group by ClubcardID' 
  exec (@Sql2) 
```

查询 2：

```
 delcare @OfferID varchar(50)
  set   OfferID='1,112,445,'  
  SET @sql2 = 'insert into TempReport   
  select ID, max(TransactionTime),0 from  ClubTransaction with (nolock)  
  where ClubcardID in (select ClubcardID from TempCC)   
  and ClubcardTransaction.OfferID not in (Select Item From dbo.fnSplit(@OfferID,'','')   
  group by ClubcardID'    
  exec (@Sql2) 
```

查询 1 工作正常。在 query2 中，我将替换为 de 定义的变量，在该变量中我传递给函数 fnSplit，在该函数中我用逗号分隔值。我收到一条错误消息`Must declare the scalar variable "@OfferID"`。请让我知道这里的问题在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:01:55.047

您必须从外部输入值并将 ' 替换为 "：

查询 2：

```
 declare @OfferID varchar(50)
  set   OfferID='1,112,445,'  
  SET @sql2 = 'insert into TempReport   
  select ID, max(TransactionTime),0 from  ClubTransaction with (nolock)  
  where ClubcardID in (select ClubcardID from TempCC)   
  and ClubcardTransaction.OfferID not in (Select Item From dbo.fnSplit(' + replace(convert(varchar(4000), @OfferID), '''', '''''') + ',"","")   
  group by ClubcardID'    

  exec (@Sql2) 
```

* * *

**另一种解决方案**（也是更好的解决方案）是使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

* * *

请注意，动态 SQL 是一种进行 sql 注入的方法，您应该避免使用它。

# iphone - 试图重新加载表但给出异常“NSInvalidArgumentException”

> ID：10410563
> 
> 赞同：0
> 
> 时间：2012-05-02T08:56:16.600
> 
> 标签：iphone, uitableview, reload, nsexception

我有一个使用 iboutlet 创建的表视图。当我尝试重新加载表时，它给出了这个异常。由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，`reason: '-[NSCFString objectAtIndex:]:`无法识别的选择器发送到实例`0x5949310`“

```
IBOutlet UITableView *tableStudent; 
```

这是 .h 和 .m 文件。

**。H**

```
IBOutlet UITableView *tableStudent;

-(IBAction)enabeluser; 
```

**.m**

```
 -(IBAction)enabeluser{
   [tableStudent reloadData];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:11:49.267

当您引用不存在的对象时会发生 NSInvalidArgumentException。您可能在类中发布了数据源或 tableview 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:43:28.040

您调用 realodData 方法时，您的数组已被释放。

# android - 在 Android 中动态更新启动器图标

> ID：10410565
> 
> 赞同：2
> 
> 时间：2012-05-02T08:56:36.720
> 
> 标签：android

我正在尝试在 android 的启动器图标中放置一个动态值，因为消息图标中将显示消息数量。由于图标是静态的并在应用程序启动之前初始化，有什么方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:02:15.553

简单的答案是[你不能这样做，](https://stackoverflow.com/questions/9055836/make-a-dynamic-launcher-icon)这个[问题也是一样的](https://stackoverflow.com/questions/1103027/how-to-change-an-application-icon-programmatically-in-android)。但是可能有一些我不知道的先进的棘手方法/方式。

但是您可以尝试开发[动态变化的小部件](http://developer.android.com/guide/topics/appwidgets/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:00:32.427

对于 Android 启动器图标，您不能。是不可能的。（或通过制作您自己的启动器）唯一的一件事是您必须为此目的制作一个[Android-Widget 。](http://android-developers.blogspot.in/2009/04/introducing-home-screen-widgets-and.html)它看起来像一个应用程序图标。但它将充当小部件。

还要[制作一个动态启动器图标](https://stackoverflow.com/questions/9055836/make-a-dynamic-launcher-icon)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:01:12.770

您必须将图标设计为选择器而不是可绘制的。看看[这个](https://stackoverflow.com/questions/9603770/application-launcher-icon-to-show-update-is-available)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:07:23.250

您无法更新，因为它与 manifest.xml 相关的东西只能通过软件升级才能实现。

# user-interface - Gui 测试时间太长 - 你的方法是什么？

> ID：10410569
> 
> 赞同：7
> 
> 时间：2012-05-02T08:57:03.217
> 
> 标签：user-interface, testing, selenium, integration-testing, gui-testing

我们有一个典型的 Web 应用程序堆栈。针对应用程序执行了 120 个 selenium (webdriver) 测试。这需要大约 1 小时。我们将它们作为构建链“编译 > 单元测试 > 集成测试 > gui 测试”的一部分来执行。gui 测试占用了大量时间，我们想知道如何更好地构建它们。目前它们是“快乐的案例和不快乐的”案例测试。它们非常稳定，即它们不会因为程序员错误而失败。

我们希望缩短构建时间，最重要的部分是 gui 测试。我们希望基于“客户旅程”来做到这一点，即指定（与业务人员一起）一些典型的用例并测试它们（快乐路径）而不是测试太多......

你们如何构建你的 gui 测试？这是我想到的一些想法

*   只执行快乐路径测试
*   做一个“客户旅程测试”，即一次做几个快乐路径测试（“点击页面”）
*   只取业务指定的“前 10 名”（关键任务）
*   前 10 名 + “其余所有”作为夜间构建（一次）

我会很感激你的想法

谢谢马塞尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T09:32:14.847

夜间是进行 Selenium 测试的最佳时间 - 你只需要记住“不要关闭我！” 电脑上的便签:)。

此外，当夜间开始太短而无法运行所有测试时，总会有[Selenium Grid 。](http://selenium-grid.seleniumhq.org/)使用 Grid，您可以在多台机器上并行运行测试！

我们有几个适用于不同情况的测试[套件。](http://www.mkyong.com/unittest/junit-4-tutorial-5-suite-test/)在主要版本发布之前（测试、预发布、生产），一切都在运行。通常（在高峰期每天甚至每小时）只有“用户通过应用程序的快速正常路径”套件运行。如果有人“修复”了一个大错误，那么与该应用程序部分相关的测试就会运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T11:50:05.157

An hour seems absolutely fine to me.

One suggestion could be to decide which of the tests come under smoke tests, and are required to run every night. That is, tests that show the **core** functionality of your web application is still intact and working - other more detailed tests can be run at different times (once every few days?).

With that said, ours take around 2 hours - the only problem comes when one test has failed, you fix it, commit it, but then have to wait a very long time to verify it is fixed on the CI server.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T23:02:57.993

[TeamCity](http://www.jetbrains.com/teamcity/)允许在同一台机器上并行运行构建，因此 gui 测试不应与单元和集成测试一起在构建链中。UI 测试应该有单独的数据库和单独的构建，这样它们就不会浪费开发人员或手动测试人员或任何其他利益相关者的时间。TeamCity 将收集所有统计信息，发送有关构建失败的电子邮件等。
下一步是并行化。正如**Slanec**所说，您可以将 Grid（不需要几台机器）与[Mbunit](http://www.gallio.org/)（c#）或[TestNG](http://testng.org/)（java）一起使用。在 Grid 的帮助下，您可以将测试执行时间减少 10 倍，因此运行所有测试只需 6（！）分钟。
您也可以将一些测试合并到更大的测试中（但这会导致发现失败原因的时间增加并使测试难以维护）。
在这些步骤之后，可以在每次源提交后执行 Gui 测试，并提供对应用程序错误状态的快速响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T20:38:49.303

好问题，好答案。

一个额外的考虑是您可以优先考虑您的 120 个 gui 测试：您可以按顺序运行它们，以便首先运行最重要的或最有可能失败的那些。这无助于缩短构建时间，但有助于更快地从构建中获得有用的反馈。

此优先级（您的前 10 名）不需要固定，但可以根据发布/迭代/完成的故事/天等进行更改。例如，您可能希望首先运行最新的 gui 测试。或者最近更改的那些。或者涵盖了最近更改的大部分代码。

据我所知，没有工具可以立即支持这一点，尽管在测试用例优先级划分领域正在进行相当多的（学术）研究。

# mysql - SQL 排名视图和分组依据

> ID：10410581
> 
> 赞同：0
> 
> 时间：2012-05-02T08:57:57.110
> 
> 标签：mysql, sql

谁能告诉我如何创建一个视图，该视图具有一个附加的 RANK 列，用于由其他一些列分组的值列？

```
ID
BALANCE
GROUP2
GROUP1
GROUP0
unique (GROUP0, GROUP1, GROUP2) 
```

问题是 VIEW 将计算的“排名”应该按那些`GROUP`s 分组（比如 0、1、2）。

```
ID
BALANCE
GROUP2
GROUP1
GROUP0
RANK 
```

谢谢。

编辑 ----------------------- 对不起，我应该解释更多。该`RANK`列是（GROUP0，GROUP1，GROUP2）的每组的“按余额排名”

所以我想要一个看起来像

```
ID  BALANCE  GROUP0  GROUP1  GROUP2  RANK
-----------------------------------------
    1000     0       0       0       1
    999      0       0       0       2
    1000     1       0       0       1
    999      1       0       0       2 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:51:07.890

不是一个明确的问题。这是你想要的吗？

```
Select 
  id,
  balance,
  group1,
  group2,
  group3,
  row_number() over(partition by group1, group2, group3) as rank
from your_table. 
```

您可以根据需要在 over 子句中添加 order by，例如：

```
 row_number() over(partition by group1, group2, group3 order by id) as rank 
```

# assembly - 寄存器寻址模式与直接寻址模式

> ID：10410584
> 
> 赞同：5
> 
> 时间：2012-05-02T08:58:18.500
> 
> 标签：assembly, x86-16, addressing-mode

我在试卷中遇到过这个问题。它指出，哪种给定的寻址模式更快？为什么？

1.  寄存器寻址方式
2.  直接寻址方式

现在根据我的说法，寄存器寻址模式应该更快，因为寄存器是计算机中最快的内存位置。这是正确的答案吗？

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T15:11:10.713

两种寻址模式的区别是……地址的来源……对于直接寻址模式，要访问的项目的地址是指令中的立即数编码，因此指令更大，在某些情况下更大所以它需要更多的时钟周期来访问，理想情况下它在缓存中，因为它是紧跟在操作码之后的字节，并且操作码的获取通常会导致至少在它后面的一个缓存行被获取，除了最旧的 x86 平台如果没有其余指令以及已经获取并在管道中的接下来的几条/多条指令，我看不出你将如何到达执行指令的位置。即使是旧的 x86 处理器也有一定大小的预取队列。

寄存器寻址意味着正在访问的项目的地址在寄存器中。假设地址已经在那里，那么这会更快，因为您不会产生更大的指令、额外的周期、更多的缓存线为指令而烧毁。你必须小心这个参数的地方就是例如之前的指令将立即地址加载到寄存器中。

```
mov ax,[1000h]

mov ax,[bx] 
```

第二个比第一个快（对于可以在这个级别比较的东西），因为指令大小和额外的缓存烧毁和周期。

但

```
mov ax,[1000h]

mov bx,1000h    
mov ax,[bx] 
```

直接寻址更快，因为总体而言它需要更少的周期来获取和执行（对于可以比较的东西）。

我所说的可以比较的东西是什么意思？寻址模式与地址来自哪里有关。一旦您开始执行该指令并执行一个内存周期，那么两者相等，它是总线上的一个地址，比较两条指令的数据大小是相同的。对于某些测试程序，直接寻址可能更快，这很可能是因为对于该测试程序，数据始终在数据缓存中，而对于该测试程序，寄存器寻址版本不是或有时不是。所以两条指令之间可以比较的东西是指令的大小，这导致它烧毁的周期和缓存线。一个高速缓存行可以保存许多基于寄存器的指令，但只有少数基于直接/立即数的指令，因此，通过使用直接/立即，您在执行程序时会产生机会成本并总体上会产生更多的内存周期。是的，这些周期中的许多在任何远程现代的东西上都是并行的。

所以这些类型的问题与你是否理解指令集有关，​​取决于你返回了多少细节，你是否理解超出了实际成本是多少。同样，如果没有经验，简单地尝试一个实验可能会失败或没有任何区别，因为您必须围绕缓存进行实验。

我强烈推荐 Michael Abrash 的《汇编语言之禅》一书

[http://www.amazon.com/Zen-Assembly-Language-Knowledge-Programming/dp/0673386023/ref=sr_1_1?ie=UTF8&qid=1335971069&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/0673386023)

不是一本不完整的黑色大图形编程书随附的免费书。你可以得到一个完好的二手副本（买了第二个，它比我在商店买的原版更好，并且一直住在书架上）。8088和8086的细节在出书的时候就已经过时了，那不是书的重点，重要的是要明白如何攻克问题，如何思考问题，初步了解什么是问题在幕后进行。今天要复杂得多，仍然可以理解，但我建议先从这样的基础开始，然后再进入您今天看到的内容。Esp 与 x86（我强烈建议您在开始研究总线和缓存等时首先学习 x86 以外的任何东西）。 [http://github.com/dwelch67/amber_samples](http://github.com/dwelch67/amber_samples)。我已经清理并使用开源工具使 amber 处理器（arm2 克隆）可用，以便您可以看到处理器内部运行的东西。一个版本的琥珀有一个缓存。再次作为垫脚石，添加 mmus 和多核等只会增加复杂性。

超级简短的回答，当仅将两条指令相互比较时，直接寻址使用更长的指令进行编码，比寄存器寻址更多的周期。内存副作用、缓存等可能会混淆或抵消差异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T09:09:48.260

寄存器访问是最快的。但是，如果您正在访问的内存数据已经在 CPU 的数据缓存中，则内存访问速度可能会一样快。

# mysql - MySQL中存储过程的奇怪问题

> ID：10410585
> 
> 赞同：1
> 
> 时间：2012-05-02T08:58:18.490
> 
> 标签：mysql, stored-procedures

我需要在我们公司的 MySQL 服务器上添加一个新的存储过程。因为它只是略有不同，我使用了一个已经存在的，添加了附加字段并更改了过程的名称。现在奇怪的是，当我想执行该语句时，它返回：

```
Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 3 
```

引用此行中的 0： SET @update_id := 0; 奇怪的是，我使用 SHOW CREATE PROCEDURE 查询了该存储过程。它保存在我们的数据库中并且工作正常。我只是不能将它用作新的存储过程（无论我是尝试将它应用到新的测试数据库还是通过给它一个新名称在现有数据库上使用它）。我在互联网上搜索了解决方案。不幸无济于事。我什至设置了一个新数据库，其中包含一个新表和一些演示值，我尝试在其中执行原始的、未更改的存储过程。它返回完全相同的错误。

这是我正在谈论的当前使用和工作的存储过程：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `customer_getcard`(IN Iinstance INT, IN Itimebuy DOUBLE, IN Iprice DECIMAL(10,2), IN Itariff INT, IN Icomment VARCHAR(128))
BEGIN
  SET @update_id := 0;
  UPDATE customer_shop SET state = 1, id = (SELECT @update_id := id), instance=Iinstance, timebuy=Itimebuy, price=Iprice, comment=Icomment WHERE tariff=Itariff AND state = 0 LIMIT 1; 
  SELECT * FROM customer_shop WHERE id = @update_id;
END 
```

我希望你们能帮助我，因为我完全不知道出了什么问题。：/

问候，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:27:35.730

您需要定义一个替代的命令分隔符，因为 MySQL 当前认为您的命令在它遇到[`CREATE PROCEDURE`](http://dev.mysql.com/doc/refman/5.5/en/create-procedure.html)的第一个结束处（在第 3 行，在 之后），这将是一个语法错误，因为它在 a 之后但在相应的 之前：`;``0``BEGIN``END`

```
DELIMITER ;; -- or anything else you like

CREATE PROCEDURE
  ...
END;;        -- use the new delimiter you chose above here

DELIMITER ;  -- reset to normal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:59:01.713

MySQL存储过程不使用“：=”进行赋值，只使用“=”。

也不要认为“id = (SELECT @update_id := id)”是可以接受的。这是一个替代解决方案（未经测试）：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `customer_getcard`(IN Iinstance INT, IN Itimebuy DOUBLE, IN Iprice DECIMAL(10,2), IN Itariff INT, IN Icomment VARCHAR(128))
BEGIN
  select id into @update_id from customer_shop WHERE tariff=Itariff AND state = 0 LIMIT 1;
  UPDATE customer_shop SET state = 1, instance=Iinstance, timebuy=Itimebuy, price=Iprice, comment=Icomment where id = @update_id;
  SELECT * FROM customer_shop WHERE id = @update_id;
END 
```

如果没有要编辑的匹配行，您可能还需要放置错误处理程序。

# php - 将 sprintf 改成简单的 UNION

> ID：10410588
> 
> 赞同：-2
> 
> 时间：2012-05-02T08:58:21.843
> 
> 标签：php, mysql

```
$STH_1 = $DBH_R->query("SELECT table_name                        
                         FROM information_schema.tables                        
                        WHERE table_name                        
                         LIKE 'v_c_ei\_9%'
                         ");
$stmts_1 = array();

while (($row_1 = $STH_1 -> fetch_assoc()) !== null){

$table_name = $row_1['table_name'];
$stmts_1[] = sprintf("SELECT *  
                        FROM $table_name
                       WHERE (ei_code = '1117') AND (DAY(date_time) != '00') 

                     "); 

} 

$stmt_1 = implode("\nUNION\n", $stmts_1);  
$stmt_1 .= "\nORDER BY date_time ASC";  

$STH_5_2 = $DBH_R->query($stmt_1);

while (($row_5_2 = $STH_5_2 -> fetch_assoc()) !== null){ 
```

好的，上面的脚本工作正常。但是，我想（必须）改变它的功能。我必须在 UNION 之前进行选择（类似于 ORDER BY ... LIMIT），但我知道 - 这不起作用。解决方案是将 sprintif 更改为 UNION & UNION & UNION ...但问题是 - 我们不知道我们有多少表。

第一个查询中的表名看起来像

```
v_c_ei_9001
v_c_ei_9002
..........
v_c_ei_9030
..........
ect. 
```

比 q: 在我们不知道我们有多少表的情况下，如何将 sprintif（也可能是数组 $stmts_1）从 abowe 更改为 UNION？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:12:33.453

当您向 的每个组成部分添加`ORDER BY`和子句时，如下所示：`LIMIT``UNION`

```
while (($row_1 = $STH_1 -> fetch_assoc()) !== null){

$table_name = $row_1['table_name'];
$stmts_1[] = sprintf("SELECT *  
                      FROM $table_name
                      WHERE (ei_code = '1117') AND (DAY(date_time) != '00')
                      ORDER BY date_time DESC LIMIT 1 
                     "); 

} 
```

然后您执行以下操作：

```
$stmt_1 = implode("\nUNION\n", $stmts_1);  
$stmt_1 .= "\nORDER BY date_time ASC";                   // <---- remember this bit 
```

生成的字符串`$stmt_1`将如下所示：

```
SELECT *
FROM v_c_ei_9001
WHERE (ei_code = '1117') AND (DAY(date_time) != '00')
ORDER BY date_time DESC LIMIT 1
UNION
...
UNION
SELECT *
FROM v_c_ei_9030
WHERE (ei_code = '1117') AND (DAY(date_time) != '00')
ORDER BY date_time DESC LIMIT 1
ORDER BY date_time ASC                                 -- it's appearing down here! 
```

如您所见，您的最后一个组成部分`UNION`有**两个** `ORDER BY`子句，这是一个语法错误。删除`remember this bit`上面注释的行，否则（如果您需要重新排序统一查询）您必须将`UNION`a 子查询设置为执行重新排序的外部查询：

```
$stmt_1 = "SELECT * FROM ("
$stmt_1 = implode("\nUNION\n", $stmts_1);  
$stmt_1 .= ") ORDER BY date_time ASC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:37:27.147

如我所见，展示自己的简单方法是写任何东西，而不是考虑问题的解决方案。这种情况类似于评估问题 - 如果问题的复杂性超出了观众的参与范围，那么对它们进行负面评估比实际帮助提出问题的人更容易。不只是说话，而不是写任何东西。

对于所有可能面临此类问题的人，我给出了操作解决方案。

最简单的整体解决方案是指定执行主查询的表。通过 ORDER BY 在主查询中获得的内容是通过对主查询上的表执行预排序获得第一个查询的第一个辅助请求。

这样我们就避免了主查询中的 2x ORDER BY 问题，因为 ORDER BY 子句转移到了第一个辅助请求。

```
$STH_1 = $DBH_R->query("SELECT c.table_name 
                          FROM v_c_country c 
                    INNER JOIN information_schema.tables i ON i.table_name = c.table_name 
                      ORDER BY c.country_name_pl ASC                                      ");

while (($row_1 = $STH_1 -> fetch_assoc()) != null){

$table_name = $row_1['table_name'];

$stmts_1[] = sprintf("SELECT *,'$table_name' AS table_name, time(date_time) AS time_dt, date(date_time) AS date_dt, MAX(date_time) AS MAXdate  
                        FROM $table_name
                       WHERE ei_code = '1117' AND (DAY(date_time) != '00') 
AND date_time = (SELECT MAX(date_time) FROM $table_name WHERE ei_code = '1117' AND index_released = '1')
                  "); 

}

$stmt_1 = implode("\nUNION\n", $stmts_1); 

$STH_5_2 = $DBH_R->query($stmt_1); 
```

我经常在这里遇到对所问问题的宽容态度，你知道，如果有人问一个等待我们的问题 - 寻找 - 寻求帮助以解决问题。我真的非常感谢所有伸出援助之手并给出非常有用的答案的人。这些人真的会发生。

# php - 从地址栏会话中删除 www 扩展后不起作用

> ID：10410591
> 
> 赞同：-2
> 
> 时间：2012-05-02T08:58:32.120
> 
> 标签：php, www-authenticate

登录此 url 后`www.example.com`，如果我`www`从地址栏中删除扩展名，则登录详细信息值不会按会话保留。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:04:06.950

`session_start()`把它放在你的全局变量中，或者你的包含文件中，或者在任何调用之前添加它。

```
ini_set("session.cookie_domain",".example.com"); 
```

另一种选择是添加这个：

```
php_value session.cookie_domain .example.com 
```

给你的`.htaccess`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:02:06.597

尝试创建一个从非 www 到 www 的重定向函数。请参阅此主题：[使用 PHP 将 WWW 重定向到非 WWW 重定向](https://stackoverflow.com/questions/2079457/www-to-non-www-redirect-with-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:06:23.713

您的会话由 cookie 维护。当您登录到 www.example.com 时，默认情况下会为此域保存一个 cookie，该 cookie 由对该域中 URL 的每个请求表示。example.com 是一个不同的 cookie 域，因此不会显示 cookie。

解决方案是按照 Andrei 的建议从 example.com 重定向到 www.example.com，或者按照 Adnan 的建议使 cookie 域匹配——这两个都是有效的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:29:47.503

尝试清除浏览器缓存删除临时文件和预取文件从 cmd ipconfig/flushdns 清除 dns

重新打开浏览器登录，写入或删除 www 不应随会话而改变，因为它在服务器上运行。

确保您不是重新开始会话。

# magento - Magento复制后错误重定向到旧站点

> ID：10410598
> 
> 赞同：1
> 
> 时间：2012-05-02T08:58:45.633
> 
> 标签：magento, magento-1.6

我有这个问题：[移动后的Magento重定向问题](https://stackoverflow.com/questions/6871159/magento-redirection-problem-after-moving)

我更改了本地 xml，删除了缓存，更改了安全和不安全的链接，一切……它不起作用。唯一的区别是我在同一台服务器上复制了我的安装，并为第二次安装更改了子目录的名称。但我也在另一台服务器上尝试过，几乎是一样的，除了它一直将我链接回谷歌，而不是旧域。

我注意到，如果在另一台服务器上，我不更改子目录的名称一切正常（我不明白为什么），但我想在同一台服务器上安装 2 个相同的数据库和 2 个相同的数据库。我怎样才能？有什么问题？如何避免这种错误的重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:30:42.157

考虑 base_url 不需要重新索引。只需要清理缓存。你确定你做得很好？你用的是什么缓存系统？

为此，您在 local.xml 中进行了哪些更改？例如，您确定没有在 local.bak.xml 中留下旧信息吗？Magento 读取 /app/etc 中的每个 xml 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:53:21.613

Magento 严重依赖缓存。我注意到过去我必须在重定向更新之前清除我的浏览器互联网缓存。

此外，如果您克隆/复制了代码和数据库，您可能会在重写模块中使用旧 URL。在 magento 配置中移动和更改 URL 后，您是否尝试过重新加载所有索引？

在最坏的情况下，您可能必须更改数据库中 core_config_data 表中的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:57:17.313

我在移动时遇到了这个问题，最终我的 .htaccess 文件仍然有一个指向旧域的旧重写规则。如果其他人遇到此问题而其他建议不适用，请查找以下内容：

```
RewriteCond %{HTTP_HOST} !^www\.localhost\.com$ [NC]
RewriteRule ^(.*)$ http://www.localhost.com/$1 [R=301,L] 
```

并确保 localhost.com 显然与您的域匹配（上面只是使用 301 永久重定向重定向重写任何不以 to 开头的请求`www.localhost.com`（`http://www.localhost.com/`例如非 www localhost.com）

# android - 将文档写入 Android 应用程序

> ID：10410601
> 
> 赞同：-6
> 
> 时间：2012-05-02T08:59:00.280
> 
> 标签：android

我有一个需要转换为应用程序的文档文件。

例如，带有书的菜单和导航，而不是用户直接打开pdf。

有类似的应用程序，例如电子书应用程序，它们基本上只有一本电子书，但提供导航和逐页访问功能。

** 我的要求：在投反对票之前发表评论。这将有助于我未来的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T09:10:58.933

不要因投票被否决而气馁，但在提出此类问题之前，您必须进行足够的调查。

Thirumathiram 显示文本并不意味着它显示的是文本文件。文本可以从 sqlite 加载，也可以从 web 服务加载，甚至从文本文件加载。但文本文件不是应用程序。

1.  读取文本文件的内容
2.  将其加载到视图中（您必须具有分页逻辑）

我希望这会给你一个提示。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:17:30.413

请参阅[此示例](http://developer.android.com/guide/topics/fundamentals/fragments.html#Example)。原则上，它提供你需要的一切；您只需要替换包含内容的数组。

# javascript - Javascript数组变成对象结构

> ID：10410615
> 
> 赞同：11
> 
> 时间：2012-05-02T09:00:04.487
> 
> 标签：javascript, arrays, object

我遇到了一个奇怪的行为（也许它根本不奇怪，但只是我不明白为什么）一个包含一些对象的 javascript 数组。

由于我不是 javascript 专业人士，因此很可能会清楚地解释为什么会发生这种情况，我只是不知道。

我有在文档中运行的 javascript。它创建了一个类似于此的对象数组：

```
var myArray = [{"Id":"guid1","Name":"name1"},{"Id":"guid2","Name":"name2"},...]; 
```

如果我在像 JSON.stringify(myArray) 这样创建它的地方打印出这个数组，我会得到我所期望的：

```
[{"Id":"guid1","Name":"name1"},{"Id":"guid2","Name":"name2"},...] 
```

但是，如果我尝试从子文档访问此数组到此文档（由第一个文档打开的窗口中的文档），则该数组不再是数组。因此在子文档中执行 JSON.stringify(parent.opener.myArray) 将导致以下结果：

```
{"0":{"Id":"guid1","Name":"name1"},"1":{"Id":"guid2","Name":"name2"},...} 
```

这不是我所期望的——我期望得到与我在父文档中所做的一样的结果。

谁能向我解释为什么会发生这种情况以及如何解决它，以便从子窗口/文档寻址时数组仍然是数组？

PS。对象不会如上所述添加到数组中，它们是这样添加的：

```
function objTemp()
{
    this.Id = '';
    this.Name = '';
};

var myArray = [];

var obj = new ObjTemp();
obj.Id = 'guid1';
obj.Name = 'name1';

myArray[myArray.length] = obj; 
```

如果这有什么不同的话。

任何帮助都将不胜感激，既可以解决我的问题，也可以更好地了解正在发生的事情:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T09:17:42.003

最后一行可能会导致问题，您是否尝试过替换`myArray[myArray.length] = obj;`为`myArray.push(obj);`？可能是这样，因为你明确地创建了一个新索引，所以数组变成了一个对象......虽然我只是在这里猜测。您可以添加检索的子文档使用的代码`myArray`吗？

**编辑**

忽略上面的，因为它不会有任何区别。不过，不想吹嘘，我的想法是正确的。我的想法是，通过仅使用专有数组方法，解释器会将其视为`myArray`. 问题是：就父文档而言，它`myArray` *是*一个数组，但是由于您将数组从一个文档传递到另一个文档，因此会发生以下情况：

数组是一个对象，具有自己的原型和方法。通过将它传递给另一个文档，您将整个 Array 对象（值和原型）作为一个对象传递给子文档。在文档之间传递变量时，您实际上是在创建变量的副本（JavaScript 唯一一次复制 var 的值）。由于数组是一个对象，它的所有属性（和原型方法/属性）都被复制到`Object`对象的“无名”实例中。类似的事情`var copy = new Object(toCopy.constructor(toCopy.valueOf()));`正在发生......解决这个问题的最简单方法，IMO，是使用父上下文来严格数组，因为在那里，解释器知道它是一个数组：

```
//parent document
function getTheArray(){ return JSON.stringify(myArray);}
//child document:
myArray = JSON.parse(parent.getTheArray()); 
```

在此示例中，var 在仍被视为`myArray`真正的 JavaScript 数组的上下文中被字符串化，因此生成的字符串将是您所期望的。在将 JSON 编码字符串从一个文档传递到另一个文档时，它将保持不变，因此`JSON.parse()`将为您提供`myArray`变量的精确副本。

请注意，这只是黑暗中的又一次野刺，但现在我已经考虑了更多。如果我对此有误，请随时纠正我......我总是很高兴学习。如果这是真的，也请告诉我，因为这无疑迟早会成为我的陷阱

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:24:07.897

查看本文结尾[http://www.karmagination.com/blog/2009/07/29/javascript-kung-fu-object-array-and-literals/](http://www.karmagination.com/blog/2009/07/29/javascript-kung-fu-object-array-and-literals/)以获取此行为和解释的示例。

基本上它归结为 Array 是一种本机类型，并且每个帧都有自己的一组本机和变量。

来自文章：

```
// in parent window
var a = [];
var b = {};
//inside the iframe
console.log(parent.window.a); // returns array
console.log(parent.window.b); // returns object

alert(parent.window.a instanceof Array); // false
alert(parent.window.b instanceof Object); // false
alert(parent.window.a.constructor === Array); // false
alert(parent.window.b.constructor === Object); // false 
```

您对 JSON.stringify 的调用实际上执行了以下检查（来自 json.js 源），这似乎未能将其指定为数组：

```
 // Is the value an array?
        if (Object.prototype.toString.apply(value) === '[object Array]') {
           //stringify 
```

# android - 如何在布局中添加自定义视图？

> ID：10410616
> 
> 赞同：20
> 
> 时间：2012-05-02T09:00:05.303
> 
> 标签：android, android-layout, android-view

我有一个`GraphicsView`从该类扩展的`View`类，我想将这个`GraphicsView`类添加到我项目的主布局中。我怎样才能做到这一点？

```
static public class GraphicsView extends View {
        public GraphicsView(Context context) {
        super(context);
        }
        @Override
        protected void onDraw(Canvas canvas) {
        // Drawing commands go here
            Path rect = new  Path();
            rect.addRect(100, 100, 250, 50, Direction.CW);
            Paint cPaint = new Paint();
            cPaint.setColor(Color.LTGRAY); 
            canvas.drawPath(rect, cPaint);
        }
    } 
```

我的`main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linnnnlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <TextView 
        android:id="@+id/Customfont"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

     <View 
         android:id="@+id/view"
          android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-02T09:04:57.267

您需要提供扩展 View 的类的完整路径，

```
<com.blah.blah.GraphicsView
         android:id="@+id/view"
          android:layout_width="fill_parent"
        android:layout_height="wrap_content"/> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-02T09:44:51.943

如果我没记错的话，您需要提供更多构造函数来使用 xml 文件中的视图（将其添加到 xml 文件中，如“我和我们”建议的）。

```
public GraphicsView(Context context) {
    super(context);
}

public GraphicsView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public GraphicsView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
} 
```

更新：固定代码。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-03T06:12:23.177

我终于明白了，这里是 XML 代码的代码

```
<com.customfonts.namespace.BreakDownBar
         android:id="@+id/gview"
          android:layout_width="fill_parent"
        android:layout_height="20dip"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="10dip"
        android:background="@color/BreakDownBarBack"/> 
```

和班级

```
package com.customfonts.namespace;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.Path.Direction;
import android.util.AttributeSet;
import android.view.View;

public class BreakDownBar extends View {

    public BreakDownBar(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

        @Override
        protected void onDraw(Canvas canvas) {
                //Draw rectangle;
                Path rect = new  Path();
                rect.addRect(0, 0,250, 150,Direction.CW);
                Paint cpaint = new Paint();
                cpaint.setColor(Color.GREEN); 
                canvas.drawPath(rect, cpaint);
        }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-02T09:04:02.477

你需要这样做：

```
LinearLayout v = (LinearView) findViewById(R.id.linnnnlayout);
GraphicsView myView = new myGraphicsView(this);
v.addView(myView); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-02T09:39:27.550

因为您的自定义是java 编译器`View`中的内部类，所以会输出该类的名称。由于字符的原因，您不能直接将该名称用作 xml 布局中的名称，但您可以这样做：`Activity``ActivityName$GraphicsView``View``$`

```
 <view 
    class="com.package.here.ActivityName$GraphicsView"
    android:id="@+id/view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

where是声明您的类`ActivityName`的活动的名称。`GraphicsView`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T09:47:25.837

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LinearLayout v = (LinearLayout) findViewById(R.id.linearLayout);
    MyGraphics myView = new MyGraphics(this);
    v.addView(myView);
}
}

public class MyGraphics extends View {
public MyGraphics(Context context) {
    super(context);
}

@Override
protected void onDraw(Canvas canvas) {
    // Drawing commands go here
    Path rect = new Path();
    rect.addRect(100, 100, 250, 50, Direction.CW);
    Paint cPaint = new Paint();
    cPaint.setColor(Color.LTGRAY);
    canvas.drawPath(rect, cPaint);
}

} 
```

XML:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:id="@+id/linearLayout"> 
```

```
<TextView 
    android:id="@+id/Customfont"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

</LinearLayout> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-14T05:07:21.853

这对我有用，并在带有完整路径的 XML 中添加视图，并尝试为高度和宽度提供 wrapcontent。

```
public class RectangleView extends View {
    public RectangleView(Context context) {
        super(context);
    }

    public RectangleView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public RectangleView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Paint paint = new Paint();
        paint.setColor(Color.GRAY);
        canvas.drawColor(Color.BLUE);
        canvas.drawRect(10,10,50,50, paint);
    }
} 
```

# c++ - 在 VS 调用堆栈窗口中显示 DLL 的完整路径

> ID：10410619
> 
> 赞同：1
> 
> 时间：2012-05-02T09:00:22.400
> 
> 标签：c++, debugging

当我的应用程序崩溃时，我在调用堆栈窗口中看到 opencv_core220.dll 中发生了崩溃您可能会在[此处](https://www.dropbox.com/s/k9qgrk0ongq0giy/callstack.PNG)看到屏幕截图。

但我想看看这个 dll 的完整路径。有办法吗？事实上，我的 PC 上有几个这样的 dll，而且，其中一些名称相同但实际上不同。

请不要将我指向解释“Windows中的dll搜索顺序”的文章:)

我只想知道调用堆栈窗口中的完整路径。

提前致谢， 安东

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:03:12.940

您可以在调试中打开模块选项卡，在那里您将获得所有加载的二进制文件及其完整路径的列表：`Debug -> Windows -> Modules`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:16:36.530

MS VC 有一个工具叫做依赖，试试吧。：） 祝你好运

# session - 如何在同一个tomcat下共享存储在不同webapps会话中的数据

> ID：10410621
> 
> 赞同：0
> 
> 时间：2012-05-02T09:00:26.440
> 
> 标签：session, tomcat, share

我在一个tomcat下部署了几个webapps，每个都有自己的上下文，但是我需要在这些webapps之间共享登录用户信息，例如，当用户从webapp A登录时，它的id、name和其他信息都存储在会话中，当它尝试访问其他webapp时，我希望我们可以从会话中获取这些信息，根据servlet spce，会话不能在不同的webapps之间共享，有没有办法在部署在同一个tomcat中的不同webapps之间共享这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:13:47.437

不容易。Servlet API 不支持这种用法。做这件事有很多种方法：

1.  SSO 可以满足您的大部分需求。

2.  将信息存储在数据库中，并在需要时在其他 Web 应用程序中查找。

3.  创建/查找一些可从两个 Web 应用程序访问的共享存储（即某种形式的缓存）。您需要非常小心这种方法，以免造成任何内存泄漏。

4.  使用跨上下文请求在 Web 应用程序之间传递信息（有点难看，可能会产生安全问题）。

5.  可能有很多我没有想到的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:12:05.033

1.使用这个属性crossContext="true"

2.使用webservice管理用户权限

# asp.net-mvc - 网络发布后 Int32.ParseInt 抛出 FormatException

> ID：10410625
> 
> 赞同：1
> 
> 时间：2012-05-02T09:00:37.293
> 
> 标签：asp.net-mvc, asp.net-mvc-3, text-parsing

**更新**

我发现了问题，异常来自同一表单上的**第二个字段**，它确实应该提示它（因为它是空的）......我正在查看一个我认为来自尝试解析一个字符串的错误，事实上，它是因为试图解析另一个字符串......抱歉浪费你的时间。

**原始问题**

我完全被这个问题弄傻了。我基本上是在跑步`int.Parse("32")`，它会抛出一个`FormatException`. 这是有问题的代码：

```
private double BindGeo(string value)
{
    Regex r = new Regex(@"\D*(?<deg>\d+)\D*(?<min>\d+)\D*(?<sec>\d+(\.\d*))");
    Regex d = new Regex(@"(?<dir>[NSEW])");
    var numbers = r.Match(value);
    string degStr = numbers.Groups["deg"].ToString();
    string minStr = numbers.Groups["min"].ToString();
    string secStr = numbers.Groups["sec"].ToString();
    Debug.Assert(degStr == "32");
    var deg = int.Parse(degStr);
    var min = int.Parse(minStr);
    var sec = double.Parse(secStr);
    var direction = d.Match(value).Groups["dir"].ToString();
    var result = deg + (min / 60.0) + (sec / 3600.0);
    if (direction == "S" || direction == "W") result = -result;
    return result;
} 
```

我的输入字符串是`"32 19 17.25 N"`

上述代码在 ASP.NET MVC 3 Web 应用程序（使用 Razor 作为其视图引擎）上的 .NET 4 Web 托管服务 (aspspider) 上运行。

注意的断言`degStr == "32"`是有效的！此外，当我采用上述代码并在控制台应用程序中运行它时，它工作得很好。我在网上搜索了答案，没有...

有任何想法吗？

**更新（堆栈跟踪）**

```
[FormatException: Input string was not in a correct format.]
   System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) +9586043
   System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info) +119
   System.Int32.Parse(String s) +23
   ParkIt.GeoModelBinder.BindGeo(String value) in C:\MyProjects\ParkIt\ParkIt\GeoBinder.cs:42 
```

第 42 行是`var deg = int.Parse(degStr);`并注意异常在`System.Int32.Parse`（不是`System.Double`建议的那样）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:06:53.103

您错误地认为引发异常的是以下行：

```
int.Parse("32") 
```

这条线不太可能抛出异常。

事实上它是以下行：

```
var sec = double.Parse(secStr); 
```

在这种情况下`secStr = "17.25";`。

原因是您的托管服务提供商使用不同的文化，其中`.`不是小数分隔符。

您可以在 web.config 文件中指定文化：

```
<globalization culture="en-US" uiCulture="en-US" /> 
```

如果您不这样做，则`auto`使用 then 。这意味着可以根据客户端浏览器首选项设置文化（使用 Accept-Language HTTP 标头随每个请求一起发送）。

另一种可能性是在解析时指定文化：

```
var sec = double.Parse(secStr, CultureInfo.InvariantCulture); 
```

这样您就可以确定这`.`是不变文化的小数分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:24:05.173

测试这个（通过 PowerShell）：

```
PS [64] E:\dev #43> '32 19 17.25 N' -match "\D*(?\d+)\D*(?\d+)\D*(?\d+(\.\d*) )"
真的
PS [64] E:\dev #44> $Matches

名称 值
---- -----
17.25 秒
度 32
19 分钟
1 .25
0 32 19 17.25

```

因此，正则表达式正在使用所有三个命名捕获获取一个值，所有这些都将解析 OK（即，它不像`\d`匹配 U+0660: ARABIC-INDIC DIGIT ZERO 之类的东西，`Int32.Parse`无法处理）。

***但是***您不检查正则表达式是否确实匹配。

因此我怀疑`value`传递给函数的不是您期望的输入。在函数的开头放置一个断点（或日志记录）并获取`value`.

我认为正在发生的事情是：

*   `Value`不是你想的那样。
*   正则表达式无法匹配。
*   捕获是空的
*   `Int32.Parse("")`正在抛出（刚刚确认：它抛出 FormatException “输入字符串的格式不正确。”）

*附录*：刚刚注意到你对断言的评论。

如果事情看起来矛盾，回到基础：至少你的一个假设是错误的，例如。异常的行号中可能有一个减一（在转到该行号之前对文件进行编辑：很容易做到）。

在这种情况下，使用调试器单步执行是迄今为止最简单的方法。在每个表达式上检查*一切*。

如果您不能使用调试器，请尝试删除该限制，如果不是，IntelliTrace 怎么样？Othewrwise 使用某种日志记录（如果您的应用程序没有它，请添加它，因为您将来需要它来处理此类事情）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:58:13.107

尝试从字符串中删除非 unicode（如果有的话 - 不可见）字符：

```
string s = "søme string";
s = Regex.Replace(s, @"[^\u0000-\u007F]", string.Empty); 
```

## 编辑

另外 - 尝试查看它的十六进制值以查看它在哪里执行异常：

```
BitConverter.ToString(buffer); 
```

这将向您显示十六进制值，以便您验证...

还要粘贴它的值，以便我们看到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:05:37.000

事实证明，这是一个非问题。问题是异常来自同一表单上的第二个字段，它确实应该提示它（因为它是空的）......我正在查看一个我认为来自尝试解析一个字符串的错误，而事实上这是因为试图解析另一个字符串...

很抱歉浪费您的时间。

# sharepoint - SharePointWebControls:BooleanField - 复选框内的文本

> ID：10410627
> 
> 赞同：1
> 
> 时间：2012-05-02T09:00:47.703
> 
> 标签：sharepoint

我正在尝试为共享点网站打上烙印，在编辑模式下我有几个复选框。在一些我想显示文本的复选框中，如何？

前任：

```
<SharePointWebControls:BooleanField ID="Comments" runat="server" FieldName="Comments" /> 
```

我想在“这是评论”复选框中插入的文本

我试过了

```
<SharePointWebControls:BooleanField ID="Comments" runat="server" FieldName="Comments" />this is a comment</SharePointWebControls:BooleanField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:00:36.463

您可能会考虑为您的页面布局创建一个内容类型。此内容类型可以有一个名为“评论”的字段并具有自定义显示名称。

# java - 子类变量不会再次初始化

> ID：10410628
> 
> 赞同：0
> 
> 时间：2012-05-02T09:00:48.793
> 
> 标签：java

我有我的主课，我称之为我的子课。

我的子类包含一些公共静态变量，例如

```
 public class SubClass2 extends Main {

     public static  long a = 0;
     public static  long b = 0;
     public static  long c= 0;

    public void Analyze(int number)
    {
      b=2;

    //some code
     }
    } 
```

在main中，我调用SubClass2的对象。每次我在main中创建subclass2的新对象时，它都会初始化所有变量= 0，但是当我使用变量b的打印语句时，它会打印出来4.它将以前的值与新值相加。

![在此处输入图像描述](../Images/2a300eec2722a951c42941303c73974f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T09:01:51.630

在这种情况下，不应声明您的字段`static`。这就是为什么它们每次都没有被初始化的原因。一个`static`字段只初始化一次，然后由类的每个实例共享，并且取决于可访问性，也在类之外。

导致该值的逻辑`4`必须在您已替换为的代码中`//some code`，但这在这里并不真正相关。

如果出于某种原因这些确实应该是`static`每次实例化实例时都初始化的字段，那么您将不得不在类的构造函数中手动初始化它们。但我会认真质疑导致这种情况的设计......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T09:02:10.647

您正在使用静态变量。这些与您创建的任何对象无关。它们只是全局的、唯一的变量。您必须擦除`static`. 顺便说一句，将一个字段初始化为 0 是多余的。它已经初始化为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:50:38.040

你的问题体现了一个矛盾的术语。静态变量在加载类时初始化一次。如果要按实例初始化变量，请使用按实例（非静态）变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T09:04:13.947

如果你使用静态这个词，那么只有一个变量实例在使用它的所有创建的东西之间共享。删除静态，每次在方法中初始化时都会有一个新的但更重要的是单独的变量。

也许更好的措辞是实例方法可以并且将访问共享/静态变量！

# box2d - 如何根据角色行走/站立的坡度平滑旋转角色？

> ID：10410650
> 
> 赞同：2
> 
> 时间：2012-05-02T09:02:44.127
> 
> 标签：box2d, game-physics, box2d-iphone, physics-engine

我需要根据他（一个矩形）站立或行走的平台范围来旋转角色精灵。我根据他所站立的平台的坡度来旋转它就达到了效果。但是有两个问题：

首先，旋转不顺畅。当角色从一个平坦的平台走到一个倾斜的平台上时，它会立即旋转，并且由于这种旋转，它会被向上推一点。

其次，一旦他走下斜坡并再次走上平坦的平台，我就无法相应地旋转角色。这是因为此时角色会同时与一个平坦的平台和一个倾斜的平台（它们被放置在一起）发生碰撞，因此在几步之后，角色将疯狂地来回旋转，因为两个碰撞检测功能一起工作。

我试图通过检测角色的面来解决这个问题，并试图找出他的哪个点（左或右）首先接触到某物，但它不起作用，因为我只能检测到碰撞，而不是“无碰撞”或“当角色离开某个平台时”。

我已附上有关情况的说明。请帮忙，谢谢！

PS：由于我不允许发布图片，请访问：http: [//i.stack.imgur.com/jqPjt.png](http://i.stack.imgur.com/jqPjt.png)获取图片。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:36:29.840

你的轮换似乎关闭了。您需要围绕字符矩形的底部旋转。这将解决您的一些问题，但不是全部。

角色接触2个平台的情况需要处理。目前我猜你只是直接从平台中提取一个角度并将其分配给角色。这不会削减它，因为当您有不同的接触点时，您需要任意角度。

解决方案是在 2 个接触点之间创建一个向量，然后获取向量的分量`x,y`并调用`atan2(x, y)`. 这将以弧度给出触点之间的角度。确保以正确的方式获取参数！游戏开发需要您了解三角学和矢量数学。这里发生的是我们正在创建一个轴对齐的直角三角形，其斜边由两个接触点定义，然后我们翻转三角形并`tan = opp/adj`通过交换 x 和 y 分量来获得角度。

请注意，您需要确保始终以特定顺序给出接触点，否则您最终会以奇怪的角度旋转，因为您创建的三角形将面向另一个方向。您可能需要先根据 x 坐标进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:52:54.257

An easy solution for this example is to do collision-detection on the corners, and not the whole object. You can rotate the object on the point that touch in such an angle that the point that cut only touch. This solution only work if you angle up, and not down. To solve that you also do collision detection on the sides. You then rotate on the touching corner in such an angle that the side just touch.

# perl - cgi->param 默认使用 uri_unescape 吗？

> ID：10410654
> 
> 赞同：-2
> 
> 时间：2012-05-02T09:03:03.383
> 
> 标签：perl, character-encoding, internationalization, cgi

我曾经`$cgi->param('search_string');`在我的 Perl 脚本中检索一个 url 参数，但我怀疑该值在我得到它之前`$cgi->param`正在通过函数传递。`uri_unescape()`

例子：

1.  该表格有一个`search_string=ЛИКЕР ВИШНЕВЫЙ`
2.  该网址有一个`search_string=%41B%418%41A%415%420+%412%418%428%41D%415%412%42B%419`
3.  但`$cgi->param('search_string')`回报`ABA8AAA5B0+A2A8B8ADA5A2BBA9`而不是`%41B%418%41A%415%420+%412%418%428%41D%415%412%42B%419`我可以简单解码的回报。

这是我的代码中实际发生的事情：

我将这个 "ПЛЕНКА ПИЩЕВАЯ" 作为 $search_string;

```
$search_string =~ s/\s/+/g;
$search_string =~ s/\#/\%23/g;
$search_string =~ s/[^A-Za-z0-9\+\*\.\@\_\-]/uc sprintf("%%%02x",ord($&))/egx; 
```

`search_string=%41F%41B%415%41D%41A%410+%41F%418%429%415%412%410%42F`由此我在 URL 本身中得到了这个。

然后，当我使用`$cgi->param('search_string')`在另一端检索该值时，我得到了这个`"AFABA5ADAAA0 AFA8B9A5A2A0BF"`。这里的另一个问题是 $cgi->param('search_string') 似乎确实会自动调用 uri_unescape() ，这就是我得到`"AFABA5ADAAA0 AFA8B9A5A2A0BF"`.

我如何才能使最终结果返回给我`"ПЛЕНКА ПИЩЕВАЯ"`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:40:15.273

为了看看发生了什么，我整理了以下 CGI 脚本：

```
use open ':std', ':encoding(UTF-8)';
use strict; use warnings;
use CGI;
use Encode;

run();

sub run {
    my $cgi = CGI->new;
    if ( $cgi->param ) {
        show_result($cgi);
    }
    else {
        show_form($cgi);
    }
}

sub show_result {
    my $cgi = shift;

    my $search_term = decode('UTF-8', $cgi->param('search_term') );

    print $cgi->header(
        -type => 'text/plain',
        -charset => 'UTF-8',
    ), $search_term, "\n";
}

sub show_form {
    my $cgi = shift;
    print $cgi->header(
        -type => 'text/html',
        -charset => 'UTF-8',
    ),
    <<EO_HTML;
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Test</title>
</head>
<body>
<form name="search" id="search" accept-charset="UTF-8">
<p>Search term: <input type="text" name="search_term" id="search_term"></p>
<p><input type="submit"></p>
</body>
</html>
EO_HTML
} 
```

现在，当我运行它并将*ЛИКЕР ВИШНЕВЫЙ*复制并粘贴到输入字段时，我得到了完全相同的字符串回显给我。

Firefox 的位置字段实际上显示：`http://test.localdomain:8080/cgi-bin/test.pl?search_term=ЛИКЕР+ВИШНЕВЫЙ`但是将该字符串复制并粘贴到此文本框中给了我`http://test.localdomain:8080/cgi-bin/test.pl?search_term=%D0%9B%D0%98%D0%9A%D0%95%D0%A0+%D0%92%D0%98%D0%A8%D0%9D%D0%95%D0%92%D0%AB%D0%99`

# redis - Redis：是否可以通过其他键值对具有相同分数的有序集结果进行排序

> ID：10410655
> 
> 赞同：6
> 
> 时间：2012-05-02T09:03:09.720
> 
> 标签：redis, sortedset

```
ZADD myset 1 ad1
ZADD myset 1 ad2

SET order:ad1 1
SET order:ad2 2 
```

如何首先按有序集分数排序，然后按顺序值排序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T10:18:07.050

如果要存储结果（不改变数据存储方式），则可以使用[SORT](http://redis.io/commands/sort)命令。它可以应用于zset。

例如：

```
> zadd myset 1 albert
> zadd myset 1 joseph
> zadd myset 4 bertrand
> zadd myset 2 casimir
> zadd myset 3 alfred 
```

您可以按值排序：

```
> sort myset alpha
1) "albert"
2) "alfred"
3) "bertrand"
4) "casimir"
5) "joseph" 
```

您可以按分数和值排序：

```
> zrange myset 0 -1
1) "albert"
2) "joseph"
3) "casimir"
4) "alfred"
5) "bertrand" 
```

现在让我们为这些对象添加一个新属性：

```
> set order:albert 5
> set order:alfred 3
> set order:casimir 1
> set order:joseph 4
> set order:bertrand 2 
```

您可以按新的 order 属性排序：

```
> sort myset by order:*
1) "casimir"
2) "bertrand"
3) "alfred"
4) "joseph"
5) "albert" 
```

现在，如果您需要按分数和此 order 属性进行排序，那么您别无选择，只能在 zset 中实现 order 属性或在 order 属性中实现分数。

例如，在 zset 中添加 order 属性，我们得到：

```
> del myset
> zadd myset 1 5:albert
> zadd myset 1 4:joseph
> zadd myset 4 2:bertrand
> zadd myset 2 1:casimir
> zadd myset 3 3:alfred
> zrange myset 0 -1
1) "4:joseph"
2) "5:albert"
3) "1:casimir"
4) "3:alfred"
5) "2:bertrand" 
```

注意：在这种情况下，属性字段是根据字典顺序排序的，因此如果您需要数字顺序和多位数字，则可能必须对值进行规范化。有各种技巧可以做到这一点。例如，您可以存储“11”、“212”或“3123”，而不是存储“1”、“12”或“123”，第一个数字表示您号码的位数。

如果 score 和 order 属性都可以改变，这不是很方便，在客户端排序会更好。这可以通过在一侧检索带有分数的 zset 并在另一侧检索相应的 order 值来在两次往返中实现。

```
> zrange myset 0 -1 withscores
> sort myset by order:* get order:* get # 
```

由客户端加入两个结果（使用某种字典或关联数组），并排序以获得最终结果。

# jquery - Telerik DropDownList 在第二次调用对话框后在 JQuery 对话框中禁用

> ID：10410664
> 
> 赞同：1
> 
> 时间：2012-05-02T09:03:29.237
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui-dialog, telerik-mvc

我有几个 Telerik 的 DropDownList 控件，它们在 jQuery 对话框中呈现

它是一个“单页”ASP>NET MVC 应用程序，所以我有一个带有记录的网格，每次用户双击网格程序时都会显示 jQuery 对话框，该对话框使用 Ajax 调用控制器来呈现此对话框窗口和所有 Telerik 控件的部分视图绑定到模型属性。

当我第一次调用 jQuery 对话框时，一切正常

当我第二次调用 jQuery 对话框时，对话框打开，与模型的绑定发生得很好，但所有 DropDownList 控件似乎都被禁用了。我试图从 jScript 调用 enable() - 它没有帮助。

DatePicker 控件也会出现同样的问题，尽管在 DatePicker 中我可以手动编辑日期（在文本区域内）但无法显示日历选择器

因此，在此对话框内的 jQuery 对话框 Telerik MVC 控件的第二次调用之后，似乎失去了显示任何弹出 div 的能力（Telerik 的 DropDownList 和 DatePicker 类似，它们需要显示带有项目列表或日历的浮动 DIV单击箭头或日历图标），但在可编辑区域手动编辑文本仍然有效。

该问题似乎与[http://www.telerik.com/community/forums/aspnet-ajax/editor/radeditor-and-jquery-dialog.aspx](http://www.telerik.com/community/forums/aspnet-ajax/editor/radeditor-and-jquery-dialog.aspx)非常相似， 建议在对话后使用 onParentNodeChanged()（ '打开'）方法。但是**onParentNodeChanged**在 Telerik ASP.NET MVC Extnetions 中不存在，它是 Telerik Rad (ASP.NET AJAX) 控件的一部分，我不能从 jScript 调用它

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:21:04.013

使用 ajax 添加部分视图时，我遇到了类似的问题。当我加载视图时，控件似乎正确加载，但它们没有附加到 Telerik 脚本，所以我需要在渲染后触发它们。下面的代码示例：

```
//Action AddItem returns partial view which contains some standard inputs and telerik    date pickers
@Html.ActionLink("Add item", "AddItem", null, new { @class = "addNewItem" })

<div id=itemRows></div>

<script>
$(".addNewItem").click(function () {
    $.ajax({
        url: this.href,
        cache: false,
        success: function (html) {
            $("#itemRows").append(html);
        }
    });
    //I need to trigger all the datepickers to enable them (so I give datepicker class dateTime)
    $(".dateTime").tDatePicker({ format: 'd.M.yyyy' });
    return false;
});
</script> 
```

尝试使用 datepicker，看看它是否有效，相同的逻辑应该适用于下拉菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:30:58.370

`autoOpen`我们在设置为 false的 TinyMCE 和 Dialog 中遇到了这个问题。对我们有用的修复是使用对话框的`open`事件，如下所示：

```
$(element).dialog({ 
   // some more options...
   open: function (type, data) {
       $(this).parent().appendTo($("form:first"));
    }
}); 
```

# transactions - 无法在 Sql Server 2008R2 中回滚事务？

> ID：10410668
> 
> 赞同：1
> 
> 时间：2012-05-02T09:03:51.083
> 
> 标签：transactions, sql-server-2008-r2, rollback

我的测试表有两列：

```
id         int not null  
somecolumn varchar(10)) 
```

现在看看我的查询：

```
USE TRY
BEGIN TRANSACTION T1
INSERT INTO Test VALUES(7,'hi');
GO
INSERT INTO Test VALUES(8,'hi','ABC');
GO
PRINT @@ERROR
if @@ERROR>0
    ROLLBACK TRANSACTION T1
ELSE
    COMMIT TRANSACTION T1 
```

我知道我的第二个查询是错误的，所以我希望事务回滚，但它插入第一个查询然后显示此消息：

```
(1 row(s) affected)  
Msg 213, Level 16, State 1, Line 1
Column name or number of supplied values does not match table definition.
213 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:07:07.633

正如 Benedikt 已经说过的，我们不能在 BEGIN 和 END 之间使用 GO。如果您从上述事务中删除 GO，则由于写入错误的插入语句，语句甚至无法编译。TRY..CATCH 也不起作用（如果您尝试在执行阶段捕获错误并回滚事务）。

# java - 如何发送通知？

> ID：10410670
> 
> 赞同：1
> 
> 时间：2012-05-02T09:03:58.923
> 
> 标签：java, android, sockets, push-notification, communication

我正在开发一个与服务器通信的 Android 应用程序。如何在不使用 C2DM 的情况下将通知从我的服务器发送到我的 Android 应用程序？套接字是一个好的解决方案吗？还有什么其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:09:19.587

我使用 MQTT 在 Android 上提供推送通知，它被证明是一个好的、可靠的、低功耗的解决方案。

一些支持我的案例/让你开始的链接：

[http://mqtt.org/](http://mqtt.org/)

[功率分析：Android 上的 MQTT](http://stephendnicholas.com/archives/219)

[在 android 中使用 MQTT 的基本步骤](https://stackoverflow.com/questions/9562316/basic-steps-for-using-mqtt-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:06:55.287

我建议您最好使用易于处理的 JSON 开发 Web 服务。此服务器客户端架构将帮助您发送和接收任何类型的数据（范围从原始文本到图像甚至视频）

查看 C# 网络服务。恕我直言，这比 PHP 服务容易上手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:13:48.713

取决于你想做什么。

你有没有想过服务器如何识别客户端发送消息？在这种情况下，Android手机？

使用 http，您需要客户端“请求”此通知。

与实际通知最接近的事情是有一个套接字连接，客户端将连接到服务器。但这需要两者之间存在联系。如果这对您正在做的事情没问题，那么如果您真的想避免 C2DM，请继续。

但是，使用 C2DM 允许您的服务器向设备发送通知，而无需来自客户端的请求或直接连接。您唯一需要做的就是将设备的标识传递给您在使用 google 的 C2DM 进行身份验证时提供的第三方服务器。之后，您只需将通知数据推送到 C2DM，Google 就会为您发送通知。

# wpf - 将 TabControl 的标题放在右侧和垂直位置，它是文本

> ID：10410674
> 
> 赞同：3
> 
> 时间：2012-05-02T09:04:19.690
> 
> 标签：wpf, xaml

对不起我的英语不好。

我需要将 TabControl 的标题放在右侧和垂直位置，它是文本。我写了 XAML 代码：

```
<TabControl Grid.ColumnSpan="2" Grid.Row="1" HorizontalAlignment="Stretch" 
            Name="tabControl1" VerticalAlignment="Stretch"  Grid.RowSpan="2" 
            TabStripPlacement="Right">
    <TabItem Name="tabItem1">
        <TabItem.Header>
            <TextBlock Margin="3">
                <TextBlock.RenderTransform>
                    <RotateTransform CenterX="0" CenterY="0" Angle="90" />
                </TextBlock.RenderTransform>
                <TextBlock.Text>
                    123 444 555 666
                </TextBlock.Text>
            </TextBlock>
        </TabItem.Header>
    </TabItem>
    <TabItem Name="tabItem2">
        <TabItem.Header>
            <TextBlock Margin="3">
                <TextBlock.RenderTransform>
                    <RotateTransform CenterX="0" CenterY="0" Angle="90" />
                </TextBlock.RenderTransform>
                <TextBlock.Text>
                    ABCDEF
                </TextBlock.Text>
            </TextBlock>
        </TabItem.Header>
    </TabItem>
</TabControl> 
```

我得到它的结果：

![在此处输入图像描述](../Images/b9813b9e7648702bcb76bef04897061b.png)

结果结果很糟糕。怎么做才是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T09:32:28.810

您需要使用`LayoutTransform`. a`RenderTransform`不会重新计算父控件的大小。

# wpf - WPF DropShadowEffect 性能问题，正在寻找替代品

> ID：10410676
> 
> 赞同：1
> 
> 时间：2012-05-02T09:04:39.503
> 
> 标签：wpf, vb.net, .net-4.0

我的 wpf 应用程序运行非常缓慢。我正在使用 Windows 中的 wpf 性能分析工具，并注意到我的每帧硬件 IRT 非常高（100+）。我在帮助中读到这是由某些影响引起的。禁用某些效果后，我发现这是原因...

```
 <Border.Effect>
            <DropShadowEffect Direction="45" Color="#DDDDDD"/>
        </Border.Effect> 
```

我在所有拖放对象上都使用了这种效果。

现在我正在寻找一种不会冻结整个应用程序的类似效果。.net 4.0 中有什么效果我可以用来实现这一点吗？

非常感谢你

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:21:01.140

在用户控件上使用位图缓存也解决了这个问题。除非缩放非常重要，否则您可以使用它...

```
<UserControl x:Class="myControl"
   CacheMode="BitmapCache"
 >
 <Grid>
 </Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:16:19.677

你可以试试[SystemDropShadowChrome](http://msdn.microsoft.com/it-it/library/microsoft.windows.themes.systemdropshadowchrome.aspx)

# python - tkinter 表：将数据添加到新行并指定索引

> ID：10410677
> 
> 赞同：0
> 
> 时间：2012-05-02T09:04:55.187
> 
> 标签：python, tkinter, indexing

有没有人使用过 tkinter 表？我在将数据添加到新行时遇到问题。我有一个输入字段，用户可以在其中输入对象。然后在`def onButtonSents()`我检查这个词是否包含在`objects`数组中并将这个对象输入到表命名对象的第一列中，在第二列中我添加对象的积极情绪，依此类推。我想通过单击按钮添加新行并将字典的一行值的不同列放入。这是我现在拥有的：

```
file sentiment_analysis.py:
    objects [] #an array of objects which user enters into entry field
    positiveSentiments = dict()  #dictionary with key - object and positive words which correspond to it
    negativeSentiments = dict()  #dictionary with key - object and negative words which correspond to it

    array_cols = ['Object', 'Positive sentiments', 'Negative sentiments'] 
    var = tktable.ArrayVar()

#below is initialization of my tkinter table

    import tktable
    array_cols = ['Object', 'Positive sentiments', 'Negative sentiments']
    var = tktable.ArrayVar()
    table = tktable.Table(frame,
        rows = 1,
        cols = 3,
        roworigin=0,
        colorigin=0,
        variable=var,)
    table.pack(side='bottom', fill='both')
    var.set(index='0,0', value = 'Object')
    table.tag_configure('active', )
    var.set(index='0,1', value = 'Positive Sentiments')
    var.set(index='0,2', value = 'Negative Sentiments')

#The method which puts data into the rows of table
    def onButtonSents():
        table.insert_rows(1)
        for i in range (1, 5):
            index1 = '%i,%i'  % (i, 0)
            table.activate(index1)
            for key in sentiment_analysis.positiveSentiments.keys():
                if key == entry.get():
                    var.set(index='active', value=entry.get())
            for i in range (1, 5):
                index2 = '%i,%i'  % (i, 1)
                table.activate(index2)
            for key in sentiment_analysis.positiveSentiments.keys():
                if key == entry.get():
                    var.set(index='active',   value=sentiment_analysis.positiveSentiments[key])
            for i in range (1, 5):
                index3 = '%i,%i'  % (i, 2)
                table.activate(index3)
            for key in sentiment_analysis.negativeSentiments.keys():
                if key == entry.get():
                    var.set(index='active', value=sentiment_analysis.negativeSentiments[key]) 
```

但是表格的单元格没有正确填充。如果正确填充第一个对象，但是所有对象都变得相同，就像我第一次输入“ubs”一样，当我输入第二个“小麦”时，第一个对象也变成了“小麦”，他们的情绪也发生了变化。

不幸的是，我在互联网上没有找到任何关于这个问题的建议。我将非常感谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-31T07:17:38.947

下面我已经包含了我对您的代码的重写，以按照您的预期方式工作。

这对我来说运行正常。

请让我知道这对你有没有用。

请注意：我使用的是 Python 3.6、tkinter 和 tktable。

在我展示代码之前，我将简要解释一下用于将数据设置为一行的 tktable 语法。

您的代码在正确的轨道上，但有一些错误阻止它工作。

您的第一个错误是使用“var.set”将数据设置为 tktable 数组变量。

相反，您应该一直使用“table.set”将数据设置为 tktable“table”路径名变量。

其次，因为您将数据设置为一行，所以您可以使用 set 'row' 选项。

第三，您不需要指定“index=”和“value=”。

您可以简单地输入索引和值，用逗号分隔。

如果您为索引和值创建了变量，则可以使用变量名称。

要将多个值设置为同一行上的多个索引，

您只需添加更多值，用逗号分隔。

您只需要指定该行中第一个单元格的索引。

例如：

你写了：

var.set(index='active', value=entry.get())

这应该是：

table.set('row', '1,0', entry.get(), '正面情绪', '负面情绪')

上述行假定您希望此“行”从单元格索引“1,0”开始。

您提供的代码没有为我运行。

因此，为了让代码按预期运行，我添加了一个类结构。

如果您对类以及如何使用它们有疑问，这些问题中的大部分已经由 Bryan Oakley 和其他人在 Stack Overflow 上得到详细解答。

我添加到您的代码中的类结构是基于我通过 Stack Overflow 从 Bryan Oakley 那里学到的。

此外，我还进行了以下其他更改：

通过更改条件语句并更正“insert_rows”语法，修改了您的 onButtonSents 方法，

以便将正确的数据添加到您指定的下一个新行。

如果您对此有任何疑问，请告诉我。

在“对象”列表和字典中添加了一些测试样本数据：“positiveSentiments”和“negativeSentiments”，

演示代码是如何工作的。

由于您没有指定当用户输入不在列表中的对象时您希望代码的行为方式，

我把这个留给你自己做。

这是修改后的代码：

```
import tkinter as tk

import tktable

from tkinter import Tk, Label, Button

from tkinter import *

class Control(tk.Tk):
    def __init__(self, *args, **kwargs):
        tk.Tk.__init__(self, *args, **kwargs)

        self.controller = self

        self.shared_data = {
            "objects": tk.Variable(),
            "positiveSentiments": tk.Variable(),
            "negativeSentiments": tk.Variable(),
            "x": tk.IntVar(),
        }

        self.title('Title of Control Class')

        self.entry_frame = tk.Frame()

        self.entry_frame.pack(side=TOP)

        self.user_input = tk.StringVar()

        self.test_entry = tk.Entry(self.entry_frame, textvariable=self.user_input)

        self.test_entry.pack(side=LEFT)

        self.test_button = tk.Button(self.entry_frame, text='Button', command=self.onButtonSents)

        self.test_button.pack(side=RIGHT)

        self.table_frame = tk.Frame()

        self.table_frame.pack(side=BOTTOM)

        self.array_cols = ['Object', 'Positive sentiments', 'Negative sentiments']

        self.var = tktable.ArrayVar()

        self.table = tktable.Table(self.table_frame,
            rows = 1,
            cols = 3,
            roworigin=0,
            colorigin=0,
            colwidth=20,
            variable=self.var,)

        self.table.pack(side='bottom', fill='both', expand=True)

        self.table.set('row', '0,0', 'Object','Positive Sentiments', 'Negative Sentiments')

        self.table.tag_configure('active', )

        self.shared_data["objects"] = ['object1', 'object2', 'object3', 'object4', 'object5', 'object6', 'object7'] #an array of objects which user enters into entry field

        self.shared_data["positiveSentiments"] = {'object1' : 'positive1', 'object2' : 'positive2', 'object3' : 'positive3', 'object4' : 'positive4', 'object5' : 'positive5', 'object6' : 'positive6', 'object7' : 'positive7' }  #dictionary with key - object and positive words which correspond to it

        self.shared_data["negativeSentiments"] = {'object1' : 'negative1', 'object2' : 'negative2', 'object3' : 'negative3', 'object4' : 'negative4', 'object5' : 'negative5', 'object6' : 'negative6', 'object7' : 'negative7'}  #dictionary with key - object and negative words which correspond to it

    #The method which puts data into the rows of table

    def onButtonSents(self, _event=None):
        #self.table.insert_rows(1)
        for o in self.shared_data["objects"]:
            if o == self.user_input.get():
                if o in self.shared_data["positiveSentiments"]:
                    if o in self.shared_data["negativeSentiments"]:
                        if self.shared_data["x"].get() is not None:
                            self.shared_data["x"].set(self.shared_data["x"].get() + 1)
                            self.index1 = '%i,%i'  % (self.shared_data["x"].get(), 0)
                            self.table.insert_rows(self.shared_data["x"].get() - 1, 1)

                            self.table.set('row', self.index1, self.user_input.get(), self.shared_data["positiveSentiments"].get(o), self.shared_data["negativeSentiments"].get(o))

                        else:                            
                            self.shared_data["x"].set(1)
                            self.index1 = '%i,%i'  % (self.shared_data["x"].get(), 0)
                            self.table.set('row', self.index1, self.user_input.get(), self.shared_data["positiveSentiments"].get(o), self.shared_data["negativeSentiments"].get(o))

Control1 = Control()

Control1.mainloop() 
```

# iphone - 如何发送带有压缩内容的 HTTP POST 请求？

> ID：10410680
> 
> 赞同：10
> 
> 时间：2012-05-02T09:05:01.530
> 
> 标签：iphone, objective-c, http, gzip, http-post

我正在开发 iPhone 应用程序并手动构建 POST 请求。目前，需要在发送之前压缩 JSON 数据，所以看看如何告诉服务器内容被压缩。将内容类型标头设置为 gzip 可能是不可接受的，因为服务器需要 JSON 数据。我正在寻找透明的解决方案，比如添加一些标头，告诉 JSON 数据被压缩到 gzip 中。

我知道，标准方法是告诉服务器客户端接受编码，但您需要先发出带有接受编码标头的 GET 请求。就我而言，我想发布已经编码的数据。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-08T16:04:29.793

例如，包括一个 Obj-C gzip 包装器，[`NSData+GZip`](https://github.com/nicklockwood/Gzip)并使用它来编码您的`NSURLRequest`. 还要记住`Content-Encoding`相应地设置，以便网络服务器知道如何处理您的请求。

```
NSData *requestBodyData = [yourData gzippedData];
NSString *postLength = [NSString stringWithFormat:@"%d", requestBodyData.length];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"gzip" forHTTPHeaderField:@"Content-Encoding"];
[request setHTTPBody:requestBodyData]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-02T09:14:55.003

实现一些通用方法，例如以下并设置适当的 Header 可能会对您有所帮助。

```
// constructing connection request for url with no local and remote cache data and timeout seconds
NSMutableURLRequest *request =[NSMutableURLRequest requestWithURL:[NSURL URLWithString:callingWebAddress]];// cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:timoutseconds];
[request setHTTPMethod:@"POST"];

NSMutableDictionary *headerDictionary = [NSMutableDictionary dictionary];
[headerDictionary setObject:@"application/json, text/javascript" forKey:@"Accept"];
[headerDictionary setObject:@"application/json" forKey:@"Content-Type"];

//Edit as @centurion suggested
[headerDictionary setObject:@"Content-Encoding" forKey:@"gzip"];
[headerDictionary setObject:[NSString stringWithFormat:@"POST /Json/%@ HTTP/1.1",method] forKey:@"Request"];
[request setAllHTTPHeaderFields:headerDictionary];

// allocation mem for body data
self.bodyData = [NSMutableData data];

[self appendPostString:[parameter JSONFragment]];

// set post body to request
[request setHTTPBody:bodyData];

NSLog(@"sending data %@",[[[NSString alloc] initWithData:bodyData encoding:NSUTF8StringEncoding]autorelease]);

// create new connection for the request
// schedule this connection to respond to the current run loop with common loop mode.
NSURLConnection *aConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
//[aConnection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
self.requestConnenction = aConnection;
[aConnection release]; 
```

# css - 是否有类似于 Malgun（韩文字体）的基于 Web 的标准字体？

> ID：10410696
> 
> 赞同：1
> 
> 时间：2012-05-02T09:05:50.273
> 
> 标签：css, fonts, font-face, frontend

每当存在韩文字符时，客户端都**需要**将[Malgun](http://fonts.cloffin.com/details.php?font=Malgun%20Gothic%20Bold)作为字体。我正在尝试在接近它的 CSS 中找到要使用的东西。我在想Verdana。还有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:11:32.087

Verdana 也正在寻找更接近 Malgun，我认为您应该尝试 google 字体[http://www.google.com/webfonts](http://www.google.com/webfonts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:22:31.403

没有“标准的基于 Web 的字体”，只有或多或少可能安装在运行浏览器的计算机上的字体。您可以尝试构建一个字体堆栈，它接近您想要的字体堆栈，例如来自[此 Sitepoint 文章](http://www.sitepoint.com/eight-definitive-font-stacks-2/)的基于 Verdana 的字体堆栈，然后使用诸如 Google Webfonts 之类的字体加载方法为支持加载的浏览器加载您定义的字体字体。

不要试图给每个访问者相同的体验，而是最好的体验。告诉您的客户，网站不是一个在任何地方看起来都一样的应用程序，而更像是一个电视节目，必须也可以从黑白电视上观看，请看[这个视频](http://www.webmonkey.com/2012/03/video-progressive-enhancement-2-0/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:45:22.050

您是否考虑过使用[Fontsquirrel @font-face 生成器](http://www.fontsquirrel.com/fontface/generator)？此外，对于韩文，您可能有兴趣[阅读此内容](http://www.w3.org/TR/css3-fonts/#unicode-range-desc)。

# serialization - Avro 替代 Writables

> ID：10410699
> 
> 赞同：0
> 
> 时间：2012-05-02T09:06:16.270
> 
> 标签：serialization, hadoop, avro

我对 Hadoop 很陌生，必须深入研究它的序列化。我知道 Hadoop 带有自己的称为 Writables 的序列化程序。我很想知道 Avro（或 protobuf，thrift）是否取代了 Writables 接口，或者 Avro 仅用于序列化 MR 客户端数据，而不是用于序列化 namenode 和 datanode 之间的内部通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:01:28.003

我在某处读到 Avro 很可能最终成为 Hadoop 中的标准内部数据交换机制/序列化框架，这很有意义，因为它基于继承，就像“新”Hadoop API（使用 mapreduce 命名空间的 API）为其库），而“旧” API（mapred 库）基于接口。这意味着，在实践中，您当然可以将 avro 与这两个 API 一起使用，尽管如果您使用 mapred 库（例如，多种输出格式、链映射器），可能需要自定义代码一两件事。

但是 Avro 提供的远不止“仅仅”消除对您自己的可写文件的需求（尽管在我看来，这是一个相当大的优势）：它提供了相当有效的序列化，在针对生成的实体类进行序列化之间的选择（如 thrift 需要) 或使用所谓的 GenericRecord 结构，而不必标记数据。这是可能的，因为 Avro 始终在读写时提供其数据模式（它实际上以 json 格式保存为数据文件中的标题），这意味着您可以选择从一组字段“投影”到通过简单地在用于读取数据的模式中隐含地提供此信息来获得这些字段。然后，您可以通过调整模式来适应输入数据结构的变化，而不是在多个地方更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:42:36.960

AVRO 是一个序列化库（带有多种语言的 api）。AVRO 是使用/实现 Key/Value 对象作为 Writables 的替代方法，但是当在各种服务（数据节点、名称节点、作业和任务跟踪器）之间进行通信时，hadoop 仍然使用它自己的 RPC 数据结构。

# jquery - $ 在 1 页上未定义，尽管在所有其他页面上的包含文件中都很好

> ID：10410701
> 
> 赞同：2
> 
> 时间：2012-05-02T09:06:31.547
> 
> 标签：jquery

我有一个我无法解决的错误。

我的网站有一个包含的 head.php 文件，它在 1) Jquery 2) Jquery Libraries 中加载，然后是正文 html 等，因此在这方面一切都按顺序加载。

在一个页面上，虽然我得到一个 $ 在指向相同的 javascript 控制台中未定义`$(document).ready(function(){`

它只在这一页上执行。所有页面都通过 index.php 包含并从数据库中调用，因为头部中的包含始终首先加载。

现在有趣的是，当我在 firebug 中检查时，一切都正常加载... Jquery、库和我对文档的调用已准备就绪。此外，JQUERY 的功能仍在工作（如选项卡和手风琴），只是我弹出此错误，然后无法启动 PHPHTMLEDIT（Html 编辑器）

所以我的代码看起来像这样 - index.php

```
<?php 
session_start();
require_once('connections/application.php'); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <?php include_once('main_head.php'); ?>
</head>

<body>

    <!-- website container -->
    <div id="container" >

        <?php include_once('main_banner.php'); ?>
        <?php include_once('main_columns.php'); ?>
        <?php include_once('main_footer.php'); ?>

    </div>
    <!-- end website container -->

</body>
</html>
<?php mssql_close($conn); ?> 
```

main_head.php

```
<!-- title of the page -->
<title>page title</title>

<!-- Jquery plugins -->
<script type="text/javascript" language="javascript" src="scripts/jquery-1.6.4.min.js"></script>
<script type="text/javascript" language="javascript" src="scripts/jquery.smartTab.js"></script>
<script type="text/javascript" language="javascript" src="scripts/jquery-ui-1.8.10.custom.min.js" ></script>
<script type="text/javascript" language="javascript" src="scripts/jquery.ui.widget.js"></script>
<script type="text/javascript" language="javascript" src="scripts/jquery.ui.accordion.js"></script>
<script type="text/javascript" language="javascript" src="scripts/floatbox.js"></script>

<link href="styles/smart_tabs/smart_tab.css" rel="stylesheet" type="text/css" />

<!-- Website Javascript -->
<script type="text/javascript" language="javascript" src="scripts/onload.js"></script> 
```

onload.js 中发生错误 - 首先加载 Jquery。但是我收到错误，好像没有加载 jquery。

非常感谢任何帮助。我检查了文件夹权限，一切正常。我有点困惑为什么它会在一个页面上特别抛出这个错误并且jquery仍在工作......

谢谢

和我

****添加@ 10.56 ******

 **抱歉，这是 onload.js

```
$(document).ready(function(){

    $('#creation_date').datepicker({ dateFormat: 'yy-mm-dd' });
    $('#operations_date').datepicker({ dateFormat: 'yy-mm-dd' });
    $('#publish_date').datepicker({ dateFormat: 'yy-mm-dd' });
    $('#tabs').smartTab({selected: 0,autoProgress: false,stopOnFocus:true,transitionEffect:'SlideUp'});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:11:50.043

可能与其他库发生冲突。

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

你可以试试这个：

```
 $.noConflict();
 jQuery(document).ready(function($) {
// Code that uses jQuery's $ can follow here.
   $('#creation_date').datepicker({ dateFormat: 'yy-mm-dd' });
   $('#operations_date').datepicker({ dateFormat: 'yy-mm-dd' });
   $('#publish_date').datepicker({ dateFormat: 'yy-mm-dd' });
   $('#tabs').smartTab({selected: 0,autoProgress: false,stopOnFocus:true,transitionEffect:'SlideUp'});

  }); 
```**

# java - 如何使用参数调用 URL 并在 servlet 中获取响应？

> ID：10410704
> 
> 赞同：2
> 
> 时间：2012-05-02T09:06:45.180
> 
> 标签：java, servlets, groovy

我有一种情况，需要引入一个中间 servlet，它将处理来自现有项目的请求，并将操纵的响应重定向到现有项目或新项目。这个 servlet 将充当从其他应用程序**登录到新项目的接口。**

所以目前我使用以下代码在 jsp 中以 xml 形式返回响应。

```
var jqxhr =$.post("http://abhishek:15070/abc/login.action",
                  { emailaddress:   "ars@gmail.com",
                    projectid:      "123" },
                      function(xml)
                      {
                            if($(xml).find('isSuccess').text()=="true")
                            {
                                sessiontoken=$(xml).find('sessiontoken').text();

                                setCookie("abcsessionid", sessiontoken , 1);
                                setCookie("abcusername",e_add,1);
                            }
                      }
                )
                .error(function() {
                    if(jqxhr.responseText == 'INVALID_SESSION') {
                        alert("Your Session has been timed out");
                        window.location.replace("http://abhishek:15070/abc/index.html"); 
                    }else  {
                        alert( jqxhr.responseText);
                    }
                 }); 
```

xml内容

```
<Response>
  <sessiontoken>334465683124</sessiontoken>
  <isSuccess>true</isSuccess>
</Response> 
```

但是现在我想用 servlet 来做同样的事情，有可能吗？

```
String emailid=(String) request.getParameter("emailaddress");
String projectid=(String) request.getParameter("projectid"); 
```

**更新**

我只是想出了一些东西。

是否可以返回一个带有表单（来自 servlet）的 html 页面，`on body load`它将提交一个表单，并且在提交此表单时，它将收到将被处理的响应**xml**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:13:29.283

使用[`java.net.URLConnection`](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html)或[Apache HttpComponents Client](http://hc.apache.org/httpcomponents-client-ga/)。[然后，使用JAXB](http://jaxb.java.net/tutorial/)之类的 XML 工具解析返回的 HTTP 响应。

开球示例：

```
String emailaddress = request.getParameter("emailaddress");
String projectid = request.getParameter("projectid");
String charset = "UTF-8";
String query = String.format("emailaddress=%s&projectid=%s", 
    URLEncoder.encode(emailaddress, charset),
    URLEncoder.encode(projectid, charset));

URLConnection connection = new URL("http://abhishek:15070/abc/login.action").openConnection();
connection.setDoOutput(true);
connection.setRequestProperty("Accept-Charset", charset);
connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=" + charset);
try {
    connection.getOutputStream().write(query.getBytes(charset));
}
finally {
    connection.getOutputStream().close();
}
InputStream response = connection.getInputStream();
// ... 
```

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)
*   [HttpClient 教程](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/)和[示例](http://hc.apache.org/httpcomponents-client-ga/examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:18:32.073

实际上，您可能想要的根本不是中间 servlet。您可能想要的是一个 servlet 过滤器，而编写一个过滤器并不是特别难。以前写过一篇，昨天刚开始写一篇。

像[这篇](http://javaboutique.internet.com/tutorials/Servlet_Filters/)或[这篇](http://www.developer.com/security/article.php/3467801/Securing-J2EE-Applications-with-a-Servlet-Filter.htm)文章这样的文章非常简单地阐述了如何使用 servlet 过滤器来拦截对特定 URL 的调用，然后从那里重定向或拒绝。如果传入的 URL 与过滤器的模式匹配，它将获得请求和响应的机会，然后它可以选择是否将其传递给行中的下一个过滤器。

我不知道是否所有第三方安全解决方案都这样做，但至少 CAS 似乎是这样实现的。

# java - 在 Eclipse Indigo 中阅读 UML 模型？

> ID：10410705
> 
> 赞同：0
> 
> 时间：2012-05-02T09:06:45.210
> 
> 标签：java, eclipse

我是 Eclipse Indigo 的新手。实际上，我的任务是开发一个插件，它将通过 ECLIPSE INDIGO**读取 UML 模型。**即，当我运行该插件时，**它应该阅读该 UML 模型中的所有内容，例如类、方法**等，所以我能得到任何指导吗？我可以为此获得任何类型的示例编码吗？

## 谢谢

斯里拉姆·R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:09:02.380

可能有几个现有的 eclipse 插件可以满足您的要求，因此我建议您在创建自己的插件之前先查看这些插件。如果您打算制作自己的插件，那么解决方案将取决于您需要解析的 UML 文件的格式。一些 UML 插件使用 EMF（Eclipse 建模框架），在这种情况下，您可能希望您的插件基于 EMF。其他人使用 XML，在这种情况下，您有很多选择，包括直接解析或使用 XML 对象框架，如 XMLBeans 或 JAXB。对不起，我不能更具体，但你的问题相当模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:08:20.437

非常不清楚你在找什么。您应该首先[搜索此站点](https://stackoverflow.com/search?tab=votes&q=eclipse%20uml)以获取更多信息，有很多处理 UML 的 Eclipse 插件，例如参见[这个问题](https://stackoverflow.com/questions/51786/recommended-eclipse-plugins-to-generate-uml-from-java-code%20that%20hand)。然后，当您评估了替代方案时，找到现有插件不做的您需要的东西。

# c# - NSubstitute 和协方差支持？

> ID：10410713
> 
> 赞同：2
> 
> 时间：2012-05-02T09:07:27.070
> 
> 标签：c#, task-parallel-library, covariance, nsubstitute

我正在尝试测试一些 TPL 数据流代码并遇到 NSubstitue 参数匹配的协方差问题。它断言：

```
Expected to receive exactly 1 call matching:
  Subscribe("987123", any ITargetBlock`1) 
Actually received 1 matching call:
  Subscribe("987123", ActionBlock<ChainLinkFakeData>) 
```

来自匹配器：

```
childFakeSubscriptionSource
    .Received(1)
    .Subscribe(
        Arg.Is<string>("987123"),
        Arg.Any<ITargetBlock<ChainLinkFakeData>>()); 
```

因此，绊脚石似乎是它不是协变匹配 ITargetBlock 到实现类 ActionBlock。

有没有办法在不明确匹配 ActionBlock 的情况下做到这一点，或者它只是 NSubstitute 的当前限制？

编辑：为了大家方便，这是 ActionBlock 的类签名。我认为这足以在不引入大量接口等的情况下看到协方差问题。

```
public sealed class ActionBlock<TInput> : ITargetBlock<TInput>, IDataflowBlock 
```

问题的关键在于，通过协方差，`ITargetBlock<T>`应该匹配一个`ActionBlock<T>`. NSubstitute 中的 arg 匹配器`Arg.Any<ITargetBlock<ChainLinkFakeData>>()`似乎没有？

简单的解决方法是`Arg.Any<ActionBlock<ChainLinkFakeData>>()`，但这需要了解测试实施的主题。

就更简单的示例而言，我没有对此进行测试，但我希望会有类似的问题`IEnumerable<T>`not matching `List<T>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:34:19.830

这是 NSubstitute 中的一个错误，应该从 v1.4.0 开始修复。（见[原始问题](https://github.com/nsubstitute/NSubstitute/issues/64)）

# eclipse - 使用 tycho 在 Eclipse 产品配置文件中执行替换

> ID：10410717
> 
> 赞同：3
> 
> 时间：2012-05-02T09:07:53.013
> 
> 标签：eclipse, maven, tycho

我有一个使用 Tycho 构建的 Eclipse RCP 产品。在一些较小的问题之后，这工作得很好，我有 CI 和想要的版本。

有问题的产品既作为可安装的独立 RCP 应用程序提供，也作为更新站点提供，因此可以在 vanilla Eclipse 安装中安装该功能。这也很好。

该产品有一个主要功能 - 在更新站点上使用 - 我非常希望该功能和产品具有相同的版本号。就像今天一样，这个版本号被提到的地方很多，我真的很想把它减少到一个。我目前有版本号

*   `feature.xml`主要特征的
*   `pom.xml`相同特征的
*   `.product`产品配置文件的文件
*   `pom.xml`带有`.product`文件的项目的
*   `categories.xml`更新站点的文件
*   `about.mappings`文件_

我尝试使用 maven 资源过滤器，它适用于 POM 文件和`about.mappings`，但不适用于其他文件。这是我当前`pom.xml`的主要功能：

```
<?xml version="1.0" encoding="UTF-8"?>
<project ...>
    <modelVersion>4.0.0</modelVersion>
    <artifactId>...main.feature</artifactId>
    <version>${product.version}-SNAPSHOT</version>
    <packaging>eclipse-feature</packaging>

    <parent>
        <groupId>...</groupId>
        <artifactId>...parent</artifactId>
        <version>1.0.0-SNAPSHOT</version>
        <relativePath>../...parent</relativePath>
    </parent>

    <build>
        <!-- Substitutions: product.version -->
        <resources>
            <resource>
                <directory>.</directory>
                <includes>
                    <include>feature.xml</include>
                </includes>
                <filtering>true</filtering>
            </resource>
        </resources>
    </build>
</project> 
```

运行此配置时，我从 Tycho 得到以下异常（或看起来非常相似的异常）：

```
[ERROR] Internal error: java.lang.IllegalArgumentException -> [Help 1]
org.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:168)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
Caused by: java.lang.IllegalArgumentException
        at org.eclipse.equinox.internal.p2.metadata.VersionParser.parse(VersionParser.java:93)
        at org.eclipse.equinox.p2.metadata.Version.create(Version.java:79)
        at org.eclipse.tycho.p2.impl.publisher.FeatureDependenciesAction.getVersion(FeatureDependenciesAction.java:126)
        at org.eclipse.tycho.p2.impl.publisher.AbstractDependenciesAction.perform(AbstractDependenciesAction.java:79)
        ... 11 more 
```

（我已经剪掉了一些线......）

基本上，嵌入式 maven 进程似乎根本不为这种类型的打包执行资源过滤。或者？？

我尝试了很多不同的东西，但我无法让它发挥作用。我最好的猜测是我必须配置生命周期，但是如何......

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:20:20.847

这是一个已知的错误：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=362252](https://bugs.eclipse.org/bugs/show_bug.cgi?id=362252)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T16:31:24.353

您不需要在`categories.xml`. 只需指定`0.0.0`为版本，第谷就会将其替换为所包含功能的实际版本。

# android - Android：MetricAffectingSpan 和 RasterizerSpan

> ID：10410720
> 
> 赞同：6
> 
> 时间：2012-05-02T09:08:12.820
> 
> 标签：android, html

有人可以解释一下，以下跨度方法如何工作（对于 TextView）？

如果可能，请举一个简短的例子。

到目前为止，我还没有在网上找到好的解释或例子。

提前谢谢了。

(a) MetricAffectingSpan [http://developer.android.com/reference/android/text/style/MetricAffectingSpan.html](http://developer.android.com/reference/android/text/style/MetricAffectingSpan.html)

(b) RasterizerSpan
[http://developer.android.com/reference/android/text/style/RasterizerSpan.html](http://developer.android.com/reference/android/text/style/RasterizerSpan.html)

# regex - 如何编写匹配以字母开头的正则表达式，可以包含字母、数字、连字符和 1 个下划线？

> ID：10410722
> 
> 赞同：1
> 
> 时间：2012-05-02T09:08:13.480
> 
> 标签：regex

我需要编写匹配字符串的正则表达式（.NET）：以字母开头，可以包含字母、数字、句点、连字符、**1 个下划线**并遵循“@”。我尝试了以下一个，但例如它与“a_bc12@”不匹配。

如何解决？

`^[A-Za-z][A-Za-z0-9-]+_{0,1}(?=@)`

已编辑：它应该包含 {3,10} 长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:11:01.817

您将需要再次允许下划线后的字符：

```
/^[A-Za-z][A-Za-z0-9\.-]*_?[A-Za-z0-9\.-]*(?=@)/ 
```

此外，我还添加了句点，并使下划线前后的字符串可选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:15:34.713

尝试将其修改为：

```
[A-Za-z]+[A-Za-z0-9-/.]*_[A-Za-z0-9-/.]*@` 
```

当你在表达式后使用 + 时，表示“一次或多次” 当你使用 * 时，表示“零次或多次”

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:09:54.327

试试这个：

```
^[A-Za-z][A-Za-z0-9-\.]*_{0,1}(?=@) 
```

您的使用`+`是一种或多种情况；您希望在首字母之后有零个或多个，即`*`.

# windows-phone-7 - 如何以编程方式在 Windows 手机上安装根 CA 证书？

> ID：10410723
> 
> 赞同：0
> 
> 时间：2012-05-02T09:08:13.530
> 
> 标签：windows-phone-7, mobile, ssl, certificate

如何以编程方式在 Windows 手机上安装根 CA 证书？这个问题类似于这个问题： [如何在 Windows Phone 7 上安装根证书？](https://stackoverflow.com/questions/4473653/how-to-install-root-certificate-on-windows-phone-7)，虽然，我想知道如何以编程方式做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:11:20.060

如您链接的问题中所述，无法以编程方式安装证书。

# robocopy - 如何使用 Robocopy 将模板文件夹结构复制到其他文件夹？

> ID：10410725
> 
> 赞同：0
> 
> 时间：2012-05-02T09:08:32.887
> 
> 标签：robocopy

我需要将一个文件夹中的所有文件夹复制到多个其他文件夹。我要复制的文件夹结构在这里：

```
x:\Customer1\Site1\ 
```

我想将 Site1 中的所有文件夹复制到以下目录中的所有文件夹：

```
X:\Customer1\ 
```

显然，我不想将文件夹再次复制回 Site1，只复制 Customer1 中的每个文件夹，不包括 Site1。

Site1 包含 19 个文件夹。我希望最终在 Customer1 文件夹的每个文件夹中都有这 19 个文件夹。有人可以告诉我如何实现这一目标吗？

我一直在查看 Robocopy MS 页面以了解所有开关和选项，但似乎没有任何东西可以帮助我完成我需要的“将文件夹树从一个文件夹复制到多个文件夹”。请给我任何参考

非常感谢纳兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:30:48.983

据我所知，这只能通过 xcopy 的`/t`-switch 来实现，它只复制文件夹结构（请注意，如果您还希望复制空文件夹，您还必须放置 '/e' -switch）

要复制每个子文件夹中的结构，可以使用 for 循环：

```
set customer1="X:\Customer1"
set site1="Site1"

for /f %%d in ('dir %customer1% /b /ad') do (
   if %%d NEQ %site1% xcopy %customer1%\%site1%\*.* %customer1%\%%d\*.* /t /e   
) 
```

# mysql - 如何将使用 group by 和 order by 子句的 MySQL 转换为 T-SQL 查询？

> ID：10410726
> 
> 赞同：0
> 
> 时间：2012-05-02T09:08:44.787
> 
> 标签：mysql, group-by, sql-server-2000, sql-order-by

我有以下要翻译的 MySQL 查询，以便它在 MSSQL 中工作：

```
SELECT  *
FROM 
(
    SELECT      *
    FROM        ranking
    ORDER BY    rank_no ASC
            ,   effective_dt DESC
) AS sorted_rank
WHERE       sorted_rank.rank_id = 1950
GROUP BY    sorted_rank.rank_no
LIMIT 10 
```

我花了一个下午的时间摆弄，但我一直遇到 GROUP BY 和聚合的问题以及各种其他错误。

为了在作品中添加更多扳手，排名表没有主键，我认为可能需要让它工作......

*服务器版本*：**Microsoft SQL Server 2000 - 8.00.2039**

*架构*：

```
rank_id         int(11)
week_id         int(11)
rider_id        int(11)
year_no         int(11)
rank_no         int(11)
effective_dt    datetime
lastupdate_dt   datetime
point_no        float
average_no      float  
result_qy       int(11) 
```

*数据集*：

```
INSERT INTO `ranking` (`id`, `rank_id`, `week_id`, `rider_id`, `year_no`, `rank_no`,  `effective_dt`, `lastupdate_dt`, `point_no`, `average_no`,  `result_qy`)
VALUES
(244, 1950, 417, 72253, 2007, 1, '2006-09-03 00:00:00', '2006-09-01 01:45:00', 2559.19, 426.53, 5),
(108, 1950, 426, 72253, 2007, 1, '2006-11-05 00:00:00', '2006-11-01 05:59:00', 2559.19, 426.53, 5),
(340, 1950, 386, 21767, 2006, 1, '2006-01-29 00:00:00', '2006-11-29 13:31:00', 3256.25, 814.06, 4),
(178, 1950, 420, 60369, 2007, 2, '2006-09-24 00:00:00', '2006-09-26 06:31:00', 2315.86, 385.98, 4),
(166, 1950, 417, 60369, 2007, 2, '2006-09-03 00:00:00', '2006-09-01 01:45:00', 2315.86, 385.98, 4),
(109, 1950, 426, 60369, 2007, 2, '2006-11-05 00:00:00', '2006-11-01 05:59:00', 2315.86, 385.98, 4),
(110, 1950, 426, 49428, 2007, 3, '2006-11-05 00:00:00', '2006-11-01 05:59:00', 2191.19, 365.2, 4),
(227, 1950, 417, 49428, 2007, 3, '2006-09-03 00:00:00', '2006-09-01 01:45:00', 2191.19, 365.2, 4),
(409, 1950, 388, 19570, 2006, 3, '2006-02-12 00:00:00', '2006-11-29 13:31:00', 3106.26, 776.57, 4),
(72, 1950, 399, 47036, 2006, 4, '2006-04-30 00:00:00', '2006-11-29 13:33:00', 1038.02, 346.01, 3),
(413, 1950, 388, 55533, 2006, 4, '2006-02-12 00:00:00', '2006-11-29 13:31:00', 2835.3, 708.83, 4),
(111, 1950, 426, 64517, 2007, 4, '2006-11-05 00:00:00', '2006-11-01 05:59:00', 2001.68, 333.61, 4),
(112, 1950, 426, 72379, 2007, 5, '2006-11-05 00:00:00', '2006-11-01 05:59:00', 1677.32, 279.55, 6),
(263, 1950, 420, 27123, 2007, 5, '2006-09-24 00:00:00', '2006-09-26 06:31:00', 1607.31, 267.88, 4),
(415, 1950, 388, 45738, 2006, 5, '2006-02-12 00:00:00', '2006-11-29 13:31:00', 2744.03, 686.01, 4),
(113, 1950, 426, 27123, 2007, 6, '2006-11-05 00:00:00', '2006-11-01 05:59:00', 1607.31, 267.88, 4),
(575, 1950, 420, 50354, 2007, 6, '2006-09-24 00:00:00', '2006-09-26 06:31:00', 1148.84, 191.47, 2),
(422, 1950, 388, 39070, 2006, 6, '2006-02-12 00:00:00', '2006-11-29 13:31:00', 2626.51, 656.63, 4),
(114, 1950, 426, 65745, 2007, 7, '2006-11-05 00:00:00', '2006-11-01 05:59:00', 1576.83, 262.8, 4),
(293, 1950, 388, 42127, 2006, 7, '2006-02-12 00:00:00', '2006-11-29 13:31:00', 2614.46, 653.62, 4),
(576, 1950, 420, 32669, 2007, 7, '2006-09-24 00:00:00', '2006-09-26 06:31:00', 1133.15, 188.86, 2),
(577, 1950, 420, 23242, 2007, 8, '2006-09-24 00:00:00', '2006-09-26 06:31:00', 1107.79, 184.63, 2),
(199, 1950, 420, 60322, 2007, 8, '2006-09-24 00:00:00', '2006-09-26 06:31:00', 1390.22, 231.7, 3),
(115, 1950, 426, 54984, 2007, 8, '2006-11-05 00:00:00', '2006-11-01 05:59:00', 1532.8, 255.47, 3),
(578, 1950, 420, 41116, 2007, 9, '2006-09-24 00:00:00', '2006-09-26 06:31:00', 1096.64, 182.77, 2),
(116, 1950, 426, 72386, 2007, 9, '2006-11-05 00:00:00', '2006-11-01 05:59:00', 1442.49, 240.41, 6),
(74, 1950, 399, 32669, 2006, 9, '2006-04-30 00:00:00', '2006-11-29 13:33:00', 817.64, 272.55, 3),
(818890, 1950, 1167, 77510, 0, 10, '2012-01-13 00:00:00', '2012-01-13 11:11:00', 1464.43, 366.11, 4),
(825706, 1950, 1168, 70324, 0, 10, '2012-01-20 00:00:00', '2012-01-20 11:05:00', 1259.38, 314.85, 2),
(826752, 1950, 1170, 75911, 0, 10, '2012-02-01 00:00:00', '2012-02-01 12:58:00', 1237.95, 309.49, 3); 
```

*正确的输出*：

```
1950    426     72253   2007    1   2006-11-05 00:00:00  2006-11-01 05:59:00     2559.19    426.53      5
1950    426     60369   2007    2   2006-11-05 00:00:00  2006-11-01 05:59:00     2315.86    385.98      4
1950    426     49428   2007    3   2006-11-05 00:00:00  2006-11-01 05:59:00     2191.19    365.2       4
1950    426     64517   2007    4   2006-11-05 00:00:00  2006-11-01 05:59:00     2001.68    333.61      4
1950    426     72379   2007    5   2006-11-05 00:00:00  2006-11-01 05:59:00     1677.32    279.55      6
1950    426     27123   2007    6   2006-11-05 00:00:00  2006-11-01 05:59:00     1607.31    267.88      4
1950    426     65745   2007    7   2006-11-05 00:00:00  2006-11-01 05:59:00     1576.83    262.8       4
1950    426     54984   2007    8   2006-11-05 00:00:00  2006-11-01 05:59:00     1532.8     255.47      3
1950    426     72386   2007    9   2006-11-05 00:00:00  2006-11-01 05:59:00     1442.49    240.41      6
1950    1170    75911   0       10  2012-02-01 00:00:00  2012-02-01 12:58:00     1237.95    309.49      3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:18:17.517

# SQL Server 2000 及更高版本

根据您的要求，您需要在每个等级中找到最近的生效日期。为此，您需要编写一个子查询，该查询将获取给定排名的最大有效日期，然后将其与行中的日期进行比较以过滤到所需的结果。这适用于 SQL Server 2000 及更高版本的所有版本。

以下查询已在 SQL Server 2000 中进行了测试。

[**单击此处查看 SQL Fiddle 中的演示**](http://sqlfiddle.com/#!6/917db/16)

*脚本*：

```
SELECT  
TOP 10  id
    ,   rank_id
    ,   week_id
    ,   rider_id 
    ,   year_no
    ,   rank_no
    ,   effective_dt 
    ,   lastupdate_dt 
    ,   point_no  
    ,   average_no 
    ,   result_qy
FROM    ranking r_outer
WHERE   rank_id = 1950
AND     effective_dt = 
        (
            SELECT  MAX(effective_dt)
            FROM    ranking r_inner
            WHERE   r_inner.rank_no = r_outer.rank_no
            AND     r_inner.rank_id = 1950
        )
ORDER BY rank_no; 
```

# SQL Server 2005 及更高版本

您需要使用**`RANK`**按列对结果进行分区的函数，然后按降序`rank_no`对每个分区进行排序。每个已排序的分区部分都将被分配一个等级值，例如 1、2、3 等。您只对这些分区组中的第一个等级感兴趣。因此，因此外部 SELECT 将结果过滤为.`rank_no``effective_dt``rank_num = 1`

*只有*SQL Server 2005 及以上版本才支持**RANK*函数。*

 *[**单击此处查看使用 SQL Server 2012 在 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/917db/3)

脚本：

```
SELECT
TOP 10      id 
        ,   rank_id
        ,   week_id
        ,   rider_id 
        ,   year_no
        ,   rank_no
        ,   effective_dt 
        ,   lastupdate_dt 
        ,   point_no  
        ,   average_no 
        ,   result_qy
FROM
(
    SELECT  id 
        ,   rank_id
        ,   week_id
        ,   rider_id 
        ,   year_no
        ,   rank_no
        ,   effective_dt 
        ,   lastupdate_dt 
        ,   point_no  
        ,   average_no 
        ,   result_qy
        ,   RANK() OVER(
                    PARTITION BY rank_no 
                    ORDER BY rank_no, effective_dt DESC) rownum
    FROM    ranking r
    WHERE   r.rank_id = 1950
) t1 
WHERE rownum = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:33:35.050

我想建议在`WHERE`子句中使用子查询来获取最大记录`effective_dt`（假设值在一个 rank_no 内是唯一的，我猜这是一个日期时间）：

```
SELECT TOP 10 *
FROM ranking R
WHERE R.rank_id = 1950 AND 
    R.effective_dt = (SELECT MAX(effective_dt) from ranking R2 WHERE R2.rank_no = R.rank_no AND R2.rank_id = R.rank_id)
ORDER BY R.rank_no 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:12:02.660

请注意，如果没有主键或在此表上聚集，当数据增长时，它会非常缓慢。我会认真建议您找出哪些字段应该是键。没有聚集索引的表是一个堆，它们没有顺序（通常按照插入的顺序存储）。

您也可以尝试以下查询。

```
/*
    This CTE will sort the table into a usable structure. To see what it does run the select statement seperately.
*/
;WITH CTERankID
AS
(

SELECT  *
        ,ROW_NUMBER() OVER(PARTITION BY rank_no ORDER BY effective_Dt DESC) AS RowNo        
FROM ranking

)
SELECT  TOP 10   
    rank_id
    ,week_id
    ,year_no
   ,rank_no
   ,effective_dt
   ,lastupdate_dt
   ,point_no
   ,average_no
   ,result_qy
   ,rowno
FROM CTERankID AS rankTable
WHERE rankTable.RowNo=1
AND rankTable.rank_id = 1950 
```

希望它会有所帮助。PS 这在 MySQL 中不起作用，因为 MySQL 不支持 CTE。*

# c# - 制作按钮以在朋友的墙上发布指向网站的链接

> ID：10410728
> 
> 赞同：0
> 
> 时间：2012-05-02T09:08:47.273
> 
> 标签：c#, asp.net, facebook

是否可以这样做，有一个 asp.net 网站。将有一个按钮邀请朋友到该网站。邀请按钮的作用是点击后。它会要求用户登录到 facebook。登录后。将显示朋友列表以让用户选择将邀请哪些朋友。使用后选择要邀请的朋友并点击提交，该网站的链接将发布在他们的 Facebook 墙上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:30:24.417

这是可能的，但您需要有一个 facebook 应用程序并要求获得 publish_stream 权限。

当您拥有它时，您只需获取用户朋友（[/me/friends](http://developers.facebook.com/tools/explorer?method=GET&path=me/friends)），那么您需要自己呈现列表，因为 facebook 提供的唯一插件是[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)，它仅适用于画布页面并且不会发布到墙。

在用户使用您的小部件选择用户后，您只需发布到选定的 ID 墙（[/USER_ID/feed](http://developers.facebook.com/docs/reference/api/user/#feed)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:26:15.093

您将需要[C# Facebook SDK](https://github.com/facebook-csharp-sdk)。在 sdk 的 github 页面上有显示如何管理登录过程的示例代码。

用户登录后，您可以通过调用 Facebook API 获取用户的好友列表：

```
www.graph.facebook.com/USER_ID/friends 
```

它使用他们的 user_ids 和名称检索朋友列表。

如果您的应用是[Canvas](https://developers.facebook.com/docs/guides/canvas/)应用，您可以使用[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)通过 /friends 调用中的 user_ids 邀请用户的朋友。这将向朋友发送邀请，但不会发布到墙上。

如果这不能满足您的需求，并且您希望用户直接发布到朋友的墙上，请向以下位置发出 POST：

```
www.graph.facebook.com/FRIENDS_USER_ID/feed 
```

使用这些参数：

```
message
name (sender's name)
caption
link (your url)
description
picture (url to picture) 
```

# java - 减少 Java 中的 if-else 语句

> ID：10410729
> 
> 赞同：24
> 
> 时间：2012-05-02T09:08:48.743
> 
> 标签：java, if-statement, refactoring, conditional-statements

我有以下代码：

```
void f(String t)
{
  if(t.equals("a"))
  {
    someObject.setType(ObjectType.TYPE_A);
  }
 else if(t.equals("b"))
  {
    someObject.setType(ObjectType.TYPE_B);
  }

// 50 more similar code

} 
```

是否有任何简单的方法来重写 if-else 条件以免有那么多代码？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-02T09:11:18.470

您应该使用一些东西来消除`someObject.setType(ObjectType....))`If `ObjectType`is an的重复`enum`，然后在那里编写一个类似的方法来`valueOf`实现这一点。看看你是否喜欢这种解决方案：

```
void f(String t) { someObject.setType(ObjectType.byName(t)); }

enum ObjectType {
  TYPE_A, TYPE_B;
  public static ObjectType byName(String name) {
    return valueOf("TYPE_" + name.toUpperCase());
  }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-02T09:11:02.867

使用一个[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)（您必须填充）映射到您的值的`String`任何类型。`ObjectType.TYPE_x`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-02T09:15:12.330

我会将其添加为枚举的功能：

```
public enum ObjectType {
    TYPE_A("a"),
    TYPE_B("b");

    private String stringType;

    private ObjectType(String stringType) {
        this.stringType = stringType;
    }

    public String getStringType() {
        return this.stringType;
    }

    public static ObjectType fromStringType(String s) {
        for (ObjectType type : ObjectType.values()) {
            if (type.stringType.equals(s)) {
                return type;
            }
        }
        throw new IllegalArgumentException("No ObjectType with stringType " + s);
    }
}

...

void f(String t) {
    someObject.setType(ObjectType.fromStringType(t));
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T09:13:51.337

如果您可以重构`t`为 a `char`，则可以`switch`改用（Java 6）：

```
void f(char t) {

  switch(t) {

    case 'a`:
      someObject.setType(ObjectType.TYPE_A);
      break;
    case 'b':
      someObject.setType(ObjectType.TYPE_B);
      break;

    // ...

  }

} 
```

正如 Marko 所指出的，您也可以`String`在 Java 7 中使用。

它没有那么短，但更优雅。此外，我认为它也可能更快，因为它`switch`与`O(1)`跳转表（有人可以确认这是否是真的？），是否一些`if`语句是`O(n)`.

对于更复杂的实现，`setType`您可能还会想到[状态模式](http://www.dofactory.com/Patterns/PatternState.aspx)实现。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-02T09:19:24.513

**1.如果if条件数超过3个，可以选择switch语句。**

**2.你可以将你的if else语句转换为[三元运算](http://en.wikipedia.org/wiki/Ternary_operation#C.2C_Java.2C_JavaScript)**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T13:57:59.327

其他建议很棒——尤其是更智能的枚举和映射。但是我在这里要解决的第一个最基本的重构是提取一个方法来直接返回枚举，并让调用者只对该方法的返回值执行 setType。

```
void f(String t) {
  final ObjectType type = findType(t);
  if (type != null)
    someObject.setType(type);
  }

ObjectType findType(String t) {
  if (t.equals("a")) return ObjectType.TYPE_A;
  if (t.equals("b")) return ObjectType.TYPE_B;
  // 50 more similar code
  } 
```

在某些情况下，这本身就足够了；在其他情况下，该`findType()`方法可能会引导您使用简单的基于映射或枚举的解决方案。

# php - 使用会话访问在后台运行 php 脚本

> ID：10410731
> 
> 赞同：2
> 
> 时间：2012-05-02T09:08:52.407
> 
> 标签：php, session, background-process

我需要从将在后台运行的主脚本调用 php 脚本（我只想调用并继续而不等待响应）但我需要访问被调用脚本中的用户会话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:38:53.877

我的建议是不要使用默认的 PHP 会话，因为使用后台进程可能会很棘手......我会推荐`session_set_save_handler` [http://www.php.net/manual/en/function.session-set-save-handler。](http://www.php.net/manual/en/function.session-set-save-handler.php)用于数据库基础会话的[php](http://www.php.net/manual/en/function.session-set-save-handler.php)

这里有一个很好的例子[http://www.php.net/manual/en/function.session-set-save-handler.php#96305](http://www.php.net/manual/en/function.session-set-save-handler.php#96305)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:36:56.567

称呼

```
string file_get_contents ( string $filename [, bool $use_include_path = false [, resource $context [, int $offset = -1 [, int $maxlen ]]]] ) 
```

$maxlen =0;

在文件名中，您可以提供 url。在该 url 中传递会话 ID，并在调用的脚本中使用 session_id() 设置会话 ID，然后调用 session_start()。

确保调用脚本使用flush() 和ob_flush() 返回至少520 个虚拟字符，这样调用脚本就不会等待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T22:33:57.207

“会话”背后的全部意义在于，用户客户端可以以“无状态”方式多次连接到服务器，但仍像单个连接一样保持“状态”。“会话”数据在来自同一用户客户端的多个连接之间共享。

当您在服务器上生成后台进程时，无论您是否使用 PHP，“会话”都不再具有任何实际意义。用户甚至可以在不影响服务器后台进程的情况下关闭他的客户端机器。

考虑到这一点，使用其他地方建议的 Cookie 是完全没用的。Cookies 保存在客户端机器上，后台进程对它的访问权限为零。

如果有您的后台进程需要的客户端信息，那么调用进程需要以某种方式将其作为某种参数或某种数据文件传递给后台进程。

我建议将“$_SESSION”变量作为 Json 编码的数据字符串保存到临时文件中。后台进程可以读取该文件，将其 Json 解码回一个数组，然后就像它仍然是 $_SESSION 一样使用它。然后删除临时文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T09:26:17.953

```
$_COOKIE['PHPSESSID'] = 'user_session_id';//Transfer parameters through $GLOBALS['argv']
session_start(); 
```

# c# - Fast FileSize 与 Linq 的比较

> ID：10410735
> 
> 赞同：2
> 
> 时间：2012-05-02T09:09:07.467
> 
> 标签：c#, linq, compare, fileinfo

我有两个文件目录，我想确保两者是相同的。因此，我创建了一个查询以将所有文件放入 FileInfo 数组中。我按文件名对所有文件进行了分组，现在想为每个组比较文件的“LastWriteAccess”和“长度”。

但是，老实说，就像我这样做，它的速度很慢。知道如何通过 Linq 比较组内的文件的长度，如果不同，让我做“某事”吗？

```
...

FileInfo[] fiArrOri5 = d5ori.GetFiles("*.*", System.IO.SearchOption.TopDirectoryOnly);
FileInfo[] fiArrNew5 = d5new.GetFiles("*.*", System.IO.SearchOption.TopDirectoryOnly);

FileInfo[] AllResults = new FileInfo[fiArrNew5.Length+fiArrOri5.Length];
fiArrNew5.CopyTo(AllResults, 0);
fiArrOri5.CopyTo(AllResults, fiArrNew5.Length);

var duplicateGroups = AllResults.GroupBy(file => file.Name);

        foreach (var group in duplicateGroups)
        {
            AnzahlElemente = group.Count();

            if (AnzahlElemente == 2)
            {
                if (group.ElementAt(0).Length != group.ElementAt(1).Length)
                {
                    // do sth
                }
            }

            ...
        } 
```

编辑：

如果我只运行以下代码段，它会运行得非常快。(~00:00:00:0005156)

```
Console.WriteLine(group.ElementAt(0).LastWriteTime); 
```

如果我只运行以下代码段，它会运行得非常慢。(~00:00:00:0750000)

```
Console.WriteLine(group.ElementAt(1).LastWriteTime); 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:14:23.220

我不确定这会更快 - 但这就是我这样做的方式：

```
var folderPathOne = "FolderPath1";
var folderPathTwo = "FolderPath2";

//Get all the filenames from dir 1
var directoryOne = Directory
    .EnumerateFiles(folderPathOne, "*.*", SearchOption.TopDirectoryOnly)
    .Select(Path.GetFileName);

//Get all the filenames from dir 2
var directoryTwo = Directory
    .EnumerateFiles(folderPathTwo, "*.*", SearchOption.TopDirectoryOnly)
    .Select(Path.GetFileName);

//Get only the files that appear in both directories
var filesToCheck = directoryOne.Intersect(directoryTwo);

var differentFiles = filesToCheck.Where(f => new FileInfo(folderPathOne + f).Length != new FileInfo(folderPathTwo + f).Length);

foreach(var differentFile in differentFiles)
{
    //Do something
} 
```

# php - if 语句返回 false，即使它不是

> ID：10410736
> 
> 赞同：1
> 
> 时间：2012-05-02T09:09:20.110
> 
> 标签：php, if-statement

我在这里有这个小片段，`false`即使它满足`if`声明它也会返回。

```
$urls = $_POST['links'];
    trim($urls);
$urls = explode("\r\n",$urls);
foreach($urls as $url){
    trim($url);
    if(strpos($url,'http://') === false)
        $url = 'http://'.$url;
    $parse = parse_url($url, PHP_URL_HOST);
    if(($parse != 'site.com') || ($parse != 'www.site.com')) //problem here
        echo 'false:'.$parse.'<br>';
    else
        echo 'true:'.$parse;
} 
```

输入来自文本区域：

```
http://site.com
site.com
http://www.site.com
www.site.com 
```

**输出：**

```
true:site.com
true:site.com
false:www.site.com
false:www.site.com 
```

你认为是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T09:15:25.237

我不确定您的真正意图，但以下行绝对是错误的：

```
 if(($parse != 'site.com') || ($parse != 'www.site.com')) //problem here 
```

这将始终返回 true，因为如果 parse 不是 'site.com' 则为 true，但如果 parse 不是 'www.site.com' 也为 true，因为它不能同时是它们两者，所以它必须永远是真实的。你的意思是 && 而不是 ||？即，逻辑与而不是逻辑或？

```
if(($parse != 'site.com') && ($parse != 'www.site.com')) 
```

编辑：实际上，如果您提出的问题是所需的行为，即 site.com 为 true，www.site.com 为 false，那么您只需要：

```
if ($parse == 'site.com')
{
    echo 'false:'.$parse;
}
else if ($parse == 'www.site.com')
{
    echo 'false:'.$parse;
} 
```

或者也许这不是你真正想要的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:15:53.380

想想你在第二个 if 语句中使用的逻辑。不管是什么`$parse`，你总会落入`if`树枝。（也就是说，你永远不会落入`else`树枝。）

考虑以下替代方案：

```
// "Not A AND Not B"
if(($parse != 'site.com') && ($parse != 'www.site.com'))
// ...

// "Neither A nor B"
if(!(($parse == 'site.com') || ($parse == 'www.site.com')))
// ...

// "Either A or B"
if(($parse == 'site.com') || ($parse == 'www.site.com'))
    echo 'true:'.$parse;
else
    echo 'false:'.$parse.'<br>';
// Note here we also swapped the two branches. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:16:19.850

将 if 行更改为：

```
if(($parse != 'site.com') && ($parse != 'www.site.com')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:24:15.307

替换这一行：

```
if(($parse != 'site.com') && ($parse != 'www.site.com')) 
```

# validation - Symfony2+Doctrine - 验证实体的一对多集合

> ID：10410741
> 
> 赞同：14
> 
> 时间：2012-05-02T09:09:40.583
> 
> 标签：validation, symfony, collections, doctrine, one-to-many

我有一个创建新实体的表单。该实体具有也以该表单输入的其他实体的集合。

我想使用集合中实体的验证选项来验证这些实体，但它不起作用。检查“主要”实体（Person）的验证规则，但`addressList`不检查集合（Address）中实体的验证规则。当我在字段中输入无效信息时，提交的表单已成功验证。

在此示例中，街道的注释未用于验证。

```
class Person 
{
    ...

    /**
     * @ORM\OneToMany(targetEntity="Address", mappedBy="owner", cascade={"persist", "detach"})
     */
    protected $addressList;

    ....
}

class Address
{
    ...
    /**
     * @ORM\ManyToOne(targetEntity="Person", inversedBy="addressList")
     * @ORM\JoinColumn(name="person_id", referencedColumnName="id", onDelete="CASCADE")
     */
    protected $owner;

    /**
     * @ORM\Column(type="string", length=75)
     * @Assert\MinLength(
     *     limit=3,
     *     message="Street must have atleast {{ limit }} characters."
     * )
     */
    protected $street;

    ...

} 
```

如何获取表单以验证提供的地址实体？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T07:58:17.077

我有同样的问题，但解决了：

```
/**
 * @ORM\OneToMany(
 *  targetEntity="Entity",
 *  mappedBy="mappedEntity",
 *  cascade={"persist" , "remove"}
 * )
 * @Assert\Valid
 */ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-28T07:24:19.253

我用这个：

```
use Symfony\Component\Validator\ExecutionContextInterface;

class Person 
{
...

/**
 * @ORM\OneToMany(targetEntity="Address", mappedBy="owner", cascade={"persist", "detach"})
 */
protected $addressList;

....

/**
 * @Assert\Callback
 */
public function validate(ExecutionContextInterface $context)
{
    if (!$this->getAddressList()->count()) {
        $context->addViolationAt(
            'addressList',
            'You must add at least one address',
            array(),
            null
        );
    }
}
} 
```

[http://symfony.com/doc/current/reference/constraints/Callback.html](http://symfony.com/doc/current/reference/constraints/Callback.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-09T05:33:14.830

只需添加注释断言，如下所示

```
/** 
 * @Assert\Count(
 *      min = "1",
 *      minMessage = "You must specify at least one"
 * )
 * @Assert\Valid 
 * 
 */
protected $name_of_collection_property; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T10:58:41.340

您还可以将“ [Valid](http://symfony.com/doc/current/reference/constraints/Valid.html) ”约束与“ [All](http://symfony.com/doc/current/reference/constraints/All.html) ”约束一起使用：

```
/**
 * @ORM\OneToMany(targetEntity="Address", mappedBy="owner", cascade={"persist", "detach"})
 * @Assert\All({
 *     @Assert\Valid
 * })
 */

protected $addressList; 
```

# msbuild - 如何在发布前备份网站

> ID：10410742
> 
> 赞同：1
> 
> 时间：2012-05-02T09:09:46.037
> 
> 标签：msbuild, backup, teamcity, msdeploy, remote-server

我正在使用以下命令使用 teamcity msbuild 在远程服务器上构建包和部署站点

```
/M /P:Configuration=%env.Configuration% /P:DeployOnBuild=True /P:DeployTarget=MSDeployPublish /P:MsDeployServiceUrl=%env.TargetServer%/MsDeployAgentService /P:DeployiisAppPath=%env.IISPath% /P:MSDeployPublishMethod=RemoteAgent /P:CreatePackageOnPublish=True /P:Username=%env.username% /P:Password=%env.password% 
```

但我想将该站点备份到特定目录。尝试使用批处理文件进行压缩并进行备份，但是由于它将在远程计算机上运行，​​因此非常耗时。我正在寻找可以使用 msbuild 或任何其他有效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T08:04:42.083

你检查过这个文件吗？

[http://www.iis.net/learn/publish/using-web-deploy/web-deploy-automatic-backups](http://www.iis.net/learn/publish/using-web-deploy/web-deploy-automatic-backups)

它说如果在服务器上启用了备份，则会自动创建备份（然后解释如何设置它）

# iphone - XCode 4 未检测到 iPad

> ID：10410745
> 
> 赞同：0
> 
> 时间：2012-05-02T09:09:55.573
> 
> 标签：iphone, objective-c, xcode

我有 iPad 1，我想在上面测试我的应用程序。

我将 iPad 连接到计算机，而`IOS Device`不是更改设备名称。当我按下运行时，我得到这个消息：

```
Xcode cannot run using the selected device.
No provisioned iOS devices are available with a compatible iOS version. 
Connect an iOS device with a recent enough version of iOS to run your 
application or choose an iOS simulator as the destination. 
```

任何建议为什么会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:11:55.900

此错误的主要解释是

1) 您的 iPad 运行的操作系统版本比 Xcode 支持的版本更新

或者

2) 你还没有配置你的 iPad

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:50:25.353

行

我找到了解决方案：`IOS Deployment Target`将其更改为您希望应用程序可以运行的最低版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:12:05.147

您需要将设备的 UDID 添加到您的开发者移动配置文件中。如果您有 Xcode 4.2，这实际上可以自动完成，否则您必须手动执行此操作（获取 UDID，登录开发人员门户，将设备的 UDID 添加到设备列表中，然后在该设备上添加到您的开发人员资料中，下载并安装该配置文件，选择此配置文件作为您当前应用的开发者配置文件）

# android - 弹出窗口中的 Android 实时心电图类型图

> ID：10410746
> 
> 赞同：1
> 
> 时间：2012-05-02T09:09:56.157
> 
> 标签：android, graphics, real-time

我已经查看了一些有关实时线图的线程（用于心电图跟踪等项目），所有解决方案都基于图形是主要活动的想法。我需要的是一个弹出情况，仅在需要时才绘制折线图。

可以将“表面”附加到 PopupWindow 吗？现在我使用 Canvas 的 AlertDialog 和 invalidate() 并且首先它不是实时的（整个数据集被绘制然后更新，因此每次更新都会“闪烁”），其次 AlertDialog 似乎无法控制的大小（两个方向的大小相同）但我确实看到数据显示在滚动的 ListView 中对话框后面的背景中，这是应用程序的主要活动。

如果我可以在没有这个丑陋的 invalidate() 的情况下在 AlertDialog 中实时绘图，我什至会很高兴，尽管无法指定它的大小令人沮丧！

# javascript - 访问系统光标图像表单 JavaScript

> ID：10410747
> 
> 赞同：0
> 
> 时间：2012-05-02T09:09:59.790
> 
> 标签：javascript, css, browser

我需要在网页的不同部分同时显示多个光标（指针）来制作视觉效果。简单的解决方案是制作我自己的 *.cur 图像并将其用作*真实光标的“光标”css 属性值以及所有**假*光标的固定位置的图像。我不会走简单的路！

我尝试访问系统（或浏览器）的默认光标图像并使用它，这样每个人都会看到自己的光标，而不是我的自定义光标。

有什么方法可以访问此图像吗？我的意思是使用的不是css'cursor'属性设置为'default'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:16:15.820

我相信这是一个操作系统光标，而不是浏览器。我会选择一个简单的解决方案，即为光标使用自定义图像并为假光标使用相同的图像

# c# - Autofac：如何强制从特定接口继承的对象的所有方法具有属性

> ID：10410752
> 
> 赞同：1
> 
> 时间：2012-05-02T09:10:18.603
> 
> 标签：c#, .net, autofac, custom-attributes

**问题** 我正在 MVC .NET 中创建权限系统。我试图强制从 IModel 继承的所有方法都具有特定的属性，例如。允许

例如，

```
 public class User : IModel
  { 
    [Permission(Admin, Moderator)
    public User GetUser(long userId){...}

    [Permission(Admin)
    public User DeleteUser(long userId){...}

    public User EditUser(long userId){...}
  } 
```

有没有办法强制 User 的所有公共方法都具有 Permission 属性？例如，如果 EditUser 没有 Permission 属性，上面的代码应该会在启动时失败。

**可能的解决方案**

我正在考虑使用 Autofac（依赖注入）来完成这项工作。但是，我对 .Net 或 Autofac 还不是很熟悉。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:48:51.657

您通常会在控制器而不是模型上的操作级别控制授权。MVC 框架已经有一个支持角色的 Authorize 属性。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)

可以将此属性放在控制器上以强制执行所有操作的授权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:12:19.123

我会编写一个使用反射来验证属性存在的单元测试。

```
foreach(var method in typeof(User).GetMethods())
{
    var permissionAttributes = method.GetCustomAttributes(typeof(PermissionAttribute)).Cast<PermissionAttribute>();
} 
```

上面的代码可能无法编译 - 从内存中写入 ;-)

`interceptor`此外，如果您想拦截方法调用并检查权限，您可能需要谷歌搜索。DI 不会帮助你。

# jquery - 从 Google Geocdoe 中提取地址类型

> ID：10410756
> 
> 赞同：0
> 
> 时间：2012-05-02T09:10:43.083
> 
> 标签：jquery, json, google-geocoder, google-geocoding-api

目标：尝试对用户输入的地址进行地理编码，然后获取信息，将其放入表单并将此信息输入数据库。

到目前为止的道路：我已经使用以下代码成功地完成了这项任务：

```
$(function() {
    $("#address").autocomplete({
        //This bit uses the geocoder to fetch address values
        source : function(request, response) {
            geocoder.geocode({
                'address' : request.term
            }, function(results, status) {
                response($.map(results, function(item) {
                    return {
                        label : item.formatted_address,
                        value : item.formatted_address,
                        latitude : item.geometry.location.lat(),
                        longitude : item.geometry.location.lng(),
                        streetNo : item.address_components[0].long_name,
                        streetName : item.address_components[1].long_name,
                        town : item.address_components[2].long_name,
                        province : item.address_components[4].long_name,
                        postal : item.address_components[6].long_name,
                        country : item.address_components[5].long_name
                    }

                }));
            })
        },
        //This bit is executed upon selection of an address
        select : function(event, ui) {

            //Now that an address has been selected, show the address form
            $("#newReview").show('fast');
            $("#latitude").val(ui.item.latitude);
            $("#longitude").val(ui.item.longitude);
            $("#streetNo").val(ui.item.streetNo);
            $("#streetName").val(ui.item.streetName);
            $("#streetNo").val(ui.item.streetNo);
            $("#town").val(ui.item.town);
            $("#postal").val(ui.item.postal);
            $("#province").val(ui.item.province);
            var location = new google.maps.LatLng(ui.item.latitude, ui.item.longitude);
            marker.setPosition(location);
            map.setCenter(location);

            $(".correctAddress").click(function() {
                if($(".correctAddress").val() == "yes") {
                    $("#map").hide('fast');
                };
            });

            $(".inCorrectAddress").click(function() {
                if($(".inCorrectAddress").val() == "no") {
                    $("#map").show('fast');
                };
            });
        }
    });
}); 
```

**注意**我只包含了执行“工作”的代码。

**现在做什么**：：用户可以查找地址，他们会收到自动完成建议，当他们选择地址时，会出现一个带有一些字段的“表单”，其中已经填充了地址信息。

然而，问题在于，根据最终选择的地址，信息可能并不总是匹配。

IE 1139 Ontario Rd, Welland ON, L3B 5E5, Canada 将正常工作，并且字段将正确填充，但如果用户选择“地点”或不正确的地址，例如：

Cornelia Ct, 81 Cornelia St W, Smiths Falls ON 等....

然后信息不好，因为我得到了“Cornelia Ct”这个名字，而不是应该是 81 的街道号码，因为在这种情况下：

```
streetNo : item.address_components[0].long_name, 
```

该数组节点实际上是“Cornelia Ct”名称，它是地址的第一部分。

我需要做的是提取地理编码返回的“类型”，如本例所示：[https](https://developers.google.com/maps/documentation/geocoding/#JSON) ://developers.google.com/maps/documentation/geocoding/#JSON 或此链接上的信息： [https://developers.google.com/maps/documentation/geocoding/#Types](https://developers.google.com/maps/documentation/geocoding/#Types)

这样，如果我能做到这一点，街道号码将始终是“street_number”和街道名称“路线”等......等等......，让我保持我的数据有效和统一。

我在stackoverflow上检查了这个问题：

[如何从谷歌地图地理编码返回地址类型？](https://stackoverflow.com/questions/8942108/how-to-return-address-types-from-google-maps-geocode)这个答案有效，但我已经在做同样的事情了。

诚然，我几乎没有解析 JSON 的经验，但根据我所理解和迄今为止所尝试的，我认为有一种方法可以使用实际的“类型”名称而不是数组的节点号？

我尝试了各种方法，例如：

```
item.address_components['street_name'].long_name 
```

和它的变化，但我似乎无法破解它。

这段代码的第二个问题是，通过询问那些特定的结果，自动完成搜索只会在你已经输入大部分内容时给你一个建议，就好像它在等待匹配所有这些字段之前猜测一样。

如果我可以在地理编码的“返回”之外使用数组，理论上它应该允许更流畅的搜索，就像我删除时一样：

```
streetNo : item.address_components[0].long_name,
streetName : item.address_components[1].long_name,
town : item.address_components[2].long_name,
province : item.address_components[4].long_name,
postal : item.address_components[6].long_name, 
```

提前感谢你们的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:31:09.093

我自己也解决了这个问题，这是我的解决方案。我在输入上使用了[livequery](http://docs.jquery.com/Plugins/livequery)，因为它可以在我的代码中隐藏/显示，但是如果您愿意，可以编辑此行以删除插件。

```
$("#GeneralLocation").livequery(function() {
  $(this).autocomplete({
    //This bit uses the geocoder to fetch address values
    source: function(request, response) {
      geocoder.geocode( {'address': request.term }, function(results, status) {
        response($.map(results, function(item) {
          return {
            label:  item.formatted_address,
            value: item.formatted_address,
            address_components: item.address_components,
            latitude: item.geometry.location.lat(),
            longitude: item.geometry.location.lng()
          }
        }));
      })
    },
    minLength: 3,  //only start suggestions after this many chars
    //Executed upon selection of an address
    select: function(event, ui) {

  // Inline function, Return an address field by type
  function getaddrfield(addr,type) {
    var ret = "";
    $.each(addr,function(index, c) {
      if ($.inArray(type,c.types)>=0)
        ret = c.long_name;
    });
    return(ret);
  }

      loc_suburb = getaddrfield(ui.item.address_components, "locality");
      loc_state = getaddrfield(ui.item.address_components, "administrative_area_level_1");
      loc_country = getaddrfield(ui.item.address_components, "country");
    }
}); 
```

提示是最受欢迎的，但我希望对某人有所帮助。

唐有一个美好的一天

# sql-server - 在 SQL Azure 上部分搜索两个文本字段 - 最佳实践

> ID：10410774
> 
> 赞同：1
> 
> 时间：2012-05-02T09:11:33.720
> 
> 标签：sql-server, azure, full-text-search, azure-sql-database, full-text-indexing

我试图确定在表中的两列上实现部分搜索的最佳方法。目的是让此搜索尽快执行。

我们的问题是我们的数据库托管在 SQL Azure 上；不支持全文索引。这意味着我们在 SQL 中唯一可用的本机命令是`CHARINDEX()`和`LIKE '% %'`。

如果我们要在纯 T-SQL 中执行查询，查询的结构将是：

```
DECLARE @SearchTerm VarChar(255) = 'Luke'

SELECT  AU.UserID,
        AU.FirstName,
        AU.Surname
FROM dbo.Users AU
WHERE AU.FirstName LIKE '%'+@SearchTerm+'%'
OR AU.Surname LIKE '%'+@SearchTerm+'%' 
```

我们还可以使用 Lucene；我们已经在 Windows Azure 上的 Worker Role 上设置了它，但是我们必须在数据库内部和 Lucene 中维护数据的完整性。

我想知道的是：

1.  `LIKE`有没有比我上面使用的更好的方法在 T-SQL 中执行搜索
2.  如果我在包含名字和姓氏的表中添加一个计算列，这会提高查询的性能吗？
3.  或者; 如果我们迁移到 Lucene；读取性能会比上述查询高得多吗？（关于这一点；表中当前有不到 10,000 行`dbo.Users`）
4.  打开门；是否有一些我们没有考虑过的方法可以使整个负载变得更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:30:19.700

添加包含名字和姓氏的计算列将强制结果包含名字和姓氏，但您上面的 SQL 用于匹配名字或姓氏。

如果您想匹配名字和姓氏，计算列可能会更快，因为数据库程序员可以为您应用一些技巧（例如：Boyer-Moore 快速字符串搜索，随着模式大小的增加而变得更快）。

我对 Lucene 的体验是它比任何数据库搜索都快得多——我在日常硬件上没有看到任何更快的速度。但是正如您所说，您必须使 Lucene 索引与数据库保持同步。

# ios - iOS SVN 签入规则

> ID：10410779
> 
> 赞同：0
> 
> 时间：2012-05-02T09:11:49.857
> 
> 标签：ios, svn

我是 iOS 开发的新手。我们将 SVN 用于代码存储库。

我想知道是否有办法设置一些代码签入规则？即假设我们有一个代码指南，我们希望团队中的每个人都虔诚地遵守它。我们可以设置一些规则，通过这些规则可以自动发现这个人是否遵循了指导方针。

诸如 TFS 签入[策略](http://msdn.microsoft.com/en-us/library/bb668980.aspx)之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:41:44.660

您可以在服务器端使用所谓的**“钩子”**。最重要的是 pre-commit-hook

**您可以在目录挂钩**中的存储库内的服务器上找到它们

 **您可以将任何可执行文件放在那里，它将在提交期间被调用。有一个名为**svnlook**的 svn 命令，您可以使用它直接查看要提交的事务。

在每个存储库中，SVN 提供的每个钩子都有一个示例。这些模板显示了带有一些有意义的 bash 脚本的示例实现。

[有关钩子的更多信息](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.reposadmin.create.hooks)**

# javascript - 附加到 DIV 后找不到元素 ID

> ID：10410781
> 
> 赞同：0
> 
> 时间：2012-05-02T09:11:59.353
> 
> 标签：javascript, jquery

在选中复选框后，我正在使用这部分 jQuery 将文本输入字段附加到 div：

```
$('.sharewithfriends').on("click", ".manual-invite", function () {
        if ($('input[name=manual-invite]').is(':checked')) {
          $('<li style="margin-top:0;display:none"><input type="text" id="invite_email1" name="invite-email1" value="Add an E-Mail" onfocus="clearText(invite_email1);" onblur="fillText(invite_email1);"/><span><a class="add" href="">Add</a></span></li>').appendTo('#invite-emails').slideToggle();

} 
```

`onfocus`除了和`onblur`事件之外，所有这些都很好。他们调用以下简单函数，这些函数应该清除焦点上的字段并用模糊时的默认文本填充它：

```
function clearText(thefield){
if (thefield.defaultValue==thefield.value)
thefield.value = ""
}

function fillText(thefield){
if (thefield.value=="")
thefield.value=thefield.defaultValue;
} 
```

但是，当我单击该字段时，我收到一条错误消息，提示“invite_email1 is not defined”，即使它显然是。

任何人都知道我需要做什么才能让它工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:14:25.387

你指的不是正确的元素。

替换`clearText(invite_email1);`为`clearText(this);`。
更好的是，绑定事件侦听器而不是添加内联事件。

# c - ELF 文件的 .bss 部分应该在哪里占用内存？

> ID：10410785
> 
> 赞同：9
> 
> 时间：2012-05-02T09:12:08.397
> 
> 标签：c, linux, memory, elf

众所周知，.bss 部分没有存储在磁盘中，但内存中的 .bss 部分应该初始化为零。但它应该在内存中的哪个位置？是否有任何信息显示在 ELF 标头或 .bss 部分是否可能出现在数据部分旁边，或其他内容？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T09:21:09.350

BSS 位于数据和堆之间，如[这篇精彩的文章中所述](http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory)。

![在此处输入图像描述](../Images/a026d943bdbc73b247976977e5dae73b.png)

您可以使用以下命令找出每个部分的大小`size`：

```
cnicutar@lemon:~$ size try
   text    data     bss     dec     hex filename
   1108     496      16    1620     654 try 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T12:57:15.353

要知道 bss 段在内存中的位置，运行`readelf -S program`并检查行上的*Addr*列就足够了`.bss`。

在大多数情况下，您还会看到已初始化的数据部分 ( `.data`) 紧接在前面。也就是说，您将看到该部分的*Addr+Size*与该`.data`部分的起始地址匹配`.bss`。

然而，情况并非总是如此。这些是历史惯例，[ELF 规范](http://www.sco.com/developers/devspecs/gabi41.pdf)（与平台特定的补充一起阅读，例如涵盖[32 位 x86 机器](http://www.sco.com/developers/devspecs/abi386-4.pdf)的第 5 章）允许更复杂的配置，但并非所有这些都受 Linux 支持。

例如，该部分可能根本不被调用`.bss`。构成 BSS 部分的仅有 2 个属性是：

1.  该部分标有`SHT_NOBITS`（即，它在内存中占用空间，但在存储中不占用空间），显示为`NOBITS`的`readelf`输出。
2.  它映射到可加载 ( `PT_LOAD`)、可读 ( `PF_R`) 和可写 ( `PF_W`) 段。这样的段在存储上也比在内存中短（`p_filesz`< `p_memsz`）。

您可以有多个 BSS 部分：PowerPC 可执行文件可能有`.sbss`未`.sbss2`初始化的数据变量。

最后，BSS 部分不一定与数据部分或堆相邻。如果您检查[Linux 内核](https://github.com/torvalds/linux/blob/master/fs/binfmt_elf.c)（尤其是`load_elf_binary`函数），您可以看到 BSS 部分（或更准确地说，它映射到的[段](http://users.csc.calpoly.edu/~mhaungs/archive/paper/node16.html)）甚至可能与代码和初始化数据交错。Linux 内核设法解决了这个问题。

# c# - EndDate 时间不接受（2400）午夜作为完成时间（C#）

> ID：10410786
> 
> 赞同：1
> 
> 时间：2012-05-02T09:12:15.733
> 
> 标签：c#

下面的方法应该接受 2400 作为结束时间的结束日期时间，但结果为空；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:38:27.453

来自该属性的[MSDN 规范。](http://msdn.microsoft.com/en-us/library/system.datetime.hour.aspx)`DateTime.Hour`

> 小时分量，表示为 0 到 23 之间的值。

因此，在您使用[的 DateTime 的构造函数中](http://msdn.microsoft.com/en-us/library/272ba130.aspx)，小时整数必须是 0 到 23 之间的值。 24 将抛出一个`ArgumentOutOfRangeException`，在您的代码中它将被空的 catch 块捕获（通常空的 catch 块是一个坏主意 - 请参阅[这个答案](https://stackoverflow.com/q/1234343/608457)）。

如果要将非标准的 2400 作为有效时间处理，则需要为其添加特殊处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T06:14:59.970

> 如果要将非标准的 2400 作为有效时间处理，则需要为其添加特殊处理。

小时 % 2400

[模运算符](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:15:54.593

ISO 8601 5.3.2 区分了 DateTime 的组合表示（例如 2013-01-22 14:30:00）和未组合的仅时间表示（例如 18:00）。对于未组合的仅时间表示，为了消除一天的开始与一天结束的歧义，ISO 规范规定值 24:00 是 24 小时一天结束的有效表示。Microsoft 在 .NET 客户端或 SQL Server 中不遵循此 ISO 规范，您将需要使用上面建议的解决方法之一。（其他数据库，如 PostgreSQL、DB2 和 SQLite 确实遵守 ISO 规范。）

# ssrs-2008 - 是否可以在维度数据库上使用 SSRS 设计报告_

> ID：10410792
> 
> 赞同：1
> 
> 时间：2012-05-02T09:12:49.957
> 
> 标签：ssrs-2008, reporting-services, reportingservices-2005

我们有 Sql 服务器数据库，它是根据雪花（事实和维度）模式设计的。这些表没有 PK 和 FK 关系。相反，我们在元数据表中维护这些信息。

是否可以在这些表格的 SSRS 中设计报告？

我想通过组合表格中的不同列来设计报告。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:34:31.137

假设 Fact 和 Dimension 表保存在传统的关系数据库中，您可以使用传统的 SQL 查询在 SSRS 中访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:21:58.153

如果数据库结构是OLAP，则需要MDX而不是T-SQL来查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:03:07.897

是的，当然可以！无论您的数据在数据库中的结构如何，如果您设法构建查询来显示它，SSRS 将能够在 DataSet 上读取它并在报告中使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T23:32:56.673

一个 SELECT 语句就足够了。首选视图或存储过程。很难想象一个不支持这些选项的 SQL 数据库。

# c++ - logger-errors 的多重定义

> ID：10410794
> 
> 赞同：-1
> 
> 时间：2012-05-02T09:12:55.450
> 
> 标签：c++, multithreading

我有两个测试文件，一个旧的，一个新的。当我测试新文件时，我收到以下消息：

```
build/Debug/MinGW_1-Windows/_ext/86258799/loggerthread_nomain.o: In function `log':
c:/repos/trunk/logging/impl/../include/Logger.h:71: multiple definition of `logger'
build/Debug/MinGW_1-Windows/tests/tests/loggingsimpletest.o:C:\repos\trunk\logging/tests/../include/Logger.h:71
: first defined here

collect2: ld returned 1 exit status
make[1]: *** [build/Debug/MinGW_1-Windows/tests/TestFiles/f1] Error 1
make: *** [.build-tests-impl] Error 2 
```

这个错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-30T13:45:23.683

您需要在 Logger.h 头文件中使用[包含保护](https://en.wikipedia.org/wiki/Include_guard)以防止多次包含。

您还可以在头文件和源文件中定义相同的类。您应该只在一个地方或另一个地方定义它（通常是头文件）。

# c# - 按不同日期排序时选择值 tolist()

> ID：10410799
> 
> 赞同：6
> 
> 时间：2012-05-02T09:13:16.930
> 
> 标签：c#, silverlight, linq, entity-framework, linq-to-sql

我想通过升序不同的日期来排序选定的值。

例如，我的数据库中有这些值。

```
ID | Value | Date 
 1 | 35    | 2012/01/20
 2 | 0     | 2012/01/20
 3 | 10    | 2012/02/01
 4 | 0     | 2012/02/01
 5 | 0     | 2012/03/01
 6 | 0     | 2012/03/01 
```

由于 ID 1 在 1 月 20 日有一个值，而 ID 3 在 2 月 1 日有一个值，我希望将这两个日期选择到我的不同日期值列表中。但是对于 ID 5 和 6，两者的值都为 0。因此，如果值为 0，我也希望添加值 0。

现在我的 linqquery 看起来像这样

```
 var totalHours = (from u in context.Users
                          join r in context.Reports on u.Id equals r.UserId
                          join w in context.Weeks on r.Id equals w.ReportId
                          join d in context.Days on w.DayId equals d.Id
                          orderby d.Date ascending
                          where r.weekNr.Equals(currentWeek)
                          select d.Hour).ToList(); 
```

但是这个查询当然给了我 35,0,10,0,0,0 作为结果。虽然我想让它给我 35,10,0

我不想选择不同的值，比如 2 月 1 日和 2 月 2 日是否具有相同的值。我希望添加这两个值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:47:59.850

我建议首先从第一个查询中选择您需要的内容：

```
 var totalHours = (from u in context.Users
                          join r in context.Reports on u.Id equals r.UserId
                          join w in context.Weeks on r.Id equals w.ReportId
                          join d in context.Days on w.DayId equals d.Id
                          orderby d.Date ascending
                          where r.weekNr.Equals(currentWeek)
                          select new {id = r.UserId, hour = d.Hour, date = d.Date}).ToList(); 
```

在上面我假设 d.Hour 对应`Value`于您示例中的字段。

然后按日期分组，按小时降序排列，然后从每组中选择第一项：

```
var distinctValues = totalHours
                .GroupBy(th => th.Date)
                .OrderByDescending(v => v.Max(o => o.Hour))
                .Select(g => g.First()); 
```

**更新**

要仅返回 Hour 属性的整数列表，请使用此语句而不是上述语句：

```
 var distinctValues = totalHours
                .GroupBy(th => th.Date)
                .OrderByDescending(v => v.Max(o => o.Hour))
                .Select(g => g.First().Hour)
                .ToList(); 
```

**更新 2**

你能试试这个吗？

```
var distinctValues = totalHours
                .GroupBy(th => th.Date)
                .Select(g => g.OrderByDescending(e => e.Hour))
                .Select(g => g.First().Hour)
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T09:40:58.670

您的意思是您希望它按日期分组并汇总小时数。如果是这样，它可能是这样的吗？

```
 var totalHours = (from u in context.Users                           
join r in context.Reports on u.Id equals r.UserId                           
join w in context.Weeks on r.Id equals w.ReportId                           
join d in context.Days on w.DayId equals d.Id                           
orderby d.Date ascending                           
where r.weekNr.Equals(currentWeek)                           
).GroupBy(n => n.Date).Select(n => new { Date = n.Key, Hour = Sum(x => x.Hour) }).ToList(); 
```

只是为了解释

```
.GroupBy(n => n.Date) 
```

将按日期对结果进行分组，因此您将在每个日期获得不同的行

```
.Select(n => new { Date = n.Key, Hour = Sum(x => x.Hour) }) 
```

将选择和塑造结果。我们正在塑造一个新的对象。`n.Key`是小组工作的关键，所以这将是`Date`。第二个属性是小时的总和，因此每个不同的日期都会有它的小时总和。我们正在使用`new`关键字，因此将结果放入一个新的自定义对象中。我们已经定义了新对象的属性名称，所以会有两个 -`Date`和`Hour`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:20:25.730

```
 var totalHours = (from u in context.Users
                          join r in context.Reports on u.Id equals r.UserId
                          join w in context.Weeks on r.Id equals w.ReportId
                          join d in context.Days on w.DayId equals d.Id
                          orderby d.Date ascending
                          where r.weekNr.Equals(currentWeek)
                          select d.Hour).Distinct().OrderByDescending( n => n ).ToList(); 
```

# php - 为星号定制的 web gui

> ID：10410802
> 
> 赞同：0
> 
> 时间：2012-05-02T09:13:29.940
> 
> 标签：php, web, asterisk, pbx

请问我必须使用 PHP 或任何其他 Web 平台为 Asterisk 创建自定义 Web UI 的选项。该应用程序涉及从 Web 界面执行管理 CDR、管理用户、管理外部服务器之间的互连、管理 IVR、管理 DID 等任务。

我从另一个线程中了解了 PHPAGI。这对我想要实现的目标有帮助吗？如果没有，我还有什么其他选择。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:40:04.043

您可以完全控制星号。

它是免费的，开源的。

如果你想自己做，从这本书开始[http://www.asteriskdocs.org/](http://www.asteriskdocs.org/)

但是在大多数情况下，建议联系星号开发人员/自由职业者。只是因为由非星号专业人士创建的 GUI 很有可能无法扩展和出错。

您也可以查看 freepbx.org 代码或 a2billing.org 代码。

在使用自己的界面进行处理之前，您必须真正知道的主要事情是星号扩展。

# javascript - 在 javascript/AJAX 应用程序中用于 UI 绑定的典型方法是什么？

> ID：10410809
> 
> 赞同：1
> 
> 时间：2012-05-02T09:13:53.503
> 
> 标签：javascript, jquery, ajax, uibinder

**一些背景**

我目前正在构建一个主要是经典网络应用程序（而不是单页应用程序），但是我的大多数表单都是 AJAX。

我无法将 UI 绑定到我的模型 - 目前我必须明确： -

1.  告诉每个生成表单的按钮从哪里获取表单（它已交付，预填充为 AJAH）
2.  告诉每个表单它绑定到哪个内容框并且必须在成功请求时更新

3.  告诉内容框去哪里刷新自己

目前这是通过将这些属性添加到生成它们的相应对象中来完成的，并且用于获取的 url 由 js 构造。

**问题**

我真的很想把所有东西联系在一起，让它更容易（也许是事件或其他东西？）但是有人可以*简单*地解释一下 UI 绑定通常是如何实现的机制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:27:06.560

好的，所以我决定这样做的方式是定义一个`ContentBox.Update()`javascript 方法，这样页面上的每个内容框都可以被告知更新自身。

然后在服务器端的 Form 类中，我有一个`$form->bind($content_box_id);`方法将绑定添加到传递给 javascript 的 Form 类中的绑定数组中。然后，一旦提交了表单，绑定数组就会循环，并`ContentBox.Update()`在表单绑定到的每个内容框上调用该方法。

# windows - 在 certreq -new policy inf 文件中将 KeySpec 定义为“both”

> ID：10410812
> 
> 赞同：2
> 
> 时间：2012-05-02T09:14:07.157
> 
> 标签：windows, certificate, csr

我正在使用 certreq -new 并且有一个 inf 格式的策略文件。我想将“KeySpec”参数设置为“both”，文档告诉我这是可能的。但它并没有告诉我如何：

> KeySpec 确定密钥是否可用于签名、Exchange（加密）或两者兼而有之。

而签名由“2”定义，加密（交换）由“1”设置。输入 0 会生成一个签名规范，输入 3 告诉我它不知道“3”应该是什么。

有人知道如何为两者定义 KeySpec 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:06:59.760

对于任何有兴趣的人，我都知道了。KeySpec 2 表示*仅*签名，KeySpec 1 表示*两者*，并且要将密钥限制为仅加密，请使用*EncipherOnly*选项。

还有一个相关的注释，因为我偶然发现它：Using`KeyLength=2048`不适`KeySpec=1`用于“Microsoft Base Cryptographic Provider”，您必须选择另一个（用于`cerutil -csplist`查找）。

# z-index - IE7/IE8 上的 Z 索引

> ID：10410816
> 
> 赞同：1
> 
> 时间：2012-05-02T09:14:23.810
> 
> 标签：z-index

所以这里是我正在尝试做的图片：

[http://imageshack.us/content_round.php?page=done&l=img14/1023/62507155.jpg](http://imageshack.us/content_round.php?page=done&l=img14/1023/62507155.jpg)

FF 显示还可以，IE8 - 不知道 1 台 PC 上的 ie 可以，从另一台 PC 上检查不可以，IE7 不可以。

我有一个具有相对定位的 div 和一个透明的背景图片，它覆盖了 div 2。 div 2 是绝对定位的，并用 z-index：-1 贴在 div1 的底部。

如何使它在所有浏览器（尤其是 IE7/8）上看起来都一样？我读过关于将更高的 z-index 放在父 div 上并降低嵌套 div 的内容，但这只是让 div2 在所有浏览器上都处于首位。

这是代码：

```
#div1 { 
 position: relative;
 height: 900px;
 width: 850px;
 float: left;
 background: url(img/background-left.png) no-repeat;

}
#div2 {
    position: absolute;
    background: red;
    width: 850px;
    height: 420px;
    bottom: 0px;
    border: none;
    z-index: -1;
}
<div id="div1">
    <div id="div2"></div>
</div> 
```

如果我从 div1 中删除相对位置，那么它的背景总是像我想要的那样位于 div2 的顶部，但是如果没有相对位置，我就无法将 div 2 粘贴到 div1 的底部。

# ruby-on-rails-3 - Rails：通过发布带有文件附件的多部分消息来测试 OAuth API

> ID：10410818
> 
> 赞同：2
> 
> 时间：2012-05-02T09:14:26.320
> 
> 标签：ruby-on-rails-3, http, oauth-2.0, multipart

我有一个带有 OAuth API 的 Rails 应用程序。我正在使用 Doorkeeper gem 进行 OAuth 2 身份验证。我的 API 允许发布带有图像文件附件的消息。我想从 Ruby 控制台测试它。现在，问题是 - 我如何使用访问令牌签署发布请求？

Doorkeeper wiki 提供了使用 OAuth2 gem 本身测试 API 的教程。问题在于 OAuth2 类不提供使用文件附件发布多部分消息的方法（据我所知）。

[https://github.com/applicake/doorkeeper/wiki/Testing-your-provider-with-OAuth2-gem](https://github.com/applicake/doorkeeper/wiki/Testing-your-provider-with-OAuth2-gem)

还有一个 multipart-post gem，它允许将文件作为附件发布到 Rails API。但我不知道如何使用 access_token 签署此类请求，并通过 Doorkeeper 身份验证。

[https://github.com/nicksieger/multipart-post](https://github.com/nicksieger/multipart-post)

那么将多部分消息发布到使用 access_token 签名的 Rails API 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:14:24.623

oauth2 gem 似乎不支持分段上传。检查这个问题：[https ://github.com/intridea/oauth2/issues/81](https://github.com/intridea/oauth2/issues/81)

一种解决方法是`access_token`在您的参数中包含作为查询字符串或标题的 。按照自述文件中的示例：

```
require 'net/http/post/multipart'

url = URI.parse('http://www.example.com/upload')
File.open("./image.jpg") do |jpg|
  req = Net::HTTP::Post::Multipart.new url.path,
    "file" => UploadIO.new(jpg, "image/jpeg", "image.jpg")

  # here you include the token in headers
  req['Authorization'] = "Bearer #{THE_ACCESS_TOKEN}"
  res = Net::HTTP.start(url.host, url.port) do |http|
    http.request(req)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:37:03.077

如果出现此错误，您还必须明确设置 ssl：

```
EOFError in YourController#youraction 
end of file reached 
```

示例

```
require 'net/http/post/multipart'

url = URI.parse('http://www.example.com/upload')
File.open("./image.jpg") do |jpg|
  req = Net::HTTP::Post::Multipart.new url.path, 
    "file" => UploadIO.new(jpg, "image/jpeg", "image.jpg")

  # here you include the token in headers
  req['Authorization'] = "Bearer #{THE_ACCESS_TOKEN}"

  http = Net::HTTP.new(url.host, url.port)

  #mention the use of ssl
  http.use_ssl = true

  res = http.request(req)
end 
```

# selenium - 如何在 Selenium RC (Eclipse) 中执行导出的测试套件？

> ID：10410819
> 
> 赞同：0
> 
> 时间：2012-05-02T09:14:44.440
> 
> 标签：selenium, selenium-rc, selenium-ide

在 Selenium IDE 中：

我创建了一个测试套件：TS1.html，其中有两个测试用例：
Test1.html 和
Test2.html

那么在 Selenium RC (Eclipse) 中执行这个 TS1.html 测试套件的步骤是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:30:09.507

1.  在 Selenium IDE 中单击选项 -> 选项..
2.  在这里检查“启用实验功能”
3.  点击确定
4.  选项 -> 格式 -> JUnit 4（远程控制）
5.  点击确定
6.  将输出复制粘贴到 Eclipse

应该做魔术:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:03:45.013

使用 Selenium 服务器执行 .html 文件而不转换为任何其他语言（如 Java、C#、Ruby、Python、Perl、PHP 等）：

1.  打开终端/命令行
2.  转到selenium-server.jar所在的位置
3.  执行以下命令：

java -jar selenium-server.jar -port 4546 -htmlSuite *firefox " [http://www.google.com](http://www.google.com) " "C:\SeleniumTest\TS1.html" "C:\result.html"

测试将在 Firefox 中执行，测试结果将在 C 驱动器中生成为 result.html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:39:52.923

正如 Pavel 所说，您首先转到**Selenium IDE 中的选项**并将记录的代码转换为**JUnit 4**模型。然后将代码复制并粘贴到 Eclipse IDE 中。

带有两个测试用例的示例 JUnit 类：

```
public class JUnitSample{

    @BeforeClass
    public static void setup(){
        1)start the server
        2)Launch the browser
    }
    @Test
    public void testTestcaseName01(){
        paste your first test case 
    }
    @Test
    public void testTestcaseName02(){
        paste your second test case 
    }
    @AfterClass
    public static void setup(){
        1)close the browser.
        2)Stop the server..
    }
} 
```

由 IDE 转换的代码还不足以从 Eclipse IDE 运行。因此，您必须修改代码以从 Eclipse 运行。

# magento - magento 将捆绑商品从追加销售直接添加到购物车 - 预定义选项

> ID：10410820
> 
> 赞同：3
> 
> 时间：2012-05-02T09:14:47.610
> 
> 标签：magento, magento-1.6

我正在尝试使用预选选项将捆绑商品从加售区域添加到购物车 - 因此它会将您直接带到购物车而不是商品页面，并且正在使用以下网址：

`Mage::$this->helper('checkout/cart')->getAddUrl($_link)`

连接，例如：

`?bundle_option[14][]=16&bundle_option[15][]=17&bundle_option[16][]=19&`

然后，此 url 将项目添加到购物车，但带有警告：

> 下面的一些产品没有所有必需的选项。请编辑它们并配置所有必需的选项。

并且不会让我继续结账。它还包含通常的添加到购物车成功消息。

如果我从它自己的页面（使用所有默认选项）添加项目，它工作正常。

我已根据[将捆绑产品添加到购物车进行设置，而无需指定选项](https://stackoverflow.com/questions/5911738/add-bundle-product-to-cart-without-having-to-specify-the-options)，并选择了所需的单选按钮和默认值。

此外，向`options_bundle_qty[...`url 添加选项也无济于事。

> **更新**：我在 1.4 和 1.6 安装上的设置完全相同，它在 1.4 中工作，但不是 1.6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:29:44.740

您可能想尝试使用以下内容创建一个 test.php 文件：

```
$params = array(
    'product' => 164,
    'related_product' => null,
    'bundle_option' => array(
        21 => 58,
        20 => 55,
        11 => 28,
        12 => array(
            0 => 31,
        ),
        13 => array(
            0 => 32,
            1 => 35,
        ),
    ),
    'options' => array(
        3 => 'olaaaaaaaa',
    ),
    'qty' => 2,
);

$cart = Mage::getSingleton('checkout/cart');

$product = new Mage_Catalog_Model_Product();
$product->load(164);

$cart->addProduct($product, $params);
$cart->save();

Mage::getSingleton('checkout/session')->setCartWasUpdated(true);

$message = $this->__('Custom message: %s was successfully added to your shopping cart.', $product->getName());
Mage::getSingleton('checkout/session')->addSuccess($message); 
```

测试和调试添加产品包，因此更容易查明任何问题。显然，您需要编辑产品 ID 和选项以与您需要的数据相关。

*   [http://inhoo.net/ecommerce/magento/programatically-add-bundle-product-to-cart-n-magento/](http://inchoo.net/ecommerce/magento/programatically-add-bundle-product-to-cart-n-magento/)

希望这可以帮助。

# android - 如何以编程方式获取 android 设备屏幕截图？

> ID：10410822
> 
> 赞同：-1
> 
> 时间：2012-05-02T09:14:49.030
> 
> 标签：android

> **可能重复：**
> [屏幕截图 Android](https://stackoverflow.com/questions/2661536/screenshot-android)

我想从应用程序启动的地方获取android设备的屏幕截图，如果您有解决方案，请回复。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:21:33.670

您可以使用代码或 jar 库截取正在运行的应用程序的屏幕截图。但是要获得系统范围的屏幕截图，您需要 root 手机（在 Android 4.0 之前）

[看一下这个](https://stackoverflow.com/questions/2661536/screenshot-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:21:55.543

您可以通过在布局的顶级视图中使用以下命令以编程方式获取整个屏幕的位图：

```
topLevelView.setDrawingCacheEnabled(true);
Bitmap fullScreenBitmap = Bitmap.createBitmap(topLevelView.getDrawingCache());
topLevelView.setDrawingCacheEnabled(false); 
```

然后，您可以使用 fullScreenBitmap 做任何您需要做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:27:10.187

请参阅此代码。它可能对您有所帮助。

```
View v1 = view.getRootView();

                            v1.setDrawingCacheEnabled(true);

                            Bitmap bm = v1.getDrawingCache(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T09:18:17.947

转到 DDMS -> 设备 -> 在右上角查看相机图标，单击该图标，您将获得设备/模拟器屏幕截图。

# vb6 - 如何让应用程序自动发送日志文件到支持？

> ID：10410829
> 
> 赞同：1
> 
> 时间：2012-05-02T09:15:24.153
> 
> 标签：vb6, windows-xp, logging, error-logging

为了管理来自特定客户端的错误，我正在考虑让应用程序将当前的错误日志文件发送给我，也许是在它启动时。

在 VB6/XP 环境中实现这一目标的最佳方法是什么？

电子邮件可能很简单，但我想这可能会触发各种防病毒/防火墙保护。

连接到网络服务器可能会更好。在这种情况下，应用程序是否仍需要打开 Windows 防火墙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:57:24.163

我`XMLHTTP`用来上传这样的客户端错误日志：[http ://wqweto.wordpress.com/2011/07/12/vb6-using-wininet-to-post-binary-file/](http://wqweto.wordpress.com/2011/07/12/vb6-using-wininet-to-post-binary-file/)

```
Private Sub pvPostFile(sUrl As String, sFileName As String, Optional ByVal bAsync As Boolean)
    Const STR_BOUNDARY  As String = "3fbd04f5-b1ed-4060-99b9-fca7ff59c113"
    Dim nFile           As Integer
    Dim baBuffer()      As Byte
    Dim sPostData       As String

    '--- read file
    nFile = FreeFile
    Open sFileName For Binary Access Read As nFile
    If LOF(nFile) > 0 Then
        ReDim baBuffer(0 To LOF(nFile) - 1) As Byte
        Get nFile, , baBuffer
        sPostData = StrConv(baBuffer, vbUnicode)
    End If
    Close nFile
    '--- prepare body
    sPostData = "--" & STR_BOUNDARY & vbCrLf & _
        "Content-Disposition: form-data; name=""uploadfile""; filename=""" & Mid$(sFileName, InStrRev(sFileName, "\") + 1) & """" & vbCrLf & _
        "Content-Type: application/octet-stream" & vbCrLf & vbCrLf & _
        sPostData & vbCrLf & _
        "--" & STR_BOUNDARY & "--"
    '--- post
    With CreateObject("Microsoft.XMLHTTP")
        .Open "POST", sUrl, bAsync
        .SetRequestHeader "Content-Type", "multipart/form-data; boundary=" & STR_BOUNDARY
        .Send pvToByteArray(sPostData)
    End With
End Sub

Private Function pvToByteArray(sText As String) As Byte()
    pvToByteArray = StrConv(sText, vbFromUnicode)
End Function 
```

# c# - 更新控制器中的模型？

> ID：10410831
> 
> 赞同：3
> 
> 时间：2012-05-02T09:15:25.013
> 
> 标签：c#, asp.net-mvc, view, controller

我正在使用 ASP.NET MVC 3。我有一个问题是否可以更新模型，即使它没有被发送到控制器？也许问题已经完成，或者我以错误的方式做事？

我有一个对控制器方法的 ajax 调用。我正在传递一个ID。我希望控制器在数据库中找到一些东西，然后更新模型，将其传递回视图。

我有一个相当大的模型......我找到了一些解决方案，将模型转换为 javascript 对象，并将其发送到控制器。这是唯一/正确的方法吗？

[如何在 jQuery $.ajax() 发布请求中向 MVC 控制器方法发送模型](https://stackoverflow.com/questions/1518417/how-to-send-a-model-in-jquery-ajax-post-request-asp-net-mvc)

我想也许控制器有模型，我可以在其中更新一些字段？

对控制器的调用：

```
 function getBis(id) {
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetBis")',
            data: { "id": id },
            dataType: 'json',
            cache: false,
            success: function (data) {
                // Do something here
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("Problem!");
            }
        });
    } 
```

控制器代码：

```
 public ActionResult GetBis(string id)
    {
        BeslutIStortDTO viewModel = new BeslutIStortDTO();

        int theId;
        if (!Int32.TryParse(id, out theId))
            throw new Exception("Wrong id");

        viewModel = _blLayer.GetBIS(theId);

        // somehow update the model here!

        return View("index", viewModel);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:23:29.960

通常，当您需要在不进行任何映射的情况下“反映”UI 上的任何更改时，您通常会在 JQuery 和控制器之间“传递模型”（MVC 足够聪明，可以根据您提供的参数构造一个新对象）。在你的情况下，你说你只需要传递一个 ID 就可以在你的模型上做一些事情。因此，您需要做的就是将 ID 作为参数传递，在控制器操作中获取它，然后执行您的操作。

看看下面的链接

[使用 jquery ajax 将参数传递给控制器](https://stackoverflow.com/questions/4977858/pass-a-parameter-to-a-controller-using-jquery-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:24:22.957

简短的回答是“是”和“否”，具体取决于您的意思，但是您可能需要重新考虑您的设计。我猜您实际上是在尝试将域实体呈现到您的视图中，而不是视图模型。这是一个常见的新手错误。

我想澄清的一件事是域实体和视图模型之间的区别。

域实体通常是从您的持久层中提取的，这就是您的状态更改应该发生的地方。

视图模型是临时构造，在视图输出为 HTML 之前在服务器上创建，用作视图模板的数据仓库。它在请求后不存在于客户端的 Web 浏览器上，并且在请求后不再存在于服务器上。

如果您使用 Ajax 来执行某种类型的数据更改，而不是重新加载页面，那么您通常会做的是更改 Domain 对象（通过 Id），而不是您最初传入的 View Model（它不会'不存在了）。

例如。

我有一个与数据库记录绑定的域实体。Person {long id=1;string name=bob;bool enabled=true}

我有一个视图模型（我在初始获取控制器函数中映射到 bob）PersonData {long id=1;string name ="bob", enabled=true}

为此，在我的初始页面 GET 控制器函数中，我从数据库中提取域实体 bob，将他的数据复制到视图模型的实例，然后将视图模型传递给 View("EditPerson",pd)操作结果，它通过剃刀视图页面和视图模型，并将值替换为它正在写入响应流的 HTML（在适当的情况下）。

现在，您在客户端的 Web 浏览器上拥有 HTML，这就是 IT。不存在视图模型。现在您有一些 Ajax，它是浏览器端脚本，例如，当我单击“切换状态”链接时，浏览器（不更改页面）将向您提供的 ajax url 提交请求，传入一个鲍勃的 ID。然后，您的控制器函数应加载 Bob 的实体版本，并将 Bob 的启用的实体版本切换为适当的值，然后将该更改保存到数据库。

原始的 VIEW 模型根本没有发挥作用，因为自从初始页面呈现给浏览器以来，它就不存在了。

有没有什么具体的事情你想完成而你看不到这种模式的方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:30:58.140

首先更新模型，你的意思是要更新数据库中的记录吗？这不是在获取请求中做的好习惯。如果不继续阅读..

使用 GetBis 方法获得对象后，您可以更改它的所有属性。

如果您想将此对象发送到 Javascript，请使用 JSON 结果。

`return JSON(viewModel);`

还有一件事，不要在第一行代码中初始化视图模型，不必要的对象分配。

# php - 从 POST 创建变量

> ID：10410833
> 
> 赞同：4
> 
> 时间：2012-05-02T09:15:32.023
> 
> 标签：php, post

我这里有一个旧脚本，它基于它从 POST 数组创建变量的功能。我知道它很旧并且不应该使用，但是我需要哪个参数来激活它？`$_POST['output']`应该自动变成`$output`.

我一直在 php.net 和 google 上搜索，但似乎找不到这个参数的名称。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T09:16:47.927

简单的

```
extract($_POST); 
```

现在

```
echo $output; 
```

编辑：

上述方法现在已被弃用。可以这样实现

```
extract(array_intersect_key($_POST, $array_of_expected_keys)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:46:06.850

在以前的 PHP 版本中有。来自[PHP Post 变量](https://stackoverflow.com/questions/7247572/php-post-variables)

`register_globals`是一种使用名称作为变量而不是作为 post、get 和 request 变量获取提交值的旧方法。但这在较新的版本中已被弃用。您需要您的代码才能接受`$_POST['email']`，而不是`$email`.

# function - 将列表排序为元组

> ID：10410839
> 
> 赞同：0
> 
> 时间：2012-05-02T09:16:01.830
> 
> 标签：function, sorting, haskell

我是 Haskell 的新手，正在尝试使用`sort`函数对元组列表进行排序，使用它们的第一个元素。因此，如果我有，`["a", "b", "a", "c", "c"]`我会得到类似的东西`[(1,"b"), (2,"a"), (2,"c")]`（如果数字相同，则按字母顺序排列）。

我该怎么做呢？此刻我完全迷失了……我仍在尝试进入“Haskell 思维方式”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T09:26:38.513

```
import Data.List (sort, group)
import Control.Arrow ((&&&))

answer :: Eq a => [a] -> [(Int, a)]
answer = sort . map (length &&& head) . group . sort 
```

但是因为你是初学者，可能要告诉你的有点多[`&&&`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Arrow.html#v%3a-38--38--38-)，所以我将它改写成这样：

```
import Data.List (sort, group)

answer :: Eq a => [a] -> [(Int, a)]
answer = sort . map f . group . sort
  where f xs @ (x:_) = (length xs, x) 
```

你会注意到我打`sort`了两次电话。这是故意的。

最后`sort`一个（左边的那个）对元组的输出列表进行排序，碰巧它按元组的第一个元素的升序排序，通过对元组的第二个元素进行排序来打破平局。

最初`sort`的（右边的那个）对输入列表进行排序，因为它的作用是：它将*相邻*的相等元素[`group`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3agroup)分组到一个子列表中。（顺便说一句，这些子列表保证永远不会为空——否则在模式匹配中使用或忽略空列表选项是不安全的。）*`head`*

 *然后`map f`将这些列表（例如`["a", "a"]`）变成我们感兴趣的内容：这些元素出现的次数，以及这些元素的单个代表（例如`(2, "a")`）。

* * *

**这里的习惯用法是我们正在使用管道：**我们的输入进入一个函数，该函数的输出进入另一个函数，依此类推，直到管道末端的函数产生输出，我们将其呈现为我们自己的输出. 请注意，这只有效，因为每个函数只接受一个参数（`map`接受两个参数，`f`是这些参数中的第一个，所以`map f`接受一个参数）。

因此，`answer`is 是一个函数，即使它的参数没有显式出现。这是*无点*风格。

在*非无*点样式中，它看起来像

```
answer xs = sort . map f . group . sort $ xs
  where f xs @ (x:_) = (length xs, x) 
```

或者

```
answer xs = sort $ map f $ group $ sort xs
  where f xs @ (x:_) = (length xs, x) 
```

或者

```
answer xs = sort (map f (group (sort xs)))
  where f xs @ (x:_) = (length xs, x) 
```

当它使您的代码更清晰时，使用无点样式是一个好主意。

如果您愿意，可以使用`<<<`运算符（再次来自 Control.Arrow，抱歉）使数据流方向表面上更加明确：

```
import Data.List (sort, group)
import Control.Arrow ((<<<))

answer :: Eq a => [a] -> [(Int, a)]
answer = sort <<< map f <<< group <<< sort
  where f xs @ (x:_) = (length xs, x) 
```

有些人认为这是错误的方式，并希望首先“发生”的功能位于左侧。这些人可以使用`>>>`（也来自 Control.Arrow），这与它的参数完全一样，`<<<`只是它的参数被翻转了：

```
import Data.List (sort, group)
import Control.Arrow ((>>>))

answer :: Eq a => [a] -> [(Int, a)]
answer = sort >>> group >>> map f >>> sort
  where f xs @ (x:_) = (length xs, x) 
```*

# mysql - SELECT foo AS bar 不工作

> ID：10410841
> 
> 赞同：1
> 
> 时间：2012-05-02T09:16:04.233
> 
> 标签：mysql, mysql-error-1054

我的代码：

```
SELECT pulpi_juegos.*, mapa.cat_id AS IDcategoria 
FROM pulpi_juegos 
INNER JOIN pulpi_categorias_mapa AS mapa ON pulpi_juegos.id=mapa.game_id 
WHERE pulpi_juegos.Estado != 1 
AND IDcategoria = 15 
ORDER BY pulpi_juegos.id DESC 
LIMIT 0,30; 
```

问题是我收到以下错误：

```
Unknown column 'IDcategoria' in 'where clause' 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:21:29.750

使用 mapa.cat_id 而不是 IDCategoria，因为 mysql 稍后执行 SELECT。

```
SELECT pulpi_juegos.*, mapa.cat_id AS IDcategoria 
FROM pulpi_juegos 
INNER JOIN pulpi_categorias_mapa AS mapa ON pulpi_juegos.id=mapa.game_id 
WHERE pulpi_juegos.Estado != 1 
AND mapa.cat_id = 15 
ORDER BY pulpi_juegos.id DESC 
LIMIT 0,30; 
```

喜欢这个订单

```
FROM clause
WHERE clause
GROUP BY clause
HAVING clause
SELECT clause
ORDER BY clause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:22:21.580

您不能在 WHERE 子句中放置别名。

用这个：

```
SELECT pulpi_juegos.*, mapa.cat_id AS IDcategoria 
FROM pulpi_juegos 
INNER JOIN pulpi_categorias_mapa AS mapa ON pulpi_juegos.id=mapa.game_id 
WHERE pulpi_juegos.Estado != 1 
AND mapa.cat_id = 15 
ORDER BY pulpi_juegos.id DESC 
LIMIT 0,30; 
```

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:22:22.687

SQL 总是在`SELECT`你的语句之后执行`WHERE`语句。如果我错了，请纠正我，但 SQL 执行您的语句如下：

```
FROM
INNER JOIN
WHERE
AND
SELECT
ORDER BY 
```

所以你现在可以看到，当 SQL 出现在你的`AND`语句中时，它还不知道它`mapa.cat_id`实际上表示为`IDcategoria`. 一个简单的解决方案是将`IDcategoria`您的to 更改`AND`为`mapa.cat_id`.
因此，您的查询将如下所示：

```
SELECT pulpi_juegos.*, mapa.cat_id AS IDcategoria 
FROM pulpi_juegos 
INNER JOIN pulpi_categorias_mapa AS mapa ON pulpi_juegos.id=mapa.game_id 
WHERE pulpi_juegos.Estado != 1 
AND mapa.cat_id = 15 
ORDER BY pulpi_juegos.id DESC 
LIMIT 0,30; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T09:22:51.567

您不能在 where 子句中使用别名，而应编写列名。如果想在必须使用这样的子查询的地方使用别名

```
SELECT * FROM (SELECT pulpi_juegos.*, mapa.cat_id AS IDcategoria 
FROM pulpi_juegos 
INNER JOIN pulpi_categorias_mapa AS mapa ON pulpi_juegos.id=mapa.game_id 
WHERE pulpi_juegos.Estado != 1  
ORDER BY pulpi_juegos.id DESC 
LIMIT 0,30) WHERE IDcategoria = 15 ; 
```

现在它可以工作了。

# facebook - Facebook Linter 返回 200 错误代码

> ID：10410842
> 
> 赞同：2
> 
> 时间：2012-05-02T09:16:09.830
> 
> 标签：facebook, facebook-opengraph

我正在尝试将此网址分享给 Facebook：http: [//curation.masternewmedia.org/](http://curation.masternewmedia.org/) 或此域的其他网址：http: [//curation.masternewmedia.org/p/1689258249/how-to-check-and -来自社交媒体的实时验证新闻信息](http://curation.masternewmedia.org/p/1689258249/how-to-check-and-verify-news-info-in-real-time-from-social-media)。

Facebook linter 生成 200 状态代码并且*无法从 URL 检索数据*：http : [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fcuration.masternewmedia.org%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fcuration.masternewmedia.org%2F)

当我卷曲相同的网址时，一切似乎都很好

```
$>> curl -I http://curation.masternewmedia.org/    

HTTP/1.1 200 OK
Date: Wed, 02 May 2012 08:53:29 GMT
Server: Jetty(7.5.4.v20111024)
Content-Type: text/html;charset=UTF-8
Content-Language: en
Pragma: no-cache
Cache-Control: no-cache
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Set-Cookie: userId=e26ee613-8792-4f03-9066-52b6aa09a901;Path=/;Expires=Sat, 30-Apr-2022 08:53:31 GMT
Via: 1.1 www.scoop.it
Vary: Accept-Encoding 
```

你能帮我理解如何解决这个问题吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:02:16.113

问题似乎是 Facebook 抓取工具在您网站的源代码中*根本看不到任何内容。*[此链接](https://developers.facebook.com/tools/debug/og/echo?q=http://curation.masternewmedia.org/)将让您了解刮板在访问您的网站时看到的内容

我不是专家，但我感觉您在“类型”部分指定的对象有问题，即主题

```
<meta property="og:type" content="topic"/> 
```

删除它使它对我有用。如果您定义了自定义操作类型并正在使用它，但尚未获得批准，则可能是由它引起的。无论如何，它似乎正在沸腾到那部分。

您可以看到它与 url footballrumors.mobi/test/test.html 一起使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:40:33.497

这是 linter 现在显示的内容：

> **必须修复的错误**URL 不允许
> 对象**类型**：URL 'http://curation.masternewmedia.org/' 类型'scoop_it:topic' 的对象无效，因为不允许域'curation.masternewmedia.org'拥有指定对象类型的应用程序 ID '165307520164712'。如果您是此应用程序的所有者，您可以在[https://developers.facebook.com/apps/165307520164712](https://developers.facebook.com/apps/165307520164712)验证您配置的“站点域” 。

另一个网址[http://curation.masternewmedia.org/p/1686490068/four-great-curators-to-draw-inspiration-from](http://curation.masternewmedia.org/p/1686490068/four-great-curators-to-draw-inspiration-from)表明`og:type`is `scoop_it:article`，并且工作正常，所以我想你应该改为`scoop_it:article`.

如果您使用的是 scoop.it 的服务，请让他们知道这个问题。

# .net - .NET 的 Dojo/ExtJS 层

> ID：10410847
> 
> 赞同：0
> 
> 时间：2012-05-02T09:16:23.487
> 
> 标签：.net, extjs, dojo, layer

为 Dojo/ExtJs（或任何其他类似的 javascript UI 框架）生成 javascript 代码的 .NET 层有哪些优点和缺点——比如用于 .NET 的 RichFaces？例如其中一个优点是理论上你只需要了解 .NET (C#)，但缺点是你需要维护更多的代码，因为你仍然需要了解 JS 和 Dojo/ExtJS，同时你需要维护 .NET 层。你怎么看待这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:23:05.640

Ext.NET 为 ExtJS 提供了这个包装器。

[http://www.ext.net/](http://www.ext.net/)

正如您所说，您理论上只需要了解 C#，并且您可以在服务器端进行更改以创建控件、绑定数据等。使用 aspx 标记创建学习 ExtJS 和创建的布局也是一个快速的学习曲线JS 中的页面，供来自 webforms 背景的人使用。

缺点是您仍然需要相当好的 JS 知识来执行客户端操作，因为许多事情不需要往返，也不需要 SS 代码。

在服务器端隐藏/显示控件之类的东西很好，但有时服务器端方法需要客户端的帮助（例如存储操作），所以没有真正的方法可以完全消除学习方法的需要与小部件客户端进行交互。

# syslog - Flume syslogTcp 不输出到控制台

> ID：10410849
> 
> 赞同：2
> 
> 时间：2012-05-02T09:16:44.790
> 
> 标签：syslog, flume

我是水槽的新手，正在阅读水槽用户指南。[我在尝试运行此页面](http://archive.cloudera.com/cdh/3/flume/UserGuide/#_syslog_as_a_source_literal_syslogudp_literal_and_literal_syslogtcp_literal)上显示的简单 syslogTcp 演示时遇到了问题。

在我运行的一个终端上`flume dump 'syslogTcp(5140)'`

在我运行的第二个终端上：`$ echo "hello via syslog" | nc -t localhost 5140`

但是我没有得到控制台的输出（就像我在测试tail或file等其他来源时得到的那样）

水槽看起来运行正常，我可以通过端口 5140 上的 telnet 连接到它，当我运行 lsof 时，我看到了它：

```
$output for lsof -i :5140<br />
COMMAND  PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME<br />
java    5195 ubuntu   80u  IPv6 412244      0t0  TCP *:5140 (LISTEN)<br />

$ java -version<br/>
java version "1.7.0_147-icedtea"<br />
OpenJDK Runtime Environment (IcedTea7 2.0) (7~b147-2.0-0ubuntu0.11.10.1)<br />
OpenJDK 64-Bit Server VM (build 21.0-b17, mixed mode)<br />

running on Ubuntu 10.11 oneiric 
```

知道如何调试吗？

亚里夫·阿扎奇

PS这是启动flume syslogTcp时的输出：

```
$ flume dump 'syslogTcp(5140)'

2012-05-02 08:25:43,826 [main] INFO agent.FlumeNode: Flume 0.9.4-cdh3u3
2012-05-02 08:25:43,827 [main] INFO agent.FlumeNode:  rev unknown
2012-05-02 08:25:43,827 [main] INFO agent.FlumeNode: Compiled  on 20120126-1114
2012-05-02 08:25:43,828 [main] INFO agent.FlumeNode: System property flume.log.file=flume.log
2012-05-02 08:25:43,828 [main] INFO agent.FlumeNode: System property java.runtime.name=OpenJDK Runtime Environment
2012-05-02 08:25:43,828 [main] INFO agent.FlumeNode: System property sun.boot.library.path=/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64
2012-05-02 08:25:43,828 [main] INFO agent.FlumeNode: System property java.vm.version=21.0b17
2012-05-02 08:25:43,828 [main] INFO agent.FlumeNode: System property zookeeper.root.logger=ERROR,console
2012-05-02 08:25:43,828 [main] INFO agent.FlumeNode: System property java.vm.vendor=Oracle Corporation
2012-05-02 08:25:43,829 [main] INFO agent.FlumeNode: System property java.vendor.url=http://java.oracle.com/
2012-05-02 08:25:43,829 [main] INFO agent.FlumeNode: System property path.separator=:
2012-05-02 08:25:43,829 [main] INFO agent.FlumeNode: System property java.vm.name=OpenJDK 64-Bit Server VM
2012-05-02 08:25:43,829 [main] INFO agent.FlumeNode: System property file.encoding.pkg=sun.io
2012-05-02 08:25:43,829 [main] INFO agent.FlumeNode: System property user.country=US
2012-05-02 08:25:43,829 [main] INFO agent.FlumeNode: System property sun.java.launcher=SUN_STANDARD
2012-05-02 08:25:43,829 [main] INFO agent.FlumeNode: System property sun.os.patch.level=unknown
2012-05-02 08:25:43,830 [main] INFO agent.FlumeNode: System property java.vm.specification.name=Java Virtual Machine Specification
2012-05-02 08:25:43,830 [main] INFO agent.FlumeNode: System property user.dir=/home/ubuntu
2012-05-02 08:25:43,830 [main] INFO agent.FlumeNode: System property java.runtime.version=1.7.0_147-icedtea-b147
2012-05-02 08:25:43,830 [main] INFO agent.FlumeNode: System property java.awt.graphicsenv=sun.awt.X11GraphicsEnvironment
2012-05-02 08:25:43,830 [main] INFO agent.FlumeNode: System property flume.log.dir=/usr/lib/flume/logs
2012-05-02 08:25:43,830 [main] INFO agent.FlumeNode: System property java.endorsed.dirs=/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/endorsed
2012-05-02 08:25:43,830 [main] INFO agent.FlumeNode: System property os.arch=amd64
2012-05-02 08:25:43,830 [main] INFO agent.FlumeNode: System property java.io.tmpdir=/tmp
2012-05-02 08:25:43,830 [main] INFO agent.FlumeNode: System property line.separator=

2012-05-02 08:25:43,831 [main] INFO agent.FlumeNode: System property java.vm.specification.vendor=Oracle Corporation
2012-05-02 08:25:43,831 [main] INFO agent.FlumeNode: System property os.name=Linux
2012-05-02 08:25:43,831 [main] INFO agent.FlumeNode: System property sun.jnu.encoding=UTF-8
2012-05-02 08:25:43,831 [main] INFO agent.FlumeNode: System property java.library.path=/usr/lib/flume/lib::/usr/lib/hadoop/lib/native/Linux-amd64-64
2012-05-02 08:25:43,831 [main] INFO agent.FlumeNode: System property java.specification.name=Java Platform API Specification
2012-05-02 08:25:43,831 [main] INFO agent.FlumeNode: System property java.class.version=51.0
2012-05-02 08:25:43,831 [main] INFO agent.FlumeNode: System property sun.management.compiler=HotSpot 64-Bit Tiered Compilers
2012-05-02 08:25:43,831 [main] INFO agent.FlumeNode: System property watchdog.root.logger=INFO,console
2012-05-02 08:25:43,832 [main] INFO agent.FlumeNode: System property os.version=3.0.0-16-virtual
2012-05-02 08:25:43,832 [main] INFO agent.FlumeNode: System property user.home=/home/ubuntu
2012-05-02 08:25:43,832 [main] INFO agent.FlumeNode: System property user.timezone=Etc/UTC
2012-05-02 08:25:43,832 [main] INFO agent.FlumeNode: System property java.awt.printerjob=sun.print.PSPrinterJob
2012-05-02 08:25:43,832 [main] INFO agent.FlumeNode: System property file.encoding=UTF-8
2012-05-02 08:25:43,832 [main] INFO agent.FlumeNode: System property java.specification.version=1.7
2012-05-02 08:25:43,832 [main] INFO agent.FlumeNode: System property java.class.path=/etc/flume/conf:/usr/lib/hadoop/conf:/usr/lib/hadoop/hadoop-core-0.20.2-cdh3u3.jar
/usr/lib/hadoop/hadoop-core.jar:/usr/lib/flume/lib/activation-1.1.jar:/usr/lib/flume/lib/ahocorasick-2.x.jar:/usr/lib/flume/lib/ant-1.6.5.jar:/usr/lib/flume/lib/antlr-3.2.jar:/usr/lib/flume/lib/antlr-runtime-3.2.jar:/usr/lib/flume/lib/asm-3.1.jar:/usr/lib/flume/lib/automaton-1.0.0.jar:/usr/lib/flume/lib/avro-1.5.4.jar:/usr/lib/flume/lib/avro-compiler-1.5.4.jar:/usr/lib/flume/lib/avro-ipc-1.5.4.jar:/usr/lib/flume/lib/commons-cli-1.2.jar:/usr/lib/flume/lib/commons-codec-1.3.jar:/usr/lib/flume/lib/commons-codec-1.4.jar:/usr/lib/flume/lib/commons-collections-3.1.jar:/usr/lib/flume/lib/commons-el-1.0.jar:/usr/lib/flume/lib/commons-httpclient-3.0.1.jar:/usr/lib/flume/lib/commons-httpclient-3.1.jar:/usr/lib/flume/lib/commons-lang-2.5.jar:/usr/lib/flume/lib/commons-logging-1.0.4.jar:/usr/lib/flume/lib/commons-net-1.4.1.jar:/usr/lib/flume/lib/core-3.1.1.jar:/usr/lib/flume/lib/emr-hadoop-core-0.20.jar:/usr/lib/flume/lib/flume-core-0.9.4-cdh3u3.jar:/usr/lib/flume/lib/guava-r07.jar:/usr/lib/flume/lib/guava-r09-jarjar.jar:/usr/lib/flume/lib/hadoop-core.jar:/usr/lib/flume/lib/hsqldb-1.8.0.7.jar:/usr/lib/flume/lib/irclib-1.0.0.jar:/usr/lib/flume/lib/jackson-core-asl-1.5.2.jar:/usr/lib/flume/lib/jackson-jaxrs-1.5.5.jar:/usr/lib/flume/lib/jackson-mapper-asl-1.5.2.jar:/usr/lib/flume/lib/jackson-xc-1.5.5.jar:/usr/lib/flume/lib/jasper-compiler-5.5.23.jar:/usr/lib/flume/lib/jasper-runtime-5.5.23.jar:/usr/lib/flume/lib/jaxb-api-2.1.jar:/usr/lib/flume/lib/jaxb-impl-2.1.12.jar:/usr/lib/flume/lib/jersey-core-1.4.jar:/usr/lib/flume/lib/jersey-json-1.4.jar:/usr/lib/flume/lib/jersey-server-1.4.jar:/usr/lib/flume/lib/jets3t-0.6.1.jar:/usr/lib/flume/lib/jettison-1.2.jar:/usr/lib/flume/lib/jetty-6.1.26.jar:/usr/lib/flume/lib/jetty-util-6.1.26.jar:/usr/lib/flume/lib/jline-0.9.94.jar:/usr/lib/flume/lib/jms-1.1.jar:/usr/lib/flume/lib/jsp-api-2.0.jar:/usr/lib/flume/lib/jsp-api-2.1.jar:/usr/lib/flume/lib/libthrift-0.6.0-cdh.jar:/usr/lib/flume/lib/log4j-1.2.15.jar:/usr/lib/flume/lib/mail-1.4.jar:/usr/lib/flume/lib/netty-3.2.4.Final.jar:/usr/lib/flume/lib/oro-2.0.8.jar:/usr/lib/flume/lib/paranamer-2.3.jar:/usr/lib/flume/lib/servlet-api-2.5-20081211.jar:/usr/lib/flume/lib/servlet-api-2.5.jar:/usr/lib/flume/lib/slf4j-api-1.5.11.jar:/usr/lib/flume/lib/slf4j-log4j12-1.5.11.jar:/usr/lib/flume/lib/snappy-java-1.0.3.2.jar:/usr/lib/flume/lib/stax-api-1.0.1.jar:/usr/lib/flume/lib/stax-api-1.0-2.jar:/usr/lib/flume/lib/stringtemplate-3.2.jar:/usr/lib/flume/lib/velocity-1.5.jar:/usr/lib/flume/lib/xmlenc-0.52.jar:/lib/tools.jar:/usr/lib/zookeeper/zookeeper-3.3.4-cdh3u3.jar:/usr/lib/zookeeper/zookeeper.jar:/usr/lib/flume/build/classes
2012-05-02 08:25:43,833 [main] INFO agent.FlumeNode: System property user.name=ubuntu
2012-05-02 08:25:43,833 [main] INFO agent.FlumeNode: System property flume.root.logger=INFO,console
2012-05-02 08:25:43,833 [main] INFO agent.FlumeNode: System property java.vm.specification.version=1.7
2012-05-02 08:25:43,833 [main] INFO agent.FlumeNode: System property sun.java.command=com.cloudera.flume.agent.FlumeNode -1 -s -n dump -c dump: syslogTcp(5140) | console; 
2012-05-02 08:25:43,833 [main] INFO agent.FlumeNode: System property java.home=/usr/lib/jvm/java-7-openjdk-amd64/jre
2012-05-02 08:25:43,833 [main] INFO agent.FlumeNode: System property sun.arch.data.model=64
2012-05-02 08:25:43,834 [main] INFO agent.FlumeNode: System property user.language=en
2012-05-02 08:25:43,834 [main] INFO agent.FlumeNode: System property java.specification.vendor=Oracle Corporation
2012-05-02 08:25:43,834 [main] INFO agent.FlumeNode: System property awt.toolkit=sun.awt.X11.XToolkit
2012-05-02 08:25:43,834 [main] INFO agent.FlumeNode: System property java.vm.info=mixed mode
2012-05-02 08:25:43,834 [main] INFO agent.FlumeNode: System property java.version=1.7.0_147-icedtea
2012-05-02 08:25:43,834 [main] INFO agent.FlumeNode: System property java.ext.dirs=/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/ext:/usr/java/packages/lib/ext
2012-05-02 08:25:43,834 [main] INFO agent.FlumeNode: System property sun.boot.class.path=/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/resources.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/rt.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jsse.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jce.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/charsets.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/netx.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/plugin.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/rhino.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/classes
2012-05-02 08:25:43,834 [main] INFO agent.FlumeNode: System property java.vendor=Oracle Corporation
2012-05-02 08:25:43,835 [main] INFO agent.FlumeNode: System property file.separator=/
2012-05-02 08:25:43,835 [main] INFO agent.FlumeNode: System property java.vendor.url.bug=http://bugreport.sun.com/bugreport/
2012-05-02 08:25:43,835 [main] INFO agent.FlumeNode: System property sun.io.unicode.encoding=UnicodeLittle
2012-05-02 08:25:43,835 [main] INFO agent.FlumeNode: System property sun.cpu.endian=little
2012-05-02 08:25:43,835 [main] INFO agent.FlumeNode: System property sun.cpu.isalist=
2012-05-02 08:25:43,850 [main] INFO agent.FlumeNode: Starting flume agent on: ip-10-118-98-95.ec2.internal
2012-05-02 08:25:43,856 [main] INFO agent.FlumeNode:  Working directory is: /home/ubuntu/.
2012-05-02 08:25:43,910 [main] INFO conf.FlumeConfiguration: Loading configurations from /etc/flume/conf
2012-05-02 08:25:44,574 [main] WARN text.FormatFactory: Unable to load output format plugin class  - Class not found
2012-05-02 08:25:44,596 [main] INFO agent.FlumeNode: Loading spec from command line: 'dump: syslogTcp(5140) | console; '
2012-05-02 08:25:44,931 [main] INFO agent.LogicalNodeManager: creating new logical node dump
2012-05-02 08:25:44,941 [main] INFO agent.LogicalNodeManager: Loading node name with FlumeConfigData: {srcVer:'Thu Jan 01 00:00:00 UTC 1970' snkVer:'Thu Jan 01 00:00:00 UTC 1970'  ts='Thu Jan 01 00:00:00 UTC 1970' flowId:'null' source:'syslogTcp( 5140 )' sink:'console' }
2012-05-02 08:25:44,956 [main] INFO agent.LogicalNode: Node config successfully set to FlumeConfigData: {srcVer:'Thu Jan 01 00:00:00 UTC 1970' snkVer:'Thu Jan 01 00:00:00 UTC 1970'  ts='Thu Jan 01 00:00:00 UTC 1970' flowId:'null' source:'syslogTcp( 5140 )' sink:'console' }
2012-05-02 08:25:44,960 [logicalNode dump-9] INFO syslog.SyslogTcpSourceThreads: Opening com.cloudera.flume.handlers.syslog.SyslogTcpSourceThreads@50c91c07
2012-05-02 08:25:44,970 [main] WARN agent.FlumeNode: Flume is using Hadoop core 0.20 which does not support Security / Authentication: org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled()
2012-05-02 08:25:44,970 [logicalNode dump-9] INFO debug.ConsoleEventSink: ConsoleEventSink( debug ) opened 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:58:43.643

```
echo "<1>hello via syslog" | nc -t localhost 5140 
```

由于您没有发送 syslog 优先级，flume 不会打印该消息。这就是 syslog-ng 将使用的格式。

# git - TortoiseGit... 切换到本地或远程分支

> ID：10410850
> 
> 赞同：2
> 
> 时间：2012-05-02T09:16:45.577
> 
> 标签：git, tortoisegit

TortoiseGit 列出了我的本地分支，如“add-spaceships”和“remote/origin/add-spaceships” `switch`。如果我已经提交+推送了我的本地分支，我选择有什么不同吗？任何一般规则是正确的？

*（我是 Git 的菜鸟，首选简单的答案！）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:21:32.627

`remote/origin/add-spaceships`是一个远程分支，是远程存储库分支状态的指示（和引用）。如果您只是将本地分支推送到此远程，它应该与本地`add-spaceships`分支的提示相同。

您的开发必须在本地分支上进行，因此只需切换到`add-spaceships`.

# jquery - 使拖放文件上传 div，像输入 t ype="file" 一样工作

> ID：10410851
> 
> 赞同：10
> 
> 时间：2012-05-02T09:16:46.073
> 
> 标签：jquery, ajax, html, drag-and-drop

我正在尝试通过拖放实现原生 HTML5 多个文件上传。我一直在关注 [http://onehub.com/blog/posts/designing-an-html5-drag-drop-file-uploader-using-sinatra-and-jquery-part-1/](http://onehub.com/blog/posts/designing-an-html5-drag-drop-file-uploader-using-sinatra-and-jquery-part-1/) 和 [http:// www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/) 但我仍然没有找到我需要的解决方案。

基本上，我想模拟 HTML5 多文件上传输入元素的功能，但是在女巫上使用 div 来监听放置事件。

换句话说，我想制作一个像这样的表格：

```
<form method="post" action="somesscript.php" enctype="multipart/form-data">
     <input  type="text" />
     <div class="drop">
         <p>Drop files here</p>
     </div>
     <input  type="submit" />
</form> 
```

像这样工作：

```
<form method="post" action="somesscript.php" enctype="multipart/form-data">
   <input  type="text" />
   <input name="filesToUpload[]" type="file" multiple />
   <input  type="submit" />
</form> 
```

拖放字段应被视为表单的一部分，当提交表单时，我只想将输入中的所有数据以及拖放字段中的文件数组通过 AJAX 发送到服务器。

到目前为止，我只实现了在 drop 事件上读取文件名。我希望将所有删除的文件添加到一个数组中，但我不知道如何访问文件本身，而不是它们的属性，以便后者我可以通过 AJAX 将这个文件数组与其余的一起发送到表单提交中表格数据。

我想要类似的东西：

```
var data = e.originalEvent.dataTransfer,
               files = data.files,
               filesArray = [],
               filesLength = files.length,
               i;

        for ( i = 0; i < filesLength; i++ ) {
            var file = files[i];
            filesArray.push(file); 
        }

 return filesArray; 
```

另外，我知道有这方面的插件，但我想在本地做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-16T21:07:30.607

我知道你几年前就已经有了答案 :) 但这里有一个 2017 年的解决方案，主要是为像我这样正在寻找一个好看的解决方案的人准备的：你可以通过文件输入来做到这一点，它适用于现代浏览器，对于 IE，你会必须使用后备。

如果您还想要文件的名称，以及仅使用更精美的 UI，您可以使用我的示例；

此代码可以应用于任何形式，并使其完全做到这一点。

[https://jsfiddle.net/artipixel/zkrfcbLd/](https://jsfiddle.net/artipixel/zkrfcbLd/)

```
var globalFunctions = {};

globalFunctions.ddInput = function(elem) {
  if ($(elem).length == 0 || typeof FileReader === "undefined") return;
  var $fileupload = $('input[type="file"]');
  var noitems = '<li class="no-items"><span class="blue-text underline">Browse</span> or drop here</li>';
  var hasitems = '<div class="browse hasitems">Other files to upload? <span class="blue-text underline">Browse</span> or drop here</div>';
  var file_list = '<ul class="file-list"></ul>';
  var rmv = '<div class="remove"><i class="icon-close icons">x</i></div>'

  $fileupload.each(function() {
    var self = this;
    var $dropfield = $('<div class="drop-field"><div class="drop-area"></div></div>');
    $(self).after($dropfield).appendTo($dropfield.find('.drop-area'));
    var $file_list = $(file_list).appendTo($dropfield);
    $dropfield.append(hasitems);
    $dropfield.append(rmv);
    $(noitems).appendTo($file_list);
    var isDropped = false;
    $(self).on("change", function(evt) {
      if ($(self).val() == "") {
        $file_list.find('li').remove();
        $file_list.append(noitems);
      } else {
        if (!isDropped) {
          $dropfield.removeClass('hover');
          $dropfield.addClass('loaded');
          var files = $(self).prop("files");
          traverseFiles(files);
        }
      }
    });

    $dropfield.on("dragleave", function(evt) {
      $dropfield.removeClass('hover');
      evt.stopPropagation();
    });

    $dropfield.on('click', function(evt) {
      $(self).val('');
      $file_list.find('li').remove();
      $file_list.append(noitems);
      $dropfield.removeClass('hover').removeClass('loaded');
    });

    $dropfield.on("dragenter", function(evt) {
      $dropfield.addClass('hover');
      evt.stopPropagation();
    });

    $dropfield.on("drop", function(evt) {
      isDropped = true;
      $dropfield.removeClass('hover');
      $dropfield.addClass('loaded');
      var files = evt.originalEvent.dataTransfer.files;
      traverseFiles(files);
      isDropped = false;
    });

    function appendFile(file) {
      console.log(file);
      $file_list.append('<li>' + file.name + '</li>');
    }

    function traverseFiles(files) {
      if ($dropfield.hasClass('loaded')) {
        $file_list.find('li').remove();
      }
      if (typeof files !== "undefined") {
        for (var i = 0, l = files.length; i < l; i++) {
          appendFile(files[i]);
        }
      } else {
        alert("No support for the File API in this web browser");
      }
    }

  });
};

$(document).ready(function() {
  globalFunctions.ddInput('input[type="file"]');
});
```

```
.blue-text {
  color: blue;
}

.underline {
  text-decoration: underline;
}

.drop-field {
  position: relative;
  text-align: center;
  vertical-align: middle;
}

.drop-field,
.drop-area {
  height: 150px;
  width: 300px;
}

.drop-field .browse {
  z-index: 0;
  position: absolute;
  left: 0;
  bottom: 0;
  right: 0;
  margin: 0 auto;
}

.drop-field .drop-area {
  display: block;
  border: 1px dashed gray;
  position: relative;
}

.drop-field,
.drop-area,
.drop-field .browse {
  transition: all 0.3s;
}

.drop-field.loaded .drop-area {
  border: 1px solid blue;
}

.drop-field .browse {
  opacity: 0;
  transform: translateY(100%);
}

.drop-field.loaded .browse {
  opacity: 1;
  transform: translateY(0);
}

.drop-field.hover .drop-area {
  border: 1px solid black;
}

.drop-field .drop-area input[type="file"] {
  height: 100%;
  width: 100%;
  position: absolute;
  display: block;
  z-index: 3;
  top: 0;
  left: 0;
  opacity: 0.000001;
}

.drop-field .file-list {
  position: absolute;
  z-index: 0;
  top: 0;
  left: 0;
  text-align: center;
}

.drop-field .remove {
  position: absolute;
  left: 20px;
  top: 20px;
  z-index: 4;
  transition: all 0.3s;
  opacity: 0;
  transform: translateY(-100%);
  cursor: pointer;
}

.drop-field .remove:hover {
  color: blue;
}

.drop-field.loaded .remove {
  opacity: 1;
  transform: translateY(0);
}

.drop-field ul li {
  padding: 0;
  text-align: center;
  list-style: none;
}

}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="file" multiple>
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-07T11:25:10.077

```
 <input name="filesInput" type="file" multiple  onchange="fileUpload(event)"/>
  <div class="drop" ondrop="fileUpload(event)" >
      <p>Drop files here</p>
  </div> 
```

```
 function fileUpload(e){
       var files=e.target.files||e.dataTransfer.files;
       for(var i=0;i<files.length;i++)
        {
        //upload files
        }
    } 
```

这将起作用。

# java - 从 android 应用程序调用 wowza 服务器？

> ID：10410854
> 
> 赞同：2
> 
> 时间：2012-05-02T09:16:53.317
> 
> 标签：java, android, video-streaming, wowza

我正在尝试制作一些可以播放来自 wowza 的流的应用程序。
那部分没问题。但接下来我需要在应用程序中有一些选项，它将与 wowza 服务器通信。例如，如何调用 wowza 服务器的某些方法，如何调用 onConnect 方法......如何从应用程序中的 wowza 连接并保持连接，直到我调用 onDisconnect 方法？
如果有人有一些信息，我将非常感激......在此先感谢......

```
VideoView.setVideoPath("some path") 
```

玩的诀窍...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:38:06.800

您使用 HTTPProvider (http://www.wowza.com/forums/content.php?30-httpproviders) 在 Wowza 模块中调用方法。这会在您的 Wowza 模块中为您提供一个 URL，您的应用程序将能够通过 HTTP 调用该 URL。

因此，例如，您的 Wowza 模块在默认情况下运行：

```
http://localhost:1935. 
```

您可以将 HTTPProvider 添加到您的 VHost.xml，例如：

```
<HTTPProvider>
    <BaseClass>com.mycompany.wms.module.SomeModule</BaseClass>
    <RequestFilters>logout*</RequestFilters>
    <AuthenticationMethod>none</AuthenticationMethod>
</HTTPProvider> 
```

这将让您调用一个 url，例如：

```
http://localhost:1935/logout?id=123456789 
```

在您的模块的 Java 代码中，您需要实现 HTTProvider2Base，从中创建 onHTTPRequest 方法。查询字符串中的变量（在本例中为：?id=123456789）可以在方法中使用。您还可以从此处调用模块中的方法。

将使用此调用的示例 Java 类如下：

```
package com.mycompany.wms.module;

import com.wowza.wms.http.HTTProvider2Base;
import com.wowza.wms.http.IHTTPRequest;
import com.wowza.wms.http.IHTTPResponse;
import com.wowza.wms.logging.WMSLogger;
import com.wowza.wms.logging.WMSLoggerFactory;
import com.wowza.wms.vhost.IVHost;

public class SomeModule extends HTTProvider2Base {

public void onHTTPRequest(IVHost vhost, IHTTPRequest req, IHTTPResponse resp) {
    //Get the user
    String userId = req.getParameter("id");
    getLogger().info("Logging out user: " + userId );       

    logoutUser(userId);
}

private void logoutUser(String userId){
    //Do stuff here...
}

private WMSLogger getLogger(){
    return WMSLoggerFactory.getLogger(SomeModule.class);
}
} 
```

一些陷阱：

*   onHTTPRequest 中的范围似乎在您的实例之外，因此请小心访问模块实例中的属性。
*   我必须注释掉带有 HTTPServerVersion 的 HTTPProvider 节点才能让我的节点正常工作。它似乎覆盖了我的 Wowza 版本中的所有其他 HTTPProvider。
*   我也遇到了从 IDE 运行的 Wowza 没有通过 Visual Studio 接听对 url 的调用的问题。一旦我将更改放入服务版本，调用就可以正常工作。

我构建的应用程序主要基于本文中的对话：[http ://www.wowza.com/forums/content.php?182-HTTPProvider-that-returns-detail-server-info](http://www.wowza.com/forums/content.php?182-HTTPProvider-that-returns-detail-server-info)

# php - Base64 字符串转图像

> ID：10410855
> 
> 赞同：1
> 
> 时间：2012-05-02T09:16:55.447
> 
> 标签：php, rest, base64

我有一个rest-webservice，我想将图像上传为base64字符串并使用php在我的网络服务器上对其进行解码。

**我的代码**：

```
if (isset($para['picture']) or isset($para['filetype']) )
        {
            if (isset($para['picture']) and isset($para['filetype']))
            {
                if (!($para['filetype'] == 'jpg' || $para['filetype'] == 'png'))
                {
                    $arr['Code'] = 617;
                    $arr['Message'] = $msg->getMessage(617);
                    $response->body = json_encode($arr);
                    return $response;
                }
                echo $para['picture'];
                $bin = base64_decode(str_replace(' ', '+', $para['picture']));

                if (strlen($bin) >(524288*2))
                {
                    $arr['Code'] = 624;
                    $arr['Message'] = $msg->getMessage(624);
                    $response->body = json_encode($arr);
                    return $response;
                }

                $uid = $dbmodel->getUid($sid);

                if($uid<1)
                {
                    $arr['Code'] = 699;
                    $arr['Message'] = $msg->getMessage(699);
                    $response->body = json_encode($arr);
                    return $response;

                }

                $file = fopen($_SERVER['DOCUMENT_ROOT']."/img/".$uid.".".$para['filetype'], 'w');
                fwrite($file, $bin);
                fclose($file);
                $dbmodel->insertPicture($uid,URL_ROOT."/img/".$uid.".".$para['filetype']);
            }
            else
            {
                $arr['Code'] = 616;
                $arr['Message'] = $msg->getMessage(616);
                $response->body = json_encode($arr);
                return $response;
            } 
```

**数据库模型**：

```
function insertPicture($uid,$link)
    {   
        $result = mysql_query("select link from USER_PICTURE where USER_ID=$uid");

        if (mysql_num_rows($result)==1)
        {
            $row = mysql_fetch_array($result);
            $row['link'];
            $split = explode("/img/",  $row['link']);
            unlink($_SERVER['DOCUMENT_ROOT']."/img/".$split[1]);
        }

        $result = mysql_query("INSERT INTO USER_PICTURE (user_id,link) VALUES ($uid, '$link')ON DUPLICATE KEY UPDATE link='$link'");

        if ($result)
        {
            return true;
        }

        return false;
    } 
```

我用以下方式**调用**我的网络服务：

```
sid=3rcsg42ekbiats33uf2jto6u16&picture=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&filetype=jpg 
```

我使用带有 mimetype 插件的 notepadd++ 将图像转换为 base64

**更新：**

PHP中的图片参数：

```
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 
```

**问题**：

数据库链接将设置正确，但图像不会出现在 webroot 中。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:27:10.293

base64 字符串的末尾有一个“%3D”。但是base64 字母表中没有“%”。

如果这使它成为您的图像文件，它们可能是无效的。

问候

斯特凡

# cocoa - NSAffineTransform 内存不足

> ID：10410857
> 
> 赞同：1
> 
> 时间：2012-05-02T09:17:26.953
> 
> 标签：cocoa, memory, nsaffinetransform

我正在使用 NSAffineTransform 来旋转/反映 NSImage，当使用更大的图像时，我遇到了错误：

```
NSImage: Insufficient memory to allocate pixel data buffer of 4496342739800064 bytes 
```

我在这里转换的图像是 6,998,487 字节，大小为 4110px x 2735。NSAffineTransform 真的需要这么多内存来进行这种转换，还是我在某个地方出错了？这是我的旋转代码：

```
-(NSImage *)rotateLeft:(NSImage *)img{
    NSImage *existingImage = img;
    NSSize existingSize;

    existingSize.width = existingImage.size.width;
    existingSize.height = existingImage.size.height;

    NSSize newSize = NSMakeSize(existingSize.height, existingSize.width);
    NSImage *rotatedImage = [[NSImage alloc] initWithSize:newSize];

    [rotatedImage lockFocus];

    NSAffineTransform *rotateTF = [NSAffineTransform transform];
    NSPoint centerPoint = NSMakePoint(newSize.width / 2, newSize.height / 2);

    [rotateTF translateXBy: centerPoint.x yBy: centerPoint.y];
    [rotateTF rotateByDegrees: 90];
    [rotateTF translateXBy: -centerPoint.y yBy: -centerPoint.x];
    [rotateTF concat];

    NSRect r1 = NSMakeRect(0, 0, newSize.height, newSize.width);
    [existingImage drawAtPoint:NSMakePoint(0,0)
        fromRect:r1
       operation:NSCompositeCopy fraction:1.0];

    [rotatedImage unlockFocus];

    return rotatedImage;
} 
```

我在我的项目中使用 ARC。在此先感谢，本

# windows-phone-7 - 使用起点和终点绘制矩形 C#

> ID：10410861
> 
> 赞同：0
> 
> 时间：2012-05-02T09:17:31.220
> 
> 标签：windows-phone-7, canvas

在 WP7 中，矩形的绘制发生在顶部，即原点部分。

我可以做一些事情，例如，创建一个起点和终点，然后在其中绘制自定义矩形吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:23:22.750

您可以使用画布并使用以下方法将矩形定位在画布内：-

```
<Canvas>
<Rectangle Width="100"
            Height="100"
            Fill="Aqua"
            Canvas.Left="100"
            Canvas.Top="100" />
</Canvas> 
```

# java - Unicode 字符串匹配

> ID：10410862
> 
> 赞同：3
> 
> 时间：2012-05-02T09:17:37.383
> 
> 标签：java, string, unicode, string-matching

我想用Java中的Unicode编码匹配两个字符串。我想匹配类似的东西：

```
"asdfeo"
"ásdfeó" 
```

如何在`compareTo()`方法中返回 0？

* * *

**编辑：**

当我在没有变音符号的自动完成视图中键入字符串时（由于某种原因，我没有键盘来编写这些变音符号），我想在自动完成建议之间查看带有变音符号的对象。这就是为什么我要覆盖该`compareTo()`方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:27:54.650

您正在寻找的是[Collat​​or](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/Collator.html) API。

# jasperserver - jasperserver 4.5 中的仪表板

> ID：10410867
> 
> 赞同：1
> 
> 时间：2012-05-02T09:17:59.320
> 
> 标签：jasperserver

我想做很多我在网上找到的事情，而 jasperreport 可以做到，但是在我的屏幕上，我没有找到创建仪表板的菜单，我也没有在存储库中找到很多文件夹。 ..

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:28:14.333

[对不同产品版本中的内容的这种比较](http://www.jaspersoft.com/editions)应该清楚。

# javascript - 同一画布中的 HTML5 画布分层对象

> ID：10410873
> 
> 赞同：0
> 
> 时间：2012-05-02T09:18:25.310
> 
> 标签：javascript, html, canvas, z-index

我四处寻找在同一个画布中分层对象，但没有找到很多关于它的信息。

目前我已经使用了多画布技术将事物相互叠加

示例：canvas Holder <--- 这包含所有其他画布的加载画布菜单画布游戏画布背景画布

`stage = new stage (mainCanvas)`并通过以特定顺序将它们添加到“ ”中，我得到了所需的分层

```
stage.addChild(background);
stage.addChild(game);
stage.addChild(menu);
stage.addChild(loading); 
```

这很好用，但是我想知道如果我在该画布中有 2 个图像，是否有办法更改添加到“游戏”画布的图像的 zIndex？

我在 fieldrunners 游戏中看到过这种事情，游戏遵循类似网格的格式，当你将一个射手放在另一个射手上方的广场上时，它会重新定位在它后面。

[http://fieldrunnershtml5.appspot.com/#sd](http://fieldrunnershtml5.appspot.com/#sd) --- 适用于 chrome

有什么想法是怎么做的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:52:56.010

不需要多个画布。当您在画布 2d 中使用游戏时，您通常每秒清除和重绘画布约 60 次。你最后画的东西在上面。因此，为了模拟图层，您可以根据 z-index 对数组中的所有游戏对象进行排序，然后遍历数组中的所有对象，调用它们的绘制方法。

优化这种渲染器的空间很大，但这是使其工作的基本且简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:51:36.870

您使用多个画布来实现图层的技术是完全好的方法。您还应该跟踪需要清除/重绘的图层 - 例如`map`，仅在滚动时刷新或`GUI/HUD`确实不需要每秒重绘 60 次。

画布中没有 z-index 或对象之类的东西，所有机制都取决于您自己的实现。例如，您可以创建一个要绘制的命令或对象数组 - 然后按 zIndex（或您命名的任何名称）对其进行排序并执行每个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:20:29.490

A`canvas`只是像素 - 它没有“层”。

如果要进行视差滚动之类的操作，请将多个画布放在同一个位置，并使用透明度显示后面的画布。

# php - 如何在 PHP 中计算一个人的年、月、日年龄？

> ID：10410877
> 
> 赞同：-1
> 
> 时间：2012-05-02T09:18:50.807
> 
> 标签：php

> **可能重复：**
> [如何计算一个人的年、月、日年龄？](https://stackoverflow.com/questions/453208/how-can-i-calculate-the-age-of-a-person-in-year-month-days)

我想计算一个人的年龄，给定出生日期和相对于当前日期的年、月和日的当前日期。

例如：

```
>>> calculate_age(2008, 01, 01)
1 years, 0 months, 16 days 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-02T09:27:40.187

你可以使用 PHP `date_diff` [http://php.net/manual/en/function.date-diff.php](http://php.net/manual/en/function.date-diff.php)或[http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)来实现你想要的和你可以使用`PHP`日期格式以您想要的任何格式输出

```
$interval = date_diff(date_create(), date_create('2008-01-01 10:30:00'));
echo $interval->format("You are  %Y Year, %M Months, %d Days, %H Hours, %i Minutes, %s Seconds Old"); 
```

回声

```
You are 04 Year, 04 Months, 1 Days, 00 Hours, 56 Minutes, 36 Seconds Old 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T09:35:32.973

```
<?php
date_default_timezone_set('Asia/Calcutta');

function findage($dob)
{
    $localtime = getdate();
    $today = $localtime['mday']."-".$localtime['mon']."-".$localtime['year'];
    $dob_a = explode("-", $dob);
    $today_a = explode("-", $today);
    $dob_d = $dob_a[0];$dob_m = $dob_a[1];$dob_y = $dob_a[2];
    $today_d = $today_a[0];$today_m = $today_a[1];$today_y = $today_a[2];
    $years = $today_y - $dob_y;
    $months = $today_m - $dob_m;
    if ($today_m.$today_d < $dob_m.$dob_d) 
    {
        $years--;
        $months = 12 + $today_m - $dob_m;
    }

    if ($today_d < $dob_d) 
    {
        $months--;
    }

    $firstMonths=array(1,3,5,7,8,10,12);
    $secondMonths=array(4,6,9,11);
    $thirdMonths=array(2);

    if($today_m - $dob_m == 1) 
    {
        if(in_array($dob_m, $firstMonths)) 
        {
            array_push($firstMonths, 0);
        }
        elseif(in_array($dob_m, $secondMonths)) 
        {
            array_push($secondMonths, 0);
        }elseif(in_array($dob_m, $thirdMonths)) 
        {
            array_push($thirdMonths, 0);
        }
    }
    echo "<br><br> Age is $years years $months months.";
}

findage("21-04-1969"); //put date in the dd-mm-yyyy format
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:21:51.600

```
<?php
$ageTime = mktime(0, 0, 0, 9, 9, 1919); // Get the person's birthday timestamp
$t = time(); // Store current time for consistency
$age = ($ageTime < 0) ? ( $t + ($ageTime * -1) ) : $t - $ageTime;
$year = 60 * 60 * 24 * 365;
$ageYears = $age / $year;

echo 'You are ' . floor($ageYears) . ' years old.';
?> 
```

[来源](http://www.dreamincode.net/forums/topic/19953-calculating-age-tutorial/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:28:21.383

使用数据时间差异功能

[http://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

# php - CodeIgniter 静态页面教程（无法加载请求的文件）

> ID：10410880
> 
> 赞同：2
> 
> 时间：2012-05-02T09:18:58.537
> 
> 标签：php

我最近下载了 CodeIgniter 并将其安装在 XAMPP htdoc -> codeigniter(application,system,user guide,index.php,license.txt)

我尝试按照 CodeIgniter 的用户指南中发布的关于[创建静态页面](http://codeigniter.com/user_guide/tutorial/static_pages.html)的教程进行操作，但我不断收到此错误：

无法加载请求的文件：pages/home.php

控制器位于 application/controllers/pages.php ，代码如下：

```
class Pages extends CI_Controller 
{

    public function view($page = 'home')
    {
        if(file_exists('application/views/pages/'.$page.'.php'))
        {
            //whoops we don't have a page for that!
            show_404();
        }

        $data['title'] = ucfirst($page); //Capitalize the first letter
        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);
    }
} 
```

教程还提到了在 application/views/templates/header.php 中创建 header.php 和在 application/views/templates/footer.php 中创建 footer.php，它们只是 html 代码，并回显页面标题。

最后还在 application/views/pages/ 目录中创建 home.php 和 about.php。对于 home.php 和 about.php，我只输入一些纯文本。

我哪里做错了。任何建议将不胜感激。：） 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:41:06.140

尝试更改此行：

```
if(file_exists('application/views/pages/'.$page.'.php')) 
```

对此：

```
if(!file_exists( APPPATH . 'views/pages/'.$page.'.php')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:29:22.893

你能把这条线改成

```
if(file_exists('application/views/pages/'.$page.'.php')) 
```

就像是

```
if(file_exists(dirname(dirname(__FILE__)).'/views/pages/'.$page.'.php')) 
```

让我知道这是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-09T10:34:16.330

在静态页面教程中，您被要求：

> 使用以下代码在 application/controllers/pages.php 创建一个文件。

但这不起作用，因为文件名需要以这样的大写字母开头：

> 应用程序/控制器/Pages.php

这对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:52:06.673

格式是 mysite.com/index.php/home 还是 mysite.com/home 无关紧要，因为它正在寻找视图，而不是控制器。

`if(file_exists('application/views/pages/'.$page.'.php'))`

应该

`if(!file_exists('application/views/pages/'.$page.'.php'))`

不过，这不是导致您的问题的原因。当它评估为真时显示 404，这意味着该文件实际上不存在。如果文件存在，您将获得 404 页面。

彻底检查并确保您拥有文件“application/views/pages/home.php”。

# php - Luracast Restler 正在发送“文本/html”而不是 JSON

> ID：10410881
> 
> 赞同：0
> 
> 时间：2012-05-02T09:19:14.810
> 
> 标签：php, rest, restler

我有一个使用 LuraCast Restler API 实现的 REST Web 服务。到目前为止，它一直运行良好。突然间，我不再响应我对服务的请求而获得 JSON 数据。

X-Debug 总是在对服务的每个请求中返回以下通知。

```
( ! ) Notice: Undefined offset: 1 in /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php on line 1136
Call Stack
#   Time    Memory  Function    Location
1   0.0013  631072  {main}( )   ../restIndex.php:0
2   0.0969  1170720 Restler->addAPIClass( ) ../restIndex.php:14
3   0.0971  1181912 Restler->generateMap( ) ../restler.php:248
4   0.0971  1184616 parse_doc( )    ../restler.php:652
5   0.0971  1184984 DocParser->parse( ) ../restler.php:1157
6   0.0972  1205520 DocParser->parseLines( )    ../restler.php:1073
7   0.0972  1209704 DocParser->parseLine( ) ../restler.php:1079
8   0.0973  1209944 DocParser->setParam( )  ../restler.php:1111
9   0.0973  1209944 DocParser->formatClass( )   ../restler.php:1120

( ! ) Notice: Undefined offset: 1 in /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php on line 1136
Call Stack
#   Time    Memory  Function    Location
1   0.0013  631072  {main}( )   ../restIndex.php:0
2   0.1065  1224952 Restler->addAuthenticationClass( )  ../restIndex.php:15
3   0.1065  1225304 Restler->addAPIClass( ) ../restler.php:260
4   0.1068  1228176 Restler->generateMap( ) ../restler.php:248
5   0.1068  1229568 parse_doc( )    ../restler.php:652
6   0.1068  1229936 DocParser->parse( ) ../restler.php:1157
7   0.1068  1239456 DocParser->parseLines( )    ../restler.php:1073
8   0.1068  1241448 DocParser->parseLine( ) ../restler.php:1079
9   0.1069  1241696 DocParser->setParam( )  ../restler.php:1111
10  0.1069  1241696 DocParser->formatClass( )   ../restler.php:1120

( ! ) Warning: Cannot modify header information - headers already sent by (output started at /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php:1136) in /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php on line 385
Call Stack
#   Time    Memory  Function    Location
1   0.0013  631072  {main}( )   ../restIndex.php:0
2   0.1102  1228048 Restler->handle( )  ../restIndex.php:16
3   0.1233  1461248 Restler->sendData( )    ../restler.php:366
4   0.2814  1547080 header ( )  ../restler.php:385

( ! ) Warning: Cannot modify header information - headers already sent by (output started at /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php:1136) in /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php on line 386
Call Stack
#   Time    Memory  Function    Location
1   0.0013  631072  {main}( )   ../restIndex.php:0
2   0.1102  1228048 Restler->handle( )  ../restIndex.php:16
3   0.1233  1461248 Restler->sendData( )    ../restler.php:366
4   0.2835  1547048 header ( )  ../restler.php:386

( ! ) Warning: Cannot modify header information - headers already sent by (output started at /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php:1136) in /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php on line 387
Call Stack
#   Time    Memory  Function    Location
1   0.0013  631072  {main}( )   ../restIndex.php:0
2   0.1102  1228048 Restler->handle( )  ../restIndex.php:16
3   0.1233  1461248 Restler->sendData( )    ../restler.php:366
4   0.2846  1547064 header ( )  ../restler.php:387

( ! ) Warning: Cannot modify header information - headers already sent by (output started at /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php:1136) in /Applications/MAMP/htdocs/aem.davidcasillas.es/public/webservice/restler/restler.php on line 388
Call Stack
#   Time    Memory  Function    Location
1   0.0013  631072  {main}( )   ../restIndex.php:0
2   0.1102  1228048 Restler->handle( )  ../restIndex.php:16
3   0.1233  1461248 Restler->sendData( )    ../restler.php:366
4   0.2914  1547072 header ( )  ../restler.php:388 
```

最后，数据是作为响应发送的，但不是以 JSON 格式发送的，所以我的 movil 应用程序无法再处理它。

正如我所说，到目前为止，该服务一直运行良好。我不知道这个通知是否与错误有关，但它们显然似乎是。

你能指出我如何调试这个问题的任何方向吗？

如果这有任何帮助，这里是我的代码：

这是我配置 Restler 的索引脚本：

```
<?php

require_once '../../BaseDatos.php';
require_once 'restler/restler.php';

#set autoloader
#do not use spl_autoload_register with out parameter
#it will disable the autoloading of formats
spl_autoload_register('spl_autoload');

$r = new Restler();
$r->setSupportedFormats('JsonFormat');
$r->addAPIClass('Rest');
$r->addAuthenticationClass('Seguridad');
$r->handle(); 
```

这是公共 API 类（我只展示一种方法）

```
class Rest
{

    /**
     * @brief Una instancia de la clase BaseDatos
     *
     * @var BaseDatos $db
     */
    private $db;

    /**
     * \brief Constructor de la clase.
     *
     * Inicializa una instancia de la clase BaseDatos.
     *
     */
    function __construct() {
        $this->db = BaseDatos::getInstance();
    }
    public function getFuentes($nombreUsuario, $password) {

        $fuentes = $this->db->getFuentes();
        $fuentes = array('fuentes' => $fuentes);
        return $fuentes;
    } 
```

这是检索要返回的信息的 BaseDatos 类方法：

```
public function getFuentes() {
    //SELECT * FROM fuentes
    $queryString = 'SELECT * FROM ' . TABLA_FUENTES . ' ORDER BY nombreFuente';
    $queryResult = $this->query($queryString);
    if ($this->errno != 0) {
        //ERRRO. mysql
        $this->setErrorNoAndMessage(ErrorCode::ERROR_MYSQL, $this->error);
        return FALSE;
    }
    $resultado = array();
    while ($row = $queryResult->fetch_assoc() ) {
        $resultado[] = $row;
    }

    $this->resetErrorNoAndMessage();
    return $resultado;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:24:58.073

该问题与我最近添加的文档评论有关。我在类文档中添加的`@class`标签产生了冲突，可能是因为 Restler 的 DocParser 没有处理这个特定的标签。

我在问题中包含的前 2 个通知发生在 DocParser 尝试执行该`formatClass()`方法以响应`@class`标签而不是`Class`PHP 中的声明时。

也许对这个 API 有深入了解的人可以补充一些亮点。

只需从文档中删除此标签，一切都会恢复正常。

# c# - 如何修改此正则表达式以不允许空格？

> ID：10410882
> 
> 赞同：-1
> 
> 时间：2012-05-02T09:19:14.840
> 
> 标签：c#, regex

我有以下正则表达式，它指定允许用户输入的字符：

```
@"^[A-Za-z0-9/!\$%\^&\*\(\)\-_\+\[\]\{\}\;\:\'\£\@\#\.\?]*$ 
```

我知道 ' `\s`' 是空格的字符类，但是如何将其添加到正则表达式中以排除它？我在 Stack Overflow 上搜索过这个问题——这些问题提供了排除空格的解决方案，但没有提供如何在现有正则表达式中使用它。如果我像添加其他字符一样添加它，这意味着“允许空格”吗？

编辑：不知道为什么这被标记了？感谢大家的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:24:58.623

`^`在方括号内的正则表达式中表示否定，因此添加`^\s`意味着“不是空格”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T09:26:52.910

首先，您不需要所有这些转义。其次，正则表达式已经不允许空格。

```
@"^[A-Za-z0-9\[\]/!$%^&*()\-_+{};:'£@#.?]*$" 
```

[] 定义了一组允许的字符（后跟 * 表示字符集中的字符可以是零次或多次）。

^ 匹配开头， $ 匹配结尾，因此 /s 不在任何地方，这意味着不允许使用空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:23:28.260

在正则表达式中，如果不写“\s”。这意味着您的正则表达式不允许任何空格。

例如：1）如果我不想让任何用户在文本框中输入空格，那么正则表达式写成：

正则表达式字母=新正则表达式(@"^[az]*$");

2）如果允许用户在文本框中输入任何空格，则正则表达式写为：

正则表达式字母=新正则表达式(@"^[az\s]*$");

3) 在正则表达式中，“^”表示开始，“$”表示结束。

注意：^\s 表示“\s”的否定

正则表达式 regfname = new Regex(@"^[^\s][a-zA-Z]*$");

此代码不允许任何空格和空文本框！

我希望这能帮助你理解正则表达式中空格的概念。

# php - 在 PHP 中计算赔率节流阀

> ID：10410883
> 
> 赞同：0
> 
> 时间：2012-05-02T09:19:22.580
> 
> 标签：php, random, probability, probability-theory

在 PHP 中，如果我用传送带构建一个工厂检查程序，其中表单上的弹出列表框是 100%（什么都不检查 - 让所有内容都通过）到 0%（检查所有内容），当一个的小部件应进行检查？

一些额外的信息——标签上写着“让 [x%] 小部件在没有检查的情况下通过”。

不仅如此，我们如何测试你的算法来证明它是正确的？例如，值为 100%，运行 99999 次，应该显示没有检查。99% 的值，运行 99999 次，如果重复运行，可能会显示一次检查。0% 的值，运行 99999 次，应该显示所有 99999 个小部件被发送到检查。

**编辑**：一位同事说我在这里混淆了赔率和概率。她认为我在描述概率？

无论如何，我尝试了这段代码作为测试，但除了 100 和 50 到 1 分之外它什么也没做。但是，1-49 的行为类似于 50，而 51 到 100 的行为类似于 100。

```
<?php

$nChance = @ $argv[1];
$nChance = intval($nChance);

for ($i = 1; $i <= 999999; $i++) {
  $nTest = rand(1,floor(100/$nChance));
  if (!($nTest == 1)) {
    die("INSPECT! i($i) rand($nTest) chance($nChance)\n");
  }
} 
```

然后我尝试了这种变化，但也失败了，因为它只是一直说 INSPECT。

```
<?php

$nChance = @ $argv[1];
$nChance = intval($nChance);

for ($i = 1; $i <= 999999; $i++) {
  $nTest = rand(0,100);
  if (!($nTest < $nChance)) {
    die("INSPECT! i($i) rand($nTest) chance($nChance)\n");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:37:30.060

```
$nChance = 5; // % chance of inspection
$x       = 1; // number of seconds between products passing inspection point
while ( isLineRunning() )
{
    if( mt_rand(1,100) <= $nChance )
    {
        echo "INSPECT ITEM!";
    }
    sleep( $x );
}; 
```

这将在线路运行时每隔“x”秒检查一次。

您的同事是正确的，但出于您的目的，您正在根据随机数是否小于或等于（在这种情况下）5 做出决定，如果是真正随机的（不是这样生成的）应该提供 1在 20 机会中，您选择任何给定的项目。

# javascript - 使 tinyscrollbar 与不断变化的动画内容一起工作

> ID：10410884
> 
> 赞同：1
> 
> 时间：2012-05-02T09:19:23.473
> 
> 标签：javascript, jquery, tinyscrollbar

[我正在使用 tinyscrollbar](http://jsfiddle.net/J74VS/7/)来显示一个不错的滚动条。

我的部分内容被隐藏（`display:none`），并且仅在单击按钮后显示在`slideDown()`/`slideToggle()`动画中。

当我显示额外的内容时，滚动条不会更新，并且部分内容现在无法访问。有没有一种可以平滑更新动画的解决方案？

仅供参考，这是一个不流畅的解决方案（只需`.tinyscrollbar()`在动画完成后再次调用）：

```
$(".toggler").slideToggle().promise().then(function(){
  $("#scrollbar").tinyscrollbar()
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:52:17.540

使用 tinyscrollbar_update() 方法。那干净多了，然后再次初始化滚动条。

```
$(".toggler").slideToggle().promise().then(function(){
  $('#scrollbar').tinyscrollbar_update();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:01:42.977

也许使用“相对”

```
$('#scrollbar').tinyscrollbar_update(); 
```

切换内容后无需动画滚动条。该解决方案对我的问题有所帮助。

# php - Symfony2：数据映射器

> ID：10410886
> 
> 赞同：2
> 
> 时间：2012-05-02T09:19:24.960
> 
> 标签：php, symfony, doctrine, datamapper

我已经阅读了很多关于一些 DataMapper 模式的内容。

只要我理解，DataMapper 就应该将表单模型对象映射到实体对象。所以被用作某种适配器。

我理解正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:03:29.117

No, [Data Mapper](http://martinfowler.com/eaaCatalog/dataMapper.html) is about mapping objects to the database — it has nothing to do with forms in any way.

The main advantage of the Data Mapper pattern is that you can evolve both your object model and the database schema independently — without bending one to another. In contrast, with [Active Record](http://martinfowler.com/eaaCatalog/activeRecord.html) you have to bend one of them — usually good database design is sacrificed to please the object model.

Doctrine 1.x was an implementation of something between Active Record and Data Mapper; Doctrine 2.x is a pure Data Mapper implementation.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:57:18.137

elnur is right about DataMapper, if you want to know about mapping forms to objects, you can use what symfony calls a [DataTransformer](http://symfony.com/doc/current/cookbook/form/data_transformers.html).

# ios - 如何从另一个 UIViewController 获取操作？

> ID：10410887
> 
> 赞同：0
> 
> 时间：2012-05-02T09:19:34.377
> 
> 标签：ios, uiviewcontroller

如何在没有 的情况下从另一个控制器获取操作`[self presentModalViewController: ololo animated:YES];`？
我可以只用吗

```
Tutorial *ololo = [[Tutorial alloc] initWithNibName:nil bundle:nil];
[self.view addSubview:ololo.view]; 
```

?

现在，当我尝试在新视图上按下按钮时，使用此代码出现 EXC BAD ACCESS 错误。

使用自己的 XIB 创建 UIView 的 2 个子类可能会更容易，或者我可以在没有导航栏的情况下使用 NavigateController？

PS 是的，我有 Tutorial.h、Tutorial.m、Tutorial.xib。在 XIB 文件中有 2 个视图（纵向和横向）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:25:49.403

确保您的 Tutorial 对象扩展了 UIViewController

`@interface Tutorial : UIViewController {`

还要确保你有一个 Tutorial.xib 文件，它有一个视图，并且视图的出口与 viewcontroller 的出口相链接。

作为最佳实践，试试这个：

```
Tutorial *ololo = [[[Tutorial alloc] initWithNibName:@"Tutorial" bundle:nil] autorelease];
[self.view addSubview:ololo.view]; 
```

此外，如果您在同一个视图控制器中需要 2 个视图，您可以在 IB 中添加 2 个视图，在第二个视图中添加一个插座，并将其添加为主视图的子视图：

```
[self.view addSubview:secondView] 
```

这样，它们都由同一个视图控制器管理，您可以在同一个视图控制器中添加操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:26:05.977

你的问题不清楚。尝试将 xibf 文件名作为参数传递给 initWithNibName，ekse 只需使用 int 方法。希望它不会崩溃

# javascript - jQuery找不到嵌套图像

> ID：10410889
> 
> 赞同：-1
> 
> 时间：2012-05-02T09:19:44.407
> 
> 标签：javascript, jquery

我有以下 HTML：

```
<div id="showDropZone" class="ui-droppable" style="position: absolute; z-index: 1; outline-style: none; left: 0px; width: 379px; height: 500px;">
    <div id="introText" style="display: none;">Drag and drop program images here</div>
        <ul class="gallery ui-helper-reset">
            <li class="imgThumbLi ui-draggable imageSelected" title="File Name: drago.jpg Dimension: 225x225 Size: 7 KB" style="display: list-item;">
                <img class="image" src="/myApp/2012/5/1/1335900424140/39345e7f3d12487bb6e347e786194c9b" title="File Name: drago.jpg Dimension: 225x225 Size: 7 KB">
                <div class="imageInfo">
                    <p class="detailTitle">Logo!</p>
                </div>
            </li>
        </ul>
    </div>
</div> 
```

在我的 jQuery/JS 函数中，我获得了`<ul>`元素（及其子元素），并且可以使用以下代码`<li>`轻松找到's 的文本值：`p.detailTitle`

```
$("#showDropZone").find("ul").each(function() {
    $(this).find("li").each(function() {
        var detailTitle = $(this).find("p.detailTitle").text();

        // This prints "Logo!" correctly...
        alert(detailTitle);

        var imageTitle = $(this).find("img").title;
        var imageSrc = $(this).find("img").src;

        // But these both print "undefined"...
        alert(imageTitle);
        alert(imageSrc);
    }
} 
```

如何获取`<img>`'s`title`和`src`属性？如上面的代码所示，当前代码将它们返回为`undefined`. 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:22:17.180

采用 `.attr()`

参考：[http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

工作代码：

```
$("#showDropZone").find("ul").each(function() {

alert($(this).html());
    $(this).find("li").each(function() {
        var detailTitle = $(this).find("p.detailTitle").text();

        // This prints "Logo!" correctly...
        alert(detailTitle);

        var imageTitle = $(this).find("img").attr('title');
        var imageSrc = $(this).find("img").attr('src');

        // But these both print "undefined"...
        alert(imageTitle);
        alert(imageSrc);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:22:58.177

这是一个缩短的版本。在这里，我利用其中的第二个参数`$()`来指定搜索的上下文。在这段代码中`each()`， 的值`this` 是当前迭代中的 DOM 元素`li`。我们使用`this`作为我们的“基础”来缩小搜索范围，而不是使用`find()`.

```
$("#showDropZone ul > li").each(function() {

    var detailTitle = $("p.detailTitle", this).text(); //find detailTitle in <li>
    var img = $("img", this);                          //find img in <li>
    var imageTitle = img.attr('title'); 
    var imageSrc = img.attr('src');

    alert(detailTitle);
    alert(imageTitle);
    alert(imageSrc);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:23:12.173

尝试 -

```
var imageTitle = $(this).find("img").attr('title');
var imageSrc = $(this).find("img").attr('src'); 
```

或者

```
var imageTitle = $(this).find("img")[0].title;
var imageSrc = $(this).find("img")[0].src; 
```

我认为您的问题是该`find`函数将返回一个没有`title`或`src`属性的 jQuery 包装的 DOM 元素。使用 jQuery 的`attr`函数或将返回的值转换回“普通”Javscript DOM 对象应该可以解决您的问题。

演示 - [http://jsfiddle.net/PSzE3/](http://jsfiddle.net/PSzE3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:23:22.103

您正在选择所有图像，而不是只选择一个并访问其值/属性。尝试：

```
var imageTitle = $(this).find('img').get(0).attr('title');
var imageSrc = $(this).find('img').get(0).attr('src'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T09:59:20.733

您正在使用 jQuery find 函数，它返回结果数组而不是单个元素。想想当你的 html 中有 5 个 img 标签并且你说 jQuery 带来 img 并显示它的标题的情况！！！...

所以更新你的脚本代码

```
$("#showDropZone").find("ul").each(function() {
$(this).find("li").each(function() {
    var detailTitle = $(this).find("p.detailTitle").text();

    // This prints "Logo!" correctly...
    alert(detailTitle);

    $(this).find("img").each(function(){
        var imageTitle = this.title;
        var imageSrc = this.src;

    // wollaaaa working exactly...
    alert(imageTitle);
    alert(imageSrc);
    });

});
}); 
```

或者，如果您只想测试您的代码，只需使用

```
var imageTitle = $(this).find("img")[0].title;
var imageSrc = $(this).find("img")[0].src; 
```

这将在上面的 html 中工作，因为它有单个图像。

# c# - 将 WPF 本地资源转换为应用程序资源

> ID：10410892
> 
> 赞同：0
> 
> 时间：2012-05-02T09:19:52.330
> 
> 标签：c#, .net, wpf, c#-4.0

我在 XAML 中有一个本地资源，我希望它被代码的其他部分使用。我怎样才能使它“全局”（即应用程序范围的资源）？这是我的本地资源：

```
<ResourceDictionary >
   <local:BoolToLightConvertor x:Key="LightConverter" / >
</ResourceDictionary> 
```

我怎样才能把它放在 App.xaml 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:28:25.973

应用程序资源 除了在元素或窗口级别定义资源外，您还可以定义特定应用程序中的所有对象都可以访问的资源。您可以通过打开 App.xaml 文件（对于 C# 项目）或 Application.xaml 文件（对于 Visual Basic 项目）并将资源添加到 Application.Resources 集合来创建应用程序资源，如下所示：

```
<Application x:Class="WpfApplication.App"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
StartupUri="Window1.xaml">
   <Application.Resources>
      <SolidColorBrush x:Key="appBrush" Color="LightConverter" />
   </Application.Resources>
</Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:29:15.227

创建一个文件（例如 SharedResources.xaml），如下所示：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Your.Namespace.Here;assembly=Your.Assembly.Here">
    < local:BoolToLightConvertor x:Key="LightConverter" / >
</ResourceDictionary> 
```

在您的 App.xaml 中添加以下行：

```
<Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="SharedResources.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style TargetType="{x:Type Rectangle}" />
        </ResourceDictionary>
    </Application.Resources> 
```

您现在可以在 XAML 中使用此转换器

（这`<Style TargetType="{x:Type Rectangle}"/>`是一种解决方法来阻止忽略您的资源字典的 WPF 错误，并且在 SO 上的另一个问题推荐。不幸的是，该链接现在让我无法理解）

# ios - 我可以在没有 Xcode UI 的情况下构建应用程序并将其分发到苹果商店吗？

> ID：10410895
> 
> 赞同：1
> 
> 时间：2012-05-02T09:20:16.060
> 
> 标签：ios, xcode, distribute

我想通过 hudson 和一些脚本自动构建 object-c 代码并将应用程序分发到苹果商店。我可以这样做吗？我知道 xcodebuild 可以通过命令行构建代码。但我不知道我是否可以通过命令行分发应用程序？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:30:57.833

不，您不能通过脚本自动上传应用程序......需要在 iTunesconnect 中提交带有应用程序信息的少数表单......而 Apple 没有提供任何自动化的东西......

# javascript - Symfony 2 表单域 - 图像预览而不是文件路径

> ID：10410896
> 
> 赞同：2
> 
> 时间：2012-05-02T09:20:22.940
> 
> 标签：javascript, file-upload, symfony, jquery-ui-dialog, form-fields

我用 Symfony 2 编写了一个应用程序。我有一个包含文件字段的表单。
当没有选择文件时，视图是“选择文件”按钮，右侧显示“未选择文件”。当我选择一个文件时，文件名出现在按钮的右侧。

我想改变这种行为：
当没有选择文件时，**只**显示按钮。
选择文件后，我想生成图像预览，而不是显示文件名。

有人有这个问题的简单解决方案吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:02:01.523

您可以将输入类型文件的 css 更改为`visibility:hidden`并在那里显示一个按钮...您可以像这样进行 jquery 事件

```
$(document).ready(function(){
$("#idofbutton").click(function(){
   $("#idofinputtypefile").trigger('click');
});
}); 
```

其余的你可以使用 iframe 来刺激上传事件。

对于 jquery 文件上传，请检查代码链接这个链接

> [http://www.phpletter.com/Demo/AjaxFileUpload-Demo/](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)

希望这可以帮助

# javascript - 无法获取单选按钮的值

> ID：10410900
> 
> 赞同：1
> 
> 时间：2012-05-02T09:20:31.513
> 
> 标签：javascript, jquery

```
<input type="radio" name="animal" id="cat" value="Cat" />
                <label for="cat">Cat</label>

            <input type="radio" name="animal" id="radio-choice-2" value="choice-2"/>
            <label for="radio-choice-2">Dog</label>

            <input type="radio" name="animal" id="radio-choice-3" value="choice-3"  />
            <label for="radio-choice-3">Hamster</label>

            <input type="radio" name="animal" id="radio-choice-4" value="choice-4"  />
            <label for="radio-choice-4">Lizard</label>
            <input type="button" value="Get Radio Button Value" onclick="getValue();" 
```

我想在单击我编写的代码的按钮时获取所选单选按钮的值

```
function getValue () {
    alert("Value is :"+$('input[name=animal]:checked').val());  
    } 
```

但它不起作用并且变得未定义

**更新：**

我已经使用了 Jquery 的 js 和 jquerymobile 的 jquery 很好，但是因为我将它用于移动应用程序，所以我需要两个 js 库，所以在第二种情况下它不起作用。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script> 
```

## **[解决了]**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:39:25.937

嗨，我认为您无需检查任何单选按钮即可获得价值。加载您的页面，然后选择任何一个单选按钮，然后调用 getValue 函数

或者，您可以放置​​默认选中的任何单选按钮。

例如

将第一个单选按钮替换为

```
<input type="radio" name="animal" id="cat" value="Cat" checked="true"/>
                <label for="cat">Cat</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:07:06.767

试试这个 $("#myform input[type='radio']:checked").val();

或者

var myRadio = $('input[name=myRadio]');

***//使用filter()函数，而不是find()。（find() 用于定位子元素，而 //filter() 在您的选择中搜索顶级元素。）***

var checkValue = myRadio.filter(':checked').val();

# html - 奇怪的html表格布局

> ID：10410903
> 
> 赞同：0
> 
> 时间：2012-05-02T09:21:00.240
> 
> 标签：html, html-table

我已经在一个项目上工作了几个星期，我遇到了桌子底部发生的一些奇怪的事情，

这是它变得奇怪的部分：（对不起，它很长但它朝向底部！）

[http://pastebin.com/mtTNR4CH](http://pastebin.com/mtTNR4CH)

这是它发生的页面：

[http://www.upsandgeneratorparts.com/auction/daily-deal-3,name,100196,auction_id,auction_details](http://www.upsandgeneratorparts.com/auction/daily-deal-3,name,100196,auction_id,auction_details)

不知道从何说起，我试过在Dreamweaver中全部打开，却发现一个`</td>`与此无关的寂寞！

将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:23:45.430

首先使用[触发标准/严格模式的 Doctype](http://www.quirksmode.org/css/quirksmode.html)（因为 quirks 模式太不一致而无法在其中开发新内容），编写[有效的 HTML](http://validator.w3.org/)（浏览器错误已经足够糟糕，但标记良好）并且不使用[表格进行布局](http://www.hotdesign.com/seybold/)（这不是90 年代）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:27:05.110

你注意到最后一个`tr`：

```
<tr>
    <td width="10"><img src="themes/multi_blue/img/c3.gif" width="10" height="10"></td>
    <td width="100%" style="border-bottom: 1px solid #bbbbbb;"><img src="themes/multi_blue/img/pixel.gif" width="1" height="1"></td>
    <td width="10"><img src="themes/multi_blue/img/c4.gif" width="10" height="10"></td>
</tr> 
```

包含三个单元格，而主 tr 仅包含 2 个？在页脚中使用`colspan`或添加 a并告诉我它的外观。`td``tr`

**编辑：**
我又看了一眼。在您现在拥有`tr`的第一个代码之前将以下代码添加到上部。`td`您在主行中缺少左侧标尺，右侧只有一个。

```
<td width="10"><img src="themes/multi_blue/img/c3.gif" width="10" height="10"></td> 
```

# windows - 如何通过单击输入来触发 Windows 7 中的屏幕键盘？

> ID：10410913
> 
> 赞同：1
> 
> 时间：2012-05-02T09:21:30.893
> 
> 标签：windows, events, on-screen-keyboard

**好吧，当用户单击任何需要 text-input 的控件**时，我想显示 On-Screen-Keyboard 。全系统。

原因：我正在为我一直在从事的一些项目使用触摸屏，并且每次我或其他人必须键入内容时都需要手动打开屏幕键盘。

是否有任何可能性，为此捕获系统范围的事件？提前感谢您的帮助和建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:03:03.517

我目前正在研究这样的解决方案。它在移动平台上得到了很好的实现，但在桌面上却没有！希望 Windows 8 的以触控为中心的策略会带来一些结果。

我发现的最接近但最昂贵的东西是 MT Soft TS Keyboard [http://www.imgpresents.com/mtsts/mtsts.htm?babelfish=translate](http://www.imgpresents.com/mtsts/mtsts.htm?babelfish=translate)

# c++ - 访问本地对象的私有成员（相同的类类型）

> ID：10410914
> 
> 赞同：0
> 
> 时间：2012-05-02T09:21:31.823
> 
> 标签：c++, oop, private-members, local-variables, member-functions

我需要从成员函数访问本地对象的私有成员。我认为这个例子更好地解释了它。有没有办法在不公开 *a 或不提供专门分配给 *a 的函数的情况下做到这一点？此 operator+ 函数可能必须多次为本地对象分配和/或取消分配 *a。

这篇[文章](https://stackoverflow.com/questions/6921185/why-do-objects-of-the-same-class-have-access-to-each-others-private-data#answer-6921318)似乎表明这应该可行。

```
// object.h
class object {
    char *a;
    ...
}
// object.cpp
object object::operator+(object const &rhs) const {
    int amount = ...
    object local();

    // this is ok
    this->a = new char[amount];
    // this is ok too
    rhs.a = new char[amount];
    // this is not
    local.a = new char[amount];
    ....
} 
```

我的编译错误（g++ 4.6.3）是：

```
error: request for member ‘a’ in ‘local’, which is of non-class type ‘object()’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:24:00.780

```
object local(); 
```

实际上是函数声明，而不是对象定义。使用以下方法创建变量：

```
object local; 
```

由于`operator +`是类成员，因此您有权访问`private`成员，因此问题是由于**最令人烦恼的 parse**。

# c# - 重组类结构

> ID：10410917
> 
> 赞同：1
> 
> 时间：2012-05-02T09:21:33.473
> 
> 标签：c#, .net, oop, inheritance, interface

参考我[之前的问题](https://stackoverflow.com/questions/10329750/specify-interface-member-not-by-name-but-type)，故事开始于我有一堆 svcutil 生成的类。它们是从外部 WSDL 生成的。干得好：

第一个请求类：

```
public partial class getcarsRequest
{

    [System.ServiceModel.MessageHeaderAttribute(Namespace = "http://svc.datadomains.com/revision123_2/")]
    public CarsServiceApp.RequestHeader Header;

    [System.ServiceModel.MessageBodyMemberAttribute(Name = "getcarsRequest", Namespace = "carinfo", Order = 0)]
    public CarsServiceApp.getcars MessageWrap;

    public getcarsRequest()
    {
    }

    public getcarsRequest(CarsServiceApp.RequestHeader Header, CarsServiceApp.getcars getcarsRequest1)
    {
        this.Header = Header;
        this.MessageWrap = getcarsRequest1;
    }
}

public partial class getcars
{

    private MessageType messageField;

    private MessageDataGetcarsRequest messageDataField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public MessageType Message
    {
        get
        {
            return this.messageField;
        }
        set
        {
            this.messageField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 1)]
    public MessageDataGetcarsRequest MessageData
    {
        get
        {
            return this.messageDataField;
        }
        set
        {
            this.messageDataField = value;
        }
    }
}

public partial class MessageDataGetcarsRequest
{

    private AppDataGetcarsRequest appDataField;

    private AppDocumentType appDocumentField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public AppDataGetcarsRequest AppData
    {
        get
        {
            return this.appDataField;
        }
        set
        {
            this.appDataField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 1)]
    public AppDocumentType AppDocument
    {
        get
        {
            return this.appDocumentField;
        }
        set
        {
            this.appDocumentField = value;
        }
    }
}

public partial class AppDataGetcarsRequest
{
    private string addressField;

    private int codeField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public address address
    {
        get
        {
            return this.addressField;
        }
        set
        {
            this.addressField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 1)]
    public int code
    {
        get
        {
            return this.codeField;
        }
        set
        {
            this.codeField = value;
        }
    }

} 
```

第二：

```
public partial class getdriversRequest
{

    [System.ServiceModel.MessageHeaderAttribute(Namespace = "http://svc.datadomains.com/revision123_2/")]
    public carsServiceApp.RequestHeader Header;

    [System.ServiceModel.MessageBodyMemberAttribute(Name = "getdriversRequest", Namespace = "driverinfo", Order = 0)]
    public carsServiceApp.getdrivers MessageWrap;

    public getdriversRequest()
    {
    }

    public getdriversRequest(carsServiceApp.RequestHeader Header, carsServiceApp.getdrivers getdriversRequest1)
    {
        this.Header = Header;
        this.MessageWrap = getdriversRequest1;
    }
}

public partial class getdrivers
{

    private MessageType messageField;

    private MessageDataGetdriversRequest messageDataField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public MessageType Message
    {
        get
        {
            return this.messageField;
        }
        set
        {
            this.messageField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 1)]
    public MessageDataGetdriversRequest MessageData
    {
        get
        {
            return this.messageDataField;
        }
        set
        {
            this.messageDataField = value;
        }
    }
}

public partial class MessageDataGetdriversRequest
{

    private AppDataGetdriversRequest appDataField;

    private AppDocumentType appDocumentField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public AppDataGetdriversRequest AppData
    {
        get
        {
            return this.appDataField;
        }
        set
        {
            this.appDataField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 1)]
    public AppDocumentType AppDocument
    {
        get
        {
            return this.appDocumentField;
        }
        set
        {
            this.appDocumentField = value;
        }
    }
}

public partial class AppDataGetdriversRequest
{
    private string nameField;

    private int customerCodeField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 0)]
    public name name
    {
        get
        {
            return this.nameField;
        }
        set
        {
            this.nameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Order = 1)]
    public int customerCode
    {
        get
        {
            return this.customerCodeField;
        }
        set
        {
            this.customerCodeField = value;
        }
    }

} 
```

这只是 svcutil 生成的两个实体。还有其他实体与这两个类似，仅在大多数基础`AppData`属性上有所不同。我编写了一个强大的 shell 脚本来准备原始生成的文件重命名某些字段，但这还不足以完成所有工作。

我怎样才能组成班级团结？看来我应该使用参数化接口......我需要统一的类结构来设计常见的有用功能，例如检查请求是否正确或从头开始创建请求。

提前谢谢各位！我的大脑都为那些东西沸腾了。

* * *

**问题编辑＃1**

好的，伙计们，这是我想要的。假设我们要检查任何服务方法的正确性请求。如果某个请求的`AppData`属性不为空，我们应该认为该请求是正确的。实际上，我们最好有一些通用的类方法来进行这种检查。`AppData`但是，如果任何请求类具有不同的属性类型，我们如何创建该方法呢？

让我们看一下两个生成的类，并为每个 AppData 属性绘制一些假想的路径。

对于第一类，我们有 getcarsRequest（在括号中，我们有适当的类类型）：

> 请求（getcarsRequest）-> MessageWrap（getcars）-> MessageData（MessageDataGetcarsRequest）-> AppData（AppDataGetcarsRequest）

对于第二个我们有下一条路径：

> 请求（getdriversRequest）-> MessageWrap（getdrivers）-> MessageData（MessageDataGetdriversRequest）-> AppData（AppDataGetdriversRequest）

那么我们如何重新设计并将它们简化为一些通用接口呢？如果我们为这两个类有一个合适的通用接口，我们可以编写一些`CheckRequest(IRequest<T> request)`.

我希望我在这里得到一些澄清。任何建议/句子将不胜感激。如果您对我有任何疑问，请随时将它们带给我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:56:58.680

据我了解，您有两个有效复制的类结构：汽车和驾驶员。您应该专注于重构输入 wsdl（我们还没有看到），而不是修改生成的类。

为了消除这种重复，考虑制作两个对象：汽车和司机，并重组 wsdl 操作，使它们可以对任一类型的对象进行操作。在面向对象的术语中，car 和 driver 都应该继承自同一个基类，该基类将具有可由 wsdl 操作调用的抽象方法。然后需要在汽车和驱动程序派生/具体类中实现这些抽象方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:24:07.253

如果您无法编辑 WSDL 以提供通用类型，我看到两种可能性：

1.  您可以创建使用已知类型参数化的通用包装类。这些类将模仿具体类的结构（由 svcutil 生成），包括它们的层次结构。然后将原始对象包装在适当的包装器中，并从那时起使用包装器。

    *优点*：与包装类的交互类似于原始（原始）对象，没有太多运行时开销。

    *缺点*：您需要在 WSDL 更改时创建和维护原始（原始）对象的类布局/层次结构。

2.  或者，您可以使用反射在对象上调用适当的方法——您需要根据具体类型计算方法名称（例如`callFunction(o, "get", "car")`调用`((GetCarsRequest)o).getCars()`）。

    *优点*：您不需要创建和维护阴影类型层次结构来匹配原始类型布局/层次结构。

    *缺点*：通常反射比通过编译的字节码获得相同的结果要慢得多。

这两种方法都要求您始终确定要处理的对象类型，这应该不是问题，因为您当前的设置中已经存在这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:45:38.983

重构可能是最好的选择，但如果它不可行，您可以利用它们的优势`partial`并添加一个接口。

```
public IData<TRequest>  {
    T AppData { get; set; }
    bool IsValid { get; }
}
public partial class MessageDataGetdriversRequest : IData<AppDataGetcarsRequest>
{
    bool IsValid { get { this.AppData != null; } }
}
public partial class MessageDataGetdriversRequest: IData<AppDataGetdriversRequest>
{
    bool IsValid { get { this.AppData != null; } }
} 
```

然后你可以做`var data = getcars.MessageData;`或`var data = getdrivers.MessageData;`，然后检查`data.IsValid`。

也可以`IsValid`作为扩展方法实现 on`this IData<T>`而不是 的属性`IData`，在这种情况下，您甚至不需要为每个类声明它（但它将是一个方法，而不是一个属性）。

```
public partial class MessageDataGetdriversRequest : IData<AppDataGetcarsRequest> { }
public partial class MessageDataGetdriversRequest: IData<AppDataGetdriversRequest> { }

public static bool IsValid(this IData<T> data)
{
    return data.AppData != null;
} 
```

# constructor - ExtJS4：如何将参数传递给 initComponent

> ID：10410919
> 
> 赞同：5
> 
> 时间：2012-05-02T09:21:54.857
> 
> 标签：constructor, extjs4, sencha-architect

我正在使用 Sencha Architect 2。我正在尝试使用文本搜索和显示结果的表格生成通用 UI 元素。通用意味着我想将它用于几种不同类型的搜索，例如用户、角色或其他内容。

因此，在这种情况下，我绝对喜欢 Sencha Architect 2 的一点是它总是生成类。这是我生成的类：

```
Ext.define('ktecapp.view.ObjSearchPanel', {
    extend: 'Ext.container.Container',
    alias: 'widget.objsearchpanel',

    height: 250,
    id: 'UserSearchPanel',
    itemId: 'UserSearchPanel',
    width: 438,
    layout: {
        columns: 3,
        type: 'table'
    },

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'textfield',
                    itemId: 'txtSearchText',
                    fieldLabel: 'Search Text',
                    colspan: 2
                },
                {
                    xtype: 'button',
                    id: 'searchObj',
                    itemId: 'searchObj',
                    text: 'Search',
                    colspan: 1
                },
                {
                    xtype: 'gridpanel',
                    height: 209,
                    itemId: 'resultGrid',
                    width: 430,
                    store: 'UserDisplayStore',
                    colspan: 3,
                    columns: [
                        {
                            xtype: 'gridcolumn',
                            width: 60,
                            dataIndex: 'ID',
                            text: 'ID'
                        },
                        {
                            xtype: 'gridcolumn',
                            width: 186,
                            dataIndex: 'DISPLAYNAME',
                            text: 'Displayname'
                        },
                        {
                            xtype: 'gridcolumn',
                            width: 123,
                            dataIndex: 'JOBTITLE',
                            text: 'Job Title'
                        },
                        {
                            xtype: 'actioncolumn',
                            width: 35,
                            icon: 'icons/zoom.png',
                            items: [
                                {
                                    icon: 'icons/zoom.png',
                                    tooltip: 'Tooltip'
                                }
                            ]
                        }
                    ],
                    viewConfig: {

                    },
                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                    })
                }
            ]
        });
        me.callParent(arguments);
    }
}); 
```

我遇到的问题是，一切都需要非常可定制，列的数据索引，商店，......那么我怎样才能获得像 ObjSearchPanel 类的构造函数这样我传递所有这些信息的函数？在上面的代码中，这一切看起来几乎是硬编码的......

提前感谢凯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T10:10:54.707

使用配置，

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Class-cfg-config](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Class-cfg-config)

```
Ext.define('SmartPhone', {
     config: {   
         hasTouchScreen: false,
         operatingSystem: 'Other',
         price: 500
     },
     constructor: function(cfg) {
         this.initConfig(cfg);
     }
});

var iPhone = new SmartPhone({
     hasTouchScreen: true,
     operatingSystem: 'iOS'
});

iPhone.getPrice(); // 500;
iPhone.getOperatingSystem(); // 'iOS'
iPhone.getHasTouchScreen(); // true;
iPhone.hasTouchScreen(); // true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T02:30:23.210

实际上（在 ExtJS 4 中），当您将配置对象传递给构造函数时，该配置对象被分配给`this.initialConfig`变量并且仍然可用于类的其他函数。所以你可以在`initComponent`.

您仍然可以在类中找到这样的 ExtJS 3.3`Ext.apply(this, Ext.apply(this.initialConfig, config));`中的代码`initComponent`。但是，使用它需要您自担风险，因为这不在 ExtJS 4 的文档中，只在源代码中找到。

# c# - 如何从其访问器中获取属性的唯一标识符

> ID：10410925
> 
> 赞同：3
> 
> 时间：2012-05-02T09:22:10.520
> 
> 标签：c#, .net, reflection

是否可以从其访问器中获取属性的唯一标识符？

```
class Foo
{
    int Bar
    {
        set
        {
            string nameOfThisProperty = X; // where X == "Bar" or any unique value
        }
    }
} 
```

如果是这样，怎么做？

**更新**：

我要问的原因是：我想要一些一致的唯一值来标识代码正在执行的属性，以避免像我现在所做的那样自己声明一个：

```
Dictionary<string, RelayCommand> _relayCommands 
    = new Dictionary<string, RelayCommand>();

public ICommand SomeCmd
{
    get
    {
        string commandName = "SomeCmd";
        RelayCommand command;
        if (_relayCommands.TryGetValue(commandName, out command))
            return command;
        ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:25:25.513

你可以使用反射：

```
[MethodImpl(MethodImplOptions.NoInlining)]
set
{
    string name = MethodBase.GetCurrentMethod().Name;
    // TODO: strip the set_ prefix from the name
} 
```

正如评论部分所指出的，setter 可以内联，因此必须用`[MethodImpl]`属性修饰它以防止 JITer 这样做。

此外，您必须`set_`从方法名称中去除前缀​​，因为 name 将等于`set_Bar`。

所以：

```
string name = MethodBase.GetCurrentMethod().Name.Substring(4); 
```

# sql - 如何从excel文件中导出数据并导入sql数据库？

> ID：10410927
> 
> 赞同：0
> 
> 时间：2012-05-02T09:22:19.677
> 
> 标签：sql, excel, import, export

有没有办法做到这一点？我在excel中有6000行，将它导入sql数据库需要几个月的时间。

例如有： excel中**的A**列和**B列**，我想将它导入**A**列和**B列**到一个sql表中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:07:41.807

这是我用于书籍数据库的 VBA 方法。只要您可以建立与数据库的连接，就不会太难。显然，您必须稍微调整一下才能使其与您的数据库和数据一起使用。特别是您必须调整 sql 字符串以连接您的数据库（更改“test.yourdatabase”）

```
Sub addBook(title As String, author As String, link As String, foundBy As String)
  ' for this code to work, you need a reference to the MS Activex
  ' data access objects
  ' Tools|References... microsoft activex data objects 2.8 (or newer)

  Dim cn As New Connection
  Dim cs As String
  Dim un as String
  Dim pw as String
  Dim sql As String

  cs = "DRIVER=SQL Server;SERVER=websql.org,5901;DATABASE=websql" 'connection string 

  un = username 'this is the username for the database

  pw = password 'this is the password for the database account

  cn.Open cs, Range("un").Value, Range("pw").Value

  sql = "insert into test.yourdatabase(searchtitle, searchAuthor, link, foundBy, foundTime) values(" & _
  "'<TITLE>', " & _
  "'<AUTHOR>', " & _
  "'<LINK>', " & _
  "'<FOUNDBY>', " & _
  "getdate());"

  'replace statements are for correcting any ' that occure in the titles or names

  sql = Replace(sql, "<TITLE>", Replace(title, "'", "''"))
  sql = Replace(sql, "<AUTHOR>", Replace(author, "'", "''"))
  sql = Replace(sql, "<LINK>", Replace(link, "'", "''"))
  sql = Replace(sql, "<FOUNDBY>", Replace(foundBy, "'", "''"))

  'Debug.Print sql

 cn.Execute sql

  cn.Close
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-19T02:30:19.667

如果您正在使用`MySQL`，它提供了一种将数据导出到数据库的直接方式：[https ://dev.mysql.com/doc/mysql-for-excel/en/mysql-for-excel-export.html](https://dev.mysql.com/doc/mysql-for-excel/en/mysql-for-excel-export.html)

如果您使用`SQLite`/ `PostGres`，Devart 提供了一个商业产品来做同样的事情：

[https://www.devart.com/excel-addins/postgresql.html](https://www.devart.com/excel-addins/postgresql.html)

[https://www.devart.com/excel-addins/sqlite.html](https://www.devart.com/excel-addins/sqlite.html)

# function - 使用 fminsearch 最大化功能

> ID：10410930
> 
> 赞同：3
> 
> 时间：2012-05-02T09:22:27.090
> 
> 标签：function, matlab, mathematical-optimization

在我的日常工作中，我必须最大限度地利用一个特定的功能`fminsearch`；代码是：

```
clc
 clear all
 close all

 f = @(x,c,k) -(x(2)/c)^3*(((exp(-(x(1)/c)^k)-exp(-(x(2)/c)^k))/((x(2)/c)^k-(x(1)/c)^k))-exp(-(x(3)/c)^k))^2;
 c = 10.1;
 k = 2.3;
 X = fminsearch(@(x) f(x,c,k),[4,10,20]); 
```

正如我所料，它工作得很好，但不是问题出现了：我需要将 x 限制在一定的范围内，如：

```
 4 < x(1) < 5
 10 < x(2) < 15
20 < x(3) < 30 
```

为了获得正确的结果，我应该使用优化工具箱，不幸的是我无法使用。

有没有办法通过只使用 fminsearch 来获得相同的分析？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:13:32.697

好吧，不直接使用 fminsearch，但如果您愿意从文件交换处下载[fminsearchbnd ，那么可以。](http://www.mathworks.com/matlabcentral/fileexchange/8277-fminsearchbnd-fminsearchcon)[fminsearchbnd](http://www.mathworks.com/matlabcentral/fileexchange/8277-fminsearchbnd-fminsearchcon)对一般目标函数进行有界约束最小化，作为 fminsearch 的覆盖。它为您调用 fminsearch，对问题应用界限。

本质上，这个想法是为您转换您的问题，使您的目标函数看起来好像在解决一个受限问题。它是完全透明的。您使用函数、参数空间中的起点以及一组下限和上限调用[fminsearchbnd 。](http://www.mathworks.com/matlabcentral/fileexchange/8277-fminsearchbnd-fminsearchcon)

例如，最小化 rosenbrock 函数会通过 fminsearch 返回 [1,1] 处的最小值。但是，如果我们对每个变量 2 的问题应用纯粹的下界，那么 fminsearchbnd 会在 [2,4] 处找到有界约束解。

```
rosen = @(x) (1-x(1)).^2 + 105*(x(2)-x(1).^2).^2;

fminsearch(rosen,[3 3])     % unconstrained
ans =
   1.0000    1.0000

fminsearchbnd(rosen,[3 3],[2 2],[])     % constrained
ans =
   2.0000    4.0000 
```

如果您对变量没有约束，则提供 -inf 或 inf 作为相应的界限。

```
fminsearchbnd(rosen,[3 3],[-inf 2],[])
ans =
       1.4137            2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:07:44.193

最幼稚的绑定方法是对不在范围内`x`的任何内容进行巨额惩罚。`x`

例如：

```
 function res = f(x,c,k)
        if x(1)>5 || x(1)<4
            penalty = 1000000000000;
        else
            penalty = 0;
        end
        res = penalty - (x(2)/c)^3*(((exp(-(x(1)/c)^k)-exp(-(x(2)/c)^k))/((x(2)/c)^k-(x(1)/c)^k))-exp(-(x(3)/c)^k))^2;
   end 
```

您可以通过以更平滑的方式给予惩罚来改进这种方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T12:29:35.810

安德烈的想法是正确的，提供点球的更顺畅的方法并不难：只需将距离添加到等式中。

要继续使用匿名函数：

```
f = @(x,c,k, Xmin, Xmax) -(x(2)/c)^3*(((exp(-(x(1)/c)^k)-exp(-(x(2)/c)^k))/((x(2)/c)^k-(x(1)/c)^k))-exp(-(x(3)/c)^k))^2 ...
+ (x< Xmin)*(Xmin' - x' + 10000) + (x>Xmax)*(x' - Xmax' + 10000) ; 
```

# mysql - Mysql Update/Insert：复制历史数据

> ID：10410933
> 
> 赞同：0
> 
> 时间：2012-05-02T09:22:40.187
> 
> 标签：mysql, sql-update, insert-select, sql-insert

我的 Mysql 数据库中有一些历史数据表。

我想在同一张表中重复一天的历史数据。

表结构，带有一些示例数据：

```
 Id | Date       | Value

  1 | 2012-04-30 |     5
  2 | 2012-04-30 |    10
  3 | 2012-04-30 |    15 
```

我想重复这些 id 和值，但要换一个新日期 - 例如 2012-05-01。即添加：

```
 1 | 2012-05-01 |     5
  2 | 2012-05-01 |    10
  3 | 2012-05-01 |    15 
```

我觉得应该有一种直接的方法来做到这一点......我尝试过使用带有子查询的 UPDATE 语句并使用多个 LEFT JOIN，但还没有到达那里。

关于如何做到这一点的任何想法？

编辑：澄清... - 我不想将这些添加到新表中 - 我也不想更改表中的现有记录。- id 是有意复制的（它们是另一个表的外键，记录了数据所指的内容......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:26:11.253

```
INSERT INTO yourTable
SELECT ID, "2012-05-01" As Date, Value
FROM yourTable
WHERE Date = "2012-04-31" 
```

通常，您的 ID 将是一个自动增量，因此在同一个表中具有相同的 ID 是行不通的。要么使用不同的 ID，要么使用不同的表。

不同的 ID（下一个自动增量）：

```
INSERT INTO yourTable
SELECT NULL as ID, "2012-05-01" As Date, Value
FROM yourTable
WHERE Date = "2012-04-31" 
```

不同的表（参考原始ID）

```
INSERT INTO yourTable_hist
SELECT NULL as ID, ID as old_ID, "2012-05-01" As Date, Value
FROM yourTable
WHERE Date = "2012-04-31" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:26:32.170

也许是这样的：

```
UPDATE Table1
SET Date=DATE_ADD(Date, INTERVAL 1 DAY) 
```

或者，如果要将它们插入到新表中：

```
INSERT INTO Table1
SELECT
  ID,
  DATE_ADD(Date, INTERVAL 1 DAY),
  Value
FROM
  Table2 
```

# android - 在没有设置限制的情况下放大/缩小 Android Webview

> ID：10410936
> 
> 赞同：2
> 
> 时间：2012-05-02T09:22:47.837
> 
> 标签：android, webview, svg, android-webview, zooming

在我当前的项目中，我需要我的用户能够滚动并放大大型 SVG 图像。我遇到的一个主要问题是 android WebView 类对放大和缩小的限制。有什么办法可以根据自己的喜好删除或更改这些限制？标准缩放控件似乎不支持释放这些边界。

如果我的问题不清楚，或者我需要详细说明我的问题，请不要犹豫。

问候，沃塔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:26:07.947

由于似乎没有人提出与使用反射不同的解决方案 - 我目前不知道有任何替代方案 - 我编写了一个快速代码片段，说明如何绕过放大操作的上限。

请注意，下面的代码仅适用于 ICS，可能还适用于 Honeycomb，但我目前没有平板电脑来检查内部工作是否依赖于同一个`ZoomManager`类。Gingerbread、Froyo 和 Eclair 似乎都或多或少地直接在`WebView`类中实现了缩放功能。通过下面的示例，添加一些代码以将这些操作系统也考虑在内应该相当容易。

```
// just set an Activity's content view to a single WebView for this test
WebView mWebview = new WebView(this);
setContentView(mWebview);

// retrieve the ZoomManager from the WebView
Class<?> webViewClass = mWebview.getClass();
Field mZoomManagerField = webViewClass.getDeclaredField("mZoomManager");
mZoomManagerField.setAccessible(true);
Object mZoomManagerInstance = mZoomManagerField.get(mWebview);

// modify the "default max zoom scale" value, which controls the upper limit
// and set it to something very large; e.g. Float.MAX_VALUE
Class<?> zoomManagerClass = Class.forName("android.webkit.ZoomManager");
Field mDefaultMaxZoomScaleField = zoomManagerClass.getDeclaredField("mDefaultMaxZoomScale");
mDefaultMaxZoomScaleField.setAccessible(true);
mDefaultMaxZoomScaleField.set(mZoomManagerInstance, Float.MAX_VALUE); 
```

# jquery - jQuery - 按可见性过滤，如果选中

> ID：10410937
> 
> 赞同：2
> 
> 时间：2012-05-02T09:22:50.197
> 
> 标签：jquery, forms, jquery-selectors, checkbox

我有一些使用可见性属性显示/隐藏复选框的代码。如果按钮是可见的，则在提交表单时，我需要以某种方式确保确实选中了*所有*可见的复选框。

到目前为止，这是我的尝试：

```
$("form").submit(function() {
    if ($(':checkbox:visible:not(:checked)').filter(function() {
    return $(this).css('visibility') != 'hidden';
    }).length) {
        alert('return false');
    }
}); 
```

问题似乎是过滤器后的 $(this) 是表单而不是复选框。

任何建议都会非常受欢迎，比你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:30:10.370

这个怎么样：http: [//jsfiddle.net/zerkms/WUGh3/1/](http://jsfiddle.net/zerkms/WUGh3/1/)

```
if ($('.checkbox:visible:not(:checked)').length) {
    alert('not all visible checkboxes are checked');
    return false;
} 
```

因此，您只需检查是否有任何未选中的可见复选框。如果是这样 - 返回`false`

PS：正如@bažmegakapa 所建议的那样，更有效的写作方式是：

```
if ($('.checkbox:not(:checked)').filter(':visible').length) {
    alert('not all visible checkboxes are checked');
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T09:30:31.713

在您的解决方案中，`this`指的是表单本身，并且`is()`仅在一个元素上运行，即 jQuery 集合中的第一个元素，因此您应该采用不同的方法。

在这个紧凑的情况下，您只需过滤可见的，然后过滤未检查的，如果有，则返回 false（最终返回的是`==`运算符的结果）。

```
$("form").submit(function() {
    return $('.checkbox').filter(':visible').not(':checked').length == 0;
}); 
```

[jsFiddle 演示](http://jsfiddle.net/dSzvL/)

**注意：**与@zerkms 的解决方案相比，我基本上将选择器分解了。`:visible`不是可以使用本机浏览器选择器引擎（如果可用）的选择器（请参阅[手册中的附加说明](http://api.jquery.com/visible-selector/)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:25:06.430

这一行：

```
$('.checkbox').filter(':visible') 
```

检查该类是否有任何可见的复选框`checkbox`。

然后，您检查**表单**对象以查看它是否已检查，这不是因为无法检查表单。

您可能想要执行以下操作：

```
var checkBoxes = $('.checkbox').filter(':visible');
var returnValue = true;

// Check if each visible checkbox is checked
checkBoxes.each(function(){
    if(! $(this).is(':checked'))
    {
      returnValue = false;
    }
});

return returnValue; 
```

[这是给你的工作演示](http://jsfiddle.net/jFKf9/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-02T09:24:56.583

据我所知， $(this) 指的是表单，而不是复选框。

# cqrs - 命令中的复杂类型

> ID：10410940
> 
> 赞同：0
> 
> 时间：2012-05-02T09:22:56.087
> 
> 标签：cqrs

我正在尝试在宠物项目中应用 CQRS：在我的示例中，有`Food`and `Course`。

一个课程由许多不同的食物组成。

在我的设计中，我有这些命令：

`AddFoodToCourse` `ChangeFoodQuantityInCourse`ETC...

如果我创建一个 CourseCommandHandler 我将获得一个 ICourseRepository 作为依赖项以修改课程但保持命令简单我将拥有 CourseId 和 FoodId 属性而不是 Food。

在处理程序中，我想只管理 ID 并从存储库中获取所有相关数据？

如果我理解正确，我的应用程序必须遵循以下工作流程：

使用`ReadModel`=> 创建命令并发送到总线 =>`CommandHandler`使用命令，操作`domain object`并保存对象`repositories`=>`Domain objects`引发事件并发布到总线 =>`EventHandler`使用事件并修改`ReadModel`对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:00:10.320

> 在处理程序中，我想只管理 ID 并从存储库中获取所有相关数据？

正确的。命令处理程序是注入存储库和处理命令所需的其他依赖项的地方。正如您所说，命令应该使用 ID 而不是实体本身来引用实体。这是因为这些命令旨在被序列化并跨越应用程序边界传递。您的工作流程也是正确的。[在这里](http://abdullin.com/journal/2012/3/31/anatomy-of-distributed-system-a-la-lokad.html)查看有关该主题的更深入的处理。

# c++ - Lua封装类

> ID：10410947
> 
> 赞同：0
> 
> 时间：2012-05-02T09:23:14.010
> 
> 标签：c++, lua

我实际上是在尝试创建一个类`C++`来封装对的调用`Lua`，实际上是在尝试封装一个函数以`Lua`在构造函数上加载脚本，但主要问题是当我尝试对我找不到的 Lua 脚本进行函数调用时如何存储多个返回值以及如何正确推送所有参数。

我试图找到一个函数的实现的想法，该函数使用任意数量的任何类型的参数调用 lua 函数，（该函数将推送参数并调用该函数，但我不希望动态转换例如知道是否例如，我必须“lua_pushnumber”或推送字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:43:43.550

您可以尝试在构造函数中接受某种类型的变体类的数组，并使用它们的类型来确定如何将它们泵入 Lua。另一方面，实际上只有两种类型可以在 C/C++ 和 Lua 之间互换：字符串和数字/双精度。一个可能的解决方案是传递一个字符串数组（或者一个 char** 和一个 int，如果你愿意的话），也将你的双打作为字符串传递。

然后，您可以通过在字符串“return”之后附加字符串的字符串表示或双精度来执行 loadstring() 调用。当你执行 loadstring() 推送到堆栈的函数时，lua 引擎会将你的变量（字符串或具有适当类型的双精度）推送到 lua 堆栈。你会有字符串解析双打的开销，但如果你渴望速度，我敢打赌你会纯粹用 C++ 编码:) 这种方法的优点是你实际上也可以通过这种方式传递一个函数：(即“返回函数（）打印（“你好”）；结束“）

# hibernate - jsf+hibernate：保存多对多关系

> ID：10410950
> 
> 赞同：1
> 
> 时间：2012-05-02T09:23:29.660
> 
> 标签：hibernate, session, jsf, lazy-initialization

我正在使用 Hibernate 3.2.5 和 JSF 2.1。

我有表accounts、accounts_opportunities 和opportunities，即建立了多对多关系。

我已经映射了所有的表格，即模型。

为了保存帐户，我使用以下代码：

```
public void saveAccount(Accounts current) {

    Transaction tx = session.beginTransaction();

    session.save(current);
    session.flush();

    tx.commit();

} 
```

保存 Accounts 对象时出现以下错误：

```
failed to lazily initialize a collection of role: models.Accounts.accountsOpportunitieses, no session or session was closed 
```

我是 JSF 和 Hibernate 的新手，不明白为什么 Hibernate 不会保存我的对象！

更新：

我使用以下注释更新了 Accounts 模型：

```
@ManyToMany(fetch= FetchType.EAGER)
 private Set<AccountsOpportunities> accountsOpportunitieses = new HashSet<AccountsOpportunities>(0); 
```

数据仍未保存到数据库中。我现在收到诸如会话关闭之类的错误。

# javascript - 如何在另一个用户控件 ID 中获取用户控件 ID？

> ID：10410953
> 
> 赞同：-5
> 
> 时间：2012-05-02T09:23:48.830
> 
> 标签：javascript, user-controls

如何在另一个用户控件中获取一个用户控件 ID。使用 java 脚本。请帮我。

```
 window.onload = function CheckQueryString() 
 {      
  // here i want to get user control id

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:28:43.413

如果我理解你的问题是正确的，你可以做这样的事情

```
// get a handle on your original control 
var myControl = $('[id$="<controlID>"]'); 
// and then access it's properties 
var myRuntimeId = myControl.eq(0).attr('id'); 
```

# gwt - RPC 序列化白名单条目的 GWT 程序集

> ID：10410959
> 
> 赞同：0
> 
> 时间：2012-05-02T09:24:27.823
> 
> 标签：gwt, serialization, whitelist

出于测试工程的原因，我想在 GWT RPC 序列化列表中添加一些条目。不幸的是，我没有找到关于如何构建这些条目的真实文档。到目前为止，我看到它们是这样的：

```
classname, bool, bool, bool, bool, classname(repeat), Serialization UID, Serialization UID(repeat) 
```

到目前为止，Classname 和 UID 很清楚。但是这四个布尔值有什么意义呢？我在 gwt 文档中错过了它们吗？

问候 马肯施

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:43:38.963

> 根据 SerializationPolicyLoader 类，布尔字段用于表示字段可序列化、即时可序列化、字段可反序列化、可即时反序列化。-Seshagiri

这就是我一直在寻找的答案。感谢 Seshagiri。

# c# - 如何允许在 .NET 中上传文件

> ID：10410962
> 
> 赞同：0
> 
> 时间：2012-05-02T09:24:33.127
> 
> 标签：c#, .net, file-upload, iis-7

我正在使用 JQuery 通过网站页面上的文件上传对话框将文件上传到网站根文件夹中的文件夹。当我使用 Casinni 在本地运行它时它工作正常，但当我部署到使用 IIS 7 托管该站点的服务器时失败。我需要在 IIS 中执行任何操作以允许此类文件上传吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:27:56.550

沿着这些路线的东西......

```
<%@ Page Language="C#" %>

<script runat="server">
    protected void Button1_Click(object sender, EventArgs e)
    {
        if (FileUpload1.HasFile)
            try
            {
            FileUpload1.SaveAs("C:\\Uploads\\" + 
                 FileUpload1.FileName);
            Label1.Text = "File name: " +
                 FileUpload1.PostedFile.FileName + "<br>" +
                 FileUpload1.PostedFile.ContentLength + " kb<br>" +
                 "Content type: " +
                 FileUpload1.PostedFile.ContentType;
        }
        catch (Exception ex)
        {
            Label1.Text = "ERROR: " + ex.Message.ToString();
        }
    else
    {
        Label1.Text = "You have not specified a file.";
    }
    }
</script>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Upload Files</title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
        <asp:FileUpload ID="FileUpload1" runat="server" /><br />
        <br />
        <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" 
         Text="Upload File" />&nbsp;<br />
        <br />
        <asp:Label ID="Label1" runat="server"></asp:Label></div>
    </form>
</body>
</html> 
```

获得此“技能”的另一个来源[http://msdn.microsoft.com/en-us/library/aa479405.aspx](http://msdn.microsoft.com/en-us/library/aa479405.aspx)

算了....误读了整件事。

# sql - 对选定行进行 foreach SQL 存储过程

> ID：10410963
> 
> 赞同：1
> 
> 时间：2012-05-02T09:24:38.240
> 
> 标签：sql, sql-server, stored-procedures

我有一个基本上设置好的表，所以有一个`id(UNIQUE),mapID,employe_ID,`和一个值......它看起来有点像这样

桌子

```
ID    mapID       employee_id     value
1       1         1               Brian
2       1         1               617-555-5555
3       1         2               Boston Office
4       1         2               Mary
5       3         1               617-666-6666
6       3         2               New york office 
```

我想通过这个表循环，所以“对于每个”相同的employee_id，我可以在另一个表中执行一个插入语句，在那里它设置得更干净一些。

像这样会让你大致了解我想要传达的内容。

```
Select * from table where employe_id=1
foreach(item in aboveSelect)
{
   Insert into table2
} 
```

显然这不是正确的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:28:52.437

不要对 SQL 数据进行“foreach 循环” - 将数据**用作集合**。所以在你的情况下 - 这样做：

```
INSERT INTO dbo.Table2(Col1, Col2, ...., ColN)
  SELECT Col1, Col2, ...., ColN
  FROM dbo.table 
  WHERE employee_id=1 
```

不错，快速，面向集合....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T09:28:34.260

不需要循环/光标 - 您可以将其作为单个原子语句执行：

```
INSERT INTO table2 (col1, col2, col3)
    SELECT id, mapid, employee_id FROM table1 
```

...这也比基于光标的方法更快、更清晰。除非没有其他选择，否则应避免在 SQL 中循环，因为 SQL Server 更喜欢使用基于集合的方法来解决大多数问题。

# php - mysql 将行转换为列

> ID：10410966
> 
> 赞同：0
> 
> 时间：2012-05-02T09:24:56.447
> 
> 标签：php, mysql, pivot, transpose

我需要将以下查询输出为 csv。

我可以轻松编写 php 逻辑将行从我的 group_concat 列转置为列

但是，我热衷于将尽可能多的数据部分保留在数据库中，并尽量减少 php 端的操作。

我正在尝试查询中 group_concat 下面的两列。

问题是 life_stage 列的丰度值也返回。如果除了操作 group_concat 键值之外没有其他办法，那很好，我只是想仔细检查一下。提前致谢

```
SELECT 
`tr`.`tr_id_pk` as 'RecordKey',
`t`.`tax_name` as `TaxonName`,
`tr`.`tr_date` as 'Date',
`s`.`si_name` as 'SiteName',
`tr`.`tr_grid_reference` as 'GridReference',
`tr`.`tr_is_site_grid` as 'IsSiteGrid',
`r`.`rec_name` as 'Recorder',
`r`.`rec_email` as 'RecorderEmail',
`tr`.`tr_comment` as 'RecordComment',
`tr`.`tr_last_update` as 'LastUpdated',
`tr`.`tr_form_key` as 'FormKey',
`c`.`co_name` as 'County',
`vc`.`vc_name` as 'ViceCounty',
`h`.`hab_name` as 'Habitat',
GROUP_CONCAT(DISTINCT CONCAT_WS('=', `ra`.`ra_name`, `rad`.`rad_value`)) as 'RecordAttributeKeyValuePairs',
`rad`.`rad_value` AS `abundance`,
`rad`.`rad_value` AS `life_stage`
FROM
`taxon_record`as `tr`
    INNER JOIN
`taxon`as `t` ON `tr`.`tax_id_fk` = `t`.`tax_id_pk`
    INNER JOIN
`recorder`as `r` ON `tr`.`rec_id_fk` = `r`.`rec_id_pk`
    INNER JOIN
`site`as `s` ON `tr`.`si_id_fk` = `s`.`si_id_pk`
    LEFT JOIN
`county`as `c` ON `tr`.`co_id_fk` = `c`.`co_id_pk`
    LEFT JOIN
`vice_county`as `vc` ON `tr`.`vc_id_fk` = `vc`.`vc_id_pk`
    LEFT JOIN
`habitat`as `h` ON `tr`.`hab_id_fk` = `h`.`hab_id_pk`
    LEFT JOIN
(`record_attribute_data`as `rad`
INNER JOIN `record_attribute`as `ra` ON (`rad`.`ra_id_fk` = `ra`.`ra_id_pk`)) ON (`tr`.`tr_id_pk` = `rad`.`tr_id_fk`)
WHERE
`r`.`rec_email` = 'some_email@somewhere.com'
GROUP BY `tr`.`tr_id_pk`; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:17:15.520

问题是您以不同的名称两次获取同一列吗？：

```
`rad`.`rad_value` AS `abundance`,
`rad`.`rad_value` AS `life_stage` 
```

看起来你总是会以这种方式获得丰富和 life_stage 相同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:17:24.567

您希望执行的操作称为“透视”您的数据，并且某些其他 RDBMS 对此具有本机支持，但 MySQL 不支持（设计上，开发人员认为此类操作属于表示层）。

但是，正如您所暗示的，您可以构建一个相当糟糕的 MySQL 查询来手动执行旋转操作（需要为每个输出列将属性表连接到查询一次）：

```
SELECT tr.tr_id_pk, abundance, life_stage -- etc.
  FROM taxon_record AS tr
  LEFT JOIN (
    SELECT rad.tr_id_fk, rad.rad_value AS abundance
    FROM
      record_attribute_data ra JOIN record_attribute rad
        ON rad.ra_id_fk = ra.ra_id_pk
    WHERE ra.ra_name = 'abundance'
  ) AS tAbundance ON tAbundance.tr_id_fk = tr.tr_id_pk
  LEFT JOIN (
    SELECT rad.tr_id_fk, rad.rad_value AS life_stage
    FROM
      record_attribute_data ra JOIN record_attribute rad
        ON rad.ra_id_fk = ra.ra_id_pk
    WHERE ra.ra_name = 'life_stage'
  ) AS tLife_Stage ON tLife_Stage.tr_id_fk = tr.tr_id_pk
  -- etc. 
```

如果您选择走这条路，您可以通过使用 PHP 中的循环构造或 MySQL 中的准备好的语句生成此查询，从而使您的生活稍微轻松一些。

# hibernate - 是否可以将休眠实体映射为id？

> ID：10410972
> 
> 赞同：2
> 
> 时间：2012-05-02T09:25:20.897
> 
> 标签：hibernate, jpa

我有 ID APK 的实体 A 有两个长字段，即其他实体的 ID。因此，我在对实体 A 执行添加/删除操作时发现 Hibernate 缓存未命中，为了避免这种情况，我想使用实体而不是 long。

```
@Entity
@AccessType("field")
@Table(name = "A")
@XStreamAlias("A")
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class A {

    @EmbeddedId
    @AttributeOverrides({
            @AttributeOverride(name = "x", column = @Column(name = "X_ID")),
            @AttributeOverride(name = "y", column = @Column(name = "Y_ID"))})
    private APK id;
   ...................
}

@AccessType("field")
@Embeddable
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class APK implements Serializable {
    protected long x= 0;//this is id of another entity
    protected long y= 0;//this is id of another entity    
    ......
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:51:59.893

是的

```
@Entity
@AccessType("field")
@Table(name = "A")
@XStreamAlias("A")
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class A implements SerializableObject {

    @Id
    @JoinColumn(name = "X_ID", nullable = false)
    @ManyToOne(targetEntity = X.class)
    protected X x;

    @Id
    @JoinColumn(name = "Y_ID", nullable = false)
    @ManyToOne(targetEntity = Y.class)
    protected y;
...........
} 
```

PSbut rhus 没有解决缓存未命中

# iphone - 如何在一个项目中运行游戏或应用程序--iPhone/iPad/iOS

> ID：10410973
> 
> 赞同：0
> 
> 时间：2012-05-02T09:25:23.407
> 
> 标签：iphone, ios, xcode

我想在我当前的项目中添加一个游戏，游戏和我当前的项目是两个独立的项目，那么如何将它们合并为一个？

我想到了两种可能的解决方案：

1.  合并源代码。但我不想这样做，因为它很麻烦而且很麻烦。
2.  把游戏打包成`.app`or `.ipa` or `.a`or别的东西，然后把这个游戏包导入project，但是不知道怎么用Objective-C代码运行。

实际上，下面将介绍第二种方法。

```
NSWorkspace *workspacce = [NSWorkspace sharedWorkspace]; 
NSString * appPath = [[workspacce activeApplication] objectForKey:@"NSApplicationPath"];
appPath = [appPath stringByDeletingLastPathComponent]; 
appPath = [appPath stringByAppendingPathComponent:@"/CSVEdit.app"];
[workspacce launchApplication:appPath];
[[NSWorkspace sharedWorkspace] launchApplication:@"a`enter code here`ppName"] ; 
```

有没有人有更有效或更简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:34:50.557

我认为合并是唯一的选择。因为它不允许启动另一个应用程序。

```
Apps that install or launch other executable code will be rejected 
```

Chapter 2 功能点 2.8[条款](http://images.worldofapple.com/appstoreguidelines_9910.pdf)中写的。

# javascript - 将 jQuery 加载到 iframe 中并在加载时收到通知

> ID：10410978
> 
> 赞同：1
> 
> 时间：2012-05-02T09:25:29.680
> 
> 标签：javascript, jquery, html, iframe

我有一个动态加载 HTML+JavaScript 的 iframe。如何将 jQuery 加载到该 iframe 中并获得某种回调以说明它已准备好？我可以用这段代码加载它，但是没有办法告诉它什么时候完成，一定有更好的方法吗？

```
var content = myFrame[0].contentWindow || jqPreviewFrame[0].contentDocument;
var doc = content.document || content;
var head = doc.head;
var jQueryScript = doc.createElement("script");
jQueryScript.type = "text/javascript";
jQueryScript.src = "http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js";
head.appendChild(jQueryScript); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:39:59.343

检查[这个问题](https://stackoverflow.com/questions/4595055/javascript-onload-event-how-to-tell-if-script-is-already-loaded)。

我在项目中使用的另一种方法是通过`XMLHttpRequest`. 传递 URL 并等待其`onreadystatechange`事件。代码成功到达后，使用`eval()`方法执行它。看看它是否也适用于你的情况。

# facebook - Facebook - Twitter 认证 - 信息合并

> ID：10410981
> 
> 赞同：1
> 
> 时间：2012-05-02T09:25:38.827
> 
> 标签：facebook, authentication, mobile, architecture, twitter

我正在构建一个可以匿名使用的服务，但是用户可以在他的 Facebook 和/或 Twitter 个人资料上分享内容。在授权应用程序后，我希望存储有关用户的基本信息并将其链接到他们正在共享的内容。

通常服务需要在使用前进行身份验证，这解决了这个问题，但是在我的情况下，身份验证出现在最后阶段，它分为 4 个路径：

1.  [脸书+推特]
2.  [仅脸书]
3.  [仅推特]
4.  [没有]

但是，执行上述操作会在数据库中创建冗余数据，即我将 Facebook 信息和 Twitter 信息放在单独的表中，它们之间没有链接，也与帖子没有关系。

*   防止这种情况的最佳方法是什么？解决方案是在数据建模级别上吗？还是在代码级别？或两者？

*   以前有这样做过吗？

我已经创建了一个如何合并帐户数据的流程图，但是这个过程可能会在数据库级别上产生开销，因为它需要使用非常长的 FacebookID \ TwitterID 搜索条目。

*   如果需要额外信息，请在评论中说明。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:07:50.403

我处理这个问题的方法是将用户*身份*的概念与您的应用程序使用的*身份验证概念分开。*例如，在数据模型级别，让 Users 表存储基本用户信息，并让 Authentications 表存储与特定身份验证提供程序关联的用户凭据/令牌。在代码级别，如果您打算坚持使用第三方身份验证，我建议您考虑构建一个可以保护您的应用程序不必直接与各种 OAuth 提供程序打交道的层。

在 Ruby/Rails 世界中，这是通过管理用户身份的设计（它还允许具有内置的用户名/密码身份验证，但听起来您对此不感兴趣）和提供身份验证的 OmniAuth 的[组合](https://github.com/plataformatec/devise)[来](https://github.com/intridea/omniauth)实现的多个提供商。

此处提供了包含两者的示例应用程序：[Devise + OmniAuth](https://github.com/ryanatwork/devise-omniauth)。最后，关于这个主题的 RailsCast 在这里：[OmniAuth Part 1](http://railscasts.com/episodes/235-omniauth-part-1)

我意识到您可能不在 Ruby/Rails 中工作，但这些材料可能会为您尝试实现的架构提供灵感。

# django-admin - 默认 django-admin 列表过滤器

> ID：10410982
> 
> 赞同：1
> 
> 时间：2012-05-02T09:25:48.493
> 
> 标签：django-admin

我的问题只是这个线程 [Question]http://stackoverflow.com/questions/851636/default-filter-in-django-admin 的扩展。

```
from myproject.myapp.mymodels import fieldC

class Poll(models.Model):

    fieldA = models.CharField(max_length=80, choices=CHOICES.MyCHOICES) 
    fieldB = models.ForeignKey(fieldC)

admin.py

list_display = ('fieldB__fieldc1')

Now my list filter shows four criteria All, A ,B ,C  . 
```

我想要的是如果超级用户已登录，过滤器应该显示所有四个条件 All、A、B、C，如果用户不是超级用户，过滤器应该只显示 All、A、B。

我怎样才能做到这一点？这是我实际的 admin.py

```
def changelist_view(self, request, extra_context=None):

        referer = request.META.get('HTTP_REFERER', '')
        test = referer.split(request.META['PATH_INFO'])
        if test[-1] and not test[-1].startswith('?'):
            if not request.GET.has_key('patient__patient_type__exact'):

                q = request.GET.copy()
                q['patient__patient_type__exact'] = 'Real'
                request.GET = q
                request.META['QUERY_STRING'] = request.GET.urlencode()
                if not request.user.is_superuser:
                    q['patient__patient_type__exact'] = 'Real'
    return super(VisitAdmin, self).changelist_view(request, extra_context)

Thanks in advance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:50:20.533

我认为 Django 1.4 中的新 FilterSpec API 可以为您提供您所需要的。[查看](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)list_filter 上的文档。在 1.4 中，您现在可以创建子类的自定义列表过滤器，`django.contrib.admin.SimpleListFilter`并赋予您编写自定义查找和查询集代码的能力，并且由于传入请求，您可以使用 is_superuser 执行简单的条件。

```
if request.user.is_superuser:
    # pass one set of lookups
else:
    # pass a different set 
```

仔细阅读文档中的示例代码，我认为一切都会很清楚。

# stored-procedures - DB2 存储过程：为游标动态构建 Select 语句

> ID：10410987
> 
> 赞同：2
> 
> 时间：2012-05-02T09:26:05.170
> 
> 标签：stored-procedures, db2

我对存储过程相当陌生。我天真地认为我可以建立一个如下的选择语句。我做不到，你们中的一些人会对我的想法嗤之以鼻。

一个人如何做我想做的事？

提前致谢。

```
CREATE PROCEDURE GET_CUSTOMER_FOR_BORROWER_LETTER (

    IN APPLICATION_ID INTEGER,
    IN GET_GUARANTOR INTEGER,
    IN GET_PREFERRED_CONTACT INTEGER
    )

DYNAMIC RESULT SETS 1
READS SQL DATA

P1:BEGIN
    DECLARE selectStmt VARCHAR(800);
    DECLARE selectStmtPreferred VARCHAR(400);
    DECLARE selectStmtApplicants VARCHAR(400);
    DECLARE selectStmtGuarantor VARCHAR(400);

    DECLARE cursor1 CURSOR WITH RETURN FOR
    selectStmt -- will define this later, conditionally (babe in the woods :) )
    OPEN cursor1;

    set selectStmtPreferred = 'select "preferred applicant" as recipient_type, app.APPLICATION_ID, cust.KEY from application app, customer cust, application_detail appd where app.application_id = 407634 and app.APPLICATION_ID = appd.APPLICATION_ID  and appd.PREFERRED_CONTACT_ID = cust.KEY';

    set selectStmtApplicants = 'select "applicant" as recipient_type, app.APPLICATION_ID, cust.KEY from application app, applicant applc, customer cust where app.application_id = 407634 and applc.APPLICATION_ID = app.APPLICATION_ID and applc.CUST_ID = cust.CUST_ID';

    set selectStmtGuarantor = ' union select "guarantor" as recipient_type ,app.APPLICATION_ID, cust.KEY from application app, application_guarantor appg, customer cust where app.application_id = 407634 and appg.APPLICATION_ID = app.APPLICATION_ID and appg.CUST_ID = cust.CUST_ID';

    IF GET_PREFERRED_CONTACT = 1 THEN

        IF GET_GUARANTOR = 1 THEN 
            SET selectStmt = concat (selectStmtPreferred,selectStmtGuarantor);
        ELSE 
            SET selectStmt = selectStmtPreferred;
        END IF;
    ELSE 
        IF GET_GUARANTOR = 1 THEN 
            SET selectStmt = concat (selectStmtApplicants,selectStmtGuarantor);
        ELSE 
            SET selectStmt = selectStmtApplicants;
        END IF;
    END IF;
selectStmt = concat (selectStmtPreferred,";");

END P1@ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T18:24:28.303

下次您需要构建一些动态 SQL 语句时试试这个。

```
DECLARE SELECT_STATEMENT VARCHAR(8000);

DECLARE cursor1 CURSOR WITH RETURN FOR SQL_STATEMENT;

...build dynamic sql here...

PREPARE SQL_STATEMENT FROM SELECT_STATEMENT;

OPEN cursor1; 
```

需要明确的是，SQL_STATEMENT 是您想要的任何名称。只要确保它在 CURSOR 声明和 PREPARE 语句中是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:50:08.910

我解决了这个问题。这很丑陋，但它已经解决了。

```
P1:BEGIN

    DECLARE preferredWithGuarantor CURSOR WITH RETURN FOR
            select 'preferred applicant' as recipient_type, app.APPLICATION_ID, cust.KEY from application app, customer cust, application_detail appd where app.application_id = 407634 and app.APPLICATION_ID = appd.APPLICATION_ID  and appd.PREFERRED_CONTACT_ID = cust.KEY union select 'guarantor' as recipient_type ,app.APPLICATION_ID, cust.KEY from application app, application_guarantor appg, customer cust where app.application_id = 407634 and appg.APPLICATION_ID = app.APPLICATION_ID and appg.CUST_ID = cust.CUST_ID;

    DECLARE preferred CURSOR WITH RETURN FOR
            select 'preferred applicant' as recipient_type, app.APPLICATION_ID, cust.KEY from application app, customer cust, application_detail appd where app.application_id = 407634 and app.APPLICATION_ID = appd.APPLICATION_ID  and appd.PREFERRED_CONTACT_ID = cust.KEY;

    DECLARE applicantWithGuarantor CURSOR WITH RETURN FOR
            select 'applicant' as recipient_type, app.APPLICATION_ID, cust.KEY from application app, applicant applc, customer cust where app.application_id = 407634 and applc.APPLICATION_ID = app.APPLICATION_ID and applc.CUST_ID = cust.CUST_ID union select 'guarantor' as recipient_type ,app.APPLICATION_ID, cust.KEY from application app, application_guarantor appg, customer cust where app.application_id = 407634 and appg.APPLICATION_ID = app.APPLICATION_ID and appg.CUST_ID = cust.CUST_ID;

    DECLARE applicant CURSOR WITH RETURN FOR
            select 'applicant' as recipient_type, app.APPLICATION_ID, cust.KEY from application app, applicant applc, customer cust where app.application_id = 407634 and applc.APPLICATION_ID = app.APPLICATION_ID and applc.CUST_ID = cust.CUST_ID;

    IF GET_PREFERRED_CONTACT = 1 THEN
        IF GET_GUARANTOR = 1 THEN 
            open preferredWithGuarantor;
        ELSE 
            open preferred;
        END IF;
    ELSE 
        IF GET_GUARANTOR = 1 THEN 
            open applicantWithGuarantor;
        ELSE
            open applicant;
        END IF;
    END IF;

END P1@ 
```

# eclipse - Tomcat 7.0.25 不是从 Eclipse Indigo 开始的

> ID：10410988
> 
> 赞同：0
> 
> 时间：2012-05-02T09:26:05.597
> 
> 标签：eclipse, tomcat, eclipse-plugin, tomcat7

我已经用 eclipse indigo 配置了 Tomcat 7.0.25。当我从 eclipse 启动 tomcat 时，出现以下错误

```
java.lang.ClassNotFoundException: org.apache.catalina.startup.Bootstrap 
```

我也收到一个日志记录错误，但我将 tomcat-juli.jar 添加到类路径中。但是我无法解决上述错误。虽然我已经验证 catalina.jar 存在于 TOMCAT_HOME/bin 文件夹中，但似乎在启动 tomcat 时没有在类路径中选择它。我正在使用 JDK 1.6.0_29 。

任何输入？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:59:44.677

听起来您的 7.0.25 安装已损坏。无需将 catalina.jar 添加到 bin 目录中。bin 中唯一需要的 JAR 是 bootstrap.jar、commons-daemon.jar 和 tomcat-juli.jar

# google-chrome - 如何修复 Chrome 中 unbeforeunload 的错误？

> ID：10410998
> 
> 赞同：1
> 
> 时间：2012-05-02T09:26:40.133
> 
> 标签：google-chrome, onbeforeunload

我有以下代码：

```
window.onbeforeunload = function() {

              $.post(
                   'script/ratings.php', 
                    {
                    data: dataToServer,
                    slider: slider_position_value,
                    article: ARTICLE_NAME
                    },
                      function(data) {

                   });

 }; 
```

在 IE 和 Mozilla 中完美运行。当然，我知道 Chrome 中由于此事件没有出现的错误。我需要配方来捕捉这个事件并发出 POST 请求。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:29:10.307

该`beforeunload`事件在 Chrome中*确实有效。*但是，在页面离开时，所有请求，包括 AJAX，都会被取消。

要使您当前的代码正常工作，请通过添加`async:false`到`jQuery.ajax`设置中来使用同步请求。**这会阻止 UI 直到收到响应**，不建议这样做。