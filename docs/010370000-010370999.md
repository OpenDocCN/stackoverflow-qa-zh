# StackOverflow 问答 10370000-10370999

# java - Phonegap 从 Java 代码中获取本地存储值？

> ID：10370005
> 
> 赞同：6
> 
> 时间：2012-04-29T05:42:53.527
> 
> 标签：java, android, mobile, cordova, phonegap-plugins

我已经使用 localstorage 使用[phonegap](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)在客户端保存了数据，现在我想使用 java 代码访问该保存的数据。

这可能吗？我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:16:05.393

为什么不制作一个原生插件，将值存储在 android 共享首选项中，并在每次在本地存储中添加/删除对象时调用它。

因此，在 javascript 中，您不直接调用 localstorage 函数，而是一个包装器，它 1) 操作 localstorage，然后 2) 调用插件将其存储在共享首选项中。

当然，这涉及到每个对象的双重副本，因此您也必须处理这个问题，但如果对本地存储的修改总是从 javascript 开始，这应该不是问题。

# android - ANDROID：在子活动中使用父活动中的运行线程

> ID：10370011
> 
> 赞同：1
> 
> 时间：2012-04-29T05:44:07.940
> 
> 标签：android, multithreading, sockets, android-activity, bluetooth

我正在将蓝牙功能添加到我已经在市场上的免费 Android 游戏“先行者”中。我在 Main 活动中嵌入的线程中正确设置了套接字。我为我的 ConnectThread（扩展线程）创建了另一个 java 文件，它将在手机之间发送玩家的坐标。我查看了 Service、AysncTask 和 Handler。除了处理程序之外，我认为没有任何人会帮助我更多。

以下任何一项都将允许此工作。

如何在子活动中使用我在父活动（在嵌入式线程中创建）中连接的蓝牙套接字？

如果未在子活动中初始化，如何将数据从 ConnectThread 发送到子活动？基本上我怎样才能从线程中调用子活动中的公共方法？

有没有办法将我在父活动中连接的套接字传递给子活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:13:15.733

将静态（类）变量放在父活动中或（更好）在应用程序类中（为此创建您自己的应用程序类，该应用程序类派生自 Android 应用程序类并记住将其放在清单中`<application android:name="...">`）。将套接字分配给这个静态变量。子活动可以从那里拿起它。因为它是静态的，所以当您的活动被破坏时，垃圾收集器不会将其删除，因此请确保您关闭它并在完成后将变量分配为 null。

# cocoa - 当我从 osx 中的代码中选择一行时，NSTable 会自动滚动

> ID：10370012
> 
> 赞同：0
> 
> 时间：2012-04-29T05:44:08.000
> 
> 标签：cocoa, nstableview

我有一个有很多行的表（意味着我应该滚动查看最后一行），我从下面的代码中选择行，我想编写代码使表自动滚动并向我显示选定的行。

```
int currentIndex=..;
NSIndexSet *index=[NSIndexSet indexSetWithIndex:currentIndex];
[self.tbl selectRowIndexes:index byExtendingSelection:YES]; 
```

我使用`displayRect`如下表但不起作用

```
[self.tbl displayRect:NSMakeRect(0, currentIndex*30, self.tbl.frame.size.width, self.tbl.frame.size.height)]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T06:09:50.993

尝试`scrollRowToVisible: row`

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T06:09:07.773

你应该使用 NSTableView 方法，scrollRowToVisible：

# php - 如何在 cpanel 中设置 cron 作业

> ID：10370015
> 
> 赞同：4
> 
> 时间：2012-04-29T05:44:51.060
> 
> 标签：php, cron, cpanel

我正在使用 X10 托管

服务器是[https://boru.x10hosting.com](https://boru.x10hosting.com)

在我给出的添加 cron 工作中

**命令** `/usr/bin/php -q /home/mohanphp/www/quote_bot/sms_cron.php >>/home/mohanphp/www/quote_bot/log/cron_log.txt 2>&1`

我试过

```
/usr/bin/php -q /home/mohanphp/www/quote_bot/sms_cron.php >/dev/null 2>&1

/usr/bin/php -f /home/mohanphp/www/quote_bot/sms_cron.php >/dev/null 2>&1 
```

我每 5 分钟设置一次 cron。

请帮助我在命令中做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-07T10:44:09.560

这是我的一些尝试:)

在我的情况下，以下工作正常：

```
wget -O /dev/null http://example.com/cron/my-cron.php >/dev/null 
```

以下内容也可以正常工作（我认为如果我们在 URL 中有“https://”会更好）：

```
/usr/bin/php -q /home/user/public_html/cron/my-cron.php >/dev/null 
```

另一个：

```
curl -s http://example.com/cron/my-cron.php >/dev/null 2>&1 
```

如果您不希望收到通知您特定 cron 作业的电子邮件，请将以下行添加到命令中：`>/dev/null 2>&1`

参考：[http ://docs.cpanel.net/twiki/bin/view/AllDocumentation/CpanelDocs/CronJobs](http://docs.cpanel.net/twiki/bin/view/AllDocumentation/CpanelDocs/CronJobs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T00:17:06.660

我正在使用这个：

`/usr/bin/wget -q -O /dev/null "http://www.mydomain.com/myscript.php" > /dev/null 2>&1`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-08T14:22:58.613

我在 cPanel 中使用它，工作完美

```
wget http://site_name/file_location.php 
```

# php - 具有空数据集的 foreach

> ID：10370026
> 
> 赞同：5
> 
> 时间：2012-04-29T05:46:32.133
> 
> 标签：php, cakephp, foreach

我正在尝试使用 foreach 语句来显示列表 ul>li。如果列表没有元素，我该如何处理该标准。

```
 <ul>
    <?php foreach($person['CastsMovie'] as $cast): ?>
      <li><?php echo $this->Html->link($cast['Movie']['name'], array('controller' => 'movies', 'action' => 'view', $cast['movie_id'],  'admin' => true), array('escape' => false)); ?> (<?php echo date("Y", strtotime($cast['Movie']['MovieDetail']['release_date'])); ?>)</li>
      <?php endforeach; ?>
    </ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T05:48:45.027

检查是否为[空](http://php.net/manual/en/function.empty.php)：

```
if ( !empty( $person ) ) {
  foreach ( $person as $cast ) {
    echo "<li>$cast</li>";
  }
} else {
  echo "<li>This play has no cast members.</li>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:58:20.143

实际上，您需要用支票包围 UL。否则你会得到一个不必要的空“ul”标签：

```
<?php if (!empty($person['CastsMovie'])) { ?>
<ul>
<?php foreach($person['CastsMovie'] as $cast) { ?>
  <li><?php echo $this->Html->link($cast['Movie']['name'], array('controller' => 'movies', 'action' => 'view', $cast['movie_id'],  'admin' => true), array('escape' => false)); ?> (<?php echo date("Y", strtotime($cast['Movie']['MovieDetail']['release_date'])); ?>)</li>
  <?php } ?>
</ul>
<?php } ?> 
```

这意味着：您检查是否有任何列表元素（在您的情况下将此人 CastsMovies），如果有，则显示列表（ul + li）。如果不是，完整的列表将被省略（不仅仅是子 li 元素）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T10:17:58.013

首先，在您使用的任何“控制器”中，*准备*您的数据，使其适合模板。

```
foreach($person['CastsMovie'] as $key => $cast) {
  $cast['html_link'] = $this->Html->link($cast['Movie']['name'], 
                                         array('controller' => 'movies', 
                                               'action' => 'view', 
                                               $cast['movie_id'], 
                                               'admin' => true), 
                                         array('escape' => false)
                               ); 
  $cast['html_date'] = date("Y", strtotime($cast['Movie']['MovieDetail']['release_date']));
  $person['CastsMovie'][$key] = $cast;
} 
```

然后使您的模板清晰易读

```
<?php if($person['CastsMovie']: ?>
<ul>
<?php     foreach($person['CastsMovie'] as $cast): ?>
  <li>
    <?=$cast['html_link']?> (<?=$cast['html_date']?>)
  </li>
<?php     endforeach ?>
</ul>
<?php endif ?> 
```

# java - Java 数组被覆盖

> ID：10370027
> 
> 赞同：3
> 
> 时间：2012-04-29T05:46:33.833
> 
> 标签：java, arrays, jpanel, jtextfield

嘿，我在这里有点新，所以如果我在帖子中搞砸了，我深表歉意。无论如何，我必须处理数组的问题，我要做的基本上是使用*String[]*数组来填充我的表单并将其显示在屏幕上，然后让**getForm()**函数返回一个**String[]**带有表单的标题和**text[i]**中的信息。这一切正常，直到我使用添加的按钮调用**getForm()**函数并更改为不同的表单（附加到 ListListener 的**createForm()**）并且所有标签都显示为**getForm()中返回的任何内容**功能。我很确定这与我使用数组的方式有关，但我认为在我选择另一个通过**createForm()**函数再次重置数组的列表项后它们会恢复正常，所以我'不知道发生了什么事。

谢谢

我还附上了我所指的截图。

[http://www.majhost.com/gallery/adc90/afsd/error.png](http://www.majhost.com/gallery/adc90/afsd/error.png)

```
class Form extends JPanel
{
    //Arrays for the forms
    private String[] com = {"Communication","ICAO","Type","Frequency"};
    private String[] fuel = {"Fuel","ICAO","Type"};
    private String[] runway = {"Runway","ICAO","Number","Type","Length"};
    private String[] airplane = {"Airplane","Make","Model","Type","Fuel Capacity", "Fuel Burn Rate", "Air Speed"};
    private String[] airport = {"Airplane","ICAO","Name","Longitude","Latitude","crFreq","crType", "Fuel Type"};

    //Declare variables
    private JTextField[] text;
    private String[] formReturn;
    private String[] formArray;
    private JButton submit,clear;

    public Form()
    {
        createForm("Airplane");
    }

    public void createForm(String choice)
    {
        removeAll();
        if(choice.equals("Communication"))
        {
            formArray = com;
        }
        else if(choice.equals("Fuel"))
        {
            formArray = fuel;
        }
        else if(choice.equals("Airplane"))
        {
            formArray = airplane;
        }
        else if(choice.equals("Airport"))
        {
            formArray = airport;
        }
        else if(choice.equals("Runway"))
        {
            formArray = runway;
        }

        int l = formArray.length + 1;
        text = new JTextField[l];

        //Layout info
        GridLayout grid = new GridLayout(l,2);
        grid.setHgap(0);
        setLayout(grid);
        //Set label
        add(new JLabel(formArray[0]));
        add(new JLabel(""));
        for(int i = 1; i < formArray.length; ++i)
        {
            add(new JLabel(formArray[i]));
            add(text[i] = new JTextField(20));
        }

        //Add in the buttons and the actionlisteners
        submit = new JButton("Create");
        clear = new JButton("Delete");
        add(clear);
            clear.addActionListener(new Button());
        add(submit);
            submit.addActionListener(new Button());
        updateUI();
    }
    //Get form info
    //This works so far
    public String[] getForm()
    {
        formReturn = formArray;
        formReturn[0] = formArray[0];
        for(int i = 1; i < formReturn.length; i++)
            formReturn[i] = text[i].getText();
        return formReturn;
    }
    //Clear form
    public void clearForm()
    {
        for(int i = 1; i < formArray.length; i++)
            text[i].setText("");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T06:04:55.707

```
public String[] getForm()
{
    formReturn = formArray; /* (0) */
    formReturn[0] = formArray[0];
    for(int i = 1; i < formReturn.length; i++)
        formReturn[i] = text[i].getText(); /* (1) */
    return formReturn;
} 
```

查看第 (1) 行：您修改了指向标签文本的 formReturn 数组。formReturn -> formArray -> com.

要修复它，只需在 (0) 处创建新的字符串数组：

```
formReturn = new String[formArray.length]; 
```

# selenium - 在属性 href 中查找所有带有特定字符串的“A”标签？

> ID：10370030
> 
> 赞同：1
> 
> 时间：2012-04-29T05:47:17.227
> 
> 标签：selenium, href

```
 driver.FindElement(By.Name("zipcode")).Clear();
            driver.FindElement(By.Name("zipcode")).SendKeys(zipcode);
            driver.FindElement(By.Name("Go")).Click();

            driver.FindElements(By.TagName("A").  //<---- ????????? 
```

我有一些我开始的 Selenium API 代码。我的目标是在属性 href 中使用字符串“alertsepy”和刺痛“sevendwarves”获​​取所有“A”标签，并将所有这些元素返回到一个数组中，以便我可以做一些进一步的处理。我开始了代码，但我真的不太确定如何一直到那里。有谁知道如何使用 Selenium 进行此类查询。

亲切的问候！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T08:57:43.340

您应该使用 css 选择器：

```
IList<IWebElement> elements = driver.findElements(By.cssSelector("a[href*=alertsepy],a[href*=sevendwarves]") 
```

此查询将返回具有包含*alertsepy***或***Sevendwarves***或**两个字符串`a`的属性的节点：`href`

 ******```
<a href="alertsepy.html" > </a>
<a href="sevendwarves.html" > </a>
<a href="http://sevendwarves.org/alertsepy.html" > </a> 
```

或者您可以使用：

```
IList<IWebElement> elements = driver.findElements(By.cssSelector("a[href*=alertsepy][href*=sevendwarves]") 
```

此查询将返回具有包含*alertsepy***和***Sevendwarves*字符串属性的`a`节点：`href`

 ****```
<a href="http://sevendwarves.org/alertsepy.html" > </a> 
```

有关普遍可用的 css 选择器的列表，请参阅[w3c css 选择器](http://www.w3.org/TR/CSS/#selectors)。有关 Selenium 查询类型中可用的列表，请参阅[定位 UI 元素](http://seleniumhq.org/docs/03_webdriver.html#locating-ui-elements-webelements)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T09:50:51.547

```
List<WebElement> anchortaglist = driver.find Elements(By.Tag Name('a'); 
```**********

# java - 方法签名中的“易失性”？

> ID：10370033
> 
> 赞同：6
> 
> 时间：2012-04-29T05:47:57.390
> 
> 标签：java, methods, volatile

这个很奇怪。我有以下代码：

```
class A
{   
    protected A clone() throws CloneNotSupportedException
    {
        return (A) super.clone();       
    }
} 
```

当我通过“showmycode.com”反编译它的字节码时，它向我展示了以下代码：

```
class A
{

    A()
    {
    }

    protected A clone()
    throws clonenotsupportedexception
    {
        return (A)super.clone();
    }

    protected volatile object clone()
    throws clonenotsupportedexception
    {
        return clone();
    }
} 
```

在第二个“克隆”方法中，方法返回类型易变意味着什么？（这段代码是通过 Eclipse 的默认 JDK 1.6 编译器编译的）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-13T22:15:21.783

这个答案已经在问题[Why make a method volatile in java?](https://stackoverflow.com/questions/6651867/why-make-a-method-volatile-in-java/6674083#6674083) 但这里有更多信息。

当您重载方法时（可能只有超类中的泛型方法），该方法被标记为[“桥接方法”](http://stas-blogspot.blogspot.com/2010/03/java-bridge-methods-explained.html)。来自`java.lang.reflect.Modifier`：

```
static final int BRIDGE    = 0x00000040; 
```

不幸的是，这与用于将字段标记为的位相同`volatile`：

```
public static final int VOLATILE         = 0x00000040; 
```

如果您在该方法上打印修饰符，您将看到如下内容：

```
public volatile 
```

这是`Modifiers.toString(int)`方法中的一个限制，不知道它是字段还是方法。

```
public static String toString(int mod) {
    StringBuffer sb = new StringBuffer();
    ...
    if ((mod & VOLATILE) != 0)  sb.append("volatile ");
    // no mention of BRIDGE here
    ...
    return sb.toString().substring(0, len-1);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T06:38:48.087

这并不意味着什么。这是反编译器中的一个错误。故事结局。

（这个错误可能与类文件格式中使用的某些标志位“重载”有关，这意味着在类、字段或方法的上下文中不同的东西。我也隐约记得有一些“新用途” “在最近的 JVM 规范修订中。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T08:21:10.330

字段和方法的修饰符掩码相似但不完全相同。反编译器最有可能使用`toString`这里的方法

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/reflect/Modifier.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/reflect/Modifier.java)

但它没有做的是处理所有位

```
// Bits not (yet) exposed in the public API either because they
// have different meanings for fields and methods and there is no
// way to distinguish between the two in this class, or because
// they are not Java programming language keywords 
```

它不处理的是可以表示`synthetic`和`bridge`识别编译器生成代码的位。

如果`volatile`在这里根本没有任何意义，则可能意味着即使该方法没有做任何事情，也不要删除该方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T05:57:48.430

这是您的反编译器中的一个错误。

`volatile`只是字段的有效修饰符。

我建议你阅读[这篇](http://jeremymanson.blogspot.de/2008/11/what-volatile-means-in-java.html)文章。

# php - fwrite，意外的语法错误 T_BOOLEAN_AND

> ID：10370036
> 
> 赞同：0
> 
> 时间：2012-04-29T05:48:43.397
> 
> 标签：php, syntax-error

我正在写入一个 .csv 文件，在我的 php 中，我有以下行导致上述错误：

```
if ($playerH1 == "Choose Player") && strlen($highlightsplayerH1) > 0){} else {fwrite($fs,$playerH1." - ".$ph1."\n");} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:52:32.973

您在`(`if 语句的开头缺少一个

# mysql - MySQL 立陶宛语排序规则

> ID：10370039
> 
> 赞同：0
> 
> 时间：2012-04-29T05:49:25.427
> 
> 标签：mysql, utf-8, collation

当我尝试使用 php 脚本返回值时，我得到空值。空值是带有立陶宛字符的变量。问题是我在出现立陶宛字符的表变量上使用了 utf-8_lithuanian_ci。难道我做错了什么？MySQL 连接的排序规则也设置为 utf-8_lithuanian_ci

**编辑：**

```
<?php
mysql_connect("localhost","*********","*******");
mysql_select_db("******");
$q=mysql_query("SELECT * FROM mdl_user ");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output));
mysql_close();
?> 
```

# ruby - 用 Ruby 打印一个可读的矩阵

> ID：10370040
> 
> 赞同：11
> 
> 时间：2012-04-29T05:49:53.007
> 
> 标签：ruby, matrix

是否有在 Ruby 中打印可读矩阵的内置方法？

例如

```
require 'matrix'
m1 = Matrix[[1,2], [3,4]]
print m1 
```

并让它显示

```
=> 1 2
   3 4 
```

在 REPL 中，而不是：

```
=> Matrix[[1,2][3,4]] 
```

[用于矩阵](http://ruby-doc.org/stdlib-1.9.2/libdoc/matrix/rdoc/Matrix.html)的 Ruby Docs使它看起来应该发生，但这不是我所看到的。我知道编写一个函数来做到这一点是微不足道的，但如果有一种“正确”的方式，我宁愿学习！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T06:15:04.243

You could convert it to an array:

```
m1.to_a.each {|r| puts r.inspect}

=> [1, 2]
   [3, 4] 
```

EDIT:

Here is a "point free" version:

```
puts m1.to_a.map(&:inspect) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T07:18:43.947

我无法让它看起来像文档，所以我为您编写了一个完成相同任务的函数。

```
require 'matrix'

m1 = Matrix[[1,2],[3,4],[5,6]]

class Matrix
  def to_readable
    i = 0
    self.each do |number|
      print number.to_s + " "
      i+= 1
      if i == self.column_size
        print "\n"
        i = 0
      end
    end
  end
end

m1.to_readable

=> 1 2 
   3 4 
   5 6 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T19:07:49.943

免责声明：我是 NMatrix 的首席开发人员。

这在 NMatrix 中是微不足道的。做吧`matrix.pretty_print`。

列没有整齐地对齐，但这很容易修复，我们希望能对此做出任何贡献。

顺便说一句，很高兴在这里见到一位 VT 同事。=)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T06:19:47.550

You can use the `each_slice` method combined with the `column_size` method.

```
m1.each_slice(m1.column_size) {|r| p r }
=> [1,2]
   [3,4] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-19T21:18:59.753

好的，我是 ruby​​ 编程的新手。我刚刚开始我的第一次入侵，但碰巧我遇到了同样的问题并采取了这种快速'n'dirty的方法。与标准 Matrix 库一起使用，并将打印具有相同大小格式的列。

```
class Matrix
  def to_readable
   column_counter = 0
   columns_arrays = []
   while column_counter < self.column_size
     maximum_length = 0
     self.column(column_counter).each do |column_element|# Get maximal size
       length = column_element.to_s.size
       if length > maximal_length
         maximum_length = length
       end
     end # now we've got the maximum size
     column_array = []
     self.column(column_counter).each do |column_element| # Add needed spaces to equalize each column
      element_string = column_element.to_s
      element_size = element_string.size
      space_needed = maximal_length - element_size +1
      if space_needed > 0
        space_needed.times {element_string.prepend " "}
        if column_counter == 0
          element_string.prepend "["
        else
          element_string.prepend ","
        end  
      end
      column_array << element_string
    end
    columns_arrays << column_array # Now columns contains equal size strings
    column_counter += 1
  end
  row_counter = 0
  while row_counter < self.row_size
    columns_arrays.each do |column|
      element = column[row_counter]
      print element #Each column yield the correspondant row in order
    end
    print "]\n"
    row_counter += 1
  end
 end
end 
```

欢迎任何更正或升级！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-05T22:14:46.907

这对我有用

```
require 'matrix'

class Matrix

  def print
    matrix = self.to_a
    field_size = matrix.flatten.collect{|i|i.to_s.size}.max
    matrix.each do |row|
      puts (row.collect{|i| ' ' * (field_size - i.to_s.size) + i.to_s}).join('  ')    
    end
  end

end

m = Matrix[[1,23,3],[123,64.5, 2],[0,0,0]]
m.print 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-09T16:06:14.493

我刚刚遇到这个问题，还没有看到有人在这里发布它，所以如果它对某人有帮助，我会提出我的解决方案。我知道 2 个 for 循环不是最好的主意，但对于较小的矩阵来说应该没问题，它打印得很漂亮，而且你想要的样子，也不需要使用 require 'matrix' 或 'pp'

```
matrix = Array.new(numRows) { Array.new(numCols) { arrToTakeValuesFrom.sample } }

for i in 0..numRows-1 do
  for j in 0..numCols-1 do
    print " #{matrix[i][j]} "
  end
  puts ""
end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-15T13:28:11.747

这是我的答案：

```
require 'matrix'

class Matrix
    def to_pretty_s
        s = ""
        i = 0
        while i < self.column_size
            s += "\n" if i != 0
            j = 0
            while j < self.row_size
                s += ' ' if j != 0
                s += self.element(i, j).to_s
                j += 1
            end
            i += 1
        end
        s
    end
end

m = Matrix[[0, 3], [3, 4]]

puts m # same as 'puts m.to_s'
# Matrix[[0, 3], [3, 4]]

puts m.to_pretty_s
# 0 3
# 3 4

p m.to_pretty_s
# "0 3\n3 4" 
```

您可以使用`Matrix#to_pretty_s`来获取格式的漂亮字符串。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-20T22:31:40.407

没有内置的 Ruby 方法可以做到这一点。但是，我创建了一个可以包含在包含方法的 Matrix 中的模块`readable`。您可以[在此处](https://gist.github.com/ConorOBrien-Foxx/b1b59623322115b6db04ea4b6803952c)找到此代码，但它也在以下代码块中。

```
require 'matrix'

module ReadableArrays
    def readable(factor: 1, method: :rjust)
        repr = to_a.map { |row|
            row.map(&:inspect)
        }

        column_widths = repr.transpose.map { |col|
            col.map(&:size).max + factor
        }

        res = ""
        repr.each { |row|
            row.each_with_index { |el, j|
                res += el.send method, column_widths[j]
            }
            res += "\n"
        }
        res.chomp
    end
end

## example usage ##
class Matrix
    include ReadableArrays
end
class Array
    include ReadableArrays
end

arr = [[1, 20, 3], [20, 3, 19], [-32, 3, 5]]
mat = Matrix[*arr]

p arr
#=> [[1, 20, 3], [20, 3, 19], [-2, 3, 5]]
p mat
#=> Matrix[[1, 20, 3], [20, 3, 19], [-2, 3, 5]]

puts arr.readable
#=>
#    1 20  3
#   20  3 19
#  -32  3  5
puts mat.readable
#=>
#    1 20  3
#   20  3 19
#  -32  3  5
puts mat.readable(method: :ljust)
#=>
# 1   20 3
# 20  3  19
# -32 3  5
puts mat.readable(method: :center)
#=>
#  1  20  3
#  20  3 19
# -32  3  5 
```

# heroku - Github 和 Heroku 克隆错误 - 无效路径/语法错误

> ID：10370041
> 
> 赞同：0
> 
> 时间：2012-04-29T05:49:55.750
> 
> 标签：heroku, path, github, cloning

这是我的问题

我正在使用 heroku 开发一个应用程序，并且我正在将 github 与它一起用于一个项目。

现在，当我尝试使用没有 heroku 的 github(clone) 来处理不同的项目时，它说...

```
michael@michael-HP-PavilionNotebook-PC:~$ 
michael@michael-HP-PavilionNotebook-PC:~$ 
michael@michael-HP-PavilionNotebook-PC:~$ git init
Initialized empty Git repository in /home/michael/.git/
michael@michael-HP-PavilionNotebook-PC:~$ ls
Desktop    Downloads         gifiniti       Music        Pictures  Templates  Ubuntu One
Documents  examples.desktop  gifinitiApr24  oldgifiniti  Public    tmp        Videos
michael@michael-HP-PavilionNotebook-PC:~$ git clone git@github.com:toadiferus/SecretTunnel
Cloning into SecretTunnel...

 !  Invalid path.
 !  Syntax is: git@heroku.com:<app>.git where <app> is your app's name.

fatal: The remote end hung up unexpectedly
michael@michael-HP-Pavilion-dv6700-Notebook-PC:~$ 
```

我将如何解决此错误？找不到针对此特定问题的任何在线支持。如何更改命令的语法？我只想从 github 而不是 heroku 克隆一个项目。

谢谢！

*   迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:20:58.727

如果您使用 heroku 帐户插件，您的 ~/.ssh/config 可能已被劫持。同样的事情发生在我身上。我删除了我的 ssh 配置的内容，一切都很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:52:49.167

git url 最后应该有 .git ，即。`git@github.com:toadiferus/SecretTunnel.git`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:46:30.087

首先，您在克隆之前不需要这样做`init`- init 用于将项目文件夹转换为 git 存储库，除非您真的打算将整个用户目录转换为 git 存储库？我建议你删除你这样做创建的 .git 文件夹。

为确保您使用正确的路径，请转到 github 上的项目并使用看起来像剪贴板的图标将正确的 url 复制到剪贴板，粘贴到您的命令行，然后看看会发生什么。

我也不明白为什么当你做一个

```
git clone git@github.com:toadiferus/SecretTunnel
Cloning into SecretTunnel... 
```

你得到什么看起来像 Heroku 推送错误？？？来自 github URL 的 Git 克隆应该只是将项目从 github 克隆到您的本地计算机。

```
 !  Invalid path.
 !  Syntax is: git@heroku.com:<app>.git where <app> is your app's name. 
```

您是否正在编辑要粘贴的输出？

# c# - 为 IQueryable 创建动态类型 在运行时 #

> ID：10370042
> 
> 赞同：0
> 
> 时间：2012-04-29T05:49:58.140
> 
> 标签：c#, multilingual, iqueryable

我正在使用 asp.net 和 c# 开发一个多语言新闻门户网站。目前该网站支持两种语言，并会在需要时扩展到其他附加语言。因此，我的工作是为网站创建基本框架。根据客户的要求，不同语言的网站要存储在数据库中的内容可能会有所不同。因此，我创建了不同的表来存储不同语言的新闻（如 tblNews_EN、tblNews_am 等），以存储英语或阿姆哈拉语的内容。

现在我有类来检索最新消息，但我想概括这些类并检索用户请求的特定文化的最新消息。最初我有类似下面的东西，它只能从 tblNews_EN 表中检索最新消息。

```
public IQueryable<GetNews> GetTopExtraNews()
 {

        var topExtraNews = from p in db.GetNews
                           where p.TopOrderPriority == 2
                           orderby p.NewsDate descending
                           select p;
        return topExtraNews;
} 
```

这里 GetNews 是我的 Entity 类，它对应于 tblNews_EN 表。

现在我想概括这一点，以便它根据所选的文化从不同的表中返回对象。我尝试使用 IQueryable 之类的东西，但我认为这不是处理我的情况的最佳选择。那么，有没有更好的选择来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:05:20.837

如果我理解得很好，您的所有表格都具有相同的结构。

基于此，只需将表作为参数发送到您的方法并将此参数用于您的查询：

```
public IQueryable<GetNews> GetTopExtraNews(typeofYourTable myTable)
{

        var topExtraNews = from p in myTable
                           where p.TopOrderPriority == 2
                           orderby p.NewsDate descending
                           select p;
        return topExtraNews;
} 
```

当然，在调用您的方法之前，您必须将 myTable 参数设置为正确的语言表。

# android - Cocos 2D NullPointer 异常

> ID：10370046
> 
> 赞同：3
> 
> 时间：2012-04-29T05:52:08.650
> 
> 标签：android, nullpointerexception, 2d, cocos2d-android

我按照以下教程中的指南进行操作。 [http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/)

在第一次运行时，我收到以下错误。

```
04-29 10:21:08.022: E/AndroidRuntime(12702): FATAL EXCEPTION: GLThread 10
04-29 10:21:08.022: E/AndroidRuntime(12702): java.lang.NullPointerException
04-29 10:21:08.022: E/AndroidRuntime(12702):    at org.cocos2d.nodes.CCAtlasNode.updateBlendFunc(CCAtlasNode.java:168)
04-29 10:21:08.022: E/AndroidRuntime(12702):    at org.cocos2d.nodes.CCAtlasNode.<init>(CCAtlasNode.java:77)
04-29 10:21:08.022: E/AndroidRuntime(12702):    at org.cocos2d.nodes.CCLabelAtlas.<init>(CCLabelAtlas.java:40)
04-29 10:21:08.022: E/AndroidRuntime(12702):    at org.cocos2d.nodes.CCLabelAtlas.label(CCLabelAtlas.java:35)
04-29 10:21:08.022: E/AndroidRuntime(12702):    at org.cocos2d.nodes.CCDirector.setGLDefaultValues(CCDirector.java:593)
04-29 10:21:08.022: E/AndroidRuntime(12702):    at org.cocos2d.nodes.CCDirector.onSurfaceCreated(CCDirector.java:636)
04-29 10:21:08.022: E/AndroidRuntime(12702):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1349)
04-29 10:21:08.022: E/AndroidRuntime(12702):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1119) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:54:19.027

该库不再更新。开始使用会更好：http: [//www.cocos2d-x.org/](http://www.cocos2d-x.org/)。它使用 C++，在 android 上工作，使用 JNI（本机代码）。代码可以移植到任何其他平台，例如 IOS。

希望它会有所帮助！

# c - 将结构传递给函数

> ID：10370047
> 
> 赞同：57
> 
> 时间：2012-04-29T05:52:21.243
> 
> 标签：c, function, struct

我是一个新的 C 程序员，我想知道如何将一个`struct`传递给一个函数。我遇到了一个错误，无法找出正确的语法来做到这一点。这是它的代码....

结构：

```
struct student{
    char firstname[30];
    char surname[30];
};

struct student person; 
```

称呼：

```
addStudent(person); 
```

原型：

```
void addStudent(struct student); 
```

和实际功能：

```
void addStudent(person)
{
    return;
} 
```

编译器错误：

> 第 21 行：警告：可疑标签声明：struct student
> 第 223 行：参数 #1 与原型不兼容：

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-25T21:45:02.027

这是`struct`通过引用传递的方法。这意味着您的函数可以访问函数的`struct`外部并修改其值。您可以通过将指向结构的指针传递给函数来完成此操作。

```
#include <stdio.h>
/* card structure definition */
struct card
{
    int face; // define pointer face
}; // end structure card

typedef struct card Card ;

/* prototype */
void passByReference(Card *c) ;

int main(void)
{
    Card c ;
    c.face = 1 ;
    Card *cptr = &c ; // pointer to Card c

    printf("The value of c before function passing = %d\n", c.face);
    printf("The value of cptr before function = %d\n",cptr->face);

    passByReference(cptr);

    printf("The value of c after function passing = %d\n", c.face);

    return 0 ; // successfully ran program
}

void passByReference(Card *c)
{
    c->face = 4;
} 
```

这就是您传递`struct`by 值的方式，以便您的函数接收到的副本`struct`并且无法访问外部结构来修改它。外部是指功能之外。

```
#include <stdio.h>

/* global card structure definition */
struct card
{
    int face ; // define pointer face
};// end structure card

typedef struct card Card ;

/* function prototypes */
void passByValue(Card c);

int main(void)
{
    Card c ;
    c.face = 1;

    printf("c.face before passByValue() = %d\n", c.face);

    passByValue(c);

    printf("c.face after passByValue() = %d\n",c.face);
    printf("As you can see the value of c did not change\n");
    printf("\nand the Card c inside the function has been destroyed"
        "\n(no longer in memory)");
}

void passByValue(Card c)
{
    c.face = 5;
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-04-29T05:54:08.287

行功能实现应该是：

```
void addStudent(struct student person) {

} 
```

`person`不是类型而是变量，不能用作函数参数的类型。

此外，请确保您的结构在函数原型之前定义，`addStudent`因为原型使用它。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-11T02:43:29.633

将结构传递给另一个函数时，通常最好按照 Donnell 上面的建议进行，而是通过引用传递它。

这样做的一个很好的理由是，如果您想要进行更改，这些更改将在您返回到创建它的实例的函数时反映出来，这会使事情变得更容易。

这是执行此操作的最简单方法的示例：

```
#include <stdio.h>

typedef struct student {
    int age;
} student;

void addStudent(student *s) {
    /* Here we can use the arrow operator (->) to dereference 
       the pointer and access any of it's members: */
    s->age = 10;
}

int main(void) {

    student aStudent = {0};     /* create an instance of the student struct */
    addStudent(&aStudent);      /* pass a pointer to the instance */

    printf("%d", aStudent.age);

    return 0;
} 
```

在此示例中，`addStudent()`函数的参数是指向`student`struct -实例的指针`student *s`。在`main()`中，我们创建结构的一个实例，然后使用引用运算符 ( ) 将对`student`它的引用传递给我们的函数。`addStudent()``&`

在`addStudent()`函数中，我们可以使用箭头运算符 ( `->`) 来取消引用指针，并访问它的任何成员（功能上等同于: `(*s).age`）。

我们在`addStudent()`函数中所做的任何更改都会在我们返回时反映出来`main()`，因为指针为我们提供了对内存中存储结构实例的位置的引用`student`。这由 来说明，`printf()`在本例中将输出“10”。

如果您没有传递引用，您实际上将使用您传递给函数的结构的副本，这意味着当您返回时不会反映任何更改`main`- 除非您实现了一种传递新版本的方法结构回到主线或类似的东西！

虽然指针起初可能看起来令人反感，但一旦你了解它们的工作原理以及它们为何如此方便，它们就会成为第二天性，你会想知道没有它们你是如何应对的！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-29T06:00:13.143

您需要在 person 上指定一个类型：

```
void addStudent(struct student person) {
...
} 
```

此外，您可以 typedef 您的 struct 以避免每次使用 struct 时都必须键入它：

```
typedef struct student{
...
} student_t;

void addStudent(student_t person) {
...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-25T01:28:24.057

代替：

```
void addStudent(person)
{
    return;
} 
```

尝试这个：

```
void addStudent(student person)
{
    return;
} 
```

由于您已经声明了一个名为“student”的结构，因此您不必在函数实现中指定，如下所示：

```
void addStudent(struct student person)
{
    return;
} 
```

# .net - lambda 搜索“包含”不返回预期结果

> ID：10370055
> 
> 赞同：0
> 
> 时间：2012-04-29T05:54:08.223
> 
> 标签：.net, linq-to-sql, lambda

我有一个 lambda 表达式：

```
 var masterDocs = GetMasterDocs(new TNGService.TngServiceClient());
        var searchStr = txtDocSearch.Text;
        var filtered = masterDocs.Where(i => i.DisplayTitle.Contains(searchStr));
        lbxDocuments.DataSource = filtered;
        lbxDocuments.DataBind(); 
```

由于某种原因，它没有返回预期的结果。例如，有一个 DisplayTitle 包含单词“Orifice”，但是当我运行这个表达式时，没有返回任何内容。我会以错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T05:59:22.393

该`Contains`方法区分大小写。可能是您的输入和比较在大小写上有所不同吗？为了解决这个问题，您可以`IndexOf`改用：

```
var filtered = masterDocs.Where(i => 
    i.DisplayTitle.IndexOf(
        searchStr, StringComparison.InvariantCultureIgnoreCase) >= 0); 
```

# asp.net - 差异日期计算

> ID：10370059
> 
> 赞同：0
> 
> 时间：2012-04-29T05:54:54.343
> 
> 标签：asp.net

我有三个文本框，，，`StartTextbox`和`EndTextBox`，`Textbox3`其中`Textbox3`包含`No of Month`。现在我想检查开始日期和结束日期的差异`No of Month`。

这是自定义验证功能：

```
protected void ValidateDuration(object sender, ServerValidateEventArgs e)
{
    DateTime start = DateTime.Parse(StartTextBox.Text);
    DateTime end = DateTime.Parse(EndTextBox.Text);

    int months = (end.Month - start.Month) + 12 * (end.Year - start.Year);

    e.IsValid = months <= TextBox3;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:18:53.960

You can get the number of months between two date by using the overridden operation - to get a time span between 2 dates:

```
 DateTime date1 = new DateTime();
    DateTime date2 = new DateTime();

    date1 = DateTime.Now;
    date2 = DateTime.Now.AddMonths(4);

    TimeSpan months = date2 - date1;

   Console.WriteLine(months.Days / 30); 
```

This code snippet will display 4 months

for your code:

```
e.IsValid = months <= Int32.TryParse(TextBox3.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:02:56.390

如果要检查`months`(an `int`) 的值`TextBox3`，则必须首先将值作为 a`string`并将其转换为 a `int`。例如：

```
protected void ValidateDuration(object sender, ServerValidateEventArgs e)
{
    DateTime start = DateTime.Parse(StartTextBox.Text);
    DateTime end = DateTime.Parse(EndTextBox.Text);

    int months = (end.Month - start.Month) + 12 * (end.Year - start.Year);
    int noOfMonth = int.Parse(TextBox3.Text);

    e.IsValid = months <= noOfMonth;
} 
```

# java - 当 Java 中的输入缓冲区自动刷新时会发生什么？

> ID：10370062
> 
> 赞同：3
> 
> 时间：2012-04-29T05:55:08.060
> 
> 标签：java, io, stream

我刚读到

> 一些缓冲输出类支持自动刷新，由可选的构造函数参数指定。启用自动刷新时，某些关键事件会导致刷新缓冲区。例如，自动刷新 PrintWriter 对象在每次调用 println 或 format 时刷新缓冲区。

因此，如果我暂时保留任何 BufferReader 的引用并且它被刷新，那么所有数据将如何保留回来？是否有一些回调机制会自动刷新它并再次读取内容，或者我会丢失数据并再次需要调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T06:25:28.543

> 因此，如果我暂时保留任何 BufferReader 的引用并且它被刷新，那么所有数据将如何保留回来？

我想你的意思是`BufferedWriter`。（这两个API 都没有`Reader`方法。刷新对“源”没有任何意义。） `InputStream``flush()`

刷新的数据被写入流的“接收器”；即文件或套接字或其他任何东西。因此，如果您查看文件（或其他文件），如果流已被刷新（成功），则数据将在那里。

> 是否有一些回调机制会自动刷新它并再次读取内容

没有回调机制¹。（至少，在标准类库提供的任何缓冲流类中都没有：谁知道自定义类可能会做什么......）

当某些事情发生时，数据会自动刷新。例如，当应用程序`println`为 PrintWriter 调用 ... 时。

> ...或者我会丢失数据并且我需要再次调用它？

这在语法上或语义上都没有意义。我不知道你想问什么。

也许你不明白冲洗的作用。刷新只是意味着将数据从缓冲区中推到流发送数据的任何地方。显式`flush()`调用或自动刷新只是意味着“现在就写”。

* * *

^(1 - 顺便说一句，`BufferedWriter`也没有`finalize()`方法。这意味着，如果这些对象之一在输出缓冲的情况下变得无法访问，则永远不会写入该输出。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:26:46.733

我认为您在缓冲的**reader**和**writers**之间感到困惑。您的声明是在谈论缓冲的**writers**，因此如果您要写入流，那么您不应该真正关心它是物理写入还是仅写入缓冲区 - 这对 Java 无关紧要。

我希望缓冲的**阅读器**永远不会被刷新，但根据缓冲区的类型，它可能没问题。例如，如果从文件中读取，缓冲区可能会被刷新，并且当您尝试`read()`. 但是，对于其他流内容，您不希望它被自动刷新，因为您会丢失缓冲区中的任何数据。

# html - 中心台（台宽 > 屏幕分辨率）

> ID：10370063
> 
> 赞同：0
> 
> 时间：2012-04-29T05:55:24.767
> 
> 标签：html, html-table, width, center, resolution

我的表格/网页宽 1250 像素，居中。但是对于像我这样的 1024 像素宽的显示器，我必须“向右”滚动才能看到整个页面。我希望它以我的尺寸为中心，所以我不必滚动。

这是我的代码：

```
<html>
<head>
<title>blah</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
<table id="Table_01" width="1250" height="1500" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td rowspan="8">
            <img src="images/site_layout_01.gif" width="148" height="1500" alt=""></td>
        <td colspan="9">
            <img src="images/header-image.jpg" width="968" height="336" alt=""></td>
        <td rowspan="8">
            <img src="images/site_layout_03.gif" width="134" height="1500" alt=""></td>
    </tr>
    <tr>
        <td colspan="9">
            <img src="images/site_layout_04.gif" width="968" height="71" alt=""></td>
    </tr>
    <tr>
        <td rowspan="2">
            <img src="images/site_layout_05.gif" width="42" height="201" alt=""></td>
        <td>
            <img src="images/review1.jpg" width="195" height="84" alt=""></td>
        <td rowspan="2">
            <img src="images/site_layout_07.gif" width="40" height="201" alt=""></td>
        <td>
            <img src="images/review2.jpg" width="195" height="84" alt=""></td>
        <td rowspan="2">
            <img src="images/site_layout_09.gif" width="40" height="201" alt=""></td>
        <td>
            <img src="images/review3.jpg" width="195" height="84" alt=""></td>
        <td rowspan="2">
            <img src="images/site_layout_11.gif" width="40" height="201" alt=""></td>
        <td>
            <img src="images/review4.jpg" width="195" height="84" alt=""></td>
        <td rowspan="2">
            <img src="images/site_layout_13.gif" width="26" height="201" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="images/site_layout_14.gif" width="195" height="117" alt=""></td>
        <td>
            <img src="images/site_layout_15.gif" width="195" height="117" alt=""></td>
        <td>
            <img src="images/site_layout_16.gif" width="195" height="117" alt=""></td>
        <td>
            <img src="images/site_layout_17.gif" width="195" height="117" alt=""></td>
    </tr>
    <tr>
        <td colspan="9">
            <img src="images/main-image.jpg" width="968" height="161" alt=""></td>
    </tr>
    <tr>
        <td colspan="9">
            <img src="images/site_layout_19.gif" width="968" height="9" alt=""></td>
    </tr>
    <tr>
        <td colspan="9">
            <img src="images/obama_quote.gif" width="968" height="63" alt=""></td>
    </tr>
    <tr>
        <td colspan="9">
            <img src="images/site_layout_21.gif" width="968" height="659" alt=""></td>
    </tr>
</table>
</body>
</html> 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:15:33.990

first off, ditch the deprecated attributes you have on your table. apply them correctly via css. then add a media query that changes for your screen size

```
#Table_01{margin:0 auto; width:1250px}
@media only screen and (max-width:1024px) { #Table_01{width:1024} } 
```

or you could set width:100%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:56:03.790

一个糟糕（但有效）的解决方案如下：您在桌子上设置宽度并将其居中（`width: 1250px; margin: 0 auto;`） - 这将使桌子在高分辨率显示器上居中。然后你可以设置`overflow-x: hidden`你的`body`元素（因为没有包装器） - 这将防止水平滚动条出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T05:30:54.367

我有同样的问题，表格必须在屏幕中央，我找到了以下解决方案。

您可以直接将同一行添加到您的表中：

```
<table style="margin: auto;"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T06:13:06.300

您可以将表格最小宽度设置为 1025px 和 100%。即便如此，您仍需要滚动，因为无法将较大的玻璃放置在较小的玻璃中。

```
#Table_01 {
  width: 100%;
  max-width: 1680px;
  min-width: 1025px;
} 
```

**更新：** 根据您更新的问题，我猜您希望将每边的边距设置为 113 像素。您可以使用以下方法做到这一点。

```
#Table_01 {
    margin: 0 113px 0 113px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T06:07:45.360

使用以下 CSS

```
#Table_01{
      margin:0 auto;
      width:1250px;
} 
```

如果您想保留此代码用于学习目的，没关系，但通用标准说保持在[960 像素。](http://960.gs/)

# java - 如何检查 JFrame 何时关闭？

> ID：10370064
> 
> 赞同：1
> 
> 时间：2012-04-29T05:55:46.777
> 
> 标签：java, swing, jframe

如何检查`JFrame`窗口何时关闭？

```
MediaPanel mediaPanel=new MediaPanel();
JFrame_of_subtitle frame=new JFrame_of_subtitle(mediaPanel);
JPanel panel=new JPanel();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:24:28.833

You will add [WindowListener](http://docs.oracle.com/javase/6/docs/api/java/awt/event/WindowListener.html) to your frame.

WindowListener has a [windowClosing](http://docs.oracle.com/javase/6/docs/api/java/awt/event/WindowListener.html#windowClosing%28java.awt.event.WindowEvent%29) callback function which will be invoked when your frame is being closed.

You can see this [tutorial](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html) for sample code.

# asp.net - 同源策略，在不同端口上有 2 个项目

> ID：10370065
> 
> 赞同：1
> 
> 时间：2012-04-29T05:55:51.297
> 
> 标签：asp.net, visual-studio, security, same-origin-policy

我有 2 个 Web 应用程序在 2 个单独的端口上运行：`localhost:35000`和`localhost:35001`，每个分别映射到`mySite.com`和`api.mySite.com`。现在因为它们都在不同的端口上运行，这会触发相同的源策略，从而阻止我使用 javascript 调用 api。

有没有解决的办法？无论是设置 Visual Studio 以使两个应用程序都在同一端口上运行，还是允许跨 localhost 的端口进行一些跨域的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:28:35.463

在这种情况下，端口并不重要；而是客户看到的不同域名。

在您的 API 服务器上实现[跨域资源共享协议。](http://www.w3.org/TR/cors)它允许跨源 XHR 请求，同时赋予服务器控制允许来自哪个源的请求的权限。

# php - PHP 多字节 UTF-8 字符串正在缓慢降级

> ID：10370067
> 
> 赞同：2
> 
> 时间：2012-04-29T05:56:40.540
> 
> 标签：php, javascript, multibyte, lzw

我正在尝试将以下 javascript 函数转换为 PHP：

```
function lzw_decode(s) {
    var dict = {};
    var data = (s + "").split("");
    var currChar = data[0];
    var oldPhrase = currChar;
    var out = [currChar];
    var code = 256;
    var phrase;
    debugger;
    for (var i=1; i<data.length; i++) {
        var currCode = data[i].charCodeAt(0);
        if (currCode < 256) {
            phrase = data[i];
        }
        else {
           phrase = dict[currCode] ? dict[currCode] : (oldPhrase + currChar);
        }
        out.push(phrase);
        currChar = phrase.charAt(0);
        dict[code] = oldPhrase + currChar;
        code++;
        oldPhrase = phrase;
    }
    return out.join("");
} 
```

这是我转换后的代码：

```
function uniord($c) {

    $a = unpack('N', mb_convert_encoding($c, 'UCS-4BE', 'UTF-8'));
    return($a[1]);

}

function mb_str_split( $string ) { 
    # Split at all position not after the start: ^ 
    # and not before the end: $ 
    return preg_split('/(?<!^)(?!$)/u', $string ); 
}

function decode($s){

    $dict = array();

    $data = mb_str_split($s);

    // print_r($data);

    $currChar = $data[0];
    // echo $currChar;
    // exit();
    $oldPhrase = $currChar;

    $out = array();
    $out[] = $currChar;
    $code = 256;
    $phrase;

    for ($i=1; $i < count($data); $i++) { 

        $currCode = uniord($data[$i]);

        if($currCode < 256){
            $phrase = $data[$i];
        }else{
            $phrase = isset($dict[$currCode]) ? $dict[$currCode] : ($oldPhrase . $currChar);
        }

        $out[] = $phrase;

        $currChar = mb_substr($phrase, 0, 1);
        $dict[$code] = $oldPhrase . $currChar;

        $code++;
        $oldPhrase = $phrase;

    }

    return implode("", $out);

} 
```

虽然此函数适用于某些 LZW 编码的字符串，但如果您使用足够长的字符串，您会发现它不是 100% 准确的。我的猜测是多字节字符串的问题和我的粗心。有人有想法么？

# ssas - 参考尺寸不好吗？

> ID：10370069
> 
> 赞同：2
> 
> 时间：2012-04-29T05:57:22.407
> 
> 标签：ssas, dimension, olap-cube

我对 OLAP 和 SSAS 相当陌生，但在关系数据仓库方面经验丰富，我对参考维度的问题是它们是坏的、必要的邪恶，还是在正确使用时有用？每一篇文章我都能找到参考 Andventure Works 和地理维度，但我正在寻找真实世界的经验。

我的多维数据集有一个非常标准的日期维度，我想创建一个日期指标 REFERENCE 维度，该维度具有我的日期维度的 FK DateId。在此 Date Metrics 参考维度中，我将为 AccountId 添加一个成员和几个“Action”成员，以总结我想要按日期、月份或年份等计算的特定操作。

从根本上讲，我的日期度量参考将是 DateID 和 AccountId 上的唯一，这将使我能够通过我试图将其关联回的日期维度来总结“动作”运动。

我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:19:29.783

参考维度：表示您如何将维度参考到多维数据集。创建维度后，它们独立存在，您可以将它们添加到“维度使用”选项卡上的多维数据集中。这对于能够使用维度浏览多维数据集的数据是必要的。

我认为您实际上是在询问“属性关系”（维度配置上的第二个选项卡），答案是它们非常有用。我什至看过一个 Microsoft MVP 的视频，他说这可能是您可以在立方体上进行的最重要的配置。

属性关系指示维度上的属性如何相互关联。因此，例如，在日期维度上，您将拥有

```
day -> month -> quarter -> year 
```

它总是“相反”的配置，就好像它是一个层次结构一样。

另一个非常重要的配置是关系类型，在日期示例中，您应该将其设置为刚性，因为数据永远不会改变（01-01-2012 成员将始终属于 2012 年）所以 SSAS 将保持计算处理多维数据集时的聚合（当然，除非您进行完整处理）

# javascript - 我声明 onclick 处理程序的方式有问题吗？

> ID：10370070
> 
> 赞同：0
> 
> 时间：2012-04-29T05:57:25.710
> 
> 标签：javascript, xhtml

出于某种原因，我无法正确显示警报框（作为测试添加）。该功能似乎根本没有执行。你对我做错了什么有什么看法？

我的代码位于[此处，](http://jsfiddle.net/stanigator/Ux43s/)附带结果。感谢您提前输入！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T06:02:48.120

一个明显的问题是由于字符串常量中的引号导致的语法错误。例如，

```
h[0] = "<span style="color:red;">Please type a name!</span>"; 
```

应该

```
h[0] = "<span style=\"color:red;\">Please type a name!</span>"; 
```

或者

```
h[0] = '<span style="color:red;">Please type a name!</span>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T06:05:11.570

1.  `var h = new Array();`应该只是`var h = [];`。

2.  `h[0] = "<span style="color:red;">Please type a name!</span>";`是无效的语法 - 你如何期望它知道`"`终止字符串的意思？使用`style='color:red'`（单引号）。

3.  `for(i in x)` [不应该使用](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)。

4.  如前所述，绑定到表单的提交事件而不是按钮单击。并且不要为此使用内联处理程序，使用事件侦听器。

5.  如果出现错误，您的处理程序需要`return false;`阻止表单提交到服务器。

6.  阅读[gdoron 的答案](https://stackoverflow.com/a/10370092/1233508)并使用 JSLint。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T06:01:21.630

**您的代码中有很多错误！**
在用 JSLint 测试你的代码后，我得到了这些错误：

> 错误：第 2 行字符 22 处的问题：使用数组文字符号 []。var x = 新数组（）；
> 
> 第 9 行字符 22 处的问题：使用数组文字符号 []。var h = 新数组（）；
> 
> 第 10 行字符 24 处的问题：缺少分号。h[0] = "
> 
> 第 11 行字符 12 的问题：红色语句上的标签“颜色”。红色;
> 
> 第 11 行字符 12 处的问题：需要一个赋值或函数调用，而是看到一个表达式。红色;
> 
> 第 12 行字符 5 处的问题：需要一个赋值或函数调用，而是看到一个表达式。">请输入姓名！";
> 
> 第 13 行字符 24 处的问题：缺少分号。h[1] = "
> 
> 第 14 行字符 12 的问题：“颜色”已定义。红色;
> 
> 第 14 行字符 12 的问题：红色语句上的标签“颜色”。红色;
> 
> 第 14 行字符 12 处的问题：期望一个赋值或函数调用，而是看到一个表达式。红色;
> 
> 第 15 行字符 5 处的问题：需要赋值或函数调用，但看到的是表达式。">您必须输入姓氏！";
> 
> 第 16 行字符 24 处的问题：缺少分号。h[2] = "
> 
> 第 17 行字符 12 处的问题：“颜色”已定义。红色;
> 
> 第 17 行字符 12 处的问题：红色语句上的标签“颜色”。红色;
> 
> 第 17 行字符 12 处的问题：需要一个赋值或函数调用，而是看到一个表达式。红色;
> 
> 第 18 行字符 5 处的问题：需要赋值或函数调用，但看到的是表达式。">您必须输入有效的电子邮件地址！";
> 
> 第 19 行字符 24 处的问题：缺少分号。h[3] = "
> 
> 第 20 行字符 12 处的问题：“颜色”已定义。红色;
> 
> 第 20 行字符 12 处的问题：红色语句上的标签“颜色”。红色;
> 
> 第 20 行字符 12 处的问题：期望一个赋值或函数调用，而是看到一个表达式。红色;
> 
> 第 21 行字符 5 处的问题：需要一个赋值或函数调用，而是看到一个表达式。">您必须输入密码！";
> 
> 第 22 行字符 24 处的问题：缺少分号。h[4] = "
> 
> 第 23 行字符 12 处的问题：“颜色”已定义。红色;
> 
> 第 23 行字符 12 处的问题：红色语句上的标签“颜色”。红色;
> 
> 第 23 行字符 12 处的问题：需要一个赋值或函数调用，而是看到一个表达式。红色;
> 
> 第 24 行字符 5 处的问题：需要赋值或函数调用，但看到的是表达式。">您必须确认密码！";
> 
> 第 26 行字符 26 处的问题：使用数组文字符号 []。var divs = new Array("mname", "mlname", "memail", "mpassword", "mconfirm");
> 
> 第 26 行字符 26 处的问题：使用数组文字符号 []。var divs = new Array("mname", "mlname", "memail", "mpassword", "mconfirm");
> 
> 第 26 行字符 26 处的问题：正在停止，无法继续。（72% 扫描）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T06:05:59.183

There are errors in these lines in `""` change to `''`

```
 h[0] = "<span style='color:red;'>Please type a name!</span>";
     h[1] = "<span style='color:red;'>You must type a last name!</span>";
     h[2] = "<span style='color:red;'>You must type a valid email address!</span>";
     h[3] = "<span style='color:red;'>You must type a password!</span>";
     h[4] = "<span style='color:red;'>You must confirm the password!</span>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T06:05:33.193

主要问题实际上在于您定义错误范围的方式，例如：

```
h[0] = "<span style="color:red;">Please type a name!</span>"; 
```

This is causing a syntax error because the quotes around the style are unescaped, causing them to end the string. That breaks the entire function. Escaping them will get you a long way:

```
h[0] = "<span style=\"color:red;\">Please type a name!</span>"; 
```

But you will also need to check keune's answer.

# django - django multivaluefield & multiwidget - 压缩和/或解压缩不起作用

> ID：10370078
> 
> 赞同：2
> 
> 时间：2012-04-29T05:59:19.057
> 
> 标签：django, django-models, django-multiwidget

全部，

我有一个*几乎*可以工作的 MultiValueField 表单。它使用一个choicefield 和charfield（带有相应的Select 和TextInput 用于小部件）：：

```
custom_choices = [("one","one"),("two","two"),("other","other")]

class MyMultiWidget(forms.MultiWidget):
    def __init__(self,*args,**kwargs):
        widgets = (
            forms.Select(choices=custom_choices),
            forms.TextInput(),
        )
        super(MyMultiWidget, self).__init__(widgets,*args,**kwargs)

    def decompress(self, value):
        if value:
            return value.split("|")
        return ['', '']

class MyMultiValueField(forms.MultiValueField):
    def __init__(self, *args, **kwargs):
        fields = (
            forms.ChoiceField(required=True),
            forms.CharField(max_length=128,required=False),
        )
        super(MyMultiValueField, self).__init__(fields, *args, **kwargs)
        self.widget = TestMultiWidget()

    def compress(self, data_list):
        if data_list:
            return '|'.join(data_list)

class MyTestField(models.Field):
    def formfield(self, **kwargs):
        return super(MyTestField, self).formfield(form_class=MyMultiValueField)

class MyModel(models.Model):
    myField = MyTestField() 
```

压缩功能似乎正在工作；它按预期返回两个字符串的列表。但解压缩中的“值”参数始终为无。果然，当我直接查看数据库时，myField 列始终设置为 null。任何想法压缩和解压缩之间发生了什么？为什么 compress 的值实际上没有被存储？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:21:31.890

您应该从某些实际包含数据的字段继承 MyTestField。在您的情况下，它可以是 CharField 或 TextField。我认为它会解决问题。

# image - matlab分水岭分割算法后如何提取感兴趣区域

> ID：10370081
> 
> 赞同：-1
> 
> 时间：2012-04-29T05:59:38.807
> 
> 标签：image, matlab, image-processing, roi

我已经在被遮挡的叶子上应用了分水岭分割算法，并找出了单个叶子的感兴趣区域 (ROI)。这些区域已用不同的颜色标记，如下图所示。现在的主要任务是提取具有最大区域即天蓝色区域的颜色的原始区域。请给我 MatLAB 代码。感谢您的帮助。

***原始图像*** ![在此处输入图像描述](../Images/7aa3be1b17930cf9ea99cf6b9f0a7cc6.png)

***分割图像*** ![在此处输入图像描述](../Images/b378fb6f612ff72e34a4584e4ef651c0.png)

***叠加在原始图像上的分段图像*** ![在此处输入图像描述](../Images/ffb379255fb6b313166da84553e78e1a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:27:50.643

该`regionprops`函数接受一个标签矩阵。查看`doc regionprops`可以使用此有用功能提取的所有各种属性。

```
props = regionprops(labelmatrix)
[~,ind] = max([props.Area]);
imshow(labelmatrix == ind); 
```

您应该查看所有区域 ( `areas = [props.Area];`) 并确保最大的区域始终是您想要的区域。

# html - 如何制作网站首页？

> ID：10370086
> 
> 赞同：0
> 
> 时间：2012-04-29T06:00:26.427
> 
> 标签：html

我的网站主页的所有代码都是“home.html”，但是我希望某人只需输入“example.com”并转到“主页”页面，而不必输入“example .com/home.html”。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T06:04:21.340

Web 服务器通常配置为在要求提供目录的根级别时提供具有特定名称的文件。一些例子是：

*   `index.htm`
*   `index.html`
*   `index.xml`
*   `index.rxml`
*   `index.asp`
*   `default.asp`
*   `default.aspx`
*   `index.php`
*   `index.cgi`
*   `index.shtml`
*   `iisstart.htm`

如您所知，这可能因服务器和配置而异。

因此，要么重新配置您的 Web 服务器以将“home.html”视为有效主页，要么将其名称更改为您的服务器配置使用的任何名称。

在 Apache 中，这是使用[DirectoryIndex](http://httpd.apache.org/docs/2.4/mod/mod_dir.html#directoryindex)指令配置的。

在 IIS 中，这些称为[默认文档](http://technet.microsoft.com/en-us/library/cc753615%28v=ws.10%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T06:01:46.730

将您的主页命名为 index.html，这将是您的网站在用户访问时自动转到的页面`example.com`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T06:13:39.537

对于阿帕奇：

```
DirectoryIndex home.html index.html index.txt 
```

对于 nginx：

```
location / {
    try_files $uri $uri/ /home.html;
} 
```

# mysql - mysql查询检查日期

> ID：10370105
> 
> 赞同：0
> 
> 时间：2012-04-29T06:05:32.390
> 
> 标签：mysql, sql

我不知道如何编写查询来检查日期。

例如;

客房桌； `room_id, number_of_rooms, checkin(date: 1/05/2012), checkout(date:14/05/2012)`;

我想编写一个查询，检查用户输入的日期（入住和退房日期）与房间表（入住和退房日期）；

这个想法是要知道用户输入的时间段是否在房间表的入住日期和退房日期之间

像这样的东西；

```
select * from romms 
where checkin and checkout date is not among user_entered_checkin and user_entered_checkeout 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T06:18:25.567

也许

```
SELECT * FROM rooms
WHERE (checkin IS NOT BETWEEN user_entered_checkin AND user_entered_checkout)
  AND (checkout IS NOT BETWEEN user_entered_checkin AND user_entered_checkout) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:24:53.797

如果您希望表中的范围*完全*超出用户输入的范围，那么您可以这样做：

```
...
WHERE checkin  > user_entered_checkout
   OR checkout < user_entered_checkin 
```

如果您想要范围至少*部分*超出用户输入范围的行，则条件可能是：

```
...
WHERE checkin  < user_entered_checkin
   OR checkout > user_entered_checkout 
```

# jquery - 会话超时是否在每个请求上重置

> ID：10370110
> 
> 赞同：19
> 
> 时间：2012-04-29T06:06:31.157
> 
> 标签：jquery, asp.net, ajax, session, asp.net-ajax

无论我们是否检查会话变量，会话超时是否会在每个请求上重置？或者我们应该使用至少一个会话变量？

Ajax 请求是否会导致重置会话超时？像`Update Panel`，，，`jQuery ajax`...

谢谢

* * *

**编辑 1)**

是否`HTTP Get`会导致重置会话超时？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-03T18:11:12.903

> 无论我们是否检查会话变量，会话超时是否会在每个请求上重置？

`Session`如果您继续调用服务器端代码，则不会过期。`session`超时将在每次请求服务器时重置。在对同一网站的后续请求中，浏览器提供`ASP.NET_SessionId Cookie`服务器端模块用于访问会话值（如用户信息）的信息。

```
---------------------------------------------------------------------------------
                     How to detect the Session TimeOut
--------------------------------------------------------------------------------- 
```

![在此处输入图像描述](../Images/6cf51237ee618e458f909f936feba458.png)

```
--------------------------------------------------------------------------------- 
```

> **问题 - 2** - Ajax 请求是否会导致重置会话超时？像更新面板，jQuery ajax，...
> 
> **问题 - 3** - HTTP Get 是否会导致重置会话超时？

`Session`如果用户在请求之间等待的时间过长，它将过期。如果您继续调用代码`Session`，则不会过期。超时将在每次请求服务器时`server side`重置`session`

```
Web.Config

<sessionState mode="InProc" stateConnectionString="tcpip=127.0.0.1:42424" 
 sqlConnectionString="data source=127.0.0.1;Trusted_Connection=yes"
    cookieless="true" timeout="1" /> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-29T06:10:58.973

是的，它确实。无论您是否实际使用它都没有关系`Session`。
但是，如果您*只*使用ajax 调用，您可能会遇到一些问题。
（虽然我自己没遇到过，[这里](http://ranjitkumars.wordpress.com/2010/03/02/asp-net-ajax-prevent-session-timeout/)解释一下）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T21:04:04.070

**无论我们是否检查会话变量，会话超时是否会在每个请求上重置？或者我们应该使用至少一个会话变量？**

在建立会话变量之前，每次回发都会生成一个新的会话 ID。

**Ajax 请求是否会导致重置会话超时？像更新面板，jQuery ajax，...**

默认情况下保存在 cookie 中的会话 ID 会为每个 AJAX 以及非 AJAX 请求发送。因此，服务器知道会话用户是活动的。不要相信我的话。在 ie 中使用 fiddler 或 F12 工具。您可以看到每个 AJAX GET/POST 请求发送的 cookie。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T19:38:43.283

这将取决于很多因素，因此我建议您进行如下测试。真正需要不到 5 分钟的时间来确定您的确切情况是否适用于您的环境。这是我用来测试这个的代码，我使用 Telerik 控件来测试这个想法，但我添加了一个 .get 以获得您想要的确切答案。aspx 页面有

```
<telerik:RadScriptManager ID="RadScriptManager1" Runat="server">
        </telerik:RadScriptManager>
        <telerik:RadAjaxManager ID="ram" runat="server">
            <AjaxSettings>
                <telerik:AjaxSetting AjaxControlID="btnFake">
                    <UpdatedControls>
                        <telerik:AjaxUpdatedControl ControlID="lblAnswer" />
                    </UpdatedControls>
                </telerik:AjaxSetting>
            </AjaxSettings>
        </telerik:RadAjaxManager>
        <script src="Scripts/jquery-1.4.1-vsdoc.js"></script>
    <script>
        $(document).ready(function () {
            setTimeout(function () { document.location.href = "default.aspx?next"; }, 61000);
            setInterval(function () {
                var divForTimer = $("#divTime");
                var secs = parseInt(divForTimer.html());
                secs = secs + 1;
                $("#divTime").html(secs.toString());
            }, 1000);

        });
        function getPage() {

            $.get("test.aspx", function(result) {
                $("#btnFake").val("Got it");

            });
        }
    </script>
   <asp:Label ID="lblAnswer" runat="server"></asp:Label>
   <Asp:button ID="btnTest" runat="server" Text="Renew" onclick="btnTest_Click" />
   <input type="button" ID="btnAjaxget"  onclick ="getPage()"  value="Ajax get" />
   <asp:Button ID="btnFake" runat="server"  Text ="Fake it" 
        onclick="btnFake_Click"/>
        <div id="divTime">1</div> 
```

.cs 页面有

```
protected void Page_Load(object sender, EventArgs e)
        {
            Session.Timeout = 1;
            if (EMSG.CommonFunctions.GetSession("test").Length > 0)
            {
                this.lblAnswer.Text = "Session=" + EMSG.CommonFunctions.GetSession("test");
            }
            else
            {
                this.lblAnswer.Text = "No session";
            }

        }

        protected void btnTest_Click(object sender, EventArgs e)
        {
            Session["test"] = "variable set";
            this.lblAnswer.Text = Session["test"].ToString();
        }

        protected void btnFake_Click(object sender, EventArgs e)
        {
            lblAnswer.Text = "Ajax called.";
        } 
```

---您可以根据您的情况安排以上内容。但这个想法很简单。您加载页面。单击“更新”按钮，这将设置您的会话。等待 61 秒，页面将刷新，会话变量消失。再试一次，但这次在几秒钟后单击其他两个按钮之一，当页面刷新时，您将看到会话变量在 ajax 调用中保持不变。这种情况下的 ajax 调用会刷新会话变量。

# c# - 使用 .NET 网络库的多个并发 HTTP 请求

> ID：10370111
> 
> 赞同：1
> 
> 时间：2012-04-29T06:06:49.527
> 
> 标签：c#, .net, http, networking, asynchronous

我在专用 LAN 段中有许多设备（IP 摄像机），连接到 PC。设备支持使用 HTTP 协议的单个 JPEG 帧传输。我需要尽可能同时向所有设备发送 HTTP 请求。取回图像可能需要不同的时间，这没有区别。现代中级 CPU 上的第一个和最后一个请求之间的几毫秒会很好。（我知道，我使用的是非实时系统）。

设备的峰值数据传输速率约为 50 Mbps，PC 到 LAN 段的连接速度为 1000Mbps。设备数量约为十个。HTTP 请求的典型大小约为 150 字节，响应为 40..200 KB。

现在我使用类的`DownloadDataAsync`方法，`WebClient`每个设备都有一个实例。但是有没有更有效的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:27:43.123

您自己给出了答案：HttpWebRequest 稍微快一些，因为它的开销较低。但是，比这更快的速度将很难实现。

编辑：当然，您可以使用原始套接字来驱动 HTTP 协议。不过，这将是很多工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:54:44.530

取决于摄像机的工作方式和网络布局...

您可以使用多播套接字： [文章 1](http://www.codeproject.com/Articles/1705/IP-Multicasting-in-C) [文章 2](http://www.osix.net/modules/article/?id=409)

哪个最有效..

如果您的 LAN 规模较小（大致仅由摄像机和控制器组成），您可以使用广播，但这与多播相比收益很少（只有一些路由器处理时间）

# jquery - jquery fadeIn 将图像移动到新行

> ID：10370115
> 
> 赞同：3
> 
> 时间：2012-04-29T06:07:57.590
> 
> 标签：jquery, html, css

我在这里有一个简单的 jQuery fadeIn/Out 脚本：

```
$(document).ready(
function(){         
    $("#home li").hover(
        function(){ $("img", this).fadeIn("400"); }, 
        function() { $("img", this).fadeOut("400"); } 
    );
}); 
```

在这里使用 CSS：

```
#home a:hover img{
  width:210px;
}

#home a {
  text-decoration:none;
  color:#000;
}

#home img {
  width:0px;
  margin-right:10px;
}

#home { 
  list-style: none;
  margin: 0;
  padding: 0;
  text-align:right;
  font-family: JeanLucWeb-Thin;
  font-size:75px;
  line-height:80%;
  text-decoration:none;
  color:#000;
} 
```

和html：

```
<div id="main">
<center>
<ul id="home">
    <li><a href="news.php"><img src="images/header_1.png" alt=""/>NEWS</a></li>
    <li><a href="about.php"><img src="images/header_2.png" alt=""/>ABOUT</a></li>
    <li><a href="adventuresofpaulandmarian.php"><img src="images/header_3.png" alt=""/>FILM</a></li>
    <li><a href="bardybunch.php"><img src="images/header_4.png" alt=""/>THEATER</a></li>
    <li><a href="contact.php"><img src="images/header_5.png" alt=""/>CONTACT</a></li>
</ul>
</center>
</div> 
```

您可以在这里查看最终结果：http: [//michaelherbig.com/jaystern/index.php](http://michaelherbig.com/jaystern/index.php)

这个问题是当你将鼠标悬停在链接上时，它似乎在淡入的图像之后添加了一个新行。没有 JavaScript，最终结果看起来很好，这意味着没有新行，但我想要淡入淡出效果.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:15:50.210

您的图像`display:block`在动画期间被设置。通过以下方式防止这种情况：

```
/* Line 28 of layout.css */
#home img {
  width:0px;
  margin-right:10px;
  display:inline!important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:11:42.857

```
#home img {
  float: left;
  margin-right: 10px;
  width: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T06:14:40.693

添加以下代码：

```
#home img {
  width:0px;
  margin-right:10px;
  display:block;
  float:left;
} 
```

# php - 关于php日历的一些事情

> ID：10370125
> 
> 赞同：0
> 
> 时间：2012-04-29T06:10:55.297
> 
> 标签：php

我是 PHP 的新手，现在我想用它来做一个像下面这样的日历。有些事情我不知道。

1.  如何获得本月的第一天是星期天还是另一个？

2.  如何输出一个月的所有日子并强调今天？

![在此处输入图像描述](../Images/58cbf36420be64e1ca7b60ca7cb966ea.png)

编码：

```
<table  cellspacing="0" cellpadding="3" bordercolor="#000000" border="1" style="width: 105px; border-collapse: collapse;">
    <tbody>
    <tr>
        <td colspan="7"><?php echo date('F')." ".date('Y');?></td>
    </tr>
     <tr>
         <td>Su</td>
         <td>M</td>
         <td>Tu</td>
         <td>W</td>
         <td>Th</td>
         <td>F</td>
         <td>Sa</td>
     </tr>
     <?php
   $numrows = ceil(date('t')/7);
   for($k=1;$k<=$numrows;$k++){

         ?>
      <tr><td></td></tr>
        <?php }?>

    </tbody>
</table> 
```

我不知道如何输出接下来的几天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T06:25:56.000

## 每月第一天

```
date('d', strtotime('2012-04-01')); 
```

用您要检查的实际年份和月份替换年份和月份。离开`01`第一天。

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

## 每月输出天数并强调今天

您可以`date()`不使用第二个参数来获取您想要的当前时间格式。要输出月份中的日期，您需要知道如何格式化它们，这取决于您自己的想法。但是，要获取给定月份的天数，您可以使用：

```
date('t') 
```

这将返回一个介于 28 和 31 之间的数字，具体取决于月份的长度。

你真的应该读这个： [http ://www.php.net/manual/en/ref.datetime.php](http://www.php.net/manual/en/ref.datetime.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:13:06.280

[现在，当http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)可用时，你永远不需要这些东西，但如果你想要这里是我大约 10 年前写的代码，哈哈 :)

```
<? 
  function my_calendar($fill=array()) { 
  if (isset($_GET['y'])) $y=$_GET['y'];
  if (isset($_GET['m'])) $m=$_GET['m']; 
  if (isset($_GET['date']) AND strstr($_GET['date'],"-")) list($y,$m)=explode("-",$_GET['date']);
  if (!isset($y) OR $y < 1970 OR $y > 2037) $y=date("Y");
  if (!isset($m) OR $m < 1 OR $m > 12) $m=date("m");

  $month_stamp=mktime(0,0,0,$m,1,$y);
  $month_name=date("M",$month_stamp);
  $day_count=date("t",$month_stamp);
  $weekday=date("w",$month_stamp);
  if ($weekday==0) $weekday=7;
  $start=-($weekday-2);
  $last=($day_count+$weekday-1) % 7;
  if ($last==0) $end=$day_count; else $end=$day_count+7-$last;
  $today=date("Y-m-d");
  $prev=date('?\m=m&\y=Y',mktime (0,0,0,$m-1,1,$y));  
  $next=date('?\m=m&\y=Y',mktime (0,0,0,$m+1,1,$y));
  $i=0;
?> 
<table border=1 cellspacing=0 cellpadding=2> 
 <tr>
  <td colspan=7> 
   <table width="100%" border=0 cellspacing=0 cellpadding=0> 
    <tr> 
     <td align="left"><a href="<? echo $prev ?>">&lt;&lt;&lt;</a></td> 
     <td align="center"><? echo $month_name," ",$y ?></td> 
     <td align="right"><a href="<? echo $next ?>">&gt;&gt;&gt;</a></td> 
    </tr> 
   </table> 
  </td> 
 </tr> 
 <tr><td>Mon</td><td>Tue</td><td>Wed</td><td>Th</td><td>Fri</td><td>Sat</td><td>Sun</td><tr>
<? 
  for($d=$start;$d<=$end;$d++) { 
    if (!($i++ % 7)) echo " <tr>\n";
    echo '  <td align="center">';
    if ($d < 1 OR $d > $day_count) {
      echo "&nbsp";
    } else {
      $now="$y-$m-".sprintf("%02d",$d);
      if (is_array($fill) AND in_array($now,$fill)) {
        echo '<b><a href="'.$_SERVER['PHP_SELF'].'?date='.$now.'">'.$d.'</a></b>'; 
      } else {
        echo $d;
      }
    } 
    echo "</td>\n";
    if (!($i % 7))  echo " </tr>\n";
  } 
?>
</table> 
<? } ?> 
```

使用示例

```
<? 
if (isset($_GET['date'])) echo "Date picked: ".$_GET['date'];
my_calendar(array(date("Y-m-d"))); 
?> 
```

它首先显示星期一。你需要删除一些线才能让它到星期天

# c - gettimeofday/settimeofday 用于使函数看起来不需要时间

> ID：10370128
> 
> 赞同：0
> 
> 时间：2012-04-29T06:11:09.573
> 
> 标签：c, time, gettimeofday

我有一个辅助功能，可以执行一些非常昂贵的操作。

我正在尝试分析算法的主要部分，但这个辅助函数在内部被调用了很多。因此，测量的时间考虑了辅助功能的时间。

为了解决这个问题，我决定设置和恢复时间，使辅助功能看起来是瞬时的。我定义了以下宏：

```
#define TIME_SAVE struct timeval _time_tv; gettimeofday(&_time_tv,NULL);
#define TIME_RESTORE settimeofday(&_time_tv,NULL); 
```

. . . 并将它们用作辅助函数的第一行和最后一行。但是，出于某种原因，辅助功能的开销仍然包括在内！

所以，我知道这是一个混乱的解决方案，所以我继续前进，但我仍然很好奇为什么这个想法不起作用。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T06:28:33.723

如果您坚持以这种方式进行分析，**请不要**设置系统时钟。如果您有权这样做，这将破坏各种事情。基本上你应该忘记你曾经听说过的`settimeofday`. 您要做的是`gettimeofday`在要从测量中排除的函数之前和之后调用，并计算差异。然后，您可以从总时间中排除在此函数中花费的时间。

话虽如此，整个“分析”方法存在很大缺陷，因为`gettimeofday`可能（1）与您尝试测量的内容相比需要大量时间，并且（2）可能涉及到内核空间的转换，这将做对程序的缓存一致性造成严重损害。第二个问题是最成问题的，即在试图观察程序的性能特征时实际上会改变它们。

你真正应该做的是忘记这种分析（`gettimeofday`甚至是 gcc 的`-pg`/gmon 分析），而是使用`oprofile`or`perf`或类似的东西。这些现代分析技术基于定期对指令指针和堆栈信息进行统计采样而工作；您的程序自己的代码根本没有被修改，因此它的行为尽可能接近在没有运行探查器的情况下的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:23:35.990

有几种可能发生。一是Linux试图保持时钟准确，并且对时钟的调整可能是“平滑的”或“固定的”，以试图在系统内保持平滑的时间感。如果您正在运行 NTP，它也会尝试保持合理的时间感。

我的方法是不修改时钟，而是跟踪流程每个部分所消耗的时间。对昂贵部分的调用将被累积（通过获取进入和退出时 gettimeofday 之间的差异并累积）并从总时间中减去。我敢肯定，还有其他更高级的方法的可能性。

# java - Hibernate 集成访谈

> ID：10370131
> 
> 赞同：2
> 
> 时间：2012-04-29T06:12:16.230
> 
> 标签：java, hibernate, jakarta-ee, jdbc

上周五我去一家 IT 咨询公司面试。

面试官问我关于我的项目以及我参与的情况。

突然，他提出了一个关于hibernate的问题。他的问题如下

“如果我有一个项目是使用Java EE环境在MVC架构中开发的，但是使用JDBC进行数据库交互，我将如何将Hibernate集成到其中。我不想打扰现有代码，所有以前的JDBC代码应该完好无损。”

我告诉他，我们在现有代码中添加 hibernate 的所有功能，因为它只需要配置文件，实体就是它。JDBC的旧代码本身可能是使用Datasourse获取连接，同样的datasourse可以使用JNDI在Hibernate中建立会话工厂，没什么大不了的。

但是面试官对我的回答并不满意，他需要更多的解释。我无法打动他。

那么，您能否建议上述问题的可能答案。或者至少给我一个提示，以便我可以得到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T06:29:48.627

我认为他想要的答案如下。

典型的应用程序设计需要层分离。有以下经典层：Web 层、业务逻辑和 DB。有一个名为 DAO（Data Access Objects）的薄层，它是用 java 编写的，在业务逻辑和 DB 之间起着“中间人”的作用。听起来这一层是使用纯 JDBC 实现的。

因此，用基于 Hibernate 的层替换这一层并没有问题。

现在，您可以添加有关如何配置 Hibernate 并将其与应用程序的其余部分集成的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:32:33.487

我想他可能是在找你解释你如何：

*   在现有 SQL 查询周围放置 Hibernate 包装器，或者
*   为遗留 SQL 表创建 Hibernate 绑定，或者
*   使用容器级事务集成 Hibernate 和经典 JDBC。

（很明显，他并没有问你如何用 Hibernate 代码*替换*旧的 JDBC 代码......）

但是，当然，您确实需要问他，他希望您在回答问题时展示什么知识/经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:10:02.877

不是一个确切的答案，您没有提到您的应用程序使用哪个框架，但如果您的应用程序使用 Spring 框架，[我的问题](https://stackoverflow.com/questions/9572226/using-hibernate-and-jdbc-both-in-spring-framework-3-0)及其答案将对您有所帮助，但我的问题是相反的，因为我想将 jdbc 与 hibernate 集成。

# php - 使用 PHP 将文件中的模式替换为另一个文件中存在的另一个替换字符串？

> ID：10370132
> 
> 赞同：1
> 
> 时间：2012-04-29T06:12:45.477
> 
> 标签：php, preg-replace, pattern-matching, wordnet

我必须在我的文本文件中找到 wordnet 的搭配。因为搭配不止一个单词或具有特殊字符，例如 ' - 。我已经存储了此类字符串/搭配的列表。现在在我的文本文件（来自语料库）中，我需要确定是否出现任何这些字符串。问题是由于我使用 POS 标记器，多词搭配被视为单独的单词，所以我需要首先从我的搭配列表中获取一个搭配，查找它是否出现在文本中，然后用一些特殊字符替换搭配中的空格，例如_ 所以 pos 标注器认为它是一个。我在列表中每个搭配的文本文件内容上尝试了 preg_replace，但我的浏览器崩溃或显示内存过载错误

```
$m=file_get_contents ('sample.txt');
$comp=file('collocation_list.txt');
for ($x=0; $x<= count($comp); $x++)
{
       $comp[$x] = trim(strtolower($comp[$x]));
   $c =$comp[$x];
   $rep=str_replace(" ","_",$c);
   $rep=" ".$rep." "; 
   $m =preg_replace($c,$rep,$m);   

} 
```

# iphone - iPhone 实用程序，FLipSideView 中的标签文本未更新

> ID：10370133
> 
> 赞同：0
> 
> 时间：2012-04-29T06:12:53.527
> 
> 标签：iphone, objective-c, xcode, ios5, uistoryboard

我在 Xcode 中使用带有主视图和反面视图的实用程序应用程序模板。在主视图中，我有一个名为 L0 的属性标签。我正在尝试在反面视图上复制该标签。另一方面，我已经宣布

```
@property (weak, nonatomic) IBOutlet UILabel *label; 
```

它在.m文件中合成

```
@synthesize label = _label; 
```

我的 prepareForFegue 方法是：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([[segue identifier] isEqualToString:@"showAlternate"]) {

     FlipsideViewController *fsv = (FlipsideViewController *)[segue destinationViewController];
     fsv.label = self.L0;
     fsv.delegate = self; 
}} 
```

但是，虽然如果我在 prepareForSegue 中使用 NSLog fsv.label.text 我看到它已正确设置为 L0.text 的值，但 Flipsideview 上的标签文本并没有改变。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T06:50:39.560

在 prepareForSegue 时，您的目标视图控制器已创建，但尚未加载视图。因此，当视图加载*时*，您分配给标签的任何内容都会被覆盖。您可以在对它进行任何操作之前通过记录标签属性来确认这一点——它将为零。

目标 VC 应该有一个字符串属性，您可以在 prepareForSegue 中使用所需的文本设置该属性。然后在 viewWillAppear 中通过该字符串属性设置标签的文本。

# c++ - 当 C++ DLL 程序退出时：运行时检查失败 #2

> ID：10370138
> 
> 赞同：0
> 
> 时间：2012-04-29T06:13:33.790
> 
> 标签：c++, visual-studio-2010, dll

我在使用 C++ 编写的 dll 时遇到问题。发生了一些我自己无法解决的**非常奇怪的行为。**

很难准确描述发生了什么，但我会尽力而为。基本上我的 DLL 中有一个类，它有一个私有属性和一个公共构造函数。**当我初始化这个类然后退出程序时，我得到一个错误。**

> “运行时检查失败 #2 - 变量 'test' 周围的堆栈已损坏”

我在这里有**2 个项目**：

1.  名为“ **testdll** ”的 DLL。
2.  名为“ **test** ”的控制台测试程序。

我已将此错误归结为最简单的可重现形式，以尝试缩小可能的原因，您将在下面找到我的代码。

**项目“testdll”，文件 testdll.h：**

```
#include <string>

class testdll
{
public:
__declspec(dllexport) testdll(); // Empty but same error if prams are used.

private:
std::string _var;
}; 
```

**项目“testdll”，文件 testdll.cpp：**

```
#include "testdll.h"

testdll::testdll()
{
} 
```

**项目“测试”，文件 testdll.h：**

```
#include <string>

class testdll
{
public:
    __declspec(dllimport) testdll();
}; 
```

**项目“测试”，文件 stdafx.h：**

```
#pragma once

#include "targetver.h"

#include <tchar.h> 
```

**项目“测试”，文件 test.cpp：**

```
#include "stdafx.h"
#include "testdll.h"

int _tmain(int argc, _TCHAR* argv[])
{
testdll test;

return 0;
} 
```

如果需要，我可以将**Visual C++ 2010**解决方案文件以您选择的存档格式发送给您。请帮忙！我不知道是怎么回事。

**可选信息：** 语言（或软件）：C++

**已尝试：** 删除构造函数定义，该方法有效但不是可用的解决方案，也不能解释问题。也可以将我所有的私有属性变成指针，但是我不应该这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:07:32.377

您正在使用*两个*头文件，它们没有声明同一个类。一个有一个 std::string 成员，另一个没有。这非常非常糟糕，编译器没有为堆栈帧上的对象保留足够的空间。这就是运行时错误告诉您的内容。非常好的功能顺便说一句，这种错误很难诊断。

您可能进入了这个pickle，因为您只将 __declspec(dllexport) 应用于构造函数而不是整个类。您需要编写头文件，以便您的 dll 项目*和*exe 项目都可以使用它。这应该是这样的：

```
#undef DLLEXPORT
#ifdef BUILDING_MYDLL
#  define DLLEXPORT __declspec(dllexport)
#else
#  define DLLEXPORT __declspec(dllimport)
#endif

class DLLEXPORT testdll
{
public:
    testdll();
private:
    std::string _var;
}; 
```

右键单击您的 DLL 项目、属性、C/C++、预处理器、预处理器定义。附加 BUILDING_MYDLL

并删除 exe 项目目录中的 testdll.h 文件。设置 C/C++、General、Additional Include Directories 设置，以便编译器可以在 testdll 项目目录中找到头文件（如 ..\testdll）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:19:22.907

正如您刚刚发现的那样，从 DLL 导出类和类成员非常脆弱。如果库和客户端不使用完全相同的类布局，这取决于各种编译器设置，那么事情就会失败。

在您的情况下，您可能正在使用不兼容的`std::string`inside版本`class testdll`。也许一个是为调试而编译的，一个是为发布而编译的。或者一个是使用静态运行时库，另一个是 DLL 运行时。谁能说？

无论如何，一旦您从 DLL 导出 C++ 功能，您就会将自己锁定在该编译器版本和设置中。这是维护的噩梦。

使用仅 v-table 基类或与 C 兼容的包装函数。

# objective-c - setAutoresizingMask from code in osx

> ID：10370140
> 
> 赞同：4
> 
> 时间：2012-04-29T06:13:51.107
> 
> 标签：objective-c, xcode, cocoa, autoresizingmask

There is a section in size inspector with name Atosizing that can set left,right,up,down layout of a control,i find that i do that with `setAutoresizingMask` but don't know how set it that my control layout to right and up (means when user resize window my control steak to right and up)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T08:42:55.110

看看这些`-setAutoresizingMask`参数：

> ***NSViewNotSizable***
> 
> 接收器无法调整大小。
> 
> ***NSViewMinXMargin***
> 
> 接收者和它的超级视图之间的左边距是灵活的。
> 
> ***NSViewWidthSizable***
> 
> 接收器的宽度是灵活的。
> 
> ***NSViewMaxXMargin***
> 
> 接收者与其上级视图之间的右边距是灵活的。
> 
> ***NSViewMinYMargin***
> 
> 接收者和它的超级视图之间的底部边距是灵活的。
> 
> ***NSViewHeightSizable***
> 
> 接收器的高度是灵活的。
> 
> ***NSViewMaxYMargin***
> 
> 接收者和它的超级视图之间的上边距是灵活的。

**所以你可以这样做：**

```
[YourOutlet setAutoresizingMask: NSViewMinXMargin | NSViewMinYMargin]; 
```

# c# - Find ip addresses of local devices in C# using mDNS

> ID：10370142
> 
> 赞同：2
> 
> 时间：2012-04-29T06:13:55.420
> 
> 标签：c#, ip-address, mdns

I have 3 cameras whose MAC and IP addresses are unknown to me, and I want to connect to them.

I've connected them to my computer with a UTP cable. Now what I have to do is to find their IP addresses in order to establish a connection. In the camera's API, it states that you can use TCP/IP to get video stream from the camera and to use mDNS to find their IP addresses.

How can I find the IP addresses in c#?

(NOTE: no router in need and "arp -a" command did not work)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-15T21:01:47.653

发送这个 mDNS 数据包似乎适用于我的具有 Raspberry Pi 的应用程序。我认为 IP/端口特定于 ZeroConf/Bonjour，它似乎被广泛使用，因此它可能适用于那些相机。

```
public void sendDiscoveryQuery(string local_dhcp_ip_address)
{
    // multicast UDP-based mDNS-packet for discovering IP addresses

    System.Net.Sockets.Socket socket = new System.Net.Sockets.Socket(System.Net.Sockets.AddressFamily.InterNetwork, System.Net.Sockets.SocketType.Dgram, System.Net.Sockets.ProtocolType.Udp);

    socket.Bind(new IPEndPoint(IPAddress.Parse(local_dhcp_ip_address), 52634));
    IPEndPoint endpoint = new IPEndPoint(IPAddress.Parse("224.0.0.251"), 5353);

    List<byte> bytes = new List<byte>();

    bytes.AddRange(new byte[] { 0x0, 0x0 });  // transaction id (ignored)
    bytes.AddRange(new byte[] { 0x1, 0x0 });  // standard query
    bytes.AddRange(new byte[] { 0x0, 0x1 });  // questions
    bytes.AddRange(new byte[] { 0x0, 0x0 });  // answer RRs
    bytes.AddRange(new byte[] { 0x0, 0x0 });  // authority RRs
    bytes.AddRange(new byte[] { 0x0, 0x0 });  // additional RRs
    bytes.AddRange(new byte[] { 0x05, 0x5f, 0x68, 0x74, 0x74, 0x70, 0x04, 0x5f, 0x74, 0x63, 0x70, 0x05, 0x6c, 0x6f, 0x63, 0x61, 0x6c, 0x00, 0x00, 0x0c, 0x00, 0x01 });  // _http._tcp.local: type PTR, class IN, "QM" question

    socket.SendTo(bytes.ToArray(), endpoint);
} 
```

“local_dhcp_ip_address”是您计算机网卡的 IP 地址。下面是此交互的wireshark 跟踪。该设备直接响应您的计算机。

[![在此处输入图像描述](../Images/8d06aa8b3983afea474970d00de1bb10.png)](https://i.stack.imgur.com/LqpNR.png)

此时 ARP -a 应该可以工作。您也可以使用[GetIpNetTable](https://stackoverflow.com/a/1148861/1750408)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:42:34.140

在某些设备上，MAC 地址印在标签上，可能在背面。据我了解，它们至少需要在 arp 缓存中一次。但此缓存仅存储 5 (?) 个条目，因此您可能需要在连接设备或运行配置工具之前刷新或清除它。

# web-crawler - 网络爬虫是否仅依赖主页上的链接进行爬取？

> ID：10370143
> 
> 赞同：0
> 
> 时间：2012-04-29T06:14:27.307
> 
> 标签：web-crawler

我的主页有链接到页面 a.html 和 b.html。在与这两个页面相同的目录中，我有页面**c.html**和**d.html**没有被**任何其他页面链接到**。

我的问题是**webcrawlers 是否也索引 c.html 和 d.html**只是因为它们在目录中？还是他们只关注从主页开始的链接，并且只索引主页以及页面 a 和 b？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T06:20:51.837

大多数网络爬虫（尤其是谷歌的爬虫）都是专有程序，因此您无法确定它们是如何工作的。

网络爬虫的细节非常复杂。据传 Google 的爬虫（和索引器）是一个超过 700 兆字节的二进制可执行文件（在 GCC 峰会上，Google 的人说他们正在编译这样大小的程序，我猜这是他们的爬虫）。

理论上，爬虫确实会跟随链接。但你不掌握它们。例如，一些公共邮件存档（甚至是您的 Gmail 帐户，对于 Google）可能指向您的`c.html` ……即使您的主网页没有指向它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T06:30:20.507

网络爬虫只知道链接，所以如果世界上没有人知道页面 c.html 和 d.html 的链接，那么爬虫找到它们的可能性非常接近 0。

让我们看看爬虫如何找到这些：

1.  您的主页仅指向 a.html 和 b.html，但如果这些页面有指向 c/d.html 的链接，那么爬虫*最终会*找到它们。
2.  如果上述情况不正确，但您给了某人指向 c/d.html 的链接，并且他们将这些链接发布在某个在线网站上，那么爬虫*最终会*找到它们。
3.  如果您有站点地图，那么爬虫最终可能会找到它们。

这假设爬虫是“好”的，并且它的爬取时间足够长以到达包含指向您的 c/d.html 页面的链接的页面。

# php - is_null vs ===null

> ID：10370145
> 
> 赞同：-4
> 
> 时间：2012-04-29T06:14:45.910
> 
> 标签：php

> **Possible Duplicate:**
> [What's the difference between is_null($var) and ($var === null)?](https://stackoverflow.com/questions/4662588/whats-the-difference-between-is-nullvar-and-var-null)

Is there any difference between following code:

```
if(is_null($x)) { ... 
```

and

```
if($x===null) { ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T06:18:25.457

Yes. `==` is a loose comparison, meaning a lot more than just `NULL` will result in `true` in the second version. See the [type comparison tables](http://us.php.net/manual/en/types.comparisons.php).

# java - 以最简单的方式创建和填充数组

> ID：10370146
> 
> 赞同：3
> 
> 时间：2012-04-29T06:15:01.837
> 
> 标签：java, arrays

我正在开发应用程序..

```
 class Wheel {
    private int size;

    Wheel(int s) {
        size = s;
    }

    void spin() {
        System.out.print(size + " inch wheel spinning, ");
    }

}

public class Bicycle {
    public static void main(String[] args) {
        Wheel[] wa = { new Wheel(15), new Wheel(17) };
        for (Wheel w : wa)
            w.spin();
    }
} 
```

但是请告知我们如何`Wheel[] wa = { new Wheel(15), new Wheel(17) };`用更简单的术语来表达。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T06:18:13.590

`Wheel[] wa = { new Wheel(15), new Wheel(17) };`就像您将要得到的一样简单。您到底在期待什么 - 您是否有需要更简单的问题？

它并不简单，但是如果你想做一些允许你添加更多`Wheel`s的东西，你需要将它单独分解出来，例如......

```
Wheel[] wa = new Wheel[2];
wa[0] = new Wheel(15);
wa[1] = new Wheel(17); 
```

或者可能...

```
int[] sizes = {15,17};
Wheel[] wa = new Wheel[sizes.length];
for (int i=0;i<sizes.length;i++){
    wa[i] = new Wheel(sizes[i]);
} 
```

这些并不简单，但如果你有很多`Wheel`s 要创建，它们会更好。

但是，如果您只有 2`Wheel`秒，那么您的陈述非常简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:33:02.400

如果您想要一个更短的表达式来创建轮子数组，那么您所拥有的就是一个简单的，因为它可以在没有其他方法的情况下获得。

您可以像这样创建工厂方法：

```
class Wheel {

    public static Wheel[] newWheels( int[] sizes ){
        Wheel[] result = new Wheel[sizes.length];
        for( int i=0; i < sizes.length; i++ )
           result[i] = new Wheel( sizes[i] );
        return result;
    }

    // ... other stuff ...
} 
```

这将使您的轮子创建声明：

```
Wheel[] wa = Wheel.newWheels( new int[]{ 15, 17 } ); 
```

当您只有两个预定尺寸的轮子时，这并不简单，但是如果您有更多的轮子，或者没有预定尺寸，这可能更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T06:45:08.807

```
Wheel[] wa = { new Wheel(15), new Wheel(17) }; 
```

看起来您正在维护不同数量的轮子集合。

因此，对于每个集合，您都可以创建`java.util.Set<E>`（如果集合不包含重复的轮子）或使用`java.util.List<E>`（允许重复）

您可以放入`array`或放入 map( `java.util.Map<K,V>`) 中。地图将是更好的选择，您可以更好地控制特定`Set or List`的 .

```
 List<Wheel> wh1=new ArrayList<Wheel>(15);
    List<Wheel> wh2=new ArrayList<Wheel>(17);
    Map<String,List<Wheel>> wa=new HashMap<String,List<Wheel>>();
    wa.put("1stList", wh1);
    wa.put("2ndList", wh2); 
```

# c - Creating Plugin Management System

> ID：10370152
> 
> 赞同：4
> 
> 时间：2012-04-29T06:15:55.490
> 
> 标签：c, linux, x11

What options do I have as far as creating a plugin management system for something such as [Conky](http://conky.sourceforge.net/). What I am interested in is creating a system for Conky that would allow me to create new functions and add them through a shared library. This I feel would make it easier to create new configurations and variables for Conky without the need to recompile from source and allow these new functions to be shared independent of Conky. What are some general starting points for creating a system such as this? Are shared libraries the best option or are there better one.

I realize Conky already has an ability similar to this with the ability to call a system shell and return whatever is required, however many of the functions I would like to add would bog down Conky unless directly written in.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:47:00.093

看看 dlopen()。

这是一些不错的教程：[http ://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)

我做了一些类似于我用 C 从头开始​​编写的 IRC 机器人。我使用 dlopen() 来做这样的事情。该机器人可以编译它自己的新模块并在运行时加载它们:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:32:57.197

考虑到 conky 的一些模块已经使用 GLib，您不妨看看 GLib 的模块系统 (GModule)：http: [//developer.gnome.org/glib/stable/glib-Dynamic-Loading-of-Modules。 html](http://developer.gnome.org/glib/stable/glib-Dynamic-Loading-of-Modules.html)

基于此的另一个方便的库是 libpeas：http: [//developer.gnome.org/libpeas/stable/](http://developer.gnome.org/libpeas/stable/)

# iphone - RaptureXML 有点慢

> ID：10370153
> 
> 赞同：0
> 
> 时间：2012-04-29T06:15:57.207
> 
> 标签：iphone, ios, xml

我最近从 TBXML 切换到 RaptureXML，尽管提取信息要容易得多，但当我点击包含我的 xml 表视图的选项卡栏按钮时会有明显的延迟。

在我的 viewDidLoad 方法中，我有以下内容“

```
events = [[NSMutableArray alloc] init];

[self loadURL]; 
```

我的 loadURL 方法如下：

```
- (void)loadURL {

RXMLElement *rootXML = [RXMLElement elementFromURL:[NSURL URLWithString:@"http://api.somexml.com/xml"]];

[rootXML iterateWithRootXPath:@"//event" usingBlock:^(RXMLElement *event) {
    [events addObject:[NSArray arrayWithObjects:
                       [event attribute:@"uri"],
                       [event attribute:@"displayName"],
                       [event attribute:@"type"],
                       nil]];  
}];

[rootXML iterateWithRootXPath:@"//location" usingBlock: ^(RXMLElement *location) {
    [events addObject:[NSArray arrayWithObjects:
                       [location attribute:@"city"],
                       [location attribute:@"lat"],
                       [location attribute:@"lng"],
                       nil]]; 
}];

[rootXML iterateWithRootXPath:@"//start" usingBlock:^(RXMLElement *start) {
    [events addObject:[NSArray arrayWithObjects:
                       [start attribute:@"time"],
                       [start attribute:@"date"],
                       nil]]; 
}];

} 
```

我可以做些什么来加快速度吗？此外，当我将我的行数指定为 [events count] 时，我得到了 19 行，而我应该只得到 6 行。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T13:44:41.633

直到在正确的轨道上。您需要在后台线程上进行解析。执行以下操作：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [self loadURL];

    dispatch_async(dispatch_get_main_queue(), ^{
        [tableView reloadData];
    });
}); 
```

您会注意到我正在主线程上重新加载 tableview。在后台线程上更新界面元素有点不行。

# windows-phone-7 - Windows Phone 7 的本地数据库应用程序中 NotifyPropertyChanged 上的 MissingMethodException

> ID：10370154
> 
> 赞同：0
> 
> 时间：2012-04-29T06:16:24.163
> 
> 标签：windows-phone-7, inotifypropertychanged, missingmethodexception

在为 Winows Phone 7.1 制作 MVC 应用程序时，我一直在关注 MSDN 教程作为参考：http: [//msdn.microsoft.com/en-us/library/hh286405 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh286405(v=vs.92).aspx)

在我的应用程序中，我在实现 INotifyPropertyChanging 和 INotifyPropertyChanged 接口的表中有一个对象，以及这样的属性：

```
private DateTime lastViewDate;
[Column]
public DateTime LastViewDate
{
    get { return lastViewDate; }
    set
    {
       if (lastViewDate != value)
       {
           NotifyPropertyChanging("LastViewDate");
           lastViewDate = value;
           NotifyPropertyChanged("LastViewDate");
       }
    }
} 
```

当 LastViewDate 属性发生更改时，即使该属性显然存在，也会在调用 NotifyPropertyChanging 时引发 MissingMethodException。那么我做错了什么？（我是 wp7 编程的菜鸟，所以这可能很明显，只是对我来说不是）

编辑：更多信息

这是接口方法，添加了一些调用来检查方法：

```
 // Used to notify that a property is about to change
    private void NotifyPropertyChanging(string propertyName)
    {
        var type = this.GetType();
        var method = type.GetMethod(propertyName); // null
        var getMethod = type.GetMethod("get_" + propertyName); // works
        var setMethod = type.GetMethod("set_" + propertyName); // works
        var methods = type.GetMethods(); // set_LastViewDate is in the method list
        //
        if (PropertyChanging != null)
        {
            PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
        }
    } 
```

更改对 NotifyPropertyChanging("set_LastViewDate"); 的调用 仍然给出同样的例外。（并且“方法”在调试类型检查中为空）

编辑：

堆栈跟踪：

```
System.MissingMethodException was unhandled
Message=MissingMethodException
StackTrace:
   at System.Activator.InternalCreateInstance(Type type, Boolean nonPublic, StackCrawlMark& stackMark)
   at System.Activator.CreateInstance(Type type)
   at System.Data.Linq.WorkAround.ActivationHelper.CreateInstance(Type type)
   at System.Data.Linq.ChangeTracker.StandardChangeTracker.StandardTrackedObject.CreateDataCopy(Object instance)
   at System.Data.Linq.ChangeTracker.StandardChangeTracker.StandardTrackedObject.StartTracking()
   at System.Data.Linq.ChangeTracker.StandardChangeTracker.OnPropertyChanging(Object sender, PropertyChangingEventArgs args)
   at WindowsPhonePlaces.Photo.NotifyPropertyChanging(String propertyName)
   at WindowsPhonePlaces.Photo.set_LastViewDate(DateTime value)
   at WindowsPhonePlaces.Photo.ResetViewDate()
   at WindowsPhonePlaces.PhotoViewerPage.OnNavigatedTo(NavigationEventArgs e)
   at Microsoft.Phone.Controls.PhoneApplicationPage.InternalOnNavigatedTo(NavigationEventArgs e)
   at System.Windows.Navigation.NavigationService.RaiseNavigated(Object content, Uri uri, NavigationMode mode, Boolean isNavigationInitiator, PhoneApplicationPage existingContentPage, PhoneApplicationPage newContentPage)
   at System.Windows.Navigation.NavigationService.CompleteNavigation(DependencyObject content, NavigationMode mode)
   at System.Windows.Navigation.NavigationService.ContentLoader_BeginLoad_Callback(IAsyncResult result)
   at System.Windows.Navigation.PageResourceContentLoader.BeginLoad_OnUIThread(AsyncCallback userCallback, PageResourceContentLoaderAsyncResult result)
   at System.Windows.Navigation.PageResourceContentLoader.<>c__DisplayClass4.<BeginLoad>b__0(Object args)
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
   at System.Delegate.DynamicInvokeOne(Object[] args)
   at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
   at System.Delegate.DynamicInvoke(Object[] args)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
   at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
   at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
   at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
   at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T19:59:55.507

我将解决方案作为单独的答案放在此处以明确表示：

问题是我将构造函数设为私有并使用静态方法来创建我的数据库对象。这不适用于 LINQ——您需要一个无参数的公共构造函数。

感谢@Metro Smurf 和@Rajeev Nair 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:31:08.297

是否`PropertyChanging`公开？如果不是，则应将其设置为公开。

# python - 在python中为预先存在的字典键添加一个值

> ID：10370163
> 
> 赞同：2
> 
> 时间：2012-04-29T06:18:24.427
> 
> 标签：python, google-app-engine, gql, gqlquery

我一直在尝试向预先存在的字典键添加一个值。该值来自`Car`具有名为 的属性的 db.Model `price`。

尝试了两个代码块（如下），但得到了 AttributeError: 'GqlQuery' object has no attribute 'price'。

```
items = {"BE1234":"2","BE1923":"3","BE2032":"1", etc}
------------------------------------------------------------
block 1)
for item in items:
  cars = db.GqlQuery('SELECT * FROM Car WHERE item=:1',item)
  items[item] = cars.price
------------------------------------------------------------
block 2)
for item in items:
  cars = db.GqlQuery('SELECT * FROM Car WHERE item=:1',item)
  items.update({item:cars.price}) 
```

我想要得到的是：

`items = {"BE1234":["2","100"],"BE1923":["31","200"],"BE2032":["19","300"], etc}`

**更新（最终工作代码）**

```
for item in items:
  cars = db.GqlQuery('SELECT * FROM Car WHERE item=:1',item)
  for car in cars:
    items[item]=[items[item],str(car.price)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T06:21:08.517

构造一个要插入的列表（值）并仅更新键的值： `items["BE1234"] = ["2", "100"]`

详细（Shiva 的评论有一种“更清洁”的方式来做同样的事情）：

```
current_val = items["BE1234"]
new_val = "100";
new_array = [current_val, new_val]
items["BE1234"] = new_array 
```

# proxy - ARP中毒和代理

> ID：10370174
> 
> 赞同：0
> 
> 时间：2012-04-29T06:20:11.760
> 
> 标签：proxy, arp

假设我在网络上。我使用代理服务器在 https 模式下使用我的 facebook（我从 hidemyass.com 获得

现在假设我局域网中的某个人执行了 arp 中毒，而我是受害者计算机，所以我知道他将能够看到我的全部流量......但他也能看到我的 Facebook 流量......我知道密码部分将被加密，但我访问的 url 呢？以及如何保护自己免受伤害。我在谷歌上搜索了防止 arp poisining 的保护，但它们为我提供了网络级别的解决方案.. 用户级别的解决方案怎么样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:25:17.047

这实际上取决于他对您执行 MitM 攻击的效率。在标准家庭网络上只有真正的反对 ARP 欺骗的方法。一些网络为托管交换机和注释提供了一种将 MAC 锁定到 IP 并在攻击发生时报告攻击的方法，但这对于大多数家庭网络来说并不常见。

就读取您的加密流量而言，由于证书颁发机构在服务器和客户端执行检查的方式，除非攻击者拥有服务器的私钥或将您的浏览器重定向到私有密钥，否则不太可能看到攻击真正起作用您的浏览器将接受的密钥。您最有可能看到的是未匹配密钥异常，其中攻击者提供的密钥不会被您的浏览器自动接受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-03T01:37:13.747

不，攻击者将无法看到流量。攻击者唯一会看到的是您的流量正在流向特定的代理服务器。就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:17:17.070

不幸的是，在使用动态配置的网络中没有一般保护。如果您希望获得保护，它必须得到硬件（开关）的支持，在该硬件（开关）中可以识别 arp 中毒攻击并屏蔽系统。

如果攻击者可以访问您的数据流，他就可以控制它。

用于 arp mitm 攻击的已知工具是[cain & abel](http://www.oxid.it/cain.html)和[AyCarrumba](http://web.archive.org/web/20130330145650/https://www.megapanzer.com/2012/06/07/fishing-passwords-with-aycarrumba/)

# jquery-ui - Jquery UI 模态对话框不起作用

> ID：10370175
> 
> 赞同：1
> 
> 时间：2012-04-29T06:20:17.190
> 
> 标签：jquery-ui

我很难找到一种让 jquery ui 模态对话框工作的方法。模态对话框只返回 false ......

一个小提琴你可以在这里看到[http://jsfiddle.net/fVrFj/6/](http://jsfiddle.net/fVrFj/6/)

```
 function modal_delete_pics(){
            $(function(){
              $( "#dialog:ui-dialog" ).dialog( "destroy" );

              $( "#dialog-confirm" ).dialog({
                resizable: false,
                height:140,
                modal: true,
                buttons: {
                    "delete": function() {
                       $( this ).dialog( "close" );

                                     return true;
                },
                    "cancel": function() {
                        $( this ).dialog( "close" );
                        return false;

                }
            }

        });
    });
};
    $('#clickme').click(function(){
        if(modal_delete_pics()==true){
           $('body').append('<div>deleted</div>');  
           }
          else{                   
             $('body').append('<div>canceled</div>');
              }
}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T00:03:48.820

您在另一个函数 ( `$( "#dialog-confirm" ).dialog`) 中的一个函数 ( `$(function()`) 中有一个函数 ( `function modal_delete_pics()`)。

而且，最内层函数 ( `$( "#dialog-confirm" ).dialog`) 的返回值不会冒泡。

您可以尝试一种更简单的方法：

```
$("#dialog-confirm").dialog({
        resizable: false,
        height: 140,
        modal: true,
        autoOpen: false,      
        buttons: {
            "delete": function() {
                //put your image delete code here
                $('body').append('<div>deleted</div>');
                $(this).dialog("close");
            },
            "cancel": function() {
                $('body').append('<div>canceled</div>');
                 $(this).dialog("close");
            }
        }
});

$('#clickme').click(function() {
    $("#dialog-confirm").dialog("open");
});​ 
```

小提琴：http: [//jsfiddle.net/fVrFj/10/](http://jsfiddle.net/fVrFj/10/)

# java - Communication between Java and Haskell

> ID：10370177
> 
> 赞同：23
> 
> 时间：2012-04-29T06:20:22.453
> 
> 标签：java, haskell, java-native-interface

I googled and got some answers that communication between Java and Haskell can be done by GCJNI(Now the site is down) and LambdaVM.. To use the LambdaVM/GCJNI, whether I need to download any build tools? Where can I know more about them, since I don't find much resources on online?

I want to develop an application that communicates between Java and Haskell(Where I will get the input from Java pass it to the Haskell and process there and return the result back to Java).This is what I want to do. Please help me...

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-29T08:53:35.727

[从 C 调用 Haskell](http://www.haskell.org/haskellwiki/Calling_Haskell_from_C)看起来很容易，因此也可以使用[JavaCPP](https://github.com/bytedeco/javacpp)从 Java 轻松调用。例如，`fibonacci_hs()`从示例代码调用函数`Safe.hs`：

```
{-# LANGUAGE ForeignFunctionInterface #-}

module Safe where

import Foreign.C.Types

fibonacci :: Int -> Int
fibonacci n = fibs !! n
    where fibs = 0 : 1 : zipWith (+) fibs (tail fibs)

fibonacci_hs :: CInt -> CInt
fibonacci_hs = fromIntegral . fibonacci . fromIntegral

foreign export ccall fibonacci_hs :: CInt -> CInt 
```

我们可以从 Java 中这样做：

```
import org.bytedeco.javacpp.*;
import org.bytedeco.javacpp.annotation.*;

@Platform(include={"<HsFFI.h>","Safe_stub.h"})
public class Safe {
    static { Loader.load(); }
    public static native void hs_init(int[] argc, @Cast("char***") @ByPtrPtr PointerPointer argv);
    public static native int fibonacci_hs(int i);
    public static void main(String[] args) {
        hs_init(null, null);
        int i = fibonacci_hs(42);
        System.out.println("Fibonacci: " + i);
    }
} 
```

在 Linux 下，编译过程如下所示：

```
$ ghc -fPIC -dynamic -c -O Safe.hs
$ javac -cp javacpp.jar Safe.java
$ java -jar javacpp.jar -Dplatform.compiler=ghc -Dplatform.compiler.output="-optc-O3 -Wall Safe.o -dynamic -fPIC -shared -lstdc++ -lHSrts-ghc7.6.3 -o " -Dplatform.linkpath.prefix2="-optl -Wl,-rpath," Safe 
```

并且程序使用通常的`java`命令正常运行：

```
$ java -cp javacpp.jar:. Safe
Fibonacci: 267914296 
```

* * *

**编辑**：我冒昧地对调用开销进行了一些微基准测试。使用以下 C 头文件`Safe.h`：

```
inline int fibonacci_c(int n) {
    return n < 2 ? n : fibonacci_c(n - 1) + fibonacci_c(n - 2);
} 
```

以下 Java 类：

```
import org.bytedeco.javacpp.*;
import org.bytedeco.javacpp.annotation.*;

@Platform(include={"<HsFFI.h>","Safe_stub.h", "Safe.h"})
public class Safe {
    static { Loader.load(); }
    public static native void hs_init(int[] argc, @Cast("char***") @ByPtrPtr PointerPointer argv);
    public static native int fibonacci_hs(int i);
    public static native int fibonacci_c(int n);
    public static int fibonacci(int n) {
        return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
    }
    public static void main(String[] args) {
        hs_init(null, null);

        for (int i = 0; i < 1000000; i++) {
            fibonacci_hs(0);
            fibonacci_c(0);
            fibonacci(0);
        }
        long t1 = System.nanoTime();
        for (int i = 0; i < 1000000; i++) {
            fibonacci_hs(0);
        }
        long t2 = System.nanoTime();
        for (int i = 0; i < 1000000; i++) {
            fibonacci_c(0);
        }
        long t3 = System.nanoTime();
        for (int i = 0; i < 1000000; i++) {
            fibonacci(0);
        }
        long t4 = System.nanoTime();
        System.out.println("fibonacci_hs(0): " + (t2 - t1)/1000000 + " ns");
        System.out.println("fibonacci_c(0): "  + (t3 - t2)/1000000 + " ns");
        System.out.println("fibonacci(0): "    + (t4 - t3)/1000000 + " ns");
    }
} 
```

使用 Intel Core i7-3632QM CPU @ 2.20GHz、Fedora 20 x86_64、GCC 4.8.3、GHC 7.6.3 和 OpenJDK 8 输出：

```
fibonacci_hs(0): 200 ns
fibonacci_c(0): 9 ns
fibonacci(0): 2 ns 
```

平心而论，我应该提一下，调用JVM 也是相当昂贵的*......*

* * *

**更新**：[随着最近对 JavaCPP 的更改](https://github.com/bytedeco/javacpp/commit/e8825ab479c2b8e92e8d63c846c5adb3269d14d2)，用户现在可以从 C/C++ 按名称访问回调函数（指针），从而可以轻松地从 Haskell 调用 JVM。例如，根据在[wiki 页面上找到的有关 Haskell 的 FFI 的](http://www.haskell.org/haskellwiki/FFI_complete_examples)信息，将以下代码放置在`Main.hs`：

```
{-# LANGUAGE ForeignFunctionInterface #-}
module Main where

import Foreign.C -- get the C types
import Foreign.Ptr (Ptr,nullPtr)

-- impure function
foreign import ccall "JavaCPP_init" c_javacpp_init :: CInt -> Ptr (Ptr CString) -> IO ()
javacpp_init :: IO ()
javacpp_init = c_javacpp_init 0 nullPtr

-- pure function
foreign import ccall "fibonacci" c_fibonacci :: CInt -> CInt
fibonacci :: Int -> Int
fibonacci i = fromIntegral (c_fibonacci (fromIntegral i))

main = do
  javacpp_init
  print $ fibonacci 42 
```

以及以`fibonacci`这种方式在 Java 中定义的函数：

```
import org.bytedeco.javacpp.*;
import org.bytedeco.javacpp.annotation.*;

@Platform
public class Main {
    public static class Fibonacci extends FunctionPointer {
        public @Name("fibonacci") int call(int n) {
            return n < 2 ? n : call(n - 1) + call(n - 2);
        }
    }
} 
```

我们可以在 Linux x86_64 下构建类似的东西：

```
$ javac -cp javacpp.jar Main.java
$ java -jar javacpp.jar Main -header
$ ghc --make Main.hs linux-x86_64/libjniMain.so 
```

并且程序正确执行并给出以下输出：

```
$ ./Main
267914296 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T15:33:40.783

如果您选择 Haskell 服务器进程方法，您可以使用**MessagePack**序列化/rpc 库。它具有 Java 和 Haskell 的绑定，并且 Haskell 绑定似乎维护得很好。在 Hackage 上查找**msgpack**和**msgpack-rpc**。

这是一个使用 MessagePack 进行 Java/Haskell 交互的玩具示例：[Java 服务器](https://github.com/danidiaz/xanela-driver/blob/master/src/main/java/info/danidiaz/xanela/driver/Xanela.java)、[Haskell 客户端](https://github.com/danidiaz/haskell-xanela-client/blob/master/src/Main.hs)（链接到 GitHub）。但是，沟通与您想要的方向相反。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T08:43:09.313

这取决于您希望他们如何沟通。让 Java 和 Haskell 代码在同一进程中本地运行并通过各自的 FFI 在内存中交换数据是一个巨大的问题，尤其是因为您有两个 GC 争夺数据，并且两个编译器都有自己的关于表示的想法各种数据类型。在 JVM 下编译 Haskell 也很困难，因为 JVM（目前）没有任何闭包的概念。

当然这些事情是可以做到的，但是从演示器到工业工具需要付出巨大的努力。我的理解是，您提到的工具从未通过演示阶段。

一个更简单但不那么优雅的解决方案是将您的 Haskell 程序编写为一个服务器进程，该进程通过 Java 的套接字发送数据。如果性能和容量不太高，那么用 JSON 编码可能会很简单，因为双方都有库来支持它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-22T03:00:11.490

**TL;DR：使用消息传递（即 RPC 客户端-服务器或对等点）模式。**

**为什么？**它更安全、可扩展、灵活且可调试。调用 FFI 将是脆弱且难以测试的。

* * *

**RPC 框架/规范**

*   **[gRPC](http://www.grpc.io/)** Google 的 Protobufs RPC over HTTP/2 的公共分支

    *   [非官方的 Haskell gRPC 绑定](https://github.com/aloiscochard/grpc-haskell)
*   **[msgpack-rpc](https://github.com/msgpack-rpc/msgpack-rpc)**不包括传输。

*   **[zerorpc](http://www.zerorpc.io/)** ZeroMQ + msgpack。只有 Python 和 Node 实现。好像也弃了。

*   **XML-RPC**成熟。广泛的互操作性，但它也是 XML。

*   **JSON-RPC**更容易调试。不是二进制协议，尽管 BSON 可能会侵入某些库。

* * *

**序列化**

*   **Protocol Buffers (protobufs)**有很多很多的工具。它支持不需要重新编译（或破坏）世界来进行互操作的版本化/可选数据成员。

*   **msgpack**可爱，简单高效，但不支持前向兼容的模式更改。它纯粹是一个愚蠢的二进制编解码器。对于实际使用来说，可能过于简单和低级。

* * *

**运输**

*   **[ZeroMQ](http://zeromq.org/)**可能是最快的、非 Infiniband/FC/10 GbE、非线程安全的消息传输。

*   **[Nanomsg](http://nanomsg.org/)**一种更新的、线程安全的 UNIX 哲学，它的一位创始人对 ZeroMQ 进行了重新构想。

*   **HTTP/2**（由 gRPC 使用）这里的优势是它是一个在数据中心内部和数据中心之间工作的标准，并且还具有 TLS（gRPC 原生代码使用 BoringSSL，Google 的“更安全”的 OpenSSL 分支）。

*   **MQTT**当您需要向十亿台设备实施推送通知并使用人类可读的协议时。

# android - Android:drag and drop items from one list to another

> ID：10370183
> 
> 赞同：2
> 
> 时间：2012-04-29T06:22:51.663
> 
> 标签：android, android-layout, drag-and-drop, android-listview, android-ui

I am looking for a nice user interface where i can move files from one folder(in phone memory) to another(cloud storage space) using drag and drop..

Can i represent files in my folders as a listView?drag and drop in it?

Can anybody help me with a sample or point me in the right direction or give any info thing regarding this...

Thanks..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:47:42.397

好的，所以只知道官方 DnD api 只在 3.0 中引入，所以 DnD 代码会很长而且有点复杂，但它不应该太难，因为它已经完成了很多次，只需使用你可以找到的示例 - 我会使用google 的音乐应用程序排序代码或基于它的@CommonsWare[代码，并根据您的喜好调整放置代码（删除重新出现在新位置并添加代码以将其移动到新位置）。](https://github.com/commonsguy/cwac-touchlist)

我希望它有所帮助，祝你好运！

# jquery - jQuery UI 选项卡“选择”事件被“单击”事件覆盖——未捕获的 TypeError

> ID：10370184
> 
> 赞同：1
> 
> 时间：2012-04-29T06:23:01.713
> 
> 标签：jquery, tabs, jquery-ui-tabs, typeerror

我在以编程方式选择选项卡时遇到了一些问题。我的选项卡加载在 Fancybox 对话框窗口中，该窗口在单击链接时启动。基本上，我想在选择选项卡时执行某些操作，并在单击链接时选择特定选项卡。

我正在使用如下`select`事件初始化 jQuery UI 选项卡：

```
$('#tabs').tabs({

    select: function(event, ui) {

        // edit: here is the issue
        var activePanel = '.ui-tabs-panel:visible ';

        // grab value of a form input
        var text = $(activePanel + 'someElement').val();

        // check its length
        if ( text.length > 0 ) {
           // do stuff
        }
    }
}) 
```

稍后在我的 JS 文件中，我有以下内容：

```
$(document).on('click', 'a.edit', function() {
    if($category == 'book') {
        // load the tab specific to the 'book' category
        $('#tabs').tabs({ selected: 3 });
    }
}) 
```

当我单击`a.edit`“书”类别中某个项目的链接时，我的控制台会抛出此错误：

```
Uncaught TypeError: Cannot read property 'length' of undefined 
```

然后，没有在 Fancybox 中加载选项卡，没有任何反应。当我单击不在图书类别中的项目的链接时，*不会*引发此错误。因此，有两件事非常明显：

1.  我是n00b
2.  我的`select`事件显然被点击事件覆盖，所以`text`没有设置

我尝试`text`在我的 JS 文件顶部设置默认值，但这不起作用。那么，我的问题是：

**使用选择事件初始化 UI 选项卡的正确方法是什么，同时还能够通过单击事件以编程方式选择选项卡？**

或者，更简洁地说，

**为什么我得到那个该死的错误？**

*编辑：我修改了上面的第一个代码块，以包含我发现与我的问题相关的代码。请参阅下面的答案以获得更全面的解释。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:00:15.357

我发现了问题：我确实是个n00b。

我`text`根据选项卡是否可见来设置变量。因为我的标签默认是隐藏的，所以从来没有一个可见的面板可以从中获取值。

我通过添加一个简单的检查来解决这个问题，以查看在分配变量之前父元素是否可见：

```
if ( $('#tab_container').is(':visible') ) {

    // now we can safely set this variable...
    var activePanel = '.ui-tabs-panel:visible ';

    // ...and this will always have a value
    var text = $(activePanel + 'someElement').val();
} 
```

# c# - Programmatically add a TextBlock to a DataTemplate

> ID：10370187
> 
> 赞同：3
> 
> 时间：2012-04-29T06:23:50.487
> 
> 标签：c#, wpf, xaml, datatemplate

```
<DataTemplate>
    <TextBlock x:Name="Txt" Text="{Binding fieldA}" />
</DataTemplate> 
```

I want to do the equivalent of the above XAML programatically (There is more to the XAML, I have only shown the relevant bits). So far I have got:

```
DataTemplate newDataTemplate = new DataTemplate();
TextBlock newTextBlock = new TextBlock();
newTextBlock.SetBinding(TextBlock.TextProperty, new Binding("fieldA"));
newTextBlock.Name = "txt"; 
```

So how do I now add the TextBlock to the DataTemplate.. i.e. I want to do something like:

```
newDataTemplate.children.Add(TextBlock) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T06:27:42.107

```
var newTextBlock = new FrameworkElementFactory(typeof(TextBlock));
newTextBlock.Name = "txt";
newTextBlock.SetBinding(TextBlock.TextProperty, new Binding("fieldA"));
DataTemplate newDataTemplate = new DataTemplate(){VisualTree = newTextBlock}; 
```

我认为你应该看看这个问题。

[如何以编程方式创建包含内容的数据模板？](https://stackoverflow.com/questions/8427972/how-do-i-create-a-datatemplate-with-content-programmatically)

# android - Issue with reading file from internal memory

> ID：10370188
> 
> 赞同：0
> 
> 时间：2012-04-29T06:24:08.843
> 
> 标签：android

I m using read & write string to internal memory. My **"WriteFavData"** is working fine. But In **"ReadFavData"** is not working. Actually when i reach the line **if(favFile.exists())** in ReadFavData(..,..), it says file not found & execute the else part. I have already check the emulator internal memory using command line shell access **adb shell cat /data/data/com.android.mypackage/files/fav_data_channel**, the file is there. Why is saying file is not present.? Any ideas....

```
 public boolean ReadFavData(Context context, String channelName)
        {
            boolean isFileFound = false;
            FileInputStream fin ;
            StringBuffer strContent = new StringBuffer("");
            String fileName = FAV_FILE_NAME + "_" + channelName;
            File favFile = new File(fileName);
            int ch;
            if(favFile.exists())
            {
                isFileFound = true;
                try {
                    fin = context.openFileInput(FAV_FILE_NAME + "_" + channelName);
                    isFileFound = true;
                    while ((ch = fin.read()) != -1)
                        {
    strContent.append((char) ch);
    }

                    fin.close();                

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }       
            }
            else 
            {
                Log.i(TAG, "not found");
            }

            return isFileFound;
        }

public boolean WriteFavData(Context context, String channelName)
        {
            String favStr;
            FileOutputStream fos ;
            JSONObject videos = new JSONObject();           
            videos.put("videos", favJsonArray);
            String favStr = videos.toJSONString(); //note.toString();
            String fileName = FAV_FILE_NAME + "_" + channelName;
            File f = new File(fileName);
            if(f.exists())
            {
                Log.i("Old FIle", "Found");
                f.delete();     
            }

            if(f.exists())
                Log.i("Still", "Exist");

            try {               
                    fos = context.openFileOutput(FAV_FILE_NAME + "_" + channelName, Context.MODE_PRIVATE);              
                fos.write(favStr.getBytes());
                fos.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }       
            return true;
        } 
```

Actually, i debugged again & track that on line **if(file.exists())**, the file is not present.. But if i comment this line & read my file directly, i m able to read file successfully. Whats wrong with **if(file.exists())**?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:15:13.243

`favFile.exists()`总是返回`false`这里，因为它不会去你的私有数据目录去检查它。`openFileInput`或者`openFileOutput`会做。

删除它并抓住一个`FileNotFoundException`for `openFileInput`。

或者您可以在`favFile`名称之前添加私有数据目录的路径。

```
new File("/data/data/com.android.mypackage/files/fav_data_channel").exists(); 
```

那将是真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:30:01.070

写入文件后尝试调用 Filedescription.sync()。

```
FileOutputStream fos = ...
...
fos.getFD().sync(); 
```

# php - “where 子句”中的未知列“examinfo.id_examinfo”

> ID：10370194
> 
> 赞同：0
> 
> 时间：2012-04-29T06:26:02.207
> 
> 标签：php, jquery, search, join, get

我收到此错误：'where 子句中的未知列'examinfo.id_examinfo'

我的查询是

```
$examinf = $_GET['info'];
$sec = $_GET['sec'];
$sp = $_GET['sp'];
$datefrom= $_GET['datefrom'];
$dateto= $_GET['dateto'];
$where[] = "1=1";
if($examinf!='') $where[] = "`examinfo.id_examinfo`=`exams.id_examinfo` AND
`exams.id_examinfo` = '$examinf'";
if($sec!='') $where[] = "`secretary.id_sec`=`exams.id_sec` AND `exams.id_sec` = '$sec'";
if($sp!='') $where[] = "`specialties.id_sp`=`exams.id_sp`  AND `exams.id_sp` = '$sp'";
if($datefrom) $where[] = "`exams.date_exams` >= '$datefrom'";
if($dateto) $where[] = "`exams.date_exams` <= '$dateto'";
$where = @JOIN(" AND ", $where);
mysql_select_db($database_trainingdb, $trainingdb);
$query_Recordset_res = "SELECT secretary.name_sec, specialties.ar_sp, examinfo.name_examinfo,
exams.date_exams FROM exams, secretary, specialties, examinfo WHERE $where";
$Recordset_res = mysql_query($query_Recordset_res, $trainingdb) or die(mysql_error());
$row_Recordset_res = mysql_fetch_assoc($Recordset_res);
$totalRows_Recordset_res = mysql_num_rows($Recordset_res); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T06:32:21.923

反引号用于分隔表或字段名称。所以这是不正确的语法：

```
`examinfo.id_examinfo`. 
```

因为你没有这样的专栏`examinfo.id_examinfo`。应该

```
`examinfo`.`id_examinfo` 
```

或者干脆

```
examinfo.id_examinfo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:29:47.763

亲爱的这个错误表明你给的列名在特定的表中不存在，所以请检查你的列名。

# c++ - 结合一个组合的RNG？带有分布的 std::xor_combine 模板？

> ID：10370195
> 
> 赞同：0
> 
> 时间：2012-04-29T06:26:43.627
> 
> 标签：c++, random, c++11

我正在尝试学习 C++11**随机**的东西，所以我从[这个](http://www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c15319/A-TR1-Tutorial-Generating-Random-Numbers.htm)站点复制了一个示例，该站点在 stackoverflow 上找到...

我想在这里实现的是使用**std::xor_combine**模板来组合两个引擎并使用第三个引擎对其进行初始化。根据上面的链接，这应该是可能的，但是自从 Tr1 报告以来，这里似乎有些事情发生了变化？

此外，您将在代码中看到一个指数分布对象，所以还有一个问题是如何将**xor_combine** lobject 与分布结合起来，以便将“组合”传递给分布**operator()**？

Visual Studio 给了我下面代码中描述的错误...

```
#include<iostream>
#include<random>
#include<ctime>
using namespace std;

int main()

{
    minstd_rand gen1;
    mt19937 gen2;
    linear_congruential_engine<unsigned long, 34999, 0, 3405989> seeder;

seeder.seed(static_cast<unsigned long>(time(false)));
xor_combine<minstd_rand, 4, mt19937, 9> combin;

exponential_distribution<float> expdist(2);

combin.seed(seeder);

// generate numbers
for(int i = 0; i < 10; ++i)     // error in <random> 
    cout << combin() << endl; // ERROR  C:2039 generate is not a member of std::congruential_engine<...> etc... 

cin.get();
    return 0;
} 
```

**1\. 如何将第 3 个引擎传递给 xor_combine 对象？**

**2\. 如何将 xor_combine 对象传递给分布对象？** **编辑**

```
#include<iostream>
#include<random>
#include<ctime>
int main()
{
    std::minstd_rand gen1;
    std::mt19937 gen2;
    std::xor_combine<std::minstd_rand, 3, std::mt19937, 6> combin(gen1, gen2);
    std::uniform_int_distribution<unsigned int> dist(0,37);
    combin.seed(static_cast<unsigned int>(time(0)));
    std::cout << dist( combin ) << std::endl;
    std::cin.get();
    return 0;
} 
```

**错误 1 ​​错误 C2352: 'std::xor_combine<_Engine1,_S1,_Engine2,_S2>::max' : 非法调用非静态成员函数 c:\program files (x86)\microsoft visual studio 11.0\vc\include\ xutility 3455 项目1 1**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:29:16.277

`std::xor_combine`在 C++11 中不存在。它已作为[库缺陷报告 789](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#789)的解决方案被删除。

> 没有争议。比尔是对的，但费米实验室认为**这很容易用不好，很难用对，所以应该完全删除它。**通过明确的路线进入 TR1，我们是否有权删除东西？可能应该与 Jens 核实一下，因为据信他是发起人。广泛的共识是这不是一个强大的引擎适配器。

MSDN 不是对真正标准的引用。请参阅[在哪里可以找到当前的 C 或 C++ 标准文档？](https://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents)如何获得标准。

* * *

您的“生成不是成员”问题是因为

```
combin.seed(seeder); 
```

这将有效地调用

```
combin.base1().seed(seeder); // ignoring the const-ref
combin.base2().seed(seeder); 
```

在 TR1 中，随机数生成器可以由另一个随机数生成器播种（n1836 表 16）。但是，在 C++11 中，随机数生成器应改为“种子序列”（n3290 §26.5.1.2，不确定何时引入更改）。C++11 没有检查`seeder`调用中是 RNG 还是种子序列的概念，因此模板实例化将假定`seeder`是种子序列。“种子序列”的要求之一是要有一个`.generate`成员函数（n3290 表 115），这就是您遇到编译器错误的原因。

您可以尝试使用不了解“种子序列”概念的 TR1 引擎来解决此问题，或者您可以将 RNG 包装到输入迭代器中，然后包装到 a`std::seed_seq`中，或者只是带有数字的种子。

```
unsigned long seed = ....;
combin.seed(seed); 
```

* * *

对于您的最后两个问题：

1.  请注意，XOR 是关联的。这意味着，你可以只使用

    ```
    xor_combine<RNGa, sa, xor_combine<RNGb, sb, RNGc, sc>, 0> 
    ```

    结合 3 个引擎

2.  您`xor_combine`像所有其他 RNG 一样将对象传递给分布，例如

    ```
    std::uniform_int_distribution<> d(0, 10);
    std::cout << d(combin) << std::endl; 
    ```

# java - 对 10 和 50 的每个倍数做一些事情

> ID：10370203
> 
> 赞同：1
> 
> 时间：2012-04-29T06:28:15.420
> 
> 标签：java

我在 Java 中，我想知道我该怎么做。这是我到目前为止的一个小例子，但我必须用 50 做同样的事情。所以问题来了。

```
if(taskCompleted/10 == Math.round(Math.random()){
taskPoints = 20;
} else if(taskCompleted/50 == Math.round(Math.random()){
taskPoints = 60;
} 
```

否则我可以用word来解释：

每次 taskCompleted 等于 10 的倍数（10,20,30,40 等...），taskPoints 等于 20，否则如果每次 taskCompleted 等于 50 的倍数（50,100,150,200），则 taskPoints 等于 60。

我希望你明白我想做什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T06:31:36.123

```
if(taskCompleted % 50 == 0){
   taskPoints = 60;
} else if(taskCompleted % 10 == 0){
   taskPoints = 20;
} 
```

使用将返回余数的模数。这将解决你的问题。仔细查看条件，我在检查 10 之前检查 50。因为 50 的任何倍数也是 10 的倍数。所以如果你放 10，你永远不会达到 50。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T06:31:06.727

```
if(taskCompleted % 50 == 0){
       //do something
}else if(taskCompleted % 10 == 0){
       //do something
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T08:04:16.923

类似于以前的答案，除了嵌套它们更有效。它不能是 50 的倍数，除非它是 10 的倍数。

```
if (taskCompleted % 10 == 0)
   taskPoints = taskCompleted % 50 == 0 ? 60 : 20; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-29T06:33:19.707

```
if(taskCompleted % 10 == 0) { 
    taskPoints = 20;
}
if(taskCompleted % 50 == 0) { 
    taskPoints = 60;
} 
```

# javascript - 如何仅使用 javascript（无 jQuery）获取 div 标签的文本

> ID：10370204
> 
> 赞同：104
> 
> 时间：2012-04-29T06:28:18.650
> 
> 标签：javascript, html

我试过了，但显示“未定义”。

```
function test() {
var t = document.getElementById('superman').value;
alert(t); } 
```

有什么方法可以使用简单的 Javascript 没有 jQuery 来获取价值吗？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-04-29T11:30:13.890

您可能想尝试`textContent`而不是`innerHTML`.

Given`innerHTML`将返回 DOM 内容作为 a`String`而不仅仅是`div`. 如果您知道您`div`只包含文本但不适合每个用例，那很好。对于这些情况，您可能必须使用`textContent`而不是`innerHTML`

例如，考虑以下标记：

```
<div id="test">
  Some <span class="foo">sample</span> text.
</div> 
```

您将得到以下结果：

```
var node = document.getElementById('test'),

htmlContent = node.innerHTML,
// htmlContent = "Some <span class="foo">sample</span> text."

textContent = node.textContent;
// textContent = "Some sample text." 
```

有关详细信息，请参阅 MDN：

*   [文本内容](https://developer.mozilla.org/en/DOM/Node.textContent)
*   [内部HTML](https://developer.mozilla.org/en/DOM:element.innerHTML)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-11-09T15:51:53.570

因为`textContent`在 IE8 和更早版本中不支持，这里有一个解决方法：

```
var node = document.getElementById('test'),
var text  = node.textContent || node.innerText;
alert(text); 
```

`innerText`确实在 IE 中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-07T12:56:28.337

您可以使用`innerHTML`（然后从 HTML 解析文本）或使用`innerText`.

```
let textContentWithHTMLTags = document.querySelector('div').innerHTML; 
let textContent = document.querySelector('div').innerText;

console.log(textContentWithHTMLTags, textContent); 
```

`innerHTML`并且被包括[IE6](https://caniuse.com/#search=innerText)`innerText`在内的所有浏览器（除了 FireFox < 44）支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-01T12:17:03.850

实际上你不需要调用`document.getElementById()`函数来访问你的`div`.

您可以通过以下`object`方式直接使用它`id`：

```
text = test.textContent || test.innerText;
alert(text); 
```

# json - 使用 json 存储加载图像

> ID：10370212
> 
> 赞同：0
> 
> 时间：2012-04-29T06:29:48.913
> 
> 标签：json, sencha-touch-2, nested-lists

我正在 itemtap 上加载一个嵌套列表。我需要加载的是一个文件夹图像，以防它不是叶节点，以及一个文档图像，以防它是叶节点。

我认为这样做的一种方法是将图像加载到 json 数据本身中。但我不确定如何实现这一目标。

截至目前，我的模型仅包含字符串数据。我将如何在 thr 中加载图像数据？

```
//Defining a data structure for the Nested List
Ext.define('InfoImage.model.nestedListModel', {
    extend: 'Ext.data.Model',

     config:{
    fullscreen:'true',
    title:'Work Items Task 1',
    ui:'normal',
    cls:'nestedlistCls',
    xtype:'nestedList',
    // displayField : 'text',
    store:'nestedListStore'/*,
    getItemTextTpl: function() {
        var tplConstructor = '{text}' +
            '<tpl if="model === \'folder\'">'+
                '<img src="resources/images/refresh.png" >' 
                '</img>' +
            '</tpl>';
        return tplConstructor;
    }*/
   // itemTpl:'<div><img src="resources/images/refresh.png" > </img>{text}</div>'*/

}
}); 
```

我的json数据代码是：

```
{
    "items":[

         {
        "text":"1.1",
        "folder":"resources/images/refresh.png",
        "items":[
            {
                "text":"1.1.1",
                "items":[
                    {
                        "text":"1.a",
                        "leaf":true
                    }]
            }
        ]

    },

        {
            "text":"1.2",
            "items":[
                {
                    "text":"1.2.1",
                    "leaf":true
                }
            ]

        },
        {
            "text":"1.3",
            "items":[
                {
                    "text":"1.3.1",
                    "leaf":true
                }
            ]

        }
    ]

} 
```

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:47:56.973

首先，这可能是一个很好的参考：[Nested List not loading in sencha](https://stackoverflow.com/questions/10332395/nested-list-not-loading-in-sencha/10344594#10344594)

然后以下 JSON 将满足您的需要（假设您也在`img_src`模型中定义了字段）

```
items: [
{
    text: 'not_leaf',
    img_src: 'your_link_1',
      items: [
        { text: 'leaf_1', img_src: 'your_link_2',  leaf: true },
        { text: 'leaf_2', img_src: 'your_link_3', leaf: true }
      ]
    }
] 
```

然后 Sencha Touch 会自动加载你所有的**图像源** ，你可以对它们做任何你想做的事情。

**注意**：如果您只想监听和处理事件，`itemtap`请`leafitemtap`在您的`Ext.NestedList`

希望这可以帮助。

# asp.net - 如何在服务器上执行 ASP.NET 页面

> ID：10370216
> 
> 赞同：-1
> 
> 时间：2012-04-29T06:30:53.160
> 
> 标签：asp.net

我开发了一个简单的 asp.net 页面并将其上传到服务器，但它无法正常工作。谁能告诉我这个问题，我在很多博客上问过，但找不到合适的答案。

谢谢， 海德尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:59:39.970

您必须在 IIS 中创建一个虚拟目录，然后将页面发布到该目录。并且不要忘记将虚拟目录转换为应用程序。之后您可以浏览目录并找到部署在那里的页面。这也可以在浏览器中查看。

# java - 游戏无法启动，黑屏

> ID：10370217
> 
> 赞同：1
> 
> 时间：2012-04-29T06:30:53.873
> 
> 标签：java, android, android-emulator

![黑屏图片](../Images/1a7628da77ef4c5facf3106d48305f38.png)**我正在尝试游戏 MrSnakey。当我运行它时它不会给我任何错误。但是，模拟器在启动时会显示黑屏。你们不知道如何解决它？解决此问题所需的有关我的项目的更多信息，请告诉我我将在此处发布。**

**首先是清单文件**

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.zardtechnologies.androidgames.mrsnakey"
    android:versionCode="1"
    android:versionName="1.0" >

    <application
        androidicon="@drawable/icon"
        android:debuggable="true"
        android:label="Mr. Snakey" >
        <activity
            android:name=".MrSnakeyActivity"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:label="Mr. Snakey"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="12" />

</manifest> 
```

**其次是 MrSnakeyActivity**

```
 package com.zardtechnologies.androidgames.mrsnakey;

import com.zardtechnologies.framework.Screen;
import com.zardtechnologies.framework.impl.AndroidGame;

public class MrSnakeyActivity extends AndroidGame {
    public Screen getStartScreen() {
        return new LoadingScreen(this);
    }
} 
```

**第三，从 MrSnakeyActivity 链接的 AndroidGame 活动**

```
package com.zardtechnologies.androidgames.mrsnakey;  
import android.app.Activity;
import android.content.Context;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;
import android.view.Window;
import android.view.WindowManager;

import com.zardtechnologies.framework.Audio;
import com.zardtechnologies.framework.FileIO;
import com.zardtechnologies.framework.Game;
import com.zardtechnologies.framework.Graphics;
import com.zardtechnologies.framework.Input;
import com.zardtechnologies.framework.Screen;

public abstract class AndroidGame extends Activity implements Game {
    AndroidFastRenderView renderView;
    Graphics graphics;
    Audio audio;
    Input input;
    FileIO fileIO;
    Screen screen;
    WakeLock wakeLock;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        boolean isLandscape = getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE;
        int frameBufferWidth = isLandscape ? 480 : 320;
        int frameBufferHeight = isLandscape ? 320 : 480;
        Bitmap frameBuffer = Bitmap.createBitmap(frameBufferWidth,
                frameBufferHeight, Config.RGB_565);

        float scaleX = (float) frameBufferWidth
                / getWindowManager().getDefaultDisplay().getWidth();
        float scaleY = (float) frameBufferHeight
                / getWindowManager().getDefaultDisplay().getHeight();

        renderView = new AndroidFastRenderView(this, frameBuffer);
        graphics = new AndroidGraphics(getAssets(), frameBuffer);
        fileIO = new AndroidFileIO(getAssets());
        audio = new AndroidAudio(this);
        input = new AndroidInput(this, renderView, scaleX, scaleY);
        screen = getStartScreen();
        setContentView(renderView);

        PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "GLGame");
    }

    @Override
    public void onResume() {
        super.onResume();
        wakeLock.acquire();
        screen.resume();
        renderView.resume();
    }

    @Override
    public void onPause() {
        super.onPause();
        wakeLock.release();
        renderView.pause();
        screen.pause();

        if (isFinishing())
            screen.dispose();
    }

    public Input getInput() {
        return input;
    }

    public FileIO getFileIO() {
        return fileIO;
    }

    public Graphics getGraphics() {
        return graphics;
    }

    public Audio getAudio() {
        return audio;
    }

    public void setScreen(Screen screen) {
        if (screen == null)
            throw new IllegalArgumentException("Screen must not be null");

        this.screen.pause();
        this.screen.dispose();
        screen.resume();
        screen.update(0);
        this.screen = screen;
    }

    public Screen getCurrentScreen() {
        return screen;
    }
} 
```

**我不知道需要更多信息，因为我不知道是什么导致我的应用程序显示为黑屏。哦，是的，控制台日志：**

```
[2012-04-29 14:24:54 - MrSnakey] Android Launch!
[2012-04-29 14:24:54 - MrSnakey] adb is running normally.
[2012-04-29 14:24:54 - MrSnakey] Performing com.zardtechnologies.androidgames.mrsnakey.MrSnakeyActivity activity launch
[2012-04-29 14:24:54 - MrSnakey] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'Test.Phone'
[2012-04-29 14:24:54 - MrSnakey] Uploading MrSnakey.apk onto device 'emulator-5554'
[2012-04-29 14:24:55 - MrSnakey] Installing MrSnakey.apk...
[2012-04-29 14:25:20 - MrSnakey] Success!
[2012-04-29 14:25:20 - MrSnakey] Project dependency found, installing: AndroidGamesFramework
[2012-04-29 14:25:22 - AndroidGamesFramework] Application already deployed. No need to reinstall.
[2012-04-29 14:25:22 - MrSnakey] Project dependency found, installing: AndroidGamesFrameworkImplementation
[2012-04-29 14:25:24 - AndroidGamesFrameworkImplementation] Application already deployed. No need to reinstall.
[2012-04-29 14:25:24 - AndroidGamesFrameworkImplementation] Project dependency found, installing: AndroidGamesFramework
[2012-04-29 14:25:26 - AndroidGamesFramework] Application already deployed. No need to reinstall.
[2012-04-29 14:25:26 - MrSnakey] Starting activity com.zardtechnologies.androidgames.mrsnakey.MrSnakeyActivity on device emulator-5554
[2012-04-29 14:25:28 - MrSnakey] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.zardtechnologies.androidgames.mrsnakey/.MrSnakeyActivity } 
```

**没有错误。我认为该应用程序运行良好，只是它无法让我进入游戏。请帮我解决黑屏问题。如果你们需要更多信息，请告诉我，我会在这里发布。谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:08:51.657

您没有在任何地方加载布局文件。您需要致电 `setContentView(R.layout.main)`in `AndroidGame`。假设您的布局文件被调用`main.xml`

# wcf - 填充列表框

> ID：10370221
> 
> 赞同：0
> 
> 时间：2012-04-29T06:31:22.247
> 
> 标签：wcf, linq-to-sql, listbox

我是一个刚刚学习 OOPS、编码、ASP.net 的计算机初学者。

我创建了一个 WCF 服务，它使用 LINQ to SQL 类从 sql 数据库表中检索数据。Windows phone 7 应用程序使用此 WCF 服务以使用列表框显示数据。

有人可以帮我如何将数据绑定到列表框控件并从 sql 表中填充数据吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:35:23.140

希望这可以帮助。单击 button1 listBox1 将使用 s = "select * from table where " + s; 填充数据。

```
private void button1_Click_1(object sender, EventArgs e)
{
    if (listBox1.SelectedItems.Count == 0)
    {
       MessageBox.Show("select items");
       return;
    }
    string s = "";
    for (int i = 0; i < listBox1.SelectedItems.Count; i++)
    {
       if(i==listBox1.SelectedItems.Count-1)
          s = s + " item='" + listBox1.SelectedItems[i].ToString() + "'";
        else
          s=s + " item='" + listBox1.SelectedItems[i].ToString() + "' or ";
    }
    s = "select * from table where " + s;
    MessageBox.Show(s);
} 
```

# oop - 多重继承对于语言使用者或语言开发者来说是否复杂？

> ID：10370225
> 
> 赞同：2
> 
> 时间：2012-04-29T06:31:48.353
> 
> 标签：oop, inheritance

到目前为止，在我阅读的文章中，提到实现多重继承会增加复杂性。但我想知道它是否会增加消费者开发者方面或语言开发者方面的复杂性？

可以说，我们可以做这样的事情来克服歧义：

```
class Artist{
   public void Draw(){ }
}

class Cowboy {
   public void Draw() { }
}

class Person : Artist, Cowboy{

} 
```

在这里，我们似乎有两个相同的签名方法，但是诸如`this.base.Artist.Draw()`or`this.base.Cowboy.Draw()`和类型之外的语法，从它的实例`person.base.Cowboy.Draw()`看来足以解决这种歧义。

那么我们在这里谈论的模糊性和复杂性是什么。那里有很多产品，但从消费者的角度来看，我们要处理的不会那么复杂。

`base`在许多情况下，关键字可以防止歧义：

1.  `person.base.Cowbow.Draw();`
2.  `(new Person()).base.Cowboy.Draw();`
3.  `((Person) someInstance).base.Cowboy.Draw();`
4.  `this.base.Cowboy.Draw();`
5.  等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:16:40.807

如果对基类成员的每次访问都必须预先添加适当的基类名称，那么从基类继承有什么意义呢？可以说，它基本上与只制作 Person 类的基类属性相同。

要考虑的另一件事是使用多重继承时虚拟表的复杂性。以 c++ 为例，多重继承增加了虚拟表的大小和复杂性，从而降低了查找性能。

最近我接手了一个项目，该项目有 2 个具有多重继承的不同类（一个从 8 个类继承，另一个从 6 个类继承）。只需将类重构为使用“HAS-A”关系而不是“IS-A”关系，我就实现了 5% 的性能提升。当然这是一个极端的例子，但它可以证明多重继承可能产生的影响。

# clojure - Clojure / Logic Pro

> ID：10370227
> 
> 赞同：2
> 
> 时间：2012-04-29T06:32:03.560
> 
> 标签：clojure, audio-player

无论如何可以编写/使用 Clojure 的 Logic Pro 合成器吗？

我安装了 Logic Pro。我已经安装了 Clojure。我希望能够拥有 Logic Pro 的合成能力，以及 Clojure 的编程能力。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T07:15:32.640

您可以使用 clojure 生成 midi 或 osc 事件并使用它们来控制逻辑中的合成器

afaik 逻辑支持原生的 osc 事件

对于 osc，在[https://github.com/overtone/osc-clj](https://github.com/overtone/osc-clj)上有一个 clojure 库，网上 有几个 java midi 库的包装器（但我还没有使用它们中的任何一个）

# c# - Winform 自定义控件 - 设计器随机停止初始化/调用构造函数

> ID：10370229
> 
> 赞同：5
> 
> 时间：2012-04-29T06:32:23.160
> 
> 标签：c#, winforms, visual-studio, visual-studio-2010, custom-controls

这是一场可怕的噩梦，我迫切需要帮助。我到处寻找帮助没有什么可以作为永久修复。

我已经开发了一些自定义控件；扩展按钮、用户控件等的控件。我有一个问题，VS2010 不断随机地，没有我能辨别的韵律或理由，决定何时尝试打开使用它的自定义控件的控件的设计视图**（编辑：“它”是 Windows 窗体生成器）**应该完全删除从 .designer.cs 文件中调用自定义控件的构造函数的行，从而完全破坏我查看设计视图的能力。该应用程序仍然可以正常构建和运行。

我已经测试并排除了以下问题：

1.  公共构造函数 - 显然具有非公共（内部等）构造函数可能会导致此类问题。我检查了 100 次 - 所有自定义控件都有公共构造函数。

2.  空构造函数 - 除了是公共的，它还需要是空的。

3.  没有调用任何可能在构造函数中失败的东西 - 我已经将自定义控件的所有构造函数减少为空

    ```
     Name() { }
    ```

    来电。那里没有运气。
4.  命名空间 - 显然位于不同的命名空间会导致问题？我在同一个，文件在同一个项目中。

5.  卸载项目。关闭VS。删除 .suo 智能感知文件。删除 obj 文件。打开VS。重新加载项目。重建项目。仍然没有运气。

这非常令人沮丧。到了这一点，我已经准备好放弃使用自定义控件并手动对每个控件进行蒙皮以避免它。有没有人知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:12:54.390

首先，问题......你把东西放在“.designer.cs”代码中......不要。那是微软的沙盒。创建 WinForms 表单和可视控件时，它们通常位于“集合”中，例如

```
MyForm.cs   (place for YOUR code)
   MyForm.designer.cs  (Microsoft's sandbox area for designer stuff)
   MyForm.resx   (Resource file -- if used, specific to this form). 
```

也就是说，如果您通过普通的“设计器”打开您的 WinForm，然后右键单击“查看代码”，它将调出 MyForm.cs 代码集。注意它的一个

```
PARTIAL PUBLIC CLASS MyForm : Window
{
   public MyForm()
   {
      InitializeComponent();
   }
} 
```

“MyForm.Designer.cs”和“MyForm.cs”基本上作为一个团队工作。你的东西除了微软的东西。根据您要执行的操作，您可以在此构造函数中将其挂钩以获取整体表单。如果您需要准备一些数据连接、查询数据、填充列表或将在表单中使用的任何内容。您可以通过多种方式进行（之前或之后）。

```
 public MyForm()
   {
      DoYourStuff();
      InitializeComponent();
      // or DoYourStuff here after designer controls are all initialized.
   }

   private void DoYourStuff()
   {  put it here } 
```

有时您可能想在整个表单加载之后，但在最终呈现给用户之前做一些事情。有时，我实际上在整个表单（表单及其所有控件）的 LOADED 完成后放置了一个钩子。所以我做了类似的事情：

```
public MyForm()
{

   Load += MyAfterInitializeComponents;
   InitializeComponent();
}

private void MyAfterInitializeComponents(object sender, EventArgs e)
{  
   DoYourStuff(); 
} 
```

如果您正在尝试做一些特定的事情，也许有一些示例代码可以帮助您集成到您的基于窗口的代码沙箱中。

# php - '字段列表'中的PHP MySQL未知列'地址'

> ID：10370230
> 
> 赞同：-2
> 
> 时间：2012-04-29T06:32:28.027
> 
> 标签：php, mysql, list, field

关于这个类似的问题有很多帖子，但我仍然无法为我的代码得到明确的答案，即 PHP 和 MySQL 组合。提交表格后，我总是收到错误消息。肯定和语法有关。有趣的是 mysql 没有抱怨，我的 apache 也没有，而是在我的浏览器（firefox）上。

```
$add_master_sql = "INSERT INTO master_name (date_added, date_modified, f_name, l_name)
VALUES (now(), now(), '".$_POST["f_name"]."', '".$_POST["l_name"]."')";
$add_master_res = mysqli_query($mysqli, $add_master_sql) or die(mysqli_error($mysqli)); 
```

我的MYSQL代码是：

```
CREATE TABLE master_name (
  id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  date_added DATETIME,
  date_modified DATETIME,
  f_name VARCHAR (75),
  l_name VARCHAR (75)
); 
```

可能与报价有关，但我仔细检查了匹配项，这很好。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T06:58:33.143

更重要的是使用 pdo 准备好的查询来避免可能的 sql 注入。

```
<?php
// configuration
$dbtype     = "sqlite";
$dbhost             = "localhost";
$dbname     = "test";
$dbuser     = "root";
$dbpass     = "admin";

// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

// new data
$dateAdded = getdate();
$dateModified = getdate();
$f_name = $_POST["f_name"];
$l_name = $_POST["l_name"];

// query
$sql = "INSERT INTO master_name (date_added, date_modified, f_name, l_name) VALUES (:f_name, :l_name, :dateAdded, :dateModified)";
$q = $conn->prepare($sql);
$q->execute(array(':dateAdded'=>$dateAdded ,
                  ':dateModified'=>$dateModified,
                  ':f_name'=>$f_name,
                  ':l_name'=>$l_name));    

?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T07:21:19.907

> “字段列表”中的未知列“地址”

在“字段列表”中查找使用“地址”列的查询。
您在此处发布的显然不是发出此错误的那个。
改变你`die(mysqli_error($mysqli));`的

```
trigger_error(mysqli_error($mysqli)); 
```

**对于页面上的所有查询，**
并查看发生错误的特定位置。

另请注意，您应该将查询中的每个变量转义为带引号的字符串，使用`mysqli_real_escape_string`（并保护所有其他变量免受 SQL 注入）或将它们作为准备好的语句插入。

如果你的书没有告诉你 - 烧掉它！

# java - 尝试从数据库中获取数据时出现 java.lang.NullPointerException

> ID：10370239
> 
> 赞同：1
> 
> 时间：2012-04-29T06:33:37.183
> 
> 标签：java, database, jsp, jdbc, nullpointerexception

我想在以下jsp页面中列出存储在数据库中的标签：

```
<div id="site_content"> <%-- Put the tags under this tag --%>
        <%! 
            GetTagsFromDatabase gtfd = new GetTagsFromDatabase();
            String tags[] = gtfd.getTags();
        %>

        <% 
            for(int i = 0 ; i <= tags.length ; ) {
        %>
        <table>
            <tr>
                <td> <%= tags[i++] %>   </td>
                <td> <%= tags[i++] %> </td>
                <td> <%= tags[i++] %> </td>
                <td> <%= tags[i++] %> </td>
            </tr>
        </table>
                <% } %>            
    </div> 
```

以下是`GetTagsFromDatabase`文件：

```
package NonServletFiles;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.sql.DataSource;
import javax.naming.*;

public class GetTagsFromDatabase {

public GetTagsFromDatabase() {

}

public String[] getTags() {

    String tags[] = null;
    try {
        Context context = new InitialContext();

        DataSource ds = (DataSource)context.lookup("java:comp/env/jdbc/photog");

        Connection connection = ds.getConnection();
        String sqlQuery = "select NAMEOFTHETAG from tagcollection";
        PreparedStatement statement = connection.prepareStatement(sqlQuery);
        ResultSet set = statement.executeQuery();

        int i = 0;
        while(set.next()) {
            tags[i] = set.getString("NameOfTheTag"); // <<--- line 33
            System.out.println(tags[i]);
            i++;
        }
    }catch(Exception exc) {
        exc.printStackTrace();
    }

    return tags;
} 
```

}

但是当我运行 jsp 页面时，我得到以下异常：

```
SEVERE: java.lang.NullPointerException
at NonServletFiles.GetTagsFromDatabase.getTags(GetTagsFromDatabase.java:33)
at org.apache.jsp.ListTags_jsp.<init>(ListTags_jsp.java:13)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at java.lang.Class.newInstance0(Class.java:372)
at java.lang.Class.newInstance(Class.java:325)
at org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:203)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:386)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)

SEVERE:     at NonServletFiles.GetTagsFromDatabase.getTags(GetTagsFromDatabase.java:33)
SEVERE:     at org.apache.jsp.ListTags_jsp.<init>(ListTags_jsp.java:13)
SEVERE:     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
SEVERE:     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
SEVERE:     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
SEVERE:     at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
SEVERE:     at java.lang.Class.newInstance0(Class.java:372)
........ 
```

我尝试了查找 url`java:comp/env/jdbc/photog`和`jdbc/photog`. 虽然表中有 48 个项目，但我得到这些例外的原因可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T06:41:05.480

你的`tags`数组总是`null`. 你需要初始化它。更好的是使用`ArrayList`可以存储可变长度标签的标签。代替

```
String tags[] = null; 
```

做这个

```
ArrayList<String> tags = new ArrayList<String>(); 
```

然后：

```
tags.add(set.getString("NameOfTheTag")); 
```

然后你需要改变你的方法签名

```
public String[] getTags() { 
```

到

```
public ArrayList<String> getTags() { 
```

或`ArrayList`再次将您的转换为数组。

如果您知道您有多少标签条目，那么您可以更改该行：

```
String tags[] = new String[numberOfTagElements]; 
```

## 编辑

为了使用数组，您必须

1.  声明它
2.  初始化它
3.  在该数组中添加或设置元素。

例子：

```
String[] tags;  //declaration
tags = new String[10]; //initialize array: max 10 elements can be used.
tags[0] = "hello";  //set element 1 of your array 
```

您错过了第 2 步。如果您使用 null 初始化数组，则不会分配内存。你必须告诉编译器你需要多少内存。例如，如果您想使用 10 个元素，则数组必须先保留该拳头，然后才能使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:06:10.853

我的陈述是通用的，但它可以帮助你。

每当你遇到一个对象，你为什么不检查空值。

```
if(object==null){
//dosomething
}else{
//dosomethingelse()
} 
```

我的意思是说将[防御性编程](http://en.wikipedia.org/wiki/Defensive_programming)合并到您的代码中，每次都能帮助您。

注意@juergen d 所说的。

# chef-infra - 如何使用 Chef 验证之前的安装和配置是否正确完成？

> ID：10370240
> 
> 赞同：2
> 
> 时间：2012-04-29T06:33:40.173
> 
> 标签：chef-infra, puppet

如何使用 Chef 复制 Puppet 空运行选项来验证机器是否具有与配方匹配的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T23:49:52.183

Opscode 去年确实推出了自己的试运行模式，称为“为什么运行”，www.opscode.com/blog/2012/09/07/chef-10-14-0-released/。但是您必须小心，因为所有这些自我监控功能的准确性都有限制，如下所述：http: [//blog.afistfulofservers.net/post/2012/12/21/promises-lies-and-dryrun -模式/](http://blog.afistfulofservers.net/post/2012/12/21/promises-lies-and-dryrun-mode/)

使用外部工具根据已知的良好状态验证机器的当前状态可能是更好的选择。查看[http://www.metaforsoftware.com/](http://www.metaforsoftware.com/)它将在大量机器上运行差异算法，这样您就可以准确地看到它们之间的变化和缺失。它处于免费测试阶段，我们计划始终提供免费版本。（FD：我是联合创始人，所以所有注意事项都适用；-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:09:46.537

显然，你不能。)-:

您可以通过使用报告处理程序在厨师客户端运行结束时检查更新资源的数量来实现稍微相似的效果：

[http://wiki.opscode.com/display/chef/Exception+and+Report+Handlers](http://wiki.opscode.com/display/chef/Exception+and+Report+Handlers)

和一个相关的示例处理程序：

[http://jtimberman.posterous.com/a-simple-report-handler](http://jtimberman.posterous.com/a-simple-report-handler)

但是，这并不能真正替代 --dry-run 选项，其中不会执行修改状态的操作。

此外，很容易懒惰地编写配方，无论需要与否，动作都会一直执行。这会导致报告处理程序中更新操作的计数不为零，但机器上的状态没有更改。

# c++ - oct和hex这个词在c++中定义为宏吗？

> ID：10370242
> 
> 赞同：0
> 
> 时间：2012-04-29T06:34:34.433
> 
> 标签：c++, c++11

我写了一个非常基本的程序，但无法理解它的行为。

```
 # include<stdio.h>
     # include<iostream.h>
     # include<conio.h>

     using namespace std;
     int main()
     {
       cout << "50" << oct <<"50" << hex <<"50" << abc << "50";// error abc not defined
       cout << "50" << oct <<"50" << hex <<"50"; // No error output 505050
       getch();   
    } 
```

`oct`在我包含的任何文件中是否`hex`定义为某个宏，这就是为什么我没有收到第二条`cout`语句错误的原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T06:37:13.280

`oct`并且`hex`是在 中定义的[流操作](http://en.cppreference.com/w/cpp/io/manip/hex)`<ios>`符，而*abc*不是任何标准头中定义的符号。因此，您只看到有关*abc*的错误，因为您没有在程序中自己声明它。

除此之外，您似乎使用的是非常旧的编译器，它带有`<iostream.h>`. 我建议您更新您的编译器（或切换到更好的编译器），并使用`<iostream>`不是`<iostream.h>`标准头文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T06:49:49.927

你在这里犯了一个大错误。你不应该仅仅通过阅读源代码和实验来学习 C++。这是一条不会带你去任何地方的道路。

尝试学习 C++ 的唯一方法是获得[一本好书](https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list)并从头到尾阅读。

C++ 在很多地方都是不合逻辑的，无论你多么聪明，你都无法正确猜出所有的 C++。实际上过于聪明可能是一个猜测问题，因为在某些情况下，C++ 语言设计包含由于向后兼容性原因而无法删除的真正错误。如果你很聪明，你的猜测将是合乎逻辑的......而且完全错误。

另请注意，虽然您通常可以编写几行清晰且外观合理的 C++ 行，它们将有效地做出正确的事情，但也很可能编写另外几行更加合乎逻辑和美观的代码，但性能却很糟糕和/或未定义的行为。

未定义的行为也意味着当你在很多情况下犯了错误时，编译器和运行时不会抱怨，一段时间后事情就会开始变得疯狂。未定义的行为正是实验不是学习 C++ 的好途径的真正原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T06:39:24.760

`hex`并且`oct`是包含在`std`命名空间中的操纵器。他们的全名实际上是`std::hex`and `std::oct`。没有名为 的操纵器`abc`，这就是您收到错误的原因。

更多信息请访问[www.cplusplus.com](http://www.cplusplus.com)：[`std::hex`](http://www.cplusplus.com/reference/iostream/manipulators/hex/)和[`std::oct`](http://www.cplusplus.com/reference/iostream/manipulators/oct/)

# ruby-on-rails - 无法安装 Rails

> ID：10370257
> 
> 赞同：1
> 
> 时间：2012-04-29T06:38:48.087
> 
> 标签：ruby-on-rails, installation

我正在尝试在 OS X Lion 上安装 Rails 并收到以下消息。我也安装了 Ruby 并更新到 ruby​​Gems 版本 1.8.5。

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
ERROR: Failed to build gem native extension.

/opt/local/bin/ruby extconf.rb
creating Makefile
make
/usr/bin/gcc-4.2 -I. -I/opt/local/lib/ruby/1.8/i686-darwin10 -I/opt/local/lib/ruby/1.8/i686-darwin10 -I. -I/opt/local/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -O2 -arch x86_64  -fno-common -pipe -fno-common  -O3 -Wall -arch x86_64 -c parser.c
make: /usr/bin/gcc-4.2: No such file or directory
make: *** [parser.o] Error 1

Gem files will remain installed in /opt/local/lib/ruby/gems/1.8/gems/json-1.7.0 for inspection.
Results logged to /opt/local/lib/ruby/gems/1.8/gems/json-1.7.0/ext/json/ext/parser/gem_make.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:51:44.013

看起来你的 gcc 不见了。似乎发生在狮子身上。尝试重新安装 XCode 和命令行工具，或者通过[Homebrew安装一个](https://apple.stackexchange.com/questions/38222/how-do-i-install-gcc-via-homebrew)

# jquery - 覆盖默认的jquery即兴宽度

> ID：10370260
> 
> 赞同：3
> 
> 时间：2012-04-29T06:38:53.937
> 
> 标签：jquery, impromptu

以下语句可以正常工作，但模式消息的宽度为 400 像素（默认值）而不是所需的 800 像素。

```
$.prompt(sFirstTest,{width:800}); 
```

400px 的默认值很好，除了这个实例。问题是我如何最好地覆盖一个实例的默认值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:00:05.277

答案一直在文档中摆在我面前。在即兴 css 中有：

```
div jqi {
    width:400px;
    .....
} 
```

所以我设置了一个备用：

```
div jqiwide {
    width:800px;
    .....
} 
```

然后对一个广泛实例的即兴调用是：

```
$.prompt(sFirstText,{prefix:'jqiwide'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T20:57:58.493

并确保`impromptu.css`使用新前缀重复声明，因为它们没有为 Id 准备并使用新前缀分类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:09:35.927

```
.customStyling div.jqi{
    width: 800px;
}

var dialogOptions = {
    buttons: [{...},{...}],
    classes: "customStyling"
};

$.prompt("msg", dialogOptions); 
```

# php - PHP GD 编辑 Jpeg 无需重新压缩

> ID：10370261
> 
> 赞同：2
> 
> 时间：2012-04-29T06:39:07.430
> 
> 标签：php, image, gd, jpeg, lossy-compression

假设我有一个 jpeg 文件，我想将一些像素设置为某种颜色。当我保存 jpeg 时，即使我将质量设置为 100，我也会失去颜色并且在新像素周围看到锯齿。我知道这是一种有损格式，但我不想重新压缩图片，只需设置一个几个像素。

```
// Create the GD resource
$img = imagecreatefromjpeg($filename);

// Set the first pixel to red
$color = imagecolorallocate($img, 255, 0, 0);
imagesetpixel($img, 0, 0, $color);

// Save the jpeg - is this where I'm wrong? I see the red pixel but it's the wrong color and is blurred.
imagejpeg($img, 'foo.jpg', 100);

// Lossless format works fine, red pixel is bright and accurate.
imagepng($img, 'foo.png'); 
```

所以也许GD不是去这里的路吗？我确实需要更改某些像素的颜色，并且它们在保存时需要准确。有没有办法在不依赖 GIF、PNG 或 JPEG2000 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T06:47:27.860

正如您自己所说，JPEG 是一种有损格式。它实际上并不直接存储“像素”。如果您对图像进行更改，则必须重新压缩图像。没有办法解决这个问题。

您的红色像素是“错误颜色”和“模糊”的原因是因为 JPEG 压缩的工作原理。同样，它不存储像素。它强调亮度的变化，实际的颜色信息并不重要。

我不是很肯定，但您可能只能重新压缩受您的更改影响的几个块。您将无法使用任何标准函数来执行此操作，并且必须自己深入研究格式和压缩方案。

# php - SQL date_format() 与 PHP date()

> ID：10370264
> 
> 赞同：0
> 
> 时间：2012-04-29T06:40:02.047
> 
> 标签：php, sql, performance, date, format

在 SQL 中，我可以使用以下格式设置日期字段：

```
SELECT article_name, DATE_FORMAT( article_date, '%b %e, %Y' ) AS my_date FROM tblArticles 
```

同样的事情可以在 PHP 中使用：

```
echo date('M j, Y', strtotime($row['article_date'])); 
```

在我的页面中，大约有 50 多个项目。因此，在 PHP 中，我将遍历记录、格式化日期并打印它们。`date_format()`如果我在查询本身中使用 ，则可以避免通过 PHP 完成的格式化。

那么，在这两种方法中，您更喜欢哪一种（关于性能）？我的页面可能会受到多次点击，并且此应用程序将托管在共享主机中。所以，我现在很关心性能。我只是不想给我的服务器增加负载。:)

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T06:41:43.373

在 SQL 中执行所有操作可能会比在 PHP 中更快，但是您应该分析代码以找出确切的情况。也可能有更好的地方供您优化，因为这不太可能成为您系统的性能瓶颈。确定将优化注意力集中在何处的最佳方法是分析您的代码。否则，您可能会优化那些没有真正影响的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:58:04.660

实际上与您的问题中的表现没有任何关系。

请不要突然问性能相关的问题。尝试为他们找到任何原因。否则，您可能会被“使用什么功能？”之类的“重要”问题困扰多年。“以什么顺序编写运算符”等。

There is no difference in terms of performance. Such a silly data transformations will never affect it.
Large data processing should be your concern, not simple formatting functions.

# java - 关于放破案

> ID：10370269
> 
> 赞同：0
> 
> 时间：2012-04-29T06:41:43.267
> 
> 标签：java

我正在查看 switch 条件语句的代码

```
char c1=65;
switch(c1){
  case 'A':
    System.out.println("one");
  default:
    System.out.println("two");
  case 'b':
    System.out.println("three");
} 
```

虽然结果是“一二三”，但在调试时我发现它首先进入了案例 A ，这是 A 的 ASCII 值 65 ，但随后它也会执行所有剩余的案例，但如果我放了 break; 然后它出来了，这是否意味着如果我们不放 break 它将继续执行所有案例，请告知。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T06:43:52.877

如果你不放**break**，匹配 case 之后的所有其余 case 将自动执行。控制将在两种情况下脱离**开关盒：**

```
1\. When it ends.
2\. When it finds a break. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T06:54:10.457

您可以阅读[java 语言规范](http://download.oracle.com/otn-pub/jcp/jls-7-mr3-fullv-oth-JSpec/JLS-JavaSE7-Full.pdf?AuthParam=1335682411_3bf1c8d4ac958c722bf01b735d4e4c72) 第 14.11 节。它明确定义了 switch 块的执行方式。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T06:44:35.220

它将继续执行它直到达到中断。 [在这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)您可以阅读有关 switch 语句的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T06:57:56.983

Break 用于跳转到[Switch](http://en.wikipedia.org/wiki/Switch_statement)的末尾，从而完成 switch 语句的执行。

不仅是 Java，它在许多语言中都是相同的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T04:53:05.883

@user1351820，您的理解是正确的。

每个 break 语句都会终止封闭的 switch 语句。控制流继续 switch 块之后的第一条语句。*break 语句是必要的*，因为没有它们，switch 块中的语句会**失败**：`All statements after the matching case label are executed in sequence, regardless of the expression of subsequent case labels, until a break statement is encountered.`

程序[**SwitchDemoFallThrough**](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/java/nutsandbolts/examples/SwitchDemoFallThrough.java)显示 switch 块中的语句会失败。该程序显示对应于整数月份的月份和一年中随后的月份。

从技术上讲，**最后的中断**不是必需的，因为 flow 不在 switch 语句中。建议使用中断，以便修改代码更容易且不易出错。默认部分处理未由 case 部分之一显式处理的所有值。
**参考：** [docs.oracle](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-30T05:07:26.320

是的，所有**在机加工情况下的**剩余情况都将执行。
如果您的匹配案例是最后一个，那么只有匹配案例将执行或匹配案例在匹配案例之上的中间案例将不会执行，但匹配案例以下的案例将与匹配案例一起执行。

```
char c1=65; switch(c1)
{
   case 'B':
      System.out.println("three");

   default:
      System.out.println("two");

   case 'A':
      System.out.println("one");  
} 
```

在这种情况下，您的输出将是`one`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-29T07:37:26.760

是的，`case`声明落空了。如果您对背景原因感兴趣，这个构造源于 C，它也被称为“带有宏的汇编程序”，这意味着它是一种非常低级的语言。C 中定义的`switch`语句非常适合优化实现——对要切换的值有一些限制，它只需要两条指令：一条用于查找要跳转的地址的表，另一条用于跳转。跳转后继续执行，没有进一步的干预——因此需要显式地`break`跳出块。

# string - JSP使用String创建超链接

> ID：10370274
> 
> 赞同：-1
> 
> 时间：2012-04-29T06:42:52.350
> 
> 标签：string, jsp, hyperlink

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:15:10.360

试试这个方法，

```
<%!
    String [] searchResultTitle = {"1","2","3"};
    String [] searchResultLinks = {"www.google.com","www.google.com","www.gmail.com"};
%>
<%
    for(int j=0; j<searchResultLinks.length; j++){
%>
<p>
    <%out.print(searchResultTitle[j].toString()) ; %>
</p>
<%
out.println( "<a href =" + searchResultLinks[j].toString() +"> " + searchResultTitle[j].toString() + "</a>");
}%> 
```

您也可以尝试如下，

```
<a href = "<%= searchResultLinks[j].toString() %>" > <%= searchResultTitle[j].toString() %> </a> 
```

这是创建锚链接时“<”和“a”之间的空格。那就是它呈现为纯文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:53:16.333

你只需要打印它：

```
out.print("< a href = "+searchResultLinks[j].toString()+"> ");
out.print(searchResultLinks[j].toString()) ;
out.print("</a>"); 
```

顺便说一句，这些`<p>`标签也应该被打印出来，或者使用 JSP 标签将它们从 Java 代码中分离出来。

# android - android XML解析器不解析完整的链接

> ID：10370276
> 
> 赞同：1
> 
> 时间：2012-04-29T06:43:52.473
> 
> 标签：android, xml-parsing

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T13:45:37.950

```
<link>http://www.website.net/index.php?option=com_adsmanager&page=display&catid‌​=87&tid=208196</link> 
```

...不是有效的 XML，因为`&`s 后面没有有效的[xml 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)。

有几种方法可以解决这个问题：

**转义`&`s**：

```
<link>http://www.website.net/index.php?option=com_adsmanager&amp;page=display&amp;catid‌​=87&amp;tid=208196</link> 
```

**`link`将部分包装在[CDATA中](http://en.wikipedia.org/wiki/CDATA)**

```
<link><![CDATA[http://www.website.net/index.php?option=com_adsmanager&page=display&catid‌​=87&tid=208196]]></link> 
```

如果您无法控制 RSS 文件的创建，则必须在将文档提供给 XML 解析器之前对其进行预处理。[移动像TagSoup](http://home.ccil.org/~cowan/XML/tagsoup/)这样的宽容 xml 解析器 可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:05:39.033

出色地。我解决了这个问题。

我的第二次更新是正确看待问题。`NodeList`有多个子节点，并且每个 & 符号 (&) 创建了一个新节点。

因此，我的代码：

```
if (name.equalsIgnoreCase(LINK)) {
    val = property.getFirstChild().getNodeValue();
    message.setLink(val);
} 
```

不好。因此，我将其修复为以下代码：

```
if (name.equalsIgnoreCase(LINK)) {
    val = "";
    NodeList list = property.getChildNodes();
    for (int i = 0; i < list.getLength(); i++) {
        val += list.get(i).getNodeValue().toString();
    }
    message.setLink(val);
} 
```

这是在 DOM XML 提要解析器中执行此操作的方法

# yii - Yii - 模型单元测试上传表单

> ID：10370278
> 
> 赞同：6
> 
> 时间：2012-04-29T06:44:07.903
> 
> 标签：yii, phpunit

我有以下上传表单模型

```
class TestUploadForm extends CFormModel
{
public $test;

public function rules()
{
    return array(
        array(test, 'file', 'types' => 'zip, rar'),
    );
} 
```

我的问题是，我该如何对此进行单元测试？我试过类似的东西：

```
public $testFile = 'fixtures/files/yii-1.1.0-validator-cheatsheet.pdf';

public function testValidators()
{
    $testUpload = new TestUploadForm;

    $testUpload->test = $this->testFile ;
    assertTrue($testUpload ->validate());

    $errors= $testUpload ->errors;
    assertEmpty($errors);
} 
```

但是，这一直告诉我该字段尚未填写。如何正确地对扩展规则进行单元测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T12:27:00.000

我们知道 Yii 使用[CUploadedFile](http://www.yiiframework.com/doc/api/1.1/CUploadedFile)，对于文件上传，我们必须使用它来初始化模型的文件属性。

我们可以使用[构造函数来初始化](http://www.yiiframework.com/doc/api/1.1/CUploadedFile#__construct-detail)文件属性`new CUploadedFile($names, $tmp_names, $types, $sizes, $errors);`

因此我们可以这样做：

```
public ValidatorTest extends CTestCase{

    public $testFile = array(
       'name'=>'yii-1.1.0-validator-cheatsheet.pdf',
       'tmp_name'=>'/private/var/tmp/phpvVRwKT',
       'type'=>'application/pdf',
       'size'=>100,
       'error'=>0
    );

    public function testValidators()
    {
       $testUpload = new TestUploadForm;

       $testUpload->test = new CUploadedFile($this->testFile['name'],$this->testFile['tmp_name'],$this->testFile['type'],$this->testFile['size'],$this->testFile['error']);
       $this->assertTrue($testUpload->validate());

       $errors= $testUpload->errors;
       $this->assertEmpty($errors);
    }
} 
```

CFileValidator[考虑](http://www.yiiframework.com/doc/api/1.1/CFileValidator)[了确定类型的文件扩展名](http://www.yiiframework.com/doc/api/1.1/CFileValidator#types-detail)，因此要测试您的验证器，您必须不断更改 的名称`$testFile`，即`$testFile['name']='correctname.rar'`.

所以最后我们在任何地方都不需要文件，只需文件的信息就足以测试。

# ruby-on-rails-3 - 嵌套路由——新动作只会失败

> ID：10370279
> 
> 赞同：0
> 
> 时间：2012-04-29T06:44:15.683
> 
> 标签：ruby-on-rails-3, routes

这是我的路线文件：

```
 resources :locations do
    resources :comments
  end 
```

和控制器：

```
 class CommentsController < InheritedResources::Base

      def index
        @commentable = find_commentable
        @comments = @commentable.comments.where(:company_id => session[:company_id])
      end

      def show
    @comment = Comment.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @comment }
    end
  end

      def new

        @comment = Comment.new

        respond_to do |format|
          format.html # new.html.erb
          format.json { render json: @comment }
        end
      end

      def create
        @commentable = find_commentable
        @comment = @commentable.comments.build(params[:comment])
        @comment.user_id = session[:user_id]
        @comment.company_id = session[:company_id]
        if @comment.save
          flash[:notice] = "Successfully created comment."
          redirect_to :id => nil
        else
          render :action => 'new'
        end
      end

      private

      def find_commentable
        params.each do |name, value|
          if name =~ /(.+)_id$/
            return $1.classify.constantize.find(value)
          end
        end
        nil
      end

    end 
```

和`rake routes`：

> ```
>  location_comments GET        /locations/:location_id/comments(.:format)          comments#index
>                        POST       /locations/:location_id/comments(.:format)          comments#create
>   new_location_comment GET        /locations/:location_id/comments/new(.:format)      comments#new
>  edit_location_comment GET        /locations/:location_id/comments/:id/edit(.:format) comments#edit
>       location_comment GET        /locations/:location_id/comments/:id(.:format)      comments#show
>                        PUT        /locations/:location_id/comments/:id(.:format)      comments#update
>                        DELETE     /locations/:location_id/comments/:id(.:format)      comments#destroy
>              locations GET        /locations(.:format)                                locations#index
>                        POST       /locations(.:format)                                locations#create
>           new_location GET        /locations/new(.:format)                            locations#new
>          edit_location GET        /locations/:id/edit(.:format)                       locations#edit
>               location GET        /locations/:id(.:format)                            locations#show
>                        PUT        /locations/:id(.:format)                            locations#update
>                        DELETE     /locations/:id(.:format)                            locations#destroy 
> ```

考虑到位置 <=> 评论关联是多态的，这有点难看（更多细节在这里：[带有祖先问题的多态评论）。](https://stackoverflow.com/questions/10369896/polymorphic-comments-with-ancestry-problems)

`/locations/1/comments/`按原样加载，`/locations/1/comments/1`但`/locations/1/comments/new`会引发路由错误`No route matches {:action=>"show", :controller=>"locations"}`。

我的日志显示：

```
Started GET "/locations/100041506421W500/comments/new" for 127.0.0.1 at 2012-04-29 00:37:43 -0600
Processing by CommentsController#new as HTML
  Parameters: {"location_id"=>"100041506421W500"}
  Rendered comments/_form.html.erb (2.4ms)
  Rendered comments/new.html.erb within layouts/application (3.9ms)
Completed 500 Internal Server Error in 25ms

ActionController::RoutingError (No route matches {:action=>"show", :controller=>"locations"}):
  app/views/comments/_form.html.erb:1:in `_app_views_comments__form_html_erb__3729217817518084843_70306885927480'
  app/views/comments/new.html.erb:3:in `_app_views_comments_new_html_erb___4071030466810932409_70306918426640'
  app/controllers/comments_controller.rb:19:in `new'

  Rendered /Users/dan/.rvm/gems/ruby-1.9.3-p0@global/gems/actionpack-3.2.1/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms) 
```

看起来它渲染了表单，然后在某个地方出现了 500 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T06:51:48.937

在视图中的某处，`new`您有一个断开的链接`location_path`，它转换为 {controller: 'location', action: 'show'}，这是一条无效路线（它需要一个位置 ID）。

# php - search specifice file with path from a particular directory and its sub directory

> ID：10370292
> 
> 赞同：1
> 
> 时间：2012-04-29T06:49:18.633
> 
> 标签：php

I have to find live.php and its path within a directory suppose module and its all sub directories such as user, blog and etc. Search also if sub directory blog contains further sub directories.

I am using a long code to do this job. Any other better and short method.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:35:46.127

I think you should look at PHP `glob` [http://php.net/manual/en/function.glob.php](http://php.net/manual/en/function.glob.php)

Example : Search `dir/module` and sub directory for `live.php` or anything that ends with `live.php`

```
glob_recursive('dir/module/*live.php'); 
```

Function used : [http://www.php.net/manual/en/function.glob.php#106595](http://www.php.net/manual/en/function.glob.php#106595)

```
if ( ! function_exists('glob_recursive'))
{
    function glob_recursive($pattern, $flags = 0)
    {
        $files = glob($pattern, $flags);
        foreach (glob(dirname($pattern).'/*', GLOB_ONLYDIR|GLOB_NOSORT) as $dir)
        {
            $files = array_merge($files, glob_recursive($dir.'/'.basename($pattern), $flags));
        }
        return $files;
    }
} 
```

# c# - 如何检查 int 是否是 .NET 中的合法 HttpStatusCode？

> ID：10370293
> 
> 赞同：5
> 
> 时间：2012-04-29T06:49:29.817
> 
> 标签：c#, .net, enumeration, http-status-codes

我希望确保一个人提供的数字是合法的[HttpStatusCode](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)。

起初我想使用`Enum.TryParse(..)`or`Enum.Parse(..)`但有可能我得到一个无效的结果并提供了一些错误的数据..

例如。

```
In: Enum.Parse(typeof (HttpStatusCode), "1")
Out: 1

In: Enum.Parse(typeof (HttpStatusCode), "400")
Out: BadRequest

In: Enum.Parse(typeof (HttpStatusCode), "aaa")
Out: System.ArgumentException: Requested value 'aaa' was not found. 
```

好的，所以如果我传入一个错误的*aaa*值，我会得到 System.Argument 异常。但是当我传入一个数字 1（作为文本，而不是 int）时，我得到的返回值是 1。我本以为这会失败并引发异常。

传递 400 的值*确实会*返回正确的`BadRequest`枚举。

有什么想法吗，伙计们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T06:51:24.867

而不是尝试简单地解析值，我们使用 IsDefined 方法

```
Enum.IsDefined(typeof(HttpStatusCode),value) 
```

“1”的情况没有失败的原因是您可以对枚举进行二进制算术。这被大量用于标志，因此枚举中没有特别指定的值可能仍然是有效值

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T07:04:29.523

这*是*记录在案的[行为](http://msdn.microsoft.com/en-us/library/essfb559.aspx)：

> 如果*value是与**enumType*的命名常量不对应的名称，则该方法将引发[ArgumentException](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx)。如果*value*是不表示*enumType*枚举的基础值的整数的字符串表示形式，则该方法返回一个枚举成员，其基础值是转换为整数类型的*值。*如果不希望出现这种行为，请调用[IsDefined](http://msdn.microsoft.com/en-us/library/system.enum.isdefined.aspx)方法以确保整数的特定字符串表示实际上是*enumType*的成员。

# jquery - 如何在不堆叠回调的情况下在 jQuery 中制作动画？

> ID：10370298
> 
> 赞同：15
> 
> 时间：2012-04-29T06:50:25.023
> 
> 标签：jquery, html, jquery-ui, jquery-animate, jquery-callback

假设我有三个 div，我希望在前一个完成后每个都设置动画。目前，我写这个：

```
$('div1').fadeOut('slow', function() {
    $('div2').fadeOut('slow', function() {
        $('div3').fadeOut('slow');
    });
}); 
```

这很丑陋，但可以管理。

现在想象一下，我有 10 个不同的动画需要**在不同的元素上**一个接一个地发生。突然间，代码变得如此笨拙，以至于极难管理......

这是我想要做的伪代码：

```
$('div1').fadeOut('slow' { delay_next_function_until_done: true } );
$('div2').fadeOut('slow' { delay_next_function_until_done: true } );
$('div3').animate({ top: 500 }, 1000 ); 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-29T10:39:58.703

如果您使用的是最新版本的 jQuery，请使用动画承诺：

```
$('div1').fadeOut('slow').promise().pipe(function() {
    return $('div2').fadeOut('slow');
}).pipe(function() {
    return $('div3').animate({ top: 500 }, 1000 );
}); 
```

您可以使其通用：

```
$.chain = function() {
    var promise = $.Deferred().resolve().promise();
    jQuery.each( arguments, function() {
        promise = promise.pipe( this );
    });
    return promise;
};

var animations = $.chain(function() {
    return $('div1').fadeOut('slow');
}, function() {
    return $('div2').fadeOut('slow');
}, function() {
    return $('div3').animate({ top: 500 }, 1000 );
});

$.when( animations ).done(function() {
    // ALL ANIMATIONS HAVE BEEN DONE IN SEQUENCE
}); 
```

仍然有很多函数闭包，但这就是 Javascript 的本质。但是，使用 Deferreds/Promises 会更自然、更灵活，因为您避免了回调“inception”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T07:28:35.910

我这样做，使用这种方法您可以根据需要放置所有 div，只在列表 var 中添加或删除元素，您也可以重新排序它们，您不必担心延迟时间。

```
var list = [ '#div1', '#div2', '...' ];
var i = 0;
function fade(cb) {
    if (i < list.length) {
        $(list[i]).fadeOut('slow', function() {
            i++;
            fade(cb);
        });
    } else {
        cb && cb();
    }
}
fade(); 
```

您还可以在流程结束时添加回调

```
fade(function(){alert('end')}); 
```

[演示](http://jsfiddle.net/xgc1986/5SxG4/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T07:29:11.477

当完成函数或回调嵌套太深或代码一遍又一遍地重复时，我倾向于考虑具有通用函数的数据表解决方案：

```
function fadeSequence(list) {
    var index = 0;
    function next() {
        if (index < list.length) {
            $(list[index++]).fadeOut(next);
    }
    next();
}

var fades = ["div1", "div2", "div3", "div4", "div5"];
fadeSequence(fades); 
```

而且，如果您希望某些项目具有不同类型的动画，您可以创建一个对象数组来描述每个连续动画应该是什么。您可以根据需要在对象数组中添加尽可能多的细节。您甚至可以将动画与其他同步 jQuery 方法调用混合，如下所示：

```
function runSequence(list) {
    var index = 0;
    function next() {
        var item, obj, args;
        if (index < list.length) {
            item = list[index++];
            obj = $(item.sel);
            args = item.args.slice(0);
            if (item.sync) {
                obj[item.type].apply(obj, args);
                setTimeout(next, 1);
            } else {
                args.push(next);
                obj[item.type].apply(obj, args);
            }
        }
    }
    next();
}

// sequence of animation commands to run, one after the other
var commands = [
    {sel: "#div2", type: "animate", args: [{ width: 300}, 1000]},
    {sel: "#div2", type: "animate", args: [{ width: 25}, 1000]},
    {sel: "#div2", type: "fadeOut", args: ["slow"]},
    {sel: "#div3", type: "animate", args: [{ height: 300}, 1000]},
    {sel: "#div3", type: "animate", args: [{ height: 25}, 1000]},
    {sel: "#div3", type: "fadeOut", args: ["slow"]},
    {sel: "#div4", type: "fadeOut", args: ["slow"]},
    {sel: "#div1", type: "fadeOut", args: ["slow"]},
    {sel: "#div5", type: "css", args: ["position", "absolute"], sync: true},
    {sel: "#div5", type: "animate", args: [{ top: 500}, 1000]}
];
runSequence(commands); 
```

而且，这是第二个选项的工作演示：http: [//jsfiddle.net/jfriend00/PEVEh/](http://jsfiddle.net/jfriend00/PEVEh/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-29T07:01:57.107

一种方法是编写自己的辅助函数，如下所示：

```
$.fn.sequentialFade = function() {
    if(this.length > 0) {
        var $set = $(this);
        $set.eq(0).fadeOut(function() {
            $set.slice(1).sequentialFade();
        });
    }
} 
```

并像这样使用它：

```
$('.div1, .div2\. .div3').sequentialFade(); 
```

> [http://jsfiddle.net/JpNgv/](http://jsfiddle.net/JpNgv/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-29T06:53:03.980

尝试类似：

```
$( 'div1' ).fadeOut();
$( 'div2' ).delay( 500  ).fadeOut();
$( 'div3' ).delay( 1000 ).fadeOut(); 
```

根据需要调整时间

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-29T06:53:56.410

用这个：

```
$('#div1, #div2, #div3').each(function(index){
    $(this).delay(1000 * index).hide(1000);
}); 
```

如果你可以给`<div>`sa 课：

```
$('.forHide').each(function(index, value){
    $(this).delay(1000 * index).hide(1000);
});​ 
```

*   **第一个元素在 1000 * 0 = 之后立即以一秒的动画**淡出。
***   第二个元素在 1000 * 1 = 一秒后淡出**，动画为一秒。***   第三个元素在 1000 * 2 = 两秒后淡出**，动画为一秒。***   ...*   ...*   **n**元素在 1000 * n = n 秒后淡入，动画**为一秒。****

 **[**现场演示**](http://jsfiddle.net/RwMy7/9/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-29T06:58:21.040

回调是朋友，不要推开它。有一些方法可以简化它们。这是其中之一

```
$('div1').fadeOut('slow', div2)
function div3() { $('div3').fadeOut('slow'); }
function div2() { $('div2').fadeOut('slow', div3); } 
```**

# iphone - 告知 iCloud 何时没有更多待处理的 Core Data 更新更改

> ID：10370309
> 
> 赞同：1
> 
> 时间：2012-04-29T06:52:04.330
> 
> 标签：iphone, ios, core-data, icloud

从 iCloud 导入更新的`NSPersistentStoreDidImportUbiquitousContentChangesNotification`记录后，会收到（我希望您使用的是宽屏...）通知。但是有没有办法告诉没有更多的更新待处理？

我需要这个主要是为了在将新商店添加到 iCloud 时检测初始更新的结束，以便我可以安全地合并现有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:22:27.503

据我所知，您无法判断 iCloud 是否有任何未决/未决的更改。

# c++ - 在 C 中使用 utf8 字符串

> ID：10370314
> 
> 赞同：2
> 
> 时间：2012-04-29T06:53:10.410
> 
> 标签：c++, c, string, utf-8, air

我正在用 C 编写 Adob​​e AIR 的本机扩展。代码应该稍后移植到其他平台。在我在 C 端的函数中，我从空气中得到一个字符串，就像这样

```
uint32_t len;
const uint8_t * str = 0;
if( FRE_OK == FREGetObjectAsUTF8(argv[0], &len, &str) )
{
    //Here i need to pass a string as an argument to other function
    printf("Got string %s", str); //Showing weird letters instead of str
} 
```

FREGetObjectAsUTF8 返回一个 UTF8 编码的字符串，应该表示为 const uint8_t。我在 MacOS 和 XCode 中工作，并且 uint8_t 被定义为无符号字符。问题出在一堆 c 代码中，它们需要一个简单的 char* 作为参数。我不需要任何来自 unicode 的字母，我只使用拉丁字母和数字。

我试图铸造一种没有运气的类型。例如

```
char buffer[512];
sprintf(buffer, "%s", (char*)str); //Same weird letters here 
```

但是如果我遍历字符串，我会得到正确的值

```
for(i=0; i<len; i++)
    printf("%s", str[i]); // Normal value 
```

所以 mu 问题是：如何将 utf8 字符串传递给需要简单签名字符的函数？事实上，我可以尝试在 C++ 中创建函数并将 C 部分与“extern”一起使用，但纯 C 解决方案会更可取。

我从空中传递字符串“initapp”，如果我将它返回到运行时，它会显示正确的值“initapp”。在我的 C 代码中，我试图将它传递给期望 char* 作为参数的函数

```
FREObject initApp(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[])
{
    uint32_t len;
    const uint8_t * str = 0;
    if( FRE_OK == FREGetObjectAsUTF8(argv[0], &len, &str) )
    {
        /*
        I have about 40 functions and most of them working with ASCII strings
        */
        executeCommand( (const char*)str );
        FREObject result;
        FRENewObjectFromUTF8(len, str, &result);
        return result; //It's ok. Correct string
    }
    return NULL;
} 
```

但是在我的函数而不是“initapp”中，我得到了各种奇怪的字母（每次都不一样），比如试图输出图像的某些部分或不正确的变量。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:29:39.190

Mac OS X 通常期望简单的 char* 字符串无论如何都是 UTF-8，因此您应该使用您显示的代码获得正确的结果。

```
sprintf(buffer, "%s", (char*)str); 
```

如果像下面这样的代码打印出表示有效 UTF-8 字符串的数值：

```
if( FRE_OK == FREGetObjectAsUTF8(argv[0], &len, &str) ) {
    for(int i=0; i<len; ++i)
        printf("0x%02X ", str[i]);

    FREObject result;
    FRENewObjectFromUTF8(len, str, &result);
} 
```

用你自己的函数调用替换 printf 循环会导致垃圾：

```
if( FRE_OK == FREGetObjectAsUTF8(argv[0], &len, &str) ) {
    executeCommand( (const char*)str );

    FREObject result;
    FRENewObjectFromUTF8(len, str, &result);
} 
```

executeCommand() 很可能有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T07:22:33.353

> 我如何将 utf8 字符串传递给需要简单签名字符的函数？

有两种方法：

1.  只需将其转换为 const char*。utf8 字符串与 const char 字符串“兼容”，因为仅 ascii 的 C 字符串将与仅包含 Ascii 字符的相同 utf8 字符串，而具有非 ascii 字符的 utf8 字符串中间不包含零。但是，如果使用这种方法，任何不属于 ASCII 的字符都将变成不可读的字符序列。当然，如果 C 函数需要类似文件路径来打开文件，这将不起作用。
2.  使用特定于操作系统的文本函数，这些函数允许您更改代码页并将 utf8 字符串重新编码为系统正在使用的任何 8 位代码页。但是，通过使用这种方法，不属于系统代码页的字符将“丢失”——它们将变成一些“默认”字符，如“？” 或“正方形的问号”。所以像“学片仮名”这样的东西会变成“学？？？”。[或者，您可以尝试使用libiconv](http://www.gnu.org/software/libc/manual/html_node/iconv-Examples.html#iconv-Examples)之类的东西，而不是 OS 功能，但这不会解决“字符不在代码页中”的问题。

# sql - 左连接的锂计数

> ID：10370318
> 
> 赞同：4
> 
> 时间：2012-04-29T06:53:29.727
> 
> 标签：sql, lithium

作为具有动态生成元素的更大查询的一部分，我需要进行左连接和计数。这是我需要的查询。

```
SELECT slug, name, count(client_tests.id) AS test_count
  FROM clients
  LEFT JOIN client_tests ON clients.id = client_tests.client_id
  GROUP BY clients.id; 
```

我尝试构建一个连接查询，但 Lithium 似乎期望连接成为关系的一部分（未定义任何关系），如下所示（暂时忽略计数）。

```
$join = new Query(array(
  'source' => 'client_tests',
  'model' => '\app\models\ClientTest',
  'type' => 'LEFT',
  'constraint' => array('Client.id' => 'ClientTest.client_id'),
));
$clients = Client::all(array(
  'conditions' => $conditions,
  'group' => 'Client.id',
  'joins' => array($join)
)); 
```

这导致`Notice: Undefined index: ClientTest in /usr/local/www/oars/libraries/lithium/data/collection/RecordSet.php on line 340`，这似乎是与关系相关的代码。

如果我确实定义了`hasMany`Client 和 ClientTest 之间的关系，它将为我处理构建左连接，有没有办法获取 Client 字段和计数？

```
$clients = Client::all(array(
  'fields' => array('slug', 'name', 'count(ClientTest.test_id) as test_count'),
  'conditions' => $conditions,
  'group' => 'Client.id',
  'with' => 'ClientTest'
)); 
```

这导致`( ! ) Notice: Undefined index: count(ClientTest in /usr/local/www/oars/libraries/lithium/data/source/Database.php on line 650`，所以要么不可能，要么我使用了错误的语法。

我可以直接使用 直接发出查询`Client::connection()->read($sql)`，但是由于查询中有动态元素，所以无论如何我都必须构建 SQL。

有没有办法让上述方法起作用，还是我应该手动构建 SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:15:17.760

如果我对您的理解正确，那么您已经拥有返回您正在寻找的结果集的 SQL 查询，但在使用锂时遇到了问题。我建议试试这个。如果您在 SQL 中创建所需的查询视图，则可以让锂向视图发送一个简单的请求。我完全没有锂的经验，但我希望这会有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:56:14.123

好像你只是错过了输入你的表名，

```
'constraint' => array('Client.id' => 'ClientTest.client_id') 
```

但是你有 ：

```
LEFT JOIN client_tests ON clients.id = client_tests.client_id 
```

您刚刚在 client_tests 和 ClientTest 之间犯了错误吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T18:42:33.987

我必须首先承认我不熟悉锂。但是，在 SQL 中有两种方法可以解决此问题，您不妨尝试一下。

我假设您正在尝试获取作为每行附加列返回的总行数。

第一个需要称为窗口函数（Oracle 中的分析函数）的东西。查询如下所示：

```
SELECT *, count(*) over (partition by clients.id) AS test_count
FROM clients LEFT JOIN client_tests
     ON clients.id = client_tests.client_id 
```

第二种方法用于不支持此功能的数据库中。要使用一个查询来处理它，可以使用以下方法：

```
with q as (SELECT c.*, <whatever columns you want from client_tests
           FROM clients LEFT JOIN
                client_tests
                ON clients.id = client_tests.client_id
          )
select q.*, qsum.test_count
from q join
     (select id, count(*) as test_count
      from q
      group by id
     ) qsum
     on q.id = qsum.id 
```

也许其中之一将适用于您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T18:53:53.197

您的查询似乎很奇怪。尝试这个：

```
SELECT slug, name, count(client_tests.id) AS test_count
FROM clients
LEFT JOIN client_tests ON clients.id = client_tests.client_id
GROUP BY clients.id; 
```

# php - 如何以编程方式在 Amazon Windows 2008 AMI 上启用实例存储

> ID：10370322
> 
> 赞同：0
> 
> 时间：2012-04-29T06:54:01.123
> 
> 标签：php, windows, amazon-ec2, amazon-web-services, storage

我正在使用 PHP 脚本以**编程**方式创建一个新的 Windows 实例并在其上运行测试。

一切正常，直到我升级为使用**小型实例**（而不是微型实例）。最初我以为 Windows 2008 的**C:\ 驱动器大小为 160 GB**，但不，似乎必须*启用*这个空间。

我搜索了很多，发现可以使用[命令行](http://www.serveridol.com/2010/08/30/enabling-instance-storage-on-amazon-windows-2008-ami/)或使用[此 PHP 函数**modify_instance_attribute以编程方式启用此存储**](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonEC2/modify_instance_attribute)

但是，目前尚不清楚如何做到这一点。**我的问题是：是否可以作为****D:\**访问此实例存储（例如）。**如果是这样，我怎样才能在 PHP 中做到这一点？**IE。

```
$ec2->modify_instance_attribute($instance_id, 
       array('BlockDeviceMapping' => array(
            'DeviceName' => '/dev/sdc=ephemeral0'
       )
)); 
```

PS。我**不关心**数据完整性，我只需要那些 160 GB 以便我为我的自动化测试动态生成随机数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:02:33.597

试试这个：

1.  创建您的 m1.small 实例
2.  通过 RDP 连接并转到开始菜单 --> 计算机 --> 管理
3.  在服务器管理器窗口 GoTo *Storage*中，您应该在底部面板中找到列为未分配空间 (149GB) 的实例存储
4.  右键单击它并选择*在线*
5.  再次右键单击并将其安装为新硬盘驱动器
6.  格式化这个新驱动器并在资源管理器中仔细检查它是否存在
7.  **现在**注销，转到亚马逊控制面板并将这个正在运行的实例保存为新图像

就这样。从现在开始，每当您从 PHP 启动一个新的小型实例时，您的 160GB 驱动器应该**已经**挂载并可用。

PS。不需要 modify_instance_attribute() 函数，您可以使用 run_instances() 执行此操作，即。

```
<?php
$ec2 = new AmazonEC2();
$ec2->set_region(AmazonEC2::REGION_EU_W1);
$ec2->run_instances($ami_image_id, 1, 1, array(
                    'KeyName'       => 'my-Key',
                    'Placement'     => array('AvailabilityZone' => 'eu-west-1a'),
                    'BlockDeviceMapping' => array(
                              'VirtualName'    => 'ephemeral0',
                              'DeviceName'     => '/dev/xvdb'
                     ),
                     'InstanceType'  => 'm1.small',
                     'SecurityGroup' => 'my-RDP-group'
 ));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:01:02.913

在[Amazon EC2](http://aws.amazon.com/ec2/)实例启动后，无法以编程方式为其启用/映射[实例存储](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/InstanceStorage.html)，请参阅在[Amazon EC2 实例存储使用场景中使实例存储](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/InstanceStorage.html#InstanceStore_UsageScenarios)*在您的实例上可用*部分：

 *> 默认情况下，将 Amazon EBS 用于根设备的实例在启动时没有可用的实例存储。如果要将实例存储与 EBS 支持的实例一起使用，**则必须在启动实例时显式地将实例存储与设备映射**。*[强调我的]*

该页面还概述了实现此目标所需的高级步骤，cyberx86[对 m1.xlarge 实例上缺少临时磁盘](https://serverfault.com/a/335996)的回答提供了两种可用方法的很好的总结。*

# css - 浏览器之间的 CSS 字体差异

> ID：10370323
> 
> 赞同：3
> 
> 时间：2012-04-29T06:54:08.220
> 
> 标签：css, fonts

我试图在所有浏览器中显示完全相同的文本。

我正在使用他们都支持的 helvetica。

我发现（困难的方式）每个浏览器都以自己的方式设置文本样式，所以我想知道，我必须自定义哪些属性才能在所有主要浏览器上获得 100% 相同的文本？

我已经设置的属性是： `font-family`, `font-size`, `font-weight`, `line-height`,`text-decoration`和`letter-spacing`，但是在 ff 和 chrome 中查看我的文本时，我发现给定文本的宽度有所不同。我觉得身高是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T21:57:57.010

即使使用相同的 CSS 规则和相同的字体文件，您也永远不会有完全相同的渲染：

1.  现代字体格式由重叠的指令层组成，其中“新的更好”方式不会取代以前的迭代，但除此之外还存在。优点是旧软件仍然可以读取旧式指令并像以前一样工作。缺点是相同的属性以许多不同的方式描述并且它们不会给出相同的结果（你会认为最新的层会给出最好的结果，但字体设计者可能只对旧的层进行了广泛的测试和调试）

2.  雪上加霜的是，有些是系统特定的（Windows、OS∕2、OSX……），因此即使是同一代软件也不会根据目标系统读取相同的指令

3.  最后，即使一个字体只包含一个指令层，并且你所有的浏览器都完全阅读它，它们在解释它时会有一些余地。在具有高像素密度的理想视网膜屏幕上，它们都将使用相同的形状和坐标，但实际屏幕的像素密度太低，无法准确显示复杂的小文本形状。因此，文本引擎可以选择显示清晰但陈旧的线条（扭曲字形形状，使其对齐单色像素网格）或平滑但模糊的线条（通过播放像素灰度级甚至亚像素颜色来近似理想形状）。这些调整将移动文本像素。
    根据系统的不同，文本呈现约定并不相同。OSX 将倾向于平滑的模糊渲染，Windows 将倾向于锐利的厌倦渲染，而 Linux 则涵盖了介于两者之间的所有选择。

4.  当然，即使在同一个系统上，相同的软件也不会根据可用硬件的质量（像素密度）做出相同的选择。

有关文本引擎可以选择的所有可能呈现策略的一些见解，请参阅
[https://docs.google.com/document/d/1wpzgGMqXgit6FBVaO76epnnFC_rQPdVKswrDQWyqO1M](https://docs.google.com/document/d/1wpzgGMqXgit6FBVaO76epnnFC_rQPdVKswrDQWyqO1M)

您通常无法控制浏览器从您的网站选择的文本呈现折衷方案。即使您可以在 osx（或相反）上强制使用 windows 样式渲染，也只会惹恼那些希望您的网站表现得像他们在屏幕上看到的所有其他文本一样的用户。事实上，您的网站对浏览器的字体呈现选择越宽容，它就会越好。网站是动态的。网站可以重排。像素完美不是用户的理想。如果您想要像素完美，请为他们提供位图图像，您会很快看到它是多么受欢迎。

因此，仅针对特定的设计效果使用@font-face，而不是试图在您的网站上强制放置特定的文本像素。第一个会很好地工作。第二个，完全没有。如果您使用@font-face，请记住字体受版权保护，因此共享任何字体都需要法律许可。

PS。Helvetica 是一种古老的字体设计。它已经派生了很多次，在不同的系统上请求“Helvetica”会产生过多的结果。所以这是一种没有@font-face就不能在网络上使用的字体。

[字体](/questions/tagged/fonts "显示标记为“字体”的问题") [opentype](/questions/tagged/opentype "显示标记为“opentype”的问题") [文本渲染](/questions/tagged/text-rendering "显示标记为“文本渲染”的问题")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T06:57:28.247

您可以从 Yahoo [http://yuilibrary.com/yui/docs/cssreset/的重置脚本开始](http://yuilibrary.com/yui/docs/cssreset/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T07:04:01.933

正如 Pleun 所提到的，有几个重置样式表可以为您提供良好的开端。但是，只要你努力，你就不会得到 100% 相同的外观。这是因为浏览器和操作系统使用不同的字体渲染策略。

某些浏览器允许您控制字体渲染技术。对于 webkit 浏览器，请看这里[http://maxvoltar.com/archive/-webkit-font-smoothing](http://maxvoltar.com/archive/-webkit-font-smoothing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T07:13:01.467

所有浏览器都“支持” helvetica？你说的是哪些浏览器？这里列出了很多浏览器[http://blog.mhurrell.co.uk/post/2946358183/updating-the-helvetica-font-stack](http://blog.mhurrell.co.uk/post/2946358183/updating-the-helvetica-font-stack)没有或至少不能使用 helvetica。除非您向他们提供许可版本的 helvetica。我假设你不是。

该链接是关于为跨浏览器/平台 helvetica 构建更好的字体堆栈......尽管这是一个非常大的堆栈，您可能不需要全部。你可以找到其他人，阅读更多：

[http://css-tricks.com/snippets/css/better-helvetica/](http://css-tricks.com/snippets/css/better-helvetica/)

[http://www.awayback.com/revised-font-stack/](http://www.awayback.com/revised-font-stack/)

[http://unitinteractive.com/blog/2008/06/26/better-css-font-stacks/](http://unitinteractive.com/blog/2008/06/26/better-css-font-stacks/)

# perl - 如何找到 perl 脚本（linux 进程）挂起的位置

> ID：10370324
> 
> 赞同：4
> 
> 时间：2012-04-29T06:54:09.143
> 
> 标签：perl, process

我很难重现 perl 进程挂起的情况。我不确定它挂在哪里。`ps ax | grep <process name>`将 stat 列显示为 SN，我理解这意味着它正在睡眠并且以很好的优先级运行。

我查看了脚本（那里有大量代码），但看不到任何持续超过几秒钟的特定睡眠（这个过程已经睡眠超过一天）。

我无法重新启动并将日志添加到 Perl 脚本，因为该情况可能无法重现。我可以尝试`strace`但想知道是否有更好的机制

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T14:42:05.250

一种可能的方法是使用`gdb`.

首先，您需要为您的 perl 解释器调试符号。例如，在我的 Debian 系统上，我必须为此安装`perl-debug`软件包。安装完成后`/usr/lib/debug/usr/bin/perl`，我们稍后会将其传递给 gdb。请注意，原来的、卡住的 Perl 脚本是使用 启动`/usr/bin/perl`的，而不是新安装的调试版本。

为了这个例子，让我们运行这个 Perl 脚本：

```
$ cat test.pl 
#! /usr/bin/perl

use strict;
use warnings;

print "pid: ", $$, "\n";

while (1) {
  print "line ", __LINE__, "\n"; sleep 1;
  print "line ", __LINE__, "\n"; sleep 1;
} 
```

当我们运行它时，我们会得到如下输出：

```
$ ./test.pl 
pid: 15764
line 9
line 10
line 9
line 10
^C 
```

现在让我们启动 gdb。使用当前运行的 test.pl 打印的 pid。我们在一些初始信息后得到提示（“从...读取符号”）：

```
$ gdb /usr/lib/debug/usr/bin/perl 15809
[snip]
(gdb) 
```

同时，由于将 gdb 附加到 perl 解释器，perl 被停止：

```
$ ./test.pl
pid: 15809
line 9
line 10
[snip]
line 9
line 10
line 9
[no further output] 
```

现在，让我们回到 gdb 进行回溯：

```
(gdb) backtrace
#0  0x00007fd5b4479830 in __nanosleep_nocancel () at ../sysdeps/unix/syscall-template.S:82
#1  0x00007fd5b44796c0 in __sleep (seconds=<optimized out>) at ../sysdeps/unix/sysv/linux/sleep.c:138
#2  0x00007fd5b4efc1e2 in Perl_pp_sleep (my_perl=0x1a91010) at pp_sys.c:4586
#3  0x00007fd5b4ea89b6 in Perl_runops_standard (my_perl=0x1a91010) at run.c:41
#4  0x00007fd5b4e4a585 in S_run_body (oldscope=1, my_perl=0x1a91010) at perl.c:2350
#5  perl_run (my_perl=0x1a91010) at perl.c:2268
#6  0x0000000000400f89 in main (argc=2, argv=0x7fff4de87628, env=0x7fff4de87640) at perlmain.c:120 
```

很可能，perl 恰好在 sleep() 的中间停止。但是哪一个？

现在我们需要弄清楚在哪里可以找到关于当前正在执行的 (Perl) 源文件和行的 perl 内部信息。最初我[在 mod_perl 的文档中](http://perl.apache.org/docs/2.0/devel/debug/c.html#Analyzing_the_core_File)找到了一些相关信息。在那里寻找`curinfo`宏。

```
(gdb) p my_perl->Icurcop->cop_file 
$1 = 0x1abd810 "./test.pl"
(gdb) p my_perl->Icurcop->cop_line 
$2 = 9 
```

正如我们所看到的，我们在 test.pl 的第 9 行 - 正如根据脚本的输出所预期的那样。

链接的文档提到了关于线程/非线程 perl 二进制文件的一些差异（上面的示例适用于线程 perl，v5.14.2）。它看起来也有点过时了，因为它谈论的是`my_perl->Tcurcop`，而我在`my_perl->Icurcop`. 目前，我对 perl 的内部结构还不够熟悉，无法解释为什么它会被重命名。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T12:02:11.933

我知道您说您无法重新启动脚本，但是如果您*确实*要重新启动它一次，而不是记录，请尝试使用 Signal::StackTrace 或类似方法，以便下次发生这种情况时您可以使用USR2 并获取堆栈跟踪转储。

# c++ - 来自文本文件c ++的字数

> ID：10370333
> 
> 赞同：0
> 
> 时间：2012-04-29T06:56:53.803
> 
> 标签：c++

这是文件的内容：

```
12.34.
.3
3..3
.3.4
..8
.this
test.this
test.12.34
test1.this
test1.12.34 
```

这是预期的输出：

```
COUNT | WORD 
------+------
   1  | .3
   1  | .3.4
   2  | 12.34
   2  | 3
   1  | 8
   2  | test
   1  | test1
   1  | test1.12.34
   3  | this 
```

要求是从文本文件中读取每一行，然后从行中提取单词。每当遇到一个新单词时，程序应该从动态内存中分配一个节点实例来包含该单词及其计数，并将其插入到一个链表中，以便该列表始终是排序的。如果遇到的单词已经存在于列表中，那么该单词的计数应该增加。考虑到'。分隔符，如果 . 字符在左边有一个空格、制表符、换行符或数字，在右边有一个数字，那么它被视为小数点，因此是单词的一部分。否则，它将被视为句号和单词分隔符。

单词：是由一个或多个分隔符序列分隔的字母和数字字符、单引号、下划线和连字符的序列。请参阅下面的分隔符列表。此分配的输入将由单词、整数和浮点数组成。单引号字符将始终充当撇号，并应被视为单词的一部分。因此，streamer、streamers、streamer's 和 streamers' 都应该是不同的词，但是“streamers”和 streamers 应该算作词 streamers 的两次出现。

显然，我在下面得到了一些东西，但我仍然坚持将句点视为单词分隔符。谁能给我一些提示？

```
bool isSeparator(const char c) {  
    if (std::isspace(c)) return true;

    const std::string pattern = ",;:\"~!#%^*()=+[]{}\\|<>?/";
    for (unsigned int i = 0; i < pattern.size(); i++) {
        if (pattern[i] == c) 
            return true;
    }
    return false;
}
void load(std::list<Node> &nodes, const char *file) {
    std::ifstream fin;
    std::string line = "";
    std::string word = "";

    fin.open(file);

    while (std::getline(fin, line)) {

        for (unsigned int i = 0; i < line.size(); i++) {
            if (isSeparator(line[i]) || i == (line.size() - 1)) {
                if (word.find('.') < word.size()) { // if there is a '.' in a word
                    if (word.find('.') == word.size() - 1) { // if '.' at the end of word
                        word.erase(word.find('.'), 1); // remove '.' in any case
                    }
                }
                if (word.size() != 0) {
                    nodes.push_back(Node(word));
                    word.clear();
                }
            } else {
                word += line[i];
            }
        }
    }

    fin.close();
} 
```

我刚开始使用 c++，因此，分配只需要使用 std::list 来存储节点和一些基本的字符串操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:38:52.190

我已经修改了您编写的函数（isSeparator）并添加了一个新函数（isDigit）：

```
bool isSeparator(const char c) {
    const string pattern = ".,;:\"~!#%^*()=+[]{}\\|<>?/";
    for (unsigned int i = 0; i < pattern.size(); i++) {
        if (pattern[i] == c)
            return true;
    }
    return false;
}

bool isDigit(const char c) {
    if ((int) c >= 0x30 && (int) c <= 0x39) return true;
    else return false;
} 
```

新函数 isDigit 用于确定传递的字符是否为数字，我试图收集所有可能的测试用例，以确保您以正确的方式分隔单词，以下是我考虑的案例：

```
word.12word.word
word.12.3word.word
word.word12.word
12.3. 
```

对于我已经修改了代码的加载函数，您的部分是确定在我的代码中插入列表节点的代码并将其与您的需要集成，这里是修改的加载函数：

```
ifstream fin;
    fin.open("file.in");
    string line, word = "";
    list<Node> node;
    while (getline(fin, line)) {
        for (unsigned int i=0; i<line.size(); i++) {
            if ((line[i] == '\t' || line[i] == ' ' || isDigit(line[i])) && (line[i+1]=='.' && isDigit(line[i+2]))) {
                word += line[i];
                word += ".";
                i+=2;
                while (!isSeparator(line[i])) word += line[i++];
                i--;
            } else if (!isSeparator(line[i])) {
                word += line[i];
                if (i==line.size()-1) {
                    node.push_back(Node(word));
                    //cout << word << endl; for debugging
                    word.clear();
                }
            } else {
                if (word.size() > 0) {
                    node.push_back(Node(word));
                    //cout << word << endl; for debugging
                    word.clear();
                }
            }
        }
    }
    fin.close(); 
```

这是输出：

```
word
12word
word
word
12.3word
word
word
word12
word
12.3 
```

为了解决这些字符串匹配问题，您必须遵循以下程序：

1-首先确定可能的情况，我想我提供的测试用例证明了这一点。
2-根据可能的测试用例/输入开始构建您的 ifs 语句。
3-尝试减少你的ifs并将多余的ifs分组。
4-最后这一切都取决于你的逻辑和你的思维方式。

祝你好运 ：）

注意我`using namespace std;`每次都使用该语句而不是嵌入 std:: 。如果我错了，请纠正我。

# objective-c - 递归阶乘

> ID：10370334
> 
> 赞同：-5
> 
> 时间：2012-04-29T06:57:08.767
> 
> 标签：objective-c

```
#import <Foundation/Foundation.h>

@interface Factorial : NSObject 
+(int) factorial:(int) n;
@end

@implementation Factorial

+(int) factorial:(int)n
{
    if (n==0) {
        return 1;
    }
    else
    {
        return [self factorial:n]*[self factorial:n-1];
    }
}

@end

int main (int argc, const char * argv[])
{
    int i = [Factorial factorial:5];
    NSLog(@"%d", i);
    return 0;
} 
```

这段代码有什么问题？？我是objective-c的新手（我来自c背景）或者，我对objective c的概念有误？？

```
(Compiler generating ..)
GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Mon Aug  8 20:32:45 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin".tty /dev/ttys002
sharedlibrary apply-load-rules all
[Switching to process 1413 thread 0x0]
warning: Unable to restore previously selected frame.
(gdb) 
```

并在@implementation导致EXC_BAD_ACESS处卡在+（int）阶乘：（int）n行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:44:42.220

您想计算`factorial:n`，但在您的函数中使用 的结果`factorial:n`。

改变： `return [self factorial:n]*[self factorial:n-1];`

到： `return n*[self factorial:n-1];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T07:15:03.103

我不熟悉 ObjC，但行：

```
+(int) factorial:(int)n
    //...
    return [self factorial:n]*[self factorial:n-1];
    //                      ^ 
```

看起来对我很可疑。这意味着对于 n != 0 您将获得无限递归和面对堆栈溢出 :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-23T12:58:39.657

你必须改变你的代码

```
return n*[self factorial:n-1]; 
```

成为

```
return  n* (n != 1 ? [self factorial:n-1] : 1); 
```

第一个将进行无限循环

例如：

```
int factorial = [self factorial:3];
NSLog(@"factorial 3 >> %i",factorial); the result is "factorial 3 >> 6" 
```

# javascript - jquery 小部件应用（这个，参数）

> ID：10370338
> 
> 赞同：3
> 
> 时间：2012-04-29T06:58:11.670
> 
> 标签：javascript, jquery, jquery-widgets

有时我看到人们使用它来调用小部件中的函数

```
this.myFunction.apply(this, arguments); 
```

而不是这个：

```
this.myFunction(); 
```

> [.apply jQuery 函数是什么？](https://stackoverflow.com/questions/3796788/whats-the-apply-jquery-function)
> 
> ```
> somefunction.apply(thisobj, argsarray) 
> ```
> 
> *上面调用了函数 somefunction，在函数范围内将 this 设置为 thisobj，并将 argsarray 中的参数作为参数传递给函数。*

但是考虑到下面的情况，直接调用函数还是使用.apply()会不会一样？我已经看到一些教程更喜欢 .apply() 方法，包括 jQuery 站点本身。[http://jqueryui.com/demos/widget/](http://jqueryui.com/demos/widget/)

这是一个小部件“标准”还是我还缺少其他东西？

```
_create: function() {
            var that = this;
            this.myButton = $( "<button>", {
                text: "My Button"
            })
            .appendTo( this.element )
            .bind("click", function() {
                // _bind would handle this check
                if (that.options.disabled) {
                    return;
                }
                that.displayMessage.apply(that, arguments);
                // Why not just call the following?
                // that.displayMessage();
            });
        },
displayMessage: function() {
        alert("Hey!");
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T07:26:26.720

该`apply`方法不仅允许您指定函数的上下文，还允许您将参数作为数组提供。来自[精美手册](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)：

> 调用具有给定`this`值并`arguments`作为数组提供的函数。

作为*`arguments`数组提供的*很重要。调用函数的当前参数在[类数组`arguments`对象](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/arguments)中可用，实际参数独立于函数的签名；例如，`f = function() {...}`可以调用 as`f(1,2,3)`并且`f`可以根据需要将这三个值从中提取出来`arguments`。

所以这：

```
that.displayMessage.apply(that, arguments); 
```

使用与调用`that.displayMessage`相同的参数`_create` 进行调用，而无需`_create`知道（或关心）调用它的参数；这允许函数在调用链的中间滑动，而不必处理可能不同数量的参数。这与调用`that.displayMessage()`.

如果`_create`是这样调用的：

```
o._create('where is', 'pancakes house?'); 
```

那么`apply`调用相当于：

```
that.displayMessage('where is', 'pancakes house?'); 
```

但如果使用不同的参数：

```
o._create(1, 2, 3); 
```

然后`apply`就像我们这样做一样：

```
that.displayMessage(1, 2, 3); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T07:08:42.440

它不是 jQuery，而是 JavaScript。 `.apply()`并`.call()`允许您更改`this`函数内部的含义。

# objective-c - 使用 NSURL Connection 发送多个 url 请求

> ID：10370343
> 
> 赞同：0
> 
> 时间：2012-04-29T07:00:29.200
> 
> 标签：objective-c, ios, nsurlconnection

我需要在一个视图中多次发送数据。我有大约 6 个 UISwitches，每次更改值时，我都需要（通过 POST 方法）将数据（一个简单的 NSString）发送到我的 php 脚本（http://www.mydomain.com/script/dowork.php）

在过去的几天里，我一直在努力做到这一点，因为我只设法让它只使用 1 个开关，但当用户更改多个开关时却不行。如果有人可以请给我一个如何做到这一点的例子，这将意味着很多。

编辑

这就是我现在的做法：

```
-(IBAction)switchSelector:(id)sender {
    switch ([sender tag]) {
        case 0:
            if (switchMax.on) {
                //here I Send it to the method that will make the connection
                [self registerWithServer:@"Tokens"]; 

                NSUserDefaults* defaults  = [NSUserDefaults standardUserDefaults];
                [defaults setBool: switchMax.on forKey: K_SWITCH_KEY];
                [defaults synchronize];
            } else {
                //other stuff
            }
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:58:35.267

你是如何用一个开关做到这一点的？你也可以发布代码吗？对于多个开关，只需将您的方法与接口构建器中的 valueChanged 挂钩。在该方法中检查哪个开关打开 - `if ([mySwitch1 isOn])`，编辑`NSString`并发送它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:47:47.733

只是一些想法，但您真的需要立即将更改发送到您的服务器吗？假设在某些设置面板中使用了这些开关，您可以在用户完成面板操作后保存设置并将其发送到您的服务器，例如当他们按下完成按钮或退出此视图时。这样，您只需发送一次请求，而不必为发送多次而烦恼。

请记住，用户使用的是移动设备，您应该尽量减少数据使用量。

# haskell - 在 let .. 表达式中使用守卫

> ID：10370346
> 
> 赞同：23
> 
> 时间：2012-04-29T07:00:55.157
> 
> 标签：haskell

有时我会写这样的代码

```
solveLogic :: Int -> Int -> Int
solveLogic a b =
    let 
        x = 1
        brainiac
            | a >= x     = 1
            | a == b     = 333
            | otherwise  = 5
    in
        brainiac 
```

每次我都想在没有不需要的“brainiac”功能的情况下写这些东西，就像这样：

```
solveLogic :: Int -> Int -> Int
solveLogic a b =
    let 
        x = 1
    in
        | a >= x     = 1
        | a == b     = 333
        | otherwise  = 5 
```

哪个代码更“Haskellish”。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-29T07:06:02.347

是的，使用一个`where`子句：

```
solveLogic a b
        | a >= x     = 1
        | a == b     = 333
        | otherwise  = 5
    where
      x = 1 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-29T11:04:55.853

当我想要守卫作为一种表达方式时，我会使用这个有点丑陋的技巧

```
case () of
_ | a >= x     -> 1
  | a == b     -> 333
  | otherwise  -> 5 
```

# android - 警报对话框主题

> ID：10370350
> 
> 赞同：4
> 
> 时间：2012-04-29T07:02:35.733
> 
> 标签：android, android-alertdialog

我在用着

```
<activity android:name =".ShowingDialog" 
          android:theme="@android:style/Theme.Dialog" /> 
```

在我的活动中，它正确显示了对话框，但是当对话框出现时，它在中间显示了我的项目名称，如下图所示，所以，在我按下返回按钮之前，我什么也做不了。

我的项目名称是：LMP

![我的项目名称是：LMP](../Images/83f03d7fc4b0724067f571d367cd3e93.png)

有什么建议么？

==================更新=============================== ==========

```
import android.app.Activity; 
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.widget.Button;
import android.widget.Toast;

public class ShowingDialog extends Activity {

    boolean b;
    String CancelMsg;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    //For Sending SMS with cancel Request

    //For Notification -1-
            final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
            alertDialog.setTitle("...");
            alertDialog.setMessage("...");

    // For Notification -2- 
            final AlertDialog alertDialog2 = new AlertDialog.Builder(this).create();
            alertDialog2.setTitle("...");
            alertDialog2.setMessage("...");

                    alertDialog.setButton("...", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int which) {

                           // If yes move the plaintiff to MyPage act.
                           Intent intent= new Intent(ShowingDialog.this,LMPActivity.class);
                           startActivity(intent);

                        ;

                       }
                    });

                    alertDialog.setButton2("...",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                alertDialog2.setButton("...", new DialogInterface.OnClickListener() {
                                           public void onClick(DialogInterface dialog, int which) {

                                                 CancelMsg = "Case_ID cancel";
                                               if (!b) {
                                                    try {
                                                        // Should write server number here + the chatting must be pushed above 
                                                        sendSMS("0000", CancelMsg);
                                                        Toast.makeText(ShowingDialog.this, "...", Toast.LENGTH_LONG)
                                                                .show();
                                                    } catch (Exception e) {
                                                        // TODO Auto-generated catch block
                                                        Toast.makeText(ShowingDialog.this, e.getMessage(),
                                                                Toast.LENGTH_LONG).show();
                                                    }

                                                }
                                           }
                                        });

                                        alertDialog2.setButton2("...", new DialogInterface.OnClickListener() {
                                           public void onClick(DialogInterface dialog, int which) {
                                            // here you can add functions
                                            // Do nothing 

                                           }
                                        });

                                        alertDialog2.setIcon(android.R.drawable.ic_dialog_alert);
                                        alertDialog2.show();

                                }
                            });

                    alertDialog.setIcon(android.R.drawable.ic_dialog_alert);
                    alertDialog.show();

    }

    public void sendSMS(String number, String msg) throws Exception {
        if (!b) {
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(number, null, msg, null, null);
        }
        b = true;
    } 
```

============================ 第二次更新===================== ===============

放好后：

xml 布局`visibility ="gone"`并添加此行：

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE);

public class ShowingDialog extends Activity {

    boolean b;
    String CancelMsg;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    //For Sending SMS with cancel Request
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.showing_dialog);
....
}} 
```

得到的结果如下图所示：

![](../Images/408d8f333e02d5d3eb05d9ebf1b3a653.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:30:10.710

您显示对话框的方式非常糟糕（您不应该只使用新活动来显示对话框）。我建议您改为查看[对话框片段](http://android-developers.blogspot.dk/2012/05/using-dialogfragments.html)。

# symfony - 错误页面不遵循内容类型/格式

> ID：10370354
> 
> 赞同：2
> 
> 时间：2012-04-29T07:04:16.793
> 
> 标签：symfony, twig

我遵循了本教程[http://symfony.com/doc/current/cookbook/controller/error_pages.html](http://symfony.com/doc/current/cookbook/controller/error_pages.html)，并且在 app/Resources/TwigBundle/views/Exception/ 中有 error.html.twig 和 error.json.twig

即使请求的内容类型设置为 application/json，所有错误都默认为错误页面的 html 版本。

路由的格式也定义了： [http://symfonyinstall/api/v1/users.json](http://symfonyinstall/api/v1/users.json)

请求标头：

```
Accept: application/json
Content-Type: application/json
Connection: keep-alive
Origin: chrome-extension: //rest-console-id
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko)           Chrome/18.0.1025.162 Safari/535.19 
```

响应标头：

```
Status Code: 404
date: Sun, 29 Apr 2012 06:54:35 GMT
Content-Encoding: gzip
X-Powered-By: PHP/5.3.10
Transfer-Encoding: chunked
Connection: keep-alive
Server: nginx
Content-Type: text/html; charset=UTF-8
cache-control: no-cache 
```

我没有想法......我真的需要一个 json 版本的错误才能让我的 API 工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-28T00:07:22.590

我刚刚遇到了同样的问题，尽管您的问题已经很老了，并且 symfony 从那时起增加了几个版本，但问题仍然存在，所以即使您不再需要知道它，也许其他人会知道。

[您最初的问题可能是由此处](http://trac.symfony-project.org/ticket/9988)描述的错误引起的，但在最初发布后并没有太多关于它的事情。从那时起，整个代码库都被更新了，所以虽然同样的症状再次出现，但错误并不相关。我在这里发布它是因为这些天寻找答案的任何人都可能会找到这个问题（就像我一样:)。

即使`JsonResponse`直接从内核异常处理程序中返回，它仍然会有`Content-Type: text/html; charset=UTF-8`. 这让我非常难过，以至于我使用 netcat 发出手动请求，中间没有任何智能软件，结果证明这种情况下的响应实际上有两个不同的 Content-Type 标头：

```
HTTP/1.0 500 Internal Server Error
Connection: close
X-Powered-By: PHP/5.5.9-1ubuntu4.17
Content-Type: text/html; charset=UTF-8
Cache-Control: private, must-revalidate
Content-Type: application/json
pragma: no-cache
expires: -1
X-Debug-Token: 775c55
X-Debug-Token-Link: http://127.0.0.1:8000/_profiler/775c55
Date: Thu, 27 Oct 2016 23:08:31 GMT 
```

现在，双 Content-Type 标头不是您每天都能看到的。似乎这是在`Symfony\Component\Debug\ExceptionHandler`仅在调试模式下使用的类中实现的。为了尽可能的健壮，它首先呈现描述抛出异常的标准 Symfony 错误页面。渲染的内容不会直接发回，而是利用 PHP 的输出缓冲功能来缓冲和存储生成的输出。然后它尝试从框架生成自定义错误页面。如果失败，则会发送先前准备好的消息。

然而，输出缓冲仅适用于消息内容，而不适用于标题 - 这些总是直接发送。这个问题只出现在调试环境中，异常内容类型的错误只在WebAPI中很常见，调试模式可以说用处不大。这使得暴露面相对较小，但是如果需要测试同时提供 WebAPI 和最终用户界面的应用程序，这可能会成为一个问题。

在不修改内部 Symfony 文件的情况下解决这个问题似乎是不可能的。输出控制位于 symfony 内核深处，不提供任何配置。无论如何，我不相信这种解决方案的好处。如果有人可以向我解释在自定义异常处理程序期间可能发生的事情，这会使默认处理程序在失败的情况下变得无用吗？也许用户代码弄乱了 ob_* 函数？

# iphone - 奇怪的 RestKit / RKRequestQueue 同步问题

> ID：10370356
> 
> 赞同：0
> 
> 时间：2012-04-29T07:04:23.837
> 
> 标签：iphone, objective-c, ios, restkit, synchronous

我有一个启用 ARC 的项目`RestKit`，虽然我的大部分请求都是异步完成的，但我在执行同步请求时遇到了问题：

在我的`AppDelegate`：

```
else if (![IKUserController loggedInUserIsAuthenticated]) {
    IKLoginViewController *loginVC = [[IKLoginViewController alloc] init];
    loginVC.scenario = SCENARIO_EXISTING;
    [self.window.rootViewController presentModalViewController:loginVC animated:YES];
} 
```

在实现中`loggedInUserIsAuthenticated`：

```
+ (BOOL)loggedInUserIsAuthenticated {
    IKUser *user = [IKUserController loggedInUser];

    if (!user) {
        return NO;  
    }
    else {
        NSString *username = user.userName;
        NSString *password = user.userPassword;

        if ([IKUserController loginWithUsername:username password:password]) {
            return YES;
        }
        else {
            return NO;
        }
    }

    return NO;
} 
```

和`loginWithUserName:password:`

```
+ (BOOL)loginWithUsername:(NSString *)username password:(NSString *)password {

    //return YES;

    NSDictionary *params = [[NSDictionary alloc] initWithObjectsAndKeys:username, @"username", password, @"password", nil];

    RKResponse *response = [[[RKClient sharedClient] post:@"/user/authenticate" params:params delegate:nil] sendSynchronously];

    if (response.isOK) {
        return YES;
    }
    else {
        return NO;
    }

    return NO;
} 
```

和错误：

```
*** Assertion failure in -[RKRequestQueue removeRequest:decrementCounter:], /Users/admin/Documents/dev/RestKit/Code/Network/RKRequestQueue.m:350 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:56:40.380

RKClient 方法*post*已经将请求添加到默认请求队列，所以我认为问题在于您发送请求两次 - 一次异步和一次同步。手动配置请求，而不是使用 RKClient *post方法。**RKClient*上有一个 setupRequest 方法，这将使您更容易，您只需要定义 url、方法和参数，如下所示：

```
RKRequest* req = [RKRequest requestWithURL:reqURL delegate:self];
[req setMethod:RKRequestMethodPOST];
[req setParams:params];

[client setupRequest:req];

[req sendSynchronously]; 
```

# c# - Ascii范围关于二进制文件？

> ID：10370361
> 
> 赞同：3
> 
> 时间：2012-04-29T07:05:07.047
> 
> 标签：c#, .net-4.0, ascii, binary-data

我一直在阅读有关此主题的信息，但没有得到我的问题的*具体*信息：

（也许以下是不正确的 - 但请纠正我）

每个文件（文本/二进制文件）都在保存*BYTES*。

字节是 8 位，因此最大值是`2^8-1 = 255`代码。

这 255 个代码分为以下`2`几组：

```
0..127 : textual chars
128:..255 : special chars. 
```

所以二进制文件包含整个范围的字符代码：`0..255`（ascii chars+special chars）。

1) 正确吗？

2）现在，假设我将一个 INT 保存在二进制文件中。（32 位系统中 4 个字节）

该文件如何告诉程序读取它：它**不是**4 个不相关的单个字节**，而是**一个`is`4 个字节的 int？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T07:07:58.583

底层所有文件都存储为字节，所以从某种意义上说，你所说的是正确的。但是，如果您打开一个打算以二进制形式读取的文件并尝试在文本编辑器中读取它，它会看起来像乱码。

程序如何知道是以文本形式还是以二进制形式读取文件？（即作为特殊的 ASCII 或其他编码字节集，或者只是作为具有不同表示的底层字节）？

好吧，它不知道——它只是按照它所说的去做。

在 Windows 中，您`.txt`在记事本中打开文件 - 记事本期望读取文本。尝试在记事本中打开一个二进制文件。它会打开，你会看到东西，但它会是垃圾。

如果您正在编写自己的程序，如果您想将所有内容存储为二进制文件，则可以使用编写`BinaryWriter`和读取使用。`BinaryReader`如果你写 using`BinaryWriter`和读 using会发生什么`StringReader`？

* * *

回答你的具体例子：

```
using (var test = new BinaryWriter(new FileStream(@"c:\test.bin", FileMode.Create)))
{
    test.Write(10);
    test.Write("hello world");
}

using (var test = new BinaryReader(new FileStream(@"c:\test.bin", FileMode.Open)))
{
    var out1 = test.ReadInt32();
    var out2 = test.ReadString();

    Console.WriteLine("{0} {1}", out1, out2);
} 
```

看看你必须如何以与所写相同的顺序阅读？该文件没有告诉你任何事情。

现在切换第二部分：

```
using (var test = new BinaryReader(new FileStream(@"c:\test.bin", FileMode.Open)))
{
    var out1 = test.ReadString();
    var out2 = test.ReadInt32();

    Console.WriteLine("{0} {1}", out1, out2);
} 
```

你会得到胡言乱语（如果它有效的话）。然而，文件中没有任何内容可以预先告诉您。那里没有特别的信息。程序必须根据一些带外信息（某种规范）知道要做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T07:20:29.447

> 所以二进制文件包含整个范围的字符代码：0..255（ascii 字符+特殊字符）。

不，二进制文件只包含字节。*介于 0 和 255 之间的值。*如果您决定将其含义赋予它们，则它们应该只被视为字符。如果它是二进制文件（例如 JPEG），那么您不应该这样做 - 图像数据中的字节 65 在逻辑上不是“A” - 它是文件中该点处的字节 65 的任何含义。

（请注意，即使是文本文件也不会分为“ASCII 字符”和“特殊字符”——这取决于编码。在 UTF-16 中，每个代码单元占用两个字节，无论其值如何。在 UTF-8 中， bytes 取决于您要表示的字符。）

> 该文件如何告诉程序读取它：它不是 4 个不相关的单个字节，而是一个 4 个字节的 int？

该文件没有告诉程序。程序必须知道如何读取文件。如果您让记事本打开 JPEG 文件，它不会显示图像 - 它会显示乱码。同样，如果您尝试强制图像查看器像打开 JPEG 一样打开文本文件，它会抱怨它已损坏。

读取数据的程序需要了解他们将要读取的数据的结构——他们必须知道会发生什么。在某些情况下，格式非常灵活，例如 XML：有明确指定的层，但随后程序读取具有更高级别含义的值 - 元素、属性等。在其他情况下，格式绝对精确：首先你将从一个 4 字节整数开始，然后是两个 2 字节整数或其他。这取决于格式。

编辑：回答您的具体（重复）评论：

> Im Cmd shell....你已经编写了你的​​二进制文件。我不知道你在那里做了什么。我怎么知道是一次读取 4 个单字节还是 4 个字节？

读取数据的程序要么需要知道数据的*含义*，要么不需要。如果只是将文件从一个地方复制到另一个地方，它不需要知道数据的含义。它是一次复制一个字节还是一次复制所有四个字节都没有关系。

如果它*确实*需要知道数据的含义，那么仅仅知道它是一个四字节整数并没有太大帮助——它需要知道该整数*意味着*什么才能对它做任何有用的事情。所以你的文件是从命令外壳写的......这是什么意思？如果我不知道这意味着什么，我知道一次读取一个字节还是将四个字节作为整数读取有什么关系？

（正如我上面提到的，有一个中间选项，代码可以理解没有意义的结构，并将该结构暴露给其他代码，然后施加意义 - XML 就是一个典型的例子。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T07:29:20.137

这都是解释的问题。文件和系统都不知道您的文件中发生了什么，他们只是将您的存储视为一个*字节序列，*其本身绝对没有意义。当您阅读一个单词时，您的大脑中也会发生同样的事情（您尝试选择一种语言来解释它，以赋予字符序列以含义）。

您的程序有责任按照您想要的方式*解释*数据，因为没有单一的有效解释。例如，字节序列`48 65 6C 6C 6F 20 53 6F 6F 68 6A 75 6E`可以解释为：

*   一个字符串 ( `Hello Soohjun`)
*   12 个单字节字符的序列（`H`, `e`, `l`, `l`, `o`, `, `S`, `o`, `o`, `h`, `j`, `u`, `n`）`
`*   由 3 个无符号整数组成的序列，后跟一个字符（1214606444、1864389487、1869113973、110）*   一个字符后跟一个浮点数，然后是一个无符号整数，然后是一个浮点数（72、6.977992E22、542338927、4.4287998E24），依此类推...`

 `*您*是选择这些字节含义的人，另一个程序会对相同的数据做出不同的解释，就像字母组合在英语和法语中具有不同的解释一样。

PS：顺便说一句，这就是*逆向工程*文件格式的目标：找到每个字节的*含义*。`

# php - 选中后如何消失一个复选框

> ID：10370362
> 
> 赞同：0
> 
> 时间：2012-04-29T07:05:11.460
> 
> 标签：php, mysql

我正在为预订时间制作表格，我将时间设置为复选框，复选框都来自一个表单，我希望用户可以选择一个复选框，提交表单后，复选框变得无法选择或消失。我试图验证是否在数据库中找到数据，然后使其消失或无法选择，但没有成功。

我的桌子看起来像这样：

[http://i.imgur.com/hQdbl.jpg?1](http://i.imgur.com/hQdbl.jpg?1)

实际上日期和时间来自数据库上的另一个表。这是我的每个检查 bos 的 php 代码：

```
echo"
<input type='radio' name='datetime' value='". $row['day1']."&nbsp;&nbsp;&nbsp;".$row['time1']."'>
<p>". $row['day1'] ,"</p><br/>". $row['time1'] ." 
```

你能帮我么 ：-\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:18:06.470

如果我的问题是正确的，你的意思是这样的吗？

```
if($_POST['datetime'] != ($row['day1'] . "   " . $row['time1'])) {
    echo"
    <input type='radio' name='datetime' value='". $row['day1']."&nbsp;&nbsp;&nbsp;".$row['time1']."' disabled>
    <p>". $row['day1'] ,"</p><br/>". $row['time1'] ."
    // etc
} else {
    echo"
    <input type='radio' name='datetime' value='". $row['day1']."&nbsp;&nbsp;&nbsp;".$row['time1']."'>
    <p>". $row['day1'] ,"</p><br/>". $row['time1'] ."
} 
```

# vb6 - 在保留“最小化”控件的同时禁用在 VB6 中调整窗体大小

> ID：10370363
> 
> 赞同：6
> 
> 时间：2012-04-29T07:05:18.977
> 
> 标签：vb6

我开发了一个 VB6 应用程序。现在我想禁用调整表单大小。我知道有一个属性`Border style`，它更改为`fixed single`，可以完成我的工作。但我想将按钮最小化到我的表单中。最小化按钮仅在“Sizable”模式下。我将另一个属性更改`MaxButton`为`false`. 当我运行我的程序时，我仍然可以重新调整表单的大小。

请告诉我如何禁用调整表格大小。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T07:17:42.847

您不能在固定单边框表单上将“MinButton”属性设置为 true。我可以在我的 VB6 版本中。

![在此处输入图像描述](../Images/04f3978302610b6734853625d6814922.png)

# c++ - boost::date_time，g++-4.7.0，编译错误

> ID：10370368
> 
> 赞同：6
> 
> 时间：2012-04-29T07:06:10.397
> 
> 标签：c++, ubuntu, compiler-errors, g++, boost-date-time

以下代码使用 g++-4.7.0 时会出现编译错误，但使用 g++-4.6 时可以正常编译。

```
#include <iostream>
#include <boost/date_time/local_time/local_time.hpp>
using namespace std;
int main(){
    boost::posix_time::ptime time_t_epoch(boost::gregorian::date(1970,1,1));
    cout << time_t_epoch << endl;
    return 0;
} 
```

以下是反复看到的错误信息（编译器输出很多信息）

```
/usr/include/boost/date_time/local_time/local_date_time.hpp:433:84: error: use of deleted function boost::shared_ptr<boost::date_time::time_zone_base<boost::posix_time::ptime, char> >::shared_ptr(const boost::shared_ptr<boost::date_time::time_zone_base<boost::posix_time::ptime, char> >&) 
```

我正在使用 Ubuntu 12.04 和 libboost-date-time1.46.1。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T09:25:59.543

通过安装 boost-1.48 解决了问题

# c# - 从 C# 表单将行插入数据库

> ID：10370372
> 
> 赞同：0
> 
> 时间：2012-04-29T07:07:33.843
> 
> 标签：c#, database, insert

```
String ConString =  @"DataSource=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\BizContact.mdf;Integrated Security=True;User Instance=True";

SqlConnection cn = new SqlConnection(ConString);
try
{
   cn.Open();
   MessageBox.Show("connect");
}
catch (Exception)
{
   MessageBox.Show("Did not connect");
}       

SqlCommand cmd = new SqlCommand("insert tableNote values (@UserName,@Note)",cn);
cmd.Parameters.AddWithValue("@UserName", textBox1.Text);
cmd.Parameters.AddWithValue("@Note", textBox2.Text);

try
{
   int res = cmd.ExecuteNonQuery();

   if (res > 0)
   {
      MessageBox.Show("insert");
   }
}
catch (Exception ex)
{
   MessageBox.Show(ex.Message);
}
finally
{
   cn.Close();
} 
```

我正在尝试向数据库添加新行。上面的代码是正确的，没有错误，它显示了 try 语句，但没有将行插入数据库。任何想法来解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T07:17:11.573

尝试完整的 T-SQL 语句

```
"INSERT INTO table_name (userColumn, noteColumn) VALUES (@UserName, @Note)" 
```

还通过使用状态处理 SqlConnection

```
using(SqlConnection  cn = new SqlConnection(ConString))
{
  //....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T07:16:30.830

您的插入语句是错误的（缺少`into`）。执行以下任一操作：

```
insert into tableNote select @UserName,@Note 
```

或者

```
insert into tableNote (column_name1, column_name2) values (@UserName,@Note) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T07:16:51.017

打开 Sql Profiler 并观察它执行命令，然后尝试将该命令重播到 Sql Management Studio 中。很可能，它会向您显示查询的格式非常轻微，以至于它很高兴没有成功执行任何操作。

# ruby-on-rails - mongoid 版本控制不能只破坏一个版本

> ID：10370376
> 
> 赞同：4
> 
> 时间：2012-04-29T07:08:46.403
> 
> 标签：ruby-on-rails, mongoid, versioning

我正在使用 Mongoid::Versioning 通过包含 Mongoid::Versioning 来对我的 Wiki 模型进行版本控制

```
class Wiki
  include Mongoid::Document
  include Mongoid::Versioning
  include Mongoid::Timestamps

  field :title
  field :content
  field :summary
  # ...
end 
```

我想将 wiki 文档恢复到以前的版本，例如我有一个版本最高为 3 的 wiki，然后我想将其恢复到版本 2，如何删除 Mongoid::Versioning 嵌入的相应版本（在这个案例版本 2）？我已经尝试过删除嵌入文档的常用方法，但似乎它要么什么都不做，要么清除我文档中嵌入的所有版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-06T18:04:52.107

```
version_to_delete = wiki.versions[1]
wiki.versions.delete(version_to_delete) 
```

有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/26770616/mongoidversioning-delete-one-version/26776813#26776813)。

# java - 将 JavaScript 转换为 Java

> ID：10370384
> 
> 赞同：17
> 
> 时间：2012-04-29T07:11:00.610
> 
> 标签：java, javascript

有没有将 JavaScript 转换为 Java 的好方法？

我有一个需要转换为 Java 的 JavaScript 文件。它是一个用 JavaScript 编写的日历组件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T07:11:50.633

不，你不能。

相似的名字是不幸的，但 JavaScript 和 Java 是完全不同的语言。

来自[维基百科](http://en.wikipedia.org/wiki/JavaScript)：

> JavaScript 使用受 C 语言影响的语法。JavaScript 从 Java 复制了许多名称和命名约定，但这两种语言在其他方面不相关并且具有非常不同的语义。JavaScript 中的关键设计原则取自 Self 和 Scheme 编程语言。

更准确地说：当然可以。但这涉及在您的 java 程序中编写或合并 JS 引擎、二进制代码或某种解释器。一个完整的转译器可能是可能的，但并不容易，尤其是在这个方向上，当然还没有制造出来。

# node.js - 如何从模板引擎中轻松访问 MongoDB ObjectId 日期？

> ID：10370385
> 
> 赞同：2
> 
> 时间：2012-04-29T07:11:46.863
> 
> 标签：node.js, mongodb

目前，我使用 JavaScript 将日期附加到每个对象，类似于以下内容。

```
post.date = getTimestamp(post._id).toDateString(); 
```

然后我可以从我的模板中访问“日期”。有没有更好的方法来提取日期？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T08:37:12.530

我不确定这是否适用于模板，但是：

```
post._id.getTimestamp(); 
```

返回一个 ISODate。

[http://mongodb.github.com/node-mongodb-native/api-bson-generated/objectid.html#gettimestamp](http://mongodb.github.com/node-mongodb-native/api-bson-generated/objectid.html#gettimestamp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T11:11:09.117

如果 _id 是 UUID，那么它的前 8 个字节是时间戳。例如，您可以按如下方式提取日期：

```
var date = new Date( parseInt( post._id.substring(0,8), 16 ) * 1000 ) 
```

# network-programming - 用于解决客户端 IP 地址/网络更改等问题的网络协议

> ID：10370402
> 
> 赞同：2
> 
> 时间：2012-04-29T07:16:49.423
> 
> 标签：network-programming, network-protocols

与移动设备的持久连接很困难。信号条件可能会迅速变化，连接类型也会发生变化。例如，当我离开公寓 (WiFi)、乘坐公共汽车 (WiMax/LTE)、转乘地铁（间歇性 CDMA，有时在其他运营商上漫游）以及步行上班时，我可能想将音频流式传输到我的手机（ WiMax/LTE 并返回 WiFi）。仅在这 15 分钟的旅程中，我就使用了至少 4 个不同的 IP 地址/网络，并且在此过程中遇到了各种连接问题。但是，很少会完全失去与 Internet 的连接，并且信号状况导致连接出现问题的时间只会在很短的时间内发生。

我正在寻找一种协议，该协议允许在网络之间漫游并且非常容忍恶劣的网络条件，同时保持虚拟的端到端连接。此协议将启用（通常）移动设备和某种代理服务器之间的连接，该代理服务器将代表移动设备通过此容忍协议中继常规 TCP/UDP 连接。

该协议将位于第 3 层附近，甚至可以创建通过它隧道传输的虚拟网络接口。也许有一个 VPN 或 SOCKS 代理解决方案已经满足了这些需求。

**这样的协议是否已经存在？**

如果没有，我可能会想出一个，但宁愿先捎带现有的努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:45:23.533

互联网络社区内有许多努力来准确解决这些“网络移动性”问题。

特别是，[移动 IP](http://en.wikipedia.org/wiki/Mobile_IP)（及其 IPv6 大姐[Proxy Mobile IPv6](http://en.wikipedia.org/wiki/Proxy_Mobile_IP)）是一个广义术语，表示努力使 IP 地址本身可跨网络移植，但我怀疑这些技术是否已达到足够成熟/部署到今天的生产使用。

在没有网络支持的情况下进行此类移动需要主机以经过身份验证的方式向您宣布其新地址的方法；这就是[主机身份协议](http://en.wikipedia.org/wiki/Host_Identity_Protocol)的设计目的，但它仍处于 RFC 流程的“实验”阶段。从[RFC 5201](https://www.rfc-editor.org/rfc/rfc5201)的摘要：

> HIP 允许同意的主机安全地建立和维护共享的 IP 层状态，允许分离 IP 地址的标识符和定位器角色，从而实现跨 IP 地址更改的通信连续性。

有几个已知可以互操作的开源实现。没有声称这是一个完整的列表，也没有保证其中任何一个（它们只是谷歌搜索“主机身份协议实现”的几个挑选出来的），有：

*   适用于多种操作系统的[OpenHIP ；](http://www.openhip.org/)
*   [Linux 的HIPL](https://launchpad.net/hipl)；
*   [Java的可爱](http://code.google.com/p/cutehip/)；
*   用于 *BSD/Linux[的 inter.net 的 HIP 。](http://hip4inter.net/)

# ruby-on-rails - 如何从我的 Rails 应用程序中的 Gem 加载 app/models/**？

> ID：10370408
> 
> 赞同：0
> 
> 时间：2012-04-29T07:17:48.137
> 
> 标签：ruby-on-rails, ruby

所以我在一个没有加载rails的应用程序中编写了一些业务逻辑，只使用了活动记录并使用了一个测试数据库，这样我就可以让测试运行得非常快。

现在我已经完成了，我无法加载我的模型和东西。

我的 gem 目录看起来有点像这样：

```
- app
  - models
    - user.rb
- features
- spec
- biz-logic.gemspec 
```

但是，当我通过私人 git repo 需要这个 gem 时

并在我的 rails 应用程序中启动 rails c

用户未初始化并且需要'biz-logic'什么都不做。

那么我怎样才能让它正常工作呢？我需要在我的 gem 中使用导轨吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:11:15.927

您应该创建一个 lib/biz-logic.rb 文件

在该文件中，您将拥有：

需要“用户”

你将不得不将 user.rb 移动到 gem/lib/user.rb 中

# cakephp - loadModel() VS requestAction() VSConstructClasses() 哪个更好，为什么？

> ID：10370410
> 
> 赞同：0
> 
> 时间：2012-04-29T07:18:12.233
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.1

loadModel() VS requestAction() VSConstructClasses() 。

有什么区别？哪个更好，为什么？

在哪种情况下首选哪一种，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:10:44.907

马克已经在评论中回答了你的问题。这是一个非常无效的问题！这三种方法做了三件完全不同的事情。

即使这些方法做同样的事情，你的问题仍然没有任何意义——更好的是什么？你想达到什么目的？没有上下文，这就像问“哪个更好，吃冰淇淋还是做送奶工？

# memory - 当从内存中读取数据错误时，如何判断是读取错误还是写入错误？

> ID：10370411
> 
> 赞同：2
> 
> 时间：2012-04-29T07:18:40.327
> 
> 标签：memory, memory-management

经过大量谷歌搜索，我发现 CRC 检查确定内存是否错误。但我想具体看看在读或写周期是否有错误。我怎样才能知道呢？

# algorithm - 寻找可能由 Dijkstra 提供的算法

> ID：10370412
> 
> 赞同：1
> 
> 时间：2012-04-29T07:18:41.267
> 
> 标签：algorithm

我正在寻找一种将节点分布在平面上的算法，以使边缘的大小都相同。我想是 Dijkstra 的，但我不记得了。有人听说过这个算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:46:57.553

一般来说，这是不可能的。实际上，您想要类似于[平面平铺中](http://en.wikipedia.org/wiki/Tiling_by_regular_polygons)的有限图片的东西。

有一些简单的情况 - 正多边形和一些包含连接多边形的图，但即使是像 4 点（四面体）的完整图这样简单的东西也是不可能的。

如果您想要尝试平衡不可能的约束的东西，请尝试使用[graphviz](http://www.graphviz.org/)及其neato 程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:52:34.590

好吧，如果您想创建具有此类属性的任何图形，那么有许多图形可以帮助您，例如：一条线、一个环、一棵树等.. 但在这里，您是决定什么的人要包含或排除的边。

如果您有某个图，并且您希望所有边的大小相同，那么这是不可能的（由于某些情况）-例如：超过 3 个节点的完整图，具有一个主节点和多个节点的星形拓扑5个奴隶，直接靠近的奴隶是邻居。[相信其他帖子中的案例会告诉你更多]

一种特殊情况，给定一个图 $G(V,E)$，绘制 $G$ 使得 $e \in E$ 中的每条边的长度小于一个单位。这是一个 NP-Hard 问题。[即你无法判断任意图$G$是否为单位盘图]

# python - 更好的编程方式

> ID：10370418
> 
> 赞同：1
> 
> 时间：2012-04-29T07:20:32.853
> 
> 标签：python, algorithm

我正在尝试使用 python 语言（abc.py）编写脚本。在执行脚本时，我需要使用一些命令行参数。

说 -m, -p 是我的论点。我需要在这些选项旁边有一个字符串。前任：

```
 1\. $> python abc.py -m 'first' -p 'second' {correct}
 2\. $> python abc.py -p 'first' -m 'second' {correct}
 3\. $> python abc.py -m -p 'first' 'second' {Incorrect}
 4\. $> python abc.py 'first' -p 'second' {Incorrect} 
```

我有更多这样的论点，例如`-m`, `-p`。检查传递的参数是否格式正确的最佳算法是什么。除了维护先前参数并基于它进行检查的方法之外，我无法思考。

感谢您提前提供帮助

安吉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T07:28:44.463

你不需要自己做，正如他们所说的 Python 附带电池。标准库有两个用于解析命令行参数的模块：用于 python 2.7+的[argparse](http://docs.python.org/library/argparse.html)和用于 2.6 或更早版本的[optparse 。](http://docs.python.org/library/optparse.html)这些文档也有很好的使用示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T07:24:52.857

使用 argparse 模块[http://docs.python.org/library/argparse.html#module-argparse](http://docs.python.org/library/argparse.html#module-argparse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T21:30:14.903

这些模块很好，虽然它们不能很好地与 pylint 配合使用，所以我倾向于进行自己的参数解析以获得更好的错误检测。例如：

```
red = False
blue = False
green = False
red_weight = 1.0
green_weight = 1.0
blue_weight = 1.0

while sys.argv[1:]:
   if sys.argv[1] in [ '-h', '--help' ]:
      usage(0)
   elif sys.argv[1] in [ '-r', '--red' ]:
      red = True
   elif sys.argv[1] in [ '-b', '--blue' ]:
      blue = True
   elif sys.argv[1] in [ '-g', '--green' ]:
      green = True
   elif sys.argv[1] == '--red-weight':
      red_weight = float(sys.argv[2])
      del sys.argv[1]
   elif sys.argv[1] == '--green-weight':
      green_weight = float(sys.argv[2])
      del sys.argv[1]
   elif sys.argv[1] == '--blue-weight':
      blue_weight = float(sys.argv[2])
      del sys.argv[1]
   else:
      sys.stderr.write('%s: unrecognized option: %s\n' % (sys.argv[0], sys.argv[1]))
      usage(1)
   del sys.argv[1] 
```

高温高压

# validation - JSR303 验证 - Bean 的属性作为消息参数

> ID：10370419
> 
> 赞同：0
> 
> 时间：2012-04-29T07:21:11.840
> 
> 标签：validation, bean-validation

在 JSR303 验证中，是否可以将 bean 的属性作为验证消息的参数传递？

前任。

```
class BeanA { 

private String userName;
@Min(value=15, message="Age of {userName} should be greater than {value}")
private int age;

public BeanA(String userName,int age){
//initialization
}

} 
```

对于一个对象`BeanA("Ahamed", 12)`，我应该得到错误“ ***Ahamed****的年龄应该大于 15* **”**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:07:37.433

不幸的是，您只能将常量值传递给注释参数。由于您需要评估消息的值，因此不能将其设置为注释参数。

事实上，您实际上并不需要这样做，默认错误消息或多或少会告诉您正在发生的事情，尽管它并不像您想要的那样提供信息。**

# ios - 我可以在 tableviewcell 中发现 tableview 手势识别器的状态吗

> ID：10370421
> 
> 赞同：0
> 
> 时间：2012-04-29T07:21:51.577
> 
> 标签：ios, uitableview, uigesturerecognizer

我的表格单元格中有一个自定义 tableviewcell 我想要做的是当用户在单元格中从左到右平移时，单元格处理该手势并禁用 tableview 中的滚动。我有那个工作但是如果用户首先开始滚动并在滚动平移时从左到右平移仍然会发生。

我想设置一个布尔值，表示父级正在滚动，所以不要平移，我可以让它工作，因为我可以检测到滚动

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

因为 otherGestureRecognizer 将是 UIScrollViewPanGestureRecognizer 而gestureRecognizer 将是 UIPanGestureRecognizer。

我的问题是如何确定 UIScrollViewPanGestureRecognizer 何时在表格单元格中结束，因为如果我设置了一个标志，我需要在滚动结束时取消设置它，以便如果用户想要在滚动后平移他们可以。

如果不向我询问更多详细信息，我希望一切都有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:43:24.197

我设法解决了这个问题。我已经实现了一个自定义手势识别器，如果第一个动作是向上或向下，它会失败，因为它表示滚动。如果第一个动作是向左或向右，它会成功并阻止滚动。

如果有人有兴趣，我会发布代码。

# java - Gradle - 获取依赖项的最新发布版本

> ID：10370422
> 
> 赞同：105
> 
> 时间：2012-04-29T07:22:22.417
> 
> 标签：java, maven, dependencies, ivy, gradle

`Gradle`告诉以下内容的最简单方法是什么：

> 检索“junit”依赖项并获取其最新的“发布”版本。

管理 Maven 和 Ivy 存储库对我来说有点新鲜。我尝试了以下步骤，但它们导致`Could not resolve dependency ...`错误：

*   `compile "junit:junit:latest.release"`将存储库设置为 only *（但是，如果我说“junit:junit:4.10”，它会起作用）*。`mavenCentral()`

**   `compile "junit:junit:latest.release"`使用存储库设置以下方式写入：

    ```
    ivy {
        // I also tried 'http://maven.org' and other possible variants.           
        url "http://repo1.maven.org" 
        layout "maven"
    } 
    ```

    *   尝试使用 Spring Source Ivy 存储库：

    ```
    ivy {
        artifactPattern "http://repository.springsource.com/ivy/libraries/release/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]"
        ivyPattern "http://repository.springsource.com/ivy/libraries/release/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]"
    } 
    ```* 

 *也许我误解了什么。为什么获取**最新**版本的依赖项会是一项如此艰巨的任务？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2012-04-29T16:31:18.603

有时获取最新版本会非常有用——例如，如果您经常发布自己的依赖项。

您可以获得最新版本，例如

```
compile "junit:junit:+" 
```

或者最好至少指定主要版本，例如

```
compile "junit:junit:4.+" 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-04-29T08:06:37.000

Gradle 目前不支持 Maven `RELEASE`（很少使用和弃用），但它支持 Ivy 的`latest.release`. 但是，一般建议是针对精确版本进行构建。否则，构建可能会变成彩票。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-04-07T12:49:48.913

查看 Gradle-Versions-Plugin。它完全符合您的要求：[https ://github.com/ben-manes/gradle-versions-plugin](https://github.com/ben-manes/gradle-versions-plugin)

有关安装，请参见 github 页面。基本上你需要将这两行添加到你的 build.gradle - 项目文件中：

```
apply plugin: 'com.github.ben-manes.versions'

buildscript {
    [...]
    dependencies {
        classpath 'com.github.ben-manes:gradle-versions-plugin:0.8'
        [...]
    }
}
[...] 
```

然后，您可以通过在项目目录的终端中运行此命令来使用该插件：

```
./gradlew dependencyUpdates -Drevision=release 
```

它会告诉你哪些依赖是过时的！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-02-28T15:52:30.993

最新的 Gradle 用户指南提到并解释了加号登录版本：

从[7.2 开始。声明你的依赖](https://docs.gradle.org/2.11/userguide/artifact_dependencies_tutorial.html#N1059B)：

> ```
> dependencies {
>     compile group: 'org.hibernate', name: 'hibernate-core', version: '3.6.7.Final'
>     testCompile group: 'junit', name: 'junit', version: '4.+'
> } 
> ```
> 
> ...构建脚本还指出，任何 junit >= 4.0 都需要编译项目的测试。

从[23.7\. 依赖解析如何工作](https://docs.gradle.org/2.11/userguide/dependency_management.html#sec:dependency_resolution)：

> 如果依赖项被声明为动态版本（如 1.+），Gradle 会将其解析为存储库中最新的可用静态版本（如 1.2）。对于 Maven 存储库，这是使用 maven-metadata.xml 文件完成的，而对于 Ivy 存储库，这是通过目录列表完成的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-29T22:20:00.033

**在 Android Studio 中：**

如果您正在使用`+`该版本，并且想知道*实际使用*的是哪个版本，请在边栏中选择`Project`，然后在`External Libraries`您下方会看到实际使用的版本号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-12T19:09:37.787

Kotlin DSL（build.gradle.kts）的另一个类似符号：

```
dependencies {
    implementation("or.jsoup", "jsoup") {
        version {
            require("1.14.+")
        }
    }
    // OR simply
    // implementation("or.jsoup:jsoup:1.14.+")
} 
```

[在Gradle 文档](https://docs.gradle.org/current/userguide/dynamic_versions.html)中阅读有关此内容的更多信息。

文档摘录：

> 动态版本可以是版本范围（例如 2.+），也可以是可用的最新版本的占位符，例如 latest.integration。*

# python - 概率谜题，游戏的预期收益

> ID：10370425
> 
> 赞同：4
> 
> 时间：2012-04-29T07:23:25.387
> 
> 标签：python, puzzle, probability

这是昨天在 interviewstreet 结束的编程竞赛中的一个问题：

爱丽丝和鲍勃玩游戏。第 i 轮 (i >= 1) 的操作如下：

*   Alice 支付 Bob 2 * i - 1 美元，

*   爱丽丝扔了一枚有偏见的硬币，

*   如果硬币的结果是连续k轮正面，则游戏停止，否则游戏继续。

给定 k 和投掷结果为正面 (p) 的概率，您的程序应该找到 Alice 支付给 Bob 的预期美元数，以及预期的回合数。

输入

> 输入的第一行包含测试用例的数量（T <= 50）。接下来的 T 行中的每一行都包含由单个空格分隔的 p 和 k。p 是一个十进制数，小数点后最多有两位数，这样 0.6 <= p <= 1。k 是一个正整数，这样 0 < k <= 20。

输出

> 对于每个测试用例，打印两个整数。第一个数字是预期游戏轮数的整数部分，第二个数字是 Alice 支付给 Bob 的预期美元数的整数部分。

样本输入

```
3

0.6 1

1 20

0.80 8 
```

样本输出

```
1 3

20 400

24 976 
```

我已经得到了问题的第一部分，即预期的游戏轮数。我用下面的代码得到它

```
if __name__ == '__main__':
    t = int(raw_input())   
    while t :
        t -= 1
        temp = str(raw_input())
        p,k = temp.split(' ')
        p = float(p)
        k = int(k)

        #print p,k
        ans  = 0.0
        num = k * (p**k)
        den = 1
        q = 1.0 - p
        for N in range(1,k+1):
            den = den - ((p**(N-1))*q)
            num = num + (N*(p**(N-1))*q)
            #print (N*(q**N))

        print int(num/den) 
```

但是问题的第二部分仍然让我感到困惑，即 Alice 支付给 bob 的预期美元数。如何计算预期收益？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:54:21.200

即使您知道预期的回合数，您也需要对所有可能的支出进行平均。这意味着它比仅在预期停止时间计算支出更复杂。以下是细节：

回想一下期望的技术定义，如果 X 是一个随机变量，那么 X 的期望值是 X(w)*Pr(w) 的所有可能结果 w 的总和。如果 X 取正整数值，我们可以重新表述为 X 的期望值是从 i=1 到 i*Pr(X=i) 的无穷大的总和。在您的情况下，我们处理的随机变量是 T = 游戏停止时间，P = 支出。

期望轮数是 T 的期望，它是从 i=1 到 i*Pr(T=i) 的无穷大的总和。由于他们只要求期望的整数部分，一旦 i*Pr(T=i) 小于 1/2^i，我们就可以停止求和。（当 i*Pr(T=i)<1/2^i 时停止求和的想法是 1/2^i 总和为 1，但您可能需要对此进行调整以避免低估。）

P 的期望稍微复杂一些。如果游戏要进行 j 轮，那么支出将是从 i=1 到 j 的 2i-1 的总和，结果是 j^2。因此，只能发生 j^2 形式的支出，并且 Pr(P=j^2)=Pr(T=j)。所以 P 的期望值是 i=1 到无穷大 i^2 * Pr(P=i^2) 的和，等于 i=1 到无穷大 i^2*Pr(T=一世）。同样，一旦 i^2*Pr(T=i) 小于 1/2^i，我们就可以停止求和。

# javascript - 根据包装高度更改图像

> ID：10370427
> 
> 赞同：0
> 
> 时间：2012-04-29T07:23:45.810
> 
> 标签：javascript, jquery

我正在尝试编写一个脚本来查看页面上所有 postInside 包装器的高度。如果每个单独包装器的高度小于 320 像素，我想为该特定包装器内的图像添加样式。

这是我的代码。任何反馈都会很棒。

```
jQuery('div.postInside').each(function(){
  var div = jQuery('div.postInside').height();
  var wrapper = jQuery('div.postInside');
  if (div < 320){
    jQuery('p.imageCenter img').attr('style','max-width:250px !important');
    delete wrapper;
    delete div
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:36:24.707

如果我理解正确，这应该有效：

```
jQuery('div.postInside').each(function(){
  if (jQuery(this).height() < 320) {
    jQuery(this).children('img').css('max-width','250px !important');
   }
}); 
```

# escaping - 如何在telnet的线路模式下发送EOF

> ID：10370428
> 
> 赞同：1
> 
> 时间：2012-04-29T07:23:47.893
> 
> 标签：escaping, telnet

在连接到远程服务器后，我是 linux 套接字编程的新手

```
telnet x.x.x.x xxxx 
```

如何通过 telnet 将 EOF 字符发送到远程服务器？

这些字符转义似乎不起作用

```
^D

^]D

`^]D` 
```

以及如何终止此 telnet 连接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T02:21:42.537

在典型的 *ix telnet 中，您应该能够按住控制并按 ]（右方括号）以进入 telnet 提示符。从那里，您可以键入“quit”以完全退出 telnet。

客户端应该在它第一次启动时告诉你这一点。例如，在我的盒子上：

```
~$ telnet localhost 2050
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'. 
```

最后一行是相关的。它使用插入符号 ^ 来表示“保持控制”。:)

当您在 telnet 提示符下时，键入“帮助”以查看您的其他选项可能是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:25:48.350

`telnet x.x.x.x xxxx <<EOF`可能是什么。

# xcode - MacOSX Hooks 使用 DYLD_INSERT_LIBRARIES (malloc/NSLog)？

> ID：10370432
> 
> 赞同：1
> 
> 时间：2012-04-29T07:24:54.980
> 
> 标签：xcode, macos, cocoa

您好，我想为调试目的做一些挂钩，现在我已经看到可以使用 DYLD_INSERT_LIBRARIES 挂钩 malloc 的示例。但是是否也可以以相同的方式挂钩 NS 函数，例如 NSLog？

# google-app-engine - Servlet 在调试模式下工作，但在部署到 AppEngine (Appspot) 时无法工作

> ID：10370440
> 
> 赞同：2
> 
> 时间：2012-04-29T07:27:08.127
> 
> 标签：google-app-engine, gwt

我有一个 gwt 应用程序，上面有一些 servlet。在开发模式下，可以正确访问 servlet，但部署时我无法访问它，如下所示：

调试模式：（ `http://127.0.0.1:8888/mygwtapp/greet`工作）

部署在 Appspot.com `http://mygwtapp123456.appspot.com/mygwtapp/greet`（不起作用）

可能是什么问题呢？

这是 web.xml 上的映射

```
 <servlet>
    <servlet-name>greet</servlet-name>
    <servlet-class>com.mygwtapp.server.GreetServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>greet</servlet-name>
    <url-pattern>/mygwtapp/greet</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:52:20.730

`http://mygwtapp123456.appspot.com/mygwtapp/greet`当这是您在 web.xml 中映射的内容时，为什么在部署时不使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:10:10.843

您确定您已在 appengine 控制面板中更新了默认版本吗？如果您在 appengine-web.xml 中更新了版本 ID，但没有将其设置为默认值，那么您的 apppot 可能正在提供一个没有更新的 servlet 的 web.xml。

如果这不是问题，请回复您遇到的任何其他日志记录/错误消息。

# c# - 文本修剪不起作用

> ID：10370455
> 
> 赞同：1
> 
> 时间：2012-04-29T07:30:16.210
> 
> 标签：c#, silverlight, xaml, windows-phone-7.1.1

我将数据绑定到列表框，并将 texttrimming 属性设置为 WordEllipsis，但它似乎不起作用。文本块显示文本就像没有设置 texttrimming 属性一样。这是我的 xaml 代码。请帮忙。

```
 <Grid>
                <Grid.Resources>
                    <application:ViewModel x:Key="ViewModel"/>
                </Grid.Resources>
                <TextBlock Height="75" TextWrapping="Wrap" Text="Click on Settings to search for quotes (by author or by query)." VerticalAlignment="Top" TextAlignment="Center" FontSize="26.667"/>
                <ListBox Margin="0,166,0,0" Name="lstQuote" DoubleTap="lstQuote_DoubleTap" Hold="lstQuote_Hold">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <es:RegularPolygon Fill="#FFF4F4F5" Height="90" InnerRadius="0.47211" PointCount="5" Stretch="Fill" Stroke="Black" UseLayoutRounding="False" Width="84"/>
                                <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                                    <TextBlock Text="{Binding Author}" TextWrapping="Wrap" FontSize="24"/>
                                    <TextBlock Text="{Binding Quote}" TextWrapping="NoWrap" FontSize="30" TextTrimming="WordEllipsis" Width="Auto" />

                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <Button Content="Random Quote" Height="79" Margin="48,83,44,0" VerticalAlignment="Top" x:Name="quotSearch" Click="quotSearch_Click" />
            </Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T07:44:07.403

将 TextBox Width 属性更改为固定宽度

```
<TextBlock Width="200" Height="75" TextWrapping="Wrap" Text="Click on Settings to search for quotes (by author or by query)." VerticalAlignment="Top" TextAlignment="Center" FontSize="26.667"/> 
```

# ruby-on-rails-3 - Wicked_PDF 的灰度函数是否有效？

> ID：10370457
> 
> 赞同：1
> 
> 时间：2012-04-29T07:31:18.660
> 
> 标签：ruby-on-rails-3, wicked-pdf

在我的项目中，我正在尝试使用 wicked_PDF 打印带有来自 HTML 的几个图像和文本的灰度 PDF。Gem 提供了相同的功能，但它似乎不起作用。

这是我的代码：

```
 render :pdf => "MyObject",
            :wkhtmltopdf => '/usr/local/bin/wkhtmltopdf',
            :template => '/widgets/pdf/show_myObject.erb',
            :page_size => 'A4',
            :header => { :html => { :template => "/widgets/pdf/myObject_header.erb" }},
            :footer => { :html => { :template => "/widgets/pdf/myObject_footer.erb" }, :line => true },
            :margin => { :top => 0, :left => 3, :right => 3 },
            :greyscale => true 
```

我将图像作为背景传递。但它呈现颜色。我错过了什么吗？为什么 wicked_PDF gem 无法按预期处理灰度功能？

他们的[文档](https://github.com/mileszs/wicked_pdf/blob/master/README.md)对此没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:57:04.763

原来 wkhtmltopdf`--grayscale`选项在 wicked_pdf 中被错误地编码为`--greyscale`

（将“e”换成“a”）。

我已经推送了一个修复程序，并为此剪切了一个新版本的 gem (0.7.9)。感谢您指出！

```
:grayscale => true 
```

现在按预期工作。

# c# - 使用ajax和c#上传图片

> ID：10370460
> 
> 赞同：1
> 
> 时间：2012-04-29T07:32:28.263
> 
> 标签：c#, ajax, file-upload

我正在尝试找到一种在不提交表单的情况下将图像上传到网络服务器的方法，并决定使用 ajax 来执行此操作，但我正在努力寻找一些如何做到这一点的好例子。

如果有人有一些例子，或者可以解释如何做到这一点，我将不胜感激。（我没有使用任何 ASP.net 服务器控件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:51:09.547

ajax 帖子不提交`<input type="file" ...`，因此您需要以另一种方式进行。如果您的浏览器支持 JavaScript (HTML5) File API，那么您就是黄金。否则像 jQuery uplodify 这样的东西很棒。 [http://www.uploadify.com/](http://www.uploadify.com/) 它在后台使用 Flash，因此在 iPad 上效果不佳，但 iPad 浏览器具有 File API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:42:06.137

看看这个：[http](http://www.plupload.com/) ://www.plupload.com/ 我在我的网站上使用它

# jquery - 使用 jquery 在同一页面上仅显示/隐藏多个元素中的一个

> ID：10370463
> 
> 赞同：0
> 
> 时间：2012-04-29T07:32:50.940
> 
> 标签：jquery, hide, show

我有一个页面，上面有几个不同的子导航元素

我的标记是（基本上）

```
<div class="sub-nav">
 <div class="sub-nav-btn"></div>
  <ul>
  </ul>
</div>
<div class="sub-nav">
 <div class="sub-nav-btn"></div>
  <ul>
  </ul>
</div>
<div class="sub-nav">
 <div class="sub-nav-btn"></div>
  <ul>
  </ul>
</div> 
```

我当前的 jquery 是

```
$('.sub-nav ul').css("display","none");
$('.sub-nav-btn').click(function(){
$('.sub-nav ul').toggle();
return false;
}); 
```

目前这可行，但会打开所有调用的相关元素。如何让 jquery 正常工作，以便它只调用相关元素而不是全部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:37:17.293

HIya**演示** [http://jsfiddle.net/4aMwA/](http://jsfiddle.net/4aMwA/) **或**更多有组织的小提琴：http: [//jsfiddle.net/s2CtY/](http://jsfiddle.net/s2CtY/)

`slideToggle` [http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

因此，这项工作的方式是我为演示 ** 放置了一些示例文本单击`foo`，您将看到它 `ul`，如果单击，`fp`您将看到它`ul`向下滑动，依此类推。

**jQuery代码**

```
 $(document).ready(function () {

 $('.sub-nav ul').css("display","none");
    // Watch for clicks on the "slide" link.
    $('.sub-nav-btn').click(function () {
        $(this).next(".sub-nav ul").slideToggle(400);
        return false;
    });

});​ 
```

![在此处输入图像描述](../Images/7337a800de915a198c44e2f15f954834.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:07:37.357

```
$('.sub-nav ul').hide();
$('.sub-nav-btn').click(function(){
    $(this).siblings('ul').toggle('slow');
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/B9dSA/)

# java - 从数组列表中删除元素的更有效方法

> ID：10370464
> 
> 赞同：1
> 
> 时间：2012-04-29T07:32:51.500
> 
> 标签：java, arraylist

我开发了一个类似这样的数组列表

```
ArrayList<String> list = new ArrayList<String>();
list.add("1");
list.add("8");
list.add("8");
list.add("3");
list.add("4"); 
```

现在我的问题是：如果我想从列表中删除“8”，哪种方式更好？

第一种方式：

```
for(int i = 0; i < list.size(); i++) {
    if(list.get(i).equals("8")) {
        list.remove(i);
        i--;
    }
} 
```

第二种方式：

```
Iterator<String> iterator = list.iterator();
    while(iterator.hasNext())
        if(iterator.next().equals("8"))
            iterator.remove(); 
```

现在请告知从性能的角度来看，其中哪一个更高效，更快，还有其他方法可以通过使用它来删除重复项，而无需进行太多迭代。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T07:54:41.307

If you just need a set of numbers, then use `HashSet` and not a `List`. If you need to preserve the order by which you are putting the numbers, use `LinkedHashSet`. As for removal, always prefer the version with the `iterator`, even though in your particular case the performance may be comparable. The idiom with `iterator` is more widely applicable than indexing, for example if you used a `LinkedList`, indexing would result in disastrous performance.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T07:55:29.683

Performance wise they should be similar. Have you tested? If you want to use the built in methods, you can do this with a similar performance.(to be confirmed by testing):

```
list.removeAll(Arrays.asList("8")); 
```

Finally if you want a list without duplicates, use a Set as others have mentioned.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T07:41:02.283

如果您需要存储重复项，我建议您使用`Map<Integer,Integer>`其中第一个整数是键，第二个是键出现次数。因此，当您添加已经存在的键时，您只需增加相应的计数器。（在删除操作中，您反之亦然）。当您需要所有不同的值时，您只需使用[Map.keySet](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#keySet%28%29) ()。

# android - 在预蜂窝设备上隐藏和显示操作栏

> ID：10370465
> 
> 赞同：1
> 
> 时间：2012-04-29T07:32:55.590
> 
> 标签：android, compatibility, android-3.0-honeycomb, android-actionbar, android-2.3-gingerbread

操作栏甚至可以在预蜂窝设备上显示，如[actionbar-compat 示例](http://developer.android.com/resources/samples/ActionBarCompat/index.html)所示。

我希望能够按需隐藏和显示操作栏（以编程方式）。我怎么做？

问题是使用支持库获取操作栏返回 null。我也尝试使用它的 id 找到它并将可见性设置为消失，但它只是显示了一个空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:02:23.667

好的，我有一个解决方法，但它在开始时不起作用，这意味着在很短的时间内，操作栏将在开始时显示。

这是我创建的用于隐藏操作栏的代码（对于蜂窝前版本），我通过查看[这篇文章](https://stackoverflow.com/questions/6209570/android-cant-remove-padding-around-custom-title-bar)想到了：

```
ViewGroup decorView = (ViewGroup) this.getWindow().getDecorView();
ViewGroup root = (ViewGroup) decorView.getChildAt(0);
View titleContainer = root.getChildAt(0);
titleContainer.setVisibility(View.GONE); 
```

如果有人知道如何使动作栏隐藏在开头并选择何时显示它，请告诉我。

编辑：顺便说一句，如果有人希望通过清单使用主题并使用 actionBarSherlock，您可以使用 "Theme.Sherlock.Light.NoActionBar" 或 "Theme.Sherlock.NoActionBar" ，如果您希望在代码中隐藏和显示，只需使用 getSupportActionBar().hide() 和 getSupportActionBar().show()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:06:27.960

最后我使用了 actionBarSherlock。

它有更多的功能，这个请求的功能就是其中之一。也许新的支持库可以使用这个功能，但我已经转向这个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T05:23:35.783

试试这个，通过在 xml 中为您的活动设置以下属性来隐藏 xml 中的操作栏。`

```
<activity
      android:theme="@android:style/Theme.NoTitleBar.Fullscreen" > 
```

希望如果没有然后添加评论会有所帮助，如果我的回答有任何问题，请纠正我。

# node.js - 在 jqtpl 中生成随机数

> ID：10370466
> 
> 赞同：0
> 
> 时间：2012-04-29T07:33:01.467
> 
> 标签：node.js, express, jquery-templates

是否可以在 jQuery 模板中生成随机值？

我使用带有 expressjs 和 node.js 的 jQuery 模板，我正在尝试在页面上生成一些“动态”位置元素。所以我试图在 jqtpl 中生成一个随机数，并在布局中的内联 css 中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T01:04:53.787

以下将起作用。路由是一个示例，供参考[https://github.com/kof/node-jqtpl/](https://github.com/kof/node-jqtpl/)

节点：

```
app.get('/randomtest', function(req, res){
    res.render('random.html', 
      {rnd: function(min, max) {
        return Math.random() * (max - min) + min;
      }
    });
}); 
```

模板：

```
${rnd(1,10)} 
```

最小/最大控制输出什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:33:19.447

如果我理解正确，您可以例如使用[hat](https://github.com/substack/node-hat)。尤其是`rack`功能。

```
Call rack() repeatedly to generate new IDs which are checked for collisions. 
```

**代码**

```
var hat = require('hat');
var rack = hat.rack(9, 10);

console.log(rack());
console.log(rack()); 
```

**输出**

```
$ node test.js
109
461 
```

# jquery - jquery 在 Internet Explorer 中无法正常工作

> ID：10370474
> 
> 赞同：-1
> 
> 时间：2012-04-29T07:34:49.180
> 
> 标签：jquery, internet-explorer

以下 jQuery 函数给了我错误消息“损坏的图像！” 仅在 Internet Explorer 8 中。它在 Chrome、Firefox 中运行良好。有任何想法吗？

```
function displayPortrait()
{
   $('#big_picture').html('<img src="css/img/loading_img.gif" style="margin-top: 200px;  margin-left:250px;" />');
   var img = $("<img />").attr('src', 'css/img/portrait.jpg').attr('style', 'margin-left:100px;margin-top:0px;').load(function() {
     if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
         alert('broken image!');
     } else {
         $("#big_picture").html(img);
     }
  });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:40:48.057

请参阅此[链接](https://stackoverflow.com/a/10238771/1012381)：`naturalWidth`并且`naturalHeight`在 IE 8 中不受支持。

# java - 从 Java 客户端应用程序调用部署在 glassfish 中的安全远程 ejb

> ID：10370475
> 
> 赞同：2
> 
> 时间：2012-04-29T07:34:53.717
> 
> 标签：java, glassfish, ejb

我正在尝试从一个简单的客户端应用程序调用部署在 glassfish 中的安全远程 ejb，但我无法验证自己。

客户端：

```
 public void go() {
    try {
        Context ctx = getInitialContext();
        TestBeanRemote remote = (TestBeanRemote) ctx.lookup("java:global/ejbTest2/TestBean");
        String result = remote.testMe();
        System.out.println(result);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private Context getInitialContext() throws NamingException, FileNotFoundException, IOException {
    Properties p = new Properties();
    InputStream stream = Runner.class.getResourceAsStream("jndi.properties");
    assert stream != null : "jndi.properties file not found";
    p.load(stream);
    return new InitialContext(p);
} 
```

客户端上的 jndi.properties

```
java.naming.factory.initial = com.sun.enterprise.naming.SerialInitContextFactory
java.naming.factory.url.pkgs = com.sun.enterprise.naming
java.naming.factory.state = com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl
#optional. Defaults to localhost. Only needed if web server is running
#on a different host than the appserver
org.omg.CORBA.ORBInitialHost = localhost
#optional. Defaults to 3700\. Only needed if target orb port is not 3700.
org.omg.CORBA.ORBInitialPort = 3700
java.naming.security.principal = test
java.naming.security.credentials = test 
```

EJB

```
@Stateless(description = "A simple bean to learn the ins and outs of ejbs")
@DeclareRoles({ Roles.ADMIN, Roles.USER })
@RolesAllowed({})
public class TestBean implements TestBeanRemote {

    @Resource
    private SessionContext ejbContext;

    @Override
    @RolesAllowed(Roles.ADMIN)
    // @PermitAll
    public String testMe() throws Exception {
        return ejbContext.getCallerPrincipal().getName();
    }
} 
```

太阳-ejb-jar

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-ejb-jar PUBLIC "-//Sun Microsystems, Inc.//DTD Application Server 9.0 EJB 3.0//EN" "http://www.sun.com/software/appserver/dtds/sun-ejb-jar_3_0-0.dtd">
<sun-ejb-jar>
    <security-role-mapping>
        <role-name>Admin</role-name>
        <group-name>Admin</group-name> <!-- As defined in container -->
    </security-role-mapping>
    <security-role-mapping>
        <role-name>User</role-name>
        <group-name>User</group-name> <!-- As defined in container -->
    </security-role-mapping>
    <enterprise-beans />
</sun-ejb-jar> 
```

我在管理控制台的配置>默认配置>安全>领域>文件>管理用户中添加了用户ID“测试”凭据“测试”组列表“管理员”

当我使用 PermitAll 时，这会导致包含 org.omg.CORBA.NO_PERMISSION 和 ejbContext.getCallerPrincipal().getName() 的堆栈跟踪结果为“匿名”

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:50:56.913

该线程很旧，但答案可能会对某人有所帮助。上下文中的主体和凭据被忽略。在查找 ejb 之前，您需要使用 ProgrammaticLogin 来访问 EJB。

```
System.setProperty("java.security.auth.login.config", "auth.conf");

ProgrammaticLogin pl = new ProgrammaticLogin();
pl.login("user", "password");

//Now lookup the EJB and then logout

pl.logout(); 
```

如您所见，您需要设置“java.security.auth.login.config”，它指向一个文件，while shoule 的内容是

```
default {
com.sun.enterprise.security.auth.login.ClientPasswordLoginModule required debug=false; }; 
```

这表示您想使用服务器上配置的默认领域，或者您也可以通过将“默认”替换为领域名称（例如“文件”）来明确指定领域

# assembly - 在 x86 NASM 或 YASM 程序集中实现选择排序的麻烦

> ID：10370476
> 
> 赞同：2
> 
> 时间：2012-04-29T07:35:13.507
> 
> 标签：assembly, x86, x86-64, nasm, yasm

我正在尝试在 64 位 Linux 上运行的 NASM 中实现一个数组的选择排序。

数组声明为：

```
section .bss
strbuf resb 10
small  resb  1  ; current minimum value 
```

排序算法本身很简单，但我觉得受到两件事的限制：可用寄存器的数量，以及无法交换立即数（即括号）

我需要跟踪未排序的数组边界、它的索引、当前最小值的位置以及它的索引。那已经是四个寄存器了。我还需要跟踪两个循环计数器，一个用于表示未排序数组边界的外循环，另一个用于每次遍历的迭代（即内循环）。那是另外两个，总共六个寄存器。

由于立即数不能相互移动，例如`mov [var1], [var2]`当我需要交换两个元素时，我需要使用寄存器作为临时占位符。在跟踪哪些寄存器保存哪些信息方面，这很快变得笨拙！

以下是我迄今为止的尝试。请注意，这是触发分段错误的**非工作代码。**但也许你能察觉到我想要做什么，并指出我的方法哪里出了问题。

我不希望使用简化结构的宏，例如那些提供 .IF 和 .ELSE 的宏。

```
; ====== Sorting begins here ======
sorting:
    mov edi, strbuf  ; outer loop pointer
    mov esi, strbuf  ; inner loop pointer
    mov eax, 0  ; inner loop counter
    mov ebx, 0  ; outer loop counter

innerloop:
    ; store the value of first element in [small]
    mov edx, [esi]
    mov [small], edx

    ; compare the current small value with the value pointed by esi
    mov edx, [esi]  
    cmp [small], edx

    jg  new_small
    inc esi
    inc eax
    cmp eax, 9
    jle innerloop
    cmp eax, 9
    jg  innerloop_done

new_small:
    mov [small], edx  ; save the new small value
    mov ecx, esi      ; save its index in ecx
    inc esi
    inc eax
    cmp eax, 9

    jle     innerloop

innerloop_done:
    ; When the inner loop is completed...
    ; First, do the swap
    push    rax
    mov eax, [edi]
    mov edx, [small]
    mov [ecx], edx
    pop rax

    inc edi  ; move the outer loop pointer forward
    inc esi  ; move the inner loop pointer forward
    inc ebx  ; increment the outer loop counter (the unsorted array becomes smaller)
    inc eax  ; increment the inner loop counter (same reason as above)
    cmp ebx, 9

    jle innerloop   

; ====== Sorting ends here ====== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:38:50.823

如果这应该在 64 位模式下执行，则必须使用 64 位地址，这意味着当您获取这些地址并将它们放入寄存器时，这些接收寄存器也必须是 64 位的，否则您将截断地址和访问内存不是你想要的。

另外，您没有调试器来单步执行您的代码吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T03:31:36.660

对于 64 位代码，有 16 个通用寄存器：RAX、RBX、RCX、RDX、RSI、RDI、RSP、RBP、R8、R9、R10、R11、R12、R13、R14、R15。

其中，RSP 有一个特殊用途，只能用于该用途（当前堆栈地址）。RBP 寄存器通常由编译器用于跟踪堆栈帧（不包括“-fomit-frame-pointer”可能性），但您不是编译器，可以将它用于任何您喜欢的事情。

这意味着在您可以使用的 15 个寄存器中，您只使用了其中的 6 个。

如果您确实确实用完了寄存器，那么您可以将一些东西转移到堆栈空间。例如：

```
foo:
    sub rsp,8*5        ;Create space for 5 values
%define .first   rsp
%define .second  rsp+8
%define .third   rsp+8*2
%define .fourth  rsp+8*3
%define .fifth   rsp+8*4
%define .first   rsp+8*5

    mov [.first],rax
    mov [.second],rax
    mov rax,[.first]
    add rax,[.second] 
    mov [.third],rax
...
    add rsp,8*5        ;Clean up stack
    ret 
```

希望您可以看到堆栈上可能有数百个值，并在需要时使用一些寄存器（临时）保存这些值。通常你会计算出最常使用的值（例如在内部循环中）并尝试为它们使用寄存器并将堆栈用于最不常用的变量。但是，对于 64 位代码（您可以使用更多的 8 个寄存器），寄存器用完的情况很少见，如果您这样做了，这可能表明您需要将例程拆分为多个例程。

# assembly - x86 汇编-masm32：无效的指令操作数

> ID：10370483
> 
> 赞同：-1
> 
> 时间：2012-04-29T07:36:20.833
> 
> 标签：assembly, x86, masm

我正在尝试制作一个密码文件，您可以在其中输入密码，它会显示您的所有密码。我当前的代码是这样的，但它有一个错误：

```
.386
.model flat,stdcall
option casemap:none

include     \masm32\include\windows.inc
include     \masm32\include\kernel32.inc
include     \masm32\include\masm32.inc
includelib  \masm32\lib\kernel32.lib
includelib  \masm32\lib\masm32.lib

.data
        input   db 'Enter the password:',13,10,0
        string  db 'The passwords are:',0
        space db '       ',0
        pass1 db 'example password 1',0
        pass2 db 'example password 2',0
        pass3 db 'example password 3',0
        pass4 db 'example password 4',0
        ermsg db 'Incorrect Password. Exiting....',0
        count dd 0
            comp dd 13243546

.data?
        buffer db 100 dup(?)
.code
start:
_top:
        invoke StdOut,ADDR input
        invoke StdIn,ADDR buffer,100 ; receive text input
        cmp buffer, comp ;sorry for not pointing this out - this is line 32
        jz _next
        jmp _error
_next:
        invoke StdOut, ADDR string
        invoke StdOut, ADDR space
        invoke StdOut, ADDR pass1
        invoke StdOut, ADDR pass2
        invoke StdOut, ADDR pass3
        invoke StdOut, ADDR pass4
        invoke ExitProcess,0
_error:
        invoke StdOut, ADDR ermsg
        mov eax, 1
            mov count, eax
            cmp count, 3
            jz _exit
            jmp _top:
_exit:
            invoke ExitProcess, 0 
```

这是错误：

```
 test.asm(32) : error a2070: invalid instruction operands 
```

为什么会这样。我知道错误在第 32 行，但我不明白错误是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T08:41:07.433

`cmp`用于[比较两个字节/字/双字，而不是字符串](http://faydoc.tripod.com/cpu/cmp.htm)。所以你基本上要求它比较前四个字节和`buffer`四个字节，`comp` *并*使用无效的语法来做到这一点。

要比较字符串，您需要使用[`cmps`](http://faydoc.tripod.com/cpu/cmps.htm)或手动循环。

此外，`comp`应声明为`comp db '13243546', 0`. 您现在声明它的方式使其成为 dword `00CA149A`，相当于 C 字符串`"\x9A\x14\xCA"`- 输入非常复杂:)

# iphone - GData ObjC - 重复接口定义错误

> ID：10370487
> 
> 赞同：0
> 
> 时间：2012-04-29T07:36:41.923
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在尝试使用 GData ObjC 库将视频从 iPhone 上传到 Youtube。

当我在添加库后尝试构建我的项目时（**此处显示：** svn checkout [http://gdata-objectivec-client.googlecode.com/svn/trunk/gdata-objectivec-client-read-only](http://gdata-objectivec-client.googlecode.com/svn/trunk/gdata-objectivec-client-read-only)），我不断得到错误 - **GDataServiceBase.m 中类“GDataHTTPUploadFetcher”的重复接口定义**。

但是，当我在一个新项目中做同样的事情时，我根本不会遇到任何问题。我检查了所有的导入和项目设置，它们都是一样的。

我应该寻找什么来解决这样的问题？

* * *

## 附加信息 ：

（在评论中回答 Till 的问题之一，因为我对类别不确定）

在**GDataHTTPUploadFetcher.h**中，界面是这样的：

```
@interface GDataHTTPUploadFetcher : GDataHTTPFetcher {

GDataHTTPFetcher *chunkFetcher_;
BOOL needsManualProgress_
NSURL *locationURL_;
// uploadData_ or uploadFileHandle_ may be set, but not both
NSData *uploadData_;
NSFileHandle *uploadFileHandle_;
NSInteger uploadFileHandleLength_;
NSString *uploadMIMEType_;
NSUInteger chunkSize_;
BOOL isPaused_;

.
.
.

}

+ (GDataHTTPUploadFetcher *)uploadFetcherWithRequest:(NSURLRequest *)request
                                      uploadData:(NSData *)data
                                  uploadMIMEType:(NSString *)uploadMIMEType
                                       chunkSize:(NSUInteger)chunkSize;

+ (GDataHTTPUploadFetcher *)uploadFetcherWithRequest:(NSURLRequest *)request
                                uploadFileHandle:(NSFileHandle *)fileHandle
                                  uploadMIMEType:(NSString *)uploadMIMEType
                                       chunkSize:(NSUInteger)chunkSize;

- (id)initWithRequest:(NSURLRequest *)request
       uploadData:(NSData *)data
 uploadFileHandle:(NSFileHandle *)fileHandle
   uploadMIMEType:(NSString *)uploadMIMEType
        chunkSize:(NSUInteger)chunkSize;

- (void)pauseFetching;
- (void)resumeFetchingWithDelegate:(id)delegate;
- (BOOL)isPaused;

@end 
```

在**GDataHTTPUploadFetcher.m**中，界面是这样的：

```
@interface GDataHTTPUploadFetcher (InternalMethods)
- (void)uploadNextChunkWithOffset:(NSUInteger)offset;
- (void)uploadNextChunkWithOffset:(NSUInteger)offset
            fetcherProperties:(NSDictionary *)props;
- (void)destroyChunkFetcher;

- (void)uploadFetcher:(GDataHTTPFetcher *)fetcher
     didSendBytes:(NSInteger)bytesSent
   totalBytesSent:(NSInteger)totalBytesSent
totalBytesExpectedToSend:(NSInteger)totalBytesExpected;

- (void)reportProgressManually;

- (NSUInteger)fullUploadLength;

// private methods of the superclass
- (void)invokeSentDataCallback:(SEL)sel
                    target:(id)target
           didSendBodyData:(NSInteger)bytesWritten
         totalBytesWritten:(NSInteger)totalBytesWritten
 totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite;

- (void)invokeStatusCallback:(SEL)sel
                  target:(id)target
                  status:(NSInteger)status
                    data:(NSData *)data;

- (BOOL)invokeRetryCallback:(SEL)sel
                 target:(id)target
              willRetry:(BOOL)willRetry
                  error:(NSError *)error;
@end 
```

在**GDataServiceBase.m**中，接口是这样的：

```
@interface GDataHTTPUploadFetcher : GDataHTTPFetcher
+ (GDataHTTPUploadFetcher *)uploadFetcherWithRequest:(NSURLRequest *)request
                                      uploadData:(NSData *)data
                                  uploadMIMEType:(NSString *)uploadMIMEType
                                       chunkSize:(NSUInteger)chunkSize;
+ (GDataHTTPUploadFetcher *)uploadFetcherWithRequest:(NSURLRequest *)request
                                uploadFileHandle:(NSFileHandle *)uploadFileHandle
                                  uploadMIMEType:(NSString *)uploadMIMEType
                                       chunkSize:(NSUInteger)chunkSize;
- (void)pauseFetching;
- (void)resumeFetchingWithDelegate:(id)delegate;
- (BOOL)isPaused;
@end 
```

但问题是，这段代码只会在现有项目之一中产生问题，而不会在新项目中产生问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:37:38.677

检查您的**Target** -> **Build Phases** -> **Compile Sources**是否可能包含`GDataServiceBase.m`两次。如果是这样，请从该列表中删除一个参考。

![在此处输入图像描述](../Images/9467a99e90a9b13a019f42aba17c8af5.png)

还要彻底检查所有导入/包含，看看它们是否可能包含实现文件 ( `.m`)。全球搜索`GDataServiceBase.m`将完成这项工作。

也许您在标题中的某个地方使用了 an`#include`而不是 an 。`#import`现在，如果您这样做，`#include`包含该标头的标头或实现文件中的另一个相同标头将导致双重定义。`#import`即使没有保护定义也可以完美地工作，而`#include`需要那些来防止双重定义。

发布代码后，它变得很明显。您引用的那些来源显然是对同一类的双重定义。我只能猜测其中的原因；*直截了当的糟糕设计*。

* * *

**最后，原因**：

显然`GDataServiceBase.m`以及`GDataHTTPUploadFetcher.h`定义相同的类：`GDataHTTPUploadFetcher`. 这当然没有意义。我无法回答作者为什么这样做，也许它只是一个过时的实现文件，不应该再编译了。无论如何，只需删除整个`@interface`块， `GDataServiceBase.m`直到并包括第一个`@end`. 第三个接口定义（内部`GDataHTTPUploadFetcher.m`）实际上定义了一个类别 - 您可以看到它，因为它在类/类别名称后面包含括号`(InternalMethods)`。顺便说一句，原作者不应该命名它们`InternalMethods`，而只是打开和关闭括号`()`。但这里的一切都是他的错，不是你的：D。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:26:26.250

我不得不将所有代码移到一个新项目中，然后一切正常。

显然，我在项目设置中搞砸了一些东西。

非常感谢大家的帮助。

# facebook - Facebook 登录 连接

> ID：10370488
> 
> 赞同：0
> 
> 时间：2012-04-29T07:36:44.910
> 
> 标签：facebook

我想在我的网站上**登录 Facebook**

为此，我遵循了以下步骤：

1）在开发人员处创建了一个演示站点（我也上传了图像）

2)将app id复制到需要的地方

```
<div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '<MY APP ID>',
        status     : true, 
        cookie     : true,
        xfbml      : true,
        oauth      : true,
      });
    };
    (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document));
  </script>
  <div class="fb-login-button">Login</div> 
```

3）我得到了如图所示的**fb 登录按钮：**

![在此处输入图像描述](../Images/27b5fa4cc056ac56f89143e2573e7bb7.png) 单击按钮时会弹出一个新窗口，询问 fb 用户名和密码，返回后显示此错误

```
Unsafe JavaScript attempt to access frame with URL https://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=158742990907100&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D5%23cb%3Dfbf1cdd54%26origin%3Dhttp%253A%252F%252Flocalhost%253A8080%252Ffa53db99%26domain%3Dlocalhost%26relation%3Dopener%26frame%3Df27abde948&sdk=joey&display=popup&response_type=token%2Csigned_request&domain=localhost&fbconnect=1&from_login=1&client_id=158742990907100 from frame with URL http://localhost:8080/Befundo/. Domains, protocols and ports must match. 
```

我为我的应用设置的属性是：我不确定**APP NAMESPACE**、**APP DOMAIN**、**SITE URL** ![在此处输入图像描述](../Images/81d7ac9ef76840c743160e82108a2bb2.png)

我又遇到了一个问题，当我两次单击登录按钮时，它会在浏览器的控制台中记录此消息::

```
FB.login() called when user is already connected. 
```

什么也不做。

请阐明我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:11:17.313

您的登录按钮按预期工作，它正在连接用户（通过第二次单击登录按钮后出现的消息确认）。

下一条消息不是您的代码中的错误（这是因为尝试与 Facebook 通信的 JS-SDK 应用了跨域策略）：

> 不安全的 JavaScript 尝试访问带有 URL 的框架……从带有 URL 的框架……域、协议和端口必须匹配。

您可以（可能）通过将 self-hosted 传递`channelUrl`给`FB.init`. （见[`FB.init`文档](http://developers.facebook.com/docs/reference/javascript/FB.init/)）

连接用户后，您似乎也什么都不做。阅读[文档`FB.login`](http://developers.facebook.com/docs/reference/javascript/FB.login/)以了解用户登录后应该做什么...

# java - 函数与静态方法

> ID：10370493
> 
> 赞同：1
> 
> 时间：2012-04-29T07:37:23.983
> 
> 标签：java, methods, static-methods

在多线程程序中使用函数或使用静态方法哪个更快？请解释为什么更快。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T07:42:17.773

即使这两种方法之间存在明显的差异（我对此表示严重怀疑），你也不应该以此为基础设计程序。（几乎）不应该为了获得更好的性能而牺牲好的设计。因为你没有得到很多，但你失去了很多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T07:42:53.357

您可能听说过“纯函数”更适合多线程。纯函数通常可以在 Java 中实现为静态方法，但也可以实现为实例方法。要点是，在多线程时，如果您没有任何可以更改的全局变量，总是会更好。因此，如果您有一个不可变对象，那与实现纯函数的静态方法一样好。

# android - Android USB 集线器

> ID：10370503
> 
> 赞同：0
> 
> 时间：2012-04-29T07:39:10.920
> 
> 标签：android, usb

我想使用 USB 集线器将多个 USB 设备连接到我的 Android 平板电脑。android支持这样的东西吗？如果有，是从哪个版本开始的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:23:42.383

这取决于android版本以外的其他东西。

首先，平板电脑硬件必须支持 USB 主机功能。我的意思是平板电脑必须能够按照 USB 标准为外部设备供电。

如果您的平板电脑符合此要求，则已知 Android 2.3.1 和更新版本已内置此功能。这并不意味着旧版本的 Android 未由 OEM 修改，或者您无法修改, 以支持该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:39:48.590

我需要将 USB 摄像头连接到我的平板电脑。我发现我需要从我的内核获得一些额外的支持，而不是我所拥有的。内核需要支持 V4L2 才能从摄像头获取数据。整个过程是由throw jni制作的。使用集线器使用 2 个设备没有问题。

# java - Android - 如何将文档打包到应用程序中

> ID：10370504
> 
> 赞同：0
> 
> 时间：2012-04-29T07:39:19.397
> 
> 标签：java, android, eclipse, pdf, sdk

我正在尝试创建一个应用程序并能够将文件保存到 /data/data/(packagename)/files 或类似的目录。目标是让 pdf 或 doc 处理程序在必要时打开存储在内部存储中的文件并供用户查看。我有代码来获取已安装的 pdf 阅读器并显示文件，但我不知道如何打包文件，以便将它们安装在上述目录中。另外，如果我能够做到这一点，我会使用 getResources 来访问文件吗？eclipse 中的文件结构应该如何在安装 APK 时发生这种情况？

我更喜欢将文件存储在内部（它们很小），而不是存储在 SD 卡上。

我承认我对此并不陌生，并且正在努力学习。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:45:41.050

据我了解您的方法，您只需将文件放在应用程序的资产文件夹中，然后将它们复制到内部存储。[在这里](http://developer.android.com/reference/android/content/res/AssetManager.html)阅读更多。

# java - Java，计算从 1901 年到 2000 年每月 1 日的星期日数

> ID：10370508
> 
> 赞同：5
> 
> 时间：2012-04-29T07:39:45.123
> 
> 标签：java, arrays, loops

我是编程和 Java 的新手，我正在尝试通过 Project Euler 网站自学。我正在尝试解决这个问题：[http://projecteuler.net/problem=19](http://projecteuler.net/problem=19)，即：

> 在 20 世纪（1901 年 1 月 1 日至 2000 年 12 月 31 日）有多少个星期日是每月的第一天？

我想解决它的方法是制作一个表示压延机的二维数组，并通过数到 7 来循环遍历数组，然后每次数到 7 时，在数组中的那个点上加 1。最后，我将对数组的第一行求和，这应该是每月第一天有多少个星期日。

但是我的循环有问题，到月底时我的计数重置为 7，我不知道如何阻止它这样做？

这是我的代码：

```
public class Problem019 {
    public static void main (String[] args){

        //System.out.println(LeapYearTest(1996));
        int ThirtyOne = 31;
        int Thirty = 30;
        int FebNorm = 28;
        int FebLeap = 29;
        int a, b, c, Day, e = 0, f = 0;
        int Calander[] []= new int [12] [] ;

        Calander[0] = new int [ThirtyOne];
        Calander[1] = new int [FebNorm];
        Calander[2] = new int [ThirtyOne];
        Calander[3] = new int [Thirty];
        Calander[4] = new int [ThirtyOne];
        Calander[5] = new int [Thirty];
        Calander[6] = new int [ThirtyOne];
        Calander[7] = new int [ThirtyOne];
        Calander[8] = new int [Thirty];
        Calander[9] = new int [ThirtyOne];
        Calander[10] = new int [Thirty];
        Calander[11] = new int [ThirtyOne];

        for (a=1901;a<2001;a++){
            //System.out.println(a);
            if (LeapYearTest(a))
            {
                Calander[1] = new int [FebLeap];
            }
            else
            {
                Calander[1] = new int [FebNorm];
            }

            for (e=0;e<Calander.length;e++)
            {   
                System.out.println("e: " + e);
                f=0;

                while (f<Calander[e].length)
                {   

                    //System.out.println(Calander[e].length);
                    Day=1;
                    while (Day<8 && f<Calander[e].length)
                    {   
                        System.out.println("f: " + f + "\tDay: " + Day + "\tCalander[e][f]: " + Calander[e][f]);
                        Day++;
                        f++;

                        if (f<Calander[e].length && f!=0 && Day==7)
                        {
                        Calander[e][f]+= 1;
                        }

                    }

                }
            }
            //System.out.println(a);
        }
        for (b=0;b<Calander.length;b++)
        {   
            System.out.print(Calander[0][b]);
        }
    }   

    public static boolean LeapYearTest(int x)
    {
        if (x%4==0 || x%400==0){
            return true;
        }
        if (x%100==0){
            return false;
        }
        else return false;
    }

} 
```

这是它打印的内容，e 是月份，f 是月份中的天数，Day 数到 7：

```
f: 25   Day: 5  Calander[e][f]: 0
f: 26   Day: 6  Calander[e][f]: 0
f: 27   Day: 7  Calander[e][f]: 100
f: 28   Day: 1  Calander[e][f]: 0
f: 29   Day: 2  Calander[e][f]: 0
**f: 30 Day: 3  Calander[e][f]: 0**
e: 10
**f: 0  Day: 1  Calander[e][f]: 0**
f: 1    Day: 2  Calander[e][f]: 0
f: 2    Day: 3  Calander[e][f]: 0 
```

如何设置循环以使 Day 不会在月底重置？或者有没有另一种方法来解决这个问题，不涉及这么多嵌套循环？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T08:10:27.393

如果有一个将年份从 1901 年增加到 2001 年的外部循环，以及一个检查 Jan -> Dec 的内部循环，然后只查看该月的第一天是否是星期日，会不会快得多？

总共 100 * 12 次迭代，10 行代码，最高。

编辑：对此进行扩展。

您可以通过两种方式解决问题 - 查看所有星期日，看看它们是否在一个月的第一天，或者查看所有月份的第一天，看看它是否是星期日。

未经测试的代码：

```
Calendar calendar = Calendar.getInstance();
int count = 0;
for(int i=1901;i<2000;i++){
    for(int j=1;i<12;j++){
        calendar.set(Calendar.YEAR, i);
        calendar.set(Calendar.MONTH,j);
        calendar.set(Calendar.DAY,1);
        if(calendar.get(Calendar.DAY_OF_WEEK).equals(Calendar.SUNDAY)){
            count++;
        }
    }
} 
```

System.out.println(count);

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T09:06:58.470

我认为您需要抛弃现有代码并重新开始。~~由于您正在尝试通过解决 Project Euler 问题来学习如何编码，因此我不会通过给您代码来破坏您的乐趣。~~看来您确实想要完整的工作代码，所以我已经修复了您的代码，包括由于问题陈述中的一些微妙细节而出现的一些错误，您可能误解或忽略了这些错误。

只是为了好玩，让我们看一下您想要修复的代码的直接问题......

最初声明`Day`时，将其初始化为 1。然后替换此行：

```
Day=1; 
```

有了这个：

```
if (Day > 7) {
    Day = 1;
} 
```

并将其移动到一个月中的循环中。

但是还有一个严重的问题。你每年都会覆盖你的二月数组。您应该只初始化一次，并将其长度设置为 29。但这也有一个不幸的副作用，即破坏任何依赖于 的循环`calendar[month].length`，因此您也必须考虑到这一点。

您真正需要跟踪的是每月第一天的星期日数，因此您只需要存储和增加一个变量即可。这解决了上述覆盖二月数组的问题，因为您将不再使用它（或任何其他月份的数组）。另一方面，如果你真的只是想练习使用数组，你可以使用一个 3 维数组（其中额外的维度是年份）。但我敢猜测，大多数 Java 程序员大部分时间都使用列表而不是数组，而当他们使用数组时，他们几乎不会使用一维以上的数组。

**还有一些注意事项**

你的外`while`循环是多余的。

`LeapYearTest`对于可被 100 整除的所有闰年，您的方法将错误地返回 true（所有可被 100 整除的年份也可被 4 整除，因此您永远不会进入测试可被 100 整除的年份的 if 块）。

最后，您将在 1 月的每一天循环（而不是在每个月的第一天循环）。

另请注意，问题指出，

> **1900**年1 月 1日是星期一。

但是你应该找到从**1901 年**1 月 1 日开始的星期日。

在修复了这些和其他错误（例如循环中的条件）之后，我在下面包含了您的代码的完整工作版本。请注意，您可以通过更多地使用模数 (%) 运算符并且不计算该月其他日期的星期日数（因为最终还是将它们扔掉），可以轻松地优化它以在一小部分时间内运行）。

```
public class Problem019 {
    public static void main (String[] args){

        final int ThirtyOne = 31;
        final int Thirty = 30;
        final int FebNorm = 28;
        final int FebLeap = 29;
        int numOfSundays = 0;

        int calendar[][]= new int [12][];

        calendar[0] = new int [ThirtyOne];
        calendar[1] = new int [FebLeap];
        calendar[2] = new int [ThirtyOne];
        calendar[3] = new int [Thirty];
        calendar[4] = new int [ThirtyOne];
        calendar[5] = new int [Thirty];
        calendar[6] = new int [ThirtyOne];
        calendar[7] = new int [ThirtyOne];
        calendar[8] = new int [Thirty];
        calendar[9] = new int [ThirtyOne];
        calendar[10] = new int [Thirty];
        calendar[11] = new int [ThirtyOne];

        int dayOfWeek = 1;
        for (int year = 1900; year < 2001; year++) {
            for (int month = 0; month < calendar.length; month++) {   
                int dayOfMonth=0;

                int daysInMonth;
                if (month == 1) {
                    daysInMonth = isLeapYear(year) ? FebLeap : FebNorm;
                }
                else {
                    daysInMonth = calendar[month].length;
                }

                while (dayOfWeek < 8 && dayOfMonth < daysInMonth) {   
                    System.out.println("year: " + year + "\tday: " + dayOfWeek
                            + "\tcalendar["+month+"]["+dayOfMonth+"]: " + calendar[month][dayOfMonth]);

                    if (dayOfWeek == 7 && year > 1900) {
                        calendar[month][dayOfMonth]++;

                        if (dayOfMonth == 0) {
                            numOfSundays++;
                        }
                    }

                    dayOfMonth++;

                    dayOfWeek++;
                    if (dayOfWeek > 7) {
                        dayOfWeek=1;
                    }
                }
            }
        }

        for (int month = 0; month < calendar.length; month++) {   
            System.out.println(calendar[month][0]);
        }

        System.out.println(numOfSundays);
    }   

    public static boolean isLeapYear(int year){
        if (year % 400 == 0) {
            return true;
        }
        else if (year % 100 == 0) {
            return false;
        }
        else if (year % 4 == 0){
            return true;
        }
        else {
            return false;
        }
    }
} 
```

同样，这可以改进很多。例如，您可以简单地循环年份和月份，并使用 Java 内置的 Calendar API 或第三方 API 来检查该月的第一天是否是星期日，但这可能是解决问题的最酷方法就是自己实现[末日算法](http://www.theworldofstuff.com/other/day.html)。这将允许您轻松计算任何给定日期的星期几，而无需使用 java.util.Calendar。

一旦你实现了世界末日算法，你不必每次都循环所有的月份，所以你可以做更多的优化。例如，`isSunday(MAR,1,year)`== `(! isLeapYear(year)) && isSunday(FEB,1,year)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T08:26:41.167

这是我的提议。它使用公历来识别日期，然后确定是星期天。

```
import java.util.Date;
import java.util.GregorianCalendar;

public class SundayOfXX {

    public static void main(String [] argv) {
        int counter = 0;
        for (int year = 1901, last_year = 2000; year <= last_year ; year++) {
            for (int month = 1, last_month = 12; month <= last_month ; month++) {
                Date d = new GregorianCalendar(year,month-1,1).getTime(); // GregorianCalendar use 0 for January
                if (d.getDay() == 0) { // sunday is day number 0
                    counter++;
                    System.out.println(String.valueOf(counter) + " " + d);
                }
            }
        }
        System.out.println("Total sunday in XX century: "+counter);
    }
} 
```

此解决方案经过全面测试。它找到了 20 世纪一个月的第一天的 171 个星期日。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T09:23:19.053

试试这个：

```
import java.util.Calendar;
public class Problem019 {   

    public static void main (String[] args){

        Calendar calendar = Calendar.getInstance();
        int countFirstSunday = 0;
        for(int year = 1901; year <= 2000 ; year++) {
            for(int month = 0; month <= 11; month++) {
                calendar.set(year, month, 1);
                if(calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
                    countFirstSunday++;
                }
            }
        }
        System.out.println("Sundays as the first of month: " + countFirstSunday);
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T16:09:18.637

这是您清理和简化的代码：

```
public static void main(String[] args) {
  final int thirtyOne = 31, thirty = 30;
  final int calendar[][] = new int[12][];
  final int[] febLeap = new int[29];
  final int[] febNorm = new int[28];
  calendar[0] = new int[thirtyOne];
  calendar[2] = new int[thirtyOne];
  calendar[3] = new int[thirty];
  calendar[4] = new int[thirtyOne];
  calendar[5] = new int[thirty];
  calendar[6] = new int[thirtyOne];
  calendar[7] = new int[thirtyOne];
  calendar[8] = new int[thirty];
  calendar[9] = new int[thirtyOne];
  calendar[10] = new int[thirty];
  calendar[11] = new int[thirtyOne];
  int dow = 0; // set to day of week for Jan 1 1901
  for (int y = 1901; y < 2001; y++) {
    calendar[1] = leapYearTest(y)? febLeap : febNorm;
    for (int m = 0; m < calendar.length; m++)
      for (int d = 0; d < calendar[m].length; d++)
        if (dow++ % 7 == 0) calendar[m][d]++;
  }
  int sumSundays = calendar[0][0] + febLeap[0] + febNorm[0];
  for (int i = 2; i < calendar.length; i++) sumSundays += calendar[i][0];
  System.out.println("Number of Sundays is " + sumSundays);
}

public static boolean leapYearTest(int x) {
  if (x % 4 == 0 || x % 400 == 0)
    return true;
  return x % 100 != 0;
} 
```

当我说你不需要数组时，这就是我的意思：

```
public static void main(String[] args) {
  final int[] mLens = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
  int dow = 0; // initialize to day of week on Jan 1, 1901
  int suns = 0;
  for (int y = 1901; y < 2001; y++)
    for (int m = 0; m < mLens.length; m++) {
      if (dow++ % 7 == 0) suns++;
      final int mLen = mLens[m] + leapAdd(y, m);
      for (int d = 1; d < mLen; d++) dow++;
    }
  System.out.println(suns);
}

static int leapAdd(int y, int m) {
  if (m != 1) return 0;
  if (y % 4 == 0 || y % 400 == 0) return 1;
  return y % 100 == 0 ? 0 : 1;
} 
```

但是你马上就会意识到在一个月的几天里运行的内部循环是没有意义的，当它只是模 7 时。所以内部循环应该说

```
 for (int m = 0; m < mLens.length; m++) {
      if (dow == 0) suns++;
      final int mLen = mLens[m] + leapAdd(y, m);
      dow = (dow + mLen) % 7;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-18T14:32:40.327

我会这样做（伪代码）：

```
class MyDate { ... } // support adding a number of days and comparing with another MyDate
MyDate end = new MyDate(31\. Dec 2000)
MyDate start = new MyDate(first sunday in 20th century)
int count = start.mday == 1 ? 1 : 0;
start.add(7);
while (start < end) (
    if (start.mday == 1) count++;
    start.add(7);
} 
```

请注意，不需要任何数组，更不用说二维数组了。（但是，要获取月份长度，在 MyDate 的 add 方法中，使用简单的常量数组是可以的。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-21T22:36:48.583

这里有2个解决方案：

**1）**使用`Calendar`- 它更简单，但效率不高 - **135 ms**

```
import java.util.Calendar;

public class P19 {

    public static void main(String[] args) {
        int result = 0;
        for ( int year = 1901 ; year <= 2000 ; year++ ) {
            for ( int month = Calendar.JANUARY ; month <= Calendar.DECEMBER ; month++ ) {
                Calendar c = getCalendar(year, month, 1);
                if ( c.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY ) {
                    result++;
                }
            }
        }
        System.out.println(result);
    }

    private static Calendar getCalendar(int year, int month, int day) {
        Calendar c = Calendar.getInstance();
        c.set(Calendar.YEAR, year);
        c.set(Calendar.MONTH, month);
        c.set(Calendar.DAY_OF_MONTH, day);      // or Calendar.DATE
        return c;
    }

} 
```

请注意：

*   `DAY_OF_MONTH`并且`DATE`是等价的。
*   我使用`Calendar.JANUARY`是因为第一个月是`0`，而不是`1`，即使第一天/日期是`1`。

**2)**使用我**自己的** `Date` **课程**- 只需**1.65 毫秒**：

```
public class P19 {

    public static void main(String[] args) {
        // 1 Jan 1900 - Monday
        // 1900 is not leap => it has 365 days
        // 365 % 7 = 1 => 1 Jan 1901 - Tuesday => 6 Jan 1901 - Sunday

        int yearStart = 1901, yearEnd = 2000;
        int monthStart = 1, monthEnd = 12;
        int dayStart = 6, dayEnd = 31;
        Date dateStart = new Date(yearStart, monthStart, dayStart);
        Date dateStop = new Date(yearEnd, monthEnd, dayEnd);

        int result = 0;
        while (Date.compareDates(dateStart, dateStop) < 0) {
            if (dateStart.day == 1) {
                result++;
            }
            dateStart.addDays(7);
        }
        System.out.println(result);
    }

}

class Date {
    int year;
    int month;
    int day;

    Date(int year, int month, int day) {
        this.year = year;
        this.month = month;
        this.day = day;
    }

    public void addDays(int days) {
        int numberOfDaysForMonth = getTotalMonthDays(month, year);
        day += days;
        if (day >= numberOfDaysForMonth) {
            day -= numberOfDaysForMonth;
            month++;
            if (month > 12) {
                month = 1;
                year++;
            }
        }

    }

    public static int compareDates(Date d1, Date d2) {
        if (d1.year == d2.year && d1.month == d2.month && d1.day == d2.day) {
            return 0;
        }
        if (d1.year < d2.year) {
            return -1;
        }
        if (d1.year == d2.year && d1.month < d2.month) {
            return -1;
        }
        if (d1.year == d2.year && d1.month == d2.month && d1.day < d2.day) {
            return -1;
        }
        return 1;
    }

    private int getTotalMonthDays(int m, int y) {
        if (m == 2 && isLeapYear(y)) {
            return 29;
        }
        if (m == 2) {
            return 28;
        }
        if (m == 4 || m == 6 || m == 9 || m == 11) {
            return 30;
        }
        return 31;
    }

    private boolean isLeapYear(int y) {
        if (y % 4 == 0 && (y % 100 != 0 || y % 400 == 0)) {
            return true;
        }
        return false;
    }

} 
```

此实现仅通过星期日 ( `addDays(7)`) 进行迭代。

一些可能的改进：

*   增加步长（例如：对于`1`，我们可以添加`28`而不是`7`跳过任何一天）
*   更改 compare 方法以返回 a`boolean`并简化其主体

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-01T19:28:32.457

```
public class CountingSundays {

    public static void main(String[] args) {

        int lastDayOfPreviousMonth = 6; //31 Dec 1899 is Sunday as 1 Jan 1900 is Monday

        int countOfSundayOnFirstOfMonth = 0;

        for (int year = 1900; year <= 2000; year++) {
            for (int month = 1; month <= 12; month++) {
                int dayOnFirstOfThisMonth = (lastDayOfPreviousMonth + 1) % 7;
                if (year > 1900 && dayOnFirstOfThisMonth == 6)
                    countOfSundayOnFirstOfMonth++;
                switch (month) {
                case 1: // Jan
                case 3: // Mar
                case 5: // May
                case 7: // Jul
                case 8: // Aug
                case 10: // Oct
                case 12: // Dec
                    lastDayOfPreviousMonth = (lastDayOfPreviousMonth + 3) % 7;
                    break;
                case 4: // Apr
                case 6: // Jun
                case 9: // Sep
                case 11: // Nov
                    lastDayOfPreviousMonth = (lastDayOfPreviousMonth + 2) % 7;
                    break;
                case 2: // Feb
                    if (year % 4 == 0 && (year % 100 != 0 || year % 400 == 0))
                        lastDayOfPreviousMonth = (lastDayOfPreviousMonth + 1) % 7;
                }
            }
        }

        System.out.println(countOfSundayOnFirstOfMonth);
    }

} 
```

# mysql - 备份后不显示 innoDB tablew

> ID：10370511
> 
> 赞同：1
> 
> 时间：2012-04-29T07:40:57.103
> 
> 标签：mysql, windows-7, innodb

我最近遇到了我的 win 7 的问题，所以我不得不重新安装....而且我也不得不用 mysql 重新安装 web 服务器

之前我有 mysql 5.1 现在我有 5.5。

我已经从 C:\ProgramData\MySQL\MySQL Server 5.1\data 进行了备份（我的数据库的复制目录）

我现在已经将所有目录复制到 C:\ProgramData\MySQL\MySQL Server 5.5\data

检查结果时，我只看到了 myisqm 表，没有 innodb 表！

SHOW ENGINES 给了我这个

```
FEDERATED   NO  Federated MySQL storage engine  NULL    NULL    NULL
MRG_MYISAM  YES Collection of identical MyISAM tables   NO  NO  NO
MyISAM  YES MyISAM storage engine   NO  NO  NO
BLACKHOLE   YES /dev/null storage engine (anything you write to it...   NO  NO  NO
CSV YES CSV storage engine  NO  NO  NO
MEMORY  YES Hash based, stored in memory, useful for temporary...   NO  NO  NO
ARCHIVE YES Archive storage engine  NO  NO  NO
InnoDB  DEFAULT Supports transactions, row-level locking, and fore...   YES YES YES
PERFORMANCE_SCHEMA  YES Performance Schema  NO  NO  NO 
```

所以我该怎么做？我检查了相关文件在目录中...... fe

分类广告.frm 分类广告.MYD 分类广告.MYI

好的，我停止了 mysql55 服务，我覆盖了文件： - ibdata1 - ib_logfile0 - ib_logfile1

从我的备份中......但是当我重新启动服务时出现错误：进程意外终止。检查日志时：

```
120429  9:52:29 [Note] Plugin 'FEDERATED' is disabled.
120429  9:52:29 InnoDB: The InnoDB memory heap is disabled
120429  9:52:29 InnoDB: Mutexes and rw_locks use Windows interlocked functions
120429  9:52:29 InnoDB: Compressed tables use zlib 1.2.3
120429  9:52:29 InnoDB: Initializing buffer pool, size = 59.0M
120429  9:52:29 InnoDB: Completed initialization of buffer pool
InnoDB: Error: log file .\ib_logfile0 is of different size 0 130023424 bytes
InnoDB: than specified in the .cnf file 0 31457280 bytes!
120429  9:52:29 [ERROR] Plugin 'InnoDB' init function returned error.
120429  9:52:29 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
120429  9:52:29 [ERROR] Unknown/unsupported storage engine: INNODB
120429  9:52:29 [ERROR] Aborting

120429  9:52:29 [Note] C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld: Shutdown complete 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:44:15.387

你知道 InnoDB 数据文件在那里吗？即文件命名如下：
- ibdata1
- ib_logfile0
- ib_logfile1

然后尝试从命令行运行

```
mysql_upgrade -u root -p 
```

然后在出现提示时输入您的密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:03:08.547

好的，JScoobyCed 建议我更改 my.ini 文件中 innodb_log_file_size 的大小...

经过几次尝试，我找到了正确的大小......在我的情况下是 innodb_log_file_size =124M 因为我的备份文件 ib_logfile0 和 ib_logfile1 大约 126MB 大

谢谢

我把桌子拿回来了，终于...

呜呜呜

# iphone - 如何在ObjectiveC中从NSString中拆分换行符

> ID：10370516
> 
> 赞同：8
> 
> 时间：2012-04-29T07:41:07.603
> 
> 标签：iphone, objective-c, ios, xcode, nsstring

对于我的新项目。我已将我的 csv 文件内容加载为 NSString。首先，我需要用换行符分割它，然后用逗号分割每一行。我怎样才能循环这一切？请你帮助我好吗？

**CSV 内容**

"^GSPC",1403.36,"4/27/2012","4:32pm",+3.38,1400.19,1406.64,1397.31,574422720 "^IXIC",3069.20,"4/27/2012","5:30pm ",+18.59,3060.34,3076.44,3043.30,0

**视图控制器.m**

```
NSString* pathToFile = [[NSBundle mainBundle] pathForResource: @"quotes" ofType: @"csv"];
NSString *fileString = [NSString stringWithContentsOfFile:pathToFile encoding:NSUTF8StringEncoding error:nil];
if (!fileString) {
    NSLog(@"Error reading file.");
}

NSArray *array = [fileString componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

for(int i=0; i<[array count]; i++){      
    //
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T07:47:50.237

可能想调查一下`NSMutableArray`。

```
// grab your file
NSMutableArray *data = [[fileString componentsSeparatedByCharactersInSet: [NSCharacterSet newlineCharacterSet]] mutableCopy];
for (int i = 0; i < [data count]; i++)
{
    [data replaceObjectAtIndex: i
                    withObject: [[data objectAtIndex: i] componentsSeparatedByString: @","]];
} 
```

相关地，Dave DeLong 有一个适当的库来满足这一需求：[https ://github.com/davedelong/CHCSVParser](https://github.com/davedelong/CHCSVParser)

# iphone - 为什么没有将完整的数组推送到 UITextView？

> ID：10370518
> 
> 赞同：0
> 
> 时间：2012-04-29T07:41:49.663
> 
> 标签：iphone, ios5, uitextview, uistoryboardsegue

这是我的代码：

```
-(void)printHistory:(NSArray*)songPrintList {
    for(int t=0; t<[songPrintList count]; t++) {
        [sonHistory setText:[[songPrintList objectAtIndex:t]capitalizedString]];
        NSLog(@"%d %@", t, [songPrintList objectAtIndex:t]);
    }
} 
```

此方法在 viewDidLoad 上调用。NSLoad 将整个数组记录到控制台，但 UITextView、songHistory 只是从数组中获取最后一个字符串。

我应该补充一点，这是一个模态视图，数组来自通过 segue 的“父”视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:57:45.137

```
-(void)printHistory:(NSArray*)songPrintList {
    NSString *str = [NSString stringWithString:@""];
    for(int t=0; t<[songPrintList count]; t++) {
        str = [str stringByAppendingString:[[songPrintList objectAtIndex:t]capitalizedString]];
        NSLog(@"%d %@", t, [songPrintList objectAtIndex:t]);
    }
    [sonHistory setText:str];
} 
```

# c++ - 使用 Qt 判断 PC 是否退出待机状态

> ID：10370526
> 
> 赞同：9
> 
> 时间：2012-04-29T07:43:46.553
> 
> 标签：c++, python, qt

是否有使用 Qt 的跨平台方式来判断计算机是否已退出待机或休眠状态。

我需要能够检测到计算机何时退出待机状态才能重置/继续进程。在这种情况下，它是通过串行端口连接到 GPS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:49:56.763

[根据http://comments.gmane.org/gmane.comp.lib.qt.general/39649](http://comments.gmane.org/gmane.comp.lib.qt.general/39649)上的讨论，似乎没有可靠的跨平台方式来做到这一点。链接的讨论提供了一些关于如何通过监听平台信号在 windows 和 mac 上执行此操作的说明。

# ruby-on-rails - 模型协会

> ID：10370527
> 
> 赞同：0
> 
> 时间：2012-04-29T07:44:02.593
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

嗨，我对关联有一点问题，我正在使用 Rails 3.2，我想创建一个特殊的博客，这个博客有很多部分，这个部分有很多文章，一篇文章属于一个类别。所以我的模型是：

```
class Article < ActiveRecord::Base
  belongs_to :section
  belongs_to :category

class Category < ActiveRecord::Base
  has_many :articles

class Section < ActiveRecord::Base
  has_many :article 
```

所以文章 belongs_to 部分，在 routes.rb ：

```
 resources :sections do
   resources :articles
 end 
```

耙路线：

```
 POST   /sections/:section_id/articles(.:format)          articles#create
 new_section_article GET    /sections/:section_id/articles/new(.:format)      articles#new
edit_section_article GET    /sections/:section_id/articles/:id/edit(.:format) articles#edit
     section_article GET    /sections/:section_id/articles/:id(.:format)      articles#show
                     PUT    /sections/:section_id/articles/:id(.:format)      articles#update
                     DELETE /sections/:section_id/articles/:id(.:format)      articles#destroy
            sections GET    /sections(.:format)                               sections#index
                     POST   /sections(.:format)                               sections#create
         new_section GET    /sections/new(.:format)                           sections#new
        edit_section GET    /sections/:id/edit(.:format)                      sections#edit
             section GET    /sections/:id(.:format)                           sections#show
                     PUT    /sections/:id(.:format)                           sections#update
                     DELETE /sections/:id(.:format)                           sections#destroy 
```

所以我的问题是如何创建具有索引和显示操作的 Categories_controller。显示属于该类别的文章，并在文章路径的views(Category#show) 中有一个link_to。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:40:08.370

假设您确实需要嵌套路由来适应您的域模型（例如，文章需要根据它们是在类别还是部分的上下文中查看而有所不同），那么您可以像这样创建另一组嵌套路由：

**路线.rb**

```
resources :categories, only: [:index, :show] do
  resources :articles
end 
```

这将设置路线以按类别查找您的类别和文章，但您将不得不在您的`ArticlesController`on`params[:category_id]`或`params[:section_id]`类似中分叉您的逻辑：

```
class ArticlesController < ApplicationController
  def index
    if params[:section_id]
      # handle section_articles_path to display articles by section
    elsif params[:category_id]
      # handle category_articles_path to display articles by category
    else
      # handle articles_path to display all articles (assuming you have resources :articles in routes)
    end
  end
  # ...
end 
```

然后，基于类别显示文章的链接将使用为您创建的生成的路由辅助方法。

**类别/show.html.erb**

```
<ul>
  <% @category.articles.each do |article| %>
    <li><%= link_to article.title, category_article_path(@category, article) %></li>
  <% end %>
</ul> 
```

然后，当然，您可以重构视图代码以将集合呈现为它自己的部分而不是手动迭代，但我暂时将其保留...

如果您不需要以不同的方式处理上下文（通过部分与类别访问文章），我建议您只设置三个基本路线（`:articles`, `:sections`, `:categories`）并从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:48:08.927

这非常简单 `match 'catagories' => "catagories#index"`，而且 `match 'catagories/show/:id' => "catagories#show"` 在表演中`@articles = Article.where("category_id",params[:id])`

`@articles = Article.where("category_id",params[:id])`这将解决您的目的

# cuda - 使用 MPI 在分布式内存上运行 CUDA 内核

> ID：10370531
> 
> 赞同：1
> 
> 时间：2012-04-29T07:44:24.980
> 
> 标签：cuda, mpi, distributed

我在集群中运行我的程序。每个节点有 2 个 GPU。每个 MPI 任务都是调用一个 CUDA 函数。

我的问题是，如果每个节点上运行两个 mpi 进程，每个 CUDA 函数调用会被安排在不同的 GPU 上，还是它们都运行在同一个 GPU 上？如果我在每个节点上运行 4 个 mpi 任务会怎样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T10:39:13.243

每个 MPI 任务调用一个 cuda 函数，该函数被安排在您选择的任何 GPU 上。您可以使用该功能选择您想要的 GPU `cudaSetDevice()`。`cudaSetDevice(0)`在您的情况下，由于每个节点包含 2 个 GPU，您可以使用和 在每个 GPU 之间切换 `cudaSetDevice(1)`。如果您不使用 SetDevice 函数指定 GPU 并将其与 MPI 任务相结合`rank`，我相信 2 个 MPI 任务将在同一个默认 GPU（编号为 0）上连续运行两个 cuda 函数。此外，如果您在每个节点上运行 3 个或更多 mpi 任务，您肯定会遇到竞争条件，因为 2 个或更多 cuda 函数将在同一个 GPU 上连续运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T10:36:50.780

MPI 和 CUDA 基本上是正交的。您必须自己显式管理 MPI 进程与 GPU 的关联性。为此，每个 GPU 都必须使用计算独占模式。一旦每个进程找到一个可以在其上建立上下文的空闲设备，您就可以使用带有着色的拆分通信器来强制执行处理器-GPU 关联。

来自 NVIDIA 的 Massimo Fatica 不久前在 NVIDIA 论坛上发布了一个[有用的代码片段](http://forums.nvidia.com/index.php?showtopic=98055&view=findpost&p=548063)，可以帮助您入门。

# c++ - 编译 C++ 时链接自定义头文件

> ID：10370533
> 
> 赞同：5
> 
> 时间：2012-04-29T07:44:29.803
> 
> 标签：c++, compilation, header, linker, glut

在linux上使用g++编译C++程序时，如何链接自己的头文件？

例如，我有一个包含以下内容的文件：

```
#include <stdlib.h>
#include <GL/glut.h>
#include <math.h>
#include <stdio.h>
#include "3DCurve.h" 
```

当我使用以下命令编译时：

```
 g++ -lm -lglut -lGL -o 3dcurve Example_8_1.cpp 
```

我收到以下错误：

```
undefined reference to 'draw3Dcurve(double, double, double, double, double, double)' 
```

如何将 3DCurve.h 文件链接到编译器？头文件及其实现与我正在编译的文件位于同一文件夹中。我的理解是编译器应该找到它，如果它位于同一个文件夹中。

我没有得到什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T07:47:24.713

一个不链接到头文件，一个只是包含它们。但是如果头文件有对应的实现文件，你要么必须将它包含在编译行中，要么制作一个目标文件，并将其包含在编译行中。从您的错误来看，您的实现文件似乎没有得到适当的处理。

假设如果`DCurve.h`调用了实现，`3DCurve.cpp`那么您可以这样做：

```
g++ -lm -lglut -lGL -o 3dcurve 3DCurve.cpp Example_8_1.cpp 
```

其他选项是使用g++ 选项创建一个*目标*文件，然后`3DCurve.o``-c`

```
g++ -lm -lglut -lGL -o 3dcurve 3DCurve.o Example_8_1.cpp 
```

或者，创建一个共享或静态库并像使用另一个第三方库一样使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T09:41:57.507

编译器不会“只找到”实现。

您已经包含了 header `3DCurve.h`，并且 GCC 使用[搜索路径](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)找到它：

> GCC 首先在包含当前文件的目录中查找使用 #include "file" 请求的头文件，然后在 -iquote 选项指定的目录中查找，然后在相同的位置查找使用尖括号请求的头文件。

对于实现`3DCurve.cpp`，您必须在命令中编译并链接它，例如：

```
 g++ Example_8_1.cpp 3DCurve.cpp -o 3dcurve -lm -lglut -lGL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T08:09:42.807

您的代码中出现链接错误

`undefined reference to 'draw3Dcurve(double, double, double, double, double, double)'`

`draw3Dcurve`这是因为，编译器在链接目标文件时无法找到 的定义。编译时，包括具有实现的库或目标文件，`draw3Dcurve`它将正常工作。

# c# - 在 Winform 中访问用户控件的控件属性的正确方法是什么？

> ID：10370534
> 
> 赞同：3
> 
> 时间：2012-04-29T07:44:41.570
> 
> 标签：c#, .net, winforms, user-controls

我创建了这个用户控件：

![在此处输入图像描述](../Images/3a9b782a5873101d2551dd47dc186cad.png)

我将该用户控件添加到主窗体，现在我想自定义它。所以我必须向这 3 个按钮添加文本、标签中的文本、填充列表框并为按钮设置单击事件。

这样做的正确方法是什么？

我在网上环顾四周，显然这样做的方法是在用户控件中添加公共属性，这将公开我需要的单个控件属性。

就像是：

```
 public string Button1Text
    {
        get
        {
            return btn1.Text;
        }
        set
        {
            btn1.Text = value;
        }
    } 
```

如果我走这条路，我将不得不向这个简单的用户控件添加相当多的公共属性。

但是像这样在用户控件中公开整个控件不是更容易吗？

```
 public Button MyButton1
    {
        get { return this.btn1; }
        set { this.btn1 = value; }
    } 
```

这样主窗体可以根据需要简单地访问控件及其属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T08:02:04.240

从封装的角度来看，第一种方法更好。第二种方法使您的控件的用户（窗体）依赖于您的控件的视图，这可以防止将来更改视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T07:53:47.143

代码的第一位是正确的方法。您将不得不创建很多它们，但这是正确的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:47:00.440

第一个要好得多，您只需为希望能够从父控件访问的按钮的每个单独属性创建属性。

如果您使用第二种方式，那么任何希望使用您的控件的人都可以在您的控件中移动和调整各个控件的大小。那么它就真的不再是一个自定义控件了，而是一个比面板更难使用的面板。我想不出任何理由为什么能够允许父级在子控件中移动各个元素。

# vb.net - 在 VB.Net 中集成 QRCode 库

> ID：10370535
> 
> 赞同：2
> 
> 时间：2012-04-29T07:44:47.467
> 
> 标签：vb.net, qr-code

我一直在寻找一种使用 VB.Net 创建二维码的方法，但我正在绕圈子。我找到了一些示例，但它们使用 C#。还阅读了有关 ZXing 库的信息，但我不知道如何引用它（或引用什么）。您能否建议一个教程（针对完全初学者）关于如何查找开源库并将其引用到新的 VB.Net 项目中？

到目前为止，我得到的最接近的是：http: [//www.codeproject.com/Articles/258779/Just-launched-new-open-source-project-QrCode-Net-a](http://www.codeproject.com/Articles/258779/Just-launched-new-open-source-project-QrCode-Net-a)

示例 3 似乎适用于我，但我不知道如何将该控件添加到工具箱中。示例代码在 C# 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:28:26.873

好的，所以我解决了这个问题。这并不理想，但它很简单并且有效。我所做的是结合使用谷歌的在线 API 二维码服务和 URL 图像抓取，如本文所述：

[http://forums.asp.net/t/631768.aspx/1](http://forums.asp.net/t/631768.aspx/1)

使用上面文章中显示的函数，我加载了这个 URL：

[http://chart.apis.google.com/chart?cht=qr&chs=300x300&chl=Hello+World](http://chart.apis.google.com/chart?cht=qr&chs=300x300&chl=Hello+World)

用我的字符串改变“Hello+World”。我将生成的图像设置为图片框，然后我可以用它做任何我需要的事情。

唯一的缺点是它正在使用的机器需要永久的互联网连接。

我发布此答案以防万一其他人遇到我自己的问题并且永久互联网连接不是问题。

我仍然希望有人可以帮助我提供可以在独立 PC 上运行的“离线”版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T18:35:20.063

并不是说我对您的操作方式有任何问题，但这可能会少一些代码：

```
'fn: virtually unique file name based on date and time
Dim fn As String = "QR_" & String.Format("{0:MMddyyhhmmss}", DateTime.Now()) & ".png"
Dim txt As String = "Hello World"

Try
    Dim client As New System.Net.WebClient
    client.DownloadFile("http://chart.apis.google.com/chart?cht=qr&chs=300x300&chl=" & txt, Server.MapPath("~/TempFiles/" & fn))
    client = Nothing
Catch
End Try

'I have an <asp:label> on my form so I can quickly test if the file downloaded.
lblTest.Text = "<a href='~/TempFiles/" & fn & "' target='_blank'>Success?</a>" 
```

好吧，我用 VB 为 ASP.NET 编写了这个。如果有人试图在网站上执行此操作，这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T21:56:36.707

您可以在 VB 项目中使用 C# 库，方法是将其作为现有项目添加到解决方案中。然后右键单击您的 VB 项目并选择“添加引用”。QRCODE 库应列在“项目”选项卡上。

您也可以跳过将项目添加到您的解决方案中，如果他们提供了对 DLL 库的引用，则只需添加对它的引用。但如果这样做，您将无法浏览 C# 代码。

# java - 检查资源中是否存在 ID (R.id.something)

> ID：10370536
> 
> 赞同：7
> 
> 时间：2012-04-29T07:44:50.927
> 
> 标签：java, android

因此，我的代码使用 AtomicInteger 为许多元素生成 ID，该 AtomicInteger 默认设置为 Integer.MAX_VALUE，并随着每个视图分配一个 ID 从那里递减。所以第一个生成ID的视图是`Integer.MAX_VALUE - 1`，第二个是`Integer.MAX_VALUE - 2`，等等。我担心的问题是与Android在R.java中生成的ID发生冲突。

所以我的问题是如何检测一个 ID 是否已被使用并在生成 ID 时跳过它。我最多只生成 30 个 ID，所以这不是一个重要的优先事项，我想让它尽可能地没有错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T11:13:50.230

以下代码将告诉您标识符是否为 id。

```
static final String PACKAGE_ID = "com.your.package.here:id/"
...
...
int id = <your random id here>
String name = getResources().getResourceName(id);
if (name == null || !name.startsWith(PACKAGE_ID)) {
    // id is not an id used by a layout element.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-02T23:11:23.647

我从上面修改了 Jens 的答案，因为正如评论中所述，name 永远不会为 null，而是抛出异常。

```
private boolean isResourceIdInPackage(String packageName, int resId){
    if(packageName == null || resId == 0){
        return false;
    }

    Resources res = null;
    if(packageName.equals(getPackageName())){
        res = getResources();
    }else{
        try{
            res = getPackageManager().getResourcesForApplication(packageName);
        }catch(PackageManager.NameNotFoundException e){
            Log.w(TAG, packageName + "does not contain " + resId + " ... " + e.getMessage());
        }
    }

    if(res == null){
        return false;
    }

    return isResourceIdInResources(res, resId);
}

private boolean isResourceIdInResources(Resources res, int resId){

    try{            
        getResources().getResourceName(resId);

        //Didn't catch so id is in res
        return true;

    }catch (Resources.NotFoundException e){
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T08:30:17.890

您可以使用[Java 反射 API](http://docs.oracle.com/javase/tutorial/reflect/index.html)`R.id`来访问Class对象中存在的任何元素。

代码是这样的：

```
Class<R.id> c = R.id.class;

R.id object = new R.id();

Field[] fields = c.getDeclaredFields();

// Iterate through whatever fields R.id has
for (Field field : fields)
{
    field.setAccessible(true);

    // I am just printing field name and value, you can place your checks here

    System.out.println("Value of " + field.getName() + " : " + field.get(object));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-27T13:30:43.217

您可以使用`View.generateViewId()`需要最低 API 17 的版本。

来自sdk

> 生成适合在 setId(int) 中使用的值。此值不会与 aapt for R.id 在构建时生成的 ID 值冲突。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T08:05:07.247

只是一个想法...您可以使用`findViewById (int id)`来检查是否`id`已在使用中。

# android - 线程需要很长时间。为什么？

> ID：10370539
> 
> 赞同：0
> 
> 时间：2012-04-29T07:45:11.393
> 
> 标签：android

我正在创建应用程序来检查我的 SD 卡中的重复文件。
我在 "files" 中获得了整个文件列表`ArrayList`。
现在我需要找到重复的文件，所以我在线程中使用了这段代码。
但它正在工作，但查找重复项需要太多时间。

```
for(int i=0;i<files.size();i++)
    {
      for(int j=i+1;j<files.size();j++)
        {
        if(new File(files.get(i)).getName().compareTo(new File(files.get(j)).getName())==0)
        {
            //My Code
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:49:52.697

您可以考虑将所有元素添加到 a`HashSet`并将它们添加回`ArrayList`. 就像是

```
Set<File> set = new HashSet<File>();
set.addAll(files);
files.clear();
files.addAll(set); 
```

现在，如果您比较 and 的大小`set`，`files`您就知道是否有重复项

**编辑**
更改`HashSet`为`Set<File>`建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:57:28.267

实际上，创建线程非常昂贵，[请查看 Painless Threading](http://android-developers.blogspot.com/2009/05/painless-threading.html "无痛穿线")

如果您经常创建相同的线程 - AsyncTask 可能是一个不错的选择，因为它会以一种很好的方式为您管理线程创建/停止。

以下是对呈现代码的一些调整：

*   缓存`files.size()`一次，将其存储在变量中并使用它；
*   `new File(files.get(i)).getName()`不需要每j调用一次，可以缓存；
*   尽量避免`new`在循环内调用。我不确定你为什么需要打电话`new File()`而不是仅仅比较`files.get()`结果；

# r - 在两个不同的部分计算函数

> ID：10370540
> 
> 赞同：0
> 
> 时间：2012-04-29T07:45:29.273
> 
> 标签：r

我有一个 vector `y`，它是一系列正整数。对于 中的每个值`y`，我想计算：

*   `z <- 1/y`,
*   但是对于`y`1 的元素，我需要设置`z`为零。
*   最后，我需要一个`z`为零的向量，因为`y`它是 1，而`1/y`对于`y`不是 1。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T07:56:58.107

使用`ifelse`并一步完成：

```
y <- 1:5
z <- ifelse(y==1, 0, 1/y)

cbind(y, z)
     y         z
[1,] 1 0.0000000
[2,] 2 0.5000000
[3,] 3 0.3333333
[4,] 4 0.2500000
[5,] 5 0.2000000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T13:01:02.737

使用逻辑索引很容易做到这一点：

```
z <- 1/y  # will have some Inf values but not throw an error
z[y==0] <- 0   # changes the Inf's to 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T08:24:33.810

将安德烈所说的扩展到矩阵......

```
y <- matrix(1:25, ncol=5) # define the matrix y
z <- matrix(ifelse(y==1, 0, 1/y), ncol=ncol(y)) 
```

或者我可以说

```
z <- matrix(ifelse(y==1, 0, 1/y), ncol=5) 
```

# javascript - js立即函数执行序列

> ID：10370545
> 
> 赞同：1
> 
> 时间：2012-04-29T07:46:15.390
> 
> 标签：javascript

```
var Gadget = function () {
    // static variable/property
    var counter = 0;
    // returning the new implementation
    // of the constructor
    return function () {
        console.log(counter += 1);
    };
}(); // execute immediately

var g1 = new Gadget(); // logs 1
var g2 = new Gadget(); // logs 2
var g3 = new Gadget(); // logs 3 
```

我调试这段代码，`var counter = 0;`期间不会执行`new Gadget()`，输出是`1,2,3`。

```
var Gadget = function () {
    // static variable/property
    var counter = 0;
    // returning the new implementation
    // of the constructor
    return function () {
        console.log(counter += 1);
    }();
}; // execute immediately

var g1 = new Gadget(); // logs 1
var g2 = new Gadget(); // logs 2
var g3 = new Gadget(); // logs 3 
```

我调试这段代码`var counter = 0;`将在 期间执行`new Gadget()`，输出为`1,1,1`.

此演示代码采用 javascript 模式，私有静态成员。我很难理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:58:56.840

这是怎么回事。。

在第一个中，你在函数的 END 处有 ()，所以函数被执行，return 语句存储在“var Gadget”中。return 语句是您拥有的构造函数 - 一个函数。所以现在，当您执行 new Gadget() 时，您正在执行该函数。IE，马上执行外部函数，设置counter=0，然后内部函数返回到变量Gadget，每次运行，计数器递增。

然而，在第二个中，您将“外部”函数存储到“var Gadget”中，但在该函数内部，您执行内部函数。所以当你创建一个新的小工具时，计数器设置为零，然后声明返回函数然后执行，因为它后面的 ()，因此递增计数器，它只是设置为 0，因此它变为 1。

我希望这是有道理的。当您定义一个函数并将其存储在 var 中时，该函数尚未执行。它在您“执行” var 时执行，例如`var()`. 但是如果后面有 ()，它会作为函数执行，并且它返回的任何内容都会存储到 var 中。

事实上，在第一个代码中，g1、g2 和 g3 都将是对同一个内部函数的引用，而在第二个代码中，g1、g2 和 g3 将是对 Gadget 函数的引用，正如您所期望的那样，但是随后内部函数将进行评估并且不返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:59:55.830

在第一种情况下，您立即调用*返回*另一个函数（内部闭包）的函数表达式，该函数被设置为变量`Gadget`，并且当您随后调用`new Gadget()` *该函数*时，就好像它是一个构造函数一样调用该函数。

您可以看到这是`Gadget`在 Chrome 控制台中评估的第一个版本：

```
> Gadget
function () {
    console.log(counter += 1);
} 
```

这个函数是一个绑定到外部（立即调用）函数的闭包，因此它们共享相同的变量`Gadget`实例。`counter`

# wpf - 绑定 ContextMenu 项

> ID：10370547
> 
> 赞同：0
> 
> 时间：2012-04-29T07:46:20.737
> 
> 标签：wpf, binding

我有一个带有一些 ContextMenu 的 treeView。

ContextMenu 项之一是“添加项”菜单项。此项目应作为项目的子列表保存，其中此列表绑定到某个 ObervableColcetion。每个模型都有“Header”和“IsEnabled”。列表中的每个项目都添加为新的 MenuItem。

我的问题是，只有在第一次之后，所有项目都会获得正确的 IsEnabled 值。当我更改一些模型数据时，它不会改变 meneItem 的可见性。我确信 ObervableColcetion 中没有错误，因为我也在其他视图中使用它并且它的行为正常。

这是代码：

```
<TreeView  Name="tvSceneTree"  ItemsSource="{Binding Converter={StaticResource mlControlSceneTreeVMConverter}}" 
            Height="auto" AllowDrop="True" SelectedItemChanged="tvSceneTree_SelectedItemChanged"> 
                <TreeView.ContextMenu>
                    <ContextMenu Name="mainContextMenu" Opened="mainContextMenu_Opened">
                        <MenuItem Header="Add Item" Name="addItemMenu" ItemsSource="{Binding Path=ControlBoxItems}">
                            <MenuItem.ItemTemplate>
                                <DataTemplate>
                                    <MenuItem Header="{Binding ControlName}"  IsEnabled ="{Binding IsEnabled}"
                              Command="{Binding Source={x:Static ev:ApplicationCommands.AddControlToScene}}" CommandParameter="{Binding}"/>
                                </DataTemplate>
                            </MenuItem.ItemTemplate>
                        </MenuItem>
                        <MenuItem Header="Copy"  Command="{Binding Source={x:Static ev:ApplicationCommands.Copy}}" />
                        <MenuItem Header="Paste"  Command="{Binding Source={x:Static ev:ApplicationCommands.Paste}}" />
                        <MenuItem Header="Cut"  Command="{Binding Source={x:Static ev:ApplicationCommands.Cut}}" />
                        <MenuItem Header="Duplicate" IsEnabled="{Binding Path=ControlItem, Converter={StaticResource canDoActionOnControlConverter}, ConverterParameter=CanBeDuplicated}" Command="{Binding Source={x:Static ev:ApplicationCommands.DuplicateControl}}" CommandParameter="{Binding}" />
                        <MenuItem Header="Delete" IsEnabled="{Binding Path=ControlItem, Converter={StaticResource canDoActionOnControlConverter}, ConverterParameter=CanBeRemove}"  Command="{Binding Source={x:Static ev:ApplicationCommands.DeleteControl}}" CommandParameter="{Binding}" />
                        <MenuItem Header="Add animation" IsEnabled="{Binding Path=ControlItem.AnimationStubs,Converter={StaticResource collectionCountToBoolConverter}}"  Command="{Binding Source={x:Static ev:ApplicationCommands.AddAnimation}}" CommandParameter="{Binding}" />
                        <!--<MenuItem Header="Rename" Command="{Binding Source={x:Static ev:ApplicationCommands.RenameControl}}" CommandParameter="{Binding}" />-->

                    </ContextMenu>
                </TreeView.ContextMenu> 
```

# shell - 从文本文件中提取第 1、11、21 行等

> ID：10370549
> 
> 赞同：-4
> 
> 时间：2012-04-29T07:47:11.890
> 
> 标签：shell

是否可以使用 Linux 命令从文本文件中检索第 1、11、21、31 行的数据？

我需要对 2、12、22、32 等做同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T07:51:47.653

您可以`awk`为此使用：

```
awk '(NR % 10 == 1){ print }' your_input_file 
```

例如：

```
 $ seq 1 100|awk '(NR%10 == 2){print}'
2
12
22
32
42
52
62
72
82
92 
```

正如[glenn jackman](https://stackoverflow.com/users/7552/glenn-jackman)指出的那样，您可以对`awk`脚本进行参数化以使其更易于使用。鉴于这`print`是默认操作，您可以简单地编写：

```
 $ seq 1 20|awk -v step=10 -v idx=3 'NR%step==idx'
3
13 
```

# mysql - 将 mysql 中 CSV 列中的值与更多检查进行比较

> ID：10370552
> 
> 赞同：0
> 
> 时间：2012-04-29T07:47:31.077
> 
> 标签：mysql, csv, sql-like

我需要一个包含两部分的查询。我的意思是两个where子句。

到目前为止，我已经达到了以下内容，但它无法正常工作。

```
SELECT * from items
where
      FIND_IN_SET( '3', category_id )
  AND postcode LIKE 'sw19%'
order by id 
```

这个查询只运行第一部分，即`FIND_IN_SET()`部分。并忽略第二部分，即邮政编码检查......

我想知道这种查询是否有解决方案。

**细节**

我想比较 2 列的值：

*   1 列是 csv 列，例如。1,2,3,4,5

*   另一个是邮政编码 B17 SW19 等

表如下。

```
---+--------+-------------+----------+-
编号 | 项目 | 类别 ID | 邮编 |
---+--------+-------------+----------+-
 1 | 美国广播公司 | 1,2,3,4 | SW19 |
---+--------+-------------+----------+-
 2 | 定义 | 3,4,5 | NW6 |
---+--------+-------------+----------+-
 3 | xyz | 6,7,8,9 | SW19 |
---+--------+-------------+----------+-
 4 | 吉 | 8,9,10,11 | SW19 |
---+--------+-------------+----------+-

```

等等

如果我想选择一个`category_id`包含`'3'`AND 其邮政编码从 开始的条目，`'SW'`它将是什么查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:34:39.973

我刚刚找到了完全解决我的问题的解决方案，尽管它将来会对某人有所帮助。

好吧，查询是这样的：

```
Select * from table_name where FIND_IN_SET('3', category_id) >0 AND postcode LIKE 'sw%' 
```

问候，绍伊布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:10:23.713

:) 只是简单的查询

```
SELECT * FROM tablename1 WHERE category_id LIKE '%,3,%' AND postcode LIKE 'SW%' 
```

# objective-c - 如何在 SplitView 模板中创建带有活动指示器的工具栏？

> ID：10370559
> 
> 赞同：0
> 
> 时间：2012-04-29T07:48:05.773
> 
> 标签：objective-c, uitoolbar, uiactivityindicatorview, ipad

我是 ipad 开发的新手。在我的应用程序中，我想创建如下图所示的拆分视图。我从 XCode 模板制作了一个新的 splitView 应用程序。如何在 TableViewController 中创建带有活动指示器的工具栏，如 Mail.app？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:26:41.830

看起来你想把 a 放在 a`UIActivityIndicatorView`中`UIToolBar`。您可以将其添加为工具栏的子视图，或者更好的是，`UIBarButtonItem`使用`-initWithCustomView:`.

# release-management - 在新版本上避免防病毒误报检测

> ID：10370561
> 
> 赞同：2
> 
> 时间：2012-04-29T07:48:46.413
> 
> 标签：release-management, antivirus, false-positive, virus-scanning

我们最近发布了一个新应用程序，每隔几天我们就会发布一个包含一些错误修复的新版本。

每次发布更新版本时，我们是否需要向所有防病毒制造商提交我们新二进制文件的白名单请求？我们担心在新版本发布后被隔离。

谢谢你

# core-data - RestKit Object Mapping 与外键的关系

> ID：10370562
> 
> 赞同：12
> 
> 时间：2012-04-29T07:48:54.617
> 
> 标签：core-data, restkit

RestKit 是否可以在不将外键存储为属性的情况下（即直接从 JSON 中的键路径）连接关系？

特别是，我有一个 Job has_many Rooms 关系。房间的 JSON 不包含作业，而是分别加载：

```
- job: {
    id: 1,
    name: "John"
}

- room: {
    id: 4,
    job_id: 1,
    name: "spare bedroom"
} 
```

Job 在 Room 之前加载。

我的 CoreData 模型，Job 具有以下属性

```
@interface Job : NSManagedObject
@property (nonatomic, retain) NSNumber * identifier;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSSet *rooms;
@end

@interface Room : NSManagedObject
@property (nonatomic, retain) NSNumber * identifier;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) Job *job;
@end 
```

目前我添加了一个`@property (nonatomic, strong) NSNumber *jobID;`到房间，我`@synthesize`.

```
JobMapping:
    mapping = [RKManagedObjectMapping mappingForClass:[Job class]];
    [mapping setPrimaryKeyAttribute:@"identifier"];

    [mapping mapAttributes:@"name", nil];
    [mapping mapKeyPath:@"id" toAttribute:@"identifier"];

    [mapping mapRelationship:@"rooms" withMapping:[Room objectMapping]];

RoomMapping
    mapping = [RKManagedObjectMapping mappingForClass:[Room class]];
    [mapping setPrimaryKeyAttribute:@"identifier"];

    [mapping mapAttributes:@"name", nil];
    [mapping mapKeyPath:@"id" toAttribute:@"identifier"];
    [mapping mapKeyPath:@"job_id" toAttribute:@"jobID"];

    [mapping mapRelationship:@"job" withMapping:[Job objectMapping]];

    [mapping connectRelationship:@"job" withObjectForPrimaryKeyAttribute:@"jobID"]; 
```

**我想知道是否有一种方法可以在没有额外的 jobID 属性的情况下做到这一点？** 我不想在 CoreData xcdatamodeld 中有 jobID 属性——它是多余的，因为关系涵盖了这一点。

此外，如果我重建 NSManagedObjects，我需要重新添加 jobID 属性，这很乏味。我不能告诉 restkit 通过 JSON 中的 job_id 键路径将 Room 连接到其相应的 Job 吗？

如果我删除该属性，该`mapKeyPath:@"job_id"`行并将最后一行更改为`[mapping connectRelationship:@"job" withObjectForPrimaryKeyAttribute:@"job_id"];`我得到

```
the entity Room is not key value coding-compliant for the key "job_id". 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:31:22.913

我会让 JobId 成为核心数据中的临时值，并编写一个自定义集并获取它。

该集合会将关系设置为 self.job= *methodToReturnObjectMatchingJobId*（这将由 rest kit 使用）

get 将返回 self.job.identifier

如果您不使用 mogenerator，我建议您查看一下它以满足您所有的核心数据需求。

以下是我如何做到的示例代码：

```
-(void) setClaimId:(NSNumber *)claimId{
     Claim *propertyClaim=[Claim listItemFromId:[claimId intValue] withContext:self.managedObjectContext]; 

    self.claim=propertyClaim; 
}
-(NSNumber*) claimId{

  return self.claim.referenceId;
} 
```

其中 listItemFromId 是一个简单的查询，它根据 id 返回对象。

# eclipse - Eclipse 中的选择命令弹出窗口

> ID：10370567
> 
> 赞同：1
> 
> 时间：2012-04-29T07:50:20.697
> 
> 标签：eclipse, api, command

我想问一下eclipse中是否存在一些功能，可以选择所有可用的命令，而不必记住所有的快捷方式。

类似于 sublime text 2 中的命令调色板。通过按 ctrl+shift+p (windows/linux) 获得一个输入弹出框，可以在其中选择所有可用的命令。

eclipse是否存在这样的功能，还是我应该自己开发？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-26T12:34:15.103

我只是偶然碰到了这个功能，但我抬头看看我是否想知道如何使用它。当我在没有关注任何特定视图的情况下启动 eclipse 后开始输入时，它看起来像是弹出来的……一旦我确定就会出现更多。

编辑：显然，当您第一次启动 Eclipse 时，焦点位于工具栏右上角的“快速操作”搜索框，您可以在此处开始输入命令名称以列出并让您选择好的 Sublime Text 样式。除了单击它之外，不知道如何快捷地进入该框，但显然有该功能。

编辑#2：[http](http://www.vogella.com/tutorials/EclipseShortcuts/article.html#shortcuts_overview) ://www.vogella.com/tutorials/EclipseShortcuts/article.html#shortcuts_overview将 Ctrl+3 描述为到达那里的快捷方式，在 Mac 上它转换为 Cmd+3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:25:52.693

我还没有找到任何东西，所以我开始开发自己的插件。

# xcode - 打开应用程序时如何自动播放声音？

> ID：10370571
> 
> 赞同：0
> 
> 时间：2012-04-29T07:51:36.730
> 
> 标签：xcode, xcode4

我是 xcode 的新手。我想在打开应用程序时自动播放声音。我将代码放在 viewDidLoad 但是当我打开其他视图并再次返回声音播放时。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:02:01.527

您可以在第一次播放后将布尔变量设置为 true。像这样的东西：

```
bool soundPlayed = FALSE;

- (void)viewDidLoad {
    //播放你的声音
    声音播放=真；
}
```

或者，在您的 AppDelegate.m 中，可能有这样的内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
```

你也可以尝试在那里做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T08:08:20.217

在`- (void)applicationDidBecomeActive:(UIApplication *)application`或 中进行`- (void) applicationDidFinishLaunching:(UIApplication*)application`。如果您在`didBecomeActive`应用程序中使用它，如果您将其设置为背景并再次打开它，它将播放声音。播放声音文件是这样的：

```
NSURL* musicFile = [NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                           pathForResource:@"click"
                                           ofType:@"caf"]];
AVAudioPlayer *click = [[AVAudioPlayer alloc] initWithContentsOfURL:musicFile error:nil];
[click play];
[click release]; 
```

# css - 子 CSS 样式不应该覆盖父样式

> ID：10370581
> 
> 赞同：0
> 
> 时间：2012-04-29T07:53:57.380
> 
> 标签：css, inheritance, browser

以下是真实 HTML 的简化版本：

```
<html>
<head>
<style type="text/css">
        h3 { background: blue; }
        p {background:grey; }
    </style>
</head>
<body>
    <h3>The paragraph below will style correctly.</h3>
    <p>
        As you can see, I am stylish.</p>
    <p>
        <h3>But this paragraph goes wrong.</h3>
        I am sad. I have no style.
    </p>
</body>
</html> 
```

在浏览器中拍打它（尝试过 Firefox 12 和 IE9），虽然第一段有灰色背景，但第二段没有。请注意，它甚至没有蓝色背景，样式已经丢失。据我了解，h3 的背景应该*只*影响 h3，而不是向上进入父级并影响它。

我错过了什么吗？注意上面是简化的。我想要段落中的标题，但如果没有样式错误，这似乎是不可能的。上面有错吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T07:57:05.553

在段落中包含标题是无效的标记，这就是样式被搞砸的原因。

您可以在此处验证您的标记：http: [//validator.w3.org/](http://validator.w3.org/)

# svn - 保护文件免受意外提交

> ID：10370583
> 
> 赞同：4
> 
> 时间：2012-04-29T07:54:27.313
> 
> 标签：svn

考虑一个 SVN 存储库，它有一个对生产非常重要的文件：

```
.
├── Makefile
├── README
├── config
│   └── system_configurations
│       └── IMPORTANT.conf
.... 
```

开发人员经常`IMPORTANT.conf`出于测试目的在本地进行更改，但不想意外提交。

有没有办法保护这个文件，以便提交它会显示某种警告或需要一些特殊的命令行参数？

我知道有一些架构解决方案（例如，`LOCAL_IMPORTANT.conf`在本地使用、符号链接等） - 我正在寻找来自 SVN 领域的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T08:10:26.627

也许使用SVN锁机制？

[http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html)

这可能无法提供足够的保护，因为您可以“窃取”其他用户的锁，但它会阻止用户提交对特定文件的更改，直到他们窃取您的锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T07:57:36.783

我会找到一种方法，您可以将 IMPORTANT.conf 完全排除在 SVN 之外，并让 CI 服务器将其从另一个位置复制到适当的位置——例如 IMPORTANT_Dev.conf、IMPORTANT_Prod.conf 等。

从技术上讲，您可以做一个 post-commit 钩子或 pre-commit 钩子来解析 IMPORTANT.conf 的提交详细信息，然后给开发者一巴掌，或者让提交失败，但使用源代码控制工具进行配置管理似乎有点过头了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T08:07:40.717

也许这不是最简单的解决方案，但绝对可配置且通用：

**svn hook（在这种情况下是预提交钩子）** 您可以自由使用不同的脚本语言，并且您可以使用预定义的提交注释来防止意外更改，例如：（
伪代码）

```
if(affected(important_file) && !commmentContains("IMPORTANT_FILE_CHANGE")) {
   return false;
} 
```

您可以在 Google 上找到很多文章，但这里有一个示例：
[http ://wordaligned.org/articles/a-subversion-pre-commit-hook](http://wordaligned.org/articles/a-subversion-pre-commit-hook)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T08:47:02.343

有很多可能的解决方案。我倾向于锁定（如 Khoi 所述）。在关键文件上设置 svn:needs-lock，然后让人们在他们实际需要更改的极少数情况下明确锁定它们。

[http://svnbook.red-bean.com/en/1.7/svn.advanced.locking.html](http://svnbook.red-bean.com/en/1.7/svn.advanced.locking.html)

另一种解决方案可能是通过 SVN 访问控制。SVN仓库如何访问？http 和 svn 访问都允许在路径上设置权限：

[http://svnbook.red-bean.com/en/1.7/svn.serverconfig.pathbasedauthz.html](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.pathbasedauthz.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T22:16:45.110

尝试忽略它

```
# ---------------------------------------------------------------------
#      Ignore all the .txt files in the /trunk/Blah/ directory
# ---------------------------------------------------------------------

# Go to the directory
cd trunk/Blah/              # The directory with the files

# Start editing the properties for the current directory
svn propedit svn:ignore .   # Opens an editor (SVN_EDITOR, EDITOR)

# Add the following value with a new line, save, and exit:
*.txt

# See that things worked
svn propget svn:ignore .    # So you can see the properties
svn status --no-ignore      # You should see an 'I' next to the ignored files

# Commit
svn commit -m "New Ignores" # You must commit the new property change

# ---------------------------------------------------------------------
#     Ignore a single file secret.txt in the /trunk/ directory
# ---------------------------------------------------------------------

# Go to the directory
cd trunk/

# Add just the single file to the current directories ignore list (like above)
# Note the dot at the end of the command is important
svn propset svn:ignore secret.txt .

# See that things worked
svn propget svn:ignore .    # Notice the single file was added to the list
svn status --no-ignore      # You should see an 'I' next to the ignored files

# Commit
svn commit -m "Its secret"  # You must commit the new property change 
```

当你想提交它时，使用

```
svn changelist ignore-on-commit {file-you-want-to-add} 
```

如果您想查找未版本控制的文件

```
svn status | grep ^\? | awk '{print $2}' 
```

# mysql - 2 根据日期进行SQL查询

> ID：10370585
> 
> 赞同：0
> 
> 时间：2012-04-29T07:54:34.940
> 
> 标签：mysql, sql

我有以下结构：

```
ID    CID    CAMPAIGN_ID   DATE(DATETIME)        DEVICE
1     123    88            2012-04-29 07:26:14   PC
2     123    88            2012-04-29 08:46:04   IPHONE
3     555    91            2012-04-29 08:36:04   IPAD 
```

我试图找到一种方法来构建一个查询，该查询将返回所有有效的 CID，这些 CID 首先使用 PC，然后在指定的活动 ID 下使用 IPHONE（根据指定的日期）。

在上面的示例中，CID 123 属于该类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:31:22.867

正如@JohannBlais 在他的评论中所说，您需要根据所需的标准将表格加入到自身中，然后过滤您选择的广告系列：

```
SELECT `t1`.`CID`
FROM
       `tbl` AS `t1`
  JOIN `tbl` AS `t2` ON (
        `t1`.`CID`            = `t2`.`CID`
    AND `t1`.`CAMPAIGN_ID`    = `t2`.`CAMPAIGN_ID`
    AND `t1`.`DATE(DATETIME)` < `t2`.`DATE(DATETIME)`
    AND `t1`.`DEVICE`         = 'PC'
    AND `t2`.`DEVICE`         = 'IPHONE'
)
WHERE `t1`.`CAMPAIGN_ID` = @specified_campaign; 
```

# linq-to-xml - 从 xml 文件 windows phone 获取重复节点

> ID：10370586
> 
> 赞同：1
> 
> 时间：2012-04-29T07:54:38.750
> 
> 标签：linq-to-xml, windows-phone-7.1, windows-phone

```
<top>
    <level1>
        <number>1</number>
    </level1>

    <level2>
        <number1>2</number>
        <number1>3</number>
    </level2>
</top> 
```

我知道如何获得单号：

```
int levels = Convert.ToInt32(xdoc.Descendants("level1")
                                 .Single().Element("number").Value); 
```

但是当我在 level2 中有重复数字时，我不知道如何同时获得 number1 和 number2（当然，如果我有 number3、number4 或更多，则代码相同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T09:52:36.177

```
var levels = (xdoc.Descendants("level1")
                  .Elements("number1")
                  .Select(e => (int)e)).ToList(); 
```

这将为您提供一个整数列表。如果你想要一个数组，而不是使用[`ToArray()`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)

# javascript - 使用纯 JavaScript 进行浏览器视口检测

> ID：10370591
> 
> 赞同：0
> 
> 时间：2012-04-29T07:55:40.027
> 
> 标签：javascript, browser, viewport

我正在使用纯 JavaScript 代码来检测浏览器视口，如下所示：

```
function setLocation(url) {
   if (window.location.href.indexOf(url) === -1)
      window.location = url;
}

function reloadPage(width) {
    if (width < 701) {
        setLocation("layout700.php");
    } else if (width < 900) {
        setLocation("layout900.php");
    } else {
        setLocation("layout1200.php");
    }
}

var done = false;

function ready() {
    if(!done) {
        done = true;
        reloadPage(document.width);
    }
}

if(window.addEventListener) {
    window.addEventListener('DOMContentLoaded', ready, false);
    window.addEventListener('load', ready, false);
} else if(window.attachEvent) {
    window.attachEvent('onload', ready);
}

window.onresize = function() {
    reloadPage(document.width);
}; 
```

**我的问题是：**如何定义宽度范围？

我的意思是......如果我使用 as 是否正确

```
function reloadPage(width) {
    if (width <= 701 && >= 480) {
        setLocation("layout700.php");
    } else if (width <= 900 && >= 701) {
        setLocation("layout900.php");
    } else {
        setLocation("layout1200.php");
    }
} 
```

**如果这不正确，那么正确的语法是什么？请帮忙。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:08:40.353

```
function reloadPage(width) {
    if( width >= 480 ) {
      if (width <= 701 ) {
        setLocation("layout700.php");
      } else if ( width <= 900 ) {
          setLocation("layout900.php");
      } else {
         setLocation("layout1200.php");
      }
   }
} 
```

你的代码有什么变化？
- 在逻辑运算符“ && ”之后你没有提到变量名，这是不正确的。
- 您无需在第二个条件中检查“width > 701”，因为如果它是 <= 701，则第一个条件已经满足。
编辑：添加了一个包装器 if() 来检查页面是否大于 480，因为您没有任何特定的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:02:50.130

从最大开始，到最小。此外，因为 setLocation 应该立即停止执行，所以您可以选择省略“其他”内容。最后，我假设如果宽度小于900，你应该去layout700，即使宽度小于700？似乎它最适合非常薄的浏览器。

```
if (width>1200) {
  setLocation("layout1200.php"); }
if (width>900) {
  setLocation("layout900.php"); }
setLocation("layout700.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T08:37:47.637

我很想借用Jeremy Keith 刚刚在博客中提到的这种 ( [http://adactio.com/journal/5429/](http://adactio.com/journal/5429/) ) 技术，并使用 content 属性来存储相关维度的正确页面 - 然后您可以使用媒体查询以区分各种大小。

您可能需要考虑的其他事情......正在使用 Device Atlas 或 WUFRL 来检测最终用户的浏览器并为他们提供正确的布局以开始 - 重定向对于最终用户来说体验很差，并且在移动设备上尤其慢。

# javascript - org/eclipse/wst/jsdt/core/JavascriptModelException

> ID：10370594
> 
> 赞同：1
> 
> 时间：2012-04-29T07:56:14.177
> 
> 标签：javascript, eclipse, jakarta-ee

有时我在eclipse中收到以下错误：

**org/eclipse/wst/jsdt/core/JavascriptModelException**

任何想法为什么会出现此错误以及如何解决它？

# objective-c - 如何将查询字符串从 xcode ios 应用程序传递到本地 html 文件

> ID：10370595
> 
> 赞同：1
> 
> 时间：2012-04-29T07:56:17.820
> 
> 标签：objective-c, ipad

我有以下代码将html文件加载到webview

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"htm"];
NSData *htmlData = [NSData dataWithContentsOfFile:filePath];
if (htmlData) {
[webView loadData:htmlData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:[NSURL URLWithString:@"localhost/..."]];
} 
```

但我想将数据或值作为查询字符串传递给调用 html 文件，以便我可以使用 java 脚本在 html 端接收它们。

# c++ - 在 C/C++ 中分配内存失败

> ID：10370596
> 
> 赞同：2
> 
> 时间：2012-04-29T07:56:18.607
> 
> 标签：c++, c

我有一个包含共享库的算法的 C 实现。共享库的性能在 C 和 C++ 中有很大的不同（在 C++ 中的性能要好得多）。*因此，我已将 C 实现 ( Imp-1* )的共享库部分更改为 C++ ( *Imp-2* )，同时保持其余部分相同。我分别在 Linux 中使用 gcc 和 g++编译了*Imp-1*和*Imp-2 。*在小型问题中，*Imp-1*和*Imp-2 的*表现完全相同。然而，在同一个大型问题中，*Imp-1*没有任何问题地解决它，*Imp-2*返回**std::bad_alloc**错误。有趣的是，当可用内存为 35GB 的内存使用量增加到 4GB 时，会发生此错误。

为什么会出现这个错误？（编译器、操作系统、编译器选项等）

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:38:57.067

看来您的 gcc 是 64 位编译器，而 g++ 是 32 位编译器。即使您在 32 位系统上运行，除非您使用 64 位编译器编译程序，否则您的程序无法充分利用 64 位寻址功能，如果您想要寻址超过 4GB，这将导致您遇到的 bad_alloc。

我确信您在 64 位上运行 32 位编译程序的原因是 4GB 限制。一般来说，内存被划分为用户/内核空间，在 32 位系统上，整个 4GB 是不可用的，通常在 2GB 和 3GB 之间。由于您可以处理整个 4GB，因此您似乎正在 64 位环境中运行 32 位程序。

# ruby-on-rails - 并发和 Mongoid

> ID：10370600
> 
> 赞同：2
> 
> 时间：2012-04-29T07:57:21.913
> 
> 标签：ruby-on-rails, mongodb, concurrency, mongoid

我目前正在尝试使用 Rails 和 Mongoid 开发一个简单的基于 Web 的游戏。我遇到了一些我不确定如何解决的并发问题。

问题是我不确定如何在 Mongoid 中原子地进行检查并根据它采取行动。

这是控制器代码相关部分的示例，可让您了解我正在尝试做什么：

```
battle = current_user.battle
battle.submitted = true
battle.save

if Battle.where(opponent: current_user._id, submitted: true, resolving: false).any?
  battle.update_attribute(:resolving, true)
  #Resolve turn 
```

两个用户之间发生了一场战斗，但我只希望其中一个线程运行#Resolve 轮次。现在，除非我完全关闭，否则两个线程都可以一个接一个地检查条件，但在将解析设置为 true 之前，因此两个线程最终都会运行“#Resolve turn”代码。

我将非常感谢有关如何解决此问题的任何想法。

然而，我越来越感觉以这种方式进行用户同步是相当不切实际的，而且完全有更好的方法。因此，我们将不胜感激对可以完成相同任务的其他技术的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T08:23:54.983

听起来您想要 mongo [findAndModify](http://www.mongodb.org/display/DOCS/findAndModify+Command)命令，它允许您以原子方式检索和更新一行。

不幸的是，mongoid 似乎没有公开 mongo api 的这一部分，所以看起来你必须降级到驱动程序级别来处理这一点：

```
battle = Battle.collection.find_and_modify(query: {oppenent: current_user._id, ...},
                                           update: {'$set' => {resolving: true}) 
```

默认情况下，返回的对象*不*包括所做的修改，但您可以根据需要打开它（通过 {:new => true}）

返回的值是原始散列，如果我的记忆正确，您可以`Battle.instantiate(doc)`取回一个`Battle`对象。

# java - Java - 如何播放带有循环点的 mp3

> ID：10370601
> 
> 赞同：0
> 
> 时间：2012-04-29T07:57:22.783
> 
> 标签：java, audio, libgdx

我在这里有点难过。我需要为我正在制作的游戏提供背景音乐，而且对于大多数歌曲，都会有一个开始部分，一旦完成播放就会进入一个循环（也称为介绍）。虽然这看起来有点简单，但我找不到任何可以做到这一点的东西。有人可以帮忙吗？谢谢！

编辑：搞砸了一个标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:15:14.483

首先，我推荐你使用OGG而不是MP3，性能更好。

您必须将音乐分成两首曲目，一首带有前奏，一首带有循环部分。在代码中，您必须将两个轨道初始化为两个不同的 Music 对象。将带有介绍曲目的对象中的循环设置为 false 并开始播放。现在，在游戏的每个循环中，您必须检查前奏曲目是否正在播放，如果没有，则开始播放循环（如果您可以通过其他方式停止音乐，您必须进行额外的检查，例如：暂停游戏）。

根据计算机的性能，这种变化几乎是不明显的或者是很小的差距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:01:05.620

***编辑：***

我的错，我看到 Java 并自动认为它是 Android。

尝试查看[此答案](https://stackoverflow.com/a/4786883/1056359)

# actionscript-3 - 如何在 AS3.0 中使用嵌套代码将对象添加到舞台

> ID：10370605
> 
> 赞同：1
> 
> 时间：2012-04-29T07:57:46.190
> 
> 标签：actionscript-3, movieclip

我正忙于使用 AS3.0 语言开发我的第一个应用程序。

我在 Flash Professional 中构建了完整的应用程序，它可以工作，但它缺乏性能。

现在，我在 Flash builder 中重新构建它，因此它更加优化，并且运行良好。

虽然我遇到了障碍。

在 Flash Pro 中，我很容易将影片剪辑添加到舞台，其中嵌套了代码，所以当我添加对象时，所有代码都像魅力一样工作。

在 Flash Builder 中，我不知道如何实现相同的效果......我非常接近完成，但不知道如何实现这一点。

我尝试过制作外部类，但没有编程背景，当我不知道从哪里开始时，很难找到解决方案......

简而言之：

如何使用纯 AS3 代码向舞台添加对象，我需要向我的舞台添加图形对象并向其添加简单的鼠标交互性。

任何回应、链接、对我的笑声，将不胜感激

谢恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:47:54.440

以下代码将向舞台添加一个影片剪辑，其中一条线从 0,0 到 100,100 绘制。前提是您在 Main 类中编写此代码。

var mc:MovieClip = new MovieClip();

addChild(mc) ;

mc.moveTo(0,0) mc.lineTo(100,100) ;

# c - 为什么这个程序不给出运行时错误？

> ID：10370607
> 
> 赞同：-1
> 
> 时间：2012-04-29T07:58:19.390
> 
> 标签：c

```
int main()
{
   int i,j,k;
   i=1;j=2;k=3;
   int *p =&k;
   *(p-1)=0;
   printf("%d%d%d",i,j,k);
   getch();
} 
```

输出为 1 2 3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T08:03:36.977

您的程序表现出未定义的行为，您正在执行的指针算术无效。

您只能对实际指向数组的指针进行指针运算，并且加法或减法的结果必须仍指向数组内部（或者如果您不打算取消引用，则指向数组的末尾）。

所以任何事情都可能发生，编译器可以为该代码生成任何感觉的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T08:04:05.167

`p-1`分配后不允许引用`&k`this 对你来说是一个无效的指针，并且使用它的行为是未定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T08:08:11.310

仅当您的杂散指针碰到引发该错误的某些东西时，才会发生运行时错误，例如某些受保护的内存或稍后将在某些计算中成为除数 (0) 的位置。

# javascript - YUI 拖放两个列表，将新列表保存到文件

> ID：10370612
> 
> 赞同：1
> 
> 时间：2012-04-29T07:58:59.747
> 
> 标签：javascript, list, drag-and-drop, yui

我想要做的是有两个可拖动的、可排序的列表，在我对它们重新排序后，我可以单击“保存”或“提交”，将新列表保存到单独的文件中。我是 YUI 的新手和 PHP 的新手，但我遇到的问题是试图弄清楚如何使用它们的新属性导出这些列表（类从“list1”更改为“list2”）。

我正在使用来自[YUI 博客](http://yuiblog.com/sandbox/yui/3.2.0pr1/examples/dd/list-drag.html)的模板，但它并没有完全提供信息。

这是示例中的相关代码（我所做的基本上是从模板中更改一些名称）：

```
<div id="play">
<ul id="list1">
    <li class="list1">Item #1</li>
    <li class="list1">Item #2</li>
    <li class="list1">Item #3</li>
    <li class="list1">Item #4</li>
    <li class="list1">Item #5</li>
</ul>
<ul id="list2">
    <li class="list2">Item #1</li>
    <li class="list2">Item #2</li>
    <li class="list2">Item #3</li>
    <li class="list2">Item #4</li>
    <li class="list2">Item #5</li>
</ul>
</div>

<script type="text/javascript">
YUI().use('dd-constrain', 'dd-proxy', 'dd-drop', function(Y) {
//Listen for all drop:over events
Y.DD.DDM.on('drop:over', function(e) {
    //Get a reference to our drag and drop nodes
    var drag = e.drag.get('node'),
        drop = e.drop.get('node');

    //Are we dropping on a li node?
    if (drop.get('tagName').toLowerCase() === 'li') {
        //Are we not going up?
        if (!goingUp) {
            drop = drop.get('nextSibling');
        }
        //Add the node to this list
        e.drop.get('node').get('parentNode').insertBefore(drag, drop);
        //Resize this nodes shim, so we can drop on it later.
        e.drop.sizeShim();
    }
});
//Listen for all drag:drag events
Y.DD.DDM.on('drag:drag', function(e) {
    //Get the last y point
    var y = e.target.lastXY[1];
    //is it greater than the lastY var?
    if (y < lastY) {
        //We are going up
        goingUp = true;
    } else {
        //We are going down.
        goingUp = false;
    }
    //Cache for next check
    lastY = y;
});
//Listen for all drag:start events
Y.DD.DDM.on('drag:start', function(e) {
    //Get our drag object
    var drag = e.target;
    //Set some styles here
    drag.get('node').setStyle('opacity', '.25');
    drag.get('dragNode').set('innerHTML', drag.get('node').get('innerHTML'));
    drag.get('dragNode').setStyles({
        opacity: '.5',
        borderColor: drag.get('node').getStyle('borderColor'),
        backgroundColor: drag.get('node').getStyle('backgroundColor')
    });
});
//Listen for a drag:end events
Y.DD.DDM.on('drag:end', function(e) {
    var drag = e.target;
    //Put our styles back
    drag.get('node').setStyles({
        visibility: '',
        opacity: '1'
    });
});
//Listen for all drag:drophit events
Y.DD.DDM.on('drag:drophit', function(e) {
    var drop = e.drop.get('node'),
        drag = e.drag.get('node');

    //if we are not on an li, we must have been dropped on a ul
    if (drop.get('tagName').toLowerCase() !== 'li') {
        if (!drop.contains(drag)) {
            drop.appendChild(drag);
        }
    }
});

//Static Vars
var goingUp = false, lastY = 0;

//Get the list of li's in the lists and make them draggable
var lis = Y.Node.all('#play ul li');
lis.each(function(v, k) {
    var dd = new Y.DD.Drag({
        node: v,
        target: {
            padding: '0 0 0 20'
        }
    }).plug(Y.Plugin.DDProxy, {
        moveOnEnd: false
    }).plug(Y.Plugin.DDConstrained, {
        constrain2node: '#play'
    });
});

//Create simple targets for the 2 lists.
var uls = Y.Node.all('#play ul');
uls.each(function(v, k) {
    var tar = new Y.DD.Drop({
        node: v
    });
});

}); 
```

# java - 由于原始 int 值而获取 OptionalDataException，但如何在 JAVA 中避免它

> ID：10370616
> 
> 赞同：3
> 
> 时间：2012-04-29T07:59:28.327
> 
> 标签：java, serialization, io, datainputstream

我的代码-

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

public class ObjectStreamExample {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Person person = new Person();
        person.setFirstName("Abhishek");
        person.setLastName("Choudhary");
        person.setAge(25);
        person.setHouseNum(256);
        ObjectOutputStream stream = null;
        try {
            stream = new ObjectOutputStream(new FileOutputStream(new File("Serialize.txt")));
            stream.writeUTF(person.toString());
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        }finally{
            if(stream != null)
                try {
                    stream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
        }

        ObjectInputStream input = null;

        try {
            input = new ObjectInputStream(new FileInputStream(new File("Serialize.txt")));

            Person person2 = (Person) input.readObject();
            System.out.println(person2.getFirstName());
            System.out.println(person2.getLastName());
            System.out.println(person2.getAge());
            System.out.println(person2.getHouseNum());
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }finally{
            if(input != null)
                try {
                    input.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
        }

    }

} 
```

和一个 Person bean 文件。

我得到了例外

> java.io.OptionalDataException at java.io.ObjectInputStream.readObject0(Unknown Source) at java.io.ObjectInputStream.readObject(Unknown Source) at com.practise.interview.nio.ObjectStreamExample.main(ObjectStreamExample.java:62)

这是因为我认为 -

> 当流中的下一个元素是原始数据时，尝试读取对象。在这种情况下，OptionalDataException 的长度字段设置为可立即从流中读取的原始数据的字节数，并且 eof 字段设置为 false。

但是如何避免它，因为我知道我设置了一个原始值，所以要避免。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T08:03:22.007

您正在编写 a`String`并尝试阅读 a `Person`。这不是序列化的工作方式。在序列化的上下文中，UTF 字符串被认为是原始数据，因为它不包含对象信息（类名、属性等），而仅包含字符串数据。

写出`person`对象本身，如果你想在`Person`之后阅读：

```
stream.writeObject(person); 
```

**附录：**如果编写 a 的`String`行为与其他任何 一样`Object`，您将得到 a`ClassCastException`代替，因为`String`无法将 转换为`Person`。无论如何，你写的和你读的不匹配导致了你得到的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T08:13:37.470

符合规范

异常指示由于未读取的原始数据或流中属于序列化对象的数据结束而导致对象读取操作失败。在两种情况下可能会抛出此异常：

*   当流中的下一个元素是原始数据时，尝试读取对象。在这种情况下，OptionalDataException 的长度字段设置为可立即从流中读取的原始数据的字节数，并且 eof 字段设置为 false。
*   试图通过类定义的 readObject 或 readExternal 方法读取数据的末尾。在这种情况下，OptionalDataException 的 eof 字段设置为 true，长度字段设置为 0。

    stream.writeUTF(person.toString()); // 问题就在这里

在这里，您以 UTF 形式编写，而在另一端，您以 Person 对象的形式阅读。你应该改变它 -

```
stream.writeObject(person); 
```

# mongodb - 在 MongoDB 中，我如何检索一个项目，然后添加到其中的嵌入文档？

> ID：10370617
> 
> 赞同：0
> 
> 时间：2012-04-29T07:59:35.457
> 
> 标签：mongodb, mongoose

我正在尝试做类似于以下的事情

[http://mongoosejs.com/docs/embedded-documents.html](http://mongoosejs.com/docs/embedded-documents.html)

但是，我尝试检索而不是新的 BlogPost，然后添加如下

```
function addComment(id, comment, callback) {
    Post.findOne(id, function(err, post) {
    post.comments.push(comment);
    });
} 
```

我越来越

```
TypeError: Cannot call method 'call' of undefined 
```

我究竟做错了什么？为了简化，我省略了保存代码，即使没有尝试保存它也会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T13:27:45.160

假设`id`参数是 ObjectId 或字符串（而不是查询对象），您应该调用`findById`而不是`findOne`.

# java - 等距平铺地图的 Graphics2D 多复合

> ID：10370622
> 
> 赞同：0
> 
> 时间：2012-04-29T08:00:58.547
> 
> 标签：java, bufferedimage, graphics2d

我正在开发一款游戏，该游戏使用基于等距平铺地图的行星表面（[示例](http://open-ig.googlecode.com/svn/trunk/open-ig/doc/message_history_screen_menu.png)）。每个平铺单元格都是一个小的 BufferedImage 元素。通过修改这些图像的像素（变暗和蓝移）来实现日夜循环，然后在每个建筑物上渲染窗口光照图（另一个静态 BufferedImage）。正确的 Z 顺序通过从左上角到左下角的顺序保持，并且只绘制瓷砖条。不幸的是，如果昼夜转换发生在非常快的游戏速度上，这种方法实际上会破坏图像的加速，并且渲染会变得非常慢。当前的解决方案是以大量内存增加为代价为每个图块缓存多个阴影。

用于此目的的 Graphics2D的 Java[组合模式是否可以，例如，绘制正常颜色的瓷砖，在其上绘制深色表面，然后应用光照贴图？](http://docs.oracle.com/javase/tutorial/2d/advanced/compositing.html)如何确保只有普通图块的像素会受到重新着色的影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:00:26.297

对我来说最快的方法如下所示：

1.  将带有纯图像的视图渲染到目标缓冲区
2.  用光照贴图图像在一秒钟内渲染视图`BufferedImage`
3.  `BufferedImage`使用自定义在目标缓冲区上绘制第二个`CompositeContext`

自定义`CompositeContext`将首先应用变暗+蓝移，然后乘以光照贴图值。

还要研究使用`VolatileImage`（例如参见[本文](http://www.javalobby.org/forums/thread.jspa?threadID=16840&tstart=0)）来利用硬件加速。此外，您可以考虑再次使用[LWJGL](http://www.lwjgl.org/)（一个完整的游戏开发库）或[JOGL](http://jogamp.org/jogl/www/)（Java OpenGL 绑定）来利用硬件加速。如果您从未做过任何 3D 编程，它可能看起来令人生畏或矫枉过正，但对于 2D 图形来说，它确实非常优雅和直接。

# html - CSS引号属性：它可以用于任何元素吗？

> ID：10370624
> 
> 赞同：2
> 
> 时间：2012-04-29T08:01:21.777
> 
> 标签：html, css

[W3Schools 展示了](http://www.w3schools.com/cssref/pr_gen_quotes.asp)这个 CSS 引号属性的例子：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<style type="text/css">
q:lang(en)
{
quotes: "«" "»" "'" "'";
}
</style>
</head>
<body>

<p><q>This is a <q>big</q> quote.</q></p>
<p><b>Note:</b> IE8 supports the quotes property only if a !DOCTYPE is specified.</p>
</body>
</html> 
```

我的疑问是，该`quotes`属性可以用于除`<blockquote>`and以外的任何元素`<q>`吗？（我想用它在我的打印样式表中清楚地显示链接。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T08:31:39.233

这是官方 W3C 页面：[http ://www.w3.org/TR/CSS21/generate.html#quotes-specify](http://www.w3.org/TR/CSS21/generate.html#quotes-specify)

虽然该`quotes`属性可以应用于所有元素，但该`<q>`元素是唯一支持它的元素 - 默认情况下。
例子：

```
q, span {quotes: "«" "»" "'" "'";} 
```

```
<span>Just a span</span>
<q>and a q</q> 
```

正如你所看到的（在[这个 jsFiddle](http://jsfiddle.net/B4Z26/)中），只有 q 得到引号。

但是，您可以使用另一个样式属性 ，`content`通过它您可以告诉任何要使用这些引号的元素！
例子：

```
q, span {quotes: "«" "»" "'" "'";}
span:before {content:open-quote;}
span:after {content:close-quote;} 
```

```
<span>Just a span</span>
<q>and a q</q> 
```

你会看到（在[这个 jsFiddle](http://jsfiddle.net/B4Z26/1/)中）跨度现在也得到了引号。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:08:40.233

国际海事组织编号 只有blockqotes / q标签。但你可以简单地检查它;）

# c++ - QTextStream 没有输出任何东西，我做错了什么？

> ID：10370630
> 
> 赞同：3
> 
> 时间：2012-04-29T08:02:12.460
> 
> 标签：c++, qt

我正在尝试使用 QTextStream 输出到标准输出，但除非我输入一个字符，否则什么都不会发生。我试过包括 cstdlib，这也不起作用。

注意：我尝试删除对我的标准输入 QTextStream 的所有引用并且输出工作正常。

```
 #include <QTextStream>

    QTextStream out(stdout);        
    out << "Please enter login username and password\n";
    QTextStream in(stdin);
    out << "username:";
    QString username = in.readLine();
    out << "password:";
    QString password = in.readLine(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T10:09:24.713

每次在流中推送某些内容后，您都必须手动刷新缓冲区：

```
 QTextStream out(stdout);
    out << "Please enter login username and password\n";
    out.flush();
    QTextStream in(stdin);
    out << "username:";
    out.flush();
    QString username = in.readLine();
    out << "password:";
    out.flush();
    QString password = in.readLine(); 
```

或者，附加`<< endl`也可以。

# visual-studio - 如何运行 Visual Studio 2010 的执行文件？

> ID：10370636
> 
> 赞同：0
> 
> 时间：2012-04-29T08:03:58.730
> 
> 标签：visual-studio, visual-studio-2010, visual-studio-2008

我写了一个 C++ 程序。它可以在调试模式下由Visual Studio运行，但是当我单击路径中的.exe文件时：C:\Users\user\Documents\Visual Studio 2010\Projects\NewProj\Debug，它会显示“无法打开文件”。我不知道为什么。我的程序从 .txt 文件中读取了一些文本，经过一些处理后，一些文本将输出到另一个文件。谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:08:37.637

尝试从调试模式切换到发布模式。然后从 Visual Studio 的菜单中：清理解决方案并重建解决方案。如果您遇到相同的错误，请尝试通过事件查看器查看更详细的异常。

# php - 第二个 cURL 不工作，目标是一个 servlet 并且不工作

> ID：10370641
> 
> 赞同：-1
> 
> 时间：2012-04-29T08:05:04.800
> 
> 标签：php, curl, geocode

```
 <?php 
```

在这一部分中，我提供了一个纬度和一个经度来反向地理编码。

```
 $ch = curl_init("http://maps.google.com/maps/api/geocode/json?latlng=39.784268,-98.393555&sensor=false");

 curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
 $return = curl_exec($ch);
 curl_close($ch);
 $geoOutput = json_decode($return, true);

 $data = current($geoOutput);
 echo $data; 
```

之后，我想将内容传递给 servlet，但出于示例目的，我嵌入了街道和邮政编码。生成的 url 如下所示，但如果你运行 url，curl 中不会发生任何事情。但是如果你复制粘贴在浏览器中的代码将成功。

```
 $urlse="http://136.145.116.30:8080/AccidentDetailsInserter?latitude=18.209&longitude=-67.139&frontal_damage=1&left_damage=1&right_damage=0&back_damage=0&smoke_detected=0&flipped=0&maxforce=7&roll=0&pitch=0&yaw=0&device_id=47&street=Calle Caobos&city= MayagÃ¼ez&state=PR&zip= 00680";

echo $urlse;

     $ch = curl_init();
      $timeout = 5;
      curl_setopt($ch,CURLOPT_URL,$urlse);
      curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
      curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
      $data = curl_exec($ch);
      curl_close($ch);
      echo $data; 
```

这里的输出是空白的

```
 ?> 
```

我试图写将端口指定为 8080 但没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:42:38.480

您的第二个 URL 包含应进行 urlencoded 的空格和其他未转义字符。如果您将其粘贴到浏览器中，浏览器会为您修复它。卷曲没有。

而不是`street=Calle Caobos`或其他此类参数，您应该发送`street=Calle%20Caobos`. 只需`urlencode()`在您正在构建的所有参数上使用。

编辑：这里缺少一些东西，这是一些工作代码：

```
$urlse="http://136.145.116.30/AccidentDetailsInserter?latitude=18.209&longitude=-67.139&frontal_damage=1&left_damage=1&right_damage=0&back_damage=0&smoke_detected=0&flipped=0&maxforce=7&roll=0&pitch=1&yaw=0&device_id=47&street=CalleCaobos&city=SanJuan&state=PR&zip=00926";
echo $urlse;

     $ch = curl_init();
      $timeout = 10;
      curl_setopt($ch,CURLOPT_URL,$urlse);
      curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
      curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
      curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
      curl_setopt($ch, CURLOPT_MAXREDIRS, 5);
      curl_setopt($ch, CURLOPT_PORT, 8080);
      $data = curl_exec($ch);
      curl_close($ch);
      echo $data; 
```

# c# - C#，从父引用访问子属性？

> ID：10370645
> 
> 赞同：4
> 
> 时间：2012-04-29T08:06:07.920
> 
> 标签：c#, inheritance

```
public void GetProps(Parent p){

   // want to access lots of child properties here
   string childProp1 = p.prop1;
   bool childProp2 = p.prop2;
   bool childProp3 = p.prop3;

} 
```

但是编译器抱怨说

> “父级不包含定义 prop1”

该函数将采用父类的不同子类型。

所有的子类都有这个

```
public override string prop1 { get; set; } 
```

有没有办法做到这一点？

**编辑：** 使问题更清楚

我目前有一个巨大的 if-elseif 我做类似的事情

```
if(p is Child0){
      Child0 ch = p as Child0; 

       // want to access lots of child properties here
       string childProp1 = ch.prop1;
       bool childProp2 = ch.prop2;
       bool childProp3 = ch.prop3;

}else if(p is Child1){
      Child1 ch = p as Child1; 

       // want to access lots of child properties here
       string childProp1 = ch.prop1;
       bool childProp2 = ch.prop2;
       bool childProp3 = ch.prop3;

}else if(...// and many more 
```

现在我想删除所有冗余代码并创建一个可以处理所有这些的函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T08:08:36.363

如果*所有*子类都需要属性（但实现不同），则应在基类 ( ) 中将它们声明为*抽象*`Parent`属性，然后在子类中实现它们。

如果某些派生类没有这些属性，那么您希望您的 current`GetProps`做什么？

编辑：如果您使用的是 C# 4，并且您*肯定*无法获得更好的类设计（父类声明属性），您可以使用动态类型：

```
public void GetProps(Parent p) {
    dynamic d = p;
    string childProp1 = d.prop1;
    bool childProp2 = d.prop2;
    bool childProp3 = d.prop3;
    // ...    
} 
```

不过，我会把这当作最后的手段......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-30T09:51:00.747

万一有人需要它的解决方案，只需将您收到的类转换为参考，如下所示：

```
public void GetProps(Parent p){
..
  string childProp1 = ((ChildClass)p).prop1;   
...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T08:53:14.697

正如我从您的问题中了解到的那样，您想从父类的对象访问子类成员。

OOP 中不允许这种行为。Jon Skeet 建议的一种方法是创建一个抽象基类并在子类中实现所需的成员。

其他方式可以是使用基构造将所需的值分配给派生类构造函数中的基类成员。我不知道这是否会解决您的问题。但请考虑以下代码段：

```
 public class BaseClass
{
    public string FirstName = "Base Class";
    public string LastName = "Base Class";
}

public class DerivedClass : BaseClass
{
    public DerivedClass()
    {
        base.LastName = "Derived Class";
    }
}

internal class Tester
{
    private static void Main(string[] args)
    {
        BaseClass objBaseClass = new BaseClass();
        Console.WriteLine("First Name : " + objBaseClass.FirstName);
        Console.WriteLine("Last Name : " + objBaseClass.LastName);

        DerivedClass objDerivedClass = new DerivedClass();
        Console.WriteLine("First Name : " + objDerivedClass.FirstName);
        Console.WriteLine("Last Name : " + objDerivedClass.LastName);

        BaseClass objBaseDerivedClass = new DerivedClass();
        Console.WriteLine("First Name : " + objBaseDerivedClass.FirstName);
        Console.WriteLine("Last Name : " + objBaseDerivedClass.LastName);

        Console.ReadKey();
    }
} 
```

O/P 名字：基类

姓氏：基类

名字：基类

姓氏：派生类

名字：基类

姓氏：派生类

让我知道，如果它有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T11:44:04.630

如果我对您的理解正确（-我假设`Parent`它是 etc 继承的基类`Child0` `Child1`。）-您只是缺少`prop1`父级中的声明。它不会妨碍它，它只会被覆盖。

查看此示例（返回“子字符串”）并注意`child`传递给需要`ParentClass`实例的方法。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        ChildClass child = new ChildClass();
        Text = ParentClass.mymethod(child);
    }
}

class ParentClass
{
    public virtual string s { get { return "parent string"; }  }

    public static string mymethod(ParentClass parent)
    {
        return parent.s;
    }
}

class ChildClass : ParentClass
{
    public override string s { get { return "child string"; }  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T08:44:55.140

如果该属性是在父子类之间的中间类中定义的，并且您在设计时没有对该中间类的引用，那么您可以使用反射来获取该属性。但听起来您应该使用最相关的子父级而不是简单的父级。

# html - 用于将 google 组附加到我的网站的 HTML 代码

> ID：10370647
> 
> 赞同：0
> 
> 时间：2012-04-29T08:06:21.067
> 
> 标签：html, web

我想在我的网站上附加一个 google 组。有没有办法做到这一点？请帮忙。我需要 HTML 代码将此组附加到我的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:23:24.510

您可以使用 iframe 和一些 JavaScript

```
<iframe id="forum_embed"
 src="javascript:void(0)"
 scrolling="no"
 frameborder="0"
 width="900"
 height="700">
</iframe>

<script type="text/javascript">
 document.getElementById("forum_embed").src =
  "https://groups.google.com/forum/embed/?place=forum/forum-name" +
  "&showsearch=true&showpopout=true&parenturl=" +
  encodeURIComponent(window.location.href);
</script> 
```

其中 forum-name 是您的 Google 群组的名称

[在此处](http://support.google.com/groups/bin/answer.py?hl=en&answer=1191206)阅读有关它的更多信息

请参阅此[jsFiddle 示例](http://jsfiddle.net/jackdent/yV9Vm/)以了解组前站点

# windows - 'handle' 是 WinAPI 中指针的同义词吗？

> ID：10370651
> 
> 赞同：3
> 
> 时间：2012-04-29T08:07:04.577
> 
> 标签：windows, winapi, handle

我最近一直在阅读一些关于用 C++ 进行 Windows 编程的书籍，我对 WinAPI 中一些反复出现的概念有一些令人困惑的理解。例如，有很多以句柄关键字'H'开头的数据类型，这些应该像指针一样使用吗？但是还有其他以指针关键字“P”开头的数据类型。所以我猜不是。那么究竟是什么呢？为什么指向某些数据类型的指针首先被赋予单独的数据类型？例如，PCHAR 可以很容易地设计为 CHAR*？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T10:48:57.067

句柄曾经是 Windows 早期版本中的指针，但现在不再是。将它们视为“cookie”，一个允许 Windows 找回之前分配的资源的唯一值。就像 CreateFile() 返回一个新句柄一样，您稍后在 SetFilePointer() 和 ReadFile() 中使用它从同一个文件中读取数据。和 CloseHandle() 清理内部数据结构，同时关闭文件。这是一般模式，一个api函数创建资源，一个或多个使用它，一个销毁它。

是的，以 P 开头的类型是指针类型。是的，它们是多余的，如果您自己使用 * 也一样有效。实际上不确定为什么 C 程序员喜欢声明它们，我个人认为它会降低代码的可读性，我总是避免使用它们。但请注意复合类型，如 LPCWSTR，“指向常量宽字符串的长指针”。L 不再意味着任何东西，它可以追溯到 16 位版本的 Windows。但是指针、常量和宽很重要。我*确实*使用了那个 typedef，不这样做会冒未来可移植性问题的风险。这是这些 typedef 存在的核心原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T08:12:57.540

句柄与指针相同，仅在两者都标识特定项目的情况下。显然，指针是项目的地址，因此如果您知道它的结构，您就可以开始获取项目中的字段。句柄可能是也可能不是指针 - 基本上，如果它是指针，您不知道它指向什么，因此您无法进入字段。

考虑句柄的最佳方式是，它是系统中某物的唯一 ID。当您将它传递给系统中的某个东西时，系统将知道将它转换为什么（如果它是指针）或如何处理它（如果它只是一些 id 或索引）。

# php - 使用 PHP , MYSQL 编写和更新 XML 文件

> ID：10370652
> 
> 赞同：0
> 
> 时间：2012-04-29T08:07:11.503
> 
> 标签：php, mysql, xml

我正在尝试根据下拉列表中的用户选择在此处创建一个 XML 文件，具体取决于我的选择；我正在运行查询以从 phpmyadmin 获取特定数据，然后我尝试将此数据放入XML 文件，但我得到的只是一个空的 XML 文件！

另外，我想知道如何使用 PHP 在 XML 标签中添加描述？比如这个

```
<Exam Number="2" Date="3/7/1433" Time="2 hour" Start="8:30 am" /> 
```

PHP代码：

```
<?php
 $connectdb = mysql_connect('localhost','root','sara') or die ("Not Connect");
 if (!$connectdb) die('Could not connect :'. mysql_errno());
 echo "<div align='center' style='direction: ltr' style='position: relative'>
 Choose the exam ID that you want to create it: <br />
  <form action='createxam.php' method='post'> <select name=\"examID\">
  <option value=\"0\">Exam ID </option> \n";
   $selestdb  = mysql_select_db('iexa', $connectdb) or die ("not selected database");
    $qu = mysql_query("SELECT E_No FROM question_bank ") or die ("mysql error");
    while ($row = mysql_fetch_assoc($qu))
    echo "<option value=\"{$row["E_No"]}\">{$row["E_No"]}</option>\n";
  $examID = $_REQUEST['examID'];
    echo "</select> </div> <br /> ";

    echo "The date of the exam : <textarea name:'Date'></textarea><br />
    It will start on (In 24 hours format) : <textarea name:'Start'></textarea><br />
    The time of the exam : <textarea name:'Time'></textarea><br />";
    echo "<div align='center' style='direction: ltr' style='position: relative'>         <input type='submit' value='Create Exam' />
    </form></div>";
    mysql_close($connectdb);
    ?> 
```

写入文件：

```
 <?php
      $connectdb = mysql_connect('localhost','root','sara', true ) or die ("Not Connect");
     if (!$connectdb)
     {
       die('Could not connect :'. mysql_errno());
     }
     $selestdb  = mysql_select_db('iexa', $connectdb) or die ("not selected database");

     $Date = array();
     $Start = array();
     $Time = array();
     $Date['Date']= mysql_real_escape_string($_POST['Date']) ;
     $Time['Time']= mysql_real_escape_string($_POST['Time']) ;
     $Start['Start']= mysql_real_escape_string($_POST['Start']) ;

     if (isset($_POST['examID'])) {
         $examID = $_POST['examID'];
         }

     $query ="INSERT INTO exam (Exam_Number ,Date ,Start ,Time )
     VALUES
      ('$examID', '{$Date['Date']}','{$Start['Start']}','{$Time['Time']}')
      ";
      $cors =mysql_query("SELECT C_ID FROM question_bank WHERE E__No = '$examID'");
      $upd ="UPDATE exam SET C_ID=$cors
       WHERE Exam_Number='$examID'";
        $Exams=mysql_query("SELECT * FROM question_bank WHERE E_No=$examID ");

        $doc = new DOMDocument();
        $doc->formatOutput = true;
        $r = $doc->createElement( "Exams" );
        $doc->appendChild( $r );
              $sql=mysql_query("SELECT * FROM question_bank WHERE E_No=$examID ");
       while ($col = mysql_fetch_assoc($sql)){
       foreach( $Exams as $Exam )
       {
       $b = $doc->createElement( "Exam" );

       $E_No = $doc->createElement( "E_No" );
       $E_No->appendChild(
       $doc->createTextNode( $Exam['E_No'] )
                );
       $b->appendChild( $E_No );

                $C_ID = $doc->createElement( "C_ID" );
       $C_ID->appendChild(
       $doc->createTextNode( $Exam['C_ID'] )
       );
       $b->appendChild( $C_ID );

       $Question = $doc->createElement( "Question" );
       $Question->appendChild(
       $doc->createTextNode( $Exam['Question'] )
       );
       $b->appendChild( $Question );

       $r->appendChild( $b );
       }
     }

     echo $doc->saveXML();
       $doc->save("mytry.xml");

     if (!mysql_query($sql,$connectdb))
            {
                    die ('Error :'.mysql_error());
            }
     echo "The Exam is created !!";
     echo '  <br />
     <a href="exam-xml.php" >Create Another Exam</a> <br />
     <a href="Instructor.htm">Home</a>
     ';
     mysql_close($connectdb);
     ?> 
```

这是我要创建的 XML 文件：

```
<?xml version="1.0"?>
<Exams>

 <Exam>
  <Exam Number="1" Date="21/6/1433" Time="1 hour" Start="10:00 am" />
  <Course Name="Graduation Project" Code="CS 492" Credit="3" />
  <Questions ID="1" Type="Multiple-choice" Question="Who has to complete the     Graduation Project?" Choice1="All Student." Choice2="Some student." Choice3="Teacher."     Choice4="Doctor." Correct="All Student." />
  <Questions ID="2" Type="Multiple-choice" Question="When do students begin to work on the Graduation Project?" Choice1="After 2 years from studing." Choice2="Last year." Choice3="High schools" Choice4="Befoer graduation year." Correct="High schools" />
  <Student ID="2853641" Name="Maram Abdullah" password="910" />
  <Student ID="2853615" Name="Maha Al-soyan" password="911" />
 </Exam>

 <Exam>
  <Exam Number="2" Date="3/7/1433" Time="2 hour" Start="8:30 am" />
  <Course Name="Computer Graphics" Code="CS 447" Credit="3" />
  <Questions ID="1" Type="Multiple-choice" Question="........ may be defined as a pictorial representation or graphical representation of objects in a computer." Choice1="GUI" Choice2="Computer graphics." Choice3="represent graphics" Choice4="Computer representation." Correct="Computer graphics." />
  <Questions ID="2" Type="Multiple-choice" Question="What are the advantages of laser printers?" Choice1="High speed, precision and economy." Choice2="Cheap to maintain." Choice3="Quality printers." Choice4="All of the above." Correct="All of the above." />
  <Student ID="2853611" Name="Ro'a Al-turki" password="912" />
  <Student ID="2850742" Name="Sara Al-hejily" password="913" />
 </Exam>

</Exams> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:15:10.317

XML 不是一门火箭科学。
它与 HTML 或任何其他格式的文本一样原始。
能够创建 HTML 表格的人肯定也能够创建 XML。不需要花哨的 DOM 解析器。输出简单的文本。

只需获取所需的 XML 作为示例，并以与创建 HTML 相同的方式创建它。

```
echo "<exam>".htmlspecialchars($exam)."</exam>\n"; 
```

并不比

```
echo "<td>".htmlspecialchars($exam)."</td>\n"; 
```

# c++ - 两个指向同一个地址的指针

> ID：10370653
> 
> 赞同：8
> 
> 时间：2012-04-29T08:07:23.267
> 
> 标签：c++, c, pointers

当两个指针指向同一个地址时会发生什么？这会导致安全问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T08:08:07.817

`delete`事实本身是可以的，但是如果您调用其中一个指针并在之后尝试使用另一个指针，您将遇到未定义的行为：

```
int* x = new int(5);
int* y = x;
delete x;
//y is a dangling pointer 
```

如果您遇到必须使用多个指向同一内存地址的指针的情况，您应该查看**智能指针**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T10:22:33.580

如果两个指针的类型相同，则没有问题：

```
int a = 42;
int *p = &a
int *q = p;
*p = 3145;   // no problem, a and *q are now also equal 3145 
```

如果两个指针都属于不同类型（除了`char *`）并指向同一个对象，则取消引用其中一个指针是未定义的行为。

```
float a = 42.0f;
float *p = &a;
int *q = (int *) p;  // we assume pointer is correctly aligned
*q = 0;              // undefined behavior, it breaks aliasing rules 
```

这些规则称为 C 指针别名规则。[您可以在第 6.5p7 段的n1570.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)中找到 C 别名规则列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T08:13:58.140

拥有多个指向同一地址的指针是安全的，但请确保您知道如果使用删除内存`delete`或原始变量超出范围，则对它的进一步访问将是未定义的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-29T08:18:07.853

要看：

**对于经典（非智能）指针**：您可以有多个指针指向同一个内存位置，但操作该位置会渗透到所有指针。当使用其他指针时，删除/释放一个指针的存储会导致未定义的行为。请注意，最佳做法是在释放存储空间后将指针设为 NULL 以防止双重删除，并且在使用多个指针时，这在实际操作上是不合理的。

## 智能指针

**Auto_Pointers(C++98)**：C++ 模板类实现提供了一种机制，允许一个且只有一个指针指向一个内存位置。通常，由于这些指针作为对象在堆栈上实现，当它们超出范围时，地址将被自动释放。但是将一个指针复制分配给另一个指针会使另一个指针不可用。

**Shared_Pointers(C++2003 TR1)**：Boost 库提供了共享指针，它有一个引用计数，它决定了何时可以释放对象。这比 auto_ptrs 更好，因为您可以让多个可用指针共享相同的内存位置。

**Unique_Pointers(C++11)**：类似于 Auto_pointers，但继承了所有权转移的概念，其中不暴露赋值和复制构造函数。相反，实现了一个 move 方法以更清楚地说明意图是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T08:17:07.167

两个对象都指向相同的堆地址。

当您将取消分配内存时，它可能会导致指向相同地址的其他对象出现问题。

# java - 关于核心java可序列化接口的简单查询

> ID：10370655
> 
> 赞同：4
> 
> 时间：2012-04-29T08:07:40.647
> 
> 标签：java, serialization, interface

谁能告诉我什么是可序列化接口的用途，我用谷歌搜索并阅读了很多java内部使用它的书籍，但没有解释更多，但是当我们看到可序列化接口时，它是一个标记接口，什么都没有在它的主体中，如果我们不实现这个接口，那么我们就不会序列化对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T10:06:38.820

该[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口只是一个标记接口。这是什么意思？好吧，要序列化一个对象，您可以使用如下代码：

```
final Foo interestingObject = new Foo(42);
final ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(file));

oos.writeObject(interestingObject);
oos.close(); 
```

当您将对象传递给 时[`ObjectOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)，它使用反射来做几件事。首先，它检查传入的对象是否为 implements `Serializable`。如果没有，则[`writeObject()`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html#writeObject%28java.lang.Object%29)抛出`NotSerializableException`. 然后，在`ObjectOutputStream`确定对象应该被序列化后，它会反射性地检查对象的内容，递归地序列化每个字段（`static`字段和标记为的字段除外`transient`）。

所以你看，接口是指示这个对象*应该*被序列化的一种方式。如果您没有明确说可以序列化该类，则`ObjectOutputStream`不会尝试对其进行序列化。但是因为 an`ObjectOutputStream`使用反射来检查相关对象的内部结构，所以`Serializable`接口不需要指定任何方法——`ObjectOutputStream`不需要调用*特定的方法*。

（无论如何，那是简化的版本——还有一堆方法可以定义特定的签名，如果它们存在，序列化机制会调用它们。如果你有兴趣，请阅读[`ObjectOutputStream`Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T10:07:29.537

答案就在您的问题中-“它是一个标记界面”。这只是序列化机制的一个提示，它验证对象图中的所有内容是否存在，`Serializable`并在找到不存在的内容时抛出异常。原因是，虽然基本上每个对象*都*可以序列化，但并不是所有的东西都*可以*序列化（例如，`Socket`存储本机文件描述符——如果你要序列化它，发送到另一台机器，然后在那里反序列化，那绝对没用）。因此，应该由开发人员决定应该序列化什么，开发人员通过实现来体现该决定`Serializable`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T12:38:07.020

我想用实际的例子来解释你，我也和你一样，我用谷歌搜索了很多次以完美地理解序列化。

首先考虑一个我想开发应用程序的场景，在该场景中它不会显示在线用户。我正在使用tomcat集群环境。

我所做的是我在用户登录时创建了地图，我将在地图中插入他的用户 ID 并遍历地图以显示在线用户列表。现在主要问题是第一个用户通过tomcat 1登录，第二个用户通过tomcat 2登录。在这种情况下，由jvm创建的tomcat 1和tomcat 2中有两个不同的map对象，所以我将无法显示没有用户正常上网。

解决上述问题 1.我将映射写入可序列化文件并检查映射中是否不存在数据我将写入文件，如果有数据则我将从文件中读取数据并放入映射中。

可序列化的主要用途是在网络上发送数据时将对象状态转换为文件。

# jquery - 如何计算用户使用jquery刷新页面的次数

> ID：10370662
> 
> 赞同：-5
> 
> 时间：2012-04-29T08:08:22.847
> 
> 标签：jquery, refresh, reload, page-refresh

我需要计算用户使用 jquery 刷新特定页面的次数。该页面应该有一个静态计数器，每次重新加载页面时都会增加，如果用户导航到上一页的另一个页面计数器应该重置为零，我不想使用会话，但只使用 jquery 来执行此操作。请帮助。

谢谢我提前...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:22:19.517

有一些黑客可以做到这一点。我首先要问您真正要解决的用户问题是什么，因为该解决方案有点难看。

在伪代码中，这就是你要做的：

1.  当您的页面加载时，获取 reloadCnt 的 cookie 并获取带有 lastActive 时间戳的 cookie。
2.  如果时间戳比 X 分钟前长，则从 1 开始 reloadCnt（该页面在此页面加载之前不仅处于活动状态）。
3.  如果 reloadCnt > 1，则将新计数以当前时间作为时间戳写回 cookie。
4.  然后，在您的页面中，启动一个每 Y 分钟运行一次的计时器（其中 Y 约为 X 的一半）。在该计时器中，不断更新上次重新加载的 cookie 时间，但不更新计数。这个时间戳告诉你下一次重新加载是你刚刚有一个活动页面，还是浏览器在一段时间内没有加载页面。

一般的想法是你在 cookie 中保留一个 reloadCnt 并且每次都增加。那部分很容易。

您还在 cookie 中保留时间戳。时间戳本质上包含页面上次在此浏览器中运行的时间（因为页面不断更新时间戳）。如果时间戳是旧的，那么用户的浏览器不只是显示这个页面，所以这一定是一段时间内的第一个。如果时间戳是新的，那么这可能只是另一个重新加载。

# objective-c - UIImage dealloc 永远不会被调用

> ID：10370663
> 
> 赞同：1
> 
> 时间：2012-04-29T08:08:25.787
> 
> 标签：objective-c, ios, memory, memory-management, uiimage

我试图弄清楚为什么我的应用程序使用大量内存，然后在多次内存警告后崩溃。Instrument VM Tracker 显示它使用 ~30Mb 作为脏内存。分配显示 10-15 Mb 不是那么多。一旦应用程序处理显示大量图像（缩略图），我就认为图像是我应该看的。我不使用标准的 UIImage imageNamed 方法，而是使用 imageWithData 并进行缓存。当系统发送内存警告时，我会清理缓存存储。为了确保我创建的图像在不再需要时被销毁，我将 UIImage 子类化并覆盖了 imageWithData、release 和 dealloc 方法。我可以看到 imageWithData 被调用，但 release 和 dealloc 从未被调用。我就是这样做的：

BaseUIimage.h

```
@interface BaseUIimage : UIImage

@end 
```

BaseUIimage.m

```
#import "BaseUIimage.h"

@implementation BaseUIimage

+ (id)imageWithData:(NSData *)data {
    NSLog(@"UIImage imageWithData");
    return [UIImage imageWithData:data];
}

- (id)retain {
    NSLog(@"UIImage retain: %d", [self retainCount]);
    return [super retain];
}

- (oneway void)release {
    NSLog(@"UIImage release: %d", [self retainCount]);
    [super release];
}

- (id)autorelease {
    NSLog(@"UIImage autorelease: %d", [self retainCount]);
    return [super autorelease];
}

- (void)dealloc {
    NSLog(@"UIImage deallocated");
    [super dealloc];
}

@end 
```

我的缓存代码：

。H

```
#import "BaseUIimage.h"

@interface UIImageCached : BaseUIimage

// CACHE
+ (NSMutableDictionary*) cache;
+ (void) cleanCache;
+ (UIImageCached *)imageNamed:(NSString *)imageName;
+ (UIImageCached *)retinaImageNamed:(NSString *)imageName;
+ (UIImageCached *)imageFromPath:(NSString *)imagePath; 
```

.m

```
#import "UIImageCached.h"

@implementation UIImageCached

static NSMutableDictionary *data;

+ (NSMutableDictionary*) cache {
    if (data == nil)
        data = [[NSMutableDictionary alloc] initWithCapacity:150];
    return data;
}

+ (void) cleanCache {
    NSLog(@"Cache cleaned images: %d", data.count);

    for (BaseUIimage *image in data) {
        NSLog(@"image rc: %d", [image retainCount]); // always prints rc = 1
    }

    [data removeAllObjects];
}

+ (UIImageCached *)imageFromPath:(NSString *)imagePath {
    UIImageCached *image = (UIImageCached*)[self.cache objectForKey:imagePath];
    if (image == nil) {
        NSData *imageData = [[NSData alloc] initWithContentsOfFile:imagePath options:NSDataReadingMappedIfSafe error:nil];
        image = (UIImageCached*)[UIImageCached imageWithData:imageData];
        [imageData release];

        if (image) {
            [self.cache setObject:image forKey:imagePath];
            //NSLog(@"new cached image: #%d", self.cache.count);
        } else {
            //NSLog(@"can't cache image: #%d", self.cache.count);
        }
    }

    return image;
}

+ (UIImageCached *)imageNamed:(NSString *)imageName {
    NSString *extension = [imageName pathExtension];
    NSString *fileName = [imageName stringByDeletingPathExtension];
    NSString *fileLocation = [[NSBundle mainBundle] pathForResource:fileName ofType:extension];
    return [self imageFromPath:fileLocation];
}

+ (UIImageCached *)retinaImageNamed:(NSString *)imageName {
    UIImageCached *image = (UIImageCached*)[self.cache objectForKey:imageName];
    if (image == nil) {
        NSString *extension = [imageName pathExtension];
        NSString *fileName = [imageName stringByDeletingPathExtension];

        float s = 1.0;

        // retina filename support
        if(!isIPAD && [[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
            s = [[UIScreen mainScreen] scale];
            if (s > 1)
                fileName = NSTR2(@"%@%@", fileName, @"@2x");            
        }

        NSString *fileLocation = [[NSBundle mainBundle] pathForResource:fileName ofType:extension];

        NSData *imgData = [[NSData alloc] initWithContentsOfFile:fileLocation options:NSDataReadingMappedIfSafe error:nil];

        BaseUIimage *tmpImage = [[BaseUIimage alloc] initWithData:imgData];

        [imgData release];

        image = (UIImageCached*)[UIImageCached imageWithCGImage:tmpImage.CGImage 
                                                    scale:s 
                                              orientation:UIImageOrientationUp];        

        [tmpImage release];

        if (image) {
            [self.cache setObject:image forKey:imageName];
            //NSLog(@"-- CACHE: new cached image: #%d", self.cache.count);          
        } else {
            NSLog(@"-- CACHE: can't cache image: %@", fileLocation);
        }
    } else {
        //NSLog(@"-- CACHE: read cached image");
    }
    return image;
}

@end 
```

为什么从不调用 release 和 dealloc？这是否意味着我创建的 UIImage 实例没有被释放，这就是虚拟内存增长的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T13:56:37.267

Dave Wood 几乎是对的（他的实现仍然会创建一个 UIImage）。问题是

```
[UIImage imageWithData:data]; 
```

将创建一个 UIImage 而不是您希望它创建的子类。要对此进行测试，请尝试以下 imageWithData 实现：

```
+ (id)imageWithData:(NSData *)data {
    NSLog(@"UIImage imageWithData");
    UIImage *im = [UIImage imageWithData:data];
    NSLog(@"%@",[im class]);
    return im;
} 
```

NSLog 会输出 UIImage。不是你需要的。我建议以下实现：

```
+ (id)imageWithData:(NSData *)data {
    NSLog(@"UIImage imageWithData");
    BaseUIimage *im = [[BaseUIimage alloc] initWithData:data];
    return [im autorelease];
} 
```

这将创建 BaseUIimage 类的图像，从而表现出您的预期。干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T08:20:13.357

您错误地创建了子类。在这里的代码中：

```
@implementation BaseUIimage

+ (id)imageWithData:(NSData *)data {
    NSLog(@"UIImage imageWithData");
    return [UIImage imageWithData:data];
}

... 
```

你没有得到 BaseUIimage 的实例，你得到的是一个常规的 UIImage，这意味着你覆盖的 release/dealloc 等不会被调用，因为它们不是 UIImage 类的一部分。

您需要将该功能更改为：

```
@implementation BaseUIimage

+ (id)imageWithData:(NSData *)data {
    NSLog(@"UIImage imageWithData");
    return [super imageWithData:data];
}

... 
```

这将返回您的 BaseUIimage 类的实例。现在您将能够看到您的重写方法被调用。

# javascript - 基于 Javascript 的数据表

> ID：10370665
> 
> 赞同：1
> 
> 时间：2012-04-29T08:08:34.133
> 
> 标签：javascript, jquery

我正在实现一个 javascript 客户端 API，它连接到 REST 并以 xml/json 的形式检索 SQL 查询的结果。我想将此信息加载到一个结构中，使我可以轻松地从 javascript 位操作数据，即根据列名、查找等对信息进行排序......我注意到上面的许多解决方案都是基于在正在生成/操作的 HTML 表上，但是我不想以任何方式绘制该表，只能在本地查询它。

它需要用作结构化的本地数据存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:12:41.760

像框架和 NoSQL 数据库那样做——基于文档的数据库。它基本上使用数组和对象文字作为页面中的存储介质。当你需要持久化它时，用`JSON.stringify()`它把它变成一个字符串并存储在本地存储中，稍后再解析它`JSON.parse()`

至于对数据进行排序和排序等操作，您可以自己制作，或者使用其他已经具有功能的框架来完成这项工作。

我建议研究[BackboneJS](http://documentcloud.github.com/backbone/)以及它如何处理它的模型和集合。此外，您可能还想看看[MongoDB](http://www.mongodb.org/)，它是 NoSQL、JSON 格式的数据库。

# c# - 在组合框中选择的枚举到字符串？

> ID：10370671
> 
> 赞同：1
> 
> 时间：2012-04-29T08:09:03.020
> 
> 标签：c#

我正在使用一个带有国家枚举的组合框，我想知道如何将选定的国家从组合框中获取到一个字符串。以前我使用 cmbCountries.SelectedIndex 来获取所选国家的 int 编号，但现在我想要文本。帮助是preciated！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:11:49.473

如果您的组合框是数据绑定的，那么只需直接对数据使用索引。

如果没有，您可以从控件中获取项目：

`cmbCountries.SelectedItem`

但是，如果您只想要所选条目的文本值：

`cmbCountries.Text`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T08:20:11.833

r如果您的枚举与组合框具有相同的值，只需将您选择的索引转换为您的枚举类型的变量，然后`ToString()`对其进行操作。有点像这样：

```
void Main()
{
    int selectedIndex = 1;
    Country test;
    test = (Country)selectedIndex;
    Console.WriteLine(test.ToString());
    Console.WriteLine(((Country)selectedIndex).ToString());
}

enum Country
{
    None,
    Australia,
    Austria,
    England,
    France,
    Germany,
    UnitedStates
} 
```

或者，您可以只获取`Text`组合框的 。

# c# - 将 TSQL 查询转换为 LINQ

> ID：10370679
> 
> 赞同：1
> 
> 时间：2012-04-29T08:10:59.717
> 
> 标签：c#, linq, tsql

我需要选择结果集中每个州和州表的所有列的城市计数。我有 TSQL 查询，但不知道如何处理 LINQ 中的内部查询和分组。

状态表

```
StateID,StateName,Description,Address,SectionName 
```

城市表：

```
CityID,StateID,Address,Description 
```

这里是 TSQL 查询需要转换为 LINQ

```
declare @State varchar(100)
set @State='IL'

SELECT s.*,oCities.CityCount
from ( 
        Select c.StateID,count(*) CityCount
        from States s inner join Cities c on 
        s.StateID =c.StateID 
        where s.StateName =@State
        group by c.StateID 
    ) oCities inner join States s on oCities.StateID = s.StateID 
where s.StateName =@State 
```

最好使用 C# 语言，但我们将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:55:26.627

假设您的外键已被正确定义和导入，那么这样的事情应该可以工作

```
var state = states.Where (s => s.StateName == name).Select (
    s => new {State=s, CityCount=s.Cities.Count()}).SingleOrDefault (); 
```

使用 Linq to SQL 这转换为

```
SELECT [t2].*, [t2].[value] AS [CityCount]
FROM (
    SELECT [t0].*, (
        SELECT COUNT(*)
        FROM [City] AS [t1]
        WHERE [t1].[StateId] = [t0].[Id]
        ) AS [value]
    FROM [State] AS [t0]
    ) AS [t2]
WHERE [t2].[StateName] = @p0 
```

其中 p0 是您的 @state 参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T08:23:31.420

```
var q1 = 
from c in cities
join s in states 
on c.StateID equals s.StateID
where s.StateName=statename
select new {city=c, state=s};

var result = q1.GroupBy(x=>x.state.StateID)
                .Select(x=>new {Count = x.Count(), state = x.First().state}); 
```

# python - 解密连接到托管在的 mongo 实例的错误 .meteor.com

> ID：10370681
> 
> 赞同：0
> 
> 时间：2012-04-29T08:11:34.937
> 
> 标签：python, mongodb, meteor

我想使用 python 连接到一个绑定到流星应用程序的 mongo 实例，该流星应用程序托管在meteor.com。我已经通过`meteor mongo -U <appname>`命令获得了我的应用程序的 URL，并且我能够连接。但是，当我连接并尝试做一些简单的事情（枚举“幻灯片”集合中的文档）时，我收到一个错误：

```
In [1]: import pymongo

In [2]: con = pymongo.Connection("mongodb://client:f066d336-f5bd-1a85-1039-c679fbb645a1@skybreak.member0.mongolayer.com:27017/slides_meteor_com").meteor

In [3]: con.slides.find()
Out[3]: <pymongo.cursor.Cursor at 0x109873690>

In [4]: [ x for x in con.slides.find() ]
---------------------------------------------------------------------------
OperationFailure                          Traceback (most recent call last)
/Users/bensonk/Code/lfnw-elite-talk/<ipython-input-4-2112945d50ca> in <module>()
----> 1 [ x for x in con.slides.find() ]

/Library/Python/2.7/site-packages/pymongo/cursor.pyc in next(self)
    701             raise StopIteration
    702         db = self.__collection.database
--> 703         if len(self.__data) or self._refresh():
    704             if self.__manipulate:
    705                 return db._fix_outgoing(self.__data.pop(0), self.__collection)

/Library/Python/2.7/site-packages/pymongo/cursor.pyc in _refresh(self)
    664                               self.__skip, ntoreturn,
    665                               self.__query_spec(), self.__fields,
--> 666                               self.__uuid_subtype))
    667             if not self.__id:
    668                 self.__killed = True

/Library/Python/2.7/site-packages/pymongo/cursor.pyc in __send_message(self, message)
    626             response = helpers._unpack_response(response, self.__id,
    627                                                 self.__as_class,
--> 628                                                 self.__tz_aware)
    629         except AutoReconnect:
    630             db.connection.disconnect()

/Library/Python/2.7/site-packages/pymongo/helpers.pyc in _unpack_response(response, cursor_id, as_class, tz_aware)
     99             raise AutoReconnect("master has changed")
    100         raise OperationFailure("database error: %s" %
--> 101                                error_object["$err"])
    102 
    103     result = {}

OperationFailure: database error: unauthorized db:meteor lock type:-1 client:173.160.192.81 
```

据我所知，这是 mongo 建议我无权读取该集合。我可以通过 mongo 控制台读取它`meteor mongo <projectname`，但不能从 python 读取。如何在 python 中读取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:53:24.993

看起来您的数据库正在使用身份验证，而您尚未指定用户名/密码。在 python 中，这是用`db.authenticate(username, password)`. 详情在这里：[http ://api.mongodb.org/python/2.1.1/api/pymongo/database.html](http://api.mongodb.org/python/2.1.1/api/pymongo/database.html)

# java - 如何从java程序获取汇总值到php脚本？

> ID：10370689
> 
> 赞同：0
> 
> 时间：2012-04-29T08:12:47.727
> 
> 标签：java, php, mysql, encoding

我使用 php 脚本从 mysql获取字符串*Operacinės sitemos 。*但是当我尝试再次将此值发送到 php 脚本并获取其他值时，我得到了 null。我认为问题可能出在获取非英文字符的 php 脚本上。我错过了什么吗？

**Java代码：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.single_course_layout);

Intent in = getIntent();
courseName = in.getStringExtra("fullname");
firstname = in.getStringExtra("firstname");
lastname = in.getStringExtra("lastname");

TextView label = (TextView)findViewById(R.id.label);
label.setText(courseName);
String summary = null;
TextView summaryContent = (TextView)findViewById(R.id.summary);

ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("cname",""+courseName));
InputStream is = null; 
String result = null;
try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("********");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
}catch(Exception e){
        Log.e("log_tag", "Error in http connection "+e.toString());
}
try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"ISO-8859-10"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
                System.out.println(line);
        }
        is.close();

        result=sb.toString();
}catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
}

try{
JSONArray jArray = new JSONArray(result);
for(int ii=0;ii<jArray.length();ii++){
        JSONObject json_data = jArray.getJSONObject(ii);
        summary = json_data.getString("summary");
 }
summaryContent.setText(summary);
} catch(JSONException e){
Log.e("log_tag", "Error parsing data "+e.toString());
}

}; 
```

**PHP 脚本：**

```
 <?php
    mysql_connect("localhost","***","*****");
    mysql_select_db("*******");
    mysql_query("SET NAMES utf8"); 
    $fullname = mysql_real_escape_string($_REQUEST['cname']);

    $q=mysql_query("SELECT mdl_course.summary FROM mdl_course WHERE mdl_course.fullname = '$fullname'");
    while($e=mysql_fetch_assoc($q))
            $output[]=$e;

    print(json_encode($output));

    mysql_close();
    ?> 
```

**已编辑**

这个 php 代码工作正常。我可以看到所需的输出。但是为什么上面的脚本不起作用？

```
<?php
mysql_connect("localhost","*******","*********");
mysql_select_db("************");
$fullname = 'Operacinės sistemos';
$q=mysql_query("SELECT mdl_course.summary FROM mdl_course WHERE mdl_course.fullname = '$fullname'");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output));
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:20:31.267

> 如何将 utf-8_lithuanian_ci 发送到 php 脚本？

这很简单。`utf-8_lithuanian_ci`是一个排序规则，所以当您拥有具有该排序规则顺序的数据时，它已经完成了 - 您只需要传递该数据。排序规则只能在排序时应用，因此数据在传递时已经排序，您无需执行任何其他操作。

如果你问编码，严格来说是不能说的。通常在这里使用 UTF-8 编码（因为排序规则是基于 UTF-8 的），但是，从技术上讲，您也可以使用任何不同的字符编码，并且由于您没有指定哪一种，它仍然不精确。

此外，[`SET NAMES utf8`](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)不建议在 PHP 中*使用*，也不鼓励使用整个 mysql 扩展。

# javascript - javascript运行时代码编辑

> ID：10370694
> 
> 赞同：0
> 
> 时间：2012-04-29T08:13:53.407
> 
> 标签：javascript, asp.net, html

我想在运行时在 javascript 中添加一些代码，这些代码取决于动态写入某些数据的文件。我希望将这些数据写入我的 javascript 代码中。任何帮助将不胜感激谢谢:)

```
 function initialize() {
                  var myLatLng = new google.maps.LatLng(0, -180);

                  var map = new google.maps.Map(document.getElementById("map_canvas"),
  myOptions);
                  var flightPlanCoordinates = [
                                        new google.maps.LatLng(37.772323, -122.214897),
                                        new google.maps.LatLng(21.291982, -157.821856),
                                        new google.maps.LatLng(-18.142599, 178.431)
                                               ];

                  flightPath.setMap(map);
            } 
```

我想使用循环动态设置 flightPathCoordinates ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:20:59.900

如果您的意思是动态加载数据，您可以使用[AJAX](https://developer.mozilla.org/en/AJAX)将数据动态加载到您的程序中。

如果您的意思是动态加载可用的可执行脚本的一部分，请尝试模块模式和动态模块加载，就像[RequireJS](http://requirejs.org/)所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:44:06.870

除了@Joseph 提供的内容之外，由于这是用 asp.net 标记的，因此您可以使用 asp.net 的经典`<%= ....%>`内联代码样式。您可以使 Javascript 的任何部分“动态” - 当然您的脚本也将是内联的（不是一些单独的文件）以保持简单。

[您还可以使用ASP.Net ClientScript](http://msdn.microsoft.com/en-us/library/dd410060.aspx)等动态编写要注入的整个或部分脚本......

有不同的模式可以做到这一点 - Joseph 的 Ajax 模式可能会要求您仍然与 ASP.Net 后端交换数据（我认为这就是您在 ASP.Net 中标记问题的原因）。这种方法的优势在于您可以最大限度地减少回发（甚至没有 - 前端可以完全是 HTML + JS，它只是与 ASP.Net 有任何关系的数据源）。

您选择哪个完全取决于您和您的要求。

# android - 无法让 Open Accessory Development Kit 在 Galaxy Nexus 上运行

> ID：10370696
> 
> 赞同：2
> 
> 时间：2012-04-29T08:14:26.657
> 
> 标签：android

我有一个 Arduino MEGA ADK 板和一个三星 Galaxy nexus 手机。我成功地将 demokit 程序上传到了主板和手机上，没有出现错误。但是，当我连接它们时没有任何反应，手机上的应用程序仍然显示“请连接 Demokit board”屏幕。有人在 Galaxy Nexus 上工作过吗？我尝试使用2.3.4+和3.1+库（com.android.future.usb和android.hardware.usb），都可以成功编译并安装到手机中，但是当我插入时都没有响应USB端口。ADK 是否有一些更新的演示文档？原始的 demokit 代码已经过时了，甚至与 Arduino 1.0 都不兼容...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:06:09.797

我让它在带有 Arduino Mega ADK 的 Galaxy Nexus 上工作。快速数据，

*   DemoKit 以 Google API 2.3.3 级别 10 为目标（不是 Android 2.3.3），代码没有变化。
*   [来自http://www.bdgcustoms.com/diy_android_adk.html](http://www.bdgcustoms.com/diy_android_adk.html)的Arduino 固件使用 Arduino 0022 编译和上传
*   将 Nexus 与 ADK 板连接并重置 ADK 板

我没有详细研究它，但 DemoKit 中的 Arduino 固件使用 Wire 库与操纵杆通信。在 setup() 中，操纵杆被初始化，init_joystick()，如果没有连接操纵杆，固件可能会被阻塞。因此，对于裸 Arduino Mega ADK，必须修改原始固件代码。对我来说，它与上面链接中的固件一起工作。

祝你好运！

# android - 如何使 Select 语句按等式排序？（按最短距离订购）

> ID：10370697
> 
> 赞同：1
> 
> 时间：2012-04-29T08:14:40.060
> 
> 标签：android, sqlite, select, location, equation

我正在开发一个需要显示最近的酒店（例如）到用户位置的应用程序。SQLite 数据库包含所有酒店及其经度和纬度。我搜索了一下，发现最简单的方法是在select语句的“Order By”中写下某个等式。

```
Cursor cursor = database.query(MySQLiteHelper.TABLE_Hotel, hotelsNames, null, null, null, null, ((lat - Double.valueOf(hotelsLat[0].trim()).doubleValue()) * (lat - Double.valueOf(hotelsLat[0].trim()).doubleValue()) +
            (lon - Double.valueOf(hotelsLong[0].trim()).doubleValue()) * (lon - Double.valueOf(hotelsLong[0].trim()).doubleValue())); 
```

注意：hotelsLong 和hotelsLat 是String[] 包含数据库中的经度和纬度。

这是我做的select语句，问题是有一个错误说select语句的参数必须是(String, String[], String, String[], String, String, String) 但是我做了什么是（字符串，字符串 []，空，空，空，空，***双***）

我该怎么做？它将如何根据方程的结果对结果进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:56:23.810

首先，您的距离计算似乎不正确。[有关distanceBetween()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/location/Location.java#Location.distanceBetween%28double,double,double,double,float%5B%5D%29)方法，请参见[Location](http://developer.android.com/reference/android/location/Location.html)类的源代码。我建议你使用这个或同一类的[distanceTo()](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)。

关于要使用的适配器。`CursorAdapter`如果您的数据来自数据库，`BaseAdapter`则使用，否则使用某些后代。你有两个选择。将 sql 表中的当前距离保存为新列（每次收到新位置或用户定义要搜索的位置），然后按它排序或`ArrayAdapter`使用`ListView`.

我将描述第二个选项，如果根据用户位置显示酒店并且位置更新非常频繁，因为它不会在每次收到新位置时访问数据库，但另一方面它会消耗更多内存因为酒店被存储为对象：

创建`AsyncTask`以获取`Cursor`包含酒店。遍历光标并填写酒店列表：

```
@Override
protected List<Hotel> doInBackground(Void... unused) {
    final Cursor c = database.query(getting hotels);
    if (c == null) {
        return null;
    }
    List<Hotel> hotels = new ArrayList<Hotel>();
    try {
        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            Hotel hotel = new Hotel();
            hotel.fillFromCursor(c); // fills data from cursor
            hotels.add(hotel);
        }
    } finally {
        c.close();
    }
    return hotels;
}

@Override
protected void onPostExecute(List<Hotels> hotels) {
    if (hotels != null) {
        mHotelsAdapter.clear();
        for (Hotel h : hotels) {
            mHotelsAdapter.add(h);
        }
        // mLocation is our current location, if we have one, set the distance, see below
        mHotelsAdapter.updateDistance(mLocation);
    }
} 
```

mHotelsAdapter 是您的 ListView 的适配器。适配器包含`updateDistance()`每次更改所需位置时都应调用的方法（例如在`onLocationChanged(Location location)`您的 LocationListener 中）。该方法更新距离并对项目进行排序。

```
mHotelsAdapter = new HotelAdapter(this);
getListView().setAdapter(mHotelsAdapter);
...

public class HotelsAdapter extends ArrayAdapter<Hotel> {
    ...
    public void updateDistance(Location location) {
        if (location != null) {
            for (int i = 0; i < getCount(); i++) {
                Hotel hotel = getItem(i);
                hotel.setDistance(location);
             }
             sort(mComparator);
             notifyDataSetChanged();
        }
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // implement getView
    }

    private static final Comparator<Hotel> mComparator = new Comparator<Hotel>() {
        @Override
        public int compare(Hotel lhs, Hotel rhs) {
            if (lhs.getDistance() > rhs.getDistance()) {
                return 1;
            } else if (lhs.getDistance() < rhs.getDistance()) {
                return -1;
            } else {
                return 0;
            }
        }
    };
    ...
} 
```

最后是类的`setDistance()`方法`Hotel`，它将酒店的距离设置为作为参数给出的位置：

```
public void setDistance(Location location) {
    float results[] = new float[1];
    Location.distanceBetween(location.getLatitude(), location.getLongitude(),
        getLatitude(), getLongitude(), results);
    mDistance = results[0];
} 
```

# visual-studio-2010 - 将 Visual Studio 2010 连接到 Assembla SVN

> ID：10370698
> 
> 赞同：4
> 
> 时间：2012-04-29T08:14:45.487
> 
> 标签：visual-studio-2010, git, assembla

我现在正在和一个朋友一起创建一个项目，并且非常需要一个 SVN。

但是，昨天当我试图将我的项目保存到 Assembla 时，我无法正确提交它。一开始，我认为这可能是因为我使用了来自 google ID 的实时登录。所以我使用普通的用户名和密码创建了一个新用户。但它只是没有帮助。

Visual Studio 2010 打开用于连接到 Assembla 的登录对话框并询问我的用户名和密码，我输入了它们但收到一条错误消息，指出来自服务器的响应代码是 400 one...

浏览整个网络，我找不到有关如何执行此操作的解释。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T09:09:44.293

我对 Assembla 没有任何意见，但我认为尝试将 mercurial / git 集成到 Visual Studio*是一个非常糟糕的主意。*如果您没有将 TFS 与 Visual Studio 集成，那么使用独立的 Mercurial 客户端要比尝试将其集成到 Visual Studio 中要好得多。

我们一直在使用 Atlassian 的 bitbucket.org 来托管小型项目以进行协作。他们有一个免费计划，可以与私人存储库合作最多五个用户。

将 Visual Studio 与 Mercurial 结合使用所涉及的手动步骤

1.  在 bitbucket.org 创建一个帐户
2.  下载一个像[TortoiseHg](http://confluence.atlassian.com/display/BITBUCKET/Set+up+Git+and+Mercurial?utm_source=internal&utm_medium=link&utm_campaign=blank_repo)这样的 mercurial 客户端到你的机器上
3.  在 bitbucket.org 上创建一个存储库
4.  将 git repo 克隆到您的机器上。
5.  将更改作为您的代码推送。

就是这样！。[这是使用 bitbucket.org - bitbucket101](http://confluence.atlassian.com/display/BITBUCKET/Bitbucket+101?utm_source=internal&utm_medium=link&utm_campaign=blank_repo)使用 Mercurial / Git 的完整教程

PS：如果你已经有计划，使用 Assembla 并没有什么坏处，只要确保你没有在你的 Visual Studio 中安装额外的脚本。TortoiseHg 肯定可以处理任何 Mercurial。

* * *

根据您的评论更新：

好吧，是的，不是的。微软一直有自己的源代码控制系统。早些时候它是Source Safe。现在他们已经将它升级到另一个更好的选项，称为[Team Fundation Server (TFS)](http://en.wikipedia.org/wiki/Team_Foundation_Server)，它在做许多其他事情时，还控制源

# javascript - 使用鼠标拖动的 Google 地图/路线

> ID：10370700
> 
> 赞同：0
> 
> 时间：2012-04-29T08:15:02.717
> 
> 标签：javascript, google-maps, google-directions-api

我正在寻找一些 JavaScript 实用程序（或类似的东西）来显示行车路线。[我正在寻找与Google Maps/Directions](http://maps.google.com/help/maps/directions/)几乎相同的内容。请注意，当您在 2 个地点之间创建路线时，您可能会使用鼠标拖放功能手动修改它。我正在为我的网站寻找完全相同的功能。

你能告诉我这样的库或实用程序是否存在吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:46:51.427

是的，它被称为具有行车路线的 Google Maps API： [https](https://developers.google.com/maps/documentation/javascript/directions) ://developers.google.com/maps/documentation/javascript/directions ，您可以将它们设置为可拖动： [https ://developers.google.com/maps/documentation /javascript/directions#DraggableDirections](https://developers.google.com/maps/documentation/javascript/directions#DraggableDirections)

# actionscript-3 - Flash 右键单击 与左键单击的作用不同

> ID：10370702
> 
> 赞同：6
> 
> 时间：2012-04-29T08:15:13.400
> 
> 标签：actionscript-3, flash, mouseevent

我刚刚更新到允许监听 MouseEvent.RIGHT_MOUSE_UP 和 MouseEvent.RIGHT_MOUSE_DOWN 的 flash player 11.2。

我遇到了一个问题，这些事件与它们的 MOUSE_UP / MOUSE_DOWN 对应物的行为不同。具体来说，无论鼠标在哪里，都会启动 MOUSE_UP 事件。这允许在用户单击 Flash 播放器时将其拖出 Flash 窗口，并且仍然具有完整的向下 -> 向上事件循环。

但是，RIGHT_MOUSE_UP / DOWN 似乎并非如此。当我在播放器内部右键单击并在播放器外部释放时，我没有收到 RIGHT_MOUSE_UP 事件，这意味着可以在没有收到 UP 事件的情况下接收多个 RIGHT_MOUSE_DOWN 事件。

是否有已知的解决方法或者我必须设置一个选项？

**编辑 ：**

这是一个代码示例：

```
stage.addEventListener(MouseEvent.MOUSE_UP,         onMouseUp);
stage.addEventListener(MouseEvent.MOUSE_DOWN,       onMouseDown);
stage.addeventListener(MouseEvent.RIGHT_MOUSE_UP,   onRightMouseUp);
stage.addeventListener(MouseEvent.RIGHT_MOUSE_DOWN, onRightMouseDown);

//...
//all callback function follow a similar format as :
private function onMouseUp(e : MouseEvent) : void
{
    leftClick_ = false;//signaling that leftClick is not pressed
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:15:45.957

您可以监听鼠标何时离开舞台，这可以充当`RIGHT_CLICK_UP`事件的代理。

```
package 
{
    //Imports
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.events.MouseEvent;

    //Class
    [SWF(width="640", height="480", frameRate="60", backgroundColor="0x555555")]
    public class RightClickTest extends Sprite
    {
        //Constructor
        public function RightClickTest()
        {
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;

            addEventListener(Event.ADDED_TO_STAGE, init);
        }

        //Initialize
        private function init(event:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            stage.addEventListener(MouseEvent.RIGHT_MOUSE_DOWN, mouseRightClickEventHandler);
            stage.addEventListener(MouseEvent.RIGHT_MOUSE_UP, mouseRightClickEventHandler);
            stage.addEventListener(Event.MOUSE_LEAVE, mouseLeaveEventHandler);
        }

        //Mouse Right Click Event Handler
        private function mouseRightClickEventHandler(event:MouseEvent):void
        {
            switch (event.type)
            {
                case MouseEvent.RIGHT_MOUSE_DOWN:   trace("Right Mouse Down");
                                                    break;

                case MouseEvent.RIGHT_MOUSE_UP:     trace("Right Mouse Up");
            }
        }

        //Mouse Leave Event Handler
        private function mouseLeaveEventHandler(event:Event):void
        {
            trace("Mouse Leave");
        }
    }
} 
```

但是，如果您试图避免让用户显示多个右键单击上下文菜单（或类似的东西），您可以在代码中实现一个简单的检查，以在显示新的右键单击上下文菜单之前先隐藏可见的右键单击上下文菜单。

# ios - UIAlertView 按钮在操作问题

> ID：10370703
> 
> 赞同：0
> 
> 时间：2012-04-29T08:15:27.120
> 
> 标签：ios, uialertview

我已经声明了`UIAlertViewDelegate`像这样调用它的方法

```
-(IBAction)hidding{
    [self removeFromParentViewController];
    UIAlertView *alert1= [[UIAlertView alloc] initWithTitle:@"Logged in"
        message:[NSString stringWithFormat:@"Welcomes you"]
        delegate:self
        cancelButtonTitle:@"Ok"
        otherButtonTitles:nil];
    [alert1 show];
}

- (void)alertViewUIAlertView *)actionSheet clickedButtonAtIndexNSInteger)buttonIndex {
    // the user clicked one of the OK/Cancel buttons
    NSLog(@"clicking");
    if (buttonIndex == 0)
    {
        NSLog(@"ok");
    }
    else
    {
        NSLog(@"cancel");
    }
} 
```

检查单击了哪个按钮并执行一些操作。但是，当`UIAlertView`出现并单击“确定”选项时，它会崩溃并给我*“程序接收信号：“EXC_BAD_ACCESS”* 的错误。

更具体地说，我已经`UIAlertView`在*1stclass*中声明了这个，然后我比较了 2ndclass 中的一些参数，*并且*从*2ndclass*它正在调用具有 this 的*1stclass*方法`UIAlertView`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T09:00:14.913

```
- (void)alertViewUIAlertView *)actionSheet clickedButtonAtIndexNSInteger)buttonIndex
{
    // the user clicked one of the OK/Cancel buttons
    NSLog(@"clicking");
    if (buttonIndex == 0)
    {
        NSLog(@"ok");
    }
    else
    {
        NSLog(@"cancel");
    }
} 
```

这种方法在我看来非常奇怪。应该是这样的：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // the user clicked one of the OK/Cancel buttons
    NSLog(@"clicking");
    if (buttonIndex == 0)
    {
        NSLog(@"ok");
    }
    else
    {
        NSLog(@"cancel");
    }
} 
```

你搞砸了方法名称....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:45:53.047

是的，我使用并确认了它但是得到了解决方案，就像我必须创建@protocol 类并在其中声明 -(void) 方法，然后在 Appdelegate 类中为它创建一个委托，也在一个类中。所以，我调用了@protocol 类方法，然后它又调用了oneclass 方法，注意：我继承了oneclass 中的@protocol 方法，问题得到了解决。这是解决方案的完整代码，这是@protocol.h 类

```
#import <Foundation/Foundation.h>
 #import <UIKit/UIKit.h>

@protocol SMLoginDelegate 

- (void)didDisconnection;
@end

This is my oneclass

#import "oneclass.h"

@interface oneclass : UIViewController<UITextFieldDelegate,SMLoginDelegate>
{

}
@end

oneclass.m

- (void)viewDidLoad
{

    [super viewDidLoad];

     AppDelegate *del1 = [self appDelegate];
    del1._loginDelegate = self;

    // Do any additional setup after loading the view from its nib.
}

appdelegate.h class
@interface FirstphaseAppDelegate {
__weak NSObject <SMLoginDelegate> *_loginDelegate;
}
@property (nonatomic, weak) id _loginDelegate;

appdelegate.m class

@synthesize _loginDelegate;

-(void)anymethod
{
[_loginDelegate didDisconnection];
} 
```

# jquery - 在选项卡内打开几个 asp.net 页面

> ID：10370704
> 
> 赞同：1
> 
> 时间：2012-04-29T08:15:40.827
> 
> 标签：jquery, asp.net, tabs

我有一个 asp.net 页面，它应该在单独的选项卡中加载几个页面（如雅虎邮件新样式）。我应该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:31:35.950

因此，不要使用 ajax 加载页面，而是将它们添加为 iframe。这样，当您在其中一个中发布时，它只会重新加载该选项卡，其余的将保持不变

# python - 在装饰器中运行多处理

> ID：10370705
> 
> 赞同：4
> 
> 时间：2012-04-29T08:15:54.470
> 
> 标签：python, multiprocessing, decorator, pickle

我想更新关于装饰器内部多处理的问题（我以前的问题在我看来已经死了:)）。我偶然发现了这个问题，不幸的是我不知道如何解决这个问题。为了需要我的应用程序，我必须在装饰器内使用多处理，但是......当我在装饰器内使用多处理时，我得到错误： `Can't pickle <function run_testcase at 0x00000000027789C8>: it's not found as __main__.run_testcase`。另一方面，当我像普通函数一样调用我的多处理函数时`wrapper(function,*arg)`，它可以工作。这非常棘手，但我不知道我做错了什么。我接近得出结论，这是python错误:)。也许有人知道这个问题的解决方法，留下相同的语法。我在 Windows 上运行此代码（不幸的是）。

上一个问题：[Using multiprocessing inside decorator generate error: can't pickle function...it's not found as](https://stackoverflow.com/questions/8126654/using-multiprocessing-inside-decorator-generates-error-cant-pickle-function)

模拟此错误的最简单代码：

```
from multiprocessing import Process,Event

class ExtProcess(Process):
    def __init__(self, event,*args,**kwargs):
        self.event=event
        Process.__init__(self,*args,**kwargs)

    def run(self):
        Process.run(self)
        self.event.set()

class PythonHelper(object):

    @staticmethod
    def run_in_parallel(*functions):
        event=Event()
        processes=dict()
        for function in functions:
            fname=function[0]
            try:fargs=function[1]
            except:fargs=list()
            try:fproc=function[2]
            except:fproc=1
            for i in range(fproc):
                process=ExtProcess(event,target=fname,args=fargs)
                process.start()
                processes[process.pid]=process
        event.wait()
        for process in processes.values():
            process.terminate()
        for process in processes.values():
            process.join() 
```

```
class Recorder(object):
    def capture(self):
        while True:print("recording") 
```

```
from z_helper import PythonHelper
from z_recorder import Recorder

def wrapper(fname,*args):
    try:
        PythonHelper.run_in_parallel([fname,args],[Recorder().capture])
        print("success")
    except Exception as e:
        print("failure: {}".format(e)) 
```

```
from z_wrapper import wrapper
from functools import wraps

class Report(object):
    @staticmethod
    def debug(fname):
        @wraps(fname)
        def function(*args):
            wrapper(fname,args)
        return function 
```

执行：

```
from z_report import Report
import time

class Test(object):
    @Report.debug
    def print_x(self,x):
        for index,data in enumerate(range(x)):
            print(index,data); time.sleep(1)

if __name__=="__main__":
    Test().print_x(10) 
```

我在以前的版本中添加了@wraps

**我的回溯：**

```
Traceback (most recent call last):
  File "C:\Interpreters\Python32\lib\pickle.py", line 679, in save_global
    klass = getattr(mod, name)
AttributeError: 'module' object has no attribute 'run_testcase'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\EskyTests\w_Logger.py", line 19, in <module>
    logger.run_logger()
  File "C:\EskyTests\w_Logger.py", line 14, in run_logger
    self.run_testcase()
  File "C:\EskyTests\w_Decorators.py", line 14, in wrapper
    PythonHelper.run_in_parallel([function,args],[recorder.capture])
  File "C:\EskyTests\w_PythonHelper.py", line 25, in run_in_parallel
    process.start()
  File "C:\Interpreters\Python32\lib\multiprocessing\process.py", line 130, in start
    self._popen = Popen(self)
  File "C:\Interpreters\Python32\lib\multiprocessing\forking.py", line 267, in __init__
    dump(process_obj, to_child, HIGHEST_PROTOCOL)
  File "C:\Interpreters\Python32\lib\multiprocessing\forking.py", line 190, in dump
    ForkingPickler(file, protocol).dump(obj)
  File "C:\Interpreters\Python32\lib\pickle.py", line 237, in dump
    self.save(obj)
  File "C:\Interpreters\Python32\lib\pickle.py", line 344, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Interpreters\Python32\lib\pickle.py", line 432, in save_reduce
    save(state)
  File "C:\Interpreters\Python32\lib\pickle.py", line 299, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Interpreters\Python32\lib\pickle.py", line 623, in save_dict
    self._batch_setitems(obj.items())
  File "C:\Interpreters\Python32\lib\pickle.py", line 656, in _batch_setitems
    save(v)
  File "C:\Interpreters\Python32\lib\pickle.py", line 299, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Interpreters\Python32\lib\pickle.py", line 683, in save_global
    (obj, module, name))
_pickle.PicklingError: Can't pickle <function run_testcase at 0x00000000027725C8>: it's not found as __main__.run_testcase 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T09:17:42.250

该`multiprocessing`模块通过在其上调用pickler 来“调用”其从属进程中的函数。这是因为它必须通过它创建的 IPC 接口将函数的*名称发送给从属进程。*pickler 找出要使用的正确名称并将其发送过去，然后在另一端 unpickler 将名称转换回函数。

当函数是类成员时，没有帮助就无法正确腌制。这对`@staticmethod`成员来说更糟，因为他们有 type`function`而不是 type `instancemethod`，这愚弄了pickler。您可以很容易地看到这一点，而无需使用`multiprocessing`：

```
import pickle

class Klass(object):
    @staticmethod
    def func():
        print 'func()'
    def __init__(self):
        print 'Klass()'

obj = Klass()
obj.func()
print pickle.dumps(obj.func) 
```

产生：

```
Klass()
func()
Traceback (most recent call last):
 ...
pickle.PicklingError: Can't pickle <function func at 0x8017e17d0>: it's not found as __main__.func 
```

当您尝试腌制常规的非静态方法时，问题就更清楚了，因为腌制器`obj.__init__`随后意识到它确实是一个实例方法：

```
TypeError: can't pickle instancemethod objects 
```

然而，一切并没有丢失。您只需要添加一个间接级别。*您可以提供一个在目标*进程中创建实例绑定的普通函数，向它发送至少两个参数：（pickle-able）类*实例*和函数名称。为了完整起见，我还添加了在调用函数时要使用的任何参数。然后在目标进程中调用这个普通函数，它调用类的成员函数：

```
def call_name(instance, name, *args = (), **kwargs = None):
    "helper function for multiprocessing: call instance.getattr(name)"
    if kwargs is None:
        kwargs = {}
    getattr(instance, name)(*args, **kwargs) 
```

现在代替（这是从您的链接帖子中复制的）：

```
PythonHelper.run_in_parallel([self.run_testcase],[recorder.capture]) 
```

你会做这样的事情（你可能想对调用序列大惊小怪）：

```
PythonHelper.run_in_parallel([call_name, (self, 'run_testcase')],
    [recorder.capture]) 
```

（注意：这都是未经测试的，可能有各种错误）。

* * *

**更新**

我拿了你发布的新代码并试了一下。

首先我必须修复缩进`z_report.py`（de-indent all of `class Report`）。

完成后，运行它会产生与您显示的错误完全不同的错误：

```
Process ExtProcess-1:
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/tmp/t/marcin/z_helper.py", line 9, in run
    Process.run(self)
  File "/usr/local/lib/python2.7/multiprocessing/process.py", line 114, in run
recording
[infinite spew of "recording" messages] 
```

要修复无休止的“录音”消息：

```
diff --git a/z_recorder.py b/z_recorder.py
index 6163a87..a482268 100644
--- a/z_recorder.py
+++ b/z_recorder.py
@@ -1,4 +1,6 @@
+import time
 class Recorder(object):
     def capture(self):
-        while True:print("recording")
-
+        while True:
+            print("recording")
+            time.sleep(5) 
```

这留下了剩下的一个问题：错误的论点`print_x`：

```
TypeError: print_x() takes exactly 2 arguments (1 given) 
```

在这一点上，Python 实际上正在为您做所有正确的事情，只是这`z_wrapper.wrapper`有点过分热心：

```
diff --git a/z_wrapper.py b/z_wrapper.py
index a0c32bf..abb1299 100644
--- a/z_wrapper.py
+++ b/z_wrapper.py
@@ -1,7 +1,7 @@
 from z_helper import PythonHelper
 from z_recorder import Recorder

-def wrapper(fname,*args):
+def wrapper(fname,args):
     try:
         PythonHelper.run_in_parallel([fname,args],[Recorder().capture])
         print("success") 
```

这里的问题是，当您到达 时`z_wrapper.wrapper`，函数参数已经全部捆绑到一个元组中。 `z_report.Report.debug`已经有：

```
 def function(*args): 
```

这样这两个参数，在这种情况下，实例`main.Test`和值`10`，已被制成一个元组。您只想`z_wrapper.wrapper`将该（单个）元组传递给`PythonHelper.run_in_parallel`, 以提供参数。如果您添加另一个`*args`元组，则该元组将被包装到另一个元组中（这次是一个元素）。（您可以通过添加`print "args:", args`in来查看这一点`z_wrapper.wrapper`。）

# sql-server-2008 - 将日期范围与给定日期进行比较

> ID：10370707
> 
> 赞同：-7
> 
> 时间：2012-04-29T08:16:22.420
> 
> 标签：sql-server-2008

我有一个`tblleaveApplication`带有列的表格`empid, leaveStarddate, leaveEndDate, leavetype, remarks`等等。

我想找到在今天之前休假`leaveStarddate`的员工。`leaveEndDate`

请在这方面提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:17:55.790

像这样的东西？

```
SELECT * FROM tblLeaveApplication
WHERE LeaveStartDate >= getdate() and LeaveEndDate <= getdate() 
```

?

# wcf - 复杂类型在 wcf wsdl 中不可用

> ID：10370710
> 
> 赞同：15
> 
> 时间：2012-04-29T08:16:46.390
> 
> 标签：wcf, wsdl

我创建了 WCF 服务，但服务 WSDL 没有显示我的类（复杂类型）。

下面是服务：

```
[ServiceContract]
public interface IFedexService
{
    [OperationContract]
    ShipmentReply CreateMultiFedExShipment(RxRdShipment shipment);

    [OperationContract]
    ShipmentReply CreateFedExShipment(RxRdShipment shipment);
} 
```

我的班级定义是：

```
[DataContract]
public class ShipmentReply
{
    [DataMember]
    public string ReferenceNumber { get; set; }

    [DataMember]
    public string MasterTrackingNumber { get; set; }

    [DataMember]
    public List<ReplyPackage> Packages { get; set; }

    [DataMember]
    public bool Response { get; set; }

    [DataMember]
    public RxNotification Notification { get; set; }
} 
```

我的问题是我没有`ShipmentReply`在`WSDL`. 我的问题是什么？

谢谢你，阿雷芬

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-29T09:41:32.180

是的，这对 WCF 来说很正常。默认情况下，WCF 将仅显示 WSDL 本身中的操作 - 数据结构记录在链接到 WSDL 文件的 XSD 文件中。

我敢打赌，如果您查看您的 WSDL，您会在 WSDL 的顶部看到与此类似的内容：

```
<xsd:schema targetNamespace="http://tempuri.org/Imports">
  <xsd:import schemaLocation="http://localhost:8000/HelloIndigo?xsd=xsd0" 
              namespace="http://tempuri.org/" /> 
  <xsd:import schemaLocation="http://localhost:8000/HelloIndigo?xsd=xsd1"  
              namespace="http://schemas.microsoft.com/2003/10/Serialization/" /> 
  <xsd:import schemaLocation="http://localhost:8000/HelloIndigo?xsd=xsd2" 
              namespace="http://schemas.datacontract.org/2004/07/WCF_Simple_Service" /> 
</xsd:schema> 
```

这些是指向所需 XSD 文件的链接——在浏览器中输入 URL，其中一个（很可能是数字最高的那个——但不一定是那个）将包含你的复杂类型定义。

在您的浏览器中尝试此 URL（使端口和实际 URL 适应您所拥有的）：

```
http://localhost:8080/HelloIndigo?xsd=xsd2 
```

这应该为您提供复杂类型的 XSD

此功能在过去几年中引起了一些问题——一些客户端无法处理这种（100% 正确且完美无缺）的语法。因此，在 .NET 4.5 中，WCF 将有一个新参数 ( `...?singlewsdl`) 来输出您的整个 WSDL，包括所有 XSD 元素 - 请参阅[WCF 4.5 中的新增功能？一个单一的 WSDL 文件](http://blogs.microsoft.co.il/blogs/idof/archive/2011/09/17/what-s-new-in-wcf-4-5-a-single-wsdl-file.aspx)以获得更多信息。

# grails - 使用 grails 创建独立应用程序

> ID：10370711
> 
> 赞同：7
> 
> 时间：2012-04-29T08:16:52.843
> 
> 标签：grails

我想知道是否有一个工具可以创建我的 grails 项目的可演示版本。我可以在 CD 或 USB 记忆棒上分发的东西，它们可以在每个环境中运行。

什么东西

*   附带一个 shell 脚本来启动应用程序
*   搜索系统上的空闲服务器端口（如果 8080 已在使用中，则不会出现错误消息）
*   启动码头服务器
*   使用我的应用程序启动标准浏览器

有人知道这样的工具吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-29T19:34:26.030

查看**[独立插件](http://grails-plugins.github.io/grails-standalone/docs/manual.v8/index.html)**，它可以更轻松地分发 Grails 应用程序的演示版本。

> “ **Standalone 插件**构建了一个可运行的 JAR 文件，其中包含从您的应用程序构建的嵌入式战争和一个**嵌入式 Tomcat 7 实例**。这允许您构建一个单一的存档，该存档可以通过运行 java -jar Standalone**在任何具有 Java 5 或更高版本的计算机上**运行.jar。这对于演示甚至是非常轻量级的低流量 Grails 应用程序安装非常方便。”

独立插件的完整文档在[这里](http://grails-plugins.github.io/grails-standalone/docs/manual.v8/index.html)

准备jar文件...

```
grails -Dgrails.env=demo build-standalone our_cool_demo.jar 
```

要运行 Grails 应用程序（端口被指定为参数）...

`java -jar /path/to/jar_name.jar cool_demo localhost 9000`

* * *

**更新：**

实际上有 2 个 Grails 独立插件：

1.  上述基于**Tomcat7**的[“**独立**”插件](http://grails-plugins.github.io/grails-standalone/docs/manual.v8/index.html)
***   ' [**jetty-standalone**](http://grails.org/plugin/jetty-standalone) ['插件，](http://grails.org/plugin/jetty-standalone)**它基于**Jetty**并以类似的方式工作****

 ****还有一些基于 Hudson 和 Winstone 项目的选项，但没有 Grails 插件。以下是一些包含更多信息的链接：*[使用 grails、maven 和 jetty 构建可执行战争，使用](http://krishnadasari.blogspot.co.uk/2011/01/build-executable-war-using-grails-maven.html)Jetty[和](http://eclipsesource.com/blogs/2009/10/02/executable-wars-with-jetty/)Winstone[的可执行战争](http://winstone.sourceforge.net/)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T12:28:22.597

想到的最好的事情是在安装了 grails 的 USB 记忆棒上使用 Linux 发行版。您可以将应用程序导出为 WAR 文件，然后创建一个包含`grails prod run-war`在启动时执行的脚本。最后，您可以使用以下命令打开 Firefox`firefox localhost:port#/AppName`

此选项的唯一缺点是您需要从摇杆启动，这会产生一些延迟时间。但是，优点是您只需要担心支持一个操作系统，启动时无需端口扫描和简单性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:17:44.323

Chris 提出的答案对我不起作用，但它为我提供了一个很好的起点：创建这样一个独立的应用程序似乎并不难：

*   jetty 是一个很好的起点：只需将 jetty 文件放到 U 盘上，然后通过将 .war 文件放到 jetty 的 webapps 目录中来部署您的 grails 应用程序
*   创建一个搜索两个（！）空闲端口的小型 groovy 脚本。您需要第二个来再次停止服务器
*   groovy 脚本可以启动和停止服务器
*   编译脚本以避免必须在目标机器上安装 groovy

而已。我想我会在找到更多时间时发布更多详细信息...****

# c# - WPF设计器窗口上方出现白色边框

> ID：10370712
> 
> 赞同：2
> 
> 时间：2012-04-29T08:16:53.933
> 
> 标签：c#, wpf, window

在 Visual Studio 中使用设计器时，顶部会出现一个白条。我无法在此栏中放置任何内容，因为靠近它的任何内容都在其下方。

![http://i.imgur.com/tqp59.png](../Images/350c16ecf4cb7cd3dcb4243c70cabca3.png)

这会导致在我无法放置内容的位置出现黑条，并且无法设计窗口，因为所有位置都从设计器变为运行时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:36:20.350

顶部的白条是为 Window Bar 留出空间。您可以通过更改围绕所有控件的网格的边距来更改应用程序顶部的黑色间隙：

```
<Grid Margin="0,-10,0,0">

</Grid> 
```

其中 Margin="left,up,right,down" 所以 Margin="0,-10,0,0" 会将整个网格边距向上移动 10 个像素，因此您可以将所需的任何内容添加到顶部的额外空间中. 这也应该摆脱你的黑条问题。

# c++ - 模板类的特殊成员函数何时实例化？

> ID：10370713
> 
> 赞同：9
> 
> 时间：2012-04-29T08:16:57.210
> 
> 标签：c++, templates, c++11, clang, copy-constructor

模板类的特殊成员函数（特别是复制/移动构造函数和复制/移动赋值运算符）何时实例化？一旦类本身被实例化，还是仅在需要它们时？

这出现在以下情况：

```
template <class T, class U>
struct pair
{
    T first;                 
    U second;                

    pair() : first(), second() {}

    pair(const pair&) = default;
};

struct S
{
    S() {}
    S(const S&) = delete;
    S(S&&) = default;
};

int main()
{
    pair<int, S> p;
} 
```

Clang 拒绝编译此代码，出现以下错误：

```
test.cpp:9:5: error: the parameter for this explicitly-defaulted copy constructor is const, but a member or base requires it to be
      non-const
    pair(const pair&) = default;
    ^
test.cpp:21:18: note: in instantiation of template class 'pair<int, S>' requested here
    pair<int, S> p;
                 ^ 
```

建议它在实例化类后立即尝试实例化复制构造函数。

然而，GCC 可以很好地编译代码，这表明它只会在实际需要时尝试实例化复制构造函数。

哪个编译器的行为是正确的？

（赋值运算符也有类似的差异。）

**更新**：这与`pair`此示例中的复制构造函数是`default`ed 的事实有关，因为如果我将其定义更改为

```
pair(const pair& p) : first(p.first), second(p.second) {} 
```

然后代码也会通过clang。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T09:08:44.213

查看当前 C++11 标准的第 14.7.1 节。引用草案的 n3242 版本：

> 类模板特化的隐式实例化导致类成员函数、成员类、静态数据成员和成员模板的声明的隐式实例化，而不是定义或默认参数的隐式实例化；它会导致成员匿名联合的定义的隐式实例化。除非已显式实例化或显式特化类模板或成员模板的成员，否则当在需要成员定义存在的上下文中引用特化时，会隐式实例化成员的特化；尤其是，

因此，这意味着，当您将类用作上述类型时，仅使用它实例化声明。因此，不应实例化复制构造函数的实际（默认）实现，因为在上面的代码中不需要它。所以 GCC 正确地处理了这个问题，而 Clang 没有。

您的编辑还表明，Clang 过早地为默认复制构造函数生成实现，因为您直接实现的复制构造函数也是错误的（您不能`S`像在自己的实现中那样调用复制构造函数）。由于默认实现和您的实现在所有方面都应该相同（包括实例化时间），我认为这是一个 clang 错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T21:45:54.317

标准的相关段落是[dcl.fct.def.default]/1：

> 显式默认的函数应 [...] 具有相同的声明函数类型（除了可能不同的 ref 限定符以及在复制构造函数或复制赋值运算符的情况下，参数类型可能是“引用非-const `T`"，其中`T`是成员函数的类的名称) 就好像它已被隐式声明

即使从未使用过默认功能，此规则也适用。现在，[class.copy]/9 说：

> 隐式声明的复制构造函数将具有以下形式
> 
> `X::X(const X&)`
> 
> 如果 [...] 的所有非静态数据成员`X`都属于类类型`M`[...]，则每个此类类型都有一个复制构造函数，其第一个参数的类型为`const M&`or `const volatile M&`。
> 
> 否则，隐式声明的复制构造函数将具有以下形式
> 
> `X::X(X&)`

因此，这样的示例格式不正确（并且应该产生您所看到的诊断）：

```
struct A {
  A();
  A(A&); // Note, non-const type A in copy constructor
};
template<typename T>
struct B {
  T t;
  B();
  B(const B&) = default;
};
B<A> b; // error, B<A>::B(const B&) is defaulted but has the wrong type 
```

但是，在您的示例中，此规则不适用。由于 clang 错误（已修复），已删除的复制构造函数被错误地认为具有非常量参数类型，从而导致此错误。

# erlang - 演员模型和碰撞检测

> ID：10370717
> 
> 赞同：10
> 
> 时间：2012-04-29T08:18:30.733
> 
> 标签：erlang, interaction, actor-model

我只是在考虑将*Erlang*用于游戏服务器的可能性。（哦，我不是 Erlang 专家，只是考虑舞台）这意味着使用*Actor Model*进行游戏模拟。当然，最大的吸引力在于它的并发分布在多个节点上。

我目前的大问题是我应该如何执行多角色交互，如碰撞检测。（这只是一个例子）

尽管任何游戏都需要碰撞检测，但从 Actor 模型的本质来看，它看起来效率不高，甚至没有意义，因为它需要全局同步的状态查询和所有目标 Actor 的更新。如果我使用任何同步，它会覆盖 Erlang 演员模型的所有好处。

当然，如果我正确使用空间分区，一次定位演员可能会更小，但这只是一种优化，而不是主要答案。或者这是这个问题的正确答案？通过减少交互参与者的数量来减少同步范围？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T11:53:50.567

将地图拆分成更小的部分，让每个部分成为自己的进程（您甚至可以将其拆分得如此之多，以至于每个图块都是自己的进程）。试图移动的玩家将向图块/子地图发送一条消息，说明它正在前往那里，并且图块会回答是否可以。这避免了冲突，因为瓦片/子地图一次只处理一条消息。多个 sub-maps/tiles 可以同时处理消息，所以它仍然是一个并发程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T12:11:40.970

我有一个基于太空的游戏在 Erlang 中做服务器。诀窍是每个位置/节点/等也是一个演员。它连续运行物理并定期将信息发送给每个游戏实体参与者。

当您开始更抽象地思考演员/实体是什么时，整个事情变得更加清晰。例如，碰撞可以是成熟的演员。这使得客户端更容易——将图形和声音效果与碰撞联系起来。在服务器端，它也能做到——在给定时间内防止两个实体之间发生多次碰撞效应。

# c# - Windows Phone 中的 MessageBoxButtons 成员

> ID：10370718
> 
> 赞同：2
> 
> 时间：2012-04-29T08:18:57.430
> 
> 标签：c#, silverlight, windows-phone-7

System.Windows.Forms 中的 MessageBoxButtons 类具有以下成员：OK、OKCancel、AbortRetryIgnore、YesNo、YesNoCancel、RetryCancel。

我为 Windows Phone 写作，但看不到这个成员。我只看到 OK 和 OKCancel：![在此处输入图像描述](../Images/163ce580a5a2261bb33cc7a000368ce7.png) 但 OK 和 OKCancel 不是我需要的。如果我需要 YesNo 或其他按钮，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:49:35.987

您可以自定义消息框，一个特定的实现如下所示：-

[http://www.codeproject.com/Articles/271596/Customizing-MessageBox-on-Windows-Phone-7](http://www.codeproject.com/Articles/271596/Customizing-MessageBox-on-Windows-Phone-7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:32:54.387

如果需要，您可以使用 XNA 中的[Guide.BeginShowMessageBox](http://msdn.microsoft.com/en-us/library/dd940233%28v=xnagamestudio.40%29.aspx)方法自定义消息框的按钮文本，因此无需创建新控件！

如果您在应用程序中使用 MVVM 架构，您可以在[Cimbalino Phone Windows Toolkit](http://cimbalino.org)上找到[MessageBoxService](https://github.com/Cimbalino/Cimbalino-Phone-Toolkit/blob/master/src/Cimbalino.Phone.Toolkit/Services/MessageBoxService.cs)

# facebook - 来自 node.js 的 Facebook access_token 失败

> ID：10370720
> 
> 赞同：3
> 
> 时间：2012-04-29T08:19:59.270
> 
> 标签：facebook, node.js, facebook-graph-api

尝试从**node.js**服务器获取 facebook **access_token时出现此错误：**

 **> {"error":{"message":"(#803) 您请求的某些别名不存在：access_token","type":"OAuthException","code":803}}

以下是获取access_token的代码：

```
var options={
        host:'graph.facebook.com',      
        path:'oauth/access_token?client_id=MYAPPID&redirect_uri=http://127.0.0.1:8000/&client_secret=MYAPPSECRET&code=CODEOBTAINEDFROMFB'
}
http.get(options,function(res){
    res.on('data', function (chunk) {
        console.log('BODY: ' + chunk);
    });
}); 
```

从我的浏览器请求相同的 url 工作正常，我也得到了 access_token。这里的问题是什么？

**更新** 这可能是我在 node.js 中经历过的最有趣的事情。我已将上述代码更新为：

```
var http=require('http')
var options={
        host:'grah.facebook.com',       
        pathname:'/oauth/access_token',
        search:'client_id=MYAPPID&redirect_uri=http://127.0.0.1:8000/&client_secret=MYAPPSECRET&code=CODEOBTAINEDFROMFB'
}

http.request(options,function(res){
        console.log('http fb code')
         res.setEncoding('utf8');
    res.on('data', function (chunk) {
        console.log('BODY: '+chunk);
    });     
}); 
```

发生的事情是服务器抛出一个名为**socket hang up**的错误。我的网络连接（通过移动调制解调器连接的互联网）也立即中断！在谷歌搜索这个问题时，我发现很多类似的，但找不到完美的解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:51:47.543

[HTTP 文档](http://nodejs.org/docs/latest/api/http.html#http_http_request_options_callback)作为选项列出`path`，但指出：

> `options`对准[`url.parse()`](http://nodejs.org/docs/latest/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost)

您应该在创建 URL 时使用`pathname`（和`search`用于查询字符串）而不是。`path`另请参阅[`URL`node.js 的文档](http://nodejs.org/docs/latest/api/url.html#url_url)

```
var options={
  host:'graph.facebook.com',      
  pathname:'oauth/access_token',
  search: 'client_id=MYAPPID&redirect_uri=http://127.0.0.1:8000/&client_secret=MYAPPSECRET&code=CODEOBTAINEDFROMFB'
}
http.get(options,function(res){
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
}); 
```

**更新：**
在[`url.format()`](http://nodejs.org/docs/latest/api/url.html#url_url_format_urlobj)文档中对 URL 对象的描述中没有`path`作为选项列出，因此它可能仅由[`url.parse()`](http://nodejs.org/docs/latest/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost)

URL 上的节点文档指出：

> `path`: 连接路径名和搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:48:35.093

问题在于http对象。Facebook 仅在使用**client_secret**请求时允许**https**。所以这可以按我的预期工作：

 **```
var options={
        host:'graph.facebook.com',      
        path:'/oauth/access_token?client_id=APPID&redirect_uri=http://127.0.0.1:8000/&client_secret=CLIENTSECRET&code=FBUSERCODE'
}       
var https=require('https'); 
https.get(options,function(res){
        console.log('http fb code')
         res.setEncoding('utf8');       
         res.on('data', function (chunk) {
                console.log('BODY: '+chunk);
        });
}); 
```****

# linux - 如何抑制从加载的模块代码中发出的 Perl 警告？

> ID：10370724
> 
> 赞同：10
> 
> 时间：2012-04-29T08:20:36.430
> 
> 标签：linux, perl, module, warnings

我的 Perl 程序正在从通过 USB 连接的串行设备读取数据。我的伪 Perl 脚本的标题：

```
use warnings;
use strict;

use Device::SerialPort;
my $PortObj = tie( *$handle , "Device::SerialPort" , $PortName ) or die "Cannot open serial port: $!\n";
while ( 1 ) {
  my $readLength = read( $handle , my $frameData , $frameLength )
} 
```

一切正常，即使我从 USB 拔下设备，当设备文件消失并重新出现时，我也能够从这种情况中恢复。我可以捕获从我自己的脚本产生的所有错误，但是加载的模块 (Device::SerialPort) 也会产生警告，我不希望它们出现在我的日志记录中。

我可以在我的代码中添加某种标志，这样我就看不到这些特定的警告吗？对我来说重要的是，只有来自模块的警告被禁止，而不是来自我自己的脚本的警告。目前它看起来像这样：

```
[/dev/ttyUSB1] 0x0020：00 00 00 00 00 00 00 00 00 AA 93 82 73 68 5E 58：.......sh^X
[/dev/ttyUSB1] 0x0030：55 54 52 52 4F 4E 50 51 50 00 00 00 00 00 00 00：UTRRONPQP.......
在 /usr/lib/perl5/Device/SerialPort.pm 第 2214 行加上 (+) 使用未初始化的值 $count_in。
在连接 (.) 或 /usr/lib/perl5/Device/SerialPort.pm 第 2232 行的字符串中使用未初始化的值 $string_in。
[/dev/ttyUSB1] 需要重启！
[/dev/ttyUSB1] 无法打开串口：没有那个文件或目录
[/dev/ttyUSB1] 无法打开串口：没有那个文件或目录
[/dev/ttyUSB1] 无法打开串口：没有那个文件或目录

[/dev/ttyUSB1] 0x0000：41 42 01 40 71 01 1C E4 80 99 80 80 80 80 00 00：AB.@q.......
[/dev/ttyUSB1] 0x0010：00 03 00 00 83 00 01 01 00 00 00 00 00 00 00 00：......

```

所以这是关于`Use of uninitialized value`我想摆脱的两个警告。其他警告是我自己的日志记录。

*   libdevice-serialport-perl 1.04-2build1
*   perl v5.12.4

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T08:36:10.137

您可以尝试拦截警告：

```
$SIG{'__WARN__'} = sub { warn $_[0] unless (caller eq "Device::SerialPort"); }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T11:20:24.143

在我的主目录中复制了该模块并添加了两行：

```
$ diff SerialPort.pm /usr/lib/perl5/Device/SerialPort.pm 
2207,2208d2206
<     unless ( defined $count_in ) { $count_in = 0; }
<     unless ( defined $string_in ) { $string_in = ""; } 
```

这似乎有效。通知作者。

# android - 仅通过短信分享

> ID：10370731
> 
> 赞同：4
> 
> 时间：2012-04-29T08:22:15.947
> 
> 标签：android, sms, send

**我的应用程序有一个图像按钮，单击该按钮应仅通过 SMS**发送一段文本。我如何让我的应用程序做到这一点？请帮忙。

我还希望用户能够从他设备上的联系人列表中选择一个联系人。

朱马纳

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-29T15:28:34.040

要使用意图发送短信，请使用以下代码：

```
String smsBody="Sms Body";
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.putExtra("sms_body", smsBody); 
sendIntent.setType("vnd.android-dir/mms-sms");
startActivity(sendIntent); 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T08:40:41.663

启用发送短信的步骤：

1- 在 android-manifest 中，添加发送短信权限，如下所示：

```
<uses-permission android:name="android.permission.SEND_SMS" /> 
```

2-在你的活动中添加这个方法：

```
public void sendSms(final String receiverNumber, final String smsBody) {
    SmsManager smsManager = SmsManager.getDefault();
    smsManager.sendTextMessage(receiverNumber, null, smsBody, null, null);        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-21T10:10:07.300

这是通过意图发送 SMS/MMS 的唯一正确方法：

[https://developer.android.com/guide/components/intents-common#SendMessage](https://developer.android.com/guide/components/intents-common#SendMessage)

不需要`setType("vnd.android-dir/mms-sms")`或其他恶作剧。

有这样的意图的官方文档，应该遵循。

对于 SMS，您只需要这样：

```
fun composeSmsMessage(message: String) {
    val intent = Intent(Intent.ACTION_SENDTO).apply {
        type = HTTP.PLAIN_TEXT_TYPE
        data = Uri.parse("smsto:")  // This ensures only SMS apps respond
        putExtra("sms_body", message)
    }
    if (intent.resolveActivity(packageManager) != null) {
        startActivity(intent)
    }
} 
```

如果您有 SMS/MMS 的收件人，您可以将其添加到数据`Uri`之后`smsto:`，例如`smsto:+123456789`)，否则用户将在 SMS/MMS 应用程序中选择收件人。

如果文本太长，它将作为彩信发送，如果您需要发送带有图像或视频的彩信，您可以类似地执行此操作，但添加一个`Uri`as`Intent.EXTRA_STREAM`并相应地指定类型（图像/视频）。`Uri`需要由提供相应图像或视频的公开内容提供商处理。

> 在个人笔记上...
> 
> （我希望有一种方法可以在堆栈溢出中为“错误答案”投票，以避免人们只是将错误的东西复制到他们的应用程序中）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-29T08:40:18.720

试试下面的代码...在按钮的 onClickListener() 中添加这段代码。

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
        sharingIntent.setType("text/plain");
        String shareBody = "Here is the share content body";
        sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject Here");
        sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
        startActivity(Intent.createChooser(sharingIntent, "Share via")); 
```

# css - 在 ul 中引用单独的 li 选择器

> ID：10370733
> 
> 赞同：0
> 
> 时间：2012-04-29T08:22:30.127
> 
> 标签：css

我正在创建一个水平导航栏，并且我有一个我正在尝试设置样式的无序列表。当按钮悬停时，我希望每个列表项显示不同的颜色。为此，我`li`在 main中引用了一个单独的`ul`. 我的问题是我似乎无法`id`在 header 中引用被调用的紫色`id`。有任何想法吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>

<style type="text/css">

body {background-color:#EEEEEE}

#header {list-style-type:none; width:978px; height:35px; margin:0 0 25px 0; padding:0}
#header li {float:left; width:100px; height:29px; background:transparent url(images/menu_grad_0.gif) repeat-x; padding:9px 0 0 10px; margin-right:1px}
#header li a {color:#FFFFFF; font-size:13px; font-weight:bold; display:block; text-decoration: none}
#header #purple li a:hover {color:red}

#container {
    background-color: #6c6b6f;
    height: auto;
    margin: 0 auto;
    padding: 10px;
    text-align: left;
    width: 978px
}

</style>

</head>
<body>

<div id="container">

<ul id="header">
    <li id="purple"><a href="#">&raquo;&nbsp;Home</a></li>
    <li><a href="#">&raquo;&nbsp;About Me</a></li>
    <li><a href="#">&raquo;&nbsp;Contact</a></li>
</ul>

</div><!--Close DIV Container-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T08:26:35.093

不应该只是...

```
#header #purple a:hover {color:red} 
```

那个选择器中没有多余的 li 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:42:21.333

另一种解决方案是通过`:first-child`选择器定位第一个 li - 没有任何`id`s。像这样：

```
#header li:first-child a:hover{
    color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T10:14:21.150

对于像这样的 id 使用一个类，但你可以用这样的 id 来做：

```
#header li#purple a:hover {color:red} 
```

那会做你想做的，但我个人会使用一个类，因为你可能希望页面上的其他东西是“紫色”的

```
#header li.purple a:hover {color:red}
<li class="purple"><a href="#">&raquo;&nbsp;Home</a></li> 
```

马丁

# authentication - 我们需要对我们的应用程序进行数字签名吗？

> ID：10370738
> 
> 赞同：1
> 
> 时间：2012-04-29T08:23:18.537
> 
> 标签：authentication, code-signing, binaries

我们有一个可从 Internet 下载的企业对消费者 (B2C) 应用程序（Windows 和 Macintosh）。我们将签署我们的二进制文件真的很重要吗？

所有大公司（Skype、Google (Talk) 等）都签署他们的二进制文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:02:38.413

我不确定 Macintosh，但请尝试文章*[Windows try Driver Signing Requirements for Windows](http://msdn.microsoft.com/en-us/windows/hardware/gg487317)*。

我想如果你签署你的申请，它“看起来更好”。大多数大公司可能会签署他们的二进制文件，但我还没有看到任何关于它的统计数据。这纯粹是我的观察。

# javascript - 仅打印文档的某些部分最简单的想法是什么

> ID：10370742
> 
> 赞同：0
> 
> 时间：2012-04-29T08:24:12.980
> 
> 标签：javascript, css, printing

我正在尝试仅打印文档的选定区域。我尝试将所选区域/div的内容添加到新窗口并调用window.print，但出现了关于css的问题。由于我的页面包含来自多个文件的 css，因此我很难再次加载这些 css 文件。

所以我需要将选定的区域/div 内容与内联样式导出到新文档并打印出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:41:05.610

首先，如果您的外部样式表对您的打印输出弊大于利，您可以通过简单的媒体查询将它们限制为屏幕媒体：`<link rel="stylesheet" href="style.css" media="screen,projection" />`

这样，您的打印样式表可以从无样式的页面开始，而不必重置任何以前的表格。

典型的打印样式表会隐藏广告、将颜色重置为高对比度颜色并调整排版 - 看看HTML5 Boilerplate[的打印部分](https://github.com/h5bp/html5-boilerplate/blob/master/css/style.css#L274)。

如果“选定区域”是指用户可以决定需要打印的内容，您可以通过`.addClass('print');`对 JavaScript 处理程序执行类似操作轻松实现该目标，然后您的打印 CSS 可能如下所示：

```
* {display: none;}
.print, .print * {display: block;} /* Or inline, depending on the element */ 
```

如果你不关心 IE<9，你可以这样做：

```
body :not(.print) {display: none;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:29:42.120

您可以使用打印媒体类型来指定仅在您打印页面时应用到您的页面的 CSS 文件。您可以在打印 CSS 文件中隐藏所有不必要的元素。

[http://www.javascriptkit.com/dhtmltutors/cssmedia.shtml](http://www.javascriptkit.com/dhtmltutors/cssmedia.shtml)

# facebook - Facebook 评论不接受 {$baseurl}

> ID：10370744
> 
> 赞同：0
> 
> 时间：2012-04-29T08:24:19.300
> 
> 标签：facebook, facebook-comments

我已经在我的成人视频脚本（非成人内容）上手动安装了 facebook 评论，但在评论框下方不断收到错误消息：

```
Warning: http://invalid.invalid/video/%7B$video.VID%7D/%7B$video.title%7D is unreachable. 
```

我把它放在我的文件中：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=MYAPPID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div style="padding-bottom:10px;"><img src="/templates/frontend/default/images/facebook-comment.gif"></div>
<div class="fb-comments"  data-href="{$baseurl}/video/{$video.VID}/{$video.title}" data-num-posts="20" data-width="990" data-colorscheme="dark"></div> 
```

根据 avs 论坛上的说明，但它所做的一切都会产生该错误。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:32:53.723

您的模板 (?) 标记`{$baseurl}`，`{$video.VID}`并`{$video.title}`没有得到解析并在评论小部件使用的最终 HTML 中按原样使用，导致 URL 错误。

您应该确保您的最终 URL`data-href`是正确的，而不是像这样的字面意思`{$baseurl}/video/{$video.VID}/{$video.title}`。

**更新：**
目前还不清楚为什么这应该起作用，你没有在你的问题中描述任何将替换`{$baseurl}`为真实 URL 的内容......

如果您只想为当前页面添加评论社交插件，您可以简单地省略`data-href`属性：

```
<div class="fb-comments" data-num-posts="20" data-width="990" data-colorscheme="dark">/div> 
```

但是，如果您需要它出现在其他页面上，则需要使用与评论关联的 URL 作为`data-href`. 它应该相对容易，但取决于您使用什么语言/框架来获取正确的 URL...

# asp.net-mvc-3 - 实体和派生视图模型 - 仅更新公共属性

> ID：10370745
> 
> 赞同：3
> 
> 时间：2012-04-29T08:24:23.773
> 
> 标签：asp.net-mvc-3, entity-framework, ef-code-first

假设我有一个名为 User 的类，这是我的基本实体（我将它与 DbContext 一起用作 DbSet 用户），我将其用作我的数据访问层的底层。假设类看起来像这样：

```
public class User
{
    [Key]
    public int Id { get; set; }
    public bool Active { get; set; }
    public string Description { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public byte[] Photo { get; set; }
    public DateTime Created { get; set; }
} 
```

现在我想要一个纯粹的视图，我只显示用户是否处于活动状态，以及允许我更改该值的简单复选框。我不想加载任何其他实体属性，特别是属性 Photo，因为它太疯狂了。我创建了如下所示的 ActivateUserModel：

```
public class ActivateUserModel
{
    [Key]
    public int Id { get; set; }
    public bool Active { get; set; }
} 
```

我有一个名为 Activate 的强类型视图，它接受 ActivateUserModel 并显示它（它只是一个复选框，对 Id 隐藏）然后我有 [HttpPost] Activate 捕获 ActivateUserModel 的操作，将其转换为 User 实体，然后将更改保存到数据库. 这是 POST 动作：

```
 [HttpPost]
    public ActionResult Activate(ActivateUserModel model)
    {
        if (ModelState.IsValid)
        {
            User user = new User { Id = model.Id, Active = model.Active };
            db.Users.Attach(user);
            db.Entry(user).Property(u => u.Active).IsModified = true;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(model);
    } 
```

这就像一个魅力。我已经监视了针对 SQL 服务器发出的查询，我加载的只是 Id/Active 对，我更新的所有内容也是基于 id 的 Active 更改。

但是我不喜欢代码的外观。假设我有具有 50 个属性的实体和具有 25 个属性的视图。我不想在我说 IsModified=true 的地方写 25 行。

所以我的问题是：有没有更有效的方法来做同样的事情，而不深入研究任何基于反射的方法？我想将数据从任何视图模型传输到实体，然后只保存这些属性。

提前感谢您的回复，我希望我的问题足够清楚:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T12:41:02.047

你可以这样做：

```
[HttpPost]
public ActionResult Activate(ActivateUserModel model)
{
    if (ModelState.IsValid)
    {
        User user = db.Users.Single(u => u.Id == model.Id);
        db.Entry(user).CurrentValues.SetValues(model);
        db.SaveChanges();

        return RedirectToAction("Index");
    }
    return View(model);
} 
```

`db.Entry(user).CurrentValues.SetValues(model)`将检查 in 中是否`user`也存在同名`model`的属性，如果是，则将属性值从 复制`model`到`user`。如果不是，它使属性值`user`保持不变。

我怀疑这不是基于反射的。但是上面的代码是直接的方法，旨在完全支持您的方案。

**编辑**

上面的代码加载了包括属性`user`在内的完整实体。`Photo`如果您不喜欢加载可能很大的二进制字段，我建议您使用除`IsModified`技巧之外的其他策略来解决此问题。使用 Entity Framework 进行更新强烈依赖于更改跟踪，这需要您加载完整的实体。当您试图避免这种情况并`Modified`手动设置特定属性的标志时，您的代码将会复杂化。

您可能知道，当您从数据库中获取实体时，不能排除加载单个标量属性。我建议将该属性移动到一个只有一个和属性`Photo`的新实体中，并将​​导航属性放入类中。然后，您可以通过延迟加载、急切加载或显式加载来决定是否要同时加载照片。`UserPhoto``Id``Photo``UserPhoto``User``User`

如果要将其存储在单独的表中，您可以在`User`和之间创建一对一的映射。或者您甚至可以将列保留在表中并通过[Table Splitting](http://weblogs.asp.net/manavi/archive/2011/04/24/associations-in-ef-4-1-code-first-part-4-table-splitting.aspx)将两个实体映射到同一个表。`UserPhoto``UserPhoto``Photo``User``User``UserPhoto`

**编辑 2**

参考您的评论，该方法会加载“不必要的东西”。我忘了提及以下内容：

实际上，在上面的代码中，您需要从数据库中加载实体。但是，当您使用EF 应用于`model`加载的实体时，只会将那些属性标记为与数据库中的原始值相比确实发生了变化。生成的 UPDATE 语句将只包含那些列。因此，编写 UPDATE 语句的成本最小化。`user``SetValues(model)``Modified`

如果您不想加载实体，则您不知道数据库中的当前列值，也不知道真正发生了什么变化。您唯一的机会是强制对*所有*属性进行更新，以确保数据库中的行得到正确更新。在您的示例中，您必须将`IsModified`ViewModel 中包含的所有 25 个属性设置为`true`. 生成的 SLQ UPDATE 语句将包含所有 25 列。所以，UPDATE 语句可能要贵得多，而且确实——借用你的话——不必要的东西。

# odata - 使用 OData 和 SAP 网关服务更新 SAP 后端数据时出错

> ID：10370749
> 
> 赞同：0
> 
> 时间：2012-04-29T08:25:04.277
> 
> 标签：odata, sap-gateway

我正在尝试使用 OData 和 SAP Gateway 服务更新 SAP 后端。在执行它时会引发错误并且不会更新后端中的数据。我正在尝试更新 SAP CRM 后端中的“帐户”数据。

错误消息包含以下响应：

> 文件 {ServiceName}({BP_Number_of_that_Account}) 已成功上传

此应用程序已部署到 SAP Netweaver 门户。我将断点放在后端，发现它甚至没有到达后端。

代码如下所示：

```
OData.request( 
        { 
            headers: {'x-requested-with' : 'XMLHttpRequest','Content-Type': 'application/atom+xml', 'DataServiceVersion': '2.0'},
            requestUri: "/sap/Gateway/PGY/SERVICEACCOUNTS/SERVICEACCOUNTSCollection("+recordToUpdate.data.BP_NUMBER+")?sap-client=100&$format=xml", 

            method: "PUT", 
            data: {
                ACCOUNT_NAME: recordToUpdate.data.ACCOUNT_NAME,
                BP_NUMBER: recordToUpdate.data.BP_NUMBER,
                CITY: recordToUpdate.data.CITY,
                COUNTRY: recordToUpdate.data.COUNTRY,
                E_MAIL: recordToUpdate.data.E_MAIL,
                HOUSE_NO: recordToUpdate.data.HOUSE_NO,
                POSTL_COD1: recordToUpdate.data.POSTL_COD1,
                REGION: recordToUpdate.data.REGION,
                STREET: recordToUpdate.data.STREET,
                TELEPHONE: recordToUpdate.data.TELEPHONE

            },      
            user: "****", 
            password: "****"},
            function (data, response) {
                //success handler
                console.log(response);
                console.log('Successfully updated object');
            },

            function (err)
            {
                //error handler 
                console.log('error while updating');
                console.log(err);

            }
); 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:30:17.547

1.  登录网关系统，查看事务/IWFND/ERROR_LOG中的日志

2.  始终启动事务 SRDEBUG 并确保为您用于请求的同一用户设置断点。

# java - 从列表中删除重复元素

> ID：10370750
> 
> 赞同：5
> 
> 时间：2012-04-29T08:25:07.387
> 
> 标签：java, list, duplicates

我开发了一个数组列表。

```
ArrayList<String> list = new ArrayList<String>();

list.add("1");
list.add("2");
list.add("3");
list.add("3");
list.add("5");
list.add("6");
list.add("7");
list.add("7");
list.add("1");
list.add("10");
list.add("2");
list.add("12"); 
```

但如上所示，它包含许多重复的元素。我想从该列表中删除所有重复项。为此，我认为首先我需要将列表转换为集合。

Java 是否提供将列表转换为集合的功能？是否有其他工具可以从列表中删除重复项？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-29T08:31:01.440

您可以使用以下方法转换为 Set：

```
Set<String> aSet = new HashSet<String>(list); 
```

或者，您可以使用以下命令转换为集合并返回列表：

```
list = new ArrayList<String>(new HashSet<String>(list)); 
```

然而，这两者都不太可能保持元素的顺序。为了保持顺序，您可以`HashSet`在迭代时使用 a 作为辅助结构：

```
List<String> list2 = new ArrayList<String>();
HashSet<String> lookup = new HashSet<String>();
for (String item : list) {
    if (lookup.add(item)) {
        // Set.add returns false if item is already in the set
        list2.add(item);
    }
}
list = list2; 
```

在重复的情况下，只有第一次出现在结果中。如果您只想出现最后一次出现，那将是一个更棘手的问题。我会通过反转输入列表，应用上述内容，然后反转结果来解决它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-29T08:27:49.093

这个：

```
Set<String> set = new HashSet<String>();
set.addAll(list);
list.clear();
list.addAll(set); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-07T17:25:19.717

**Java 8**方式： `list.stream().distinct().collect(Collectors.toList());`

完毕 ：）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-06T20:18:52.110

如果您需要保留元素顺序，请使用 LinkedHashSet 而不是 HashSet

```
Set<String> mySet = new LinkedHashSet<String>(list); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-29T08:31:33.117

只需使用普通的构造函数：

```
ArrayList<T> yourList;
HashSet<T> set = new HashSet<T>(yourList); 
```

您将拥有一个新的项目视图，删除了重复项，但您将失去订购。到目前为止发布的每个答案都是如此。要继续排序，您应该迭代现有列表并仅在元素重复时删除元素（这可以使用集合来检查是否已找到元素）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-29T08:30:53.937

您可以首先使用一个集合或转换为它：

```
 Set<String> set = new TreeSet<String>(list); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-06T20:11:35.763

```
package com.scjp.dump.test;

import java.util.ArrayList;

import java.util.Iterator;

import java.util.List;

public class ArrayListTest {

    public static void main(String[] args) {

        List<Integer> mylist2 = new ArrayList<Integer>();

        List<Integer> mylist1 = new ArrayList<Integer>();
        mylist1.add(3);
        mylist1.add(3);
        mylist1.add(5);
        mylist1.add(9);
        mylist1.add(2);
        mylist1.add(5);
        mylist1.add(5);
        mylist1.add(3);
        mylist1.add(3);
        mylist1.add(3);
        mylist1.add(9);
        mylist1.add(56);
        System.out.println(mylist1);
        Iterator<Integer> itr1 = mylist1.listIterator();
        while (itr1.hasNext()) {
            Integer itn1 = (Integer) itr1.next();
            if (mylist2.contains(itn1) == false)
                mylist2.add(itn1);
        }

        System.out.println(mylist2);

    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-28T05:05:44.933

这里有一些方法可以实现这一点。

**使用 Java 8**：

```
List<String> distinctLambda=originalList.stream()
           .distinct().collect(Collectors.toList());
 System.out.println(distinctLambda); 
```

**使用设置**：

```
Set<String> distinctSet=new HashSet<>(originalList);
        System.out.println(distinctSet); 
```

**正常的for循环**：

```
List<String> distinctNewList=new ArrayList<>();
        for (String temp:originalList) {
            if(distinctNewList.size()==0){
                distinctNewList.add(temp);
                continue;
            }

            if(!distinctNewList.contains(temp)){
                distinctNewList.add(temp);
            }
        }

        System.out.println(distinctNewList); 
```

这是您的数据集：

```
ArrayList<String> originalList = new ArrayList<>();
        originalList.add("1");
        originalList.add("2");
        originalList.add("3");
        originalList.add("3");
        originalList.add("5");
        originalList.add("6");
        originalList.add("7");
        originalList.add("7");
        originalList.add("1");
        originalList.add("10");
        originalList.add("2");
        originalList.add("12"); 
```

# javascript - 将 DOM 元素对象作为字符串返回？

> ID：10370751
> 
> 赞同：1
> 
> 时间：2012-04-29T08:25:22.730
> 
> 标签：javascript, html, dom

我不知道如何表达我的问题，所以我将发布我的代码并解释我正在尝试做的事情：

```
function getNewElement(tagName, className, idName, text){
    var newElement = document.createElement(tagName);
    newElement.className = className;
    newElement.id = idName;
    newElement.innerHTML = text;

    return newElement;
} 
```

如果我打电话

```
getNewElement("div", "meow", "meow1", getNewElement("span","meow", "meow2", "blahblahblah")); 
```

我只是得到

```
<div id="meow1" class="meow">[object HTMLSpanElement]</div> 
```

所以我的问题是，我将如何编写它以返回一个字符串而不进行转换（可能是昂贵的操作？）或用字符串修补贫民区。

更新：贫民窟补丁版本：

```
function getNewElement(tagName, className, idName, text){
    return '<' + tagName + ' class=' + className + ' id=' + idName + '>' + text + '</' + tagName + '>';     
} 
```

实现了我想要的功能，但我觉得它不是那么优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:37:48.790

不确定，但如果你想要`#meow2`new element的内容`#meow1`，像你一样使用语句，这将是一个解决方案：

```
function getNewElement(tagName, className, idName, contents){
    var newElement = document.createElement(tagName);
    newElement.className = className;
    newElement.id = idName;
    newElement.innerHTML = 
          typeof contents === 'string' ? contents : contents.innerHTML;
    return newElement;
} 
```

现在

```
getNewElement("div", "meow", "meow1", 
              getNewElement("span","meow", "meow2", "blahblahblah")); 
```

将创建一个新元素`#meow1`，其中包含新创建元素的内容`#meow2`。附加在文档中的某处，它看起来像：

```
<div class="meow" id="meow1">blahblahblah</div> 
```

否则，如果您想`#meow2`成为 的孩子`#meow1`，这将是一个解决方案：

```
function getNewElement(tagName, className, idName, contents){
    var newElement = document.createElement(tagName);
    newElement.className = className;
    newElement.id = idName;
    if (typeof contents === 'string'){
      newElement.innerHTML = contents;
    } else {
      newElement.appendChild(contents);
    }
    return newElement;
} 
```

现在，如果您愿意：

```
document.body.appendChild(
     getNewElement("div", "meow", "meow1", 
                   getNewElement("span","meow", "meow2", "blahblahblah"))
); 
```

这将是结果：

```
 <div class="meow" id="meow1">
  <span class="meow" id="meow2">blahblahblah</span>
 </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T08:27:40.967

而不是`innerHTML`，尝试`appendChild`。

newElement.appendChild(文本);

编辑：这是你想要达到的目标吗？

```
if(text instanceOf Object) {
    newElement.appendChild(text);
} else {
    newElement.createTextNode(text);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T09:12:24.777

更改您的函数以采用多种类型的参数`text`

```
function getNewElement(tagName, className, idName, text){
    var newElement = document.createElement(tagName);
    newElement.className = className;
    newElement.id = idName;
    newElement.innerHTML = 
          typeof text === 'string' ? text: text.outerHTML;
    return newElement;
} 
```

# bash - 如何处理shell脚本中的空白

> ID：10370755
> 
> 赞同：0
> 
> 时间：2012-04-29T08:26:12.310
> 
> 标签：bash, shell

我想将目录中的所有文件名放入变量中。我写如下：

```
DATA=`ls`
for LOOP in $DATA
do
    echo $LOOP
done 
```

但是有一些文件名包含空格。然后名为“A B.txt”的文件将被解释为两个文件“A”和“B.txt”。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T08:28:23.047

不要解析 的输出`ls`，这几乎总是会给你带来麻烦。

只需使用：

```
for loop in * ; do
 echo "$loop"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:33:04.800

虽然不解析`ls`输出的建议是普遍的智慧，但可以强制命令输出可解析的数据：

```
 `ls -b` 
```

将用 C 样式转义替换非图形字符，包括空格。

然而，这不适用于 shell for 循环，但是当输出通过管道发送到另一个命令时可以使用。

例子：

```
 $ ls -b
  A\ B.txt  C.txt 
```

在 for 循环中失败：

```
 $ for i in $(ls -b) ; do echo $i ; done
  A\
  B.txt
  C.txt 
```

但通过管道发送时有效

```
 $ ls -b | xargs -n 1 echo 
  A B.txt
  C.txt 
```

# javascript - 如何实现 Javascript 颜色选择器

> ID：10370759
> 
> 赞同：0
> 
> 时间：2012-04-29T08:26:56.543
> 
> 标签：javascript, html, color-picker

我正在考虑开发一个用于从网页中挑选颜色的组件。这不是一个颜色选择组件，它允许您从色轮或调色板中选择特定颜色。我指的是一个组件，它将为我提供一个十字准线来单击页面上的特定位置并“选择”它下面的颜色。我知道，在网络上，这非常复杂。除了复杂的标记检查和图像检查之外，我找不到现有的组件，也找不到实现此功能的好方法。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:29:06.660

Firefox 有一个名为“ColorZilla”的附加组件，请查看。

# matplotlib - Matplotlib 轴标签：\theta 不工作 \Theta 不工作

> ID：10370760
> 
> 赞同：23
> 
> 时间：2012-04-29T08:27:00.580
> 
> 标签：matplotlib, axis-labels

我在 matplotlib 中有一个奇怪的行为。使用以下内容，我得到了一个漂亮而闪亮的大 theta。只要我使用`\theta`而不是`\Theta`我得到

> 赫塔

作为轴标签

```
plt.figure(**pd.figpropsHP)
line=pd.lineCycler()
for i in range(2):
    for j in range(length-1):
        velocity[i,j]=(velocity[i,j+1]-velocity[i,j])*1000 #multiplied with sampling rate
    plt.plot(velocity[i,startstop[0]:startstop[1]],**next(line))  
        #plt.show(pPosition)
plt.xlabel("t[ms]")    
plt.ylabel("$\dot{\Theta}$[deg/s]")  
plt.ylim(-3000,-3000+yrangeV)
plt.annotate('30ms',fontsize='9', xy=(30, -1000),xytext=(40, -1000),verticalalignment='center',arrowprops=myarrow)
plt.annotate('8ms',fontsize='9', xy=(8, -1700),xytext=(40, -1700),verticalalignment='center',arrowprops=myarrow)
plt.axvline(x=span2Stop,lw='0.3',c='0.5')
plt.axvspan(spanStart, spanStop, facecolor='0.9', alpha=1,edgecolor='0.9',lw=0)
plt.tight_layout()
plt.savefig(imagePath + "collisionTestbedVmot.pdf") 
```

任何想法我做错了什么？遗憾的是，我没有时间开始花哨的东西（乳胶集成等）。我可以改用 utf8 字符吗？我如何得到一个？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-29T09:10:06.047

如果您指定字符串是原始文本（`r`引号前的 a），它会起作用。像这样：

```
plt.ylabel(r"$\dot{\Theta}$[deg/s]") 
```

您得到意外结果的原因是这`\t`意味着一个选项卡。因此，如果您键入`\theta`，它会被解析为`\t`并跟随`heta`。如果将其指定为原始字符串，则不会处理反斜杠和 python 转义。

如果您不使用原始字符串，则必须转义反斜杠 ( `\\`)，以便 python 将其视为反斜杠而不是制表符（如 \theta 而不是 \t 和 heta）。这就是为什么`\\theta`做这项工作。为了避免总是写双反斜杠，在使用 Latex 时使用原始字符串，因为它对特殊字符使用了很多反斜杠。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T08:32:40.147

使用`\\theta`完成了这项工作。无论如何，这确实是一种奇怪的行为，在我看来，无论是`\theta`还是，都应该固定去做`\Theta`。对此有什么想法吗？

# python - 快速访问字典中的部分数据

> ID：10370761
> 
> 赞同：4
> 
> 时间：2012-04-29T08:27:19.163
> 
> 标签：python, algorithm

例如，如果我在字典中有数百万条记录，其形式为 `{(1,2):3,(2,3):4,(3:2):5...xmillion}` That's a tuple 作为键并具有相应的值

我想做的是获取 tuple[1] = 2 的值的数据我的方法之一是

```
 for item, value in dict.iteritems():
      if item[1] == 2:
        Do operations here... 
```

这是一种缓慢的方法，是否有更好的算法可以使它更快？喜欢..所以我不必浏览数百万个项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:46:13.843

在作为键的元组字典中，您必须遍历所有键才能找到带有`key[1] == 2`. 除了解决这个问题，别无他法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:34:22.057

如果*您只有*字典，`{(a,b):c}`那么您就不能做得更好：因为您不知道有哪些键，所以`b=2`您必须查看所有键。

如果您自己构建字典，您可以`b=2`在该阶段分离出元组，这样您就不必再次搜索它们。您可以将它们存储在单独的字典中（只是 items `{(a,2):c}`）或重写您拥有的字典的结构（例如`{b:{(a,b):c}}`）。

# cakephp - 烘焙工具看不到 SQLite3 数据库中的表

> ID：10370765
> 
> 赞同：5
> 
> 时间：2012-04-29T08:27:44.613
> 
> 标签：cakephp, sqlite, cakephp-2.1, cakephp-bake

我正在尝试使用 SQLite3 作为数据库使用 CakePHP 2.1.1 构建一个简单的应用程序。为了节省时间，我尝试使用烘焙工具为下表创建模型：

```
CREATE TABLE animals (
  id integer primary key autoincrement,
  name text
); 
```

但烘焙工具返回以下错误：`Your database does not have any tables.`

我发现 Cake 在连接数据库时遇到了问题，所以我自己创建了合适的模型、控制器和视图。我在动物表中插入了一条记录。它奏效了。

在网上搜索后，我什么也没想到。要么没有人尝试在 SQLite3 数据库上使用烘焙工具，要么我运气不好。

有没有人有任何想法？

*更新*

这是输出`cake bake`：

```
johan@ubuntu:~/php/app$ Console/cake bake model

Welcome to CakePHP v2.1.1 Console
---------------------------------------------------------------
App : app
Path: /home/johan/php/app/
---------------------------------------------------------------
---------------------------------------------------------------
Bake Model
Path: /home/johan/php/app/Model/
---------------------------------------------------------------
Your database does not have any tables. 
```

和配置文件：

```
<?php
class DATABASE_CONFIG {
    public $default = array(
        'datasource' => 'Database/Sqlite',
        'persistent' => false,
        'host' => 'localhost',
        'database' => 'cake',
    );
} 
```

数据库文件位于 ~/php/app/webroot/cake

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T20:30:04.443

尝试将完整路径放入您的数据库配置中，这就是我在我的应用程序中所做的：

```
<?php
define('DEFAULT_DB', TMP.'db'.DS.'main.db3');

class DATABASE_CONFIG {
    public $default = array(
        'datasource' => 'Database/Sqlite',
        'persistent' => false,
        'host' => '',
        'database' => DEFAULT_DB,
        'encoding' => 'utf8',
    );
} 
```

# jquery - 底部的布局空间

> ID：10370768
> 
> 赞同：0
> 
> 时间：2012-04-29T08:28:02.417
> 
> 标签：jquery, html, css

我的布局似乎有问题。在 Body 标签之后似乎有很多空间自动附加。这似乎是因为一些 jQuery 插件。有人可以帮我吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T08:33:23.367

```
#footer {
    background: url("../images/topNav.jpg") repeat scroll 0 0 transparent;
    clear: both;
    color: #EEEEEE;
    margin-top: 42px;
    width: 100%;
    position: static;
} 
```

那会解决你的问题。
编辑：从现有的 CSS 定义中删除“位置：绝对；底部：0”。
编辑2：添加位置：静态；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:37:56.457

Chrome Inspector 显示如下警告：

资源解释为字体，但使用 MIME 类型字体/woff 传输：**movie_add.html:301**

“http://themes.googleusercontent.com/static/fonts/cuprum/v4/sp1_LTSOMWWV0K5VTuZzvQ.woff”。

**注意：**点击***movie_add.html:301***然后你会看到一些东西，我认为这会对你有所帮助。

# xcode - iphone-ipad 的不同应用名称

> ID：10370772
> 
> 赞同：2
> 
> 时间：2012-04-29T08:28:56.207
> 
> 标签：xcode, app-store

我们已经将一个名为“appName”的应用上传到了应用商店。它仅适用于 Ipad。我们只想为 Iphone 上传相同的应用程序。

我将为 iphone 创建一个新应用程序。使用新的捆绑包 ID 等，我们可以为应用程序使用相同的名称吗？还是itunes connect不允许这样做？

开发人员通常会怎么做？

我找不到明确的答案 - 在这里。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:08:09.583

很抱歉，但你不能这样做。iTunes Connect 在创建新的 ITC 应用程序时会检查您的应用程序名称，以确保该名称尚未被使用。这通常由开发人员首先制作 iPhone 版本然后将 iPad 版本命名为其他版本来处理

（例如，愤怒的小鸟 = iPhone，而愤怒的小鸟 HD = iPad）。

但是，您可以在 info.plist 文件中的应用程序“捆绑显示名称”中使用与 iPad 应用程序相同的名称。这将允许您使您的 iPhone 和 iPad 应用程序在您的客户设备上具有相同的名称。

# android - 如何暂停活动的开始

> ID：10370773
> 
> 赞同：2
> 
> 时间：2012-04-29T08:29:06.817
> 
> 标签：android, android-activity

在我的游戏中，在 levelcomplete 活动开始之前最后有一个动画，所以为了让动画正确看到我正在使用我正在做的 Handler (Runnable)`startActivity(this,Levlecomplete.class)`

我的游戏中有一个暂停按钮，它启动 PauseActivity。现在我面临的问题是，当结束动画开始时，如果在可运行的延迟时间内按下暂停按钮，我的游戏将打开暂停活动，并且在可运行任务延迟结束后，它会打开关卡完成活动。

我不知道如何暂停 LevelCompleteactivity 来启动。我希望如果在最后一个动画之间按下暂停按钮，那么我希望仅在暂停活动完成后才可运行以打开 levelcomplete 活动。

如何暂停活动开始？

请问如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:26:52.077

我认为可能是当你的游戏一个关卡结束时暂停不应该开始，在那个时候暂停很奇怪。

# ruby-on-rails-3 - 在 ActiveAdmin 中创建动态表单

> ID：10370775
> 
> 赞同：2
> 
> 时间：2012-04-29T08:29:11.217
> 
> 标签：ruby-on-rails-3, activeadmin

大家好，我非常坚持在活动管理员中构建自定义表单。我已经弄清楚甚至使用活动管理员设置了我自己的自定义表单。但是我需要在这里创建一个动态表单。这涉及进行一些 ajax 调用并返回表单的部分内容供用户填写。

似乎您可以创建一个成员操作，但那是在已创建的资源上。就我而言，我需要在尚未创建的资源上创建多个条目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T15:17:40.510

这可能会让你开始。一种方法可能是将您的 ajax 路由添加到 config.routes （只是一些随机示例代码）：

```
match '/admin/search/authors' =>  'admin/articles#search_authors',  :via => 'post', :as => :admin_search_authors 
```

然后在正确的寄存器块中，在这种情况下，在 app/admin/articles.rb 你可以把你的控制器逻辑

```
ActiveAdmin.register Article do
  ...
  controller do
    def search_authors
      @authors = Author.find_by_query params[:query]
      render :layout => false, :template => 'admin/authors/search'
    end
  end

end 
```

在这种情况下，模板只是呈现一个无序列表以放入表单中。位于 app/views/admin/authors/search.html.erb，如下所示：

```
<ul>
  <% if @authors.count < 1 %>
    <li>None</li>
  <% else %>
    <% @authors.each do |a| %>
      <li>
      <a href="#" onclick="javascript:insert_your_own_voodoo_function_here();return false;">
        <%= raw a.listname %>
      </a>
      </li>
    <% end %>
  <% end %>
</ul> 
```

您触发 ajax 调用的自定义 jquery 可能如下所示，这里使用了延迟观察者（感谢[http://code.google.com/p/jquery-utils/wiki/DelayedObserver](http://code.google.com/p/jquery-utils/wiki/DelayedObserver)）：

```
$(function() { 
     $('#search_author').delayedObserver(function() {
       $('#search_author').after('<img class="ajax-loader" id="ajax-loader" alt="Ajax-loader" src="/images/ajax-loader.gif">');
       $.ajax({
         url: '<%= admin_search_authors_path %>',
         dataType: 'html',
         type: 'post',
         data: { query: $('#search_author').val(), authenticity_token: $('meta[name=csrf-token]').attr("content")},
         success: function(data) {
           $('.ajax-loader').remove();
           $('#chooseauthor').html(data);
           $("#artikel_edit_auteurs").effect("highlight", {}, 1500);
         }
       });
     }, 0.5);
   }); 
```

世事皆可能。只需分析您真正需要的内容：表单部分，嵌套表单部分？取决于选择？也许您想构建一个多步骤表单。祝你好运。

# android - 为什么我在冷启动时收到 4 个 android.appwidget.action.APPWIDGET_UPDATE 广播？

> ID：10370778
> 
> 赞同：1
> 
> 时间：2012-04-29T08:29:52.387
> 
> 标签：android, widget

当我从冷启动手机时，我收到了 4 个意图广播`android.appwidget.action.APPWIDGET_UPDATE`。这导致我的应用程序执行 4 倍于它需要的处理，我正在尝试找出处理这个问题的最佳方法。但是，我想知道为什么我首先得到4？系统不应该只发送一个意图吗？

# css - font-size:0px 和 letter-spacing:10px 在不同的浏览器中显示不同

> ID：10370779
> 
> 赞同：0
> 
> 时间：2012-04-29T08:29:55.757
> 
> 标签：css, cross-browser

```
<html>
<head> 
    <style>
        ul{
            list-style-type:none;
            font-size:0px;
            letter-spacing:10px;
        }
        li{
            display:inline-block;
        }
    </style>
</head>
<body> 
    <ul>
        <li><img src="photo.jpg"></li>
        <li><img src="photo.jpg"></li>
        <li><img src="photo.jpg"></li>
        <li><img src="photo.jpg"></li>
        <li><img src="photo.jpg"></li>
    </ul>
</body>
</html> 
```

它在 Firefox、Chrome 和 IE 中有所不同。在 Firefox 中，当我使用`font-size:0px`and时`letter-spacing:10px`，`<li>`元素的字母间距为 10px，但在 Chrome 和 IE 中它不起作用，这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:48:33.437

由于列表中只有图像，请尝试将 CSS 更改为：

```
ul, ul li {
    list-style-type:none;
    padding: 0;
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:50:49.787

我会使用该`word-spacing`属性，而不是`letter-spacing`;)

# c - 使用哈希函数

> ID：10370781
> 
> 赞同：2
> 
> 时间：2012-04-29T08:30:30.660
> 
> 标签：c, linux, hash, hashtable

我正在做作业，`LINUX`我对哈希函数有一些疑问。当我输入`*mnemonic_name`一些字符串时`'ADD'`，`find_index`每次编译时都是随机的。你能解释一下这个问题并为我解决吗？

这是我的代码：

```
251  int symtab_finder(char *mnemonic_name)
252  {
253      node *temp;
254 
255      int find_index  =   op_find(mnemonic_name);
256      int find_flag   =   0;
257 
258      temp    =   optabl[find_index].head;
259 
260      while(temp)
261      {
262          if((strcmp(temp->mnemonic_name,mnemonic_name)==0))
263          {
264              find_flag   =   1;
265          }
266          temp    =   temp->next;
267 
268      }
269      if(find_flag == 0)
270      {
271 
272      }
273      printf("name %s, flag %d, find index %d\n",mnemonic_name,find_flag, find_index);
274      return find_flag;
275  } 
```

当我将'ADD'之类的字符串放入'*mnemonic_name'变量时，输出'find_index'是随机的！我不知道为什么会这样。

下面是我的 op_find 代码。

```
 44  int op_find(char *mnemonic_name)
 45  {
 46      int op_index;
 47      int i;
 48      for(i=0; i< strlen(mnemonic_name); i++)
 49      {
 50          op_index += mnemonic_name[i];
 51      }
 52 
 53  //  printf("op_index is %d\n",op_index % 20);
 54      return op_index = op_index % 20;
 55  }
 56 
 57  int mn_find(char *opcode_number)
 58  {
 59      int opcode_value;
 60      opcode_value = hex_to_dec(opcode_number);
 61  //  printf("mne value is %d\n",((opcode_value/4)%20));
 62      return ((opcode_value/4)%20);
 63  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:09:00.147

好的。因此，为了将其从“未回答”部分中删除，我重新添加了弗朗西斯已经给出的答案：

```
int op_index; // <-- not initialized. 
```

并确保在编译器标志中使用 -Wall。

（另外为弗朗西斯评论添加了+1。）

# javascript - 通过 jQuery 自定义确认表单

> ID：10370786
> 
> 赞同：1
> 
> 时间：2012-04-29T08:31:37.717
> 
> 标签：javascript, jquery

现在我`return confirm(Message);`在表格中需要确认时使用。这导致显示带有两个按钮`OK`和的表单`Cancel`。有没有办法以显示的形式更改按钮文本？我需要将按钮更改为另一种语言？你的建议是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T08:35:00.050

既然你标记了 jquery，[jQuery UI Modal Confirm](http://jqueryui.com/demos/dialog/#modal-confirmation)绝对值得一看

工作小提琴：http: [//jsfiddle.net/naveen/GR2UT/](http://jsfiddle.net/naveen/GR2UT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T08:46:53.430

您无法更改本机`confirm`框上的按钮文本。您可以编写自己的模态对话框，这将使您可以控制按钮中的内容。在[这个 jsfiddle 中](http://jsfiddle.net/KooiInc/X5DuY/)，您会找到一个普通的 javascript 示例。或者使用 JQuery，就像[naveen](https://stackoverflow.com/users/17447/naveen)建议的那样。

# android - 防止 Android 服务在解除绑定后被破坏

> ID：10370789
> 
> 赞同：18
> 
> 时间：2012-04-29T08:31:42.947
> 
> 标签：android, android-service

我有一个活动通过调用`startService`方法启动服务的场景： the`Activity`和 the`Service`都在同一个包中。然后服务可以根据其配置参数启动一个`ExternalActivity`包含在不同包中的活动（我们称之为它）：这个活动通过`bindService`;绑定服务。一旦这个活动完成了它的任务，它就会调用`unbindService`如下的方法......

```
// method of ExternalActivity
@Override
public void onDestroy() {
    super.onDestroy();
    unbindService(...);
} 
```

结果，服务也被破坏了。有没有可能避免服务被破坏？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T10:28:56.420

> 结果，服务也被破坏了。

正如 yorkw 解释的那样，只有当以下*两个都*为真时，服务才会被销毁：

1.  所有对 的调用`bindService()`都与对 的相应调用相匹配`unbindService()`。

2.  *如果*有人呼叫`startService()`，则有人也呼叫`stopService()`或服务呼叫`stopSelf()`。

> 有没有可能避免服务被破坏？

找个更好的时间打电话`stopService()`或`stopSelf()`，无论您使用的是哪一个。

# objective-c - iOS 5 中的 setTitleView 奇怪行为-objective-c

> ID：10370805
> 
> 赞同：1
> 
> 时间：2012-04-29T08:35:05.640
> 
> 标签：objective-c, ios, ipad, uinavigationcontroller, uinavigationbar

我尝试设置`UILabel`为`titleView`using`[self.navigationItem setTitleView:musicArtist];`方法，但它在不同的 iOS 版本中很奇怪。UINavigationBar 在`UIPopoverController`. 这是 iOS 4.3 的屏幕截图：

![在此处输入图像描述](../Images/8b9b1ceeb645ec034c50b8dfc3b9b185.png)

如您所见，它看起来不错。但是当我在 iOS 5.x 切换 iOS 模拟器时，我收到另一个结果： ![在此处输入图像描述](../Images/e35f2f1d470dccd0947962022f1a3035.png)

UILabel AutoSize 设置为：

![在此处输入图像描述](../Images/ba030efc7cf578bb92b842b2d13f5c7b.png)

最后，如果我将 UILabel AutoSizing 更改为：

![在此处输入图像描述](../Images/9abe3907342b5d462845f52d062a95b8.png)

我在两个 iOS 版本中都收到了这个结果：

![在此处输入图像描述](../Images/1ad36ad4efdc5581d66533a6b6f6ca97.png)

问题可能出在哪里以及如何在所有 iOS 版本中获得第一个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:32:38.490

当我删除所有自动调整大小设置后，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:07:53.547

你检查过使用 origin`x`和`y`like`{0, 0}`吗？在您使用的屏幕截图中，`y=131`因此当您将其附加到`titleView`它时不会显示。

# c# - 更新语句不会更新表

> ID：10370815
> 
> 赞同：0
> 
> 时间：2012-04-29T08:36:52.710
> 
> 标签：c#, sql, sql-update, ms-access-2010

我正在尝试更新 MS Access 表中的供应商记录，这是 DA 层中的代码：

更新供应商的方法

```
public static void updateVendor(Vendor aVendor)
{
    try
    {
        String sSQLCommand = "UPDATE Vendor SET VendorID = '" + aVendor.VendorId + "', VendorName = '" + aVendor.Name 
                            + "', AddressNo = '" + aVendor.AddressNo + "', Address = '" + aVendor.Address + "', City = '" 
                            + aVendor.City + "', State = '" + aVendor.State + "', ZipCode = '" + aVendor.Zipcode + "', PhoneNumber = '" 
                            + aVendor.PhoneNumber + "' WHERE VendorID = '" + aVendor.VendorId + "'";

        // Create the command object
        if (aConnection.State == ConnectionState.Closed)
            aConnection.Open();

        OleDbCommand cmd = aConnection.CreateCommand();
        cmd.CommandText = sSQLCommand;
        // Execute the SQL command
        cmd.ExecuteNonQuery();
        aConnection.Close();
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.ToString());
    }
} 
```

我没有收到任何错误，但它不会更新表格，所以我不确定它有什么问题，你看到有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:41:25.470

Daniel，如果查询执行没有任何错误并且问题是没有更新记录，那么请检查以下数据：

*   VendorID 字段是文本字段，因此如果它在列中的值之前有空格，那么您的查询将不会更新任何内容但会成功执行。

这是可能的，因为访问不会删除文本中前面的空格。

# drupal-7 - 在 drupal 中写博客 - 将文本插入内容类型的最佳方式

> ID：10370816
> 
> 赞同：0
> 
> 时间：2012-04-29T08:36:58.560
> 
> 标签：drupal-7

我想知道在 drupal 中编写 SDK 博客的最佳和常用方法是什么。

1.  将博客直接写入 drupal 中的新内容类型。
2.  在 word 文档（或类似的东西）中编写和设计博客，然后使用流程（我将编写的模块）将所有文档加载到内容类型中。
3.  其他。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:36:30.287

您最好的选择是将您的博客条目直接输入到 Drupal 中——就像您在博客中使用的任何内容类型所说的一样！如果这是您（或任何博客作者）愿意做的选择，最好在一开始就习惯它。

如果您选择在 Drupal 之外创建内容并在事后将其粘贴，您可能会遇到几个问题。我现在至少可以想到以下两个：

*   当 Word 样式被复制并粘贴到您选择的 Drupal 编辑器中时，人们可能会遇到格式问题（即使某些编辑器有“从 Word 粘贴”选项）。特别是如果有多个作者并且有些人坚持正确的复制和粘贴，而其他人则不这样做，您最终可能会得到具有不同字体大小、字体样式等的帖子，这会使网站看起来不那么专业。无论场景如何，我都建议始终在 Drupal 编辑器中创建内容。但是，当有多个作者在 Drupal 编辑器之外创建内容（例如在 Word 中）并在事后将其粘贴时，情况尤其如此。对于多人，培训和遵守最佳实践可能会成为一个更大的问题。要查看格式问题，请自己进行测试：在 Word 中创建一些花哨的、风格化的内容（不仅仅是简单的段落，否则它不会那么有趣）并将其粘贴到 CKEditor 或您正在使用的任何其他内容中。然后使用编辑器上的“源”按钮检查生成的 html 代码。不要使用通常有帮助的“从 Word 粘贴”选项。
*   如果您的帖子中有图片，您将无法仅将它们从 Word 复制并粘贴到 Drupal 编辑器中……您仍然需要上传图片并以 Drupal 方式将其插入帖子中

因此，与其创建内容一次、复制和粘贴它并可能不得不在事后进行大量清理，不如习惯于在 Drupal 中创建它！

然后——随着您的博客的增长以及您可能添加的内容（附加字段、附加功能），如果您的工作流程中不包含像 Word 这样的外部程序，您将能够更充分地利用您的 Drupal 环境！ ！

# c# - 知道起点、速度、时间跨度和路线，计算第二点

> ID：10370817
> 
> 赞同：1
> 
> 时间：2012-04-29T08:36:58.993
> 
> 标签：c#, math, geolocation, coordinates, latitude-longitude

我有一个当前位置：以度为单位的纬度和经度值（A 点），最终位置（B 点）也是如此。我需要计算两点之间的路线（也以度为单位），然后以给定的速度（以公里/秒为单位）和时间跨度（以秒为单位）计算新位置。

示例（伪代码）：

```
PointA.Lat = x.xxxx;
PointA.Lng = x.xxxx;
PointB.Lat = x.xxxx;
PointB.Lng = x.xxxx;
Speed = 3;
TimeSpan = 0.1;
Course = GetCourse(PointA, PointB);

NewPoint = CalculatePoint(PointA, Course, Speed, TimeSpan); 
```

我想过使用 GeoCoordinate 类，但我不确定我必须如何实现自己的所有计算。（我没有 GPS - 这只是一个模拟，那些是假点）。

有人可以帮助我计算数学或提供一些可以免费完成并且可以轻松集成到我的代码中的软件包吗？

顺便说一句，我正在使用 C#。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:32:34.163

I'd have made this a comment but I don't have the required rep.

What you're looking for is a geodesy library that gives you the “geodetic inverse” and “geodetic direct” calculations. I don't know of any myself, but try searching for “c# geodesy library”</p>

The former gives the bearing and distance between two geographical coordinates, the latter gives a new coordinate at a given bearing and distance from the first.

So for your problem:

1.  Use the inverse to get the **bearing** between `PointA` and `PointB`
2.  Calculate a **destination distance** from the time and speed,
3.  Plug the bearing and distance into the direct to get the desired destination `NewCoord`.

Coding these calculations from 1st principles will be quite substantial and require the parameters of (presumably) the WGS84 ellipsoid. This, however, is the starting point.

Hope this helps.

# javascript - 使用 chrome.tabs.executeScript 选中一个框，不起作用

> ID：10370819
> 
> 赞同：1
> 
> 时间：2012-04-29T08:37:18.747
> 
> 标签：javascript, google-chrome-extension

我无法选中此页面中的复选框。

```
<html>
  <body>
    <form name="f">
      <input type="checkbox" name="vehicle" value="Bike" /> 1<br /></li>
    </form>
  </body>
</html> 
```

我的 popup.js 如下：

```
function click(e) {
  chrome.tabs.executeScript(null,
      {code:"document.body.f.vehicle.checked='true'"});
  window.close();
}

document.addEventListener('DOMContentLoaded', function () {
  var divs = document.querySelectorAll('div');
  for (var i = 0; i < divs.length; i++) {
    divs[i].addEventListener('click', click);
  }
}); 
```

在控制台日志中，我不断收到错误消息：**Uncaught TypeError: Cannot read property 'vehicle' of undefined。**

我的 popup.html 如下：

```
<!doctype html>
<html>
  <head>
    <title>Set Page Color Popup</title>
    <style>
    body {
      overflow: hidden;
      margin: 0px;
      padding: 0px;
      background: white;
    }

    div:first-child {
      margin-top: 0px;
    }

    div {
      cursor: pointer;
      text-align: center;
      padding: 1px 3px;
      font-family: sans-serif;
      font-size: 0.8em;
      width: 100px;
      margin-top: 1px;
      background: #cccccc;
    }
    div:hover {
      background: #aaaaaa;
    }
    </style>
    <script src="popup.js"></script>
  </head>
  <body>
    <div id="1">1</div>
  </body>
</html> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:46:51.347

应该是这样的

```
document.f.vehicle.checked='true'; 
```

[http://jsfiddle.net/PnXsE/](http://jsfiddle.net/PnXsE/)

# sql - 在连接查询中选择以给定部分结尾的行？

> ID：10370822
> 
> 赞同：0
> 
> 时间：2012-04-29T08:38:24.267
> 
> 标签：sql, sqlite, select, subquery

我正在尝试创建一个复杂的 SQL 查询（至少对我而言），但真的不知道从哪里开始。

基本上，我有一个角色对象，每个角色都可以由几个部分组成。例如：

**字符**表：

```
id | character
--------------
1  | 你
2  | 是
3　　|　有 
```

**character_parts**表：

```
id | character_id | part_id
---------------------------
1  | 1            | 4
2  | 1            | 9
3  | 1            | 5
4  | 2            | 2
5  | 2            | 34
6  | 2            | 43
7  | 3            | 21
8  | 3            | 16
9  | 3            | 41
10 | 3            | 43 
```

因此，我知道：

```
Character 1 is made of parts 4, 9, 5
Character 2 is made of parts 2, 34, 43
Character 3 is made of parts 21, 16, 41, 43 
```

现在我想做的是选择以指定部分**结尾的所有字符。**

例如，如果我选择所有以“16、41、43”结尾的字符，我将得到字符 3。如果我选​​择所有以“43”结尾的字符，我将得到字符 3 和 4。

我假设我需要使用子查询构建一些查询，但不确定如何开始，或者是否可以完成。到目前为止，我只是选择了包含所需部件 ID 的所有内容，然后以编程方式进行比较，但这太慢了，因为我选择的方式超出了需要。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:48:29.850

查询可能是这样的。

```
select * from character where id in (select character_id from character_parts where character_id = 'required no' AND character_id = 'required no' AND character_id = 'required no')
//required number is the part_id you want to specify. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:59:33.977

添加另一列，`from_end`从末尾开始计算，例如：

```
from_end | id | character_id | part_id
--------------------------------------
      2  | 1  | 1            | 4
      1  | 2  | 1            | 9
      0  | 3  | 1            | 5
      2  | 4  | 2            | 2
      1  | 5  | 2            | 34
      0  | 6  | 2            | 43
      3  | 7  | 3            | 21
      2  | 8  | 3            | 16
      1  | 9  | 3            | 41
      0  | 10 | 3            | 43 
```

然后你可以这样做：

```
SELECT p0.character_id
  FROM character_parts AS p0
  JOIN character_parts AS p1 USING (character_id)
  JOIN character_parts AS p2 USING (character_id)
 WHERE p0.from_end = 0 AND p1.from_end = 1 AND p2.from_end = 2
   AND p0.part_id = 43 AND p1.part_id = 41 AND p2.part_id = 16 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T09:06:48.123

你可以试试`group_concat`功能： [http ://www.sqlite.org/lang_aggfunc.html](http://www.sqlite.org/lang_aggfunc.html)

`SELECT group_concat(part_id) FROM character_parts WHERE character_id=1`

查询应该返回`4,9,5`。

问题是 by 使用的顺序`group_concat`是任意的：

[Sqlite group_concat 排序](https://stackoverflow.com/questions/1897352/sqlite-group-concat-ordering)

因此，假设您有一个`position`定义部件顺序的字段，我们可以像这样更新查询：

`SELECT group_concat(part_id) FROM (SELECT part_id FROM character_parts WHERE character_id=1 ORDER BY position ASC)`

查询现在将`4,9,5`完全按照定义的顺序返回零件。

现在我们有了这个值，我们可以像普通字符串一样搜索它。如果我们想查找所有以某个字符串结尾的值，我们可以使用`LIKE`运算符。

最后查询会是这样的：

```
SELECT character_id, parts_concat FROM (
    SELECT character_id, group_concat(part_id) FROM (
        SELECT character_id, part_id FROM character_parts WHERE ORDER BY position ASC
    ) GROUP BY character_id
) parts
WHERE parts_concat LIKE '%,9,5' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T09:17:04.543

```
SELECT  c.character
FROM    character_parts cp
JOIN    character c
ON      c.id = cp.character_id
WHERE   cp.part_id = 43
        AND cp.id =
        (
        SELECT  id
        FROM    character_parts cpo
        WHERE   cpo.character_id = cp.character_id
        ORDER BY
                id DESC
        ) 
```

创建以下索引：

```
character_parts (part_id, character_id, id)
character_parts (character_id, id) 
```

为了快速工作

# android - Android SimpleCursorAdapter

> ID：10370825
> 
> 赞同：0
> 
> 时间：2012-04-29T08:38:52.963
> 
> 标签：android, android-contentprovider, simplecursoradapter

我正在使用这样的`ListView`a `SimpleCursorAdapter`：

```
 final ListAdapter adapter = new SimpleCursorAdapter
            (this,android.R.layout.simple_list_item_1,c,new String[] {providerclass.tablename}, new int[] {R.id.listview1}); 
```

我不确定 from 是否正确，我应该输入什么？

当我把它说`URI`没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:06:12.120

这样做：

```
String[] from = new String[] { "CUSTOMER" } // assuming your cursor have field "CUSTOMER"
int[] to = { android.R.id.text1 } // because android.R.layout.simple_list_item1 has such field 
```

# java - Java奇怪的方法

> ID：10370829
> 
> 赞同：2
> 
> 时间：2012-04-29T08:39:42.863
> 
> 标签：java, methods

我目前正在尝试学习如何制作 3D 游戏，所以我看了一些 YouTube 教程。在一个[教程](https://github.com/OskarVeerhoek/YouTube-tutorials/blob/master/src/episode_19/MineFront.java "点击这里查看教程的源代码")中，我发现了这种方法：

```
int floorTexture = glGenTextures();
{
  // ...
} 
```

[来源（第 215 行）](https://github.com/OskarVeerhoek/YouTube-tutorials/blob/master/src/episode_19/MineFront.java "GitHub上的教程源代码")

我以前从未见过这种方法（我认为是一种方法），所以我现在有两个问题：

1.  我可以给这个方法添加参数吗？此代码不起作用

    ```
    int texture (String texturename) = glGenTextures(); 
    ```

2.  做什么的`=glGenTextures()`？

（我想用一种方法加载不同的纹理。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T08:41:56.660

这不是方法声明——它是一个方法*调用*，后跟一个块。

该块本身是不必要的，基本上只是令人困惑。哎呀，该`main`方法将近 500 行长这一事实很好地表明，这*不是*您应该从中获取提示的代码 - 至少在结构方面......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T08:41:51.613

那不是方法定义。这是一个方法**调用**。`{`调用之后引入了一个新的块/范围。如果您直接查看该调用上方，您会看到另一个块（因为它本身）看起来不像方法定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T08:42:45.727

这是一个方法调用，后跟一段代码。该代码块与前面的方法调用无关。它的唯一用途是定义一个新的块作用域（允许定义仅在该块中可见的局部变量）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T08:46:13.957

看一下缩进。它只是一个初始化为返回值的`int`变量的定义。下面的代码只是一个块，以确保在离开块后变量超出范围。所以没有方法，也没有办法添加参数。`floorTexture``glGenTextures()``main`

# ruby-on-rails - time_start 范围 time_end 助手

> ID：10370831
> 
> 赞同：0
> 
> 时间：2012-04-29T08:40:04.547
> 
> 标签：ruby-on-rails, ruby, helper

嗨，我是 ruby​​ on rails 的新手，这是我的场景，我有两个计时器`time_star`，`time_end` 我只是想知道是否有一个验证器或助手会`end time`根据开始时间的时间更改时间，以免得到负值获得两次的差异在jquery中是可能的，但我想知道rails是否也可以做到这一点

例如，如果我选择下午 1 点，`time_start`那么`time_end`只会显示下午 2 点以后

我现在也在研究它我只是想在这里可能有很多可能的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:02:41.187

您可以使用两种不同的方法来实现不同的目标。

1.  您可以编写自定义验证器以防止`time_end`低于`time_start`将其存储到数据库中。或者你可以关注标准`numericality`验证器，也许它对你来说就足够了。

2.  您可以编写一些帮助程序、JS 或其他与视图相关的代码，以允许用户选择`time_end`仅大于`time_start`html 小部件中的值。在我看来，这是一项非常具体的任务，你不太可能在 rails 中找到它的东西，但可以根据你的意愿在几行代码中实现。

# ruby-on-rails - Rails：在 url 中重命名模型

> ID：10370834
> 
> 赞同：1
> 
> 时间：2012-04-29T08:40:34.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个名为 Subscriber 的模型，每次创建新订阅者时，我都会重定向到 Subscriber#Show 页面，并且 url 在浏览器中显示为 localhost:3000/subscribers/id。我想更改 url 以显示 localhost:3000/registered/id 。我想在不更改订阅者模型名称的情况下执行此操作。

在我的 routes.rb 我有：

```
resources :subscribers, :only => [:new, :create, :show] 
```

如何更改网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:46:31.533

尝试`:path`：

```
resources :subscribers, :path => "registered", :only => [:new, :create, :show] 
```

# mobile - JavaFX2 和 Oracle 关于移动操作系统的计划

> ID：10370838
> 
> 赞同：0
> 
> 时间：2012-04-29T08:40:59.633
> 
> 标签：mobile, javafx-2

我正在撰写有关 JavaFX 2.0 的文凭工作，我需要一些有关该技术进一步发展的信息。我以为它会是超级多平台，但谷歌搜索后我有点失望：iOS 和 android 存在很多问题，JavaFX 的路线图中也只有桌面操作系统的信息......所以，开发人员可以期待吗移动方向的一些技术进步？JavaFX 会是面向桌面的还是广泛通用的技术？或者，也许，它会是一些特殊的分支“Mobile JavaFX2”？如果 JavaFX 不支持手机开发，那么 Oracle 就没有现代和有竞争力的技术来应对这个巨大的开发领域吗？...我真的需要一些答案！谢谢！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:23:15.877

如果您三年前问同样的问题，我会说 javafx 有一个光明的未来。Silverlight 和 Adob​​e Air 或 flex 也是如此。

今天我只想说一个词... HTML5

Java 总是试图在客户端找到一席之地...... Adob​​e 很糟糕，因为他们几个月前放弃了他们的 flex 开发人员，谁说 Air 不会再发生这种情况？......微软仍然试图让我们相信 silverlight一项很好的技术，而另一方面，他们以 ajax 功能作为主要武器来推广 ASP.NET。

看看浏览器努力遵守 HTML5（未来！！！）标准的速度有多快，你会同意我的观点，即上述技术天生就已经过时了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:23:48.497

> iOS和安卓都有很多问题

没有问题，只有一个 - 当前 (JavaFX 2.1) 版本不支持 iOS 和 Android。

> 开发人员可以期待移动方向的技术进步吗？

直到它出现在公共路线图中（现在不是）。

回答您的其他问题只是任何不了解甲骨文私人计划的人的猜测。如果你对投机感兴趣，你可以在[这里](https://stackoverflow.com/questions/10229631/is-there-a-java-fx-2-0-runtime-for-windows-mobile/10236801)找到一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:35:46.140

这可能不是您问题的直接答案，但我希望它可以为您指明另一个方向

Adobe air 在架构上与 java 非常相似。它还可以在多个平台上的 vm 上运行，例如 windows、osx 和... Android 和 IOS。而且它的 gui 很性感......真正的眼睛糖果。对于移动端有一些考虑，但目前我认为它是构建 gui 的最佳跨平台语言。但不适用于服务器端。但它通过 blazeDS 或 LCDS 与 java 服务器集成在一起，就像做梦一样。

我知道苹果的条款和条件规定了您不得在虚拟机中运行您的应用程序的限制。所以adobe不得不把整个air app编译成一个native application，基本上包含了整个air框架。我的猜测是甲骨文也面临着类似的问题，这可能就是为什么需要一些时间才能推出

拥有java语言强大的fxml，绝对是值得等待和期待的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:00:19.870

HTML 5 没有未来.. 这个工具有很多它自己的问题..HTML 5 不能用于开发企业应用程序，编码、调试和维护非常困难，这对于任何长期项目都非常重要另一方面，JAVAFX 2 正在使用面向对象的概念创建 GUI，这使得 Java 开发人员可以轻松地编码、调试和维护，而无需任何忙碌。

# c++ - 使用 pthread_join (thread, NULL) 的困惑

> ID：10370861
> 
> 赞同：1
> 
> 时间：2012-04-29T08:45:03.773
> 
> 标签：c++, pthreads

当我们创建一个带有 的线程时`pthread_create`，我们应该放置`pthread_join`立即数吗？

例如我有以下两个代码，但我不知道为什么它不起作用。

对于第一个版本，输出不是确定性的。

```
#include<iostream>
#include<pthread.h>
#include<cstring>
#include<cstdlib>
#define ROW 3
#define COL 3
using namespace std;
typedef struct {
int row;
int col;
} para;
void print(double * para)
{
    for(int i=0;i<3;i++)
   {
           for(int j=0;j<3;j++)
           {
                    cout<<*(para+3*i+j)<<"\t";
            }
            cout<<endl;
        }

}
double mat[9]={1,2,3,4,5,6,7,8,9};
double * result=(double *) malloc(9*sizeof(double));
void * mul(void * arg)
{
        para * temp=(para *) arg;
        int row=temp->row;
        int col=temp->col;
        double sum=0;
        for(int i=0;i<3;i++)
        {
                double a=*(mat+row*3+i);
                double b=*(mat+i+3*col);
                sum+=a*b;
        }
        *(result+row*3+col)=sum;
int main()
{
        pthread_t thread[9];
        for(int i=0;i<9;i++)
        {
                   para M;
                M.row=i/3;
                M.col=i%3;
                pthread_create(&thread[i],NULL,mul,&M);

        }
        for(int i=0;i<9;i++)
        {
                 pthread_join(thread[i],NULL);            
        }

        print(result);
} 
```

使用第二个版本，输出是正确的。

```
#include<iostream>
#include<pthread.h>
#include<cstring>
#include<cstdlib>
#define ROW 3
#define COL 3
using namespace std;
typedef struct {
int row;
int col;
} para;
void print(double * para)
{
    for(int i=0;i<3;i++)
   {
           for(int j=0;j<3;j++)
           {
                    cout<<*(para+3*i+j)<<"\t";
            }
            cout<<endl;
        }

}
double mat[9]={1,2,3,4,5,6,7,8,9};
double * result=(double *) malloc(9*sizeof(double));
void * mul(void * arg)
{
        para * temp=(para *) arg;
        int row=temp->row;
        int col=temp->col;
        double sum=0;
        for(int i=0;i<3;i++)
        {
                double a=*(mat+row*3+i);
                double b=*(mat+i+3*col);
                sum+=a*b;
        }
        *(result+row*3+col)=sum;
int main()
{
        pthread_t thread[9];
        for(int i=0;i<9;i++)
        {
                   para M;
                M.row=i/3;
                M.col=i%3;
                pthread_create(&thread[i],NULL,mul,&M);
                pthread_join(thread[i],NULL); 
        }   
        print(result);
} 
```

这两种用法有什么区别？为什么第一个代码有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T09:27:16.473

第一个版本启动九个线程。
然后，一旦创建了所有线程，它就会在退出之前等待它们全部完成。
因此，您将获得 9 个并行运行的线程。

第二个版本启动九个线程。
但是在每个线程启动后，它会等待线程退出，然后再继续。
因此，您将获得 9 个串行运行的线程。

不幸的是，第一个版本也被破坏了。
传递给线程的数据对象（作为第 4 个参数 ( `&M`)）是一个自动变量，它可能在线程完成之前超出范围。

像这样修复：

```
 pthread_t thread[9];
    para      M[9];
    for(int i=0;i<9;i++)
    {
            M[i].row = i/3;
            M[i].col = i%3;
            pthread_create(&thread[i],NULL,mul,&M[i]);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:54:19.213

您的所有线程与其参数共享相同的内存区域，因为您反复将指针传递给相同的堆栈分配变量`M`。您`M`在工作线程运行时更改主循环，从而导致不确定的结果。在第二个版本中，您基本上已将代码转换为顺序代码，因为`pthread_join`在您开始下一个之前等待每个线程终止，这就是它正常工作的原因。

# .net - 如何在 vb.net 中的默认坐标上制作屏幕截图？

> ID：10370863
> 
> 赞同：2
> 
> 时间：2012-04-29T08:45:19.967
> 
> 标签：.net, vb.net, screenshot

我想根据鼠标左键单击的坐标截取屏幕的一部分。

到目前为止，我能做的是用鼠标获取坐标并在标签中显示它们：

`Form1.MousePosition.X`和`Form1.MousePosition.Y`

我得到：

```
X: 369  Y: 256 
```

我想获取左上角和右下角的坐标，并在鼠标点击的地方截屏。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:22:24.857

这是一个名为`Capture Screen`.

创建者：Masoud (MD)，提交日期：2002 年 6 月 5 日上午 6 点 16 分 56 秒：

[http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=309&lngWId=10](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=309&lngWId=10)

在`Form1.vb`文件里面有在 VB 中截取屏幕截图的代码：

```
Protected Sub CaptureScreen()
    Dim hSDC, hMDC As Integer
    Dim hBMP, hBMPOld As Integer
    Dim r As Integer

    hSDC = CreateDC("DISPLAY", "", "", "")
    hMDC = CreateCompatibleDC(hSDC)

    FW = GetDeviceCaps(hSDC, 8)
    FH = GetDeviceCaps(hSDC, 10)
    hBMP = CreateCompatibleBitmap(hSDC, FW, FH)

    hBMPOld = SelectObject(hMDC, hBMP)
    r = BitBlt(hMDC, 0, 0, FW, FH, hSDC, 0, 0, 13369376)
    hBMP = SelectObject(hMDC, hBMPOld)

    r = DeleteDC(hSDC)
    r = DeleteDC(hMDC)

    oBackground = Image.FromHbitmap(New IntPtr(hBMP))
    DeleteObject(hBMP)
End Sub 
```

# javascript - 在 Windows 上通过 cucumber-js 进行 bdd，大量问题！有人实现了吗？

> ID：10370869
> 
> 赞同：0
> 
> 时间：2012-04-29T08:46:45.113
> 
> 标签：javascript, cucumber, bdd

我在 Windows 中制作工作 cucumber-js 时遇到了严重的麻烦。

我开始思考是否值得，我花在安装 node.js 和 cucumber 上的时间。

好吧，我从 .msi 文件安装了 node.js。一切顺利。

我通过 package.json 在本地安装了黄瓜

node_modules 文件夹已在我的项目文件夹下创建。

文件夹名称 .bin 中有一个名为 cucumber.js 的文件

所以当我通过命令行点击该文件时，我得到一个脚本错误，说字符错误

```
#!/bin/sh
if [ -x "`dirname "$0"`/node" ]; then
  "`dirname "$0"`/node"  "`dirname "$0"`/./node_modules/cucumber/bin/cucumber.js" "$@"
  ret=$?
else 
  node  "`dirname "$0"`/./node_modules/cucumber/bin/cucumber.js" "$@"
  ret=$?
fi
exit $ret

#!/bin/sh this shebang did not recognized and gives script error. is this thing pythonish thing? should i install python. 
```

有没有人将 cucumber-js 用于 javascript 的 bdd ？是否有任何其他框架可以让我继续利用我已经为 specflow 编写的小黄瓜文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:48:09.397

这是一个错误，将由[#60](https://github.com/cucumber/cucumber-js/issues/60 "#60")修复。

# android - 在 UI(ImageView) 中更快地设置远程位图

> ID：10370877
> 
> 赞同：0
> 
> 时间：2012-04-29T08:48:17.063
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我正在编写一个应用程序，它本质上是一个翻转卡，在一侧显示单词/提示，在另一侧显示与之相关的图片。我使用 viewflipper 来查看两个视图。问题是图片从互联网加载。应用程序访问数据库，提取url然后加载图片。这意味着视图的变化与下载图片所需的时间一样多。我想立即翻转卡片并加载图片，这样用户就不会认为应用程序很慢。他们应该知道图片正在加载，因此延迟。请建议改进​​代码。我在翻转卡中加载图片的代码是：

```
 public void setBMP(String s)  //String passed is url extracted from column of db uing  
    {                             //internal db
   try{
    //String url1 = "c.getString(3)";
    String url1= s;
    System.out.println(url1);
    URL ulrn = new URL(url1);
    HttpURLConnection con = (HttpURLConnection)ulrn.openConnection();
    InputStream is = con.getInputStream();
    Bitmap bmp = BitmapFactory.decodeStream(is);
    if (null != bmp)
    {  
    im.setImageBitmap(bmp);
    }
    else
        System.out.println("The Bitmap is NULL");

    }catch(Exception e){}
    }
        } 
```

为了改变视图，我设置了 actionListener。只要用户触摸屏幕卡翻转和图像加载。
也可以在用户查看其他卡片时在后台预加载图像。或者是否可以缓存查看的卡片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:55:33.300

在我看来，创建一个`Runnable`获取 bmp 并将其保存到哈希映射文件的文件，然后，如果下载需要它，它会打开文件，如果不需要，它会从网络下载它。

尝试查看[fedorvlasov 的 Lazy 适配器](https://github.com/thest1/LazyList)以供参考。

你可以使用他的图像加载器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T08:59:18.303

我会走 asnyctask 路线，因为这样你也可以加载/禁用微调器（或加载动画）。查看这个答案以获得一个非常简单的示例。如果要添加微调器，则需要在 asnyctask 的 onPreExecute() 中启动它们（只需将其添加到示例中）并在下载图像后在 onPostExecute 中禁用它们。

[使用 AsyncTask 在 ListView 中加载图片](https://stackoverflow.com/questions/7729133/using-asynctask-to-load-images-in-listview)

# java - RMI 多客户端

> ID：10370878
> 
> 赞同：3
> 
> 时间：2012-04-29T08:48:21.667
> 
> 标签：java, rmi

RMI 自己处理多个客户端吗？IE

1.  是否可以同时由多个客户端使用服务器功能？
2.  如果没有，我该怎么做？
3.  如果是，它是如何工作的？它会为每个*调用*创建一个新线程吗？如果一个客户端阻止该功能，下一个客户端会发生什么？等等

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T08:53:03.163

是的

> 这个怎么运作？它会为每个调用创建一个新线程吗？如果一个客户端阻止该功能，下一个客户端会发生什么？等等

它为每个客户端连接创建一个线程。

如果一个客户端调用同步方法或阻塞其他调用的方法，则其他线程进行的调用将阻塞，直到该调用释放资源。

听起来您已经得出了答案，您还有更具体的疑问吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T08:59:47.360

是的，RMI 确实可以处理多个客户端，但是您必须使您的服务器**线程安全**，如果多个客户端同时对其进行方法调用，RMI 会将多个线程分派到单个服务器对象中，因此如果您的服务器不是线程安全的，您的应用程序将会失败。

# c# - 将数据存储在 C# 可执行文件中并防止将其复制到堆中

> ID：10370882
> 
> 赞同：0
> 
> 时间：2012-04-29T08:48:41.710
> 
> 标签：c#, heap-memory, readonly

我想在 C# 程序中嵌入一些预先计算的数据。我目前的方法是将数据简单地存储在一个数组中，如下所示：

```
int[] someData = new int[] { 1, 2, 3, 4 }; 
```

我的问题如下：说 someData 包含 4kB 的信息。这 4kB 存储在可执行文件中并占用内存。但是，一旦执行了数组初始化，数据就会被复制到堆中——所需的空间增加了一倍。这是一种浪费，因为我永远不会写入这个数组，所以我也可以直接从程序二进制文件中获取我想要的数据。

将数组声明为只读字段无济于事：这只会使数组指针只读，并且不会阻止数据的复制（或写入数组，就此而言）。您不能将数组声明为 const。

有什么方法可以防止复制并直接从程序二进制文件中访问数据？

这是一个编程竞赛，程序通过运行数千次来测试（通过创建那么多进程——我的程序没有得到一个包含许多测试用例的整洁文件，它为每个用例执行一次）。数组初始化占用了 90% 的时间，因为数组的内容必须从可执行程序复制到堆中。这似乎是在浪费时间，所以我想找到一种方法来避免复制并直接从程序二进制文件中读取数据。我想要完成的最好是这样表示（在伪汇编程序中）：

```
jump to location 1002
...1000 words of data...
do a binary search on data from location 2 to 1001 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:56:42.800

> 有什么方法可以防止复制并直接从程序二进制文件中访问数据？

不要在源代码中声明它，而是使用嵌入式资源文件，并使用[`Assembly.GetManifestResourceStream`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcestream.aspx). 鉴于您对 Damien 的回答的评论，这可能仍然不是您想要的。您可能想改用内存映射文件......很难确定。

或者，您谈论使用只读变量的可能性 - 听起来它也可能是静态的：

```
private static readonly int[] Data = { ... }; 
```

您提出了数组内容被更改的担忧 - 但如果您不*公开*写入它的方式，并且您不自己修改它，那么您应该没问题。*你具体*关心什么？感觉这里有很多你没有告诉我们的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T08:52:21.420

不，没有办法将对象的实例存储在*程序**的*可执行文件中。为了让您以 的形式访问此数据，必须构造该数组对象。并且该对象必须在其中一个堆上构造（或放置在堆栈上，但不适合这种用法）。*`int[]`*

 *您真的担心浪费 4k 空间吗？*

# php - 致命错误：找不到类 'FOS\Rest\Util\Codes'

> ID：10370883
> 
> 赞同：0
> 
> 时间：2012-04-29T08:48:48.343
> 
> 标签：php, macos, symfony

我正在尝试在 osx lion 上安装以下项目[连接。](https://github.com/dsyph3r/connect)

```
cd /tmp
git clone git://github.com/dsyph3r/connect
cd connect
git submodule update --init

php bin/vendors install 
```

当我运行以下命令时`php bin/vendors install`，我收到以下消息：

```
[Symfony\Component\Config\Exception\FileLoaderLoadException]                                
Cannot import resource "parameters.ini" from "/private/tmp/connect/app/config/config.yml". 
```

为了解决以下错误，我做了：

```
 cp app/config/parameters.ini.dist app/config/parameters.ini 
```

然后，当我运行以下命令时`php bin/vendors install`，出现以下错误：

```
PHP Fatal error:  Class 'FOS\Rest\Util\Codes' not found in /private/tmp/connect/vendor/bundles/FOS/RestBundle/DependencyInjection/Configuration.php on line 115

Fatal error: Class 'FOS\Rest\Util\Codes' not found in /private/tmp/connect/vendor/bundles/FOS/RestBundle/DependencyInjection/Configuration.php on line 115
PHP Fatal error:  Class 'FOS\Rest\Util\Codes' not found in /private/tmp/connect/vendor/bundles/FOS/RestBundle/DependencyInjection/Configuration.php on line 115

Fatal error: Class 'FOS\Rest\Util\Codes' not found in /private/tmp/connect/vendor/bundles/FOS/RestBundle/DependencyInjection/Configuration.php on line 115 
```

我错过了什么？

我想现在问题出在我的`app/config/parameters.ini`.
应该如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T09:56:48.003

FOSRestBundle 的 deps 文件中有一个条目，但没有 FOSRest 库的条目。查看[FOSRestBundle 安装文档](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/1-setting_up_the_bundle.md)，它显示了 deps 文件的外观。我想这是 7 个月前的一个项目，之后它肯定已经分裂了。

# iphone - 通过我自己的应用访问 iTunes

> ID：10370884
> 
> 赞同：0
> 
> 时间：2012-04-29T08:49:13.880
> 
> 标签：iphone, ipad, itunes

我是这方面的新手，所以问题 - 我正在尝试创建应该类似于原生 ipad/iphone 阅读器的应用程序。我希望用户能够通过我在 iTunes 中的应用购买书籍。我的意思是，苹果批准新书，然后用户打开应用程序，按“购买”按钮，然后转到包含 iTunes 中批准书的应用程序页面，然后他可以使用 itune 的帐户购买它。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:53:11.260

不，你不能在你的应用程序中打开 iTunes。不仅是 iTunes，还有设备上的任何其他应用程序。如果其他应用程序有一个，你可以使用 URL 方案打开它们。

# python - setResultsName 仅显示第一个列表项

> ID：10370889
> 
> 赞同：0
> 
> 时间：2012-04-29T08:50:25.593
> 
> 标签：python, python-2.x, pyparsing

考虑以下最小示例：

```
from pyparsing import Word, delimitedList
the_list = delimitedList(Word("fine").setResultsName("extension", listAllMatches=True))
prefixed = Word("okay").setResultsName("base") + the_list
prefixed.addParseAction(lambda x: map(lambda element: x.base + element, x.extension))
final = prefixed.setResultsName("doesNotWork", listAllMatches=True) + Word("x")

final.parseString("ookf,i,n,ex") 
```

返回

```
(['ookf', 'ooki', 'ookn', 'ooke', 'x'], {'doesNotWork': [((['ookf'], {}), 0)]}) 
```

如何让 pyparsing 将整个列表 ['ookf', 'ooki', 'ookn', 'ooke', 'x'] 分配给doesNotWork，而不仅仅是第一个列表项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:17:46.170

如果您更改`prefixed`为：

```
prefixed = Group(Word("okay").setResultsName("base") + the_list) 
```

这可以接受吗？

# php - pdo 查询选择两个日期之间的记录

> ID：10370891
> 
> 赞同：1
> 
> 时间：2012-04-29T08:50:53.030
> 
> 标签：php, mysql, pdo

此查询：`payment_date BETWEEN "old date" AND "new date"`只有在我们在新日期之前写入旧日期时才会成功运行。如果查询如何使其工作`payment_date BETWEEN "new date" AND "old date"`？因为有时用户先输入新日期，然后才输入旧日期。示例代码：

```
$sql = "SELECT customer_name, phone_number, address FROM sale 
        WHERE seller_id=? && $search_by  LIKE ? && payment_date BETWEEN ? AND ?";
$q = $conn->prepare($sql);
$result = $q->execute(array($userid, "%".$search_value."%", $oldPaymentDate, $newPaymentDate)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:58:34.557

始终验证用户输入，同时只比较日期，然后交换它们的顺序不正确，如下所示：

```
$date1 = new DateTime($newPaymentDate);
$date2 = new DateTime($oldPaymentDate);

if($date1 < $date2) list($newPaymentDate,$oldPaymentDate)=array($oldPaymentDate,$newPaymentDate); 
```

# java - Java中的映射数据结构

> ID：10370897
> 
> 赞同：1
> 
> 时间：2012-04-29T08:52:49.723
> 
> 标签：java, string, data-structures, mapping, hashmap

我必须设计一个将关键字作为输入并输出类别 ID 的函数。前任：

```
f('dog') returns _ANIMAL
f('chair') returns _FURNITURE 
```

我已经有了映射，每次都可以遍历标签数组，但我觉得这不是最好的解决方案。

Java 库中是否有针对此特定任务的特殊数据结构（我正在考虑三元搜索树）？我应该只使用 HashMap （或者 Set （因为类别很少））吗？

PS 这个映射是固定的，一旦构建完成，我不需要添加或删除元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:07:42.257

如果我对您的理解正确，那么 HashMap 听起来正是您想要的。您不希望每次都遍历整个数组，因为有许多函数调用和/或大型数组，您的程序最终会运行缓慢。使用 HashMap，从键（您的关键字）中提取值（您的类别）或多或少会在恒定时间内立即发生。

您可以像这样构建地图：

```
HashMap map = new HashMap();
map.put("dog", "animal");
map.put("chair", "furniture");
map.put("cat", "animal"); 
```

然后`map.get("dog")`返回“动物”，`map.get("chair")`返回“家具”。

正如其他人所指出的那样，枚举也可以很好地工作（并且稍微快一点）——但需要注意的是它们在编译时是固定的，因此在执行期间不能更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:27:53.797

您可以更改`enum`如下：

```
public enum Things{
    _ANIMAL("Dog"), _FURNITURE("Animal"); 
    private String description;
    Things(String description){
        this.description= description;
    }
    public String toString(){
        return description;
    }
}; 
```

每当您想检索枚举的字符串表示形式时，只需调用`toString`

例子：

`Things._ANIMAL.toString()`将输出`"Dog"`

# html - 背景图像崩溃 ASP 页面中的刻度线

> ID：10370901
> 
> 赞同：0
> 
> 时间：2012-04-29T08:53:21.907
> 
> 标签：html, css, asp-classic

首先，我正在调试另一个程序员的代码，所以我不完全确定他在这里试图做什么。该类已经分配了背景图像。之前的程序员选择用内联样式覆盖背景图像。下面的代码行使页面崩溃，直到我取出背景图像。我假设它是双刻度线。它是否违反了一些我不知道的晦涩的 CSS 法律？

```
ptobject = "<div id='ptObj' class='pttxtbox' style=""background-image:url('');"" onmousedown=""pregfocus(this, '', '');"" ></div>"

response.write ptobject 
```

作为参考，这是在没有背景图像的情况下正常工作的经典 ASP 页面上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T08:59:10.700

如果要覆盖样式，则应使用`background-image:none`. 请参阅[W3C](http://www.w3.org/TR/CSS21/colors.html#background-properties)。

`url('')`表示您正在尝试从 location 加载图像文件`''`。
（我希望它什么都不做，但显然，它会导致崩溃，所以最好不要这样做！）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T09:45:01.897

我不知道您是否无意中将其包含在代码示例中，`style=""background-image:url('');""`但它应该`style="background-image:url('');"`并且`onmousedown=""pregfocus(this, '', '');""`应该是`onmousedown="pregfocus(this, '', '');"`这可能不是您的问题的原因，但可能会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T10:22:19.803

我认为问题在于双“”，这是一个转义序列，但仅在与前缀为 @ 的字符串一起使用时

所以该行应为：

```
ptobject = @"<div id='ptObj' class='pttxtbox' style=""background-image:url('');"" onmousedown=""pregfocus(this, '', '');"" ></div>" 
```

希望有效

马丁

# javascript - 模态出现在页面加载

> ID：10370906
> 
> 赞同：0
> 
> 时间：2012-04-29T08:54:02.037
> 
> 标签：javascript, jquery-ui, jquery

以下是我的代码，但模式仅在有人点击时出现

```
<a href="#" rel="modal-profile">open modal box</a> 
```

我想知道如何修改我的以下代码，以便我的模式出现在页面加载中。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">

jQuery(document).ready(function () {

    jQuery.noConflict();

    // Position modal box in the center of the page
    jQuery.fn.center = function () {
        this.css("position","absolute");
        this.css("top", ( jQuery(window).height() - this.height() ) / 2+jQuery(window).scrollTop() + "px");
        this.css("left", ( jQuery(window).width() - this.width() ) / 2+jQuery(window).scrollLeft() + "px");
        return this;
      }

    jQuery(".modal-profile").center();

    // Set height of light out div  
    jQuery('.modal-lightsout').css("height", jQuery(document).height());    

    // Fade in modal box once link is clicked
    jQuery('a[rel="modal-profile"]').click(function() {
        jQuery('.modal-profile').fadeIn("slow");
        jQuery('.modal-lightsout').fadeTo("slow", .5);
    });

    // closes modal box once close link is clicked, or if the lights out divis clicked
    jQuery('a.modal-close-profile, .modal-lightsout').click(function() {
        jQuery('.modal-profile').fadeOut("slow");
        jQuery('.modal-lightsout').fadeOut("slow");
    });
});
</script>
<style type="text/css">
body {
    color:#333;
    background-color:#ec176c;
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px;
}
.modal-profile h2 {
    font-size:2em;
    letter-spacing:-1px;
}
.modal-profile {
    display:none;
    height: 250px;
    width: 500px;
    padding:25px;
    border:1px solid #fff;
    box-shadow: 0px 2px 7px #292929;
    -moz-box-shadow: 0px 2px 7px #292929;
    -webkit-box-shadow: 0px 2px 7px #292929;
    border-radius:10px;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    background: #f2f2f2;
    z-index:50;
}

.modal-lightsout {
    display:none;
    position:absolute;
    top:0;
    left:0;
    width:100%;
    z-index:25;
    background:#000;
}

a.modal-close-profile {
    position:absolute;
    top:-15px;
    right:-15px;
}

a.modal-social {
    margin:0 10px 0 0;
}

</style>
</head>

<body>
<div class="container">
<div class="modal-lightsout"></div>
<div class="modal-profile">
    <h2>Nam liber tempor cum soluta nobis eleifend</h2>
    <a href="#" title="Close profile window" class="modal-close-profile"><img border="0px" src="close.png" alt="Close profile window" /></a>
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p>
</div>
<a href="#" rel="modal-profile">open modal box</a>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:58:57.040

```
jQuery('.modal-profile').fadeIn("slow");
jQuery('.modal-lightsout').fadeTo("slow", .5); 
```

将上述内容放入[.ready](http://jqapi.com/#p=ready) for document

```
 jQuery(document).ready(function () {
         jQuery('.modal-profile').fadeIn("slow");
         jQuery('.modal-lightsout').fadeTo("slow", .5);
    }); 
```

这样，一旦文档准备好，您显示模态框的方法就会发生

**[演示](http://jsfiddle.net/dhirajbodicherla/r7Yrn/)**

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:01:19.720

你可以像下面这样做

```
function modalload(){

jQuery('.modal-profile').fadeIn("slow");
jQuery('.modal-lightsout').fadeTo("slow", .5);
} 
```

并在您的页面加载中调用它，如下所示

jQuery（文档）.ready（函数（）{

模态负载（）；

});

然后您的模式将在页面加载后出现。您还可以通过调用计时器函数在网站加载一段时间后加载模式。

希望这能解决你的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T09:10:23.737

要使其仅在页面加载时加载，只需删除点击处理程序，如下所示：

```
jQuery('.modal-profile').fadeIn("slow");
jQuery('.modal-lightsout').fadeTo("slow", .5); 
```

要保留点击处理程序，并在页面加载时仍使其打开，只需触发一次点击，如下所示：

```
jQuery('a[rel="modal-profile"]').click(function() {
    jQuery('.modal-profile').fadeIn("slow");
    jQuery('.modal-lightsout').fadeTo("slow", .5);
}).click(); 
```

只需`.click()`在函数末尾添加 ，它将在页面加载时运行。

# php - 如何实现嵌套评论？

> ID：10370912
> 
> 赞同：3
> 
> 时间：2012-04-29T08:55:01.080
> 
> 标签：php, html, html-lists

我想在我的网站上显示这样的评论：

```
<li>Parent
    <ul>
        <li>child one</li>
        <li>child two
            <ul>
                <li>grandchild</li>
                <li>other grandchild</li>
            </ul>
        </li>
     </ul>
<li>Another parent with no children</li>
<li> 
```

我已阅读[以下文章](http://www.jongales.com/blog/2009/01/27/php-class-for-threaded-comments/)，但它不使用`<li>`. 那么有没有办法像我以前用这样的数组显示评论？谢谢。

```
$comments = array(
      array('id'=>1, 'parent_id'=>NULL,   'text'=>'Parent'),
      array('id'=>2, 'parent_id'=>1,      'text'=>'Child'),
      array('id'=>3, 'parent_id'=>2,      'text'=>'Child Third level'),
      array('id'=>4, 'parent_id'=>NULL,   'text'=>'Second Parent'),
      array('id'=>5, 'parent_id'=>4,      'text'=>'Second Child')
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T09:03:33.167

我假设你的评论表有 id、parent_id、comment ……我的建议是这样的；

选择您喜欢的评论；

```
$sql = "SELECT *FROM comments ORDER BY id DESC";

$rows = mysql_query($sql); 
```

下一步是数组操作。您可以在下面看到以下代码并在[此处](http://codepad.org/THUrVyG9)尝试工作演示；

```
$rows = your_select_result;//I assumed that you have done these stuffs
$comments = $row;
/**
This is test data, please remove this array while you are
running own application.Since you will use the data one you get your db
**/
$comments = array(
    1 => array('id' => 1, 'parent_id' => 0, 'childs' => array()),
    2 => array('id' => 2, 'parent_id' => 0, 'childs' => array()),
    3 => array('id' => 3, 'parent_id' => 0, 'childs' => array()),
    5 => array('id' => 5, 'parent_id' => 0, 'childs' => array()),
    11 => array('id' => 11, 'parent_id' => 0, 'childs' => array()),
    17 => array('id' => 17, 'parent_id' => 0, 'childs' => array()),
    23 => array('id' => 23, 'parent_id' => 0, 'childs' => array()),
    28 => array('id' => 28, 'parent_id' => 0, 'childs' => array()),
    4 => array('id' => 4, 'parent_id' => 1, 'childs' => array()),
    6 => array('id' => 6, 'parent_id' => 1, 'childs' => array()),
    8 => array('id' => 8, 'parent_id' => 2, 'childs' => array()),
    9 => array('id' => 9, 'parent_id' => 2, 'childs' => array()),
    7 => array('id' => 7, 'parent_id' => 3, 'childs' => array()),
    12 => array('id' =>12, 'parent_id' => 7, 'childs' => array()),
    13 => array('id' => 13, 'parent_id' => 12, 'childs' => array()),
);

/** Comment prepare start */
foreach ($comments as $k => &$v) {
    if ($v['parent_id'] != 0) {
        $comments[$v['parent_id']]['childs'][] =& $v;
    }
}
unset($v);

foreach ($comments as $k => $v) {
    if ($v['parent_id'] != 0) {
        unset($comments[$k]);
    }
}

/** Comment prepare end */

//Your indent pattern
function indent($size) {
    $string = "";
    for ($i = 0; $i < $size; $i++) {
        $string .= "#";
    }
    echo $string; 
}

function printComments($comments, $indent = 0) {
    foreach ($comments as $comment) {
        echo indent($indent + 1).' I am comment '.$comment['id']."\n";
        if (!empty($comment['childs'])) {
            printComments($comment['childs'], $indent + 1);
        }
        }
}

printComments($comments); 
```

演示请看[这里](http://codepad.org/THUrVyG9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:01:37.713

顺便说一句，在使用*物化路径*技术的情况下，您不需要递归，也不需要嵌套数组或其他东西。

只是来自数据库的简单线性输出。

为此，只需`path`在数据库中创建一个名为的字段，并用所有父 ID 填充它，并填充到一些相当长的长度。

说，示例树可能看起来像

```
id 1 root path 
    id 3 root 1 path 000000001
        id 5 root 1 path 000000001000000003
    id 4 root 1 path 000000001
id 2 root path 000000002
    id 6 root 2 path 
```

因此，通过简单查询您的表，`ORDER BY root DESC, path ASC`
您将获得您的树作为一个简单的已排序列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:43:00.267

这个函数只需要每个评论数组中的`parent_id`and`id`键。

```
$comments = array(
            array('id'=>1, 'parent_id'=>NULL, 'text'=>'Parent'),
            array('id'=>2, 'parent_id'=>1,    'text'=>'Child'),
            array('id'=>3, 'parent_id'=>2,    'text'=>'Child Third level'),
            array('id'=>4, 'parent_id'=>NULL, 'text'=>'Second Parent'),
            array('id'=>5, 'parent_id'=>4,    'text'=>'Second Child')
        ); 
```

这将返回一个多维数组。如果一项没有子项，`$comment['children']`则等于`NULL`，否则将附加相应的子项数组。

```
function arrangecomments($comments){

    $tree = array();

    /* We get all the parent into the tree array */
    foreach ($comments as &$node) {
        /* Note: I've used 0 for top level parent, you can change this to == 'NULL' */
        if($node['parent_id']=='0'){
            $tree[] = $node;
            unset($node);
        }
    }

    /* This is the recursive function that does the magic */
    /* $k is the position in the array */
    function findchildren(&$parent, &$comments, $k=0){
        if (isset($comments[$k])){
            if($comments[$k]['parent_id']==$parent['id']){
                $com = $comments[$k];
                findchildren($com, $comments); // We try to find children's children
                $parent['children'][] = $com;
            }
            findchildren($parent, $comments, $k+1); // And move to the next sibling
        }
    }

    /* looping through the parent array, we try to find the children */
    foreach ($tree as &$parent) {
        findchildren($parent, $comments);
    }

    return $tree;

} 
```

我知道它可以改进很多，但它有效，到目前为止我还没有发现任何错误。希望能帮助到你！

# c++ - 在 Qt Creator 中使用 Guard Malloc(Mac OS) 进行调试

> ID：10370913
> 
> 赞同：0
> 
> 时间：2012-04-29T08:55:08.413
> 
> 标签：c++, macos, debugging, qt

在 Xcode 中，可以使用所谓的[保护 malloc](https://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man3/libgmalloc.3.html)标志来简化调试 malloc 和指针的东西。

我想知道调试时如何在 Qt Creator 上使用该标志。

在手册页中，他们给出了将它与 gdb 一起使用的示例：

```
% cc -g -o gmalloctest gmalloctest.c
% gdb gmalloctest
Reading symbols for shared libraries .. done
(gdb) set env DYLD_INSERT_LIBRARIES /usr/lib/libgmalloc.dylib
(gdb) r 
```

调试时如何告诉 Qt Creator “设置环境”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:18:52.577

您可以在 Creator 的项目运行设置面板中设置环境变量：http: [//doc.qt.nokia.com/qtcreator-2.4/creator-run-settings.html](http://doc.qt.nokia.com/qtcreator-2.4/creator-run-settings.html)

展开“运行环境”以添加/编辑变量。它们是在您运行/调试项目时设置的。

# iphone - 那么我可以用什么替换 TTTableTextItem 呢？

> ID：10370915
> 
> 赞同：2
> 
> 时间：2012-04-29T08:55:36.533
> 
> 标签：iphone, ios, three20

所以这就是我正在使用的。我正在尝试摆脱 Three20 框架......但我不确定我应该用什么来替换它：

```
NSMutableArray *selectedPeople = [[NSMutableArray alloc] init];
NSArray *cells = [textField cells];

for (TTTableTextItem *cell in cells) {
    NSDictionary *person = [textField.dataSource contactInfoAtIndex:[cell.URL integerValue]];
    [selectedPeople addObject:person];
    [AppPreferences incrementContactUsage:[[person objectForKey:@"abId"] intValue]];
} 
```

我有一个文本字段，其实现类似于消息应用程序中的令牌字段视图。（使用 JSTokenField ...我已经用它替换了 TTPickerView）。

我对 iOS 场景还很陌生，我正在做一个旧项目（试图让它摆脱困境）。

提前感谢您的帮助。

# java - 从列表中删除重复项而不对其进行迭代或使用集合

> ID：10370919
> 
> 赞同：2
> 
> 时间：2012-04-29T08:56:36.607
> 
> 标签：java, arraylist

> **可能重复：**
> [从数组列表中删除元素的更有效方法](https://stackoverflow.com/questions/10370464/more-efficient-way-to-remove-elements-from-an-array-list)

我开发了一个数组列表

```
ArrayList<String> list = new ArrayList<String>();

       list.add("1");
       list.add("2");
       list.add("3");
       list.add("3");
       list.add("5");
       list.add("6");
       list.add("7");
       list.add("7");
       list.add("1");
       list.add("10");
       list.add("2");
       list.add("12"); 
```

现在我试图从中删除重复的元素，但这次我不想将它转换为集合或在列表本身中有一个迭代循环，我正在尝试任何内置的 List 或 Collections 类方法来删除重复项或者有没有其他方法可以做到这一点，请告知，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:46:03.707

对于您的要求，根本没有解决方案。不要`List`一开始就使用 - 使用`Set`. 如果您担心保留插入顺序，可以使用`LinkedHashSet`. 如果需要`List`从method-use返回`LinkedHashSet`，再转换成`List`; 还是考虑回国`Collection`，不行`List`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-29T09:19:06.947

```
List<String> list = new List<String>();

...

list = list.Distinct().ToList<String>(); 
```

# c# - 如何确定数学表达式的求值顺序？

> ID：10370921
> 
> 赞同：2
> 
> 时间：2012-04-29T08:56:53.697
> 
> 标签：c#, java, algorithm

给定一个数学表达式，我想找出可以同时评估的部分。例如，给定以下表达式，

```
(a + b) * c - (d + e) / f 
```

`(a + b)`并且`(d + e)`可以同时评估，因为它们彼此独立。

有没有为此目的的算法？或者甚至有没有实现这个功能的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T09:21:44.800

[这](http://lukaszwrobel.pl/blog/math-parser-part-1-introduction)是用于创建数学解析器的简短而简单的分步手册。解析表达式后，持有表示解析表达式的树，您可以对其进行迭代，并且在每次迭代中，树的每一对叶子都将代表一个独立的表达式（可以同时评估）。[在每次迭代中，用它们的结果替换评估的表达式]

[在 C# 中使用表达式树构建表达式求值器](http://www.codeproject.com/Articles/335587/Building-Expression-Evaluator-with-Expression-Tree)

![在此处输入图像描述](../Images/8a1b2600c37985c13fa8f8c9e796fd0b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:33:53.713

好的，让我们将示例视为一棵树：

```
 -
   (*           /)
(c    +)     (+    f)
   (a   b) (d   e) 
```

（括号将节点配对为同一父节点的子节点）

如果简单的话，就可以得到那棵树，例如使用 Shutting Yard 算法。

现在观察，为了评估一个节点，您需要的只是该节点的子节点（但递归地如此）。因此，正如您所注意到的`(a + b)`，`(d + e)`不要相互依赖。也不`(c * (a + b))`依赖`(d + e)`或依赖`((d + e) / f)`，`((d + e) / f)`也不依赖`(a + b)`。

一般来说，取一个节点`n`，任何既不是`n`祖先也不是后代的节点，可以同时进行评估。如果您正在使用计划，则必须添加“如果现在可以评估该节点” - 显然您无法在评估其后代之前评估节点。

我不确定您所指的“此目的”是什么。你想计算什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T09:06:43.257

评估顺序取决于两个因素：

*   **Precedence**：在每种语言中通常都有一个表来指示每个运算符的优先级
*   **关联**性：当表达式涉及具有相同优先级的多个运算符时，运算符关联性控制执行操作的顺序。

*如果可能有一些涉及同时评估部分表达式的优化，我认为只能在**JVM/CLR 级别**完成，而不是使用库......*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T09:08:31.117

我相信你应该使用[Reversed Polish Notation](http://en.wikipedia.org/wiki/Reverse_Polish_notation)。
阅读以下内容了解更多详情：

*   [http://www.dreamincode.net/forums/topic/35320-reverse-polish-notation-in-c%23/](http://www.dreamincode.net/forums/topic/35320-reverse-polish-notation-in-c%23/)
*   [http://www.calculator.org/rpn.aspx](http://www.calculator.org/rpn.aspx)

[这是](http://snipplr.com/view/8962/infix-notation-to-reverse-polish-notation/)一个用 C++ 编写的函数，可将正常符号转换为反向波兰符号。有人可能会帮助您将其转换为 C#：

# jquery - jQuery $.getJSON 不工作，但在 thaicreate.com 工作

> ID：10370926
> 
> 赞同：0
> 
> 时间：2012-04-29T08:57:29.540
> 
> 标签：jquery, getjson

[http://www.thaicreate.com/jquery/jquery-ajax-jquery-getjson.html](http://www.thaicreate.com/jquery/jquery-ajax-jquery-getjson.html)

[http://www.thaicreate.com/jQuery-Demo/jQuerygetJSON.html](http://www.thaicreate.com/jQuery-Demo/jQuerygetJSON.html)

此代码不起作用？为什么？

```
<html>
   <head>
      <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
      <title>ThaiCreate.Com jQuery Tutorials</title>
      <script type="text/javascript"
      src="http://www.thaicreate.com/jQuery-Demo/jquery-1.6.4.js"></script>
      <script type="text/javascript">
         $(document).ready(function () {

            $("#btn1").click(function () {

               $.getJSON("http://www.thaicreate.com/jQuery-Demo/json.js", function (result) {
                  $.each(result, function (i, field) {
                     $("#div1").append(field + "<br / >");
                  });
               });

            });

         });
      </script>
   </head>
   <body>
      <div id="div1"></div>
      <input id="btn1" value="Load" type="button">
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:07:44.167

您不能`absolute path`在 URL 字段中使用 an，因为该请求是`cross-domain`. 为此，它需要包含一个`dataType`of `JSONP`。将 json.js 文件复制到本地磁盘会更容易。

# html - CSS HTML 语义和定位

> ID：10370929
> 
> 赞同：0
> 
> 时间：2012-04-29T08:58:03.540
> 
> 标签：html, css

我目前正在为我的主要内容区域开发一个具有这种设计和布局的网站：http: [//img528.imageshack.us/img528/9483/screenshot20120429at124.png](http://img528.imageshack.us/img528/9483/screenshot20120429at124.png)

但是，我发现使用适当的语义编写 HTML 和 CSS 有点困难。
首先，我应该使用 div 来拆分左右列，还是 HTML5 部分标签与图片的旁边标签？

其次，定位每个部分或区域的最佳方式是什么？

最后，话虽如此，在每个内容区域的底部都有 2 个应该水平内联的按钮。考虑到网站用户稍后将放置在他们自己的文本中，并且随着更多文本被放置在其中，两个按钮都应该将自己推或定位得更远。

这个 jsfiddle 目前是使它工作的原因......但是，似乎错了？ [http://jsfiddle.net/LGEKW/](http://jsfiddle.net/LGEKW/)

如果这 2 个按钮在当前 div 中，我是使用绝对位置、相对位置还是浮动位置……我不知道。任何有关您将如何进行此操作的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:09:37.030

1.  如果您正在使用`<!doctype html>`它肯定会更好地使用语义标签，因为`divs`根本没有语义。
2.  在我看来，定位元素的最佳方式是使用`float` 属性
3.  按钮也应该是浮动的。不是`absolutely positioned`。因此，当用户添加更多内容时，它们将被下推。尝试将它们放在同一个包装器中的内容之后
4.  在每个段落之后删除您的`br`标签。`p`元素是块级的-因此您可以使用`margin-bottom`属性将下一个`p`向下推一点

# .net - 在 C# 中使用应用程序域

> ID：10370931
> 
> 赞同：2
> 
> 时间：2012-04-29T08:58:35.600
> 
> 标签：.net

我得出的结论是，在我的项目中使用应用程序域将是最好的方法。我必须将不同的 dll 文件加载到我的项目中才能使用不同开发人员编写的。我不知道从哪里开始寻找，也不完全确定它是如何运作的。我看过几个例子，但它们并没有让我清楚地了解该怎么做。我想知道的是，如果我有一个 dll 并将其加载到应用程序域中，我是否能够使用该 dll 中的公共方法，或者如何使用此应用程序域？我还希望有人可以向我提供有关如何使用它、加载我的 dll 以及访问/使用它的教程链接。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:29:02.697

如果您想在运行时在新的 appdomain 中加载项目的 urefrenced dll，那么您需要混合反射和应用程序域概念。这意味着在不同的应用程序域中使用反射加载 dll。

您的问题的示例代码：

```
static void UsereflectionWithAppDomain()
{
    AppDomain mydomain = AppDomain.CreateDomain("MyDomain");
    MethodInfo mi = default(MethodInfo);

    // Once the files are generated, this call is
    // actually no longer necessary.

    byte[] rawAssembly = loadFile(@"d:\RelectionDLL.dll");

    // rawSymbolStore - debug point are optional.
    byte[] rawSymbolStore = loadFile(@"d:\RelectionDLL.pdb");
    Assembly assembly = mydomain.Load(rawAssembly, rawSymbolStore);

    Type reflectionClassType = assembly.GetType("ReflectionDLL.MyStaicClass");

    mi = reflectionClassType.GetMethod("PrintI");
    mi.Invoke(null, null);

    AppDomain.Unload(mydomain);
}

// Loads the content of a file to a byte array. 
static byte[] loadFile(string filename)
{
    FileStream fs = new FileStream(filename, FileMode.Open);
    byte[] buffer = new byte[(int)fs.Length];
    fs.Read(buffer, 0, buffer.Length);
    fs.Close();

    return buffer;
} 
```

# php - 从网格数组更新数据库

> ID：10370932
> 
> 赞同：1
> 
> 时间：2012-04-29T08:58:51.417
> 
> 标签：php, mysql

我正在使用 DHTMLX javascript 库以表格形式呈现网格。我的用户在他们的网格中可能有数百种产品，但我只捕获他们添加价格的行。然后，我需要将这些行与其他一些信息一起添加到 MySQL 数据库中。

获取标准 $POST 信息并在我的 PHP 脚本中对其进行操作是我目前技能的极限，所以我需要帮助的地方是由更新的行创建的数组。在我的 $POST 中捕获的一个示例是：

```
Array
(
    [product] => 64
    [dept] => 000
    [submit] => Submit
    [gridbox_1_4] => 422
    [gridbox_64_4] => 534
    [gridbox_175_4] => 1234
    [gridbox_180_4] => 645
) 
```

我目前使用以下方法捕获基本的 $POST 变量：

```
$itemcat  = filter($_POST['product']);         
$dept7    = filter($_POST['dept']); 
```

我的问题是如何捕获网格框变量，以便可以在 INSERT 语句中使用它们？唯一会改变的数字是中间数字，它代表我的数据库中我需要插入另一个表的产品的主键。我假设我需要以某种方式爆炸 $POST 变量？然后我如何使用类似的东西插入它们：

```
"INSERT INTO submissions 
                       (product_id, user_id,submission_id, sugg_price) 
                        VALUES ('" . $gridbox_id . "','" . $myid . "','NULL', '" . $sugg . "')"; 
```

我今天所有关于阵列的阅读都让我很好地理解了它们是如何从 100 英尺的角度工作的，但不知道如何专门解决我的问题，甚至不知道如何开始。我希望社区可以让我走上正确的道路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:02:31.247

您可以[遍历](http://uk.php.net/manual/en/control-structures.foreach.php)数组并对每个键`$_POST`执行[正则表达式匹配：](http://php.net/manual/en/function.preg-match.php)

```
// PDO will make your life so much easier
$dbh = new PDO('mysql:dbname=testdb;host=127.0.0.1', $user, $password);

// prepared statements are great - prepare once, use many
$stmt = $dbh->prepare('
  INSERT INTO submissions
    ( product_id,  user_id, submission_id,  sugg_price)
  VALUES
    (:product_id, :user_id, NULL         , :sugg_price)
');

// avoid SQL injection by passing your variables in as parameters
// see http://bobby-tables.com to understand why
$stmt->bindValue('user_id', $myid);

foreach ($_POST as $key => $val) {
  if (preg_match("/^gridbox_(\d+)_4$/", $key, $matches)) {
    $stmt->execute(array(
      ':product_id' => $matches[1],
      ':sugg_price' => $val
    ));
  }
} 
```

# python - 路径数据类型不采用带有“？”的完整 url 在里面

> ID：10370938
> 
> 赞同：1
> 
> 时间：2012-04-29T08:59:27.330
> 
> 标签：python, bottle

示例：/open/123/http://x.com/wordpress/?p=592

```
@route('/open/<item_id:int>/<url:path>')
def open(item_id , url):
    print url 
```

此打印的输出是

'http://x.com/wordpress/'

我想要的是完整的网址

'http://x.com/wordpress/?p=592'

我想要完整的 url，因为我要记录用户点击，然后将他引导到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T13:38:56.833

路由仅匹配 URL*路径*，而不是*查询*（RFC 3986 第 3.4 节）。试试这个：

```
@route('/open/<item_id:int>/<url:path>')
def open(item_id , url):
    if request.query_string:
        url += '?' + request.query_string
    print url 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:16:30.880

你需要类似的东西

```
@route('/open/<item_id:int>/<url:path>/<stuff_after_slash:whatevertype>')
def open(item_id , url, stuff_after_slash):
    print url + stuff_after_slash 
```

# c++ - 大O计算

> ID：10370939
> 
> 赞同：0
> 
> 时间：2012-04-29T08:59:29.390
> 
> 标签：c++, complexity-theory, big-o

```
int maxValue = m[0][0];         
for (int i = 0; i < N; i++) 
{               
    for (int j = 0; j < N; j++) 
    {                   
        if ( m[i][j] >maxValue )        
        {                   
            maxValue = m[i][j];     
        }                       
    }                   
}                   

cout<<maxValue<<endl;           

int sum = 0;                
for (int i = 0; i < N; i++)     
{                   
    for (int j = 0; j < N; j++)     
    {                   
        sum = sum + m[i][j];            
    }                   
} 

cout<< sum <<endl; 
```

对于上面提到的代码，我得到了 O(n2) 作为执行时间增长他们得到它的方式是：

最大 [O(1) , O(n2), O(1) , O(1) , O(n2), O(1)]

两个 O(n2) 都是 for 循环。这个计算正确吗？

如果我将此代码更改为：

```
int maxValue = m[0][0]; 
int sum = 0;
for (int i = 0; i < N; i++)         
{                       
    for (int j = 0; j < N; j++)         
    {                       
    if ( m[i][j] > maxValue )       
        {                   
        maxValue = m[i][j];     
        }               
        sum += m[i][j];
    }                   
}   

cout<<maxValue<<endl;   
cout<< sum <<endl; 
```

大 O 仍然是 O(n2) 对吗？那么这是否意味着 Big O 只是一个关于时间将如何根据输入数据大小增长的指示？而不是算法怎么写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:31:03.843

这对我来说有点像家庭作业问题，但是......

Big-Oh 是关于算法的，特别是算法执行的步骤数（或使用的内存量）如何随着输入数据大小的增长而增长。

在您的情况下，您将 N 作为输入的大小，这很令人困惑，因为您有一个二维数组 NxN。所以真的，因为你的算法只对这个数据进行一两次传递，你可以称之为 O(n)，在这种情况下，n 是你的二维输入的大小。

但是要回答您问题的核心，您的第一个代码对数据进行两次传递，而您的第二个代码在一次传递中执行相同的工作。但是，Big-Oh 的想法是它应该为您提供增长*顺序*，这意味着与特定计算机的运行速度无关。所以，可能是我的计算机速度是你的两倍，所以我可以在你运行第二个代码的同时运行你的第一个代码。所以我们想忽略这些差异，说两种算法都会对数据进行固定次数的传递，所以为了“增长顺序”的目的，一次、两次、三次都没有关系。这一切都与一次通行证相同。

在不考虑 NxN 输入的情况下考虑这一点可能更容易。想想一个包含 N 个数字的列表，然后说你想对它做点什么，比如找到最大值，或者对列表进行排序。如果您的列表中有 100 个项目，您可以在 100 步中找到最大值，如果您有 1000 个项目，您可以在 1000 步中找到最大值。所以增长的顺序是*线性的*输入的大小：O(n)。另一方面，如果你想对它进行排序，你可以编写一个算法，在每次找到要插入的下一个项目时，对数据进行大致完整的传递，并且它必须对列表，所以这使得 n 传递你的长度为 n 的列表，所以这是 O(n^2)。如果您的列表中有 100 个项目，那大约是 10^4 步，如果您的列表中有 1000 个项目，那大约是 10^6 步。所以我的想法是，与你的输入规模相比，这些数字增长得非常快，所以即使我有一台速度更快的计算机（例如，一个比你的好 10 年的模型），我也可能在即使列表长 2 或 10 甚至 100 或 1000 倍，也会出现最大问题。但是对于 O(n^2) 算法的排序问题，我不会 即使我的计算机比你的好 10 年或 20 年，当我尝试列出一份长度为 100 或 1000 倍的列表时，我也无法击败你。这就是 Big-Oh 的想法，将那些“相对不重要”的速度差异分解出来，并能够在更一般/理论上的意义上看到给定算法在给定输入大小上所做的工作量。

当然，在现实生活中，一台计算机比另一台快 100 倍可能对您产生巨大影响。如果您尝试使用固定的最大输入大小来解决特定问题，并且您的代码以您老板要求的速度的 1/10 运行，并且您获得了一台运行速度快 10 倍的新计算机，那么您的问题无需需要写一个更好的算法。但关键是，如果您想处理更大（更大）的数据集，您不能只等待更快的计算机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:12:39.307

该`big O`符号是基于输入大小执行算法所花费的最大时间量的上限。所以基本上两种算法的最大运行时间可能略有不同，但`big O`表示法相同。

您需要了解的是，对于基于输入大小的线性运行时间函数，其大 o 符号为 o(n)，而二次函数始终具有大 o 符号为 o(n^2)。

因此，如果您的运行时间仅为 n，即一次线性传递，则大 o 符号保持 o(n)，如果您的运行时间为 6n+c，即 6 次线性传递和恒定时间 c，它仍然是 o(n)。

现在在上述情况下，第二个代码更加优化，因为您需要为循环跳转到内存位置的次数更少。因此这将提供更好的执行。但是这两个代码的渐近运行时间仍然是`o(n^2)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T09:09:01.000

是的，在这两种情况下都是 O(N^2)。当然 O() 时间复杂度取决于您如何编写算法，但上述两个版本都是 O(N^2)。但是，请注意，实际上 N^2 是输入数据的大小（它是 N x N 矩阵），因此这将更好地表征为线性时间算法 O(n)，其中 n 是输入的大小，即 n = N x N。

# mongodb - 如何向 mongo 询问符合我的标准的所有嵌入文档？

> ID：10370941
> 
> 赞同：0
> 
> 时间：2012-04-29T08:59:42.997
> 
> 标签：mongodb, nosql

我有一个电影集合，电影集合有一个嵌入的评论文档数组。我想选择所有 status=1 的评论

```
{
  reviews: [
    {
      status: 0,
      text: 'hello'
    }, {
      status: 1,
      text: 'hi'
    }
}, {
    ... etc ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:02:45.280

有同一个问题的答案：[Filtering embedded documents in MongoDB](https://stackoverflow.com/questions/2138454/filtering-embedded-documents-in-mongodb)

在当前稳定版本的 mongodb 中，仍然无法进行嵌入式文档过滤。

在 2.1.0 中有聚合。[您可以使用展开](http://wiki.mongodb.org/display/DOCS/Aggregation+Framework+-+$unwind)和[匹配](http://wiki.mongodb.org/display/DOCS/Aggregation+Framework+-+%24match)过滤评论

不过我自己没试过。

# javascript - 检查元素是否在实际页面上

> ID：10370944
> 
> 赞同：0
> 
> 时间：2012-04-29T09:00:15.003
> 
> 标签：javascript, jquery, element, visibility

我正在使用[poshytip](http://vadikom.com/demos/poshytip/)，它工作正常，直到我想在当前页面*下*的元素上显示我的提示（我的意思是我必须向下滚动才能看到它的页面，真的不知道如何正确命名）。不幸的是，poshytip 有一些与此相关的错误 - 如果我想在当前低于当前页面位置的元素上显示提示，那么提示会显示在我的页面底部。还没有见过比这更好的提示插件，所以我决定自己修复它。

问题是 - jQuery/javascript 中有没有办法检查元素（例如带有 ID 的输入）是否在用户正在查看的当前页面上？通过说`current page`我的意思是页面的顶部 - 我的元素放置得更低，所以用户必须向下滚动页面才能看到它，所以有没有办法做类似的事情：如果用户正在向下滚动页面，并且元素将最终*可见*然后向用户发送警报？

我知道这可能有点复杂，但是找不到更好的词来描述我的问题，如果您有其他问题，我会回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:03:59.733

如果你想测试一个元素的可见性，你应该[在这里](https://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport)`in the viewport`参考这篇文章，因为它的概述很清楚。

另一方面，我更喜欢将 jQuery 工具套件用于我选择的 Tooltip 插件。你可以[在这里看到](http://www.jquerytools.org/demos/tooltip/index.html)

# objective-c - 检查 char 是否为零

> ID：10370945
> 
> 赞同：1
> 
> 时间：2012-04-29T09:00:30.280
> 
> 标签：objective-c

我有一个字符，但是当我检查它是否为 nil 时，我得到一个异常`Comparison between pointer and integer`。这是我的代码：

```
char *character1 = 'B';
if (character1 != nil){
    ...
} else {
    ...
} 
```

这是在目标c。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T09:02:05.287

字符（通常）是 8 位整数值，`nil`而是指针。也许您想要 NUL 字符`'\0'`：

```
if (character1 != '\0') { 
```

请注意，值周围的*单*引号表示它是`char`类型。

# c# - 在 MVC3 中编辑字典

> ID：10370947
> 
> 赞同：1
> 
> 时间：2012-04-29T09:01:01.347
> 
> 标签：c#, asp.net-mvc-3, dictionary

我有一个包含字典的视图模型“MyClass”：

```
 Dictionary<string, bool> columns {get; set;} 
```

它有键和值

```
 columns.Add("Name", true);
 columns.Add("Type", true); 
```

现在，我想让用户编辑 MyClass 及其字典。

对于**每个键**，我想显示它的键并启用检查\取消检查它的值 (true\false)，这样输入的名称将是编辑的正确名称。由于字典有很多键，我需要用“foreach”或“for”来处理它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:24:01.500

您可以从[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1开始](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:31:52.693

在您的情况下，您需要这样的东西，以便默认活页夹理解`name=""`格式：

```
<input type="checkbox" name="columns[0].Value" value="Key0 string value" />
<input type="checkbox" name="columns[1].Value" value="Key1 string value" /> 
```

不幸的是，默认的助手并不完全支持这一点，所以你必须`name=""`明确地编写。就像是：

```
@Html.CheckBox("columns[" + i + "].Value", new { value = columns[i].Key }); 
```

[在此](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)博客文章中阅读有关此类绑定的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T09:57:17.483

你需要在你的视图中写这样的东西

```
@using (Html.BeginForm()) {

    <fieldset>
        <legend>MyClassViewModel</legend>
        @foreach (var item in Model.Columns){
            @Html.Label(item.Key)
            @Html.CheckBox(item.Key, item.Value)
        }
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

在这种情况下，您的视图必须绑定到模型

```
@model MvcDemoApp.Models.MyClassViewModel 
```

或作为替代

```
 @foreach (var item in Model.Columns)
    {
        @item.Key 
        <input type="checkbox" id="@item.Key" checked="@item.Value" />
        <input type="hidden" value="@item.Value" />
        <br />
    } 
```

或尝试使用社区的 CheckBoxList 自定义助手

[http://weblogs.asp.net/gunnarpeipman/archive/2011/05/05/asp-net-mvc-implementing-checkboxlist.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2011/05/05/asp-net-mvc-implementing-checkboxlist.aspx)

[http://www.codeproject.com/Articles/292050/MVC3-Html-CheckBoxList-custom-extension](http://www.codeproject.com/Articles/292050/MVC3-Html-CheckBoxList-custom-extension)

# ruby-on-rails - 在 Rails 3.2.3 中渲染 text_area 时的额外空格

> ID：10370948
> 
> 赞同：3
> 
> 时间：2012-04-29T09:01:04.337
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

呈现此 HAML 代码时，我在文本区域内获得了额外的空白。

```
= f.text_area :message, placeholder: "Reply" 
```

我正在运行 Rails 3.2.3 和 haml-rails 0.3.4 和 haml 3.1.4

我不知道为什么会这样。

这是使用额外空格呈现的代码

```
<textarea class="textarea" cols="50" id="idea_idea" name="idea[idea]" rows="2">&#x000A;</textarea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:25:30.853

刚刚找到了解决这个问题的方法。

我升级到 HAML 的“3.1.5”测试版，现在可以正常工作了。

```
gem 'haml', :git => "git://github.com/haml/haml.git", :branch => "315" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:57:48.270

您正在运行的版本应该修复了类似的问题，请参阅下面链接的 ActionPack 变更日志，它似乎包含与该问题相关的多个条目。

[https://github.com/rails/rails/blob/3-2-stable/actionpack/CHANGELOG.md](https://github.com/rails/rails/blob/3-2-stable/actionpack/CHANGELOG.md)

# python - 如何避免在python中创建对象？

> ID：10370951
> 
> 赞同：7
> 
> 时间：2012-04-29T09:01:52.947
> 
> 标签：python, python-3.x

我是 python 编程的新手，我有一个类，我为这个类创建了一个对象（obj1）。我不想创建这个对象以外的对象，如果有任何人想为这个类创建一个应该引用的对象仅对第一个对象（而不是再创建一个对象）。如何做到这一点？请参考下面的代码？

> ```
> class MyClass:
>    def __init__(self):
>       pass
> obj1=MyClass()//create object
> obj2=MyClass()//avoid creation and refer obj2 to obj1
> obj3=MyClass()//avoid creation and refer obj3 to obj1 
> ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T09:03:30.643

所以你想要一些单身的东西？然后根本不要为此使用对象。只需将函数放在单独的模块（.py 文件）中，然后将变量放在模块范围内（例如全局变量） - 如果您不需要线程安全，这就是执行您想要的操作的 Python 方式。请记住：这不是 java 并且对所有事情都使用类不是要走的路。

但是，这里有一些代码只允许一个实例：

```
class MyClass:
    def __init__(self):
        if getattr(self.__class__, '_has_instance', False):
            raise RuntimeError('Cannot create another instance')
        self.__class__._has_instance = True 
```

如果您想要单例，请查看[Python 和单例模式](https://stackoverflow.com/questions/42558/python-and-the-singleton-pattern)以及[是否有一种简单、优雅的方式来定义单例？](https://stackoverflow.com/questions/31875/is-there-a-simple-elegant-way-to-define-singletons-in-python)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T10:46:10.160

这是一个简单的方法——隐藏类名：

```
class obj:
    pass

obj = obj() 
```

`class obj`正如评论中所指出的，这将使之后创建实例更加困难——但并非不可能。

另一种选择，在第一次使用后删除该类：

```
class MyClass:
    def method(self): print 'spam'

obj1 = MyClass()
del MyClass
obj1.method()  # show instance still exists
obj2 = MyClass() 
```

输出：

```
spam
Traceback (most recent call last):
  File "noclass.py", line 7, in <module>
    obj2 = MyClass()
NameError: name 'MyClass' is not defined 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T09:05:50.353

如果您编写的所有代码都放在一个文件中，或者您可以将它放在一个单独的模块中并导入它，您可以创建单个对象并使用它使其成为模块中的全局即顶级对象。

# java - 如何使用带有 groovy 闭包的构造函数参数实例化 Java 抽象类

> ID：10370953
> 
> 赞同：6
> 
> 时间：2012-04-29T09:02:06.590
> 
> 标签：java, groovy, abstract-class

我正在尝试从我的 Groovy 代码中实例化一个 Java 抽象类。考虑以下 Java 抽象类（从类中剥离非相关处理）：

```
public abstract class StackOverflow{
  public abstract String answerMe();
} 
```

我可以通过这种方式在 Groovy 中轻松实例化它，并且调用`answerMe()`将触发正确的输出：

```
StackOverflow stack = [answerMe : { "Answer" }] as StackOverflow 
```

现在，如果我修改`StackOverflow`类，在构造函数中添加一个 String 参数，如下所示：

```
public abstract class StackOverflowStr{
  public StackOverflowStr(String s){}
  public abstract String answerMe();
} 
```

我真的不知道如何实例化我的对象，我尝试了很多东西，但我似乎找不到正确的语法，有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:09:36.223

仅作记录，并明确措辞：在所有这些场景中，您都没有实例化抽象类。

抽象类是永远无法实例化的类。

您正在实例化一个扩展抽象类的具体匿名类。B-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T09:12:22.007

你可以用经典的 Java 风格实例化它：

```
StackOverflowStr stack = new StackOverflowStr("javaish"){
    String answerMe() {"answer"}
} 
```

# sorting - Powershell v2，从文件中获取特定行，排序

> ID：10370965
> 
> 赞同：2
> 
> 时间：2012-04-29T09:06:01.197
> 
> 标签：sorting, powershell

我有一个结构简单的文本文件，它实际上是一个 ftp 的内容：

```
1.0
1.0a
10.0
10.0b
11.0
11.0f
2.0
3.0
4.0
...(and so on)
random string
random string 
```

我正在使用 get-content 来获取文件的内容，但是我希望能够只检索包含最大数字和最大 1 数字的行。例如，在这种情况下，我希望它返回：

```
10.0
10.0b
11.0
11.0f 
```

我尝试使用 sort-object 但没有用。有没有办法以这种方式使用排序对象，所以它知道它是排序数字而不是字符串（这样它不会在 1 之后放置 10），然后根据句号之前的数字排序并忽略随机最后的字符串一起...

或者，如果您有其他建议的方法，请这样做...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:39:03.273

您可以将脚本块传递给某些 cmdlet，在这种情况下`Sort-Object`和`Group-Object`. 再澄清一点：

1.  加载数据

    ```
    Get-Content foo.txt | 
    ```

2.  按数字分组（忽略后缀，如果存在）：

    ```
     Group-Object { $_ -replace '\..*$' } | 
    ```

    这将首先删除字符串末尾的非数字，并使用字符串的其余部分（希望现在只包含一个浮点数）作为组名。

3.  按该组名称按数字排序。

    ```
     Sort-Object { [int] $_.Name } | 
    ```

    只需将组的名称转换为数字并按此排序即可完成，类似于我们根据原始行派生的内容进行分组的方式。

4.  然后我们可以得到最后*两组*，代表所有具有最大数量和第二大数量的行，然后展开这些组。该`-Last`参数是不言自明的，它`-ExpandProperty`选择属性的值，而不是使用过滤的属性列表构造新对象：

    ```
     Select-Object -Last 2 -ExpandProperty Group 
    ```

我们就在那里。您可以在各个阶段尝试此管道，以了解命令的用途：

```
PS Home:\> gc foo.txt
1.0
1.0a
10.0
10.0b
11.0
11.0f
2.0
3.0
4.0

PS Home:\> gc foo.txt | group {$_ -replace '\..*$'}

Count Name                      Group
----- ----                      -----
    2 1.0                       {1.0, 1.0a}
    2 10.0                      {10.0, 10.0b}
    2 11.0                      {11.0, 11.0f}
    1 2.0                       {2.0}
    1 3.0                       {3.0}
    1 4.0                       {4.0}

PS Home:\> gc foo.txt | group {$_ -replace '\..*$'} | sort {[int]$_.Name}

Count Name                      Group
----- ----                      -----
    2 1.0                       {1.0, 1.0a}
    1 2.0                       {2.0}
    1 3.0                       {3.0}
    1 4.0                       {4.0}
    2 10.0                      {10.0, 10.0b}
    2 11.0                      {11.0, 11.0f}

PS Home:\> gc foo.txt | group {$_ -replace '\..*$'} | sort {[int]$_.Name} | select -l 2 -exp group
10.0
10.0b
11.0
11.0f 
```

如果您需要按后缀排序的组中的项目（以及最后两组的最终结果），您可以`Sort-Object`直接在`Get-Content`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:08:13.433

您可以将表达式传递给`Sort-Object`，然后排序将使用该表达式对对象进行排序。这是通过传递带有键的哈希表`expression`（可以缩写为`e`）来完成的。要反转顺序，请添加带有 value的第二个键`descending`（或） 。`d``$true`

在你的情况下

```
...input... | Sort @{e={convert $_ as required}} 
```

可以提供多个属性名称和哈希表：因此`11.0f`可以拆分为数字和后缀。

如果排序表达式之间有很多重叠，您可以先将输入预处理到具有排序属性的对象中（然后再删除）：

```
...input... | %{ 
  if ($_ -match '^(\d+\.0)(.)?') {
    new-object PSObject -prop @{value=$_; a=[double]::Parse($matches[1]); b=$matches[2] }
  } else {
    new-object PSObject -prop @{value=$_; a=[double]::MinValue; b=$null }
  }
} | sort a,b | select -expand value 
```

# ruby - Ruby-Processing：未定义的方法错误

> ID：10370968
> 
> 赞同：1
> 
> 时间：2012-04-29T09:06:44.997
> 
> 标签：ruby, rubygems

我正在尝试运行一个 ruby​​ 处理文件

```
vishrut@vishrut-XPS-L501X:~/Twitter-Emotion-Graphs/samples/contributed$ rp5 run sand_traveler.rb 
undefined method `current' for Processing::App:Class
    ./sand_traveler.rb:63:in `initialize'
    ./sand_traveler.rb:43:in `reset_all'
    org/jruby/RubyFixnum.java:256:in `times'
    ./sand_traveler.rb:40:in `reset_all'
    ./sand_traveler.rb:22:in `setup'
    /var/lib/gems/1.8/gems/ruby-processing-1.0.11/lib/ruby-processing/app.rb:211:in `handleDraw' 
```

sand_traveler.rb 的上下文和代码：http: [//ashkenas.com/codework/ruby-processing.html](http://ashkenas.com/codework/ruby-processing.html)

我很确定所有必要的模块都已安装（java、ruby、ruby-processing）我能够使用 rp5 运行其他其他 ruby​​-processing .rb 文件。只有这个显示错误。

PS：文件位置重要吗？该文件在我的主文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T11:33:14.487

尝试替换第 63 行`sand_traveler.rb`：

```
@app = Processing::App.current 
```

和：

```
@app = $app 
```

我得到了和你一样的错误，这为我解决了。（`$app`是正在运行的草图的全局句柄，这也是`Processing::App.current`应该做的——参见v0.3 的[CHANGELOG](https://github.com/jashkenas/ruby-processing/blob/master/CHANGELOG)条目）。

至于为什么它不起作用——似乎这个方法已经从最新版本的`ruby-processing`. 例如，如果您查看[0.8 版](https://github.com/jashkenas/ruby-processing/tags)`Processing::App`，在第 40 行定义一个类方法`ruby-proccessing.rb`：

```
 def self.current; @current_app; end 
```

最新版本中缺少这种方法。

# iphone - UINavigationController 未按需要设置动画

> ID：10370977
> 
> 赞同：3
> 
> 时间：2012-04-29T09:07:52.133
> 
> 标签：iphone, objective-c, animation, uinavigationcontroller

好吧，我有一个基于标签的应用程序，每个标签都有一个 navigationController。当我在每个 navigationController 的根目录并推送视图时，动画运行完美，但是当我在推送视图上并且我想弹出它时，navigationController 会被动画化，但视图不会。这是我用来弹出它的：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

并推动它：

```
[self.navigationController pushViewController:activityController animated:YES]; 
```

有什么建议吗？

编辑：

我在根控制器中有一个 tableView。每次我选择一行时，我都会运行此代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ActivityViewController *activityController = [[ActivityViewController alloc] initWithNibName:@"ActivityViewController" bundle:nil];

    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [backButton setBackgroundImage:[UIImage imageNamed:@"BackButonItem"] forState:UIControlStateNormal];
    [backButton setBackgroundImage:[UIImage imageNamed:@"BackButonItem_Pressed"] forState:UIControlStateHighlighted];
    [backButton addTarget:self action:@selector(popBack) forControlEvents:UIControlEventTouchUpInside];
    [backButton setFrame:CGRectMake(15, 10, 55, 30)];
    UIBarButtonItem *backButtonItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];

    activityController.navigationItem.leftBarButtonItem = backButtonItem;
    activityController.navigationItem.hidesBackButton = YES;

    [self.navigationController pushViewController:activityController animated:YES];
} 
```

这是我的 popBack 方法：

```
- (void) popBack
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:04:43.233

你试过吗

```
[self.navigationController popToViewController:self animated:YES]; 
```

似乎解决了很多人的问题。

# sqlite - Flash CS5 中的 SQLite 数据库和 TLF 文本

> ID：10370979
> 
> 赞同：2
> 
> 时间：2012-04-29T09:08:00.487
> 
> 标签：sqlite, text, flash-cs5, tlf

在使用内置 sqlite 数据库并在 Flash CS5 中使用 TLF TextFields 时遇到以下问题

当我尝试单独使用 TLF TextFields 时，我没有遇到任何问题，但是当我开始使用数据库连接代码时，放置在舞台上的 TLF TextFields 没有显示，而是 SWF 文件显示了内置带有五个点循环的预加载器。

我尝试将 ActionScript 3 设置中的默认链接更改为合并模式，但在这种情况下，没有显示任何内容，没有显示文本字段，也没有显示预加载器。

我认为问题与加载 TLF 文本引擎有关，但我不知道该怎么做。

以下是我放在第一帧的代码：

===========================================

```
import flash.data.SQLConnection;
import flash.events.SQLErrorEvent;
import flash.events.SQLEvent;
import flash.filesystem.File;

var conn:SQLConnection = new SQLConnection();

conn.addEventListener(SQLEvent.OPEN, openHandler);
conn.addEventListener(SQLErrorEvent.ERROR, errorHandler);

// The database file is in the application directory
var folder:File = File.applicationDirectory;
var dbFile:File = folder.resolvePath("DBSample.db");

conn.openAsync(dbFile);

function openHandler(event:SQLEvent):void
{
    trace("the database was created successfully");
}

function errorHandler(event:SQLErrorEvent):void
{
    trace("Error message:", event.error.message);
    trace("Details:", event.error.details);
}

stop(); 
```

===========================================

我在舞台上使用一个 TLF TextField 供以后使用。

发布设置>>播放器：AIR 2.6

文件 textLayout_2.0.0.232.swz 存在于同一应用程序目录中。

不要忘记，当我使用控制面板测试文件时，在 Air Debug Launcher (Desktop) 中进行测试时，文件工作正常。

但是当我打开生成的 SWF 文件时，问题就出现了。

我已经审查了许多文章，但没有人解决这个问题。

我希望我能找到一些帮助谢谢。

# asp.net-mvc-4 - mvc4 webapi vs 控制器安全性（身份验证和授权）

> ID：10370986
> 
> 赞同：2
> 
> 时间：2012-04-29T09:09:45.580
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我对 asp.net mvc webapi 技术很陌生。

场景：我正在为企业设计一个 mvc Web 应用程序。我知道 MVC 控制器可以通过安全属性进行授权和身份验证。

该网络应用程序显示了家庭用水量的各种趋势。我们的愿景是让这些数据可以通过移动设备、平板电脑（你可以命名）访问。

我想知道 WebAPI 是否会比控制器更好，以便许多设备可以使用相同的 API。

问题：我对 webapi 的问题是安全性。在 Web 应用程序上，一旦用户登录控制器就知道用户的安全配置文件等。如果是设备，安全将如何工作？是否所有客户端都必须通过凭据，如果是在服务器上如何处理安全性？我们应该创建一个服务帐户并提供给每个客户吗？

谢谢，不知道我解释的好不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:27:23.463

MVC Security 是标准[ASP.Net Authentication/Authorization](http://msdn.microsoft.com/en-us/library/eeyk640h.aspx)的覆盖。[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)指示用户必须经过身份验证才能访问此资源。它查看IsAuthenticated 和 Roles的[User IPrincipal](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)

因此，这将成为一个 ASP.NET 身份验证解决方案。

用户身份验证 - 直接使用第一篇文章中提到的任何方法。

设备身份验证 - 对此没有通用答案，也没有真正安全的设备身份验证方式。您可以通过在 URL 或 HTTP 标头中传递唯一数据（设备序列号）来识别设备。

# java - 运行 JAR 时如何配置日志记录？

> ID：10370989
> 
> 赞同：11
> 
> 时间：2012-04-29T09:11:29.720
> 
> 标签：java, logging, jar

我是 Java logging API 的新手，需要一些帮助来解决这个问题：在创建应用程序时，我的配置文件存储在项目根文件夹中，所以我使用`-Djava.util.logging.config.file=logging.properties`switch 来运行程序。但后来我导出了可执行的 JAR。现在如何配置日志记录？当我使用 -D 开关指定配置文件的路径时，它不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T09:16:00.690

**您不能在 MANIFEST.MF**文件中指定 JVM 参数，因此您必须在命令行或使用快捷方式指定日志记录属性：

```
java -Djava.util.logging.config.file=logging.properties -jar yourjar.jar 
```

否则，您可以在 JAR 中打包一个属性文件（在您的情况下为 logging.properties），在启动时读取该文件并将这些设置放入系统属性中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T09:21:31.810

[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/logging/LogManager.html)说：

> 此外，LogManager 使用两个可选的系统属性，可以更好地控制读取初始配置：
> 
> ```
> "java.util.logging.config.class"
> "java.util.logging.config.file" 
> ```
> 
> 这两个属性可以通过 Preferences API 设置，或者作为“java”命令的命令行属性定义，或者作为传递给 JNI_CreateJavaVM 的系统属性定义。
> 
> 如果设置了“java.util.logging.config.class”属性，则属性值被视为类名。将加载给定的类，实例化一个对象，并且该对象的构造函数负责读取初始配置。（该对象可以使用其他系统属性来控制其配置。）备用配置类可以使用 readConfiguration(InputStream) 来定义 LogManager 中的属性。

因此，要么使用`java.util.logging.config.file`系统属性，并将配置文件存储在 jar 文件之外（如果您希望能够自定义日志记录属性以调试或分析一些奇怪的行为，这可能是一个好主意），或者存储config 文件在任何你想要的地方（例如在 jar 文件中），并使用`java.util.logging.config.class`系统属性加载和实例化一个类，该类将读取 jar 文件中的文件（使用`Class.getResourceAsStream()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-14T14:06:13.663

我知道现在回答这个问题有点晚了，但几天前我用可运行的 jar 遇到了这个问题，我这样解决了：

`java -Djava.util.logging.config.file=logging.properties -cp test.jar com.sample.test.Main`

其中 test.jar 是您的 jar 的名称，而 com.sample.test.Main 是您的主类的完全限定名称。

# android - 布局代码中的错误是什么

> ID：10370996
> 
> 赞同：-1
> 
> 时间：2012-04-29T09:12:53.427
> 
> 标签：android, layout, user-interface

这段代码有什么错误，请让我知道这种方法是否正确。

当我加载列表项时，列表会扩展到搜索栏，而不是整个屏幕。请给我建议。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent"
    android:background="#000044">

        <TableRow>
             <EditText 
                 android:id="@+id/txtUserName" 
                 android:width="270dp" />

             <Button
                 android:id="@+id/Search_button"
                 android:width="50dp" /> 
                 />
        </TableRow>

        <TableRow>
            <ListView
                android:id="@+id/Service_name_list"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"/>
        </TableRow>

    </TableLayout> 
```

还告诉我，这是否适用于所有屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:33:11.080

更改第二行如下：

```
 <TableRow android:layout_span="2">
        <ListView
        android:id="@+id/Service_name_list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
    </TableRow> 
```

唯一改变的是 android:layout_span="2" 等于 HTML colspan。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:28:43.540

添加一个 layout_span 以强制一个单元格跨越两个单元格。

```
<ListView
    android:id="@+id/Service_name_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_span="2"/> 
```

# eclipse - 如何在 Eclipse 中将文件链接到包资源管理器？

> ID：10370999
> 
> 赞同：1
> 
> 时间：2012-04-29T09:13:32.037
> 
> 标签：eclipse

我知道有一种方法可以告诉 Eclipse 中的编辑器窗口链接到相应的文件。假设当您在编辑器中处理文件时，它将位于 Package Explorer 中相应的项目中。

它不应该超过启用一个选项，但我无法找出它在哪里。如果您在多个项目中有同名的文件，这是一件非常方便的事情，可以避免混淆哪个文件属于哪个项目。

谁能告诉我该选项的位置以及如何再次启用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T13:41:13.140

包资源管理器有一个名为“与编辑器链接”的图标。您可以通过这种方式在包资源管理器视图中找到当前正在编辑的文件。

![在此处输入图像描述](../Images/35a3d1dcfff1195be72c692523e175f9.png)

或者，当您编辑时，您可以按`Alt`+ `Shift`+`W`并选择 Package Explorer 以在 Package Explorer 中找到您的文件。