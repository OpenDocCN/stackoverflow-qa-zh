# StackOverflow 问答 11881000-11881999

# mysql - LEFT JOIN 在子查询中没有按预期工作

> ID：11881001
> 
> 赞同：2
> 
> 时间：2012-08-09T10:05:08.410
> 
> 标签：mysql, sql, subquery, left-join

我有下面的 SQL 查询：

```
SELECT message, sent_date, user_id
FROM messages
LEFT JOIN numbers ON messages.from_id = numbers.id 
```

它返回表中的所有行（大约 4000 行）以及来自`messages`表的附加列`numbers`。到目前为止，这是我所期望的。

现在我将这个子查询左连接到另一个表，再次使用左连接：

```
SELECT message, sent_date
FROM (
    SELECT message, sent_date, user_id
    FROM messages
    LEFT JOIN numbers ON messages.from_id = numbers.id
) AS table1
LEFT JOIN users ON table1.user_id = users.id 
```

但是，它只返回大约 200 行，所以很多都丢失了。由于这是一个左连接，我希望 table1 中的所有行都在结果中。任何人都可以看到问题是什么？

**编辑：**

因此，这里的信息是 3 个相关表（删除了不相关的列）：

```
CREATE TABLE IF NOT EXISTS `messages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `message` text CHARACTER SET utf8 NOT NULL,
  `from_id` int(11) DEFAULT NULL,
  `sent_date` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `from_id` (`from_id`),
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=101553 ;

CREATE TABLE IF NOT EXISTS `numbers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `number` varchar(32) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6408 ;

CREATE TABLE IF NOT EXISTS `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(256) CHARACTER SET utf8 DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2395 ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:12:43.823

您可以尝试其他方法来调试问题：

```
CREATE TEMPORARY table tmp1 AS SELECT message, sent_date, user_id
                               FROM messages
                                    LEFT JOIN numbers 
                                        ON messages. from_id = numbers.id; 
```

然后看看这个查询是否有效。

```
 SELECT message, sent_date
 FROM tmp1 table1
      LEFT JOIN users 
          ON table1.user_id = users.id; 
```

同样对于您的情况，请确保两者之间没有其他插入或更新。否则使用事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:07:00.643

~~table1 有时没有用户 ID - 所以它会为空，所以这些结果会丢失吗？~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:15:39.750

试试这个，我认为这是`user_id`.

```
SELECT table1.message, table1.sent_date 
FROM ( 
    SELECT messages.message, messages.sent_date, numbers.user_id 
    FROM messages 
    LEFT JOIN numbers ON messages.from_id = numbers.id 
) AS table1 
LEFT JOIN users ON table1.user_id = users.id 
```

我不确定`user_id`是 in`messages`还是`numbers`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:29:04.883

我对你的问题没有确切的答案，但是如果我必须开始思考，我会首先找出缺少的 3800 行并尝试查看模式（是因为 user_id 为空还是重复）

```
SELECT message, sent_date, user_id
FROM messages
LEFT JOIN numbers ON messages.from_id = numbers.id
MINUS
(SELECT table1.message, table1.sent_date, table1.user_id
FROM (
    SELECT message, sent_date, user_id
    FROM messages
    LEFT JOIN numbers ON messages.from_id = numbers.id
) AS table1
LEFT JOIN users ON table1.user_id = users.id) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T11:28:23.320

这不可能发生。

试试这个变化：

```
SELECT 
    m.message, m.sent_date, n.user_id
FROM
    messages m
  LEFT JOIN 
    numbers AS n  ON m.from_id = n.id
  LEFT JOIN 
    users AS u  ON n.user_id = u.id ; 
```

# jquery - 将 jquery 应用于以无限滚动调用的元素

> ID：11881004
> 
> 赞同：0
> 
> 时间：2012-08-09T10:05:14.780
> 
> 标签：jquery, ajax, infinite-scroll

我有一个帖子循环，我使用 jquery 悬停功能来扩展元素。我的问题是它仅适用于最初在页面加载时显示的元素，并且对于附加无限滚动的任何内容都失败。

这是我用来展开框的脚本

```
$(document).ready(function() {
  $('.box').hover( function() {
       var height = $(this).children('.box-info').height();
       var newHeight = (height + 12);
       $(this).children('.box-image').css('top', -newHeight);
   }, function() {
       $(this).children('.box-image').css('top', 0);
  });
}); 
```

然后我有一个循环，然后是一个脚本来激活无限滚动

```
var href = 'first';
$(document).ready(function() {
 $('#boxes').infinitescroll({
    navSelector: '.infinitescroll',
    nextSelector: '.infinitescroll a',
    itemSelector: '#boxes .box',
    loadingImg: '<?php echo get_bloginfo('stylesheet_directory') ?>/images/loading.gif',
    loadingText: 'Loading...',
    donetext: 'No more pages to load.',
    debug: false
}, function(arrayOfNewElems) {
    $('#boxes').masonry('appended', $(arrayOfNewElems));
    if(href != $('.infinitescroll a').attr('href')) {
        href = $('.infinitescroll a').attr('href');
    }
 });
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:17:48.280

根据您提供的小提琴：

**HOVER**不适用于绝对定位的元素和动画

您可以使用“mouseenter”和“mouseleave”事件代替悬停，当子元素妨碍时不会触发：

根据聊天，请参阅此更新链接 [http://jsfiddle.net/Gm7Xb/11/](http://jsfiddle.net/Gm7Xb/11/)

# mysql - 在 sqlog 中创建表失败

> ID：11881007
> 
> 赞同：0
> 
> 时间：2012-08-09T10:05:18.573
> 
> 标签：mysql, sql, sqlyog

```
CREATE TABLE inventory
(
   id INT IDENTITY(1,1) PRIMARY KEY,
   product VARCHAR(50) UNIQUE,
   quantity INT,
   price DECIMAL(18,2)
); 
```

错误是

```
Error Code : 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IDENTITY(1,1) PRIMARY KEY,
   product VARCHAR(50) UNIQUE,
   quantity INT,
   pr' at line 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:13:52.603

```
CREATE TABLE inventory
(
   id INT PRIMARY KEY,
   product VARCHAR(50) UNIQUE,
   quantity INT,
   price DECIMAL(18,2)
); 
```

这行得通。我删除了`IDENTITY`. [我在 MySQL 的创建表文档中没有看到`IDENTITY`。](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)

* * *

**EDIT1**（从 T-SQL 导出了 OP 的错误语法）

啊，我明白了...您是从 T-SQL 获取 SQL 吗？也许你需要自动增量使用这个

```
CREATE TABLE inventory
(
   id INT AUTO_INCREMENT PRIMARY KEY,
   product VARCHAR(50) UNIQUE,
   quantity INT,
   price DECIMAL(18,2)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:19:36.453

我想你想用[`AUTO_INCREMENT`](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html). 尝试这个：

```
CREATE TABLE inventory
(
   id INT AUTO_INCREMENT PRIMARY KEY,
   product VARCHAR(50) UNIQUE,
   quantity INT,
   price DECIMAL(18,2)
); 
```

# excel - 如何判断一个单元格是否是#NAME？

> ID：11881008
> 
> 赞同：0
> 
> 时间：2012-08-09T10:05:27.413
> 
> 标签：excel, vba

我试图在执行 vba 脚本时避免错误，因此在对单元格进行操作之前检查单元格的内容。

```
If ((Cells(i, 18).Value > 0) And (Trim(Cells(i, 3).Value) <> "") And (Trim(Cells(i, 4).Value) <> "")) And (Trim(Cells(i, 10).Value) <> "") _
         Then ' Do something 
```

它适用于空单元格，但不适用于包含“#NAME？”的单元格。

我该如何验证呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:14:17.850

看一下`ERROR.TYPE()`工作表功能。这将返回 5 是错误是`#NAME`.

如果 B1 包含您的`#NAME`错误，则以下内容将返回 5：

```
=ERROR.TYPE(TEXT(B1,"")) 
```

# macos - 如何以编程方式在 OS X 中搜索 unix 可执行文件？

> ID：11881009
> 
> 赞同：1
> 
> 时间：2012-08-09T10:05:29.237
> 
> 标签：macos, cocoa

所以，我需要`Unix Executable files`在目录中搜索。我遍历目录并使用我正在搜索的文件的路径。我尝试的一些方法。

**1.借助文件扩展名**

`Unix Executable file`没有文件扩展名，但有些文档文件也没有扩展名。所以，它对我来说失败了。

**2\. 借助 NSFileManager**

```
NSDicitionary *fileAttributes = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil]; 
```

它没有任何独特的属性来查找 Unix 可执行文件。

**3\. 借助 MDItemRef**

它有一个被调用的属性，`kMDItemContentType`但它给出了一些`unix executable files`唯一的正确结果。

```
MDItemRef        inspectedRef;
CFArrayRef       inspectedRefAttributeNames;
CFDictionaryRef  inspectedRefAttributeValues;
inspectedRef = MDItemCreate(kCFAllocatorDefault,(CFStringRef)filePath);
if(inspectedRef) {
    inspectedRefAttributeNames = MDItemCopyAttributeNames(inspectedRef);
    inspectedRefAttributeValues = MDItemCopyAttributes(inspectedRef,inspectedRefAttributeNames);
    NSDictionary *attribDict = (__bridge NSDictionary*)inspectedRefAttributeValues;
    if([[attribDict objectForKey:@"kMDItemContentType"] isEqualToString:@"public.unix-executable"]) 
        NSLog(@"Unix Executable file");
} 
```

**4.借助unix命令“文件”**

```
NSTask *unixTask = [[NSTask alloc] init];
[unixTask setStandardOutput:newPipe];
[unixTask setLaunchPath:@"/usr/bin/file"];
[unixTask setArguments:[NSArray arrayWithObject:filePath]]; 
[unixTask launch];
[unixTask waitUntilExit];
[unixTask terminationStatus];

while ((inData = [readHandle availableData]) && [inData length]) {
    returnValue= [[NSString alloc] initWithData:inData encoding:[NSString defaultCStringEncoding]];
    returnValue = [returnValue substringToIndex:[returnValue length]-1];
    NSLog(@"%@",returnValue);
} 
```

在这里，`returnValue`我可以找到它是否是 unix 可执行文件。但这是非常缓慢的过程。所以，我的问题是如何以有效的方式搜索 unix 可执行文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:22:11.617

尝试使用 NSURL 的 getResourceValue:forKey:error: 或 resourceValuesForKeys:error: 方法并请求 NSURLTypeIdentifierKey。

附录：

如果@Aravindhanarvi 所说的是正确的，那么在 10.6 上存在错误并且上述解决方案是不可靠的。更糟糕的是，由于缺少 NSURLIsExecutableKey，@petur 解决方案也是不可能的。

另一种方法是回退到 NSFileManager 并使用 isExecutableFileAtPath: 和 attributesOfItemAtPath:error: 等方法（特别是 NSFilePosixPermissions 和 NSFileType 属性）来实现@petur 建议的相同逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T00:16:44.423

想出了这个，只需将 url 指向您用作基础的目录。这是 ARC 代码。

数组 files 包含一个指向找到的每个可执行文件的 url 指针。

```
@autoreleasepool {

    NSFileManager *defaultFileManager = [NSFileManager defaultManager];
    NSURL *url = [NSURL URLWithString:@"/private/tmp/"]; // Search path
    NSDirectoryEnumerator *dirEnumerator = [defaultFileManager enumeratorAtURL:url includingPropertiesForKeys:[NSArray arrayWithObjects:NSURLNameKey, nil] options:0 errorHandler:nil];

    NSMutableArray *files = [NSMutableArray array];

    // extract non-executable files
    for (NSURL *file in dirEnumerator) {
        NSNumber *isExecutable;
        NSNumber *isDirectory; // Directories have the executable flag set, but we are not interested in them
        NSError *error, *error2;
        [file getResourceValue:&isExecutable forKey:NSURLIsExecutableKey error:&error];
        [file getResourceValue:&isDirectory forKey:NSURLIsDirectoryKey error:&error2];

        // Deal with errors
        if (error)
            NSLog(@"%@", [error localizedDescription]);
        else if (error2)
            NSLog(@"%@", [error2 localizedDescription]);
        else if ([isExecutable boolValue] && ![isDirectory boolValue]) {
            [files addObject:file];
        }

    // print out all executable files to the console
    for (id i in files)
        NSLog(@"%@", [i description]);

} 
```

# sql - 如何在 Oracle 中使用 trunc 将浮点数格式化为小数点后 1 位？

> ID：11881010
> 
> 赞同：1
> 
> 时间：2012-08-09T10:05:30.647
> 
> 标签：sql, oracle

这是我的查询。我得到的结果是`19`

```
SQL> SELECT TRUNC(19.00,1) FROM DUAL;

TRUNC(19.00,1)

        19 
```

相反，我需要结果`19.0`，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:48:37.947

As you appear to be using SQL*Plus you can format the column output directly:

```
SQL> COLUMN target FORMAT 09.9
SQL> SELECT TRUNC(19.00, 1) AS target FROM dual;

TARGET
------
  19.0 
```

Voila...

Otherwise you would need to either set your IDE to dispaly numerics with a trailing decimal place or display it as a VARCHAR2:

```
SELECT TO_CHAR(TRUNC(19.00, 1), '09.9')
  FROM dual; 
```

Hope it helps...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:06:25.677

```
select to_char(19, '09.9') from dual; 
```

请参阅[数字格式模型](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#i34570)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:30:00.713

我想这也应该工作

```
SELECT TO_CHAR(TRUNC(19.00, 1),'00.9')   FROM dual; 
```

# sitecore - 如何在 Sitecore DMS 中触发配置文件？

> ID：11881011
> 
> 赞同：3
> 
> 时间：2012-08-09T10:05:40.197
> 
> 标签：sitecore, sitecore-dms

我正在寻找一种方法来允许访问者选择他们想要在网站上显示的内容。

有没有办法以编程方式触发 Sitecore DMS 中的配置文件？

我查看了 SDN 上的相关文档（[http://sdn.sitecore.net/Reference/Sitecore 6/DMS Documentation.aspx](http://sdn.sitecore.net/Reference/Sitecore%206/DMS%20Documentation.aspx)），但到目前为止还没有找到方法。

**编辑：**在 Sitecore 支持门户上提出这个问题 - 一旦我发现更多信息，就会发布答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:06:05.017

我在我的项目上做了类似的事情。查看此代码示例，如果您有任何问题，请告诉我。此外，请确保您也将配置文件添加到内容项。对一组项目调用 FilterItemByBehavior，它将根据用户过去的浏览行为过滤它们。

```
 private static Dictionary<string, List<string>> AnalyticsFilter()
    {
        Dictionary<string, List<string>> filter = new Dictionary<string, List<string>>();

        if (Tracker.CurrentVisit.Profiles.Count() > 0)
        {
            foreach (VisitorDataSet.ProfilesRow row in Tracker.CurrentVisit.Profiles)
            {
                List<string> keys = new List<string>();
                foreach (var key in row.Values)
                {
                    if (key.Value >= ResourceHelper.GetInt(new ID(Resources.Settings.AnalyticsProfileSetMinValGuid)))
                        keys.Add(key.Key);
                }
                filter.Add(row.ProfileName, keys);
            }
        }
        if(ResourceHelper.IsTurnedOn(new ID(Resources.Settings.AnalyticsUserProfileEnableSwitch)))
            filter = ApplyUserProfile(filter);
        return filter;
    }

    public static List<Item> FilterItemByBehavior(List<Item> items, int count)
    {
        try
        {
            var filter = AnalyticsFilter();
            foreach (var profile in filter)
            {
                int counter = ResourceHelper.GetInt(new ID(Resources.Settings.AnalyticsProfileTagsFilterMaxGuid));
                if (items.Count <= count) break;
                foreach (string key in profile.Value)
                {
                    if (items.Count <= count || counter == 0) break;
                    items = items.Where(i => (((MultilistField)i.Fields[profile.Key]).GetItems().ToList().Select(x => x.Name).Contains(key))).ToList();
                    counter--;
                }
            }
            return items.Count <= count ? items : items.Take(count).ToList();
        }
        catch (System.Exception ex)
        {
            Sitecore.Diagnostics.Log.Error(ex.Message, ex, new AnalyticsHelper());
            return items.Count <= count ? items : items.Take(count).ToList();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T10:27:16.683

我已收到 Sitecore 支持人员对此问题的回复。这里是：

*“如果您使用模式卡进行个性化，那么您可以使用以下代码作为下拉列表的“项目选择”事件的事件处理程序：”*

```
var profile = Sitecore.Analytics.Tracker.CurrentVisit.GetOrCreateProfile("<Profile Name>");
profile.BeginEdit();
profile.Score("<profile key>",<profile key value you want to set>);
profile.Score("<profile key>",<profile key value you want to set>);
profile.UpdatePattern(); //sets the appropriate pattern based on the current profile keys values you have just set.
profile.EndEdit(); 
```

这会干扰自动配置文件匹配，所以我不确定我是否要使用这种方法。

# iphone - 照片应用程序使用什么手势识别器

> ID：11881013
> 
> 赞同：0
> 
> 时间：2012-08-09T10:05:42.700
> 
> 标签：iphone, objective-c, ios, cocoa-touch

如果我想让用户在 2 个 UIView 之间滑动，就像他们在照片应用中的照片之间滑动一样，我应该使用什么手势识别器？没有缩放只是两张照片之间的过渡。

我应该使用滑动手势还是平移手势？

我也将它与 UIPageControl 一起使用，这样当他们滑动页面时，页面就会发生变化并且新视图是可见的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:12:06.780

答案是您不使用手势识别器，而是必须在滚动视图委托方法中实现自己的拖动方法。看看他们为此编写的 Apple 代码；[http://developer.apple.com/library/ios/samplecode/PageControl/PageControl.zip](http://developer.apple.com/library/ios/samplecode/PageControl/PageControl.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:14:43.570

我认为使用滑动手势识别器会更好。我使用了与 UIPagecontrol 相同的方式，并且它工作顺利。

# javascript - 父访问子 javascript 数据

> ID：11881018
> 
> 赞同：0
> 
> 时间：2012-08-09T10:05:55.073
> 
> 标签：javascript, iframe, parent-child, flags

客户的页面带有导航，可检测何时在数据网格中进行了更改，并提醒用户在离开页面之前保存他们的数据。如果用户对他们正在做什么感到困惑或怀疑他们犯了很多数据输入错误，他们也可能只是取消他们的更改并重新开始。

客户有一个登录系统，他们通过 iframe 在其中放置这些页面。登录系统将有一个新的子菜单来导航这些页面（将它们调用到 iframe 中），取代子页面本身的页面导航。

这些页面上的网格设置了一个标志，以指示至少一个网格单元中的数据已更改。页面导航可以轻松检查标志并提醒用户他们在其中一个网格中有未保存的数据。

父页面的菜单如何检查这些标志是否由子页面上的网格设置？标志当前在一个数组中，以网格的编号作为索引。

大多数单元格都这样做，或调用另一个调用此函数的函数

```
--------------------------------------------------------
. . . onchange='make_input_changed(grid_NM)' . . .

-------------------------------------------------------

// up to 6 grids on page in this example.
var input_changed = new Array('false', 'false', 'false', 'false', 'false', 'false');

// for each grid, set a flag indicating that data on the current grid page has changed
function make_input_changed(grid_NM) { input_changed[grid_NM] = true; } 

----------------------------------------------------- 
```

**父母可以访问子标志吗？**

**孩子可以调用父函数来跟踪变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:18:14.787

框架只是一个“特殊”窗口。

您可以使用`window.top`或`window.parent`在窗口和框架的层次结构中导航。只要你的框架在同一个域中，你应该没问题。

您可以在另一个框架中访问变量：

```
parent.Frame2.varInFrame2 = 100; 
```

...您可以在另一个框架中调用函数：

```
parent.Frame2.notifyLogin(id) 
```

# knockout.js - Knockoutjs 递归解包 ko.observableArray

> ID：11881025
> 
> 赞同：6
> 
> 时间：2012-08-09T10:06:13.750
> 
> 标签：knockout.js

我有这种格式的javascript数组：

```
omega.franchiseInfo.rawdata = [{
                Id: "Main",
                Title: "Main",
                Type: "main",
                items: [{
                    Id: "Menu1",
                    Title: "Menu1",
                    Type: "menu",
                    items: [{
                        Id: "Menu1",
                        Title: "Menu1",
                        Type: "menu",
                        items: []
                    }]
                }]
            }]; 
```

每个项目都有一个属性 items，它是一个包含其他项目的数组。未指定数组的元素数。

我正在使用数组上的敲除映射插件使其成为 observableArray。并且数组的所有成员也都变成了 observables。

```
omega.franchiseInfo.observableRawData = ko.mapping.fromJS(language.rawdata); 
```

然后我想要完成的是将其解包为`omega.franchiseInfo.observableRawData`原始的纯 javascript 格式。这意味着等于`omega.franchiseInfo.rawdata`。我知道在淘汰赛中有一些方法，`ko.utils.unwrapObservable`但 javascript 不是我的强项，我无法让它适用于我的情况。另外我认为完成这项工作的函数应该是递归的，以遍历数组中的所有项目。

这是我的小提琴：

[http://jsfiddle.net/KHFn8/931/](http://jsfiddle.net/KHFn8/931/)

如果有人可以帮助我并提供工作代码，我将非常高兴。感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T10:45:27.457

[提琴手](http://jsfiddle.net/gurkavcu/P7KUC/)

您可以像这样将其转换回 JavaScript 对象：

```
ko.toJS(omega.franchiseInfo.observableRawData); 
```

# google-chrome-devtools - 单个文件的 chrome 缓存删除

> ID：11881027
> 
> 赞同：28
> 
> 时间：2012-08-09T10:06:25.587
> 
> 标签：google-chrome-devtools

最近我不得不删除我的整个缓存才能查看我正在处理的网页。我猜这很好，但可以通过从缓存中删除特定页面来改进它。chrome.browsingData.remove，似乎没有指示要删除的单个页面的选项。我想知道这是否可以在外部完成，但我不熟悉铬代码。我还想知道 chrome.browsingData.remove 实现是否有任何计划更改。非常感谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-01-25T18:01:43.083

要删除单个文件缓存，请将其 URL 输入浏览器并进行硬刷新。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-09T10:13:11.373

如果您正在处理网页并希望避免缓存（顺便说一句，推荐！:) 您现在可以在 Chrome DevTools 中完成。转到设置（右下角的图标）并单击它。然后，您将有一个选项“禁用缓存” - 标记它并完成。

完成工作后不要忘记返回此状态，因为 chrome 的缓存模式会更快。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-13T11:12:30.703

在 Chrome DevTools 中，您应该单击 Dev Tools 设置，然后选择 **"Disable cache (while DevTools is open)"**。这是页面上的第一个选项。

请注意，这些设置不是主要设置，而是特定于开发工具的。

您可以通过在要调试的网页上按**F12或按****Ctrl-Shift-I**来访问 DevTools 。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-01T20:13:04.013

**2022 年 2 月 10 日编辑：**访问远程开发工具文档以获取一整套可用于在开发时覆盖缓存文件的工具： [https ://developer.chrome.com/docs/devtools/storage/cache/](https://developer.chrome.com/docs/devtools/storage/cache/)

如果您尝试清除 HTTP 缓存数据，这是帖子中的原始问题，那么网络日志是可能的。指南在这里： [https ://developer.chrome.com/docs/devtools/network/#load](https://developer.chrome.com/docs/devtools/network/#load)

首先找到该文件，然后通过右键单击释放其 cacged 内容： [https ://developer.chrome.com/docs/devtools/network/reference/#clear-cache](https://developer.chrome.com/docs/devtools/network/reference/#clear-cache)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-26T14:42:15.103

如果您正在动态构建页面，那么在开发过程中，您可以在用于加载脚本的 URL 的末尾放置一个随机字符串。

```
<script src="path/to/script.js?_=<%=Math.random()%>"></script> 
```

这将导致该文件的缓存未命中，但会将缓存用于其他所有内容（取决于缓存控制标头等）。只需记住在推送到 prod 之前删除参数！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-12T05:57:07.103

# 更新 ：`2019, April 20`

最近，我正在与`Chrome browser's inbuilt feature - Overrides`. 有了这个功能，我们可以直接在控制台中编写代码`HTML, CSS, JS, etc`并在网页上查看。

[这是一个可能有用的教程](https://umaar.com/dev-tips/162-network-overrides/)

* * *

# 上一个答案：

## 我正在使用[Google Chrome 扩展程序`Resource Override`](https://chrome.google.com/webstore/detail/resource-override/pkoacgokdfckfpndoffpifphamojphii)。

安装此扩展后，我将覆盖我想要的资源，`server`而不是`cache`：

### 第 2 步：覆盖您想要从服务器更新的资源：

[![在此处输入图像描述](../Images/e5e21c877ba2b8f401700937927a6659.png)](https://i.stack.imgur.com/YyRwM.png)

### ⭐<code>重要提示 - 从而`developer-console`不是访问插件`browser`

### ⭐⭐ 我从这种方法开始，但已经转向 Lukas Greblikas 在[上面的答案](https://stackoverflow.com/a/48449218/4742733)中建议的方法。

祝你好运...

# javascript - Highcharts图表值的数字格式？

> ID：11881032
> 
> 赞同：13
> 
> 时间：2012-08-09T10:06:42.310
> 
> 标签：javascript, highcharts

我将该值赋予 Highcharts 饼图：

```
 series:[
        {
            type:'pie',
            name:'Ratio',
            data:[
                ['A', 42.6],
                {
                    name:'B',
                    y:14.2,
                    sliced:true,
                    selected:true
                }
            ]
        }
    ] 
```

但是它在饼图中显示如下：

```
A -> 75.00000000000001 %
B-> 25 % 
```

您可以在 Highcharts 格式化工具提示，图表值怎么样？

![在此处输入图像描述](../Images/7ff49413c28af0498c758726c96883ee.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-09T10:19:28.737

`plotOptions.pie.dataLabels.formatter`是一个可以让您格式化标签的函数。在这种情况下，我返回`this.percentage.toFixed(2)`了它会将您的数字修剪到小数点后 2 位。在[这个 jsFiddle演示](http://jsfiddle.net/HEyCX/22/)

```
plotOptions: {
    pie: {
        dataLabels: {
            formatter: function() {
                return '<b>' + this.point.name + '</b>: ' + this.percentage.toFixed(2) + ' %';
            }
        }
    }
}, 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-09T10:29:22.450

我们确实有工具提示格式化程序选项来将值显示为数字而不是百分比

[http://api.highcharts.com/highstock#tooltip.formatter](http://api.highcharts.com/highstock#tooltip.formatter)

```
tooltip: {
   formatter: function() {
      return '<b>'+ this.point.name +'</b>: '+ this.point.y ;
   }
}, 
```

this.point.y 可以解决问题（现在你在那个地方有了 this.percentage）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-05-24T02:53:57.160

您可以像下面这样格式化它。

```
 tooltip: {
    pointFormat: "Value: {point.y:.2f}"
} 
```

[关于 Highcharts 格式的文档](http://docs.highcharts.com/#formatting)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-20T03:52:36.223

```
tooltip: {
   pointFormat: "Value: {point.y:.2f}"
} 
```

这不是用于格式化值。

```
var data = [{
     name: 'Population',
     data: [],
     dataLabels: {
         enabled: true,
         rotation: -90,
         color: '#FFFFFF',
         align: 'right',
         x: 4,
         y: 10,
         style: {
             fontSize: '13px',
             fontFamily: 'Verdana, sans-serif',
             textShadow: '0 0 3px black'
         }, formatter: function() {
             return  Highcharts.numberFormat(this.y, 2, '.');
         }
     }
}]; 
```

值的格式可以在数据中的 dataLables 中更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-26T11:58:32.707

```
 tooltip: {
    pointFormat: "Percentage: {point.percentage:.2f}"
} 
```

这将为您提供百分比值

# ios - 如何在 iPad 中设置打开存储在 iBooks 中的 pdf 文件的路径

> ID：11881039
> 
> 赞同：0
> 
> 时间：2012-08-09T10:07:17.693
> 
> 标签：ios, xcode, ipad

我编写代码来打开位于的 pdf 文件

```
 NSArray  *paths =    NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
        NSString *documentsDir = [paths objectAtIndex:0];
        NSString *pdfFilePath =[documentsDir  stringByAppendingPathComponent:@"421_core_animation_essentials.pdf"];
        fileURL = [NSURL URLWithString:pdfFilePath];
        QLPreviewController *previewController = [[QLPreviewController alloc] init];
        previewController.dataSource = self;
        [[self navigationController] pushViewController:previewController animated:YES];
        [previewController.navigationItem setRightBarButtonItem:nil];
        [previewController release]; 
```

它在模拟器中测试时工作，但在 iPad 设备中测试时它不起作用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:38:44.070

iOS 设备文件系统区分大小写，而模拟器则不区分大小写。

因此检查文件名是否区分大小写：

```
NSString *pdfFilePath =[documentsDir  stringByAppendingPathComponent:@"421_core_animation_essentials.pdf"]; 
```

# iphone - UIViewController 里面的 UITableViewController

> ID：11881041
> 
> 赞同：1
> 
> 时间：2012-08-09T10:07:19.690
> 
> 标签：iphone, uiviewcontroller, uitableview, iboutlet

我正在做一个 Iphone 项目。在情节提要中，我`myViewController`包含了几个`UILabel`s 和一个`UITableView`. `UITableView`IBOutlet 在 myViewController 类中引用了上述内容：

```
IBOutlet UITableView *myTable; 
```

现在我构建了一个我想要填充 myTable 的 UITableViewController (myTableViewController)。然后我回到 myViewController 并在这里分配 myTableViewController ：

```
MyTableViewController *myTableViewController = [[MyTableViewController alloc] init];
myTableViewController.tableView = myTable;
myTableViewController.tableView.delegate = myTableViewController;
myTableViewController.tableView.dataSource = myTableViewController; 
```

它不工作（EXC_BAD_ACCESS 错误）。通常我应该通过 UIViewController 填充 myTable （确保它符合需要的协议）。但我真的想知道我是否可以做我上面所做的事情..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T17:25:20.350

大多数情况下，您可以通过创建 UIViewController 和使用 IBOutlet 对 ViewController 内的表的引用来解决此问题。但是，在某些情况下，您需要一个完整的 UITableViewController，例如在核心数据中，并且您还希望能够添加诸如 UIToolbars 之类的东西。我知道，很多时候你可以破解 UINavigationController，但有时你不想要层次结构/堆栈。在这种情况下，诚然相当罕见，一种方法是创建一个 UITableViewController 子类。您可以在 UIViewController 类中导入并初始化它，从位于 UIViewController 的 nib/scene 内的 tableView 创建一个 outlet，然后将 UITableViewController 的 tableView 属性分配给 UIViewController 的 tableView outlet。

```
self.instanceOfUITableVC.table = self.tableView 
```

这有点复杂，但它有效。现在您可以使用 UITableViewController 子类实例来控制 tableView。

# javascript - 来自远程 url 的 javascript 显示表单

> ID：11881042
> 
> 赞同：0
> 
> 时间：2012-08-09T10:07:24.870
> 
> 标签：javascript

我的网址中有动态表单。我想编写一个javascript，这样当用户在他们的网页中粘贴该javascript时，表单应该显示出来。

```
<script type="text/javascript">
window.location.href = "http://myserver/2a249ccf59e272abb8e7b8582560a45c"
</script> 
```

问题是使用上面的代码，网址重定向。我想避免重定向我尝试过 iframe，但我不想按照要求使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:19:17.947

您需要使用 AJAX 来获取远程页面。您必须从传递您的网页的同一服务器获取页面，以避免同源策略问题。

我建议使用库来处理 AJAX 请求。jQuery 内置了 AJAX 函数，但您也可以使用其他函数。使用 jQuery...

```
// be sure to include jQuery library in the head of your document...

// general wrapper to execute code only after all page elements have loaded
$(function(){
    $.get("http://myserver/2a249ccf59e272abb8e7b8582560a45c",function(data,status){
        // put the fetched data (your html form) at the end of the existing body content
        // you could put it somewhere else by changing the `body` selector
        $("body").append(data)
    })
}) 
```

# javascript - 运行时错误：对象不支持属性或方法

> ID：11881045
> 
> 赞同：3
> 
> 时间：2012-08-09T10:07:43.107
> 
> 标签：javascript, jquery, asp.net, jquery-ui

我需要在一个非常大的项目中使用 jQuery 创建一个对话框。在某些地方，这个项目使用 jquery 的版本与我在窗口中使用的最新版本不同。

我的代码如下所示：

在 ascx 页面上

```
<html>
<head>
  <link type="text/css" href="css/jquery-ui-1.8.22.custom.css" rel="stylesheet" />
  <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
  <script type="text/javascript" src="js/jquery-ui-1.8.22.custom.min.js"></script>
  <script type="text/javascript" src="js/myjQueryCode.js"></script>
</head>
<body>
</body>
</html> 
```

在 myjQueryCode.js 文件中

```
$(document).ready(function() {
    $("#dialog-form").dialog({
        autoOpen: false,
        height: 440,
        width: 500,
        modal: true,
        closeOnEscape: false
    });
}); 
```

在运行时，我收到错误：

> Microsoft JScript 运行时错误：对象不支持属性或方法“对话框”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:21:16.180

感谢您的回答。问题是该库被多次包含在不同的文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:13:18.363

对话框方法来自 jQuery UI 库。看起来您正在使用自定义版本的 jQuery UI，它*可能*不包含对话框。

您可以在此处自定义要包含在 jQuery UI 中的模块：http: [//jqueryui.com/download](http://jqueryui.com/download)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T19:45:19.613

查看页面的 HTML 以查看页面中是否存在对其他版本 jquery 的脚本引用。如果在正确版本之后加载旧版本，则无效方法将引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T13:15:16.853

如果以上所有方法都失败，请尝试：

检查您安装的包 - 我通过安装 Nuget 包解决了这个问题：JQuery.Draggable - 请参阅：[http ://www.nuget.org/packages/jQuery.UI.Interactions.Draggable/](http://www.nuget.org/packages/jQuery.UI.Interactions.Draggable/)

# c# - 无法创建 BlockingCollection 数组

> ID：11881047
> 
> 赞同：2
> 
> 时间：2012-08-09T10:07:54.813
> 
> 标签：c#, blockingcollection

我有以下代码：

```
//In a Class:
private BlockingCollection<T>[] _collectionOfQueues;
// In the Constructor:
_collectionOfQueues = new BlockingCollection<T>(new ConcurrentQueue<T>())[4]; 
```

我得到以下错误的底线：

> 无法使用 [] 将索引应用于“System.Collection.Concurrent.BlockingCollection”类型的表达式

即使我这样做：

```
_collectionOfQueues = new BlockingCollection<T>(new ConcurrentQueue<T>())[]; 
```

最后一个方括号出现错误：

> 语法错误；期望值

我正在尝试`BlockingCollection`使用的集合制作一个数组，`ConcurrentQueue`以便我可以做到：

```
_collectionOfQueues[1].Add(...);
// Add an item to the second queue 
```

我做错了什么，我能做些什么来解决它？我可以不创建一个数组，`BlockingCollection`我必须列出它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:10:06.070

```
_collectionOfQueues = new BlockingCollection<ConcurrentQueue<T>>[4];
for (int i = 0; i < 4; i++)
    _collectionOfQueue[i] = new ConcurrentQueue<T>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:11:14.447

声明如下：

```
private BlockingCollection<ConcurrentQueue<T>>[] _collectionOfQueues; 
```

初始化如下：

```
_collectionOfQueues = new BlockingCollection<ConcurrentQueue<T>>[4];
for (int i = 0; i < 4; i++)
    _collectionOfQueue[i] = new ConcurrentQueue<T>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T10:10:27.663

这与阻塞集合无关。您用于创建特定大小的数组并初始化其成员的语法无效。

尝试：

```
_collectionOfQueues = Enumerable.Range(0, 4)
                                .Select(index => new BlockingCollection<T>())
                                .ToArray(); 
```

顺便说一句，您不必显式创建一个`ConcurrentQueue<T>`类似的（只需使用默认构造函数），因为这是 a 的默认支持集合`BlockingCollection<T>`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T10:15:17.397

你想创建一个四元素的`BlockingCollection<T>`实例数组，并且你想用一个接受实例的构造函数来初始化每个`ConcurrentQueue<T>`实例。（请注意，默认构造函数 for`BlockingCollection<T>`将使用 a`ConcurrentQueue<T>`作为支持集合，因此您可以改用默认构造函数来逃避，但出于演示目的，我将坚持使用问题中的构造。）

您可以使用集合初始化器来执行此操作：

```
BlockingCollection<T>[] _collectionOfQueues = new[] {
  new BlockingCollection<T>(new ConcurrentQueue<T>()),
  new BlockingCollection<T>(new ConcurrentQueue<T>()),
  new BlockingCollection<T>(new ConcurrentQueue<T>()),
  new BlockingCollection<T>(new ConcurrentQueue<T>())
}; 
```

或者你可以使用某种循环来做到这一点。使用 LINQ 可能是最简单的方法：

```
BlockingCollection<T>[] _collectionOfQueues = Enumerable.Range(0, 4)
  .Select(_ => new BlockingCollection<T>(new ConcurrentQueue<T>()))
  .ToArray(); 
```

请注意，您需要以某种方式提供代码来初始化数组中的每个元素。您的问题似乎是您希望 C# 具有一些功能来创建数组，其中所有元素都使用您只指定一次的相同构造函数进行初始化，但这是不可能的。

# mfc - Stop OnCtlColor() changing combobox's (edit control)'s "text color"

> ID：11881049
> 
> 赞同：1
> 
> 时间：2012-08-09T10:08:05.413
> 
> 标签：mfc, combobox

The MFC combobox is really a wierd design.

I use "drop list" type combo box.

```
HBRUSH CValueInputDlg::OnCtlColor(CDC* pDC, CWnd* pWnd, UINT nCtlColor)  
{
    HBRUSH hBrush = CDialogEx::OnCtlColor(pDC, pWnd, nCtlColor);
    if (nCtlColor == CTLCOLOR_STATIC || nCtlColor == CTLCOLOR_EDIT)
    {
        pDC->SetTextColor(RGB(255, 255, 255));  
        pDC->SetBkMode(TRANSPARENT);  
        hBrush = (HBRUSH)GetStockObject(NULL_BRUSH);
    }    
    return hBrush;
} 
```

what I do is having all my CStatic and CEdit color WHITE.

but i discover that I also change the combobox's edit to white.

that is what I don't want.

that is what I don't want. and I can't stop it from

```
pWnd->GetDlgCtrlID() == IDC_COMBO 
```

it is so unfriendly. this combo box.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:57:08.797

The Edit box is a child of the combo box. Try this:

`pWnd->GetParent()->GetDlgCtrlID() == IDC_COMBO`

# android - Intellij 无法识别 android 的可绘制文件夹

> ID：11881051
> 
> 赞同：0
> 
> 时间：2012-08-09T10:08:22.617
> 
> 标签：android, intellij-idea, splash-screen

我正在尝试在 Intellij 社区版 11.12 中为 PhoneGap 设置启动画面。

问题是 Intellij 给了我错误“无法解析符号飞溅” - 由于某种原因它没有拾取 R.drawable.splash - 我已经重建了项目并删除了生成的文件，但这没有帮助。

我有以下文件夹结构（从[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)看起来是正确的）

```
-res
--drawable
----splash.png
--drawable-hdpi
----splash.png
--drawable-mdpi
----splash.png
--drawable-ldpi
----splash.png
--drawable-xhdpi
----splash.png 
```

我正在尝试设置启动画面：

```
package com.illbeintouch.mobile;

import android.R;
import android.os.Bundle;
import org.apache.cordova.DroidGap;

public class MyActivity extends DroidGap
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        super.setIntegerProperty("splashscreen", R.drawable.splash);
        super.loadUrl("file:///android_asset/www/index.html", 5000);
    }
} 
```

我不知道这是否有所不同，但我使用的是 1.7 Java SDK 和 android 2.3.3 作为目标平台。

如果你能帮忙，我将非常感激 - 我整个上午都在试图解决这个问题！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:35:25.753

您尝试在默认的 R 类中找到 splash：

```
import android.R; 
```

删除此导入并导入适当的自动生成的 R。

# iphone - OSX中的Google Map Makers Sprite不显示

> ID：11881053
> 
> 赞同：0
> 
> 时间：2012-08-09T10:08:31.767
> 
> 标签：iphone, ios, google-maps-api-3, google-maps-markers

当我在 iphone 上使用图像精灵时，我似乎无法显示我的地图标记。当我在 iphone 上使用标准的谷歌地图标记并且在桌面上查看站点时，它们会出现，精灵图标工作正常。

这是我用来创建标记的代码，我使用的是 Zepto，但 JQuery 可以很容易地应用。

```
$.ajax({
    dataType: 'jsonp',
     url: myLocations.LocatorUrl,
     timeout: 8000,
     success: function(data) {
        var infoWindow = new google.maps.InfoWindow();
        var bounds = new google.maps.LatLngBounds();                            
        $.each(data, function(index, item){                 
            var data = item, pincolor,
            latLng = new google.maps.LatLng(data.lat, data.lng); 
            var d = 'http://blah';
            var pinImage = new google.maps.MarkerImage(d+"/assets/img/sprite.locator.png",                          
                        new google.maps.Size(24, 36),
                        new google.maps.Point(0,25),
                        new google.maps.Point(10, 34));
            // Creating a marker and putting it on the map
                var marker = new google.maps.Marker({
                    position: latLng,
                    map: map,
                    title: data.type,
                    icon: pinImage

                });

                bounds.extend(latLng); // Extend the Latlng bound method                    
                var bubbleHtml = '<div class="bubble"><h2>'+item.type+'</h2><p>'+item.address+'</p></div>'; // Custom HTML for the bubble
                (function(marker, data) {                   
                  // Attaching a click event to the current marker                
                  google.maps.event.addListener(marker, "click", function(e) {                  
                    infoWindow.setContent(bubbleHtml);
                    infoWindow.open(map, marker);
                  });   
                  markers.push(marker); // Push markers into an array so they can be removed
                })(marker, data);
            });
            map.fitBounds(bounds); // Center based on values added to bounds        
        }, error: function(x, t, m) {
            console.log('errors')
            if(t==="timeout") {
                alert("got timeout");
            } else {
                alert(t);
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:29:48.603

知道了。原来我引用的图像在 localhost 上，当我将它交换到它工作的本地机器的实际 IP 地址时。

# url - 以 // 开头的 URL 是否有效？

> ID：11881054
> 
> 赞同：24
> 
> 时间：2012-08-09T10:08:37.303
> 
> 标签：url

我们可以看到许多 HTML 页面使用`src="//example.com/myjavascript.js"`包含一个**.js**并让浏览器使用`http://`/`https://`取决于页面 URL 的当前方案。

这是一个有效的 URI 吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-09T10:23:10.617

**是的，这绝对是有效的。**它是一个“方案相关”或“协议相关”的 URI。从一开始就在规范中。对处理 http/https 问题很有帮助。

阅读更好的描述和警告： [在 <script src="http://..."> 中用 // 替换 http:// 是否有效？](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)

需要记住的几点：

*   IE 7 & 8 有一些小问题，双下载
*   如果您从文件中查看 HTML 页面，浏览器会将方案替换为，而不是像使用以或`file://`开头的完整 URL 那样从服务器加载您的 JS 文件。`http://``https://`

**编辑现代 webdev 实践：**

虽然 URL 仍然有效，但现在建议将其`https`用于第三方资源（并从安全页面提供这些资源）。多年前的性能或兼容性问题在很大程度上通过更新的协议和浏览器得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:05:04.213

作为警告...当在 HTML BASE 标记中使用时，我们遇到了 Internet Explorer 不支持这种方法的问题（IE8 和 9 已确认，在修补问题之前没有测试任何其他方法）。

在网站上新实施 SSL 后，我们最初更新了整个应用程序中的 BASE 标记以简单地引用“//www.mydomain.com”：但是页面模板在所有不存在于网站的根。有道理，因为 BASE 标记没有拾取样式表或其他相对链接的资源，这些资源假定它们是从根目录引用的，而不是从嵌套位置引用的。

由于 BASE URI 无论如何都是我们自己的域，因此我们通过将 BASE 标记的值设置为“ [https://www.mydomain.com](https://www.mydomain.com) ”来解决此问题。无论客户端是否以 SSL 模式浏览​​网站，至少它现在可以跨浏览器工作并且始终可以找到其内容 - 通过始终强制使用 https，我们确保不会出现任何内容不匹配通过在使用 https 浏览页面时将 BASE 路径设置为 http 位置来在此过程中发出警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-30T09:19:42.790

**这确实是有效的**，我刚刚以艰难的方式学到了这一点！我们破坏了一项自定义功能，因此您应该始终验证这样的 URL（在 .NET 中）：注意：

*   空格（修剪）
*   “方案相对” URI (UriKind.RelativeOrAbsolute)

    ```
    public bool IsValidUrl(string resourceUrl)
    {
        Uri uri;
        if (Uri.TryCreate(resourceUrl.Trim(), UriKind.RelativeOrAbsolute, out uri))
        {
            return uri.IsWellFormedOriginalString();
        }

        return false;
    } 
    ```

# perl - Perl - 自定义日志文件以仅显示特定错误

> ID：11881055
> 
> 赞同：0
> 
> 时间：2012-08-09T10:08:39.097
> 
> 标签：perl

我是 perl 新手，我们有一个类似于以下的日志文件：

```
SQL> @D:\Luntbuild_Testing\ASCMPK\Files\MAIN\DATABASE\HOST\FILES\DDL\20120412_152632__1_CLTM_EVENT_ACC_ROLE_BLOCK.DDL
SQL> CREATE TABLE CLTM_EVENT_ACC_ROLE_BLOCK
  2  (
  3  EVENT_CODE  VARCHAR2(4) ,
  4  ACC_ROLE  VARCHAR2(20)
  5  )
  6  ;
CREATE TABLE CLTM_EVENT_ACC_ROLE_BLOCK
             *
ERROR at line 1:
ORA-00955: name is already used by an existing object 

SQL> @D:\Luntbuild_Testing\ASCMPK\Files\MAIN\DATABASE\HOST\FILES\DDL\20120412_173845__2_CLTM_EVENT_ACC_ROLE_BLOCK.DDL
SQL> DROP TABLE  CLTM_EVENT_ACC_ROLE_BLOCK;

Table dropped. 
```

现在我需要一个脚本来只显示有 ORA-XXX 错误的脚本路径，脚本应该只显示与 ORA-xxx 错误相关的 SQL> @D:\Luntbuild_Testing\ 的路径，我在下面尝试过，你能帮帮我吗加强同样的。

```
$file = 'c:\data.txt';
open(txt, $file);
while($line = <txt>) {
print "$line" if $line =~ /> @/; #here i want the output to display the path of the script with only ORA-xxx errors and ignore if there are no errors
print "$line" if $line =~ /ORA-/;
}
close(txt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:29:51.963

当您看到`> @`标记时，不要立即打印该行，而是将其存储在一个变量中，并且仅在您实际看到错误时才将其打印出来：

```
$file = 'c:\data.txt';
open(txt, $file);
while($line = <txt>) {
$fn = $line if $line =~ /> @/; #here i want the output to display the path of the script with only ORA-xxx errors and ignore if there are no errors
print $fn, $line if $line =~ /ORA-/;
}
close(txt); 
```

另外：最好在脚本的顶部 编写`use strict;`和。强制您使用 显式命名局部变量，这会由于拼写错误而捕获很多错误。`use warnings;``use strict;``my`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:31:49.823

我会做一些与你尝试过的非常相似的事情：

```
$file = 'c:\data.txt';
open(F, $file);
my $last_cmd = '';
while (<F>) {
  $last_cmd = $_ if /^SQL\> \@D:/;
  print $last_cmd if /^ORA-/;
} 
```

# html - 我可以根据 HTML 页面上的值插入笑脸动画吗？

> ID：11881058
> 
> 赞同：0
> 
> 时间：2012-08-09T10:08:48.393
> 
> 标签：html, animation, graphics, visualization, emoticons

有没有办法在 HTML 页面上插入笑脸动画，它的微笑取决于一个值？我有一些来自朴素贝叶斯分类器的介于 -1 和 1 之间的值，它们分别对应于负面和正面情绪。是否可以在笑脸上形象化这种情绪，这意味着如果值接近 -1，则脸部会悲伤:(或者如果接近 1，则脸部会开心:) ..？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:27:32.307

假设您不想做任何服务器端工作，我能想到的做这个客户端的唯一选择是使用**HTML5 canvas**。如果您不知道那是什么，您首先需要阅读一些关于它的内容以及如何使用 JavaScript 在其上绘制东西。

第一步是绘制表情的静态部分（即脸部和眼睛的边框等）。您可能将其放置在画布上的图像中。如何做到这一点的示例：

```
var ctx = document.getElementById('canvas').getContext('2d');
var img = new Image();
img.src = 'images/face.png';
img.onload = function() {
    ctx.drawImage(img, 0, 0); //draws img where its left-upper corner is at 0, 0
}; 
```

然后，要绘制微笑曲线，您需要使用贝塞尔曲线。您只需根据您的值正确移动控制点。这是有关如何在画布上绘制贝塞尔曲线的教程：[链接](http://www.sitepoint.com/html5-canvas-draw-bezier-curves/ "关联")

希望以任何方式有所帮助！

# jsp - 在下拉列表中保留相同的表单提交值使用spring的 标签

> ID：11881061
> 
> 赞同：2
> 
> 时间：2012-08-09T10:09:01.600
> 
> 标签：jsp, spring-mvc

我的jsp中有一个下拉列表并使用spring mvc，我面临的问题是，在提交表单时，下拉列表中的值会更改为默认值。

我已经绑定了这个下拉列表，如下所示——

backingObject 包含 ObjectA 的列表，ObjectA 包含另一个对象 ObjectB，ObjectB 包含原始类型属性 id

```
<spring:bind path="backingObject.listOfA[0].ObjectB.id">
    <form:select path="listOfA[0].ObjectB.id" id="uioption" class="dropdown_background">
        <c:forEach var="Option" items="${Options}">
            <c:choose>
                <c:when test="${status.value eq Option.id}">
                    <option selected="selected" value="${Option.id}" name="${Option.name }" age="${Option.age }">
                        <c:out value="${Option.name}"/>
                    </option>
                </c:when>
                <c:otherwise>
                    <option value="${Option.id}" name="${Option.name}"  age="${Option.age }">
                        <c:out value="${Option.name}"/>
                    </option>
                </c:otherwise>
            </c:choose>
        </c:forEach>
    </form:select>
</spring:bind> 
```

我正在使用 ajax 向控制器发送发布请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:10:28.517

我不知道这是否是一个特别好的修复，但你不能在 ajax 方法中设置下拉值吗？

```
function submitForm(itemSelected){   
   //submit form values

   //reset dropdown selected item to item passed into method
   $('#DropDownBoxID').val(itemSelected);
} 
```

# overflow - 溢出：隐藏仅水平工作

> ID：11881063
> 
> 赞同：0
> 
> 时间：2012-08-09T10:09:05.087
> 
> 标签：overflow

我有像下面这样嵌套在其他 div 中的元素。

'holder' 包含的内容大于它可以显示的内容。但我想将内容限制在“持有人”内部。否则当按住鼠标并拖动到左/右边框时，内容将相应移动，这是不想要的。

所以我应用了“溢出：隐藏”样式。但这仅适用于水平而不是垂直。内容仍然向下溢出。

这是在IE8,9下

有任何想法吗？

```
<div id="holder" style="background-color:white;"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:38:51.273

通过添加“溢出：隐藏；位置：固定”样式解决了该问题。

如果不指定“位置：固定”，容器将完全扩展以容纳整个内容。设置“位置：固定”没有任何效果，因为容器已经显示了所有内容。

# c# - Process.Start() 并继续我的代码

> ID：11881065
> 
> 赞同：0
> 
> 时间：2012-08-09T10:09:15.227
> 
> 标签：c#, screenshot, process.start

我的程序是赢形式（c#）。它应该打开一个外部程序，打印它的主窗口，然后关闭它。通过使用 Process.Start() 我可以打开程序，但是所有的注意力都集中在它上面，我的代码就停止了。只有当我自己关闭它时，我的表单才会继续 - 但截图为时已晚。那么如何强制我的代码继续运行呢？

```
 public void Runttk(string maromnum)
    {
        Process runttk = new Process();
        runttk.StartInfo.UseShellExecute = true;               
        runttk.StartInfo.FileName = @"C:\\program.exe";
        runttk.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
        runttk.Start();
        this.Focus();
        try
        {
            if (runttk.WaitForInputIdle()==true)
            {                                          
                PringJpg(maromnum);
                Killttk();
            }
        }
        catch (Exception e)
        {
        }

    } 
```

谢谢

更新：最终我使用了 Thread.Sleep(3000)。Crued，但做的伎俩。我没有使用后台工作程序，因为结局上传外部程序和我的代码之间的同步不够清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:16:51.247

也许您的程序永远不会空闲 - 意味着`runttk.WaitForInputIdle()==true`让您的应用程序等到您关闭它。

添加限制（例如`runttk.WaitForInputIdle(500)==true`）应该满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:20:55.003

尝试您的代码，但使用另一个程序（如 notepad.exe），记事本运行，然后控制权下降到您调用 PringJpg 的位置。

所以我认为问题是它阻塞了 if (runttk.WaitForInputIdle()==true)，请尝试为此操作添加超时。

# javascript - CRM 2011 HTML Web 资源中无法识别 Javascript 函数

> ID：11881067
> 
> 赞同：2
> 
> 时间：2012-08-09T10:09:19.683
> 
> 标签：javascript, html, dynamics-crm-2011, webresource

继我已解决的 [previous issue][1] 之后，我在构建包含一些基本 javascript 的简单 HTML Web 资源时遇到了问题，页面正确呈现，但脚本似乎无法正常工作。

我的 HTML 资源非常基础：

```
<html>
<head>
    <script src="ClientGlobalContext.js.aspx" />
    <script type="text/javascript" src="new_jquery_1.7.2.min" />
    <script type="text/javascript">    

        function buttonClick() { alert('Yo !'); }

    </script>
</head>
<body>
    <input type="button" value="Test" onclick="javascript: buttonClick();" />
</body>
</html> 
```

尽管页面显示正常，但单击按钮会产生`The value of the property is null or undefined not a function object`错误，例如功能不存在，但我通过 F12 控制台检查了代码是否正确呈现。

我还尝试通过直接 url 调用 web 资源，形式为

```
http://mycrmserver/myorg/WebResources/new_myResource 
```

但是（正如我所料）页面的行为是相同的。

我检查了谷歌，我浏览了其他几个 SO 问题*和*MSDN，都说这是正确的方法，我的代码有什么问题？

其他（不确定是否有用）详细信息：

*   如果 F12 工具打开，则错误会`SCRIPT5007`在控制台中显示为 javascript 运行时错误。如果不是，如果我浏览到 webresource 直接 url，我会收到通常的脚本错误通知弹出窗口，或者如果我尝试在 CRM 中打开资源，则什么也不会发生。
*   CRM 环境已更新为**Rollup 3** （不幸的是，更新它*不是一种选择）*
*   我使用的是**IE 9**（记住：Dynamics CRM 还不能在非 IE 浏览器中使用）

* * *

**更新** 速记标签混淆了 CRM。

基本上这种语法有时会搞砸：

```
<script src="ClientGlobalContext.js.aspx" /> 
```

但这完美地工作：

```
<script src="ClientGlobalContext.js.aspx"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:30:28.817

`script`尽管您发布的代码是正确的，但根本原因是缺少标签。

CRM 对您发布到脚本编辑器窗口的 HTML 进行了一些处理。在浏览器中呈现的是这样的（请注意，`ClientGlobalContext.js.aspx`标签的关闭方式与您粘贴的代码不同）：

```
<HTML><HEAD>
<SCRIPT src="ClientGlobalContext.js.aspx">
<script type="text/javascript" src="new_jquery_1.7.2.min" />
<script type="text/javascript">    

    function buttonClick() { alert('Yo !'); }

</SCRIPT>

<META charset=utf-8></HEAD>
<META charset=utf-8></HEAD>
<BODY><INPUT onclick=javascript:buttonClick(); value=Test type=button></BODY></HTML> 
```

解决方案：向每个开始脚本标记添加完整的“关闭”标记（而不是使用“/>”）。

# hibernate - Hibernate 中 session.get(Class, Serializable identifier) 中的标识符

> ID：11881074
> 
> 赞同：0
> 
> 时间：2012-08-09T10:09:37.053
> 
> 标签：hibernate

> **可能重复：**
> [休眠：具有相同标识符值的不同对象已与会话关联](https://stackoverflow.com/questions/3553200/hibernate-different-object-with-the-same-identifier-value-was-already-associate)

我是 Hibernate 的新手，无法从 api 中理解这一点。session.get 的 api 说：

> Object org.hibernate.Session.get(Class clazz, Serializable id)
> 
> 返回具有给定标识符的给定实体类的持久实例，如果没有这样的持久实例，则返回 null。（如果实例已经与会话关联，则返回该实例。此方法从不返回未初始化的实例。）

这里的标识符是什么意思。在大多数示例中，他们将其命名为 1L（可能是因为表中的主键是 Long？）我不明白它的本质。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:27:58.323

> 这里的标识符是什么意思

实体的标识符是用`@Id`或注释的属性`@EmbeddedId`。

如果您的班级使用`long`代理标识符，您将使用 session 如下：

```
session.get(MyClass.class, 1); 
```

如果您的类使用嵌入式 id，您可以将该`@Embeddable`类的实例传递给 get 方法。

```
session.get(MyClass.class, new MyClassIdentifier("String", 1)); 
```

# mysql - 为日期列添加mysql范围分区

> ID：11881079
> 
> 赞同：0
> 
> 时间：2012-08-09T10:09:46.197
> 
> 标签：mysql

下面是实际的分区表。

```
 CREATE TABLE `idea_partition` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `mdn` varchar(45) NOT NULL,
  `keyword` varchar(45) NOT NULL,
  `circle` varchar(45) DEFAULT NULL,
  `status` varchar(45) NOT NULL,
  `mode` varchar(25) DEFAULT NULL,
  `action` varchar(45) DEFAULT NULL,
  `mobile_type` varchar(45) DEFAULT NULL,
  `date` datetime NOT NULL,
  `sunsign` varchar(45) DEFAULT NULL,
  `numerology` int(10) unsigned DEFAULT NULL,
  `unsubdate` datetime DEFAULT NULL,
  `user` varchar(15) DEFAULT NULL,
  `pass` varchar(15) DEFAULT NULL,
  `refid` varchar(64) DEFAULT NULL,
  `info` varchar(128) DEFAULT NULL,
  `precharge` varchar(1) DEFAULT NULL,
  `originator` varchar(15) DEFAULT NULL,
  `price` double(6,2) DEFAULT NULL,
  `renewal_count` int(11) DEFAULT '1',
  PRIMARY KEY (`id`,`date`),
  UNIQUE KEY `Index_on_mdn_keyword_status` (`mdn`,`keyword`,`status`,`date`),
  KEY `Index_2` (`mdn`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
PARTITION BY RANGE( TO_DAYS(date) ) (
PARTITION rx201201 VALUES LESS THAN( TO_DAYS('2012-01-01 00:00:00') ), 
PARTITION rx201202 VALUES LESS THAN( TO_DAYS('2012-02-01 00:00:00') ), 
PARTITION rx201203 VALUES LESS THAN( TO_DAYS('2012-03-01 00:00:00') ), 
PARTITION rx201204 VALUES LESS THAN( TO_DAYS('2012-04-01 00:00:00') ), 
PARTITION rx201205 VALUES LESS THAN( TO_DAYS('2012-05-01 00:00:00') ), 
PARTITION rx201206 VALUES LESS THAN( TO_DAYS('2012-06-01 00:00:00') ), 
PARTITION rx201207 VALUES LESS THAN( TO_DAYS('2012-07-01 00:00:00') ), 
PARTITION rx201208 VALUES LESS THAN( TO_DAYS('2012-08-01 00:00:00') ), 
PARTITION rx201209 VALUES LESS THAN( TO_DAYS('2012-09-01 00:00:00') ), 
PARTITION rxMORES VALUES LESS THAN (MAXVALUE) ); 
```

是否可以通过日期列上的分区在现有范围上添加新分区。如下图——

ALTER TABLE idea_partition partition (TO_DAYS(date)) partition rx201301 VALUES LESS THAN (TO_DAYS('2013-01-01 00:00:00');

它给我带来了错误..!! 但是有没有办法实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:01:34.817

`ALTER Table`您可以通过喜欢添加更多分区

```
ALTER TABLE TableName ADD PARTITION (PARTITION PartitionName VALUES LESS THAN PartitionVlue); 
```

但是请记住一件事，您不能通过更改它来跨越分区最大限制。

有关更多详细信息，请阅读[此](http://dev.mysql.com/doc/refman/5.1/en/alter-table-partition-operations.html)内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:19:17.963

好吧，我得到了答案，我应该首先删除 PARTITION rxMORES VALUES LESS THAN (MAXVALUE)，因为它试图将任何小于 MAXVALUES 的值归入该类别。一旦我删除了 rxMORES 分区，它就会在新分区上接受以后的值。

```
mysql> alter table idea_partition drop partition rxMORES; Query OK, 0 rows affected (0.15 sec) Records: 0 Duplicates: 0 Warnings: 0 

mysql> ALTER TABLE idea_partition ADD PARTITION (PARTITION rx201301 VALUES LESS THAN ( TO_DAYS('2013-01-01 00:00:00'))); Query OK, 0 rows affected (0.23 sec) Records: 0 Duplicates: 0 Warnings: 0 mysql> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T07:18:54.643

使用起来更安全

```
ALTER TABLE ...将分区重新组织为（...）；
```

如果不想丢失 rxMORES 分区中的数据，则使用语法。

# asp.net - previousPage.buffer 抛出 httpException

> ID：11881081
> 
> 赞同：2
> 
> 时间：2012-08-09T10:09:51.373
> 
> 标签：asp.net, postbackurl

我有一个带有 2 个表单的 asp.net 4 应用程序。在第一种形式中，我有

```
<asp:Button ID="Save" runat="server" Text="Save"     onclick="Save_Click"PostBackUrl="~/WebForm2.aspx" /> 
```

. 在第二页我有

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (PreviousPage != null)
        {
            Label1.Text = "you came from site: " + PreviousPage.Title;
        }
    } 
```

但标题为空。previousPage.buffer 抛出 httpException“响应在此上下文中不可用”，ErrorCode = -2147467259。我的代码有什么问题？

# css - 背景 div 图像重复问题

> ID：11881082
> 
> 赞同：1
> 
> 时间：2012-08-09T10:09:58.367
> 
> 标签：css

我目前正在使用我喜欢放置在标题部分背景中的横幅。我遇到的问题是图像在重复。我尝试过使用属性`no-repeat`，结果我没有得到任何显示。图像被设置为`#header`div 的背景。我怎样才能让图像出现而不重复？

**CSS**

```
<style>
#header {
    height:165px;
    border-top:15px solid #000;
    background-image:  url(http://webprolearner2346.zxq.net/css-test2/images/banner1.png);
}
</stle> 
```

**HTML**

```
<div id="header">
      <div class="search"><input type="text" class="search-input" name="search" value="Search" onclick="$(this).val('');" /><input type="submit" class="search-submit" /></div>
      <div id="navigation">

       <ul class="button-list">
       <h2>MAIN TITLE PAGE</h2>
        <li><a href="#" class="buttonNav" >Content 1</a></li>
        <li><a href="#" class="buttonNav" >Content 2</a></li>
        <li><a href="#" class="buttonNav" >Content 3</a></li>
        <li><a href="#" class="buttonNav" >Content 4</a></li>
        <li><a href="#" class="buttonNav" >Content 5</a></li>   
       </ul> 
      </div>
     </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:13:11.473

```
#header {
    height:165px;
    border-top:15px solid #000;
    background-image: url('http://webprolearner2346.zxq.net/css-test2/images/banner1.png');
    background-repeat: no-repeat;
} 
```

证明：[http ://awesomescreenshot.com/029cplk1d](http://awesomescreenshot.com/029cplk1d)

但你也可以这样做：

```
background: url('http://webprolearner2346.zxq.net/css-test2/images/banner1.png') no-repeat; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:15:25.590

你可以通过这个得到你想要的结果：-

```
#header {
        background-image: url("http://webprolearner2346.zxq.net/css-test2/images/banner1.png");
        background-repeat: no-repeat;
        border-top: 15px solid #000000;
        height: 165px;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:27:04.040

你也可以试试这个；

```
<style>
#header {
    height:165px;
    border-top:15px solid #000;
    background:url(http://webprolearner2346.zxq.net/css-test2/images/banner1.png) no-repeat;
}
</style> 
```

# python - 在 python-scrapy 的帮助下解析 ajax 表单请求时需要帮助

> ID：11881098
> 
> 赞同：1
> 
> 时间：2012-08-09T10:10:35.493
> 
> 标签：python, ajax, scrapy

即使我是**scrapy 框架**的新手，我也可以使用scrapy 编写好的蜘蛛。最近我遇到了[这个页面](http://www.doogal.co.uk/LatLong.php)，通过输入地址，在提交时我必须捕获纬度和经度。有人可以帮忙吗？

此代码适用于正常的发布请求：

```
return [FormRequest.from_response(response,
                    formdata={'username': 'john', 'password': 'secret'},
                    callback=self.after_login)] 
```

但是像上面这样的基于 ajax 的表单请求呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:24:50.717

该站点使用 Google Maps Geocode 来获取数据，因此使用 Google 的 API 更容易。

它要求：

```
Request URL:http://maps.googleapis.com/maps/api/js/GeocodeService.Search?4s12%20Street%2C%20New%20York%2C%20NY&7sUS&9sen-US&callback=_xdc_._8xnwgc&token=93301 
```

您不妨[注册 Google Maps API](https://developers.google.com/maps/)并自己查询它们 :)

# css - Firefox中的CSS3多框阴影过渡不起作用

> ID：11881099
> 
> 赞同：2
> 
> 时间：2012-08-09T10:10:37.600
> 
> 标签：css, transition

这种转换适用于 Safari 和 Chrome（= Webkit 浏览器），但不适用于 Firefox（= Mozilla）。为什么？

```
a.lorem {
    width: 100px;
    padding: 20px;
    display: block;
    color: white;
    text-align: center;
    background: rgb(191,210,85);
    background: -moz-linear-gradient(top,  rgb(191,210,85) 0%, rgb(142,185,42) 50%, rgb(114,170,0) 51%, rgb(158,203,45) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgb(191,210,85)), color-stop(50%,rgb(142,185,42)), color-stop(51%,rgb(114,170,0)), color-stop(100%,rgb(158,203,45)));
    background: -webkit-linear-gradient(top,  rgb(191,210,85) 0%,rgb(142,185,42) 50%,rgb(114,170,0) 51%,rgb(158,203,45) 100%);
    background: -o-linear-gradient(top,  rgb(191,210,85) 0%,rgb(142,185,42) 50%,rgb(114,170,0) 51%,rgb(158,203,45) 100%);
    background: -ms-linear-gradient(top,  rgb(191,210,85) 0%,rgb(142,185,42) 50%,rgb(114,170,0) 51%,rgb(158,203,45) 100%);
    background: linear-gradient(to bottom,  rgb(191,210,85) 0%,rgb(142,185,42) 50%,rgb(114,170,0) 51%,rgb(158,203,45) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#bfd255', endColorstr='#9ecb2d',GradientType=0 );
    box-shadow: inset 0 -3px 0 #A9A9A9,
                0 3px 0 #EFEFED;
    -webkit-transition: box-shadow .5s linear;
    -moz-transition: box-shadow .5s linear;
    -o-transition: box-shadow .5s linear;
    -ms-transition: box-shadow .5s linear;
    transition: box-shadow .5s linear;
}

a:hover.lorem {
    box-shadow: 0 3px 0 rgba(0, 0, 0, .1),
                inset 0 -3px 0 rgba(0, 0, 0, .1),
                inset 0 0 100px rgba(255, 255,255 , .3);
} 
```

[小提琴](http://jsfiddle.net/9B32s/1/)

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:04:38.603

首先，你需要写`a.lorem:hover`而不是`a:hover.lorem`

之后，border-shadow 多值需要对应于它们的 ":hover" 对。“插入”边框阴影不能过渡到“开始”边框阴影。

例子：

```
a.lorem{
  box-shadow: 
      inset 0 -3px 0 #A9A9A9,
            0  3px 0 #EFEFED,
      inset 0  0   0 rgba(0,0,0,0); /* for third ":hover" value */
  transition:box-shadow .5s linear; /* add prefixed verison (-moz-, -webkit-, ...*/
}
a.lorem:hover{
  box-shadow: 
      inset 0 -3px  0     rgba(0, 0, 0, .1),
            0  3px  0     rgba(0, 0, 0, .1),
      inset 0  0    100px rgba(255, 255,255 , .3);
} 
```

# android - 如何启动应用内计费活动

> ID：11881100
> 
> 赞同：0
> 
> 时间：2012-08-09T10:10:44.730
> 
> 标签：android, android-layout, in-app-purchase, android-activity

我从互联网上获得了一个用于应用内计费的代码，我想在我的应用程序中使用该代码，但我收到一个错误，当我单击 我`buy button`的应用程序`layout`的`Button`点击我的应用内结算开始。

我希望当我点击我的`buy button`然后应用内计费应该开始。没有任何其他`button`点击。

这是应用内计费开始的代码。

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mSP = PreferenceManager.getDefaultSharedPreferences(this);

    Log.i("BillingService", "Starting");
    setContentView(R.layout.contact_market);

    mContext = this;

    mPurchaseButton = (Button) findViewById(R.id.main_purchase_yes);
    mPurchaseButton.setOnClickListener(this);

    mPreview = (TextView) findViewById(R.id.chakkde);

    startService(new Intent(mContext, BillingService.class));
    BillingHelper.setCompletedHandler(mTransactionHandler);

}

public Handler mTransactionHandler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        Log.i(TAG, "Transaction complete");
        Log.i(TAG, "Transaction status: "
                + BillingHelper.latestPurchase.purchaseState);
        Log.i(TAG, "Item purchased is: "
                + BillingHelper.latestPurchase.productId);

        if (BillingHelper.latestPurchase.isPurchased()) {
            showItem();
        }
    };

};

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.main_purchase_yes:
        if (BillingHelper.isBillingSupported()) {
            BillingHelper.requestPurchase(mContext,
                    "android.test.purchased");
        } else {
            Log.i(TAG, "Can't purchase on this device");
            mPurchaseButton.setEnabled(false);
        }

        break;
    default:

        Log.i(TAG, "default. ID: " + v.getId());
        break;
    }

}

private void showItem() {
    mPreview.setVisibility(View.VISIBLE);
    SharedPreferences.Editor prefEditor = mSP.edit();
    prefEditor.putBoolean(DroidSugarPreference.KEY_ENABLE,
            true);
    prefEditor.commit();
    startActivity(new Intent(InAppMain.this, Setup.class));
    InAppMain.this.finish();
}

@Override
protected void onPause() {
    Log.i(TAG, "onPause())");
    super.onPause();
}

@Override
protected void onDestroy() {
    BillingHelper.stopService();
    super.onDestroy();
}
   } 
```

如果我从哪里调用上面的类

```
public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.gtask_button:
            startActivity(new Intent(getActivity(), InAppMain.class));
        default:
            break;
        } 
```

但现在我想从案例 R.id.gtask_button 开始：我应该开始我从 R.id.main_purchase_yes 开始的应用内计费活动。

thnx提前...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:21:47.867

From what i see, this is called when you click the button

```
 BillingHelper.requestPurchase(mContext, "android.test.purchased"); 
```

So maybe thats where it changes your layout to something else...

Post the method so we can take a look.

EDIT:

Ok, here's the code

```
 protected static void requestPurchase(Context activityContext, String itemId){
            if (amIDead()) {
                    return;
            }
            Log.i(TAG, "requestPurchase()");
            Bundle request = makeRequestBundle("REQUEST_PURCHASE");
            request.putString("ITEM_ID", itemId);
            try {
                    Bundle response = mService.sendBillingRequest(request);

                    //The RESPONSE_CODE key provides you with the status of the request
                    Integer responseCodeIndex       = (Integer) response.get("RESPONSE_CODE");
                    //The PURCHASE_INTENT key provides you with a PendingIntent, which you can use to launch the checkout UI
                    PendingIntent pendingIntent = (PendingIntent) response.get("PURCHASE_INTENT");
                    //The REQUEST_ID key provides you with a unique request identifier for the request
                    Long requestIndentifier         = (Long) response.get("REQUEST_ID");
                    Log.i(TAG, "current request is:" + requestIndentifier);
                    C.ResponseCode responseCode = C.ResponseCode.valueOf(responseCodeIndex);
                    Log.i(TAG, "REQUEST_PURCHASE Sync Response code: "+responseCode.toString());

                    startBuyPageActivity(pendingIntent, new Intent(), activityContext);
            } catch (RemoteException e) {
                    Log.e(TAG, "Failed, internet error maybe", e);
                    Log.e(TAG, "Billing supported: "+isBillingSupported());
            }
    } 
```

and we find the culprit -

```
 startBuyPageActivity(pendingIntent, new Intent(), activityContext); 
```

# css - div内的CSS重置而不影响jquery-ui

> ID：11881104
> 
> 赞同：0
> 
> 时间：2012-08-09T10:10:55.603
> 
> 标签：css, jquery-ui

我有一个样式表，它控制一个 div (id="qab") 中所有内容的布局。它以如下重置开始：-

```
#qab div, #qab span, #qab applet, #qab object, #qab iframe, #qab h1, #qab h2, #qab h3, #qab h4, #qab h5, #qab h6, #qab p, #qab blockquote, #qab pre, #qab a, #qab abbr, #qab acronym, #qab address, #qab big, #qab cite, #qab code, #qab del, #qab dfn, #qab em, #qab img, #qab ins, #qab kbd, #qab q, #qab s, #qab samp, #qab small, #qab strike, #qab strong, #qab sub, #qab sup, #qab tt, #qab var, #qab b, #qab u, #qab i, #qab center, #qab dl, #qab dt, #qab dd, #qab ol, #qab ul, #qab li, #qab fieldset, #qab form, #qab label, #qab legend, #qab table, #qab caption, #qab tbody, #qab tfoot, #qab thead, #qab tr, #qab th, #qab td, #qab article, #qab aside, #qab canvas, #qab details, #qab embed, #qab figure, #qab figcaption, #qab footer, #qab header, #qab hgroup, #qab menu, #qab nav, #qab output, #qab ruby, #qab section, #qab summary, #qab time, #qab mark, #qab audio, #qab video {
margin: 0;
padding: 0;
border: 0;
font-size: 100%;
font: inherit;
background: none;
}

#qab article, #qab aside, #qab details, #qab figcaption, #qab figure, #qab footer, #qab header, #qab hgroup, #qab menu, #qab nav, #qab section {
display: block;
}
#qab ol, #qab ul {
list-style: none;
}
#qab blockquote, #qab q {
quotes: none;
}
#qab blockquote:before, #qab blockquote:after, #qab q:before, #qab q:after {
content: '';
content: none;
}
#qab table {
border-collapse: collapse;
border-spacing: 0;
}
#qab b, #qab strong {
font-weight: bold;
} 
```

这很好用，除非我想使用 jquery-ui 元素，这些元素最终被它重置，因此不起作用。

我发现让它工作的唯一方法是在所有 .ui 样式前面加上#qab，但是在 qab div 之外使用的任何东西（例如 jquery 生成的对话框）都不起作用。

我确定我遗漏了一些明显的东西，但我看不到它。

# excel - 为什么这个公式不起作用？

> ID：11881106
> 
> 赞同：0
> 
> 时间：2012-08-09T10:10:58.130
> 
> 标签：excel, excel-formula

考虑以下（部分）Excel工作表：

```
 | A |   B     C     D
-+---+------------------
1|id | comp1 comp2 comp3
-+---+------------------
2| 1 |   1     0     0
3| 1 |   1     0     0
4| 2 |   0     1     0
5| 3 |   0     0     1
6| 1 |   1     0     0
7| 3 |   0     0     1 
```

例如，如果在 columns 中填写所有零和一个`B`，`C`并且`D`是手工填写的。我需要自动执行此操作，因为我的数据集太大，无法手动完成。例如，对于 cell `B2`，我需要一个公式来检查 的值是否与cell`A2`中的 company 相似。如果是，则设置 a ，否则设置 a 。另一个例子：以第 4 行为例。它在单元格中有公司，所以(comp1) 应该是,和。`id``B1``1``0``id` `2``A4``B4``0``C4` `1``D4` `0`

我在单元格 B2 中使用了以下公式，准备将其拖到所有其他单元格中：

```
=IF($A2=RIGHT(B$1;1);1;0) 
```

但是，它将 a`0`放在 B2 中。我不明白，因为`A2`有值 1，所以`RIGHT(B1;1)`，所以`IF(1=1;1;0)`，所以`B2`应该得到 value `1`。但这不是我哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T10:25:38.847

因为 right() 返回一个字符串，并且您将字符串与数字进行比较。您需要将该字符串转换为数字，例如使用 value(right(...))。

# guava - 使用 Guava 库查找对象使用的内存

> ID：11881107
> 
> 赞同：0
> 
> 时间：2012-08-09T10:11:03.030
> 
> 标签：guava

我想使用 Guava 库找到对象使用的内存。为此，我已经完成了搜索作业，并且我发现了一个类：CollectionUtils。它有一个方法大小（对象）。但我的问题是这个方法是返回对象的大小还是它使用的内存大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:58:46.803

如果您想知道某物消耗了多少内存，那么您需要 memory-measurer.googlecode.com。但我不认为它面向初学者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:15:34.767

它不是 Guava，而是[Apache commons](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#size%28java.lang.Object%29)，它返回元素的数量。对于内存使用，有基于检测的工具。或者您可以使用反射并自己计算。或者分配很多这样的对象并通过 和 测量使用的`Runtime.totalMemory()`内存`Runtime.freeMemory()`。

# node.js - Node.js 无法连接到 MongoDB

> ID：11881110
> 
> 赞同：2
> 
> 时间：2012-08-09T10:11:20.580
> 
> 标签：node.js, mongodb

我是 Node.js 和 MongoDB 的新手。我正在遵循本指南：[http](http://howtonode.org/express-mongodb) ://howtonode.org/express-mongodb使用 Node.js 和 MongoDB 创建一个简单的博客。

当节点尝试连接到 MongoDB 时，它失败了，我不知道为什么。

在我的 app.js 文件中，我有：

```
var articleProvider = new ArticleProvider('127.0.0.1', 27107); 
```

在我的文章provider-mongodb.js 文件中，我有

```
var Db = require('mongodb').Db;
var Connection = require('mongodb').Connection;
var Server = require('mongodb').Server;
var BSON = require('mongodb').BSON;
var ObjectID = require('mongodb').ObjectID;

ArticleProvider = function(host, port) {
  this.db = new Db('node-mongo-blog', new Server(host, port, {auto_reconnect: true}, {}));
  this.db.open(function(err){
    if(err) {
      console.log(err);
    }
  });
}; 
```

在我的终端中，我得到：

8 月 9 日 10:48:19 - [nodemon] 开始`node app.js` [错误：无法连接到 [127.0.0.1:27107]]

我正在运行 node.js v0.8.6 和 mongodb v2.0.6

我在这些文件中有其他代码，但据我所知，它不应该影响数据库连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:27:06.870

当 mongod 进程**未**运行或**您连接到错误的主机/IP 时，就会发生这种情况。**

您是否在本地主机上运行它，如果是，您可以从 mongo shell 访问它吗？

尝试使用具有 node、express 和 mongodb nodejs 驱动程序的应用程序的最低版本对其进行测试。

我用这些文件测试了它：

*   [http://howtonode.org/express-mongodb/articleprovider-mongodb.js](http://howtonode.org/express-mongodb/articleprovider-mongodb.js)
*   [http://howtonode.org/express-mongodb/app.js](http://howtonode.org/express-mongodb/app.js)

它运行良好，除了 app.js 的最后两行，因为示例中使用的是**express** 3.x 而不是2.x。

```
var server = app.listen(3000);
console.log("Express server listening on port %d in %s mode", server.address().port, app.settings.env); 
```

# json - ASP.NET web api：记录/指定服务

> ID：11881116
> 
> 赞同：11
> 
> 时间：2012-08-09T10:12:05.417
> 
> 标签：json, soap, xsd, asp.net-web-api

我一直在看[asp.net Web Api](http://www.asp.net/web-api)，我喜欢实现一个实用的 Web 服务的简单性。

但是，我如何记录/指定这样实现的服务的接口？例如，我是否可以将任何规范传递或生成给没有 .NET 背景的 Java 人员，让他轻松调用和使用服务？我可以给 javascript 人什么？

理想情况下，我希望 SOAP/XSD 或类似的东西（易于使用类型良好的对象反序列化）的好处，同时保留可从 Web 浏览器调用的服务（即支持非繁琐的 JSON）。

## 更新

值得注意的是，自从我最初发布这个问题后，我发现[ServiceStack](http://servicestack.net/)可以更自然地处理这个问题；根据客户的选择，支持开箱即用的 JSON、SOAP 和 WSDL 以用于相同的服务。如果你真的想要 SOAP+JSON，它可能是比 ASP.NET Web Api 更好的框架。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T13:25:46.953

**2016 年 3 月更新**

自从这个问题得到回答已经有一段时间了，记录任何 Rest API 的工具已经出现了很多。我们目前正在评估[Swagger 2.0](http://swagger.io/)，现在衍生出[Open Api Initiative](https://openapis.org/)、[RAML](http://raml.org/)和[API Blueprint](https://apiblueprint.org/)。

对于 WebAPI 项目，有一个工具[Swashbuckle](https://github.com/domaindrivendev/Swashbuckle)可以自动创建 Swagger (Open API) 格式的文档。

**记录 REST 服务的格式：**

在构建和标准化 REST 服务的描述方面有一些尝试：

*   Web 应用程序描述语言 ( [WADL](http://en.wikipedia.org/wiki/Web_Application_Description_Language) )
*   Web 服务描述语言 2.0 ( [WSDL 2.0](http://www.ibm.com/developerworks/webservices/library/ws-restwsdl/) )

我认为可以公平地说上述两种方法都没有被广泛采用，但 WADL 看起来确实是一种很好的简洁格式——一种快速的 XSLT，它可能是一种很好的人类可读格式。在 apigee github 站点上，有很多著名 API 的 WADL[示例](https://github.com/apigee/wadl-library)。

当试图找到一种合适的文档格式时，我倾向于从其他人那里寻找“灵感”……Apigee 在这方面做了很多研究，并将其作为其中一个 API 的文档，[或者](http://apigee.com/docs/usergrid/content/app-services-resources)查看 Facebook 的社交图 api[在这里](https://developers.facebook.com/docs/reference/api/user/)。

这些示例在很大程度上与[此处的建议一致](http://answers.oreilly.com/topic/1390-how-to-document-restful-web-services/)

**如何自动记录：**

使用 .NET：这里有一个自动生成 WebApi“帮助”页面的好[例子](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/21/asp-net-web-api-generating-a-web-api-help-page-using-apiexplorer.aspx)。这个例子的一个逻辑扩展可能是让它也可以使用 WADL 格式的版本......

使用 Java：[Jersey](https://wikis.oracle.com/display/Jersey/WADL)是 Java 社区中用于自动生成 WADL 的工具。

**与其他开发人员分享的内容：**

你的 Javascript 人很可能想要一本像 Facebook 和 apigee 这样的手册；给出资源、url、响应代码等的开发示例。这里最重要的是支持 JSON 作为主要内容类型，这将是他/她迄今为止最容易使用和使用的内容类型。

您的 Java 人员也需要该手册，但理论上他们可以为您发送/使用的资源的任何 XML 表示形式提供示例 XSD（假设他们以“Content-Type：appplication/xml”的形式提出请求）。这**可以**帮助他们构建代理类等。JSON 到 Java 和 .NET 转换器可在线获得，并且鉴于您手册中的示例资源，他们应该能够简单地使用这些类型的服务之一来快速创建代理。[从 JSON 生成 Java 类？](https://stackoverflow.com/questions/1957406/generate-java-class-from-json).

如果您绝对必须拥有自动发现、自动代理生成等功能，那么您可能需要提供 REST 和 SOAP（带有 WSDL）端点的选择**——**相关问题在这里：[ReST Proxy Object Generator](https://stackoverflow.com/questions/6097222/rest-proxy-object-generator)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T12:25:55.930

您可以使用`IApiExplorer`接口和`ApiExplorer`类来为您的 Web Api 服务创建帮助页面。此帮助页面将描述您的服务公开的 REST 方法，因此任何了解 REST 工作原理的开发人员都可以使用它（无论使用哪种语言）。请阅读以下链接以获取详细信息和示例：

*   [ASP.NET Web API：介绍 IApiExplorer/ApiExplorer](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/13/asp-net-web-api-introducing-iapiexplorer-apiexplorer.aspx)
*   [ASP.NET Web API：使用 ApiExplorer 生成 Web API 帮助页面](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/21/asp-net-web-api-generating-a-web-api-help-page-using-apiexplorer.aspx)
*   [记录您的 ASP.Net Web API](http://codebetter.com/johnvpetersen/2012/08/01/documenting-your-asp-net-web-apis/)

# java - 如何在检票口表中选择行

> ID：11881120
> 
> 赞同：0
> 
> 时间：2012-08-09T10:12:38.847
> 
> 标签：java, wicket

> **可能重复：**
> [使整行检票口可点击](https://stackoverflow.com/questions/10796342/making-entire-row-of-a-wicket-datable-clickable)

我有播放器的桌子。现在我想用播放器选择一行，然后按下按钮注册他。如何在表格中选择行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:16:14.420

您可以查看[wicket 示例的中继器部分](http://www.wicket-library.com/wicket-examples-6.0.x/repeater/)。它显示了您可以在 wicket 中使用的大多数表格，它们都有一个“选择”操作，这是一个带有自定义面板的 AbsractColumn。

```
...

 columns.add(new AbstractColumn<Contact, String>(new Model<String>("Actions"))
    {
        public void populateItem(Item<ICellPopulator<Contact>> cellItem, String componentId,
            IModel<Contact> model)
        {
            cellItem.add(new ActionPanel(componentId, model));
        }
    });

...

class ActionPanel extends Panel
{
    public ActionPanel(String id, IModel<Contact> model)
    {
        super(id, model);
        add(new Link("select")
        {
            @Override
            public void onClick()
            {
                selected = (Contact)getParent().getDefaultModelObject();
            }
        });
    }
}

public Contact getSelected()
{
    return selected;
}

public void setSelected(Contact selected)
{
    addStateChange();
    this.selected = selected;
} 
```

希望这有帮助

# php - 无法在 vfp dbf thourgh php 中保存数据

> ID：11881121
> 
> 赞同：0
> 
> 时间：2012-08-09T10:12:39.597
> 
> 标签：php, dbf, visual-foxpro

我做错了什么，我的代码在 php 中，我想将数据保存到 dbf 中。

我已经在 vfp 中测试了这段代码，它正在工作

vfp代码

```
hh='INSERT INTO instadb.db(pic_nm,user_pic,hashtag,usernm) values("abc","dd","eee","fff")'
hh1=CREATEOBJECT("ADODB.Connection")
hh1.Open("Provider=VFPOLEDB.1;Data Source=d:\newweb\inst\;Exclusive=NO;BackGroundFetch=NO;NULL=NO;Collate=MACHINE")
hh1.Execute(hh) 
```

这段代码有效，

但在 php

现在我在 php 中编写这段代码

```
<?php

$conn = new COM("ADODB.Connection") ;
$jj="Provider=VFPOLEDB.1;Data Source=d:\newweb\inst\;Exclusive=NO;BackGroundFetch=NO;NULL=NO;Collate=MACHINE";
$conn->Open("Provider=VFPOLEDB.1;Data Source=d:\newweb\inst\;Exclusive=NO;BackGroundFetch=NO;NULL=NO;Collate=MACHINE");
$dd="INSERT INTO instadb.db(pic_nm,user_pic,hashtag,usernm) values('abc','dd','eee','fff')";
$conn->Execute($dd);
$conn->Close();

?> 
```

这不起作用，请告诉我是什么问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:28:20.770

将连接字符串用单引号括起来：

```
$jj='Provider=VFPOLEDB.1;Data Source=d:\newweb\inst\;Exclusive=NO;BackGroundFetch=NO;NULL=NO;Collate=MACHINE'; 
```

虽然它用双引号括起来

```
d:\newweb\inst\ 
```

变成

```
d:
ewweb\inst\ 
```

...因为 PHP 将 转换`\n`为新行。

# vba - 将excel中的日期从dd-mm-yyyy转换为dd/mm/yyyy格式并检查日期是否有效

> ID：11881126
> 
> 赞同：0
> 
> 时间：2012-08-09T10:12:53.893
> 
> 标签：vba, excel

~~我很难将日期从 dd-mm-yyyy 格式转换为 dd/mm/yyyy 格式。~~

例如，当我在 excel 中输入日期为 25/02/2012 (dd/mm/yyyy) 时，如果在下一行输入日期后，它会将日期转换为 25-02-2012 (dd-mm- yyyy) 格式。

~~我想要做的是，当我在 excel 中以 (dd/mm/yyyy) 格式输入日期时，它应该保持原样，并且在我下一次时不应该将其更改回 (dd-mm-yyyy) 格式细胞。~~

当我输入我的日期作为当前系统日期时，我的代码给了我一个错误，我无法验证日期，即输入的日期是否为有效日期

```
 Sub valid_date()
    ' ---------------------------------------------------------------------
    ' Final Code - Trial
    ' ---------------------------------------------------------------------

    Dim d1 As Variant
    Dim IssueDate As Variant
    Dim str As Variant

        d1 = Worksheets("Sheet1").Cells(6, 1).value

            MsgBox " The Issue Date format is " & d1

        sysdate = Date

        MsgBox "System Date is " & sysdate

                If IsDateValid(d1) Then ' if date is in dd/mm/yyyy format then print this
            If (d1 > sysdate) Then
                MsgBox "Invalid date"
            End If
        End If
     End Sub

    Function IsDateValid(pdate) As Boolean

        IsDateValid = False

        Set RegExp = CreateObject("VBScript.RegExp")

        '   it only matches whether date is in dd/mm/yyyy format or not
        '
        '   [1-9]|0[1-9]|1[0-9]|2[0-9]|3[0-1]   ---> it allows the DATE  from 01 to 31
        '   [1-9]|0[1-9]|1[0-2]                 ---> it allows the MONTH from 01 to 12
        '   1[9][0-9][0-9]|2[0][0-9][0-9]       ---> it allows the YEAR  from 1900 to 2099
        '
        '   below is the regular expression for checking the date in dd/mm/yyyy format

        RegExp.Pattern = "^([1-9]|0[1-9]|1[0-9]|2[0-9]|3[0-1])[/]([1-9]|0[1-9]|1[0-2])[/](1[9][0-9][0-9]|2[0][0-9][0-9])$"

        ' check whether the date is in dd/mm/yyyy format or not....
        tempdate = RegExp.Test(pdate)

             If tempdate Then    ' if tempdate is in dd/mm/yyyy format than proceed further
                'If isdate(tempdate) Then  ' if date is a valid date then proceed further
                 If isdate(pdate) Then
                    IsDateValid = True
                Else
                    IsDateValid = False
                End If
            Else
                IsDateValid = False
            End If               
    End Function 
```

我正在使用上述代码通过使用正则表达式来检查日期是否为 dd/mm/yyyy 格式

~~但我面临的问题是，每当我以 dd/mm/yyyy 格式输入日期时，它将 Excel 中的日期作为 dd-mm-yyyy 格式。~~

我已经稍微更新了我的代码，当我输入我的日期作为当前系统日期时，我还需要更多帮助，这给了我错误

例如，当我输入我的日期为 09/09/2012（假设这是您当前的系统日期）并且当我使用 IsDate 方法检查此日期时，它给了我一个错误

我再次编辑了我的代码，

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:00:50.050

您不需要 VBA/RegEx。选择您输入日期的单元格/列并创建自定义数字格式：`dd/mm/yyyy`。现在，无论您如何输入有效日期（05-05-2000、3-1-2010、14/6-1990 等），它都应该被格式化为`dd/mm/yyyy`.

而且，正如 Olle 指出的那样，您应该使用该`Date`对象，而不是`Variant`在 VBA 中操作日期。这样，您使用的是[序列号](http://office.microsoft.com/en-us/excel-help/datevalue-HP005209044.aspx)，而不是具有潜在格式问题的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:47:55.697

首先，我建议您检查计算机上日期的区域设置。如果您将其设置为使用“dd/mm/yyyy”格式，Excel 也将使用它，并有望消除对任何 RegEx VBA 代码的需求。

其次，如果您确实需要使用 VBA 重新格式化日期，我强烈建议您使用 Date 数据类型而不是 Variants。我还建议您在代码顶部使用 Option Explicit 并显式声明任何变量，以最大程度地减少拼写错误并生成更高质量的代码。

~~第三，我又查看了您的代码，似乎它永远不会起作用：~~

~~1\. 因为它从未被声明过，所以是`tempdate`a 2.你从3的结果中`Variant`
赋值`tempdate`为a`boolean``RegExp.Test(pdate)`
`IsDate(tempdate)``false``boolean``Date`~~

同样，如果您使用`Date`数据类型，则可以跳过 RegEx ... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:18:36.517

我使用 Adob​​e 在线 PDF 到 Excel，日期正确显示为 MM/DD/YYYY，但是在提取月份 (=Month()) 时，它返回 DD 部分。它被解释为 DD/MM/YYYY。我将文件保存为 .csv 关闭并重新启动 excel 并打开 .csv 文件，日期是正确的 MM/DD/YYYY。

# facebook - 使用 file_get_contents 进行身份验证

> ID：11881128
> 
> 赞同：0
> 
> 时间：2012-08-09T10:13:06.883
> 
> 标签：facebook, facebook-graph-api, authentication, file-get-contents

我正在使用 PHP file_get_contents 对用户进行身份验证，我的脚本适用于每个 Facebook 用户，除了我注册应用程序的 Facebook 帐户。URL file_get_contents 在复制到浏览器地址栏中时使用，并返回访问令牌，但不适用于 file_get_contents。它返回错误的请求。

是否无法使用注册该应用程序的 Facebook 帐户进行身份验证？

# regex - 正则表达式与 Scala 中的 Kiama Parser 匹配确切的单词

> ID：11881133
> 
> 赞同：0
> 
> 时间：2012-08-09T10:13:24.523
> 
> 标签：regex, parsing, scala

我正在寻找正确的正则表达式形式来提供给我的 Kiama Packrat 解析器，以便当它遇到像`int`它这样的关键字时，它会识别这是一种类型，而不是有效的 var 名称。

目前我有：

```
 lazy val type_int_ =  ".*\\bint\\b.*".r ^^ (s => TypeInt)

lazy val var_ =
    idn ^^ TermVar 

  lazy val idn =
    "[a-zA-Z][a-zA-Z0-9]*".r 
```

但这不起作用，所以我会很感激这方面的指示。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:33:33.307

我已成功使用以下方法：

```
val keyword = regex ("int[^a-zA-Z]".r)

val identifier = not (keyword) ~> "[a-zA-Z]+".r 
```

换句话说，仅当关键字后面没有可以将其扩展为标识符的字符时才识别该关键字。一个缺点是扩展正则表达式在关键字定义和标识符之一中重复，但如果您愿意，可以将其分解。

你必须小心如何使用关键字解析器，因为它也会捕获关键字之后的字符。它在 a 的上下文中是安全的`not`，因为不消耗任何输入。

请注意，通常不需要显式处理空格，因为`literal`和`regex`解析器组合器在开始解析您真正想要的内容之前会处理它。

通过编写一个从关键字字符串列表和扩展正则表达式构建关键字解析器的方法，这种方法很容易推广到多个标识符。

顺便说一句，Kiama 并没有真正提供解析组合器。我们依赖 Scala 库中的那些。我们*确实*为特殊情况提供了一些标准扩展，但基本行为直接来自库。因此，我不清楚您的问题实际上是否与 Kiama 有关。正如上面评论中提到的，包括一个独立的问题示例将帮助我们更清楚地了解您正在使用哪个库。

# php - Magento Api 多选属性

> ID：11881138
> 
> 赞同：1
> 
> 时间：2012-08-09T10:13:55.227
> 
> 标签：php, api, magento

如何`Multiple Select`通过 API 创建/更新具有属性的产品？插入产品 (catalog_product.create) 的 API 文件的路径是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T07:53:36.810

我正在使用 SOAP API 在 magento 商店中输入产品。这是完整的代码

在多选自定义属性的情况下。

```
 $arrProductTime = explode(',', '136,139');

            $result = $client->catalogProductCreate($session, 'simple', $attributeSet->set_id, 'product_sku1234', array(

                'categories' => array(36),
                'websites' => array(1),
                'name' => 'my_pdt1008',
                'description' => 'my_pdt1',
                'short_description' => 'my_pdt1000',
                'weight' => '11',
                'status' => '1',
                'url_key' => 'product-url-key1',
                'url_path' => 'product-url-path1',
                'visibility' => '4',
                'price' => '100',
                'tax_class_id' => 1,
                'meta_title' => 'Product meta title1',
                'meta_keyword' => 'Product meta keyword1',
                'meta_description' => 'Product meta description1',
                'stock_data' => array('qty'=>'100','is_in_stock'=>1,'manage_stock'=>1),
                'additional_attributes' => array('multi_data' => array(array('key' => 'product_time', 'value' => $arrProductTime)))
            )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:52:09.770

**肥皂 V1**

```
$client = new SoapClient('http://magentohost/api/soap/?wsdl');
// If some stuff requires api authentification,
// then get a session token
$session = $client->login('apiUser', 'apiKey');
// get attribute set
$attributeSets = $client->call($session, 'product_attribute_set.list');
$attributeSet = current($attributeSets);
$result = $client->call($session, 'catalog_product.create', array('simple', $attributeSet['set_id'], 'product_sku', array(
    'categories' => array(2),
    'websites' => array(1),
    'name' => 'Product name',
    'description' => 'Product description',
    'short_description' => 'Product short description',
    'weight' => '10',
    'status' => '1',
    'url_key' => 'product-url-key',
    'url_path' => 'product-url-path',
    'visibility' => '4',
    'price' => '100',
    'tax_class_id' => 1,
    'meta_title' => 'Product meta title',
    'meta_keyword' => 'Product meta keyword',
    'meta_description' => 'Product meta description'
)));
var_dump ($result); 
```

**SOAP V2**

```
$client = new SoapClient('http://magentohost/api/v2_soap/?wsdl');

// If some stuff requires api authentification,
// then get a session token
$session = $client->login('apiUser', 'apiKey');

// get attribute set
$attributeSets = $client->catalogProductAttributeSetList($session);
$attributeSet = current($attributeSets);

$result = $client->catalogProductCreate($session, 'simple', $attributeSet->set_id, 'product_sku', array(
    'categories' => array(2),
    'websites' => array(1),
    'name' => 'Product name',
    'description' => 'Product description',
    'short_description' => 'Product short description',
    'weight' => '10',
    'status' => '1',
    'url_key' => 'product-url-key',
    'url_path' => 'product-url-path',
    'visibility' => '4',
    'price' => '100',
    'tax_class_id' => 1,
    'meta_title' => 'Product meta title',
    'meta_keyword' => 'Product meta keyword',
    'meta_description' => 'Product meta description'
));

var_dump ($result); 
```

您可以通过以下方式获取附加属性列表：

**肥皂 V1**

```
$proxy = new SoapClient('http://magentohost/api/soap/?wsdl');
$sessionId = $proxy->login('apiUser', 'apiKey');

$listAttributes = $proxy->call(
    $sessionId,
    'product.listOfAdditionalAttributes',
    array(
        'simple',
        13
    )
); 
```

**SOAP V2**

```
$proxy = new SoapClient('http://magentohost/api/v2_soap/?wsdl'); // TODO : change url
$sessionId = $proxy->login('apiUser', 'apiKey'); // TODO : change login and pwd if necessary

$result = $proxy->catalogProductListOfAdditionalAttributes($sessionId, 'simple', '13');
var_dump($result); 
```

**回应是**

```
array
  0 =>
    array
      'attribute_id' => string '89' (length=2)
      'code' => string 'old_id' (length=6)
      'type' => string 'text' (length=4)
      'required' => string '0' (length=1)
      'scope' => string 'global' (length=6)
  1 =>
    array
      'attribute_id' => string '93' (length=2)
      'code' => string 'news_from_date' (length=14)
      'type' => string 'date' (length=4)
      'required' => string '0' (length=1)
      'scope' => string 'website' (length=7)
  2 =>
    array
      ... 
```

我希望它能帮助你解决问题。

**资源**

[创建一个新产品](http://www.magentocommerce.com/api/soap/catalog/catalogProduct/catalog_product.create.html)

[获取附加属性列表。](http://www.magentocommerce.com/api/soap/catalog/catalogProduct/catalog_product.listOfAdditionalAttributes.html)

# jsf-2 - Primefaces 日历 - 具有此模式“MM/dd/yyyy”的变量 null

> ID：11881140
> 
> 赞同：0
> 
> 时间：2012-08-09T10:13:58.830
> 
> 标签：jsf-2, calendar, primefaces, design-patterns, managed-bean

我想为我的日历使用这种模式“MM/dd/yyyy”来设置变量，但它不起作用。如果我使用模式“MM/dd/yyyy hh:mm”，则设置变量。为什么 ？

```
<p:calendar value="#{myBean.date}" id="cal_d" pattern="MM/dd/yyyy" required="true" requiredMessage="Date !" locale="fr"> 
```

# php - php 将最后一个结果分配给所有数组键

> ID：11881141
> 
> 赞同：0
> 
> 时间：2012-08-09T10:14:00.983
> 
> 标签：php, arrays

有一些问题，下面的代码将最后一个 pr_name 分配给所有键。

```
$arr   = array();
while($row = mysql_fetch_array($results)) { 
$keys[] = $row['pr_code'];
$items = array_fill_keys($keys, $row['pr_name']);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:16:47.347

简单地说：

```
$items = array();
while($row = mysql_fetch_array($results)) { 
  $items[$row['pr_code']] = $row['pr_name'];
} 
```

# r - 在 Rstudio 中使用带有 knitr 和 R Markdown 的 Slidify 时出错

> ID：11881144
> 
> 赞同：3
> 
> 时间：2012-08-09T10:14:07.410
> 
> 标签：r, knitr, rstudio, r-markdown, slidify

从 github 下载所需的软件包后，我正在尝试 slidify，如本文档中所述，[开始使用 Slidify](http://documentup.com/ramnathv/slidify)。在使用 create_deck() 创建了卡片组后，我在网上找到的测试代码上使用了函数 slidify()。这是代码：

```
--- 

### A Simple Plot

Let us create a simple scatterplot.

```{r simple-plot, fig.height = 6, fig.align = 'center', message = F}
require(ggplot2)
qplot(wt, mpg, data = mtcars)
```

--- 

### A Table

```{r table, results = 'asis', comment = NA}
library(xtable)
options(xtable.type = 'html')
xtable(head(mtcars))
``` 
```

我将上面的代码保存为 test_slidify.Rmd 并使用 slidify("test_slidify.Rmd") 调用它。但是，我一直遇到以下错误，在下面的末尾：

```
processing file: C:/Users/VJ/test_slidify.Rmd
  |>>>>>>>>>>>>>                                                    |  20%
  ordinary text without R code

  |>>>>>>>>>>>>>>>>>>>>>>>>>>                                       |  40%
label: simple-plot (with options) 
List of 4
 $ fig.height: num 6
 $ fig.align : chr "center"
 $ message   : logi FALSE
 $ indent    : chr "    "

  |>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>                          |  60%
  ordinary text without R code

  |>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>             |  80%
label: table (with options) 
List of 3
 $ results: chr "asis"
 $ comment: logi NA
 $ indent : chr "    "

  |>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>| 100%
  ordinary text without R code

output file: C:\Users\VJ\test_slidify.md

Error in mapply(function(i, j) doc[i:j], begin, end, SIMPLIFY = FALSE) : 
  Zero-length inputs cannot be mixed with those of non-zero length 
```

我已经下载了最新版本的 slidify 和其他必需的软件包，但仍然遇到此错误。感谢任何帮助。最后，slidify 是否只创建一个 .md 文件或一个 html 文件，就像在带有 knitr 的常规 Rmarkdown 中一样。我们如何将生成的 .md 文件转换为 html 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:11:12.007

通过从 Slidify 网站上的示例中复制和粘贴，我遇到了同样的问题。这弄乱了文本编码，导致错误。我最终手动输入了示例，然后它完美地构建了 html 文件。另请注意，您需要使用“---”语法（不带引号）来分隔幻灯片。不这样做会导致其他人的构建崩溃。

# python - 在 Python 中通过命令行参数编辑文本文件

> ID：11881145
> 
> 赞同：0
> 
> 时间：2012-08-09T10:14:07.690
> 
> 标签：python, command-line-arguments

我想通过 Python 中的命令行参数传递整数来编辑文本文件。但是我的代码不起作用，有人可以指出我错在哪里。

```
 import sys, argparse
    def main(argv=None):
    if argv is None:
        argv=sys.argv[1:]
        p = argparse.ArgumentParser(description="Editing omnetpp.ini")
        p.add_argument('arg1', action='store', default= 1, type=int, help="number of clients")
        args = p.parse_args(argv)
        n = args.arg1
        f = open('C:\\Users\Abcd\Desktop\Omnet\omnetpp.ini', 'a')
        for i in range(n):
            f.write('*.voipClient['+str(i)+'].udpApp['+str(i)+'].destAddresses = "voipGateway"\n')
            f.write('*.voipGateway.udpApp['+str(i)+'].destAddresses   = "voipClient['+str(i)+']"\n')
        f.close() 
```

如果整数 5 通过命令行参数传递，那么它应该在文本文件中添加以下行，这不会发生输出

```
*.voipClient[0].udpApp[0].destAddresses = "voipGateway"
*.voipGateway.udpApp[0].destAddresses   = "voipClient[0]"
*.voipClient[1].udpApp[1].destAddresses = "voipGateway"
*.voipGateway.udpApp[1].destAddresses   = "voipClient[1]"
*.voipClient[2].udpApp[2].destAddresses = "voipGateway"
*.voipGateway.udpApp[2].destAddresses   = "voipClient[2]"
*.voipClient[3].udpApp[3].destAddresses = "voipGateway"
*.voipGateway.udpApp[3].destAddresses   = "voipClient[3]"
*.voipClient[4].udpApp[4].destAddresses = "voipGateway"
*.voipGateway.udpApp[4].destAddresses   = "voipClient[4]" 
```

我正在执行以下步骤：

1.  代码保存在 test.py
2.  从命令行 C:\Users\Abcd\Desktop>python test.py 5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:39:41.567

不要在循环中关闭文件，一旦关闭就无法再写入（事实上，如果您尝试写入已关闭的文件对象，应该会抛出错误）。相反，在循环之后关闭它。此外，要将每个句子放在一个新行上，请以换行符结束字符串`\n`（类似于按“ENTER”）。

```
f = open('C:\\Users\Abcd\Desktop\Omnet\omnetpp.ini', 'a')
for i in range(n):
    f.write('*.voipClient['+str(i)+'].udpApp['+str(i)+'].destAddresses = "voipGateway"\n')
    f.write('*.voipGateway.udpApp['+str(i)+'].destAddresses   = "voipClient['+str(i)+']"\n')
f.close() 
```

*编辑*

顺便说一句，正如 Rostyslav Dzinko 在评论中所说，您定义代码的方式**不是**定义主函数的方式。事实上，尝试这样的事情（另见[这个 SO question](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)）：

```
if __name__ == '__main__':
    p = argparse.ArgumentParser(description="Editing omnetpp.ini")
    p.add_argument('arg1', action='store', default= 1, type=int, help="number of clients")
    args = p.parse_args() 
```

# java - 使用 Spring AOP 记录方法条目

> ID：11881148
> 
> 赞同：2
> 
> 时间：2012-08-09T10:14:15.653
> 
> 标签：java, spring, logging

任何人都知道如何记录方法条目（包括参数值）并在跟踪级别使用 Spring AOP 和 log4j 退出。它应该能够记录来自多个包的类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T10:56:49.917

您可以将*@Around(..)*方面用于此类目的：

```
@Component
@Aspect
@Order(value=2)
public class LoggingAspect {

    @Around("execution(* com.blablabla.server..*.*(..))")
    public Object logMethod(ProceedingJoinPoint joinPoint) throws Throwable{
        final Logger logger = LoggerFactory.getLogger(joinPoint.getTarget().getClass().getName());
        Object retVal = null;

        try {
            StringBuffer startMessageStringBuffer = new StringBuffer();

            startMessageStringBuffer.append("Start method ");
            startMessageStringBuffer.append(joinPoint.getSignature().getName());
            startMessageStringBuffer.append("(");

            Object[] args = joinPoint.getArgs();
            for (int i = 0; i < args.length; i++) {
                startMessageStringBuffer.append(args[i]).append(",");
            }
            if (args.length > 0) {
                startMessageStringBuffer.deleteCharAt(startMessageStringBuffer.length() - 1);
            }

            startMessageStringBuffer.append(")");

            logger.trace(startMessageStringBuffer.toString());

            StopWatch stopWatch = new StopWatch();
            stopWatch.start();

            retVal = joinPoint.proceed();

            stopWatch.stop();

            StringBuffer endMessageStringBuffer = new StringBuffer();
            endMessageStringBuffer.append("Finish method ");
            endMessageStringBuffer.append(joinPoint.getSignature().getName());
            endMessageStringBuffer.append("(..); execution time: ");
            endMessageStringBuffer.append(stopWatch.getTotalTimeMillis());
            endMessageStringBuffer.append(" ms;");

            logger.trace(endMessageStringBuffer.toString());
        } catch (Throwable ex) {
            StringBuffer errorMessageStringBuffer = new StringBuffer();

             // Create error message with exception  
             logger.error(errorMessageStringBuffer.toString(), ex);    
            throw ex;
        }

        return retVal;
    }
} 
```

*在这个例子中，方面记录了com.blablabla.server*包下所有子包的所有方法调用。它还记录所有方法输入参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:26:01.270

您可以使用 Spring 框架的 PerformanceMonitorInterceptor 来记录方法条目。[这](https://dzone.com/articles/monitoring-performance-spring)是 DZone 的示例用法。

# java - JOGL 倒置渲染

> ID：11881150
> 
> 赞同：2
> 
> 时间：2012-08-09T10:14:20.887
> 
> 标签：java, jogl

我正在使用 JOGL 渲染图像，使用一个`Texture`对象，但是它被颠倒渲染（图片： http: [//puu.sh/Q2QT](http://puu.sh/Q2QT)）。任何建议都会很棒，代码如下：

```
private void renderImage(GL2 gl, String filename, int width, int height) {
  Texture texture = null;
  try {
    texture = TextureIO.newTexture(new File(this.getClass().getResource(filename).toURI()), true);
  }
  catch (URISyntaxException e) {
    e.printStackTrace();
    throw new RuntimeException(e);
  }
  catch (IOException e) {
    e.printStackTrace();
    throw new RuntimeException(e);
  }

  int left = 0;
  int top = 0;

  texture.enable(gl);
  texture.bind(gl);

  gl.glBegin(GL2.GL_POLYGON);
  gl.glTexCoord2d(0, 0);
  gl.glVertex2d(left, top);
  gl.glTexCoord2d(1, 0);
  gl.glVertex2d(left + width, top);
  gl.glTexCoord2d(1, 1);
  gl.glVertex2d(left + width, top + height);
  gl.glTexCoord2d(0, 1);
  gl.glVertex2d(left, top + height);
  gl.glEnd();
  gl.glFlush();

  texture.disable(gl);
  texture.destroy(gl);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:38:19.443

Java 和 OpenGL 对坐标系的默认方向有不同的想法。Java 将*y* = 0 作为坐标系所描述的任何东西的*上*边缘，从那里向下。OpenGL 将*y* = 0 作为参考矩形的底部。您可以在多个位置翻转图像。在您的情况下，最简单的方法是更改​​场景和纹理坐标之间的关联：

```
 gl.glTexCoord2d(0, 1);
  gl.glVertex2d(left, top);
  gl.glTexCoord2d(1, 1);
  gl.glVertex2d(left + width, top);
  gl.glTexCoord2d(1, 0);
  gl.glVertex2d(left + width, top + height);
  gl.glTexCoord2d(0, 0);
  gl.glVertex2d(left, top + height); 
```

**编辑：**
一个[版本`newTexture`](http://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/com/jogamp/opengl/util/texture/TextureIO.html#newTexture%28int,%20int,%20int,%20int,%20int,%20int,%20boolean%29)提供了一个`mustFlipVertically`标志，但从文件创建纹理的版本显然没有。处理不同方向的“官方”方法是使用[`getImageTexCoords`](http://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/com/jogamp/opengl/util/texture/Texture.html#getImageTexCoords%28%29)：

```
 TextureCoords tc = texture.getImageTexCoords();
  gl.glTexCoord2f(tc.left(), tc.top());
  gl.glVertex2d(left, top);
  gl.glTexCoord2f(tc.right(), tc.top());
  gl.glVertex2d(left + width, top);
  gl.glTexCoord2f(tc.right(), tc.bottom());
  gl.glVertex2d(left + width, top + height);
  gl.glTexCoord2f(tc.left(), tc.bottom());
  gl.glVertex2d(left, top + height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T16:44:23.017

我通常将图像文件作为 BufferedImage 读取，然后使用名为 ImageUtil.flipImageVertically(BufferedImage image) 的便捷函数垂直翻转它们。这是一个例子：

```
for (int i= 0; i < imgPaths.length; i++){
        try {
            BufferedImage image= ImageIO.read(this.getClass().getResourceAsStream ("/resources/"+imgPaths[i]));
            ImageUtil.flipImageVertically(image);

            textures[i]= AWTTextureIO.newTexture(glProfile, image, false);
            loadingBar.increaseProgress(1);

        } catch (IOException e) {
            say("Problem loading texture file " + imgPaths[i]);
            e.printStackTrace();
        }
    } 
```

# javascript - 如何在循环中缓存 $(this)？

> ID：11881154
> 
> 赞同：2
> 
> 时间：2012-08-09T10:14:46.353
> 
> 标签：javascript, jquery

我有以下 jQuery 代码：

```
$content.each(function(i) {
     $body = $(this);  
     $(this).find('div.field-content')
     .animate(
         {
            'top': 0
         },
         {
             duration: 500, 
             complete: function () {
                 $(this).css('top', 0);
                 setBodyGradient($body);
             }
         }
     );
}); 
```

在我的情况下`$content`有5个项目。问题似乎是在最后一次迭代中，动画完成回调`$content.eq(0)`尚未触发，当它触发时，最新版本的`$body`被发送到`setBodyGradient`5 次，而不是`$body`创建回调时的版本.

我应该说我在 Drupal 上运行 JQuery 1.4.4，所以这可能是最新 JQuery 中修复的一个错误，还是一个特性？

我知道我可以通过使用`$content.eq(i)`来解决它，但是我很想知道这是设计使然还是错误行为，以及推荐的方法是什么？我应该一直在寻找使用`$content.eq(i)`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:29:07.957

改为这样做：

```
$content.each(function(i) {
     var $body = $(this); 
```

否则`$body`将是一个全局变量，并将解析为当前正在处理的列表项。当循环结束时，它将解析到最后一个列表项。

由于在循环完成后执行回调`$body`将始终解析到列表中的最后一个元素。

Using`var`使.`$body`使用的函数的作用域链的一部分`.each()`。这意味着`$body`它将始终解析为“正确”的列表项。

要查看差异，请立即从此[小提琴](http://jsfiddle.net/zceCQ/)`var`中删除前面的关键字并检查您的控制台。`$body`

# php - Are parameterized queries in PDO necessary for request variables?

> ID：11881156
> 
> 赞同：1
> 
> 时间：2012-08-09T10:14:54.127
> 
> 标签：php, url, pdo

I understand that parameterized queries are essential when user-submitted data is on the prowl, however my question is whether this applies to user-TAMPERABLE data?

So if we have an url such as ".../?id=1", would it be necessary to prepare any statement using $id or would URL encoding remove the threat?

Joe

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:21:35.680

Why **wouldn't** you use prepared statements / paramaterised queries for all situations where there is external/variable input?

The only queries you can *trust* are those where every element is hardcoded, or derived from hardcoded elements within your application.

Do not even trust data that you have pulled from your own database. This counts as external / variable data. A sophisticated attack can use more vectors than a simple "modifying a query string parameter".

I think for the tiny amount of extra code overhead, it is completely worth the peace of mind you will get from *knowing* your queries are protected.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:19:53.173

Url encoding would not remove the threat.

Anything that is touchable by the user should be treated as unsafe and a potential threat. You query by `id` as such not validating it and just shoving it straight into a query can still cause the same injection problems as not using PDO at all.

# php - mssql_bind 和 fatala 错误只有变量可以通过引用传递

> ID：11881158
> 
> 赞同：1
> 
> 时间：2012-08-09T10:15:00.257
> 
> 标签：php, sql-server, php-mssql

我想通过 php 调用一个 mssql 过程

```
$link = mssql_connect($this->serverName, $this->user, $this->password);
    mssql_select_db($this->db);

    // Create a new statement
    $stmt = mssql_init($this->owner . '.buf_ins_pilot', $link);

    // Bind values here
    // (polaczenie, nazwa, wartosc, typ, output, null)
    mssql_bind($stmt, "@ach_kod_systemu", "", SQLVARCHAR); 
```

我得到

```
Fatal error: Only variables can be passed by reference 
```

它与 mssql_bind 在线。我正在为此寻找一整天的解决方案，但我不知道我做错了什么。几乎是从 php 手册中复制/粘贴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:24:42.000

Ofc 我应该读更多ceraful。该死的，我整天都在读同样的东西，并没有注意到它

它应该看起来像这样

```
$variable = "";
mssql_bind($stmt, "@ach_kod_systemu", $variable, SQLVARCHAR); 
```

# sql - 具有多列和动态列名的反透视表

> ID：11881162
> 
> 赞同：3
> 
> 时间：2012-08-09T10:15:18.523
> 
> 标签：sql, dynamic, multiple-columns, unpivot, dynamic-columns

我正在尝试取消透视具有多行和多列的表。每行需要提取到具有特定列的 2 行，列名需要重命名，并且需要根据所选列添加新列！

我包括之前和之后的示例数据和设置数据的脚本。

```
 CREATE TABLE #tmpProducts (
        ProductId INT,
        ProductName nVARCHAR(100),
        B2B_GrossRevenue DECIMAL(10,2),
        B2B_DirectCost DECIMAL(10,2),
        B2B_NetRevenue DECIMAL(10,2),
        B2C_GrossRevenue DECIMAL(10,2),
        B2C_DirectCost DECIMAL(10,2),
        B2C_NetRevenue DECIMAL(10,2)
    )

    INSERT INTO #tmpProducts SELECT 1, 'Product1',1545.00,406.25,1138.75,195.00,35.10,159.90
    INSERT INTO #tmpProducts SELECT 2, 'Product2',902.00,189.00,713.00,3280.00,590.40,2689.60
    INSERT INTO #tmpProducts SELECT 3, 'Product3',15665.00,3988.39,11676.61,6247.00,1124.46,5122.54
    INSERT INTO #tmpProducts SELECT 4, 'Product4',736.00,196.16,539.84,2395.00,431.10,1963.90

    SELECT * FROM #tmpProducts
    DROP TABLE #tmpProducts

    CREATE TABLE #tmpProducts2 (
        ProductId INT,
        ProductName nVARCHAR(100),
        [Type] nVARCHAR(3),
        GrossRevenue DECIMAL(10,2),
        DirectCost DECIMAL(10,2),
        NetRevenue DECIMAL(10,2)
    )

    INSERT INTO #tmpProducts2 SELECT 1, 'Product1','B2B',1545.00,406.25,1138.75
    INSERT INTO #tmpProducts2 SELECT 1, 'Product1','B2C',195.00,35.10,159.90
    INSERT INTO #tmpProducts2 SELECT 2, 'Product2','B2B',902.00,189.00,713.00
    INSERT INTO #tmpProducts2 SELECT 2, 'Product2','B2C',3280.00,590.40,2689.60
    INSERT INTO #tmpProducts2 SELECT 3, 'Product3','B2B',15665.00,3988.39,11676.61
    INSERT INTO #tmpProducts2 SELECT 3, 'Product3','B2C',6247.00,1124.46,5122.54
    INSERT INTO #tmpProducts2 SELECT 4, 'Product4','B2B',736.00,196.16,539.84
    INSERT INTO #tmpProducts2 SELECT 4, 'Product4','B2C',2395.00,431.10,1963.90

    SELECT * FROM #tmpProducts2
    DROP TABLE #tmpProducts2 
```

我已经尝试过了，但我无法通过第二列，我不确定如何添加带有特定文本的新列，（可能是动态 sql，但如果可能的话尽量避免这种情况）

这是我尝试的开始，任何帮助将不胜感激。

```
SELECT  ProductId, ProductName,GrossRevenue
        FROM    (
                    SELECT ProductId, ProductName, B2B_GrossRevenue,B2C_GrossRevenue FROM #tmpProducts
                ) as t
            UNPIVOT ( GrossRevenue for test IN (B2B_GrossRevenue,B2C_GrossRevenue)) AS unpvt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T10:19:30.653

你只是继续不转动

```
 SELECT  ProductId,ProductName, Substring(col1,1,3) as type,  GrossRevenue, DirectCost, NetRevenue
    FROM    ( 
        SELECT * FROM #tmpProducts 
    ) as t 
    UNPIVOT ( GrossRevenue for col1 IN (B2B_GrossRevenue,B2C_GrossRevenue)) AS unpvt 
    unpivot ( DirectCost for col2 in (B2b_DirectCost, B2c_DirectCost)) up2
    unpivot ( NetRevenue for col3 in (B2b_NetRevenue, B2c_NetRevenue)) up3
where SUBSTRING(col1,1,3)=SUBSTRING(col2,1,3)
and  SUBSTRING(col1,1,3)=SUBSTRING(col3,1,3) 
```

并加入 col 列以过滤掉不匹配

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:55:15.907

这是使用动态 SQL 执行此操作的一种方法。这将允许您在执行时获取所有列。然后，如果您有任何数据更改，您将不必更改查询。这会同时执行 an`UNPIVOT`和`PIVOT`：

```
DECLARE @colsUnPivot AS NVARCHAR(MAX),
    @colsPivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @colsUnPivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('tmpProducts') and
               C.name like 'B2%'
         for xml path('')), 1, 1, '')

SET @colsPivot = stuff((select DISTINCT ','+quotename(right((C.name), len(C.name)-4))
         from sys.columns as C
         where C.object_id = object_id('tmpProducts') and
               C.name like 'B2%'
         for xml path('')), 1, 1, '')

set @query 
  = ' SELECT ProductId, ProductName, [type], ' + @colsPivot +'
      FROM
      (
        SELECT ProductId, ProductName, substring(field, 1, 3) [type]
                ,  value, right((field), len(field)-4) as col
        from tmpProducts
        unpivot 
        (
           value
           for field in (' + @colsUnPivot + ')
        ) unpvt 
      ) x
      PIVOT
      (
        sum(value)
        FOR col IN (' + @colsPivot +')
      )p'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/eef9f/26)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T20:20:09.340

如果您希望围绕多个组进行旋转，也可以执行以下操作：

```
Select *
  from table
  unpivot include nulls ( (test_name, test_date) for col_nm in ( (test1, date1) as 'test_val1'
                                                                ,(test2, date2) as 'test_val2'
                                                                ,(test3, date3) as 'test_val3'
                                                               )
                     ) 
```

# mysql - 包含“The”的字符串的文本操作

> ID：11881163
> 
> 赞同：2
> 
> 时间：2012-08-09T10:15:19.210
> 
> 标签：mysql, text-manipulation

我在 MySQL 数据库中有一个表，其中包含这样的数据；

```
ID  text
1   Action Jackson
2   The impaler
3   The chubby conquistador
4   Cornholer 
```

我想按字母顺序显示它们减去前导的“The”。这就是我想出的有效方法。

```
SELECT ID, CASE LEFT(l.text, 4) WHEN "The " THEN CONCAT(RIGHT(l.text, LENGTH(l.text) - 4), ", The") ELSE l.text END AS "word"
FROM list l 
```

这个解决方案似乎有点笨拙，有人有更优雅的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:20:02.383

我认为这就是你要找的：

```
SELECT ID,
       text
FROM list l
ORDER BY TRIM(LEADING 'The ' FROM text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:20:02.993

如果可以的话，我会考虑对您的数据进行一些重组。依靠 mysql 索引和适当的排序而不是像这样动态地进行排序要好数百倍。

添加一个删除“The”的字段并对其进行排序怎么样？您可以通过几个触发器确保此辅助字段始终正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T10:20:10.503

```
SELECT TRIM(LEADING 'The' FROM text) as word 
FROM list 
ORDER BY TRIM(LEADING 'The' FROM text) 
```

# python - 按行切片 Pandas DataFrame

> ID：11881165
> 
> 赞同：41
> 
> 时间：2012-08-09T10:15:27.970
> 
> 标签：python, pandas, slice

我正在处理`hdf = pandas.HDFStore('Survey.h5')`通过 pandas 包从 h5 文件加载的调查数据。其中`DataFrame`，所有行都是单个调查的结果，而列是单个调查中所有问题的答案。

我的目标是将这个数据集缩小到一个更小的数据集，`DataFrame`只包括在某个问题上具有某个描述的答案的行，即该列中的所有值都相同。我能够确定具有此条件的所有行的索引值，但我找不到如何*删除*这些行或仅使用这些行创建一个新的 df。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-09T11:26:08.873

```
In [36]: df
Out[36]:
   A  B  C  D
a  0  2  6  0
b  6  1  5  2
c  0  2  6  0
d  9  3  2  2

In [37]: rows
Out[37]: ['a', 'c']

In [38]: df.drop(rows)
Out[38]:
   A  B  C  D
b  6  1  5  2
d  9  3  2  2

In [39]: df[~((df.A == 0) & (df.B == 2) & (df.C == 6) & (df.D == 0))]
Out[39]:
   A  B  C  D
b  6  1  5  2
d  9  3  2  2

In [40]: df.ix[rows]
Out[40]:
   A  B  C  D
a  0  2  6  0
c  0  2  6  0

In [41]: df[((df.A == 0) & (df.B == 2) & (df.C == 6) & (df.D == 0))]
Out[41]:
   A  B  C  D
a  0  2  6  0
c  0  2  6  0 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-12-11T03:14:24.630

如果您已经知道可以使用的索引`.loc`：

```
In [12]: df = pd.DataFrame({"a": [1,2,3,4,5], "b": [4,5,6,7,8]})

In [13]: df
Out[13]:
   a  b
0  1  4
1  2  5
2  3  6
3  4  7
4  5  8

In [14]: df.loc[[0,2,4]]
Out[14]:
   a  b
0  1  4
2  3  6
4  5  8

In [15]: df.loc[1:3]
Out[15]:
   a  b
1  2  5
2  3  6
3  4  7 
```

# java - 绘制到画布时应用程序崩溃，等待，然后再次绘制

> ID：11881166
> 
> 赞同：0
> 
> 时间：2012-08-09T10:15:35.557
> 
> 标签：java, android

所以，我试图画到画布上，

```
canvas.drawBitmap(bmp, 0, 0, null); 
```

即使什么都没有，它也能完美运行。当我尝试某种计时器时，它会崩溃。我只想放两张图片，一个接一个地展示，所以图片1，然后图片2，然后做其他任何事情。那么，如果有人可以提供帮助？

# visual-studio - 在 VisualStudio 2010 上使用 v90 平台工具集

> ID：11881173
> 
> 赞同：9
> 
> 时间：2012-08-09T10:15:54.167
> 
> 标签：visual-studio

在我们公司的软件开发中，我们主要使用 VisualStudio 2010（平台工具集 v100）。我们遇到了一种情况，我们需要使用一些组织不善的第三方 SDK，这些 SDK 是使用 VisualStudio 2008 (V90) 编译的，而在“v100”平台工具集中工作时，该 SDK 无法正常运行。

*我所说的“组织不善”的意思是......例如，想象一个 SDK 导出函数，其中包含类似“std::string”的东西。*

解决方案是创建一个我们使用 VS2010 编译的“包装器”dll，但带有“平台工具集 v90”选项。但要让“Platform Toolset v90”正常工作，我们需要安装 VisualStudio 2008。

**我的问题是**：有没有合法的方式在 VS2010 中使用 v90 平台工具集而不购买 VisualStudio 2008？也许有某种 v90“工具包”或我们可以使用的东西？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:12:21.493

正如 user1240436 在他的评论中所说，也应该可以安装[Microsoft Platform SDK](http://en.wikipedia.org/wiki/Microsoft_Windows_SDK)。我认为 v6.0 及更高版本包含 VC 9.0 及其环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:04:26.787

据我所知，应该可以使用[Visual C++ 2008 Express Edition](http://www.microsoft.com/visualstudio/en-us/products/2008-editions/express)

它只需要安装在编译机上，其他一切都可以通过VS2010完成。（这样您还可以构建多项目解决方案等）

# oauth - FT 无法与 Google Apps 脚本一起正常工作

> ID：11881174
> 
> 赞同：1
> 
> 时间：2012-08-09T10:15:58.743
> 
> 标签：oauth, google-apps-script, google-fusion-tables

我创建了一个库，其中包含将数据插入融合表的函数。这些函数工作正常。

然后，我创建了一个包含这个库的新 GAS 项目。当我尝试调用库函数在 FT 中插入数据时，我总是获得“Authorizacion Requires”。我一直授予授权，但它不起作用（我是所有 GAS 项目和 FT 的所有者）。

这是我在日志中看到的网址。oAuth 参数正确： UrlFetchApp.fetch([https://www.google.com/fusiontables/api/query, {oAuthServiceName=fusiontables, payload=sql=INSERT INTO 1MzzGAWuSZv_A1ETirCEHE8xWM5uBu7f3bJ0VPSc ('idProyecto','tipoNotificacion','idDocumento ','fechaSolicitud','estado') values('dcccc','Eliminación IC','','Thu Aug 16 2012 13:36:41 GMT+0200 (CEST)','0'), oAuthUseToken=always , 方法=发布}])

问候

# jquery - 通过单击使用 jQuery 动态添加的按钮添加新元素

> ID：11881182
> 
> 赞同：0
> 
> 时间：2012-08-09T10:16:29.640
> 
> 标签：jquery

我有一个用于在 containerDivs 中添加动态内容的 jQuery 脚本。[http://jsfiddle.net/Lijo/srFkJ/2/](http://jsfiddle.net/Lijo/srFkJ/2/)

这个 div 元素结构被添加到 HTML 页面的多个位置。请单击小提琴中的第一个和第二个按钮以查看此内容。

动态脚本将一个名为“查看收件人”的按钮添加到 HTML。当单击任何“查看收件人”按钮时，需要将一个新的 Div 元素（小提琴代码中的 childHTML）添加到相应的 logRow div（黄色背景）中。我们应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:32:27.370

您可以向 中添加实时侦听器`.viewRecipientsButton`，即使添加侦听器时不存在的按钮也会触发

```
$('.viewRecipientsButton').live('click', function() {
    $(this).closest('.logRow').append($(childHTML));
}); 
```

[演示](http://jsfiddle.net/sJWHA/)

请注意，`live`这些天已弃用，但由于您在文档中包含 jQuery 1.4.1，我想这是一个要求。

# c# - LINQ 查询处理中的错误

> ID：11881183
> 
> 赞同：1
> 
> 时间：2012-08-09T10:16:30.173
> 
> 标签：c#

实际上，我正在尝试按城市对学生列表进行分组。当我执行此操作时，我在 s2.City 附近的 LINQ 语句中出现“对象引用”错误。

```
class Groupby
    {
        Student[] s = new Student[10];

        public Groupby()
        {
            s[0] = new Student("Manikandan", "Jayagopi", "Chennai");

            s[1] = new Student("Ganesh", "Bayyanna", "Bangalore");

            s[2] = new Student("Laxman", "Bharghav", "Hyderabad");

            s[3] = new Student("Dinesh","Vellaiyan","Pune");

            s[4] = new Student("Natarajan","Nallathambi","Chennai");
        }

        public void Group()
        {                
            var groupQuery = from s2 in s
                             group s2 by s2.City;

            foreach (Student s1 in groupQuery)
                Console.WriteLine(" {0}", s1.FirstName);

        }
    }

class Program
    {
static void Main()
        {            
            Groupby objGroupby = new Groupby();

            objGroupby.Group();

            Console.ReadLine();
        }
    } 
```

谁能帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T10:18:43.273

您有一个包含 10 个项目的数组，并且只初始化了 5 个。另外 5 个是`null`因为数组具有固定长度。这意味着`s2.City`将导致`NullReferenceException`. 所以其中之一：

*   不要超大数组：

    ```
    Student[] s = new Student[5]; 
    ```

*   使用 a`List<T>`而不是数组：

    ```
    List<Student> s = new List<Student>();
    ///
    s.Add(new Student { ... }); // etc 
    ```

*   检查`null`：

    ```
    var groupQuery = from s2 in s
                     where s2 != null
                     group s2 by s2.City; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:21:01.627

You create an array with size 10, you only fill the array with 5 objects, so indici 5 to 9 are NULL references. Later, you group by a property of the objects, and voila, thats where it goes wrong, since you're trying to read a property of a NULL reference.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:30:07.107

```
public void Group()
    {
        var groupQuery = from s2 in s
                         where s2 != null
                         group s2 by s2.City;

        foreach (var s1 in groupQuery)
        {
            Console.WriteLine("Group: {0}", s1.Key);
            foreach(var s in s1)
            {
                Console.WriteLine("Student: {0}", s.FirstName);
            }
        }

    } 
```

您必须遍历组，然后才能访问该组中的学生。

希望有帮助。

# jquery-mobile - 为什么试图加载 ajax-loader.gif 而不是 ajax-loader.png？

> ID：11881184
> 
> 赞同：6
> 
> 时间：2012-08-09T10:16:33.743
> 
> 标签：jquery-mobile

我已经在本地安装了 jQuery mobile。

当我调用该方法时：`$.mobile.showPageLoadingMsg();`我收到一条错误消息：css/images/ajax-loader.gif 404（未找到）

文件 css/images/ajax-loader.png 确实存在。这个方法不应该引用这个文件吗？

一个可能的解决方案是我只需添加一个同名的 ajax 加载器，但它应该可以开箱即用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-06-24T21:03:55.710

我非常简单地解决了它，只需下载文件`ajax-loader.gif`（[此处](http://code.jquery.com/mobile/1.4.2/images/ajax-loader.gif)）并将其放在错误信号所在的本地项目文件夹中。在你的情况下`css/images/ajax-loader.gif`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T10:24:30.753

这是您的问题的答案[为什么 jQuery Mobile 1.1-rc1 使用 .gif 作为加载图标（再次）？](https://stackoverflow.com/questions/9939745/why-does-jquery-mobile-1-1-rc1-use-a-gif-for-the-loading-icon-again).

动画 gif 比 CSS 动画更受支持，但您可以根据需要切换到 PNG。jQM 只是默认为 .gif

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:26:14.320

我遇到了类似的问题，但仅更改“ajax-loader.gif”的文件权限就为我解决了这个问题。

它被设置为“所有人”#mac 的“禁止访问”

# java - 间隔处理 Arraylist

> ID：11881190
> 
> 赞同：0
> 
> 时间：2012-08-09T10:16:53.000
> 
> 标签：java, arraylist

我有一个字符串数组列表，其大小可能会有所不同。

```
List<String> strList1 = new ArrayList<String>(); 
```

对于每个字符串，我调用了一个方法**updateDetails(strList1)，**该方法对其进行处理并根据某些逻辑打印一个操作。

我想为第一个字符串调用上述方法 updateDetails(strList1)，然后以固定间隔调用 5（包括第一个 1）等，如下所示

间隔为 1、5、10、50、100、200、1000

o/p（如果 strList1 大小为 25）应该类似于：

```
Result for first 1:
Result for first 5:..
Result for first 10:..
Result for total 25 : 
```

o/p（如果 strList1 大小为 9）应该类似于：

```
Result for first 1:..
Result for first 5:..
Result for total 9:.. 
```

怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:22:02.453

You can avoid duplicates with

```
int len = strList1.size();
NavigableSet<Integer> sizes = new TreeSet<>();
sizes.addAll(Arrays.asList(1, 5, 10, 50, 100, 200, 1000, len));
for(int size: sizes.lower(len+1)) {
    List<String> list2 = strList1.subList(0, size);
    // process list2
} 
```

* * *

If duplicates are not a problem.

```
int len = strList1.size();
for(int size: new int[] { 1, 5, 10, 50, 100, 200, 1000, len }) {
    if(size > len) continue;
    List<String> list2 = strList1.subList(0, size);
    // process list2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:43:16.053

我认为 - 稍微猜测一下`updateDetails()`- 你应该将其签名更改为：

```
Results updateDetails(Results accumulatedResults, List<String> items); 
```

适当地定义您自己的 Results 类并为其编写一个`toString()`。`updateDetails`根据之前的结果和新列表计算结果。例如，如果它应该计算字符串长度的总和：

```
Results updateDetails(Results accumulatedResults, List<String> items) {
     int sum = accumulatedResults.getSum();
     for(String item : items) {
        sum += item.length();
     }
     return new Results(sum);
} 
```

这意味着您不会重复可能昂贵的计算。

然后你的代码需要重复调​​用它：

```
Results results = new Results(); // start with an empty one
results = updateDetails(results,strings.subList(0,1));
System.out.println(results);
results = updateDetails(results,strings.subList(1,5));
System.out.println(results);
results = updateDetails(results,strings.subList(5,10));
System.out.println(results); 
```

... 等等。请注意，我认为让函数返回一个可以打印的值要比让函数自己进行打印要好得多。它更可重用，更可测试。

当然，您可以循环执行此操作：

```
Results results = new Results(); // start with an empty one
int[] sizes = new int[] { 1, 5, 10, 25, 50, 100, 200, 1000 };
int last=0;
for(int i = 0; i<size.length; i++) {
    int size = sizes[i];
    results = updateDetails(results,strings.subList(last,size));
    System.out.println(results);
    last = size;
} 
```

这就是基础。正如所写的那样，对于小于 1000 的输入列表，它将失败。我将把它作为练习留给你：

*   检查 size > strings.size() + 1
*   如果是这样，将大小调整为 strings.size() + 1 并使其成为循环的最后一次迭代

（+1 因为 List.subList() 的工作方式）

您还需要考虑超过 1000 的输入列表会发生什么。也许最好有一个`sizeForIteration(int iteration)`方法来处理 的任意大值`iteration`，而不是简单的数组查找。

* * *

一个更简单的算法是将“报告点”的知识放入您的 updateDetails 逻辑中。

```
for(int i=0; i<list.size; i++) {
    // do something with list.get(i)
    if( sizes.contains(i) {
        System.out.println(something);
    }
}
System.out.println(something); 
```

我的主要答案虽然更复杂，但我认为更灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T10:22:36.963

这些方面的东西会满足您的要求吗？

```
int[] intervals = new int[] {1, 5, 10, 50, ...}
for (int interval : intervals)
{
    for (int i = 0; i < interval && i < strList1.size(); i++)
    {
        // Do stuff.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:27:23.650

如果你想处理 0 到 1、2 到 9、9 到 15 等，你可以这样做（这是 c#，但在 Java 中非常相似）

```
 List<String> strList1 = new List<String>{"alfa","beta","gamma"};
        List<int> intervals= new List<int>{1,5,10,25,30};
        int index = 0, j=0;
        while (index<strList1.Count)
        {
            int from = index, to = index + intervals[j];
            doStuff(strList1, from, to);
            index +=intervals[j];
            j++;
        } 
```

# asp.net-mvc - 如何使用淘汰赛发布 viewModel 而不是模型 MVC

> ID：11881191
> 
> 赞同：1
> 
> 时间：2012-08-09T10:17:06.627
> 
> 标签：asp.net-mvc, knockout.js

我有以下代码：

索引.cshtml：

```
@using System.Web.Script.Serialization
@model MvcApplication3.ViewModels.PersonViewModel

<script src="../../Scripts/knockout-2.1.0.js" type="text/javascript"></script>
    <!-- This is a *view* - HTML markup that defines the appearance of your UI -->
<form data-bind="submit: save">

    <p>First name: <input data-bind="value: firstName" /></p>
    <p>Last name: <input data-bind="value: lastName" /></p>

    <table>
        <thead>
            <tr>
                      <th>Name</th>
                  </tr>
        </thead>
        <tbody data-bind="foreach: activities">
            <tr>
                <td><input data-bind="value: Name" /></td>
            </tr>    
        </tbody>
    </table>

    <button type="submit">Submit</button>
</form>

<script type="text/javascript">

    var initialData = @Html.Raw(new JavaScriptSerializer().Serialize(Model));

    // This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
    var viewModel = { 
        firstName : ko.observable(initialData.Person.FirstName),
        lastName : ko.observable(initialData.Person.LastName),
        activities : ko.observableArray(initialData.Person.Activities),

        save: function() {
            $.ajax({
                type: "POST",
                url: "/Home/Index",
                data: ko.toJSON(viewModel),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data) {
                    $("#resultCount").html(data);
                }
            });
        }
    }

    // Activates knockout.js
    ko.applyBindings(viewModel);

</script> 
```

家庭控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Ahb.Insite.HerdRegistration.WebUI;
using MvcApplication3.Models;
using MvcApplication3.ViewModels;

namespace MvcApplication3.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            var person = new Person {FirstName = "John", LastName = "Cool"};

            person.Activities = new List<Activity> { new Activity { Name = "Skiing" } };

            var personViewModel = new PersonViewModel (person);

            return View(personViewModel);
        }

        [HttpPost]
        public ActionResult Index(Person person)
        {
            //Save it

            return View();
        }
    }
} 
```

人物视图模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using MvcApplication3.Models;

namespace MvcApplication3.ViewModels
{
    public class PersonViewModel
    {
        public Person Person { get; set; }
    }
} 
```

基本上，它的作用是为一个人的名字、姓氏和他们参与的列表中的任何活动的名称提供一个可编辑的模板。

所以这个人是通过 personViewModel 发送的。

我想在这里做的改变是，我不想发回一个人，而是想把这个人发回一个 personViewModel 中。

有谁知道如何更改代码以促进这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:32:24.547

这取决于您的 PersonViewModel，但如果是这样的话：

```
class PersonViewModel
{
    public Person Person { get; set; }
    // other properties
} 
```

然后就像改变一样简单

```
data: ko.toJSON(viewModel), 
```

到

```
data: ko.toJSON( { Person: viewModel, // Other properties } ), 
```

希望这可以帮助。

# c# - 检查 xml 节点是否包含子子节点

> ID：11881192
> 
> 赞同：5
> 
> 时间：2012-08-09T10:17:11.847
> 
> 标签：c#, xml, xpath

有没有办法检查我正在寻找的节点`XPATH`是否包含子节点？

我有一个特定节点有时有子节点的 xml 文件，有时则没有！如何检查这个，所以我不会得到太多 NullReferenceExceptions ！？

检查以下示例：

```
var text = xml.SelectSingleNode("/Document/Tests/Test").InnerText; 
```

如果我正在使用的当前 xml 文件确实有`Test`节点在`Tests`其工作正常，但在另一个 xml 文件中，该`Tests`节点不包含任何内容，并且它没有明显的原因就在那里！？

XPATH 中是否有执行此操作的命令？就像是！！：

`"/Document/Tests[NodeExist(Test)]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:28:33.730

`/Document/Tests[Test]`将为您`Tests`提供只有一个`Test`节点作为子节点的节点。

您还可以运行选择`/Document/Tests`并稍后调用`element.GetElementsByTagName("Test").Count > 0`以确保至少有一个`Test`节点。这样，您可以以编程方式显示空字符串或错误消息，而不会出现异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:25:05.267

是的，您可以使用以下 xpath "/Document/Tests[node()]" 这将为您提供所有具有子节点的测试节点。您可以进一步改进以在此处提供节点名称以及节点类型。

如果您想要具有名为 Test 的子节点的特定节点，请使用此“/Document/Tests[Test]”

您可以在 MSDN [http://msdn.microsoft.com/en-us/library/ms256086.aspx中找到更多示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:20:32.447

A real quick Google gave this:

```
/Document/Tests/not(*) 
```

# bi-publisher - 如何更改 Oracle BI Publisher 报表文件名？

> ID：11881193
> 
> 赞同：1
> 
> 时间：2012-08-09T10:17:13.100
> 
> 标签：bi-publisher

我正在使用 Oracle BI Publisher 11.1.1.6 生成报告。所有生成报告的文件名（excel、word、pdf）都是“xdo”（例如xdo.doc）。如何将报告文件名更改为其他值？（我的意思是报告，而不是报告工作）。

简单来说，我点击生成报告，下载了 xdo.doc 文件。例如，我希望该文件名是 kitten.doc。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:27:08.687

创建报告模板`kitten.doc`并将其上传到`Create layout`屏幕上。使用新模板作为模板。现在，当您单击生成报告时，它应该被命名为模板。但是，如果您安排报告运行并通过电子邮件发送，您可以在该`attachment name`字段中提供不同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:29:52.507

问题是我的报告名称包含立陶宛字母（ą、č、ę 等）。当我从报告名称中删除它们时，该报告生成的文件`report name_layout name`正如 Annjawn 所说的那样，但不像以前那样 xdo.* 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-09T14:09:41.900

'Spanish (Chile)' LOCALE, 'PDF' OUTPUT_FORMAT, table.description OUTPUT_NAME, ------ 这里名字文件输出！'EMAIL' DEL_CHANNEL,

# jquery - inArray() 不适用于循环的第一项

> ID：11881196
> 
> 赞同：1
> 
> 时间：2012-08-09T10:17:23.873
> 
> 标签：jquery, arrays

我有一些这样的代码，这里是最重要的部分，不能按我的意愿工作。

```
<div class="somediv" data-dummy="class11">some text</div>
<div class="somediv" data-dummy="class12">some flying saucers</div>
<div class="somediv" data-dummy="class13">some crazy jpg</div>

var AllFirstCssClasses = [ 'class11', 'class12', 'class13' ];
var AllSecondCssClasses = [ 'class21', 'class22', 'class23' ];

for (var index = 0; index < $('div.somediv').length; index++){
   var firstCssClass = $('div.somediv').eq(index).attr('data-dummy');
   var index2 = $.inArray(firstCssClass, AllFirstCssClasses);
   $('div.somediv').eq(index).addClass(firstCssClass + ' ' +  AllSecondCssClasses[index2] );
} 
```

我已经完成了一个适用于此示例的小提琴[http://jsfiddle.net/FVVXx/11/](http://jsfiddle.net/FVVXx/11/)，但是此代码在某个时间间隔触发的函数内（它是一个滑块）并且它不像在这个这里的例子。

在我的代码中，第一个 div 的结果总是`<div class="somediv class11 undefined">`undefined 应该是`AllSecondCssClasses[index2]`-> class21

感谢您的回复:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:27:30.020

这就是您应该使用 JQuery 编写算法的方式。如果你能解释你想要做什么，我将能够提供更多帮助。

```
$(function(){
var AllFirstCssClasses = [ 'class11', 'class12', 'class13' ];
var AllSecondCssClasses = [ 'class21', 'class22', 'class23' ];

function getParallelClass( firstClass ){
    return  AllSecondCssClasses[$.inArray(firstClass, AllFirstCssClasses)];
}

$("div.somediv").each(function(index,item){
      var $myDummy = $(this).attr("data-dummy");
      $(this).addClass($myDummy).addClass(getParallelClass( $myDummy) );
});

}); 
```

这是我的[JSFiddle](http://jsfiddle.net/FVVXx/14/)

# jquery - 字符串长度超过 maxJsonLength 属性设置的值

> ID：11881198
> 
> 赞同：26
> 
> 时间：2012-08-09T10:17:32.773
> 
> 标签：jquery, asp.net, webmethod

我正在通过 jQuery 的`ajax`post 方法通过 web 方法加载选项卡内容数据，其中包含大约 200-300 条记录。并在控制台中出现以下错误：

> 错误：Sys.Net.WebServiceFailedException：Sys.Net.WebServiceFailedException：System.InvalidOperationException-- 使用 JSON JavaScriptSerializer 进行序列化或反序列化时出错。字符串的长度超过了 maxJsonLength 属性上设置的值。

像这样更改 Web.config 中属性的长度`maxJsonLength`并没有帮助。

```
<configuration> 
   <system.web.extensions>
       <scripting>
           <webServices>
               <jsonSerialization maxJsonLength="2147483644" />
           </webServices>
       </scripting>
   </system.web.extensions>
</configuration> 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-26T20:52:02.737

JavaScriptSerialzer has a public property named MaxJsonLength according to

[http://msdn.microsoft.com/en-us/library/system.web.configuration.scriptingjsonserializationsection.maxjsonlength.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.scriptingjsonserializationsection.maxjsonlength.aspx)

Now, where you are deserializing your json, use this

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
serializer.MaxJsonLength = Int32.MaxValue; //Or any size you want to use, basically int maxValue is 2GB, you shouldn't need this big json string to deserialize, else you are doing it wrong.
myObject obj = serializer.Deserialize<myObject>(yourJsonString); 
```

And this should work perfectly, I recently figured this out through msdn and solved a problem that was bugging me for long.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-23T18:39:49.777

我知道在我阅读时这是一个非常古老的线程，并且 WebMethod 在 ASP.NET MVC 中并不是真正的东西，所以这有点切题。但是，如果有人碰到它——

如果你使用 ASP.NET MVC 直接调用还有一个替代方法`JavaScriptSerializer`，那就是初始化`JsonResult`并设置`MaxJsonLength`结果本身的属性：

```
 private JsonResult GetReallyBigJsonResult(object data, JsonRequestBehavior requestBehavior)
    {
            return new JsonResult()
            {
                ContentEncoding = Encoding.Default,
                ContentType = "application/json",
                Data = data,
                JsonRequestBehavior = requestBehavior,
                MaxJsonLength = int.MaxValue
            };

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:37:35.557

不知道您的字符串的大小，但也许它仍然超过您设置的最大限制？

理想情况下，ajax 场景仅适用于中小型服务器端调用，而不是获取大量数据，如果您使用异步请求获取大量数据，那么您就是在自找麻烦。

请参阅[此处](http://www.smallworkarounds.net/2009/04/error-during-serialization-or.html)以获取替代方案

# c# - 识别事件键是否为文本（不仅是字母数字）

> ID：11881199
> 
> 赞同：6
> 
> 时间：2012-08-09T10:17:39.127
> 
> 标签：c#, wpf, keyboard-events

我有一个带有事件的文本框，当输入一些文本时应该做的事情。很容易检查它是否是字母数字，如此处所述[我可以确定 KeyEventArg 是字母还是数字？](https://stackoverflow.com/questions/5293287/c-sharp-key-event-key-is-letter)：

```
if ( ( ( e.KeyCode >= Keys.A && e.KeyCode <= Keys.Z ) ||
( e.KeyCode >= Keys.D0 && e.KeyCode <= Keys.D9 ) ||
( e.KeyCode >= Keys.NumPad0 && e.KeyCode <= Keys.NumPad9 ) ) 
```

这种方法的问题是我还应该手动检查`-?!¿[]()`with `Key.OemMinus`、`Key.OemQuestion`等。

有什么方法可以检查它是文本击键还是我应该手动检查（我认为这不是很优雅）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:23:34.930

由于没有其他选项被建议，我使用以下代码来允许几乎所有的文本击键。不幸的是，这取决于键盘，所以它不是很优雅。希望不是应用程序的关键方面，它只是可用性问题。

```
bool isText = (e.Key >= Key.A && e.Key <= Key.Z) || (e.Key >= Key.D0 && e.Key <= Key.D9) || (e.Key >= Key.NumPad0 && e.Key <= Key.NumPad9)
            || e.Key == Key.OemQuestion || e.Key == Key.OemQuotes || e.Key == Key.OemPlus || e.Key == Key.OemOpenBrackets || e.Key == Key.OemCloseBrackets || e.Key == Key.OemMinus
             || e.Key == Key.DeadCharProcessed || e.Key == Key.Oem1 || e.Key == Key.Oem7 || e.Key == Key.OemPeriod || e.Key == Key.OemComma || e.Key == Key.OemMinus
              || e.Key == Key.Add || e.Key == Key.Divide || e.Key == Key.Multiply || e.Key == Key.Subtract || e.Key == Key.Oem102 || e.Key == Key.Decimal; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:27:11.823

此代码只允许数字和“。”：

```
 private void txtJustNumber_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsDigit((char)(e.KeyChar)) &&
            e.KeyChar != ((char)(Keys.Enter)) &&
            e.KeyChar != (char)(Keys.Delete) &&
            e.KeyChar != (char)(Keys.Back))             
        {
            e.Handled = true;
        }
    } 
```

# ruby - 在 Rails 3 的动作控制器中访问多个活动记录

> ID：11881206
> 
> 赞同：0
> 
> 时间：2012-08-09T10:18:14.553
> 
> 标签：ruby, ruby-on-rails-3, rails-activerecord, actionpack

假设我有 2 个模型：1\. user 和 2\. userProfile
我们在 2 个模型之间存在一对一的关系。
然后，我想创建用户控制器并创建用户，其中包含用户名和密码等字段以及用户配置文件中的地址、手机号码等其他详细信息。
**user_id 是 user_profile 中的外键**
然后我在用户中创建了 new.html.erb 视图，以相同的形式呈现上述所有字段。然后我如何将数据分别保存在两个不同的表 user 和 userprofile 中。

我尝试的是
1\. has_one :user_profile in *user.rb*和 belongs_to :user 在*user_profile.rb*
2.accept_nested_attributes_for :user_profile in *user.rb* user_controller:

```

     定义创建
       @user = User.new(params[:user])
       如果@user.save
          @userprofile = @user.create_user_profile(params[:user_profile])
               redirect_to root_url, :notice => "已注册！"     
       别的
          渲染“新”
        结尾
      结尾

```

3\. 然后我得到错误，唯一的用户 ID 是在 user_profile 中创建的，并且更新运行以使 user_id 为零，这是不可能的！所以引发错误：

```
未知列“user_profiles”。在'where子句'中：更新`user_profile`
SET `user_id` = NULL WHERE `user_profiles`.`` 是 NULL

```

**那么出了什么问题以及如何解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:40:21.267

如果您正在使用，`accepts_nested_fields_for`那么您不需要自己管理保存 UserProfile 记录。ActiveRecord 将为您处理它。

要使其正常工作，您需要：

1.  确保你有`accepts_nested_fields_for :user_profile`你的用户模型
2.  更新您的 app/views/users/_form.html.erb 以包含 UserProfile 的表单元素，例如：

    ```
    <%= f.fields_for :user_profile, @user.user_profile do |profile_form| %>
    <%= profile_form.text_field :address %>
    <%= profile_form.text_field :mobile_number %>
    <% end %> 
    ```

3.  更新您`UsersController#new`为用户构建 UserProfile 的操作，例如

    ```
    def new
      @user = User.new
      @user.build_user_profile
      (...)
    end 
    ```

有关更多信息，请参阅[涵盖 Active Record 嵌套属性的 Rails API 文档](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。

# java - 使用 putExtra 将值传递给意图服务

> ID：11881208
> 
> 赞同：19
> 
> 时间：2012-08-09T10:18:17.790
> 
> 标签：java, android, android-intent

在我的主要活动中，我有以下代码：

```
EditText usernameText;
EditText passwordText;
public void sendLogin (View loginview){
    Intent i = new Intent(this, NetworkService.class);
    startService(i);
} 
```

目前，这只是向 NetworkService 发送一个意图，处理如下（截断）：

```
public class NetworkService extends IntentService {

    public NetworkService() {
        super("NetworkService");
    }

    protected void onHandleIntent(Intent i) {

        /* HTTP CONNECTION STUFF */

        String login = URLEncoder.encode("Username", "UTF-8") + "=" + URLEncoder.encode("XXX", "UTF-8");
        login += "&" + URLEncoder.encode("Password", "UTF-8") + "=" + URLEncoder.encode("XXX", "UTF-8"); 
    }
} 
```

现在，我需要弄清楚的是，如何将这些`usernameText`和`passwordText`值传递给`NetworkService`“XXX”，但在 XXX 中`NetworkService`，我还打算（不是双关语）让它处理来自不同地方的多个意图，一个来自登录，例如，使用登录令牌检索有关用户的一些信息。这是我所有的网络都将包含在内的地方。我被告知这是 android 应用程序中的最佳实践，以保持网络分离。

我的问题是：将这两个变量发送到的最佳方法是什么，`NetworkService`以及如何`onHandleIntent`在`NetworkService`ETC）？

对不起，如果答案很简单，但我对应用程序编程很陌生。

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-09T10:44:15.410

```
public void sendLogin (View loginview){
    Intent i = new Intent(this, NetworkService.class);
    i.putExtra("username", usernameText.getText().toString());
    i.putExtra("password", passwordText.getText().toString());
    startService(i);
} 
```

然后在您的 IntentService 中：

```
@Override
    protected void onHandleIntent(Intent intent) {
    String username = intent.getStringExtra("username");
    String password = intent.getStringExtra("password");
    ...
} 
```

IntentServices 旨在处理发送给它的多个请求。换句话说，如果你继续使用 发送意图`startService(intent)`，你的 NetworkService 将继续`onHandleIntent`调用它的方法。在引擎盖下，它有一个意图队列，它将一直工作直到完成。因此，如果您继续以当前方式发送意图，但通过`putExtra`方法设置了某些标志，那么您可以检测到您的 NetworkService 应该做什么并采取适当的行动。例如，为您的意图设置一个额外的布尔值`login`，在您的意图服务中查找通过设置的标志`intent.getBooleanExtra("login")`。如果为真，请执行您的登录操作，否则查找您设置的其他标志。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T10:39:20.043

**1.****发送** 和`usernameText`执行此`passwordText`操作`NetworkService`....

```
Intent i = new Intent(Your_Class_Name.this, NetworkService.class);
   i.putExtra("username", usernameText.getText().toString());
   i.putExtra("password", passwordText.getText().toString());
   startService(i); 
```

**2.**要**接收数据**，`NetworkService`请执行此操作....

```
Intent intent = getIntent();
   String userName = intent.getExtras().getString("username");
   String password = intent.getExtras().getString("password"); 
```

# c# - c# 中的 Oracle 查询执行与 Foreach 循环

> ID：11881212
> 
> 赞同：-2
> 
> 时间：2012-08-09T10:18:32.120
> 
> 标签：c#, oracle, foreach

以下哪种方法更好？

Oracle 查询执行（在 TOAD 中需要 6 秒完成）和循环遍历 C# 中包含 100 条记录的数据表

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:21:16.797

usually the Database can better optimize the query, which makes it faster than looping in C#

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:30:18.033

如果您有 C# 中的数据，则表明您已执行数据库查询以首先获取该数据。

所以：

```
Execute DB query
Sending results to application
Loop over the data. 
```

如果您在数据库中的查询中完成了所有操作：

```
Execute DB query
Send results 
```

从逻辑上讲，第二种选择将涉及更少的工作。您还可以尝试更好地优化原始数据库查询以减少获取时间。

希望能帮助到你...

# html - 新手级别 - DataURLs 会自动保存到特定位置吗？

> ID：11881214
> 
> 赞同：0
> 
> 时间：2012-08-09T10:18:37.307
> 
> 标签：html, drag-and-drop, data-url

我是一个完全的新手，正在做一些关于 HTML5 拖放游戏的工作。我正在查看编码教程，当用户按下按钮时，它将保存游戏的图像。画布图像保存为 DataURL。我有点明白这意味着什么。但我的问题是：图像保存到哪里（因为您似乎不需要指定位置）以及保存到该位置的图像是否始终具有唯一的 URL（即从不同游戏保存的图像不会覆盖）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:24:05.160

Data Url 只是代表图像的 Base64 编码字符串。我不确定您的确切实现，但您几乎总是必须将该字符串保存在某个持久位置。例如，如果您想将图像保存在用户的机器上而不是服务器上，请尝试使用[本地存储。](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFUQFjAB&url=http://www.w3schools.com/html5/html5_webstorage.asp&ei=fI8jUKPbHcuxrAf8vYG4Ag&usg=AFQjCNEuM20wo8w5KZczd08LTptJk3-Wjg "本地存储")

否则，您始终可以通过 Ajax 将 Base64 编码的字符串 POST 到您自己的服务器并将其保存在文件或数据库中。

# vb.net - 具有多个集合的 LINQ 嵌套分组

> ID：11881218
> 
> 赞同：0
> 
> 时间：2012-08-09T10:18:44.417
> 
> 标签：vb.net, linq, left-join, linq-group

我目前正在努力在我的对象集合上组装一个 LINQ 查询：Persons, Cars

每个人可以拥有多辆汽车。

我想选择人员中的所有人员，并选择此人拥有的所有汽车。到目前为止我写的查询是：

```
from c in persons,d in cars 
    where c.id = d.ownerID 
    group by c.Firstname into MG = tolist() 
```

但它只返回有车的人。如果一个人没有车，他不在列表中。我无法弥补正确的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:56:58.657

尝试：

```
List<person> plist = new List<person>();
        plist.Add(new person(1, "a"));
        plist.Add(new person(2, "b"));
        plist.Add(new person(3, "c"));
        plist.Add(new person(4, "d"));

        List<cars> clist = new List<cars>();
        clist.Add(new cars(1, "c1"));
        clist.Add(new cars(1, "c2"));
        clist.Add(new cars(1, "c5"));
        clist.Add(new cars(2, "c1"));
        clist.Add(new cars(3, "c1"));
        clist.Add(new cars(3, "c5"));
        clist.Add(new cars(3, "c3"));
        clist.Add(new cars(3, "c2"));
        clist.Add(new cars(4, "c2"));
        clist.Add(new cars(4, "c5"));

        var result = from p in plist
                join c in clist on p.id equals c.ownerID into k
                from s in k.DefaultIfEmpty()
                select new { p.firstName , carName = (s == null ? String.Empty :s.name)};

string sss = "";
 foreach (var v in result)
 {
      sss+= ( v.firstName + " : " + v.carName +  " >> "+"\n");
 }
 textBox1.Text = sss; 
```

和类是：

```
class person
{
    public int id;
    public string firstName;

    public person(int id1, string name)
    {
        id = id1;
        firstName = name;
    }
}

class cars
{
    public int ownerID;
    public string name;

   public cars(int id,string name1)
    {
        ownerID = id;
        name = name1;
    }
} 
```

# php - PHP登录系统。安全的？

> ID：11881220
> 
> 赞同：-1
> 
> 时间：2012-08-09T10:18:46.953
> 
> 标签：php, security, login

我正在构建一个小型 cms 系统。用户可以登录并在数据库中编辑、删除或创建新项目。

我的问题是。这个登录系统足够安全吗？

```
<?php 
session_start(); ?>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>.....</title>
</head>

<body>
<?php

    include 'koder.inc.php';

if(!isset($_POST['forsoeg'])){
    $forsoeg = 0;
    $check_user='0';
    $check_pass='0';
} else {
    $forsoeg = $_POST['forsoeg'];
    $check_user = $_POST['username'];
    $check_pass = $_POST['password']; }

    if($check_user != $username || $check_pass != $password)     {
        if($forsoeg >3){
            exit("<p>Wrong password or username <br /><br />
            <a href='admin_logon.php'>back to login</a></p>");}

            $forsoeg ++;  

            ?>
<h1>Login</h1>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="form">
  <p>
    <label for="username">username:</label>
    <br />
    <input title="username:" type="text" name="username"  />
  </p>
  <p>
    <label for="password">Password:</label>
    <br />
    <input title="Skriv dit password" type="text" name="password"  />
  </p>
  <p>
    <input class="knap" type="submit" name="Send" value="Login" />
  </p>
  <input type="hidden" name="forsoeg" value="<?php echo $forsoeg; ?>"  />
</form>
<?php

    } else {
        $_SESSION['logon']="ok";

        echo "Login ok..<br />
        <a href='administration.php'>Go to admin page</a>"; } ?>
</body>
</html> 
```

然后我包括 fil koder.inc.php

```
<?php 

 $username = "test";
 $password = "123456";

?> 
```

在需要有效用户的页面上，我开始页面

```
<?php 
session_start(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:33:12.550

如果用户凭据存储在纯文本文件中，则非常不安全。这种方法在当今的系统中非常少见。我建议您为用户使用数据库并以散列格式存储他们的密码，例如 md5。当您拥有多个用户时，这也更好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:22:50.433

除了已经说明的要点之外，您还存在 HTML 注入漏洞（导致跨站点脚本攻击）：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" 
```

和这里：

```
<input type="hidden" name="forsoeg" value="<?php echo $forsoeg; ?>"  /> 
```

`htmlspecialchars()`每次将文本内容输出到 HTML 标记中时都必须使用。例如：

```
function h($s) {
    echo htmlspecialchars($s, ENT_QUOTES, 'utf-8');
}

...

<form action="<?php h($_SERVER['PHP_SELF']); ?>" ...
<input type="hidden" name="forsoeg" value="<?php h($forsoeg); ?>"  /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T10:36:50.037

如果您要进行多用户设置，则应从纯文本文件迁移，并改用数据库。

为了在数据库中存储密码，您需要首先使用[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)等对其进行加密，然后添加盐，然后再次加密。[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)必须是随机的，将其与密码一起以明文形式保存在数据库中是安全的。

要验证登录，您将从数据库中提取密码，并将其与存储在`$_POST`变量中的密码的加密版本相匹配。

# php - 通过 HTTPS 代理从 URL 下载文件

> ID：11881224
> 
> 赞同：2
> 
> 时间：2012-08-09T10:18:52.680
> 
> 标签：php, image, proxy, download

我需要通过网络代理从两者`http`和协议下载图像。`https`此代理需要身份验证（它需要`username`and `password`）。我怎样才能做到这一点？目前我使用`copy`php的功能来下载文件，但我不知道如何为其设置代理。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:36:51.857

我使用以下代码解决了我的问题：

```
public static function dlFile($url)
{
    $crl = curl_init();
    curl_setopt($crl, CURLOPT_PROXY, "IP:PORT");
    curl_setopt($crl, CURLOPT_PROXYUSERPWD, "USER:PASS");
    curl_setopt ($crl, CURLOPT_URL,$url);
    curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, 300);
    curl_setopt($crl, CURLOPT_HTTPPROXYTUNNEL, true); //IMPORTANT

    $ret = curl_exec($crl);

    curl_close($crl);

    return $ret;
} 
```

# liferay - 如何以编程方式获取 Liferay 默认语言或区域设置？

> ID：11881240
> 
> 赞同：5
> 
> 时间：2012-08-09T10:19:54.220
> 
> 标签：liferay

如何以编程方式获取 Liferay 默认语言或区域设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:10:19.523

检查 com.liferay.portal.kernel.util.LocaleUtil 类方法： LocaleUtil.getDefault() - 返回默认语言环境，LocaleUtil.toLanguageId(locale) - 从语言环境获取语言 ID。

PS 请注意，LocaleUtil 使用 ThreadLocal 来存储默认语言环境，因此如果您在创建的新线程中执行此操作，您应该首先调用 com.liferay.portal.security.auth.CompanyThreadLocal.setCompanyId(long companyId) 方法 - 这个将使用默认语言环境和 timezlone 初始化 LocaleThreadLocal 和 TimeZoneThreadLocal。

# java - 从具有复杂对象的 REST Web 服务返回 JSON 对象

> ID：11881246
> 
> 赞同：5
> 
> 时间：2012-08-09T10:20:24.780
> 
> 标签：java, json, apache, rest, cxf

我公开了一个启用了休息的 Web 服务，它返回`RETURN_OBJ`.

然而，`RETURN_OBJ`它本身包含几个复杂的对象，比如`list`来自其他类的对象、地图等。

在这种情况下，是否会用足够的注释来注释参与的类`@XmlRootElement`和注释 Web 服务？`@Produces("application/json")`

因为只是这样做是行不通的，而且我遇到了`no message body writer found for class`错误。

出现此错误的原因、原因和解决方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:33:31.647

我希望这可能会有所帮助，
以下是返回使用[Gson构建并使用](http://code.google.com/p/google-gson/)[Poster](https://addons.mozilla.org/en-us/firefox/addon/poster/)测试的 json 对象的工作示例， 并且 url 是***domainname:port//Project_name/services/rest/getjson?name=gopi***

随心所欲地构造一个复杂的Object，最后使用Gson转换成json。

```
 @Path("rest")
public class RestImpl {

@GET
@Path("getjson")
@Produces("application/json")
public String restJson(@QueryParam("name") String name)
{
    EmployeeList employeeList = new EmployeeList();
    List<Employee> list = new ArrayList<Employee>();
    Employee e = new Employee();
    e.setName(name);
    e.setCode("1234");
    Address address = new Address();
    address.setAddress("some Address");
    e.setAddress(address);
    list.add(e);
    Employee e1 = new Employee();
    e1.setName("shankar");
    e1.setCode("54564");
    Address address1 = new Address();
    address.setAddress("Address ");
    e1.setAddress(address);
    list.add(e1);
    employeeList.setEmplList(list);

    Gson gson = new Gson();
    System.out.println(gson.toJson(employeeList));
    return gson.toJson(employeeList);

}

@GET
@Produces("text/html")
public String test()
{
    return "SUCCESS";
} 
```

}

PS：我不想为杰克逊和格森之间的战斗放弃单挑；-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:36:47.063

```
@XmlRootElement 
```

您需要使用带有 json 注释而不是 xml 注释的库。例如：杰克逊（[http://jackson.codehaus.org/](http://jackson.codehaus.org/)）。您可以尝试使用 xml writer 编写 json。

```
@Produces("application/json") 
```

当使用 json 注释对类进行注释时，将返回 json。

# node.js - 如何从 node.js 服务器中的传入请求正文中排除 JSON

> ID：11881247
> 
> 赞同：1
> 
> 时间：2012-08-09T10:20:25.410
> 
> 标签：node.js, httpserver

我想将 POST 方法的请求正文中的 JSON 数据发送到将用 node.js 编写的服务器。我试过这样的代码；

```
var http = require('http');
http.createServer(function (req, res) {
    console.log(req.body)
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

我已经用 curl 测试了它；

```
curl -i -v -X POST -d '{"a":5}' http://127.0.0.1:1337 -H "content-type:application/json" 
```

但它说身体是未定义的。

有没有办法从请求中获取 JSON 数据？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:36:26.843

Node.js 是非常低级的开箱即用。要么您必须自己捕获请求正文，要么使用[connect](http://www.senchalabs.org/connect/)之类的东西。

DIY：

```
var http = require('http');
http.createServer(function (req, res) {
    var body = '';
    req.on('data', function(data) {
        body += data;
    });
    req.on('end', function() {
        console.log(body);
    });
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

连接：

```
var connect = require('connect');
connect()
    .use(connect.bodyParser())
    .use(function(req, res) {
        console.log(req.body);
    })
   .listen(3000); 
```

# google-apps-script - Where Are My Google Apps Domains?

> ID：11881250
> 
> 赞同：0
> 
> 时间：2012-08-09T10:20:28.647
> 
> 标签：google-apps-script

We've been using Google Apps for Edu in our University for some time now and we have multiple domain setups. There's a primary domain (uniben.edu e.g john.smith@uniben.edu) and other domains for students (scott.tigger@law.uniben.edu, john.smith@agric.uniben.edu). However, when I try to obtain all users using UserManager.getAllUsers(); it only returns accounts under the primary uniben.edu domain, leaving out accounts created / managed under the other domains.

Using Google App Script, how can I retrieve these other domains and get their users as well. I want to be able to inspect accounts across all our domains. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:29:40.500

没有内置方法可以访问来自另一个域的用户。我不确定它是否会起作用，但您可能会在每个域中创建一个脚本，该脚本返回该域的用户，然后将这些脚本作为库包含在主脚本中。

# android - How to put ListView with some other views into a ScrollView without it collapsing?

> ID：11881252
> 
> 赞同：0
> 
> 时间：2012-08-09T10:20:31.600
> 
> 标签：android, android-listview, scrollview

i have some dynamic list which grow on some inputs i also have tab and some layout above it .and i want to scroll them as well as list grow. in simple words just not load full list but scroll other things as i scroll list. i m doing something like this .

```
 <ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:dividerPadding="5dp"
                android:orientation="horizontal" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0" />

            <FrameLayout
                android:id="@+android:id/realtabcontent"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1" />
        </LinearLayout>
    </TabHost>
</ScrollView> 
```

note i also want to scroll tabs . i m currently using this code

```
public static class Utility {
    public static void setListViewHeightBasedOnChildren(ListView listView) {
        ListAdapter listAdapter = listView.getAdapter(); 
        if (listAdapter == null) {
            // pre-condition
            return;
        }

        int totalHeight = 0;
        for (int i = 0; i < listAdapter.getCount(); i++) {
            View listItem = listAdapter.getView(i, null, listView);
            listItem.measure(0, 0);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = listView.getLayoutParams();
        params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
        listView.setLayoutParams(params);
    }
} 
```

for make a listview but it when i load the screen it focuse the screen from the list not from the tabs. any one knew how to start focus it from the top please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:02:53.407

您的 ListView 将始终独立于其他列表滚动。如果您想让所有内容一起滚动，那么您需要考虑使用 LinearLayout 模仿 ListView 并将每一行添加到布局中。这将强制布局遵循外部滚动视图容器。

# visual-c++ - Visual C++ Runtime Package to metro style

> ID：11881253
> 
> 赞同：1
> 
> 时间：2012-08-09T10:20:37.713
> 
> 标签：visual-c++, windows-8

how can i add Visual C++ Runtime Package to metro style C# app in windows 8? Adding this shows error in project.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:35:48.153

在 Add Reference 对话框中选择 Windows\Extensions 视图，您将看到 Visual C++ Runtime Package

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:03:30.090

有关 C++ 运行时包的更多详细信息，请参阅此博客文章：

[http://blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx)

# asp.net - Simple Concurrency ASP.NET Database

> ID：11881254
> 
> 赞同：0
> 
> 时间：2012-08-09T10:20:39.213
> 
> 标签：asp.net, database, concurrency

Suppose that I have a bank account table with columns customer_id, name, address, and balance. Balance is constantly changing because customer is depositing and withdrawing money. How can I chance customer's address without getting an DBConcurrencyException at the same time?

What is the general approach in this situation, it is not possible for two users to change the SAME cell in a table row but it is possible for them to change different cells in same row AND updating the row with new values without problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:57:17.873

我不确定您是否使用 LINQ，但如果您使用了，那么您应该看看它是如何处理并发的。LINQ 使用乐观并发。所以基本上如果一个用户尝试更新一条记录，并且记录在此期间已经更新，那么就会发生并发冲突。

但是，您可以决定 LINQ 表中的哪些属性用于并发检查——在这种情况下，LINQ 不会关心该记录中的值是否已更改。

还有一些方法可以处理异常——你可以在异常周围放置一个 try 块——并编写一些代码来处理不同的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:29:32.950

您应该查看包含详细信息的链接[http://blog.sqlauthority.com/2008/08/18/sql-server-detailed-explanation-of-transaction-lock-lock-type-avoid-locks/ 。](http://blog.sqlauthority.com/2008/08/18/sql-server-detailed-explanation-of-transaction-lock-lock-type-avoid-locks/)

# python - Listing items in a nested list in Python

> ID：11881256
> 
> 赞同：1
> 
> 时间：2012-08-09T10:20:49.247
> 
> 标签：python, list, recursion

> **Possible Duplicate:**
> [Flatten (an irregular) list of lists in Python](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)

I wanted a solution to list/print all the items in a nested list (with arbitrary nesting level). Here is what I came up with:

```
items = []
def getitems(mylist):
    for item in mylist:
        if type(item) is list:
            getitems(item)
        else:
            items.append(item)
    return items 
```

Sample output:

```
foo=['foo','bar',['foo','bar','baz'],'spam',['ham','eggs','salami']]

In [8]: getitems(foo)
Out[8]: 
['foo',
 'bar',
 'foo',
 'bar',
 'foo',
 'bar',
 'baz',
 'spam',
 'ham',
 'eggs',
 'salami'] 
```

Is this a good solution? Or is there a better approach?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:39:54.380

这可能有点迂腐，但您可以将累加器列表作为可选参数传递。这样一来，您就没有任何全局变量，并且可以避免在两次调用该函数并在第一次调用后忘记清除它时可能出现的问题：

```
def getitems(mylist, acc = None):
    if acc is None: acc = []
    for item in mylist:
        if type(item) is list:
            getitems(item, acc)
        else:
            acc.append(item)
    return acc 
```

# perl - Set predefined user password using Perl Script

> ID：11881258
> 
> 赞同：-1
> 
> 时间：2012-08-09T10:20:56.883
> 
> 标签：perl, bash, shell

I have a user named "hduser" and the password of the user is say "xyz123". Now I need a automated script for it so that I can get logged in as hduser without prompting for it's password. For example I have written a perl script as follows:

```
#!/usr/bin/perl
system ("su hduser && <xyz123>"); 
```

I need to set the user password for hduser.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:26:26.007

你不能在 Perl 中真正做到这一点。[http://search.cpan.org](http://search.cpan.org)上可能有一些模块可以让你做一些不安全的事情。

我对您的建议是配置“sudo”（请参阅​​ man sudo）并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:24:37.427

我要探索的另一种可能性是打开通往外壳的[管道。](http://perldoc.perl.org/perlopentut.html#Pipe-Opens)然后你应该能够在终端上做任何你能做的事情。

# javascript - 两个 div（一个带有 tinymce）共享滚动条

> ID：11881262
> 
> 赞同：1
> 
> 时间：2012-08-09T10:21:16.000
> 
> 标签：javascript, jquery, css, tinymce

我有这两个div：

```
<div id="ing" style="position:relative;">
     <div id="comm" style="position: absolute; width: 27% !important; height: 141px; right: 18px; top: 1px; ">
     </div>
</div> 
```

然后在 JS 中，我将 tinymce 设置为“成分”div。如何让这两个 div 共享这样的滚动条：http: [//jsfiddle.net/userdude/hThsx/](http://jsfiddle.net/userdude/hThsx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:32:10.273

她的问题是您的编辑器使用带有自己文档的内容可编辑 iframe。所以这个 iframe 有一个自己的滚动条，除了将 iframe 尺寸调整为内部文档尺寸外，你不能做任何事情。在这种情况下，编辑器 iframe 将没有滚动条。

现在您可能会遵循 Cobra_Fasts 的想法，即在您的两个 div 周围放置一个包装 div 并让它有一个滚动条。

# hibernate - 使用附加列休眠多对多映射？

> ID：11881264
> 
> 赞同：2
> 
> 时间：2012-08-09T10:21:21.377
> 
> 标签：hibernate

我需要在 manytomany 生成的表中有额外的列

有 2 个实体相互关联，多对多（用户多对多组）

```
@Entity
public class User {
    //other fields
    private Set<Group> groups = new HashSet<Group>(0);
}

@Entity
public class Group {
    //other fields
    private Set<User> users = new HashSet<User>(0);
} 
```

所以在这里它在数据库中生成3个表

表 1 - 用户

表 2 - 组

表 3 - 用户组

现在我需要 UserGroup 表中的附加字段，那么如何指定该字段以及在哪个实体中？

附加字段将是

私有布尔 isThisUserIsGroupManager；

这样，我可以让该组的用户也是组管理员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T12:07:39.647

关系没有要设置的持久属性，只有实体有。这就是为什么你需要第三个实体。它将有两个`@Id`属性，因此`@IdClass`是必需的，因为身份是从`Group`和派生的`User`：

```
@Entity
public class User {
    @Id int id;    
    @OneToMany(mappedBy = "user")
    private Set<GroupMemberShip> groupMemberShips;
    ...
}

@Entity
public class Group {
    @Id int id;
    @OneToMany(mappedBy = "group")
    private Set<GroupMemberShip> groupMemberShips;
    ...
}

@Entity
@IdClass(GroupMemberShipId.class)
public class GroupMemberShip {
    @Id @ManyToOne User user;

    @Id @ManyToOne Group group;

    private boolean isThisUserIsGroupManager;
    ...
}

public class GroupMemberShipId implements Serializable {
    int user;
    int group;
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T10:04:45.283

实际上，您可以进行多对多关联，包括使用额外的列。

首先，多对多映射是 Hibernate 的一个特性。您可以在第 1 章“映射关联”部分的 Hibernate (3.5.1-final) 参考中找到它。只需搜索“多对多”（在我拥有的 PDF 文件中的“1.2\. 2\. 一个单向的基于集合的关联”是您正在寻找的 - 它在第 14 页和第 14 页上有一个示例，就像您的一样）。因此，当其他响应者说您需要使用两个多对一映射时，我可能对他们指的是什么感到困惑，因为上述示例也有三个表。

其次，有关使用附加列的示例，请参阅Mkyong.com 上的[本教程](http://www.mkyong.com/hibernate/hibernate-many-to-many-example-join-table-extra-column-annotation/)

需要记住的一点是，本教程没有明确说明，存储关联信息的表**通常**没有额外的列，这隐含地使主键成为参与实体键的组合：UserGroup 中的键结合了 user.id 和 group.id。所以你需要@AssociationOverride 标签来指定哪些字段构成了键，因为如果你不这样做，Hibernate 将使用所有字段作为

这是否是一个好的做法是一个不同的问题，与拥有一个单独的实体（例如，UserGroupInfo，在您的情况下是第四个）相比，它是否会提高性能，其唯一目的是持有额外的列（UserGroupInfo 将不得不重用 UserGroup 的 id）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:24:56.523

您不能直接在 Hibernate 中执行此操作。

您需要先进行多 - 一，然后再进行一 - 多映射。

您需要在映射表上增加一列。我假设你也会为它设置一些价值。如果没有将实体映射到该表，您将无法做到这一点。

# performance - HTML5 drawImage slow on Chrome

> ID：11881265
> 
> 赞同：1
> 
> 时间：2012-08-09T10:21:23.123
> 
> 标签：performance, html, canvas, rendering, drawimage

I'm having some real difficulty with offscreen rendering with HTML5! The code I have written runs perfectly fine with Firefox, using drawImage on canvas elements draws smooth images and does so very quickly.

However, using Chrome 21, the drawImage performance is just terrible. I'm unable to see where I'm going wrong.

Here is a jsfiddle with some sample code: [http://jsfiddle.net/DXgum/3/](http://jsfiddle.net/DXgum/3/)

In Firefox, I can get about 60fps, chrome only delivers a framerate of 10fps. The performance does not differ if I'm using in-dom canvas elements or not-in-dom.

Rendering without buffering on Chrome is faster than Firefox, so I'm actually not sure why Chrome is having such a problem with drawImage.

Any help or light into the matter would be greatly appreciated!

System Information:

*   Windows 7 32bit
*   Intel QX9650
*   Nvidia GTS 250
*   4GB DDR2 RAM
*   Chrome Version: 21.0.1180.60 m
*   Firefox Version: 14.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-22T01:28:12.117

多年来我一直在为此苦苦挣扎。一个版本的 chrome 很好，下一个版本又慢了......我的最终解决方案有点 hacky，但它有效。

使用您的小提琴，我可以确定如果画布的大小 <= 256，性能会大幅下降。

我的画布是 200 x 200。

我只是将画布设置为 258 x 258，更改所有数学以适应新尺寸，并使用画布包装 div 上的 CSS 缩放属性将画布的外观缩小到近似原始大小。

这样做，我从 30-40 fps 到稳定的 60。

# android - Background service is new process??

> ID：11881268
> 
> 赞同：0
> 
> 时间：2012-08-09T10:21:30.137
> 
> 标签：android, background, android-service, background-service

In Android, it allow each app using about 16Mb ram. I want to ask that i start a new service running in background. Can i use another 16Mb ram in this service??

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:47:26.777

> 在 Android 中，它允许每个应用程序使用大约 16Mb 内存

进程可用的堆空间量因 Android 版本和设备配置而异。今天使用的大多数设备都有超过 16MB 的可用空间。

> 我想问我启动一个在后台运行的新服务。我可以在这项服务中使用另一个 16Mb 内存吗？

默认情况下，该服务将与您应用程序中的其他组件处于同一进程中，因此将共享同一个堆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:25:06.917

如果仅在服务中使用 16MB，则很可能会出现 OutOfMemory 异常。因为活动也需要一些内存。堆大小是允许应用程序使用的大小。你不能超越这一点。任何服务都将成为该应用程序的一部分，甚至在后台运行。

# database - Install Orchard to an existing database

> ID：11881269
> 
> 赞同：2
> 
> 时间：2012-08-09T10:21:34.920
> 
> 标签：database, content-management-system, installation, orchardcms

In our team, we use a common database server. When running the Orchard Setup, I point the connection string to an existing Orchard Database and got this error message:

> Setup failed: The requested service 'Orchard.IWorkContextAccessor' has not been registered. To avoid this exception, either register a component to provide the service, check for service registration using IsRegistered(), or use the ResolveOptional() method to resolve an optional dependency.

The only way that can make setup successful for me is to point to an empty database. I attempted a workaround by doing so first, and then edit connection string in App_Data\Sites\Default\Settings.txt, but then I got the same error.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:06:33.400

我也有这个问题，还尝试复制不起作用的 settings.txt 文件。这次我复制了 App_data 目录的所有内容，它对我有用。另外，最近一次我使用的是 codeplex 的最新提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-29T12:07:06.560

我删除了 cache.dat 并在 IIS 中重新启动了网站，这为我修复了它

# c++ - 使用#define 来定义静态数组的大小是否合法？

> ID：11881276
> 
> 赞同：3
> 
> 时间：2012-08-09T10:21:52.753
> 
> 标签：c++, dynamic, c-preprocessor, static-array

我目前正在开发的系统中有许多类，在这些类中，我有一个关于某物“名称”的数组。名称最多应包含 30 个字符。

最初我只使用了 10 个字符，但现在我需要增加限制。增加限制需要时间，因为我在很多地方都使用这种数组。如果我使用`#define NAME_SIZE 30`或类似的东西会更容易，然后我所要做的就是改变一个数字而不是二十左右。

但是我不确定这在 C++ 中是否是“合法”的事情。

这将在未来为我节省大量时间，这就是我问的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T10:23:31.243

是的，它在技术上没有任何问题，除了`#define`通常不如 a`const std::size_t MAX_NAME_SIZE = 30;`更好的是具有动态大小，例如使用`std::string`.

Scott Meyers 有一篇关于使用无偿固定尺寸的系统的有趣专栏，名为[The Keyhole Problem](http://www.aristeia.com/TKP/draftPaper.pdf)

> 每当软件**人为地限制** 你想看的东西或你想表达的东西时，就会出现钥匙孔问题。如果您想查看图像，但您的图像查看软件人为地限制了您一次可以看到多少图像，这就是锁孔问题。如果你想指定一个特定长度的密码，但你的软件说它太长，那就是钥匙孔问题。如果您想输入您的美国电话号码，但您的软件拒绝让您以传统方式在三位数前缀和四位数交换之间使用破折号来标点它，这就是钥匙孔问题。

除了来自用户的烦恼之外，您还会向各种安全问题（例如缓冲区溢出漏洞）开放您的系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T10:23:35.353

是的，这是合法的。但通常最好使用实际常量而不是宏：

```
const int max = 30;
char blah[max]; 
```

另一种选择是使用 a`std::string`并且没有硬编码限制（遵循[零一无穷大规则](http://catb.org/jargon/html/Z/Zero-One-Infinity-Rule.html)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:27:11.873

是的，这是合法的，但您可能需要使用`const int NAME_SIZE = 30;`. 这可以安全地放在头文件中。与非 const 全局变量不同，在不同的翻译单元（cpp 文件）中拥有 const 变量不会给链接器带来任何问题，因为每个常量对于定义它的文件来说都是本地的。

# objective-c - 以编程方式滚动 UIScrollView

> ID：11881287
> 
> 赞同：2
> 
> 时间：2012-08-09T10:22:51.240
> 
> 标签：objective-c, ios, scrollview, coordinates

在我的 iPhone 应用程序中，我有一个包含五页的 UIScrollview。是否可以点击按钮并滚动页面？例如，我在第一页，如果我按下“按钮 5”，第五页应该会出现，就像你用手滚动一样。

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T10:27:09.147

当然有可能！检查方法`- (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated`。当您按下按钮时，使用点偏移（x 和 y）调用它并将动画设置为 YES。

此外，如果您使用的是 UIScrollView，Apple 的人机界面指南非常建议您使用 UIPageControl，这有两个好处：(1) 向用户显示他在哪个页面中，以及 (2) 可以告诉您视图控制器，如果它被点击（但是，正如文档所说，*“页面控件在任一方向上只前进一页”*，所以如果你需要跳转，比如说，从第 2 页到第 5 页，使用按钮可能会更好）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T12:55:49.007

你可以通过这一行代码来做到这一点。

```
[scrollView scrollRectToVisible:frame animated:YES]; 
```

在这里，您需要为其提供要显示的滚动视图的框架。

# php - 使用 PHP/Ajax/Jquery 显示根据内容格式化的动态帖子

> ID：11881290
> 
> 赞同：2
> 
> 时间：2012-08-09T10:22:58.587
> 
> 标签：php, jquery, ajax

我正在开发评论/内容/发布系统并在路上遇到岔路口，所以我想在选择路径之前我应该​​征求其他意见。抱歉，目前我没有足够好的工作示例来展示（或者我可以分享的示例），所以希望我的描述足够。

我有一个 index.php 主页，它调用 loadmore.php 来请求用户帖子在 div 中显示。loadmore.php 从 MySQL 数据库中获取这些数据。

每个帖子可以是不同的类型，并且在显示在屏幕上时会有所不同。

示例（所有帖子都显示发布的用户和顶部的日期）：

*   POST：定期发布，仅文本。
*   链接：将链接页面的标题显示为超链接、旁边的小缩略图以及从链接站点中提取的文本片段。
*   图片：显示带有标题的大图片。
*   VIDEO：在顶部显示标题，标题下的视频占div宽度的一半，视频的描述在视频旁边。

不要关心格式等，我只是想表明每个帖子的格式会根据帖子的类型而不同，并且 HTML 可能很长。

现在，这就是我想知道的；生成或选择的 HTML 应该从哪里来？（为简单起见，我使用的是伪代码）

**选项 1**。我可以在 index.php 页面本身的 ajax/js 中拥有各种 HTML“模板”，然后使用一堆 IF 语句填充变量，但我不确定这应该在索引文件中。

**索引.php**

```
 <div id="mainContainer">
    //Content
    <div id="postsContainer">
        //Individual posts go in here (Several divs formatted according to content)
    </div>
    //More content
    </div>
    <script>
     GET data to loadmore.php and get results into variables
     IF "type" is "link" 
         append to #postsContainer "<div id="linkURL"....$variables etc...
     IF "type" is "video" 
         append to #postsContainer "<div id="videoDiv"....$variables
     //And so on...
    </script> 
```

**加载更多.php**

```
 <?PHP
    //Get and process post data into variables
    //Query SQL database for more/new posts
    //Return individual data in JSON format to index.php
    ?> 
```

**选项 2**。或者，我可以让 loadmore.php 使用 IF 语句来返回要在 index.php 中添加的适当 HTML 字符串，但我发现在 2 个 PHP 文件服务器之间传递这么多长的 HTML 字符串效率低下 -只有变量可以传递的时候。

**index.php（注：只有脚本部分不同）**

```
 <div id="mainContainer">
    //Content
    <div id="postsContainer">
        //Individual posts go in here (Several divs formatted according to content)
    </div>
    //More content
    </div>
    <script>
     //GET data to loadmore.php and get resulting HTML string
     //Append to #postsContainer the HTML string returned from loadmore.php
    </script> 
```

**加载更多.php**

```
 <?PHP
    //Get and process post data into variables
    //Query SQL database for more/new posts
    IF "type" is "link" 
         $returnHTML = "<div id="linkURL....$variables etc...
    IF "type" is "video" 
         $returnHTML = "<div id="videoDiv....$variables
    //And so on...

    return $returnHTML; 
    //This is a single long string returned with all HTML formatted by loadmore.php
    //index.php simply has to Append the entire string into the div
    ?> 
```

最好的路线是什么？为什么？

对不起，如果它看起来很乱，我还在习惯这个网站的格式化方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:42:15.963

在过去做类似的事情时，

我只是让您的 loadmore.php 遍历您想要显示的帖子，确定类型，并回显正确的格式。

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");
//...
$result = $mysqli->query($query);

while ($row = $result->fetch_array(MYSQL_ASSOC)) {
  $count += 1;
  echo '<div id="post'.$count.'">';
  switch ($row['type']) {
    case 'POST':
      //POST format
      break;
    case 'LINK':
      //LINK format
      break;
    case 'PICTURE':
      //PICTURE format
      break;
    //...
    default:
      //default
  }
  echo '</div';
}

$result->free();
$mysqli->close();
?> 
```

然后你可以简单地将php页面加载到一个div中。一种方法是使用 jQuery：

```
<script typ="text/javascript">
    $(document).ready(function(){
         $("#postsContainer").load("loadmore.php");
    });
</script> 
```

如果您想将参数传递给 loadmore.php（例如从表单中，可能是隐藏的），您可以使用以下内容：

```
var variables = $("#form").serialize();
$.post("loadmore.php", variables, function(data) {
    $("#postsContainer").html(data);
}); 
```

然后，在 loadmore.php 中检索发布的数据就像 $POST_['variable'] 一样简单，您可以将其合并到您的查询（或其他任何内容）中，具体取决于您在做什么。

我认为仅从 php 文件加载输出比传输变量并使用模板和 ifs 使您的网页膨胀（选项 1）或从 php 文件传递​​ html 字符串（选项 2）更好。

# java - 将字符串转换为浮点数而不四舍五入java

> ID：11881291
> 
> 赞同：0
> 
> 时间：2012-08-09T10:23:00.097
> 
> 标签：java, android

我想将我从数据库中获得的经度和纬度转换为字符串。该字符串是正确的，当我尝试将其转换为双精度时，它也是正确的。但是，当我将双精度值或字符串值（我都尝试过）转换为浮点值时，最后一个小数会四舍五入。

string 或 double 的值为 59.858139 转换为 float 为 59.85814

我已经尝试了一切，这是一个绝望的例子:)

```
private float ConvertToFloat(double d)
{
    float f = 00.000000f;
    f = (float) d;
    return f;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T10:24:18.867

您知道双精度数比浮点数具有更高的精度，并且浮点数会四舍五入，对吗？这是预期的行为。在这种情况下，将 double 类型转换为 float 是没有意义的。

这里有一些东西可以让你朝着正确的方向思考......

```
 Double.doubleToRawLongBits(long value);
    Float.intBitsToFloat(int bits); 
```

双打不适合 int，它们必须适合 long。它的大小确实是原来的两倍，即使用字符串调解位在这里也没有任何好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T10:30:53.930

**1.** `float`精度只有**24位，**不足以**容纳**你的经纬度位数。

**2.**四舍五入是由于数字的大小。因此`double`，如果您需要浮点，请使用，或者使用`BigDecimal`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:07:14.960

我们从你的十进制数开始`59.858139`

将该数字转换为二进制：`111011.11011011101011101111111101011100011011000001000110100001000100...`

即数字是二进制的无限小数。无法准确表示。（就像不可能用十进制数字精确表示 1/3 一样）

将数字重写为某种形式的二进制科学记数法：

`10 ^ 101 * 1.1101111011011101011101111111101011100011011000001000110100001000100...`

请记住，这仍然是二进制，因此`10 ^ 101`对应`2 ^ 5`于十进制。

现在...浮点值可以在尾数中存储 23 位。如果我们使用“四舍五入”舍入模式将其四舍五入，我们得到：

`10 ^ 101 * 1.11011110110111010111100`

这等于：

`111011.110110111010111100`

这就是适合浮点数据类型的所有精度。现在将其转换回十进制：

`59.8581390380859375`

实际上似乎非常接近 59.858139……但这只是运气。如果我们将第二个最接近的浮点值转换为二进制会发生什么？

`111011.110110111010111011 = 59.858135223388671875`

所以基本上分辨率大约是`0.000004`.

所以我们可以从浮点值中真正知道的是这个数字是这样的：`59.858139`±`0.000002`

它也可以是`59.858137`or `59.858141`。

由于最后一位数字相当不确定，我猜测打印代码足够聪明，可以理解最后一位数字超出浮点值的精度，因此，该值被舍入为`59.85814`.

* * *

顺便说一句，如果你（像我一样）懒得手动在二进制和十进制之间转换，你可以使用[这个转换器](http://www.exploringbinary.com/binary-converter/)。如果您想了解更多关于浮点系统的详细信息，[浮点表示的维基百科页面](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)是一个很好的资源。

# java - 如何将 JPanel 分配给 JTable 单元格？

> ID：11881297
> 
> 赞同：3
> 
> 时间：2012-08-09T10:23:11.283
> 
> 标签：java, swing, jpanel

> **可能重复：**
> [如何将自动完成文本字段分配给 JTable 单元格？](https://stackoverflow.com/questions/11880810/how-to-assign-the-auto-complete-text-field-to-jtable-cell)

我为自动完成文本字段创建了一个类。

我想使用该类并尝试包含我的 JTable 单元格字段，将该控件添加到一个面板但它不会显示。请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:29:57.750

你需要一个细胞渲染器，所以......

这是在 JTable 单元格中使用 JPanel的[示例。](http://pekalicious.com/blog/custom-jpanel-cell-with-jbuttons-in-jtable/)

# c++ - 为什么没有显示 - 在声明之前调用函数的错误？

> ID：11881300
> 
> 赞同：2
> 
> 时间：2012-08-09T10:23:23.253
> 
> 标签：c++, c, function

```
main()
{
    f();
}
int f( int i, float fl)
{
    printf("function");
} 
```

1.  为什么上面的代码在'C'中成功运行并`function`在应该报告错误时打印，因为在声明之前调用了*f（） 。*

2.  当它在'C'中成功运行时，为什么不在'C++'中。在 c++ 中运行时，它显示：`error: 'f' was not declared in this scope`

3.  如果是因为编译器假定一个未声明的函数返回一个 int 并接受未指定数量的参数，那么为什么它也为下面的函数成功运行（即当返回类型为*void*而不是*int*时？

> void f (int i, float fl)
> 
> {
> 
> ```
>  printf("function"); 
> ```
> 
> }

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:34:34.253

1.  因为 C 允许隐式声明函数。或者至少是这样；C90 可能需要声明，我不确定。但是由于长期以来不声明函数是 C 语言中的常见做法，我希望大多数编译器会继续允许它，即使在它被禁止之后也是如此。

2.  因为 C 和 C++ 是不同的语言。C++ 从未允许隐式声明函数。

3.  因为从历史上看，C 没有`void`类型；声明了没有返回值的函数`int`，即使它们没有返回任何内容，只要您不尝试使用（不存在的）返回值就没有问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T10:35:01.717

1.  旧版本的 C 编程语言允许没有更早声明的函数引用。作为遗留问题，许多当前的编译器仍然支持旧语言或它的某些方面。这就是为什么一些编译器接受您显示的源代码的原因。您的编译器可能有一些开关，告诉它使用更新版本的 C 编程语言，或者更严格地遵守标准。

2.  C++ 是最近开发的，没有没有声明的函数的遗留问题。

3.  不同的返回类型起作用，因为汇编语言恰好以相同的方式实现。对于返回 void 的函数，被调用的例程只是执行其操作并返回。对于返回 int 的函数，被调用的例程执行其操作，将其最终结果放入特定的处理器寄存器，然后返回。在调用例程中，当不使用返回 int 的函数的返回值时，调用例程会简单地忽略处理器寄存器中的内容。因为寄存器被忽略，所以对于调用例程，返回 void 的函数和返回 int 的函数之间没有区别。并非所有目标平台都如此；具有不同返回类型的函数之间可能存在差异，尤其是当返回类型是更复杂的对象（例如结构）时。和，如果调用函数确实使用了返回值，则返回类型会有所不同。返回 void 的函数会在处理器寄存器中留下一些不受控制的值，返回值应该是，调用函数会使用它并得到意想不到的结果。

显而易见，这些都不是您应该依赖的行为。使用指定您希望更严格地遵守标准并希望获得更多警告的编译器开关是一种很好的做法。（我希望这些是编译器的默认值。）编写符合标准的代码是一种很好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:27:31.893

该错误未在 C 中显示，因为您在调用编译器时没有使用正确的标志。

**你的编译器是什么？**

如果是`gcc`，试试`gcc -std=c99 -pedantic -Werror ...`

# java - 约束用户在 JTextField 中输入时间的最佳方法

> ID：11881301
> 
> 赞同：6
> 
> 时间：2012-08-09T10:23:23.700
> 
> 标签：java, swing, date, time, jtextfield

在我的一个 java 应用程序中，有一个用户应该输入时间的*字段。*我知道，我可以简单地将其保持为正常状态`JTextField`，并且在验证时我可以检查值等等......

但我认为有比这更好的方法..

例如，如果这是一个日期问题，那么`JXDatePicker`（带有`swingx`）可以非常方便地使用。最终，保证用户选择是一个日期。

同样，时间选择也必须有更好的方法。如果您知道更好的解决方案，有人会分享您的知识吗？

任何想法都值得赞赏。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T10:36:49.483

您可以使用`JFormattedTextField`查看下面的示例，这将创建一个`JFormattedTextField`仅接受数字并将它们以*XXhXXminXXs*形式放置然后添加`ActionListener` 到`JFormattedTextField`and 以尝试解析为有效时间对象的`ENTER`方法，此时我只显示的使用`JFormattedTextField`和`ActionListener`我没有尝试转换或任何转换和解析有效时间：

![在此处输入图像描述](../Images/834ef0e0c50349656aa3c01e171fcb42.png)

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.ParseException;
import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.text.MaskFormatter;

public class FormattedTextFieldExample {

    public FormattedTextFieldExample() {
        initComponents();
    }

    private void initComponents() {
        JFrame frame = new JFrame("JFormattedTextField Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        MaskFormatter mask = null;
        try {
            mask = new MaskFormatter("##h##min##s");//the # is for numeric values
            mask.setPlaceholderCharacter('#');
        } catch (ParseException e) {
            e.printStackTrace();
        }

        //
        // Create a formatted text field that accept a valid time.
        //
        final JFormattedTextField timeField = new JFormattedTextField(mask);

        //Add ActionListener for when enter is pressed
        timeField.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                Object source = ae.getSource();
                if (source == timeField) {
                    //parse to a valid time here
                    System.out.println(timeField.getText());
                }
            }
        });

        frame.add(timeField);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new FormattedTextFieldExample();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T10:28:43.747

*   多个`JSpinner`实例允许选择小时、分钟和秒
*   使用 a`JFormattedTextField`进行一些改进以提供即时的用户反馈（例如，一旦输入变为无效，将背景涂成红色）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-09T10:46:51.203

`TimeField`前段时间我做了一个原型，它仍然需要一些工作，但这个概念非常基本。

它基本上呈现两个`JTextFields`，一个代表小时，一个代表分钟，并使它们看起来是一个字段。

通过使用 some `DocumentFilter`s 来限制用户的输入。

![在此处输入图像描述](../Images/6fceff7c42be5016d19c99359ced74b3.png)

我前段时间做过这个，它需要工作，但基本的想法就在那里......如果你有问题，你需要自己尝试解决;）

```
/**
 *
 * @author MadProgrammer
 */
public class TimeField extends javax.swing.JPanel {

  // The time of day...
  public enum TimeOfDay {

    AM,
    PM
  }
  private HourDocumentFilter hourDocumentFilter;
  private MinuteDocumentFilter minDocumentFilter;
  private HourKeyHandler hourKeyHandler;
  private MinuteKeyHandler minuteKeyHandler;
  private HourFocusHandler hourFocusHandler;
  private MinuteFocusHandler minuteFocusHandler;
  private boolean use24HourClock;
  private ActionHandler actionHandler;

  /**
   * Creates new form TimeField
   */
  public TimeField() {
    initComponents();
    pnlFields.setBorder(new CompoundBorder(UIManager.getBorder("TextField.border"),new EmptyBorder(0, 2, 0, 2)));

    set24HourClock(false);
    setTime(new Date());
    fldHour.addKeyListener(new HourKeyHandler());
  }

  @Override
  public void addNotify() {
    super.addNotify();
    // Add all the required functionality to make this thing work...
    ((AbstractDocument) fldHour.getDocument()).setDocumentFilter(getHourDocumentFilter());
    ((AbstractDocument) fldMin.getDocument()).setDocumentFilter(getMinuteDocumentFilter());
    fldHour.addFocusListener(getHourFocusHandler());
    fldMin.addFocusListener(getMinuteFocusHandler());
    fldHour.addKeyListener(getHourKeyHandler());
    fldMin.addKeyListener(getMinuteKeyHandler());
    fldHour.addActionListener(getActionHandler());
    fldMin.addActionListener(getActionHandler());
    cmbTimeOfDay.addActionListener(getActionHandler());
  }

  @Override
  public void removeNotify() {
    // Clean up our listeners...
    ((AbstractDocument) fldHour.getDocument()).setDocumentFilter(null);
    ((AbstractDocument) fldMin.getDocument()).setDocumentFilter(null);
    fldHour.removeFocusListener(getHourFocusHandler());
    fldMin.removeFocusListener(getMinuteFocusHandler());
    fldHour.removeKeyListener(getHourKeyHandler());
    fldMin.removeKeyListener(getMinuteKeyHandler());
    fldHour.removeActionListener(getActionHandler());
    fldMin.removeActionListener(getActionHandler());
    cmbTimeOfDay.removeActionListener(getActionHandler());
    super.removeNotify();
  }

  /**
   * Adds an action listener to the component. Actions are fired when the user
   * presses the enter key
   *
   * @param listener
   */
  public void addActionListener(ActionListener listener) {
    listenerList.add(ActionListener.class, listener);
  }

  public void removeActionListener(ActionListener listener) {
    listenerList.remove(ActionListener.class, listener);
  }

  /**
   * Returns the field that is acting as the hour editor
   *
   * @return
   */
  public JTextField getHourEditor() {
    return fldHour;
  }

  /**
   * Returns the field that is acting as the minute editor
   *
   * @return
   */
  public JTextField getMinuteEditor() {
    return fldMin;
  }

  /**
   * Returns the combo box that provides the time of day selection
   *
   * @return
   */
  public JComboBox getTimeOfDayEditor() {
    return cmbTimeOfDay;
  }

  /**
   * Returns the internal action handler. This handler monitors actions on the
   * individual components and merges them into one.
   *
   * @return
   */
  protected ActionHandler getActionHandler() {
    if (actionHandler == null) {
      actionHandler = new ActionHandler();
    }
    return actionHandler;
  }

  /**
   * Returns the hour key listener
   *
   * @return
   */
  protected HourKeyHandler getHourKeyHandler() {
    if (hourKeyHandler == null) {
      hourKeyHandler = new HourKeyHandler();
    }
    return hourKeyHandler;
  }

  /**
   * Returns the minute key listener
   *
   * @return
   */
  protected MinuteKeyHandler getMinuteKeyHandler() {
    if (minuteKeyHandler == null) {
      minuteKeyHandler = new MinuteKeyHandler();
    }
    return minuteKeyHandler;
  }

  /**
   * Returns the document filter used to filter the hour field
   *
   * @return
   */
  protected HourDocumentFilter getHourDocumentFilter() {
    if (hourDocumentFilter == null) {
      hourDocumentFilter = new HourDocumentFilter();
    }
    return hourDocumentFilter;
  }

  /**
   * Returns the document filter user to filter the minute field
   *
   * @return
   */
  protected MinuteDocumentFilter getMinuteDocumentFilter() {
    if (minDocumentFilter == null) {
      minDocumentFilter = new MinuteDocumentFilter();
    }
    return minDocumentFilter;
  }

  /**
   * Returns the focus listener used to monitor the hour field
   *
   * @return
   */
  protected HourFocusHandler getHourFocusHandler() {
    if (hourFocusHandler == null) {
      hourFocusHandler = new HourFocusHandler();
    }
    return hourFocusHandler;
  }

  /**
   * Used the focus listener used to monitor the minute field
   *
   * @return
   */
  protected MinuteFocusHandler getMinuteFocusHandler() {
    if (minuteFocusHandler == null) {
      minuteFocusHandler = new MinuteFocusHandler();
    }
    return minuteFocusHandler;
  }

  /**
   * Sets the time based on the supplied date
   *
   * @param date
   */
  public void setTime(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    int hour = cal.get(Calendar.HOUR);
    int min = cal.get(Calendar.MINUTE);
    int dayPart = cal.get(Calendar.AM_PM);

    TimeOfDay timeOfDay = TimeOfDay.AM;
    switch (dayPart) {
      case Calendar.PM:
        timeOfDay = TimeOfDay.PM;
        break;
    }

    setTime(hour, min, timeOfDay);
  }

  /**
   * Sets the time based on a 24 hour clock. The field does not need to be in 24
   * hour mode to use this method, the method will automatically correct the
   * hour appropriately.
   *
   * @param hour
   * @param min
   */
  public void setTime(int hour, int min) {
    hour = correctHour(hour);
    min = correctMinute(min);

    TimeOfDay timeOfDay = TimeOfDay.AM;
    if (hour >= 12) {
      timeOfDay = TimeOfDay.PM;
    }

    setTime(hour, min, timeOfDay);
  }

  /**
   * Corrects the minute value to make sure it is within allowable ranges.
   *
   * For example, if you pass in 90 the method, it will automatically correct
   * the value to 30, discard the overflow.
   *
   * This will not effect the hour value...although this might be worth
   * consideration in the future
   *
   * @param min
   * @return
   */
  protected int correctMinute(int min) {
    // Make sure the value is positive.
    // If we were interested in altering the hour value as well, we wouldn't
    // want to do this...
    if (min < 0) {
      min += (min * -2);
    }

    // Correct the minute value....
    if (min > 59) {
      // How many hours fit into this value
      float part = min / 60f;
      part = (float) (part - Math.floor(part)); // Get remainder
      min = (int) (60 * part); // Calculate the number of minutes...
    }
    return min;
  }

  /**
   * Basically, this method will attempt to correct the hour value and bring the
   * it into range of a single day.
   *
   * We are basically going to try and figure out how many parts of the day that
   * the hour falls in and make it equal to a single day...
   *
   * That is, if the hour is 35, it's actually 1.458... days, which is roughly 1
   * day and 11 hours. We are only interested in the 11 hours, cause the date is
   * irrelevant to us
   *
   * @param hour
   * @return
   */
  protected int correctHour(int hour) {
    if (hour < 0) {
      hour += (hour * -2);
    }

    if (hour > 23) {
      float part = hour / 24f;
      part = (float) (part - Math.floor(part));
      hour = (int) (24 * part);
    }
    return hour;
  }

  /**
   * Sets the time value for this field...
   *
   * @param hour
   * @param min
   * @param timeOfDay
   */
  public void setTime(int hour, int min, TimeOfDay timeOfDay) {
    hour = correctHour(hour);
    min = correctMinute(min);

    // Now that we have a correct hour value, we need to know if it will
    // actually fit within the correct part of the day...

    switch (timeOfDay) {
      case AM:
        cmbTimeOfDay.setSelectedIndex(0);
        break;
      case PM:
        cmbTimeOfDay.setSelectedIndex(1);
        break;
    }

    if (!is24HourClock()) {
      if (hour > 12) {
        hour -= 12;
      }
    } else {
      if (hour < 12 && timeOfDay.equals(TimeOfDay.PM)) {
        hour += 12;
      }
    }

    fldHour.setText(pad(Integer.toString(hour), 2));
    fldMin.setText(pad(Integer.toString(min), 2));
  }

  public int getHour() {
    return Integer.parseInt(getHourEditor().getText());
  }

  public int getMinute() {
    return Integer.parseInt(getMinuteEditor().getText());
  }

  public TimeOfDay getTimeOfDay() {
    TimeOfDay tod = null;
    switch (cmbTimeOfDay.getSelectedIndex()) {
      case 0:
        tod = TimeOfDay.AM;
        break;
      case 1:
        tod = TimeOfDay.PM;
        break;
    }
    return tod;
  }

  /**
   * Sets if we should be using 24 or 12 hour clock. This basically configures
   * the time of day field and the validation ranges of the various fields
   *
   * @param value
   */
  public void set24HourClock(boolean value) {
    if (value != use24HourClock) {

      use24HourClock = value;
      cmbTimeOfDay.setVisible(!use24HourClock);

      if (cmbTimeOfDay.getSelectedIndex() == 1) {
        setTime(getHour() + 12, getMinute(), getTimeOfDay());
      }

      invalidate();
      firePropertyChange("24HourClock", !use24HourClock, value);
    }
  }

  /**
   * Returns if this is using a 24 or 12 hour clock
   *
   * @return
   */
  public boolean is24HourClock() {
    return use24HourClock;
  }

  /**
   * This method is called from within the constructor to initialize the form.
   * WARNING: Do NOT modify this code. The content of this method is always
   * regenerated by the Form Editor.
   */
  @SuppressWarnings("unchecked")
  // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
  private void initComponents() {
    java.awt.GridBagConstraints gridBagConstraints;

    cmbTimeOfDay = new javax.swing.JComboBox();
    pnlFields = new javax.swing.JPanel();
    lblSeperator = new javax.swing.JLabel();
    fldHour = new javax.swing.JTextField();
    fldMin = new javax.swing.JTextField();

    addFocusListener(new java.awt.event.FocusAdapter() {
      public void focusGained(java.awt.event.FocusEvent evt) {
        doFocusGained(evt);
      }
    });
    setLayout(new java.awt.GridBagLayout());

    cmbTimeOfDay.setModel(new javax.swing.DefaultComboBoxModel(new String[]{"am", "pm"}));
    cmbTimeOfDay.setBorder(null);
    cmbTimeOfDay.setEditor(null);
    cmbTimeOfDay.setOpaque(false);
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 1;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.insets = new java.awt.Insets(0, 4, 0, 0);
    add(cmbTimeOfDay, gridBagConstraints);

    pnlFields.setBackground(new java.awt.Color(255, 255, 255));
    pnlFields.setLayout(new java.awt.GridBagLayout());

    lblSeperator.setText(":");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 1;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.insets = new java.awt.Insets(0, 2, 0, 2);
    pnlFields.add(lblSeperator, gridBagConstraints);

    fldHour.setBorder(null);
    fldHour.setColumns(2);
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 0;
    pnlFields.add(fldHour, gridBagConstraints);

    fldMin.setBorder(null);
    fldMin.setColumns(2);
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 2;
    gridBagConstraints.gridy = 0;
    pnlFields.add(fldMin, gridBagConstraints);

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 0;
    add(pnlFields, gridBagConstraints);
  }// </editor-fold>                        

  private void doFocusGained(java.awt.event.FocusEvent evt) {
    fldHour.requestFocus();
  }
  // Variables declaration - do not modify                     
  private javax.swing.JComboBox cmbTimeOfDay;
  private javax.swing.JTextField fldHour;
  private javax.swing.JTextField fldMin;
  private javax.swing.JLabel lblSeperator;
  private javax.swing.JPanel pnlFields;
  // End of variables declaration                   

  /**
   * Moves the focus forward to the next field.
   *
   * This is used to provide "automatic" focus movement
   */
  protected void moveFocusForward() {
    if (fldHour.hasFocus()) {
      fldMin.requestFocus();
    } else if (fldMin.hasFocus()) {
      cmbTimeOfDay.requestFocus();
    }
  }

  /**
   * Moves the focus backwards to the previous field.
   *
   * This is used to provide "automatic" focus movement
   */
  protected void moveFocusBackward() {
    if (fldMin.hasFocus()) {
      fldHour.requestFocus();
    } else if (cmbTimeOfDay.hasFocus()) {
      fldMin.requestFocus();
    }
  }

  /**
   * Fires the action performed event to all registered listeners
   *
   * @param evt
   */
  protected void fireActionPerformed(ActionEvent evt) {
    List<ActionListener> lstListeners = Arrays.asList(listenerList.getListeners(ActionListener.class));
    if (!lstListeners.isEmpty()) {
      Collections.reverse(lstListeners);
      for (ActionListener listener : lstListeners) {
        listener.actionPerformed(evt);
      }
    }
  }

  /**
   * Hour key handler, used to monitor "special" keys for the hour field.
   *
   * This looks for the user pressing the ":" key and the right arrow key in
   * order to perform special navigation
   */
  protected class HourKeyHandler extends KeyAdapter {

    @Override
    public void keyPressed(KeyEvent e) {
      boolean numLock = false;
      try {
        // Get the state of the nums lock
        numLock = Toolkit.getDefaultToolkit().getLockingKeyState(KeyEvent.VK_NUM_LOCK);
      } catch (Exception exp) {
      }

      // Move focus forward if the user presses the ":"
      if (e.getKeyCode() == KeyEvent.VK_SEMICOLON && e.isShiftDown()) {
        moveFocusForward();
        // Move focus forward if the user pressed the left arrow key
      } else if ((e.getKeyCode() == KeyEvent.VK_NUMPAD6 && !numLock) || e.getKeyCode() == KeyEvent.VK_RIGHT) {
        // If we are in the last edit position
        if (fldHour.getCaretPosition() >= 2) {
          moveFocusForward();
          // Or we are in the first edit position and the field only contains a single character
        } else if (fldHour.getText().trim().length() == 1 && fldHour.getCaretPosition() == 1) {
          moveFocusForward();
        }
      }
    }
  }

  /**
   * Minute key handler, used to monitor "special" keys for the hour field.
   *
   * This looks for the user pressing the left arrow key in order to perform
   * special navigation
   */
  protected class MinuteKeyHandler extends KeyAdapter {

    @Override
    public void keyPressed(KeyEvent e) {
      boolean numLock = false;
      try {
        numLock = Toolkit.getDefaultToolkit().getLockingKeyState(KeyEvent.VK_NUM_LOCK);
      } catch (Exception exp) {
      }

      if ((e.getKeyCode() == KeyEvent.VK_NUMPAD4 && !numLock) || e.getKeyCode() == KeyEvent.VK_LEFT) {
        // Only want to move backwards if we are at the first edit position
        if (fldMin.getCaretPosition() == 0) {
          moveFocusBackward();
        }
      }
    }
  }

  /**
   * Hour field focus handler. This watches for focus lost events a
   * automatically pads the field with a leading "0" if the field is only 1
   * character in length
   */
  protected class HourFocusHandler extends FocusAdapter {

    @Override
    public void focusLost(FocusEvent e) {
      String text = fldHour.getText();
      if (text.length() < 2) {
        text = pad(text, 2);
        fldHour.setText(text);
      }
    }
  }

  /**
   * Minute field focus handler, watches for focus lost events and automatically
   * adds a "0" to the end of the field if it is only 1 character in length
   */
  protected class MinuteFocusHandler extends FocusAdapter {

    @Override
    public void focusLost(FocusEvent e) {
      String text = fldMin.getText();
      if (text.length() < 2) {
        fldMin.setText(text + "0");
      }
    }
  }

  /**
   * The document filter used to filter the hour field.
   */
  protected class HourDocumentFilter extends DocumentFilter {

    @Override
    public void insertString(FilterBypass fb, int offset, String text, AttributeSet attr) throws BadLocationException {
      System.out.println("insert: offset = " + offset + "; text = " + text);
      super.insertString(fb, offset, text, attr);
    }

    @Override
    public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {

      try {
        boolean isAcceptable = false;
        boolean passOnFocus = false;

        int strLength = text.length();
        // We convert the value here to make sure it's a number...
        int value = Integer.parseInt(text);

        // If the length of the string been replaced is only 1 character
        if (strLength == 1) {
          // If we are at the start of the editing position
          if (offset == 0) {
            // What clock type are we using...
            if (!is24HourClock()) {
              // only accept 0 or 1...
              if (value <= 1) {
                isAcceptable = true;
              }
            } else if (value <= 2) {
              isAcceptable = true;
            }
            // If we are at the second editing position
          } else if (offset == 1) {
            // Get the preceeding value, should be 0, 1 or 2
            String upperPart = fb.getDocument().getText(0, 1);
            // Convert the value to an int
            int upperValue = Integer.parseInt(upperPart);

            // The acceptable range of values for the given position
            int lowerRange = 0;
            int upperRange = 9;

            // Which clock are we using
            if (is24HourClock()) {
              // If the first value is 2, we can only accept values from 0-3 (20-23)
              if (upperValue == 2) {
                upperRange = 3;
              }
            } else {
              // 12 hour clock
              // If the first value is 1, we can only accept values from 0-2 (10-12)
              if (upperValue == 1) {
                upperRange = 2;
              }
            }

            // Is the value within accpetable range...
            if (value >= lowerRange && value <= upperRange) {
              isAcceptable = true;
            }

            // Pass on focus (only if the value is accepted)
            passOnFocus = true;
          }
        } else {
          // First, we need to trim the value down to a maximum of 2 characters

          // Need to know at what offest...
          // 2 - offset..
          // offset == 0, length = 2 - offset = 2
          // offset == 1, length = 2 - offset = 1
          strLength = 2 - offset;
          String timeText = text.substring(offset, strLength);
          value = Integer.parseInt(timeText);
          // this will only work if we are using a 24 hour clock
          if (value >= 0 && value <= 23) {
            while (value > 12 && is24HourClock()) {
              value -= 12;
            }

            // Pad out the text if required
            text = pad(value, 2);
            isAcceptable = true;
          }
        }

        if (isAcceptable) {
          super.replace(fb, offset, length, text, attrs);
          if (passOnFocus) {
            moveFocusForward();
          }
        }
      } catch (NumberFormatException exp) {
      }
    }
  }

  /**
   * The document filter used to filter the minute field.
   */
  protected class MinuteDocumentFilter extends DocumentFilter {

    @Override
    public void insertString(FilterBypass fb, int offset, String text, AttributeSet attr) throws BadLocationException {
      System.out.println("insert: offset = " + offset + "; text = " + text);
      super.insertString(fb, offset, text, attr);
    }

    @Override
    public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {

      try {
        boolean isAcceptable = false;
        boolean passOnFocus = false;

        // How long is the text been added
        int strLength = text.length();
        // Convert the value to an integer now and save us the hassel
        int value = Integer.parseInt(text);

        // If the length is only 1, probably a new character has been added
        if (strLength == 1) {
          // The valid range of values we can accept
          int upperRange = 9;
          int lowerRange = 0;
          if (offset == 0) {
            // If we are at the first edit position, we can only accept values
            // from 0-5 (50 minutes that is)
            upperRange = 5;
          } else if (offset == 1) {
            // Second edit position...
            // Every thing is valid here...
            // We want to pass on focus if the clock is in 12 hour mode
            passOnFocus = !is24HourClock();
          }

          // Is the value acceptable..
          if (value >= lowerRange && value <= upperRange) {
            isAcceptable = true;
          }
        } else {
          // Basically, we are going to trim the value down to at max 2 characters

          // Need to know at what offest...
          // 2 - offset..
          // offset == 0, length = 2 - offset = 2
          // offset == 1, length = 2 - offset = 1
          strLength = 2 - offset;
          String timeText = text.substring(offset, strLength);
          value = Integer.parseInt(timeText);
          if (value >= 0 && value <= 59) {
            // Pad out the value as required
            text = pad(value, 2);
            isAcceptable = true;
          }
        }

        if (isAcceptable) {
          super.replace(fb, offset, length, text, attrs);
          if (passOnFocus) {
            moveFocusForward();
          }
        }

      } catch (NumberFormatException exp) {
      }
    }
  }

  /**
   * This is a simple "pass" on action handler...
   */
  protected class ActionHandler implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
      ActionEvent evt = new ActionEvent(TimeField.this, e.getID(), e.getActionCommand(), e.getModifiers());

      fireActionPerformed(evt);
    }
  }

  public static String pad(long lValue, int iMinLength) {
    return pad(Long.toString(lValue), 2);
  }

  public static String pad(int iValue, int iMinLength) {
    return pad(Integer.toString(iValue), iMinLength);
  }

  public static String pad(String sValue, int iMinLength) {
    StringBuilder sb = new StringBuilder(iMinLength);
    sb.append(sValue);
    while (sb.length() < iMinLength) {
      sb.insert(0, "0");
    }
    return sb.toString();
  }
} 
```

> 鉴于 DavidKroukamp 的简单解决方案，为什么有人要选择这种笨重的实现。此外，这在手动输入数字时存在一些错误。我更喜欢 DavidKroukamp 的方式..

简单的回答，验证。 `JFormattedTextField`对值无效，但仅限制您可以输入数字的事实，您可以轻松地`99:99`输入`JFormattedTextField`. 此实现的目的是提供实时验证，同时提供简单的数据输入要求

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-09T11:30:50.853

我没有看到 multiplay 的任何原因`JSpinner`，或者`JFormattedTextField`，这并没有让我感到任何意义，这些概念对*用户不友好*，请看：

*   使用[Java 日历](http://www.toedter.com/en/jcalendar/)

*   使用简单的[JSpinner 和 SpinnerDateModel](https://stackoverflow.com/questions/9004038/problems-using-simpledateformat/9004170#9004170)

# mercurial - 如何在 IntelliJ 中使用 Mercurial？

> ID：11881308
> 
> 赞同：2
> 
> 时间：2012-08-09T10:23:38.237
> 
> 标签：mercurial, intellij-idea

IntelliJ 中支持 Mercurial，但它不能正确处理重命名。即重命名文件或将文件移动到另一个包不会在 Mercurial 中重命名/移动文件。

这绝对令人讨厌。有没有更好的方法在 IntelliJ 中使用 Mercurial？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:51:01.247

您必须在设置 | 中注册您的 Mercurial 根。版本控制。在那里你必须指向确切的根目录，`<Project>`如果 hg 根在它上面，你不能使用 " " 映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:52:46.790

这可能是由于 IDEA 中的 VCS 根配置不正确造成的，[请查看评论中解决方案的相关问题](http://youtrack.jetbrains.com/issue/IDEA-65459)。

明确指定 mercurial 根目录而不是使用`<Project>`占位符应该会有所帮助。

# c# - 使用 ODBC 在 C# 中创建 Access 数据库

> ID：11881311
> 
> 赞同：0
> 
> 时间：2012-08-09T10:23:45.873
> 
> 标签：c#, winforms, windows-7-x64

如何使用 C# 和 ODBC 创建 MS Access 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:59:50.870

由此判断： [创建数据库时如何指定ODBC访问驱动格式](https://stackoverflow.com/questions/9205633/how-do-i-specify-the-odbc-access-driver-format-when-creating-the-database)

我会这样说：

```
enum RequestFlags : int
{
    ODBC_ADD_DSN = 1,
    ODBC_CONFIG_DSN = 2,
    ODBC_REMOVE_DSN = 3,
    ODBC_ADD_SYS_DSN = 4,
    ODBC_CONFIG_SYS_DSN = 5,
    ODBC_REMOVE_SYS_DSN = 6,
    ODBC_REMOVE_DEFAULT_DSN = 7
}

[DllImport("ODBCCP32.DLL",CharSet=CharSet.Unicode, SetLastError=true)]
static extern bool SQLConfigDataSourceW(UInt32 hwndParent , RequestFlags fRequest, string lpszDriver, string lpszAttributes); 
```

在你的主要方法中有这个：

```
string strDriverName = "Microsoft Access Driver (*.mdb, *.accdb)";
string strAttr = "CREATE_DBV12=c:\access2007.accdb";
SQLConfigDataSource(0, RequestFlags.ODBC_ADD_DSN, strDriverName, strAttr ); 
```

**警告：未经测试**

注意：我从 pinvoke.net 复制了 pInvoke 信息。
UInt32 hwndParent 好像不对，应该是 UIntPtr。
这在 Win64 上尤其重要，我认为当我查看您的标签时您需要它。
如果是这样，请使用 UIntPtr.Zero 而不是 0。但请先尝试。

另请注意，如果新项目打算很大，我不会将访问数据库用于新项目。如果您需要一个独立的数据库，请改用嵌入式 Firebird。这样你以后可以省去很多麻烦。

另请注意，较新的 64 位版本的 Windows 未预装 Access-driver AFAIK。

# r - as.array 改变数据

> ID：11881314
> 
> 赞同：1
> 
> 时间：2012-08-09T10:23:57.847
> 
> 标签：r

很简单的概念：

```
data(iris)
d1=as.matrix(iris)
d2=as.array(iris)
Error in <code>dimnames<-.data.framecode>(<code>*tmp*code>, value = list(n)) :invalid 'dimnames' given for data frame 
```

我做了很多种dimnames，失败了。如何使 as.array(iris) 成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:43:08.473

您可以选择其中一个维度（然后您甚至不需要`as.array`），也可以使用`c()`. 例子：

```
iris$Petal.Length
c(iris, recursive=T) 
```

要获取您可以在第一种情况下使用的维度名称，请键入`names(iris)`。

# c - 如何发送大于系统缓冲区的UDP数据报？

> ID：11881315
> 
> 赞同：0
> 
> 时间：2012-08-09T10:23:59.973
> 
> 标签：c, sockets, udp, buffer

这里的任何人都可以告诉我如何发送大于提供给 UDP 套接字的系统缓冲区的数据报，以便在 C 中测试 MSG_TRANC

以及如何获得套接字缓冲区的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:33:25.303

您始终可以使用使用该标志的`setsockopt`函数来增加缓冲区大小。`SO_SNDBUF`

否则`send`（或`sendto`）通常会阻塞。

但是，我建议您尝试重新设计您的协议，以便数据包适合发送缓冲区。您可以在收到包裹时重新组装（如果您对它们进行了适当的排序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:35:21.873

你的意思或想要做什么？
我希望你阅读[http://en.wikipedia.org/wiki/User_Datagram_Protocol](http://en.wikipedia.org/wiki/User_Datagram_Protocol)

您是否尝试发送总长度大于单个数据包大小的数据报？还是您用于构建数据包的发送缓冲区太小？

# android - Phonegap 应用程序不运行

> ID：11881321
> 
> 赞同：0
> 
> 时间：2012-08-09T10:24:09.083
> 
> 标签：android, cordova

我正在使用 Android Phonegap 1.0.0 我想重定向我的应用程序以在同一个 web 视图中打开所有外部 URL。我尝试了以下但它给出了错误。

`The connection to the server was unsuccessful. (file:///android_asset/www/index.html)`

我哪里出错了？

我的代码：

```
package com.phonegap.phonegapsample;
import com.phonegap.*;
import android.os.Bundle;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class PhonegapSampleActivity extends DroidGap {

private WebView myWebView;
private WebSettings myWebSetting;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState); 

    super.loadUrl("file:///android_asset/www/index.html");

    //Get the Webview
    myWebView = super.appView; 

    //Get the WebSettings
    myWebSetting = myWebView.getSettings();

    //Enable Javascript 
    myWebSetting.setJavaScriptEnabled(true);

    //Enable Zoom default : disabled
    myWebSetting.setBuiltInZoomControls(true);
    myWebSetting.setSupportZoom(true);              

    //myWebSetting.setDefaultZoom(ZoomDensity.FAR);
    //myWebSetting.setUseWideViewPort(true);
    //myWebSetting.setLoadWithOverviewMode(true);

    myWebView.setWebViewClient(new MyWebViewClient());

}

private class MyWebViewClient extends WebViewClient{

    @Override 
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;
    }

} 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:36:42.600

错误消息说无法加载初始 index.html，它没有说明外部链接，所以我会说你没有放入`index.html`目录`/assets/www/`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:50:52.337

**在super.loadUrl("file:///android_asset/www/index.html");**之前添加以下行

 **```
this.setIntegerProperty("loadUrlTimeoutValue", 70000); 
```**

# magento - 在 magento 中上传目录产品图片时出错

> ID：11881322
> 
> 赞同：0
> 
> 时间：2012-08-09T10:24:16.247
> 
> 标签：magento

我在将图像上传到目录产品图像时遇到问题。上传图片时返回错误“SSL 错误：无效或自签名证书”，即使站点未设置为 HTTPS URL。

![将图像上传到产品时出现 SSL 错误](../Images/2887eefe628d38eb93f26f889fbcacf5.png)

但是，管理员安全 URL 在 AdminPanel>>System>>Configuration>>web 设置中设置为“No”。

我该如何解决这个问题？请告诉我，任何人都找到了解决方案。

谢谢，

普拉桑斯 P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:40:46.367

尝试以下操作：

*   暂时禁用您的防病毒软件，最重要的是您的防火墙。
*   确保您尝试上传的文件不包含特殊字符。
*   尝试从禁用扩展的其他浏览器上传它。或以安全模式或隐私浏览打开 Firefox。如果您使用 chrome 或其他东西，则相同。
*   更新您的 Flash 播放器。或者卸载旧的并从 adobe.com 安装新副本
*   尝试从另一台计算机上传

在我的情况下是第一个。防火墙阻止了 Flash 播放器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:09:01.917

尝试将以下行添加到您的 php.ini 文件中：

```
suhosin.session.cryptua = off 
```

高温高压

# javascript - 如何获取一个人的 Google+ ID

> ID：11881324
> 
> 赞同：0
> 
> 时间：2012-08-09T10:24:17.053
> 
> 标签：javascript, google-plus

是否可以使用带有 javascript 的电子邮件地址获取一个人的 google+ id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:05:24.310

不可以。Google+ 没有 API 可让您从用户的电子邮件地址中查找用户的个人资料 ID。

# android - 使用无限适配器有 ClassCastException

> ID：11881328
> 
> 赞同：0
> 
> 时间：2012-08-09T10:24:29.157
> 
> 标签：android, commonsware-cwac

我有这个 classcastexception 我结合了 Fedor 的lazylist 和 Commonware 的 Endless

我有这个错误

```
08-09 18:06:26.553: E/AndroidRuntime(314): FATAL EXCEPTION: main
08-09 18:06:26.553: E/AndroidRuntime(314): java.lang.ClassCastException:com.example.endlesscustom.EndlessSample$CustomArrayAdapter
08-09 18:06:26.553: E/AndroidRuntime(314):  at com.example.endlesscustom.EndlessSample$DemoAdapter.appendCachedData(EndlessSample.java:174)
08-09 18:06:26.553: E/AndroidRuntime(314):  at com.commonsware.cwac.endless.EndlessAdapter$AppendTask.onPostExecute(EndlessAdapter.java:247) 
```

它指出了这个错误

```
ArrayAdapter<HashMap<String, String>> arrAdapterNew = ArrayAdapter<HashMap<String,String>>) getWrappedAdapter(); 
```

这是我的代码

```
public class EndlessSample extends ListActivity {

static int LIST_SIZE;
private int mLastOffset = 0;

static final int BATCH_SIZE = 3;

ArrayList<HashMap<String, String>> countriesSub = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.maina);
    init();
    Log.i("country", String.valueOf(COUNTRIES.length));
    Log.i("mstrings", String.valueOf(mStrings.length));

}

private void init() {
    LIST_SIZE = COUNTRIES.length;
    for (int i = 0; i <= BATCH_SIZE; i++) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("country", COUNTRIES[i]);
        map.put("pic", mStrings[i]);
        countriesSub.add(map);
    }
    setLastOffset(BATCH_SIZE);
    displayList(countriesSub);
}

private void setLastOffset(int i) {
    mLastOffset = i;
}

private int getLastOffset() {
    return mLastOffset;
}

private void displayList(ArrayList<HashMap<String, String>> countriesSub2) {
    setListAdapter(new DemoAdapter());
}

private class CustomArrayAdapter extends BaseAdapter {
    public ImageLoader imageLoader;
    private ArrayList<HashMap<String, String>> data;

    public CustomArrayAdapter(Context context, int resource,
            int textViewResourceId,
            ArrayList<HashMap<String, String>> mylist) {
        data = mylist;
        imageLoader = new ImageLoader(context);
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        HashMap<String, String> song = new HashMap<String, String>();

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) EndlessSample.this
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.row, null);
            holder = new ViewHolder();
            holder.word = (TextView) convertView
                    .findViewById(R.id.throbber);
            holder.pecture = (ImageView) convertView
                    .findViewById(R.id.imahe);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        Log.i("data size", String.valueOf(data.size()));
        song = data.get(position);
        holder.word.setText(song.get("country"));
        // holder.word.setText(String.valueOf(position + 1) + ". "
        // + countriesSub.get(position));
         imageLoader.DisplayImage(song.get("pic"), holder.pecture);
        return convertView;
    }

    public class ViewHolder {
        public ImageView pecture;
        public TextView word;
    }
}

class DemoAdapter extends EndlessAdapter {
    ArrayList<HashMap<String, String>> tempList = new ArrayList<HashMap<String, String>>();

    DemoAdapter() {
        super(new CustomArrayAdapter(EndlessSample.this,
                android.R.layout.simple_list_item_1, android.R.id.text1,
                countriesSub));

    }

    @Override
    protected View getPendingView(ViewGroup parent) {
        View row = getLayoutInflater().inflate(R.layout.row, null);

        View child = row.findViewById(android.R.id.text1);
        // child.setVisibility(View.GONE);
        child = row.findViewById(R.id.throbber);
        child.setVisibility(View.VISIBLE);

        return (row);
    }

    @Override
    protected boolean cacheInBackground() {
        tempList.clear();
        int lastOffset = getLastOffset();
        if (lastOffset < LIST_SIZE) {
            int limit = lastOffset + BATCH_SIZE;
            for (int i = (lastOffset + 1); (i <= limit && i < LIST_SIZE); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("country", COUNTRIES[i]);
                map.put("pic", mStrings[i]);
                tempList.add(map);
            }
            setLastOffset(limit);

            if (limit < LIST_SIZE) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    }

    @Override
    protected void appendCachedData() {

        @SuppressWarnings("unchecked")
        ArrayAdapter<HashMap<String, String>> arrAdapterNew = (ArrayAdapter<HashMap<String, String>>) getWrappedAdapter();
        int listLen = tempList.size();
        for (int i = 0; i < listLen; i++) {
            arrAdapterNew.add(tempList.get(i));
        }
    }
}

static final String[] COUNTRIES = new String[] { "Afghanistan", "Albania",
        "Algeria", "American Samoa", "Andorra", "Angola", "Anguilla",
        "Antarctica", "Antigua and Barbuda", "Argentina", "Armenia",
        "Aruba", "Australia", "Austria", "Azerbaijan", "Bahrain",
        "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin",
        "Bermuda", "Bhutan", "Bolivia", "Bosnia and Herzegovina",
        "Botswana", "Bouvet Island", "Brazil",
        "British Indian Ocean Territory", "British Virgin Islands",
        "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cote d'Ivoire",
        "Cambodia", "Cameroon", "Canada", "Cape Verde", "Cayman Islands",
        "Central African Republic", "Chad", "Chile", "China",
        "Christmas Island", "Cocos (Keeling) Islands", "Colombia",
        "Comoros", "Congo", "Cook Islands", "Costa Rica", "Croatia",
        "Cuba", "Cyprus", "Czech Republic",
        "Democratic Republic of the Congo", "Denmark", "Djibouti",
        "Dominica", "Dominican Republic", "East Timor", "Ecuador", "Egypt",
        "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia",
        "Ethiopia", "Faeroe Islands", "Falkland Islands", "Fiji",
        "Finland", "Former Yugoslav Republic of Macedonia", "France",
        "French Guiana", "French Polynesia", "French Southern Territories",
        "Gabon", "Georgia", "Germany", "Ghana", "Gibraltar", "Greece",
        "Greenland", "Grenada", "Guadeloupe", "Guam", "Guatemala",
        "Guinea", "Guinea-Bissau", "Guyana", "Haiti",
        "Heard Island and McDonald Islands", "Honduras", "Hong Kong",
        "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq",
        "Ireland", "Israel", "Italy", "Jamaica" };

private String[] mStrings = {
        "http://a3.twimg.com/profile_images/670625317/aam-logo-v3-twitter.png",
        "http://a3.twimg.com/profile_images/740897825/AndroidCast-350_normal.png",
        "http://a3.twimg.com/profile_images/121630227/Droid_normal.jpg",
        "http://a1.twimg.com/profile_images/957149154/twitterhalf_normal.jpg",
        "http://a1.twimg.com/profile_images/97470808/icon_normal.png",
        "http://a3.twimg.com/profile_images/511790713/AG.png",
        "http://a3.twimg.com/profile_images/956404323/androinica-avatar_normal.png",
        "http://a1.twimg.com/profile_images/909231146/Android_Biz_Man_normal.png",
        "http://a3.twimg.com/profile_images/72774055/AndroidHomme-LOGO_normal.jpg",
        "http://a1.twimg.com/profile_images/349012784/android_logo_small_normal.jpg",
        "http://a1.twimg.com/profile_images/841338368/ea-twitter-icon.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet_normal.png",
        "http://a1.twimg.com/profile_images/850960042/elandroidelibre-logo_300x300_normal.jpg",
        "http://a1.twimg.com/profile_images/655119538/andbook.png",
        "http://a3.twimg.com/profile_images/768060227/ap4u_normal.jpg",
        "http://a1.twimg.com/profile_images/74724754/android_logo_normal.png",
        "http://a3.twimg.com/profile_images/681537837/SmallAvatarx150_normal.png",
        "http://a1.twimg.com/profile_images/63737974/2008-11-06_1637_normal.png",
        "http://a3.twimg.com/profile_images/548410609/icon_8_73.png",
        "http://a1.twimg.com/profile_images/612232882/nexusoneavatar_normal.jpg",
        "http://a1.twimg.com/profile_images/213722080/Bugdroid-phone_normal.png",
        "http://a1.twimg.com/profile_images/645523828/OT_icon_090918_android_normal.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet.png",
        "http://a1.twimg.com/profile_images/850960042/elandroidelibre-logo_300x300_normal.jpg",
        "http://a1.twimg.com/profile_images/655119538/andbook_normal.png",
        "http://a3.twimg.com/profile_images/511790713/AG_normal.png",
        "http://a3.twimg.com/profile_images/956404323/androinica-avatar.png",
        "http://a1.twimg.com/profile_images/909231146/Android_Biz_Man_normal.png",
        "http://a3.twimg.com/profile_images/72774055/AndroidHomme-LOGO_normal.jpg",
        "http://a1.twimg.com/profile_images/349012784/android_logo_small_normal.jpg",
        "http://a1.twimg.com/profile_images/841338368/ea-twitter-icon_normal.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet_normal.png",
        "http://a1.twimg.com/profile_images/850960042/elandroidelibre-logo_300x300.jpg",
        "http://a1.twimg.com/profile_images/655119538/andbook_normal.png",
        "http://a3.twimg.com/profile_images/511790713/AG_normal.png",
        "http://a3.twimg.com/profile_images/956404323/androinica-avatar_normal.png",
        "http://a1.twimg.com/profile_images/909231146/Android_Biz_Man_normal.png",
        "http://a3.twimg.com/profile_images/121630227/Droid.jpg",
        "http://a1.twimg.com/profile_images/957149154/twitterhalf_normal.jpg",
        "http://a1.twimg.com/profile_images/97470808/icon_normal.png",
        "http://a3.twimg.com/profile_images/511790713/AG_normal.png",
        "http://a3.twimg.com/profile_images/956404323/androinica-avatar_normal.png",
        "http://a1.twimg.com/profile_images/909231146/Android_Biz_Man.png",
        "http://a3.twimg.com/profile_images/72774055/AndroidHomme-LOGO_normal.jpg",
        "http://a1.twimg.com/profile_images/349012784/android_logo_small_normal.jpg",
        "http://a1.twimg.com/profile_images/841338368/ea-twitter-icon_normal.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet.png",
        "http://a3.twimg.com/profile_images/670625317/aam-logo-v3-twitter_normal.png",
        "http://a3.twimg.com/profile_images/740897825/AndroidCast-350_normal.png",
        "http://a3.twimg.com/profile_images/121630227/Droid_normal.jpg",
        "http://a1.twimg.com/profile_images/957149154/twitterhalf_normal.jpg",
        "http://a1.twimg.com/profile_images/97470808/icon.png",
        "http://a3.twimg.com/profile_images/511790713/AG_normal.png",
        "http://a3.twimg.com/profile_images/956404323/androinica-avatar_normal.png",
        "http://a1.twimg.com/profile_images/909231146/Android_Biz_Man_normal.png",
        "http://a3.twimg.com/profile_images/72774055/AndroidHomme-LOGO_normal.jpg",
        "http://a1.twimg.com/profile_images/349012784/android_logo_small_normal.jpg",
        "http://a1.twimg.com/profile_images/841338368/ea-twitter-icon.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet_normal.png",
        "http://a1.twimg.com/profile_images/850960042/elandroidelibre-logo_300x300_normal.jpg",
        "http://a1.twimg.com/profile_images/655119538/andbook_normal.png",
        "http://a3.twimg.com/profile_images/768060227/ap4u_normal.jpg",
        "http://a1.twimg.com/profile_images/74724754/android_logo.png",
        "http://a3.twimg.com/profile_images/681537837/SmallAvatarx150_normal.png",
        "http://a1.twimg.com/profile_images/63737974/2008-11-06_1637_normal.png",
        "http://a3.twimg.com/profile_images/548410609/icon_8_73_normal.png",
        "http://a1.twimg.com/profile_images/612232882/nexusoneavatar_normal.jpg",
        "http://a1.twimg.com/profile_images/213722080/Bugdroid-phone_normal.png",
        "http://a1.twimg.com/profile_images/645523828/OT_icon_090918_android.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet_normal.png",
        "http://a1.twimg.com/profile_images/850960042/elandroidelibre-logo_300x300_normal.jpg",
        "http://a1.twimg.com/profile_images/655119538/andbook.png",
        "http://a3.twimg.com/profile_images/511790713/AG_normal.png",
        "http://a3.twimg.com/profile_images/956404323/androinica-avatar_normal.png",
        "http://a1.twimg.com/profile_images/909231146/Android_Biz_Man_normal.png",
        "http://a3.twimg.com/profile_images/72774055/AndroidHomme-LOGO_normal.jpg",
        "http://a1.twimg.com/profile_images/349012784/android_logo_small_normal.jpg",
        "http://a1.twimg.com/profile_images/841338368/ea-twitter-icon.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet_normal.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet_normal.png",
        "http://a1.twimg.com/profile_images/850960042/elandroidelibre-logo_300x300_normal.jpg",
        "http://a1.twimg.com/profile_images/655119538/andbook_normal.png",
        "http://a3.twimg.com/profile_images/511790713/AG_normal.png",
        "http://a3.twimg.com/profile_images/956404323/androinica-avatar_normal.png",
        "http://a1.twimg.com/profile_images/909231146/Android_Biz_Man_normal.png",
        "http://a3.twimg.com/profile_images/121630227/Droid_normal.jpg",
        "http://a1.twimg.com/profile_images/957149154/twitterhalf.jpg",
        "http://a1.twimg.com/profile_images/97470808/icon_normal.png",
        "http://a3.twimg.com/profile_images/511790713/AG_normal.png",
        "http://a3.twimg.com/profile_images/956404323/androinica-avatar_normal.png",
        "http://a1.twimg.com/profile_images/909231146/Android_Biz_Man_normal.png",
        "http://a3.twimg.com/profile_images/72774055/AndroidHomme-LOGO_normal.jpg",
        "http://a1.twimg.com/profile_images/349012784/android_logo_small.jpg",
        "http://a1.twimg.com/profile_images/841338368/ea-twitter-icon_normal.png",
        "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
        "http://a3.twimg.com/profile_images/77641093/AndroidPlanet_normal.png" };
} 
```

如果有人遇到此错误，请帮助

太感谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:44:54.877

您放入的适配器`EndlessAdapter`是 a `CustomArrayAdapter`，而不是 a `ArrayAdapter<HashMap<String, String>>`，这就是为什么`ClassCastException`在尝试将`CustomArrayAdapter`to`ArrayAdapter<HashMap<String, String>>`作为调用的一部分时会得到 a 的原因`getWrappedAdapter()`。

# c# - ClickOnce 安装给出错误“无效的相对文件路径”

> ID：11881331
> 
> 赞同：0
> 
> 时间：2012-08-09T10:24:45.200
> 
> 标签：c#, .net, visual-studio-2010, deployment, clickonce

我正在使用 Visual Studio 2010、.NET4

我的应用程序是使用 ClickOnce 发布的，它成功地发布到服务器或本地磁盘，但是当尝试从 MyApp.application 安装时，它给出了错误：

```
ERROR SUMMARY
Below is a summary of the errors, details of these errors are listed later in the log.
* Activation of \\*.*.*.com\**\**\MyApp.application resulted in exception. Following failure messages were detected:
    + Invalid relative file path.

ERROR DETAILS
Following errors were detected during this operation.
* [09/08/2012 10:53:59] System.ArgumentException
    - Invalid relative file path.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.UriHelper.UriFromRelativeFilePath(Uri baseUri, String path)
        at System.Deployment.Application.DownloadManager.MapFileSourceUri(AssemblyManifest deployManifest, Uri sourceUriBase, String fileName)
        at System.Deployment.Application.DownloadManager.ProcessDownloadedFile(Object sender, DownloadEventArgs e)
        at System.Deployment.Application.FileDownloader.DownloadModifiedEventHandler.Invoke(Object sender, DownloadEventArgs e)
        at System.Deployment.Application.FileDownloader.OnModified()
        at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
        at System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
        at System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
        at System.Deployment.Application.DownloadManager.DownloadDependencies(SubscriptionState subState, AssemblyManifest deployManifest, AssemblyManifest appManifest, Uri sourceUriBase, String targetDirectory, String group, IDownloadNotification notification, DownloadOptions options)
        at System.Deployment.Application.ApplicationActivator.DownloadApplication(SubscriptionState subState, ActivationDescription actDesc, Int64 transactionId, TempDirectory& downloadTemp)
        at System.Deployment.Application.ApplicationActivator.InstallApplication(SubscriptionState& subState, ActivationDescription actDesc)
        at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
        at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state) 
```

有没有办法查看哪个路径出错以及为什么？MSDN 中提到的路径唯一的问题是它们的长度不能超过 100 个字符，但是我应该在哪里寻找这些路径，唯一的长路径可能在引用或其他东西中，但我认为这应该不是问题。

最后，我前段时间更改了解决方案名称，并且涉及在某些文件中手动更改它，即使在整个解决方案中的任何文件中都没有通过搜索找到旧名称，它是否可能仍然存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:25:45.767

星号是你的还是它们实际上在日志中？部署 URL 看起来有些奇怪。您应该将发布文件位置设置为指向文件所在的位置。安装 URL 应指向部署所在的文件夹。

如果您想获得有关在安装部署时发生的情况的更多信息，您可以[打开增强日志记录。](http://robindotnet.wordpress.com/2010/05/31/enhanced-logging-in-clickonce-deployment/)

# ruby-on-rails - 渲染不运行动作

> ID：11881334
> 
> 赞同：0
> 
> 时间：2012-08-09T10:24:58.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我几乎使用了常规脚手架中的代码。唯一的变化是 4.times 块，我在这个问题上制作了 4 个答案对象。原因是我在视图中有相应的输入字段。现在，如果验证失败，它会再次呈现 new.html.erb，但是在我阅读完之后它不会再次调用“新”操作。但是我依赖于 4.times 块，因为否则视图中的循环没有答案可以循环。我该如何解决？我尝试重定向，但错误消息消失了。

新动作

```
def new
    @question = Question.new

    4.times do
      @question.answers.build
    end

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @question }
    end
  end 
```

创建动作

```
def create
    @question = Question.new(params[:question])

    respond_to do |format|
      if @question.save
        format.html { redirect_to @question, notice: 'Question was successfully created.' }
        format.json { render json: @question, status: :created, location: @question }
      else
        format.html { render action: "new" }
        format.json { render json: @question.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:00:58.317

您需要查看的是`@question`在您的创建操作中。从理论上讲，它应该包含 4 个新建的答案，因此重新显示表单也将包含这些。

如果它们没有被写入，您可能需要查看[Accepts_nested_attributes_for](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for)以确保它从请求中正确反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:26:25.533

正如您的标题所暗示的那样：`render`只渲染（属于的模板）动作而不执行动作本身。

要在失败的创建调用中再次呈现您的预建答案，我建议`:reject_if`从嵌套属性设置中删除条件。这样，将保留提交的空答案。为了防止它们被写入数据库，只需向 Question 模型添加常规验证...

# node.js - node.js中没有sleep()/wait for mutex，那么大IO任务怎么处理呢？

> ID：11881335
> 
> 赞同：1
> 
> 时间：2012-08-09T10:25:01.830
> 
> 标签：node.js

我需要检查大量文件名，但我还需要响应网络客户端。最简单的方法是执行：

```
    for(var i=0;i < array.length;i++) {
        fs.readFile(array[i], function(err, data) {...});
    }

```

，但数组可以是任意长度，比如 100000，因此一次执行 100000 次读取不是一个好主意，另一方面，执行 fs.readFileSync() 可能需要太长时间。还在回调中启动下一个 fs.readFile() ，如下所示：

```
    var idx = 0；
    功能检查文件（）{
       fs.readFile(array[Idx], function (err, data) {
          idx++;
          if (Idx < array.length) {
             检查文件（）；
          } 别的 {
             idx = 0;
             设置超时（检查文件，10000）；// 在一秒后开始检查文件
          }
       });
    }

```

也不是最佳选择，因为网络客户端会不断更新 array[] - 删除一些项目，添加新项目等等。

在 node.js 中完成此类任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:19:30.177

您应该坚持您的第一个解决方案 ( `fs.readFile`)。对于文件 I/O，node.js 使用线程池。原因是大多数 unix 内核没有为文件系统提供高效的异步 API。即使您同时启动 10,000 次读取，也只有少数读取会实际运行，其余的将在队列中等待。

为了使这个答案更有趣，我再次浏览了节点的代码以确保事情没有改变。

长话短说，文件 I/O 使用阻塞系统调用，并且由**最多具有 4 个并发线程的线程池完成**。

重要的代码在[libeio](http://software.schmorp.de/pkg/libeio.html)中，由[libuv](https://github.com/joyent/libuv)抽象出来。所有 I/O 代码都由对请求进行排队的宏包装。例如：

```
eio_req *eio_read (int fd, void *buf, size_t length, off_t offset, int pri, eio_cb cb, void *data, eio_channel *channel)
{
  REQ (EIO_READ); req->int1 = fd; req->offs = offset; req->size = length; req->ptr2 = buf; SEND;
} 
```

`REQ`准备请求并将`SEND`其排队。我们最终在`etp_maybe_start_thread`：

```
static unsigned int started, idle, wanted = 4;

(...)

static void
etp_maybe_start_thread (void)
{
  if (ecb_expect_true (etp_nthreads () >= wanted))
    return;
(...) 
```

队列保持 4 个线程运行以处理请求。当我们的读取请求最终被执行时，eio 只需使用`read`unistd.h 中的块：

```
case EIO_READ:      ALLOC (req->size);
                          req->result = req->offs >= 0
                                      ? pread     (req->int1, req->ptr2, req->size, req->offs)
                                      : read      (req->int1, req->ptr2, req->size); break; 
```

# html - 如何删除焦点文本框周围的边框

> ID：11881338
> 
> 赞同：0
> 
> 时间：2012-08-09T10:25:04.687
> 
> 标签：html, css

当我们点击文本框时，Chrome 中会出现一个边框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:45:30.190

`$outline:none;`以这种方式使用：

```
textarea:focus, input:focus{
    outline: none;
} 
```

这样，它仅在使用时才适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:27:05.173

CSS：

```
textbox:focus {
    outline: none;
} 
```

**更新**

我`texbox`只是为了说明，在你的代码中你应该使用基于你的 html 之类的元素`input, button, textarea`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:28:45.663

像这样使用`outline: none;`：

```
input, textarea {
   outline: none;
} 
```

# javascript - 为什么它说 loc 不是函数

> ID：11881340
> 
> 赞同：0
> 
> 时间：2012-08-09T10:25:06.557
> 
> 标签：javascript, google-maps

你好我试图通过调用循环外的函数将id的两个位置保存到一个数组中。问题是它给了我一个错误，说 loc 不是一个函数。有谁知道问题出在哪里？

```
var geocoder;
var map, x, y;
var loc = [];
geocoder = new google.maps.Geocoder();
//    var address = document.getElementById("address").value;
//  var user='33936357';
$.getJSON("http://api.twitter.com/1/users/lookup.json?user_id=33936357,606020001&callback=?", function (data) {
    $.each(data, function (i, item) {
        var screen_name = item.screen_name;
        var img = item.profile_image_url;
        var location = item.location;
        geocoder.geocode({
            address: location
        }, function (response, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var x = response[0].geometry.location.lat(),
                    y = response[0].geometry.location.lng();
                loc(x, y);

            } else {
                alert("Geocode was not successful for the following reason: " + status);
            }
        }); //GEOCODER.GEOCODE
    });

    function loc(x, y) {
        loc.push({
            latitude: x,
            longitude: y
        });
    }
    console.log(loc); //$.EACH
}); //.GETJSON
} //CODEADDRESS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:43:34.487

在`$.each()`回调函数中创建一个局部变量：

```
var location = item.location; 
```

...`location()`与*在*`$.each()`. _ 通过重新使用名称，内部变量“屏蔽”了外部函数。

因此，您会收到关于它不是函数的错误，因为在该回调的范围内`location`指的是不是函数的局部变量。

只需更改变量或函数的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:30:20.820

您声明了一个名为`loc`. 为数组变量使用不同的名称，或更改函数名称。

你的问题如下：

```
​var foo = [];
function foo() {
  foo.push(1);    
}
foo(); // here foo is the array [] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:31:57.643

这里 loc 是一个数组：

```
var loc=[]; 
```

这里 loc 是一个函数：

```
function loc(x,y){loc.push({latitude:x,longitude:y});} 
```

您的调试器在哪一行报告错误？

# iframe - iframe 父窗口

> ID：11881343
> 
> 赞同：0
> 
> 时间：2012-08-09T10:25:21.553
> 
> 标签：iframe

我有一个 index.html 页面，其中包含一个 iframe，网站的所有页面都加载到该 iframe 中。有没有人有功能（也许是javascript）？这样当您通过谷歌站点地图打开 Home.html 时，它会显示在 Index.html 的父框架中，而不是自行打开？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:27:11.333

尝试将以下内容添加到`<head>`内页的 - 部分：

```
<base target="_parent" /> 
```

但请注意，这将打开父页面内页中包含的所有链接。

# java - MongoDB 中 cursor.count() 和 cursor.size() 之间的区别

> ID：11881347
> 
> 赞同：17
> 
> 时间：2012-08-09T10:25:33.907
> 
> 标签：java, mongodb, mongodb-java, mongo-java

MongoDB 的`cursor.count()`和方法有什么区别？`cursor.size()``DBCursor`

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-09T10:29:44.133

从[MongoDB Java Driver 的 Javadoc 中](http://api.mongodb.org/java/2.8.0/com/mongodb/DBCursor.html)，它说：

> [DBCursor.count()](http://api.mongodb.org/java/2.8.0/com/mongodb/DBCursor.html#count%28%29)：计算与查询匹配的对象数。这**没有**考虑限制/跳过。
> 
> [DBCursor.size()](http://api.mongodb.org/java/2.8.0/com/mongodb/DBCursor.html#size%28%29)：计算与查询匹配的对象数。这确实考虑了限制/跳过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-31T05:16:20.823

不仅仅是一个答案，我还想指出我们团队面临“混合”这两者的一个问题。

我们有这样的事情：

```
DBCursor cursor = collection.find(query).limit(batchSize);

logger.info("{} items found.", cursor.count());

while (cursor.hasNext()) {
...
} 
```

事实证明，在调用该`cursor.count()`方法后，限制被**忽略**了（请看一下[另一个](https://stackoverflow.com/questions/21193750/mongo-java-driver-not-obeying-limit-method)问题），我们想知道查询返回了多少项目，所以我们应该调用该`cursor.size()`方法，因为调用那个`count`确实产生不良的附带影响。

我希望这对其他人有帮助，因为找到我们面临的问题的根源并不容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-13T23:20:25.467

`cursor.count`当我第一次阅读有关and之间区别的文档时`cursor.size`，我同样被难住了 b/c 我不明白不考虑`skip`or是什么意思`limit`。我发现这篇文章很有帮助，[请在此处阅读更多](https://www.w3resource.com/mongodb/shell-methods/cursor/cursor-count.php)内容。我认为以下示例说明了差异

```
// by default cursor.count ignores limit or skip. note that 100 records were returned despite the limit being 5
> db.restaurants.find( { "cuisine": "Bakery", "address.zipcode": "10462" } ).limit(5).count();
100
// if you want to consider limits and skips, then add an optional parameter specifying so
> db.restaurants.find( { "cuisine": "Bakery", "address.zipcode": "10462" } ).limit(5).count(true);
5
// cursor.size on the other hand abides by limits and skips
> db.restaurants.find( { "cuisine": "Bakery", "address.zipcode": "10462" } ).limit(5).size();
5 
```

# windows - Windows XP - 受限制的文件重命名

> ID：11881348
> 
> 赞同：0
> 
> 时间：2012-08-09T10:25:33.900
> 
> 标签：windows, windows-explorer

当我尝试通过 Windows 资源管理器（我使用的是 Windows XP）重命名某些文件时，我在非常罕见的情况下遇到了一些文件，因此我只能添加几个字符，然后我就无法继续前进了。

例如，如果我想重命名：

```
AFileName.doc 
```

至：

```
thisIsANewVersionOfFileName.doc 
```

我只能做到：

```
thiAFileName.doc 
```

我已经尝试了一些“受影响”的文件，并得出以下结论：

*   名称的长度没有区别；
*   它显然会影响任何文件类型（.doc、.xls、.pdf 等）；
*   每个文件位于不同的目录中
    *   可能会影响各自目录中“浅”和“深”的文件；
*   每个文件在其各自的应用程序（Word、Excel、Adobe Reader）中没有任何限制，例如只读、密码保护。

我想就可能导致此问题的原因提出一些建议，因为我需要重命名所述文件，但由于此问题而无法这样做。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:28:40.593

好吧，经过快速谷歌搜索，我发现了这个：

> A 点：Windows XP 的 255 个字符限制或 Windows Vista 的 260 个字符限制适用于整个文件路径，而不仅仅是文件名。

[Windows 上长文件名的限制 [播客必读]](http://labnol.blogspot.se/2006/10/limitations-with-long-file-names-on.html)

# django - Django 用另一个模型对象值替换部分字符串

> ID：11881352
> 
> 赞同：0
> 
> 时间：2012-08-09T10:25:41.053
> 
> 标签：django, django-models, django-templates, django-views

我有带有 TextField 的模型，并且该字段中的存储值（大量文本）包含需要用另一个模型（即小型图像库）中的适当内容替换的单词。我想用这个词作为某种信号，它会告诉 django 模板在哪里放置这个小画廊在内容中。第二个模型（图库）包含很少的 3-8 个图像，因此当用户（来自管理区域）写单词 ie 时。`#gallery.first`将从第一个命名的画廊加载缩略图。

```
class Foo(models.model):
    ...
    text = models.TextField()
    ...

class Gallery(models.model):
    name = models.CharField(max_length=100, unique=True)

    def __unicode__(self):
        return self.name

class Image(models.Model):
    gallery = models.ForeignKey(Gallery)
    image = models.ImageField() 
```

第一次我想拆分视图中的所有单词`for word in foo.text:`并搜索/替换，但是因为文本字段包含很多单词，这可能不是一个好主意。但是，如果我尝试创建自定义标签并在文本字段中写入，`{% mytag %}`它不会呈现为模板标签。还有另一种方法可以让这个工作吗？

# html - 如何设置 ah:selectBooleanCheckbox 的边框样式？

> ID：11881356
> 
> 赞同：1
> 
> 时间：2012-08-09T10:26:04.190
> 
> 标签：html, css, jsf

我怎样才能给`<h:selectBooleanCheckbox>`红色边框？

我尝试如下，但边框根本没有出现。

```
<h:selectBooleanCheckbox style="border: 1px solid red;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:53:51.260

试试这个，

```
<h:selectBooleanCheckbox id="deleSub" style="border-color:red;" value="#mobeeCustomerHome.deleteSubscription}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:36:19.840

JSF`<h:selectBooleanCheckbox>`生成一个 HTML`<input type="checkbox">`元素。HTML 元素的样式`<input type="checkbox">`由客户端使用的特定网络浏览器非常严格地控制。

`border`仅在 Internet Explorer 中使用，即使这样，外观也很丑陋。盒子和边框之间有一些很好的填充。为了让它在其他浏览器中以您想要的方式出现，您应该使用它`outline`。

```
<h:selectBooleanCheckbox style="outline: 1px solid red" /> 
```

请注意，这反过来在 IE 中不起作用！如果您想在所有浏览器中都有一个红色边框，您可能需要同时指定这*两个CSS 属性。*

```
<h:selectBooleanCheckbox style="border: 1px solid red; outline: 1px solid red" /> 
```

请注意，这与 JSF 完全无关。这是纯粹的 HTML/CSS 问题。JSF 仅仅是一个 HTML 代码生成器。问题最终归结为 HTML`<input type="checkbox">`元素的样式性。

一个完全不同的选择是使用第 3 方 JSF 组件库，它允许对 UI 进行更细粒度的控制，例如[PrimeFaces](http://www.primefaces.org)。[另请`<p:selectBooleanCheckbox>`](http://www.primefaces.org/showcase/ui/selectBooleanCheckbox.jsf)参阅[陈列柜](http://www.primefaces.org/showcase/ui/selectBooleanCheckbox.jsf)。它在幕后使用[jQuery UI](http://jqueryui.com/)（带有[CSS themeroller](http://jqueryui.com/themeroller/)！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:18:51.823

这与 HTML 复选框本身而不是 JSF 标记有关。

请参阅帖子： [如何在 CSS 中更改复选框的边框样式？](https://stackoverflow.com/questions/2460501/how-to-change-checkboxs-border-style-in-css)

你可以试试：

```
outline: 1px solid red;
-moz-appearance: none; 
```

这就是我认为您在 FF 中寻找的方式的一部分，它在 IE8 中没有任何作用（边框在 IE8 中也没有任何作用）。我还没有测试任何其他浏览器。

# matlab - 用编译matlab exe查看命令行

> ID：11881357
> 
> 赞同：0
> 
> 时间：2012-08-09T10:26:06.257
> 
> 标签：matlab, command-line, executable

我有一个在 matlab 中工作的 matlab gui，但如果我将它编译为 gui，应用程序不会响应按钮并且不知何故无法工作。

现在我想查看所有错误消息，但我不能，因为没有命令行了。

我可以打开 matlab 可执行文件的命令行输出窗口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:36:16.030

可以简单地从 dos shell 运行他的 exe。所有命令行输出将在 dos shell 中可用。

# javascript - 在“onfocus”事件中检查 CapsLock ON

> ID：11881359
> 
> 赞同：3
> 
> 时间：2012-08-09T10:26:27.653
> 
> 标签：javascript, jquery, onfocus, key-events

我用于检查 Capslock 是否打开的以下代码在“onkeypress”事件中工作正常。

但我想要它用于“onfocus”事件。我尝试将控件的“onkeypress”替换为“onfocus”，但它对我不起作用。

有什么帮助吗？（在 javascript 或 Jquery 中）

```
 <script type="text/javascript" language="Javascript">
    function capLock(e) {
        kc = e.keyCode ? e.keyCode : e.which;
        sk = e.shiftKey ? e.shiftKey : ((kc == 16) ? true : false);
        if (((kc >= 65 && kc <= 90) && !sk) || ((kc >= 97 && kc <= 122) && sk))
            document.getElementById('divMayus').style.visibility = 'visible';
        else
            document.getElementById('divMayus').style.visibility = 'hidden';
    }
</script>

<input type="text" name="txtuname" />
<input type="password" name="txtPassword" onkeypress="capLock(event)" />
<div id="divMayus" style="visibility:hidden">Caps Lock is on.</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:15:18.557

有一个名为[capslockstate](https://github.com/nosilleg/capslockstate-jquery-plugin)的 jQuery 插件，它将跟踪大写锁定键的状态，允许您在需要时使用该信息。

它将监视整个页面的状态，然后您可以在所需元素获得焦点时检索状态。

它也基于观察按键，但不限于较低的 ASCII 字符并处理诸如 Caps Lock 键本身被按下的情况。

你的情况会变成这样：

```
<script src="{path-to}/jquery-capslockstate.js"></script>
<script>
    $(document).ready(function() {
        $(window).capslockstate();

        $(window).bind("capsOn", function(event) {
            if ($("#txtPassword:focus").length > 0) {
                document.getElementById('divMayus').style.visibility = 'visible';
            }
        });
        $(window).bind("capsOff capsUnknown", function(event) {
            document.getElementById('divMayus').style.visibility = 'hidden';
        });
        $("#txtPassword").bind("focusout", function(event) {
            document.getElementById('divMayus').style.visibility = 'hidden';
        });
        $("#txtPassword").bind("focusin", function(event) {
            if ($(window).capslockstate("state") === true) {
                document.getElementById('divMayus').style.visibility = 'visible';
            }
        });
    });
</script>

<input type="text" name="txtuname" />
<input type="password" name="txtPassword" id="txtPassword" />
<div id="divMayus" style="visibility:hidden">Caps Lock is on.</div> 
```

请注意，我只对必要的部分进行了 jQueryified，还有更多工作要做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:49:29.173

不幸的是，事件对象的 keyCode 属性仅在基于键的事件上发送（原因很明显），这就是为什么它不能在 onfocus、onclick 等上工作。

没有任何其他 JavaScript 方法可以做到这一点 - 尽管如果您使用 flash 有一个潜在的解决方案 - 但这对于您的要求来说似乎有点过分......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:05:20.787

似乎不可能检测到大写锁定 onfocus 我认为这可能会对您有所帮助，请访问此

[http://jaspreetchahal.org/jquery-caps-lock-detection-plugin/](http://jaspreetchahal.org/jquery-caps-lock-detection-plugin/)

# jquery - 自定义谷歌翻译下拉

> ID：11881361
> 
> 赞同：7
> 
> 时间：2012-08-09T10:26:32.643
> 
> 标签：jquery, css, google-translator-toolkit

我有一个网站，在这个网站上添加了谷歌翻译，这样人们就可以看到不同语言的网站

我添加的代码是

```
<div id="google_translate_element"></div>
<div id="language"></div>
<script type="text/javascript">
function googleTranslateElementInit() {
new google.translate.TranslateElement({
    pageLanguage: 'en', includedLanguages: 'bn,en,kn', layout: google.translate.TranslateElement.InlineLayout.SIMPLE
}, 'google_translate_element');
}
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

现在我想自定义下拉菜单，如背景颜色、文本颜色、文本大小和宽度我该怎么做

请帮我

我尝试将下拉不透明度设置为 0 并将我的下拉菜单放在同一个地方，以便它的作用相同但它不起作用....

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T19:11:50.940

我知道这是一篇旧帖子，但我在这里为其他像我一样遇到/将遇到同样问题的人分享我的解决方案。

下拉列表位于 内部`iframe`，因此仅在页面上指定其 CSS 将无济于事。以下是我使用 jQuery 为我的 Google Translator 下拉菜单设置样式的方法：

```
$('document').ready(function () {
    $('#google_translate_element').on("click", function () {

        // Change font family and color
        $("iframe").contents().find(".goog-te-menu2-item div, .goog-te-menu2-item:link div, .goog-te-menu2-item:visited div, .goog-te-menu2-item:active div, .goog-te-menu2 *")
            .css({
                'color': '#544F4B',
                'font-family': 'tahoma'
            });

        // Change hover effects
        $("iframe").contents().find(".goog-te-menu2-item div").hover(function () {
            $(this).css('background-color', '#F38256').find('span.text').css('color', 'white');
        }, function () {
            $(this).css('background-color', 'white').find('span.text').css('color', '#544F4B');
        });

        // Change Google's default blue border
        $("iframe").contents().find('.goog-te-menu2').css('border', '1px solid #F38256');

        // Change the iframe's box shadow
        $(".goog-te-menu-frame").css({
            '-moz-box-shadow': '0 3px 8px 2px #666666',
            '-webkit-box-shadow': '0 3px 8px 2px #666',
            'box-shadow': '0 3px 8px 2px #666'
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-20T05:29:09.063

对于下拉语言链接颜色：

只需将此脚本添加到 head ..

```
<script>
var $jt = jQuery.noConflict();
$jt('document').ready(function () {

    $jt('#google_translate_element').on("click", function () {

var $frame = $jt('.goog-te-menu-frame:first');
$frame.contents().find(".goog-te-menu2-item div")
            .css({
                'color': '#544F4B',
                'font-family': 'tahoma',

  }).hover(function(){
   $jt(this).css("background","#eeeeee");
  },function(){
   $jt(this).css("background","");
  }); 
   });
});
</script> 
```

# c# - Console.Write() - 写入到哪里，以及如何取回写入的数据（在网页中）

> ID：11881362
> 
> 赞同：1
> 
> 时间：2012-08-09T10:26:31.820
> 
> 标签：c#, asp.net, .net, console

我已经在我使用过的许多代码示例、教程和其他人的代码中看到了它。我从来没有真正理解（甚至学会）人们为什么使用`Console.Write(exception.Message);`.

我能想到的唯一原因是记录异常以供以后调查。所以，我想我会试一试，因为我手上有一些空闲时间，并试图找到一些关于我的问题的具体信息，但找不到。

如果我`Console.Write(exception.Message);`在 asp.net 网页中使用，它到底在哪里？Web 应用程序/网站中的“控制台”在哪里？

而且，您如何“看到”您之前写入控制台的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:27:30.670

在 Visual Studio 中，对于 winforms 和 WPF 应用程序，它打印到[输出窗口](http://msdn.microsoft.com/en-us/library/3hk6fby3.aspx) 对于 ASP.Net 用于`System.Diagnostics.Debug.WriteLine()`打印到输出窗口

> 要打开“输出”窗口，请在“视图”菜单上单击“输出”。

您可能想看看：[Console.WriteLine 在 ASP.NET 中的位置？](https://stackoverflow.com/questions/137660/where-does-console-writeline-go-in-asp-net)

# java - Solr 找不到库

> ID：11881366
> 
> 赞同：1
> 
> 时间：2012-08-09T10:26:49.400
> 
> 标签：java, solr

我是java新手，但我需要使用solr作为“全文搜索”引擎......我能够安装并成功运行它，但我需要使用“建议组件”

这是我的建议器配置：

```
<searchComponent name="suggester" class="solr.SpellCheckComponent">
        <lst name="spellchecker" >
            <str name="name">suggester</str>
            <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
            <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookupFactory</str>
            <str name="field">name</str>
            <!-- <str name="threshold">2</str> -->
        </lst>
    </searchComponent>

    <requestHandler class="org.apache.solr.handler.component.SearchHandler" name="/suggester">
        <lst name="defaults">
            <str name="spellcheck"  >true</str>
            <str name="spellcheck.dictionary">suggester</str>
            <str name="spellcheck.count">10</str>
        </lst>
        <arr name="component" >
            <str>suggester</str>
        </arr>
    </requestHandler> 
```

我用命令 java -jar start.jar 运行它（就像[这个网站](http://lucene.apache.org/solr/api-3_6_1/doc-files/tutorial.html)）并得到以下错误

```
INFO: Closing Searcher@1220b36 main
    fieldValueCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
    filterCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
    queryResultCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
    documentCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,cumulative_evictions=0}
Aug 9, 2012 5:14:32 PM org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException
    at org.apache.solr.core.SolrCore.<init>(SolrCore.java:600)
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:480)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:332)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:216)
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:713)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
    at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:985)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.mortbay.start.Main.invokeMain(Main.java:194)
    at org.mortbay.start.Main.start(Main.java:534)
    at org.mortbay.start.Main.start(Main.java:441)
    at org.mortbay.start.Main.main(Main.java:119)
Caused by: org.apache.solr.common.SolrException: Error loading class 'org.apache.solr.spelling.suggest.tst.TSTLookupFactory
'
    at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:394)
    at org.apache.solr.core.SolrResourceLoader.newInstance(SolrResourceLoader.java:409)
    at org.apache.solr.spelling.suggest.Suggester.init(Suggester.java:100)
    at org.apache.solr.handler.component.SpellCheckComponent.inform(SpellCheckComponent.java:598)
    at org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:527)
    at org.apache.solr.core.SolrCore.<init>(SolrCore.java:594)
    ... 30 more
Caused by: java.lang.ClassNotFoundException: org.apache.solr.spelling.suggest.tst.TSTLookupFactory

    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:615)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:378)
    ... 35 more 
```

我查找了该类，并在 $SOLR_HOME/dist/apache-solr-core-[solr version].jar 中找到了它，因此我尝试使用命令运行 Solr

```
java -cp $SOLR_HOME/dist/apache-solr-core-3.6.1 -jar start.jar 
```

但我得到了同样的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:04:36.230

您无需自定义任何内容即可使用 Suggester，也无需找到已包含在 Solr 中的类。我将从新下载的 Solr 3.6.1 开始（或者只是恢复您所做的更改）。问题出在您的配置中，其中包含类名称和 xml 元素结尾之间的换行符`</str>`。这就是 SOlr 找不到该类的原因。只需删除换行符，一切都会奏效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:41:18.043

`TSTLookupFactory`应该存在于 solr-core jar 中（至少在版本 3.4.0 中）。您可以通过在 WinRAR 或其他能够打开 RAR 文件的实用程序中打开 jar 文件来手动验证它（如果您使用的是其他版本）并验证它是否位于 org/apache/solr/spelling/suggest/tst 目录中罐子。如果不是，您可能使用的是旧版本的 SOLR，您必须升级。

然后确保 solr-core jar 确实在您的类路径中（以及 lucene-spellchecker jar 和其他 solr/lucene jar）。

# silverlight - 如何在 RadPane 的 TitleTemplate 中访问控制

> ID：11881368
> 
> 赞同：0
> 
> 时间：2012-08-09T10:26:50.157
> 
> 标签：silverlight, button, telerik, datatemplate, gridsplitter

如何在 RadPane 的 TitleTemplate 中获取 GridSplitter 的句柄

```
<telerik:RadPane TitleTemplate="{StaticResource radPaneHeaderFormat}" ContextMenuTemplate="{x:Null}" CanDockInDocumentHost="False"  x:Name="radPane" Header="HeaderTitle" CanUserClose="False" CanFloat="False"    VerticalAlignment="Center" />

    <DataTemplate x:Key="radPaneHeaderFormat}"  ">
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="670" MaxWidth="678"/>
           <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="0.1*" />
            </Grid.ColumnDefinitions>

            <Button x:Name="ViewButton" Margin="0,0,5,0" Style="{StaticResource LeftArrowButtonStyle}" Click="ViewButton_Click" />
            <TextBlock Text="Summary" VerticalAlignment="Center" Grid.Column="1" />
            <sdk:GridSplitter Height="Auto"  Grid.Column="2" Name="HeaderSplitter" VerticalAlignment="Stretch" Style="{StaticResource newGridSplitterStyle}" />                               
             <TextBlock Text="Note"  Grid.Column="3" VerticalAlignment="Center"  Margin="3,0,0,0"/>
        </Grid>
    </DataTemplate> 
```

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:40:19.147

我不知道您想从哪里访问`GridSplitter`，但是，鉴于您有一个`Button`with`Click`事件处理程序，我将向您展示如何在其中访问它：

```
 private void ViewButton_Click(object sender, RoutedEventArgs e)
    {
        var button = sender as Button;
        var panel = button.Parent as Panel;
        if (panel != null)
        {
            GridSplitter splitter = panel.Children.OfType<GridSplitter>().First();
            // do stuff with the GridSplitter...
        }
    } 
```

`using System.Linq;`如果您还没有一行，则需要添加一行。

在这种情况下，我利用了按钮的`Click`事件处理程序将被单击的按钮传递给我们的事实，并且 the`Button`和`GridSplitter`具有相同的父级。

# javascript - 在while循环中选择一个与整数值对应的数组

> ID：11881376
> 
> 赞同：0
> 
> 时间：2012-08-09T10:27:12.580
> 
> 标签：javascript, arrays, loops

我有六个数组。名称为 arr1、arr2、arr3、arr4、arr5、arr6。我想根据整数的值获取数组。我在 while 循环中增加一个整数的值，并且在 while 循环中有一个 if 条件。当条件为真时，我想获取与整数值对应的数组。即，如果整数的值为5，我应该得到arr5！我不想在更多的 if 循环中这样做！我正在用javascript做这个！

那么这怎么可能呢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:35:54.987

创建一个数组对象

```
var arrays = {
    0:[1, 2, 3, 4, 5],
    1:[1, 2, 3, 4, 5],
    2:[1, 2, 3, 4, 5],
    3:[1, 2, 3, 4, 5],
    4:[1, 2, 3, 4, 5]
} 
```

或数组数组

```
var arrays = [
    [1, 2, 3, 4, 5],
    [1, 2, 3, 4, 5],
    [1, 2, 3, 4, 5],
    [1, 2, 3, 4, 5],
    [1, 2, 3, 4, 5]
] 
```

假设`index`是检索数组的整数，然后`arrays[index]`会给你一个特定的数组。

# asp.net-mvc - Coffeescript，避免编译确定的行

> ID：11881377
> 
> 赞同：0
> 
> 时间：2012-08-09T10:27:16.803
> 
> 标签：asp.net-mvc, coffeescript

有什么办法可以避免 Coffeescript 编译几行？例如，我编写了一行由特殊标记分隔的代码，编译器将同一行放入编译文件中。我需要它，因为我会尝试在 js 文件中使用 ASP.NET MVC 特殊标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:41:59.413

您可以使用反引号直接传递代码：

```
coffeeVar = "#{foo}bar"

`var someJs = "this will be passed straight through";`

moreCoffee = (a for a in [1, 2, 3]) 
```

[请参阅有关嵌入式 javascript](http://coffeescript.org/#embedded)的CS 文档。

# javascript - IE 不接受 3rd 方 cookie P3P 策略设置

> ID：11881386
> 
> 赞同：0
> 
> 时间：2012-08-09T10:27:46.717
> 
> 标签：javascript, html, internet-explorer, cookies, p3p

我有一个托管在 http://www.domain1.com 的**网站**

该域加载位于 http://www.domain2.com/script.js 的脚本。该脚本使用普通 HTML < **script** > 标记方法加载。该脚本正在设置和读取 cookie。

问题是当我用**IE查看***domain1时，***没有设置 domain2**的cookie 。这在其他浏览器（FF、chrome、safari）中不会发生。

 ****我试图解决设置由*script.js*返回的特殊**P3P 标头**的问题，但没有运气。我不明白的是，必须在哪里设置*P3P 策略*，在*domain1*或*domain2*中？

 ***我不想制定政策，我只想让我的 cookie 工作。***在不触及domain1*****的情况下，哪种方法更简单***？*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:46:23.820

你应该在 domain2 中设置，而不接触 domain1

对于 domain2 ，domain1 是第三方上下文。

p3p是用来处理这个的，和用户的客户端设置有关。

[http://msdn.microsoft.com/en-us/library/ms905230.aspx](http://msdn.microsoft.com/en-us/library/ms905230.aspx)********

# python - Django - 用户继承的 IntegrityError

> ID：11881391
> 
> 赞同：0
> 
> 时间：2012-08-09T10:27:57.387
> 
> 标签：python, mysql, django, inheritance, django-models

我正在尝试使用[用户配置文件](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)功能，所以这是我的配置文件模型：

```
class Nuser(models.Model):
  user = models.OneToOneField(User)
  initials = models.CharField(max_length=5)
  def __unicode__(self):
    return u'%s %s' % (self.first_name, self.last_name)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        Nuser.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

我的模型已正确创建，但如果我尝试使用管理界面添加用户，我会收到此错误：

> /admin/auth/user/add/ 处的 IntegrityError
> 
> （1062，“密钥‘user_id’的重复条目‘3’”）

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:46:39.727

该信号可能被多次注册。使用[`dispatch_uid`参数](https://docs.djangoproject.com/en/dev/topics/signals/#preventing-duplicate-signals)来防止这种情况。

例如：

```
post_save.connect(create_user_profile, sender=User, dispatch_uid='autocreate_nuser') 
```

# c# - 获取我的访问令牌后的 Facebook OAuth - C# ASP.NET

> ID：11881395
> 
> 赞同：-1
> 
> 时间：2012-08-09T10:28:25.337
> 
> 标签：c#, asp.net, oauth, facebook-oauth

我需要一些帮助。
用户允许我的应用程序后，我不知道该做什么。在我的 pageLoad 上，我验证 URL 是否有代码（由 Facebook 生成）并使用字符串代码再次重定向以获取访问令牌。
Facebook 再次使用访问令牌重定向，现在我有了令牌。

你下一步怎么做？

> ...在页面加载...
> ...................
> if (Request.QueryString["code"] != null && !Page .IsPostBack)
> {
> 字符串代码 = Request.QueryString["code"];
> 字符串 urlFinal = "https://graph.facebook.com/oauth/access_token?" +
> "client_id=" + appID +
> "&redirect_uri=" + redirectURL +
> "&client_secret=" + appSecret +
> "&code=" + 代码；
> Response.Redirect(urlFinal);
> }
> else if (Request.QueryString["access_token"] != null)
> 字符串令牌 = Request.QueryString["

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:13:49.177

> 并使用字符串代码再次重定向以获取访问令牌。

**不要** *重定向*到该地址 - 它包含您的应用程序密码！

您应该改为对该端点进行*服务器端调用 - 如身份验证文档中所述。*

> 你下一步怎么做？

这很大程度上取决于你想做什么，你不觉得吗？

# javascript - 写入文件并通过javascript从另存为对话框中保存

> ID：11881396
> 
> 赞同：1
> 
> 时间：2012-08-09T10:28:25.320
> 
> 标签：javascript, dialog, modal-dialog

下面的代码可以很好地将 XML 数据写入文件。

```
function btnSave_onclick() {
var aFSO = new ActiveXObject("Scripting.FileSystemObject");
aTS = aFSO.OpenTextFile(FilePath,2,true);
aTS.Write (XMLText.value);
aTS.Close();
} 
```

我想更改此代码以在所需位置显示一个对话框以另存为。

我发现下面的代码打开另存为对话框

```
document.execCommand('SaveAs','true',filename.txt); 
```

现在的问题是如何通过此对话框保存数据（在 XMLText.value 中）。

有没有其他方法可以保存数据槽对话框。它适用于 IE

以其他方式是否可以提供一个浏览按钮来选择 c: 驱动器或任何其他驱动器中的所需位置，并通过说确定获取该路径并存储在变量中，并使用上面的代码可以直接保存到该位置。

但这里的问题是如何提供浏览按钮？

# iphone - 从 CGBitmapContextGetData 取回图像

> ID：11881406
> 
> 赞同：3
> 
> 时间：2012-08-09T10:28:46.647
> 
> 标签：iphone, objective-c, ios, core-graphics

所以我有一个`CGBitmapContext`，我使用这个在触摸位置获得像素

```
unsigned char* data = CGBitmapContextGetData (offscreenBuffer);

if (data != NULL) {
    offset = 4*((self.bounds.size.width*round(coord.y))+round(coord.x));
    int alpha =  data[offset];
    int red = data[offset+1];
    int green = data[offset+2];
    int blue = data[offset+3];

} 
```

然后我改变像素颜色，如下所示。

```
data[offset]=255;
data[offset+1]=255;
data[offset+2]=0;
data[offset+3]=0; 
```

我的问题是如何从修改后的像素中获取 CGImage 以便我可以更新我的`CGBitmapContext`？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:55:15.123

用于在修改数据后从您的上下文`CGBitmapContextCreateImage()`中生成一个新的。`CGImage`

* * *

您对返回的数据所做的更改`CGBitmapContextGetData()`应该会修改上下文本身。那是可写指针，而不是副本。

# c# - 更改 webbrowser 控件的默认浏览器模式

> ID：11881409
> 
> 赞同：0
> 
> 时间：2012-08-09T10:28:57.027
> 
> 标签：c#

我正在尝试关注此链接[如何以编程方式关闭 IE8 WebBrowser 控件中的怪癖模式？](https://stackoverflow.com/questions/646742/how-to-programmatically-turn-off-quirks-mode-in-ie8-webbrowser-control)更改我的`WebBrowser`控件的默认行为，但我无法使其工作。

我在 中添加了一个新`DWORD`值`FEATURE_BROWSER_EMULATION`，将文件命名为`abc.exe`（abc 是我的应用程序名称）并将其数据修改为 13880（也尝试了十六进制：0x1F40），但我的网络浏览器控件仍处于怪癖模式。我在这里做错了吗？

仅供参考，我的应用程序是 Web 应用程序，而不是 Windows 应用程序。

# javascript - 在 Firefox 中使用 requires.js 加载文本文件失败：“AccessControlException”

> ID：11881411
> 
> 赞同：4
> 
> 时间：2012-08-09T10:29:04.697
> 
> 标签：javascript, firefox, requirejs

我正在使用 requires.js 2.0。我有以下简化的用例：

我的 HTML 文件：

```
<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <script type="text/javascript" data-main="apptest.js" src="../_js/libs/require/require.js"></script>
</head>
<body>

</body>
</html> 
```

然后在 apptest.js 中：

```
requirejs.config({
    paths: {
        'text': '../_js/libs/require/text'
    }
});

requirejs(
    ['text!boxes.html'],

    function (Boxes) {
        alert("done");
    }
); 
```

好的，所以它并没有真正做太多，但足以说明我的观点。只有在 Firefox (14.0.1) 我得到一个异常“未捕获的异常：java.security.AccessControlException：访问被拒绝（java.io.FilePermission .\boxes.html 读取）”。

因此，require.js 成功加载了文本插件，但未能加载我的 html 文件，我想稍后将其用作模板。在谷歌浏览器甚至 IE9 中它工作得很好。我在 Windows 7 上。

我在本地网络服务器上运行它，所以这里没有 file://... 请求。

我已经检查过，如果我在 html 文件上设置了任何特殊权限，但没有发现任何可疑之处。

有人有想法吗？

**更新**：在 Firefox 13.0.1 中运行测试确实对我有用，没有错误。那么，这可能是 Firefox 14 中引入的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:14:16.967

一分钟前我遇到了同样的问题。我已经通过在 main.js 文件中执行以下操作来修复它（在其中设置配置）

之前

```
require.config({..... 
```

添加以下代码：

```
Packages = undefined; 
```

这应该可以解决问题。

你应该有这样的东西：

```
Packages = undefined;

require.config({
    baseUrl: theAppBaseUrl,
    paths: { 
```

基本上解释是它试图使用 Java 来获取文件而不是 ajax 请求（无论出于何种原因）。这迫使它使用 XHR 对象来获取它。

干杯!

# httpwebrequest - BigQuery 简单 API 身份验证

> ID：11881415
> 
> 赞同：1
> 
> 时间：2012-08-09T10:29:10.843
> 
> 标签：httpwebrequest, google-api, google-bigquery

我正在尝试使用 .net Google API 访问启用 BigQuery 的 Google API 项目。

使用控制台应用程序，我首先尝试通过在 URI 中提供我的简单 API 密钥来进行身份验证，然后只是尝试获取项目列表。

我在项目列表上调用 Fetch() 时收到的错误是：需要登录 [401]

```
var bigqueryService = new BigqueryService{ Key = "MY-API_KEY" };
var projectList = bigqueryService.Projects.List().Fetch(); 
```

我故意不使用 OAuth2，因为我们不需要任何用户数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:14:56.820

API 密钥只是将您的应用程序标识到 API 控制台以用于配额目的和其他内务管理。它不具有访问 BigQuery 的权威性，因为我们确实将 BigQuery 数据视为“用户数据”。

如果您只是想获得一个 OAuth 2 访问令牌以便快速玩耍，您可以使用 OAuth 2 游乐场： [https ://code.google.com/oauthplayground/](https://code.google.com/oauthplayground/)

此令牌有效期为一小时，可以复制/粘贴为`access_token`查询参数

以下是 BigQuery 在 Playground 中使用的范围： `https://www.googleapis.com/auth/bigquery`

最后，您要么想要使用本机客户端（带外）流程： [https ://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

或服务器到服务器（服务帐户）流程： [https ://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

对于 .NET 中的人，我没有方便的快速示例，但是如果您找不到它们，请在 SO 上发布另一个问题——我相信有人会参与进来！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:10:32.530

您将无法使用简单的 API 密钥 - BigQuery API 的所有授权都必须通过用户交互或通过服务帐户进行。

# search - 自定义 Tridion 搜索索引处理程序：页面 url 的自定义与标准字段？

> ID：11881419
> 
> 赞同：6
> 
> 时间：2012-08-09T10:29:42.160
> 
> 标签：search, tridion, tridion-2011

我在玩 SDL Tridion 2011 (GA) 的自定义搜索索引处理程序。[使用Arjen 提供的非常有用的信息](http://80000ft.blogspot.nl/2012/08/search-indexing-handlers.html)，我得到了一些工作，但是我不确定我的执行是否是最佳选择。

要求是能够通过 url 搜索 CMS 中的页面（例如 www.example.com/news/index.html）。为了做到这一点，我使用`ISearchIndexingHandler`接口创建了一个类（下面的代码）。我正在索引项目的 ContentText 字段中的 url，但是我不确定这是否通常包含页面的其他内容（我认为页面只有元数据，所以应该没问题）。在自定义字段上使用它的优点是我可以简单地在搜索框中键入 url，而不必使用 <url> IN <fieldname> 或类似的东西。

所以我的问题是，是否有任何理由不将 ContentText 用于 Pages，使用自定义字段有什么优势吗？此外，任何对如何处理 BluePrinting 有好的想法的人都会获得奖励分数（如果我在父出版物中创建页面，我希望本地 url 也可以在子出版物中被索引），以及结构组路径被更改的情况（我想我可以从我的索引处理程序中以某种方式触发子页面项的重新索引）。

编码：

```
using System;
using Tridion.ContentManager.Search;
using Tridion.ContentManager.Search.Indexing.Handling;
using Tridion.ContentManager.Search.Indexing.Service;
using Tridion.ContentManager.Search.Indexing;
using Tridion.ContentManager.Search.Fields;

namespace ExampleSearchIndexHandler
{
    public class PageUrlHandler : ISearchIndexingHandler
    {
        public void Configure(SearchIndexingHandlerSettings settings)
        {               
        }

        public void ExtractIndexFields(IdentifiableObjectData subjectData, Item item, CoreServiceProxy serviceProxy)
        {
            PageData data = subjectData as PageData;
            if (data != null)
            {
                PublishLocationInfo info = data.LocationInfo as PublishLocationInfo;
                string url = GetUrlPrefix(data) + info.PublishLocationUrl;
                item.ContentText = url;
            }
        }

        private string GetUrlPrefix(PageData page)
        {
            //hardcoded for now, but will be read from publication metadata
            return "www.example.com";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:19:40.437

您可以将 url 存储在 ContextText 属性中。该字段用于索引模板内容数据。

Tridion 不索引子发布的共享项目。

在项目修改（创建、更新、删除、本地化和取消本地化）时触发索引。或者您可以使用重新索引工具重新索引您的项目。但无法索引子发布中的共享项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T07:51:57.403

我认为您不能在搜索查询中包含 URL 前缀作为索引项。因为共享项目没有被索引，你可能会从网站结构层索引页面，它永远不会发布。

移动结构组时，您必须创建一个事件处理程序，该处理程序使用 TOM.NET API 的受保护方法触发重新索引所有子页面。此方法不是公共 API 的一部分，因此发布该解决方案的代码可能会声明我是一个不受欢迎的 R&D 角色 :)

在重新索引任何内容之前，您应该将结构组的原始发布位置 url 存储在`TcmEventArgs.ContextVariables`属性中，以便您可以验证是否需要重新索引操作。

# javascript - 也使内联块垂直对齐？

> ID：11881422
> 
> 赞同：0
> 
> 时间：2012-08-09T10:29:49.487
> 
> 标签：javascript, html, css

抱歉，如果其他人已经问过这个问题，但我还没有找到任何好的答案，或者我的问题措辞有误。

无论如何，现在我有这样的东西：http: [//jsfiddle.net/2nvwU/2/](http://jsfiddle.net/2nvwU/2/)

哪个做它应该做的，但我不喜欢一些块之间的垂直间隙。我可以尝试在各个方向上以左上角为起点的块之间保持相同的间距。因为块将是动态的。我猜列是要走的路，但是如何从左到右加载三列中的块？

我想要这样的东西： [http](http://www.googleventures.com/) ://www.googleventures.com/ 或 [http://dynamit.us/](http://dynamit.us/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:35:09.850

试试[同位素](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFAQFjAA&url=http://isotope.metafizzy.co/&ei=NpIjUPSqA4inrAfp4YGADA&usg=AFQjCNHzbG2dSuid3yQGg-80of_sFMnasw "同位素")。它是一个 jQuery 插件，它非常擅长做你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:40:39.447

如果您有应该跨越两列的元素，您有时会在布局中出现砖石或同位素的间隙。在这种情况下，您也许可以使用[这个简单的插件](http://codecanyon.net/item/jquery-tiles-gallery/2281417)并将其更改为您的目的。否则，我同意 Uzair 的观点。

或者 - 你是“步行”做[的，因为 dynamit 代码](http://dynamit.us/js/dynamit.js)被很好地注释和布局：D

# xml - XSLT - 删除重复项，同时添加数量字段

> ID：11881423
> 
> 赞同：0
> 
> 时间：2012-08-09T10:29:53.590
> 
> 标签：xml, xslt, duplicates

我有一个只能使用 XSLT 解决的问题。问题是我们不希望具有相同 Id 的重复 XML 标签，但是在有多个标签的情况下，两个标签的数量字段需要加在一起。这可以在下面的 XML 中轻松演示。

**输入 XML**

```
<root>
    <Line>
        <Id>4</Id>
        <sku>111111</sku>
        <quantity>1</quantity>
    </Line>
    <Line>
        <Id>4</Id>
        <sku>111111</sku>
        <quantity>2</quantity>
    </Line>
    <Line>
        <Id>3</Id>
        <sku>222222</sku>
        <quantity>1</quantity>
    </Line>
    <Line>
        <Id>3</Id>
        <sku>222222</sku>
        <quantity>1</quantity>
    </Line>
</root> 
```

**期望的输出**

```
<root>
    <Line>
        <Id>4</Id>
        <sku>111111</sku>
        <quantity>3</quantity>
    </Line>
    <Line>
        <Id>3</Id>
        <sku>222222</sku>
        <quantity>2</quantity>
    </Line>
</root> 
```

**XSLT**

启动 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/root">
        <root>
            <xsl:apply-templates select="orderLine"/>
        </root>
    </xsl:template>

    <xsl:template match="/root/oderLine">
        <xsl:if test="not(sku = preceding-sibling::orderLine/sku)"> </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

**比较 Id 和 SKU**

例子

**输入**

```
<root>
    <Line>
        <Id>4</Id>
        <sku>111111</sku>
        <quantity>1</quantity>
    </Line>
    <Line>
        <Id>4</Id>
        <sku>111222</sku>
        <quantity>2</quantity>
    </Line>
    <Line>
        <Id>3</Id>
        <sku>222222</sku>
        <quantity>1</quantity>
    </Line>
    <Line>
        <Id>3</Id>
        <sku>222222</sku>
        <quantity>1</quantity>a
    </Line>
</root> 
```

**期望的输出**

```
<root>
    <Line>
        <Id>4</Id>
        <sku>111111</sku>
        <quantity>1</quantity>
    </Line>
    <Line>
        <Id>4</Id>
        <sku>111222</sku>
        <quantity>2</quantity>
    </Line>
    <Line>
        <Id>3</Id>
        <sku>222222</sku>
        <quantity>2</quantity>
    </Line>
</root> 
```

**实际输出**

```
<root>
    <Line>
        <Id>4</Id>
        <sku>111111</sku>
        <quantity>3</quantity>
    </Line>
    <Line>
        <Id>3</Id>
        <sku>222222</sku>
        <quantity>2</quantity>
    </Line>
</root> 
```

如您所见，它仅匹配 Id 而不是 SKU。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:16:16.607

在 XSLT 1.0 中使用[Muechian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.xml)：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:key name="l-by-id" match="Line" use="Id"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Line[generate-id() = generate-id(key('l-by-id', Id)[1])]/quantity">
  <xsl:copy>
    <xsl:value-of select="sum(key('l-by-id', ../Id)/quantity)"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Line[generate-id() != generate-id(key('l-by-id', Id)[1])]"/>

</xsl:stylesheet> 
```

[编辑] 这是对 Id 和 sku 分组的上述解决方案的改编：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:key name="l-by-id" match="Line" use="concat(Id, '|', sku)"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Line[generate-id() = generate-id(key('l-by-id', concat(Id, '|', sku))[1])]/quantity">
  <xsl:copy>
    <xsl:value-of select="sum(key('l-by-id', concat(../Id, '|', ../sku))/quantity)"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Line[generate-id() != generate-id(key('l-by-id', concat(Id, '|', sku))[1])]"/>

</xsl:stylesheet> 
```

# javascript - casperjs点击标签

> ID：11881424
> 
> 赞同：1
> 
> 时间：2012-08-09T10:29:58.723
> 
> 标签：javascript, xpath, casperjs

CasperJS`clicklabel`允许我们点击一​​种标签和内部文本的 DOM 元素。

如果内部文本被两层或更多层包裹怎么办？它会起作用吗？例如：

```
<a href='xxxxxx'><span>my inner text</span></a> 
```

我已经尝试了以下方法，似乎都不起作用。

```
clicklabel('my inner text','a')
clicklabel('my inner text','a/span') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:37:40.837

```
clicklabel('my inner text','a span') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-22T12:34:24.397

```
this.click('a > span'); 
```

这将在“a”标签内的第一个 span 元素上执行点击事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:07:26.410

根据 casperjs 文档，[clickLabel 的](http://casperjs.org/api.html#casper.clickLabel)第二个参数是节点名称，在您的情况下，这是“跨度”，它不需要选择器。您可能想改用 click 并使用 XPath 而不是 css 选择器。

```
var x = require('casper').selectXPath;
this.click(x('//span[text()="my inner text"]')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:07:01.467

如果您非常确定 href 属性是恒定的，只需使用 click 类似的内容：`click("a[href='xxxxx']");`

否则你可以试试`clickLabel('my inner text','span')`

如果两者都失败，请检查您是否不在使用框架的页面中，如果是这种情况，请检查[http://casperjs.org/api.html#casper.withFrame](http://casperjs.org/api.html#casper.withFrame)以了解如何处理它。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-01T13:18:54.397

您可以直接使用：

`clickLabel('my inner text','span');`

如果它不起作用，请尝试在单击后等待 5 秒或更长时间，例如：

```
this.wait(5000, function() {
        this.echo("I've waited for 5 seconds.");
    }); 
```

等待 5 秒就可以了，因为我也面临同样的问题。

# ruby-on-rails - Rails 3中嵌套路由的自定义

> ID：11881430
> 
> 赞同：0
> 
> 时间：2012-08-09T10:30:21.443
> 
> 标签：ruby-on-rails, url-routing, ruby-on-rails-3.2

我在我的应用程序（rails 3.2）中使用嵌套路由，如下所示：

```
resources :networks do
  resources :groups
end 
```

群组展示页面路径如下

```
network_group GET    /networks/:network_id/groups/:id(.:format) 
```

如何将参数分别更改为 :network_name 和 :group_name ？另外，我想将路由重命名为 group_path （而不是 network_group_path ）。我希望这些更改反映在所有路线上，而不必对各个路线使用“匹配”。

是否有可能有类似 group_path(@network, @group) return '/networks/global/groups/all' 的东西，其中 'global' 和 'all' 都是各自模型的 'name' 属性。（默认情况下，我在 url 中获取 id）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:41:15.220

我们可以通过在我们的模型中添加一个 to_param 方法来做到这一点

[http://railscasts.com/episodes/63-model-name-in-url](http://railscasts.com/episodes/63-model-name-in-url)

在您的网络和组模型中，添加一个 #to_param 方法，该方法在 URL（network_name、group_name）中返回您想要的内容。

否则，您可以使用提供漂亮 url 的friendly_id gem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:08:18.477

您可以使用friendly_id gem。[https://github.com/norman/friendly_id](https://github.com/norman/friendly_id)

# sql - 如何复制 SQL 数据库现有表中的行？

> ID：11881444
> 
> 赞同：2
> 
> 时间：2012-08-09T10:31:42.980
> 
> 标签：sql, sql-server-2008, tsql, ado.net

我的 SQL 数据库上有表

```
Code | Ordered | Cut01 | Cut02 | Cut03 | Confirmed
--------------------------------------------------
8832     10        1        1      3        5
8821     12        0        1      2        9
8122     20       10        0      0       10
8901     11        0        8      1        2 
```

我怎样才能为每个分隔行`Code`，其中有几个`Cuts*`<> 0 并乘以自己，例如：

```
Code | Ordered | Cut01 | Cut02 | Cut03 | Confirmed
--------------------------------------------------
8832      1        1        0      0        0
8832      1        0        1      0        0
8832      8        0        0      3        5
--------------------------------------------------
8821      1        0        1      0        0
8821     11        0        0      2        9
--------------------------------------------------
8122     20       10        0      0       10
--------------------------------------------------
8901      8        0        8      0        0
8901      3        0        0      1        2

Confirmed = Ordered - Cut01 - Cut02 - Cut03 
```

正如您在结果表中看到的`Ordered`，每个代码的总和 = 从第一个表中为此代码排序，它也适用于总和`Confirmed`。但是在每一行中，我只有一个`Cut`不等于 0 的单行。如何使用 T-SQL 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:01:23.110

```
SELECT
  Code,
  CASE WHEN sub_row = 1 THEN cut01
       WHEN sub_row = 2 THEN cut02
       WHEN sub_row = 3 THEN ordered - cut01 - cut02 END     Ordered,
  CASE WHEN sub_row = 1 THEN cut01     ELSE 0 END            cut01,
  CASE WHEN sub_row = 2 THEN cut02     ELSE 0 END            cut02,
  CASE WHEN sub_row = 3 THEN cut03     ELSE 0 END            cut03,
  CASE WHEN sub_row = 3 THEN confirmed ELSE 0 END            confirmed
FROM
  yourTable
CROSS JOIN
  (          SELECT 1 AS sub_row
   UNION ALL SELECT 2 AS sub_row
   UNION ALL SELECT 3 AS sub_row ) AS multiplier_table
WHERE
     (sub_row = 1 AND cut01 > 0)
  OR (sub_row = 2 AND cut02 > 0)
  OR (sub_row = 3 AND cut03 > 0)
  OR (sub_row = 3 AND cut01 = 0 AND cut02 = 0 AND cut03 = 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:20:44.863

我看到你已经有了你的解决方案，但是我只是想我会添加另一个版本，因为我还是写了它:-)

```
SELECT Code,
       conf + Cut01 + Cut02 + Cut03 AS Ordered, 
       Cut01, Cut02, Cut03, conf AS Confirmed
FROM
 (
         SELECT Code, Cut01, 0 AS Cut02, 0 AS Cut03, 
           CASE WHEN Cut01<>0 AND Cut02=0 AND Cut03=0 
             THEN Confirmed ELSE 0 END conf FROM MyTable

   UNION SELECT Code, 0 AS Cut01, Cut02, 0 AS Cut03, 
           CASE WHEN Cut02<>0 AND Cut03=0 
             THEN Confirmed ELSE 0 END conf FROM MyTable

   UNION SELECT Code, 0 AS Cut01, 0 AS Cut02, Cut03, 
           CASE WHEN Cut03<>0 OR Cut01=0 AND Cut02=0 AND Cut03=0
             THEN Confirmed ELSE 0 END conf FROM MyTable
  ) a
WHERE conf + Cut01 + Cut02 + Cut03<>0 ORDER BY Code 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:06:43.850

从这里开始：

```
declare @Table as Table ( Number Int )
insert into @Table ( Number ) values ( 2 ), ( 5 )

; with Numbers as (
  select 1 as Number
  union all
  select Number + 1
    from Numbers
    where Number < 100
  )
select *
  from @Table as T inner join
    Numbers as N on N.Number <= T.Number 
```

硬编码`100`可以替换为所需的最大行数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T11:43:30.803

这是另一种方法：

```
DECLARE @t TABLE (Code INT, Ordered INT, Cut01 INT, 
Cut02 INT, Cut03 INT, Confirmed INT)
INSERT @t 
VALUES
(8832,10,   1,   1, 3,   5)
,(8821,12,   0,   1, 2,   9)
,(8122,20,  10,   0, 0,  10)
,(8901,11,   0,   8, 1,   2)
,(1000,2,   0,   0, 0,   2)

;WITH x AS (
    SELECT  a.Code,
            CASE WHEN ColName = 'Cut01' THEN u.Value ELSE 0 END Cut01,
            CASE WHEN ColName = 'Cut02' THEN u.Value ELSE 0 END Cut02,
            CASE WHEN ColName = 'Cut03' THEN u.Value ELSE 0 END Cut03
    FROM    @t a
    JOIN    (
                SELECT  Value,
                        ColName,
                        Code
                FROM    @t
                UNPIVOT 
                (Value FOR ColName IN (Cut01, Cut02, Cut03)) unpvt
            ) u ON u.Code = a.Code
), y AS
(
    SELECT  *,
            ROW_NUMBER() OVER 
                (PARTITION BY Code ORDER BY Cut01 , Cut02 , Cut03) 
                AS LastRowForCode
    FROM    x
    WHERE   Cut01 <> 0 OR Cut02 <> 0 OR Cut03 <> 0
), z AS
(
    SELECT  COALESCE(y.Code, b.Code) Code,
            COALESCE(y.Cut01, b.Cut01) Cut01,
            COALESCE(y.Cut02, b.Cut02) Cut02,
            COALESCE(y.Cut03, b.Cut03) Cut03,
            CASE WHEN Confirmed IS NULL THEN 0 ELSE Confirmed END 
                AS Confirmed
    FROM    y
    FULL    JOIN    
            @t b ON 
            b.Code = y.Code
            AND y.LastRowForCode = 1
)

SELECT  Code,
        Confirmed + Cut01 + Cut02 + Cut03 Ordered,
        Cut01,
        Cut02,
        Cut03,
        Confirmed
FROM    z
ORDER BY Code DESC, Cut01 DESC , Cut02 DESC, Cut03 DESC 
```

# jquery - Jquery没有在按钮单击时加载html页面

> ID：11881445
> 
> 赞同：0
> 
> 时间：2012-08-09T10:31:47.160
> 
> 标签：jquery, ajax, button

我正在尝试使用 ajax 和 jquery 在单击按钮时加载 html 文件，但单击未加载它。下面是代码。

ajax.aspx 文件：-

```
<form id="form1" runat="server">
    <div id="dictionary"></div>
    <div class="letters">
        <div class="button" id="letter-a">
            <h3>A</h3>
            <button type="button">Load</button>
        </div>
        <div class="button" id="letter-b">
            <h3>B</h3>
            <button type="button">Load</button>
        </div>
        <div class="button" id="letter-c">
            <h3>C</h3>
            <button type="button">Load</button>
        </div>
        <div class="button" id="letter-d">
            <h3>D</h3>
            <button type="button">Load</button>
        </div>
    </div>
</form> 
```

ajax.js 文件：-

```
$(document).ready(function () {
    $('#letter-a .button').click(function () {
        $('#dictionary').load('html_ajax.htm');
    });
}); 
```

但它不起作用。我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:34:52.993

改变这个：

```
$('#letter-a .button').click(function () { 
```

至

```
$('#letter-a button').click(function() { 
```

您正在使用类选择器来选择`button`标签。您的选择器选择具有`button`类的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:33:22.303

我认为您需要删除 . 来自 .button - .button 表示具有一类按钮的东西。

这意味着“寻找一个id为“letter-a”和类为“button”的元素。

```
 $('#letter-a .button').click(function () { } 
```

这意味着“查找包含在 ID 为“letter-a”的元素中的按钮元素。

```
$('#letter-a button').click(function () { } 
```

# google-maps - 需要 Google Map api 的 MapTypeControl 帮助（Satellite-MapMaker）

> ID：11881447
> 
> 赞同：0
> 
> 时间：2012-08-09T10:31:50.280
> 
> 标签：google-maps, google-maps-api-3

我需要实现 map1 中给出的红色标记功能，我调用了谷歌地图 API 代码，它可以工作，但根据我们的设计，功能和卫星，交通选项卡没有与图像（卫星）一起出现。请参考map1.jpg

因为如果你去谷歌地图，你可以在右上角看到卫星和交通，所以我们的设计需要相同的功能。我正在寻找并试图找到解决方案，但我没有得到那个，所以请你能帮助我，这将非常感激。

请参考我目前实现的 Map2.jpg。

请帮助解决这个问题。提前致谢。

Viji (vijijobmail@gmail.com)！[Map1-需要确切的功能][1]！[Map2-我目前正在获取][2]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:00:17.540

将您的地图类型 ID 设置为卫星或混合可以解决您的问题。这可以通过以下方式完成：

```
mapTypeId: google.maps.MapTypeId.SATELLITE 
```

或者

```
mapTypeId: google.maps.MapTypeId.HYBRID 
```

还要添加以下代码：

```
var trafficLayer = new google.maps.TrafficLayer();
trafficLayer.setMap(map); 
```

如需更多帮助，请访问以下链接：

[https://developers.google.com/maps/documentation/javascript/maptypes](https://developers.google.com/maps/documentation/javascript/maptypes)

[https://developers.google.com/maps/documentation/javascript/layers](https://developers.google.com/maps/documentation/javascript/layers)

# javascript - 使用 JavaScript 自动获取发布日期名称和时间

> ID：11881449
> 
> 赞同：0
> 
> 时间：2012-08-09T10:31:56.620
> 
> 标签：javascript, time

这将产生一个 javascript 格式：**2012 年 8 月 9 日**

```
var month = [1,2,3,4,5,6,7,8,9,10,11,12];
var month2 = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
var day = postdate.split(-)[2].substring(0,2);
var m = postdate.split(-)[1];
var y = postdate.split(-)[0];
for(var u2=0;u2<month.length;u2++){
if(parseInt(m)==month[u2]) {
m = month2[u2] ; break;
}
}
var daystr = day+ ' ' + m + ', ' + y ; 
```

如何在上面的javascript中添加日期名称和时间？
例如：**2012 年 8 月 9 日星期四下午 5:28**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:56:10.110

`getDay();`将返回日期名称
`getTime()`将返回自 1970 年以来的毫秒时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:14:20.913

您可以使用获取日期名称`gatDay();`

这是一个显示时间的功能。

```
function displayTime() {
            var currentTime = new Date();
            var currentHours = currentTime.getHours();
            var currentMinutes = currentTime.getMinutes();
            var currentSeconds = currentTime.getSeconds();

            // Pad the minutes and seconds with leading zeros, if required
            currentMinutes = (currentMinutes < 10 ? "0" : "" ) + currentMinutes;
            currentSeconds = (currentSeconds < 10 ? "0" : "" ) + currentSeconds;

            // Choose either "AM" or "PM" as appropriate
            var timeOfDay = (currentHours < 12 ) ? "AM" : "PM";

            // Convert the hours component to 12-hour format if needed
            currentHours = (currentHours > 12 ) ? currentHours - 12 : currentHours;

            // Convert an hours component of "0" to "12"
            currentHours = (currentHours == 0 ) ? 12 : currentHours;

            // Compose the string for display
            var currentTimeString = currentHours + ":" + currentMinutes + " " +currentSeconds+" "+ timeOfDay;

            $("#clock").html(currentTimeString);

        } 
```

# visual-studio-2010 - 在可视功能区设计器中将预定义的 Office 功能区按钮添加到自定义功能区

> ID：11881455
> 
> 赞同：2
> 
> 时间：2012-08-09T10:32:16.783
> 
> 标签：visual-studio-2010, vsto, ribbon, office-2010

我知道如何使用 XML（*使用`idMso`标签*）将现有的 Office 功能区项目或组添加到我的自定义功能区，但我如何使用 Visual Studio**功能区（*可视化设计器*）**技术来做到这一点？

真的宁愿不必使用 XML 构建整个东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:24:39.490

在**Ribbon Designer**中，您可以访问**Ribbon UI XML**中使用的[`ControlId`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.ribbon.ribbontab.controlid.aspx)指向。更具体地说，表示包含[特定 Office 控件标识符](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=6627)的属性。`idMSO`**[`ControlId.OfficeId`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.ribbon.ribboncontrolid.officeid.aspx)`idMSO`**

 **```
tools.Ribbon.RibbonTab tab = Globals.Factory.GetRibbonFactory().CreateRibbonTab();
tab.ControlId.OfficeId = "TabNewMailMessage"; 
```**

# vb.net - 从另一个表格调用一个表格

> ID：11881461
> 
> 赞同：0
> 
> 时间：2012-08-09T10:32:46.537
> 
> 标签：vb.net

我正在尝试使用 ShowDialog 从我的 aspx 页面显示一个弹出框，然后从中获取返回值。我创建了要调用的表单，但无法将其注册到我的初始页面。这是我的新表单中的所有代码；

```
Partial Class MyForm
    Inherits System.Web.UI.Page

End Class 
```

以及我初始页面中的相关代码；

```
Partial Class List
    Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs)
Dim request As New MyForm
End Sub

End Class 
```

但 Visual Studio 无法识别`MyForm`. 我究竟做错了什么？

* * *

不确定它们是否相关，但这是我的新页面的页面声明；

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="MyForm.aspx.vb" 
Inherits="MyForm" %> 
```

对于我的原始形式；

```
<%@ Page Language="VB" MasterPageFile="../../../Site.master" 
CodeFile="List.aspx.vb" Inherits="List" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:33:13.903

您不能像在 Windows 窗体中那样使用 ShowDialog 在 ASP.NET 中显示弹出框。如果您需要在 ASP.NET 中显示弹出窗口，请使用[ASP.NET ModalPopup](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)或[JQuery 对话框](http://jqueryui.com/demos/dialog/)

此外，在 ASP.NET 中，您不会像正在做的那样调用表单。您只需重定向到它。检查[HttpResponse.Redirect 方法](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.100%29.aspx)

# c - 无法跳出 do while 循环

> ID：11881464
> 
> 赞同：-2
> 
> 时间：2012-08-09T10:33:02.370
> 
> 标签：c

gcc (GCC) 4.6.3 c89

你好，

我有以下做..while循环

```
#define NUMBER_DX_CHANNELS 4

do {
/* some some processing here */
i++;
dx_channels++;
} while((dx_channels > CHANNELS_PER_BOARD) || (i < number_fx_resources)); 
```

由于某种原因，dx_channels 应该在达到 number_fx_resources 之前首先达到 4。但是，它永远不会超出 dx_channels > CHANNEL_PER_BOARD。

我可以使用 if 语句，但这会增加一行额外的代码。

我在这里做错了吗？是因为我正在测试 2 个条件吗？

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:36:45.917

你需要：`while((dx_channels < CHANNELS_PER_BOARD) && (i < number_fx_resources));`

注意：`&&`代替`||`

# .net - 如何添加列以访问数据库（mdb）表

> ID：11881469
> 
> 赞同：0
> 
> 时间：2012-08-09T10:33:14.133
> 
> 标签：.net, database

我曾尝试使用解决方案资源管理器，但没有选项可以将列添加到访问数据库表。

访问数据库具有 .MDB 扩展格式

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:37:17.893

您是否安装了访问权限？如果是这样，只需使用设计选项添加列，如下所示：

[http://www.functionx.com/access/topics/column.htm](http://www.functionx.com/access/topics/column.htm)

如果您无权访问，可以在线获得许多免费的管理工具 - 谷歌其中一些，例如。

[http://www.sqlmaestro.com/products/anysql/maestro/about/](http://www.sqlmaestro.com/products/anysql/maestro/about/)

有很好的口碑，

# javascript - 如何在 IE9 中读取二进制数据？

> ID：11881472
> 
> 赞同：20
> 
> 时间：2012-08-09T10:33:25.380
> 
> 标签：javascript, ajax, internet-explorer-9

我正在编写一些 Javascript 代码，该代码使用 Photoshop 嵌入的路径创建图像的 alpha 蒙版。IMG 标记的 onload 处理程序将调用剪辑（this）。该函数加载图像的源文件并扫描它。这是设置：

```
function clip(img) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', img.src, true);
    xhr.responseType = 'arraybuffer';
    xhr.target = img;

    xhr.onload = function(e) {
        var bytes = new Uint8Array(this.response);
        var p = findPhotoshopSegment(bytes);
        if(p) {
            var paths = parse8BIMData(bytes, p);

            /* ... replaces IMG with SVG tag ... */
        }
    };
    xhr.send();
} 
```

您可以在[http://flaczki.net46.net/JPEG/SVG.html上查看实际代码](http://flaczki.net46.net/JPEG/SVG.html)

目前，它仅适用于 Firefox、Chrome 和 Safari。它在 IE9 中不起作用。浏览器支持 SVG 但不支持 Uint8Array。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-21T01:57:11.903

我在玩 pdf.js 库时遇到了同样的问题，我找到的解决方案是制作自己的 Uint8Array，下面是您需要的代码。所有学分都**归于 notmasteryet** @github，完整代码可以在这里找到[https://gist.github.com/1057924](https://gist.github.com/1057924)

```
(function() {
  try {
    var a = new Uint8Array(1);
    return; //no need
  } catch(e) { }

  function subarray(start, end) {
    return this.slice(start, end);
  }

  function set_(array, offset) {
    if (arguments.length < 2) offset = 0;
    for (var i = 0, n = array.length; i < n; ++i, ++offset)
      this[offset] = array[i] & 0xFF;
  }

  // we need typed arrays
  function TypedArray(arg1) {
    var result;
    if (typeof arg1 === "number") {
       result = new Array(arg1);
       for (var i = 0; i < arg1; ++i)
         result[i] = 0;
    } else
       result = arg1.slice(0);
    result.subarray = subarray;
    result.buffer = result;
    result.byteLength = result.length;
    result.set = set_;
    if (typeof arg1 === "object" && arg1.buffer)
      result.buffer = arg1.buffer;

    return result;
  }

  window.Uint8Array = TypedArray;
  window.Uint32Array = TypedArray;
  window.Int32Array = TypedArray;
})(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T10:17:07.983

如果您想确保获得更广泛的兼容性，您还可以使用“web”目录下 PDF.js 分发包中包含的 compatibility.js 文件。[从Mozilla Github](http://github.com/mozilla/pdf.js)获取 PDF.js ，解压缩 zip 存档并包含上述目录中的 compatibility.js 文件。它还使 PDF.js 库在例如 IE9 中工作

# design-patterns - WSO2 ESB 中介流程

> ID：11881474
> 
> 赞同：0
> 
> 时间：2012-08-09T10:33:33.493
> 
> 标签：design-patterns, wso2, esb, wso2esb

我试图用 WSO2 ESB 实现一个简单的消息流，但对这个主题不是很熟悉：

*“消费者客户端与服务提供商通信以获取随机整数。”* 理想情况下，我想将随机数发送回客户端，但也发送给另一项服务。

*   我首先定义了一个自定义代理（http、https 协议）；
*   一个InSequence：LOG mediator，Send Mediator；
*   名为“RandomNumbers”的实际服务的端点 (http://localhost:8280/services/RandomNumbers)
*   一个 OutSequence：LOG 中介，SEND 中介
*   故障顺序：现有故障

有人可以检查这个实现是否正确吗？非常感谢

> ```
> <proxy name="ClientAskNumber" transports="https http" startOnLoad="true" trace="disable">
>         <target faultSequence="fault">
>             <endpoint>
>                 <address uri="http://localhost:8280/services/RandomNumbers"/>
>             </endpoint>
>             <inSequence>
>                 <log/>
>                 <send/>
>             </inSequence>
>             <outSequence>
>                 <log/>
>                 <send/>
>             </outSequence>
>         </target>
>     </proxy> 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:59:58.350

更正了配置。。

```
 <proxy name="ClientAskNumber" transports="https http" startOnLoad="true"
        trace="disable">
        <target faultSequence="fault">
            <inSequence>
                <log level="full">
                    <property name="Insequence" value="***" />
                </log>
                <send>
                    <endpoint>
                        <address uri="http://localhost:8280/services/RandomNumbers" />
                    </endpoint>
                </send>
            </inSequence>
            <outSequence>
                <log level="full">
                    <property name="Outsequence" value="***" />
                </log>
                <send />
            </outSequence>
        </target>
    </proxy> 
```

# java - 在java中使用vtd从xml中删除一个节点

> ID：11881476
> 
> 赞同：0
> 
> 时间：2012-08-09T10:33:37.370
> 
> 标签：java, xml, vtd-xml

```
 <E id="1">
    .....
    <E id="2">
    ....
    </E>
    .
    .
    .
    </E> 
```

我想从其父节点中删除 id=2 的完整节点。如何用 Java 做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:42:12.297

我认为您需要使用实例化 XMLModifier 的副本并调用“remove()”方法。如果您需要更多信息，请告诉我。

# python - 报告生成器的建议（Python 或 Web 服务）

> ID：11881477
> 
> 赞同：2
> 
> 时间：2012-08-09T10:33:43.853
> 
> 标签：python, reporting, analytics

我维护了几个 Web 应用程序，我想添加一些“不错的”报告/分析页面。构建一次很简单（例如使用[flot](http://code.google.com/p/flot/)或类似的绘图库），但不知何故，似乎应该有一个报告生成库，它“只是”生成必要的图形而无需太多编码+提供一些过滤能力。

那里有一些工具，但由于某种原因，从来没有一个合适的工具：

*   必须在 Linux 上工作
*   开源是首选，尽管闭源也很有效，只要定价模型也适用于小型安装
*   需要 Python API（或使用标准 Web 协议的外部服务）

我意识到这并不是一个独特的问题，但我找不到具有相同范围的其他 stackoverflow 问题。任何指针表示赞赏。

**更新（2012-08-09，15:10 UTC）：**我意识到我没有说明更多的要求/愿望：

*   用于访问报告的 Web 界面
*   访问控制：每个用户只能获取关于他自己的数据的报告（使用库很简单，使用外部服务器可能很难）
*   过滤：我需要基于某些参数（例如“仅在此时间范围内的事件”、“仅在 X 位置”）对值进行交互式过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:42:56.597

[Windward](http://windward.net)* is one software company that offers a solution that seems to meet most of your needs. They offer a Python API through either Jython or a RESTful API (their Java Engine and Javelin, respectively), and their main strength is that template design is done in Microsoft Office, so reports can be very flexible and are easy to put together (most people already know how to use Word, so there's also much less learning curve than other solutions out there). You can add dynamic filters that take parameters at runtime or change on-the-fly, you can output to a variety of formats including HTML and PDF, and it works with pretty much every major datasource. For a web interface, you can either build your own and easily integrate reporting into it (Engine) or buy one pre-built and modify it to your specifications (Javelin).

On the downside, they are closed-source and without knowing more about your setup, it would be difficult for me to say whether their pricing would work. Might be worth a look, though--the links above and their [documentation wiki](http://wiki.windward.net/) are probably good places to start looking to see if you're a fit.

*Disclaimer: I work for Windward. I do believe they are one of the better reporting packages out there, but there are others that may fit your needs too.

# java - 如何使用 spring-data-jpa 更新实体？

> ID：11881479
> 
> 赞同：267
> 
> 时间：2012-08-09T10:33:44.150
> 
> 标签：java, jpa, spring-data-jpa

好吧，这个问题几乎说明了一切。使用 JPARepository 如何更新实体？

JPARepository 只有一个**保存**方法，它并没有告诉我它实际上是创建还是更新。例如，我向数据库 User 中插入了一个简单的 Object，它具有三个字段`firstname`：`lastname`和`age`：

```
 @Entity
 public class User {

  private String firstname;
  private String lastname;
  //Setters and getters for age omitted, but they are the same as with firstname and lastname.
  private int age;

  @Column
  public String getFirstname() {
    return firstname;
  }
  public void setFirstname(String firstname) {
    this.firstname = firstname;
  }

  @Column
  public String getLastname() {
    return lastname;
  }
  public void setLastname(String lastname) {
    this.lastname = lastname;
  }

  private long userId;

  @Id
  @GeneratedValue(strategy=GenerationType.AUTO)
  public long getUserId(){
    return this.userId;
  }

  public void setUserId(long userId){
    this.userId = userId;
  }
} 
```

然后我简单地调用`save()`，此时它实际上是插入数据库：

```
 User user1 = new User();
 user1.setFirstname("john"); user1.setLastname("dew");
 user1.setAge(16);

 userService.saveUser(user1);// This call is actually using the JPARepository: userRepository.save(user); 
```

到现在为止还挺好。现在我想更新这个用户，比如改变他的年龄。为此，我可以使用查询，无论是 QueryDSL 还是 NamedQuery。但是，考虑到我只想使用 spring-data-jpa 和 JPARepository，我该如何告诉它我想要更新而不是插入？

具体来说，我如何告诉 spring-data-jpa 具有相同用户名和名字的用户实际上是 EQUAL 并且应该更新现有实体？覆盖 equals 并没有解决这个问题。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2012-08-09T10:43:42.270

实体的身份由它们的主键定义。由于`firstname`and`lastname`不是主键的一部分，因此您不能告诉 JPA 将`User`具有相同`firstname`s 的 s 和`lastname`具有不同 s 的 s 视为相等`userId`。

因此，如果您想更新`User`由其`firstname`and标识的 a `lastname`，您需要`User`通过查询找到它，然后更改您找到的对象的适当字段。这些更改将在事务结束时自动刷新到数据库，因此您无需执行任何操作即可显式保存这些更改。

**编辑：**

也许我应该详细说明 JPA 的整体语义。设计持久性 API 有两种主要方法：

*   **插入/更新方法**。当您需要修改数据库时，您应该显式调用持久性 API 的方法：调用`insert`以插入对象，或`update`将对象的新状态保存到数据库。

*   **工作单元方法**。在这种情况下，您有一组由持久性库*管理的对象。*您对这些对象所做的所有更改都将在工作单元结束时自动刷新到数据库中（即在典型情况下在当前事务结束时）。当您需要向数据库中插入新记录时，您将相应的对象设为*managed*。*托管*对象由它们的主键标识，因此如果您使用预定义的主键*管理*对象，它将与相同 id 的数据库记录相关联，并且该对象的状态将自动传播到该记录。

JPA 遵循后一种方法。`save()`在 Spring Data 中，JPA 由`merge()`普通 JPA 支持，因此它使您的实体按上述方式进行*管理。*这意味着调用`save()`具有预定义 id 的对象将更新相应的数据库记录，而不是插入新的记录，并解释了为什么`save()`不调用`create()`。

* * *

## 回答 #2

> 赞同：192
> 
> 时间：2015-06-30T22:28:59.903

由于@axtavt 的回答侧重于`JPA`不`spring-data-jpa`

要通过查询更新实体然后保存效率不高，因为它需要两个查询，而且查询可能非常昂贵，因为它可能会加入其他表并加载任何具有`fetchType=FetchType.EAGER`

`Spring-data-jpa`支持更新操作。
您必须在 Repository 接口中定义该方法。并使用`@Query`和对其进行注释`@Modifying`。

```
@Modifying
@Query("update User u set u.firstname = ?1, u.lastname = ?2 where u.id = ?3")
void setUserInfoById(String firstname, String lastname, Integer userId); 
```

`@Query`用于定义自定义查询，并`@Modifying`用于告知`spring-data-jpa`此查询是更新操作并且`executeUpdate()`不需要`executeQuery()`.

您可以指定其他返回类型：
`int`- 正在更新的记录数。
`boolean`- 如果有记录被更新，则为真。否则为假。

* * *

*注意：在*[事务](https://www.baeldung.com/transaction-configuration-with-jpa-and-spring)中运行此代码。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2018-09-30T10:20:07.837

您可以简单地将此函数与 save() JPA 函数一起使用，但是作为参数发送的对象必须包含数据库中现有的 id 否则它将不起作用，因为 save() 当我们发送没有 id 的对象时，它会直接在其中添加一行数据库，但是如果我们发送一个具有现有 id 的对象，它会更改数据库中已经找到的列。

```
public void updateUser(Userinfos u) {
    User userFromDb = userRepository.findById(u.getid());
    // crush the variables of the object found
    userFromDb.setFirstname("john"); 
    userFromDb.setLastname("dew");
    userFromDb.setAge(16);
    userRepository.save(userFromDb);
} 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2018-12-11T03:38:47.220

正如其他人已经提到的，它`save()`本身包含创建和更新操作。

我只是想补充一下该`save()`方法背后的内容。

首先，让我们看看 的扩展/实现层次结构`CrudRepository<T,ID>`， [![在此处输入图像描述](../Images/50fbb0ae87616843767a08e381fbce58.png)](https://i.stack.imgur.com/ZCGvJ.png)

好的，让我们检查一下`save()`实现`SimpleJpaRepository<T, ID>`，

```
@Transactional
public <S extends T> S save(S entity) {

    if (entityInformation.isNew(entity)) {
        em.persist(entity);
        return entity;
    } else {
        return em.merge(entity);
    }
} 
```

如您所见，它首先会检查ID是否存在，如果实体已经存在，则仅通过`merge(entity)`方法更新，否则通过方法插入新记录`persist(entity)`。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-12-06T18:54:40.890

使用 spring-data-jpa `save()`，我遇到了与@DtechNet 相同的问题。我的意思是每个人都`save()`在创建新对象而不是更新。为了解决这个问题，我必须在`version`实体和相关表中添加字段。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-06-03T10:06:54.040

spring data`save()`方法将帮助您执行以下两项操作：添加新项目和更新现有项目。

只需致电`save()`并享受生活 :))

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-09-21T15:40:56.253

这就是我解决问题的方法：

```
User inbound = ...
User existing = userRepository.findByFirstname(inbound.getFirstname());
if(existing != null) inbound.setId(existing.getId());
userRepository.save(inbound); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-26T10:42:50.503

```
public void updateLaserDataByHumanId(String replacement, String humanId) {
    List<LaserData> laserDataByHumanId = laserDataRepository.findByHumanId(humanId);
    laserDataByHumanId.stream()
            .map(en -> en.setHumanId(replacement))
            .collect(Collectors.toList())
            .forEach(en -> laserDataRepository.save(en));
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-25T12:03:50.163

> 具体来说，我如何告诉 spring-data-jpa 具有相同用户名和名字的用户实际上是 EQUAL 并且应该更新实体。覆盖 equals 不起作用。

出于这个特殊目的，可以引入这样的复合键：

```
CREATE TABLE IF NOT EXISTS `test`.`user` (
  `username` VARCHAR(45) NOT NULL,
  `firstname` VARCHAR(45) NOT NULL,
  `description` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`username`, `firstname`)) 
```

映射：

```
@Embeddable
public class UserKey implements Serializable {
    protected String username;
    protected String firstname;

    public UserKey() {}

    public UserKey(String username, String firstname) {
        this.username = username;
        this.firstname = firstname;
    }
    // equals, hashCode
} 
```

以下是如何使用它：

```
@Entity
public class UserEntity implements Serializable {
    @EmbeddedId
    private UserKey primaryKey;

    private String description;

    //...
} 
```

JpaRepository 看起来像这样：

```
public interface UserEntityRepository extends JpaRepository<UserEntity, UserKey> 
```

然后，您可以使用以下**惯用语：**接受带有用户信息的 DTO，提取姓名和名字并创建 UserKey，然后使用此复合键创建一个 UserEntity，然后调用 Spring Data save()，它应该为您整理所有内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-18T09:37:56.103

如果您的主键是自动增量，那么您必须设置主键的值。对于保存（）；方法作为 update() 工作。否则它将在 db 中创建一个新记录。

如果您使用的是 jsp 表单，则使用隐藏字段来设置主键。

jsp：

> <form:input type="hidden" path="id" value="${user.id}"/>

爪哇：

```
@PostMapping("/update")
public String updateUser(@ModelAttribute User user) {
    repo.save(user);
    return "redirect:userlist";
} 
```

也看看这个：

```
@Override
  @Transactional
  public Customer save(Customer customer) {

    // Is new?
    if (customer.getId() == null) {
      em.persist(customer);
      return customer;
    } else {
      return em.merge(customer);
    }
  } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-28T10:35:14.960

你可以看到下面的例子：

```
private void updateDeliveryStatusOfEvent(Integer eventId, int deliveryStatus) {
    try {
        LOGGER.info("NOTIFICATION_EVENT updating with event id:{}", eventId);
        Optional<Event> eventOptional = eventRepository.findById(eventId);
        if (!eventOptional.isPresent()) {
            LOGGER.info("Didn't find any updatable notification event with this eventId:{}", eventId);
        }
        Event event = eventOptional.get();
        event.setDeliveryStatus(deliveryStatus);
        event = eventRepository.save(event);
        if (!Objects.isNull(event)) {
            LOGGER.info("NOTIFICATION_EVENT Successfully Updated with this id:{}", eventId);
        }
    } catch (Exception e) {
        LOGGER.error("Error :{} while updating NOTIFICATION_EVENT of event Id:{}", e, eventId);
    }
} 
```

**或使用本机查询更新：**

```
public interface yourRepositoryName extend extends JpaRepository<Event,Integer>{
@Transactional
    @Modifying
    @Query(value="update Event u set u.deliveryStatus = :deliveryStatus where u.eventId = :eventId", nativeQuery = true)
    void setUserInfoById(@Param("deliveryStatus")String deliveryStatus, @Param("eventId")Integer eventId);
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-03-29T20:56:56.660

使用[@DynamicUpdate](https://www.baeldung.com/spring-data-jpa-dynamicupdate)注释。它更干净，您不必处理查询数据库即可获取保存的值。

# jquery - 使用代码实现 GIF 效果 - 它是如何完成的？

> ID：11881481
> 
> 赞同：2
> 
> 时间：2012-08-09T10:33:50.670
> 
> 标签：jquery, gif, css-sprites

在重新搜索一个项目时，我看到了 Lacoste 的网页[http://www.lacoste.com/live/usa/home](http://www.lacoste.com/live/usa/home)

这个页面的设计最让我感兴趣的是外观的显示，当它悬停时变成了看似 360 度的动画 GIF，但仔细观察后我意识到它们实际上是非常宽的 JPEGS，从各个角度看以某种方式左右移动以创造动画运动的印象。

这是如何实现的？我想是某种 JavaScript 可以做到这一点，但如果有人能用一个小代码示例解释它的基本原理是什么，我将不胜感激。

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:26:12.543

使用固定大小的 div、背景图像和背景位置的变化来制作它。
**在这里检查：http:** [//jsfiddle.net/LLAlive/NX2FG/](http://jsfiddle.net/LLAlive/NX2FG/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:38:23.940

您需要搜索的关键字是`css sprites`，这里有一个很好的解释：http: [//css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

# c# - ItemAdded 如何检测添加的项目是文档集本身还是文档库中的文件

> ID：11881484
> 
> 赞同：0
> 
> 时间：2012-08-09T10:33:53.843
> 
> 标签：c#, sharepoint

我有一个带有 itemadd 事件接收器的文档库。文档库中的项目是文档集。

当我在文档库中创建一个项目时，添加的项目被执行。但是，这种逻辑，我只想为文档集本身执行它，而不是在我将文件添加到文档集时执行它。

创建文档集时，以下代码可以正常工作，但是该行：

```
string recurrent = item[Meetings.Common.Constants.FIELDS_AGENDAPOINTSRECURRENT_NAME].ToString(); 
```

文件上传到文档集时执行事件接收器时抛出对象引用异常

```
public override void ItemAdded(SPItemEventProperties properties)
        {
            Logger.LogDebug("AgendaPointsProposedEvents", "ItemAdded(SPItemEventProperties properties)", "BEGIN");
            base.ItemAdded(properties);
            try
            {
                base.EventFiringEnabled = false;

                SPListItem item = properties.ListItem;
                SPItemEventDataCollection afterProperties = properties.AfterProperties;
                string listName = item.ParentList.RootFolder.Name;

                string recurrent = item[Meetings.Common.Constants.FIELDS_AGENDAPOINTSRECURRENT_NAME].ToString();
                bool recurrentBln = bool.Parse(recurrent);
                if (recurrentBln)
                {
                    #region NLNSSV-169
                    // If the user selects recurrent the agenda proposed item cant have an associated meeting.
                    // Also the security is reset to its initial state.
                    properties.ListItem[Meetings.Common.Constants.FIELDS_MEETING_NAME] = null;
                    properties.List.ResetRoleInheritance();
                    properties.ListItem.Update();
                    #endregion
                }
                else
                {
                    #region NLNSSV-184
                    // NLNSSV-184
                    // Proposed meeting points should be visible to other departments as soon as they are added to a meeting. 
                    // An event handler should change the authentication on the item level when a meeting point is added to (or removed from!) the meeting.
                    // This also needs a change in the views and screens..
                    SPFieldLookup sp = item.GetLookupField(MeetingsCommon.Constants.FIELDS_MEETING_NAME);
                    string meetingname = afterProperties.GetValueAsString("Meeting");
                    if (!string.IsNullOrEmpty(meetingname))
                    {
                        RoleDefRead = SecurityHelper.GetRoleDefinition(properties.Web, Constants.PERMISSIONLEVEL_READ);
                        DepartmentCORUsersGroup = properties.Web.SiteGroups[MeetingsCommon.Constants.SECURITY_PRINCIPAL_DEPARTMENTCORUSERS_NAME];
                        DepartmentFINUsersGroup = properties.Web.SiteGroups[MeetingsCommon.Constants.SECURITY_PRINCIPAL_DEPARTMENTFINUSERS_NAME];
                        DepartmentMSCUsersGroup = properties.Web.SiteGroups[MeetingsCommon.Constants.SECURITY_PRINCIPAL_DEPARTMENTMSCUSERS_NAME];
                        DepartmentOPIUsersGroup = properties.Web.SiteGroups[MeetingsCommon.Constants.SECURITY_PRINCIPAL_DEPARTMENTOPIUSERS_NAME];
                        DepartmentRDSUsersGroup = properties.Web.SiteGroups[MeetingsCommon.Constants.SECURITY_PRINCIPAL_DEPARTMENTRDSUSERS_NAME];
                        DepartmentSALUsersGroup = properties.Web.SiteGroups[MeetingsCommon.Constants.SECURITY_PRINCIPAL_DEPARTMENTSALUSERS_NAME];

                        bool isProposed = item.TaxonomyFieldValueIsGivenValue(properties.AfterProperties, MeetingsCommon.Constants.FIELDS_AGENDAPOINTSTATUS_NAME, MeetingsCommon.Constants.TERMVALUE_AGENDAPOINTSTATUS_PROPOSED, 1033);
                        if (isProposed)
                        {

                            #region Change permissions in COR items
                            if (listName.Equals(MeetingsCommon.Constants.LISTS_AGENDAPOINTSPROPOSEDCOR_NAME))
                            {
                                item.BreakRoleInheritance(true);
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentFINUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentMSCUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentOPIUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentRDSUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentSALUsersGroup, false); // Read   
                            }
                            #endregion

                            #region Change permissions in FIN items
                            if (listName.Equals(MeetingsCommon.Constants.LISTS_AGENDAPOINTSPROPOSEDFIN_NAME))
                            {
                                item.BreakRoleInheritance(true);
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentCORUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentMSCUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentOPIUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentRDSUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentSALUsersGroup, false); // Read   
                            }
                            #endregion

                            #region Change permissions in MSC items
                            if (listName.Equals(MeetingsCommon.Constants.LISTS_AGENDAPOINTSPROPOSEDMSC_NAME))
                            {
                                item.BreakRoleInheritance(true);
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentCORUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentFINUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentOPIUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentRDSUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentSALUsersGroup, false); // Read   
                            }
                            #endregion

                            #region Change permissions in OPI items
                            if (listName.Equals(MeetingsCommon.Constants.LISTS_AGENDAPOINTSPROPOSEDOPI_NAME))
                            {
                                item.BreakRoleInheritance(true);
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentCORUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentFINUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentMSCUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentRDSUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentSALUsersGroup, false); // Read   
                            }
                            #endregion

                            #region Change permissions in RDS items
                            if (listName.Equals(MeetingsCommon.Constants.LISTS_AGENDAPOINTSPROPOSEDRDS_NAME))
                            {
                                item.BreakRoleInheritance(true);
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentCORUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentFINUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentMSCUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentOPIUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentSALUsersGroup, false); // Read   
                            }
                            #endregion

                            #region Change permissions in SAL items
                            if (listName.Equals(MeetingsCommon.Constants.LISTS_AGENDAPOINTSPROPOSEDSAL_NAME))
                            {
                                item.BreakRoleInheritance(true);
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentCORUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentFINUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentMSCUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentOPIUsersGroup, false); // Read
                                SecurityHelper.AddToRoleAssignment(RoleDefRead, properties.Web, item, DepartmentRDSUsersGroup, false); // Read   
                            }
                            #endregion
                        }
                    }
                    else
                    {
                        item.ResetRoleInheritance();
                    }
                    #endregion
                }
            }
            catch (Exception ex)
            {
                Logger.LogError("AgendaPointsProposedEvents", "ItemAdded(SPItemEventProperties properties)", ex);
                throw;
            }
            finally
            {
                base.EventFiringEnabled = true;
            }
            Logger.LogDebug("AgendaPointsProposedEvents", "ItemAdded(SPItemEventProperties properties)", "END");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:06:38.923

我想到了。

这个想法是检测内容类型，因为有时列表可能具有不同的内容类型，并且您希望代码仅针对一种内容类型执行。

简单的：

```
 string contentTypeName = properties.ListItem.ContentType.Name;
            if (contentTypeName == "contentypename")
            { 
```

# c# - C# 中的枚举使用负数的负面影响

> ID：11881490
> 
> 赞同：31
> 
> 时间：2012-08-09T10:34:49.190
> 
> 标签：c#

在 C# 枚举中，使用负数是否有任何负面影响？

我正在建模响应代码和否定代码之一。这可以编译，但我想知道这是否有任何负面影响。

```
public enum ResponseCodes
{
    InvalidServerUserPasswordCombo = -1,

    // etc.
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-09T10:37:16.703

> 使用负数的负面影响

显然，对于任何底层的有符号类型，任何按位运算都会很快变得“有趣”。

但是使用枚举作为相关常量的集合可以非常愉快地使用负值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-09T10:38:16.663

没有负面影响，但是请记住，在这种情况下，枚举被初始化为零：

```
class YourClass {
    public ResponseCodes ResponseCode { get; set; }
} 
```

只提供负值将对类的任何用户产生不良影响（除非他们初始化它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-13T23:24:33.780

这个答案晚了 7 年，但我在其他任何地方都没有看到这一点。

对枚举使用负数时会产生轻微的负面影响。如果要将负数转换为枚举，则需要确保数字在括号中以避免编译错误，例如：

```
class YourClass {
    ResponseCodes rc = (ResponseCodes)(-1);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-09T10:38:55.987

不，枚举是一个整数类型的值，它可以是从 -2,147,483,648 到 2,147,483,647 的任何值！:)

# javascript - javascript event.target 抛出错误（但它有效）

> ID：11881503
> 
> 赞同：0
> 
> 时间：2012-08-09T10:35:18.623
> 
> 标签：javascript, jquery

长话短说，我正在使用 ajax 制作一个小型网站，但更多的是用于手机。

我劫持了一些链接，在萤火虫测试时，单击链接时出现此错误

```
TypeError: e.target is undefined
[Break On This Error]   

var myurl = e.target.href; 
```

现在的问题是，虽然我得到了这个错误，但当我在普通桌面上测试它时它确实有效，当我放在移动设备（ios）上它也可以工作并加载 AJAX 内容。

我想修复它的原因是因为......除了有错误之外，我还有另一个小问题，我不确定是不是因为这个，所以试图一个一个地修复。

这是我为劫持移动网站链接而创建的两个函数。

javascript:

```
//~~~~~~~~~~~~~~~~~~~~~~~~~~~functions for mobile index load AND hijacking app      

function loadPage(url){
        if( url == undefined){
            $('#contentHere').load('index.html #content', hijackLinks);
                window.location.hash = mainHash;
        } else {
            $('#contentHere').load(url + '#content', hijackLinks ); 
        }
    }

    function hijackLinks(e){
        var myurl = e.target.href;
        e.preventDefault();
        loadPage(myurl);
        mainHash = window.location.hash = $(this).attr("href");
        console.log(mainHash);

    } 
```

任何人都可以帮助我吗？我将如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:42:07.893

`e.target`指最初触发事件的对象（通常是 DOM 元素）。如果您只是`hijackLinks`直接调用，而不是作为事件处理程序，那么当然`e`不会引用事件，因此`e.target`是未定义的。我猜你也是`hijackLinks`从点击处理程序或类似的调用，因此它会在这种情况下按预期工作。

您有 2 个选项 - 要么将内部更改`hijackLinks`为不依赖于将事件作为参数传递（可能不是一个好主意），要么只是将所有直接调用更改`hijackLinks`为通过 DOM 元素事件。例如，您的原始代码：

```
$('#contentHere').load('index.html #content', hijackLinks); 
```

可以改为：

```
$('#contentHere').load('index.html #content', function() {
    $('a.whatever').trigger('click');
}); 
```

更改`a.whatever`选择器以指向被劫持的实际链接（您没有显示任何标记，所以我不知道那会是什么），然后只要您正确绑定了点击处理程序（或您需要的任何 UI 交互）触发事件），您可以依靠`hijackLinks`使用事件参数进行调用。

# javascript - 在javascript中具有同名的getter和函数

> ID：11881505
> 
> 赞同：0
> 
> 时间：2012-08-09T10:35:21.650
> 
> 标签：javascript, oop

我需要做出改变，但在一段时间内继续提供向后兼容性，但我不知道如何实现这一点。

我有一个像这样的对象：

```
MyObject = (function() {
   // vars here and there

   var myVar

   // a bunch of code

   return {
     get myVar() { return myVar },
     myVar: function() { return myVar }
   }

}()) 
```

这行不通。我希望能够同时获得 myVar

> MyObject.myVar

和

> MyObject.myVar()

是否可以？更好的是，有没有可能做到这一点并使其跨浏览器兼容？（现在我知道Internet Explorer 不支持**get表示法）**

谢谢。

**更新**：

因为这似乎不可能，有什么方法可以让我现在拥有的`get myVar()`浏览器与 Internet Explorer 兼容？所以所有浏览器都可以访问**MyObject.myVar**

只要我可以继续为 myVar 提供 getter 并且它与 Internet Explorer 兼容，就没有必要转移到 myVar() 但我找不到可行的解决方案来使当前方式 (MyObject.myVar) 兼容除了转向类似函数的getter。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:48:00.060

不，这是不可能的。在javascript中，没有and的概念`fields`，`methods`只有`property`对象的概念，无论属性是值还是函数（函数也是对象。）

如果`MyObject.myVar`不是函数，`MyObject.myVar()`则将产生错误。

你唯一能做的就是拥有两个属性。

```
MyObject.myVar 
```

和

```
MyObject.getMyVar() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:48:30.547

这是不可能的，因为它会模棱两可。如果执行 getter 返回的对象`MyObject.myVar`，则调用 getter 。`()`因此，因为`MyObject.myVar()`当 getter 存在时有意义，所以无法为解释器决定您要调用您的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T10:53:55.970

这*是*可能的，虽然你的代码看起来很讨厌。由于函数是对象，因此它们也具有`valueOf`属性。通过使用对方法本身的引用来覆盖它来利用它，你就在那里：

```
var foo = (function()
{
    var bar = 'foobar';
    var r = {
        bar:function()
        {
            return bar;
        }
    };
    r.bar.toString = r.bar.valueOf = r.bar;//valueOf && toString invoke the method
    return r;
 })(); 
```

请注意，它的类型将是一个对象，所以严格的比较是行不通的：

```
foo.bar =='foobar'//true
foo.bar === 'foobar'//false
alert(foo.bar+'');//alerts foobar
alert(foo.bar);//alerts foobar now, setting toString to reference the method, too
console.log(foo.bar());//foobar <= still works, and here strict comparisons do work 
```

这可能会导致许多令人讨厌的错误，可能会让您抓挠头发，直到没有头发可以抓挠。更不用说可能最终维护您的代码的其他人！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T11:07:16.137

我想这行得通：

```
 function test() {
      var myVar = 5;
      return {
      /*@cc_on
          /*@if (@_jscript_version)
              myVar: function() { return myVar }
          @else @*/
              get myVar() { return myVar }
          /*@end
      @*/
      };
  }

var a = test();
var b = a.myVar/*@cc_on () @*/

alert(b) // alerts 5 
```

[http://jsfiddle.net/XS7fU/2/](http://jsfiddle.net/XS7fU/2/)

# windows - 如何在 Windows 上重新定位 .IntelliJ 文件夹？

> ID：11881506
> 
> 赞同：9
> 
> 时间：2012-08-09T10:35:23.167
> 
> 标签：windows, intellij-idea

在企业环境中的 Windows 上运行 IntelliJ 时，.IntelliJ 文件夹可能会很快变得太大而超出您的配置文件限额（尤其是如果您使用 Maven） - 有没有办法让 IntelliJ 指向此文件夹的备用位置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T10:48:18.143

在（您的位置可能不同）下有一个设置文件，`C:\Program Files (x86)\JetBrains\IntelliJ IDEA\bin\idea.properties`您可以在其中自定义各种 IntelliJ 文件夹的路径。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T10:50:20.863

[IntelliJ IDEA 常见问题解答](http://devnet.jetbrains.net/docs/DOC-181)中回答了这个问题：

> 这些目录的位置可以在`IDEA_HOME\bin\idea.properties`文件中修改。您将需要调整以下参数：
> 
> *   idea.config.path
> *   想法.系统.路径
> *   idea.plugins.path

# java - 从数据库加载对象时的java对象相等性

> ID：11881509
> 
> 赞同：0
> 
> 时间：2012-08-09T10:35:31.883
> 
> 标签：java, hibernate, equals

环境：Java，休眠

假设我执行两个数据库查询：

伪代码：

```
Author au1 = execute_query_1
Author au2 = execute_query_2 
```

并假设这两个查询从数据库返回相同的记录。

是否可以安全地说该声明：

```
au1.equals(au2) 
```

会返回真实的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:37:19.113

是的，如果您使用同一会话执行查询。Hibernate 将简单地从缓存中获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:40:48.183

如果 object Author 覆盖 equals() 方法是完全安全的。如果没有，则与键入 au1 == au2 相同，可以返回任何内容，这可能是两个不同的实例。好办法是为它写一个自动化测试

# c++ - 当我的程序只能以 1 Mbps 速率处理数据时如何处理 100 Mbps 输入流

> ID：11881513
> 
> 赞同：2
> 
> 时间：2012-08-09T10:36:02.900
> 
> 标签：c++, performance, caching

我正在做一个项目，我们可以有 100 Mbps 的输入数据流。

我的程序可以在一夜之间用于捕获这些数据，因此会生成巨大的数据文件。我解释这些数据的程序逻辑很复杂，每秒只能处理 1 Mb 数据。

我们还在处理后将字节转储到某个日志文件。我们不想丢失任何传入的数据，同时希望我的程序能够实时运行。所以；我们正在维护一个类似于缓存的循环缓冲区。

现在唯一能避免传入数据丢失的方法是增加这个缓冲区的大小。

请提出更好的方法来做到这一点，以及我可以尝试的替代缓存方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:40:42.207

将输入流式传输到文件。真的，别无选择。它进来的速度比你处理它的速度要快。

您可以每秒创建一个文件的输入数据。这样，您可以直接开始处理旧文件，同时在磁盘上流式传输新文件。

# xslt - xsl 中的撇号：格式编号

> ID：11881517
> 
> 赞同：3
> 
> 时间：2012-08-09T10:36:36.610
> 
> 标签：xslt, xpath, format

我用我的 xslt 解析一个 xml 并将结果作为一个 xml。

我需要用撇号格式化数字作为 tousand、百万等的分隔符...

例如：1234567 = 1'234'567

现在的问题是我如何把这些撇号放在那里？

```
<xsl:value-of select="format-number(/path/to/number, '###'###'###'###')" /> 
```

这不起作用，因为撇号本身已经在分隔格式的开头。

有没有一个简单的解决方案（也许像在c#中一样转义撇号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:47:44.073

答案取决于您使用的是 1.0 还是 2.0。

在 2.0 中，您可以通过将字符串分隔符加倍（例如 'it''s dark'）来转义字符串分隔符，并且可以使用 XML 实体（例如`&quot;`. 所以你可以写：

```
<xsl:value-of select="format-number(/path/to/number, '###''###''###''###')" /> 
```

在 1.0 中，您可以使用 XML 实体对属性分隔符进行转义，但无法对字符串分隔符进行转义。所以你可以切换你的分隔符并使用

```
<xsl:value-of select='format-number(/path/to/number, "###&apos;###&apos;###&apos;###")' /> 
```

另一种方法 - 可能更简单 - 是将字符串放入变量中：

```
<xsl:variable name="picture">###'###'###'###</xsl:variable>
<xsl:value-of select="format-number(/path/to/number, $picture)" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T06:25:28.000

经过一番研究，我们想出了这个解决方案：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:decimal-format name='ch' grouping-separator="'" />
     <xsl:template match="/">
     <xsl:value-of select='format-number(/the/path/of/the/number, "###&apos;###&apos;###", "ch")'/>
     ... 
```

# java - 自定义对话框构造函数

> ID：11881520
> 
> 赞同：1
> 
> 时间：2012-08-09T10:36:42.423
> 
> 标签：java, android, interface, dialog

我的界面：

```
public interface LoginDialogDismissListener {
    void loginDialogCancel();
    void loginDialogSuccess();
} 
```

我的活动：

```
public class MainActivity extends Activity implements LoginDialogDimissListener {
    public void loginDialogCancel() {
        //do stuff here     
    }

    public void loginDialogSuccess() {
        //do some other stuff here!
    }
} 
```

我的登录对话框：

```
public class LoginDialog extends Dialog implements OnClickListener, LoginChecker {

    private ProgressBar pbLogin;
    private TextView tvLoginstatus;
    private Button cancel;
    private Button save;
    private EditText username;
    private EditText password;

    public LoginDialog(Context context) {
        super(context);
        setContentView(R.layout.login_dialog);
        pbLogin = (ProgressBar) findViewById(R.id.progressBarLogin);
        tvLoginstatus = (TextView) findViewById(R.id.dialogTvLoginstatus);
        cancel = (Button) findViewById(R.id.bDialogCancel);
        save = (Button) findViewById(R.id.bDialogSave);
        username = (EditText) findViewById(R.id.dialogEtUsername);
        password = (EditText) findViewById(R.id.dialogEtPassword);

        setTitle("Brukerdata");
        pbLogin.setVisibility(View.INVISIBLE);
        tvLoginstatus.setVisibility(View.INVISIBLE);

        cancel.setOnClickListener(this);
        save.setOnClickListener(this);
        //setOnDismissListener(this);
    }

    public void onClick(View v) {
        if (v.getId() == R.id.bDialogSave) {
            saveClick();
        }
        else if (v.getId() == R.id.bDialogCancel) {
            cancelClick();
        }
    }

    private void saveClick() {
        save.setEnabled(false);
        String[] credentials = {username.getText().toString(), password.getText().toString()};
        pbLogin.setVisibility(View.VISIBLE);
        CheckLoginTask logintask = new CheckLoginTask(this, credentials, 0);
        logintask.execute();
    }

    private void cancelClick() {
        this.dismiss();
        //Here I want to call LoginDialogDismissListener.loginDialogCancel()
    }

    //Called from my AsyncTask (CheckLoginTask)
    public void onLoginSuccess(int requestCode) {
        this.dismiss();
        //Here I want to call LoginDialogDismissListener.loginDialogSuccess()
    }

    //Called from my AsyncTask (CheckLoginTask)
    public void onLoginFail(int requestCode) {
        pbLogin.setVisibility(View.INVISIBLE);
        tvLoginstatus.setText("Feil brukernavn/passord ...");
        tvLoginstatus.setVisibility(View.VISIBLE);
        save.setEnabled(true);
    }
} 
```

如果您阅读了我在代码中的注释，您会看到我想使用 MainActivity 从我的接口实现的方法来调用它。问题是我不知道如何将我的活动只发送*一次*到我的 LoginDialog。

我的意思是，首先它需要上下文，其次我想为它提供 LoginDialogDismissListener（可能应该更改该名称......），这是我的活动。

我觉得有比这更好的解决方案：

```
//Constructor
public LoginDialog(Context context, LoginDialogDismissListener listener) {
}

//Activity creating the Dialog
new LoginDialog(this, this); 
```

我试图将构造函数定义为仅`LoginDialogDismissListener`作为参数，但我不能强制转换它或以某种方式获取我需要的上下文`super(context)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:34:00.617

来自#android-dev 的回答

制作一个实现我的接口的父 Activity 并让所有 Activity 再次扩展它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-09T10:41:29.607

不要使用“this”，使用 getApplicationContext()。

# jquery - 通过 jQuery 检查表行中是否存在元素

> ID：11881526
> 
> 赞同：0
> 
> 时间：2012-08-09T10:37:03.363
> 
> 标签：jquery

我的页面上有一个`table`标签。我正在动态添加一组新行，其中一些行可以包含`<button class="btn btn-primary"></button>`标签。我想知道，如果该表包含带有该按钮的任何行，如何通过 JQuery 检查信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:39:55.203

你试一试：

```
var buttons = $table.find('.btn.btn-primary');
var buttonExists = buttons.length > 0; 
```

表必须是包含您的表的 jQuery 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:39:57.990

您可以使用`length`来检查元素的存在。试试这个：

```
var buttonExists = $("table .btn-primary").length != 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:41:14.480

```
if ($('tr:contains(".btn")')){
  alert('has button')
} 
```

# api - Google Calendar API 是否支持 Windows phone 平台？

> ID：11881530
> 
> 赞同：0
> 
> 时间：2012-08-09T10:37:17.843
> 
> 标签：api, windows-phone-7, google-calendar-api

我一直在检查 Google Calendar API as flow：

[https://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/)

但我不确定它是否可以支持 Windows 手机平台？

windows phone 上是否有任何开源项目打包 Google 日历 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:46:55.320

支持它是因为启用了 REST。

GTalkChat 是一个使用 Google API 进行身份验证部分的开源应用程序，也许您可​​以从那里开始

[GitHub 上的 GTalkChat](https://github.com/lhchavez/gtalkchat)

和[Windows Phone 的 REST 基础知识](http://msdn.microsoft.com/en-us/windowsmobile/gg703400.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:15:36.453

[http://kelp.phate.org/2012/04/google-calendar-api-with-oauth-20.html](http://kelp.phate.org/2012/04/google-calendar-api-with-oauth-20.html)。

这个示例有关于谷歌日历的功能列表

# c# - 检查类型是否与父类型兼容，然后通过反射遍历其属性

> ID：11881535
> 
> 赞同：1
> 
> 时间：2012-08-09T10:37:38.217
> 
> 标签：c#, inheritance, reflection

```
class A
{
    public string proprt1 { get; set; }
    public string proprt2 { get; set; }

    public A(string p1,string p2)
    {
        proprt1 = p1;
        proprt2 = p2;
    }
}

class B : A
{
    public B(string p1,string p2):base(p1,p2)
    {
    }
}

class Q
{
    public B b = new B("a","b");
} 
```

我想知道 Q 类（即 B 类）的成员是否通过反射与 A 类兼容

```
private void someMethod()
{
    Q q = new Q();
    Type type = q.GetType();

    foreach (FieldInfo t in type.GetFields())
    {
        //I am stuck here
        //if (t.GetType() is A)
        //{}
    }
} 
```

然后我想遍历 B.. 的继承属性

我该怎么做呢？我是反思的新手...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:22:08.943

这适用于我的测试应用程序。

```
static void Main(string[] args) {
    Q q = new Q();
    Type type = q.GetType();

    Type aType = typeof(A);

    foreach (var fi in type.GetFields()) {
        object fieldValue = fi.GetValue(q);
        var fieldType = fi.FieldType;
        while (fieldType != aType && fieldType != null) {
            fieldType = fieldType.BaseType;
        }
        if (fieldType == aType) {
            foreach (var pi in fieldType.GetProperties()) {
                Console.WriteLine("Property {0} = {1}", pi.Name, pi.GetValue(fieldValue, null));
            }
        }
        Console.WriteLine();
    }

    Console.ReadLine();
} 
```

# python - 摇滚，纸，剪刀-python代码。帮助简化

> ID：11881539
> 
> 赞同：0
> 
> 时间：2012-08-09T10:37:52.733
> 
> 标签：python

我是 Python 新手，我只写了几个程序。**这是我最近为剪刀石头布**游戏编写的代码。我已经对其进行了测试，并且效果很好。有什么办法可以简化它吗？谢谢！

```
import random

wins=0   
losses=0    
ties=0    
rounds=0

r=1 #rock    
p=2 #paper    
s=3 #scissors

y = "The computer has made its choice, how about you?"

while rounds <= 10:    
 print y    
 x = input('(1)rock, (2)paper, or (3)scissors? :')
 choice = x    
 cpu_choice= random.randint(1, 3)

if (choice, cpu_choice) == (1, 2):    
  rounds += 1    
  losses += 1    
  print 'computer chose paper, you lose'
elif (choice, cpu_choice) == (3, 2):    
  print 'you win'    
  rounds += 1    
  wins += 1    
elif (choice, cpu_choice) == (2, 2):    
  print 'TIE!'    
  rounds += 1    
  ties += 1    
elif (choice, cpu_choice) == (1, 3):    
  print 'you win'    
  rounds += 1    
  wins += 1    
elif (choice, cpu_choice) == (3, 3):   
  print 'TIE!'    
  rounds += 1    
  ties += 1    
elif (choice, cpu_choice) == (2, 3):    
  print 'computer chose scissors, you lose'    
  rounds += 1    
  losses += 1    
elif (choice, cpu_choice) == (1, 1):    
  print 'TIE'    
  rounds += 1    
  ties += 1    
elif (choice, cpu_choice) == (3, 1):    
  print 'computer chose rock, you lose'    
  rounds += 1    
  losses += 1    
elif (choice, cpu_choice) == (2, 1):    
  print 'you win'    
  rounds += 1    
  wins += 1    
else:    
  print 'Please choose 1, 2, or 3'

print 'Game Over'

if wins>losses:
  print 'YOU WON'    
  print 'wins:' , wins   
  print 'losses' , losses    
  print 'ties' , ties    
else:    
 print 'you lose'    
 print 'wins:' , wins    
 print 'losses:' , losses    
 print 'ties:' , ties 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:52:21.170

虽然 stackoverflow 并不是一个真正的学习平台，但这里有一些建议：

*   阅读 ZEN（输入`import this`你的 python 控制台）。
*   在您的特定情况下，很多条件通常不是一个好主意。

至少，所有 TIE 条件都可以放在一起：

```
 if choice == cpu_choice:
    # TIE 
```

输入一些语法：

```
names = ['rock', 'paper', 'scissors']
print("Computer chooses {}, you loose".format(names[cpu_choice])) 
```

本质上，只有三个条件：

```
wins, losses = 0, 0

for round in range(10):

    # Your choice and CPU choice

    cpu_wins = (cpu_choice > choice or (choice == 3 and cpu_choice == 1))
    tie = (cpu_choice == choice)

    if cpu_wins:
        # You loose
        print("Computer chooses {}, you loose".format(names[cpu_choice]))
        losses += 1
    if not cpu_wins and tie:
        # tie
    else:
        # you win 
```

此外，您甚至不使用上面定义的 variables`p`和....`r``s`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T10:50:20.407

一些建议：

1.  您所有的条件案例都包含轮变量增加，除非发生错误的数据输入，因此您可以将**round += 1**行放在上面，并且在其他情况下只减少一次轮变量

2.  你有 if 案例做同样的工作，例如当“领带！” 发生了；最好将此类情况分组。'领带！' 案例可以在一个条件下分组**选择 == cpu_choice**从而省略 3 个 elif 子句。想想其他游戏案例中的相同问题。

3.  使用更好的代码格式，例如[PEP-8](http://www.python.org/dev/peps/pep-0008/)标准所建议的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T10:55:50.277

您可以使用模运算来确定玩家是否获胜：

```
player_result = ["tie", "win", "lose"]
player_choice = input('(1)rock, (2)paper, or (3)scissors? :')
cpu_choice= random.randint(1, 3)
result = player_result[(player_choice - cpu_choice) % 3]

print "You " + result
if result == "win":
    wins += 1
elif result == "lose":
    loses += 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T10:45:19.593

不要重复自己：

*   `rounds += 1`每一轮都会发生，所以你不必在每个分支中都放置
*   打印结果数字也总是发生。
*   使用四个空格缩进你的代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T11:01:05.757

我会做这样的事情，这可能比你的水平高一点，但是如果你研究这段代码是如何工作的，你会在 pythoN 上做得更好！:)

```
from random import randint

def do_rounds(num_rounds):
    choice_dict = {1: 'rock', 2: 'paper', 3: 'scissors'}
    beats_dict = {1: 3, 2: 1, 3: 2}

    for round in range(num_rounds):
        computer_choice = randint(1, 3)
        while True:
            player_choice = raw_input('(1)rock, (2)paper, or (3)scissors? :')
            if player_choice in ("1", "2", "3"):
                player_choice = int(player_choice)
                break
            else:
                print "input must be an integer 1, 2 or 3"

        player_lost = beats_dict[computer_choice] == player_choice

        tie = 1 if computer_choice == player_choice else 0
        win = 0 if player_lost else 1
        loss = 1 if player_lost else 0
        print "computer picked: %s" % choice_dict[computer_choice],
        print " you picked: %s" % choice_dict[player_choice]
        yield tie, win, loss

def run_game():
    ties, wins, losses = zip(*do_rounds(4))
    ties, wins, losses = sum(ties), sum(wins), sum(losses)
    print "ties = %s, wins = %s, losses = %s" % (ties, wins, losses)
    if wins > losses:
        print "you won!"
    elif wins == losses:
        print "tie!"
    else:
        print "loser!!!"

if __name__ == "__main__":
    run_game()

"""
(1)rock, (2)paper, or (3)scissors? :3
computer picked: rock, you picked: scissors
(1)rock, (2)paper, or (3)scissors? :2
computer picked: paper, you picked: paper
(1)rock, (2)paper, or (3)scissors? :1
computer picked: paper, you picked: rock
(1)rock, (2)paper, or (3)scissors? :3
computer picked: rock, you picked: scissors
ties = 1, wins = 1, losses = 3
loser!!!
""" 
```

# vb.net - VB.Net 相当于在单个语句中实例化一个类并分配成员值

> ID：11881541
> 
> 赞同：1
> 
> 时间：2012-08-09T10:37:55.790
> 
> 标签：vb.net, workflow-foundation

在 C# 中我可以使用

```
var myUser = New User {FirstName = "John", LastName  = "Carter"} 
```

在一个语句中实例化一个类并为其成员赋值。

VB.Net 中是否有等价物？

原因是 WF 4.0 只允许在设计器中进行 VB 表达式，我想快速创建一个默认值而不使用一些赋值活动。

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T10:41:55.927

是的

```
Dim myUser As New User With {.FirstName = "John", .LastName = "Carter"} 
```

# c# - 如何在图像上绘制插入符号？

> ID：11881543
> 
> 赞同：0
> 
> 时间：2012-08-09T10:37:57.673
> 
> 标签：c#

在我的应用程序中，用户可以通过键盘在图像上书写。是否可以在图像上显示插入符号（`TextBox`例如）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:02:04.540

您有 3 个不同的问题：

1) 在任意位置绘制文本。请参阅[MSDN 拉绳方法](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawstring.aspx "MSDN 拉绳方法")

2）将两个单独的图像（原始和文本）合并为一个。据我所知，您可能用来显示图像的图像宿主控件提供了位图对象属性，因此您需要能够在完成 DrawString 后将该位图对象保存到文件中。

3) 在任意位置绘制插入符号您可以使用基本绘图命令来创建自己的插入符号，即使用带有钢笔和路径的图形。然后问题是让它闪烁（这意味着再次绘制插入符号下方的内容，然后绘制插入符号等）我*认为*Pen 对象上有可能为您实现此目的的选项。

我会依次处理每个问题，然后将它们放在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:48:21.050

如果您指的是插入符号（输入文本时显示位置的闪烁指示器），您可能必须使用 P/Invoke。你应该从这里开始：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ff468799(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468799(v=vs.85).aspx)

# objective-c - CorePlot 图上的点

> ID：11881544
> 
> 赞同：0
> 
> 时间：2012-08-09T10:38:01.790
> 
> 标签：objective-c, ios, ipad, graphics, core-plot

我正在使用 CorePlot 处理图形，我的应用程序上有这个图形：

[我的图形 http://data.imagup.com/10/1159174088.3134png](http://data.imagup.com/10/1159174088.3134png)

现在我需要将坐标标记为点，如下所示：

[我想要的图形 http://data.imagup.com/12/1159172987.1122png](http://data.imagup.com/12/1159172987.1122png)

我必须添加什么才能拥有它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:03:59.130

你可以做这样的事情..

```
// Add the plot symbol.
CPTPlotSymbol *plotSymbol = [CPTPlotSymbol ellipsePlotSymbol]; // Ellipse is used for circles
plotSymbol.fill = [CPTFill fillWithColor:[CPTColor blueColor]];
plotSymbol.size = CGSizeMake(5.0, 5.0);

// Set the line style of the edges of your symbol. (Around your symbol)
CPTMutableLineStyle *plotSymbolLineStyle = [[[CPTMutableLineStyle alloc] init] autorelease];
plotSymbolLineStyle.lineColor = [CPTColor blackColor];
plotSymbolLineStyle.lineWidth = 1.0f;
plotSymbol.lineStyle = plotSymbolLineStyle;

plot.plotSymbol = plotSymbol; 
```

（`plot`可以是例如 a `CPTScatterPlot`）

从这里应该很容易根据需要修改符号。

# encoding - [JBoss AS7]：在哪里设置环境属性

> ID：11881546
> 
> 赞同：2
> 
> 时间：2012-08-09T10:38:09.760
> 
> 标签：encoding, jboss, jvm, jboss7.x, system-properties

我需要在我的 JBoss7 环境中将 jvm 系统属性设置`file.encoding`为, 。`utf-8`

我必须在哪里进行此更改？`standalone.xml`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T10:44:30.607

所有实例配置文件中都有一个部分`standalone.xml`，名为`system-properties`.

您可以像这样定义您的属性：

```
<system-properties>
    <property name="file.encoding" value="utf-8"/>
</system-properties> 
```

如果缺少该部分，只需*在该部分之后立即添加它`<extensions>`。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T23:44:39.693

您也可以从 JVM 选项中设置它

```
-Dfile.encoding=UTF-8 -Dfile.io.encoding=UTF-8 -DjavaEncoding=UTF-8 
```

# java - JPA 或 JDBC，它们有何不同？

> ID：11881548
> 
> 赞同：148
> 
> 时间：2012-08-09T10:38:20.433
> 
> 标签：java, jpa, jdbc

我正在学习 Java EE，我用 glassfish 下载了同样的 Eclipse。我看到了一些示例，还阅读了 Oracle 文档以了解有关 Java EE 5 的所有信息。连接到数据库非常简单。我打开了一个动态 Web 项目，创建了一个会话 EJB ，我使用了 EntityManager 并使用 get 方法可以访问存储的数据表。

对于我的下一个项目，我创建了一个简单的类，然后访问一些数据库表。我遇到的第一个问题是 PersistenceUnit 属性只能被 EJB、Servlet 等识别，而不是简单的 java 类。那么我不能使用 EntityManager 方式（或者我可以吗？）

我被要求通过“JDBC”方式。我遇到的第一个问题是连接到数据库。看来这一切都必须是硬编码的。我有一个persistence.xml，我可以使用它轻松配置数据库连接。甚至为数据库设置驱动程序也很容易。JDBC 中也没有用于访问表实体的 get/set 方法。

我如何理解与 JDBC 相关的 JPA 和持久性？JPA 的初衷是什么？为什么有 set/get 方法？有人可以阐明这两者的本质以及没有“行话”的利弊吗？还请建议一些链接。一个简单的谷歌搜索 JPA 和 JDBC 差异让我找到了一些充满“术语”的网站，我无法理解:(

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2012-08-09T10:49:26.007

通俗地说：

*   JDBC 是数据库访问的标准
*   JPA 是 ORM 的标准

JDBC 是直接连接到数据库并针对它运行 SQL 的标准——例如`SELECT * FROM USERS`，等等。可以返回数据集，您可以在应用程序中处理这些数据集，并且您可以执行所有常见的操作，例如`INSERT`、、`DELETE`运行存储过程等。它是大多数 Java 数据库访问（包括 JPA 提供程序）背后的底层技术之一。

传统 JDBC 应用程序的一个问题是，您经常会编写一些糟糕的代码，其中会出现大量数据集和对象之间的映射，逻辑与 SQL 混合等。

JPA 是对象关系映射的标准。这是一种允许您在代码和数据库表中的对象之间进行映射的技术。这可以对开发人员“隐藏” SQL，以便他们处理的只是 Java 类，并且提供程序允许您保存它们并神奇地加载它们。大多数情况下，XML 映射文件或 getter 和 setter 上的注释可用于告诉 JPA 提供者您的对象上的哪些字段映射到数据库中的哪些字段。最著名的 JPA 提供程序是[Hibernate](https://hibernate.org/)，因此它是开始具体示例的好地方。

其他示例包括 OpenJPA、toplink 等。

在底层，Hibernate 和大多数其他 JPA 提供程序编写 SQL 并使用 JDBC 读取和写入 DB。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-08-09T10:46:06.227

JPA 和 JDBC 之间的主要区别在于抽象级别。

JDBC 是与数据库交互的低级标准。JPA 是用于相同目的的更高级别的标准。JPA 允许您在应用程序中使用对象模型，这可以让您的生活更轻松。JDBC 允许您直接对数据库执行更多操作，但需要更多注意。有些任务使用 JPA 无法有效解决，但使用 JDBC 可能会更有效地解决。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-08-09T10:52:56.230

JDBC 是比 JPA 低得多（且更早）的规范。就其本质而言，JDBC 是一种使用纯 SQL 与数据库交互的 API——发送查询和检索结果。它没有对象或层次结构的概念。使用 JDBC 时，您可以将结果集（本质上是一个或多个数据库表中的值的行/列矩阵，由 SQL 查询返回）转换为 Java 对象。

现在，要了解和使用 JDBC，您必须对 SQL 有一定的了解和工作知识。随之而来的是对什么是关系数据库、如何使用它以及表、列、键和关系等概念的深入了解。除非您至少对数据库、SQL 和数据建模有基本的了解，否则您将无法充分利用 JDBC，因为它实际上只是这些东西之上的一个薄抽象。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-08-09T10:50:02.183

JDBC 是 JPA 的前身。

JDBC 是 Java 世界和数据库世界之间的桥梁。在 JDBC 中，您需要公开 CRUD 操作所需的所有脏细节，例如表名、列名，而在 JPA（在下面使用 JDBC）中，您还需要指定数据库元数据的这些细节，但使用 Java 注释。

因此，JPA 为您创建更新查询并管理您查找或创建/更新的实体（它还可以做更多的事情）。

如果您想在没有 Java EE 容器的情况下执行 JPA，那么 Spring 及其库可以与完全相同的 Java 注释一起使用。

# permutation - 生成具有限制的随机多集排列

> ID：11881551
> 
> 赞同：3
> 
> 时间：2012-08-09T10:38:30.103
> 
> 标签：permutation, combinatorics

是否有任何已知算法如何有效地生成具有附加限制的任何随机多集排列。

示例：我有一组项目，例如：`{1,1,1,2,2,3,3,3}`和一组限制性的集合，例如 { `{3}`, `{1,2}`, `{1,2,3}`, `{1,2,3}`, `{1,2,3}`, `{1,2,3}`, `{2,3}`, `{2,3}`}。我正在寻找项目的排列，但第一个元素必须是 3，第二个元素必须是 1 或 2，等等。

一种符合限制的排列是：`{3,1,1,1,2,2,3,3}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:50:57.720

就在这里。我在[这个德国论坛上](http://matheplanet.com/index.html)提问并得到以下答案：问题可以简化为[在二分图上找到最大匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29#Maximum_matchings_in_bipartite_graphs)。为了做到这一点，为多重集中的所有元素引入顶点。这些顶点形成二分图的一侧。然后，为每个限制集引入顶点。这些顶点形成二分图的另一边。现在将每个限制集的边引入到第一侧的那些顶点，使得第一侧的顶点被“命中”当且仅当它表示包含在连接集中的元素。

您的示例的二分图如下所示： ![在此处输入图像描述](../Images/aa32a37ef0b8dd695a990f1ab536c051.png)

现在匹配以不选择两个相邻边的方式选择边。例如，第一个“1”被选择用于第二个限制“{1,2}”，那么它不能再用于任何其他限制，因为使用来自该顶点的另一条边将不再导致匹配.

如果您对此有其他问题，请随时提问。

# java - Java中聚合和组合的实现区别

> ID：11881552
> 
> 赞同：111
> 
> 时间：2012-08-09T10:38:33.363
> 
> 标签：java, relationship, aggregation, composition

我知道聚合和组合之间的概念差异。有人可以通过示例告诉我它们之间在 Java 中的实现差异吗？

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-09-14T20:13:31.000

作品

```
final class Car {

  private final Engine engine;

  Car(EngineSpecs specs) {
    engine = new Engine(specs);
  }

  void move() {
    engine.work();
  }
} 
```

聚合

```
final class Car {

  private Engine engine;

  void setEngine(Engine engine) {
    this.engine = engine;
  }

  void move() {
    if (engine != null)
      engine.work();
  }
} 
```

在组合的情况下，Engine 完全被 Car 封装。外界无法获得对 Engine 的引用。引擎与汽车一起生死存亡。通过聚合，Car 也通过 Engine 执行其功能，但 Engine 并不总是 Car 的内部部分。引擎可能会被交换，甚至完全移除。不仅如此，外界仍然可以对 Engine 有一个引用，并且不管它是否在 Car 中，都可以对其进行修改。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-09T15:26:35.440

我会使用一个很好的 UML 示例。

以一所拥有 1 到 20 个不同系且每个系有 1 到 5 位教授的大学为例。大学和它的部门之间有一个组成联系。一个系和它的教授之间有一个聚合链接。

作文只是一个强大的聚合，如果大学被摧毁，那么部门也应该被摧毁。但我们不应该杀死教授，即使他们各自的部门消失了。

在 java 中：

```
public class University {

     private List<Department> departments;

     public void destroy(){
         //it's composition, when I destroy a university I also destroy the departments. they cant live outside my university instance
         if(departments!=null)
             for(Department d : departments) d.destroy();
         departments.clean();
         departments = null;
     }
}

public class Department {

     private List<Professor> professors;
     private University university;

     Department(University univ){
         this.university = univ;
         //check here univ not null throw whatever depending on your needs
     }

     public void destroy(){
         //It's aggregation here, we just tell the professor they are fired but they can still keep living
         for(Professor p:professors)
             p.fire(this);
         professors.clean();
         professors = null;
     }
}

public class Professor {

     private String name;
     private List<Department> attachedDepartments;

     public void destroy(){

     }

     public void fire(Department d){
         attachedDepartments.remove(d);
     }
} 
```

这周围的东西。

编辑：根据要求提供一个示例

```
public class Test
{
    public static void main(String[] args)
    {
        University university = new University();
        //the department only exists in the university
        Department dep = university.createDepartment();
        // the professor exists outside the university
        Professor prof = new Professor("Raoul");
        System.out.println(university.toString());
        System.out.println(prof.toString());

        dep.assign(prof);
        System.out.println(university.toString());
        System.out.println(prof.toString());
        dep.destroy();

        System.out.println(university.toString());
        System.out.println(prof.toString());

    }

} 
```

**大学班**

```
import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;

public class University {

    private List<Department> departments = new ArrayList<>();

    public Department createDepartment() {
        final Department dep = new Department(this, "Math");
        departments.add(dep);
        return dep;
    }

    public void destroy() {
        System.out.println("Destroying university");
        //it's composition, when I destroy a university I also destroy the departments. they cant live outside my university instance
        if (departments != null)
            departments.forEach(Department::destroy);
        departments = null;
    }

    @Override
    public String toString() {
        return "University{\n" +
                "departments=\n" + departments.stream().map(Department::toString).collect(Collectors.joining("\n")) +
                "\n}";
    }
} 
```

**部门班**

```
import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;

public class Department {

    private final String name;
    private List<Professor> professors = new ArrayList<>();
    private final University university;

    public Department(University univ, String name) {
        this.university = univ;
        this.name = name;
        //check here univ not null throw whatever depending on your needs
    }

    public void assign(Professor p) {
        //maybe use a Set here
        System.out.println("Department hiring " + p.getName());
        professors.add(p);
        p.join(this);
    }

    public void fire(Professor p) {
        //maybe use a Set here
        System.out.println("Department firing " + p.getName());
        professors.remove(p);
        p.quit(this);
    }

    public void destroy() {
        //It's aggregation here, we just tell the professor they are fired but they can still keep living
        System.out.println("Destroying department");
        professors.forEach(professor -> professor.quit(this));
        professors = null;
    }

    @Override
    public String toString() {
        return professors == null
                ? "Department " + name + " doesn't exists anymore"
                : "Department " + name + "{\n" +
                "professors=" + professors.stream().map(Professor::toString).collect(Collectors.joining("\n")) +
                "\n}";
    }
} 
```

**教授班**

```
import java.util.ArrayList;
import java.util.List;

public class Professor {

    private final String name;
    private final List<Department> attachedDepartments = new ArrayList<>();

    public Professor(String name) {
        this.name = name;
    }

    public void destroy() {

    }

    public void join(Department d) {
        attachedDepartments.add(d);
    }

    public void quit(Department d) {
        attachedDepartments.remove(d);
    }

    public String getName() {
        return name;
    }

    @Override
    public String toString() {
        return "Professor " + name + " working for " + attachedDepartments.size() + " department(s)\n";
    }
} 
```

实施是有争议的，因为它取决于您需要如何处理创建、雇用删除等。与 OP 无关

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-16T03:27:24.523

一个简单的作曲程序

```
public class Person {
    private double salary;
    private String name;
    private Birthday bday;

    public Person(int y,int m,int d,String name){
        bday=new Birthday(y, m, d);
        this.name=name;
    }

    public double getSalary() {
        return salary;
    }

    public String getName() {
        return name;
    }

    public Birthday getBday() {
        return bday;
    }

    ///////////////////////////////inner class///////////////////////
    private class Birthday{
        int year,month,day;

        public Birthday(int y,int m,int d){
            year=y;
            month=m;
            day=d;
        }

        public String toString(){
           return String.format("%s-%s-%s", year,month,day);

        }
    }

    //////////////////////////////////////////////////////////////////

}
public class CompositionTst {

    public static void main(String[] args) {
        // TODO code application logic here
        Person person=new Person(2001, 11, 29, "Thilina");
        System.out.println("Name : "+person.getName());
        System.out.println("Birthday : "+person.getBday());

        //The below object cannot be created. A bithday cannot exixts without a Person 
        //Birthday bday=new Birthday(1988,11,10);

    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-04T15:13:01.013

简单来说 ：

组合和聚合都是关联。组合 -> 强 Has-A 关系 聚合 -> 弱 Has-A 关系。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-02T06:05:25.350

下面给出的网址中有一个很好的解释。

[![在此处输入图像描述](../Images/8ffa37fe797f9f5dd81cdd821cb07e2d.png)](https://i.stack.imgur.com/7xznH.jpg)

[http://www.codeproject.com/Articles/330447/Understanding-Association-Aggregation-and-Composit](http://www.codeproject.com/Articles/330447/Understanding-Association-Aggregation-and-Composit)

请检查！！！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-04T22:06:03.900

`Aggregation`首先，我们必须谈谈和`Composition`在同一页面上的实际区别。

> 聚合是关联实体可以独立于关联而存在的关联。例如，一个人可能与一个组织相关联，但他/她可能在系统中独立存在。

然而

> 组合是指其中一个关联实体与另一个关联的实体密切相关，并且如果没有另一个实体的存在就无法存在。事实上，该实体的身份总是与另一个对象的身份相关联。例如，汽车的轮子。

现在，聚合可以简单地通过将一个实体的属性保存在另一个实体中来实现，如下所示：

```
class Person {
    Organisation worksFor;
}

class Organisation {
    String name;
}

class Main {
    public static void main(String args[]) {

        //Create Person object independently
        Person p = new Person();

        //Create the Organisation independently
        Organisation o = new Organisation();
        o.name = "XYZ Corporation";

        /*
          At this point both person and organisation 
          exist without any association  
        */
        p.worksFor = o;

    }
} 
```

对于组合，必须始终使用其关联对象的身份创建依赖对象。您可以使用内部类。

```
class Car {
    class Wheel {
        Car associatedWith;
    }
}

class Main {
    public static void main() {
        //Create Car object independently
        Car car = new Car();

        //Cannot create Wheel instance independently
        //need a reference of a Car for the same.
        Car.Wheel wheel = car.new Wheel();
    }
} 
```

> 请注意，根据应用场景，相同的用例可能属于聚合/组合。例如，如果您正在为在某个组织工作的人开发应用程序，并且必须引用组织以进行注册，则“个人-组织”案例可能会成为组合。同样，如果您要维护汽车零件的库存，则 Car-Wheel 关系可以是聚合的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-01-22T10:16:19.687

## 不同之处在于任何组合都是聚合，反之亦然。

让我们设定条款。Aggregation 是 UML 标准中的一个元术语，表示组合和共享聚合，简称为*shared*。它经常被错误地命名为“聚合”。这很糟糕，因为组合也是一种聚合。据我了解，您的意思是“共享”。

进一步从 UML 标准：

> 复合 - 表示属性是复合聚合的，即复合对象负责组合对象（部分）的存在和存储。

因此，大学与大教堂协会是一个组合，因为大学不存在大教堂（恕我直言）

> 共享聚合的精确语义因应用领域和建模者而异。

即，如果您仅遵循您或其他人的某些原则，则所有其他关联都可以绘制为共享聚合。也看[这里](https://stackoverflow.com/a/21279410/715269)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-01-26T08:05:03.103

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-24T19:52:03.310

这两种类型当然都是关联，并没有真正严格地映射到这样的语言元素。不同之处在于目的、上下文以及系统的建模方式。

作为一个实际示例，比较具有相似实体的两种不同类型的系统：

*   *一个主要跟踪汽车及其所有者等*的汽车注册系统。这里我们对作为一个单独实体的引擎不感兴趣，但我们可能仍然具有与引擎相关的属性，如功率和燃料类型。*这里的引擎可能是汽车实体的**复合**部分。*

**   *一个汽车维修店管理系统*，用于管理汽车零件、维修汽车和更换零件，可能是完整的发动机。在这里，我们甚至可能储备了发动机，需要单独跟踪它们和其他部件，并且独立于汽车。这里的引擎可能是汽车实体的**聚合**部分。* 

 *你如何在你的语言中实现这一点是次要的，因为在那个级别上，可读性等事情要重要得多。*

# android - 如何在 Fragment 中创建 MapView

> ID：11881559
> 
> 赞同：2
> 
> 时间：2012-08-09T10:39:03.430
> 
> 标签：android, exception, android-fragments, android-mapview

我收到此错误：

```
android.view.InflateException: Binary XML file line #13: Error inflating class com.google.android.maps.MapView 
```

这是我的 MapView 类

```
public class MapViewActivity extends BaseFragment {
private TextView mTvTitle;
private View mView;

/*mapview members*/
private MapView mMapView;
private MapController mapController;
private LocationManager locationManager;
private MyLocationOverlay myLocationOverlay;
private static final int DEFAULT_ZOOM = 14;
private GeoUpdateHandler locationListener =  new GeoUpdateHandler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public void onResume() {
    super.onResume();
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.enableCompass();
}

@Override
public void onPause() {
    super.onPause();
    locationManager.removeUpdates(locationListener);
    myLocationOverlay.disableMyLocation();
    myLocationOverlay.disableCompass();
}

@Override
public void onDestroy() {
    super.onDestroy();
    myLocationOverlay.disableMyLocation();
    myLocationOverlay.disableCompass();
}

@SuppressWarnings("unchecked")
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    mView = inflater.inflate(R.layout.map_activity, container, false);
    mTvTitle  = (TextView) mView.findViewById(R.id.tvTitle);
    mTvTitle.setText(getResources().getString(R.string.top_tab_around));

    mMapView = (MapView) mView.findViewById(R.id.mvMapAroundMe);

    BindMap();
    return mView;
}

private void BindMap() {

    mMapView.preLoad();
    mMapView.setBuiltInZoomControls(true);
    mMapView.setSatellite(false);
    mapController = mMapView.getController();
    mapController.setZoom(14); // Zoom 1 is world view

    locationManager = (LocationManager) getActivity().getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);

    myLocationOverlay = new MyLocationOverlay(getActivity(), mMapView);
    mMapView.getOverlays().add(myLocationOverlay);

    Drawable drawable = this.getResources().getDrawable(R.drawable.pin);
    List<Overlay> mapOverlays = mMapView.getOverlays();
    MyItemizedOverlay itemizedoverlay = new MyItemizedOverlay(drawable, getActivity());
    OverlayItem oItem = new OverlayItem(GeopointFactory(33.446886, -86.057426),  "title", "title2");
    itemizedoverlay.addOverlay(oItem);
    mapOverlays.add(itemizedoverlay);
    mapOverlays.add(itemizedoverlay);

    myLocationOverlay.runOnFirstFix(new Runnable() {
        public void run() {
            animateToPlaceOnMap ( GeopointFactory(33.446886, -86.057426) );
        }
    });
}

public class GeoUpdateHandler implements LocationListener {
    @Override
    public void onLocationChanged(Location location) {
        mapController.animateTo( GeopointFactory(location.getLatitude(), location.getLongitude()));
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
}

private class MyItemizedOverlay extends ItemizedOverlay {
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    Context mContext;

    public MyItemizedOverlay(Drawable marker) {
        super(boundCenterBottom(marker));
    }

    public MyItemizedOverlay(Drawable marker, Context context) {
        super(boundCenterBottom(marker));
        mContext = context;
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        final int tempIndex = index;
        OverlayItem item = mOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());

        dialog.setPositiveButton("פרטים",new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialogInterface, int i) {

            }
        });
        dialog.show();
        return true;
    }
}

private void animateToPlaceOnMap(final GeoPoint geopoint) {
    mMapView.post(new Runnable() {
        @Override
        public void run() {
            mMapView.invalidate();
            mapController.animateTo(geopoint);
            mapController.setZoom(DEFAULT_ZOOM);
        }
    });
}

private GeoPoint GeopointFactory(double latitude, double longitude) {
    int lat = (int) (latitude * 1E6);
    int lng = (int) (longitude * 1E6);
    return new GeoPoint(lat, lng);
} 
```

}

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="il.co.toeat" android:versionCode="1" android:versionName="1.0">
<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.VIBRATE" />

<application android:label="@string/app_name" android:icon="@drawable/icon" android:name=".views.MainApplication">
    <uses-library android:name="com.google.android.maps" />

    <activity  android:name=".views.SplashActivity" android:screenOrientation="portrait" android:theme="@android:style/Theme.NoTitleBar" android:noHistory="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".views.ViewportActivity"
              android:windowSoftInputMode="adjustPan|adjustResize"
              android:label="@string/app_name"
              android:configChanges="locale"
              android:screenOrientation="portrait"
              android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T20:54:11.847

您不能使用 Google Map API 以这种方式进行操作。

从 2012 年 12 月起，您可以将 MapFragment 和 SupportMapFragment 与 Google Map API v2 一起使用，更多信息请参见：[https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

## 编辑

我想你不理解我。您不应该以您的方式将 MapView 放入 Fragment 中。

通常不会在简单的 Fragment 中使用 MapView（在新的 MapFragments 之前）。有一个允许它的黑客，你可以在这里阅读它[https://stackoverflow.com/a/8126287/1233021](https://stackoverflow.com/a/8126287/1233021) 但我认为当你不需要做任何开销时最好使用新的 MapFragments ......他们自 12 月 12 日起可用。链接在上一条消息中。

顺便说一句：有一个问题，但有其他错误[https://stackoverflow.com/a/9448871/1233021](https://stackoverflow.com/a/9448871/1233021)

# actionscript-3 - 如何使用 OpenLaszlo 5.0 将 ActionScript 3 导入语句添加到 LZX 类定义？

> ID：11881562
> 
> 赞同：1
> 
> 时间：2012-08-09T10:39:16.240
> 
> 标签：actionscript-3, flash, openlaszlo

我正在使用未发布版本的 OpenLaszlo 5.0（主干）开发 OpenLaszlo 应用程序。在我的一门课程中，我需要导入 ActionScript 3 类。添加此类导入语句的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:50:52.120

LZX 支持*直通*标签。*passthrough*标记又具有*when*属性，您可以在其中指定布尔表达式，例如 $as3 或 $swf10 ：

```
<canvas debug="true"> 

  <class name="foo"> 
    <passthrough when="$as3"> 
      import flash.system.Capabilities; 
    </passthrough> 
    <handler name="oninit"> 
      if ($as3) {
        Debug.info(Capabilities.os);
      } else {
         Debug.info("flash.system.Capabilities can only be used in the SWFx runtime");
      }
    </handler>
  </class>

  <foo />

</canvas> 
```

对于 SWFx 运行时，导入语句随后被注入到生成的 ActionScript 3 类中。

# opengl - 光栅化器没有像我希望的那样拾取 GL_LINES

> ID：11881567
> 
> 赞同：1
> 
> 时间：2012-08-09T10:39:24.893
> 
> 标签：opengl

所以我在每一帧都渲染这个图：

[https://dl.dropbox.com/u/44766482/diagramm.png](https://dl.dropbox.com/u/44766482/diagramm.png)

基本上，它每秒钟将所有内容向左移动一个像素，并且每一帧它都会用当前数据更新最右边的像素列。所以做了很多改变。

它完全由 GL_LINES 构建，始终从下到上。

然而，那些黑色缺失的列根本不是故意的，只是光栅化器没有把它们捡起来。

我使用整数作为位置，使用字节作为颜色，投影矩阵正好是 1:1；平移 1 表示移动 1 个像素。正交。

所以我的问题是，如何摆脱黑线？我想我可以将数据写入纹理，但这似乎很昂贵。目前我使用VBO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:44:26.310

将列渲染为四边形，而不是宽度为 1 像素，OpenGL 的光栅化规则将确保您以这种方式没有孔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:04:31.710

意识到问题已经结束，但您也可以通过以 0.5 为中心绘制线条来获得所需的效果。一个像素的 CENTER 为 0.5，在那里画一条线总是会被光栅化器在正确的位置拾取。

# tcl - 如何对 Tcl 中列表的所有元素执行算术运算

> ID：11881568
> 
> 赞同：1
> 
> 时间：2012-08-09T10:39:24.613
> 
> 标签：tcl

我有一个很长的值列表，我想将它们全部除以相同的数字，有没有办法在一个命令中执行此操作而不是由成员执行此操作：

```
set new_list [list ]
foreach member $list {
    lappend new_list [expr $member / 1E9]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:47:01.837

没有。并且始终保持你的表情。

```
proc map {lst expr} {
    foreach item $lst { lappend r [expr [string map {%x $item} $expr]] }
    return $r
}

map [list 2.3 4.5 6.7] {%x * %x + 0.5}
map [list ...] {%x / 1e9} 
```

如果您愿意，可能是一个解决方案 - 但没有任何内置功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:18:40.370

Tcllib 的[::struct::list](http://tcllib.sourceforge.net/doc/struct_list.html)包有一个映射功能：

```
package require struct::list
set lst {1 2 3 4 5}
set new [::struct::list mapfor x $lst {expr {$x * $x}}]
# => 1 4 9 16 25 
```

# c++ - C++ 链接到 Visual Studio 2010 中的另一个项目

> ID：11881572
> 
> 赞同：2
> 
> 时间：2012-08-09T10:39:54.097
> 
> 标签：c++, visual-studio-2010

我想链接到另一个项目中的 .cpp 和标题。我已经添加了标题并将 .lib 文件放在链接器/输入/附加依赖项中，但我得到了一个未解析的外部文件。根据我的阅读，这可能是因为 lib 是 dll 项目的一部分。我想做的只是链接到那个类的 obj，但它似乎不想让我这样做。我可以链接到同一目录中的另一个 lib 文件，所以这不是路径问题。

我可能可以将类导出为 DLL 的一部分，但我不想担心内存泄漏，因为我必须将指针传递给对象，而如果我直接链接，我不必担心它一点也不。

如果我可以链接到 lib 文件，最好的诊断方法是什么。

VS2010不会让我直接进入obj文件有什么特别的原因吗？这似乎是最简单的选择。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:23:56.920

您可以创建一个新配置，其中您链接到的项目是静态库而不是 DLL。

将项目添加为新项目的依赖项并更改配置管理器设置，使其使用静态库配置而不是 DLL 配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:01:27.680

如果要直接链接到类的 .obj 文件，则必须将类的 .cpp 文件添加到项目中。无论看起来多么容易，这并不是解决您的问题的方法，而是一种解决方法。不过，我想不出如何解决这个问题。

# html - 停止包含 div 的边框重叠的输入文本框

> ID：11881576
> 
> 赞同：0
> 
> 时间：2012-08-09T10:40:08.527
> 
> 标签：html, css

我的输入文本框与它在末尾包含 div 重叠。有没有一种方法可以在不进行精确像素宽度的情况下阻止这种情况发生，我想让它保持流畅以用于媒体查询。

小提琴[http://jsfiddle.net/5TzQK/](http://jsfiddle.net/5TzQK/)

感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:42:39.120

习惯于`box-sizing`在你的**CSS中**

```
 input.txtboxplain{
box-sizing:border-box;
-moz-box-sizing:border-box;
-webkit-box-sizing:border-box;
} 
```

**[现场演示](http://jsfiddle.net/5TzQK/1/)**

现在更多关于 box-sizing**[点击这里](http://css-tricks.com/box-sizing/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:42:42.383

您可以通过添加解决此问题

```
padding: 1px; 
```

到你的`div.sidemenubox`班级。

希望有帮助！

# ruby-on-rails - 将两个实例变量传递给 js.erb 文件？

> ID：11881582
> 
> 赞同：2
> 
> 时间：2012-08-09T10:40:54.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要将两个实例变量传递给一个 ajax 请求正在使用的 javascript 文件来更新用户显示。这是我需要做的：

```
respond_to do |format|
    if @post.save
        format.js { @post @user_vote }  # <-- right here
    else 
        format.html { redirect_to :back, :alert => 'There was an error in removing the vote' }
    end
end 
```

这是怎么做到的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T10:54:12.547

如果您使用 js.erb 文件，则无需传递实例变量。您可以直接放置 rails 标签并在 js.erb 文件中访问这些变量

例如：

在你的控制器中放

```
format.js #instead of format.js { @post @user_vote } 
```

在 js.erb 文件中，您可以访问实例变量

```
$('#ele').html("<%= @post.name %>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:53:36.440

ActionController 操作中的实例变量会自动在您的视图中可用。例如你的控制器：

```
# posts_controller.rb
def update

  # Your implementation here
  @post = ...
  @user_vote = ...

  respond_to do |format|
    if @post.save
      format.js
      format.html { redirect_to post_path(@post) }
    else
      format.js { ... }
      format.html { redirect_to :back, ... }
    end
  end
end 
```

然后在你的 update.js.erb 中：

```
# update.js.erb
console.log('Post: <%= @post.inspect %>');
console.log('User vote: <%= @user_vote %>');

# Your JS implementation here 
```

（我还注意到您在 respond_to 块中的逻辑可能会导致问题。您应该为成功和失败条件渲染 js 和 html 格式`@post.save`。）

# java - 如何使用 javax.sound.sampled 包同时播放一组频率（和弦）

> ID：11881595
> 
> 赞同：1
> 
> 时间：2012-08-09T10:41:28.903
> 
> 标签：java, audio

我正在尝试实现一个系统，在该系统中，我可以一次播放一组频率，目前可以单独播放每个频率。下面我有一个代码，一次播放一个给定的频率。

```
 import java.applet.*;
    import java.io.*;
    import java.net.*;
    import javax.sound.sampled.*;

    public final class StdAudio {

        public static final int SAMPLE_RATE = 44100;

        private static final int BYTES_PER_SAMPLE = 2;                // 16-bit audio
        private static final int BITS_PER_SAMPLE = 16;                // 16-bit audio
        private static final double MAX_16_BIT = Short.MAX_VALUE;     // 32,767
        private static final int SAMPLE_BUFFER_SIZE = 4096;

        private static SourceDataLine line;   // to play the sound
        private static byte[] buffer;         // our internal buffer
        private static int bufferSize = 0;    

        // not-instantiable
        private StdAudio() { }

        // static initializer
        static { init(); }

        // open up an audio stream
    private static void init() {
    try {
        // 44,100 samples per second, 16-bit audio, mono, signed PCM, little Endian
        AudioFormat format = new AudioFormat((float) SAMPLE_RATE, BITS_PER_SAMPLE, 1, true, false);
        DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);

        line = (SourceDataLine) AudioSystem.getLine(info);
        line.open(format, SAMPLE_BUFFER_SIZE * BYTES_PER_SAMPLE);

        buffer = new byte[SAMPLE_BUFFER_SIZE * BYTES_PER_SAMPLE/3];
    } catch (Exception e) {
        System.out.println(e.getMessage());
        System.exit(1);
    }

    // no sound gets made before this call
    line.start();
}

/**
 * Close standard audio.
 */
public static void close() {
    line.drain();
    line.stop();
}

/**
 * Write one sample (between -1.0 and +1.0) to standard audio. If the sample
 * is outside the range, it will be clipped.
 */
public static void play(double in) {

    // clip if outside [-1, +1]
    if (in < -1.0) in = -1.0;
    if (in > +1.0) in = +1.0;

    // convert to bytes
    short s = (short) (MAX_16_BIT * in);
    buffer[bufferSize++] = (byte) s;
    buffer[bufferSize++] = (byte) (s >> 8);   // little Endian

    // send to sound card if buffer is full        
    if (bufferSize >= buffer.length) {
        line.write(buffer, 0, buffer.length);
        bufferSize = 0;
    }
}

/**
 * Write an array of samples (between -1.0 and +1.0) to standard audio. If a sample
 * is outside the range, it will be clipped.
 */
public static void play(double[] input) {
    for (int i = 0; i < input.length; i++) {
        play(input[i]);
    }
}

private static double[] tone(double hz, double duration) {
    int N = (int) (StdAudio.SAMPLE_RATE * duration);
    double[] a = new double[N+1];
    for (int i = 0; i <= N; i++)
        a[i] = amplitude * Math.sin(2 * Math.PI * i * hz / StdAudio.SAMPLE_RATE);
    return a;
}

/**
 * Test client - play an A major scale to standard audio.
 */
public static void main(String[] args) {

    double hz = 440.4// 440.4 Hz for 1 sec
    double duration = 1.0;

    double[] a = tone(hz,duration);
    StdAudio.play(a);

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:56:36.217

只需将每个时间点的样本值相加，然后除以适当的比例因子即可将值保持在范围内。例如同时播放 A 440 和 C 523.25：

```
double[] a = tone(440,1.0);
double[] b = tone(523.25,1.0);
for( int i=0; i<a.length; ++ i )
   a[i] = ( a[i] + b[i] ) / 2;
StdAudio.play(a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:54:49.770

在此[示例](https://stackoverflow.com/a/2065693/230513)中，为每个`Tone`打开一个单曲，但您可以打开与和弦中的音符一样多的行。然后简单地把每个和弦换成单独的一行。您可以使用 来创建琶音效果。`SourceDataLine``Note``write()``Note``Note.REST`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:56:45.470

你可以为每个频率使用不同的线程:)

[在这里你可以找到一个java线程的小例子](http://www.karlin.mff.cuni.cz/network/prirucky/javatut/java/threads/simple.html)

我希望这可以帮助你 ：）

# javascript - 仅在按下 tab 键时调用 onBlur 事件

> ID：11881596
> 
> 赞同：1
> 
> 时间：2012-08-09T10:41:48.587
> 
> 标签：javascript, asp.net

我有一个文本框，只有在按下 tab 键以从文本框中移除焦点时，我才想在该文本框上执行 onBlur 事件。

我怎样才能通过javascript做到这一点？

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:09:22.060

在浏览器中，当控件具有焦点时按下 tab 键会将其移动到 tab 顺序中的下一个元素，导致当前元素失去焦点并调度 blur 事件。

因此，您可以测试 Tab 键的按下并基于此调用您的函数，例如

```
<script type="text/javascript">

function showKey(e) {
  return e.which || e.keyCode;
}

</script>
<form>
  <input type="text" onkeydown="this.form.msg.value = showKey(event);">
  <input type="text" name="msg">
</form> 
```

上面显示tab键的值为9，所以你可以这样做：

```
if ((e.which || e.keyCode) == 9) {
  // tab key was pressed, do stuff
} 
```

请注意，虽然大多数浏览器支持 e.which，但其他浏览器支持 e.keyCode。

### 编辑

根据您的评论，以下显示当控件失去焦点时，隐藏字段的值已设置：

```
 <input type="text" onkeydown="this.form.msg.value = showKey(event);
  (event);" onblur="alert(this.form.msg.value);"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T13:20:48.517

```
`enter code here`

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#theDiv input").bind("blur", function () {
            setTimeout(function () {
                var isOut = true;
                $("#theDiv input").each(function () {
                    if (this == document.activeElement) isOut = false;
                });
                if (isOut) {
                    // YOUR CODE HERE
                    alert("I am called");
                }
            }, 10);
        });
    });
</script>
<!-- ... -->
<div id="theDiv">
    <input type="text" value="Inside DIV 1" />
    <input type="text" value="Inside DIV 2" />
    <input type="text" value="Inside DIV 3" />
</div>
<input type="text" value="Outside DIV" /> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-09T11:33:18.823

```
<script type="text/javascript">

function callfunc() {
 alert("Hello");
}

</script>

<form>
  <input type="text" onblur="callfunc();">
</form> 
```

# php - Mouseenter Hover Div 显示/隐藏

> ID：11881597
> 
> 赞同：0
> 
> 时间：2012-08-09T10:41:51.977
> 
> 标签：php, javascript, jquery, html

我试图让我的功能没有成功。我所需要的只是能够滚动到我的 div 并显示 X，然后我可以添加我想要的效果。

我正在使用 Javascript，因为我需要它跨浏览器兼容。我不想使用 CSS，因为它在我将来想要添加的内容中非常有限。

```
<script>
$(document).ready(function() {
$('div.userinfo').hover({
    mouseenter: function() {
        $(this).children('div.delete').show();
    },
    mouseleave: function() {
        $(this).children('div.delete').hide();

    }
    });
    });
</script>
    <?
echo "<div class='userinfo'><div class='delete' style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('".$streamitem_data['streamitem_id']."');\">X</div></div>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:44:53.983

而不是 .hover()，它已被弃用并且不像你尝试使用它那样工作，使用 .on()：

```
$(function() {
    $('div.userinfo').on({
        mouseenter: function() {
            $(this).children('div.delete').show();
        },
        mouseleave: function() {
            $(this).children('div.delete').hide();

        }
    });
}); 
```

这将完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:47:21.917

使用[bind()](http://api.jquery.com/bind/)方法而不是悬停：

```
$(document).ready(function() {
   $('div.userinfo').bind({
     mouseenter: function() {
        $(this).children('div.delete').show();
     },
     mouseleave: function() {
        $(this).children('div.delete').hide();
     }
   });
}); 
```

注意：如果您稍后使用 jQuery 添加新的 dom 元素，请使用[live()](http://api.jquery.com/live/)或[on()](http://api.jquery.com/on/)，如果不是，请使用 bind 方法，这是非常可靠的方法。

# java - 用数组在java小程序中绘制条形图

> ID：11881600
> 
> 赞同：1
> 
> 时间：2012-08-09T10:41:55.517
> 
> 标签：java, arrays, swing, charts

我创建了一个在文本段落中查找单词模式的代码，它会忽略任何不是字母的东西。所以基本上文本'hello world it is a lovely day'会给出1、2、1、2、1。小程序以基本文本格式显示它，我想要的是它在条形图中显示结果。

我原则上知道如何做到这一点，我需要从我的数组中链接我的数据并让我的小程序绘制它，然后根据给定的值增加宽度（购物车将水平绘制，主底座，如果你明白我的意思，这些条从垂直开始的地方）

我的问题是，我不知道如何执行此代码，我不知道如何启动它，任何帮助将不胜感激。

这是我的代码

```
import java.util.*;
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Clarke_J_resitAss  extends Applet implements ActionListener

{
    Button pr_input1, pr_input2;
    Label pr_label;
    TextField pr_text;
    String pr_name;

    public void init()

    {
        pr_input1 = new Button("Analyze");
        pr_input2 = new Button("Reset");
        add(pr_input1);
        add(pr_input2);
        pr_input1.addActionListener(this);
        pr_input2.addActionListener(this);
        //add the buttons with action listeners
        pr_label = new Label("Word Pattern");
        add(pr_label);
        pr_text = new TextField();
        add(pr_text);
        pr_text.addActionListener(this);
        //add text field
    }    
    public void start()
    {           
        pr_name="";
            setSize(400,400);
            setBackground(Color.gray);
        pr_text.setBackground(Color.white);      
    }

    public void actionPerformed(ActionEvent e){

    pr_name = e.getActionCommand();
    repaint();
        if(e.getSource() == pr_input1)
            pr_name = pr_text.getText();
        else
            if(e.getSource() == pr_input2)
            {   pr_name = "";        
                pr_text.setText("");
                pr_label.setText("Word Pattern");
                }
         repaint();
             // The user's input from the text area.                     
            int pr_char;

            String array[]=pr_name.split(" ");
           int counter=0;
           for(int i=0;i<array.length;i++){
               int length = array[i].replaceAll("[^A-Za-z]", "").length();
               if(counter<length)
                   counter=length;}
           int intArray[]=new int[counter];
           for(int i=0;i<intArray.length;i++){
               intArray[i]=0;
           }
           for(int i=0;i<array.length;i++){
               intArray[array[i].replaceAll("[^A-Za-z]", "").length()-1]++;
           }
           String a="";
           for(int i=0;i<intArray.length;i++){
               if(intArray[i]>0)
               {
                a+=String.valueOf(intArray[i]);
                a+=", ";
               }
           }
           pr_label.setText(a);

           pr_char = pr_name.length(); 
    }

    public void paint(Graphics g)
    {

      pr_text.setSize(400, 200);
      pr_text.setLocation(0,0);
      pr_input1.setLocation(0,220);
      pr_input2.setLocation(337,220);
      pr_label.setLocation(0,270);
      pr_label.setSize(400,30);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:50:37.300

如果您需要使用 Java 绘制图表之类的东西，我建议您使用[JFreechart](http://www.jfree.org/jfreechart/)。它非常强大和灵活，可以为您节省大量时间，而不是重新实现轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:52:57.220

如果您真的想自己编写它，请尝试通读

*   [在 Swing 中执行自定义绘画](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CEgQFjAA&url=http://docs.oracle.com/javase/tutorial/uiswing/painting/&ei=ZZYjUNTnMeyciAeio4DgDw&usg=AFQjCNG5T0gGTmifJuNPweR4eq35JMpwmA&sig2=bsojrn5nOoqbA3m-1pCSAQ)
*   [2D 图形](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFEQFjAB&url=http://docs.oracle.com/javase/tutorial/2d/index.html&ei=SZYjUN-GD8yViQfsu4HgCQ&usg=AFQjCNH_wQ3HOGhdwbf95pPMeuZb4npsgQ&sig2=MV7wyAnF_tTAYevKneljVA)

# java - 如何将java引用类型映射到数据库列类型

> ID：11881603
> 
> 赞同：0
> 
> 时间：2012-08-09T10:42:06.013
> 
> 标签：java, jdbc, jpa-2.0

假设我有这样的课程

```
@Entity
public class Customer implements Serializable {
    private int id;
    private String firstName;
    private String lastName;
    private Referee referee;
    private Collection<Address> addresses;
    private Collection<Account> accounts;
    .....
} //end of class Customer

@Entity
public class Referee implements Serializable {
    private int id;
    private String name;
    private String comments;
    ....
} //end of class Referee

@Entity 
public class Account implements Serializable {
    private int id;
    private double balance;
    private String accountType;
    ...
}

@Entity
public class Address implements Serializable {
    private int id;
    private String addressLine;
    private String country;
    private String postCode;
    ...
} 
```

现在，如果我在名为 Customer 的数据库中创建表。那么我将使用什么类型作为类型`Referee`，`Collection<Address>`和`Collection<Account>`。就像我制作列 id 一样，它的类型将是`INTEGER`，字符串更改为，`VARCHAR`但我将什么类型用于收集和裁判？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:03:00.843

裁判字段在数据库中将是整数，因为它必须存储裁判类的 id 字段，它是 int 类型的。

集合也将基于类的 id。对于 1 到 N 的关系，可以使用 N 侧的列。因此，如果一个客户有多个地址，但一个地址从不属于一个以上的客户，那么您可以将客户的 id 存储在地址表中以存储关系。如果是 N 到 M，您将需要一个额外的所谓的连接表，它存储成对的客户 ID + 地址 ID。帐户的故事相同。

顺便说一句，许多 JPA 提供商可以为您生成表格，请参阅他们的手册。

如果你是 JPA 的新手，你应该得到一本关于它的好书。几个教程不会为您提供足够深入的知识来很好地使用它。我个人读过 Pro EJB 3: Java Persistence API。

在学习 JPA 时，netbeans IDE 可以提供很大的帮助，它会为您提供许多有用的提示来注释您的实体。例如，它会注意到您的集合需要额外的注释，并为您提供一对多或多对多和单向或双向的选择。

# facebook - 如何识别 Facebook 机器人？

> ID：11881609
> 
> 赞同：2
> 
> 时间：2012-08-09T10:42:25.930
> 
> 标签：facebook, validation, bots

有没有办法通过 IP 可靠地识别 Facebook 机器人？

我的网站受到自称是 facebook 的机器人的攻击，但我怎么确定呢？我正在寻找某种官方程序来验证 facebook 机器人，类似于谷歌[在此处](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=80553)为他们的机器人推荐的程序。

我可以解析`OrgName`并`whois`相信它吗？或者那会是假的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:34:44.110

为了互联网中的关键字索引，我正在回答这个问题。

事实上，识别 Facebook 机器人 (Facebook Scraper) 的最佳方法似乎是将 IP 与声明的官方 Facebook IP 范围相匹配，该范围可通过运行获得

```
whois -h whois.radb.net '!gAS32934' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T07:09:38.187

你为什么不检查一下`user-agent`，比如

```
facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php) 
```

而不是`IP`？

# drupal-7 - #states 不适用于 Profile2

> ID：11881617
> 
> 赞同：1
> 
> 时间：2012-08-09T10:42:52.073
> 
> 标签：drupal-7

我有 Profile2 创建的名为 field_apply 的复选框。然后我使用 hook_form_alter 添加一个在选中复选框时应该可见的 texfield。

```
function test_form_alter(&$form, &$form_state, $form_id) {
  if($form_id == 'user_register_form') {
    $form['profile_test']['test'] = array(
      '#type' => 'textfield',
      '#title' => 'Test text',
      '#states' => array(
        'visible' => array(
          ':input[name="field_apply"]' => array('checked' => TRUE),
        ),
      ),
    );
  }
} 
```

但是#states 不起作用。即使未选中 field_apply，文本字段仍然可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:44:38.780

**我解决了:)** #state 中的字段名称错误。只需使用 firebug，选择 field_apply 复选框，复制“name”属性的值并替换 ':input[name="field_apply"]' 中的“field_apply”... 所以在上面的示例中，#states 属性应该如下所示：

```
'visible' => array(':input[name="profile_test[field_apply][und]"]' => array('checked' => TRUE)), 
```

# facebook - 基于 iOS4 和 iOS5 版本的 Facebook 和 Twitter 集成

> ID：11881620
> 
> 赞同：1
> 
> 时间：2012-08-09T10:43:02.567
> 
> 标签：facebook, ios5, twitter, ios4, xcode4.2

我是 Facebook 和 Twitter 集成的新手。我能够将它们集成到单独的版本中，即`iOS4`和`iOS5`.

我在检查基于版本的情况时遇到了困难，需要集成 Twitter 和 Facebook 功能。

任何人都可以就此向我提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:14:40.603

iOS版本检查

```
NSArray *versionCompatibility = [[UIDevice currentDevice].systemVersion componentsSeparatedByString:@"."];

if ( 5 == [[versionCompatibility objectAtIndex:0] intValue] ) { /// iOS5 is installed

    // Put iOS-5 code here

} else { /// iOS4 is installed

    // Put iOS-4 code here         

} 
```

快乐编码:)

**编辑 1**

所以你也可以用这个找到iOS版本

```
if (NSClassFromString(@"TWTweetComposeViewController") != nil) { /// iOS5 is installed

    // Put iOS-5 code here

} else { /// iOS4 is installed

    // Put iOS-4 code here         

} 
```

或者可以查看[此类](https://stackoverflow.com/a/3339787/1132951)问题的投票最多的[答案](https://stackoverflow.com/a/3339787/1132951)

# java - 对serialVersionUID字段的FindBugs警告的理解

> ID：11881621
> 
> 赞同：5
> 
> 时间：2012-08-09T10:43:06.127
> 
> 标签：java, serialization

我有以下类签名和`ClientEventSourc`实现`Serializable`：

```
public class Grid extends ClientEventSource implements Focusable, FramingBlockWrapper,LIMSEditableField 
```

现在[FindBugs](http://findbugs.sourceforge.net/)将其列为狡猾：

**类是可序列化的，但没有定义 serialVersionUID**

> 此类实现 Serializable 接口，但未定义 serialVersionUID 字段。像添加对 .class 对象的引用这样简单的更改将为类添加合成字段，这将不幸地更改隐式 serialVersionUID（例如，添加对 String.class 的引用将生成静态字段 class$java$lang$String ）。此外，字节码编译器的不同源代码可能对为引用类对象或内部类而生成的合成变量使用不同的命名约定。要确保 Serializable 跨版本的互操作性，请考虑添加显式 serialVersionUID。

有人可以解释它的含义以及解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T10:46:26.477

serialVersionUID 用于反序列化您的类。它是默认自动生成的。
但是更改类中的任何内容都会生成不同的serialVersionUID，并且您无法反序列化“旧”对象。
所以你定义你自己的 serialVersionUID 来帮助反序列化找到正确的类。

将这样的变量添加到您的代码中：

```
private static final long serialVersionUID = 6106269076155338045L; 
```

有关生成 UID 的参考：

> [在 Java 中扩展 Serializable 类时，我为 serialVersionUID 选择什么重要吗？](https://stackoverflow.com/questions/605828/does-it-matter-what-i-choose-for-serialversionuid-when-extending-serializable-cl)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T10:47:12.987

> 有人能解释一下这是什么意思吗

对类的微小更改会更改`serialVersionUID`您不想要的内容，因为这可能会无缘无故地阻止反序列化。

> 解决此问题的最佳方法是什么？

按照它的建议设置它。

```
private static final long serialVersionUID = 1; 
```

> 有没有生成这个数字的算法/程序

是的。这是您试图绕过而不是重新创建的算法。刚开始`1`。

> 我的意思是它可以是任何东西，或者它需要遵循某些最佳实践

我建议使用`1`是最佳实践，因为它清楚地表明这是任意选择的覆盖值。使用较大的值 like`6106269076155338045L`可能看起来像一个生成的数字或选择这个数字的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:13:47.560

该值用于反序列化。其目的是维护类与其对应的序列化对象之间的兼容性。如果你序列化一个类型的对象`A`然后`A`以某种方式改变，那么这个机制会阻止你反序列化对象；对象和它的类不匹配，你会得到运行时错误。

JDK中有一个`serialver.exe`。如果你给它一个`.class`文件作为参数，它会吐出一个`serialVersionUID`. 大多数 IDE 都内置了此功能。

输入示例：

```
> serialver MyClass 
```

（已经存在一个文件`MyClass.class`，`MyClass`必须实现`Serializable`）

输出示例：

```
> MyClass: static final long serialVersionUID = -8174364448753809256L; 
```

如果你讨厌在命令行中做事，那么像这样执行程序：

```
> serialver -show 
```

将显示此 GUI：

![串行器截图](../Images/8029f3c342ee2da563248994d4e2a9ad.png)

然后，您可以输入班级名称并单击“显示”。

如果您感兴趣，我建议您阅读有关序列化过程的信息。您将确切了解为什么需要此版本 ID，生成它时考虑了哪些字段/方法等等。

# iphone - ios dev - 纵向模式不调用 shouldAutorotateToInterfaceOrientation 方法

> ID：11881627
> 
> 赞同：1
> 
> 时间：2012-08-09T10:43:38.533
> 
> 标签：iphone, ios

在我的 rootViewController 中，我重新实现了`shouldAutorotateToInterfaceOrientation`这样的方法。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    switch (toInterfaceOrientation) {
        case UIInterfaceOrientationPortrait:
            NSLog(@"Orientation - Portrait");
            break;
        case UIInterfaceOrientationLandscapeLeft:          
            NSLog(@"Orientation - Left");
            break;
        case UIInterfaceOrientationLandscapeRight:
            NSLog(@"Orientation - Right");
            break;
        case UIInterfaceOrientationPortraitUpsideDown:
            NSLog(@"Orientation - UpsideDown");
            break;
        default:
            break;
    }
    return YES;
} 
```

当我旋转我的设备时，会为 LandscapeRight、LandscapeLeft 和 UpsideDown 调用此方法，但不会为纵向方向调用此方法。

在启动时视图处于纵向模式，并且使用 UIInterfaceOrientationPortrait 调用此方法。但是，当我旋转设备时，不仅会为此方向调用此方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:04:21.267

`shouldAutorotateToInterfaceOrientation`通常只调用一次以告诉调用者应用程序将支持哪些方向（ORed 值或全部为 YES）。您可能希望`willRotateToInterfaceOrientation:duration:`在显示新方向之前检查方向和/或进行一些重新排列。

# java - 多参数搜索，java集合选择建议

> ID：11881630
> 
> 赞同：0
> 
> 时间：2012-08-09T10:43:46.700
> 
> 标签：java, android, collections, generic-collections

在下面描述的情况下我应该使用什么数据结构：

我有一个简单的豆子：

```
 public class Points { 

    private String name; 
    private String address; 
    private int phone; 
    private int coord1; 
    private int coord2; 

    //getters+setters 

    } 
```

我想创建几个bean并将它们存储在某种数据结构中。并且能够使用两个参数进行搜索 - 名称和地址。

例如，用户输入“7” - 它会返回几个对象，哪个名称或地址包含该字符？

我应该使用什么数据结构以及如何搜索它？

如果它很重要，我实际上需要将它实现到我的 android 应用程序中——我想在地图上搜索我的点此外，到目前为止我不想创建一个数据库，因为它们只有 20 个。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:48:05.353

**[特里](http://en.wikipedia.org/wiki/Trie)**似乎很合适。查找所有带有特定前缀的字符串是一种高效的数据结构。

如果您想改用现有的 java 集合之一，您可以使用[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)及其[`floor()`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#floor%28E%29)方法来获取所需前缀之前的元素 - 然后在它仍然匹配时开始迭代集合。

**如果您正在寻找 substring 搜索**，而不仅仅是前缀 - 您可能希望使用**[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)**。
使用 java 现有容器的一种（低效）替代方案 - 将键的所有子字符串存储在 a[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)或 a[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)中，但它需要二次空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:41:49.847

试试java 的集合，例如hashmap。虽然我在 PC 上运行了这个，10000 个项目，搜索返回 3440 个结果，它花了 76 毫秒。

```
 class Points {

        String name;
        String address;
        int phone;
        int coord1;
        int coord2;

        // getters+setters
    };

    class PointsIdentifier {

        private String name;
        private String address;

        public PointsIdentifier(String name, String address) {
            this.name = name;
            this.address = address;

        }

        public boolean contains(String seq) {
            return name.contains(seq) || address.contains(seq);
        }

        @Override
        public boolean equals(Object obj) {
            Points other = (Points) obj;
            return name.equals(other.name) && address.equals(other.address);
        }

        @Override
        public int hashCode() {
            return name.hashCode() + address.hashCode();
        }
    };

    class PointsCollection {
        private Map<PointsIdentifier, Points> map;

        public PointsCollection() {
            map = new HashMap<PointsIdentifier, Points>();
        }

        public void add(Points p) {
            map.put(new PointsIdentifier(p.name, p.address), p);
        }

        public List<Points> findIdsContaining(String seq) {
            List<Points> resultList = new ArrayList<Points>();
            for (Entry<PointsIdentifier, Points> entry : map.entrySet()) {
                if (entry.getKey().contains(seq)) {
                    resultList.add(entry.getValue());
                }
            }
            // optionally cache result
            return resultList;
        }
    }

    public class Question_11881630 {

        public static void main(String[] args) {
            PointsCollection places = createCollection(10000);
            System.out.println("Collection created");
        String seq = "1";

        System.out.format("Searching for: \"%s\"\n", seq);
        List<Points> verifySearch = verifySearch(places, seq);
        //show(verifySearch);
    }

    private static void show(List<Points> verifySearch) {
        int i = 1;
        for (Points p : verifySearch) {
            System.out.println(i + ": " + p.name + ", " + p.address);
            i++;
        }
    }

    private static List<Points> verifySearch(PointsCollection places, String seq) {
        long start = System.currentTimeMillis();
        List<Points> searchResult = places.findIdsContaining(seq);
        System.out.println("Search results: " + searchResult.size());
        long end = System.currentTimeMillis();
        System.out.println("Operation time: " + formatTime(end - start));
        return searchResult;
    }

    private static String formatTime(long elapsed) {
        return elapsed + " miliseconds";
    }

    private static PointsCollection createCollection(int number) {
        PointsCollection coll = new PointsCollection();
        while (number > 0) {
            coll.add(createSamplePoint(number));
            number--;
        }
        return coll;
    }

    private static Points createSamplePoint(int number) {
        Points p = new Points();
        p.name = "VeryVeryLongName: " + number;
        p.address = "VeryVeryLongLongAddress: " + number;
            p.coord1 = 123;
            p.coord2 = 456;
            return p;
        }
    } 
```

# iphone - CorePlot 是否支持图表的缩放和平移？

> ID：11881631
> 
> 赞同：0
> 
> 时间：2012-08-09T10:43:47.490
> 
> 标签：iphone, ios, charts, core-plot

我们正在使用 Coreplot 在我们的 IOS 应用程序中绘制图表，但是我们不能使图表支持缩放或平移。我们仍在模拟器上运行应用程序，但尚未安装在真实设备上，因为我们正在等待 Apple 的开发者 ID。有谁知道 Coreplot 是否支持这些功能？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:54:19.950

简短回答：**是**的，Core Plot 支持缩放和平移。

您必须将`allowsUserInteraction`绘图空间的布尔值设置为`YES`.

有关更多信息，请参阅[此链接](http://florent.clairambault.fr/downloads/iPhone/core-plot-doc/interface_c_p_plot_space.html#a6c8fcf5db07950c3e84304180e9cd9d6)。

此外，如果您想在模拟器中测试缩放，您可以通过按下*alt*按钮并用鼠标单击并拖动来完成此操作。平移只是正常的单击+拖动。

# asp.net - 如何从 VB.Net 中的日期中删除 00:00:00？

> ID：11881632
> 
> 赞同：2
> 
> 时间：2012-08-09T10:43:54.197
> 
> 标签：asp.net, vb.net, date, datetime, formatdatetime

我有一个数据表（由数据库使用数据适配器返回），其中包含出生日期结束时的`DateOfBirth`字段。`00:00:00`我想删除那些 00:00:00 所以我写了一个函数，但它没有完成这项工作，我不知道为什么。任何人都可以向我建议如何`00:00:00`从`DateOfBirth`. 我没有数据库或存储过程的权限。

```
 Dim DOB As New DateTime
    Dim newDob As String = ""

        For Each x In dt.Rows

            If x("DateOfBirth") <> String.Empty AndAlso IsDate(x("DateOfBirth")) Then

                DOB = CDate(x("DateOfBirth"))
                newDob = DOB.ToString("dd/MM/yyyy")
                x("DateOfBirth") = newDob

            End If
        Next 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T10:50:01.090

您不能`00:00:00`从日期**值**中删除，只能从日期**字符串**中删除。您可以在显示日期字符串时删除它`ToString("dd/MM/yyyy")`，但`x("DateOfBirth")`它是一个日期值（如您的 if 语句中所写），它测量 1970 年 1 月 1 日的滴答声（10 pow -7 秒）（sql `datetime`) 或 1/1/0001 (sql`datetime2`或 c# `DateTime`)。日期值没有任何字符串表示，仅当您将其转换为字符串时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:50:41.853

实际上，您的`DateTime`条目`datarow`是一团二进制数据。这`00:00:00`只是它的字符串表示。您正在做的是`21/1/1978`输入日期字段，但就计算机而言，这与日期相同，`21/1/1978 00:00:00`因此您所做的没有任何效果。

您应该做的是在将日期输出到字符串时调整日期的显示，无论您在哪里查看它。在那里，您可以使用`.ToString("dd/MM/yyyy")`来根据需要对其进行格式化。

# php - implode() 以什么顺序连接元素值

> ID：11881633
> 
> 赞同：1
> 
> 时间：2012-08-09T10:43:55.717
> 
> 标签：php, implode

我想知道 implode() 连接元素值的顺序是什么。我希望它是根据关键值做到的，但它似乎没有做到这一点。是否有其他功能可以让您做到这一点？

所以如果我有：

```
$test_arr = array(2 => 'there', 1 => 'Hi ', 3 => '!'); 
```

做

```
$stringy = implode($test_arr); 
```

变量 $stringy 将包含字符串：'Hi there!'？

当我用 implode 尝试它时，我得到了“thereHi！”，所以我猜测数组如何跟踪我定义元素的顺序，然后 implode 使用该信息加入？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T10:46:34.147

`implode()`只需加入数组中定义的项目。

要做你想做的事，你需要先排序：

```
$test_arr = array(2 => 'there', 1 => 'Hi ', 3 => '!');
ksort($test_arr, SORT_NUMERIC);

$stringy = implode($test_arr); 
```

# javascript - 如果我在 jquery mobile 中使用“onclick”，按钮不会改变颜色

> ID：11881634
> 
> 赞同：0
> 
> 时间：2012-08-09T10:43:57.623
> 
> 标签：javascript, jquery, css, jquery-mobile

这是演示小提琴[http://jsfiddle.net/coderslay/76Whv/](http://jsfiddle.net/coderslay/76Whv/)

问题是，如果我这样做

```
<a href="#page2" data-role="button">Button2</a> 
```

然后按钮改变颜色，一切都很好

但是假设如果我尝试像这样使用 onclick

```
<a href="#" onclick="changetoPage2()" data-role="button">Button1</a> 
```

然后按钮不会改变颜色。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:50:45.793

尝试使用这个：

```
function changetoPage2(){
  $.mobile.changePage($("#page2"), {transition : "none"});
} 
```

而不是这个：

```
function changetoPage2(){
  $.mobile.changePage("#page2", {transition : "none"});
} 
```

演示：http: [//jsfiddle.net/76Whv/3/](http://jsfiddle.net/76Whv/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:21:05.893

我已经解决了你的问题，当你点击它时，“按钮”总是会变成蓝色。您的功能`function changetoPage2(){`是按钮不显示蓝色的原因。

**看到这个小提琴[http://jsfiddle.net/76Whv/7/](http://jsfiddle.net/76Whv/7/)**

```
<body>
<script>
    function changetoPage2(){
   $.mobile.changePage("#page2", {transition : "none"});
}
</script>

<div data-role="page" id="page1">
    <div data-role="header">
        <h3>Page1</h3>
    </div>
    <div data-role="content">
        <a href="#page2" data-role="button">Button1</a>
        <a href="#page2" onclick="changetoPage2()" data-role="button">Autton1</a>
    </div>
</div>

<div data-role="page" id="page2">
    <div data-role="header">
        <h3>Page2</h3>
    </div>
    <div data-role="content">
       <a href="#page1" data-role="button">Button2</a>
       <a href="#page1" onclick="changetoPage1()" data-role="button">Autton2</a>
    </div>

</div>
</body>​ 
```

# jquery-mobile - jQuery mobile 1.1.0：奇怪的“pagebeforechange”行为

> ID：11881635
> 
> 赞同：1
> 
> 时间：2012-08-09T10:44:11.697
> 
> 标签：jquery-mobile

我有一个带有“ `divs`”的大 HTML 页面，它们被认为是“页面”，并且我正在这些“ `divs`”之间进行交换。

我添加了这段代码：

```
$(document).bind('pagebeforechange', function(e, data) {
    if ( typeof data.toPage === "string" ) {
        console.log(data.toPage);
    }
} 
```

这是控制台日志：

```
#page-main
http://ba.m.p.fr/#page-panier
http://ba.m.p.fr/#page-horaires
http://ba.m.p.fr/#page-horaires&ui-page=1-5
http://ba.m.p.fr/#page-horaire-valider 
```

所以，有时它只是`id`有时它是整个 URL。怎么会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:07:10.487

我已经做了一个解决方法，这不是解释。我的旧代码是这样的：

```
$(document).bind('pagebeforechange', function(e, data) {
    if ( typeof data.toPage === "string" ) {
        if (data.toPage == "page-aa" ) {
            /* code for page-aa */
        } else if (data.toPage === "page-bb" ) {
            /* code for page-bb */
        } else if (data.toPage === "page-cc" ) {
            /* code for page-cc */
        }
    }
} 
```

现在我的新代码是这样的：我依靠' `pagebeforeshow`'：

```
$("div#page-aa").on('pagebeforeshow', function(e, data) {
    /* code for page-aa */
});
$("div#page-bb").on('pagebeforeshow', function(e, data) {
    /* code for page-bb */
});
$("div#page-cc").on('pagebeforeshow', function(e, data) {
    /* code for page-cc */
}); 
```

它完美无缺。但这是一种解决方法，而不是对我的问题的解释。无论如何，如果有人搜索该问题并阅读我的问题，也许这种解决方法会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:15:41.570

toPage 可以是包含要转换到的页面的 jQuery 集合对象，也可以是要加载/转换到的页面的 URL 引用。

```
// We only want to handle changePage() calls where the caller is
// asking us to load a page by URL.
if ( typeof data.toPage === "string" ) ... 
```

[http://jquerymobile.com/demos/1.1.1/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.1.1/docs/pages/page-dynamic.html)

# php - 数组中的重复区域

> ID：11881638
> 
> 赞同：0
> 
> 时间：2012-08-09T10:44:16.373
> 
> 标签：php, mysql, jquery-ui

这看起来很简单，但我遇到了问题。我正在使用 jquery ui 构建一个自动完成下拉框。它适用于静态信息，但是当我尝试将来自 mysql 的动态数据放入数组时，它吓坏了。

解析错误：语法错误，意外的 T_DO，在第 46 行需要 ')'

第 46 行是数组中的 do

```
$items = array(do {    
    $row_Recordset1['ARTIST'];
} while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ); 
```

我已经搜索了网络，但我找不到与数组中的问题有关的任何内容。

对不起，如果这真的很愚蠢，但我似乎无法让它工作

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:46:45.203

您不能在数组语句中执行代码。请阅读[数组](http://il.php.net/manual/en/function.array.php)方法的手册。它除了值，而不是代码。

您应该初始化您的数组，然后使用您的 do/while 循环来填充数据。

```
$items = array();

do{
    $items[] = $row['artist'];
}while('condition'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:53:37.937

您的代码应该如下所示，甚至不应该使用`do ... while`循环。

```
while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)) {
   $items[] = $row_Recordset1 ['ARTIST'];
} 
```

# android - 定期从视频文件中检索缩略图

> ID：11881641
> 
> 赞同：2
> 
> 时间：2012-08-09T10:44:17.093
> 
> 标签：android, android-mediaplayer, android-video-player

我正在尝试从视频文件中提取缩略图图像，用例是我想要每隔一秒的视频使用位图图像，我尝试使用 MediaMetadataRetriever，但问题是它返回相同的帧，无论时间是什么.

这是我尝试过的代码

```
MediaMetadataRetriever retriever = new MediaMetadataRetriever(); 
            retriever.setDataSource(PATH); 
             for(int i = 0; i< 10 ;i++) {

                Bitmap bmp = retriever.getFrameAtTime(i * 1000, MediaMetadataRetriever.OPTION_CLOSEST);
                imgList.add(bmp);
                System.out.println(imgList.size());

            } 
```

是否有任何其他可行的解决方案来定期获取帧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:02:33.380

MediaMetadataRetriever 的时间以微秒为单位指定。

要在 2 秒内获得帧，您必须调用：

```
Bitmap bmp = retriever.getFrameAtTime(2 * 1000000, MediaMetadataRetriever.OPTION_CLOSEST); 
```

我发现无论这个非常精确的时间戳如何，MediaMetadataRetriever 都会在一秒钟内返回相同的帧，但是根据您的要求，它应该可以工作。

# css - PrimeFaces SelectOneMenu 组件上的样式属性被忽略

> ID：11881645
> 
> 赞同：0
> 
> 时间：2012-08-09T10:44:28.380
> 
> 标签：css, jsf, primefaces

我正在使用 PrimeFaces 3.2，如果我向标签添加样式属性，

```
<p:selectOneMenu style="width: 100%;"> 
```

它被忽略并且呈现的元素样式包含（我猜基于列表的最长选项）计算的宽度样式属性。

即使使用 PrimeFaces 的 CSS 皮肤（*.ui-selectonemenu*和*.ui-selectonemenu-label*）也不起作用 - 它会被元素样式覆盖。

这里描述的方法也不适用：[Apply CSS to <f:selectItem> nested in <h:selectOneMenu>](https://stackoverflow.com/questions/6747311/how-can-i-apply-css-to-a-jsf-fselectitem-tag)

也许这与这个错误有关：[http ://code.google.com/p/primefaces/issues/detail?id=4196&q=style&colspec=ID%20Stars%20Type%20Status%20Priority%20TargetVersion%20Reporter%20Owner%20Summary](http://code.google.com/p/primefaces/issues/detail?id=4196&q=style&colspec=ID%20Stars%20Type%20Status%20Priority%20TargetVersion%20Reporter%20Owner%20Summary)

有没有人遇到过同样的问题或者可能有一些解决方法？

最好的问候， 黑尔格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:57:21.707

我在 PrimeFaces 3.2 上重现了这个问题，但在 PrimeFaces 3.3.1 上没有重现，那么我的猜测是他们修复了它。

很可能和[这个问题](http://code.google.com/p/primefaces/issues/detail?id=3885)有关，虽然Cagatay说它不适用于3.2，但我刚才复制了它。

我的建议是让您更新您的 PrimeFaces 版本。

# z-index - 如何使用 z-index 在绝对位置元素后面获取固定位置元素？

> ID：11881651
> 
> 赞同：1
> 
> 时间：2012-08-09T10:44:58.257
> 
> 标签：z-index

```
<div id="bus"><img src="assets/img/bus.png" id="bus_inner"/></div>
<div id="parallax">
    <div id="bgsun" class="depth-1"></div> 
    <div id="bg" class="depth-1"></div>
    <div id="bag" class="depth-1"><img src="assets/img/bag.png" /></div>
</div>

#parallax { background: #5b3516; width: 17000px; height: 100%; position: relative; }

#bgsun { position: absolute; width: 17000px; top: 0; height: 100%; background: url("../img/bg_sun.jpg") no-repeat; z-index: 10; }

#bg.depth-1 { position: absolute; width: 17000px; top: 0; height: 100%; background: url("../img/bg.jpg") no-repeat; z-index: 20; }

#bus { position: fixed; top: 495px; left: 90px; z-index: 30; }

#bus_inner { position: absolute; top: 0; left: 0; z-index: 40; }

#bag {
    position: absolute;
    top: 55px;
    left: 7320px;
    z-index: 50;
}

#bag img {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 60;
} 
```

试图将公共汽车元素放在包后面，但没有运气。固定位置不适用于 z-index 对吗？我如何将这些元素分层，所以顺序是

bgsun bg 巴士包

与他们在页面中的顺序有关吗？

# asp.net - URL 重写规则在 Visual Studio 开发服务器中不起作用

> ID：11881655
> 
> 赞同：4
> 
> 时间：2012-08-09T10:45:25.117
> 
> 标签：asp.net, visual-studio-2010, url-rewriting

如何对在我的 Visual Studio 2010 开发环境中不起作用的 url 重写规则进行故障排除？

我正在增强现有的 ASP.NET 应用程序。

我的问题是用 web.config 编写的 URL 重写规则在我的 Visual Studio 2010 开发环境中不起作用。它仅在将项目部署到 IIS 后才有效。

我需要调试该项目，因为我不熟悉它的设计和开发方式。这是一个太大的项目。

如果重写在 Visual Studio 开发服务器中不起作用，是否有解决方法？我真的需要在调试模式下处理项目。每次将我带到自定义错误页面时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:37:43.937

您始终可以调试到本地 IIS。有3种方法：

*   如果您的项目配置为部署到本地 IIS Web 服务器，您应该能够无缝地执行此操作 - 只需按 F5。它应该部署然后附加。
*   部署后，浏览到本地站点，然后使用“调试、附加到进程、w3wp.exe”附加到正在运行的站点。
*   添加`System.Diagnostics.Debugger.Break()`到要中断代码的行，部署到 IIS，然后运行。命中该行时应出现“开始调试”对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:46:35.757

URL 重写在 Visual Studio 使用的内置 Web 服务器上不起作用。好消息是您完全可以使用本地安装的 IIS 轻松调试该站点。有关如何执行此操作的详细信息，请参阅以下博客条目：

[http://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx](http://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx)

我强烈建议采用 Scott 推荐的 IIS Express 路线（快速的网络搜索将带您进入下载页面）。我尝试将 VS 设置为使用我的本地 IIS 7 并为此苦苦挣扎。当我尝试 IIS Express 路由时，我可以在几分钟内启动并运行 URL 重写，在我的开发环境中运行良好 - 无需手动附加到任何东西。安装 IIS Express 后，我只需要进入站点属性->“Web”选项卡->“服务器”标题->选择“使用本地 IIS Web 服务器”并选中“使用 IIS Express”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:35:22.647

如果您在本地计算机上创建 IIS 网站，那么重写应该可以工作。如果您没有安装 IIS，我认为您可以使用 MS Web 平台安装程序下载它。

我不确定调试器是否能在这种情况下工作，但至少您不必部署到远程机器来测试您的更改。

# amazon-ec2 - Cassandra Amazon EC2，读取性能实验

> ID：11881658
> 
> 赞同：6
> 
> 时间：2012-08-09T10:45:27.723
> 
> 标签：amazon-ec2, cassandra, iowait

我需要一些帮助来提高 Cassandra 的读取性能。我担心随着列族大小的增加读取性能会下降。我们在单节点 Cassandra 上有以下统计数据。

**操作系统：** Linux - CentOS release 5.4 (Final)
**Cassandra 版本：** apache-cassandra-1.1.0
**Java 版本：** “1.6.0_14” Java(TM) SE Runtime Environment (build 1.6.0_14-b08) Java HotSpot(TM) 64 -Bit Server VM（内部版本 14.0-b16，混合模式）

**卡桑德拉配置：**（cassandra.yaml）

*   rpc_server_type：hsha
*   disk_access_mode：mmap
*   并发读取：64
*   并发写入：32

**平台：** Amazon-ec2/Rightscale m1.Xlarge 实例，带有 4 个带有 raid0 的临时磁盘。（15 GB 总内存，4 个虚拟内核，2 个 ECU，总 ECU = 8）

* * *

**实验配置：** 我曾尝试用 GC 做一些实验

Cassandra 配置：
10 GB RAM 分配给 Cassandra 堆，3500MB 是堆新大小。

JVM 配置：
JVM_OPTS="$JVM_OPTS -XX:+UseParNewGC"
JVM_OPTS="$JVM_OPTS -XX:+UseConcMarkSweepGC"
JVM_OPTS="$JVM_OPTS -XX:+CMSParallelRemarkEnabled"
JVM_OPTS="$JVM_OPTS -XX:SurvivorRatio=1000"
JVM_OPTS= "$JVM_OPTS -XX:MaxTenuringThreshold=0"
JVM_OPTS="$JVM_OPTS -XX:CMSInitiatingOccupancyFraction=40"
JVM_OPTS="$JVM_OPTS -XX:+UseCMSInitiatingOccupancyOnly -XX:+UseCompressedOops"

* * *

**OpsCenter 社区 2.0 的结果统计信息：**

每秒读取请求 208 到 240 次
写入请求 每秒 18 到 28 次
操作系统负载 24.5 到 25.85
写入请求延迟 127 到 160
微秒 读取请求延迟 82202 到 94612 微秒
操作系统发送的网络流量 44646 KB 平均每秒
OS 接收的网络流量 4338 KB 平均每第二个
OS 磁盘队列大小 13 到 15 个请求
读取请求待处理 25 到 32

操作系统磁盘延迟 48 到 56 毫秒
操作系统磁盘读取吞吐量 4.6 Mb/秒
磁盘 IOP 读取 420/秒

IOWait 80 % CPU 平均

空闲 13 % CPU 平均

行缓存被禁用。

* * *

 **列族 我仅从中读取的列**族之一是通过 CLI 创建的**

```
create column family XColFam 
with column_type='Standard'  
and  comparator = CompositeType(BytesType,IntegerType)';" 
```

列族 SSTable 大小 = 7.10 GB，SSTable 计数 = 2

`XColFam`列族有59499904号。估计的行键（大多数是具有不同长度的 utf8 文字，通过 mx4jtools 估计），其列本质上很薄，值为 0 字节......现在。

大多数行应该有非常少的列数，可能是 1 到 10，因此列名的第一个组件大约有 20 到 30 个字节，第二个是 8 个字节的整数....复合列的第二个组件是动态的可以重复但概率很低.......第一个组件在品种中重复，但行中的列数可能不同。

我试图`SnappyCompression`压缩列族，但大小没有变化。

我有一个计划的服务，它使用 20 个线程运行几个小时，并对这个列族的多个键（现在每个请求有 2 个键）发出随机读取请求，并读取整行，没有列切片等。

我认为它现在表现不佳，因为它每分钟处理的请求太少。当列族大小不是那么大时，它之前工作得更好。它大约是 3 到 4 GB。

我担心随着列族大小的增加，读取性能下降得太快。

我还尝试调整一些 GC 和内存的东西，因为在那之前我有很多 GC 和 CPU 使用率。当数据量较小且波形中的iowait非常小时。

* * *

如何提高 Cassandra 的性能。您的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T15:38:25.337

简短的回答：行缓存和键缓存。

如果您的数据包含像大多数系统一样经常读取的子集，请尝试使用行缓存和键缓存。

行缓存是内存中的缓存，它将经常读取的行完全存储在内存中。请记住，如果您的数据分散，这可能不会产生预期的效果。

键缓存通常更适合，因为它仅将分区键及其偏移量存储在磁盘上。这通常有助于跳过 Cassandra 的查找（无需使用分区索引和分区摘要）。

尝试使用键空间和表启用键缓存并检查您的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T10:32:24.070

看 cassandra 是相对 I/O 依赖的。EC 实例在设计上具有“不足”的 I/O（Xen 虚拟化）我的第一个建议是在您可以控制的真实硬件上使用 Cassandra。例如，您可以将 SSD 磁盘用于 CommitLog。查看[Cassandra 硬件建议](http://wiki.apache.org/cassandra/CassandraHardware)。

但是，切换到自己的硬件有点激进。留在亚马逊试试[EBS](http://aws.amazon.com/en/ebs/)

> Amazon Elastic Block Store (EBS) 提供用于 Amazon EC2 实例的块级存储卷。Amazon EBS 卷是网络连接的，并且独立于实例的生命周期而存在。Amazon EBS 提供高度可用、高度可靠、可预测的存储卷，可以附加到正在运行的 Amazon EC2 实例并作为实例中的设备公开。**Amazon EBS 特别适合需要数据库、文件系统或访问原始块级存储的应用程序。**

Amazon EBS 允许您创建 1 GB 到 1 TB 的存储卷，这些存储卷可由 Amazon EC2 实例安装为设备。可以将多个卷安装到同一个实例。如果需要，Amazon EBS 使您可以通过选择预置 IOPS 卷预置特定级别的 I/O 性能。这使您能够以可预测的方式扩展到每个 Amazon EC2 实例的数千 IOPS。

另请查看[EC2 上的 Cassandra 性能测试](http://www.hulen.com/post/22803493165/cassandra-performance-testing-on-ec2)**

# jython - WLST 与 Jython Weblogic 10.3.3

> ID：11881659
> 
> 赞同：3
> 
> 时间：2012-08-09T10:45:38.483
> 
> 标签：jython, weblogic-10.x, wlst

我有几个关于 WLST 和 Jython 的问题：

操作系统：Unix/Linux

情况：
1）无法包含自动使用`wlst-file`创建的 2）使用不缓存消息 `writeIniFile`
`org.python.util.jython`

信息：
1)在交互式会话中`wlst.py`使用生成 2) 使用显示消息启动 jython时 3) 常用模块的位置未知。因为这是`writeIniFile``java weblogic.WLST`
`java org.python.util.jython``sys-package-mgr: can't create package cache dir, '/opt/oracle/fmw/fmw11gR1PS2/wlserver_10.3/server/lib/weblogic.jar/cachedir/packages'`
`weblogic.WLST``<WL-Home>/wlserver_10.3/common/wlst/modules`

问题：
1) 包含的 jython 的公共模块应该放在哪里？
2）如何更改jython缓存位置？
3) 是否可以更新到另一个 jython 版本？

欢迎任何和所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:02:15.423

是的，您可以使用另一个 jython，但它不受支持，并且您必须忍受一些 deffects。我们使用 jython 2.7a2。

这是我们用来启动 jyton 的脚本。它将更改缓存位置并将 FKUTILS 目录添加到类路径（这是我们存储自己的模块的地方）

```
#!env sh
# Script to run jython with wlst as a module
# set up WL_HOME, the root directory of your WebLogic installation
WL_HOME="/produkter/oracle/weblogic/wlserver"
WLST_OFFLINE_LOG=/tmp/wlstblaj.$$.log
WLST_CACHEDIR=~/.jythoncachedir
FKUTILS="/program/fkuitls/"
JYTHON="/program/jython"

killed () {
   echo ""
   echo Cleaning up tempfile: $WLST_OFFLINE_LOG
   rm -rf $WLST_OFFLINE_LOG
   trap - 0
}

umask 027
touch $WLST_OFFLINE_LOG
chmod 777 $WLST_OFFLINE_LOG
if [ ! -d $WLST_CACHEDIR ] ; then
    mdkir -p $WLST_CACHEDIR
fi

trap killed 0 1 2 15
# set up common environment
. "${WL_HOME}/server/bin/setWLSEnv.sh" 2>&1 > /dev/null

CLASSPATH="${CLASSPATH}${CLASSPATHSEP}${FMWLAUNCH_CLASSPATH}${CLASSPATHSEP}${DERBY_CLASSPATH}${CLASSPATHSEP}${DERBY_TOOLS}${CLASSPATHSEP}${POINTBASE_CLASSPATH}${CLASSPATHSEP}${POINTBASE_TOOLS}:${FKUTILS}"

#echo CLASSPATH=${CLASSPATH}

JVM_ARGS="-classpath ${JYTHON}/jython.jar:${CLASSPATH}  -Dpython.path=${CLASSPATH}:${HOME} ${WLST_PROPERTIES} ${JVM_D64} ${MEM_ARGS} ${CONFIG_JVM_ARGS} -Dpython.cachedir=$WLST_CACHEDIR -Dwlst.offline.log=$WLST_OFFLINE_LOG -Dweblogic.management.confirmKeyfileCreation=true -Djava.security.egd=file:///dev/urandom"

eval '"${JAVA_HOME}/bin/java"' ${JVM_ARGS} org.python.util.jython '"$@"' 
```

作为一种解决方法，您必须从 writeInitfile 修改 wlst 文件，（您可能仍然会得到一个堆栈跟踪，但它会起作用）

```
from weblogic.management.scripting.utils import WLSTUtil
import sys

origPrompt = sys.ps1
# Workaround start..    
try:
    theInterpreter = WLSTUtil.ensureInterpreter()
except:
    pass

theInterpreter = WLSTUtil.ensureInterpreter()

# End workaround.

WLSTUtil.ensureWLCtx(theInterpreter)
execfile(WLSTUtil.getWLSTScriptPath())
execfile(WLSTUtil.getOfflineWLSTScriptPath())
exec(WLSTUtil.getOfflineWLSTScriptForModule())
execfile(WLSTUtil.getWLSTCommonModulePath())
theInterpreter = None
sys.ps1 = origPrompt
modules = WLSTUtil.getWLSTModules()
for mods in modules:
  execfile(mods.getAbsolutePath())
wlstPrompt = "false" 
```

之后，您可以启动 jython 第一个脚本，然后导入您的 wlst 文件。

前任：

```
 Jython 2.7a2 (default:9c148a201233, May 24 2012, 15:49:00) [Java
 HotSpot(TM) 64-Bit Server VM (Sun Microsystems Inc.)] on java1.6.0_34
 Type "help", "copyright", "credits" or "license" for more information.
 >>> import fkwl as wl
 >>> wl.connect('user','password','t3://server') 
 Connecting to t3://server with userid user ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T06:53:48.970

1) 包含的 jython 的公共模块应该放在哪里？你可以放置通用模块，我没有测试过，但如果它在类路径中，它必须为 jython 选择新包。

2）如何更改jython缓存位置？临时目录必须可供所有用户访问。检查对 /var/ 或 /tmp 施加的权限，其中 WLSTTemp 文件夹使包缓存以供参考 [缓存问题修复](http://wlstbyexamples.blogspot.in/2010/09/wlst-issues.html#.UCQBPLQe6So)

3) 是否可以更新到另一个 jython 版本？它可以使用 jython 进行扩展，WLST 包括 jython.jar。要使用所有其他 jython 模块，您应该安装 jython 并将 sys.path 指向 jython 安装目录。[讨论线程](https://stackoverflow.com/questions/471000/jython-and-python-modules)中提供了提示

# r - 为什么matrix()和array()返回的对象的类和模式是一样的？

> ID：11881662
> 
> 赞同：0
> 
> 时间：2012-08-09T10:45:41.747
> 
> 标签：r, class

下面是我的大数据文件的前几行：

```
Symbol|Security Name|Market Category|Test Issue|Financial Status|Round Lot Size
AAC|Australia Acquisition Corp. - Ordinary Shares|S|N|D|100
AACC|Asset Acceptance Capital Corp. - Common Stock|Q|N|N|100
AACOU|Australia Acquisition Corp. - Unit|S|N|N|100
AACOW|Australia Acquisition Corp. - Warrant|S|N|N|100
AAIT|iShares MSCI All Country Asia Information Technology Index Fund|G|N|N|100
AAME|Atlantic American Corporation - Common Stock|G|N|N|100 
```

我在以下位置读取数据：

```
data <- read.table("nasdaqlisted.txt", sep="|", quote='', header=TRUE, as.is=TRUE) 
```

并构造一个数组和一个矩阵：

```
d1 <- array(data, dim=c(nrow(data), ncol(data))) 
d2 <- matrix(data, nrow=nrow(data), ncol=ncol(data)) 
```

然而，即使`d1`是一个数组并且`d2`是一个矩阵，`class`和`mode`是相同的：

```
> class(d1)
[1] "matrix"
> mode(d1)
[1] "list"
> class(d2)
[1] "matrix"
> mode(d2)
[1] "list" 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:48:20.917

我会努力解释我对这些问题的理解。

您不需要大型测试文件来证明问题。一个简单的`data.frame`会做：

```
test <- data.frame(var1=1:2,var2=letters[1:2])

> test
  var1 var2
1    1    a
2    2    b 
```

请记住，a`data.frame`只是`list`内部的。

```
> is.data.frame(test)
[1] TRUE
> is.list(test)
[1] TRUE 
```

如您所料，具有类似`list`的结构。

```
> str(test)
'data.frame':   2 obs. of  2 variables:
 $ var1: int  1 2
 $ var2: Factor w/ 2 levels "a","b": 1 2

> str(as.list(test))
List of 2
 $ var1: int [1:2] 1 2
 $ var2: Factor w/ 2 levels "a","b": 1 2 
```

当您指定对 a或 a的`matrix`调用时，您最终会得到一个填充了 data.frame 或列表元素的矩阵。`data.frame``list`

```
result1 <- matrix(test)

> result1
     [,1]     
[1,] Integer,2
[2,] factor,2 
```

查看 的结构`result1`，您可以看到它仍然是`list`，但现在只有尺寸（请参见下面输出中的最后一行）。

```
> str(result1)
List of 2
 $ : int [1:2] 1 2
 $ : Factor w/ 2 levels "a","b": 1 2
 - attr(*, "dim")= int [1:2] 2 1 
```

这意味着它现在既是 a`matrix`又是 a`list`

```
> is.matrix(result1)
[1] TRUE
> is.list(result1)
[1] TRUE 
```

如果您从该对象中去除尺寸，它将不再是 a`matrix`并且将恢复为只是 a `list`。

```
dim(result1) <- NULL

> result1
[[1]]
[1] 1 2

[[2]]
[1] a b
Levels: a b

> is.matrix(result1)
[1] FALSE
> is.list(result1)
[1] TRUE

> str(result1)
List of 2
 $ : int [1:2] 1 2
 $ : Factor w/ 2 levels "a","b": 1 2 
```

# maven - pom xml中的依赖和插件标签之间的maven有什么区别？

> ID：11881663
> 
> 赞同：157
> 
> 时间：2012-08-09T10:45:48.123
> 
> 标签：maven, plugins, dependencies, pom.xml

我是 maven 工具的新手，我用 Spring 和 Hibernate 创建了一个项目，它们在 pom.xml 中配置为插件，但 JUnit 被标记为依赖项。我的问题是一个作为插件和一个作为依赖项背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2012-08-09T12:54:50.050

插件和依赖项都是 Jar 文件。

但它们之间的区别在于，maven 中的大部分工作都是使用插件完成的；而依赖项只是一个 Jar 文件，它将在执行任务时添加到类路径中。

例如，您使用编译器插件来编译 java 文件。您不能将编译器插件用作依赖项，因为这只会将插件添加到类路径中，并且不会触发任何编译。编译文件时要添加到类路径的 Jar 文件将被指定为依赖项。

你的场景也是如此。您必须使用 spring-plugin 来执行一些 spring 可执行文件 [我不确定 spring-plugin 用于什么。我只是在这里猜测]。但是您需要依赖项来执行这些可执行文件。并且 Junit 被标记为依赖项，因为它被 surefire-plugin 用于执行单元测试。

所以，我们可以说，plugin 是一个执行任务的 Jar 文件，dependency 是一个提供执行任务的类文件的 Jar。

希望这能回答你的问题！

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-08-09T10:51:46.817

Maven 本身可以被描述为食物处理器，它有许多不同的单元可以用来完成不同的任务。这些单元称为插件。例如，编译您的项目 maven 使用`maven-compiler-plugin`, 运行测试 -`maven-surefire-plugin`等等。

就 maven 而言，依赖关系是您的项目所依赖的一组打包类。它可以是 jar、war 等。例如，如果您希望能够编写 JUnit 测试，则必须使用 JUnit 注释和类，因此您必须声明您的项目依赖于 JUnit。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2018-08-31T16:44:39.417

插件和依赖是非常不同的东西，它们是互补的。

## 什么插件？

**插件为 Maven 构建执行任务。这些未打包在应用程序中。**

这些是 Maven 的核心。
[Maven 执行的任何任务都是由 plugins 执行的](https://maven.apache.org/plugins/)。
有两类插件：[插件](https://maven.apache.org/plugins/)[和插件`build``reporting`](https://maven.apache.org/plugins/)：

*   构建插件将在构建期间执行，它们应该在`<build/>`POM 的元素中配置。
*   报告插件将在站点生成期间执行，它们应在`<reporting/`POM 的 > 元素中进行配置。

根据命令行中指定的 maven 目标（例如`mvn clean`， `mvn clean package`或`mvn site`），将使用[特定的生命周期](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)并执行一组特定的插件目标。
有三个内置的构建生命周期`default`：`clean`和`site`. 生命`default`周期处理您的项目部署，`clean`生命周期处理项目清理，而`site`生命周期处理项目站点文档的创建。

插件目标可能绑定到特定生命周期的特定阶段。
例如`maven-compiler-plugin`，默认情况下将目标绑定`compile`到生命周期阶段：`compile`.
大多数 maven 插件（核心插件和第三方插件）都支持约定而不是配置。因此，这些通常将插件目标绑定到特定阶段，以使其使用更简单。

那更整洁，更不容易出错：

```
<plugin>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>3.7.0</version>
</plugin> 
```

比 ：

```
<plugin>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>3.7.0</version>
  <executions>
    <execution>
        <phase>compile</phase>
        <goals>
            <goal>compile</goal>
        </goals>
    </execution>
  </executions>
</plugin> 
```

## 什么是依赖项？

**依赖项是项目所需的 Maven 工件/组件。**

**具体来说**，大多数依赖项都是 jar（即库），但它们也可能是其他类型的档案：war、ear、test-jar、ejb-client ... 或者仍然是 POM 或 BOM。

在 pom.xml 中，**可以在多个位置指定依赖**项：`<build><dependencies>`part、`dependencies management`part 或仍在*声明`plugin`中*！事实上，一些插件在执行过程中可能需要在类路径中有一些依赖项。这并不常见，但可能会发生。
以下是[文档](https://maven.apache.org/guides/mini/guide-configuring-plugins.html)中的一个示例，该示例表明`plugin`并且`dependency`可以一起工作：

> 比如 Maven Antrun Plugin 1.2 版本使用 Ant 1.6.5 版本，如果你想在运行这个插件时使用最新的 Ant 版本，你需要添加`<dependencies>`如下元素：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.2</version>
        ...
        <dependencies>
          <dependency>
            <groupId>org.apache.ant</groupId>
            <artifactId>ant</artifactId>
            <version>1.7.1</version>
          </dependency>
          <dependency>
            <groupId>org.apache.ant</groupId>
            <artifactId>ant-launcher</artifactId>
            <version>1.7.1</version>
          </dependency>
         </dependencies>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

在 Maven 中，依赖项以特定格式引用：
`groupId:artifactId:packaging:classifier:version`.
分类器（可选）和包装（`JAR`默认情况下）通常不指定。所以`dependency`声明中的通用格式是：`groupId:artifactId:version`。
以下是部分中声明的依赖项示例`<build><dependencies>`：

```
<build>
   <dependencies>
      <dependency>
         <groupId>org.hibernate</groupId>
         <artifactId>hibernate-core</artifactId>
         <version>5.2.14.Final</version>
      </dependency>
   <dependencies>
</build> 
```

**依赖项没有作为插件的阶段绑定来解决“何时”问题。
但它有一个对应物：范围**。
根据我们为它们定义的范围，应用程序确实可以在特定时间使用声明的依赖项。
**这`scope`**是关于如何在项目中看到依赖项的核心概念。

默认范围是`compile`. 这是最常用的范围（再次约定优于配置）。范围意味着依赖项在项目的所有类路径中都可用
。`compile`

范围定义了应该在哪些类路径中添加依赖项。例如，我们是在编译和运行时需要它，还是只在测试编译和执行时需要它？

例如，我们之前将 Hibernate 定义为`compile`依赖项，因为我们在任何地方都需要它：源代码编译、测试编译、运行时等等......
但是我们不希望测试库可能被打包在应用程序中或在源代码中引用. 所以我们`test`为它们指定范围：

```
<build>
   <dependencies>
     <dependency>
        <groupId>org.junit.jupiter</groupId>
        <artifactId>junit-jupiter-engine</artifactId>
        <version>5.1.0</version>
        <scope>test</scope>
     </dependency>
   <dependencies>
</build> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-09-20T14:41:41.020

如果你像我一样有前端背景，并且熟悉 Grunt 和 npm，可以这样想：

首先你会运行，比如说，`npm install grunt-contrib-copy --save-dev`. 这就像 maven 的`<dependency></dependency>`。它下载执行构建任务所需的文件。

然后您将在 Gruntfile.js 中配置任务

```
copy: {
  main: {
    src: 'src/*',
    dest: 'dest/',
  },
} 
```

这就像 maven 的`<plugin>/<plugin>`。您正在告诉构建工具如何处理 npm/ 下载的代码`<dependency></dependency>`。

当然，这不是一个精确的类比，但足够接近以帮助您理解它。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-04-29T11:48:05.720

*一线答案——基本了解*

**插件**是您在执行 maven 构建时使用的工具

**依赖**意味着您将在代码中使用的任何库

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-08-20T14:33:38.933

插件用于向`Maven`自身添加功能（如添加`eclipse`支持或`SpringBoot`支持`Maven`等）。您的源代码需要依赖项才能通过任何 Maven 阶段（`compile`或`test`例如）。如果`JUnit`由于测试代码基本上是您的代码库的一部分，并且您`JUnit`在测试套件中调用特定命令，并且这些命令未提供，`Java SDK`因此`JUnit`必须`Maven`在测试阶段出现，并且通过提及`JUnit`作为依赖项来处理在你的`pom.xml`文件中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-01T17:51:15.513

Maven 的核心是一个插件执行框架——根据正式和标准的紧凑定义。为了更清楚，您使用的命令就像`maven-install/clean/compile/build etc`创建/执行 jars，我们有时也手动运行。所以，你想要运行（或配置或执行）的东西，你基本上把它们放在 mavens pom 的依赖标签中，然后谁将运行这些依赖（环境设置所需）的答案就是插件。

```
 javac (compiler) dependency.java (dependency) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-29T09:16:47.063

插件是 Maven 的扩展，用于生成您的工件（例如，maven-jar-plugin 用于，您猜对了，从您编译的类和资源中制作一个 jar）。

依赖项是您正在构建的应用程序在编译和/或测试和/或运行时所需的库。

[![插件和依赖](../Images/f2c81cccc7738a4051fc12a7fd64eb8c.png)](https://i.stack.imgur.com/eG52p.png)

# java - 当视频播放时，整个 webview 与 android 中 adview 的底部重叠

> ID：11881665
> 
> 赞同：2
> 
> 时间：2012-08-09T10:45:59.423
> 
> 标签：java, android, webview, android-video-player

我的项目中有一个 webview，我成功地在 webview 中加载了 url。在我正在加载 webview 的网站中，有视频列表。所以我成功播放了视频。但是当 videolist 显示整个 webview 时，整个 webview 与底部重叠admob adview 的。我的布局非常适合其他屏幕。但仅在 videoscreen 中重叠。这是我的代码：

```
web = (WebView) findViewById(R.id.webview01);
        progressBar = (ProgressBar) findViewById(R.id.progressBar1);

        web.getSettings().setLoadWithOverviewMode(true);
        web.getSettings().setUseWideViewPort(true);
        web.setWebViewClient(new myWebClient());
        web.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        web.getSettings().setPluginState(PluginState.ON);
        web.getSettings().setJavaScriptEnabled(true); 

        web.loadUrl("http://savebigshopper.com/amazon"); 
```

我怎样才能解决这个问题？请帮忙。

# c# - 仅在多个空格上拆分 C#

> ID：11881670
> 
> 赞同：2
> 
> 时间：2012-08-09T10:46:28.573
> 
> 标签：c#, .net

假设我有一个字符串：

```
"Joe Doe     is    not    here" 
```

我想仅在包含多个空格的情况下拆分此字符串，但将 Joe Doe 保留为一个子字符串。

所以结果将是：

```
string[] result={"Joe Doe","is","not","Here"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:51:25.693

使用带有 @"\s{2,}" 作为模式的 Regex.Split - 将在有 2 个或更多空白字符的地方进行拆分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T10:51:53.337

```
Regex.Split(input, @"\s{2,}") 
```

这个正则表达式需要最少。2个空格。

# javascript - 检测事件回调的开始和结束？

> ID：11881672
> 
> 赞同：1
> 
> 时间：2012-08-09T10:46:31.580
> 
> 标签：javascript, events, callback, mapbox

我正在使用新的[mapbox.js API](http://mapbox.com/blog/mapbox-javascript-api/)，尤其是事件回调“平移”。当用户移动地图时，回调会触发大约 50-100 次，这太过分了。从中获得第一个和最后一个事件（或仅最后一个）的最佳方法是什么？

```
map.addCallback('panned', function(move) {
  console.log('panned');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:50:50.437

使用 .setTimeout：

```
var timeout = null;
map.addCallback('panned', function (move) {
    timeout && window.clearTimeout(timeout);
    timeout = window.setTimeout(function () {
        console.log('panned')
    }, 100)
}) 
```

对于超时时间，请选择一个合适的时间，您必须通过摆弄几个值来找出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:19:18.987

[UnderscoreJS](http://underscorejs.org)有一些有用的功能。

*[根据您的描述，去抖动](http://underscorejs.org/#debounce)*可能最适合您： *...将其执行推迟到自上次调用以来等待毫秒过去之后*

*[“Throttle”](http://underscorejs.org/#throttle)*也很有用： *“......实际上每等待毫秒最多只会调用一次原始函数。对于发生得比你跟上更快的速率限制事件很有用。”*

高温高压

# jquery - jquery mobile rel="external" 转换

> ID：11881675
> 
> 赞同：1
> 
> 时间：2012-08-09T10:46:36.870
> 
> 标签：jquery, jquery-mobile

对于我使用 jquery mobile 构建的 phonegap 应用程序，如果我想转到另一个页面，例如如果我想从 index.html 转到 users.html，我会使用 rel="external"。

我使用此选项是因为否则我无法在 users.html 中使用 javascript 函数。例如，它不会执行 document.ready 中的内容。但是.. 如果我使用 rel="external" 那么它将起作用。 .

问题是，如果我使用 rel="external" 转换（幻灯片）将不再起作用..有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:01:33.827

尝试使用 pageinit 而不是 document.ready 和 rel="external"。这是在页面初始化后触发的。您还可以使用其他事件，具体取决于您的需要，例如 pageshow 或 bagebeforeshow。

```
 $( '#aboutPage' ).live( 'pageinit',function(event){
  alert( 'This page was just enhanced by jQuery Mobile!' );
}); 
```

更多关于 jQM 事件[http://jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

以下是他们对 document.ready 的评价：

> 重要提示：使用 $(document).bind('pageinit')，而不是 $(document).ready()
> 
> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。此事件在本页底部有详细说明。

# algorithm - 如何执行最小拆分以满足特殊集合排序？

> ID：11881685
> 
> 赞同：2
> 
> 时间：2012-08-09T10:47:04.037
> 
> 标签：algorithm, set

我正在尝试创建一个算法来解决以下问题： ![更新了问题的图像](../Images/a834876e4825543cd4a61dc2275ec99f.png)

输入是包含整数对（键，值）的未排序集合列表。每对中的第一个在集合中是积极的并且是唯一的。
我想找到一种算法来拆分输入集，以便可以对集进行排序，以便对于每个键，值在集顺序中不递减。

有一个简单的解决方案是将集合拆分为每个单独的值并对它们进行排序，我希望在拆分的集合数量方面更有效。

您是否遇到过任何类似的问题和/或您可以建议的技术？最优（最小分割数）解决方案听起来像是在多项式时间内可能吗？

* * *

编辑：在示例中，“<=”运算符表示对整个集合的约束，因此对于每个键值（100、101、102），相应的值等于或大于先前集合中的值（或从集）。即使用输出集中的顺序提取每个键的值给出：

*   键 100 {0, 1}
*   键 101 {2, 3}
*   键 102 {10, 15}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:57:30.110

# primefaces - 从示例演示 PrimeFaces 访问代码

> ID：11881686
> 
> 赞同：2
> 
> 时间：2012-08-09T10:47:05.520
> 
> 标签：primefaces, components, demo

我想看看这个组件 PrimeFaces 演示的代码：[https](https://www.primefaces.org/showcase/ui/panel/layout/mailbox.xhtml) ://www.primefaces.org/showcase/ui/panel/layout/mailbox.xhtml 什么时候可以找到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:00:15.070

您可以在 primefaces svn 存储库中找到它

[https://github.com/primefaces/showcase/blob/master/src/main/webapp/ui/panel/layout/mailbox.xhtml](https://github.com/primefaces/showcase/blob/master/src/main/webapp/ui/panel/layout/mailbox.xhtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T01:00:31.503

这是java代码： [https ://github.com/primefaces/showcase/blob/master/src/main/java/org/primefaces/showcase/view/panel/MailboxView.java](https://github.com/primefaces/showcase/blob/master/src/main/java/org/primefaces/showcase/view/panel/MailboxView.java)

以及 Facelet 代码： [https ://github.com/primefaces/showcase/blob/master/src/main/webapp/ui/panel/layout/mailbox.xhtml](https://github.com/primefaces/showcase/blob/master/src/main/webapp/ui/panel/layout/mailbox.xhtml)

# java - activiti 5.9 可以使用休眠会话吗？

> ID：11881688
> 
> 赞同：5
> 
> 时间：2012-08-09T10:47:07.617
> 
> 标签：java, hibernate, mybatis, activiti

是否可以将activiti与hibernate一起使用而不是mybatis？案例是我们的实际项目使用hibernate作为持久性框架，我们使用jbpm 3作为流程。在 jbpm 3 中，可以使用单个休眠会话，因此我们获得了一些好处。现在我们考虑迁移到activiti，因为架构非常棒（spring、services等），但是研究发现activiti使用mybatis进行持久化。

关于持久性，我们是否可以对 activiti 做与 jbpm 3 相同的事情？如果可能的话，我需要做的是让它发挥作用。

编辑：我根据自己的需要解决了它，并在[activiti 论坛上](http://forums.activiti.org/en/viewtopic.php?f=6&t=4360)为每个遇到和我一样问题的人发布了我的解决方案。简而言之：共享会话是不可能的，但是您可以使用相同的事务管理器来帮助您在发生错误时回滚。

Greetz cookie-exploit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T10:06:14.570

*   mybatis 可以使用与 hibernate 相同的事务管理器（如果两者都在 Spring Framework 下运行）
*   mybatis 将无法参与 Hibernate 会话

# java - 使用 ORDER BY 子句时 Java Hibernate 查询卡住

> ID：11881691
> 
> 赞同：1
> 
> 时间：2012-08-09T10:47:22.400
> 
> 标签：java, hibernate, freeze, clause

我有以下 HQL 查询：

```
SELECT bu FROM Backup bu WHERE bu.status = :status ORDER BY bu.container.techId ASC 
```

每当查询结果 > 0 时，查询就会卡住，这意味着 query.getResultList() 永远不会返回。但是，如果我删除 ORDER BY 子句，只留下 SELECT bu FROM Backup bu WHERE bu.status = :status 它运行良好

我的课程是：

```
public class Backup implements Serializable {

  @Id
    @Column(name="ID")
    @GenericGenerator(name = "generator", strategy = "guid", parameters = {})
    @GeneratedValue(generator = "generator")
    private String id;

    @Column(name="PVAID", nullable=true)
    private String PVAID;

    @Column(name="Error", nullable=true)
    private String error;

    @Column(name="\"Size\"", nullable=false)
    private Long backupSize;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name="startdate", nullable=false)
    private Date startDate;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name="enddate", nullable=true)
    private Date endDate;

    @Column(name="status", nullable=false)
    private Short status;

    @ManyToOne
    @JoinColumn(name="fullbackupid", referencedColumnName="ID", nullable=true)
    private Backup fullBackup;

    @ManyToOne
    @JoinColumn(name = "ContainerID", referencedColumnName="ID", nullable=false)
    private Container container;

} 
```

和

```
public class Container implements Serializable {

   @Id
    @Column(name="ID")
    private String id;

    @ManyToOne
    @JoinColumn(name="HardwareNodeID", referencedColumnName="ID", nullable=false)
    private HardwareNode hardwareNode;

    @ManyToOne
    @JoinColumn(name="BackupServerID", referencedColumnName="ID", nullable=false)
    private BackupServer backupServer;

    @Column(name="TechID", nullable=false)
    private Integer techId;

    @Column(name="Exclude", nullable=false)
    private Boolean exclude;

    @Column(name="retry_backup", nullable=true)
    private Short retryBackUp;

    @Column(name="retry_delay", nullable=true)
    private Short retryDelay;

} 
```

执行查询的代码

```
 public List<T> getAllByFilter(final boolean isNamedQuery, final String queryString, final HashMap<String, Object> fields, final int startRecord, final int maxResults) {
    logger.log(Level.INFO, "Loading all paginated");
    final EntityManager em = emf.createEntityManager();
    Query query = null;
    if(isNamedQuery) {
        query = em.createNamedQuery(queryString);
    } else {
        query = em.createQuery(queryString);
    }
    final Set<?> set = fields.entrySet();
    final Iterator<?> i = set.iterator();

    while(i.hasNext()){
      final Map.Entry me = (Map.Entry)i.next();
      final String field = (String)me.getKey();
      final Object value = me.getValue();
      System.out.println(me.getKey() + " : " + me.getValue() );
      query.setParameter(field, value);
    }
    query.setFirstResult(startRecord);
    if (maxResults!=0) query.setMaxResults(maxResults);
    return query.getResultList();
} 
```

SQL查询似乎也很好：

```
13:45:03,583 INFO  [STDOUT] Hibernate: select top 41 backup0_.ID as ID153_, backup0_.IsFullBackup as IsFullBa2_153_, backup0_.PVAID as PVAID153_, backup0_.Error as Error153_, backup0_.[Size] as Size5_153_, backup0_.startdate as startdate153_, backup0_.enddate as enddate153_, backup0_.status as status153_, backup0_.ManualBackup as ManualBa9_153_, backup0_.fullbackupid as fullbac10_153_, backup0_.ContainerID as Contain11_153_ from Backups backup0_, Containers container1_ where backup0_.ContainerID=container1_.ID and backup0_.status=? order by container1_.TechID DESC 
```

底层数据库是 SQL Server。

问题可能出在哪里？有人遇到过类似的事情吗？谢谢

# c# - 在 C# windows appl 中的数据网格列上实现搜索功能

> ID：11881692
> 
> 赞同：0
> 
> 时间：2012-08-09T10:47:23.977
> 
> 标签：c#, datagridview

我正在使用 .net 2.0 开发 Windows 应用程序。UI 应用程序有一个数据网格，数据将从 XML 文件中填充。数据网格有超过 500 行。排序功能已实现。但是客户仍然希望在其中一个带有文本框的列上具有查找选项或搜索功能，用户将在其中输入前 3 个字母，并且它必须在网格中搜索并且必须显示以给定搜索开头的相关行标准。

任何建议请如何实施....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:55:01.407

您可以在 BindingSource 对象中使用 Filter 选项。

```
private BindingSource dashBoardBindingSource = new BindingSource();

dashBoardBindingSource.DataSource=<<data source items>>;
dashBoardBindingSource.Filter="Column Name=textbox.text";
datagrid.DataSource = dashBoardBindingSource; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:12:48.020

存储完整的数据集合，然后在需要执行过滤器时，创建过滤器集合并将过滤器集合绑定到网格。只需将适当的文本更改事件连接到您的过滤器框，调用 FilterGridData。它在通过多列过滤时也能很好地工作。哦，你不必在这里使用 BindingList。使用您想要绑定到网格的任何数据源 - 其核心只是“通过使用 LINQ 过滤来创建过滤后的集合”。

```
 BindingList<Foo> _allFoos;

    private void LoadData(IEnumerable<Foo> dataToDisplayInGrid)
    {
        this._allFoos = new BindingList<Foo>(dataToDisplayInGrid.ToList());
        this.FilterGridData(string.Empty);
    }

    private void FilterGridData(string filterText)
    {
        BindingList<Foo> filteredList = null;
        if (!string.IsNullOrEmpty(filterText))
        {
            string lowerCaseFilterText = filterText.ToLower();
            IList<Foo> filteredItems = this._allFoos.Where(x => (x.Name ?? string.Empty).ToLower().Contains(lowerCaseFilterText)).ToList();
            filteredList = new BindingList<Foo>(filteredItems);
        }
        else
        {
            filteredList = new BindingList<Foo>(this._allFoos);
        }

        dataGrid.DataSource = filteredList;
    } 
```

# asp.net - 使用循环 VB.net 更改具有相似 ID 的多个控件的属性

> ID：11881693
> 
> 赞同：0
> 
> 时间：2012-08-09T10:47:25.790
> 
> 标签：asp.net, vb.net, loops

我有一个带有各种输入的 aspx web 表单，包括一个带有 1-10 的下拉框。提交表单后，可以看到一个新面板，其中包含 10 行静态文本框和标签控件。默认情况下，这些控件都设置为 visible=false。

我想要的是基于上一个下拉框中选择的数字，即我想将多少行控件更改为可见=真。这些控件的 ID 对于每一行都是相同的，除了最后一个字符来反映它们属于哪一行。因此，第 1 行将具有以下内容：

ticketNum_Lbl_1 your_res_Txt_1 title_Txt_1 firstname_Txt_1 surname_Txt_1 ticketNum_Txt_1

我想要的是一个简单的循环，它将检查控件 ID 末尾的数字并将其与下拉列表中选择的数字进行比较。

为清楚起见，下拉列表供用户选择他们想在一张桌子上预订多少个座位，以下屏幕将让他们为他们预订的座位分配名称。

我已经尝试了几件事，但显然仍然没有得到它，尽管它可能类似于：

```
 Dim rowsNeeded As Integer = number_of_tickets_Ddl.SelectedValue
        For a = 1 To rowsNeeded
        Me.Controls("ticketNum_Lbl_" & a).Visible = True
        Me.Controls("your_res_Txt_" & a).Visible = True
        Me.Controls("title_Txt_" & a).Visible = True
        Me.Controls("firstname_Txt_" & a).Visible = True
        Me.Controls("surname_Txt_" & a).Visible = True
        Me.Controls("ticketNum_Txt_" & a).Visible = True

    Next 
```

但这会出现错误，因为控件引用索引（整数）而不是控件的名称或 ID（似乎？）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:49:48.157

你应该使用[FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)

```
Me.FindControl("ticketNum_Lbl_" & a).Visible = True 
```

# c# - “One Shot”属性获取器是否被认为是 .NET（或一般而言）中可接受的编码标准

> ID：11881697
> 
> 赞同：5
> 
> 时间：2012-08-09T10:47:45.847
> 
> 标签：c#, .net, properties, activemq

最近在使用 C# 和 ActiveMQ（通过 Apache.NMS 库）做一些工作时，我在`ActiveMQBytesMessage`

```
public new byte[] Content
{
  get
  {
    byte[] buffer = (byte[]) null;
    this.InitializeReading();
    if (this.length != 0)
    {
      buffer = new byte[this.length];
      this.dataIn.Read(buffer, 0, buffer.Length);
    }
    return buffer;
  }
  ..(setter omitted)
} 
```

该`InitialiseReading`方法处理数据从活动 MQ 到`.dataIn`现场的连接和流式传输。但问题是它**每次都这样做**。一旦读取了该数据，就再也无法读取它，并且 dataIn 字段被置零并重置。因此，只需观察属性并再次观察它，您就会丢失数据。这导致了一些非常奇怪的错误，例如：

```
byte [] myBytes = new byte[msg.Content.Length]; 
//Touched the property. Data read in.

msg.Content.CopyTo(myBytes,0); 
//Uh oh! touched it again, copying a zero'd array. 
```

或者当您在调试时，您在属性上放置了一个监视变量或不小心将鼠标悬停在属性上。

这种机制是使用流数据属性的公认或流行方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T10:50:50.717

非常*非常*糟糕的代码。

一般的观点是属性不应该影响对象的内部状态。如果你调用 set，那么 get 你应该总是取回你刚刚设置的值。如果你调用 get twicwe，你应该两次得到相同的结果。

这至少应该是一个被调用的方法`GetContent`，但 id 仍然希望能够重复调用该方法并获得相同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:54:10.043

这是非常糟糕的代码。属性应该包含很少的逻辑，并且绝不会引起副作用。

这个属性最好作为一个名为 getNextContent的*方法。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T10:54:40.543

它的代码很糟糕，它破坏了一个叫做命令查询分离（CQS）的东西。

这个想法是查询应该是可重复的，没有任何副作用。命令/动作不应该真正提供有关对象的任何信息，只需进行修改。（虽然在实践中它可以用于链接命令）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T10:50:31.950

显然，它的代码很糟糕，而且我还没有看到太多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T10:51:57.337

显然，由于您给出的原因，这是一个糟糕的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-09T11:55:59.617

你应该提交一个错误。不管他们修复它的可能性有多大。

# javafx-2 - javafx 2.1 中 org.jfxtras.util.BrowserUtil 的等效 API 是什么？

> ID：11881698
> 
> 赞同：0
> 
> 时间：2012-08-09T10:47:46.083
> 
> 标签：javafx-2

我将代码从 javafx 1.3 转换为 javafx 2.1。此 API 在 javafx 1.3 中，但我不知道 javafx 2.1 中的等效 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:34:43.010

[HostServices.showDocument()](http://docs.oracle.com/javafx/2/api/javafx/application/HostServices.html#showDocument%28java.lang.String%29)将在浏览器窗口中打开一个 url（类似于 jfxtras BrowserUtil 所做的）。

# python - 在python中使用动态参数列表调用函数

> ID：11881700
> 
> 赞同：12
> 
> 时间：2012-08-09T10:47:47.270
> 
> 标签：python, web.py

我需要调用一个函数来处理可以具有默认值的参数列表：

示例代码：

```
web.input(name=None, age=None, desc=None, alert=None, country=None, lang=None) 
```

如何使用列表或字典像这样调用 web.input？我被困在：

```
getattr(web, 'input').__call__() 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-09T10:53:14.287

```
my_args = {'name': 'Jim', 'age': 30, 'country': 'France'}

getattr(web, 'input')(**my_args) # the __call__ is unnecessary 
```

您也不需要使用 getattr，您当然可以直接调用该方法（如果您不想从字符串中查找属性）：

```
web.input(**my_args) 
```

你可以对列表做同样的事情：

```
my_args_list = ['Jim', 30, 'A cool person']
getattr(web, 'input')(*my_args_list) 
```

相当于

```
getattr(web, 'input')('Jim', 30, 'A cool person') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-09T10:53:26.207

[在此处](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)找到相关文档

```
web.input(*list)
web.input(**kwargs) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-09T10:53:35.550

您可以使用 *args 和 **kwargs 表示法动态传递元组（位置）和字典（命名）参数。下一个代码将与您的**web.input(...)**相同。

```
keyword_args = {
   "name": None,
   "age": None,
   ...
}
web.input(**keyword_args) 
```

# php - 使 PHP socket_connect 超时

> ID：11881708
> 
> 赞同：8
> 
> 时间：2012-08-09T10:48:05.553
> 
> 标签：php, sockets, timeout, ping

我创建了一个小应用程序来分析网络连接。它从浏览器运行并连接到本地 PHP/Apache 服务器。然后它要求 PHP 通过原始套接字发送一个 ping 数据包。问题是，如果我尝试 ping 的主机不存在或不响应 ping，我们永远不会从服务器得到答案。

我相信套接字请求会一直存在，直到 apache 重新启动。我最近从我的应用程序中得到了好坏参半的结果，我指责 apache 使用了太多的套接字。目前我已经设置了 AJAX 调用的超时时间，我对此很满意。但我真的需要让 PHP 进行超时，这样我就不会有 500,000 个套接字对无法访问的主机开放。

一些示例代码：

```
$sockconn = @socket_connect($socket, $target, null);
if(!$sockconn)
{
    $raw['error'] = socket_strerror(socket_last_error());
    $raw['status'] = false;
    return $raw;
} 
```

这是不会超时的功能。我需要让它超时。PHP 脚本执行时间也不会影响套接字。

我一无所知。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T10:47:04.887

[您可以使用以下选项](http://nl.php.net/manual/en/function.socket-get-option.php)设置读取和发送超时：

```
socket_set_option($socket, SOL_SOCKET, SO_RCVTIMEO, array('sec' => 1, 'usec' => 0));
socket_set_option($socket, SOL_SOCKET, SO_SNDTIMEO, array('sec' => 1, 'usec' => 0)); 
```

或者，您可以使用[非阻塞套接字](http://nl.php.net/manual/en/function.socket-set-nonblock.php)并定期轮询套接字以查看远程主机是否响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:50:19.310

尝试设置[default_socket_timeout](http://www.php.net/manual/en/filesystem.configuration.php#ini.default-socket-timeout)。

# ios - 当应用程序进入后台时，我可以知道按下了哪个键吗？

> ID：11881713
> 
> 赞同：0
> 
> 时间：2012-08-09T10:48:22.550
> 
> 标签：ios, lifecycle

当应用程序进入后台时，我可以知道按下了哪个键吗？“主页”按钮或“开/关”按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:05:32.997

不，您的应用程序可以进入后台有多种原因，但您只知道状态发生了变化。

如果不使用私有 API，就无法确定。例如，除了用户按下按钮之外，您的应用程序还可以进入后台进行自动锁定事件，因此即使假设按下了按钮也可能是错误的。

# c++ - 如何在 libjingle 中编译 pcp 文件共享

> ID：11881716
> 
> 赞同：0
> 
> 时间：2012-08-09T10:48:39.727
> 
> 标签：c++, ftp, p2p, voip, libjingle

好的，我正在尝试使用以下命令编译名为“pcp”的文件共享示例

```
 wolfgang@den-pc:~/tejesh/libjingle-0.6.14/programs$ g++ -g -Wall -DPOSIX
-DEXPAT_RELATIVE_PATH -DFEATURE_ENABLE_SSL -DHAVE_OPENSSL_SSL_H=1  -I ../ pcp_main.cc
 ../talk/build/dbg/lib/libxmpphelp.a ../talk/build/dbg/lib/libjingle.a ../talk/build
 /dbg/lib/libexpat.a ../talk/build/dbg/lib/libsrtp.a -lpthread -lssl 
```

我收到以下“typeinfo”错误...

```
 pcp_main.cc: In member function ‘virtual void
 CustomXmppPump::OnStateChange(buzz::XmppEngine::State)’:
 pcp_main.cc:348:12: warning: enumeration value ‘STATE_NONE’ not handled in switch  
 [-Wswitch]
 /tmp/ccVe8JUg.o:(.rodata._ZTI14CustomXmppPump[typeinfo for CustomXmppPump]+0x18): 
 undefined reference to `typeinfo for XmppPump'
 /tmp/ccVe8JUg.o:(.rodata._ZTIN7cricket18SessionManagerTaskE[typeinfo for  
 cricket::SessionManagerTask]+0x8): undefined reference to `typeinfo for buzz::XmppTask'
 /tmp/ccVe8JUg.o:(.rodata._ZTIN7cricket15SessionSendTaskE[typeinfo for  
 cricket::SessionSendTask]+0x8): undefined reference to `typeinfo for buzz::XmppTask'
 /tmp/ccVe8JUg.o:(.rodata._ZTI17AutoPortAllocator[typeinfo for AutoPortAllocator]+0x8): 
 undefined reference to `typeinfo for cricket::HttpPortAllocator'
 collect2: ld returned 1 exit status 
```

有人对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T09:33:24.093

如果你用 gyp 编译，你可以更改 trunk/talk/libjingle_examples.gyp：

```
# target pcp
{
  'target_name': 'pcp',
  'type': 'executable',
  'dependencies': [
    'libjingle_xmpphelp',
    'libjingle.gyp:libjingle',
    'libjingle.gyp:libjingle_p2p',
  ],
  'sources': [
    'examples/pcp/pcp_main.cc',
  ],
},  # target pcp 
```

再次运行 gclient runhooks 并制作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:58:53.123

这个错误可能是由一些没有定义的虚方法引起的——即你已经声明了它但你没有定义它的主体。

可能您没有在编译/链接中包含一些 .c/.cpp 文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T22:04:55.690

确实设法通过 scons 成功编译 pcp，............在你的 talk/ 目录中将以下行附加到'libjingle.scons'

```
 talk.App(env, name = "pcp",
 posix_libs = [
   "crypto",
   "ssl",
 ],
 srcs = [
   "examples/pcp/pcp_main.cc",
 ], 
```

库= [“叮当声”，“外籍人士”，“srtp”，“xmpphelp”，]，）

然后使用 libjingle 的 README 中的说明构建它。pcp 二进制文件将构建在您的 /talk/build/dbg/staging/ 目录中。

# java - Google App Engine 和 Java 版本

> ID：11881717
> 
> 赞同：0
> 
> 时间：2012-08-09T10:48:43.417
> 
> 标签：java, google-app-engine

嗨，我安装了 java 7 并在 ubuntu 上使用 eclipse Juno。我安装了谷歌应用程序引擎插件（1.7.0 sdk）。我在谷歌上部署它时创建了一个 Web 项目 HelloWorld1，它给了我 500 内部服务器错误 Unsupported major.minor 版本 51.0在谷歌应用引擎中。我经历了一些查询，但无法解决。我是 ubuntu 的新手。任何人都可以帮助如何解决这个错误。请帮助我。

我再次尝试现在我正在使用 jre 系统库 java-6-openjdk-i386 和 appengine 1.7.0 sdk，但我仍然收到相同的错误 500 internal server error Unsupported major.minor version 51.0。请一些帮助来运行我的第一个项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:54:28.700

您必须使用 Java SE 6 编译您的项目，GAE 不支持 Java SE 7。

[在这里](https://developers.google.com/appengine/docs/java/overview)您可以看到有关 Java 环境的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T23:05:26.253

看起来 Java 7 支持已经到了上个月。这已经解决了您遇到的问题。

“在 2013 年 2 月发布的 App Engine 1.7.5 中，Java 运行时添加了对 Java 7 的可选支持作为实验性功能。”

“在未来的版本中，将删除对 Java 6 的支持，因此最好尝试在新的 Java 7 运行时中运行现有的基于 Java 6 的应用程序，同时它仍然是可选的。”

[https://developers.google.com/appengine/docs/java/java7](https://developers.google.com/appengine/docs/java/java7)

# spring-mvc - Spring MVC 中的多条 flash 消息

> ID：11881720
> 
> 赞同：3
> 
> 时间：2012-08-09T10:48:54.233
> 
> 标签：spring-mvc

在 Spring MVC 3.1 中，我可以这样做：

```
@RequestMapping(value = "{id}/edit", method = RequestMethod.POST)
public String update(Category category, @PathVariable Integer id, 
    @RequestParam("childrenOrder") int[] childrenOrder,
    RedirectAttributes redirectAttributes) {

    if (!id.equals(category.getCategoryId())) throw new IllegalArgumentException("Attempting to update the wrong category");
    categoryMapper.updateByPrimaryKey(category);
    redirectAttributes.addFlashAttribute("flashSuccessMsg", "Update Successful");  //ADD FLASH MESSAGE
    return "redirect:/admin/categories.html";
} 
```

然后在视图中显示 flash 消息：

```
 <p>${flashSuccessMsg}</p> 
```

但我宁愿有一个闪存消息列表，然后在视图中对其进行迭代。

这可能吗？

如果我这样做：`redirectAttributes.addFlashAttribute("Update Successful");` 即我没有命名 Flash 消息，那么我如何在视图中检索它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T11:52:13.680

您是否尝试过使用[RedirectAttributes addFlashAttribute(String attributeName, Object attributeValue)](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/support/RedirectAttributes.html#addFlashAttribute%28java.lang.String,%20java.lang.Object%29)？

```
@RequestMapping(value = "{id}/edit", method = RequestMethod.POST)
public String update(Category category, @PathVariable Integer id, @RequestParam("childrenOrder") int[] childrenOrder, RedirectAttributes redirectAttributes) {
    if (!id.equals(category.getCategoryId())) throw new IllegalArgumentException("Attempting to update the wrong category");
    categoryMapper.updateByPrimaryKey(category);

    List<String> messages = new ArrayList<String>();
    // populate messages 

    redirectAttributes.addFlashAttribute("messages", messages);  

    return "redirect:/admin/categories.html";
} 
```

`messages`稍后，在您的视图中，您可以使用`<c:foreach />`标签进行迭代：

```
<c:foreach items="${messages}">
...
</c:foreach> 
```

# html - 如何在 Like 按钮旁边集成计数？

> ID：11881725
> 
> 赞同：0
> 
> 时间：2012-08-09T10:49:00.903
> 
> 标签：html, facebook, increment

这是like按钮的代码，我想在每次单击时增加一个计数器。

```
<form method="POST" action="/like/">
    {% csrf_token %}
    <input type="hidden" value="{{i.id}}" name="mid" />
    <input type="hidden" value="{{i.comment}}" name="comment" />
    <input type="submit" value="LIKE-{{i.num_like}}" name="like" style="position:absolute;left:428px;margin-top:-18px;"/>
</form> 
```

所以你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:09:43.263

```
<html>
<head>
<script>
var Clicks = 0 ;
function AddClick(){
Clicks = Clicks + 1;
document.getElementById('CountedClicks').innerHTML = Clicks + ' Hits';
}
</script>
</head>

<body>
<span id="CountedClicks">0 Hits</span><br>
<button style="background-color:green" onclick="AddClick()">Count Your Hit</button>
</body>

</html> 
```

类似的东西你必须将它应用到你的按钮样式中，但这就是想法。

# java - java Prepared Statement 因空错误而失败

> ID：11881728
> 
> 赞同：0
> 
> 时间：2012-08-09T10:49:11.543
> 
> 标签：java, prepared-statement

我有一个我无法弄清楚的问题，我确信这很容易，但我的谷歌搜索和 Stackoverflow 搜索并没有让我到达那里。java文档也没有帮助。我发现了很多人们在 SQL 语句或代码中出现语法错误的问题。我认为我的在代码中。它是关于通过查询从数据库中获取一些信息，用户可以在其中填写自己的搜索信息（数字）。

这是代码：（我已经尝试了多种方法，所以我的代码可能不再是最好的了。另外我是java新手，所以请考虑到这一点。）

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package dbConnection;

import data.Mail;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import view.SelectionScreenCRA;

/**
 *
 * @author vm
 */
public class dbConnect {

    public static Connection getConnection() {
        String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
        String url = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=C:\\Users\\Jeroen Veldhuijzen\\locaties.mdb;";
        String username = "";
        String password = "";

        try {
            Class.forName(driver);
            return DriverManager.getConnection(url, "", "");

        } catch (Exception ex) {
            Logger.getLogger(dbConnect.class.getName()).log(Level.SEVERE, null, ex);
            System.out.println("\nError: " + ex.toString() + ex.getMessage());

        }
        return null;
    }

    public static ArrayList<dbConnect> executeQuery(int cra) {

         ArrayList<dbConnect> locatie = new ArrayList<dbConnect>();

        Mail mail = new Mail();
        try{
        Connection conn = getConnection();
        PreparedStatement pst = conn.prepareStatement(
                "SELECT Locatiegegevens.[Locatiegegevens], "
                + "Locatiegegevens.[ISP - Straatnaam], "
                + "Locatiegegevens.[ISP - Huisnummer],"
                + " Locatiegegevens.[ISP - Postcode], "
                + "Locatiegegevens.[ISP - Plaatsnaam], "
                + "Locatiegegevens.[G4S - Transportcode] "
                + "FROM Locatiegegevens "
                + "WHERE Locatiegegevens.[Locatiegegevens] = '?';");

        pst.setInt(1, cra);
        pst.execute();

        pst.close();
        conn.close();

        }catch (Exception e){
            System.out.println("ERRROOOOR");

            System.out.println(e.getMessage());
            System.out.println(e.getClass());
            Logger.getLogger(dbConnect.class.getName()).log(Level.SEVERE, null, e);

        }
        return locatie;

    }

} 
```

int cra 将在此处设置：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    dbConnect dbc = new dbConnect();
    dbConnect.executeQuery(Integer.parseInt(getCRA().getText()));        
} 
```

cra 将作为 String 检索，然后在传递给 executeQuery 命令时解析为 int。如果我发出 cra int，它会给我 int 9501，它会在文本框中填写。但是，如果我通过按下按钮 jButton1 来运行查询，则会出现 null 错误：

```
null

class java.lang.NullPointerException
aug 09, 2012 12:43:04 PM dbConnection.dbConnect executeQuery
SEVERE: null
java.lang.NullPointerException
    at sun.jdbc.odbc.JdbcOdbcPreparedStatement.clearParameter(JdbcOdbcPreparedStatement.java:1022)
    at sun.jdbc.odbc.JdbcOdbcPreparedStatement.setInt(JdbcOdbcPreparedStatement.java:526)
    at dbConnection.dbConnect.executeQuery(dbConnect.java:62)
    at view.SelectionScreenCRA.jButton1ActionPerformed(SelectionScreenCRA.java:502)
    at view.SelectionScreenCRA.access$900(SelectionScreenCRA.java:29)
    at view.SelectionScreenCRA$11.actionPerformed(SelectionScreenCRA.java:333)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

有没有人可以指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T01:14:21.847

Micko 已经确定了问题所在。正如他所说，您*永远不*应该在查询字符串中的参数占位符 (?) 周围加上引号。不管是什么类型。

这只是为了解释实际发生的事情......以及为什么你会得到 NPE。

如果在参数标记周围加上引号，则实际上是在编写 SQL 字符串。当`createPreparedStatment`分析您的查询字符串时，它根本找不到任何标记。从句法的角度来看，这没关系¹ ......但这意味着查询并不意味着您想要它的意思。

然后它变得有点模糊。NPE 在您尝试`set`（不存在的）参数 1 时发生。但是如果您查看堆栈跟踪，它实际上是在一个名为`clearParameter`. 我没有寻找 MS JDBC 驱动程序的源代码，但我的**猜测**是准备好的语句解析器创建了一个占位符参数数组。但是，如果它没有找到任何东西，它就不会费心分配数组。这通常是无害的......但是如果您随后尝试设置占位符的值，则代码似乎没有正确检查，并且意外生成了 NPE。

无论哪种方式，在这种情况下抛出 NPE 对 JDBC 驱动程序而言都是不良行为。我会称它为Bug！

**更新**

[我在这里](http://pag-www.gtisc.gatech.edu/chord//examples/jdk/sun/jdbc/odbc/JdbcOdbcPreparedStatement.java.html)找到了源代码，我的假设基本上是正确的……**除了**这是旧的 Sun 代码，而不是 Microsoft 代码。（从包名中*应该很明显......呃！）*

问题`boundParams`是`null`。如果您查看第 2727 行，则仅当占位符的数量大于零时才对其进行初始化。漏洞！

* * *

^(1 - 实际上，这是不行的，因为在这种情况下，您很可能会收到 SQL 错误，因为“字符串”与列的类型不匹配。但是当查询到达数据库服务器时执行该分析......对于许多 JDBC 驱动程序，直到您第一次实际执行查询时才会发生这种情况。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:44:55.890

删除参数标记 (?) 周围的引号。也不需要查询字符串末尾的分号：

```
"WHERE Locatiegegevens.[Locatiegegevens] = ?"); 
```

# android - 电子邮件附件图片无法发送

> ID：11881729
> 
> 赞同：1
> 
> 时间：2012-08-09T10:49:12.467
> 
> 标签：android, android-layout

编写了用于随附件发送电子邮件的代码。一旦我发送了这封电子邮件，它就会在附件中添加一个垃圾值。附加部分以不同格式编码。

```
Intent i = new Intent(android.content.Intent.ACTION_SEND);
i.setType("text/html");
i.putExtra(Intent.EXTRA_EMAIL, new String[] {"user_one@example.com", "user_two@example.com" });
i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
i.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + sPhotoFileName));
i.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(mailBody));
startActivity(Intent.createChooser(i, "Send mail...")); 
```

**预期：** 它应该是一个附加的图像文件而不是编码字符串。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:05:05.310

```
File jpegfile = new File(imageDir, "yourfilename.jpeg");

Uri jpegurl = Uri.fromFile(jpegfile);

Intent intent = new Intent(android.content.Intent.ACTION_SEND);
intent.setType("image/jpeg"); //
intent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] { "mailid@domain.com" });
intent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Mail Subject");
intent.putExtra(android.content.Intent.EXTRA_CC, new String[] { "mailid@domain.com" });
intent.putExtra(Intent.EXTRA_TEXT, "Mail body text");
intent.putExtra(Intent.EXTRA_STREAM, jpegurl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:58:58.393

您需要设置您的意图类型以正确处理图像，假设它是一个 png，如下所示。

```
Intent emailIntent = new Intent(Intent.ACTION_SEND, Uri.fromFile(temp));
emailIntent.setType("image/png");
emailIntent.putExtra(Intent.EXTRA_SUBJECT, getString(R.string.email_share_subject));
emailIntent.putExtra(Intent.EXTRA_TEXT, getString(R.string.email_share_message));
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(temp));
startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:38:04.053

```
i've done for send any file from SD card with mail attachment..

Intent sendEmail= new Intent(Intent.ACTION_SEND);
       sendEmail.setType("rar/image");
       sendEmail.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new        
         File("/mnt/sdcard/download/abc.rar")));
         startActivity(Intent.createChooser(sendEmail, "Email:")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:59:52.077

如果你在 sen 邮件上发送 Jpg 图像......只需写 i.setType("image/jpeg"); 并发送任何文件只需写 i.setType("image/*");

# iphone - applicationWillEnterForeground 中的内存泄漏

> ID：11881731
> 
> 赞同：0
> 
> 时间：2012-08-09T10:49:23.057
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller, uiapplicationdelegate

我的申请中有大约 9 个`ViewControllers`。我正在使用`presentModalViewController`. 每次用户进入后台并进入前台时，我都想显示第一个 ViewController。如果用户在第 8 个 ViewController 中进入后台并再次打开应用程序，我需要显示第 1 个 ViewController。

我在`applicationWillEnterForeground`

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    self.HomeScreenViewController = [[HomeScreenViewController alloc] initWithNibName:@"HomeScreenViewController" bundle:nil];
    self.window.rootViewController = _homeScreenViewController;
    [self.window makeKeyAndVisible];
} 
```

它显示内存泄漏。显然它会显示内存泄漏，因为我再次初始化 HomeCtrl，但我不知道如何修复它。谁能帮我 ？？我没有使用，`UINavigationController`因为 ViewControllers 是从右侧或左侧推送的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:58:00.733

改变：

```
self.HomeScreenViewController = [[HomeScreenViewController alloc] ....]; 
```

至

```
_HomeScreenViewController = [[HomeScreenViewController alloc] ....]; 
```

或者您可以执行以下代码：

```
HomeScreenViewController *tempHSVC = [[HomeScreenViewController alloc] ....];
self.HomeScreenViewController = tempHSVC;
[tempHSVC release];
self.window.rootViewController = self.HomeScreenViewController //or use just _homeScreenViewController;
[self.window makeKeyAndVisible]; 
```

并阅读一些关于 objc 中内存管理的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:07:32.337

我假设 HomeScreenViewController 属性被声明为

```
@property (nonatomic, retain) HomeScreenViewController *HomeScreenViewController 
```

保留属性的默认设置方法将为您保留对象。将 autorelease 添加到 alloc init：

```
self.HomeScreenViewController = [[[HomeScreenViewController alloc] initWithNibName:@"HomeScreenViewController" bundle:nil] autorelease]; 
```

另请参阅：[高级内存管理编程指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)

# css - CSS 中的高度为 100%

> ID：11881735
> 
> 赞同：0
> 
> 时间：2012-08-09T10:49:47.443
> 
> 标签：css

我有一个 3 栏网站。左侧和右侧，如果我放置 height: 100% 它只会填充到该列中内容的末尾。我希望它一直到页脚。因此不会在列和页脚之间留下开放空间。

添加， [http://jsfiddle.net/3vm2t/1/](http://jsfiddle.net/3vm2t/1/)

CSS

```
/* RIGHT COLUMN */
#rightcolumn{
float: left;
width: 20%; /*Width of right column in pixels*/
min-width: 200px;
height: 100%;
margin-left: -20%; /*Set margin to that of -(RightColumnWidth)*/
background: #5f5f5f;
color: White;
}

/* LEFT COLUMN */
#leftcolumn{
float: left;
width: 20%; /*Width of left column in percentage*/
min-width: 200px;
height: 100%;
margin-left: -100%;
background: #5f5f5f;
color: White;
} 
```

也以防万一

```
body{
margin:0;
padding:0;
line-height: 1.5em;
color: black;
height: 100%;
}

/*TOPSECTION */
#topsection{
background: url('../images/bannerBGbkup.jpg'), url('../images/bannerBGl.jpg');
background-position: left top, left top;
background-repeat: no-repeat, repeat;
height: 200px; /*Height of top section*/
color: White;
text-align:center;
min-width: 950px;
}

/* middle collumn */
#contentwrapper{
float: left;
width: 100%;
min-width: 1000px;
background: #919191;
}

#contentcolumn{
margin: 0 20% 0 20%; /*Margins for content column. Should be "0 RightColumnWidth 0 LeftColumnWidth*/
} 
```

我试图解释我在说什么，但对 css/html 还是有点陌生​​，但如果需要更多信息，请告诉我。不确定是否需要任何 html 代码？但如果生病更新。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:25:10.210

我认为你应该使用表格 html 布局来做你想做的事情。

您可以将列放在 中`<table>`，但我认为最干净的方法是使用`display: table-cell`CSS 属性。

我冒昧地编辑了您的 HTML/CSS 内容：http: [//jsfiddle.net/TxeJu/](http://jsfiddle.net/TxeJu/)

在左右块之间移动了“内容”块，添加了`display: table-cell`属性，并删除了您放在“内容”块中的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:37:36.967

```
<html>
 <head>
  <style type="text/css">
    html, body, div, span, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, img, ol, ul,
    li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {
     margin: 0;
     padding: 0;
     border: 0;
     font-size: 100%;
     font: inherit;
     vertical-align: baseline;
     font-family:Segoe UI, sans-serif;
    }
   .header, .container, .footer {
    min-height:100px;
   }
   .header {
    background-color:#757575;
   }
   .container {
       background-color:#cccccc;
   }
   .footer {
    background-color:#757575;   
   }
   .header, .footer, .column {
    text-align:center;
   }
   .column {
    float:left;
    min-width:300px;
    border-left:1px solid blue;
    border-right:1px solid blue;
    margin-left:10px;
   }
  </style>
  <script type="text/javascript">
   function headerContentFooter(headerRatio, footerRatio) {
    totalHeight = document.height;
    headerHeight = 0;
    containerHeight = 0;
    footerHeight = 0;
    if(headerRatio < 0.5 && footerRatio < 0.5) {
     headerHeight = totalHeight * headerRatio;
     footerHeight = totalHeight * footerRatio;
     containerHeight = totalHeight - (headerHeight + footerHeight);
     document.getElementsByClassName("header")[0].style.height = "" + headerHeight + "px";
     document.getElementsByClassName("container")[0].style.height = "" + containerHeight + "px";
     document.getElementsByClassName("footer")[0].style.height = "" + footerHeight + "px";
     document.getElementsByClassName("header")[0].style.minHeight = "" + headerHeight + "px";
     document.getElementsByClassName("container")[0].style.minHeight = "" + containerHeight + "px";
     document.getElementsByClassName("footer")[0].style.minHeight = "" + footerHeight + "px";
     document.getElementsByClassName("header")[0].style.maxHeight = "" + headerHeight + "px";
     document.getElementsByClassName("container")[0].style.maxHeight = "" + containerHeight + "px";
     document.getElementsByClassName("footer")[0].style.maxHeight = "" + footerHeight + "px";
    }
   }
  </script>
 </head>
 <body>
  <div class="header">HEADER</div>
  <div class="container">
   <div class="column">LEFT</div><div class="column">CENTER</div><div class="column">RIGHT</div>
  </div>
  <div class="footer">FOOTER</div>
  <script type="text/javascript">
   headerContentFooter(0.05, 0.05);
  </script>
 </body>
</html> 
```

* * *

嗨，我知道上面的代码不能回答你的问题，因为你的个人资料显示你可能不是 javascript 人，但有时 css 是不够的，你应该尝试**利用现代浏览器的巨大优势**，但如果你有更少时间，我们可以帮助你。 **请尝试上面的代码，因为它运行良好**

# jsp - 查询会话超时值

> ID：11881743
> 
> 赞同：0
> 
> 时间：2012-08-09T10:50:11.223
> 
> 标签：jsp

我正在使用 JSP 和 JAVA 开发一个 Web 项目。我必须将会**话超时设置为 infinity**。只有当用户的浏览器关闭时，会话才会过期。我该怎么做？

我需要您的建议，将会话超时设置为无限是否是一种好习惯。请提供您的意见。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:05:14.387

您可以通过在 web.xml 中添加这些行来在 web.xml 文件中指定会话超时

```
<session-config>
<session-timeout>30</session-timeout>
</session-config> 
```

该值以分钟为单位，它是一个非活动时间段，这意味着每当浏览器与服务器交互时都会刷新它。

具有无限值（不知道是否可能）强烈不推荐。您无法确定浏览器何时关闭，最后您可能会耗尽内存或存储大量无用的会话。

相反，您可以尝试在您的 html 或一些 ajax 请求中进行一些元刷新，以保持会话处于活动状态，尽管我不推荐这样做。只需在超时中设置一个高值即可。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:17:12.980

Servlet 规范中没有指定默认会话超时，它留给容器。

对于 tomcat，它是 30 分钟。一个人总是可以通过 DD 覆盖这个值？

```
<session-config> 
<session-timeout>600</session-timeout> 
</session-config> 
```

或者

`setMaxInactiveInterval()`通过HttpSession 对象上的方法以编程方式。

如果**会话超时设置为 -1，则会话生命周期将延长至无穷大，**即只要容器正在运行。

最后，如果应用程序的会话超时是无限的，那么您的会话将永远不会过期，所以这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:21:13.723

您可以尝试在您的 jsp 中使用下面的代码片段来点击一个 js 函数，该函数将调用一个 ajax 函数来点击服务器端组件。然后只需使用会话 API 使会话无效。

```
window.onbeforeunload = WindowClose; 

function WindowClose() { 

  //Write a AJAx request here to hit the server side servlet of any filter 

} 
```

或使用

```
<body onunload="WindowClose(); > 
```

在服务器端代码中，使用

```
HttpSession session = request.getsession();
session.setMaxInactiveInterval(0); //or session.invalidate(); 
```

同样如建议的那样，在 web.xml 中定义默认会话超时值将是一种很好的方法，以便在浏览器崩溃的情况下，会话将在规定的时间过去后失效。

# linux - Linux文件权限

> ID：11881744
> 
> 赞同：4
> 
> 时间：2012-08-09T10:50:12.090
> 
> 标签：linux, file-permissions, permission-denied

有一个进程在 root 用户下运行。

```
ps aux | grep ProcessX
root     11565  0.0  0.7  82120 22976 ?        Ssl  14:57   0:02 ProcessX 
```

现在`ls -l /proc/11565/`(pid ) 给出了这个结果。

```
total 0
dr-xr-xr-x 2 root root 0 Aug  9 16:06 attr
-rw-r--r-- 1 root root 0 Aug  9 16:06 autogroup
-r-------- 1 root root 0 Aug  9 16:06 auxv
-r--r--r-- 1 root root 0 Aug  9 16:06 cgroup
--w------- 1 root root 0 Aug  9 16:06 clear_refs
-r--r--r-- 1 root root 0 Aug  9 16:06 cmdline
-rw-r--r-- 1 root root 0 Aug  9 16:06 coredump_filter
-r--r--r-- 1 root root 0 Aug  9 16:06 cpuset
lrwxrwxrwx 1 root root 0 Aug  9 16:06 cwd -> /usr/local/bin
-r-------- 1 root root 0 Aug  9 16:06 environ
lrwxrwxrwx 1 root root 0 Aug  9 16:06 exe -> /usr/local/bin/ProcessX
dr-x------ 2 root root 0 Aug  9 16:06 fd
dr-x------ 2 root root 0 Aug  9 16:06 fdinfo
-r-------- 1 root root 0 Aug  9 16:06 io
-rw------- 1 root root 0 Aug  9 16:06 limits
-rw-r--r-- 1 root root 0 Aug  9 16:06 loginuid
-r--r--r-- 1 root root 0 Aug  9 16:06 maps
-rw------- 1 root root 0 Aug  9 16:06 mem
-r--r--r-- 1 root root 0 Aug  9 16:06 mountinfo
-r--r--r-- 1 root root 0 Aug  9 16:06 mounts
-r-------- 1 root root 0 Aug  9 16:06 mountstats
dr-xr-xr-x 6 root root 0 Aug  9 16:06 net
-r--r--r-- 1 root root 0 Aug  9 16:06 numa_maps
-rw-r--r-- 1 root root 0 Aug  9 16:06 oom_adj
-r--r--r-- 1 root root 0 Aug  9 16:06 oom_score
-rw-r--r-- 1 root root 0 Aug  9 16:06 oom_score_adj
-r--r--r-- 1 root root 0 Aug  9 16:06 pagemap
-r--r--r-- 1 root root 0 Aug  9 16:06 personality
lrwxrwxrwx 1 root root 0 Aug  9 16:06 root -> /
-rw-r--r-- 1 root root 0 Aug  9 16:06 sched
-r--r--r-- 1 root root 0 Aug  9 16:06 schedstat
-r--r--r-- 1 root root 0 Aug  9 16:06 sessionid
-r--r--r-- 1 root root 0 Aug  9 16:06 smaps
-r--r--r-- 1 root root 0 Aug  9 16:06 stack
-r--r--r-- 1 root root 0 Aug  9 16:06 stat
-r--r--r-- 1 root root 0 Aug  9 16:06 statm
-r--r--r-- 1 root root 0 Aug  9 16:06 status
-r--r--r-- 1 root root 0 Aug  9 16:06 syscall
dr-xr-xr-x 6 root root 0 Aug  9 16:06 task
-r--r--r-- 1 root root 0 Aug  9 16:06 wchan 
```

现在状态和地图的文件权限相同（`-r--r--r--`）。但是，当我向`cat /proc/11565/maps`非特权（非 root）用户发出问题时，它给了我一个被拒绝的权限。但是对于`cat /proc/11565/status`，它按预期输出。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T10:56:33.113

这是因为文件权限不是您遇到的唯一保护。

这些不仅仅是文件系统上的常规文本文件，`procfs`而是进入进程内部的窗口，您必须通过文件权限*以及*任何其他保护措施。

这些映射显示了有关内存使用情况以及可执行代码在进程空间中的位置的潜在危险信息。如果您研究 ASLR，您会发现这是一种防止潜在攻击者知道代码加载位置的方法，并且在`procfs`.

这种保护是[在 2007 年](http://lwn.net/Articles/225589/)添加的：

> 此更改在允许访问读取地图内容之前使用“ptrace_may_attach”实施检查。为了控制这种保护，添加了新的旋钮 /proc/sys/kernel/maps_protect，并对 procfs 文档进行了相应的更新。

在`ptrace_may_attach()`（实际上在它调用的函数之一中）包含以下代码：

```
if (((current->uid != task->euid) ||
     (current->uid != task->suid) ||
     (current->uid != task->uid) ||
     (current->gid != task->egid) ||
     (current->gid != task->sgid) ||
     (current->gid != task->gid))     && !capable(CAP_SYS_PTRACE))
   return -EPERM; 
```

这样，除非您具有相同的真实用户/组 ID、保存的用户/组 ID 和有效的用户/组 ID（即，没有偷偷摸摸`setuid`的东西）并且它们与拥有该进程的用户/组 ID 相同，否则您' 不允许查看该“文件”内部（除非您的进程`CAP_SYS_PTRACE`当然有能力）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-11T04:28:15.100

进程 uid 必须匹配 smaps uid，进程 gid 必须匹配 smaps gid。

```
$ ls -l /proc/15889/smaps /proc/16139/smaps
-r--r--r--. 1 oracle dba      0 Feb 10 16:42 /proc/15889/smaps
-r--r--r--. 1 oracle asmadmin 0 Feb 10 16:42 /proc/16139/smaps
$ wc /proc/15889/smaps /proc/16139/smaps
6851 23498 224275 /proc/15889/smaps
wc: /proc/16139/smaps: Permission denied
6851 23498 224275 total
$ id
uid=400(oracle) gid=400(dba) groups=400(dba),522(asmadmin),etc. 
```

environ、io 和所有内存映射相同。

# javascript - 库无法正确加载

> ID：11881745
> 
> 赞同：0
> 
> 时间：2012-08-09T10:50:15.067
> 
> 标签：javascript

我在 turn.js 的帮助下创建了一本翻书。

在我的本地机器上一切正常，但我将它加载到我的测试环境中。turn.js 构造函数不起作用。我有以下代码：

```
$('#flipbook').turn(); 
```

在我的测试环境中，我收到错误：

```
Uncaught TypeError: Object [object Object] has no method 'turn' 
```

你知道可能是什么问题吗，文件 turn.js 已加载（我在加载的资源中证明了它）。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:01:27.997

一定是因为它没有正确加载turn.js。

确保以正确的方式加载文件。

**确保首先加载 jQuery，然后是 turn.js，然后是您的代码。**

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="turn.js"></script>
<script type="text/javascript">
    $("#flipbook").turn();
</script> 
```

另外，当你说你确定 turn.js 正在加载时，你怎么知道？可以在firebug中查看turn.js中的代码吗？

# http - 在 mule 3.2 中接收和发送 multipart/form-data

> ID：11881750
> 
> 赞同：2
> 
> 时间：2012-08-09T10:50:28.413
> 
> 标签：http, mule

我在配置 Mule 3.2 时遇到问题，它基本上接收 HTTP POST（multipart/form-data）并路由有效负载，然后通过 HTTP POST（multipart/form-data）发送有效负载。究竟如何在 Mule 中完成这种任务？

以下是我的部分配置

```
<flow name="UserBridgeFlow" doc:name="UserBridgeFlow">
    <inbound-endpoint address="http://${local.server}/${user.context}/" exchange-pattern="request-response" connector-ref="STD_HTTP_CONNECTOR" doc:name="User Endpoint"/>
    <echo-component doc:name="Echo"/>
    <transformer ref="RouteTransformer" doc:name="Transformer Reference"/>
    <response>
        <message-properties-transformer overwrite="true" doc:name="Message Properties">
            <add-message-property key="Access-Control-Allow-Origin" value="*"/>
        </message-properties-transformer>
    </response>
    <response>
        <echo-component doc:name="Echo"/>
    </response>
    <http:outbound-endpoint exchange-pattern="request-response" address="http://${user.server}/#[header:OUTBOUND:real.path]" doc:name="HTTP User"/>
    <default-exception-strategy>
        <processor-chain> 
            <logger level="INFO" doc:name="Logger"/> 
        </processor-chain>
    </default-exception-strategy>
</flow> 
```

使用上述配置，我的二进制数据在到达另一个端点时总是损坏，并且我在浏览器（调用方端点）中收到此错误“*未声明纯文本文档的字符编码。该文档将在某些文本中呈现乱码如果文档包含 US-ASCII 范围之外的字符，则浏览器配置。文件的字符编码需要在传输协议中声明或文件需要使用字节顺序标记作为编码签名。* "

-- 更新配置 --

```
<context:property-placeholder location="classpath:/mule.properties"/>
<custom-transformer class="id.co.zire.ebs.mule.transformer.RouteTransformer" name="RouteTransformer" doc:name="RouteTransformer"/>
<http:connector name="STD_HTTP_CONNECTOR" enableCookies="true" validateConnections="true" clientSoTimeout="20000" serverSoTimeout="10000" doc:name="HTTP\HTTPS">
    <dispatcher-threading-profile maxThreadsActive="50" maxBufferSize="150"/>
    <reconnect count="3" frequency="2000"/>
</http:connector>
<flow name="HTTPBridgeFlow" doc:name="HTTPBridgeFlow">
    <composite-source>
        <inbound-endpoint exchange-pattern="request-response" address="http://${local.server}/${user.context}/" encoding="ISO-8859-1" connector-ref="STD_HTTP_CONNECTOR" doc:name="User Endpoint"/>
        <inbound-endpoint exchange-pattern="request-response" address="http://${local.server}/${cms.context}/" encoding="ISO-8859-1" connector-ref="STD_HTTP_CONNECTOR" doc:name="CMS Endpoint"/>
        <inbound-endpoint exchange-pattern="request-response" address="http://${local.server}/${ads.context}/" encoding="ISO-8859-1" connector-ref="STD_HTTP_CONNECTOR" doc:name="Ads Endpoint"/>
    </composite-source>
    <echo-component doc:name="Echo"/>
    <transformer ref="RouteTransformer" doc:name="Transform Header"/>
    <set-property propertyName="http.method" value="#[header:INBOUND:http.method]" doc:name="Copy HTTP method"/>
    <flow-ref name="HTTPResponseFlow" doc:name="HTTP Flow Reference"/>
</flow>
<sub-flow name="HTTPResponseFlow" doc:name="HTTPResponseFlow">
    <logger message="Payload Output : #[message.payload]" level="INFO" doc:name="Logger"/>
    <choice doc:name="Choice">
        <when expression="message.inboundProperties['http.context.path'] contains '${user.context}'">
            <processor-chain>
                <http:outbound-endpoint exchange-pattern="request-response" address="http://${user.server}/#[message.inboundProperties['http.relative.path']]" responseTimeout="120000" doc:name="HTTP User"/>
            </processor-chain>
        </when>
        <when expression="message.inboundProperties['http.context.path'] contains '${cms.context}'">
            <processor-chain>
                <http:outbound-endpoint exchange-pattern="request-response" address="http://${cms.server}/#[message.inboundProperties['http.relative.path']]" responseTimeout="120000" doc:name="HTTP CMS"/>
            </processor-chain>
        </when>
        <when expression="message.inboundProperties['http.context.path'] contains '${ads.context}'">
            <processor-chain>
                <http:outbound-endpoint exchange-pattern="request-response" address="http://${ads.server}/#[message.inboundProperties['http.relative.path']]" responseTimeout="120000" doc:name="HTTP Ads"/>
            </processor-chain>
        </when>
    </choice>
    <echo-component doc:name="Echo"/>
    <message-properties-transformer doc:name="Set Cross-Domain Request Allowed">
        <add-message-property key="Access-Control-Allow-Origin" value="*"/>
        <add-message-property key="Access-Control-Allow-Methods" value="GET, POST, OPTIONS"/>
        <add-message-property key="Access-Control-Max-Age" value="1000"/>
        <add-message-property key="Access-Control-Allow-Headers" value="Content-Type"/>
    </message-properties-transformer>
</sub-flow> 
```

好的，现在我已经更改了大部分配置，现在我在 HTTP POST 消息正文中传递包含的二进制数据时遇到了问题。Mule 似乎在将字节传递给出站端点之前对其进行了更改。我创建了一个自定义转换器来手动获取有效负载并解析有效负载中的二进制数据（顺便说一下，有效负载类型是字符串），但是从有效负载中检索到的二进制数据已经被更改。例如下面是十六进制原始文件字节的一部分：

ff d8 ff e0 00 10 4a 46 (ÿØÿà..JF)

但骡子转换成：

3f 3f 3f 3f 00 10 4a 46 (????..JF)

我认为是编码问题，也许 Mule 会自动将其转换为 UTF-8

-- RouteTransformer.java --

```
public class RouteTransformer extends AbstractMessageTransformer{
    private static final String MULE_CONFIG = "/mule.properties";
    private static final String CLIENT_IP = "MULE_REMOTE_CLIENT_ADDRESS";
    private static final String CLIENT_IP_HEADER = "Client-Ip";
    private static final String IP_REGEX = "/?((\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3}))(:(\\d{1,5}))?";
    private final String[] PASSING_HEADER;

    public RouteTransformer() throws IOException{
        Properties prop = new Properties();
        prop.load(getClass().getResourceAsStream(MULE_CONFIG));
        PASSING_HEADER = prop.getProperty("passing-header").split("\\s*,\\s*");
    }

    public Object transformMessage(MuleMessage message, String outputEncoding) throws TransformerException{
        // Copy 'passing' header
        for(int i=PASSING_HEADER.length; --i>=0; ){
            String headerName = PASSING_HEADER[i];
            Object val = message.getInboundProperty(headerName);
            if(headerName.equals(CLIENT_IP)){
                String s = (String) val;
                Pattern p = Pattern.compile(IP_REGEX);
                Matcher m = p.matcher(s);
                if(!m.matches()) continue;
                else{
                    headerName = CLIENT_IP_HEADER;
                    val = m.group(1);
                }
            }
            if(val != null) message.setOutboundProperty(headerName, val);
        }

        // Routing message
        String requestString = message.getInboundProperty("http.request");
        String contextPath = message.getInboundProperty("http.context.path");
        if(requestString != null && contextPath != null)
            message.setOutboundProperty("http.real.path", requestString.substring(contextPath.length()));

        return message;
    }
} 
```

-- 多部分/表单数据示例 --

```
-----------------------------20037128598723
Content-Disposition: form-data; name="name"

Angga
-----------------------------20037128598723
Content-Disposition: form-data; name="adsImage"; filename="Penguins.jpg"
Content-Type: image/jpeg

ÿØÿà..JF -- and the rest of bytes -- 
```

我希望有人可以提出一些解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:42:26.477

在您的内容类型中，您必须添加`charset=utf-8`：

```
response.setContentType("application/json; charset=utf-8")

Content-Type: application/json; charset=utf-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:33:23.937

我想知道您面临的问题是否与出站 HTTP 交互中缺少内容类型（或其默认值）有关。

尝试添加一个消息属性转换器（*或为阅读此内容的 3.3.x 用户添加一个复制属性消息处理器*）以将“Content-Type”属性从入站范围复制到出站范围。

此外，为了严格起见，请将此端点配置为使用 POST 方法。

# ios - MFMailComposeViewController 的替代品？

> ID：11881751
> 
> 赞同：3
> 
> 时间：2012-08-09T10:50:30.870
> 
> 标签：ios, mfmailcomposeviewcontroller

是否有替代 MFMailComposeViewController 具有或多或少相同功能的替代方案，但这将让我自己处理电子邮件的发送，在 Apple 的电子邮件发送系统之外？

我想做的是提供一个漂亮的电子邮件对话，然后通过 CRM 系统而不是直接从 iPad 发送。

干杯

尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:25:54.390

是的，您可以使用 MailCore 框架。您可以自己处理电子邮件的发送。在发送邮件之前，您必须设置其字段，例如 To、CC、BCC、Subject、body 等，然后通过以下代码发送。

```
CTCoreMessage *msg = [[CTCoreMessage alloc] init];
[CTSMTPConnection sendMessage:msg server:[server stringValue] username:[username stringValue]
                         password:[password stringValue] port:[port intValue] useTLS:tls useAuth:auth];
 [msg release]; 
```

它对我有用。希望对你有帮助。。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:05:17.083

您将需要创建自己的电子邮件视图和处理程序。您可以使用类似 JSTokenField 的东西：[https](https://github.com/jasarien/JSTokenField) ://github.com/jasarien/JSTokenField来获取邮件“收件人：”字段的功能。

# c# - 泛化存储库接口

> ID：11881753
> 
> 赞同：0
> 
> 时间：2012-08-09T10:50:32.963
> 
> 标签：c#, interface, generic-interface

任何人都可以提出一种通用化以下接口的方法，这样我就可以拥有一个接口，而不是每个存储库一个。

```
public interface IClass1Repository
{
    Class1 NewEntity();
    Class1 AddOrUpdate(Class1 entity);
    Class1 GetById(int Id);
    Class1 GetByNavigation(string NavigationString);
    IQueryable<Class1> All();
}

public interface IClass2Repository
{
    Class2 NewEntity();
    Class2 AddOrUpdate(Class2 entity);
    Class2 GetById(int Id);
    Class2 GetByNavigation(string NavigationString);
    IQueryable<Class2> All();
}

public interface IClass3Repository
{
    Class3 NewEntity();
    Class3 AddOrUpdate(Class3 entity);
    Class3 GetById(int Id);
    Class3 GetByNavigation(string NavigationString);
    IQueryable<Class3> All();
}

public interface IClass4Repository
{
    Class4 NewEntity();
    Class4 AddOrUpdate(Class4 entity);
    Class4 GetById(int Id);
    Class4 GetByNavigation(string NavigationString);
    IQueryable<Class4> All();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:51:39.780

试试这个：

```
public interface IRepository<T>
{
    T NewEntity();
    T AddOrUpdate(T entity);
    T GetById(int Id);
    T GetByNavigation(string NavigationString);
    IQueryable<T> All();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:52:57.613

会这样做吗：

```
public interface IRepository<T>
{
    T NewEntity();
    T AddOrUpdate(T entity);
    T GetById(int Id);
    T GetByNavigation(string NavigationString);
    IQueryable<T> All();
} 
```

# iphone - iPhone - 将产品名称更改为非美国字符会导致崩溃

> ID：11881757
> 
> 赞同：3
> 
> 时间：2012-08-09T10:50:44.927
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

我的应用程序过去工作得很好。当我将产品名称更改为非美国字符时，出现了 2 个非常奇怪的问题：

1.  当我触摸 UITextField 时，应用程序崩溃。
2.  应用程序无法播放保存到磁盘的声音。

问题（1）之前已经提到过，但我不明白它为什么会发生以及如何解决它。查看最后一条评论：[UITextField 在 iOS 5 中导致崩溃，在 iOS 4 中运行良好](https://stackoverflow.com/questions/8145491/uitextfield-causes-crash-in-ios-5-works-fine-in-ios-4/9163651#9163651)

如果我回到英语，一切都会好起来的。但我需要一个非美国字符的应用程序名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:15:06.217

I don't know where you have changed Your product name. As per my knowledge you have to change the value of key 'Bundle name' in '<>-Info.plist' file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:45:11.387

我找不到关于产品名称中允许的字符集的任何特定规则，但为了安全起见，我会将其保留为 ASCII，并使用您的捆绑显示名称（和/或捆绑名称）对名称进行任何自定义Info.plist 文件。这将使您可以为不同的用户语言使用不同的应用程序名称（我假设您想要本地化的应用程序名称）。

至于实际导致您的应用程序崩溃的原因，可能是捆绑路径被破坏，因为您的产品名称中有非 ASCII 字符，但我没有证据。试试上面的建议，看看它是否适合你。

# php - 在用户点击时显示来自数据库的特定单条记录

> ID：11881763
> 
> 赞同：1
> 
> 时间：2012-08-09T10:50:52.120
> 
> 标签：php, database

我有一个表格，我能够从数据库中检索数据并显示它。在显示时我只使用了 5 个列来显示，我希望如果用户单击其中的特定行，那么应该打开新窗口，其中只包含指定的数据那个用户.?? 我在表中有 20 列，并且 id 具有自动增量？如何显示指定给用户单击的特定ID的数据..？？当用户第一次查看有 5 列的表并想要更多详细信息时，他应该单击该行，然后应该只显示属于该 ID 的数据。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:01:59.290

您应该有一个单独的页面，它将显示您选择的条目的数据，因此：

第一页将包含一个数据库选择和一个循环，如：

```
$query = mysql_query("SELECT field_id, field_name, etc FROM table");
while($row = mysql_fetch_array($query)) {
   echo '<a href="/path/to/show-info.php?id=' . $row['field_id'] . '">' . $row['field_name'] . '</a><br />';
} 
```

`show-info.php`应该有一个基于`id`url 的数据库选择：

```
$query = mysql_query("SELECT * FROM table WHERE field_id='" . mysql_real_escape_string($_GET['id']) . "'");
if(mysql_num_rows($query) == 0)
    echo 'There is a problem showing you more info about this product';
else {
    $row = mysql_fetch_array($query);

   // do something with your extracted data

} 
```

# vba - 获取范围的列索引

> ID：11881764
> 
> 赞同：7
> 
> 时间：2012-08-09T10:50:54.850
> 
> 标签：vba, excel

在下面的子代码中，我想将它的作用（替换超链接中的子字符串）限制为特定的列。我在 '* 中写了我的快速修复想法。但我似乎找不到**一种将单元格的列值保存为 Range 变量的好方法。**

```
Dim MyDoc As Worksheet
Dim MyCell As Range
    ...
        For Each MyCell In MyDoc.UsedRange
            If MyCell.Hyperlinks.Count > 0 Then
               '* if mycell's columnnumber = 1 then
                    LinkURL = MyCell(1).Hyperlinks(1).Address
                    FindPos = InStr(1, LinkURL, FindString)
                    If FindPos > 0 Then 'If FindString is found
                        ReplaceLen = Len(FindString)
                        URLLen = Len(LinkURL)
                        PreStr = Mid(LinkURL, 1, FindPos - 1)
                        PostStr = Mid(LinkURL, FindPos + ReplaceLen, URLLen)
                        NewURL = PreStr & ReplaceString & PostStr
                        MyCell(1).Hyperlinks(1).Address = NewURL 'Change the URL
                    End If
               '* End if
            End If
         Next MyCell 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T10:57:09.950

您可以简单地调用该`Column`属性：

```
If MyCell.Column = 1 Then ... 
```

这是绝对列（电子表格的 A 列），而不是范围的第一列。

如果要检查是否是范围的第一列，可以先计算一下：

```
firstCol = yourRange.Cells(1, 1).Column
If MyCell.Column = firstCol Then ... 
```

# html - 表单中的 CSS 定位帮助文本

> ID：11881766
> 
> 赞同：0
> 
> 时间：2012-08-09T10:51:01.293
> 
> 标签：html, css

我需要将帮助文本放置在标签下方，并且发现很难让 CSS 正确。

我已经创建了下面的 jsfiddle 作为示例。

要求是：

1.  标签左对齐
2.  帮助文本直接显示在其下方
3.  输入和选择控件出现在同一行

[http://jsfiddle.net/brendan_rice/paSR2/2/](http://jsfiddle.net/brendan_rice/paSR2/2/)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:53:59.090

稍微重新调整了您的代码和 css，请参见此处：

[http://jsfiddle.net/paSR2/9/](http://jsfiddle.net/paSR2/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:57:38.060

请检查，

[http://jsfiddle.net/paSR2/4/](http://jsfiddle.net/paSR2/4/)

**变化**

```
label {
display: block;
font-size: .9em;
float: left;
clear: left;
width: 52px; <----- /*changed*/
margin: 0px;
padding: 0px
} 
```

**没有硬编码宽度**

```
label {
display: block;
font-size: .9em;
float: left;
clear: left;
margin: 0px;
padding-right: 5px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:02:57.440

我对你的设计做了一些修改：

[http://jsfiddle.net/paSR2/13/](http://jsfiddle.net/paSR2/13/)

这就是你所追求的吗？

# git - 是否有任何合并工具可以自动合并对同一行所做的更改（但在不同的地方）

> ID：11881768
> 
> 赞同：2
> 
> 时间：2012-08-09T10:51:16.550
> 
> 标签：git, merge

这是一种特殊情况，我知道在一般情况下（即计算机代码），将两个更改自动合并到不同分支中的同一行是不安全的。

但是，在这种情况下，有问题的行是一个英文句子，并且变化是产品化。一个例子：

合并基础：

> 从您的 iPhone 或 Android 手机中查找推文，或编写您自己的推文！

分支 1：

> 从您的 iPhone 或 Android 手机中查找 %(PRODUCT:MESSAGE_PLURAL)s，或撰写您自己的推文！

分支 2：

> 从您的 iPhone 或 Android 手机中查找推文，或编写您自己的 %(PRODUCT:MESSAGE)s！

这是一个手动合并的简单案例，但不幸的是，我们现在正在生成大量此类冲突。有没有可以做到这一点的合并工具？（或任何其他自动化此过程的方式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:07:30.887

我尝试在我选择的合并工具 Araxis Merge 中执行此操作，但结果是空的。

Beyond Compare 论坛最近有一个关于此的问题：[http](http://www.scootersoftware.com/vbulletin/showthread.php?t=9411) ://www.scootersoftware.com/vbulletin/showthread.php?t= 9411 请注意，Beyond Compare 的开发人员甚至不知道有这样的工具。

几个选项：Araxis Merge 和（我相信）Beyond Compare 都允许您使用正则表达式控制合并结果。你可以探索一下。

另外的选择，`git diff branch1..branch2 -U99999 --word-diff > file.txt`

然后您将拥有的是：从您的 iPhone 或 Android 手机中查找 [-%(PRODUCT:MESSAGE_PLURAL)s-]{+tweets+}，或编写 [-tweet-]{+%(PRODUCT:MESSAGE)s+}你自己！

我不是真正的开发人员，但如果我是，我想我可以编写一个正则表达式来识别`[-*-]`or的实例`{+*+}`，剥离这些字符并根据 的存​​在交替保存或删除内容`$(*)`，这似乎是产品化中的一个共同元素。

如果有很多文件，这可能会很痛苦，因为它需要将`> file.txt`输出映射到相关文件的额外步骤。

可能的解决方案：`git ls-files -u | git diff branch1..branch2 -U99999 --word-diff > ./intermediate/filename`

该代码是错误的，但是您应该能够编写一个 bash 脚本来获取所有未合并的文件，将每个文件的差异与整个文件的上下文价值保存到一个中间文件中，并使用原始文件名。

其他选项：

您可以像往常一样合并分支，但是根据上面的逻辑编写一个脚本来为您解决合并冲突，尽管增加了多行的复杂性，解析 <<<<<<, =======, >>>>>等

比我更有经验的人也可以利用`git-filter-branch`

# c# - 将 AvalonDock 从 1.3 升级到 2.0

> ID：11881770
> 
> 赞同：11
> 
> 时间：2012-08-09T10:51:18.470
> 
> 标签：c#, wpf, avalondock

我正在尝试将应用程序中的 AvalonDock 从 1.3 升级到 2.0，但几乎没有这方面的文档。

我看简单，通过这样做导入它

```
xmlns:avalonDock="http://avalondock.codeplex.com" 
```

然而这并没有奏效。

```
Error   The tag 'DockingManager' does not exist in XML namespace 'http://avalondock.codeplex.com'. Line 41 Position 10. 
```

我也尝试过旧方法。

```
xmlns:avalonDock="clr-namespace:AvalonDock;assembly=AvalonDock" 
```

这也没有工作

```
Error   The tag 'ResizingPanel' does not exist in XML namespace 'clr-namespace:AvalonDock;assembly=AvalonDock'. Line 71 Position 22. 
```

如果他们重命名了控件，那么拥有一个现在存在于 2.0 中的控件列表将会很有用。

我试图按原样编译简单的代码，但没有成功。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-28T13:30:58.887

我通过替换解决了这个问题

`xmlns:avalonDock="http://avalondock.codeplex.com"`

经过

`xmlns:avalonDock="http://schemas.xceed.com/wpf/xaml/avalondock"`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T14:05:23.287

当前唯一可用的文档是可从 codeplex 下载的 AvalonDock 示例。[http://avalondock.codeplex.com/releases](http://avalondock.codeplex.com/releases)

除此之外，智能感知是一个有用的指南。

==================================================== ==========

您看到的“DockingManager”错误具有误导性，因为它仍然存在于 2.0 中。以下内容可能会帮助您摆脱这些。此外，一旦解决此问题，智能感知将开始工作。

从互联网下载的文件会发生不好的事情。它们具有导致访问受限的属性。您必须手动删除此属性才能使 XAML 停止大惊小怪。

在 Windows 资源管理器中，右键单击文件，选择属性，然后单击“取消阻止”按钮。对您正在使用的从 Internet 下载的每个单独文件执行此操作。请务必重建项目以替换 bin 文件夹中的阻止副本。

附带说明一下，只要有问题，我仍然可以运行该项目。只有 XAML 编辑器认为有问题。

==================================================== ==========

在 2.0 中，所有内容都嵌套在布局控件中。您的所有窗格都是可锚定的或文档样式。这是一个让你开始的快速示例。

**定义你的命名空间**

```
xmlns:ad="http://avalondock.codeplex.com" 
```

**构建你的对接管理器**

```
<ad:DockingManager x:Name="dockManager">
    <ad:LayoutRoot>
        <ad:LayoutPanel Orientation="Horizontal">
            <ad:LayoutPanel Orientation="Vertical">
                <ad:LayoutPanel Orientation="Horizontal">
                    <ad:LayoutDocumentPaneGroup x:Name="leftDocumentGroup">
                        <ad:LayoutDocumentPane>
                            <ad:LayoutDocument Title="Left Doc"></ad:LayoutDocument>
                        </ad:LayoutDocumentPane>
                    </ad:LayoutDocumentPaneGroup>
                    <ad:LayoutDocumentPaneGroup x:Name="rightDocumentGroup">
                        <ad:LayoutDocumentPane>
                            <ad:LayoutDocument Title="Right Doc"></ad:LayoutDocument>
                        </ad:LayoutDocumentPane>
                    </ad:LayoutDocumentPaneGroup>
                </ad:LayoutPanel>
                <ad:LayoutAnchorablePaneGroup x:Name="bottomAnchorableGroup">
                    <ad:LayoutAnchorablePane>
                        <ad:LayoutAnchorable Title="Bottom Anch"></ad:LayoutAnchorable>
                    </ad:LayoutAnchorablePane>
                </ad:LayoutAnchorablePaneGroup>
            </ad:LayoutPanel>
            <ad:LayoutAnchorablePaneGroup x:Name="rightAnchorableGroup">
                <ad:LayoutAnchorablePane>
                    <ad:LayoutAnchorable Title="Right Anch"></ad:LayoutAnchorable>
                </ad:LayoutAnchorablePane>
            </ad:LayoutAnchorablePaneGroup>
        </ad:LayoutPanel>
    </ad:LayoutRoot>
</ad:DockingManager> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-04T15:36:25.217

您可以使用以下命令添加对最新 AvalonDock 版本的引用。所以你必须在 Visual Studio的**包管理器控制台上输入这个命令**

```
Install-Package AvalonDock 
```

**您可以在工具**菜单中的 vs 上找到此窗口，选择**库包管理器**，然后单击**包管理器控制台**。（[更多细节](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)）

然后它将自动添加对您项目的所有引用！

也替换此行

```
xmlns:avalonDock="http://avalondock.codeplex.com" 
```

经过

```
xmlns:avalonDock="http://schemas.xceed.com/wpf/xaml/avalondock" 
```

正如保罗·吉伦所描述的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T15:56:07.487

当我第一次切换到 AvalonDock 2.0 时，我收到了类似的错误消息。这可能是一个很长的镜头，但是您的网络驱动器上有 AvalonDock.dll 吗？我发现一旦我将 DLL 移动到我的项目目录中，我就不再有这个问题了。

[.NET 程序集在网络驱动器上以部分信任的方式运行，但所有其他程序都以完全信任的方式运行](https://stackoverflow.com/a/4828205/918431)

（我会将此答案添加为评论，但我没有代表添加评论。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-03T01:08:18.733

您需要将命名空间定义为 xmlns:avalonDock="http://schemas.xceed.com/wpf/xaml/avalondock"

您还需要确保您的项目配置为使用 .NET 4 或更高版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-07T14:19:52.187

就我而言，我有两个问题，首先是文件被阻止，必须通过从文件资源管理器中解除阻止来解决。

[![在此处输入图像描述](../Images/bfa1191ffeddc056f0c90bdc254e43df.png)](https://i.stack.imgur.com/zVZcq.jpg)

其次，我不得不更改对新地址的引用。[从AvalodDock 文档](http://avalondock.codeplex.com/wikipage?title=AvalonDock%202.0%20Getting%20Start%20Guide&referringTitle=Documentation)中列出的以下链接更改

```
xmlns:avalonDock="http://avalondock.codeplex.com" 
```

到新链接

```
xmlns:avalonDock="http://schemas.xceed.com/wpf/xaml/avalondock" 
```

这也出现在 Intellisense 中

[![在此处输入图像描述](../Images/39263e27b0a670fd4cbaaf8d1c2fde38.png)](https://i.stack.imgur.com/95bnB.jpg)

我在跑。

AvalonDock 版本：2.0.2000.0

.NET 框架 4.6.1

# linux - 在 Debian 上安装 ImageMagick

> ID：11881773
> 
> 赞同：5
> 
> 时间：2012-08-09T10:51:27.010
> 
> 标签：linux, unix, imagemagick, debian

我正在尝试在 Debian 上安装 ImageMagick 库。下载解压包后，我运行 ./configure 命令（在 ImageMagick 目录和根目录下），它失败并出现一些错误（在 config.log 中）：

```
conftest.c:14:28: error: ac_nonexistent.h: No such file or director
conftest.c:79: error: expected ';', ',' or ')' before 'text'
conftest.c: In function 'main':
conftest.c:133: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'newvar'
conftest.c:133: error: 'newvar' undeclared (first use in this function)
conftest.c:133: error: (Each undeclared identifier is reported only once
conftest.c:133: error: for each function it appears in.) 
```

我做错了什么？谢谢

UPD：版本 6.7.8-8

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-09T10:59:48.503

您可以尝试以下操作（在控制台中），而不是自己下载和配置包：

```
aptitude update &&  aptitude install imagemagick 
```

自从我使用 debian 以来已经有一段时间了，但我认为这应该可以工作。

# php - php - 如何在面板中为管理员提供自己的部分？

> ID：11881775
> 
> 赞同：0
> 
> 时间：2012-08-09T10:51:30.300
> 
> 标签：php, database, roles

我在 php.ini 中的用户/登录面板有一点问题。如果客人在他的面板中看到我的页面，他可以选择登录和注册。用户看到他们的成员面板如下：

（有一些 IF 函数，确保基础中没有会话 id，然后显示来宾选项）

```
 <?php
        else:
        ?>

<div> 
<h1>Members panel</h1>
<p>You can put member-only data here</p>
<p><a href="registered.php">View a member page</a></p>           
<p><a href="changepass.php">Edit your password</a></p>
<p>-----</p>
<a href="?logoff">Log off</a> 
```

现在：在我的用户数据库中，我有一个名为 ROLE 的列。有用户和管理员等角色。我想让管理员看到该面板中的另一个部分。我正在尝试使用另一个 switch/case 和 IF 指令，例如：

```
 <?php
                  if (isset($_SESSION['role']) && ($_SESSION['role'] =='admin')); 
                  {    
                  }
                  ?>
                  (there is member panel) 
                  <div class="left right">      
        <h1>Administrator panel</h1>
        <a href="admin.php">View an admin page</a> 
```

但它不起作用。（我有会话变量角色。）有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:33:18.597

首先你应该分开查看和控制，即不要将php 代码放在你的html 文件中。有很多可能性可以保持这种清洁度。例如，[SMARTY](http://www.smarty.net/)框架非常流行。

其次，角色是如何写入您的 $_SESSION 的（为什么？）。你最好通过你的数据库记录集。伪：

```
$rs = db->query(SELECT * FROM users ORDER BY userID)
if ($rs[&currentUserID]['role'] == 'admin') {
  ...
} 
```

第三：如果你弄乱了 php 和 html，你至少应该在一个单独的区域生成你的 php（显然在任何输出之前）并输出你的 HTML，例如使用 heredoc 语法：

```
<?php
  // do any PHP stuff here
  $panel = 'user logged in';
  if (admin) {
    $panel .= "i'm an admin";
  }
echo <<<OUT
<!DOCTYPE html>
<html>
  ... // put all HTML in here and use variables

  <body>
    <div>$panel</div>
  </body>
</html>
OUT;
?> 
```

PS：请删除css标签，因为您的问题与它无关

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:57:54.803

您可以尝试删除';' 如果之后

```
<?php
  if (isset($_SESSION['role']) && ($_SESSION['role'] =='admin')) {    
?>
<!--ADMIN PANEL GOES HERE-->
<?php
    } else {
?>
<!---USER PANEL GOES HERE-->
<?php
    }
?> 
```

# php - $post in Kohana 视图

> ID：11881780
> 
> 赞同：-1
> 
> 时间：2012-08-09T10:51:41.747
> 
> 标签：php, kohana

我写了一个表单代码，值正确保存在数据库中：

```
<?php echo Form::open();  ?>
<?php echo Form::label('name', 'Name') ?>
<?php echo Form::input('name', $post['name']) ?>
<input type="submit" name="Submit">
<?php echo Form::close(); ?> 
```

但我有一个问题，我有一个错误 - 注意：未定义的变量：C:\xampp\htdocs\example\application\views\contact\contact.php 中的名称第 51 行

```
<?php echo Form::input('name', $post['name']) ?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:12:21.720

当您第一次加载页面时，这些值不会在帖子中出现。所以你需要检查帖子是否设置。

```
<?php echo Form::open();  ?>
<?php echo Form::label('name', 'Name') ?>
<?php echo Form::input('name', isset($post['name'])?$post['name']:"" ) ?>
<input type="submit" name="Submit">
<?php echo Form::close(); ?> 
```

所以现在如果 $post['name'] 设置它会给出帖子值。其他方面没问题。

# android - android中的内部阴影

> ID：11881781
> 
> 赞同：2
> 
> 时间：2012-08-09T10:51:45.070
> 
> 标签：android, android-layout

我如何在右侧设置内阴影`LinearLayout`？

如下所示：

[![图片](../Images/bc681568c8f594253c49520bd8335650.png)](https://i.stack.imgur.com/j6fSJ.png)
[（来源：[part.lt](http://www.part.lt/img/de00b7d49da222d110c0b2c5fd23c7f3567.png)）]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:01:41.967

您可以只使用带有渐变背景的简单视图。

这个渐变可以是一个可绘制的形状，例如

```
 <shape>
   <gradient android:startColor="#000000" android:endColor="#FFFFFF" android:angle="90"/>
 </shape> 
```

你只需要为你的阴影设置适当的角度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T06:35:55.493

创建一个可绘制文件并将视图用作背景。

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle">
        <gradient
            android:startColor="#72CA5C54"
            android:centerColor="#43F71803"
            android:endColor="#272525"
            android:angle="45"/>

    </shape> 
```

# mysql - gem install mysql：无法构建 gem 本机扩展（Mac Lion）

> ID：11881785
> 
> 赞同：5
> 
> 时间：2012-08-09T10:51:55.643
> 
> 标签：mysql, macos, compilation

我为 Mac OS X Lion 安装了 MySQL 5.5.27（来自 .dmg）。

现在我尝试安装 mysql gem：

```
$ gem install mysql
Building native extensions.  This could take a while...
ERROR:  Error installing mysql:
    ERROR: Failed to build gem native extension.

/Users/serg/.rvm/rubies/ree-1.8.7-head/bin/ruby extconf.rb
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lm... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lz... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lsocket... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lnsl... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lmygcc... no
checking for mysql_query() in -lmysqlclient... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/serg/.rvm/rubies/ree-1.8.7-head/bin/ruby
    --with-mysql-config
    --without-mysql-config
    --with-mysql-dir
    --without-mysql-dir
    --with-mysql-include
    --without-mysql-include=${mysql-dir}/include
    --with-mysql-lib
    --without-mysql-lib=${mysql-dir}/lib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mlib
    --without-mlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-zlib
    --without-zlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-socketlib
    --without-socketlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-nsllib
    --without-nsllib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mygcclib
    --without-mygcclib
    --with-mysqlclientlib
    --without-mysqlclientlib

Gem files will remain installed in /Users/serg/.rvm/gems/ree-1.8.7-head/gems/mysql-2.8.1 for inspection.
Results logged to /Users/serg/.rvm/gems/ree-1.8.7-head/gems/mysql-2.8.1/ext/mysql_api/gem_make.out 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T13:24:48.500

好的，这是我的解决方案：

```
1) I installed homebrew.
2) $ brew install mysql
3) $ gem install mysql 
```

就这些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T10:57:45.657

看起来 gem 安装程序找不到您的 MySQL 库/头文件。

尝试指定 MySQL 目录，例如

```
gem install mysql -- --with-mysql-dir=/usr/local/mysql 
```

（您可能需要弄清楚 MySQL 的 DMG 发行版的安装位置，YMMV。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T18:31:30.330

```
gem install mysql -- --with-mysql-dir=/usr/local/mysql 
```

# c# - Wpf 控件显示 htmlcode

> ID：11881789
> 
> 赞同：2
> 
> 时间：2012-08-09T10:52:07.437
> 
> 标签：c#, asp.net, .net, html, wpf

我在服务器上使用 Hit 并将内容获取到`Streamer`. 然后我使用一个字符串来获取网站的 Html 代码。我必须在 WPF 应用程序中使用它。我应该使用哪个控件来放置一个包含 html 代码的 url，以显示在我的 wpf 和 HOW 中？

```
 string urlcode;
        HttpWebRequest request = WebRequest.Create("http://google.com/") as HttpWebRequest;
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;
        StreamReader streamr = new StreamReader(response.GetResponseStream());
        urlcode = streamr.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:31:23.897

在预览选项卡上嵌入 WebBrowser 控件，并使用 NavigateToString 或 NavigateToStream 方法将 HTML 传递到其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:17:34.947

使用[WebBrowser](http://msdn.microsoft.com/en-us/library/cc491073)控件及其[NavigateToStream](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.navigatetostream)方法：

XAML：

```
<Grid>
    <WebBrowser Name="webBrower"/>
</Grid> 
```

代码：

```
WebRequest request = WebRequest.Create("http://google.com");
webBrower.NavigateToStream(request.GetResponse().GetResponseStream()); 
```

这是一个简化的例子。导航完成后，您至少必须关闭/处置响应对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:03:06.150

使用 a`NavigationWindow`来包含页面。然后，您可以调用该`Navigate(Uri)`方法从一个页面遍历到另一个页面。

[MSDN入口](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T11:57:43.903

您可以使用 Web 浏览器控件，将包含 HTML 控件的字符串传递给它的 NavigateToString 方法

```
 webB.NavigateToString(@"<html>HTML code go here </html>"); 
```

# android - Android：如何在没有 XML 的情况下管理多个视图

> ID：11881794
> 
> 赞同：0
> 
> 时间：2012-08-09T10:52:23.570
> 
> 标签：android, xml, android-layout

我正在写一个应用程序。我创建了自己的扩展 View 的类，然后`setContentView(new MyView());`. 有时我想绘制带有选项的弹出窗口。现在我用形状绘制它。我想知道有没有办法制作另一个 View 或 View-like-class 并将其用作弹出窗口？
另一个问题：我可以在我自己的视图中使用 EditText，也没有 XML 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:04:50.660

是的，您可以使用 addView 方法并放置新的 EditText，但请确保布局参数。

# python - 如何从 logging.Handler 继承以登录到 GtkTextView？

> ID：11881795
> 
> 赞同：1
> 
> 时间：2012-08-09T10:52:31.120
> 
> 标签：python, logging

我对 Python 比较陌生，我正在开发我的第一个 Python GUI（慢慢地）。我想使用的第三方模块之一使用[Python 的`logging`framework](http://docs.python.org/library/logging.html)。我希望他们的日志转到`GtkTextView`. 我知道他们的`logger`变量在哪里，所以可以调用`logger.addHandler`.

我如何`logging.Handler`正确继承？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:21:47.257

我基于来源的实现`StreamHandler`是

```
class GtkTextViewHandler(logging.Handler):
  def __init__(self, tv):
    logging.Handler.__init__(self)
    self.tv = tv
    self.tbf = tv.get_buffer()
    self.formatter = None

  def emit(self, record):
    try:
      msg = self.format(record)
      fs  = "%s\n"
      self.tbf.insert(self.tbf.get_end_iter(), fs % msg)
      self.tv.scroll_to_iter(self.tv.get_end_iter(), 0.0, False, 0, 0)
    except:
      self.handleError(record) 
```

# sql - PostgreSQL 二维数组交集

> ID：11881796
> 
> 赞同：0
> 
> 时间：2012-08-09T10:52:43.477
> 
> 标签：sql, arrays, postgresql, intersection

postgres 工具可以与二维数组相交吗？

例如我有：

```
id               arr
1    {{1,2}, {3,4}, {4,5}, {4,7}}
2    {{4,2}, {7,4}, {8,5}, {9,7}} 
```

...

我想获取`{4,5}`他们数组中的所有记录，记录`id=1`在这里。
如果我这样做：

```
select * from table where arr && '{4,5}' 
```

我会得到这两个示例记录。它会查找数组中任何位置为 4 和 5 的所有记录 - 就好像它正在查看完全提取的数组一样，例如`{1,2,3,4,4,5,4,7}`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:20:59.627

我想过使用扩展[intarray](http://www.postgresql.org/docs/current/interactive/intarray.html)中的函数，但是：

> 其中许多操作仅对一维数组有效。尽管它们将接受更多维度的输入数组，但数据被视为按存储顺序排列**的线性数组**。

我的其他想法：

### 又快又脏

```
WITH x(id, arr) AS (VALUES
    (1, '{{1,2}, {3,4}, {4,5}, {4,7}}'::int[])
   ,(2, '{{4,2}, {7,4}, {8,5}, {9,7}}')
   )
SELECT * 
FROM   x
WHERE  arr::text LIKE '%{4,5}%'; 
```

简单的技巧是将数组转换为它的文本表示并检查`LIKE`.

### 使用数组函数

```
WITH x(id, arr) AS (
    VALUES
     (1, '{{1,2}, {3,4}, {4,5}, {4,7}}'::int[])
    ,(2, '{{4,2}, {7,4}, {8,5}, {9,7}}')
    )
    ,y AS (
    SELECT id, arr, generate_subscripts(arr, 1) AS i
    FROM   x
)
SELECT id, arr
FROM   y
WHERE  arr[i:i] = '{{4,5}}'::int[]; 
```

或者，以您的示例为基础，以不同的符号表示相同：

```
SELECT id, arr
FROM  (
    SELECT id, arr, generate_subscripts(arr, 1) AS i
    FROM   tbl
    ) x
WHERE  arr[i:i] = '{{4,5}}'::int[]; 
```

这会生成第一个维度的数组下标。在这个集合返回函数的帮助下，我们检查每个数组切片。请注意表达式右侧的双括号，以创建匹配的二维数组。

如果`{4,5}`可以在`arr`多次，添加`GROUP BY`或`DISTINCT`子句以避免重复行。

# c# - 如何使用 linq to xml 概念将子元素添加到 wpf 中的父元素？

> ID：11881800
> 
> 赞同：0
> 
> 时间：2012-08-09T10:52:49.647
> 
> 标签：c#, xml, linq-to-xml

```
 XElement school = new XElement("school",
                                            new XElement("SectionA",
                                              new XElement("Student", "guna"),
                                              new XElement("Student", "Anbu"),
                                              new XElement("Student", "Chandru")));

 XElement Student = new XElement("Student","Rajesh"); 
 school.Save(@AppDomain.CurrentDomain.BaseDirectory + "Joiningelements.xml"); 
```

在这里，我想在**学校元素中添加****SectionA的****学生**元素子元素。

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:43:00.410

你可以这样使用

```
XElement Student = new XElement("Student", "Rajesh");

school.Element("SectionA").Add(Student); 
```****

# database - 建模 Excel 表（动态列和固定行）

> ID：11881806
> 
> 赞同：0
> 
> 时间：2012-08-09T10:53:01.323
> 
> 标签：database, excel, database-design

请帮助我找到一个数据库表的正确结构，该结构允许存储如下所示的 excel 表的数据：

![在此处输入图像描述](../Images/39e52924ada36d5bb5985947994e1f9e.png)

首先，我尝试将行和列标题存储在表中：

```
rows(id_row, label)
columns(id_col, label) 
```

然后我创建了一个表来存储这样的值：

```
mytable(id_tbl, #id_row, #id_col, value, date_add) 
```

但我意识到这个解决方案需要更多的处理来选择和操作（删除、编辑），也许它会影响我的代码的性能

由于我有固定的行，我决定这样做：

```
columns(id_col,label)
mytable(id_tbl, id_col, date_add, row_1, row_2, row_3) 
```

所以为了存储我的 excel 表的一个实例，我需要在 mytable 表中为每一列设置 1 行

那么这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:29:49.730

数据库表定义声明其列，而不是行。根据您正在建模的内容以及您将如何使用此表，我会建议其中一种方法。

一个[规范化](http://en.wikipedia.org/wiki/Database_normalization "维基百科")的方法是这样的：

```
mytable(unique_id, entity_label, value_label, column_value, [other entity attributes e.g. date_added]) 
```

一些解码：`entity_label`是您在 Excel 列 A 中的内容，`value_label`是您在 Excel 行 1 中的内容。以这种方式存储的数据将如下所示：

```
unique_id  entity_label  value_label   column_value
1          row_1         col_1         9 
2          row_1         col_2         19 
3          row_1         col_3         29 
4          row_2         col_1         50 
```

等等。

这为每个数据库行存储一个且仅一个值 ( `column_value`)，是一种灵活且可扩展的方法。例如，由于在每个数据库行上都标识了`entity_label`和`value_label`，因此它将毫不费力地处理任意数量的`value_labels`每个实体（Excel“col_nn”）和整体数据点。将所有内容相加是一件简单的事情`column_values`（`entity_label`就像您在 Excel 列 E 中所做的那样）。删除、添加和更新实体或实体中的特定值都是可能且简单的。

另一方面，您的实体模型可能总是每个实体具有三个值。就像您提供了源数据一样，模仿这种方法的表定义可能是这样的：

```
mytable(unique_id, entity_label, column_value_1, column_value_2, column_value_3, [other entity attributes e.g. date_added]) 
```

这种方法的主要缺点是缺乏灵活性。例如，如果`value_labels`每个实体的数量发生变化（例如，从 3 增加到 4），您可能会发现自己编辑大量代码只是为了考虑实体的新列。

我喜欢重复的一句口头禅是“行很便宜，列很贵”。在设计数据库表时请记住这一点。

# asp.net - asp.net web api：访问上传的文件流

> ID：11881808
> 
> 赞同：0
> 
> 时间：2012-08-09T10:53:16.223
> 
> 标签：asp.net, asp.net-web-api

我有一个 asp.net web api 应用程序，它充当 wcf web 服务的中继。在某些情况下，我想上传大文件。wcf 服务中的方法接受文件作为流。我不想将文件保存在我的中间服务器上 我想访问上传文件的流并将其提供给 wcf 方法，以便将数据直接流式传输到 wcf 服务。

这是客户端下载文件时的类似情况

```
using (IProductsChannel channel = ChannelFactory.CreateChannel())
            {
                result.Content = new StreamContent(channel.GetFile());
                result.Content.Headers.ContentType = new MediaTypeHeaderValue("text/plain");
                return result;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:28:22.970

这里至少有一种方法。使用 HTTPContext 唯一的问题是它不适合单元测试，因此我们必须在最终解决方案中将其抽象出来。

```
 var file =   HttpContext.Current.Request.Files[0];

            var result = new HttpResponseMessage(HttpStatusCode.OK);

            using (IProductsChannel channel = ChannelFactory.CreateChannel())
            {
                channel.SaveFile(file.InputStream);
            }

            return  new HttpResponseMessage(HttpStatusCode.Created);
        } 
```

# iphone - 不包含 i386 的体系结构信息

> ID：11881809
> 
> 赞同：1
> 
> 时间：2012-08-09T10:53:21.150
> 
> 标签：iphone, ios, ipad

当我编译我的项目时，我得到了这个错误：

> 警告：(i386) /Users/Desktop/aug_9/iOSSample/SD_2.0.a(sdk743.o) 对象文件 '/Users/Desktop/aug_9/iOSSample/SD_2.0.a(sdk743.o)' 没有包含 i386 的体系结构信息。

我是否需要在构建设置的“有效架构”中添加 i386？

谁能告诉我如何解决这个警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:19:22.080

您似乎正在尝试在模拟器中运行，而您使用的库不支持模拟器。

您可能想检查该库是否具有模拟器的构建，或者只是在真实设备上测试您的应用程序。

# spring-batch - 无法使用弹簧批处理在多线程步骤执行中配置节流限制

> ID：11881811
> 
> 赞同：0
> 
> 时间：2012-08-09T10:53:28.093
> 
> 标签：spring-batch

我正在尝试配置多线程步骤。我遵循了春季批处理文档。

**我的工作配置：**

```
<job id="ordinaryJob" xmlns="http://www.springframework.org/schema/batch" job-repository="jobRepository">
 <step id="Ordinary" xmlns="http://www.springframework.org/schema/batch"> 
   <tasklet transaction-manager="transactionManager"> 
      <chunk **throttle-limit="10**" task-executor="asyncTaskExecutor" reader="itemReader"                               writer="EmployeeWriter" commit-interval="1000" />
   </tasklet> 
  </step>
</job> 
```

当我执行作业时，我得到以下异常。

```
Exception in thread "main" org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 49 in XML document from class path resource [xmlJob.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.3.2.2: Attribute 'throttle-limit' is not allowed to appear in element 'batch:chunk'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:404)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:113)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:80)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at controller.XMLJobController.<init>(XMLJobController.java:42)
    at controller.XMLJobController.main(XMLJobController.java:48)
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.3.2.2: Attribute 'throttle-limit' is not allowed to appear in element 'batch:chunk'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processAttributes(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    ... 15 more 
```

我能够在没有节流限制参数的情况下执行作业。我想知道为什么我无法添加。什么是任务执行器中的并发限制属性。

谢谢， 西瓦普拉卡什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:17:57.567

如果您调查[Spring Batch xsd](http://www.springframework.org/schema/batch/spring-batch.xsd)它说这`throttle-limit`是一个可以与`tasklet`类型一起使用的属性，而不是`chunk`

你得到的 SAXParseException 说的是同样的：批处理中不期望油门限制：块

> org.xml.sax.SAXParseException：cvc-complex-type.3.2.2：属性“throttle-limit”不允许出现在元素“batch:chunk”中。

task-executor 属性也是如此，它也属于 tasklet，而不是块

所以，正确的用法是

```
<tasklet transaction-manager="transactionManager" throttle-limit="10" task-executor="asyncTaskExecutor"> 
    <chunk reader="itemReader" writer="EmployeeWriter" commit-interval="1000" />
</tasklet> 
```

# r - 为什么 Cohen 的 kappa 计算在此列联表上的不同包中失败？

> ID：11881819
> 
> 赞同：4
> 
> 时间：2012-08-09T10:54:02.507
> 
> 标签：r, package

我有一个列联表，我想计算科恩斯的 kappa - 协议水平。我尝试过使用三种不同的软件包，它们似乎都在某种程度上失败了。该软件包`e1071`具有专门用于列联表的功能，但这似乎也失败了。下面是可重现的代码。您将需要安装包`concord`、`e1071`和`irr`.

```
# Recreate my contingency table, output with dput
conf.mat<-structure(c(810531L, 289024L, 164757L, 114316L), .Dim = c(2L, 
2L), .Dimnames = structure(list(landsat_2000_bin = c("0", "1"
), MOD12_2000_binForest = c("0", "1")), .Names = c("landsat_2000_bin", 
"MOD12_2000_binForest")), class = "table")

library(concord)
cohen.kappa(conf.mat)
library(e1071)
classAgreement(conf.mat, match.names=TRUE)
library(irr)
kappa2(conf.mat) 
```

我从运行中得到的输出是：

```
> cohen.kappa(conf.mat)
Kappa test for nominally classified data
4 categories - 2 methods
kappa (Cohen) = 0 , Z = NaN , p = NaN 
kappa (Siegel) = -0.333333 , Z = -0.816497 , p = 0.792892 
kappa (2*PA-1) = -1 

> classAgreement(conf.mat, match.names=TRUE)
    $diag
[1] 0.6708459
    $kappa
[1] NA
    $rand
[1] 0.5583764
    $crand
[1] 0.0594124
    Warning message:
In ni[lev] * nj[lev] : NAs produced by integer overflow

> kappa2(conf.mat) 
 Cohen's Kappa for 2 Raters (Weights: unweighted)
Subjects = 2 
Raters = 2 
Kappa = 0 
z = NaN 
p-value = NaN 
```

谁能建议为什么这些可能会失败？我有一个大数据集，但由于这个表很简单，我认为这不会导致这样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:53:58.800

在第一个函数中`cohen.kappa`，您需要指定您使用的是计数数据，而不仅仅是主题和评分者的`n*m`矩阵。`n``m`

```
# cohen.kappa(conf.mat,'count')
cohen.kappa(conf.mat,'count') 
```

第二个功能要棘手得多。出于某种原因，您`matrix`的充满`integer`而不是`numeric`. `integer`不能存储非常大的数字。因此，当您将两个大数相乘时，它会失败。例如：

```
i=975288 
j=1099555
class(i)
# [1] "numeric"
i*j
# 1.072383e+12
as.integer(i)*as.integer(j)
# [1] NA
# Warning message:
# In as.integer(i) * as.integer(j) : NAs produced by integer overflow 
```

因此，您需要将矩阵转换为整数。

```
# classAgreement(conf.mat)
classAgreement(matrix(as.numeric(conf.mat),nrow=2)) 
```

最后看一下`?kappa2`. 它需要一个`n*m`如上所述的矩阵。它只是不适用于您的（高效）数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:23:16.700

您是否需要具体了解为什么会失败？这是一个计算统计数据的函数——很匆忙，所以我稍后可能会清理它[（kappa wiki）](http://en.wikipedia.org/wiki/Cohen%27s_kappa)：

```
kap <- function(x) {
  a <- (x[1,1] + x[2,2]) / sum(x)
  e <- (sum(x[1,]) / sum(x)) * (sum(x[,1]) / sum(x)) + (1 - (sum(x[1,]) / sum(x))) * (1 - (sum(x[,1]) / sum(x)))
  (a-e)/(1-e)
} 
```

测试/输出：

```
> (x = matrix(c(20,5,10,15), nrow=2, byrow=T))
     [,1] [,2]
[1,]   20    5
[2,]   10   15
> kap(x)
[1] 0.4
> (x = matrix(c(45,15,25,15), nrow=2, byrow=T))
     [,1] [,2]
[1,]   45   15
[2,]   25   15
> kap(x)
[1] 0.1304348
> (x = matrix(c(25,35,5,35), nrow=2, byrow=T))
     [,1] [,2]
[1,]   25   35
[2,]    5   35
> kap(x)
[1] 0.2592593
> kap(conf.mat)
[1] 0.1258621 
```

# c# - 如何制作不重复前瞻的正则表达式

> ID：11881823
> 
> 赞同：0
> 
> 时间：2012-08-09T10:54:15.550
> 
> 标签：c#, regex

我目前的代码是：

```
const string st = "one two";
const string reg = "((?<first>one ))?(?=(?<second>two))";
var result = Regex.Matches(st, reg, RegexOptions.IgnoreCase);

Console.WriteLn(result.Count);

foreach (Match match in result)
{
    Console.WriteLine("first={0}, second={1}", match.Groups["first"], match.Groups["second"]);
} 
```

输出是：

```
2
first=one , second=two
first=, second=two 
```

返回两个匹配项。

如何编写正则表达式以仅返回一个匹配项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:09:56.790

这是因为你让你的第一组是可选的，顺便说一句。您可以删除第一组的一组括号。

1.  因此，您的正则表达式匹配“一”并提前到以下“二”（并将其存储在捕获组中）。

2.  然后，因为第一个是可选的，它第二次匹配“两个”之前的空字符串并向前看下面的“两个”（并将其存储在捕获组中）

为什么你需要先行，当你捕获它的时候？

你应该描述你试图达到的目标。

**试着回答你的问题：**

要仅获得一个匹配项，**请使第一组不是可选的：**

```
const string reg = "(?<first>one )(?=(?<second>two))"; 
```

**或删除前瞻：**

```
const string reg = "(?<first>one )?(?<second>two)"; 
```

现在这意味着，如果有“一个两个”，它将作为您的第一个匹配项匹配。如果第一个缺少==>“两个”，那么它只会匹配第二组。

**如果在开头添加一个锚点会怎样？**

```
const string reg = "^(?<first>one )?(?=(?<second>two))"; 
```

`^`匹配字符串的开头，因此当第一个单词可用时，它不应在第二个单词之前再次匹配。

# java - Android：以编程方式在 Jelly Bean 上的 WebView 中触发文本选择模式

> ID：11881824
> 
> 赞同：6
> 
> 时间：2012-08-09T10:54:16.057
> 
> 标签：java, android, webview, copy-paste, android-4.2-jelly-bean

我需要在 WebView 中以编程方式触发文本选择模式，但我使用的代码不适用于 Jelly Bean？

我一直在使用以下代码，但它不再适用于 Android 4.1 (Jelly Bean)，因为 Jelly Bean 不再支持 WebView.selectText、emulateShiftHeld 和 key dispatch。

以下适用于 ICS 之前的所有版本的代码基于：[如何在 android webview 中启用默认突出显示菜单？](https://stackoverflow.com/questions/7581131/how-to-enable-the-default-highlight-menus-in-android-webview)

```
public void selectAndCopyText() {
    try {
        // ICS
            WebView.class.getMethod("selectText").invoke(this);
        } catch (Exception e1) {
        try {
            Method m = WebView.class.getMethod("emulateShiftHeld", (Class[])null);
            m.invoke(this, (Object[])null);
        } catch (Exception e2) {
            // fallback
            KeyEvent shiftPressEvent = new KeyEvent(0,0,
                     KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_SHIFT_LEFT,0,0);
            shiftPressEvent.dispatch(this);
        }
    }
} 
```

如何实现适用于 Jelly Bean 的类似功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:29:16.370

我在这里的评论中列出了一个潜在的解决方案：[如何在 android webview 中启用默认突出显示菜单？](https://stackoverflow.com/questions/7581131/how-to-enable-the-default-highlight-menus-in-android-webview)

以下是潜在解决方案的内容：经过分析`android.webkit.WebViewClassic`，我在以下方面取得了一些成功：

```
KeyEvent enterEvent = new KeyEvent(0,0,KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_ENTER,0,0);
enterEvent.dispatch(this); 
```

我认为可能需要更多，因为`WebView`在使用模拟器时我需要在上述工作之前向下滚动一点，但在真正的 JellyBean 设备上进行测试后，上述工作似乎正常。

# python - 停止 Tkinter 的 Python 脚本

> ID：11881827
> 
> 赞同：0
> 
> 时间：2012-08-09T10:54:19.013
> 
> 标签：python, tkinter, python-2.7

我有以下代码使用 Tkinter 的 askopenfilename 使用户能够选择文件。然后将该文件的内容用于图表。我只使用 Tkinter 来允许用户选择文件，没有别的。因此，是否有 Python 脚本会在文件打开后结束 Tkinter，我希望它位于标有“##”的行中。因为 Tkinter 仍在运行，当它不需要时。我的代码用于的代码程序是在绘制图形时停止。这是我的代码：

```
Exampe of the data
x,y,
1,4,
3,9,
6,7,
,,

#Code starts
import numpy as np
from Tkinter import Tk
from tkFileDialog import askopenfilename
import matplotlib.pyplot as plt

Tk().withdraw() # keep the root window from appearing (dont want full Gui)
filename = askopenfilename()# show an "Open" dialog box and return the path to the    selected file print(filename)
data = np.genfromtxt(filename, dtype=[('x',float),('y',float)],comments='"', delimiter=',',skip_header=1,missing_values=True)
##Location of tkinter stop code##
x=data['x']
x = x[np.logical_not(np.isnan(x))] #Remove Nan values
y=data['y']
y = y[np.logical_not(np.isnan(y))] # Remove Nan values
plt.plot(x, y, 'ko', ms=4)
plt.show()
#Code Ends 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:15:32.267

保留对 Tk 对象的引用，并`destroy`在完成后调用其方法：

```
tk = Tk()
tk.withdraw() 

#do file dialog stuff
(...)

tk.destroy() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T19:21:33.107

使用销毁它`.destroy()`

```
window.destroy() 
```

# objective-c - 拖动文件遇到沙盒(__CFPasteboardIssueSandboxExtensionForPath)

> ID：11881832
> 
> 赞同：8
> 
> 时间：2012-08-09T10:54:28.420
> 
> 标签：objective-c, macos, cocoa, sandbox, nspasteboard

我处理了从浏览器视图到自定义视图的拖动操作。它在雪豹中运行良好，但在带有沙箱的山狮中运行良好。

```
in browser view:
    NSMutableArray* urls = [[[NSMutableArray alloc] init] autorelease];
..............put some NSUrl to urls array....................
    [pasteboard writeObjects:[NSArray arrayWithArray:urls]];

in my receive custom view:
    NSArray* pasteboardItems = [pasteboard readObjectsForClasses:[NSArray arrayWithObject:[NSString class]] options:nil];
    NSArray* pasteboardItems2 = [pasteboard readObjectsForClasses:[NSArray arrayWithObject:[NSURL class]] options:nil];
    NSArray* pasteboardItems3 = [pasteboard readObjectsForClasses:[NSArray arrayWithObject:[NSImage class]] options:nil];
    NSLog(@"%@",pasteboardItems);
    NSLog(@"%@",pasteboardItems2);
    NSLog(@"%@",pasteboardItems3);
my log is:
    2012-08-09 18:33:43.886 iCollage[6885:303] __CFPasteboardIssueSandboxExtensionForPath: error for [/Users/xxxx/Library/Containers/xxxxxxxxxxxx/Data/Downloads/1343902069.jpg]
    2012-08-09 18:33:44.546 iCollage[6885:303] ( "file://localhost/Users/xxx/Library/Containers/xxxxxxxx/Data/Downloads/1343902069.jpg")
    2012-08-09 18:33:44.547 iCollage[6885:303] ( "file://localhost/Users/xxxxx/Library/Containers/xxxxxx/Data/Downloads/1343902069.jpg")
    2012-08-09 18:33:44.547 iCollage[6885:303] () 
```

我的问题是：

1.如何解决此错误__CFPasteboardIssueSandboxExtensionForPath;我参考了文档，但没有发现任何相关信息。我确保我有权访问该文件！谷歌说，可能是“startAccessingSecurityScopedResource”会帮助我，然后我尝试并失败了

2.为什么 pasteboardItems2 有价值？我只写到粘贴板的 url 而不是字符串。这让我感到恶心，我可以从 NSString 类型和 NSUrl 类型中获取 url！（我尝试从 iFinder 拖动一个文件，该 url 将只存在于 pasteboardItems 而不是 pasteboardItems2）。有人知道为什么吗？我认为当有人帮我解决这个问题时，第一个问题会自动解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:53:39.620

您需要在发送[方生成安全范围的 URL 书签数据](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/bookmarkDataWithOptions%3aincludingResourceValuesForKeys%3arelativeToURL%3aerror%3a)，然后在接收方[将该数据转换回 URL](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURL/URLByResolvingBookmarkData%3aoptions%3arelativeToURL%3abookmarkDataIsStale%3aerror%3a)。之后，当您想要实际访问 URL 时，您还需要做一些其他的事情；[文档详细说明](http://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW16)。

接收应用程序在沙箱中运行时，将无法处理裸路径。这是沙盒化的核心部分；您不得使用裸路径或其对应的 URL 来访问不在您的沙箱容器中且用户未明确交给您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:56:57.273

我相信[Apple](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/Tasks/DraggingFiles.html)回答了问题1：

> **重要提示**：尽管您可以支持拖动文件路径，但一般来说，您应该避免这样做，除非您确定目标应用程序永远不会在应用程序沙箱中运行。如果您使用 NSString，OS X 无法知道该字符串是否应该被解释为路径；因此，OS X 不会扩展目标应用程序的沙箱以允许访问该位置的文件或目录。相反，使用 NSURL、书签或文件名粘贴板类型。

WRT 问题 2，看起来您已经粘贴了 URL，因此读取`NSURL`对象似乎是正确的。但是我认为您应该使用以下代码（也来自上面的链接）实现拖动：

```
- (BOOL)performDragOperation:(id <NSDraggingInfo>)sender
{
    NSPasteboard *pboard = [sender draggingPasteboard];

    if ( [[pboard types] containsObject:NSFilenamesPboardType] ) {
        NSArray *files = [pboard propertyListForType:NSFilenamesPboardType];
        int numberOfFiles = [files count];
        // Perform operation using the list of files
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T14:56:33.123

您需要在应用程序中定义文档类型，以便沙盒机制知道您的应用程序应该打开具有这些扩展名的文件。您可以通过单击 Xcode 左侧的项目来执行此操作，然后在 Info 选项卡中的 Document Types 下为每个扩展添加一个新的文档类型。

您只需要填写`name`和`extensions`字段。

此外，如果您想保留访问拖到应用程序上的文件的权限，您可以使用此类来包装所有逻辑。[https://github.com/leighmcculloch/AppSandboxFileAccess](https://github.com/leighmcculloch/AppSandboxFileAccess)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T00:44:51.460

您的**pasteboardItems**读取 NSString 类型的对象，但是您拖动了一个文件（带有 jpg 扩展名），您应该在 init 方法中注册 NSString 类型：

```
[self registerForDraggedTypes:[NSArray arrayWithObject:NSPasteboardTypeString]]; 
```

# javafx-2 - JavaFX 2 中线的确切尺寸是多少？

> ID：11881834
> 
> 赞同：3
> 
> 时间：2012-08-09T10:54:40.953
> 
> 标签：javafx-2

我想知道 JavaFX 2.1 中线条的确切宽度。

创建从点 (10;10) 到点 (20;10) 的直线的预期宽度应为 10 像素。当读取线的宽度时，会返回 11px 的值。当开始附加的示例并制作屏幕截图时，您会看到 - 在更高的缩放级别 - 线条的宽度为 12 像素，高度为 2 像素。

使用 a`LineBuilder`没有任何区别。我试图应用不同的方法`StrokeType`但没有成功。

创建一个边长为 10 的正方形会返回 10px 的预期宽度。

1.  为什么`line.getBoundsInLocal().getWidth()`返回的值与我在渲染结果（屏幕截图）中看到的不同？
2.  为什么在创建线和多边形时宽度会有所不同？

**例子：**

```
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.shape.Line;
import javafx.scene.shape.Polygon;
import javafx.stage.Stage;

public class ShapeWidthDemo extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        Group root = new Group();

        int startX = 10;
        int startY = 10;
        int length = 10;

        Line line = new Line(startX, startY, startX + length, startY);
        System.out.println("line width: " + line.getBoundsInLocal().getWidth());
        //->line width: 11.0
        System.out.println("line height: " + line.getBoundsInLocal().getHeight());
        //->line height: 1.0
        root.getChildren().add(line);

        int startY2 = startY + 2;

        Polygon polygon = new Polygon(
            startX, startY2,
            startX + 10, startY2, 
            startX + 10, startY2 + 10, 
            startX, startY2 + 10);
        System.out.println("polygon width: " + polygon.getBoundsInLocal().getWidth());
        //->polygon width: 10.0
        System.out.println("polygon height: " + polygon.getBoundsInLocal().getHeight());
        //->polygon height: 10.0
        root.getChildren().add(polygon);

        stage.setScene(new Scene(root, 100, 100));
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:24:47.597

1) 线的端点由 控制`StrokeLineCap`。
因此，使用默认笔划宽度，您可以通过

```
line.setStrokeType(StrokeType.CENTERED);
line.setStrokeLineCap(StrokeLineCap.BUTT); 
```

> ```
> ... that the line has a width of 12px and a height of 2px. 
> ```

`StrokeType.OUTSIDE` **如果应用AND NOT** ，您可以获得这些值`StrokeLineCap.BUTT`。然而，即使更改笔触属性，高度仍保持在 2px。那很奇怪..

2) 因为多边形的笔画值默认为NULL。通过设置它就像`polygon.setStroke(Color.RED);`笔画将呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:19:42.000

将线本身想象成没有任何表面积，它是无限细的。线条的唯一尺寸来自笔划。

当 StrokeType 为 CENTERED[并且](http://docs.oracle.com/javafx/2/api/javafx/scene/shape/StrokeType.html#CENTERED)StrokeLineCap 为[SQUARE](http://docs.oracle.com/javafx/2/api/javafx/scene/shape/StrokeLineCap.html#SQUARE)（默认值）时，线条所占据的区域来自于在所有方向上均匀地围绕线条应用一半的笔划宽度。

在您的示例中，您在整数坐标处绘制一条笔划为 1 的水平线。JavaFX[坐标系统](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)使得整数角映射到像素之间的线。当您显示一条具有整数坐标的水平线时，该线本身穿过该线任一侧的两个垂直像素的一半，并最终成为一条灰色阴影的抗锯齿线，而不是一条只有一个垂直像素的黑色线。此外，在线条末端应用 SQUARE 的 StrokeLineCap 意味着笔划超出线条端点的一半笔划宽度。这最终对线末端两侧的两对像素中的每个像素的四分之一进行着色。

通过将线条的坐标偏移半个像素，可以绘制线条，使其遮蔽单行垂直像素，因为现在线条沿着每个像素的中间下降并且线条笔触延伸到顶部和每个像素的底部边缘。此外，将线帽设置为对接而不是方形意味着线的阴影区域不会超出线的末端。

这是一些示例代码来演示这一点。在示例中，只有最后一行完全遮住了 10 个像素，仅此而已。它也是唯一一条宽度为 10 且在其边界框中具有整数坐标的线。

```
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.shape.Line;
import javafx.scene.shape.StrokeLineCap;
import javafx.stage.Stage;

public class LineBounds extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) throws Exception {
    double startX = 10;
    double startY = 10;
    double length = 10;

    Line lineSpanningPixelsSquareEnd = new Line(startX, startY, startX + length, startY);
    System.out.println("lineSpanningPixels (square) bounding box: " + lineSpanningPixelsSquareEnd.getBoundsInLocal());

    startX = 10;
    startY = 20;
    length = 10;

    Line lineSpanningPixelsButtEnd = new Line(startX, startY, startX + length, startY);
    lineSpanningPixelsButtEnd.setStrokeLineCap(StrokeLineCap.BUTT);
    System.out.println("lineSpanningPixels (butt) bounding box:   " + lineSpanningPixelsButtEnd.getBoundsInLocal());

    startX = 10;
    startY = 29.5;
    length = 10;

    Line lineOnPixelsSquareEnd = new Line(startX, startY, startX + length, startY);
    System.out.println("lineOnPixels (square) bounding box:       " + lineOnPixelsSquareEnd.getBoundsInLocal());

    startX = 10;
    startY = 39.5;
    length = 10;

    Line lineOnPixelsButtEnd = new Line(startX, startY, startX + length, startY);
    lineOnPixelsButtEnd.setStrokeLineCap(StrokeLineCap.BUTT);
    System.out.println("lineOnPixels (butt) bounding box:         " + lineOnPixelsButtEnd.getBoundsInLocal());

    stage.setScene(
      new Scene(
        new Group(
          lineSpanningPixelsSquareEnd, lineSpanningPixelsButtEnd, lineOnPixelsSquareEnd, lineOnPixelsButtEnd
        ), 100, 100
      )
    );
    stage.show();
  }
} 
```

示例程序的输出是：

```
lineSpanningPixels (square) bounding box: BoundingBox [minX:9.5, minY:9.5, minZ:0.0, width:11.0, height:1.0, depth:0.0, maxX:20.5, maxY:10.5, maxZ:0.0]
lineSpanningPixels (butt) bounding box:   BoundingBox [minX:10.0, minY:19.5, minZ:0.0, width:10.0, height:1.0, depth:0.0, maxX:20.0, maxY:20.5, maxZ:0.0]
lineOnPixels (square) bounding box:       BoundingBox [minX:9.5, minY:29.0, minZ:0.0, width:11.0, height:1.0, depth:0.0, maxX:20.5, maxY:30.0, maxZ:0.0]
lineOnPixels (butt) bounding box:         BoundingBox [minX:10.0, minY:39.0, minZ:0.0, width:10.0, height:1.0, depth:0.0, maxX:20.0, maxY:40.0, maxZ:0.0] 
```

![行边界示例程序输出](../Images/d04ecddda34537337e0926c3b995de0b.png)

# sql - 通过子字符串连接/查询表

> ID：11881836
> 
> 赞同：0
> 
> 时间：2012-08-09T10:54:43.850
> 
> 标签：sql, sql-server

目前我有一个查询，该查询部分基于两个表中的两个数字列的连接。

假设一张桌子的数字像 123456789999 (NUM1)

另一个表的数字范围为 1 - 9999 (NUM2)

我想提取在 'NUM1' 的第 5 - 8 位数字内有 'NUM2' 的记录

目前我正在做这样的事情，

```
FROM Table1 AS T INNER JOIN Table2 AS S 
ON SUBSTRING(T.num1, 5, 4) = S.num2 
```

我知道它应该检索大约 100 条记录，但我只得到 8 条。我相信这是因为第二个范围内的小范围。我哪里出错了？或者如何使我的代码更加健壮/有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:06:16.367

试试这个：

由于 NUM2 的数据类型是 int，0001 将被认为只是 1

所以试试这个：

```
 FROM Table1 AS T INNER JOIN Table2 AS S 
ON cast(SUBSTRING(T.num1, 5, 4) as int) = S.num2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:06:36.490

你需要`CAST`像这样使用：

```
FROM Table1 AS T INNER JOIN Table2 AS S 
ON CAST(SUBSTRING(T.num1, 5, 4) AS INT) = S.num2 
```

[看这个小提琴](http://www.sqlfiddle.com/#!3/1f815/1)

有关详细信息，请参阅[SQL SERVER - 将文本转换为数字（整数） - CAST 和 CONVERT](http://blog.sqlauthority.com/2007/07/07/sql-server-convert-text-to-numbers-integer-cast-and-convert/)

# ubuntu-11.04 - 在没有互联网的情况下使用 apt-get build essential

> ID：11881840
> 
> 赞同：4
> 
> 时间：2012-08-09T10:54:53.093
> 
> 标签：ubuntu-11.04, apt-get

我有一台机器，一个 64 位 ubuntu 服务器 Natty (11.04) 我需要安装一个编译器（基本上在上面做“apt-get build-essential”），但我没有连接

到目前为止，我已经尝试过使用 apt-offline ；它没有用。无法使用 Keryx，因为我没有该服务器的桌面.... 出于同样的原因也无法使用 Synaptic 也尝试下载 debian 软件包（gcc、g++、cpp、libc6 等）但依赖项和配置让我抓狂

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-22T13:37:36.263

apt-offline 就是为此目的而编写的。它有一个涵盖**Build Dependencies**用例的选项。

```
rrs@learner:~$ apt-offline set -h
usage: apt-offline set [-h] [--verbose] [--simulate]
                       [--install-packages [PKG [PKG ...]]]
                       [--install-src-packages [SOURCE PKG [SOURCE PKG ...]]]
                       [--src-build-dep] [--release release_name] [--update]
                       [--upgrade] [--upgrade-type upgrade]
                       [--generate-changelog] [--apt-backend apt-get]
                       apt-offline.sig

positional arguments:
  apt-offline.sig       Generate a signature file

optional arguments:
  -h, --help            show this help message and exit
  --verbose             Enable verbose messages
  --simulate            Just simulate. Very helpful when debugging
  --install-packages [PKG [PKG ...]]
                        Packages that need to be installed
  --install-src-packages [SOURCE PKG [SOURCE PKG ...]]
                        Source Packages that need to be installed
  --src-build-dep       Install Build Dependency packages for requested source
                        packages
  --release release_name
                        Release target to install packages from
  --update              Generate Signature to update APT Database
  --upgrade             Generate Signature of packages to be upgraded
  --upgrade-type upgrade
                        Type of upgrade to do. Use one of upgrade, dist-
                        upgrade, dselect-ugprade
  --generate-changelog  Generate changelog of the version to be downloaded
  --apt-backend apt-get
                        APT backend to use. One of: apt, apt-get, python-apt
2017-01-22 / 19:05:24 ♒♒♒  ☺ 
```

# c# - 如果 RadioButton 放置在 Menu 中，则覆盖 RadioButton 的样式

> ID：11881843
> 
> 赞同：0
> 
> 时间：2012-08-09T10:55:03.680
> 
> 标签：c#, xaml, styles

如果将单选按钮放在菜单中，是否有任何方法可以覆盖单选按钮的默认样式？但如果它在窗口中，它应该看起来像以前一样。但我不会使用 x:key。它应该会自动找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:18:31.660

我看到两个解决方案：

1.  使用 x:Key 创建样式，但将其放在 Menu.Resources 中 - 这样它将仅应用于菜单项。

2.  ItemsControls （菜单之一）具有名为[ItemContainerStyleSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyleselector.aspx)的属性。您可以创建自己的[StyleSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.styleselector.aspx)并根据容器类型设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:01:12.487

这很容易，如果你知道怎么做:)

```
<style TargetType="{x:Type Menu}"> 
<Setter Property="Template>
<Setter.Value>
 <ControlTemplate TargetType="{x:Type Menu}">
    <ControlTemplate.Resources>
        <Style Targettype="{x:Type Radiobutton}>
         </Style>
 </ControlTemplate>
      <StackPanel IsItemsHost="True" Width="{TemplateBinding Width}" Height=  {TemplateBinding Height} />
</Setter.Value>
</Setter>
</style> 
```

您必须控制关键字的编写，因为我是这样编写的，而不是在 Visual Studio 上编写的。用堆栈面板覆盖菜单标准，因为我没有找到其他方法来设置资源。这很容易，但没有 Varius 的回答，我没有找到这个。您必须对 MenuItem 执行相同的操作。

我发布这个，因为我认为，它可能会帮助其他有同样问题的人。我已经搜索了很长时间，一无所获。

# performance - 为什么 JIT 语言仍然比原生 C/C++ 更慢且内存效率更低？

> ID：11881853
> 
> 赞同：7
> 
> 时间：2012-08-09T10:55:59.300
> 
> 标签：performance, memory-management, native, jit, machine-code

解释器做了很多额外的工作，因此它们最终比本地机器代码慢得多是可以理解的。但是 C# 或 Java 等语言有 JIT 编译器，据说可以编译为平台本机机器代码。

然而，根据似乎足够合法的[基准](http://benchmarksgame.alioth.debian.org/u32/compare.php?lang=gpp&lang2=csharp)，在大多数情况下，仍然比 C/C++ 慢 2-4 倍？当然，我的意思是与同样优化的 C/C++ 代码相比。我很清楚 JIT 编译的优化优势以及它们生成比优化不佳的 C+C++ 更快的代码的能力。

在所有关于 Java 内存分配有多好的噪音之后，为什么会有如此[可怕](http://benchmarksgame.alioth.debian.org/u32/compare.php?lang=gpp&lang2=java)的内存使用？2 倍到 50 倍，平均而言，在该特定基准套件中使用的内存增加了大约 30 倍，这没什么好打喷嚏的……

请注意，我不想开始 WAR，我询问的是定义这些性能和效率数据的技术细节。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:52:03.517

产生差异的一些原因；

*   JIT 编译器大多快速编译并跳过一些需要更长时间才能找到的优化。

*   VM 通常会强制执行安全性，这会减慢执行速度。例如，数组访问总是在 .Net 中检查边界，除非保证在正确的范围内

*   在 C++ 中使用 SSE（如果适用，对性能很有帮助）很容易，而在当前 VM 中使用 SSE 很困难

*   与 VM 相比，C++ 的性能比其他方面更重要

*   虚拟机通常会在返回操作系统之前保留未使用的内存一段时间，似乎“使用”更多内存。

*   一些 VM 生成值类型的对象，例如 int/ulong .. 增加对象内存开销

*   一些 VM 的自动对齐数据结构会大量浪费内存（以提高性能）

*   一些 VM 将布尔值实现为 int（4 字节），很少关注内存保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T14:32:09.043

> 但是 C# 或 Java 等语言有 JIT 编译器，据说可以编译为平台本机机器代码。

最后，口译员还必须翻译成机器代码。但是为了更好的启动和执行时间，JITters 花费**更少的精力来编译和优化。**从用户的角度来看，在编译上浪费时间会使感知的性能更差，因此只有在[AoT 编译器](https://en.wikipedia.org/wiki/AOT_compiler)中只执行一次时才有可能。

他们还必须**监视编译结果**以重新编译和优化热点，或者对很少使用的路径进行反优化。然后他们不得不偶尔触发 GC。这些比正常编译的二进制文件花费更多时间。此外，JITter 和 JITted 程序的大量内存使用可能意味着**缓存使用效率较低**，这反过来也会降低性能

有关内存使用的更多信息，您可以[在此处参考](http://en.wikipedia.org/wiki/Java_performance#Memory_usage)

> Java 内存使用量比 C++ 的内存使用量大得多，因为：
> 
> *   在 Java 中，每个对象有 8 字节的开销，每个数组有 12 字节的开销（32 位；在 64 位 Java 中是两倍）。如果对象的大小不是 8 字节的倍数，则向上舍入到下一个 8 的倍数。这意味着包含单字节字段的对象占用 16 字节，并且需要 4 字节的引用。请注意，C++ 还为每个声明虚函数的对象分配一个指针（通常为 4 或 8 个字节）。
> *   Java 库的某些部分必须在程序执行之前加载（至少是程序“在后台”使用的类）。 [60] 这导致小型应用程序的显着内存开销[需要引用]。
> *   Java 二进制和本机重新编译通常都在内存中。
> *   虚拟机本身会消耗大量内存。
> *   在 Java 中，使用对已分配的 B 和 C 实例的引用创建复合对象（使用 B 和 C 的实例的类 A）。在 C++ 中，当 B 和 C 的实例时，可以避免这些类型引用的内存和性能成本/ 或 C 存在于 A 中。
> *   缺乏地址算法使得创建内存高效的容器（例如紧密间隔的结构和 XOR 链表）成为不可能。
> 
> 在大多数情况下，由于 Java 的虚拟机、类加载和自动调整内存大小的开销很大，C++ 应用程序将比等效的 Java 应用程序消耗更少的内存。对于内存是在语言和运行时环境之间进行选择的关键因素的应用程序，需要进行成本/收益分析。
> 
> 还应该记住，使用垃圾收集器的程序可能需要使用显式内存管理的程序的五倍内存才能达到相同的性能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-26T23:19:01.083

> 为什么如此可怕的内存使用？2 倍到 50 倍，平均而言，在该特定基准套件中使用的内存增加了大约 30 倍，这没什么好打喷嚏的……

请参阅[https://softwareengineering.stackexchange.com/a/189552](https://softwareengineering.stackexchange.com/a/189552)

# javascript - 多个值的 Javascript 索引

> ID：11881859
> 
> 赞同：6
> 
> 时间：2012-08-09T10:56:19.620
> 
> 标签：javascript, loops, for-loop, indexing

我有一个像这样的多维 javascript 数组。

```
[
["9", "16", "19", "24", "29", "38"],
["9", "15", "19", "24", "29", "38"],
["10", "16", "19", "24", "29", "38"],
["9", "16", "17", "19", "24", "29", "39"],
["10", "16", "17", "19", "24", "29", "39"],
["9", "15", "21", "24", "29", "38"]

.......
.......
] 
```

确切地说是40左右

并且我有另一个名为 check 的数组，其中包含以下值

```
 [9,10] //This is of size two for example,it may contain any number of elements BUT it only contains elements(digits) from the multidimensional array above 
```

我想要的是我需要基于检查数组元素使多维数组唯一

1.Example if check array is `[15]` then多维数组将是

```
[
    ["9", "15", "19", "24", "29", "38"],
   //All the results which contain 15

] 
```

2.Example if check array is `[15,21]` then多维数组将是

```
[
    ["9", "15", "21", "24", "29", "38"]
    //simply containing 15 AND 21.Please note previous example has only 15 in it not 21
    //I need an AND not an OR

] 
```

我曾尝试过 JavaScript IndexOf 方法，但它让我得到一个 OR'ed 结果，而不是 AND

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:10:55.503

您可以使用以下[`.filter()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
var mainArray = [ /* your array here */ ],
    check = ["15", "21"],
    result;

result = mainArray.filter(function(val) {
    for (var i = 0; i < check.length; i++)
        if (val.indexOf(check[i]) === -1)
            return false;    
    return true;
});

console.log(result); 
```

演示：http: [//jsfiddle.net/nnnnnn/Dq6YR/](http://jsfiddle.net/nnnnnn/Dq6YR/)

请注意，`.filter()`IE 直到版本 9 才支持它，但[您可以修复](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter#Compatibility).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T11:11:24.597

使用`.filter`and `.every`，您可以过滤每个参数在该行中显而易见的行：

```
var filter = function(args) {
  return arr.filter(function(row) {
    return args.every(function(arg) {
      return ~row.indexOf(String(arg));  // [15] should search for ["15"]
    });
  });
}; 
```

`.every`在这里有效地进行`AND`操作；因为`OR`你可以`.some`改用。这些数组函数在较新的浏览器上可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T11:10:25.183

还有一个不使用`filter()`or的解决方案`every()`：

```
// function

function AndArray(start, check) {

    this.stripArray = function(element, array) {
        var _array = [];
        for(var i = 0; i < array.length; i++)
            for(var j = 0; j < array[i].length; j++)
                if(element == array[i][j]) _array.push(array[i]);
        return _array;
        }

    for(var k = 0; k < start.length; k++)
        if(start.length > 0) start = this.stripArray(check[k], start);

    return start;

    }

// use

var check = [15, 21];

var start= [[ 15, 6 , 8], [3, 21, 56], [15, 3, 21]];

console.log(AndArray(start, check)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-16T00:59:09.607

这应该这样做

```
var checkURL = function (url) {
  var final = false;
  if (url.indexOf('jpg') > -1) {
    final = true
  }

  if (url.indexOf('jpeg') > -1) {
    final = true
  }

  if (url.indexOf('gif') > -1) {
    final = true
  }

  if (url.indexOf('png') > -1) {
    final = true
  }

  return final
}
```

# c - 编译的c程序内存地址

> ID：11881867
> 
> 赞同：6
> 
> 时间：2012-08-09T10:56:46.047
> 
> 标签：c, memory, gcc, assembly, gdb

我试图了解以下内容：

给定一个 C 语言的小型 Hello World 程序

```
#include <stdio.h>

int main()
{
    int i;
    for(i=0; i < 10; i++)
    {
        printf("Hello, world!\n");
    }
} 
```

当您使用 gcc 编译它，然后使用 objdump 检查生成的 .out 文件时，您会得到如下内容：

```
08048374 <main>:
8048374:       55                      push   ebp
8048375:       89 e5                   mov    ebp,esp
8048377:       83 ec 08                sub    esp,0x8
804837a:       83 e4 f0                and    esp,0xfffffff0
804837d:       b8 00 00 00 00          mov    eax,0x0
8048382:       29 c4                   sub    esp,eax
8048384:       c7 45 fc 00 00 00 00    mov    DWORD PTR [ebp-4],0x0
804838b:       83 7d fc 09             cmp    DWORD PTR [ebp-4],0x9
804838f:       7e 02                   jle    8048393 <main+0x1f>
8048391:       eb 13                   jmp    80483a6 <main+0x32>
8048393:       c7 04 24 84 84 04 08    mov    DWORD PTR [esp],0x8048484
804839a:       e8 01 ff ff ff          call   80482a0 <printf@plt>
804839f:       8d 45 fc                lea    eax,[ebp-4]
80483a2:       ff 00                   inc    DWORD PTR [eax]
80483a4:       eb e5                   jmp    804838b <main+0x17>
80483a6:       c9                      leave  
80483a7:       c3                      ret    
80483a8:       90                      nop    
80483a9:       90                      nop    
80483aa:       90                      nop 
```

结果 .out 文件中的第一列值是内存地址，如果我理解正确，这些地址包含其他列中的指令。

现在我的问题是：如果您将文件复制到另一台机器（甚至是同一台机器上的不同位置）并再次转储文件，这些地址应该更改为其他地址，因为程序将位于内存中的不同位置，对吗？但如果我这样做，我会得到完全相同的输出，相同的地址值。这是为什么？我显然误解了第一列的含义，有人可以向我解释一下这些地址到底是什么吗？提前致谢！

更新：据我所知，由于 Paul R 的回答和一些进一步的维基百科阅读，这些地址引用了一个虚拟地址空间，代码由运行它的机器的操作系统执行。这些虚拟地址被其操作系统映射到实际机器上的绝对地址。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T11:00:26.710

The addresses in the left column are the (virtual) addresses at which your code will be [loaded](http://en.wikipedia.org/wiki/Loader_%28computing%29) when it's run. Unless the code is [position-independent](http://en.wikipedia.org/wiki/Position-independent_code) it will need to be loaded at these addresses to run correctly.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T11:27:16.833

Every process in a 32-bit OS runs in its own 4GB virtual memory area. This area is shared between the kernel and your process, normally in as a 3GB/1GB memory split, where the lower 3GB memory area starting from 0x00000000 is used by the application while the upper 1GB is used by the kernel.

Now if we consider the lower 3GB user space area of the application, the area is further divided into different segments such as text segment, initialized data segment, uninitialized data segment etc.

因此，您编写的代码放置在该文本区域中，在您的示例中恰好从 08048374 开始。

因此，整个汇编代码都放置在这个虚拟地址中，而不管您用来运行它的任何机器，因为这是在链接阶段预先定义的。因此，该地址不会改变。希望这可以帮助。

# xml - 从对象访问 xml

> ID：11881868
> 
> 赞同：0
> 
> 时间：2012-08-09T10:56:46.967
> 
> 标签：xml, actionscript-3, apache-flex

所以我有一个拖放操作，并且被拖动的数据是一些XML。我的 drophandler 看起来像这样：

```
protected function dragDropHandler(event:DragEvent):void
{
    var item:XML = XML(event.dragSource.dataForFormat("itemsByIndex"));
    Alert.show(item);
} 
```

警报如下所示：

![带有 xml 的警报](../Images/e237ded0206ee895c233f787c13faec3.png)

例如，我如何获取此 XML 的 ID？例如在警报中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:12:09.800

您可以访问`id`属性 with `item.id`、`name`with`item.name`等。网上有一些资源可以学习 e4x，这是在 AS3 中操作 XML 的最简单方法。

# jquery - 如何更改jQuery切换的默认效果..？

> ID：11881869
> 
> 赞同：2
> 
> 时间：2012-08-09T10:56:48.857
> 
> 标签：jquery

我只是想学习 jQuery，但发现了一个问题。我有一个切换效果，我可以通过它隐藏和显示我的 div。代码如下：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#butShowHideSlow").click(function () {
            $("#divShowHideSlow").toggle("slow");
        });
    });
</script>

<button id="butShowHideSlow">Click Me</button>
<div style="width: 300px; height: 47px; border: solid 1px black; background-color: white; text-align: center;" id="divShowHideSlow">Div that hide and show slowly</div> 
```

最初我`div`在那里，但我想最初隐藏我的 div。我认为这很容易，但我是 jQuery 新手，所以谁能告诉我该怎么做？

谢谢你的支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:59:27.997

将第一个切换更改为`hide()`

```
<script type="text/javascript">
 $(document).ready(function(){
  $("#divShowHideSlow").hide();
  $("#butShowHideSlow").click(function () {
   $("#divShowHideSlow").toggle("slow");
  });
 });
</script>
<button id="butShowHideSlow">Click Me</button>
<div style="width:300px;height:47px; border: solid 1px black;background-color:white;text-align:center;" id="divShowHideSlow">Div that hide and show slowly</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:58:56.380

您可以将此行添加到脚本的顶部：

```
$("#divShowHideSlow").hide(); 
```

这是一个JSFiddle：

[http://jsfiddle.net/6TLaw/](http://jsfiddle.net/6TLaw/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T10:59:44.127

`$("#divShowHideSlow").hide();`

或者添加`display:none`到 div 样式属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T11:00:50.303

尝试这个：

```
<script type="text/javascript">
$(document).ready(function(){
  $("#butShowHideSlow").click(function () {
    $("#divShowHideSlow").toggle("slow");
  });
});
</script>

<button id="butShowHideSlow">Click Me</button>
<div style="display: none; width:300px;height:47px; border: solid 1px black;background-color:white;text-align:center;" id="divShowHideSlow">Div that hide and show slowly</div> 
```

# mysql - 带有连接的 sql 查询

> ID：11881872
> 
> 赞同：0
> 
> 时间：2012-08-09T10:56:53.747
> 
> 标签：mysql, sql

我有四张桌子

```
post
-------------
post_id
cat_id
posts

post_category
-------------
cat_id
cat_name

users
------------- 
user_id
user_name

user_category_map
-------------
user_id
cat_id 
```

我想要所有用户在所有帖子类别中添加的所有帖子

我写了这个查询

```
 SELECT posts 
  FROM post p, users u, user_category_map ucm 
 WHERE p.cat_id = ucm.cat_id 
   AND ucm.user_id = u.user_id 
```

但我收到重复的帖子。我的表结构是否正确并正确规范化。我无法正确掌握逻辑。我输入的连接是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:00:55.483

在这里，您收到了所有表的完整笛卡尔积，并通过“p.cat_id = ucm.cat_id 和 ucm.user_id = u.user_id”条件对其进行过滤。像这样的查询通常会转换为优化的连接版本——合并、嵌套循环、索引或哈希连接。

在笛卡尔积 A*B*C 期间，A 中的每一行都将重复 B*C 次。

您的查询“所有用户在所有帖子类别中添加的所有帖子”是

```
select * from post 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T11:03:31.963

设计看起来不正确。您应该有一个 user_post 的参考表，而不是 user_category 的参考表。在当前情况下，如果同一用户为同一类别添加多个帖子，您最终将在 user_category_map 中出现重复的行

# html - 使用 Httrack 下载网站需要很长时间

> ID：11881878
> 
> 赞同：0
> 
> 时间：2012-08-09T10:57:19.560
> 
> 标签：html, download, database-mirroring

我正在使用 httrack 下载这个网站：http: [//4minutearticles.com/](http://4minutearticles.com/)

这需要很长时间，现在有超过 1500 个文件。

怎么可能？那个网站这么简单，怎么会有1500多个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:04:55.760

可能所有链接文件（a、链接、脚本、img、对象）。是否有多次出现相同的内容？

检查下载的深度，以及它是否总是在同一个域中。

# ios - 如何在 Core Data 中更新？

> ID：11881879
> 
> 赞同：2
> 
> 时间：2012-08-09T10:57:22.903
> 
> 标签：ios, core-data, persistence

我看到了很多关于 Core Data 更新的问题。实际上我正在创建一个简单的应用程序联系人列表应用程序。它包含添加、编辑、删除和更新功能。这是我的更新代码。它可以工作并更新，但它会更新所有联系人列表。我只需要更新特定的联系人。

```
- (IBAction)updatePressed:(id)sender 
{
    delegate = [[AppDelegate alloc]init];
    delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    name2 = emailtxt1.text;
    email2 = nametext1.text;
    mobile2 = numbertxt1.text;
    dict = [[NSMutableDictionary alloc] init];
    [dict setObject:nametext1.text forKey:@"NAME"];
    [dict setObject:emailtxt1.text forKey:@"EMAIL"];
    [dict setObject:numbertxt1.text forKey:@"MOBILE"];
    [delegate UpdateDiary:dict];
}

- (void)UpdateDiary:(NSMutableDictionary *)dictionary
{
    NSLog(@"update book Details Function Entered");

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Diary"inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    NSArray *mutableFetchResult = [[[self.managedObjectContext executeFetchRequest:fetchRequest error:&error] mutableCopy] autorelease];

    if (mutableFetchResult == nil) {
        NSLog(@"Fetch result error %@, %@", error, [error userInfo]);
    }

    for (Diary *ob2 in mutableFetchResult) 
    {
        {
        ob2.name = [dictionary objectForKey:@"NAME"];
        ob2.email=[dictionary objectForKey:@"EMAIL"];
        ob2.phone=[dictionary objectForKey:@"MOBILE"];
        }
    }

    if(![self.managedObjectContext save:&error])
    {               
        if([error localizedDescription] != nil)
        {           
        NSLog(@"%@",error);
        }
        else
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:31:17.613

您需要在获取请求上设置谓词。这就是它知道您想要哪个对象的方式，而不仅仅是获取所有对象。

您可以执行以下操作：

```
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"email == %@", anEmailAddress]; 
```

如果您这样做了，那么执行获取请求的结果将只是与您在谓词中设置的电子邮件地址匹配的对象。

当然，请注意，如果有多个对象具有相同的电子邮件地址，则获取请求将获取所有这些对象。

一个更好的应用程序设计可能是，当你进入编辑表单时，保留你正在编辑的 Core Data 对象，可能在你的视图控制器的一个属性中。（我认为你会在那个时候拥有它，因为你需要知道用什么来填充字段。）这样你就不需要在用户尝试提交编辑时执行提取——你可以只使用你随身携带的物品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:54:29.177

```
- (void)UpdateBook:(NSMutableDictionary *)dictionary
    {

     NSLog(@"update book Details Function Entered");

     NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

     NSEntityDescription *entity = [NSEntityDescription entityForName:@"Book"inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];
    fetchRequest.predicate = [NSPredicate predicateWithFormat:@"bookID = %@", [dictionary objectForKey:@"vID"]];

     NSArray *mutableFetchResult = [[[self.managedObjectContext executeFetchRequest:fetchRequest error:&error] mutableCopy] autorelease];

     if (mutableFetchResult == nil) {
        NSLog(@"Fetch result error %@, %@", error, [error userInfo]);
    }

    for (Book *ob2 in mutableFetchResult) 
    {

        {

            ob2.name = [dictionary objectForKey:@"VName1"];
            ob2.author=[dictionary objectForKey:@"VAuthor1"];
            ob2.discription=[dictionary objectForKey:@"VDiscription1"];
            ob2.bookID=[dictionary objectForKey:@"vID"];

        }
    }

    if(![self.managedObjectContext save:&error])
    {               
        if([error localizedDescription] != nil)
        {           
            NSLog(@"%@",error);
        }
        else
        {

        }
    }
} 
```

# android - 有没有办法以编程方式禁用android设备？

> ID：11881890
> 
> 赞同：2
> 
> 时间：2012-08-09T10:58:11.920
> 
> 标签：android

我在机器人上安装了一个 android 平板电脑，它有单独的蓄电池，当蓄电池放电时我需要关闭平板电脑。有没有办法从android应用程序中做到这一点？如果需要，我可以根设备。

UPD - 平板电脑 - Acer Iconia A100，ICS。

UPD2

这是工作代码

```
try {
        Process process = new ProcessBuilder()
           .command("/system/bin/su")
           .start();
            OutputStream o =process.getOutputStream();
            o.write("/system/bin/reboot -p\n".getBytes());

    } catch (Exception e) {
        Toast.makeText(getApplicationContext(), "fail!", Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:56:39.630

类似的东西怎么样（这只适用于有根设备）：

```
try {
    // it's possible you'd have to provide full path to rebot here (ex. '/system/bin/reboot -p' ??)
    Runtime.getRuntime().exec("reboot -p"); 
} catch( Exception e ) { // pokemon catching

} 
```

完整的工作示例（更新）：

```
try {
    // if that's not working use '/system/bin/su' instead
    Runtime.getRuntime().exec(new String[]{"su", "-c", "reboot -p"}); 

} catch( Exception e ) { } 
```

# android - 将 AVD 模拟器与本地 servlet 连接

> ID：11881892
> 
> 赞同：0
> 
> 时间：2012-08-09T10:58:14.563
> 
> 标签：android

我一直在尝试将我的 android 模拟器与本地 servlet 连接，但没有结果。我知道我应该使用`http://10.0.2.2:8080`，但它仍然无法正常工作。有趣的是，在我的真实设备上，使用我的网络 ip `http://192.168.1.10:8080`，servlet 会做出应有的响应。模拟器有什么问题？我知道有很多这样的话题，但唯一的答案总是“更改为 10.0.2.2”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:38:29.480

也许您的 servlet 引擎（Web 服务器）没有绑定/监听 10.0.2.2？

# vb.net - WebClient 下载不完整的文件

> ID：11881893
> 
> 赞同：1
> 
> 时间：2012-08-09T10:58:14.837
> 
> 标签：vb.net, webclient

我写的这个方法一周前运行良好，但现在它下载了一个不完整的文件。原始文件将近 10mb，但正在下载的文件是 2k。我的代码基本上是这样的

```
Dim URL as string = "http://www.cqc.org.uk/sites/default/files/cqc_locations_export.csv"
Dim path as string = "C:\temp"        
Dim webClient As New WebClient
webClient.Headers.Add("user-agent", "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.12) Gecko/20101026 Firefox/3.6.12 (.NET CLR 3.5.30729)")
webClient.DownloadFile(URL, path) 
```

知道这里出了什么问题吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:33:10.583

第二个参数`DownloadFile`需要一个完整的文件名，而不仅仅是一个路径（并且`C:\`驱动器的根在 Windows 7 上受到保护，因此如果您尝试在此处编写该方法可能会引发异常）

注意：完成后不要忘记处理 webclient。

注意 2：我建议您应该使用 .NET 类名以外的名称来避免命名冲突。不要忘记 VB*不区分大小写*（与 C# 不同）

以下对我来说很好：

```
Dim URL As String = "http://www.cqc.org.uk/sites/default/files/cqc_locations_export.csv"
Dim filename As String = "C:\temp\temp.csv"
Using wc As New WebClient
     wc.Headers.Add("user-agent", "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.12) Gecko/20101026 Firefox/3.6.12 (.NET CLR 3.5.30729)")
     wc.DownloadFile(URL, filename)
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T16:19:01.000

托管文件的站点或该站点处理 GET 请求的方式可能存在问题。我在下载从 DropBox 共享的 URI 时遇到了同样的问题。该文件大约 3 MB，但仅下载了前 112 KB。当我从 Screencast.com 下载相同的文件时，整个文件都已下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:06:17.103

这不是我的领域，但您可能会丢失文件的大小，如果它是二进制、字符编码和其他头数据。此外，这 2k 的文件可能是文件或元数据的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-02T19:41:27.340

在地面上，您可能想尝试三件事：

1.  使用管理员权限运行您的应用程序，因为 C 驱动器在 Windows 7 及更高版本中受到保护。
2.  暂时停止您的防病毒程序并再次尝试下载。
3.  仅在下载完成时释放 webClient（在 DownloadFileCompleted 事件中）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-09T11:15:24.177

文档似乎建议（两种不同的变体）
Dim client As New WebClient()
或
Dim client As WebClient

# iphone - 来自字符串数组的索引表iOS

> ID：11881894
> 
> 赞同：0
> 
> 时间：2012-08-09T10:58:15.177
> 
> 标签：iphone, objective-c, ios, uitableview, ios4

我有字符串数组

```
 NSMutableArray * nam = [[NSMutableArray alloc] initWithObjects:@"ZAZ", @"London", @"Australia",@"England", @"Dallas", @"Mexico", @"Russia", nil]; 
```

如何按字母顺序从此字符串创建索引的 TableView ？？？就像在“通讯录”中一样！或者也许有人知道这个问题的一些教训？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:03:05.430

编辑：创建[UITableView](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)跟随链接。使用 newArray 作为 tableview 数组

像这样按字母顺序对 NSMutableArray 进行排序：

```
NSMutableArray *newArray = [nam sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

将此 newArray 用作`TableViewDataSource`按字母顺序排列的单元格的数组

# objective-c - 在 Objective-C 中默认包含 math.h

> ID：11881895
> 
> 赞同：3
> 
> 时间：2012-08-09T10:58:18.777
> 
> 标签：objective-c, include

我有一个多平台项目，现在在 Windows、Linux 和 iOS 上运行，但我偶然发现了 Objective-C 的一个不良问题。

不幸的`exp`是，我为我的一种类型选择了名称（表达式，考虑到我的代码中出现的次数，非常合理），但是 Objective-C`math.h`默认包含标题，创建名称冲突。

我试图注释掉 .pch 中的所有内容（每个源文件之前默认包含的前缀文件），`exp`但仍被标记为重新定义。

有人知道如何在 Objective-C 项目的源文件中**不**包含 math.h 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:11:20.700

Objective-C 没有正式的规范，但它继承了 C 的特性。在 C 中，程序不应使用标准头文件中的标识符，即使它们不包含这些头文件。所以，你不应该使用“exp”作为你自己的标识符。

如果您坚持使用“exp”，您可能可以使用预处理器语句解决该问题：

```
#define exp MyExp 
```

这将允许您在源代码中编写“exp”，就好像它是您的标识符之一一样。由于预处理器会将其更改为“MyExp”，因此编译器会将“MyExp”视为标识符并且不会抱怨。

这将导致许多问题，例如标识符在目标代码信息和调试工具中显示为“MyExp”，并导致将来无法使用 math.h 中的 exp。

# android - Facebook 登录在我的三星 Galaxy 应用程序中不起作用

> ID：11881897
> 
> 赞同：2
> 
> 时间：2012-08-09T10:58:23.993
> 
> 标签：android, facebook

我在我的应用程序中进行了 Facebook 集成。登录屏幕在没有 SSO 的情况下不会加载，并且在 SSO 的情况下，它不会从三星 Galaxy 的默认 Facebook 应用程序中获取 Facebook 用户的详细信息。

我在 HTC 上运行的相同代码运行良好。我以前从未遇到过这种问题。我不知道它为什么这样做。

我收到以下回复：

```
The server failed to communicate. Try again later. 
```

有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:06:26.067

这是因为您向错误的 url 提交请求，或者您发送的内容有误。

# python - Django：以后有什么方法可以获取上传文件的日期和名称？

> ID：11881900
> 
> 赞同：4
> 
> 时间：2012-08-09T10:58:29.063
> 
> 标签：python, django

有什么方法可以获取我们使用表单存储到数据库中的上传文件日期和名称？现在我只是创建了另外两个数据库元组，`name`并`date`像这样将它们存储
`file_name = request.FILES['file'].name`为 file_name 并使用存储日期`upload_date = datetime.datetime.now()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:21:22.220

`stat`您可以在使用模块 读取文件的元数据后获取日期。[http://docs.python.org/release/2.5.2/lib/module-stat.html](http://docs.python.org/release/2.5.2/lib/module-stat.html)

它是特定于操作系统的，但`ST_CTIME`应该为您提供您所寻找的大致内容。

对于名称，您可以轻松地从存储方式中获取它。指定一个自定义处理程序，将文件存储在`/your/file/path/filename.extension`并仅操作文件名的字符串

只需在烧瓶文档中阅读此内容。不确定它在 Django 中的适用程度，但在此处粘贴以供参考

*如果您想知道文件在上传到您的应用程序之前在客户端上是如何命名的，您可以访问文件名属性。但是请记住，这个值是可以伪造的，所以永远不要相信那个值。如果您想使用客户端的文件名将文件存储在服务器上，请通过 Werkzeug 为您提供的 secure_filename() 函数传递它*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:20:06.123

存储在磁盘中时，您可以使用原始文件的名称作为文件名的一部分，并且您可能可以使用文件的创建/修改日期作为上传日期。IMO，您应该将其显式存储在数据库中。

# python - Python Selenium noarch RPM 构建失败

> ID：11881902
> 
> 赞同：0
> 
> 时间：2012-08-09T10:58:37.870
> 
> 标签：python, selenium, rpm

尝试从下载的 selenium-2.20.0.tar.gz 构建 Python Selenium noarch rpm 所有必要的 Python 要求都已安装并运行，使用命令：

```
python setup.py bdist --format=rpm 
```

RPMBuild 失败并显示错误消息：

```
Arch dependent binaries in noarch package
error: command 'rpmbuild' failed with exit status 1 
```

已尝试按照在 selenium.SPEC 文件中添加附加 %define 的建议进行操作，该文件位于`build/bdist.linux-i686/rpm/SPECS/selenium.spec`

```
%define _binaries_in_noarch_packages_terminate_build 0 
```

不幸的是，当我重新运行 RPM 构建时，没有获取更改，并且构建后 SPEC 文件的内容似乎已经恢复，因为新添加的 %define 不再存在？！

欢迎任何建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:44:04.030

`selenium.spec`由于规范文件是从内容自动生成的，因此更改不会持续存在，主要来自内部`setup.py`

找到了两个解决方案：

1) 将最新版本的`selenium-2.20.0.tar.gz`from下载`http://pypi.python.org/pypi/selenium/`到目标机器，tar 解压并运行：

> python setup.py 安装

2) 安装 python pip，然后使用 pip 使用以下命令以自动方式下载和安装最新的 selenium：

> pip install -U 硒

到目前为止，我还没有找到可以添加到 setup.py 的确切内容，这会将必要的 RPM 构建定义添加到`selenium.spec`文件中以创建安装 RPM ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T23:52:08.653

对于未来，如果有人遇到这个

```
python setup.py bdist_rpm --force-arch x86_64 
```

为我工作

# html - 将鼠标悬停在 li 上，背景会改变吗？

> ID：11881904
> 
> 赞同：0
> 
> 时间：2012-08-09T10:58:44.860
> 
> 标签：html, css, hover

我在将鼠标悬停在活动的 li 项目上时遇到问题。

*   截图 1（不悬停）：http: [//i.imgur.com/9d2NQ.png](http://i.imgur.com/9d2NQ.png)
*   截图2（悬停）：http: [//i.imgur.com/W4J8O.png](http://i.imgur.com/W4J8O.png)
*   截图3（悬停在另一个li上）：http: [//i.imgur.com/GOJSS.png](http://i.imgur.com/GOJSS.png)
*   小提琴：http: [//jsfiddle.net/LVLKW/3/](http://jsfiddle.net/LVLKW/3/)

我需要当前类与悬停相同，我不确定我哪里出错了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:08:59.607

我建议进行以下更改：

1.  使`<li>` **主动**，而不是`<a>`。
2.  结合`:hover`和`.active`规则，便于维护。
3.  *正常*和*活动/悬停*状态没有不同的填充。

**演示：http:** [//jsfiddle.net/LVLKW/11/](http://jsfiddle.net/LVLKW/11/)

* * *

**HTML**

```
<div id="nav">
    <ul>
        <li class="current"><a href="#">Home</a></li>
        <li><a href="#">About Us</a></li>
    </ul>
</div>​ 
```

**CSS**

```
body {
    background-color: lightblue;
}
#nav ul{
    margin-top: 23px;
    list-style: none;
}
#nav ul li{
    font-size: 17px;
    padding: 10px 11px 7px 11px;
    font-weight: bold;
    font-family: HelNue;
    display: inline;
}
#nav ul li.current,
#nav ul li:hover{
    font-family: HelNue;
    background-color: white;
    margin: 0;
    color: #58585a;
    -webkit-border-top-left-radius: 10px;
    -webkit-border-top-right-radius: 10px;
    -moz-border-radius-topleft: 10px;
    -moz-border-radius-topright: 10px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
}
#nav ul li:hover a{
    color: #58585a;
}

#nav ul li a{
    color: black;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:02:54.623

您需要申请`display: block`您的`a`标签。样式`a`和`li`是不同的，但两者都可以为它们设置背景。您将当前选项卡的背景设置`li`为，但是当您悬停时，您将背景应用于`a`. 选择一个并保持一致，我会推荐`a`和`display: block;`

# android - 在android中录制后将音频文件发送到服务器

> ID：11881910
> 
> 赞同：2
> 
> 时间：2012-08-09T10:58:59.353
> 
> 标签：android

提前感谢您在我的应用程序上花费了您的时间...

我有一个应用程序，我需要在单击名为“RECORD”的按钮后创建一个音频文件并将此文件发送到服务器。音频文件必须以任何 android 支持的音频格式发送。我怎样才能做到这一点...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-15T16:17:56.380

**Code For Recording in Android**

**main.java:**

```
package com.example.audiosend;

import android.os.Bundle;
import android.app.Activity;
import java.io.IOException;
import android.media.MediaPlayer;
import android.media.MediaRecorder;
import android.os.Environment;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

   private MediaRecorder myRecorder;
   private MediaPlayer myPlayer;
   private String outputFile = null;
   private Button startBtn;
   private Button stopBtn;
   private Button playBtn;
   private Button stopPlayBtn;
   private TextView text;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      text = (TextView) findViewById(R.id.text1);

      // store it to sd card

outputFile = Environment.getExternalStorageDirectory().
              getAbsolutePath() + "/MyAppRecording.3gpp"; //this is the folder in which your Audio file willl save

      myRecorder = new MediaRecorder();
      myRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
      myRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
      myRecorder.setAudioEncoder(MediaRecorder.OutputFormat.AMR_NB);
      myRecorder.setOutputFile(outputFile);

      startBtn = (Button)findViewById(R.id.start);
      startBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            start(v);
        }
      });

      stopBtn = (Button)findViewById(R.id.stop);
      stopBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            stop(v);
        }
      });

      playBtn = (Button)findViewById(R.id.play);
      playBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
                play(v);    
        }
      });

      stopPlayBtn = (Button)findViewById(R.id.stopPlay);
      stopPlayBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            stopPlay(v);
        }
      });
   }

   public void start(View view){
       try {
          myRecorder.prepare();
          myRecorder.start();
       } catch (IllegalStateException e) {
          // start:it is called before prepare()
          // prepare: it is called after start() or before setOutputFormat() 
          e.printStackTrace();
       } catch (IOException e) {
           // prepare() fails
           e.printStackTrace();
        }

       text.setText("Recording Point: Recording");
       startBtn.setEnabled(false);
       stopBtn.setEnabled(true);

       Toast.makeText(getApplicationContext(), "Start recording...", 
               Toast.LENGTH_SHORT).show();
   }

   public void stop(View view){
       try {
          myRecorder.stop();
          myRecorder.release();
          myRecorder  = null;

          stopBtn.setEnabled(false);
          playBtn.setEnabled(true);
          text.setText("Recording Point: Stop recording");

          Toast.makeText(getApplicationContext(), "Stop recording...",
                  Toast.LENGTH_SHORT).show();
       } catch (IllegalStateException e) {
            //  it is called before start()
            e.printStackTrace();
       } catch (RuntimeException e) {
            // no valid audio/video data has been received
            e.printStackTrace();
       }
   }

   public void play(View view) {
       try{
           myPlayer = new MediaPlayer();
           myPlayer.setDataSource(outputFile);
           myPlayer.prepare();
           myPlayer.start();

           playBtn.setEnabled(false);
           stopPlayBtn.setEnabled(true);
           text.setText("Recording Point: Playing");

           Toast.makeText(getApplicationContext(), "Start play the recording...", 
                   Toast.LENGTH_SHORT).show();
       } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
   }

   public void stopPlay(View view) {
       try {
           if (myPlayer != null) {
               myPlayer.stop();
               myPlayer.release();
               myPlayer = null;
               playBtn.setEnabled(true);
               stopPlayBtn.setEnabled(false);
               text.setText("Recording Point: Stop playing");

               Toast.makeText(getApplicationContext(), "Stop playing the recording...", 
                       Toast.LENGTH_SHORT).show();
           }
       } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
   } 
```

# c++ - 错误 MSB3073：命令 ""..\..\..\..\lib\Tests.exe" :VCEnd" 退出，代码为 -1073740940

> ID：11881911
> 
> 赞同：0
> 
> 时间：2012-08-09T10:59:06.350
> 
> 标签：c++

我在构建代码时收到上述消息。

任何人都可以对这个问题有所了解并帮助我吗？

非常感谢

最好的祝福

钦坦

更新的问题：以下代码出现上述错误。

```
vector <double> vBandSubset (vBand.size(), 0.0); 
vBandSubset = vBand; 
double dMeanBand=GetMean(vBand); 
int j = 0; 
for (int i = nBin1 - 3; i <= nBin1 + 3; i++) 
{ 
    vBandSubset[i] = dMeanBand*(1 + 0.00001*j); 
    j++; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:50:21.877

在不知道您到底在做什么的细节的情况下，很难肯定地说出任何事情，但是-1073740940 == 0xC0000374 == STATUS_HEAP_CORRUPTION。它有什么亮点吗？

**[UPD]**假设将错误值解释为 NTSTATUS 是正确的，那么您正在破坏堆。进一步假设它发生在您显示的代码中，很可能是`nBin1 < 3`or 或`nBin1 + 3 >= vBandSubset.size()`. 在任何一种情况下，您在循环中的分配都会覆盖`vBandSubset`数据块之前或之后的技术堆区域。

由于这是一个测试，我建议你使用`vBandSubset.at(i)`而不是`vBandSubset[i]`. 不像`operator[]`,`at()`验证它的参数并且如果它是无效的就会抛出一个异常。异常比内存损坏更容易调试。

PS。您可以编辑您的问题并将代码放在那里。这样对读者来说更方便。

# php - 使用 PHP 从 MSSQL 数据库读取时，分音符号显示为问号

> ID：11881912
> 
> 赞同：1
> 
> 时间：2012-08-09T10:59:16.430
> 
> 标签：php, sql-server, special-characters

我有一点 PHP 从 MSSQL 数据库中获取数据并将其保存到数组中：

```
while($row = mssql_fetch_array($dbquery, MSSQL_NUM)) 
{
    $content = array(
        'something'         =>  $row[1],
        'something_else'    =>  $row[2]
        // etcetera
    );
} 
```

*（我认为我将数据写入这样的数组的原因并不相关，但如果你必须知道：这是因为数据是由 ExpressionEngine (EECMS) 解析的。PHP 代码是我正在开发的插件的一部分，并且这是使数据可用于 ExpressionEngine 标记的最简单方法。）*

de MSSQL 数据库中的某些数据包含标点符号，例如 ë 和 é。分音符 (ë) 在 HTML 中显示为问号。例如，`Cliënten`显示为`Cli�nten`。

HTML 为 UTF8：`<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`

我无法更改 MSSQL 数据库中的任何内容。解决此问题的最佳方法是什么，最好是在 PHP 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:33:59.760

当您看到这样的问号时，这意味着您的浏览器无法理解问号替换的字符应该代表什么。最有可能的是，它期待 utf8 字符编码并且没有得到它们。

尝试在您的阵列上运行类似的东西（在构建之后），看看是否有帮助：

```
$content = array_map('utf8_encode', $content); 
```

基本上，您想对来自数据库的所有字符串运行 utf8_encode() 函数，因为它们显然没有在数据库中这样编码。

您还可以在输出每个变量之前立即运行 utf8_encode 函数。所以像：

```
<p><?php echo utf8_encode($content_row) ?></p> 
```

# arrays - 创建一个数组，其长度应由用户提供

> ID：11881913
> 
> 赞同：1
> 
> 时间：2012-08-09T10:59:19.313
> 
> 标签：arrays

可以给向量的创建一个数字，例如：

```
vet int [] = new int vet [100]. 
```

但是，如果我要创建一个注册程序并由用户决定注册多少，我将如何制作这个条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:19:06.980

```
int quantidade = Integer.parseInt(JOptionPane.showMessagerDialog(null," digite a quantidade"));

int vet [] = new int vet [quantidade] 
```

# google-app-engine - appengine 中 Go 语言的标记

> ID：11881914
> 
> 赞同：4
> 
> 时间：2012-08-09T10:59:19.930
> 
> 标签：google-app-engine, go

go语言中是否有标记库（例如markdown或reST）？最好

*   使用[html/模板](http://golang.org/pkg/html/template/)
*   可用于应用引擎

我在[这里](http://go-lang.cat-v.org/library-bindings)检查并搜索了谷歌，但似乎没有任何内容出现。（也可能只是绑定）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T12:31:02.050

[https://github.com/knieriem/markdown](https://github.com/knieriem/markdown) - 将 peg-markdown（C 中的 Markdown 实现，使用 PEG 语法）翻译成 Go

[https://github.com/russross/blackfriday](https://github.com/russross/blackfriday) - Blackfriday：Go 的降价处理器

两者都是纯 Go 并且应该可以在 App Engine 上正常工作，您应该能够在将 markdown 呈现为 HTML 之前或之后扩展模板。

# ruby-on-rails-3 - 与 Rails 3 中的遗留数据库的简单关联？

> ID：11881918
> 
> 赞同：0
> 
> 时间：2012-08-09T10:59:33.890
> 
> 标签：ruby-on-rails-3, model, associations, model-associations, legacy-database

我正在使用旧数据库，并且还在阅读 Rails[的关联指南](http://guides.rubyonrails.org/association_basics.html)。

我有两个模型。一个`diary`模型和一个`animal`模型。

**日记.rb**

```
class Diary < ActiveRecord::Base
  establish_connection :premvet

  attr_accessible :DiaryNo ,:DiaryName, :DiaryDate, :SlotHour, :TotalSlots, :BlockSlots, :BlockBooked, :FreeSlot, :BookedSlot

  self.table_name = 'diary'
  self.primary_key = 'DiaryNo'

  has_many :animals, :foreign_key => 'DiaryQueue'
end 
```

**动物.rb**

```
class Animal < ActiveRecord::Base
  establish_connection :premvet

  self.table_name = 'animal'
  self.primary_key = 'PVID'

  attr_accessible :AddedBy, :Age, :AnimalBFAmount, :AnimalBalance, :AnimalName, :Archive, :BillType, :Breed, :ChronicStatus, :Class, :Classification, :ClientKey, :Colour, :Date1, :DateOfBirth, :DateofBirth, :Dead, :DiaryQueue, :DiscField, :DrugsAtCost, :DrugsNoVAT, :ESDAmount, :ESDType, :FNote, :FirstRegisteredDate, :Height, :IDNumber, :Insured, :InsuredWith, :IsClient, :IsClientDate, :IsMaster, :LastBilledAmount, :LastBilledDate, :LastConsDate, :LastContributionDate, :LastPaidDate, :LastWeightDate, :Locked, :LoyaltyMultiplier, :LoyaltyPoints, :MR_Flag_0, :MR_Flag_1, :MR_Flag_10, :MR_Flag_11, :MR_Flag_12, :MR_Flag_13, :MR_Flag_14, :MR_Flag_15, :MR_Flag_2, :MR_Flag_3, :MR_Flag_4, :MR_Flag_5, :MR_Flag_6, :MR_Flag_7, :MR_Flag_7, :MR_Flag_8, :MR_Flag_9, :Mileage, :Neutered, :NextApptDate, :ORT, :OldSex, :Opt_Flag_0, :Opt_Flag_1, :Opt_Flag_2, :Opt_Flag_3, :Opt_Flag_4, :Opt_Flag_5, :Opt_Flag_6, :Opt_Flag_7, :PVID, :PreferredContact, :PreferredUser, :Ref1, :RefPrac, :ReferredBy, :SSDType, :SeenInPeriod, :SendBill, :Sex, :SiteAnimal, :Species, :Status, :SurcAmount, :SurcType, :SurgeryNumber, :TBU, :TOSAmount, :TOSDrugs, :TOSFees, :TOSType, :Weight

  belongs_to :client, :foreign_key => 'ClientKey'
  belongs_to :diary, :foreign_key => 'DiaryNo'
end 
```

**动物索引视图**

```
<% @animals_todaysappointments.each do |animal| %>
  <tr>
    <td><%= animal.id %></td>    
    <td><%= animal.AnimalName %></td>
    <td><%= link_to animal.client.Surname, animal.client %></td>    
    <td><%= animal.Species %></td>
    <td><%= animal.Breed %></td>
    <td><%= animal.NextApptDate.strftime("%d %b. %Y -  %H:%M") %></td>        
    <td><%= animal.DiaryQueue %>
    <td><%= animal.diary.DiaryName %></td>    
    <td><%= link_to 'Show', animal %></td>
  </tr>
<% end %> 
```

如您所见，它使用以下方法显示动物表中的 DiaryQueue：

```
<td><%= animal.DiaryQueue %> 
```

我正在尝试显示日记表中的 DiaryName：

```
<td><%= animal.diary.DiaryName %></td> 
```

这失败并出现异常错误：

```
undefined method `DiaryName' for nil:NilClass 
```

该`@animals_todaysappointments`方法如下所示：

```
def appointments
    @animals_todaysappointments = Animal.where('DATE(NextApptDate) = ?', Date.today).page(params[:page]).per_page(15).order('NextApptDate ASC')
    respond_to do |format|
      format.html # index.html.erb
    end
  end 
```

如果我添加：

```
delegate :DiaryName, :to => :diary 
```

到动物模型然后我得到以下错误：

```
Animal#DiaryName delegated to diary.DiaryName, but diary is nil: # 
```

每条动物记录都有一个介于 0 和 10 之间的 DiaryQueue 值，并且日记表有许多行，示例行是：

```
DiaryNo  DiaryName  DiaryDate  SlotHour  TotalSlots  BlockBooked  FreeSlot  BookedSlot
--------------------------------------------------------------------------------------
1        Morning    2012-07-16 9         18          0            0         18 
```

有些行具有相同的 DiaryNo，但它们也具有相同的 DiaryName。只有 DiaryDate、SlotHour、TotalSlots、BlockBooked、FreeSlot 和 BookedSlot 在这些行中发生变化。

为了尝试防止错误，我在视图中添加了以下内容：

```
<% unless animal.DiaryName.nil? %>
 <td><%= animal.DiaryName %></td>
<% else %>
 <td><%= animal.DiaryQueue %>
<% end %> 
```

但我得到一个例外：

```
Animal#DiaryName delegated to diary.DiaryName, but diary is nil: # 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:20:16.990

鉴于您上面的答案，您可能需要将 Animal 中的 belongs_to 方法更改为以下内容：

```
belongs_to :diary, :foreign_key => "DiaryQueue", :primary_key => "DiaryNo" 
```

在您当前的实现中，您的模型将尝试匹配`Animal#DiaryNo`，`Diary#DiaryNo`而您所说的要`Animal#DiaryQueue`匹配`Diary#DiaryNo`。

# makefile - 在 makefile 中使用 m4 处理文件

> ID：11881925
> 
> 赞同：2
> 
> 时间：2012-08-09T11:00:09.260
> 
> 标签：makefile, gnu-make

作为构建过程的一部分，我需要使用 m4 处理一些文件。这些文件具有“.in”扩展名，不仅位于顶级目录中，还位于子目录中。我使用 find 找到它们并在 shell 循环中处理它们。

是否有一些 makefile 语法魔术来编写更简单的规则来处理它们，将输出保存到与输入文件位于同一目录中的文件中（去掉了“.in”扩展名）？

这就是我现在在我的 makefile 中的内容：

```
PROCESS_FILES=$(shell find . -name \*.in)
WORK_FILES=$(subst .in,,$(PROCESS_FILES))

$(WORK_FILES): $(PROCESS_FILES) 
  for file in $(PROCESS_FILES); \
  do \
      m4  $$file > $${file%.*};\
  done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:32:11.763

您可以编写一组规则来将带有后缀`.in`的文件转换为没有该后缀的文件。

在经典的符号中，这将是这样的：

```
# Not functional — see discussion
.SUFFIXES: .in       # Add .in as a suffix

M4       = m4
M4FLAGS  =
M4SCRIPT = xyz.m4

.in:
    ${M4} ${M4FLAGS} ${M4SCRIPT} $< > $* 
```

这添加`.in`为可识别的后缀，并表示您`.in`使用三个宏指定的命令将带有后缀的文件转换为没有后缀的文件。是带有扩展`$<`名的文件的名称；`.in`这`$*`是不带扩展名的文件名。

不幸的是，该表示法仅在要转换的文件具有诸如`xyz.in`并且需要转换为`xyz`. 它不适用于`xyz.h.in`需要转换为`xyz.h`.

可以指定后缀是`.h.in`and `.h`，但是在两者之间进行转换的规则会以`.h.in.h:`and开头`make`。

但是，GNU make 有另一种表示法来定义可以适应这种情况的后缀规则：

```
.SUFFIXES: .h.in .h      # Add .h.in and .h as suffixes

M4       = m4
M4FLAGS  =
M4SCRIPT = xyz.m4

%.h: %.h.in
    ${M4} ${M4FLAGS} ${M4SCRIPT} $< > $*.h 
```

该`%.h: %.h.in`行能够处理带有两个点的后缀。唯一的麻烦是对于每个扩展，例如`.c.in`or`.y.in`或`.mk.in`，您必须提供类似的映射。

（在 Mac OS X 10.7.4 上测试。如果该 makefile 是`xyz.mk`，您可以创建一个空文件`xyz.h.in`然后运行`make -n -f xyz.mk xyz.h`，您会看到构建将运行命令`m4 xyz.m4 xyz.h.in > xyz.h`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:18:41.973

如果你有一个源文件`path/to/file.in`，一个规则`%`从`%.in`，以及对输出文件的依赖`path/to/file`，这应该是你所需要的。

也许您想根据`find`. 在 GNU Make 中，这很容易；在其他方言中，也许您想生成并包含类似`find -name '*.in' | sed 's/\.in$//' >make.dep`

# xslt - xslt 匹配和剥离

> ID：11881926
> 
> 赞同：1
> 
> 时间：2012-08-09T11:00:11.687
> 
> 标签：xslt

我有一个这样的 XML 结构，只是一些与 HTML 标记混合的有效 XML 结构。我正在尝试匹配`<p>MyHeader</p>`该部分并将其设置为空。

那是在这个结构上运行 XSLT 之后，我不想打印`<p>MyHeader</p>`标签。

```
<abstract>
<section>
<p>MyHeader</p>

<p> other content in section </p>
<h1> other content in section </h1>

</section>
</abstract> 
```

这是我在 XSL 中尝试的内容

```
<xsl:template match="abstract/section/p">
        <xsl:choose>
            <xsl:when test="text() ='MyHeader'"></xsl:when>
            <xsl:otherwise><xsl:apply-templates /></xsl:otherwise>
        </xsl:choose>
</xsl:template> 
```

关于我上面的代码有什么问题的任何想法？我没有看到`<p>MyHeader</p>`标签被剥离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:33:18.460

> ```
> <xsl:template match="abstract/section/p">
>         <xsl:choose>
>             <xsl:when test="text() ='MyHeader'"></xsl:when>
>             <xsl:otherwise><xsl:apply-templates /></xsl:otherwise>
>         </xsl:choose>
> </xsl:template>
> 
>  what's wrong with my code 
> ```

显示的代码没有任何问题——问题在于您没有向我们显示的代码。

**猜测**：

*   未选择执行该模板。
*   有一个明确的`<xsl:copy-of>`选择这个`p`元素。

**建议：只需使用**：

```
<xsl:template match="abstract/section/p[.='MyHeader']"/> 
```

# c# - 在c#中并行读取一百万行的csv文件

> ID：11881929
> 
> 赞同：4
> 
> 时间：2012-08-09T11:00:14.837
> 
> 标签：c#, multithreading, performance, parallel-processing

我有一个包含超过 100 万行数据的 CVS 文件。我打算并行阅读它们以提高效率。我可以执行以下操作还是有更有效的方法？

```
namespace ParallelData
{
public partial class ParallelData : Form
{
    public ParallelData()
    {
        InitializeComponent();
    }

    private static readonly char[] Separators = { ',', ' ' };

    private static void ProcessFile()
    {
        var lines = File.ReadLines("BigData.csv");
        var numbers = ProcessRawNumbers(lines);

        var rowTotal = new List<double>();
        var totalElements = 0;

        foreach (var values in numbers)
        {
            var sumOfRow = values.Sum();
            rowTotal.Add(sumOfRow);
            totalElements += values.Count;
        }
        MessageBox.Show(totalElements.ToString());
    }

    private static List<List<double>> ProcessRawNumbers(IEnumerable<string> lines)
    {
        var numbers = new List<List<double>>();
        /*System.Threading.Tasks.*/
        Parallel.ForEach(lines, line =>
        {
            lock (numbers)
            {
                numbers.Add(ProcessLine(line));
            }
        });
        return numbers;
    }

    private static List<double> ProcessLine(string line)
    {
        var list = new List<double>();
        foreach (var s in line.Split(Separators, StringSplitOptions.RemoveEmptyEntries))
        {
            double i;
            if (Double.TryParse(s, out i))
            {
                list.Add(i);
            }
        }
        return list;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        ProcessFile();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T11:11:07.503

我不确定这是个好主意。根据您的硬件，CPU 不会成为瓶颈，磁盘读取速度会。

还有一点：如果您的存储硬件是磁硬盘，那么磁盘读取速度与**文件在磁盘中的物理存储**方式密切相关；如果文件没有碎片（即所有文件块都按顺序存储在磁盘上），如果按顺序逐行读取，您将获得更好的性能。

一种解决方案是一次读取整个文件（如果您有足够的内存空间，对于 100 万行应该没问题）[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)，使用将所有行存储在字符串数组中，然后处理（即使用`string.Split`...等解析）。 ) 在您的 中`Parallel.Foreach`，如果行顺序不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:35:39.447

一般来说，您应该尽量避免在多个线程上访问磁盘。磁盘是瓶颈并且会阻塞，因此可能会影响性能。

如果文件中行的大小不是问题，您可能应该先读取整个文件，然后并行处理。

如果文件太大而无法执行此操作或不实用，则可以使用[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)加载它。使用一个线程读取文件并填充 BlockingCollection，然后使用 Parallel.ForEach 来处理其中的项目。BlockingCollection 允许您[指定集合的​​最大大小](http://www.lovethedot.net/2009/02/parallel-programming-in-net-40-and.html)，因此它只会从文件中读取更多行，因为集合中已经存在的内容会被处理和删除。

```
 static void Main(string[] args)
    {
        string  filename = @"c:\vs\temp\test.txt";
        int maxEntries = 2;

        var c = new BlockingCollection<String>(maxEntries);

        var taskAdding = Task.Factory.StartNew(delegate
        {
            var lines = File.ReadLines(filename);
            foreach (var line in lines)
            {
                c.Add(line);    // when there are maxEntries items
                                // in the collection, this line 
                                // and thread will block until 
                                // the processing thread removes 
                                // an item
            }

            c.CompleteAdding(); // this tells the collection there's
                                // nothing more to be added, so the 
                                // enumerator in the other thread can 
                                // end
        });

        while (c.Count < 1)
        {
            // this is here simply to give the adding thread time to
            // spin up in this much simplified sample
        }

        Parallel.ForEach(c.GetConsumingEnumerable(), i =>
           {
               // NOTE: GetConsumingEnumerable() removes items from the 
               //   collection as it enumerates over it, this frees up
               //   the space in the collection for the other thread
               //   to write more lines from the file
               Console.WriteLine(i);  
           });

        Console.ReadLine();
    } 
```

不过，与其他一些问题一样，我不得不问一个问题：您真的需要尝试通过并行化进行优化，还是单线程解决方案的性能足够好？多线程增加了很多复杂性，有时并不值得。

你看到什么样的表现是你想要改进的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T06:32:27.933

我在我的计算机上检查了这些行，看起来使用 Parallel 读取 csv 文件而没有任何 cpu 昂贵的计算是没有意义的。与在一个线程中相比，并行运行它需要更多时间。这是我的结果： 对于上面的代码：

**2699ms 2712ms**（检查两次只是为了确认结果）

然后：

```
private static IEnumerable<List<double>> ProcessRawNumbers2(IEnumerable<string> lines)
{
        var numbers = new List<List<double>>();
        foreach(var line in lines)
        {
            lock (numbers)
            {
                numbers.Add(ProcessLine(line));
            }
        }
    return numbers;
} 
```

给我：**2075ms 2106ms**

所以我认为，如果 csv 中的这些数字不需要在程序中以某种方式（通过一些广泛的计算左右）计算然后存储在程序中，那么在这种情况下使用并行性是没有意义的，因为这会增加一些开销.

# jquery-mobile - 有什么方法可以处理 jQuery mobile 中的闪烁屏幕

> ID：11881932
> 
> 赞同：0
> 
> 时间：2012-08-09T11:00:28.133
> 
> 标签：jquery-mobile

我正在使用 jQuery mobile 1.1.0，我遇到了一个问题，当我在浏览器中运行应用程序时它工作正常，但是当我通过“主屏幕图标”运行它时，它开始闪烁页面。

我正在使用 iPhone 5.1。

有人有这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:31:15.070

您需要更新到 jQM 1.1.1，此版本已修复屏幕闪烁问题。这个问题影响了在像 PhoneGap 这样的 UIWebView 容器中运行 jQM，但我认为当你将它保存在主屏幕上时它是相似的。

尝试更新，看看它是否能解决您的问题。

[宣布 jQuery Mobile 1.1.1](http://jquerymobile.com/blog/2012/07/12/jqm-1-1-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:26:15.330

这是因为页面转换。如果您暂时全局禁用它们，您将解决您的问题。失去过渡很糟糕，但白色的“闪光”要糟糕得多。

这是关于禁用页面转换的文档：http: [//jquerymobile.com/test/docs/api/globalconfig.html](http://jquerymobile.com/test/docs/api/globalconfig.html)

# c# - Silverlight 中的发送键

> ID：11881933
> 
> 赞同：3
> 
> 时间：2012-08-09T11:00:36.187
> 
> 标签：c#, silverlight, keyboard, sendkeys, keystroke

是否有可能在 Silverlight5 应用程序中使用函数 SendKeys？因为我想在我的应用程序中模拟“Key.Right”。

# android - Android：getMacAddress() 作为唯一标识符有多可靠

> ID：11881934
> 
> 赞同：0
> 
> 时间：2012-08-09T11:00:38.230
> 
> 标签：android, wifi

getConnectionInfo().getMacAddress() 用作唯一设备标识符时是否存在已知错误或问题？

其中一种选择，Android ID，似乎在某些平板电脑上不可用（或不是真正唯一的）。失败...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:08:21.653

我知道的唯一问题是它只有在启用 Wi-Fi 时才可用。

我认为这是一个大问题，因为一些智能手机用户可能永远不会打开 Wi-Fi。您的应用可以自行开启 Wi-Fi，但这意味着您的应用需要额外的权限“android.permission.CHANGE_WIFI_STATE”。

您的一般问题 - 如何唯一识别设备 - 已被广泛讨论，例如

[是否有唯一的 Android 设备 ID？](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id/2853253#2853253)

[http://android-developers.blogspot.ca/2011/03/identifying-app-installations.html](http://android-developers.blogspot.ca/2011/03/identifying-app-installations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:11:57.663

在去年 Google I/O 的[这段视频中，Reto Meier 准确地谈到了正确识别设备的问题。](http://www.youtube.com/watch?v=twmuBbC_oB8)

对于解决方案，您将不得不观看视频，因为我不记得了。但我确实记得他对“MacAddress”解决方案的担忧。这个解决方案的问题在于它解决了特定的设备而不是特定的“安装”，想想当安装了您的应用程序的用户将他的手机出售给另一个也将安装您的应用程序的人时的问题。使用 MacAddress，您将无法区分这两者...

# windows - 右键单击带有参数的“打开”

> ID：11881938
> 
> 赞同：2
> 
> 时间：2012-08-09T11:00:54.793
> 
> 标签：windows, registry, right-click

我想在 Windows 右键单击​​菜单中添加一个条目，该条目仅在我右键单击 .exe 或 .msi 文件时出现。如果选择了该条目，则将执行 exe 文件（如 Open），但使用固定的文本字符串作为其参数。

我想这应该可以通过注册表项来实现 - 任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:12:00.590

对于`.exe`文件，您可以在注册表中执行以下操作：

1.  在 下`HKEY_Classes_Root`，找到键`.exe`
2.  读取`(Default)`值（这通常是`exefile`）
3.  在 下`HKEY_Classes_Root`，找到密钥`exefile`（或您在步骤 2 中找到的任何内容）
4.  在`exefile\shell`创建一个新密钥下，其名称与您希望在上下文菜单中看到的内容相匹配（例如，“使用我的应用程序打开”）
5.  在您的新密钥下，创建一个名为`command`
6.  将此键的值设置为`(Default)`您要执行的任何命令行。可以使用令牌输入您单击的文件的名称`%1`。因此，例如，您可以将值设置为`notepad.exe %1`在记事本中编辑可执行文件。

类似的模式适用于其他文件类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:05:04.023

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\.exe\shell\Copy Address\command]
@="C:\\Windows\\CopyAddress.exe %1 "

[HKEY_CLASSES_ROOT\.msi\shell\Copy Address\command]
@="C:\\Windows\\CopyAddress.exe %1 " 
```

根据您的选择更改路径和菜单名称（复制地址）。

# r - 通过比较生成向量

> ID：11881942
> 
> 赞同：2
> 
> 时间：2012-08-09T11:01:00.583
> 
> 标签：r

我喜欢通过将向量与列表元素进行比较来生成包含 0 和 1 的向量。我有以下向量：

```
functions=c("abline", "as.numeric", "attach", "data.frame", "ddply", "mean") 
```

这个“函数”向量现在应该与包含该向量子集的向量列表相结合。该列表如下所示：

```
[[1]]
[1] "data.frame"

[[2]]
[1] "data.frame" "ddply"      "mean"      

[[3]]
[1] "data.frame" "abline"      "attach"      "mean"
... 
```

因此，我想按照“函数”向量的顺序和长度生成一个向量，其中包含与“函数”向量匹配的每个元素的 1 和不可用的 0。我想放入数据框中的所有这些。对于这三个列表元素，此结果将类似于以下内容：

```
 "abline" "as.numeric" "attach" "data.frame"  "ddply"  "mean"
1      0          0          0           1          0       0
2      0          0          0           1          1       1
3      1          0          1           1          0       1 
```

有谁知道我怎么能做到这一点？

最好的萨布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:08:29.873

创建数据

```
functions=c("abline", "as.numeric", "attach", "data.frame", "ddply", "mean")

mylist <- list(
  c("data.frame"),
  c("data.frame","ddply","mean"),
  c("data.frame","abline","attach","mean")
) 
```

然后你可以简单地做：

```
> solution <- lapply(mylist,function(i) as.numeric(functions %in% i))

> mydf <- as.data.frame(do.call(rbind,solution))

> names(mydf) <- functions

> mydf
  abline as.numeric attach data.frame ddply mean
1      0          0      0          1     0    0
2      0          0      0          1     1    1
3      1          0      1          1     0    1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:18:02.240

您可以使用嵌套`sapply`：

```
list <- list("data.frame",c("data.frame","ddply","mean"),c("data.frame","abline","attach","mean"))

sapply(functions,function(x) sapply(list,function(y) as.numeric(x%in%y)))
     abline as.numeric attach data.frame ddply mean
[1,]      0          0      0          1     0    0
[2,]      0          0      0          1     1    1
[3,]      1          0      1          1     0    1 
```

或者只是一个，如果你使用`factor`and `table`：

```
do.call("rbind",lapply(list,function(x) table(factor(x,levels=functions))))
     abline as.numeric attach data.frame ddply mean
[1,]      0          0      0          1     0    0
[2,]      0          0      0          1     1    1
[3,]      1          0      1          1     0    1 
```

# php - PHP If Else with isset: else 部分不起作用

> ID：11881944
> 
> 赞同：3
> 
> 时间：2012-08-09T11:01:06.553
> 
> 标签：php, if-statement, isset

**PHP 部分在这里**所以当我发布它时，else 部分根本不起作用（意思是：我设置的文本消失了），而另一半有效（意思是：我可以分配变量，但不能留空）。我整晚都在为此苦苦挣扎……请帮忙！所以这是第二页，如果你需要看第一页的代码，请告诉我！

```
<?php
$lovers = $_POST['lovers'];
$quote = $_POST['quote'];
$color = $_POST['color'];
$font = $_POST['font'];
$imdblink = $_POST['imdblink'];
?>

<?php
if (isset($_POST['lovers']))  
    {
$lovers = $_POST['lovers'];
    }else{
        echo "P & M";
     }

if (isset($_POST['quote']))  
     {
        $quote = $_POST['quote'];
     }else{
        echo "I love you.";
     }

  if (isset($_POST['color']))  
     {
        $color = $_POST['color'];
     }else{
        echo "yellow";
     }

  if (isset($_POST['font']))  
     {
        $font = $_POST['font'];
     }else{
        echo "Futura";
     }

  if (isset($_POST['imdblink']))  
     {
        $imdblink = $_POST['imdblink'];
     }else{
        echo "http://www.imdb.com/";
     }
?> 
```

**这是 HTML 部分：**这里有什么问题吗？请帮忙！

```
<div class="artGroup slide">
  <div class="artwork"> <img src="../_images/M&P.png">
    <div class="detail">
      <div class="movie01c" style="font-family: <?php echo "{$font}"; ?>; font-size: 20px; color: <?php echo "{$color}";?>;">
     <?php echo "{$quote}";?>
      </div>
      <div class="movie01t"><a href="<?php echo "{$imdblink}";?>">
      <?php echo "{$lovers}";?>
      </a></div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:03:37.713

而不是 using `echo`，在 else 部分也使用变量赋值。

```
if (isset($_POST['lovers'])) {
    $lovers = $_POST['lovers'];
}else{
    $lovers = "P & M";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T05:30:14.193

isset() 告诉你变量是否存在。如果您有一个表单（您没有为其显示 html），并且有人将该字段留空，则该字段存在但为空。表单提交后表单元素是不可能不存在的，所以 isset() 永远不会返回 FALSE。所以你想使用 !empty() 而不是 isset()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:07:31.463

你的陈述应该像......

```
if (isset($_POST['lovers']) && ($_POST['lovers'] != ''))
{
    $lovers = $_POST['lovers'];
}
else
{
    $lovers = "P & M";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T11:15:47.103

三元运算符会使它变得更加清晰。

例如：

```
$imdblink = ((isset($_POST['imdblink'])) ? ($_POST['imdblink']) : ('http://www.imdb.com/')); 
```

此外，您应该定义默认值，并使用变量变量。（这里是一个不使用定义的例子）

```
$vars = array('imdblink' => 'http://www.imdb.com/');
foreach ($vars as $varName => $defaultVal)
  $$varName = ((isset($_POST[$varName])) ? ($_POST[$varName]) : ($defaultVal)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T11:08:19.187

你不想回显，你想分配它，然后你会在你的其他 PHP 脚本中打印它。

如果 $_POST 数组中没有它，我认为您正在尝试设置默认值。尝试

```
$color = isset($_POST['color']) ? $_POST['color'] : 'yellow'; 
```

如果您从不想要空白颜色，请使用

```
$color = !empty($_POST['color']) ? $_POST['color'] : 'yellow'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T11:08:28.920

这应该工作

```
<?php
$lovers = isset($_POST['lovers']) ? $_POST['lovers'] : "P & M" ;
$quote = isset($_POST['quote'])? $_POST['quote'] : "I Love You";
$color = isset($_POST['color'])? $_POST['color'] : "yellow";
$font = isset($_POST['font']) ? $_POST['font'] : "Futura";
$imdblink = isset($_POST['imdblink'])? $_POST['imdblink']: "http://www.imdb.com/";
?> 
```

如果您想确保该字段不是...空，您可以替换`isset`为`!empty`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T11:19:14.113

你所有的 isset`$_post`函数都可能起作用，因为它不会出现在 else 部分。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-31T05:55:15.090

`isset``false`仅当变量未设置或设置为 时才返回`null`。`true`当变量为（空字符串）时它将返回，`''`这将是您在第一页的该字段中没有输入值时获得的值。

您需要使用`empty`它才能正常工作，这将返回`true`未设置和空的 vlues。它`false`为非空值返回。您需要在前面加上`!`（不是运算符）才能在此处使用它。

你正在使用变量赋值 in`if`和`echo`in `else`。我认为这就是问题的原因。将其更改`echo`为分配。

```
if (!empty($_POST['lovers']))  
{
    $lovers = $_POST['lovers'];
}else{
    $lovers = "P & M";
} 
```

别忘了`!`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-27T19:59:08.327

这是一个想法。首先声明变量和值。如果`$_POST['lovers']`不是`null`，则更改变量值：

```
$lovers = "P & M";
if (isset($_POST['lovers']))
{
    $lovers = $_POST['lovers'];
}
echo $lovers; 
```

# javascript - AJAX $_FILES 和 $_POST 同时

> ID：11881948
> 
> 赞同：1
> 
> 时间：2012-08-09T11:01:20.963
> 
> 标签：javascript, jquery, ajax, post, file-upload

我正在尝试将产品以及一些图片添加到数据库中，服务器端是 PHP。我想通过 AJAX 异步上传所有内容。我希望将图片保存在产品 id ( `thumbs/productID`) 之后的目录名称中。

第一部分，即提交产品信息并检索其 id 已完成。但是，在上传文件时，我无法同时上传文件和字符串，以告知我的脚本要保存在哪个文件夹中。但是，我只能发送文件。

有没有办法同时发送文件和文本？任何帮助，将不胜感激。

```
$('#register-product').on('submit', function ( evt ) {
    evt.preventDefault();
    var i = 0, len = document.getElementsByName("images").length-1, reader, file;
    var myFiles = document.getElementsByName("images");
    // Adds all files to formdata
    for ( ; i < len; i++ ) {
        file = myFiles[i].files[0];
        if (!!file.type.match(/image.*/)) {
            if ( window.FileReader ) {
                reader = new FileReader();
                reader.readAsDataURL(file);
            }
            if (formdata) {
                formdata.append("images[]", file);
            }
        }   
    }
    // Send data to the server.
    if (formdata) {
        $.ajax({ 
            url: "upload.php",
            type: "POST",
            // data: formdata, // This is correct
            data: {formdata, id: 1}, // This doesn't work
            processData: false, 
            contentType: false,
            success: function (res) {
                console.log(res);
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:04:45.587

只需将另一个值附加到您的表单数据：

```
//...
formdata.append("id", 1);
if (formdata) { //... 
```

您可以通过 $_POST["id"] 访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:55:47.010

您不能使用 AJAX 发布请求发送文件。

不会发送文件的标头数据。

所以你需要做一些 iframe 技巧或使用文件 API。

# gwt - 如何增加 Gwt Horizo ntal Panel 表格高度

> ID：11881949
> 
> 赞同：2
> 
> 时间：2012-08-09T11:01:20.913
> 
> 标签：gwt

尝试使用以下代码设置水平面板的表格高度。下面的代码有什么问题吗。当我在火狐的火虫模式下运行它时，我知道高度适用于 HTML 的“TD”元素，但不适用于 HTML 的“TABLE”元素。

```
setCellHeight(resetButton, "400") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:26:36.930

我认为 setCellHeight() 方法适用于表格内的单元格而不是表格，因此高度适用于“TD”元素而不是 HTML 的“TABLE”元素是正常的。

设置表格高度的方法是使用 addStyleName() 方法通过 css 设置高度。

在java代码中：

```
table.addStyleName("table"); 
```

在 CSS 中：

```
 .table{
   height: 400px;
   /*other wished styling*/
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T13:15:45.010

我相信你可能正在寻找[`setHeight()`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/UIObject.html#setHeight%28java.lang.String%29)

```
horizontalPanel.setHeight("400px") 
```

# android-activity - 如何在多个活动中检测 NFC？

> ID：11881967
> 
> 赞同：0
> 
> 时间：2012-08-09T11:02:24.083
> 
> 标签：android-activity, nfc, android-pendingintent

我们是否还需要在每个 Activity 中设置 NfcAdapter、PendingIntent 和 enableForegroundDispatch？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:30:09.863

是的。一种简单的方法是定义一个 BaseNfcActivity 类，您可以在其中进行设置。对于所有需要它的活动，您可以扩展 BaseNfcActvity（而不是活动）。

# java - 如何使用 JNDI 和 Digest-MD5 对 LDAP 进行身份验证

> ID：11881969
> 
> 赞同：5
> 
> 时间：2012-08-09T11:02:35.300
> 
> 标签：java, encryption, ldap, md5, jndi

我正在尝试使用 DIGEST-MD5 加密对我的 LDAP 服务器进行身份验证。虽然使用简单加密它工作得很好，但由于显而易见的原因，我不能通过网络以纯文本形式发送密码。奇怪的是，在使用 Softerra LDAP 浏览器时，我可以使用 Digest-MD5 连接到服务器，但通过我的代码，我收到了一系列错误。

这是来自我的 LDAP 身份验证类的代码片段，我在其中尝试在创建初始上下文之前设置安全身份验证等。

```
Hashtable env = new Hashtable(11);
env.put(Context.SECURITY_AUTHENTICATION, "DIGEST-MD5");
env.put(Context.SECURITY_PRINCIPAL, username);
env.put(Context.SECURITY_CREDENTIALS, password);
env.put(Context.PROVIDER_URL, ldapURI);
env.put(Context.INITIAL_CONTEXT_FACTORY, context);
env.put("com.sun.jndi.ldap.trace.ber", System.out);
try{
    DirContext ctx = new InitialLdapContext(env,null);
} Catch (NamingException e){
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:05:12.067

我的回答没有回答你的问题，而是纠正了一个误解：在 BIND 请求中使用 SASL DIGEST-MD5 机制要求目录服务器有权访问用户的密码。为了让目录服务器能够访问密码，密码必须以明文形式存储或使用可逆密码方案进行加密。可逆密码方案本质上不如加盐 SHA 散列安全，特别是带有长摘要的加盐 SHA-2 散列。因此，使用带有 DIGEST-MD5 的 SASL 不如在安全连接上使用简单的 BIND 请求安全，其中安全连接是从一开始就通过 SSL 加密的连接，或者将非安全连接提升为与StartTLS 扩展操作，并且不如 SASL EXTERNAL 机制或 Kerberos 安全。

误解是“以纯文本形式通过网络发送的密码”的概念并不安全，而事实上，使用加盐 SHA-2 哈希将密码存储在目录服务器中（现代专业质量的目录服务器有能力使用具有长摘要长度的加盐 SHA-2 哈希）并通过安全连接传输明文密码比让目录服务器以明文或可逆加密方案存储密码*更安全。*因此，*应避免使用 DIGEST-MD5 的 SASL*. 具有 EXTERNAL 机制的 SASL，其中服务器从加密会话建立期间提供的证书中提取身份验证信息是更好的选择。Kerberos 也是一个更好的选择。*如果服务器在使用加盐 SHA 算法对密码进行散列后存储密码，*则网络上的纯文本也更安全。

如果将 SASL 与 DIGEST-MD5 一起使用绝对至关重要，则应将目录服务器配置为使用可用的最强加密方案加密密码，除非我弄错了，否则它是 AES。专业品质的服务器可以使用 AES 加密密码。

# sql - Oracle 表条目丢失。

> ID：11881978
> 
> 赞同：0
> 
> 时间：2012-08-09T11:03:07.163
> 
> 标签：sql, database, oracle, oracle11g

昨天我安装了 Oracle 11g 和 Oracle 数据访问。使用我使用的已安装的 sql*plus 控制台`/nolog`和 `connect / as SYSDBA`，然后我创建了一些用户并授予他们特权。我创建了一个表并插入了一些值。关闭并重新打开控制台后，表存在，但条目丢失。我也尝试以用户身份登录并创建了一个表......但重新启动后条目再次丢失。难道是环境变量错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:12:42.163

就像约翰说的那样，使用该[`commit;`语句](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_4010.htm)使您的更改永久化。

# mysql - CloverETL mySQL 数据库 SSL 安全连接和参数

> ID：11881979
> 
> 赞同：0
> 
> 时间：2012-08-09T11:03:07.237
> 
> 标签：mysql, ssl, parameters, connection

我正在尝试在 CloverETL Designer（社区版）中连接到远程 mysql 数据库

关于这个主题的示例文档似乎是零散的，所以我试图将这些位拼凑在一起，但如果它们是正确的，我就不会使用它们。我将不胜感激有关此主题的任何建议或进一步澄清。

这是我到目前为止所拥有的：

**SSL 证书**

作为替代 VPN 连接，服务器人员将原始 CA 证书传递给我，我将其保存为 CloverETL 工作区的 conn 文件夹中的 .crt 文件。

**CloverETL 连接**

*   我创建了一个新的数据库连接并测试它在没有 SSL 的情况下工作
*   在图表窗口中，我创建了一个简单的图表
*   切换到源视图我将参数属性添加到连接代码中，如下所示：

    `<Connection database="MYSQL" dbURL="jdbc:mysql://hostname/database_name" id="JDBC0" jdbcSpecific="MYSQL" name="CPM" parameters="ssl=${WORKSPACE}/conn/mysql_cpm_cert.crt" password="password" type="JDBC" user="username"/>`

*   然后我通过从数据库表创建新元数据来测试与数据库的连接

**问题是我不知道连接现在是否安全。**

这是我用来拼凑信息的资源列表：

[组件：bulkloaders：mysql_data_writer [CloverETL wiki]](http://wiki.cloveretl.com/doku.php?id=components%3abulkloaders%3amysql_data_writer#load_parameters)

[MySQL :: MySQL 5.0 参考手册 :: 6.3.6.3 SSL 命令选项](http://dev.mysql.com/doc/refman/5.0/en/ssl-options.html#option_general_ssl-cert)

感谢每千次展示费用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:59:14.037

您的设置几乎可以肯定不使用 ssl。您发布的两个链接均不可用 - 首先描述批量加载程序和通过命令行客户端的第二个连接。但是你需要的是配置 JDBC。所以我会使用[http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)部分“安全性”。

我会设置：

*   使用 SSL=true
*   要求SSL=真

您将通过在连接向导的第二个选项卡（高级）上的表（自定义 JDBC 属性）中添加项目来做到这一点。在源代码中，它应该看起来像“jdbc.useSSL=true jdbc.requireSSL=true”而不是“parameters=”。

然后连接应该失败，因为在您的默认 java 密钥库中缺少您的证书。它可以通过[http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html) “导入证书”部分导入

我希望这有帮助。

# python - 即使在 bash 中设置 http_proxy 后，urllib2 给出 Network is unreachable 错误

> ID：11881986
> 
> 赞同：0
> 
> 时间：2012-08-09T11:03:38.567
> 
> 标签：python, google-app-engine, proxy, urllib2

我正在尝试在本地测试我的 Google App Engine (Python) 应用程序。我需要做一些 URL 获取，我尝试过，但显示以下错误消息。

```
"urllib2.URLError: <urlopen error [Errno 101] Network is unreachable>" 
```

所以我试图检查部署是否发生。它也导致了同样的错误

然后我在 Python shell 中尝试了：

```
>>>import urllib2
>>>a = urllib2.urlopen("http://google.com")
>>>a.code
200
>>>a.readlines
<addinfourl at 155594924 whose fp = <socket._fileobject object at 0x9443d6c>> 
```

虽然响应代码是 200。如果我执行 a.readlines，我不会得到实际的 HTML。（a.readlines 应该输出 html？）在上面尝试之前，我在环境中设置了我的 http_proxy 变量。我什至试过了`urllib2.install_opener(ProxyConfiguredOpener)`。它仍然不起作用。

我无法`urllib2`打开任何 URL，因此我无法使用很多工具，例如`urllib2`用于部署的 Google App Engine。任何人都可以告诉什么是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:20:22.207

`a.code == 200`表示`urllib2.urlopen()`在 Python shell 中运行时成功。

在 App Engine 中运行时`urllib2.urlopen()`使用`google.appengine.api.urlfetch()`.

如果您在本地运行它，它应该使用您的本地网络配置。[修复了无法在代理后面使用](http://code.google.com/p/googleappengine/issues/detail?id=544)的错误urlfetch 。

# iphone - 如何使用 kAudioUnitType_Effect 的 kAudioUnitSubType_LowShelfFilter 来控制核心音频中的低音？

> ID：11881987
> 
> 赞同：8
> 
> 时间：2012-08-09T11:03:41.030
> 
> 标签：iphone, ios, core-audio, ipod, bass

我又回来了一个与**BASS**相关的问题。我已经发布了这个问题**[How Can we control bass of music in iPhone](https://stackoverflow.com/questions/11824207/how-can-we-control-bass-of-music-in-iphone-sdk)**，但没​​有得到应有的关注。但现在我进行了更多搜索并阅读了**Core AUDIO**。我有一个示例代码，我想在这里与大家分享它是**[iPhoneMixerEqGraphTest](http://developer.apple.com/library/ios/#samplecode/iPhoneMixerEQGraphTest/Introduction/Intro.html)**的下载链接。看看这段代码，我看到的是开发人员使用了苹果 iPod 提供的预设均衡器。让我们看看一些代码片段：----

```
// iPodEQ unit
CAComponentDescription eq_desc(kAudioUnitType_Effect, kAudioUnitSubType_AUiPodEQ, kAudioUnitManufacturer_Apple); 
```

kAudioUnitSubType_AUiPodEQ 所做的是它从 iPod 的均衡器中获取预设值并在 Xcode 中以数组的形式返回我们，我们可以在 PickerView/TableView 中使用该数组，并且可以设置任何类别，如贝司、摇滚、舞蹈等。这对我来说很无助，因为它只返回名称均衡器类型，如低音、摇滚、舞蹈等，因为我只想实现低音并希望在 UISLider 上实现它。

要在滑块上实现低音，我需要一些值，以便我可以设置最小值和最大值，以便可以更改移动滑块上的低音。

在得到所有这些之后，我开始阅读 Core Audio 的音频单元框架的类并得到了这个![iPod Desc 图片](../Images/05211aee0231b593151fe4f855745af9.png) ，然后我开始搜索低音控制并得到了这个

![在此处输入图像描述](../Images/accc27564fc8116235139f7933acfbc0.png)

所以现在我需要实现这个**kAudioUnitSubType_LowShelfFilter**。但是现在我不知道如何在我的代码中实现这个枚举，以便我可以将低音控制为书面文档。甚至 Apple 也没有写过我们如何使用它。**kAudioUnitSubType_AUiPodEQ**这个类别向我们返回了一个数组，但**kAudioUnitSubType_LowShelfFilter**类别没有返回任何数组。在使用**kAudioUnitSubType_AUiPodEQ**这个类别时，我们可以使用数组中的均衡器类型，但是我们如何使用这个类别**kAudioUnitSubType_LowShelfFilter**。任何人都可以以任何方式帮助我吗？这将是非常可观的。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T09:24:44.007

**更新**

尽管它在 iOS 标头中声明，但 Low Shelf AU 实际上在 iOS 上不可用。

* * *

Low Shelf 的参数与 iPod EQ 不同。

参数在“AudioUnit/AudioUnitParameters.h”中声明和记录：

```
// Parameters for the AULowShelfFilter unit
enum {
  // Global, Hz, 10->200, 80
  kAULowShelfParam_CutoffFrequency = 0,

  // Global, dB, -40->40, 0
  kAULowShelfParam_Gain = 1
}; 
```

因此，在创建低架 AU 后，使用`AudioUnitSetParameter`.

您可以尝试的一些初始参数值是 120 Hz (kAULowShelfParam_CutoffFrequency) 和 +6 dB (kAULowShelfParam_Gain) - 假设您的系统能够很好地再现低音，您的低频内容应该是两倍大。

* * *

> 你能告诉我如何使用这个 kAULowShelfParam_CutoffFrequency 来改变频率。

如果一切配置正确，这应该就是所需要的：

```
assert(lowShelfAU);
const float frequencyInHz = 120.0f;
OSStatus result = AudioUnitSetParameter(lowShelfAU,
                                        kAULowShelfParam_CutoffFrequency,
                                        kAudioUnitScope_Global,
                                        0,
                                        frequencyInHz,
                                        0);
if (noErr != result) {
  assert(0 && "error!");
  return ...;
} 
```

# c++ - 在 Qt 中使用 QRubberBand 裁剪图像

> ID：11881989
> 
> 赞同：3
> 
> 时间：2012-08-09T11:03:57.867
> 
> 标签：c++, qt, user-interface, crop

我希望能够使用橡皮筋选择图像的一个区域，然后删除橡皮筋之外的图像部分并显示新图像。但是，当我目前这样做时，它不会裁剪正确的区域并给我错误的图像。

```
#include "mainresizewindow.h"
#include "ui_mainresizewindow.h"

QString fileName;

MainResizeWindow::MainResizeWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainResizeWindow)
{
    ui->setupUi(this);
    ui->imageLabel->setScaledContents(true);
    connect(ui->actionOpen, SIGNAL(triggered()), this, SLOT(open()));
}

MainResizeWindow::~MainResizeWindow()
{
    delete ui;
}

void MainResizeWindow::open()
{
    fileName = QFileDialog::getOpenFileName(this, tr("Open File"), QDir::currentPath());

    if (!fileName.isEmpty()) {
        QImage image(fileName);

        if (image.isNull()) {
            QMessageBox::information(this, tr("Image Viewer"),
                                 tr("Cannot load %1.").arg(fileName));
            return;
        }

    ui->imageLabel->setPixmap(QPixmap::fromImage(image));
    ui->imageLabel->repaint();
    }
}

void MainResizeWindow::mousePressEvent(QMouseEvent *event)
{
    if(ui->imageLabel->underMouse()){
        myPoint = event->pos();
        rubberBand = new QRubberBand(QRubberBand::Rectangle, this);
        rubberBand->show();
    }
}

void MainResizeWindow::mouseMoveEvent(QMouseEvent *event)
{
    rubberBand->setGeometry(QRect(myPoint, event->pos()).normalized());
}

void MainResizeWindow::mouseReleaseEvent(QMouseEvent *event)
{
    QRect myRect(myPoint, event->pos());

    rubberBand->hide();

    QPixmap OriginalPix(*ui->imageLabel->pixmap());

    QImage newImage;
    newImage = OriginalPix.toImage();

    QImage copyImage;
    copyImage = copyImage.copy(myRect);

    ui->imageLabel->setPixmap(QPixmap::fromImage(copyImage));
    ui->imageLabel->repaint();
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:48:49.250

这里有两个问题 - 矩形相对于图像的位置以及图像（可能）在标签中缩放的事实。

职位问题：

```
QRect myRect(myPoint, event->pos()); 
```

您也许应该将其更改为：

```
QPoint a = mapToGlobal(myPoint);
QPoint b = event->globalPos();

a = ui->imageLabel->mapFromGlobal(a);
b = ui->imageLabel->mapFromGlobal(b); 
```

然后，标签可能会缩放图像，因为您使用了 setScaledContents()。因此，您需要计算出未缩放图像上的实际坐标。可能是这样的（未经测试/编译）：

```
QPixmap OriginalPix(*ui->imageLabel->pixmap());
double sx = ui->imageLabel->rect().width();
double sy = ui->imageLabel->rect().height();
sx = OriginalPix.width() / sx;
sy = OriginalPix.height() / sy;
a.x = int(a.x * sx);
b.x = int(b.x * sx);
a.y = int(a.y * sy);
b.y = int(b.y * sy);

QRect myRect(a, b);
... 
```

# java - 通过共享菜单接收来自其他应用程序的文本

> ID：11881991
> 
> 赞同：3
> 
> 时间：2012-08-09T11:04:01.207
> 
> 标签：java, android, android-intent

我正在为自己编写一个语言词典应用程序（作为一种 Android 编程学习练习）。

我希望我的应用程序在其他应用程序的意图选择器中列为一个选项，因此我将这些代码行添加到我的清单中：

```
 <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" /> 
            <data android:mimeType="text/plain" />
        </intent-filter> 
```

我的应用程序成功出现在其他应用程序（例如浏览器）的操作菜单中，这很好。当我从浏览器操作菜单中选择它时，我的应用程序也通过 Share 成功调用。

现在我希望我的应用程序接收和处理从其他应用程序发送的文本（一个单词），然后自动查找文本以了解其定义。我将以下代码行添加到我的应用程序的主要活动中：

```
//(under onCreate)
Intent intent = getIntent();
String action = intent.getAction();
String type = intent.getType();
            EditText edittext = (EditText) findViewById(R.id.edWord);

            if (Intent.ACTION_SEND.equals(action) && type != null) {
                if ("text/plain".equals(type)) {

                    String sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);
                    if (sharedText != null) {                        
                          edittext.setText(sharedText);
                    }
                }
            } 
```

但是在这个阶段，每次通过共享从操作菜单中选择我的应用程序时，浏览器都会崩溃。

所以涉及到我的问题：

1.  **我做错了什么？**
2.  **如何/我可以做些什么来“强制”我的应用程序接受来自其他应用程序的文本，并自动显示其定义？**

抱歉，这些都是菜鸟问题（不过，我很头疼）。

非常感谢您的帮助。

**更新 1**

谢谢，通用软件。浏览器崩溃时什么也没有产生，但是当我从我的应用程序的 Web 视图中选择“共享”时，我得到了这个日志猫：

```
08-09 18:17:23.726: W/dalvikvm(1111): threadid=1: thread exiting with uncaught exception (group=0x409961f8) 
08-09 18:17:23.776: E/AndroidRuntime(1111): FATAL EXCEPTION: main   
08-09 18:17:23.776: E/AndroidRuntime(1111): java.lang.RuntimeException: Unable to start activity ComponentInfo{peter.kadict/peter.kadict.Kadict}: java.lang.NullPointerException    
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.os.Looper.loop(Looper.java:137)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.app.ActivityThread.main(ActivityThread.java:4340)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at java.lang.reflect.Method.invokeNative(Native Method)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at java.lang.reflect.Method.invoke(Method.java:511)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at dalvik.system.NativeStart.main(Native Method)
08-09 18:17:23.776: E/AndroidRuntime(1111): Caused by: java.lang.NullPointerException   
08-09 18:17:23.776: E/AndroidRuntime(1111):     at peter.kadict.Kadict.onCreate(Kadict.java:449)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.app.Activity.performCreate(Activity.java:4465)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-09 18:17:23.776: E/AndroidRuntime(1111):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
08-09 18:17:23.776: E/AndroidRuntime(1111):     ... 11 more 
```

**更新 2**

感谢**CommonsWare** ，这段代码解决了这个问题。

```
 Intent intent = getIntent();
    String action = intent.getAction();
    String type = intent.getType();               

    if (Intent.ACTION_SEND.equals(action) && type != null) {
        if ("text/plain".equals(type)) {

            String sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);

            if (sharedText != null) {
                setContentView(R.layout.main);
                EditText edittext = (EditText) findViewById(R.id.edWord);
                    edittext.setText(sharedText);
                }
        }     
    } 
```

但它没有完成它的任务：应用程序已加载，但似乎没有接收和处理从其他应用程序发送的文本（单词）。

你们能帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:17:17.480

任何一个：

*   你没有打电话`setContentView()`，或者

*   您没有带有of的`EditText`小部件，或`android:id``@+id/edWord`

*   清理您的项目（例如，Eclipse 主菜单中的 Project > Clean）并重试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:24:25.823

所以我遇到了同样的问题，我不知道活动有什么问题，所以我通过获取共享文本并将其放入一个捆绑包中解决了这个问题，以实现我想做的任何事情

这是我的代码

```
public class GetFromShared extends Activity {
    TextView tex;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        Intent intent = this.getIntent();
        String action = intent.getAction();
        String type = intent.getType();
        if (Intent.ACTION_SEND.equals(action) && type != null) {
            if ("text/plain".equals(type)) {

                String sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);
                Log.d("Shared text is", sharedText);

                Intent rooy = new Intent(getApplicationContext(),
                        BayenELText.class);

                rooy.putExtra("GotText", sharedText);
                startActivity(rooy);

            }
        }

    }
} 
```

接收类是

```
public class BayenELText extends Activity {
    TextView blabla;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.getsharedtext);
        blabla = (TextView) findViewById(R.id.etSharedText);
        Bundle extras = getIntent().getExtras();

        String hloho = extras.getString("GotText");
        blabla.setText(hloho);

    }
} 
```

当它从共享调用时，日志会显示共享文本，但是当它调用时我想到的是 Intent 过滤器

```
<action android:name="android.intent.action.SEND" /> 
```

没有权限对视图进行任何更改，以便我如何解决它并且它工作正常；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:48:41.837

当我看到这个 logcat 输出时，我立即想到找不到活动的事实。如果是这种情况，将抛出 NPE。

所以： 1\. 你的 AndroidManifest.xml 中有活动吗？2\. 可以自己开始活动`adb shell am start -n peter.kadict/peter.kadict.Kadict`吗？

# java - Java URI 中的 IllegalArgumentException

> ID：11881993
> 
> 赞同：0
> 
> 时间：2012-08-09T11:04:18.797
> 
> 标签：java, android, url

我想创建这样的 HttpPost 请求：

```
http://site/searches.json -d"search[params_attributes[origin_name]=MOW"\ -d"search[params_attributes][destination_name]=IEV"\ -d"search[params_attributes[some]=SOME" 
```

我用手试了一下——效果很好。但我有错误：

```
Caused by: java.lang.IllegalArgumentException: Illegal character in path at index 43:  http://somesite/searches.json -d"search[params_attributes][origin_name]=KBP"...
at java.net.URI.create(URI.java:776)
at org.apache.http.client.methods.HttpPost.<init>(HttpPost.java:79) 
```

它说错误在第一个空间位置。有任何想法吗？

编辑：

我试过了：

```
mMethodURI = URLEncoder.encode(mMethodURI, "UTF-8"); 
```

并得到：

```
Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters.
at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:572)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:292)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:11:03.927

尝试使用

```
 URLEncoder.encode(url);
    URLDecoder.decode(url); 
```

对您的网址进行编码和解码。

尝试使用以下代码并确保在清单文件中设置了所有权限。

```
public String executeUrl(String url, Context context) 
{
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(url);
    HttpResponse httpResponse;
    String result = null;

    try
    {
        httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        if(httpEntity != null)
        {
            InputStream inputStream = httpEntity.getContent();
            result = Parser.convertStreamToString(inputStream);
            inputStream.close();
        }
    }
    catch(UnknownHostException eUnknownHostException) 
    {
        eUnknownHostException.printStackTrace();
        result = null;
    }
    catch(ConnectTimeoutException eConnectTimeoutException) 
    {
        // TODO: handle exception
    }
    catch(Exception exception)
    {
        exception.printStackTrace();
        result = null;
    }
    return result;
}

private String convertStreamToString(InputStream ipStream)
{
    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(ipStream), 8192);
    StringBuilder stringBuilder = new StringBuilder();
    String line = null;
    try
    {
        while((line = bufferedReader.readLine()) != null)
        {
            stringBuilder.append(line + "\n"); 
        }
    }
    catch(IOException ioException)
    {
        ioException.printStackTrace();
    }
    finally
    {
        try
        {
            ipStream.close();
        }
        catch(IOException ioException)
        {
            ioException.printStackTrace();
        }
    }

    return stringBuilder.toString();
} 
```

# javascript - 不要在javascript中返回关联数组

> ID：11881995
> 
> 赞同：0
> 
> 时间：2012-08-09T11:04:38.803
> 
> 标签：javascript, arrays, associative-array, key-value

当我在 javascript 中创建关联数组时，我遇到了这样的问题。我想通过使用字段名作为键来获取值，但我只是没有定义。我应该怎么做才能通过键获得价值或哪种方式是好的方法。

这是我的代码

```
function getFields(pVal){
    var tmpObj = {};
    str = pVal.split(",");
    for(i=0;i<str.length;i++){
        tmpVal = str[i].split(":");
        tmpObj[tmpVal[0]] = tmpVal[1];  
    }
    return tmpObj;
}

function JustTest(){
   var fields = {}; 
   fields = getFields("'Code':'PRJ001','Name':'Project 01'");
   alert(fields['Code']);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:08:53.453

因为关键是`'Code'`，不是`Code`，注意单引号`'`，你需要做 `alert(fields["'Code'"]);`

***PS：***请`;`在语句末尾添加，省略它们是不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:17:06.263

我已经重构了代码，试试这个：

```
function getFields(pVal) {
    var tmpObj = {};
    var str = pVal.split(",");
    for (var i = 0; i < str.length; i++) {
        var tmpVal = str[i].split(":");
        tmpObj[tmpVal[0]] = tmpVal[1];
    }
    return tmpObj;
}

function JustTest() {
    var fields = { };
    fields = getFields("'Code':'PRJ001','Name':'Project 01'");
    alert(fields["'Code'"]);
} 
```

如果您有任何问题，请在下面评论代码，谢谢

# java - JME：将带有纹理的 Cinema 4d 模型导入 jMonkey Projekt

> ID：11881996
> 
> 赞同：0
> 
> 时间：2012-08-09T11:04:40.277
> 
> 标签：java, jmonkeyengine, 3d-model, cinema-4d

我的问题是：

我在 Cinema 4d 中制作了一个带有纹理的 3D 模型（类似于这个： http: [//preview.turbosquid.com/Preview/2011/03/30__13_54_17/space%20shuttle%206.jpgeec17db2-6651-453c-9d27-ea1908e3c7dfLarge .jpg](http://preview.turbosquid.com/Preview/2011/03/30__13_54_17/space%20shuttle%206.jpgeec17db2-6651-453c-9d27-ea1908e3c7dfLarge.jpg) )

现在我想将它导出到我的 jMonkeyEngine 以在我的场景中设置它并为其设置动画。

我试图将我的模型导出为 .obj 文件并将其加载到我的项目中（只是 .obj 文件）。

结果是我没有纹理！我错了什么？

```
 package mygame;

import com.jme3.app.SimpleApplication;
import com.jme3.light.DirectionalLight;
import com.jme3.material.Material;
import com.jme3.math.ColorRGBA;
import com.jme3.math.Vector3f;
import com.jme3.renderer.RenderManager;
import com.jme3.scene.Geometry;
import com.jme3.scene.Node;
import com.jme3.scene.Spatial;
import com.jme3.scene.shape.Box;

/**
 * test
 * @author normenhansen
 */
public class Main extends SimpleApplication {

    public static void main(String[] args) {
        Main app = new Main();
        app.start();
    }

    @Override
    public void simpleInitApp() {

        //Modell laden
        Spatial spaceShuttle =assetManager.loadModel("Models/test/space.obj");

        //Skalieren
        spaceShuttle.scale(0.005f, 0.005f, 0.005f);

        //Szenenbaum erstellen
        Node sceneNode = new Node("sceneNode");
        Node geometryNode = new Node("geometryNode");
        Node lightNode = new Node("lightNode");

        sceneNode.attachChild(lightNode);
        sceneNode.attachChild(geometryNode);
        rootNode.attachChild(sceneNode);   

        //neue Elemente in den Baum Einfügen
        geometryNode.attachChild(spaceShuttle);

        DirectionalLight sun = new DirectionalLight();
        sun.setDirection(new Vector3f(1,0,-2).normalizeLocal());
        sun.setColor(ColorRGBA.White);
        rootNode.addLight(sun);

    }

    @Override
    public void simpleUpdate(float tpf) {
        //TODO: add update code
    }

    @Override
    public void simpleRender(RenderManager rm) {
        //TODO: add render code
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:13:45.457

你没有做错什么。C4D 仅导出 .obj，但默认不[导出 .mtl](http://en.wikipedia.org/wiki/Wavefront_.obj_file#Material_template_library)。我知道这对于 C4D R11.5 和 R12 来说是正确的，但不确定更新的版本。

您也可以编写一个脚本来导出 .mtl。这是一个 Python 片段供参考：

```
#save mtl
mcount = 0;
mtl = ''
for tag in op.GetTags():  
    if(tag.GetType() == 5616): #texture tag
       mcount += 1
       m = tag.GetMaterial()
       mtl += 'newmtl '+clean(m.GetName())+'\n'
       if(m[sy.MATERIAL_COLOR_COLOR]):   mtl += 'Kd ' + str(m[sy.MATERIAL_COLOR_COLOR].x) + ' ' + str(m[sy.MATERIAL_COLOR_COLOR].y) + ' ' + str(m[sy.MATERIAL_COLOR_COLOR].z) + '\n'
       if(m[sy.MATERIAL_SPECULAR_COLOR]):    mtl += 'Ks ' + str(m[sy.MATERIAL_SPECULAR_COLOR].x) + ' ' + str(m[sy.MATERIAL_SPECULAR_COLOR].y) + ' ' + str(m[sy.MATERIAL_SPECULAR_COLOR].z) + '\n'
       if(m[sy.MATERIAL_SPECULAR_BRIGHTNESS]):   mtl += 'Ns ' + str(m[sy.MATERIAL_SPECULAR_BRIGHTNESS]) + '\n'
       if(m[sy.MATERIAL_TRANSPARENCY_BRIGHTNESS]):   mtl += 'd ' + str(m[sy.MATERIAL_TRANSPARENCY_BRIGHTNESS]) + '\n'
       if(m[sy.MATERIAL_COLOR_SHADER]):  mtl += 'map_Kd ' + str(m[sy.MATERIAL_COLOR_SHADER][sy.BITMAPSHADER_FILENAME]) + '\n'
       if(m[sy.MATERIAL_TRANSPARENCY_SHADER]):   mtl += 'map_d ' + str(m[sy.MATERIAL_COLOR_SHADER][sy.BITMAPSHADER_FILENAME]) + '\n'
       if(m[sy.MATERIAL_BUMP_SHADER]):   mtl += 'map_bump ' + str(m[sy.MATERIAL_BUMP_SHADER][sy.BITMAPSHADER_FILENAME]) + '\n'
       mtl += 'illum 0\n\n\n'#TODO: setup the illumination, ambient and optical density
mtl = '# Material Count: '+str(mcount)+'\n'+mtl
file = open(mtlPath,'w')
file.write(mtl)
file.close() 
```

它是[这个旧脚本](https://github.com/orgicus/three.js/blob/master/utils/exporters/cinema4d/slim_export_to_three.js.py)的一部分，但请注意，这是旧 R11.5 C4D Python API 的一部分，现在的语法有点不同，所以使用更新的文档和以上更多作为寻找什么属性的一般方向。

一个“无代码”的替代方法是将您的模型放入一个不同的 3D 包中，该包可以正确导出 .obj（和 .mtl），例如[Blender](http://www.blender.org/)。您将需要找到一种可以保留材质数据的中间格式（我认为您可以尝试 3DS、Collada、FBX），但要注意单位和坐标系的差异。希望您需要的模型特征以您从 C4D 导出的文件格式保留，并正确导入回其他 3D 包。

# sql - LINQ - 在 Where 子句中使用多个参数的左外连接

> ID：11881997
> 
> 赞同：1
> 
> 时间：2012-08-09T11:04:40.880
> 
> 标签：sql, linq, llblgenpro

如何在 LINQ 中执行此 SQL 查询：

```
select * from chat c
left outer join lead s on c.key = s.id
where (typeId = 5 AND c.key = @clientId) OR (c.typeId = 4 AND s.clientId = @clientId) 
```

或者这个 SQL 查询——相同，相同

```
select * from chat c
where (typeId = 5 AND c.key = @clientId) OR (typeId = 4 AND c.key in (select id from lead where clientId = @clientId)) 
```

我有的：

```
var chatter = (from chat in linq.Chat
             join lead in linq.Lead
                on chat.key equals lead.Id.ToString() into clientLeads
                from cl in clientLeads.Where(l => l.clientId == clientId).DefaultIfEmpty()
            where (chat.typeId == 5 && chat.key == clientId.ToString()) ||
                (chat.typeId == 4 && chat.key == cl.Id.ToString())
                select chat).WithPath(prefetchPath).OrderByDescending(c => c.CreatedDate); 
```

上面的 LINQ 查询没有从后面的 WHERE 子句中产生任何结果，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:15:08.840

我将第二个查询翻译为 linq：

```
var leadIds = linq.Lead.Where(l => l.clientId == clientId.ToString()).Select(l => l.id);
var chatter = from chat in linq.Chat
              where (chat.typeId == 5 && chat.key == clientId.ToString()) ||
                    (chat.typeId == 4 && leadIds.Contains(chat.key)); 
```