# StackOverflow 问答 11361000-11361999

# javascript - 将标题页中的单词大写直到连字符

> ID：11361003
> 
> 赞同：5
> 
> 时间：2012-07-06T11:04:51.423
> 
> 标签：javascript, jquery, capitalize

这是我页面的标题：

```
<title>john smith - Site and site - jobs</title> 
```

在第一个 hifen (-) 之前，我必须将页面标题大写。这是我的代码，但丢失了第二部分和第一个连字符。

```
function toTitleCase(str){
    var str  = document.title;
    subTitle = str.split('-')[0];
    return str.substring(0,str.indexOf('-')).replace(/\w\S*/g, function(txt){
        return txt.charAt(0).toUpperCase() + txt.substring(1);
    });
}
document.title = toTitleCase(document.title); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:17:30.287

加入核 REGEX 路线总是很好......

```
var str = "some words - are - here";
console.log("this is - a - string".replace(/^[^\-]*/, function($0) {
    return $0.replace(/\b[a-z]/g, function($0) { return $0.toUpperCase(); });
})); 
```

输出：

```
"Some Words - are - here" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:08:53.627

```
function toTitleCase(str){
    str = str.split('-');
    str[0]=str[0].replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
    return str.join("-");
    }
document.title = toTitleCase(document.title); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:50:48.257

这可能有帮助..

```
function ok()
{
  var str  = document.title;
  document.title=str.substring(0, str.indexOf('-')).toUpperCase()+str.substring(str.indexOf('-'),str.length); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T11:32:54.290

此代码将为您提供帮助。

```
function toTitleCase(str) {
        subTitle = str.split('-')[0].capitalize();
        return subTitle + str.substring(subTitle.length);
    }

    String.prototype.capitalize = function () {
        return this.replace(/\w\S*/g, function (txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); });
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T11:12:34.593

总结答案“最好的”+我的一粒盐：

```
String.prototype.capitalize = function () {
  return this.replace(/\b[a-z]/g, function ($0) { return $0.toUpperCase(); });
};

function capitalizeTitle()
{
  document.title = document.title.replace(/^[^\-]*/, function($0) {
    return $0.capitalize();
  });
}

capitalizeTitle(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T11:46:29.423

嘿，请试试这个：http: [//jsfiddle.net/LK3Vd/](http://jsfiddle.net/LK3Vd/)

让我知道我是否错过了什么。

希望这可以帮助`:)`

**代码**

```
var str = $('#foo').html();
str = str.substring(0, str.indexOf('-'));

str = str.toLowerCase().replace(/\b[a-z]/g, function(letter) {
    return letter.toUpperCase();
}); 
```

# .htaccess - mod rewrite 做一些奇怪的事情

> ID：11361004
> 
> 赞同：0
> 
> 时间：2012-07-06T11:04:54.903
> 
> 标签：.htaccess, mod-rewrite

`http://localhost/clean_urls/user/whtffgh`很好地重定向到这个`http://localhost/clean_urls/user/whtffgh/`（我放在那里的几乎所有东西都有效）。

`http://localhost/clean_urls/user/cohen`但是，重定向到这个 `http://localhost/clean/`，我不知道为什么。它应该只添加一个`/`

这是我的 .htaccess 代码

```
<ifModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !(.*)/$
    RewriteRule ^(.*)$ /clean_urls/user/$1/ [L,R=301]

    RewriteBase /clean_urls/user/

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^([a-zA-Z0-9]+)/$ index.php?user=$1

</ifModule> 
```

更新：

除了我将 cohen 作为用户名之外，该代码还有效。.htaccess 文件的第二部分`user/index.php?user=username`看起来像`user/username`这样，它只是一个 $_GET 变量，在 url 中看起来不错并且对 SEO 友好（显然）。

我只是在学习这些东西并制作一个 webapp 来试用它，所以不确定它的去向，但我确实认为我最终需要另一个变量。`http:://localhost/clean_urls/user/fred/someverb`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:10:44.113

您误解了 RewriteBase 指令的用途。它帮助重写引擎在“每个目录”上下文中将相对 URI 转换为正确的文件名等价物。

每个文件应该只有**一个**RewriteBase 指令。`.htaccess`默认情况下，重写引擎将使用路径上带有指令集的最低`.htaccess`文件。`RewriteEngine On`

所以在 DOCroot 中（即“GET /xxx”映射到的目录，这应该是

```
RewriteBase / 
```

如果您的`.htaccess`文件在其中，`DOCroot/clean_urls/user`那么它应该有

```
RewriteBase /clean_urls/user/ 
```

您想如何解码表单的 URI，`http:://localhost/fred`或者您只想处理表单的 URI `http:://localhost/clean_urls/user/fred/`。怎么样`http:://localhost/clean_urls/user/fred/someverb`？

让我知道你把你​​放在哪里，`.htaccess`然后我可以给你正确的内容。

# google-app-engine - 事务内部只允许查询祖先查询，如何处理？

> ID：11361008
> 
> 赞同：8
> 
> 时间：2012-07-06T11:05:03.570
> 
> 标签：google-app-engine, objectify

我需要在 a 中进行查询`Transaction`，但是我不知道实体 @Id，我拥有的是一个字段的值，例如用户名而不是 ID，

所以换句话说，我不能创建一个`Key`来做查询。如何进行查询以获取 Entity 中的一个`Transaction`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T15:40:59.530

在不深入研究更深层次的设计问题的情况下，实际上有两种选择：

1) 在事务之外运行查询。

Objectify（你用它标记了这篇文章）使得即使在事务内部也可以轻松执行非事务查询。只需生成一个与事务无关的新实例并使用它来运行查询......然后返回到您的事务中工作。请记住，这确实会中断事务，并且可能会影响操作的完整性。很多时候没关系。

如果您使用的是 Objectify4，您可以像这样运行操作：

```
ofy.transactionless.load().type(Thing.class).filter("field", value)...etc 
```

2）使用查找实体

在处理用户名之类的事情时，这通常是正确的答案。创建一个单独的实体，将用户名映射到您的 User 对象，如下所示：

```
class Username {
    @Id String username;
    Key<User> user;
} 
```

每次创建用户时使用 XG 事务创建用户名，如果您允许更改用户名，则更新它。现在，要通过用户名执行用户的事务性查找，首先查找用户名，然后使用它来查找用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T15:09:11.153

我遇到了类似的问题，我想出的最简单的方法是使用一个虚拟父实体。无需使用 XG 事务并为每个其他用户实体插入另一个用户名实体，只需创建一个虚拟父实体并将其设置为您从那里创建的每个用户实体的祖先。我认为这种方法节省了大量的空间和数据管理问题。

# java - 带有自定义 ArrayAdapter 的 ListView - 线程问题

> ID：11361012
> 
> 赞同：0
> 
> 时间：2012-07-06T11:05:25.113
> 
> 标签：java, android

我正在尝试使用自定义 ArrayAdapter 创建一个 ListView。按照这里的例子。在下面的代码中，我创建了一个 ListActivity。此列表从自定义 ArrayAdapter - OrderAdapter 中获取其价值。OrderAdapter 正在从 ArrayAdapter 获取其元素

我正在使用 runOnUiThread 填充 adpater 中的元素。但是在这个线程的 run() 方法中，代码进入了无限循环。（见下面的评论）。请检查为什么它没有退出 for 循环。

代码：

```
public class SoftwarePassionView extends ListActivity {

    private ProgressDialog m_progressDialog = null;
    private ArrayList<Order> m_orders = null;
    private OrderAdapter m_adapter; // Defined Below
    private Runnable viewOrders;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.softwarepassionview);
        m_orders = new ArrayList<Order>();

        viewOrders = new Runnable() {
            @Override
            public void run() {
                getOrders();
            }
        };

        Thread thread = new Thread(null, viewOrders, "MagnatoBackground");
        thread.start();
        m_progressDialog = ProgressDialog.show(SoftwarePassionView.this, "Please Wait",
                "Retriving data", true);

        this.m_adapter = new OrderAdapter(this, R.layout.row, m_orders);
        setListAdapter(this.m_adapter);
    }

    private void getOrders() {
        try {
            m_orders = new ArrayList<Order>();
            Order o1 = new Order();
            o1.setOrderName("T-Shirt Purchase");
            o1.setOrderStatus("Dispatched");
            Order o2 = new Order();
            o2.setOrderName("Deo Purchase");
            o2.setOrderStatus("Pending");
            m_orders.add(o1);
            m_orders.add(o2);

            Thread.sleep(2000);
        } catch (Exception e) {
            Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
        }
        runOnUiThread(returnRes);
    }

    private Runnable returnRes = new Runnable() {

        @Override
        public void run() {
            if (m_orders != null && m_orders.size() > 0) {
                m_adapter.notifyDataSetChanged();
                /*
                 * Going in an infinite loop below
                 */
                for (int i = 0; i < m_orders.size(); i++)
                    m_adapter.add(m_orders.get(i));
            }
            m_progressDialog.dismiss();
            m_adapter.notifyDataSetChanged();
        }
    };

    private class OrderAdapter extends ArrayAdapter<Order> {

        private ArrayList<Order> items;

        public OrderAdapter(Context context, int textViewResourceId,
                ArrayList<Order> items) {
            super(context, textViewResourceId, items);
            this.items = items;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            super.getView(position, convertView, parent);
            View v = convertView;
            try {
                if (v == null) {
                    LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v = vi.inflate(R.layout.row, null);
                }

                Order o = items.get(position);
                if (o != null) {
                    TextView orderName = (TextView) v
                            .findViewById(R.id.topText);
                    TextView orderStatus = (TextView) v
                            .findViewById(R.id.bottomText);
                    orderName.setText(o.getOrderName());
                    orderStatus.setText(o.getOrderStatus());
                }
            } catch (Exception e) {
                Toast.makeText(SoftwarePassionView.this, e.toString(),
                        Toast.LENGTH_SHORT).show();
            }
            return v;
        }
    }
} 
```

订单.java

```
public class Order {
    private String orderName;
    private String orderStatus;

    public String getOrderName() {
        return orderName;
    }

    public void setOrderName(String orderName) {
        this.orderName = orderName;
    }

    public String getOrderStatus() {
        return orderStatus;
    }

    public void setOrderStatus(String orderStatus) {
        this.orderStatus = orderStatus;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:57:44.600

试试这个...

做一个方法`OrderAdapter`

```
 setList(ArrayList<Order> items);
    {
        this.items.clear();
        this.items.addAll(items);
        notifyDataSetChanged();
    } 
```

并在`run()`UI Thread 中执行

```
if (m_orders != null && m_orders.size() > 0) {
            m_adapter.setList(m_orders)  
            }
            m_progressDialog.dismiss(); 
```

编辑对您的代码进行一些折射...像这样制作

*   在 onCreat() 中新的 SampleTask().execute(); 和

    公共类 SampleTask 扩展 AsyncTask{

    ```
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        //show progress bar here

    }

    @Override
    protected Void doInBackground(Void... params) {
        //Do heavy work here
        return null;
    }
    @Override
    protected void onPostExecute(Void result) {

        super.onPostExecute(result);

        //Dissmiss the dialgo
        //call m_adapter.setList(m_orders)
    } 
    ```

# c# - HTTPHandler 中的调试错误：发送调试 HTTP 请求时发生服务器端错误

> ID：11361018
> 
> 赞同：0
> 
> 时间：2012-07-06T11:05:44.480
> 
> 标签：c#, asp.net, visual-studio, httphandler, asp.net-1.1

**工具：** Visual Studio 2003 Enterprise Architect，ASP.net WebForms
**语言：** C#

大家好，

我刚刚实现了 HttpHandler 第一次，我以为我会没事的，但我正面临这个错误

## 错误信息：

> 尝试运行项目时出错：无法在 Web 服务器上开始调试。发送调试 HTTP 请求时发生服务器端错误。确保 erver 运行正常。通过执行 Debug.start without Debugging 验证 web.config 中没有语法错误。您可能还想参考在线文档中的 ASP.NET 和 ATL Server 调试主题。

**代码：**
我有`ImageHandler.cs`课

```
public class ImageHandler : IHttpHandler
{
 public ImageHandler()
 {
 }
 public void ProcessRequest(HttpContext context) 
 { 
       //blah blah code
       bytes = (byte[])cmd.ExecuteScalar();
   context.Response.BinaryWrite(bytes);
     }
    } 
```

我已经在请求请求的页面上注册了 WebHandler，

```
<%@ WebHandler Language="C#" Class="ace.ImageHandler" %> 
```

我从 gridView 调用 HttpHandler

```
 <asp:TemplateColumn>
   <ItemTemplate>
       <img src="ImageHandler.ashx?autoid=<%# Eval("Blob_Id").ToString() %>" width="150" height="100" />
     </ItemTemplate>
    </asp:TemplateColumn> 
```

在 Web.Config 中注册处理程序

```
 <httphandlers>
  <add verb="GET" path="ace\ImageHandler.ashx" type="ace.ImageHandler, ImageHandler" />
 <httphandlers> 
```

# 更新：

我使用了 Debug > Start without Debugging 并执行了 WebApp 并得到了这个错误。

> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：无法识别的配置部分“httphandlers”
> 
> **源错误：**

```
Line 9:   <system.web>
Line 10:    
Line 11:  <httphandlers>
Line 12:   <add verb="*" path="*.ashx" type="ace.ImageHandler, ImageHandler" />
Line 13:   <httphandlers> 
```

*注意：* ace 是命名空间，`ImageHandler.cs`是一个类

**PS：**我关注了这篇**[文章](http://www.arnebrachhold.de/2005/05/25/custom-http-handlers-in-aspnet/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:10:06.433

它应该`<httpHandlers>`与第二个 H 作为大写字母。我刚刚在我的项目中尝试过，大小写很重要。

# c++ - 在 Xubuntu 上使用 SOCI（sql 包装器），简单程序在编译时失败

> ID：11361020
> 
> 赞同：1
> 
> 时间：2012-07-06T11:05:48.390
> 
> 标签：c++, postgresql, compiler-errors, soci

我想最终了解如何编写使用数据库的应用程序。我选择了 C++、PostgreSQL 和 SOCI（C++ 的 SQL 包装器）。我使用 Xubuntu 11.4 并安装了运行简单程序所需的一切。

要使用我安装的 SOCI：

1）libboost-dev 2）libpq-dev 3）libtool 4）SOCI，使用这个：[http](http://soci.sourceforge.net/doc/backends/postgresql.html#required) : //soci.sourceforge.net/doc/backends/postgresql.html#required 我用这个命令编译了SOCI：cmake cmake - G "Unix Makefiles" -DWITH_BOOST=ON -DWITH_POSTGRESQL=ON ../

我的简单程序非常简单：

```
#include "soci-postgresql.h"

int main(int argc, char **argv){

  soci::session sql(postgresql, "testDB");
  return 0;
} 
```

我这样编译它：

```
g++ test.cpp -lsoci_core -lsoci_postgresql -ldl -lpq 
```

但它给了我错误：

> test.cpp:1:29：致命错误：soci-postgresql.h：没有此类文件或目录编译终止。

如何解决这个问题，怎么了？我错过了安装的东西吗？

更多信息：

```
/usr/local/include/soci$ ls

backend-loader.h        postgresql                  soci-platform.h
blob-exchange.h         prepare-temp-type.h         soci-simple.h
blob.h                  procedure.h                 statement.h
boost-fusion.h          ref-counted-prepare-info.h  transaction.h
boost-gregorian-date.h  ref-counted-statement.h     type-conversion.h
boost-optional.h        row-exchange.h              type-conversion-traits.h
boost-tuple.h           row.h                       type-holder.h
connection-pool.h       rowid-exchange.h            type-ptr.h
empty                   rowid.h                     unsigned-types.h
error.h                 rowset.h                    use.h
exchange-traits.h       session.h                   use-type.h
into.h                  soci-backend.h              values-exchange.h
into-type.h             soci-config.h               values.h
once-temp-type.h        soci.h                      version.h

/usr/local/include/soci/postgresql$ ls
common.h  soci-postgresql.h

/usr/local/lib$ ls
libCOS4.a                      libomniORB4.so.1
libCOS4.so                     libomniORB4.so.1.6
libCOS4.so.1                   libomnithread.a
libCOS4.so.1.6                 libomnithread.so
libCOSDynamic4.a               libomnithread.so.3
libCOSDynamic4.so              libomnithread.so.3.4
libCOSDynamic4.so.1            libsoci_core.a
libCOSDynamic4.so.1.6          libsoci_core.so
libomniCodeSets4.a             libsoci_core.so.3.1
libomniCodeSets4.so            libsoci_core.so.3.1.0
libomniCodeSets4.so.1          libsoci_empty.a
libomniCodeSets4.so.1.6        libsoci_empty.so
libomniConnectionMgmt4.a       libsoci_empty.so.3.1
libomniConnectionMgmt4.so      libsoci_empty.so.3.1.0
libomniConnectionMgmt4.so.1    libsoci_postgresql.a
libomniConnectionMgmt4.so.1.6  libsoci_postgresql.so
libomniDynamic4.a              libsoci_postgresql.so.3.1
libomniDynamic4.so             libsoci_postgresql.so.3.1.0
libomniDynamic4.so.1           pkgconfig
libomniDynamic4.so.1.6         python2.7
libomniORB4.a                  python3.2
libomniORB4.so 
```

我也试过这个：`g++ test.cpp -lsoci_core -lsoci_postgresql -ldl -lpq -I /usr/local/include/soci/postgresql`并得到了错误：

> g++ test.cpp -lsoci_core -lsoci_postgresql -ldl -lpq -I /usr/local/include/soci/postgresql 在 test.cpp:1:0 包含的文件中：/usr/local/include/soci/postgresql/soci-postgresql .h:27:26：致命错误：soci-backend.h：没有此类文件或目录编译终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:11:08.000

g++ test.cpp -Iyour_soci_dir -lsoci_core -lsoci_postgresql -ldl -lpq
your_soci_dir 是安装了 soci 包含文件的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:15:21.883

您需要使用选项[设置搜索路径](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)`-I`。

```
g++ test.cpp -lsoci_core -lsoci_postgresql -ldl -lpq -I<path to headers>
                                                       ^^^^^^^^^^^^^^^^^ Put the path 
```

* * *

您需要提供所有路径。我想在你的情况下，它应该是这样的：

```
g++ test.cpp -lsoci_core -lsoci_postgresql -ldl -lpq -I/usr/local/include/soci/postgresql -I/usr/local/include/soci 
```

还有另一个选项（在 makefile 中更常用）：使用[pkg-config](http://linux.die.net/man/1/pkg-config)。[在这里](http://www.aleksey.com/xmlsec/api/xmlsec-notes-compiling-unix.html)你可以找到这样的例子：

```
PROGRAM = test
PROGRAM_FILES = test.c

CFLAGS  += -g $(shell pkg-config --cflags xmlsec1-nss)
LDFLAGS += -g
LIBS    += $(shell pkg-config --libs xmlsec1-nss) 

all: $(PROGRAM)

%: %.c 
    $(cc) $(PROGRAM_FILES) $(CFLAGS) $(LDFLAGS) -o $(PROGRAM) $(LIBS)

clean:
    @rm -rf $(PROGRAM) 
```

在你的情况下，它会是这样的（未经测试）：

```
PROGRAM = test
PROGRAM_FILES = test.cpp

CC=g++
CXXFLAGS    += -g $(shell pkg-config --cflags soci_core) $(shell pkg-config --cflags soci_postgresql)
LDFLAGS += -g
LIBS    += $(shell pkg-config --libs soci_core) $(shell pkg-config --libs soci_postgresql) 

all: $(PROGRAM)

%: %.cpp
    $(CC) $(PROGRAM_FILES) $(CFLAGS) $(LDFLAGS) -o $(PROGRAM) $(LIBS)

clean:
    @rm -rf $(PROGRAM) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:05:28.857

好的，我在波兰编程网站上找到了解决方案。

我的新代码（socitest.cpp）：

```
#include <iostream>
#include <soci.h>
#include <postgresql/soci-postgresql.h>

int main(int argc, char **argv)
{
   try
   { 
      soci::session sql(soci::postgresql, "dbname=testDB");
   }
   catch (soci::postgresql_soci_error const & e)
   {
      std::cerr << "PostgreSQL error: " << e.sqlstate() << " " << e.what() << std::endl;
   }
   catch (std::exception const & e)
   {
      std::cerr << "Some other error: " << e.what() << std::endl;
   }
   return 0;

} 
```

我必须编译它：

> g++ socitest.cpp -lsoci_core -lsoci_postgresql -ldl -lpq -I /usr/local/include/soci -I /usr/include/postgresql -o socitest

它应该编译但它可能无法运行。如果它没有运行，我必须做更多的事情：

1) 创建 soci.conf 文件：

> 触摸 /etc/ld.so.conf.d/soci.conf

2) 使用 gedit 编辑我的 soci.conf：

> gedit /etc/ld.so.conf.d/soci.conf

3) 粘贴到 soci.conf 中：

> /usr/local/lib64

（对于 Xubuntu x64）或

> /usr/local/lib

（对于 Xubuntu x32）并保存文件

4）运行命令：

> 配置文件

5）像这样运行我编译的socitest：./socitest，它的wooooorking !!! :D

谢谢大家帮助我：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-01T08:28:56.893

上面的示例代码只需一个命令即可编译，无需 soci.conf 和 ldconfig：

g++ socitest.cpp -o socitest -I/usr/include/postgresql -I/usr/local/include/soci -L/usr/local/lib64/ \
-lsoci_core -lsoci_postgresql -Wl,-rpath=/usr/local/lib64/

For 32 bit unix use /usr/local/lib instead of /usr/local/lib64

# .htaccess - Mod用锚重写

> ID：11361024
> 
> 赞同：0
> 
> 时间：2012-07-06T11:06:06.000
> 
> 标签：.htaccess, mod-rewrite, anchor

我有这个地址
[http://mysite.com/index.php?cat=7](http://mysite.com/index.php?cat=7)

我写这个 mod 重写

```
 RewriteRule ^category/(\d+) index.php?cat=$1 
```

这意味着：如果有人打开我的地址，他会自动转到该地址：

```
 http://mysite.com/category/7 
```

但我也需要使用锚点，也就是说，我需要在打开我的地址时，发生重定向到这个地址：

```
 http://mysite.com/category/7#!somesome 
```

请告诉我，如何编写这样的 RewriteRule ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:21:21.720

如果我正确理解您的问题，您想使用（Apache 的）mod 重写获取 URL 片段（# 之后的 URL 部分）。

不幸的是，这是无法做到的。根据[维基百科的文章](http://en.wikipedia.org/wiki/Fragment_identifier)：

> 片段标识符的功能与 URI 的其余部分不同：即，它的处理完全是客户端，没有服务器参与

和

> 当代理（例如 Web 浏览器）向 Web 服务器请求资源时，代理将 URI 发送到服务器，但不发送片段。

您必须解决此问题，可能使用（客户端）javascript。

# rss - 使用可视化 C# 读取 RSS 提要

> ID：11361035
> 
> 赞同：6
> 
> 时间：2012-07-06T11:06:45.653
> 
> 标签：rss, visual-c#-express-2010, rss-reader

我正在尝试读取 RSS 提要并在我的 C# 应用程序中显示。我使用了下面的代码，它适用于其他 RSS 提要。我想阅读这个 RSS 提要 ---> [http://ptwc.weather.gov/ptwc/feeds/ptwc_rss_indian.xml](http://ptwc.weather.gov/ptwc/feeds/ptwc_rss_indian.xml)，下面的代码对它不起作用。我没有收到任何错误但没有任何反应，我希望显示 RSS 提要的文本框是空的。请帮忙。我究竟做错了什么？

```
 public class RssNews
    {
        public string Title;
        public string PublicationDate;
        public string Description;
    }

    public class RssReader
    {
        public static List<RssNews> Read(string url)
        {
            var webResponse = WebRequest.Create(url).GetResponse();
            if (webResponse == null)
                return null;
            var ds = new DataSet();
            ds.ReadXml(webResponse.GetResponseStream());

            var news = (from row in ds.Tables["item"].AsEnumerable()
                        select new RssNews
                        {
                            Title = row.Field<string>("title"),
                            PublicationDate = row.Field<string>("pubDate"),
                            Description = row.Field<string>("description")
                        }).ToList();
            return news;
        }
    }

    private string covertRss(string url) 
    {
        var s = RssReader.Read(url);
        StringBuilder sb = new StringBuilder();
        foreach (RssNews rs in s)
        {
            sb.AppendLine(rs.Title);
            sb.AppendLine(rs.PublicationDate);
            sb.AppendLine(rs.Description);
        }

        return sb.ToString();
    } 
```

//表单加载代码///

```
 string readableRss;
 readableRss = covertRss("http://ptwc.weather.gov/ptwc/feeds/ptwc_rss_indian.xml");
            textBox5.Text = readableRss; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T12:07:50.697

似乎 DataSet.ReadXml 方法失败，因为在项目中指定了两次类别，但是在不同的命名空间下。

这似乎效果更好：

```
public static List<RssNews> Read(string url)
{
    var webClient = new WebClient();

    string result = webClient.DownloadString(url);

    XDocument document = XDocument.Parse(result);

    return (from descendant in document.Descendants("item")
            select new RssNews()
                {
                    Description = descendant.Element("description").Value,
                    Title = descendant.Element("title").Value,
                    PublicationDate = descendant.Element("pubDate").Value
                }).ToList();
} 
```

# java - javax.xml.bind.DatatypeConverter 泄漏类加载器？

> ID：11361036
> 
> 赞同：9
> 
> 时间：2012-07-06T11:06:48.290
> 
> 标签：java, tomcat, jaxb, classloader

我目前正在调查 Tomcat 7（w/Oracle JDK 7）上应用程序的一些类加载器泄漏。一个类保持对 Web 应用程序类加载器的静态引用（从而导致类加载器在重新部署/重新启动时不被释放）是`javax.xml.bind.DatatypeConverter`，它存在于系统类加载器中并通过其`theConverter`字段保持静态引用以`com.sun.xml.bind.DatatypeConverterImpl`来自 Sun 的 jaxb -impl 包。

以前有人观察过这个问题吗？有什么建议（除了在应用程序关闭时使用反射使静态字段为空）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T11:24:47.493

事实证明，我的一个依赖项 ( `com.sun.jersey:jersey-json`) 引入了`com.sun.xml.bind:jaxb-impl`，它负责 System Classloader -> Application Classloader 引用。排除该依赖关系解决了这个问题（因为 JDK 7 带有一个合理的 JAXB 实现，它将在 System CL 中引用，这很好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-19T21:15:40.117

Tomcat 8 在开发过程中对后续 Web 应用程序重新部署发出警告：

```
org.apache.catalina.loader.WebappClassLoaderBase checkThreadLocalMapForLeaks

SEVERE: The web application [rsnetlombard] created a ThreadLocal with key of type
[com.sun.xml.bind.v2.ClassFactory$1] (value [com.sun.xml.bind.v2.ClassFactory$1@79eb7926])
and a value of type [java.util.WeakHashMap]
(value [{class javax.xml.bind.annotation.W3CDomHandler=java.lang.ref.WeakReference@525eec52}])
but failed to remove it when the web application was stopped.
Threads are going to be renewed over time to try and avoid a probable memory leak. 
```

我在 VisualVM 中进行堆转储并打开它。

VisualVM 通过查询在 OQL 选项卡中找到被破坏的 Web 应用程序类加载器：

```
select x from org.apache.catalina.loader.WebappClassLoader x where x.state.name.toString() == "DESTROYED" 
```

访问“instalce”选项卡中指向对象的指向链接允许在“参考部分”中调用“查找最近的 GC 根”并将文本表示复制到剪贴板：

```
this     - value: org.apache.catalina.loader.WebappClassLoader #3
 <- <classLoader>     - class: com.sun.xml.bind.DatatypeConverterImpl, value: org.apache.catalina.loader.WebappClassLoader #3
  <- <class>     - class: com.sun.xml.bind.DatatypeConverterImpl, value: com.sun.xml.bind.DatatypeConverterImpl class DatatypeConverterImpl
   <- theConverter (sticky class)     - class: javax.xml.bind.DatatypeConverter, value: com.sun.xml.bind.DatatypeConverterImpl #1 
```

`javax.xml.bind.DatatypeConverter`来自 Java SE，并且该类由系统类加载器加载（并标记为`(sticky class)`）。但指向由 Web 应用程序类加载器加载的类。

谷歌搜索`com.sun.xml.bind.DatatypeConverterImpl`导致这个 SO 帖子。

提供的解决方案说`com.sun.jersey:jersey-json`包从包请求 JAXB API 实现`com.sun.xml.bind:jaxb-impl`::

```
$ mvn dependency:tree
...
[INFO] +- com.sun.jersey:jersey-json:jar:1.8:compile
[INFO] |  +- org.codehaus.jettison:jettison:jar:1.1:compile
[INFO] |  |  \- stax:stax-api:jar:1.0.1:compile
[INFO] |  +- com.sun.xml.bind:jaxb-impl:jar:2.2.3-1:compile
[INFO] |  |  \- javax.xml.bind:jaxb-api:jar:2.2.2:compile
[INFO] |  |     \- javax.xml.stream:stax-api:jar:1.0-2:compile
[INFO] |  +- org.codehaus.jackson:jackson-core-asl:jar:1.7.1:compile
[INFO] |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.7.1:compile
[INFO] |  +- org.codehaus.jackson:jackson-jaxrs:jar:1.7.1:compile
[INFO] |  \- org.codehaus.jackson:jackson-xc:jar:1.7.1:compile 
```

因为 Java 7 带有自己的 JAXB 实现（事实上是[JAXB RI](https://jaxb.java.net/guide/Which_JAXB_RI_is_included_in_which_JDK_.html)），所以我们不需要`com.sun.xml.bind:jaxb-impl` 包。`pom.xml`将排除添加到::的相应部分

```
 <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>${jersey.version}</version>
        <exclusions>
            <exclusion>
                <groupId>com.sun.xml.bind</groupId>
                <artifactId>jaxb-impl</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

为了在测试中更快地获得结果，我减少了 Tomcat 内存::

```
JAVA_OPTS="-Djava.awt.headless=true -Xmx212m -XX:+UseConcMarkSweepGC -XX:MaxPermSize=66m" 
```

重新部署/使用应用程序 10 次不为::

```
select x from org.apache.catalina.loader.WebappClassLoader x where x.state.name.toString() == "DESTROYED" 
```

在重新部署“Visual GC”插件下显示 PermGen 清理。

使用以前的开发设置运行需要一些东西::

```
JAVA_OPTS="-Djava.awt.headless=true -Xmx512m -XX:+UseConcMarkSweepGC -XX:MaxPermSize=256m" 
```

生存 4-5 次重新部署。对较大 PermGen 的 OQL 查询给出了几个 Tomcat `WebappClassLoader` ，但检查实例表明没有通往 GC 的路径，并且当 PermGen 变满时它们会被清理。

# jsp - 通过 AJAX 成功插入数据后重定向到另一个页面

> ID：11361038
> 
> 赞同：0
> 
> 时间：2012-07-06T11:07:15.907
> 
> 标签：jsp, jquery

成功插入日期后，我想重定向到另一个 JSP 页面。

```
$.ajax({
                type: "post",
                url: "register.jsp",
                data: datastring,
                success:function(){            
                                window.location.href = "nextPage.jsp";
                } 
```

但我无法重定向到另一个页面（nextPage.jsp），但将数据插入数据库是成功的。如何重定向到另一个页面？？？

我也试过

```
success:function(){
$("divid").load("nextPage.jsp") } 
```

但这也行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:33:28.843

而不是这样做

```
window.location.href = "nextPage.jsp"; 
```

做这个使用

```
var url = '<%=request.getContextPath()%>/your_jsp';
window.location.replace(url); 
```

# c# - 如何使用 httpwebrequest 登录 facebook 并获取用户访问令牌？

> ID：11361039
> 
> 赞同：0
> 
> 时间：2012-07-06T11:07:19.333
> 
> 标签：c#, facebook, httpwebrequest

我正在尝试使用我的电子邮件和密码登录 facebook 帐户，以使用 httpwebrequest 获取用户访问令牌。我不知道如何使用它，因为 cookie 对我来说非常复杂。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:13:07.697

你可以在这里找到一个简单的例子

[http://www.codeproject.com/Articles/380635/Csharp-Application-Integration-with-Facebook-Twitt](http://www.codeproject.com/Articles/380635/Csharp-Application-Integration-with-Facebook-Twitt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:19:52.870

您可以使用来自 nuGet 的 ASP.NET MVC WebHelper 包，它提供了开箱即用的集成可能性，可以将您的网站与 facebook、twitter 等集成。

# ruby-on-rails - Rails - 迁移突然不起作用

> ID：11361040
> 
> 赞同：0
> 
> 时间：2012-07-06T11:07:25.047
> 
> 标签：ruby-on-rails, ruby

当我尝试运行迁移时，我的 Rails 应用程序突然停止工作。例如：

```
$ rails generate migration AddBalanceToUsers balance:float
/Users/serg/.rvm/gems/ree-1.8.7-head/gems/rails-2.3.5/bin/../lib/rails_generator/options.rb:32:in `default_options': undefined method `write_inheritable_attribute' for Rails::Generator::Base:Class (NoMethodError)
    from /Users/serg/.rvm/gems/ree-1.8.7-head/gems/rails-2.3.5/bin/../lib/rails_generator/base.rb:90
    from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
    from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
    from /Users/serg/.rvm/gems/ree-1.8.7-head/gems/rails-2.3.5/bin/../lib/rails_generator.rb:34
    from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
    from /Users/serg/.rvm/rubies/ree-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
    from /Users/serg/.rvm/gems/ree-1.8.7-head/gems/rails-2.3.5/bin/rails:14
    from /Users/serg/.rvm/gems/ree-1.8.7-head/bin/rails:19:in `load'
    from /Users/serg/.rvm/gems/ree-1.8.7-head/bin/rails:19 
```

我用

```
ree 1.8.7
rails 2.3.5 (but i also have rails 3.2.3)
RVM
OS X Lion 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:03:38.250

好的，我创建了解决方案。在**rails 2**我们应该通过其他方式生成迁移：

```
$ script/generate migration AddBalanceToUsers balance:float 
```

**脚本/生成**是关键。

希望它会帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:21:16.557

我通过以下步骤解决了这个问题：-

(1) 首先我通过运行“gem environment”进行检查

（2）然后我通过以下方式找到了rails可执行文件：-
abc@ubuntu:~$ locate rails |grep -e "bin/rails$" /home/abc/.rvm/gems/ruby-1.9.3-p0/gems/ railties-3.2.1/bin/rails /usr/lib/ruby/vendor_ruby/railties/bin/rails

(3) 我通过以下方式附加了 ~/.bashrc 的路径：-
abc@ubuntu:~$ echo 'export PATH=$PATH:/home/abc/.rvm/gems/ruby-1.9.3-0/gems/railties -.2.1/bin' >> ~/.bashrc

(4) 重新加载 ~/.bashrc 文件：-
abc@ubuntu:~$ 。~/.bashrc

然后当我运行 rails 命令时，它完美地创建了一个新的示例应用程序:-)

# c# - 在 ASP.NET Web 窗体中过滤结果

> ID：11361041
> 
> 赞同：0
> 
> 时间：2012-07-06T11:07:29.340
> 
> 标签：c#, asp.net, linq, linq-to-sql, webforms

我正在尝试浏览有关 Web 表单的教程，但过滤搜索结果的尝试并不正确：

asp 页面的内容如下所示：

```
<form id="form1" runat="server">

<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:Button ID="button1" runat="server" onclick="button1_Click" Text="Submit" />
<asp:GridView ID="GridView1" AllowPaging="true" PageSize="8" AutoGenerateColumns="false" runat="server"
OnPageIndexChanging="GridView1_PageIndexChanging">

   <Columns>
      <asp:BoundField HeaderText="Qual ID" DataField="ID" />
      <asp:BoundField HeaderText="Client Name" DataField="Client_Name" />
      <asp:BoundField HeaderText="Project" DataField="Project_Name" />
      <asp:BoundField HeaderText="Uploaded By" DataField="Uploaded_By" />
   </Columns>

</asp:GridView>
</form> 
```

以及文件背后的代码：

```
public partial class Sample1 : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

    SourceDataContext db = new SourceDataContext();

    GridView1.DataSource = from q in db.Cust
                           orderby q.ID
                           select q;
    GridView1.DataBind();
}

protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;

    GridView1.DataBind();
}
protected void button1_Click(object sender, EventArgs e)
{
    string client = TextBox1.Text;

    SourceDataContext db = new SourceDataContext();

    GridView1.DataSource = from q in db.Cust
                           where q.Client_Name == client
                           orderby q.ID
                           select q;
    GridView1.DataBind();

}
} 
```

过滤工作，尽管分页停止工作。任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:17:41.340

在我看来有两个问题

1.  `Page_Load`附上绑定在`!IsPostBack`
2.  `GridView1_PageIndexChanging`不要再次绑定
3.  看问题`Chris Gessler`

代码

```
public partial class Sample1 : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)  
    {

    SourceDataContext db = new SourceDataContext();

    GridView1.DataSource = from q in db.Cust
                           orderby q.ID
                           select q;
    GridView1.DataBind();
   }
}

protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;

}
protected void button1_Click(object sender, EventArgs e)
{
    string client = TextBox1.Text;

    SourceDataContext db = new SourceDataContext();

    GridView1.DataSource = from q in db.Cust
                           where q.Client_Name == client
                           orderby q.ID
                           select q;
    GridView1.DataBind();
    GridView1.PageIndex = 0;

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:22:04.303

问题 1：这应该只在 GET 请求上运行。ViewState 将接管 PostBacks 并填充网格。

```
protected void Page_Load(object sender, EventArgs e) 
{ 
    if(!this.Page.IsPostback)
    {
        SourceDataContext db = new SourceDataContext(); 

        GridView1.DataSource = from q in db.Cust 
                               orderby q.ID 
                               select q; 
        GridView1.DataBind(); 
    }
} 
```

问题 2：您需要重置页面索引，因为记录集已更改。当前页面可能不存在。

```
protected void button1_Click(object sender, EventArgs e)      
{      
    string client = TextBox1.Text;      

    SourceDataContext db = new SourceDataContext();      

    GridView1.DataSource = from q in db.Cust      
                           where q.Client_Name == client      
                           orderby q.ID      
                           select q;      
    GridView1.DataBind();    

    GridView1.PageIndex = 0;

} 
```

问题 3：您正在调用 DataBind()，但没有设置新的数据源。

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)              
{              
    GridView1.PageIndex = e.NewPageIndex;                         
} 
```

还，

考虑缓存记录集并过滤它，而不是调用服务器以获取新记录集，但是，这取决于“需要”。缓存记录集显然不会找到任何新记录，这可能不适合您的业务需求。

考虑在 OnInit 方法的代码隐藏中设置您的事件：

```
protected void Page_Init(object sender, EventArgs e) 
{
    this.GridView1.PageIndexChanging += GridView1_PageIndexChanging;
} 
```

# java - 如何在eclipse中一次执行两个java项目？

> ID：11361042
> 
> 赞同：1
> 
> 时间：2012-07-06T11:07:32.890
> 
> 标签：java, eclipse

我有一个项目，它对以 CSV 文件提供的数据进行一些处理。出于测试目的，我想创建另一个单独的应用程序来模拟在特定时间段注入文件，并且我想让两个应用程序一起运行，以便主应用程序将获取从模拟器应用程序生成的文件。但我想让这两个应用程序完全分开。

无论如何执行这两个项目而不在另一个代码中调用它们中的一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:16:07.947

您可以创建一个批处理文件来编译和运行这两个项目。您还可以编写第三个 java 程序，它与批处理文件执行相同的操作，但使用 Java 中的 Runtime 类来调用 exec 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:17:57.550

创建将同时启动这两个项目的第三个项目。:D

# cocoa - 应用沙箱：如何允许 XPC 服务读取用户在父应用中打开的文件？

> ID：11361043
> 
> 赞同：11
> 
> 时间：2012-07-06T11:07:43.223
> 
> 标签：cocoa, sandbox, appstore-sandbox, xpc

我有一个简单的 Cocoa 图像预览应用程序。用户使用 选择文件`NSOpenPanel`，应用程序使用 Quick Look API 生成预览图像。

我想将预览生成移到单独的 XPC 服务中。如果没有应用沙盒，一切正常，但在为父应用和 XPC 服务启用应用沙盒后，*XPC 服务被拒绝读取用户选择的文件*。

允许父应用读取文件（因为它是通过 NSOpenPanel 选择的）。

如何将用户选择的文件的“文件读取”权限从父应用程序转移到XPC进程，以便XPC进程可以读取文件以生成预览？

我的 XPC 服务通过其权利请求文件读取访问，我将以下密钥添加到 XPC 服务 Info.plist，但这没有帮助：

```
JoinExistingSession = YES 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T11:12:45.420

我不是 100% 确定，但我认为 Apple 建议`NSFileHandle`在这种情况下将一个传递给 XPC 进程。这样，XPC 进程可以访问文件的内容，但不需要知道文件的 URL。

编辑：[Apple Developer Forums 中的这个帖子](https://devforums.apple.com/thread/142513?start=0&tstart=0)很有帮助。建议为文件的 URL 创建一个普通（非安全范围）书签。然后可以将此书签传递给 XPC 进程并由它访问。

# regex - Twitter 名称验证

> ID：11361044
> 
> 赞同：7
> 
> 时间：2012-07-06T11:07:45.547
> 
> 标签：regex, twitter

在我们的注册表单中，我们现在想要求用户输入他们的推特名称（例如@paul）。

谁能告诉它允许使用哪些字符？

例如 az、AZ、下划线、0-9

还要别的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T11:12:14.517

我*相信*它只是字母、数字和下划线，最多 15 个字符。

快速搜索发现了这篇文章（非 Twitter），涵盖了相同的主题：

[http://kagan.mactane.org/blog/2009/09/22/what-c​​haracters-are-allowed-in-twitter-usernames/](http://kagan.mactane.org/blog/2009/09/22/what-characters-are-allowed-in-twitter-usernames/)

上面的帖子还包含帮助您验证的正则表达式示例：

```
Full regex – /^[a-zA-Z0-9_]{1,15}$/
Perl-compatible regex – /^\w{1,15}$/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-22T06:31:36.503

这是最终的 JavaScript 函数：

```
function validTwitteUser(sn) {
    return /^[a-zA-Z0-9_]{1,15}$/.test(sn);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T11:11:58.853

从 Twitter 检查此页面以获取官方指南/规则

[http://support.twitter.com/articles/101299-why-can-ti-register-certain-usernames#](http://support.twitter.com/articles/101299-why-can-t-i-register-certain-usernames#)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-18T16:31:24.203

虽然这里的正则表达式看起来都是正确的，但它们都允许少于 4 个字符通过验证。根据[推特](http://support.twitter.com/articles/101299-why-can-t-i-register-certain-usernames#)：

*   您的用户名不能超过 15 个字符。您的姓名可以长于（50 个字符）或短于 4 个字符，但为方便起见，用户名保持较短。
*   如上所述，用户名只能包含字母数字字符（字母 AZ，数字 0-9），下划线除外。检查以确保您想要的用户名不包含任何符号、破折号或空格。

因此，正确的正则表达式是：

```
/^[a-zA-Z0-9_]{4,15}$/ 
```

如果要挑剔，那么您也不能使用 Twitter 或 Admin 这个词，就我的目的而言，以上就足够了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-23T02:52:32.153

对于 JavaScript / TypeScript：

首先，

```
npm i twitter-text
# or
yarn add twitter-text 
```

然后，

```
import { isValidUsername } from 'twitter-text'

console.log(isValidUsername('@helloworld')) // true 
```

还有其他实现（Java、Ruby、ObjC），请看[https://github.com/twitter/twitter-text](https://github.com/twitter/twitter-text)

* * *

注意：捆绑包太大，仅用于字符串验证...

# iphone - 如何在 iphone 上加载 UIWebView 时检测 url 的重定向？

> ID：11361046
> 
> 赞同：9
> 
> 时间：2012-07-06T11:07:51.767
> 
> 标签：iphone, objective-c, ios, redirect, uiwebview

在 iphone 中加载 UIWebView 时是否有任何方法可以检测 url 重定向。当我加载 www.example.com 网址时，它会重定向到其他网址。我需要获取那些重定向 url，我们实际上在哪里处理重定向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T11:42:26.907

是的，你可以这样做。实施

```
– webView:shouldStartLoadWithRequest:navigationType: 
```

这位[代表](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)。每当您的 webview 即将发出请求时，都会调用此方法。因此，现在当有人点击您网页上的按钮或超链接时，您将收到对该方法的调用。接到这个电话后，你可以选择用它做任何你想做的事情。就像通过您自己的服务器重定向链接，或者向您的服务器记录有关用户活动的请求，或者在您的情况下打开评论页面或更改导航栏等。

也许从`request`你可以弄清楚HTTP响应代码是否是3xx重定向然后你可以做你想做的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T19:56:14.643

当不得不做同样的事情时，我发现了这个线程。我使用了 Srikar 的答案，但这是我的代码。

我正在使用 Lumberjack 日志记录，但您可以仅将以下内容替换为 NSLog。如果您正在查看主机、路径或查询字符串以了解是否存在故障（这是我将要做的），您还可以获得 URL 的特定部分。如果它多次重定向，每个请求都会在这里调用，如果你愿意，你可以停止它并做一些事情或只是观察。

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest   navigationType:(UIWebViewNavigationType)inType
{
    DDLogVerbose(@"Redirecting to URL: %@", inRequest.URL.absoluteString);
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:47:48.173

尝试这个：

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
        if ( inType == UIWebViewNavigationTypeLinkClicked ){
           [[UIApplication sharedApplication] openURL:[inRequest URL]];
            return NO;
        }
       return YES;
    } 
```

# java - 在已经凌乱的应用程序中添加新代码

> ID：11361054
> 
> 赞同：0
> 
> 时间：2012-07-06T11:08:15.043
> 
> 标签：java, jsp, servlets

我正在处理的当前应用程序是 2003 年的传统 J2EE 应用程序！具有基于 JSP 的前端，以及一些常见的服务层（Auth、DAO 等）。

麻烦的是，前端是一团糟。没有 MVC，没有模板，什么都没有。多年来，开发人员一直将代码直接写入 JSP（我的意思是大量 Java 代码），并且在这些块中的某个时刻，控制流传递到服务层。阅读和调试很痛苦。

我正在为这个应用程序编写新功能，并且必须以一种相当不显眼的方式来完成它。通常不鼓励更改 xml 配置或类路径设置等的任何内容。

我的问题是：除了 JSP 作为应用程序的入口点之外什么都没有，如何在这些约束下最好地编写最干净的代码？

我正在制作 ajaxian 模块（项目 svn 中已经有 jQuery），所以我的 JavaScript 和 JSP 通常如下所示：

JavaScript：

```
jsAjaxCall({
    url: 'myActionURL.jsp',
    method: 'post',
    params: {},
    success: function(data){
    },
    failure: function(data){
    }
}); 
```

myActionURL.jsp

```
<%
    //entry into server tiers
    SomeEntryPointClass entry = new SomeEntryPointClass(request);
    String responseString = entry.doYourJob();
    PrintWriter out = response.getWriter();
    out.print(responseString);
    out.flush();
%> 
```

问题：

1.  这个想法是让 JSP 中的 Java 代码保持在绝对最低限度，并尽快将请求对象移交给一个前端（命名它是什么东西！）对象。考虑到限制，这是一种合理正确的方法吗？
2.  我可以做哪些额外的事情来保持整洁和井井有条？（我已经推出了我自己的类，用于将请求参数绑定到域对象，所以这也是一个不错的优点）。
3.  在这种情况下如何进行无痛表单验证？我错过了 Spring MVC 的验证！简直无法想象除了 JSP 之外的所有手动 hoopla 以及路由和绑定混乱！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:38:57.187

好消息是jsp的编译成servlet。这当然是个好消息，因为它将允许您以通常使用 servlet 的方式使用 jsp。

将您的 java 用法保持在 jsp 中并传递给辅助对象（不能让自己说正面）是正确的调用，因为：

1) jsp 文件的大小有一个硬性限制

2) 从 jsps 编写单元测试比纯类更难

3) 大多数 IDE 不会为嵌入在 jsp 中的 java 提供与普通类相同级别的代码编写支持

4）调试会更容易

至于您的第二个问题，如果它是 jsp 2，您可以考虑使用自定义标签，它们可能是组织 jsp 繁重代码的有用方法。此外，我想如果你想全程使用 ajax 并且感觉很狡猾，你可以编写 jsp 页面来为你提供 Json 对象。有效地将您的 jsp 转换为前端服务。

至于第三个选项，我很抱歉，但你的系统听起来一点也不痛苦。使用 strut 或 jsr303 或 spring mvc 甚至新的 servlet 验证会有点痛苦。

当然，如果您编写了一个返回经过验证的 json 对象的验证 jsp（请参阅上面的建议），它可能会让您的生活更轻松一些。

祝你好运

# php - 克隆 cakephp 模型对象是个好主意吗？

> ID：11361056
> 
> 赞同：0
> 
> 时间：2012-07-06T11:08:27.090
> 
> 标签：php, cakephp

我如何使用 cake 的模型对象才能在控制器中执行此操作：

```
$User1->doThis();
$User2->doThis(); 
```

$User1 和 $User2 是用户模型的克隆。

如果我继续克隆模型对象，会不会有任何不可预见的后果？

有没有更好的方法？我只是发现在同一个模型对象上来回处理不同实体有点困难。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:21:26.610

可能不是一个好主意。我无法通过实验来支持这一点，这只是我的直觉。这似乎是个坏主意。

您确实必须问自己：这真的是其他方式无法解决的吗？一个简单的 for(each) 循环？模型中的自定义方法？重构？

# for-loop - For循环获取n个节点的数字序列

> ID：11361057
> 
> 赞同：0
> 
> 时间：2012-07-06T11:08:28.013
> 
> 标签：for-loop, xquery

如果我有“n”个节点，并且我想从节点的开始分配一个数字到“n”个节点。例子：

```
<entity>
  <result>
    <seq>1</seq>
  </result>
  <result>
    <seq>2</seq>
  </result>
  <result>
    <seq>3</seq>
  </result>
  ....
  ....
  ....
  <result>
    <seq>n</seq>
  </result>
</entity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:26:43.777

如果示例是您想要的结果，请尝试以下操作：

```
<entity>
    {
        for $n in 1 to 10
        return
            <result><seq>{$n}</seq></result>
    }
</entity> 
```

否则，请重写您的问题，使其包含

*   你想达到什么
*   输入是什么
*   预期的输出是多少

此外，您想更新您的文档（XQuery 更新）还是只丰富输出？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:57:04.090

使用 at 关键字计算迭代次数。

```
let $list := (20, 23, 25, 24, 22, 21)

return
  <entity>
  {
    for $n at $seq in $list
      return
        <result><seq>{$seq}</seq><value>{$n}</value></result>
  }
  </entity> 
```

# ruby-on-rails - rails 3中如何根据用户订阅的不同来处理授权？

> ID：11361059
> 
> 赞同：0
> 
> 时间：2012-07-06T11:08:39.510
> 
> 标签：ruby-on-rails, activerecord, authorization, roles, subscriptions

我正在研究 Rails 3.2。我目前正在构建基于租户的站点，该站点为用户提供注册。对于想要注册到该站点的用户，他们需要从该站点获得订阅计划。基于这些订阅，我应该为用户提供不同的授权。例如，计划 A 订阅将允许用户创建大约 100 个联系人、100 个事件并且不上传文档，而计划 B 订阅将允许用户创建大约 250 个联系人、200 个具有文档上传功能的事件等，并具有进一步的计划。

为此，我也需要模型级别的数据访问授权。简而言之，这些功能专门列出了用户的所有授权和访问控制列表。

在使用 Rails 3.2 时，我发现很少有宝石可以帮助为用户声明授权规则。

1.  [fat_model_auth](https://github.com/brentgreeff/fat_model_auth)
2.  [声明性授权](https://github.com/stffn/declarative_authorization/)

这些 gem 允许为应用程序指定授权规则。但是我也需要模型级别的授权规则，同时限制从用户端对数据库的访问。请建议我用很少的文档或宝石来完成...任何建议都会有所帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:37:28.490

我建议 [CanCan](https://github.com/ryanb/cancan)

还有一个不错的[截屏视频](http://railscasts.com/episodes/192-authorization-with-cancan)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-26T13:36:51.717

作为 fat_model_auth 的创建者，我可以推荐它。

[https://github.com/brentgreeff/fat_model_auth](https://github.com/brentgreeff/fat_model_auth)

刚刚发布了一个与 Rails 5 配合得很好的新 gem。

# php - centos6.2安装PHP 5.4.1

> ID：11361068
> 
> 赞同：17
> 
> 时间：2012-07-06T11:09:33.503
> 
> 标签：php, centos

在 centos6.2 中默认为 php 5.3.3。但我想安装 php 5.4.1。你能帮助我吗？centos6.2如何安装php5.4.1？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-06T11:10:57.370

```
rpm -Uvh http://repo.webtatic.com/yum/el6/latest.rpm
yum install php54w 
```

有关更多信息，请参阅[此](http://www.webtatic.com/packages/php54/)内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-09T23:54:47.093

1.  你必须`yum remove php-common`从你的服务器中删除 php。
2.  然后`php -v`确保没有php
3.  最后`rpm -Uvh http://repo.webtatic.com/yum/el6/latest.rpm`紧随其后`yum install php54w`
4.  理想情况下，您也想安装 php54w-fpm

# windows-8 - win 8 Metro 风格中是否有类似 hubtile（WP7）的东西？

> ID：11361071
> 
> 赞同：0
> 
> 时间：2012-07-06T11:09:54.237
> 
> 标签：windows-8, microsoft-metro

我想将我的 Windows Phone 7 应用程序之一移植到 Windows 8 Metro 风格平台。

问题是，我**需要**一个像 hubtile 这样的元素，我在 windows phone 的 silverlight 工具包中使用它。

Windows 8 Metro 风格平台中是否有相同的东西？也许像 silverlight 工具包这样的开源。

**我不想在我的应用程序之外添加 livetile，这很容易。我想为 win8 的 WP7 提供类似 hubtile 的东西。这意味着我的应用程序中的一个磁贴。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:40:43.070

如果我是对的，我打算做同样的任务。我没有找到任何类似 HubTile 的控件的引用。因此，我决定从 Silverlight Toolkit（用于 Windows Phone）中导入一个。幸运的是，它运行得几乎很顺利，您可以在以下位置查看我的示例：

[https://github.com/hmadrigal/playground-dotnet/tree/master/MsWinPhone.EmbedFont](https://github.com/hmadrigal/playground-dotnet/tree/master/MsWinPhone.EmbedFont)（在 Windows 8 RP 和 Visual Studio 2012 RC 上测试） ![HubTile 示例应用程序的捕获](../Images/03f9679019eeb69f096bcd4ff4d07d45.png)

亲切的问候，赫伯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:35:47.247

当然，您可以通过多种方式使用动态磁贴。您可以使用徽章通知、toast 通知等。

我建议你看看[这个文档](http://msdn.microsoft.com/en-us/library/windows/apps/Hh779725.aspx)。

并查看这两个示例：[应用程序磁贴和徽章示例](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)以及[推送和定期通知客户端示例](http://code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603)

顺便说一句，不要忘记在包清单中启用您需要的功能。

# php - 输入不向mysql提交数据

> ID：11361072
> 
> 赞同：-1
> 
> 时间：2012-07-06T11:09:55.050
> 
> 标签：php, mysql, html

我正在制作一个非常简单的群组（如 vb 论坛群组）。在遇到一些错误并修复它之后，我已经编写了所有代码，现在它显示的页面没有错误。

现在的问题是数据没有被插入到 mysql 中。将输入放入表单然后按创建时，它会转到“？update = update”并回显成功消息，但不会提交给mysql。

代码：

```
<? if(!$update) { ?>
<form action="make_group.php?update=update" method="post">

Group name: <br />
<input name="title" type="text" size="30" />
<br />

Group picture: <br />
<input name="picture" type="text" size="30" />
<br />

Group desc: <br />
<textarea name="desc" cols=30 rows=10 wrap=physical></textarea>
<br />

        <input type="submit" value="Create" />

    <? }

    elseif($update==update)
    {
        $username = $_SESSION[usr_name];
        $action = "made a group";
    $title = clean($_POST[title]);
    $desc = clean($_POST[desc]);
    $pictures = clean($_POST[pictures]);
        $updateemail = mysql_query("insert into usr_groups(username, title, desc, picture) values('$username', '$title', '$desc', '$picture')");
        $result = @mysql_query($qry2);
    echo("Your group has been created");
    } ?> 
```

以上页面代码

```
<?
session_start();
include("config.php");
$ip = $_SERVER['REMOTE_ADDR'];
$sqlcontent = mysql_query("select * from usr_config");
$content = mysql_fetch_array($sqlcontent);

if(!isset($_SESSION[usr_name]) || empty($_SESSION[usr_name]) || !isset($_SESSION[usr_level]) || empty($_SESSION[usr_level]))
{
session_destroy();
session_unset();
die('
    <tr>
      <td><meta http-equiv="REFRESH" content="0;url=/index.php"></HEAD></td>
    </tr>
    <tr>
      <td></td>
    </tr>
  </table>
</div>
</body>');
}
include("func.php");

$update = clean($_GET[update]);
$getprof = mysql_query("select * from usr_users where username = '$_SESSION[usr_name]'");
$prof = mysql_fetch_array($getprof);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:23:46.833

用 ` 设置 desc - 修改我的答案以包含我的评论 - desc 是 MySQL 中的保留字，将其声明为字段名而不是排序顺序，它必须有反引号:)

我建议将 OR die(mysql_error()) 添加到 mysql_query(call) 的末尾

```
 mysql_query('your query') OR die(mysql_error()) 
```

我只会在您调试时这样做，而不是将其留在公众会看到的任何东西上。这将为您提供有关 INSERT 查询为何不起作用的信息。我不知道您在哪里连接，但出于安全原因，我假设您将其排除在外:)

我确实看到你的陈述

```
 elseif($update==update){ 
```

它周围没有引号 - 所以看起来条件块永远不会被调用......我看到你的评论，但我会考虑至少出于调试目的，在它周围加上一些引号。不能伤害正确:) die 语句会告诉你是否有语法问题。也许考虑在该块中打印一些东西，以确保条件以您期望的方式解释......

FWIW 你的 SQL 对我来说似乎很好 - 如果你在名字中得到一个 ' ，你可能会遇到这个名字的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:35:32.513

尝试回显然`$updateemail`后添加此代码以检查是否有任何错误。

```
if (!mysql_query($updateemail,$con)) { 
   die('Error: ' . mysql_error());
} 
```

echo "添加了 1 条记录";

此外，将插入查询更改为：

```
$updateemail = mysql_query("insert into usr_groups(username, title, description, picture) values('$username', '$title', '$desc', '$pictures')"); 
```

将 desc 列名称更改为某物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:41:30.823

将 $picture 更改为 $pictures

```
$updateemail = mysql_query("insert into usr_groups(username, title, desc, picture) values('$username', '$title', '$desc', '$pictures')"); 
```

如果列名为关键字，例如 DESC，则无法插入

# sql - SUM() 中的错误结果

> ID：11361073
> 
> 赞同：1
> 
> 时间：2012-07-06T11:10:01.080
> 
> 标签：sql, sql-server-2000

SQL Server 2000 - 4 个表，每个 3 列。个人 ID (COTA)、用户 (Telegestionador) 和工作量值。

表格是：`Contactados, NC, FQ, OT`

其中之一的例子。

```
XAV045  QUIPILDORY    26
XAV045  QUIPILDORY    29
XAV045  QUIPILDORY    21
XAV045  QUIPILDORY    39
XAV052  LOPEZRA       29
XAV052  LOPEZRA       39
XAV052  LOPEZRA       24
XAV052  LOPEZRA       36 
```

我需要的是。带有 ID、USER 的结果视图，然后是按个人 ID/用户分组的工作量总和的字段。（有 4 个表，所以在最终视图中我应该有 6 列）

所以，第一行应该是

```
XAV045,QUIPILDORY, 115, X, Y, Z 
```

是 X、Y、Z`SUM()`来自其他 3 个表的结果。

第一次尝试是这样的：

```
SELECT     
   dbo.Contactados.COTA, dbo.Contactados.telegestionador, 
   SUM(dbo.Contactados.Total) AS Total, 
   SUM(dbo.OT.Total) AS [Cont-Der], 
   SUM(dbo.FQ.FQ) AS Cerrados, 
   SUM(dbo.NC.Total) AS NC
FROM
   dbo.Contactados 
LEFT OUTER JOIN
   dbo.OT ON dbo.Contactados.COTA = dbo.OT.COTA AND dbo.Contactados.telegestionador = dbo.OT.telegestionador AND dbo.Contactados.FGfin = dbo.OT.FGfin 
LEFT OUTER JOIN
   dbo.FQ ON dbo.Contactados.COTA = dbo.FQ.COTA AND dbo.Contactados.telegestionador = dbo.FQ.telegestionador AND dbo.Contactados.FGfin = dbo.FQ.FGfin 
LEFT OUTER JOIN
   dbo.NC ON dbo.Contactados.COTA = dbo.NC.COTA AND dbo.Contactados.telegestionador = dbo.NC.telegestionador AND dbo.Contactados.FGfin = dbo.NC.FGfin
GROUP BY 
   dbo.Contactados.telegestionador, dbo.Contactados.COTA 
```

它会抛出错误的结果，我知道`GROUP BY`将结果分组，而不是单独的表行。但我找不到这样做的正确方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:21:25.847

假设所有四个表的四列具有相同的数据类型，您可以使用 union all 列出所有值，然后将它们作为子查询的一部分求和：

```
SELECT
COTA
,Telegestionador
,SUM(CASE WHEN table_name = 'Contactados' THEN work_value ELSE 0 END) AS Contactados_sum
,SUM(CASE WHEN table_name = 'NC' THEN work_value ELSE 0 END) AS nc_sum
,SUM(CASE WHEN table_name = 'FQ' THEN work_value ELSE 0 END) AS fq_sum
,SUM(CASE WHEN table_name = 'QT' THEN work_value ELSE 0 END) AS qt_sum
FROM
(
SELECT 
COTA
,Telegestionador
,work_value
,'Contactados' as table_name
FROM Contactados
UNION ALL
SELECT 
COTA
,Telegestionador
,work_value
,'NC' as table_name
FROM NC
UNION ALL
SELECT 
COTA
,Telegestionador
,work_value
,'FQ' as table_name
FROM FQ
UNION ALL
SELECT 
COTA
,Telegestionador
,work_value
,'QT' as table_name
FROM QT
) summary
GROUP BY
COTA
,Telegestionador 
```

# css - CSS中的响应式输入字段-流体宽度？

> ID：11361075
> 
> 赞同：3
> 
> 时间：2012-07-06T11:10:09.940
> 
> 标签：css, forms, input

我正在尝试使以下注册框在 CSS 中流畅响应。

这是一个例子：[http ://cssdesk.com/aYLwW](http://cssdesk.com/aYLwW)

我希望输入字段宽度“灵活”并根据页面缩小。

您可以从示例中看到，当我缩小窗口时，按钮最终会下降到输入字段下方。

考虑到这一点，**我应该将我的 input#iiihuu-iiihuu 字段宽度设置**为允许输入字段优雅地调整大小而不会出现任何*颠簸*？

非常感谢您的任何指点：-D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T11:14:51.720

给`min-width:550px;`包含文本框和按钮的 div 一个。你的控制不会中断。

工作前。这里[http://cssdesk.com/dUjxF](http://cssdesk.com/dUjxF)

正如定义所说， min-width 为元素设置了一个 min-width，在任何情况下它都不会低于该大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T11:14:57.197

您可以将 css 宽度更改为基于百分比。 [看这里](http://cssdesk.com/RvQwN)

# android - 以编程方式滚动到android中的最后一个视图

> ID：11361077
> 
> 赞同：2
> 
> 时间：2012-07-06T11:10:27.607
> 
> 标签：android, scrollview, smooth-scrolling

我想滚动到视图的末尾。目前我正在尝试将滚动视图滚动到最新添加的视图的末尾。我试过用setscrolly，smoothscrollto。两者都有效，但问题是两者都不会滚动到最后，它只是滚动到最后一个视图。请建议我如何克服这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:22:44.827

我得到了它没有滚动到最后一个视图并停在最后一个视图的原因。我在视图的帖子线程中没有 smoothScrollTo(x,y)。由于添加最后一个视图时我的滚动视图没有刷新，因此它没有滚动到最后一个视图。

```
view.post(new Runnable() {
public void run() {
scrollview.smoothScrollTo(x,y);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:28:20.333

尝试使用`transcript mode`列表视图的参数。它提供自动滚动到新项目：

```
getListView().setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL); 
```

# php - next_record 调用，没有待处理的查询

> ID：11361108
> 
> 赞同：0
> 
> 时间：2012-07-06T11:12:07.387
> 
> 标签：php

我想调用一个`PHP`函数：

```
$rights =  $user->recupererDroitCreateur($_SESSION[CODE_USER]); 
```

recupererDroitCreateur 的代码是：

```
function recupererDroitCreateur($user_id) {
    $ret = array();
    $sSQL = "SELECT cm.class_menu_code
                 FROM menu m
                 LEFT JOIN classe_menu cm
                 ON m.class_menu_code = cm.class_menu_code
                 WHERE m.menu_deleted = 0 AND m.menu_visible = 1 AND cm.class_menu_parent IS NULL AND cm.class_menu_deleted = 0 
                 ORDER BY cm.class_menu_lib, m.menu_titre";
    $this->db->query($sSQL);
    while ( $this->db->next_record() ) {
        $code = $this->db->f('class_menu_code');
        $strMenus = $code.";";
        $this->recupererMenus($code, $code, $user_id, $strMenus);
    }
    return (explode(";", $strMenus));
} 
```

recupererMenus 的代码是：

```
function recupererMenus($classRoot, $classParentDirect, $user_id, &$menus)
{
    $sSQL1 = "SELECT class_menu_code FROM classe_menu WHERE class_menu_parent = '$classParentDirect' AND class_menu_deleted = 0";
    $this->db->query($sSQL1);
    while ( $this->db->next_record() ) {
        $this->recupererMenus($classRoot, $this->db->f('class_menu_code'), $user_id, $menus);
    }

    $sSQL = "SELECT m.menu_code
             FROM menu m
             LEFT JOIN classe_menu cm
             ON m.class_menu_code = cm.class_menu_code
             WHERE m.menu_deleted = 0 AND m.menu_visible = 1 AND cm.class_menu_parent = '$classParentDirect' AND cm.class_menu_deleted = 0 
             ORDER BY cm.class_menu_lib, m.menu_titre";

    $this->db->query($sSQL);
    while ( $this->db->next_record() ) 
    {
        $menus .= $this->db->f('menu_code').";";
    }
} 
```

在运行时有错误`next_record called with no query pending`：错误输出告诉导致错误的行，它说对应于该语句的行：`while ( $this->db->next_record() ) {`，还有指向该语句的行`$this->recupererMenus($code, $code, $user_id, $strMenus);`

那么我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:36:18.990

在`recupererMenus`你递归调用`recupererMenus`. 由于没有传递给 的查询标识符`next_record`，因此使用多个`query`s 会造成很大的混乱。当您从递归调用返回时，您将尝试使用`next_record`for a previous获取下一条记录`query`，但您的数据库框架不知道这..

我不知道您使用的框架，但是您要么必须传递标识符（如果可能的话），要么首先获取所有结果，然后进行递归调用。

# java - 如何从结果集中检索列值

> ID：11361116
> 
> 赞同：0
> 
> 时间：2012-07-06T11:12:42.760
> 
> 标签：java, cassandra, cql, jdbc-odbc

当我运行这个程序时，我在输出屏幕中得到了这个。我不知道是什么问题，有什么我遗漏的。

```
import org.apache.cassandra.cql.jdbc.*;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.*;
import javax.sql.*;
public class Operations 
{
        public static void main(String[] args){ 
        try
        {
            Class.forName("org.apache.cassandra.cql.jdbc.CassandraDriver");
            Connection con = DriverManager.getConnection("jdbc:cassandra://localhost:9160/temp");
           //String  name = "name";
            String qry = "select name FROM tempcql where key = detail";
            Statement smt = con.createStatement();
            ResultSet resultSet = smt.executeQuery(qry);
            while(resultSet.next())
            {
                System.out.println(resultSet.getString("name"));
            }

        }
        catch(Exception e)
        {
            System.out.println(" : "+e.getMessage());
        }
            }
} 
```

这是它的输出：java.nio.HeapByteBuffer[pos=86 lim=91 cap=159]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:34:45.277

您可以尝试获取字节并将其转换为字符串：

```
String name_result = new String(resultSet.getBytes("name"), "UTF-8");
System.out.println(name_result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:17:22.353

尝试在 SQL 字符串中使用单引号：

```
String qry = "select name FROM tempcql where key = 'detail'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:29:15.860

您正在以二进制格式获取值。但是您将列类型指定为字符串。相反，您需要说如下：

```
ObjectInputStream is = rs.getBinaryStream("name");
ByetBuffer bb = (ByteBuffer)is.readObject(); 
```

# android - 获取当前壁纸绝对路径？

> ID：11361119
> 
> 赞同：22
> 
> 时间：2012-07-06T11:12:54.773
> 
> 标签：android, wallpaper

我们如何获得当前的壁纸`absolute path`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T10:24:29.517

在 Android 4.2 上，壁纸位于：

```
/data/system/users/0/wallpaper 
```

将 替换为`0`您的用户 ID（查看`/data/system/users`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:20:42.843

确保您在手机的根目录中查找以启动，而不是在 SD 卡上。一旦您进入正确的子目录，壁纸文件将被称为“壁纸”，直到您将其复制到 SD 卡并将其重命名为“YourName.jpg”，图片查看器可能无法将其识别为图像文件。

我尝试了ES文件资源管理器和根资源管理器（从Marketplace下载）从手机根区域复制文件。即手机。`ROOT/data/data/com.android.settings/files/wallpaper..`它是手机存储本身的最低级别，类似于Windows中的“计算机”。

您手机上的文件资源管理器可能不允许您访问 root（您的手机不应该只需要 ROOT 权限来复制文件）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:22:01.090

使用`wallpaperManager`和调用`getWallpaperInfo`。这将返回一个`wallpaperinfo`对象，其中包含有关壁纸的所有信息。[在此处阅读有关壁纸信息的更多信息。](http://developer.android.com/reference/android/app/WallpaperInfo.html)

我想当前的壁纸将存储在一个私有系统文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T05:51:25.287

下载apk文件...

走这条路……你可以在这里找到

下载\com.amber.launcher.skin.samsung.galaxy_2018-08-24\res\drawable-nodpi-v4\bg_wallpaper.jpg

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-25T21:30:55.553

在 Android Oreo 上并使用系统提供的壁纸之一，我想要的壁纸不在接受的答案提到的路径上，但我找到了在系统文件夹中包含它的 apk。

我从路径中得到它：system/framework/framework-res.apk 我必须打开 apk 并提取：/res/drawable-nodpi-v4/default_wallpaper.png。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-09T19:49:14.543

Android Oreo 不在其他评论中的位置

内部存储/Android/data/com.android.systemui/files/backupwallpapers

我只需要找到我从下载文件夹中删除的壁纸。

# iphone - Windowbase 应用程序中的自定义 TabbarController

> ID：11361124
> 
> 赞同：0
> 
> 时间：2012-07-06T11:13:28.957
> 
> 标签：iphone, ipad

嗨朋友我想为 windows 基础开发一个应用程序加载页面的第一页然后在下一个视图之后我想添加 UitabbarController。我已经实现了这段代码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    flag=1;

    splash *objSplash=[[splash alloc]initWithNibName:@"splash" bundle:nil];

    Home *placeholder1 = [[Home alloc] initWithNibName:@"Home" bundle:nil];
    placeholder1.title=@"Home";
    placeholder1.tabBarItem.image=[UIImage imageNamed:@"home1.png"];

    shopHome *placeholder2 = [[shopHome alloc] initWithNibName:@"shopHome" bundle:nil];
    placeholder2.title=@"Store";
    placeholder2.tabBarItem.image=[UIImage imageNamed:@"Shop.png"];

    Search1 *placeholder3 = [[Search1 alloc] initWithNibName:@"Search1" bundle:nil];
    placeholder3.title=@"Search";
    placeholder3.tabBarItem.image=[UIImage imageNamed:@"search2.png"];

    info *placeholder4 = [[info alloc]initWithNibName:@"info" bundle:nil];
    placeholder4.title=@"Info";
    placeholder4.tabBarItem.image=[UIImage imageNamed:@"info1.png"];

    CartView *placeholder5=[[CartView alloc]initWithNibName:@"CartView" bundle:nil];
    placeholder5.title=@"Cart";
    placeholder5.tabBarItem.image=[UIImage imageNamed:@"Cart.png"];

    NSMutableArray *localViewControllersArray = [[NSMutableArray alloc] init];

    UINavigationController *localNavController;

    localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder1];
    localNavController.navigationBar.tintColor=[UIColor blackColor];

    // Add navigation controller to the local vc array (1 of 2)
    [localViewControllersArray addObject:localNavController];
    [localNavController release];

    localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder2];
    [localViewControllersArray addObject:localNavController];
    [localNavController release];

    localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder3];
    [localViewControllersArray addObject:localNavController];
    [localNavController release];

    if(flag==1)
    {
        localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder5];
        [localViewControllersArray addObject:localNavController];
        [localNavController release];

    }

    localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder4];
    [localViewControllersArray addObject:localNavController];
    [localNavController release];

    tabBarController = [[UITabBarController alloc] init]; 
    //tabBarController.viewControllers = [NSArray arrayWithObjects:placeholder1, placeholder2, placeholder3, placeholder4, nil]; 
    tabBarController.viewControllers = localViewControllersArray;
    //tabBarController.tintColor=[UIColor colorWithRed:160/256.0 green:82/256.0 blue:45/256.0 alpha:1.0];
    //tabBarController.tabBar.backgroundColor=[UIColor colorWithRed:160/256.0 green:82/256.0 blue:45/256.0 alpha:1.0];

    tabBarController.delegate=self;

    [placeholder1 release];
    [placeholder2 release];
    [placeholder3 release];
    [placeholder4 release];

    [self.window addSubview:objSplash.view];

    //[self.window addSubview:navigationController.view];

    //[self.window addSubview:tabBarController.view];

    [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(goToNext) userInfo:nil repeats:NO];

    flag=1;

    [self parsingData];

    [window makeKeyAndVisible];

    return YES;
}

-(void)goToNext
{
    //[self.navigationController.view addSubview:tabBarController.view];

    [self.window addSubview:tabBarController.view];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:22:45.910

只需尝试实现这一点：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {   
    splash *objSplash=[[splash alloc]initWithNibName:@"splash" bundle:nil];
    Home *placeholder1 = [[Home alloc] initWithNibName:@"Home" bundle:nil];
    placeholder1.title=@"Home";
    placeholder1.tabBarItem.image=[UIImage imageNamed:@"home1.png"];

    shopHome *placeholder2 = [[shopHome alloc] initWithNibName:@"shopHome" bundle:nil];
    placeholder2.title=@"Store";
    placeholder2.tabBarItem.image=[UIImage imageNamed:@"Shop.png"];

    Search1 *placeholder3 = [[Search1 alloc] initWithNibName:@"Search1" bundle:nil];
    placeholder3.title=@"Search";
    placeholder3.tabBarItem.image=[UIImage imageNamed:@"search2.png"];

    info *placeholder4 = [[info alloc]initWithNibName:@"info" bundle:nil];
    placeholder4.title=@"Info";
    placeholder4.tabBarItem.image=[UIImage imageNamed:@"info1.png"];

    CartView *placeholder5=[[CartView alloc]initWithNibName:@"CartView" bundle:nil];
    placeholder5.title=@"Cart";
    placeholder5.tabBarItem.image=[UIImage imageNamed:@"Cart.png"];

    NSMutableArray *localViewControllersArray = [[NSMutableArray alloc] init];
    UINavigationController *localNavController;
    localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder1];
    localNavController.navigationBar.tintColor=[UIColor blackColor];

    // Add navigation controller to the local vc array (1 of 2)
    [localViewControllersArray addObject:localNavController];
    [localNavController release];
    localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder2];
    [localViewControllersArray addObject:localNavController];
    [localNavController release];

    localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder3];
    [localViewControllersArray addObject:localNavController];
    [localNavController release];

    if(flag==1)
    {
        localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder5];
        [localViewControllersArray addObject:localNavController];
        [localNavController release];
    }
    localNavController = [[UINavigationController alloc] initWithRootViewController:placeholder4];
    [localViewControllersArray addObject:localNavController];
    [localNavController release];

    tabBarController = [[UITabBarController alloc] init]; 
    tabBarController.viewControllers = localViewControllersArray;
    tabBarController.delegate=self;
    [placeholder1 release];
    [placeholder2 release];
    [placeholder3 release];
    [placeholder4 release];

    [self.window addSubview:objSplash.view];
    [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(goToNext) userInfo:nil repeats:NO];
    [window makeKeyAndVisible];
    return YES;
}

-(void)goToNext
{
    [self.window addSubview:tabBarController.view];
}

@implementation Home
- (id)initWithTitle:(NSString*)theTitle {
    if (self = [super init]) {
        self.tabBarItem.image = [UIImage imageNamed:@"Home.png"];
        self.title = theTitle;
    }
    return self;
} 
```

**注意：** 这是已经过测试的解决方案，希望它也对您有用。

# javascript - 在书签中使用 JS setTimeout

> ID：11361126
> 
> 赞同：0
> 
> 时间：2012-07-06T11:13:31.440
> 
> 标签：javascript, bookmarklet

我正在尝试在 Firefox 的书签中运行一些 JS 代码。这里有一些基本的代码来证明这一点：

window.setTimeout(function() {alert('我跑');}, 1000 );

当我在其中运行带有 setTimeout 的代码时，我将整个页面替换为通常记录在控制台中的计数器值。

有没有办法捕捉这个输出并阻止这种情况发生？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T11:20:59.337

尝试以下操作：

```
javascript:(window.setTimeout(function() { alert('i ran'); }, 1000));void(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:53:55.830

当您`javascript:`在地址栏中使用该协议时（这是所有小书签所做的），浏览器会执行`document.write`任何返回值（如果它是真实的）。

调用总是返回一个`setTimeout`计时器的数字。要解决这个问题，您可以附加一个`void(0);`类似的时代，或者像我喜欢做的那样，将它包装在一个[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中：

```
(function() {
    window.setTimeout( function() {alert('i ran');}, 1000 );
})(); 
```

# iphone - 从 plist 中过滤 NSArry 的数据

> ID：11361128
> 
> 赞同：0
> 
> 时间：2012-07-06T11:13:47.663
> 
> 标签：iphone

我想按城市过滤数据并将其打印到表格部分。我有这样的代码。

```
NSMutableArray *key1=[NSMutableArray arrayWithCapacity:count];
NSMutableArray *city=[NSMutableArray arrayWithCapacity:count];
NSMutableArray *name= [NSMutableArray arrayWithCapacity:count];
for(id key in data) {
    [key1 addObject:key];
}
for (int i=0;i<[key1 count]; i++) {
    NSLog(@"key:%@",[key1 objectAtIndex:i]);
}
for (int i=0;i<[key1 count]; i++) {
    NSDictionary *email_key=[data objectForKey:[key1 objectAtIndex:i]];
    [city addObject:[email_key objectForKey:@"city"]]; 
    [name addObject:[email_key objectForKey:@"f_name"]];
} 
```

我有来自 plist 的城市数组。

我的 Plist 的内容：

```
<key>bh@gmail.com</key>
<dict>
    <key>fnmae</key><string>hello</string>
    <key>city</key><string>DElhi</string>
</dict>
<dict>
    <key>fnmae</key><string>hi</string>
    <key>city</key><string>Bombay</string>
</dict> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:42:06.097

首先获取所有唯一城市的名称，如下所示：

```
NSMutableDictionary *cityBasedData=[[NSMutableDictionary alloc] init];
for(id key in data) {
    [key1 addObject:key];
}
for (int i=0;i<[key1 count]; i++) {
    NSDictionary *email_key=[data objectForKey:[key1 objectAtIndex:i]];
    if (![cityBasedData objectForKey:[email_key objectForKey:@"city"]]) {
     NSMutableArray *nameList = [[NSMutableArray alloc] init];
     [nameList addObject:[email_key objectForKey:@"f_name"]];
     [cityBasedData setValue:nameList forKey:[email_key objectForKey:@"city"]];
     [nameList release]; 
    }
    else
    {
      NSMutableArray *nameList = [cityBasedData objectForKey:[email_key objectForKey:@"city"]];
      [nameList addObject:[email_key objectForKey:@"f_name"]];
     [cityBasedData setValue:nameList forKey:[email_key objectForKey:@"city"]];
    }

} 
```

得到这个字典后，可以遍历字典中的每个键，得到每个键的数组：

```
for(id key in cityBasedData)
{
   //get array as follows:
   NSArray *namelist = [cityBasedData objectForKey:key];
} 
```

# google-drive-api - 恢复上传时，获取已上传数据的大小总是失败（500 内部服务器错误）

> ID：11361129
> 
> 赞同：1
> 
> 时间：2012-07-06T11:13:56.080
> 
> 标签：google-drive-api, google-api-java-client

[当可恢复上传失败时，我尝试按照https://developers.google.com/drive/manage-uploads#resuming_a_failed_chunk](https://developers.google.com/drive/manage-uploads#resuming_a_failed_chunk)中的指导获取已成功上传的数据大小， 但服务器始终返回 500 内部服务器错误。

出于同样的原因，com.google.api.client.http.HttpRequest.execute() 总是失败（由于某种原因上传失败（套接字超时..） -> 重试 -> 获取成功上传的数据大小 -> 500 错误）

[日志]

```
07-06 10:20:14.320: I/GDTest(29334): -------------- 请求 --------------
07-06 10:20:14.320: I/GDTest(29334): PUT https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable&upload_id=AEnB2Upe55Y_KlG2---SKIP----vSIWg
07-06 10:20:14.320：I/GDTest(29334)：接受编码：gzip
07-06 10:20:14.320：I/GDTest(29334)：授权：承载 ya29.AHE---SKIP---Qo9GN
07-06 10:20:14.320：I/GDTest(29334)：内容范围：字节 */2148165
07-06 10:20:14.320：I/GDTest(29334)：用户代理：Google-HTTP-Java-Client/1.10.3-beta (gzip)
07-06 10:20:14.320：I/GDTest(29334)：内容长度：0
07-06 10:20:14.980: I/GDTest(29334): -------------- 响应 --------------
07-06 10:20:14.980: I/GDTest(29334): 500 内部服务器错误
07-06 10:20:14.980: I/GDTest(29334): Cache-Control: no-cache, no-store, must-revalidate
07-06 10:20:14.980：I/GDTest(29334)：内容长度：180
07-06 10:20:14.980：I/GDTest(29334)：内容类型：应用程序/json
07-06 10:20:14.980：I/GDTest(29334)：日期：2012 年 7 月 6 日星期五 10:20:14 GMT
07-06 10:20:14.980: I/GDTest(29334): 过期: 1990 年 1 月 1 日星期五 00:00:00 GMT
07-06 10:20:14.980: I/GDTest(29334): Pragma: no-cache
07-06 10:20:14.980：I/GDTest(29334)：服务器：HTTP 上传服务器建于 2012 年 6 月 14 日 02:12:09 (1339665129)
07-06 10:20:14.980: I/GDTest(29334): X-Android-Received-Millis: 1341570014983
07-06 10:20:14.980: I/GDTest(29334): X-Android-Sent-Millis: 1341570014772
07-06 10:20:14.995: I/GDTest(29334): -------------- 请求 --------------

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:44:28.927

这似乎是由错误引起的，因为请求看起来是正确的（通常 500 响应是由错误引起的）。

这种情况总是发生在同一个文件上吗？如果是的话，你能和我分享那个文件吗？您是否尝试过使用不同的（较小的）文件进行类似的操作？

# xpath - XQuery 一次显示两个元素数据？

> ID：11361134
> 
> 赞同：0
> 
> 时间：2012-07-06T11:14:25.110
> 
> 标签：xpath, xquery

下面是xml文件-

```
<Countries>
  <Country>
    <Name>India</Name>
    <Capital>New Delhi</Capital>
  </Country>
  <Country>
    <Name>USA</Name>
    <Capital>Washington DC</Capital>
  </Country>
  <Country>
    <Name>England</Name>
    <Capital>London</Capital>
  </Country>
  <Country>
    <Name>Japan</Name>
    <Capital>Tokyo</Capital>
  </Country>
  <Country>
    <Name>Srilanka</Name>
    <Capital>Colombo</Capital>
  </Country>
</Countries> 
```

我已将它存储在 XMLDB BaseX 中。现在，如果我存储在那里，就像普通的数据库一样，我会编写简单`select`的语句来从表中检索数据。例如：

```
select name, capital from country 
```

并得到了两行。对？如何使用 XQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:14:59.393

在关系数据库（您以图形方式将其描述为“普通数据库”）中，每个查询都将表作为其输入并生成一个表作为其输出。在 XML 数据库中，输入是 XML，输出是 XML。因此，您需要描述您想要生成的 XML。一旦你这样做了，你的问题的答案是肯定的：你当然可以编写一个 XQuery 来产生那个输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:59:54.473

似乎你想要一个所有元素`name`的序列：`capital`

```
 /Countries/Country/(Name|Capital) 
```

此查询产生的结果是：

```
<Name>India</Name>
<Capital>New Delhi</Capital>
<Name>USA</Name>
<Capital>Washington DC</Capital>
<Name>England</Name>
<Capital>London</Capital>
<Name>Japan</Name>
<Capital>Tokyo</Capital>
<Name>Srilanka</Name>
<Capital>Colombo</Capital> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T04:43:40.167

如果您期望输出没有元素，那么试试这个

```
for $x in doc("Country")/Countries/Country
  return string-join( ($x/Name, $x/Capital), " - ") 
```

输出将是 -

```
`India - New Delhi USA - Washington DC England - London Japan - Tokyo Srilanka - Colombo` 
```

如果您希望它们在单独的行上，那么这就是您必须使用的 -

```
for $x in doc("Country")/Countries/Country
  return <li>{string-join( ($x/Name, $x/Capital), " - ")}</li> 
```

`<li>`您可以使用任何其他相关标签代替。

# java - Java项目管理员权限windows 7

> ID：11361140
> 
> 赞同：6
> 
> 时间：2012-07-06T11:14:43.883
> 
> 标签：java, netbeans, file-permissions

我正在构建一个必须复制/移动文件/文件夹的摇摆应用程序（文件资源管理器）。当我尝试复制到某些文件夹（例如 Program Files）时，它会引发异常（拒绝访问）。我可以通过以管理员身份运行 NetBeans 来解决。

无论如何我可以只授予我的项目管理员权限，而不以管理员身份运行整个虚拟机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:59:29.803

对于一个非常糟糕的非跨平台方法，您可以使用 VBScript`.ShellExecute`并`Runtime.exec`强制程序以管理员身份运行。

为简洁起见，我在 [https://dl.dropbox.com/u/26746878/Misc/JavaElevated.zip创建了一个简单的程序](https://dl.dropbox.com/u/26746878/Misc/JavaElevated.zip)

它可以与`java Launcher`.

从 NetBeans，我假设你会以某种方式让它`Launcher`作为主类而不是 main运行`Program`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-05-05T22:17:19.470

是否没有命令行启动，我确定有，并且有一个人（ette）会在大约 10 秒内为我们写出来。视窗 7/64

# iphone - 如何为许多图像创建浏览器视图以加载它们而不会停止？

> ID：11361141
> 
> 赞同：1
> 
> 时间：2012-07-06T11:14:49.767
> 
> 标签：iphone, ios5

我想像在相册（相机胶卷）中一样流畅地滚动图像。我正在使用代理模式，但它仍然不能流畅地滚动。它是如何为相机胶卷制作的？或者他们是否在手机开机时预加载图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:32:53.890

他们将它们加载到后台队列中，因此不会阻塞主 UI。

# c++ - 使用“delete”从链表中删除一个节点

> ID：11361147
> 
> 赞同：0
> 
> 时间：2012-07-06T11:15:21.037
> 
> 标签：c++, pointers, linked-list, delete-operator

下面是从单链表的尾部删除元素的部分代码：

```
int SLList::deleteFromTail()
{
    int el = tail->info;

    //if the list has only one element
    if(head == tail) {
        delete head;
        head = tail = 0;
    }
    else {
        //some code here...
    }

    return el
} 
```

这里`head`和`tail`分别是指向 LL 的第一个和最后一个元素的指针。

在我们设置`if`之后的上面的块中。`delete head``head = tail = 0`

但是**在我们删除之后`head`，我们如何设置它的值呢？**（`NULL`在这种情况下）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T11:16:08.427

头是一个`pointer`。您正在删除由`object`指向的`pointer`，而不是`pointer`本身

考虑这个例子：

```
Foo *foo = new Foo(); //foo does not store Foo object. Just an adress of created object.
//do some stuff
delete foo; //object is deleted
foo = new Foo(); //create another Foo and make foo point to it 
```

**编辑** 指针只是对象的地址。当你写的时候`delete head`你删除了 head 指向的对象，但即使在删除之后`head pointer`也会指向和以前一样的地方。但是取消引用它（例如`*head`）会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:22:49.503

删除头部后，创建新对象并将对象的**地址分配****给头部**

```
head = addressOfNewObject; 
```

# php - 如何防止大型 Apache/PHP 文件上传失败？

> ID：11361149
> 
> 赞同：5
> 
> 时间：2012-07-06T11:15:23.407
> 
> 标签：php, apache, memory-management, file-upload, large-files

我最近在我们的一台服务器上安装了一个 PHP 下载门户。一切正常，但用户无法上传大文件（~ 20 MB）。

我将以下设置设置为非常大的值或无限制：

```
memory_limit
upload_max_filesize
post_max_size
memory_limit 
```

完整`php.ini`在这里： http: [//pastebin.com/NrqJvMVM](http://pastebin.com/NrqJvMVM)

但是重新启动服务器后仍然失败。

我错过了一个设置吗？我是否必须更新 Apache 配置中的任何值？公司防火墙会以某种方式干扰吗？

编辑：我检查了 phpinfo() 并且主配置仍然显示旧值。但是，配置文件 C:\Windows\php.ini 具有新值。我是否使用了错误的配置文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T13:36:06.083

您也可以在脚本中测试参数。也许这有帮助：

1.  max_execution_time = ini_set("max_execution_time", "-1");
2.  post_max_size = ini_set("post_max_size", "200M");
3.  memory_limit = ini_set("memory_limit", "200M");
4.  upload_max_filesize = ini_set("upload_max_filesize", "200M");

在 .htaccess 中：

php_value upload_max_filesize 200M

php_value memory_limit 256M

php_value max_execution_time 18000

这里有关于这个主题的好文章：[http](http://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/) ://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/ | [https://www.dokuwiki.org/faq:uploadsize](https://www.dokuwiki.org/faq:uploadsize)

Suhosin 安装在您的服务器上还是使用 fcgi ;-)？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T06:39:40.433

安装的所有配置设置都包含在**php.ini 文件**中。有时这些设置可能会被 apache **.htaccess 文件**中的指令覆盖，甚至被脚本本身覆盖。

以下我们需要修改的设置 -

*   文件上传
*   上传最大文件大小
*   最大输入时间
*   内存限制
*   max_execution_time
*   post_max_size

下面详细介绍配置设置。

*   upload_max_filesize 和 post_max_size

    文件通常以称为“multipart/form-data”的格式发布到网络服务器。post_max_size 设置脚本以这种方式可以接受的数据量的上限。理想情况下，此值应大于您为 upload_max_filesize 设置的值。

    重要的是要意识到 upload_max_filesize 是您上传的所有文件的大小之和。post_max_size 是 upload_max_filesize 加上表单中所有其他字段的长度加上编码器可能包含的任何 mime 标头的总和。由于这些字段通常很小，您通常可以将上传的最大大小近似为帖子的最大大小。

    根据 PHP 文档，您可以在 HTML 表单中设置 MAX_UPLOAD_LIMIT 以建议对浏览器的限制。

*   内存限制

    当 PHP 引擎处理传入的 POST 时，它需要将一些传入的数据保存在内存中。仅当您在配置时使用了 --enable-memory-limit 选项时，此指令才有效。设置过高的值可能非常危险，因为如果同时处理多个上传，所有可用内存都将被用完，并且其他消耗大量内存的不相关脚本也可能影响整个服务器。

*   max_execution_time 和 max_input_time

    这些设置定义了脚本的最长生命周期以及脚本在接受输入时应该花费的时间。如果正在传输几兆字节的数据，则 max_input_time 应该相当高。您可以通过在脚本中调用 set_time_limit() 函数来覆盖 ini 文件中 max_input_time 的设置。

附加评论

*   阿帕奇设置

    apache 网络服务器有一个 LimitRequestBody 配置指令，该指令限制所有 POST 数据的大小，而与使用的 Web 脚本语言无关。某些 RPM 安装将限制请求正文设置为 512Kb。您需要将其更改为更大的值或完全删除该条目。

*   其他选项

    如果您希望在您的网站上处理大量并发文件传输，请考虑使用 perl 或 java 服务器端组件。PHP 恰好也是我们最喜欢的 Web 编程语言，但 perl 和 Java 在文件上传方面略领先。

也可以看看：

1.  [使用php上传最大100MB的大文件](https://stackoverflow.com/questions/4757082/upload-large-file-upto-100mb-using-php)
2.  [使用php、apache上传大文件](https://stackoverflow.com/questions/1700207/upload-large-files-using-php-apache)
3.  [PHP：上传大文件失败](https://stackoverflow.com/questions/4083100/php-uploading-large-files-fail)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T11:20:57.353

也许，[这篇](http://www.sitepoint.com/upload-large-files-in-php/)文章可以帮助你。您可以将参数添加到 .htaccess

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T11:19:14.013

您已经写了两次 post_max_size 变量，如果第一个值为 0，第二个值为 9999M，则删除第一个并尝试。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-04T03:23:32.980

> 我是否使用了错误的配置文件。

好吧，phpinfo() 告诉你你正在使用哪一个。查看输出顶部附近的右侧`Configuration File (php.ini) Path`。`Loaded Configuration File`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T11:22:00.267

也许 MAX_FILE_SIZE 设置不正确......

```
<form enctype="multipart/form-data" action="index.php" method="post">
<input type="hidden" name="MAX_FILE_SIZE" value="50000" />
<input name="filedata" type="file" />
<input type="submit" value="Send file" />
</form> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-02T16:34:13.697

您应该找到正确的 php.ini 文件 =)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-09T07:49:52.343

我过去遇到过你的情况，我发现最好的解决方案是使用第三方库在客户端将文件拆分成块，然后将它们全部重新放在服务器上。我发现了这个：[http ://www.plupload.com/](http://www.plupload.com/)

非常方便和有效。它适用于各种不同的技术，因此它可以在绝大多数客户端机器上工作。(flash, silverlight, html5 file api aso...) 干杯！

# symfony - 自定义验证器未在 Symfony 2 中调用

> ID：11361150
> 
> 赞同：2
> 
> 时间：2012-07-06T11:15:27.900
> 
> 标签：symfony

我对自定义验证器约束有一些问题。我想验证实体 TicketCode 中的字段代码。

但是当我使用 if(form->isValid) 时没有调用验证器，我不明白为什么。

我的自定义验证器需要实体管理器与数据库检查此代码是否对应，否则验证器会发送消息错误。

**我的实体**

```
 <?php

namespace My\MyBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use My\MyBundle\Validator as TicketAssert;

/**
 * My\MyBundle\Entity\TicketCode
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="My\MyBundle\Entity\TicketCodeRepository")
 */
class TicketCode
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $code
     *
     * @ORM\Column(name="code", type="string", length=255)
     * @TicketAssert:ValidCode(entity="TicketBundle:TicketCode", property="code")
     */
    protected $code;
 } 
```

**我的班级约束**

```
<?php

namespace My\MyBundle\Validator;

use Symfony\Component\Validator\Constraint;

/**
 * @Annotation
 */

class ValidCode extends Constraint
{
    public $message = 'Code Invalide';
    public $entity;
    public $property;

    public function ValidatedBy()
    {
        return 'my_ticket_validator';
    }

    public function requiredOptions()
    {
        return array('entity', 'property');
    }

    public function targets()
    {
        return self::CLASS_CONSTRAINT;
    }
} 
```

**我的验证器**

```
<?php

namespace My\MyBundle\Validator;

use Doctrine\ORM\EntityManager;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class ValidCodeValidator extends ConstraintValidator
{

    private $entityManager;

    public function __construct(EntityManager $entityManager)
    {
        $this->entityManager = $entityManager;
    }

    public function isValid($value, Constraint $constraint)
    {
        $todayInObject = new \DateTime();  //Renvoit la date du jour
        var_dump($todayInObject);

        $ticketCode = $this->entityManager->getRepository('MyMyBundle:TicketCode')->findOneBy(array('code' => $constraint->property));

        if ($ticketCode != null) {

            if ($ticketCode->nbMaxUse != 0 && ($todayInObject >= $ticketCode->getDateBegin && $todayInObject <= $ticketCode->getDateEnd())) {

                return true;
            }
            else {
                $this->setMessage($constraint->message);
                return false;
            }
        }
        else {
            $this->setMessage($constraint->message);
            return false;
        }

        return false;
    }
} 
```

最后我的**service.yml**在我的包中。

```
parameters:

    my_ticket.validator.validcode.class:      My\MyBundle\Validator\ValideCodeValidator

services:

    my_ticket.validator.validcode:
       class:      %my_ticket.validator.validcode.class%
       arguments: [@doctrine.orm.entity_manager]
       tags:
            - { name: validator.constraint_validator, alias: my_ticket_validator } 
```

如果您知道为什么我的验证器从未被调用，请向我解释谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:11:44.200

您的函数名称*ValidatedBy()*中有一个大V。它应该是*validBy()*。

# objective-c - 我将如何在目标 c 中创建这个 AS3 数据结构？

> ID：11361155
> 
> 赞同：0
> 
> 时间：2012-07-06T11:15:51.303
> 
> 标签：objective-c, actionscript-3, data-structures

在 AS3 中，如果我想快速设置一些要使用的数据，我会做这样的事情......

```
static var playerData:Object = {position:{startX:200, startY:200}}; 
```

我将如何在 Objective c 中创建相同的内容？

或者..有没有更好的方法在 Obj-c 中存储类似的数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:49:51.023

需要说明的是，我不是 Objective-C 方面的专家，所以也许一些 Objective-C 大师可以比我更好地帮助你。但我认为您可以使用它`NSMutableDictionary`来模拟`Object`AS3 行为：

```
id playerData = [[NSMutableDictionary alloc] init];
id position = [[NSMutableDictionary alloc] init];

[position setObject:@"200" forKey:@"startX"];
[position setObject:@"200" forKey:@"startY"];

[playerData setObject:position forKey:@"position"]; 
```

如果在 AS3 中您访问为：

```
playerData.position.startX 
```

在 Objective-C 中，你可以这样做：

```
[[playerData objectForKey:@"position"] objectForKey:@"startX"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:59:43.637

如果它是您会经常使用的东西，那么创建自定义类可能是一种更好的方法。

```
customClass <NSObject>

@property float startX
@property float startY 
```

这样，您可以像在 AS3 中一样使用点：

customClassIstance.startX / startY

如果您需要进一步说明，请告诉我。

# android - 使用 getLoaderResultSynchronously 对 AsyncTaskLoader 进行单元测试

> ID：11361158
> 
> 赞同：5
> 
> 时间：2012-07-06T11:16:01.183
> 
> 标签：android, junit, android-loader

我正在尝试为执行一些 API 调用的 REST 客户端创建单元测试。客户端在实时应用程序中运行良好，但我无法让它在测试用例中运行。

显然， LoaderTestCase.getLoaderResultSynchronously() 可以在这里使用（至少根据Android参考，但它不会接受我的加载器。代码：

```
public void testGetEventInfo() {
    // Init some vars
    ...

    // Create & execute loader
    RESTLoader loader = new RESTLoader(getContext(),
            RESTLoader.HTTPVerb.GET, action, params, LOADER_GET_NEWS);
    getLoaderResultSynchronously(loader);
} 
```

这会产生*类型 LoaderTestCase 中的错误 getLoaderResultSynchronously(Loader) 不适用于参数 (RESTLoader)*。

RESTLoader 扩展了 AsyncLoader。注意我用的是supportlibrary，可能里面的Loader不兼容？文档没有提供这方面的信息。

我尝试了几种方法来解决这个问题，但似乎都不起作用：

*   向加载程序注册了一个侦听器。但是，回调永远不会触发
*   使用 CountdownLatch（也与侦听器一起使用）。同样，没有触发/倒计时超时。
*   玩弄类型模板（），但没有成功。
*   SO上的类似解决方案，尽管再次未能达到听众。

有人知道为什么 getLoaderResultSynchronously 不会接受加载器吗？或者另一种测试加载器的干净方法，包括测试返回数据的方法？我可以在单独的情况下测试处理返回数据，但我也想测试实际数据。

真挚地，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T22:10:34.617

你看过[**源代码**](http://source-android.frandroid.com/frameworks/base/test-runner/src/android/test/LoaderTestCase.java)吗？您会发现以下导入语句：

```
import android.content.Loader;
import android.content.Loader.OnLoadCompleteListener; 
```

看起来 Android 没有为`LoaderTestCase`. 最简单的解决方案是暂时更改为不支持`LoaderManager`（即让您的班级使用`android.content.Loader`替代），测试您的应用程序，然后切换回支持实现。您也可以考虑将测试源代码复制到您的项目中，导入支持`LoaderManager`，然后直接执行。我不熟悉`Loader`s 的测试库，但从表面上看这似乎并不明显会导致任何重大问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-16T15:41:10.627

[您可以在此处](https://android.googlesource.com/platform/frameworks/base/+/cd92588/test-runner/src/android/test/LoaderTestCase.java)从 LoaderTestCase 获取源，在您的测试项目中从该源创建 SupportLoaderTestCase 类并修改所有命名空间以支持库命名空间（例如，将 android.content.Loader 更改为 android.support.v4.content.Loader）。您可以从 SupportLoaderTestCase（而不是 LoaderTestCase）扩展您的测试用例并毫无问题地使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:48:29.693

您尝试调用的方法 (getLoaderResultSynchronously) 接受 android.content.Loader 类型的对象。如果您的 RESTLoader 类不是该 EXACT 类型，那么您将收到此错误。我怀疑你的类直接或间接扩展了 android.support.v4.content.Loader，这可以解释错误。

我不知道支持测试此类类的 LoaderTestCase 的后向端口。

# php - 获取 php 数组中的 HTML 表格数据

> ID：11361163
> 
> 赞同：1
> 
> 时间：2012-07-06T11:16:21.090
> 
> 标签：php, javascript, html

我是 PHP 新手。因此，如果我使用愚蠢的策略，我首先道歉。我在 PHP 网站上工作。我的页面从 MySql 查询数据，并与我的复选框一起显示在 html 表中。用户可以使用复选框和按钮删除任何数据。这一切都是使用javascript完成的。这是我从 html 表中删除数据的代码

```
<script type="text/javascript">
function deleteRow() {
        try {
            var table = document.getElementById("Categories");
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                table.deleteRow(i);
                rowCount--;
                i--;
            }

        }
        }catch(e) {
            alert(e);
        }
    }

</script> 
```

单击保存按钮 MySql 更新查询应运行以保存对页面所做的所有更改。我知道这可以通过 PHP 来完成。但这里的问题是我如何从 php 中的 html 获取数据来运行查询？如果有人能指出我正确的方向，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:31:56.707

您可以制作一个表单，其中包含以下复选框：`<input type="checkbox" name="m_Name[]" value="id_of_element">`。当您在服务器端提交此表单时，您可以执行以下操作：

```
foreach ($_POST['m_Name'] as $id){
    $query = 'DELETE FROM table WHERE id='.$id;
    //execute query with mysqli_*, PDO or mysql_*; NOTE: if you are not doing educational project don't use last one.
} 
```

但更好的方法是：

```
$query = 'DELETE FROM table WHERE id IN (';
$in = '';

foreach ($_POST['m_Name'] as $id)
    $in .= $id.',';

$in = substr($in, 0, strlen($in)-1).')'; // removes extra "," at the end.
$query .= $in;
//run the query. 
```

The last one wil execute only one query to delete notes so it's better for performance. But the way I've created query seems ugly to me but I am very tired to thing about improvements. :)

# express - 玉块如何正确重用代码？

> ID：11361164
> 
> 赞同：1
> 
> 时间：2012-07-06T11:16:29.810
> 
> 标签：express, partial-views, block, pug

如何使用玉中的块插入任意代码（“部分”样式）（在 express 3.0 之后）？

假设我有各种从“layout.jade”继承的模板，每个模板都呈现不同的视图，但我有通用代码（适合部分）。

我想到的唯一解决方案是用公共代码创建一个共同的父级，但这看起来很奇怪......

```
parent
body
 block no_common_1
 block common_1
     ... code
 block no_common_2
 block common_2
     ... code

child1
 block no_common_1
      ... code
 block common_1
 block no_common_2
      ... code
 block common_2

child2
 block no_common_1
      ... code
 block common_1
 block no_common_2
      ... code
 block common_2 
```

这是声音吗？我可以在这里和那里跳过一些街区吗？改变顺序呢？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:53:27.633

从 express.js 中删除了 Partials，但 Jade 仍然拥有它们。您必须使用 include + 部分路径。

```
 include ../path/to/partial 
```

# android - Monodroid ListView 获取所选项目类型转换错误

> ID：11361165
> 
> 赞同：1
> 
> 时间：2012-07-06T11:16:30.990
> 
> 标签：android, xamarin.android, android-4.0-ice-cream-sandwich

我有 listview 项目的这个问题，希望你们能帮我解决这个问题。我的目标是用列表填充列表视图，当用户触摸这些项目时，我想加载另一个视图。添加项目工作正常，但是当我从选定项目中获取值并将其类型转换为正确的对象时，它带有“'无效转换'无法转换......”并崩溃。

仅供参考，我使用的是 Android 4.0 sim，这些是代码的一部分：

```
SetContentView(Resource.Layout.ArchiveList);
ListView lstArchiveList = FindViewById<ListView>(Resource.Id.lstArchive);

if (lstArchiveList != null) {
    ArrayAdapter<MobileContracts.Archive> archivesAdapter = new 
         ArrayAdapter<MobileContracts.Archive>(this, Resource.Layout.ListItem, sessionData.Archives.Archive);
    lstArchiveList.Adapter = archivesAdapter;
    lstArchiveList.TextFilterEnabled = true;
    lstArchiveList.ItemClick += new EventHandler<AdapterView.ItemClickEventArgs>(lstArchiveList_ItemClick);
    archivesAdapter.NotifyDataSetChanged();
} 
```

OnClick 事件处理程序：

```
void lstArchiveList_ItemClick(object sender, AdapterView.ItemClickEventArgs e) {
    SetContentView(Resource.Layout.SearchDocuments);
    ListView lstEditableIndexList = FindViewById<ListView>(Resource.Id.lstEditableIndexList);
    if (lstEditableIndexList != null) {

        Console.WriteLine("sender type: {0}", sender.GetType().FullName); 

        Object currentItem = e.Parent.GetItemAtPosition(e.Position);
        MobileContracts.Archive selectedArchive = (MobileContracts.Archive) currentItem; //invalid cast?

        Toast.MakeText(Application, selectedArchive.Name + " => " + selectedArchive.Id, ToastLength.Short).Show();
} 
```

任何帮助表示赞赏。非常感谢。

干杯， Inoel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:49:13.987

没关系，我想通了。

替换这个：

```
MobileContracts.Archive selectedArchive = (MobileContracts.Archive) currentItem; //invalid cast? 
```

有了这个：

```
System.Reflection.PropertyInfo propertyInfo = currentItem.GetType().GetProperty("Instance");
MobileContracts.Archive selectedArchive = propertyInfo.GetValue(currentItem, null) as MobileContracts.Archive; 
```

# android - Ftp 将文件夹从 sdcard 上传到 ftp Android

> ID：11361166
> 
> 赞同：1
> 
> 时间：2012-07-06T11:16:40.870
> 
> 标签：android, apache, upload, ftp

大家好，任何java极客都可以帮助我吗？我需要将带有 subs 文件夹的文件夹上传到我的 ftp。我找到了一些示例代码，但仅适用于单个文件。而且我不知道如何更改它以上传文件夹。我使用谷歌但没有找到 anwser。

```
 String server = "192.168.1.2";
    String username = "test";
    String password = "test";
    String local = "mnt/sdcard/shopinglist/"; #This path i need to upload

    FTPClient ftp = new FTPClient();
  try
  {
      System.out.println( "Connecting" );
      ftp.connect(server);
      if(!ftp.login(username, password))
      {
          System.out.println( "Login failed" );
          ftp.logout();
          return;
      }
      int reply = ftp.getReplyCode();
      System.out.println( "Connect returned: " + reply );
      if (!FTPReply.isPositiveCompletion(reply)) {
          ftp.disconnect();
          System.out.println( "Connection failed" );
          return;
      }
      ftp.enterLocalPassiveMode(); 
      FileInputStream in = new FileInputStream(local);
      ftp.setFileType(ftp.BINARY_FILE_TYPE);
      System.out.println( "Uploading File" );
      boolean store = ftp.storeFile("mnt/sdcard/shopinglist/",in); # ??? Any help ???
      in.close();
      ftp.logout();
      ftp.disconnect();
  }
  catch(Exception ex)
  {
      ex.printStackTrace();
  }
} 
```

}

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:50:05.957

如果有帮助，请检查下面的代码

```
 Intent intent = new Intent();
    intent.setAction(Intent.ACTION_PICK);
    // FTP URL (Starts with ftp://, sftp:// or ftps:// followed by hostname and port).
    Uri ftpUri = Uri.parse("ftp://yourftpserver.com");
    intent.setDataAndType(ftpUri, "vnd.android.cursor.dir/lysesoft.andftp.uri");
    // FTP credentials (optional)
    intent.putExtra("ftp_username", "anonymous");
    intent.putExtra("ftp_password", "something@somewhere.com");
    //intent.putExtra("ftp_keyfile", "/sdcard/dsakey.txt");
    //intent.putExtra("ftp_keypass", "optionalkeypassword");
    // FTP settings (optional)
    intent.putExtra("ftp_pasv", "true");
    //intent.putExtra("ftp_resume", "true");
    //intent.putExtra("ftp_encoding", "UTF8");
    // Upload
    intent.putExtra("command_type", "upload");
    // Activity title
    intent.putExtra("progress_title", "Uploading folder ...");
    intent.putExtra("local_file1", "/sdcard/localfolder");
    // Optional initial remote folder (it must exist before upload)
    intent.putExtra("remote_folder", "remotefolder/uploadedfolder");
    startActivityForResult(intent, 2); 
```

让我知道是否有帮助

# jquery - Wordpress 帖子 - 附加图片

> ID：11361170
> 
> 赞同：1
> 
> 时间：2012-07-06T11:17:03.467
> 
> 标签：jquery, attachment, wordpress, nivo-slider

有没有办法将所有附加图像显示到某个帖子？我正在使用 Nivo Slider jQuery 插件并寻找一种向其添加图像的智能方法。最好的办法是创建一个帖子，然后在滑块中附加我想要的图像。所以我需要的是某种循环来呼应某个帖子中所有附加的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:27:57.503

```
global $post;
$attachements = query_posts(
    'post_type' => 'attachment',
    'post_parent' => $post->ID, // or static id, i.e. 7
    'posts_per_page' => -1
);
foreach($attachements as $attachment){
    $thumbimg = wp_get_attachment_link( $attachment->ID, 'thumbnail-size', true );
    echo $thumbimg;
} 
```

[**更多的。**](http://codex.wordpress.org/Template_Tags/get_posts#Show_all_attachments)

# java - 有人可以澄清 Gson 的 unicode 编码吗？

> ID：11361176
> 
> 赞同：38
> 
> 时间：2012-07-06T11:17:29.873
> 
> 标签：java, unicode, gson

在以下简约示例中：

```
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class GsonStuff {

    public static void main(String[] args) {
        GsonBuilder builder = new GsonBuilder();
        Gson gson = builder.create();
        System.out.println(gson.toJson("Apostrophe: '"));
        //Outputs: "Apostrophe: \u0027"
    }   
} 
```

撇号在打印输出中被它的 unicode 表示所取代。但是，从该`toJson`方法返回的字符串实际上具有字符“\”、“u”、“0”、“0”、“2”、“7”。

用 json 解码它实际上可以工作，并给出字符串“撇号：'”而不是“撇号：\u0027”。我应该如何对其进行解码以获得相同的结果？

还有一个问题，为什么像 ش 这样的随机 unicode 字符没有得到类似的编码？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-06T11:27:18.793

默认情况下，gson Unicode 会转义某些字符，其中`'`之一。（有关完整列表，请参阅`HTML_SAFE_REPLACEMENT_CHARS`JsonWriter [。](http://code.google.com/p/google-gson/source/browse/trunk/gson/src/main/java/com/google/gson/stream/JsonWriter.java)）

要禁用此功能，请执行

```
builder.disableHtmlEscaping(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-30T13:00:40.013

你可以修改你的代码如下

```
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class GsonStuff {

    public static void main(String[] args) {
        GsonBuilder builder = new GsonBuilder().disableHtmlEscaping();
        Gson gson = builder.create();
        System.out.println(gson.toJson("Apostrophe: '"));
        //Outputs: "Apostrophe: \u0027"
    }   
} 
```

# objective-c - 使用新的 Objective-C 文字

> ID：11361180
> 
> 赞同：2
> 
> 时间：2012-07-06T11:17:43.250
> 
> 标签：objective-c, xcode

如何使用此处描述的新 Objective-C 文字：http: [//clang.llvm.org/docs/ObjectiveCLiterals.html](http://clang.llvm.org/docs/ObjectiveCLiterals.html)？我安装了 XCode 4.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:19:19.770

使用 Xcode 4.3，你不能。升级到 4.4 或 4.5 以使用这些功能

# blackberry - 启动 AppName 模块“AppName”尝试访问安全 API 时出错

> ID：11361182
> 
> 赞同：1
> 
> 时间：2012-07-06T11:17:52.867
> 
> 标签：blackberry, blackberry-eclipse-plugin

在我的 BB 应用程序中将其安装到设备上后显示此错误**“启动 AppName 模块 'AppName' 尝试访问安全 API 时出错”**

我在我的应用程序中打开互联网浏览器并且没有给予任何许可，所以这可能是其他错误的原因.....

请帮忙谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:26:21.687

请尝试签署您的应用程序，然后安装。如果您没有签名密钥，可以[在此处](https://developer.blackberry.com/android/documentation/Bar_signing_1904696_11.html)申请新密钥。现在是免费的。[此链接](http://supportforums.blackberry.com/t5/Testing-and-Deployment/BlackBerry-Applications-and-code-signing-Start-to-Finish/ta-p/445848)中的更多帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:35:28.160

此错误表明应用程序尚未完全签名。请注意，当您为 BlackBerry OS 7.1 及更低版本注册一组代码签名密钥时，您会收到 3 个不同的密钥。必须安装所有 3 个。如果您没有安装所有这些，您可能会部分签署您的应用程序并收到上述错误。

您可以通过使用 SignatureTool 打开 COD 文件来验证应用于 COD 文件的签名。它将显示已应用的签名。查找 RBB、RCR 和 RRT 的签名（请注意，RRT 仅在需要时出现）。

# google-app-engine - 将用户与 Apps Engine 中的实体相关联的最佳方式

> ID：11361189
> 
> 赞同：1
> 
> 时间：2012-07-06T11:18:04.737
> 
> 标签：google-app-engine, nosql, datastore

这可能是一个愚蠢的问题，但我对 Apps Engine 和 NoSQL 的逻辑完全陌生，所以我正在寻求建议。

我想有一种最佳且众所周知的方法可以将用户与数据存储中的实体相关联，我想知道如何做到这一点，可能有指南或简短示例。

我有一个可以订阅节点的用户。我需要知道关联这两个实体的最佳方式，检查用户是否订阅节点的最佳方式以及用户订阅的节点列表。

提前谢谢你^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:35:20.543

如果你使用 python：

```
class Node(db.Model):
  user = db.UserProperty()

user = users.get_current_user()
qry = db.GqlQuery("SELECT * FROM Node WHERE user = :1", user) 
```

其余的请参阅[文档](https://developers.google.com/appengine/docs/python/datastore/queries)

# jquery - 为什么在本地 Chrome 中加载页面时以像素为单位的小数点？

> ID：11361190
> 
> 赞同：0
> 
> 时间：2012-07-06T11:18:05.497
> 
> 标签：jquery, html, css, google-chrome, browser

**在本地**执行（使用 Tomcat）时，我在**Chrome中遇到奇怪的 html 页面呈现。**使用 html 代码检查器分析代码，我在各处的像素大小中看到很多**小数。**

 ****看这两张**截图**，分别对应以下**片段**：

不良本地样本：

```
<html>
<body style="margin: 0px;">
<img 
    style="-webkit-user-select: none" 
    src="http://localhost:8080/showcase-labs/javax.faces.resource/images/ui-icons_38667f_256x240.png.jsf?ln=primefaces-aristo">
</body>
</html> 
```

良好的远程样本：

```
<html>
<body style="margin: 0px;">
<img 
    style="-webkit-user-select: none" 
    src="http://www.primefaces.org/showcase-labs/javax.faces.resource/images/ui-icons_38667f_256x240.png.jsf?ln=primefaces-aristo">
</body>
</html> 
```

![坏的](../Images/664643b4245268ff20bc4f6ea39a913c.png)

![好的](../Images/b0d8347ace87e2aa11f630343883a033.png)

这是一个更复杂案例的简化案例。有人可以给我一些提示吗？有人可以提供一个 JQuery 函数来为整个 DOM 舍入这些小数吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:21:47.323

当我的浏览器窗口放大时，我在检查器中看到类似的非整数尺寸。单击“查看”菜单中的“实际大小”将缩放级别重置为 100%。****

# android - 如何从服务器设置我的 android 应用程序背景？

> ID：11361194
> 
> 赞同：0
> 
> 时间：2012-07-06T11:18:25.417
> 
> 标签：android, background, webserver, drawable, dynamically-generated

我对android编程很陌生，我有以下问题。我希望能够将图像放在我的服务器上，然后如果我使用我的应用程序，它应该使用该图像作为背景。从以前的研究中，我了解到我无法将任何文件保存到可绘制文件中？那么这甚至可能吗？

我现在这么远：

```
 URL url = new URL ("http://oranjelan.nl/oranjelan-bg.png");
  InputStream input = url.openStream();
  try { 
     String storagePath = Environment.getExternalStorageDirectory();
     OutputStream output = new FileOutputStream (storagePath + "/oranjelangb.png");
     try {
    byte[] buffer = new byte[1000000];
        int bytesRead = 0;
        while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
        output.write(buffer, 0, bytesRead);
        }
     } finally {
      output.close();
        }
    } finally {
   input.close();
 } 
```

但我收到以下错误@String storagePath = Environment.getExternalStorageDirectory(); 编译器说无法将文件转换为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:22:08.657

这应该是可能的。简单的步骤可能包括：-

1）从服务器下载图像文件，将其存储到SD卡或资产文件夹。第 1 步的链接 >> 链接 1 [链接](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html) [2](https://stackoverflow.com/questions/3296850/android-how-to-store-images-from-url-save-it-in-sd-card)

2) 从您下载的文件创建位图。

3) 将该位图设置为背景图像。

您可以选择步骤并搜索所以应该有很多可用的答案。

# asp.net - 在共享方法中从另一个线程内重定向到 Page

> ID：11361197
> 
> 赞同：0
> 
> 时间：2012-07-06T11:18:55.577
> 
> 标签：asp.net, .net, vb.net, redirect, asynchronous

我正在开发一个与另一个应用程序异步通信的 ASP.NET Web 应用程序。

在 webform1 中，我调用`MyClass.Connect`. 在未来的某个时候，我会从对象那里得到响应。

当我收到回复时，我想显示一个页面，告诉用户回复，但我不能这样做`System.Web.HttpContext.Current.Response.Redirect`，因为`HttpContext`什么都不是。

这是该课程的片段

```
Public Class MyClass
    Private Shared WithEvents _remClient As New RemoteClient

    Public Sub Connect
        _remClient.ConnectToServer
    End Sub

    Private Shared Sub _remClient_ClientConnected() Handles _remClient.ClientConnected
        'I want to do a redirect here - how?
    End Sub

End Class 
```

有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:08:48.177

此重定向必须在使用 javascript 的浏览器上完成。

发送作为返回的重定向标志，以及 url，去哪里然后设置：

```
 if(flagForRefirect)   
    window.location = WhereToGoPage; 
```

# crystal-reports - 在 Crystal 报表 2008 中不起作用后重置页码

> ID：11361199
> 
> 赞同：0
> 
> 时间：2012-07-06T11:19:07.313
> 
> 标签：crystal-reports, report

我有一个包含两个子报告的主报告。这些子报表放置在报表页脚 A 和报表页脚 B 中。现在我想在第一个子报表之后重置页码。

在部分专家中，我检查了“之后重置页码”选项。但是我仍然为两个子报告组合连续页码。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:47:02.550

谢谢大家..问题解决了:)

报表页脚 A 中的子报表在其报表页脚部分检查了“之前的新页面”。删除此勾号后，页码问题就解决了。虽然在主报告中影响页码后，我没有得到子报告新页面的方式。

# ruby-on-rails - 在 rails 中显示集合中的数据

> ID：11361204
> 
> 赞同：0
> 
> 时间：2012-07-06T11:19:32.090
> 
> 标签：ruby-on-rails, ruby, activerecord

我目前有可以描述如下的模型：

歌曲可以通过 Allocations 有许多 setlists 分配属于歌曲和 setlists Setlists 可以通过分配在其中包含许多歌曲

歌曲有标题、艺术家和音调。

基本上，我正在设置新的设置列表视图，音乐家可以在其中从库中选择任何现有歌曲以添加到设置列表中。我想做一些事情：

```
 <thead>
        <th>Title</th>
        <th>Artist</th>
        <th>Root Key</th>
    </thead>
    <tbody>
      INSERT CODE HERE TO DISPLAY DATA
    </tbody> 
```

目前我正在使用以下代码来获取数据，但我不知道是否有办法将其分离到表格中的相关单元格中：

```
<% songs = Song.all.collect {|s| [ s.title, s.artist, s.key ] }  %>
<% songs.sort! %> 
```

我不确定这是否是最好的方法，所以如果有人能提出一个很棒的替代方案。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:11:18.297

获取数据是控制器的责任。

```
def index
  @songs = Song.select([:title, :artist, :key]).all
end 
```

并查看：

```
 <tbody>
      <% @songs.each do |song| %>
        <tr>
          <td><%= song.title %></td>
          <td><%= song.artist %></td>
          <td><%= song.key %></td>
        </tr>
      <% end %>
  </tbody> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:50:13.390

我设法解决了以下问题：

```
<tbody>
          <% songs.each do |n| %>
            <tr>
              <td><%= n[0], '#' %></td>
              <td><%= n[1], '#' %></td>
              <td><%= n[2], '#' %></td>
            </tr>
          <% end %>
      </tbody> 
```

我仍然不确定这是否是最佳做法，所以如果有人知道更好的方法，请告诉我。谢谢 ：）

# node.js - socket.io 启动时未保存会话

> ID：11361207
> 
> 赞同：1
> 
> 时间：2012-07-06T11:19:54.177
> 
> 标签：node.js, redis, express, socket.io

我有一个奇怪的问题，我不知道发生了什么。当我开始时，会话不再以某种方式保存到 redis 中`socket.io`，但是当我注释掉`socket.io`它们时它们会起作用。代码可以在[这里](http://pastebin.com/pMGkHZDm)找到：没什么不寻常的。此代码在数据库崩溃后停止工作。当我再次尝试运行该应用程序时，它说`redis connection is already in use`. 我找到并杀死了正在使用此连接的节点进程，并且我能够再次启动我的应用程序，但现在会话出现了这个问题。

```
var config         = require('./config')
  , express        = require('express')
  , routes         = require('./routes')
  , RedisStore     = require('connect-redis')(express)
  , sessionStore   = new RedisStore(config.redis)
  , app            = express.createServer();

app.configure(function () {
  app.use(express.static(__dirname + '/public'));
  app.use(express.cookieParser('keyboard cat'));
  app.use(express.session({
    secret: config.sessionSecret,
    key: 'express.sid',
    store: sessionStore
  }));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
})

app.configure('development', function () {
  app.use(express.errorHandler());
});

app.enable('jsonp callback');

routes.init(app);

app.listen(config.port);
console.log("listening on port " + config.port);

// socket.io
var io = require('socket.io').listen(app);
io.configure(function() {
        io.set("polling duration", 10);
        io.enable('browser client minification');
        io.enable('browser client etag');
        io.enable('browser client gzip');
        io.set('log level', 3);
        io.set('transports', ['xhr-polling']);
    }
); 
```

# c++ - 将 IOCP 与 UDP 一起使用？

> ID：11361208
> 
> 赞同：15
> 
> 时间：2012-07-06T11:19:56.933
> 
> 标签：c++, performance, networking, udp, iocp

我非常熟悉**TCP的*****输入/输出完成端口***的用途。

 **但是，例如，如果我正在编写 FPS 游戏，或者任何需要低延迟的东西可能会破坏交易 - 我希望立即响应玩家以提供最佳的游戏体验，即使以丢失一些空间数据为代价去。很明显，我应该使用**UDP**，除了经常发送坐标更新之外，我还应该实现一种半可靠的协议（afaik TCP 在 UDP 中会导致丢包，所以我们应该避免将这两者混为一谈）来处理诸如聊天消息之类的事件，或丢包可能至关重要的枪声。

假设我的目标是适用于 MMOFPS 游戏的性能，该游戏允许在一个持久的世界中遇到数百名玩家，除了与枪支战斗之外，它还允许他们通过聊天消息等进行交流 - 这样的事情确实存在并且运行良好 - 查看 PlanetSide 2。

网上的许多文章（例如来自 msdn 的这些文章）都说重叠套接字是最好的，而 IOCP 是神级概念，但它们似乎没有区分我们使用 TCP 以外的其他协议的情况。

所以几乎没有关于开发这种服务器时使用的 I/O 技术的可靠信息，我看过[这个](http://www.gamedev.net/topic/533159-article-using-udp-with-iocp/)，但这个话题似乎很有争议，我也看过[这个](http://www.codeproject.com/Articles/1871/IP-Multicasting-Using-I-O-completion-ports-with-UD)，但考虑到第一个链接中的讨论，我不知道我是否应该遵循第二个假设，**我是否应该将 IOCP 与 UDP 一起使用**，如果不是，那么对于 UDP，**什么是最可扩展和最有效的 I/O 概念**。

或者，也许我只是在进行另一个过早的优化，目前不需要提前考虑？

考虑将其发布在 gamedev.stackexchange.com 上，但我认为这个问题更适用于通用网络。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T10:03:22.517

我不建议使用它，但从*技术上讲*，接收 UDP 数据报的最有效方法是阻塞`recvfrom`（或者`WSARecvFrom`如果你愿意的话）。当然，您需要一个专用线程，否则在您阻塞时不会发生太多事情。

除了 TCP，您*没有*内置到协议中的连接，也没有没有定义边界的流。这意味着您可以通过每个传入的数据报获得发件人的地址，并且您会收到完整的消息或什么也没有。总是。没有例外。
现在，阻止`recvfrom`意味着一个上下文切换到内核，一个上下文在收到东西时切换回来。通过在飞行中进行多次重叠读取也不会更快，因为只有一个数据报可以同时到达线路，这是迄今为止最大的限制因素（CPU时间不是瓶颈！）。使用 IOCP 意味着至少有 4 个上下文切换，两个用于接收，两个用于通知。或者，使用完成回调的重叠接收也不会好多少，因为您必须`NtTestAlert`或`SleepEx`运行 APC 队列，因此您至少有 2 个额外的上下文切换（尽管，所有通知一起只有 +2，您可能会顺便反正已经睡了）。

**然而：**
使用 IOCP 和重叠读取仍然是最好的方法，即使它不是最有效的方法。完成端口与使用 TCP 无关，它们也适用于 UDP。只要您使用重叠读取，您使用什么协议（甚至是网络或磁盘，或其他一些可等待或可警报的内核对象）都无关紧要。
是否为完成端口额外燃烧几百个周期对于延迟或 CPU 负载也无关紧要。我们在这里谈论的是“纳米”与“毫”，相差一到一百万。另一方面，完井端口*总体*上是一个非常舒适、健全和高效的系统。

例如，当您没有及时收到 ACK 时，您可以简单地实现重新发送的逻辑（当需要某种形式的可靠性时，您*必须*这样做，UDP 不会为您这样做），以及保持活动状态。
对于 keepalive，添加一个可等待计时器（可能在 15 或 20 秒后触发），每次收到*任何内容*时都会重置该计时器。如果您的完成端口告诉您此计时器已关闭，您就知道连接已死。
对于重新发送，您可以设置一个超时时间`GetQueuedCompletionStatus`，并且每次您醒来时都会发现所有超过某某旧且尚未被确认的数据包。
整个逻辑发生在一个地方，这非常好。它用途广泛、高效且不易出错。

您甚至可以在完成端口上阻塞多个线程（实际上，线程数比 CPU 的内核数多）。许多线程听起来像是一个不明智的设计，但实际上这是最好的做法。

完成端口以后进先出的顺序唤醒 N 个线程，N 是内核数，除非你告诉它做一些不同的事情。如果这些线程中的任何一个被阻塞，*另一个*线程会被唤醒以处理未完成的事件。这意味着*在最坏的情况下*，一个额外的线程可能会运行很短的时间，但这是可以容忍的。在平均情况下，只要有一些工作要做，它就会使处理器使用率接近 100%，否则为零，这非常好。LIFO 唤醒有利于处理器缓存并保持低切换线程上下文。

这意味着您可以阻止并等待传入​​的数据报并对其进行处理（解密、解压缩、执行逻辑、从磁盘读取某些内容等），另一个线程将立即准备好处理可能在下一微秒内出现的下一个数据报。您也可以使用具有相同完成端口的重叠磁盘 IO。如果您有计算工作（例如 AI）可以拆分为任务，您也可以`PostQueuedCompletionStatus`在完成端口上手动发布（）这些任务，并且您可以免费获得并行任务调度程序。您所要做的就是将 an 包装`OVERLAPPED`到一个后面有一些额外数据的结构中，并使用您将识别的密钥。不用担心线程同步，它只是神奇地工作（你甚至不需要*严格地*`OVERLAPPED`在发布您自己的通知时，在您的自定义结构中，它适用于您传递的任何结构，但我不喜欢对操作系统撒谎，你永远不知道......）。

是否阻塞甚至都没有多大关系，例如从磁盘读取时。有时这只是发生，你无能为力。那又怎样，一个线程阻塞了，但您的系统仍然接收消息并对其做出反应！必要时，完成端口会自动从其池中拉出另一个线程。

关于 TCP 在 UDP 上导致丢包的问题，​​我倾向于称之为都市神话（尽管它*有些正确*）。然而，这种常见的口头禅的措辞方式具有误导性。曾几何时，路由器可能会丢弃 UDP*转而使用*TCP，从而导致数据包丢失，这可能是真的（存在关于该问题的研究，但已有近十年的历史）。然而，今天的情况肯定不是这样。
更真实的观点是，*任何*您发送会导致丢包。TCP 在 TCP 上导致丢包，而 UDP 在 TCP 上导致丢包，反之亦然，这是正常情况（顺便说一下，这就是 TCP 实现拥塞控制的方式）。如果另一个插头上的电缆“静默”，路由器通常会转发一个传入数据包，它将在硬期限内将几个数据包排队（缓冲区通常*故意*很小），可选地它可以应用某种形式的 QoS，它会简单而默默地*放下一切*。
现在，许多具有相当苛刻的实时要求的应用程序（VoIP、视频流，如你所愿）都使用 UDP，虽然它们可以很好地处理一两个丢失的数据包，但它们根本不喜欢严重的、反复出现的数据包丢失。尽管如此，它们在具有大量 TCP 流量的网络上仍然可以正常工作。我的电话（就像数百万人的电话一样）完全通过 VoIP 工作，数据通过同一个路由器作为互联网流量传输。无论我多么努力，我都无法通过 TCP 引起辍学。
从日常观察中，可以确定 UDP 绝对不会被 TCP 抛弃。如果有的话，QoS 可能有利于 UDP 而不是 TCP，但它肯定不会惩罚它。
否则，一旦你打开一个网站，像 VoIP 这样的服务就会断断续续，如果你下载 DVD ISO 文件大小的东西，就会完全不可用。

**编辑：**
为了让您了解 IOCP 的生活有多简单（有些精简，缺少实用功能）：

```
for(;;)
{
    if(GetQueuedCompletionStatus(iocp, &n, &k, (OVERLAPPED**)&o, 100) == 0)
    {
        if(o == 0) // ---> timeout, mark and sweep
        {
            CheckAndResendMarkedDgrams();  // resend those from last pass
            MarkUnackedDgrams();           // mark new ones
        } 
        else
        {   // zero return value but lpOverlapped is not null:
            // this means an error occurred
            HandleError(k, o);
        }
        continue;
    }

    if(n == 0 && k == 0 && o == 0)
    {
        // zero size and zero handle is my termination message
        // re-post, then break, so all threads on the IOCP will
        // one by one wake up and exit in a controlled manner
        PostQueuedCompletionStatus(iocp, 0, 0, 0);
        break;
    }
    else if(n == -1) // my magic value for "execute user task"
    {
        TaskStruct *t = (TaskStruct*)o;
        t->funcptr(t->arg);
    }
    else
    {
        /* received data or finished file I/O, do whatever you do */
    }
} 
```

注意处理完成消息、用户任务和线程控制的整个逻辑是如何发生在一个简单的循环中的，没有晦涩的东西，没有复杂的路径，每个线程只执行相同的、相同的循环。
相同的代码适用于为 1 个套接字提供服务的 1 个线程，或为 50 个为 5,000 个套接字提供服务的池中的 16 个线程、10 个重叠的文件传输以及执行并行计算。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T13:02:58.157

我见过许多使用 UDP 作为网络协议的 FPS 游戏的代码。

标准解决方案是在一个大的 UDP 数据包中发送更新单个游戏帧所需的所有数据。该数据包应包括帧号和校验和。数据包当然应该被压缩。

通常，UDP 数据包包含玩家附近每个实体的位置和速度、发送的任何聊天消息以及所有最近的状态变化。（例如创建新实体、销毁实体等）

然后客户端监听UDP数据包。它将仅使用具有最高帧号的数据包。因此，如果出现乱序数据包，旧数据包将被忽略。

任何校验和错误的数据包也会被忽略。

每个数据包都应包含所有信息，以使客户端的游戏状态与服务器同步。

聊天消息通过多个数据包重复发送，并且每条消息都有一个唯一的消息 id 例如，您重新传输相同的聊天消息一整秒的帧。如果客户在收到 60 次后错过了一条聊天消息 - 那么网络频道的质量太低而无法玩游戏。客户端将显示他们在 UDP 数据包中获得的任何消息，这些消息具有尚未显示的消息 ID。

对于正在创建或销毁的对象也是如此。所有创建或销毁的对象都有一个由服务器设置的唯一对象 ID。如果对象对应的对象 id 之前没有被操作过，则对象将被创建或销毁。

所以这里的关键是冗余发送数据，并将所有状态转换为服务器设置的唯一ID。

@edit：另一张海报提到，对于聊天消息，您可能希望在不同的端口上使用不同的协议。他们可能是正确的，这可能是最佳的。这适用于延迟不重要但可靠性更重要的消息类型，您可能希望打开不同的端口并使用 TCP。但我会把它留作以后的练习。对于你的游戏来说，一开始只使用一个通道当然更容易和更清晰，然后再弄清楚多个端口、多个通道的变幻莫测以及它们的各种故障模式。（例如，如果 UDP 通道正常工作，但聊天通道出现故障会发生什么？如果您成功打开一个端口而不打开另一个端口怎么办？）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-10T12:13:00.727

当我[为客户端](http://www.serverframework.com/clients/online-game-company.html)执行此操作时，我们使用[ENet](http://enet.bespin.org/)作为基本可靠的 UDP 协议，并从头开始重新实现，以将 IOCP 用于服务器端，同时将免费提供的 ENet 代码用于客户端。

IOCP 可以很好地与 UDP 配合使用，并且可以很好地与您可能正在处理的任何 TCP 连接集成（我们有 TCP、WebSocket 或 UDP 客户端连接以及服务器节点之间的 TCP 连接，并且如果我们能够将所有这些插入到同一个线程池中）想要很方便）。

*如果绝对延迟和 UDP 数据包处理速度是最重要的（实际上*不太可能），那么使用新的 Server 2012 RIO API 可能是值得的，但我还不相信（请参阅[此处](http://www.serverframework.com/asynchronousevents/2012/03/windows-8-registered-io-performance.html)了解一些初步性能测试和一些示例服务器）。

您可能希望查看使用 GetQueuedCompletionStatusEx() 处理入站数据，因为它减少了每个数据报的上下文切换，因为您可以通过一次调用将多个数据报拉回。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-13T21:56:31.090

几件事：

**1)**作为一般规则，如果您需要可靠性，最好只使用 TCP。基于 UDP 的竞争性甚至可能更出色的解​​决方案是可能的，但要正确并使其正常运行是极其困难的。人们在 UDP 之上实现可靠性的主要问题是适当的流量控制。如果您打算发送大量数据并希望它优雅地利用当前可用的带宽（随着路由条件不断变化），您必须具有流量控制。在实践中，除了 TCP 使用的本质上相同的算法之外，实施任何其他协议也可能对网络上的其他协议不友好。在实现该算法方面，您不太可能比 TCP 做得更好。

**2)**至于并行运行 TCP 和 UDP，现在它并不像其他人所说的那么大。有一次，我听说沿途过载的路由器偏向于在 TCP 数据包之前丢弃 UDP 数据包，这在某些方面是有道理的，因为无论如何都会重新发送丢弃的 TCP 数据包，而丢失的 UDP 数据包通常不会。也就是说，我怀疑这是否真的发生。特别是，丢弃 TCP 数据包会导致发送方减速，因此丢弃 TCP 数据包可能更有意义。

TCP 可能会干扰 UDP 的一种情况是 TCP 本质上它的算法会不断地尝试越来越快，除非它到达丢失数据包的点，然后它会节流并重复该过程。由于 TCP 连接不断地碰到带宽上限，它导致 UDP 丢失的可能性与 TCP 丢失一样，理论上 TCP 流量似乎偶尔会导致 UDP 丢失。

但是，即使您将自己的可靠机制放在 UDP 之上（假设您正确进行流量控制），您也会遇到这个问题。如果您想避免这种情况，您可以有意地在应用层限制可靠数据。通常在游戏中，可靠数据速率仅限于客户端或服务器实际需要发送可靠数据的速率，这通常远低于管道的带宽能力，因此无论是否存在干扰都不会发生。基于 TCP 或 UDP 可靠。

如果您正在制作流媒体资产游戏，事情会变得更加困难。对于像 FreeRealms 这样的游戏，资产是通过 HTTP/TCP 从 CDN 下载的，它会尝试使用所有可用带宽，这将增加主游戏通道（通常是 UDP）上的丢包率。我通常发现干扰足够低，我认为你不应该太担心它。

**3)**至于 IOCP，我对它们的经验非常有限，但过去做过广泛的游戏网络，我怀疑它们在 UDP 的情况下是否增加了价值。通常，服务器将有一个处理所有传入数据的 UDP 套接字。在连接了数百个用户的情况下，数据进入服务器的速率非常高。正如其他人所建议的那样，让后台线程在套接字上进行阻塞调用，然后将数据快速移动到队列中以供主应用程序线程获取是一个合理的解决方案，但有些不必要，因为实际上数据是这样进来的在负载下快速，当线程阻塞时睡眠没有多大意义。

让我换一种说法，如果阻塞套接字调用轮询单个数据包，然后让线程休眠直到下一个数据包进来，那么当数据速率变高时，它将每秒数千次上下文切换到该线程. 无论是这样，还是在未阻塞线程执行并清除数据时，也已经准备好处理其他数据。相反，我更喜欢将套接字置于非阻塞模式，然后让后台线程以大约 100fps 的速度旋转处理它（根据需要在轮询之间休眠以达到帧速率）。以这种方式，套接字缓冲区将建立传入数据包 10 毫秒，然后后台线程将唤醒一次并批量处理所有数据，然后返回睡眠状态，从而防止无缘无故的上下文切换。然后我让同一个后台线程在它唤醒时执行其他与发送相关的处理。当数据量变得最低限度时，完全由事件驱动会失去许多好处。

在 TCP 的情况下，情况就完全不同了，因为您需要一种有效的机制来确定传入数据来自数百个连接中的哪一个，并且即使定期轮询它们也非常缓慢。

因此，在 UDP 的情况下，在其上具有自主开发的 UDP 可靠机制，我通常有一个后台线程扮演与操作系统相同的角色......而操作系统从网卡获取数据然后分发它到内部的各种逻辑 TCP 连接进行处理，我的后台线程从单独的 UDP 套接字（通过定期轮询）获取数据并将其分发到我自己的内部逻辑连接对象进行处理。然后，这些内部逻辑连接将应用程序级别的数据包数据放入线程安全的主队列中，并用它们来自的逻辑连接进行标记。然后主应用程序线程处理该主队列，将数据包直接路由到与该连接关联的游戏级对象。从主应用程序线程的角度来看，

底线是，鉴于对单独 UDP 套接字的轮询调用很少出现空，很难想象会有更有效的方法来解决这个问题。使用此方法唯一会丢失的是您等待长达 10 毫秒才能唤醒，而理论上您可能会在数据刚到达的那一刻醒来，但这仅在您处于极轻负载的情况下才有意义。另外，无论如何，主应用程序线程在下一个帧周期之前都不会使用数据，所以区别是没有意义的，我认为这种技术可以提高整体系统性能。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-10T00:02:17.070

我不会把像 PlanetSide 这样古老的游戏作为现代网络实施的典范。尤其是没有看到他们的网络库的内部。:)

不同类型的沟通需要不同的方法。上面的答案之一谈到了帧/位置更新和聊天消息之间的差异，而没有意识到为两者使用相同的传输可能很愚蠢。您绝对应该在您的聊天实现和聊天服务器之间使用连接的 TCP 套接字，以进行文本式聊天。不争辩，做就做。

因此，对于您的游戏客户端通过到达的 UDP 数据包进行更新，从网络适配器通过内核进入您的应用程序的最有效路径（很可能）将是阻塞接收。创建一个线程，从网络中提取数据包，验证它们的有效性（chksum 匹配，序列号增加，无论你有什么其他检查），将数据反序列化为内部对象，然后将内部队列中的对象排队到应用程序线程处理这些更新。

但不要相信我的话：测试它！编写一个可以接收和反序列化 3 或 4 种数据包的小程序，使用阻塞线程和队列来传递对象，然后使用单线程和 IOCP 重新编写它，并在完成例程中进行反序列化和排队。将足够多的数据包通过它以使运行时间达到分钟范围，并测试哪个数据包最快。确保您的测试应用程序中的某些东西（即某个线程）正在消耗队列中的对象，以便您全面了解相对性能。

当你完成两个测试程序后回到这里，让我们知道哪个效果最好，嗯？哪个最快，哪个你更愿意在未来维护，哪个需要最长时间才能让它工作，等等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-15T07:24:07.387

如果要支持多个同时连接，则需要使用事件驱动的网络方法。我知道两个很好的库：[libev](http://software.schmorp.de/pkg/libev.html)（由[nodeJS](http://nodejs.org/)使用）和[libevent](http://libevent.org/)。它们非常便携且易于使用。我已经在一个支持数百个并行 TCP/UDP(DNS) 连接的应用程序中成功使用了 libevent。

我相信在服务器中使用事件驱动的网络 i/o 并不是过早的优化——它应该是默认的设计模式。如果你想做一个快速的原型实现，最好从更高级的语言开始。对于 JavaScript，有[nodeJS](http://nodejs.org/)，对于 Python，有[Twisted](http://twistedmatrix.com/trac/)。我个人都可以推荐。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T11:27:17.853

[NodeJS](http://nodejs.org/)怎么样？ 它支持[UDP](http://nodejs.org/api/dgram.html)并且具有高度可扩展性。**

# c# - 在 Thread 中使用 Timer - IsAlive 属性为 false

> ID：11361213
> 
> 赞同：0
> 
> 时间：2012-07-06T11:20:30.333
> 
> 标签：c#, multithreading

您可能知道 Thread 类具有 IsAlive 属性。如果线程方法返回或线程被中止，则为 false。所以我有一个问题：

我有一个 Windows 服务，它在不同的线程中启动多个任务。它永久检查线程的 IsAlive 属性，如果它为假，则重新创建一个任务：

```
 foreach (var worker in _workers)
        _threads.Add(new Thread(worker.ProtectedRun));

    foreach (var thread in _threads)
        thread.Start();

    while (!EventWaitHandle.WaitOne(0))
    {
        for (var i = 0; i < _threads.Count; i++)
        {
            if (!_threads[i].IsAlive)
            {
                _threads[i] = new Thread(_workers[i].ProtectedRun);
                _threads[i].Start();
            }
        }

        EventWaitHandle.WaitOne(1000);
    } 
```

但是其中一项任务里面有 Timer。在 ProtectedRun 方法中，它启动计时器并返回。返回方法后 -> 线程的 IsAlive 属性变为 false -> windows 服务再次启动线程 -> 无限循环 :)

```
 public override void ProtectedRun()
    {
        _timer = new System.Timers.Timer(24 * 60 * 1000);
        _timer.Elapsed += OnTimedEvent;
        _timer.Enabled = true;
        _timer.Start();
    } 
```

有人知道如何处理这种情况吗？也许检查线程状态而不是 IsAlive 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:25:10.073

好吧，你的设计很糟糕，就像那样。

1.  您在线程中运行任务并在它们不再存在时重新启动它们。好的。

2.  您有一个特定任务立即结束，但在计时器上排队了更多工作。好的。

不过，坏消息是，一个任务和第一个前提下的测试根本不兼容。

选择：

*   重做重启逻辑或

*   启动计时器后保持线程处于活动状态。

*   重做它，以便有一个特定的任务级别（不是线程级别）状态字段可以遵循。

最后，您的一个 ProtectedRun 方法没有遵循它应该在有活动工作排队时返回的规范（通过计时器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:32:13.437

发生的事情是您的线程（带有计时器的线程）实际上成功退出。这就是为什么`IsAlive`是假的。

在您的计时器处理程序中执行的代码**不会在您创建的线程中执行**。

请参见以下示例：

```
internal class Program
{
    private static void Main(string[] args)
    {
        Thread z = new Thread(new ParameterizedThreadStart(Test)) { Name = "My new thread !" };
        z.Start();

        Console.ReadKey();
    }

    private static void Test(object obj)
    {
        Console.WriteLine(string.Format("My name is: {0}, my ID is: {1}", Thread.CurrentThread.Name, Thread.CurrentThread.ManagedThreadId));

        var _timer = new System.Timers.Timer(1000);
        _timer.Elapsed += (sender, e) =>
            {
                Console.WriteLine(string.Format("[Timer] My name is: {0}, my ID is: {1}", Thread.CurrentThread.Name, Thread.CurrentThread.ManagedThreadId));
            };
        _timer.Enabled = true;
        _timer.Start();
    }
} 
```

结果：

```
My name is: My new thread !, my ID is: 10
[Timer] My name is: , my ID is: 12
[Timer] My name is: , my ID is: 12
[Timer] My name is: , my ID is: 12 
```

您必须重新考虑应用程序的设计。您确定需要首先启动一个产生计时器的线程吗？

# grails - 为什么在这个 Grails 单元测试中 SpringSecurityUtils 为空？

> ID：11361214
> 
> 赞同：3
> 
> 时间：2012-07-06T11:20:32.453
> 
> 标签：grails, spring-security, grails-plugin

在 Grails 2.0.4 中，我正在尝试编写一个调用静态 SpringSecurityUtils.reauthenticate 的控制器单元测试。测试在该调用上返回 NullPointerException。在调试器中，我可以看到没有填充 SpringSecurityUtils 的 Groovy 动态属性（declaredMethods 等）。

我确实注意到，在运行测试时，单元测试失败*后会发出“配置 Spring Security Core”日志消息。*这是一个示例测试：

```
class ReproTest {
    void testSpringSecurityUtils() {
        String.valueOf(true) // OK: a public final class from the JDK
        URLUtils.isRelativeURL("foo")  // OK: a class from another plugin
        SpringSecurityUtils.reauthenticate "user", "pw" // fails, NPE
    }
} 
```

我最初的反应是，在单元测试期间可能无法访问插件，但如果是这样，为什么 URLUtils 调用有效？为什么测试“足够远”来初始化插件，但是在测试完成之后？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:33:15.837

对于单元测试，容器没有启动。没有 Spring 注入或“grails goodness”正在发生。您在日志中看到插件在单元测试运行后正在初始化，因为它 [容器] 确实为集成测试启动。如果您想测试 SpringSecurityUtils，虽然猜测它已经在插件中正确测试，但您可能需要编写一个集成测试。

# ios5 - iOS 5 - 触摸时更改表格视图单元格的缩略图

> ID：11361220
> 
> 赞同：0
> 
> 时间：2012-07-06T11:20:43.133
> 
> 标签：ios5, uitableview, thumbnails

所以我试图在这里建立某种待办事项列表——我有一个表格视图，在每个单元格上都有一个代表复选框的缩略图。在触摸时，我希望它改变图像 - 从满到空，反之亦然。我做错了什么？这是一些代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"taskCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(5, 5, 32, 32)];
[button addTarget:self action:@selector(checkmarkPressed:) forControlEvents:UIControlEventTouchUpInside];
[button setImage:[UIImage imageNamed:@"checkbox_empty"] forState:UIControlStateNormal];
[button setTag:101];
[cell addSubview:button];
[cell setIndentationWidth:36];
[cell setIndentationLevel:1];
cell.textLabel.text = [[self.appDel.allTasks objectAtIndex:indexPath.row] taskName];
return cell; 
```

}

```
- (void) checkmarkPressed:(UIButton *)sender{
if(sender.tag == 101){
    UITableViewCell *cell = ((UITableViewCell*)[sender superview]);
    NSLog(@"Cell %i", [self.tableView indexPathForCell:cell].row);
    UIImage *empty = [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"checkbox_empty" ofType:@"png"]];
    UIImage *full = [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"checkbox_full" ofType:@"png"]];
    if ([sender imageView].image == [UIImage imageNamed:@"checkbox_empty"]) {
        [sender setImage:full forState:UIControlStateNormal];
        [self.tableView reloadData];
    }
    if ([sender imageView].image == full) {
        [sender setImage:empty forState:UIControlStateNormal];
        [self.tableView reloadData];
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:27:13.253

如果你只是想改变触摸图像，你可以试试这个代码

```
- (void) checkmarkPressed:(UIButton *)tempButton{
    if (tempButton.tag == 101) {
        tempButton.tag = 104;
        [sender setImage:full forState:UIControlStateNormal];
    }
    else if (tempButton.tag == 104) {
        tempButton.tag = 101;
        [sender setImage:empty forState:UIControlStateNormal];
    }
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:26:38.267

找到解决方案：

```
if ([sender imageView].image == [UIImage imageNamed:@"checkbox_empty"]) {
        [sender removeFromSuperview];
        [sender setImage:full forState:UIControlStateNormal];
        [[sender superview] addSubview:sender];
        [self.tableView reloadData];
    }
    else if ([sender imageView].image == [UIImage imageNamed:@"checkbox_full"]) {
        [sender removeFromSuperview];
        [sender setImage:empty forState:UIControlStateNormal];
        [[sender superview] addSubview:sender];
        [self.tableView reloadData];
    } 
```

# jquery - 使用 jquery 模式弹出窗口时出现错误“对象不支持此属性或方法”

> ID：11361232
> 
> 赞同：0
> 
> 时间：2012-07-06T11:21:20.137
> 
> 标签：jquery, asp.net-mvc-3, modal-popup

我正在为多个屏幕（例如屏幕 1 - 6）使用[Jquery 模式弹出窗口](http://jqueryui.com/demos/dialog/)，它不仅适用于屏幕 3，而且适用于其余屏幕我有 3 个布局页面：Layout1，布局 2 和布局 3。每个 .cshtml 页面的 Layout 为 Layout3。Layout3 的布局页面为 Layout2，而 Layout2 又使用 Layout1。

每次单击按钮（分别出现在所有 6 个屏幕中）时，都会调用“DeleteListByID()”并显示弹出窗口

modal-pop-up 的代码，以及 JavaScript 和 CSS 文件都在 Layout3 中

```
<script src="../../Scripts/ModalPopUp/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="../../Scripts/ModalPopUp/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script>
<link href="../../Content/jquery-ui-1.8.20.custom.css" rel="stylesheet" type="text/css" />

    function DeleteListByID(controller, action, id) { 
           $("#DeleteRecord").dialog({ autoOpen: false, modal: true, closeText: "", resizable: false });
          //some code
}

<div id="DeleteRecord" class="DN">
    <p>
        '@Constants.Global.LayoutForWorkflow.DELETE_RECORD_MESSAGE'
    </p>
</div> 
```

但是在一个屏幕（屏幕 3）上，它给了我一个错误，说“对象不支持这个属性或方法”。基本上，它找不到方法“对话框”。有人可以告诉我为什么会这样吗？

各个屏幕中不包含任何文件。所有内容都在 Layout3 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:16:13.207

我遇到了同样的问题。查看源代码并搜索对“jQuery”的任何引用。我在页面底部找到了一个参考。我自己也包含了脚本参考。

显然，由于 Nuget 包或项目设置本身，存在以下问题：

```
@Scripts.Render("~/bundles/jquery")
@RenderSection("scripts", required: false) 
```

这呈现了对 jQuery 的第二个脚本引用。对 JQuery 的第二次引用导致了错误。

删除这两行，你应该很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:27:36.193

您是否尝试过确保该功能仅在准备好的文档上运行？可能是 .NET 的 AJAX 怪异意味着当 JavaScript 尝试运行时没有加载元素。

```
$(document).ready(function() {

    function DeleteListByID(controller, action, id) { 
               $("#DeleteRecord").dialog({ autoOpen: false, modal: true, closeText: "", resizable: false });
              //some code
    }

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:11:06.657

你没有提到你的事件处理，但如果你的点击事件功能是

```
$(".button").click(function(){
    // stuff to do
}); 
```

尝试

```
$(".button").live("click", function() {      
    // stuff to do
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:05:06.260

在 MVC 4 上，我的问题是没有包含 jQuery UI 文件。添加

```
@Scripts.Render("~/bundles/jqueryui") 
```

进入我的（_Layout.cshtml）文件修复它。

编辑：还需要 jQuery CSS

```
@Styles.Render("~/Content/themes/base/css") 
```

# templates - 用于不同任务的多个模板

> ID：11361235
> 
> 赞同：2
> 
> 时间：2012-07-06T11:21:25.863
> 
> 标签：templates, symfony, fosuserbundle

我需要为典型的授权、注册和在弹出窗口中显示两种不同的布局。

Facebook [http://www.facebook.com/login.php?display=popup](http://www.facebook.com/login.php?display=popup)和[http://www.facebook.com/login.php的一个很好的例子](http://www.facebook.com/login.php)

但是，在我的情况下，它被称为链接 /oauth/v2/auth 并且安全性会自动重定向到登录页面。

我的security.yml：

```
 oauth_token:
        pattern:    ^/oauth/v2/token
        security:   false

    oauth_authorize:
        pattern:    ^/oauth/v2/auth
        form_login:
            provider: fos_userbundle
        anonymous: true

    main:
        pattern: ^/
        form_login:
            provider: fos_userbundle
            csrf_provider: form.csrf_provider
            failure_forward: true
        logout:       true
        anonymous:    true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T11:43:54.917

您是否可以将[twig include](http://twig.sensiolabs.org/doc/functions/include.html)用于登录表单。

然后，您可以通过登录表单获得尽可能多的视图吗？

# java - Java HashTable 空指针异常

> ID：11361238
> 
> 赞同：0
> 
> 时间：2012-07-06T11:21:29.473
> 
> 标签：java

我正在构建一个服务器来向客户发送问题，然后从他们那里接收答案，但是当我向客户发送问题时，我想让它在一个小时内无法再次发送，我的意思是在我向客户发送问题之后，我希望这个问题永远不会发送给任何其他客户一小时，

```
static Hashtable<Integer, List<Integer>> unavialbeQuestions =
new Hashtable<Integer, List<Integer>>(); 
```

键是clientID，值是一小时内永远不会发送给该客户端的问题的ID列表，这个函数我用来使问题不可用

```
public void setUnavialbeQuestion(final String cellName, final int questionID) {
        List<Integer> cells = getCellsIntersectedWithCell(cellName);
        int cellID = getCellID(cellName);
        cells.add(cellID);
        for (int i = 0; i < cells.size(); i++) {
            if (unavialbeQuestions.containsKey(cellID)) {
                unavialbeQuestions.get(cells.get(i)).add(questionID);
            } else {
                List<Integer> lll = new LinkedList<Integer>();
                lll.add(questionID);
                unavialbeQuestions.put(cellID, lll);
            }
            Timer timer = new Timer();
            timer.schedule(new TimerTask() {
                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    f(cellName, questionID);
                }
            }, 1000 * 120);
        }
    } 
```

查看`f()`将在一小时后触发的函数（在我的演示中只有 2 分钟），这是问题所在，执行该`f()`函数时出现空指针异常：

```
protected void f(String cellName, int questionDI) {
        // TODO Auto-generated method stub
        List<Integer> cells = getCellsIntersectedWithCell(cellName);
        int cellID = getCellID(cellName);
        cells.add(cellID);

        for(int i=0;i<cells.size();i++){
            int index = unavialbeQuestions.get(cells.get(i)).indexOf(questionDI);
            unavialbeQuestions.get(cells.get(i)).remove(index);
        }
    } 
```

参数上的异常`index`，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:30:40.857

您在这里不检查返回的列表是否不为空：

```
unavialbeQuestions.get(cells.get(i)).indexOf(questionDI); 
```

和这里：

```
unavialbeQuestions.get(cells.get(i)).remove(index); 
```

你在这里为你的地图使用不同的键：

```
if (unavialbeQuestions.containsKey(cellID)) { 
```

和这里：

```
unavialbeQuestions.get(cells.get(i)).add(questionID); 
```

（而且您的代码也不是线程安全的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:28:35.380

unavialbeQuestions 或单元格列表可能为**null**。如果您尝试访问它的方法，它将抛出**NullPointerException**。

# c# - 在运行时动态解析并将基转换为派生类型

> ID：11361240
> 
> 赞同：1
> 
> 时间：2012-07-06T11:21:36.290
> 
> 标签：c#, dynamic, casting, base, derived

如何在运行时将基类转换为派生类。我想要做的是：我需要一个系统来保存订阅，其中某种类型的消息有一个指定的订阅者。当收到一条消息时，它会双向转发给这个系统，它会查找是否有任何订阅者订阅这种消息，如果有，则将消息转发给订阅者。我有一个名为 Response 的抽象基类，然后是一个抽象层，例如。AFResponse ：响应，然后是实际（具体）实现，例如。响应（抽象）：AFResponse（抽象）：AFIncommingMessage（具体）。

收到数据包后，它会转到 MessageBuilder，它会解析消息类型并构建它，如下所示：

```
public static T Build<T>(Packet packet) where T : Response
{
    Type resolvedType;
    if (!dependencyMap.TryGetValue(packet.MessageId, out resolvedType))
    {
        var str = String.Format("Could not resolve message. Message info: CMD0: {0}, CMD1: {1}, MessageID: {2}",
                                packet.Cmd0, packet.Cmd1, packet.MessageId);
        Debug.WriteLine(str);

        throw new ResolutionFailedException(str);
    }

    ConstructorInfo firstConstructor = resolvedType.GetConstructors().First();

    return  (T) firstConstructor.Invoke(new object[] {packet});
} 
```

然后如果消息是异步的，它会被转发到 MessageBinder，它持有消息类型的订阅。

```
private void OnAsyncResponseReceived(Response response)
{
    messageBinder.Forward(response);
} 
```

MessageBinder 类实现如下：

```
public class MessageBinder
{
    private class Subscriber<T> : IEquatable<Subscriber<T>> where T : Response
    {
        ...
    }

    private readonly Dictionary<Type, IEnumerable> bindings;

    public MessageBinder()
    {
        this.bindings = new Dictionary<Type, IEnumerable>();
    }

    public void Bind<TResponse>(ushort shortAddress, Action<ZigbeeAsyncResponse<TResponse>> callback)
        where TResponse : Response
    {
        HashSet<Subscriber<TResponse>> subscribers = this.GetSubscribers<TResponse>();
        if (subscribers != null)
        {
            subscribers.Add(new Subscriber<TResponse>(shortAddress, callback));
        }
        else
        {
            var subscriber = new Subscriber<TResponse>(shortAddress, callback);
            this.bindings.Add(typeof(TResponse), new HashSet<Subscriber<TResponse>> { subscriber });
        }
    }

    public void Forward<TResponse>(TResponse response)
        where TResponse : Response
    {
        var subscribers = this.GetSubscribers<TResponse>();
        if (subscribers != null)
        {
            Subscriber<TResponse> subscriber;

            var afResponse = response as AFResponse;
            if (afResponse != null)
            {
                subscriber = subscribers.SingleOrDefault(s => s.ShortAddress == afResponse.ShortAddress);
            }
            else
            {
                subscriber = subscribers.FirstOrDefault();
            }

            if (subscriber != null)
            {
                Debug.WriteLine("Forwarding received async response of type " + response.GetType().Name);
                subscriber.Forward(response);
            }
        }
    }

    private HashSet<Subscriber<TResponse>> GetSubscribers<TResponse>() where TResponse : Response
    {
        IEnumerable subscribers;
        this.bindings.TryGetValue(typeof(TResponse), out subscribers);

        return (HashSet<Subscriber<TResponse>>)subscribers;
    }
} 
```

当调用 MessageBinder 类的 GetSubscribers() 方法时会出现问题，因为 TResponse 的类型是基类的类型，即 Response，因此找不到订阅者。所以我认为我需要做的是以某种方式将消息的实际类型传递给 Forward 方法，这样该类型将是实际的响应类型。

我改变了这样的方法：

```
private void OnAsyncResponseReceived(Response response)
{
    messageBinder.Forward((dynamic)response);
} 
```

它确实有效，但不知何故我觉得有更好的（？）方法可以做到这一点......或者这是实际且唯一的解决方案？也许我应该改变整体设计，我不知道......我第一次面临这种类型的问题，这就是我想出的。

我愿意接受建议、批评，当然还有最好的解决方案 :) 我很好奇，如果它与我的解决方案不同且更有效，你将如何实现它。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:26:54.747

您是否考虑过通过消息本身路由订阅者请求？它不一定需要是直接的 - 您的基类可能需要子类来覆盖公开某种实用程序对象的属性。实用程序对象可以是消息类型的强类型，并且能够进行强类型调用以获取订阅者。

您仍然可以使用您创建的方法（用于获取订阅者） - 实用程序类将简单地具有进行强类型调用的能力。

编辑：

这个怎么样？

```
private void OnAsyncResponseReceived<T>(T response) where T : Response {
  messageBinder.Forward(response);
} 
```

您的原始代码的问题是响应变量是强类型的。转换为动态的“非强类型”它。通过使用泛型方法，就像您在整个应用程序中所做的那样，加上泛型类型必须从 Response 继承的附加约束，您可以有效地获得相同的结果，但具有内置的动态类型。不过，老实说，我认为转换为动态是相当聪明的。:)

# java - 如何使用Hashmap在多线程中过滤数据以服务多个客户端

> ID：11361246
> 
> 赞同：0
> 
> 时间：2012-07-06T11:22:05.800
> 
> 标签：java, multithreading, hashmap

hashmap 中的样本数据存储为 ,

例如 {"client1-data1":data1,"client2-data2":data2,"client3-data3":data3,"client4-data4":data4,"client1-data2":data2,"client2-data1":data1, “client3-data4”：data4，“client4-data3”：data3}

每个其他客户端的每个数据都可以重复，键将是唯一的，因为 client1-data1 组合值将重复但键将是唯一的。

处理多个客户的问题，

对于每个用户，在建立连接时会创建一个不同的线程，因此每个线程都会创建一个 PrintWriter 对象，该对象将被添加到 Arraylist

列表编写者 = new ArrayList();

无论如何，我可以将 client_id 与 Printwriter 对象一起存储在同一个数组中，并将数据传递给客户端，同时使用上面示例中存储在 Hashmap 中的客户端 ID 过滤数据。

请回复/建议

谢谢， 普拉文 T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:34:05.957

您可以使用存储一对元素的集合。这样做的一种方法是使用地图。

```
Map<PrintWriter, String> writeAndClientId = new HashMap<>(); 
```

您可以循环使用这些

```
for(Map.Entry<PrintWriter, String> entry: writeAndClientId.entrySet()) 
```

* * *

如果您希望能够一次获得一个 clientId，您可以使用

```
Map<String, PrintWriter> clientIdToWriter = new HashMap<>();

PrintWriter pw = clientIdToWriter.get(clientId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:43:51.420

打印机和客户端是唯一的，因此请使用 Set（无重复 ID）或 HashMap 并管理如下内容：

```
final HashMap<Writer, HashMap<Integer, List<String>>> writers = new HashMap<Writer, HashMap<Integer, List<String>>>(); 
```

如果我误解了什么，请告诉我们。

# vbscript - 转换文件夹结构的安装脚本问题

> ID：11361251
> 
> 赞同：0
> 
> 时间：2012-07-06T11:22:25.863
> 
> 标签：vbscript, windows-xp, installation

当我们将 Documents and Settings 文件夹从 C 盘完全移动到 D 盘时，产品插件安装不工作，最终弹出 windowsFolderSplit(0):C 和错误文件夹不存在？对于具有单个分区的系统，这可以正常工作，但仅对于多个分区，这不起作用

这是安装脚本中使用的一点vbscript代码，我需要在这里做任何修改吗？

```
Dim windowsFolder      ' For finding shortcut location
Dim windowsFolderSplit ' For isolating the WINDOWS drive

windowsFolder = fso.GetSpecialFolder(WindowsFolder)
If DEBUG = "D1" Then        
   MsgBox "windowsFolder:" & windowsFolder
End If

windowsFolderSplit = Split(windowsFolder, "\", -1, 1)

If DEBUG = "D1" Then        
   MsgBox "windowsFolderSplit(0):" & windowsFolderSplit(0)
   MsgBox "windowsFolderSplit(1):" & windowsFolderSplit(1)
End If

Set docAndSetFolder = fso.GetFolder(windowsFolderSplit(0) & "\Documents and Settings") 
```

它是否将值硬编码到“C”驱动器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:09:42.717

特殊文件夹（[MSDN](http://msdn.microsoft.com/en-us/library/0ea7b5xe%28v=vs.84%29.aspx)）：

```
Dim objShell As Object
Dim strPath As String

Set objShell = Wscript.CreateObject("Wscript.Shell")
strPath = objShell.SpecialFolders("MyDocuments")
wscript.echo strPath 
```

或可选：

```
Set S = CreateObject("WScript.Shell")
Set E = S.Environment
WScript.Echo E("USERPROFILE") 
```

# php - PHP AJAX 调用中的空响应

> ID：11361262
> 
> 赞同：0
> 
> 时间：2012-07-06T11:23:14.543
> 
> 标签：php, javascript, jquery, ajax

我在另一个站点上有一个工作登录脚本，它通过 AJAX 加载 PHP 脚本。我似乎无法弄清楚为什么当它应该是简单的错误或值数组时我得到一个空响应。

当我手动将值放入 php 脚本（硬编码）时，它可以工作。我可以在控制台中看到变量是从表单发送的。但是，没有任何东西被退回。谁能发现我错过了什么？

感谢您的任何帮助或想法。

登录 PHP

```
<?php 
$login = $_POST['login'];
$password = $_POST['password'];

require_once("DB.php");
$connection = mysql_connect($host, $user, $pass) or die ("Unable to connect!"); 
mysql_select_db($db) or die ("Unable to select database!"); 

$query = "SELECT * FROM members WHERE login='$login' AND passwd='".md5($_POST['password'])."'";
$result = mysql_query($query) or die ("Error in query: $query. ".mysql_error()); 
if (mysql_num_rows($result) > 0) { 
$output = "true";
     while(list($member_id, $firstname, $lastname, $login, $passwd, $City, $State, $bday, $approved, $organization, $school, $trainingdate, $Subscriber, $wscoordinator, $Position, $subdate, $enddate, $notice, $book, $trial)  = mysql_fetch_row($result)) { 
echo json_encode(array('memberid' => $member_id, 'firstname' => $firstname, lastname => $lastname, approved => $approved, subscriber => $Subscriber, position => $Position, school => $school, login => $login, book =>$book, ws => $wscoordinator, trial => $trial, enddate => $enddate));
}
} else {
$output = "false";
echo json_encode($output);
}

?> 
```

AJAX，使用 jQuery。

```
$('#loginForm #loginButton').click(function(){
        var $form = $('#loginForm'),
    $inputs = $form.find("input"),
    serializedData = $form.serialize();
    var login = $('#login').text('');
    var password = $('#password').text('');
    $.ajax({
      type: 'POST',
      url: 'Scripts/php/login.php',
      data: serializedData,
      success: function(response){
        console.log("Response: "+response);
        if(response != "false") 
        {
        //window.location.href='toolstart.html';
        $.cookie('lastname', response.lastname, { expires: 365, path: '/' });
        } else {
        alert("Your email and password combination did not match.");
        }

        },      
  dataType: 'json'
}); 
```

（是的，我知道我需要从 MD5 迁移；只是还没有到达那里。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:31:43.323

几天后，我做了更多的研究。事实证明，我的客户端使用的服务器最高只支持 PHP 5.1，而 json_encode 仅在 5.1 中支持。找到了这个很棒的脚本来让它工作。[http://www.botell.com/scripts/jsonwrapper.html](http://www.boutell.com/scripts/jsonwrapper.html)

感谢所有的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:34:44.790

只需替换`.text();`为`.val()`as即可`text()`为文本输入类型提供空白结果。`val()`将给出实际值。其次使用`var_dump($_POST); die;`. 啊...检查您的功能是否：

```
$('#loginForm #loginButton').click(function(){
        var $form = $('#loginForm'),
    $inputs = $form.find("input"),
    serializedData = $form.serialize();
    var login = $('#login').text('');
    var password = $('#password').text('');
    $.ajax({
      type: 'POST',
      url: 'Scripts/php/login.php',
      data: serializedData,
      success: function(response){
        console.log("Response: "+response);
        if(response != "false") 
        {
        //window.location.href='toolstart.html';
        $.cookie('lastname', response.lastname, { expires: 365, path: '/' });
        } else {
        alert("Your email and password combination did not match.");
        }

        },      
  dataType: 'json'
});**});** 
```

正如我发现的那样，缺少一些花括号。请回复您的`var_dump($_POST);die;`信息。

# python - 如何在 Mac 中创建非模态 Tk 窗口“堆栈”？

> ID：11361266
> 
> 赞同：0
> 
> 时间：2012-07-06T11:23:43.627
> 
> 标签：python, tkinter, tk

我想创建一个 Tk 窗口/对话框的“堆栈”，以便窗口的 z 顺序始终保持固定。从这个意义上说，它们的行为类似于模式对话框堆栈，但我需要该用户能够与所有窗口（或至少与最低级别的窗口）进行交互。较低的窗户会更大，尽管顶部还有其他（较小的）窗户，但相关部分仍可访问。

在 Windows 和 Linux 中，我通过制作 windows 让它很好地工作`transient`。tkinter 代码如下：

```
from tkinter import *

level0 = Tk()

level1 = Toplevel(level0)
level1.transient(level0)

level2 = Toplevel(level1)
level2.transient(level1)

level3 = Toplevel(level2)
level3.transient(level2) 
```

在 Mac OS X 中，`transient`似乎没有任何效果。

任何想法如何在 Mac 中实现这种堆栈？

# java - 文件被哪个进程（android）锁定？

> ID：11361268
> 
> 赞同：0
> 
> 时间：2012-07-06T11:23:47.553
> 
> 标签：java, android

目前我正在开发一个 android 应用程序，其中我在 sdcard 上有一个文件，我必须找出正在访问该文件的所有进程的进程 ID。

使用 android.os.FileObserver 我们只能知道文件是否被任何进程访问。但是如何获取该进程的进程ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:24:09.863

我认为通过 Android SDK 是不可能的。

您可能正在寻找的是`lsof`（系统）命令。不幸的是，它在 Android 4.0 下的大多数股票 ROM 上不可用。根据[类似问题](https://stackoverflow.com/questions/10796298/how-to-check-open-file-without-lsof)下的评论，ICS 有一个补丁来添加基本`lsof`支持。我有运行 4.0.3 的 Galaxy Nexus，我看到`lsof`我的手机上有该命令。您也可以安装 BusyBox 来安装`lsof`（或要求您的应用程序的用户安装它）。

假设您`lsof`在电话上存在，您可以解析输出运行命令：

```
Runtime.getRuntime().exec(new String[] { "lsof", pathToInterestingFile}); 
```

# javascript - 如何使用 jQuery 获取 asp.net 列表框大小

> ID：11361270
> 
> 赞同：3
> 
> 时间：2012-07-06T11:23:49.793
> 
> 标签：javascript, jquery, asp.net, listbox

当我提交表单时，我需要检查我的 asp.net 列表框是否为空。我想用 jQuery 来做。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:27:03.080

您需要先获取列表框的客户端ID

```
<%= myListbox.ClientID %> 
```

然后您可以通过访问所有常规成员将该对象用作 Javascript 中的常规列表框。

```
var items = $("#<%= myListbox.ClientID %> option").length; 
```

它不使用 jQuery，但您也可以使用内置的 asp.net 验证器来执行此操作

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="ListBox1" ErrorMessage="RequiredFieldValidator"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:39:11.243

```
<script type="text/javascript">
        var length = $('#ListBox1 option').size();        
        // or var length = $('#ListBox1').children().size();     

        if (length > 0) {
        // submit form
        }

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:45:00.220

您可以检查以下情况：

$("#YourListBoxId 选项").length > 0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T11:45:07.577

尝试将此检查集成`$("#yourListBoxId option").size()>0`到 sumbit 按钮上的 onClick 事件中。如果它返回 true - 您的列表框有值。

# java - Netbeans：使用 JTree 的 GUI 构建器

> ID：11361272
> 
> 赞同：1
> 
> 时间：2012-07-06T11:23:51.673
> 
> 标签：java, netbeans, jtree

我正在使用 Netbeans 中的 GUI 构建器创建 JTree，我可以使用以下代码将节点和所有内容添加到树中

```
public static void listAllFiles(String directory, DefaultMutableTreeNode parent, Boolean recursive) {
            File [] children = new File(directory).listFiles(); // list all the files in the directory
            for (int i = 0; i < children.length; i++) { // loop through each
                    DefaultMutableTreeNode node = new DefaultMutableTreeNode(children[i].getName());
                    // only display the node if it isn't a folder, and if this is a recursive call
                    if (children[i].isDirectory() && recursive) {
                            parent.add(node); // add as a child node
                            listAllFiles(children[i].getPath(), node, recursive); // call again for the subdirectory
                    } else if (!children[i].isDirectory()){ // otherwise, if it isn't a directory
                            parent.add(node); // add it as a node and do nothing else
                    }
            }
    } 
```

然后像这样称呼它

```
listAllFiles("C:\\test",  defaultMutableTreeNode , true); 
```

我可以将此代码添加到`init()`JTree 的方法中，这样当它构建时，它将拥有 Test 文件夹中的所有文件夹和文件，这是非常棒的，但我真正想要做的是在我添加节点到 JTree 时单击一个按钮，但我不知道该怎么做！我可以将 添加`listAllFiles("C:\\test", defaultMutableTreeNode , true);`到`ActionPerformed`新按钮的 中，但随后找不到`defaultMutableTreeNode`.

那么最好的方法是如何做到这一点呢？`DefaultMutableTreeNode`当我单击按钮时会创建一个新的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:34:49.250

好吧，我想出了一种方法，但我不太确定是否是最好的方法！我基本上在按钮的 ActionPerformed 中创建了一个新的 DefaultMutableTreeNode ，无论如何它都会为我正确填充树

```
javax.swing.tree.DefaultMutableTreeNode treeNode1 = new javax.swing.tree.DefaultMutableTreeNode("root");
jTree.setModel(new javax.swing.tree.DefaultTreeModel(treeNode1));
listAllFiles(folderPath,  treeNode1, true); 
```

但想看看是否有更好的方法来做到这一点......编码明智

# c++ - S60 3rd ed Emulator 在 Windows 7 中启动后立即终止

> ID：11361280
> 
> 赞同：2
> 
> 时间：2012-07-06T11:24:43.380
> 
> 标签：c++, symbian, nokia, carbide

我已经在 Drive C 上安装了 carbon c++ 2.7、S60 3rd edition FP2、activePerl。当我构建项目时，所有可执行文件都被创建，当我运行模拟器调试时，模拟器启动，然后在几秒钟后终止。我按照 sdk 附带的说明如何在 vista 上安装 sdk（同样应该适用于 win 7 ryt？）.. 请帮助我.. 即使我无法运行 Hello world 程序.. :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-18T10:40:52.633

我在使用 SDK Emulators 的 Windows 7 上遇到了同样的问题，问题是我的声音芯片是 Realtek。如果您通过控制面板中的声音选项禁用所有声音输出并启动模拟器，那么它将起作用。完全加载后，只需重新启用您的声音设备。

至少在我的情况下它是这样工作的。

# android - Android service not launched by JUnit test

> ID：11361285
> 
> 赞同：5
> 
> 时间：2012-07-06T11:25:14.557
> 
> 标签：android, service, junit

I have this test class to test a remote service:

```
public class CoreServiceBasicTest extends ServiceTestCase<CoreService> implements ServiceConnection {

    /** Tag for logging */
    private final static String TAG = CoreServiceBasicTest.class.getName();

    /** Receive incoming messages */
    private final Messenger inMessenger = new Messenger(new IncomingHandler());

    /** Communicate with the service */
    private Messenger outMessenger = null;

    /** Handler of incoming messages from service */
    private static class IncomingHandler extends Handler {

        @Override
        public void handleMessage(Message msg) {
            Log.d(TAG, "Incoming message");
        }
    }

    /** Constructor for service test */
    public CoreServiceBasicTest() {
        super(CoreService.class);
    }

    /** Start the service */
    @Override
    public void setUp() {

        // Mandatory
        try {
            super.setUp();
        } catch (Exception e) {
            e.printStackTrace();
        }

        // Start the service
        Intent service = new Intent();
        service.setClass(this.getContext(), CoreService.class);
        startService(service);
        Log.d(TAG, "Service started");
    }

    public void onServiceConnected(ComponentName className, IBinder service) {
        outMessenger = new Messenger(service);
        Log.d(TAG, "Service attached");
    }

    public void onServiceDisconnected(ComponentName className) {
        // TODO Auto-generated method stub

    }

    @SmallTest
    public void testBindService() {
        // Bind to the service
        Intent service = new Intent();
        service.setClass(getContext(), CoreService.class);
        boolean isBound = getContext().bindService(service, this, Context.BIND_AUTO_CREATE);
        assertTrue(isBound);
    }
} 
```

The problem is that startService(service) in the setUp() method does not launch the service correctly. This is what the AVD shows:

![enter image description here](../Images/134c3b8abf9e19d1d768750b910b3045.png)

As you can see, the process is launched but the service is not. Then on `testBindService()`, `assertTrue(isBound)` fails.

This doesn't happen if I launch the service from an Activity:

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Start the Core service
    Intent service = new Intent();
    service.setClass(this, CoreService.class);

    if (startService(service) == null) {
        Toast.makeText(this, "Error starting service!", Toast.LENGTH_LONG).show();
        Log.e(TAG, "Error starting service");
    } else {
        Toast.makeText(this, "Service started sucessfully", Toast.LENGTH_LONG).show();
    }

    // Die
    finish();
} 
```

Here the service is started correctly, as shown below.

![enter image description here](../Images/9686ddcbbdfda50d4acbff1365168b19.png)

How can I start and bind to a remote service that uses Messenger to communicate with activities from an Android Test Project?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T23:06:03.650

The whole point of Android Test Project (test.apk) is to instrument the Application Project (app.apk) and unit-test the Android components (Activity, Service and etc) which are associated with Application Project, in another word, unit-testing Activity and Service that is created and manipulated inside app.apk.

You should not write your MessengerService implementation partially (Messenger, IncomingHandler and etc) second time inside ServiceTestCase implementation under Test project. MessengerService implementation only need to be written once in your Application project's CoreService.java file.

ServiceConnection is used for inter-communication between Activity and Service, as we use ServiceTestCase here (means unit-test service, communication with other components is out-of-scope hence not considered), we don't need a ServiceConnection implementation. The only thing ServiceConnection does is initialize a solid Messenger object so that we could use later, once service is properly created:

```
public void onServiceConnected(ComponentName className, IBinder service) {
  // This is what we want, we will call this manually in our TestCase, after calling
  // ServiceTestCase.bindService() and return the IBinder, check out code sample below.
  mService = new Messenger(service);
} 
```

Also note that you don't need to call ServiceTestCase.startService() in this case, as ServiceTestCase.bindService() will properly start the service (if it is not started yet) and return a IBinder object we need to use to initialize Messenger object later.

Say if your IncomingHandler.handleMessage() impelementation in CoreService.java look like this:

```
... ...

switch (msg.what) {
  case MSG_SAY_HELLO:
    msgReceived = true;
    break;

... ... 
```

To test send message functions in ServiceTestCase:

```
... ...

IBinder messengerBinder = null;

@Override
public void setUp() throws Exception {
  super.setUp();
  // Bind the service and get a IBinder:
  messengerBinder = bindService(new Intent(this.getContext(), CoreService.class));
  //log service starting
  Log.d(TAG, "Service started and bound");
}

public void testSendMessage() {
  // Use IBinder create your Messenger, exactly what we did in ServiceConnection callback method:
  Messenger messenger = new Messenger(messengerBinder);
  Message msg = Message.obtain(null, MessengerService.MSG_SAY_HELLO, 0, 0);
  messenger.send(msg);
  // Do some assert stuff here
  ... ...
}

... ... 
```

If your want to test communication between Activity and Service, then ServiceTestCase is not suitable in this case. Consider using [ActivityInstrumentationTestCase2](http://developer.android.com/reference/android/test/ActivityInstrumentationTestCase2.html) test the actual Activity (which bound to your CoreService, which gives you ability to indirectly test your Service functions.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T20:27:05.420

Just looking at the [documentation for ServiceTestCase](http://developer.android.com/reference/android/test/ServiceTestCase.html) it says that the test framework **delays starting the service** until one of your test methods calls `ServiceTestCase.startService()` or `ServiceTestCase.bindService()`.

Looking at your code you call `ServiceTestCase.startService()` in your `setUp()` method, **not in a test method**. This doesn't start the service yet. It is waiting for one of your test methods to call `ServiceTestCase.startService()` or `ServiceTestCase.bindService()`.

Your test method `testBindService()` isn't calling `ServiceTestCase.bindService()`, instead it is calling `Context.bindService()` and failing. The test framework is still waiting, so that's why the service isn't started.

Have another look at the **Lifecycle support** discussion in the linked developer docs.

# objective-c - 类似于 if 赋值语句

> ID：11361289
> 
> 赞同：0
> 
> 时间：2012-07-06T11:25:26.907
> 
> 标签：objective-c, ios

这更像是一般性问题：有没有办法像 if 语句一样分配值？我有一本字典，我想检查*键*是否存在然后分配。例如：

```
if((_attr.val = [self.dic objectForKey:@"name"])) 
```

而且我知道如果_attr.val 中存在*键*，我将获得对象，否则我将获得空值。太好了，但是如果 statemant 在它之后需要 to_do_something，但在我的情况下就是这样 - 我想做的所有事情。

这可能是一个愚蠢的问题，但我无法找到解决方案。

我想找到像 C++ 中已知的 ASSERT() 之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:30:14.430

当您要创建条件路径时，这`if` **是有意义的**。在这种情况下，您只想将值分配给`_attr.val`，但您仍然应该检查一切是否符合您的预期。我会去：

```
_attr.val = [self.dic objectForKey:@"name"]
if(!_attr.val){
  // Conditional case for a nil value.
} 
```

如果最终结果（值或 nil）真的无关紧要，那就去：

```
_attr.val = [self.dic objectForKey:@"name"] 
```

无论哪种方式，如果您开始`if`考虑这个问题，您似乎想要进行某种检查。

与`NSAssert`：

```
_attr.val = [self.dic objectForKey:@"name"]
NSAssert(_attr.val,@"Value is nil"); 
```

# ruby - 如何在 Ruby 1.8.7 中更快地加载 YAML？

> ID：11361291
> 
> 赞同：2
> 
> 时间：2012-07-06T11:25:39.637
> 
> 标签：ruby, performance, serialization, yaml

在这个 Ruby 1.8.7 应用程序中，`YAML.load`需要对 YAML 进行反序列化（使用 完成），因为现有数据存储在许多相对较小的 YAML 文档中，但这是一个性能瓶颈。

有没有更好的方法或图书馆？升级到 ruby​​ 1.9 不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:48:45.330

我不是专家，但如果您可以将 YAML 文档转换为 Marshal 文档，然后`Marshal.load`在应用程序中使用，它应该会快得多。我前一阵子用[这个要点](https://gist.github.com/480059)来比较 YAML 和 Marshal 的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:14:10.817

我没有找到办法做到这一点。我尝试通过字符串操作将 YAML 转换为 JSON，然后使用 Yajl 和 OJ 等快速 JSON 解析器对其进行解析，但是将 YAML 转换为 JSON 的开销已经比实际解析 YAML 的时间长。

如果某个聪明的人真的花很多时间来做这件事，我的转换脚本可能没有那么快，但是当我意识到即使我优化自己的脚本，它仍然无法击败之后，我很早就放弃了YAML 解析时间显着足以保证整个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:03:31.650

根据[这个实验](http://blog.carlmercier.com/2010/11/19/yaml-zaml-marshal-json-benchmark-in-ruby/)，在 1.8.7 下使用 ZAML 会比 YAML 解析器更快。

# css - Twitter Bootstrap - 使用衬线字体

> ID：11361294
> 
> 赞同：10
> 
> 时间：2012-07-06T11:25:46.343
> 
> 标签：css, twitter-bootstrap, fonts

我正在使用 Twitter Bootstrap 进行网站设计，我希望所有显示字体都使用 serif（而不是默认的 sans-serif）字体。有什么方法可以做到这一点而不必通过 LESS 重新编译？我真的很想避免为这个基本的东西学习 LESS。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T13:28:27.480

如果您不介意更改 bootstrap.css，请在以下位置进行查找和替换：

```
"Helvetica Neue", Helvetica, Arial, sans-serif; 
```

用。。。来代替：

```
Georgia, "Times New Roman", Times, serif; 
```

如果您不想这样做，请将此代码添加到您的自定义 CSS 以覆盖 Bootstrap。

```
body,
input,
button,
select,
textarea,
.navbar-search .search-query {
  font-family: Georgia, "Times New Roman", Times, serif;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-06T12:26:41.387

您必须更改 LESS 变量`@baseFontFamily`，它的默认值是`@sansFontFamily`您必须将其设置为`@serifFontFamily`.
如果您不想使用 LESS，您仍然可以在[文档的](http://twitter.github.com/bootstrap/index.html)[自定义](http://twitter.github.com/bootstrap/download.html)菜单中更改这些变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-14T09:50:11.753

我是否也建议在其中添加标题...

```
 body,
    h1,h2,h3,h4,h5,h6,
    input,
    button,
    select,
    textarea,
    .navbar-search .search-query {
      font-family: Georgia, "Times New Roman", Times, serif;
      font-size: 2.2em;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-25T11:48:08.063

这取决于您是通过 CDN 使用 Bootstrap 还是下载了它。如果你下载了它，你必须有`boostrap.css`或者`boostrap.min.css` 在那些，你会发现：

```
 /*some element*/{
        font-family: /*some font names*/
    } 
```

换成你想要的字体，就**这么**简单！

# google-cloud-messaging - 谷歌云消息服务器 C#

> ID：11361295
> 
> 赞同：1
> 
> 时间：2012-07-06T11:25:47.753
> 
> 标签：google-cloud-messaging

我想向 GCM 发送消息，但收到状态为 200 的不可用。我做错了什么？

var GoogleAppID = ""; var DeviceID = "";

```
 var request = WebRequest.Create("https://android.googleapis.com/gcm/send");
            request.Method = "POST";
            request.Headers.Add("Authorization", "key=" + GoogleAppID);
            request.ContentType = "application/json";

            var message = new Message();
            message.registration_ids.Add(DeviceID);
            message.data.Add("gcm_message", "12345");
            var jsonMessage = Newtonsoft.Json.JsonConvert.SerializeObject(message);
            byte[] byteArray = Encoding.UTF8.GetBytes(jsonMessage);
            request.ContentLength = byteArray.Length;

            var reqStream = request.GetRequestStream();
            reqStream.Write(byteArray, 0, byteArray.Length);

            var response = request.GetResponse();
            var responseCode = ((HttpWebResponse)response).StatusCode;
            if (responseCode.Equals(HttpStatusCode.Unauthorized) || responseCode.Equals(HttpStatusCode.Forbidden))
            {
                return "Unauthorized - need new token";

            }
            else if (!responseCode.Equals(HttpStatusCode.OK))
            {
                return "Response from web service isn't OK";
            }

            var responseStream = response.GetResponseStream();
            var streamReader = new StreamReader(responseStream);
            var responseContent = streamReader.ReadToEnd();
            streamReader.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:31:33.303

不需要自己建库，github已经有了。使用以下内容。

[https://github.com/Redth/GCMSharp](https://github.com/Redth/GCMSharp)

# asp.net-mvc - MVC 4 link_to 助手（类似于 rails）

> ID：11361297
> 
> 赞同：0
> 
> 时间：2012-07-06T11:26:00.290
> 
> 标签：asp.net-mvc, view, asp.net-mvc-4

在 Ruby on Rails 中，您可以这样做：

```
link_to("My link text", someModelInstance) 
```

这将生成一个带有标题“我的链接文本”的链接和一个指向存储在`someModelInstance`变量中的项目的 href。

有没有类似的方法来做到这一点是 MVC 4？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:38:42.163

您可以使用 T4MVC 在 MVC 中实现此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:50:24.600

有一种叫做 Actionlink 的东西，它创建了一个超链接，实习生指向特定的控制器和动作

```
@Html.ActionLink("LinkName", "ControllerName", "ActionName") 
```

这将产生

```
<a href="/ControllerName/ActionName">LinkName</a> 
```

# perforce - 在 perforce 中集成已删除文件时出错

> ID：11361299
> 
> 赞同：3
> 
> 时间：2012-07-06T11:26:14.643
> 
> 标签：perforce, perforce-integrate

尝试集成子项目时，父项目抛出以下错误。

**例外：< FILE > - 无法集成（已打开以供删除）**

什么情况下会出现这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:00:51.867

当 Perforce 集成更改时，它会尝试解析本地工作区中文件中的传入更改。此异常基本上是说它无法尝试解决给定文件的更改，因为该文件已在本地工作区上标记为已删除，因此无法解决它。

您可以将一些标志传递给集成命令，以允许集成继续进行。但是，我发现在进行中的更改之上集成更改通常不是一个好主意，因此我建议完成（或搁置）正在进行的更改，然后尝试集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T22:13:24.470

这个问题首先出现在谷歌搜索“已经打开删除”时，所以我想如果你没有整合，我可能会发布一个解决方法，只是试图撤消你自己的删除：

```
cp file file.bak  # Make a backup of the file
p4 revert file    # Revert the file
mv file.bak file  # Recover from backup
p4 edit file      # Open the file for edit 
```

# objective-c - 动态推送到 UIViewController

> ID：11361301
> 
> 赞同：0
> 
> 时间：2012-07-06T11:26:19.467
> 
> 标签：objective-c, ipad, uiviewcontroller, uipickerview

我是 iPhone 应用程序开发的新手。

我正在开发一个 iPad 应用程序。它在顶部包含一个菜单栏，单击它可以检索子视图。子视图由 UIPickerView 组成。从 UIPickerView 中选择一行后，导航到另一个 UIViewController。

UIPickerView 方法是在一个单独的类中编写的（由于此功能贯穿整个应用程序，我将其设为通用类）。所以，

```
[self.navigationController pushViewController:controller animated:YES]; 
```

对我不起作用！

我能够获得要推送的类的名称（它会根据所做的选择而变化）。有什么办法可以做到吗？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:33:59.583

我猜你真正想要的是从类名创建一个对象

简单的答案是

```
[[NSClassFromString(className) alloc] init...] 
```

要获得更彻底的答案，您应该查看[在 Objective-C 中从类名的 NSString 创建对象](https://stackoverflow.com/questions/2951828/create-object-from-nsstring-of-class-name-in-objective-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:58:23.893

你可以使用委托方法（委托方法允许对象之间的通信）来实现这个场景

例如，在您的 UIPicker(.h) 类中定义一个委托协议，如下所示

```
@protocol pickerProtocol;

@interface MyPicker : NSObject {

    id <pickerProtocol> pickerDelegate;
}
@property(nonatomic,retain) id <pickerProtocol> pickerDelegate;

@end

@protocol pickerProtocol

- (void) pushViewController;
@end 
```

并在从 UIPickerView 中选择一行时调用此委托方法

```
[pickerDelegate pushViewController]; 
```

然后在所有使用选择器的视图控制器中编写委托方法的实现

```
- (void) pushViewController {
     [self.navigationController pushViewController:controller animated:YES]; 
} 
```

不要按如下方式设置委托

```
MyPicker *picker = [MyPicker alloc]init];
picker.pickerDelegate = self; 
```

# iphone - 如何在 xmpp 中从不同帐户发送消息

> ID：11361302
> 
> 赞同：0
> 
> 时间：2012-07-06T11:26:21.657
> 
> 标签：iphone, xmpp

我正在使用 xmpp 客户端开发聊天应用程序。当我使用一个帐户登录时，我可以发送和接收消息。我的问题是当我使用两个不同的帐户登录时，我无法使用第一个登录帐户发送消息。为了发送消息，我尝试了以下代码：

```
 - (void)sendMessage:(id)sender
{  
    xmppStream=[[self appDelegate] xmppStream];

    NSString *messageStr =messageField.text;
    if([messageStr length] > 0)
    {

        NSXMLElement *body = [NSXMLElement elementWithName:@"body"];
        [body setStringValue:messageStr];
         NSXMLElement *message = [NSXMLElement elementWithName:@"message"];
        [message addAttributeWithName:@"type" stringValue:@"chat"];
        [message addAttributeWithName:@"to" stringValue:jidStr];
        [message addChild:body];
         NSLog(@"%@",message);
     }

} 
```

在这个委托方法中，我创建了流对象，例如休闲

```
-(void)setUpStream
{
XMPPStream *xmppStream=[XMPPStream alloc] init]
} 
```

当我第二次使用另一个帐户登录时，xmppStream 对象与第二个帐户相关联，但与第一个帐户无关。

所以我无法使用第一个帐户发送消息。任何人都可以解决我的问题以及如何为两个帐户创建两个 xmppStream 对象；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:48:46.330

最简单的方法是在 AppDelegate 中创建 xmppStream 对象。

调用一个 xmppStreamOne 和 xmppStreamTwo。

如果您打算登录到许多不同的服务器，您甚至可以创建一个 xmppStreams 的 NSMutableArray。

当您从 AppDelegate 检索 xmppStream 时，请确保获取正确的。

# c# - 数据格式 Jquery Ajax Post 跨域调用 Asp.Net MVC 方法

> ID：11361307
> 
> 赞同：0
> 
> 时间：2012-07-06T11:26:39.147
> 
> 标签：c#, jquery, ajax, asp.net-mvc, iis

我正在尝试从 http 到 https 跨域的 $.ajax 发布 MVC 调用。

**客户端**

```
enter code here

$.ajax({    
type: 'post',    
crossDomain: true,    
url: 'https://localhost/views/Member/VerifyEmail',    
beforeSend: function () { alert('I am sending'); },    
data: '{name:"John"}',    
dataType: "json",    
success: function (data) { pdata = data; }    
}); 
```

**服务器端**

```
 [RequireHttps]    
 [HttpPost]    
 public string VerifyEmail(string name){    
   return "got it"
 } 
```

我已添加 Access-Control-Allow-Origin`web.config`以便可以正常建立呼叫。现在问题出在服务器端，我得到了变量名 = null

我还检查了调试，发现数据实际上已经发送到服务器

```
HttpContext.Request.Form    
{%7bname%3a%22hello%22%7d}    
[System.Web.HttpValueCollection]: {%7bname%3a%22hello%22%7d} 
```

问题是我如何从网络方法中检索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:29:39.643

%7bname%3a%22hello%22%7d 这是 HTML 实体字符串，请解码字符串然后解析为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:29:56.237

我想你可以改变你的电话

```
$.ajax({    
 type: 'post',    
 crossDomain: true,    
 url: 'https://localhost/views/Member/VerifyEmail',    
 beforeSend: function () { alert('I am sending'); },    
 data: 'John',    
 dataType: "text",    
 success: function (data) { pdata = data; }    
}); 
```

# iphone - Kal日历错误ios中的NSNull cc_componentsForMonthDayAndYear

> ID：11361314
> 
> 赞同：0
> 
> 时间：2012-07-06T11:27:07.527
> 
> 标签：iphone, ios, calendar, nullreferenceexception

我正在开发将数据保存到 SQLite3 数据库的 iPhone 应用程序。我也在使用 Kal 日历。在这里我能够成功获取日历但是当我从 SQLite3 数据库中插入日期时。它通过给出错误而崩溃：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSNull cc_componentsForMonthDayAndYear]: unrecognized selector sent to instance 0x3f8a85e0' 
```

我不明白这里出了什么问题..我已经浏览了几个搜索页面..我试图通过两种方式来解决这个问题，就像 NSDate 一样

```
[NSDate dateWithTimeIntervalSince1970:sqlite3_column_double(selectstmt, 4)] 
```

以及使用 NSDateFormatter 获取 NSDate 的这种方式`[dateformate dateFromString dateString]`

请尽快帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:21:23.250

我认为有些值没有正确检索，

检查用于调用“componentsForMonthDayAndYear”的对象是否包含值。

在调用“componentsForMonthDayAndYear”方法之前提供一个空检查，这将帮助您避免这种类型的异常

```
if (object != NSNull.null) {
   [object cc_componentsForMonthDayAndYear];
} 
```

# c# - 在编辑 XML 或代码时为文本和关键字（如记事本 ++）着色

> ID：11361319
> 
> 赞同：0
> 
> 时间：2012-07-06T11:27:23.980
> 
> 标签：c#

我想实现一个类来为我提供一个突出关键词的漂亮文本显示。我正在显示 SQL 和 XML 代码，并且记事本 ++ 运行良好。

有谁知道我可以使用类似功能实现的类？

当您将某些内容设置为代码时，甚至堆栈溢出的方式也是如此。就像示例一样，打击是我要显示的文本，以及堆栈溢出格式，这对我来说看起来很漂亮。

这就是我要找的。

```
<!-- Visual Studio 2010 Ultimate Trial -->
<File friendlyName="Visual Studio 2010 Ultimate Trial" url="http://download.microsoft.com/download/4/0/6/4067968E-5530-4A08-B8EC-17D2B3F02C35/vs_ultimateweb.exe" installArgs="/q /full /norestart" estDownloadTime="00:00:20" estInstallTime="01:10:00" />
<!-- Silverlight 4 Tools for Visual Studio --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:30:14.630

您可能对[ColorCode - .NET 的语法高亮/着色感兴趣](http://colorcode.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:35:49.423

您可以考虑使用[scintilla](http://www.scintilla.org/)，这是 Notepad++ 用于呈现文本的核心组件。

存在一些您可以使用的[.Net 包装器。](http://scintillanet.codeplex.com/)

# data-structures - 寻找中位数的数据结构

> ID：11361320
> 
> 赞同：12
> 
> 时间：2012-07-06T11:27:25.563
> 
> 标签：data-structures, language-agnostic, selection

这是一道面试题。设计一个类，它存储整数并提供两个操作：

```
无效插入（int k）
整数 getMedian()

```

我想我可以使用 BST 来`insert`获取 O(logN) 并`getMedian`获取 O(logN) （因为`getMedian`我应该为每个节点添加左/右子节点的数量）。

现在我想知道这是否是*最*有效的解决方案，没有更好的解决方案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-08T18:07:46.857

您可以使用 2 个堆，我们将调用`Left`和`Right`。
`Left`是一个`Max-Heap`。
`Right`是一个`Min-Heap`。
插入是这样完成的：

*   如果新元素`x`小于根，`Left`那么我们插入`x`到`Left`.
*   否则我们插入`x`到`Right`.

*   如果插入后`Left`的元素计数大于 1 的元素计数`Right`，则我们调用 Extract-Max on`Left`并将其插入到`Right`。
*   否则，如果插入后`Right`的元素计数大于 的元素计数`Left`，则我们调用 Extract-Min`Right`并将其插入到`Left`。

中位数始终是 的根`Left`。

所以插入是`O(lg n)`及时完成的​​，并且得到中位数是`O(1)`及时完成的​​。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T15:46:26.640

有关涉及两个堆的解决方案，请参阅[此](https://stackoverflow.com/questions/10930732/c-efficiently-calculating-a-running-median)Stack Overflow 问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:46:46.667

如果你在 O < O(log(n) 中选择你的候选人，它会打败一个整数数组吗？ ) 并使用一个数组，那么 getMedian 将采用一半大小的索引是 O(1)，不是吗？在我看来，比 log(n) + log(n) 做得更好。

另外，通过更灵活一点，您可以通过根据输入属性更改排序算法来提高性能（输入是否几乎已排序......）。

我在计算机科学方面几乎是自学成才，但我会这样做：越简单越好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T14:28:50.203

您也可以考虑使用自平衡树。如果树是完全平衡的，那么根节点就是你的中位数。比如说，树的一端更深一层。然后，您只需要知道更深的一侧有多少个节点即可选择正确的中位数。

# scala - Scala 单元到匿名类

> ID：11361321
> 
> 赞同：2
> 
> 时间：2012-07-06T11:27:31.477
> 
> 标签：scala, closures, anonymous-class

是否可以将 Unit 转换为匿名类的方法？

代替：

```
addSelectionListener(new SelectionListener{
    def widgetSelected(SelectionEvent event): Unit = {
       //...
    }
} 
```

对此：

```
addSelectionListener toAnonymousClass(classOf[SelectionListener], { 
    /* .. */ 
}) 
```

如果没有任何图书馆可以做到这一点，我将如何制作一个？是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T11:43:44.697

我相信以下隐式转换应该可以达到您想要的结果：

```
implicit def selectionListener (f: SelectionEvent => Unit) = 
  new SelectionListener {
    def widgetSelected(event: SelectionEvent) {
      f(event)
    }
  } 
```

它会自动将您的函数文字类型`SelectionEvent => Unit`转换为，`SelectionListener`因此您将能够`addSelectionListener`像这样使用该方法：

```
addSelectionListener { event: SelectionEvent =>
    /* .. */ 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:37:47.083

您可以只添加一个重载到`addSelectionListener`，这样就不需要隐式转换。从 2.10 开始，此类转换需要导入，`language.implicitConversions`这是一个微妙的提示，您应该尽可能避免它们。

```
def addSelectionListener(f: SelectionEvent => Unit) = 
  addSelectionListener(new SelectionListener {
    def widgetSelected(event: SelectionEvent): Unit = f(event)
  }
}) 
```

然后用作

```
addSelectionListener { se => 
  /* ... */
} 
```

这也更少样板，因为您不需要类型注释。

If you use it in other places you could put the overload method in a subclass of whatever `addSelectionListener` is defined in, or in a trait.

# iphone - 错误：命令 /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool 失败，退出代码为 1

> ID：11361326
> 
> 赞同：2
> 
> 时间：2012-07-06T11:27:51.070
> 
> 标签：iphone, ios, xcode, ios4

任何人都可以就以下错误消息提出建议。以前从未使用 xcode 遇到过这样的错误消息。

```
Command /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool failed with exit code 1 
```

# qt - 获取 QTableWidget 中的单元格详细信息

> ID：11361328
> 
> 赞同：0
> 
> 时间：2012-07-06T11:28:14.257
> 
> 标签：qt

我的应用程序中有一个 QTableWidget。我在运行时将 QPushButton 小部件添加到表格小部件的单元格中。现在，当单击这个新添加的按钮时，我需要执行一些操作。我需要获取包含此按钮的单元格的行和列详细信息。我怎样才能得到这些细节？我是 Qt 新手，正在寻求帮助。

谢谢你，拉克什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:19:20.287

一种方法是利用 Qt 的属性系统并在插入按钮时将动态行和列属性添加到按钮。这是一个例子。

```
# table_button_11361328.pro
QT       += core gui
TARGET = table_button_11361328
TEMPLATE = app
SOURCES += main.cpp 
```

```
// main.cpp
#include <QApplication>
#include <QTableWidget>
#include <QPushButton>
#include <QLabel>

class Display : public QLabel
{
    Q_OBJECT
public:
    Display(QWidget* parent = 0) : QLabel(parent) {}
public slots:
    void indicate() {
        QWidget * w = qobject_cast<QWidget*>(sender());
        if (w == 0) return;
        int row = w->property("tableRow").toInt();
        int column = w->property("tableColumn").toInt();
        setText(QString("* %1,%2 *").arg(row).arg(column));
    }
};

QWidget * setWidget(QTableWidget* table, int row, int column, QWidget * w)
{
    w->setProperty("tableRow", row);
    w->setProperty("tableColumn", column);
    table->setCellWidget(row, column, w);
    return w;
}

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QTableWidget table;
    Display * d = new Display();
    table.setRowCount(3);
    table.setColumnCount(2);
    table.setCellWidget(2, 0, d);
    d->connect(setWidget(&table, 0, 0, new QPushButton("0,0")), SIGNAL(clicked()), SLOT(indicate()));
    d->connect(setWidget(&table, 0, 1, new QPushButton("0,1")), SIGNAL(clicked()), SLOT(indicate()));
    d->connect(setWidget(&table, 1, 0, new QPushButton("1,0")), SIGNAL(clicked()), SLOT(indicate()));
    d->connect(setWidget(&table, 1, 1, new QPushButton("1,1")), SIGNAL(clicked()), SLOT(indicate()));
    table.show();
    return a.exec();
}

#include "main.moc" 
```

# java - 如何使用 Maven 下载 jar 的源代码？

> ID：11361331
> 
> 赞同：82
> 
> 时间：2012-07-06T11:28:25.097
> 
> 标签：java, maven, jar

在我的项目中，我使用的是通过 Maven 提供的 JAR 文件。但是 Maven 给我的只是这个 jar - 没有 javadocs 也没有来源。按“Download Sources”没有任何效果：Eclipse 仍然没有找到 jar 的源。

这取决于什么？存储库应该自动提供源吗？

可能我需要在 POM 中写一些东西来指示 Maven 下载源代码吗？

我目前的pom如下：

```
<repositories>
    <repository>
        <id>xuggle repo</id>
        <url>http://xuggle.googlecode.com/svn/trunk/repo/share/java/</url>
    </repository>
</repositories>

<dependencies>

    <dependency>
        <groupId>xuggle</groupId>
        <artifactId>xuggle-xuggler</artifactId>
        <version>5.3</version>
        <type>rar</type>
    </dependency>

</dependencies> 
```

为什么 Maven 没有说任何关于它的源下载失败的评论？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-07-06T11:34:14.603

**2020 年更新：**

应该使用Maven[依赖插件来](https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-dependency-plugin/3.1.1)`dependency:sources` [实现目标](https://maven.apache.org/plugins/maven-dependency-plugin/sources-mojo.html)：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>3.1.1</version>
    <executions>
      <execution>
        <id>download-sources</id>
        <goals>
          <goal>sources</goal>
        </goals>
        <configuration>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

这也可以从命令行运行：

```
mvn dependency:sources -Dsilent=true 
```

执行`mvn dependency:sources`将强制 maven 下载项目中所有 jar 的所有源，如果源可用（上传到托管工件的存储库中）。如果你想下载 javadoc 命令是`mvn dependency:resolve -Dclassifier=javadoc`

**已弃用：**

~~也可以在 settings.xml 文件中创建配置文件并包含以下属性：

```
<properties>
  <downloadSources>true</downloadSources>
  <downloadJavadocs>true</downloadJavadocs>
</properties> 
```~~ 

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2014-04-22T22:28:27.390

```
mvn dependency:sources
mvn dependency:resolve -Dclassifier=javadoc 
```

如果它没有来源，它应该说类似

```
[INFO] The following files have NOT been resolved:
[INFO]    com.oracle:ojdbc6:java-source:sources:12.1.0.1
[INFO]    javax:javaee-api:java-source:sources:6.0 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-08-16T20:21:46.447

最好不要依赖 Eclipse 插件，因为它已被弃用。使用`downloadSources`and`downloadJavadocs`属性对我不起作用。上面发布的关于使用依赖插件词的答案。但是，您可能希望自动下载源代码和 javadocs。此外，您可能希望始终创建一个源 jar 和一个 javadoc jar。把它放在你项目的 pom 中。如果您使用模块，请放入您的父 pom.xml 文件中。

```
<build>
    <plugins>
        <!-- download sources and javadoc -->
        <plugin>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.10</version>
            <executions>
                <execution>
                    <id>download-sources</id>
                    <goals>
                        <goal>sources</goal>
                    </goals>
                </execution>
                <execution>
                    <id>download-javadoc</id>
                    <configuration>
                        <classifier>javadoc</classifier>
                    </configuration>
                    <goals>
                        <goal>resolve</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <!-- Always create javadoc jar. -->
        <plugin>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.10.4</version>
            <executions>
                <execution>
                    <id>attach-javadoc</id>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <!-- Always create source jar. -->
        <plugin>
            <artifactId>maven-source-plugin</artifactId>
            <version>2.10</version>
            <executions>
                <execution>
                    <id>attach-sources</id>
                    <goals>
                        <goal>jar</goal>
                        <goal>test-jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-17T04:11:02.917

`Maven>Download Sources`在 Eclipse 中，再次单击您的项目`Maven>Download Javadoc`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-08T18:30:40.923

您还可以`target/dependencies`使用以下方式下载源：

```
mvn -Dclassifier=sources dependency:copy-dependencies 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-06T11:33:36.377

源/javadoc jar 可能尚未提供并且不在存储库中——没有任何东西需要源/javadoc jar 存在。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-10T07:08:35.103

扩展@hovanessyan 的答案。

在 Maven 的 settings.xml 中启用 downloadSources 和 downloadJavadocs 的基本配置文件如下所示。例如配置文件 id 是 downloadSources

```
<!-- add the profile under profiles section -->

    <profile>
        <id>downloadSources</id>
        <properties>
            <downloadSources>true</downloadSources>
            <downloadJavadocs>true</downloadJavadocs>           
        </properties>
    </profile>

<!-- activate the profile under activeProfiles section -->

  <activeProfiles>
    <activeProfile>downloadSources</activeProfile>
  </activeProfiles> 
```

# java - 如何在java中的特定时间调用方法？

> ID：11361332
> 
> 赞同：33
> 
> 时间：2012-07-06T11:28:27.403
> 
> 标签：java

是否可以在特定时间调用java中的方法？例如，我有一段这样的代码：

```
class Test{

    public static void main(String args[]) {
        // here i want to call foo at : 2012-07-06 13:05:45 for instance
        foo();
    }
} 
```

这如何在java中完成？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-06T11:31:14.413

使用[java.util.Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)类，您可以创建一个计时器并安排它在特定时间运行。

**下面是示例：**

```
//The task which you want to execute
private static class MyTimeTask extends TimerTask
{

    public void run()
    {
        //write your code here
    }
}

public static void main(String[] args) {

    //the Date and time at which you want to execute
    DateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    Date date = dateFormatter .parse("2012-07-06 13:05:45");

    //Now create the time and schedule it
    Timer timer = new Timer();

    //Use this if you want to execute it once
    timer.schedule(new MyTimeTask(), date);

    //Use this if you want to execute it repeatedly
    //int period = 10000;//10secs
    //timer.schedule(new MyTimeTask(), date, period );
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-06T11:33:35.020

您可以使用[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)`Timer` ，这是“ /组合的更通用替代品`TimerTask`”（根据[`Timer`'s javadoc](http://docs.oracle.com/javase/8/docs/api/java/util/Timer.html)）：

```
long delay = ChronoUnit.MILLIS.between(LocalTime.now(), LocalTime.of(13, 5, 45));
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
scheduler.schedule(task, delay, TimeUnit.MILLISECONDS); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-06T11:30:52.730

这是可能的，我会使用诸如[http://quartz-scheduler.org/之类的库](http://quartz-scheduler.org/)

> Quartz 是一种功能齐全的开源作业调度服务，可以与几乎任何 Java EE 或 Java SE 应用程序集成或一起使用——从最小的独立应用程序到最大的电子商务系统。Quartz 可用于创建简单或复杂的调度，以执行数十、数百甚至数万个作业；任务被定义为标准 Java 组件的作业，这些组件几乎可以执行任何您可以对其编程来执行的操作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-06T11:32:16.107

据我所知，您可以为此使用[Quartz-scheduler](http://quartz-scheduler.org/)。我还没有使用它，但是很多人都向我推荐了它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T11:31:36.303

您可以使用[Timer类](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html)

从文档：

> 线程调度任务以供将来在后台线程中执行的工具。任务可以安排为一次性执行，或定期重复执行。

该方法`schedule(TimerTask task, Date time)`正是您想要的：安排指定任务在指定时间执行。

如果您需要`cron`格式的时间表，[石英](http://quartz-scheduler.org/documentation/quartz-2.1.x/quick-start)将是一个很好的解决方案。（[石英 cron 像时间表](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-06)）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-06T11:34:44.187

如果您在谈论 SE，那么 Timer 类可能就是您正在寻找的[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html)，自 Java 5 起可用。

如果您需要在应用程序服务器上下文中计时，我建议您查看 EJB计时器[http://www.javabeat.net/2007/03/ejb-3-0-timer-services-an-overview/](http://www.javabeat.net/2007/03/ejb-3-0-timer-services-an-overview/) EJB 3.0。

或者，根据您真正想做的事情，您可以详细说明使用 cron 作业（或任何其他基于操作系统的计时器方法）是否更合适，即您不希望或不能让 VM 运行所有时间。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-06T11:34:47.220

有可能的。您可以在某个时间使用`Timer`和来安排方法`TimerTask`。

例如：

```
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, 10);
calendar.set(Calendar.MINUTE, 30);
calendar.set(Calendar.SECOND, 0);

Date alarmTime = calendar.getTime();

Timer _timer = new Timer();
_timer.schedule(foo, alarmTime); 
```

**参考这些链接：**

*   [定时器](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Timer.html)
*   [定时器任务](http://java.sun.com/j2se/1.4.2/docs/api/java/util/TimerTask.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-06T11:42:32.600

[java.util.Timer](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)的简单演示

```
Timer t=new Timer();
t.schedule(new TimerTask() {
    public void run() {
        foo();
    }
}, new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse("2012-07-06 13:40:20")); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-25T16:57:33.477

```
Timer timer = new Timer();
Calendar calendar = Calendar.getInstance(); // gets a calendar using the default time zone and locale.
calendar.add(Calendar.SECOND, 5);
Date date = calendar.getTime();
timer.schedule(new TimerTask() {
    @Override
    public void run() {
        test();
    }
}, date); 
```

# android - 使用 GRAPH API Android 在 facebook 上分享全尺寸照片

> ID：11361335
> 
> 赞同：3
> 
> 时间：2012-07-06T11:28:52.200
> 
> 标签：android, facebook, facebook-graph-api

我想发布看起来像下面的图片，但有全尺寸的图片。

![在此处输入图像描述](../Images/f45e313f7d3d41ef365c8056b70b6b5f.png)

我已经使用图形 api 在 facebook 上分享照片，如下所示。 ![在此处输入图像描述](../Images/b30e8e581cc4e1b48b2441df60a1f5dc.png)

我想要一些超链接，如上图和大照片。

请.....指导我这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:03:05.693

**简单的回答不，你不能显示全尺寸的图像**。我们只会得到 Facebook Graph API 固定的默认尺寸

共有三种媒体附件，

1) 图像

2) 闪光

3) mp3

**对于图像媒体类型：**您不能设置用户定义的高度和宽度，没有这样的键/值对来设置高度和宽度。

**对于 Flash 媒体类型：** 您可以设置高度和宽度，以下是可用于 Flash 类型的键/值对：

```
"width": "80", 
"height": "60",
"expanded_width": "160", 
"expanded_height": "120" 
```

**对于mp3**无需讨论。

[Facebook 帖子的媒体附件](http://developers.facebook.com/docs/guides/attachments/)

# c - jni中的dll加载异常

> ID：11361336
> 
> 赞同：0
> 
> 时间：2012-07-06T11:28:56.410
> 
> 标签：c, dll, java-native-interface, unsatisfiedlinkerror, javah

我正在尝试使用 JNI 实现一个简单的 HelloWorld 应用程序。从 Java 调用 c 函数。我创建了一个java类：

```
class HelloWorld{
private native void print();
public static void main(String[] args){
    new HelloWorld().print();

}

static{
    System.load("c://jni_training//HelloWorld.dll");
} 
```

}

然后生成一个.h文件，创建c实现并成功生成.dll。但我无法执行 java HelloWorld...我看到异常

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\jni_training\Hello World.dll: Can't find dependent libraries 
   at java.lang.ClassLoader$NativeLibrary.load(Native Method) 
   at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1928) 
   at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1825) 
   at java.lang.Runtime.load0(Runtime.java:792) 
   at java.lang.System.load(System.java:1059) 
   at HelloWorld.<clinit>(HelloWorld.java:10 
```

什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T14:54:58.300

我有一个类似的问题，如果您确定 msvcr90.dll 是什么是依赖项，那么您可以有多个选项。

1.  将 dll 放在 java 库路径中，只需执行 System.out.println(System.getProperty("java.library.path")); 并且您知道库路径是什么，并将您的 dll 文件复制到其中一个目录中。
2.  以与加载 HelloWorld.dll 相同的方式加载 dll，请参阅：[很好的解释](http://www.bullraider.com/java/core-java/random-articles/293-unsatisfiedlinkerror-can-t-find-dependent-libraries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-21T09:55:02.593

如果该 DLL 不在 C++ 中，那么您将不得不通过 CLI 类态射进行接口。

# wpf - WPF 附加依赖属性计算字段更新

> ID：11361340
> 
> 赞同：0
> 
> 时间：2012-07-06T11:29:36.053
> 
> 标签：wpf, attached-properties

给定一个非常简单的自定义容器控件 CustomDock，带有两个附加属性 IsFooBar1 和 IsFooBar2。如果设置 IsFooBar2 在更改 IsFooBar1 的值时更新了 IsFooBar1 的值，我如何确保 Visual Studio 将为 IsFooBar1 的值更新生成的 xaml。

自定义控件：

```
 public class CustomDock : DockPanel
    {
    public static readonly DependencyProperty IsFooBarProperty1 = DependencyProperty.RegisterAttached(
      "IsFooBar1",
      typeof(Boolean),
      typeof(CustomDock),
      new FrameworkPropertyMetadata(true, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault)
    );

    public static void SetIsFooBar1(UIElement element, Boolean value)
    {
        element.SetValue(IsFooBarProperty1, value);
    }

    public static Boolean GetIsFooBar1(UIElement element)
    {
        return (Boolean)element.GetValue(IsFooBarProperty1);
    }

    public static readonly DependencyProperty IsFooBarProperty2 = DependencyProperty.RegisterAttached(
      "IsFooBar2",
      typeof(Boolean),
      typeof(CustomDock),
      new PropertyMetadata(false)
    );

    public static void SetIsFooBar2(UIElement element, Boolean value)
    {
        element.SetValue(IsFooBarProperty2, value);
        element.SetValue(IsFooBarProperty1, value);

    }

    public static Boolean GetIsFooBar2(UIElement element)
    {
        return (Boolean)element.GetValue(IsFooBarProperty2);
    }

} 
```

及其在 xaml 中的使用：

```
<Window x:Class="TestAttachedIndirectProperties.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" xmlns:my="clr-namespace:TestAttachedIndirectProperties">
<Grid>
    <my:CustomDock Height="100" HorizontalAlignment="Left" Margin="138,123,0,0" x:Name="customDock1" VerticalAlignment="Top" Width="200">
        <Button Content="Button" Height="23" Name="button1" Width="75" my:CustomDock.IsFooBar1="True" my:CustomDock.IsFooBar2="True" />
    </my:CustomDock>
</Grid> 
```

在 Visual Studio 设计期间，如果 IsFooBar2 更改为 false，则 IsFooBar1 也应该被赋予一个 false 值，但在属性窗格或 xaml 代码中都不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:40:19.450

WPF 不保证将调用您的 Dependency 属性设置器（这很奇怪），如果您想设置依赖属性，您需要通过属性定义注册 OnPropertyChanged 回调并将级联逻辑放在那里。

# oauth - GitHub API3 删除访问令牌

> ID：11361342
> 
> 赞同：5
> 
> 时间：2012-07-06T11:29:40.500
> 
> 标签：oauth, github-api

我正在制作一个表单，允许用户同意一些条件，然后才能将拉取请求合并到项目的核心中。要提供 GitHub 帐户的所有权证明，用户需要使用 GitHub API 授予我的网站对其 GitHub 帐户的只读访问权限。

我想为用户提供“撤销访问”功能 - 我实际上并不想要访问他们的帐户，这只是我验证帐户所有权的好方法。

我知道用户可以通过[GitHub 应用程序](https://github.com/settings/applications)设置页面撤销应用程序访问权限，但如果可能的话，我想简化这一点。我查看了 GitHub APIv3 文档，但没有看到任何允许请求 GitHub 撤销 access_token 的内容。

**问题**：

是否可以以编程方式撤销我的应用程序的 access_token？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T19:02:19.817

如果您查看[GitHub OAuth Authorizations API](https://developer.github.com/v3/oauth_authorizations/#delete-an-authorization)，他们列出了使用“DELETE /authorizations/:id”删除授权的能力

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-25T05:25:48.930

您可以撤销身份验证令牌：

> 撤销对应用程序的授权
> 
> OAuth 应用程序所有者还可以撤销 OAuth 应用程序的单个令牌。对于此方法，您必须使用基本身份验证，其中用户名是 OAuth 应用程序 client_id，密码是其 client_secret。
> 
> 删除 /applications/:client_id/tokens/:access_token

[文件](https://developer.github.com/v3/oauth_authorizations/#get-or-create-an-authorization-for-a-specific-app)正确；我已经验证了这个作品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T09:08:03.920

我知道已经晚了，但我希望这对其他人有帮助，

```
 NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://api.github.com/applications/%@/tokens/%@",GITHUB_CLIENT_ID,token]];

   NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
   NSString *theUsername = GITHUB_CLIENT_ID;
   NSString *thePassword = GITHUB_CLIENT_SECRET;

   [request addValue:[NSString stringWithFormat:@"Basic %@",[self base64forData:[[NSString stringWithFormat:@"%@:%@",theUsername,thePassword] dataUsingEncoding: NSUTF8StringEncoding]]] forHTTPHeaderField:@"Authorization"];
   [request setHTTPMethod:@"DELETE"];
   [request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];

   NSError *error = nil;
   NSURLResponse *response;

   [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

- (NSString*)base64forData:(NSData*)theData
{
    const uint8_t* input = (const uint8_t*)[theData bytes];
    NSInteger length = [theData length];

    static char table[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    NSMutableData* data = [NSMutableData dataWithLength:((length + 2) / 3) * 4];
    uint8_t* output = (uint8_t*)data.mutableBytes;

    NSInteger i;
    for (i=0; i < length; i += 3) {
        NSInteger value = 0;
        NSInteger j;
        for (j = i; j < (i + 3); j++) {
            value <<= 8;

            if (j < length) {
                value |= (0xFF & input[j]);
            }
        }

        NSInteger theIndex = (i / 3) * 4;
        output[theIndex + 0] =                    table[(value >> 18) & 0x3F];
        output[theIndex + 1] =                    table[(value >> 12) & 0x3F];
        output[theIndex + 2] = (i + 1) < length ? table[(value >> 6)  & 0x3F] : '=';
        output[theIndex + 3] = (i + 2) < length ? table[(value >> 0)  & 0x3F] : '=';
    }

    return [[[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding] autorelease];
} 
```

# php - 加入表以摆脱空数据

> ID：11361345
> 
> 赞同：0
> 
> 时间：2012-07-06T11:30:07.083
> 
> 标签：php, mysql

所以我做了以下查询，我想知道我是否可以摆脱返回的空值，或者更好地结合表，因为教师和学生列不在同一行中重复。在其中一个的教师列中存在空值，另一个（学生）有数据，反之亦然。

```
SELECT * FROM rifd
LEFT JOIN faculty ON rifd.number = faculty.tagid 
LEFT JOIN student ON rifd.number= student.tagid 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:33:14.973

尝试[`UNION`](https://dev.mysql.com/doc/refman/5.0/en/union.html)查询：

```
SELECT * FROM rifd JOIN faculty ON rifd.number = faculty.tagid
UNION
SELECT * FROM rifd JOIN student ON rifd.number = student.tagid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:32:03.047

```
SELECT * FROM rifd 
LEFT JOIN faculty ON rifd.number = faculty.tagid 
LEFT JOIN student ON rifd.number= student.tagid 
```

而不是使用 LEFT JOIN 只使用 JOIN。左连接获取所有左列行并添加右列，如果没有正确的值，它将放置 NULL。Just JOIN 将采用两行都正确的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:32:18.413

使用`JOIN`代替`LEFT JOIN`并且您的额外行应该消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T11:41:12.927

您也可以根本不使用 JOIN。像这样使用 WHERE 语句，它要快得多：

```
SELECT * 
  FROM rifd,
       faculty,
       student
WHERE rifd.number = faculty.tagid
  AND rifd.number = student.tagid 
```

# exe - rb文件转exe文件的问题

> ID：11361349
> 
> 赞同：2
> 
> 时间：2012-07-06T11:30:28.227
> 
> 标签：exe

我正在使用 OCRA 将我的 rb 文件转换为 exe 文件。该脚本运行正常，它也创建了一个 exe 文件。但是，当我将 exe 文件发送给用户运行时（他的系统中没有安装 ruby​​），他在 exe 运行之间面临以下错误。“Windows 找不到 ruby​​w。确保您输入了正确的名称并且然后再试一次。要搜索文件，请单击“开始”按钮 ，然后单击“搜索”...

有没有人遇到过这个问题？

我尝试安装 Exerb，然后给出以下命令：ruby -r exerb/mkexy 234.rb。但是，它创建了一个扩展名为 .exy 且大小 < 1KB 的文件。

我真的很感激在这件事上的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:13:06.480

使用独立的 Ruby 包遇到了类似的问题。问题是由于您的 ruby​​ 是独立的，并且某些代码使用 ruby​​ 来运行某些代码，就好像安装了 ruby​​ 一样，它可能是您自己的代码，或者很可能是 gem。我只能为你指出正确的方向。可能有一个系统调用正在执行类似的东西`system("start rubyw blah_blah_blah")`，注意'rubyw'取决于您指定的路径。执行 ruby​​w 时可能会出现一些问题，因为无法查看异常堆栈跟踪。在花了一些时间调试并查看到底执行了什么之后，我发现一些已安装的 gem 正在使用 ruby​​w 来分叉一个进程，这导致了我的问题......希望它有用。

# mysql - 如何使用perl在mysql中插入图像

> ID：11361354
> 
> 赞同：2
> 
> 时间：2012-07-06T11:31:06.487
> 
> 标签：mysql, perl

请帮助我使用 perl 在 mysql DB 中插入图像。

这是我的 HTML 代码：

```
<form name="addNewUser"  method="get" action="addNewUser.pl" >
    Email: <input type="text" name="email" value = ""></br>
    Password: <input type="password" name="pwd" value = ""></br>
    Name: <input type="text" name="name" ></br>
    Image:<input name="image" accept="image/jpeg" type="file"> </br>
    <input type="submit">
</form> 
```

这是我的 perl 代码：

```
#!/usr/local/bin/perl -w
#use strict;
use warnings;
use DBI;
use CGI;
use CGI::Carp qw/fatalsToBrowser warningsToBrowser/;
use CGI::Session ( '-ip_match' );
use HTML::Template;

# read the CGI params
my $cgi = CGI->new;
my $email = $cgi->param("email");
my $pwd = $cgi->param("pwd");
my $name = $cgi->param("name");
$filename = $cgi->param ("image");

require "dbconfig.pl";

$rows = $db_handle->do( "INSERT INTO users VALUES ('NULL','$name', '$email', '$pwd', '$image') " ); 
```

这有什么问题？它没有在数据库中加载文件。

请帮我。

提前致谢， 萨普纳

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:53:39.733

您将图像文件名放入名为 的变量`$filename`中，但在您的 SQL 语句中，您尝试从名为`$image`.

您应该`use strict`在程序中取消注释该行并修复它向您显示的问题。

# function - Powershell中的函数指针

> ID：11361360
> 
> 赞同：1
> 
> 时间：2012-07-06T11:31:21.060
> 
> 标签：function, powershell, function-pointers

考虑以下函数

```
Function IfFunctionExistsExecute
{
    param ([parameter(Mandatory=$true)][string]$func)
    begin 
    {
        # ...
    }
    process
    {
        if(Get-Command $func -ea SilentlyContinue)
        {
            & $func # the amperersand invokes the function instead of just printing the variable
        }
        else
        {
            # ignore
        }       
    }
    end
    {
        # ...
    }
} 
```

用法：

```
Function Foo { "In Foo" }
IfFunctionExistsExecute Foo 
```

这行得通。

然而这不起作用：

```
Function Foo($someParam) 
{ 
     "In Foo"
     $someParam
}

IfFunctionExistsExecute Foo "beer" 
```

然而，这给了我一个丑陋的错误：

```
IfFunctionExistsExecute : A positional parameter cannot be found that accepts argument 'beer'.
At C:\PSTests\Test.ps1:11 char:24
+ IfFunctionExistsExecute <<<<  Foo "beer"
    + CategoryInfo          : InvalidArgument: (:) [IfFunctionExistsExecute], ParameterBindingException
    + FullyQualifiedErrorId : PositionalParameterNotFound,IfFunctionExistsExecute 
```

我如何在 PS 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:11:01.913

尝试在您调用的函数和您的函数上创建一个可选参数`IfFunctionExistsExecute`；像这样的东西：

```
Function IfFunctionExistsExecute
{
    param ([parameter(Mandatory=$true)][string]$func, [string]$myArgs)
        if(Get-Command $func -ea SilentlyContinue)
        {
            & $func $myArgs  # the amperersand invokes the function instead of just printing the variable
        }
        else
        {
            # ignore
        }       
}

Function Foo
{ 
    param ([parameter(Mandatory=$false)][string]$someParam)
    "In Foo" 
    $someParam
}

IfFunctionExistsExecute Foo
IfFunctionExistsExecute Foo "beer" 
```

对我来说，这给出了：

```
C:\test>powershell .\test.ps1
In Foo

In Foo
beer

C:\test> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:35:27.003

也许您也应该将参数传递给被调用的函数：

```
$arguments = $args[1..($args.Length-1)]
& $func @arguments 
```

# java - 返回类型为void的方法里面的return语句有什么意义

> ID：11361364
> 
> 赞同：1
> 
> 时间：2012-07-06T11:31:36.800
> 
> 标签：java

返回类型为 void 的方法中的 return 语句有什么意义。例如看下面的程序（我不能粘贴我公司的代码，所以我粘贴了一些示例）

```
public class Pavan {

    public static void main(String args[]) {

        Pavan r = new Pavan ();

        r.kiran();
    }

    public void kiran() {
        int a = 10;

        if (a == 10) {
            return;
        }

        System.out.println("Hi I am Kiran");
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T11:33:09.897

它从方法调用中返回，即返回后不再运行任何语句。

编写方法的另一种等效方法`kiran`是：

```
public void kiran() {
    int a = 10;

    if (a != 10) {
        System.out.println("Hi I am Kiran");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T11:33:33.950

`return`in`void`方法只会提前从函数的执行中返回。

它有这样的用法，但过度使用它并不好。如果它使代码更清晰，请使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T11:37:48.313

return 导致将控制权返回给调用者，这并不一定意味着应该将值返回给该调用者。“返回;” 实际上是“返回无效”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:00:06.390

```
public void kiran() {
    int a = 10;

    if (a == 10) {
        return;
    }

    System.out.println("Hi I am Kiran");
} 
```

它将停止继续执行该 return 语句意味着`System.out.println("Hi I am Kiran");`不会执行。

# joomla2.5 - 如何从 joomla 中的链接调用模块？

> ID：11361365
> 
> 赞同：0
> 
> 时间：2012-07-06T11:31:43.280
> 
> 标签：joomla2.5

我在我的 joomla 网站上安装了一个“给我回电”模块。当我为该模块提供位置时，它会显示一个表单。但是我想在单击弹出窗口中的链接后显示它。我不知道如何通过单击链接来调用该模块。或者我应该提供什么 url 来调用它？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:26:41.563

这是一个简单的回调模块，您不能将其转换为弹出窗口。而是尝试安装此模块[http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms/19435](http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms/19435)。我已经将它用于我的网站，它运行良好。

# c# - 在 MVC3 中创建一个简单的下拉列表

> ID：11361369
> 
> 赞同：1
> 
> 时间：2012-07-06T11:32:01.243
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个用于输入工作角色值的文本框。但是，这仅限于数据库方面的某些角色。因此，使用仅包含有效角色的下拉列表对我来说更有意义。我正在尝试设置它，但遇到了困难。

我在我的视图中放置了以下代码：

```
<p>
    @Html.LabelFor(m => m.Role)
    @Html.DropDownListFor(m=>m.Roles)
    @Html.ValidationMessageFor(m => m.Role)
</p> 
```

这在我的模型中：

```
public List<string> Roles
    {
        get
        {
            return new {"Author","Underwriter" };
        }
    } 
```

虽然这不会编译。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T11:34:01.293

为了创建下拉列表，您需要在视图模型上使用 2 个属性：一个标量属性，它将保存选定的值，一个集合属性，其中包含您想要显示的可用项目的列表。

因此，与往常一样，您从编写视图模型开始：

```
public class MyViewModel
{
    [Required]
    [DisplayName("Role")]
    public string SelectedRole { get; set; }

    public IEnumerable<SelectListItem> Roles 
    {
        get
        {
            return new[]
            {
                new SelectListItem { Value = "Author", Text = "Author" },
                new SelectListItem { Value = "Underwriter", Text = "Underwriter" }
            };
        }
    }
} 
```

然后是一个控制器动作，将这个模型传递给视图：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            return View(model);
        }
        return Content("Thanks for selecting role: " + model.SelectedRole);
    }
} 
```

最后是相应的强类型视图：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @Html.LabelFor(m => m.SelectedRole)
    @Html.DropDownListFor( m => m.SelectedRole, Model.Roles, "-- Role --")
    @Html.ValidationMessageFor(m => m.SelectedRole)

    <button type="submit">OK</button>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:34:09.133

添加`List<string>`到创建语句

```
public List<string> Roles
    {
        get
        {
            return new List<string> {"Author","Underwriter" };
        }
    } 
```

# node.js - 在同一浏览器中对超过 1 个连接进行长轮询

> ID：11361373
> 
> 赞同：3
> 
> 时间：2012-07-06T11:32:14.497
> 
> 标签：node.js, comet, long-polling

我正在尝试使用 NodeJS 实现长轮询技术。

我在服务器上部署了这个基本代码。

```
http = require('http');

function onRequest(request, response) {
    console.log('onRequest reached');
}

http.createServer(onRequest).listen(8080);
console.log('Server has started.'); 
```

当请求 localhost:8080 时，会触发 onRequest。当此连接处于活动状态时，我在第二个选项卡中请求同一页面，但不会触发 onRequest。但是，从另一个浏览器请求同一页面会触发 onRequest，而第一个连接仍然是“长轮询”。

浏览器有什么限制吗？这是如何以及为什么会发生的？如何避免这种情况？

顺便提一句。我正在尝试实现长轮询聊天和通知系统。实际上请求应该通过 AJAX 调用进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:49:16.427

可能是浏览器正在等待响应。立即尝试仅发送标头：

```
function onRequest(request, response) {
    response.writeHead(200, {'Content-Type': 'text/html'});
    console.log('onRequest reached');
} 
```

另一个提示：如果您要使用长轮询，我建议您查看[Server-Sent Events](http://www.w3.org/TR/eventsource/)。对此有相当广泛的浏览器支持，并且还有一个适用于旧浏览器的[polyfill](https://github.com/Yaffle/EventSource)。这是[CoffeeScript 中的一个示例，](https://gist.github.com/1560654)展示了如何从 node.js 服务器发送事件。

# java - 如何在 docx4j 生成的 docx 中从 servlet 渲染图像

> ID：11361376
> 
> 赞同：1
> 
> 时间：2012-07-06T11:32:20.257
> 
> 标签：java, servlets, xhtml, docx, docx4j

[这个问题与这个问题](https://stackoverflow.com/questions/10316607/render-image-from-servlet-in-flyingsaucer-generated-pdf)非常相似，但与 docx4j 而不是飞碟有关。

我正在使用 docx4j 通过返回生成的 docx 文档的 servlet 将 xhtml 文档呈现给 docx。xhtml 文档具有从另一个 servlet 请求的图像。图像 servlet 在返回适当的图像之前检查谁已登录。下面的代码显示了如何请求图像：

```
<img height="140" width="140" src="http://localhost:8080/myapp/servlet/DisplayPic" /> 
```

我的问题是图像的 http 请求来自`XHTMLImporter`（我认为）而不是登录用户，因此图像 servlet 不知道谁登录，因此不会返回所需的图像。

我目前正在使用下面的代码来呈现 xhtml 文档：

```
XHTMLImporter.setHyperlinkStyle("Hyperlink");
WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.createPackage();

NumberingDefinitionsPart ndp = new NumberingDefinitionsPart();
wordMLPackage.getMainDocumentPart().addTargetPart(ndp);
ndp.unmarshalDefaultNumbering();

wordMLPackage.getMainDocumentPart().getContent().addAll(XHTMLImporter.convert(xhtmlDocAsString, null, wordMLPackage)); 
```

在飞碟中，我可以使用 a `ReplacedElementFactory`，但这似乎不是 docx4j 使用的东西。有没有办法在转换过程中替换元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:21:18.937

哦，我玩得多么开心！我有一个复杂、复杂和疯狂的解决方案，我知道@JasonPlutext 将提供一个我忽略的非常简单和明显的解决方案。

这里是。此代码将 word 文档生成到输出流：

```
 outputStream = response.getOutputStream();

        XHTMLImporter.setHyperlinkStyle("Hyperlink");

        // Create an empty docx package
        WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.createPackage();

        NumberingDefinitionsPart ndp = new NumberingDefinitionsPart();
        wordMLPackage.getMainDocumentPart().addTargetPart(ndp);
        ndp.unmarshalDefaultNumbering();

        // Convert the XHTML, and add it into the empty docx we made
        List<Object> wmlObjects = getWmlObjects(wordMLPackage, xhtmlDocumentAsString);
        wordMLPackage.getMainDocumentPart().getContent().addAll(wmlObjects);

        SaveToZipFile saver = new SaveToZipFile(wordMLPackage);
        saver.save(outputStream); 
```

这个方法`getWmlObjects`是我自己的，它模拟了这个`XHTMLImporter.convert`方法，但它本身做的一切都是经过大量反思的。它基本上注入了几个对象来覆盖默认值`Docx4jUserAgent`和`Docx4jReplacedElementFactory`对象`DocxRenderer`（这是 Importer 实例的一个字段）。见下文：

```
private List<Object> getWmlObjects(WordprocessingMLPackage wordMLPackage, String xhtmlDocumentAsString) {

    try {
        DocxRenderer renderer = new DocxRenderer();

        // override the user agent
        FieldAccessUtils.setField(renderer, "userAgent", new ProfileImageDocx4jUserAgent());

        // override the replaced element factory
        Docx4jDocxOutputDevice outputDevice = (Docx4jDocxOutputDevice) FieldAccessUtils.getField(renderer,
                "_outputDevice");
        renderer.getSharedContext().setReplacedElementFactory(
                new ProfileImageDocx4jReplacedElementFactory(outputDevice));

        // build the XHTMLImporter instance as it does in XHTMLImporter.convert but with our new renderer

        XHTMLImporter importer; // = new XHTMLImporter(wordMLPackage);
        Constructor<XHTMLImporter> constructor = XHTMLImporter.class
                .getDeclaredConstructor(WordprocessingMLPackage.class);
        constructor.setAccessible(true);
        importer = constructor.newInstance(wordMLPackage);
        constructor.setAccessible(false);

        FieldAccessUtils.setField(importer, "renderer", renderer);

        InputSource is = new InputSource(new BufferedReader(new StringReader(xhtmlDocumentAsString)));
        Document dom = XMLResource.load(is).getDocument();

        renderer.setDocument(dom, null);
        renderer.layout();

        // use reflection to do: importer.traverse(renderer.getRootBox(), FieldAccessUtils.getField(importer, "imports"), null);
        Method traverseMethod = importer.getClass().getDeclaredMethod("traverse", Box.class, List.class,
                TableProperties.class);
        traverseMethod.setAccessible(true);
        traverseMethod.invoke(importer, renderer.getRootBox(), FieldAccessUtils.getField(importer, "imports"), null);
        traverseMethod.setAccessible(false);

        return (List<Object>) FieldAccessUtils.getField(importer, "imports");

    } catch (SecurityException e) {
        getLogger().error(ExceptionUtils.getStackTrace(e));
    } catch (NoSuchMethodException e) {
        getLogger().error(ExceptionUtils.getStackTrace(e));
    } catch (IllegalArgumentException e) {
        getLogger().error(ExceptionUtils.getStackTrace(e));
    } catch (IllegalAccessException e) {
        getLogger().error(ExceptionUtils.getStackTrace(e));
    } catch (InvocationTargetException e) {
        getLogger().error(ExceptionUtils.getStackTrace(e));
    } catch (InstantiationException e) {
        getLogger().error(ExceptionUtils.getStackTrace(e));
    }

    try {
        // plan B
        return XHTMLImporter.convert(xhtmlDocumentAsString, null, wordMLPackage);
    } catch (Docx4JException e) {
        getLogger().error(ExceptionUtils.getStackTrace(e));
    }

    return null;
} 
```

然后我只有我的两个自定义类 ProfileImageDocx4jUserAgent （驴工作）：

```
public class ProfileImageDocx4jUserAgent extends Docx4jUserAgent {

    /**
     * Replace the image where the DisplayUserPic servlet is being called.
     * <p>
     * From overridden method javadoc:
     * <p>
     * {@inheritDoc}
     */
    @Override
    public Docx4JFSImage getDocx4JImageResource(String uri) {

        if (StringUtils.contains(uri, "DisplayUserPic")) {

            InputStream input = null;
            try {

                input = ...;
                byte[] bytes = IOUtils.toByteArray(input);
                return new Docx4JFSImage(bytes);

            } catch (IOException e) {
                getLogger().error(ExceptionUtils.getStackTrace(e));
            } catch (ServiceException e) {
                getLogger().error(ExceptionUtils.getStackTrace(e));
            } finally {
                IOUtils.closeQuietly(input);
            }

            return super.getDocx4JImageResource(uri);

        } else {
            return super.getDocx4JImageResource(uri);
        }
    }
} 
```

和 ProfileImageDocx4jReplacedElementFactory （此时获取 iText 内容以忽略图像......否则会记录错误但它仍然可以正常工作）：

```
public class ProfileImageDocx4jReplacedElementFactory extends Docx4jReplacedElementFactory {

    /**
     * Constructor.
     * 
     * @param outputDevice
     *            the output device
     */
    public ProfileImageDocx4jReplacedElementFactory(Docx4jDocxOutputDevice outputDevice) {
        super(outputDevice);
    }

    /**
     * Forces any images which use the DisplayUserPic servlet to be ignored.
     * <p>
     * From overridden method javadoc:
     * <p>
     * {@inheritDoc}
     */
    @Override
    public ReplacedElement createReplacedElement(LayoutContext layoutContext, BlockBox blockBox,
            UserAgentCallback userAgentCallback, int cssWidth, int cssHeight) {

        Element element = blockBox.getElement();
        if (element == null) {
            return null;
        }

        String nodeName = element.getNodeName();
        String src = element.getAttribute("src");
        if ("img".equals(nodeName) && src.contains("DisplayUserPic")) {
            return null;
        }

        // default behaviour
        return super.createReplacedElement(layoutContext, blockBox, userAgentCallback, cssWidth, cssHeight);
    }
} 
```

我猜 docx4j 家伙可能会在 docx4j 中构建一些东西来处理这种情况，但目前（我认为）这似乎是一个很好的解决方法

# jquery - equalTo() 方法在 jquery 中不起作用？

> ID：11361378
> 
> 赞同：2
> 
> 时间：2012-07-06T11:32:29.807
> 
> 标签：jquery, validation

```
$('#reg_form').validate({
                onkeyup: false,
                errorClass: 'error',
                validClass: 'valid',
                rules: {
                    username: {
                        required: true,
                        minlength: 5,
                        //remote: "user_check.php"
                    },
                    password: {
                        required: true,
                        minlength: 5
                    },
                    confirm_password: {
                        required: true,
                        minlength: 5,
                        equalTo: "#password"
                    },
                    secretQuestion: "required",
                    secretAnswer: "required",
                    emailId: {
                        required: true, 
                        email: true
                    },
                    termsConditions: "required"                 
                },
                messages:{
                    username: {
                        required: "Please enter Username",
                        minlength: "Please enter atleast 5 characters",
                        //remote: jQuery.format("{0} is already in use")
                    },
                    password: {
                        required: "Please provide a password",
                        minlength: "Your password must be at least 5 characters long"
                    },
                    confirm_password: {
                        required: "Please provide a password",
                        minlength: "Your password must be at least 5 characters long",
                        equalTo: "Please enter the same password as above"
                    },
                    secretQuestion: "Please select your question",
                    secretAnswer: "Please enter your secret answer",
                    emailId: "Please enter a valid email address",
                    termsConditions: "Please accept our Terms and COnditions"
                },
                highlight: function(element) {
                    $(element).closest('div').addClass("f_error");
                },
                unhighlight: function(element) {
                    $(element).closest('div').removeClass("f_error");
                },
                errorPlacement: function(error, element) {
                    $(element).closest('div').append(error);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-06T13:27:52.300

当您通过“规则：”设置验证时，您需要输入的“名称”而不是“id”。

所以对于这样的输入：

```
<input type="text" name="password_name" id="password_id></input>
<input type="text" name="confirm_password_name" id="confirm_password_id></input> 
```

您应该在验证中更改它：

```
password_name: {
  required: true,
  minlength: 5
},
confirm_password_name: {
  required: true,
  minlength: 5,
  equalTo: "#password_id"
} 
```

希望它会奏效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T15:13:56.313

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-21T08:18:54.413

只需确保在 html 页面检查包含的模板上没有相同的 id

> 注意：对于测试，只需更改 id，如 register_pass 和 login_pass 或只是 pass1
> 1)。如果成功，则 id 在您的 html 上不是唯一的
> 2)。如果失败则打开控制台检查 jquery 或验证 js 是否可用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T20:29:38.080

是的，它直接不起作用。

Firefox 17.0.1
jQuery 1.8.3
jQuery 验证插件 1.10.0

如果您只使用字段名称，则它不起作用：

...equalTo="密码"....

相反，需要使用 id：

...equalTo="#password"....

# visual-studio-2010 - 如何启用应用程序安装以覆盖现有安装，而不是要求我卸载原始安装？

> ID：11361379
> 
> 赞同：1
> 
> 时间：2012-07-06T11:32:30.763
> 
> 标签：visual-studio-2010, deployment, windows-installer, setup-project

我正在使用 Visual Studio 2010 中的安装和部署项目来创建 .msi 安装程序。我可以在干净的机器上很好地安装应用程序，但如果我需要重新安装应用程序，例如，如果有更新、已解决的错误或新功能，则意味着我必须先卸载然后重新安装。我希望能够在现有安装上进行安装，而无需先卸载。

这可能吗？如果是这样，我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:39:11.087

请参阅这些页面以获得答案；

[http://msdn.microsoft.com/en-us/library/seykw6dt](http://msdn.microsoft.com/en-us/library/seykw6dt)（请参阅 RemovePreviousVersions 属性）

[http://msdn.microsoft.com/en-us/library/y63fxdw6（RemovePreviousVersions](http://msdn.microsoft.com/en-us/library/y63fxdw6)属性的说明）

您可能还应该增加更改文件的版本号。

# javascript - 将 HTML 表格转换为 JavaScript 对象

> ID：11361381
> 
> 赞同：0
> 
> 时间：2012-07-06T11:32:33.493
> 
> 标签：javascript, jquery, json, javascript-objects

我正在尝试将 html 表数据转换成这样的东西： **[jsFiddle Demo](http://jsfiddle.net/Seefeld/y2gdq/7/)**

```
[{
    name: 'Week 1',
    data: [33.95, 40.68]},
{
    name: 'Week 2',
    data: [11.99, 16.66]},
{
    name: 'Week 3',
    data: [1.96, 0.93]},
{
    name: 'Week 4',
    data: [0, 1.21]}] 
```

**我正在使用的方法：**

```
var Consolelog = $('table tbody tr').map(function() {

    var $row = $(this);
    return {
        name: $row.find(':nth-child(1)').text(),
        data: $('td:not(:nth-child(1))', this).each( function(){

            $(this).text();

        })
    };

}).get();

console.log(Consolelog);
alert(Consolelog.toSource()); 
```

**但是，这给了我这样的东西：**

```
[{
    name: "Some Data 1 ",
    data: {
        length: 4,
        prevObject: {
            0: ({}),
            context: ({}),
            length: 1
        },
        context: ({}),
        selector: "td:not(:nth-child(1))",
        0: ({}),
        1: ({}),
        2: ({}),
        3: ({})
    }},
{
    name: "Some Data 1 ",
    data: {
        length: 4,
        prevObject: {
            0: ({}),
            context: ({}),
            length: 1
        },
        context: ({}),
        selector: "td:not(:nth-child(1))",
        0: ({}),
        1: ({}),
        2: ({}),
        3: ({})
    }}]​ 
```

**任何建议我做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:42:57.903

抱歉，我没有太多时间进行测试，但这可能是一种方法：

```
var Consolelog = $('table th:not(:nth-child(1))').map(function(i) {

    var $th = $(this);
    var $cel = $('td:nth-child('+(i+2)+')').each(function(){
                       $(this);
                });

    return {
        name: $th.text(),
        data: $cel.text().split('%').slice(0,-1)
    };
    //console.log(return);

}).get();

//console.log(Consolelog);
alert(Consolelog.toSource()); 
```

见更新[小提琴](http://jsfiddle.net/alex_ball/y2gdq/8/)

更新：

嗨，抱歉耽搁了，顺便说一下转换或确保数组值是数字，你可以试试这个：

```
var Consolelog = $('table th:not(:nth-child(1))').map(function(i) {

    var $th = $(this);
    /*var $cel = $('td:nth-child('+(i+2)+')').each(function(){
                       $(this);
                });*/
    var $cel = $.map(
        $('td:nth-child('+(i+2)+')').each(function(){
                       $(this);
        }).text().split('%').slice(0,-1), function(value){
            return parseFloat(value);
        });

    return {
        name: $th.text(),
        //data: $cel.text().split('%').slice(0,-1)
        data: $cel
    };
    //console.log(return);

}).get();

//console.log(Consolelog);
alert(Consolelog.toSource()); 
```

参见示例[小提琴](http://jsfiddle.net/alex_ball/y2gdq/9/)

# php - PHP通过带有特殊字符的xml读取链接

> ID：11361383
> 
> 赞同：0
> 
> 时间：2012-07-06T11:32:38.627
> 
> 标签：php, xml

我有一个 xml 文件，可通过用户输入链接的网页进行编辑。这看起来像

```
 <links>
    <link1 path="http://abc.def.com/abcd?id=2&ed=4" > </link1>
 <links> 
```

我通过 php 读取了这个 xml，然后添加了一个链接到这里的按钮。我目前正在做的是`str_replace('&', '&amp;',)`在 xml 字符串上使用 a ，然后`str_replace('&amp;', '&',)`在提取的路径上使用 a 。有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:11:46.023

您显示的不是 XML 文件。XML 文件不能包含未转义的 & 符号。

存储在 XML 中的 URL 应将 & 符号编码为`&amp;`. 当您读取 XML 文件时，XML 解析器将向您显示未转义的文本，即`&`. 当然，如果您尝试在没有进行适当的 XML 解析的情况下读取 XML 文件，那么您将一团糟，这是您应得的。

# openerp - OpenERP upgrade modules

> ID：11361387
> 
> 赞同：1
> 
> 时间：2012-07-06T11:32:53.600
> 
> 标签：openerp

I use the warehouse module, but when I want to update it, the system updates the purchasing module also.

can someone tell me why this happened even if that module does not depend on purchase module?

I don't think even if I'm not using purchase I should leave it installed? the real problem is I don't want that module in my application, but the system didn't let me remove it !

Thank you in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:06:53.413

Yes I agree with you that stock has no direct dependency on purchase but if you see closely you will find some bridge like, stock > product < purchase, Now point is when you update stock moudle it will update all child account and it's dependency also so stock is updating the product and here product is also in -u . when you see if some parent are being updated all child will also be marked to be updated, This process is chinning process. if you have depedeancy like A> B> C and D>B if you try to update the module D it will start series of chain like D, B, C, and base and many more child are affecte by this series of chain.

Hope you getting the point here.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:20:27.913

**purchase** depends on **stock**. So, when you update **stock**, **purchase** has to be updated too.

# php - 将配置文件读入 PHP

> ID：11361389
> 
> 赞同：0
> 
> 时间：2012-07-06T11:32:55.350
> 
> 标签：php

我有一个 PHP 文件，它将一些信息写入一个看起来有点像这样的配置文件......

```
#Date=01/2012
text1=hello
text2=goodbye 
```

ETC...

该文件被编写为一个 cfg 文件，供 perl 脚本使用，但我需要将该文件读回 PHP，以便每次都可以对其进行编辑，以便 perl 脚本再次使用。

如何才能做到这一点？

我之前将它写入 .csv 文件并重新读入，但后来被告知这不是所需的，它必须在 cfg 文件中，所以将信息重新添加到读取 .csv 文件时的 PHP 脚本。

我认为需要的是不读取 text1 和 text2 变量，而是读取 equals 之后的内容，以便将 hello 和 goodbye 字符串读回 PHP。

另一件事是，当用户添加更多信息以说 text1 时，它将具有多个值，例如他们可以将 text1 更改为...

```
text1=hello,howareyou 
```

那么 , 需要是 PHP 脚本中的一个单独的实体，所以我猜我会使用 explode 函数来获取单独的数据。

这些数据将被读入一个表中，然后用户可以在其中编辑信息，以便在 perl 脚本再次运行时做好准备。

当信息被读入时，我的 HTML 将是这样的。

```
<table>
    <tr>
        <td>text 1</td>
        <td>hello</td>
        <td>howareyou</td>
    </tr>
    <tr>
        <td>text 2</td>
        <td>goodbye</td>
    </tr>
</table> 
```

我希望我已经明确了这一点，我真的很难理解如何做到这一点。因为它看起来不像从 .csv 读取那么容易

另外我不希望 PHP 执行脚本，我只需要将它读入 PHP，以便用户可以再次编辑信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:39:56.453

格式在哪里指定？也许您可以使用与您的示例类似的 .ini 文件格式。您可以[使用`parse_ini_file()`](http://php.net/function.parse-ini-file.php).ini 文件作为数组[读取。](http://php.net/function.parse-ini-file.php)您还可以对多个条目进行分组。请参阅链接的 PHP 文档页面中的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:41:16.390

尝试这个。您最终会得到一个整洁的关联数组 - 参数名称作为元素名称，参数值作为元素值。

```
$cfg_path = 'path/to/config.cfg';
if (file_exist($cfg_path)) {
    if (preg_match_all('/^(?!#)(.+)=(.*)$/m', file_get_contents($cfg_path), $cfg)) {
        $cfg = array_combine($cfg[1], $cfg[2]);
        foreach($cfg as $name => $val)
            echo $name.' = '.$val.'<br />';
    }
} 
```

# android - 如何在我的应用程序中添加第三个按钮

> ID：11361390
> 
> 赞同：3
> 
> 时间：2012-07-06T11:33:08.120
> 
> 标签：android, button, android-alertdialog

如何在我的应用程序中添加第三个按钮......我想将第三个按钮设置为“Listen”......我已经检查过了

```
.setNeutralButton 
```

但它不起作用....怎么可能？

```
public class MessageViewPage extends Activity {

ScrollView sv;
String nickname,body;
private LinearLayout mainLayout;
final Context context = this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.message_view_page);

    Bundle b = getIntent().getExtras();

    nickname= b.getString("nick");
    body=b.getString("body");

    System.out.println(nickname);
    System.out.println(body);

    mainLayout=(LinearLayout)findViewById(R.id.mainLayoutmess);

    mainLayout.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            System.out.println("***************in on click************");

            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                    context);

                // set title
                alertDialogBuilder.setTitle("Access");

                // set dialog message
                alertDialogBuilder
                    .setMessage("What's next?")
                    .setCancelable(false)
                    .setPositiveButton("Reply",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {

                            Intent i=new Intent(MessageViewPage.this,Reply.class);
                            startActivity(i);
                            finish();

                        }
                      })
                    .setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {

                            dialog.cancel();

                        }
                    });

                    // create alert dialog
                    AlertDialog alertDialog = alertDialogBuilder.create();

                    // show it
                    alertDialog.show();

 }
 });

}

} 
```

使用 .setNeutralButton........有错误

![在此处输入图像描述](../Images/92ea228c8d2ffa78df1d760bac794a82.png)

没有 .setNeutralButton....没有错误

![在此处输入图像描述](../Images/57b3055657a73be8475c7b058b624de3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:36:11.807

只需在 setNegativeButton 的 .add 之后删除**分号（;）**`OnClickListener`：

```
alertDialogBuilder
                    .setMessage("What's next?")
                    .setCancelable(false)
                    .setPositiveButton("Reply",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {

                            Intent i=new Intent(MessageViewPage.this,Reply.class);
                            startActivity(i);
                            finish();

                        }
                      })
                    .setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {

                            dialog.cancel();

                        }
                    }) // ; remove this semicolon here
 .setNeutralButton("Neutral",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {

                            dialog.cancel();

                        }
                    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:38:25.987

去掉分号**；**在 setNegativeButton 之后。然后您可以添加中性按钮。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T11:39:52.240

尝试这个....

```
 AlertDialog alert=new AlertDialog.Builder(adminpage.this).create(); 
```

现在尝试设置按钮，您将获得三个按钮

# php - 在 php 中解析扭曲的 HTML 页面

> ID：11361394
> 
> 赞同：1
> 
> 时间：2012-07-06T11:33:17.830
> 
> 标签：php, html, ajax, html-parsing

我在 php 文件中调用 AJAX url 并通过 CURL 获取其内容。但是我得到的 HTML 充满了 \r,\t 和 \n.Divs 也被扭曲了。我该如何处理。这是完整 HTML 文本的一小部分。

```
<html>
<head>
<title></title>
</head>
<body>
id=
"\&quot;moreCount\&quot;">491-500</span>\r\n\r\n\r\n\t
<div id="\&quot;propSearchMainWrap\&quot;">\r\n\t\t
<div class="\&quot;propSearchMainContent\&quot;">\r\n\t\t\t
<div>\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t
<div class="\&quot;searchDtlLeftN\&quot;" style="\&quot;width:">
\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t<input type=
"\'checkbox\'" name=
"\'checkbox10374276\'\r\n\t\t\t\t\t\tid=\'checkbox10374276\'\r\n\t\t\t\t\t\tonmouseout=\&quot;hideToolTipCheckboxCount(\'tool_tip10374276\');\&quot;\r\n\t\t\t\t\t\tonmouseover=\&quot;showToolTipCheckboxCount(\'tool_tip10374276\',\'Property\');\&quot;">\r\n\t\t\t\t\t
<div id="\'tool_tip10374276\'\r\n\t\t\t\t\t\tstyle=\'display:"
width:="" position:="" z-index:="" padding:=""></div>
\r\n\t\t\t\t\r\n\t\t\t\t <b><a target="\&quot;_blank\&quot;" href=
"/&quot;/propertyDetails/5-BHK-3000-Sq-ft-Residential-House-FOR-Sale-Cookes-Town-in-Bangalore&amp;id=Q8oDBbaV2WFzpSvf+uAgZw==/&quot;">
5 BHK Residential House for Sale in Cookes
Town</a>\r\n\t\t\t\t</b>\r\n\t\t\t</div>
\r\n\t\t\t
<!-- added by narendra -->\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t
<div style="\&quot;width:"></div>
\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t
<!-- added by narendra -->\r\n\t\t</div>
\r\n\t\t
<div>\r\n\t\t\t<!--left panel start-->\r\n\t\t\t
<div class="\&quot;searchDetailPanelLft\&quot;">\r\n\r\n\t\t\t\t
<div class="\&quot;searchDetailSubBox1\&quot;">\r\n\t\t\t\t\t
<!--content start-->\r\n\t\t\t\t\t
<div class="\&quot;search_packageImg\&quot;">
\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<img alt="\&quot;Premium\&quot;"
title=
"\&quot;Premium\&quot;\r\n\t\t\t\t\t\t\t\tsrc=\&quot;/images/premium-img.gif\&quot;">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:42:26.000

\r、\t 和 \n 可以用 preg_replace 删除。

也就是说，您仍然会有奇怪的分配，例如 width:= ... 这是 HTML Pascal 吗？

```
 $html = // awful stuff

    // Remove quoted \r, \t and \n
    $html = preg_replace("#\\[rnt]#ms", '', $html);

    // Remove double quotation marks, apparently spurious
    $html = preg_replace('#["]#ms', '', $html);

    // Remove extra escapes
    $html = stripslashes($html);

    // Convert (apparently) original marks back to normal
    $html = HTML_Entity_Decode($html); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:42:33.050

您应该尝试用假定的字符替换所有出现的 \x 。那么 DOMDocument 的 loadHTML 就可以做到这一点。

```
$html = strtr($html, array('\\\\' => '\\', '\\r' => "\r", '\\n' => "\n", '\\t' => "\t", '\\' => ''));
$doc = new DOMDocument();
$doc->loadHTML($html);
$html = $doc->saveHTML(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:53:30.940

使用 stripcslashes() 方法轻松解决它。像魅力一样工作。

# sql - 如何在 PL/SQL 中的一行中打印所有数据

> ID：11361398
> 
> 赞同：2
> 
> 时间：2012-07-06T11:33:36.363
> 
> 标签：sql, oracle, plsql

我正在练习 pl/sql 程序。我有一个程序，即：示例：

```
begin
    for i in 1..10
    loop
        dbms_output.put_line(i);
    end loop;
end; 
```

输出是这样的：

```
1
2
3
.
.
.
10 
```

但是我必须在一行中打印所有数字，即（`123.....10`）我怎么能存档呢，我会得到这样的输出：`123...10`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T11:36:22.087

使用[`DBMS_OUTPUT.put`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_output.htm#BABGHBIA)：

```
SQL> begin
  2     for i in 1..10 loop
  3        dbms_output.put(i);
  4     end loop;
  5     dbms_output.new_line;
  6  end;
  7  /
12345678910

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:36:51.440

使用 .put(i) 而不是 put_line

# python - python素数生成器的问题

> ID：11361403
> 
> 赞同：1
> 
> 时间：2012-07-06T11:33:48.383
> 
> 标签：python

对不起，如果这很明显，但我对 python 编程很陌生，为什么这个程序不会生成一个素数列表，它们中的大多数似乎是素数，但有些不是。

```
#!/usr/bin/env python
print ("Prime Numbers")
Number = 2
while True:
    Test = 2
    while Test < Number:
        if Number % Test == 0:
            Number = Number + 1
        else:
            Test = Test + 1
    print (str(Number) + " is a prime number!")
    Number = Number + 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:35:16.553

这个模板应该可以帮助你找到质数：

```
 if Number % Test == 0:
        Number = Number + 1
        Test = 2 # you'll need to reset Test here
    else: 
```

# r - 与 qplot 一致的图例颜色

> ID：11361404
> 
> 赞同：5
> 
> 时间：2012-07-06T11:33:50.750
> 
> 标签：r, ggplot2

考虑以下数据框：

```
x = read.table(text = 'Lo Re Pe
1 T 33
1 F 22
1 H 11
2 T 22
2 F 22', header = TRUE) 
```

和下面的情节：

```
qplot(factor(Lo), data=x, geom='bar', fill=Re, weight=Pe, 
      xlab='L', main='Title', ylab='Pe') 
```

现在考虑这个数据框：

```
x <- read.table(text = 'Lo Re Pe
1 D 33
1 K 22
2 D 22
2 K 22', header=TRUE) 
```

用同样的`qplot`说法。

分配给每个`Re`值的颜色在图之间不一致，因此很难直接比较图。

例如，如何指定该`Re`值`T`应始终为“红色”，并且该`Re`值`F`应始终为“蓝色”，例如，无论数据框的内容如何，​​该`qplot`命令始终为每个值使用**一致的颜色？**`Re`的值是有限且已知的`Re`，因此我可以全部指定。

当数据框包含值时，我尝试了以下操作`T`，`F`并且`H`：

```
qplot(factor(Lo), data=x, geom='bar', fill=Re, weight=Pe, 
      xlab='Loci', main='Title', ylab='Pe', 
      scale_fill_manual(values=c("Blue","Red","Green"),labels=c("T","F","H"))) 
```

但 R 报告关于不正确长度的错误并且不生成绘图。

理想情况下，该解决方案允许我为 的所有可能值指定颜色`Re`，即使所有这些可能都不存在于数据框中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T14:33:10.763

这完全可以使用`ggplot`. 不过，我将建议您放弃`qplot`，并改用`ggplot()`. 从长远来看，它不会花费您任何费用并且会更方便，因为它更适合做“复杂”的事情。

让我们从您的两个数据集开始：

```
x1 = read.table(text = 'Lo Re Pe
1 T 33
1 F 22
1 H 11
2 T 22
2 F 22', header = TRUE)

x2 <- read.table(text = 'Lo Re Pe
1 D 33
1 K 22
2 D 22
2 K 22', header=TRUE) 
```

现在这是你的第一个情节，但翻译成`ggplot()`：

```
p <- ggplot(x1,aes(x = factor(Lo))) + 
        geom_bar(aes(fill = Re,weight = Pe)) + 
        labs(x = 'L',y = 'Pe') + 
        opts(title = 'Title') 
```

为了使绘图中的颜色保持一致，并防止未使用的颜色出现在图例中，我们将简单地创建一个主颜色键，并仅将所需的子集传递给我们的比例：

```
color_key <- c('red','blue','green','black','orange')
#If Re is a character variable:
names(color_key) <- unique(c(x1$Re,x2$Re))
#If Re is a factor:
names(color_key) <- unique(c(as.character(x1$Re),as.character(x2$Re))) 
```

（您也可以使用该`levels`函数执行类似的操作，但我想防止包含未出现在数据集中的级别。）

显然，您可以选择任何您喜欢的颜色。现在我可以通过只传递与以下相关的部分来自定义`fill`我们的情节的比例：`p``color_key``scale_fill_manual`

```
p + scale_fill_manual(values = color_key[names(color_key) %in% x1$Re]) 
```

![在此处输入图像描述](../Images/4c2c232683db77af140660819e00680d.png)

此外，如果您的所有情节都确实具有相同的结构，我们甚至不需要`ggplot`一遍又一遍地复制调用。我们可以简单地将我们的图应用`p`到一个新的数据集：

```
p1 <- p %+% x2 
```

然后`fill`以相同的方式添加比例：

```
p1 + scale_fill_manual(values = color_key[names(color_key) %in% x2$Re]) 
```

![在此处输入图像描述](../Images/b68cf85694818868b08a0507d5ba7dfa.png)

最后，让我们自己混合搭配一个新的数据集：

```
x3 <- rbind(x1[1:2,],x2[3:4,]) 
```

同样的过程再次起作用：

```
p3 <- p %+% x3
p3 + scale_fill_manual(values = color_key[names(color_key) %in% x3$Re]) 
```

![在此处输入图像描述](../Images/f7b9ddabea3eb6c7b58e39c7265c1037.png)

# grails - 将 Log4J appender 注入 Grails 应用程序

> ID：11361414
> 
> 赞同：5
> 
> 时间：2012-07-06T11:34:20.030
> 
> 标签：grails, log4j

我正在制作一个简单的 grails 插件，它将作为我们公司各种项目日志记录的中央配置。一般的想法是您只需将插件添加到您的项目中，它就会将各种附加程序注入到根记录器中。我首先使用 Graylog2 appender 进行测试（如果我只是在 Config.groovy 中配置它，它就可以工作）。这是我尝试过的代码（在 BootStrap.groovy [在启动时执行]的 init() 中）：

```
 def rL = Logger.rootLogger
    def layout = new PatternLayout(conversionPattern: '%d{dd-MM-yyyy HH:mm:ss,SSS} %5p %c{1} - %m%n')

    Appender appender = new org.graylog2.log.GelfAppender(
            name:"gelf",
            graylogHost:"graylog2.ourcompany.com",
            extractStacktrace: true,
            addExtendedInformation: true,
            facility: "gelf-java",
            threshold: org.apache.log4j.Level.INFO,
            additionalFields: "{'runtime': 'grails', 'environment': 'dev', 'transport': 'gelf-java'}",
            layout: layout
    )
    rL.addAppender(appender) 
```

appender 已正确实例化并附加到根记录器，这里是*rL.getAllAppenders().toList().each { print it.toString() }*的输出：

```
org.codehaus.groovy.grails.plugins.log4j.appenders.GrailsConsoleAppender@7a054197
org.graylog2.log.GelfAppender@6f155f16 
```

因此，尽管 Appender 被添加到根记录器，并且错误级别的消息被写入日志（并显示到默认控制台记录器），但它根本不会将消息触发到 Graylog2（我已经使用 Wireshark 检查过验证这一点）。如果我只是在另一个项目的 Config.groovy 中设置值，这很好用；但显然这违背了这个插件的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:16:50.737

`activateOptions()`在将附加程序添加到根记录器之前，您需要调用它。当您配置附加程序时，Grails 会为您执行此操作，`Config.groovy`这就是它在那里工作的原因。

# jquery - 使用 jquery.cookie.js 制作背景图片

> ID：11361415
> 
> 赞同：0
> 
> 时间：2012-07-06T11:34:32.580
> 
> 标签：jquery, cookies, slider

此时我有一个背景图像滑块，用户可以在其中单击一个按钮并在查看站点时选择七个图像中的一个作为背景，当然问题是当他们单击时会被扔到不同的页面它恢复为默认图像。有没有办法让 jquery.cookie.js 解决这个问题？以下是我的尝试。

有效的 jQuery 部分：

```
 $(function(){
                $('.btn a').parents('.btn').click(function(){
                    var img = $(this).attr('data-bg-img'),
                    afterFadeIn = function() {
                        $('body').css('background-image', 'url(' + img + ')');
                        $('bg-style').css('opacity', 0);
                    };
                    $('#bg-style')
                    .css({'background-image': 'url(' + img + ')', 'opacity': 0})
                    .animate({ 'opacity' : 1 }, 500, afterFadeIn);
                });
            }); 
```

没有的 jQuery 部分： $(function() {

```
 if($.cookie("html_img")) {
                    $('html').css("background-image", $.cookie("html_img"));
                }

                $('.btn a').click(function() {

                    var image = 'imgs/someimage.jpg';
                    // var image = $(this).attr('src');

                    $('html').css("background-image", image);

                    $.cookie("html_img", image, {expires:7});

                    return false;

                });

            }); 
```

的HTML：

```
 <div id="slideshow" class="bgSlider">
                <div class="btn btn1" data-bg-img ="<?php bloginfo('stylesheet_directory'); ?>/images/k2-in-skies.jpg"><a href="#">Button 1</a></div>
                <div class="btn btn2" data-bg-img ="<?php bloginfo('stylesheet_directory'); ?>/images/k2.jpg" class="bgimage"><a href="#">Button 2</a></div>
                <div class="btn btn3" data-bg-img ="<?php bloginfo('stylesheet_directory'); ?>/images/kunhar-river.jpg"><a href="#">Button 3</a></div>
                <div class="btn btn4" data-bg-img ="<?php bloginfo('stylesheet_directory'); ?>/images/mitre-peak-baltoro.jpg"><a href="#">Button 4</a></div>
                <div class="btn btn5" data-bg-img ="<?php bloginfo('stylesheet_directory'); ?>/images/musa-ka-musalla.jpg"><a href="#">Button 5</a></div>
                <div class="btn btn6" data-bg-img ="<?php bloginfo('stylesheet_directory'); ?>/images/nanga-parbat.jpg"><a href="#">Button 6</a></div>
                <div class="btn btn7" data-bg-img ="<?php bloginfo('stylesheet_directory'); ?>/images/naran-valley.jpg"><a href="#">Button 7</a></div>
                <div class="clearfix"></div>
            </div> 
```

CSS：

```
 #bg-style { width:100%; height: 700px; position:absolute; }

            .btncontain { width:80%; margin: 0 auto; position:absolute; }

            .btn a { width: 150px; height: 70px; background: yellow; float: left; margin: 0 30px 100px 30px; }

            #bg-style {
                background: url(../images/k2-in-skies.jpg) no-repeat center top;
            } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:18:37.727

这很方便，我在 cookie 代码的第一行设置了一个断点，然后我得到了这个？

```
 function (key, value, options) {

                    // key and at least value given, set cookie...
                    if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null || value === undefined)) {
                        options = $.extend({}, options);

                        if (value === null || value === undefined) {
                            options.expires = -1;
                        }

                        if (typeof options.expires === 'number') {
                            var days = options.expires, t = options.expires = new Date();
                            t.setDate(t.getDate() + days);
                        }

                        value = String(value);

                        return (document.cookie = [
                            encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),
                            options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
                            options.path ? '; path=' + options.path : '',
                            options.domain ? '; domain=' + options.domain : '',
                            options.secure ? '; secure' : ''
                        ].join(''));
                    }

                    // key and possibly options given, get cookie...
                    options = value || {};
                    var decode = options.raw ? function(s) { return s; } : decodeURIComponent;

                    var pairs = document.cookie.split('; ');
                    for (var i = 0, pair; pair = pairs[i] && pairs[i].split('='); i++) {
                        if (decode(pair[0]) === key) return decode(pair[1] || ''); // IE saves cookies with empty string as "c; ", e.g. without "=" as opposed to EOMB, thus pair[1] may be undefined
                    }
                    return null;
                } 
```

# mercurial - 对于 Bamboo 持续集成：我们是否应该将我们的 SQL 代码存储库设置为代码的 Mercurial 子存 储库？

> ID：11361416
> 
> 赞同：1
> 
> 时间：2012-07-06T11:34:34.947
> 
> 标签：mercurial, bamboo, subrepos

我们使用 Bamboo 作为部署到多个环境的持续集成构建服务器。我正在通过 Bamboo NANT 脚本使用 Red Gate SQL Compare 和 Data Compare 集成 SQL 代码部署。我们的 TEST 环境是来自我们 repos 的“TEST”分支的代码，而 STAGE 环境是来自我们 repos 的“default”分支的代码。

我们的 SQL 和代码库分为单独的 Mercurial 存储库：(Project_SQL) 和 (Project)。我们对每个 repo 的承诺方式是不同的。在 Project_SQL 存储库中，开发是线性的：每个开发人员从 TEST 分支分支出来，创建一个 dev 分支 (Branch_1) 并处理他们的更改，提交到 dev 分支，然后合并 BACK 到 TEST 分支。我们只使用 TEST 分支的最新测试和工作提示从 TEST 的头部移动到默认分支。示例：如果 0、1、2、3 是提交，并且 0、1 和 3 被测试并通过。默认情况下只有 0 和 1。在项目存储库中，从默认推送到生产的最后一个标记版本的开发人员分支并创建一个开发分支（Branch_2），处理他们的更改，提交到开发分支，并将他们的更改合并到测试中。

要求是在 Bamboo 轮询间隔内，如果有代码提交 (Project)，则应更新 SQL 存储库 (Project_SQL)，并在编译代码和执行测试之前部署任何 SQL 更改。如果在轮询间隔只有 SQL 更改，则部署 SQL 并执行代码中的测试。

有了以下流程和要求，我的阅读建议我们可以使用 SQL 存储库作为代码的子存储库。或者我们可以有单独的计划，在 Bamboo 中设置依赖项。

推荐的方法是什么还是有更好的方法？

# c# - 插入行后使用 NHibernate 将行插入数据库表而不调用 scope_identity

> ID：11361426
> 
> 赞同：3
> 
> 时间：2012-07-06T11:35:05.583
> 
> 标签：c#, nhibernate, fluent-nhibernate

我正在尝试使用 NHibernate 将大量数据插入到数据库中，这样做的速度非常慢。我已经阅读了它，到处都建议让 NH 设置行的标识，以便它可以批处理并且不需要在插入后调用 SCOPE_IDENTITY，但是，它是一个带有旧数据库的棕地应用程序，所以我可以t 让 NHibernate 控制行的标识。

有什么方法可以告诉 NH 不选择范围标识，而只将行插入数据库？我现在不需要它知道他们的身份，所以插入后行是否知道他们的身份没有什么区别，但我猜我不能告诉 Nhibernate 不要在这个案例？

如果有任何后果，请使用 Fluent NH。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:40:01.477

NH 需要身份来管理缓存中的实体以识别它们。所以我认为没有办法解决。

您的性能问题不一定是由身份引起的。可能是您刷新会话太多次。尝试关闭自动刷新以验证它或使用 StatelessSession。

ORM 在大规模操作中不是很好。您应该考虑使用更底层的东西（如 SQL）。

# http - 来自 golang 的经过身份验证的 http 客户端请求

> ID：11361431
> 
> 赞同：33
> 
> 时间：2012-07-06T11:35:20.090
> 
> 标签：http, go

我有以下代码：

```
client := &http.Client{}

/* Authenticate */
req, err := http.NewRequest("GET", "http://164.99.113.32/Authenticate", nil)
req.SetBasicAuth("<username>","<password>")
resp, err := client.Do(req)
if err != nil {
    fmt.Printf("Error : %s", err)
}

/* Get Details */
req.URL, _ = url.Parse("http://164.99.113.32/Details")
resp, err = client.Do(req)
if err != nil {
    fmt.Printf("Error : %s", err)
} 
```

现在，第二个 http 调用因 401 access-denied 错误而失败。一个不同的 REST 客户端（一个 firefox 插件）正确地从服务器获取详细信息，所以我知道服务器端没有任何问题。我是否需要传递某种会话字符串或我们在上一个请求中得到的东西？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-06T13:55:17.887

好的。我已经解决了这个问题。我只需要创建一个饼干罐。

我很惊讶 golang http req/client 类默认不处理这件事。

我必须使用的代码是：

```
type myjar struct {
    jar map[string] []*http.Cookie
}

func (p* myjar) SetCookies(u *url.URL, cookies []*http.Cookie) {
    fmt.Printf("The URL is : %s\n", u.String())
    fmt.Printf("The cookie being set is : %s\n", cookies)
    p.jar [u.Host] = cookies
}

func (p *myjar) Cookies(u *url.URL) []*http.Cookie {
    fmt.Printf("The URL is : %s\n", u.String())
    fmt.Printf("Cookie being returned is : %s\n", p.jar[u.Host])
    return p.jar[u.Host]
} 
```

然后主要是：

```
 jar := &myjar{}
    jar.jar = make(map[string] []*http.Cookie)
    client.Jar = jar 
```

作品。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-06T13:37:49.517

使用 HTTP 基本身份验证，每个请求都需要凭据。尝试复制

```
req.SetBasicAuth("<username>", "<password>") 
```

在第二个 client.Do(req) 之前的行。

Firefox 插件获取详细信息的原因是浏览器将缓存 HTTP 基本身份验证令牌以供后续使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-21T02:23:08.050

有一个新的官方图书馆，也许这很有帮助。

[http://golang.org/pkg/net/http/cookiejar/](http://golang.org/pkg/net/http/cookiejar/)

示例： [Golang：如何使用 cookie 跟踪位置](https://stackoverflow.com/questions/18414212/golang-how-to-follow-location-with-cookie)

# iphone - 'UITableView' 没有 @interface 声明选择器 'initWithStyle:reuseIdentifiers

> ID：11361434
> 
> 赞同：2
> 
> 时间：2012-07-06T11:35:26.973
> 
> 标签：iphone, objective-c, ios, uitableview

我是 iOS 开发的新手，我正在为我的 UITableView 问题寻求帮助。

好吧，我正在研究有关 UITableView 代码的所有内容，并且在开发过程中，当我尝试重用标识符时（如果界面上没有要创建的单元格），XCode 会显示以下消息：

“'UITableView' 没有可见的@interface 声明选择器'initWithStyle:reuseIdentifier:”

有代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *identifier = @"Cell";

    UITableView *cell = [tableView dequeueReusableCellWithIdentifier:identifier];

    if(cell ==nil)
    {
        cell = [[[UITableView alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier] autorelease];
    } 
```

有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:37:57.360

```
UITableView *cell = [tableView dequeueReusableCellWithIdentifier:identifier]; 
```

应该

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier]; 
```

你应该分配一个`UITableViewCell` 不像`UITableView` 你在这里所做的那样。

```
 //should be **UITableViewCell**
      cell = [[[UITableView alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier] autorelease]; 
```

并且不要忘记稍后归还。

```
return cell; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:37:57.043

错误消息说明了一切。您在错误的类上调用该方法...您只需要设置类并分配 a`UITableViewCell`而不是`UITableView`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *identifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];

    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier] autorelease];
    }

    // ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:40:33.380

使用以下代码而不是您的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

     static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell=(UITableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell==nil) {
            cell=[[UITableViewCell alloc]initWithFrame:CGRectZero];
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T12:29:54.030

拯救了我的一天。用这段代码替换了我的代码 - 评论了 - 并且它工作了。不知道为什么！但谢谢。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
//  static NSString *identifier = @"cell";
//  UITableViewCell *cell = [tableView dequeueReusableCellWithIndentifier:@"cell"];

        static NSString *CellIdentifier = @"cell";
        UITableViewCell *cell=(UITableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil ) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    return cell;
} 
```

# ios5 - 在 iOS 5 中创建自定义照片浏览器，如照片应用程序

> ID：11361436
> 
> 赞同：0
> 
> 时间：2012-07-06T11:35:32.563
> 
> 标签：ios5, uiscrollview, vertical-scrolling, photoswipe

我想在 iOS 5 中创建自定义照片浏览器，如照片应用程序。所需的功能是 1）用户可以向左或向右滑动以转到上一张或下一张照片 2）用户可以垂直滚动因为我的图像高度很大（由几个元素组成。用户可以看到全尺寸照片）

调整照片的高度不是一种选择。

我可以使用滚动视图，但如何允许用户垂直滚动并左右滑动？谁能告诉我如何创建它？我只需要 iOS 5+。感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:36:22.163

你看过[这个链接](https://github.com/mwaterfall/MWPhotoBrowser)中的那个吗？但希望它不支持垂直滚动。如果你修改它会更好。

# mysql - 将数据库结构从 MySQL 迁移到 MongoDB

> ID：11361439
> 
> 赞同：1
> 
> 时间：2012-07-06T11:35:36.737
> 
> 标签：mysql, mongodb, join, nosql

我正在将我的应用程序数据库从 MySQL 迁移到 NoSQL(MongoDB)。但是，我对如何构建我的 MongoDB 有点困惑。

在我当前的 MySQL 设置中，我有两张表，一张用于用户，一张用于日历。每个用户和日历都有一个唯一的 ID。每个用户条目都包含与该用户关联的日历 ID 的列表。每个日历条目还包含创建它的用户的 ID。

我面临的问题是我有两种情况：对于登录控制台，我必须快速向用户显示他/她创建的所有日历；对于前端网站，我需要显示所有可用的日历及其作者。

在 MySQL 中，我会使用 JOIN 快速查询这些数据。如何在 MongoDB（或任何 NoSQL 数据库）中实现相同的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:41:32.920

你几乎得出了结论。只有两个选项没有连接。

1.  非规范化（存储嵌入在用户文档中的日历）
2.  进行单独的查询（首先加载用户，然后是他的日历）

两种方法都有其优点和缺点，已经讨论了很多次（尝试谷歌搜索“mongodb embed or reference”）

简而言之：嵌入让您更快地读取，引用为您提供更丰富的查询和更轻松/更快的写入。

# php - “加载更多” sql 函数未加载正确的产品

> ID：11361442
> 
> 赞同：2
> 
> 时间：2012-07-06T11:35:59.200
> 
> 标签：php, mysql, codeigniter, model, data-access-layer

我正在 CodeIgniter 中为电子商务网站创建一个 CMS，用户可以在其中搜索产品标题、描述或 SKU，它将显示前 20 个结果。然后有一个“更多...”按钮，可以加载接下来的 20 个产品。但是，我无法获取“更多...”的查询以输出相同数量的结果。这是我的模型中的两个函数：

```
public function searchProducts($searchText)
{

    $this->db->select("prod_id, prod_sku, prod_title, prod_desc, prod_main_image");
    $this->db->where("prod_sku LIKE '%{$searchText}%'");
    $this->db->or_where("prod_title LIKE '%{$searchText}%'");
    $this->db->or_where("prod_desc LIKE '%{$searchText}%'");
    $this->db->order_by("prod_id", "desc");
    $query = $this->db->get("products", 20);

    return $this->checkSalesProducts($query->result());

}

public function loadMoreSearchProducts($searchText, $id)
{

    $this->db->select("prod_id, prod_sku, prod_title, prod_desc, prod_main_image");
    $this->db->where("(prod_sku LIKE '%{$searchText}%' OR prod_title LIKE '%{$searchText}%' OR prod_desc LIKE '%{$searchText}%') AND `prod_id` < {$id}");
    $this->db->order_by("prod_id", "desc");
    $query = $this->db->get("products", 20);

    return $this->checkSalesProducts($query->result());

} 
```

在加载更多功能中，ajax 调用发送显示的最后一个产品的 ID，以便我可以对产品 ID 使用降序排序来获取接下来 20 个 ID 较低的产品。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:43:32.017

你想要接近“分页”这样的东西。首先只有一个功能。

```
public function searchProducts($searchText, $page = 0)
{
    $this->db->select("prod_id, prod_sku, prod_title, prod_desc, prod_main_image")
        ->where("prod_sku LIKE '%{$searchText}%'")
        ->or_where("prod_title LIKE '%{$searchText}%'")
        ->or_where("prod_desc LIKE '%{$searchText}%'")
        ->order_by("prod_id", "desc")
        ->limit(20, $page*20);

    $query = $this->db->get("products");

    return $this->checkSalesProducts($query->result());
} 
```

这样，您将在每个不同的页面上加载接下来的 20 个结果。拥有`$page = 0`将默认为前 20 个结果，使您的函数具有通用性和模块化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:41:37.477

如果我正确理解您的问题，您需要在`loadMoreSearchProducts()`

```
$query = $this->db->get("products", 20, 20); 
```

**编辑：**

试试这个：

```
$this->db->where("(prod_sku LIKE '%{$searchText}%' OR prod_title LIKE '%{$searchText}%' OR prod_desc LIKE '%{$searchText}%') AND `prod_id` > {$id}");
$this->db->order_by("prod_id", "asc"); 
```

# classloader - Jboss 7 中的 ClassLoader.getResourceAsStream 总是返回 null

> ID：11361445
> 
> 赞同：3
> 
> 时间：2012-07-06T11:36:16.870
> 
> 标签：classloader, jboss7.x

我有一个 my.sar 文件，定义的结构如下

我的.sar

|

|

|---------META-INF

| |

| |-----------------------jboss-deployment-structure.xml

| |-----------------------jboss-service.xml

在 jboss-deployment-structure.xml 中，我添加了 jboss-service.xml 下定义的 mbean 类所需的多个 jar 依赖项。

现在我的依赖类（由 jar -`JBOSS-7-HOME/modules`引用）使用以下代码引用 xml 文件，

```
Thread thread = Thread.currentThread();
ClassLoader contextClassLoader = thread.getContextClassLoader(); 
InputStream in = contextClassLoader.getResourceAsStream(<xmlFileName>); 
```

但是上面的代码无法找到 xml 文件......它总是返回`null`。

任何人都可以帮我找出放置所需 xml 文件的位置，以便班级可以找到这些 xml 文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T19:33:41.773

添加

```
<resource-root path="."/> 
```

到加载 XML 并将 XML 文件放入模块目录（module.xml 所在的位置）的模块的 module.xml。

# android - 从 apk 获取证书详细信息

> ID：11361452
> 
> 赞同：57
> 
> 时间：2012-07-06T11:37:02.413
> 
> 标签：android, certificate, signing

如何获取签署 apk 的证书的详细信息。我有一堆用不同证书签名的 apk，我正在尝试根据他们的证书对它们进行分组。

我可以使用 jarsigner 获取证书到期详细信息并完成我的任务，但我很好奇是否可以获得更多详细信息或提取公钥（我相信它存储在 META-INF/cert.RSA 但它不可读）

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-08T15:51:20.360

尝试以下操作：

```
openssl pkcs7 -inform DER -in CERT.RSA -noout -print_certs -text 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-08-13T11:55:59.527

`unzip -p Name-of-apk.apk META-INF/CERT.RSA | keytool -printcert`是我用的。

它产生诸如**所有者**、**发行**者、**序列号**、**有效通过**、**证书指纹**、**签名算法**和**版本**等信息。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2019-04-09T00:57:01.293

最简单的：

```
keytool -printcert -jarfile file.apk 
```

这也适用于 Android App Bundle (.aab)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2014-11-04T08:17:30.027

根据现有的答案，这是`openssl` *(unzip & pipe the cert 而不是定义`-infile`选项)*的即时使用的命令行：

```
unzip -p App.apk META-INF/CERT.RSA |openssl pkcs7 -inform DER -noout -print_certs -text 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2017-05-30T14:33:40.097

无需解压，您可以使用 Android SDK 中的 ApkSigner 和以下内容：

```
apksigner.jar verify --print-certs myApplication.apk 
```

# css - 只有一个元素的 CSS 空间入侵者

> ID：11361456
> 
> 赞同：2
> 
> 时间：2012-07-06T11:37:12.630
> 
> 标签：css, shape, css-shapes

我们可以用纯 CSS 制作很多形状，比如在[http://nicolasgallagher.com/pure-css-gui-icons/demo/](http://nicolasgallagher.com/pure-css-gui-icons/demo/)中，你总是写一个元素（这里`<li>`）。

但是如果我们想要更复杂一点的形状，比如[http://www.gentegeek.com/proyectos/html-css-space-invaders/](http://www.gentegeek.com/proyectos/html-css-space-invaders/)我们必须放很多`<div>`（参见源代码）。

我可以只用一个元素制作形状吗？如果是，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:29:01.550

## 是的！-- 使用 CSS3

***但是，在大多数情况下，这可能不值得付出努力。***本质上，只要有足够的深思熟虑和耐心，您几乎可以使用`linear-gradient`.

[这是一个小提琴](http://jsfiddle.net/PmhJD/25/)。（更新以允许图像区域本身的透明度）。

该代码是单个`div`元素（根据您的要求）。css 如下（我没有在这里发布所有的供应商前缀等价物）。

```
div {
    width: 240px;
    height: 160px;
    background-repeat: no-repeat;
    background-position: 0 0, 0 20px, 0 40px, 0 70px, 0 90px, 0 100px, 0 120px, 0 140px;
    background-size: 240px 20px, 240px 20px, 240px 30px, 240px 20px, 240px 10px, 240px 20px, 240px 20px, 240px 20px;
    background-image:
        linear-gradient(left, transparent 0px, transparent 40px, #000 41px, #000 60px, transparent 61px, transparent 180px, #000 181px, #000 200px, transparent 201px, transparent 240px ),
        linear-gradient(left, #000 0px, #000 20px, transparent 21px, transparent 60px, #000 61px, #000 80px, transparent 81px, transparent 160px, #000 161px, #000 180px, transparent 181px, transparent 220px, #000 221px, #000 240px),
        linear-gradient(left, #000 0px, #000 20px, transparent 21px, transparent 40px, #000 41px, #000 200px, transparent 201px, transparent 220px, #000 221px, #000 240px),
        linear-gradient(left, #000 0px, #000 60px, transparent 61px, transparent 80px, #000 81px, #000 160px, transparent 161px, transparent 180px, #000 181px, #000 240px),
        linear-gradient(left, #000, #000),
        linear-gradient(left, transparent 0px, transparent 20px, #000 21px, #000 220px, transparent 221px, transparent 240px ),
        linear-gradient(left, transparent 0px, transparent 40px, #000 41px, #000 60px, transparent 61px, transparent 180px, #000 181px, #000 200px, transparent 201px, transparent 240px ),
        linear-gradient(left, transparent 0px, transparent 20px, #000 21px, #000 40px, transparent 41px, transparent 200px, #000 201px, #000 220px, transparent 221px, transparent 240px );
} 
```

# javascript - 带有多个变量的 Javascript 简单数学

> ID：11361457
> 
> 赞同：-1
> 
> 时间：2012-07-06T11:37:18.257
> 
> 标签：javascript, math, variables

我希望有人可以在这里帮助我，我对 JS 不太了解，所以手头的任务已经不成比例了。

我有一个包含 3 个字段的 html 表单，其中 2 个应该是时间（例如 11:00、17:00、23:45 等），一个是简单的数字。

我一直在想办法

1.  获取两次（11:00 - 13:00）之间的差异
2.  将其转换为小数（这么多小时，例如：2、2.5、2.25 等）
3.  并乘以第三个变量 (17*2.5)

任何贡献，建议，链接将不胜感激。

宗戈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:50:15.470

要计算你的时间，你需要创建新的 Date 对象，然后用你的减法调用 setTime() 。

```
var dt = new Date('8/24/2009 11:00:00');
var newHour = dt.getHours() + 2;
dt.setTime(newHour, 0, 0, 0); 
```

或者

```
var dt1 = new Date('8/24/2009 11:00:00');
var dt2 = new Date('8/24/2009 13:00:00');

var h1 = dt1.getHours();
var h2 = dt2.getHours();

var h = dt2.getHours() - dt1.getHours(); 
```

要将分钟转换为十进制，只需除以 60。

```
var dt1 = new Date('8/24/2009 11:20:00');
var h = dt1.getHours();
var m = dt1.getMinutes();

h + (m/60) = 8.33 
```

因此，基本上，从真正的 Date 对象开始，然后使用 getHours() 和 getMinutes() 等内置方法进行数学/转换。一旦你有了真正的 Date 对象，应该是小菜一碟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:23:52.580

如果时间采用指定的格式，您可以使用以下方法获得以分钟为单位的差异：

```
function diffMins(t0, t1) {
  t0 = t0.split(':');
  t1 = t1.split(':');
  return t1[0]*60 + +t1[1] - t0[0]*60 - +t0[1]
} 
```

可以使用以下方法将其转换为十进制小时：

```
function minsToHours(mins) {
  return (mins/60).toFixed(2);
}

alert(minsToHours(diffMins('17:00', '23:45')));  // 6.75 
```

如果要获取 Date 对象的小数小时差，则：

```
function dateDiffInHours(d0, d1) {
  return ((d1 - d0) / 3.6e6).toFixed(2)
} 

alert( dateDiffInHours( new Date(2012,07,02,17), new Date(2012,07,02,23,45))); // 6.75 
```

请注意，将字符串传递给 Date 对象不是一个好主意。虽然大多数浏览器会解析一种或两种格式，但有些不会。ESCMA-262 ed 3 中没有指定标准格式，日期字符串的解析完全取决于实现。ES5 指定了对 ISO8601 扩展格式的修改（例如 2012-07-02T23:45:00Z），但是使用中的大部分浏览器不支持它。

所以**总是**自己解析字符串，或者根据 ECMAScript 规范使用参数调用构造函数。

# jquery - 当使用 jquery 调用 web 服务时响应为 0

> ID：11361463
> 
> 赞同：1
> 
> 时间：2012-07-06T11:37:56.377
> 
> 标签：jquery, web-services, cordova

我想在 phonegap 应用程序中使用 jquery 访问 Web 服务。但响应为 0

这是我的代码

```
 $(function () {

            $("#callAjax").click(function () {
                $.ajax({
                    type: "POST",
                    //url: "http://ws.geonames.org/postalCodeSearchJSON?postalcode=90210&maxRows=10",
                    url: " http://64.15.136.251:8080/onestatus/webservice/login?email=kk@kk.com&password=123456",
                    // data: ({ name: theName }),
                    data: ({}),
                    cache: false,
                    //dataType: "text",
                    dataType: "json",
                    success: onSuccess
                });

            });

            $("#resultLog").ajaxError(function (event, request, settings, exception) {
                $("#resultLog").html("Error Calling: " + settings.url + "<br />HTPP Code: " + request.status);
            });

            function onSuccess(data) {
                var result = $.parseJSON(data);
                var arrayObject = new Array();
                for (i = 0; i < result.user.length; i++) {
                    $('#employeeList').append('<li>' + result.user[i].response + '</li>');
                    $('#employeeList').append('<li>' + result.user[i].user_id + '</li>');
                    $('#employeeList').append('<li>' + result.user[i].session_id + '</li>');
                }
 }

        }); 
```

我的代码有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:03:35.070

请试试这个

```
$.ajax({
            type: "POSt",
            url: "http://64.15.136.251:8080/onestatus/webservice/login",
            data: "{email:'kk@kk.com',password:'123456'}",
            contentType: "application/json; Characterset=utf-8",
            dataType: "json",
            async: true,
            success: function (data) {
                alert(data);
            },
            error: function (request, status, error) {
                alert("Exception Handling :  \n" + request.responseText);

            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:33:16.733

你不需要解析你的URL返回的Json，它已经直接嵌入了，它会被浏览器正确处理。

此 {} 表示 JSON 中的对象。

这个：

```
 var result = $.parseJSON(data);
            var arrayObject = new Array();
            for (i = 0; i < result.user.length; i++) {
                $('#employeeList').append('<li>' + result.user[i].response + '</li>');
                $('#employeeList').append('<li>' + result.user[i].user_id + '</li>');
                $('#employeeList').append('<li>' + result.user[i].session_id + '</li>');
            } 
```

试试这样的解析：

```
var arrayObject = new Array();
            for (i = 0; i < data.user.length; i++) {
                $('#employeeList').append('<li>' + data.user[i].response + '</li>');
                $('#employeeList').append('<li>' + data.user[i].user_id + '</li>');
                $('#employeeList').append('<li>' + data.user[i].session_id + '</li>');
            } 
```

你也可以使用 jQuery 方式来做同样的事情：

```
 function onSuccess(data) {

            $.each(data.user, function(i, object) {
                $.each(object, function(property, value) {
                    alert(property + "=" + value);
                    $('#employeeList').append('<li>' + value+ '</li>');
                });
            });
        } 
```

# sql - 加权平均频率分布

> ID：11361468
> 
> 赞同：0
> 
> 时间：2012-07-06T11:38:04.600
> 
> 标签：sql, sqlite

我有以下格式的数据：

```
TYPE AMOUNT
Book   £2
Pen    £1
Book   £3 
```

我正在尝试将其输出为加权平均值：

```
TYPE Weighted Average
Book 0.833333333
Pen  0.166666667 
```

到目前为止，我有：

```
Select TYPE, AMOUNT/SUM(AMOUNT) 
FROM MyTable
Group by TYPE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:48:47.333

这应该会给你你想要的结果：

```
select type
    , cast(sum(amount) as decimal(10,5))/(select sum(amount) from t)
from t
group by type 
```

参见[Sql Fiddle 进行演示](http://sqlfiddle.com/#!3/38eed/17)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:02:42.967

这将起作用

```
DECLARE @Table1 TABLE (TYPE  VARCHAR(10),AMOUNT FLOAT)
INSERT INTO @Table1 SELECT  'Book',2 UNION ALL SELECT 'Pen',1 UNION ALL  SELECT 'Book',3

DECLARE @Total FLOAT
SELECT @Total=SUM(AMOUNT) FROM @Table1

SELECT TYPE,SUM(AMOUNT/@Total) FROM @Table1 GROUP BY TYPE 
```

# spring - 使用 UserDetailsS ervice 和 Hibernate 的 SpringSecurity 表单登录

> ID：11361471
> 
> 赞同：1
> 
> 时间：2012-07-06T11:38:22.010
> 
> 标签：spring, hibernate, spring-mvc, spring-security

我一直坚持使用 Spring Security 在 SpringMVC 中创建有用的表单登录。我是这方面的新手，也是Hibernate。我想创建简单的表单登录，它可以提供对我的 Web 应用程序的访问。

我使用 SpringSource Tool Suite 创建了我的项目并选择了 Spring Template Project。它使用 Maven，我还通过带有注释的 Hibernate 类生成了`hibernate.cfg.xml`. 在我的数据库 (HSQLDB) 中，我有三个表：users、roles 和 users_roles。第三个包含 user_id 和 role_id，因此它存储有关用户角色的信息。我已经通过 Hibernate 成功生成了类。

我已经开始编写实现 UserDetailsS​​ervice 的类。但我不知道如何正确地做到这一点。在`spring-security.xml`我已经定义了这样的bean：

```
<bean id="userDetailsService" class="hutter.pl.services.HutterUserDetailsService" /> 
```

我想通过 sha-256 和 saltSource 使用散列。

```
<bean class="org.springframework.security.authentication.dao.ReflectionSaltSource" id="saltSource">
    <property name="userPropertyToUse" value="username"/>
</bean>

<security:authentication-manager>   
    <security:authentication-provider user-service-ref="userDetailsService">
        <security:password-encoder hash="sha-256">
            <security:salt-source ref="saltSource" />
        </security:password-encoder> 
    </security:authentication-provider>
</security:authentication-manager> 
```

我是否应该使用此解决方案：[https](https://stackoverflow.com/a/1654488/845220) ://stackoverflow.com/a/1654488/845220 ？Hibernate 生成了如下类：RolesHome、Roles、Users、UsersHome、UsersRoles、UsersRolesHome。但我真的不知道如何使用这些 Hibernates 类来授权用户。

```
@Service("userDetailsService")
public class MyUserDetailsService implements UserDetailsService {

    @Transactional(readOnly = true)
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {   
        UsersHome usersHome = new UsersHome();
       //Users user = ...       
       //...            
       return null;     
    }   
} 
```

你能给我一些提示吗？

**编辑：** 我试图向类添加`public Users findByLogin(String login)`方法`UsersHome`。

```
 public Users findByLogin(String login) {
    log.debug("getting Users instance with login: " + login);
    try {
        Users instance = entityManager.find(Users.class, login);
        log.debug("get successful");
        return instance;
    } catch (RuntimeException re) {
        log.error("get failed", re);
        throw re;
    }
} 
```

我的 UserDetailsS​​ervice 的主体看起来像：

```
UsersHome usersHome = new UsersHome();
Users user = usersHome.findByLogin(username); 
```

但我有例外：

```
 ERROR: my.package.dao.UsersHome - get failed
 java.lang.NullPointerException
at my.package.dao.UsersHome.findByLogin(UsersHome.java:72)
at my.package.services.HutterUserDetailsService.loadUserByUsername(MyUserDetailsService.java:19) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T10:06:10.717

我认为您不需要自己实现 UserService 。您可以将 a`jdbc-user-service`与数据源一起使用：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
  <property name="driverClassName" value="com.mysql.jdbc.Driver" />
  <property name="url" value="jdbc:mysql://localhost:3306/mydb" />
  <property name="username" value="root" />
  <property name="password" value="password" />
</bean>

<authentication-manager>
  <authentication-provider>
    <jdbc-user-service data-source-ref="dataSource"
      users-by-username-query="select username,password, enabled from users where username=?"
      authorities-by-username-query="select u.username, ur.authority from users u, user_roles ur  where u.user_id = ur.user_id and u.username =?" 
    />
  </authentication-provider>
</authentication-manager> 
```

使用这些属性`users-by-username-query`，`users-by-username-query`您可以定义 spring security 应该用来从数据源接收用户和权限的查询。

`UserService`如果有必要实施你自己的

*   您想返回自定义的 UserDetails 对象（您可以稍后通过 访问`SecurityContextHolder`）
*   用户对象和权限的接收过于复杂和/或无法通过简单的查询来定义`jdbc-user-service`

UserDetailsS​​ervice 的可能实现如下所示：

```
@Service("userDetailsService")
public class MyUserDetailsService implements UserDetailsService {

  @PersistenceContext
  private EntityManager entityManager;

  @Transactional(readOnly = true)
  public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {   

    // this works only if username is the primary key of user
    // if thats not the case you have to create a query object to receive the user by username
    User user = entityManager.find(User.class, username); 

    List<GrantedAuthority> roles = .... // get roles for user, depends on your table structure

    if (user == null) {
      // user not found
      throw new UsernameNotFoundException();
    }
    return new MyUserDetails(user, roles);
  }

  private static class MyUserDetails implements UserDetails {
    private User user;
    private List<Role> roles;

    public MyUserDetails(Usere user, List<GrantedAuthority> roles) {
      this.user = user;
      this.roles = roles;
    }

    public Collection<GrantedAuthority> getAuthorities() {
      return roles;
    }

    public String getPassword() {
      return user.getPassword();
    }

    public String getUsername() {
      return user.getUsername();
    }

    // return true for the missing boolean methods..
  }
} 
```

（语法未选中）

对于第一次测试，它可以帮助禁用密码编码器并将未加密的密码存储在数据库中。这避免了由于密码编码器配置错误而导致您的身份验证不起作用的问题。运行用户服务后，您可以再次添加 PasswordEncoder 并将散列密码存储在数据库中。

希望能帮助到你 ：-）

# drupal - 我有一个使用有机组的 Drupal 站点，但我的“创建组”按钮只显示给管理员？

> ID：11361473
> 
> 赞同：0
> 
> 时间：2012-07-06T11:38:28.997
> 
> 标签：drupal, menu, permissions, organic-groups

我创建了一个 Drupal 站点并使用了有机组模块，设置了一个内容类型“组”并创建了一个链接到节点/添加/组的菜单链接，并将其放在主菜单中。但是我只有在以管理员用户身份登录时才能看到这一点。我希望所有经过身份验证的成员都能够创建组。我哪里出错了有什么想法吗？我完成了一些设置有机组的教程 - 这是权限设置吗？drupal 是否认为经过身份验证的用户无权创建组？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:18:23.580

如果您尚未将创建组的权限分配给 /admin/people/permissions/list 上的经过身份验证的用户，这几乎可以肯定是一个权限设置。

# objective-c - 自定义 NSTextField 中的 TAB 不会将焦点放在另一个控件上

> ID：11361475
> 
> 赞同：7
> 
> 时间：2012-07-06T11:38:33.757
> 
> 标签：objective-c, macos, nstextfield, nscontrol

我有一个自定义的 NSTextField，我在其中实现了一些圆角。

按“TAB”键不会转到窗口中的下一个 NSTextField（或可选控件）。奇怪的。为什么会这样做？当按下“TAB”时，我需要添加一些特别的东西来使应用程序能够通过其他控件吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T12:48:59.563

希望您以编程方式或在 Xcode 的界面构建器中设置 nextKeyView，如下所示：

![将 nextKeyView 从一个文本字段设置为下一个](../Images/840abd585648a431c45443adff012c13.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:56:21.380

好像是我的错。

`textDidBeginEditing:`我在and的自定义类中合并了委托调用`textDidEndEditing:`，以便在用户跳出字段时维护占位符文本，但我也没有调用相应的超类的方法。

包括调用`[super textDidEndEditing...]`和`[super textDidBeginEditing...]`标签后工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-21T21:43:29.467

我的解决方案不是一个很好的解决方案，但有效：

子类 NSTextView

```
#import <Cocoa/Cocoa.h>

@interface NMTextView : NSTextView

@end

#import "NMTextView.h"

@implementation NMTextView

#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"

- (void)keyDown:(NSEvent *)theEvent{

    switch ([theEvent keyCode]) {
        case 36:{
            if (([theEvent modifierFlags] & NSCommandKeyMask))
                //something for Ctrl+Enter
            else
                [super insertNewlineIgnoringFieldEditor:self];
        }break;

        case 48:
            //[self nextKeyView] = _NSClipViewOverhangView
            //[[self nextKeyView] nextKeyView] = NSTokenField (in my case)
            // or something different
            [[[self nextKeyView] nextKeyView] becomeFirstResponder];
            //also http://stackoverflow.com/a/3008622/1067147
        break;

        case 53:
            [_target performSelector:_actionEsc withObject:self];
        break;

        default:// allow NSTextView to handle everything else
            [super keyDown:theEvent];
        break;
    }
}

#pragma clang diagnostic pop

@end 
```

# database - 表达引擎网站被黑

> ID：11361476
> 
> 赞同：0
> 
> 时间：2012-07-06T11:38:35.990
> 
> 标签：database, expressionengine

一位老客户刚刚联系了我，他收到了来自 Google 的电子邮件，内容如下。

[尊敬的http://www.beyondthestreets.org.uk/](http://www.beyondthestreets.org.uk/)的所有者或网站管理员，

我们写信通知您，来自[http://www.beyondthestreets.org.uk/](http://www.beyondthestreets.org.uk/)的某些页面将在我们的搜索结果中被标记为可能受到损害。这是因为您的某些网页包含可能会损害我们搜索结果的质量和相关性的内容。这些页面似乎是由第三方创建或修改的，他们可能已经入侵了您网站的全部或部分内容。很多时候，他们会上传文件或修改现有文件，然后在我们的索引中显示为垃圾邮件。以下是一些表现出这种行为的示例 URL： · [http://beyondthestreets.org.uk/aligmnment-digital-systems-principles-and-applications-11th-e-digital-systems/](http://beyondthestreets.org.uk/aligmnment-digital-systems-principles-and-applications-11th-e-digital-systems/) ....

其余的不相关。我快速浏览了一下，他们没有编辑模板文件，但是当我查看源代码时，它看起来就像是这样。

它正在运行 1.6.7，所以它已经过时了。我没有数据库的副本。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:52:37.463

从 EE 的更改日志中，版本[1.7.0](http://expressionengine.com/legacy_docs/changelog.html#v170)：

> 修复了在某些情况下可能导致任意代码执行的安全问题。

并不是说这就是发生的事情，但它可能是。如果是这样，那么您就不能信任您的设置中的任何内容。不是模板，不是数据库，不是系统文件。

即使您的站点主机没有为自己的灾难恢复目的宣传该服务，您的站点主机也可能有备份，因此可能值得一试与他们联系。

如果您无法恢复，我认为唯一*真正*安全的做法是全新安装 EE，最新的 1.x（或 2.x，如果您希望进一步开发该站点）。然后，您需要在导入之前检查每个模板、博客条目、成员帐户和评论。

如果全新安装和导入超出了您的管理范围，那么您可能需要做一些取证，看看您是否可以确定哪些文件和数据库记录已被修改。您可以从查看文件的修改日期开始。但这些也可以伪造。因此，您可能还会考虑，至少对于在全新安装和当前状态之间运行文件差异的库存 EE 文件。

同样在前进的基础上，按照史蒂夫 B 所说的去做，并制定一个灾难恢复计划。对于数据库备份，我们使用 AutoMySQLbackup 来处理我们使用[rsnapshot](http://sourceforge.net/projects/automysqlbackup/)的文件，[它们](http://rsnapshot.org/)都是从 Cron 触发的，但是对于这类事情有很多选择，包括您的主机提供的服务。

# c# - C# 滚动自定义图形以减少闪烁的更好方法

> ID：11361477
> 
> 赞同：1
> 
> 时间：2012-07-06T11:38:41.043
> 
> 标签：c#, scroll, flicker, reduce, graphic

我正忙于开发一个 C# win 表单应用程序，它以分层结构绘制数据库结构的图形表示。

一切正常，只是滚动有问题。它有一个糟糕的闪烁问题。

我研究了以下内容：

[C#图形闪烁](https://stackoverflow.com/questions/2608909/c-sharp-graphics-flickering)

当你想刷新表面时打电话`Invalidate()`（帮助很大，但仍然有点滞后）

还要将`DoubleBuffered`属性设置为 True （这个问题我收到一条`ArgumentException`消息“参数无效。”。但我可以`DoubleBuffered`在我的主窗体上设置为 true）

**我的设计细节**

我有两个班级`Node`，`Link`他们都有`GraphicsPath`成员，他们都有`public void Draw(Graphics g)`自己画的方法。

我还有一个`StructureMap`覆盖该`protected override void OnPaint(PaintEventArgs e)`方法的用户控件调用，循环遍历每个`Node`调用它的绘图函数。循环很简单，因为父节点通过`Link`对象链接到子节点。我所要做的就是调用父节点的draw方法，它的所有子节点也被重绘。

我也在以同样的方式进行命中测试。

有没有更好的方法？为什么我不能`DoubleBuffered`在我的用户控件上设置为 true？

PS：这是我的第一篇文章，请告诉我我是怎么做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:44:26.137

DoubleBuffered ArgumentException 可能是由于您在某处处置图形对象而引起的。

另请参阅本文；[什么可能导致双缓冲杀死我的应用程序？](https://stackoverflow.com/questions/9134181/what-could-cause-double-buffering-to-kill-my-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:09:46.597

您闪烁的声音似乎是由绘制图像所需的处理量引起的。

缓解这种情况的一种方法是将您的模型绘制到屏幕外位图，然后您的绘画/滚动等只是将该位图绘制到屏幕上。

然后仅在您的模型更改时更新位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-28T09:10:36.680

使用位图作为背景图像将减少闪烁。也许像这样：

```
 private Bitmap _backBuffer;
 private void Form1_Paint(object sender, PaintEventArgs e)
 {
      if (_backBuffer == null)
        {
            _backBuffer = new Bitmap(Form1.Width, Form1.Height, PixelFormat.Format32bppRgb);
        }
        Graphics g = Graphics.FromImage(_backBuffer);

        g.SmoothingMode = SmoothingMode.HighQuality;

        drawSomething(g);

        //Copy the back buffer to the screen
        e.Graphics.DrawImageUnscaled(_backBuffer, 0, 0);
        Form1.BackgroundImage = _backBuffer;
 } 
```

# cakephp - 将条件绑定到 cakephp 中的模型

> ID：11361484
> 
> 赞同：0
> 
> 时间：2012-07-06T11:39:03.647
> 
> 标签：cakephp, model, cakephp-1.3

```
<?php
   class User extends AppModel {
var $name = 'User';
var $displayField = 'fname'; 
```

}

我怎样才能只从这个模型中返回“地位”为“1”的用户？我不希望从控制器执行此操作，而是从模型执行此操作。

[解决方案] 在模型中

```
function beforeFind($queryData){
    $queryData['conditions']['standing'] = 1;
    return $queryData;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:44:00.490

`beforeFind`最简单的方法是在回调中放入一些过滤条件。修改`$queryData`变量并将您的限制添加到`conditions`键应该可以做到。

从手动输入 - [http://book.cakephp.org/1.3/en/view/1049/beforeFind](http://book.cakephp.org/1.3/en/view/1049/beforeFind)

> 在任何与查找相关的操作之前调用。传递给此回调的 $queryData 包含有关当前查询的信息：条件、字段等。
> 
> 如果您不希望开始查找操作（可能基于与 $queryData 选项相关的决定），请返回 false。否则，返回可能修改过的 $queryData，或任何您想要传递给 find 及其对应项的内容。
> 
> 您可以使用此回调来限制基于用户角色的查找操作，或根据当前负载做出缓存决策。

# python - Python 应用程序设计模式 - 实例必须可用于大多数其他实例

> ID：11361488
> 
> 赞同：0
> 
> 时间：2012-07-06T11:39:26.407
> 
> 标签：python, design-patterns, singleton

我正在编写相当大而复杂的应用程序，所以我想坚持设计模式以保持代码质量。我对一个几乎所有其他实例都可用的实例有疑问。

假设我有 BusMonitor 实例（用于记录消息的类）和其他使用此实例记录操作的实例，例如 Reactor，它解析来自网络协议的传入帧并根据帧记录不同的消息。

我有一个创建 BusMonitor、Reactor 和更多实例的主要实例。现在我希望 Reactor 能够使用 BusMonitor 实例，我该如何根据设计模式来做到这一点？

将它设置为 Reactor 的变量对我来说似乎很难看： `self._reactor.set_busmonitor(self._busmonitor)`

对于每个需要访问 BusMonitor 的实例，我都会这样做。导入这个实例似乎更糟。

尽管我可以将 BusMonitor 设为 Singleton，但我的意思不是作为 Class，而是作为 Module，然后导入此模块，但我想将内容保留在类中以保持一致性。

什么方法是最好的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:39:56.763

> 我想把东西放在课堂上以保持一致性

为什么？为什么一致性很重要（除了成为一个小精灵）？

在有意义的地方使用类。在不使用的地方使用模块。Python 中的类实际上是用于封装数据和保留状态。如果您不做这些事情，请不要使用课程。否则，您就是在与语言作斗争。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:17:36.743

由于您已经有了层次结构，因此可以使用链来获取它。这不是[责任链模式](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)，但想法是相似的。

每个小部件都有一个`getbusmonitor`调用，它`return self.parent().getbusmonitor()`适用于除根部件之外的所有小部件。你也可以缓存结果..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:58:44.137

我找到了我认为的好方法。我用 BusMonitor 类制作了模块，在同一个模块中，在类定义之后，我制作了这个类的实例。现在我可以从项目中的任何地方导入它，并使用类和封装保持一致性。

# jquery - 使用 onclick 事件在骨干网中路由如何工作？

> ID：11361490
> 
> 赞同：0
> 
> 时间：2012-07-06T11:39:30.517
> 
> 标签：jquery, backbone.js

我有一个 DIV，其中包含一个带有用户名的标签。onclick 事件绑定到该 DIV。

我希望该用户的名称附加当前页面的 URL。

我的用户名在模型中。

我已经阅读了有关backbone.js 路由器的信息，也看到了一些示例，但这些示例使用A 标签进行路由，它使用其属性HREF 中的任何内容。

但我希望它通过 DIV 的点击来完成。

两天前我已经开始阅读backbone.js，所以我不知道如何实现这一点。我应该采取什么方法来完成它？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:24:10.407

您还可以使用路由器的[导航](http://documentcloud.github.com/backbone/#Router-navigate)方法在代码中手动导航，

```
$('#yourDiv').bind('click', function(e) {
 yourRouter.navigate("aroute/something", {trigger: true});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:18:35.743

Jacks 的例子很好，但也许一个耦合度较低的例子是：

`window.location = window.location.hash + model.get('userName')`

您不需要对路由器的引用，也不需要知道当前的“基本”路由

# java - 在 Java 中注册 Sqlite 驱动程序的问题

> ID：11361500
> 
> 赞同：1
> 
> 时间：2012-07-06T11:40:23.857
> 
> 标签：java, sqlite, driver

我正在尝试从 Java 连接到 sqlite 数据库。我在 Windows 中编程。我下载了 sqlite 驱动程序并在 windows 环境变量中设置了类路径。调用此代码时，我得到一个 classNotFoundException：

```
 Class.forName(sDriver); 
```

其中 sDriver 是“org.sqlite.JDBC” 这是异常的堆栈跟踪：

```
java.lang.ClassNotFoundException: org.sqlite.JDBC
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at com.ib.client.examples.Mydb.setConnection(Mydb.java:49)
at com.ib.client.examples.Mydb.init(Mydb.java:33)
at com.ib.client.examples.Mydb.<init>(Mydb.java:17)
at com.ib.client.examples.Example1.run(Example1.java:40) 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:05:59.953

我不知道您要使用哪个 JDBC 驱动程序，但到目前为止我发现的最好的 SQLite JDBC 驱动程序是由 Xerial 项目制作的： [http ://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)

您可以在此处找到最新版本的驱动程序： [http ://www.xerial.org/maven/repository/snapshot/org/xerial/sqlite-jdbc/3.7.8-SNAPSHOT/](http://www.xerial.org/maven/repository/snapshot/org/xerial/sqlite-jdbc/3.7.8-SNAPSHOT/)

它使用适用于 Windows（32 和 64 位）、Linux（32 和 64 位）和 MacOS（32 和 64 位）的本机驱动程序，并在平台不受支持的情况下回退到纯 java 实现。

所有本机库（dll、so 等）都包含在驱动程序的 JAR 文件中，您无需担心加载它们中的任何一个。它将为您自动检测正确的库。

编辑：如果您尝试从命令行运行程序，则必须在类路径中指定每个 jar 文件。在类路径环境变量中设置它们的路径是不够的。

例子：

```
java YourProgram -cp classes;lib/sqlite.jar;c:\libs\java\lib1.jar 
```

# asp.net-mvc-3 - 仅过滤名称

> ID：11361506
> 
> 赞同：0
> 
> 时间：2012-07-06T11:40:46.670
> 
> 标签：asp.net-mvc-3

我实际上在我的项目中使用过滤器。我将值传递到数据库中的 id 中。例如：如果学生姓名存在。我没有像“mala”那样存储学生姓名。我传递值 NameId 像 12,13 等，我的问题是当我过滤函数名称时它没有正确过滤。它只显示 Id。我怎样才能更改为名称？任何人请帮助我..我的代码在这里。

```
 <div class="section">
        <% var topFunctions = Model.GroupBy(q => q.FunctionId)
                               .OrderByDescending(gp => gp.Count())
                               .Take(5)
                               .Select(g => g.Key).ToList(); %>
        <h5>Function</h5>       

        <ul>
            <% foreach (var function in topFunctions)  { %>
                 <% var url = "http://localhost:55996/jb" + Djsite.Helpers.StringHelper.AssembleQueryStrings(filters) + "Fun=" + function; %>
                 <li><a href="<%: url %>"><%: function %></a></li>       
            <% } %>
        </ul>
    </div>

<% } %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:54:12.500

首先，一个重要的建议说明：您应该在控制器中执行此过滤并将结果推送到专门为此类结果构建的模型类型中。我认为，这种逻辑属于业务逻辑，因此不应该出现在您的视野中。

不过，要回答最初的问题：这完全取决于函数的名称是否在您的`Model`. 如果不是，那么您需要将其放入其中。

假设它是，并且它可以与`FunctionName`属性一起使用，您可以使用它：

```
Model.GroupBy(q => q.FunctionId)      
     .OrderByDescending(gp => gp.Count())      
     .Take(5)      
     .Select(g => g.First().FunctionName).ToArray(); 
```

请注意，我也更改`ToList`为`ToArray`- 不要创建列表，除非您之后需要修改结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:46:29.040

我想你想使用：

```
<li><a href="<%: url %>"><%: function.Name %></a></li> 
```

其中 .Name in`function.Name`是您所称的用户名

**编辑**

根据您的评论：

如果您只向视图发送键列表，则视图`names`无法使用您的键。您需要将实际模型发送到您的视图，而不是键 - 键只是键，它们不包含任何实际用户的名称。您应该将您的逻辑移出您的视图以帮助促进此过程。

# c# - 使用 SQL Compact 时出错

> ID：11361508
> 
> 赞同：1
> 
> 时间：2012-07-06T11:41:03.347
> 
> 标签：c#, sql, visual-studio-2010, sql-server-ce

我在项目中使用 VS2010 + Framework3.5 + Sql Compact。但是当我使用 SQL Compact 时。显示以下警告：

在配置中找不到指定的商店提供程序，或无效。

从 SQLCE 获取我的数据：

```
EFConn conn = new EFConn(); 
dataGridView1.DataSource = conn.Students.ToList(); 
```

没关系。但是，对于发送数据：

```
EFConn con = new EFConn();
Student objstd = new Student();
objstd.Name = "Sheli";
objstd.Family = "Makro";
con.Students.... 
```

是没有方法 Suddents.AddObject

并且总是有以下警告：

在配置中找不到指定的商店提供程序，或无效。

谢谢你帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:43:17.543

您需要将连接字符串添加到您的应用程序 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:45:08.777

如果您将平台更改为 x86 而不是 Any CPU ？

我遇到了这个问题，它似乎来自 x64 提供商。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:45:47.723

```
verify your string connection

    here example

    <?xml version="1.0"?>
    <configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="ConsoleApplication1.Properties.Settings.Database1ConnectionString"
            connectionString="Data Source=|DataDirectory|\YourDataBase.sdf"
            providerName="Microsoft.SqlServerCe.Client.3.5" />
    </connectionStrings>
    </configuration>

verify your provider

providerName="Microsoft.SqlServerCe.Client.3.5" 
```

# sql - Can Indices actually decrease SELECT performance?

> ID：11361510
> 
> 赞同：13
> 
> 时间：2012-07-06T11:41:05.283
> 
> 标签：sql, sql-server, performance, select, indexing

After reading some stuff about indices on SQL Server and their performance advantages for selects and disadvantages for updates / inserts, i was wondering if badly used indices could actually also hurt performance for selects. What conditions would have to be fulfilled to have an index decrease performance of a pure select query? Do such situations exist?

Thanks!

(although I always try to include code examples, i can't think of anything that would support this question...)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T11:51:22.207

Yes, albeit very slightly - so slightly that it would be justified to also answer "No".

If you have an index which *might* be considered for a query, but is not useable, the optimizer will waste a short time pondering whether and how to use it (in rare cases with REALLY complicated indexes and views, and more frequently when index performance hints are wrong, you might end up choosing a suboptimal query plan).

Some cases would be:

*   a table without indexes
*   a table with a badly chosen index, which gets discarded
*   a table where TWO indexes exist, and for some reason (e.g. obsolete statistics), the existence of the second index makes the optimizer choose it, while it would have been more convenient to use the first.
*   a table where the existing index (usually also thanks to obsolete statistics) tricks the optimizer into reading from the index an amount of data comparable to what could have been, more efficiently, retrieved with a full table scan; to make things worse, the index is fragmented and hashed differently than the table. What was essentially a full table scan becomes a *slowed down* full table scan with lots of disk thrashing.

In the first two cases the query time is the same (and entails a full scan), but in the third, you also have to analyze and discard the index. In the fourth, unlikely but possible, case an execution time which is likely very large increases and becomes huge (update 2021-10-20: *I have just done this to myself*. Yay me).

Where an index is likelier to hurt you - where ALL indexes hurt you - is in inserts, deletes and updates. Then, any index not used by the update query, yet affected by same, will require a write to the index itself.

So you will want to *have* indexes, but as few as you can without sacrificing SELECT performances. Actually, you might decide against indexing for a rarely used SELECT query in order to avoid having the needed index constantly updated by all other UPDATE queries.

Edit: after reading Heinzi's answer, I'd also like to add that most DB servers have maintenance tools which analyze the tables and indexes (and sometimes query performance counters too), and properly update the hints of which Heinzi spoke. So it's also important to periodically "maintain" the database to keep the optimizer supplied with up-to-date information on which indexes to choose from.

# Update (MySQL)

There is a very nifty MySQL analysis tool that can actually *suggest* improvements to the existing indexing (remove unused keys, add useful keys): [common_schema](http://shlomi-noach.github.io/common_schema/schema_analysis_views.html). It's really worth a look.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T11:59:11.407

**Yes, but it's very unlikely and it should not influence your decision to use indexes.**

Sometimes, the SQL Server query analyzer chooses the an execution plan that's not optimal. Since the number of possible execution plans is much larger than it might seem on first sight (a simple join of `n` tables already produces `n!` possible execution plans), SQL Server *has* to make an educated guess. It's in the nature of guesses that they are sometimes wrong.

It's a rare occurrence, but I've seen it happen a couple of times in the past years. In that case (and only in that case), a better plan would have been chosen if the index had not been there. *However*, removing the index is *not* the correct way to solve this problem, since the index usually exists for a reason. The correct way is to add a hint to this query (and only to this query), to help the optimizer choose the right plan.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T13:44:10.373

Yes, indexes can hurt performance for SELECTs. It is important to understand how database engines operate. Data is stored on disk(s) in "pages". Indexes make it possible to access the specific page that has a specific value in one or more columns in the table.

This is great if you are looking for specific values.

However, consider a query that needs to look at every row in a table. If you go through the table, you read the pages in order and -- critically -- you get every row on the page with a single read. The number of reads is the number of pages in the table. In addition, the page cache can optimize the reads with look-ahead reads and pages no longer being used are simply overwritten.

Using an index for the same reads goes through the table *one record at a time* rather than one page at a time. This results in random reads through the pages. In the worst case, there is one read per record in the table -- potentially a very significant hit to performance. In addition, the index itself occupies some of the page cache, reducing memory for other operations.

In generally, the optimizer component of a SQL engine does a good job distinguishing between these two situations. One of the key metrics is the selectivity of the query. How many rows is the query returning (which the optimizer looks at with respect to the number of pages)? If the number of rows is about the same as the number of pages, the optimizer would consider a full table scan rather than an index scan.

There are definitely other considerations, but in general, an index can hurt performance of even a simple select query. In general, optimizers do a good job, but there are sometimes unusual cases that trick even the best optimizers.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T11:44:26.477

My guess would be if you create indices that confuse the query plan optimiser, and that ends up choosing an inefficient index for the query at hand.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T11:49:54.150

This is potentially implementation-dependent, but in principle indexes should not slow down `SELECT`.

Obviously they can slow down `INSERT` and `UPDATE`.

# jquery - 点击区域下方的弹出列表

> ID：11361511
> 
> 赞同：4
> 
> 时间：2012-07-06T11:41:08.527
> 
> 标签：jquery, html, popup, position, cross-browser

嗨，我有一些简单的弹出列表，一旦我点击下拉菜单选项就会显示。不幸的是，弹出窗口在 CSS absolute 下，没有它，弹出窗口就在页面下方。
此外，它显示在不同浏览器中的不同位置。

```
 $self.next().bind('click', viewList);

    if (!settings.appendTo) {
      $self.after(createDropdown($self, selectboxCounter));
    } else {
      var offset = $self.parent().offset();

      $(settings.appendTo).append(createDropdown($self, selectboxCounter).css({
        'top': offset.top,
        'left': offset.left,
        'width': 100//'width': $self.parent().width() * 0.8
      }));
    }
  }

  $self.trigger('change');
  selectboxCounter++;
});

// Hide dropdown when click is outside of the input or dropdown
$(document).bind('click', hideDropdown);

$('.sb-custom').find('.sb-select').live('keydown', selectKeypress);
$('.sb-custom').bind('blur', clearKeyStrokes);
$(document).delegate('.sb-dropdown', 'focus', viewList);

return this;
}; 
```

我想将弹出窗口放置在父选择的位置或菜单位置。并且还可以适应不同的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:00:25.130

最近我正在帮助开发的一个小部件遇到了这个问题。我们提出的解决方案是将弹出列表绑定到文档正文。以 body 作为父级，我们不必担心隐藏弹出窗口的其他元素。然后我们只是根据它从哪里弹出来绝对定位它。

```
var offset = $("#popupFromHere").offset();
$("#popup")
    .appendTo("body")
    .css({
        left: offset.left
        top: offset.top + $this.outerHeight(true)
    }); 
```

# fingerprint - 生物特征认证过程

> ID：11361514
> 
> 赞同：1
> 
> 时间：2012-07-06T11:41:16.610
> 
> 标签：fingerprint, variance

我正在处理从 cmos 相机拍摄的指纹图像。图像帧的中心有一个灰色的不透明圆圈，边缘有深灰色的边界。一旦我扫描传感器上的指纹，脊的对比度几乎与背景图像相等（变化非常小）。我正在尝试获得山脊和山谷的清晰边界，以便我可以计算细节（我正在研究指纹识别的细节方法）。

最初，我希望检测手指的存在。我正在尝试为此使用方差方法。但是，由于前景和背景图像的对比度差异非常低，我在计算方差时的差异很小。计算方差的代码如下：

**

```
int get_variance(unsigned char *input, int size)
{
    int i,mean = get_mean(input,size);
    int temp = 0;
    for(i = 0; i < size; i++)
    {
        temp += (input[i]-mean) * (input[i]-mean);
    }
    return (temp/size);
}
int get_mean(unsigned char *input, int size)
{
    int i;
    int sum = 0;
    for( i = 0; i < size; i++)
    {
        sum += input[i];
    }
    return (sum/size);
} 
```

** 图像分辨率为 320x240。

背景的方差在 1200 左右，指纹背景的方差在 950 左右。这是我在两张图像上得到的最大方差。甚至有时，仅在低光照条件下的背景就有 950。

我可以做些什么来改进手指检测过程？如果我将图像转换为频域会有帮助吗？或者我可以使用指纹分割来检测指纹的存在吗？

# sql-server - 将带有任何 ASCII 字符（0 到 255）的字符串插入 SQL Server 中的 VARCHAR 字段

> ID：11361519
> 
> 赞同：1
> 
> 时间：2012-07-06T11:41:35.110
> 
> 标签：sql-server, vb6

我对 SQL Server 比较陌生，并且正在使用 Visual Basic 6 开发旧版应用程序。如何使用 SQL INSERT 命令将可以包含 0 到 255 之间的任何 ASCII 字符的字符串插入到 VARCHAR 字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:39:42.477

您可以将字符串编码为表示字符串字符的 ASCII 代码的十六进制值序列，放在`0x`序列前面，然后应用于整个事物并在 DDL 语句中使用该表达式。`CAST(… AS varchar(*n*))`

我的意思是，如果你的字符串是 eg `#X?!v`，你会像这样插入它

```
UPDATE *table*
SET *column* = CAST(0x23583F2176 AS varchar(*n*))
WHERE *condition* 
```

因此，如果某处有 NUL 字符，则生成的序列将包含`00`在相应的位置。

我并没有真正“说”VB，但如果我这样做了，我可能会考虑创建一个接受原始字符串并返回十六进制代码字符串的函数，因此，在构建 DDL 命令时，我的 VB 指令可能看起来像这样的东西：

```
cmd.CommandText = "UPDATE *table* SET *column* = CAST(0x" & HexEncode(RawString) & " AS varchar(*n*)) WHERE *condition*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:53:14.933

假设您的项目引用了 ADO，它是这样的：

```
Dim oConn As Connection
Dim oCmd As Command

Set oConn = New Connection

oConn.Open <your connection string goes here>

Set oCmd = New Command

oCmd.ActiveConnection = oConn
oCmd.CommandText = "INSERT INTO TableName (ColumnName) VALUES('string')"
oCmd.Execute 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T08:00:19.927

我手头没有 ADO 参数语法，但您应该能够`varchar`使用 ADO 参数将通用字符串（包括 NUL）插入到列中。

# php - 表单输入到 php 文件

> ID：11361524
> 
> 赞同：2
> 
> 时间：2012-07-06T11:42:06.983
> 
> 标签：php, security, codeigniter

我希望让某些用户输入一些字段，这些字段将依次填充一个（新）php 文件。（新）文件将是一个包含简单数组值的语言文件：

```
$lang['example'] = 'text for example'; 
```

基本上我只会用每一行填充文件，一切看起来都很棒。但是，我需要知道如何过滤输入，以便`'`类似`"`的东西不会破坏字符串并为潜在的注入打开空间。

由于 php 允许多种方式来设置代码样式，因此我不确定 a`addslashes()`是否足以解决此问题。

**如何过滤输入以便它可以在 php 文件中的字符串中？**

我找不到关于这个问题的任何其他问题，只是数据库过滤。

**额外信息：**
我不想要这些框中的任何 html。它应该能够处理`'`and `"`，真正的问题是你能做这样的事情：

```
$lang['example'] = 'hackkyyyyy
>>>
// do evil stuff
<<<
'; 
```

那样的话，我的意思是你可以用其他方式`'`或者`"`在php中破坏一个字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:50:34.450

这取决于您要防止什么以及您的代码被滥用的可能性有多大。我有很多方法：

1.  addlashes() 正如您在问题中所说
2.  str_replace() 用于您要删除的每个项目
3.  filter_var() 可能对您有用，具体取决于几个变量

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:58:02.723

所以你让用户填写表单，表单值会在网页上回显？我不知道为什么您不能简单地使用 PHP 过滤器函数来清理输入并在必要时对特殊字符进行编码。

*   [http://php.net/manual/en/filter.filters.sanitize.php](http://php.net/manual/en/filter.filters.sanitize.php)

我也不知道为什么这里不适用于数据库的输入验证/清理。也许有人知道并告诉...

顺便提一句。我很满意 David Power 在 PHP Object Oriented Solutions 一书中使用的用户输入验证类。购买这本书（或访问图书馆），您就可以立即使用该代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:03:50.590

通常我使用var_export，只是一个例子：

```
file_put_contents("temp.php",'<?php'. var_export($_POST,true)); 
```

当我需要数组时：

```
$a = include "temp.php"; 
```

# jquery - jquery褪色效果不起作用

> ID：11361526
> 
> 赞同：0
> 
> 时间：2012-07-06T11:42:22.347
> 
> 标签：jquery

以下带有 Jquery 的代码不起作用。该部门没有淡出。请帮助我

```
<html>
<head>
<style type="text/css"> 
#fade{    background-color:#abc123;    width:200px;  height:30px; padding:3px; }
</style>

<SCRIPT type="text/javascript"  src="http://code.jquery.com/jquery-latest.js"></SCRIPT>
<script type="text/javascript"> 
$("#animate").click(function() {
    $("#fade").animate(
            {"width": "200px"},
            "fast");
});
</script>
 </head>
 <body>
<div id="fade">Animate Text</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:45:06.950

任何引用 DOM 的 jQuery 都需要包含在文档就绪处理程序 (DRH) 中。此外，您不是在淡化 DIV，而只是在其尺寸上设置动画。

```
<script type="text/javascript"> 
$(document).ready(function() {
    $("#animate").click(function() { 
```

或者干脆

```
<script type="text/javascript">
$(function() {
    $("#animate").click(function() { 
```

...否则，您会在 DOM 实际准备好之前尝试与 DOM 元素对话。

[编辑-正如其他答案所指出的，没有`#animate`元素。这可能是问题的另一个原因，尽管上述问题仍然存在。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:45:05.813

您的示例中没有`#animate`元素！

如果您像这样更改代码，它将正常工作：

```
$("#fade").click(function() {
    $("#fade").animate(
            {"width": "200px"},
            "fast");
});​ 
```

[jsFiddle](http://jsfiddle.net/8C7Yh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:45:20.273

您正在使用的 .animate 调用不会使 div 褪色，但会尝试为宽度变化设置动画。要淡化块，请执行以下操作：

```
$(document).ready(function() {
    $("#fade").click(function() {
        $(this).fadeOut("fast");
    });

    $("#fade").mouseout(function() {
        $(this).fadeIn("fast");
    });
}); 
```

编辑：更新了完整的示例，包括鼠标悬停。

# sql - sql查询 - 获取刷卡之间的差异时间 - 刷出员工

> ID：11361529
> 
> 赞同：-2
> 
> 时间：2012-07-06T11:42:31.207
> 
> 标签：sql, sql-server, sql-server-2008

我有一张这样的桌子

swipe_details

```
EMPID   EVENT_TYPE   Swipe_time
1       EN           2012-06-01 12:00
1       EX           2012-06-01 12:30
2       EN           2012-06-01 12:50
1       EN           2012-06-01 13:10
2       EX           2012-06-01 13:30
2       EN           2012-06-01 14:00
2       EX           2012-06-01 19:00
1       EX           2012-06-01 19:30 
```

它基本上存储了员工的刷卡细节（其中 EN 是“刷入”，EX 是“刷出”）

**我想找出在给定时间范围内在办公室花费最多时间的 EMPID。所以我的输入将是开始时间和结束时间（例如：2012-06-01 12:30 和 2012-06-05 18:30）。**

请注意这三个条件：

1.  可能有员工在时间框架之前进入办公室。在这种情况下，我们必须将滑动视为该员工时间范围的开始。

2.  对于在时间范围之后退出的员工，刷出时间将是时间范围的结束。

3.  如果有员工的刷入时间小于时间范围并且刷出时间大于时间范围，则所有这些 empID 都应显示为结果

最好的方法是什么？是否可以使用单个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:05:53.527

```
select    empid,
          sum
          (
              datediff
              (
              MINUTE, 
              case when timesheet.timein < @timeframe_start 
                  then @timeframe_start  
                  else timesheet.timein end, 
              case when timesheet.timeout > @timeframe_end 
                  then @timeframe_end 
                  else timesheet.timeout end
              )
          ) as total_duration
from     (
         select    timein.empid, 
                   timein.swipe_time as timein, 
                   timeout.swipe_time as timeout
         from      tbltest timein
         left join tblTest timeout 
         on        timein.empid = timeout.empid
         and       timeout.eventtype = 'ex'
         and       timeout.swipe_time = 
             (
             select     MIN(swipe_time) 
             from       tblTest tcheck 
             where      tcheck.empid = timeout.empid 
             and        tcheck.eventtype = 'EX' 
             and        tcheck.swipe_time > timein.swipe_time
             )
         where      timein.eventtype = 'en'
         ) timesheet
where    timesheet.timein between @timeframe_start and @timeframe_end
or       timesheet.timeout between @timeframe_start and @timeframe_end
or       (
         timesheet.timein < @timeframe_start 
         and timesheet.timeout > @timeframe_end
         )
group by empid
order by 2 desc 
```

# xpages - “禁用”属性不适用于显示日期/时间选择器的日期/时间编辑框

> ID：11361533
> 
> 赞同：0
> 
> 时间：2012-07-06T11:42:43.520
> 
> 标签：xpages, wai-aria

显示类型设置为“日期/时间”并选中“显示日期/时间选择器弹出”选项的编辑框显然会忽略选中的“禁用”属性（这是一个错误吗？）；如果没有选择器弹出选项，该控件可以像任何其他编辑框一样被禁用。

但是，如果我检查控件的“只读”属性及其“显示禁用的只读控件”属性，则该控件似乎呈现为“禁用”；INPUT 的 html 源代码显示了这些属性

```
readonly="" aria-readonly="true" 
```

问题：使用该解决方法是否有任何可能的副作用？到目前为止，我对 aria 属性等没有任何经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:48:28.793

这确实是一个存在的问题，disabled 属性在日期时间选择器上不起作用。这应该在 854 中修复（适用通常的附带条件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:53:45.103

将所有三个属性设置为 disabled、readonly 和 showReadonlyAsDisabled，然后 DateTime 字段显示但不起作用。

```
[xp:inputText id="inputText2" **disabled="true"** **readonly="true"**
    **showReadonlyAsDisabled="true"**]
    [xp:dateTimeHelper id="dateTimeHelper1"][/xp:dateTimeHelper]
    [xp:this.converter]
        [xp:convertDateTime type="date"][/xp:convertDateTime]
    [/xp:this.converter]
[/xp:inputText] 
```

# php - 将新数据插入 memcached 数组

> ID：11361537
> 
> 赞同：2
> 
> 时间：2012-07-06T11:43:10.540
> 
> 标签：php, memcached

我正在尝试将数组存储在 memcached 中。并且会有新的数据需要附加到我之前存储的数组中。

这是代码示例：

```
$lastDay = $MC->get('LastDayTopics');
$lastDay[] = $newTopic;
$MC->set('LastDayTopics', $lastDay ); 
```

如果两个客户端同时执行这段代码怎么办？在我的场景中，他们都从 memcached 获取数组并在其他客户端设置新数组之前加载 $lastDay。所以最终，其中一个新数据将不会存储在 memcached 中。它将被销毁而不被存储。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:50:05.927

*   您必须使用额外的锁定，例如：[http ://bluxte.net/musings/2009/10/28/simple-distributed-lock-memcached](http://bluxte.net/musings/2009/10/28/simple-distributed-lock-memcached)

*   您还可以使用另一个支持原子更新/推送的数据库（如 redis 或 mongodb）来解决此问题。

# tomcat - maven 2.2.1 Tomcat 7 无法调用 Tomcat 管理器：401

> ID：11361540
> 
> 赞同：1
> 
> 时间：2012-07-06T11:43:21.117
> 
> 标签：tomcat, maven

我尝试在 tomcat 7 上部署新的 maven 项目。我得到了

```
[INFO] Building war: C:\Workspace2\sw\webapp\target\mkyongweb-core-1.0.war
[INFO] [tomcat:deploy {execution: default-cli}]
[INFO] Deploying war to http://localhost:8080/mkyongweb-core
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Cannot invoke Tomcat manager

Embedded error: Server returned HTTP response code: 401 for URL: http://localhost:8080/manager/deploy?path=%2Fmkyongweb-core&war= 
```

tomcat-users.xml

```
 <tomcat-users>
     <role rolename="admin"/>
     <role rolename="manager"/>
     <user username="admin" password="password" roles="admin,manager"/>
  </tomcat-users> 
```

%MAVEN-HOME%/conf/settings.xml

```
 <server>
    <id>tomcat7</id>
    <username>admin</username>
    <password>password</password>
 </server> 
```

和我的 pom.xml(tomcat6)

```
 <build>
        <plugins>
            <!-- Maven Tomcat Plugin -->
            <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <version>1.0</version>
            <configuration>
            <server>tomcat7</server>
            <url>h ttp://loca lhost:8080/manager</url>                  
            <path>/mkyongWebApp</path>
            </configuration>
        </plugin>           
            <!-- Maven compiler plugin -->
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

        </plugins>
    </build> 
```

这个 pom.xml 导致错误 401

> [信息] 无法调用 Tomcat 管理器嵌入式错误：服务器返回 HTTP 响应代码：401 用于 URL： [http://localhost:8080/manager/deploy?path=%2Fmkyongweb-core&war=](http://localhost:8080/manager/deploy?path=%2Fmkyongweb-core&war=)

下面的插件也犯了同样的错误

```
 <plugins>
        <!-- Maven Tomcat Plugin -->
        <plugin>            
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat6-maven-plugin</artifactId>
        <version>2.0-beta-1</version>
        <configuration>             
            <server>tomcat7</server>
            <url>http://localhost:8080/manager</url>
            <path>/mkyongWebApp</path>
        </configuration>
    </plugin>           

        <!-- Maven compiler plugin -->
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>

    </plugins> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:51:03.993

您应该使用 apache maven tomcat 插件而不是 codehaus tomcat-maven-plugin。

[http://tomcat.apache.org/maven-plugin-2/](http://tomcat.apache.org/maven-plugin-2/)

如codehaus网站上所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T13:25:26.473

您必须参考服务器（tomcat7）

```
 <plugin>
         <groupId>org.codehaus.mojo</groupId>
         <artifactId>tomcat-maven-plugin</artifactId>
         <configuration>
            <server>tomcat7</server>
            <url>http://localhost:8080/manager/html</url>
         </configuration>
        </plugin> 
```

# php - PHP MySQL加入并输出为数组

> ID：11361543
> 
> 赞同：2
> 
> 时间：2012-07-06T11:43:36.327
> 
> 标签：php, mysql, arrays, join

我想知道是否有人可以帮助我。

我有以下两个表，位置和多边形。

```
positions:
----------------------------------------------
| positionID | name        | information
----------------------------------------------
| 1          | Southampton | text here
| 2          | London      | text here 
```

.

```
polygons:
-------------------------------------------------------------------
| polygonID | positionID | lat           | lon
-------------------------------------------------------------------
| 1         | 1          | 434343.034343 | -43.4343434
| 2         | 1          | 343343.034343 | -43.4343434
| 3         | 1          | 434343.034343 | -54.4343434 
```

我想加入这两个表并将它们输出为以下格式的数组。

```
$positions = array(
               array( positionID => 1, 
                      name => 'Southampton',
                      information => 'text here',
                      polys =>  array( array( Lat => 54.54299483853406, 
                                      Lng => -6.5224456787109375,
                                     ),
                                array( Lat => 54.648809788121866, 
                                       Lng => -6.405029296875,
                                     ),
                                array( Lat => 54.54020652089137, 
                                       Lng => -6.39129638671875,
                                     ),
                                ),
               ),
       ); 
```

我已经写了以下加入声明，但是我真的坚持下一步。

```
SELECT * FROM (`positions`) LEFT JOIN `polygons` ON `positions`.`positionID` = `positions`.`positions` 
```

连接中的纬度/经度数据必须存储在数组中的“polys”键上。

任何帮助或建议将不胜感激。

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:52:52.327

如果每个位置 ID 有多个多边形 ID，您将获取大量位置副本。我建议改为执行 2 个查询：

```
$positions = array();

$query_1 = "SELECT * FROM positions";
$query_2 = "SELECT * FROM polygons";

$resource_1 = mysql_query($query_1);

while($position = mysql_fetch_assoc($resource_1))
{
    $positions[$position['positionID']] = $position;
    $positions[$position['positionID']]['polys'] = array();
}

$resource_2 = mysql_query($query_2);

while($polygon = mysql_fetch_assoc($resource_2))
{
    $positions[$polygon['positionID']]['polys'][$polygon['polygonID']]['Lat'] = $polygon['lat'];
    $positions[$polygon['positionID']]['polys'][$polygon['polygonID']]['Lon'] = $polygon['lon'];
} 
```

（很抱歉在我的示例中使用了不推荐使用的函数，如 mysql_query）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:02:18.027

您只需要一个查询，但您仍然需要在 PHP 中对结果进行一些处理：

```
$sql = "SELECT * FROM positions
    LEFT JOIN polygons ON positions.positionID = polygons.positionID";
$result = mysql_query($sql);
if (mysql_num_rows($result) > 0) {
    $positions = array();
    while ($row = mysql_fetch_assoc($result)) {
        if (!isset($positions[$row['name']])) {
            $positions[$row['name']] = array(
                'positionID' => $row['positionID'],
                'information' => $row['information'],
                'polys' => array()
                );
        }
        $positions[$row['name']]['polys'][] = array(
            'lat' => $row['lat'],
            'lon' => $row['lon']
            );
    }

    print_r($positions);
} 
```

这也将返回实际上没有任何多边形信息的位置。为了防止这种情况，只需将 更改`LEFT JOIN`为`JOIN`。

至于哪个效率最高，恐怕我不知道答案。如果可以的话，最好的办法是对这种方法和 Puggan Se 建议的方法进行基准测试。

# css - 将 h1 标签样式化嵌套在一个 div 中的两层深度 - 继承误解？

> ID：11361546
> 
> 赞同：0
> 
> 时间：2012-07-06T11:43:47.327
> 
> 标签：css, inheritance

为什么我的 h1 标签没有样式，尽管它们是简单的后代标签？你能告诉我，在这种情况下我对继承有什么误解吗？代码在[这里](http://jsfiddle.net/SPN6M/1/)。

HTML

```
<div id="title">
  <div class="left"
      <h1>Lala</h1>
  </div>
  <div class="right"
      <h2>Lulu</h2>
  </div>
</div> 
```

CSS：

```
body {
    font-family: Arial, sans-serif;
    letter-spacing: 0.025em;
}

#title {
    position: absolute;
    left: 64px;
    white-space: nowrap;
    height: 60px;
    background: #000;
}

#title > .left {
    float: left;
    height: inherit;
    width: 380px;
    background: #C2D;
}

#title > .right {
    float: left;
    height: inherit;
    width: 124px;
    margin-left: 4px;
    background: #5CC;
}

h1 {
    color: #FF4;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:45:21.397

嘿，现在检查一下

你忘了`disclose` `div`

代替

这

```
<div id="title">
  <div class="left"
      <h1>Lala</h1>
  </div>
  <div class="right"
      <h2>Lulu</h2>
  </div>
</div> 
```

**进入这个**

```
<div id="title">
  <div class="left">
      <h1>Lala</h1>
  </div>
  <div class="right">
      <h2>Lulu</h2>
  </div>
</div> 
```

`">"`最后关闭`div`

现场演示

[http://jsfiddle.net/SPN6M/2/](http://jsfiddle.net/SPN6M/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:47:22.027

在第 2 行中，您的代码应为

```
 <div class="left"> 
```

注意末尾的“>”关闭 div

# smartgwt - 添加/删除 smartgwt treegrid 数据时出错：“this.data.isGroupedOutput' 为空或不是对象”

> ID：11361550
> 
> 赞同：0
> 
> 时间：2012-07-06T11:43:57.093
> 
> 标签：smartgwt, treegrid

我有一个treegrid，我对其进行了添加和删除操作。如果我在我的应用程序中的任何其他页面之前访问此页面，它工作正常。如果我第一次访问其他页面而不是来到这个页面，这是我收到的错误：

```
13:39:46.403 [ERROR] [pifs] 13:39:46.402:XRP9:WARN:Log:Error:
''this.data.isGroupedOutput' is null or not an object'
in http://localhost:8080/pifs/pifs/sc/modules/ISC_Grids.js
at line 3065
ListGrid.regroup(_1=&gt;undef)
ListGrid.dataChanged(_1=&gt;&quot;add&quot;, _2=&gt;undef, _3=&gt;24, _4=&gt;Array[1], _5=&gt;undef)
dataChangedObservation(operationType=&gt;&quot;add&quot;, originalRecord=&gt;undef, rowNum=&gt;24, updateData=&gt;Array[1], filterChanged=&gt;undef)
ResultSet.$e0(_1=&gt;undef)
ResultSet.handleUpdate(_1=&gt;&quot;add&quot;, _2=&gt;Array[1], _3=&gt;false, _4=&gt;Obj)
ResultSet.dataSourceDataChanged(_1=&gt;Obj, _2=&gt;Obj)
dataChangedObservation(dsResponse=&gt;Obj, dsRequest=&gt;Obj)
DataSource.updateCaches(_1=&gt;Obj, _2=&gt;Obj)
[c]DataSource.handleUpdate(_1=&gt;Obj, _2=&gt;Obj)
DataSource.fireResponseCallbacks(_1=&gt;Obj, _2=&gt;Obj, _3=&gt;Obj, _4=&gt;Obj)
DataSource.$65e(_1=&gt;Array[1], _2=&gt;Obj, _3=&gt;Obj, _4=&gt;Obj, _5=&gt;Obj)
DataSource.$76b(_1=&gt;Obj, _2=&gt;Array[1], _3=&gt;Obj)
[c]Class.fireCallback(_1=&gt;Obj, _2=&gt;&quot;rpcResponse,data,rpcRequest&quot;, _3=&gt;Array[3], _4=&gt;[DataSource ID:lfm], _5=&gt;undef) on [Class RPCManager]
Class.fireCallback(_1=&gt;Obj, _2=&gt;&quot;rpcResponse,data,rpcRequest&quot;, _3=&gt;Array[3], _4=&gt;undef)
[c]RPCManager.__fireReplyCallback(_1=&gt;Obj, _2=&gt;Obj, _3=&gt;Obj, _4=&gt;Array[1])
[c]RPCManager.fireReplyCallbacks(_1=&gt;Obj, _2=&gt;Obj)
[c]RPCManager.performOperationReply(_1=&gt;Obj, _2=&gt;Obj)
[c]RPCManager.$67x(_1=&gt;20)
[c]RPCManager.performTransactionReply(_1=&gt;20, _2=&gt;&quot;//isc_RPCResponseStart--&gt;[{data:[{id:637...&quot;[248], _3=&gt;undef)
callback(transactionNum=&gt;20, results=&gt;Obj, wd=&gt;undef)
    &quot;isc.RPCManager.performTransactionReply(transactionNum,results,wd)&quot;
** recursed on [c]Class.fireCallback

com.smartgwt.client.core.JsObject$SGWT_WARN: 13:39:46.402:XRP9:WARN:Log:Error:
''this.data.isGroupedOutput' is null or not an object'
in http://localhost:8080/pifs/pifs/sc/modules/ISC_Grids.js
at line 3065
ListGrid.regroup(_1=&gt;undef)
ListGrid.dataChanged(_1=&gt;&quot;add&quot;, _2=&gt;undef, _3=&gt;24, _4=&gt;Array[1], _5=&gt;undef)
dataChangedObservation(operationType=&gt;&quot;add&quot;, originalRecord=&gt;undef, rowNum=&gt;24, updateData=&gt;Array[1], filterChanged=&gt;undef)
ResultSet.$e0(_1=&gt;undef)
ResultSet.handleUpdate(_1=&gt;&quot;add&quot;, _2=&gt;Array[1], _3=&gt;false, _4=&gt;Obj)
ResultSet.dataSourceDataChanged(_1=&gt;Obj, _2=&gt;Obj)
dataChangedObservation(dsResponse=&gt;Obj, dsRequest=&gt;Obj)
DataSource.updateCaches(_1=&gt;Obj, _2=&gt;Obj)
[c]DataSource.handleUpdate(_1=&gt;Obj, _2=&gt;Obj)
DataSource.fireResponseCallbacks(_1=&gt;Obj, _2=&gt;Obj, _3=&gt;Obj, _4=&gt;Obj)
DataSource.$65e(_1=&gt;Array[1], _2=&gt;Obj, _3=&gt;Obj, _4=&gt;Obj, _5=&gt;Obj)
DataSource.$76b(_1=&gt;Obj, _2=&gt;Array[1], _3=&gt;Obj)
[c]Class.fireCallback(_1=&gt;Obj, _2=&gt;&quot;rpcResponse,data,rpcRequest&quot;, _3=&gt;Array[3], _4=&gt;[DataSource ID:lfm], _5=&gt;undef) on [Class RPCManager]
Class.fireCallback(_1=&gt;Obj, _2=&gt;&quot;rpcResponse,data,rpcRequest&quot;, _3=&gt;Array[3], _4=&gt;undef)
[c]RPCManager.__fireReplyCallback(_1=&gt;Obj, _2=&gt;Obj, _3=&gt;Obj, _4=&gt;Array[1])
[c]RPCManager.fireReplyCallbacks(_1=&gt;Obj, _2=&gt;Obj)
[c]RPCManager.performOperationReply(_1=&gt;Obj, _2=&gt;Obj)
[c]RPCManager.$67x(_1=&gt;20)
[c]RPCManager.performTransactionReply(_1=&gt;20, _2=&gt;&quot;//isc_RPCResponseStart--&gt;[{data:[{id:637...&quot;[248], _3=&gt;undef)
callback(transactionNum=&gt;20, results=&gt;Obj, wd=&gt;undef)
    &quot;isc.RPCManager.performTransactionReply(transactionNum,results,wd)&quot;
** recursed on [c]Class.fireCallback
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:105)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Unknown Source) 
```

请帮忙！我尝试了一切，但这个错误仍然在这里......

这是treeGrid代码：

```
public Canvas getViewPanel() {

    VLayout mainLayout = getMainVlayout();

    setPanelTitle("Define LFM tree structure:", mainLayout);

    lfmDataSource = DataSource.get("lfm");

    ToolStrip gridEditControls = addToolStrip();

    treeGrid = new TreeGrid();

    treeGrid.setGridComponents(new Object[] {
            ListGridComponent.HEADER,
            ListGridComponent.BODY, 
            gridEditControls 
    });

    treeGrid.setCanEdit(true);
    treeGrid.setLoadDataOnDemand(false);
    treeGrid.setWidth("100%");
    treeGrid.setHeight("90%");

    treeGrid.setNodeIcon(null);
    treeGrid.setFolderIcon(null);
    treeGrid.setShowOpenIcons(false);
    treeGrid.setShowDropIcons(false);
    treeGrid.setClosedIconSuffix("-");

    treeGrid.setAlternateRecordStyles(true);

    treeGrid.setWarnOnRemoval(true);
    treeGrid.setEditEvent(ListGridEditEvent.DOUBLECLICK);

    treeGrid.setDataSource(lfmDataSource);
    treeGrid.setFetchOperation("firstFourLevelstFetch");
    treeGrid.setAddOperation("addLfm");
    treeGrid.setRemoveOperation("removeActivity");

    Criteria criteria = new Criteria("project", getParentHolder()
            .getProjectID());
    criteria.addCriteria("project_phase", project_phase);
    treeGrid.fetchData(criteria);
    //treeGrid.getTree().openAll();

    TreeGridField levelField = new TreeGridField("level", 250);
    levelField.setCanEdit(false);

    TreeGridField nameField = new TreeGridField("name");
    TreeGridField level_pathField = new TreeGridField("level_path", 100);

    treeGrid.setFields(levelField, level_pathField, nameField);

    mainLayout.addMember(treeGrid);

    return mainLayout;

}

private ToolStrip addToolStrip(){
    ToolStrip gridEditControls = new ToolStrip();
    gridEditControls.setWidth100();
    gridEditControls.setHeight(24);

    //totalsLabel = new Label();
    //totalsLabel.setPadding(5);

    LayoutSpacer spacer = new LayoutSpacer();
    spacer.setWidth("*");

    ToolStripButton newButton = new ToolStripButton();
    newButton.setIcon("[SKIN]/actions/add.png");
    newButton.setTitle("Add  LFM tree node");
    newButton.setPrompt("Add child node to the selected LFM tree node...");
    newButton.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            ListGridRecord parentRecord = treeGrid.getSelectedRecord();
            if (parentRecord == null) return;

            if(parentRecord.getAttribute("level").equals("" +PifsProjectSettings.LFM_LEVEL_ACTIVITY)){
             SC.warn("Can not create children node for Activity! Detail activities are defined in the budget....");
             return;
            }

            Record newRecord = new Record();
            newRecord.setAttribute("project", parentRecord.getAttribute("project"));
            newRecord.setAttribute("project_phase", parentRecord.getAttribute("project_phase"));

            int recordLfmLevel = (new Integer(parentRecord.getAttribute("level"))).intValue() + 1;
            newRecord.setAttribute("level", recordLfmLevel);

            newRecord.setAttribute("name", "...");

            int parentRecordId = (new Integer(parentRecord.getAttribute("id"))).intValue() ;
            newRecord.setAttribute("parent", parentRecordId);

            int recordSublevel =  (new Integer(parentRecord.getAttribute("num_children"))).intValue() + 1;
            newRecord.setAttribute("sublevel", recordSublevel);
            newRecord.setAttribute("num_children", 0);
            parentRecord.setAttribute("num_children", recordSublevel);

            String parentPath = parentRecord.getAttribute("level_path");
            if(parentPath==null || parentPath.equals("")){
                newRecord.setAttribute("level_path", ""+ recordSublevel);
            }else{
                newRecord.setAttribute("level_path", parentPath+"."+recordSublevel);
            }

            treeGrid.addData(newRecord);
            treeGrid.markForRedraw();
            treeGrid.setIsGroup(true);

        }
    });

    ToolStripButton editButton = new ToolStripButton();
    editButton.setIcon("[SKIN]/actions/edit.png");
    editButton.setTitle("Edit LFM tree node");
    editButton.setPrompt("Edit selected LFM tree node...");
    editButton.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            ListGridRecord record = treeGrid.getSelectedRecord();
            if (record == null) return;
            treeGrid.startEditing(treeGrid.getDataAsRecordList().indexOf(record), 1, false);

        }
    });

    ToolStripButton removeButton = new ToolStripButton();
    removeButton.setIcon("[SKIN]/actions/remove.png");
    removeButton.setTitle("Remove LFM tree node");
    removeButton.setTitle("Remove selected LFM tree node...");
    removeButton.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
             ListGridRecord record = treeGrid.getSelectedRecord();
             if (record == null) return;

             String parentId = record.getAttribute("parent");

             if(record.getAttribute("level").equals("" +PifsProjectSettings.LFM_LEVEL_GO)){
                 SC.warn("General objective can not be deleted!");
                 return;
             }

             treeGrid.removeSelectedData();
             treeGrid.markForRedraw();
             treeGrid.setIsGroup(true);

             ListGridRecord[] allRecords = treeGrid.getRecords();
             for(int i=0; i<allRecords.length; i++){
                 if(allRecords[i].getAttribute("id").equals(parentId)){
                     ListGridRecord parentRecord = allRecords[i];
                     int numChildren = (new Integer(parentRecord.getAttribute("num_children"))).intValue();
                     numChildren--;
                     if(numChildren<0){numChildren = 0;}
                     parentRecord.setAttribute("num_children", numChildren);

                     return;

                 }
             }

        }
    });

    gridEditControls.setMembers(newButton, spacer, editButton, removeButton);

    return gridEditControls;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:32:16.227

目前尚不清楚如何实现这一点（您上面的代码不会这样做），但我们添加了一个空检查以防万一。

[从http://smartclient.com/builds](http://smartclient.com/builds)尝试下一个每晚的 3.1d 构建（7.7.2012），看看是否能解决您的问题。

# jquery - 在jQuery中的子元素上应用事件

> ID：11361553
> 
> 赞同：0
> 
> 时间：2012-07-06T11:44:08.353
> 
> 标签：jquery

我想为选定的下拉列表编写我的自定义 jquery 工具提示代码。下面是我的 html 代码结构。我想在悬停时显示工具提示？（问号）在 span 标签中。我已经编写了 jquery 代码，但它不起作用。我的问题是如何应用子元素的事件（如 div 的 span 子元素）。我已经尝试过下面的 jquery 代码，但它不起作用。

使用 ajax 填充页面加载的下拉菜单。

**Javascript代码**

```
$(document).ready(function(){

    // first code not working

    $('#sub_cat_tooltip').hover(function(){
        alert("Title :"+$("#subcat option:selected").attr( "title"));
    });

    // second code not working

    $('#subcatdrp p #sub_cat_tooltip').hover(function(){
        alert("Title :"+$("#subcat option:selected").attr( "title"));
    });

    // third code not working

    $('#subcatdrp > p > #sub_cat_tooltip').hover(function(){
        alert("Title :"+$("#subcat option:selected").attr( "title"));
    }); 

    // fourth 
    // try all above try using onmouseover event

    $('#sub_cat_tooltip').onmouseover(function(){
        alert("Title :"+$("#subcat option:selected").attr( "title"));
    });
}); 
```

**HTML 代码**

```
<div id="subcatdrp">
    <p>
        <label for="subcategory">Sub Category:</label>
        <select id="subcat" name="subcat">
        </select>
    </p>
    <span id="sub_cat_tooltip" class="tooltip_img">?</span> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:57:25.540

### 1

[对我有用](http://jsfiddle.net/Eric/wCBbM/)，虽然它会触发两次，因为`.hover`只有一个参数会在 mouseenter 和 mouseleave 上调用它。[这是](http://jsfiddle.net/Eric/wCBbM/1/)一个固定版本。

### 2 和 3

`$('#subcatdrp p #sub_cat_tooltip')`并且`$('#subcatdrp > p > #sub_cat_tooltip')`不工作，因为他们寻找这个 HTML：

```
<... id="subcatdrp">
    <p>
         <... id="sub_cat_tooltip" /> 
    </p>
</...> 
```

您的工具提示不在 p 内。

### 4

`onmouseover`不起作用，因为它在 jQuery 中不存在。你正在寻找`.mouseenter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:00:02.933

像这样试试

**HTML 代码**

```
<div>
    <p>
        <label for="subcategory1">Sub Category:</label>
        <select name="subcategory1" title="This is title 1!">
        </select>
    </p>
    <span class="tooltip_img">?</span> 
</div>

<div>
    <p>
        <label for="subcategory2">Sub Category:</label>
        <select name="subcategory2" title="This is title 2!">
        </select>
    </p>
    <span class="tooltip_img">?</span> 
</div> 
```

**jQuery 代码**

```
$(document).ready(function() {
    $('.tooltip_img').mouseover(function() {
        var $alert = $(this).parent().find('select').attr('title');
        alert($alert);
    });
}); 
```

# objective-c - 从 ViewController 中的 UITabBar 获取选项卡选择事件

> ID：11361554
> 
> 赞同：0
> 
> 时间：2012-07-06T11:44:13.700
> 
> 标签：objective-c, xcode, xcode4, delegates, uitabbarcontroller

我的 MainStoryboard 的结构是：

```
->Tab Bar Controller -> Navigation Controller -> View Controller (Search) 
```

我想要的行为是，当用户重新选择搜索选项卡时，它上面的 UIScrollView 滚动到顶部。但是，我不确定如何从 TabBarController 获取事件。

我一直在看很多关于 UITabBarDelegate 的东西，特别是：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item 
```

不过，我并没有设法让它正常工作。我非常不确定如何设置委托（假设是这样做的）。我已经尝试在 IB 中连接它，但它不会让我这样做。我还尝试从 AppDelegate 获取 UITabBar （在查看了一些看似相关的答案之后）。

任何指针都将不胜感激（除非它们为空）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:37:35.717

```
UITabBar *aTabBar = [UITabBarItem alloc] init]; 
```

....您想对 aTabBar 进行的任何其他修改....

```
[aTabBar setDelegate:self] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:54:49.717

不要忘记将“ ”添加到您尝试指定为委托的任何对象 `<UITabBarDelegate>`的“ ”部分。`@interface`

对于我自己的代码，我通常使用一些*不是*应用程序委托的对象（因为应用程序委托通常用于应用程序级别的事件，例如“应用程序正在暂停”或“应用程序正在回到前台”）。如果您将“ `<UITabBarDelegate>`”添加到您的搜索视图控制器，请确保您对“ `didSelectItem`”方法所做的任何事情都仅适用于搜索视图控制器。否则，如果您想根据正在显示的选项卡栏项目对各种视图控制器执行操作，则实例化一些不同的对象。

# sap-ase - Sybase 中的日期格式

> ID：11361557
> 
> 赞同：1
> 
> 时间：2012-07-06T11:44:18.223
> 
> 标签：sap-ase

如何转换默认情况下在 Sybase 中存储这样的值的日期时间数据列

```
Sep 15 1999 12:23:56:230AM 
```

到这种格式：

```
MM/DD/YY HH:MI:SS,FF9 
```

我没有看到转换功能的任何选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:24:39.243

自己做：

```
declare @test datetime
select @test = getdate()

select convert(varchar, @test, 1) + ' ' + convert(varchar, @test, 108) + ',FF9' 
```

# c# - 如何使用 AJAX 创建/删除带有表单控件的表格行？

> ID：11361563
> 
> 赞同：2
> 
> 时间：2012-07-06T11:44:33.847
> 
> 标签：c#, asp.net, asp.net-ajax, c#-3.0

我有一个表，它有几个固定的行，其中包含有自己的更新面板的用户控件。我需要能够在此表中创建新行，其中每一列都包含一个 TextBox 控件。出于明显的原因，我不想将整个表格包装在更新面板中，而是希望能够在没有完整回发的情况下创建/删除新行，并将 TextBox 控件注册/取消注册到/从页面，而不必重建整个表。

任何想法如何/如果可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:48:16.910

它可以使用客户端方法来完成，例如使用 JavaScript 模板或 MVVM 框架构建 UI。您还可以使用可以轻松模板化的 ListView 来呈现初始 shell，并且可以使用 JavaScript 添加其他行。

或者，将整个表包装在一个 UpdatePanel 中。

# c++ - 从 QT 窗口打开新窗口？

> ID：11361565
> 
> 赞同：0
> 
> 时间：2012-07-06T11:44:59.427
> 
> 标签：c++, qt

我有两个类都在 QDialog 类下定义。

两个类都单独正常工作并打开各自的窗口，但我想要的是从一个窗口中菜单栏中有一个操作，单击打开另一个窗口。定义的类的代码是 **类 1**

```
class Box : public QDialog
{
        Q_OBJECT

        public:
                Box(QWidget *parent=0);

        private slots:
                void refresh();

        signals:
                void itemChanged(QStandardItem *);

        private:
                void create_frame();
                void create_menu();

                QGroupBox *tablegroup;
                QDialogButtonBox *buttonbox;
                QAction *help;
                QAction *exit;
                QAction *idseacrh;
                QAction *idsearch;
                QMenu *file;
                QMenu *search;
                QMenuBar *menubar;
                QTableView *table;
}; 
```

**2 级**

```
class Box1 : public QDialog
{
        Q_OBJECT

        public:
                Box1(QWidget *parent=0);

        private:
                QLineEdit *text;
                QLabel *searchh;
                QDialogButtonBox *buttonboxx;
                QTableView *tablee;
                QGroupBox *tableegroup;
                QGroupBox *searchgroup;
}; 
```

该动作将在 Box 中打开 Box1。_*我创建并尝试上传的 _*窗口也有图像，但它说我需要 10 个声誉才能做到这一点，所以我无法做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:59:10.770

我不明白。如果我理解了这个问题，您只需将 QMenuBar 中的 QAction 连接到对应于使用 Box1 小部件创建新窗口的功能。在这里，您是如何做到这一点的简单示例：

```
void Box::newDialog()
{
    QVBoxLayout* lay = new QVBoxLayout;

    Box1* temp = new Box1(this);
    lay->addWidget(temp);

    QDialog dialog(this);
    dialog.setModal(true);
    dialog.setLayout(lay);
    dialog.setWindowTitle("Box1");

    dialog.exec();
} 
```

和

```
connect(Box1Action, SIGNAL(triggered()), this, SLOT(newDialog())); 
```

或更简单：

```
myMenu->addAction(tr("Create Box1 Window"), this, SLOT(newDialog())); 
```

# php - 如何在PHP中将前两个单词移动到后面的两个单词？

> ID：11361575
> 
> 赞同：0
> 
> 时间：2012-07-06T11:45:21.053
> 
> 标签：php

我知道这有点奇怪，*但我需要这个来完成我的任务*。

我想将前两个单词移到后面的两个单词中，例如在我的（错误）代码中：

```
<?
$sentence = "zero one two three four five six seven eight";
$sentence2 = explode (" ",$sentence);
$total = count($sentence2);
for ($i = 4; $i < $total; ++$i) {
$result = $sentence2[2]." ".$sentence2[3]." ".$sentence2[0]." ".$sentence2[1]."  ".$sentence2[$i];
}
echo "Original sentence : ".$sentence;
echo "<br>Result : ".$result;
?> 
```

但该代码的结果不是我想要的，结果是

```
two three zero one eight 
```

我想要结果：

```
two three zero one four five six seven eight 
```

你能帮我写一个更好的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:49:02.283

每次循环内的代码运行时，`$result`变量都会收到一个新值。

您应该只在序列末尾**附加**单词。

所以，用`for`这个替换你的循环：

```
$result = $sentence2[2]." ".$sentence2[3]." ".$sentence2[0]." ".$sentence2[1];
for ($i = 4; $i < $total; ++$i) {
    $result .= "  ".$sentence2[$i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:58:34.307

您也可以在这种情况下使用[array_splice](http://cn.php.net/manual/en/function.array-splice.php)

```
$sentence = "zero one two three four five six seven eight";
$words    = explode(" ",$sentence,3);
$base     = explode(" ",$words[2]);
array_splice($base,2,0,array($words[0],$words[1]));
echo implode(" ",$base); 
```

或一条线解决方案，:-)

```
echo preg_replace('#^(\w+\s+)(\w+\s+)(\w+\s+)(\w+\s+)#','$3$4$1$2',$sentence); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:50:23.280

问题是你一直覆盖结果。所以当它第一次通过你的for循环时，字符串将是

```
two three zero one five 
```

第二次将是

```
two three zero one six 
```

等等

但是您只会看到它以 8 结尾，因为您仅在末尾输出字符串。您应该将新字符串存储在变量中并将下一个数字附加到该变量中。它应该是这样的；

```
<?
$sentence = "zero one two three four five six seven eight";
$sentence2 = explode (" ",$sentence);
$total = count($sentence2);
$result = $sentence2[2]." ".$sentence2[3]." ".$sentence2[0]." ".$sentence2[1]."  ";
for ($i = 4; $i < $total; ++$i) {
$result = $result."  ".$sentence2[$i];
}
echo "Original sentence : ".$sentence;
echo "<br>Result : ".$result;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T11:55:08.490

这很好地解决了问题。

```
$sentence = "zero one two three four five six seven eight";
$sentenceParts = explode (" ",$sentence);

$itemCount = count($sentenceParts);
$result = $sentenceParts[2]." ".$sentenceParts[3]." ";
for($i = 0; $i < $itemCount; $i++) {
    if($i != 2 && $i !=3) {
        $result .= $sentenceParts[$i]." ";
    }
}

echo $result; 
```

# jquery - jQuery - 根据数量减去单价

> ID：11361580
> 
> 赞同：0
> 
> 时间：2012-07-06T11:45:47.963
> 
> 标签：jquery, subtraction

**我想要实现的目标：**
我想从：
`<span class="item_price cd_price">0.53</span>`
当输入：
`<input type="text" value="50" class="item_Quantity cd_quantity">`
大于 100 时减去 0.09。

**我试过的：**

```
$('.cd_quantity').blur(function(){
       if ( $(this).val() >= 50 && $(this).val() <= 99 ) {
         $('.cd_price').text('0.53')
       }
       if ( $(this).val() >= 100 && $(this).val() <= 199 ) {
         $('.cd_price').text('0.44')
       }
    }) 
```

尽管所有这些都是替换跨度的内容。而且我对查询的总和不太了解。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:01:32.597

如果数量变回 100 以下，您将需要一种方法来安全地获取数量后的商品价格。

有这样的标记：

```
<span class="item_price cd_price" data-item_price="0.53"></span>

<input type="text" value="50" class="item_Quantity cd_quantity"> 
```

和你的 javascript：

```
$(".cd_quantity").on("keyup", function() {
    var item_price = $(".cd_price").data("item_price");
    var discount = 0;

    if (this.value > 100) discount = 0.09;
    $(".cd_price").text((item_price - discount).toFixed(2));
}).trigger("keyup");​ 
```

**演示：http:** [//jsfiddle.net/MpBXY/](http://jsfiddle.net/MpBXY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:49:06.543

按照您的任务，可以按如下方式完成：

```
$(".cd_quantity").on("blur", function() {
    if (this.value > 100) {
        $(".cd_price").text(function(i, val) {
            return (val - 0.09).toFixed(2);
        });
    }
});​ 
```

**演示：http:** [//jsfiddle.net/GSTcR/](http://jsfiddle.net/GSTcR/)

# opengl - GL_TEXTURE_RECTANGLE_ARB

> ID：11361583
> 
> 赞同：1
> 
> 时间：2012-07-06T11:46:04.983
> 
> 标签：opengl, textures

我尝试使用 GL_TEXTURE_RECTANGLE_ARB 使用数据原始纹理：

```
void Display::tex(){

GLubyte Texture[16] =
{    
0,0,0,0, 0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF, 0,0,0,0
};
GLuint Nom;
glLoadIdentity();//load identity matrix
glTranslatef(0.0f,0.0f,-4.0f);//move forward 4 units

glEnable(GL_DEPTH_TEST);    //Active le depth test
glDisable( GL_CULL_FACE );

glEnable (GL_TEXTURE_RECTANGLE_ARB);

glPixelStorei(GL_UNPACK_ROW_LENGTH, 2);

glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

glGenTextures(1, &Nom);

glBindTexture(GL_TEXTURE_RECTANGLE_ARB, Nom);

glTexParameteri(GL_TEXTURE_RECTANGLE_ARB,

                GL_TEXTURE_MIN_FILTER, GL_LINEAR);

glTexImage2D(GL_TEXTURE_RECTANGLE_ARB, 0, GL_RGBA8, 2, 2,

                0, GL_BGRA_EXT, GL_UNSIGNED_INT_8_8_8_8_REV, Texture);
angle  = 0.01 * glutGet ( GLUT_ELAPSED_TIME );
glRotatef(angle,0,1,1);

glBegin(GL_QUADS);  //Et c'est parti pour le cube !

glTexCoord2i(0,0);glVertex3i(-1,-1,-1);
glTexCoord2i(1,0);glVertex3i(+1,-1,-1);
glTexCoord2i(1,1);glVertex3i(+1,+1,-1);
glTexCoord2i(0,1);glVertex3i(-1,+1,-1);

//1 face

glTexCoord2i(0,0);glVertex3i(-1,-1,+1);
glTexCoord2i(1,0);glVertex3i(+1,-1,+1);
glTexCoord2i(1,1);glVertex3i(+1,+1,+1);
glTexCoord2i(0,1);glVertex3i(-1,+1,+1);

//2 faces

glTexCoord2i(0,0);glVertex3i(+1,-1,-1);
glTexCoord2i(1,0);glVertex3i(+1,-1,+1);
glTexCoord2i(1,1);glVertex3i(+1,+1,+1);
glTexCoord2i(0,1);glVertex3i(+1,+1,-1);

//3 faces

glTexCoord2i(0,0);glVertex3i(-1,-1,-1);
glTexCoord2i(1,0);glVertex3i(-1,-1,+1);
glTexCoord2i(1,1);glVertex3i(-1,+1,+1);
glTexCoord2i(0,1);glVertex3i(-1,+1,-1);

//4 faces

glTexCoord2i(1,0);glVertex3i(-1,+1,-1);
glTexCoord2i(1,1);glVertex3i(+1,+1,-1);
glTexCoord2i(0,1);glVertex3i(+1,+1,+1);
glTexCoord2i(0,0);glVertex3i(-1,+1,+1);

//5 faces

glTexCoord2i(1,0);glVertex3i(-1,-1,+1);
glTexCoord2i(1,1);glVertex3i(+1,-1,+1);
glTexCoord2i(0,1);glVertex3i(+1,-1,-1);
glTexCoord2i(0,0);glVertex3i(-1,-1,-1);

//6 faces
glEnd();

glFlush();
} 
```

结果不是很好：

[http://shareimage.ro/images/xdkyd12oty44c0qpuo1b.png](http://shareimage.ro/images/xdkyd12oty44c0qpuo1b.png)

立方体的所有面都应具有 4 个正方形的纹理（2 个黑色和 2 个白色）。

我不知道错误在哪里......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T14:12:45.093

[GL_ARB_texture_rectangle](http://www.opengl.org/registry/specs/ARB/texture_rectangle.txt)扩展使用维度相关的纹理坐标。使用`[0..W]x[0..H]`纹理坐标范围，而不是标准化坐标范围 [0..1]x[0..1]。

例如，在四边形上绘制完整图像；

```
glTexCoord2f(0, 0);                     glVertex3f(...); // top-left
glTexCoord2f(0, imageHeight);           glVertex3f(...); // bottom-left
glTexCoord2f(imageWidth, imageHeight);  glVertex3f(...); // bottom-right
glTexCoord2f(imageWidth, 0);            glVertex3f(...); // top-right 
```

请注意，使用 GL_ARB_texture_rectangle 扩展有几个限制。

1.  不支持 Mipmap 过滤。
2.  不支持纹理边框。
3.  不支持 GL_REPEAT 换行模式。
4.  不支持调色板纹理。
5.  纹理坐标由 [0..w]x[0..h] 寻址。

幸运的是，OpenGL 还提供了[GL_ARB_texture_non_power_of_two](http://www.opengl.org/registry/specs/ARB/texture_non_power_of_two.txt)扩展来解决上述限制，同时它仍然支持 NPOT（Non Power Of Two）纹理。

GL_ARB_texture_non_power_of_two 的最大优点是；

1.  GL_ARB_texture_non_power_of_two 使用传统的归一化纹理坐标**[0..1]x[0..1]**。

2.  它不需要额外的纹理目标标记、用于 glEnable()、glTexImage*D()、 **glBindTexture** () 等的 GL_TEXTURE_RECTANGLE_ARB。也就是说，您仍然可以像往常一样将 GL_TEXTURE_2D 用于 NPOT 纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:35:09.267

使用纹理矩形，纹理坐标是绝对像素位置。在您的情况下，您的纹理坐标将是 0,0 2,0 2,2 0,2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T23:12:04.023

***它现在正在工作，请参阅下一个：***

```
GLubyte Texture[16] =
{
0,0xFF,0,0xFF, 0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF, 0,0,0,0
};
GLuint Nom;
glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );   //Efface le framebuffer et le depthbuffer
glMatrixMode(GL_MODELVIEW);     //Un petit gluLookAt()...
glLoadIdentity();//load identity matrix
glTranslatef(0.0f,0.0f,-4.0f);//move forward 4 units
angle  = 0.1 * glutGet ( GLUT_ELAPSED_TIME );
glRotatef(angle,0,2,2);
glEnable(GL_TEXTURE_2D);
glEnable (GL_TEXTURE_RECTANGLE_ARB);
glPixelStorei(GL_UNPACK_ROW_LENGTH, 2);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
glGenTextures(1,&Nom);  //Génère un n° de texture
glBindTexture(GL_TEXTURE_2D,Nom);   //Sélectionne ce n°
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, 4, 4, 0, GL_RGB,GL_UNSIGNED_BYTE, Texture);
glTexParameterf(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); // GL_CLAMP_TO_EDGE
glTexParameterf(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); // GL_CLAMP_TO_EDGE
glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexImage2D(GL_TEXTURE_RECTANGLE_ARB, 0, GL_RGBA8, 2, 2, 0, GL_BGRA_EXT, GL_UNSIGNED_INT_8_8_8_8_REV, Texture);
glBegin(GL_QUADS);
glTexCoord2i(0,0);glVertex3i(-1,-1,-1);
glTexCoord2i(2,0);glVertex3i(+1,-1,-1);
glTexCoord2i(2,2);glVertex3i(+1,+1,-1);
glTexCoord2i(0,2);glVertex3i(-1,+1,-1);
//1 face
glTexCoord2i(0,0);glVertex3i(-1,-1,+1);
glTexCoord2i(2,0);glVertex3i(+1,-1,+1);
glTexCoord2i(2,2);glVertex3i(+1,+1,+1);
glTexCoord2i(0,2);glVertex3i(-1,+1,+1);
//2 faces
glTexCoord2i(0,0);glVertex3i(+1,-1,-1);
glTexCoord2i(2,0);glVertex3i(+1,-1,+1);
glTexCoord2i(2,2);glVertex3i(+1,+1,+1);
glTexCoord2i(0,2);glVertex3i(+1,+1,-1);
//3 faces
glTexCoord2i(0,0);glVertex3i(-1,-1,-1);
glTexCoord2i(2,0);glVertex3i(-1,-1,+1);
glTexCoord2i(2,2);glVertex3i(-1,+1,+1);
glTexCoord2i(0,2);glVertex3i(-1,+1,-1);
glEnd();
glDisable(GL_TEXTURE_2D); 
```

# android - android-检测低电量通知的方式

> ID：11361584
> 
> 赞同：3
> 
> 时间：2012-07-06T11:46:10.867
> 
> 标签：android, notifications, battery

有没有办法在 android eclipse 中检测低电量通知？我有一个动作游戏需要在它出现时暂停。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:49:23.383

官方开发者网站上有一个关于监控电池电量和充电状态的教程。我希望它对你有帮助。

[http://developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:56:36.503

这篇文章可能有助于全面了解[电池电量](https://stackoverflow.com/questions/3661464/get-battery-level-before-broadcast-receiver-responds-for-intent-action-battery-c)还查看此链接[电池电量和状态](https://stackoverflow.com/questions/3291655/get-battery-level-and-state-in-android)

# ruby - Ruby正则表达式匹配来自单个字符串的多个变量

> ID：11361587
> 
> 赞同：0
> 
> 时间：2012-07-06T11:46:39.680
> 
> 标签：ruby, regex

对红宝石相当陌生。我正在尝试解析一个字符串并使用正则表达式分配几个变量。

我已经查阅了文档，用谷歌搜索了一下，并且很确定以下内容应该有效。

```
@operating_system, @os_update, @os_arch = @version_line[0].match(
        /(Solaris \d+)\s+\d+\/\d+\ss\d+[sx]_u(\d+)\wos_\d+\w+\s+(\w+)$/
        ) 
```

在哪里`@version_line = [" Oracle Solaris 10 9/10 s10x_u9wos_14a X86\n"]`

但发生的只是我的第一个变量，@operating_system 被分配`Solaris 10 9/10 s10x_u9wos_14a X86`

我试图以错误的方式去做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:52:42.500

实际上，`match`返回一个`MatchData`对象，该对象恰好有一个`to_s`方法可以生成您看到的字符串。

要将所有匹配的捕获组作为数组获取，请使用以下`captures`方法：

```
@operating_system, @os_update, @os_arch = @version_line[0].match(
        /(Solaris \d+)\s+\d+\/\d+\ss\d+[sx]_u(\d+)\wos_\d+\w+\s+(\w+)$/
        ).captures 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:52:41.213

使用这个正则表达式`(Solaris \d+)\s+\d+/\d+\s\w+\s\w+`

# tridion - 如何让 Custom Deployer 将数据写入 MS SQL 数据库？

> ID：11361594
> 
> 赞同：2
> 
> 时间：2012-07-06T11:47:14.680
> 
> 标签：tridion, tridion2009, tridion-content-delivery

我在 config/cd_deployer_conf.xml 的默认处理器中添加了一个自定义模块：

```
<Processor Action="Deploy" Class="com.tridion.deployer.Processor">
            ...
            <Module Type="MyCustomModuleDeploy" Class="com.tridion.new.extensions.MyCustomModule">
            </Module>
</Processor> 
```

该模块的代码如下所示：

```
public class MyCustomModule extends com.tridion.deployer.modules.PageDeploy {

     static Logger logger = Logger.getLogger("customDeployerFirst");

    public MyCustomModule(Configuration config, Processor processor)
            throws ConfigurationException {
        super(config, processor);
        // TODO Auto-generated constructor stub
    }

    public void processPage(Page page, File pageFile) throws ProcessingException {
        // TODO Auto-generated method stub
            Date d = new Date();
        log.info("WORKING");
        log.info("Page ID: " + page.getId().toString());
        log.info("Publication date: "+ d.toString());
    }

} 
```

在我的日志文件中，每次发布页面时，我都会获得所需的信息。

我接下来要做的是在我之前创建的表中将页面 ID 和发布日期写入我的 Microsoft SQL 数据库。我怎样才能做到这一点？如何从 MyCustomModule 访问数据库表？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:38:25.923

不确定您的要求，但您已经选择了部署扩展模型与存储扩展。通过存储扩展，Tridion 将提供一个关于如何扩展存储的模型（例如可以扩展的 JPAFramework 和 Base DAOEntities）。如果您要走部署者扩展路线，正如 Quirin 和 Nuno 所提到的，这就像编写任何其他应用程序一样的标准 JDBC 代码。

但是，我建议您也查看存储扩展模型，看看它是否符合您的要求。一个很好的起点是查看以下文章：[http ://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:45:09.530

好的，所以我在这里为解决我的问题所做的正是 Quirijn 的建议。使用 JDBC 驱动程序连接到我的数据库，然后执行 sql 更新查询：

```
int sqlStatement = st.executeUpdate("insert into Pages values ('" + page.getId().toString()+ "', '" + ... + "')"); 
```

这样，每次发布页面时，都会将一些数据写入我的数据库。

# c# - SignalR：远程服务器返回错误：（500）内部服务器错误

> ID：11361595
> 
> 赞同：1
> 
> 时间：2012-07-06T11:47:17.277
> 
> 标签：c#, asp.net-mvc-3, signalr

我已经在我的 MVC 项目中安装了 signalR 的客户端和服务器；我可以从网络客户端调用我的集线器；

```
var testHub;
$(function () {
    // Setup SignalR
    testHub = $.connection.myhub;
    testHub.msg = function (ref) {
        alert(ref);
    };

    $.connection.hub.start(function () {
        testHub.addToQueue("TESTMSG");
    });

}); 
```

在控制器上，我需要在处理一些请求后调用我的集线器；所以我添加了对 SignalR.Client.dll -Version(0.5.2.0) 和 Newtonsoft.Json.dll(4.5.0.0) 运行时 4 的引用。

我的控制器调用如下

```
 var connection = new HubConnection("http://localhost:50439/");
        IHubProxy myHub = connection.CreateProxy("myhub");
        connection.Start().Wait();
        myHub.Invoke("addToQueue", new { message = "Hello world" }).ContinueWith(task =>
        {

        }, TaskContinuationOptions.OnlyOnFaulted); 
```

我的集线器如下所示：

```
 [HubName("myhub")]
public class QueueHub:Hub
{
    public void addToQueue(string message)
    {
        Clients.msg(message);
    }
} 
```

但是当来自控制器的调用发生时，系统会出现以下错误：读取字符串时出错。意外标记：StartObject。路径''，第 1 行，位置 46.，JsonSerializer

并详细说明：

```
---> (Inner Exception #0) System.AggregateException: One or more errors occurred
. ---> System.Net.WebException: The remote server returned an error: (500) Inter
nal Server Error.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at SignalR.Client.Http.HttpHelper.<>c__DisplayClass2.<GetHttpResponseAsync>b_
_0(IAsyncResult ar) in C:\Documents and Settings\mrafeeq\My Documents\Downloads\
SignalR-SignalR-0.5.0-231-g7808c90\SignalR-SignalR-7808c90\SignalR.Client\Http\H
ttpHelper.cs:line 19 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:39:05.020

您错误地调用了服务器端方法。你需要这样做：

```
myHub.Invoke("addToQueue", "Hello world").ContinueWith(task =>
{

}, TaskContinuationOptions.OnlyOnFaulted); 
```

# android - INTENT.ACTION_VIDEO_CAPTURE 未将文件保存到自定义位置 Uri

> ID：11361597
> 
> 赞同：4
> 
> 时间：2012-07-06T11:47:22.783
> 
> 标签：android, android-intent

我创建了一个这样的应用程序。它有一个 Button ，单击按钮开始视频捕获。

现在我有一个这样的代码：-

```
public class VideoCaptureComponentActivity extends Activity implements View.OnClickListener {
    VideoView vv;
    ImageButton ib;
    TextView tv;
    Intent i;
    final static int cameraData=0;
    File path = null;
    Uri myVideo;

    private static final int CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE = 200;
    private Uri fileUri;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main);

        vv= (VideoView) findViewById(R.id.vvVideoCapture);
        ib=(ImageButton) findViewById(R.id.btnVideo);
        ib.setOnClickListener(this);
        tv= (TextView) findViewById(R.id.tvFilePath);
    }

    @Override
    public void onClick(View v) {               
        switch(v.getId())
        {
            case R.id.btnVideo:
                Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
                fileUri = getOutputMediaFileUri();  // create a file to save the video
                intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);  // set the image file name
                intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0); // set the video image quality to high

                // start the Video Capture Intent
                startActivityForResult(intent, CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE);
                break;
        }

    }

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
     if (requestCode == CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE) 
     {
            if (resultCode == RESULT_OK) 
            {
                myVideo= data.getData();
                tv.setText(myVideo.toString());
                vv.setVideoURI(myVideo);
                vv.setMediaController(new MediaController(this));
                vv.requestFocus();
                vv.start(); 
            }           
    }
}

/** Create a file Uri for saving an image or video */
private static Uri getOutputMediaFileUri()
{
      return Uri.fromFile(getOutputMediaFile());
}

/** Create a File for saving an image or video */
private static File getOutputMediaFile()
{
    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES), "MyCameraApp");

    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }
    File mediaFile;
    mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "VID_CAPTURED" + ".mp4");
   return mediaFile;
}

} 
```

现在，在我捕获视频后，应用程序崩溃了。

```
07-06 17:12:09.447: E/AndroidRuntime(2917): FATAL EXCEPTION: main
07-06 17:12:09.447: E/AndroidRuntime(2917): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=200, result=-1, data=Intent {  }} to activity {com.optimus.mobile.survey/com.optimus.mobile.survey.VideoCaptureComponentActivity}: java.lang.NullPointerException
07-06 17:12:09.447: E/AndroidRuntime(2917):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3712)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3754)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at android.app.ActivityThread.access$2800(ActivityThread.java:135)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2162)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at android.os.Looper.loop(Looper.java:143)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at android.app.ActivityThread.main(ActivityThread.java:4914)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at java.lang.reflect.Method.invokeNative(Native Method)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at java.lang.reflect.Method.invoke(Method.java:521)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at dalvik.system.NativeStart.main(Native Method)
07-06 17:12:09.447: E/AndroidRuntime(2917): Caused by: java.lang.NullPointerException
07-06 17:12:09.447: E/AndroidRuntime(2917):     at com.optimus.mobile.survey.VideoCaptureComponentActivity.onActivityResult(VideoCaptureComponentActivity.java:82)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at android.app.Activity.dispatchActivityResult(Activity.java:3931)
07-06 17:12:09.447: E/AndroidRuntime(2917):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3708)
07-06 17:12:09.447: E/AndroidRuntime(2917):     ... 11 more 
```

基本上问题是
在代码中

```
Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
fileUri = getOutputMediaFileUri();  
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);  
intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0); 
```

这里没有将文件保存到位置集，我不知道是什么问题。我从这个链接[http://developer.android.com/guide/topics/media/camera.html 获取了这段代码](http://developer.android.com/guide/topics/media/camera.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T11:53:52.953

不，如果您要通过`Uri`保存图像或视频，那么`putExtra(MediaStore.EXTRA_OUTPUT, fileUri);`您总是`data.getData();`以. 因此使用意图传递的图像或视频：`onActivityResult``NULL``Uri`

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
     if (requestCode == CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE) 
     {
            if (resultCode == RESULT_OK) 
            {
              //  myVideo= data.getData();
                tv.setText("Video"); 
                vv.setVideoURI(fileUri);//set Uri here which you passed with Intent
                vv.setMediaController(new MediaController(this));
                vv.requestFocus();
                vv.start(); 
            }           
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T04:54:57.960

```
private static String FILE_NAM1  = "video_one";

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(requestCode == VIDEO_ACTIVITY) {
        Uri videoFileUri = data.getData();
        String outputfile = getFilesDir() + File.separator+FILE_NAM1+"_tmp.mp4";

        try {
            InputStream in = getContentResolver().openInputStream(videoFileUri);
            MainActivity.createFileFromInputStream(in, outputfile);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("saved uri is "+videoFileUri.toString());
        Intent intent = new Intent(getBaseContext(), VideoActivity.class);
        intent.putExtra("video_uri",videoFileUri);
        startActivity(intent);
    }
}

private static File createFileFromInputStream(InputStream inputStream, String fileName) {

   try{
      File f = new File(fileName);
      f.setWritable(true, false);
      OutputStream outputStream = new FileOutputStream(f);
      byte buffer[] = new byte[1024];
      int length = 0;

      while((length=inputStream.read(buffer)) > 0) {
        outputStream.write(buffer,0,length);
      }

      outputStream.close();
      inputStream.close();

      return f;
   }catch (IOException e) {
       System.out.println("error in creating a file");
       e.printStackTrace();
   }

   return null;
} 
```

删除 intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); 从本意

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:56:08.553

我将此代码用于录制并保存视频：

```
private String name_vid; 
private static int REC_VIDEO = 1;
public void rec_vid(View v) {
    //set name & path to vid
    name_vid = Environment.getExternalStorageDirectory()+"/videos/myvid.mp4";
    //check if folder exists, else, create it
    File path = new File(Environment.getExternalStorageDirectory()+"/videos/");
    if (!path.exists())
    path.mkdirs();
    //create the intent
    Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
    int code = REC_VIDEO;
    Uri output = Uri.fromFile(new File(name_vid));
    //Add extra to save video
    intent.putExtra(MediaStore.EXTRA_OUTPUT, output);
    startActivityForResult(intent, code);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REC_VIDEO) {
        if (resultCode == -1) {
            //create a MediaScanner to save the vid into the indicate path
            new MediaScannerConnectionClient() {
                private MediaScannerConnection msc = null;
                {
                    msc = new MediaScannerConnection(
                            getApplicationContext(), this);
                    msc.connect();
                }

                public void onMediaScannerConnected() {
                    msc.scanFile(name_vid, null);
                }

                public void onScanCompleted(String path, Uri uri) {
                    msc.disconnect();

                }
            };
            Toast.makeText(this,"Video saved succesfull",
                    Toast.LENGTH_SHORT).show();
        }

    }
} 
```

请记住，您必须在他的清单中设置权限使用：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# ruby-on-rails - 在 Rails 3.2 中消除通知 Flash 消息的方法

> ID：11361598
> 
> 赞同：1
> 
> 时间：2012-07-06T11:47:26.590
> 
> 标签：ruby-on-rails, forms, ruby-on-rails-3.2

创建记录或使用设计登录时，有没有办法消除标准 Rails 3.2 论坛通知？就像在 twitter-bootstrap 中一样，您可以单击一个叉号来关闭通知消息。

我希望在标准表格中也有类似的方式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T13:18:50.890

你问是否有更简单的方法。没有内置的方法可以做到这一点......你需要做这样的事情：

```
<% if flash[:notice] %>
  <p class="notice"><%= flash[:notice] %></p>
<% end %>
<% if flash[:error] %>
  <p class="error"><%= flash[:error] %></p>
<% end %> 
```

在你的 app/assets/javascripts/flash.js.coffee

```
$ ->
  $(".notice, .error").on("click", (event)->
    $(event.target).hide("slow")
  ) 
```

这将使它在您单击 .notice 或 .error 时，它会慢慢隐藏（淡出）。为此，您可以包含一个 X 图标来关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:02:09.047

据我了解，您不希望收到任何特定操作的通知，因此请从您的布局文件夹中的 application.rb 文件中删除 <%= notice%> 。

我希望我正确理解了你的问题。

# wordpress - 在 header.php 中使用主题选项

> ID：11361599
> 
> 赞同：0
> 
> 时间：2012-07-06T11:47:28.400
> 
> 标签：wordpress

我目前正在研究一个主题，我希望用户能够更改徽标图像。我使用 NHP 主题框架。但不知为何

```
<?php
echo $options['logo'];
?> 
```

在 header.php 中什么都不做。它适用于 index.php 但不适用于 header.php ......我怎样才能让它在标题中回显？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:00:59.697

纯属猜测。但在许多框架中，关闭标签 ?> 可能会导致问题。试一试

```
<?php
echo $options['logo']; 
```

没有关闭标签，如果你有纯 php 文件。

# emacs - 如何在 Emacs 中为 LaTeX 模式定义两个 ispell 字典？

> ID：11361603
> 
> 赞同：4
> 
> 时间：2012-07-06T11:47:42.277
> 
> 标签：emacs, latex, ispell

我有一份文件，其中有许多第二语言的引文。如何将这种第二语言定义为 Ispell？我在文件顶部有这个：

```
%% Local IspellDict: brasileiro 
```

我试过这个，但没有奏效：

```
%% Local IspellDict: brasileiro, english 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T10:27:23.417

我有办法在两种语言之间切换：

```
;; You should have aspell-ru and aspell-en packages installed
(let ((langs '("english" "russian")))
  (setq lang-ring (make-ring (length langs)))
  (dolist (elem langs) (ring-insert lang-ring elem)))
(defun cycle-ispell-languages ()
  (interactive)
  (let ((lang (ring-ref lang-ring -1)))
    (ring-insert lang-ring lang)
    (ispell-change-dictionary lang)))

(global-set-key (kbd "C-1") 'cycle-ispell-languages) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T17:02:39.863

马科斯，我发现了这个：

[http://www.emacswiki.org/emacs/AutoLangMode](http://www.emacswiki.org/emacs/AutoLangMode)

[http://www.emacswiki.org/emacs/GuessLang](http://www.emacswiki.org/emacs/GuessLang)

我想第一个做你需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T14:58:27.193

请从[http://www.emacswiki.org/emacs/TN/#toc13](http://www.emacswiki.org/emacs/TN/#toc13)尝试 swL 模式。它适用于flyspell。选择当前点位置的文本字典。您应该根据自己的需要调整 swL-alist。语言标识符字符串（例如 \selectlanguage{...}）必须从行首开始。

同时，我还在下一页发现了 flyspell-babel.el：

[https://tex.stackexchange.com/questions/40988/how-can-i-make-auctex-spell-check-in-the-language-specified-by-babel-and-csquote](https://tex.stackexchange.com/questions/40988/how-can-i-make-auctex-spell-check-in-the-language-specified-by-babel-and-csquote)

我认为它更加用户友好（打包）。它不使用即时格式（jit-lock-mode）和文本属性，因此可能存在一些性能问题。但也许，这没问题，我只是太谨慎了。

# tomcat - Fresh and Empty Tomcat 7.0 安装吃大量 CPU

> ID：11361607
> 
> 赞同：0
> 
> 时间：2012-07-06T11:47:52.223
> 
> 标签：tomcat, ubuntu

ubuntu，11.04，11.10。tomcat 7.0.25-7.0.28，jdk sun 1.6_30 - 1.6_33。

解压，删除 webapp 文件夹。在 catalina 启动后 top 显示在 1cpu x64 4 核上 tomcat 占用了 170% 的 CPU。在 2cpu x64 4core 上显示高达 400%。

tomcat 中没有安装任何应用程序。试图找出消耗 CPU 的线程 - 下面是 5 个顶级线程：

```
"VM Periodic Task Thread" prio=10 tid=0x0000000040a7f000 nid=0x166c waiting on condition

"ajp-bio-8009-AsyncTimeout" daemon prio=10 tid=0x00007feaf0666800 nid=0x16ad sleeping[0x00007feafe011000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
        at java.lang.Thread.sleep(Native Method)
        at org.apache.tomcat.util.net.JIoEndpoint$AsyncTimeout.run(JIoEndpoint.java:148)
        at java.lang.Thread.run(Thread.java:662)

"http-bio-8080-AsyncTimeout" daemon prio=10 tid=0x000000004204f800 nid=0x16ab waiting on condition [0x00007feafead1000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
        at java.lang.Thread.sleep(Native Method)
        at org.apache.tomcat.util.net.JIoEndpoint$AsyncTimeout.run(JIoEndpoint.java:148)
        at java.lang.Thread.run(Thread.java:662)

"ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon prio=10 tid=0x0000000041d1b800 nid=0x16a9 sleeping[0x00007feafe405000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
        at java.lang.Thread.sleep(Native Method)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1517)
        at java.lang.Thread.run(Thread.java:662)

"VM Thread" prio=10 tid=0x0000000040a39000 nid=0x1665 runnable 
```

看起来没什么有趣的。所以，我被困住了。有谁知道去哪里更进一步？还有一件事：有几个设置几乎相同的虚拟盒子 - 从来没有看到如此巨大的 CPU 消耗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:59:11.620

我在java“VM Periodic Task Thread”中遇到了同样的cpu使用率高的问题。

问题的原因最终归结为闰秒的 linux 问题，详见这篇博文：[java 闰秒错误 – 2012 年 6 月 30 日/7 月 1 日 – 修复](http://blog.wpkg.org/2012/07/01/java-leap-second-bug-30-june-1-july-2012-fix/)。

按照那里列出的步骤（停止 ntpd、重置日期、重新启动 ntpd）为我解决了 CPU 使用率高的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:01:30.210

处于状态的线程`TIMED_WAITING`不需要 CPU 周期。只要所有线程都处于这种状态，Tomcat就不可能是负载的原因。

你还能做什么？

1.  在分析器中运行 Tomcat。与线程转储（仅显示当前状态）不同，分析器将收集分析信息。这将允许您查看哪些方法使用了多少时间。

2.  在 webapp 文件夹中至少保留一个应用程序。我不确定Tomcat在找不到**任何事情**可做时会做什么。

3.  检查 Tomcat 是否像您认为的那样查看 webapp 文件夹。也许环境变量会影响这一点。

4.  这可能是因为 Tomcat 正在启动。不太可能，但也许等待几分钟可能会有所帮助。

5.  你还剩多少内存？也不太可能，因为这会产生巨大的负载，但 CPU 会非常空闲。

# c# - 将应用程序部署到测试环境时出现 Couchbase .Net SDK 错误

> ID：11361609
> 
> 赞同：0
> 
> 时间：2012-07-06T11:47:57.653
> 
> 标签：c#, asp.net-mvc, memcached, couchbase, enyim

我编写了一个 ASP.NET MVC 应用程序，它主要使用 couchbase 1.8。当我在我的开发环境中运行该应用程序时它可以工作，但是当我将它部署到我的测试环境中时，我收到以下错误。

```
System.NullReferenceException: Object reference not set to an instance of an object.
at Enyim.Caching.Memcached.DefaultKeyTransformer.Transform(String key) at
Enyim.Caching.Memcached.KeyTransformerBase.Enyim.Caching.Memcached.IMemcachedKeyTransforme
.Transform(String key) at Couchbase.CouchbaseClient.PerformStore(StoreMode mode,
String key, Object value, UInt32 expires, UInt64& cas, Int32& statusCode) at
Enyim.Caching.MemcachedClient.Store(StoreMode mode, String key, Object value, DateTime
expiresAt) at MyApp.AddInActiveSession(String key, DateTime expires)... 
```

我的配置如下所示：

```
<couchbase>
  <servers bucket="default" bucketPassword="">
    <add uri="http://xxxxx:8091/pools"/>
  </servers>
</couchbase> 
```

调用代码是：

```
using (var client = new CouchbaseClient())            
{
  var session = client.Get<string>(idString);
  return session;
} 
```

和

```
using (var client = new CouchbaseClient())
{
    client.Store(StoreMode.Set, idString,
    "Logged Out",
    expires);                
} 
```

有没有人有任何线索是什么问题？

# apache - htaccess 不能正常工作

> ID：11361611
> 
> 赞同：2
> 
> 时间：2012-07-06T11:48:12.970
> 
> 标签：apache, .htaccess, redirect

我使用以下重定向页面。

```
RedirectMatch 301 /mytake/huts(.*) /mytake/surveys/$1 
```

并且有效，实际上更改了我不想要的地址栏中的 URL。

我尝试了以下这根本不起作用。

```
RewriteRule ^mytake/huts$ mytake/surveys/ [L,R=301] 
```

我的问题是为什么第二行不起作用？？？

我的测试网址是：[http](http://www.mydomain.com/mytake/huts) ://www.mydomain.com/mytake/huts （不要点击，把它当作测试网址:)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:25:43.093

如果我理解正确：

```
RewriteEngine on
RewriteRule ^mytake/huts/(.*)$ mytake/surveys/$1 [L,QSA] 
```

地址将保持不变。

PS 运行命令`a2enmod rewrite`并检查 conf 文件中的 AllowOverride 指令。

# tcl - 如何使用 Tcl 在 ns-2 中实现应用层行为

> ID：11361613
> 
> 赞同：1
> 
> 时间：2012-07-06T11:48:19.583
> 
> 标签：tcl, snmp, ns2, otcl

笨拙的标题，道歉。

我对 ns-2 很陌生，我的意思是我可以很好地创建模拟，只要我不需要在核心功能之外做任何事情。

我想制作一个非常简单的 SNMP 模型（因为我找不到 ns-2 的 SNMP 模型），这实际上是 1 个节点轮询子网上的所有其他节点，而其他节点响应的情况。这将根据轮询速率每 n 秒发生一次。

使用间隔参数设置 CBR UDP 代理来模拟轮询很容易，但是让其他节点在收到数据包时做出响应的最佳方法是什么？或者这甚至是最好的方法吗？

我问这个的本意不是指望有人在这里贴一个庞大的 C++ 脚本来帮助我，而是因为从我可以通过谷歌搜索找到的内容暗示，使用 Tcl 接口应该非常简单。

有没有人知道我在说什么，如果有的话，有什么有用的指示吗？

非常感谢，邓肯

# java - 如何从嵌套类 Java 中调用方法？

> ID：11361616
> 
> 赞同：2
> 
> 时间：2012-07-06T11:48:28.050
> 
> 标签：java, nested-class

如何调用 methodTwo(); 来自方法一（）；?

```
class Name {
    void methodOne() {
        class InnerClass {
           void methodTwo() {
           }
         }
     }
 } 
```

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T11:51:22.083

您需要创建 的实例，`InnerClass`就像任何其他实例方法都需要一个实例来调用它一样：

```
class Name {
   void methodOne() {
     class InnerClass {
       void methodTwo() {
       }
     }

     InnerClass x = new InnerClass();
     x.methodTwo();
   }
} 
```

这样做之前值得小心——我认为我*从未见过*在我与之关联的生产代码的方法中声明的命名类。通常我会使用匿名内部类来做一些非常短的事情，或者使用私有静态命名类来做更长的事情，以避免使方法太长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:53:39.603

```
class Name {
    void methodOne() {
        class InnerClass {
           void methodTwo() {
               new InnerClass().methodTwo();
           }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-06T11:55:04.627

非静态嵌套类与包含类绑定，但它可以是嵌套类的多个实例和一个包含实例。因此，您需要指定要对其运行方法的实例名称。

# shopify - Shopify API 的订单响应中的令牌字段是什么？

> ID：11361618
> 
> 赞同：1
> 
> 时间：2012-07-06T11:48:32.807
> 
> 标签：shopify

从 Shopify API 获取订单时，会包含一个名为的[字段](http://api.shopify.com/order.html)`token`。文档页面或[wiki 页面](http://wiki.shopify.com/Order_%28API%29#Get_a_single_order)中没有此文件的详细信息。

这个领域是什么？它是来自支付处理器的令牌吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:53:06.667

这是结帐期间使用的 Order 对象的唯一标识符。它不是来自支付处理器的字段。

# jqgrid - 如何在 JQGrid 表格单元格中附加数据？

> ID：11361620
> 
> 赞同：0
> 
> 时间：2012-07-06T11:48:36.950
> 
> 标签：jqgrid

我创建了 JQGrid。

我已将数据放入单元格中，并将一个 html 链接放入单元格中。

该链接的 OnClick 我需要打开 JQGrid 特定的 popUp.Popup 有一个组合框。我将选择一个选项并单击提交按钮，并且该数据需要出现在单击的单元格中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:33:31.630

你建议的结构似乎我太复杂了。也许您可以考虑使用更简单的用户界面？

不过，您可以只使用[setCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)方法来设置网格单元格的新包含。

# xml - 使用最新的 NativeXml (v4.03 svn)，是否可以在不迭代检查类型的情况下使用前后空格获取元素的值？

> ID：11361621
> 
> 赞同：5
> 
> 时间：2012-07-06T11:48:37.300
> 
> 标签：xml, delphi, whitespace, nativexml

如下所示，最新的 NativeXml (v4.03 svn) 将元素的值分为三部分：前面的空白、char 数据和尾随空白。因此，可以迭代地检查元素的子节点以获取带有前后空格的值。但是，对于传统的 NativeXml (v3.10)，这不是必需的，因此我想知道这样做的首选方式是什么（可能没有这种迭代检查/字符串连接）？

### 示例 XML 文档

```
<?xml version="1.0" encoding="UTF-8" ?>
<CDXML><s>beforeLineBreak
</s></CDXML> 
```

### 示例 XML 文档

```
<?xml version="1.0" encoding="UTF-8" ?>
<CDXML><s>
afterLineBreak</s></CDXML> 
```

### 使用不需要迭代检查的 NativeXml v3.10 的示例代码

```
procedure XXX310;
var
  element: TXmlNode; 
  elementType: TElementType;
begin
  elementType := element.ElementType;
  element.ElementType := xeCharData;
  ... element.ValueAsString ...
  element.ElementType := elementType;      
end; 
```

### NativeXml v3.10相关源码（完整方法体）

```
function TXmlNode.GetValueAsString: UTF8String;
begin
  if FElementType = xeNormal then
    Result := UnEscapeString(sdUTF8Trim(FValue))
  else
    Result := UnEscapeString(FValue);
end; 
```

### 使用需要迭代检查的 NativeXml v4.03 svn 的示例代码

```
procedure XXX403;
var
  tempString: String;
  element: TXmlNode; // actually TsdElement
begin
  tempString := '';
  for I := element.DirectNodeCount to element.NodeCount - 1 do
    if element.Nodes[I] is TsdCharData then
       tempString := tempString + (element.Nodes[I] as TsdCharData).Value;

  ... tempString ...
end; 
```

### NativeXml v4.03 svn相关源码（不完整的类型声明或方法体）

```
unit NativeXml;
interface

  // TXmlNode is the ancestor for all nodes in the xml document. See TsdElement
  // for the elements, TsdAttribute for the attributes.
  TXmlNode = class(TDebugPersistent)
  Public
    // The value of the node. For elements this is the element value (based on
    // first chardata fragment), for attributes this is the attribute value. The
    // string is encoded as UTF8\. Use ToWide(Node.Value) or Node.ValueUnicode
    // to get a UnicodeString compatible with "unicode" windows methods.
    property Value: Utf8String read GetValue write SetValue;
  end;

  // Node representing an xml element.
  TsdElement = class(TsdContainerNode)
  protected
    // parses the value in descendants TsdElement and TsdDocType
    procedure ParseIntermediateData(P: TsdXmlParser); override;
  end;

implementation

function TsdElement.GetValue: Utf8String;
begin
  // Return the value of the CharData subnode designated by the parser
  if (FValueIndex >= 0) and (FValueIndex < FNodes.Count) then
  begin
    // chardata value at FValueIndex
    // This calls TsdCharData.GetValue(),
    // then TsdCharData.GetCoreValue().
    Result := FNodes[FValueIndex].Value;

    // do un-normalisation if mac/windows
    if GetEolStyle <> esLF then
      Result := sdUnNormaliseEol(Result, GetEolStyle);

  end else
    // default value
    Result := '';
end;

procedure TsdElement.ParseIntermediateData(P: TsdXmlParser);  
begin  
  CharDataString := sdTrim(S, PreString, PostString);

  if GetPreserveWhiteSpace and (Length(PreString) > 0) then
  begin
    WhiteSpaceNode := TsdWhiteSpace.Create(TNativeXml(FOwner));
  end;

  if length(CharDataString) > 0 then
  begin
    // Insert CharData node
    CharDataNode := TsdCharData.Create(TNativeXml(FOwner));
  end;  

  if GetPreserveWhiteSpace and (Length(PostString) > 0) then
  begin
    WhiteSpaceNode := TsdWhiteSpace.Create(TNativeXml(FOwner));
  end;
end;

end. 
```

# javascript - css 动画移动页面 - 使用 css 修复当前元素上的页面滚动位置？

> ID：11361628
> 
> 赞同：1
> 
> 时间：2012-07-06T11:49:09.827
> 
> 标签：javascript, css

给定以下简化问题：

```
foreach i in 1..100 do
    <div onclick="$("div").attr('class','expand');">block i</div> 
```

这个CSS：

```
div {
    height: 20px;
    transition: height 0.5s;
}

div.expand {
    height: 50px;
} 
```

现在，当我单击一个 div 时，每个 div 都会得到“扩展”类。这意味着页面将展开。但是，一切都会向下滚动。这意味着如果我单击 div 50，它可能不再出现在我的窗口中，我必须向下滚动才能再次看到它。

我想让我点击的 div 留在屏幕的中心。这可以通过 CSS 实现，还是我需要 JS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:36:34.520

该函数根据鼠标点击的位置滚动页面：

```
$(document).ready(function(){
    $('div').click(function(e){
        var offsetY = e.pageY -  $(window).scrollTop();
        $('div').attr('class','expand');
        $(window).scrollTop($(this).offset().top-offsetY);
    });
}); 
```

[jsFiddle](http://jsfiddle.net/lalatino/uRFg7/)上的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:59:18.120

有可能......你可以`.scrollTop()`像这样使用jQuery的方法：

```
$(window).scrollTop( $('.your_element').offset().top + $('.your_element').height() - $(window).height() ); 
```

# c# - 从 MVC .net 应用程序中的 Linq Query 的集合中排除行

> ID：11361631
> 
> 赞同：0
> 
> 时间：2012-07-06T11:49:18.587
> 
> 标签：c#, linq, entity-framework

这是对此处回答的问题的后续问题：[Excluding dates from Linq Query in MVC .net application](https://stackoverflow.com/questions/11340977/excluding-dates-from-linq-query-in-mvc-net-application) - 我非常感谢。

我希望有人可以在下面的 Linq 查询中检查我的语法 - 以确认它是否是构建查询的最佳方式，或者我对语法的使用是否效率低下。

```
public class Room 
{ 
    public int RoomId { get; set; } 
    [Display(Name = "Room Name")] 
    public string Name { get; set; } 
    public bool Disabled { get; set; } 
    public virtual ICollection<Client> Clients { get; set; } 
    } 

public class Client 
{ 
    public int ClientId { get; set; } 
    public int RoomId { get; set; } 
    public string ClientName { get; set; } 
    public DateTime Arrival { get; set; } 
    public DateTime Departure { get; set; } 
    public virtual Room Room { get; set; } 
} 
```

客户为每个预订了特定房间的客户列出一行。我有 3 个房间，房间 1、房间 2 和房间 3。所以客户表中的条目可能是：

```
Client 1, Room 1, Mr Smith, Arr: 2012-07-08, Dep: 2012-07-10
Client 2, Room 1, Mr Jones, Arr: 2012-07-14, Dep: 2012-07-20
Client 3, Room 2, Mr Alas,  Arr: 2012-07-12, Dep: 2012-07-15 
```

给定到达和离开日期，我正在尝试获取我的整个房间列表，并带走任何有客户入住的到达或离开日期重叠的房间。因此，使用上面的数据，如果我的到达日期为 2012 年 7 月 12 日，出发日期为 2012 年 7 月 13 日，那么房间 2 将不可用，但是房间 1 没有任何跨越该日期的预订- 所以房间 1 我想留在我的结果集中。

所以我的 Linq 查询（我是 Linq 的新手，所以请指出我可能出错的地方）是：

```
var dteFrom = DateTime.Parse("2012-07-12");
var dteTo = DateTime.Parse("2012-07-13");
var rooms = (from r in Rooms
                where !r.Clients.Any(
            client =>
                ( dteFrom >= client.Arrival && dteFrom <= client.Departure )
                ||
                ( dteTo >= client.Arrival && dteFrom <= client.Departure )
                ||
                ( dteFrom <= client.Arrival && dteTo >= client.Departure )
                )
            select r); 
```

鉴于我希望包括所有房间，除了任何符合标准的房间，任何人都可以确认我使用 .Any 和 ! 和 || 就LINQ而言是正确的吗？

语法中有没有更好的方法，从房间列表中排除记录？

再次感谢您的帮助，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:06:00.607

对我来说看起来不错 - 可能有助于提高可读性的一件事是分两步编写查询：

```
var prebookedRooms = rooms
    .Where(room => room.Clients.Any(client => 
    (dteFrom >= client.Arrival && dteFrom <= client.Departure) ||
    (dteTo >= client.Arrival && dteFrom <= client.Departure)   ||
    (dteFrom <= client.Arrival && dteTo >= client.Departure)));

var freeRooms = rooms.Except(prebookedRooms); 
```

请记住，仅在枚举结果时才执行查询 - 因此分两步执行此操作不会产生性能成本。

# c# - Foreach 模板中的枚举类型

> ID：11361635
> 
> 赞同：0
> 
> 时间：2012-07-06T11:49:37.900
> 
> 标签：c#, templates, .net-4.0, enums

```
enum MyEnum
{
type1,
type2,
type3
}

public void MyMethod<T>()
{
...
} 
```

如何在枚举上制作 forach 以`MyMethod<T>`在每个枚举上触发？

我尝试一下

```
foreach (MyEnum type in Enum.GetValues(typeof(MyEnum)))
{...} 
```

但仍然不知道如何`type`在 foreach 中使用 this 和`MyMethod<T>`as T

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:02:35.573

这是你想要做的吗？

```
class Program
{
    static void Main(string[] args)
    {
        EnumForEach<MyEnum>(MyMethod);
    }

    public static void EnumForEach<T>(Action<T> action)
    {
        if(!typeof(T).IsEnum)
            throw new ArgumentException("Generic argument type must be an Enum.");

        foreach (T value in Enum.GetValues(typeof(T)))
            action(value);
    }

    public static void MyMethod<T>(T enumValue)
    {
        Console.WriteLine(enumValue);
    }
} 
```

写入控制台：

```
type1
type2
type3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:57:04.560

此代码片段演示了如何在消息框中将所有枚举值显示为链式字符串。以同样的方式，您可以使该方法在枚举上执行您想要的操作。

```
namespace Whatever
{
    enum myEnum
    {
        type1,type2,type3
    }

    public class myClass<T>
    {
        public void MyMethod<T>()
        {
            string s = string.Empty;
            foreach (myEnum t in Enum.GetValues(typeof(T)))
            {
                s += t.ToString();
            }
            MessageBox.Show(s);
        }
    }

    public void SomeMethod()
    {
        Test<myEnum> instance = new Test<myEnum>();
        instance.MyMethod<myEnum>(); //wil spam the messagebox with all enums inside
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:52:44.417

你可以做

```
private List<T> MyMethod<T>()
{
    List<T> lst = new List<T>;

    foreach (T type in Enum.GetValues(source.GetType()))
    {
        lst.Add(type); 
    }

   return lst;
} 
```

并将其称为

```
List<MyEnum> lst = MyMethod<ResearchEnum>(); 
```

# android - Android：在 SQLite 中有效地将大图像存储为 BLOB，而不会降低它们的质量

> ID：11361638
> 
> 赞同：1
> 
> 时间：2012-07-06T11:49:46.230
> 
> 标签：android, sqlite, bitmap

我正在尝试将来自设备的相机应用程序的位图存储在设备的`SQLite`数据库中。我知道将图像作为 BLOB 存储在数据库中并不是最好的方法，但是就我而言，我无法避免它。问题是图像可能非常大，因为它们来自设备的默认相机应用程序，我不想显着降低图像质量。假设我无法避免在内存中加载该图像的位图实例（或至少该图像的字节数组），因为我需要它形成插入`SQLite`查询，我怎么能确定我不会有内存问题（`OutOfMemmoryError`)? 有没有办法做到这一点而无需缩小（或至少不以明显的比例缩小图像质量）？

PS 我已经阅读了有关有效加载位图的 android 开发人员部分。

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-19T02:20:46.990

即使您设法将大图像存储在数据库中，您也将无法检索它。 [Db 游标大小限制](https://stackoverflow.com/questions/5406429/cursor-size-limit-in-android-sqlitedatabase "Db blob 检索大小限制")。

# android - 我的 PendingIntents 和系统时间更改

> ID：11361643
> 
> 赞同：1
> 
> 时间：2012-07-06T11:50:00.123
> 
> 标签：android

好的，伙计们，我有这个重复的任务要做，所以我安排了cupple警报：

```
private static void scheduleAlarm(Context context, AlarmManager alarmManager, String action, long interval) {
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, new Intent(action), PendingIntent.FLAG_UPDATE_CURRENT);
        alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + interval, pendingIntent);
} 
```

但是，当我更改系统时间时，我所有的警报都被破坏了，即它们最终会触发，但是当系统时间与警报时间相同时。

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:02:28.037

当用户更改系统时间时，会使用此 Intent 操作广播一个事件：`android.intent.action.TIME_SET`

您可以收听此 Intent 并重新安排闹钟。

# .net - Visual Studio 2012 中的私有访问器

> ID：11361647
> 
> 赞同：6
> 
> 时间：2012-07-06T11:50:10.217
> 
> 标签：.net, unit-testing, visual-studio-2012, private-members

据我所知，Visual Studio 2012 不支持私有访问器。你能给我一些关于可能的替代方案的信息吗？PrivateObject.Invoke() 对我来说不是最好的解决方案。

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T00:41:19.457

将您的成员标记为“内部”并使用 InternalsVisibleTo 属性。使用简单，没有类型安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T07:30:06.190

我开始使用*动态私有*访问器功能，它是 nuget 包[Chaining Assertion for MSTest 的一部分](https://www.nuget.org/packages/ChainingAssertion/)，我对此非常满意。一个失去强类型，但至少语法仍然可读。这适用于*动态*功能。还有其他测试框架的包。测试代码如下所示：

```
var target = CreateMyObjectUnderTest();
dynamic dynamicTarget = target.AsDynamic();
Assert.AreEqual("abc", dynamicTarget.MyPrivateProperty);
Assert.AreEqual("xyz", dynamicTarget.PrivateMethod(123)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T09:11:11.820

也许这个发布[的 Visual Studio 2012+ 的自制私有访问器](http://blog.instance-factory.com/?p=810)将帮助您创建自己的私有访问器。

问候，

斯特凡

# objective-c - 如何通过单元测试测试是否将行添加到数据库中？

> ID：11361654
> 
> 赞同：0
> 
> 时间：2012-07-06T11:50:25.437
> 
> 标签：objective-c, ios, unit-testing

我将 xml 传递给我的 addRowToTheDatabase 函数。在这个函数中，我只是解析 xml 文件并将元素检索到 xml 文件中。现在我正在测试这个应用程序。如何从单元测试用例中测试是否添加到数据库中的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:06:57.143

// 我非常快地处理了我的一个查询。我假设您已经在 SQLite 中连接到一个数据库，所以其中大部分是不需要的。但这是查询的基本结构。只要数据库驻留在您的应用程序本身中。

```
-(void) basicQuery
{
    @try {  
        NSFileManager *fileManager = [NSFileManager defaultManager]; 
        NSString *theDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"databasename.sqlite"]; 
        BOOL success = [fileManager fileExistsAtPath:theDBPath]; 
        if (!success) {
            NSLog(@"Failed to find database file '%@'.", theDBPath);
        } 
        if (!(sqlite3_open([theDBPath UTF8String], &database) == SQLITE_OK)) { 
            NSLog(@"An error opening database, normally handle error here.");  
        }  

        const char *sql = "SELECT * FROM TABLE"; // your basic query
        sqlite3_stmt *statement; 
        if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL) != SQLITE_OK){ 
            NSLog(@"Error, failed to prepare statement, normally handle error here."); 
        } 
        while (sqlite3_step(statement) == SQLITE_ROW) { 
          NSString *value = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 0)]; 
           NSLog(@"value = %@",value);

        } 
        if(sqlite3_finalize(statement) != SQLITE_OK){ 
            NSLog(@"Failed to finalize data statement, normally error handling here."); 
        } 
        if (sqlite3_close(database) != SQLITE_OK) { 
            NSLog(@"Failed to close database, normally error handling here."); 
        } 
    } 
    @catch (NSException *e) { 
        NSLog(@"An exception occurred: %@", [e reason]); 
        return nil; 
    } 
} 
```

# jquery - 任何人都可以在下面的代码上帮助我，它不适用于 IE 吗？

> ID：11361655
> 
> 赞同：-2
> 
> 时间：2012-07-06T11:50:31.427
> 
> 标签：jquery

它适用于除 IE 之外的所有浏览器。我正在按当前 li 值在 div 中加载页面。

```
<ul>    
<li>HOME</li>
<li>GALLARY</li>
<li>FAQ</li>
<li>CONTACT</li>
</ul>

<div class="result"></div>

$('.result').load( $(this).text() + '.html') is not working in IE.

$('ul li').click( function (){
    $('ul li').css({background: "#333", color: "white"});
    $(this).css({background: "red", color: "white"});       
    var dataShow = $(this).text();
    $('.result').load( dataShow + '.html');
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:15:04.423

您好，请提供更多详细信息，我自己尝试过，效果很好，请查看：[可能的解决方案](http://jsfiddle.net/jaiwo99/JR39j/1/)。但是，如果您尝试做类似的事情

```
$('result').load('http://www.example.com/index.html'); 
```

由于跨站点脚本，它不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:43:02.993

我得到了 IE 的解决方案。看看下面我做了什么。我不知道这是否是正确的做法，但它对我有用。

```
 $('ul li').click( function (){
    $('ul li').css({background: "#333", color: "white"});
    $(this).css({background: "red", color: "white"});       
    var url = $.trim($(this).html()) + '.html';
    $('.result').load(url);
    return false;
}); 
```

# php - 按是或否排序

> ID：11361657
> 
> 赞同：3
> 
> 时间：2012-07-06T11:50:34.643
> 
> 标签：php, mysql, sql

我搜索了带有日期的文章。在 MySQL 中是：

```
Article:
id | title
1  | first
2  | second
3  | third
4  | fourth 
```

日期文章：

```
id | article_id | from       | to
1  |     1      | 10-10-2010 | 11-11-2010
2  |     2      | 11-10-2010 | 12-12-2010
3  |     1      | 13-12-2010 | 12-01-2012
4  |     3      | 11-11-2012 | 12-12-2012
5  |     4      | 02-02-2013 | 02-02-2014 
```

我想获取所有带有日期的文章并按可用性排序。

例如，我想获取所有文章并按日期从 12-10-2011 到 12-01-2012 排序

这应该返回我：

1.  第一个（在 FROM TO - DatesArticle.id = 3 范围内）
2.  第三个（在 FROM TO - DatesArticle.id = 4 范围内）
3.  第二个（不在 FROM TO 范围内）
4.  第四（不在 FROM TO 范围内）

这对 SQL 或 SQL 和 PHP 可行吗？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:59:27.103

使用子句 CASE，例如：

```
SELECT * FROM DatesArticle
ORDER BY CASE 
WHEN id=3 AND CURRENT_DATE()<=from and to < CURRENT_DATE()>=to THEN 1
WHEN <condition_2> THEN 2
etc...
ELSE <any other condition>
END 
```

并不是说上面的内容会按原样工作，但它给了你和想法。如果您添加一个您尝试过的查询示例，或者您如何构建您的 where 子句，这将有助于获得更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:46:48.823

您必须首先加入表才能访问文章的数据。

然后您按逻辑条件订购（如果给定范围内有日期）。

```
SELECT title
FROM Article JOIN DatesArticle
  ON (Article.id = DatesArticle.id)
  ORDER BY DatesArticle.from > LastDate AND DatesArticle.to < FirstDate DESC; 
```

（我从来没有在逻辑排序上得到正确的 ASC 和 DESC——试着看看会发生什么）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:29:28.150

我的想法是当它的 id= 3 分配 1，如果 id = 4 分配 2，任何其他值分配 3，然后按照您分配的数字进行 where 条件和排序。

尝试这个：

```
select *,  
      case when t1.id=3 then 1 when t1.id=4 then 2 else 3 end as t
from article as t1 
join DatesArticle as t2 
on t1.id=t2.id
where CURRENT_DATE()<=from 
and to < CURRENT_DATE()
order by t 
```

# .net - 为什么 WinForms Control.Bottom 和 Control.Right 是只读的？

> ID：11361660
> 
> 赞同：2
> 
> 时间：2012-07-06T11:50:48.303
> 
> 标签：.net, winforms, controls

我知道可以通过操纵`Control.Top`和来对齐控件的底部`Control.Height`。同样`Control.Right`。但是为什么.NET 决定不让这些属性直接被修改呢？自从最近几次我一直在处理控制定位以来，这令人沮丧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T12:28:02.120

## **简短的回答：**

我相信他们已经制作`Bottom`和`Right`只读了，不是因为它在技术上是必要的，而是作为一种记录方式，当/或/被修改时，*这些*属性会被重新计算。`Top``Height``Left``Width`

## **更长的答案：**

有两种属性集：一种用于绝对坐标 ( `Top`, `Bottom`, `Left`, `Right`)，另一种用于维度 ( `Height`, `Width`)。它们之间的关系通过以下两个不变量来定义：

1.  `Width == Right - Left`
2.  `Height == Bottom - Top`

现在，例如，如果 Microsoft 决定该`Top`属性应该是可写的，他们需要做出进一步的设计决策：是否会改变`Top`...

*   影响`Height`和保存`Bottom`,或
*   保存`Height`和影响`Bottom`？

除非他们引入某种允许用户选择的进一步“锚”属性，否则 Microsoft*必须*决定其中一个结果以保证上述不变式 (2)。

显然，他们选择了两种选择中的后者。接下来，微软需要记录他们的决定。他们可以`Top`在他们的 MSDN 参考页面上提到调整的后果......事实证明他们就是这样做的：

> *对`Height`和`Top`属性值所做的更改会导致`Bottom`控件的属性值发生更改。*—[属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.top.aspx)[的 MSDN 参考页面的备注部分`Control.Top`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.top.aspx)

...或者他们可以将该`Bottom`属性声明为只读，向我们的程序员建议该属性取决于其他两个（`Top`和`Height`）...他们*也*这样做了：

> *该`Bottom`属性是只读属性。`Top`您可以通过更改或属性的值来操作此属性值`Height`[...]* —该[属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.bottom.aspx)[的 MSDN 参考页面的备注部分`Control.Bottom`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.bottom.aspx)

所以他们用英语和另外的代码记录了他们的（任意）设计决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T12:16:35.850

引用 Eric Lippert 的话：“你一直在问‘为什么？ [功能]显然应该如何设计的概念；为什么不是这样？” “

“为什么不呢？”的答案 问题可能在：

1.  这个“功能”（可设置的底部和右侧属性）没有被提议/被认为没有用
2.  可设置的 Right 和 Bottom 的行为是模棱两可的 - 我是重新调整相关控件的大小（更改高度/宽度）还是重新定位（更改顶部/右侧）。对于这里的“正确”行为，不同的人会有不同的看法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T12:17:15.453

由于`Bottom`和`Right`是计算出来的，因此操作例如 Bottom like `Bottom = 100`将转换为`(Top + Height) = 100`. 那个动作会模棱两可，你是想改变控件的高度还是要重新定位它？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T12:18:04.863

因为坐标系是基于左上角的。(0,0) 是屏幕的左上角，所有基于位置的测量都相对于 (0,0)。在设置左上角坐标时，你的意思很清楚：位置。然而，右下角坐标更加模糊，因为它们还涉及高度和宽度（如前所述）。

如果将 5 添加到 Right 属性会发生什么？位置会改变，还是宽度会改变？这不是一个有用或有意义的功能。

编辑：

> 如果 left 和 top 不涉及调整大小，那么为什么要 bottom 和 right 呢？

因为坐标系基于左上角，而不是右下角。GDI，或您用来绘制控件的任何系统，根据通用原点 (0,0) 和控件上相对于该原点的一点来计算位置。因为通用原点是屏幕的左上角，所以使用控件的左上角作为定位点是最有意义的。

想象一下这两种情况：

场景 1 - 控件不计算右下角坐标，它实际上存储了这些坐标。GDI 已准备好绘制控件。左上角坐标设置为 (10,10)，高度为 10，宽度为 10，右下角坐标为 (25,25)。控件应该怎么画？

场景 2 - 不是计算右下角坐标，而是计算高度和宽度。左上角设置为 (20,20)，右下角设置为 (10,10)。控件应该怎么画？

通过将程序员限制在左上角和高度/宽度，上述情况将永远不会发生，从而节省处理时间和意外错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T11:54:59.650

因为`Right`是由 决定的`Left+Width`，`Bottom`是由 决定的`Top+Height`。

您可以使用`Left`、`Top`、`Width`和`Height`来同样有效地定位控件。

这些属性理论上可以设置，但我猜他们认为这样做可能会导致太多问题。

因为底层架构不支持`Right`和`Bottom`，所以只让它们计算属性可能太方便了。

好吧，我承认，我猜。我看不出有什么明确的理由。您可能需要就此与 .NET 开发团队联系。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T11:55:06.930

如果要更改 a 的大小或位置`Control`，可以更改[Control.Location](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)和[Control.Size](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.size.aspx)属性。我相信`Control.Bottom`and`Control.Right`属性是从这些其他属性中计算出来的。

# java - Google App Engine VS Cloud Foundry

> ID：11361661
> 
> 赞同：-1
> 
> 时间：2012-07-06T11:50:54.687
> 
> 标签：java, spring, web-applications

我想使用java创建一个应用程序。它将是一个基于 Web 的应用程序。谁能告诉我哪一个是更好的 Google App Engine 或 Cloud Foundry。如果你告诉我这两者之间的区别，这对我很有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:01:34.627

这是一些非常好的比较： [http ://cloudcomputing.sys-con.com/node/2265743](http://cloudcomputing.sys-con.com/node/2265743)

但这真的取决于您的需求——您使用什么类型的 Web 应用程序？你在用eclipse吗（不知道Cloud Foundry，但是app engine有一个很好的插件）？性能、数据库或大表、管理、用户数量等等。

# ruby-on-rails - 通过 has_many 关联禁用自动保存 - 从会话中断开 ActiveRecord 实体

> ID：11361668
> 
> 赞同：5
> 
> 时间：2012-07-06T11:51:17.383
> 
> 标签：ruby-on-rails, activerecord, has-many, autosave

Ruby on Rails 的默认行为是保存对集合关联所做的更改。有什么方法可以改变这种行为，这样我就可以修改内存中的集合，而无需将更改写入数据库。

因此，如果我有两个课程：

```
class Project < ActiveRecord::Base
  has_many :tasks

class Task < ActiveRecord::Base
  belongs_to :project 
```

并编写一些代码，例如：

```
Project.tasks.clear
Project.tasks << task1
Project.tasks << task2 
```

然后它会自动删除与项目关联的所有任务，并自动将更改写入数据库。

这是我试图实现的一个人为的例子。我知道我可以使用 Project.tasks.build() 在不自动保存的情况下向集合中添加新任务，但我添加的任务不是新任务。它们是定义的有限任务集的链接在分贝。您可以将它们视为任务枚举中的条目。此外 Project.tasks.clear 立即命中数据库。

在 java 世界中，使用 Hibernate，我会断开实体与会话的连接，并能够修改内存中的实体，直到重新连接并保存。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T20:07:22.387

您是否尝试过使用 task_ids 属性？

将您的代码更改为：

```
Project.tasks_ids = []
Project.tasks_ids << task1.id
Project.tasks_ids << task2.id 
```

我知道这个问题有点老了，但由于我试图在谷歌上搜索类似的问题，我认为这可能对其他人有用。

# android - xml webservice和tcp通信

> ID：11361671
> 
> 赞同：0
> 
> 时间：2012-07-06T11:51:27.303
> 
> 标签：android, xml, web-services, tcp, response

我有来自服务器的 xml 请求和 xml 响应，我必须通过 TCP 通信与服务器通信，我在 TCP 通信和基于 xml 的 web 服务方面没有任何经验。有没有人有想法？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:27:19.157

*   连接到 web 服务 url 并传递所需的 XML 输入
*   从服务器读取 XML 响应数据

这是`RestClient`课

```
import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.zip.GZIPInputStream;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpDelete;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpPut;
import org.apache.http.client.methods.HttpUriRequest;
import org.apache.http.entity.ByteArrayEntity;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.auth.BasicScheme;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.apache.http.protocol.HTTP;
import org.apache.log4j.Logger;

import android.content.Context;

public class RestClient {

    private static final Logger logger = Logger.getLogger("Telfaz");

    private boolean authentication;
    private ArrayList<NameValuePair> headers;

    private String jsonBody;
    private byte[] rawDataBytes;

    private String message;

    private ArrayList<NameValuePair> params;
    private String response;
    private int responseCode;

    private String url;

    // HTTP Basic Authentication
    private String username;
    private String password;

    protected Context context;

    public RestClient(String url) {
        this.url = url;
        params = new ArrayList<NameValuePair>();
        headers = new ArrayList<NameValuePair>();
    }

    // Be warned that this is sent in clear text, don't use basic auth unless
    // you have to.
    public void addBasicAuthentication(String user, String pass) {
        authentication = true;
        username = user;
        password = pass;
    }

    public void addHeader(String name, String value) {
        headers.add(new BasicNameValuePair(name, value));
    }

    public void addParam(String name, String value) {
        params.add(new BasicNameValuePair(name, value));
    }

    public void execute(RequestMethod method) throws Exception {
        switch (method) {
        case GET: {
            HttpGet request = new HttpGet(url + addGetParams());
            request = (HttpGet) addHeaderParams(request);
            executeRequest(request, url);
            break;
        }
        case POST: {
            HttpPost request = new HttpPost(url);
            request = (HttpPost) addHeaderParams(request);
            request = (HttpPost) addBodyParams(request);
            executeRequest(request, url);
            break;
        }
        case PUT: {
            HttpPut request = new HttpPut(url);
            request = (HttpPut) addHeaderParams(request);
            request = (HttpPut) addBodyParams(request);
            executeRequest(request, url);
            break;
        }
        case DELETE: {
            HttpDelete request = new HttpDelete(url);
            request = (HttpDelete) addHeaderParams(request);
            executeRequest(request, url);
        }
        }
    }

    private HttpUriRequest addHeaderParams(HttpUriRequest request)
            throws Exception {

        for (NameValuePair h : headers) {
            request.addHeader(h.getName(), h.getValue());
        }

        if (authentication) {

            UsernamePasswordCredentials creds = new UsernamePasswordCredentials(
                    username, password);
            request.addHeader(new BasicScheme().authenticate(creds, request));
        }

        return request;
    }

    private HttpUriRequest addBodyParams(HttpUriRequest request)
            throws Exception {
        if (rawDataBytes != null) {
            request.addHeader("Content-Type", "application/x-gzip");
            if (request instanceof HttpPost)
                ((HttpPost) request).setEntity(new ByteArrayEntity(rawDataBytes));
        }
        else if (jsonBody != null) {
            request.addHeader("Content-Type", "application/json");
            if (request instanceof HttpPost)
                ((HttpPost) request).setEntity(new StringEntity(jsonBody,
                        "UTF-8"));
            else if (request instanceof HttpPut)
                ((HttpPut) request).setEntity(new StringEntity(jsonBody,
                        "UTF-8"));

        } else if (!params.isEmpty()) {
            if (request instanceof HttpPost)
                ((HttpPost) request).setEntity(new UrlEncodedFormEntity(params,
                        HTTP.UTF_8));
            else if (request instanceof HttpPut)
                ((HttpPut) request).setEntity(new UrlEncodedFormEntity(params,
                        HTTP.UTF_8));

        }
        return request;
    }

    private String addGetParams() throws Exception {
        StringBuffer combinedParams = new StringBuffer();
        if (!params.isEmpty()) {
            combinedParams.append("?");
            for (NameValuePair p : params) {
                combinedParams.append((combinedParams.length() > 1 ? "&" : "")
                        + p.getName() + "="
                        + URLEncoder.encode(p.getValue(), "UTF-8"));
            }
        }
        return combinedParams.toString();
    }

    public String getErrorMessage() {
        return message;
    }

    public String getResponse() {
        return response;
    }

    public int getResponseCode() {
        return responseCode;
    }

    public void setContext(Context ctx) {
        context = ctx;
    }

    public void setJSONString(String data) {
        jsonBody = data;
    }

    /**
     * Sets the rawDataBytes.
     *
     * @param rawDataBytes <tt> the rawDataBytes to set.</tt>
     */
    public void setRawDataBytes(byte[] rawDataBytes) {
        this.rawDataBytes = rawDataBytes;
    }

    private void executeRequest(HttpUriRequest request, String url) {

        DefaultHttpClient client = new DefaultHttpClient();
        HttpParams params = client.getParams();

        // Setting 30 second timeouts
        HttpConnectionParams.setConnectionTimeout(params, 30 * 1000);
        HttpConnectionParams.setSoTimeout(params, 30 * 1000);

        HttpResponse httpResponse;

        try {
            httpResponse = client.execute(request);
            responseCode = httpResponse.getStatusLine().getStatusCode();
            message = httpResponse.getStatusLine().getReasonPhrase();

            HttpEntity entity = httpResponse.getEntity();

            if (entity != null) {

                InputStream instream = entity.getContent();
                response = convertInputStreamToString(instream);
                // Closing the input stream will trigger connection release
                instream.close();
            }

        } catch (ClientProtocolException e) {
            client.getConnectionManager().shutdown();
            logger.error(Util.getStackTrace(e));
        } catch (IOException e) {
            client.getConnectionManager().shutdown();
            logger.error(Util.getStackTrace(e));
        }
    }

    private static String convertInputStreamToString(InputStream is) {
        final int BUFFER_SIZE = 32;
        StringBuilder string = null;
        try {
            BufferedInputStream gis = new BufferedInputStream(is, BUFFER_SIZE);
            string = new StringBuilder();
            byte[] data = new byte[BUFFER_SIZE];
            int bytesRead;
            while ((bytesRead = gis.read(data)) != -1) {
                string.append(new String(data, 0, bytesRead));
            }
            gis.close();
            is.close();
        } catch (IOException e) {
            logger.error(Util.getStackTrace(e));
        }
        if(string == null)return null;
        return string.toString();
    }

} 
```

这`RequestMethod`堂课

```
public enum RequestMethod {
    DELETE, GET, POST, PUT
} 
```

并在需要时使用这些类，如下所示：

```
public String communicateWithServer(String xmlInput) {

    String response = null;
    String webServiceUrl = "your-server-url";
    RestClient client = new RestClient(webServiceUrl);
    client.setJSONString(xmlInput);
    client.addHeader("Content-Type", "text/xml");
    try {
        client.execute(RequestMethod.POST);
        if (client.getResponseCode() != 200) {
            // handle error here
        }
        response = client.getResponse();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return response;
} 
```

# actionscript-3 - Flex 4 - 减少嵌套容器的数量以提高性能

> ID：11361673
> 
> 赞同：1
> 
> 时间：2012-07-06T11:51:30.280
> 
> 标签：actionscript-3, apache-flex, air, flex4, mxml

提高 Flex 应用程序性能的一个众所周知的事实是减少嵌套容器的数量，但这样做对我来说似乎特别困难。

我正在开发一个移动应用程序，并且在运行时调整我的一些组件的大小非常慢（我可以将组件切换到全屏并再次返回），我们说的是 500-1000 毫秒，这不是很好。不太复杂的组件会立即调整大小而没有明显的延迟，这就是我想要的所有组件。

让我们假设以下组件（当然简化了，有些组本身就是组件，但嵌套级别相当准确）；

```
<VGroup "the component's base">

   // I guess this is fine
   <HGroup "the component's title bar">
       <SkinnableContainer "title bar skin">
            <title bar components, labels etc. />
       </SkinnableContainer>
   </HGroup>

   <HGroup "options bar that has switchable components">
      <button />
      <array "holds 'views' for the options bar that can be switched">
           <HGroup "one option view">
               <option view contents, labels etc. />
           </HGroup>
           <HGroup "another option view">
               <option view contents, labels etc. />
           </HGroup>
      </array>
     <button />
   </HGroup> 
```

这就是基本的组件布局。我不确定选项栏是否可以优化，这两个按钮用于切换本身放置在按钮之间的内容，因此是上部的`HGroup`. 数组内的组件也需要水平对齐，因此 child `HGroup`s. 这已经下降到该组件中的嵌套级别 3，它本身已经是一个级别 3 的容器（由于我的导航）。

到组件的内容区；

```
 <Group "this is the content area">

     // this group needs two different layouts (vertical and horizontal) that
     // are switched based upon the user's choice of having the component maximised
     // or minimised 
     <layouts />

     // this list changes it's size based on the selected layout
     <List />

     this group also changes it's size based on the layout
     <VGroup>
        <scroller>
            // the group here holds a large label that needs to be scrollable
            <group>
        </scroller>
        <HGroup>
            <some basic components like `SkinnableContainer` and `Label` />
        </HGroup> 
     </VGroup>
   </Group> 
```

这几乎是我表现最差（布局调整大小）组件的布局，结束标签......

```
</VGroup> 
```

......我们完成了。

所以最大的问题是，是否有优化的空间？如果是这样，我可以从哪里开始？显然布局管理器在布局切换过程中要进行大量计算。不幸的是，由于这是一个移动应用程序，我根本无法使用绝对尺寸，因为我需要这个应用程序在各种平台和分辨率上工作，因此所有组都分配了相对尺寸，通常宽度和高度都是 100% .

我真的很想简化这一点，但我只是不知道从哪里开始。任何提示我可以做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:10:31.263

我在之前的项目中负责过很多相同的事情，虽然没有一颗灵丹妙药可以解决一大堆问题，但它符合“千张纸剪死”的理论。

一些基于您的改进示例：

**TitleBar：** skinnable容器也有layout属性，为什么不直接去掉外面的Group外壳，以SC为基础开始呢？

```
<!-- <HGroup "the component's title bar"> -->
   <SkinnableContainer id="originalGroupId" "title bar skin">
       <layout>
          <HorizontalLayout /> 
       <layout>
       <title bar components, labels etc. />
   </SkinnableContainer>
<!-- </HGroup> --> 
```

**OptionsBar：**不知道移动空间有没有限制，但是可以用一个使用INavigatorContent接口的容器吗？IE。本质上将使用一个`creationPolicy`标志，该标志只会创建容器的孙子，直到用户实际请求它。对于组，没有虚拟化的概念，因此所有组件都是在父级实例化时创建的。

```
<ViewStack "options bar that has switchable components">
  <button />
</ViewStack> 
```

**组件区域：**这变得更具挑战性，有时它有助于（至少它对我有用）从 10,000 英尺的角度查看您真正想要显示的信息。例如，滚动一个很长的标签，你可以使用类似 a 的东西`TextAera`吗？如果是这样，那将消除外壳：

```
// the group here holds a large label that needs to be scrollable
<TextArea text="my really large label">

</TextArea> 
```

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:27:06.240

可能无关紧要，但我也建议不要使用列表。也许它不一样，但我将我的一个组件从使用 List 更改为动态皮肤部件，并且所述组件的渲染明显更快（600 vs 100ms）。Spark 中的列表非常繁重。

# ms-word - 将我的 MS Word 断字设置保存为默认设置

> ID：11361680
> 
> 赞同：0
> 
> 时间：2012-07-06T11:52:03.373
> 
> 标签：ms-word

在 MS Word 2003 中，每次开始编辑文档时，我都会通过多次鼠标单击来设置断字的特定设置：工具 -> 语言 -> 断字，然后进行更改。

这是烦人和重复的。有什么方法可以使这些更改一次并在编辑任何其他文档时发现它们可用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:59:06.517

尝试在您的计算机上搜索“normal.dot” - 确保包含“搜索隐藏文件或文件夹”以找到它。

'Normal.dot' 是 MS word 的标准空白模板。打开文件，执行断字更改，然后保存覆盖旧的模板。

这应该将影响应用到使用此模板的所有其他文档。

# java - 我可以为 Maven 配置源位置吗？

> ID：11361683
> 
> 赞同：2
> 
> 时间：2012-07-06T11:52:16.407
> 
> 标签：java, eclipse, svn, maven

我正在使用通过 Maven 供应商特定存储库提供的特定 jar 库。存储库中只有 jar 文件，即没有源代码，也没有 javadocs。

但我知道，这些资源可以在 SVN 存储库中在线获得。我可以告诉 Maven 从特定的 SVN 位置下载特定 JAR 的源代码并且可能来自特定的修订号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:57:47.577

不，您不能告诉 maven 从 SVN 存储库下载源代码。Maven 期望在适当的 Maven 存储库中有各种工件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:54:14.833

您可以做的是告诉`Maven`在哪个`Repository`库中查找包括资源的库。如果源不以`Maven`存储库格式提供，您可以告诉您的 IDE（例如 Eclipse）直接从硬盘上的某个位置链接它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:05:11.253

jar 不存储在 SVN 存储库中，它们在使用 Maven 时存储在工件存储库中。将二进制工件（例如 jar 文件）置于版本控制之下被认为是不好的做法。

如果您想检查某个工件是否产生`sources`可`javadoc`通过 Maven Central 获得的工件，那么您可以签入：

*   [http://search.maven.org/](http://search.maven.org/)
*   [http://www.jarvana.com/](http://www.jarvana.com/)
*   [http://findjar.com/](http://findjar.com/)

如果您有自己的 Maven 存储库（例如 Nexus、Artifactory）等，您也可以使用它。

如果我理解正确，您的问题是这些工件的来源没有显示在您的 IDE 中。如果是这种情况，并且您确定它们会生成源代码/javadoc 工件，那么您可以设置您的 IDE 来解决这些依赖关系。

如果您使用的是 Eclipse，您将需要以下内容：

```
<project ...>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:09:50.917

在`pom.xml`文件中，您必须设置依赖项，例如：

```
<dependency>
         <groupId> junit </ groupId>
         <artifactId> junit </ artifactId>
         <scope> test </ scope>
         <version> 4.10 </ version>
</ dependency> 
```

我认为你看不到它的修订版，寻找包括资源和依赖项的库`pom.xml`。

# android - BitmapFactory.cpp 中的本机泄漏？

> ID：11361685
> 
> 赞同：1
> 
> 时间：2012-07-06T11:52:21.947
> 
> 标签：android, frameworks, java-native-interface, native, memory-leaks

平台/框架/基础/核心/jni/android/graphics/BitmapFactory.cpp:212 ...

```
 if (peeker.fPatchIsValid) {
     size_t ninePatchArraySize = peeker.fPatch->serializedSize();
     ninePatchChunk = env->NewByteArray(ninePatchArraySize);        **<= alloc here**
     if (NULL == ninePatchChunk) {
         return nullObjectReturn("ninePatchChunk == null");
     }
     jbyte* array = (jbyte*)env->GetPrimitiveArrayCritical(ninePatchChunk,
                                                           NULL);
     if (NULL == array) {
                                    **<= should we release ninePatchChunk here**
         return nullObjectReturn("primitive array == null");
     }
     peeker.fPatch->serialize(array);
     env->ReleasePrimitiveArrayCritical(ninePatchChunk, array, 0);
 } 
```

GC 将 realese 这个对象或者我们应该这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:31:57.347

因此，如果发生错误，这是否是泄漏？

# javascript - 谷歌地图 - 来自 VB.Net 的 JSON 标记

> ID：11361687
> 
> 赞同：0
> 
> 时间：2012-07-06T11:52:25.030
> 
> 标签：javascript, vb.net, json, google-maps

目前正在构建一个地图应用程序，从数据库中读取点。

这个级别的 Javascript 新手，所以现在有点迷失了。

从 SQL 数据源在 VB.Net 中创建 Json。

任何人都可以帮助编辑我的代码，以免创建新地图，将标记添加到现有地图中吗？我所做的任何编辑都不会加分。

VB.Net

```
Dim markers As New List(Of String)
Dim nearbyLocations = CType(sqlData.Select(DataSourceSelectArguments.Empty), DataView)
For Each location As DataRowView In nearbyLocations
    markers.Add(String.Format("{{ title: ""Name {0}"", position: new google.maps.LatLng({1}, {2}) }}", location("AccName"), location("Latitude"), location("Longitude")))
Next

Dim locations = "[" & String.Join(",", markers.ToArray()) & "]"
ClientScript.RegisterStartupScript(Me.GetType(), "LoadMap",_
     String.Format("init_map('map', {0}, {1}, 13, {2});", lat, lng, locations), True) 
```

脚本

```
function init_map(map_canvas_id, lat, lng, zoom, markers) {
var myLatLng = new google.maps.LatLng(lat, lng);

var options = {
    zoom: zoom,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};

map = new google.maps.Map(document.getElementById(map_canvas_id), options);

if (markers && markers.length > 0) {
    var bounds = new google.maps.LatLngBounds();

    for (var i = 0; i < markers.length; i++) {
        var marker = new google.maps.Marker(markers[i]);
        marker.setMap(map);

        bounds.extend(marker.getPosition());
    }

    map.fitBounds(bounds);
    map.setCenter(bounds.getCenter());
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:24:28.117

在后面的代码中：

```
Dim markers As New List(Of String)
Dim nearbyLocations = CType(sqlData.Select(DataSourceSelectArguments.Empty), DataView)
For Each location As DataRowView In nearbyLocations
    markers.Add(" { ""title"" : """ & location("AccName") & """, ""lat"" : " & location("Latitude") & ", ""long"" : " & location("Longitude") & " } ")
Next

Dim locations = "[" & String.Join(",", markers.ToArray()) & "]"
ClientScript.RegisterStartupScript(Me.GetType(), "LoadMap",_
    String.Format("init_map('map', {0}, {1}, 13, {2});", lat, lng, locations), True) 
```

在 aspx 页面中：

```
//<HTML> stuff....
//...
//...

var map;

function init_map(map_canvas_id, lat, lng, zoom, markers) {
var myLatLng = new google.maps.LatLng(lat, lng);

var options = {
    zoom: zoom,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};

map = new google.maps.Map(document.getElementById(map_canvas_id), options);

var positions = [<% Response.Write(String.Join(",", markers.ToArray())) %>];    
var marker;
var curPosition;
for (var i = 0; i < positions.length; i++) {
    curPosition = positions[i];
    marker = new google.maps.Marker({
        map: map,
        position: new google.maps.LatLng(curPosition.lat,curPosition.long),
        title: curPosition.title
    });
}

//..</HTML> stuff 
```

# r - 检查一个非常大的制表符分隔文件的唯一值

> ID：11361688
> 
> 赞同：1
> 
> 时间：2012-07-06T11:52:26.117
> 
> 标签：r, tabs

我有一个非常大的报告文件，我想检查一个名为 的特定列`Sample_id`以获取唯一值。我的数据如下所示：

```
 [1] "[Header]"                                                                               
 [2] "GSGT Version\t1.9.4"                                                                     
 [3] "Processing Date\t7/6/2012 11:41 AM"                                                      
 [4] "Content\t\tGS0005701-OPA.opa\tGS0005702-OPA.opa\tGS0005703-OPA.opa\tGS0005704-OPA.opa"       
 [5] "Num SNPs\t5858"                                                                          
 [6] "Total SNPs\t5858"                                                                        
 [7] "Num Samples\t132"                                                                        
 [8] "Total Samples\t132"                                                                      
 [9] "[Data]"                                                                                 
[10] "SNP Name\tSample ID\tGC Score\tAllele1 - AB\tAllele2 - AB\tChr\tPosition\tGT Score\tX Raw\tY Raw"
[11] "rs1867749\t106N\t0.8333\tB\tB\t2\t120109057\t0.8333\t301\t378"                                   
[12] "rs1397354\t106N\t0.6461\tA\tB\t2\t215118936\t0.6461\t341\t192"                                   
[13] "rs2840531\t106N\t0.5922\tB\tB\t1\t2155821\t0.6091\t296\t391"                                     
[14] "rs649593\t106N\t0.8709\tA\tB\t1\t37635225\t0.8709\t357\t200"                                     
[15] "rs1517342\t106N\t0.4839\tA\tB\t2\t169218217\t0.4839\t316\t210"                                   
[16] "rs1517343\t106N\t0.5980\tA\tB\t2\t169218519\t0.5980\t312\t165"                                   
[17] "rs1868071\t106N\t0.5518\tA\tB\t2\t30219358\t0.5518\t355\t229"                                    
[18] "rs761162\t106N\t0.6923\tA\tB\t1\t13733834\t0.6923\t315\t257"                                     
[19] "rs911903\t106N\t0.6053\tA\tA\t1\t46982589\t0.6096\t383\t158"                                     
[20] "rs753646\t106N\t0.6676\tA\tB\t1\t208765509\t0.6688\t341\t169" 
```

所以我的问题是如何`Sample_ID`使用 R 检查列的唯一值。我已经知道它的某些内容，`unique`但是如何使用制表符分隔的文件获取正确的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:56:23.350

首先读取文件：

```
sample_data <- read.table(file = "filename", sep = "\t", skip = 9, header = TRUE) 
```

然后执行（列名中的空格自动转换为点）

```
unique(sample_data[, "Sample.ID"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:18:36.073

如果数据在 R 对象中，比如说它被命名为“Lines”，那么您需要将 cafe876 提供的合理解决方案应用于 textConnection 调用或使用在最近版本中添加到 R 的 text= 参数：

```
samp_dat <-  read.table(file = textConnection(Lines), sep = "\t", skip = 9, header=TRUE) 
```

或者：

samp_dat <- read.table(text= Lines, sep = "\t", skip = 9, header=TRUE)

这是一个测试用例：

```
Lines <-
c("[Header]                                                                               ", 
"GSGT Version\t1.9.4                                                                     ", 
"Processing Date\t7/6/2012 11:41 AM                                                      ", 
"Content\t\tGS0005701-OPA.opa\tGS0005702-OPA.opa\tGS0005703-OPA.opa\tGS0005704-OPA.opa       ", 
"Num SNPs\t5858                                                                          ", 
"Total SNPs\t5858                                                                        ", 
"Num Samples\t132                                                                        ", 
"Total Samples\t132                                                                      ", 
"[Data]                                                                                 ", 
"SNP Name\tSample ID\tGC Score\tAllele1 - AB\tAllele2 - AB\tChr\tPosition\tGT Score\tX Raw\tY Raw", 
"rs1867749\t106N\t0.8333\tB\tB\t2\t120109057\t0.8333\t301\t378                                   ", 
"rs1397354\t106N\t0.6461\tA\tB\t2\t215118936\t0.6461\t341\t192                                   ", 
"rs2840531\t106N\t0.5922\tB\tB\t1\t2155821\t0.6091\t296\t391                                     ", 
"rs649593\t106N\t0.8709\tA\tB\t1\t37635225\t0.8709\t357\t200"
) 
```

# java - Java XML 验证和 MTOM

> ID：11361689
> 
> 赞同：3
> 
> 时间：2012-07-06T11:52:29.717
> 
> 标签：java, xml-validation, mtom

Java XML 验证是否支持启用 MTOM 的消息？在验证过程中引发了以下错误。

```
cvc-type.3.1.2: Element 'ns2:myblobData' is a simple type, so it must
have no element information item [children] 
```

但是，如果发送的消息没有 MTOM，则验证通过。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:00:46.793

如果启用了 MTOM，Web 服务客户端/服务器会将所有 base64Binary 类型字段的内容转换为单独的附件（称为 xop 包含）。由于 XML 验证在验证期间需要内容，因此它只会遇到 xop 包含标记（作为子标记）。所以它无法验证有效载荷，它会抛出给定的错误。

为了避免该错误，应在调用 XML 验证之前解析 xop 包含。

# iphone - iPhone - 扩展 UIImage 以在运行时自定义绘图

> ID：11361690
> 
> 赞同：2
> 
> 时间：2012-07-06T11:52:32.587
> 
> 标签：iphone, objective-c, uiimage, subclass

如何子类化并`UIImage`直接绘制？

我尝试扩展它并绘制`drawAtPoint:`或`drawInRect:`使用`CoreGraphics`，但它`image`是空白的。并且上述两种绘制方法都没有被调用。

请不要回答我可以借鉴，`UIView`因为我需要一个自定义运行时设计`UIImage`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:27:25.150

文件中明确说明`UIImageView`：

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImageView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImageView_Class/Reference/Reference.html)

> 子类化注释特殊注意事项
> 
> UIImageView 类经过优化，可以将其图像绘制到显示器上。 **UIImageView 不会调用 drawRect:**一个子类。如果您的子类需要自定义绘图代码，建议您使用 UIView 作为基类。

因为现在允许告诉您使用`UIView`，所以我只会回答不可能覆盖`drawRect:`for `UIImageView`。

# c# - 在 C# 中模拟等待句柄？

> ID：11361693
> 
> 赞同：0
> 
> 时间：2012-07-06T11:52:39.240
> 
> 标签：c#, .net, multithreading, .net-4.0, autoresetevent

我们可以使用`Wait`and`Pulse`来模拟 a`ManualResetEvent`如下：

**代码 #1**

```
readonly object _locker = new object();
bool _signal;
void WaitOne()
{
  lock (_locker)
   {
     while (!_signal) Monitor.Wait (_locker);
   }
}

void Set()
{ 
   lock (_locker) 
      { _signal = true; 
        Monitor.PulseAll (_locker); 
      }
}

void Reset() 
   {
    lock (_locker) _signal = false; 
   } 
```

*美好的*

现在让我们谈谈将其增强为`AutoREsetEvent`：

只需用`AutoResetEvent`以下代码替换代码`WaitOne`：

**代码 #2**

```
lock (_locker)
{
    while (!_signal) Monitor.Wait (_locker);
    _signal = false;//<---------------
} 
```

并在方法中替换`PulseAll`为：`Pulse``Set`

**代码#3**

```
lock (_locker) 
   { _signal = true; 
     Monitor.Pulse (_locker); 
   } 
```

问题是：在代码 #2 处，行`_signal = false;`。

为什么有必要？`Pulse`只会达到**1 个**等待句柄，我知道`AutoREsetEvent`这只会让一个被阻止的物品通过并自动关闭大门。

那么为什么`_signal = false`需要写作呢？.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:59:49.713

如果`_signal`变量保持不变`true`，那么如果另一个线程在调用之后`WaitOne` *调用*`Set`，它就不会等待。您不仅要考虑如何处理*现有的等待线程*- 您还必须考虑对象的整体状态。

# iphone - 使用 facebook 凭据登录 Foursquare Api

> ID：11361696
> 
> 赞同：1
> 
> 时间：2012-07-06T11:52:43.937
> 
> 标签：iphone, facebook, oauth, foursquare

我在构建一个使用 Foursquare 连接的 iPhone 应用程序时遇到了这个问题。它适用于我使用foursquare凭据进行连接，但现在我的客户希望使用Facebook凭据登录foursquare，就像foursquare在他们的本机iOS应用程序和网站上所做的那样。

对于登录，我使用带有 oAuth 登录的foursquare v2 api。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:46:06.363

根据[Foursquare 开发人员](https://groups.google.com/d/msg/foursquare-api/1KfCeG2ywnU/_UKoXhpgghkJ)的说法，“您不能使用 facebook 凭据访问foursquare，您需要用户专门验证您的应用程序才能访问他们的foursquare 信息”。

编辑是因为我在说 Foursquare 时输入了 Facebook

# html - CSS - 绝对定位元素以不同的屏幕分辨率出现在不同的位置

> ID：11361700
> 
> 赞同：-1
> 
> 时间：2012-07-06T11:52:59.943
> 
> 标签：html, css

我的网站上有一个流式闪光收音机，我将其设置为当前位置，具有绝对位置。问题是不同的分辨率出现在不同的地方。我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:09:41.570

绝对位置元素相对于第一个具有非静态位置的父元素定位。确保您绝对定位的元素不包含在移动位置的元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:17:40.330

**添加`position:relative`您的`#teljes`：**

```
#teljes { width: 1024px; height: 768px; margin: 0px auto; position:relative;} 
```

添加`position:relative;`到 div 将使所有绝对定位的孩子根据父 div 占据位置。

# html - HTML代码问题

> ID：11361702
> 
> 赞同：0
> 
> 时间：2012-07-06T11:53:11.197
> 
> 标签：html

当我在空白 html 页面上使用此代码时，它工作正常：

```
<form enctype="multipart/form-data" action="upload_file.php" method="POST">
 Please choose a file: <input name="uploaded" type="file" /><br />
 <input type="submit" value="Upload" />
 </form> 
```

但是当我将它添加到下面这段代码时它只是停止并且没有连接到脚本upload_file.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
        <link href="Student/ChatterBoxDir/ChatterBox.css" type="text/css" rel="stylesheet" />     
        <link href="MyCSS.css" type="text/css" rel="stylesheet" />
</head>

<body>
    <form id="form1" runat="server">

    <div class="box">

    <div class="header">

        <div class="logo" style="width: 300px; height: 159px">

<img src="http://www.mockcourt.org.uk/pics/background - Teacher.png" width="990" height="181" border="0" alt="">
      </div>

        <div class="auto-style1" style="height: 78px">

            <div class="headerimages">
                <div style="position:absolute; left:555px; top:92px; style="width: 28px; height: 28px;">
                <a href="http://www.mockcourt.org.uk/teacher/default.aspx">
                <img src="http://www.mockcourt.org.uk/pics/home - teacher.png" width="28" height="28" /></a>

    </div>  
<div class="headerimages">
                <div style="position:absolute; left:611px; top:92px; style="width: 28px; height: 28px;">
                <a href="http://www.mockcourt.org.uk/pics/2012/default.asp">
                <img src="http://www.mockcourt.org.uk/pics/gallery - teacher.png" width="28" height="28" /></a>

    </div>                  
                <div class="headerimages">
                <div style="position:absolute; left:674px; top:92px; style="width: 28px; height: 28px;">
                <a href="http://www.mockcourt.org.uk/Teacher/Uploads/show_resources.aspx">
                <img src="http://www.mockcourt.org.uk/pics/resources - teacher.png" width="28" height="28" /></a>
    </div>  
    <div style="position:absolute; left:835px; top:92px; style="width: 28px; height: 28px;">
    <a href="http://www.mockcourt.org.uk/student/calendar.aspx">
    <img src="http://www.mockcourt.org.uk/pics/calendar - teacher.png" width="28" height="28" /></a>
            </div>  
                <div style="position:absolute; left:753px; top:92px; style="width: 28px; height: 28px;">
                <a href="http://www.mockcourt.org.uk/upload picture.html">
            <img src="http://www.mockcourt.org.uk/pics/management - teacher.png" width="28" height="28" /></a> 
                </div>
                <div style="position:absolute; left:894px; top:92px; style="width: 28px; height: 28px;">        
                <a href="http://www.mockcourt.org.uk/TT/Phone.aspx">
                <img src="http://www.mockcourt.org.uk/pics/chat - teacher.png" width="28" height="28" /></a> 
                </div>
                <div style="position:absolute; left:945px; top:92px; style="width: 28px; height: 28px;">    
                <a href="http://www.mockcourt.org.uk/shop.html">
                <img src="http://www.mockcourt.org.uk/pics/Links - Teacher.png" width="28" height="28" /></a>
                </div>
<div style="position:absolute; left:845px; top:150px; style="width: 128px; height: 10px;">
                <a href="http://www.mockcourt.org.uk//ChangePassword/ChangePassword.aspx">
                <img src="http://www.mockcourt.org.uk/pics/change password.png" width="128" height="13" /></a>
                </div> 
```

它停止工作。我敢肯定这是非常愚蠢的事情。谁能看出问题出在哪里。

谢谢罗斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:54:41.700

您已经在标签下的页面上打开了一个表单`<body>`标签：

```
<form id="form1" runat="server"> 
```

表格中不能有表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:58:33.663

放

```
<form enctype="multipart/form-data" action="upload_file.php" method="POST">
 Please choose a file: <input name="uploaded" type="file" /><br />
 <input type="submit" value="Upload" />
</form> 
```

在结束标签下

```
<form id="form1" runat="server"> 
```

# android - 带有叠加层的谷歌地图

> ID：11361711
> 
> 赞同：0
> 
> 时间：2012-07-06T11:53:39.917
> 
> 标签：android, google-maps, overlays

我有一个使用谷歌地图的应用程序。我在地图上也有叠加层。

```
 public class OverLayClass extends ItemizedOverlay<OverlayItem>  
{
    private Drawable marker = null;
    private OverlayItem inDrag = null;
    private ImageView dragImage =null;
    private int xDragImageOffset, yDragImageOffset, xDragTouchOffset, yDragTouchOffset;

    public OverLayClass(Drawable marker) 
    {
        super(boundCenterBottom(marker));
        this.marker = marker;
        overlayItems = new ArrayList<OverlayItem>();

        // image to show when you drag pointer on screen to other location
        dragImage = (ImageView)findViewById(R.id.drag_image);

//          if(dragImage != null && dragImage.getDrawable() != null)
        {
            xDragImageOffset =     getResources().getDrawable(R.drawable.map_icon_corn).getIntrinsicWidth() / 2;
            yDragImageOffset =     getResources().getDrawable(R.drawable.map_icon_corn).getIntrinsicHeight();
        }
        populate();
    } 
```

我已经使用这个类实现了所有覆盖。我还使用相同的覆盖类显示用户的当前位置。

这个覆盖类的 onTouch 是：

```
public boolean onTouchEvent(MotionEvent motionEvent, MapView mapView) 
    {
        //System.out.println(" --- inside onTouchEvent --- "+dontAddtap);
          final int x = (int)motionEvent.getX();
          final int y = (int)motionEvent.getY();
          boolean result = false;

        // TODO Auto-generated method stub
//               if(dontAddtap) 
             {
                if(motionEvent.getAction() == MotionEvent.ACTION_DOWN && !isActionDown)
                {
                    //System.out.println(" ------ on key down ------ geo point "+pt1);
                    if(!isTap) 
                    {
                         for(OverlayItem item : overlayItems) 
                         {
                             Point p = new Point();

                              mapView.getProjection().toPixels(item.getPoint(), p);
                              item.setMarker(marker);
                              boolean isHit = hitTest(item, marker, x - p.x, y - p.y);
                              //System.out.println(" --- isHit in MotionEvent.ACTION_DOWN --- "+isHit);
                              if(isHit) 
                              {
                                  isItemHit = true;
                                  //System.out.println(" --- item hit ---- ");

                                    result = true;
                                    inDrag = item;

                                    overlayItems.remove(inDrag);
                                    gotGeoPoint = item.getPoint();
                                    //System.out.println( " -------- imporntent--item--otuched point -------- "+item.getPoint());
                                    populate();

                                    xDragTouchOffset = 0;
                                    yDragTouchOffset = 0;

                                    setDragImagePosition(p.x, p.y);
                                    dragImage.setVisibility(View.VISIBLE);
                                   //   Point p11=new Point(p.x, p.y);
                                    xDragTouchOffset = x - p.x;
                                    yDragTouchOffset = y - p.y;

                                    OverlayItemArryList.remove(item);
                                   // 
                                   mapController_.stopAnimation(true);
                                   break;
                              }
                        }                       
                    }
                }
            }

         if(dontAddtap && isItemHit) 
         {
            if(motionEvent.getAction() == MotionEvent.ACTION_MOVE && inDrag != null)
            {
                //System.out.println(" --- onTouchEvent ACTION_MOVE --- ");
                setDragImagePosition(x, y);

                result = true;
                isTap = isActionDown = false;
            }            
         }

         if(dontAddtap || isItemHit) 
         {
            if(motionEvent.getAction() == MotionEvent.ACTION_UP && inDrag != null)
            {
                //System.out.println(" --- onTouchEvent ACTION_UP --- ");

                if(isItemHit)
                {
                   dragImage.setVisibility(View.GONE);

                   GeoPoint pt = mapView.getProjection().fromPixels(x-xDragTouchOffset,y-yDragTouchOffset);

                    toDrop = new OverlayItem(pt, inDrag.getTitle(), inDrag.getSnippet());

                    overlayItems.add(toDrop);

                    //System.out.println("------------- on drag drop point -------------- "+toDrop.getPoint());

                    addGeo = toDrop.getPoint(); 

                    //addReferenceToOverLayList.add(toDrop);
                    ////////System.out.println(" addReferenceToOverLayList.add "+toDrop.getPoint());
                    Iterator<GeoPoint> st = geoArrayist.iterator();
                    // update array list with new values when any of the coordinate is moved
                    while(st.hasNext()) 
                    {
                        int k = 0;
                        GeoPoint check = st.next();
                        if(check.equals(gotGeoPoint)) 
                        {
                            //////System.out.println("yes we got geo points");
                            k = geoArrayist.indexOf(gotGeoPoint);
                            //////System.out.println(" - item index got from the array list - "+k);
                            geoArrayist.set(k, addGeo);
                            //////System.out.println(" --- updated array --- "+geoArrayist);
                        }                       
                    }
                    dontAddtap = result = true;
                    isItemHit = isActionDown = false;
                    populate();
                }
            }               
         }
        return(result || super.onTouchEvent(motionEvent, mapView));
    } 
```

而且我可以毫无问题地将标记拖到地图上的任何地方。但是，这也导致我当前的位置指针移动（如果用户试图移动它）。我只想使用相同的覆盖类，但我想修复指向我当前位置的指针，它不应该是可移动的。有没有办法找到正在触摸的覆盖项目？或者任何其他解决方法都会有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:07:09.683

最简单的方法是将您的类 OverlayClass 子类化并禁用其中的移动。

更新：

子类 OverlayClass 并覆盖其 onTouchEvent() 函数。在此函数中，获取事件的坐标并对此叠加层中的所有叠加层项目进行命中测试。如果没有命中任何项目，则使用 super.onTouchEvent() 将此事件传递给父类，否则不执行任何操作并返回 true。现在将您的原始类用于除位置叠加之外的所有叠加，并将此子类用于位置叠加。

顺便说一句，您还可以使用内置的 MyLocationOverlay 类在地图上显示您（用户）的位置，而无需任何额外的麻烦。为此，您执行相同的操作，即对除位置之外的所有内容都使用 OverlayClass。对于位置，请使用内置类的 MyLocationOverlay。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:03:41.007

我认为您必须在 onTouch 事件中添加逻辑来处理您的场景查看这可能会有所帮助[Tutorial 1](http://android-er.blogspot.in/2009/12/move-marker-on-mapview.html) [Tutorial 2](https://github.com/commonsguy/cw-advandroid/tree/master/Maps/NooYawkTouch/)

# java - 从 eclipse 运行单个包（不在服务器上运行）

> ID：11361716
> 
> 赞同：0
> 
> 时间：2012-07-06T11:53:57.757
> 
> 标签：java, eclipse, jboss

目前，在我正在处理的项目中，我们将 jboss 作为服务器运行。存储库分支中的所有代码都设置为在 jboss 服务器上运行。但是，我的工作还不需要我运行服务器——它只是一个我需要测试的 Java 类。

如何将我的代码作为 java 项目而不是 Jboss 运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:58:05.423

假设它有一个适当的`main`方法，在该类的编辑器中，您只需右键单击，选择“Run As”，然后选择“Java Application”（或使用适当的快捷方式，例如 Alt-Shift-X J）。

或者，转到“运行”按钮，单击下拉箭头并转到“运行配置”，您可以在其中创建新配置。

# android - Android Sqlite查询检测表中何时不存在元素

> ID：11361722
> 
> 赞同：1
> 
> 时间：2012-07-06T11:54:20.203
> 
> 标签：android, database, sqlite

如何检测表中何时不存在元素？我需要，因为我想在上面更新/插入联系人。我的问题是我想使用 ContentObserver 插入一个新联系人，但是这个元素被多次调用，我选择了最后一个元素。因此，当我插入一个新联系人时，我选择了最后一个元素，我试图确定数据库上是否存在并插入它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:00:41.433

使用布尔值检查联系人是否存在

```
boolean contact = myDbHelper.checkidExitsorNot(ur table name,row name , value);

public boolean checkidExitsorNot(String tablename, String rowname, String id) {
    String queryf = "select * from " + tablename + " where " + rowname  + "='" + Integer.valueOf(id) + "'";

    Cursor c = myDataBase.rawQuery(queryf, null);
    if (c.getCount() == 0) {
        c.close();
        return true;
    }else {
        c.close();
        return false;
    }
} 
```

如果返回为真则不存在 如果为假则存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:07:19.443

您可以使用`count(*)`数据库中的函数进行检查。

# asp.net-mvc-3 - mvc中列表属性的每个项目的复杂模型和唯一ID

> ID：11361723
> 
> 赞同：0
> 
> 时间：2012-07-06T11:54:36.440
> 
> 标签：asp.net-mvc-3

我正在开发一个 asp.net mvc 3.0 并在如下视图中使用复杂模型：

```
@model StoresAndMalls.DataModel.Entities.User
........
<div class="editor-label">
    @Html.LabelFor(model => model.EmailAddress)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.EmailAddress)
    @Html.ValidationMessageFor(model => model.EmailAddress)
</div>
<div class="editor-label">
    @Html.LabelFor(model => model.Status)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Status)
    @Html.ValidationMessageFor(model => model.Status)
</div>

 <div class="editor-label">
    @Html.LabelFor(model => model.Role)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Role)
    @Html.ValidationMessageFor(model => model.Role)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.UserRules)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.UserRules,"UserRules", new { AllRules = ViewBag.AllRules})

</div> 
```

这是我的模型：

```
public partial class User
    {
        ......

        public virtual ICollection<UserRule> UserRules { get; set; }

        public virtual Role Role { get; set; }
    }

 public class UserRule
    {
        .....
        [ForeignKey("UserId")]
        public virtual User User { get; set; }

        [ForeignKey("RuleId")]
        public virtual Rule Rule { get; set; }
    }

public partial class Role
    {
        public int Id { get; set; }

        public string Name { get; set; }

        public virtual ICollection<User> Users { get; set; }
    } 
```

在最近的项目中，当我创建一个具有复杂模型的视图时，表单元素，例如 Role，其中以 User 为前缀，我的意思是像“User.Role”，但现在没有了，即使我使用编辑器模板对于 User 类的 'UserRules' 属性，它也不能正常工作，并且没有 'User' 前缀，

这是我的角色和用户规则的编辑器视图：

```
@model IEnumerable<StoresAndMalls.DataModel.Entities.UserRule>
@{
    var allrules = (ViewData["AllRules"] as List<StoresAndMalls.DataModel.Entities.Rule>);
    int c = 0;
}
@
    foreach (var item in allrules)
    {

        @item.Description
        @Html.CheckBox(Model.Any(x => x.RuleId == item.Id))
        c++;
    <br />
    }

-----------

@model StoresAndMalls.DataModel.Entities.Role
@{
    var selecetList = (ViewData["Roles"] as List<StoresAndMalls.DataModel.Entities.Role>).
        ConvertAll(x => new SelectListItem { Value = x.Id.ToString(), Text = x.Name, Selected = x.Id == Model.Id });
}
@Html.DropDownListFor(x => x, selecetList)

------------- 
```

对于'UserRule'我试过

```
@model StoresAndMalls.DataModel.Entities.UserRule 
```

但它抛出：

```
The model item passed into the dictionary is of type 'System.Collections.Generic.HashSet`1[DataModel.Entities.UserRule]', but this dictionary requires a model item of type 'DataModel.Entities.UserRule'. 
```

编辑：

```
 public ActionResult UpdateManager(Guid id)
        {
            ViewBag.Roles = unitofwork.RoleRepository.Get();

            ViewBag.AllRules = unitofwork.UserRepository.GetByID(id).UserRules;

            var model = unitofwork.UserRepository.GetByID(id);

            return View(model);
        } 
```

# ruby-on-rails - 在新选项卡中调用另一个方法后不同的控制器实例

> ID：11361734
> 
> 赞同：0
> 
> 时间：2012-07-06T11:55:09.470
> 
> 标签：ruby-on-rails, controller

我有一个控制器，有两种方法：`a`和`b`. 方法`a`初始化变量`var`。我打开一个浏览器选项卡并调用方法`a`。打开另一个选项卡后，我调用`b`读取的方法`var`并得到一个`nil`.

我检查了控制台，很惊讶`id`控制器对象在调用方法时是一个不同的对象`b`。

它不应该是可以访问`var`方法内部变量的同一个控制器实例`b`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:13:04.613

Rails 为每个请求创建一个新的控制器实例。从[文档](http://guides.rubyonrails.org/action_controller_overview.html#methods-and-actions)中：

> 当您的应用程序收到请求时，路由将确定要运行哪个控制器和动作，然后 Rails 创建该控制器的一个实例并运行与动作同名的方法。

你想达到什么目的？

# c# - 在 C# 中包含 Javascript/HTML 5 代码

> ID：11361737
> 
> 赞同：0
> 
> 时间：2012-07-06T11:55:32.593
> 
> 标签：c#, javascript, html, xaml, microsoft-metro

抱歉，如果我错了，我正在使用 C# 开发 Metro 应用程序，我被 Flyout 卡住了，从下面的链接我知道 Flyouts 在 C# 和 XAML [链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh465354)和 [链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh465354)中是不可能的 那么，有什么方法可以在 JS/ 中开发 Flyout HTML5 并将它们包含在我的 C# 项目中。请帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:39:02.417

Popup 是 XAML 中的一个控件，与 Flyout 非常相似。您可以改用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:34:41.340

如果我理解你的话，请试试这个链接：

[http://blogs.msdn.com/b/eternalcoding/archive/2012/07/03/tips-and-tricks-for-c-metro-developers-the-flyout-control.aspx](http://blogs.msdn.com/b/eternalcoding/archive/2012/07/03/tips-and-tricks-for-c-metro-developers-the-flyout-control.aspx)

我不知道你想用控件做什么——所以详细的信息会很有帮助。

# c# - 动态更改文本值

> ID：11361738
> 
> 赞同：0
> 
> 时间：2012-07-06T11:55:32.853
> 
> 标签：c#, wpf, localization, globalization, multilingual

我正在尝试实现一个多语言 WPF 应用程序，我遇到了问题，我不知道应该如何处理这种情况。假设我有 2 个`.Resx`文件和一个`TextBlock`元素，其`Text`属性绑定到一个负责通过给定键转换为适当值的类。它们在运行时工作正常，但在设计时使用它们太难了，因为它们无法在设计时从资源中获取值，并且`Text`'s 的值总是空的。我很好奇如何`TextBlock`在设计时更改元素的 Text 属性。

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:58:47.557

你可以访问这篇文章

[多语言 WPF 应用程序](https://stackoverflow.com/questions/11327840/multilingual-wpf-application/11328578#11328578)

# css - css文本对齐中心和背景颜色

> ID：11361739
> 
> 赞同：0
> 
> 时间：2012-07-06T11:55:47.527
> 
> 标签：css

嘿伙计们希望你能帮助我..

这个任务看起来很简单，但我就是想不通......

IE

```
<div style="text-align: center;background-color: rgb(150, 161, 255);  " id="clock">
        asd
</div> 
```

我有一个包含一些文本的 div，我想居中对齐该文本并制作背景，使其仅位于文本后面。

做 display:inline 使背景只留在文本后面，但文本不再居中对齐。

尝试了 css 的所有显示属性，但没有成功。

现在已经在谷歌上搜索了 20 分钟，但我想我不确定要搜索什么。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:59:22.863

看看这个：

HTML：

```
<div>
    <span>
        my text
    </span>
</div> 
```

CSS：

```
div {
    background: red;
    text-align: center;
}

span {
    background: lime;
} 
```

现场示例：[JsFiddle](http://jsfiddle.net/NKrKD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:59:57.363

为什么不在 div 内的文本中添加 span 标签并设置样式呢？

```
<div style="text-align: center; " id="clock">
    <span>asd<span>
</div>​ 
```

和CSS

```
#clock span{
background-color: rgb(150, 161, 255);
}​ 
```

[例子](http://jsfiddle.net/rvubJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:02:10.873

请检查我希望这会帮助你我试图根据你的要求制作..

```
 <div style="text-align: center;background-color: rgb(150, 161, 255); display:table; margin:auto;  " id="clock">
            asd
    </div> 
```

演示：- [http://tinkerbin.com/L8AOfd5P](http://tinkerbin.com/L8AOfd5P)

# c# - 在不知道用户名的情况下获取用户特定路径

> ID：11361742
> 
> 赞同：1
> 
> 时间：2012-07-06T11:56:14.597
> 
> 标签：c#, url, webbrowser-control

我有一个 HTML 文件在`C:\Users\myusername\AppData\Roaming\myapp\file.html`. 我正在通过我的 C# 应用程序中的 Web 浏览器访问该文件，以从应用程序中预览它。
但是，当应用程序放到另一台计算机上时，webBrowser1 中的地址仍然是我的用户名特定的，因此其他人无法访问预览。

有没有办法在我的网络浏览器中以 URL 的形式访问文件，而 URL 中没有硬编码的用户名？

我试过的：

1.  C:\Users\%USERNAME%\AppData\Roaming\myapp\file.html
2.  C:\Users\AppData\Roaming\myapp\file.html

谢谢！

这是我得到帮助后使用的代码：

```
string folderPath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
string address = Path.Combine(folderPath + @"\myapp\file.html");
webBrowser1.Navigate(address); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T11:58:20.313

如果要获取当前登录用户的名称，则必须读取`Environment.UserName`属性。

此外，如果您需要访问`AppData`漫游用户的目录，则无需硬编码即可获得文件夹路径（不要忘记用户目录并不总是`c:\users`在每个 Windows 版本上，路径`AppData`也可能不同）：

```
string folderPath = Environment.GetFolderPath(
    Environment.SpecialFolder.ApplicationData); 
```

在您的情况下，只需附加文件名：

```
string url = Path.Combine(folderPath, "file.htm"); 
```

**备注**
如果出于任何原因需要使用环境变量，则必须首先扩展它们：

```
string path = Environment.ExpandEnvironmentVariables(@"C:\Users\%USERNAME%\"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:59:01.687

看看这个功能。它返回当前用户的应用程序数据文件夹的路径。

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

# java - Ajax json POST 和 Spring MVC 控制器

> ID：11361744
> 
> 赞同：4
> 
> 时间：2012-07-06T11:56:30.340
> 
> 标签：java, ajax, spring, spring-mvc

我有这样的ajax json POST方法

```
$.ajax({
    type: 'POST',
    url: "localhost:8080/webeditor/spring/json/", 
    data: JSON.stringify(contents),
    dataType: "json"
}); 
```

处理发布请求的控制器

```
JSONPObject json;
BindingResult result = new BeanPropertyBindingResult( json , "MyPresentation" );
@RequestMapping(value="json/", method = RequestMethod.POST)
public void savePresentationInJSON(Presentations presentation,BindingResult result) {
        //do some action

} 
```

但我收到这个错误

> XMLHttpRequest 无法加载 localhost:8080/webeditor/spring/json/。仅 HTTP 支持跨源请求。

我不确定如何纠正上述错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:38:08.380

我的最终作品版本

```
var jsonfile={json:JSON.stringify(contents)};
$.ajax({
    type: 'POST',
    url: "/webeditor/spring/json/", 
    data: jsonfile,
    dataType: "json"
}); 
```

AJAX 和

```
@RequestMapping(value = "/json/", method = RequestMethod.POST)
public void saveNewUsers( @RequestParam ("json") String json)
{
    System.out.println( json );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T15:40:12.183

使用 Spring 传递 JSON 相当简单。考虑以下 jQuery 函数：

```
function processUrlData(data, callback) {
    $.ajax({
        type: "GET",
        url: "getCannedMessageAsJson.html",
        data: data,
        dataType: "json",
        success: function(responseData, textStatus) {
            processResponse(responseData, callback);
        },
        error : function(responseData) {
            consoleDebug("  in ajax, error: " + responseData.responseText); 
        }
    });
} 
```

现在使用以下 String @Controller 方法...

```
@RequestMapping(value = "/getCannedMessageAsJson.html", method = RequestMethod.POST) 
public ResponseEntity<String> getCannedMessageAsJson(String network, String status, Model model) {

    int messageId = service.getIpoeCannedMessageId(network, status);
    String message = service.getIpoeCannedMessage(network, status);

    message = message.replaceAll("\"", "&quot;");
    message = message.replaceAll("\n", "");

    String json = "{\"messageId\": \"" + messageId 
    + "\", \"message\": \"" + message + "\"}"; 

    HttpHeaders responseHeaders = new HttpHeaders();
    responseHeaders.setContentType(MediaType.APPLICATION_JSON);
    return new ResponseEntity<String>(json, responseHeaders, HttpStatus.CREATED);
} 
```

在我的情况下，请求非常简单，我只是在控制器方法中硬连线 json 格式，但您可以轻松地使用像 Jackson 这样的库来生成 json 字符串。

也正如其他人所说，验证 @RequestMapping 中的“值”是一个唯一的、合法的文件名。使用我上面展示的 json 方法，您不必拥有相应的 jsp 页面（实际上它不会使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:01:00.943

您的应用程序应该有一个上下文根，它将位于 URL 路径的其余部分之前。你还应该`servlet-mapping`在 web.xml 中有一个定义，它定义了哪些请求被定向到你的 Spring 控制器。因此，如果您的应用程序的上下文根是“myapp”并且您`servlet-mapping`将转到 *.html，那么您的 ajax 调用将如下所示：

```
$.ajax({
    type: 'POST',
    url: "/myapp/webeditor/spring/json.html",
    data: JSON.stringify(contents),
    dataType: "json",
    success: function(response) {
        // Success Action
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T13:40:09.820

在 URL 中： url: "localhost:8080/webeditor/spring/json/"

webeditor 必须是战争名称或服务名称，所以在你的 @RequestMapping(value="/webeditor/spring/json/" 我认为你不应该有 'webeditor' 它必须只有**/spring/json**

通常 404 表示 URL 请求错误或没有为该 URL 运行此类服务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T16:35:32.240

看起来像 jQuery 所以为什么不试试

```
$.getJSON('webeditor/spring/json', JSON.stringify(contents, function(data) {//do callbackstuff}); 
```

如果您想请求跨域，方法如下：-

```
cbFn = function(data) {
   // do callback stuff. 
}

    var ca = document.createElement('script');
                ca.type = 'text/javascript';
                ca.async = true;
                ca.src = server + '/webeditor/spring/json.jsonp?callback=cbFn';
                var s = document.getElementsByTagName('head')[0];
                s.parentNode.insertBefore(ca, s); 
```

并添加 servlet 映射

```
<servlet-mapping>
    <servlet-name>yourSevletName</servlet-name>
    <url-pattern>*.jsonp</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-06T12:42:07.090

在你的 jsp 中包含这样的标签库

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

然后使用spring创建一个完整的url

```
<c:url var="yourFullUrl" value="/webeditor/spring/json/" /> 
```

然后基于此创建 javascript 变量，以便您可以在 Ajax 中使用

```
<script>
var yourUrl= '<c:out value="${yourFullUrl}"/>';
</script> 
```

不使用表示 url 的 javascript 变量：

```
<script>
$.ajax({
        type: 'POST',
        url: yourUrl, 
        data: JSON.stringify(contents),
        dataType: "json"
});
</script> 
```

# asp.net-mvc-2 - 在asp.net mvc 2.0中将数据从数据库绑定到DropDownListFor

> ID：11361749
> 
> 赞同：1
> 
> 时间：2012-07-06T11:56:57.003
> 
> 标签：asp.net-mvc-2

我是 asp.net mvc 2.0 的新手，我试图搜索这篇文章，但仍然无法得到我想要的答案。

我有一个表格可以将角色分配给每个员工。所以我创建了一个表单，我可以输入员工的姓名并选择他们所在的角色。角色从表 Role 中获取。我使用 linq to sql 从表 Role 中查询 RoleName 和 RoleID，并希望在我的视图中将其绑定到 DropDownListFor。

我有一个模型：

```
public class UserModels
{

   public string name { get; set; }
   public string role { get; set; }

} 
```

这就是我在控制器中所做的：

```
[HttpPost]
public ActionResult UserMaintenance(FormCollection frm)
{
if (ModelState.IsValid)
{
    EMP_DBSEntities context = new EMP_DBSEntities();
    tblUserLogin user = new tblUserLogin();
    user.UserName = frm["userLogin"].ToString();

    IEnumerable<SelectListItem> role_list = context.tblRoles.Select(d => new SelectListItem
    {
        Value = d.RoleID.ToString(),
        Text = d.RoleName
    });

    context.AddTotblUserLogins(user);
    context.SaveChanges();
    return View();
}
else
{
    return View();
}
} 
```

谁能告诉我如何`role_list`在我看来将 绑定到我的 DropDownListFor<> 。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:16:36.903

为了创建一个下拉列表，您需要一个具有 2 个属性的视图模型：一个包含所选值的标量属性和一个包含可用选项的集合属性。

因此，在 ASP.NET MVC 中，从编写视图模型开始：

```
public class UserRoleViewModel
{
    [DisplayName("name")]
    public string EmployeeName { get; set; }

    [DisplayName("role")]
    public int? SelectedRoleId { get; set; }

    public IEnumerable<SelectListItem> Roles { get; set; }
} 
```

然后是控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        // fetch the roles
        // could come from a database or something
        var roles = new[] 
        { 
            new { RoleID = 1, RoleName = "Admin" }, 
            new { RoleID = 2, RoleName = "Foo" },
            new { RoleID = 3, RoleName = "Bar" },
            new { RoleID = 4, RoleName = "Baz" }, 
        };

        // Now we build the model
        var model = new UserRoleViewModel
        {
            EmployeeName = "John", // could come from a database or something
            SelectedRoleId = 1, // could come from a database or something
            Roles = new SelectList(roles, "RoleID", "RoleName")
        };

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(UserRoleViewModel model)
    {
        return Content(
            string.Format(
                "Selected role for {0} is {1}", model.EmployeeName, model.SelectedRoleId
            )
        );
    }
} 
```

最后是一个观点：

```
<%@ Page 
    Language="C#" 
    MasterPageFile="~/Views/Shared/Site.Master" 
    Inherits="System.Web.Mvc.ViewPage<UserRoleViewModel>" 
%>

...

<% using (Html.BeginForm()) { %>
    <%= Html.EditorFor(x => x.EmployeeName) %>
    <%= Html.DropDownListFor(x => x.SelectedRoleId, Model.Roles, "-- Role --") %>
    <button type="submit">OK</button>
<% } %> 
```

# c# - 枚举 DirectoryEntry 组时发生操作错误

> ID：11361752
> 
> 赞同：1
> 
> 时间：2012-07-06T11:57:16.483
> 
> 标签：c#, asp.net, active-directory

我整个早上都在尝试解决这个问题，但它们似乎都不起作用。

我一直在为我们的课程管理员纠正 AD 的用户管理界面，其想法是只显示他们需要的内容，而解决方案在开发服务器上运行良好，我在 prod 上得到了上述错误。

我已经尝试了所有我能找到的东西，比如 HostingEnvironment.Impersonate，将服务帐户提升为域管理员，但注意到有效。

```
public static List<GroupPrincipal> GetGroups(string client)
{
        List<GroupPrincipal> List = new List<GroupPrincipal>();

        DirectoryEntry ou = null;
        GroupPrincipal group = null;
        PrincipalContext context = null;

        if (domain.Path.ToLower().Contains(DevDN.ToLower()))
        {
            context = new PrincipalContext(ContextType.Domain,
                DevDom,
                DevDN,
                DevService,
                DevServicePass);
        }
        else
        {
            context = new PrincipalContext(
                ContextType.Domain,
                LiveDom,
                LiveDN,
                LiveService,
                LiveServicePass);
        }

        DirectorySearcher searcher = new DirectorySearcher(domain, "(&(ou=" + client + ")(objectClass=organizationalUnit))");
        try
        {
            ou = new DirectoryEntry(searcher.FindOne().Path);
        }
        catch (System.Exception ex)
        {
            Log.WriteError("SUGM.ADLink.GetGroups", "Unable to locate client: " + ex.Message);
            List = null;
            return List;
        }
        try
        {
            foreach (DirectoryEntry groups in ou.Children)
            {
                if (groups.SchemaClassName == "group")
                {
                    string name = groups.Name.Replace("CN=", "");
                    group = GroupPrincipal.FindByIdentity(context, name);
                    List.Add(group);
                }
            }
        }
        catch (System.Exception ex)
        {
            Log.WriteError("SUGM.ADLink.GetGroups", "Unable to add groups to list: " + ex.Message);
            List = null;
            return List;
        }

        return List;
    } 
```

在调试时，我检查并传递了所有正确的值，但它总是在 foreach 块上失败。

谁能指出我做错了什么。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:35:50.687

您应该避免混合使用`System.DirectoryServices`和`System.DirectoryServices.AccountManagement`命名空间——这不是一个很好的策略！

您也可以在 S.DS.AM (.NET 3.5) 中为所欲为！而且也容易得多。

您可以使用 a`PrincipalSearcher`和“按示例查询”主体进行搜索：

```
// create your domain context and specify the initial container to work from
PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "YOURDOMAIN", "OU=YourStartingPoint,DC=YourCompany,DC=com");

// define a "query-by-example" principal - here, we search for a GroupPrincipal 
GroupPrincipal qbeGroup = new GroupPrincipal(ctx);

// create your principal searcher passing in the QBE principal    
PrincipalSearcher srch = new PrincipalSearcher(qbeGroup);

// find all matches
foreach(var found in srch.FindAll())
{
    // do whatever here - "found" is of type "Principal" - it could be user, group, computer.....          
} 
```

如果您还没有 - 绝对阅读 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)，它很好地展示了如何充分利用 .NET Framework 中的新功能`System.DirectoryServices.AccountManagement`。或查看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间上的 MSDN 文档。

# javascript - 像窗口（div）闪烁和消失

> ID：11361755
> 
> 赞同：1
> 
> 时间：2012-07-06T11:57:31.353
> 
> 标签：javascript, facebook-like, facebook-likebox

我们在 4 个不同的页面上有一个相同[的 Like 按钮 (gist) 代码。](https://gist.github.com/df0765852d689963f08c)或者有一段时间，这些页面隐藏在基本的 HTTP 身份验证之后，但现在它们是打开的。每个页面都注册了不同的 Facebook 应用程序。

在其中两个上，Like 按钮按预期工作。在另外两个上，Like“窗口”（div）出现了几分之一秒然后消失了。喜欢没有保存。Javascript 控制台中没有出现错误。

所有应用程序都启用了“2012 年 8 月重大更改”选项。

我该如何修复/调试这个？

# visual-studio-2010 - 如何在 VS 2010 中处理“无法找到或打开 PDB 文件”？

> ID：11361756
> 
> 赞同：0
> 
> 时间：2012-07-06T11:57:34.063
> 
> 标签：visual-studio-2010, debugging, upnp

我正在尝试调试一个具有 libs 文件、libs 文件和 exe 文件的项目，如果我在不调试的情况下运行这个项目，它编译得很好并且执行得很好。

但是它的调试不起作用，它说：[找不到或打开 PDB 文件] * tvctrlpt.exe 是我现在正在处理的 exe 的名称。似乎我在项目构建调试器设置中犯了错误？

我需要考虑任何具体的事情吗？

[供您参考 - 我正在为以下内容进行 Windows 调试：http://sourceforge.net/projects/pupnp/forums/forum/569833/topic/5409226]

见以下日志：

**tvctrlpt.exe': 加载 'D:\libupnp\build\vc10\out.vc10.Win32\Debug\bin\tvctrlpt.exe'，找不到或打开 PDB 文件**

编辑

在这里，我使用的是[http://pupnp.sourceforge.net/](http://pupnp.sourceforge.net/) [ libupnp 1.6.17] ，它编译得很好，并且像往常一样运行，但是在运行调试器时 - 它说 - 找不到或打开 PDB 文件。

在整个互联网上搜索，并尝试了各种设置的所有方法，但它没有奏效，似乎需要更深入的知识才能做到这一点。

或者一些设置等。

# c# - 如何在共享主机的网站上实现 ssl？

> ID：11361757
> 
> 赞同：0
> 
> 时间：2012-07-06T11:57:37.967
> 
> 标签：c#, asp.net, web

我已经开发了网站，我想在其中实现 ssl，但我的域在共享主机中，所以我不知道如何设置 ssl。我的网站是在.net 开发的，请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:59:37.497

这完全取决于你的主人。

您最好向他们提交支持票并询问他们是否提供 SSL。SSL 需要一个固定的 IP，即使使用共享主机，某些主机仍然可以做到这一点。

不过它不会是免费的。

# java - Java：如何在 JTree 中获取文件的索引

> ID：11361761
> 
> 赞同：0
> 
> 时间：2012-07-06T11:57:56.930
> 
> 标签：java, swing, jtree, treenode

我有一个`JTree`，它显示了我需要的一切，但我想将我从 中选择的任何文件添加`JTree`到`JTextArea`. 我已经使用 a 完成了这项工作`JList`，我所做的就是获取文件中的选定索引，`JList`然后将其附加到`JTextArea`... 但是通过查看`JTree`没有任何方法可以获取选定的索引，`JList`如已经在网上搜索并没有找到解决方案的运气！

我能想到的唯一方法是有一些方法来搜索`JTree`并在每个级别返回文件索引所在的位置，但这需要做很多工作，所以有没有更好的方法来做到这一点？我真正要问的是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:06:44.413

如果您只允许单选，您可以使用：

```
DefaultMutableTreeNode node = (DefaultMutableTreeNode) tree.getLastSelectedPathComponent(); 
```

获取选定的节点。您可以创建一个 Map，其中键将是 DefaultMutableTreeNode，关联的值可以是您要创建的文件的字符串。

# jquery - (jQuery, RegEx) 从开头删除某个单词

> ID：11361762
> 
> 赞同：0
> 
> 时间：2012-07-06T11:57:59.427
> 
> 标签：jquery, regex, dom, replace

## 需要一个简单的正则表达式进行文本替换：从开头到唯一已知的单词。

**前：**

> *Lorem ipsum dolor sit amet，consectetur adipisicing elit **，** sed do eiusmod tempor incididunt ut labore et dolore magna aliqua。*

**后：**

> *elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua。*

唯一的静态词是**adipisicing**，所以其他一切都是可变的。

我用过这个正则表达式：

```
$(this).html($(this).html().replace(/^[^adipisicing]*(adipisicing)/,'')); 
```

工作正常..但我敢肯定有更短的方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:06:31.317

试试这个：http: [//jsfiddle.net/Kh7aD/](http://jsfiddle.net/Kh7aD/)

由于 indexOf 已经在其中一篇文章中，请尝试使用拆分。

希望对你有帮助！

**代码**

```
var str = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";

str = str.split('adipisicing')[1]; 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:02:32.620

没有正则表达式：

```
var word = "adipisicing";

$(this).html(function(i, val) {
    return val.substring(val.indexOf(word) + word.length);
}); 
```

* * *

使用正则表达式：

```
$(this).html(function(i, val) {
    return val.replace(/^.*\badipisicing\b/, "");
}); 
```

这里`\b`将绑定一个单词而不是一组字符。

**演示：http:** [//jsfiddle.net/rVuh7/](http://jsfiddle.net/rVuh7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:02:03.217

使用这个正则表达式`^.*adipisicing`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:02:03.957

你可以这样尝试：

```
var tmphtml = $(this).html();
var word = "adipisicing";
$(this).html( tmphtml.substr(tmphtml.indexOf(word)+word.length) ); 
```

# c++ - opencv cv::mat 分配

> ID：11361765
> 
> 赞同：3
> 
> 时间：2012-07-06T11:58:09.913
> 
> 标签：c++, opencv, allocation

你好我有一个关于opencv的基本问题。如果我尝试使用 cv::Mat 类分配内存，我可以执行以下操作：

```
cv::Mat sumimg(rows,cols,CV_32F,0);
float* sumimgrowptr = sumimg.ptr<float>(0); 
```

但后来我得到了一个坏指针（空）。在互联网上有人使用这个：

```
cv::Mat* ptrsumimg = new cv::Mat(rows,cols,CV_32F,0);
float* sumimgrowptr = ptrsumimg->ptr<float>(0); 
```

而且在这里我得到了一个空指针！但如果我最终这样做：

```
 cv::Mat sumimg;
            sumimg.create(rows,cols,CV_32F);
            sumimg.setTo(0);
            float* sumimgrowptr = sumimg.ptr<float>(0); 
```

那么一切都很好！所以我想知道我在做什么有什么问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-06T12:15:53.953

主要问题在这里

```
cv::Mat sumimg(rows,cols,CV_32F,0); 
```

OpenCV 为矩阵提供了多个构造函数。其中两个声明如下：

```
cv::Mat(int rows, int cols, int type, SomeType initialValue); 
```

和

```
cv::Mat(int rows, int cols, int type, char* preAllocatedPointerToData); 
```

现在，如果您声明一个 Mat 如下：

```
cv::Mat sumimg(rows,cols,CV_32F,5.0); 
```

你得到一个浮点矩阵，用 5.0 分配和初始化。调用的构造函数是第一个。

但在这儿

```
cv::Mat sumimg(rows,cols,CV_32F,0); 
```

你发送的是 a `0`，它在 C++ 中是一个有效的指针地址。所以编译器为预分配的数据调用构造函数。它不分配任何东西，当你想访问它的数据指针时，难怪它是 0 或 NULL。

一个解决方案是指定第四个参数是一个浮点数：

```
cv::Mat sumimg(rows,cols,CV_32F,0.0); 
```

但最好的办法是避免这种情况，通过使用 cv::Scalar() 来初始化：

```
cv::Mat sumimg(rows,cols,CV_32F, cv::Scalar::all(0) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:10:56.433

`Mat(int _rows, int _cols, int _type, void* _data, size_t _step=AUTO_STEP)`我相信您在执行`cv::Mat sumimg(rows,cols,CV_32F,0);`and时正在调用构造函数`cv::Mat* ptrsumimg = new cv::Mat(rows,cols,CV_32F,0);`。

请参阅文档： http: [//opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)

即您没有为矩阵创建任何值，这意味着您没有为矩阵中的值分配任何空间，因此您`NULL`在执行时会收到一个指针

`ptrsumimg->ptr<float>(0);`

# android - Android v2.1 模拟器无法连接互联网

> ID：11361766
> 
> 赞同：0
> 
> 时间：2012-07-06T11:58:19.877
> 
> 标签：android, networking, android-emulator, emulation, android-internet

我已经检查了[**这个**](https://stackoverflow.com/q/4376553/1481665)和[**这个**](https://stackoverflow.com/q/2039964/1481665)链接，但我认为我的问题不同如下：

我的**Android 2.1 模拟器无法**通过我的应用程序/模拟器默认浏览器连接互联网，但我**能够从我的其他 Android 版本模拟器连接互联网**。

我的电脑直接通过互联网连接，我检查了我的防火墙设置，它可能没问题。几次重新启动并创建了新的 2.1 模拟器，但无法连接它。

***>>****这怎么可能来自相同的机器和相同的配置？其他 android 驱动的模拟器工作正常，但 android 2.1 模拟器有问题？*

**Android 2.1 模拟器及其默认浏览器的快照：**

![其默认浏览器的 Android 2.1 模拟器快照。](../Images/7c5e92d9b438c118321f68c0153ef4b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:22:40.970

一些有用的链接，希望对您有所帮助：

[Android 模拟器上没有互联网 - 为什么以及如何修复？](https://stackoverflow.com/questions/2206822/no-internet-on-android-emulator-why-and-how-to-fix)

[Android 模拟器 - 没有互联网连接](https://stackoverflow.com/questions/4899967/android-emulator-no-internet-connectivity)

[没有互联网连接的 Android 2.1 模拟器](https://stackoverflow.com/questions/6309741/android-2-1-emulator-without-internet-connection)

[Android模拟器上没有互联网连接](https://stackoverflow.com/questions/9620548/no-internet-connection-on-android-emulator)

[Android模拟器没有互联网连接](https://stackoverflow.com/questions/5801204/android-emulator-no-internet-connectivity)

[如何将安卓模拟器连接到互联网](https://stackoverflow.com/questions/2039964/how-to-connect-android-emulator-to-the-internet)

# iphone - iOS AppStore：如何在阿拉伯语中添加关键字以使其可使用阿拉伯语单词进行搜索？

> ID：11361777
> 
> 赞同：2
> 
> 时间：2012-07-06T11:58:55.127
> 
> 标签：iphone, ios, localization, app-store, itunes

我的 iOS 应用程序提供英语和阿拉伯语两种语言。语言选择在应用程序内。在上传应用程序时，我只提到了英语作为我的本地化选项。还在关键字区域添加了一些阿拉伯语关键字（例如 EngKeyWord1、EngKeyWord2、ArabicKeyWord1）。但该应用程序无法使用阿拉伯语关键字进行搜索。

我做的事情对吗？有不同的方法吗？

[阿拉伯语作为语言选项在 iTunes 元数据部分不可用。但是还有其他应用程序可以使用阿拉伯语关键字进行搜索！]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:51:47.167

iTunes Connect 仅允许您为应用程序本身本地化的语言添加元数据。由于您没有以正常方式本地化应用程序（即您实现了应用程序内语言选择器，而不是依赖于依赖于 iOS 语言设置的标准本地化方法），也许您没有在 XCode 中明确地将阿拉伯语添加到您的应用程序?

您可以在 XCode 中通过选择您的项目、打开 Info 选项卡并使用 Localizations 下的“+”按钮并选择阿拉伯语来执行此操作。然后，您必须在 iTunes Connect 允许您输入阿拉伯语元数据之前上传二进制文件。

**编辑：**这是过时的。iTunes Connect 现在允许您为应用程序包本地化之外的语言添加元数据。

# php - 改为搜索文件名

> ID：11361780
> 
> 赞同：0
> 
> 时间：2012-07-06T11:59:01.787
> 
> 标签：php

我有这个脚本可以将文件搜索到目录中。当我使用确切的术语执行搜索时效果很好，例如：“my file.doc”、“sales order 1234.pdf”

谁能帮我修改搜索词到文件名，例如：“文件”或“销售”

TKS 克里斯。

```
<?php
    if($_POST['search']) {
    $word = $_POST['file'];
    $dir = './';
    $list  = new RecursiveDirectoryIterator($dir);
    $recursive = new RecursiveIteratorIterator($list);

    $num = 0; //  
    foreach($recursive as $obj){

    //echo $obj->getFilename().'<br />'; 
    if($obj->getFilename()=="$word"){
      echo $obj->getPathname().'<br/>';
      $num++;
       }
      } 
    echo "found(s) $num file(s)."; 
    }
   ?>

<form action="" method="POST">
search files. <input type="text" name="file" value="">
<input type="submit" name="search">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:02:54.647

```
<?php
    if($_POST['search']) {
    $word = $_POST['file'];
    $dir = './';
    $list  = new RecursiveDirectoryIterator($dir);
    $recursive = new RecursiveIteratorIterator($list);

    $num = 0; //  
    foreach($recursive as $obj){

    //echo $obj->getFilename().'<br />'; 
    if( strpos( $obj->getFilename(), "$word" ) === true ){
      echo $obj->getPathname().'<br/>';
      $num++;
       }
      } 
    echo "found(s) $num file(s)."; 
    }
   ?>

<form action="" method="POST">
search files. <input type="text" name="file" value="">
<input type="submit" name="search">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:05:00.360

您可以在文件名上使用[strpos](http://fr2.php.net/manual/fr/function.strpos.php)函数或[strstr](http://php.net/manual/fr/function.strstr.php)函数。

测试函数是否返回不同于 false 的内容，以了解您的文件名包含您的链。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:05:42.597

您可以使用 PHP 的[substr_count](http://php.net/manual/en/function.substr-count.php)来计算一个字符串在另一个字符串中的出现次数，但由于您需要一个或多个字符串，您可以像这样检查：

```
if( substr_count( $obj->getFilename(), $word ) ){
    echo $obj->getPathname().'<br/>';
    $num++;
} 
```

**编辑：**对于不区分大小写的比较：

```
if( substr_count( strtolower($obj->getFilename()), strtolower($word) ) {
     // ...
} 
```

# database-design - 朋友系统的many2many表，任一列中的ID，最佳模式

> ID：11361785
> 
> 赞同：0
> 
> 时间：2012-07-06T11:59:13.630
> 
> 标签：database-design, relational-database

想象一下，你有一个像 facebook 这样的朋友系统。

你有一个 m2m 表，其中包含连接之间的两个人的 id。

目前，我们从任一方向记录记录。这意味着 id 可以在任一列中。因此，当我们进行选择时，我们必须在任一列中搜索 id。

我们可以在选择之后通过对登录的用户 ID 进行测试来对它进行排序，但我想知道是否有更好的方法来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:08:34.203

您会发现使用 a 性能最好`UNION`：

```
select user_id1 as friend_id
from friends
where user_id2 = ?
union
select user_id2
from friends
where user_id1 = ? 
```

并确保关联表中的两个 id 列都有索引。

# sql - 您可以在触发器中禁用触发器吗？SQL Server 2008

> ID：11361791
> 
> 赞同：0
> 
> 时间：2012-07-06T11:59:36.990
> 
> 标签：sql, sql-server-2008, triggers

您可以在触发器中禁用和重新启用触发器吗？

例如，我在前端应用程序中有一条信息可以放在两个地方之一。如果有人将它放在 A 位置，我想将它复制到 B 位置，反之亦然。

所以，我的想法是在不同的表上放置两个触发器 1）当它放在 A 中时，它放在 B 中。2）当它放在 B 中时，它放在 A

这将创建一个永无止境的循环（我假设？）所以您可以在触发器 2 运行时禁用触发器 1 并在最后启用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:16:10.177

尽管我同意 Damien 的评论，即在同一个数据库中的两个表中复制数据通常是不可取的，但如果您真的有充分的理由这样做，那么您可以使用[`INSTEAD OF`](http://msdn.microsoft.com/en-us/library/ms175521%28v=sql.100%29.aspx)触发器而不是`AFTER`触发器（我假设您现在正在查看）。这样你就可以用你自己编码和控制`INSERT`的两个独立的“替换”一个。`INSERTs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:02:11.007

是的你可以：

```
ALTER TABLE tablename DISABLE TRIGGER triggername
ALTER TABLE tablename ENABLE TRIGGER triggername 
```

虽然，对于您的解决方案，我会创建一个在每一侧运行相同的触发器，并且足够聪明，不会搞砸自己。

即使触发器智能地区分用户/客户端INSERT 和触发器'MOVE'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:03:37.653

或者您可以在更新之前检查触发器中的信息是否已更改，这将结束循环？

# html - 如何将两个或三个画布的内容本地复制到另一个画布

> ID：11361799
> 
> 赞同：0
> 
> 时间：2012-07-06T12:00:07.773
> 
> 标签：html, canvas, html5-canvas

我有几层帆布：

```
<canvas id="layer1" width="700" height="700" class="pageCanvas">   </canvas>
<canvas id="layer2"  width="700" height="700" class="pageCanvas">   </canvas>
<canvas id="layer3"  width="700" height="700" class="pageCanvas">   </canvas> 
```

我想放画布的图像

> 第 1 层和第 2 层

画布

> 第 3 层。

如果您写下代码，我会很高兴，因为我在互联网上找不到任何好的解释。

谢谢``

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:28:08.630

合并两个画布并将其放到layer3：

```
var canvas1 = document.getElementById('layer1');

var canvas2 = document.getElementById('layer2');

var canvas3 = document.getElementById('layer3');

canvas3.drawImage(canvas1, 0, 0);

canvas3.drawImage(canvas2, 0, 0); 
```

# c++ - std::shared_ptr 迭代器

> ID：11361800
> 
> 赞同：0
> 
> 时间：2012-07-06T12:00:09.230
> 
> 标签：c++

我有一个迭代器，它遍历 std::shared_ptr。因此 operator++ 将内部存储的共享指针指向下一项。

```
template<class IT>
class MyIterator
{
public:
    ...

    MyIterator& operator++()
    {
        _i = ... // Call factory
        return *this;
    }
private:
    std::shared_ptr<IT> _i;
}; 
```

我应该如何实现 operator*() 和 operator->() 运算符？

我应该如何测试迭代器是否指向 NULL，即内部共享指针是否指向 NULL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:10:12.240

您应该定义在什么情况下允许用户尊重您的类的实例。通常这是“除了结束迭代器或未初始化的迭代器之外的任何东西”。

然后，您应该确保`_i`从不包含可以取消引用的实例的空指针。

这意味着不需要检查，因为不允许用户打电话`operator*`或`operator->`在这种情况下。您可以添加一个进行调试，例如：`assert(_i.get());`.

你没有指定`value_type`你的迭代器是什么，但假设它是`IT`，你可以实现：

```
IT &operator*() { return *_i; }
shared_ptr<IT> operator->() { return _i; }
// or
IT *operator->() { return _i.get(); } 
```

# python - 使用 Openoffice 导入错误 Python

> ID：11361801
> 
> 赞同：0
> 
> 时间：2012-07-06T12:00:21.387
> 
> 标签：python, openoffice-writer

我正在尝试将 TabStop 导入我的 Python 脚本以创建 openoffice 文档。只有我不断收到此错误：

```
Traceback (most recent call last):
  File "C:\Users\Sander\Desktop\macroTest.py", line 10, in <module>
    from com.sun.star.style import TabStop
ImportError: No module named com.sun.star.style 
```

这是我用来创建文档的代码的一部分：

```
from win32com.client import Dispatch as Dispatch
svm = Dispatch("com.sun.star.ServiceManager")
coreflect = svm.createInstance("com.sun.star.reflection.CoreReflection")
desktop = svm.createInstance("com.sun.star.frame.Desktop")
doc = desktop.loadComponentFromURL("private:factory/swriter", "_blank",0, [])
default = doc.StyleFamilies.getByName("PageStyles").getByName("Default")
txt = doc.getText()
cur = txt.createTextCursor() 
```

出错的那一行：

```
from com.sun.star.style import TabStop 
```

有人知道如何解决此导入问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:32:30.643

我已经解决了这个问题。我使用了已安装的 Python 2.7 版本。我在 openoffice 文件夹中找到了一个 python.exe。当我使用该可执行文件时，导入工作。

# .htaccess - htaccess 用锚重定向一个新地址

> ID：11361802
> 
> 赞同：1
> 
> 时间：2012-07-06T12:00:24.367
> 
> 标签：.htaccess

我需要在开幕式的地址，

```
 http://mysite.com/page.php 
```

发生重定向到这个地址：

```
 http://mysite.com/other_page.php#!blablabla 
```

请告诉我，如何用 .htaccess 文件制作这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:07:56.253

默认情况下，特殊字符，例如 & 和 ?，将被转换为其等效的十六进制代码。使用 [NE] 标志可以防止这种情况发生。

```
RewriteRule ^/anchor/(.+) /bigpage.html#$1 [NE,R] 
```

上面的示例将 /anchor/xyz 重定向到 /bigpage.html#xyz。省略 [NE] 将导致 # 转换为其等效的十六进制代码 %23，这将导致 404 Not Found 错误条件。

另见这个问题：

[Htaccess 重定向](https://stackoverflow.com/questions/1501732/htaccess-redirect)

# iphone - 我可以使用 GPUImage 在视频上设置帧吗？

> ID：11361806
> 
> 赞同：2
> 
> 时间：2012-07-06T12:00:51.190
> 
> 标签：iphone, objective-c, avfoundation, video-processing, gpuimage

我有一个本地视频文件，现在我在 GPUImage 库的帮助下应用了过滤器，这里是使用 GPUImage 制作过滤视频的代码

```
movieFile = [[GPUImageMovie alloc] initWithURL:sampleURL];
pixellateFilter = [[GPUImagePixellateFilter alloc] init];
GPUImageRotationFilter *rotationFilter = [[GPUImageRotationFilter alloc] initWithRotation:kGPUImageRotateRight];

[movieFile addTarget:rotationFilter];
[rotationFilter addTarget:pixellateFilter];

NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Movie.m4v"];
unlink([pathToMovie UTF8String]);
NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];

movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(480.0, 640.0)];
[pixellateFilter addTarget:movieWriter];

[movieWriter startRecording];
[movieFile startProcessing];

[pixellateFilter removeTarget:movieWriter];
[movieWriter finishRecording]; 
```

现在我想在这个视频文件上应用帧，我的意思是我已经获取了视频文件的 naturalSize。并希望在此视频文件上应用带有 naturalSize 的帧。

我能怎么做 ？可能吗 ？

问候，

******** 已解决 ********* 根据我的限制，GPUImage 无法在视频上添加图像.. 非常感谢这个[链接](https://stackoverflow.com/questions/11377917/can-i-add-uiimage-or-cgimageref-to-video/11395787#11395787)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T06:38:22.850

是的，您可以通过以下代码获取视频文件的自然大小.. @mayur-shrivas 根据[GPUImage ：将文件管理器应用于现有视频文件](https://stackoverflow.com/questions/16332390/gpuimage-apply-filer-to-existing-video-file)

```
AVURLAsset *asset = [AVURLAsset URLAssetWithURLNSURL fileURLWithPath:pathToMovie] options:nil];
AVAssetTrack *videoAssetTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(videoAssetTrack.naturalSize.width, videoAssetTrack.naturalSize.height)]; 
```

# asp.net-mvc - MVC 4 Web API - CreateResponse(status, object) 导致 HTTP 500

> ID：11361810
> 
> 赞同：1
> 
> 时间：2012-07-06T12:01:12.770
> 
> 标签：asp.net-mvc

有谁知道更多关于 CreateResponse 这个问题的信息？

```
public HttpResponseMessage GetProductLine(Guid id) 
{ ... // get object etc. //

// This works.
return this.Request.CreateResponse(HttpStatusCode.OK, productLine);

// This causes HTTP 500 Internal Server Error.
return this.Request.CreateResponse(HttpStatusCode.OK, (EntityObject)productLine); 
```

它创建响应，但在返回时出现问题，因此在 Web API 框架内。

我发现了这一点，因为我有一个基本 API 控制器，其中我有自己的 CreateResponse 方法，它按照上面的方法调用 this.Request.CreateResponse，然后添加一些标头并将一些日志记录写入响应并将其返回。

特别有趣的是，这适用于我的一个实体控制器，而不适用于这个最新的 - 即它只是不喜欢某些实体。

我可以通过使我的实现看起来像这样来解决它：

```
MyBaseApiController.CreateResponse<T>(HttpStatusCode statusCode, T entity) 
  where T : EntityObject 
```

但无论如何，这很奇怪。

**更新**

由于一些 DRY 重构，我之前的修复被破坏了。我无法弄清楚如何让它再次工作，所以我被卡住了。

从数据库返回对象时似乎没有出现问题，但是当我返回在 Put 中接收到的对象时。

手动构建我自己的 HttpResponseMessage 并设置格式化程序时也会出现问题。

在返回数据之前，我必须从数据库中重新读取数据，并希望它能正常工作——我的 Get 很好，所以应该可以。

**更新 2**

哦，这太疯狂了。即使我再次从 EF 获取对象并使用与 Get 处理程序/操作中相同的代码行返回它，它也会失败。现在的区别必须在请求中 - Chrome 形成的 GET 很好，我的测试客户端 (JSON) 形成的 PUT 一定会绊倒它。

**更新 3**

我花了一天时间整理我的实体以避免任何继承，问题已经消失了。看来，继承是不行的。

**更新 4**

所以我有一个新的 WebAPI 服务，它返回我编写的可序列化类。虽然可以使用 DataContractSerializer 对其进行序列化，但当我的请求接受 XML 时，我得到一个 500，但当我接受 JSON 时它很好。

**更新 5**

使用[ITraceWriter](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)我设法看到了堆栈跟踪，它的结尾是这样的：

> Exception.Source：System.Xml Exception.Message：''，十六进制值 0x05，是无效字符。Exception.StackTrace：在 System.Xml.XmlUtf8RawTextWriter.InvalidXmlChar（Int32 ch，Byte* pDst，布尔实体）

看起来对象中的一些字节数组正在与 Xml 格式化程序/序列化程序搞混。

# c# - 捕获所有 Windows 消息

> ID：11361811
> 
> 赞同：8
> 
> 时间：2012-07-06T12:01:15.747
> 
> 标签：c#, windows, machine-learning, messaging

我想利用机器学习对用户的意图进行建模，并可能自动执行常用任务。为此，我希望能够访问有关用户操作和机器状态的信息。为此，我目前的想法是访问 Windows 消息流可能是前进的方向。

我希望获得尽可能多的信息，将信息过滤到我想留给机器学习工具的相关信息。

这将如何实现？（最好在 C# 中）。

请假设我知道如何管理和使用大量涌入的数据。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T12:13:22.887

您可以使用[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)设置低级挂钩以捕获（特定）窗口消息。具体来说，这些钩子 ID 可能对监控很有趣：

> `WH_CALLWNDPROC`(4) 在系统将消息发送到目标窗口过程之前，安装一个挂钩过程来监视消息。有关详细信息，请参阅 CallWndProc 挂钩过程。
> 
> `WH_CALLWNDPROCRET`(12) 安装一个钩子过程，在消息被目标窗口过程处理后监视它们。有关详细信息，请参阅 CallWndRetProc 挂钩过程。

自从我实现它已经有一段时间了，但作为一个例子，我已经发布了我用来挂钩特定消息的基类。（例如，我在全局鼠标滚轮捕获器中使用了它，以确保我的 winforms 应用程序的行为与 Internet Explorer 相同：滚动光标下方的控件，而不是活动控件）。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using Subro.Win32;

namespace Subro
{
    /// <summary>
    /// Base class to relatively safely register global windows hooks
    /// </summary>
    public abstract class GlobalHookTrapper : FinalizerBase
    {
        [DllImport("user32", EntryPoint = "SetWindowsHookExA")]
        static extern IntPtr SetWindowsHookEx(int idHook, Delegate lpfn, IntPtr hmod, IntPtr dwThreadId);

        [DllImport("user32", EntryPoint = "UnhookWindowsHookEx")]
        private static extern int UnhookWindowsHookEx(IntPtr hHook);

        [DllImport("user32", EntryPoint = "CallNextHookEx")]
        static extern int CallNextHook(IntPtr hHook, int ncode, IntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll")]
        static extern IntPtr GetCurrentThreadId();

        IntPtr hook;
        public readonly int HookId;
        public readonly GlobalHookTypes HookType;

        public GlobalHookTrapper(GlobalHookTypes Type):this(Type,false)
        {
        }

        public GlobalHookTrapper(GlobalHookTypes Type, bool OnThread)
        {
            this.HookType = Type;
            this.HookId = (int)Type;
            del = ProcessMessage;
            if (OnThread)
                hook = SetWindowsHookEx(HookId, del, IntPtr.Zero, GetCurrentThreadId());
            else
            {
                var hmod = IntPtr.Zero; // Marshal.GetHINSTANCE(GetType().Module);
                hook = SetWindowsHookEx(HookId, del, hmod, IntPtr.Zero);
            }

            if (hook == IntPtr.Zero)
            {
                int err = Marshal.GetLastWin32Error();
                if (err != 0)
                    OnHookFailed(err);
            }
        }

        protected virtual void OnHookFailed(int Error)
        {
            throw Win32Functions.TranslateError(Error);
        }

        private const int HC_ACTION = 0;

        [MarshalAs(UnmanagedType.FunctionPtr)]
        private MessageDelegate del;

        private delegate int MessageDelegate(int code, IntPtr wparam, IntPtr lparam);

        private int ProcessMessage(int hookcode, IntPtr wparam, IntPtr lparam)
        {
            if (HC_ACTION == hookcode)
            {
                try
                {
                    if (Handle(wparam, lparam)) return 1;
                }
                catch { }
            }
            return CallNextHook(hook, hookcode, wparam, lparam);
        }

        protected abstract bool Handle(IntPtr wparam, IntPtr lparam);

        protected override sealed void OnDispose()
        {
            UnhookWindowsHookEx(hook);
            AfterDispose();
        }

        protected virtual void AfterDispose()
        {
        }

    }

    public enum GlobalHookTypes
    {
        BeforeWindow = 4, //WH_CALLWNDPROC 
        AfterWindow = 12, //WH_CALLWNDPROCRET 
        KeyBoard = 2, //WH_KEYBOARD
        KeyBoard_Global = 13,  //WH_KEYBOARD_LL
        Mouse = 7, //WH_MOUSE
        Mouse_Global = 14, //WH_MOUSE_LL
        JournalRecord = 0, //WH_JOURNALRECORD
        JournalPlayback = 1, //WH_JOURNALPLAYBACK
        ForeGroundIdle = 11, //WH_FOREGROUNDIDLE
        SystemMessages = 6, //WH_SYSMSGFILTER
        MessageQueue = 3, //WH_GETMESSAGE
        ComputerBasedTraining = 5, //WH_CBT 
        Hardware = 8, //WH_HARDWARE 
        Debug = 9, //WH_DEBUG 
        Shell = 10, //WH_SHELL
    }

    public abstract class FinalizerBase : IDisposable
    {
        protected readonly AppDomain domain;
        public FinalizerBase()
        {
            System.Windows.Forms.Application.ApplicationExit += new EventHandler(Application_ApplicationExit);
            domain = AppDomain.CurrentDomain;
            domain.ProcessExit += new EventHandler(CurrentDomain_ProcessExit);
            domain.DomainUnload += new EventHandler(domain_DomainUnload);            
        }

        private bool disposed;
        public bool IsDisposed{get{return disposed;}}
        public void Dispose()
        {
            if (!disposed)
            {
                GC.SuppressFinalize(this);
                if (domain != null)
                {
                    domain.ProcessExit -= new EventHandler(CurrentDomain_ProcessExit);
                    domain.DomainUnload -= new EventHandler(domain_DomainUnload);
                    System.Windows.Forms.Application.ApplicationExit -= new EventHandler(Application_ApplicationExit);
                }
                disposed = true;
                OnDispose();
            }
        }

        void Application_ApplicationExit(object sender, EventArgs e)
        {
            Dispose();
        }

        void domain_DomainUnload(object sender, EventArgs e)
        {
            Dispose();
        }

        void CurrentDomain_ProcessExit(object sender, EventArgs e)
        {
            Dispose();
        }

        protected abstract void OnDispose();
                /// Destructor
        ~FinalizerBase()
        {
            Dispose();
        }
    }

} 
```

# asp.net-mvc - 传递变量值进行编辑时出错

> ID：11361812
> 
> 赞同：0
> 
> 时间：2012-07-06T12:01:18.697
> 
> 标签：asp.net-mvc, mongodb, razor

在索引中，我有以下要编辑的对象的链接：

```
<div class="editor-field">@Html.ActionLink("Edit", "Edit", new { id = thing.Id })</div> 
```

在我的控制器上，我有以下方法签名：

```
public ActionResult Edit(Thing thing) 
```

但是这没有被调用，而是显示一个错误，指定传递了空值。该链接包含所需的对象 ID 值。我需要更改控制器中 Edit 方法的签名吗？

更新：即使将错误消息更改为，该示例也会失败

```
Server Error in '/' Application.
The parameters dictionary contains a null entry for parameter 'id' of non-nullable type 'MongoDB.Bson.ObjectId' for method 'System.Web.Mvc.ActionResult Edit(MongoDB.Bson.ObjectId)' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T12:04:41.433

> 我需要更改控制器中 Edit 方法的签名吗？

是的，因为你只传递了一个`id`参数，所以`Html.ActionLink`你不能期望在你的`Edit`操作中得到更多的东西：

```
public ActionResult Edit(string id)
{
    Thing thing = ... go and fetch the thing from the id
    ...
} 
```

# .net - 如何从.net Web 服务启动应用程序？

> ID：11361819
> 
> 赞同：1
> 
> 时间：2012-07-06T12:01:43.417
> 
> 标签：.net, web-services, process

我使用`System.Diagnostic.Process`类在使用 .Net WCF Web 服务的服务器 PC 上启动进程。他们开始顺利，我可以看到他们从任务管理器运行，但没有显示窗口。你们认为我怎样才能克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:13:09.453

如果你想显示一个 GUI 并且用户能够与之交互，你必须启动**一个交互过程**。您的 Web 服务目前可能不是这种情况。

请参阅[启动 Windows 服务并启动 cmd](https://stackoverflow.com/questions/4147821/start-a-windows-service-and-launch-cmd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:21:10.937

你不应该这样做，但是......

您可以在当前会话中以用户身份启动程序

```
IntPtr UserTokenHandle = IntPtr.Zero;
WTSQueryUserToken ( WTSGetActiveConsoleSessionId(), ref UserTokenHandle);

PROCESS_INFORMATION ProcInfo = new PROCESS_INFORMATION();
STARTUPINFOW StartInfo = new STARTUPINFOW();
StartInfo.cb = Convert.ToUInt32(System.Runtime.InteropServices.Marshal.SizeOf(StartInfo));

CreateProcessAsUser ( UserTokenHandle, @"C:\dir\MyApp.exe",
    IntPtr.Zero,
    IntPtr.Zero,
    IntPtr.Zero,
    false,
    0,
    IntPtr.Zero,
    null,
    ref StartInfo,
    ref ProcInfo);

if (!(UserTokenHandle == IntPtr.Zero))
{
    CloseHandle ( UserTokenHandle);
} 
```

所需的导入和结构：

```
[DllImport("kernel32.dll", EntryPoint = "WTSGetActiveConsoleSessionId", SetLastError = true)]
public static extern uint WTSGetActiveConsoleSessionId ();

[DllImport("Wtsapi32.dll", EntryPoint = "WTSQueryUserToken", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool WTSQueryUserToken ( uint SessionId, ref IntPtr phToken );

[DllImport("kernel32.dll", EntryPoint = "CloseHandle", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool CloseHandle ( [InAttribute()]
    IntPtr hObject );

[DllImport("advapi32.dll", EntryPoint = "CreateProcessAsUserW", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool CreateProcessAsUser (
    [InAttribute()]
    IntPtr hToken,
    [InAttribute(), MarshalAs(UnmanagedType.LPWStr)]
    string lpApplicationName, System.IntPtr lpCommandLine,
    [InAttribute()]
    IntPtr lpProcessAttributes,
    [InAttribute()]
    IntPtr lpThreadAttributes,
    [MarshalAs(UnmanagedType.Bool)]
    bool bInheritHandles, uint dwCreationFlags,
    [InAttribute()]
    IntPtr lpEnvironment,
    [InAttribute(), MarshalAsAttribute(UnmanagedType.LPWStr)]
    string lpCurrentDirectory,

ref STARTUPINFOW lpStartupInfo,

ref PROCESS_INFORMATION lpProcessInformation );

[StructLayout(LayoutKind.Sequential)]
public struct SECURITY_ATTRIBUTES
{
    public uint nLength;
    public IntPtr lpSecurityDescriptor;
    [MarshalAs(UnmanagedType.Bool)]
    public bool bInheritHandle;
}

[StructLayout(LayoutKind.Sequential)]
public struct STARTUPINFOW
{
    public uint cb;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string lpReserved;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string lpDesktop;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string lpTitle;
    public uint dwX;
    public uint dwY;
    public uint dwXSize;
    public uint dwYSize;
    public uint dwXCountChars;
    public uint dwYCountChars;
    public uint dwFillAttribute;
    public uint dwFlags;
    public ushort wShowWindow;
    public ushort cbReserved2;
    public IntPtr lpReserved2;
    public IntPtr hStdInput;
    public IntPtr hStdOutput;
    public IntPtr hStdError;
}

[StructLayout(LayoutKind.Sequential)]
public struct PROCESS_INFORMATION
{
    public IntPtr hProcess;
    public IntPtr hThread;
    public uint dwProcessId;
    public uint dwThreadId;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:07:54.503

您在谈论 Web 服务，因此它可能也作为 Windows 服务运行？在这种情况下，您可以启动流程，但永远不会看到任何表单。

Windows 服务旨在在您的计算机上运行，​​即使没有用户登录。因此，它永远不知道在哪里显示您要运行的应用程序！

您可以摆弄一个名为“允许与桌面交互”（或类似的东西）的设置，但服务并不意味着以这种方式使用。

# c# - Google 自定义搜索 JSON Api 响应限制

> ID：11361821
> 
> 赞同：1
> 
> 时间：2012-07-06T12:01:49.867
> 
> 标签：c#, google-custom-search

我正在使用带有 JSON 响应的 Google 自定义搜索 API，但它只给我 100 个结果，我的帐户是免费的。你知道如果我将我的帐户状态更改为付费帐户，我可以获得超过 100 个结果吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:27:04.767

来自[https://developers.google.com/custom-search/v1/overview#Pricing](https://developers.google.com/custom-search/v1/overview#Pricing)：

> 付费使用
> 
> 如果您未注册计费，超出免费使用配额的任何使用都将失败。启用计费后，您将继续每天收到 100 次免费查询。但是，对于所有额外的请求，您将按每 1000 次查询 5 美元的费率付费，每天最多 10,000 次查询。如果您需要额外配额，请从控制台申请额外配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T09:32:51.037

这是一个非常好的问题，我也想问同样的问题，但是很难正确地构造问题。我目前正在开发一个应用程序，结果机制在晚上只是“死机”。我必须等到第二天才能进行任何搜索，这非常令人沮丧。我目前还没有检查错误代码，因为我非常确定问题与配额有关。

# ios - 使用 Chrome DevTools 调试 iOS 6+7 Mobile Safari

> ID：11361822
> 
> 赞同：78
> 
> 时间：2012-07-06T12:01:50.757
> 
> 标签：ios, safari, mobile-safari, google-chrome-devtools, web-inspector

iOS 6 内置了对远程调试的支持（[1 分钟截屏](http://www.screenr.com/GYZ8)）。它与新的 Safari Web Inspector 配合得很好，它似乎是 WebKit Inspector 的 1 年分支。它遗漏了一些功能，例如 JS 编辑和 WebSocket 帧检查。

> Safari 的 Web 检查器确实使用 WebKit 远程调试协议。但是，Safari 不使用 TCP/HTTP 作为传输层，因此与 Chrome 不兼容。

[苹果员工 Timothy Hatcher（又名 Xenon）说](https://devforums.apple.com/thread/158126)

*   Safari 将什么用于传输层？
*   我可以从这个神秘的传输层到 HTTP 做一个代理，让它与 Chrome DevTools 一起工作吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-06-03T18:27:44.303

[**iOS WebKit 调试代理**](https://github.com/google/ios-webkit-debug-proxy)项目可以实现这一点。

![截屏](../Images/b134daee40f9a6653101103656fec688.png)

首先，使用自制软件安装：

```
brew install ios-webkit-debug-proxy 
```

运行模拟器（如果正在运行模拟器）：

```
SIM_DIR=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer
  "$SIM_DIR/Applications/iPhone Simulator.app/Contents/MacOS/iPhone Simulator" \
  -SimulateApplication \
  $SIM_DIR/SDKs/iPhoneSimulator6.1.sdk/Applications/MobileSafari.app/MobileSafari 
```

运行代理：

```
ios_webkit_debug_proxy 
```

### 检查错误

在设备上查看错误消息：

> 无法连接到lockdownd。退出。：没有这样的文件或目录。无法附加检查器 ios_webkit_debug_proxy

然后检查设备是否有[这样](https://i.stack.imgur.com/hPaqX.png)的提示（iOS 7 示例：）

> 信任当前连接的计算机？

选择“信任”并尝试重新运行代理：

```
ios_webkit_debug_proxy 
```

### 打开默认开发工具

然后打开`http://localhost:9221`

默认情况下，DevTools 是旧版本（大约 2012 年 3 月从 Chrome 18 开始）。

### 尝试现代开发工具

由于[协议](https://developers.google.com/chrome-developer-tools/docs/debugger-protocol)更改，现代 DevTools 前端的部分可能无法完全工作。你可以打开试试

```
chrome-devtools://devtools/bundled/inspector.html?ws=localhost:9222/devtools/pag‌​e/2 
```

其中`port`和`page`值是您从中看到的值`http://localhost:9221`。同样，这可能确实是错误的。

在[ios-webkit-debug-proxy 项目页面上](https://github.com/google/ios-webkit-debug-proxy)阅读更多文档。

* * *

**更新：**这也适用于[iOS7](https://i.imgur.com/c8WkEo3.png)。**更新**：通过[patrick](https://stackoverflow.com/users/960588/patrick)添加新[的](https://code.google.com/p/chromium/issues/detail?id=529818)**devtools**前端说明。`ws`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T03:56:28.943

根据[https://github.com/andydavies/node-iosdriver](https://github.com/andydavies/node-iosdriver)，

> Safari 使用与 Chrome 相同的调试命令，但使用 RPC 上的二进制 plist 而不是 websocket 上的 JSON。

所以，是的，可以编写一个代理。

我通过查看 Safari 在连接到 MobileSafari 检查器时所做的 TCP 连接发现[了这个线程](https://stackoverflow.com/questions/14280536/how-to-connect-to-iphones-webkit-debugger)`webinspectord`，发现它连接到一个名为的进程并在谷歌上搜索：

```
# pgrep -lf /Applications/Safari.app
33170 /Applications/Safari.app/Contents/MacOS/Safari -psn_0_21144617
# lsof -p 33170 | grep TCP
Safari  33170 ryan   16u    IPv6 0x799d5f43b472a241       0t0      TCP localhost:54892->localhost:27753 (ESTABLISHED)
# lsof -i :27753
COMMAND     PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
launchd     371 ryan   42u  IPv6 0x799d5f43b472aa01      0t0  TCP localhost:27753 (LISTEN)
Safari    33170 ryan   16u  IPv6 0x799d5f43b472a241      0t0  TCP localhost:54892->localhost:27753 (ESTABLISHED)
webinspec 33182 ryan    6u  IPv6 0x799d5f43b472aa01      0t0  TCP localhost:27753 (LISTEN)
webinspec 33182 ryan    7u  IPv6 0x799d5f43b181a621      0t0  TCP localhost:27753->localhost:54892 (ESTABLISHED)
# ps p 33182
  PID   TT  STAT      TIME COMMAND
33182   ??  S      0:00.28 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/usr/libexec/webinspectord 
```

# html - 如何向按钮添加工具提示

> ID：11361829
> 
> 赞同：4
> 
> 时间：2012-07-06T12:02:17.637
> 
> 标签：html, button, erlang, tooltip, nitrogen

使用链接和图像非常容易。可以只指定 title="Something" 以在元素上获得一个不错的工具提示。但不知何故，我看不到任何方便的方法来对按钮执行相同的操作。似乎 HTML 本身首先错过了这个选项。

但也许至少有一个方便的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:38:57.080

> 来自nitrogenweb googlegroup 的Jesse Gumm 分享了一个很好的方法来做到这一点

```
#button{text="Submit",postback=whatever,actions="obj('me').title=\"Some title\""} 
```

# google-app-engine - get_by_id 和父键

> ID：11361831
> 
> 赞同：4
> 
> 时间：2012-07-06T12:02:20.610
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我曾经使用[get_by_id](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_by_id)从数据存储中获取实体，但从不使用[Ancestor Paths](https://developers.google.com/appengine/docs/python/datastore/entities#Ancestor_Paths)。但是我的模型的复杂性使它变得很有必要。事实上，祖先路径解决了一个大问题，但现在当我尝试`get_by_id`实体返回`None`时，如果实体具有父键。这意味着我需要添加父键：

```
entity = MyModel.get_by_id(id) 
```

这将变成：

```
entity = MyModel.get_by_id(id, parent=key) 
```

如何构建父密钥？

编辑：

在这一点上，我更喜欢留下祖先路径并添加另一个 keyproperty。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T13:32:41.773

如果你想使用实体组，你可以简单地创建一个这样的键：

```
key_parent = db.Key.from_path('MyModelParent', 'id_parent') # You don't have to create this kind in the datastore.

id = int(self.request.get('id'))
entity = MyModel.get_by_id(id, parent=key_parent) 
```

我注意到：您对 key 参数使用大写。这是*parent*不是*Parent*。

```
entity = MyModel.get_by_id(id, Parent=key) # Wrong
entity = MyModel.get_by_id(id, parent=key) 
```

哦，你正在使用 NDB：

```
key_parent = ndb.Key('MyModelParent', 'id_parent') 
```

# liferay - Portlet 内容未显示在 Liferay 中

> ID：11361832
> 
> 赞同：1
> 
> 时间：2012-07-06T12:02:21.580
> 
> 标签：liferay, portlet

我最近开始使用 portlet，并尝试使用多个门户引擎。我有一个基本的 hello world portlet（扩展 GenericPortlet 并且基本上与所有教程中的相同）与 Pluto 2 完美配合。

我将相同的 portlet 部署到 Liferay 6.0，并将其添加到门户中的页面。奇怪的是，portlet 框架出现时没有任何内容。根据日志，调用了 portlet init()，但没有调用 doView()，因此生成的 HTML 页面中没有 portlet 内容。

我的问题是：同样的 portlet 是否也应该与 Liferay 一起开箱即用？如果不是，哪些非标准描述符对于将 portlet 部署到 Liferay 是必需的？如果是，可能是什么问题？我在一些论坛中看到过 portlet 内容高度问题，但这可能不是问题：内容没有隐藏，根本没有生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:41:40.157

在检查相关文件内容以按要求粘贴到此处时，我意识到我的 web.xml 是空的（根据 Liferay 教程应该是这样），但是一个 maven 插件会按照我的 pom.xml 中的定义在其中生成特定于 pluto 的调用程序定义。 xml。结果，生成的特定于 pluto 的 PlutoInvoker 映射搞砸了。所以它很容易解决，不过感谢您阅读这个问题。

# android - 如何在自定义位置（如foursquare）发布签到

> ID：11361836
> 
> 赞同：4
> 
> 时间：2012-07-06T12:02:33.883
> 
> 标签：android, facebook

我提到[了 https://developers.facebook.com/docs/opengraph/location_tagging/](https://developers.facebook.com/docs/opengraph/location_tagging/)

在尝试发布签到时，我将 place=(some url like "http://www.example.com/jeffys_burgers.html") 以及 lat、long 坐标和来自 android 应用程序的 facebook user_id 传递，它响应 {"error ":{"message":"(#100) 需要有效的地方页面 ID","type":"OAuthException","code":100}}。

我的查询是如何在我的 facebook 应用程序中指定操作、对象类型，以便我可以从 android 应用程序传递适当的参数，以便在自定义位置发布签到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:23:41.073

在您链接到的文档中（在“指定对象类型”部分中），他们创建了一个名为“地点”类型的对象类型“地点”。你必须做类似的事情。不过，您不必将其称为“场地”。

![截屏](../Images/8ddbb5bba4a8b0ccbebab2fd5c9d9ccc.png)

请记住，对象类型 Place 是“Facebook Place”。你的 jeffys_burgers.html 应该有 og:type=yournamespace:venue （如果你决定将你的对象类型称为“Venue”），并且设置了 place:location:latitude 和 place:location:longitude。

# c# - WPF 绑定 tp ViewModel

> ID：11361838
> 
> 赞同：0
> 
> 时间：2012-07-06T12:02:39.580
> 
> 标签：c#, .net, xaml, data-binding, mvvm

我无法让列表视图绑定到 ViewModel。我的 ViewModel 的代码如下：

```
class MyViewModel : INotifyPropertyChanged
{
    ObservableCollection<MyDataItemViewModel> dataToShow;

    public ObservableCollection<MyDataItemViewModel> DataToShow
    {
        get
        {
            return dataToShow;  // A breakpoint here is never hit
        }
    }

    public MyViewModel(ObservableCollection<MyDataItemViewModel> toShow)
    {
        dataToShow = toShow;   // A breakpoint here reveals that there is data

        RegisterCommands();
    }
... 
```

我的 XAML 如下：

```
 <ListView   Name="DataView"
                ...
                ItemsSource="{Binding MyViewModel.DataToShow}">

        <ListView.View>
            <GridView>
                <GridViewColumn Header="Number"
                        ...
                        DisplayMemberBinding="{Binding Path=Details.Number}" />
                ... 
```

该类的代码`MyDataItemViewModel`返回一个名为 的公共类`Details`，其中包含许多属性，包括`Number`.

屏幕显示正常，但没有任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:08:53.867

试试这个：

```
ItemsSource="{Binding DataToShow}" 
```

# powershell - 引号内还是引号外的变量？

> ID：11361841
> 
> 赞同：0
> 
> 时间：2012-07-06T12:02:55.070
> 
> 标签：powershell, powershell-2.0

我正在尝试从注册表项中获取产品版本。在我希望控制台向最终用户显示产品版本的地方有点卡住 - 我不断收到意外的令牌。

我尝试移动引号之类的东西，但仍然无济于事。

我想我需要将“if”更改为“$SEPVersion.ProductVersion -eq“11.0.5002.333”） - 我这样做了，但我仍然遇到错误。

任何帮助，将不胜感激：

```
$SEPVersion = Get-ItemProperty 'HKLM:\SOFTWARE\Symantec\Symantec Endpoint Protection\SMC' -Name 'ProductVersion' | fl  ProductVersion -ErrorAction SilentlyContinue
if ($SEPVersion-eq "11.0.5002.333") {
    "SEP Version is correct the version is set to" $SEPVersion
}
else {
    "SEP Version is INCORRECT - Please resolve this - the version of SEP is " $SEPVersion } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:26:59.810

试试这个：

```
$SEPVersion = (Get-ItemProperty 'HKLM:\SOFTWARE\Symantec\Symantec Endpoint Protection\SMC' -Name 'ProductVersion' -ea SilentlyContinue ).Productversion     

if ($SEPVersion -eq "11.0.5002.333") 
{
    "SEP Version is correct the version is set to $SEPVersion"
}
else 
{
    "SEP Version is INCORRECT - Please resolve this - the version of SEP is $SEPVersion" 
} 
```

# c++ - 使用 libpng - const 对象保存图像

> ID：11361849
> 
> 赞同：1
> 
> 时间：2012-07-06T12:03:37.807
> 
> 标签：c++, constants, libpng

我有一个管理灰度图像的类。我想用 libpng 保存它。为此，我想使用这样的`const`成员函数：

```
void GrayscaleImage::SavePNG(std::string filename) const
{
    // ...
    png_bytep* row_pointers = new png_bytep[m_height];
    for (int i = 0; i < height_; i++) {
        row_pointers[i] = const_cast<png_bytep>(m_data.data()) +  i * m_width * sizeof(uint8_t);
    }
    png_set_rows(png_ptr, info_ptr, row_pointers);
    // ...
} 
```

问题是第三个参数`png_set_rows`是非常量，所以我必须`const_cast`在某个时候使用，如果我希望成员函数`GrayscaleImage::SavePNG`是`const`. 我想知道，这样做安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-22T00:54:56.930

libpng 提供了一个 API 来释放 row_pointers 和它们指向的东西；png_data_freer。这是读取时的默认设置（当前可以调用 png_set_rows 但该调用被忽略）。

只要您不调用 png_data_freer，您所做的就是安全的。没有写入 API 修改输入数据。

问题存在于 png_write_image 中，API png_write_png 调用也存在，并且存在于 png_write_rows 中。它曾经存在于 png_write_row 中，这是最低级别的 API，但在 libpng 1.5 中已修复；这是一个安静的 API 更改，因为它不会更改参数的类型兼容性。将其更改得更高会导致现有应用程序由于类型错误而无法编译。

您不太可能很快看到变化；在我看来，在 libpng 2.0 之前，不太可能以需要应用程序重写现有代码的方式更改 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:11:14.660

你的`const`函数定义中的 只是说你的实例不应该改变。保存到文件不应更改您的实例，所以没关系。当然，第三个参数`png_set_rows`不是`const`因为它被设置了。

只要它们不属于您的类，您是否在 const 函数中创建、销毁或更改内容都没有关系。您的代码不会更改 GrayscaleImage 的任何实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T19:20:28.723

这不安全。`png_set_rows()`如果没有declare的第三个参数`const`，您无法保证它不会修改输入数据。

`const`即使可以，您也将始终不得不处理不声明参数的库。这就是`const_cast`存在的原因。你应该非常小心地使用它。但从描述来看，它不太可能`png_set_rows()`会修改您的数据。

编辑：这是源代码。你可以看到它没有修改`row_pointers`。（但它肯定会修改其他两个参数！）

```
void PNGAPI
png_set_rows(png_structp png_ptr, png_infop info_ptr, png_bytepp row_pointers)
{
   png_debug1(1, "in %s storage function", "rows");

   if (png_ptr == NULL || info_ptr == NULL)
      return;

   if (info_ptr->row_pointers && (info_ptr->row_pointers != row_pointers))
      png_free_data(png_ptr, info_ptr, PNG_FREE_ROWS, 0);

   info_ptr->row_pointers = row_pointers;

   if (row_pointers)
      info_ptr->valid |= PNG_INFO_IDAT;
} 
```

# java - 无法打开套接字文件：目标进程没有响应或 HotSpot VM 未加载

> ID：11361853
> 
> 赞同：3
> 
> 时间：2012-07-06T12:03:53.877
> 
> 标签：java, jvm, cloud-foundry, btrace

我需要从部署在`cloudfoundry`.

```
String javaHome = System.getenv("JAVA_HOME");
String javaLocation = javaHome+"/bin/java";

String command = javaLocation+" -Xms256m -Xmx512m -Dcom.sun.btrace.probeDescPath=. -Dcom.sun.btrace.dumpClasses=false -Dcom.sun.btrace.debug=false -Dcom.sun.btrace.unsafe=false -cp "+btraceLib+":"+toolsLib+ " com.sun.btrace.client.Main "+pid+" "+probeScript;

Process p = runTime.exec(command); 
```

但我收到以下错误：

```
Unable to open socket file: target process not responding or HotSpot VM not loaded 
```

我尝试了不同的 jvm 堆大小界限，但得到了相同的错误。

如何解决错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:11:46.947

改变：

```
Process p = runTime.exec(command); 
```

至：

```
Process p = Runtime.getRuntime().exec(command); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T00:47:36.957

不知道“真正的”解决方案，但我从 1.7 降级到 java 1.6（我遇到了同样的问题），我可以分析应用程序而不会出现这个错误。

# java - 如何使这段代码更干净？

> ID：11361854
> 
> 赞同：0
> 
> 时间：2012-07-06T12:04:02.567
> 
> 标签：java, android, string

我正在从事 2 项活动。一个活动有一个 textView 和一个按钮。textView 显示爱好，如果用户单击按钮，则会设置该爱好。当用户单击按钮时，他/她将转到第二个活动，该活动有 4 个与爱好对应的复选框。当用户从菜单中单击完成时，他/她将返回到第一个活动，之后，选中的爱好将显示在文本视图中，以逗号（“，”）分隔。我的问题是，当用户再次使用按钮设置爱好，但已经在 textView 中显示爱好时，第二个 Activity 中的复选框应根据 textView 中显示的内容进行初始化。我已经尝试过数组，甚至是硬编码，但我陷入了逻辑困境。这是我的代码。假设所有视图都已初始化：

第一个屏幕（重要位）：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        switch (requestCode) {
        case SET_BIRTHDAY:
            TextView textBirthday = (TextView) findViewById(R.id.tvBirthdayStat);
            birthdayString = data.getStringExtra(Lab2_082588birthday.MONTH)
                    + "/" + data.getStringExtra(Lab2_082588birthday.DAY)
                    + "/" + data.getStringExtra(Lab2_082588birthday.YEAR);
            textBirthday.setText(birthdayString);
            break;
        case SET_HOBBIES:
            TextView textHobbies = (TextView) findViewById(R.id.tvHobbiesStat);
            anime = data.getStringExtra(Lab2_082588hobbies.ANIME);
            games = data.getStringExtra(Lab2_082588hobbies.GAMES);
            movies = data.getStringExtra(Lab2_082588hobbies.MOVIES);
            books = data.getStringExtra(Lab2_082588hobbies.BOOKS);

            checkNull();

            textHobbies.setText(hobbiesString);
            break;
        }
    }
}

private void checkNull() {
    // TODO Auto-generated method stub
    if (games == null) {
        hobbiesString = books + " , " + movies + " , " + anime;
    }
    if (anime == null) {
        hobbiesString = games + " , " + books + " , " + movies;
    }
    if (movies == null) {
        hobbiesString = games + " , " + books + " , " + anime;
    }
    if (books == null) {
        hobbiesString = games + " , " + movies + " , " + anime;
    }
    if ((games == null) && (anime == null)) {
        hobbiesString = books + " , " + movies;
    }
    if ((games == null) && (movies == null)) {
        hobbiesString = books + " , " + anime;
    }
    if ((games == null) && (books == null)) {
        hobbiesString = movies + " , " + anime;
    }
    if ((anime == null) && (movies == null)) {
        hobbiesString = games + " , " + books;
    }
    if ((anime == null) && (books == null)) {
        hobbiesString = games + " , " + movies;
    }
    if ((movies == null) && (books == null)) {
        hobbiesString = games + " , " + anime;
    }
    if ((movies == null) && (books == null) && (anime == null)) {
        hobbiesString = games;
    }
    if ((movies == null) && (games == null) && (anime == null)) {
        hobbiesString = books;
    }
    if ((games == null) && (books == null) && (anime == null)) {
        hobbiesString = movies;
    }
    if ((movies == null) && (books == null) && (games == null)) {
        hobbiesString = anime;
    }
} 
```

第二屏：

```
private void startUp() {
    // TODO Auto-generated method stub
    Intent startUp = getIntent();
    String receivedString = startUp.getStringExtra(HOBBIES_STRING);

    if (receivedString != null) {
        String[] separated = receivedString.split(",");
        if (separated.length > 0) {
            if (separated[0].equals("Anime")) {
                anime.setChecked(true);
            }
            /*----------------*/
            if (separated[0].equals("Computer Games")) {
                games.setChecked(true);
            }
            /*----------------*/
            if (separated[0].equals("Books")) {
                books.setChecked(true);
            }
            /*----------------*/
            if (separated[0].equals("Movies")) {
                movies.setChecked(true);
            }
            /*----------------*/
            if (separated[0].equals("Anime")&& separated[0].equals("Computer Games")) {
                anime.setChecked(true);
                games.setChecked(true);
            }
            if (separated[0].equals("Anime")&&separated[0].equals("Books")) {
                anime.setChecked(true);
                books.setChecked(true);
            }
            if (separated[0].equals("Anime")&&separated[0].equals("Movies")) {
                anime.setChecked(true);
                movies.setChecked(true);
            }
        }

    } 
```

代码仍然没有按预期运行。如您所见，我使用了字符串拆分和字符串数组，但是由于极端的硬编码和数组索引边界问题，使用数组使其难以处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:12:21.663

对于 CheckNull 方法，我将使用以下

```
private void checkNull() {  
hobbiesstring = "";
if (games != null) 
  hobbiesstring += games;
if (anime != null)
  hobbiesstring += anime;
if (books != null) 
  hobbiesstring += books;
if (movies != null)
  hobbiesstring += movies;
} 
```

对于第二部分，我将使用以下代码

```
private void startUp() {  
Intent startUp = getIntent();  
String receivedString = startUp.getStringExtra(HOBBIES_STRING);  

if (receivedString != null) {  
    String[] separated = receivedString.split(",");  
    foreach(string sep in seperated){
      switch(sep){
        case "Anime":
          anime.setChecked(true);
          break;
        case "Movies":
          movies.setChecked(true);
          break;
        case "Books":
          books.setChecked(true);
          break;
        case "Games":
          games.setChecked(true);
          break;
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:13:22.177

您可能希望使用`Preferences`. 让你的第二个`Activity`是 a`PreferenceActivity`和复选框 - `CheckBoxPreferences`。当用户选中/取消选中它们时，值会自动保存在`SharedPreferences`. 然后，当您返回第一个时，`Activity`您可以使用保存在`SharedPreferences`. 你可以在谷歌上搜索教程`Preferences`，[这里](http://developer.android.com/guide/topics/data/data-storage.html#pref)有一篇很好的文章`SharedPreferences`也很有用。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:14:18.410

您是否尝试将 ' `,`' 传递给 StringTokenizer ？

没那么重要，但是可以这样优化

```
 if (games == null) {
            hobbiesString = books + " , " + movies + " , " + anime;

            if (books == null) {
                hobbiesString = movies + " , " + anime;

                 if (anime == null) {
                       hobbiesString = movies;
                 }

            }
    } else if(books == null) {
           ...
    } else ... 
```

# java - 无法在小程序中捕获实时流

> ID：11361864
> 
> 赞同：1
> 
> 时间：2012-07-06T12:05:05.687
> 
> 标签：java, applet, video-streaming, ip-camera

我正在运行以下代码以从 ip 摄像机捕获实时视频流。如果我使用 Jframe 效果很好，出于某些要求，我需要将它包装在小程序中但它不起作用，任何人都可以帮忙..

```
private static final long serialVersionUID = 1L;
public boolean useMJPGStream = false;//true;
public String jpgURL="http://192.168.x.x:80/video.cgi/jpg/image.cgi?resolution=640×480";
public String mjpgURL="http://192.168.x.x:80/video.cgi/mjpg/video.cgi?resolution=640×480";
DataInputStream dis;
private Image image = null;
public Dimension imageSize = null;
public boolean connected = false;
private boolean initCompleted = false;
HttpURLConnection huc = null;
Component parent;
/** Creates a new instance of Ax52Camera */
public void init()
{
new Thread(this).start();
}
public void connect(){
try{
URL u = new URL(useMJPGStream?mjpgURL:jpgURL);
huc = (HttpURLConnection)u.openConnection();
System.out.println(huc.getContentType());
InputStream is = huc.getInputStream();
System.out.println(is.toString());
connected = true;
BufferedInputStream bis = new BufferedInputStream(is);
dis= new DataInputStream(bis);
if (!initCompleted) initDisplay();
}catch(IOException e){ //incase no connection exists wait and try again, instead of printing the error
try{
huc.disconnect();
Thread.sleep(33);
}catch(InterruptedException ie){huc.disconnect();connect();}
connect();
}catch(Exception e){;}
}
public void initDisplay(){ //setup the display
if (useMJPGStream)readMJPGStream();
else {readJPG();disconnect();}
imageSize = new Dimension(image.getWidth(this), image.getHeight(this));
setPreferredSize(imageSize);
this.setSize(imageSize);
this.validate();
initCompleted = true;
}
public void disconnect(){
try{
if(connected){
dis.close();
connected = false;
}
}catch(Exception e){;}
}
public void paint(Graphics g) { //used to set the image on the panel
if (image != null)
g.drawImage(image, 0, 0, this);
}
public void readStream(){ //the basic method to continuously read the stream
try{
if (useMJPGStream){
while(true){
readMJPGStream();
this.repaint();
}
}
else{
while(true){
connect();
readJPG();
this.repaint();
disconnect();
}
}
}catch(Exception e){;}
}
public void readMJPGStream(){ //preprocess the mjpg stream to remove the mjpg encapsulation
readLine(3,dis); //discard the first 3 lines
readJPG();
readLine(2,dis); //discard the last two lines
}
public void readJPG(){ //read the embedded jpeg image
try{
JPEGImageDecoder decoder = JPEGCodec.createJPEGDecoder(dis);
image = decoder.decodeAsBufferedImage();
}catch(Exception e){e.printStackTrace();disconnect();}
}
public void readLine(int n, DataInputStream dis){ //used to strip out the header lines
for (int i=0; i<n;i++){
readLine(dis);
}
}
public void readLine(DataInputStream dis){
try{
boolean end = false;
String lineEnd = "\n"; //assumes that the end of the line is marked with this
byte[] lineEndBytes = lineEnd.getBytes();
byte[] byteBuf = new byte[lineEndBytes.length];
while(!end){
dis.read(byteBuf,0,lineEndBytes.length);
String t = new String(byteBuf);
//System.out.print(t); //uncomment if you want to see what the lines actually look like
if(t.equals(lineEnd)) end=true;
}
}catch(Exception e){e.printStackTrace();}
}
public void run() {
connect();
readStream();
}

} 
```

我收到以下错误

```
load: class com.javaprac.AxisCamera1.class not found.
java.lang.ClassNotFoundException: com.javaprac.AxisCamera1.class
    at sun.applet.AppletClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.applet.AppletClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.applet.AppletClassLoader.loadCode(Unknown Source)
    at sun.applet.AppletPanel.createApplet(Unknown Source)
    at sun.applet.AppletPanel.runLoader(Unknown Source)
    at sun.applet.AppletPanel.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:29:48.757

我能够运行这段代码......在applet的init方法中我调用了类的对象和这样的线程......

```
public void init() {
        ViewCamera axPanel = new ViewCamera(rootPane);
        axPanel.setOpaque(true);
        new Thread(axPanel).start();
        getContentPane().add(axPanel);

        // Execute a job on the event-dispatching thread; creating this applet's
        // GUI.
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                public void run() {

                    createGUI();

                }
            });
        } catch (Exception e) {
            System.err.println("createGUI didn't complete successfully");
        }
    } 
```

我也在我的网页中嵌入了这个小程序....

# image-processing - 从一系列照片中学习 3D 模型的算法

> ID：11361867
> 
> 赞同：3
> 
> 时间：2012-07-06T12:05:16.620
> 
> 标签：image-processing, artificial-intelligence, computer-vision

你能指点我关于这个主题的论文/书籍吗？

我看到 Adob​​e AfterEffects CS5 展示了这样的功能。它也应该在一些机器人系统中实现，这些系统可以自动发现周围的环境和其中的位置。

但是到目前为止我找不到任何介绍性材料。帮助？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:59:31.890

3D 扫描可能是您想要开始使用的谷歌素材。维基[百科文章](http://en.wikipedia.org/wiki/3D_scanner)有很多信息。那里列出了许多论文，尽管我无法给出任何质量评估。

有一些相当容易获得的[技术](http://hackaday.com/2012/04/27/scanning-turntable-digitizes-objects-as-3d-models/)只依赖于懒惰的苏珊和廉价的相机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T16:32:39.450

在高度受控的场景中，您可以控制相机、照明和对象位置，可以使用 Tom Kerr 回答中的“相当容易使用的技术”等方法。

对于可以四处移动但不能控制照明或物体位置的机器人，它要复杂得多，但通常是可行的。这是一个活跃的研究领域。

在最一般的情况下，当您拥有一系列具有任意角度和照明的固定照片时，这是非常困难的。

# php - 将 http://www.*** 的所有实例替换为另一个地址

> ID：11361868
> 
> 赞同：1
> 
> 时间：2012-07-06T12:05:16.910
> 
> 标签：php, regex, replace

我有一个字符串，其中包含一个网站上的多个链接，但我需要将它们更改为链接到另一个网站。

例如，`http://www.site2.com/contact`并且`http://www.site3.com/contact`需要变成`http://www.mainsite.com/contact`。URL 在这里，`/contact`只是示例，实际情况是我需要找到所有实例`http://`并将其与下一个之间的内容替换`/`为新的 URL。

我有办法做到这一点`preg_replace()`（或类似的，如果这是最好的选择）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:07:37.983

更新：这个答案*没有*反映这个问题，因为这个问题首先有点误导。看看 Jeroens 或 ShogunArts.des 的回答

不需要正则表达式

```
$string = str_replace(
  array('http://www.site2.com/','http://www.site3.com/'),
  'http://www.mainsite.com/',
  $string
); 
```

[`str_replace()`](http://php.net/str-replace)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:08:46.680

1.  匹配网址：[http ://daringfireball.net/2010/07/improved_regex_for_matching_urls](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)
2.  使用[preg_replace_callback()](http://php.net/manual/en/function.preg-replace-callback.php)，并在回调函数中：
    1.  使用[parse_url()](http://php.net/manual/en/function.parse-url.php)获取所有部分
    2.  将`host`零件更换为`mainsite.com`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:29:28.833

这样的事情应该这样做：

```
$pattern = '#(http://)([a-z0-9.-])+/+([a-z0-9.-])#i';
$oldurl = 'http://www.site2.com/contact';
$replacement = '$1www.mainsite.com/$3';

$newurl = preg_replace($pattern, $replacement, $oldurl); 
```

**编辑：**

```
$string = 'String with many URLs';

echo replaceUrls($string);

function replaceUrls($string) {
    $pattern = '#(http://)([a-z0-9.-])+/+([a-z0-9.-]|)#i';
    $replacement = '$1www.mainsite.com/$3'; 

    return preg_replace($pattern, $replacement, $string); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T12:07:16.973

`(?<=http://)(www\.site2\.com)(?=/contact)`用新的站点名称替换正则表达式

# jms - 消费者端的 CLIENT_ACKNOWLEDGE 与 Session.commit() - JMS

> ID：11361869
> 
> 赞同：3
> 
> 时间：2012-07-06T12:05:18.407
> 
> 标签：jms

我读了这个问题（[多线程 JMS 代码：CLIENT_ACKNOWLEDGE 或事务处理会话](https://stackoverflow.com/questions/3841580/multithreaded-jms-code-client-acknowledge-or-transacted-session)），但我不明白消息使用者中这两种方法有什么区别：

1.  未处理连接。会话处于`CLIENT_ACKNOWLEDGE`模式。我们收到多条消息，然后是一条`acknowledge()`。
2.  连接已处理（不是`xa`）。会话处于`AUTO_ACKNOWLEDGE`模式。我们收到多条消息，然后执行一个`commit()`.

这取决于消息提供者的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-12-13T12:25:08.427

如果会话被处理，`acknowledgeMode`则忽略。这就是为什么在 JMS 2.0 中添加了一个新的单参数`createSession(int)`以使其更直观的原因。所以没有“自动确认模式下的事务处理”之类的东西。您要么有一个已*交易*的会话，要么有一个*自动确认的*会话。`Message.acknowledge()`事务会话中的调用将被忽略（由 JMS API[指定）。](https://docs.oracle.com/javaee/6/api/javax/jms/Message.html#acknowledge())

**那么有什么区别呢？**正如互联网上的多个地方声称的那样（包括此处的其他答案），这与您是否使用一个或多个目的地无关。这取决于会话是仅消费还是消费-生产。如果它是只消费的（你不产生任何消息），那么两种模式都是平等的：调用`Message.acknowledge()`或`Session.commit()`确认会话中收到的所有消息。即使从多个队列中收到。

消费-生产会话的行为：

*   **客户端确认：**`MessageProducer.send()`方法返回后立即提交发送的消息。客户端消息在`Message.acknowledge()`被调用时会立即得到确认。这在规范中没有特别提到，但我认为如果代理在 ack 一半的 msgs 后失败，客户端会报告错误，只有一部分消息会保持 acked。这为您提供了至少一次的保证：如果您在进程结束时确认并且您的程序中途失败，则输出消息将产生两次。

*   **事务性**：发送的消息被原子地提交，同时确认会话中所有接收到的消息。客户端或代理端的任何故障都不会导致仅生成或确认部分消息。这为您提供了一次性处理保证。它甚至更快：如[here](https://activemq.apache.org/should-i-use-transactions)或[here](https://docs.oracle.com/middleware/11119/wls/PERFM/jmstuning.htm#CHDIJEFE)所述，如果您在一个事务中生成多条消息，则该`MessageProducer.send()`方法将是异步的，该`commit()`方法将等待所有发送批量完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:18:12.027

我认为仅从一个目的地接收消息时没有太大区别。可以使用 CLIENT_ACKNOWLEDGE 或 Transacted 会话。

但是，当在会话中使用多个目标时，例如从队列接收消息，然后对其进行处理并将处理结果发布到同一会话中的另一个主题，事务处理会话更适合。因此接收和发布消息都将发生在一个事务中。根据消息处理的结果，可以提交或回滚事务。

# java - h:selectOneMenu 向我发送上一个值

> ID：11361875
> 
> 赞同：0
> 
> 时间：2012-07-06T12:05:57.300
> 
> 标签：java, jsf-2, primefaces

```
<h:selectOneMenu id="filtroUnidad" immediate="true" style="width:120px" value="#{class.idUni}" label="#{bundleComunes.unidad}">
  <f:selectItem itemLabel="#{bundleComunes.seleccionar}..." itemValue=""/>
  <f:selectItems value="#{class.lUnidadesValidas}" var="lUni" itemValue="#{lUni.id}" itemLabel="#{lUni.descripcion}"/>
  <f:ajax render="sisArm" event="change" listener="#{class.changeOneUnidad}"/>
</h:selectOneMenu> 
```

我有这个 selectOneMenu 但是当我打电话给听众 idUni 曾经有过以前的价值。有人知道怎么改吗？？

方法 java

```
/**
* changeOneMenuP.
*/
public void changeOneUnidad() {
  if(idUni == null) {
    lSistemasValidas = sisDao.findByValido();
  } else {
    lSistemasValidas = escDao.findByUnidadUbicacion(idUni, true);           
  }
} 
```

idUni 是一个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:35:59.760

删除 immediate="true" `<h:selectOneMenu>`：

```
<h:selectOneMenu id="filtroUnidad" style="width:120px" 
                 value="#{class.idUni}" label="#{bundleComunes.unidad}"> 
```

# forms - keyref 'ruleSet_202' 不解析为身份约束的键

> ID：11361876
> 
> 赞同：1
> 
> 时间：2012-07-06T12:05:57.690
> 
> 标签：forms, sharepoint, sharepoint-2010, infopath, infopath2010

我正在为 SharePoint 列表开发一个非常大的 InfoPath 表单。在我不得不重新启动计算机后，文件以某种方式损坏，我不知道如何打开它。这是我在尝试打开文件时从 InfoPath 收到的错误消息。

> InfoPath 无法打开以下表单 表单定义 (.xsf) 文件包含错误。
> 
> 表单定义 (.xsf) 文件包含无效的元素、属性或结构。
> 
> 错误详细信息：keyref 'ruleSet_202' 无法解析为身份约束 '{http://schemas.microsoft.com/office/infopath/2003/solutionDefinition}ruleset_name_key' 的密钥。
> 
> 第 2145 行，位置 3 --^

我将 .xsn 扩展名更改为 .cab 并提取所有内容。我查看了清单文件，发现第 2145 行实际上是文件的最后一行。我在其中找不到错误，也没有在附近找到错误。

请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:45:50.697

自己解决了。实际上这很容易。我刚刚使用有问题的规则集删除了包含 ruleSetAction 的“按钮”节点。

由于您无法将已编辑的清单文件添加回存档，因此您必须从清单文件的上下文菜单中选择“设计”选项。这将在 Infopath 中打开表单，您可以执行“另存为”，这样您就可以再次打包所有内容。

# linux - 在 Fedora 上安装 Komodo Edit？

> ID：11361881
> 
> 赞同：0
> 
> 时间：2012-07-06T12:06:09.757
> 
> 标签：linux, fedora, komodoedit

运行 install.sh 时

发生以下错误

```
install.sh: line 48: ./INSTALLDIR/lib/python/bin/python: Permission denied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:46:37.367

由于错误一直到第 48 行，所以 install.sh 的权限是可以的。

不好的是对 python 可执行文件的权限。

```
chmod +x ./INSTALLDIR/lib/python/bin/python 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:23:35.477

只要确保你已经安装了 python 就更好了并且输出应该是这样的：

```
Python 2.7.3 (default, Sep 26 2012, 21:53:58) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information. 
```

如果您安装了 python，则打开 install.sh 并搜索与此类似的行：

```
$dname/INSTALLDIR/lib/python/bin/python -E $dname/support/_install.py "$@" 
```

（我有 Komodo IDE 8.0，所以代码可能会有所不同）您所要做的就是将 Komodo IDE 安装程序“（Komodo IDE 文件夹）/INSTALLDIR/lib/python/bin/python”中指向集成 python 的路径替换为您本地安装的python是“python”，所以最后替换：

```
$dname/INSTALLDIR/lib/python/bin/python 
```

和：

```
python 
```

结果：

```
python -E $dname/support/_install.py "$@" 
```

这种技术对我有用，但是我使用的是 Linux Mint 14 Nadia，默认情况下它预装了 Python 2.7.3 版本（就像那里的许多其他 linux 发行版一样），我的 Komodo IDE 版本是 8.0

编辑：

上面的技术似乎给出了一个关于缺少一些名为“activestate”的python模块的错误，该模块是一个名为“activestate.py”的文件，位于来自Komodo IDE安装程序的合并python中，但是我使用的第二种方法工作得很好。

第一步是打开你的终端/控制台并获得root权限，然后打开你的文件管理器/资源管理器我的是“nemo”，所以我在终端/控制台（不带引号）中输入了“nemo”，打开了一个新的nemo窗口又名高权限。Root Privileges 所以我浏览到我保存从官方网站下载的存档 Komodo IDE 安装程序的位置，并使用我系统上安装的默认存档管理器打开（默认情况下，存档管理器也使用从 nemo 继承的 root 权限打开文件管理器）所以在文件管理器/资源管理器中，我浏览到“/opt/”并将该存档的内容提取到一个文件夹中，然后关闭存档管理器现在打开一个终端/控制台窗口并获得 root 权限，然后 cd 进入“install.sh”所在的文件夹 位于前。“cd /opt/komodo-ide-8.0.0-linux-x86/”现在输入终端/控制台

```
sh ./install.sh 
```

或者

```
bash ./install.sh 
```

其余的安装应该正常进行，并要求您提供安装 Komodo 的路径，在我的情况下，我键入“/opt/komodo/”，安装工作正常。

# screen - LibGdx - 屏幕之间的转换

> ID：11361883
> 
> 赞同：18
> 
> 时间：2012-07-06T12:06:23.577
> 
> 标签：screen, libgdx

我正在尝试更改 Libgdx 屏幕之间的动画。我想编写我的自定义动画（淡入、淡出等）。有人可以给我一个线索吗？我似乎无法在 Libgdx 代码中找到转换的实现。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-14T14:31:14.527

这是我所做的：

FadeIn 非常简单，只需将其添加到您的淡入淡出 Screens show() 中：

```
stage.getRoot().getColor().a = 0;
stage.getRoot().addAction(fadeIn(0.5f)); 
```

FadeOut 有点棘手。您不想立即切换屏幕，因此不要调用 game.setScreen(newScreen) 在淡出屏幕中创建一个方法，如下所示：

```
public void switchScreen(final Game game, final Screen newScreen){
    stage.getRoot().getColor().a = 1;
    SequenceAction sequenceAction = new SequenceAction();
    sequenceAction.addAction(fadeOut(0.5f));
    sequenceAction.addAction(run(new Runnable() {
        @Override
        public void run() {
            game.setScreen(newScreen);
        }
    }));
    stage.getRoot().addAction(sequenceAction);
} 
```

像这样，您在淡出期间延迟屏幕切换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T09:47:09.887

我已经使用 Scene2D 和通用补间引擎实现了一些滑动过渡。您可以在此处找到示例代码。

[http://www.netthreads.co.uk/2012/02/09/libgdx-scene2d-demo-with-scene-transitions/](http://www.netthreads.co.uk/2012/02/09/libgdx-scene2d-demo-with-scene-transitions/)

更新：这篇文章说明了我实现滑动过渡的方法。底部有一个链接，可将您带到此处的一组演示[https://github.com/alistairrutherford/libgdx-demos](https://github.com/alistairrutherford/libgdx-demos)

关于如何构建演示有明确的说明，但您至少需要对 maven 以及如何设置有基本的了解。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T12:36:05.457

我已经实现了类似的方法。感谢 Gustavo Steigert，我从他的博客中学到了很多东西，在这里您可以找到他的示例，其中包含淡入和淡出的序列。

[http://steigert.blogspot.in/2012/02/3-libgdx-tutorial-scene2d.html](http://steigert.blogspot.in/2012/02/3-libgdx-tutorial-scene2d.html)

您可以完全浏览他的博客，以更好地了解事情的流程，并在每个帖子的末尾找到帖子源代码的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-31T22:19:50.107

这是我的游戏在屏幕之间的过渡动​​画中的示例代码： 在`MainGame`课堂上：

```
@Override public void setScreen(final Screen screen) {
        if (getScreen() == null)
        {
            createScreenInAction(screen);
            return;
        }
        createScreenOutAction(getScreen(), new Runnable() {
            @Override public void run() {
                createScreenInAction(screen);
            }
        });

    }
    private void createScreenOutAction(final Screen screen , Runnable runnable) {
        Actor actor = ((BaseScreenAdapter) screen).getStage().getRoot();
        actor.setOrigin(WIDTH_HALF,HEIGHT_HALF);
        actor.getColor().a = 1;
        SequenceAction sequenceAction = new SequenceAction();
        sequenceAction.addAction(Actions.parallel(Actions.alpha(0,SCREEN_SWITCH_DURATION) , Actions.scaleTo(1.5f,1.5f , SCREEN_SWITCH_DURATION, Interpolation.exp5)));
        sequenceAction.addAction(Actions.run(runnable));
        actor.addAction(sequenceAction);
    }
    private void createScreenInAction(final Screen screen) {
        StarsGame.super.setScreen(screen);
        Actor actor = ((BaseScreenAdapter) screen).getStage().getRoot();
        actor.setOrigin(WIDTH_HALF,HEIGHT_HALF);
        actor.getColor().a = 0;
        SequenceAction sequenceAction = new SequenceAction();
        sequenceAction.addAction(Actions.scaleTo(1.5f,1.5f , 0));
        sequenceAction.addAction(Actions.parallel(Actions.alpha(1,SCREEN_SWITCH_DURATION) , Actions.scaleTo(1.0f,1.0f , SCREEN_SWITCH_DURATION , Interpolation.exp5)));
        actor.addAction(sequenceAction);

    } 
```

我所有的屏幕都扩展为`BaseScreenAdapter`：

```
public abstract class BaseScreenAdapter extends ScreenAdapter implements BaseRequest.BaseResponseError{
    protected final AssetsController mAssets;
    protected final MySettings mSettings;
    protected StarsGame mGame;
    protected Stage mStage;
    protected Viewport mViewport;
    protected OrthographicCamera mCamera;
    protected InputMultiplexer multiplexer;
    protected LoadingActor mLoadingActor;
    //==============================================================
    // METHODS
    //==============================================================
    public BaseScreenAdapter(StarsGame game) {
        this.mGame = game;
        mCamera = new OrthographicCamera(/*StarsGame.WIDTH, StarsGame.HEIGHT*/);
        mCamera.position.set(StarsGame.WIDTH_HALF, StarsGame.HEIGHT, 0);
        mViewport = new FitViewport(StarsGame.WIDTH, StarsGame.HEIGHT, mCamera);
        mCamera.position.set(mCamera.viewportWidth / 2f, mCamera.viewportHeight / 2 , 0);

        initStage();
        initInputMultiplexer();
    }

    public Stage getStage() {
        return mStage;
    }
    private void initStage() {
        mStage = new Stage(mViewport);
        mStage.addListener(new InputListener() {
            @Override public boolean keyUp(InputEvent event, int keycode) {
                if (keycode == Input.Keys.BACK)
                {
                    onBackPressed();
                }
                return super.keyUp(event, keycode);
            }
        });
    }
} 
```

# jquery - 借助 jquery 实现闪烁效果

> ID：11361884
> 
> 赞同：0
> 
> 时间：2012-07-06T12:06:25.710
> 
> 标签：jquery

我没有可视化的例子给你看，所以我会尽我所能使它易于理解。- 我可以将它与相机闪光灯进行比较。

这个问题的主要部分是获得有关实现目标所需使用的功能的答案。

对于这种效果，我有 div 是“基本 div”。在“随机秒数”（最大量可以是 6 秒）中，另一个 div 必须越过“基本 div”并保持可见 0.7 秒。

在此效果之后，它会一次又一次地重复，并在每 0.7 秒闪烁之间使用新的“随机秒数”（最大量可以是 6 秒）

我知道如何让那个“blink div”工作（显示：无；当该显示时，我只写显示：可见；和显示：无；）

但我不知道如何使那个“随机化”功能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:19:13.177

这可能会回答您的“随机化”问题：[https ://stackoverflow.com/a/3594189/353710](https://stackoverflow.com/a/3594189/353710)

```
function getInterval() {
    var min = 1;
    var max = 6;
    // and the formula is:
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function blink() {
    var newTimeout = getInterval() * 1000;

    console.log('New timeout: ' + newTimeout);

    setTimeout(blink, newTimeout);
}

blink(); 
```

我创建了一个[小提琴](http://jsfiddle.net/NickStemerdink/qtk3f/)来演示功能。

# php - Codeigniter 和 Oracle 查询结果不同步

> ID：11361885
> 
> 赞同：0
> 
> 时间：2012-07-06T12:06:26.950
> 
> 标签：php, oracle, codeigniter, xampp

我在与 Oracle (10g) 数据库交互的 PHP 项目中使用 Codeigniter。我已成功配置 Codeigniter 以从数据库连接和查询。但是，当我使用 Oracle SQL Developer 在数据库上手动运行插入/更新/删除脚本，然后使用 Codeigniter 检查更改时，它无法识别新数据。

IE。假设我们有一个`TBL_PERSON`包含`ID`和`NAME`列的表。我使用 Oracle SQL Developer 运行插入语句：

```
insert into TBL_PERSON values(1, 'Name1'); 
```

然后我`TBL_PERSON`通过 CI 获取数据：

```
$this->db->get_where('TBL_PERSON', array('ID'=>1)); 
```

它不会返回最近插入的数据。我必须重新启动 XAMPP，在数据出现之前多次刷新页面。但是如果我使用 CI 插入数据本身，比如说

```
$this->db->insert('TBL_PERSON', array('ID'=>1, 'NAME'=>'Name1'); 
```

然后再次运行获取代码，它会立即返回所需的数据。

现在，我不确定不一致之处在哪里：是在 Codeigniter 中还是在 Oracle SQL Developer 中。如果它在 Codeigniter 中，是什么导致了这种情况，应该采取什么正确的设置来防止这种情况？Codeigniter 是否为 Oracle 提供结果缓存？我已经将 CI 的数据库缓存设置为 OFF：

```
$db['default']['cache_on'] = FALSE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:33:39.953

您是否在 SQL Developer 中启用了自动提交？可能是插入语句没有立即提交的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T16:04:41.010

我曾经遇到过同样的问题。其他 IT 人员尽一切努力

```
INSERT INTO "TABLE" VALUES (1,2,'3'); COMMIT; 
```

`oci_connect`查询后执行 COMMIT 。如果您使用的是 SQL developer 之类的工具，则必须在查询后执行 COMMIT。

# php - 水星支付系统

> ID：11361888
> 
> 赞同：0
> 
> 时间：2012-07-06T12:06:33.457
> 
> 标签：php, payment-gateway, payment

我正在尝试使用水银支付系统发送 API 请求，作为回报，我得到了一个支付 ID。根据他们的文档，在获得付款 ID 后，我们必须将其作为帖子发送到他们的付款流程主机[https://hc.mercurydev.net/CheckoutPOS.aspx](https://hc.mercurydev.net/CheckoutPOS.aspx) 我被重定向到金额未正确显示的页面。有什么建议么？

以下是请求 API

```
function get_ms_payment_id($ms_merchant_id,$ms_password,$order_header_id,$amount,$tax,$success_url,$failure_url)
{
    $soap_request = '<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">';
    $soap_request .= '<SOAP-ENV:Body>';
    $soap_request .= '<InitializePayment xmlns="http://www.mercurypay.com/">';
    $soap_request .= '<request> ';
    $soap_request .= '<MerchantID>'.$ms_merchant_id.'</MerchantID> ';
    $soap_request .= '<Password>'.$ms_password.'</Password> ';
    $soap_request .= '<Invoice>'.$order_header_id.'</Invoice> ';
    $soap_request .= '<TotalAmount>50.23</TotalAmount>';
    $soap_request .= '<TaxAmount>'.$tax.'</TaxAmount>';
    $soap_request .= '<TranType>Sale</TranType> ';
    $soap_request .= '<Frequency>OneTime</Frequency>';
    $soap_request .= '<Memo>Your Memo</Memo> ';
    $soap_request .= '<PartialAuth>Off</PartialAuth> ';
    $soap_request .= '<ProcessCompleteUrl>'.$success_url.'</ProcessCompleteUrl> ';
    $soap_request .= '<ReturnUrl>'.$failure_url.'</ReturnUrl> ';
    $soap_request .= '<DisplayStyle>Custom</DisplayStyle>';
    $soap_request .= '<BackgroundColor>Gray</BackgroundColor>';
    $soap_request .= '<FontColor>Black</FontColor>';
    $soap_request .= '<FontFamily>FontFamily1</FontFamily>';
    $soap_request .= '<FontSize>Medium</FontSize>';
    $soap_request .= '<PageTitle>Demo Ecommerce Merchant</PageTitle>';
    $soap_request .= '<SecurityLogo>on</SecurityLogo>';
    $soap_request .= '<OrderTotal>on</OrderTotal>';
    $soap_request .= '<SubmitButtonText>Submit</SubmitButtonText>';
    $soap_request .= '<CancelButtonText>Cancel</CancelButtonText>';
    $soap_request .= '</request> ';
    $soap_request .= '</InitializePayment>';
    $soap_request .= '</SOAP-ENV:Body>';
    $soap_request .= '</SOAP-ENV:Envelope>';

    $header = array("POST /ws/ws.asmx HTTP/1.1", 
        "Host: w1.mercurypay.com", 
        "Content-Type: text/xml; charset=utf-8",
        "SOAPAction: \"http://www.mercurypay.com/InitializePayment\"");

    $url = "https://hc.mercurydev.net/hcws/hcservice.asmx";

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER,0);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    //curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 4);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $soap_request);

    $result = curl_exec($ch);

    include_once('xml.php');
    $x_data = XML_unserialize($result);

    $x_data = $x_data["soap:Envelope"];
    $x_data = $x_data["soap:Body"];
    $x_data = $x_data["InitializePaymentResponse"];
    $result = $x_data["InitializePaymentResult"];

    return($result);
} 
```

作为回应，我得到了一个有效的paymentId，在使用paymentId后，我将其发布到支付网关，但支付网关上没有填充适当的金额。

以下是支付网关的截图

[http://screencast.com/t/FbULkAy01X0L](http://screencast.com/t/FbULkAy01X0L)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-29T12:17:16.830

有关 MercuryPay 的最新集成，请查看 MercuryPay 的 Aktive-Merchant[实施](https://github.com/akDeveloper/Aktive-Merchant/blob/master/lib/AktiveMerchant/Billing/Gateways/Mercury.php)

一个简短的例子如下：

```
<?php
use AktiveMerchant\Billing\Base; //Use Base class
use AktiveMerchant\Billing\Mercury; //Use Mercury gateway
use AktiveMerchant\Billing\CreditCard;

Base::mode('test') // Remove this on production mode

$gateway = new Mercury(array('login'=>'<login>', 'password'=>'<password>'));

$credit_card = new CreditCard( 
    array(
        "first_name" => "John",
        "last_name" => "Doe",
        "number" => "41111111111111",
        "month" => "12",
        "year" => "2012",
        "verification_value" => "123"
    )
);

$credit_card->isValid(); // Returns true or false

# Extra options for transaction
$options = array(
    'order_id' => 'REF' . $gateway->generateUniqueId(),
    'description' => 'Test Transaction',
    'address' => array(
        'address1' => '1234 Street',
        'zip' => '98004',
        'state' => 'WA'
    )
);

$amount = 100; #100 cents 1.00 dollars

# Authorize transaction
$response = $gateway->authorize($amount, $credit_card, $options);
if ( $response->success() ) {
    echo 'Success Authorize';
} else {
    echo $response->message();
} 
```

您可以从交易中获取 PaymentId

`$response->authorization();`

# c# - vba中COM对象的ArrayList返回n项

> ID：11361889
> 
> 赞同：3
> 
> 时间：2012-07-06T12:06:33.943
> 
> 标签：c#, vba, com, arraylist

我尝试使用 C# ArrayList 返回一个 COM 对象列表（用 C# 开发）并在 VBA 中使用这个 COM 对象列表（Excel 2007，.NET 4）

我有 3 个从 Excel 调用的 C# 函数（VSTO 项目）

```
 public ArrayList GetSimpleArray()
    {
        ArrayList arr = new ArrayList();
        arr.Add(3);
        arr.Add(2);
        return arr;
    }
    public ArrayList GetComplexArray()
    {
        ArrayList arr = new ArrayList();
        arr.Add(new Fund() { Id = "2" } );
        arr.Add(new Fund() { Id = "3" });
        return arr;
    }
    public IFund GetComplexObject()
    {
        return new Fund() { Id = "2" };
    } 
```

Fund 和 I Fund 定义：

```
[ComVisible(true)]
public interface IFund 
{
    string Id { get; set; }        
    string Name { get; set; }
}

[ComVisible(false)]
public sealed class Fund:IFund
{
    public string Id { get; set; }
    public string Name { get; set; }

    public Fund()
    {
    }

    public Fund(string id, string name)
    {
        this.Id     = id;            
        this.Name   = name;
    }
} 
```

在 Excel 中，我有：

```
Public Sub GetComObject()

  Call InitVSTOAddIn ' Initialise automationObject

  Dim complexObject
  Set complexObject = automationObject.GetComplexObject()

  Dim simpleArray
  Set simpleArray = automationObject.GetSimpleArray()

  Dim complexArray
  Set complexArray = automationObject.GetComplexArray()

End Sub 
```

complexObject 和 simpleArray 具有我正在寻找的值（complexObject 是具有 Id 和 Name 的对象，simpleArray 是具有 2 个元素“3”和“2”的 ArrayList）。

问题出在 complexArray 上。它是一个包含 2 个项目的 ArrayList，但每个项目都是“无变量”（见附图）

![VBA 本地人](../Images/945252aba70fe6a103387433d6d3cd50.png)

你知道为什么吗？

有没有办法在 C# 中返回 COM 对象列表并在 VBA 中使用它们？

做这样的事情是一种好习惯，还是有更好的方法在 VBA 中使用 C# 对象？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:32:12.683

我找到了一种通过创建包含属性 IFund[] ListFund 的 IListFund 来解决此问题的方法

```
[ComVisible(true)]
public interface IListFund
{
    public IFund[] ListFund { get; set; }
} 
```

然后我可以在excel中拥有：

```
Public Sub GetComObject()

  Call InitVSTOAddIn ' Initialise automationObject '

  Dim complexObject As ComEqd.IListFund
  Dim complexArr() As ComEqd.IFund

  Set complexObject = automationObject.GetComplexObject()
  complexArr = complexArr.ListFund

End Sub 
```

# hibernate - 如果 Hibernate 表中没有 ID 列怎么办？

> ID：11361890
> 
> 赞同：0
> 
> 时间：2012-07-06T12:06:37.177
> 
> 标签：hibernate

在我的应用程序中，我在一个表中没有主键列。我将其视为代理键并尝试使用标记。但我遇到了异常。

```
**"org.hibernate.MappingException: Error reading resource:     
    com/mapping/FamilyDetails.hbm.xml"**

**Caused by: org.xml.sax.SAXParseException: 
    The content of element type "class" must match "
    (meta*,subselect?,cache?,synchronize*,comment?,
    (id|composite-id),discriminator?,natural-id?,(version|timestamp)?,
    (property|many-to-one|one-to-one|component|dynamic-
    component|properties|any|map|set|list|bag|idbag|array|
    primitive-array|query-list)*,
    ((join*,subclass*)|joined-subclass*|union-subclass*),loader?,
    sql-insert?,sql-update?,sql-delete?,filter*)".** 
```

映射文件：-FamilyDetails.hbm.xml

```
<class name="com.beans.FamillyDetails" 
       table="personal_fmly_dtls" proxy="com.aims.beans.FamillyDetails">

    <natural-id>
        <property name="systemid" />
    </natural-id>
    <property name="membername" 
              type="java.lang.String" column="membername" not-null="true" />
    <property name="relation"  
              type="java.lang.String" column="relation" not-null="true" />
    <property name="dateOfBirth"  
              type="java.util.Date" column="dateofbirth" not-null="true" />

    <many-to-one name="Personal" column="pid" class="com.aims.beans.Personal"/>

</class>

<?xml version="1.0" encoding='UTF-8'?>
<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >
<hibernate-mapping>
<class name="com.aims.beans.Personal" 
       table="personalinfo" proxy="com.aims.beans.Personal">

<id name="pid" column="pid" type="java.lang.Integer">
    <generator class="sequence">
        <param name="sequence">personal_seq</param>
    </generator>
</id>
<property name="name"  
          type="java.lang.String" column="name" not-null="true" />
<property name="deptno"  
          type="java.lang.Integer" column="DEPTNO" not-null="true" />

<component name="permentaddress" class="com.aims.beans.Address">
    <property name="homeAddress1" type="java.lang.String" column="pddress1"/>
    <property name="homeAddress2" type="java.lang.String" column="pddress2"/>
    <property name="homecity"     type="java.lang.String" column="pcity"/>
    <property name="homeState"    type="java.lang.String" column="pstate"/>
</component>
<set name="famildtlslst">
    <key column="pid" not-null="true"/>
    <one-to-many class="com.aims.beans.FamillyDetails"/>
</set>
<join table="address">     
    <key column="pid" /> 
    <component name="Address" class="com.aims.beans.Address">
        <property name="homeAddress1" 
                  type="java.lang.String" column="HomeAddress1"/>
        <property name="homeAddress2" 
                  type="java.lang.String" column="HomeAddress2"/>
        <property name="homecity" 
                  type="java.lang.String" column="homecity"/>
        <property name="homeState" 
                  type="java.lang.String" column="homestate"/>
    </component>
</join> 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:44:56.917

它可能是另一个组件。组件不需要主键：

```
<set name="famildtlslst" table="personal_fmly_dtls">
  <key column="pid" not-null="true"/>
  <composite-element parent="Personal">
    <property name="systemid" />
    <property name="membername" not-null="true" />
    <property name="relation" not-null="true" />
    <property name="dateOfBirth" not-null="true" />
  </composite-element>
</set> 
```

当然，这是另一种语义，但如果您对组件感到满意，那就更容易了。

# java - 无法在 JNI 中调用 ctor？

> ID：11361891
> 
> 赞同：0
> 
> 时间：2012-07-06T12:06:42.213
> 
> 标签：java, c++, java-native-interface

目前在我的应用程序中，我使用的是 C++（核心实现）和 java（服务和演示）。现在在我的 C++ 核心中，我遇到了一个异常，我在 JNI 代码中捕获并创建了一个可抛出的对象，并将其抛出到 java 层。以便进一步处理。

为了在 jni 上捕获异常，我使用以下代码，

```
catch (namespace::MyException& excep) {
    jclass ex = jenv->FindClass("namespace/MyException");
    jmethodID constructor;
    jthrowable object;
    jobject obj;
    if (ex)
    {
            constructor = jenv->GetMethodID(ex, "<init>", "(Ljava/lang/String;Ljava/lang/String;I;I)V");
            if(!constructor)
            {
                SWIG_JavaThrowException(jenv, SWIG_JavaRuntimeException, (char*) excep.what());
                return $null;
            }

            jstring str = jenv->NewStringUTF(excep.what());
            jstring str2 = jenv->NewStringUTF(excep.GetStackTraceAsString());
            obj = jenv->NewObject(ex, constructor, str, str2,excep.GetCat(),excep.GetCate());

            object = static_cast<jthrowable>(obj);
            jenv->DeleteLocalRef(str);
            jenv->DeleteLocalRef(str2);
            jenv->Throw(object);
    }
    return $null;
} 
```

我的 MyException 类的 C++ 签名是

```
MyException(string str1, string str2, int cat1, int cat2); 
```

但是在我的 Jni 代码中，我无法获取 MyException CTOR 的 methodId。

谁能告诉我 JNI 代码中可能出了什么问题。我怀疑 GetMethodId() 的参数列表中存在一些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:17:48.207

签名中的原语之间不应有任何分号。它应该是这样的：

```
(Ljava/lang/String;Ljava/lang/String;II)V 
```

注意`II`，不是`I;I`。

* * *

**编辑**

您始终可以`javap -s <package.name.ClassName>`在构建的类上运行。

# android - 移动设备不支持的 css 属性列表

> ID：11361892
> 
> 赞同：0
> 
> 时间：2012-07-06T12:06:43.797
> 
> 标签：android, css, ipad, mobile, browser

我在所有 PC 浏览器（IE7+ FF3.6F 等）中启动并运行了一个应用程序，现在我希望在 IOS、Android 浏览器和 Opera 中具有相同的外观和感觉，我能够添加特定于移动设备的 css 文件，但我猜是一些 css这些手持设备浏览器不支持该属性。例如：我认为很清楚：Ipad 2 不支持两者。

如果有人遇到同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:35:39.610

检查：[http](http://caniuse.com) ://caniuse.com iOS safari、Opera Mobile、Android 浏览器

# php - 如何解决字符错误推特？

> ID：11361897
> 
> 赞同：-1
> 
> 时间：2012-07-06T12:07:01.567
> 
> 标签：php, twitter, special-characters

我正在开发一个 twitter 应用程序。

我有一个问题；

我想在 twitter 上发布消息 如果我使用土耳其语或某些字符，它不会发布。

我的代码：

```
 $mesajing  = "Dear @".$username." : You have ".$ozelmsjs." messages you can read the messages ->".$url."";
 $status    = $twitterObj->post_statusesUpdate(array('status'=>$mesajing));
 $status->response; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:13:24.877

尝试：

```
$encoded = utf8_encode($mesajing);
$status    = $twitterObj->post_statusesUpdate(array('status'=>$encoded)); 
```

或尝试这样做：

```
$encoded = iconv('utf-8', 'us-ascii//TRANSLIT', $mesajing); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:09:49.977

使用正确的编码，Twitter**可能**（请阅读文档以确保）使用 UTF8。

# android - 如何知道用户点击了安卓中的电话和电子邮件发送

> ID：11361902
> 
> 赞同：0
> 
> 时间：2012-07-06T12:07:23.010
> 
> 标签：android

我有一个允许发送电子邮件和给其他用户打电话的应用程序。我想知道有多少人真正打电话给其他用户并发送了电子邮件。但是，当用户单击我的应用程序中的按钮呼叫人员时，它将转到标准的 android 呼叫页面，与电子邮件相同。当它进入另一个活动甚至另一个应用程序时，我不知道用户是否单击了“呼叫/发送”按钮或取消按钮。

我如何知道用户是否真的点击了通话按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:13:27.827

不知道这是否可能，但您是否尝试过使用 启动电子邮件和呼叫应用程序`startActivityForResult(yourIntent)`？电子邮件和呼叫应用程序可能会发回一个结果，指示取消或成功，您可以在其中捕获`onActivityResult(...)`

# iphone - Xcode iPhone特定的nslocalized字符串不起作用

> ID：11361903
> 
> 赞同：1
> 
> 时间：2012-07-06T12:07:27.370
> 
> 标签：iphone, xcode, string, variables, localized

在我的一个 xCode 项目中，我希望应用程序开始选择 0 到 X 之间的随机数，然后该数字将出现在 NSLocalizedstring 中，该字符串将在文本字段中显示随机句子。

但是当我运行应用程序时，只有密钥返回给我（introX）。

这是我的代码（在 ViewDidLoad 中）：

```
introNumber = rand() % 4; //Selects random number

textView.text = [NSString stringWithFormat:NSLocalizedString(@"intro%i", nil), introNumber]; //Put the random number right in the NSLocalizedString 
```

我所有的介绍语句都是这样写在 Localized.string 文件中的：

"介绍0" = "...";

“介绍1”=“...”；

...

“介绍”=“...”；

首先，我们可以做变量 NSLocalizedStrings 吗？

那么，错在哪里呢？;))

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:12:25.597

您做错了，首先为翻译制作密钥，然后获取本地化字符串：

```
introNumber = rand() % 4; //Selects random number
NSString *translateKey  = [NSString stringWithFormat:@"intro%i", introNumber];
textView.text = NSLocalizedString(translateKey, @""); 
```

# macos - Brew Doctor 错误配置

> ID：11361904
> 
> 赞同：8
> 
> 时间：2012-07-06T12:07:33.857
> 
> 标签：macos, config, homebrew

在 Mac OS X Lion 上使用该`brew doctor`命令时，出现以下错误：

> 错误：“config”脚本存在于您的系统或 Homebrew 目录之外。 `./configure`脚本经常查找 *-config 脚本以确定是否安装了软件包，以及在编译和链接时要使用哪些附加标志。
> 
> 如果配置脚本覆盖系统或 Homebrew 提供的同名脚本，则在路径中包含其他脚本可能会混淆通过 Homebrew 安装的软件。我们发现了以下“配置”脚本：
> 
> /Users/ivankutsarov/.rvm/gems/ruby-1.9.3-p194/bin/passenger-config

我该如何解决这个问题？

# dojox.mobile - 我可以在我的移动 Web 应用程序中使用任何 dojo、dijit 或 dojox api 吗？

> ID：11361909
> 
> 赞同：1
> 
> 时间：2012-07-06T12:07:55.137
> 
> 标签：dojox.mobile

这可能是一个新手问题。我可以在我的移动 Web 应用程序中使用任何 dojo、dijit 或 dojox api 吗？

- 是否所有 API 都在各种设备上进行了测试？我们有任何列出调查结果的参考文件吗？

- 假设一个特定的小部件在 dijit 和 dojox.mobile 中都可用。选择其中之一的指导方针是什么（在高层次上，选择显然是 dojox.mobile。但是有没有关于如何选择 API 用于我的应用程序的指导方针？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:53:13.890

> 我可以在我的移动 Web 应用程序中使用任何 dojo、dijit 或 dojox api 吗？

不，当我之前尝试过时，某些 dijit 部件不起作用。但是 dojo 核心库和一些 dijit 核心类会很好地工作，因为它在 dojox.mobile 中使用。

> - 是否所有 API 都在各种设备上进行了测试？我们有任何列出调查结果的参考文件吗？

它在发行说明中有所描述......但它太旧了。

[http://dojotoolkit.org/reference-guide/1.7/releasenotes/1.7.html](http://dojotoolkit.org/reference-guide/1.7/releasenotes/1.7.html)

[http://dojotoolkit.org/reference-guide/1.7/releasenotes/1.8.html](http://dojotoolkit.org/reference-guide/1.7/releasenotes/1.8.html)

> - 假设一个特定的小部件在 dijit 和 dojox.mobile 中都可用。选择其中之一的指导方针是什么

我认为 dijit 部件未在移动设备中进行测试。

# c++ - C++ 访问器 - 我应该返回指向成员变量的指针还是实际的成员变量本身？

> ID：11361911
> 
> 赞同：3
> 
> 时间：2012-07-06T12:08:01.637
> 
> 标签：c++, variables, pointers, member, accessor

我有一个希望是一个简单的问题。对于我的类的成员变量，所有这些都是私有的，我应该使用访问器返回指针还是返回变量本身？还是我应该做点别的？

例子：

```
unsigned int *Object::GetObjectIDPointer()
{
    return &objectID;
} 
```

或者

```
unsigned int Object::GetObjectID()
{
    return objectID;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:10:37.530

这在很大程度上取决于你想用它们做什么：如果你计划你的类的用户能够修改你的类中的变量（这是一件可怕且强烈不鼓励的事情），你可以返回指针或引用；否则，返回变量本身。

当您想要返回的对象很大时，例如向量、集合、映射等，此规则有一个例外。如果您决定为它们创建访问器，则应通过常量引用返回它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:15:08.200

我会说，采取第二种解决方案。
更一般地说，您可以返回对象本身的副本，编译器可能会使用[复制](http://en.wikipedia.org/wiki/Copy_elision)省略优化来优化任何不必要的副本。

您还可以返回对该字段的 const 引用：

```
const MyType& getMyField() const { return this->myField; } 
```

这样，就不会创建副本，也无法修改值（除了`const_cast`）。

但是对于一个int，我认为你应该返回一个副本，就像你的第二个解决方案一样：

```
unsigned int Object::GetObjectIDPointer()
{
    return objectID;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:46:49.057

如果只是想能拿到值，那就按值返回。另外，声明函数`const`。但是，如果它很大或复制成本很高，最好返回一个`const`引用，以便调用者可以选择不复制它。

如果您还希望能够修改它，那么要么返回一个引用（或者如果你愿意，可以返回一个指针），或者提供一个“set”函数。或者，只需将其公开 - 假装它没有被封装时没有多大意义。

如果您确实返回了一个引用（或指针），那么请确保您有一个`const`重载，否则您将无法从`const`对象中读取值：

```
const unsigned int *Object::GetObjectIDPointer() const
{
    return &objectID;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T12:14:09.667

这取决于你的方法

```
GetObjectIDPointer() 
```

如果它是私有方法，则使用指针，因为它会使您的成员可访问性更快。但是如果方法是公开的，你应该总是返回一个副本。就好像您返回一个指针一样，它将违反 OOPS（数据隐藏）的基本原则。

# asp.net - ASP.NET Web API 请求完成后如何处理资源？

> ID：11361912
> 
> 赞同：3
> 
> 时间：2012-07-06T12:08:02.720
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api, dispose

我试图公开一个`IQueryable<>`over ASP.NET Web API，我发现我需要保持数据源打开直到请求完成，以便 ASP.NET Web API 中内置的 OData 查询系统可以完成它的工作。

好吧，这听起来很合理。但是我在哪里处理数据源？我没有看到任何明显的地方。我应该在应用程序中管理请求状态吗？执行此操作的标准方法是什么？

控制器的`Dispose()`方法是否合适？即是否可以保证一个控制器实例只服务一个请求，或者这只是一个实现细节？

我正在使用来自 ASP.NET MVC 4 RC 的 ASP.NET Web API。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T00:33:37.483

您可以使用在 上调用的扩展[`RegisterForDispose`](http://msdn.microsoft.com/en-us/library/hh969063%28v=vs.118%29.aspx)来`HttpRequestMessage`注册您想要在请求完成时处理掉的任何资源。

顺便说一句，您可能希望查看以下链接以了解`IQueryable`下一个 Web API 版本中的支持。 [http://aspnetwebstack.codeplex.com/discussions/359229](http://aspnetwebstack.codeplex.com/discussions/359229)

`Dispose()`[编辑]以控制器的方法做事也是一种解决方案。在基于 Web API`ApiController`的控制器中，控制器始终是每个实例（每个请求一个控制器实例）

# html - 在 html 按钮的部分文本上添加颜色

> ID：11361913
> 
> 赞同：3
> 
> 时间：2012-07-06T12:08:02.720
> 
> 标签：html, css, button

我有一堆 hmtl 按钮，其中一些具有如下值：“Title*” 我希望星号为红色，而其余文本为黑色。这可能吗？

我发现此代码建议使文本着色：

```
<form>
<input type="button" value="this is a styled text button" style="color:#fff;">
</form> 
```

这样的事情是否可以修改，因此只有部分文本值会受到影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:14:52.213

您需要使用其他人建议的跨度。但是，我会完全避免使用带有`style`属性的内联 css。而是使用类。在不知道使用上下文的情况下很难推荐如何准确地应用 CSS，但以下是一个示例：

HTML：

```
<button class="starred">Title <span>*</span></button> 
```

CSS：

```
button.starred span { color: #f00; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:10:31.370

把它`*`放在一个跨度中

```
<button type="button">Title <span style="color:red;">*<span></button> 
```

更新 ：

```
 <style>button>span{style="color:red;"}</style>
    <button type="button">Title <span>*<span></button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T12:10:20.163

而不是`<input type="button"/>`你可以使用`<button>`标签，并为其标签设置样式：

```
<button>Title<span style="color:#f00">*</span></button> 
```

# c# - lock 语句使用什么类型的锁定机制

> ID：11361915
> 
> 赞同：6
> 
> 时间：2012-07-06T12:08:08.370
> 
> 标签：c#, .net, multithreading, locking

c# lock 关键字是否使用“yielding”、“spin-locking”或混合方法来处理争用？

到目前为止，我对 .net lock 语句的搜索还没有找到答案。如果我找到更多，我会发布。到目前为止，我所能找到的只是[什么时候应该使用自旋锁......](https://stackoverflow.com/questions/5869825/when-should-one-use-a-spinlock-instead-of-mutex) Mecki 给出了一个措辞优美的接受答案。

但是我正在寻找一些关于 .net/c# 的明确答案或文档（如果有人有的话）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T12:12:43.847

以下代码：

```
lock (_syncRoot)
{
    // Do stuff
} 
```

由编译器翻译为：

```
Monitor.Enter(_syncRoot)
try
{
    // Do stuff
}
finally
{
    Monitor.Exit(_syncRoot);
} 
```

这是幼稚（和旧）的实现，实际上使用 .NET 4.0 的实现或多或少是这样的（请参阅[Eric 的博客](http://blogs.msdn.com/b/ericlippert/archive/2009/03/06/locks-and-exceptions-do-not-mix.aspx)以获取完整参考）：

```
bool locked = false;
try
{
    Monitor.Enter(_syncRoot, ref locked);
}
finally
{
    if (locked)
        Monitor.Exit(_syncRoot);
} 
```

**已编辑**

也就是说，问题是*如何`Monitor.Enter()`工作？*好吧，默认的 Mono 实现使用信号量来获取锁，但 Microsoft .NET 实现的行为不同。

我正在阅读*并发 Windows 编程*（由 Joe Duffy 撰写）时，有一段确实引起了我的注意，我的第一个答案是“不，它不使用旋转，因为在一般情况下性能可能不好”。正确答案是“是的，.NET`Monitor`使用旋转”。.NET`Monitor`和 Windows 关键部分都执行短暂的旋转，然后再回到对内核对象的真正等待。这种算法被称为“两阶段锁定协议”，它是合适的，因为上下文切换和内核转换非常广泛，在多处理器机器上旋转可以避免这两者。

此外，不要忘记这些是实现细节，并且可以在任何版本中更改（或者由于 JIT 编译器，不同硬件的算法可能不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:11:37.647

```
lock (obj)
{
} 
```

只是[Monitor](http://msdn.microsoft.com/en-us/library/x090d6tf)的语法糖。[输入](http://msdn.microsoft.com/en-us/library/de0542zz.aspx)尝试...终于。

```
Monitor.Enter(obj);
try
{
}
finally
{
    Monitor.Exit(obj);
} 
```

现在[稍微好一点](http://blogs.msdn.com/b/ericlippert/archive/2009/03/06/locks-and-exceptions-do-not-mix.aspx)了（感谢 Mark 和 Adriano 让我了解最新情况）。

```
bool locked = false;  
try  
{  
    Monitor.Enter(_syncRoot, ref locked);  
}  
finally  
{  
    if (locked)  
        Monitor.Exit(_syncRoot);  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:15:23.480

这是 Microsoft 文档说 lock() 包装 Monitor.Enter/Exit

“使用 C# lock 语句，它将 Enter 和 Exit 方法包装在 try...finally 块中。”

来自[http://msdn.microsoft.com/en-us/library/de0542zz.aspx](http://msdn.microsoft.com/en-us/library/de0542zz.aspx)

如果你想要一个自旋锁类型，你可以使用 ReaderWriterLockSlim()

[http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)

# asp.net-mvc-3 - 温莎城堡 Log4Net 问题

> ID：11361920
> 
> 赞同：3
> 
> 时间：2012-07-06T12:08:45.303
> 
> 标签：asp.net-mvc-3, log4net, castle-windsor

我在 ASP.Net MVC 中集成温莎城堡 log4net 设施时遇到问题。我有两个具有相同代码的项目（我为保留参考和当前项目而编写的示例）。示例项目工作正常，但我当前的项目不工作我得到一个空引用异常。我有一个集成了城堡温莎 IOC 的 asp.net mvc 3 应用程序。通过 NuGet 添加了必要的 dll。这是我的代码片段：第 1 步：记录器安装程序

```
public void Install(Castle.Windsor.IWindsorContainer container, Castle.MicroKernel.SubSystems.Configuration.IConfigurationStore store)
{            
     container.AddFacility<LoggingFacility>(f => f.UseLog4Net());            
     //container.AddFacility<LoggingFacility>(f => f.LogUsing(LoggerImplementation.Log4net).WithConfig("log4net.config")); 
} 
```

第2步：

> log4net.config

第 3 步：在我的 AccountController（登录方法）..

```
public ILogger Logger { get; set; }
Logger.InfoFormat("User {0} has successfully signed in.", model.UserName); 
```

在过去的一周里，我尝试了所有方法并阅读了该网站上的 20-30 篇文章，但我仍然无法正常工作。如果有人可以告诉我问题是什么并指出我的分步教程，我将不胜感激。

我不确定我错过了什么。我检查了 Project->Properties->Application->.Net Framework 4.0 但仍然无法正常工作。

注意：我按照城堡温莎网站教程[http://docs.castleproject.org/Windsor.Windsor-Tutorial-Part-Five-Adding-logging-support.ashx](http://docs.castleproject.org/Windsor.Windsor-Tutorial-Part-Five-Adding-logging-support.ashx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T11:53:24.310

如果您从 Windsor 容器中实例化控制器，您的问题并不清楚。也许这是显而易见的，不值得一提，但也许你刚刚忘记了，所以最好排除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:42:37.020

我认为使用 ILogger 的类必须在您尝试使用 ILogger 之前完成实例化。

因此，如果您尝试在构造函数调用完成之前调用 ILogger，由于 Windsor 加载 log4net 的方式，您的 ILogger 将为空。

您是否在 AccountController 的构造函数中调用 LogOn() 方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T22:00:05.020

不要使用`Castle.Core.Logging.ILogger`来自 log4net 的那个。这就是 LoggingFacility 的工作方式。

# css - 更改子菜单展开方式的属性？

> ID：11361927
> 
> 赞同：0
> 
> 时间：2012-07-06T12:09:16.093
> 
> 标签：css

是否有一个 CSS 属性来改变子菜单展开的方式（即从左上角到右下角）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:13:11.210

我猜你正在寻找 CSS3 过渡。

[CSS3 过渡](http://www.w3schools.com/css3/css3_transitions.asp)

# visual-c++ - C++/CX 中结构的等式运算符

> ID：11361928
> 
> 赞同：0
> 
> 时间：2012-07-06T12:09:17.463
> 
> 标签：visual-c++, struct

我在 C++/CX 中实现了一个值结构。为了初始化结构的向量，我需要实现一个 Equality 运算符，这在 Collection.h 中存在的向量的 IndexOf() 运算符中是必需的。

但我无法创建一个。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:14:01.193

这是一个例子：

```
struct typePerson {
  string firstName;
  string lastName;

  typePerson(string firstName,string lastName) : firstName(firstName), lastName(lastName) {}  

  bool operator==(const typePerson& p2) const {
    const typePerson& p1=(*this);
    return p1.firstName == p2.firstName && p1.lastName == p2.lastName;
  }
}; 
```

样品用法：

```
int main() {
  typePerson p1("John","Doe");
  typePerson p2("Jane","Doe");
  typePerson p3("John","Doe");

  if (p1 == p2)
    cout<<"p1 equals p2"<<endl;
  else
    cout<<"p1 does not equal p2"<<endl;

  if (p1 == p3)
    cout<<"p1 equals p3"<<endl;
  else
    cout<<"p1 does not equal p3"<<endl;

  return 0;
}

---------- Capture Output ----------
p1 does not equal p2
p1 equals p3

> Terminated with exit code 0. 
```

# java - Quartz 线程执行并行还是顺序？

> ID：11361939
> 
> 赞同：4
> 
> 时间：2012-07-06T12:10:01.197
> 
> 标签：java, scheduling, quartz-scheduler

我们有一个基于石英的调度程序应用程序，它每分钟运行大约 1000 个作业，这些作业均匀分布在每分钟的几秒钟内，即每秒大约 16-17 个作业。理想情况下，这 16-17 个作业应该同时触发，但是我们的第一条语句（它只是记录执行时间）的执行方法被调用得很晚。例如，假设我们从 05:00 到 05:04 每分钟安排了 1000 个作业。因此，理想情况下，安排在 05:03:50 的作业应该在 05:03:50 记录执行方法的第一条语句，但是，它是在大约 05:06:38 执行的。我已经追踪了大约 15-20 毫秒的预定作业所花费的时间。这个计划作业足够快，因为我们只是在 ActiveMQ 队列上发送消息。我们已将石英的线程数指定为 100，甚至尝试将其增加到 200 或更多，但没有任何收获。我们注意到的另一件事是调度程序的日志在前 1 分钟后是连续的，即

```
[Quartz_Worker_28] <Some log statement>
..
..
[Quartz_Worker_29] <Some log statement>
..
..
[Quartz_Worker_30] <Some log statement>
..
.. 
```

所以它表明在一段时间后，石英运行线程几乎是连续的。这可能是由于将作业完成通知到持久性存储（在这种情况下是一个单独的 postgres 数据库）和/或上下文切换所花费的时间。

这种奇怪行为背后的原因是什么？

编辑：更详细的日志

```
[06/07/12 10:08:37:192][QuartzScheduler_Worker-34][INFO] org.quartz.plugins.history.LoggingTriggerHistoryPlugin - Trigger [<trigger_name>] fired job [<job_name>] scheduled at:  06-07-2012 10:08:33.458, next scheduled at:  06-07-2012 10:34:53.000
[06/07/12 10:08:37:192][QuartzScheduler_Worker-34][INFO] <my_package>.scheduler.quartz.ScheduledLocateJob - execute begin--------- ScheduledLocateJob with key: <job_name> started at Fri Jul 06 10:08:37 EDT 2012
[06/07/12 10:08:37:192][QuartzScheduler_Worker-34][INFO] <my_package>.scheduler.quartz.ScheduledLocateJob <some log statement>
[06/07/12 10:08:37:192][QuartzScheduler_Worker-34][INFO] <my_package>.scheduler.quartz.ScheduledLocateJob <some log statement>
[06/07/12 10:08:37:192][QuartzScheduler_Worker-34][INFO] <my_package>.scheduler.quartz.ScheduledLocateJob <some log statement>
[06/07/12 10:08:37:220][QuartzScheduler_Worker-34][INFO] <my_package>.scheduler.quartz.ScheduledLocateJob - execute end--------- ScheduledLocateJob with key: <job_name> ended at Fri Jul 06 10:08:37 EDT 2012
[06/07/12 10:08:37:220][QuartzScheduler_Worker-34][INFO] org.quartz.plugins.history.LoggingTriggerHistoryPlugin - Trigger [<trigger_name>] completed firing job [<job_name>] with resulting trigger instruction code: DO NOTHING. Next scheduled at:  06-07-2012 10:34:53.000 
```

我对上述日志的这一部分表示怀疑

```
scheduled at:  06-07-2012 10:08:33.458, next scheduled at:  06-07-2012 10:34:53.000 
```

因为这项工作计划在 10:04:53 进行，但它在 10:08:33 触发，但石英仍然不认为它是失败的。不应该是失火吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T03:46:40.043

尝试使用以下内容，它应该会改善行为

```
org.quartz.scheduler.batchTriggerAcquisitionMaxCount
org.quartz.jobStore.acquireTriggersWithinLock
org.quartz.scheduler.idleWaitTime 
```

# php - PHP preg_replace 函数替换以前的匹配项

> ID：11361943
> 
> 赞同：3
> 
> 时间：2012-07-06T12:10:18.333
> 
> 标签：php, preg-replace

我有一个相当基本的情况，我有一个字符串数组，我想在一个字符串中找到所有匹配项，并在它们周围放置强标签。这是我到目前为止所拥有的：

```
$searchWords = array("test","this","s");

for($i=0;$i<sizeof($searchWords);$i++) {
    $searchWords[$i] = "/".preg_quote($searchWords[$i])."/i";
}

$label = "This is a test string.";

$result = preg_replace($searchWords, "<strong>$0</strong>", $label);

echo($result); 
```

问题是 preg_replace 函数似乎将“s”搜索词与强标签匹配，因为它们被替换了。所以我结束了：

> <strong>Thisstrong> 是一个 <strong>teststrong>。

当我真正想要的是：

> <strong>这个</strong>我<strong>s</strong>是一个<strong>测试</strong>。

那么，你们能建议我哪里出错了吗？

任何帮助都非常感谢，我为此撕毁了我的头发，我必须接近。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:27:05.743

你不想做三个替换，而是一个：

```
$result = preg_replace("#" . implode($searchWords, "|") . "#", "<strong>$0</strong>", $label); 
```

hakre 的编辑：*这就像这个或那个或那个字符串。将进行第一场比赛。所以从最长的字符串开始，取最小的字符串作为最后一个。*

二进制对此编辑的回答：见评论

* * *

完整版本：

```
<?php
$searchWords = array("t", "test", "this");
usort($searchWords, function ($a, $b) { return strlen($b) - strlen($a); });

foreach ($searchWords as &$word)
{
    $word = preg_quote($word);
}
unset($word);

$label = "This is a test string.";

$searchWords = implode($searchWords, "|");
$result = preg_replace("#{$searchWords}#i", "<strong>$0</strong>", $label);

echo($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:22:53.330

确保不会发生这种情况的最简单方法是使用两个不会被替换的特殊“假标签”，然后替换它们，或者指定单词必须是完整的单词匹配并且在单词边界开始和结束.

```
 $result = preg_replace($searchWords, "<_^_>$0</_^_>", $label);
  $result = str_replace('_^_', 'strong', $result); 
```

或者

```
 $searchWords[$i] = '/\b'.preg_quote($searchWords[$i]).'\b/i'; 
```

第二个更优雅（而且更快 - 我敢打赌也加快了搜索速度），但阻止您使用部分单词替换。

# xslt - 如何找到依赖于其他元素的最大值和最小值？

> ID：11361950
> 
> 赞同：0
> 
> 时间：2012-07-06T12:10:40.433
> 
> 标签：xslt, xslt-1.0

我想通过 XSL 在以下 XML 中找到每个不同员工的最高工资的唯一记录：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

`<Root>`

```
<Record recordNumber="1">
    <SALARY>20000</SALARY>
    <EMPLOYEE>Emp1</EMPLOYEE>
    <AGE>32</AGE>
</Record>
<Record recordNumber="2">
    <SALARY>34000</SALARY>
    <EMPLOYEE>Emp2</EMPLOYEE>
    <AGE>34</AGE>
</Record>
<Record recordNumber="3">
    <SALARY>12000</SALARY>
    <EMPLOYEE>Emp1</EMPLOYEE>
    <AGE>32</AGE>
</Record>
<Record recordNumber="4">
    <SALARY>15000</SALARY>
    <EMPLOYEE>Emp2</EMPLOYEE>
    <AGE>34</AGE>
</Record>
<Record recordNumber="5">
    <SALARY>22000</SALARY>
    <EMPLOYEE>Emp1</EMPLOYEE>
    <AGE>32</AGE>
</Record>
<Record recordNumber="6">
    <SALARY>35000</SALARY>
    <EMPLOYEE>Emp2</EMPLOYEE>
    <AGE>34</AGE>
</Record>
</Root> 
```

提前致谢。

PS：但是我在这里粘贴了所有 XML 但预览不一样。所以，请不要介意。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:27:55.760

使用 XSLT 1.0，您可以使用[Muechian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.xml)对`Record`元素进行分组，然后您可以对每个组进行排序以找到具有最大 SALARY 的记录：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:key name="k1" match="Record" use="EMPLOYEE"/>

<xsl:template match="Root">
  <xsl:copy>
    <xsl:apply-templates select="Record[generate-id() = generate-id(key('k1', EMPLOYEE)[1])]"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Record">
  <xsl:for-each select="key('k1', EMPLOYEE)">
    <xsl:sort select="SALARY" data-type="number" order="descending"/>
    <xsl:if test="position() = 1">
      <xsl:copy-of select="."/>
    </xsl:if>
  </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:57:08.907

此 XSLT 1.0 样式表将返回每个记录，其中包含每个员工的最高工资。如果员工最多有两个或更多记录，则将返回所有最大记录。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes"/>

<xsl:key name="employee" match="Record" use="EMPLOYEE" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="Record[ key('employee',EMPLOYEE)/SALARY &gt; SALARY]" />

</xsl:stylesheet> 
```

如果您只需要每位返回的员工最多一条记录，那么请更新问题并使用 Martin 的答案。

# jquery - javascript可以计算百分比吗？

> ID：11361951
> 
> 赞同：-3
> 
> 时间：2012-07-06T12:10:40.493
> 
> 标签：jquery, percentage

我们列出了一个庞大的费用库。有些有 10% (GST) 税，有些有自定义#.##% 税。

结果应打印如下：

123.45 美元 10% 总计：135.8 美元

123.45 美元 0% 总计：123.45 美元

123.45 美元 7% 总计：132.10 美元

为了在我们的 CMS 中打印这些结果，我们使用元数据值和关键字：

```
%asset_metadata_Amount%    %asset_metadata_GST%   %asset_metadata_Custom_Tax% 
```

如果“_GST”的值为空，它将打印“_Custom_Tax”，如果它们都是空的，则不需要进行计算。

我知道 ID 有助于查询，所以：

```
<span id="row_1"><span id="abc">%asset_metadata_Amount%</span> <span id="def">%asset_metadata_GST%</span> <span id="xyz">%asset_metadata_Custom_Tax%</span> <span id="total"> # </span></span> 
```

我需要提供一些澄清，向大家道歉；可以使用关键字运行函数来执行乘法吗？IE。代码可以写成

```
total = %_Amout% * 1.%_GST% 
```

或者“%”符号会破坏脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:16:53.937

> javascript可以计算百分比吗？

任何带有数学运算符的语言都可以计算百分比。在您的情况下，使用您的示例标记：

```
var baseAmount, taxRate, tax, total;

// Get the base amount, stripping off non-floating-point-number chars,
// convert to number
baseAmount = parseFloat($("#abc").text().replace(/[^0-9\.]/, ""));

// Same with the tax rate, divide by 100
taxRate = parseFloat($("#def").text().replace(/[^0-9\.]/, "")) / 100;

// Tax is baseAmount * taxRate
tax = baseAmount * taxRate;

// Add to base to get total
total = baseAmount + tax; 
```

现在，您必须小心 IEEE-754 浮点数的限制，这允许 ( `0.1 + 0.2 = 0.30000000000000004`，例如) 中的一些不精确性，但如果您做一些`Math.round`事情，您应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T12:30:55.423

JavaScript：

```
$(function() {
    var rows = $(".row");
    rows.each(function(index, row) {
        var amount = parseFloat($(row).children(".amount").text());
        var gst = parseFloat($(row).children(".gst").text());
        var customTax = parseFloat($(row).children(".customTax ").text());
        var tax = (isNaN(gst) ? (!isNaN(customTax) ? customTax : 0) : gst);
        var totalSpan = $(row).children(".total");
        console.log("Amount: ", amount);
        console.log("Tax: ", tax);
        totalSpan.html("Total: " + (amount + amount * (isNaN(tax) ? 0 : tax) / 100).toFixed(2));
    });
});​ 
```

HTML：

```
<span id="row_1" class="row">
    <span class="amount">123.45</span>
    <span class="gst"></span> 
    <span class="customTax"></span> 
    <span class="total"><!-- # --></span>
</span>​ 
```

我也将其发布为 jsfiddle：http: [//jsfiddle.net/FHMrW/1/](http://jsfiddle.net/FHMrW/1/)

注意：我已将`id`s替换为`class`属性，以支持多行。

**编辑：根据@tj-crowder 的评论，在此处包含代码，并`toFixed`总计添加。**

# c# - 使用 WMI 读取和/或过滤 MSMQ 名称

> ID：11361954
> 
> 赞同：1
> 
> 时间：2012-07-06T12:10:46.183
> 
> 标签：c#, .net, wmi, msmq

我目前正在尝试在远程机器上读取 MSMQ 信息。

我遇到的主要困难是获取队列的名称。队列的名称很长，有的超过 64 个字符。

使用 WMI，名称总是被截断为 64 个字符，这导致我无法区分队列名称（前 64 个字符的类似前缀）。

我尝试使用 .NET 3.5 SP1 和 WMI 多查询工具，没有任何区别。

我不仅无法读取名称，还提供了对 WMI 查询产生影响的后缀，因为 WHERE 也无济于事。

任何提示如何使这项工作？

[MS 支持数据库](http://connect.microsoft.com/VisualStudio/feedback/details/91525/system-daignostics-performancecounter-fails-when-using-instance-name-64-characters)中有一个非常古老的条目，可以解释这种行为。虽然已经存在（2004 年），但据说它可能会在 VS 2005 中得到修复。要么它从未被修复，要么可能有一些不同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:47:43.883

我认为您没有机会使用 WMI 获得真正的长名称。

John Breakwell 曾在博客上写过：[MSMQ 队列名称显示多长时间……或不显示](http://blog.plumbersmate.eu/archive/2010/09/13/how-long-msmq-queue-names-are-displayed-.-or-not.aspx)

> 相反，限制在于队列名称在 Active Directory 中的存储方式。[...] 但是，对于公共队列，只有前 64 个字符适合用于将名称存储在 Active Directory 中的字段，而名称的其余部分将存储在另一个字段 (mSMQQueueNameExt) 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:20:04.890

我建议你尝试[`MessageQueue.GetPublicQueuesByMachine`](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.getpublicqueuesbymachine.aspx)和[`MessageQueue.GetPrivateQueuesByMachine`](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.getprivatequeuesbymachine.aspx)。

这应该可以让您了解两种类型的队列（当然，没有系统队列，但这些都是众所周知的）。

# decompiling - jad“版本不匹配：major.minor = 49.0，预期 = 45.3”，.class 文件的版本是什么？

> ID：11361955
> 
> 赞同：0
> 
> 时间：2012-07-06T12:10:46.917
> 
> 标签：decompiling, jad

我使用 jad 反编译了类，但是在 AIX 系统中，抛出了这样的错误。

```
Version mismatch: major.minor = 49.0, expected = 45.3 
```

我不知道 .class 文件的版本是什么，我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:15:35.740

该类是为JDK5编译的，您的工具仅支持JDK1.1。

您可能需要在该机器上安装较新版本的 jad（或整个 JDK）（或为较旧版本的 Java 编译代码）。

[正在使用的类文件格式的主要版本号](http://en.wikipedia.org/wiki/Java_class_file)：

```
J2SE 7 = 51 (0x33 hex),
J2SE 6.0 = 50 (0x32 hex),
J2SE 5.0 = 49 (0x31 hex),
JDK 1.4 = 48 (0x30 hex),
JDK 1.3 = 47 (0x2F hex),
JDK 1.2 = 46 (0x2E hex),
JDK 1.1 = 45 (0x2D hex). 
```

# google-sheets - 限制谷歌电子表格/表单列表提要的结果集大小

> ID：11361956
> 
> 赞同：3
> 
> 时间：2012-07-06T12:10:54.967
> 
> 标签：google-sheets, google-spreadsheet-api

我想使用基于列表的查询界面来搜索电子表格/表单，但想确保我返回的行数限制在指定的最大值。有没有办法做到这一点？

谢谢。

汤姆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T01:40:29.837

有一个查询参数`max-results`可以限制列表提要返回的行数。

```
https://spreadsheets.google.com/feeds/list/key/worksheetId/private/full?max-results=10 
```

但并非所有客户端库都支持它。

# c# - String.Split 与特定标签

> ID：11361964
> 
> 赞同：2
> 
> 时间：2012-07-06T12:11:28.980
> 
> 标签：c#, string, split

我想拆分一串html标签。例如我有一个字符串：

```
<p></p>

<table>

<table><p></p></table>

</table> 
```

我要检索的是：

```
<table>

<table><p></p></table>

</table> 
```

现在的问题是当我打电话时：

```
string[] values = pContent.Split(new string[] {"<table>","</table>" }, StringSplitOptions.RemoveEmptyEntries); 
```

我越来越 ：

```
<table>

    <table><p></p> 
```

我怎么得到剩下的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:44:10.363

您可以尝试以下代码：

```
 string input = String.Concat("<root>", @"<p></p><table><table><p></p></table></table>", "</root>");

        XDocument doc = XDocument.Parse(input);
        var valuesStr = doc.Root.Element("table").ToString();
        string[] values = Regex.Matches(valuesStr, @"<.+?>")
            .Cast<Match>()
            .Select(o => o.Groups[0].Value)
            .ToArray(); 
```

它首先创建一个 XDocument 类的实例（用于解析 XML 的类之一），它添加名为“root”的根元素只是为了能够创建 XDocument（每个 XML 文档都必须有一个根）。XML 文档的内容是从字符串中解析出来的。然后它获取包含文档的文本表示的字符串 - 首先访问 Root 属性，因为“table”元素就在根节点下方，之后调用带有“table”的 Element() 方法获取第一个元素根下的名称为“table”（在此示例中，节点下只有一个这样的元素），然后 ToString() 获取文本描述。

Regex.Matches 用于从字符串中提取每个元素，它返回 MatchCollection，然后通过 Cast() 将其转换为 IEnumerable，然后在 IEnumerable 上调用 Select() 扩展方法，获取 Regex.Matches 捕获的文本值IEnumerable 中的每个 Match，然后这些值通过 ToArray() 方法作为 string[] 返回。

# wpf - 是否可以拦截在 wpf 浏览器控件中接收到的内容？

> ID：11361967
> 
> 赞同：0
> 
> 时间：2012-07-06T12:11:54.410
> 
> 标签：wpf, browser

我有一个带有 WebBrowser 控件的 WPF 应用程序。

我想拦截和跟踪浏览器控件发出的http请求。

我不想修改内容。我只想在加载的 url 匹配特定模式时执行一些规则。特别是，我有一些 ajax 调用返回填充 Web 控件的数据。

我想捕获这些数据以在容器应用程序中也起作用。可能吗？如何？

conrtol 有一个 LoadCompleted 事件，但它仅针对 Source 属性中指定的 uri 而不是 subressourceS 触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:57:24.733

正如在[副本](https://stackoverflow.com/questions/7151535/wpf-webbrowsers-loadcompleted-event)中回答的那样，这是解决方案：

我已经能够解决这样的问题。

您将需要一些第 3 方组件：

1.  [FiddlerCore](http://www.telerik.com/fiddler/fiddlercore)：将充当 http 代理，嵌入到您的应用程序中
2.  [Awesomium.net](http://awesomium.com/)：一个 WebBrowser 控件，与 chromium 引擎一起工作。我选择这个引擎，因为它允许为应用程序指定代理服务器。

正如您所猜测的那样，这个想法是创建一个内存代理服务器，并将您的 Web 浏览器控件重定向到该代理。

然后，FiddlerCore 发布一些事件，您可以在其中分析请求/响应，尤其是正文。

由于它充当代理，**所有**通信，包括 Ajax 调用、Flash 调用等，都由代理路由。

如果有帮助，一个小代码可以帮助我对这种行为进行原型设计：

应用程序.cs：

```
/// <summary>
/// Interaction logic for App.xaml
/// </summary>
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        BootStrap();
        base.OnStartup(e);
    }

    private void BootStrap()
    {
        SetupInternalProxy();
        SetupBrowser();
    }

    private static void SetupBrowser()
    {
        // We may be a new window in the same process.
        if (!WebCore.IsRunning)
        {
            // Setup WebCore with plugins enabled.
            WebCoreConfig config = new WebCoreConfig
            {
                ProxyServer = "http://127.0.0.1:" + FiddlerApplication.oProxy.ListenPort.ToString(),
                EnablePlugins = true,
                SaveCacheAndCookies = true
            };
            WebCore.Initialize(config);
        }
        else
        {
            throw new InvalidOperationException("WebCore should be already running");
        }
    }

    private void SetupInternalProxy()
    {
        FiddlerApplication.AfterSessionComplete += FiddlerApplication_AfterSessionComplete;
        FiddlerApplication.Log.OnLogString += (o, s) => Debug.WriteLine(s);

        FiddlerCoreStartupFlags oFCSF = FiddlerCoreStartupFlags.Default;
        //this line is important as it will avoid changing the proxy for the whole system.
        oFCSF = (oFCSF & ~FiddlerCoreStartupFlags.RegisterAsSystemProxy);

        FiddlerApplication.Startup(
            0,
            oFCSF
            );
    }

    private void FiddlerApplication_AfterSessionComplete(Session oSession)
    {
        Debug.WriteLine(oSession.GetResponseBodyAsString());
    }
} 
```

MainWindow.xaml ：

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1" 
        xmlns:Custom="http://schemas.awesomium.com/winfx" 
        x:Class="WpfApplication1.MainWindow"
        Title="MainWindow" Height="350" Width="525" Loaded="MainWindow_Loaded">
    <Grid>

        <Custom:WebControl Name="browser"/>

    </Grid>
</Window> 
```

最后， MainWindow.xaml.cs ：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        browser.LoadURL("http://google.fr");
    }
} 
```

您必须为此应用程序添加一些管道，以便路由和分析从应用程序到业务类的请求，但这超出了此问题的范围。

# jetty - 在 Restlet 中使用 Jetty 延续来实现长轮询

> ID：11361970
> 
> 赞同：0
> 
> 时间：2012-07-06T12:12:05.417
> 
> 标签：jetty, comet, restlet, long-polling

我有这个 Restlet 结构：

我实例化一个服务器对象：

```
server = new Server(new Context(), config.getServerProtocol(), config
                            .getServerPort()); 
```

在我实例化一个扩展应用程序的新 MyApp 类之后：

```
app = new org.myproject.restlet.server.MyApp(
    config, server.getContext());
app.start(); 
```

并启动服务器：

```
server.setNext(app);
server.start(); 
```

我没有任何组件，MyApp 分发到路由器并处理请求。如果此时有人有意见，将不胜感激。我正在使用 Restlet 2.0.14 JSE，并且我链接了码头 jar 以像我的 http 服务器一样使用它。我的服务器工作正常，我有一个 ajax 调用的 javascript 客户端，带有一个经典的轮询。但是我需要在服务器中实现长轮询（由于某些原因，我丢弃了流和推送模式）。我正在阅读如何实现这一点，第一种方式（丑陋的方式）可能是： - 在服务器中休眠线程并在服务器可能有东西时恢复。这种方式被丢弃，因为它不可扩展（[这里有一篇关于它的帖子](https://stackoverflow.com/questions/9051723/can-long-polling-be-achieved-in-restlet-by-just-making-the-thread-sleep)）。- 第二种方法可能是使用版本 7 的 Jetty continuations api。在此[链接中](http://wiki.eclipse.org/Jetty/Feature/Continuations)我可以看到如何使用 jetty comet api 来暂停请求，但我不知道如何应用于我的 restlet 实现，如[另一个链接](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/continuation/Continuation.html)中所述，我可以看到：

```
Continuation continuation = ContinuationSupport.getContinuation(request);
continuation.suspend(); 
```

但是 getContinuation 方法接收一个 ServletRequest 对象。但我的请求不是 ServletRequest。有人知道如何在 restlet 中转换或使用 ServletRequest 吗？可能我没有服务器编程的所有概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:05:41.720

我不能将 Jetty 延续与 Restlet 实例化的码头一起使用。为了实现长轮询，我忘记了 Restlet 并使用 java concurrency: `wait()`&实现`notify()`，一切运行正常。

# python - 发布事件pygame

> ID：11361973
> 
> 赞同：2
> 
> 时间：2012-07-06T12:12:14.020
> 
> 标签：python, pygame

有人可以帮我看看`pygame.event.post()`函数是如何工作的吗？我的代码如下所示：

```
class Game(object):
    def __init__(self):
        # importing pygame and creating display     
    def main(self):
        class fire_events(object):
            def __iter__(self):
                return self
            def next(self):
                return pygame.event.wait()
        # Main loop
            for event in fire_events():
                print "a"
                # DO SOME STUFF
    def post_my_event(self)
        #pygame.event.post doesnt work - it complains pygame.error: video system not initialized 
```

所以基本上我只想创建我的应用程序，让它在主循环中运行，然后从外部代码发布一个事件并让 pygame 对其做出反应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:43:27.160

您不能只是神奇地将应用程序外部的一个放入 pygames 事件队列`Event`中*。*

如果你想做这样的事情，你必须使用某种 IPC 或网络。

例如，一种简单的方法是使用 UDP。

此类将响应 UDP 消息并将事件放入`pygame`的事件队列中：

```
import socket
import pygame

pygame.init()

class UdpToPygame():

    def __init__(self):
        UDP_IP="127.0.0.1"
        UDP_PORT=15006
        self.sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        self.sock.setblocking(0)
        self.sock.bind((UDP_IP,UDP_PORT))

    def update(self):
        try:
            data, addr = self.sock.recvfrom(1024)
            ev = pygame.event.Event(pygame.USEREVENT, {'data': data, 'addr': addr})
            pygame.event.post(ev)
        except socket.error:
            pass 
```

在您的`pygame`应用程序中，您将创建该类的实例并`update`在主循环中调用该方法。

响应自定义事件的示例应用程序`UdpToPygame`将放入队列中：

```
def main():
    dispatcher = UdpToPygame()
    screen = pygame.display.set_mode((800, 600))
    l = 0
    r = True
    while r:
        for ev in pygame.event.get():
            if ev.type == pygame.QUIT:
                r = False
            if ev.type == pygame.USEREVENT:
                t = pygame.font.SysFont('', 40).render(ev.data, True, (255,255,255))
                screen.blit(t, (0, l*20))
                l += 1
        dispatcher.update()        
        pygame.display.flip()

if __name__ == "__main__":
    main() 
```

运行它并启动一个 python 解释器将文本直接发送到你正在运行的 pygame 应用程序：

```
>>> import socket
>>> sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
>>> while True:
...     sock.sendto(raw_input(), ("127.0.0.1", 15006))
...
hallo
5
pygame....
10 
```

**编辑：**

至于你的错误`pygame.error: video system not initialized`：

确保您使用`pygame.init()`.

# asp.net - GridView 用按钮单击编辑？

> ID：11361974
> 
> 赞同：0
> 
> 时间：2012-07-06T12:12:14.333
> 
> 标签：asp.net, vb.net, button, gridview

我有一个 gridview，我希望能够通过单击按钮将其置于编辑模式，而不是使用`gridview`. 这可能吗？有人可以给我一些代码或示例链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:45:18.537

`EditIndex`将该gridview的更改为`row_index`您需要设置为编辑模式的行

就像如果您希望在按钮单击设置时编辑第三行

```
GridView1.EditIndex = 2; 
```

如果最后一行要编辑

```
GridView1.EditIndex = GridView1.Rows.Count - 1; 
```

这些是一些可能对您有所帮助的链接

[Asp.net在gridview中插入、编辑、更新、删除数据](http://www.aspdotnet-suresh.com/2011/02/how-to-inserteditupdate-and-delete-data.html)

[使用数据源操作 GridView](http://www.aspdotnet-suresh.com/2011/02/how-to-inserteditupdate-and-delete-data.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:33:53.067

您只需要将[`GridView.EditIndex`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.editindex.aspx)属性（从零开始）设置为您希望处于编辑模式的行：

```
GridView1.EditIndex = GridView1.Rows.Count - 1 
```

这会将 GridView 的最后一行设置为编辑模式。

通常这是在加载页面时完成的，但如果在按钮的服务器端`Click`事件处理程序中完成，它也应该可以工作。

# javascript - Javascript：如何清除文本框并恢复它们的值？

> ID：11361977
> 
> 赞同：1
> 
> 时间：2012-07-06T12:12:22.927
> 
> 标签：javascript

`textboxes`我的表格上有十几个。单击按钮时，我需要清除其中一些（不是全部），如果满足某些条件，我需要恢复`textboxes`. 我怎样才能用更少的血做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:19:06.233

这将根据条件操纵您的所有输入，但您必须自己调用此方法

```
 $("form").children("input").each(function(){
    if(condition)
    {$(this).val(this.defaultValue);
    }
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:15:27.557

`.defaultValue`您可以像这样使用一个属性：

```
txt.onblur = function() {
    alert('restoring default value!');
    this.value = this.defaultValue;
}
​ 
```

[jsFiddle 示例](http://jsfiddle.net/AX574/)

# c++ - DirectX11 网格加载 - 由于纹理而出错（使用 SDKmesh.h）？访问冲突读取位置 0x00000000

> ID：11361978
> 
> 赞同：0
> 
> 时间：2012-07-06T12:12:24.490
> 
> 标签：c++, directx, access-violation, directx-11, sdkmesh

我试图从我的 DirectX 11 应用程序中的文件加载网格。作为基础，我采用了我自己的代码（现在渲染了一些基元），我想添加来自 DirectX 11 SDK 示例的“基本 HLSL”项目的网格创建/渲染代码（它使用例如 SDKmesh.h 和 DXUT.h从样品。

网格代码为：

```
class FeyModel : public Graphic::Model, public FeyGraphicElement{
protected:
    CDXUTSDKMesh mesh;
public:
    FeyModel(ID3D11Device * device, std::string filename, const Common::Point3D center){    
        mesh.Create( device,  L"tiny\\tiny.sdkmesh", false ); //for now tiny.sdkmesh
    }

    void render(FeyShader * shader, 
        FeyCamera * camera,
        ID3D11DeviceContext* context,
        float t
        ){

            UINT Strides[1];
            UINT Offsets[1];
            ID3D11Buffer* pVB[1];
            pVB[0] = mesh.GetVB11( 0, 0 );
            Strides[0] = ( UINT )mesh.GetVertexStride( 0, 0 );
            Offsets[0] = 0;
            context->IASetVertexBuffers( 0, 1, pVB, Strides, Offsets );
            context->IASetIndexBuffer( mesh.GetIB11( 0 ), mesh.GetIBFormat11( 0 ), 0 );

            SDKMESH_SUBSET* pSubset = NULL;
            D3D11_PRIMITIVE_TOPOLOGY PrimType;

            //!  context->PSSetSamplers( 0, 1, &samLinear );

            for( UINT subset = 0; subset < mesh.GetNumSubsets( 0 ); ++subset )
            {
                // Get the subset
                pSubset = mesh.GetSubset( 0, subset );

                PrimType = CDXUTSDKMesh::GetPrimitiveType11( ( SDKMESH_PRIMITIVE_TYPE )pSubset->PrimitiveType );
                context->IASetPrimitiveTopology( PrimType );

                // TODO: D3D11 - material loading

                ID3D11ShaderResourceView* pDiffuseRV = mesh.GetMaterial( pSubset->MaterialID )->pDiffuseRV11;

                context->PSSetShaderResources( 0, 1, &pDiffuseRV );

                context->DrawIndexed( ( UINT )pSubset->IndexCount, 0, ( UINT )pSubset->VertexStart );
            }
        }
}; 
```

我还注意到，在示例中，有一个不同的顶点布局，所以我将着色器的类代码更改为（代码将在着色器的类构造函数中执行一次，在网格创建之前）：

```
...
const D3D11_INPUT_ELEMENT_DESC layout[] =
{
    { "POSITION",  0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0,  D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "NORMAL",    0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "TEXCOORD",  0, DXGI_FORMAT_R32G32_FLOAT,    0, 24, D3D11_INPUT_PER_VERTEX_DATA, 0 },
};

UINT numElements = ARRAYSIZE( layout );

// Create the input layout
hr = device->CreateInputLayout( layout, numElements, pVSBlob->GetBufferPointer(), pVSBlob->GetBufferSize(), &*vertexLayout );
pVSBlob->Release();

// Set the input layout
context->IASetInputLayout( *vertexLayout );
... 
```

编译工作。但是在执行代码的过程中我得到了错误：

```
Access violation reading location 0x00000000 
```

在 SDKmish.h 附近：

```
if (bSRGB) {
    // This is a workaround so that we can load linearly, but sample in SRGB.  Right now, we can't load
    // as linear since D3DX will try to do conversion on load.  Loading as TYPELESS doesn't work either, and
    // loading as typed _UNORM doesn't allow us to create an SRGB view.

    // on d3d11 featuer levels this is just a copy, but on 10L9 we must use a cpu side copy with 2 staging resources.
    ID3D11Texture2D* unormStaging = NULL;
    ID3D11Texture2D* srgbStaging = NULL;

    D3D11_TEXTURE2D_DESC CopyDesc;
    pRes->GetDesc( &CopyDesc );

    pLoadInfo->BindFlags = 0;
    pLoadInfo->CpuAccessFlags = D3D11_CPU_ACCESS_WRITE | D3D11_CPU_ACCESS_READ;
    pLoadInfo->Depth = 0;
    pLoadInfo->Filter = D3DX11_FILTER_LINEAR;
    pLoadInfo->FirstMipLevel = 0;
    pLoadInfo->Format = CopyDesc.Format;
    pLoadInfo->Height = CopyDesc.Height;
    pLoadInfo->MipFilter = D3DX11_FILTER_LINEAR;
    pLoadInfo->MiscFlags = CopyDesc.MiscFlags;
    pLoadInfo->Usage = D3D11_USAGE_STAGING;
    pLoadInfo->Width = CopyDesc.Width;

    CopyDesc.BindFlags = 0;
    CopyDesc.Usage = D3D11_USAGE_STAGING;
    CopyDesc.CPUAccessFlags = D3D11_CPU_ACCESS_WRITE | D3D11_CPU_ACCESS_READ;
    CopyDesc.Format = MAKE_SRGB(CopyDesc.Format);

    hr = D3DX11CreateTextureFromFile( pDevice, pSrcFile, pLoadInfo, pPump, ( ID3D11Resource** )&unormStaging, NULL );
    DXUT_SetDebugName( unormStaging, "CDXUTResourceCache" );

    hr = pDevice->CreateTexture2D(&CopyDesc, NULL, &srgbStaging);
    DXUT_SetDebugName( srgbStaging, "CDXUTResourceCache" );
    pContext->CopyResource( srgbStaging, unormStaging );
    ID3D11Texture2D* srgbGPU;

    pRes->GetDesc( &CopyDesc );
    CopyDesc.Format = MAKE_SRGB(CopyDesc.Format);
    hr = pDevice->CreateTexture2D(&CopyDesc, NULL, &srgbGPU);
    pContext->CopyResource( srgbGPU, srgbStaging );

    SAFE_RELEASE(pRes);
    SAFE_RELEASE(srgbStaging);
    SAFE_RELEASE(unormStaging);
    pRes = srgbGPU;
} 
```

准确地说：

```
pContext->CopyResource( srgbStaging, unormStaging ); 
```

当我评论该函数的几行代码和代码中的某些内容时（我现在不记得那是哪一行了），我在窗口中看到了网格，但没有纹理。所以我猜这是有纹理的东西？我在正确的文件夹中有微小的模型和纹理，我还像上面发布的那样设置了顶点布局。

**我还应该做什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:18:23.793

我注意到你传递了一个线程泵，这意味着纹理将***异步***加载，但是你执行你的动作就好像它是同步加载的（`D3DX11CreateTextureFromFile`如果有泵则不会阻塞）。

```
D3DX11CreateTextureFromFile(...,pPump,...); 
```

因此，您可能正在尝试对空指针执行操作，因为尚未加载纹理（因此句柄为 NULL），请参阅[`D3DX11CreateTextureFromFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476286%28v=vs.85%29.aspx).

# wordpress - jQuery UI Sortable 似乎在小部件的管理中不起作用

> ID：11361982
> 
> 赞同：0
> 
> 时间：2012-07-06T12:12:34.247
> 
> 标签：wordpress, widget, jquery-ui-sortable

我正在创建我的第一个 wordpress 小部件，并且在使用可在管理小部件页面中排序的 jquery ui 时遇到问题。

根据我的研究，WordPress 已经包含 jquery（和 jquery ui 库），但为了使用它，我必须使用 wp_enqueue_script。

我做到了。

但只有一些 jquery 代码有效。jquery ui 可排序不起作用。

这是我的 abc_categories_widget.js

```
jQuery(document).ready(function() {
    // The following doesn't seem to be working
    jQuery("#abc_product_categories_sortable").sortable({
        cursor: 'move'
    });

    // The below statements work as expected
    jQuery('#abc_product_categories_sortable').disableSelection();
    jQuery('#abc_product_categories_sortable li').disableSelection();
}); 
```

这是我的小部件的相关代码

```
 function form($instance) {
        wp_enqueue_script('abc_categories_widget_js', plugin_dir_url(__FILE__) . 'abc_categories_widget.js', array('jquery','jquery-ui-sortable'), '1.0', true);
        wp_enqueue_style('abc_categories_widget_css', plugin_dir_url(__FILE__) . 'css/jquery-ui-1.8.21.custom.css');

        $abc_categories = $instance['abc_product_categories'];

        global $wpdb;
        $product_categories = $wpdb->get_results('SELECT * FROM ' . $wpdb->prefix . 'abc_categories', ARRAY_A);
?>
        <ul id="abc_product_categories_sortable" class="ui-sortable">
        <?php foreach($product_categories as $a_category) { ?>
            <li id="<?php echo 'cid_' . $a_category['category_id']; ?>" class="ui-state-default" style="padding:5px 10px"><?php echo $a_category['category_name']; ?></li>
        <?php } ?>
        </ul>
<?php
    }
} 
```

任何人都知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:31:53.063

我设法通过包装解决了我的`<ul>`问题`<div>`

即在php代码中

```
<div id="abc_product_categories_sortable">
        <ul id="abc_product_categories_sortable_list" class="ui-sortable">
        <?php foreach($product_categories as $a_category) { ?>
            <li id="<?php echo 'cid_' . $a_category['category_id']; ?>" class="ui-state-default" style="padding:5px 10px"><?php echo $a_category['category_name']; ?></li>
        <?php } ?>
        </ul>
<div> 
```

在我的 javascript 代码中

```
jQuery(document).ready(function() {
    jQuery("#abc_product_categories_sortable ul").sortable({
        cursor: 'move'
    });

    jQuery('#abc_product_categories_sortable ul').disableSelection();
    jQuery('#abc_product_categories_sortable li').disableSelection();
}); 
```

# c - 编写单个生产者/单个消费者队列的最有效方式

> ID：11361983
> 
> 赞同：1
> 
> 时间：2012-07-06T12:12:39.557
> 
> 标签：c, linux, gcc, x86-64

编写生产者/消费者队列的最有效方法是什么，其中一个线程是生产者，另一个是消费者。在一篇论文中，作者说将一个元素插入他的队列需要一个原子操作，但他没有解释如何。

他的队列也是一个循环队列，如果队列为空，则消费者等待，而如果队列已满，则生产者等待。他怎么可能实现这样的队列。他所说的原子操作是指某种互斥体还是只是一个原子变量。注意他说，一个原子操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:29:24.397

如果您没有实现无锁队列的经验，唯一的答案可能是：最有效（和安全）的方法是使用锁，由 pthread（互斥锁或 cond var）提供。

无锁算法通常（但不一定）会给你一点额外的性能，但如果你不知道自己在做什么，它们可能会出错。

另一方面，Linux 下的 phtreads 实现尽可能避免锁定，并`futex`在需要时使用（同样，`futex`这是一种快速但您应该知道自己在做什么的地方）。
这样的队列每秒通过十万个任务没有问题。这可能看起来很有限，但实际上*如果您需要每秒通过 1000 万个任务，那么您做错了*。理想情况下，您可能每秒在队列上传递几十到一百个左右的任务（任务更少，但工作组更大）。例如，您想创建 50 个任务，每个任务处理半兆字节的数据，而不是 2500 万个任务处理一个字节的数据。

如果您仍然坚持尝试无锁实现（可能出于学术兴趣），您将需要一个原子比较交换操作（在 C 的 GCC 文档中查找“遗留 __sync 函数”，对于 C++，您将使用新的原子操作）。
请务必阅读诸如 ABA 之类的细微细节，为此您通常需要某种指针操作（将引用计数存储在最低 3 位中）或具有显式引用计数的双字交换。

或者，如果您做出一些假设，则可以仅使用原子添加或根本不使用任何原子操作来实现无锁队列（如果您只是出于好奇而感兴趣，请参阅“快进队列”）。然而，这些只有在假设成立的情况下才有效，而且它们更容易出错，所以最好远离它们。

# python - 输出熊猫数据框中所有列的数据

> ID：11361985
> 
> 赞同：124
> 
> 时间：2012-07-06T12:12:49.907
> 
> 标签：python, pandas

我有一个名为 .csv 的 csv 文件`params.csv`。我打开`ipython qtconsole`并使用以下方法创建了一个熊猫`dataframe`：

```
import pandas
paramdata = pandas.read_csv('params.csv', names=paramnames) 
```

其中，`paramnames`是字符串对象的 python 列表。示例`paramnames`（实际列表长度为 22）：

```
paramnames = ["id",
"fc",
"mc",
"markup",
"asplevel",
"aspreview",
"reviewpd"] 
```

在 ipython 提示符下，如果我键入`paramdata`并按 Enter 键，那么我不会得到带有列和值的数据框，如[Pandas 网站](http://pandas.sourceforge.net/indexing.html#additional-column-access)上的示例所示。相反，我得到了有关数据框的信息。我得到：

```
In[35]: paramdata
Out[35]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 59 entries, 0 to 58
Data columns:
id                    59  non-null values
fc                    59  non-null values
mc                    59  non-null values
markup                59  non-null values
asplevel              59  non-null values
aspreview             59  non-null values
reviewpd              59  non-null values 
```

如果我输入`paramdata['mc']`，那么我确实得到了`mc`列的预期值。我有两个问题：

(1) 在 pandas 网站上的示例中（例如，参见此处的输出：http `df`: [//pandas.sourceforge.net/indexing.html#additional-column-access](http://pandas.sourceforge.net/indexing.html#additional-column-access)）输入数据框的名称给出了实际的数据。为什么我得到如上所示的数据框信息而不是实际数据？我需要在某处设置一些输出选项吗？

(2) 如何将数据框中的所有列输出到屏幕而无需输入它们的名称，即无需输入类似`paramdata[['id','fc','mc']]`.

我正在使用熊猫 0.8 版。

谢谢你。

* * *

## 回答 #1

> 赞同：306
> 
> 时间：2012-11-05T18:13:42.867

采用：

```
pandas.set_option('display.max_columns', 7) 
```

这将强制 Pandas 显示您拥有的 7 列。或更一般地说：

```
pandas.set_option('display.max_columns', None) 
```

这将强制它显示任意数量的列。

说明： 的默认值`max_columns`是`0`，它告诉 Pandas 仅当所有列都可以压缩到控制台的宽度时才显示表格。

或者，您可以使用以下命令将控制台宽度（以字符为单位）从默认值 80 更改为：

```
pandas.set_option('display.width', 200) 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-07-06T12:18:26.667

屏幕上要显示的数据太多，因此改为显示摘要。

如果您仍然想输出数据（它可能不适合屏幕并且看起来不太好）：

```
print paramdata.values 
```

将数据帧转换为其 numpy-array 矩阵表示。

```
paramdata.columns 
```

存储各自的列名和

```
paramdata.index 
```

存储相应的索引（行名）。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-05-28T10:32:51.073

我知道这是一个老问题，但我刚刚遇到了类似的问题，我认为我所做的也对你有用。

我使用了 to_csv() 方法并写入标准输出：

```
import sys

paramdata.to_csv(sys.stdout) 
```

这应该转储整个数据帧，无论它是否可以很好地打印，并且您可以使用 to_csv 参数来配置列分隔符、是否打印索引等。

编辑：现在可以`None`用作`.to_csv()`具有类似效果的目标，这可以说要好得多：

```
paramdata.to_csv(None) 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-11-14T09:18:43.600

在`ipython`中，我使用它来打印运行良好的数据帧的一部分（打印前 100 行）：

```
print paramdata.head(100).to_string() 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-06T16:50:17.943

您还可以使用`DataFrame.head(x)`/`.tail(x)`显示 DataFrame 的第一/最后 x 行。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-12-20T17:42:40.643

我从 R 来到 python，R 的`head()`函数以非常方便的方式包装行来查看数据：

```
> head(cbind(mtcars, mtcars, mtcars))
                   mpg cyl disp  hp drat    wt  qsec vs am gear carb  mpg cyl
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4 21.0   6
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4 21.0   6
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1 22.8   4
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1 21.4   6
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2 18.7   8
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1 18.1   6
                  disp  hp drat    wt  qsec vs am gear carb  mpg cyl disp  hp
Mazda RX4          160 110 3.90 2.620 16.46  0  1    4    4 21.0   6  160 110
Mazda RX4 Wag      160 110 3.90 2.875 17.02  0  1    4    4 21.0   6  160 110
Datsun 710         108  93 3.85 2.320 18.61  1  1    4    1 22.8   4  108  93
Hornet 4 Drive     258 110 3.08 3.215 19.44  1  0    3    1 21.4   6  258 110
Hornet Sportabout  360 175 3.15 3.440 17.02  0  0    3    2 18.7   8  360 175
Valiant            225 105 2.76 3.460 20.22  1  0    3    1 18.1   6  225 105
                  drat    wt  qsec vs am gear carb
Mazda RX4         3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     3.90 2.875 17.02  0  1    4    4
Datsun 710        3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 3.15 3.440 17.02  0  0    3    2
Valiant           2.76 3.460 20.22  1  0    3    1 
```

我开发了以下小python函数来模仿这个功能：

```
def rhead(x, nrow = 6, ncol = 4):
    pd.set_option('display.expand_frame_repr', False)
    seq = np.arange(0, len(x.columns), ncol)
    for i in seq:
        print(x.loc[range(0, nrow), x.columns[range(i, min(i+ncol, len(x.columns)))]])
    pd.set_option('display.expand_frame_repr', True) 
```

（显然，这取决于 pandas 和 numpy）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T19:49:50.050

您可以使用序列切片语法，即

```
paramdata[:5] # first five records
paramdata[-5:] # last five records
paramdata[:] # all records 
```

有时数据框可能不适合屏幕缓冲区，在这种情况下，您最好打印一个小子集或将其导出到其他东西，绘图或（再次为 csv）

# javascript - 具有固定顶行和左列的 Excel 样式 HTML 表格的更好实现？（jsFiddle 示例）

> ID：11361994
> 
> 赞同：0
> 
> 时间：2012-07-06T12:13:22.110
> 
> 标签：javascript, jquery, css, html-table

我有一个非常简单的问题：有没有比我创建的这个[精简的 jsFiddle 示例](http://jsfiddle.net/aHKU5/55/)更有效的方法来实现具有固定行和列的大表，*或者*有没有更好的方法来编写支持它的几行 jQuery？

在有人因为我发布与其他人相似的问题而跳楼之前，让我解释一下自己。我意识到有多个插件可以实现与我上面的示例类似的效果。但是，它们（我能找到的）都没有提供我需要的灵活性和功能。

以下是我的实现必须支持的一些注意事项：

*   必须能够隐藏和取消隐藏整行
*   必须支持动态高度的单元格
*   应该（理想情况下）使用浏览器的滚动条来导航表格
*   必须*快速*才能支持大表
*   **表必须能够用knockoutjs动态生成**

我在实现中看到的主要问题是它在 Chrome 和 IE 中滞后。我在示例中提供的表格很难注意到，但左列和顶行需要一点时间才能“赶上”表格的其余部分。当表很大并且在后台运行其他 javascript 时，这个问题变得更加明显。

**那么，鉴于我的警告，有没有更好的方法来实现这一点？**

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T16:19:44.127

您可以通过更改以下内容来提高性能：

```
var offset = $(this).next().offset();
        $(this).offset(offset);
        $(this).css('left', '0');
        $(this).height($(this).next().height()); 
```

对此：

```
 var $this = $(this)
        var offset = $this.next().offset();
        $this.offset(offset);
        $this.css('left', '0');
        $this.height($this.next().height()); 
```

使用变量比一遍又一遍地连续包装同一个对象要快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:15:57.213

这个 jQuery 插件非常适合您的要求：[http ://www.jtable.org/Demo](http://www.jtable.org/Demo)`