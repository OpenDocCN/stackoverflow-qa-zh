# StackOverflow 问答 11781000-11781999

# delphi - 在 UniDAC(Firemonkey) for SQLite 中支持 UTF-8

> ID：11781007
> 
> 赞同：0
> 
> 时间：2012-08-02T15:36:45.590
> 
> 标签：delphi, sqlite, osx-leopard, firemonkey, unidac

有下一个案例：

我的应用程序使用 UniDAC for FireMonkey 从 MacOS X Mail 收集数据，但收到的数据不支持 UTF-8。

如何通过与 MyDAC 组件类比为 UniDAC(SQLLite) 设置“强制 Unicode”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:18:18.483

需要集 `Connection.SpecificOptions.Values['Unicode'] := True`

# jquery - 文本区域自动增长插件。怎么提高？

> ID：11781009
> 
> 赞同：0
> 
> 时间：2012-08-02T15:36:53.257
> 
> 标签：jquery

我在网上找到了这段代码，并根据我的需要对其进行了修改。它是一个基于字符输入扩展和收缩的文本区域，一旦用户按下 Enter，它就会插入注释。

我想知道是否有任何方法可以改进它，使它更优雅等等。如果这是使用最新版本的 JQuery 编写的，将添加或删除什么？

谢谢你。

**代码**

```
jQuery.fn.autoGrow = function(){

    return this.each(function(){
        // Variables
        var colsDefault = this.cols;
        var rowsDefault = this.rows;

        //Functions

        var grow = function() {
            growByRef(this);
        }

        var onFocus = function(obj) {

      if ($(this).val() != 'Write a comment...') {
        return;
      } else {
        $(this).parents(".comment_new_container").children("img").show();
        //$(this).height(34);
        $(this).width(742);
        $(this).val(''); 
      }

        }

        var onBlur = function(obj) {

      if ($(this).val().length == 0) { 
        $(this).parents(".comment_new_container").children("img").hide();
        //$(this).height(16);
        $(this).width(792);
        $(this).val('Write a comment...');
      } 

        }

        var growByRef = function(obj) {

        var new_comment = '';

      if (!obj.shiftKey && obj.keyCode == 13) {

        obj.preventDefault();

        new_comment += '<div class="comment_container" id="001">';
        new_comment += '<a href="#"><i class="comment_delete">&nbsp;</i></a>';
        new_comment += '<img src="img/avatar45.png" />';
        new_comment += '<a href="/">Mickey Mouse</a>';
        new_comment += '<br/>';
        new_comment += '<div class="comment_content">' + $(this).val().replace(/\n/g, '<br />'); + '</div> <!-- End comment_content -->';
        new_comment += '<div class="comment_timestamp">13 minutes ago</div> <!-- End comment_timestamp -->';
        new_comment += '</div> <!-- End comment_container -->';

        $(new_comment).insertBefore($(this).parents(".comment_new_container"));

            var comment_total = parseInt($(this).parents('.entry_container').find('.meta.comment_total').text(), 10) + 1;
          $(this).parents('.entry_container').find('.meta.comment_total').text(comment_total);

        $(this).val('Write a comment...');
        $(this).blur();
        growByRef(this);

      } else {

        var linesCount = 0;
        var lines = obj.value.split('\n');

        for (var i=lines.length-1; i>=0; --i)
        {
          linesCount += Math.floor((lines[i].length / colsDefault) + 1);
        }

        if (linesCount >= rowsDefault) {
          obj.rows = linesCount + 1;
        } else {
          obj.rows = rowsDefault;           
        }

            }

    }

        var characterWidth = function (obj){
            var characterWidth = 0;
            var temp1 = 0;
            var temp2 = 0;
            var tempCols = obj.cols;

            obj.cols = 1;
            temp1 = obj.offsetWidth;
            obj.cols = 2;
            temp2 = obj.offsetWidth;
            characterWidth = temp2 - temp1;
            obj.cols = tempCols;

            return characterWidth;
        }

        // Manipulations

        $(this).css("width","auto");
        $(this).css("height","auto");
        $(this).css("overflow","hidden");

        this.style.width = ((characterWidth(this) * this.cols) + 6) + "px";

        $(this).bind("focus", onFocus);
        $(this).bind("blur", onBlur);
        $(this).bind("keypress", growByRef);
        $(this).bind("keyup", grow);

    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:43:38.420

您应该阅读[Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)，因为它们涵盖了那里的基本内容。例如，您使用`$`而不是，`jQuery`但变量的名称可能已更改。你可以通过使用这个闭包来解决这个问题：

```
(function( $ ) {
  $.fn.myPlugin = function() {

    // Do your awesome plugin stuff here

  };
})( jQuery ); 
```

# c# - 比较 datagridview 到 fileinfo 的值

> ID：11781011
> 
> 赞同：0
> 
> 时间：2012-08-02T15:36:58.360
> 
> 标签：c#, datagridview, compare

在我的程序中，我有一个 datagridview，填充了 2 列。第一列包含类似于 filename.ext 的值，第二列包含此文件的大小。

现在，我需要比较列中列出的文件是否存在于所选文件夹中（由打开文件夹对话框选择）

我认为必须使用

```
DirectoryInfo di = new DirectoryInfo(fldChk.SelectedPath);
                FileInfo[] rgFiles = di.GetFiles("*.*");

                foreach (FileInfo file in rgFiles)
                  { //do there 
```

我认为使用 2 个数组列表，然后添加第一个文件名，在第二个文件大小中。但只是假设，对于有很多文件的文件夹，过程非常缓慢。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:40:58.980

您可以使用基于此代码的 DataTable

```
var file = ...;
FileInfo f = new FileInfo(file);
FileSystemInfo f1 = new FileInfo(file);
dr = dt.NewRow();
//Get File name of each file name
dr["File_Name"] = f1.Name;
//Get File Size of each file in KB format
dr["File_Size"] = (f.Length / 1024).ToString();
DataTable dt = new DataTable();
dt.Rows.Add(dr);

DataGridView.DataSource = dt;
DataGridView.DataBind(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:45:41.483

您无需创建 FileInfo 对象来检测特定路径中的文件是否存在。只需使用[System.IO.File.Exists 方法](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)。如果第一列中的路径是相对路径，则必须在调用 Exists 方法之前将绝对路径添加到列中的路径。

```
var path = column.Text; // or wherever you get the path from
path = Path.Combine(@"C:\absolute\path\", path);
if (File.Exists(path))
{
   // Do something
} 
```

# php - 按年和月归档

> ID：11781012
> 
> 赞同：0
> 
> 时间：2012-08-02T15:37:01.823
> 
> 标签：php, mysql, datetime, group-by, archive

我正在尝试建立一个年\月档案。

它拒绝输出我想要的东西，所以我希望你们中的一个人能把我推向正确的方向。

我想按年份排序，并显示每年的月份（如果存在）并像这样输出：

```
2012
 - June
 - August 
2011
 - July 
```

我的代码是这样的：

```
$query = "SELECT * FROM article WHERE full_name ='$safe_name' group by year, month";
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_assoc($result)) {
$year = $row['year'];
$month = $row['month'];
echo "<ul class='year'><li><a>{$year}</a>";
echo "<ul class='months'><li><a>{$month}</a></li></ul>
</li></ul>";
} 
```

但它输出：

```
2012
 - june

2012
 - august

2011
 - july 
```

当我只按年份分组时，它将输出：

```
2012
 - june
2011
 - july 
```

我有一个“date_posted”行，它是日期时间（yyyy-mm-dd 00:00:00）。最重要的是，我每月有 1 行，每年有 1 行（我知道这很愚蠢，但我无法通过仅使用“date_posted”行来弄清楚如何做到这一点。

我已经阅读了有关此主题的一些帖子，但它对我没有用。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:43:27.297

您需要使用一个简单的“状态”机器来检测一年何时发生变化：

```
$previous_year = null;
$frist = true;
echo "<ul>"
while($row = mysql_fetch_assoc($result)) {
   if ($row['year'] != $previous_year) {
     // got a new year
     if (!$frist) {
        echo "</ul></li>"; // only close a previous list if there IS a previous list
        $frist = false;
     }
     echo "<li class="year">$row[year]\n<ul>";
     $previous_year = $row['year'];
   }
   echo "<li class="month">$row['month']</li>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:44:00.307

```
$temp_year = 0;
while($row = mysql_fetch_assoc($result)) {
    $year = $row['year'];
    $month = $row['month'];
    if( $temp_year != $year )
    {
        if( $temp_year > 0 )
            echo "</li></ul>";
        $temp_year = $year;
        echo "<ul class='year'><li><a>{$year}</a>";
    }
    echo "<ul class='months'><li><a>{$month}</a></li></ul>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:45:31.803

这应该有效。获取结果时，有时可以很方便地对其进行重组，以便在迭代视图时轻松使用。

```
$query = "SELECT * FROM article WHERE full_name ='$safe_name' group by year, month";
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_assoc($result)) {

   // Get data
   $year = $row['year'];
   $month = $row['month']

   // Structure it
   $archive[$year][] = $month;

}

// Display data
foreach($archive as $year => $months)
{
   // Show year
   echo "<ul class='year'><li><a>{$year}</a>";

   // Month container
   echo "<ul class='months'>"

   // Get months
   foreach($months as $month)
   {
     echo("<li><a>{$month}</a></li>"; 
   }

   // Close Month/Year containers
   echo("</ul></li></ul>");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T15:45:35.643

试一把

```
$storage_array = array();
while($row = mysql_fetch_assoc($result)) {
   $year = $row['year'];
   $month = $row['month'];
   $storage_array[$year][] = $month;
}
foreach ($storage_array as $year => $month_array){
   echo "<ul class='year'><li><a>{$year}</a>";
   foreach ($month_array as $month){
      echo "<ul class='months'><li><a>{$month}</a></li></ul>";
   }
   echo "</li></ul>";
} 
```

# html - HTML页脚不动

> ID：11781015
> 
> 赞同：-2
> 
> 时间：2012-08-02T15:37:11.143
> 
> 标签：html, css, footer

我知道每个人的页脚都有问题，而且我已经遍历了很多，但在实践中没有成功。

我的页脚高度是 121px，主要内容的 padding-bottom 是 121px。

元素是绝对定位的，从而使它们脱离了文档的自然流动。这可能是问题所在吗？

CSS 现在太大而无法粘贴到某个地方（除非您有 5 分钟的免费时间，在这种情况下，我已经为 js fiddle 剥离了它的内容和信息）

谢谢。

澄清：本质上它是一个“粘性页脚”，所以如果内容没有填满页面，页脚会粘在底部，然后它会随着内容向下滚动。但是，内容位于其下方并停留在页面上的最初位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:46:29.440

我不知道你到底想知道什么.. 但是如果你只是想知道你的页脚在页面底部的位置，即使页面有滚动条，你只需要给你的 css id 底部包装固定位置

```
 #bottomwrap {
      position: fixed;
    } 
```

# css - 如何使我的自定义 webkit 滚动条透明？

> ID：11781016
> 
> 赞同：0
> 
> 时间：2012-08-02T15:37:12.400
> 
> 标签：css, webkit, scrollbar

我设计了一个透明 png 格式的自定义 webkit 滚动条，但它在我的网站上不透明。

有什么办法可以使左边缘透明吗？

这是我的代码：

```
::-webkit-scrollbar {
    width: 15px;
}

::-webkit-scrollbar-track {
    background: transparent url(images/backgrounds/scrollbar.png) repeat-y;
}

::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
} 
```

网站网址是：[http ://captainjackspiratepartys.co.uk/](http://captainjackspiratepartys.co.uk/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T09:40:27.960

Body 元素不可能有透明的滚动条轨道，但我注意到 Div 元素是可能的。您可以做的是创建一个包装器 Div 并将您的内容放在那里，而不是将内容直接放入正文部分。

样本：

```
::-webkit-scrollbar-track {
    /*no code needed here*/
}
div#wrapper{
    overflow:auto;
    width:100%;
    height:100%;
    position:absolute;
    top:0px;
    left:0px;
}
body{
    overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:44:15.590

我正在使用 Chrome，而您的栏对我不起作用，我不得不使用：

```
::-webkit-scrollbar-track-piece:start{
     background: transparent url(images/backgrounds/scrollbar.png) repeat-y !important;
}

::-webkit-scrollbar-track-piece:end{
    background: transparent url(images/backgrounds/scrollbar.png) repeat-y !important;
} 
```

另外，我不相信您实际上可以仅使用 css 使栏透明。试着让你的图像只有一个黑暗的背景，而不是透明的。它会比白色不那么明显

# objective-c - 正确使用 NSCondition

> ID：11781018
> 
> 赞同：2
> 
> 时间：2012-08-02T15:37:25.013
> 
> 标签：objective-c, cocoa, synchronization

我正在查看[NSCondition 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)示例并且有点困惑：

* * *

> 每当您使用条件对象时，第一步就是锁定条件。锁定条件可确保您的谓词和任务代码免受使用相同条件的其他线程的干扰。完成任务后，您可以根据代码的需要设置其他谓词或发出其他条件。在保持条件对象的锁定时，您应该始终设置谓词和信号条件。

清单 4-3 使用 Cocoa 条件

```
[cocoaCondition lock];
while (timeToDoWork <= 0)
    [cocoaCondition wait];

timeToDoWork--;

// Do real work here.

[cocoaCondition unlock]; 
```

清单 4-4 发出 Cocoa 条件的信号

```
[cocoaCondition lock];
timeToDoWork++;
[cocoaCondition signal];
[cocoaCondition unlock]; 
```

* * *

假设使用 Cocoa 条件的线程在`[cocoaCondition wait]`. 由于`[cocoaCondition unlock]`还没有被调用，它也拥有`cocoaCondition`锁的所有权。

我的问题是——这种情况是如何得到信号的？一旦另一个线程尝试获取`cocoaCondition`锁，它不会阻塞吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:10:22.927

这是条件工作原理的一部分：`wait`在条件变量上执行操作会在等待操作期间自动释放底层锁，并在条件变量发出信号后重新获取它。同样，在`signal`发出变量信号的线程释放变量的底层锁之前，不会发生传递。

# php - mysql调用停止所有形式的输出php

> ID：11781021
> 
> 赞同：0
> 
> 时间：2012-08-02T15:37:37.330
> 
> 标签：php, mysql

你好，我是 php 的新手，所以不要抨击我，但我就是不知道这段代码有什么问题。所以基本上我有几种形式的输出，但是一旦我用 mysql 做任何事情（甚至只是连接和断开连接！），它就不允许我做任何类型的输出。它也不允许我重定向。

我尝试在 mysql 连接和断开代码之间取出所有代码，但它无助于解决任何问题，但是，一旦我注释掉 mysql 连接代码，我所有的输出和重定向都会工作！我正在尝试构建一个简单的登录脚本，该脚本可以从其他地方的表单中获取电子邮件和密码。我很想解决这个问题，这样我就可以弄清楚其余部分是否有效。而且我知道“标题”之后将不起作用`echo`；只要我能确保它正常工作，回声和文件写入就不会出现。任何帮助，将不胜感激！谢谢！

```
<?php
/*
    Login.php searches for the email address given by loginPage.php in the data base.
    If the email is found and the password given by loginPage.php matches that stored 
    in the data base, a session will begin and the client will be redirected to the 
    main page.
    *** INCOMPLETE ***  
*/
echo "HELLO!";
$email = $_POST["email"];
$password = $_POST["password"];

$errorLog = fopen("login.txt", "w");    
    fwrite($errorLog, "***Sesion started***");
$mysql_id = mysql_connect("localhost", "root", "12131");
if (!$mysql_id)
    {
        die('Could not connect: ' . mysql_error());
    }
mysql_select_db('informationStation', $mysql_id);

$results = mysql_query("SELECT password FROM Personals WHERE email = '" . $email . "';", $mysql_id);

if($results != null && $password == mysql_fetch_array($result)) 
    {
         $redirect  = 'Location: http://127.0.1.1/main.php';
    }
else 
    {
         $redirect  = 'Location: http://127.0.1.1/loginPage.php';
    {   
mysql_close($mysql_id); 
fwrite($errorLog, "result: " . $results);
fwrite($errorLog, "redirect: " . $redirect); 
fclose($errorLog);
header($redirect);  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:48:06.727

试试这个让你开始..

```
$results = mysql_query("SELECT password FROM Personals WHERE email = '" . $email . "'", $mysql_id) or die(mysql_error()); 
```

但是您还需要阅读有关 sql 注入的信息。

并且您不应该将密码存储在数据库中而不对其进行加盐和散列处理。

而且您还需要使用数组语法来访问结果中的数据......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:58:02.710

```
$mysql = mysql_connect("localhost", "root", "12131") or die('Could not connect: ' . mysql_error());
mysql_select_db('informationStation', $mysql);

function loged($email, $password) {
    $result = mysql_query("SELECT id FROM Personals WHERE email = '" . $email . "' AND password='" . $password . "'");
    if(mysql_num_rows($result) != 1)
        return false;
    return true;
}

if(loged(mysql_real_escape_string($email), md5($password))) {
    header('Location: http://127.0.1.1/mainPage.php');
    exit;
}   

header('Location: http://127.0.1.1/loginPage.php'); 
```

在此示例中，您需要使用 md5 加密方法存储用户密码（搜索其他更安全的加密方法）。

我们还针对 sql 注入对电子邮件地址进行了转义。

我创建了一个函数，每次你想查看用户是否登录时都可以调用它。

请注意，这不是一个完整的登录脚本。您还需要创建一个登录功能，您必须在其中为每个用户启动一个新会话。

# jquery - JTSage DatePicker - 格式化选项

> ID：11781023
> 
> 赞同：0
> 
> 时间：2012-08-02T15:37:39.467
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-mobile

[优秀的JTSage DatePicker for JQuery Mobile](http://dev.jtsage.com/jQM-DateBox/)将在 overrideDateFormat 选项中接受的任何日期标签列表是否存在？（例如，我想展示 2012 年 1 月 1 日星期三 - 但不确定 %Y %m 标签） - 感谢您的任何指点。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:23:16.530

在日历论坛中找到了答案：http: [//dev.jtsage.com/jQM-DateBox/demos/api/dateformat.html](http://dev.jtsage.com/jQM-DateBox/demos/api/dateformat.html)

标记

# android - 显示光标位置不是值

> ID：11781026
> 
> 赞同：0
> 
> 时间：2012-08-02T15:37:54.943
> 
> 标签：android, list, cursor

我有以下代码：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
  mSelectedContact = (NameOfList)parent.getItemAtPosition(position);
  if(mSelectedContact != null){
    String dn = mSelectedContact.getDisplayName();

    // Talking about this line here:
    String num = (mSelectedContact.getPhoneNumbers().toString()); 

    Log.i(TAG, dn + num);
    setContentView(R.layout.main1);
    LinearLayout mainLayout = (LinearLayout)findViewById(R.id.main_layout_id);
    LinearLayout Details = (LinearLayout)getLayoutInflater().inflate(R.layout.layout_item, null);
    TextView DisplayName = (TextView)Details.findViewById(R.id.contactsListView);                                       
    DisplayName.setText((dn) + (num));

    mainLayout.addView(Details);
  }
}
}; 
```

我希望标记的行显示电话号码的值，但它显示光标位置，如：

```
John Doe[android@40598908, android@40598800] 
```

我将如何获得数字的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:20:57.407

也许你只需要写 String num = (mSelectedContact.getPhoneNumbers()); 没有 toString() ，因为在 Java 中 toString() 方法返回对象的字符串表示，如 android@40598908。

# nservicebus - 在 Wcf 集成中，为什么限制只返回枚举？

> ID：11781029
> 
> 赞同：1
> 
> 时间：2012-08-02T15:38:03.290
> 
> 标签：nservicebus

在 Wcf 集成中，为什么限制只返回枚举？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:58:38.637

我的解释是集成允许您仅在总线上放置消息。如果将其扩展到枚举之外，则很容易返回更复杂的数据。这会让您进入请求/响应模式，而不是单向的异步消息模式。如果您需要请求/响应，那么在标准 WCF 主机中使用标准 WCF 可能是最佳选择。

# jquery - 在 jquery 中通过 $.post 传输 html 内容

> ID：11781040
> 
> 赞同：0
> 
> 时间：2012-08-02T15:38:28.577
> 
> 标签：jquery, special-characters, .post

如何传输html内容？例如：

```
<script>
$(function(){
    $('#actBtn').click(function(){
        var txt = $('#quick_links').html();
        $.post('/services.php','actBtn=save&content=' + txt + '&v=' + Math.random(),function(data){ });
    });
}) 
```

而在div#quick_links中，有一些链接： [http](http://domain.com?parem=1&time=123345#rw2) ://domain.com?parem=1&time=123345#rw2 如你所见，html内容中包含一些特殊符号（",#,&)，如何处理他们，特别是“&”？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:45:54.900

你需要对你的 postdata 进行 URLencode 或者让 jQuery 来做：

```
$(function() {
    $('#actBtn').click(function() {
        var txt = $('#quick_links').html();
        $.post('/services.php', {
            actBtn: "save",
            content: txt,
            v: Math.random()
        }, function(data) {});
    });
}) 
```

# c# - 文件存储/搜索

> ID：11781042
> 
> 赞同：2
> 
> 时间：2012-08-02T15:38:37.907
> 
> 标签：c#, pdf, full-text-indexing

我希望你能指出我正确技术的方向。我是一个小型软件开发团队的一员，他们在 c# 开发和 SQL 数据库方面拥有良好的技能。

我们的任务是编写一个文档存储应用程序。此应用程序将收到 PDF 格式的扫描文档。我们需要存储文档并为操作员提供搜索存储文档的能力。此搜索需要包括在 PDF 中搜索文本的能力。

例如，如果我们有一个包含大量关于动物的 PDF 的数据库，我们需要操作员通过关键字“horse”进行搜索，并获得所有提到“horse”一词的文档的列表。

我一直在阅读有关 NoSQL 数据库和库（例如 Lucene.Net）的信息。但是我现在已经投入了很多时间，仍然不清楚我应该使用哪些技术。有没有人有类似的经验或知道我应该前进的方向？

# github - GitHub：不仅在主存储库中搜索，而且在所有分支中搜索？

> ID：11781044
> 
> 赞同：3
> 
> 时间：2012-08-02T15:38:47.117
> 
> 标签：github

如何不仅在主存储库中搜索，而且在所有分叉中搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:59:44.307

我刚刚测试了一个[这样](https://github.com/search?q=repo%3a%2a/jquery%20jquery&repo=&langOverride=&start_value=1&type=Everything&language=)的查询：

```
repo:*/jquery jquery 
```

希望搜索任何名为 jquery 的 repo（应该包括 jquery/jquery 的任何分支），但是：

```
 Invalid search query. Try quoting it. 
```

`repo:`所以过滤器不支持通配符。

# php - 学说 2，自定义条形 xss 过滤器？

> ID：11781046
> 
> 赞同：0
> 
> 时间：2012-08-02T15:38:53.037
> 
> 标签：php, doctrine-orm

所以我一直在尝试实现一个通用的解决方案，在进入视图之前剥离 XSS 注入。

这很好用（对于数组、简单对象和字符串）

```
$this->view->assign('data', '<script>alert("test")</script>');
$this->view->assign('data', array(0 => '..xss attack ...')); 
```

但是教义具有延迟加载，这意味着在视图中您不会过滤延迟加载器获取的 Doctrine 记录。这样：

```
$this->view->assign('result', $this->model->getAllUsers()); 
```

在视图中：

```
// Here comes the problem.
foreach($result as $user){
    foreach($user->getComments() as $comment){

    }
} 
```

**问题**

在为 object 赋值时，有什么方法可以水合或应用使用 htmlentites() 函数的自定义过滤器？

**到目前为止的解决方案**

*   在分配给视图之前先水合到数组，但当我想要自定义方法时不是一个好主意。
*   无论如何，在每个“回声”输出（ echo $this->stripXSS($obj->getName() ）上使用转义函数，这并不安全，您可能会忘记这一点，这对于通用解决方案来说并不是一个好主意。

这是我为剥离 XSS 注入创建的函数。（它应用于 assign() ）

```
/**
     * Recursive method.
     *
     * Can remove XSS attacks from both strings and arrays.
     * Uses htmlentities, ENT_QUOTES , UTF-8
     * 
     * @param mixed $var A variable to strip for XSS attacks.
     */
    public function stripXSS($var){
        // Well this was easy, lets escape that shall we ?
        if (is_string($var))return htmlentities($var, ENT_QUOTES, 'UTF-8');

        // This is a array, here we can need recursive...
        if (is_array($var)){
            foreach($var as $k => $v){
                // $v can be array too, and any type for that case ... so .. make it call itself.
                $var[$k] = $this->stripXSS($v);
            }
            // Return the array.
            return $var;
        // Exceptions assigned is not clonable, skip it.
        }else if (is_object($var) && !($var instanceof \Exception) && !($var instanceof \Closure)){
            // Use reflection to set properties.

            if (!method_exists($var, '__clone')){
                // Clone it, we don't want anything to change except in the VIEW...
                $var = clone $var;

                // Get its properties..
                $ref = new \ReflectionObject($var);
                $props = $ref->getProperties();
                foreach($props as $prop){
                    $prop->setAccessible(true);
                    $val = $prop->getValue($var);
                    if (is_string($val) || is_array($val) || is_object($val)){
                        $prop->setValue($var, $this->stripXSS($val));
                    }
                }
            }

        }

        // Well, this is either a int, float and so fourth - meaning it does not need to be escaped. Return.
        return $var;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T18:47:53.457

您可以在更改后刷新实体对象之前过滤学说实体的每个属性（或字符串属性），您可以使用 Doctrine 的 preFlush 挂钩，您只需编写 10 行代码，它将适用于所有实体。关注这篇文章-[防止 XSS (ZendFramework & Doctrine 2)](http://viveksoni.net/prevent-xss-zend-framework-2-and-doctrine-2-stack/)

# sql-server-2008 - 在 SQL Server 2008 中强制使用默认架构

> ID：11781049
> 
> 赞同：1
> 
> 时间：2012-08-02T15:39:02.663
> 
> 标签：sql-server-2008, schema, administration

我们要求用户不要在他们自己的模式中创建对象（例如 bill.Table 而不是使用 dbo.Table）。最终，我们希望强制这样做，而不是“好好问”。我用谷歌搜索并没有发现任何明显的东西。有人可以指出我正确的方向吗？

谢谢

黏土

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:42:07.347

将用户添加到数据库时，该`CREATE USER`命令有一个可选参数，即[WITH DEFAULT_SCHEMA](http://technet.microsoft.com/en-us/library/ms173463.aspx)

为用户设置默认架构的选项也可以在数据库的安全/用户树下的 ManagementStudio 中使用。

我不确定您是否可以专门允许用户访问以在数据库中创建诸如表之类的对象，同时阻止他们`CREATE SCHEMA`访问- dba.stackexchange 的人可能知道。

# leaflet - Leaflet 应用程序中的 Google Map 插件层上未显示 WMS 层

> ID：11781053
> 
> 赞同：0
> 
> 时间：2012-08-02T15:39:28.547
> 
> 标签：leaflet

我有一个包含 3 层的简单 Leaflet 应用程序：OSM 层、Google 卫星层（来自 Pavel Shramov 插件）和我自己的 WMS 层。

我的 WMS 图层在 OSM 底图上显示得很好，但是当使用图层控件将底图切换到 Google 图层时，Google 卫星图层显示得很好，但我的 WMS 没有显示在上面。在 Firebug 中探索告诉我，我的 WMS 图像在那里，但在 Google 层上没有正确显示......这使用旧版本的 Leaflet js/css 运行良好，但我想使用新版本 0.4.2......

知道如何修补这个问题吗？

非常感谢

艾蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:21:02.437

最后，添加这一行：

$("#" + this._container.id).css("z-index", "auto");

在 Google.js 插件的 _initContainer() 函数中解决了这个问题......

检查此对话以获取更多详细信息： [https ://github.com/shramov/leaflet-plugins/issues/29](https://github.com/shramov/leaflet-plugins/issues/29)

问候

艾蒂安

# ios - PhoneGap / Cordova s crollTo 忽略

> ID：11781054
> 
> 赞同：2
> 
> 时间：2012-08-02T15:39:30.120
> 
> 标签：ios, cordova, ios-simulator

我在 iOS 上使用 Cordova 1.9.0 并将外部站点加载到 UIWebView 容器中。但是，如果您向下滚动页面并单击链接，则所有内容都应该运行在相同的滚动位置而不是页面顶部。

我一直无法强制它加载顶部的页面，所以现在我正在尝试使用：

```
window.scrollTo( 0, 0 ); 
```

然而，当在模拟器和手机上运行时，这似乎完全被忽略了，而在桌面上的 Safari 中运行良好。

任何帮助，将不胜感激。

# asp.net - Gridview 编辑外部更新按钮。

> ID：11781058
> 
> 赞同：0
> 
> 时间：2012-08-02T15:39:41.617
> 
> 标签：asp.net, gridview, textbox, databound, templatefield

我的 asp.net 页面中有一个 gridview，其中有一个用于编辑年度预算的模板字段。代码如下：

```
<Columns>
    <asp:BoundField DataField="f_year" HeaderText="Year" ReadOnly="True" `enter code here`>
    <ItemStyle Width="35px" />
    </asp:BoundField>
    <asp:BoundField DataField="o_orgcode" HeaderText="Cost Center " ReadOnly="True" />
    <asp:BoundField DataField="o_orgdesc" HeaderText="CostCenterDesc " ReadOnly="True" />
    <asp:BoundField DataField="s_subobject" HeaderText="Account " ReadOnly="True" />
    <asp:BoundField DataField="s_subdescrip" HeaderText="AccountDesc" ReadOnly="True" />
    <asp:TemplateField HeaderText="Initial Appropriation">
        <EditItemTemplate>
            <asp:Label ID="Label2" runat="server" Text="$"></asp:Label>&nbsp;
            <asp:TextBox ID="txtEditItemApprAmt" runat="server" Text='<%# Bind("b_budgetamt", "{0:f}") %>' CssClass="boxright"></asp:TextBox>
        </EditItemTemplate>
    <ItemTemplate>
<asp:TextBox ID="txtEditItemApprAmt2" runat="server" Text='<%# Bind("b_budgetamt", "{0:f}") %>' CssClass="boxright"></asp:TextBox>
</ItemTemplate>
<ItemStyle HorizontalAlign="Right" VerticalAlign="Middle" />
</asp:TemplateField>
<asp:BoundField DataField="b_initials" ReadOnly="True" >
<ItemStyle Width="35px" />
</asp:BoundField> 
```

当我的页面加载一个模板时，我拥有的字段将自动显示为数据绑定文本框。我这样做是因为一次要输入多个货币数字，我相信这对我的网站来说是一个更好的功能。我希望能够单击一个外部（即gridview 的外部）按钮来循环gridview 并更改我的数据库中的这些值。任何人都知道如何做到这一点，我无法在互联网上找到这样的例子？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:44:51.867

你可以这样做，

```
foreach(GridVieRrow row in gv.rows)
{
    TextBox txtEditItemApprAmt = row.FindControl("txtEditItemApprAmt");
    string ApprAmt = txtEditItemApprAmt.Text; 
    txtEditItemApprAmt.Text = someTextFunctionOrVariable;
} 
```

# c# - 类型为内部的受保护成员的可访问性不一致

> ID：11781060
> 
> 赞同：2
> 
> 时间：2012-08-02T15:39:42.683
> 
> 标签：c#, c#-4.0, inheritance, compiler-errors

谁能解释为什么编译器会给出以下错误？

```
 namespace Sandbox
{
    internal class DataObj { }

    public class A
    {
        protected DataObj _data;
    }
} 
```

这是编译器错误。

> 可访问性不一致：字段类型“Sandbox.DataObj”的可访问性低于字段“Sandbox.A._data”。

仅当我从不同程序集中的 A 派生时，我才会预期此错误。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:43:28.590

问题是有*可能*从`A`不同的程序集中派生。这样的类将无法访问属性的返回类型。
因此，声明本身是非法的。

也就是说，这个错误发生在声明端，而不是消费端。

这里的基本理念是，应该不可能创建有时无法使用的东西。

请注意，这种哲学有一些例外；您可以使用在某些情况下无法使用或继承的泛型进行恶作剧。
这是允许的，因为将这些错误移到声明端会过于严格。

# android - 如何将我的 Android 应用程序上的强调色从蓝色更改为其他颜色

> ID：11781066
> 
> 赞同：5
> 
> 时间：2012-08-02T15:39:57.283
> 
> 标签：android, colors, tabs, actionbarsherlock, diacritics

我想做的就是改变我的android应用程序的强调色，但我很难弄清楚如何做到这一点。android 现在默认是蓝色的，但我想让它变成橙色。

强调色是指导航选项卡的强调色、点击列表时突出显示的颜色、弹出对话框中的强调色等。

如果这很重要，我正在使用 actionbarsherlock。

这是一张图片。我想在整个应用程序中更改蓝色口音的颜色： ![在此处输入图像描述](../Images/ce1143e018388518cc6fe8470768b627.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-29T15:57:47.660

你问这个问题已经有一段时间了，但现在谷歌已经发布了一个新的 AppCompat 版本，你可以很简单地做你想做的事情。我给你的答案灵感来自[android developer blog support library 2.2.1](http://android-developers.blogspot.fr/2015/04/android-support-library-221.html)。

1.  将支持库添加到您的项目中（我假设您使用的是**Android Studio**）。

    为此，将这些行添加到`app.graddle`文件中（假设您的模块名为`app`）。

    ```
    dependencies {
        compile 'com.android.support:appcompat-v7:22.2.0'
    } 
    ```

* * *

2.  设置应用程序的主题

    这些行将被添加到您的`styles.xml`文件中。如您所见，这种风格有一些项目。如果您想知道它们对应的元素，请检查[使用材料自定义 android 状态栏](https://developer.android.com/training/material/theme.html#StatusBar)。

    **colorAccent**是您首先要更改的颜色。

    ```
    <!-- Base application theme. -->
    <style name="AppTheme" parent="Theme.AppCompat">
        <item name="colorPrimary">@color/primary</item>
        <item name="colorPrimaryDark">@color/primaryDark</item>
        <item name="colorAccent">@color/accent</item>
        <item name="android:textColorPrimary">@color/textColorPrimary</item>
        <item name="android:windowBackground">@color/windowBackground</item>
        <item name="android:navigationBarColor">@color/navigationBarColor</item>
    </style> 
    ```

    您还需要在 Android 清单中设置应用程序主题

    ```
    <application
        android:theme="@style/AppTheme" >

        ...

    </application> 
    ```

* * *

3.  在您的课程中从`Activity`/更改`ActionBarActivity`为**AppCompatActivity 。**

    ```
    public class MainActivity extends AppCompatActivity
    {
         ....
    } 
    ```

    由于 AppCompatActivity，您可能需要更改一些方法。查看第一个链接中的视频以更好地理解:)

* * *

4.  将您的小部件更改为 AppCompat 小部件

    ```
    <LineareLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <android.support.v7.widget.AppCompatTextView
            android:id="@+id/text"
            android:text="@string/hello_world"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <android.support.v7.widget.AppCompatButton
            android:id="@+id/btn_start"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/btn_start" />

    </RelativeLayout> 
    ```

等等瞧！就是这样，你已经准备好了 :) 你现在可以轻松地更改口音颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:42:57.687

您将要使用状态布局列表。

[http://developer.android.com/reference/android/content/res/ColorStateList.html](http://developer.android.com/reference/android/content/res/ColorStateList.html)

您可能需要为每个将具有新的默认选定颜色的小部件制作其中之一。

# performance - 在 Magento 中以编程方式创建/更新产品

> ID：11781069
> 
> 赞同：0
> 
> 时间：2012-08-02T15:40:07.653
> 
> 标签：performance, magento, model, product

我已经编写了一个模块来导入产品，我目前正在使用 Magento 的产品模型来相应地添加/更新产品。但是，事实证明这非常慢（可能是因为我启用了目录索引？）。

即使只是做

```
$product = Mage::getModel('catalog/product')->load($id);
$product->save(); 
```

慢得令人难以置信-我们说每个产品可能需要 2 秒（我每个 http 请求要 5 秒，并使用 javascript 发出多个请求）。

每个产品都需要更新一些属性、更改类别 ID 以及更新库存水平。目前，我正在循环浏览 20 种产品，并且需要将近 60 秒的时间。在生产中，它将遍历 200-300 种产品（尽管在更强大的服务器上）。

是否有更好/更快的方式来创建/更新产品？显然我可以只使用 SQL，但我不想弄清楚 Magento 的强大 EAV 数据库结构！

抱歉，如果这是一个不恰当的问题，我不知道如何最好地表达它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:34:23.297

在导入时将索引器模式设置为手动至少会给您带来一些性能提升。您显然可以在管理区域中进行设置，但您也可以通过脚本进行设置：

```
//Set to manual mode
$processCollection = Mage::getSingleton('index/indexer')->getProcessesCollection();
foreach($processCollection as $process) {
    $process
        ->setMode(Mage_Index_Model_Process::MODE_MANUAL)
        ->save();
}

//Set back to real time mode
$processCollection = Mage::getSingleton('index/indexer')->getProcessesCollection();
foreach($processCollection as $process) {
    $process
        ->setMode(Mage_Index_Model_Process::MODE_REAL_TIME)
        ->save();
} 
```

如果您正在寻找一种在导入后直接在脚本中重新索引的方法...

```
$processCollection = Mage::getSingleton('index/indexer')->getProcessesCollection(); 
foreach($processCollection as $process) {
      $process
         ->reindexEverything();
} 
```

但是，**Magmi** - [http://sourceforge.net/projects/magmi/files/magmi-0.7/](http://sourceforge.net/projects/magmi/files/magmi-0.7/) - 不仅在导入产品方面速度惊人，而且还提供了一些非常好的功能。

我不知道任何其他用于 Magento 的产品导入工具也一样快（如果其他人知道同样快或更快的工具会感兴趣吗？）

# django - django 中的 CRUD 用户，在 django Admin 之外

> ID：11781071
> 
> 赞同：0
> 
> 时间：2012-08-02T15:40:17.743
> 
> 标签：django, django-models

在我当前的项目中，我想在**django**的管理界面之外对用户进行**CRUD 。**

 **让我们解释我的问题如下：

1-我正在使用[`UserProfile`](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)为用户存储其他属性（他们的学校、生日等）

2-问题是通过删除用户，我可以删除配置文件而不是实际的`User`.

请查看列出和删除用户的代码：

```
def user_list(request):
    ''' Shows all of Students '''

    return object_list(request,
            queryset = UserProfile.objects.all() ,
            template_name = 'user_list.html' ,
            template_object_name = 'student'
            )

def user_delete(request , id):
    ''' Deletes a student based on his/her ID '''

    return delete_object(request,
            model = UserProfile ,
            object_id  = id ,
            template_name = 'delete_student.html' ,
            post_delete_redirect = reverse("user_list")
            ) 
```

我删除`UserProfile`而不是删除看起来很正常`User`。但我打算将它作为实际的**代理**`User`。我在这里想念什么吗？

3- 一般来说，我应该将每个模型引用到`User`或`UserProfile`吗？例如假设我有一个课程模型。以下哪一个是正确的方法？

```
class Course(models.Model):
    #stuff

    student = models.ForeignKey(Urer) 
    # OR ??
    student = models.ForeignKey(UserProfile) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:42:24.320

> 我删除的是 UserProfile 而不是 User 看起来很正常。但我打算将它作为实际用户的代理

为什么不直接删除用户？默认情况下，Django 也会使用 CASCADE DELETE 来删除 UserProfile。

> 一般来说，我应该将每个模型引用到 User 还是 UserProfile

我认为这更多是个人喜好的问题，但我通常直接与 User 绑定，因为它在获取所需对象时节省了一步（您不需要执行 user.get_profile().student 并且可以调用 user.get_profile().student）。学生代替）。无论如何，这对我来说也更有意义：学生是用户的财产，而不是用户的个人资料。**

# java - JSONObject 中的 JSONObject

> ID：11781075
> 
> 赞同：12
> 
> 时间：2012-08-02T15:40:25.460
> 
> 标签：java, android, json

我有一个这样的 API 输出：

```
{"user" : {"status" : {"stat1" : "54", "stats2" : "87"}}} 
```

`JSONObject`我从这个 API创建了一个简单的：

```
JSONObject json = getJSONfromURL(URL); 
```

在此之后，我可以像这样读取用户的数据：

```
String user = json.getString("user"); 
```

但是如何获取`stat1`and的数据`stat2`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-02T15:43:20.600

[`JSONObject`](http://www.json.org/javadoc/org/json/JSONObject.html)为许多不同的数据类型提供访问器，包括嵌套的`JSONObjects`and `JSONArrays`、 using [`JSONObject.getJSONObject(String)`](http://www.json.org/javadoc/org/json/JSONObject.html#getJSONObject%28java.lang.String%29)、[`JSONObject.getJSONArray(String)`](http://www.json.org/javadoc/org/json/JSONObject.html#getJSONArray%28java.lang.String%29).

鉴于您的 JSON，您需要执行以下操作：

```
JSONObject json = getJSONfromURL(URL);
JSONObject user = json.getJSONObject("user");
JSONObject status = user.getJSONObject("status");
int stat1 = status.getInt("stat1"); 
```

请注意这里缺少错误处理：例如，代码假定存在嵌套成员 - 您应该检查`null`- 并且没有异常处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:29:08.640

```
JSONObject mJsonObject = new JSONObject(response);
JSONObject userJObject = mJsonObject.getJSONObject("user");
JSONObject statusJObject = userJObject.getJSONObject("status");
String stat1 = statusJObject.getInt("stat1");
String stats2 = statusJObject.getInt("stats2"); 
```

来自您的响应**用户**和**状态**是对象，因此使用**getJSONObject**和**stat1**和**stats2**是**状态**对象键，因此使用**getInt()**方法获取整数值并使用**getString()**方法获取字符串值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:44:09.527

要访问 JSON 中的属性，您可以使用 JSON.parse 解析对象，然后访问所需的属性，例如：

```
var star1 = user.stat1; 
```

# java - Java：作为对象的动作？继承异常处理程序？

> ID：11781090
> 
> 赞同：0
> 
> 时间：2012-08-02T15:41:26.127
> 
> 标签：java, design-patterns, command

我是“命令”软件设计模式的新手，我在不知道自己在做什么的情况下尝试了它。我知道这对于 Stack Overflow 来说并不完全是一个合适的问题，但是如果您查看我的来源，看起来我正在接近它吗？我已经制作了在构造它们时执行它们的任务的对象（而超类处理任何引发的异常。）

（编辑#1：这个源在另一个类中，一个字段包括“out”和“in”。）

```
public static interface Operations{
        public void action(String filename)
            throws FileNotFoundException, UnsupportedEncodingException, IOException;
    }

    public static abstract class Operator implements Operations{
        public Operator(String filename){
            try{
                action(filename);
            } catch(FileNotFoundException FNFE){
                sessionLog.report(FNFE.toString());
            } catch(UnsupportedEncodingException UEE){
                sessionLog.report(UEE.toString());
            } catch(IOException IOE){
                sessionLog.report(IOE.toString());
            } finally{

                try{
                    out.close();
                } catch(IOException IOE){
                    sessionLog.report("The file may not have closed properly. "+IOE.toString());
                } catch(NullPointerException NPE){
                    //sessionLog.report("The file may be null.");
                }
            }
        }
    }

    public static class Saver extends Operator{
        public void action(String filename) 
                throws FileNotFoundException, UnsupportedEncodingException, IOException{
            out = new OutputStreamWriter(new FileOutputStream(filename), ENCODE);
            out.write("Spoons.");
        }
        public Saver(String filename){super(filename);}
    }

    public static class Opener extends Operator{
        public void action(String filename) 
                throws FileNotFoundException, UnsupportedEncodingException, IOException{

            in = new InputStreamReader(new FileInputStream(filename), ENCODE);
            /* ... */
        }
        public Opener(String filename){super(filename);}
    }

    public static void save(String filename, ShoppingMutableTreeNode SMTN){
        new Saver(filename);
    }

    public static void open(String filename){
        new Opener(filename);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:22:14.927

你的实现对我来说很好。不过有几点建议：

我会去掉 action() 的文件名参数，因为它可以让我做类似的事情

```
 new Saver("file1.txt").action("file2.txt"); 
```

我还将摆脱构造函数中的 action() 调用。我认为大多数开发人员不会在不深入研究您的源代码的情况下推断构造函数正在执行实际操作 - 它看起来并不直观。这样的事情会更明确：

```
 public abstract class Operation implements ... {
    private String filename;

    public Operation(String filename) { this.filename = filename; }

    public abstract void execute();
 } 
```

然后你的代码可以调用它

```
 new SaveAction("myfile.txt").execute(); 
```

关于命令模式的最后一句话——您在这里使用它来共享异常处理。这真的让我想起了[模板](http://en.wikipedia.org/wiki/Template_method_pattern)模式。

模式的强大之处在于您拥有抽象的动作并在不知道运行时的确切动作的情况下执行它们。以下是该模式的一些用途：[http ://en.wikipedia.org/wiki/Command_pattern#Uses](http://en.wikipedia.org/wiki/Command_pattern#Uses)

# java - File.getClass().getMethod()：如何获取 .class 和方法

> ID：11781095
> 
> 赞同：0
> 
> 时间：2012-08-02T15:41:52.367
> 
> 标签：java, file, junit

我正在使用 JUnit4 并且我正在尝试设置一个可用于多个相同类的测试（为什么它们都是一样的并不重要），但我正在将多个 java 文件传递​​给测试，并且我正在尝试在方法中创建同时具有 .class 和方法名称的对象`eg. list.add(new Object[]{testClass.class, testClass.class.methodName()});`如果您完全按原样输入 .class 的名称和方法的名称（如上面的示例）但我想要对许多不同的类执行此操作我需要在循环中传递它们，我正在使用以下代码正在处理的当前文件在`list.add(new Object[]{currentFile.getClass(), currentFile.getClass().getMethod(addTwoNumbers,int, int)}`哪里， addTwoNumbers 是方法的名称，它需要两个整数，但我收到以下错误`currentFile``.getMethod(addTwoNumbers,int, int)``eg. addTwoNumbers(int one, int two)`

```
'.class' expected

'.class' expected

unexpected type
required: value
found:    class

unexpected type
required: value
found:    class 
```

这是我的完整代码

```
CompilerForm compilerForm = new CompilerForm();
RetrieveFiles retrieveFiles = new RetrieveFiles();

@RunWith(Parameterized.class)
public class BehaviorTest {

    @Parameters
    public Collection<Object[]> classesAndMethods() throws NoSuchMethodException {

        List<Object[]> list = new ArrayList<>();
        List<File> files = new ArrayList<>();
        final File folder = new File(compilerForm.getPathOfFileFromNode());
        files = retrieveFiles.listFilesForFolder(folder);
        for(File currentFile: files){
            list.add(new Object[]{currentFile.getClass(), currentFile.getClass().getMethod(addTwoNumbers,int, int)});
        }

        return list;
    }
    private Class clazz;
    private Method method;

    public BehaviorTest(Class clazz, Method method) {
        this.clazz = clazz;
        this.method = method;
    } 
```

有谁看到我在这条线上做错了`list.add(new Object[]{currentFile.getClass(), currentFile.getClass().getMethod(addTwoNumbers,int, int)}); }`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:59:14.310

我相信您需要首先使用 ClassLoader 加载文件，然后创建它，以便您可以在类上使用反射。这是一个类似的帖子，其中包含有关此的更多信息的答案。[如何从文件系统加载任意 java .class 文件并对其进行反思？](https://stackoverflow.com/questions/3103634/how-to-load-an-arbitrary-java-class-file-from-the-filesystem-and-reflect-on-it)

以下是有关此的更多信息：

[看一下 Java 类加载器](http://www.javalobby.org/java/forums/t18345.html)

[Java中的动态类加载和重新加载](http://tutorials.jenkov.com/java-reflection/dynamic-class-loading-reloading.html)

这是一个使用 URLClassLoader 的快速示例

```
// Create a File object on the root of the directory containing the class file
File file = new File("c:\\myclasses\\");

try {
 // Convert File to a URL
 URL url = file.toURL();          // file:/c:/myclasses/
 URL[] urls = new URL[]{url};

 // Create a new class loader with the directory
 ClassLoader cl = new URLClassLoader(urls);

// Load in the class; MyClass.class should be located in
// the directory file:/c:/myclasses/com/mycompany
Class cls = cl.loadClass("com.mycompany.MyClass");
} catch (MalformedURLException e) {
} catch (ClassNotFoundException e) {
} 
```

该示例取自：

[加载不在类路径上的类](http://www.exampledepot.com/egs/java.lang/loadclass.html)

# wordpress - query_posts 不返回旧帖子？

> ID：11781100
> 
> 赞同：0
> 
> 时间：2012-08-02T15:42:17.523
> 
> 标签：wordpress

我在主页上使用 query_posts 从多种帖子类型中获取文章。我正在使用以下代码来执行此操作。

```
<?php query_posts( array('post_type' => array('post','page','custom_post1','custom_post2','custom_post3','custom_post4','custom_post5','custom_post6'))); 
if (have_posts()) : while (have_posts()) : the_post(); // begin the Loop ?>
/*html code goes here*/
<?php endwhile; endif; ?> 
```

它正确地获取帖子，但问题是：它不获取旧帖子。因此，例如我有 1 个帖子，它的发布日期是`02/july/2012`，这个帖子不会显示在我的主页上。但是，一旦我将日期更新为`02/Aug/2012`它开始显示在主页上。

那么是否有任何我可以添加的代码也`query_posts`可以获取旧帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:56:37.207

Wordpress 默认从管理员获取 10 个帖子或用户设置的帖子数量。

query_posts 接受返回记录数的参数。

```
query_posts( 'posts_per_page=5' );
query_posts( 'posts_per_page=50' ); 
```

# objective-c - 我应该使用 SQLite 添加此功能吗？

> ID：11781101
> 
> 赞同：1
> 
> 时间：2012-08-02T15:42:33.337
> 
> 标签：objective-c, ios, sqlite

我需要你的建议，我目前正在开发一个家庭应用程序。（一切都与家庭有关）

我想添加类似于家谱或家庭成员的东西。（使用表格视图）并且列表中的每个成员/元素都有自己的“视图”，其中包含关于他和他的照片的 50 个单词的传记。

从那以后，我还是 iOS 开发的新手，还没有使用过 SQLite。你们认为 SQLite 最适合这项工作吗？照片怎么样。有没有办法为每个成员放一张缩略图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:50:23.533

不，我会为此使用[CoreData](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。CoreData 为您提供了构建对象模型的图形建模工具，并处理了将对象图保存到磁盘所需的所有繁琐的内务处理。

您将作为常规文件存储在磁盘上的照片并由 CoreData 对象建模，该对象维护对照片的引用（URI 或文件路径）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:53:31.813

我会为此使用 CoreData，它归结为一个 SQLite 数据库，但 Apple 在 SQLite 数据库周围添加了自己的包装器，使其非常易于使用。

开发者网站上有许多示例应用程序以及许多 Tuts 可用，只需在 google 中搜索短语[“CoreData example”即可](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)，此处的链接是 ro Raywenderlich，这是一个很好的起点。我想一旦你浏览了这个博客，当你需要存储这样的东西时，你会越来越多地使用 CoreData。

关于缩略图存储，我会将它们存储在设备上并将文件的路径保存在数据库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T16:07:15.217

SQLite 在这方面做得很好，尽管[Core Data](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)通常被认为是首选的 iOS 技术。在某些情况下，我可能会建议在 Core Data 上使用 SQLite，但您没有概述任何让我倾向于该方向的应用程序要求。

但是，如果您自己编写 SQLite，我建议您使用[FMDB](https://github.com/ccgus/fmdb)之类的东西，这样您就省去了编写 SQLite 代码的麻烦。

而且，正如我在对该问题的另一个答案的评论中提到的那样，关于 Core Data 或 SQLite 中的图像，您将面临显着的性能损失。如果您正在处理小图像（例如缩略图），那很好，但如果您正在处理大量大图像，您可能真的需要考虑将它们存储在 Documents 文件夹下的某个目录结构中（然后存储相对数据库中的路径名）。将图像从数据库中取出并使用 Documents 文件夹在架构上并不优雅，但出于性能原因，您可能希望准确地做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T15:48:53.750

是的，您可以为此使用 SQLite；事实上，考虑到它的关系性质，它是保存家谱的理想选择。

照片数据可以序列化为字节流 ( `NSData *`) 并作为 blob 存储在列中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T15:49:59.577

数据库具有巨大的优势，您可以将所有内容存储在一个地方。

您也可以（我不推荐）使用文件夹结构来指定 /images/、/words/、/people/ 等数据，并为整个文件夹中的每个人使用相同的名称（tim.jpg、tim.txt、tim .dat)

或者使用小型数据库将所有内容存储在与您的“家庭（_members）”表相关的不同表中。

您还可以将图像存储在数据库中，主要是作为 blob（或 base64 编码或或或...哎呀）

我不知道 iOS 的东西如何处理 SQLite 的这些数据库类型，但你应该更好地使用数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T15:49:31.840

您在这里有很多选择。

如果您将所有信息存储在应用程序本身中（即，没有从某处的网络获取详细信息），那么 SQLite（作为 CoreData 后端）可能是一个好主意。阅读有关使用 CoreData 的内容，这样您就不会重新发明轮子，并且您的实现可以提供 iPhone 用户期望的流畅滚动体验。

然而，这些照片需要不同的存储/检索方式。

一种常见的技术是实现 2 级缓存系统。这需要将图片存储在单独的文件中，但为了提高速度，将其中一些图片保存在内存中。然后，您可以拥有一个类似于以下内容的类：

```
@interface ThumbnailManager : NSObject
{
    id<ImageCache> _imageCache; // You make this.
}

- (UIImage *)imageForFamilyMemberWithName:(NSString *)name;

@end 
```

这类似于我在你的位置上会做的事情。

祝你好运！

# android - Android 在画布上绘图

> ID：11781104
> 
> 赞同：2
> 
> 时间：2012-08-02T15:42:46.567
> 
> 标签：android, canvas

Android 开发新手，我无法使用画布对视图进行简单绘图。

据我了解，是这样的：

```
import android.content.Context;
import android.graphics.Canvas;
import android.view.View;

public class DrawView extends View
{
    public DrawView(Context context)
    {
        super(context);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);
        canvas.drawRGB(255,0,0);
    }
} 
```

以此作为我的活动：

```
public class Prototype1 extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

这对于布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <com.dhs2.prototype1.DrawView
        android:id="@+id/map"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        />
</LinearLayout> 
```

应该到处画红色，但我只是得到一个空白屏幕。知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:49:32.030

由于您在 XML 布局文件中添加了自定义视图，因此您应该再添加 2 个构造函数：

```
public DrawView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public DrawView(Context context, AttributeSet attrs) {
    super(context, attrs);
} 
```

这是因为您将一些属性传递给视图，例如`fill_parent`, `wrap_content`，因此`public DrawView(Context context)`不会调用构造函数。

但是，如果您不在 XML 布局文件中声明自定义视图，而是直接从以下方式设置它，这将起作用`onCreate()`：

```
setContentView(new DrawView(this)); 
```

# objective-c - 检查两个位置是否相等

> ID：11781113
> 
> 赞同：0
> 
> 时间：2012-08-02T15:43:11.670
> 
> 标签：objective-c, cocos2d-iphone, nsmutablearray, sprite, bounding-box

现在我有一个包含 3 个精灵对象的 NSMutableArray。我需要能够查看不在数组中的另一个精灵是否与数组中的任何精灵共享相同的位置。我试过这样做：

```
CCSprite *sect;
if (i > maxHealth) {
    for (int j = 0; j < i; j++) {
        sect = [tail objectAtIndex:j];
    }
    if (CGRectContainsPoint(sect.boundingBox, playerPos)) {
        NSLog(@"On top");
        return;
    } 
```

但它不起作用。我认为它试图查看它是否同时与所有这些相交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:03:15.967

你`if`在`for`循环之外。它只会测试一个对象；循环中访问的最后一个。

# php - 合并两个多维数组并将一个设置为键

> ID：11781115
> 
> 赞同：1
> 
> 时间：2012-08-02T15:43:16.147
> 
> 标签：php, arrays

我有这两个数组，我需要将它们组合起来

```
Array (
    [0] => Column 1
    [1] => Column 2
    [2] => Column 3
)
Array (
    [0] => Array (
            [0] => 111
            [1] => 222
            [2] => 333
        )
    [1] => Array (
            [0] => 444
            [1] => 555
            [2] => 666
        )
) 
```

进入这个

```
Array (
    [0] => Array (
            [Column 1] => 111
            [Column 2] => 222
            [Column 3] => 333
        )
    [1] => Array (
            [Column 1] => 444
            [Column 2] => 555
            [Column 3] => 666
        )
) 
```

这就是我所拥有的并且它有效，但我相信它可以以更简单的方式完成：

```
$values = array( array( 1,2,3), array( 4,5,6) );
$fields = array( 'Column 1','Column 2','Column 3');
$i = 0;
$j = 0;
$l = 0;
$rows = array();
$columns = array();

foreach($values as $val) {
    $rows[] = $val;

    foreach ($fields as &$field) {
        $columns[$j][$i] = $field;
        $i++;
    }
    $i = 0;
    $j++;
}

foreach($columns as $c){
    $result[] = array_combine($c,$rows[$l]);
    $l++;
} 
```

如果可能的话，我想要清理它。有时我确实遇到了数组问题，而这个数组真的让我很头疼。:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:46:18.347

遍历数组并将每个数组与键一起传递给[`array_combine` *^([docs] ：)*](http://php.net/manual/en/function.array-combine.php)

```
$result = array();

foreach($values as $key => $value) {
    $result[$key] = array_combine($fields, $value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:48:32.390

我认为`array_combine()`像你所做的那样简单，你可以得到它。PHP 没有任何功能，但你可以将它变成你当时需要的任何东西，所以对我来说它看起来不错。

有点奇怪，您在之前将值和键放入单独的数组中，您可以简单地对我认为的大数组进行 foreach... 或者我看代码的速度太快了？

# macos - R到剪贴板在Mac上不起作用

> ID：11781121
> 
> 赞同：2
> 
> 时间：2012-08-02T15:43:34.477
> 
> 标签：macos, r

我已经将该`strwrap`函数包装成`strWrap`接受来自剪贴板的文本以及自动写入剪贴板的功能。在此我假设 mac 的系统名称是 Darwin。此功能适用于 Windows 机器（抱歉，Linux 有太多的变化使其可行，并且大多数使用此功能的软件包的人无论如何都不是 linux 用户）。

我在`psych`包的[read.clipboard](http://personality-project.org/r/html/read.clipboard.html)函数之后建模了我的函数。[不幸的是，我请一些人在talkstats.com](http://www.talkstats.com/showthread.php/27194-test-and-improve-a-function-that-s-OS-independant)上试用它，他们有一个 mac，但它不起作用。我怎样才能使它也适用于mac？根据[this SO post](https://stackoverflow.com/questions/9035674/r-function-to-copy-to-clipboard-on-mac-osx) ，我的代码似乎也适用于mac用户。

如果这按预期工作，它应该能够从 mac 用户的剪贴板读取并在完成后写入剪贴板。我`#`在最后用 a 标记了 mac 特定行，以便于理解问题

```
strWrap <-
function(text = "clipboard", width = 70) {
    if (text == "clipboard") {
        if (Sys.info()["sysname"] == "Darwin") {        #
            text <- paste(pipe("pbpaste"), collapse=" ")#
        }                                               #
        if (Sys.info()["sysname"] == "Windows") {
            text <- paste(readClipboard(), collapse=" ")
        }
    } 
    x <- gsub("\\s+", " ", gsub("\n|\t", " ", text))
    x <- strwrap(x, width = width)
    if (Sys.info()["sysname"] == "Windows") {
        writeClipboard(x, format = 1)
    }
    if (Sys.info()["sysname"] == "Darwin") {           #
        j <- pipe("pbcopy", "w")                       #
        cat(x, file = j)                               #
        close(j)                                       # 
    }                                                  #
    writeLines(x)
}

X <- "Two households, both alike in dignity, In fair Verona, where we lay
our scene, From ancient grudge break to new mutiny, Where civil blood
makes civil hands unclean. From forth the fatal loins of these two
foes A pair of star-cross'd lovers take their life; Whose
misadventured piteous overthrows Do with their death bury their
parents' strife. The fearful passage of their death-mark'd love, And
the continuance of their parents' rage, Which, but their children's
end, nought could remove, Is now the two hours' traffic of our stage;
The which if you with patient ears attend"

strWrap(X, 70) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:44:24.977

`pipe`返回一个连接对象。您需要从连接中读取。例如

```
pcon <- pipe("pbpaste")
text <- paste(scan(pcon, what="character", quiet=TRUE), collapse=" ")
close(pcon) 
```

这适用于我的mac。

# javascript - 必须使用活动访问令牌来查询有关具有打开图的当前用户的信息

> ID：11781123
> 
> 赞同：4
> 
> 时间：2012-08-02T15:43:39.420
> 
> 标签：javascript, facebook, facebook-graph-api

大家好，我正在尝试发布我的 facebook 应用程序用户的活动，我一步一步按照教程进行操作，但它无法正常工作......

警报消息显示错误“发生错误必须使用活动访问令牌来查询有关当前用户的信息”为什么？我登录正确。

代码是这样的：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
  xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# appnamespace: 
              http://ogp.me/ns/apps/appnamespace#">
 <title>OG Tutorial App</title>
   <meta property="fb:app_id" content="appID" /> 
   <meta property="og:type" content="appnamespace:recipe" /> 
   <meta property="og:title" content="Stuffed Cookies" /> 
   <meta property="og:image" content="http://www.domain.com/logo.gif" /> 
   <meta property="og:description" content="The Turducken of Cookies" /> 
   <meta property="og:url" content="http://www.domain.com/activity.php">

   <script type="text/javascript">
   function postCook()
   {
       FB.api(
         '/me/namespace:cook',
         'post',
         { recipe: 'http://www.domain.com/activity.php' },
         function(response) {
            if (!response || response.error) {
               alert('Error occured '+ response.error.message); // it shows "Error occured An active access token must be used to query information about the current user." message
            } else {
               alert('Cook was successful! Action ID: ' + response.id);
            }
         });
   }
   </script>
 </head>
 <body>
   <div id="fb-root"></div>
   <script>
     window.fbAsyncInit = function() {
       FB.init({
         appId      : 'appID', // App ID
         status     : true, // check login status
         cookie     : true, // enable cookies to allow the server to access the session
         xfbml      : true  // parse XFBML
       });
     };

     // Load the SDK Asynchronously
     (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document));
   </script>

   <h3>Stuffed Cookies</h3>
   <p>
     <img title="Stuffed Cookies" 
          src="http://www.domain.com/logo.gif" 
       />
   </p>

   <br>
   <form>
<input type="button" value="Cook" onclick="postCook()" />
  </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:48:56.080

我在您的源中没有看到您对用户进行身份验证的任何地方。用户必须首先授权您的应用程序，如下所述：[https ://developers.facebook.com/docs/authentication/client-side/](https://developers.facebook.com/docs/authentication/client-side/)

# ant - 使用密钥文件的 ANT SSHEXEC 任务问题

> ID：11781124
> 
> 赞同：4
> 
> 时间：2012-08-02T15:43:42.537
> 
> 标签：ant, ssh, automation, build-automation

我遇到了 SSHEXEC ant 任务的问题。

我正在尝试连接到远程主机并执行命令。

我正在尝试使用“密钥文件”，所以我不需要使用用户/密码并遇到问题。

我可以让它连接，但得到提示：

[sshexec] 连接到 $HOST:22

[sshexec] Kerberos 用户名 [$Local_USER]：

[sshexec] $Local_USER 的 Kerberos 密码：

现在，如果我只是在每个提示符下按回车键，它就会继续执行命令。

我正在使用这种方法进行自动化，因此如果您需要交互，则无法达到目的。

这是 ANT 语法：

```
<target name="explode" depends="deploy" description="Creating build on Deployment Server">
      <sshexec host="${host}"
             username="${user}"
             keyfile="c:\paul\testkey"
             trust="true"
             command="${bin}/createBuild.sh"/>
</target> 
```

Ant 版本 - 1.8.3 Jsch 版本 - jsch-0.1.42（也尝试使用 jsch-0.1.29）

如果我做错了什么，任何人都可以提供帮助或建议吗？

提前致谢。

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T08:31:43.143

此问题现已在 Ant (1.9.1) 和 Jsch (0.1.50) 的最新版本中得到解决。

有一个关于 Apache 的[错误报告](https://issues.apache.org/bugzilla/show_bug.cgi?id=53437)显示它已在 2013 年 1 月得到修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T14:01:22.697

您可以按照 Cambolie 的建议降级到 Java 1.6，也可以添加 -noinput 来解决此问题。

例如：

```
ant -noinput [some_target] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T10:48:58.790

这里的问题在于 Java 7。

在 JAVA 7 中，他们将 Kerberos 引入了 java.security，因此这导致问题在继续之前提示输入 kerberos 用户/密码。

我已经通过降级到 Java 1.6 解决了这个问题。

我仍在研究 1.7 版 Java 的修复 - 可能需要进一步配置 Java 的 kerberos conf 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:42:52.463

这可能是远程端的错误配置。它当然不应该询问用户名。与您的系统管理员讨论此问题。我也很担心，`Kerberos`因为这与 SSH 完全无关。

还要确保在用户帐户中安装了公钥。

# search - 将 Solr 与经常更新的数据一起使用

> ID：11781129
> 
> 赞同：1
> 
> 时间：2012-08-02T15:43:57.997
> 
> 标签：search, solr

我有一个想要使用 Solr 实现的站点搜索。不幸的是，我的 MySQL 数据库中也有很多来自 cron 作业的频繁更新的动态数据，我也希望这些数据是可搜索的。

我会自动假设不断更新 Solr 中的记录不是一个好主意，那么是否有一个可行的解决方案可以为我提供 Solr 的文本搜索功能以及能够根据这些频繁更新的字段进行过滤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:42:22.827

我认为这取决于“频繁”的含义以及您容忍的 Solr 滞后时间。

就我而言，我每分钟更新 Solr 两次，效果很好。..基于一个MySql DB，每分钟有数百次更新。

在这种情况下，重要的是不要在每个 Solr 更新/提交上运行优化。最好每 n 次运行一次优化。所以最后，所有新的 MySQL 东西都将在 Solr 中以 max 可见。30 秒。延迟。

这是否可以接受取决于您的情况。

# c# - 使整个应用程序可以访问数据（可能在运行时更改）的最佳方法？

> ID：11781131
> 
> 赞同：5
> 
> 时间：2012-08-02T15:44:06.740
> 
> 标签：c#

在整个 wole 应用程序中访问数据的最佳方式是什么？在我的具体示例中，我将应用程序的设置从 XML 文件加载到 Settings-Object 的实例中，并且我不想将这些设置为绝对常量，因为用户应该能够更改这些（并查看效果) 无需重新启动程序。

现在，我需要在其他类的方法中使用某些（的属性）设置，但是这样它们就无法访问了。那么我应该将设置存储在哪种“对象”中？我认为需要在我的应用程序中进行设置的每个方法都必须查看 XML 本身并不是一件好事。此外，将设置实例传递给我使用的所有其他类似乎太麻烦了。

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T15:49:50.810

在 C# 中，我总是使用静态类来提供此功能。[此处](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.90%29.aspx)详细介绍了静态类，但简要地说，它们仅包含静态成员且未实例化——本质上它们是通过类名（和命名空间）访问的全局函数和变量。

这是一个简单的例子：

```
public static class Globals
{
    public static string Name { get; set; }
    public static int aNumber {get; set; }
    public static List<string> onlineMembers = new List<string>();

     static Globals()
     {
        Name = "starting name";
        aNumber = 5;
     }
} 
```

请注意，我还使用了一个静态初始化程序，它保证在使用/调用任何成员或函数之前的某个时间点运行。

在您的程序的其他地方，您可以简单地说：

```
Console.WriteLine(Globals.Name);
Globals.onlineMembers.Add("Hogan"); 
```

* * *

为了响应评论重新声明，静态对象仅“创建”一次。因此，您的应用程序使用该对象的任何地方都将来自同一位置。根据定义，它们是全球性的。要在多个地方使用此对象，只需引用对象名称和要访问的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:47:12.320

定义一些简单的`Configuration`（比如说）类：

```
public static class Configuration 
{
     /*runtime properties */

    public static void LoadConfiguration(..)
    {
       /*Load from file a configuration into the static properties of the class*/
    }

    public static bool SaveConfiguration(...)
    {
       /*Save static properties of the class into the configuration file*/
    }
} 
```

不要忘记*默认配置*，以防由于某种原因丢失了配置文件。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:00:01.647

听起来像是对[设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=VS.80%29.aspx)项目页面的完美使用。您设置默认值，它们可以在应用程序运行之间进行修改和保存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T16:00:22.360

您可以拥有一个具有静态属性的静态类来获取和设置

# sql - 是否可以声明一个没有固定长度的字符串类型来过滤固定长度的字符？

> ID：11781132
> 
> 赞同：0
> 
> 时间：2012-08-02T15:44:07.400
> 
> 标签：sql, sql-server

在 sql 中有没有一种方法可以声明一个没有固定长度的字符串类型来过滤具有固定长度的 nvarchar 字段？

例如，这就是我现在必须做的 -

```
declare @input nvarchar(255)
set @input = 'test'
select * from table
where field = @input 
```

这是我想做的事情-

```
declare @input string
set @input = 'test'
select * from table
where field = @input 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:46:47.983

只需将变量声明为 nvarchar(4000) 或 nvarchar(max)。

对于可变长度字符串，字符串的长度不需要匹配即可进行比较。

对于固定长度的字符串，情况并非如此，但这完全是另一回事。

# c++ - 更改 linux 套接字文件权限

> ID：11781134
> 
> 赞同：0
> 
> 时间：2012-08-02T15:44:08.927
> 
> 标签：c++, sockets, unix-socket

首先，是的，这与[这个堆栈溢出问题有关](https://stackoverflow.com/questions/5977556/how-can-i-change-the-permissions-of-a-linux-socket-file)，但我的情况略有不同，我的帖子没有得到答案。

因此，在我的戴尔桌面工作站 Ubuntu 10.04 32 位上，我开发了一个服务器程序，旨在为 Apache 运行的 PHP“程序”提供 Unix 域套接字。（注意：umask = 0022）我将套接字文件命名为 /home/wmiller/ACT/web_socket_file。（ACT 是对产品名称的引用）。/home/wmiller/ACT 的权限为 777。 /home/wmiller/ACT/web_socket_file 的创建权限为 777。

现在，我将程序复制到我的测试平台，一个 Q7 格式的 Intel 处理器板，它也有 Ubuntu 10.04 32 位和 umask = 0022。相同的目录，相同的 777 目录权限。但是，现在当我运行代码 /home/wmiller/ACT/web_socket_file 时出现 755 权限，而 Apache/PHP 无法打开 Unix 域套接字，因为它获得了 rx 权限而不是 rw- 或 rwx。Apache 在 uid = www-data 中运行。

```
sockaddr_un       webServAddr;
remove( g_webSocketFileName.c_str() );       // to erase any lingering file from last time

memset(&webServAddr, 0, sizeof(webServAddr));
webServAddr.sun_family        = AF_UNIX;
snprintf( webServAddr.sun_path, UNIX_PATH_MAX, "%s", g_webSocketFileName.c_str() );

if (( g_webServerSock = socket(AF_UNIX, SOCK_STREAM, 0)) < 0 )
{
    PLOG( ERROR ) << "Failed to acquire the web Server socket: ";  // uses google glog tool
    return -1;
} 
```

所以我尝试了这两种方法，但都没有奏效。

```
chmod( g_webSocketFileName.c_str(), S_IRWXU | S_IRWXG  | S_IRWXO ); 
```

和

```
char temp[100];
sprintf( temp , "chmod o+w %s\n", g_webSocketFileName.c_str() );
system( temp ); 
```

尝试了 777 和 o+w 的权限。

我什至尝试添加一个

```
unlink( g_webSocketFileName.c_str() ); 
```

但那里没有帮助。

有人对为什么 ir 在一台机器上工作而不是在另一台几乎相同的机器上工作有任何建议吗？将套接字文件放在其他地方会更好吗？是否有标准的地方-socket-files-go？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:52:20.510

`fchmod()`在Linux上，您需要*在* `bind()`. 这样，`bind()`调用将创建具有指定权限的文件系统对象。调用`fchmod()`已绑定的套接字无效。

使用`chmod()`可能会导致[TOCTTOU](https://en.wikipedia.org/wiki/TOCTTOU)竞态条件。如果可能，请`fchmod()`改用。

这是一个特定于 Linux 的 hack。在大多数 BSD 系统上，`fchmod()`将在套接字 fd 和 set 上失败`EINVAL`。

* * *

*编辑。* 我通过修补发现了这种与系统相关的行为差异。也许最好的“来源”应该是内核源代码本身。

*   在 FreeBSD 上，似乎`fchmod()`在 Unix 域套接字上定义为设置`EINVAL` [(Ref1)的无操作](http://fxr.watson.org/fxr/source/kern/sys_socket.c#L85 "FreeBSD 源码内核/sys_socket.c")
*   在 Linux 上，似乎 Unix 域套接字 fd 就像 inode 一样创建，以及文件模式（但`S_IFSOCK`按位或）。[(Ref2)](http://lxr.free-electrons.com/source/net/socket.c#L540 "Linux源码net/socket.c") Linux 的`fchmod()`实现会很高兴地将更改应用到这样的对象。将 Unix 域套接字绑定到地址时，文件模式用于创建文件系统对象。[(Ref3)](http://lxr.free-electrons.com/source/net/unix/af_unix.c#L857 "Linux源码net/unix/af_unix.c") 根据`man 2 stat`,`S_IFSOCK`存在于 POSIX.1-2001 中。

如果我读错了来源，请随时纠正我。

# c++ - Opencv 函数只能以 C 代码方式调用，但不能以 C++ 方式调用

> ID：11781139
> 
> 赞同：0
> 
> 时间：2012-08-02T15:44:26.527
> 
> 标签：c++, c, opencv, stl, compilation

我对 Opencv 真的很陌生。按照说明下载并安装Opencv 2.4后，我开始编写我的第一个Opencv程序，基本上就是照搬网上的教程。

```
#include <stdio.h>
#include <iostream>
#include <vector>

#include "cv.h"
#include "highgui.h"
#include <stdio.h>
#include <stdlib.h>
#include <opencv2/opencv.hpp>
using namespace std;
using namespace cv;

int main( int argc, char** argv )
{
    char* filename = "C:\\Research\abc.pgm";  
     IplImage *img0;

    if( (img0 = cvLoadImage(filename,-1)) == 0 )
        return 0;

    cvNamedWindow( "image", 0 );
    cvShowImage( "image", img0 );
    cvWaitKey(0);  
    cvDestroyWindow("image");
    cvReleaseImage(&img0);

    return 0;
} 
```

这些代码运行良好，但您可能会注意到，在上面调用 Opencv 函数的代码中是 C 代码方式。因此，我决定使用以下代码继续使用 C++ 代码方式：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std; 

int main( int argc, char** argv )
{ 
    if( argc != 2) 
    {
     cout <<" Usage: display_image ImageToLoadAndDisplay" << endl;
     return -1;
    }

    Mat image;
    image = imread(argv[1], CV_LOAD_IMAGE_COLOR);   // Read the file

    if(! image.data )                              // Check for invalid input
    {
        cout <<  "Could not open or find the image" << std::endl ;
        return -1;
    }

    namedWindow( "Display window", CV_WINDOW_AUTOSIZE );// Create a window for display.
    imshow( "Display window", image );                   // Show our image inside it.

    waitKey(0);                                          // Wait for a keystroke in the window
    return 0;
} 
```

然而，在这种情况下，尽管编译看起来不错，但程序有几个链接错误。我收到的链接错误如下：

```
Error   2   error LNK2019: unresolved external symbol "void __cdecl cv::namedWindow(class stlp_std::basic_string<char,class stlp_std::char_traits<char>,class stlp_std::allocator<char> > const &,int)" (?namedWindow@cv@@YAXABV?$basic_string@DV?$char_traits@D@stlp_std@@V?$allocator@D@2@@stlp_std@@H@Z) referenced in function _main    C:\Research\OpencvTest\OpencvTest.obj
Error   1   error LNK2019: unresolved external symbol "void __cdecl cv::imshow(class stlp_std::basic_string<char,class stlp_std::char_traits<char>,class stlp_std::allocator<char> > const &,class cv::_InputArray const &)" (?imshow@cv@@YAXABV?$basic_string@DV?$char_traits@D@stlp_std@@V?$allocator@D@2@@stlp_std@@ABV_InputArray@1@@Z) referenced in function _main    C:\Research\OpencvTest\OpencvTest.obj 
```

我很确定我在我的程序中添加了必要的Opencv库（我使用VC10），我添加的附加库如下：

```
stl_port.lib
opencv_highgui242d.lib
opencv_core242d.lib 
```

我想知道我的设置有什么问题。为什么它适用于第一个程序而不适用于第二个程序？任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:37:44.427

它与混合 STLPort 和 MSVC STL 有关。您可能没有自己构建 OpenCV 库，所以他们使用的是 VC10 STL。使用 C 接口，`char*`但使用 C++ 接口时，链接器会与方法中的方法混淆`std::string`。`imread`如果您也将其输入到，您应该会看到相同的结果`string`。

[我可以在我的项目中混合 STL 实现吗？](http://stlport.sourceforge.net/FAQ.shtml#libmix2)

# c++ - QTcpSocket / QTcpServer 内存管理 / 服务器崩溃

> ID：11781140
> 
> 赞同：3
> 
> 时间：2012-08-02T15:44:28.133
> 
> 标签：c++, qt, tcp

我正在设计和制作一个服务器，它应该能够每秒处理大约 100 次以上的点击。我从服务器获得的信息只是 HTTP 标头。根据来自标头的信息，它将查询数据库（不同线程）以获取一些信息，并将最终信息发送回创建输出字符串的 QTcpServer，并发送回 HTTP 响应。我对此有一个很大的问题，我无法调试。我的代码与此类似：

```
TCPInterface::TCPInterface(QObject *parent): QTcpServer(parent)
{
   //start listening for tcp traffic on port 80
   listen(QHostAddress::Any, 80);

   connect(this,SIGNAL(sendInfo(QTcpSocket*, QString *)), databaseThread, SLOT(recieveInfo(QTcpSocket*, QString*)));
   connect(databaseThread, SIGNAL(sendToTCPSend(QTcpSocket *, QString *)), this, SLOT(TCPSend(QTcpSocket*, QString*)));
} 
```

`

```
void TCPInterface::incomingConnection(int socket)
{
   QTcpSocket *s = new QTcpSocket(this);
   connect(s, SIGNAL(readyRead()), this, SLOT(readClient()));
   //connect(s, SIGNAL(disconnected()), this, SLOT(discardClient()));

   s->setSocketDescriptor(socket);
} 
```

`

```
//void TCPInterface::discardClient()
//{
   //QTcpSocket* socket = (QTcpSocket*)sender();
   //socket->deleteLater();
//} 
```

`

```
void TCPInterface::readClient()
{
  QTcpSocket* socket = (QTcpSocket*)sender();

   QString header;
   while(socket->canReadLine())
   {
      header += socket->readLine();
   }

   emit sendInfo(socket, headerInfo);
} 
```

`

```
void databaseThread::recieveInfo(QTcpSocket* socket, QString* headerInfo)
{
   QString*outputInfo = getDatabaseInfo(headerInfo);
   emit sendToTCPSend(socket, outputInfo);
} 
```

`

```
void TCPInterface::TCPSend(QTcpSocket* socket, QString* outputInfo);
{
    QString response = "HTTP/1.0 200 Ok\r\n";
    response += "Content-Type: text/html; charset=\"utf-8\"\r\n";
    response += "\r\n" + *outputInfo + "\n";

    if(socket->isWritable() && socket->isOpen())
    {
         socket->write(response.toAscii());
    }
    //socket->disconnectFromHost();
    socket->close();
    delete headerInfo;
 } 
```

我有一个主要问题，我知道它是什么，但找不到解决它的方法。

我的问题是随着点击次数的增加，我的记忆力不断增加。我确信这是因为我的 QTcpSockets 从未被删除，因为我只是关闭它们。但是，当我不使用 close 并使用 disconnectFromHost 和 disconnected/discardClient 插槽/信号时，我的服务器将因流量大而崩溃（没有消息或任何东西，所以我不确定崩溃的确切原因）。有没有人遇到过这个问题？任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-15T04:31:05.450

我也有同样的问题！

close() 假设是对象的解构函数。（QT手册QTcpSocket::~QTcpSocket()） 这里我建议做一个实验：关闭一个套接字，然后尝试重新打开它。如果失败，则意味着套接字对象已被销毁，否则意味着该对象应该是 deletelater()..

在我的情况下，客户端关闭了连接，并且调用了 disconnect() SIGNAL 并触发了与您的 discardClient() SLOT 相对应的方法，在该方法中我 deletelater() 套接字。当我对它进行压力测试时，当我在 I5 笔记本电脑双核上同时使用 600-800 连接轰炸它时，它通常会崩溃。它平均每 5 次崩溃一次。

否则不会。

很高兴进一步讨论。

吉尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:46:46.730

您应该调用`deleteLater()`您的客户端套接字：

```
connect(socket, SIGNAL(disconnected()),
        socket, SLOT(deleteLater())); 
```

# css - CSS 在 WebKit 和 IE 中无法正常工作

> ID：11781142
> 
> 赞同：1
> 
> 时间：2012-08-02T15:44:35.347
> 
> 标签：css, internet-explorer, firefox, webkit

我正在制作一个最终看起来像 ESPN 的底线的代码。

Internet Explorer（7、8 和 9）尊重我的 div 的宽度属性，但不尊重主 div 的居中。

虽然 WebKit（Safari 5 和 6，Chrome）和 Firefox 不尊重 div 的宽度，但确实将主 div 正确居中。我正在绞尽脑汁试图让 CSS 跨 Bowser 工作。

HTML

```
<div id="ticker">
    <div id="homeTeam">Team A</div>
    <div id="homeScore">1</div>
    <div id="awayTeam">Team B</div>        
    <div id="awayScore">2</div>
    <div id="remaining">Final</div>
</div> 
```

CSS

```
#ticker {
    margin: auto;
    width: 778px;
    background-color: black;
    height: 28px;
    border-top-width: 3px;
    border-top-style: outset;
    border-top-color: #FFFFFF;
}

#homeScore {
    width: 60px;
    margin-left: -4px;
    padding-right: 10px;
    background-color: #79000a;
    font-size: 24px;
    color: white;
    display: inline;
    text-align: right;
}

#awayScore {
    width: 60px;
    margin-left: -4px;
    padding-right: 10px;
    background-color: #79000a;
    font-size: 24px;
    color: white;
    display: inline;
    text-align: right;
}

#homeTeam {
    width: 270px;
    padding-left: 10px;
    background-color: #7c000e;
    font-size: 24px;
    color: white;
    display: inline;
}

#awayTeam {
    margin-left: 25px;
    width: 270px;
    padding-left: 10px;
    background-color: #7c000e;
    font-size: 24px;
    color: white;
    display: inline;
}

#remaining {
    width: 76px;
    background-color: black;
    margin-left: 25px;
    font-size: 20px;
    color: white;
    display: inline;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:48:50.307

问题是您将显示属性设置为`inline`. IE 错误地尊重内联元素的 width 属性，而其他的则遵循 web 标准并且不遵守。

你可以：

1)`inline`改为`inline-block`

或者

2）将它们更改为`block`并使用该`float`属性。

Here is an explanation how to get `inline-block` to work in IE7 [http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

# windows - 检查上次更改密码的时间

> ID：11781144
> 
> 赞同：19
> 
> 时间：2012-08-02T15:44:43.753
> 
> 标签：windows, linux, passwords, admin, maintenance

如何检查某些用户上次更改密码的时间？我想在 Windows 和 Linux 上都这样做，你能指导我一点我该怎么做吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-02T15:49:35.623

**在 Linux 中：**

```
chage -l {username} 
```

**在 Windows 中：**

```
net user {username} | find /I "Password last set" 
```

**在 Windows 中（域的用户部分）：**

```
net user {username} /DOMAIN | find /I "Password last set" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:50:06.090

***尼克斯**

查看命令[`chage`](http://unixhelp.ed.ac.uk/CGI/man-cgi?chage+1)或 [`getprpw`](http://www.unix.com/man-page/all/1m/getprpw/)

**视窗**

`net user UserName`里面有信息

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-10-04T06:52:47.800

> 网络用户用户名 /DOMAIN | 查找 /I "密码最后设置"

此命令很有用，并且能够检查我上次更改密码的日期和时间。

# python - 即使列表为空，也强制 json 转储 json 对象

> ID：11781148
> 
> 赞同：19
> 
> 时间：2012-08-02T15:45:00.390
> 
> 标签：python, json

我有一个列表，它可能是空的或非空的。

我想创建一个新文件，其中包含该列表的格式是人类可读且易于我的下一个脚本解析的。在列表非空的情况下，这可以正常工作，我的下一个脚本会读入 json 文件。但是当列表为空时，我得到“ValueError: No JSON object could be decoded”。这是有道理的，因为当我打开文件时，确实没有内容，因此也没有 JSON 对象。

我对某些列表为空的事实感到满意。所以，要么我想写一个空的 JSON 对象，要么我希望我的阅读器脚本没有找到 JSON 对象。

以下是相关代码：

**作家脚本**

```
favColor = []   OR   favColor = ['blue']   OR favColor = ['blue', 'green']
fileName = 'favoriteColor.json'
outFile = open(fileName, 'w')
json.dump(outFile, favColor)
outFile.close() 
```

**阅读器脚本**

```
fileName = 'favoriteColor.json'
inFile = open(fileName, 'r')
colors = json.load(inFile)
inFile.close() 
```

非常感谢任何帮助或建议。如果我需要为我这样做的原因提供更多理由，我也可以提供，只是认为我会从理解问题所需的最低限度开始。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-02T15:48:09.087

将您的阅读器脚本修改为：

```
with open('favoriteColor.json') as inFile:
    try: 
         colors = json.load(inFile)
    except ValueError: 
         colors = [] 
```

这会尝试将文件加载为 json。如果由于值错误而失败，我们知道这是因为 json 为空。因此，我们可以将颜色分配给一个空列表。最好使用“with”结构来加载文件，因为它会自动关闭它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T15:56:36.430

我不会采取你正在尝试的方法。我会改为`json.dump`字典，例如：

```
d = {'var1': '123', 'var2': [1, 2, 3]}
json.dump(d, fileout) 
```

然后使用`dict.get`将其默认为合适的值：

```
json_dict = json.load(filein)
favColor = json_dict.get('favColor', []) 
```

然后你仍然有强制值，除非使用`[]`符号不存在。

Puts the logic of missing values in your code instead of the json parsers...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T15:57:19.800

You can also add the name of the variable in your json file:

```
json.dump({'favorite-color': favColor}, outFile)
outFile.close() 
```

And handle the case of an empty list when reading the json file:

```
data = json.load(inFile)

if len(data['favorite-color']) == 0:
    ... 
```

Note that you must provide the object that you want to save and then the file-like object to `json.dump`.

# javascript - jQuery重置setInterval计时器

> ID：11781149
> 
> 赞同：9
> 
> 时间：2012-08-02T15:45:03.000
> 
> 标签：javascript, jquery

我的jQuery：

```
function myTimer() {
    var sec = 15
    var timer = setInterval(function() { 
    $('#timer').text(sec--);
    if (sec == -1) {
      clearInterval(timer);
      alert('done');
     } 
    }   , 1000);

}

$("#knap").click(function() {
    myTimer();
});

$("#reset").click(function() {
// set timer to 15 sec again.. 
}); 
```

我希望在单击#reset 时重置计时器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T15:47:22.630

您需要将“计时器”变量保留在下次调用 myTimer 函数时可用的范围内，以便清除现有间隔并使用新间隔重置它。尝试：

```
var timer;
functionn myTimer() {
    var sec = 15
    clearInterval(timer);
    timer = setInterval(function() { 
    $('#timer').text(sec--);
    if (sec == -1) {
      clearInterval(timer);
      alert('done');
     } 
    }   , 1000);

}

$("#knap").click(function() {
    myTimer();
});

$("#reset").click(function() {
   myTimer();
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T16:09:55.597

或者您可以按照以下方式做一些事情：

```
var myTimer = function(){
    var that = this,
        time = 15,
        timer;
    that.set = function() {
        console.log('setting up timer');
        timer = setInterval(function(){
            console.log('running time: ' + time);
        },1000);
    }
    that.reset = function(){
        console.log('clearing timer');
        clearInterval(timer);
    }
    return that;
}(); 
```

并在您需要时运行：

myTimer.set(); myTimer.reset();

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T15:49:26.983

每次初始化时清除计时器，这样你所要做的就是再次调用该函数来重置计时器：

```
var timer;

function myTimer(sec) {
    if (timer) clearInterval(timer);
    timer = setInterval(function() { 
        $('#timer').text(sec--);
        if (sec == -1) {
            clearInterval(timer);
            alert('done');
        } 
    }, 1000);
}

$("#knap, #reset").click(function() {
    myTimer(15);
}); 
```

[**小提琴**](http://jsfiddle.net/HEPz8/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T15:59:49.553

你可以像这样重写你的`myTimer()`函数：

```
function myTimer() {
    var sec, timer = null;

    myTimer = function() {
        sec = 15;
        clearInterval( timer );

        timer = setInterval(function() { 
            $('#timer').text(sec--);
            if (sec == -1) {
              clearInterval(timer);
              alert('done');
            } 
        } , 1000);
    };

    myTimer();
} 
```

现在，无论何时调用`myTimer()`，`setInterval`都会重置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T16:10:10.420

这是一种更符合 JS 设计方式的方法（作为那些仍然不知道的人的函数式语言）。与其依赖全局变量，不如使用闭包：

```
$("#knap").click(function start()//named callback to bind && unbind:
{
    $(this).unbind('click');//no need to start when started
    $("#reset").unbind('click').click((function(timer)
    {//timer is in scope thanks to closure
       return function()
       {//resets timer
          clearInterval(timer);
          timer = null;
          $('#knap').click(start);//bind the start again
          //alternatively, you could change the start button to a reset button on click and vice versa
       }
    })(setInterval((function(sec)
       {
           return function()
           {
               $('#timer').text(sec--);
               if (sec === -1)
               {
                   $('#reset').click();//stops interval
                   $('#reset').unbind('click');//no more need for the event
                   alert('done');
               }//here's the interval counter: 15, passed as argument to closure
           })(15),1000)));//set interval returns timer id, passed as argument to closure
}); 
```

现在我承认这是相当混乱的（并且未经测试）但是这样重置事件仅在必要时可用，并且您没有使用任何全局变量。但至关重要的是，这就是 JS 的强大之处：作为第一类对象的函数，将它们作为参数和返回值传递......只是函数疯狂:)

我也设置了一个工作[Fiddle](http://jsfiddle.net/HEPz8/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T21:03:56.243

您也可以使用 jQuery 计时器插件，然后您不需要传递变量。

插件： http: [//archive.plugins.jquery.com/project/timers](http://archive.plugins.jquery.com/project/timers)

插件示例：http: [//blog.agrafix.net/2011/10/javascript-timers-mit-jquery/](http://blog.agrafix.net/2011/10/javascript-timers-mit-jquery/)

# facebook - facebook like 按钮是否具有 i18n 功能？

> ID：11781158
> 
> 赞同：3
> 
> 时间：2012-08-02T15:45:39.850
> 
> 标签：facebook, internationalization, facebook-opengraph

在我的 Rails 应用程序中，我有一个与 facebook 喜欢一起使用的投票功能。

他们是为我支持的任何语言提供动态元 facebook 描述（og：title）的一种方式。

例如，在我的墙上，我希望如果一个英国人点击了投票/点赞按钮，它会写成“我刚刚投票给 XXX”，如果一个法国人点击它，就会写成“Je viens de voter pour XXX”

我看过这个文档：[https](https://developers.facebook.com/docs/internationalization/) ://developers.facebook.com/docs/internationalization/但是，我真的不明白如何实现它。

我在想 facebook 使用了某种缓存，所以它只解析 og:title 一次（所以用一种特定的语言），但我看到了一些具有该功能的网站......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:50:56.883

您需要在标准 fb js 中更改 js.src：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = '<%= fb_source_url(your_app_id) %>';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

例如，将此方法添加到 application_helper.rb：

```
 def localte_to_uri
    I18n.locale.to_s.gsub('-','_')
  end

  def fb_source_url(app_id)
    "http://connect.facebook.net/#{localte_to_uri}/all.js#xfbml=1&appId=#{app_id}&version=v2.0"
  end 
```

如果我没有误认为法国，它是这样的：

```
"//connect.facebook.net/fr_FR/all.js#xfbml=1" 
```

# java - GWT - 打印一棵树

> ID：11781164
> 
> 赞同：3
> 
> 时间：2012-08-02T15:46:03.903
> 
> 标签：java, gwt

我编写了以下代码来打印一棵树：

```
package test.com.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.event.logical.shared.SelectionEvent;
import com.google.gwt.event.logical.shared.SelectionHandler;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.Tree;
import com.google.gwt.user.client.ui.TreeItem;
import com.google.gwt.user.client.ui.VerticalPanel;

/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class TestGwt implements EntryPoint 
{
    public static String bc="";

    public void onModuleLoad() 
    {
        VerticalPanel v = new VerticalPanel();
        TreeItem a = new TreeItem( "A" );
        TreeItem b = new TreeItem( "B" );
        TreeItem c = new TreeItem( "C" );

        TreeItem d = new TreeItem( "D" );

        TreeItem f1 = new TreeItem( "f1" );
        TreeItem f11 = new TreeItem( "f11" );
        TreeItem f12 = new TreeItem( "f12" );
        d.addItem( f1 );
        f1.addItem( f11 );
        f1.addItem( f12 );

        final Tree t = new Tree();
        t.addItem( a );
        t.addItem( b );
        t.addItem( c );
        t.addItem( d );

        t.addSelectionHandler(new SelectionHandler<TreeItem>() 
        {
            @Override
            public void onSelection(SelectionEvent<TreeItem> event) 
            {           
                TreeItem selectedItem= event.getSelectedItem();
                if(selectedItem != null)
                {
                    System.out.println("Selected Item: "+ selectedItem.getText());
                    TreeItem parentItem  = event.getSelectedItem().getParentItem();
                    t.setSelectedItem(parentItem);
                    parentItem=parentItem.getParentItem();

                }

            }
        });

        v.add(t);
        // Add it to the root panel.
        RootPanel.get().add(v);
    }
} 
```

节点 D 有子节点 f1。f1 有子节点 f11 和 f12。如果用户选择 c f12，它应该打印：

D>f1>f12。

当所选项目变为 D 时，我的代码会崩溃，因为 D 没有父项。如何改进此代码，以便能够根据用户选择的节点带来 bradcrumb？

有什么方法可以检查所选节点是否是根节点？

非常感谢。-玛丽亚

更新的工作代码：

```
package test.com.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.event.logical.shared.SelectionEvent;
import com.google.gwt.event.logical.shared.SelectionHandler;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.Tree;
import com.google.gwt.user.client.ui.TreeItem;
import com.google.gwt.user.client.ui.VerticalPanel;

/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class TestGwt implements EntryPoint 
{
    public static String bc="";

    public void onModuleLoad() 
    {
        VerticalPanel v = new VerticalPanel();
        TreeItem a = new TreeItem( "A" );
        TreeItem b = new TreeItem( "B" );
        TreeItem c = new TreeItem( "C" );

        TreeItem d = new TreeItem( "D" );

        TreeItem f1 = new TreeItem( "f1" );
        TreeItem f11 = new TreeItem( "f11" );
        TreeItem f12 = new TreeItem( "f12" );
        d.addItem( f1 );
        f1.addItem( f11 );
        f1.addItem( f12 );

        final Tree t = new Tree();
        t.addItem( a );
        t.addItem( b );
        t.addItem( c );
        t.addItem( d );

        t.addSelectionHandler(new SelectionHandler<TreeItem>() 
        {
            @Override
            public void onSelection(SelectionEvent<TreeItem> event) 
            {           
                TreeItem pItem = event.getSelectedItem().getParentItem();
                if(pItem == null)
                {
                    bc+=" > "+event.getSelectedItem().getText();
                }
                else
                {
                    TreeItem selectedItem= event.getSelectedItem();
                    if(selectedItem != null)
                    {
                        bc+=" > "+ selectedItem.getText();
                        TreeItem parentItem  = event.getSelectedItem().getParentItem();
                        t.setSelectedItem(parentItem);
                        parentItem=parentItem.getParentItem();

                    }
                }               
            }
        });
        System.out.println(bc);
        v.add(t);
        // Add it to the root panel.
        RootPanel.get().add(v);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:49:46.773

你有这个代码：

```
System.out.println("Selected Item: "+ selectedItem.getText());
TreeItem parentItem  = event.getSelectedItem().getParentItem();
t.setSelectedItem(parentItem);
parentItem=parentItem.getParentItem(); 
```

您需要检查是否`parentItem`为空。如果它为空，那么它就是根。像这样的东西：

```
TreeItem parentItem = event.getSelectedItem().getParentItem();
if (parentItem == null) {
    // then it is the root; special root-handling instructions would go here
} else {
    // then it is NOT the root
} 
```

# smartgit - 如何在 SmartGit 中暂存一行？

> ID：11781175
> 
> 赞同：14
> 
> 时间：2012-08-02T15:46:36.763
> 
> 标签：smartgit

我想在 SmartGit 中上演一行，而不是整个 diff hunk。

例如：

```
old line
new line but leave unstaged
new line, just stage this
new line but leave unstaged
new line but leave unstaged
old line 
```

这对于 OS X 上的 GitX 是可行的，但在 SmartGit 上，我似乎能够上演的最小单元是一整套差异线。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T15:52:36.913

使用**Local|Index Editor**：您可以在此处随意编辑索引文件内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-18T03:43:57.663

从 4.5 及更高版本开始，您只需选择文件，然后在更改视图中，右键单击行 > Stage Hunk (OR) Stage Inner-line Changes（如果您右键单击突出显示的更改）。

# php - Bcrypt 安全性

> ID：11781176
> 
> 赞同：6
> 
> 时间：2012-08-02T15:46:38.957
> 
> 标签：php, bcrypt

我知道这是一个“过度询问”的话题，`Bcrypt`但是我对它的安全性有一些担忧。

我一直在使用`sha512($password.$salt)`，然后寻找更好的解决方案并遇到了`Bcrypt`.

我担心的是，在阅读它时，它表示轮`$02$`数`$rounds$.$salt.$hash`（

我的问题是：这不是不安全吗？显示使用的轮数，盐分清楚可用。因为攻击者可以说“好的，我需要 2 轮，盐是 123salt，这就是哈希”，对吧？

我明白在阅读时，安全并不是“全部”，而是破解密码需要多长时间，这就是 Bcrypt 的好处，它很慢。

谁能澄清我的误解/误解？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T15:48:25.203

## bcrypt 通过不可简化的复杂性来实现安全性；不是默默无闻的安全。

加盐的目的是防止攻击者为多个用户重复使用计算。
将其交给攻击者并没有错。

同样，即使攻击者知道您使用了多少轮，也不会花费那么多时间（假设您使用的轮数相当多）。
使用多轮的意义不是攻击者不知道要使用多少轮；这是每一轮迫使攻击需要更长的时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T15:57:15.110

盐与散列一起存储，因为每个散列使用**不同的盐**，这与您之前使用 sha512 的方法不同，在该方法中，您对每个散列使用相同的盐。

使用这种方法，单个彩虹表仅适用于单个密码，而如果对每个哈希使用相同的盐，则单个彩虹表将适用于所有哈希。

工作因子（如您所说：“轮数”）也需要存储，以便可以正确验证散列。是的，你可以把它去掉，但这真的没有坏处。

* * *

bcrypt 被设计为一种密集型算法。计算单个散列的成本很高，并且不可能为具有高工作因子的散列创建查找表。

工作因子被设计为随着技术的进步而改变，因此破解 bcrypt 哈希*总是很困难。*但是您只能在验证密码的过程中升级哈希。

您最终可能会得到一个系统，其中不同的哈希存储了不同的工作负载值，具体取决于哪些已升级，哪些尚未升级。

# c# - GetHostAddresses 不同的错误代码

> ID：11781181
> 
> 赞同：3
> 
> 时间：2012-08-02T15:46:52.950
> 
> 标签：c#, .net, windows, winapi, network-programming

`Dns.GetHostAddresses`我写了一个用于解析主机名的小测试程序。如果我输入了一个不存在的主机名，它会抛出 a`SocketException`并且消息是`No such host is known`.
我喜欢这个，因为错误消息足够小，可以放入我的 UI 中，而且直截了当。

现在我从字面上将代码复制并粘贴到一个更大的项目中，但是这次当我输入与我在测试项目中完全相同的主机名时，它会抛出一个`SocketException`但消息设置为`The requested name is valid, but no data of the requested type was found`

每个程序中的两个堆栈跟踪都是相同的，但第一个错误是`WSAHOST_NOT_FOUND`第二个错误所在的位置`WSANO_DATA`。

我可以只输出自己的错误消息，但我想知道为什么每次都会抛出不同的错误？代码没有区别。

此外，似乎无论我运行每个程序多少次，它们都不断输出相同的错误消息。这不是交替或任何东西。

**==================================================== ==========================**

好吧，我弄清楚了导致问题的原因。
我添加了 Pcap.Net 作为参考，并将其包含在我的项目中，`using PcapDotNet.Core;`
无论如何，在我将其注释掉之后，`Dns.GetHostAddresses`抛出了正确的异常。

如果有人能告诉我为什么它会这样，以及如何解决它，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:32:53.090

`SocketException`a会发生的原因有很多`GetHostAddresses`。在 的情况下`WSA_NODATA`，这意味着在 DNS 中有一个条目；但没有IP地址（即没有A记录）。如果您无法访问 DNS 服务器但数据已缓存，您可能会收到不同的错误。或者，如果 DNS 服务器无法访问且数据未缓存，您可能会收到不同的错误。等等。不幸的是`GetHostAddresses`，将所有这些错误包装在一种异常类型中。如果您想对每种类型的错误执行不同的操作，则必须检查`SocketException`. 如果您只是想检测“它不起作用”，那么您不必检查。但是，很明显，`SocketException`消息因失败而异，所以我不建议只使用`Message`. 更不用说，这将在其他语言版本的 Windows 上被翻译——因此，如果您的应用程序的其余部分是英语，除了这条消息之外，它可能看起来很奇怪。

从技术上讲，它可能有以下错误之一：`WSANOTINITIALIZED`, `WSAENETDOWN`, `WSAHOST_NOT_FOUND`, `WSATRY_AGAIN`, `WSANO_RECOVERY`, `WSANO_DATA`, `WSAEINPROGRESS`,`WSAEFAULT`和`WSAEINTR`. 虽然有些是极不可能的。

我还认为您会收到不同的消息，具体取决于使用的是 IPv6 还是 IPv4。

# javascript - 如何在不与谷歌地图重叠的情况下对标记进行聚类？

> ID：11781183
> 
> 赞同：2
> 
> 时间：2012-08-02T15:46:54.657
> 
> 标签：javascript, html, google-maps, google-maps-api-3, markerclusterer

我目前在我的谷歌地图上聚集了数百个标记。许多标记基于地理编码地址，有时只能解析到城市级别。通常，我最终会得到几百个地址，所有地址都具有相同的纬度，例如在纽约市中心。

我知道谷歌地图中的[标记聚类](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)，但是当所有标记都具有相同的纬度时，您将失去点击每个标记并弹出一个弹出窗口的能力。

当您放大时，如何以这种方式管理这些标记，您仍然可以知道有多少标记，并且仍然单击它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:57:45.263

查看[OverlappingMarkerSpiderfier](https://github.com/jawj/OverlappingMarkerSpiderfier/)

请参阅[这篇](https://stackoverflow.com/questions/9726920/integrating-spiderfier-js-into-markerclusterer-v3-to-explode-multi-markers-with)关于将其与 MarkerClusterer 集成的帖子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:03:16.873

我有一个类似（尽管不完全相同）的问题。

我需要在绘图图中绘制样本点。但我发现了碰撞（来自粗略讲座的某些点的精确重叠）和混叠伪影（由于粗略的讲座，部分重叠与重复一些固定量的位移）。

我决定为所有点引入一些**随机位移**。“噪声”具有正态分布，其方差比样本测量误差的方差小两倍，因此它没有改变，从而为感知样本增加了显着的方差。结果是一个更清晰的图表，更多的信息，更好。

在你的案例中应用这种经验，我会检测到 Lat Long 的精确重叠，对于那些我会添加一些随机的 Lat 和 Long，有效地将点从其原始位置移动一点，从而避免精确的重叠。

# asp.net-mvc - 我将如何编写一个 ActionFilter 来确保每个 Post 操作都使用 AntiForgeryTokens？

> ID：11781191
> 
> 赞同：8
> 
> 时间：2012-08-02T15:47:14.930
> 
> 标签：asp.net-mvc, asp.net-mvc-3, action-filter, antiforgerytoken, httpverbs

我想`AntiForgeryTokens`在每个 HttpPost 操作上使用一个 ActionFilter，该控制器位于一个名为`ControllerBase`该控制器的控制器中，每个其他控制器都继承自该控制器。

我想通过创建一个继承自它的 ActionFilter 来做到这一点，`ValidateAntiForgeryToken`它接受一个参数来告诉它要将自身应用于哪些 HTTP 动词。然后我想应用该过滤器 `ControllerBase`以确保`AntiForgeryToken`检查整个站点上的每个 POST 操作。

我正在考虑使用[这个解决方案](http://weblogs.asp.net/srkirkland/archive/2010/04/14/guarding-against-csrf-attacks-in-asp-net-mvc2.aspx)，但是

*   `AuthorizationContext Constructor (ControllerContext)`是一个过时的构造函数，我不确定如何使用推荐的`AuthorizationContext(ControllerContext controllerContext, ActionDescriptor actionDescriptor)`.

*   ~~默认情况下，它似乎没有使用 AntiForgeryToken，因为我收到以下错误：`A required anti-forgery token was not supplied or was invalid`在每次发布操作之后。~~

**`[HttpPost]`我应该如何重写我的 ActionFilter 以满足当前的非过时标准并在每个动词上正确使用防伪标记？**

~~我自己是否必须在每种形式中都包含防伪令牌（我想我会这样做）？（而不是自动生成 - 不要笑，我很好奇）~~ **更新：**正如评论中指出的那样；是的，这必须对每个表格进行。

这是我的 ControllerBase 中的代码供参考：

```
[UseAntiForgeryTokenOnPostByDefault]
public class ControllerBase : Controller 
{
    [AttributeUsage(AttributeTargets.Method, AllowMultiple = false)]
    public class BypassAntiForgeryTokenAttribute : ActionFilterAttribute
    {
    }

    [AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
    public class UseAntiForgeryTokenOnPostByDefault : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            if (ShouldValidateAntiForgeryTokenManually(filterContext))
            {
                var authorizationContext = new AuthorizationContext(filterContext.Controller.ControllerContext);

                //Use the authorization of the anti forgery token, 
                //which can't be inhereted from because it is sealed
                new ValidateAntiForgeryTokenAttribute().OnAuthorization(authorizationContext);
            }

            base.OnActionExecuting(filterContext);
        }

        /// <summary>
        /// We should validate the anti forgery token manually if the following criteria are met:
        /// 1\. The http method must be POST
        /// 2\. There is not an existing [ValidateAntiForgeryToken] attribute on the action
        /// 3\. There is no [BypassAntiForgeryToken] attribute on the action
        /// </summary>
        private static bool ShouldValidateAntiForgeryTokenManually(ActionExecutingContext filterContext)
        {
            var httpMethod = filterContext.HttpContext.Request.HttpMethod;

            //1\. The http method must be POST
            if (httpMethod != "POST") return false;

            // 2\. There is not an existing anti forgery token attribute on the action
            var antiForgeryAttributes =
                filterContext.ActionDescriptor.GetCustomAttributes(typeof (ValidateAntiForgeryTokenAttribute), false);

            if (antiForgeryAttributes.Length > 0) return false;

            // 3\. There is no [BypassAntiForgeryToken] attribute on the action
            var ignoreAntiForgeryAttributes =
                filterContext.ActionDescriptor.GetCustomAttributes(typeof (BypassAntiForgeryTokenAttribute), false);

            if (ignoreAntiForgeryAttributes.Length > 0) return false;

            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-22T13:33:40.340

我使用了以下方法：

```
public class SkipCSRFCheckAttribute : Attribute
{
}

public class AntiForgeryTokenFilter : IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        if (IsHttpPostRequest(filterContext) && !SkipCsrfCheck(filterContext))
            AntiForgery.Validate();
    }

    private static bool IsHttpPostRequest(AuthorizationContext filterContext)
    {
        return filterContext.RequestContext.HttpContext.Request.HttpMethod == HttpMethod.Post.ToString();
    }

    private static bool SkipCsrfCheck(AuthorizationContext filterContext)
    {
        return filterContext.ActionDescriptor.GetCustomAttributes(typeof (SkipCSRFCheck), false).Any();
    }
} 
```

这使我们能够使用 SkipCSRFCheck 属性逐个禁用它，然后在 Application_Start 中将其注册为全局过滤器：

GlobalFilters.Filters.Add(new AntiForgeryTokenFilter());

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:30:54.340

您不需要实例化任何方法`AuthorizationContext`或调用该`OnAuthorization`方法，只需：

```
if (ShouldValidateAntiForgeryTokenManually(filterContext))
{
    AntiForgery.Validate(filterContext.HttpContext, null);
} 
```

# facebook-graph-api - 从地理定位的 Facebook 页面获取所有帖子

> ID：11781195
> 
> 赞同：1
> 
> 时间：2012-08-02T15:47:27.480
> 
> 标签：facebook-graph-api, geolocation

我想从针对帖子的 facebook 页面获取所有帖子。

使用图形 API，我只能获得针对我的语言和国家/地区的帖子。是否有任何特殊调用 Graph API 来获取 facebook 页面的所有帖子？

谢谢

# tridion - 如何在组件窗口上启用按钮

> ID：11781198
> 
> 赞同：0
> 
> 时间：2012-08-02T15:47:57.917
> 
> 标签：tridion, tridion-2011

我创建了一个按钮，只有在打开组件时才能在工具栏中看到它。我已经编写了相同的配置和 js 文件，但问题是这个按钮显示为禁用。按钮在那里，但未启用。请帮助我，我怎样才能启用它。

**已编辑**

```
Type.registerNamespace("Extensions.Commands");

Extensions.Commands.Button = function Extensions.Commands$Button(element) {
Type.enableInterface(this, "Extensions.Commands.Button");
this.addInterface("Tridion.Cme.Command", [element]);
this.addInterface("Tridion.Cme.FaCommand", [element]);
alert('inside the pageload');
}; 

Extensions.Commands.Button.prototype._isAvailable = function Button$_isAvailable(target) {
alert('inside the available mode');
if (target.editor.getDisposed()) {
    return false;
}

return true;
};

Extensions.Commands.Button.prototype._isEnabled = function Button$_isEnabled(target) {
alert('inside the enable mode');
if (!Tridion.OO.implementsInterface(target.editor, "Tridion.FormatArea") ||     target.editor.getDisposed()) {
alert('indise if loop');
    return false;
}

return true;
}; 
```

**我的配置文件是这样的**：

```
<resources cache="true">
<cfg:filters/>
<cfg:groups>
  <cfg:group name="Extensions.Commands" >
    <cfg:fileset>          
      <cfg:file type="script">/Popups/PopupReference.js</cfg:file>

    </cfg:fileset>

    <cfg:dependencies>
      <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
      <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
    </cfg:dependencies>
  </cfg:group>

   <cfg:group name="Extensions.Commands.Button.Commands"  merger="Tridion.Web.UI.Core.Configuration.Resources.CommandGroupProcessor"   include="byreference" merge="release">
    <cfg:fileset>
      <cfg:file type="script">/Commands/Button.js</cfg:file>

      <cfg:file type="reference">Extensions.Button.CommandSet</cfg:file>
    </cfg:fileset>

    <cfg:dependencies>
      <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
      <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
    </cfg:dependencies>
  </cfg:group> 

  </cfg:groups>
 </resources>
 <definitionfiles/>
 <extensions>
   <ext:editorextensions>
  <ext:editorextension target="CME">
    <ext:editurls/>
    <ext:listdefinitions/>
    <ext:taskbars/>
    <ext:commands/>
    <ext:commandextensions/>
    <ext:contextmenus/>
    <ext:lists/>
    <ext:tabpages/>
    <ext:toolbars/>
    <ext:ribbontoolbars>
      <ext:add>
        <!-- RIBBON TAB -->
 <!-- GROUPS -->
        <ext:extension assignid="ExtensionGroup" pageid="FormatPage" name="ExtensionsName">
          <ext:group/>
          <ext:apply>
            <ext:view name="ComponentView">
              <ext:control id="ItemToolbar"/>
            </ext:view>
          </ext:apply>
        </ext:extension>

        <!-- BUTTONS -->
        <ext:extension pageid="FormatPage" groupid="ExtensionGroup" name="Button" assignid="Button">
          <ext:command>Button</ext:command>
          <ext:title>Button</ext:title>
          <ext:dependencies>
            <cfg:dependency>Extensions.Commands.Button</cfg:dependency>
          </ext:dependencies>
          <ext:apply>
            <ext:view name="ComponentView">
              <ext:control id="ItemToolbar"/>
            </ext:view>
          </ext:apply>
        </ext:extension>
      </ext:add>
    </ext:ribbontoolbars>
  </ext:editorextension>
  </ext:editorextensions>
  <ext:dataextenders/>
</extensions>            
<commands>
 <cfg:commandset id="Extensions.Commands.Button.CommandSet">
  <cfg:command name="Button" implementation="Extensions.Commands.Button"/>
  <cfg:dependencies>
<cfg:dependency>Extensions.Commands.Button</cfg:dependency>
    <cfg:dependency />
  </cfg:dependencies>
 </cfg:commandset>
 </commands>
 <contextmenus/>
 <localization/>
 <settings>
<defaultpage/>
<navigatorurl/>
<editurls/>
<listdefinitions/>
<itemicons/>
<theme>
  <path>Themes</path>
</theme>
<customconfiguration/>
 </settings> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:58:54.763

配置文件中永远不会引用资源组“Extensions.Commands.Button.Commands”。除此之外，在 Button 扩展组中，您还依赖于配置文件中不存在的“Extensions.Commands.Button”组。所以建议清理配置文件，删除不需要的依赖项等。

PS 没有必要同时继承“Tridion.Cme.Command”和“Tridion.Cme.FaCommand”，因为最后一个已经继承了第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T19:50:24.763

正如弗兰克所说，我会检查 _IsEnabled。当此方法返回 true 时，按钮将在 SDL Tridion GUI 中启用

我将通过以下方式进行调试（注意：我的 JS 调试有点老派 :)）

```
RTFExtensions.Commands.Button.prototype._isEnabled = function Customtags$_isEnabled(target) {
if (!Tridion.OO.implementsInterface(target.editor, "Tridion.FormatArea") ||  target.editor.getDisposed()) {
    return false;
} 
```

通过以下方式：

*   检查 firebug 是否有任何 JS 错误
*   在 _isEnabled 中放置警报以查看是否正在输入
*   在 IF 语句中放置一个警报，以查看是否始终输入

一旦你让它工作，我很想知道出了什么问题，也许你可以在这里提供解决方案？

# spring - spring和mybatis配置中注入bean

> ID：11781202
> 
> 赞同：1
> 
> 时间：2012-08-02T15:48:11.787
> 
> 标签：spring, ibatis, mybatis

我正在尝试使用 spring 3 配置 mybatis。我收到以下错误

```
 Error creating bean with name 'loginController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'userMapper' is defined 
```

对于 UserMapper 接口，我已经这样做了。

```
@Service("userMapper")
@Transactional
public interface UserMapper {

 // methods here

} 
```

我的控制器类是

```
@Controller
@RequestMapping("/")
 public class LoginController
 {
static final Logger logger = Logger.getLogger(LoginController.class);

@Resource(name = "userMapper")
private UserMapper userMapper;

@RequestMapping("/login")
public ModelAndView login(@ModelAttribute User userBean){

    return new ModelAndView("login", "userBean", userBean); 

}

} 
```

我的 spring-servelet.xml 是

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<!-- Enable annotation driven controllers, validation etc... -->
<mvc:annotation-driven />

<context:component-scan
    base-package="com.mycom.myproject" />

<mvc:resources mapping="/resources/**" location="/resources/" />

<bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost/mydatabase"/>
    <property name="username" value="root"/>
    <property name="password" value="root"/>
</bean>

<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="com.mycom.mydatabase.db.mybatis.sqlmap" />
</bean> 

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

那么，我如何在此处注入依赖项并可以访问我的数据库方法。如果有任何不清楚的地方，请现在告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T14:32:12.270

在您的 UserMapper 界面中，写下如下 -

```
 public interface UserMapper {

//for example, saveUser will save data in your table taking User as bean
public void saveUser(User user);
} 
```

然后维护一个 UserMapper.xml 文件，如下所示 -

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.puneet.persistance.UserMapper">  
<insert id="saveUser" parameterType="com.puneet.spring3.beans.User">
        INSERT INTO USER (username,password) 
        VALUES (#{username},#{password})
    </insert>
</mapper> 
```

在上面的 xml 文件中，我们提到了查询和您作为参考的接口。

在您的 LoginController 中，调用您的方法，如下所示 -

```
@RequestMapping(method=RequestMethod.POST)
    public ModelAndView add(@ModelAttribute(value="user")User user,BindingResult result){

        ModelAndView mv = new ModelAndView("yourjpspage");
        if(!result.hasErrors()){
            userMapper.saveUser(user);
            user = new User();

        }
        return mv;
    } 
```

最后维护 spring-servelet.xml 文件中的所有配置。

希望最重要的是会帮助你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T15:54:21.120

`UserMapper`是一个接口，因此不能注入。您需要在 XML 配置中配置实现。

# php - 如何使用该函数返回选项值

> ID：11781207
> 
> 赞同：0
> 
> 时间：2012-08-02T15:48:31.670
> 
> 标签：php, class

我似乎无法让它返回我想要的选项值。

我希望它运行的 sql 查询是：

```
SELECT `profile_value` FROM `login_profiles` WHERE `pfield_id` = 1 AND `user_id` = 1 LIMIT 1 
```

我试过这个

```
<?php $profile->getOption('1', false, true, '1'); ?> 
```

和没有引号的 id 一样，但它没有用。

```
/**
 * Retrieves an option value based on option name.
 *
 * @param     string    $option    Name of option to retrieve.
 * @param     bool      $check     Whether the option is a checkbox.
 * @param     bool      $profile   Whether to return a profile field, or an admin setting.
 * @param     int       $id        Required if profile is true; the user_id of a user.
 * @return    string    The option value.
 */
public function getOption($option, $check = false, $profile = false, $id = '') {

    if (empty($option)) return false;

    $option = trim($option);

    if ( $profile ) {
        $params = array(
            ':option' => $option,
            ':id'     => $id
        );
        $sql = "SELECT `profile_value` FROM `login_profiles` WHERE `pfield_id` = :option AND `user_id` = :id LIMIT 1;";
    } else {
        $params = array( ':option' => $option );
        $sql = "SELECT `option_value` FROM `login_settings` WHERE `option_name` = :option LIMIT 1;";
    }

    $stmt = $this->query($sql, $params);

    if(!$stmt) return false;

    $result = $stmt->fetch(PDO::FETCH_NUM);
    $result = $result ? $result[0] : false;

    if($check)
        $result = !empty($result) ? 'checked="checked"' : '';

    return $result;

} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:53:42.083

提供的代码不应该做任何事情：

```
<?php $profile->getOption('1', false, true, '1'); ?> 
```

很难猜测，*因为我似乎无法让它返回我想要的选项值*，但我看到你返回一个 HTML 属性，所以你可能想要做的是

```
<?php echo $profile->getOption('1', false, true, '1'); ?> 
```

# entity-framework - 如果我打算将它们与存储库模式一起使用，我是否会删除实体框架代码优先模型中引用的实体属性

> ID：11781208
> 
> 赞同：0
> 
> 时间：2012-08-02T15:48:32.817
> 
> 标签：entity-framework, ef-code-first, repository-pattern

我使用 Visual Studio Entity Framework PowerTools 对现有数据库的 Code First 模型对象进行逆向工程。我最终得到了这样的结果：

```
namespace PoolVAEFModel.Models
{
    public class Pool
    {
        public Pool()
        {
            this.PoolWaterMetrics = new List<PoolWaterMetric>();
            this.PoolWaterQualities = new List<PoolWaterQuality>();
        }

        public int Id { get; set; }
        public string Symbol { get; set; }
        public int WaterCapacityMax { get; set; }
        public int WaterCapacityMin { get; set; }
        public int WaterCapacityRegular { get; set; }
        public string WallMaterial { get; set; }
        public bool IsAboveGroundPool { get; set; }
        public string ContactPhone { get; set; }
        public string ContactEmail { get; set; }
        public string SanitationMethod { get; set; }
        public string LocationAddress { get; set; }
        public bool HasHotTop { get; set; }
        public bool JustHotTop { get; set; }
        public int WaterCapacityUnitId { get; set; }
        public double WaterDepthMax { get; set; }
        public double WaterDepthMin { get; set; }
        public int WaterDepthUnitId { get; set; }
        public virtual Unit Unit { get; set; }
        public virtual Unit Unit1 { get; set; }
        public virtual ICollection<PoolWaterMetric> PoolWaterMetrics { get; set; }
        public virtual ICollection<PoolWaterQuality> PoolWaterQualities { get; set; }
    }
} 
```

我想使用存储库模式来抽象数据库层，并且想知道如何处理引用的实体，例如

```
 public virtual ICollection<PoolWaterMetric> PoolWaterMetrics { get; set; }
    public virtual ICollection<PoolWaterQuality> PoolWaterQualities { get; set; } 
```

我只是从我的类文件中删除并保留简单的属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:15:42.993

Code first 电动工具创建了这些导航集合，因为您在数据库中的这些表之间具有映射的外键关系。如果您不打算在代码中使用导航属性，请随意删除，它不会造成任何伤害。

# xcode - xcode找不到咖啡编译器？

> ID：11781209
> 
> 赞同：3
> 
> 时间：2012-08-02T15:48:36.407
> 
> 标签：xcode, node.js, cordova, coffeescript

我曾经使用 ubuntu 并且对 mac 和 xcode 很陌生。我正在尝试在我的 mac air 上构建 cordova-true-native-ios (https://github.com/mschulkind/cordova-true-native-ios)。但是在尝试运行示例时出现错误消息：

scons：读取 SConscript 文件 ...
scons：完成读取 SConscript 文件。
scons：构建目标...
PATH=/opt/local/bin:/usr/local/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin :/sbin coffee -c -p CoffeeScripts/action_sheet_demo.coffee > www/action_sheet_demo.js
sh: coffee: command not found
scons: *** [www/action_sheet_demo.js] 错误 127
scons: 构建因错误而终止。

在我看来 /bin/bash 在 scons 中找不到咖啡编译器。但是我从 nvm 安装了 nodejs，然后使用 npm 安装了 coffee-script 模块。我还在我的 .bash_profile 中添加了以下内容：

. ~/.nvm/nvm.sh
nvm 使用 v0.8.4

所以我在终端内调用咖啡没有问题。但我想我错过了一些 xcode 的链接或命令。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T15:53:59.557

难道是你没有在全球安装咖啡脚本

尝试：

```
npm install -g coffee-script 
```

-g 在这里你想要并且需要它很重要。

打开一个终端并测试您是否安装了咖啡箱并且可以在您的路径中访问。咖啡应该在 /usr/local/bin/ 中，它似乎已经在你的路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:31:23.073

好吧，我只是自己解决了这个问题。在 scons 的脚本中，我将“coffee”修改为我机器上的特定“coffee”路径。原来大楼通行证。

# c# - C# Open XML 2.0 NumberFormatId 范围

> ID：11781210
> 
> 赞同：19
> 
> 时间：2012-08-02T15:48:38.147
> 
> 标签：c#, openxml, openxml-sdk

使用 c# 使用 Open XML 2.0 来解析大型 excel 文件。我遇到的问题是我正在解析的单元格没有 DataType 我然后检查 NumberFormatId 以确定它是十进制、数字还是日期。我正在寻找数字/小数与日期的确切 NumberFormatId 范围。它们似乎无处不在，一些数字/小数的格式为 189,212,214,305，日期的值为 185、194、278 等。有谁知道规范是否定义了这些范围？

**已编辑 - 更多信息**

下面是 xl 文件夹中 style.xml 文件中数字格式 194 的示例。

excel表格来自世界不同地区，所以我认为数字格式不同，但它们是否重叠？numFmtId 194 会不是不同文化设置的日期吗？

下面是我如何将 c.CellValues（如“40574”）转换为日期，但问题是我如何知道“40574”是日期而不是数字？

```
 DateTime.FromOADate(Convert.ToDouble(c.CellValue.Text)); 
```

目前，我通过检查是否没有 DataType 而不是检查 CellFormat 来做到这一点，但是当我的检查中没有一些 NumberFormatId 时会出现问题。

```
 private Object FormatCellValue(Cell c, SharedStringTable ssTable, CellFormats cellFormats)
            {
                if (c.CellValue != null)
                {
                    // If there is no data type, this must be a string that has been formatted as a number
                    if (c.DataType == null)
                    {
                        CellFormat cf;
                        if (c.StyleIndex == null)
                        {
                            cf = cellFormats.Descendants<CellFormat>().ElementAt<CellFormat>(0);
                        }
                        else
                        {
                            cf = cellFormats.Descendants<CellFormat>().ElementAt<CellFormat>(Convert.ToInt32(c.StyleIndex.Value));
                        }

                        if ((cf.NumberFormatId >= 14 && cf.NumberFormatId <= 22) ||
                            (cf.NumberFormatId >= 165 && cf.NumberFormatId <= 180) || 
                                cf.NumberFormatId == 278 || cf.NumberFormatId == 185 || cf.NumberFormatId == 196 || 
                                cf.NumberFormatId == 217 || cf.NumberFormatId == 326) // Dates
                        {

                            try
                            {

                                DateTime dt;
                                dt = DateTime.FromOADate(Convert.ToDouble(c.CellValue.Text));

...CODE CONTINUES 
```

**编辑**

在我更新的帖子中，我忘记发布在 style.xml 文件中找到的值：

```
<numFmt numFmtId="323" formatCode="mmm/yy;@"/> 
```

因此，我的问题是如何获取 formatCode 并对其进行解析以确定它是否是日期？

下面是 numberformat 323 的即时调试窗口的输出

```
{DocumentFormat.OpenXml.Spreadsheet.CellFormat}
    base {DocumentFormat.OpenXml.OpenXmlCompositeElement}: {DocumentFormat.OpenXml.Spreadsheet.CellFormat}
    Alignment: {DocumentFormat.OpenXml.Spreadsheet.Alignment}
    ApplyAlignment: "1"
    ApplyBorder: "1"
    ApplyFill: "1"
    ApplyFont: "1"
    ApplyNumberFormat: "1"
    ApplyProtection: "1"
    BorderId: "64"
    ExtensionList: null
    FillId: "0"
    FontId: "83"
    FormatId: "37992"
    LocalName: "xf"
    NumberFormatId: "323"
    PivotButton: null
    Protection: {DocumentFormat.OpenXml.Spreadsheet.Protection}
    QuotePrefix: "1" 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-14T17:47:30.133

**格式 ID 值列表**

以下是格式选项列表（[来源](https://github.com/closedxml/closedxml/wiki/NumberFormatId-Lookup-Table)）

```
ID  Format Code
0   General
1   0
2   0.00
3   #,##0
4   #,##0.00
9   0%
10  0.00%
11  0.00E+00
12  # ?/?
13  # ??/??
14  d/m/yyyy
15  d-mmm-yy
16  d-mmm
17  mmm-yy
18  h:mm tt
19  h:mm:ss tt
20  H:mm
21  H:mm:ss
22  m/d/yyyy H:mm
37  #,##0 ;(#,##0)
38  #,##0 ;[Red](#,##0)
39  #,##0.00;(#,##0.00)
40  #,##0.00;[Red](#,##0.00)
45  mm:ss
46  [h]:mm:ss
47  mmss.0
48  ##0.0E+0
49  @ 
```

但是，这些列表仅指定了几种格式。根据这篇文章：[从 OpenXml Excel 文件](https://stackoverflow.com/questions/4655565/reading-dates-from-openxml-excel-files)中读取日期，内置 ID 值小于 164 的格式。您还可以在那里找到更长的格式列表。

**检查 xlsx 文件中的格式 ID 值**

对于具有更大 ID 值的格式，您可以在文件本身中找到它们的定义。为了查看它们，您应该使用 zip 存档浏览器打开它并在***xl***目录中找到***styles.xml***文件。[或者，使用Open XML SDK 2.0 Productivity Tools](http://www.microsoft.com/en-us/download/details.aspx?id=5124)打开此 xlsx 文件并导航到该文件的***/xl/styles.xml/x:StyleSheet***节点。

 **在该部分中，您应该能够看到文档中定义的格式以及分配给它们的 ID 值。具有格式的部分应类似于以下内容：

```
...
<x:numFmts count="1">
    <x:numFmt numFmtId="166" formatCode="yy/mm/dd;@" />
</x:numFmts>
... 
```

查看此处保存的格式，似乎 id vlaues 可以特定于*xlsx*文件，因此可能相同的 ID 值可用于在两个不同的 xlsx 文件中定义不同的格式。但是，对于内置格式，它们是预定义的，因此在所有文件中应该是相同的。

如果您在文件中查找此格式或其他信息方面需要任何帮助，请告诉我。

**编辑**

您还可以在本文档中找到有关数字格式的更多信息：http: [//msdn.microsoft.com/en-us/library/documentformat.openxml.spreadsheet.numberingformat.aspx](http://msdn.microsoft.com/en-us/library/documentformat.openxml.spreadsheet.numberingformat.aspx)。

**编辑二**

您可以使用此代码获取包含*xlsx*文件中定义的所有格式的字典：

```
private Dictionary<uint, String> BuildFormatMappingsFromXlsx(String fileName)
{
    Dictionary<uint, String> formatMappings = new Dictionary<uint, String>();

    using (SpreadsheetDocument document = SpreadsheetDocument.Open(fileName, true))
    {
        var stylePart = document.WorkbookPart.WorkbookStylesPart;

        var numFormatsParentNodes = stylePart.Stylesheet.ChildElements.OfType<NumberingFormats>();

        foreach (var numFormatParentNode in numFormatsParentNodes)
        {
            var formatNodes = numFormatParentNode.ChildElements.OfType<NumberingFormat>();
            foreach (var formatNode in formatNodes)
            {
                formatMappings.Add(formatNode.NumberFormatId.Value, formatNode.FormatCode);
            }
        }
    }

    return formatMappings;
} 
```

如果您想检查其中任何一个是否是日期，我想一种简单的方法是验证格式代码（由我发布的方法创建的字典中的值）是否包含***mm***和***yy***子字符串。**

# jquery - 不要设置 sortAppend 样式

> ID：11781211
> 
> 赞同：0
> 
> 时间：2012-08-02T15:48:43.607
> 
> 标签：jquery, tablesorter

我正在使用[http://mottie.github.com/tablesorter/docs/index.html](http://mottie.github.com/tablesorter/docs/index.html)对表格进行排序并使用 sortAppend。问题是 sortAppend 列也会获取 css。

有没有办法不将 css Asc 或 Desc 应用于通过 sortAppend 传递的那些列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T23:01:09.387

您可以绑定到`sortEnd`事件并删除排序的类名（[demo](http://jsfiddle.net/Mottie/eY8uH/93/)）

```
$('table').bind('sortEnd', function(e, ts) {
    var sortAppendColumn = ts.config.sortAppend[0][0];
    $(ts.config.headerList).eq(sortAppendColumn).removeClass('tablesorter-headerSortUp tablesorter-headerSortDown');
});​ 
```

请注意，当前版本中有一个[sortAppend 错误](https://github.com/Mottie/tablesorter/issues/115)，我将在 2.4 版中修复它，即将推出。

# python - Python如何从循环中打印单独的计数器/将它们加在一起？

> ID：11781212
> 
> 赞同：0
> 
> 时间：2012-08-02T15:48:45.400
> 
> 标签：python, list, dictionary, counter

所以我有一本字典

```
d = {'a': [4,'Adam', 2, ‘Bob’, 3], 'b': [3,'John', 4, ‘Bill’], 'c': [4,'Adam', 3, 4, ‘John’], 'd': [4,'Bill', ‘Joe’, 3], 'e': [4,'Bob', ‘Bob’, 5, 8, 10], 'f': [4, 'Joe'], 'g': [4, 'Bill', 4, ‘Joe’, 1]} 
```

我想从中返回名称的计数，例如

```
Adam: 2
Bill: 3
John: 2
Bob: 3
Joe: 3 
```

我尝试通过此功能使用集合计数器：

```
x = 0
for vals in d.itervalues(): 
    while x<len(vals):           
        if type(vals[x]) == str:
            print Counter([vals[x]])
        x = x+1 
```

哪个返回

```
Counter({'Adam': 1})
Counter({'Bob': 1})
Counter({'Adam': 1})
Counter({'John': 1})
Counter({'John': 1})
Counter({'Bill': 1})
Counter({'Bob': 1})
Counter({'Bob': 1})
Counter({'Bill': 1})
Counter({'Joe': 1})
Counter({'Bill': 1})
Counter({'Joe': 1})
Counter({'Joe': 1}) 
```

但这不是我想要的结果。我只需要添加计数器吗？我该怎么做？我知道计数器类有一个加/减函数，但我尝试的方法不起作用。

我也尝试过这样的方法来为每个变体打印出不同的计数器。

```
'c%s'%(x) 
```

这将为每个计数器设置 c1、c2、c3，然后我可以将它们与 c1 + c2 + c3 相加以获得我想要的结果。但是，我无法将这些不同的计数器列表打印出来。

除此之外，一旦它确实返回结果，它总是返回“Counter({ *_* _})”。我将如何删除该部分或仅打印名称并单独计数？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:52:44.963

您正在为要计数的每个项目创建一个新`Counter`实例，您需要一个*实例*来计算所有项目：

```
from collections import Counter
counter = Counter(s for v in d.itervalues() for s in v if isinstance(s, str)) 
```

这导致

```
Counter({'Bob': 3, 'Bill': 3, 'Joe': 3, 'John': 2, 'Adam': 2}) 
```

请注意，如果可能，您通常应该避免出现在字典值中的那种异构列表。

# mule - 将“choice”的“when”部分中的消息发送到“choice”之后的下一个处理器

> ID：11781213
> 
> 赞同：0
> 
> 时间：2012-08-02T15:48:49.377
> 
> 标签：mule

我需要在“选择”的“何时”部分转换消息，然后在“选择”之后将消息发送到下一个处理器。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:54:28.803

只需进行转换，其结果将在选择后用于下一个消息处理器。

# c# - 我可以将语音识别与 C# 集成吗？

> ID：11781218
> 
> 赞同：1
> 
> 时间：2012-08-02T15:49:02.780
> 
> 标签：c#, speech-recognition

我可以将语音识别与 C# 集成吗？我想开发一个可以识别我们方言的应用程序。我仍在收集音频文件以使其独立于扬声器。

1.  我应该使用什么型号？语言还是声学？
2.  你会推荐什么工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:21:51.273

编写语音识别系统是一个非常复杂的话题，已经写了很多关于这个主题的论文。这里有一些不错的介绍性论文：

1.  [http://www.speech-recognition.de/pdf/introSR.pdf](http://www.speech-recognition.de/pdf/introSR.pdf)
2.  [http://www.cs.columbia.edu/~mcollins/6864/slides/asr.pdf](http://www.cs.columbia.edu/~mcollins/6864/slides/asr.pdf)
3.  [http://www.cs.rochester.edu/u/james/CSC248/Lec12.pdf](http://www.cs.rochester.edu/u/james/CSC248/Lec12.pdf)

虽然上述论文涉及光谱建模、特征向量提取、聚类和数据映射的基础知识，但我对此类复杂分类问题的常用方法一直是基于神经网络的。以下是一组处理不同基于 NN 的方法的论文：

1.  [http://www.cslu.ogi.edu/tutordemos/nnet_recog/recog.html](http://www.cslu.ogi.edu/tutordemos/nnet_recog/recog.html)
2.  [http://www.ll.mit.edu/publications/journal/pdf/vol01_no1/1.1.7.neuralnetworks.pdf](http://www.ll.mit.edu/publications/journal/pdf/vol01_no1/1.1.7.neuralnetworks.pdf)
3.  [http://www.ru.lv/~peter/zinatne/ebooks/(Brain%20Study)_Speech%20Recognition%20using%20Neural%20Networks.pdf](http://www.ru.lv/~peter/zinatne/ebooks/(Brain%20Study)_Speech%20Recognition%20using%20Neural%20Networks.pdf)
4.  [http://www.cs.toronto.edu/~ruiyan/csc411/ANNSpeechRecognition.pdf](http://www.cs.toronto.edu/~ruiyan/csc411/ANNSpeechRecognition.pdf)

我建议您从小处着手，逐步构建系统。祝你好运！

只是出于好奇-您需要支持哪种语言*？*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:51:56.543

你试过[微软语音 API](http://msdn.microsoft.com/en-us/library/ee125663%28VS.85%29.aspx)吗？MSDN 包含一个[C# 入门教程](http://msdn.microsoft.com/en-us/library/hh378426.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:53:43.493

你可以试试这篇文章，很不错

[http://www.c-sharpcorner.com/uploadfile/ssrinivas/speeechrecognitionusingcsharp11222005054918am/speeechrecognitionusingcsharp.aspx](http://www.c-sharpcorner.com/uploadfile/ssrinivas/speeechrecognitionusingcsharp11222005054918am/speeechrecognitionusingcsharp.aspx)

# c++ - Trivial Destructibility and Necessity of Calling Destructor

> ID：11781221
> 
> 赞同：6
> 
> 时间：2012-08-02T15:49:25.853
> 
> 标签：c++, memory, c++11, destructor, typetraits

Suppose there exists a type `T` such that `std::is_trivially_destructable<T>::value == true`, and suppose further that `T` is the value type of some vector class. When the vector's destructor is called, or the vector is assigned to another vector, it must destroy and deallocate its current storage. As `T` is trivially destructable, is it necessary that I call `T`'s destructor?

Thanks for your help!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T15:52:20.597

According to the C++ Standard (section 3.8), you can end an object's lifetime by deallocating or reusing its storage. There's no need to call a destructor that does nothing. On the other hand, letting the compiler optimize away an empty destructor usually results in cleaner and simpler code. Only if you can save substantial additional work, such as iterating through the collection, would you want to special-case trivial destructors.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T16:20:28.743

libstdc++ (the standard library the gcc uses by default) applies [precisely this optimisation](http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01511_source.html#l00097):

```
 117   /**
  118    * Destroy a range of objects.  If the value_type of the object has
  119    * a trivial destructor, the compiler should optimize all of this
  120    * away, otherwise the objects' destructors must be invoked.
  121    */
  122   template<typename _ForwardIterator>
  123     inline void
  124     _Destroy(_ForwardIterator __first, _ForwardIterator __last)
  125     {
  126       typedef typename iterator_traits<_ForwardIterator>::value_type
  127                        _Value_type;
  128       std::_Destroy_aux<__has_trivial_destructor(_Value_type)>::
  129     __destroy(__first, __last);
  130     } 
```

And the specialisation of `std::_Destroy_aux` for `__has_trivial_destructor(_Value_type) == true`:

```
 109   template<>
  110     struct _Destroy_aux<true>
  111     {
  112       template<typename _ForwardIterator>
  113         static void
  114         __destroy(_ForwardIterator, _ForwardIterator) { }
  115     }; 
```

I would expect that most other well-written standard library implementations do the same.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:53:09.500

No, you don't need to call the destructors explicitly. This will be done by the `vector`'s destructor.

# javascript - 在 Ruby 和 JavaScript 中解析 .net DateTime

> ID：11781223
> 
> 赞同：2
> 
> 时间：2012-08-02T15:49:29.390
> 
> 标签：javascript, ruby-on-rails, ruby, datetime

我正在使用用 .NET 编写的 Web 服务

所以它像这样返回日期`/Date(1101240000000)/`

如何在 ruby​​ 和 js 中解析这种日期格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:54:36.230

你需要告诉我们这个数字是什么意思。现在是[Unix 时间](http://en.wikipedia.org/wiki/Unix_time)吗？如果是：

**红宝石：（**
`Time.at(1240915075)` 时间[.at](http://www.ruby-doc.org/core/classes/Time.html#M000334)）

`DateTime.strptime("1318996912",'%s')`([日期时间.strptime](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html) )

**JS：**

```
var date = new Date(unix_timestamp*1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T05:08:31.340

我在自己的代码库中遇到了这个问题，并对该日期格式做了一些研究。它基本上只是一个带有时区的 UNIX 日期，但日期以自纪元以​​来的*毫秒数而不是通常的秒数表示。*

我在 Ruby 中的解决方案是使用正则表达式从该日期字符串中提取日期和时区，将日期的数字表示除以 1000，然后只使用 strptime：

```
def date_from_asp_net(asp_net_date)
  date_pattern = /\/Date\((-?\d+)(\+\d+)?\)\//
  _, date, timezone = *date_pattern.match(asp_net_date)
  date = (date.to_i / 1000).to_s
  DateTime.strptime(date + timezone, '%s%z')
end 
```

您可能可以从中派生出一个 JavaScript 解决方案。

# r - 使用ggplot堆栈图根据总值放置一条线性线

> ID：11781226
> 
> 赞同：1
> 
> 时间：2012-08-02T15:49:34.063
> 
> 标签：r, ggplot2

我再次问这个问题，我之前的问题没有受到任何打击。也许我问错了。这是我的数据框：

```
 Date     Server  HardDisk 
1 2010-01-30 server1       100 
2 2010-02-28 Server1       400   
3 2010-03-30 Server1       300 
4 2010-01-30 Server2       200 
5 2010-02-28 Server2       500   
6 2010-03-30 Server2       300 
```

我想做的是基于服务器创建一个堆栈栏（每个服务器都应该基于日期堆栈）。我可以轻松做到这一点。我还喜欢根据 Date 的总值使用 geom_smooth() 添加一条线性线。

我可以像这样创建堆栈图：

```
ggplot(x, aes(Date, HardDisk) +      geom_bar(aes(fill=Server), stat="identity",  position="stack") +      theme_bw() 
```

我将如何在此堆栈图表之上添加 geom_smooth() 。Geom_smooth() 应基于每个日期的总值：

```
Date          Hardisk
2010-01-30     300
2010-02-28     900
2010-03-30     600 
```

有任何想法吗？

# twitter - 如何检查是否有人转发了推文

> ID：11781228
> 
> 赞同：2
> 
> 时间：2012-08-02T15:49:41.240
> 
> 标签：twitter

我需要检查用户是否确实转发了我要求他转发的推文。用户已经将他的 Twitter 帐户与我的应用程序连接起来。

为了检查用户是否转发了推文，我使用了 api 调用[http://api.twitter.com/1/statuses/](http://api.twitter.com/1/statuses/) {id}/retweeted_by.json，它返回前 100 个转发了带有 id 的推文的用户{ID}。

问题是我必须遍历 100 个用户，而给定的用户甚至可能不在结果中，所以我必须再次调用 api 才能获得下 100 个用户。这很昂贵，我想知道是否有一个 api 调用可以在一次调用中回答我这个问题，并得到一个结果。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:19:23.483

尝试检查用户的提要是否有转推。

# apache - 如何 301 将多个前导斜杠 (///file.txt) 重定向到 (/file.txt)？

> ID：11781237
> 
> 赞同：1
> 
> 时间：2012-08-02T15:50:18.867
> 
> 标签：apache, mod-rewrite, configuration, rewrite, apache-config

我将我的 apache conf 设置为在 .txt 文件中显示 php 生成的文本，如下所示：

```
Alias /file.txt /var/www/domain.com/html/file.php 
```

问题是这现在适用于任意数量的前导斜杠。例如，以下所有工作：

```
domain.com/file.txt
domain.com//file.txt
domain.com///file.txt 
```

但我希望所有多个斜杠都重定向到根目录：

```
domain.com//file.txt =====[301]=====> domain.com/file.txt 
```

这通常不会成为问题，除非这些多个斜杠 URL 之一实际上已编入索引！哎呀。

现在我需要 301（永久）将所有多个斜杠重定向到根目录。（所以 //file.txt 被重定向到 /file.txt）

你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T19:45:39.940

当您在浏览器中键入:`http://domain.com////////file.txt`时，重写引擎只会看到 URI: `/file.txt`。但是，如果您在浏览器中键入：`http://domain.com///path////to/////file.txt`，重写引擎会将 URI 视为`/path////to/////file.txt`。额外的前导斜杠永远不会出现在 中`%{REQUEST_URI}`，所以你唯一能做的就是匹配`%{THE_REQUEST}`变量：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /[/]+
RewriteRule ^ %{REQUEST_URI} [L,R=301] 
```

这只会满足出现在浏览器地址栏上的额外前导斜杠，而不是出现在 URI 中某处的杂散双斜杠。为了照顾这些，你需要做这样的事情：

```
RewriteCond %{REQUEST_URI} ^(.+)//(.+)$
RewriteRule ^ %1/%2 [L,R=301] 
```

# oracle11g - Hyperion Essbase 11.1.2.2 无法从 Essbase 管理控制台连接到 Essbase 管理员服务器

> ID：11781241
> 
> 赞同：0
> 
> 时间：2012-08-02T15:50:25.383
> 
> 标签：oracle11g, hyperion, essbase

所以我是 Essbase 的新手 - 我已经安装了 EPM 系统 - Essbase 管理服务已启动并正在运行，但由于某种原因，我无法通过 EAS 控制台连接到管理服务器。我得到这个错误 - `"Could not connect to Administration Service <IP>"`。

所以我查看了日志文件`-HyS9EPMServer-sysout.log`：

```
<Aug 2, 2012 9:48:43 AM EDT> <Notice> <Log Management> <BEA-170027> <The Server has established connection with the Domain level Diagnostic Service successfully.> 
<Aug 2, 2012 9:51:00 AM EDT> <Warning> <Socket> <BEA-000449> <Closing socket as no data read from it on 10.224.53.85:1,465 during the configured idle timeout of 5 secs> 
<Aug 2, 2012 9:51:00 AM EDT> <Warning> <Socket> <BEA-000449> <Closing socket as no data read from it on 10.224.53.85:1,464 during the configured idle timeout of 5 secs> 
<Aug 2, 2012 9:51:00 AM EDT> <Warning> <Socket> <BEA-000449> <Closing socket as no data read from it on 10.224.53.85:1,463 during the configured idle timeout of 5 secs> 
<Aug 2, 2012 9:51:05 AM EDT> <Warning> <Socket> <BEA-000449> <Closing socket as no data read from it on 10.224.53.85:1,470 during the configured idle timeout of 5 secs> 
[Lcom.brio.one.common.NetAddress;@3433a24
**<Aug 2, 2012 11:05:37 AM EDT> <Error> <HTTP> <BEA-101017> <[ServletContext@37297592[app:SHAREDSERVICES module:interop path:/interop spec-version:2.5 version:11.1.2.0]] Root cause of ServletException.
java.lang.IllegalStateException: HttpSession is invalid**
    at weblogic.servlet.internal.session.SessionData.check(SessionData.java:479)
    at weblogic.servlet.internal.session.SessionData.getAttribute(SessionData.java:392)
    at com.hyperion.cas.web.action.CASCommonAction.execute(CASCommonAction.java:112)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    Truncated. see log file for complete stacktrace
> 
**<Aug 2, 2012 11:05:37 AM EDT> <Notice> <Diagnostics> <BEA-320068> <Watch 'UncheckedException' with severity 'Notice' on server 'EPMServer0' has triggered at Aug 2, 2012 11:05:37 AM EDT. Notification details: 
WatchRuleType: Log 
WatchRule: (SEVERITY = 'Error') AND ((MSGID = 'WL-101020') OR (MSGID = 'WL-101017') OR (MSGID = 'WL-000802') OR (MSGID = 'BEA-101020') OR (MSGID = 'BEA-101017') OR (MSGID = 'BEA-000802')) 
WatchData: DATE = Aug 2, 2012 11:05:37 AM EDT SERVER = EPMServer0 MESSAGE = [ServletContext@37297592[app:SHAREDSERVICES module:interop path:/interop spec-version:2.5 version:11.1.2.0]] Root cause of ServletException.
java.lang.IllegalStateException: HttpSession is invalid**
    at weblogic.servlet.internal.session.SessionData.check(SessionData.java:479)
    at weblogic.servlet.internal.session.SessionData.getAttribute(SessionData.java:392)
    at com.hyperion.cas.web.action.CASCommonAction.execute(CASCommonAction.java:112)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1198)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:416)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:821)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:301)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at com.hyperion.bpm.ServletFilter.doFilter(ServletFilter.java:93)
    at com.hyperion.bpm.logon.CredentialFilter.doFilter(CredentialFilter.java:81)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at com.hyperion.bpm.ServletFilter.doFilter(ServletFilter.java:93)
    at com.hyperion.bpm.LocalizationServletFilter.doFilter(LocalizationServletFilter.java:54)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:119)
    at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:315)
    at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:442)
    at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:103)
    at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:171)
    at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:139)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3730)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3696)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2273)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2179)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1490)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221)
 SUBSYSTEM = HTTP USERID = <WLS Kernel> SEVERITY = Error THREAD = [ACTIVE] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)' MSGID = BEA-101017 MACHINE = SGT-ESSPLAN01 TXID =  CONTEXTID = 0000JZbrhSTAdL0_JxO5yf1G6Q2s0000WO TIMESTAMP = 1343919937388  
WatchAlarmType: AutomaticReset 
WatchAlarmResetPeriod: 30000 
```

由于服务器已启动并正在运行，因此我无法理解问题所在。我在网上搜索了高低，没有找到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T09:12:35.567

另一个原因可能是 EPM 在一个端口上安装了所有服务（紧凑模式），然后您必须说明管理服务的端口。在紧凑模式下，所有托管服务器都在同一端口上运行（默认为 9000）。

尝试给予（假设您的服务器在 localhost 上）：localhost:9000

作为连接对话框中的服务器名称

# winforms - 发布项目错误

> ID：11781243
> 
> 赞同：0
> 
> 时间：2012-08-02T15:50:27.623
> 
> 标签：winforms, clickonce

我有一个 Windows 窗体项目，我想使用单击一次将其发布到服务器上。它曾经工作得很好。但是今天我收到了一条消息。

![信息](../Images/0fa12876ab0da689efd0a3c8a954e330.png)

我必须点击“否”。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:55:54.963

在发布项目之前，至少将版本更改为 1.0.0.56。确保您没有覆盖较新的代码。

# c++ - 与访问者设计模式实施相关的问题

> ID：11781244
> 
> 赞同：2
> 
> 时间：2012-08-02T15:50:29.073
> 
> 标签：c++, design-patterns, visitor-pattern

根据我目前的需求，我已经实现了访问者模式，我们有一些不同的方面如下：

1>与 GoF 书中说明的经典示例不同，设备的子类没有扁平化。换句话说，子类都在层次结构中。

例如： //Flat EquipmentA : public Equipment {} EquipmentB : public Equipment {} EquipmentC : public Equipment {}

```
//hierarchy
EquipmentA : public Equipment {}
EquipmentB : public EquipmentA {}
EquipmentC : public EquipmentB {} 
```

2> 子类有一些特殊的函数，这些函数不是基类中定义的虚函数。例如：

```
`EquipmentA` may define a function called `GetFactorRate`
`EquipmentB` may define a function called `GetAmplifyRate` 
```

记住所有这些，这是我的代码。

**问题1** > 代码有问题吗？

**问题 2** > 我是否应该关注我标记为“注意”的块，即如果`SpecialFloppyDisk`调用`VisitFloppyDisk`而不是`SpecialVisitFloppyDisk`. 我相信好的代码的设计方式使得它很难出错。但我不确定这种情况是否适用于此。

```
//////////////////////////////////////////////////////////////////////////
class FloppyDisk;
class SpecialFloppyDisk;
class EquipmentVisitor
{
public:
    virtual ~EquipmentVisitor() {}    
    // modify Equipment based on different subclass of Equipment
    virtual void VisitFloppyDisk(FloppyDisk&) = 0;
    virtual void VisitSpecialFloppyDisk(SpecialFloppyDisk&) = 0;

    int GetTotalPrice() const { return m_iTotalPrice; }
protected:
    int m_iTotalPrice;    
protected:
    EquipmentVisitor() {}
};    
//////////////////////////////////////////////////////////////////////////
class Equipment {
public:
    virtual ~Equipment() {}    
    // return the price of the Equipment
    virtual int GetPrice() const = 0;

    virtual void Accept(EquipmentVisitor&) = 0;
protected:
    Equipment() {}
};
//////////////////////////////////////////////////////////////////////////
class FloppyDisk : public Equipment
{
public:
    // return the price of the Equipment
    virtual int GetPrice() const {return 100;}
    int GetFactorRate() const {return 2; } // x 2

    virtual void Accept(EquipmentVisitor& e){e.VisitFloppyDisk(*this);}
};
//////////////////////////////////////////////////////////////////////////
class SpecialFloppyDisk : public FloppyDisk
{
public:
    virtual std::string GetName() const {return std::string("Bus");}            
    // return the price of the Equipment
    virtual int GetPrice() const {return 20000;}

    int GetAmplifyRate() const {return 11; }// x 11
    virtual void Accept(EquipmentVisitor& e)
    {
        e.VisitSpecialFloppyDisk(*this);
        // Note: if called the following function by accident, then it introduces
        // hidden bugs!!!!
        // e.VisitFloppyDisk(*this);
    }
};
//////////////////////////////////////////////////////////////////////////
class PricingVisitor : public EquipmentVisitor
{
public:
    virtual void VisitFloppyDisk(FloppyDisk& e)
    {m_iTotalPrice = e.GetPrice() * e.GetFactorRate();}
    virtual void VisitSpecialFloppyDisk(SpecialFloppyDisk& e)
    {   m_iTotalPrice = e.GetPrice() * e.GetAmplifyRate(); }
};
//////////////////////////////////////////////////////////////////////////
int _tmain(int argc, _TCHAR* argv[])
{
    PricingVisitor pricingVisitor;
    SpecialFloppyDisk specialFloppyDisk;
    FloppyDisk floppyDisk;

    floppyDisk.Accept(pricingVisitor);
    // output: pricingVisitor.GetTotalPrice(): 200
    // i.e. 100 x 2
    std::cout << "pricingVisitor.GetTotalPrice(): " << pricingVisitor.GetTotalPrice() << std::endl;

    // output: pricingVisitor.GetTotalPrice(): 220000
    // i.e. 20000 x 11
    specialFloppyDisk.Accept(pricingVisitor);
    std::cout << "pricingVisitor.GetTotalPrice(): " << pricingVisitor.GetTotalPrice() << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:26:44.913

**Q1：有什么问题吗？对，他们是。设计问题：**

1.  `EquipmentVisitor`不得有 `GetTotalPrice()/m_iTotalPrice`。它应该是仅包含访问内容的纯类。访问者模式主要用于在不修改这些类的情况下向类族（在本例中为设备）添加新功能。如果添加其他访客 - 那么它很可能对设备价格不感兴趣。如果它对定价感兴趣 - 那么它应该来自`PricingVisitor`.
2.  将价格内容移至 PricingVisitor，这是合适的地方。
3.  不要为不同的`Visit`方法起不同的名字。编译器会根据类型选择正确的`Accept`方法`*this`。

**Q2：如果 SpecialFloppyDisk 调用 VisitFloppyDisk 而不是 SpecialVisitFloppyDisk 怎么办：**

已经在 Q1.3 中提到过 - 不要使用不同的名称 - 这样可以避免问题。

```
class EquipmentVisitor
{
public:
   virtual ~EquipmentVisitor() {}    
   virtual void Visit(FloppyDisk&) = 0;
   virtual void Visit(SpecialFloppyDisk&) = 0;
}; 
```

# wso2 - WSo2 WSDL 代理服务错误

> ID：11781248
> 
> 赞同：1
> 
> 时间：2012-08-02T15:51:05.543
> 
> 标签：wso2, wso2esb

项目阶段：评估 ESB。

我们曾考虑将 WSO2 作为 ESB 解决方案，但遇到了许多问题。

目前我正在尝试让一个简单的 WSDL 代理服务正常工作，但没有成功。

这些是我做的事情

*   创建了一个基于 WSDL 的代理
*   点击“试用此服务”
*   填写参数（邮编）
*   点击发送

响应如下

```
<TryitProxyError h:status="SOAP envelope error" xmlns:h="http://wso2.org/ns/TryitProxy">**org.apache.axis2.AxisFault: Transport error: 411 Error: Length Required**</TryitProxyError> 
```

**详细日志**

```
[2012-08-02 10:48:21,556]  INFO - HTTPSender Unable to sendViaPost to url[http://localhost:8280/services/MYWeather.MYWeatherHttpSoap12Endpoint]
org.apache.axis2.AxisFault: Transport error: 411 Error: Length Required
    at org.apache.axis2.transport.http.HTTPSender.handleResponse(HTTPSender.java:308)
    at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:194)
    at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:449)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:276)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:555)
    at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:531)
    at org.apache.jsp.admin.jsp.WSRequestXSSproxy_005fajaxprocessor_jsp._jspService(WSRequestXSSproxy_005fajaxprocessor_jsp.java:272)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
    at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:05:24.983

您的后端 Web 服务器是否支持 HTTP/1.1？如果没有，那么这可能就是这里的问题。因为，最新版本的 WSO2 ESB，默认使用 HTTP/1.1 进行 Web 服务通信。在 HTTP/1.1 中，它默认使用分块的 Transfer-Encoding 响应标头代替 HTTP/1.0 的 content-length 标头。因此，您可能希望禁用分块响应或强制通过 HTTP/1.0 发送消息。

将以下属性添加到您的 ESB 代理服务配置将禁用分块。

```
<property name="DISABLE_CHUNKING" value="true" scope="axis2"/> 
```

希望能帮助到你！

问候， 普拉巴斯

# php - 在递增时在同一输出行上回显整数？

> ID：11781250
> 
> 赞同：10
> 
> 时间：2012-08-02T15:51:21.300
> 
> 标签：php, loops, line, increment

我一直想知道是否可以在 PHP 中执行以下操作：

```
for($x = 1; $x <= 50; $x++)
    echo $x; 
```

这将输出：

```
1234 etc... 
```

显然它不会是这段代码，因为它几乎是瞬时的，你甚至看不到增量的发生。现在我的问题是：是否有可能`echo`，删除它，重复？简单地说，输出应该从头到尾在同一行。我不知道如何解释或展示，但这里有一个例子（有点）：

```
1 (backspace) 2 (backspace) etc... 
```

我希望你能理解它，我不知道如何解释它.-。

感谢您的帮助！

编辑：顺便说一句，这是用于控制台的，对不起，我忘了包括在内。这不适合网络！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T16:03:56.240

如果您在 CLI 中运行代码：

```
echo $x."\r"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:54:28.117

使用通常的 php 输出转到 HTTP 响应设置，不，这是不可能的。用户屏幕上显示的所有内容都通过网络消失了，您无法再控制它。

但是，如果您在 CLI 环境中运行，则可以使用完整的基于字符的窗口绘图库，例如[ncurses](http://php.net/manual/en/book.ncurses.php)，您可以使用它们在终端中移动像素（在本例中为字符）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T15:54:20.877

你可以很容易地使用 Javascript 来做到这一点，但是由于 PHP 生成页面然后将其发送出去，所以你不能直接使用 PHP，至少如果你的最终意图是允许用户看到他们所做的更改发生。

编辑：这是假设您在网络上，所以不确定，因为您更新了与控制台相关的问题。

# c# - 我应该在 XAML 中的设计时绑定到“休眠”对象还是等到 C# 中的运行时？

> ID：11781252
> 
> 赞同：1
> 
> 时间：2012-08-02T15:51:24.480
> 
> 标签：c#, wpf, listview, data-binding, observablecollection

我想将我的 ListView 绑定到查询结果。但是，在用户输入一些文本并选择一个按钮之前，查询不会触发。在这种情况下，我应该以编程方式动态创建绑定吗？

或者我应该在设计时（在 XAML 中）绑定到将提供数据的 ObservableCollection（或......？？？），尽管至少最初绑定到的对象尚未填充数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:55:52.267

不要将*查询*绑定到控件。相反，在从数据库中检索到实际对象后绑定它们。因此，请使用`ObservableCollection`您在查询完成后填充的。

见[这里](https://stackoverflow.com/a/11345389/870604)的理由。

# iphone - Monotouch UIScrollView，放大时文本模糊

> ID：11781253
> 
> 赞同：3
> 
> 时间：2012-08-02T15:51:24.813
> 
> 标签：iphone, ios, ipad, text, xamarin.ios

关于 Monotouch IOS 开发：

任何人都可以给我写一个代码片段，或者让我参考一个，关于如何在 UIScrollView 中包含文本并且在放大时文本不会变得模糊吗？使用 CALayer 或在缩放结束后重新渲染它。在过去的一周里，我一直在尝试这个，但似乎没有任何效果。我也没有找到任何关于这方面的好例子。

我发现了一篇关于堆栈溢出的类似帖子，引用他们使用 CALayer，但没有给出如何执行此操作的示例： [Text getting blur on zoom-in](https://stackoverflow.com/questions/7279397/text-getting-blur-on-zoom-in)

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:28:37.607

您需要根据缩放系数设置图层的 ContentsScale 属性。

在您的缩放结束方法中

```
public override void ZoomingEnded(UIScrollView scrollView, UIView withView, float atScale)
{
    withView.Layer.ContentsScale =  UIScreen.MainScreen.Scale * atScale;
    withView.SetNeedsDisplay();
} 
```

注意：这假设您使用的是 UIScrollViewDelegate

乘以 MainScreen 比例的原因是为了支持视网膜显示。

我正在更新视图层，但您需要更新给您带来麻烦的层。您还需要自己将比例应用于所有受影响的子图层。

希望有帮助。

# mongodb - Mongo findAndModifyevery document

> ID：11781257
> 
> 赞同：2
> 
> 时间：2012-08-02T15:51:29.790
> 
> 标签：mongodb, nosql

有没有办法将 mongo 的 findAndModify 应用于每个符合条件的文档，而不仅仅是第一个？我在 mongodb.org 上找不到它。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:55:39.980

您可以使用多参数为 true 的[update()方法。](http://www.mongodb.org/display/DOCS/Updating/#Updating-update%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:58:26.913

从[文档页面](http://www.mongodb.org/display/DOCS/findAndModify+Command)：

> 该命令可用于原子地修改一个文档（最多一个）并返回它

所以，不，你只能在这里一次操作一个。因此，除非您遍历每个文档，否则您将无法以这种方式使用 findAndModify。此外，使用 findAndModify 的工作方式，在大型数据集上执行此操作的性能将非常糟糕。

您真正想要做的是使用 update 命令来实现这种类型的事情：

[http://www.mongodb.org/display/DOCS/Updating/#Updating-update%28%29](http://www.mongodb.org/display/DOCS/Updating/#Updating-update%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T16:23:20.850

findAndModify() 操作一次只适用于一个文档。如果您希望它应用于多个文档，则必须使用 find() 操作查询这些文档，并一次将 findAndModify() 应用于这些文档中的每一个。

请注意，虽然单个 findAndModify() 命令是原子的，但您从上述循环运行的 findAndModify() 命令集不是原子的。

# jquery - 尝试在 jQuery Nth-child 中使用变量

> ID：11781258
> 
> 赞同：0
> 
> 时间：2012-08-02T15:51:34.730
> 
> 标签：jquery, variables, jquery-selectors

我知道这里有一两个类似的问题，但提供的答案并不能解决我的问题。我正在创建一个随机数，然后我想突出显示一个特定元素，即第 n 个子元素（使用该随机数）

这是代码，如果我使用常规数字，它可以工作，但如果我使用变量，它会突出显示每个孩子。

```
c = $(".slideList li").length;
rn = Math.floor(Math.random() * c);
$('.slideList > li:nth-child(" + rn + ")').addClass('on');
$('.testBoxesContain > div:nth-child(" + rn + ")').fadeIn(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:53:18.970

报价混淆：

```
$('.slideList > li:nth-child(' + rn + ')') 
```

不是

```
$('.slideList > li:nth-child(" + rn + ")') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:54:26.540

您想使用相同类型的引号来结束字符串并开始另一个。

```
$('.slideList > li:nth-child(' + rn + ')').addClass('on'); 
```

这结束了字符串，连接`rn`，然后连接其余的字符串。

# javascript - Connect-assetmanager 文件与 req.url 不匹配

> ID：11781259
> 
> 赞同：0
> 
> 时间：2012-08-02T15:51:46.787
> 
> 标签：javascript, node.js, minify

无论我做什么，当我`http://localhost:3000/static/js/backbone.js`在 url 中输入一个 js 文件 () 时，它都会显示最后缓存的文件资产管理器。`jquery.js`所以在这种情况下，即使我进入了主干，它也会显示出来。这是我正在使用的代码：

```
var sys = require('sys');
var fs = require('fs');
var Connect = require('connect');
var assetManager = require('connect-assetmanager');
var assetHandler = require('connect-assetmanager-handlers');

var root = __dirname + '/public';

var Server = module.exports = Connect.createServer();

Server.use('/',
    Connect.responseTime()
    , Connect.logger()
);

var assetManagerGroups = {
    'js': {
        'route': /\/static\/js\/.*\.js/
        , 'path': './public/js/'
        , 'dataType': 'javascript'
        , 'files': [
            'jquery.js',
            'backbone.js'
        ]  
    }
};

var assetsManagerMiddleware = assetManager(assetManagerGroups);
Server.use('/'
    , assetsManagerMiddleware
    , Connect.static(root)
);
Server.listen(3000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:40:23.063

您确定`jquery.js`并且`backbone.js`没有合并到`js`您的请求返回的同一文件中吗？这就是的[目的](https://github.com/mape/connect-assetmanager#what-does-it-allow-you-to-do)。`connect-assetmanager`

您的`assetManagerGroups`定义基本上是说对路由上匹配的*任何* 文件的请求，返回 and 的合并和缩小版本。你要求的事实是无关紧要的。`.js``/static/js/``jquery.js``backbone.js``backbone.js`

README 中的前后[图像](https://github.com/mape/connect-assetmanager#connect-assetmanager)`jquery` `js`很好地说明了这一点，它显示了捆绑的多个文件并返回到对`client.js`.

# android - Android 上的 getDir 和 getFilesDir 有什么区别？

> ID：11781260
> 
> 赞同：36
> 
> 时间：2012-08-02T15:51:48.703
> 
> 标签：android, file, private

我想在我的应用程序的内部存储中保存一张图片，将其设为私有。所以我做了一些研究，看到了两种获取目录的方法。

1.[使用 getDir](http://developer.android.com/reference/android/content/ContextWrapper.html#getDir%28java.lang.String,%20int%29)：

```
File dir = getDir(Environment.DIRECTORY_PICTURES, Context.MODE_PRIVATE); 
```

2.使用[getFilesDir](http://developer.android.com/reference/android/content/ContextWrapper.html#getFilesDir%28%29)：

```
File dir = getFilesDir(); 
```

哪个最好？哪个返回内部存储中的位置？

写入文件的方式取决于您获取目录的方式？我有点迷茫，因为有很多方法可以在 Android 中写入文件。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-02T17:42:30.643

`getFilesDir()` returns a File object to a directory that is private to your application only. When you use `openFileOutput(String, int)`, the data you write is directly stored in this directory and is not accessible by any other application. It holds your application files.

`getDir()` enables you to create any file or directory in the internal memory, which is also accessible by other applications depending on the mode you create it. `openFileOutput(String, int)` will not work with the output of this so you will have to use other means of writing and reading files to deal with this directory or file. This is more used for creating custom files other than files only used by your application.

# python - 为什么 textwrap.wrap() 和 textwrap.fill() 这么慢？

> ID：11781261
> 
> 赞同：3
> 
> 时间：2012-08-02T15:51:49.970
> 
> 标签：python

为什么都[`textwrap.wrap()`](http://docs.python.org/library/textwrap.html#textwrap.wrap)那么[`textwrap.fill()`](http://docs.python.org/library/textwrap.html#textwrap.fill)慢？例如，在我的笔记本电脑上包装一个 10000 个字符的字符串需要将近两秒半的时间。

```
$ python -m timeit -n 10 -s 's = "A" * 10000; import textwrap' 'textwrap.fill(s)'
10 loops, best of 3: 2.41 sec per loop 
```

将其与改编自[相关 Stack Overflow 问题的答案的代码进行比较](https://stackoverflow.com/a/2657733/38140)

```
#!/usr/bin/env python
# simplewrap.py
def fill(text, width=70):
    return '\n'.join(text[i:i+width] for i in
                     range(0, len(text), width)) 
```

它将文本包装速度比以下数量级快`textwrap`：

```
$ python -m timeit -n 10 -s 's = "A" * 10000; import simplewrap' 'simplewrap.fill(s)'
10 loops, best of 3: 37.2 usec per loop 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T16:29:05.170

对代码进行分析表明，时间被正则表达式所占用，该正则表达式旨在将输入拆分为单词。显示相同问题的精简版是：

```
import re
s = "A" * 10000
wordsep_re = re.compile(
    r'\w+[^\W]-'
    )
wordsep_re.split(s) 
```

我相信 Python 使用递归回溯来匹配正则表达式。我认为发生的事情是python一直在尝试匹配 - 并且失败了，因此不得不备份。

您可以使用：

```
textwrap.fill(s, break_on_hyphens = False) 
```

你会发现它真的很快。当文本中没有任何空格时，用于匹配连字符的正则表达式具有病态的情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T16:02:00.630

[`textwrap`](http://hg.python.org/cpython/file/2.7/Lib/textwrap.py)比您简单、流线型的示例程序所做的*要多得多。*它构造一个新类，编译一些正则表达式来处理各种空格和其他可换行的字符组合等。

这并不是一个真正公平的比较，特别是因为（正如 hamstergene 指出的那样）您引用的程序实际上并未包装文本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T17:22:49.907

你正在测试一个特定的病理病例。一个单一的、不可破坏的字符串表现得非常糟糕：

```
~: python -m timeit -n 10 -s 's = "A"*10000; import textwrap' 'textwrap.fill(s)'
10 loops, best of 3: 1.62 sec per loop 
```

但是 1000 个单词，每个单词有 9 个字符，用空格分隔，运行速度要快 300 倍：

```
~: python -m timeit -n 10 -s 's = "AAAAAAAAA " * 1000; import textwrap' 'textwrap.fill(s)'
10 loops, best of 3: 5.46 msec per loop 
```

# android - 为android中的操作栏设置主题？

> ID：11781262
> 
> 赞同：0
> 
> 时间：2012-08-02T15:51:53.540
> 
> 标签：android

使用操作栏，有没有办法给它设置主题，以便在单击选项卡时保持突出显示？

我已经设法更改了背景，但我只想在用户位于该选项卡上时才更改它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:46:56.930

为选项卡定义可绘制对象并进行设置在[本文](http://android-developers.blogspot.com/2011/04/customizing-action-bar.html)中进行了描述。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/tab_unselected" android:state_focused="false" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@drawable/tab_selected" android:state_focused="false" android:state_pressed="false" android:state_selected="true"/>
    <item android:drawable="@drawable/tab_selected_pressed" android:state_pressed="true" android:state_selected="false"/>
    <item android:drawable="@drawable/tab_selected_pressed" android:state_pressed="true" android:state_selected="true"/>
</selector> 
```

# python - Python使用getattr调用带可变参数的函数

> ID：11781265
> 
> 赞同：27
> 
> 时间：2012-08-02T15:51:55.777
> 
> 标签：python, function, variables, parameters, getattr

我正在使用 getattr 根据变量调用不同的函数。

我正在做这样的事情：

```
getattr(foo, bar) () 
```

这行得通，调用像 foo.bar() 这样的函数

我的问题是我有'bar'函数，我想用不同的参数调用它。例如：

```
def f1() :
  pass

def f2(param1) :
  pass

def f3(param1,param2) :
  pass 
```

所以“bar”可以是 f1、f2 或 f3

我试过这个：假设 params 是一个列表，其中包含“bar”函数所需的所有参数

```
getattr(foo, bar) (for p in params :) 
```

我正在寻找一个“干净”的解决方案，无需查看 params 变量的长度

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-02T15:53:47.650

您可以尝试以下方法：

```
getattr(foo, bar)(*params) 
```

如果`params`是列表或元组，则此方法有效。from 中的元素`params`将按顺序解包：

```
params=(1, 2)
foo(*params) 
```

相当于：

```
params=(1, 2)
foo(params[0], params[1]) 
```

如果有关键字参数，您也可以这样做。

```
getattr(foo, bar)(*params, **keyword_params) 
```

`keyword_params`字典在哪里。

此外，这个答案真的独立于`getattr`. 它适用于任何功能/方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-24T14:16:16.970

这在 Python 3 中非常简单。下面是示例：

```
class C:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def m(self, x):
        print(f"{self.name} called with param '{x}'")
        return

ci = C("Joe", 10)
print(C)
print(ci)
print(C.m)
print(ci.m)
print(getattr(ci,'m'))
getattr(ci,'m')('arg') 
```

* * *

```
<class '__main__.C'>
<__main__.C object at 0x000001AF4025FF28>
<function C.m at 0x000001AF40272598>
<bound method C.m of <__main__.C object at 0x000001AF4025FF28>>
<bound method C.m of <__main__.C object at 0x000001AF4025FF28>>
Joe called with param 'arg' 
```

请注意，[getattr](https://docs.python.org/3/library/functions.html#getattr)来自[内置](https://docs.python.org/3/library/builtins.html#module-builtins)模块，在我们的例子中接受两个参数，类实例`ci`和表示函数名称的字符串。

我们还可以定义参数的默认值。

```
def m(self, x=None):
    print(f"{self.name} caled with param '{x}'")
    return 
```

在这种情况下，我们可以调用：

```
getattr(ci,'m')() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-22T15:53:16.573

一种可能更易读的方式，更适合处理异常：

```
class foo:
    def method_xy(self, *args, **kwargs):
        print(f'args:{args}, kwargs:{kwargs}')

bar = 'method_xy'
xi = foo()
try:
    func_name = getattr(xi, bar)
except AttributeError:
    # handle missing method
    pass

args = ['bla1', 'bla2']
kwargs = {'a1': 1, 'a2': 2}

try:
    result = func_name(*args, **kwargs)
except TypeError:
    # handle Problems with arguments
    pass 
```

# java - Eclipse 插件 - 保存和启动对话框

> ID：11781269
> 
> 赞同：0
> 
> 时间：2012-08-02T15:52:12.813
> 
> 标签：java, eclipse, eclipse-plugin, editor, launcher

我正在开发一个带有编辑器和启动器的插件。

在 java 中使用 Eclipse 时，如果我们尝试在未保存的代码打开的情况下启动，则会显示一个窗口“Save and Launch”。该窗口允许保存打开的代码并启动。

我想在我的插件中添加一个类似的窗口。

我已经知道如何验证打开的代码是否“脏”，但是是否可以使用同一个窗口，或者我将不得不实施一个新窗口？

如果可能的话......我怎么能调用这个窗口？

抱歉英语不好，我是巴西人:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:16:45.537

打电话[`DebugUITools.saveBeforeLaunch()`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/debug/ui/DebugUITools.html#saveBeforeLaunch%28%29)。根据偏好，这将显示对话框或自动保存脏文件。

# tridion - 事件系统 - 发布页面时可以发布另一个页面吗？

> ID：11781271
> 
> 赞同：6
> 
> 时间：2012-08-02T15:52:20.160
> 
> 标签：tridion

我对 Tridion 2011 中的事件系统有疑问.....当其他页面被发送到发布队列时，是否可以发布另一个页面？

我们目前有一个 XML 文件来定义我们的站点导航和站点地图，但不幸的是，当前每次向网站添加新页面时都需要手动发布。

我担心从事件系统自动发布以及必须多次发布同一页面，而实际上它只需要在发布队列中的最后一个项目结束其事务后发布。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T18:31:33.463

每当您想更改 Tridion 为响应发布操作而发布的项目数量时，我的脑海中都会立即尖叫***custom resolver***。

克里斯萨默斯不久前写了一篇关于他与他们的经历的精彩文章：[http ://www.tridiondeveloper.com/the-story-of-sdl-tridion-2011-custom-resolver-and-the-allowwriteoperationsintemplates-attribute](http://www.tridiondeveloper.com/the-story-of-sdl-tridion-2011-custom-resolver-and-the-allowwriteoperationsintemplates-attribute)

努诺更简洁地写下了他的经历：http: [//nunolinhares.blogspot.com/2011/10/tridion-publisher-and-custom-resolvers.html](http://nunolinhares.blogspot.com/2011/10/tridion-publisher-and-custom-resolvers.html)

在我看来，您应该简单地将导航添加到那里的 ResolvedItems 集合中。如果您始终使用解析器，您也不会出现您似乎担心的这种发布事务的爆炸式增长，而是将所有相关项目都发布（和部署）在一个事务中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T16:33:14.097

您可以通过订阅 PublishTransaction Save 事件来发布每个事务的站点地图（可以包含许多页面、结构组等）。

您可以考虑验证发布队列并查看是否有等待事务，但从理论上讲，这可能会将站点地图的发布推迟非常非常长的时间。

```
EventSystem.SubscribeAsync<PublishTransaction, SaveEventArgs>(
    (subject, args, phase) =>
    {
        if (!PublishStransactionStateIsSuccessfullyCompleted(subject))
            return;

        // Code to publish sitemap
    },
    EventPhases.TransactionCommitted
); 
```

```
static bool PublishStransactionStateIsSuccessfullyCompleted(PublishTransaction transaction)
{
    return transaction.State == PublishTransactionState.Success ||
            transaction.State == PublishTransactionState.Warning;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T16:31:10.557

这在实施过程中经常出现，当然导航或站点地图取决于已发布的项目（我认为这不是理想的情况）。

一个可能的解决方案是您使用事件系统将生成 XML 的页面放置在低优先级的发布队列中。这将（某种程度上）确保它仅在执行常规发布操作后才发布。现在第二个事件应该检查​​这个页面是否已经在队列中，所以它不会再次添加它。

请记住，这并不能阻止它每天发布多次，但至少应该确保它永远不会在队列中两次。在具有专用多线程发布者的快速系统上，这很可能意味着它仍然每小时左右发布一次，具体取决于您的活动等。

另一种选择是安排每天发布一次该页面，使用事件系统重复该过程，以便每天在同一时间只发布一次。这将降低您的 XML 的准确性，因为它每天只更新一次，但它会防止您的发布队列被填满，这可能是一个问题。

# javascript - 如何使用javascript将数据存储到mysql数据库中？

> ID：11781272
> 
> 赞同：4
> 
> 时间：2012-08-02T15:52:21.603
> 
> 标签：javascript, mysql, ajax, database, google-maps-api-3

我对 AJAX 还是很陌生。我们有一个 MySQL 数据库，用于存储在该站点注册的人的地址。然后，我们使用这些存储的地址通过 JSON 查询在 Google 地图 (API v3) 上创建标记。问题是，这非常慢，并且我们允许的查询数量有限。因此，我们在数据库中创建了字段来存储 JSON 调用的纬度和经度。

通过循环的每一遍，可以通过

`result[0].geometry.location.lat() result[0].geometry.location.lng()`

如何获取这些数字并将它们存储到数据库中的空白字段中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:56:39.620

Javascript 在客户端/浏览器端运行 - 授予对 mysql-server/databases 的访问权限不是一个好主意。

只需为此使用一些服务器端逻辑（php）。

这是 W3 通过 AJAX 和 PHP 检索数据的示例，只需更改为更新内容

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:57:02.657

您可以使用 javascript 将数据发送到服务器，但您需要一个库来与数据库系统交互，因此您通常会在服务器上处理该数据并发送命令以将其存储在数据库中。在 PHP 中，内置了对 MySQL 的支持，因此您可以使用函数和对象来连接到数据库，就像 mysql_XXXX 或通过 PDO 对象一样。

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# c# - linq 用于 foreach 循环内的 for 循环

> ID：11781273
> 
> 赞同：2
> 
> 时间：2012-08-02T15:52:25.947
> 
> 标签：c#, sql, linq

任何人都可以帮助我如何将以下 c# 代码转换为使用 linq 到 sql 吗？通过使用 linq to sql，它会执行得更快还是仍然和下面一样？

```
foreach (var a in all)
    {
        for (int i = 0; i < a.Items.Length; i++)
        {
            if (a.Items[i].Item.TruckItemID.Equals(CarItem.CarItemID))
               {
                   allItems = a.Items[i];
               }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:56:10.090

看起来你想要类似的东西：

```
allItems = all.SelectMany(a => a.Items)
              .Where(a => a.Item.TruckItemID.Equals(CarItem.CarItemID)); 
```

但请记住，执行不会加快。LINQ 会将您的查询扩展为几乎相同的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:59:09.667

Linq 2 Sql 是一种数据库访问技术，可将 LINQ 转换为 SQL 命令并在数据库上执行它们。它将数据返回到内存集合中。由于 for 循环非常原始，如果使用得当，它们往往会提高速度。一旦开始嵌套 for 循环，您的操作将随着数据增加 O(n^2) 呈指数级变慢。

# c++ - 自记录代码是否值得潜在的性能问题？

> ID：11781278
> 
> 赞同：4
> 
> 时间：2012-08-02T15:52:49.653
> 
> 标签：c++, templates, enums, self-documenting-code, enum-class

我创建了一个小类，它允许我使用强类型枚举的枚举器作为标志（组合）。我正在使用 type_traits 进行底层类型检测，因此它也应该是稍微类型安全的，并且主要在编译时处理。但是，我想知道这是否真的值得。

我现在可以写类似的东西

```
void Foo(Flags<Mode> Value); 
```

并且程序员将看到他只能使用 Mode 中的枚举器（例如 Mode::Read），而且他不能将任何其他枚举与 Mode 结合使用。你认为这是更好的方法吗？

```
void Foo(int Mode); 
```

，我不确定人们是否会欣赏它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T15:58:08.237

您的建议被认为是最佳实践。

使用现代优化编译器应该没有性能成本。

# django - 如何开始构建 django 网站以及 django 如何构建页面？

> ID：11781280
> 
> 赞同：2
> 
> 时间：2012-08-02T15:52:54.913
> 
> 标签：django, django-templates, django-views

我为我的个人网站启动了一个 django 项目来学习 django。到目前为止，我已经为我的开发环境设置了所需的一切，并按照[这个](https://docs.djangoproject.com/en/dev/intro/tutorial01/)很棒的教程创建了一些基本的数据结构和模板。现在我想开始使用我之前制作的 html 布局并开始实现它的功能。但是我很难理解如何做到这一点。

在此之前，我主要完成了 java 门户解决方案，我可以在其中启动服务器、创建一些页面、为它们设置主题，然后在任何我想要的地方添加自定义 portlet（功能/代码）。在 django 中，我用我的 html 布局创建了一个视图，它工作正常。但是我不明白我应该如何处理页面。我是否需要为每个 url 和视图配置创建一个单独的视图，然后为每个页面使用相同的 html 布局，并且只在需要的地方设置不同的功能？看起来不像 django 方式，因为少即是多。我想我可以以某种方式使用视图，有点像 portlet，以便它们成为某个页面的一部分（它本身就是一个视图？）对吧？就像页面某个部分的投票一样。如何？

因此，例如，我希望有一个首页，其中有一个特定的“主题”（html-layout），也许还有最新的博客文章。然后是另一个名为资源的页面，其中有相同的“主题”和可下载内容的列表。自然是在布局中的某处导航以在页面之间切换。

如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:16:23.193

您可以通过使用 Django 模板继承来做到这一点。您将创建一个“主页”模板，并使用它`{% block content %}{% endblock %}`来定义博客文章的位置。在您将显示博客文章的模板（这是一个单独的 HTML 文件）中，您将放置`{%extends "home.html"%}`和 相同的`{% block content %}{% endblock %}`，在 内部`{% block content %}{% endblock %}`，您将放置博客文章的 HTML 代码。

当 Django 加载主页时，它会查看您在其他模板中还有哪些名为“content”的块，并将加载其中的任何内容，在这种情况下，就是您的博客文章。

让我给你看一个小例子：

主页.html

```
<title>Home</title>
<head>
<style type="text/css">
    .content-wrapper{
        text-decoration:none;
    border: 1px none;
        height: 50%;
        left: 0%;
        position: relative;
        top: 8%;
        width: 100%;
        height: 100%;
        z-index: 0;
     }
</style>
</head>
<body>
<div class="content-wrapper">
{% block content %}{% endblock %}
    </div>
</body> 
```

和 blog-posts.html

```
{%extends "home.html"%}
 <head>PUT HERE ALL THE CSS STYLESHEETS YOU'LL BE USING AND PUT THEM ALSO IN HOME.HTML</head>
<body>
   {%block content%}
      HTML FOR YOUR BLOG POSTS
   {%endblock%}
</body> 
```

这样，您将不得不做单独的模板，但会做更少的代码。而且您必须将它们指向 urls.py，因为它们的行为几乎就像框架一样。

网址.py

```
urlpatterns = patterns('',
url(r'^blog-posts/','Mod031.views.blog-posts'),
    url(r'^home/', 'Mod031.views.home', name='home'),
) 
```

您还将有一个视图来加载您需要的每个模板

```
def home (request):
return render_to_response('home.html', context_instance=RequestContext(request))

def blog-posts(request):
return render_to_response('blog-posts.html', context_instance=RequestContext(request)) 
```

有关更多信息，请阅读文档：[Django 模板语言](https://docs.djangoproject.com/en/dev/topics/templates/#the-django-template-language)

# wpf - 绑定祖先不起作用的WPF

> ID：11781286
> 
> 赞同：3
> 
> 时间：2012-08-02T15:53:35.467
> 
> 标签：wpf, binding, ancestor

我有一个 TreeView，它也被修改为在文本前面显示图像。所以我修改后的 TreeViewItem 被称为 ImagedTreeViewItem。此 ImagedTreeViewItem 有一个属性，其中包含要显示的 Image-Control 的图像。ImagedTreeViewItem 还有一个属性，用于检查 ImagedTreeViewItem-Icon 是否为文件夹图标。此属性的名称为“IsFolder”。

我的问题是： `I'm Binding the Ancestors-Property (here: The ImagedTreeViewItem)`获取我需要的数据。对于我的 Image-Control，它可以完美运行，而对于我后来添加的上下文菜单则不行。我不明白为什么，因为基本上它是相同的命令。

这是我在 XAML 中的“ImagedTreeView”的代码：

```
<TreeView.Resources>
                <Style TargetType="{x:Type myClasses:ImagedTreeViewItem}">
                    <Setter Property="HeaderedItemsControl.HeaderTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
<!-- Here it works!!! -->
                                    <Image Height="16" Source="{Binding Path=Icon, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type myClasses:ImagedTreeViewItem}}}" Stretch="Fill" Width="16" />
                                    <TextBlock Margin="5,0" Text="{Binding}" />
                                    <StackPanel.ContextMenu>
                                        <ContextMenu>
<!-- Here not :( -->
                                            <MenuItem Command="my:ImagedTreeView.AddFolder" Header="Add Folder"
                                                              IsEnabled="{Binding Path=IsFolder,
                                                              RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type myClasses:ImagedTreeViewItem}}}">
                                                <MenuItem.Icon>
                                                    <Image Source="folderadd16.png" />
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <!-- ... -->
                                        </ContextMenu>
                                    </StackPanel.ContextMenu>
                                </StackPanel>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TreeView.Resources> 
```

我认为这段代码中的第二个绑定找不到祖先。Visual Studio 的输出窗口告诉我同样的情况：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='....ImagedTreeViewItem', AncestorLevel='1''. BindingExpression:Path=IsFolder; DataItem=null; target element is 'MenuItem' (Name=''); target property is 'IsEnabled' (type 'Boolean') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T18:01:14.907

`ContextMenu`不是 VisualTree 的一部分，这就是绑定失败的原因。您必须使用某种中继：`ContextMenu.PlacementTarget`和`Tag`属性作为绑定搜索的第二条线索的缓存。我认为这会起作用：

```
<StackPanel Orientation="Horizontal"
            Tag="{Binding RelativeSource={RelativeSource AncestorType={x:Type myClasses:ImagedTreeViewItem}}}">
    <StackPanel.ContextMenu>
        <ContextMenu>
            <MenuItem Command="my:ImagedTreeView.AddFolder" Header="Add Folder"
                      IsEnabled="{Binding Path=PlacementTarget.Tag.IsFolder, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
                <MenuItem.Icon>
                    <Image Source="folderadd16.png" />
                </MenuItem.Icon>
            </MenuItem>
            <!-- ... -->
        </ContextMenu>
    </StackPanel.ContextMenu> 
```

# routing - Symfony2 路由全局 {_locale} 要求

> ID：11781287
> 
> 赞同：7
> 
> 时间：2012-08-02T15:53:38.243
> 
> 标签：routing, yaml, symfony-2.1

我在我的 routing.yml 中指定了每条路由中的参数 _locale 要求，我认为这必须是为了简化这种情况。

路由.yml

```
ProjectBaseBundle_index:
    pattern:  /{_locale}
    defaults: { _controller: ProjectBaseBundle:Default:index }
    requirements:
        _locale: en|es

ProjectBaseBundle_privacy:
    pattern:  /privacy/{_locale}
    defaults: { _controller: ProjectBaseBundle:Default:privacy }
    requirements:
        _locale: en|es

.....

ProjectBaseBundle_legal:
    pattern:  /legal/{_locale}
    defaults: { _controller: ProjectBaseBundle:Default:legal }
    requirements:
        _locale: en|es 
```

我正在使用 Symfony2.1 beta 3

**是否可以为我的所有路线指定全局 _locale 要求？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T19:40:11.427

我发现了一种方法：

使用“主”路由导入路由配置。由于我的包通常包含太多信息，我一直在不同的“模块”中分离控制器、资源和路由。由于这种方法，我发现了这一点：

**主路由.yml**

```
ProjectBaseBundle_default:
    resource: "@ProjectBaseBundle/Resources/config/routing-default.yml"
    prefix:   /{_locale}/project/
    requirements:
        _locale: en|es|de|fr 
```

**子路由-default.yml**

```
ProjectBaseBundle_default_privacy:
    pattern:  /privacy
    defaults: { _controller: ProjectBaseBundle:Default:privacy }

ProjectBaseBundle_default_legal:
    pattern:  /legal
    defaults: { _controller: ProjectBaseBundle:Default:legal }

ProjectBaseBundle_default_usage:
    pattern:  /usage
    defaults: { _controller: ProjectBaseBundle:Default:usage } 
```

使用此路由配置，我将需要编写语言环境要求的地方减到最少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:12:37.907

看看这个讨论：

[https://groups.google.com/forum/#!topic/symfony-devs/6oxsa7whBps](https://groups.google.com/forum/#!topic/symfony-devs/6oxsa7whBps)

似乎可以做类似于您需要的事情，只是在路线的开头指定了 {_locale} 参数，而不是在结尾。您还需要运行 symfony 2.1 版本的 beta 4（根据 Fabien）

# mysql - MySQL NOT IN 子查询未按预期工作

> ID：11781289
> 
> 赞同：3
> 
> 时间：2012-08-02T15:53:41.793
> 
> 标签：mysql, subquery, notin

我正在创建一个应用程序，它将为电子邮件营销活动生成列表。我有用于联系人、电子邮件和活动的表格。一个活动有很多电子邮件，一个联系人有很多电子邮件。该电子邮件与联系人和活动相关。基本上是一个多对多关系的表，除了我在表中有其他字段用于电子邮件结果（单击、打开、取消订阅等）。还有其他桌子，但这是我遇到麻烦的地方。

我正在尝试将 NOT IN 与子查询一起使用，以获取自特定日期以来未收到电子邮件的联系人列表以及其他条件。一个示例查询是这样的：

```
SELECT * 
FROM `contact` `t` 
WHERE (unsubscribed='1')
  AND t.id NOT IN 
   (SELECT distinct contact_id 
    FROM email, campaign 
    WHERE email.campaign_id = campaign.id 
      AND campaign.date_sent >= '2012-07-12') 
ORDER BY rand() 
LIMIT 10000 
```

这将返回 0 结果。但是，如果我运行第一个条件：

```
select id 
from contact 
where unsubscribed=1 
```

我有 9075 行。然后，如果我单独运行子查询：

```
SELECT distinct contact_id 
FROM email, campaign 
WHERE email.campaign_id = campaign.id 
  AND campaign.date_sent >= '2012-07-12' 
```

我有 116612 行。在每个结果中，我最终得到 826 个重复值。据我了解，这意味着 9075-826=8249 记录是 unsubscribed=1 而不是在第二个查询中。所以，我的第一个查询应该返回 8249 个结果，但它返回 0。我一定是查询的结构错误或使用了错误的运算符，但我终其一生都无法弄清楚如何做到这一点。

任何人都可以帮忙吗？非常感谢，因为这让我难倒了 3 天！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T18:35:01.123

这是因为

```
SELECT 1 FROM DUAL WHERE 1 NOT IN (NULL, 2) 
```

不会返回任何东西，而

```
SELECT 1 FROM DUAL WHERE 1 NOT IN (2) 
```

将要。

请查看MYSQL中的`NOT IN`和的行为。`NULL`

为了您的担心，您应该使用`NOT EXISTS`而不是`NOT IN`：

```
SELECT * FROM `contact` `t` 
WHERE (unsubscribed='1')
AND NOT EXISTS (
    SELECT * FROM email, campaign 
    WHERE 
        email.campaign_id = campaign.id 
    AND campaign.date_sent >= '2012-07-12'
    AND t.id = contact_id
) 
ORDER BY rand() 
LIMIT 10000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-21T12:15:47.270

只是在这上面浪费了几个小时和几根头发。

无法让“不存在”像提到的公认答案那样工作。但是，您可以简单地在

**WHERE “您正在聚合的字段不是 NULL** ”，并且完成了这项工作。

```
SELECT * 
FROM `contact` `t` 
WHERE (unsubscribed='1')
  AND t.id NOT IN 
   (SELECT distinct contact_id 
    FROM email, campaign 
    WHERE email.campaign_id = campaign.id 
      AND campaign.date_sent >= '2012-07-12'
      AND contact_id is not NULL          ###*************added line
) 
ORDER BY rand() 
LIMIT 10000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:03:04.207

```
select c.*, e.id from contact as c 
left join email as e on c.id = e.contact_id and e.date_sent >= '2012-07-12' 
where e.id is null and c.unsubscribed = 1 
```

我认为campaign.date_sent 是一个错字？必须是 email.date_sent？

# ruby - 运算符 && 和 || 红宝石中的对象是什么？

> ID：11781296
> 
> 赞同：2
> 
> 时间：2012-08-02T15:54:12.537
> 
> 标签：ruby

在教程 [中 Rubymonk](http://rubymonk.com/learning/books/1/chapters/6-objects/lessons/35-introduction-to-objects)说：

“在 Ruby 中，就像在现实生活中一样，我们的世界充满了对象。一切都是对象——整数、字符、文本、数组——一切。”

但是 && 和 || 是运算符，运算符也是对象吗？如何检查？

这不是违背红宝石“一切都是对象”的哲学吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:06:08.350

### The`&&`和`||`Tokens 是运算符

和标记不是对象，它们是 Ruby 解析器定义的运算符`&&`。`||`如果您有兴趣，可以深入研究源代码以找到实际的定义和实现细节。为了帮助您入门，这里有一个正则表达式匹配，可帮助您开始查看源代码：

```
$ fgrep -n '%token tANDOP tOROP' ruby-1.9.3-p194/ext/ripper/ripper.y
719:%token tANDOP tOROP /* && and || */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:07:26.643

运算符不是对象，Ruby 中的大多数运算符都是方法。

您可以通过运行`irb`并查看`public_methods`某个对象来检查它：

```
$ irb
irb(main):001:0> "a"=="b"
=> false
irb(main):002:0> "a".public_methods
=> [:<=>, :==,......... 
```

那么问题中的运算符呢，`&&`并且`||`被硬编码到Ruby语言中，但是`==`从`Comparable`模块中混合在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T18:09:16.767

这取决于您如何定义“一切”。我个人永远不会声称 ruby​​ 中的每个单独的概念都是一个对象。我想没有一个很好的定义来描述红宝石的工作原理。我认为你只需要接受 ruby​​ 的方式，当你使用它时，它会变得很简单。

如果您想查看某物是否为对象，请尝试将其分配给变量，或对其调用方法。如果您尝试使用操作员执行此操作，则会收到错误消息。一个值得注意的例外是方法，它们不是对象而是返回对象。

请注意，对象的概念有些抽象。两个变量可以指向同一个对象。每个对象都由一个`object_id`. 您可能会将 object_id 视为内存中的位置。或者，您可以将一个对象视为一所房子，多个地址簿可以包含该房子的地址。

```
# point 2 variables to the same object
>> s = t = 's'
=> "s"
>> s.object_id
=> 70269794388360
>> t.object_id
=> 70269794388360

# get the object by id (for demonstration only; I don't recommend using this in application code)
>> ObjectSpace._id2ref(70269794388360)
=> "s"

# modifying the object. both variables "see" the change
>> s << '_'
=> "s_"
>> t
=> "s_" 
```

继续房子的类比，附加到一个字符串 via`<<`就像把一把新椅子带进房子。每个按照地址簿到那所房子（使用地址）的人都会看到房子（对象）有新椅子。

ruby 语言设计者认为没有理由允许将运算符`&&`视为对象。你能看出有什么理由允许吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T15:56:13.857

在 Ruby 中，所有变量类型都引用对象（如 Python）。但是运算符不是对象。您可以通过尝试调用它们的 to_s() 方法来检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T16:12:10.273

ruby 中的大多数 Operator 实际上都是方法调用。

```
2.+(3)  # 5 
```

这是一个很好的解释： http: [//net.tutsplus.com/tutorials/ruby/ruby-for-newbies-operators-and-their-methods/](http://net.tutsplus.com/tutorials/ruby/ruby-for-newbies-operators-and-their-methods/)

# jquery - 有人可以解释为什么这在 IE 浏览器中有效吗？

> ID：11781308
> 
> 赞同：3
> 
> 时间：2012-08-02T15:54:33.243
> 
> 标签：jquery, css

我有一个裁剪插件，当你拖动它时可以平移图像。我想在顶部应用一个蒙版 png 以给人一种切割形状的印象。 [这是jsfiddle](http://jsfiddle.net/thindery/6SmXx/)

它使用图像掩码 div 上的 css3 属性`pointer-events:none;`，并且可以在 chrome 和 firefox 等 webkit 浏览器中使用。但它在 IE 中不起作用，因为`pointer-events: none;`它只适用于 SVG。

我对如何通过 div 传递指针事件进行了大量研究。我尝试了一些解决方案，但它们令人头疼，有些不起作用：

[所以问题](https://stackoverflow.com/questions/3680429/click-through-a-div-to-underlying-elements)

[通过层转发鼠标事件](http://www.vinylfox.com/forwarding-mouse-events-through-layers/)

在深入研究了我正在使用的插件之后，我能够扩展它并让它在 IE 浏览器（仅测试 8 和 9）和其他浏览器中工作，而不是使用该`pointer-events`选项。 [这是新版本的jsfiddle](http://jsfiddle.net/thindery/E2ahY/)。 **但我真的不知道它为什么有效？**我基本上做了三件事。

1.  将掩码 src 作为选项传入
2.  添加检查以查看是否提供了掩码选项，如果提供，则加载函数：

    ```
    if (this.options.mask_src) {
      var masksrc = this.options.mask_src;
      this.createMask(masksrc);
    } 
    ```

3.  让函数将带有掩码图像的 div 作为背景图像附加到文档 div：

    ```
    createMask: function(m_src) {

        $('<div class="iviewer_image_mask" style="background: url('+ m_src +');"></div>').appendTo(this.container);
    }, 
    ```

谁能向我解释为什么此解决方案适用于具有遮罩层的图像平移？就像它只是将鼠标事件应用于图像，而忽略遮罩层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:38:32.723

这似乎是由于这两个`div`元素的位置。在您的非功能版本中，这是 html 结构（简化）：

```
<div class="wrapper">
    <div id="viewer2" class="viewer">
      <img />
    </div>
    <div class="image-mask"></div>
</div> 
```

在您插入元素的功能版本中，这就是它的最终结果：

```
<div class="wrapper">   
    <div class="viewer iviewer_cursor" id="viewer2" >
      <img />
      <div class="iviewer_image_mask"></div>
    </div>
</div> 
```

**通过将掩码移动到`viewer`原始的 div 中，我可以让它[在这个 fiddle](http://jsfiddle.net/6SmXx/11/)中工作。**

我相信这会有所不同，因为您的脚本绑定到`viewer2`div，因此在内部放置掩码显然可以使其在脚本的上下文中运行，而将其放在外部则不能。

# magento - 重新索引 Magento 时违反约束/重复键

> ID：11781312
> 
> 赞同：4
> 
> 时间：2012-08-02T15:54:46.680
> 
> 标签：magento, pdo, duplicates, constraints, zend-db

我正在使用 Magento CE 1.6.2，但我的重新索引器（ url_rewrite ）有问题

```
php shell/indexer.php --reindex catalog_url
Catalog URL Rewrites index process unknown error:
exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '33432700_1343855802-0-1' for key 'UNQ_CORE_URL_REWRITE_ID_PATH_IS_SYSTEM_STORE_ID'' in /home/website/public_html/lib/Zend/Db/Statement/Pdo.php:228 
```

当我截断 core_url_rewrite... 并第一次通过后端访问索引器时，一切都很好，我的 url 重写存储在 core_url_rewrites... 但是如果我第二次启动索引器（不刷新表)，我收到重复键的错误。

这是我的桌子的屏幕截图：[https ://www.dropbox.com/s/6v9uawp5v437w3h/seo_Magewroks.png](https://www.dropbox.com/s/6v9uawp5v437w3h/seo_Magewroks.png)

注意：UNQ_CORE_URL_REWRITE_ID_PATH_IS_SYSTEM_STORE_ID 是索引键

我怎样才能找到问题的根源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T19:58:58.313

这应该可以解决问题，

复制核心文件：/app/code/core/Mage/Catalog/Model/Resource/Url.php 到：/app/code/local/Mage/Catalog/Model/Resource/Url.php

找到这个函数：

```
public function saveRewriteHistory($rewriteData)
{
    $rewriteData = new Varien_Object($rewriteData);
    // check if rewrite exists with save request_path
    $rewrite = $this->getRewriteByRequestPath($rewriteData->getRequestPath(), $rewriteData->getStoreId());

    if ($rewrite === false) {
        // create permanent redirect
        $this->_getWriteAdapter()->insert($this->getMainTable(), $rewriteData->getData());
    }

    return $this;

} 
```

将其替换为：

```
protected $_processedRewrites = array();   // add this to your class vars on top

public function saveRewriteHistory($rewriteData)
{
    $rewriteData = new Varien_Object($rewriteData);
    // check if rewrite exists with save request_path
    $rewrite = $this->getRewriteByRequestPath($rewriteData->getRequestPath(), $rewriteData->getStoreId());
    $data = $rewriteData->getData();

    $current = $data["id_path"]."_".$data["is_system"]."_".$data["store_id"];
    if ($rewrite === false && !in_array($current, $this->_processedRewrites)) {
        $this->_processedRewrites[] = $current;
        // create permanent redirect
        $this->_getWriteAdapter()->insert($this->getMainTable(), $rewriteData->getData());
    }

    return $this;
} 
```

问题是因为函数检查数据库以在插入之前查看重写是否存在于 core_url_rewrites 中。这很好。但它使用以下属性进行检查：request_path、is_system、store_id

我们的问题是某些行重复了 id_path 但具有不同的 request_path ......这很奇怪，不知道为什么它不应该......

但是使用这个替换功能，它还会检查 id_path 是否之前被处理过，如果是，它不会插入它。它解决了问题..

但是，我们仍然不知道问题的根源

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-02T14:50:09.533

**附加解决方案： -**

截断*core_url_rewrite*表时，您将丢失所有旧版 url 密钥更改传播记录。我发现删除所有标记为“ *is_system* ” 1 的记录将保持这些旧的 url 重定向，使用查询：-

```
DELETE FROM `core_url_rewrite` WHERE `is_system` = 1; 
```

这与截断表的影响相同，同时保持您可能创建的 url 更改传播或定制重定向。

**正如 Alan Storm 解释的那样：-**

> is_system属性可能更准确地命名*为**is_canonical_rewrite_for_category_or_product_category_combo*。也就是说，*is_system*是一个布尔标志，Magento 设置它让自己知道哪些行是系统级重写，由 Magento 创建，并且当前表示特定实体的“主”URL（与重定向重写相反，它们也是由系统创建，但将其*is_system*标志设置为 false）。艾伦风暴 - [http://alanstorm.com/](http://alanstorm.com/)

 ***此外，如果您可以将损坏范围缩小到产品或类别记录，您可以使用以下内容：-

维护类别重定向：-

```
DELETE FROM `core_url_rewrite` WHERE `is_system` = 1 AND `category_id` IS NOT NULL; 
```

保持产品重定向：-

```
DELETE FROM `core_url_rewrite` WHERE `is_system` = 1 AND `product_id` IS NOT NULL; 
```

总的来说，请记住标记为*is_system* 1 的所有记录都是 Magento 从产品或类别数据创建的，并且可以重新创建。标记为*is_system* 0 的记录在其他任何地方都不存在，如果您简单地截断 core_url_rewrite，将永远丢失来自其他站点的“死胡同”旧链接。

另一个影响的问题是 Magneto 在重新索引时尝试创建的 URL 重定向的数量。如果您有大量产品使用以下扩展可以加快索引时间并减少 core_url_rewrite 表中的记录数：- [http://www.magentocommerce.com/magento-connect/dn-d-patch- index-url-1.html](http://www.magentocommerce.com/magento-connect/dn-d-patch-index-url-1.html)

Dn'D 补丁索引 URL 扩展将 URL 索引限制为仅为单独可见的已启用产品创建记录。这很好用。

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T17:21:47.853

第一次工作，但在随后的重新索引中失败似乎有点不寻常。您确定您使用的是 InnoDB 并且您的 MySQL 设置正确吗？我会检查以确保您的 innodb 缓存足够大，并查看 MySQL 本身是否会吐出任何类型的错误。Magento 利用了 InnoDB 的事务查询，如果 MySQL 内存或空间不足来存储来自大型事务的准备好的查询，例如这样，您可能会遇到问题。

您得到的错误具有误导性，因为在第一次构建表时，会在第一次重新索引时捕获到重复的键。如果这是一个简单的数据问题，例如重复的 SKU 或不正确的类别层次结构，那么索引将在第一次尝试时失败。

您可能还想确保您的应用程序的 MySQL 用户有足够的权限在必要时刷新表。Magento 会想破坏桌子；如果不能，它可能会尝试重建，从而导致重复键错误。

我也会尝试查看`tail`您的`exception.log`文件，看看您是否可以获得堆栈跟踪并将其发布在此处。此外，尝试为 MySQL 库启用调试日志记录（您可以在第 103 行将默认值更改`$_debug`为- 您也可能希望将和更改为 true）。进去寻找路径。`true``/lib/Varien/Db/Adapter/Pdo/Mysql.php``$_logAllQueries``$_logCallStack``$_debugFile``tail`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T14:04:21.100

我发现 db 用户具有正确的权限，并且我不喜欢更改核心代码，无论它是否移动到本地。

从 1.4 升级到 1.6 后，在命令行重新索引后出现此错误。

```
php indexer.php -reindex catalog_url
An error occurred while saving the URL rewrite 
```

与日志中的以下异常配对：-

```
exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'category/360-1-6' for key 'UNQ_CORE_URL_REWRITE_ID_PATH_IS_SYSTEM_STORE_ID'' in httpdocs/lib/Zend/Db/Statement/Pdo.php:228 
```

我通过mysql运行以下查询来定位问题记录（注意查询与异常的关系），它与已重命名的类别有关...

```
QUERY: select * from core_url_rewrite where id_path =  "category/360"; 
```

我注意到这是一个类别 url 重写，并且 product_id 记录是 0 而不是 NULL，我怀疑这是问题所在，如果您遇到此问题，看看这对您来说是否相同会很有趣，运行下列的：

```
QUERY: select * from core_url_rewrite where product_id=0; 
```

当我运行上述查询时，它返回了一条记录问题记录。

我找到的解决方法是删除问题记录...

现在 catalog_url reindex 可以正常工作。

运行以下查询会返回一条 product_id 为 NULL 的新记录，并表示新的 URI 路径。旧的 URI 会导致 404，而不是应该做的重定向。

```
QUERY: select * from core_url_rewrite where id_path =  "category/360"; 
```

我相信这个问题是一个单一的数据记录问题，可能是在升级之后。我不同意更改 URL.php 或截断 core_url_rewrite 是正确的。

从那以后，我已经为 catalog_url 重建了两次索引，第三次作为完整重建索引的一部分。全部返回：目录 URL 重写索引已成功重建

我已经记录了我的发现，您的情况可能有所不同，但这有助于解释您如何找到问题并解决它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-22T20:54:45.863

不知道是什么导致我们网站出现这种情况，但修复很简单。如果您不关心旧的 URL 重定向（例如，您的产品 URL 一直是它们现在的样子，或者您不关心丢失历史记录）截断`core_url_rewrite`表，然后重新索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-05T04:39:52.460

最简单的解决方案是从 core_url_rewrite 表中删除这些记录并重新索引***

# ruby-on-rails - 根据 Rails 中的用户代理设置内容处置（iOS 错误的解决方法）

> ID：11781314
> 
> 赞同：0
> 
> 时间：2012-08-02T15:54:50.487
> 
> 标签：ruby-on-rails, ios

我在我的应用程序中遇到了[这个](https://stackoverflow.com/questions/9210015/jquery-ajax-stopped-working-with-ios-5-0-1)错误，移动 safari 中的 ajax 在收到回复后停止工作`Content-Disposition:attachment`

我想继续发送 disposition:attachment 到桌面浏览器和非 iOS 移动设备，同时在 iOS 上切换到 disposition:inline。我需要在几个不同的控制器操作中执行此操作。

除了将这些类型的块放在所有地方之外，还有一种优雅的方法吗？

```
if request.env['HTTP_USER_AGENT'] =~ /iPad/
    disposition = :inline
else 
    disposition = :attachment
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:07:53.733

只需在应用程序控制器中创建一个`before_filter`将一劳永逸地设置的控制器！

```
class ApplicationController < ActionController::Base
  before_filter :set_content_disposition

  def set_content_disposition
    if request.env['HTTP_USER_AGENT'] =~ /iPad/
      response.headers['Content-Disposition'] = 'inline'
    elsif params[:format].in?(['pdf', 'other_format', 'other_format2'])
      response.headers['Content-Disposition'] = 'attachment'
    end
  end
  #Rest of application controller code ...
end 
```

# ajax - 如何使用 ajax 自动刷新我的 JSF 页面？

> ID：11781318
> 
> 赞同：-2
> 
> 时间：2012-08-02T15:55:12.273
> 
> 标签：ajax, jsf

**设想**

我遇到的问题是我不知道如何自动刷新`<f:ajax>`JSF 组件。没有primefaces有没有办法做到这一点？我只使用 JEE6 包含的资源（没有其他库）。将`<f:ajax>`能够做到这一点。是否有一个属性`<f:ajax>`会在 bean 值更改时自动更新？

**问题：**

当我只能`<f:ajax>`点击按钮时。

**期望的目标**

`<f:ajax>`每N秒自动刷新一次

我正在使用的代码：

**helloAjax.html**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html">

    <h:body>

        <h3>Ajax Example</h3>

        <h:form>   
           <h:inputText id="name" value="#{ajaxBean.name}"></h:inputText>
           <h:commandButton value="Submit">
             <f:ajax execute="name" render="output" listener="#{ajaxBean.name}" onchange="Submit" />
           </h:commandButton>
           <h2><h:outputText id="output" value="#{ajaxBean.sayWelcome}" /></h2> 
        </h:form>

    </h:body>

</html> 
```

**AjaxBean.java：**

```
@ManagedBean
@SessionScoped
public class AjaxBean
{
    private String name ="";

    public String getName() 
    {
       return name;
    }
    public void setName(String name) 
    {
       this.name = name;
    }
    public String getSayWelcome()
    {

       if(name.equals("") || name ==null)
       {
           return "";
       }
       else
       {
         return "From AjaxBean: "+new java.util.Date().getTime() +" "+ name; 
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:27:44.420

您可以使用 jQuery 来触发事件，例如：

```
jQuery('#commandButtonId').tigger('click'); 
```

# vba - 从 Outlook 下载附件并在 Excel 中打开

> ID：11781320
> 
> 赞同：31
> 
> 时间：2012-08-02T15:55:25.807
> 
> 标签：vba, excel, outlook, email-attachments

我正在尝试使用 Excel 中的 VBA 在 Outlook 电子邮件中下载并打开 Excel 电子表格附件。我怎样才能：

1.  **从我的 Outlook 收件箱中的第一封电子邮件（最新的电子邮件）下载**唯一的附件
2.  **将附件保存**在具有指定路径的文件中（例如：“C:...”）
3.  将附件名称重命名为：**当前日期**+**以前的文件名**
4.  将电子邮件保存到不同的文件夹中，路径为“C:...”
5.  将 Outlook 中的电子邮件标记为“已读”
6.  **在 Excel 中打开**excel 附件

我还希望能够将以下内容保存为分配给单个变量的单个字符串：

*   发件人电子邮件地址
*   接收日期
*   发送日期
*   学科
*   电子邮件的消息

尽管这可能会更好地在一个单独的问题中提出/自己寻找。

我目前拥有的代码来自其他在线论坛，可能不是很有帮助。然而，这里有一些我一直在努力的点点滴滴：

```
Sub SaveAttachments()
    Dim olFolder As Outlook.MAPIFolder
    Dim att As Outlook.Attachment
    Dim strFilePath As String
    Dim fsSaveFolder As String

    fsSaveFolder = "C:\test\"

    strFilePath = "C:\temp\"

    Set olFolder = Application.GetNamespace("MAPI").GetDefaultFolder(olFolderInbox)

    For Each msg In olFolder.Items
        While msg.Attachments.Count > 0
            bflag = False
            If Right$(msg.Attachments(1).Filename, 3) = "msg" Then
                bflag = True
                msg.Attachments(1).SaveAsFile strFilePath & strTmpMsg
                Set msg2 = Application.CreateItemFromTemplate(strFilePath & strTmpMsg)
            End If
            sSavePathFS = fsSaveFolder & msg2.Attachments(1).Filename

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-02T16:48:46.323

我可以一次性给你完整的代码，但这无助于你从中学习；）所以让我们分解你的请求，然后我们将一个一个地处理它们。这将是一个很长的帖子，所以请耐心等待： )

共有 5 个部分将涵盖所有 7 个（是 7 个而不是 6 个）点，因此您不必为第 7 个点创建新问题。

* * *

## 第1部分

1.  创建与 Outlook 的连接
2.  检查是否有未读邮件
3.  检索详细信息，例如`Sender email Address`, `Date received`, `Date Sent`, `Subject`,`The message of the email`

请参阅此代码示例。我正在从 Excel 中使用 Outlook 进行后期绑定，然后检查是否有任何未读项目以及是否有我正在检索相关详细信息。

```
Const olFolderInbox As Integer = 6

Sub ExtractFirstUnreadEmailDetails()
    Dim oOlAp As Object, oOlns As Object, oOlInb As Object
    Dim oOlItm As Object

    '~~> Outlook Variables for email
    Dim eSender As String, dtRecvd As String, dtSent As String
    Dim sSubj As String, sMsg As String

    '~~> Get Outlook instance
    Set oOlAp = GetObject(, "Outlook.application")
    Set oOlns = oOlAp.GetNamespace("MAPI")
    Set oOlInb = oOlns.GetDefaultFolder(olFolderInbox)

    '~~> Check if there are any actual unread emails
    If oOlInb.Items.Restrict("[UnRead] = True").Count = 0 Then
        MsgBox "NO Unread Email In Inbox"
        Exit Sub
    End If

    '~~> Store the relevant info in the variables
    For Each oOlItm In oOlInb.Items.Restrict("[UnRead] = True")
        eSender = oOlItm.SenderEmailAddress
        dtRecvd = oOlItm.ReceivedTime
        dtSent = oOlItm.CreationTime
        sSubj = oOlItm.Subject
        sMsg = oOlItm.Body
        Exit For
    Next

    Debug.Print eSender
    Debug.Print dtRecvd
    Debug.Print dtSent
    Debug.Print sSubj
    Debug.Print sMsg
End Sub 
```

这样就可以处理您的请求，该请求涉及在变量中存储详细信息。

* * *

## 第2部分

现在继续您的下一个请求

1.  从我的 Outlook 收件箱中的第一封电子邮件（最新的电子邮件）下载唯一的附件
2.  将附件保存在具有指定路径的文件中（例如：“C:...”）
3.  将附件名称重命名为：当前日期 + 以前的文件名

请参阅此代码示例。我再次从 Excel 与 Outlook 进行后期绑定，然后检查是否有任何未读项目，如果有，我将进一步检查它是否有附件，然后将其下载到相关文件夹。

```
Const olFolderInbox As Integer = 6
'~~> Path for the attachment
Const AttachmentPath As String = "C:\"

Sub DownloadAttachmentFirstUnreadEmail()
    Dim oOlAp As Object, oOlns As Object, oOlInb As Object
    Dim oOlItm As Object, oOlAtch As Object

    '~~> New File Name for the attachment
    Dim NewFileName As String
    NewFileName = AttachmentPath & Format(Date, "DD-MM-YYYY") & "-"

    '~~> Get Outlook instance
    Set oOlAp = GetObject(, "Outlook.application")
    Set oOlns = oOlAp.GetNamespace("MAPI")
    Set oOlInb = oOlns.GetDefaultFolder(olFolderInbox)

    '~~> Check if there are any actual unread emails
    If oOlInb.Items.Restrict("[UnRead] = True").Count = 0 Then
        MsgBox "NO Unread Email In Inbox"
        Exit Sub
    End If

    '~~> Extract the attachment from the 1st unread email
    For Each oOlItm In oOlInb.Items.Restrict("[UnRead] = True")
        '~~> Check if the email actually has an attachment
        If oOlItm.Attachments.Count <> 0 Then
            For Each oOlAtch In oOlItm.Attachments
                '~~> Download the attachment
                oOlAtch.SaveAsFile NewFileName & oOlAtch.Filename
                Exit For
            Next
        Else
            MsgBox "The First item doesn't have an attachment"
        End If
        Exit For
    Next
 End Sub 
```

* * *

## 部分 - 3

继续您的下一个请求

1.  将电子邮件保存到不同的文件夹中，路径为“C:...”

请参阅此代码示例。这保存电子邮件说 C:\

```
Const olFolderInbox As Integer = 6
'~~> Path + Filename of the email for saving
Const sEmail As String = "C:\ExportedEmail.msg"

Sub SaveFirstUnreadEmail()
    Dim oOlAp As Object, oOlns As Object, oOlInb As Object
    Dim oOlItm As Object, oOlAtch As Object

    '~~> Get Outlook instance
    Set oOlAp = GetObject(, "Outlook.application")
    Set oOlns = oOlAp.GetNamespace("MAPI")
    Set oOlInb = oOlns.GetDefaultFolder(olFolderInbox)

    '~~> Check if there are any actual unread emails
    If oOlInb.Items.Restrict("[UnRead] = True").Count = 0 Then
        MsgBox "NO Unread Email In Inbox"
        Exit Sub
    End If

    '~~> Save the 1st unread email
    For Each oOlItm In oOlInb.Items.Restrict("[UnRead] = True")
        oOlItm.SaveAs sEmail, 3
        Exit For
    Next
End Sub 
```

* * *

## 部分 - 4

继续您的下一个请求

1.  将 Outlook 中的电子邮件标记为“已读”

请参阅此代码示例。这会将电子邮件标记为`read`。

```
Const olFolderInbox As Integer = 6

Sub MarkAsUnread()
    Dim oOlAp As Object, oOlns As Object, oOlInb As Object
    Dim oOlItm As Object, oOlAtch As Object

    '~~> Get Outlook instance
    Set oOlAp = GetObject(, "Outlook.application")
    Set oOlns = oOlAp.GetNamespace("MAPI")
    Set oOlInb = oOlns.GetDefaultFolder(olFolderInbox)

    '~~> Check if there are any actual unread emails
    If oOlInb.Items.Restrict("[UnRead] = True").Count = 0 Then
        MsgBox "NO Unread Email In Inbox"
        Exit Sub
    End If

    '~~> Mark 1st unread email as read
    For Each oOlItm In oOlInb.Items.Restrict("[UnRead] = True")
        oOlItm.UnRead = False
        DoEvents
        oOlItm.Save
        Exit For
    Next
 End Sub 
```

* * *

## 第 5 部分

继续您的下一个请求

1.  在excel中打开excel附件

一旦您下载了如上所示的文件/附件，然后使用以下代码中的路径打开文件。

```
Sub OpenExcelFile()
    Dim wb As Workbook

    '~~> FilePath is the file that we earlier downloaded
    Set wb = Workbooks.Open(FilePath)
End Sub 
```

我将这篇文章转换为几篇博客文章（有更多解释），可以通过[vba-excel中的第 15,16 和 17 点访问](http://www.siddharthrout.com/index.php/vba-excel/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-12T15:39:16.703

```
(Excel vba) 
```

*感谢 Sid :) 你的代码（偷了你的代码）..我今天遇到了这种情况。这是我的代码。下面的代码保存附件，邮件也邮件信息..所有学分都归 Sid*

```
Tested 

Sub mytry()
Dim olapp As Object
Dim olmapi As Object
Dim olmail As Object
Dim olitem As Object
Dim lrow As Integer
Dim olattach As Object
Dim str As String

Const num As Integer = 6
Const path As String = "C:\HP\"
Const emailpath As String = "C:\Dell\"
Const olFolderInbox As Integer = 6

Set olp = CreateObject("outlook.application")
Set olmapi = olp.getnamespace("MAPI")
Set olmail = olmapi.getdefaultfolder(num)

If olmail.items.restrict("[UNREAD]=True").Count = 0 Then

    MsgBox ("No Unread mails")

    Else

        For Each olitem In olmail.items.restrict("[UNREAD]=True")
            lrow = ActiveSheet.Range("A" & Rows.Count).End(xlUp).Row + 1

            Range("A" & lrow).Value = olitem.Subject
            Range("B" & lrow).Value = olitem.senderemailaddress
            Range("C" & lrow).Value = olitem.to
            Range("D" & lrow).Value = olitem.cc
            Range("E" & lrow).Value = olitem.body

            If olitem.attachments.Count <> 0 Then

                For Each olattach In olitem.attachments

                    olattach.SaveAsFile path & Format(Date, "MM-dd-yyyy") & olattach.Filename

                Next olattach

            End If
    str = olitem.Subject
    str = Replace(str, "/", "-")
    str = Replace(str, "|", "_")
    Debug.Print str
            olitem.SaveAs (emailpath & str & ".msg")
            olitem.unread = False
            DoEvents
            olitem.Save
        Next olitem

End If

ActiveSheet.Rows.WrapText = False

End Sub 
```

# xmonad - 如何获取 XMonad 中可见工作区的列表？

> ID：11781321
> 
> 赞同：3
> 
> 时间：2012-08-02T15:55:32.117
> 
> 标签：xmonad

如何在 xmonad 中获取可见工作区（当前显示在监视器上的工作区）的列表？目前在我的 xmonad.hs 配置文件中，命令 (XMonad.workspaces conf) 为我提供了所有工作区的列表。我对 Haskell 不是很熟悉，所以我无法理解这样的文档：http: [//xmonad.org/xmonad-docs/xmonad/XMonad-StackSet.html](http://xmonad.org/xmonad-docs/xmonad/XMonad-StackSet.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-09T08:10:13.290

```
visibleWorkspaces :: X [WorkspaceId]
visibleWorkspaces = do
  ws <- gets windowset
  return $ map W.tag $ W.current ws : W.visible ws 
```

# android - 构建一个使用 android GPS 和自定义地图的应用程序

> ID：11781323
> 
> 赞同：3
> 
> 时间：2012-08-02T15:55:39.490
> 
> 标签：android, android-mapview, locationmanager

是否可以为游乐园创建一个地图应用程序，这样您就可以在该自定义地图上看到显示我当前位置的自定义地图。

我是否至少符合以下逻辑？

用于`mapView`创建新的地图类

用于`ItemizedOverlay`覆盖我的自定义地图

用于`GeoPoint`将我的自定义地图叠加层正确定位在我的`mapView`

用于`LocationManager`获取用户位置并将市场添加到当前地图视图

**任何想法或想法将不胜感激。谢谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:34:37.473

您可以在地图视图上叠加自定义图像。我发现您可以使用我在这篇[文章的建议中找到的](https://stackoverflow.com/questions/4875564/custom-google-map-overlay)[maptiler](http://www.maptiler.org/)。

确切的回应是：

> 有几种不同的方法可以做到这一点。一种方法是创建一个 GTileLayer 对象并实现 getTileURL() 以返回指向您的图块的 URL。
> 
> 但首先，您需要一个以平铺格式正确剪切的图像。对于初学者，我建议您查看 MapTiler： http: [//www.maptiler.org/](http://www.maptiler.org/)它会为您剪切图像并生成带有叠加层的 GoogleMap。

# android - 表格布局顶部的文本视图

> ID：11781325
> 
> 赞同：-2
> 
> 时间：2012-08-02T15:55:47.813
> 
> 标签：android, xml, android-layout, xml-parsing, xml-layout

我如何在`TextView`我的`TableLayout`. （红色箭头）

另外，我如何缩小我的`TableLayout`. （棕色箭头）

[![在此处输入图像描述](../Images/086b0479a28b3b6111e4998c44a493ce.png)](https://i.stack.imgur.com/Gjh4M.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:10:42.973

你有两个选择。您可以将它们都放在RelativeLayout 或LinearLayout 中。如果你把它们放在一个RelativeLayout中，你只需要给出文本android:layout_above="@id/tablelayout"。如果您想使用 LinearLayout，请将方向设置为垂直，然后将它们扔在那里。

对于间隙，您可能在某处有一些填充。不看代码很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:16:02.643

**要修复行填充问题：**

您需要调整每个 的填充`TableRow`，请查看`TableRow`下面 xml 中的标签。提供了不同类型的填充。只需查看提供的内容，然后确定最适合您的情况。

**要解决`TextView`“大文本”问题：**

使用 a`LinearLayout`并将`TextView`上面的`TableLayout`带`vertical`方向放在 上`LinearLayout`，请查看下面的布局 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        style="@android:style/TextAppearance.Large"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="LargeText" />

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TableRow>

            <TextView
                android:padding="0dp"
                android:text="row1_a" />
        </TableRow>

        <TableRow>

            <TextView
                android:padding="0dp"
                android:text="row2_a" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

# java - Java泛型，使用，需要澄清

> ID：11781327
> 
> 赞同：1
> 
> 时间：2012-08-02T15:55:52.993
> 
> 标签：java, generics

认为

```
 A extends X 
```

您需要对对象 A 执行一些操作。执行操作的方法可能是：

```
 public void doMagic(List<? extends X> e) 
```

或者，您可以选择调用它

```
 public void doMagic2(List<X> e) 
```

您要求通过以下方式完成魔术：

```
 List<X> listOfA = new ArrayList<X>();
    listOfA.add(new A());

    C c = new C();
    c.doMagic(listOfA);   // works as expected
    c.doMagic2(listOfA);  // works as expected 
```

你能描述一下为什么一种方法比另一种更受欢迎，什么时候应该使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:03:15.590

万一`List<X>`你猜到了，它只适用于类型的对象`X`。

如果是`List<? extends X>`，它将接受if`X`的所有子类`X`或所有实现的列表。`X``X``interface`

`? extends X`当你想要处理各种不同的子类时，一个优于另一个的好处将允许你处理情况。

例如，一个计算文件大小（以字节为单位）的函数：

```
public int getTotalSizeInBytes(List<? extends File> files) {
...
} 
```

现在这个函数可以计算大小，不管文件类型是`plainTextFile`, `excelFile`,`wordFile`等等`databaseFile`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:05:23.130

假设你有这样的事情：

```
 List<A> listOfA = new ArrayList<A>();
    listOfA.add(new A()); 
```

你可以打电话`doMagic()`，但你不能打电话`doMagic2()`。如果您希望您的方法仅处理`X`对象而不是其任何子类，请使用`List<X>`. 但是，如果您的方法想要处理任何类型的`X`对象，而不关心它是否实际上是子类，请使用`List<? extends X>`

# eclipse - 导出 Eclipse 可执行项目

> ID：11781329
> 
> 赞同：0
> 
> 时间：2012-08-02T15:56:03.607
> 
> 标签：eclipse, build, makefile, eclipse-cdt

这似乎是一个常见且简单的问题，但我在任何地方都找不到有用的答案。在这个阶段，我已经束手无策了！

将eclipse与CDT插件一起使用，我创建了一个“可执行”C++项目，其中包含10个自动构建的源文件（但似乎没有保存makefile……但是它确实生成了一个.cproject xml文件）。

我的问题非常基本：这是 3 种主要的 CDT 项目类型之一 - 我如何将它按原样移动/导出到另一台机器并简单地保留自动构建功能？选择导出只会生成一个信息很少的无用文件。

# java - 如果在arraylist中满足条件，如何比较元素并合并？

> ID：11781330
> 
> 赞同：0
> 
> 时间：2012-08-02T15:56:07.303
> 
> 标签：java

我有交易列表，每个交易现在都有一些属性，例如来源，从交易列表中，我想获得所有具有相同来源价值的交易并将它们组合成一个交易，例如

```
tradeName      quote           source            quantity      price 
Google          GOOG           Goldman Sachs        15           610  
Microsoft       MSFT           Barclays             400          28
Google          GOOG           Goldman Sachs        45           610  
Google          GOOG           Goldman Sachs        40           610  
Microsoft       MSFT           Barclays             1000          28 
```

现在基于源信息，我应该合并交易，所以我更新的交易清单将是

```
tradeName      quote           source            quantity        price 
Google          GOOG           Goldman Sachs        100           610  
Microsoft       MSFT           Barclays             1400           28 
```

我不确定比较部分，如何解决？

* * *

尝试了以下方法，

```
for (Trade trade : tradeList)
{
   //Not sure how to compare this.trade.source with all sources 
   //of all trades present in the trade.
   //Logic should be if source matches then quantity should be added 
   //but am not sure how comparison would work.  
}

Class Trade
{

private tradeName;
private quote;
private source;
private quantity;
private price;

//Getters and Setters for each of above mentioned attributes. 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:01:30.337

我想我会创建一个`HashMap<String, Trade>`,`tradeName+quote+source`用作键，然后将列表中的每笔交易添加到地图中的相应项目中。

例子：

```
Map<String, Trade> map = new HashMap<String, Trade>();
for (Trade trade : tradeList) {
    String key = trade.tradeName + "#" + trade.quote + "#" + trade.source; // signature, what you merge by 
    if (map.containsKey(key)) {
        map.put(key, trade); // the first trade with such a signature 
    } else {
        // not the first, so merge it with the existing one
        map.get(key).add(trade); // you'll have to implement the Trade.add() method
    }
}
List<Trade> merged = new LinkedList<Trade>(map.values()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:23:37.417

虽然我同意使用 Hashmap 可能更有效，但我更喜欢尝试保留 OP 提供的方法。如果我们要遍历每个成员，让我们检查一下到目前为止我们是否找到了那个成员。如果是这样，修改他。如果没有，加他。我建议将所有这些都写入一个新列表，然后对新列表做任何你想做的事情（将旧列表设置为新列表，打印新列表，将新列表通过电子邮件发送给俄罗斯总统，等等）。

那么像下面这样的事情呢？（我没有编译这个，所以请原谅任何错别字）

```
//Create a new list to store our "simplified" results into
ArrayList<Trade> newTradeList = new ArrayList<Trade>(tradeList.size());

//For each trade in the old list, call it "trade" and...
for(Trade trade : tradeList){

    //First we ask, is there already a trade in this list with the same source?
    //indexOf finds where in the array the element lives. I store that result in index
    int index = newTradeList.indexOf(trade);

    //If the element isn't in our list yet, indexOf will return -1.
    //If the result is NOT -1, then we have already seen a trade with this source before
    if(index != -1) {
         //In that case, get that element. We know what index it lives at so grab it.
         Trade t = newTradeList.get(index);
         //Then, do whatever operations to combine the two trades. I assumed you add the quantities. 
         //So the trade in our new list's quantity should be what it was, plus the new trade's quantity
         t.setQuantity(t.getQuantity() + trade.getQuantity());
    } 

    //But if we have never seen this source before, let's add it to our our new list
    else {
         newTradeList.add(trade);
    }
} 
```

当然，这是做一些假设。为了`.indexOf`工作，您需要您的`Trade`类`equals`正确定义方法（检查来源，或来源和价格是否相同 - 任何看起来正确的东西）。如果你重新定义`equals`，你真的应该也定义`hashCode`。它还假设您有一个方法`.addQuantity`，因为它使代码比获取和集合的组合更简洁。

* * *

HashMap 的优点是几乎即时 (O(1)) 检查元素是否已经存在，并确保其中的元素是唯一的（因为 hashmap 是一个 Set，并且一个集合不能有重复的元素）。代码看起来很相似，除了我们可以利用 HashMap 的`containsKey`方法，而不是`indexOf`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:13:39.583

请检查这两种方法：

Java 豆：

```
public class Trade {

private String tradeName;
private String quote;
private String source;
private Integer quantity;
private Integer price;

public String getTradeName() {
    return tradeName;
}

public void setTradeName(String tradeName) {
    this.tradeName = tradeName;
}

public String getQuote() {
    return quote;
}

public void setQuote(String quote) {
    this.quote = quote;
}

public String getSource() {
    return source;
}

public void setSource(String source) {
    this.source = source;
}

public Integer getQuantity() {
    return quantity;
}

public void setQuantity(Integer quantity) {
    this.quantity = quantity;
}

public Integer getPrice() {
    return price;
}

public void setPrice(Integer price) {
    this.price = price;
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((source == null) ? 0 : source.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Trade other = (Trade) obj;
    if (source == null) {
        if (other.source != null)
            return false;
    } else if (!source.equals(other.source))
        return false;
    return true;
}

@Override
public String toString() {
    StringBuilder builder = new StringBuilder();
    builder.append("Trade [tradeName=");
    builder.append(tradeName);
    builder.append(", quote=");
    builder.append(quote);
    builder.append(", source=");
    builder.append(source);
    builder.append(", quantity=");
    builder.append(quantity);
    builder.append(", price=");
    builder.append(price);
    builder.append("]");
    return builder.toString();
}
} 
```

- 编辑 -

检查一下，这很简单：

```
import java.util.ArrayList;
import java.util.List;

public class TradeTest {

/**
 * @param args
 */
public static void main(String[] args) {
    Trade t1 = new Trade();
    t1.setPrice(610);
    t1.setQuantity(15);
    t1.setQuote("GOOG");
    t1.setSource("Goldman Sachs");
    t1.setTradeName("Google");

    Trade t2 = new Trade();
    t2.setPrice(28);
    t2.setQuantity(400);
    t2.setQuote("MSFT");
    t2.setSource("Barclays");
    t2.setTradeName("Microsoft");

    Trade t3 = new Trade();
    t3.setPrice(610);
    t3.setQuantity(45);
    t3.setQuote("GOOG");
    t3.setSource("Goldman Sachs");
    t3.setTradeName("Google");

    Trade t4 = new Trade();
    t4.setPrice(610);
    t4.setQuantity(40);
    t4.setQuote("GOOG");
    t4.setSource("Goldman Sachs");
    t4.setTradeName("Google");

    Trade t5 = new Trade();
    t5.setPrice(28);
    t5.setQuantity(1000);
    t5.setQuote("MSFT");
    t5.setSource("Barclays");
    t5.setTradeName("Microsoft");

    List<Trade> trades = new ArrayList<Trade>();
    trades.add(t1);
    trades.add(t2);
    trades.add(t3);
    trades.add(t4);
    trades.add(t5);

    List<Trade> googleTrades = new ArrayList<Trade>();
    List<Trade> microsoftTrades = new ArrayList<Trade>();

    Integer googleQuantities = 0;
    Integer microsoftQuantities = 0;

    for (Trade trade : trades) {
        if (trade.getSource().equals("Goldman Sachs")) {
            googleTrades.clear();
            googleQuantities += trade.getQuantity();
            trade.setQuantity(googleQuantities);
            googleTrades.add(trade);
        } else if (trade.getSource().equals("Barclays")) {
            microsoftTrades.clear();
            microsoftQuantities += trade.getQuantity();
            trade.setQuantity(microsoftQuantities);
            microsoftTrades.add(trade);
        }
    }

    System.out.println("Google trades: \n");
    System.out.println(googleTrades);
    System.out.println("\n");
    System.out.println("Microsoft trades: \n");
    System.out.println(microsoftTrades);

} 
```

}

检查这是否适合您。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T16:38:03.057

我觉得应该这样做。

```
Trade gsTrades = new Trade();
    Trade barclaysTrades = new Trade();

    for(Trade trade: tradeList){
        if(trade.getSource().equals("GS")){
            gsTrades.setQuantity(gsTrades.getQuantity()+trade.getQuantity());
            gsTrades.setPrice(gsTrades.getPrice()+trade.getPrice());
        }else{
            barclaysTrades.setQuantity(barclaysTrades.getQuantity()+trade.getQuantity());
            barclaysTrades.setPrice(barclaysTrades.getPrice()+trade.getQuantity());
        }
    }
    System.out.println("GS trade details = " + gsTrades.toString());
    System.out.println("Barclays trade details = " + barclaysTrades.toString()); 
```

# mysql - SELECT JOIN WHERE 查询的最佳实践

> ID：11781334
> 
> 赞同：0
> 
> 时间：2012-08-02T15:56:14.210
> 
> 标签：mysql, select, join

我有 2 个表，第一个被称为`friendship`第二个被称为`user`具有以下详细信息

`friendship`表字段：

```
uid1, uid2 
```

`user`表字段：

```
uid, username, primary_email, f_name, m_name, l_name, avatar, avatar_path 
```

`user`想法是在表上时从表`uid1`中获取所有朋友的详细信息`friendship`，例如 =1 以下查询是这个想法的最佳实践吗？

```
SELECT 
   u.uid,
   u.username,
   u.primary_email,
   u.f_name,
   u.m_name,
   u.l_name,
   u.avatar,
   u.avatar_path 
FROM friendship AS f 
LEFT JOIN user AS u ON f.uid2=u.uid 
WHERE f.uid1=1 
```

最佳实践是对单个查询使用连接还是使用 2 个查询一个从友谊表中提取 id，第二个从用户表中提取每个 id 的详细信息，例如：-

```
SELECT uid2 from friendship WHERE uid1 =1 
```

这个查询给了我 ids 2,4,6,5,9 的数组然后我在下面的查询中使用它

```
SELECT * from user WHERE uid IN (2,4,6,5,9) 
```

最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:20:18.120

此查询将为您提供主要人物的姓名和他们朋友的姓名：

```
create table users
(
    uid int,
    username varchar(10),
    fname varchar(10)
)

insert into users values(1, 'test', 'Jim')
insert into users values(2, 'blah', 'Tim')
insert into users values(3, 'xxx', 'Henry')
insert into users values(4, 'nada', 'Bob')

create table friendship
(
    uid1 int,
    uid2 int
)

insert into friendship values (1, 2)
insert into friendship values (1, 3)
insert into friendship values (2, 3)
insert into friendship values (3, 4)

select u2.uid personid
    , u2.fname personname
    , f.uid2 friendid
    , u1.username friendusername
    , u1.fname friendname
from users u1
inner join friendship f
    on u1.uid = f.uid2
left join users u2
    on f.uid1 = u2.uid 
```

结果：

![在此处输入图像描述](../Images/e90481ef5a3e68458beec78776622964.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:59:01.900

如果您确定要使用所有数据，我会说在单个查询中提取结果是最佳做法。这将只需要一次访问数据库，而不是每个朋友一次（加上初始查询）。

但是请注意，由于您使用的是来自友谊的 LEFT OUTER JOIN，因此如果友谊表中没有对应的 uid 用户记录，则可能会返回 NULL 行。

尝试这样的 INNER JOIN：

```
SELECT 
   u.uid,
   u.username,
   u.primary_email,
   u.f_name,
   u.m_name,
   u.l_name,
   u.avatar,
   u.avatar_path 
FROM friendship AS f
JOIN `user` AS u
  ON u.uid = f.uid2
WHERE f.uid1 = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:02:54.923

你的“友谊”状态是定向的还是非定向的？即如果user1 是user2 的朋友，是否暗示user2 是user1 的朋友？如果是这样，您必须更改您的`ON`和`WHERE`条件：

```
ON f.uid2 = u.uid OR f.uid1 = u.uid
WHERE u.uid = 1 
```

除此之外，我认为该选择查询没有任何问题。

# java - Java applet try/catch 语句发生了奇怪的事情

> ID：11781336
> 
> 赞同：0
> 
> 时间：2012-08-02T15:56:22.280
> 
> 标签：java, exception-handling, try-catch

我的小程序发生了一些奇怪而神秘的事情！它涉及一个人猜测一个数字，然后将其与一个随机数进行比较。你一直在猜测，直到你猜对了。如果您输入类似

```
ewjkgmvf 
```

你会`NumberFormatException`在输入字段上得到一个。为了解决这个问题，我用 try...catch 包围了 String 到 int 的转换。如果捕获到异常，标签应该显示“这不是数字！”。相反，它只是说“太低了。再试一次”，只有当你猜到的数字太低时才会发生这种情况。我究竟做错了什么？

我将发布整个程序，因为它只是一个简短的程序。

这是我的代码：

```
import java.awt.*;
import java.applet.*;
import java.util.Random;
public class Number_guess_applet extends Applet{
    private static final long serialVersionUID = 1L;
    Button btnClick;
    TextField entry;
    Label prompt;
    String temp;
    Random r = new Random();
    int x = r.nextInt(100);
    int number;
    int keepGoing = 1;

        public void init(){
        prompt = new Label("Guess the number");
        add(prompt);
        entry = new TextField(10);
        add(entry);
        btnClick = new Button("Check your guess");
        add(btnClick);
    }
    public boolean action(Event evt, Object arg){

        temp = entry.getText();
        try
        {
        number = Integer.parseInt(temp);
        }
        catch(java.lang.NumberFormatException e)
        {
        prompt.setText("That is not a number!");
        }
        if (x < number)
            prompt.setText("Too high. Try again.");
        else if (x > number)
            prompt.setText("Too low. Try again.");
        else if (x == number)
            prompt.setText("Found it!");
        else
            prompt.setText("Invalid or not a number. Choose a number between 1 and 100");
        return(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:01:23.270

将逻辑移动到 try / catch - 之后您将执行它，因此它会覆盖提示文本：

```
 try {
        number = Integer.parseInt(temp);
        if (x < number)
            prompt.setText("Too high. Try again.");
        else if (x > number)
            prompt.setText("Too low. Try again.");
        else if (x == number)
            prompt.setText("Found it!");
        else
            prompt.setText("Invalid or not a number. Choose a number between 1 and 100");
 } catch(java.lang.NumberFormatException e) {
        prompt.setText("That is not a number!");
 }
 return(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:59:51.410

仔细看：

```
try
{
    number = Integer.parseInt(temp);
}
catch(java.lang.NumberFormatException e)
{
    prompt.setText("That is not a number!");
}
if (x < number) {
    //... 
```

如果`NumberFormatException`被抛出，您没有设置任何值`number`，有效地使用前一个值。您应该设置一些值`number`或完全跳过逻辑`number`。否则，您的`if (x < number)`条件会在之前的值上运行`number`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:59:53.903

在 catch 块完成执行后，该方法的其余部分将执行（`number`保持不变）。

您需要从`catch`街区返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T16:01:21.617

发生的事情是提示得到了文本“这不是数字！” 并立即收到文本“太高了。再试一次。” 或“太低了。再试一次。” 或“找到它！” 根据数字的旧值，数字永远不会被重新分配。您可以在您的操作方法中尝试以下操作：

```
 temp = entry.getText();
        try
        {
          number = Integer.parseInt(temp);
          if (x < number)
              prompt.setText("Too high. Try again.");
          else if (x > number)
              prompt.setText("Too low. Try again.");
          else if (x == number)
              prompt.setText("Found it!");
          else
              prompt.setText("Invalid or not a number. Choose a number between 1 and 100");
        }
        catch(java.lang.NumberFormatException e)
        {
        prompt.setText("That is not a number!");
        }

        return(true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T16:01:51.303

Number 默认为 0。由于您仍在将 number 与 x 进行比较，因此您会收到该消息。一种选择是将 return 语句放在你的 catch 块中。

# plone - 将克隆 2.x 升级到 4x

> ID：11781341
> 
> 赞同：3
> 
> 时间：2012-08-02T15:56:43.670
> 
> 标签：plone

我想将我的站点从 plone 版本 2.55 升级到 4.x。我知道我可能必须将站点从 plone 2x 升级到 3x，然后从 3x 升级到 4x。这是推荐的解决方案吗？还是从全新安装 4.2 开始，安装附加组件，然后通过 FTP 迁移文件和内容更好？想法和评论将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:04:10.273

这在很大程度上取决于您在网站上使用的附加组件。附加组件本身可能存在问题（没有可用的 4.2 兼容版本），或者它们管理的数据未更新以跟随更新的附加组件中的更改。

不过，大多数情况下，从 2.5 升级到 4.2 应该没问题。直接在 4.2 安装上尝试（复制 Data.fs，安装兼容版本的附加组件，升级），或使用 3.x 中间版本。

克隆[升级指南](http://plone.org/documentation/manual/upgrade-guide/)详细记录了该过程。

# jquery - 在其父级中保留一个可拖动的 div

> ID：11781346
> 
> 赞同：6
> 
> 时间：2012-08-02T15:57:12.187
> 
> 标签：jquery, html, tags, position, limit

我有一个可拖动的 div 标签，我希望它在被拖动时不会从其父级溢出。

```
<script>
    $('.children').resizeable().draggable();//from jquerUI
</script>

<style>
    .parent{
        overflow: hidden;
        position: relative;
        width: 1000px;
        height: 1000px;
    }
    .children{
        width: 100px;
        height: 100px;
        position: absolute;
    }
</style>

<div class="parent">
   <div class="children"><div>
</div> 
```

如何限制子项在父项中的位置和大小。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T16:08:55.223

```
$('.children').draggable({ containment: "parent" }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T20:01:36.903

这是另一个可拖动元素内的可拖动元素[的完整工作演示。](http://jsbin.com/ijatij/2/edit)

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Draggable - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <style>
  #draggable { width: 150px; height: 150px; padding: 0.5em; }
  </style>
  <script>
  $(function() {
    $( "#draggable" ).draggable();
    $( "#draggable1" ).draggable({containment: "parent"});
  });
  </script>
</head>
<body>

<div id="draggable" class="ui-widget-content draggable">
  <p>Drag me around</p>
  <div id="draggable1" class="ui-widget-content draggable">
    <p>Drag me around</p>
  </div>
</div>

</body>
</html> 
```

# android - Android：当我不使用 IPC 时，为什么要以超过虚拟容量使用服务？

> ID：11781347
> 
> 赞同：2
> 
> 时间：2012-08-02T15:57:11.593
> 
> 标签：android, service

在花了很多时间试图弄清楚使用服务来执行我的后台任务而不是简单的单例类究竟有什么好处之后，我似乎发现的唯一具体答案是，*仅仅存在*一个已启动的服务就会使系统不太可能杀死我的进程。

如果是这种情况，那么除了启动和停止它来表示我不希望我的进程在某些时候被终止之外，还有什么理由实际使用服务的任何功能？与其处理绑定到服务等的麻烦，为什么不将简单的单例与“setPleaseDontKillMyProcessIfYouCanHelpIt(boolean)”方法结合使用，以适当地启动和停止虚拟服务？同样，我没有使用进程间通信，因此这里不考虑功能。

我知道一个用户[在这里](https://stackoverflow.com/questions/8310364/is-android-service-useful-when-i-dont-need-interprocess-communication)问了一个类似的问题，但他没有得到一个直接的答案，只是重申了一个事实，即启动的服务会阻止系统杀死你的应用程序（并建议他“正确使用服务” “而不是使用单例和虚拟服务，但没有说明原因）。

提前感谢您的任何答案。这是我第一次使用 StackOverflow，所以如果我违反了任何礼仪规则，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:55:30.927

我也试图弄清楚这一点。您可能需要考虑几件事，服务：

*   允许您使用 Intents 进行松散耦合（您可以将活动和服务之间的整个通信过程限制为仅 Intents）
*   可以处理广播接收器转发的意图（例如 TIMEZONE_CHANGED）
*   允许您将操作移出主线程，如果它们变得耗时
*   允许您了解应用程序生命周期 - 服务在创建或停止时获取回调

将服务视为没有 GUI 的活动。它也是一个生命周期管理的对象，它可以访问你的 Singleton。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:25:06.293

不同的是，在正常情况下，一个 Service 不会被 Android 杀死。如果你有一个服务，你的单例类可能不太可能被杀死，但是当另一个应用程序占用空间时它肯定会被杀死。您不想使用服务的原因是什么？

# android - 更改 Android 中 OpenGL ES 的缩放策略？

> ID：11781353
> 
> 赞同：0
> 
> 时间：2012-08-02T15:57:39.393
> 
> 标签：android, libgdx

我目前在 OpenGL ES 1.0 中为 Android 开发游戏，使用 libgdx 库。我的目标是 720x480 的屏幕尺寸。

例如，我只为 720x480 设计了一个艺术包。屏幕尺寸小于或大于 480x320 的 Android 手机会发生什么？您能否告诉我如何在 Android 中更改 OpenGL ES 的缩放策略？还是特别在 libgdx 中？

有没有像photoshop这样的“重新采样图像”之类的东西？（最近邻，双线性，双三次等）用于libgdx？

**编辑**：我在OpenGL中找到了一些关于纹理过滤器的教程，用线性和最近测试它。线性适合缩放但会减慢游戏速度，而最近则相反。我应该怎么做才能在这些之间取得平衡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:32:32.293

[你可以在这里](https://stackoverflow.com/a/11136438/923847)看到我的回答。您应该做的是创建几种不同大小的所有资产。然后根据设备加载适当的大小。请参阅我的链接，了解 libgdx 如何帮助解决所有这些问题。

# ruby - 如何从 Sinatra 进行 Github 风格的 Markdown 渲染？

> ID：11781354
> 
> 赞同：4
> 
> 时间：2012-08-02T15:57:40.753
> 
> 标签：ruby, sinatra, markdown, tilt

TL;DR - 我怎样才能使用类似的东西`improved_markdown :some_file`进行自定义渲染，但仍然像往常一样渲染布局？

* * *

通常，要在 Sinatra 中渲染 Markdown，您只需执行以下操作：

```
markdown :some_file 
```

但我想添加“隔离”语法突出显示的功能，就像你可以在 Github README 文件中做的那样。

```
```ruby
class Foo
  # etc
end
``` 
```

我已经部分工作了。

首先，我安装了[Redcarpet并添加了一个使用](https://github.com/vmg/redcarpet)[Pygments.rb](https://github.com/tmm1/pygments.rb/)进行语法高亮的自定义渲染类：

```
# create a custom renderer that allows highlighting of code blocks
class HTMLwithPygments < Redcarpet::Render::HTML
  def block_code(code, language)
    Pygments.highlight(code, lexer: language)
  end
end 
```

然后我在一条路线中使用它，如下所示：

```
# Try to load any Markdown file specified in the URL
get '/*' do
  viewname = params[:splat].first

  if File.exist?("views/#{viewname}.md")

    # Uses my custom rendering class
    # The :fenced_code_blocks option means it will take, for example,
    # the word 'ruby' from ```ruby and pass that as the language
    # argument to my block_code method above  
    markdown_renderer = Redcarpet::Markdown.new(HTMLwithPygments, :fenced_code_blocks => true)

    file_contents = File.read("views/#{viewname}.md")
    markdown_renderer.render(file_contents)

  else
    "Nopers, I can't find it."
  end
end 
```

这**几乎**可以工作。Markdown 呈现为带有附加标记的 HTML 以用于突出显示。

唯一的问题是它不使用我的布局；毕竟，我只是在读取一个文件并返回呈现的字符串。正常的`markdown :foo`通话将涉及 Tilt 的过程。

我是否必须创建自定义 Tilt 模板引擎才能使其正常工作，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T23:24:34.573

您可以将任意选项传递给该`markdown`方法（或任何其他渲染方法），它们将被传递给相关的 Tilt 模板。Tilt 的 Redcarpet 模板在创建渲染器时会查找任何提供`:renderer`的选项，允许您指定自定义选项。

您还可以`markdown`通过将它们作为第二个参数传递给`set :markdown, :option => :value`.

但这并不那么简单，因为当前（已发布）版本的 Tilt 无法正确检测您是否安装了 Redcarpet 2。你可以明确地告诉它：

```
# first ensure we're using the right Redcarpet version
Tilt.register Tilt::RedcarpetTemplate::Redcarpet2, 'markdown', 'mkd', 'md'

# set the appropriate options for markdown
set :markdown, :renderer => HTMLwithPygments,
  :fenced_code_blocks => true, :layout_engine => :haml 
```

现在任何对代码块的调用都`markdown`应该使用您的自定义代码，并将`layout.haml`用作布局。

（免责声明：我无法让 Pygments 正常工作（它会导致 Sinatra 每次都崩溃），但这里的其他一切都有效（我使用了一个简单的自定义`block_code`方法，它只是添加了一条消息，所以我可以知道它正在工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:43:03.043

## 一种解决方法

我目前正在这样做：

```
if File.exist?("views/#{viewname}.md") 
  CustomMarkdown.render(File.read("views/#{viewname}.md")) 
```

哪个用途：

```
module CustomMarkdown
  def self.render(markdown_string)
    content = renderer.render(markdown_string)
    layout.render { content }
  end
  def self.renderer
    @markdown_renderer ||= Redcarpet::Markdown.new(HTMLwithPygments, :fenced_code_blocks => true)
  end
  def self.layout
    # Yes, this is hardcoded; in my simple app, I always use this layout.
    Tilt['haml'].new do
      File.read("views/layout.haml")
    end
  end
end 
```

这工作得体。我注意到没有关键字的围栏块，如下所示：

```
```
  code of unspecified type
```
# vs
```ruby
  explicitly ruby code
``` 
```

... 导致我的 Sinatra 应用程序崩溃。我认为这意味着 Python 层中存在错误，因为我自己无法捕获任何引发的错误。

**更新**：崩溃发生在`rackup config.ru`，但不是当我使用乘客时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T21:48:12.617

您可以使用 zzak 的[Glorify](https://github.com/zzak/glorify) gem 来完成此类工作。

# asp.net - 相同命名空间中的相同类名

> ID：11781356
> 
> 赞同：0
> 
> 时间：2012-08-02T15:57:48.747
> 
> 标签：asp.net, vb.net, class, namespaces

我正在开发一个网络项目，我被要求将一些文件从一个项目移动到另一个项目，但是这两个项目都在同一个解决方案中。所以我将 File1 从项目 A 迁移到项目 B。但是，我在 File1 中有一个“Foo”命名空间，其中有一个名为“Bar”的类。但是，我在项目 B 中也有一个“Foo”命名空间，而在另一个“Foo”命名空间中，我还有另一个“Bar”类。知道重命名命名空间或类不是一种选择，我该如何解决这个问题？

谢谢，

拉霍斯阿尔帕德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:13:53.687

只需您有两个选择：

1.  重命名类或命名空间
2.  合并两个 Bar 类（您可以将它们都设为部分，或者通过将代码从一个移动到另一个来合并它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:02:21.557

你不可以做这个。您需要更改源或目标的名称空间或类名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T19:09:45.547

我已经设法通过为 B 项目提供默认命名空间来解决我的问题，因此在 B 项目中生成的给定命名空间最终位于项目的默认命名空间内，而来自 DLL 的命名空间仍然在默认命名空间之外该项目。

# ruby-on-rails - 为什么加一个月只加31天而不加一个月？

> ID：11781358
> 
> 赞同：2
> 
> 时间：2012-08-02T15:57:50.160
> 
> 标签：ruby-on-rails, timezone

确实非常奇怪的错误。我有一个每个月都会克隆自己的项目，将下一个对象设置为将来有一个`scheduled_on`日期`+ 1.months`。

但后来发生了这种情况：

```
Sun, 01 Apr 2012 16:00:00 PDT -07:00
Tue, 01 May 2012 16:00:00 PDT -07:00
Fri, 01 Jun 2012 16:00:00 PDT -07:00
Sun, 01 Jul 2012 16:00:00 PDT -07:00
Wed, 01 Aug 2012 16:00:00 PDT -07:00
Fri, 31 Aug 2012 17:00:00 PDT -07:00 # <--- What in the.. 
```

编码 ：

```
def clone_object
  objects = []

  Time.zone = account.timezone
  Chronic.time_class = Time.zone

  now = last_scheduled_on.to_time # <- this would have been Wed, 01 Aug 2012 16:00:00 PDT -07:00

  new_date = now + 1.months

  new_schedule = Time.zone.parse new_date.strftime('%Y-%m-%d' + ' ' + original_scheduled_on.strftime('%H:%M:%S'))

  objects << clone!(:scheduled_on => new_schedule, :recurring_job_id => id)

end 
```

这是实际代码的一个非常截断的版本。但它包括我合理影响这个问题的所有部分。

所以问题是..这个错误怎么可能发生？

**更新**

我很确定这与时区有关。

以下是 UTC 日期：

```
In UTC :

Sun, 01 Apr 2012 23:00:00 UTC +00:00
Tue, 01 May 2012 23:00:00 UTC +00:00
Fri, 01 Jun 2012 23:00:00 UTC +00:00
Sun, 01 Jul 2012 23:00:00 UTC +00:00
Wed, 01 Aug 2012 23:00:00 UTC +00:00
Sat, 01 Sep 2012 00:00:00 UTC +00:00
Sun, 30 Sep 2012 23:00:00 UTC +00:00 
```

在这里，它们被转换为 Pacific ：

```
In Pacific

Sun, 01 Apr 2012 16:00:00 PDT -07:00
Tue, 01 May 2012 16:00:00 PDT -07:00
Fri, 01 Jun 2012 16:00:00 PDT -07:00
Sun, 01 Jul 2012 16:00:00 PDT -07:00
Wed, 01 Aug 2012 16:00:00 PDT -07:00
Fri, 31 Aug 2012 17:00:00 PDT -07:00
Sun, 30 Sep 2012 16:00:00 PDT -07:00 
```

我还注意到我放在这里的代码对我的服务器不准确。服务器将 Time.zone 设置为最后一个作业，而**不是帐户的 timezone**。这意味着（或者至少我认为这意味着）时区是浮动和动态的。但这也让我感到困扰，因为加利福尼亚的夏令时直到 11 月才转换，而不是 9 月。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:02:23.823

发生这种情况的原因是，当您添加两个 DateTime 时，DateTime 对象将添加天数并破坏时区。

当您将两个 Time 对象添加在一起时，它们将按小时添加，并包括任何时区差异。

之所以会出现小时差异，是因为两个 DateTime 加在一起超出了时区更改。然后将时间以相同的数字保存到 UTC 中的数据库中，尽管事实上当它们稍后在各自的时区中解析时，它们将偏移一小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:13:12.630

时间计算总是有问题的。1.month 可能是 30 天、31 天、28 天或介于两者之间的任何时间。这取决于添加的月份、添加的内容等等。因此，不幸的是，在进行日期算术时，这样的错误很常见，而且很烦人。

要更正此代码，我将始终确保它选择您所在月份的月初，如下所示：

```
new_date = (now + 1.months).beginning_of_month 
```

那将永远是每月的 1 日。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:30:24.707

你试过 .next_month 吗？[http://api.rubyonrails.org/classes/Time.html#method-i-months_since](http://api.rubyonrails.org/classes/Time.html#method-i-months_since)

# c# - TFS 源代码控制导致我出现缓存问题

> ID：11781359
> 
> 赞同：1
> 
> 时间：2012-08-02T15:57:59.263
> 
> 标签：c#, .net, tfs

当我的 TFS 源代码控制处于联机状态时，我遇到了这个问题，我对 .Web 项目的一些更改没有生效。但是当我将 TFS 脱机时，我的更改就会生效。我正在使用 TFSPreview，顺便说一句，这很棒。但我真的不明白我看到的问题。我对 TFS 很陌生，我将不胜感激

我所做的更改是对 .cshtml 文件的更改。只需更改其中的单词和文件引用即可。从字面上删除东西，它们仍然存在。

**这将澄清我的问题。TFS 源代码管理具有离线模式。如果将自己置于离线模式，则不会出现问题，并且会出现我的更改。如果我进入在线模式，我的更改不会在我运行项目时显示。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:16:35.143

当您从离线模式进入在线模式时，VS 会将本地更改同步到服务器。它的方法是找出哪些文件不是只读的。假设有人锁定了服务器上的文件以禁用签出，在这种情况下，VS 将忽略本地更改并获取服务器只读副本。我的猜测是您或其他人已经签出了与独家相同的副本。在这种情况下，当您联机时，TFS 不会确认您的更改并丢弃它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:00:55.273

使用 TFS 要记住的是，它控制的文件被标记为只读。

您没有提及您尝试进行哪些类型的更改，但如果您尝试更改配置信息，例如，并且文件处于只读模式，那么您的更改将不会进行。

# asp.net - 从 WebAPI 调用自定义方法

> ID：11781364
> 
> 赞同：0
> 
> 时间：2012-08-02T15:58:09.287
> 
> 标签：asp.net, routing, asp.net-web-api

所以我正在为一个 WebAPI 应用程序制作一个概念验证原型，所有常用方法都很好用。但我也想证明能够通过 WebAPI 调用自定义方法。所以我的 RouteConfig.cs 中有以下路由：

```
routes.MapHttpRoute(
               name: "ActionApi",
               routeTemplate: "api/{controller}/{action}/{id}",
               defaults: new { id = RouteParameter.Optional }
            ); 
```

在控制器中，我有一个简单的方法：

```
[HttpGet]
public string Test()
{
    return "this is a string";
} 
```

当我尝试调用我的方法时：`http://localhost:43225/api/values/test`我在浏览器中收到以下错误：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
The parameters dictionary contains a null entry for parameter 'id' of non-nullable type 'System.Int32' for method 'System.String Get(Int32)' in 'WebAPI_Listener.Controllers.ValuesController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter.
</string> 
```

但是，如果我在 url 的末尾指定一个 ID，例如`http://localhost:43225/api/values/test/1`它可以工作，即使方法本身根本不带参数。

因此，在路由中，如果我将 id} 设置为可选，为什么当我不指定 {id} 时它不起作用，但如果我这样做了，即使方法本身不期望 { ID}？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T20:02:45.203

您需要在 ~/App_Start/WebAPIConfig.cs 注册方法中声明您的 API 路由。WebAPIConfig 中的包罗万象的路由在 RouteConfig 路由之前，因此永远不会选择您的路由。

这是一个将类似于您的路由添加到 WebAPIConfig 的示例。这个例子有一个缺点：你必须为一个匹配这个路由的控制器显式声明 HTTP 动词（即 ~/api/values/get/5 而不是 ~/localhost:43225/api/values/5）。

```
 config.Routes.MapHttpRoute(
            name: "CustomAPIActions",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

为了避免这个缺点，你可以像这样限制到给定控制器的路由：

```
 config.Routes.MapHttpRoute(
            name: "ApiNonCrudActionsForMyController",
            routeTemplate: "MyController/{action}/{id}",
            defaults: new { controller = "MyController", id = RouteParameter.Optional }
        ); 
```

您还可以将路由限制到控制器和操作，以保留标准动词，但如果您经常这样做，这可能会成为维护问题或混淆点。

```
 config.Routes.MapHttpRoute(
            name: "ApiNonCrudActionsForMyController",
            routeTemplate: "MyController/Test/{id}",
            defaults: new { controller = "MyController", action = "Test", id = RouteParameter.Optional }
        ); 
```

有关更多详细信息和其他一些方法，请查看：[http](http://encosia.com/rest-vs-rpc-in-asp-net-web-api-who-cares-it-does-both/) ://encosia.com/rest-vs-rpc-in-asp-net-web-api-who-cares-it-does-both/ 。您还可以考虑将您的操作限制为 HTTP 动词，并为自定义操作添加额外的控制器（即 ~/localhost:43225/api/TestValues/5）。

# php - PHP 脚本在后台运行，进度可见

> ID：11781371
> 
> 赞同：3
> 
> 时间：2012-08-02T15:58:38.100
> 
> 标签：php, ajax, progress

> **可能重复：**
> [显示 PHP 长脚本的进度](https://stackoverflow.com/questions/7049303/show-progress-for-php-long-script)

我有一个 PHP 脚本，可以根据要求生成大型 PDF 文档。这通常需要大约 1-2 分钟，让用户知道它已完成的唯一方法是在整个过程完成时发送电子邮件。

我想在生成文件时向用户显示某种进度条。完成这项任务的最佳方法是什么？我唯一想到的是生成 PDF 的脚本应该将数据保存在数据库中（我已经在项目中使用了 MySQL），并且在客户端我可以包含 Ajax 请求，该请求将轮询此进度数据说每 5 秒显示给用户。所以可能会有两个 Ajax 请求：一个启动 PDF 生成脚本，另一个让用户查看进度。

我想我可以这样做，但是有没有我可能不知道的标准方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:13:12.103

## 您提出的方法：

...可能是最简单的，它也在已知的场地上行走，因此您可以轻松处理和调试。

对此我只能补充一点，您可以使用 fork/exec/passthrough 而不是启动 PDF 生成的 ajax 调用。

## 一种更优雅（阅读：复杂）的方法：

[PHP Gearman](http://php.net/manual/en/book.gearman.php)是一个独立的服务器，您可以在具有 PHP 通信库的机器上运行。

您可以让 Gearman 守护程序运行，给它一个任务来处理并将数据写入数据库以获得进度条。这种设置的优点是 fork/exec/passthrough 是昂贵的操作——Gearman 作为一个守护进程*已经启动，*因此它处理对 PHP 工作者的 exec 调用，并且您的触发脚本将需要工作更短的时间。

我不确定它是否有一个通信 API 来向 Gearman 询问某个工人的状态，从而避免向鸡尾酒中添加数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:04:31.330

对于一个需要很长时间才能完成的过程，我想说您使用 ajax 轮询数据库的建议可能是完成工作的最简单方法。

我看到的唯一另一种选择是，如果您的初始请求（实际的 PDF 生成脚本）生成无缓冲输出，您可以将其直接通过管道传回浏览器。但这会受到`echo`PHP 的限制，而且您还必须担心浏览器/网络服务器超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:13:24.300

如果不将 pdf 的内容保存在数据库中，您将无法显示进度条。我建议为什么不使用处理图像并告诉用户处理。

# objective-c - Finder 更新/刷新 applescript 在 10.8 中不起作用

> ID：11781373
> 
> 赞同：3
> 
> 时间：2012-08-02T15:58:44.690
> 
> 标签：objective-c, applescript, osx-mountain-lion, finder, appleevents

我一直在使用苹果脚本来更新 finder 中文件和文件夹的显示。这是该脚本的简化版本：

```
tell application "Finder"
    tell window 1 to update items
end tell 
```

我可以看到自 10.8（Mountain Lion）更新命令未正确执行或根本未执行。在 10.8 之前，一切都运行良好 - 在更新命令之后，所有图标都立即重新绘制。我用它来显示覆盖图标。

你们有没有遇到过同样的问题？我责怪 finder 更改了苹果脚本 api，因为如果我触摸 -a -m 文件，它就会更新。所以肯定有一些方法可以更新它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:09:28.370

您可以在查找器中创建**可见**文件以刷新查找器窗口。

```
tell application "Finder"
    set currentPath to (POSIX path of (target of front window as alias))
    set filePath to currentPath & "UUID" --create UUID
    do shell script "touch \"" & filePath & "\""
    delay 0.5
    do shell script "rm \"" & filePath & "\""
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T19:49:04.883

我和你有同样的问题。使用 10.8 SDK 构建应用程序后，我正要发布应用程序，但 Mountain Lion 刚刚破坏了我的“刷新 Finder Windows”和“显示/隐藏隐藏文件”菜单选项。我已经尝试了一切都无济于事。唯一似乎有帮助的是，如果您在再次写入 Finder 首选项之前等待 60-90 秒。

在终端：

默认写入 com.apple.Finder AppleShowAllFiles TRUE && killall Finder

等待大约一分钟到一分半钟，然后像这样反转命令：

默认写入 com.apple.Finder AppleShowAllFiles FALSE && killall Finder

（我不知道如何通过终端刷新 Finder，但也许这种延迟会以某种方式帮助你。）

这是我目前知道的让 Finder 窗口做任何我想让它们做的任何事情的唯一方法。非常令人沮丧；我希望有人能尽快解决这个问题，否则我的主要卖点之一就消失了。

-克里斯

# jquery - 显示 div 的 x,y 并在 div 移动时更新值

> ID：11781376
> 
> 赞同：1
> 
> 时间：2012-08-02T15:58:55.487
> 
> 标签：jquery, html, dom, animation

我有一个 div 在循环中移动（使用 jquery）。我能够将 x,y 位置写入页面；但是，只有初始值被写入页面。有没有办法在 div 移动时更新值？

```
var sun = $j(".sun");
var position = sun.position();
$j(".sun").circulate({
  speed: 3600,
  width: Wwidth,
  height: Wwidth,
  loop: true,
  zIndexValues: [1000, 1000, 1000, 1000]
});
console.log('x: ' + position.left + ' y: ' + position.top); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:10:16.183

要么你修改你正在使用的循环插件，所以它每次改变太阳的位置时都会进行回调。或者您可以将阅读部分放在 setInterval 语句中：

```
setInterval(function (){
   var sun = $j(".sun");
   var position = sun.position();
   console.log('x: ' + position.left + ' y: ' + position.top);
},1000); // This code will be runned each 1000 ms, so you can modify it.. 
```

# css - 为什么滚动条在这个水平 DIV 上不起作用？

> ID：11781377
> 
> 赞同：0
> 
> 时间：2012-08-02T15:58:57.013
> 
> 标签：css, html, scrollbars

所以我通读了线程[**如何让固定宽度 DIV 中的浮动 DIV 水平继续？**](https://stackoverflow.com/questions/1015809/how-to-get-floating-divs-inside-fixed-width-div-to-continue-horizontally)并使用 pd.'s great answer 来构建一个固定大小的 DIV 以包含水平滚动的内联元素。

它起作用了，它完全按照我的意愿做......除了水平滚动条实际上​​不起作用。如果我将 DIV 的高度设置为 140 像素，以便还有一个垂直滚动条，那么它就可以工作。但是当我使差异足够高以仅具有水平滚动条时，它就不起作用了！它在绞尽脑汁。这是代码：

```
<div style="height: 180px; width: 694px; margin: 0; padding: 0; overflow-x: auto; white-space: nowrap;">
    <span style="width: 160px; height: 120px; background: rgba(255,255, 255, 0.9); display: inline-block; margin: 5px 0 5px 0;"></span>
    <span style="width: 160px; height: 120px; background: rgba(255,255, 255, 0.9); display: inline-block; margin: 5px 0 5px 13px;"></span>
    <span style="width: 160px; height: 120px; background: rgba(255,255, 255, 0.9); display: inline-block; margin: 5px 0 5px 13px;"></span>
    <span style="width: 160px; height: 120px; background: rgba(255,255, 255, 0.9); display: inline-block; margin: 5px 0 5px 13px;"></span>
    <span style="width: 160px; height: 120px; background: rgba(255,255, 255, 0.9); display: inline-block; margin: 5px 0 5px 13px;"></span>
</div> 
```

如果你想直接看页面， http: [//12for12boston.tumblr.com](http://12for12boston.tumblr.com)，密码：12412。

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:09:34.343

DIV（见下文）覆盖在滚动条的顶部，这就是滚动条可见但不起作用的原因。不确定 DIV 的用途是什么，但如果你删除它就可以了。

```
<div style="height: 50px; width: 960px; position: absolute; top:694px; left: 50%; margin-left: -480px;"></div> 
```

# position - 奇怪的间距问题

> ID：11781378
> 
> 赞同：0
> 
> 时间：2012-08-02T15:58:59.507
> 
> 标签：position, spacing

您好，我试图在这里找出一个奇怪的间距问题：http: [//22twenty.com/wordpress](http://22twenty.com/wordpress)，如果您转到主页以外的任何页面，您将看到标题下方的所有数据都被向下推。希望有人可以帮助，

丹佛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:13:28.280

您在页眉上设置了 504px 的高度。您这样做是为了获得视觉效果，而不是正确标记您的内容。您应该正确标记页眉、页脚和内容区域，如果您愿意，可以将页脚放置在页面底部，而不是仅仅为了容纳背景图像而将页眉高度设置为 504 像素。

# webdav - WebDAV 文件不在 WebDAV 存储库中

> ID：11781379
> 
> 赞同：0
> 
> 时间：2012-08-02T15:59:02.777
> 
> 标签：webdav

我已经对 WebDAV 进行了几周的调查，但我无法弄清楚如何满足我的要求。

我必须处理物理上位于不同共享网络、不同机器和不同文件夹上的一堆文件和文件夹。我必须使用 WebDAV 客户端管理这些。这是我的要求。

使用 IIS WebDAV 服务器或使用第三方 WebDAV 服务器非常简单，因为文件在物理上位于服务器中。这些文件位于 WebDAV 存储库中。

我的调查使我认为任何 WebDAV 客户端都只能与服务器上物理上的文件和文件夹进行交互。那正确吗？换句话说，WebDAV 服务器是否可以与遍布各处的文件和文件夹进行交互？如果有怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:02:56.947

WebDAV 只是一个公开文件和目录的协议。该规范没有说明物理位置或 1 和 0 的存储方式。只要您的服务器正确地“说话”webdav，它看起来就像一个统一的客户端 webdav 服务器。

当然，这意味着您不能只使用标准的 WebDAV 服务器并对其进行部署。您将需要实现自己的。

# c# - 实体框架 - 在类中编写函数 - 需要使用相同的提供者调用

> ID：11781383
> 
> 赞同：0
> 
> 时间：2012-08-02T15:59:13.590
> 
> 标签：c#, .net, entity-framework, entity-framework-4, entity-framework-4.1

我的数据库上有两个名为 Project 和 ProjectComments 的表。

我使用生成器将这两个表映射到我的实体框架模型。

每个项目都有许多 ProjectComments。我不想将 ProjectComments 作为导航属性添加到 Project，因为我想将 GetProjectComments 函数写入 Project 类。

顺便说一句，我可以在 GetProjectComments 函数中为 ProjectComments 表的 IsDeleted 列做出决定。因为我并没有真正从 ProjectComments 表中删除任何行，所以我只在需要删除时使其 IsDeleted = true，因此我不应该在 GetProjectComments 函数中返回 IsDeleted = true 的 ProjectComments。

到现在还好。问题是在 Project 类的 GetProjectComments 函数中，我需要提供者（上下文对象）作为参数来调用同一提供者的 SaveChanges 方法。

是否有任何方法可以在不要求提供者对象作为 GetProjectComments 函数中的参数的情况下进行这些方法。难道我做错了什么？？

正在寻找您的回复。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:13:00.433

更轻松 ：

在 Project 类中添加一个 ProjectComments 导航属性（让生成器完成这项工作）

在部分“项目”类中添加新属性

```
public IEnumerable<ProjectComments> LivingComments {
   get {
      return this.ProjectComments != null 
         ? this.ProjectComments.Where(m => !m.IsDeleted) 
         : null;
   }
} 
```

编辑或如 danludwig 所说

```
public IEnumerable<ProjectComments> GetLivingComments() {
     return this.ProjectComments != null 
         ? this.ProjectComments.Where(m => !m.IsDeleted) 
         : null;
} 
```

# javascript - 滚动回顶部动画不起作用

> ID：11781386
> 
> 赞同：0
> 
> 时间：2012-08-02T15:59:18.560
> 
> 标签：javascript, jquery, scroll

下午

问题：我的“回到顶部”按钮（向下滚动后的右下角）不是通过动画滚动到顶部，而是直接跳到顶部。

示例可以在[http://www.pixsters.be上找到](http://www.pixsters.be)

我的html：

```
<a href="#top" id="homebacktothetop"><span>backtothetop</span></a> 
```

我的js（jquery）：

```
 // scroll to 0 when clicked
            $('#homebacktothetop').click(function () {
                $('body,html').animate({
                    scrollTop: 0
                }, 800);
                return false;
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:04:45.413

更改`'body,html'`为`window`

```
$('#homebacktothetop').click(function (e) {
    $(window).animate({
         scrollTop: 0
     }, 800);
     e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:08:46.037

这对我有用：

```
 $(document).ready(function(){
              $("#GoToTop").click(function()
              {
                 $("html, body").animate({ scrollTop: 0 }, 500);
                return false;
              });
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:12:55.307

在我看来，您的代码是从[Web Designer Wall](http://webdesignerwall.com/tutorials/animated-scroll-to-top)获得的。我在您的代码中注意到，在第 32 行，您使用新函数覆盖了 #homebacktothetop 的点击事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T16:10:23.277

这是在黑暗中的完整镜头，但是您是否尝试过删除 return 声明？我在看一个类似的帖子，[jquery animate, scroll top top slow](https://stackoverflow.com/questions/2123690/jquery-animate-scroll-top-top-slow)，他们得到了相同的脚本来工作，但他们没有返回语句。

在一个完全不同的主题上，您的页面中出现了这些 Javascript 错误： ![在此处输入图像描述](../Images/055c35f07a0ec84f512c1b5b3969451f.png) ![在此处输入图像描述](../Images/11f6edbc6bd8ab725466277f5a327051.png)

可能想调查一下，这似乎是你的问题所在。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T16:04:31.330

错字：你试着打电话

```
function gotoByScroll(id)
{
     $('html,body').animate({scrollTop: $("#"+id).offset().top},'slow');
} 
```

和

```
$("#homebacktothetop").click(function(){goToByScroll("#container");}); 
```

这会给你一个 Uncaught ReferenceError: goToByScroll is not defined in the console, javascript is casesensitive

# r - 将数据从一个数据框移动到另一个数据框时，当我不希望它们更改为数字时

> ID：11781391
> 
> 赞同：1
> 
> 时间：2012-08-02T15:59:40.623
> 
> 标签：r, dataframe, subset, with-statement

我有一个包含数值变量和因子的数据框。

将数据从一个数据帧移动到另一个数据帧时，一切都按我的意愿保存：

```
copy_data<-as.data.frame(original_data) 
```

这将创建一个带有因子剩余因子的“original_data”副本。

当我尝试更复杂的版本时，最终结果是数值数据框，当我希望因子仍然是因子时：

```
model_data<-with(subset(copy_data, copy_data$var1<0), 
as.data.frame(cbind(var1, var2, var3, factor1, factor2, factor3))) 
```

所以 factor1、factor2 和 factor3 最终都是数字而不是因子。我错过了什么？我已经尝试过使用和不使用`as.data.frame`并将 model_data 定义为数据框，然后再填充它。

我对 StackExchange 档案的搜索主要返回关于故意将因素更改为变量的结果，并且对我没有多大帮助。略显笨拙的标题是为了将我的问题与那些问题区分开来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:08:27.177

`?cbind`表示`cbind`如果所有输入都是向量（在您的情况下是向量），则返回一个矩阵。一个矩阵只能包含一个*原子*类型（字符、数字、逻辑等）。因子不是原子类型，因此它们会被转换。

“数据框方法”部分说`cbind`data.frame 方法只是 wraps `data.frame(..., check.names=FALSE)`，所以你可以直接调用`data.frame`（调用`cbind`是多余的）。

```
model_data <- with(subset(copy_data, copy_data$var1<0), 
  data.frame(var1, var2, var3, factor1, factor2, factor3)) 
```

# eclipse - 在 eclipse 中为初学者使用 SVN 或源代码控制

> ID：11781394
> 
> 赞同：0
> 
> 时间：2012-08-02T15:59:48.757
> 
> 标签：eclipse, svn

我现在正在使用 tortoise SVN 学习源代码控制的基础知识。我想使用 SVN 而不是（手动制作的）我的代码的多个副本。我需要你的帮助来解决一些问题——

1 - 是否可以在 Eclipse 本身内部执行 SVN，或者将 Eclipse 与一些 SVN 软件集成？如果是，这将是一个好方法吗？

2-除了已经必须处理的许多编译器错误之外，SVN 的使用是否会导致新的错误或问题？

3- Tortoise SVN 和 Tortoise HG 哪个更好？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:14:28.637

1) SVN 有两个 Eclipse 集成：[Subversive](http://www.eclipse.org/subversive/)和[Subclipse](http://subclipse.tigris.org)。我最近使用了 Subversive，但两者或多或少都相等并且工作得很好。

2）如果你正确使用它，你不应该处理更多的错误。但是使用像 Subversion 这样的版本控制系统比不使用要复杂一点:-)

3) Tortoise SVN 用于 Subversion 存储库，而 Tortoise HG 用于[Mercurial](http://mercurial.selenic.com)存储库。这是两种不同的东西！如果你想使用 Subversion，你不能使用 Tortoise HG。

# java - Eclipse 的声明视图有什么用途？

> ID：11781399
> 
> 赞同：3
> 
> 时间：2012-08-02T16:00:06.060
> 
> 标签：java, eclipse

我们有一些带有大量冗余代码的类文件。我一直在 Eclipse 中寻找一个视图，它允许您将编辑器限制为只有一个方法，类似于 VB6 中的模块视图按钮，对于那些知道我的意思的人来说。这样做的需要是为了更容易搜索字符串，并将搜索仅限于我关心的方法中的代码。（这也是编辑大量代码的好功能，以确保我不会意外地将代码添加到具有冗余代码的不同大型方法中。）

我认为声明视图会这样做，但这个视图既不允许搜索也不允许编辑。这导致了一个两部分的问题：

一个。这在 Eclipse 中有什么可以如上所述使用的视图吗？

湾。鉴于声明视图的局限性，它有什么用处？（我直接找到的唯一链接 Declaration View [Hands On Eclipse](http://handsoneclipse.wordpress.com/tag/view/ "日食")对我来说没有多大意义。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T16:25:58.157

**a)**转到`Window > Preferences > Java > Editor`并选择`Show only selected Java element`。

我相信这就是您想要的 :) 这样您就可以使用`Outline View`导航整个班级的成员。

**b)**这`Declaration View`只是关于以下内容的快速参考：

*   您声明变量的行，如果您的光标在 1 处。
*   类型/方法/注释/等的代码，如果您的光标位于其中之一

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T16:29:04.950

`Declaration`在eclipse中告诉你关于当前在编辑器中选择的java对象的声明。

如果您选择了一个类，它将显示类的定义，对于对象，将显示定义对象的行。

# matlab - 山狮上的 Matlab 不工作 -

> ID：11781400
> 
> 赞同：4
> 
> 时间：2012-08-02T16:00:18.543
> 
> 标签：matlab, x11, osx-mountain-lion, dyld

Matlab (R2010a) 似乎在 Mountain Lion 上失败了 - 如果我单击该图标，它会立即崩溃。

我在 Mountain Lion 上安装了 XQuartz 和 Java，但在尝试从 xterm 打开时仍然出现以下错误：

```
bash-3.2$ /Applications/MATLAB_R2010a.app/bin/matlab
dyld: Library not loaded: /usr/X11/lib/libXext.6.dylib
Referenced from:   /Applications/MATLAB_R2010a.app/bin/maci64/MATLAB.app/Contents/MacOS/libmwhg.dylib
Reason: image not found
Trace/BPT trap: 5 
```

不幸的是，即使按照博客文章中的说明设置 DYLD_LIBRARY_PATH 变量，错误也不会消失：http: [//quantumtunnel.wordpress.com/2012/07/29/matlab-for-mac-in-mountain-lion-without -x11/](http://quantumtunnel.wordpress.com/2012/07/29/matlab-for-mac-in-mountain-lion-without-x11/)

```
bash-3.2$ export DYLD_LIBRARY_PATH=/System/Library/Frameworks/JavaVM.framework/Libraries 
```

有人可以帮忙吗？

PS 如果有帮助，我已经升级到 Xcode 4.4...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T19:07:58.370

有人告诉我重新安装 XQuartz，在寻找如何重新安装它时，我认为 XQuartz 安装在 /opt/X11/ 中，而不是 /usr/X11/ 中，后者是 Matlab 正在寻找的。所以我通过简单地建立一个软链接解决了这个问题：

```
sudo ln -s /opt/X11/ /usr/X11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:45:52.437

这对我有用！

1.  安装 XQuartz
2.  启动 XQuartz 并从菜单中启动一个 xterm。

首先键入以下命令：$MATLAB/bin/matlab -maci

对我来说 $MATLAB 是 /Applications/MATLAB_R2008b.app/ ，是您的应用程序路径。

来源：http: [//quantumtunnel.wordpress.com/2012/07/29/matlab-for-mac-in-mountain-lion-without-x11/](http://quantumtunnel.wordpress.com/2012/07/29/matlab-for-mac-in-mountain-lion-without-x11/)

祝你好运。

# javascript - 如何使用 jQuery 解析 JSON

> ID：11781403
> 
> 赞同：0
> 
> 时间：2012-08-02T16:00:29.427
> 
> 标签：javascript, json, jquery, jquery-mobile

我对 JSON 和 jQuery 很陌生。我有一个来自 url 的 JSON 文件，格式是这样的：

```
{
    "united":[
        {"Atlanta","California","Alabama"}
    ]

    "canada":[
        {"Ontario","British Columbia"},
    ]
} 
```

我想做的是当用户从列表中选择一个国家时，我只想解析出特定于该国家的数组。

到目前为止，我所拥有的是：

```
function getUrl(country) {
    alert(urlBase + countrylist);
    $.getJSON(urlBase + countrylist, function(data){
       $.each(data, function (index, value) {
           alert(value);
       });
    });
} 
```

价值警报没有被触发，所以它似乎没有进入每个语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:33:51.317

您的 JSON 似乎无效。我认为 JSON 的期望输出是：

```
{
    "united":[
        "Atlanta","California","Alabama"
    ], //this comma is new

    "canada":[
        "Ontario","British Columbia" //a comma was removed from here
    ]
} 
```

这是使用此结构的演示：http: [//jsfiddle.net/9sU65/](http://jsfiddle.net/9sU65/)（观看您的控制台以查看它的工作）

请注意，我删除了方括号内的大括号。这现在创建了一个格式正确的城市数组。另请注意，必须在对象的第一个键和第二个键之间放置一个逗号。

正确的对象表示法采用以下格式：

```
{ key1 : 'val-1', key2 : 'val-2' } 
```

如果你有：

```
{ key1 , key2 } 
```

然后你真的只想创建一个数组，它使用稍微不同的符号：

```
[ key1 , key2 ] 
```

顺便说一句，这是我在使用 JSON 时遇到的错误（在 Chrome 20 中）：

```
Uncaught SyntaxError: Unexpected token , 
```

那里有很多，但您总是可以找到 JSON 验证器并查看 JSON 是否有效。每当我使用新的数据馈送时，我都会这样做，无论输出是什么格式。这是一个好的 JSON 验证器的示例：http: [//jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)

# java - 仅适用于 IE 的 gwt 2.4.0 空白页

> ID：11781407
> 
> 赞同：1
> 
> 时间：2012-08-02T16:00:47.697
> 
> 标签：java, internet-explorer, gwt, internet-explorer-8, internet-explorer-9

下午好，

我使用 GWT 2.4.0 做了一个小项目，我在开发模式下使用 IE8/IE9 在本地显示良好，但是一旦我将它部署到 weblogic 10r3 服务器，无论版本如何，网页在所有 IE 浏览器下都显示为白色空白页面，即使对于 IE9。而firefox（版本12+）可以毫无问题地显示网页。

我发现 IE9 的一个修复方法是在使用 IE9 时按 F12 并将文档模式切换到 IE9 模式。但是我的用户使用的是 IE8，而 IE8 没有捆绑 F12 功能（开发人员工具），我必须让这个 gwt 应用程序适用于 IE8。任何帮助深表感谢。

@更新

```
 <meta http-equiv="X-UA-Compatible" content="IE=8"> 
```

我将 X-UA-Compatible IE=8 标签等添加到 html 页面。现在我收到错误尝试显示网页

```
 [ERROR] [dca] - Failed to create an instance of 'com.google.gwt.user.datepicker.client.DatePicker' via deferred binding    
com.google.gwt.core.client.JavaScriptException: (TypeError): Object doesn't support property or method 'addEventListener'
 [ERROR] [dca] - Unable to load module entry point class core.client.Dca (see associated exception for details)
 [ERROR] [dca] - Failed to load module 'dca' from user agent 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.3; .NET4.0C; .NET4.0E; MS-RTC LM 8)' at 127.0.0.1:64353 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:42:18.580

选择 IE，确保您的文档类型和元数据设置正确，并确保您拥有正确的用户代理。此外，IE Devtoolbar 通过检查注入动态 iframe 的 div 来帮助查看 javascript 是否被执行。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9](https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9)

这是您应该进入 ...gwt.xml 文件的 user.agent gwt 属性的可能设置

[http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/useragent/UserAgent.gwt.xml](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/useragent/UserAgent.gwt.xml)

在部署到生产环境之前，请确保您可以在本地 IE 中以 devmode 运行和查看应用程序。

# jsf - 复合：clientBehavior ==> NotSerializableException：com.sun.faces.facelets.tag.jsf.core.AjaxHandler

> ID：11781411
> 
> 赞同：2
> 
> 时间：2012-08-02T16:00:57.897
> 
> 标签：jsf, glassfish, java-ee-6, composite-component

我对 JSF 很陌生，并且想要构建一个复合组件，该组件将导出一个可以从复合组件用户 ajaxed 的事件。

按照[http://www.ibm.com/developerworks/java/library/j-jsf2fu-0610/index.html](http://www.ibm.com/developerworks/java/library/j-jsf2fu-0610/index.html)中的说明， 我使用了composite:clientBehavior，如下所示：

```
<composite:interface>
    <composite:attribute name="value" required="true"/>
    <composite:attribute name="selection" required="true"/>

[.... some other composite:attributes]

    <composite:facet name="header"/>

    <composite:clientBehavior name="rowSelect" event="rowSelect" default="true" targets="#{cc.clientId}:cmpntVideos"/>

</composite:interface>

<composite:implementation>
    <h:outputStylesheet library="css" name="VideoStatusTable.css" target="head" />

    <div id="#{cc.clientId}">
    <p:contextMenu for="cmpntVideos">
        <p:menuitem value="#{cc.resourceBundleMap.VideoStatusTable_contextual_menu_edit}" icon="menu-edit"/>
        <p:menuitem value="#{cc.resourceBundleMap.VideoStatusTable_contextual_menu_delete}" icon="menu-delete"/>
        <p:menuitem value="#{cc.resourceBundleMap.VideoStatusTable_contextual_menu_abort}" icon="menu-abort"/>
        <p:menuitem value="#{cc.resourceBundleMap.VideoStatusTable_contextual_menu_reenable}" icon="menu-reenable"/>
    </p:contextMenu>

    <p:dataTable id="cmpntVideos" var="video" value="#{cc.attrs.value}" rowKey="#{video.key}"
        selection="#{cc.attrs.selection}" selectionMode="single" emptyMessage="#{cc.attrs.emptyValueListMsg}">

        <composite:insertFacet name="header"/>

        <p:column headerText="#{cc.resourceBundleMap.VideoStatusTable_contextual_table_title_video_id}" rendered="#{cc.attrs.showRoadName}">
            #{video.humanReadableVideoId}  
        </p:column>

[.... many other column declaration]

        <p:column headerText="#{cc.resourceBundleMap.VideoStatusTable_contextual_table_title_report_generation}" rendered="#{cc.attrs.showReportGeneration}" style="text-align: center;">
            <f:facet name="header">
                <h:graphicImage library="images" name="documents_24.png"/>
            </f:facet>
            <cmpnt:simpleProgressBar value="#{video.reportGenerationProgress}"/>
        </p:column>

        <f:facet name="footer">
            <h:commandLink action="cc.attrs.refreshListener" style="float:right;">
                <h:graphicImage library="images" name="button-rotate-cw_16.png"/>
                <f:ajax render="cmpntVideos" execute="@this"/>
            </h:commandLink>
        </f:facet>

    </p:dataTable>
    </div>

</composite:implementation> 
```

并以下列方式使用该组件：

```
 <cmpnt:videoStatusTable id="VideoTransferStatusTable"
                value="#{videoTransfer.tableModel}" 
                selection="#{videoTransfer.selectedTableReadyNotCompletelyTranferedVideo}"
                showProcess="false"
                showReportGeneration="false"
                showValidation="false"
                showDataOrganization="false"
        >
            <f:ajax event="rowSelect" listener="${videoTransfer.onVideoSelection}" render=":msgsArea"/>
        </cmpnt:videoStatusTable> 
```

但是当我运行它（并选择一行，触发 rowSelect 事件）时，我得到以下异常：

```
SEVERE: Error Rendering View[/private/AssetManager.xhtml]
javax.faces.FacesException: java.io.NotSerializableException: com.sun.faces.facelets.tag.jsf.core.AjaxHandler
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getViewState(ResponseStateManagerImpl.java:137)
    at javax.faces.application.StateManager.getViewState(StateManager.java:555)

[...]

Caused by: java.io.NotSerializableException: com.sun.faces.facelets.tag.jsf.core.AjaxHandler
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at java.util.ArrayList.writeObject(ArrayList.java:570)

[...]

WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.IllegalStateException: CDATA tags may not nest
    at com.sun.faces.renderkit.html_basic.HtmlResponseWriter.startCDATA(HtmlResponseWriter.java:630)
    at javax.faces.context.ResponseWriterWrapper.startCDATA(ResponseWriterWrapper.java:172) 
```

当我删除 ajax 标记时，该组件工作正常（尽管没有某些功能）。

我使用 Glassfish 3.1.2。谁能帮我理解这里发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:45:39.737

看起来已经有一个[jira-issue](http://java.net/jira/browse/JAVASERVERFACES-2050)了。

# android - 防止触发 WidgetProvider 的 onUpdate

> ID：11781415
> 
> 赞同：5
> 
> 时间：2012-08-02T16:01:13.580
> 
> 标签：android, android-widget, appwidgetprovider

我正在实现一个具有 ConfigurationActivity 的小部件，并且必须与 Eclair(2.1) 保持兼容。

有关 AppWidgetProviders方法的[文档](http://developer.android.com/guide/topics/appwidgets/index.html#AppWidgetProvider)`onUpdate`明确指出：

> ... .但是，如果你声明了一个配置Activity，则在用户添加App Widget时不会调用该方法，而是在后续更新时调用该方法。配置完成后执行第一次更新是配置活动的责任。（请参阅下面的创建应用小部件配置活动。）

不幸的是，这不是真的（至少对于我的带有 JellyBean 的 Nexus S）。事实上，在我的 ConfigurationActivity 触发器**之前**`onUpdate`被调用。我想知道，其他手机上是否有类似的行为，是否可以阻止我的 Provider 内部的呼叫？ **`onCreate``onUpdate`**

 **我的解决方法是在我的 WidgetConfigurationActivity 内的 SharedPreferences 中使用该特定 AppWidgetId 存储一个标志。如果它不存在，我可以假设没有首先调用 ConfigurationActivity。这可行，但在我看来真的很难看。如果我无法阻止`onUpdate`触发，是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T19:02:00.900

是的，当您在主屏幕上添加小部件时会调用 onUpdate()。看这里：

[http://developer.android.com/reference/android/appwidget/AppWidgetProvider.html](http://developer.android.com/reference/android/appwidget/AppWidgetProvider.html)

[http://developer.android.com/reference/android/appwidget/AppWidgetManager.html#ACTION_APPWIDGET_UPDATE](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html#ACTION_APPWIDGET_UPDATE)

我不确定是否有办法在创建小部件时不触发它。**但是您可以通过将 Widget Info XML 文件中的“updatePeriodMillis”字段设置为0**或将其**留空**来阻止它再次触发。

另一种方法是将小部件 ID 存储在某处。现在，无论何时添加新的小部件，在您的 Receiver 类中，检查 ID 是否已经存在。如果它不存在（意味着一个新的小部件），那么不要执行任何代码。此外，每当删除小部件时，请从您的记录中删除小部件 ID。由于您可能删除了一个小部件，然后添加了一个与旧小部件具有相同 ID 的新小部件。

希望有帮助！

编辑：在 Receiver 类的 onReceive() 方法中，执行以下操作：

```
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    int appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
    if( appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID )
    {
        super.onReceive(context, intent);
    }

} 
```

当第一次从 Widgets 列表中选择一个小部件时，它的 appWidgetId 将等于 INVALID_APPWIDGET_ID 直到它被添加到主屏幕上。由于“super.onReceive()”在选择小部件时会调用 onUpdate() 方法，因此不会第一次调用 onUpdate()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T07:00:00.623

我也有这个错误。

即使我将 updatePeriodMillis 设置为 0。我的 onUpdate 在我开始 Widget 活动配置之前正在运行。我认为这是 android 小部件中的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T15:55:46.653

我通过在 onUpdate 中向 Intent 添加一个操作然后对 onReceive 进行 if 检查以查看是否单击了小部件，从而解决了这个问题：

我添加`intentClick.setAction(WIDGET_CLICKED);`了仅在单击小部件时触发的内容。

```
public class WidgetProvider extends AppWidgetProvider {

    private static final String TAG = WidgetProvider.class.getSimpleName();
    private static String WIDGET_CLICKED = "widget_clicked";

public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    Log.e(TAG, "onUpdate()");

    remoteViews = new RemoteViews(context.getPackageName(), R.layout.main);
    watchWidget = new ComponentName(context, WidgetProvider.class);

    Intent intentClick = new Intent(context, WidgetProvider.class);
    intentClick.setAction(WIDGET_CLICKED);
    intentClick.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, "" + appWidgetIds[0]);

    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, appWidgetIds[0], intentClick, 0);
    remoteViews.setOnClickPendingIntent(R.id.img_btn, pendingIntent);
    remoteViews.setInt(R.id.img_btn, "setBackgroundResource", R.drawable.play);

    appWidgetManager.updateAppWidget(watchWidget, remoteViews);
}

@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);

    Log.e(TAG, "onReceive()");
    Bundle extras = intent.getExtras();

    //If AND ONLY IF WIDGET_CLICKED
    if (extras != null && intent.getAction().equals(WIDGET_CLICKED)) {
        remoteViews = new RemoteViews(context.getPackageName(), R.layout.main);

        //If isPlaying
        if (isPlaying) {
            //setBackground as PLAY
            remoteViews.setInt(R.id.img_btn, "setBackgroundResource", R.drawable.play);
            isPlaying = false;

            Intent i = new Intent(context, MediaPlayerService.class);
            i.putExtra("command", "stopSong");
            context.startService(i);

            //If NOT playing
        } else {
            //setBackground as STOP
            remoteViews.setInt(R.id.img_btn, "setBackgroundResource", R.drawable.stop);
            isPlaying = true;

            Intent i = new Intent(context, MediaPlayerService.class);
            i.putExtra("command", "playRandomSong");
            context.startService(i);
        }

        watchWidget = new ComponentName(context, WidgetProvider.class);

        (AppWidgetManager.getInstance(context)).updateAppWidget(watchWidget, remoteViews);
    }
} 
```**

# c# - 如何从加载中排除子文件夹？

> ID：11781421
> 
> 赞同：0
> 
> 时间：2012-08-02T16:01:30.557
> 
> 标签：c#, asp.net, vb.net, sharpdevelop

我正在使用一个在多个文件夹中提交 dcm 文件的工具。现在我正在尝试添加一个复选框来管理您要提交的确切文件夹，因此如果我想在子文件夹中包含文件，我将按下复选框，如果不是，我将保持未选中状态。现在的问题是，即使未选中该复选框，我也无法排除加载子文件夹

这是我正在处理的功能：

```
Sub CheckBox1CheckedChanged()
If IO.Directory.GetDirectories(CWPathTB.Text).Length > 1  AndAlso checkBox1.Checked= False Then
'how to clear the subfolders and make them unseen in this condition 
    LoadChangedFiles2()
 Else
FilesGrid.Rows.Clear()
LoadChangedFiles()
End If
 End Sub 
```

非常感谢您的帮助:)

……

功能 ：

```
Public Sub LoadChangedFiles2()
    'loading all the modified , added and removed files only in the top directory into files grid
    Dim b,j As Integer
    Dim PushokClientt As New PushOkSvn.SVNClient
    Dim ModiFiles As New ArrayList
    Dim ConflFiles As New ArrayList

    FileLocalPos1.Clear()
    FileList1.Clear()
    ModFileArr1.Clear()
    ConfFileArr1.Clear()
    AddedFileArr1.Clear()
    RemovedFileArr1.Clear()

    Dim LocDir As New IO.DirectoryInfo(CWPath)
    Dim ignorSharcc As Boolean = False

    Dim FInfoLoc() As IO.FileInfo = LocDir.GetFiles("*.dcm",IO.SearchOption.TopDirectoryOnly)
    Dim FileInfoLoc As IO.FileInfo

    For Each FileInfoLoc In FInfoLoc
        If FileInfoLoc.FullName.Substring(FileInfoLoc.FullName.Length - 4 , 4 ) = ".dcm" Then

            If Not FileInfoLoc.FullName.Contains("sharcc") Then
                Dim TempFileName() As String
                Dim FileName As String
                TempFileName = FileInfoLoc.FullName.Split("\")
                FileName = TempFileName(TempFileName.Length - 1)
                If Not FileLocalPos1.Contains(FileName)Then
                    FileLocalPos1.Add(FileInfoLoc.FullName , FileName )
                    FileList1.Add(FileName)
                Else 
                    MsgBox("In Pfad exist two .dcm files with the same name . Choose an exacter Pfad . ")
                    Exit Sub

                End If
            Else
                ignorSharcc = True
            End If
        End If
    Next
       If ignorSharcc = True Then
        MsgBox("Sharcc folder has been ignored.")
    End If

    Call checkStatus2(CWPath, PushokClientt)

    j=0
    For b = 0 To ModFileArr1.Count - 1
        Dim Filerow1 As String() = {False, ModFileArr1.Item(b).ToString, "Modified", FileLocalPos1.Item(ModFileArr1.Item(b).ToString)}
        DcmComm.FilesGrid.Rows.Add(Filerow1)
        j = j + 1
    Next

    For b = 0 To ConfFileArr.Count - 1
        Dim Filerow1 As String() = {False, ConfFileArr1.Item(b).ToString, "Conflicted", FileLocalPos1.Item(ConfFileArr1.Item(b).ToString)}
        DcmComm.FilesGrid.Rows.Add(Filerow1)
        DcmComm.FilesGrid.Rows(j).DefaultCellStyle.BackColor = Color.DarkGray
        DcmComm.FilesGrid.Rows(j).ReadOnly = True
        MsgBox(ConfFileArr1.Item(b).ToString & " is out of date! Please update first! ")
        j = j + 1
    Next

    For b = 0 To AddedFileArr1.Count - 1
        Dim row1 As String() = {False, AddedFileArr1.Item(b).ToString, "Added", FileLocalPos1.Item(AddedFileArr1.Item(b).ToString)}
        DcmComm.FilesGrid.Rows.Add(row1)
        j = j + 1
    Next

    For b = 0 To RemovedFileArr1.Count - 1
        Dim row1 As String() = {False, RemovedFileArr1.Item(b).ToString, "Removed", ""}
        DcmComm.FilesGrid.Rows.Add(row1)
        j = j + 1
    Next
    Exit Sub
End Sub 
```

…………………………………………………………………………………………

并且错误出现在这一行：

```
 Dim Filerow1 As String() = {False, ModFileArr1.Item(b).ToString, "Modified", FileLocalPos1.Item(ModFileArr1.Item(b).ToString)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:03:34.380

您需要使用带有搜索选项参数的[GetDirectories 重载：](http://msdn.microsoft.com/en-us/library/ms143314.aspx)

```
IO.Directory.GetDirectories(CWPath, "*.*", IO.SearchOption.TopDirectoryOnly) 
```

# silverstripe - SilverStripe - 数据对象与页面

> ID：11781423
> 
> 赞同：0
> 
> 时间：2012-08-02T16:01:51.207
> 
> 标签：silverstripe

我有一个简单的问题。我必须创建扩展 DataObject 的对象，但我如何允许用户通过 CMS 创建它们（即创建页面的方式）？它们不会单独出现在您可以创建的内容列表中。

我想我的主要问题是页面和数据对象有什么区别？

（我是一个完整的 SilverStripe 新手，所以请原谅我对此一无所知）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:49:58.970

两种常见的方法：

[如果 DataObject 以某种方式与页面相关，那么您可以使用DataObjectManager (DOM) 插件](http://www.leftandmain.com/silverstripe-modules/2010/08/23/dataobjectmanager/)将您的 DO 附加到您的页面。在 Page 类上重载 getCMSFields() 函数以显示 DOM。注意：DOM 已被 SilverStripe 3.0 中的 GridField 取代 - 请参阅[此处](http://doc.silverstripe.org/framework/en/topics/grid-field)的文档。

如果您的 DataObject 更像是一个独立的实体，那么[ModelAdmin](http://doc.silverstripe.org/framework/en/reference/modeladmin)就是要走的路。这允许您在 CMS 中创建新选项卡来管理您的 DataObjects。您可以根据需要在前端使用这些 DataObject。

如果所有这些都让您感到困惑，那么我建议您阅读[5 SS 教程](http://doc.silverstripe.org/framework/en/tutorials/)。

# c# - 常量与函数

> ID：11781427
> 
> 赞同：3
> 
> 时间：2012-08-02T16:02:08.103
> 
> 标签：c#

在类中使用 const 或 Func 有什么优势或区别？

```
public sealed class Constants {
  private Constants() {}
  public const string SOME_STRING = "Some String";
  public static Func<string> SomeString = () => "Some String";
}

Debug.WriteLine(Constants.SOME_STRING);
Debug.WriteLine(Constants.SomeString()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:04:14.827

在编译时，Constants.SOME_STRING 将被其实际值 'Some String' 替换，并且编译将继续进行，就好像使用了文字一样。

对 SomeString() 的调用仍将导致对静态方法的堆栈调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:04:45.147

该常量不需要评估，因此会给您带来轻微的性能提升。如果您确定此字符串永远不需要更改，请使用常量。

如果您认为该值可能需要在未来某个时间点由某些逻​​辑产生，或者它可能会从一个产品版本更改为下一个产品版本，请尝试使用属性。它为您提供了与预期相同的灵活性`Func<>`，但允许您使用不暗示可能产生其他效果的语法语法。

```
public string SomeString {get {return "Some String";}} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T16:05:07.310

常量由它们在代码中引用的值代替，因此它们更快。创建一个 Func 并在代码中调用它会增加函数调用并降低性能

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T16:05:16.730

对于您显示的内容，请使用`const`. 这样你的意图就很清楚了。

A`Func`只是一个函数，表示为一个对象。你似乎*不需要*一个函数，那么为什么要使用一个呢？直接访问更容易理解，更多的人会期待它。如果我看到 Func 的用法，我肯定会再三考虑。

# java - 将元素添加到 List ，需要澄清

> ID：11781429
> 
> 赞同：1
> 
> 时间：2012-08-02T16:02:18.543
> 
> 标签：java, generics

如果`A extends X,`以下声明有效

```
 List<? extends X> list = new ArrayList<A>(); 
```

似乎列表将包含扩展 X 的元素集合。因此，`new A()`应该符合条件。

是的，它没有。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T16:09:32.817

你几乎明白了。 `List<? extends X>`表示“某种类型的列表（我实际上并不知道），它是 X 的子类型（或者可能是 X 本身）”。

问题是，例如，如果 X 是`Number`. 然后`List<? extends X>`表示`List<Double>`or`List<Integer>`或其他类型，您刚才说过*您实际上并不知道*。您不能将任何`Number`内容插入`List<Integer>`. 因此，由于您不知道列表元素的类型，因此您无法将*任何内容*插入到`List<? extends Number>`. 但是，您可以从列表中*检索*值，并且可以保证列表中包含的任何值*至少*是`Number`.

有关更多信息，请阅读*第 28 条：使用有界通配符提高*[有效 Java](http://books.google.com/books?id=Ft8t0S4VjmwC)中的 API 灵活性，第 2 版。Joshua Bloch （一本每个 Java 程序员都应该在他们的书架上拥有的书）。特别是，本项解释了助记符 PECS，意思是“生产者扩展，消费者超级”，这将帮助您记住 Java 泛型中的`extends`和`super`关键字的含义以及应该何时使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:08:20.333

`List<? extends X>`没有确定的类型。这意味着`list`可以从一系列类型中分配变量，例如`List<A>`, 也可以`List<B>`(where `B extends X`)。如果编译器允许您添加`new A()`到这样的列表，您将添加一个`A`to `List<B>`。那将是类型安全的失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:13:06.430

您正在创建一个泛型`extends`类型的列表引用（变量）。这表明该列表可以包含具有`X`作为超类的类的实例。但是，在创建列表的实际实例时，您将其限制为仅保存 class 的实例`A`。这听起来不奇怪吗？

# c# - 分页搜索结果

> ID：11781435
> 
> 赞同：2
> 
> 时间：2012-08-02T16:02:36.800
> 
> 标签：c#, asp.net, .net, entity-framework, search

我刚刚读完 Mike 的精彩教程： http: [//www.mikesdotnetting.com/Article/150/Web-Pages-Efficient-Paging-Without-The-WebGrid](http://www.mikesdotnetting.com/Article/150/Web-Pages-Efficient-Paging-Without-The-WebGrid)

我正在使用带有实体 F/W ADO.NET 的 SQL CE 4.0，我的搜索查询是：

```
foreach(string term in query)
{
        var products = database.Products.Where(p =>
                p.PartNumber.ToLower().Contains(term.ToLower()) ||
                p.PartNumber.ToLower() == term.ToLower() || p.OProductName.ToLower().Contains(term.ToLower()) || p.OProductName.ToLower() == term.ToLower());
} 
```

在 Mike 的搜索查询中：

```
sql = "Select Title, ISBN, Description, FirstName, LastName, Category From Books " + 
           "Inner Join Authors on Books.AuthorId = Authors.AuthorId " + 
           "Inner Join Categories on Books.CategoryId = Categories.CategoryId " +
           "Order By BookId OFFSET @0 ROWS FETCH NEXT @1 ROWS  ONLY;";

var result = db.Query(sql, offset, pageSize); 
```

他使用正常的“WebMatrix 方式”对数据库执行选择查询。

让我卡住的部分是如何`OFFSET @0 ROWS FETCH NEXT @1 ROWS ONLY;`在我的查询版本中编写他的？如何在 EF ado.net 中编写它？

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:19:14.463

假设我正确理解了您的问题，您应该结合使用[Skip](http://msdn.microsoft.com/en-us/library/bb358985)方法和[Take](http://msdn.microsoft.com/en-us/library/bb503062)方法：

```
var query =
from product in database.Products
// where product.Property == "some value" // or whatever your where clause is
select product;

var queryPage = query.Skip(itemsPerPage * pageIndex).Take(itemsPerPage); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:18:50.920

您正在寻找的是 LINQ 方法[Skip()](http://msdn.microsoft.com/en-us/library/bb357513.aspx)和[Take()](http://msdn.microsoft.com/en-us/library/bb300906)。Skip() 允许您跳过记录 - 查询的 OFFSET @0 ROWS 部分。Take() 允许您指定要返回的行数 - 查询的 FETCH NEXT @1 ROWS ONLY 部分。

因此，您从页面 Page 返回 PageSize 项目的代码可能如下所示：

```
 var products = database.Products.Where(p =>
            p.PartNumber.ToLower().Contains(term.ToLower()) ||
            p.PartNumber.ToLower() == term.ToLower() || p.OProductName.ToLower().Contains(term.ToLower()) || p.OProductName.ToLower() == term.ToLower())
            .OrderBy(p => p.PartNumber)
            .Skip((Page - 1) * PageSize).Take(PageSize); 
```

编辑：您还需要在 Skip() 之前输入 OrderBy()，因为只能跳过有序查询。例如，您可能希望按零件号订购。

顺便说一句，使用 SQL CE 4.0 是件好事，因为[以前的版本不支持 EF 中的 Skip()！](http://msdn.microsoft.com/en-us/library/cc835494%28v=sql.100%29.aspx)！

# mongodb - mongodb模式设计集合vs索引

> ID：11781436
> 
> 赞同：2
> 
> 时间：2012-08-02T16:02:39.140
> 
> 标签：mongodb

我只是在尝试使用 mongodb/redis 进行工作。我正在考虑这种情况，例如假设一个博客。

我计划进行以下查询，主要是：

1.  列出特定用户的帖子
2.  列出特定用户的评论
3.  根据特定类别列出帖子
4.  查看单个帖子及其评论

**注意：** Redis 用于存储 userid<->username 映射。

这是一个好的/灵活的模式设计吗？未来的计划是增加帖子/评论评级。

> **邮政**
> 
> *   _ID
> *   作者 (db-ref: user._id; **index** )
> *   内容
> *   类别（**索引**）
> 
> **用户**
> 
> *   _ID
> *   用户名（**唯一索引**）
> *   密码哈希
> 
> **评论**
> 
> *   _ID
> *   发布（db-ref：post._id；**索引**）
> *   作者 (db-ref: author._id; **index** )

### 添加评分/投票

> **邮政**
> 
> *   _ID
> *   作者 (db-ref: user._id; **index** )
> *   内容
> *   类别（**索引**）
> *   票数（数）
> 
> **用户**
> 
> *   _ID
> *   用户名（**唯一索引**）
> *   密码哈希
> 
> **评论**
> 
> *   _ID
> *   发布（db-ref：post._id；**索引**）
> *   作者 (db-ref: author._id; **index** )
> *   票数（数）
> 
> **评论投票**
> 
> *   _id = author.Id (**关键**)
> *   投票：[comment._id，comment._id，...]
> 
> **投票后**
> 
> *   _id = author.Id (**关键**)
> *   投票：[post._id，post._id]

你怎么看？还是我只是疯了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:16:05.703

我认为你仍然在考虑关系。我喜欢将文档数据对象视为带有链接（线程？）的俄罗斯娃娃，可以将一个娃娃链接到另一个娃娃。在你的情况下：

*   用户娃娃
    *   用户名
    *   电子邮件
    *   密码哈希
    *   PostUpvotes（帖子 ID 列表）
    *   CommentUpvotes（评论 ID 列表）
*   帖子娃娃
    *   评论娃娃（评论列表）
        *   评论
            *   用户身份
            *   用户名
            *   总票数（整数）
            *   评论编号
    *   总票数（整数）
    *   类别 ID（列表）（肯定一个帖子可以有多个？）
    *   作者编号
*   类别 娃娃

您可能希望将评论和帖子的投票放入用户对象中，然后使用 map/reduce 每 15 分钟左右获取计数（这是 map/reduce 的“规范”使用）。关于 upvotes 的重要一点是用户不会做两次，因此将它们保留在 User 对象中更有意义（无需点击索引来查看用户是否已经对帖子进行了投票）。由于每个帖子的实际点赞数并不重要，因此可以将其保存在帖子中并定期更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:28:54.507

有关解决这些问题的几个示例模式设计，请参阅

*   [http://docs.mongodb.org/manual/use-cases/metadata-and-asset-management/](http://docs.mongodb.org/manual/use-cases/metadata-and-asset-management/)
*   [http://docs.mongodb.org/manual/use-cases/storing-comments/](http://docs.mongodb.org/manual/use-cases/storing-comments/)

# c++ - 您可以从 LLVM 通行证中调用通行证吗？

> ID：11781438
> 
> 赞同：2
> 
> 时间：2012-08-02T16:02:47.870
> 
> 标签：c++, c, llvm, clang

我正在编写自己的 LLVM 通行证，它修改了 LLVM 位码。在生成位码时，我想禁用函数内联，但是当我完成修改位码时，我想调用执行函数内联的传递。这可以做到吗。如果是，如何？

为了更好地理解我在说什么，请查看以下代码。

```
bool MyBitCodeModifier::runOnModule(Module &M)
{
   // Here is the code of my pass which modifies bitcode
   // I need to call inline pass here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:44:24.087

对于内联，您不需要调用通行证。改为使用`InlineFunction`。您可以在 中找到定义`include/llvm/Transforms/Utils/Cloning.h`。

但是如果你坚持在你的之后调用内联通行证，你可以修改`PassManager`为你想要的运行通行证。

# grails - 在gsp页面grails groovy中对数组元素进行分组

> ID：11781440
> 
> 赞同：0
> 
> 时间：2012-08-02T16:02:55.060
> 
> 标签：grails, groovy

我有以下代码片段：

```
<div id="bookmarks" style="height:150px;width:250px; padding-left: 100px;margin-top: -54px;font:16px/26px Georgia, Garamond, Serif;overflow:scroll;">
    <g:each in="${params['bookmarks'] }" var="bookmark">
        <p><a onclick="seek('${bookmark}');">${bookmark}</a></p>
    </g:each>
</div> 
```

但是，当我查看 时`viewer.gsp`，我看到：

```
0
0
:
0
4
:
3
5
,
0
0
:
1
6
:
0
0
,
0
0
:
2
5
:
0
1 
```

而不是通常`00:04:35`应该是......我如何格式化数组`$params['bookmars']`以返回正确的格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:27:19.290

`params['bookmarks']`会给你一个多值参数的列表，但是`String`如果只有一个值，并且`null`根本没有值，并且`each`在 String 上迭代字符串中的字符。所以看起来你的`bookmarks`参数是一个单值参数，它的值是一个逗号分隔的字符串`00:04:35,00:16:00,...`，而不是一个多值参数（即表单提交`bookmarks=00:04:35&bookmarks=00:16:00&...`）。

对于可能是多值的参数，您可以使用`params.list('...')`，这可以保证您有一个列表（根据需要包含零个、一个或多个项目）。

```
<g:each in="${params.list('bookmarks') }" var="bookmark"> 
```

但是，如果您坚持使用逗号分隔的单个值，那么您将不得不自己拆分它：

```
<g:each in="${params.bookmarks?.split(/,/)}" var="bookmark"> 
```

此外，您可能需要使用相关`encodeAs...`调用来确保获得有效的 JavaScript 和 HTML：

```
<a onclick="seek('${bookmark.encodeAsJavaScript()}');">${bookmark.encodeAsHTML()}</a> 
```

# php - PHP GD 图像填充矩形

> ID：11781441
> 
> 赞同：1
> 
> 时间：2012-08-02T16:02:58.420
> 
> 标签：php, gd

我已经建立了一个系统，该系统收集由代码输入并从数据库中收集的图像（对我的问题并不重要），但基本上它用于重新着色一系列图像。我遇到的问题是我尝试使用的图像是灰度的，但是灰度的末端错误！

基本上我拥有的图像是白色的，变成黑色的。但是 imagefilledrectangle 只允许 RGB 127.5,127.5,127.5 成为选择的确切颜色而不是白色......我该如何改变这个？

如果有帮助，这是我的代码：

```
function postimage(&$image, $dir, $name, $check, $override, $color)
{
    $temp = imagecreatefrompng("./images/imager/".$dir.$name.".png");
    imagelayereffect($temp, IMG_EFFECT_OVERLAY);
    if ($check == 0)
    {
        imagefilledrectangle($temp, 0, 0, 64, 110, imagecolorallocate($temp, $color[0], $color[1], $color[2]));
    }
    else if ($check == 1)
    {
        if ($override == 0)
        {
            imagefilledrectangle($temp, 0, 0, 64, 110, imagecolorallocate($temp, 255, 255, 255));
        }
    }
    $black = imagecolorallocate($temp, 255, 255, 255);
    imagecolortransparent($temp, $black);
    imagecopymerge($image, $temp, 0, 0, 0, 0, imagesx($temp), imagesy($temp), 100);
    imagedestroy($temp);
    return true;
} 
```

提前致谢

# iphone - ld：警告：忽略文件 /Users/a/Desktop/a

> ID：11781444
> 
> 赞同：4
> 
> 时间：2012-08-02T16:03:06.527
> 
> 标签：iphone

在构建使用 Core Plot 框架的应用程序时，我看到以下链接器错误：

```
ld: warning: ignoring file /Users/a/Desktop/a
7-31-12 10.57 AM/usr/local/lib/libCorePlot-CocoaTouch.a, missing
required architecture i386 in file
/Users/a/Desktop/a 7-31-12 10.57
AM/usr/local/lib/libCorePlot-CocoaTouch.a (2 slices) Undefined symbols
for architecture i386:   "_CPTDecimalFromFloat", referenced from:
       -[CPTTestAppScatterPlotController viewDidLoad] in CPTTestAppScatterPlotController.o
       -[CPTTestAppScatterPlotController changePlotRange] in CPTTestAppScatterPlotController.o
       -[StatsVC CallBarChart] in StatsVC.o   "_CPTDecimalFromInt", referenced from:
       -[StatsVC CallBarChart] in StatsVC.o
       -[StatsVC CallScatterChart] in StatsVC.o   "_CPTDecimalFromString", referenced from:
       -[CPTTestAppScatterPlotController viewDidLoad] in CPTTestAppScatterPlotController.o
       -[StatsVC CallBarChart] in StatsVC.o
       -[StatsVC CallScatterChart] in StatsVC.o   "_OBJC_CLASS_$_CPTAxisLabel", referenced from:
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTBarPlot", referenced from:
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTColor", referenced from:
       objc-class-ref in CPTTestAppScatterPlotController.o
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTConstraints", referenced from:
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTFill", referenced from:
       objc-class-ref in CPTTestAppScatterPlotController.o
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTGradient", referenced from:
       objc-class-ref in CPTTestAppScatterPlotController.o
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTGraphHostingView", referenced from:
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTMutableLineStyle", referenced from:
       objc-class-ref in CPTTestAppScatterPlotController.o
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTPlotRange", referenced from:
       objc-class-ref in CPTTestAppScatterPlotController.o
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTPlotSymbol", referenced from:
       objc-class-ref in CPTTestAppScatterPlotController.o   "_OBJC_CLASS_$_CPTScatterPlot", referenced from:
       objc-class-ref in CPTTestAppScatterPlotController.o
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTTextStyle", referenced from:
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTTheme", referenced from:
       objc-class-ref in CPTTestAppScatterPlotController.o
       objc-class-ref in StatsVC.o   "_OBJC_CLASS_$_CPTXYGraph", referenced from:
       objc-class-ref in CPTTestAppScatterPlotController.o
       objc-class-ref in StatsVC.o   "_kCPTDarkGradientTheme", referenced from:
       -[CPTTestAppScatterPlotController viewDidLoad] in CPTTestAppScatterPlotController.o
       -[StatsVC CallScatterChart] in StatsVC.o
       -[CPTTestAppScatterPlotController viewDidLoad] in CPTTestAppScatterPlotController.o
       -[StatsVC CallScatterChart] in StatsVC.o ld: symbol(s) not found for architecture i386 clang: error: linker command failed with exit
 code 1 (use -v to see invocation) 
```

我尝试正确链接 coreplot，将架构更改为 armv6、armv7 等……但自 3 天以来就面临这个问题

任何建议这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T04:08:41.060

看起来 Coreplot 已经构建为在设备上运行（即 arm6/7 架构），并且您正在尝试为 i386 编译，可能是模拟器？也尝试为 i386 编译 Coreplot。

对于 /Users/a/Desktop/a 问题，也许您在链接阶段错误地包含了该文件？进入您的项目设置，然后“构建阶段”，最后查看“将二进制文件与库链接”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T12:46:00.773

我遇到了同样的问题，这就是我解决的方法。

步骤 1\. 右键单击​​您的文件夹->将文件添加到“ProjectName”->确保选择将文件复制到同一个项目。

第 2 步。现在转到 Targets-->Build Phases--> Link Binary With Libraries 在这里，您将看到为特定 3rd 方库添加的二进制文件，例如 For CorePlot libCorePlot-CocoaTouch.a 但它通常没有正确链接它是使用时复制到同一目录中（将文件添加到“您的项目名称”），但这些未正确链接，因此通过选择并使用 (-) 符号将其删除。现在使用 (+) 符号再次添加二进制，例如在 CorePlot 的情况下使用
libCorePlot-CocoaTouch.a

所以构建你的项目，你就完成了。就我而言，这帮助我解决了我的问题。

但是，由于 64 位和 32 位架构，总是存在问题，您可以在文档中学习 [有关 64/32 位相关设置的苹果文档](https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaTouch64BitGuide/CocoaTouch64BitGuide.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T03:20:26.547

我以这种方式解决了这个问题：

Xcode 4.6

第一的

目标>构建阶段>目标依赖项：添加“CorePlot-CocoaTouch”

第二

将二进制文件与库链接：添加“libCorePlot-CocoaTouch.a”

# html - 控制表格单元格中文本输入和复选框的布局

> ID：11781445
> 
> 赞同：0
> 
> 时间：2012-08-02T16:03:07.030
> 
> 标签：html, css, checkbox, alignment

我有一些 HTML 并排显示一个文本输入和 2 个复选框。HTML 是由工具生成的，因此我无法更改 HTML 的构建方式，我只能使用 CSS 对其应用样式。我的简化 HTML 和 CSS 是：

```
<html>
 <head>
  <style type="text/css">
  td {
    padding: 0;
    }
  fieldset {
    display: inline;
    padding: 0;
    margin: 0
    }
  input[type="text"] {
    margin: 0;
    padding: 0;
    }
  table.checkboxs  {
    border-collapse:collapse;
    }
  table.checkboxs td {
    border: none;
    margin: 0;
    padding: 0;
  }
 </style>
 </head>
 <body>
     <input type="text" id="item1" value="" />
     <fieldset>
      <table summary="" class="checkboxs" border-collapse="">
       <tr>
        <td><input type="checkbox" id="chkbox_0" name="chkbox" value="1"   /><label for="chkbox_0">One</label></td>
        <td><input type="checkbox" id="chkbox_1" name="chkbox" value="2"   /><label for="chkbox_1">Two</label></td>
       </tr>
      </table>
     </fieldset>
 </body>
</html> 
```

这最终会显示比文本项更高的复选框，如下所示：

![截图 1](../Images/5cc2c4ab6b15c05d3dd73acbabc1b967.png)

我想要的是它们像这样排列在一起：

![截图 2](../Images/84d6fe18da5dbce91f98bad752fb46c3.png)

这似乎很简单，但我不知道如何实现它。如果删除文本输入或字段集，则剩余元素占用最小垂直空间，只有当它们在一起时，文本输入才会被推下页面。

无论如何指出HTML中的任何缺点，但正如我所说，这真的不在我的控制之下，我只能使用CSS来影响布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:27:58.947

我能想到两个快速的解决方案。首先是通过设置让表格的行为和对齐方式更像常规文本：

```
table.checkboxs {
    display:inline-block;
    vertical-align:middle;
} 
```

[JSFiddle 示例](http://jsfiddle.net/ChrisPebble/UyHS5/1/)

或者通过对齐文本框使其更像表格：

```
input[type="text"] {
    vertical-align:top;
} 
```

[JSFiddle 示例](http://jsfiddle.net/ChrisPebble/WhwdD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:11:02.860

尝试将 float:left 分配给它们，输入和字段集，然后在需要时使用 margin-top 来实现您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T16:20:41.390

尝试

```
input {
 display: inline-block;
}

fieldset {
 display: inline;
 padding: 0;
 margin: 0
} 
```

# ios - 应用程序仅在 Instruments 中崩溃

> ID：11781446
> 
> 赞同：1
> 
> 时间：2012-08-02T16:03:11.570
> 
> 标签：ios, xcode, xcode-instruments

我们的应用程序运行良好。在 Instruments（在模拟器上）中，当尝试分析内存时，在 Allocations 下，我看到 Total Bytes 上升得非常快，而 Live Bytes 仍然很小。没有泄漏，VM 使用似乎很稳定（如果很大）。

这不是一个阻碍，但使分析变得更加困难。有任何想法吗？

谢谢！

# php - 在 PHP 中使用 Perl CGI 会话

> ID：11781450
> 
> 赞同：2
> 
> 时间：2012-08-02T16:03:19.517
> 
> 标签：php, perl, session, session-variables

有没有办法在 PHP 中获取 Perl Cgi 会话信息？我正在处理的大部分网站都是用 Perl 编写的，除了一小部分。这部分改用 PHP，我想知道如何在 PHP 中使用 Perl CGI 会话信息。

我正在考虑在通过 exec 进入页面时执行一个 perl 脚本来验证会话信息，但我希望有一种更好的方法来访问会话变量，最好是一种无需使用 exec 即可工作的方法。

有什么建议么？

如果有帮助，PHP 中的段会加载到页面上的 iframe 中。我正在使用 Perl 的 CGI:Session 模块来创建会话。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T01:21:01.107

[https://metacpan.org/module/CGI::Session::Serialize::php](https://metacpan.org/module/CGI::Session::Serialize::php)

您的 init 调用将是这样的：

```
my $session = CGI::Session->new( 'serializer:php' ); 
```

我不是 100% 确定在 php 方面。CGI::Session::Serialize::php 使用[https://metacpan.org/module/PHP::Session](https://metacpan.org/module/PHP::Session)所以它可能会自动与 php 一起工作。如果不是，您将不得不将 php 指向 perl 会话文件。

再编辑一次。

如果这不起作用，您可以使用[https://metacpan.org/module/CGI::Session::Serialize::yaml](https://metacpan.org/module/CGI::Session::Serialize::yaml)

然后让 php 解析它[http://php.net/manual/en/book.yaml.php](http://php.net/manual/en/book.yaml.php)

# php - PHP MYSQLi - 在更新列之前备份列数据（到另一个表/列中）

> ID：11781452
> 
> 赞同：0
> 
> 时间：2012-08-02T16:03:35.157
> 
> 标签：php, performance, mysqli, backup

我正在开发一个系统，该系统在更新之前跟踪该领域的内容。我更喜欢使用表格来存储以前的数据，但我对其他选项持开放态度。这是一些可以完成任务的示例代码：

```
<?php

$initial_value = $_POST['some_value'];
$id =231212213; // some id

$stmt = $mysqli->prepare("SELECT column FROM table WHERE user=?")
$stmt->bindParam("s", $id);
$stmt->execute();
$stmt->bind_result($column);
$stmt->fetch();

if ($column !="") {
  //edit : it doesnt matter to me whether the data is moved into a new table or column
  $stmtA = $mysqli->prepare("UPDATE another_table SET backup_column=? WHERE user=?");
  $stmtA->bindParam("ss", $column, $id);
  $stmtA->execute();

  $stmtB = $mysqli->prepare("UPDATE table SET column=? WHERE user=?");
  $stmtB->bindParam("ss", $initial_value, $id);
  $stmtB->execute();
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:21:52.560

这是一个纯 mysql 命令解决方案，您可以修改代码来执行以下操作：

```
1.) CREATE TABLE new_table_name LIKE old_table_name
2.) INSERT INTO new_table_name SELECT * FROM old_table_name 
```

完毕。;-)

这样您就可以准确备份您的表，并且连接很容易看到差异：

```
SELECT a.*, b.* FROM old_table a JOIN new_table b ON a.id=b.id WHERE <criteria>; 
```

**编辑**

```
UPDATE BACKUP SET COLUMN = (SELECT COLUMN FROM TABLE WHERE user_id=#) WHERE user_id=#; 
```

# r - 关于比较包括单词/字符的矩阵

> ID：11781457
> 
> 赞同：0
> 
> 时间：2012-08-02T16:04:05.703
> 
> 标签：r

我有两个从不同的 csv 文件中提取的矩阵，

一个像

```
> matrix1[1:6,]
     V1        V2
 1   atheism 1.0000000
 2       rec 1.0000000
 3       alt  1.0000000
 4  baseball 1.0000000
 5     sport 1.0000000
 6    season 0.4934226 
```

另一个是

```
>matrix2[1:6,]
         V1        V2
 1       alt 1.0000000
 2   atheism 1.0000000
 3  baseball 1.0000000
 4       rec 1.0000000
 5     sport 1.0000000
 6         c 0.4934226 
```

我想做的是比较两个矩阵，这就是我所做的

```
mapply(as.data.frame(test1),as.data.frame(test2),FUN=function(v1,v2) all(v2==v2))
        V1   V2 
       TRUE TRUE 
```

但是，我需要的是捕获两个数据集之间第一列的差异，但是我所做的未能捕获字符串中的差异，如何修改我的代码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:17:44.893

也许尝试：

```
union(test1[, 1] , test2[, 1])    #the same (together)
intersect(test2[, 1], test1[, 1]) #overlap
union(test1[, 1] , test2[, 1]) [!union(test1[, 1] , test2[, 1]) %in% intersect(test2[, 1], test1[, 1])]
setdiff(test1[, 1] , test2[, 1])  #diff in set 1
setdiff(test2[, 1] , test1[, 1])  #diff in set 2 
```

# iphone - 在选项卡栏控制器中嵌入了导航控制器，但模拟未显示任何内容

> ID：11781460
> 
> 赞同：1
> 
> 时间：2012-08-02T16:04:12.267
> 
> 标签：iphone, objective-c, ios

我对 iOS 开发非常陌生，如果这里的专家能够帮助我解决我的问题，我将不胜感激。目前，我的应用程序非常基础，并没有做太多事情。在尝试将标签栏添加到我现有的视图之前，一切正常。我不确定我错过了什么，但是当我运行模拟时没有显示任何内容。我会尽力解释我的应用程序的结构，以便你们更好地理解问题。

应用程序中当前存在以下内容...

1.  FeedList：嵌入在 UINavigationController 中的 UITableViewController。
2.  FeedCell：为 FeedList 创建的 UITableViewCell。
3.  FeedItemDetail：一个 UIViewController，里面有一个 UIScrollView。通过点击 FeedList 中的单元格，用户将被带到此屏幕。

下面是 AppDelegate.h 和 AppDelegate.m 的代码。如果有人能够告诉我为什么我的模拟屏幕上没有显示任何内容，我将不胜感激。谢谢！

```
 //AppDelegate.h
    #import <UIKit/UIKit.h>

    #import "FeedList.h"

    @interface AppDelegate : NSObject <UIApplicationDelegate>
    {
        UIWindow *window;
        FeedList *feedList;
        UITabBarController *tabBarController;
    }

    @property (nonatomic, retain) IBOutlet UIWindow *window;
    @property (nonatomic, retain) FeedList *feedList;
    @property (nonatomic, retain) UITabBarController *tabBarController;

    - (void)customizeAppearance;

    @end

    //AppDelegate.m
    #import "AppDelegate.h"

    @implementation AppDelegate

    @synthesize window, feedList, tabBarController;

    // Entry point
    - (void)applicationDidFinishLaunching:(UIApplication *)application
    {
        tabBarController = [[UITabBarController alloc] init];
        feedList = [[FeedList alloc] init];
        UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:feedList];
        tabBarController.viewControllers = [NSArray arrayWithObject:nav];
        [window addSubview:tabBarController.view];
        [window makeKeyAndVisible];
    } 
```

* * *

**更新（问题已解决）**

我意识到在添加线之后`tabBarController.viewControllers = [NSArray arrayWithObject:nav];`事情开始变得混乱。检查 Apple 的文档后，原因是如果在运行时更改此属性的值，标签栏控制器会在安装新视图控制器之前删除所有旧视图控制器。因此，我们需要将新的标签栏控制器设置为根视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:02:07.500

我同意达斯汀的评论，如果你刚开始，你应该使用故事板。我认为您的方法有问题，或者与典型的不同，您没有将 tabBarController 添加为子视图，而是将 self.window 的 rootViewController 设置为如下所示：

```
// Entry point
    - (void)applicationDidFinishLaunching:(UIApplication *)application
    {
        tabBarController = [[UITabBarController alloc] init];
        feedList = [[FeedList alloc] init];
        UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:feedList];
        tabBarController.viewControllers = [NSArray arrayWithObject:nav];
        //******* This is my correction *******
        window.rootViewController = tabBarController;
        //*******                       *******
        [window makeKeyAndVisible];
    } 
```

当然，如果您的表格视图设置正确，则无法从您提供的信息中判断，因此不能保证这会显示您的表格。

# android - 在 Android 中自定义底部操作栏

> ID：11781463
> 
> 赞同：2
> 
> 时间：2012-08-02T16:04:20.037
> 
> 标签：android, android-actionbar

我想使用拆分操作栏 - 一个在顶部，一个在底部。我知道你可以这样称呼它：

`uiOptions="splitActionBarWhenNarrow"`

我的两个问题是简单的概念：

我只想要底部的两个项目；一个在最左边，一个在最右边。这可能吗？它似乎几乎是溢出并将所有内容推到顶部 - 向下推到底部。有没有办法控制哪些项目将显示在哪个栏上？

另外，我有 holo.light.darkactionbar 主题。然而，对于底栏，它保留了浅色背景和白色文本，因此您看不到图标 - 是否可以像顶栏一样应用深色背景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:11:29.677

> 我只想要底部的两个项目；一个在最左边，一个在最右边。这可能吗？它似乎几乎是溢出并将所有内容推到顶部 - 向下推到底部。有没有办法控制哪些项目将显示在哪个栏上？

不幸的是没有。*使用拆分操作栏时，所有*操作项都将被推送到底部栏。解决此问题的一种方法是不使用拆分操作栏，并在底部有一个自定义视图，其中包含您想要在底部的所有项目的按钮。您可能能够使用主题很好地模拟拆分操作栏的样式。

> 另外，我有 holo.light.darkactionbar 主题。然而，对于底栏，它保留了浅色背景和白色文本，因此您看不到图标 - 是否可以像顶栏一样应用深色背景？

这听起来很奇怪，而且不是标准行为（我的应用程序中的两个栏都是黑色的），您使用的是自定义主题吗？如果您想手动覆盖它，请使用[Android 开发者网站](http://developer.android.com/guide/topics/ui/actionbar.html#Style)`android:backgroundSplit`上显示的自定义值定义主题。

# c# - OpenNetCf - C# 到 VB

> ID：11781466
> 
> 赞同：-3
> 
> 时间：2012-08-02T16:04:40.740
> 
> 标签：c#, vb.net

我试图在 VB 中翻译这段代码，但我不知道该怎么做……谁能告诉我翻译如何？

谢谢

```
private void WatchForDrives()
{
  DeviceStatusMonitor monitor = new DeviceStatusMonitor(DeviceClass.FileSystem, false);
  monitor.StartStatusMonitoring();
  monitor.DeviceNotification += delegate(object sender, DeviceNotificationArgs e)
    { 
    string message = string.Format("Disk '{0}' has been {1}.", e.DeviceName,       e.DeviceAttached ? "inserted" : "removed");
    MessageBox.Show(message, "Disk Status");
    };
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:07:05.467

[http://converter.telerik.com/](http://converter.telerik.com/)

```
Private Sub WatchForDrives()
    Dim monitor As New DeviceStatusMonitor(DeviceClass.FileSystem, False)
    monitor.StartStatusMonitoring()
    monitor.DeviceNotification += Function(sender As Object, e As DeviceNotificationArgs) Do
        Dim message As String = String.Format("Disk '{0}' has been {1}.", e.DeviceName, If(e.DeviceAttached, "inserted", "removed"))
        MessageBox.Show(message, "Disk Status")
    End Function
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:27:42.237

只有 VB 10 支持多行 lambda，因此您必须创建一个单独的方法来处理事件。无论编译器如何，这都应该有效：

```
Private Sub WatchForDrives()
    Dim monitor As New DeviceStatusMonitor(DeviceClass.FileSystem, False)
    monitor.StartStatusMonitoring()
    AddHandler monitor.DeviceNotification, AddressOf MonitorDeviceNotified
End Sub

Private Sub MonitorDeviceNotified(ByVal sender As Object, ByVal e As DeviceNotificationArgs)
    Dim message As String = String.Format("Disk '{0}' has been {1}.", e.DeviceName, If(e.DeviceAttached, "inserted", "removed"))
    MessageBox.Show(message)
End Sub 
```

# php - 使用 mysql PASSWORD 函数从 mysqli_query 转换为 mysqli 准备语句

> ID：11781467
> 
> 赞同：1
> 
> 时间：2012-08-02T16:04:42.367
> 
> 标签：php, mysql, mysqli, prepared-statement

除了一个查询外，我已将我的网站从 mysql 转换为 mysqli 准备好的语句。我无法弄清楚的查询是：

```
$sql = "SELECT customerID FROM customer WHERE customerEmail = '$loginEmailAddress' AND customerPassword = PASSWORD('$loginPassword');";
$result = mysqli_query($mysqli, $sql); 
```

这工作正常。当我尝试制作 mysqli 准备好的语句时，问题出在 mysql PASSWORD 函数上。甚至可以转换这个吗？

我试过这样的事情：

```
$loginPassword = PASSWORD($loginPassword);

$stmt = $mysqli -> prepare("SELECT customerID from customer WHERE customerEmail = ? AND customerPassword =  ? ");
$stmt -> bind_param("ss", $loginEmailAddress,$loginPassword);
$stmt -> execute();
$stmt->store_result();
$stmt -> bind_result($customerID);
$stmt -> close(); 
```

当然没有成功。我也尝试过这样的事情：

```
$loginPassword  = '" . PASSWORD('$loginPassword') . "'; 
```

我正在努力使用 phpass，但与此同时，我需要继续为现有客户使用 PASSWORD，直到他们登录并且我可以将他们移动到新的哈希值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-18T20:44:28.390

`PASSWORD()`是一个 MySQL 函数。它是 SQL 的一部分。你只需要参数化你传递给这个函数的参数。

```
$stmt = $mysqli -> prepare("SELECT customerID 
    FROM customer 
    WHERE customerEmail = ? AND customerPassword = PASSWORD(?) ");
$stmt -> bind_param("ss", $loginEmailAddress,$loginPassword);
$stmt -> execute(); 
```

**警告：**
仅存储使用 PHP 创建的密码哈希[`password_hash()`](https://php.net/manual/en/function.password-hash.php)，然后您可以使用[`password_verify()`](https://php.net/manual/en/function.password-verify.php). 看看这篇文章：[如何使用 password_hash](https://stackoverflow.com/q/30279321/1839439)并了解更多关于[PHP 中 bcrypt 和密码散列的信息](https://stackoverflow.com/a/6337021/1839439)

**警告：**

> 从 MySQL 5.7.6 开始不推荐使用此功能，并将在未来的 MySQL 版本中删除。
> 
> PASSWORD() 由 MySQL 服务器中的身份验证系统使用；您不应该在自己的应用程序中使用它。

# database - 如果密码存储为哈希值，限制密码长度有什么好处吗？

> ID：11781470
> 
> 赞同：2
> 
> 时间：2012-08-02T16:04:45.623
> 
> 标签：database, security, passwords

我见过很多将密码长度限制为 10 或 12 个字符的网站。我知道这可能表明他们以纯文本形式存储密码并且他们限制长度，因为他们认为这样可以节省空间，但是如果他们将密码存储为哈希，那么这个限制有什么好处吗？

**编辑：**我很清楚更长的密码更强，并且散列是散列，无论输入如何，长度都是相同的。我*真正的*问题是，系统设计人员是否有某种令人费解的理由来合理化这种固有的不安全做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:08:34.233

散列函数接受未指定长度的输入，并返回指定长度的值。所以不，输入的长度对输出的长度没有影响，因为对于给定的哈希函数，输出的长度总是相同的。

设置用户可以使用的密码长度的下限只是为了鼓励用户使用更强的密码。上限，我不能说。可能是针对垃圾邮件机器人的东西，或者出于性能原因，他们不想破解 200 个字符的密码。

没有人以明文形式存储密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:16:28.637

要直接回答您的问题，不，故意实施较低的最大长度没有任何好处。您会发现，当存在遗留依赖项时，通常会发生这种情况；您的密码只能是 10 个字符长，因为它是后端到实现此限制的系统。

[我怀疑在Tesco](http://www.troyhunt.com/2012/07/lessons-in-website-security-anti.html)等场景中就是这种情况。您拥有 13 年以上的系统，正如您所说，它（据称）以明文形式存储密码，并且可能在多个点实现了 10 个聊天限制（DB col、SQL 命令参数等）。

我能想到的唯一原因——而且有点牵强——是没有限制的文本框可以允许超过最大请求长度，但我们在这里谈论的密码太长了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:06:46.170

不。如果他们以纯文本形式存储它，那么在现实生活中也没有多大优势。

# c++ - 如何通过结构的静态数组专门化模板函数

> ID：11781472
> 
> 赞同：3
> 
> 时间：2012-08-02T16:04:51.003
> 
> 标签：c++, arrays, templates, static

我有点卡住了，需要 C++ 模板大师的帮助。有一个模板结构：

```
template<typename T, typename ID>
struct TypeMapping
{
    T Type;
    char* Name;
    ID Id;
}; 
```

和一些像这样的模板函数：

```
template<typename T, typename ID>
bool TryGetTypeByNameImp(const TypeMapping<T, ID> map[], size_t mapSize,
    const char* name, T& type)
{
    for (size_t i = 0; i < mapSize; i++)
    {
        if (strcmp(map[i].Name, name) == 0)
        {
            type = map[i].Type;
            return true;
        }
    }

    return false;
} 
```

map（第一个参数）定义为（有几个类似的map）

```
namespace audio
{ 
    const TypeMapping<Type, AMF_CODEC_ID> Map[] = 
    {
        {AAC, "aac", AMF_CODEC_AAC},
        {MP3, "mp3", AMF_CODEC_MP3},
        {PCM, "pcm", AMF_CODEC_PCM_MULAW}
    };

    const size_t MapSize =  sizeof(Map)/sizeof(Map[0]);
} 
```

Map 作为参数传递给函数，我正在寻找如何将其作为模板参数传递，以便可以使用此示例中的函数：

```
 audio::Type type;
 bool r = TryGetTypeByNameImp<audio::Map>("aac", type); 
```

我发现的唯一解决方案是定义一个包含静态 Map 和 MapSize 的结构并将该结构用作模板参数，但我不喜欢这个解决方案，我正在寻找另一个解决方案。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:10:46.143

```
bool r = TryGetTypeByNameImp<audio::Map>("aac", type); 
```

这是试图`audio::Map`用作一种类型——但它不是，它是一个变量。只需将其作为普通参数传递给函数：

```
bool r = TryGetTypeByNameImp(audio::Map, "aac", type); 
```

也就是说，我对您的代码有三点评论：

*   请注意，将函数参数声明为数组 ( `x[]`) 实际上确实将其声明为指针。您的代码正确使用了它，但使用数组语法会产生误导。请改用指针。
*   这段代码对我的口味来说有点太重了。虽然我同意在这里使用原始 C 字符串是合适的，但您`char*`在 C++11 中的使用是非法的，并且在 C++03 中已弃用（因为您指向的是字符串文字）。使用`char const*`. 此外，我建议`std::string`在函数中使用参数，并使用比较运算符`==`而不是`strcmp`.
*   您正在使用外参数，`type`. 我讨厌这种技术。如果要返回值，*请使用返回类型*。由于您还返回一个成功值，请使用 a`pair`作为返回类型，除非有非常令人信服的理由不这样做：

    ```
    template<typename T, typename ID>
    std::pair<bool, T> TryGetTypeByNameImp(
        const TypeMapping<T, ID> map[], size_t mapSize,
        const char* name)
    {
        for (size_t i = 0; i < mapSize; i++)
            if (strcmp(map[i].Name, name) == 0)
                return std::make_pair(true, map[i].Type);

        return std::make_pair(false, T());
    } 
    ```

Ah, and I’d also consider using a `std::vector` or `std::array` here instead of a C array. Then you don’t need to manually shlep the array size around through all the functions which use the array.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:04:46.407

您当然可以使用数组本身（嗯，指向它的指针）作为模板参数：

```
#include <iostream>
template<typename T> struct S { T t; };
S<int> s[] = { { 21 }, { 22 } };
template<typename T, size_t n, S<T> (*m)[n]> void f() { std::cout << (*m)[n - 1].t; }
int main() {
    f<int, 2, &s>();
} 
```

这里的问题是您不能对数组的长度或其类型使用模板参数推导，因此除了数组本身之外，两者都必须作为模板参数提供。我真的认为传递一个结构，或者说一个向量会是更好的解决方案，因为你无疑已经探索过：

```
#include <vector>
#include <iostream>
template<typename T> struct S { T t; };
std::vector<S<int>> s{ { 21 }, { 22 } };
template<typename T, std::vector<S<T>> *v> void f() { std::cout << v->back().t; }
int main() {
    f<int, &s>();
} 
```

# c# - 排除正则表达式中的某些模式

> ID：11781473
> 
> 赞同：1
> 
> 时间：2012-08-02T16:04:54.810
> 
> 标签：c#, regex, string, visual-studio-2010

我正在使用 C# 中的正则表达式来排除字符串中的某些模式。

这些是我想要接受的类型模式是：“%00”（十六进制 00-FF）和任何其他没有开始 '%' 的字符。我想排除的模式是：“%0”（以 % 开头，后面有一个字符的值）和/或字符“&<>'/”。

到目前为止我有这个

```
Regex correctStringRegex = new Regex(@"(%[0-9a-fA-F]{2})|[^%&<>'/]|(^(%.))", 
                                     RegexOptions.IgnoreCase); 
```

以下是我试图通过和拒绝的示例。

传递字符串`%02This is%0A%0Da string%03`
拒绝字符串`%0%0Z%A&<%0a%`

如果一个字符串没有通过所有要求，我想完全拒绝整个字符串。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:14:48.497

我建议这样做：

```
^(?:%[0-9a-f]{2}|[^%&<>'/])*$ 
```

**解释：**

```
^             # Start of string
(?:           # Match either
 %[0-9a-f]{2} # %xx
|             # or
 [^%&<>'/]    # any character except the forbidden ones
)*            # any number of times
$             # until end of string. 
```

这确保`%`仅在后跟两个十六进制时才匹配。由于您已经在编译带有`IgnoreCase`标志集的正则表达式，因此您也不需要`a-fA-F`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T18:03:12.463

嗯，鉴于到目前为止的评论，我认为您需要一个不同的问题定义。您希望使用正则表达式根据字符串是否包含任何无效模式来传递或失败字符串。我假设如果存在任何无效模式，则字符串将失败，而不是如果存在任何有效模式，则字符串的反向传递。

因此，我会使用这个正则表达式：`%(?![0-9a-f]{2})|[&<>'/]`

然后，您将以这样的方式运行它，即如果您 GET 匹配，则字符串无效，有效的字符串在此集中将没有任何匹配项。

A quick explanation of a rather odd regex. The format `(?!)` tells the regex "Match the previous symbol if the symbols in this set DONT follow it" ie: Match if suffix not present. So, what im telling it to look for is any instance of % that is not followed by 2 hex characters, or any other invalid character. The assumption is that anything that DOESN'T match this regex is a valid character entry.

# php - 数组中的逗号分隔列表

> ID：11781474
> 
> 赞同：0
> 
> 时间：2012-08-02T16:04:55.033
> 
> 标签：php, arrays, list, comma

我想知道如何：

*   制作逗号分隔的列表
*   从列表中删除最后一个逗号

这是一个数组示例：

```
Array
(
    [name] => Array
        (
            [0] => Some message to display1
        )
    [test] => Array
        (
            [0] => Some message to display2
        )
    [kudos] => Array
        (
            [0] => Some message to display3
        )

) 
```

我想这样显示它：

**逗号列表：** `Some message to display1, Some message to display2, Some message to display3`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:10:51.333

遍历数组并`implode()`在获得每个数组之后。

```
$bigArray = array();
foreach($firstArray as $secondArray){
    if(is_array($secondArray)){
        $bigArray = array_merge($bigArray, $secondArray);
    }
}
$commaList = implode(",", $bigArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:12:41.790

您可以使用[`implode`](http://php.net/manual/en/function.implode.php)来连接值并[`array_map`](http://php.net/manual/en/function.array-map.php)提取它们：

```
// this should be your array
$youArray = array(); 
// return first elements
$values = array_map(function($item) { return $item[0]; }, $youArray); 
// echo joined values
echo implode(',', $values); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T16:08:28.070

因此，修改我的答案以实际解决您的问题，您可以使用这样的嵌套 foreach 循环来做到这一点：

```
<?php

$a1 = array(
    'name' => array( 0 => 'Some message to display1'),
    'test' => array( 0 => 'Some message to display2'),
    'kudos' => array( 0 => 'Some message to display3'),
    );

$final = "";
foreach($a1 as $innerarray){
    foreach($innerarray as $message){
        $final .= $message.", ";
    }
}

echo substr($final,0,-2);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T16:12:52.343

`implode`适用于一维数组，但你有一个二维数组，这将需要更多的工作。

您可以使用`array_map`展平阵列

```
$flatArray = array_map(function($a){
    // I implode here just in case the arrays
    // have more than one element, if it's just one
    // you can return '$a[0];' instead
    return implode(',', $a);
}, $array);

echo implode(',', $flatArray); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T16:07:35.497

```
$array = array("some text","other text");
$impl = implode(",", $array);
echo $impl; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T16:27:26.793

这适用于您的数组，并且应该适用于*n*级深的数组：

```
$array = array(
    'name' => array('Some message to display1'),
    'test' => array('Some message to display2'),
    'kudos' => array('Some message to display3')
);

$mystr =  multi_join($array);
while (substr($mystr, -1) == ',') {
    $mystr = substr($mystr, 0, -1);
}
echo $mystr;

function multi_join($value) {
    $string = '';

    if (is_array($value)) {
        foreach ($value as $el) {
            $string.= multi_join($el);
        }
    } else {
        $string.= $value.',';
    }

    return $string;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-01T12:51:15.300

这里有一些额外的技术可以添加到这个堆中......

1.  重新索引第一级，因为 splat 运算符不喜欢关联键，然后合并解压缩的子数组，然后内爆。

2.  用于`array_reduce()`迭代第一级并从每个子数组中提取第一个元素，根据需要进行分隔而不使用`implode()`.

代码：（[演示](https://3v4l.org/28XNI)）

```
$array = [
    'name' => ['Some message to display1'],
    'test' => ['Some message to display2'],
    'kudos' => ['Some message to display3']
];

echo implode(', ', array_merge(...array_values($array)));

echo "\n---\n";

echo array_reduce($array, function($carry, $item) {return $carry .= ($carry ? ', ' : '') . $item[0]; }, ''); 
```

输出：

```
Some message to display1, Some message to display2, Some message to display3
---
Some message to display1, Some message to display2, Some message to display3 
```

第一种技术将容纳子阵列中的多个元素，第二种技术不会确认每个子阵列超过一个“消息”。

# 3d - 3D connexion Magellan / SpaceMouse 的串行协议规范如何？

> ID：11781475
> 
> 赞同：2
> 
> 时间：2012-08-02T16:05:05.687
> 
> 标签：3d, serial-port, mouse, protocols

我拿到了一个旧的 3d 鼠标，想在嵌入式项目中使用它。由于 3Dconnexion 不再支持此鼠标，我不得不自己进行逆向工程。我想我已经走了很远，但无法继续。有一个方面可以准确地说明我的发现： [http](http://paulbourke.net/dataformats/spacemouse/) : //paulbourke.net/ 我什至搜索了使用 SpaceMouse 的旧开源项目。但是以上网站上的实施都不止于此。

有没有人知道更多关于这个协议或网站的信息？

# objective-c - 按下或禁用时不要更改 NSButton 外观

> ID：11781483
> 
> 赞同：1
> 
> 时间：2012-08-02T16:05:17.817
> 
> 标签：objective-c, xcode, cocoa

我有两个 NSButton，它们的开启状态和关闭状态都有图像。一次只能激活一个；单击一个，然后单击另一个来来回更改属性。

问题是，如果我在单击按钮时禁用它以使其无法再次单击，那么当按钮被禁用时图像会变暗——我不希望它变暗，我只想使用备用图像。另一方面，如果我只是让按钮保持启用状态，但以编程方式在单击它时不运行任何代码，那么当鼠标单击时会出现闪烁效果——当按钮不应该做任何事情时，这会分散注意力。

所以我要么需要防止按钮在禁用时变暗，要么在按住鼠标按钮时防止它改变按钮外观。

阅读后，听起来我需要继承 NSButtonCell 并覆盖 - (BOOL)imageDimsWhenDisabled 来做前者。但是我不知道如何子类化它（我应该继承什么样的 NSButtonCell 类）以及 NSButton 的“setCell”方法是否足以使用新的 NSButtonCell 类，或者我是否需要子类化 NSButton .

一些提示将不胜感激，或者也许有一种完全不同的方法可以实现我的目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T13:52:31.270

看一下这个：

`[btnInfo.cell setImageDimsWhenDisabled:NO];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-12T14:29:02.230

> 如果您想在不改变外观的情况下**禁用它，请执行以下操作：**

**在 MacOS - NSButton 上：**

唯一的选择是继承 NSButton 并覆盖`mouseDown`函数

```
class RadioButton: NSButton {
    override func mouseDown(with event: NSEvent) {}
} 
```

**在 iOS 上 - UIButton：**

简单禁用 UserInteraction

```
mybutton.isUserInteractionEnabled = false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-26T21:30:23.037

对于 Swift 中更新的答案，这对我有用：

`(theButton.cell! as! NSButtonCell).imageDimsWhenDisabled = false`

# javascript - jsp如何获取单选按钮的值

> ID：11781484
> 
> 赞同：0
> 
> 时间：2012-08-02T16:05:20.093
> 
> 标签：javascript, radio-button

我试图在我的 JSP 页面上获取单选按钮的值

```
document.getElementById('rButton').value 
```

当我按下提交类型按钮时，但上面的行只返回单选按钮开始的值。它不返回它的实际值。（真假）

如何检查单选按钮的实际值？

我会很感激一些帮助。:)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:07:27.120

[单选按钮](https://developer.mozilla.org/en/HTML/Element/Input)（和复选框）有一个[`checked`属性](https://developer.mozilla.org/en/DOM/HTMLInputElement)。它们的`value`属性/属性是检查它们时发送的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:07:58.363

尝试`checked`而不是`value`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:27:21.777

HTML：

```
<input type="radio" name="group2" value="Water"> Water<br>
<input type="radio" name="group2" value="Beer" checked> Beer<br>
<input type="radio" name="group2" value="Wine"> Wine ​​​​​​​​​​​​ 
```

Javascript：

```
var radioBtns=document.getElementsByName("group2");
for(i=0;i<radioBtns.length; i++){
    if(radioBtns[i].checked){
        alert(radioBtns[i].value);
    }
}​​ 
```

# sql - 创建表时出错：“数据库中已经有一个名为‘表’的对象”，但我对该名称没有约束

> ID：11781489
> 
> 赞同：3
> 
> 时间：2012-08-02T16:05:34.237
> 
> 标签：sql, sql-server

**MS SQL Server**发生错误

 **```
Error Creating Table: "There is already an object named 'table' in the database", but I have no table and not any constraint with the same name in database. 
```

我必须通知您，这发生在对表执行重命名，然后创建一个以旧表名命名的表之后。

例子：

```
sp_rename OldTable, NewTable
Create Table [OLDTable] ([id] [int] Identity(1,1) NOT NULL) 
```

然后它给了我错误

如果有人知道答案，我一直在寻找几个小时，我很乐意解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:16:13.787

尝试`SELECT * FROM sys.objects WHERE name LIKE '%yout_table_name%'`查看具有给定名称的所有现有系统对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:39:40.013

在创建表之前尝试运行下面的代码。你可能会走运。

```
DROP TABLE <tablename> 
```

当然，你永远不会真正知道发生了什么...**

# python - Linux 2.6下python安装HDF5和H5PY

> ID：11781491
> 
> 赞同：0
> 
> 时间：2012-08-02T16:05:58.870
> 
> 标签：python, linux

我不知道如何安装 hdf5-1.8.9-linux-x86_64-shared 以便我可以安装 h5py-2.0.1

我已经提取了“tar-balls”，但找不到要运行的 setup.py 文件。

最近有没有其他人这样做过？

我通过 SSH 运行 shell，我没有 root 访问权限，所以我需要安装在我的主文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:26:31.853

我想你可能已经下载了一个二进制文件。对于源安装：

[http://www.hdfgroup.org/ftp/HDF5/current/src/unpacked/release_docs/INSTALL](http://www.hdfgroup.org/ftp/HDF5/current/src/unpacked/release_docs/INSTALL)

然后对于 python 包装器：

[http://h5py.alfven.org/docs/intro/build.html](http://h5py.alfven.org/docs/intro/build.html)

# c# - WPF 应用程序设置 - 重置单个属性

> ID：11781494
> 
> 赞同：12
> 
> 时间：2012-08-02T16:06:09.990
> 
> 标签：c#, wpf, settings.settings

有一种方法可以重置应用程序设置`Settings.Default.Reset()`

有没有办法只重置一个属性？就像是

```
Settings.Default.Properties["MyPropertyName"].Reset(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T16:19:20.127

您可以使用`Settings.Default.Properties["MyProperty"].DefaultValue`获取属性的默认值，并将属性值设置为该值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-01T13:27:59.420

这是`PropertyValue`需要结合`Deserialized`（顺序问题）设置的：

```
public void ResetOneSetting(string propertyName)
{
    SettingsPropertyValue propertyToReset = Settings.Default.PropertyValues.OfType<SettingsPropertyValue>().FirstOrDefault(p => p.Name == propertyName);
    if (propertyToReset != null)
    {
        propertyToReset.PropertyValue = propertyToReset.Property.DefaultValue;
        propertyToReset.Deserialized = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-03T13:46:17.610

阅读.NET源代码时找到解决方案：

```
Settings.Default.PropertyValues["MyPropertyName"].SerializedValue = Settings.Default.Properties["MyPropertyName"].DefaultValue;
Settings.Default.PropertyValues["MyPropertyName"].Deserialized = false; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-21T22:31:53.617

在我的情况下（.NET Framework 4.6.1，带有`System.Drawing.Color`as 设置），我还必须重新分配 中的值`Settings.Default`，否则更改似乎被忽略了：

```
var propertyValue = Settings.Default.PropertyValues["myPropertyName"];

propertyValue.PropertyValue = propertyValue.Property.DefaultValue;
propertyValue.Deserialized = false;

Settings.Default["myPropertyName"] = propertyValue.PropertyValue; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-19T13:11:28.230

我使用以下代码重置程序中的设置。它利用反射并允许您直接传递属性，而不是手动写出属性名称。它可以像`ResetToDefaultValue(TestSettings.Default, x => x.TextFieldStuff);`

这样做的好处是它并非所有设置都在其中，`Settings`但有些设置可能存储在不同的设置文件中。

```
//Way to use
//ResetToDefaultValue(TestSettings.Default, x => x.TextFieldStuff);
private static void ResetToDefaultValue<T1, T2>(T1 settings, Expression<Func<T1, T2>> property, bool saveOnReset = true)
{
    if (IsSameOrSubclass(typeof(ApplicationSettingsBase), settings.GetType()))
    {
        ApplicationSettingsBase s = settings as ApplicationSettingsBase;
        if (s != null)
        {
            MemberInfo member = GetMemberInfo(property);
            if (!s.PropertyValues[member.Name].UsingDefaultValue)
            {
                s.PropertyValues[member.Name].PropertyValue = s.PropertyValues[member.Name].Property.DefaultValue;
                s.PropertyValues[member.Name].Deserialized = false;
                s[member.Name] = s.PropertyValues[member.Name].PropertyValue; //Triggers the property changed
                if (saveOnReset)
                {
                    s.Save();
                }
            }
        }
    }
}

//Way to use
//GetMemberInfo((TestSettings testSettings) => testSettings.TextFieldStuff);
private static MemberInfo GetMemberInfo<T1, T2>(Expression<Func<T1, T2>> expression)
{
    if (IsSameOrSubclass(typeof(MemberExpression), expression.Body.GetType()))
    {
        MemberExpression member = (MemberExpression)expression.Body;
        return member.Member;
    }

    throw new ArgumentException(@"Expression is not a member access", nameof(expression));
}

private static bool IsSameOrSubclass(Type potentialBase, Type potentialDescendant)
{
    return potentialDescendant.IsSubclassOf(potentialBase)
           || potentialDescendant == potentialBase;
} 
```

* * *

或者，如果您使用 C# 7.1 或更高版本，则可以使用特征匹配。

```
//Way to use
//ResetToDefaultValue(TestSettings.Default, x => x.TextFieldStuff);
private static void ResetToDefaultValue<T1, T2>(T1 settings, Expression<Func<T1, T2>> property, bool saveOnReset = true)
{
    //Requires C# >= 7.1
    if (settings is ApplicationSettingsBase s)
    {
        MemberInfo member = GetMemberInfo(property);
        if (!s.PropertyValues[member.Name].UsingDefaultValue)
        {
            s.PropertyValues[member.Name].PropertyValue = s.PropertyValues[member.Name].Property.DefaultValue;
            s.PropertyValues[member.Name].Deserialized = false;
            s[member.Name] = s.PropertyValues[member.Name].PropertyValue;
            if (saveOnReset)
            {
                s.Save();
            }
        }
    }
}

//Way to use
//GetMemberInfo((TestSettings testSettings) => testSettings.TextFieldStuff);
private static MemberInfo GetMemberInfo<T1, T2>(Expression<Func<T1, T2>> expression)
{
    //Requires C# >= 7.0
    if (expression.Body is MemberExpression member)
    {
        return member.Member;
    }

    throw new ArgumentException(@"Expression is not a member access", nameof(expression));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-23T10:37:20.397

当我查看来自@dalleria 和@nikita 的答案时，我遇到了一个问题，即当我尝试获取 DefaultValue (SettingsProperty) 或 PropertyValue (SettingsPropertyValue) 或任何其他相同类型的深层副本时，PropertyValue (SettingsPropertyValue) 意外默认价值。

所以这是我对作为类的一部分的深拷贝函数的简短实现，所以我很抱歉没有将它重构为扩展或工具方法。

```
private SettingsPropertyValue settingsPropertyValue; // (ex. Settings.Default.PropertyValues["anyPropertyName"])

private SettingsProperty settingsProperty 
            => settingsPropertyValue.Property;

/// <summary>
/// Create a deep copy of <paramref name="value"/>.
/// </summary>
/// <param name="value">
/// Should be a deserialized value (ex. <see cref="SettingsPropertyValue.PropertyValue"/>) 
/// or a serialized value (ex. <see cref="SettingsProperty.DefaultValue"/>).
/// </param>
/// <param name="isDeserialized">Indicates whether <paramref name="value"/> is deserialized or serialized.</param>
private PropertyType copyValue<PropertyType>(object value, bool isDeserialized)
{
    var temporaryPropertyValue = settingsPropertyValue.PropertyValue;
    settingsPropertyValue.PropertyValue = value;

    if (isDeserialized)
        // We have to reassign, otherwise PropertyValue/SerializedValue of SettingsPropertyValue may be defaulted
        settingsPropertyValue.SerializedValue = settingsPropertyValue.SerializedValue; 

    settingsPropertyValue.Deserialized = false;
    var propertyValue = (PropertyType)settingsPropertyValue.PropertyValue;
    settingsPropertyValue.PropertyValue = temporaryPropertyValue;
    return propertyValue;
} 
```

然后，您可以使用以下几行重置 ApplicationSettings/SettingsBase 实例的单个属性：

```
SettingsBase settings; // (ex. Settings.Default)

public void SetOriginalFromDefault()
{
    object defaultValue = settingsProperty.DefaultValue;
    defaultValue = copyValue(defaultValue, false);
    // We want to set the new value. It also triggers the INotifyPropertyChanged of settings, if the instance is from type ApplicationSettings
    settings[settingsProperty.Name] = defaultValue;
} 
```

# php - 使用 preg_replace 将 XML Twitter 数据转换为可点击的链接

> ID：11781497
> 
> 赞同：0
> 
> 时间：2012-08-02T16:06:28.627
> 
> 标签：php, xml, twitter, xml-parsing

我对编码很陌生，想尝试为我的网站构建一个 twitter 应用程序。在一些帮助下，我能够掌握所有基础知识，但我现在正在努力解决两件事：

1.  将 Twitter XML 数据转换为可点击的链接
2.  确保 XML 文本正确呈现（似乎 XML 中的“”（引号）呈现不正确（如“â€œ”）。

我似乎已经找到了如何修复这两个问题的答案，但是对于 PHP 来说太新了，我不确定如何在我的代码中实现这两个修复。任何帮助将不胜感激。

我发现问题1的解决方案：

```
function twitterify($status) {
$status = preg_replace("#(^|[\n ])([\w]+?://[\w]+[^ \"\n\r\t< ]*)#", "\\1<a href=\"\\2\" target=\"_blank\">\\2</a>", $status);
$status = preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r< ]*)#", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $status);
$status = preg_replace("/@(\w+)/", "<a href=\"http://www.twitter.com/\\1\" target=\"_blank\">@\\1</a>", $status);
$status = preg_replace("/#(\w+)/", "<a href=\"http://search.twitter.com/search?q=\\1\" target=\"_blank\">#\\1</a>", $status);
return $status;
} 
```

我发现问题 2 的解决方案是使用 html_entity_decode... 但我再次不确定如何在我的代码中实现这两个解决方案。

到目前为止我的代码：

```
<?php
            $xmldata = 'https://twitter.com/statuses/user_timeline/carmeloanthony.xml';
            $open = fopen($xmldata, 'r');
            $content = stream_get_contents($open);
            fclose($open);
            $xml = new SimpleXMLElement($content);

        ?>
    <table class="table table-striped">
        <?php

        foreach($xml->status as $status)
        {

        ?>
        <tr>
            <td> <img src=" <?php echo $status->user->profile_image_url; ?>" /> </td>
            <td><strong> <?php echo $status->user->name; ?></strong> <i>@<?php echo $status->user->screen_name; ?></i> <br /> <?php echo $status->text; ?></td>  
            <td style="width: 40px;"><?php echo date("M j",strtotime($status->created_at)); ?></td>
        </tr>
          <?php
        }

        ?>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:24:02.067

你没有设置编码。设置编码 utf-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:00:34.677

这就是我所得到的......得跑了！所需要做的就是更改正则表达式以查找位于行尾的链接......或在换行符之前

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
<?php
    $xmldata = 'https://twitter.com/statuses/user_timeline/carmeloanthony.xml';
    $open = fopen($xmldata, 'r');
    $content = stream_get_contents($open);
    fclose($open);
    $xml = new SimpleXMLElement($content);
?>
<table class="table table-striped">
    <?php
    foreach($xml->status as $status)
    {
    $statusText=$status->text;
    $pattern = '/((www|http:\/\/)[^ ]+) /';
    $replacement = '<a href="\1">\1</a>';
    $statusText = preg_replace($pattern, $replacement, $statusText);
    ?>
    <tr>
        <td> <img src="<?php echo $status->user->profile_image_url; ?>" /> </td>
        <td><strong><?php echo $status->user->name; ?></strong> <i>@<?php echo $status->user->screen_name; ?></i> <br /><?php echo $statusText; ?></td>  
        <td style="width: 40px;"><?php echo date("M j",strtotime($status->created_at)); ?></td>
    </tr>
      <?php
    }

    ?>
</table> 
```

# couchdb - 在 couchapp 列表中使用 underscorejs

> ID：11781502
> 
> 赞同：2
> 
> 时间：2012-08-02T16:06:50.390
> 
> 标签：couchdb, requirejs, underscore.js, couchapp

我正在使用 couchdb 1.2.x，我正在尝试[`underscorejs`](http://underscorejs.org/)在列表中使用，但没有成功。

这是我如何进行的：

```
function(head, req) {
  var _ = require('vendor/underscore/underscore');
  log(_);
} 
```

通过查看 couchdb 日志，我可以看到它`var _`是未定义的。此外，underscorejs 日志说：

> 1.3.0 — 2012 年 1 月 11 日
> 从 Underscore 中删除了 AMD (RequireJS) 支持。如果您想将 Underscore 与 RequireJS 一起使用，您可以将其作为普通脚本加载、包装或修补您的副本，或下载分叉版本。

我不确定如何进行；任何线索？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:51:17.543

我唯一的建议是使用替代品[Lo-Dash](http://lodash.com/)。

除此之外，如果提供 AMD 加载程序支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:11:04.103

看起来您正在尝试创建一个 couchdb 列表函数。以下是我如何使用下划线。这一切都在咖啡脚本中......

在我的设计文档中，我导入并声明库，然后从列表函数中拉入：

```
designDoc =
  ...
  lib:
    underscore: "<actual underscore code as a string>"
  ...
  list:
    listFunction: "<list function as a string, see below>"
  ... 
```

在列表函数本身中：

```
(head, req) ->
  _ = require 'lib/underscore' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T17:42:35.937

正如日志中的错误消息所述，Underscore.js 不再被格式化为开箱即用的 AMD 模块。您有两种可能的解决方案：填充或使用 AMD 化的下划线。

**垫片：**

[Shim](http://requirejs.org/docs/api.html#config-shim)将在必要的 AMD 样板文件中包含下划线，并且对您相对透明，允许您使用未修改版本的 _。

在您的情况下，这很容易，像这样配置 requireJS：

```
require.config({
  paths: {
    underscore: "vendor/underscore/underscore"
  },
  shim: {
    underscore: {
      exports: '_'
    }
  }
}); 
```

*注意：*为方便起见，我还为下划线定义了一个路径别名，但没有必要让 shim 工作。

**AMD 化：**

下划线（和主干）的 AMD 化版本由 requireJS 的作者在此处维护：[https ://github.com/amdjs/underscore](https://github.com/amdjs/underscore)

# ajax - 使用 Ajax 和线程在服务器上处理长时间运行的 jsp 请求

> ID：11781508
> 
> 赞同：0
> 
> 时间：2012-08-02T16:07:06.987
> 
> 标签：ajax, multithreading, jsp, timeout, long-running-processes

我正在尝试在服务器上为长时间运行的进程实施解决方案，在该服务器上处理 pdf 生成请求大约需要 10 分钟。浏览器在 5 分钟内无聊/超时。我正在考虑使用 Ajax 和线程来处理这个问题。我正在为 ajax 使用常规 javascript。但我坚持下去。

我已经到达了将请求发送到 servlet 并且 servlet 启动线程的地步。请参阅下面的代码

```
public class HelloServlet extends javax.servlet.http.HttpServlet 
     implements javax.servlet.Servlet {

    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {      
    }   

    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {
        System.out.println("POST request!!");
        LongProcess longProcess = new LongProcess();
        longProcess.setDaemon(true);
        longProcess.start();
        request.getSession().setAttribute("longProcess", longProcess);
        request.getRequestDispatcher("index.jsp").forward(request, response);
    }   
 }

    class LongProcess extends Thread {

        public void run() {
            System.out.println("Thread Started!!");
            while (progress < 10) {             
                try { sleep(2000); } catch (InterruptedException ignore) {}
                progress++;
            }
        }           
    } 
```

这是我的 AJax 调用

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>My Title</title>
<script language="JavaScript" >
function getXMLObject()  //XML OBJECT
    {
       var xmlHttp = false;
         xmlHttp = new XMLHttpRequest();        //For Mozilla, Opera Browsers
       return xmlHttp;  // Mandatory Statement returning the ajax object created
    }

    var xmlhttp = new getXMLObject();   //xmlhttp holds the ajax object

    function ajaxFunction() {
        xmlhttp.open("GET","HelloServlet" ,true);
        xmlhttp.onreadystatechange  = handleServerResponse;
        xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xmlhttp.send(null);
      }

    function handleServerResponse() {
       if (xmlhttp.readyState == 4) {
         if(xmlhttp.status == 200) {           
           document.forms[0].myDiv.value = xmlhttp.responseText;
           setTimeout(ajaxFunction(), 2000);
         }
         else {
            alert("Error during AJAX call. Please try again");
         }
       }
    }
    function openPDF() {    
           document.forms[0].method = "POST";
        document.forms[0].action = "HelloServlet";
        document.forms[0].submit();     
    }
    function stopAjax(){
         clearInterval(intervalID);
     }
</script>
</head> 
<body><form name="myForm">
<table><tr><td>
<INPUT TYPE="BUTTON" NAME="Download" VALUE="Download Queue ( PDF )" onclick="openPDF();">
</td></tr>
<tr><td>
Current status: <div id="myDiv"></div>%
</td></tr></table>
</form></body></html> 
```

但我不知道如何进一步进行，例如线程如何与浏览器通信该进程已完成，以及 ajax 应如何调用我并检查请求的状态。

如果我遗漏了一些片段，请告诉我。任何建议，如果有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:54:34.553

Jetty 9.0 Distribution 包括一个长轮询聊天示例，其中包括协同工作的异步 servlet 和 javascript 客户端。轮询请求由客户端发起，这会导致 servlet 启动一个异步循环，该循环故意以选定的时间间隔超时。有些浏览器可以持续很长时间，但有些只能持续 30 秒。因此，建议将超时设置为小于 30 秒。当 servlet 超时时，它会向客户端发送一个信号，导致客户端启动另一个轮询。可以通过响应随时发送数据，并且客户端可以在必要时再次连接。这具有建立从服务器到客户端的开放通道的效果。

```
// This starts an async request
AsyncContext asyncCtx = request.startAsync();
asyncCtx.setTimeout(10000);   // 10 seconds
asyncCtx.addListener(member);

// This is the timeout handler which tells the client to continue to poll
@Override
public void onTimeout(AsyncEvent event) throws IOException {
    System.out.println("Client onTimeout\r\n");
    AsyncContext asyncCtx = asyncCtxAtomRef.get();
    if ((asyncCtx != null) && asyncCtxAtomRef.compareAndSet(asyncCtx, null))
    {
        HttpServletResponse response = (HttpServletResponse)asyncCtx.getResponse();
        response.setContentType("text/json;charset=utf-8");
        PrintWriter out=response.getWriter();
        out.print("{action:\"poll\"}");
        asyncCtx.complete();
    }
} 
```

本质上，任何以“轮询”动作发送给客户端的响应都会导致客户端自动重新连接。它似乎工作得很好，所以你可能想检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:16:06.267

您可以使用 Servlet 3.0 异步处理或现有的库，如[大气](/questions/tagged/atmosphere "显示标记为“气氛”的问题")（使用下面的 servlet 3.0）。

这个想法是调用 servlet 并启动`AsyncContext`。然后，您将该上下文传递给您的线程并使用它定期发送一些进度。在客户端读取这个流有点棘手，请参阅：[jquery ajax, read the stream incrementally?](https://stackoverflow.com/questions/7740646) 不要在线程**内**访问原始`HttpServletResponse`文件，它不起作用。

这是一个示例代码：

```
@WebServlet("/hello" asyncSupported=true)
public class HelloServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse res) {
        AsyncContext async = request.startAsync(req, res);
        LongProcess longProcess = new LongProcess();
        longProcess.setDaemon(true);
        longProcess.start();
    }
}

class LongProcess extends Thread {

    private final AsyncContext asyncContext;

    public LongProcess(AsyncContext asyncContext) {
        this.asyncContext = asyncContext;
    }

    public void run() {
        System.out.println("Thread Started!!");
        while (progress < 10) {             
            try { sleep(2000); } catch (InterruptedException ignore) {}
            progress++;
            //use asyncContext here to send progress to the client incrementally
        }
    }           
} 
```

另请参阅[Servlet 3.0 中的异步支持](https://blogs.oracle.com/enterprisetechtips/entry/asynchronous_support_in_servlet_3)。

您还可以使用[气氛](/questions/tagged/atmosphere "显示标记为“气氛”的问题")库，它会为您完成并且效果很好。

# javascript - mouseenter mouseleave 和一个选择

> ID：11781518
> 
> 赞同：2
> 
> 时间：2012-08-02T16:07:33.343
> 
> 标签：javascript, jquery, mouseevent

[http://jsfiddle.net/msNhr/](http://jsfiddle.net/msNhr/)

当您越过“aaaaa”时，会显示一个叠加层，当您尝试从叠加层内的选择中选择某些内容时，它会关闭。我怎样才能做到这一点？

仅当实际覆盖区域离开时，覆盖才应关闭。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:11:07.853

看到这个小提琴： http: [//jsfiddle.net/msNhr/3/](http://jsfiddle.net/msNhr/3/)（在 Fx14 和 Ch 21.0.1180.57 上试过）

我刚刚停止了`mouseleave`事件的传播，所以它不会到达覆盖层

相关js

```
$(function() {
    $('#a').mouseenter(function() {
        $('#overlay').show();
    });
    $('#overlay').mouseleave(function() {
        $(this).hide();
    });
    $('#overlay select').mouseleave(function(ev) {
        ev.stopPropagation()
    });
}); 
```

# python - Tkinter 键盘绑定

> ID：11781521
> 
> 赞同：7
> 
> 时间：2012-08-02T16:07:51.990
> 
> 标签：python, tkinter, keyboard-shortcuts

我正在使用 Tkinter 和画布小部件开发一个界面，到目前为止，我已经从其他问题和发布的答案中找到了问题的答案，但我对这个问题感到困惑。

我在创建 GUI 元素的类中有几个键盘绑定，并且在程序启动时它们都可以正常工作。绑定看起来像这样：

```
self.canvas.get_tk_widget().bind("<Control-o>",self.flash_open) 
```

并且在类的 __init__ 函数中。截至昨天，我初始化了这个类来启动程序，然后等待用户从菜单中选择打开，然后打开（除其他外）一个 tkmessagebox

```
self.specfilename =askopenfilename(filetypes=[("spec", "")],initialdir= self.pathname) 
```

使用这个文件名，我可以从某个文件类型中检索我需要的变量名（与问题无关）。今天修改了__init__函数，在程序启动时调用open函数。由于在打开此文件之前无法进行任何其他操作，因此首先打开它是有意义的。选择文件并关闭 Tkmessagebox 后，根窗口将处于活动状态，但没有任何键盘绑定工作。我的功能仍然可以使用分配给它们的菜单/按钮工作，而不是绑定。我尝试将快捷方式绑定到根目录，结果相同，现在我认为这可能是我调用它们的顺序问题

```
def __init__(self):
    ...
    self.openfile() #calls the tkmessagebox
    self.root.mainloop() #starts gui 
```

我之前实际上遇到过这个问题，其中一个 toplevel() 实例被关闭/销毁并禁用了父窗口的绑定。没有任何错误消息可言，绑定只是不做任何事情。我还应该提到我试图再次关注根窗口

```
self.openfile()
self.root.mainloop()
self.root.focus_set() 
```

我之前通过使用 wm_withdraw() 和 wm_deiconify() 函数来简单地隐藏子窗口，然后在程序完成后关闭它。但是，在这种情况下，此修复程序更难应用。如果有人可以阐明问题的原因，我将不胜感激。

编辑：

我编写了一个可运行的代码段来准确显示我的问题。

```
import os
from tkFileDialog import askopenfilename
from Tkinter import *

class Start:
    def __init__(self):

        self.root = Tk()
        self.root.title('Binding Troubles')
        menubar = Menu(self.root)
        #add items and their commands to the menubar
        filemenu = Menu(menubar, tearoff=0)
        filemenu.add_command(label="Do work", command=self.do_work)
        filemenu.add_command(label="Open File",command=self.openfile)
        menubar.add_cascade(label="File", menu=filemenu)
        #bind control-o to perform the do work function
        self.root.bind("<Control-o>",self.flash_do_work)
        self.root.bind("<Control-O>",self.flash_do_work)
        #add the menubar to the GUI
        self.root.config(menu=menubar) 
        #initially open a tkdialog to open a file
        self.openfile()#comment out this line to make the bind work 
        self.root.focus()#also tried self.root.focus_set()
        self.root.mainloop()
    def flash_do_work(self,event):
        #indirect tie to the do_work() function, I'm don't know a 
        #proper way to make functions handle calls from both events and non-events
        self.do_work()
    def openfile(self):
        #gets current path
        self.pathname = os.getcwd()
        #Requests filename using a tkdialog
        self.filename =askopenfilename(initialdir= self.pathname)
        print self.filename
    def do_work(self):
        #placeholder for actual function; shows whether the bind is working or not
        print "work"

Start() 
```

如果 self.openfile() 从 __init__ 中删除，绑定将起作用，并且仅在菜单中使用

另一个编辑：我再次更新了示例，提供了一个菜单选项来运行 openfile() 函数。我注意到如果在 __init__ 中调用 openfile()，绑定将不起作用。但是如果接下来再次调用 openfile 函数，这次是从菜单中手动调用，绑定将再次开始工作。不完全确定从中得到什么。另外，我很抱歉这篇文章太长了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T16:56:14.523

改变

```
self.openfile() 
```

到

```
self.root.after(1, self.openfile) 
```

这会将调用移动`askopenfilename`到主事件循环中。将它放在主事件循环之外会以某种方式破坏您的事件绑定。

# xcode - UITableView 在添加新单元格时滚动

> ID：11781522
> 
> 赞同：0
> 
> 时间：2012-08-02T16:07:52.357
> 
> 标签：xcode, uitableview, scroll

在我的应用程序中，我有一个下拉刷新功能。基本上，它的作用是在我的 UITableView 顶部添加更多单元格。但是，当我这样做时，屏幕会自动向下滚动。我想在加载新单元格时保持我在屏幕上的位置。

```
[dataPosts insertObject:[[MainButton alloc] initWithFrame:CGRectMake(0, 0, 320, 260) withData:0 hasNick:[self createRandomStringWithLength:140]] atIndex:0]; 
```

dataPosts 是我的 UITableView 的数据数组。MainButton 是一个大小为 320,260 的 UIView，它作为视图添加到 UITableViewCell 中。因此，每当我在数据中添加新条目时，表格会自动向下滚动 260 个单位，但我希望我的位置保持不变。提前致谢。

-C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:17:00.607

当要插入新行时，您知道要插入多少行。因此，基于此，`scrollToRowAtIndexPath:atScrollPosition:animated:`即使在顶部插入新行，您也可以将 UITableView 的方法调用到同一位置。

例如：当前显示 10 行，第 1 行在顶部。现在假设，要插入新的多 20 行。在没有动画的情况下插入它们。现在，用 indexPath.row 为 21 调用上面提到的方法，没有动画。

希望有帮助。如果您正在寻找其他东西，请告诉我。

# couchdb - CouchDB 历史视图快照

> ID：11781530
> 
> 赞同：0
> 
> 时间：2012-08-02T16:08:15.030
> 
> 标签：couchdb

我有一个数据库，其中包含大致如下形式的文档：

```
{"created_at": some_datetime, "deleted_at": another_datetime, "foo": "bar"} 
```

假设我们将来不需要处理“deleted_at”，那么获取数据库中未删除文档的计数是微不足道的。创建一个简化为以下内容的视图也很简单（使用 UTC）：

```
[
  {"key": ["created", 2012, 7, 30], "value": 39},
  {"key": ["deleted", 2012, 7, 31], "value": 12}
  {"key": ["created", 2012, 8, 2], "value": 6}
] 
```

...这意味着 39 个文档在 2012 年 7 月 30 日被标记为创建，12 个在 2012 年 7 月 31 日被标记为删除，依此类推。我想要的是一种有效的机制来获取 2012-08-01 (0+39-12 == 27) 上“存在”多少文档的快照。理想情况下，我希望能够以日期作为键或索引来查询视图或数据库（例如，已预先计算并保存到磁盘的东西），并将计数作为值或文档。例如：

```
[
  {"key": [2012, 7, 30], "value": 39},
  {"key": [2012, 7, 31], "value": 27},
  {"key": [2012, 8,  1], "value": 27},
  {"key": [2012, 8,  2], "value": 33}
] 
```

这可以很容易地通过遍历视图中的所有行来计算，保持一个运行的计数器并在我每天进行时总结，但是随着数据集的增长，这种方法会变慢，除非我对缓存或存储结果。有没有更聪明的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:41:30.863

只是为了比较（我希望有人有更好的解决方案），这里（或多或少）我目前是如何解决它的（在未经测试的 ruby​​ 伪代码中）：

```
require 'date'

def date_snapshots(rows)
  current_date  = nil
  current_count = 0
  rows.inject({}) {|hash, reduced_row|
    type, *ymd = reduced_row["key"]
    this_date  = Date.new(*ymd)
    if current_date
      # deal with the days where nothing changed
      (current_date.succ ... this_date).each do |date|
        key       = date.strftime("%Y-%m-%d")
        hash[key] = current_count
      end
    end
    # update the counter and deal with the current day
    current_date   = this_date
    current_count += reduced_row["value"] if type == "created_at"
    current_count -= reduced_row["value"] if type == "deleted_at"
    key       = current_date.strftime("%Y-%m-%d")
    hash[key] = current_count
    hash
  }
end 
```

然后可以像这样使用它：

```
rows = couch_server.db(foo).design(bar).view(baz).reduce.group_level(3).rows
date_snapshots(rows)["2012-08-01"] 
```

明显的小改进将是添加一个缓存层，尽管让该缓存层很好地播放增量更新（例如更改馈送）并不是那么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:18:14.620

我发现一种方法似乎比我原来的方法好得多，假设您只关心一个日期：

```
def size_at(date=Time.now.to_date)
  ymd = [date.year, date.month, date.day]
  added = view.reduce.
    startkey(["created_at"]).
    endkey(  ["created_at", *ymd, {}]).rows.first || {}
  deleted = view.reduce.
    startkey(["deleted_at"]).
    endkey(  ["deleted_at", *ymd, {}]).rows.first || {}
  added.fetch("value", 0) - deleted.fetch("value", 0)
end 
```

基本上，让 CouchDB 为您进行缩减。我最初并没有意识到您可以将 reduce 与 startkey/endkey 混合搭配。

不幸的是，这种方法需要对数据库进行两次点击（尽管这些可以并行化或流水线化）。当您想一次获得很多这些尺寸时（例如，查看整个历史记录，而不是只查看一个日期），它就不起作用了。

# css - 使用 CSS 交替左右定位

> ID：11781531
> 
> 赞同：8
> 
> 时间：2012-08-02T16:08:19.587
> 
> 标签：css

所以使用 PHP 我正在显示一个图像页面。我有一个包含这些图片的 div 标签。

我想做的是将这些图像交替放置在浏览器的左侧和右侧。

因此条目 1 位于左侧向下滚动条目 2 位于右侧，依此类推。

如果我的 div 容器是`style="position:relative;width=100%"` 如何让我的图像交替拥抱浏览器的左侧和侧面？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T16:12:47.360

有几种可能的方法，一种是：

CSS：

```
div img{
 float:left;  
 clear:both;    
}
div img:nth-of-type(2n){
  float:right;
} 
```

检查**[示例](http://jsfiddle.net/poikl/sgp6b/)**

如果您不希望它们以这种方式交替，请使用

```
div img{
 float:left;  
 clear:left;    
}
div img:nth-of-type(2n){
  float:right; 
  clear:right;
} 
```

根据您必须支持的浏览器（Internet Explorer 8 及更低版本不支持该选择器），在所有偶数图像上使用一个类并替换`:nth-of-type(2n)`为该类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:11:40.207

对于左拥抱者：

```
style="float:left;clear:left;" 
```

对于右翼拥护者

```
style="float:right;clear:right;" 
```

...尽管如果您的容器不够宽，无法容纳超过 2 个图像，您将不需要“清晰”声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:12:34.710

设置`float: left;`何时`index%2 == 0`以及`float: right;`何时`index%2==1` `index`成为遍历图像的循环的索引变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T16:16:14.330

与其他答案类似

```
div img:nth-child(even) { float: right; clear: right; }
div img:nth-child(odd) { float: left; clear: left; } 
```

演示：http: [//jsfiddle.net/GL667/](http://jsfiddle.net/GL667/)

# c++ - 使用 eclipse 在 C++ 中读取 openstreetmap XML 文件

> ID：11781533
> 
> 赞同：-1
> 
> 时间：2012-08-02T16:08:20.337
> 
> 标签：c++, xml, eclipse, dom, openstreetmap

我是 xml 新手。我正在尝试读取从 openstreetmaps 获取的 xml 文件。它看起来如下

```
<?xml version="1.0" encoding="UTF-8"?>
<osm version="0.6" generator="CGImap 0.0.2">
 <bounds minlat="48.3994690" minlon="9.9897780" maxlat="48.3998220" maxlon="9.9898260"/>
 <node id="149248718" lat="48.3994984" lon="9.9897961" user="Matthias Frank" uid="287306" visible="true" version="7" changeset="7966729" timestamp="2011-04-25T18:01:43Z"/>
 <node id="1831376336" lat="48.3995041" lon="9.9898087" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:02:51Z"/>
 <node id="1831376346" lat="48.3995599" lon="9.9902392" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:02:52Z"/>
 <node id="1831376331" lat="48.3993243" lon="9.9898198" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:02:51Z"/>
 <node id="1831376349" lat="48.3996127" lon="9.9906471" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:02:52Z"/>
 <node id="1831376348" lat="48.3996044" lon="9.9910549" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:02:52Z"/>
 <node id="1831376418" lat="48.4000685" lon="9.9897909" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:02:55Z"/>
 <node id="1831376350" lat="48.3996158" lon="9.9908451" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:02:52Z"/>
 <node id="1831376374" lat="48.3999450" lon="9.9897917" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:02:54Z"/>
 <way id="172207897" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:02:59Z">
  <nd ref="1831376348"/>
  <nd ref="1831376350"/>
  <nd ref="1831376349"/>
  <nd ref="1831376346"/>
  <nd ref="1831376336"/>
  <tag k="bicycle" v="yes"/>
  <tag k="highway" v="living_street"/>
  <tag k="name" v="Hintere Rebengasse"/>
  <tag k="oneway" v="yes"/>
 </way>
 <way id="172207928" user="NUP" uid="168758" visible="true" version="1" changeset="12345652" timestamp="2012-07-19T20:03:01Z">
  <nd ref="1831376331"/>
  <nd ref="1831376336"/>
  <nd ref="1831376374"/>
  <nd ref="1831376418"/>
  <tag k="bicycle" v="yes"/>
  <tag k="highway" v="living_street"/>
  <tag k="name" v="Pfauengasse"/>
  <tag k="oneway" v="yes"/>
 </way>
</osm> 
```

什么是读取数据的最简单和最短的方法，例如从我想要读取 id、lat、lon 的节点以及我想要保存该信息的每个节点。对于作为“方式”的元素，我想阅读附加到它的 ref 和“tag”元素。

我正在使用简单的 fstream，但它看起来不是最有效的方式。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:12:05.063

您可以而且应该使用 XML 解析器，而不是再次发明轮子：

[http://lars.ruoff.free.fr/xmlcpp/](http://lars.ruoff.free.fr/xmlcpp/)

对于轻量级解析，我通常使用 RapidXml。它速度快且易于使用（至少从我的角度来看）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:11:09.890

您应该使用 XML 解析库。哪一个取决于你。目前，我正在查看 tinyxml，但我还没有使用它，所以我不能认可它。不过，将其合并到项目中看起来确实很简单。

# spring - 使用 Maven 构建测试不会在其他机器上运行

> ID：11781540
> 
> 赞同：2
> 
> 时间：2012-08-02T16:08:44.470
> 
> 标签：spring, maven, osgi

我有一个在 32 位机器上开发的 spring-osgi-application。在那里我可以毫无问题地构建我的捆绑包（例如：mvn clean package）。

我有一台新机器，一台 intel 64 位机器，但测试没有运行。它无法从被模拟的其他包中找到自动装配的依赖项（bean）。

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.yourtools.athene.store.AtheneStore] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
... 34 more 
```

我可以检查什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:35:19.313

好吧，看起来 spring 正在寻找一个 Bean“org.yourtools.athene.store.AtheneStore”并且找不到实现。正如您所说，如果您清理本地 maven 存储库，您的程序也不会在第一台机器上编译，您很可能在 pom.xml 中缺少依赖项。

找到相应的jar，将其添加为依赖项，一切都应该没问题。

# java - 为什么我的 JButton 在小程序调整大小之前不会出现，而我的 JCombo 框在单击之前是不可见的？

> ID：11781542
> 
> 赞同：1
> 
> 时间：2012-08-02T16:08:47.080
> 
> 标签：java, swing, graphics, applet, awt

嗨，首先我想说我是该网站的新手，并且对编程（主要是图形）非常陌生，我想提前为提出任何愚蠢的问题道歉。另外，我要感谢任何好心的人，他们抽出时间来帮助我解决这个问题。

我的问题是，当我尝试通过让某些 JButtons 使某些按钮不可见然后其他按钮可见（使其看起来像不同的屏幕）来制作菜单时，除非我重新调整窗口大小或最小化，否则一切都会变得不可见。但是，一旦从菜单切换到菜单后，这样做就可以完美地工作。此外，我还有一些 JComboBoxes 出现，但在单击它们之前是不可见的或部分不可见的，我也不知道他们为什么这样做。

这个小程序将在完成后作为帮助其他孩子学习化学的工具上线。我首先开始研究的部分（带有 JComboBoxes 的部分）是一个单位转换器。我想在正确放置所有东西之前让所有东西都正常工作，我的一些变量名可能会让其他人有点困惑，所以如果在我的代码中描述应该做的事情会让你更容易帮助，请问我会尽力解释我在那里做什么。

再次感谢

这是我为小程序创建图形的代码：

```
import java.awt.*; 
import java.applet.*; 
import java.awt.event.*;
import javax.swing.*;

public class test extends Applet implements ActionListener 
{
 private int screen = -1;//-1 is value for startup screen
 private JComboBox box1, box2, box3, box4, box5, box11, box22, box33, box44,          box55;//drop downs for unit converter
 private static String[] cVolumeO = {"Ml","L"}; //Unit options for converter
 private static String[] cAreaO = {"sqFt","sqMile"};
 private static String[] cLengthO = {"ft","Mile"};
 private static String[] cTempO = {"C","F","K"};
 private static String[] cChemO = {"Moles","Grams"}; //end of unit options for converter
 private static String[] filename;//store pic filenames
 private Icon[] pics;//stores applet pics
 private JLabel picture;
 private Button MainMenu;
 private Button periodicTable, element, solvers, balancer, fChart, converter; //main menu buttons
 private Button Continue; //start up screen
 private TextField dialog;
 private TextField cVolume, cArea, cLength, cTemp, cChem; //converter entry fields
 private TextField volumeAnswer, areaAnswer, lengthAnswer, tempAnswer, chemAnswer;//converter answer fields

 public void init(){  
      setBackground(new Color(10,10,205));
      setSize(500, 500);
      setLayout(new FlowLayout()); 

      instanceVarAssigner();//sets all variables to their correct values (it's basically a constructor)
      createStartScreen_();//sets up default screen by making all invisible except continue button + default words and picture
      assignLocation();//positions all of the items to their proper locations

      add(Continue); //adds all buttons to the applet screen
      add(periodicTable);
      add(element);
      add(solvers);
      add(balancer);
      add(fChart);
      add(converter); 
      add(MainMenu);
      add(box1);
      add(box11);
      add(box2);
      add(box22);
      add(box3);
      add(box33);
      add(box4);
      add(box44);
      add(box5);
      add(box55);
      add(cVolume);
      add(cArea);
      add(cLength);
      add(cTemp);
      add(cChem);
      add(volumeAnswer);
      add(areaAnswer);
      add(lengthAnswer);
      add(tempAnswer);
      add(chemAnswer);

      // adds functionality to all the buttons
      periodicTable.addActionListener(this); 
      element.addActionListener(this); 
      solvers.addActionListener(this); 
      balancer.addActionListener(this); 
      fChart.addActionListener(this); 
      converter.addActionListener(this); 
      MainMenu.addActionListener(this);
      Continue.addActionListener(this);
      box1.addActionListener(this);
      box2.addActionListener(this);
      box3.addActionListener(this);
      box4.addActionListener(this);
      box5.addActionListener(this);

      repaint();     
 }//end init();

    public void paint(Graphics g) 
     { 
      g.setColor(Color.RED);
      g.drawString(dialog.getText(),20,100);

      if(screen==0){//Main Menu
          mainSetup();
      }
      else if(screen==1){//PeriodicTable
          ptSetup();
      }
      else if(screen==2){//Element Finder/Info
          elementSetup();
      }
      else if(screen==3){//Solvers
          solverSetup();
      }
      else if(screen==4){//Balancer
          balancerSetup();
      }
      else if(screen==5){//fChart
          fChartSetup();
      }
      else if(screen==6){//Converter
          converterSetup();
      }

 }//end paint();

    private void solverSetup() {
        periodicTable.setVisible(false);
        element.setVisible(false);
        solvers.setVisible(false);
        balancer.setVisible(false);
        fChart.setVisible(false);
        converter.setVisible(false);
        MainMenu.setVisible(true);
    }

    private void elementSetup() {
      periodicTable.setVisible(false);
      element.setVisible(false);
      solvers.setVisible(false);
      balancer.setVisible(false);
      fChart.setVisible(false);
      converter.setVisible(false);
      MainMenu.setVisible(true);    
    }

    private void balancerSetup() {
      periodicTable.setVisible(false);
      element.setVisible(false);
      solvers.setVisible(false);
      balancer.setVisible(false);
      fChart.setVisible(false);
      converter.setVisible(false);
      MainMenu.setVisible(true);
    }

    private void fChartSetup() {
      periodicTable.setVisible(false);
      element.setVisible(false);
      solvers.setVisible(false);
      balancer.setVisible(false);
      fChart.setVisible(false);
      converter.setVisible(false);
      MainMenu.setVisible(true);
    }

    private void converterSetup() {
    periodicTable.setVisible(false);
    element.setVisible(false);
    solvers.setVisible(false);
    balancer.setVisible(false);
    fChart.setVisible(false);
    converter.setVisible(false);
    MainMenu.setVisible(true);
    box1.setVisible(true);
    box2.setVisible(true);
    box3.setVisible(true);
    box4.setVisible(true);
    box5.setVisible(true);
    box11.setVisible(true);
    box22.setVisible(true);
    box33.setVisible(true);
    box44.setVisible(true);
    box55.setVisible(true);
    cVolume.setVisible(true);
    cArea.setVisible(true);
    cLength.setVisible(true);
    cTemp.setVisible(true);
    cChem.setVisible(true);
    volumeAnswer.setVisible(true);
    areaAnswer.setVisible(true);
    lengthAnswer.setVisible(true);
    tempAnswer.setVisible(true);
    chemAnswer.setVisible(true);
    }

    private void ptSetup() {
      periodicTable.setVisible(false);
      element.setVisible(false);
      solvers.setVisible(false);
      balancer.setVisible(false);
      fChart.setVisible(false);
      converter.setVisible(false);
      MainMenu.setVisible(true);

    }

    private void mainSetup() {
      periodicTable.setVisible(true);
      element.setVisible(true);
      solvers.setVisible(true);
      balancer.setVisible(true);
      fChart.setVisible(true);
      converter.setVisible(true);
      MainMenu.setVisible(false);   
    }

    public void actionPerformed(ActionEvent evt)  
     { 
         if(evt.getSource() == element){ 
            dialog.setText("element was pushed.");
            screen=2;
            repaint();
         }

         else if(evt.getSource() == periodicTable){
            dialog.setText("pt was pushed.");
            screen=1;
            repaint(); 
         }

         else if(evt.getSource() == solvers){
            dialog.setText("s was pushed.");
            screen=3;
            repaint(); 
         }

         else if(evt.getSource() == balancer){
            dialog.setText("b was pushed.");
            screen=4;
            repaint(); 
         }

         else if(evt.getSource() == fChart){
            dialog.setText("fC was pushed.");
            screen=5;
            repaint(); 
         }

         else if(evt.getSource() == converter){
            dialog.setText("c was pushed.");
            screen=6;
            repaint(); 
         }

         else if(evt.getSource() == MainMenu){
            createStartScreen_();//refreshes shutting off of all things so that the code doesnt need to be repeated.
            dialog.setText("Main Menu");
            Continue.setVisible(false);
            screen=0;
            repaint();
         }

         else if(evt.getSource() == Continue){
             dialog.setText("Main Menu");
             screen=0;
             Continue.setVisible(false);
             repaint();  
         }
      }//end actionPreformed();

    private void instanceVarAssigner(){
        MainMenu=new Button("Main Menu");
          periodicTable = new Button("Peoridic Table"); 
          element = new Button("Element Finder/Info");
          solvers = new Button("Solvers"); 
          balancer = new Button("Equation Balancer"); 
          fChart = new Button("Formula Chart"); 
          converter = new Button("Unit Converter"); 
          Continue = new Button("Continue");

          box1 = new JComboBox(cVolumeO);//converter items
          box11 = new JComboBox(cVolumeO);
          box2 = new JComboBox(cAreaO);
          box22 = new JComboBox(cAreaO);
          box3 = new JComboBox(cLengthO);
          box33 = new JComboBox(cLengthO);
          box4 = new JComboBox(cTempO);
          box44 = new JComboBox(cTempO);
          box5 = new JComboBox(cChemO);
          box55 = new JComboBox(cChemO);
          volumeAnswer = new TextField("0");
          areaAnswer = new TextField("0");
          lengthAnswer = new TextField("0");
          tempAnswer = new TextField("0");
          chemAnswer = new TextField("0");
          cVolume = new TextField("0");
          cArea = new TextField("0");
          cLength = new TextField("0");
          cTemp = new TextField("0");
          cChem = new TextField("0"); //end of converter items

          dialog = new TextField("Homework Helper: Chemistry Edition V1.0 by BMCA Tech. Press Continue to begin...",35);

          preventChanges();//makes all answer fields in app uneditable
    }

    private void createStartScreen_(){//sets all buttons to false other than continue which is set to true and displays default pic and text.
        Continue.setVisible(true);
        dialog.setText("Homework Helper: Chemistry Edition V1.0 by BMCA Tech. Press Continue to begin...");
        periodicTable.setVisible(false);
        MainMenu.setVisible(false);
        converter.setVisible(false);
        fChart.setVisible(false);
        balancer.setVisible(false);
        solvers.setVisible(false);
        element.setVisible(false);
        box1.setVisible(false);
        box2.setVisible(false);
        box3.setVisible(false);
        box4.setVisible(false);
        box5.setVisible(false);
        box11.setVisible(false);
        box22.setVisible(false);
        box33.setVisible(false);
        box44.setVisible(false);
        box55.setVisible(false);
        cVolume.setVisible(false);
        cArea.setVisible(false);
        cLength.setVisible(false);
        cTemp.setVisible(false);
        cChem.setVisible(false);
        volumeAnswer.setVisible(false);
        areaAnswer.setVisible(false);
        lengthAnswer.setVisible(false);
        tempAnswer.setVisible(false);
        chemAnswer.setVisible(false);
    }//end createStartScreen

    private void assignLocation(){
        MainMenu.setLocation(10, 10);
        box1.setLocation(10, 50);
    }

    private void preventChanges(){
        volumeAnswer.setEditable(false);
        areaAnswer.setEditable(false);
        lengthAnswer.setEditable(false);
        tempAnswer.setEditable(false);
        chemAnswer.setEditable(false);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:45:28.467

1.  **不要将 Swing 和 AWT 组件混合在一起。**使用所有 Swing 组件。混合 Swing 和 AWT 组件会导致许多问题。
2.  `validate()`添加所有组件后调用。这告诉 JVM 验证组件的布局。它是`pack()`框架的一部分。
3.  使用 a`CardLayout`在不同的 GUI 元素之间进行交换。

# android - Android暂停线程但将内容添加到文本视图

> ID：11781543
> 
> 赞同：-1
> 
> 时间：2012-08-02T16:08:53.767
> 
> 标签：android, bluetooth, arduino, bluesmirf

我有一个线性布局，我在其中放置一个 id 为“out”的 textview。在我的代码中，我得到了这个 textview 并调用了 out.append("Some string here");。我想做的是让它使用 thread.sleep(1000); 等待一秒钟，然后再做一次追加。当我只使用一个 for 循环并遍历它十次时，它会等待十秒钟，然后在最后更新视图。我怎样才能让这个更新在睡眠之间的视图？

附言。这样做的主要原因是因为我有另一个使用蓝牙输出流运行的线程，我希望它在每次向通过 bluesmirf 模块连接的 arduino 发送字节时更新文本视图。我可以让它发送数据，但屏幕的更新发生在 for 循环的末尾。如果我在这个循环中休眠，它将等待一秒钟，然后输出到 arduino 没问题。我只想更新它，这样我就可以在不使用日志的情况下看到失败的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:22:38.617

也许您可以使用后延迟处理程序

```
Handler handler = new Handler();
                handler.postDelayed(new Runnable() {
                    public void run() {
                   //Here is the code you want to run after 1 second
                    }
                }, 1000); 
```

处理程序没有阻塞，但也许它可以提供帮助

对不起，我的英语不好，祝你好运！

# sql - 困难的交叉表查询

> ID：11781547
> 
> 赞同：1
> 
> 时间：2012-08-02T16:09:05.017
> 
> 标签：sql, ms-access, many-to-many, rdbms

在开发一个相对复杂的关系数据库时，我有点束手无策。

数据库的目的是允许经理安排与来自特定公司的代表（或代表组）的会议。

当然，列出与安排的会议有关的细节的表格是最重要的。不幸的是，它的大部分信息对于用户来说几乎是不可能解析的，因为这些字段只是返回其他表的数字字段。

所以我真正需要的是，能够创建一个查询，将所有这些不同的信息收集在一起，与会议密钥相关联，并允许用户以表格形式输入所有相关信息，以便……安排此类约会。

这是示意图（隐藏了一些不相关的信息）

![预约关系图](../Images/4b2cf6a02affbc57d201c6ba0a512e2d.png)

（是我的想象还是png异常小？）

我正在考虑制作一系列很长的 SELECTS 和 INNER JOINS。就像是

```
SELECT Meeting.MID, Meeting.Date_dd/mm/yyyy, Meeting.Location, Contact.Cname, Contingent.Manager [...]
FROM Meeting INNER JOIN (ContactMeeting INNER JOIN (Contact INNER JOIN [...] 
```

但我很担心，因为这些关系不是线性的；ContactMeeting 分支到 Contact、Group_contact 和 Contingent；在这种情况下，INNER JOINS 可能不起作用。ContactMeetings 可能有一个 Contact、一个 Group_contact 或两者都存在（包括 or），但**总会**有一个 Contingent 存在（由一个或多个经理组成）。

与此相关的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:41:46.043

对于更漂亮的子表单，您可以为表单设置一些表单属性，使其包含在子表单控件中。您需要在设计视图中打开（子）表单。

![边框样式](../Images/dfd69031fe85d8878853b53be81628b2.png)

# r - 测试 R 中的逻辑分布

> ID：11781549
> 
> 赞同：1
> 
> 时间：2012-08-02T16:09:09.943
> 
> 标签：r, statistics, distribution, logistics

我有一组数据，我想知道这个数据集是否有逻辑分布。当我制作我的数据集的直方图时（请参阅[http://imageshack.us/photo/my-images/593/histogram.png/](http://imageshack.us/photo/my-images/593/histogram.png/)上的直方图），它似乎有一个逻辑分布，但可以肯定的是我会喜欢在 R 中测试逻辑分布。所以我的问题是：有没有办法测试你的数据的逻辑分布，你是如何做到的？

附加信息：数据集由 8544 个项目组成。数据是 2 个地理点之间的水平距离，以千米为单位。

感谢您的关注

桑德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T16:34:58.457

在 R 中，您可以使用`ks.test`or`chisq.test`函数（可能还有其他函数）来测试假设分布。请注意，这些测试（和其他测试）都是排除测试，不显着的结果并不能保证数据来自给定的分布，只是您不能排除它。另请注意，对于 8544 的样本量，这些测试可能会被压倒，这意味着它将有能力找到微小的无意义差异，并且即使它“足够接近”，您也可能会拒绝原假设。此外，您根据首先查看数据来决定分布这一事实可能会使结果产生偏差。

如果逻辑分布“足够接近”而不是精确分布，另一种方法可能会让您更好地感受，是使用`vis.test`TeachingDemos 包中的函数（请务必阅读帮助页面中引用的论文以了解测试和假设你正在制作）。

最重要的是理解导致数据的科学，逻辑分布在科学上有意义吗？还有哪些其他分布可能是合理的？还要了解您试图用数据回答什么问题以及对分布的这些答案有什么影响（例如，CLT 将允许您使用正态来回答一些问题，但不能使用正态分布来回答其他问题，甚至虽然数据来自物流或类似的东西）。

# blackberry - 如何允许跨不同管理器字段的滚动方向？

> ID：11781551
> 
> 赞同：0
> 
> 时间：2012-08-02T16:09:18.120
> 
> 标签：blackberry, field

让我举个例子吧。此代码在管理器中工作：

```
protected boolean navigationMovement(int dx, int dy, int status, int time) {
        int focusIndex = getFieldWithFocusIndex();

        while (dy > 0) {
            if (focusIndex + columnwidth.length >= getFieldCount()) {
                return false;
            } else {
                Field f = getField(focusIndex + columnwidth.length);
                if (f.isFocusable()) {
                    f.setFocus();
                    dy--;
                }
            }
        }

        while (dy < 0) {
            if (focusIndex - columnwidth.length < 0) {
                return false;
            } else {
                Field f = getField(focusIndex - columnwidth.length);
                if (f.isFocusable()) {
                    f.setFocus();
                    dy++;
                }
            }
        }

        while (dx > 0) {
            focusIndex++;
            if (focusIndex >= getFieldCount()) {
                return false;
            } else {
                Field f = getField(focusIndex);
                if (f.isFocusable()) {
                    f.setFocus();
                    dx--;
                }
            }
        }

        while (dx < 0) {
            focusIndex--;
            if (focusIndex < 0) {
                return false;
            } else {
                Field f = getField(focusIndex);
                if (f.isFocusable()) {
                    f.setFocus();
                    dx++;
                }
            }
        }
        return true;
} 
```

现在我的屏幕像这样添加了 3 个不同的经理。

```
add(new Custom_TopField(this, 0, -1, "", 1, 1));
add(new Custom_BottomField(this, 0));
add(new Custom_HeaderField(Config_GlobalFunction.latest)); 
```

除了`extends Manager`当我下降时，它也会向左而不是底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:22:44.993

我找到了一个解决方案，但这个解决方案根本不实用。我在一个 java 类中创建了所有类。因此，该类不能被重用。

# persistence - 如何使openjpa 2.2.0不保留外键

> ID：11781552
> 
> 赞同：3
> 
> 时间：2012-08-02T16:09:28.953
> 
> 标签：persistence, openjpa

我有两个表..资产表

ASSET_ID SYSIBM INTEGER 4 0 没有
USER_ID SYSIBM INTEGER 4 0 没有
ASSET_TYPE_ID SYSIBM SMALLINT 2 0 没有
ACCESSIBILITY_ID SYSIBM SMALLINT 2 0 是
DOWNLOAD_TYPE_ID SYSIBM SMALLINT 2 0 没有
ASSET_STATUS_ID SYSIBM SMALLINT 2 0 没有
ASSET_MARKETING_ID SYSPIIBM SMALLINT 2 0 是
ASSET_MARKETING_ID SYSPIIBM SMALLINT 2 0 是

和可访问性表

ACCESSIBILITY_ID SYSIBM SMALLINT 2 0 否
ACCESSIBILITY_DESC SYSIBM VARCHAR 50 0 否

我有两个豆子，

资产豆

 `````
@Column(name="ASSET_ID")
@GeneratedValue(strategy=GenerationType.IDENTITY)
private int assetId;

@Column(name="DATE_CREATED")
private Timestamp dateCreated;

@Column(name="LAST_UPDATED")
private Timestamp lastUpdated;

@Column(name="DATE_PUBLISHED")
private Timestamp datePublished;

@Column(name="ASSET_SURVEY")
private Short assetSurvey;

@Column(name="ASSET_HELP")
private Short assetHelp;

@Column(name="ACCEPTED_TERMS")
private Short acceptedTerms;

@Column(name="ASSET_DESC")
@Lob
private String assetDesc;

@Column(name="ASSET_ALIAS")
private String assetAlias;

@Column(name="ASSET_TITLE")
private String assetTitle;

@Column(name="ASSET_SUMMARY")
private String assetSummary;

@Column(name="ASSET_URL")
private String assetUrl;

@Column(name="ASSET_ORIGINALITY")
private Short assetOriginality; 

@Column(name="ASSET_INVENTION")
private Short invationDisclosure;

@Column(name="ASSET_PRIVACY")
private String  privacyCompliance;  

@ManyToOne
@JoinColumn(name="ASSET_PI_SPI_ID")
private AssetPiSpi assetPiSpiId;

@ManyToOne
@JoinColumn(name="ASSET_MARKETING_ID")
@ForeignKey
private AssetMarketing assetMarketingId;    

@ManyToOne(cascade=CascadeType.REMOVE,fetch=FetchType.LAZY)
@JoinColumn(name="ACCESSIBILITY_ID")
@ForeignKey
private Accessibility accessibilityId; 
````  `和可访问性

```
@Column(name="ACCESSIBILITY_ID")
private short accessibilityId;

@Column(name="ACCESSIBILITY_DESC")
private String accessibilityDesc;

@OneToMany(mappedBy="accessibilityId",cascade=CascadeType.REMOVE,fetch=FetchType.LAZY)  
private Set<Asset> assetCollection; 
```

当在我的 ManagerBean 中调用 EntitiManager.flush()

```
 em.persist(asset);  
 em.flush(); 
```

我正进入（状态

javax.ejb.EJBException：见嵌套异常；嵌套异常是：org.apache.openjpa.persistence.InvalidStateException：在生命周期状态中遇到非托管对象“com.ibm.tap.ejb.dao.entity.Accessibility@169e3455”，同时通过字段“com.ibm.tap”级联持久性.ejb.dao.entity.Asset.accessibilityId" 在刷新期间。但是，该字段不允许级联持续存在。您不能刷新与非托管对象具有持久关联的非托管对象或图形。建议的操作：a) 将此字段的 cascade 属性设置为 CascadeType.PERSIST 或 CascadeType.ALL（JPA 注释）或“persist”或“all”（JPA orm.xml），b）全局启用 cascade-persist，c）手动在刷新之前保留相关的字段值。d) 如果引用属于另一个上下文，通过设置 StoreContext.setAllowReferenceToSiblingContext() 允许对其进行引用。失败对象：com.ibm.tap.ejb.dao.entity.Accessibility@169e3455

我尝试将资产类更改为

```
@ManyToOne(cascade=CascadeType.PERSIST,fetch=FetchType.LAZY)
@JoinColumn(name="ACCESSIBILITY_ID")
@ForeignKey
private Accessibility accessibilityId; 
```

当我这样做时，我得到 javax.ejb.EJBException: See nested exception; 嵌套异常是：org.apache.openjpa.persistence.EntityExistsException：此上下文中已存在具有 oid“1”的“com.ibm.tap.ejb.dao.entity.Accessibility”类型的对象；另一个不能持久。失败对象：com.ibm.tap.ejb.dao.entity.Accessibility@166c27b9

这对我来说很有意义，我试图坚持我已经拥有的表格。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T04:19:14.987

您遇到的问题不是由外键引起的。发生的事情是您的 Asset 对象包含一个不受 OpenJPA 管理的 Accessibility 对象。如何解决此问题取决于辅助功能记录的状态：

1.  辅助功能记录是否已存在于数据库中？如果是这样，请先使用 getEntityManager.find(Accessibility.class, uid) 加载它，然后在尝试持久化 Asset 对象之前将其设置到您的 Asset 对象上。

2.  如果 Accessibility 记录尚未持久化，则需要先使用“getEntityManager.persist(accessibility)”将其持久化，然后在尝试持久化之前将其设置到您的 Asset 对象上。或者，您的另一个选择是更改可访问性集合的级联类型以允许持久化，如下所示：

```
@ManyToOne(cascade=cascade={ CascadeType.PERSIST, CascadeType.REMOVE },fetch=FetchType.LAZY)
@JoinColumn(name="ACCESSIBILITY_ID")
@ForeignKey
私有可访问性accessibilityId；

```

如果您进行级联更改，那么当您持久化 Asset 对象时，您的 Asset 对象上的任何未持久化的 Accessibility 对象都将自动持久化。``

# sql - 从数据表或字符串中获取不同的值？

> ID：11781559
> 
> 赞同：0
> 
> 时间：2012-08-02T16:09:50.583
> 
> 标签：sql, gridview, datatable

我在下面创建了 Datatable，它在 Page_Load 上提供了一个 GridView

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    Dim strQuery As String = "SELECT DISTINCT setsTbl.setName, trainingTbl.t_date, userAssessmentTbl.o_id FROM userAssessmentTbl LEFT JOIN trainingTbl ON userAssessmentTbl.tt_id = trainingTbl.tt_id LEFT JOIN setsTbl ON trainingTbl.s_id = setsTbl.s_id LEFT JOIN outcomesTbl ON userAssessmentTbl.o_id = outcomesTbl.o_id WHERE UserId = @UserId ORDER BY setName, t_date DESC "

    Dim cmd As New SqlCommand(strQuery)
    cmd.Parameters.AddWithValue("@UserId", userString)
    Dim dt As DataTable = GetData(cmd)

   GridView1.DataSource = dt
   GridView1.DataBind()

End Sub 
```

目前它输出值：

```
SetName t_date o_id
name1 12.12.12 1
name2 13.07.12 1
name2 15.07.12 2
name3 16.07.12 4
name3 17.07.12 3 
```

我想让我的 DataTable 下面输出不同的行，如下所示：

```
SetName t_date o_id
name1 12.12.12 1
name2 13.07.12 1
name3 16.07.12 4 
```

谁能告诉我这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:17:38.527

看起来您想要每个名称的最早日期。如果是这样，您可以使用 Group By 和 min 函数：

```
setsTbl.setName, Min(trainingTbl.t_date), Min(outcomesTbl.o_id)
FROM userAssessmentTbl LEFT JOIN trainingTbl ON userAssessmentTbl.tt_id = trainingTbl.tt_id 
LEFT JOIN setsTbl ON trainingTbl.s_id = setsTbl.s_id LEFT JOIN outcomesTbl 
ON userAssessmentTbl.o_id = outcomesTbl.o_id 
WHERE UserId = @UserId Group By setsTbl.setName ORDER BY setsTbl.setName 
```

# bash - 我的 Bash 脚本如何在命令行参数中看到循环变量？

> ID：11781567
> 
> 赞同：0
> 
> 时间：2012-08-02T16:10:12.440
> 
> 标签：bash, shell

在 Bash 脚本中执行命令行参数时，我似乎无法“访问”循环变量的值。我希望能够写出类似的东西

```
#!/bin/bash
for myvar in 1 2 3
do
  $@
done 
```

并将脚本作为`./myscript echo "${myvar}"`.

当我这样做时，这些行被回显为空。我可能没有一个确切的把握，确切地说是在哪里评估什么。

我想要的甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:13:10.440

`$myvar`在子脚本甚至运行之前进行评估，因此无法在其中进行评估。

也就是说，当您调用脚本时：

```
./myscript echo "${myvar}" 
```

实际上被称为是：

```
./myscript echo '' 
```

假设`$myvar`在封闭环境中是空的。

* * *

如果你想变得邪恶（[这*是*邪恶的，会产生错误，你不应该这样做](http://mywiki.wooledge.org/BashFAQ/048)），你可以使用 eval：

```
#!/bin/bash
for myvar in 1 2 3; do
  eval "$1"
done 
```

...然后调用：

```
./myscript 'echo "${myvar}"' 
```

* * *

不那么糟糕的是导出一个变量：

```
#!/bin/bash
export myvar
for myvar in 1 2 3; do
  "$@"
done 
```

...但即便如此，您调用脚本的方式也需要避免预先评估。例如，这将与上述结合使用：

```
./myscript bash -c 'echo "$myvar"' 
```

...但这基本上让你回到评估。另一方面：

```
./myscript ./otherscript 
```

...会做你想做的，假设它`otherscript`指的是内部的`$myvar`某个地方。（这不需要是一个 shell 脚本，甚至不是一个脚本；它可以是一个可执行文件或其他命令，它仍然能够`myvar`在环境中找到）。

* * *

您要达到的真正目标（即商业目的）是什么？可能有一种方法可以更好地与最佳实践保持一致。

# objective-c - 强制键盘变得可见并在视图中保持可见

> ID：11781569
> 
> 赞同：1
> 
> 时间：2012-08-02T16:10:17.580
> 
> 标签：objective-c, ios, uiviewcontroller, uitextfield

我想让虚拟键盘在加载时出现在我的视图中，并且我希望它在视图的生命周期内可见。有一个文本字段，我将其视为该视图的主要控件。

最初，我按照我在这里得到`[self.textField becomeFirstResponder]`的建议打电话。`-viewWillAppear:`然后，我想出了一个不同的想法：我重载了 UIViewController 的`-becomeFirstResponder`.

```
- (BOOL)becomeFirstResponder
{
    if (self.primeResponder)
        return [self.primeResponder becomeFirstResponder];
    return [super becomeFirstResponder];
} 
```

我没有看到任何隐藏的问题，但话又说回来，也没有人推荐它。我错过了什么吗？这是一个不好的方法吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:51:54.090

在回顾我的旧问题时，我认为现在是提供答案的好时机。

它有效并且没有任何主要缺点。

除了在特殊情况下，我对这种方法很幸运。我用它在表格视图单元格中设置一个文本字段作为主要响应者。在 iOS 6 中，当视图被推送到导航控制器堆栈时，它不会加载键盘或突出显示文本字段。

请参阅[在 iOS 6 中，-[UITextField becomeFirstResponder] 在 -viewWillAppear: 中不起作用，以](https://stackoverflow.com/questions/13479997/in-ios-6-uitextfield-becomefirstresponder-doesnt-work-in-viewwillappear)了解我对该问题的解决方案。

# javascript - 最安全的 javascript JSON 内联技术

> ID：11781576
> 
> 赞同：2
> 
> 时间：2012-08-02T16:10:45.263
> 
> 标签：javascript, json, parsing, varnish, esi

我正在使用*varnish+esi*从 RESTFul API返回外部*json*内容。这种技术允许我管理请求和刷新数据，而无需为每个请求使用网络服务器资源。

例如：

```
<head>
.... 
<script> 
 var data = <esi:include src='apiurl/data'>;
</script>
... 
```

包含 esi varnish 后将返回：

```
 var data = {attr:1, attr2:'martin'}; 
```

这工作正常，但如果 API 返回错误，此技术将生成解析错误。

```
var data = <html><head><script>...api js here...</script></head><body><h1 ... api html .... 
```

我使用隐藏的 div 解析并捕获错误解决了这个问题：

```
...
<b id=esi-data style=display:none;><esi:include src='apiurl/data'></b>
<script>
  try{
    var data = $.parseJSON($('#esi-data').html());
  }catch{ alert('manage the error here');}
.... 
```

我也尝试过使用脚本类型 text/esi，但浏览器会在脚本标签 (wtf) 中呈现 html，例如：

```
<script id=esi-data type='text/esi'><esi:include src='apiurl/data'></script> 
```

**问题**：

为什么要包装标签并避免浏览器解析它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:47:44.907

让我扩展`iframe`我在评论中提出的建议——这与你的想法不完全一样！

该方法与您已经在做的几乎完全相同，但不是使用像 a 这样的普通 HTML 元素`div`，而是使用`iframe`.

```
<iframe id="esi-data" src="about:blank"><esi:include src="apiurl/data"></iframe> 
```

```
var $iframe = $('#esi-data');

try {
    var data = $.parseJSON($iframe.html());
} catch (e) { ... }

$iframe.remove(); 
```

```
#esi-data { display: none; } 
```

这与您的解决方案有何不同？两种方式：

1.  **数据/错误页面对您的访问者是真正隐藏的。**An`iframe`有一个[嵌入的内容](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#embedded-content)模型，这意味着`<iframe>…&lt;/iframe>`标签中的任何内容都会在 DOM 中完全替换——但您仍然可以使用`innerHTML`.

2.  **它是有效的 HTML5... 之类的。**在 HTML5 中，[iframe 元素内的标记被视为 text](http://developers.whatwg.org/the-iframe-element.html#iframe-content-model)。当然，您*应该*能够将其解析为片段，并且它仅包含短语内容（并且没有`script`元素！），但它本质上只是被验证器和浏览器视为文本。

3.  **错误页面中的脚本不会运行。**内容被解析为文本并在 DOM 中替换为另一个文档——没有机会处理任何`script`元素。

[看看它的实际效果](http://jsfiddle.net/Jordan/ypPFh/)。如果您注释掉我删除`iframe`元素的行并检查 DOM，您可以确认 HTML 内容正在被空文档替换。另请注意，嵌入式`script`标签永远不会运行。

**Important**: this approach could still break if the third party added an `iframe` element into their error page for some reason. Unlikely as this may be, you can bulletproof the approach a little more by combining your technique with this one: surround the `iframe` with a hidden `div` that you remove when you're finished parsing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:19:40.033

在这里，我进行了另一次尝试。

尽管我相信您已经有了可能的最佳解决方案，但我只能想象您使用一种性能相当低的方法来解决它，即`esi:insert`在单独的 HTML 窗口中调用，然后像在服务器上使用 AJAX 一样检索内容. 或许与[此](http://www.howtogeek.com/howto/programming/php-get-the-contents-of-a-web-page-rss-feed-or-xml-file-into-a-string-variable/)类似？然后检查您检索到的内容，可能通过使用`json_decode`并成功生成错误 JSON 字符串。

我认为最大的缺点是我相信这会非常消耗，甚至很可能会延迟您的请求，因为单独的页面被调用，就好像您的服务器自己是客户端一样，被解析，然后发回。

老实说，我会坚持您当前的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T16:36:09.503

这是一个相当棘手的问题，没有真正优雅的解决方案，如果根本没有解决方案的话

我问你它是 HTML(5) 还是 XHTML(5) 文档，因为在后一种情况下，可以使用**CDATA**部分来包装内容，稍微改变你的解决方案，如下所示：

```
...
<b id='esi-data' style='display:none;'>
    <![CDATA[ <esi:include src='apiurl/data'> ]]>
</b>
<script>
    try{
        var data = $.parseJSON($('#esi-data').html());
    }catch{ alert('manage the error here');}
.... 
```

当然，如果：

1.  您正在使用 XHTML5 并且
2.  该错误不包含**CDATA**部分（因为 CDATA 部分嵌套是不可能的）。

我不知道从一个序列化切换到另一个序列化是否是一种选择，但我想澄清我的问题的意图。希望它会帮助你:)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T21:10:18.037

您不能简单地更改您的 API 以`{ "error":"error_code_or_text" }`在错误时返回 JSON 吗？如果你这样做，你甚至可以在你的界面中做一些有意义的事情来提醒用户错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T11:27:25.260

```
<script>var data = 999;</script>

<script>
data = <esi:include src='apiurl/data'>;
</script>

<script>
if(data == 999) alert("there was an error");
</script> 
```

如果出现错误并且“数据”不是 JSON，则会引发 javascript 错误。下一个脚本块将选择它。

# java - 有没有办法从 .java 文件中获取 .class 文件

> ID：11781582
> 
> 赞同：0
> 
> 时间：2012-08-02T16:10:57.407
> 
> 标签：java

我有一个返回一组 .java 文件的方法，但我需要这些 java 文件的 .class 文件......有没有简单的方法可以做到这一点？

这是我用来返回 .java 文件列表的代码部分

```
files = retrieveFiles.listFilesForFolder(folder);
for(File currentFile: files){
     //for each file i need to get the .class file
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:16:53.503

Java SDK 6 引入了编译器 API。这允许从 java 应用程序中编译 java 代码。

进一步阅读：

*   [http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:31:48.293

不确定您使用的是 OS X 还是 Windows，但无论哪种情况，您都应该可以使用 javac 命令编译 .java 文件并创建 .class 文件。

然后，只需弄清楚如何在您的 java 脚本中运行 javac 命令，这取决于您的操作系统（是否基于 unix）： [http ://www.linglom.com/2007/06/06/如何运行命令行或执行外部应用程序来自 java/](http://www.linglom.com/2007/06/06/how-to-run-command-line-or-execute-external-application-from-java/)

有关 javac 命令的更多信息：http: [//docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)

# c++ - boost中的安全布尔成语？

> ID：11781584
> 
> 赞同：13
> 
> 时间：2012-08-02T16:11:05.060
> 
> 标签：c++, boost, safe-bool-idiom

boost 库是否提供了一个安全的 bool 习惯用法的实现，以便我可以从中派生我的类？

如果是 - 它在哪里？

如果不是 - 除了自己实施之外，我还有哪些选择？

* * *

我发现了以下类似的问题：“[在 boost 中是否有一个安全的 bool idiom helper？](https://stackoverflow.com/questions/6883901/is-there-a-safe-bool-idiom-helper-in-boost) ”并且公认的答案建议`bool_testable<>`在[Boost.Operators](http://www.pdc.kth.se/training/Talks/C++/boost/libs/utility/operators.htm)中使用。

不幸的是，当我查看[boost 手册](http://www.boost.org/doc/libs/1_50_0/libs/utility/operators.htm)时，我在那里找不到它。使用它的代码也无法编译。

我还偶然发现了另一个 SO 问题“ [boost::bool_testable<> 是否已重新定位或删除？](https://stackoverflow.com/questions/10490675/was-boostbool-testable-relocated-or-removed) ”那里的评论表明`bool_testable`实际上从未对任何版本的 boost 进行过修改。

[Bjorn Karlsson](http://www.artima.com/cppsource/safebool.html)也有一篇关于该主题的有趣文章，其中包含可以复制粘贴到我的项目中的代码。然而，我希望有一个普遍接受和维护的实用程序库（例如 boost）已经实现了它。

* * *

出于兼容性原因，我不想依赖 C++11。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T21:35:24.577

我不知道提供安全布尔习语的普遍接受的实用程序库。在 Boost 中进行了一些尝试，它们经常导致关于如何提供安全布尔实现（命名约定、宏、内联包含、继承）的争论。因此，Boost 中至少存在三个实现，其中只有一个实现，[Boost.Spirit.Classic 的 safe_bool](http://www.boost.org/doc/libs/1_50_0/boost/spirit/home/classic/core/safe_bool.hpp)，是为外部使用而设计的。

* * *

每个实现的细节和概念：

*   [Boost.Range 的 safe_bool](http://www.boost.org/doc/libs/1_50_0/boost/range/detail/safe_bool.hpp)
    *   包含在*详细*目录中，因此未明确设计为供外部使用。
    *   通过使用模板助手类型和静态成员函数来实现。
    *   启用安全布尔的类预计将：
        *   提供一个`operator boost::range_detail::safe_bool< MemberPtr >::unspecified_bool_type() const`委托给静态函数的成员`safe_bool::to_unspecified_bool()`函数。
*   [Boost.SmartPtr 的 operator_bool](http://www.boost.org/doc/libs/1_50_0/boost/smart_ptr/detail/operator_bool.hpp)：
    *   包含在*详细*目录中，因此未明确设计为供外部使用。
    *   头文件旨在直接包含在类定义中。有关示例，请参见[shared_ptr.hpp 。](http://www.boost.org/doc/libs/1_50_0/boost/smart_ptr/shared_ptr.hpp)
    *   `boost/detail/workaround.hpp`在 include之前需要 include `smart_ptr/detail/operator.hpp`。
    *   周围的安全布尔启用类预计将：
        *   提供一个`this_type`类型。
        *   提供一个`T`类型。
        *   提供一个`T* px`成员变量。
*   [Boost.Spirit.Classic 的 safe_bool](http://www.boost.org/doc/libs/1_50_0/boost/spirit/home/classic/core/safe_bool.hpp)
    *   专为外部使用而设计。
    *   使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)模式。
    *   旨在支持基类链接，允许`boost::spirit::class::safe_bool`在不强制派生类的多重继承的情况下使用。
    *   启用安全布尔的类预计将：
        *   公开派生自`boost::spirit::classic::safe_bool< Derived >`. 如果`Derived`已经继承自`Base`，则使用`boost::spirit::classic::safe_bool< Derived, Base >`.
        *   提供`bool operator_bool() const`成员函数。

* * *

此示例使用 Boost 1.50。如果传递给构造函数的整数大于 0，则每个类都应在布尔上下文中计算为 true：

```
// Safe-bool idiom with Boost.Range.
#include <boost/range/detail/safe_bool.hpp>
class range_bool
{
public:
  range_bool( int x ) : x_( x ) {}
private:
  // None of these are required, but makes the implementation cleaner.
  typedef boost::range_detail::safe_bool< int range_bool::* > safe_bool_t;
  typedef safe_bool_t::unspecified_bool_type unspecified_bool_type;
  int dummy;
public:
  operator unspecified_bool_type() const
  {
    return safe_bool_t::to_unspecified_bool( x_ > 0, &range_bool::dummy );
  }
private:
  int x_;
};

// Safe-bool idiom with Boost.SmartPtr.
#include <boost/detail/workaround.hpp>
class smart_ptr_bool
{
public:
  smart_ptr_bool( int x ) { px = ( x > 0 ) ? &dummy : 0 ; }
private:
  typedef smart_ptr_bool this_type; // -.
  typedef int T;                    //   :- Required concepts when using
  T* px;                            // -'   smart_ptr's operator_bool.
private:
  T dummy; // Simple helper.
public:
  #include <boost/smart_ptr/detail/operator_bool.hpp>
};

// Safe-bool idiom with Boost.Spirit.
#include <boost/spirit/include/classic_safe_bool.hpp>
class spirit_bool: public boost::spirit::classic::safe_bool< spirit_bool >
{
public:
  spirit_bool( int x ) : x_( x ) {} 
public:
  // bool operator_bool() is required by the spirit's safe_bool CRTP.
  bool operator_bool() const { return x_ > 0; }
private:
  int x_;
};

#include <iostream>

int main()
{
  std::cout << "range_bool( -1 ):     " << range_bool( -1 )     << std::endl
            << "range_bool(  1 ):     " << range_bool(  1 )     << std::endl
            << "smart_ptr_bool( -1 ): " << smart_ptr_bool( -1 ) << std::endl
            << "smart_ptr_bool(  1 ): " << smart_ptr_bool(  1 ) << std::endl
            << "spirit_bool( -1 ):    " << spirit_bool( -1 )    << std::endl
            << "spirit_bool(  1 ):    " << spirit_bool(  1 )    << std::endl;
  return 0;
} 
```

结果输出：

```
范围布尔（-1）：0
范围布尔（1）：1
smart_ptr_bool（-1）：0
smart_ptr_bool（1）：1
精神布尔（-1）：0
精神布尔（1）：1
```

* * *

我不知道任何替代方案。当我遇到安全布尔成语时，大多数实现都是[Bjorn Karlsson 的文章](http://www.artima.com/cppsource/safebool.html)中提供的实现的复制粘贴变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-12T20:01:57.003

从 Boost 1.55 开始，Boost.Core 中有`<boost/core/explicit_operator_bool.hpp>`标题。它需要您定义`bool operator!()`和使用`BOOST_EXPLICIT_OPERATOR_BOOL()`宏（也有它的变体`BOOST_EXPLICIT_OPERATOR_BOOL_NOEXCEPT()`和`BOOST_CONSTEXPR_EXPLICIT_OPERATOR_BOOL()`）。

[该文档](https://www.boost.org/doc/libs/1_69_0/libs/core/doc/html/core/explicit_operator_bool.html)有一个示例：

```
template< typename T >
class my_ptr
{
    T* m_p;

public:
    BOOST_EXPLICIT_OPERATOR_BOOL()

    bool operator!() const
    {
        return !m_p;
    }
}; 
```

# css - 文本在 Internet Explorer 中旋转，但 div 保持直立。

> ID：11781589
> 
> 赞同：0
> 
> 时间：2012-08-02T16:11:24.190
> 
> 标签：css, internet-explorer

我有几个在 Chrome 和 Firefox 中完美运行的侧边标签，但在 IE 中却很混乱。非常感谢有人帮助我。这是他们工作的链接[http://www.sgsgrass.co.uk/quotation.php](http://www.sgsgrass.co.uk/quotation.php)

```
color: #FFF;
height: 40px;
width: 200px;
font-size: 24px;
line-height: 40px;
font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
text-align: center;
-webkit-transform: rotate(90deg);
-moz-transform: rotate(90deg);
-o-transform: rotate(90deg);
writing-mode: tb-rl;
position: fixed;
top: 30%;
left: 0px;
-moz-transform-origin: 20px;
-ms-transform-origin: 20px;
-o-transform-origin: 20px;
-webkit-transform-origin: 20px;
transform-origin: 20px;
border-top-right-radius: 10px;
border-top-left-radius: 10px;
-moz-border-radius-topright: 10px;
-moz-border-radius-topleft: 10px;
-webkit-border-top-right-radius: 10px;
border-top-width: 4px;
border-right-width: 4px;
border-bottom-width: 4px;
border-left-width: 4px;
border-top-style: solid;
border-right-style: solid;
border-bottom-style: solid;
border-left-style: solid;
border-top-color: rgb(255,255,255);
border-right-color: rgb(255,255,255);
border-left-color: rgb(255,255,255); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:21:12.113

你失踪了吗

-ms 变换：旋转（90 度）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:35:29.120

由于 IE 浏览器的问题，我建议您使用图像而不是纯 CSS3。

我已经在 IE8 中测试了这个网站[http://www.cssrotate.com/](http://www.cssrotate.com/)并且 CSS3 转换不起作用。但是，如果您不想要图像，您可以使用`filter`IE 中的旋转元素。这是[LINK1](http://msdn.microsoft.com/en-us/library/ms532847%28v=vs.85%29.aspx)和[LINK2](http://snook.ca/archives/html_and_css/css-text-rotation)。[你可以在这里](http://www.aquim.com/web-article-226.html)看到很好的演示（在 IE 中打开以查看旋转）。这只是开始，您可以谷歌搜索更多信息。

使用示例：

```
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); 
```

BasicImage 过滤器的旋转属性可以接受以下四个值之一：0、1、2 或 3，它们将分别将元素旋转 0、90、180 或 270 度。

# ruby-on-rails - 如何在客户端（rails）处理多个交换值

> ID：11781591
> 
> 赞同：0
> 
> 时间：2012-08-02T16:11:38.257
> 
> 标签：ruby-on-rails, activerecord, cookies

在应用程序上，用户回答问题。每次他/她登录时，都会显示三个未回答的问题。用户可能会跳过（或回答！）一个问题，然后会出现另一个未回答的问题。

我一直在考虑查找未回答的问题并编写一个显示未回答问题的所有 id 的 cookie，以及另一个未在网页上显示问题的 id 的 cookie。

但是如果用户跳过一个问题，我很难弄清楚如何处理 cookie 之间的值交换

我还考虑将显示的问题存储为数据库中的答案，并使用特定值表示它们正在显示但尚未回答。但这可能是数据库密集型的。

我不是在找人给我代码，只是给我指出最合适的方法，我会自己编写代码。

我正在研究 Rails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:51:03.970

为简单起见，我会将其保存在数据库中。我会有一个问题和答案表。这是一些骨架代码...

```
user_id
question_id
answer_status

class Answer < ActiveRecord::Base
  belongs_to :user
  scope :seen_but_unanswered, where(:answer_status => 'seen')
  scope :answered, where(:answer_status => 'answered')
end

class User < ActiveRecord::Base
  has_many :answers

  def unseen_questions
    ...
  end

end 
```

然后，您可以提出以下请求：

```
@user.answers
@user.unseen_questions
@user.answers.seen_but_unanswered
@user.answers.answered 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:19:07.527

将所有这些信息存储在哈希中并使用会话？只要哈希不是非常大，这应该没问题。

```
session[:unanswered] = unanswered_hash unless session[:unanswered].present? 
```

我不完全确定这是否涵盖了您想做的所有事情。

# asp.net - 运行进程时在 vb.net 中隐藏命令窗口

> ID：11781600
> 
> 赞同：5
> 
> 时间：2012-08-02T16:12:10.480
> 
> 标签：asp.net, vb.net, command-prompt

如果我有这个代码

```
 ' Send file to Unix server via pscp
    Dim Proc As New System.Diagnostics.Process
    Proc.StartInfo = New ProcessStartInfo("C:\Windows\System32\cmd.exe")
    Proc.StartInfo.Arguments = "/C C:\pscp.exe -pw " & PASSWORD & " " & physicalFolder & "\" & UNIXSCRIPTNAME & " " & unixLogin
    Proc.StartInfo.RedirectStandardInput = True
    Proc.StartInfo.RedirectStandardOutput = False
    Proc.StartInfo.UseShellExecute = False
    Proc.Start()
    ' Allows script to execute sequentially instead of simultaneously
    Proc.WaitForExit() 
```

我该怎么做才能使命令窗口在执行时不出现？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:14:17.463

您可以通过将 CreateNoWindow 设置为 true 来实现，这可能有助于[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.createnowindow.aspx#Y0)

```
Proc.StartInfo.CreateNoWindow = true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-07T14:56:21.113

`CreateNoWindow = True` 对我不起作用，下面完美地工作：

```
Proc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden 
```

# tsql - 从 sqlite 内存表和物理数据库表中联合选择

> ID：11781601
> 
> 赞同：0
> 
> 时间：2012-08-02T16:12:10.167
> 
> 标签：tsql, sqlite, join

我想知道是否可以使用 SQLITE 从内存表和数据库表中进行联合 SELECT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:41:31.950

“内存表”是什么意思？

您是否尝试过：

```
SELECT fields FROM table as alias, (SELECT fields FROM table) as alias2 WHERE alias.field = alias2.field 
```

或相同但使用连接

# delphi - 如何使用 Graphics32 环绕变换来变换多边形区域？

> ID：11781603
> 
> 赞同：0
> 
> 时间：2012-08-02T16:12:15.557
> 
> 标签：delphi, graphics32

Graphics32 提供了一个 Image Wrapping 示例 (\Transformation\ImgWarping_Ex)，用户可以在其中使用画笔来包裹 bitmap32 的一部分。然而，这个示例真的很难理解，因为它混合了许多复杂的概念。

假设我需要一个环绕变换，它将多边形区域从一种形状转换为另一种形状。我怎么能完成这样的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:51:57.427

正如评论中的那样，我不确定多面多边形。但是，要将一个四边形转换为另一个，可以使用投影变换。这会将一个由四个点组成的四边形映射到另一个由四个点组成的四边形。[（当我问这个 SO question](https://stackoverflow.com/questions/9608600/how-can-i-render-a-square-bitmap-to-an-arbitrary-four-sided-polygon-using-gdi)时，我最初发现了这一点。）

你：

*   使用变换方法
*   传入目标和源位图
*   传入一个投影变换对象，用目标点初始化
*   传入一个光栅器，它控制输出像素如何由一个或多个输入像素组成

光栅化器至少是可选的，但是通过指定除默认值之外的高质量（较慢）光栅化器链，您将获得更高质量的输出。还有其他可选参数。

他们的关键是[`TProjectiveTransformation`](http://graphics32.org/documentation/Docs/Units/GR32_Transforms/Classes/TProjectiveTransformation/_Body.htm)对象。不幸的是，Graphics32 文档似乎缺少 的条目`Transform method`，因此我无法链接到该条目。但是，这里有一些未经测试的示例代码，基于我的一些代码。它将矩形源图像转换为目标图像上的凸四边形：

```
var
  poProjTransformation : TProjectiveTransformation;
  poRasterizer : TRegularRasterizer; 
  oTargetRect: TRect;
begin
  // Snip some stuff, e.g. that 
  // poSourceBMP and poTargetBMP are TBitmap32-s.
  poProjTransformation := TProjectiveTransformation.Create();
  poRasterizer := TRegularRasterizer.Create();

  // Set up the projective transformation with:
  // the source rectangle
  poProjTransformation.SrcRect = FloatRect(TRect(...));
  // and the destination quad
  // Point 0 is the top-left point of the destination
  poProjTransformation.X0 = oTopLeftPoint.X();
  poProjTransformation.Y0 = oTopLeftPoint.Y();
  // Continue this for the other three points that make up the quad
  // 1 is top-right
  // 2 is bottom-right
  // 3 is bottom-left
  // Or rather, the points that correspond to the (e.g.) top-left input point; in the
  // output the point might not have the same relative position!
  // Note that for a TProjectiveTransformation at least, the output quad must be convex

  // And transform!
  oTargetRect := TTRect(0, 0, poTarget.Width, poTarget.Height)
  Transform(poTargetBMP, poSourceBMP, poProjTransformation, poRasterizer, oTargetRect);

  // Don't forget to free the transformation and rasterizer (keep them around though if
  // you're going to be doing this lots of times, e.g. on many images at once)
  poProjTransformation.Free;
  poRasterizer.Free; 
```

光栅化器是图像质量的一个重要参数——上面的代码会给你一些有用但不漂亮的东西，因为它会使用最近邻采样。您可以构建一个对象链以提供更好的结果，例如将 a`TSuperSampler`与`TRegularRasterizer`. 您可以[在此处阅读有关采样器和光栅器以及如何组合它们的信息。](http://graphics32.org/documentation/Docs/Additional%20Topics/Sampling%20and%20Rasterization.htm)

该方法还有大约五种不同的重载，`Transform`值得在文件界面中略读一下它们，`GR32_Transforms.pas`这样您就知道可以使用哪些版本。

# c# - C# Xml序列化、集合和根元素

> ID：11781606
> 
> 赞同：12
> 
> 时间：2012-08-02T16:12:24.043
> 
> 标签：c#, xml, serialization, collections, root-node

我的应用程序序列化流中的对象。这是我需要的示例：

```
<links>
  <link href="/users" rel="users" />
  <link href="/features" rel="features" />
</links> 
```

在这种情况下，对象是“链接”对象的集合。

------------第一版

起初我使用**DataContractSerializer**，但是您不能将成员序列化为属性（[source](https://stackoverflow.com/questions/591907/how-can-you-control-wcf-serialization-so-it-uses-attributes-instead-of-elements)）

这是对象：

```
[DataContract(Name="link")]
public class LinkV1
{
    [DataMember(Name="href")]
    public string Url { get; set; }

    [DataMember(Name="rel")]
    public string Relationship { get; set; }
} 
```

这是结果：

```
<ArrayOflink xmlns:i="...." xmlns="...">
  <link>
    <href>/users</href>
    <rel>users</rel>
  </link>
  <link>
    <href>/features</href>
    <rel>features</rel>
  </link>
</ArrayOflink> 
```

------------ 第二版

好的，不是我想要的安静，所以我尝试了经典的**XmlSerializer**，但是......哦不，如果根元素是集合，你不能指定根元素的名称和集合元素的名称......

这是代码：

```
[XmlRoot("link")]
public class LinkV2
{
    [XmlAttribute("href")]
    public string Url { get; set; }

    [XmlAttribute("rel")]
    public string Relationship { get; set; }
} 
```

这是结果：

```
<ArrayOfLinkV2>
  <LinkV2 href="/users" rel="users" />
  <LinkV2 href="/features" rel="features" />
  <LinkV2 href="/features/user/{keyUser}" rel="featuresByUser" />
</ArrayOfLinkV2> 
```

------------ 第三版

使用**XmlSerializer** + 根元素：

```
[XmlRoot("trick")]
public class TotallyUselessClass
{
    [XmlArray("links"), XmlArrayItem("link")]
    public List<LinkV2> Links { get; set; }
} 
```

及其结果：

```
 <trick>
  <links>
    <link href="/users" rel="users" />
    <link href="/features" rel="features" />
    <link href="/features/user/{keyUser}" rel="featuresByUser" />
  </links>
</trick> 
```

很好，但我不想要那个根节点！我希望我的集合成为根节点。

以下是禁忌：

*   序列化代码是通用的，它适用于任何可序列化的东西
*   逆运算（反序列化）也必须起作用
*   我不想正则表达式结果（我直接在输出流中序列化）

我现在有什么解决方案：

1.  编写我自己的 XmlSerializer
2.  当 XmlSerializer 与集合一起使用时，它会欺骗 XmlSerializer（我尝试过，让它找到一个 XmlRootElement 并将其 plurialize 以生成它自己的 XmlRootAttribute，但是在反序列化时会导致问题 + 项目名称仍然保留类名称）

任何想法 ？

在那个问题上真正困扰我的是，我想要的似乎真的非常非常简单......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T11:16:38.647

好的，这是我的最终解决方案（希望它对某人有所帮助），它可以序列化一个普通数组，List<>，HashSet<>，...

为了实现这一点，我们需要告诉序列化器使用哪个根节点，这有点棘手......

1) 在可序列化对象上使用“XmlType”

```
[XmlType("link")]
public class LinkFinalVersion
{
    [XmlAttribute("href")]
    public string Url { get; set; }

    [XmlAttribute("rel")]
    public string Relationship { get; set; }
} 
```

2) 编写一个“smart-root-detector-for-collection”方法，该方法将返回一个 XmlRootAttribute

```
private XmlRootAttribute XmlRootForCollection(Type type)
{
    XmlRootAttribute result = null;

    Type typeInner = null;
    if(type.IsGenericType)
    {
        var typeGeneric = type.GetGenericArguments()[0];
        var typeCollection = typeof (ICollection<>).MakeGenericType(typeGeneric);
        if(typeCollection.IsAssignableFrom(type))
            typeInner = typeGeneric;
    }
    else if(typeof (ICollection).IsAssignableFrom(type)
        && type.HasElementType)
    {
        typeInner = type.GetElementType();
    }

    // yeepeeh ! if we are working with a collection
    if(typeInner != null)
    {
        var attributes = typeInner.GetCustomAttributes(typeof (XmlTypeAttribute), true);
        if((attributes != null)
            && (attributes.Length > 0))
        {
            var typeName = (attributes[0] as XmlTypeAttribute).TypeName + 's';
            result = new XmlRootAttribute(typeName);
        }
    }
    return result;
} 
```

3) 将该 XmlRootAttribute 推入序列化程序

```
// hack : get the XmlRootAttribute if the item is a collection
var root = XmlRootForCollection(type);
// create the serializer
var serializer = new XmlSerializer(type, root); 
```

我告诉过你这很棘手；）

* * *

为了改善这一点，您可以：

A) 创建一个 XmlTypeInCollectionAttribute 以指定自定义根名称（如果基本复数形式不符合您的需要）

```
[XmlType("link")]
[XmlTypeInCollection("links")]
public class LinkFinalVersion
{
} 
```

B）如果可能，缓存您的 XmlSerializer（例如在静态字典中）。

在我的测试中，实例化没有 XmlRootAttributes 的 XmlSerializer 需要 3 毫秒。如果指定 XmlRootAttribute，大约需要 80 毫秒（只是为了有一个自定义根节点名称！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T17:31:05.990

XmlSerializer 应该能够做你需要的，但它高度依赖于初始结构和设置。我在自己的代码中使用它来生成非常相似的东西。

```
public class Links<Link> : BaseArrayClass<Link> //use whatever base collection extension you actually need here
{
    //...stuff...//
}

public class Link
{
    [XmlAttribute("href")]
    public string Url { get; set; }

    [XmlAttribute("rel")]
    public string Relationship { get; set; }
} 
```

现在，序列化`Links`类应该会生成您正在寻找的内容。

XmlSerializer 的问题是当你给它泛型时，它会用泛型响应。List 在其中的某个地方实现 Array 并且序列化的结果几乎总是`ArrayOf<X>`. 要解决这个问题，您可以命名属性或类根。接近您需要的可能是您示例中的第二个版本。我假设您尝试直接序列化对象列表链接。那是行不通的，因为您没有指定根节点。现在，可以在[此处](https://stackoverflow.com/questions/5885145/get-rid-of-arrayofclassname-root-element-when-serializing-array)找到类似的方法。在这一项中，他们在声明序列化程序时指定了 XmlRootAttribute。你的看起来像这样：

```
XmlSerializer xs = new XmlSerializer(typeof(List<Link>), new XmlRootAttribute("Links")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:15:10.960

干得好...

```
 class Program
{
    static void Main(string[] args)
    {

        Links ls = new Links();
        ls.Link.Add(new Link() { Name = "Mike", Url = "www.xml.com" });
        ls.Link.Add(new Link() { Name = "Jim", Url = "www.xml.com" });
        ls.Link.Add(new Link() { Name = "Peter", Url = "www.xml.com" });

        XmlSerializer xmlSerializer = new XmlSerializer(typeof(Links));

        StringWriter stringWriter = new StringWriter();

        xmlSerializer.Serialize(stringWriter, ls);

        string serializedXML = stringWriter.ToString();

        Console.WriteLine(serializedXML);

        Console.ReadLine();
    }
}

[XmlRoot("Links")]
public class Links
{
    public Links()
    {
        Link = new List<Link>();
    }

    [XmlElement]
    public List<Link> Link { get; set; }
}

[XmlType("Link")]
public class Link
{
    [XmlAttribute("Name")]
    public string Name { get; set; }

    [XmlAttribute("Href")]
    public string Url { get; set; }

} 
```

# android - onFling 手势不适用于具有 TabHost 的 Activity

> ID：11781610
> 
> 赞同：1
> 
> 时间：2012-08-02T16:12:34.470
> 
> 标签：android

我一直在尝试将 onFling Gesture 添加到由 TabHost 组成的 Activity 中。

我用 TabWidget 构建了我的标签使用 xml。这是我的代码

活动1.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/establecimientoView">

<TabHost 
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

         <TabWidget android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:id="@android:id/tabs" />

         <FrameLayout android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:id="@android:id/tabcontent" >

            <LinearLayout
                android:id="@+id/tabIdEst"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                 <include layout="@layout/identificacion_establecimiento"/>

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tabRefGeo"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                 <include layout="@layout/referencia_geografica"/>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tabUbicEstablecimiento"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                 <include layout="@layout/ubicacion_establecimiento"/>
            </LinearLayout>

                <LinearLayout
                android:id="@+id/tabVialidades"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                 <include layout="@layout/entre_vialidades"/>
            </LinearLayout>

         </FrameLayout>
    </LinearLayout>

</TabHost>
</LinearLayout> 
```

Activity1.java

```
public class EstablecimientoActivity extends Activity implements GestureDetector.OnGestureListener{
    TextView lblE90; 
    TextView lblExxGastos;
     TabHost tabs;

    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    private GestureDetector mGestureDetector;

    @Override
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.establecimiento);

           mGestureDetector = new GestureDetector(this, this, null);

           initTabGroup();

           View establecimientoView = findViewById(R.id.establecimientoView);

           establecimientoView.setOnTouchListener(new View.OnTouchListener() {
                public boolean onTouch(View v, MotionEvent event) {
                    if (mGestureDetector.onTouchEvent(event)) {
                        Log.d("On touch", "view establecimiento");
                        return true;
                    }
                    return false;
                }
            });

     }

    private void initTabGroup(){

            tabs=(TabHost)findViewById(android.R.id.tabhost);
            tabs.setup();

            TabHost.TabSpec spec=tabs.newTabSpec("tabIdEst");
            spec.setContent(R.id.tabIdEst);
            spec.setIndicator("Identificación del Establecimiento");
            tabs.addTab(spec);

            spec=tabs.newTabSpec("tabRefGeo");
            spec.setContent(R.id.tabRefGeo);
            spec.setIndicator("Referencia Geográfica");
            tabs.addTab(spec);

            spec=tabs.newTabSpec("tabUbEst");
            spec.setContent(R.id.tabUbicEstablecimiento);
            spec.setIndicator("Ubicación Establecimiento");
            tabs.addTab(spec);

            spec=tabs.newTabSpec("tabVialidades");
            spec.setContent(R.id.tabVialidades);
            spec.setIndicator("Entre Vialidades");
            tabs.addTab(spec);

            tabs.setCurrentTab(0);

    }

    // Listeners
    @Override
    public boolean onDown(MotionEvent arg0) {
        Log.d("onDown", "Tap");
        return false;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        Log.d("onFling", e1.toString());

        if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {
            return false;
        }

        // right to left swipe
        if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            Log.d("onFling","right to left");
            Intent intent = new Intent(this.getBaseContext(),
                    Activity2.class);
            startActivity(intent);
            this.overridePendingTransition(R.anim.slide_in_right,
                    R.anim.slide_out_left);
            // left to right swipe
        } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            Log.d("onFling","left to right");

            this.overridePendingTransition(R.anim.slide_in_left,
                    R.anim.slide_out_right);
        }

        return false;
    }

    @Override
    public void onLongPress(MotionEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
            float arg3) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onShowPress(MotionEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onSingleTapUp(MotionEvent arg0) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

我一直在做一些研究，但我只知道标签之间的滑动方式。我只是想去另一个活动，我的意思是我想从 Activity1（包含 tabhost）去 Activity2

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:04:18.510

看看[Horizo​​ntal Pager](https://github.com/ysamlan/horizontalpager)，特别是Horizo [​​ntalPager.java](https://github.com/ysamlan/horizontalpager/blob/master/src/com/github/ysamlan/horizontalpager/HorizontalPager.java)`onInterceptTouchEvent`里面的方法。而不是水平滚动页面开始一个新的活动。

# android - 尝试使用联系人选择器将联系人插入编辑文本

> ID：11781618
> 
> 赞同：1
> 
> 时间：2012-08-02T16:12:58.380
> 
> 标签：android, contact

我试图允许用户使用 android 中的联系人选择器插入他们的号码。我目前正在使用[从联系人选择器获取号码](https://stackoverflow.com/questions/6155612/getting-number-from-contacts-picker)中的帖子 2 中的示例，联系人选择器会出现，但是当我选择一个联系人时，联系人号码不会影响我的编辑文本。没有logcat错误或任何东西。

我的代码：

```
public void doLaunchContactPicker(View view) {  
    Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,  
            Contacts.CONTENT_URI);  
    startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);  
}  

@Override  
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (resultCode == RESULT_OK) {  

            switch (requestCode) {  
        case CONTACT_PICKER_RESULT:
            Cursor cursor = null;  
            String phoneNumber = "";
            List<String> allNumbers = new ArrayList<String>();
            int phoneIdx = 0;
            try {  
                Uri result = data.getData();  
                String id = result.getLastPathSegment();  
                cursor = getContentResolver().query(Phone.CONTENT_URI, null, Phone.CONTACT_ID + "=?", new String[] { id }, null);  
                phoneIdx = cursor.getColumnIndex(Phone.DATA);
                if (cursor.moveToFirst()) {
                    while (cursor.isAfterLast() == false) {
                        phoneNumber = cursor.getString(phoneIdx);
                        allNumbers.add(phoneNumber);
                        cursor.moveToNext();
                    }
                } else {
                    //no results actions
                }  
            } catch (Exception e) {  
               //error actions
            } finally {  
                if (cursor != null) {  
                    cursor.close();
                }
                final EditText phoneInput = (EditText) findViewById(R.id.mobileno);

                final CharSequence[] items = allNumbers.toArray(new String[allNumbers.size()]);
                AlertDialog.Builder builder = new AlertDialog.Builder(SIMMessageSenderActivity.this);
                builder.setTitle("Choose a number");
                builder.setItems(items, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int item) {
                        String selectedNumber = items[item].toString();
                        selectedNumber = selectedNumber.replace("-", "");
                        phoneInput.setText(selectedNumber);
                    }
                });
                AlertDialog alert = builder.create();
                if(allNumbers.size() > 1) {
                    alert.show();
                } else {
                    String selectedNumber = phoneNumber.toString();
                    selectedNumber = selectedNumber.replace("-", "");

                    phoneInput.setText(selectedNumber);
                }

                if (phoneNumber.length() == 0) {  
                    //no numbers found actions  
                }  
            }  
            break;  
        }  
    } else {
       //activity result error actions
    }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:33:17.407

下面的代码是我正在使用的代码，它对我来说工作得很好。试试这个。

```
 if((requestCode == PICK_CONTACT) && (resultCode == RESULT_OK))
            { 
                 if (data != null) {
                     Uri contactData = data.getData();

                     try {

                         String id = contactData.getLastPathSegment();
                        String[] columns = {Phone.DATA,Phone.DISPLAY_NAME};
                         Cursor phoneCur = getContentResolver()
                                 .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                                        columns ,
                                         ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                                 + " = ?", new String[] { id },
                                         null);

                         final ArrayList<String> phonesList = new ArrayList<String>();
                         String Name = null ;
                         if(phoneCur.moveToFirst())
                         {
                             do{
                                 Name = phoneCur.getString(phoneCur.getColumnIndex(Phone.DISPLAY_NAME));
                                 String phone = phoneCur
                                 .getString(phoneCur
                                         .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA));
                                     phonesList.add(phone);

                               }   while (phoneCur.moveToNext());

                         }

                         phoneCur.close();

                         if (phonesList.size() == 0) {
                             Toast.makeText(
                                     this,"This contact does not contacin any number",
                                     Toast.LENGTH_LONG).show();
                         } else if (phonesList.size() == 1) {
                             toET.setText(phonesList.get(0));
                         } else {

                             final String[] phonesArr = new String[phonesList
                                     .size()];
                             for (int i = 0; i < phonesList.size(); i++) {
                                 phonesArr[i] = phonesList.get(i);
                             }

                             AlertDialog.Builder dialog = new AlertDialog.Builder(
                                     MessageManagerActivity.this);
                             dialog.setTitle("Name : "+Name);
                             ((Builder) dialog).setItems(phonesArr,
                                     new DialogInterface.OnClickListener() {
                                         public void onClick(
                                                 DialogInterface dialog,
                                                 int which) {
                                             String selectedEmail = phonesArr[which];
                                             toET.setText(selectedEmail);
                                         }
                                     }).create();
                             dialog.show();
                         }
                     } catch (Exception e) {
                         Log.e("FILES", "Failed to get phone data", e);
                     }
                 }

            } 
```

将您的edittext创建为类变量..因此您也可以应用空检查，我非常确定您为此目的再次创建它..

# php - 给定一个数组，找到零值并将它们替换为直接相邻值的平均值

> ID：11781622
> 
> 赞同：1
> 
> 时间：2012-08-02T16:13:05.957
> 
> 标签：php, arrays, average, zero

我有一组按小时计算的温度数据。有些小时有零数据而不是临时。使用 Google Charts 绘图时，零会导致折线图直线下降。我的临时解决方法是将零值替换为 null，从而导致折线图中断。理想的解决方案是取零两侧的值，并对它们进行平均。该数组按小时排列。帮助？

```
$array = array(
    "1AM" => "65",
    "2AM" => "66",
    "3AM" => "68",
    "4AM" => "68",
    "5AM" => "68",
    "6AM" => "0",
    "7AM" => "70",
    "8AM" => "71",
    "9AM" => "71",
    "10AM" => "73",
); 
```

这是我用空值替换 0 的脚本：

```
 $array = array ();
  foreach($parsed_json->history->observations as $key => $value) {
    $temp = (int)$value->tempi;
    if ($temp==0) {
        str_replace(0, null, $temp);
    }
    $hour = $value->date->hour;
    $array[$hour] = $temp;
  }; 
```

[如果数据是我的，这个示例](https://stackoverflow.com/questions/8816463/mysql-query-replace-null-value-in-a-row-with-average-values)会很好用，但可惜它来自 JSON 提要。

我会使用 array_walk() 之类的交易吗？我将如何引用数组中的当前位置？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:34:34.893

我会划掉空部分，然后通过最终数组进行 foreach 循环。

## 因此，将您当前的代码更改为：

```
$array = array ();

foreach($parsed_json->history->observations as $key => $value) {
    $temp = (int)$value->tempi;
}

$hour = $value->date->hour;
$array[$hour] = $temp; 
```

## 并在其下方添加：

```
foreach($array as $hour => $temp){

  if($temp == "0"){
      $numHour = $hour[0];
      $hourPlus  = ($numHour + 1) . "AM";
      $hourMinus = ($numHour - 1) . "AM";

      $valuePlus  = $array[$hourPlus];
      $valueMinus = $array[$hourMinus];

      $average = ($valuePlus + $valueMinus)/2;

      $array[$hour] = $average;
  }

}
?> 
```

这当然假设零两侧的值也不为零。您可能想在其中某处添加检查。

经过测试和验证的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:19:24.047

你不能按照以下方式做一些事情：

```
str_replace(0, ((($key-1)+($key+1))/2), $temp); 
```

其中 $key 是数组位置，取 0 之前的值，0 之后的值相加，然后除以 2 得到平均值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:31:11.697

我会让你理清如果第一个、最后一个或连续的值为 0 会发生什么。

```
$the_keys=array_keys($array);
foreach($the_key as $index=>$key)
{
    if($array[$key]==0)
    {
        $array[$key]=($array[$the_key[$index-1]]+$array[$the_key[$index+1]]/2);
    }
} 
```

# mysql - 从 postgresql 中搜索并由 mysql 过滤

> ID：11781624
> 
> 赞同：0
> 
> 时间：2012-08-02T16:13:07.540
> 
> 标签：mysql, postgresql, search

我在处理两个不同的数据库时遇到问题。PostgreSQL 和 Mysql。

我在我的网站上有一个简单的搜索，从某个位置和某个条件下搜索出租物业。

在我的 Postgresql 中，一个表格保存了出租物业的坐标和半径，而在我的 Mysql 中，一个表格保存了床、房间、价格等属性。

我可以正确检索数据。但是在使用分页时。第 1 页将有 5 行，第 2 页将有 10 行，第 3 页将有 20 行等等。顺便说一句，每页最多有 25 行。

要知道这个问题，让我们有一个场景：

```
lat = 14.00000
long = 121.00000
rad = 50000 
```

当我向 postgresql 查询这个...

```
SELECT * FROM postgretable WHERE ST_DWithin(lat_long,ST_GeomFromText('POINT(long lat)', 4326), rad) 
```

我总共有 25 行。现在我希望使用 mysql 数据库中可以找到的其他条件对其进行过滤。

其他条件：

```
Beds = 2
Bathrooms = 5
price 1000

SELECT * FROM mysqltable WHERE id = $result['id'] AND beds = 2,Bathrooms = 5, price = 1000 
```

当使用来自 postgresql 的数据从 mysql 执行时，我得到了 6 个结果。

* * *

我想不出什么来解决这个问题。使用数组还是什么？我知道如果我使用单个数据库并且只使用 LEFT JOIN 或任何类似的东西，这可以正确完成。但我正在处理两个数据库。

有没有其他方法可以解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:23:09.070

您可能需要考虑这个问题的答案：

[将mysql连接到postgresql](https://stackoverflow.com/questions/10317229/connect-mysql-to-postgresql)

（如果我再添加，我会抄袭）

# javascript - 使用 Javascript 检查测验答案的最安全方法

> ID：11781627
> 
> 赞同：2
> 
> 时间：2012-08-02T16:13:09.817
> 
> 标签：javascript, ajax, security, validation

在使用 AJAX + PHP 设计匹配问答游戏的项目上努力工作后，我了解到我公司用于分发其产品的学习套件不允许我在后端运行服务器端脚本来安全地检查答案。这一切都是由于不幸的等级专制。

长话短说，我必须以某种方式在客户端检查答案（或找出一些棘手的问题）。幸运的是，我已经能够将 jQuery 上传到本地文件夹结构，所以我可以使用它。

在客户端检查客户答案的最安全方法是什么？或者有什么方法可以引用外部文件……比如 XML 文件或其他东西，以更安全地检查答案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T16:34:36.623

好的，如果你真的想要并且需要在 JS 中做所有事情，我会这样做：

*   不要将正确的答案存储为明文，使用某种散列。
*   将 answers 对象和哈希函数隐藏在闭包中，这样它们就不能通过浏览器的 js 控制台调用。
*   在检查过程中添加一些异步部分，例如简单的超时。通过以编程方式检查答案并查找结果对象，使用该限制代码来对抗暴力破解表单。
*   [混淆](https://stackoverflow.com/q/522064/1048572)代码。[通过默默无闻的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)性从来都不是一个好概念，但它可以防止最终的黑客直接从您的代码中复制相关部分。

但是，仍然不清楚如何将结果发送到服务器以存储它们。如果该部分很容易被伪造，那么您就迷路了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:31:05.363

我唯一能想到的就是混淆你的代码。这个过程也被称为缩小它。如果你这样做，你的代码将更难阅读，因此更难破解。它并没有使它无法破解，但它使那些希望作弊的人的生活变得更加困难。你有几个选择：

*   [YUI 压缩机](http://developer.yahoo.com/yui/compressor/)
*   [/打包机/](http://dean.edwards.name/packer/)
*   [JSmin](http://fmarcia.info/jsmin/test.html)
*   [丑化JS](https://github.com/mishoo/UglifyJS)
*   [Google Closure Compiler](http://closure-compiler.appspot.com/)（我推荐这个）

我认为这涵盖了所有主要的，但如果您知道我没有提到的更多内容，请在下面发表评论。

与此答案相关的问题：[Is there a good JavaScript minifier?](https://stackoverflow.com/questions/3520285/is-there-a-good-javascript-minimizer)

# ant - Ant build.xml phpunit

> ID：11781631
> 
> 赞同：1
> 
> 时间：2012-08-02T16:13:22.883
> 
> 标签：ant, build, phpunit, build.xml

我有一个 ant build.xml（如下）。我可以从命令行很好地运行 phpunit，如下所示：

D:> phpunit --verbose --testdox-html logs\today.html runtest

这会在文件夹 d:\runtest 中运行我所有的 phpunit 测试。

我的问题是，当我将 build.xml 作为“ant build”运行时，它会尝试执行一个名为 runtest.php 的文件，ant 的输出如下：

```
D:\>ant build
Buildfile: D:\build.xml

check_os:

if_windows:

if_unix:

prepare:

phpunit:
     [exec] PHPUnit 3.6.11 by Sebastian Bergmann.
     [exec]
     [exec] Cannot open file "runtest.php".

BUILD FAILED
D:\build.xml:48: exec returned: 1

Total time: 2 seconds 
```

我的 Build.xml 如下：

```
<!-- This project launches the test generator and execute all phpunit selenium tests -->
<project name="proj" default="build" basedir="">
<!--Get environment variables -->
<property environment="env" />
<property name="logFolder" value="${basedir}\logs"/>
<property name="testFolder" value="${basedir}\runtest"/>

<property name="test" value="**" />
<condition property="pattern" value="runtest/*.php">
<os family="windows" />
</condition>

<tstamp/>

<!-- Check Operating system to set phpunit path-->
<target name="check_os">
<condition property="isWindows">
<os family="windows" />
</condition>
<condition property="isLinux">
<os family="unix" />
</condition>
</target>

<target name="if_windows" depends="check_os" if="isWindows">
<property name="exe.phpunit" value="C:\\Program Files\\PHP\\phpunit.bat"/>
</target>

<target name="if_unix" depends="check_os" if="isLinux">
<property name="exe.phpunit" value="${env.PHP_HOME}/includes/PHPUnit-3.2.0/PHPUnit" />
</target>

<target name="prepare" depends="if_windows, if_unix">
<mkdir dir="${logFolder}"/>
</target>

<target name="phpunit">
<!-- Check if folder empty -->
<fileset id="fileset.test" dir="${testFolder}">
<include name="*.*"/>
</fileset>
<fail message="Files not found">
<condition>
<resourcecount refid="fileset.test" when="less" count="1"></resourcecount>
</condition>
</fail>
<!-- Execute phpunit tests -->
<exec executable="${exe.phpunit}" failonerror="true" dir="runtest">
<arg line="--verbose --testdox-html '${logFolder}\phpunit-report-${TODAY}.html' runtest" />
</exec>
</target>

<target name="build" depends="prepare,phpunit"/>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:45:47.777

问题是我指定 dir="runtest" 一旦我从它工作的 Execute 行中删除它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-26T11:27:24.943

```
<target name="phpunit" unless="phpunit.done" depends="prepare"  description="Run unit tests with PHPUnit">
    <exec executable="${phpunit}" failonerror="true"  dir="${basedir}/classes/tests/" resultproperty="result.phpunit"> 
```

`${phpunit}`- 需要phpunit的安装路径，可以从linux中的phpunit命令获取

`dir="${basedir}/classes/tests/"`- 只需要您的 php 应用程序所在的文件夹路径

```
 <arg line="UserTest ${basedir}/classes/tests/userTest.php" /> 
```

`line="UserTest ${basedir}/classes/tests/userTest.php"`- 这里 UserTest 是类名，`${basedir}/classes/tests/userTest.php`它是测试类文件的路径

```
 <arg value="--configuration"/>
        <arg path="${basedir}/classes/tests/UnitTest.xml"/> 
```

`path="${basedir}/classes/tests/UnitTest.xml"`- xml文件的路径

```
 </exec>

    <property name="phpunit.done" value="true"/>
</target> 
```

# matlab - 如何用同名的新函数包装已经存在的函数

> ID：11781634
> 
> 赞同：6
> 
> 时间：2012-08-02T16:13:27.980
> 
> 标签：matlab, wrapper, built-in, overriding

是否可以围绕与原始函数具有完全相同名称的函数创建包装器？

这在用户希望在将输入变量传递给内置函数之前对输入变量进行一些额外检查的情况下非常有用[如何在 MATLAB IDE 挂起显示非常大的数组时中断它？](https://stackoverflow.com/questions/11779511/how-to-interrupt-matlab-ide-when-it-hangs-on-displaying-very-large-array)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T16:35:01.407

实际上，除了 slayton 的答案，您不需要使用`openvar`. 如果您定义一个与 matlab 函数同名的函数，它将隐藏该函数（即被调用）。

为了避免递归调用您自己的函数，您可以使用`builtin`.

例如

```
outputs = builtin(funcname, inputs..); 
```

`rand.m`简单的例子，在matlab路径中命名为：

```
function out = main(varargin)
disp('Test wrapping rand... calling rand now...');
out = builtin('rand', varargin{:}); 
```

**请注意**，这仅适用于由 找到的函数`builtin`。对于那些不是，slayton 的方法可能是必要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:27:11.677

是的，这是可能的，但它需要一些黑客攻击。它要求您复制一些函数句柄。

使用问题中提供的示例，我将展示如何将函数包装`openvar`在用户定义的函数中，该函数检查输入变量的大小，然后允许用户取消对太大变量的任何打开操作。

此外，当用户双击 Matlab IDE 的工作区窗格中的变量时，这应该可以工作。

我们需要做三件事。

1.  获取原始`openvar`函数的句柄
2.  定义调用的包装函数`openvar`
3.  将原始`openvar`名称重定向到我们的新函数。

示例函数

```
function openVarWrapper(x, vector)

    maxVarSize = 10000;
    %declare the global variable
    persistent openVarHandle; 

    %if the variable is empty then make the link to the original openvar
    if isempty(openVarHandle)
        openVarHandle = @openvar;
    end

    %no variable name passed, call was to setup connection
    if narargin==0
        return;
    end

    %get a copy of the original variable to check its size
    tmpVar = evalin('base', x);        

    %if the variable is big and the user doesn't click yes then return
    if prod( size( tmpVar)) > maxVarSize
        resp = questdlg(sprintf('Variable %s is very large, open anyway?', x));
        if ~strcmp(resp, 'Yes')
            return;
        end
    end

    if ischar(x) && ~isempty(openVarHandle);
        openVarHandle(x);
     end
 end 
```

一旦定义了这个函数，那么你只需要执行一个脚本

*   清除任何命名的变量`openvar`
*   运行`openVarWrapper`脚本来设置连接
*   将原件`openVar`指向`openVarWrapper`

示例脚本：

```
clear openvar;
openVarWrapper;
openvar = @openVarWrapper; 
```

最后，当你想清理所有东西时，你可以简单地调用：

```
clear openvar; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-12T00:18:16.247

我更喜欢 jmetz 的方法`builtin()`，因为它可以应用，因为它很干净而且切中要害。不幸的是，很多很多功能都没有找到`builtin()`。

我发现我能够使用`which -all`和`cd`命令的组合来包装一个函数。我怀疑这种方法可以适用于各种各样的应用程序。

在我的示例案例中，我想（暂时）包装`interp1`函数，以便我可以检查 NaN 输出值。（`interp1`默认情况下，该函数将在某些条件下返回 NaN，例如，如果查询点大于最大样本点。）这是我想出的：

```
function Vq = interp1(varargin)

   persistent interp1_builtin;

   if (isempty(interp1_builtin)) % first call: handle not set
      toolbox = 'polyfun';

      % get a list of all known instances of the function, and then 
      % select the first such instance that contains the toolbox name
      % in its path

      which_list = which('interp1','-all');
      for ii = 1:length(which_list)
         if (strfind(which_list{ii}, [filesep, toolbox, filesep]))
            base_path = fileparts(which_list{ii}); % path to the original function
            current_path = pwd;
            cd(base_path); % go to the original function's directory
            interp1_builtin = @interp1; % create a function handle to the original function
            cd(current_path); % go back to the working directory
            break
         end
      end
   end

   Vq = interp1_builtin(varargin{:});  % call the original function

   % test if the output was NaN, and print a message
   if (any(isnan(Vq)))
      dbstack;
      disp('ERROR: interp1 returned a NaN');
      keyboard
   end

end 
```

另请参阅：[如何使用与用户定义函数同名的 MATLAB 工具箱函数](https://stackoverflow.com/questions/33775645/how-to-use-matlab-toolbox-function-which-has-the-same-name-of-a-user-defined-fun)

# python - TypeError: str 不支持缓冲区接口

> ID：11781639
> 
> 赞同：17
> 
> 时间：2012-08-02T16:13:30.340
> 
> 标签：python

我正在尝试在 python 中制作一个简单的客户端和服务器消息传递程序，但我不断收到错误“TypeError：'str'不支持缓冲区接口”，甚至不知道这意味着什么。在很大程度上，我是 python 的初学者，也是网络的完整初学者。

我假设由于某种原因我无法发送字符串数据？如果是这种情况，我将如何发送字符串？

作为参考，我从中获得的大部分示例代码是针对 python 2.x 的，我在 Python 3 中这样做，所以我相信这是从版本转换中解决的另一个问题。我四处寻找同样的问题，但无法真正弄清楚如何将相同的修复程序应用于我的情况。

这是服务器的开始代码：

```
import socket
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind(("", 5000))
server_socket.listen(5)

print("TCP Server Waiting for client on port 5000")

while 1:
    client_socket, address = server_socket.accept()
    print("TCP Server received connect from: " + str(address))
    while 1:
        data = input("SEND(Type q or Q to quit):")
        if(data == 'Q' or data == 'q'):
            client_socket.send(data)
            client_socket.close()
            break;
        else:
            client_socket.send(data)
            data = client_socket.recv(512)

        if(data == 'q' or data == 'Q'):
            client_socket.close()
            break;
        else:
            print("Received: " + data) 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-02T16:20:16.227

在 python 3 中，字节字符串和 unicode 字符串现在是两种不同的类型。由于套接字不知道字符串编码，它们使用原始字节字符串，其接口与 unicode 字符串略有不同。

所以，现在，只要你有一个需要用作字节字符串的 unicode 字符串，你就需要`encode()`它。当您有一个字节字符串时，您需要将`decode`其用作常规（python 2.x）字符串。

Unicode 字符串是引号括起来的字符串。字节字符串是`b""`封闭的字符串

请参阅[python 3.0 中的新增功能](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit)。

# javascript - 使用 ID 调用函数，更改为 onclick？

> ID：11781640
> 
> 赞同：1
> 
> 时间：2012-08-02T16:13:36.233
> 
> 标签：javascript, jquery

我有一个覆盖脚本，当链接如下时弹出：

`<a id="b1" href="page.html">link</a>`

用来。问题是我需要多个链接但不能使用相同的 ID。

这是代码：

```
$(function(){

$('#b1').frameWarp();

}); 
```

我尝试用 .b1 和 a.b1 替换 #b1 并使用类而不是 ID。这在第一个链接上工作正常，但任何后续点击的链接都会导致点击的第一页再次打开。我认为与覆盖脚本中已经使用的类存在冲突。

有没有办法我可以使用 onclick in 让它以同样的方式工作？

该脚本来自一个插件，但其余部分如下：

```
(function($){

// Private varialble deffinitions

var body = $('body'),
    win = $(window),
    popup, popupBG;

var frameCache = {};
var frameCacheDiv = $('<div class="frameCacheDiv">').appendTo('body');
var currentIframe;

// The main plugin code

$.fn.frameWarp = function(settings){

    // Supplying default settings

    settings = $.extend({
        cache: false,
        url: '',
        width:600,
        height:500,
        closeOnBackgroundClick: true,
        onMessage:function(){},
        onShow:function(){}
    }, settings);

    this.on('click',function(e){

        e.preventDefault();

        var elem = $(this),
            offset = elem.offset();

        // The center of the button
        var buttonCenter = {
            x: offset.left - win.scrollLeft() + elem.outerWidth()/2,
            y: offset.top - win.scrollTop() + elem.outerHeight()/2
        };

        // The center of the window
        var windowCenter = {
            x: win.width()/2,
            y: win.height()/2
        };

        // If no URL is specified, use the href attribute.
        // This is useful for progressively enhancing links.

        if(!settings.url && elem.attr('href')){
            settings.url = elem.attr('href');
        }

        // The dark background

        popupBG = $('<div>',{'class':'popupBG'}).appendTo(body);

        popupBG.click(function(){

            if(settings.closeOnBackgroundClick){
                hide();
            }

        }).animate({    // jQuery++ CSS3 animation
            'opacity':1
        },400);

        // The popup

        popup = $('<div>').addClass('popup').css({
            width   : 0,
            height  : 0,
            top     : buttonCenter.y,
            left    : buttonCenter.x - 35
        });

        // Append it to the page, and trigger a CSS3 animation
        popup.appendTo(body).animate({
            'width'                 : settings.width,
            'top'                   : windowCenter.y - settings.height/2,
            'left'                  : windowCenter.x - settings.width/2,
            'border-top-width'      : settings.height,
            'border-right-width'    : 0,
            'border-left-width'     : 0
        },200,function(){

            popup.addClass('loading').css({
                'width': settings.width,
                'height': settings.height
            });

            var iframe;

            // If this iframe already exists in the cache
            if(settings.cache && settings.url in frameCache){
                iframe = frameCache[settings.url].show();
            }
            else{

                iframe = $('<iframe>',{
                    'src' : settings.url,
                    'css' : {
                        'width' : settings.width,
                        'height' : settings.height,
                    }
                });

                // If the cache is enabled, add the frame to it
                if(settings.cache){
                    frameCache[settings.url] = iframe;
                    iframe.data('cached',true);
                    settings.onShow();
                }
                else{

                    // remove non-cached iframes
                    frameCacheDiv.find('iframe').each(function(){
                        var f = $(this);
                        if(!f.data('cached')){
                            f.remove();
                        }
                    });
                }

                iframe.ready(function(){
                    frameCacheDiv.append(iframe);
                    setUpAPI(iframe, settings);
                    settings.onShow();
                });
            }

            currentIframe = iframe;

        });

    });

    return this;
};

// Helper Functions

function hide(){

    if(currentIframe){
        currentIframe.hide();
        currentIframe = null;
    }

    popupBG.remove();
    popup.remove();
}

function setUpAPI(iframe, settings){

    if(sameOrigin(settings.url)){

        // Exposing a minimal API to the iframe
        iframe[0].contentWindow.frameWarp = {
            hide: hide,
            sendMessage:function(param){
                return settings.onMessage(param);
            }
        };
    }
}

function sameOrigin(url){

    // Compare whether the url belongs to the
    // local site or is remote

    return (getOrigin(url) == getOrigin(location.href));
}

function getOrigin(url){

    // Using an anchor element to
    // parse the URL

    var a = document.createElement('a');
    a.href = url;

    return a.protocol+'//'+a.hostname;
} 
```

})(jQuery);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:38:59.303

试试这个：

```
<a href="javascript:this.onclick=framewrap()">link1</a>
<a href="javascript:this.onclick=framewrap()">link2</a>
<a href="javascript:this.onclick=framewrap()">link3</a> 
```

没试过，但应该可以

# html - 使用 Twitter Bootstrap 修复自定义图标的填充

> ID：11781643
> 
> 赞同：0
> 
> 时间：2012-08-02T16:13:55.547
> 
> 标签：html, css, twitter-bootstrap, icons, padding

[我和如何在 Twitter Bootstrap 中添加自定义图标](https://stackoverflow.com/questions/10393325/how-to-add-custom-icon-in-twitter-bootstrap)的问题有同样的问题

从上述问题的答案中，[如何在 Twitter Bootstrap 中添加自定义图标](http://jsfiddle.net/RwFeu/)的解决方案看起来很棒。我唯一想问的是如何在左边的图标和右边的 30px 图标之间设置 20px。我使用的图标不是标准的 14x14 pxpx，所以我再次使用[enter link description here](http://jsfiddle.net/RwFeu/)。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:28:05.070

只需将填充添加到您创建的自定义类中，如下所示：

**CSS**

```
.icon-car {
    background-image: url("http://cdn5.iconfinder.com/data/icons/Symbolicons_Transportation/24/Car.png");
    background-position: center center;
    height: 24px;
    line-height: 24px;
    width: 24px;
    padding-left:20px;
    padding-right:30px;
} 
```

演示：http: [//jsfiddle.net/RwFeu/7/](http://jsfiddle.net/RwFeu/7/)

# amazon-ec2 - EC2 - 如何检查设备是否已安装？

> ID：11781645
> 
> 赞同：0
> 
> 时间：2012-08-02T16:14:10.430
> 
> 标签：amazon-ec2, boto

我正在使用 python boto 库并编写了一个脚本（在 ec2 实例上运行）来获取附加到该实例的所有卷的列表。

现在我需要检查每个卷是否已挂载，如果已挂载，挂载点是什么。我以为我可以在 /proc/mounts 中搜索卷设备（使用 volume.attach_data.device），但这不起作用，因为 Amazon 将设备从 /dev/sdf 之类的东西重命名为 /dev/xvda 之类的东西。我还没有看到任何关于此重命名是否 100% 发生（无论您的实例类型、卷类型等）或如何确定新设备名称的明确文档。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:37:24.020

我最近经历了这个 - 像这样重命名：

sdf -> xvdf、sdg -> xvdg 等等

这是一致的。
有关详细说明，请参阅此线程： [如何将新的 EBS 卷附加到 AWS 上的 Ubuntu 机器？](https://askubuntu.com/questions/47617/how-to-attach-new-ebs-volume-to-ubuntu-machine-on-aws)

所以你应该能够使用你最初的想法来检查挂载点并重新映射命名。

# c# - 使用 Ninject 在 MVC 3 中注入属性

> ID：11781653
> 
> 赞同：1
> 
> 时间：2012-08-02T16:14:29.863
> 
> 标签：c#, asp.net-mvc-3, ninject

我正在尝试将一个属性注入到我的一个名为 UnitOfWorkAttribute 的 ActionFilter 中。我有这个代码：

```
[Inject]
public IUnitOfWork UnitOfWork { get; set; } 
```

在执行之前，我告诉 Ninject 解决这个问题：

```
Bind<IUnitOfWork>().To<NHibernateUnitOfWork>().InThreadScope(); 
```

我的问题是，在我的 UnitOfWorkAttribute 类中，每当我尝试使用我的 UnitOfWork 属性时，它都会以 Null 的形式出现。这是我的界面：

```
public interface IUnitOfWork : IDisposable
{
    void Begin();
    void Commit();
    void Rollback();
} 
```

这是我的具体：

```
public interface INHibernateUnitOfWork : IUnitOfWork
{
    ISession Session { get; }
}

public class NHibernateUnitOfWork : INHibernateUnitOfWork
{
    private readonly ISessionSource sessionSource;
    private ITransaction transaction;
    private ISession session;

    private bool disposed;
    private bool begun;

    public NHibernateUnitOfWork(ISessionSource sessionSource)
    {
        this.sessionSource = sessionSource;
        Begin();
    }

    //.......
} 
```

我正在实现//......下的接口

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:49:24.003

问题是 Ninject 从来没有机会在 ActionFilter 上“做这件事”，这在 MVC 内部由`FilterAttributeFilterProvider`. 您需要做的是告诉 MVC 使用自定义`FilterAttributeFilterProvider`，您可以在过滤器执行之前拦截过滤器。请允许我演示一下：

假设我有这个接口和实现：

```
public interface IFoo
{

}

public class Foo : IFoo
{

} 
```

然后我有一个 ActionFilter：

```
public class MyActionFilterAttribute : ActionFilterAttribute
{
    public MyActionFilterAttribute()
    {
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        //do something with Foo
        base.OnActionExecuting(filterContext);
    }

    [Inject]
    public IFoo Foo { get; set; }
} 
```

然后我们有一个控制器：

```
public class HomeController : Controller
{
    [MyActionFilter]
    public ActionResult Index()
    {
        return View();
    }
} 
```

如果您现在按原样运行它，显然 Foo 在 MyActionFilter 中仍然为空，所以让我们继续......

让我们设置 Ninject DependencyResolver：

```
public class NinjectDependencyResolver : IDependencyResolver
{
    private readonly IKernel _kernel;

    public NinjectDependencyResolver(IKernel kernel)
    {
        _kernel = kernel;
    }

    public object GetService(Type serviceType)
    {
        return _kernel.TryGet(serviceType);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return _kernel.GetAll(serviceType);
    }
} 
```

现在让我们在 Global.asax 中使用它：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        DependencyResolver.SetResolver(new NinjectDependencyResolver(GetKernel()));
    }

    private IKernel GetKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<IFoo>().To<Foo>();
        return kernel;
    } 
```

越来越近了，但 MVC 在创建动作过滤器时仍然无法使用 Ninject 内核。这就是我们将实现这一目标的地方。

第一的：

```
public class NinjectFilterProvider : FilterAttributeFilterProvider
{
    private readonly IKernel _kernel;

    public NinjectFilterProvider(IKernel kernel)
    {
        _kernel = kernel;
    }

    public override IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        var filters = base.GetFilters(controllerContext, actionDescriptor);

        foreach (var filter in filters)
        {

            _kernel.Inject(filter.Instance);
        }

        return filters;
    }
} 
```

这里发生的是我们正在创建一个自定义 FilterAttributeFilterProvider 类。在 OnActionExecuting 方法中，在我们通过基本实现获得所有过滤器之后，我们可以调用 Ninjects Inject 方法，该方法将检查实例并查看它是否可以向其中注入任何东西（使用 Inject 属性）。

最后一个难题是为我们的自定义 FilterAttributeFilterProvider 设置绑定：

全球.asax：

```
 private IKernel GetKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<IFoo>().To<Foo>();
        //use our custom NinjectFilterProvider
        kernel.Bind<IFilterProvider>().To<NinjectFilterProvider>();
        return kernel;
    } 
```

现在，当 MVC 获取一个`IFilterProvider`（它通过 DependencyResolver 自动获取）时，它不会获取默认值`FilterAttributeFilterProvider`，而是获取我们的自定义`NinjectFilterProvider`，因此我们的 Foo 实例将填充到自定义操作过滤器中。

# php - 异常类应该有多具体？

> ID：11781654
> 
> 赞同：5
> 
> 时间：2012-08-02T16:14:32.263
> 
> 标签：php, exception

作为一项规则，我会尽量避免抛出异常实例，因为这并不能传达太多关于哪里出了问题的信息。

但我发现我得到了相当多的空异常类，看起来像这样......

```
class DataNotFoundException extends Exception {
   // just a tagging class
} 
```

所以在功能上该类与异常相同。唯一的功能意义是我现在可以做到这一点......

```
try {
    ... some code which throws exceptions ...
} catch (DataNotFoundException $dnfe) {
    ... do stuff ...
} catch (OtherException $oe) {
    ... do other stuff ...
} 
```

我的问题是，拥有大量微小的异常类和只抛出异常实例之间的平衡点在哪里。有人对何时引入新的异常类有任何指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:20:51.473

当您有不同的逻辑来处理异常时，您必须始终扩展 Exception 类。寻找 php Spl 库，顺便说一下它包含一些异常类，所以你不需要自己定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:35:31.693

包含许多特定异常并不是一个坏习惯，但只有那些相关且可重现的异常。如果您选择对他们进行非常具体的处理，那么它也应该按照特定的顺序进行；从*非常*具体到一般。

```
try {}    catch (CryptographicException e)
{ ...doSomething }

catch (ArgumentOutOfBoundsException e)
{ ...doSomething }

catch (Exception e)
{ ...doSomething } 
```

这归因于对事件的处理，如果首先出现一般异常，则将跳过所有其他异常。在一般例外之前有特定例外也将有助于您从它们那里获得更多信息。

# ruby - Array.empty 的相反方法是什么？或 [].empty？在红宝石中

> ID：11781658
> 
> 赞同：68
> 
> 时间：2012-08-02T16:14:52.390
> 
> 标签：ruby

我确实意识到我可以做到

```
unless [1].empty? 
```

但是我想知道是否有方法？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-02T16:22:51.240

除了`#any?`提到的 davidrac，[ActiveSupport](http://rubygems.org/gems/activesupport)还有[#present？](https://apidock.com/rails/Object/present%3F)这更像是其他语言的真实性测试。对于`nil`, `false`, `''`, `{}`,`[]`等等，它返回 false；其他一切都是真的（有趣的是，包括 0）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-02T16:15:30.300

您可以使用`[1].any?`, 它实际上是在[Enumerable中定义的](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any-3F)

`nil`请注意，如果您的数组仅包含或`false`值，这将不起作用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-31T04:38:10.290

```
[nil].any?
=> false
[nil].any? {|something| true}
=> true
[].any? {|something| true}
=> false
[false, false].any? {|something| true}
=> true
[nil, 'g'].any? {|something| true}
=> true 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-04T06:21:20.437

我所知道的任何一种方法都无法在 Ruby 中为您提供这一点。关键词“单身”：

```
[5].size.positive? => true
[5].size.nonzero? => 1

[].size.positive? => false
[].size.nonzero? => nil 
```

这两个对于安全导航操作符都更有用，因为 nil 返回 falsy，这意味着否定方法（如 #empty？）会有点崩溃：

```
# nil considered 'not empty' isn't usually what you want
not_empty = proc{|obj| !obj&.empty? }

not_empty.call nil => true
not_empty.call [ ] => false
not_empty.call [5] => true

# gives different 3 answers for the 3 cases
# gives truthy/falsy values you'd probably expect
positive_size = proc{|obj| obj&.size&.positive? }

positive_size.call nil => nil
positive_size.call [ ] => false
positive_size.call [5] => true

# gives truthy/falsy values you'd probably expect
nonzero_size = proc{|obj| obj&.size&.nonzero? }

nonzero_size.call nil => nil
nonzero_size.call [ ] => nil
nonzero_size.call [5] => 1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-23T16:14:12.540

检查数组中的元素：
.empty?
。展示？

如果 a={}
a.any? 。零？
会给你假的。

要检查字段是否具有非零值：

```
.present?
.nil?
.any? 
```

# c# - 如何在 C# 中将“91212”解析为“Hmmss”？

> ID：11781659
> 
> 赞同：1
> 
> 时间：2012-08-02T16:15:01.860
> 
> 标签：c#, datetime

编码：

```
var str = "91212";
DateTime.ParseExact(str, "Hmmss", System.Globalization.CultureInfo.CurrentCulture); 
```

错误：

```
"91212" is not a valid DateTime 
```

似乎 c# 尝试使用`H`匹配`91`，这是不正确的时间。

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:18:27.933

`H`，[根据 MSDN](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，被解释为：

> 小时，使用从 0 到 23 的 24 小时制。

所以你看到的行为是设计和记录的。

你能在前面`91212`加一个零吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:26:32.393

我认为您必须将其强制为 6 个字符并相应地定义格式字符串。以下代码：

```
 var str = "91212";
        if (str.Length == 5)
        {
            str = "0" + str;
        }
        var dtDate = DateTime.ParseExact(str, "HHmmss", System.Globalization.CultureInfo.CurrentCulture);
        System.Diagnostics.Debug.WriteLine(dtDate.ToShortTimeString()); 
```

结果是：

```
9:12 AM 
```

# jquery - 是否可以链接 .css().fadeIn()？

> ID：11781660
> 
> 赞同：0
> 
> 时间：2012-08-02T16:15:08.590
> 
> 标签：jquery

当我尝试这个时我得到一个错误所以想知道是否真的有办法做到这一点，或者我只需要这样做；

```
$(this).css('color', 'red');
$(this).fadeIn(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:17:23.113

是的。你可以串起来。

传递第二个参数作为 CSS 属性的值来设置它。

```
$(this).css("color","red").fadeIn(); 
```

但是，请确保您在 $(this) 中有一个 jQuery 对象。你是怎么得到这个对象的？关于元素的事件（隐藏的）？

例子 ：

```
$("#someButtonID").click(function(){      
    $("#someDivID").css("color","red").fadeIn();
}); 
```

工作样本：http: [//jsfiddle.net/mak3G/1/](http://jsfiddle.net/mak3G/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:20:01.753

如果[`css()`](http://api.jquery.com/css/)您有两种选择：

*   一个参数，例如`css('color')`在这种情况下，您将获得 css 颜色属性值，这不能被链接
*   两个参数，例如`css('color', '#000')`，用于设置值并且可以链接，因为它返回 jQuery 对象

总结一下：

```
var value = $(this).css('color'); // get color value
$(this).css('color', '#000').fadeIn(); // set color value and fadeIn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:21:05.163

将这些串在一起时，我没有收到任何错误。

```
var a = document.createElement('div');
$(a).css('position','fixed').fadeIn(); 
```

回报：

```
[<div style="position: fixed; opacity: 0; display: block; "></div>] 
```

# api - 具有简单 URL 的网站，可用于检索 LinkedIn、Facebook 和 Twitter 的个人资料图片

> ID：11781662
> 
> 赞同：2
> 
> 时间：2012-08-02T16:15:23.240
> 
> 标签：api, social-networking, image

如果这与代码无关，我很抱歉。大约一个月前，我遇到了一个网站，它提供了一种令人难以置信的简单方法来获取各种社交网络的用户个人资料图片（我相信只支持 LinkedIn、Facebook 和 Twitter），但我终生无法记住该网站.

他们提供的 URL 类似于`[URL].com/linkedin/:id`和`[URL].com/twitter/:username`。

如果有人把它加为书签或知道我在说什么，我希望有一个指向该站点的链接。我已经用谷歌搜索了很多组合来尝试找到该网站并搜索了我的浏览历史记录，但我一直无法找到它:(

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:07:28.890

这是唯一想到的服务，化身

[http://visitmix.com/work/incarnate/](http://visitmix.com/work/incarnate/)

是那个吗？

# jquery - 当我使用 jquery 将鼠标悬停在图标上时如何显示一个简单的文本框

> ID：11781665
> 
> 赞同：5
> 
> 时间：2012-08-02T16:15:30.250
> 
> 标签：jquery, html, jsp, onmouseover, jquery-hover

我在 html 中有一个输入字段，该字段旁边有一个帮助图标 (?)，当我将鼠标悬停在该图标上时，我希望显示一条简单的文本消息，并且文本消息应该在悬停时消失。有什么方法可以使用 jquery 做到这一点？

图标将是一个简单的图像说一个小问号。文本将是“在框中输入您的姓名”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T16:18:06.093

动态创建一个 DOM 元素，然后使用目标元素的偏移量将其固定。您可以将元素的创建附加到 mousein 事件上，并将销毁附加到目标元素的 mouseout 事件上。

假设您的目标页面元素有一个 id myId：

将此添加到您的准备就绪函数中，或在声明 myId 元素后的脚本标记中：

```
$('#myId').mouseenter(function(){
    $('body').append("<div id='hoveringTooltip' style='position:fixed;'></div>");
    $('#hoveringTooltip').html("MY TOOLTIP TEXT GOES HERE");
    $('#hoveringTooltip').css({
        "top" : $(this).offset().top + MYTOPOFFSET,
        "left" : $(this).offset().left + MYLEFTOFFSET
    });
});
$('#myId').mouseleave(function(){
    $('#hoveringTooltip').remove();
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T16:26:45.927

您可以使用“工具提示”在图标上用鼠标移动文本，

这是一个很好的例子。

[http://www.alessioatzeni.com/blog/simple-tooltip-with-jquery-only-text/](http://www.alessioatzeni.com/blog/simple-tooltip-with-jquery-only-text/)

这也是一个很好的例子，你可以用类似的方式实现鼠标移出！

[http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

也检查这个例子，

[http://jsfiddle.net/DLQsX/](http://jsfiddle.net/DLQsX/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T16:19:45.410

请参阅 jQuery[悬停事件](http://api.jquery.com/hover/)。

```
$("#help_icon").hover(function(){
    $("#msg_div").hide();
    $("#msg_div").show();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T16:25:44.807

```
$("#help_icon").hover(
  function () {
    $("#msg_div").show();
  }, 
  function () {
    $("#msg_div").hide();
  }
); 
```

来自与 jjclarkson 的答案相同的链接

# asp.net-mvc-3 - CaptchaMVC 图像路由不适用于我在 MVC3 中的当前路由 - 如何解决？

> ID：11781670
> 
> 赞同：2
> 
> 时间：2012-08-02T16:16:00.017
> 
> 标签：asp.net-mvc-3, c#-4.0, routes

安装[CaptchaMVC](https://nuget.org/packages/CaptchaMvc.Mvc3/1.0.1)后，我导航到要测试功能的页面 - ~/about。

对于图像`localhost:51860/DefaultCaptcha/Generate?t=6d9ab0cefbb8496582b1db592eff66f`，我看到一个断开的链接。

我添加`routes.IgnoreRoute("DefaultCaptcha/{*pathInfo}");`并尝试`routes.IgnoreRoute("DefaultCaptcha/Generate");`到我的路线顶部，但图像仍然没有出现，并且导航到图像 url 返回 404 not found 错误。

当我从 Global.asax 中删除我的所有路线时，这工作正常。

我认为的问题是这种模式与这条路线相匹配：

```
routes.MapRoute(name: "WholeCountryCategoryResults1", url: "{categoryName}/{searchTerm}/", defaults: new { controller = "Results", action = "SearchWholeCountryCategory" }); 
```

其余的路线应该不重要，因为规则是按顺序执行的，那么这里有什么问题呢？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T19:01:17.877

对于那些可能遇到相同问题的人，只需设置一条到验证码提供者的控制器和操作的路由：

```
routes.MapRoute(name: "DefaultCaptchaRoute", url: "DefaultCaptcha/Generate", defaults: new { controller = "DefaultCaptcha", action = "Generate" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T20:47:52.457

这对我有用。将此添加到 web.config

```
 <location path="DefaultCaptcha/Generate">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location> 
```

# javascript - 使用 jquery 进行大量短调用来构建字符串？

> ID：11781675
> 
> 赞同：1
> 
> 时间：2012-08-02T16:16:08.403
> 
> 标签：javascript, jquery, asynchronous

我一直在将来自 theJIT.org 的 spacetree 插件用于我正在从事的项目，但在用户想要的新功能方面遇到了麻烦。

我编写了一个小脚本来查询数据库中的员工，看看他们是否有向他们报告的人，如果有，则打印 1，否则打印 0。我为 spacetree 插件设置 json 字符串的代码对现在看起来像这样（它有点乱，但我只是想在我把它全部清理干净之前让它工作）：

```
// Returns either 0 or 1 for if a person has direct reports, used in hierarchy below
function checkManager(empid){
    return $.ajax({
        url: path + 'CorpDir_CheckManager.cfm?Empid='+empid,
        datatype: 'text',
        success: (function (mng) {
            console.log(mng + " " + empid); //This works, but ends up being after the string is built
            return mng;
        }),
        error: (function (){
            alert("ERROR!");
        })
    });
}

//Setting up the JSON for the hierarchy tree. 
function startTree() {

    // Clear all other trees on the page
    for (var i = 0; i < 50; i++) {
        $('#hier' + i + '-canvaswidget').remove();
    }
    var json = '';
    jQuery.getJSON(path + 'CorpDir_ReportingChain.cfm?Empid=' + empid, function (data) {// JSON from reporting chain is data
        jQuery.getJSON(path + 'CorpDir_Subordinate.cfm?Empid=' + empid, function (data2) {  // JSON from subordinate is data2
            // Check to see if there is even a reporting chain
            if(data.DATA.length > 0){
                // This is pretty much magic, it took me a while to work it all out. 
                // This first for loop goes through the information from Reporting Chain, turning into the json that the hierarchy uses
                for (var i = data.DATA.length - 1; i >= 0; i--) {
                    json = json + 'id: "' + data.DATA[i][3].replace(/\s/g, '') + '",name: "' + data.DATA[i][0].replace(/\s/g, '') + '<br>' + data.DATA[i][1].replace(/\s/g, '') + '",data: {xid: "' + data.DATA[i][6].replace(/\s/g, '') + '", "parentnode": "1"},children: [{';
                }
            }
            // This appends the current person to the hierarchy (and will later be set to the root node for it)
            var mng = checkManager(empid); //results in [object Object] instead of 1 or 0
            json = json + 'id: "' + empid + '",name: "' + fname + '<br>' + lname + '",data: {xid: "' + commitid.replace(/\s/g, '') + '", "parentnode":"' + mng + '"},children: [';
            // These are the child nodes (from subordinate JSON date), set up to what the hierarchy wants for it.
            for (var i = 0; i < data2.DATA.length; i++) {
                if ( data2.DATA[i][4].replace(/\s/g, '') != empid ){
                    mng = checkManager(data2.DATA[i][4].replace(/\s/g, ''));
                    json = json + '{id: "' + data2.DATA[i][4].replace(/\s/g, '') + '",name: "' + data2.DATA[i][0] + '<br>' + data2.DATA[i][1] + '",data: {xid: "' + data2.DATA[i][6].replace(/\s/g, '') + '", "parentnode":"' + mng + '"},children: []},';
                }
                // IE doesn't always play well if there's a comma at the end of a list, so this cuts it off if it's there
                if (i === data2.DATA.length - 1) {
                    json = json.slice(0, -1);
                }
            }
            json = json + ']';
            // This finishes up the JSON string, closing off all the brackets left open from setting up the reporting chain
            for (var i = data.DATA.length; i > 0; i--) {
                json = json + '}]';
            }
            json = '{' + json + '}';
            console.log(json);
            // Give all the information we need to the spacetree so we can load up that hierarchy
            jitSpaceTree(json, index, empid);
        });
    });
} 
```

显然，假设它会等待该 ajax 调用的返回是一个坏主意（很高兴它在调用该函数之后继续前进：/），在那里获取这些信息的最佳方法是什么？更改获取报告和从属链的调用只是部分解决方案，因为我仍然需要检查当前用户（在中间添加的用户）。

这样做的正确方法是什么？我必须在 for 循环中进行异步调用或重写大量代码是我现在看到的唯一方法。

# c# - 序列化包含 XDocument 的属性

> ID：11781680
> 
> 赞同：3
> 
> 时间：2012-08-02T16:16:20.380
> 
> 标签：c#, linq, xaml

我有一个要序列化的类，`System.Xaml.XamlObjectReader`并且`System.Xaml.XamlXmlWriter`. 在我到达包含`XDocument`. 我无法序列化类型“System.Xml.Linq.XDeclaration”。

如何在我的while循环中将对象节点序列化到磁盘让它写出这个属性中的xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:20:44.750

您可以将其转换为 CData 并对其进行序列化。您可以参考此示例了解详细信息 [如何使用 XmlSerializer 将字符串序列化为 CDATA？](https://stackoverflow.com/questions/1379888/how-do-you-serialize-a-string-as-cdata-using-xmlserializer)

或者您也可以转义 XDocument 的 ToString() 的 xml 标签。例如[字符串转义到 XML](https://stackoverflow.com/questions/1132494/string-escape-into-xml)

# jquery - 完整的窗口部分和导航

> ID：11781681
> 
> 赞同：0
> 
> 时间：2012-08-02T16:16:22.473
> 
> 标签：jquery, css, positioning

## 测试用例

**>> [JSFIDDLE](http://jsfiddle.net/BramVanroy/z68x5/) <<**

## 问题

我一直在玩 100% 的宽度和高度部分并在它们之间导航。一切都很顺利——我想。但是，当用户点击“基地”时，他会被重定向到第一部分。**这很好，但是当用户到达绿色幻灯片（第四**个）时，问题就出现了。当用户在此部分单击下一个箭头（向左）时，动画不再正确（而在第一次运行时它是正确的！）

## 应该发生什么（以及第一次运行时会发生什么）：

*   *绿色*（第四部分）向右滑动（`right: -$(window).width()`）
*   *白色*（第五部分）也向右滑动（`right : 0`）

## 用户之前已经返回基地后会发生什么

*   *绿色*保持不动（根本不动）
*   *白色*向右滑动（`right : 0`），因为它应该

我不知道为什么*格林*什么都不做！也许你们能发现问题？

此外，如果您对我的代码有任何提示（可能更合乎逻辑的事情），请将它们放在评论中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:40:47.630

在第一次运行时，`#green`'s`left`和`right`'s css 值未设置（又名`auto`）

返回“基地”后，您会看到`#green`现在已经`right:0`和`left:0`

# java - 我的代码有什么问题，我不能使用 KeyPressed 方法？

> ID：11781687
> 
> 赞同：0
> 
> 时间：2012-08-02T16:16:40.760
> 
> 标签：java, acm-java-libraries

```
public void run() {
    setSize(700,700);
    setGame();
}
public GObject drawPlayer() {
    GOval player = new GOval(getWidth()/2,getHeight()/2,10,10);
    player.setFilled(true);
    player.setFillColor(Color.red);
    return player;
}
public void keyPressed(KeyEvent e) {
        switch(e.getKeyCode()) {
        case KeyEvent.VK_UP: Player.move(0, -10);break;
        case KeyEvent.VK_DOWN: Player.move(0, 10);break;
        case KeyEvent.VK_LEFT: Player.move(-10, 0);break;
        case KeyEvent.VK_RIGHT: Player.move(10, 0);break;
    }
}
public GRect object;
    public void setGame() {
    setObject();
    GObject Player = drawPlayer();
    add(Player);
    addKeyListeners();
} 
```

然后我为播放器创建椭圆，我添加KeyListeners 方法来检测键当我运行时我不能使用箭头键来移动播放器对象？？我的代码有什么问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T14:21:09.000

假设上面的代码在一个扩展的类中`GraphicsProgram`，那是有效的代码，应该像写的那样工作。您正在检查正确的键代码（尽管确保它们没有在您的输入设备上以某种方式重新映射），您添加`addKeyListeners()`正确。

一个问题是`GraphicsProgram`对象必须具有焦点，否则将无法识别键。要进行测试，您可以启动程序并立即在小程序窗口中单击以获取焦点。此时，应识别键。

# android - 长按列表项时尝试添加对话框，导致 StackOverflow 错误

> ID：11781692
> 
> 赞同：1
> 
> 时间：2012-08-02T16:17:00.073
> 
> 标签：android, android-listview, android-dialog

当我使用 longClick 时，我想添加一个带有 2 个按钮*编辑*和*删除的对话框（实际上只实现了删除）（标准单击打开项目详细信息）*

所以我尝试按照[此链接上的指南进行操作](http://android.vexedlogic.com/2011/07/30/android-long-click-context-menu/)

我添加了

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.layout.edit_dialog, menu);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();

    switch (item.getItemId()) {
    case R.id.remove_item:

        final String[] listItem = getItemId();

        String idItemSel = listItem[info.position];

        delItem(idItemSel);
        adapter.notifyDataSetChanged();
        return true;
    }
    return false;
} 
```

（其中*适配器*是我的列表适配器）

我已经以这种方式配置了监听器

```
list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                .....

            }
        });

        list.setOnItemLongClickListener(new OnItemLongClickListener() {

            public boolean onItemLongClick(AdapterView<?> parent, View view,
                    int position, long id) {
                view.showContextMenu();
                return true;

            }
        }); 
```

一切正常，但是当我使用长按时应用程序崩溃并出现此错误（调用时`view.showContextMenu();`）：

```
08-02 18:13:12.079: E/AndroidRuntime(7780): FATAL EXCEPTION: main
08-02 18:13:12.079: E/AndroidRuntime(7780): java.lang.StackOverflowError
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:1995)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onItemLongClick(MyItems.java:615)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.widget.AbsListView.showContextMenuForChild(AbsListView.java:2001)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at android.view.View.showContextMenu(View.java:2520)
08-02 18:13:12.079: E/AndroidRuntime(7780):     at detailer.myapp.it.MyItems$6.onIt 
```

当我长按列表项时，有任何解决问题的方法或查看简单上下文对话框的替代方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T16:31:12.633

您似乎已经为 ContextMenu 注册了 ListView*并*设置了一个调用 showContextMenu() 的 OnItemLongClickListener，这会创建一个循环逻辑：

*   OnItemLongClickListener 调用 ContextMenu，
*   ContextMenu 调用 OnItemLongClickListener，
*   OnItemLongClickListener 调用 ContextMenu，
*   ContextMenu 调用 OnItemLongClickListener，
*   等等，直到发生堆栈溢出

要解决这个问题：

首先，删除 OnItemLongClickListener，因为它与 ContextMenu 是多余的。

其次，仔细检查您是如何使用 ContextMenu 的。您已将菜单保存在布局文件夹中，如果您已经使用了 registerForContextMenu()，则无需调用 showContextMenu()。

* * *

要设置 ContextMenu，只需将整个 ListView 传递给 registerForContextMenu()：

```
registerForContextMenu(list); 
```

您将需要这样的 XML：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/edit"
        android:title="@string/edit" />
    <item
        android:id="@+id/remove"
        android:title="@string/remove" />
</menu> 
```

将其保存在一个新文件夹`res/menu`中，我将其命名为 context_menu.xml。

然后更改您的方法以创建 ContextMenu：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    getMenuInflater().inflate(R.menu.context_menu, menu);
} 
```

现在每一行都会在长按时自动打开一个 ContextMenu。

* * *

如果您在编辑和删除行方面需要帮助，请发布您用于创建 ListView 和 Adapter 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T06:10:52.883

如果您单击 Listview 中的 Textview(autolink) 然后崩溃删除这个 android:textIsSelectable="true" 在我的情况下它解决了。我有同样的错误

# actionscript-3 - Flash 3d 模糊文本

> ID：11781694
> 
> 赞同：6
> 
> 时间：2012-08-02T16:17:02.250
> 
> 标签：actionscript-3, flash, 3d

当人们在 3d 空间中使用变换时，我遇到了最常见的问题之一。问题在于以 3d 形式转换的内容变得模糊。

现在要解决这个问题，有一个著名的解决方案。

即假设对象是说*mc*。

```
mc.transform.matrix3d = null; 
```

动画结束后，您可以将影片剪辑的 3d 矩阵设置为空。这解决了问题，但是当动画完成并且 matrix3d 无效时，您会看到明显的抽搐。

flashandmath 中定义的解决方案之一是

[http://www.flashandmath.com/flashcs4/blursol/index.html](http://www.flashandmath.com/flashcs4/blursol/index.html)

但这对我来说效果不佳。

如果有人有一个更好的解决方案，可以全面工作（没有任何混蛋！）请让社区知道！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T09:26:25.913

如果没有实际的源代码，很难确定其确切原因，但总的来说，Flash 中的所有模糊都是由于图像的重新采样（在显示与原始尺寸不同的图像时补偿平滑度/清晰度）或由于对象坐标的非整数值。

要解决此问题，您通常必须确保所有对象都具有整数（非浮点）坐标（尤其是文本对象），并确保应用您链接到的缩放校正修复程序，以防止重新采样 3d对象，你应该很高兴。

# file - 使用来自外部 html 文件的输入标签值进行提交

> ID：11781700
> 
> 赞同：0
> 
> 时间：2012-08-02T16:17:31.743
> 
> 标签：file, input, submit, external

我有 2 个 html 文件： File1.html 包含提交到 PHP 文件的表单：

```
<form action="handle_form.php" method="get">
</form> 
```

File2.html 包含一些输入标签：

```
<input name="fullname" />
<input name="email" />
... 
```

如何使用 PHP 将 file2.html 加载到 file1.html 以将输入值从 file2.html 提交到 handle_form。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:21:06.367

您需要使用 PHP，因此您的第一个文件将被命名为 file1.php 并包含：

```
<form action="handle_form.php" method="get">
    <?php
        include("file2.php");
    ?>
</form> 
```

PHP 文件只能包含 html 标签而不能包含 PHP 脚本，因此请随意使用它们。

# c# - 删除项目而不导航到新视图--mvc 3

> ID：11781704
> 
> 赞同：1
> 
> 时间：2012-08-02T16:17:43.637
> 
> 标签：c#, .net, asp.net-mvc-3

我的网站中有一个表格，其中显示了数据列表。每个数据项都有一个删除链接。我不想在点击时将我的用户带到删除页面；我只想在我眼前删除该项目，在同一页面上，而不是离开。我还需要一个控制器方法来删除吗？我该怎么做，因为我显然没有通过删除点击返回视图？我曾考虑在我的 get 方法上使用 redirecttoaction return 来进行删除，但我认为这是不正确的。

在不使删除方法返回删除视图的情况下进行删除的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:35:30.373

好吧，如果您有这样的桌子

```
<table>
<tr>
<td>
<a id="delete" href="@Url.Action("Delete",new {Id=123})">delete</a>
</td>
</tr>
</table> 
```

和控制器方法

```
public JsonResult Delete(int Id)
{
//do delete stuff
return Json(true??false);
} 
```

您将通过以下方式使用 ajax

```
$('#delete').click(function(){
$.post($(this).attr('href'),function(result){
if(result)
{
$(this).closest('tr').remove();
}
});
return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:44:51.953

创建一个删除项目的控制器方法。使用 JQuery（或您的首选 javascript 库）响应按钮上的单击事件，并进行 AJAX 调用。

控制器代码：

```
public ActionResult Delete(int id)
{
    bool success = this.businessLogic.Delete(id); // whatever your business logic is for deleting

    object result = success ? "OK" : "ERROR"; // have this be your object that you will return
    return this.Json(result, JsonRequestBehavior.AllowGet);
} 
```

javascript:

```
$(function() {
    $("div.deleteButton").on("click", function() {
        var id = $(this).parent().attr("data-id"); // or wherever you've stored the id of the item you're trying to delete
        var url = "/Controller/Delete?id=" + id;
        $.getJSON(url, function (result) {
            if (result != "OK") {
                alert("delete failed!");
            }
            else {
                $("tr[data-id=" + id).remove(); // or however you need to remove the row from the UI
            }
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T16:27:51.100

我认为您可以为此目的使用 Ajax。你可以在按钮的 onclick 事件上编写类似下面的代码。您还需要提供一些 js 代码来隐藏已删除的项目。

```
$.post("delete/{Id}") 
```

您可能需要序列化表单数据，您也可以使用 jQuery 来执行此操作。

```
$.post("delete/{Id}", $("#form-name").serialize()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T16:34:11.760

用户 jQuery ajax 从同一列表页面执行异步操作。

假设您有一些这样的 HTML 标记。

```
<div class="divItem">
   <p>Item Desc 108</p>
   <a href="../Product/delete/108" class="ajaxAction">Delete</a>
</div>
<div class="divItem">
   <p>Item Desc 10p</p>
   <a href="../Product/delete/109" class="ajaxAction">Delete </a>
</div> 
```

现在有一些 jQuery 代码。（确保您在此视图/布局页面中包含 jQuery 库以使此代码正常工作）

```
<script type="text/javascript">
  $(function(){

     $("a.ajaxAction").click(function(e){

        e.preventDefault();  //prevent default click behaviour
        var item=$(this);
        $.post(item.attr("href"),function(data){
           if(data.Status=="Deleted")
           {
             //successsfully delete from db. Lets remove the Item from UI
              item.closest(".divItem").fadeOut().remove();
           }
           else
           {
               alert("Could not delete");
           }

        });

     });

  });

</script> 
```

现在确保您在相应的控制器（*本例中为 Product*）中有一个操作方法来处理此 jQuery`POST`并`JSON`在操作后返回，返回给客户端。

```
[HttpPost]
public ActionResult Delete(int id)
{
  try
  {
     //delete the Item from the DB using the id
     // and return Deleted as the status value in JSON
     return Json(new { Status : "Deleted"});
  }
  catch(Exception eX)
  {
     //log exception
     return Json(new { Status : "Error"});
   }

} 
```

Delete 操作方法`JSON`以以下形式返回一个有效值（状态值将是已删除/错误）

```
{
    "Status": "Deleted"
} 
```

在 jQuery post 的回调中，您正在检查 JSON 数据，如果状态值为 Deleted，则您正在从 UI DOM 中删除该项目。

# android - 在 Eclipse 图形布局中不针对不同屏幕尺寸进行缩放

> ID：11781706
> 
> 赞同：0
> 
> 时间：2012-08-02T16:17:45.210
> 
> 标签：android, layout, screen

我似乎无法将我的应用程序放入多个屏幕。我没有任何图像，只有按钮和一些文字。我对边距和宽度使用“dp”，对文本使用“sp”，但视图的大小仅在较大的显示器上缩小。此外，一些较低的按钮在 Galaxy Nexus（4.65 英寸及以上）上移动。

我怎样才能解决这个问题？

谢谢！

X

代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical">

    <TextView android:id="@+id/disp_nums" android:textSize="64sp"
        android:layout_width="200dp" android:layout_height="100dp"
        android:layout_gravity="center" android:gravity="center" android:text="1111" />

    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:orientation="horizontal">

        <EditText android:id="@+id/ent_nums" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:hint="Entered numbers" />

        <Button android:id="@+id/enter" android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:layout_weight="0.37"
            android:text="Enter" />

    </LinearLayout>

    <LinearLayout android:layout_gravity="center"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:orientation="horizontal" android:layout_marginTop="15dp">

        <Button android:id="@+id/button7" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="7" />
        <Button android:id="@+id/button8" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="8" />
        <Button android:id="@+id/button9" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="9" />

    </LinearLayout>
    <LinearLayout android:layout_gravity="center"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:orientation="horizontal">

        <Button android:id="@+id/button4" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="4" />
        <Button android:id="@+id/button5" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="5" />
        <Button android:id="@+id/button6" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="6" />

    </LinearLayout>

    <LinearLayout android:layout_gravity="center"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:orientation="horizontal">

        <Button android:id="@+id/button1" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="1" />
        <Button android:id="@+id/button2" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="2" />
        <Button android:id="@+id/button3" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="3" />

    </LinearLayout>

    <RelativeLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <Button android:id="@+id/delete" android:layout_width="40dp"
            android:layout_height="wrap_content" android:layout_alignParentRight="true"
            android:layout_alignParentTop="true" android:layout_marginRight="96dp"
            android:text="Del" android:textSize="12sp" />
        <Button android:id="@+id/button0" android:layout_width="90dp"
            android:layout_height="wrap_content" android:layout_alignBottom="@+id/delete"
            android:layout_alignParentTop="true" android:layout_toLeftOf="@+id/delete"
            android:text="0" android:textSize="30sp" />
    </RelativeLayout>

</LinearLayout> 
```

屏幕：

[链接1](http://i.stack.imgur.com/Bfu7w.jpg)

[链接2](http://i.stack.imgur.com/EuaO1.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:22:12.283

创建文件夹

```
layout-small
layout-large
layout-xlarge 
```

和

```
drawable-hdpi
drawable-xhdpi
drawable-mdpi
drawable-ldpi 
```

你的屏幕尺寸是这样的

xlarge 屏幕至少 960dp x 720dp 大屏幕至少 640dp x 480dp 普通屏幕至少 470dp x 320dp 小屏幕至少 426dp x 320dp

并向您的清单添加权限

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

更多 [支持多屏](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T16:31:30.457

//将此用于您的最后一个 del 和 0 布局。它适用于所有设备以及横向和纵向模式。

```
<RelativeLayout android:layout_width="wrap_content" android:layout_gravity="center"
        android:layout_height="wrap_content" android:gravity="center">
        <Button android:id="@+id/delete" android:layout_width="40dp"
            android:layout_height="wrap_content" android:layout_alignParentRight="true"
            android:layout_alignParentTop="true" 
            android:text="Del" android:textSize="12sp" />
        <Button android:id="@+id/button0" android:layout_width="90dp"
            android:layout_height="wrap_content" android:layout_alignBottom="@+id/delete"
            android:layout_alignParentTop="true" android:layout_toLeftOf="@+id/delete"
            android:text="0" android:textSize="30sp" />
    </RelativeLayout> 
```

# java - SSHJ 和多线程

> ID：11781707
> 
> 赞同：1
> 
> 时间：2012-08-02T16:17:48.613
> 
> 标签：java, sshj

我有一个关于 SSHJ 和多线程的问题。我有一个使用 SSHJ 使用 SSHJ SSHExec 类在远程服务器上执行命令的类，它是线程的扩展。我这样做是因为某些远程命令可能需要一段时间才能运行，并且我想并行运行它们，因为它们不会相互影响。

因此，在我的设置中，我有可以启动多个版本的 class_B 的 class_A，这是执行 SSH 命令的程序。当我将 class_A 配置为仅启动 class_B 的一个实例时，一切正常。但是，当我将 class_A 配置为启动多个 class_B 实例时，它会失败并出现以下错误。

```
Aug 2, 2012 12:08:44 PM backup.SSHExec run
SEVERE: null
net.schmizz.sshj.transport.TransportException: Unexpected: SSH_MSG_UNIMPLEMENTED
    at net.schmizz.sshj.transport.TransportException$1.chain(TransportException.java:33)
    at net.schmizz.sshj.transport.TransportException$1.chain(TransportException.java:27)
    at net.schmizz.concurrent.Promise.deliverError(Promise.java:95)
    at net.schmizz.concurrent.Event.deliverError(Event.java:72)
    at net.schmizz.concurrent.ErrorDeliveryUtil.alertEvents(ErrorDeliveryUtil.java:34)
    at net.schmizz.sshj.transport.TransportImpl.die(TransportImpl.java:576)
    at net.schmizz.sshj.transport.Reader.run(Reader.java:79)
Caused by: net.schmizz.sshj.common.SSHException: [PROTOCOL_ERROR] Unexpected: SSH_MSG_UNIMPLEMENTED
    at net.schmizz.sshj.AbstractService.notifyUnimplemented(AbstractService.java:66)
    at net.schmizz.sshj.transport.TransportImpl.gotUnimplemented(TransportImpl.java:555)
    at net.schmizz.sshj.transport.TransportImpl.handle(TransportImpl.java:490)
    at net.schmizz.sshj.transport.Decoder.decode(Decoder.java:127)
    at net.schmizz.sshj.transport.Decoder.received(Decoder.java:195)
    at net.schmizz.sshj.transport.Reader.run(Reader.java:72)
Exception in thread "Thread-18" java.lang.NullPointerException
    at java.io.Reader.<init>(Reader.java:61)
    at java.io.InputStreamReader.<init>(InputStreamReader.java:55)
    at backup.StreamReader.run(StreamReader.java:86)
Exception in thread "Thread-17" java.lang.NullPointerException
    at java.io.Reader.<init>(Reader.java:61)
    at java.io.InputStreamReader.<init>(InputStreamReader.java:55)
    at backup.StreamReader.run(StreamReader.java:86)
Aug 2, 2012 12:08:44 PM backup.SSHExec run
SEVERE: null
net.schmizz.sshj.transport.TransportException: socket closed
    at net.schmizz.sshj.transport.TransportImpl.init(TransportImpl.java:164)
    at net.schmizz.sshj.SSHClient.onConnect(SSHClient.java:671)
    at net.schmizz.sshj.SocketClient.connect(SocketClient.java:71)
    at net.schmizz.sshj.SocketClient.connect(SocketClient.java:77)
    at net.schmizz.sshj.SocketClient.connect(SocketClient.java:103)
    at backup.SSHExec.run(SSHExec.java:73)
    at backup.SSHExec.exec(SSHExec.java:42)
    at backup.BackupExec2.copyPrevBackup(BackupExec2.java:335)
    at backup.BackupExec2.run(BackupExec2.java:164)
Caused by: java.net.SocketException: socket closed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at java.net.SocketInputStream.read(SocketInputStream.java:182)
    at net.schmizz.sshj.transport.TransportImpl.init(TransportImpl.java:158)
    ... 8 more
Exception in thread "Thread-23" java.lang.NullPointerException
    at java.io.Reader.<init>(Reader.java:61)
    at java.io.InputStreamReader.<init>(InputStreamReader.java:55)
    at backup.StreamReader.run(StreamReader.java:86)
Exception in thread "Thread-24" java.lang.NullPointerException
    at java.io.Reader.<init>(Reader.java:61)
    at java.io.InputStreamReader.<init>(InputStreamReader.java:55)
    at backup.StreamReader.run(StreamReader.java:86) 
```

在线程中启动多个 SSHExec 会话是否有问题？如果不是，我可能做错了什么？

# javascript - D3 排序函数总是传递未定义的参数

> ID：11781710
> 
> 赞同：7
> 
> 时间：2012-08-02T16:18:09.323
> 
> 标签：javascript, svg, d3.js

使用 D3 2.4.2，我创建了许多路径元素，如下所示：

```
for (var i = 0; i < pathIndices.length; i++) {
  graph.append("svg:path")
    .style("stroke", colors[pathIndices[i]])
    .style("stroke-width", "2.5px")
    .style("fill", "none")
    .attr("class", PATH_CLASS)
    .attr("id", PATH_ID_PREFIX + pathIndices[i])
    .attr("d", lineFunc(data))[0];
} 
```

它们都按预期绘制到屏幕上。稍后，当用户进行一些输入时，我想将其中一个放在前面，所以我有一个事件处理程序来执行此操作：

```
var pathToHighlight = selectPath(pathIndex);
var paths = d3.selectAll("." + PATH_CLASS);
paths.sort(
  function(a, b) {
    if (a === pathToHighlight) {
      return -1;
    }
    else if (b === pathToHighlight) {
      return 1;
    }
    else {
      return 0;
    }
  }
); 
```

在 Chrome 中设置断点表明我这里的路径选择是成功的（`paths`是 SVGPathElements 的数组）。但是代码什么也不做，并且在 sort 函数中设置断点表明了这一点`a`并且`b`始终未定义。进入 d3 代码，我看到当内部函数`d3_selection_sortComparator`使用适当的参数调用我的比较器时，除了它们与自己的未定义`__data__`成员进行与运算，这会导致`undefined`传入：

```
// a and b are correct, but a.__data__ and b.__data__ are undefined
return comparator(a && a.__data__, b && b.__data__); 
```

我在这里做错了什么？我的路径正确地绘制到屏幕上，所以看起来它们应该有正确的数据。正确的？

编辑：图片：

![路径内容](../Images/7981bdec544da708aab126ea925aa5dd.png)

![参数 a 和 b 未定义](../Images/aef9440cb1783297b301c76c230111ad.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-04T13:29:33.253

[`selection.sort`](https://github.com/mbostock/d3/wiki/Selections#sort)当它听起来像你期待的时候你正在使用[`Array.sort`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)。该`selection.sort`方法用于根据绑定到元素和的*数据*对选择进行排序。如果您的元素没有绑定到它们的数据，那么这将不起作用。如果您想根据其他内容对选择进行排序（例如测试一个元素引用是否等于另一个），您应该在调用之前从选择中获取元素数组，如下所示：`a``b``.sort()`

```
// `paths` is a Selection
var paths = d3.selectAll("." + PATH_CLASS);
// `pathElements` is an Array
var pathElements = paths[0];

pathElements.sort(function(a,b) {
  // now `a` and `b` are Element references
  // ...
}) 
```

然后，您将不得不采取额外的步骤，将 DOM 顺序与结果数组的顺序相匹配。

也就是说，如果你只是想把它带到`pathToHighlight`最前面，一个更好的方法就是将单个元素重新附加到 DOM 中。

如果`pathToHighlight`是一个选择，你会这样做：

```
var el = pathToHighlight.node();
el.parentNode.appendChild(el); 
```

或者，如果它已经是 Element 引用，您可以这样做：

```
pathToHighlight.parentNode.appendChild(pathToHighlight); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T12:08:04.467

正如@jshanley 提到的，您选择的元素没有绑定任何数据（__data__ 属性未定义）。传递给 selection.sort 的函数将接收绑定到元素的数据，在您的情况下它是未定义的。

您可以使用 datum() 函数将所选元素绑定到数据。

尝试这个：

```
paths.datum(function () { return this };).sort(...) 
```

这会将元素绑定到自身，您将能够在排序函数中引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:34:18.357

您可以尝试`.datum()`使用功能代替`.__data__`吗？

[https://github.com/mbostock/d3/wiki/Selections#wiki-datum](https://github.com/mbostock/d3/wiki/Selections#wiki-datum)

> selection.datum([value])
> 获取或设置每个选定元素的绑定数据

# web-services - 没有收到任何回应。请求无法打开或请求超时（对于 POST 请求）

> ID：11781711
> 
> 赞同：1
> 
> 时间：2012-08-02T16:18:12.880
> 
> 标签：web-services, rest, post, restful-url, poster

我有一个请求，当我使用 POSTMAN 和 POSTER 插件点击服务时，它工作正常，但是当我尝试点击负载平衡 url 时，我收到了错误。

**海报**（插件）中的错误：

![在此处输入图像描述](../Images/9c6a3f0cbdc72bbb89dcbdadc684fdd8.png)

**邮递员**（插件）中的错误：

![在此处输入图像描述](../Images/f1ce72e71f39baa36b9462b9e5be2782.png)

*部分代码：*

```
@Path( "/" )
public class Check {
     public ResultSet rs;

     @POST
     @Produces( MediaType.TEXT_PLAIN )
     @Consumes( "application/xml" )
     public String validate( String xmlContent ) throws Exception {
          String value = "no";
          String result = null;
          Boolean inputCheck;

          Contents unmarshalledValues = unmarshalingContent( xmlContent ); 
```

**MIME 类型详细信息：**

那么，MIME 类型的 xml

[http://annevankesteren.nl/2004/08/mime-types](http://annevankesteren.nl/2004/08/mime-types)

**使用 XML 的示例**

[http://docs.oracle.com/javaee/6/tutorial/doc/gkknj.html](http://docs.oracle.com/javaee/6/tutorial/doc/gkknj.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:35:30.463

嗨@MadD你可以这样尝试吗？

```
@Path("/upload")
public class Check {

     @POST
     @Consumes(MediaType.APPLICATION_OCTET_STREAM)
     public Response validate(InputStream input) {
           ...
           return Response.ok().build();
     }
     ...
} 
```

希望这些有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T22:23:28.097

好吧，我有 JAXRS 到 un-marshaller xml，所以我删除了

```
@Consumes 
```

有效 ：）

# javascript - 在可排序的 JQuery UI 列表中保留至少一项

> ID：11781712
> 
> 赞同：2
> 
> 时间：2012-08-02T16:18:13.517
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我有两个连接的可排序列表。我不希望用户能够将列表留空。他们必须始终在列表中至少有一项。

我试图做一些很长的事情：

```
 $( "#unused, #used" ).sortable( {
        connectWith: ".connectedSortable", 
        placeholder: "placeholder",
        items: "li:not(:only-child)"
        }).disableSelection(); 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:36:45.880

使用[取消](http://jqueryui.com/demos/sortable/#option-cancel)选项而不是[items](http://jqueryui.com/demos/sortable/#option-items)：

```
$( "#unused, #used" ).sortable( {
    connectWith: ".connectedSortable", 
    placeholder: "placeholder",
    cancel: "li:only-child"
}); 
```

当可排序列表中只剩下一个项目时，此选项将阻止排序。

[在此处](http://jsfiddle.net/VPNP4/1/)查看一个工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:29:21.963

我认为这可能是您对`:not`vs的使用，`not()`但不能肯定地说。有时，整体选择器可能会很痛苦，因为您尝试将它们映射出来以满足各种需求。

尝试`$(this + 'li').not(':only-child')`

如果那不起作用，请尝试

`$(this + 'li:not:only-child')`

# java - JTable 中 fireTableDataChanged 的 奇怪行为

> ID：11781715
> 
> 赞同：3
> 
> 时间：2012-08-02T16:18:32.507
> 
> 标签：java, swing, events, jtable, abstracttablemodel

到目前为止，我对 JTable 的定义如下：

```
 JTable table = new JTable(model) {
        @Override
        public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
            Component c = super.prepareRenderer(renderer, row, column);
            TradeTableModel model = (TradeTableModel) getModel();
            if ((Boolean) model.getValueAt(row, model.findColumn("Select"))) {
                Side s = (Side) model.getValueAt(row, model.findColumn("Side"));
                if (s == Side.BUY)
                    c.setBackground(Color.BLUE);
                else
                    c.setBackground(Color.red);
            }
            else {
                c.setBackground(Color.white);
            }
            return c;
        }
    }; 
```

这是为了确保行将根据选择布尔列值改变颜色。在我`AbstractTableModel`指定的设置值方法如下：

```
public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    assert columnIndex == 5;

    try{
        Selectable t = trades.get(rowIndex);
        t.setSelected((Boolean)aValue);
        fireTableDataChanged();
        //fireTableCellUpdated(rowIndex, columnIndex);
    }
    catch(Exception  e){
        throw new IllegalArgumentException("Object to set was not subtype of boolean");
    } 
```

}

如果我使用`fireTableDataChanged()`颜色会在我单击 gui 上的复选框时更新。但是，我真的很想发送，`fireTableCellUpdated(rowIndex, columnIndex)`因为其他处理程序需要知道单元格的位置。但是，在这种情况下，只有当我单击表中的其他行时，该行才会更改，就好像它被延迟并等待其他事件发生一样。

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:22:48.940

*   必须通知正确的方法，`fireTableCellUpdated(row, col);`

*   有关[AbstractTableModel 和 prepareRenderer](https://stackoverflow.com/a/6901508/714968) 及其方法的更多信息，请阅读评论`@camickr`

*   看看过滤或排序`convertXxxToModel`的情况`JTable`，ei

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T18:33:13.027

您的（看不见的）`TableModel`应按`fireTableXxxXxxx()`要求通知所有听众。`DefaultTableModel`自动执行此操作；`AbstractTableModel`应该这样做`setValueAt()`。一个这样的监听器是表本身。如果“其他处理程序需要知道单元格的位置”，[他们](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange)可以`TableModelEvent`通过`addTableModelListener()`. 他们还可以根据需要侦听[*用户选择*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)。

# algorithm - 数组中最常见的元素/确定性地在 O(n) 时间和 O(1) 空间中找到相对多数？

> ID：11781720
> 
> 赞同：10
> 
> 时间：2012-08-02T16:18:53.563
> 
> 标签：algorithm, data-structures

例如，数组的答案：

1、11、3、95、23、8、1

将是 1，因为所有其他元素只出现一次，而 1 出现两次。

我在 stackoverflow 上看到的许多与此问题类似的问题都要求找到绝对多数（答案在长度为 n 的数组中至少出现 n/2），或者使用排序或哈希表回答问题。前者不是我要的，后者要么太慢（ O(n log n) 用于排序），要么使用太多内存（ O(n) 用于哈希表）。

这样的算法存在吗？如果不是，是否有证据表明为什么这是不可能的？包括一个来源会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:47:27.120

使用这里的想法：

[我们如何在 O(n) 时间和 O(1) 空间复杂度内找到数组中的重复数](https://stackoverflow.com/questions/7370978/how-can-we-find-a-repeated-number-in-array-in-on-time-and-o1-space-complexit)

并应用类似于[计数排序](http://en.wikipedia.org/wiki/Counting_sort)的技术。也就是说，创建 N 个 bin（一个大小为 N 的数组），其中 N 是您期望遇到的最大整数。这仍然是 O(1) 空间。然后，在 O(n) 时间内遍历原始数组，当遇到值*i*时，将索引*i*处的结果数组增加1。然后，遍历结果数组（再次 O(1) 时间），找到最大单值。该值的索引将是原始列表中最常见的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-16T00:37:48.633

这不是一个完整的答案，但它应该有助于阐明为什么这个问题很困难。

考虑我们想要设计一种算法，它对数组进行一次扫描（以某种顺序）以找到最常见的元素。在我们的算法运行期间，允许保留一些数据结构`S`。让我们看看 中有多少信息`S`，因此我们是否可以将它包含在`O(1)`内存中。

假设我们的算法已经处理`k`了数组的第一个元素。现在`S`可以告诉我们范围内最常见的元素`a[0..k]`。但是，假设我们知道`k+1`'st 元素，那么我们也会知道 range 中最常见的元素`a[0..k+1]`。如果不能，如果`n`是，我们的算法将无法工作`k+1`。更一般地说，给定元素`a[k..m]`和的知识`S`，我们知道 中最常见的元素`a[0..m]`。

我们可以使用上述参数从 中提取信息`S`。假设我们正在使用范围内的整数`[0,u]`（如果原始数组占用空间，则必须有一些范围`O(n)`）。如果最初最常见的元素是`5`，那么我们添加`0`'，直到最常见的元素发生变化。如果取`c`零，`a[0..k]`则必须包含比'`c`更多的'。重复这个论点，我们得到了很多线性方程，我们可以求解这些方程来准确判断每个元素在 中出现的次数。`5``0``[0,u]``a[0..k]`

这告诉我们，任何进行扫描的数据结构都可能存储所有可见元素的计数（以某种压缩方式）。如果您对数学感兴趣，那么看到`n`数字后存储的就是将无法区分的项目划分为可区分的箱`log(n+u-1 choose n)`的方式数量的日志。这还不止。`n``u``log(u^n/n!) >= nlogu-nlogn`

**结论**：任何只执行一次数组传递的算法都必须使用尽可能多的内存来存储到目前为止看到的所有计数。如果`n`比较小，`u`则对应于存储`n`字的内存。

（好吧，我们也可以覆盖现有的数组，而不是额外的内存）。

这里还有很多值得探索的地方。例如，多次传递如何影响上述参数。但是我认为我应该在这一点上停下来:)，但在我看来，任何具有大的线性时间算法都不太可能`u`摆脱`O(1)`额外的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-09T12:17:35.930

如果你想有固定的空间来找到最常见的元素，你需要有一个元素的最大位数。如果您不这样做，那么大型输入数组可能具有更大的输入数字，以便表示数字的位大于您存储结果的固定空间。

假设`k`是您支持的最大数的长度。如果您尝试天真地创建一个`2^k`桶数组来计算每个数字的出现次数（计数器排序），您可能会收到一个由相同数字组成的数组，在这种情况下，您的算法最终需要`log(n)`空间来存储总和。[*]

如果我们看一个更简单的问题版本 - 确定输入中是否有更多`1`' 或`0`' ，我认为您需要一个堆栈来执行此操作（您存储多少`1`或`0`领先），因此是恒定的空间是不可能的，即使我们将输入长度限制为`k = 1`位大小。

您的问题更普遍（`k > 1`，但仍然是固定的），并且还需要非常量的空间，所以这是不可能的，因为问题的措辞。

[*] 如果您假设计数器具有`O(1)`空间复杂性，那么您可以采用计数器排序方法，尽管这样做您已经为输入数组的最大大小设置了一个上限（这可能是也可能不是可接受的）：就 而言`k`，数组的输入元素的`c`最大位数以及计数器中的最大位数，您的数组最多可以包含`2^k * 2^c`元素（其中一个计数器会在下一个元素上溢出）。为了解决这个问题，您可以添加一个`O(1)`时间步来减少您的计数器，以便如果所有计数器都不是，则最小值总是`0`在处理每个元素之后`0`，从而使它们相对而不是绝对。这需要`O(1)`时间，因为如果所有元素都不为零，则只需要在每个元素上执行它时递减`O(2^k) = O(1)`计数器。`1`虽然该算法现在可以处理一些任意大的输入，但任何具有子数组的输入数组都有两个值`a`，并且对于某些输入`b`，`count(a) - count(b) > 2^c = max(counter)`使用计数器策略将失败。事实上，依赖`O(1)`空间复杂度计数器方法的结果是，所有以相同元素开头的数组`2^c + 1`都不能由该算法处理。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-04-09T12:00:26.517

这是我读取数组中最常见元素的脚本

```
<?php

class TestClass {

    public $keyVal;
    public $keyPlace = 0;

    //put your code here
    public function maxused_num($array) {
        $temp = array();
        $tempval = array();
        $r = 0;
        for ($i = 0; $i <= count($array) - 1; $i++) {
            $r = 0;
            for ($j = 0; $j <= count($array) - 1; $j++) {
                if ($array[$i] == $array[$j]) {
                    $r = $r + 1;
                }
            }
            $tempval[$i] = $r;
            $temp[$i] = $array[$i];
        }
        //fetch max value
        $max = 0;
        for ($i = 0; $i <= count($tempval) - 1; $i++) {
            if ($tempval[$i] > $max) {
                $max = $tempval[$i];
            }
        }
        //get value 
        for ($i = 0; $i <= count($tempval) - 1; $i++) {
            if ($tempval[$i] == $max) {
                $this->keyVal = $tempval[$i];
                $this->keyPlace = $i;
                break;
            }
        }

        // 1.place holder on array $this->keyPlace;
        // 2.number of reapeats $this->keyVal;
        return $array[$this->keyPlace];
    }

}

$catch = new TestClass();
$array = array(1, 1, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 3, 1, 2, 3, 1, 1, 2, 5, 7, 1, 9, 0, 11, 22, 1, 1, 22, 22, 35, 66, 1, 1, 1);
echo $catch->maxused_num($array); 
```

# android - android：如何显示TableLayout的边框

> ID：11781723
> 
> 赞同：2
> 
> 时间：2012-08-02T16:19:09.103
> 
> 标签：android, tablelayout

我如何突出显示表格布局的边框...我使用具有形状作为背景的roundshape.xml 必须有某种方法可以在表格布局周围设置边框...

圆形.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <corners android:radius="5dip" />

    <gradient
        android:angle="270"
        android:endColor="@color/WhiteSmoke"
        android:startColor="@color/WhiteSmoke"
        android:type="linear" />

</shape> 
```

白烟 =#F5F5F5

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="400dp"
        android:layout_height="400dp"
        android:background="@drawable/roundshape"
         >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:25:45.840

我认为这可能会帮助你..通过代码你会找出诀窍

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="400dp"
        android:layout_height="400dp"
        android:background="@drawable/roundshape" >

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:background="#ff9" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="1px"
                android:text="" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="this is amazing" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:background="#ff9" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="1px"
                android:text="" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="this is amazing" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:background="#ff9" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="1px"
                android:text="" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="this is amazing" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:background="#ff9" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="1px"
                android:text="" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="this is amazing" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:background="#ff9" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="1px"
                android:text="" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:30:42.330

这里已经有一篇关于这个的非常相似的帖子。

> 从大卫杰西
> 
> 我对这个问题的解决方案是在每个单元格的背景字段上放置一个 xml 可绘制资源。通过这种方式，您可以为所有单元格定义一个带有所需边框的形状。唯一的不便是极端单元格的边框的宽度是其他单元格的一半，但如果您的表格填满整个屏幕也没问题。

[这是对该资源的参考。](https://stackoverflow.com/a/7379990/427763)

# c++ - 使用placement new操作符时我真的需要担心对齐吗？

> ID：11781724
> 
> 赞同：26
> 
> 时间：2012-08-02T16:19:09.783
> 
> 标签：c++, g++, memory-alignment, powerpc, placement-new

我读了这篇文章 [我什么时候应该担心对齐？](https://stackoverflow.com/questions/6474316/when-should-i-worry-about-alignment)但我仍然不知道我是否必须担心放置 new 运算符返回的未对齐指针 - 就像在这个例子中一样：

```
class A {
public:
   long double a;
   long long b;
   A() : a(1.3), b(1234) {}
};

char buffer[64];

int main() {
   // (buffer + 1) used intentionally to have wrong alignment
   A* a = new (buffer + 1) A(); 
   a->~A();
} 
```

`__alignof(A) == 4`,`(buffer + 1)`不与 对齐`4`。但一切正常 - 完整的例子在这里：http: [//ideone.com/jBrk8](http://ideone.com/jBrk8)

如果这取决于架构，那么我正在使用：linux/powerpc/g++ 4.xx

[更新]在发布这个问题后，我读了这篇文章：http: [//virtrev.blogspot.de/2010/09/memory-alignment-theory-and-c-examples.html](http://virtrev.blogspot.de/2010/09/memory-alignment-theory-and-c-examples.html)。也许在我的情况下唯一的缺点是性能损失，我的意思是未对齐的访问成本超过对齐？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-02T16:57:47.350

当您在缓冲区上调用placement new 时：

```
A *a = new (buf) A; 
```

`void* operator new (std::size_t size, void* ptr) noexcept`您正在调用中定义的内置：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 18.6.1.3 安置表格 [new.delete.placement]
> 
> 这些函数是保留的，C++ 程序可能不会定义取代标准 C++ 库 (17.6.4) 中的版本的函数。(3.7.4) 的规定不适用于 operator new 和 operator delete 的这些保留放置形式。
> 
> `void* operator new(std::size_t size, void* ptr) noexcept;`
> 回报：`ptr`。
> 备注：故意不执行其他动作。

*(3.7.4)*的规定包括返回的指针应该适当对齐，所以`void* operator new (std::size_t size, void* ptr) noexcept`如果传入一个未对齐的指针就可以了。但这并不能让*你*摆脱困境，但是：

> ### 5.3.4 新 [expr.new]
> 
> [14] 注意：当分配函数返回一个非空值时，它必须是一个指向已为对象保留空间的存储块的指针。假定存储块已适当对齐并具有请求的大小。

因此，如果您将未对齐的存储传递给放置新表达式，则您违反了存储已对齐的假设，结果是 UB。

* * *

事实上，在你上面的程序中，如果你`long long b`用`__m128 b`(after `#include <xmmintrin.h>`) 替换，那么程序会出现段错误，正如预期的那样。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-02T16:22:43.770

仅仅因为一切看起来都有效，并不意味着它*确实有效*。

C++ 是一种规范，它定义了工作*所需*的内容。编译器还可以使不需要的东西工作。这就是“未定义行为”的含义：任何事情都可能发生，因此您的代码不再可移植。

C++ 不需*要这样做*。所以，如果你把你的代码带到一个编译器上，但编译器还是不行，你就不能再责怪C++了。滥用语言是你的错。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T16:22:58.647

是的，这完全取决于架构，可能还取决于编译器优化标志。`A b = a;`在您这样做或其他一些随机访问被编译为某些[`movdqa`](http://www.jaist.ac.jp/iscenter-new/mpc/altix/altixdata/opt/intel/vtune/doc/users_guide/mergedProjects/analyzer_ec/mergedProjects/reference_olh/mergedProjects/instructions/instruct32_hh/vc183.htm)操作并且您的程序崩溃之前，它都会正常工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-02T16:26:20.957

某些处理器肯定会因此而崩溃（例如 sparc），其他处理器则根本不在乎，其他处理器会很慢。C++ 假设您知道自己在做什么（或不知道），与 reinterpret_cast 等相同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-02T16:26:22.347

一个快速的 google 告诉我 powerpc 上的 gcc 有一个选项来告诉编译器是否由系统处理未对齐的访问。

我会假设在任何一种情况下，该平台上的未对齐访问都会非常慢，应该尽可能避免。

# android - Android上HTTPS连接的未知协议错误

> ID：11781727
> 
> 赞同：10
> 
> 时间：2012-08-02T16:19:18.587
> 
> 标签：android, rest, ssl, https, openssl

我在 android 应用程序上使用 HTTPS 调用 REST 服务。我已经有这方面的工作代码，但现在我使用的是新安装的托管 REST 服务的服务器，我无法再建立连接。

这是一个例外：

```
javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x15b7768: Failure in SSL library, usually a protocol error
error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol (external/openssl/ssl/s23_clnt.c:683 0x402e5cc3:0x00000000) 
```

该应用程序使用 Apache 类与 REST 服务进行交互。即使使用接受任何类型证书的虚拟 TrustManager，我也会收到此错误。

从 Android Navigator 调用 REST 服务时，连接已成功建立并且工作正常。

Android 手机运行 HTC 最新的 4.0.3 Android。

REST 服务是 Apache 上的托管 mod_perl 应用程序，配置了 SSL 支持。

[在https://github.com/android/platform_external_openssl/blob/ics-mr0/ssl/s23_clnt.c](https://github.com/android/platform_external_openssl/blob/ics-mr0/ssl/s23_clnt.c)浏览 OpenSSL 源代码除了低级问题之外没有给我任何提示。

关于如何进一步调试的任何建议？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-06T11:57:52.540

好的，我发现了问题所在。

按照使用 OpenSSL s_client 的建议，它让我意识到我为连接使用了错误的端口号。新服务器使用的是标准 SSL 端口，而我之前使用的另一台服务器并非如此。

由于服务器没有根据 SSL 协议响应，因此 OpenSSL 无法对响应进行有意义的解码，因此`Unknown Protocol Error`.

对于想知道我如何使用 OpenSSL s_client 的人（在你的 shell 中）：

```
$ openssl s_client -connect myhost.example.com:443 -tls1 -servername myhost.example.com 
```

该`-servername`选项征用[服务器名称指示 (SNI)](https://en.wikipedia.org/wiki/Server_Name_Indication)以确保在服务器上托管多个站点时服务器提供正确的证书。SNI 是 TLS 1.0（及更高版本）选项，`-tls1_1`并且`-tls1_2`通常也可以工作。

然后会显示有关刚刚打开的 SSL 连接的大量信息。

# php - 使用 fwrite 替换文件内容

> ID：11781731
> 
> 赞同：1
> 
> 时间：2012-08-02T16:19:36.630
> 
> 标签：php

每次刷新页面时，我都会尝试将数据写入 php 文件。下面的代码成功写入文件，但是第一次重写后文件内容保持不变，即使每次刷新页面时用于写入文件的数组中包含的数据都不同。

我的问题是：如何重写或替换已经存在的 .php 文件的内容？

我试图`unlink('../html/freesample2.php');`通过删除“写入”文件然后重新创建它来解决这个问题，但它没有帮助。

我很感激任何建议。

```
//Create variable for file I want to write to
//second parameter 'a' stands for APPEND
$f = fopen('../html/freesample2.php', 'a') or die('fopen failed');

$php_script= '<?php $free_sample_array_new = Array(); $free_sample_array_new[] = '.$free_sample_array[0].'; $free_sample_array_new[] = '.$free_sample_array[1].'; ?>';

fwrite($f, $php_script);

fclose($f); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:25:22.947

如果要打开文件进行写入，可以`'w'`使用`fopen()`. 如果该文件尚不存在，则将创建该文件，或者将其截断为空，您可以将其写入它，就好像它是新的一样。

或者，您可以使用[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)使操作成为单行。

*旁注：*如果您使用文字值生成 php 代码，请查看[var_export](http://php.net/manual/en/function.var-export.php)函数，这可以大大简化它（使用第二个可选参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T02:59:08.160

如果您在 Windows 上，则必须先关闭 csv 文件（如果在桌面上打开），然后再以“w”模式写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:28:37.823

运行此代码并检查每次刷新后 freesample2.php 是否有新值？

```
<?
$free_sample_array = array(rand());
$f = fopen('../html/freesample2.php', 'w') or die('fopen failed');
$php_script= '<?php $free_sample_array_new = Array(); $free_sample_array_new[] = '.$free_sample_array[0].'; ?>';
fwrite($f, $php_script);
fclose($f);
?> 
```

# c++ - 使用 Qt，如何使用向上或向左的鼠标移动事件调整小部件的大小

> ID：11781734
> 
> 赞同：3
> 
> 时间：2012-08-02T16:19:46.637
> 
> 标签：c++, qt, qt4, qwidget

我有一个`QMainWindow`有一个`QWidget`。出现`QWidget`，并在 的鼠标按下事件中设置其原点`QMainWindow`。然后，在 的鼠标移动事件中`QMainWindow`，设置 的几何形状，以`QWidget`使用户看起来正在在 的顶部绘制一个矩形`QMainWindow`。这就是我的做法：

```
void MyQMainWindow::mousePressEvent(QMouseEvent * E) {
    QPoint pos = e->pos();
    myQWidget->setGeometry(pos.x(), pos.y(), 0, 0);
    myQWidget->show();
}

void MyQMainWindow::mouseMoveEvent(QMouseEvent * e) {
    QPoint pos = e->pos();
    QPoint prv = myQWidget->pos();
    int w = pos.x() - prv.x();
    int h = pos.y() - prv.y();

    myQWidget.setGeometry(prv.x(), prv.y(), w, h);
}

void MyQMainWindow::mouseReleaseEvent(QMouseEvent *) {
    myQWidget.hide();
} 
```

这种方法的问题在于，当我向上拖动鼠标时，或者在我单击的位置左侧。我对`w`和的计算`h`是负数，因此窗口没有正确调整大小（或根本没有调整）。

我意识到向上/向左移动意味着我需要更改小部件的原点，同时通过根据需要增加宽度/高度来保持它的右下角在同一个地方，但我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:56:42.123

我会做这样的事情：

```
 void MyQMainWindow::updateWidgetGeometry()
 {
      if (_initial == QPoint(-1,-1)) {
          return;
      }

      x = qMin(_initial.x(), _current.x());
      y = qMin(_initial.y(), _current.y());
      w = abs(_initial.x() - _current.x());
      h = abs(_initial.y() - _current.y());

      myQWidget.setGeometry(x, y, w, h);    
 } 

 void MyQMainWindow::mousePressEvent(QMouseEvent * E)
 {
      _initial = e->pos();
      _current = e->pos();
      updateWidgetGeometry()
      myQWidget->show();
 } 

 void MyQMainWindow::mouseMoveEvent(QMouseEvent * E)
 {
      _current= e->pos();
      updateWidgetGeometry()
 }

 void MyQMainWindow::mouseReleaseEvent(QMouseEvent *) 
 {
     _current = QPoint(-1,-1);
     _initial = QPoint(-1,-1);
     myQWidget.hide();
 } 
```

在没有编译器的情况下输入了这个。

顺便说一句，您可能还需要 setMouseTracking(true) 以便如果您的鼠标移动事件发生在小部件内，您的 MyQMainWindow 可以处理它。我不确定那一点。

# javascript - 隐藏选定的值元素？我想要一个选择下拉菜单，但它只会显示箭头。所以一切都以相同的方式工作，但不会显示所选/当前值。您唯一可以单击的是小的下拉箭头按钮。这在 jquery/css 中可能吗？

> ID：11781735
> 
> 赞同：1
> 
> 时间：2012-08-02T16:19:53.580
> 
> 标签：javascript, jquery, html, css, select

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:33:44.323

HTML：

```
 <select id="selectshowarrowonly">
        <option value="1">Sample String 1</option>
        <option value="2">Sample String 2</option>
    </select> 
```

​ CSS：

```
 #selectshowarrowonly{width:15px;} 
```

我做了一个小提琴：http: [//jsfiddle.net/M8Zmc/](http://jsfiddle.net/M8Zmc/)

如果您特别想让这个跨浏览器友好，您可以使用自己的图像作为箭头并固定宽度和高度：

CSS：

```
 #selectshowarrowonly{
         width:50px;  
         height:50px;
         -webkit-appearance: none;
         -moz-appearance: none;
          appearance: none;   
          background: url("http://cdn1.iconfinder.com/data/icons/oxygen/48x48/actions/arrow-down.png") no-repeat;    
     } 
```

HTML：

```
 <select id="selectshowarrowonly">
        <option value="1"></option>
        <option value="2">Sample String 1</option>
        <option value="3">Sample String 2</option>
   </select> 
```

再次小提琴在：http: [//jsfiddle.net/M8Zmc/3/](http://jsfiddle.net/M8Zmc/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:28:36.653

我不知道用 javascript 做到这一点的方法，但我认为你可以很容易地让你自己拥有。如果您制作一个向下箭头的图像，当您单击它时，它可以在下方显示选择的所有选项。这与为导航栏创建下拉菜单几乎完全相同。如果您想采用这种方法，您可以查看这个生成器的下拉菜单： http: [//purecssmenu.com/](http://purecssmenu.com/)或者当然也可以编写您自己的代码。

干杯!

# xcode - 代码签名错误：重复证书

> ID：11781745
> 
> 赞同：1
> 
> 时间：2012-08-02T16:20:22.100
> 
> 标签：xcode, certificate, xcode4.3, provisioning

我让我的 iOS 会员资格过期，现在我正试图让一切重新连接起来。

我无法摆脱此错误“代码签名错误：证书身份‘iPhone 开发人员：xxxx xxxx (NUMBERS)’在钥匙串中多次出现。代码签名工具要求只有一个。”

我查看了钥匙串访问。找到“过期”的证书并将其删除。现在我只看到一个开发者证书和一个分发证书。我已重新启动计算机，退出 xcode，退出钥匙串，但无法确定副本在哪里。

我登录到门户网站，证书全部更新。在钥匙串访问中，它抱怨的证书现在的有效期为 2013 年。

我必须删除所有内容并重新开始吗？

任何其他想法在哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:10:46.160

检查存储在 ~/Library/MobileDevice/Provisioning\ Profiles/ 中的配置文件。您可能有一个包含过期证书的旧配置文件。

Xcode 有一个“有用的”行为，可以提取并安装在当前用户的所有配置文件中找到的所有证书到默认钥匙串上。您必须删除旧的无效配置文件，否则它将继续安装相关的（过期）证书。

此外，即使您清理了 Provisioning Profiles 目录，我也看到 Xcode 继续安装旧证书。只需重新启动即可为我解决此问题。

了解 .mobileprovision 文件的便捷工具是[QuickLook for MobileProvision](http://www.macmation.com/blog/2012/07/quicklook-plugin-for-mobileprovision-mountain-lion-ready/)。

# java - 使用 SHA-512 算法创建新的行字符

> ID：11781748
> 
> 赞同：2
> 
> 时间：2012-08-02T16:20:26.037
> 
> 标签：java, hash, sha512

我在 Java 中使用“SHA-512”算法用盐创建哈​​希。问题出在散列字符串中，总是有一个奇怪的字符会中断行，当我打印散列字符串时，它由两行组成。但是当我使用 SHA-256 时，它会更短，并且没有换行符。

那么为什么我在使用 SHA-512 时得到两条线？

编辑：对不起，我没有提到新行字符在编码字符串中。所以我的散列字符串就像 ".....hvRfXJwYDrnky/uUVzXnxz* *\r\n* *GFDJ+L3A......" 字符 "\r\n" 导致问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:22:58.513

> 问题是在散列字符串中总是有一个奇怪的字符

这*表明*您正在尝试将哈希（这是二进制数据）转换为字符串*，就好像*它已经是编码文本一样，例如

```
// This is bad!
String text = new String(hashBytes); 
```

哈希*不是*编码文本 - 它只是原始二进制数据。要将其表示为字符串，您应该使用 hex 或 base64 之类的东西。对于 base64 转换，您可以使用类似[这个 public domain library](http://iharder.net/base64)的东西。例如：

```
// This won't lose data - it's reversible...
String base64 = Base64.encodeBytes(hashBytes); 
```

当然，如果这*不是*您的代码所做的，那么这个答案是无用的 - 但在这种情况下，请将您的代码发布到您的问题中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T19:09:49.887

啊，那您需要将 Base64 行长度设置为更长的值。Base64 编码器通常有一个最大行长度，之后它们会添加换行符。

`sun.misc.BASE64Encoder`是一种丑陋的编码器。我认为您可以将其子类化并覆盖`bytesPerLine`. 我会使用`org.apache.commons.codec.binary.Base64`，您可以在构造函数中指定行长。

# ruby - @model.map(&:attributes) 和虚拟属性

> ID：11781750
> 
> 赞同：0
> 
> 时间：2012-08-02T16:20:28.753
> 
> 标签：ruby, ruby-on-rails-3, virtual-attribute

我如何使用 @model.map(&:attributes) 来制作它，以便在我将 @model 呈现为 json 时显示虚拟属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:32:54.457

```
@model.to_json(:method => ['virtual_attribute1', 'virtual_attribute2'])) 
```

`map`电话也听不懂

# asp.net - ASP.NET UpdatePanel：是否存在不发送大量视图状态或需要客户端绑定的 UpdatePanel 替代方案？

> ID：11781753
> 
> 赞同：0
> 
> 时间：2012-08-02T16:20:40.787
> 
> 标签：asp.net, ajax, updatepanel, viewstate

就个人而言，我喜欢在服务器上进行所有控件绑定（例如，填充/绑定下拉列表、填充文本框等）。当页面加载时，我将调用绑定页面上所有控件的 BindControls()。当用户更改 UpdatePanel 中的下拉选项时，我将在回发时访问服务器并再次调用 BindControls()。

问题是UpdatePanel 显然来回传递页面的整个视图状态，而不仅仅是UpdatePanel 中控件的视图状态。我不明白为什么会这样，但就速度而言，这是一个相当大的性能损失。

过去，我使用过 Telerik 的 RadAjaxManager，它允许您指定希望将哪些控件的视图状态传递给服务器。它非常完美，因为它不需要客户端代码，并且仍然允许您在服务器上整合所有绑定逻辑，同时保持较小的视图状态传输。

不要误会我的意思：我喜欢 AJAX、Json 和 javascript，但我不喜欢用它执行绑定操作。也就是说，我想找到一种方法来配置 UpdatePanel，以便它只传输特定控件的视图状态或找到一个替代控件，它仍然允许我在服务器上绑定我的控件，然后将更新的 HTML 传递到客户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:37:43.900

不幸的是，在处理 ASP.net 时，很难干净地控制 ViewState 与服务器之间的 ping-ponding 方式。页面生命周期的大部分内容都是围绕 ViewState 构建的，它对于整个平台来说非常重要。

正如 walther 所说，最好的选择是结合使用 jQuery 和 Web 服务来处理您网站上的 AJAX 功能。我可能会避免将功能实现为 Page 方法，因为我相信调用它们需要您每次都将页面置于整个生命周期中。我还建议研究使用 [Knockout.js](http://knockoutjs.com/)和[jQuery 模板](http://api.jquery.com/category/plugins/templates/)来帮助将数据绑定到您的客户端元素。如果组合得当，这些技术可以帮助您创建更丰富的客户端功能，与使用传统的 ASP.net AJAX 控件相比具有更高的性能和更低的维护开销。

采用这些更开放的标准的另一个好处是它们更容易转换到其他网络平台。使用 jQuery 来处理您的 AJAX 意味着如果您需要为运行 PHP 或 MVC 的站点进行开发（如果您想下车），那么您用于创建客户端功能的许多技术或多或少都是相同的重量级 WebForms 平台）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:27:16.517

如果您需要控制，我建议改用 jquery + 页面方法或 Web 服务。过去我一直在使用 UpdatePanels 和各种类似的控件，但出于这样的原因我放弃了它。与学习更新面板等的技巧相比，使用 jquery 来实现所需的行为和性能要容易得多。无论您对技术有多了解，每一层抽象都会增加开销。

# google-apps-script - Google Apps：复制模板表并删除旧表

> ID：11781758
> 
> 赞同：0
> 
> 时间：2012-08-02T16:20:57.083
> 
> 标签：google-apps-script, google-sheets, dashboard

问候stackoverflow社区，

我目前正在尝试使用 Google 电子表格为我的团队构建一个仪表板，以完成他们每周的日常任务。到本周末，团队成员应该“重置”仪表板表，但我在使用以下脚本时遇到了问题。该脚本应复制“模板”表，删除旧仪表板并将新副本重命名为“仪表板”：

```
function resetDashboard() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName('TEMPLATE');
  sheet.copyTo(ss).setName('New Dashboard');
  ss.setActiveSheet(ss.getSheetByName('Dashboard'));
  ss.deleteActiveSheet();
  ss.setActiveSheet(ss.getSheetByName('New Dashboard'));
  ss.renameActiveSheet('Dashboard');
} 
```

注意：“仪表板”工作表是电子表格中唯一可见的工作表。

到目前为止，这个脚本运行良好。当我重新加载电子表格时，它仍在工作。

我的问题是，当我关闭电子表格并从 GoogleDocs 概述中再次打开它时，脚本只会复制“模板”表，但函数的其余部分不再执行。

这是一个错误吗？有没有我可以使用的“更干净”的版本/脚本？

最好的问候，吕迪格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:03:34.843

我认为问题在于“暂时”你有两张同名的床单。重命名之前的一个`SpreadsheetApp.flush()`可能的工作。尝试这个：

```
function resetDashboard() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var newSheet = ss.getSheetByName('TEMPLATE').copyTo(ss);
  ss.setActiveSheet(ss.getSheetByName('Master'));
  ss.deleteActiveSheet();
  SpreadsheetApp.flush(); //this guarantees that the old sheet is deleted before we proceed
  newSheet.setName('Master');
  ss.setActiveSheet(newSheet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:55:31.040

谢谢你的建议`flush()`功能的建议；虽然它没有解决问题，但我发现了我们的两个脚本都不起作用的真正原因（我的脚本实际上也是如此，只是没有注意到）。

这是该`deleteActiveSheet()`功能已报告的问题：

[问题 1298：deleteActiveSheet() 和 copyTo() 需要 .sleep(2000) 才能可靠地工作](http://goo.gl/1Otdg)

目前唯一的解决方法似乎是 Utilities.sleep() 函数；一个例子可以在[这里找到](http://goo.gl/9pmEA)找到。

谢谢你的帮助，这让我明白了这一点。:)

干杯，吕迪格

# mysql - 在从同一个表中选择更新条件时更新记录？

> ID：11781762
> 
> 赞同：0
> 
> 时间：2012-08-02T16:21:10.500
> 
> 标签：mysql, sql

使用 mysql 我正在尝试更新表，同时使用基于从同一个表中选择的条件。这是我在运行更新时遇到的错误：*'您不能在 FROM 子句中指定目标表'订单'进行更新'*

这是我正在运行的查询

```
UPDATE `orders`
   SET order_id = '10000'
 WHERE order_id = (SELECT MAX(order_id) 
                     FROM `orders`
                    WHERE user_id = 4
                  ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:01:42.670

这是最终为我工作的解决方案：

```
UPDATE `orders`
   SET order_id = '10000'
 WHERE order_id IN(SELECT MAX(order_id) 
       FROM (SELECT order_id 
        FROM `orders` WHERE user_id = 4)
        tmp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:34:15.850

您可以这样重写该查询：

```
UPDATE    orders
    SET   order_id = '10000'
    WHERE user_id = 4
    ORDER BY order_id DESC
    LIMIT 1; 
```

如果您的标准比这更复杂，那么解决方法将是别名临时结果集，正如 Usman Tiono 指出的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:30:24.483

尝试使用这个：

```
UPDATE orders SET order_id = '10000'
WHERE order_id = (SELECT tmp.order_id FROM (SELECT MAX(order_id) order_id FROM orders WHERE user_id = 4) AS tmp); 
```

您需要为您的子查询提供一个别名。

# r - tryCatch 和 ggplot

> ID：11781763
> 
> 赞同：8
> 
> 时间：2012-08-02T16:21:12.067
> 
> 标签：r, error-handling, ggplot2, try-catch

我在我的 R 代码中使用`tryCatch`了很多来捕获潜在的错误消息，但我今天遇到了一个奇怪的问题`ggplot`- 我真的不知道发生了什么（即使在 Google/SO 搜索上花了一些时间之后）。

调用不完整的简单示例`ggplot`（未添加层）：

```
> tryCatch(eval(parse(text = 'ggplot(mtcars, aes(x=hp, y=wt))')), error = function(e) e)
Error: No layers in plot 
```

所以错误没有被捕获。甚至更多：我得到一个带有`ggplot`类的 R 对象：

```
> str(tryCatch(eval(parse(text = 'ggplot(mtcars, aes(x=hp, y=wt))')), error = function(e) e))
List of 8
 $ data       :'data.frame':    32 obs. of  11 variables:
  ..$ mpg : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
  ..$ cyl : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...
  ..$ disp: num [1:32] 160 160 108 258 360 ...
  ..$ hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...
  ..$ drat: num [1:32] 3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
  ..$ wt  : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...
  ..$ qsec: num [1:32] 16.5 17 18.6 19.4 17 ...
  ..$ vs  : num [1:32] 0 0 1 1 0 1 0 1 1 1 ...
  ..$ am  : num [1:32] 1 1 1 0 0 0 0 0 0 0 ...
  ..$ gear: num [1:32] 4 4 4 3 3 3 3 4 4 4 ...
  ..$ carb: num [1:32] 4 4 1 1 2 1 4 2 2 4 ...
 $ layers     : list()
 $ scales     :Reference class 'Scales' [package "ggplot2"] with 1 fields
  ..$ scales: NULL
  ..and 20 methods, of which 9 are possibly relevant:
  ..  add, clone, find, get_scales, has_scale, initialize, input, n,
  ..  non_position_scales
 $ mapping    :List of 2
  ..$ x: symbol hp
  ..$ y: symbol wt
 $ options    :List of 1
  ..$ labels:List of 2
  .. ..$ x: chr "hp"
  .. ..$ y: chr "wt"
 $ coordinates:List of 1
  ..$ limits:List of 2
  .. ..$ x: NULL
  .. ..$ y: NULL
  ..- attr(*, "class")= chr [1:2] "cartesian" "coord"
 $ facet      :List of 1
  ..$ shrink: logi TRUE
  ..- attr(*, "class")= chr [1:2] "null" "facet"
 $ plot_env   :<environment: R_GlobalEnv> 
 - attr(*, "class")= chr "ggplot" 
```

有什么想法可以捕捉到这些错误吗？

* * *

*更新*：我知道上面的调用在某些情况下可能没问题（比如稍后添加一个图层）。但是请考虑以下示例（请注意，我们有一个错字：`t`is provided on `y`axis 而不是`wt`）：

```
> tryCatch(eval(parse(text = 'ggplot(mtcars, aes(x=hp, y=t)) + geom_point()')), error = function(e) e)
Error in data.frame(x = c(110, 110, 93, 110, 175, 105, 245, 62, 95, 123,  : 
  arguments imply differing number of rows: 32, 0 
```

我确实收到了错误消息，但这不是由`tryCatch`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T16:40:52.593

发生这种情况是因为错误不会发生在对 的调用中`ggplot`，而是在对 的调用中`print.ggplot`。

所以你的`tryCatch`作品，但错误只会在以后尝试打印时发生。这意味着您必须在语句`tryCatch`周围放置：`print`

试试这个：

```
x <- tryCatch(eval(parse(text = 'ggplot(mtcars, aes(x=hp, y=wt))')), 
              error = function(e) e)
tryCatch(print(x), error = function(e) e)
<simpleError: No layers in plot> 
```

* * *

对于您的第二个示例：

```
x <- eval(parse(text = 'ggplot(mtcars, aes(x=hp, y=t)) + geom_point()'))
tryCatch(print(x), error = function(e) e)

<simpleError in data.frame(x = c(110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180, 205, 215, 230, 66, 52, 65, 97, 150, 150, 245, 175, 66, 91, 113, 264, 175, 335, 109), y = structure(function (x) standardGeneric("t"), generic = structure("t", package = "base"), package = "base", group = list(), valueClass = character(0), signature = "x", default = structure(function (x) UseMethod("t"), target = structure("ANY", class = structure("signature", package = "methods"), .Names = "x", package = "methods"), defined = structure("ANY", class = structure("signature", package = "methods"), .Names = "x", package = "methods"), generic = structure("t", package = "base"), class = structure("derivedDefaultMethod", package = "methods")), skeleton = structure(function (x) UseMethod("t"), target = structure("ANY", class = structure("signature", package = "methods"), .Names = "x", package = "methods"), defined = structure("ANY", class = structure("signature", package = "methods"), .Names = "x", package = "methods"), generic = structure("t", package = "base"), class = structure("derivedDefaultMethod", package = "methods"))(x), class = structure("standardGeneric", package = "methods")),     PANEL = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,     1L, 1L, 1L, 1L, 1L), check.names = FALSE, stringsAsFactors = TRUE): arguments imply differing number of rows: 32, 0> 
```

# ios4 - iPhone 版 cocos2d 水效果

> ID：11781765
> 
> 赞同：0
> 
> 时间：2012-08-02T16:21:17.310
> 
> 标签：ios4, cocos2d-iphone

我正在尝试创建类似于 Tiny Wings（最新版本）中的 2d 水效果。如果您从主菜单进入设置，您将看到我所指的水效果。

在 cocos2d 中实现类似效果的最佳方法是什么？任何链接、书籍、代码片段都会有所帮助。这种效果不需要任何物理模拟。即不使用box2d ...等。它似乎是通过绘制线条来模拟水波效果。然而，确定每一帧顶点位置的算法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:26:18.813

你可以看看[cocos2d effects](http://www.cocos2d-iphone.org/archives/40)，其中你会发现水、液体等效果。

在 cocos2d 发行版中，您还将找到一个测试样本，可以让您进行一些实验。

需要考虑的一件事是这些效果非常消耗 CPU。因此，我开发了一个“优化”版本，它不是 CPU 密集型的，并且在某些情况下效果更好。你可以在我的[github](https://github.com/sdesimone/iOSSnippets/tree/master/cocos2D/SDSFastGrid)上找到它。该版本针对不包含任何子元素的精灵进行了优化，但我针对特定情况开发了它，因此它可能不如 cocos2d 自己的实现那么通用。

# c++ - 这种引用的使用不正确吗？

> ID：11781770
> 
> 赞同：1
> 
> 时间：2012-08-02T16:21:51.760
> 
> 标签：c++, reference, temporary

我有以下代码：

```
std::vector<A>& Get() { return some_object; };

for(int i=0; i<Get().size(); ++i) {
    x->push_back(Get()[i]);
} 
```

但是当我第一次调用 size() 时，我得到了垃圾值。我在想一些临时的被删除了，但我不太确定......有人可以告诉我发生了什么吗？

编辑： my`some_object`是一个静态向量，所以在这个例子中它永远不会被删除

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T16:54:08.237

我建议更换 for 循环。我不相信 for 循环。虫子爬进来的地方太多了。

```
std::vector<A>& v = Get();
x.insert(x.end(), v.begin(), v.end()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:35:19.827

只有两种可能——引用是坏的，或者对象本身是坏的。

由于引用是对静态向量的引用，因此引用似乎不太可能是坏的。静态对象不会消失。

这留下了对象本身。是否有可能在初始化静态对象之前调用该函数？如果它是从另一个静态对象的构造函数中调用的，则可能会发生这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T16:44:34.757

如果您的 for 循环是在全局或静态对象的构造函数的上下文中执行的，那么您将遇到称为[*静态初始化顺序失败*](http://ww.parashift.com/c++-faq/static-init-order.html)(SIOF) 的问题。简而言之，SIOF 意味着我们不能依赖于静态对象的构造顺序。

为了解决这个问题，您可以使用[*第一次使用*](http://www.parashift.com/c++-faq/static-init-order-on-first-use.html)习语的构造。使用这个习惯用法，您可以在第一次需要静态/全局对象时懒惰地构造它们。这确保了在访问它们时将创建相互依赖的静态对象。

对于您的示例，您可以执行以下操作：

```
std::vector<A>& Get()
{
    // 'instance' will be constructed "on demand" the first time this
    // function is called.
    static std::vector<A> instance;
    return instance;
}; 
```

这个技巧也用于实现[单例](http://en.wikipedia.org/wiki/Singleton_pattern)设计模式。

注意：如果你的程序是多线程的，你必须使用这个技巧的一个变种。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T16:23:10.240

仅当`some_object`生命周期仅限于`Get`.

# c# - 未返回 ExecuteStoreQuery 输出参数

> ID：11781771
> 
> 赞同：2
> 
> 时间：2012-08-02T16:22:04.007
> 
> 标签：c#, sql-server, entity-framework, stored-procedures

我有一些实体框架代码来运行返回参数的存储过程。每次我运行代码时，参数都会返回为空。有没有人有任何想法可能导致这种情况？

谢谢

代码：

```
SqlParameter Business = new SqlParameter("Business", Search.Term);
                SqlParameter Location = new SqlParameter("Location", Search.Location);
                SqlParameter PageNumber = new SqlParameter("PageNumber", Search.CurrentPage);
                SqlParameter RecordsPerPage = new SqlParameter("RecordsPerPage", Search.RecordsPerPage);                  

                var TotalRecords = new SqlParameter
                {
                    ParameterName = "TotalRecords",
                    Value = 0,
                    Direction = ParameterDirection.Output                        
                };

                var List = db.ExecuteStoreQuery<ENT_SearchBusinessResult>("exec usp_BusinessUser_Search @Business,@Location,@PageNumber,@RecordsPerPage,@TotalRecords out", Business, Location, PageNumber, RecordsPerPage, TotalRecords); 
```

我使用了 Sql profiler，发现它正在执行以下操作：

```
declare @p7 int
set @p7=53
exec sp_executesql N'exec usp_BusinessUser_Search    @Business,
@Location,@PageNumber,@RecordsPerPage,
@TotalRecords out',
N'@Business  nvarchar(14),@Location nvarchar(14),
@PageNumber int,
@RecordsPerPage int,@TotalRecords int output',
@Business=N'Food 
and Drink',@Location=N'United   Kingdom',@PageNumber=1,@RecordsPerPage=10,
@TotalRecords=@p7 output
select @p7 
```

这很好，如果您运行此查询但没有返回到我的代码，它会显示返回值:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:30:59.483

[这篇文章](http://blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext-api.aspx)说，在尝试访问 out 参数的值之前，您需要阅读所有结果。您的代码不够完整，无法判断您是否正在这样做（如果不是，请尝试 ToList()。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T21:40:40.973

这不一定是真的。这是我的输出参数的工作示例：

```
 private IEnumerable<AppealsGridViewModel> GetDataNew(string sortString, int pageNumber, int pageSize)
                    {
                        var totalRowCount = new SqlParameter
                        {
                            ParameterName = "@TotalRowCount",
                            SqlDbType = SqlDbType.Int,
                            Direction = ParameterDirection.Output
                        };

                        var totalPropertyCount = new SqlParameter
                        {
                            ParameterName = "@TotalPropertyCount",
                            SqlDbType = SqlDbType.Int,
                            Direction = ParameterDirection.Output
                        };

                        var paramList = new object[] {
                            new SqlParameter {ParameterName = "@CompanyId", SqlDbType = SqlDbType.Int, Value = 5}
                            , new SqlParameter {ParameterName = "@AccountId", SqlDbType = SqlDbType.Int, Value = 0}
                            , new SqlParameter {ParameterName = "@IsServiceCenterUser", SqlDbType = SqlDbType.Bit, Value = 0}
                            , new SqlParameter {ParameterName = "@PageNumber", SqlDbType = SqlDbType.Int, Value = (pageNumber + 1)}
                            , new SqlParameter {ParameterName = "@PageSize", SqlDbType = SqlDbType.Int, Value = pageSize}
                            , new SqlParameter {ParameterName = "@SortOrder", SqlDbType = SqlDbType.VarChar, Value = sortString}
                            , totalRowCount
                            , totalPropertyCount
                        };

                        var s = _dataContext.ExecuteStoreQuery<AppealsGridViewModel>("exec atAppealsSearch @CompanyId, @AccountId, @IsServiceCenterUser, @PageNumber, @PageSize, @SortOrder, @TotalRowCount out, @TotalPropertyCount out", paramList).ToList();

                        var appealCount = totalRowCount.Value;
                        var propertyCount = totalPropertyCount.Value;

                        return s;
                    }

            ALTER PROCEDURE [dbo].[atAppealsSearch]
                @CompanyId INT
                , @AccountId INT = 0
                , @IsServiceCenterUser BIT = 0
                , @PageNumber INT = 1
                , @PageSize INT = 25
                , @SortOrder VARCHAR(MAX)
                , @TotalRowCount int OUT
                , @TotalPropertyCount int OUT
                AS

            SELECT @TotalRowCount = 33124
            SELECT @TotalPropertyCount = 555

            EXEC SP_EXECUTESQL @Query 
```

# ruby-on-rails - 如何将大于 5GB 的文件上传到 Amazon S3？

> ID：11781775
> 
> 赞同：5
> 
> 时间：2012-08-02T16:22:28.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前正在使用带有 Carrierwave gem 的 Rails 3.2 将文件上传到 Amazon S3。现在我需要能够处理大于 5GB 的用户提交的文件，同时仍然使用 Carrierwave gem。Carrierwave 或 Fog 是否有任何其他 gem 或分支可以处理 5GB+ 文件上传到 S3？

编辑：我不想重写完整的 Rails 上传解决方案，所以这样的链接无济于事：[https](https://gist.github.com/908875) ://gist.github.com/908875 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T15:28:11.427

我想出了如何做到这一点并让它现在工作。在适当的`config/environment`文件中，添加以下内容以将 100MB 块的文件发送到 Amazon S3：

```
CarrierWave.configure do |config|
  config.fog_attributes = { :multipart_chunk_size => 104857600 }
end 
```

由于雾 gem 内置了多部分上传（感谢 Veraticus 指出），因此只需通过 Carrierwave 将适当的配置属性传递到雾中。发送到 S3 时，我经常收到`Connection reset by peer (Errno::ECONNRESET)`错误，因此可能需要重试部分上传。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T17:24:07.987

您想使用[S3 的分段上传功能](http://docs.amazonwebservices.com/AmazonS3/latest/dev/uploadobjusingmpu.html)。有用的是，Fog 确实可以处理多部分 S3 上传，如您[在此拉取请求](https://github.com/fog/fog/pull/776)中所见。

不幸的是，Carrierwave 似乎没有内置功能来正确使用它。因此，您需要修改 Carrierwave 或手动放入 Fog 以正确上传此文件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T16:24:53.773

在上传之前，您需要将文件分成小块。

**看看以下内容：**

[http://www.ruby-forum.com/topic/1282369](http://www.ruby-forum.com/topic/1282369)

[http://joemiller.me/2011/02/18/client-support-for-amazon-s3-multipart-uploads-files-5gb/](http://joemiller.me/2011/02/18/client-support-for-amazon-s3-multipart-uploads-files-5gb/)

无论哪种方式，您都需要拆分文件。

# javascript - jQuery 成功，访问 HTTP 状态文本

> ID：11781790
> 
> 赞同：0
> 
> 时间：2012-08-02T16:23:22.900
> 
> 标签：javascript, jquery

如果 post 调用成功，我如何访问从服务器返回的原始 HTTP 状态文本。对于错误，`.error`方法中有选项 errorThrown。中是否有模拟参数`.success`？

代码：

```
 $.post(UI.SelectionList.settings.leftReturnURL, {
      delegateId: $(this).data('id')
  }, function (data, text, xhr) {}).success(function() {
      console.log(arguments);
  }); 
```

控制台输出：

```
["", "success", Object] //Object is the jqXHR object, statusText inside is also "success" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:27:14.223

```
$.ajax({
    url: "/",

    success: function(data, textStatus, jQXHR) {
        console.log(jQXHR.status, jQXHR.statusText);
        //200 "OK"
    }
}); 
```

# asp.net - 通过用户复制/粘贴 aspx .net 4.0 创建的页面上显示的奇怪字符

> ID：11781791
> 
> 赞同：3
> 
> 时间：2012-08-02T16:23:28.233
> 
> 标签：asp.net, encoding

我有一个应用程序，用户正在创建一个我们公司向公众发布的“招标项目”，任何人都可以在其中查看然后出价。

当我们的内部用户创建此项目时，他们经常将“工作要求”复制并粘贴到稍后在动态生成的 .html 页面中使用的字段中。

我对某些字符有编码问题，不知道如何让它们正确呈现。

具体来说：

短破折号 ('-') 很好，但长破折号 ('-') 显示如下：-€“</p>

此外，我在使用某些单引号和双引号时遇到了问题，它们给了我这个：â€™、â€“、“€œ 和â€”。

我需要做什么来解决这个问题？该应用程序只是从会话变量中读取此信息，然后我从那里创建 html 页面。我试图把

```
 `<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />` 
```

在头脑中，但这无济于事。我也尝试过（在黑暗中刺伤）将字符串输入字节数组并将数组编码为 UTF-8（认为它可能来自源代码？），但这也没有帮助。页面呈现后，我检查编码并以西欧 (ISO) 显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:29:48.203

当用户输入某个字符时，您将需要找到一种打印原始 HTML 字符代码的方法。对于 EM 破折号，使用`&#8212;`等。

# mysql - VB.net 到 MySql 存储过程错误

> ID：11781793
> 
> 赞同：1
> 
> 时间：2012-08-02T16:23:57.713
> 
> 标签：mysql, vb.net

我是存储过程的新手，所以我可能会遗漏一些简单的东西，但我研究了基础知识，并且试图将它与 vb.net 代码集成。我创建了一个简单的存储过程（我认为），它只为今天的结果运行数据查询：

* * *

-- 例程 DDL -- 注意：例程正文前后的注释不会被服务器存储

* * *

```
DELIMITER $$

CREATE DEFINER=`root`@`%` PROCEDURE `GetRuntestToday`()
BEGIN

Select * From runtest.runtest_records where
Test_Date=CURDATE()
order by test_date desc, Convert(test_time_stop,DECIMAL(5,2)) desc;

END 
```

当我登录到主 MySql 数据库并尝试从 MySql 提示符运行它时，它似乎工作正常。我只需键入`call runtest.GetRuntestToday();`，它就会以命令提示符文本形式返回 59 行数据。

我编写了一个 VB.net 程序来尝试获取相同的数据，但我不断收到错误消息。错误异常详细信息是：

```
System.Data.Odbc.OdbcException was unhandled
  ErrorCode=-2146232009
  Message="ERROR [42000] [MySQL][ODBC 5.1 Driver][mysqld-5.1.51-community-log]You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'GetRuntestToday' at line 1"
  Source="myodbc5.dll"
  StackTrace:
       at System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode)
       at System.Data.Odbc.OdbcCommand.ExecuteReaderObject(CommandBehavior behavior, String method, Boolean needReader, Object[] methodArguments, SQL_API odbcApiMethod)
       at System.Data.Odbc.OdbcCommand.ExecuteReaderObject(CommandBehavior behavior, String method, Boolean needReader)
       at System.Data.Odbc.OdbcCommand.ExecuteReader(CommandBehavior behavior)
       at System.Data.Odbc.OdbcCommand.ExecuteReader()
       at MySqlHelper.mMain.DoMyStoredProcedure() in C:\vss\MySqlHelper\MySqlHelper\mMain.vb:line 2642
       at MySqlHelper.mMain.Main() in C:\vss\MySqlHelper\MySqlHelper\mMain.vb:line 29
       at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

我正在运行的代码是：

```
Public Sub DoMyStoredProcedure()

    Dim MyConString As String = "My String Details"
    Dim dbcRuntest As New OdbcConnection(MyConString)

    Dim cmd As New OdbcCommand
    Dim reader As OdbcDataReader

    cmd.CommandText = "GetRuntestToday"
    cmd.CommandType = CommandType.StoredProcedure
    cmd.Connection = dbcRuntest

    dbcRuntest.Open()

    reader = cmd.ExecuteReader()

    dbcRuntest.Close()
End Sub 
```

错误发生在线：

```
reader = cmd.ExecuteReader() 
```

我错过了什么？我没有看到任何语法问题，并且存储过程可以在命令提示符下运行。我已经玩了一些 DELIMITER 的东西使它//而不是 $$ 但似乎没有什么可以解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:19:15.527

您可以尝试更改为直接调用（我还没有测试过这个：

```
 cmd.CommandType = CommandType.Text
 cmd.CommandText = "CALL GetRuntestToday" 
```

此外，编写代码的更好方法：

```
Dim MyConString As String = "My String Details"
Using dbcRuntest As New OdbcConnection(MyConString)
  dbcRuntest.Open()
  Using cmd As New OdbcCommand("CALL GetRuntestToday", dbcRuntest)
    cmd.CommandType = CommandType.Text
    Using reader As OdbcDataReader = cmd.ExecuteReader
      'do someting with reader'
    End Using
  End Using 
End Using 
```

该`Using`结构会自动关闭连接并处理它（连同其他对象）。

**编辑为使用 CALL 而不是 EXECUTE**

# windows - 在任务管理器中查找windows进程的名称以将其杀死

> ID：11781794
> 
> 赞同：0
> 
> 时间：2012-08-02T16:23:59.757
> 
> 标签：windows, taskmanager, windows-process

假设我的 IE 停止工作，所以我转到 Windows 任务管理器并转到进程并选择“iexplore.exe”和“结束进程”。我也可以使用“应用程序”选项卡来结束进程，但很多时候对于挂起的应用程序，应用程序不会显示在“应用程序”选项卡上。现在...在这种情况下，我可以使用“进程”选项卡，因为我知道对于 IE，该进程称为“iexplore.exe”。但是很多时候我会打开任务管理器来杀死一个程序，但是因为我不知道windows中的进程名称而无法做到。如何在 Windows 中找出进程的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:27:02.103

只需在描述部分查看该过程。大多数程序将使用它来告诉您该过程的用途。

# php - Zend_File_Transfer_Adapter_Http addValidator isValid

> ID：11781796
> 
> 赞同：0
> 
> 时间：2012-08-02T16:24:09.227
> 
> 标签：php, zend-framework

这是我的代码

```
$adapter = new Zend_File_Transfer_Adapter_Http();
$adapter->addValidator('Extension', false,
                array('extension' => 'exe, php, pl, js, html, htm', 'case' => false));
if (!$adapter->isValid())
{
   return 'ERROR';
} 
```

当我尝试上传 jpg 或 txt 文件时，我得到“错误”字符串。看起来 $adapter->isValid() 返回 false。它应该返回 true 吗？

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:27:36.110

主要问题是您正在尝试上传`jpg`或`txt`文件，但列表中均不允许这些扩展名。您只允许`exe`, `php`, `pl`, `js`, `html`, 或`htm`.

扩展在数组中的设置方式也存在一个小问题，它们之间有空格。我检查了这些值，ZF 有您提供的扩展名列表，但除了第一个之外，每个扩展名前面都有一个空格。

以下两个选项中的任何一个都可以使用：

```
// array method
$adapter->addValidator('Extension', false,
                       array('txt', 'jpg', 'jpeg', 'exe',
                             'php', 'pl', 'js', 'html', 'htm',
                             'case' => false));

// or

// string method
$adapter->addValidator('Extension', false,
                       'txt,jpg,jpeg,exe,php,pl,js,html,htm'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:40:48.773

尝试使用此代码，您也可以添加错误消息

```
$adapter->addValidator(
       'extension', 
       false, 
       array(
            'jpg,jpeg,png,avi,mov,mpeg,wmv', 
            'messages' => array(
                               Zend_Validate_File_Extension::FALSE_EXTENSION => 
                               'Invalid format must be jpg,jpeg,png,avi,mov,wmv or mpeg.'
                                )
             )
        ); 
```

# ruby - ruby 1.8.7 to_proc 创建空数组

> ID：11781800
> 
> 赞同：1
> 
> 时间：2012-08-02T16:24:22.783
> 
> 标签：ruby, ruby-1.8.7

[这是这个答案](https://stackoverflow.com/a/6519881/498594)的后续，关于 ruby​​ 1.8.7 的 Symbol#to_proc 每次调用都会生成一个新的 proc。

似乎发生的事情比答案所暗示的要多。

这是一些示例代码：

```
def ctob
  h=Hash.new(0)
  ObjectSpace.each_object(Object) {|e| h[e.class]+=1 }
  h
end
r=(0...1000)
p ctob
r.map(&:to_i)
p ctob 
```

这表明正在创建大约一千个数组。这表明大约有一千个是空的：

```
c=0; ObjectSpace.each_object(Array){|e| c+=1 if e.empty? } 
```

另一个有趣的事情是只有一个 Proc 对象存在。这表明`to_proc`只调用一次。`map`（如果我第二次用符号调用，也许会创建另一个。）

如果我将 map 调用更改为使用块，则不会创建这些数组。这也可以解释为什么 Andrew Grimm 的缓存对基准测试没有帮助。为什么要创建这些数组？

更新

显然，从 Symbol 创建的 proc 每次调用时都会创建一个空数组。

如果我将`map`上面的行替换为

```
pr=:to_i.to_proc; r.map(&pr) 
```

导致创建数组，但这

```
pr=proc{|e|e.to_i}; r.map(&pr) 
```

才不是。如果我只做 pr.call(value)，也会发生类似的事情。

（什么时候proc不是proc？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:59:35.573

我想我找到了答案。

我查看了activesupport 2.2，发现这是以下内容`Symbol#to_proc`：

```
Proc.new { |*args| args.shift.__send__(self, *args) } 
```

`args`是数组。由于范围的每个成员都作为单个 arg 传递，因此它被转换为 1 个元素的数组。那个元素被移开，留下一个空数组。所以它不是创建空数组，它只是在处理 args 后将它们留在后面。

我还使用 2-arg proc 进行了测试：

```
[1,2,3,4].inject(&:+) 
```

这留下了 1 个元素的数组（原始的第一个元素是当前总和）。

我的假设是 1.8.7 做了类似的事情。我很想知道 1.9 的不同之处。

# html - 表格单元格没有保持正确的高度，复制背景

> ID：11781802
> 
> 赞同：1
> 
> 时间：2012-08-02T16:24:25.447
> 
> 标签：html, css

我用一张桌子包装我的表格，

我的表格如下：9 个单元格，3 行，3 列，[0,0] 是左上角，[1,1] 是主要表单内容，[2,2] 是右下角 [**都是零索引在我的描述**]。我正在包装我的表格，所以我可以在它周围放置一个“阴影”。

**我的问题：[row 0] 和 [row 2] 中的单元格应该是 8px 高，而不是 22px。**

我正在使用表格的 4 个角单元格来显示圆形边缘，但其他 4 个“边缘”单元格正在重复具有 1px 尺寸的背景，高或宽取决于它是否在 x 或 y 中重复，但它们在哪里在 [row 0] 和 [row 2] 中重复-x'，td 没有正确地粘在高度上。

Borwsers：IE 只在 'IE 7/8' 兼容性视图中显示问题，但 chrome 和 firefox 已经开始做同样的事情，认为我的 DOCTYPE 正在影响它。

我附上了一个屏幕截图部分和一些 HTML 编辑以删除它产生的可怕的长 Web Resouce URL（我将它作为一个 webcontrol）

![显示问题的左上角屏幕截图](../Images/738d9232503d1df38884c2c217bf63b1.png)

```
<table cellpadding=0 cellspacing=0 border=0 style="width:560px;">
<tr>
    <td style="background-image:url('url'); width:8px; height:8px;">
        <img src='url' width='8' height='8'/>
    </td>   
    <td style="background-image:url('url'); height:8px;">
        <img src='url' height='8'/>
    </td>   
    <td  style="background-image:url('url'); width:9px; height:8px;">
        <img src='url' width='9' height='8'/>
    </td>
</tr>
<tr>
    <td style="background-image:url('url'); width:8px;">
    </td>
    <td  style="background-color:#DDDDDD">
        <!-- main table content !-->
    </td>
    <td style="background-image:url('url')">
    </td>
</tr>
<tr>
    <td style="background-image:url('url') width='8' height='9'>
        <img src='url' width='8' height='9'/>
    </td>
    <td style="background-image:url('url') height='9'>
    </td>
    <td style="background-image:url('url'); width:9px; height:9px;">
        <img src='url' width='9' height='9'/>
    </td>

</tr>

</table> 
```

我之前在表格没有确认正确的高度或宽度时遇到过问题，以前的修复是确保没有文本（或黑色字符）强制高度，并确保表格单元格不为空（我是在某些单元格中插入 bg 图像作为 img 标签，没有效果）。

我真的希望这是 HTML 的一个众所周知的问题，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:58:03.017

通常，我会谴责在布局中使用表格，但这是一种没有真正好的替代方案的情况（也许曾经`border-image`得到更好的支持）。话虽如此，HTML5 规范要求为用于布局的表格赋予`role="presentation"`属性，以便屏幕阅读器和类似功能（例如盲人可访问性）。它仍然可能会给他们带来困难，也可能会惹恼搜索引擎蜘蛛，但这是您的选择。

其次，像这样的内联样式将导致维护噩梦。您应该有一个外部样式表，并将其包含在`<link rel="stylesheet" type="text/css" href="URL.css"/>`. 使用`class`和`id`属性将使您的表格（或其他任何东西）更容易设计样式。

第三，您提到您认为您的 doctype 引起了问题，但您没有包含它。无论如何，您可能应该使用 HTML5 文档类型——它只是`<!DOCTYPE html>`. 旧的 HTML 4.x/XHTML 1.x/等。doctypes 可能不是继续使用的好东西。

把所有这些放在一起，你的 HTML 看起来像这样：

```
<!DOCTYPE html>
<html>
    <head>
        <!-- any other header stuff you need, like meta or title -->
        <link rel="stylesheet" type="text/css" href="something.css"/>
    </head>

    <body>

        <table id="mainLayout" role="presentation">
            <thead>
                <tr>
                    <td class="left-cell"></td>
                    <td></td>
                    <td class="right-cell"></td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="left-cell"></td>
                    <td><!-- main content goes here. --></td>
                    <td class="right-cell"></td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td class="left-cell"></td>
                    <td></td>
                    <td class="right-cell"></td>
                </tr>
            </tfoot>
        </table>

    </body>
</html> 
```

现在对于 CSS：

```
表#mainLayout
{
    边距：0；
    填充：0；
}

表#mainLayout td
{
    边距：0；
    填充：0；
}

table#mainLayout thead tr
{
    高度：8px；
}

table#mainLayout tfoot tr
{
    高度：9px；
}

表#mainLayout .left-cell
{
    宽度：8px；
}

table#mainLayout .right-cell
{
    宽度：9px；
}

table#mainLayout thead td
{
    background-image: url（图片去哪里）；
}

table#mainLayout thead td.left-cell
{
    background-image: url（图片去哪里）；
}

table#mainLayout thead td.right-cell
{
    background-image: url（图片去哪里）；
}

表#mainLayout tbody td
{
    background-image: url（图片去哪里）；
}

table#mainLayout tbody td.left-cell
{
    background-image: url（图片去哪里）；
}

table#mainLayout tbody td.right-cell
{
    background-image: url（图片去哪里）；
}

table#mainLayout tfoot td
{
    background-image: url（图片去哪里）；
}

table#mainLayout tfoot td.left-cell
{
    background-image: url（图片去哪里）；
}

table#mainLayout tfoot td.right-cell
{
    background-image: url（图片去哪里）；
}
```

更具体的规则（包括`.left-cell`/ `.right-cell`）会覆盖不太具体的规则，因此没有必要制定`.center-cell`规则。

# java - 从 api.facebook.com 解析 json

> ID：11781807
> 
> 赞同：1
> 
> 时间：2012-08-02T16:25:02.607
> 
> 标签：java, facebook, json, facebook-graph-api

如何使用 java（对于独立的 java 应用程序）[从这个链接解析 json？](https://api.facebook.com/method/fql.query?format=JSON&query=select%20comments%20from%20comment%20where%20object_id%20in%20%28select%20comments_fbid%20from%20link_stat%20where%20url%20=%27http://developers.facebook.com/docs/reference/fql/comment/%27%29&pretty=1)我尝试了 gson & Jackson 库，但它们似乎有问题，因为这个 json 的格式看起来不同。

你怎么做呢？

鉴于 facebook 的受欢迎程度，我希望找到一些可以做到这一点的 jars/lib。非常欢迎带有示例的建议。非常感谢。

**响应.java**

```
public class Response{
private List<Comments> commentslist;

public List<Comments> getCommentsList() {
    return commentslist;
}

public void setCommentsList(List<Comments> commentslist) {
    this.commentslist = commentslist;
}
} 
```

**评论.java**

```
public class Comments{
private Number count;
private List<Data> data;

public Number getCount(){
    return this.count;
}
public void setCount(Number count){
    this.count = count;
}
public List<Data> getData(){
    return this.data;
}
public void setData(List<Data> data){
    this.data = data;
}
} 
```

**来自.java**

```
public class From{
    private Number id;
private String name;

public Number getId(){
    return this.id;
}
public void setId(Number id){
    this.id = id;
}
public String getName(){
    return this.name;
}
public void setName(String name){
    this.name = name;
}
} 
```

**数据.java**

```
public class Data{
private Number created_time;
private From from;
private Number id;
private String message;

public Number getCreated_time(){
    return this.created_time;
}
public void setCreated_time(Number created_time){
    this.created_time = created_time;
}
public From getFrom(){
    return this.from;
}
public void setFrom(From from){
    this.from = from;
}
public Number getId(){
    return this.id;
}
public void setId(Number id){
    this.id = id;
}
public String getMessage(){
    return this.message;
}
public void setMessage(String message){
    this.message = message;
}
} 
```

**使用 gson 的转换尝试失败**

```
Response response = gson.fromJson(contents, Response.class); //contents is json string
System.out.println(response.getCommentsList()); // comes back as null 
```

如果 json 正常，我的 java 模型有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:42:07.357

You are trying to deserialize the JSON response(which is an array of objects) into an object(Response) with a list(commentList) of comments(Comments). There is a type/structure mismatch and GSON won't be able to deserialize that.

Try doing something like:

```
Gson gson = new Gson();
Type collectionType = new TypeToken<List<Response>>(){}.getType();
List<Comments> commentList = gson.fromJson(yourJsonString, collectionType); 
```

And change your Response object into:

```
public class Response{
  private Comments comments;

  public Comments getComments() {
      return comments;
  }

  public void setComments( Comments comments) {
      this.comments= comments;
  }
} 
```

The json from fb is a list of response(anonymous) objects that has 1 field called comments. Comments, despite the name, is actually an object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:42:21.787

The JSON [validates](http://jsonlint.com/) fine. The top container in that JSON is an array, not an object. Try:

```
List<Response> responses = gson.fromJson( contents, Response.class );
System.out.println(responses[0].getCommentsList()); 
```

# c# - SFTP SSH.NET DLL 而不是 SharpSSH

> ID：11781808
> 
> 赞同：0
> 
> 时间：2012-08-02T16:25:04.710
> 
> 标签：c#, .net, vb.net, sftp, sharpssh

我正在寻找一个免费的 .net DLL 来处理 SFTP 连接。

我发现了这个项目[SharpSSH](https://bitbucket.org/mattgwagner/sharpssh)，但它缺乏文档。

我花了很多时间来弄清楚 dll 是如何工作的。我创建了一个测试项目，并开始测试不同的功能。某些功能正在运行，例如删除文件。

我对 putfile() 函数和 getfile() 有疑问。

这里有一个例子：

```
Dim ssh As SFTPUtil
ssh = New SFTPUtil("MY SERVER", "MY USER", "MY PW")
ssh.GetFile("/home/sftptest/test111.xml", "C:\\text.xml") 
```

请注意，getfile() 参数是：

```
Public Sub GetFile(remotePath As String, localPath As String) 
```

我介入了函数，但我没有得到传递这些参数的正确方法。

我真的不知道我应该使用斜杠（/）还是反斜杠（）。我知道 Linux 使用 (/)

例如，我注意到“C:\”已转换为“C:\\”。

只需提及 SFTP 位于 linux 机器上。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T12:29:00.723

这是我应该做的（vb.net代码）来建立与[这个库（**SSHnet**）](http://sshnet.codeplex.com/)的连接，我没有**使用**SharpSHH：

```
Private Sub ButtonAction_Click(sender As Object, e As System.EventArgs) Handles ButtonAction.Click

    Dim PasswordConnection = New PasswordAuthenticationMethod("test", "test")
    Dim KeyboardInteractive = New KeyboardInteractiveAuthenticationMethod("test")
    Dim ConnectionInfo = New ConnectionInfo("192.168.1.1", 22, "test", PasswordConnection, KeyboardInteractive)

    AddHandler KeyboardInteractive.AuthenticationPrompt, _
    Sub(_sender As Object, _e As Renci.SshNet.Common.AuthenticationPromptEventArgs)
        For Each prompt In _e.Prompts
            Debug.Print(prompt.Request)
            If Not prompt.Request.IndexOf("Password:", StringComparison.InvariantCultureIgnoreCase) = -1 Then
                prompt.Response = "test"
            End If
        Next
    End Sub

    sftp = New SftpClient(ConnectionInfo)
    sftp.Connect()

    sftp.disconnect()
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:40:37.510

这个库充满了错误。我在 11/2012 下载了版本，即使使用像断开连接这样的简单功能，我也遇到了很大的问题。应用程序将冻结，您必须重新启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:40:38.027

我在理解你到底想要什么时遇到了一些问题，所以这里有一个来自 SSH.NET 包的示例代码。（不是 SharpSSH）

```
string IP = "192.168.1.1", User = "Testuser", Pass = "123";
SftpClient sftp;

private void UploadFileSFTP()
    {
        sftp = new SftpClient(IP, User, Pass);
        sftp.Connect();
        Uploader();
        Downloader();
        sftp.Disconnect();
    }

string FilePath="C:\\folder\\", Filename = "Filename.extention", 
       DeliveryPath = "/tmp/";

private void Uploader()
    {
        using (var file = File.OpenRead(FilePath + Filename))
        {
            sftp.UploadFile(file, DeliveryPath + Filename);
        }
    }

//there is possibly a simpler way to download but this is how i did it.
string FromPath = "/tmp/testfile.txt", StoragePath = ""; 
private void Downloader()
    {
        if (File.Exists(StoragePath))
            File.Delete(StoragePath);
        if (!Directory.GetDirectories(Path.GetTempPath()).Contains("WorkFiles"))
        {
            Directory.CreateDirectory(Path.GetTempPath() + "WorkFiles");
        }

        StoragePath = Path.GetTempPath() + "WorkFiles\\testFile.txt";

        Int64 iSize = sftp.ReadAllBytes(FromPath).Length;
        Int64 iRunningByteTotal = 0;
        using (Stream streamRemote = sftp.OpenRead(FromPath))
        {
            using (Stream streamLocal = new FileStream(StoragePath, FileMode.Create, FileAccess.Write, FileShare.None))
            {
                int iByteSize = 0;
                byte[] byteBuffer = new byte[iSize];
                while ((iByteSize = streamRemote.Read(byteBuffer, 0, byteBuffer.Length)) > 0)
                {
                    streamLocal.Write(byteBuffer, 0, iByteSize);
                    iRunningByteTotal += iByteSize;
                }
            }
        }
    } 
```

# c# - C#如何读取\r\n字符串

> ID：11781810
> 
> 赞同：3
> 
> 时间：2012-08-02T16:25:10.017
> 
> 标签：c#, xml, serial-port

首先，嗨！这是我的第一篇文章！

我正在编写一个应用程序来读取和写入串行端口，一切都很好，但是由于在我的公司我们有不同类型的扫描仪，它们配置有不同的前缀/后缀字符，其中大多数都有 \r\n序列。

所以我决定在我的 xml 配置文件中包含这个后缀，如下所示：

```
<rPortSuffix>\r\n</rPortSuffix> 
```

当我阅读我的 xml 文件时，我使用它

```
case "rPortSuffix":
    srPortSuffix = xmlReader.Value;
break; 
```

问题是，当文本值传递给 srPortSuffix 时，变量存储的是“\\r\\n”，而不是“\r\n”，所以当我尝试读取串行端口时，由于不正确的后缀字符串（对于 NewLine 常量）

```
spRead.NewLine = srPortSuffix; //NewLine constant read in XML file
sReadData = spRead.ReadLine(); //Storing the read data 
```

所以我尝试了：

```
srPortSuffix= Regex.Replace(srPortSuffix, @"\\", @"\"); 
```

但没有成功。有小费吗？

TL;博士

如何使从 xml 文件中读取的“\r\n”值完全像这样读取，而不是“\\r\\n”？

**编辑：**

正如 Jirka Hanika 所建议的，我只是将字符串从 "\r\n" 更改为 ascii 代码，如下所示：

```
<rPortSuffix>&#13;&#10;</rPortSuffix> 
```

现在我的应用程序适用于我正在测试的两种类型的扫描仪。

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T16:33:49.307

您可能会将实际字符串数据与它们在 C# 源代码中的表示方式混淆。当然，C# 语法不适用于 XML 文件，因此`\r\n`与换行序列无关。

您显示的代码不会将其转换为`\\r\\n`，但也不会将其转换为换行符序列。

做后者最简单的方法是：

```
srPortSuffix = srPortSuffix.Replace(@"\r", "\r").Replace(@"\n", "\n"); 
```

您基本上会做 C# 编译器通常为您做的事情，但完全在任何 C# 源代码之外。

还有一种更简单的替代方法，即不转换任何内容，只需将换行符序列直接放入 XML 文件：

```
<rPortSuffix>
</rPortSuffix> 
```

然而，这可能会被一些读者误解和/或破坏您漂亮的打印约定（结束标签不会缩进）。用 XML 编写相同内容的一种更脏但可能更实用的方法：

```
<rPortSuffix>&#13;&#10;</rPortSuffix> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:44:01.557

我认为您的方法存在一些误解。`\r\n`可以说是一个“符号”，它依次表示回车和换行。这个“符号”（或一组）只对编译器有效——它们对其他任何东西都没有任何意义，甚至对运行时代码也是如此。

编译器所做的是在编译时将它们转换为它们的二进制表示。所以，当你这样做

```
var str = "\r\n"; 
```

编译器实际上存储了类似的东西：

```
{ 0xD, 0xA } 
```

*（这里并不是暗示一个字符串是一个数组......我不知道字符串是如何存储在.Net中的，你也不应该）*

因此，编译器正在解释并将您的“代码”转换为其他内容。我的观点是，由于您将编译器排除在外（通过在运行时读取值），因此您必须完成它的工作。

所以，按照这个原理，我会阅读配置文件的内容，然后“解释”它：

```
if (srPortSuffix == "\\\\r\\\\n")
{
    actualPortSuffix = "\r\n";
} 
```

当然，既然这都是有代表性的，我认为更好的方法是使用其他表达式来表示新行。您的配置可以读取：

```
<rPortSuffix>CarriageReturn-NewLine</rPortSuffix> 
```

哪个更清楚。在代码中，你会这样做：

```
if (srPortSuffix == "CarriageReturn-NewLine")
{
    actualPortSuffix = "\r\n";
} 
```

# xml - VBS 按属性名称搜索 XML 节点，更改子属性

> ID：11781815
> 
> 赞同：1
> 
> 时间：2012-08-02T16:25:30.730
> 
> 标签：xml, vbscript

这是我的 XML 文件的精简版：simple.xml

```
<project>
 <scenes>
  <scene>
   <rootgroup>
    <nodelist>
     <module type="WRITE" name="Write_1080P">
      <option>
       <disabled val="true"/>
      </option>
     </module>
    </nodelist>
   </rootgroup>
  </scene>
 </scenes>
</project> 
```

我需要一个 vbscript 通过它的属性 name="Write_1080p" 找到正确的 "module" 节点，然后将他的子节点的属性 "val" 更改为 "disabled"。

应该很简单，但我是 VB 脚本的新手，并且即将癫痫发作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:54:44.983

这个脚本：

```
 Dim oFS    : Set oFS  = CreateObject("Scripting.FileSystemObject")
  Dim sFSpec : sFSpec   = oFS.GetAbsolutePathName("..\testdata\xml\so11781815.xml")
  Dim oXML   : Set oXML = CreateObject("Msxml2.DOMDocument")
  oXML.setProperty "SelectionLanguage", "XPath"
  oXML.async = False
  oXML.load sFSpec
  If 0 = oXML.parseError Then
     WScript.Echo oXML.xml
     WScript.Echo "-----------------"
     Dim sXPath : sXPath    = "/project/scenes/scene/rootgroup/nodelist/module[@name=""Write_1080P""]/option/disabled"
     Dim ndFnd  : Set ndFnd = oXML.selectSingleNode(sXPath)
     If ndFnd Is Nothing Then
        WScript.Echo sXPath, "not found"
     Else
        WScript.Echo ndFnd.nodeName, ndFnd.getAttribute("val")
        WScript.Echo "-----------------"
        ndFnd.setAttribute "val", "disabled"
        WScript.Echo oXML.xml
     End If
  Else
     WScript.Echo oXML.parseError.reason
  End If 
```

输出：

```
<project>
        <scenes>
                <scene>
                        <rootgroup>
                                <nodelist>
                                        <module type="WRITE" name="Write_1080P">
                                                <option>
                                                        <disabled val="true"/>
                                                </option>
                                        </module>
                                </nodelist>
                        </rootgroup>
                </scene>
        </scenes>
</project>

-----------------
disabled true
-----------------
<project>
        <scenes>
                <scene>
                        <rootgroup>
                                <nodelist>
                                        <module type="WRITE" name="Write_1080P">
                                                <option>
                                                        <disabled val="disabled"/>
                                                </option>
                                        </module>
                                </nodelist>
                        </rootgroup>
                </scene>
        </scenes>
</project> 
```

展示了如何使用`.setProperty "SelectionLanguage", "XPath"`来确保处理 XPath 查询、如何查询属性值 ( `..t/module[@name=""Write_1080P""]/opt..`) 以及如何读取 ( `.getAttribute("val")`) 和写入 ( `.setAttribute "val", "disabled"`) 属性。

**PS** 看[这里](https://stackoverflow.com/a/11728542/603855)，看看如何查找/更改文本（使用基本相同的代码）。

# asp.net - Crystal Reports 生成 PDF - 无法连接到服务器 %MACHINENAME%

> ID：11781820
> 
> 赞同：0
> 
> 时间：2012-08-02T16:26:15.327
> 
> 标签：asp.net, pdf, crystal-reports

我正在尝试从 Crystal 报告 .rpt 文件生成 PDF，并且调用`.Open()`失败并显示消息“无法连接到服务器 %MACHINENAME%。Crystal Reports 不是我的强项，并且对于我们的应用程序的主要功能来说有点外围（ASP.NET Intranet 应用程序），所以请告诉我我是否偏离了这里的道路。

我正在使用 ReportAppServer 命名空间之外的 ReportClientDocument 类，这是我试图打开报告的代码部分

```
 m_boRptFile = @"\\path\to\report\179c7144d118b715b.rpt";
        try
        {
            var path = (object)m_boRptFile;
            if (impersonateValidUser("username", "domain", "password"))
            {
                if (File.Exists(m_boRptFile))
                {
                    FileInfo f = new FileInfo(m_boRptFile);
                    FileStream fs = f.OpenRead();
                    if (fs.CanRead)
                        m_boReportClientDocument.Open(ref path, (int)CdReportClientDocumentOpenOptionsEnum.cdReportClientDocumentOpenAsReadOnly);
                }
                undoImpersonation();
            }
        } 
```

报告文件位于远程 (BOEXI) 服务器上，但将 .rpt 文件复制到我的机器上也无济于事。

我得到的异常的全文是：

> 无法连接到服务器“%MACHINENAME%”。从 Windows 套接字 API getaddrinfo 返回的错误：11001。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:46:59.830

用水晶打开报表，看看运行报表时是否报错。如果报告没有，那么您将不得不重新连接到数据库。

# java - 带有 Mongo Java 驱动程序的 DB.eval()

> ID：11781824
> 
> 赞同：2
> 
> 时间：2012-08-02T16:26:24.440
> 
> 标签：java, mongodb, mongodb-java

我准备了一些要在 Mongo 上执行的脚本。它可以从命令行按预期工作：

```
mongo 127.0.0.1:27017/dbName script.js 
```

但是当我试图在java（scala）代码中移动它时，它不起作用

```
db.eval(scriptContent) 
```

有人用 DB.eval() 方法成功了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:41:13.410

**问题 #1**：为什么它需要在 Java 中？你可以安排`mongo ...`上面的命令通过cron运行吗？

**问题 #2**：是否可以通过 Java 驱动程序来实现？

Java 驱动程序可以执行 Map / Reduce 命令。您必须将 javascript 文本复制到某个地方的 Java 代码中，但如果您使用驱动程序工作，则可以在那里完成。

事实上，驱动程序背后的想法之一是它们只是发出类似于 shell 的 DB 命令。因此，您应该能够从 shell 或 Java 中完成所有操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T15:53:00.730

`eval()`VS 像这样运行脚本

```
mongo 127.0.0.1:27017/dbName script.js 
```

不等价。`eval()`发送要在 mongod 实例上执行的脚本，而命令使用驱动程序访问数据库。

正如其他人指出的那样，`eval()`应该避免，因为它有很多缺点，例如，不能在分片环境中工作，或者不允许在后台创建索引。

哦！并回答这个问题，是的，我确实`eval()`在 java 中取得了成功。但是，有些事情根本行不通；）

# javascript - 如何检测网站中是否存在鼠标？

> ID：11781825
> 
> 赞同：5
> 
> 时间：2012-08-02T16:26:24.903
> 
> 标签：javascript, jquery, html, web-applications

在我正在构建的网站上，我有一组导航按钮，它们需要很大才能看起来不错并且易于点击，但在用户不导航时需要很小。因此，在我的 UI 中，我将按钮缩小为缩略图，并在鼠标悬停时将其动画化为全尺寸。这很好用。

但是在平板电脑上，没有鼠标，也没有鼠标悬停，所以我需要另一种机制来让用户导航。我正在考虑让用户点击缩略图，然后展开完整的导航按钮栏，然后用户可以点击导航。

问题是：如何判断用户是否在没有鼠标的情况下浏览？我想我可以通过浏览器检测到，但这似乎真的很不稳定。

或者，有人可以为这种情况指出一个更好的 UI 设计模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:32:58.877

一种选择是检测浏览器代理。

但是您也可以为`touchstart/touchmove/touchend`仅在触摸设备上触发的事件注册侦听器。

顺便说一句，第 4 级有一个新的[CSS 媒体查询](http://dev.w3.org/csswg/mediaqueries4/#pointer)。

也许对您来说最有趣的是“指针”，用户代理应该返回“无 | 粗| 美好的。” 根据规范，“‘精细’定位系统的典型示例是鼠标、触控板或基于触控笔的触摸屏。基于手指的触摸屏将被视为“粗糙”。”</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:20:52.993

```
function isEvent(ev)
{
    var d=document;
    var isTrue=false;
    var fn=function()
    {
        isTrue=true;
    }
    d.body.onclick=fn;
    var e;
    if(d.createEvent)
    {
        e=d.createEvent('Event');
        e.initEvent(ev,false,false);
        d.body.dispatchEvent(e);
    }
    else if(d.createEventObject)
    {
        e=d.createEventObject(window.event);
        d.body.fireEvent('on'+ev,e);
    }
    return isTrue;
}

//run the code
var isMouse=isEvent('click');
if(isMouse)
{
    alert('user has a mouse');
} 
```

确保仅在 body 加载开始时运行！ [演示](http://jsfiddle.net/8yYRK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:39:08.780

创建一个自定义的点击事件，绑定一个函数，最后将创建的点击事件分派给文档。如果函数成功触发，则用户有鼠标，否则可能是任何无鼠标设备

# ios - 设置 UISlider 的最小值/最大值是否通过舍入改变精度

> ID：11781828
> 
> 赞同：3
> 
> 时间：2012-08-02T16:26:34.480
> 
> 标签：ios, uislider, floating-accuracy

假设我有一个 UISlider 表示从 -1 到 2 的连续值范围。如果我保留默认的 min=0，max=1，那么我的值 0 由滑块表示为 1/3 的行程和一个浮点值1/3 (0.33333333)。我对特殊值 0 特别感兴趣，并将其表示为 0.333333 必须（略微）四舍五入感觉不对。如果我要将最小值更改为 -1 并将最大值更改为 2，那么我的 0 值恰好是浮点值 0.0。

设置最小值/最大值会给我更高的准确性吗？拇指是否在像素边界上移动 - 也许我可以使用该信息来尝试一些舍入示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:44:22.780

我怀疑你担心这里无关紧要的事情。首先，单精度浮点数的分数为 23 位，因此任何舍入误差都小于 2**24 的一部分。这大大超出了屏幕的分辨率，因此显示屏中看不到四舍五入的效果。其次，即使您为端点设置了圆角值，滑块坐标仍然需要通过其他软件映射到屏幕像素，反之亦然，并且这些可能涉及非圆角值。

# compiler-errors - RAD 在执行清理所有项目并自动构建时显示编译错误

> ID：11781829
> 
> 赞同：0
> 
> 时间：2012-08-02T16:26:34.983
> 
> 标签：compiler-errors, rad

很多时候，当我打开 RAD 工作区并执行 clean-->build all 时，一些项目会显示编译错误。现在，当我一个一个地构建每个项目时，错误就消失了。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:29:47.120

我的猜测是，当工作区中有 100 个项目并且一个项目依赖于另一个项目时，我们对所有项目执行 Clean--> Build Automatically，RAD 会打乱构建顺序。所以它并不总是首先构建依赖项目。这会给某些项目带来编译错误，因为依赖项目不是首先构建的。

为了解决这个问题，我们可以在没有 Clean 选项的情况下执行“Build All”。这将确保旧文件仍然存在，并且依赖项目可以引用旧文件。这将消除错误。

# xml - XML 如何在 XName 字段周围添加引号？

> ID：11781832
> 
> 赞同：0
> 
> 时间：2012-08-02T16:26:47.033
> 
> 标签：xml

我有以下 XAttribute XElement.XAttribute(XName name)：

```
InjuredEmployeeName = e.Attribute("hciIIEmployeeName"), 
```

它输出一个员工姓名，例如 Doe, John。

我需要做的是像这样在它周围加上引号：“Doe，John”

我想我可以这样做：

```
InjuredEmployeeName = e.Attribute(“\”” + "hciIIEmployeeName" + “\””), 
```

但收到错误消息：“名称不能以“字符开头，十六进制值 0x22。”

在做了一些研究之后，我了解到 " 是 XML 中的一个特殊字符，必须像这样表示：

```
&quot; 
```

所以我把它改成这样：

```
InjuredEmployeeName = e.Attribute("&quot;" + "hciIIEmployeeName" + "&quot;"), 
```

但现在我收到一条错误消息，提示“名称不能以 '&' 字符开头，十六进制值 0x26。”

我会以错误的方式做这件事吗？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:45:19.033

您要引用属性值，而不是属性名称：

```
quotedEmployeeName = String.Format("\"{0}\"", e.Attribute("hciIIEmployeeName").Value) 
```

# php - fopen 在子目录上返回 false

> ID：11781833
> 
> 赞同：0
> 
> 时间：2012-08-02T16:26:58.430
> 
> 标签：php, android, apache, centos

您好我正在尝试从我的 android 应用程序将图像文件上传到我的服务器。似乎我无法将任何文件上传到我的服务器而不是特定目录（图片）。如果我尝试上传到图片的子目录，那么 fopen 会返回 false。这是我的 php 文件

```
<?php
$base=$_REQUEST['image'];
$picname=$_REQUEST['picname'];
$binary=base64_decode($base);

header('Content-Type: bitmap; charset=utf-8');

//$shapicname = SHA1($picname);

$dir1 = 'pics/'.substr($picname,0,2);
$dir2 = substr($picname,2,2);

$targetfilename1 = $dir1;
$targetfilename2 =  $dir2;

if (!file_exists($dir1)) {
    mkdir($dir1); //create the directory
    chmod($targetfilename1, 0777); //make it writable
}

//chdir($dir1);

$file = fopen('/var/www/html/'.$dir1.'/'.$picname, 'wb');

if (!$file) {
   echo "false ".$dir1.$picname;
}
else {
   $fwrite = fwrite($file,$binary);

   fclose($file);

   echo "uploaded".$fwrite.$file;
}
?> 
```

pics 文件夹归 apache 用户所有，拥有 0777 权限

有任何想法吗？

我正在发布 php 错误日志

[2012 年 8 月 2 日星期四 18:32:34] [错误] [客户端 xx.xx.Xxx.xx] PHP 警告：fopen()：安全模式限制生效。uid/gid 为 0/0 的脚本不允许访问第 23 行的 /var/www/html/uploadshaimage.php 中的 uid/gid 48/48 拥有的 /var/www/html/pics/53 [Thu Aug 2012 年 2 月 18 日 32 分 34 秒] [错误] [客户端 xx.xx.Xxx.xx] PHP 警告：fopen（/var/www/html/pics/53/5344.jpg）：无法打开流：没有这样的文件或第 23 行 /var/www/html/uploadshaimage.php 中的目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:31:22.617

1.  文件夹权限
2.  PHP.ini 设置 - 允许打开 url 或未启用文件功能。
3.  路径错误 - 验证文件或路径是否正确或确实存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:50:33.263

好的，我找到了 2 个有效的解决方案

A. 在 php.ini 上关闭 safe_mode（有点冒险！）

B. 将 pics 目录的权限递归地赋予子目录（gid 是问题！）

感谢大家的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:17:04.503

你知道，我不禁想知道，你确定这条路真的是`'/var/www/html/'.$dir1.'/'.$picname`吗？您正在使用相对路径`$dir1`，但在`fopen`. 如果`$dir1`从一开始就设置为绝对路径会发生什么？

* * *

FWIW，您输出的内容类型也错误。

# java - 如何检测 .so 文件中的 Java 字符串？

> ID：11781834
> 
> 赞同：2
> 
> 时间：2012-08-02T16:26:58.070
> 
> 标签：java, reverse-engineering, nasm, disassembly

我正在重新编译一个 Java 程序，我有以下方法：

```
public static native String getMyString(String s); 
```

`getMyString`在 mylibrary.so 中实现，如下所示：

```
; Scrambler::getMyString(char  const*)
EXPORT _ZN9Scrambler18getMyStringEPKc
_ZN9Scrambler18getMyStringEPKc
LDR             R1, =(mystring - 0x14FC8)
PUSH            {R4-R6,LR}
ADD             R1, PC  ; "mystring"
MOV             R4, R0
BLX             strcasecmp
CMP             R0, #0
BNE.W           loc_150FC 
```

这比最终在

```
LDR             R5, =(unk_6AE24 - 0x14FD8)
ADD             R5, PC 
```

`R5`似乎是这里的返回值。

`unk_6AE24`看起来如下：

```
 27
68 5D 6D 06 3F 10 6D 26  32 10 56 12 06 3F 32 5D
12 27 26 4B 0D 5D 27 4B  6E 0D 2B 06 32 5D 68 24
3F 32 06 24 70 56 00 63  69 4C 1D 06 5A 7F 0C 34
1E 67 3B 63 32 5F 16 1D  34 5F 1E 32 42 69 18 49
3F 51 49 0C 1F 0C 0E 77  2F 44 69 7F 5A 0C 0B 34
0C 34 1C 24 32 5F 7F 00  00 00 00 1D 30 3B 5F 30 
```

IDA 建议，有问题的字符串是`27 68 5D 6D`或“'h]m”，但我有疑问。当我很久以前使用 c++ 时，字符串过去以 0 结尾，这将导致返回值`27 68 5D 6D 06 3F 10 6D 26 32 10 56 12 06 3F 32 5D 12 27 26 4B 0D 5D 27 4B 6E 0D 2B 06 32 5D 68 24 3F 32 06 24 70 56`. 或者我们可以谈论 java 字符串，它可能有自己的格式。

`getMyString`会返回什么样的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:40:38.100

> getMyString 会返回什么样的字符串？

它会返回一个`java.lang.String`，你可以从声明中得到它。

实际的字符数据将（可能）是一个远离那个的重定向。（a`String`可能是指向`char`数组和大小的指针）。请记住，在 Java 中，a`char`是 16 位。

你到底想做什么？在返回后立即设置断点`getMyString`并在调试器中查看返回值要容易得多。

# gridview - Windows 8 Metro：如何获得点击的 GridViewItem？

> ID：11781836
> 
> 赞同：1
> 
> 时间：2012-08-02T16:27:02.970
> 
> 标签：gridview, windows-8, microsoft-metro

我正在使用 GridView 构建 Windows 8 Metro 应用程序（C#、XAML），并且我想在用户单击的 GridViewItem 附近显示一个弹出窗口。我计划通过单击事件参数获取 GridViewItem UIElement 并使用它的坐标来确定放置我的弹出窗口的位置。

但是，我还没有找到一种方法来获取对被点击的实际 GridViewItem UIElement 的引用！我在下面尝试过的事件似乎只通过它们的 EventArgs 公开 DataContext，而不是实际的 UIElement：

```
object sender // is the GridView
ItemClickEventArgs.ClickedItem // is the DataContext of the GridViewItem
ItemClickEventArgs.OriginalSource // is the GridView
SelectionChangedEventArgs.OriginalSource // is null
SelectionChangedEventArgs.AddedItems.First() // is the DataContext of the GridViewItem 
```

如果重要的话，我的 GridView.ItemSource 是一个 CollectionViewSource，它的 Source 绑定到一个视图模型的集合。

是否可以通过我忽略的某些事件来获取单击的 GridViewItem？如果不是，我应该从什么角度来解决它？我至少可以通过 PointerPressed 事件获得相对于 GridView 的点击坐标，并查看我可以做些什么来以这种方式定位项目，但真的希望我不必走那条路。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T16:36:20.710

我还在应用程序中实现了这种行为 - 使用 Callisto 库中的 Flyout 弹出窗口和单击的 GridViewItem。

简单地调用 ContainerFromItem 来获取相关的 GridViewItem 控件要容易得多：

```
private void itemGridView_ItemClick(object sender, ItemClickEventArgs e)
{
    var clickedItem = itemGridView.ItemContainerGenerator.ContainerFromItem(e.ClickedItem);

    // Open the flyout now
    Flyout flyOut = new Flyout();
    if (clickedItem is GridViewItem)
        flyOut.PlacementTarget = clickedItem as UIElement;
    else
        flyOut.PlacementTarget = sender as UIElement;

    flyOut.Placement = PlacementMode.Left;
    SolidColorBrush br = new SolidColorBrush(Colors.Blue);
    flyOut.Background = br;
    TextBlock tb = new TextBlock();
    tb.Text = "I'm in your flyout messing with your text";

    flyOut.Content = tb;
    flyOut.IsOpen = true;
} 
```

感谢[这里的这个帖子](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a3336abf-6577-48f7-97cd-f0e69ed9416f)为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:44:18.493

VisualTreeHelper 可能会帮助您将其放置到 GridView/GridViewItem 并找到它的子/父，如果您想找到 UIElement。要确定在容器内单击了什么 UIElement，应使用**VisualTreeHelper**解决。

有关 VisualTreeHelper 的更多信息，请参见此处[Visual Tree Helper 示例](http://www.codeproject.com/Articles/21495/Understanding-the-Visual-Tree-and-Logical-Tree-in)

如果您不想使用 VisualTreeHelper，我会创建一个附加属性，我所有的 GridViewItem 单击都将作为依赖对象传递给 GridView 的附加属性（这是自定义的，您可以从中获得更多）。

# jsf - 无法为托管 bean _ JSF 2.0 设置属性 _

> ID：11781844
> 
> 赞同：1
> 
> 时间：2012-08-02T16:27:24.510
> 
> 标签：jsf, properties, managed-bean

我正在尝试使用 JSF 2.0 创建一个基本表，以将“时间表”条目发送到数据库。我已经为所有字段编写了带有 setter 和 getter 的 bean，并通过 faces-config 管理了 bean，但我一直遇到错误：
`"com.sun.faces.mgbean.ManagedBeanCreationException: Unable to set property monday1 for managed bean timesheet"`

属性名称无关紧要，它只是 faces-config 中列出的第一个属性。我的 int 属性似乎都不起作用。

这是 HTML / JSF 表：

```
<h:form>
            <table>
                <thead>
                    <tr>
                        <th>Employee Details</th>
                        <th id="reqBox" colspan="2">
                            <span class="reqStar">*</span>
                            <span class="reqText">Required Field</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Employee ID <br />
                            <input name="empID" type="text" value="#{userBean.id}" readonly="readonly"/>
                        </td>
                        <td>
                            Employee Name <br />
                            <input name="empName" type="text" value="#{userBean.firstName} #{userBean.lastName}" readonly="readonly" />
                        </td>
                        <td>
                            Week Starting <span class="reqStar">*</span> <br />
                            <input name="weekOf" type="text" value="" />
                            <a href="javascript:NewCal('demo1','mmddyyyy')">&nbsp;
                                <img src="images/cal.gif" border="0" alt="Pick a date" width="16" height="16" />
                            </a>
                        </td>
                    </tr>
                    <tr class="whiteSpacerRow"></tr>
                </tbody>
            </table>
            <table class="content" border="1" rules="none" frame="box" cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <th colspan="10">Record Timesheet</th>
                    </tr>
                    <tr class="header">
                        <td>Task</td>
                        <td>Monday</td>
                        <td>Tuesday</td>
                        <td>Wednesday</td>
                        <td>Thursday</td>
                        <td>Friday</td>
                        <td>Saturday</td>
                        <td>Sunday</td>
                        <td>Total Hours</td>
                    </tr>
                </thead>
                <tbody>
                    <tr class="dateRow">
                        <td class="blank"></td>
                        <td id="monday"></td>
                        <td id="tuesday"></td>
                        <td id="wednesday"></td>
                        <td id="thursday"></td>
                        <td id="friday"></td>
                        <td id="saturday"></td>
                        <td id="sunday"></td>
                    </tr>
                    <tr id="input_row_1">
                        <td>
                            <select name="select_1">
                                <option>-Select One-</option>
                                <option value="Development">Regular Hours</option>
                                <option value="Vacation">Paid Vacation</option>
                                <option value="LOSSOFPAY">Unpaid Vacation</option>
                                <option value="REMOTE">Remote Work</option>
                            </select>
                        </td>
                        <td id="mondayInput1">
                            <h:inputText id="monday1" size="4" value="#{timesheet.monday1}" required="false" />
                            <!-- <input name="monday1" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="tuesdayInput1">
                            <h:inputText id="tuesday1" size="4" value="#{timesheet.tuesday1}" required="false" />
                            <!--<input name="tuesday1" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="wednesdayInput1">
                            <h:inputText id="wednesday1" size="4" value="#{timesheet.wednesday1}" required="false" />
                            <!--<input name="wednesday1" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="thursdayInput1">
                            <h:inputText id="thursday1" size="4" value="#{timesheet.thursday1}" required="false" />
                            <!--<input name="thursday1" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="fridayInput1">
                            <h:inputText id="friday1" size="4" value="#{timesheet.friday1}" required="false" />
                            <!--<input name="friday1" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="saturdayInput1">
                            <h:inputText id="saturday1" size="4" value="#{timesheet.saturday1}" required="false" />
                            <!--<input name="saturday1" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="sundayInput1">
                            <h:inputText id="sunday1" size="4" value="#{timesheet.sunday1}" required="false" />
                            <!--<input name="sunday1" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td>
                            <!-- <h:inputText id="total1" size="4" value="" required="false" /> -->
                            <input name="total1" id="total1" type="text" size="5" readonly="readonly" />
                        </td>
                    </tr>
                    <tr id="input_row_2">
                        <td>
                            <select name="select_2">
                                <option>-Select One-</option>
                                <option value="Development">Regular Hours</option>
                                <option value="Vacation">Paid Vacation</option>
                                <option value="LOSSOFPAY">Unpaid Vacation</option>
                                <option value="REMOTE">Remote Work</option>
                            </select>
                        </td>
                        <td id="mondayInput2">
                            <h:inputText id="monday2" size="4" value="#{timesheet.monday2}" required="false" />
                            <!-- <input name="monday2" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="tuesdayInput2">
                            <h:inputText id="tuesday2" size="4" value="#{timesheet.tuesday2}" required="false" />
                            <!--<input name="tuesday2" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="wednesdayInput2">
                            <h:inputText id="wednesday2" size="4" value="#{timesheet.wednesday2}" required="false" />
                            <!--<input name="wednesday2" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="thursdayInput2">
                            <h:inputText id="thursday2" size="4" value="#{timesheet.thursday2}" required="false" />
                            <!--<input name="thursday2" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="fridayInput2">
                            <h:inputText id="friday2" size="4" value="#{timesheet.friday2}" required="false" />
                            <!--<input name="friday2" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="saturdayInput2">
                            <h:inputText id="saturday2" size="4" value="#{timesheet.saturday2}" required="false" />
                            <!--<input name="saturday2" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td id="sundayInput2">
                            <h:inputText id="sunday2" size="4" value="#{timesheet.sunday2}" required="false" />
                            <!--<input name="sunday2" class="smallInput" type="number" size="2" maxlength="4" min="0"/> -->
                        </td>
                        <td>
                            <!-- <h:inputText id="total2" size="4" value="#{timesheet.total2}" required="false" /> -->
                            <input name="total2" id="total2" type="text" size="5" readonly="readonly" />
                        </td>
                    </tr>
                    <tr class="green"><th colspan="10">Expenses</th></tr>
                    <tr class="header">
                        <td class="blank"></td>
                        <td>Air Fare</td>
                        <td>Lodging</td>
                        <td>Car Rental</td>
                        <td>Per-Diem</td>
                        <td class="blank"></td>
                        <td class="blank"></td>
                        <td class="blank"></td>
                        <td>Total Expenses</td>
                    </tr>
                    <tr class="greenSpacerRow"></tr>
                    <tr>
                        <td class="blank"></td>
                        <td>
                            <h:inputText id="airFare" size="6" value="#{timesheet.airFare}" required="no" />
                            <!-- <input name="airFare" class="smallInput" type="number" size="4" maxlength="4" min="0"/> -->
                        </td>
                        <td>
                            <h:inputText id="lodging" size="6" value="#{timesheet.lodging}" required="false" />
                            <!-- <input name="lodging" class="smallInput" type="number" size="4" maxlength="4" min="0"/> -->
                        </td>
                        <td>
                            <h:inputText id="carRental" size="6" value="#{timesheet.carRental}" required="false" />
                            <!-- <input name="carRental" class="smallInput" type="number" size="4" maxlength="4" min="0"/> -->
                        </td>
                        <td>
                            <h:inputText id="perDiem" size="6" value="#{timesheet.perDiem}" required="false" />
                            <!-- <input name="perDiem" class="smallInput" type="number" size="4" maxlength="4" min="0"/> -->
                        </td>
                        <td class="blank"></td>
                        <td class="blank"></td>
                        <td class="blank"></td>
                        <td>
                            <input name="expenseTotal" id="expenseTot" class="smallInput" type="text" size="4" maxlength="4" min="0" readonly="readonly"/>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="content" border="0" cellpadding="0" cellspacing="0">
                <tbody>
                    <tr>
                        <td>
                            <input type="button" onClick="submitTimesheet()" value="Submit" />
                            <input type="button" onClick="cancel()" value="Cancel" />
                            <input type="button" onClick="displayTimesheets()" value="Display Entered Timesheets" />
                        </td>
                    </tr>
                </tbody>
            </table>
        </h:form> 
```

和我的面孔配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
<managed-bean>
  <managed-bean-name>timesheet</managed-bean-name>
  <managed-bean-class>com.timesheet.Timesheet</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
  <managed-property>
   <property-name>date</property-name>
   <property-class>java.util.Date</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>monday1</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>monday2</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>tuesday1</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>tuesday2</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>friday1</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>friday2</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>saturday1</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>saturday2</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>sunday1</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>sunday2</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>thursday1</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>thursday2</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>wednesday1</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>wednesday2</property-name>
   <property-class>int</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>workType1</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>workType2</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
 </managed-bean>
 <managed-bean>
  <managed-bean-name>jobPostings</managed-bean-name>
  <managed-bean-class>com.logic.JobPostings</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
  <managed-property>
   <property-name>postings</property-name>
   <property-class>org.apache.myfaces.custom.fileupload.UploadedFile</property-class>
   <value/>
  </managed-property>
 </managed-bean>
</faces-config> 
```

如果你想查看我的堆栈跟踪或设置器/获取器的 bean，我也可以把它放上去

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:50:49.777

```
<managed-property>
    <property-name>monday1</property-name>
    <property-class>int</property-class>
    <value/>
</managed-property> 
```

您尚未将有效值指定`int`为托管属性值。有效值`int`是 到 范围内的`Integer.MIN_VALUE`数字`Integer.MAX_VALUE`。空字符串或空值不是有效值`int`。这些都是非法的论点。

要解决你的问题，要么做`<value>0</value>`

```
<managed-property>
    <property-name>monday1</property-name>
    <property-class>int</property-class>
    <value>0</value>
</managed-property> 
```

或者干脆**删除**`<managed-property>`并依赖标准 Java`int`默认的`0`. 顺便说一句，我也对所有其他无价值的托管属性表示怀疑。首先，它们似乎都毫无用处。实际上，整个`<managed-bean>`条目似乎毫无用处，因为您可以只使用 JSF2`@ManagedBean`注释。

# ios - 需要帮助获取（解析？）这些 JSON 数据到 Xcode

> ID：11781848
> 
> 赞同：0
> 
> 时间：2012-08-02T16:27:36.207
> 
> 标签：ios, c, xcode, json, parsing

在开始之前，我想说我是 Xcode 和 C 语言的新手，我正在尽我所能去学习。在发布这个问题之前，我已经研究了大约 2 天，但找不到任何有用的东西:( 我真的被困住了，希望得到任何帮助。这很可能是一个非常**简单**/基本的问题：

基本上，我正在尝试获取这些数据（[LINK](http://countdown.api.tfl.gov.uk/interfaces/ura/instant_V1?StopCode1=59581&DirectionID=1&VisitNumber=1&ReturnList=StopCode1,StopPointName,LineName,DestinationText,EstimatedTime,MessageUUID,MessageText,MessagePriority,MessageType,ExpireTime)），它显然是 UTF-8 JSON 格式，并将其显示在 Xcode 上的一个简单标签上。但是，我根本不知道如何获取该数据并对其进行解析。我已经成功地遵循了一个[在线教程](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)，但它处理的是 JSON 对象而不是数组（我认为我正在处理）。

如果有人可以从第一个链接中提取/解析数据到 Xcode 上的基本标签中，我将非常感激。了解它是如何工作的。希望从那里，我能够取得良好的进步。

再次受到高度赞赏！

谢谢你。

如果您不想单击链接，请使用以下 JSON URL 示例：

```
[4,"1.0",1343920773538]
[1,"Spring Gardens","59581","275","Barkingside",1343920940000,1343920940000]
[1,"Spring Gardens","59581","275","Barkingside",1343921717000,1343921717000]
[1,"Spring Gardens","59581","549","Loughton",1343921858000,1343921858000]
[1,"Spring Gardens","59581","275","Barkingside",1343922204000,1343922204000]
[2,"Spring Gardens","59581","8a56a0ab37b72b400137cb7cfd954038_29222",0,3,"Bus routes serving this stop are subject to change during the Olympics and Paralympics games. For more information visit www.tfl.gov.uk/buses for more information.",1344668400000] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:06:14.450

使用该教程显示的 JSONObject，你应该在最后得到一个 NSDictionary 或 NSArray ，它将包含你所有的值，只需将它们映射到最后的标签。

如果您不想这样做，请将响应保存在 char 数组中并在检查 [ 或 " 字符时进行导航，当您发现一个读取字符直到下一次出现并将您读取的所有数据保存到数组或其他内容时这很麻烦，至少需要 3-4 小时为 JSON 数据解密编写您自己的自定义逻辑，您应该使用非常简单的 JSONObject

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:44:43.620

嗨，我有同样的问题。我一直在寻找 json 解决方案，目前我发现处理这些数据的最佳方法是解析为 csv。当您尝试将其解析为 CSV 而不是 JSON 时，该解决方案似乎很直接

# c++ - 全局声明 QStringlist 变量，使用 QFileDialog 获取位置路径并将其打印到 lineEdit 并在 QProcess 中使用

> ID：11781851
> 
> 赞同：0
> 
> 时间：2012-08-02T16:27:46.840
> 
> 标签：c++, qt, qt4, qt4.8

我正在使用 Qt，我需要一些帮助

1.  如何`QStringList`在 Qt 中全局声明变量以便我可以在任何函数中访问它？

2.  如何将所有内容`QStringList`（它包含从中获取的文件路径`QFileDialog`）打印到一个`lineEdit`？

我试过了：

```
ui->lineEdit->setText(filename); 
```

但它给了我错误错误：请求`QString`非标量类型`QStringList`。请给我一些例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:48:28.163

> 如何在 Qt 中全局声明 QStringList 变量，以便我可以在任何函数中访问它

好吧，这不是一个`Qt`问题，而是一个通用的 C++ 问题（如今，全局变量不受欢迎，更可接受的等价物是单例，在 SO 中搜索大量示例）。尽管如此，这样做的一种方法是创建`QStringList`作为实例化的类的静态成员`QFileDialog`，同一个类将是从对话框中检索到它的类，并且通过静态存储（和返回）它，您可以有效地使其成为全局：

```
class A
{
public:
    void openFileDialog() { // Open the dialog, and store the results in list_. }
    static const QStringList& getFileList() { return list_; }
private:
    static list_;
}

// Just call by:
QStringList list = A::getFileList(); 
```

> 如何打印 QStringList 中的所有内容（它包含从 QFileDialog 获取的文件路径）
> 
> 是的，我的 QStringList 只包含 1 个字符串

好吧，如果您`QStringList`只包含一个字符串，请使用：

```
ui->lineEdit->setText(list_[0]); 
```

请记住 a`QStringList`派生自，因此您可以像访问任何元素一样`QVector< QString >`访问单个s。`QString`

只是为了扩展您的第一个问题，可以将字符串列表组合成一个字符串列表的方法有无数种。但是一个非常常见（且简单）的方法`QStringList`是使用`join()`：

```
QStringList list; list << "This" << "is" << "a" << "list.";
list.join( " " ); // "This is a list. " 
```

我真的推荐使用[文档](https://qt-project.org/doc/qt-4.8/)，Qt 非常棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:47:24.507

您应该重新考虑使用全局变量；通常最好将引用传递给需要访问它的函数，但如果必须，这就是你的做法。将定义照常放在您的一个源文件中

```
QStringList foo; 
```

并将 extern 声明放在一个头文件中，该文件包含在您想要使用它的所有文件中，就像这样

```
extern QStringList foo; 
```

想要将字符串列表传递给行编辑似乎也被误导了。最好只像预期的那样传入一个字符串，但是如果你绝对必须传入一个列表，你必须继承 QLineEdit 并给它一个方法，该方法接受一个字符串列表并从它传递的列表中获取一个字符串QLineEdit::setText。

# html - HTML中是否存在（或将存在）图像精灵语法？

> ID：11781854
> 
> 赞同：1
> 
> 时间：2012-08-02T16:28:00.630
> 
> 标签：html, css, background-image, image

我不了解最新的 CSS 改进，所以我认为值得一问；

一个`<img>`元素很好地写为`<img src="/url.png" />`，高度和宽度自动或指定。我喜欢 CSS sprite 的明显加载速度优势，但讨厌为它写出所有的 CSS。是否存在或将存在类似 的语法`<img src="/url.png" Xpx Ypx />`，其中 X/Y 表示类似于 CSS 的位置偏移`background-position`？

我知道图像尺寸会很不稳定，因为它们会在 HTML 中缩放（而不是裁剪，就像带有背景图像的 div 那样）。

这可能吗，还是我只是懒惰？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:30:51.387

无法想象这会成为现实，即使它发生了，你也会多年来一直遇到常见的跨浏览器问题。有许多服务可以为您计算 CSS/坐标 - 例如[SpriteCow](http://www.spritecow.com)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:38:30.630

目前在 HTML 中没有这样的东西。

如果你有一个 1 像素的透明 gif 或 png 方便，你可以在图像标签上使用内联 CSS：

```
<img style="background: url(/url.png) -Xpx -Ypx;" src="/1pix.gif" /> 
```

但是您需要设置图像元素的宽度和高度，以便精灵背景可见。

`<img>`您可以通过将其作为数据 URL直接包含在标签中来避免对透明图像文件的需求：

### 8 位 PNG

```
<img style="background: url(/url.png) -Xpx -Ypx;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAABlBMVEX///8AAABVwtN%2BAAAAAXRS%0ATlMAQObYZgAAAApJREFUCB1jYAAAAAIAAc/INeUAAAAASUVORK5CYII%3D%0A"> 
```

### GIF（小）

```
<img style="background: url(/url.png) -Xpx -Ypx;" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw%3D%3D%0A"> 
```

（见[http://jsfiddle.net/r727j/1/](http://jsfiddle.net/r727j/1/)）

但显然我们在这里进入了相当丑陋的领域。（而且我不能发誓数据 URL 将在 IE 6 中工作。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T16:37:50.863

sprite 本身通常用于将许多小图像组合成一张大图像。这样做不仅可以节省宝贵的加载时间和带宽，还可以使您的网站结构保持整洁和易于管理。

例子

```
{background-position:0px -143px;} /* what ever*/ 
```

# javascript - 为什么 jQuery Validate "remote:" 验证需要一个函数来设置数据值？

> ID：11781856
> 
> 赞同：2
> 
> 时间：2012-08-02T16:28:04.500
> 
> 标签：javascript, jquery, jquery-validate

在 jQuery Validate 文档中，它显示了使用远程验证调用将附加值传递给服务器端验证脚本/资源的示例：

> [http://docs.jquery.com/Plugins/Validation/Methods/remote#code](http://docs.jquery.com/Plugins/Validation/Methods/remote#code)

这是示例代码：

```
$("#myform").validate({
  rules: {
    email: {
      required: true,
      email: true,
      remote: {
        url: "check-email.php",
        type: "post",
        data: {
          username: function() {
            return $("#username").val();
          }
        }
      }
    }
  }
}); 
```

为什么我需要使用函数来设置`username`数据参数？：

```
username: function() {
  return $("#username").val();
} 
```

而不仅仅是：

```
username: $("#username").val() 
```

我已经尝试了这两种方法，果然第二种方法没有赋值`username:`。

我确实在`remote`方法函数的 jQuery Validate 代码中设置了一个断点：

```
remote: function(value, element, param) {
    ...
} 
```

试图了解这里发生了什么，但我真的一点也不聪明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:33:04.727

[`jQuery.fn.validate(config)`](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js)用于*设置*验证规则，并不实际执行验证。发生这种情况时，会准确评估整个`{rules: /* */ }`对象。

* * *

如果你包括

```
$('#username').val() 
```

在规则对象中，将立即评估该表达式，并保存当时元素的值。

* * *

如果你改为通过

```
function() { 
  return $('#username').val(); 
} 
```

[`remote`作为值，当调用验证器](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L1006)并进行 AJAX 调用时，当[`jQuery.param`](https://github.com/jquery/jquery/blob/master/src/ajax.js#L591)将属性展平`data`为字符串时，将评估此函数。

请注意，此验证器会将其整个配置对象合并到它进行的每个 AJAX 调用中，因此在普通 ajax 设置对象中可接受的所有其他选项都可以这样设置，而不仅仅是`data`.

# auto-generate - 通过 Java 客户端在 Riak 中自动生成密钥

> ID：11781857
> 
> 赞同：4
> 
> 时间：2012-08-02T16:28:14.600
> 
> 标签：auto-generate, riak, java-client

Riak 支持在存储对象时自动生成密钥：

[http://wiki.basho.com/Basic-Riak-API-Operations.html](http://wiki.basho.com/Basic-Riak-API-Operations.html)：

> **存储一个新对象并分配随机密钥#**
> 
> 如果您的应用程序宁愿将密钥生成留给 Riak，请向存储桶 URL 发出 POST 请求，而不是向存储桶/密钥对发出 PUT： POST /riak/bucket 如果您在之后不向 Riak 传递“密钥”名称桶，它会知道为你创建一个。

使用java客户端时可以做同样的事情吗？似乎存储对象时必须提供密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:21:51.260

**编辑更新：**这现在在 Java 客户端中可用。它是在 1.0.7 客户端版本中添加的。见：[https ://github.com/basho/riak-java-client/pull/168](https://github.com/basho/riak-java-client/pull/168)

* * *

不幸的是......现在Java客户端不支持这个。

有人为此打开了一个问题：[https ://github.com/basho/riak-java-client/issues/141](https://github.com/basho/riak-java-client/issues/141)

我同意需要添加它。我们目前正在为 Riak 1.2 版本做一些优先级更高的事情，但我希望在不久的将来继续努力并添加它。

# c# - DataGridTemplateColumn 中的复选框出现故障

> ID：11781859
> 
> 赞同：1
> 
> 时间：2012-08-02T16:28:19.063
> 
> 标签：c#, silverlight, datagrid

我在 Silverlight 中的 Datagrid 中添加了一个带有复选框的 DataGridTemplateColumn。Checkbox 作为列成功添加到数据网格中。但是，如果我选中了多个 chcekbox，则此列中的其他一些复选框将自动受到影响（即，从选中更改为未选中，反之亦然。）。我没有为此复选框添加任何事件处理程序，那么这怎么会发生呢？在我看来，如果我滚动数据网格以查看更多记录，数据网格会自动刷新/更新，此时复选框会混乱。我的代码如下：

```
 DataGridTemplateColumn templateColumn = new DataGridTemplateColumn() { Header = "header",Width=new DataGridLength(50) };               
            StringBuilder CellTemp = new StringBuilder();
            CellTemp.Append("<DataTemplate ");
            CellTemp.Append("xmlns='http://schemas.microsoft.com/winfx/");
            CellTemp.Append("2006/xaml/presentation' ");
            CellTemp.Append("xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' >");
            CellTemp.Append("<CheckBox  x:Name='" + "checkBoxHeader" + "' Margin='4'  IsChecked='False'/>");
            CellTemp.Append("</DataTemplate>");
            templateColumn.CellTemplate = (DataTemplate)XamlReader.Load(CellTemp.ToString());
            ftrDataGrid.Columns.Add(templateColumn); 
```

我应该如何解决这个问题，我应该向这个数据网格添加一个事件处理程序，但是如何解决呢？

非常感谢您的意见，

魏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:10:34.563

在模板中设置绑定就像这样简单：

```
DataGridTemplateColumn templateColumn = new DataGridTemplateColumn() { Header 
...

CellTemp.Append("<CheckBox  x:Name='" + "checkBoxHeader" + "' Margin='4'  IsChecked="{Binding MyProperty, Mode=TwoWay}"/>");
...            
ftrDataGrid.Columns.Add(templateColumn); 
```

其中 MyProperty 是一个布尔值。

# android - ListFragment 在使用自定义视图时隐藏不确定的进度指示器

> ID：11781860
> 
> 赞同：0
> 
> 时间：2012-08-02T16:28:19.967
> 
> 标签：android, android-listfragment

我目前有一个 ListFragment，我从中返回一个自定义 ListView `OnCreateView()`（包括在下面）。

我遇到的问题是当视图中只有几个项目时，您可以在后台看到进度指示器。`setListShown(true)`隐藏进度指示器，但在返回自定义视图时会导致 IllegalStateException。

关于隐藏进度指示器的方法有什么想法吗？

```
@Override
public ListView onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    ListView lv = new ListView(this.getActivity());
    lv.setId(android.R.id.list);
    lv.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL);
    lv.setStackFromBottom(true);

    return lv;
} 
```

编辑：我也尝试过膨胀视图，但它返回相同的 IllegalStateException。

```
@Override
public void onActivityCreated (Bundle savedInstanceState){
    super.onActivityCreated(savedInstanceState);

    setListShown(true);
}

@Override
public ListView onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    ListView lv = (ListView) inflater.inflate(R.layout.chat_fragment, container, false);
    lv.setId(android.R.id.list);

    return lv;
}

08-02 12:58:19.552: E/AndroidRuntime(27844): FATAL EXCEPTION: main
08-02 12:58:19.552: E/AndroidRuntime(27844): java.lang.RuntimeException: Unable to start activity ComponentInfo{edu.wisc.ACHESS/edu.wisc.ACHESS.ChatMessageActivity}: java.lang.IllegalStateException: Can't be used with a custom content view
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.os.Looper.loop(Looper.java:137)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.app.ActivityThread.main(ActivityThread.java:4745)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at java.lang.reflect.Method.invokeNative(Native Method)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at java.lang.reflect.Method.invoke(Method.java:511)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at dalvik.system.NativeStart.main(Native Method)
08-02 12:58:19.552: E/AndroidRuntime(27844): Caused by: java.lang.IllegalStateException: Can't be used with a custom content view
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.support.v4.app.ListFragment.setListShown(ListFragment.java:282)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.support.v4.app.ListFragment.setListShown(ListFragment.java:258)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at edu.wisc.ACHESS.fragments.ChatFragment.onViewCreated(ChatFragment.java:19)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:885)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:523)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.app.Activity.performStart(Activity.java:5018)
08-02 12:58:19.552: E/AndroidRuntime(27844):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2032)
08-02 12:58:19.552: E/AndroidRuntime(27844):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:10:10.963

从[ListFragment 不接受我的布局](https://stackoverflow.com/questions/10608624/list-fragment-does-not-accept-my-layout)

似乎这是谷歌端的一个错误。这里有一些建议： [http ://code.google.com/p/android/issues/detail?id=21742](http://code.google.com/p/android/issues/detail?id=21742)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-12-18T06:36:41.900

您可以通过以下方式隐藏指标

```
getView().findViewById(16711682).setVisibility(View.GONE);
//16711682 is the variable mProgressContainer's id. 
```

把它放在视图初始化之后，就像在`onActivityCreated`方法中一样

# iphone - 解析 "" 和 null 并检查 iphone 中的空字段

> ID：11781863
> 
> 赞同：1
> 
> 时间：2012-08-02T16:28:43.693
> 
> 标签：iphone, json, ios5

下面是我输入的 JSON 输出`NSDictionary`。

任何人都可以说一种通常识别`""`值和空值的方法吗？我正在尝试检查该值是否为空，并将其分配给`UIlabel`.

```
User =     {
        address = "";
        birthday = "<null>";
        gender = 0;
        "mobile_number" = "<null>";
        name = ambili;
        "phone_number" = "";
        picture = "http://lb.fo********inds.com/images/users/profile_pics/no_picture.jpg";
    };
    status = OK;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:36:36.793

您可以检查一个字符串是否等于另一个字符串：

```
if ([myString isEqualToString:@""] || [myString isEqualToString:@"<null>"]) {
    NSLog(@"empty or null");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:22:17.133

最后我找到了一种简单的方法并且效果很好。我很高兴与大家分享。

```
 id phoneString = [Contentds valueForKeyPath:@"User.phone"];
    if (phoneString != [NSNull null])
    {
    label.text=[Contentds valueForKeyPath:@"User.phone"];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:23:20.263

由于您多次使用它，因此它是类扩展的一个很好的候选者。当您使用类扩展时，您可以使用自定义函数，例如：

```
if ([birthday hasJSONData])
{
    // Do something
} 
```

为此，您创建一个新的 NSString 类扩展，如下所示：

**头文件（NSString+Kurian_Utils.h）：**

```
#import <Foundation/Foundation.h>

@interface NSString (Kurian_Utils)

- (BOOL)hasJSONData;

@end 
```

**实现文件（NSString+Kurian_Utils.m）：**

```
#import "NSString+Kurian_Utils.h"

@implementation NSString (Kurian_Utils)

// If the NSString is nil, calling this function will return NO because it is sent to nil.
 - (BOOL)hasJSONData
{
    if ([self length] == 0)
    {
        return NO;
    }

    if ([self localizedCaseInsensitiveCompare:@"<null>"] == NSOrderedSame)
    {
        return NO;
    }

    return YES;
}

@end 
```

然后就`#import "NSString+Kurian_Utils.h"`在你要使用的文件中`hasJSONData`。

# javascript - 使用 cookie 作为计数器？

> ID：11781864
> 
> 赞同：0
> 
> 时间：2012-08-02T16:28:47.260
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery Cookie 插件创建和存储 cookie。我想cookie只是一个普通的柜台。我需要它是一个 cookie，因为如果页面被刷新，我想让计数器继续运行。当某些条件为真时，我希望将 1 添加到 cookie 值中。看起来很简单，但我在使用插件时遇到了麻烦。

我创建了这样的cookie：

```
$(document).ready(function(){
    $.cookie("cookieValue", "0", { expires: 7 , path: '/' }); 
}); 
```

我正在努力实现的一个小例子：

```
if (/*some condition*/) {
    cokieValue++;
} 
```

当条件为真时这不起作用，cookie值保持在0。我也试过：

```
$(document).ready(function(){
    $.cookie("cookieValue", "0", { expires: 7 , path: '/' });  
    var cookieValue = parseInt($.cookie("cookieValue"));

    if (/*some condition*/) {
        cookieValue++;
    } 
}); 
```

这也不起作用 - cookieValue 保持为 0。关于如何完成此操作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:29:51.560

在将其更新为零之前，您需要检查它是否存在。

```
if( $.cookie('cookieValue') === null ) { 
    $.cookie( 'cookieValue', '0',  { expires: 7, path: '/' } );
} 
```

您需要在更新后保存该值。

```
$.cookie("cookieValue", cookieValue, { expires: 7 , path: '/' }) 
```

所以最终的代码看起来像

```
$(function(){  //shortcut for document.ready
    var cookieVal = $.cookie("cookieValue");  //grab the cookie
    if( cookieVal === null ) {   //see if it is null
        $.cookie( 'cookieValue', '0',  { expires: 7, path: '/' } );  //set default value
        cookieVal = 0;  //set the value to zero
    }
    var cookieValue = parseInt(cookieVal,10);  //convert it to number

    if (/*some condition*/) {
        cookieValue++;  //increment the value
        $.cookie("cookieValue", cookieValue, { expires: 7 , path: '/' }); //save new value
    } 
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T16:30:47.390

```
$(document).ready(function(){
    $.cookie("cookieValue", "0", { expires: 7 , path: '/' });  
    var cookieValue = parseInt($.cookie("cookieValue"));

    if (/*some condition*/) {
        cookieValue++;
        $.cookie("cookieValue", cookieValue, { expires: 7 , path: '/' });
    } 
}); 
```

必须使用新值设置 cookie。

# c# - 从 UART 接收数据并显示它（图形应用程序）

> ID：11781865
> 
> 赞同：-1
> 
> 时间：2012-08-02T16:28:53.250
> 
> 标签：c#, .net, visual-studio, graphics, serial-port

我想知道是否有人知道编写应用程序的最简单方法（我更喜欢 VisualStudio/C#，但可以使用 Python 或 Java）从串行端口（UART）接收数据并显示它（只是数字，如“计数器” ）。重点是>>easy<<方式，因为我不需要任何高级的东西，我也没有时间去做......但它必须是一个图形应用程序。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:32:54.653

我想说最简单的方法是使用[pyserial](http://pyserial.sourceforge.net/)，这将使从串行端口读取变得微不足道。至于gui，你可以很方便地使用python基于Tk的内置框架，或者使用wxpython。

# django - django queryset 从 postgresql 视图返回错误值

> ID：11781867
> 
> 赞同：3
> 
> 时间：2012-08-02T16:28:57.213
> 
> 标签：django, postgresql

我在这个设置的某个地方有一个疯狂的错误。

该数据库是 Postgres 9.1 并且是预先存在的（不由 Django 管理）。其中存在 1 个表，然后是一些相当简单的视图，其中一个称为**valid_logins_dow_popularity**定义：

```
 =>\d+ valid_logins_dow_popularity
             View "public.valid_logins_dow_popularity"
   Column   |       Type       | Modifiers | Storage | Description
------------+------------------+-----------+---------+-------------
 logins_avg | double precision |           | plain   |
 dow        | double precision |           | plain   |
View definition:
 WITH by_dow AS (
         SELECT valid_logins_over_time.count, date_part('dow'::text, valid_logins_over_time.date) AS dow
           FROM valid_logins_over_time
        )
 SELECT avg(by_dow.count)::double precision AS logins_avg, by_dow.dow
   FROM by_dow
  GROUP BY by_dow.dow
  ORDER BY by_dow.dow; 
```

在 Django 1.4 中，我定义了一个使用该视图作为数据源的简单模型：

```
class ValidLoginsDowPopularity(models.Model):
    class Meta:
        db_table = 'valid_logins_dow_popularity'
        managed = False

    logins_avg = models.FloatField(
                            db_column='logins_avg')
    # Day of Week (dow)
    dow = models.IntegerField(db_column='dow',
                              primary_key=True)

    def __unicode__(self):
        return u"%d : " % (self.dow, self.logins_avg ) 
```

当我直接从数据库中获取数据时，我得到一组数字：

```
SELECT "valid_logins_dow_popularity"."logins_avg", "valid_logins_dow_popularity"."dow" 
  FROM "valid_logins_dow_popularity";

    logins_avg    | dow
------------------+-----
 28.8571428571429 |   0
 95.1428571428571 |   1
 91.4285714285714 |   2
           89.625 |   3
 82.6666666666667 |   4
 61.4285714285714 |   5
 28.4285714285714 |   6
(7 rows) 
```

当我通过 Django 模型获取数据时，我得到了一些相关性模糊但不同的数字集：

```
In [1]: from core.models import *

In [2]: v = ValidLoginsDowPopularity.objects.all()

In [3]: for i in v:
    print "logins_avg : %f | dow : %d" % (i.logins_avg, i.dow)
   ...:
logins_avg : 25.857143 | dow : 0
logins_avg : 85.571429 | dow : 1
logins_avg : 89.571429 | dow : 2
logins_avg : 86.375000 | dow : 3
logins_avg : 83.000000 | dow : 4
logins_avg : 67.000000 | dow : 5
logins_avg : 28.000000 | dow : 6 
```

迄今为止，我已经验证了 Django 生成的 sql，当直接从 psql 运行时会返回预期的输出。我同样尝试过使用`IntegerField`,`FloatField`和属性`DecimalField`的Django 模型`logins_avg`- 都具有相同但不正确的值。我还编写了一个简单的测试程序来绕过 Django 代码并确保它不是 psycopg2 问题：

```
import psycopg2

def main():
    conn_string = "dbname='********' user='*********'"

    conn = psycopg2.connect(conn_string)
    cursor = conn.cursor()

    sql = "select * from valid_logins_dow_popularity"
    cursor.execute(sql)

    for rec in cursor.fetchall():
        print rec

if __name__ == '__main__':
    main() 
```

其中，当运行时给出正确的错误，所以 psycopg2 似乎在做正确的事情：

```
$ python test_psycopg2.py
(28.8571428571429, 0.0)
(95.1428571428571, 1.0)
(91.4285714285714, 2.0)
(89.625, 3.0)
(82.6666666666667, 4.0)
(61.4285714285714, 5.0)
(28.4285714285714, 6.0) 
```

这怎么可能？任何线索将不胜感激。我在哪里可以深入研究 Django 代码，看看哪里出了问题？我应该向 Django 项目报告这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:57:14.713

重新定义视图并将值转换为数字而不是双精度。在 Django 模型中，您需要一个`DecimalField`与 Postgres 匹配的`numeric`（如`numeric(15,10)`-> `DecimalField(max_digits=15, decimal_places=10)`）。

在 Django 和数据库之间的浮点值方面，我从来没有任何运气，并且之前与其他与数据库通信的软件也遇到过类似的浮点怪异问题。做`numeric`<->`DecimalField`是我发现保证浮点值不会变得奇怪的唯一方法——通过将它们更改为定点值。

# python - Django链接到现有项目或在多模型表单中创建唯一

> ID：11781877
> 
> 赞同：0
> 
> 时间：2012-08-02T16:29:24.060
> 
> 标签：python, django, django-models, django-forms, django-views

我有一个使用多个模型的表单，这些模型具有关系。如果其中一种形式的数据与现有条目匹配，我希望将外键映射到现有条目，而不是创建重复条目。但是，is_valid() 对于已经存在的条目会失败，我不确定在清理表单数据之前使用表单数据是否安全，以便首先查找存在的数据库。也许我需要更改 clean 函数以忽略唯一性要求，然后在视图中处理它？

下面是一个示例，用户在 Web 表单中输入他们的姓名、城市和州。如果数据库已经知道那个城市，那么这个人的外键应该只指向现有的条目。如果是新城市，则应将其添加到数据库中。因此，它始终是针对 Person 的 CREATE，但它可能是也可能不是针对 Hometown 的 CREATE。

模型.py

```
class Person(models.Model):
    name = models.CharField()
    hometown = models.ForeignKey('Hometown')

class Hometown(models.Model):
    cityName = models.CharField()
    stateName = models.CharField()
    mascot = models.CharField()

    #If same city and state, it's the same place
    class Meta:
        unique_together = ("cityName", "stateName") 
```

表格.py

```
class PersonForm(ModelForm):
    class Meta:
        model = Person
        exclude = ('hometown')

class HometownForm(ModelForm):
    class Meta:
        model = Hometown 
```

视图.py

```
def newPerson(request):
    if request.method == 'POST':
        person = PersonForm(request.POST)
        hometown = HometownForm(request.POST)
        if (person.is_valid() and hometown.is_valid():
            p = person.save(commit=False)
            h = Hometown.objects.get_or_create(**hometown.cleaned_data)
            p.hometown = h
            p.save() 
```

此代码不起作用，因为如果该城市/州对已经在数据库中， hometown.is_valid() 将为 False。我应该重写 clean() 函数以允许忽略唯一性要求（通过使用 get_or_create 在视图中强制执行它）还是表明我的设计从根本上是解决此问题的错误方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:44:05.193

stackoverflow 上的一个类似问题包含我需要的信息。 [Django ModelForm 上 ForeignKey 字段的自由格式输入](https://stackoverflow.com/questions/4137196/free-form-input-for-foreignkey-field-on-a-django-modelform?rq=1)

正如我最初的问题一样，我删除了 HometownForm，而是将相关字段添加到 PersonForm，然后让 PersonForm 的 save() 函数处理 Hometown 的 get_or_create() 行为。

# javascript - 在 ECMAScript 5 之后重新审视扩展原生原型

> ID：11781878
> 
> 赞同：5
> 
> 时间：2012-08-02T16:29:28.903
> 
> 标签：javascript, ecmascript-5

最近，鉴于 ECMAScript 5 中定义属性的变化，我重新审视了我们是否可以安全地扩展原生 JavaScript 原型的问题。事实上，一直以来我都扩展了 Array 和 Function 等原型，但出于显而易见的原因，我避免使用 Object。在 Jasmine 的单元测试中，通过将 Object.prototype 规范添加到我自己的个人框架的规范中，使用不可枚举的**函数扩展 Object.prototype**似乎是安全的。然而，像“类型”属性这样的数据属性，带有执行任何异常处理的 getter/setter 会产生意想不到的后果。仍然有可能与其他库发生冲突——尽管在我的工作中，这几乎没有出现过。尽管如此，只要函数不可枚举，看起来扩展 Object.prototype 是安全的。

你怎么看？现在扩展 Object.prototype 是否安全？请讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:18:07.097

将原生对象扩展为 JavaScript 可能会变得更安全一些，但仍然存在许多冲突问题。通常，除非您扩展对象以支持最新标准的标准化行为，否则引入包装器确实会更安全 - 当您是唯一可以控制的人时，以正确的方式做事要容易得多。

说到**环境**原生的对象（DOM 元素和节点，AJAX 的东西），新的 JS 标准仍然没有给出，而且可以说，除了接口标准中定义的内容之外，不能保证与那些对象的任何交互。永远不要忘记它们可以通过许多不同的脚本引擎访问，因此不需要针对一种特定语言的怪癖进行定制 - JS。因此，不扩展这些内容的建议仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:01:28.903

确定的，绝对的答案是......

“这取决于。” :)

扩展任何内置的 JavaScript 对象可能是完全安全的，也可能是一场彻底的灾难。这取决于你在做什么以及你是如何做的。

使用聪明的做法和常识并测试它的地狱。

# mysql - 查询作为 SELECT 但不能作为更新？

> ID：11781881
> 
> 赞同：0
> 
> 时间：2012-08-02T16:29:36.167
> 
> 标签：mysql, mysql-error-1064

我试图在 MySQL 中执行重复的清理查询，使用一个联系人表和一个 accounts_contacts 连接表。我将查询用作 SELECT 查询，但是当我尝试将其设为 UPDATE 时，我收到了一个非常不具体的错误：

#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的“FROM SugarDB.contacts INNER JOIN (SELECT dupIDs.id FROM (SELECT ct') 附近使用正确的语法

这是查询：

```
UPDATE ctUpdate  
    SET ctUpdate.deleted = 1 
    FROM sugarDB.contacts AS ctUpdate 
    INNER JOIN (
        SELECT dupIDs.id
        FROM (
            SELECT ctIDs.id
            FROM sugarDB.contacts AS ctIDs 
            INNER JOIN (
                SELECT ctSource.first_name,
                    ctSource.last_name
                FROM sugarDB.contacts AS ctSource
                GROUP BY ctSource.first_name,
                    ctSource.last_name
                HAVING COUNT(*) > 1
                ORDER BY COUNT(*) DESC
            )
            AS ctSource 
            ON ctIDs.first_name = ctSource.first_name 
                AND ctIDs.last_name = ctSource.last_name
        ) 
        AS dupIDs
        LEFT JOIN sugarDB.accounts_contacts AS a2cIDs
        ON dupIDs.id = a2cIDs.contact_id 
        WHERE a2cIDs.id IS NULL
    )
    AS dupIDs
    ON ctUpdate .id = dupIDs.id
; 
```

我已经倒了几天了，我找不到错误。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:33:10.040

[MySql 中的语句中没有`FROM`子句。`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)

相反，您的联接应该是您的`UPDATE`子句的一部分：

```
UPDATE sugarDB.contacts AS ctUpdate 
    INNER JOIN (
        SELECT dupIDs.id
        FROM (
            SELECT ctIDs.id
            FROM sugarDB.contacts AS ctIDs 
            INNER JOIN (
                SELECT ctSource.first_name,
                    ctSource.last_name
                FROM sugarDB.contacts AS ctSource
                GROUP BY ctSource.first_name,
                    ctSource.last_name
                HAVING COUNT(*) > 1
                ORDER BY COUNT(*) DESC
            )
            AS ctSource 
            ON ctIDs.first_name = ctSource.first_name 
                AND ctIDs.last_name = ctSource.last_name
        ) 
        AS dupIDs
        LEFT JOIN sugarDB.accounts_contacts AS a2cIDs
        ON dupIDs.id = a2cIDs.contact_id 
        WHERE a2cIDs.id IS NULL
    )
    AS dupIDs
    ON ctUpdate .id = dupIDs.id
    SET ctUpdate.deleted = 1 
; 
```

# facebook - 将 twitter 链接到 facebook 页面

> ID：11781887
> 
> 赞同：1
> 
> 时间：2012-08-02T16:30:04.560
> 
> 标签：facebook, twitter

截至 2012 年 8 月 1 日，我刚刚在 FB 上创建了一个页面，当我试图将我的 twitter 帐户链接到 facebook 页面时，我不断收到此错误。

> “错误：此端点已被弃用。要暂时重新启用它，您可以禁用“august_2012”平台迁移。它将在 2012 年 8 月 1 日永久禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:46:53.510

这是一个推特问题。facebook 的 twitter 应用程序尚未更新到新的 iFrames 框架，仍然依赖于 FBML 框架。因此，我们必须等到应用程序更新。上面提供的解决方案仅在 twitter 应用程序的开发人员启用该选项时才有效。你可以在这里阅读更多：http: [//technoritz.com/post/28770685151/this-is-not-a-facebook-problem-it-is-a-twitter](http://technoritz.com/post/28770685151/this-is-not-a-facebook-problem-it-is-a-twitter)

以下是来自推特的官方回复： [https ://twitter.com/Support/statuses/231138059071156225](https://twitter.com/Support/statuses/231138059071156225)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:00:59.933

“一些用户报告了将他们的 Twitter 帐户连接到 Facebook 页面的问题。我们的工程师正在调查。” 来自推特@Support。我有同样的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:42:08.643

尝试[https://twitter.com/settings/profile](https://twitter.com/settings/profile) 或 [https://www.facebook.com/twitter/](https://www.facebook.com/twitter/)

# c# - C# 十进制.Epsilon

> ID：11781899
> 
> 赞同：50
> 
> 时间：2012-08-02T16:30:34.853
> 
> 标签：c#, .net, decimal, epsilon

为什么`Decimal`数据类型没有`Epsilon`字段？

[根据手册](https://msdn.microsoft.com/en-us/library/364x0z75.aspx)，取值范围`decimal`为 ±1.0 × 10e−28 到 ±7.9 × 10e28。

[的描述`Double.Epsilon`](https://msdn.microsoft.com/en-us/library/system.double.epsilon.aspx)：

> `Double`表示大于零的最小正值

所以看起来，`Decimal`也有这样一个（非平凡的）价值。但是为什么它不容易访问呢？

我确实明白 +1.0 × 10e−28 正是大于零的最小正 Decimal 值：

```
decimal Decimal_Epsilon = new decimal(1, 0, 0, false, 28); //1e-28m; 
```

顺便说一句，有几个问题可以提供有关 Decimal 数据类型的内部表示的信息：

*   [c#中的十进制误解？](https://stackoverflow.com/questions/10614592/decimal-in-c-sharp-misunderstanding)
*   [小数可以表示的第二个最小值是多少？](https://stackoverflow.com/questions/11241842/whats-the-second-minimum-value-that-a-decimal-can-represent)

`Epsilon`这是一个有用的例子。

假设我有来自某个采样集的值的加权总和以及所取样本的权重（或计数）总和。现在我想计算加权平均值。但我知道权重（或计数）的总和可能仍然为零。为了防止被零除，我可以做`if... else...`并检查零。或者我可以这样写：

```
T weighted_mean = weighted_sum / (weighted_count + T.Epsilon) 
```

这段代码在我看来更短。或者，或者，我可以跳过`+ T.Epsilon`并改为初始化：

```
T weighted_count = T.Epsilon; 
```

当我知道实际重量的值永远不会接近时，我可以这样做`Epsilon`。

对于某些数据类型和用例，这可能更快，因为它不涉及分支。据我了解，即使分支很短，处理器也无法同时使用两个分支进行计算。而且我可能知道零点以 50% 的比率随机出现 :=) 对于`Decima`l，速度方面可能并不重要，甚至在第一种情况下也可能没有积极作用。

我的代码可能是通用的（例如，生成的），我不想为小数编写单独的代码。因此，人们希望看到它`Decimal`与其他实值类型具有相似的接口。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T16:46:08.210

与该定义相反，epsilon 实际上是一个概念，用于消除值的二进制和十进制表示之间的转换歧义。例如，十进制的 0.1 没有简单的二进制表示，因此当您将 double 声明为 0.1 时，实际上是将该值设置为二进制的近似表示。如果您将该二进制表示数字添加到自身 10 次（数学上），您会得到一个大约为 1.0 的数字，但不完全是。一个 epsilon 会让你捏造数学，并说添加到自身的 0.1 的近似表示可以被认为等同于 0.2 的近似表示。

十进制值类型不需要这种由表示性质引起的近似值，它已经是十进制表示。这就是为什么任何时候您需要处理实际数字和本身不是近似值的数字（即货币而不是质量），要使用的正确浮点类型是十进制而不是双精度数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-18T03:06:12.140

如果我们只考虑 96 位尾数，则可以认为 Decimal 类型的 epsilon 等于由 96 位设置的 BigInteger 的倒数。这显然是一个太小的数字，无法用当前的内在价值类型来表示。

换句话说，我们需要一个“BigReal”值来表示这么小的一部分。

坦率地说，这只是 epsilon 的“粒度”。然后，我们需要知道指数（来自 GetBits() 的最高 Int32 的第 16-23 位）以得出给定十进制值的“真实” epsilon。

显然，“epsilon”对于 Decimal 的含义是可变的。您可以将粒度 epsilon 与指数一起使用，并为 GIVEN 小数得出一个特定的 epsilon。

但请考虑以下相当有问题的情况：

```
[TestMethod]
public void RealEpsilonTest()
{
    var dec1 = Decimal.Parse("1.0");
    var dec2 = Decimal.Parse("1.00");
    Console.WriteLine(BitPrinter.Print(dec1, " "));
    Console.WriteLine(BitPrinter.Print(dec2, " "));
} 
```

> DEC1: 00000000 00000001 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 000000000 00000000000000000
> 
> 十二月2; 00000000 00000010 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 0000000000000000000000000000000000000

尽管两个解析值看似相等，但它们的表示并不相同！

这个故事的寓意是......在认为你理解它之前要非常小心，你彻底理解了 Decimal ！！！

暗示：

如果您想要 Decimal 的 epsilon（理论上），请创建一个`([StructLayout[LayoutKind.Explicit])`结合 Decimal（128 位）和 BigInteger（96 位）和 Exponent（8 位）的 UNION。Epsilon 的 getter 将根据粒度 epsilon 和指数返回正确的 BigReal 值；当然，假设存在一个`BigReal`定义（我已经听了很长时间了，即将到来）。

顺便说一句，粒度 epsilon 将是一个常量或静态字段......

```
static grain = new BigReal(1 / new BitInteger(new byte[] { 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF }); 
```

家庭作业：BigInteger 的最后一个字节应该是`0xFF`或`0x7F`（或其他东西）？

PS：如果所有这些听起来都比您希望的要复杂得多，那么……考虑一下计算机科学的回报相当不错。/-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-04T12:33:41.253

我可以计算的十进制的最小数字是：

```
public static decimal DecimalEpsilon = (decimal) (1 / Math.Pow(10, 28)); 
```

这是在 C# 交互窗口中运行以下命令：

```
for (int power = 0; power <= 50; power++) { Console.WriteLine($"1 / 10^{power} = {((decimal)(1 / (Math.Pow(10, power))))}"); } 
```

具有以下输出：

```
1 / 10^27 = 0.000000000000000000000000001
1 / 10^28 = 0.0000000000000000000000000001
1 / 10^29 = 0
1 / 10^30 = 0 
```

# c# - 在 ShellWindows 上循环时出错

> ID：11781902
> 
> 赞同：1
> 
> 时间：2012-08-02T16:30:48.657
> 
> 标签：c#, .net, internet-explorer, hresult, shdocvw

我偶尔会收到“错误 HRESULT E_FAIL 已从对 COM 组件的调用中返回”。循环 ShellWindows 类时出错。似乎主要发生在计算机从睡眠中唤醒之后。我必须重新启动计算机才能清除这个不好的错误。

错误发生在以下代码中的“foreach”循环行：

```
log.Debug(String.Format("new ShellWindowsClass"));
ShellWindows m_IEFoundBrowsers = new ShellWindowsClass();

log.Debug(String.Format("Loop begin"));
foreach (InternetExplorer Browser in m_IEFoundBrowsers)
{
    log.Debug(String.Format("Browser {0} ?= {1}", Browser.HWND, pid));
    if (Browser.HWND == pid)
    {
        found = Browser;
        break;
    }
}
log.Debug(String.Format("Loop end")); 
```

我正在为 Dot Net Framework 3.0 进行编译。

除了重新启动计算机之外，还有什么解决此错误的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:30:50.867

从 [这个线程](http://social.msdn.microsoft.com/Forums/sk/ieextensiondevelopment/thread/dbdc3707-16cf-44ad-a681-fe92eb9bc853)我找到了解决方案。问题不在循环的开始，而是在第一个调试日志语句中。这行代码是失败的。

```
log.Debug(String.Format("Browser {0} ?= {1}", Browser.HWND, pid)); 
```

它失败了，因为`Browser.HWND`是什么引发了异常。

解决方案是检查`Browser`变量并检查其进程名称。像这样获取进程名称：

```
string processName 
  = System.IO.Path.GetFileNameWithoutExtension(Browser.FullName).ToLower(); 
```

这样做，我通常看到的价值`processName`是：

1.  `"iexplore"`
2.  `"explorer"`

时`processName="explorer"`，调用会`Browser.HWND`导致“错误 HRESULT E_FAIL 已从对 COM 组件的调用中返回”。错误。

为防止该错误，请添加 if 语句：

```
if (processName.Equals("iexplore")) { . . . } 
```

并且仅当此 if 语句为真时才采取行动。

# sql - 我在哪里可以获得旧的免费版本的 Anjlab 的 SQL Profiler？

> ID：11781910
> 
> 赞同：24
> 
> 时间：2012-08-02T16:31:05.543
> 
> 标签：sql, sql-server, profiling, profiler

**注意：虽然这个问题可能不适合 SO 的常见编程问题，但在 StackOverflow、ServerFault、SuperUser 和 Programmer's Exchange 之外，只有 SO 有任何提到这个软件的问题，这就是我决定在这里发帖的原因。**

我曾经使用过 Anjlab 的开源 SQL Profiler 工具，发现它非常宝贵。不幸的是，该软件似乎已转换为付费版本，完全删除了对开源版本的所有访问权限。由于这个软件在 SO 的问题中多次提到，我想知道是否有人仍然拥有旧的、免费的、开源版本的副本并且愿意分享它？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-13T14:16:23.760

我设法找到以下内容：

~~[SqlExpressProfiler-1.2.1812.13.zip](http://www.mdasoftware.com.br/arquivos/SqlExpressProfiler-1.2.1812.13.zip)~~ <-- 你必须付费才能使用性能仪表板。

~~[SqlExpressProfiler-1.2.1708.7.zip](http://www.schoolpro.com.au/files/v2/Database/Tools/SqlExpressProfiler-1.2.1708.7.zip)~~

[SqlExpressProfiler-1.2.1708.7.zip](http://helmpcb.com/misc/SqlExpressProfiler-1.2.1708.7.zip)

~~[SqlExpressProfiler.1.2.1624.78.zip](http://content33.wuala.com/rawcontent/tP4DZc1rOtMK0_i6KexkyFdvGT2vfSYuuQXxqsQPJZufr7x5BD9pNMc2jMzRpVsWqjcz7reFbe9_vZu7o0qok13KW9c-Fe45y3CWJHXCcG9CT0-0BO4WaLrd_z5O8oOCfArQTHPFlPRV1JBMfOKZQwJDIDyvy2ZZTGCXbkNo618WffnBo8_mWH3tUkB9YCTbNObicvXUonKzhG_O2HRbT8Rud358ICq1x-B130erjv0/SqlExpressProfiler.1.2.1624.78.zip)~~

[SqlExpressProfiler-1.1.1423.75.zip](http://data.itelix.pl/SqlExpressProfiler-1.1.1423.75.zip)

我将测试它们并消除无用的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T12:23:49.487

如果您只需要一个用于查询的监控工具，这是一个简单的替代方案：

[http://expressprofiler.codeplex.com/](http://expressprofiler.codeplex.com/)

我希望它不会很快消失。

我目前正在将它与 SQL Server Express 2012 一起使用来监视来自我的 NHibernate 应用程序的查询（不想仅为此目的添加 log4net 并且仅将 show_sql 输出添加到我的 WCF 服务中没有的控制台窗口）。

非常好的和稳定的实用程序。我发现它比需要各种设置的 MS SQL Profiler 更容易使用，各种服务器版本的跟踪配置文件等等。Express Profiler - 只需启动，点击运行，所有 T-SQL 和 sp_execute 查询都会显示出来。

它是开源的，您可以根据需要添加更多功能。我想，清除按钮会很有用，因为现在您必须再次停止并运行才能清除列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:10:36.093

这是一个[链接](http://dea.vocord.com/pub/SQL/)。使用风险自负。

您也可以搜索**SqlExpressProfiler-0.1.1094.67.zip**

# ruby-on-rails - 每个 Rails 命令都会失败

> ID：11781916
> 
> 赞同：0
> 
> 时间：2012-08-02T16:31:12.090
> 
> 标签：ruby-on-rails, ruby, macos

我最近遇到了一个问题，绝望地决定在我的 OS X 10.6 上卸载并重新安装 Ruby 和 Rails。我已经重新安装了 Ruby 和 gem 安装的 rails。但是，现在，每次尝试运行 rails 命令（甚至是 -v）时，我都会收到此错误或类似错误：

```
 rails -v
    /Users/Dylan/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find bcrypt-ruby-3.0.1 in any of the sources (Bundler::GemNotFound)
        from /Users/Dylan/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `map!'
        from /Users/Dylan/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `materialize'
        from /Users/Dylan/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.1.5/lib/bundler/definition.rb:127:in `specs'
        from /Users/Dylan/.rvm/gems/ruby-1.9.3-p1

25@global/gems/bundler-1.1.5/lib/bundler/environment.rb:27:in `specs'
    from /Users/Dylan/.rvm/gems/ruby-1.9.3-p125@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
    from /Users/Dylan/.rvm/gems/ruby-1.9.3-p125@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:60:in `setup'
    from /Users/Dylan/.rvm/gems/ruby-1.9.3-p125@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:75:in `<top (required)>'
    from /Users/Dylan/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /Users/Dylan/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /Users/Dylan/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /Users/Dylan/.rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:9:in `<main>' 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:43:44.780

看来您需要安装[bcrypt-ruby](https://github.com/codahale/bcrypt-ruby)

也许试试`sudo gem install bcrypt-ruby`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:56:04.717

运行`bundle install`然后运行`bundle exec rails -v`看看这是否解决了问题。

# agile - 与 github 集成的 Scrum 工具，有什么建议吗？

> ID：11781919
> 
> 赞同：8
> 
> 时间：2012-08-02T16:31:20.830
> 
> 标签：agile, scrum

我正在寻找一个很棒的敏捷 scrum 工具，它允许我执行历史、史诗和任务，将文件上传到历史或任务，并将它们与 github 提交集成，它还应该允许创建每个用户和活动和项目的时间分析等图形结果图和类似的东西......

我希望使用与云相关的东西，如果它免费更好......但如果它值得，我愿意支付！

我正在寻找的是将敏捷方法引入我与 4 个朋友一起进行的为期 4 个月的项目中，他们正在寻找建立我们自己的公司。

谢谢您的帮助！

=== 编辑 ===

我一直在查看你们提供的工具，仍然没有决定，我发现另一个可能会觉得有用，但正如我所说我还没有决定，所以你们检查了 TargetProcess.com 看起来很有趣吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T19:42:59.260

您可以查看[https://sprint.ly/](https://sprint.ly/)和[http://www.pivotaltracker.com/](http://www.pivotaltracker.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:40:20.603

[JetBrain 的 YouTrack](http://www.jetbrains.com/youtrack/)可能非常适合您，因为它对最多 9 位用户免费，并且其敏捷项目管理部分在第一年也是免费的，并且与 GitHub[集成。](http://www.jetbrains.com/youtrack/features/integrations.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:37:31.627

查看[JIRA](http://www.atlassian.com/software/jira/overview) ，我认为它会满足您的需求并提供各种报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T06:07:11.657

我使用过的一个很好的项目管理工具是 Trac。它是 100% 并且非常易于使用。用户界面非常简单，但非常有用。此外，它还集成了 Subversion。可能现在您认为这对配置来说将是非常痛苦的。实际上有一个捆绑包[http://bitnami.org/stack/trac](http://bitnami.org/stack/trac)，您可以在其中找到所有设置并准备使用的环境。

# php - 为什么 mysql real_escape_string vsprintf 不起作用

> ID：11781924
> 
> 赞同：0
> 
> 时间：2012-08-02T16:31:30.667
> 
> 标签：php, mysql

现在我已经将我的查询转换为 PDO 格式。但是下次我必须用旧格式实现查询。代码是这样的：

```
function mysql_Select($sql) {
    $data=array();
    $params=func_get_args();
    $s=PreparaSQL($sql, $params);
    $res = mysql_query($s);
    if ($res && mysql_num_rows($res)){
        while( $dt = mysql_fetch_object($res)){
            $data[]=$dt;
        }
        return $data;
    }
}

function PreparaSQL($sql, $array_param){
   unset($array_param[0]);
   foreach ($array_param as $k => $v){
      $array_param[$k]=mysql_real_escape_string($v);       }
  return vsprintf( str_replace("params","%s",$sql), $array_param );  
} 
```

并执行的功能是：

```
$data=mysql_Select('SELECT concat(id," | ",wh2) as label,Id as kode,wh2 as nama,wh2 as value FROM wh011 where wh2 like %s',$_GET['where']);
echo json_encode($data);
flush(); 
```

并且输出值有错误`null`。我认为问题出在这段代码中：

```
return vsprintf( str_replace("params","%s",$sql), $array_param ); 
```

我真的不知道错误点在哪里。谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:38:27.293

在建立连接之前，您不能使用 mysql_real_escape_string()。您可能必须编写自己的转义方法。有关详细信息，请参阅[此处](http://uk.php.net/manual/en/function.mysql-real-escape-string.php)的注释部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:01:31.693

我认为你的参数 1 和 2 是错误的。

尝试：

> $sql = "这是我的字符串参数你找到了吗？\n";
> 
> echo vsprintf(str_replace("params","%s",$sql), "BOO!");

输出

```
 here is my string BOO! did you find it? 
```

I'd suggest just not doing the str_replace... ?

# python - 波浪线（波浪线）即“~”运算符在 Python 中的作用是什么？

> ID：11781925
> 
> 赞同：9
> 
> 时间：2012-08-02T16:31:31.057
> 
> 标签：python, syntax, operators

> **可能重复：**
> [Python 中的波浪号运算符](https://stackoverflow.com/questions/8305199/the-tilde-operator-in-python)

squiggle ie`~`运算符在 Python 中的作用是什么？

（对于大多数人来说，这可能是 Python 101，但我是`~`在代码中遇到的，不知道它是什么，我花了很多研究才弄明白，所以希望这个 Q&A 可以帮助以后的人。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T16:31:31.057

它是[一元按位反转运算符](http://docs.python.org/reference/expressions.html#unary-arithmetic-and-bitwise-operations)。

> 一元`~`（反转）运算符产生其普通或长整数参数的按位反转。的位反转`x`定义为`-(x+1)`。它仅适用于整数。

# ruby-on-rails - 将参数传递给 text_method 的集合选择方法

> ID：11781927
> 
> 赞同：3
> 
> 时间：2012-08-02T16:31:37.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

```
 <%= collection_select(:catgory, :id, @categories, :id, :title, {}, data: { behavior: 'category_dropdown' }) %> 
```

在上面的代码中，我需要将一个参数传递给 title 方法。有没有办法用collection_select做到这一点？

```
 <%= collection_select(:catgory, :id, @categories, :id, (:title, @program), {}, data: { behavior: 'category_dropdown' }) %> 
```

编辑：查看collection_select text_method 的内部结构。它最终被传递给应该允许 element.send(:title, @program) 的 .send 方法。但是，我认为我仍然无法传递参数的问题是集合选择正在读取 (:title, @program) 作为两个参数而不是一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:56:15.247

改用`select`：

```
select "catgory", "id", @categories.map{|c| [c.title(@program), c.id]}, {}, data: { behavior: 'category_dropdown' } 
```

应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T12:02:03.323

`collection_select`如果您的模型具有可以覆盖的现有参数，则可以这样做：

```
f.collection_select( :your_model_id, 
  YourModel.all.map{|ym| ym.name = ym.custom_name(your_parameter); ym}, 
  :id, :name, 
  {:selected => @model_instance.logic}, 
  {:class => 'your class', :other => "..." } ) 
```

例如，我这样做是为了有条件地复数我的模型的`name`属性

```
class MyModel < ActiveRecord::Base
  DEFAULT_NAME_COUNT = 99

  def pluralized_name(n = DEFAULT_NAME_COUNT)
    begin
      return name.pluralize(n)
    rescue
    end

    name
  end
end 
```

# ruby - 数据库中的回形针附件列为空

> ID：11781935
> 
> 赞同：0
> 
> 时间：2012-08-02T16:32:06.253
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我已经安装了回形针和 imagemagick，并将代码实现到我的模型和视图文件中。我有一个名为“图片”的数据库列，无论我是否上传图片，它都是空的。图片实际上存在于`/public/system/decks/pictures/000/000/019/medium`文件夹中。我可以在那里看到所有上传的图片，但我无法显示它们，因为数据库是空的。

我的模型：

```
class Deck < ActiveRecord::Base
  attr_accessible :picture

  has_attached_file :picture, :styles => { :medium => "300x300>", :thumb => "100x100>" }
  attr_accessor :picture_file_name
  attr_accessor :picture_content_type
  attr_accessor :picture_file_size
  attr_accessor :picture_updated_at 
```

我的观点：

```
<%= form_for @deck,:url => decks_path, :html => { :multipart => true } do |f| %>
  <%= f.file_field :slika %> 
```

我的迁移：

```
class AddAttachmentPictureToDecks < ActiveRecord::Migration
  def change
    add_column :decks, :picture, :attachment
  end
end 
```

所以我在我之前提到的那个文件夹中得到了图片，但是`picture`我的甲板表中的列是空的。我无法用 获得图片`<%= image_tag @deck.picture.url(:medium) %>`，因为我`@deck.picture.url`持有 a `/pictures/original/missing.png`，我的`@deck.picture.path`和我的`@deck.picture.picture_file_name`也没有显示任何内容。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:50:29.407

最后，看起来我混合了旧语法和新语法，我无法在数据库中正确获取字段。看起来 attr_accessors 是不必要的

# python - 相同的函数在 Python 中以相反的顺序给出不同的结果。为什么？

> ID：11781939
> 
> 赞同：2
> 
> 时间：2012-08-02T16:32:38.053
> 
> 标签：python, function, return

我正在使用这段代码：

```
def copy_part_of_space(row,column,lenght):
    #Copy String to Presentation Space (15)
    #Prerequisite Connect Presentation Space
    #Prerequisite function: connect_pcomm(presentation_space)    
    function_number = c_int(8)
    data_string = create_string_buffer(lenght*2*2) #number of unicode char *2*2
    lenght = c_int(lenght)
    ps_position = c_int(((row - 1) * 80)+ column)
    foo = hllapi(byref(function_number), data_string, byref(lenght), byref(ps_position))
    data_string.value
    return {{
        0 : 'The host presentation space contents were copied to the application program. The target presentation space was active, and the keyboard was unlocked.',
        1 : 'Your program is not connected to a host session.',
        4 : 'The host presentation space contents were copied. The connected host     presentation space was waiting for host response.',
        5 : 'The host presentation space was copied. The keyboard was locked.',
        9 : 'A system error was encountered.',
        'x' : 'Undocumented error found. Run in circles.',
        }.get(foo, 'x'),data_string.value} 
```

这个想法是从终端复制一些信息；函数需要返回状态信息（使用字典和 0,1,4,5,9,x 参数）和复制的信息 - 使用 data_string.value

为了运行一些测试，我使用了这个使用上述函数的代码：

```
for a in range(15,22):
    print copy_part_of_space(a,7,8) 
```

这是结果：

```
 set(['The host presentation space contents were copied to the application program. The target presentation space was active, and the keyboard was unlocked.', '36343581'])
   set(['36343663', 'The host presentation space contents were copied to the application program. The target presentation space was active, and the keyboard was unlocked.'])
   set(['The host presentation space contents were copied to the application program. The target presentation space was active, and the keyboard was unlocked.', '36343708'])
   set(['36344673', 'The host presentation space contents were copied to the application program. The target presentation space was active, and the keyboard was unlocked.'])
   set(['36344740', 'The host presentation space contents were copied to the application program. The target presentation space was active, and the keyboard was unlocked.'])
   set(['The host presentation space contents were copied to the application program. The target presentation space was active, and the keyboard was unlocked.', '36344758'])
   set(['36344869', 'The host presentation space contents were copied to the application program. The target presentation space was active, and the keyboard was unlocked.']) 
```

如您所见，有时我会在从主机应用程序复制内容之前获取状态信息 - 就像第一行一样。

但有时我会得到在状态信息之前复制的信息，比如第二行。

我**不**熟悉使用`dict`返回信息，所以我想这可能是一个问题，特别是在我试图返回两个变量的事实混合时。

谁能解释为什么会这样？

我知道`dict`在传递返回之前我可以简单地使用并将返回信息保存到一个变量中，但我真的认为这是一个更优雅的解决方案——我错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:33:52.147

[`set`](http://docs.python.org/library/stdtypes.html#set)s 是无序的（或者更好的是，它们的顺序是任意的）。除了使用有序数据类型之外，您无能为力。

例如通过删除`set`构造函数`{...}`：

```
return {
    0 : 'The host presentation space contents were copied to the application program. The target presentation space was active, and the keyboard was unlocked.',
    1 : 'Your program is not connected to a host session.',
    4 : 'The host presentation space contents were copied. The connected host     presentation space was waiting for host response.',
    5 : 'The host presentation space was copied. The keyboard was locked.',
    9 : 'A system error was encountered.',
    'x' : 'Undocumented error found. Run in circles.',
    }.get(foo, 'x'), data_string.value 
```

现在此代码返回一个[元组](http://docs.python.org/library/functions.html#tuple)（第一个元素是“错误消息字典”中的查找结果，第二个元素是包含在 中的任何内容`data_string.value`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:39:04.713

您专门返回 a `set`，它被定义为无序数据类型。也就是说，集合的元素可以按任何顺序返回。集合针对成员资格测试进行了优化 ( `if x in set:`)。集合就像字典的键：它们可以按任何顺序迭代。

我怀疑对您来说更好的数据类型是元组： `return (a, b)`

然后结果将始终以相同的顺序排列。

注意文字符号的差异：

*   字典有冒号来配对项目。: `{'a': 'b', 'c': 'd')`.
*   Set 没有冒号，只是任意排序的项目：`{'a', 'b', 'c', 'd'}`
*   元组使用括号：`('a', 'b', 'c', 'd')`
*   List 使用方括号，并且是可变的：`['a', 'b', 'c', 'd']`

# java - 对字符串使用 Java 库的代码更正建议？

> ID：11781942
> 
> 赞同：1
> 
> 时间：2012-08-02T16:32:56.360
> 
> 标签：java

我知道有一种更简单的方法可以检查字符串是否为回文，但我想使用库函数尝试它，我想出了下面的代码。

```
public boolean isPalindrome1(String input)
{

    int length = input.length()/2;
    if(input.length()%2!=0)
    {
        length = length + 1;
    }

    return(input.substring(0,length).equals(new StringBuilder(input.substring(length, input.length())).reverse().toString()));
} 
```

我正在尝试检查字符串的一半是否等于另一半的反向。但它被奇数和偶数长度弄乱了。有人可以指出更正，它适用于奇数、偶数长度以及空字符串和长度 = 1 的字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:34:53.183

您已经在使用 reverse()。为什么不能将输入字符串与相反的字符串进行比较？这不正是你一开始想要的吗？无需以复杂的方式将事物分成两半。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:36:49.163

你可以：

```
return new StringBuilder(input).reverse().toString().equals(input); 
```

你想知道的就去吧：

```
public boolean isPalindrome(String input) {
    for (int i = 0; i < input.length() / 2; i++) {
        if (input.charAt(i) != input.charAt(input.length() - 1 - i)) {
            return false;
        }
    }
    return true;
} 
```

# c# - 连接sql server，问题

> ID：11781943
> 
> 赞同：2
> 
> 时间：2012-08-02T16:32:57.890
> 
> 标签：c#, asp.net, sql-server

我刚刚在连接到本地数据库的 asp.net 中构建了我的第一个 Web 应用程序。我遇到了一个奇怪的问题。

如果我在重新启动后在 sql server 之前打开网站，则与数据库的连接有效。我可以从我的网页中插入/读取数据库。但随后 sql server 无法连接到数据库。它看起来像这样：

![在此处输入图像描述](../Images/fe7b459e024de451d43ef434bfe31a4b.png)

如果我在网站之前启动 sql server，则 sql server 可以工作，但网页无法正常工作，visual studio 然后给我这个错误：

![在此处输入图像描述](../Images/c140871d81cc865e78f899c7faf65abf.png)

为什么他们互相干扰，我能做些什么呢？我使用 Visual Studio 2010 和 sql server 2008 R2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:43:28.180

您是否尝试通过 Visual Studio 2010 的服务器资源管理器打开连接？每次您想在网络浏览器中显示页面时..只要确保您通过服务器资源管理器打开数据库连接，它就会工作...无论您启动 sql server 的顺序是什么。

# mercurial - 是否可以通过 http 启用 mercurial 推送并继续使用 SSL 密钥进行身份验证？

> ID：11781954
> 
> 赞同：0
> 
> 时间：2012-08-02T16:33:42.697
> 
> 标签：mercurial

目前我们`http://`仅用于只读访问，开发人员必须更改要使用的存储库地址`ssh://hguser@...`才能推送。

是否可以启用推送并仍然根据 SSL 密钥识别用户。备择方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:54:53.320

Mercurial 在配置文件中提供了两个默认路径。您可以定义`default-push`用于推送操作同时`default`用于拉取操作的路径。因此，在您的存储库`.hg/hgrc`文件中，您可以添加如下内容：

```
[paths]
default = http://...
default-push = ssh://... 
```

有关`hg help paths`更多信息，请参阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:49:48.443

@votingmeisfree，[projrc 扩展](http://mercurial.selenic.com/wiki/ProjrcExtension)可以帮助您处理此配置，而无需每个开发人员。

# asp.net - 使用 ASP.NET OutputCacheProvider 防止浏览器缓存

> ID：11781958
> 
> 赞同：0
> 
> 时间：2012-08-02T16:34:08.140
> 
> 标签：asp.net, outputcache

我正在使用 System.Web.Caching.OutputCacheProvider。我不想让浏览器缓存，我只想做服务器缓存。我看到当某些东西从我的服务器缓存中出来时，它们会在未来 24 小时内获得一个 Expires 标头。我该如何修改？

在我的 Get() 方法中调用 HttpContext.Current.Response.Cache.SetExpires() 没有效果，在 IIS 中更改 HTTP 响应标头->设置公共标头->过期 Web 内容也没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:54:15.147

您可以将 Location 属性用于 OutputCache 属性。对于 Asp.Net 网页

`<%@ OutputCache Location="Server" ...%>`

对于 Asp.Net MVC

`[OutputCache(Location=OutputCacheLocation.Server)]`

之后，经典`Response.Expires = 0`方法应该足以（如果需要）防止浏览器缓存。

# javascript - jQuery在页面重新加载之前验证

> ID：11781964
> 
> 赞同：0
> 
> 时间：2012-08-02T16:34:29.987
> 
> 标签：javascript, jquery

因此，当我单击提交时，它会指向错误页面。我想在它重定向到错误页面之前进行验证，插件就是这样工作的。如果用户的输入有问题，有没有办法阻止提交？

```
<input type="submit" name="submit-contact" class="button" value="Send" />

$(document).ready(function(){
  $(".button").click(function() {

        var name = $('input#name').val();
        if (name == ""){
            $('#name').addClass('errro');
            return false;}
        else {
            $('#name').removeClass('errro');}

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:45:42.230

在盯着这个问题几分钟后，我想我知道你的意思了。您可以通过监听`submit`事件并`false`在您认为用户的输入有问题时返回来做到这一点。

```
$(document).ready(function(){
     $("#theForm").submit(function() {

        var name = $('input#name').val();
        if (name == ""){
            $('#name').addClass('errro');
            return false;
        }
        else {
            $('#name').removeClass('errro');
        }

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:49:47.243

输入类型=“提交”名称=“提交联系”类=“按钮”onClick=“某些javascript函数”值=“发送”

function Somejavascriptfunction() { Retrieve Username and password via $(".Username").val() and $(".Password").val() 将其传递给ajax请求页面。从 ajax 页面获取结果。如果无效则通过 jquery 弹出消息，如果有效则提交。}

AjaxPage { 进行验证（1\. 空用户名/密码 2\. 正确的用户名和密码..etc）将结果返回给调用函数 }

# c++ - 依赖注入库的正确比喻是什么？

> ID：11781974
> 
> 赞同：6
> 
> 时间：2012-08-02T16:34:52.090
> 
> 标签：c++, oop, dependency-injection, ioc-container

我是一个实现依赖注入的小型 C++ 库的作者（我想有人会称它为“IoC 容器”）。

我一直认为为图书馆找到一个好的比喻可以在很多方面有所帮助：

*   它简化了库的使用
*   它帮助图书馆的作者找到正确的抽象
*   这是检查设计合理性的指南
*   这是一种为类找到有意义的名称的方法
*   等等...

现在，在我的库中，我使用了设备/插头隐喻：您的类是“设备”，它们的依赖项是“插头”，您可以将插头连接到另一个设备。这是一个代码示例：

```
REGISTERED_CLASS( Foo ), public Device
{
...
private:
    Plug< Bar > bar;
...
};
...
catalog.Create( "myFoo", "Foo" );
catalog.Create( "myBar", "Bar" );
...
catalog[ "myFoo" ].Plug( "bar" ).Into( catalog[ "myBar" ] );     // this means myFoo.bar = myBar 
```

好吧，我对这个比喻不太满意，因为：

*   在现实世界中，您将插头插入插座，因此源类应该有一个插头，目标类应该有一个插座，但在“代码世界”中，我有一个指向另一个类的类的指针；
*   当您与基数 > 1 关联时，我的比喻效果不佳。我尝试使用 a `MultiplePlug< T >`（它基本上是 a `std::list< Plug< T > >`），但听起来不太好：现实世界中的“multipleplug”是什么？

[在这里](https://code.google.com/p/wallaroo/)你可以找到我的图书馆。您对更适合我的代码的隐喻有什么建议吗？

（不过，如果您对图书馆有任何其他好的建议，欢迎他们！）

非常感谢。

**注意**：我知道主题“什么是依赖注入的好比喻”还有另一个问题，但这不是它的重复。

**编辑**：[这](http://www.carlopescio.com/2012/03/episode-2-controller-strikes-back.html)是一篇著名博客文章的评论中关于该主题的讨论。

**Edit2**：最后，我决定将语法更改为这种更好更简单的语法：

```
// explicit catalog
use( myCatalog["myBar"] ).as( "bar" ).of( myCatalog["myFoo"] );

// implicit catalog:
within( myCatalog )
{
    use( "myBar" ).as( "bar" ).of( "myFoo" );
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:52:17.027

我认为这是用于配置阶段。如果您坚持使用`Plug`and`Into`术语：

```
// this means myFoo.bar = myBar
catalog[ "myFoo" ].Into( "bar" ).Plug( catalog[ "myBar" ] ); 
```

where`Plug`用作动词，即“插入”。如果您创建一个流畅的界面，请尝试制定有意义的句子。如果我想配置“myFoo”的几个依赖项，那么我很乐意写：

```
catalog[ "myFoo" ].
    .Into( "bar").Plug( "myBar" ) 
    .Into( "some_other_member" ).Plug( "that_other_instance" ); 
```

有点不寻常的是，通常，在进行配置时，您处理的是类型而不是实例......

# json - 使用 UriTemplate 和 POST 数据从 Javascript 调用 WCF 服务

> ID：11781983
> 
> 赞同：2
> 
> 时间：2012-08-02T16:35:43.777
> 
> 标签：json, wcf, jquery, wcf-binding

我有一个当前为 HTTP GET 请求设置的 WCF 4.0 服务。我正在尝试修改它以使其使用 POST，但保持与现有 GET URI 的向后兼容性。使用 jQuery 和 JSON 数据调用 Web 服务。因此，我的要求如下：

*   匹配现有的 GET URI，大概是使用 WebInvoke 属性的 UriTemplate 参数。
*   从 POST 正文中的 JSON 数据中获取现有参数，大概是通过使用带有 WebInvoke 属性的 WebMessageBodyStyle.Wrapped 和 WebMessageFormat.Json。
*   最好有办法从 POST 正文中提取大块数据，可能也包含在 JSON 对象中。

好吧，不碍事，这就是我到目前为止所得到的。我的小测试服务称为 AjaxService，它有一种方法称为 ToUpper。首先，我的 web.config：

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>

    <system.serviceModel>
        <behaviors>
            <endpointBehaviors>
                <behavior name="WebApplication2.AjaxServiceAspNetAjaxBehavior">
                    <!--<enableWebScript />-->
                    <webHttp helpEnabled="true" />
                </behavior>
            </endpointBehaviors>
        </behaviors>

        <protocolMapping>
            <remove scheme="http" />
            <add scheme="http" binding="webHttpBinding" />
        </protocolMapping>

        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />

        <services>
            <service name="WebApplication2.AjaxService">
                <endpoint address=""
                    behaviorConfiguration="WebApplication2.AjaxServiceAspNetAjaxBehavior"
                    binding="webHttpBinding"
                    contract="WebApplication2.AjaxService" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

我的 ToUpper 函数的以下版本允许我在 URI 中传递它的参数，就像 HTTP GET 一样。

```
 [OperationContract]
  [WebInvoke( UriTemplate="ToUpper?str={str}",
              Method = "POST",
              BodyStyle = WebMessageBodyStyle.WrappedRequest,
              RequestFormat=WebMessageFormat.Json,
              ResponseFormat=WebMessageFormat.Json)]
  public string ToUpper(string str)
  {
      return str.ToUpper();
  } 
```

它在 Javascript 中的使用如下所示，并正确返回“这是来自 URI”。

```
$(document).ready(function () {
    $.ajax({
        type: "POST",
        url: "AjaxService.svc/ToUpper?str=this%20is%20from%20the%20uri",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            console.log("result: " + JSON.stringify(data));
        },
        error: function (jqXHR, textStatus, errorThrown) {
            console.log("error", jqXHR, textStatus, errorThrown);
        }
    });
}); 
```

`UriTemplate="ToUpper?str={str}"`我可以通过从 WebInvoke 参数中删除并改用此 javascript 来将参数放入 POST 数据而不是 URI 。它正确返回“这是来自帖子”。

```
$(document).ready(function () {
    $.ajax({
        type: "POST",
        url: "AjaxService.svc/ToUpper",
        data: JSON.stringify({str:"This is from the POST"}),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            console.log("result: " + JSON.stringify(data));
        },
        error: function (jqXHR, textStatus, errorThrown) {
            console.log("error", jqXHR, textStatus, errorThrown);
        }
    });
}); 
```

我希望如果我离开`UriTemplate="ToUpper?str={str}"`原地并使用上面的 javascript，将 str 参数从 POST 数据而不是 URI 中提取出来就足够聪明了。不幸的是，它只是给了我一个错误 400。有没有办法让它工作？

我尝试的另一件事是使用可选的 Stream 参数来获取 POST 数据的原始内容。但正如[这篇博](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx)文指出的那样，只有将内容类型设置为纯文本而不是 JSON，才能获取该流。我*可以*这样做并手动解析流，但我认为我还需要手动检查 URL 以确定我是否获得了真实值或默认值。呸。

如果无法使用系统绑定/设置进行此操作，我正在考虑尝试编写一个自定义绑定，该绑定可以智能地从 POST 和 URI 中提取参数，并且即使在你“重新使用 JSON。我花了几个小时试图弄清楚如何做到这一点，但我很难过！

有没有其他人解决过这个问题或对如何使其工作有任何想法？我无法想象我是第一个尝试这样做的人，但经过大量搜索后我空手而归。

# ms-access - 访问——我需要一个表单上的动态复选框列表

> ID：11781985
> 
> 赞同：0
> 
> 时间：2012-08-02T16:35:53.557
> 
> 标签：ms-access

我正在尝试在 Access 中创建一个包含动态复选框列表的表单。它从一个表 tblMASTER_ATTACHMENT_LIST 开始，该表将包含三列：MASTER_ATTACHMENT_ID、CLASS 和 ATTACHMENT_NAME。（在我进一步讨论之前，这个问题与文件附件无关。更多地考虑报告的附件。） tblMASTER_ATTACHMENTS 将“预先填充”所有可能的报告及其分类。将有另一个表 tblREPORT_ATTACHMENTS，它将具有以下列：ID、REPORT_ID、MASTER_ATTACHMENT_ID 和 ATTACHED_BL（布尔值）。因此，根据报告的类别，可能的附件列表可能会发生变化。我希望在表单上填充可能的附件列表，每个附件旁边都有复选框以显示它是否实际附加。

我正在考虑一个工作流，例如一旦用户选择报告类，删除 tblREPORT_ATTACHMENTS 中 REPORT_ID 等于当前 RECORD_ID 的任何记录，然后用从主表中选择记录的结果填充表单控件其中 CLASS = 选定的类。

如果这个工作流程有意义，我可以使用一些帮助来实现它。具体来说，如何在包含复选框的表单上构建控件？如果这个工作流程不是一个非常聪明的方法，有人可以提出更好的方法吗？并解释怎么做？

顺便说一句，我确实搜索过这个，但我真的不知道这种东西叫什么。使它很难搜索。如果这是一件常见的事情，也许有人可以指出我正确的方向。在这种情况下，这里不需要完整的答案。

# php - 将复选框更改为使用 mysql 和 php 检查

> ID：11781988
> 
> 赞同：0
> 
> 时间：2012-08-02T16:36:16.230
> 
> 标签：php, mysql, checkbox

我的最后一个问题不太好，所以很抱歉“打开”新问题。

**重要数据：**

**表格1**

*   编号：1
*   编号：2
*   编号：3

**表2**

*   编号：1
*   编号：3

**Query1（id 结果）**：

*   1,2,3

**Query2（id 结果）：**

*   1,3

所以，我有一个复选框，如果每次我获取这 2 个表（使用正确的查询 ofc）并且 table2 中的一些 id 存在于 table1 上，我需要将其更改为“选中”。

我这样做：

```
<?php
while($row = mysql_fetch_array($Query1))
{
while($row2 = mysql_fetch_array($Query2))
{
$checkit = '';
if($row['id'] == $row2['id'] )
$checkit = 'checked="checked"';
}
?>
<input type="checkbox" name = "checkbox-1" class="checkbox" value ="" <?php echo $checkit ?> />
<?php
}
}
?> 
```

问题：当 1=1 时，我只能“检查”第一个结果。

虽然只取一次。我需要结果应该是这样的（id）：11-13 | 21-23 |31-33 和选中的复选框应仅在 11 和 33 时出现

我希望你明白这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:40:46.947

你有用

```
$checkit = 'checked="yes"'; 
```

应该

```
 $checkit = 'checked="checked"'; 
```

试试这个： -

```
<?php

    $arr_one = '';
    while($row = mysql_fetch_array($Query1))
    {

        $arr_one[]= $row['id'];

    }

    while($row2 = mysql_fetch_array($Query2))
    {
            $checkit = '';

            $id = $row2['id'];
            if (in_array($id,$arr_one))
            {
                $checkit = 'checked="checked"';
            }

    ?>
            <input type="checkbox" name= "checkbox-1" class="checkbox" value ="" <?php echo $checkit ?> />
    <?php
        }

    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:53:44.583

您需要在内部 while 块之后重置内部结果指针。

```
 while($row = mysql_fetch_array($Query1))
    {
        while($row2 = mysql_fetch_array($Query2))
        {
              // Your code
        }
        mysql_data_seek($Query2,0);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T17:00:24.793

我会做：

```
$t2data = array();
while($row2 = mysql_fetch_assoc($Query2)) {
  $t2data[] = $row2[0];
}

while($row1 = mysql_fetch_assoc($Query1)) {
  if(in_array($row1[0], $t2data)) { 
    $checked = 'checked';
  }
} 
```

话虽如此，如果两个表都在同一个数据库中，最好使用 OUTER JOIN 查询来解决：

```
select t1.id, (t2.t1_id IS NOT NULL) as checked
  from t1 
  left join t2 on (t1.id = t2.t1_id) 
```

然后循环遍历结果并仅选中查询中已选中=true 的框。

# c# - 如何将 LINQ 的 OrderBy 方向指定为布尔值？

> ID：11781990
> 
> 赞同：9
> 
> 时间：2012-08-02T16:36:25.777
> 
> 标签：c#, linq

我有一个具有此签名的简单数据类：

```
internal interface IMyClass {
    string Letter { get; }
    int Number { get; }
} 
```

我希望能够根据字段（指定为`string sortField`）和方向（指定为`bool isAscending`）对这些数据进行排序

目前我正在使用`switch`（在每个案例中的升序逻辑为`if`）

```
IEnumerable<IMyClass> lst = new IMyClass[];//provided as paramater
switch (sortField)
{
    case "letter":
        if( isAscending ) {
            lst = lst.OrderBy( s => s.Letter );
        } else {
            lst = lst.OrderByDescending( s => s.Letter );
        }
        break;
    case "number":
        if( isAscending ) {
            lst = lst.OrderBy( s => s.Number );
        } else {
            lst = lst.OrderByDescending( s => s.Number );
        }
        break;
} 
```

这对于 2 个属性来说非常难看，但是当排序逻辑不同时，它就会成为一个问题（我们还看到`s => s.Number`在代码中重复了两次）

**问题** 传递布尔值以选择排序方向的最佳方法是什么？

**我尝试过** 的我已经拆开 System.Core.dll 并找到了 OrderBy Extension 方法实现：

订购方式：

```
public static IOrderedEnumerable<TSource> OrderBy<TSource, TKey>(
        this IEnumerable<TSource> source, 
        Func<TSource, TKey> keySelector
    ){

    return new OrderedEnumerable<TSource, TKey>(
        source, 
        keySelector, 
        null, 
        false
    );
} 
```

按降序排列：

```
public static IOrderedEnumerable<TSource> OrderByDescending<TSource, TKey>(
        this IEnumerable<TSource> source, 
        Func<TSource, TKey> keySelector
    ){
        return new OrderedEnumerable<TSource, TKey>(
            source, 
            keySelector, 
            null, 
            true
        );
} 
```

看起来拥有 2 个命名方法的目的是抽象出这个布尔值。我无法像 System.Core 内部那样轻松创建自己的扩展`OrderedEnumberable`，并且编写一个从 bool -> methodName -> bool 开始的层对我来说似乎是错误的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-02T16:41:55.747

我想说写你自己的扩展方法：

```
public static IEnumerable<T> Order<T, TKey>(this IEnumerable<T> source, Func<T, TKey> selector, bool ascending)
{
    if (ascending)
    {
        return source.OrderBy(selector);
    }
    else
    {
        return source.OrderByDescending(selector);
    }
} 
```

然后你可以写：

```
lst = lst.Order( s => s.Letter, isAscending ); 
```

至于指定方法名称：我希望这不会作为一个逃避的答案，但我认为你应该坚持使用选择器函数而不是传入字符串。走字符串路线并不能真正为您节省任何打字或提高清晰度（`"letter"`真的比？更快或更清晰`s => s.Letter`？）只会使您的代码更胖（您要么需要维护某种从字符串到选择器函数的映射，要么编写自定义解析逻辑在它们之间进行转换）并且可能更脆弱（如果你走后一条路线，那么错误的可能性很高）。

如果您的意图是从用户输入中获取字符串来自定义排序，当然，您别无选择，因此请随意忽略我令人沮丧的言论！

* * *

**编辑**：由于您*接受*用户输入，这就是我所说的映射：

```
class CustomSorter
{
    static Dictionary<string, Func<IMyClass, object>> Selectors;

    static CustomSorter()
    {
        Selectors = new Dictionary<string, Func<IMyClass, object>>
        {
            { "letter", new Func<IMyClass, object>(x => x.Letter) },
            { "number", new Func<IMyClass, object>(x => x.Number) }
        };
    }

    public void Sort(IEnumerable<IMyClass> list, string sortField, bool isAscending)
    {
        Func<IMyClass, object> selector;
        if (!Selectors.TryGetValue(sortField, out selector))
        {
            throw new ArgumentException(string.Format("'{0}' is not a valid sort field.", sortField));
        }

        // Using extension method defined above.
        return list.Order(selector, isAscending);
    }
} 
```

以上显然不如从字符串动态生成表达式并调用它们聪明；这可以被视为优势或劣势，具体取决于您的偏好以及您所在的团队和文化。在这种特殊情况下，我认为我会投票支持手动映射，因为动态表达路线*感觉*设计过度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:45:32.767

如果您想在末尾添加更多方法，最好返回 IOrderedEnumerable。这样，编译器会将整个链编译为一个表达式。

```
public static class OrderByWithBooleanExtension
{
    public static IOrderedEnumerable<TSource> OrderBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> keySelector, bool isAscending)
    {
        return isAscending ? source.OrderBy(keySelector) : source.OrderByDescending(keySelector);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T16:44:21.283

我会看看 ScottGu 描述的动态linq[选项](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T16:58:21.377

您可以实现自己的扩展，该扩展将按字符串属性排序并支持通过布尔值进行升序和降序，例如：

```
public static IOrderedQueryable<T> OrderByProperty<T>(this IQueryable<T> query, string memberName, bool ascending = true)
{
    var typeParams = new[] { Expression.Parameter(typeof(T), "") };

    var pi = typeof(T).GetProperty(memberName);
    string operation = ascending ? "OrderBy" : "OrderByDescending";
    return (IOrderedQueryable<T>)query.Provider.CreateQuery(
        Expression.Call(
            typeof(Queryable),
            operation,
            new[] { typeof(T), pi.PropertyType },
            query.Expression,
            Expression.Lambda(Expression.Property(typeParams[0], pi), typeParams))
    );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T16:52:12.960

你可以做一个`Func`选择正确的操作：

```
var orderBy = isAscending ? (Func<Func<IMyClass, object>, IOrderedEnumerable<IMyClass>>)lst.OrderBy : lst.OrderByDescending;
switch (sortField)
{
    case "letter":
        lst = orderBy(s => s.Letter);
        break;
    case "number":
        lst = orderBy(s => s.Number);
        break;
} 
```

结合CraftyFella 建议的[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)，它可能看起来像：

```
var orderBy = isAscending ? (Func<Func<IMyClass, object>, IOrderedEnumerable<IMyClass>>)lst.OrderBy : lst.OrderByDescending;
lst = orderBy(mySortCriteria); 
```

或者，如果您愿意，可以使用一条长线：

```
lst = (isAscending ? (Func<Func<IMyClass, object>, IOrderedEnumerable<IMyClass>>)lst.OrderBy : lst.OrderByDescending)(mySortCriteria); 
```

我想我更喜欢 Dan Tao 的解决方案，只是想我会把它扔在那里，以防你觉得它有用。

# java - 这个java代码有什么问题？（简单的随机数生成器程序）

> ID：11781995
> 
> 赞同：1
> 
> 时间：2012-08-02T16:37:06.333
> 
> 标签：java, swing, user-interface, random, jframe

类Main.java

```
public class classMain
{
  public static classCall classCallObject;

  public static void main(String[] args)
  {
    classCallObject = new classCall();
    classCallObject.calling();
  }
} 
```

类调用.java

```
import java.awt.CardLayout;
import java.awt.FlowLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class classCall extends JFrame
{
  public JFrame frame;
  public JPanel cards;
  public CardLayout cardlayout = new CardLayout();
  public static classEngine engObject = new classEngine();

  public void calling()
  {
    frame = new JFrame();
    frame.setVisible(true);
    frame.setLayout(new FlowLayout());
    frame.setTitle("Cricket Game 2012");
    frame.setSize(1024, 740);
    frame.setResizable(false);
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);         
    gui guiObject = new gui();
    frame.add(guiObject.totalScore);
  }
} 
```

gui.java

```
import java.awt.FlowLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class gui extends JFrame
{
  public JLabel totalScore;

  public gui()
  {
    classCall.engObject.gameEngine();
    totalScore = new JLabel(String.format("Total is %d - %d", classCall.engObject.getTotal(), classCall.engObject.getWickets()));
    totalScore.setLayout(new FlowLayout());
  }
} 
```

类引擎.java

```
import java.util.Random;

public class classEngine
{

  public int[][] Overs = new int[20][6];
  public static int total=0;
  public static int wickets=0;

  public void gameEngine()
  {
    for (int over=1; over<Overs.length;over++)
    {
      for (int ball=1; ball<Overs[over].length; ball++)
      {
              Overs[over][ball] = batsmanNormalNormal();
              total=total + Overs[over][ball];
      }
    }
  }

  public int batsmanNormalNormal()
  {      
    int x=0;
    int randomNumber = 0;
    Random randomObject = new Random();
    randomNumber=randomObject.nextInt(100)+1;

    if (randomNumber<=1 && randomNumber>=10)
      x=4;
    else if (randomNumber<=11 && randomNumber>=13)
    {
      x=0;
      wickets++;
    }      
    else if (randomNumber<=14 && randomNumber>=17)
      x=1;
    else if (randomNumber<=18 && randomNumber>=19)
      x=1;
    else if (randomNumber<=20 && randomNumber>=30)
      x=2;
    else if (randomNumber<=31 && randomNumber>=55)
      x=1;
    else if (randomNumber<=56 && randomNumber>=96)
      x=0;
    else if (randomNumber<=97 && randomNumber>=98)
      x=6;
    else if (randomNumber<=99 && randomNumber>=100)
      x=3;

    return x;

  }

  public int getTotal()
  {
    return total;
  }

  public int getWickets()
  {
    return wickets;
  }
} 
```

我试图创建一个刺激板球比赛的java代码。我知道你们很多人可能不知道这个游戏。基本上，我想做的是随机生成数字（加权概率 - 不是完全随机的）并将它们添加到一个名为 total 的静态 int 中。我想使用 JLabel 显示总计。

但是由于某种原因，总数没有更新。它说0-0。它应该给出其他结果，例如 140 或 200，因为我已经对其进行了编码，以将随机生成的数字添加到总数中。120 次。

我想我可能会遗漏一些东西。

我认为我的空白大脑无法读取 atm 是显而易见的。有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:11:13.037

确保检查大于和小于符号是否在正确的位置。

在这个程序中，if 和 else if 语句永远不会被执行，因为我在那里放置的条件永远不会为真！

这就是总分不更新的原因。

# api-key - 使用 APIKEY 通过 windows powershell 访问 ASANA

> ID：11781996
> 
> 赞同：0
> 
> 时间：2012-08-02T16:37:09.197
> 
> 标签：api-key, asana

我在 powershell 中创建了以下两个代码来访问 ASANA。

但他们两个都不工作。我总是收到这个错误

“远程服务器返回错误：（401）未经授权。”

任何帮助表示赞赏。如果您有一个可以使用 APIKey 连接到任何安全服务器的工作 C# 代码，请发布它。我可以将其转换为 powershell 代码。

代码 1

```
Function Get-WebResponseString
{
    param (
        [Parameter(Mandatory=$true)]
        [String]$Url,       
        [Parameter(Mandatory=$true)]
        [String]$Method,
        [Parameter(Mandatory=$false)]
        [System.Net.NetworkCredential]$Credential
    )

    $Request = [System.Net.WebRequest]::Create($Url)    
    $Request.Method = $Method
    $Request.ContentType = "application/x-www-form-urlencoded";
    if ($Credential -ne $null)
    {
        $Request.Credentials = $credential
        write-host "****" -foregroundcolor blue
    }

    $Response = $Request.GetResponse()

    $StreamReader = New-Object System.IO.StreamReader $Response.GetResponseStream()
    $StreamReader.ReadToEnd()
} 

$Url = "https://app.asana.com/api/1.0/tasks"
$Username = "MMuthusamy@xxxxxx.xom"
$apikey="xxxxxxxxx"

$credential = New-Object System.Net.NetworkCredential @($Username, $apikey)   

Get-WebResponseString -Url $Url -Credential $credential -Method "GET" 
```

代码 2

```
$sha = New-Object System.Security.Cryptography.SHA1CryptoServiceProvider 

$apikey="xxxxxxx"
#Add colon
$authinfo=$apikey+":";
$string1 = $authinfo
Write-Host $string1  -ForeGroundColor Green

#Encoding format
$enc = [system.Text.Encoding]::UTF8

#get bytes
$data1 = $enc.GetBytes($string1) 

#Encode
$result1 = $sha.ComputeHash($data1)

#convert to 64 bit
$mykey=[System.Convert]::ToBase64String($result1)

Write-Host $mykey -ForeGroundColor Green

$url = "https://app.asana.com/api/1.0/tasks"
$url="https://app.asana.com/api/1.0/users"
$request = [System.Net.WebRequest]::Create($url)
$authorization = "Authorization: Basic " + $myKey
Write-Host $authorization -ForeGroundColor Green

$request.Headers.Add($authorization)
#$request.Headers.Add("Authorization: BASIC $mykey")
$response = $request.GetResponse()
Write-Host $Response  -ForeGroundColor Green 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:03:02.287

（我在 Asana 工作）

401 标头表明问题出在您的授权标头中。

HTTP 基本身份验证规范不要求用户名：密码的 SHA1 哈希。它只是该字符串的直接base64编码。尝试传递`$authinfo`给您的调用`ToBase64String`而不是散列数据。

# grails - Overwritting of ApplicationTagLib seems no longer work in grails2.1

> ID：11781999
> 
> 赞同：1
> 
> 时间：2012-08-02T16:37:40.210
> 
> 标签：grails, grails-2.0

In our application which is based on grails 2.0.4 we have overwritten the grails ApplicationTagLib. After the migration to grails 2.1.0 overwritting of the ApplicationTagLib is no longer working. In our gsp the returned result is just empty.

Here is the simplified TagLib which is used by us:

```
class CustomizedGrailsTagLib implements ApplicationContextAware {
  // grails native taglib classes
  def applicationTagLib

  void setApplicationContext(ApplicationContext applicationContext) {
    applicationTagLib = applicationContext.getBean('org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib')
  }

  def createLink = { attrs ->
    // call native create link after modifications
    def link = applicationTagLib.createLink.call(attrs)
    return link
  }
} 
```

When debugging we see that the variable link has the correct value (e.g. /enterprise20/user/showImage/7). But afterwards in the gsp the output is empty.

GSP call:

```
${createLink(controller:'user', action:'showUser', id: userInstance.id)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:43:45.047

Rather than returning the value, try writing it to `out`:

```
def createLink = { attrs ->
  // call native create link after modifications
  def link = applicationTagLib.createLink.call(attrs)
  out << link
} 
```