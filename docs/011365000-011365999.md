# StackOverflow 问答 11365000-11365999

# c# - 实体框架一对多

> ID：11365007
> 
> 赞同：2
> 
> 时间：2012-07-06T15:16:41.630
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我正在使用实体框架并具有以下类

```
class Student
{
 [Key]
 public virtual int StudentID {get; set;}
 public virtual string StudentName {get; set;}
 public virtual ICollection<Note> Notes {get; set;}
}
class Note
{
 [Key]
 public virtual int NoteID {get; set;}
 public virtual int StudentID {get; set;}
 public virtual string Message {get; set;}
}
class StudentDBContext:DbContext
{
 public DbSet<Student> Students { get; set; }
 public DbSet<Note> Notes { get; set; }
} 
```

总而言之，我有一班学生，每个人都有很多笔记。现在，我想使用 Linq 检索和显示特定学生的所有笔记。所以我尝试

```
using (StudentDBContext a = new StudentDBContext())
{
 var b = from c in a.Student
         where c.StudentID == 1001
         select c;

 var currStudent = b.FirstOrDefault();
 Console.WriteLine(currStudent.StudentName);

  //display all the messages of the current student
  foreach (var currNote in currStudent.Notes)
  Console.WriteLine(currNote.Message);
} 
```

在上面的代码中，我的 foreach 块总是失败，因为 Student.Notes 总是为空。我是否错过了初始化 Student.Notes 并从数据库中填充它的一些步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:01:59.080

你的班级学生和笔记应该是公开的。

以下代码运行：

```
class Program {
    static void Main(string[] args) {
        using ( StudentDBContext efc = new StudentDBContext()) {
            foreach (var v in efc.Students) {
                Console.WriteLine("{0}", v.StudentName);
                foreach (var vv in v.Notes) {
                    Console.WriteLine("    {0}", vv.Message);
                }
            }
        }
    }
}

public class Student {
    public Student() {
        //Notes = new List<Note>();
    }
     [Key]
     public int StudentID {get; set;}
     public virtual string StudentName {get; set;}
     public virtual ICollection<Note> Notes {get; set;}
}
public class Note {
 [Key]
 public int NoteID {get; set;}
 public int StudentID {get; set;}
 public string Message {get; set;}
}
class StudentDBContext:DbContext {
    public DbSet<Student> Students { get; set; }
    public DbSet<Note> Notes { get; set; }        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:53:41.933

尝试这个：

```
using (StudentDBContext a = new StudentDBContext())
{
   var b = ((from c in a.Student
           join b in a.Notes on b.StudentId equals c.StudentId into sNotes
                 from notes in sNotes.DefaultIfEmpty()
           where c.StudentId==1001
           select c).SingleOrDefault();
   if (b != null )
     ...
} 
```

请注意，Entity Framework 将对您的数据进行延迟加载。因此，如果您不做一些事情来填充它，那么您将不会得到它。还有其他方法可以做到这一点，但除此之外，此查询清楚地记录了您既想要学生也想要笔记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:43:39.007

这不应该是虚拟的。

```
public virtual NoteID {get; set;} 
```

它应该是一个整数：

```
public int NoteID {get; set;} 
```

# symfony - DQL 查询、MAX 函数和 getSingleResult

> ID：11365010
> 
> 赞同：1
> 
> 时间：2012-07-06T15:17:11.913
> 
> 标签：symfony, doctrine-orm, twig

这是我在 MessageRepository 中的 DQL 查询：

 `````
public function getLastByIdAndByType($id_employee, $type)
{
    $query = $this->_em->createQuery('SELECT MAX(m.sentAt), m.recipient,   m.author, m.subject, m.body, m.type FROM MyBundle:Message m JOIN m.employee e WHERE e.id = :id_employee AND m.type = :type')
    ->setParameter('id_employee', $id_employee)
    ->setParameter('type', $type)
    return $query->getSingleResult();
}    </code> 
```

In my controller : `$last_message=$em->getRepository('MyBundle:Message')->getLastByIdAndByType($id, $type);`

In my view html.twig `{{ last_message.sentAt }}`

returns the error : `Item "sentAt" for "Array" does not exist`

While` 

`{{ last_message.recipient }}` 有效，但确实对于我的所有消息，收件人都是相同的。

我应该怎么做才能用 {{ last_message.sentAt }} 呈现最近的日期？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T04:36:22.963

如果我理解您想要实现的目标，您似乎使用了错误的方法。

按照函数名称，我假设您要检索有关员工发送的最新消息的信息。对于这样的情况，您要做的是按 sentAt 对消息进行排序，然后只选择第一个。

你实际上在做的是使用一个[聚合函数](http://www.w3schools.com/sql/sql_functions.asp)，它会给你一个计算值，它实际上不是你的 Message 实体的一部分。

这是一个如何做你想做的事的例子（请注意，因为我正在检索整个实体，你可以在你的视图中使用你喜欢的任何属性 - 出于性能原因，你仍然可以选择在询问）：

```
public function getLastByIdAndByType($id_employee, $type)
{
    $query = $this->_em->createQuery('SELECT m FROM MyBundle:Message m JOIN m.employee e WHERE e.id = :id_employee AND m.type = :type ORDER BY m.sentAt DESC')
                       ->setMaxResults(1)
                       ->setParameter('id_employee', $id_employee)
                       ->setParameter('type', $type);
    return $query->getOneOrNullResult();
} 
```

另外值得注意的是，您可以像我在这里所做的那样使用 getOneOrNullResult 而不是仅使用 getSingleResult 来避免在找不到记录时抛出异常。纯粹是选择问题，但这意味着您在编码时会考虑到这种可能性。`

# sql - SQL/ETL 错误，视觉：太多列（如何允许 > 256）

> ID：11365017
> 
> 赞同：1
> 
> 时间：2012-07-06T15:17:41.203
> 
> 标签：sql, pentaho, sql-server-2012

我执行 ETL 并将大约 100 个表下载到我的公司数据仓库以执行报告和分析。不幸的是，我对下载这些信息的公司的数据库设计和实践没有发言权。我使用 jdbc:vortex:// URL 连接到我下载数据的数据库。我将它下载到我的 MS SQL Server 2012 仓库。

话虽如此，我需要的关键表有 400 多列。我可以使用 DBVisualizer Free 来查询他们的数据，但是当我查询这个表时，我得到了错误：

[错误代码：-1，SQL 状态：07000] dbFetch 异常：视觉：408 列太多（最大值：256）

当我使用 Pentaho Kettle（数据集成服务）尝试将此表下载到我的仓库中时，我也遇到了同样的错误。

即使我尝试只从表中抓取几列，我也会收到此错误。我认为必须有一种方法可以让 pentaho 和 db 可视化器增加列数，但我无法在任何地方找到此信息。大多数人并没有愚蠢到在一个表中有超过 256 列，所以我很难找到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:44:34.100

这是 JDBC 驱动程序中的一个设置，由该 JDBC 驱动程序的创建者记录。[Pentaho 论坛](http://forums.pentaho.com/showthread.php?98546-Increase-the-max-number-of-columns)上也提出了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T19:01:15.133

Vortex 驱动程序接受`max_column`我用来解决相同问题的属性。尝试设置`max_column`为大于 400 的值。

```
Properties dbProps = new Properties();
dbProps.setProperty("max_column", "500");

Connection dbCon = DriverManager.getConnection("jdbc:vortex...", dbProps); 
```

在 DbVisualizer 中，查看 Connection 时，转到 Properties 选项卡，然后`max_column`在 Driver Properties 部分下添加。

# linqpad - LINQPad 命名空间文档

> ID：11365027
> 
> 赞同：2
> 
> 时间：2012-07-06T15:18:14.967
> 
> 标签：linqpad

我在哪里可以阅读`LINQPad`命名空间中类型的文档？我尝试按 F1 寻求帮助，但没有任何反应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T00:33:33.243

最重要的类型是`LINQPad.Util`，[这里](https://stackoverflow.com/questions/3555317/linqpad-extension-methods)解释。

此外，`LINQPad.PanelManager`对于显示 WPF 和 Windows 窗体控件很有用（它为您提供了比仅通过转储控件获得的更多灵活性）。见帮助 | What's New 以解释其工作原理。

其他一些类型是为了[可扩展性](http://www.linqpad.net/extensibility.aspx)而存在的。

# php - 如何在多字节字符串的前 3 行分配一个变量

> ID：11365031
> 
> 赞同：0
> 
> 时间：2012-07-06T15:18:23.923
> 
> 标签：php, html, multibyte

我正在尝试获取一个多字节的希腊字符字符串并将其修剪为仅 3 行。我的方法是将多字节字符串拆分为一个字符数组，然后循环遍历它并尝试检测字符串中的换行符。但是，字符串根本没有被修剪并给我一些奇怪的错误。

这是代码：

```
$break_count = 0;
            $char_array = array();
            $speech_string = ""; 
            $break_array = array();
            foreach($total_found as $speech)
            {   
                    $temp = preg_split('/(?<!^)(?!$)/u', $speech->speech_text );  
                    foreach($temp as $char){
                            if($char=="\n"){
                                    $break_count++;
                                    array_push($break_array,"LB");
                            }   
                            if($break_count < 4)
                            {   
                                    array_push($char_array,$char);
                            }else{  
                                    die(print_r(var_export($break_array) . " : " . $break_count,1));
                                    break;
                            }                               
                    }   
                    $string = join("",$char_array);
                    array_push($speech_array,$string);
                    $break_count = 0;
                    $loop_count++;
            } 
```

$break_count 是我用来检测到目前为止遇到的换行数的变量，当超过 3 个时，字符应该停止被推送到 $char_array 变量。print_r 应该返回 4 个换行符和一个包含 4 个“LB”元素的数组。但是，它返回以下内容： array ( 0 => 'LB', 1 => 'LB', 2 => 'LB', 3 => 'LB', 4 => 'LB', 5 => 'LB' , 6 => 'LB', 7 => 'LB', 8 => 'LB', ) : 4 这意味着我的代码将更多换行符推到 $break_array 上，即使它应该在之后跳出 4 循环$break_count = 4。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:26:10.253

这是做你想做的吗？

```
$allFirst3Lines = array();
foreach($total_found as $speech)
{
    $first3LinesArray = array_slice(explode("\n", $speech->speech_text), 0, 3);
    array_push($allFirst3Lines, implode("\n", $first3LinesArray));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:28:31.457

如果您的多字节字符串保存为 UTF-8，则换行符与 ASCII 换行符二进制兼容。简单地通过常规换行符进行拆分是非常安全的，即使使用非多字节感知标准函数也是如此。

```
$string = "これ\nは\nユーティーエッフエイト\nだぞ！";
echo join("\n", array_slice(explode("\n", $string), 0, 3));

> これ
> は
> ユーティーエッフエイト 
```

# javascript - javascript & jQuery mobile: 导航到

> ID：11365035
> 
> 赞同：1
> 
> 时间：2012-07-06T15:18:38.553
> 
> 标签：javascript, jquery, jquery-mobile, browser-history, hashchange

我对 jQuery Mobile 比较陌生。所以，我不知道框架功能的每个角落。

我目前在历史和动态页面导航方面面临一些问题。

基本上，我想实现以下目标：

我有一个通过按钮单击更改内容的网页。“主页”页面应显示`<div data-role="page" id="list_root">...</div>`. 通过单击一个按钮，页面应该导航到`<div data-role="page" id="list_123">...</div>`。我希望能够使用后退按钮返回 div "#list_root" 的内容。

在使用 jQuery 之前，我确实自己实现了这一点，`history.pushState(divContent, null, "#list_<id>")`并用新内容替换了旧内容。但是，pushState 插件默认使用 jQuery mobile 禁用。

按下导航按钮的定义如下：

```
<a href='#list_<id>' class='...'>...</a> 
```

我确实尝试通过实现“onhashchange”的回调来实现新 div 内容的创建（对于 list_）。但是这个事件永远不会被调用。

此外，如果我能够在单击链接时创建内容，我想显示 的内容`<div id="list_<id>">`，替换以前的内容。

由于应用程序呈现大量数据 - 我不想使用 jQuery mobiles 的嵌套列表。

您对我如何使用框架功能实现这一点有任何提示吗？

**编辑：**

我有以下情况：

```
<div data-role="page" class="type-interior" id="main_window">
    <div id="current" class="ui-content" data-role="content" role="main">
        <div id="list_root" data-url="list_root">
        <div id="list_123" data-url="list_123" data-role="page">
    </div>
</div> 
```

如您所见，“list_root”是默认的“起始页”，并按预期显示。

我为 click() 添加了一个事件监听器来动态创建`<div id="list_123">`via 的内容：

```
document.addEventListener('click', function(e) {
       ... create it ...
       e.stopPropagation();
   }, true) 
```

这行得通。

该按钮的创建如下：

```
<a href="#list_123" data-role="button">List_123</a> 
```

div 内容创建成功，然后 url 中的哈希更改为 #list_123。但是页面不显示。问题出`<div data-role="page" id="list_123">...</div>`在`<div data-role="page" class="type-interior" id="main_window">`标签内吗？我下次试试！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:04:17.463

这很简单。
使用 href 导航到任何页面，例如

```
<a href='#pageId' data-role="button>Page 2</a> 
```

并返回使用 data-rel='back' 喜欢

```
<a href="javascript:;" data-role="button" data-rel="back">Back</a> 
```

演示：http: [//jsfiddle.net/nachiket/5rLAf/](http://jsfiddle.net/nachiket/5rLAf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:25:00.920

如上所述 - 我遇到的问题是，您要导航到的新页面必须始终位于`<div data-role='page'><div data-role='content'>....</div></div>`标签内和 body 标签的子元素中。

现在它工作正常！

谢谢！

# wcf - 如何向我的 WCF 数据服务添加视图？

> ID：11365036
> 
> 赞同：0
> 
> 时间：2012-07-06T15:18:40.163
> 
> 标签：wcf

尝试添加一个视图，该视图将两个表中的数据与右连接结合起来。主表有一个主键，我已将其包含在视图中。当我将模型添加到我的项目时，未添加视图并且我收到警告：

```
The table/view ‘[TABLE NAME]‘ does not have a primary key defined ad no valid primary key could be inferred. This table/view has been excluded. 
```

我需要建模以由非开发人员更新，因此不想开始在 edmx 文件中进行可能被设计人员覆盖的变通方法。

到目前为止，我已经尝试过：

添加视图。将主表的 PK 列添加到视图中，然后重试。将基础表添加到模型中。

总是一样的结果。如果有帮助，服务提供的数据将是只读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:05:01.307

只要基础表中有主键或视图中有可行的列（不可为空、非二进制），您就应该能够添加视图。如果没有，您将不得不手动添加在刷新期间会丢失的代码。

你提到了一个正确的加入。您确定连接右侧的表中有主键吗？IE。总是返回数据的表，而不是可以返回所有空值的表？

# django - GIT下的Django媒体文件

> ID：11365037
> 
> 赞同：5
> 
> 时间：2012-07-06T15:18:42.887
> 
> 标签：django, git

我们刚刚开始使用 Django 网站项目的 git 帐户，以便团队可以在源代码上进行协作。

我听说过关于应该如何处理`/media`目录的不同事情。我们目前将该`/static`目录置于版本控制之下，以便可以克隆和重新创建整个项目。但是，该网站还包含大量 (>400mb) 上传的画廊图片，这些图片可能会随着时间的推移而增长。

这也应该在git下吗？使用 GIT 时是否需要注意合理的大小限制？还有其他方法可以处理`/media`Django 社区使用的文件夹吗？

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T15:21:24.560

您应该在**.gitignore中排除您的****媒体**文件夹。有一些问题。

 ***   当您签入文件时，它们可能在服务器上被修改（上传脚本）。然后你不能拉。

*   当您需要您的资源时，您必须下载整个媒体文件。

*   您必须每次在服务器上提交新文件。

所以我们在没有媒体文件的情况下使用它。但是，如果您已经进行了自动部署并且有足够的时间，您就可以做到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T15:35:10.710

绝对不要将您从实时站点上传的所有文件都放在源代码中。这不是他们所属的地方。至少您应该将 /media 目录备份到外部位置，例如另一台服务器、本地 NAS、某个备份提供商等。

如果您的开发团队想要在开发期间访问这些文件，您应该考虑将这些文件的一小部分放在源代码树中，并使用[固定装置](https://docs.djangoproject.com/en/1.4/howto/initial-data/)为开发环境创建一组标准的测试数据。**

# c++ - 如果在循环条件中使用 strlen 会被计算多次吗？

> ID：11365039
> 
> 赞同：113
> 
> 时间：2012-07-06T15:18:52.917
> 
> 标签：c++, c, gcc, optimization, strlen

我不确定以下代码是否会导致冗余计算，还是特定于编译器？

```
for (int i = 0; i < strlen(ss); ++i)
{
    // blabla
} 
```

`strlen()`每次加的时候会计算`i`吗？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-07-06T15:24:31.567

是的，`strlen()`将在每次迭代中进行评估。在理想情况下，优化器可能能够推断出该值不会改变，但我个人不会依赖这一点。

我会做类似的事情

```
for (int i = 0, n = strlen(ss); i < n; ++i) 
```

或者可能

```
for (int i = 0; ss[i]; ++i) 
```

只要字符串在迭代期间不会改变长度。如果可能，那么您需要`strlen()`每次调用，或者通过更复杂的逻辑处理它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-06T15:31:10.243

是的，每次你使用循环。然后它每次都会计算字符串的长度。所以像这样使用它：

```
char str[30];
for ( int i = 0; str[i] != '\0'; i++)
{
//Something;
} 
```

在上面的代码中，每次循环开始一个循环时，`str[i]`只在位置验证字符串中的一个特定字符`i`，因此它将占用更少的内存并且效率更高。

有关更多信息，请参阅此[链接](http://www.cprogramming.com/tips/tip/dont-use-strlen-in-a-loop-condition)。

在下面的代码中，每次循环运行`strlen`时都会计算整个字符串的长度，效率较低，需要更多时间并占用更多内存。

```
char str[];
for ( int i = 0; i < strlen(str); i++)
{
//Something;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-06T15:23:26.877

一个好的编译器可能不会每次都计算它，但我认为您不能确定每个编译器都会这样做。

除此之外，编译器必须知道，这`strlen(ss)`不会改变。`ss`仅当未在`for`循环中更改时才如此。

`ss`例如，如果您在in循环中使用只读函数`for`但未将`ss`-parameter 声明为`const`，则编译器甚至无法知道`ss`循环中没有更改，并且必须`strlen(ss)`在每次迭代中进行计算。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-06T15:29:01.073

如果`ss`是类型`const char *`并且你没有抛弃`const`循环中的ness `strlen`，如果打开了优化，编译器可能只会调用一次。但这当然不是可以指望的行为。

您应该将`strlen`结果保存在一个变量中并在循环中使用该变量。如果您不想创建一个额外的变量，这取决于您在做什么，您可能会通过反转循环来向后迭代而侥幸逃脱。

```
for( auto i = strlen(s); i > 0; --i ) {
  // do whatever
  // remember value of s[strlen(s)] is the terminating NULL character
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-06T15:21:24.013

形式上是的，`strlen()`预计每次迭代都会被调用。

无论如何，我不想否定存在一些聪明的编译器优化的可能性，这将优化在第一个之后对 strlen() 的任何连续调用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-06T15:22:55.917

整个谓词代码将在`for`循环的每次迭代中执行。为了`strlen(ss)`记住调用的结果，编译器至少需要知道

1.  该功能`strlen`无副作用
2.  指向的内存`ss`在循环期间不会改变

编译器不知道这些事情中的任何一个，因此无法安全地记住第一次调用的结果

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-06T15:23:13.740

**是**的。每次 i 增加时都会计算 strlen。

如果您**没有****在循环中**更改 ss with ，则意味着它**不会影响逻辑**，否则会影响。

使用以下代码更安全。

```
int length = strlen(ss);

for ( int i = 0; i < length ; ++ i )
{
 // blabla
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-06T22:03:21.153

是的，`strlen(ss)`每次代码运行时都会计算。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-07-07T11:04:20.783

是的，`strlen(ss)`它将在每次迭代时计算长度。如果您`ss`以某种方式增加`i`; 会有无限循环。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-07-11T09:06:39.563

是的，*每次*评估循环时`strlen()`都会调用该函数。

 *如果您想提高效率，请始终记住将所有内容保存在局部变量中...这需要时间，但它非常有用..

您可以使用如下代码：

```
String str="ss";
int l = strlen(str);

for ( int i = 0; i < l ; i++ )
{
    // blablabla
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-07-11T13:24:44.953

现在不常见，但 20 年前在 16 位平台上，我推荐这个：

```
for ( char* p = str; *p; p++ ) { /* ... */ } 
```

即使您的编译器在优化方面不是很聪明，上面的代码也可以生成好的汇编代码。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-07-06T15:23:04.233

是的。测试不知道 ss 在循环内没有改变。如果你知道它不会改变，那么我会写：

```
int stringLength = strlen (ss); 
for ( int i = 0; i < stringLength; ++ i ) 
{
  // blabla 
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-01-28T00:27:59.747

## Arrgh，即使在理想的情况下，它也会，该死的！

截至今天（2018 年 1 月），gcc 7.3 和 clang 5.0，如果你编译：

```
#include <string.h>

void bar(char c);

void foo(const char* __restrict__ ss) 
{
    for (int i = 0; i < strlen(ss); ++i) 
    {
        bar(*ss);
    }
} 
```

所以，我们有：

*   `ss`是一个常量指针。
*   `ss`被标记`__restrict__`
*   循环体不能以任何方式触及`ss`（好吧，除非它违反`__restrict__`）指向的内存。

而且，两个编译器都会执行*该*`strlen()` [循环的每一次迭代](https://godbolt.org/g/vdGSBe)。惊人的。

这也意味着@Praetorian 和@JaredPar 的典故/一厢情愿的想法不会成功。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-07-10T19:01:17.563

是的，简单来说。并且编译器希望在极少数情况下作为优化步骤，如果它发现根本没有进行任何更改`ss`。但在安全条件下，您应该认为它是 YES。在某些情况下，例如`multithreaded`事件驱动程序，如果您认为它是“否”，它可能会出现错误。谨慎行事，因为它不会过多地提高程序的复杂性。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-07-11T11:12:08.310

是的。

`strlen()`每次`i`增加且未优化时计算。

下面的代码显示了为什么编译器不应该优化`strlen()`。

```
for ( int i = 0; i < strlen(ss); ++i )
{
   // Change ss string.
   ss[i] = 'a'; // Compiler should not optimize strlen().
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-07-12T12:29:48.070

我们可以很容易地测试它：

```
char nums[] = "0123456789";
size_t end;
int i;
for( i=0, end=strlen(nums); i<strlen(nums); i++ ) {
    putchar( nums[i] );
    num[--end] = 0;
} 
```

循环条件在每次重复后评估，然后重新开始循环。

还要注意用于处理字符串长度的类型。它应该是在 stdio 中`size_t`定义的。`unsigned int`比较和转换它`int`可能会导致一些严重的漏洞问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-07-18T10:07:04.090

好吧，我注意到有人说它默认由任何“聪明”的现代编译器优化。顺便看看没有优化的结果。我试过：
最小的 C 代码：

```
#include <stdio.h>
#include <string.h>

int main()
{
 char *s="aaaa";

 for (int i=0; i<strlen(s);i++)
  printf ("a");
 return 0;
} 
```

我的编译器：g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
汇编代码生成命令：g++ -S -masm=intel test.cpp

```
Gotten assembly code at the output:
    ...
    L3:
mov DWORD PTR [esp], 97
call    putchar
add DWORD PTR [esp+40], 1
    .L2:
     THIS LOOP IS HERE
    **<b>mov    ebx, DWORD PTR [esp+40]
mov eax, DWORD PTR [esp+44]
mov DWORD PTR [esp+28], -1
mov edx, eax
mov eax, 0
mov ecx, DWORD PTR [esp+28]
mov edi, edx
repnz scasb</b>**
     AS YOU CAN SEE it's done every time
mov eax, ecx
not eax
sub eax, 1
cmp ebx, eax
setb    al
test    al, al
jne .L3
mov eax, 0
     ..... 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-07-18T11:16:23.960

详细说明 Prætorian 的回答，我建议以下内容：

```
for( auto i = strlen(s)-1; i > 0; --i ) {foo(s[i-1];} 
```

*   `auto`因为您不想关心 strlen 返回的类型。C++11 编译器（例如`gcc -std=c++0x`，不完全是 C++11，但自动类型可以工作）会为你做这件事。
*   `i = strlen(s)`因为你想比较`0`（见下文）
*   `i > 0`因为与 0 的比较比与任何其他数字的比较（略）快。

缺点是你必须使用`i-1`字符串才能访问字符。*

# c# - 添加一维浮点数组值

> ID：11365040
> 
> 赞同：0
> 
> 时间：2012-07-06T15:18:53.377
> 
> 标签：c#, arrays, dicom, addition, evil-dicom

我有两个关于 Evil Dicom 库的问题。

我知道使用 floats 函数，所有像素数据都作为浮点元素包含在一维数组中。我的问题是如何将各个元素相加以获得一个值？

在将黑白蒙版与原始图像相乘后，如何将图像中的非零值相加？我是否还使用 floats 函数将数据作为数组获取，然后将数组元素相加？如果没有，如何将图像中从左上角到右下角的像素相加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:25:35.337

据我所知，Evil DICOM 库中没有针对这些操作的特殊功能，但始终有 LINQ。

如果您正在寻找所有像素元素的总和：

```
var imgMtx = new ImageMatrix("image.dcm");
var sum = imgMtx.Image.Sum(); 
```

如果您正在寻找非零值的总和：

```
var nonZeroSum = imgMtx.Image.Where(val => val != 0.0f).Sum(); 
```

如果您正在寻找平均值，只需替换`Sum`为`Average`。

# c# - 使用 C# 的无偿 ARP 请求

> ID：11365041
> 
> 赞同：1
> 
> 时间：2012-07-06T15:18:56.477
> 
> 标签：c#, .net, windows, network-programming, arp

在 Windows 2008 服务器上工作并将 IP 地址本地分配给服务器。分配 IP 地址后，我需要子网中的所有其他服务器更新其 ARP 缓存。这似乎可以使用[免费 ARP](http://wiki.wireshark.org/Gratuitous_ARP)，但我无法找出如何发送请求。有人对这个有经验么 ？

# android - 如何将 .png 文件发送到 Android 手机 (external_sd)

> ID：11365043
> 
> 赞同：0
> 
> 时间：2012-07-06T15:18:59.447
> 
> 标签：android, image, http

我在尝试将 .png 图像发送到我的 Android 手机时遇到问题。我现在这么远：

```
URL url = new URL ("http://oranjelan.nl/oranjelan-bg.png");
  InputStream input = url.openStream();
  try { 
     String storagePath = Environment.getExternalStorageDirectory();
     OutputStream output = new FileOutputStream (storagePath + "/oranjelangbg.png");
     try {
    byte[] buffer = new byte[1000000];
        int bytesRead = 0;
        while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
        output.write(buffer, 0, bytesRead);
        }
     } finally {
      output.close();
        }
    } finally {
   input.close();
 } 
```

但我收到以下错误@String storagePath = Environment.getExternalStorageDirectory(); 编译器说无法将文件转换为字符串。

然后，如果我鬼混，试试这段代码：

```
URL url;

    void setup() {
    try {

        URL url = new URL ("http://oranjelan.nl/oranjelan-bg.png");
        InputStream input = url.openStream();{
        try {

            String storagePath = Environment.getExternalStorageDirectory().getName();
            OutputStream output = new FileOutputStream (storagePath + "/oranjelangbg.png");
                try {

byte[] buffer = new byte[1000000];
                    int bytesRead = 0;
                    while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
                    output.write(buffer, 0, bytesRead);
                    }
                    } finally {
            output.close();
            }
            } catch (IOException e) {
            // TODO Auto-generated catch block
            throw new RuntimeException(e);
    } finally {
        try {
            input.close();
            } catch (IOException e) {
            // TODO Auto-generated catch block
            throw new RuntimeException(e);
     }
   }    
 }    
    } catch (MalformedURLException ex) {
      throw new RuntimeException(ex);
    } catch (IOException e) {
      // TODO Auto-generated catch block
      throw new RuntimeException(e);
    }
  }
} 
```

然后当我启动应用程序时，我的 android 冻结了。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:32:11.187

除了 Tanis.7x 指出的内容之外，您还需要将网络操作移出 UI 线程并移入诸如 AyncTask 之类的东西中。否则，您将无法与应用程序交互，直到它完成下载 - 这可能会导致应用程序无响应消息和强制关闭。在最近的 android 版本中，在主线程上进行联网是一个自动异常，即使它不会导致延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:22:55.770

查看[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)的文档。

它返回一个文件 (java.io.File)，而不是一个字符串。

我使用以下内容：

```
File storagePath = Environment.getExternalStorageDirectory();
File outFile = new File(storagePath, filename + FILE_EXTENSION);
OutputStream outStream = new FileOutputStream(outFile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:25:26.877

试试这样的..

```
 File storagePath = new File(Environment.getExternalStorageDirectory()+ "/oranjelangb.png");
 OutputStream output = new FileOutputStream (storagePath.getAbsoluteFile()); 
```

# python - Pydev/Eclipse 中的 SQLAlchemy 导入错误

> ID：11365044
> 
> 赞同：2
> 
> 时间：2012-07-06T15:19:00.057
> 
> 标签：python, sqlalchemy, pydev

我尝试安装用于 Eclipse/Pydev 的 Python 3.2 的 SQLAlchemy。一个简单的测试脚本失败

```
from sqlalchemy.engine import create_engine
engine=create_engine("mysql://user:password@server/database") 
```

如果我从 Eclipse 运行它，我会得到

```
Traceback (most recent call last):
  File "...\sqlalchemy.py", line 1, in <module>
    from sqlalchemy.engine import create_engine
  File "...\sqlalchemy.py", line 1, in <module>
    from sqlalchemy.engine import create_engine
ImportError: No module named engine 
```

但是我实际上是用 Ctrl-Shirt-O 生成了导入行，所以 Eclipse 自动发现并知道它。Pydev 也没有在脚本中显示任何错误。

如果我在交互式 Pydev 控制台中尝试相同的脚本，我会得到

```
from sqlalchemy.engine import create_engine
engine=create_engine("mysql://user:password@server/database")
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "C:\Python32\lib\site-packages\sqlalchemy-0.7.8-py3.2.egg\sqlalchemy\engine \__init__.py", line 338, in create_engine
    return strategy.create(*args, **kwargs)
  File "C:\Python32\lib\site-packages\sqlalchemy-0.7.8-py3.2.egg\sqlalchemy\engine\strategies.py", line 64, in create
    dbapi = dialect_cls.dbapi(**dbapi_args)
  File "C:\Python32\lib\site-packages\sqlalchemy-0.7.8-py3.2.egg\sqlalchemy\connectors\mysqldb.py", line 52, in dbapi
    return __import__('MySQLdb')
ImportError: No module named MySQLdb 
```

你知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:09:33.157

答案很简单：您的主模块名为`sqlalchemy.py`. 这是一个在 python 2 中更容易陷入的陷阱 - 用与系统模块相同的名称命名您自己的模块。

在启动时，您`sqlalchemy.py`被 python 作为`__main__`模块加载，当第一行运行时，python 重新加载`sqlalchemy.py`为模块`sqlalchemy`；第二次运行导入行时，python 解释器已经在 中找到`sqlalchemy`，`sys.modules`但它不包含名为 的变量或模块`engine`。

为了便于修复重命名`sqlalchemy.py`为例如`satest.py`. 要获得更完整的解决方案，请将您的代码组织在包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:35:31.477

虽然第一个错误是 Antti 解释的不幸错误，但我最终也解决了另一个问题。我没有安装 MySQLdb，它再次需要 MySQL 服务器。相反，我有正确语法的 mysql-connector

```
engine=create_engine("mysql+mysqlconnector://...") 
```

我在寻找快速测试示例时没有看到这一点。

# python - 左右移动对象

> ID：11365052
> 
> 赞同：1
> 
> 时间：2012-07-06T15:19:30.483
> 
> 标签：python, pygame, pong

我对 Python 和 pygame 有一个问题：我不知道如何让一个简单的桨左右移动。基本上，我正在为我的第一个项目开发乒乓球类游戏。

在网上阅读了几篇文章后，我想到了一种方法。我到目前为止的代码是：

```
PADDLE_WIDTH = 50
PADDLE_HEIGHT = 10
paddleSpeedX = 0
p1Paddle = pygame.Rect(10, 430, PADDLE_WIDTH, PADDLE_HEIGHT)
PADDLE_COLOR = pygame.color.Color("red")

while True:
    for event in pygame.event.get():
        if event.type == KEYDOWN:
            if event.key == K_LEFT:
                p1Paddle.right = p1Paddle.left + paddleSpeedX - 10
            if event.key == K_RIGHT:
                p1Paddle.left = p1Paddle.left + paddleSpeedX + 10
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
                pygame.display.update()

    pygame.display.update() 
```

输入此代码后，游戏运行，但我仍然无法左右移动桨。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:39:28.180

Pygame 只引发一次`KEYDOWN`事件，当你第一次按下一个键时。

不幸的是，它不会继续引发`KEYDOWN`事件，所以发生的事情是你的桨只抽动一次，除非你继续向左或向右键发送垃圾邮件，否则不会再次移动。

相反，您可以做的是在收到事件时设置速度`KEYDOWN`，并在收到事件时将其设置回零`KEYUP`，如下所示：

```
while True:
    for event in pygame.event.get():
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_LEFT:
                p1Paddle.x_velocity = -10
            elif event.key == pygame.K_RIGHT:
                p1Paddle.x_velocity = 10
        if event.type == pygame.KEYUP:
            if event.key in [pygame.K_LEFT, pygame.K_RIGHT]:
                # if either the left or right arrow keys are released
                p1Paddle.x_velocity = 0
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
    p1Paddle.x_distance += p1Paddle.x_velocity
    # other stuff here
    # drawing code here
    pygame.display.update() 
```

（我还更改了您的一些变量名称，因为我不知道是什么`p1Paddle.left`-`p1Paddle.right`我希望您不介意）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:42:22.593

我做了一些添加和修改以使您的代码正常工作。在每一帧（循环的迭代）中，您必须擦除屏幕并重新绘制桨。这是为了确保在按下 LEFT/RIGHT 箭头时使用新坐标重新绘制桨叶。请注意，当按下 LEFT 时，我更改了 p1Paddle.left 而不是 p1Paddle.right。

```
import pygame, sys
from pygame import *

pygame.init()
screen = pygame.display.set_mode((640, 480))
pygame.display.set_caption('Paddle Movement')

PADDLE_WIDTH = 50
PADDLE_HEIGHT = 10
paddleSpeedX = 0
p1Paddle = pygame.Rect(10, 430, PADDLE_WIDTH, PADDLE_HEIGHT)
PADDLE_COLOR = pygame.color.Color("red")

while True:
    # clear screen with black color
    screen.fill( (0,0,0) )

    for event in pygame.event.get():
        if event.type == KEYDOWN:
            if event.key == K_LEFT:
                p1Paddle.left = p1Paddle.left + paddleSpeedX - 10
            if event.key == K_RIGHT:
                p1Paddle.left = p1Paddle.left + paddleSpeedX + 10
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
                pygame.display.update()

    # draw the paddle
    screen.fill( PADDLE_COLOR, p1Paddle );

    pygame.display.update() 
```

一个更优雅的解决方案是下面的

```
import pygame, sys
from pygame import *

pygame.init()
screen = pygame.display.set_mode((640, 480))
pygame.display.set_caption('Paddle Movement')

PADDLE_WIDTH = 50
PADDLE_HEIGHT = 10
paddleSpeedX = 0
p1Paddle = pygame.Rect(10, 430, PADDLE_WIDTH, PADDLE_HEIGHT)
PADDLE_COLOR = pygame.color.Color("red")

# clock object that will be used to make the game
# have the same speed on all machines regardless
# of the actual machine speed.
clock = pygame.time.Clock()

while True:
    # limit the demo to 50 frames per second
    clock.tick( 50 );

    # clear screen with black color
    screen.fill( (0,0,0) )

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
            pygame.display.update()

    keys = pygame.key.get_pressed()
    if keys[K_LEFT]:
        p1Paddle.left = p1Paddle.left + paddleSpeedX - 5

    if keys[K_RIGHT]:
        p1Paddle.left = p1Paddle.left + paddleSpeedX + 5

    # draw the paddle
    screen.fill( PADDLE_COLOR, p1Paddle );

    pygame.display.update() 
```

请注意，我使用 . 检查按键`pygame.key.get_pressed()`。当我们检查键状态并且不等待事件发生时，它允许进行平滑的移动。我添加了一个时钟对象以将帧速率限制为 50 FPS（每秒帧数）。

请尝试这两种方法。

# php - 获取数组范围的最佳方法

> ID：11365060
> 
> 赞同：0
> 
> 时间：2012-07-06T15:19:58.133
> 
> 标签：php

例如，我有 9 个键的数组：

```
<?php

$array = array(3,1,4,5,7,34,32,12,13);

print_r($array); 
```

我想从此数组中获取数据或删除其他值。

例如：

```
$first = 2;
$last = 5; 
```

这应该返回我：

```
$new_array = array(1,4,5,7); 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T15:22:16.463

您可以为此使用该功能[`array_slice`](http://php.net/array_slice)：

```
$sub_array = array_slice($array, $first - 1, count($array) - $last); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T15:24:05.833

[`array_slice ( array $array , int $offset [, int $length = NULL [, bool $preserve_keys = false ]] )`](http://www.php.net/manual/en/function.array-slice.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T15:24:14.230

听起来您想要使用的是[array_slice()](http://us.php.net/manual/en/function.array-slice.php)函数：

```
<?php
$input = array("a", "b", "c", "d", "e");

$output = array_slice($input, 2);      // returns "c", "d", and "e"
$output = array_slice($input, -2, 1);  // returns "d"
$output = array_slice($input, 0, 3);   // returns "a", "b", and "c"

// note the differences in the array keys
print_r(array_slice($input, 2, -1));
print_r(array_slice($input, 2, -1, true));
?> 
```

对于您的问题：

```
<?php

$array = array(3,1,4,5,7,34,32,12,13);

$first = 2;
$last = 5;

$new_array = array_slice($array, $first - 1, $last - 1);
print_r($new_array);
// Array ( [0] => 1 [1] => 4 [2] => 5 [3] => 7 ) 
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T15:25:23.883

尝试[array_splice](http://www.php.net/manual/en/function.array-splice.php "数组拼接")：

```
$array = array(3,1,4,5,7,34,32,12,13);
$first = 2;
$end = 5;
$length = ($end - $first);
$new_array = array_splice($array, $first, $end) 
```

# symfony - symfony2表单类型类中的未知实体命名空间别名

> ID：11365062
> 
> 赞同：1
> 
> 时间：2012-07-06T15:20:06.337
> 
> 标签：symfony, doctrine-orm

我在 config.yml 中有两个数据库连接：

```
doctrine:
dbal:
    default_connection: default
    connections:
        default:
            host:     %database_host%
            port:     %database_port%
            dbname:   %database_name%
            user:     %database_user%
            password: %database_password%
            driver:   %database_driver%
            charset:  UTF8
        spoop:
            host:     %database_host%
            port:     %database_port%
            dbname:   %spoop_database_name%
            user:     %spoop_database_user%
            password: %spoop_database_password%              
            driver:   %database_driver%
            charset:  UTF8

orm:
    default_entity_manager:   default
    entity_managers:
        default:
            connection:       default
            #metadata_cache_driver: apc
            #query_cache_driver: apc
            #result_cache_driver: apc
            mappings:
                AcmeUserBundle: ~
                AcmeBannieresBundle: ~
                FOSUserBundle: ~
                #SpoopAdminBundle: ~
        spoop:
            connection:       spoop
            #metadata_cache_driver: apc
            #query_cache_driver: apc
            #result_cache_driver: apc
            mappings:
                AcmeModerationBundle: ~

    auto_generate_proxy_classes: %kernel.debug% 
```

所以在我的 acmeModerationBundle 中，我使用 spoop 连接。我在 Acme\ModerationBundle\Form 中有这样的表单类型：

```
 class ModerationAnnonceForm extends AbstractType{
        public function buildForm(FormBuilder $builder, array $options)
        {
            $builder
            ->add('descAnnonce')
            ->add('idRubrique','entity',array(
                    'class' => 'AcmeModerationBundle:TRubrique',
                    'expanded'=>true,
                    'multiple' =>false,
            ));
        }
        public function getDefaultOptions(array $options)
        {
            return array(
                'data_class' => 'Acme\ModerationBundle\Entity\TAnnonces',
            );
        }
        public function getName()
        {
            return 'acme_moderationbundle_annonceform';
        }
    } 
```

AcmeModerationBundle:TRubrique 定义在适当的位置：Acme/Moderationbundle/Entity/TRubrique。当我尝试生成此表单时，我总是得到这个：未知实体命名空间别名'AcmeModerationBundle'。我看了一下日志，

```
 at ORMException ::unknownEntityNamespace ('AcmeModerationBundle')
    in D:\workspace\symfony_bannieres\vendor\doctrine\lib\Doctrine\ORM\Configuration.php at line 174  -+
    at Configuration ->getEntityNamespace ('AcmeModerationBundle')
    in D:\workspace\symfony_bannieres\vendor\doctrine\lib\Doctrine\ORM\Mapping\ClassMetadataFactory.php at line 156  -+
    at ClassMetadataFactory ->getMetadataFor ('AcmeModerationBundle:TRubrique')
    in D:\workspace\symfony_bannieres\vendor\doctrine\lib\Doctrine\ORM\EntityManager.php at line 257  -+
    at EntityManager ->getClassMetadata ('AcmeModerationBundle:TRubrique')
    in D:\workspace\symfony_bannieres\vendor\symfony\src\Symfony\Bridge\Doctrine\Form\ChoiceList\EntityChoiceList.php at line 113  -+
    at EntityChoiceList ->__construct (object(EntityManager), 'AcmeModerationBundle:TRubrique', null, null, null)
    in D:\workspace\symfony_bannieres\vendor\symfony\src\Symfony\Bridge\Doctrine\Form\Type\EntityType.php at line 62  -+

    at EntityType ->getDefaultOptions (array('class' => 'AcmeModerationBundle:TRubrique', 'expanded' => true, 'multiple' => false, 'data' => null))
    in D:\workspace\symfony_bannieres\vendor\symfony\src\Symfony\Component\Form\FormFactory.php at line 234  - 
```

我想它使用默认的实体管理器，我检查了 php app/console container:debug

```
 doctrine.orm.default_entity_manager           container Doctrine\ORM\EntityManager
    doctrine.orm.entity_manager                   n/a       alias for doctrine.orm.default_entity_manager
    doctrine.orm.spoop_entity_manager             container Doctrine\ORM\EntityManager 
```

任何人都可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:00:23.647

[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html)接受`em`允许您指定实体管理器的选项

```
<?php

class ModerationAnnonceForm extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
        ->add('descAnnonce')
        ->add('idRubrique','entity',array(
                'class' => 'AcmeModerationBundle:TRubrique',
                'em' => 'spoop' // Add this
                'expanded'=>true,
                'multiple' =>false,
        ));
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T10:23:41.757

当我尝试使用没有核心文件夹名称的 bandle 名称时，我遇到了这个问题。它在 config/security.yml

在我的情况下，文件夹结构是下一个 src/Dp/UserBundle/....

我改变了这个`提供者：

```
 main:
        entity: { class: UserBundle:User, property: username }` 
```

对此`提供者：

```
 main:
        entity: { class: DpUserBundle:User, property: username }` 
```

因此，复制未知实体名称的名称（UserBundle 我的情况）并搜索项目中的每个条目，检查 - 它们必须带有文件夹前缀（在我的情况下为 Dp）

# jquery - 如何使用 jquery 仅更改某个字符

> ID：11365064
> 
> 赞同：-4
> 
> 时间：2012-07-06T15:20:22.753
> 
> 标签：jquery

我需要在切换时将 + 更改为 - 。代码设置在 [http://jsfiddle.net/B65Ht/](http://jsfiddle.net/B65Ht/)

HTML

```
<a class="expandB" href="#">
   <h3>Advocacy + </h3>
</a>
<div class="content">
    Content goes here
</div> 
```

jQuery

```
$(document).ready(function(){
    $('.content').hide();
    $("a.expandB").click(function() {  
        $(this).toggleClass("expandB").next().slideToggle("slow", function(){

       // script to toggle between + and -
     });

return false; //Prevent the browser jump to the link anchor/Prevent the browser jump to the link anchor
});

});​ 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:24:45.160

[jsFiddle](http://jsfiddle.net/Qyk5K/)

你可以这样做：

```
 $("a.expandB").click(function() {

        var $a = $(this);            
        var $h3 = $a.find('h3');             
        $(this).toggleClass("expandB").next().slideToggle("slow", function() {
             var text = $h3.text();
             $a.hasClass('expandB') ? $h3.text(text.replace('-', '+')) : $h3.text(text.replace('+', '-')); 
        });
        // Toggles the text from expand to Collapse
       return false; //Prevent the browser jump to the link anchor
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:26:00.833

您的问题与此问题非常相似，因此您的答案也可能相似：

[jQuery .click() .toggle() - 改变显示和交换字符](https://stackoverflow.com/questions/3006833/jquery-click-toggle-change-display-and-swap-character)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:26:25.863

不需要额外的课程。只需通过交换`.text()`；

```
$("a.expandB").click(function() {  

    $('span', this).text( $('span').text() == '+' ? '-' : '+');

    $(this).toggleClass("expandB").next().slideToggle("slow");    

    return false;

}); 
```

[http://jsfiddle.net/iambriansreed/aZaBe/3/](http://jsfiddle.net/iambriansreed/aZaBe/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T15:33:03.177

```
$("a.expandB").click(function() {  
    var t=$(this);
    t.toggleClass("expandB").next()
    .slideToggle("slow", function(){
        if(t.hasClass('expandB')) $('h3', t).html('Advocacy +'); 
        else $('h3', t).html('Advocacy -'); 
    });
    return false;
}); 
```

[**演示。**](http://jsfiddle.net/B65Ht/2/)

# c++ - boost::iostreams::bzip2_compressor 仅在 c++0x 时失败

> ID：11365069
> 
> 赞同：1
> 
> 时间：2012-07-06T15:20:37.447
> 
> 标签：c++, boost, linker, c++11, g++

最基本的最小示例：

```
#include <boost/iostreams/filtering_stream.hpp>
#include <boost/iostreams/filter/bzip2.hpp>  
int main() {
  boost::iostreams::filtering_istream in;
  in.push(boost::iostreams::bzip2_compressor());
  return 0;
} 
```

在我的机器上编译得很好：

```
g++ -lboost_iostreams  simple.cpp 
```

但是当 c++0x 包含在以下任一实例中时失败：

```
g++ -lboost_iostreams  simple.cpp -std=c++0x
g++ -lboost_iostreams  simple.cpp -std=gnu++0x 
```

疯狂的长错误消息如下。代码中的什么导致`c++0x`失败？如何解决这个问题？我已经运行了这三台机器，每台都有不同的配置——它在两台机器上都失败了，但在一个普通的 Ubuntu 安装上运行正常。

```
In file included from /usr/local/include/boost/iostreams/traits.hpp:31:0,
                 from /usr/local/include/boost/iostreams/pipeline.hpp:18,
                 from /usr/local/include/boost/iostreams/detail/push.hpp:22,
                 from /usr/local/include/boost/iostreams/filtering_stream.hpp:19,
                 from simple.cpp:1:
/usr/local/include/boost/iostreams/detail/wrap_unwrap.hpp: In instantiation of ‘T boost::iostreams::detail::wrap(const T&, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::basic_bzip2_compressor<>; typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’:
/usr/local/include/boost/iostreams/stream_buffer.hpp:94:5:   required from ‘boost::iostreams::stream_buffer<T, Tr, Alloc, Mode>::stream_buffer(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:257:60:   required from ‘void boost::iostreams::detail::chain_base<Self, Ch, Tr, Alloc, Mode>::push_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Self = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; Ch = char; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:216:1:   required from ‘void boost::iostreams::detail::chain_base<Self, Ch, Tr, Alloc, Mode>::push(const T&, std::streamsize, std::streamsize, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::basic_bzip2_compressor<>; Self = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; Ch = char; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int; typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’
/usr/local/include/boost/iostreams/chain.hpp:496:7:   required from ‘void boost::iostreams::detail::chain_client<Chain>::push_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Chain = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:484:1:   required from ‘void boost::iostreams::detail::chain_client<Chain>::push(const T&, std::streamsize, std::streamsize, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::basic_bzip2_compressor<>; Chain = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; std::streamsize = long int; typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’
simple.cpp:6:47:   required from here
/usr/local/include/boost/iostreams/detail/wrap_unwrap.hpp:53:14: error: use of deleted function ‘boost::iostreams::basic_bzip2_compressor<>::basic_bzip2_compressor(const boost::iostreams::basic_bzip2_compressor<>&)’
In file included from simple.cpp:2:0:
/usr/local/include/boost/iostreams/filter/bzip2.hpp:239:8: note: ‘boost::iostreams::basic_bzip2_compressor<>::basic_bzip2_compressor(const boost::iostreams::basic_bzip2_compressor<>&)’ is implicitly deleted because the default definition would be ill-formed:
/usr/local/include/boost/iostreams/filter/bzip2.hpp:239:8: error: use of deleted function ‘boost::iostreams::symmetric_filter<boost::iostreams::detail::bzip2_compressor_impl<std::allocator<char> >, std::allocator<char> >::symmetric_filter(const boost::iostreams::symmetric_filter<boost::iostreams::detail::bzip2_compressor_impl<std::allocator<char> >, std::allocator<char> >&)’
In file included from /usr/local/include/boost/iostreams/filter/bzip2.hpp:29:0,
                 from simple.cpp:2:
/usr/local/include/boost/iostreams/filter/symmetric.hpp:72:7: note: ‘boost::iostreams::symmetric_filter<boost::iostreams::detail::bzip2_compressor_impl<std::allocator<char> >, std::allocator<char> >::symmetric_filter(const boost::iostreams::symmetric_filter<boost::iostreams::detail::bzip2_compressor_impl<std::allocator<char> >, std::allocator<char> >&)’ is implicitly deleted because the default definition would be ill-formed:
/usr/local/include/boost/iostreams/filter/symmetric.hpp:72:7: error: use of deleted function ‘boost::shared_ptr<boost::iostreams::symmetric_filter<boost::iostreams::detail::bzip2_compressor_impl<std::allocator<char> >, std::allocator<char> >::impl>::shared_ptr(const boost::shared_ptr<boost::iostreams::symmetric_filter<boost::iostreams::detail::bzip2_compressor_impl<std::allocator<char> >, std::allocator<char> >::impl>&)’
In file included from /usr/local/include/boost/shared_ptr.hpp:17:0,
                 from /usr/local/include/boost/iostreams/chain.hpp:37,
                 from /usr/local/include/boost/iostreams/filtering_streambuf.hpp:17,
                 from /usr/local/include/boost/iostreams/filtering_stream.hpp:22,
                 from simple.cpp:1:
/usr/local/include/boost/smart_ptr/shared_ptr.hpp:168:25: note: ‘boost::shared_ptr<boost::iostreams::symmetric_filter<boost::iostreams::detail::bzip2_compressor_impl<std::allocator<char> >, std::allocator<char> >::impl>::shared_ptr(const boost::shared_ptr<boost::iostreams::symmetric_filter<boost::iostreams::detail::bzip2_compressor_impl<std::allocator<char> >, std::allocator<char> >::impl>&)’ is implicitly declared as deleted because ‘boost::shared_ptr<boost::iostreams::symmetric_filter<boost::iostreams::detail::bzip2_compressor_impl<std::allocator<char> >, std::allocator<char> >::impl>’ declares a move constructor or move assignment operator
In file included from /usr/local/include/boost/iostreams/detail/streambuf/indirect_streambuf.hpp:23:0,
                 from /usr/local/include/boost/iostreams/stream_buffer.hpp:22,
                 from /usr/local/include/boost/iostreams/chain.hpp:35,
                 from /usr/local/include/boost/iostreams/filtering_streambuf.hpp:17,
                 from /usr/local/include/boost/iostreams/filtering_stream.hpp:22,
                 from simple.cpp:1:
/usr/local/include/boost/iostreams/detail/adapter/concept_adapter.hpp: In instantiation of ‘boost::iostreams::detail::concept_adapter<T>::concept_adapter(const T&) [with T = boost::iostreams::basic_bzip2_compressor<>]’:
/usr/local/include/boost/iostreams/detail/streambuf/indirect_streambuf.hpp:187:5:   required from ‘void boost::iostreams::detail::indirect_streambuf<T, Tr, Alloc, Mode>::open(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/stream_buffer.hpp:106:13:   required from ‘void boost::iostreams::stream_buffer<T, Tr, Alloc, Mode>::open_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/stream_buffer.hpp:94:5:   required from ‘boost::iostreams::stream_buffer<T, Tr, Alloc, Mode>::stream_buffer(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:257:60:   required from ‘void boost::iostreams::detail::chain_base<Self, Ch, Tr, Alloc, Mode>::push_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Self = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; Ch = char; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:216:1:   required from ‘void boost::iostreams::detail::chain_base<Self, Ch, Tr, Alloc, Mode>::push(const T&, std::streamsize, std::streamsize, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::basic_bzip2_compressor<>; Self = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; Ch = char; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int; typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’
/usr/local/include/boost/iostreams/chain.hpp:496:7:   required from ‘void boost::iostreams::detail::chain_client<Chain>::push_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Chain = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:484:1:   required from ‘void boost::iostreams::detail::chain_client<Chain>::push(const T&, std::streamsize, std::streamsize, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::basic_bzip2_compressor<>; Chain = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; std::streamsize = long int; typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’
simple.cpp:6:47:   required from here
/usr/local/include/boost/iostreams/detail/adapter/concept_adapter.hpp:67:48: error: use of deleted function ‘boost::iostreams::basic_bzip2_compressor<>::basic_bzip2_compressor(const boost::iostreams::basic_bzip2_compressor<>&)’
In file included from /usr/local/include/boost/iostreams/detail/streambuf/direct_streambuf.hpp:26:0,
                 from /usr/local/include/boost/iostreams/stream_buffer.hpp:21,
                 from /usr/local/include/boost/iostreams/chain.hpp:35,
                 from /usr/local/include/boost/iostreams/filtering_streambuf.hpp:17,
                 from /usr/local/include/boost/iostreams/filtering_stream.hpp:22,
                 from simple.cpp:1:
/usr/local/include/boost/iostreams/detail/optional.hpp: In instantiation of ‘void boost::iostreams::detail::optional<T>::reset(const T&) [with T = boost::iostreams::detail::concept_adapter<boost::iostreams::basic_bzip2_compressor<> >]’:
/usr/local/include/boost/iostreams/detail/streambuf/indirect_streambuf.hpp:187:5:   required from ‘void boost::iostreams::detail::indirect_streambuf<T, Tr, Alloc, Mode>::open(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/stream_buffer.hpp:106:13:   required from ‘void boost::iostreams::stream_buffer<T, Tr, Alloc, Mode>::open_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/stream_buffer.hpp:94:5:   required from ‘boost::iostreams::stream_buffer<T, Tr, Alloc, Mode>::stream_buffer(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:257:60:   required from ‘void boost::iostreams::detail::chain_base<Self, Ch, Tr, Alloc, Mode>::push_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Self = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; Ch = char; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:216:1:   required from ‘void boost::iostreams::detail::chain_base<Self, Ch, Tr, Alloc, Mode>::push(const T&, std::streamsize, std::streamsize, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::basic_bzip2_compressor<>; Self = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; Ch = char; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int; typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’
/usr/local/include/boost/iostreams/chain.hpp:496:7:   required from ‘void boost::iostreams::detail::chain_client<Chain>::push_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Chain = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:484:1:   required from ‘void boost::iostreams::detail::chain_client<Chain>::push(const T&, std::streamsize, std::streamsize, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::basic_bzip2_compressor<>; Chain = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; std::streamsize = long int; typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’
simple.cpp:6:47:   required from here
/usr/local/include/boost/iostreams/detail/optional.hpp:100:9: error: use of deleted function ‘boost::iostreams::detail::concept_adapter<boost::iostreams::basic_bzip2_compressor<> >::concept_adapter(const boost::iostreams::detail::concept_adapter<boost::iostreams::basic_bzip2_compressor<> >&)’
In file included from /usr/local/include/boost/iostreams/detail/streambuf/indirect_streambuf.hpp:23:0,
                 from /usr/local/include/boost/iostreams/stream_buffer.hpp:22,
                 from /usr/local/include/boost/iostreams/chain.hpp:35,
                 from /usr/local/include/boost/iostreams/filtering_streambuf.hpp:17,
                 from /usr/local/include/boost/iostreams/filtering_stream.hpp:22,
                 from simple.cpp:1:
/usr/local/include/boost/iostreams/detail/adapter/concept_adapter.hpp:38:7: note: ‘boost::iostreams::detail::concept_adapter<boost::iostreams::basic_bzip2_compressor<> >::concept_adapter(const boost::iostreams::detail::concept_adapter<boost::iostreams::basic_bzip2_compressor<> >&)’ is implicitly deleted because the default definition would be ill-formed:
/usr/local/include/boost/iostreams/detail/adapter/concept_adapter.hpp:38:7: error: use of deleted function ‘boost::iostreams::basic_bzip2_compressor<>::basic_bzip2_compressor(const boost::iostreams::basic_bzip2_compressor<>&)’

In file included from /usr/local/include/boost/iostreams/traits.hpp:31:0,
                 from /usr/local/include/boost/iostreams/pipeline.hpp:18,
                 from /usr/local/include/boost/iostreams/detail/push.hpp:22,
                 from /usr/local/include/boost/iostreams/filtering_stream.hpp:19,
                 from simple.cpp:1:
/usr/local/include/boost/iostreams/detail/wrap_unwrap.hpp: In instantiation of ‘T boost::iostreams::detail::wrap(const T&, typename boost::disable_if<boost::iostreams::is_std_io<T> >::type*) [with T = boost::iostreams::basic_bzip2_compressor<>; typename boost::disable_if<boost::iostreams::is_std_io<T> >::type = void]’:
/usr/local/include/boost/iostreams/stream_buffer.hpp:94:5:   required from ‘boost::iostreams::stream_buffer<T, Tr, Alloc, Mode>::stream_buffer(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’
/usr/local/include/boost/iostreams/chain.hpp:257:60:   required from ‘void boost::iostreams::detail::chain_base<Self, Ch, Tr, Alloc, Mode>::push_impl(const T&, std::streamsize, std::streamsize) [with T = boost::iostreams::basic_bzip2_compressor<>; Self = boost::iostreams::chain<boost::iostreams::input, char, std::char_traits<char>, std::allocator<char> >; Ch = char; Tr = std::char_traits<char>; Alloc = std::allocator<char>; Mode = boost::iostreams::input; std::streamsize = long int]’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:48:26.557

使用编译的`-std=c++0x`代码不会与没有编译的代码 ABI 兼容`-std=c++0x`。您需要在`-std=c++0x`启用的情况下自己构建 Boost；这可以通过将[`cxxflags`](http://www.boost.org/boost-build2/doc/html/bbv2/overview/builtins/features.html)参数传递给`bjam`/来完成`b2`。

# asp.net - LINQ 查询不等于

> ID：11365071
> 
> 赞同：0
> 
> 时间：2012-07-06T15:20:50.377
> 
> 标签：asp.net, linq-to-sql

下午，我如何将其设置为不等于？我基本上想说，如果 p.catrgory 不等于数据库中的类别之一。

```
 p.category == dc.Categories.SingleOrDefault(c => c.Name == p.category).Name 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:25:44.367

`p.Category`是不是在数据库中？

```
var exists == !dc.Categories.Any(c => c.Name == p.category) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:27:31.463

```
dc.Categories.Where(c => c.Name = p.category).Any(); 
```

如果存在，它将返回 true，因此，使用，`!`运算符

```
!dc.Categories.Where(c => c.Name = p.category).Any(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:25:41.690

你应该改变：

```
p.category == dc.Categories.SingleOrDefault(c => c.Name == p.category).Name 
```

到

```
p.category == dc.Categories.SingleOrDefault(c => c.Name != p.category).Name 
```

**如果 p.category 不等于数据库中的类别之一**

# python - 在 Lion 上安装 twisted for python 失败

> ID：11365085
> 
> 赞同：2
> 
> 时间：2012-07-06T15:21:31.437
> 
> 标签：python, xcode, macos, twisted, easy-install

我想在我的macbook 上安装twis​​ted。

```
System version: Mac OS X Lion 10.7.4
Xcode version: Version 4.3.3 (4E3002) 
```

蟒蛇版本：

```
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin 
```

当我运行这个：

```
sudo easy_install twisted 
```

它失败了：

```
Processing Twisted-12.1.0.tar.bz2

Running Twisted-12.1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_installdtZ7Lk/Twisted-12.1.0/egg-dist-tmp-NUWexg

unable to execute gcc-4.2: No such file or directory

...

error: Setup script exited with error: command 'gcc-4.2' failed with exit status 1 
```

但我确实安装了 gcc：

```
gcc --version 

i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00)

Copyright (C) 2007 Free Software Foundation, Inc.

This is free software; see the source for copying conditions.  There is NO

warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

任何人都可以帮助我吗？

帖子：问题由此解决：

```
which gcc
/usr/bin/gcc
cd /usr/bin
ln gcc gcc-4.2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T16:31:31.277

1.  Twisted 是 OS X 自带的，所以你不需要这样做；假设 11.0 是可接受的版本（这就是 Lion 中的内容）。就`>>> import twisted`走吧。

2.  在任何平台上，从来没有`sudo easy_install`任何东西，也许除了[virtualenv](http://pypi.python.org/pypi/virtualenv)或[pip](http://pypi.python.org/pypi/pip)。 `easy_install`没有卸载功能，它不能给你它安装的文件列表。 `pip install`稍微好一点，但最好是避免在全局系统中安装任何东西；系统本身的组件可能使用某些 Python 库，安装新版本可能不完全兼容。

# php - 如何检查用户输入的重复文本

> ID：11365086
> 
> 赞同：0
> 
> 时间：2012-07-06T15:21:33.853
> 
> 标签：php, user-input, validation, repeat

当有字数要求时。一些用户可能会用重复的垃圾文本填充剩余的配额。我想设置允许的重复次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:21:34.867

```
 $input = "this is a test to see if there are repeats in this sentence blah blah blah as these three here";

    if(check_input($input, 3) === false)
        var_dump("No repeat found");
    else
        var_dump("Repeat found");

    function check_input($input, $maximum_repeats){
        $repeat_found = false;

        for($i = 0; $i < strlen($input) && $repeat_found == false; $i++){

            for($k = 0; $k < strlen($input) && $repeat_found == false; $k++){
                $test = substr($input, $i, $k);

                if(strlen($test) > 0){
                    if(find_repeat($test, $input, $maximum_repeats) === true){
                        $repeat_found = true;
                    }
                }
            }
        }

        return $repeat_found;
    }

    function find_repeat($target, $input, $amount){
        $needle = "";

        for($i = 0; $i < $amount; $i++)
            $needle .= $target;

        return strpos($input, $needle) !== false;
    } 
```

这个函数对于“blah blah blah”和其他例子来说都是正确的，例如

> 好的...

# php - WAMP 最大上传文件大小

> ID：11365088
> 
> 赞同：0
> 
> 时间：2012-07-06T15:21:37.947
> 
> 标签：php, file-upload, wamp

我正在编写一个 PHP 脚本来上传和重新调整 4 个图像的大小。我选择使用为 4 个输入提供相同名称（一个数组）的方法：

```
<input type="file" name = "userfile[]" id="file1" />
<input type="file" name = "userfile[]" id="file2" />
<input type="file" name = "userfile[]" id="file3" />
<input type="file" name = "userfile[]" id="file4" /> 
```

我已将 wamp 中的 max_upload_filesize 设置为 50M。我已经验证 max_uploads 设置为默认值 (20)。我已重新启动所有服务并运行 php_info 以验证此 php.ini 文件是否已加载。

我的表单接收器页面只做一件事：

```
var_dump($_FILES["userfile"]); 
```

这很好用，直到文件大小接近 8MB。当上传文件的大小接近 8MB 时，我收到错误 **Notice: Undefined index: userfile in C:\wamp\www\uploader\file_upload.php on line 2**

我重新调整了一张图片的大小，将其推至 8MB 大小，然后尝试上传 1 个单个文件 - 这会重新创建错误。我确信这里存在 8MB 的限制。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:29:32.413

发现`post_max_size`并增加它的价值。

此外，它是`upload_max_filesize`，不是`max_upload_filesize`。

# arrays - PowerCLI 快照阵列

> ID：11365089
> 
> 赞同：1
> 
> 时间：2012-07-06T15:21:42.400
> 
> 标签：arrays, powershell, vmware, powercli

现在有点难过，想知道社区是否可以快速推动我，帮助我继续我正在工作的项目。

在我正在处理的程序中，我试图从数组中获取 6 个最新元素。我想将快照变量放在数组中，以便获取数组中的所有快照。这是目前让我感到困惑的代码部分：

```
$server = "test"
$date = get-date
$tempArray = @()
$snapshot = get-snapshot -VM "test"

foreach ($item in $snapshot){
    $tempArray += $item
}

$tempArray | sort
for ($i = 0; $i -le $tempArray.length-6; $i++){
    remove-item $tempArray[$i]
} 
```

我是否实现了在我的数组中获取 $snapshot 变量的目标，并且我的 for 循环是否正确管理删除除了 6 个最新的变量之外的所有变量？

编辑：修复了以前没有注意到的小问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:12:52.063

你的代码有几个问题。我不确定这是否会修复您的脚本，但这些似乎是您应该首先解决的明显问题。

```
foreach ($item in $snapshot){
    $tempArray++ -> this should be $tempArray += $item, right? if you are adding $item to the tempArray
}

$tempArray | sort
for ($i = 0; $i -le $tempArray.length-6; $i++){
    remove-item $snapshot -> this should be remove-item $tempArray[$i], right?
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T01:34:16.503

按创建的时间戳属性进行反向排序，然后使用`Skip`in select 对象获取 6 个最新之后的所有内容

```
$snapshot = get-snapshot -VM "test"

$snapshot | sort created -descending | select -Skip 6 | Remove-Snapshot -Confirm:$false 
```

# jquery - jQuery滚动到锚点（减去设置的像素数量）

> ID：11365091
> 
> 赞同：36
> 
> 时间：2012-07-06T15:21:46.083
> 
> 标签：jquery, scroll, anchor

我正在使用以下代码通过 jQuery 滚动到锚点：

```
$(document).ready(function() {
  function filterPath(string) {
  return string
    .replace(/^\//,'')
    .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
    .replace(/\/$/,'');
  }
  var locationPath = filterPath(location.pathname);
  var scrollElem = scrollableElement('html', 'body');

  $('a[href*=#]').each(function() {
    var thisPath = filterPath(this.pathname) || locationPath;
    if (  locationPath == thisPath
    && (location.hostname == this.hostname || !this.hostname)
    && this.hash.replace(/#/,'') ) {
      var $target = $(this.hash), target = this.hash;
      if (target) {
        var targetOffset = $target.offset().top;
        $(this).click(function(event) {
          event.preventDefault();
          $(scrollElem).animate({scrollTop: targetOffset}, 400, function() {
            location.hash = target;
          });
        });
      }
    }
  });

  // use the first element that is "scrollable"
  function scrollableElement(els) {
    for (var i = 0, argLength = arguments.length; i <argLength; i++) {
      var el = arguments[i],
          $scrollElement = $(el);
      if ($scrollElement.scrollTop()> 0) {
        return el;
      } else {
        $scrollElement.scrollTop(1);
        var isScrollable = $scrollElement.scrollTop()> 0;
        $scrollElement.scrollTop(0);
        if (isScrollable) {
          return el;
        }
      }
    }
    return [];
  }

}); 
```

有没有办法让它滚动到那个锚点但减去一定数量的像素？（在我的情况下，我希望它去-92px）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-03T16:21:57.920

我只需要自己解决这个问题。您需要通过要滚动到的像素量来调整偏移量。就我而言，我需要它在页面上高出 50 像素。所以，我从 targetOffset 中减去了 50。

现在，给您带来不稳定的代码部分是 location.hash - 它告诉浏览器将其位置设置为特定点。在所有情况下，这是一个包含您刚刚滚动到的 ID 的字符串。所以，它会是类似“#foo”的东西。你需要维护它，所以我们会留下它。

但是，为了防止浏览器在设置 location.hash 时“跳转”（默认浏览器操作），您只需要阻止默认操作即可。因此，通过 animate 函数中的完成函数传递您的事件“e”。然后只需调用 e.preventDefault()。您必须确保浏览器实际上正在调用一个事件，否则它会出错。因此，如果测试解决了这个问题。

完毕。这是修改后的代码块：

```
if (target) {
    var targetOffset = $target.offset().top - 50;
    $(this).click(function(event) {
      if(event != 'undefined') {
          event.preventDefault();}
      $(scrollElem).animate({scrollTop: targetOffset}, 400, function(e) {
          e.preventDefault();
          location.hash = target;
      });
    });
  } 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-06T13:28:02.720

这就是我使用的：

```
function scrollToDiv(element){
    element = element.replace("link", "");
    $('html,body').unbind().animate({scrollTop: $(element).offset().top-50},'slow');
}; 
```

...其中`50`是要添加/减去的像素数。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-08-27T20:12:47.917

此代码适用于我网站中的任何链接锚点中的“150px”高度，用于顶部的修复菜单。

```
<!-- SMOOTH SCROLL -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>
$(function() {
  $('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $('html,body').animate({
          scrollTop: target.offset().top-150
        }, 1000);
        return false;
      }
    }
  });
});
</script>
<!-- End of SMOOTH SCROLL --> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-03-19T13:58:35.430

```
<span class="anchor" id="section1"></span>
<div class="section"></div>

<span class="anchor" id="section2"></span>
<div class="section"></div>

<span class="anchor" id="section3"></span>
<div class="section"></div>

<style>
.anchor{
  display: block;
  height: 115px; /*same height as header*/
  margin-top: -115px; /*same height as header*/
  visibility: hidden;
}
</style>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-13T02:48:13.130

我无法使用 Jonathan Savage 的解决方案，因为我无法将事件回调传递给 animate() 而不会出错。我今天遇到了这个问题，并找到了一个简单的解决方案：

```
 var $target = $(this.hash), target = this.hash;
      if (target) {
        var targetOffset = $target.offset().top - 92;
        $(this).click(function(event) {
          event.preventDefault();
          $(scrollElem).animate({scrollTop: targetOffset}, 400, function() {
            location.hash = targetOffset;
          });
        }); 
```

从 targetOffset 变量中减去您的像素偏移量，然后将 location.hash 分配给该变量。滚动到目标哈希时停止页面跳转。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-23T03:47:37.303

这是我使用的一个 jQuery 片段，它非常有资源和灵活。如果您在建议的页脚中运行它，您可以删除 DOM Ready。只需在其前面加载任何 1.4v 后的库。它侦听锚点上的所有点击，然后运行布尔值和 OR 进行类检查。如果它找到一个类，那么它会运行脚本和动画。您可以从其结束位置调整偏移量，在大多数应用程序中我更喜欢 60 像素，但可以根据需要随意调整。

```
<!--jQuerySmoothScroll-->
<script>
jQuery(document).ready(function(){
  	// Add smooth scrolling to all links
  	jQuery("a").on('click', function(event) {
      //check that we have the smooth-scroll class add as many as need be
            if (jQuery(this).hasClass("whatever-class-you-want") || jQuery(this).hasClass("smooth-scroll")) {
    			// Make sure this.hash has a value before overriding default behavior
   		 			if (this.hash !== "") {
      					// Prevent default anchor click behavior
      				event.preventDefault();
      			// Store hash
      			var hash = this.hash;
     	 	// Using jQuery's animate() method to add smooth page scroll
      		// The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
        jQuery('html, body').animate({
        scrollTop: jQuery(hash).offset().top-60// Set offset from top position
       }, 800, function(){

        // Add hash (#) to URL when done scrolling (default click behavior)
        window.location.hash = hash;
      });
     } // End if
    } // End if (class)
  });
});
</script>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-01T15:35:34.297

这是我使用的基于 Никита Андрейчук 解决方案的 jQuery 实现。像素调整变量可以通过这种方式动态设置，尽管在本示例中它是硬编码的。

```
$( 'a' ).each(function() {
    var pixels = 145;
    var name = $( this ).attr( 'name' );
    if ( typeof name != 'undefined' ) {
        $( this ).css({
          'display'    : 'block',
          'height'     : pixels + 'px',
          'margin-top' : '-' + pixels + 'px',
          'visibility' : 'hidden'
        });
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-17T12:54:05.920

这是我使用的。将偏移量设置为您需要的值。

```
$('a[href^="#"]').click(function(e) {
  e.preventDefault();
  $(window).stop(true).scrollTo(this.hash {duration:1000,interrupt:true,offset: -50});
}); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-08-13T02:10:30.240

不想学习 Javascript 并且一直在寻找最简单的选择，只需在要着陆的锚点上方创建一个空 DIV，然后在 CSS 中创建 div

# anchorpointl{margin-top: -115px;}

或者无论你想去多远或多远，工作完成

# jsf-2 - 我可以从 JSF 支持 bean 方法更新 JSF 组件吗？

> ID：11365094
> 
> 赞同：108
> 
> 时间：2012-07-06T15:22:12.987
> 
> 标签：jsf-2, primefaces

有没有办法让 JSF Backing bean 导致页面上的组件更新？我不希望使用具有更新属性的 ajax 组件来更新页面上的组件。我需要从 JSF 支持 bean 方法中触发更新。请注意，页面上的更新可能发生在此方法完成之后或完成之前。我正在使用 PrimeFaces，如果可以通过使用 PrimeFaces 获得解决方案。

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-07-06T17:51:42.740

使用标准 JSF API，将客户端 ID 添加到[`PartialViewContext#getRenderIds()`](https://jakarta.ee/specifications/faces/2.3/apidocs/javax/faces/context/PartialViewContext.html#getRenderIds--).

```
FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add("foo:bar"); 
```

使用 PrimeFaces 特定 API，使用[`PrimeFaces.Ajax#update()`](https://www.primefaces.org/docs/api/8.0/org/primefaces/PrimeFaces.Ajax.html#update-java.lang.String...-).

```
PrimeFaces.current().ajax().update("foo:bar"); 
```

或者，如果您还没有使用 PrimeFaces 6.2+，请使用[`RequestContext#update()`](http://www.primefaces.org/docs/api/6.0/org/primefaces/context/RequestContext.html#update-java.lang.String-).

```
RequestContext.getCurrentInstance().update("foo:bar"); 
```

如果您碰巧使用 JSF 实用程序库[OmniFaces](http://omnifaces.org)，请使用[`Ajax#update()`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Ajax.html#update-java.lang.String...-).

```
Ajax.update("foo:bar"); 
```

无论采用哪种方式，请注意，这些客户端 ID 应该代表绝对客户端 ID，它们*不*以分隔符为前缀，`NamingContainer`就像您从视图端所做的那样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-02T10:48:39.077

我还尝试从 jsf 支持 bean/类更新组件

操作完 UI 组件后，需要进行以下操作：

```
FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add(componentToBeRerendered.getClientId()) 
```

使用 clientId 而不是（服务器端）componentId 很重要！！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-06-07T19:28:36.857

已从Primefaces **6.2****`RequestContext`**中**弃用**。从此版本开始使用以下内容：

 **```
if (componentID != null && PrimeFaces.current().isAjaxRequest()) {
    PrimeFaces.current().ajax().update(componentID);
} 
```

并从后台执行**javascript**使用这种方式：

```
PrimeFaces.current().executeScript(jsCommand); 
```

### 参考：

*   [https://github.com/primefaces/primefaces/wiki/Migration-Guide](https://github.com/primefaces/primefaces/wiki/Migration-Guide)
*   [https://forum.primefaces.org/viewtopic.php?t=53129](https://forum.primefaces.org/viewtopic.php?t=53129)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-19T15:00:26.653

只有有足够的时间研究，一切皆有可能:)

我要做的就像让人们迭代到 ui:repeat 并在输入中显示名称和其他字段。但是其中一个字段是 singleSelect - A 并根据它的值更新另一个输入 - B。甚至 ui:repeat 也没有我输入的 id 并且它出现在 DOM 树中

```
<ui:repeat id="peopleRepeat"
value="#{myBean.people}"
var="person" varStatus="status"> 
```

比 html 中的 id 是这样的：

```
myForm:peopleRepeat:0:personType
myForm:peopleRepeat:1:personType 
```

比在视图中我得到一种方法，例如：

```
<p:ajax event="change"
listener="#{myBean.onPersonTypeChange(person, status.index)}"/> 
```

它的实现是在 bean 中，如：

```
String componentId = "myForm:peopleRepeat" + idx + "personType";
PrimeFaces.current().ajax().update(componentId); 
```

因此，我通过这种方式更新了 bean 中的元素，没有任何问题。PF 6.2 版

祝你好运，编码愉快:)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-03-24T16:53:24.313

为了从 backing bean 更新组件，我们可以实现如下 `RequestContext.getCurrentInstance().update('updatePanelGroup');`

```
<h:panelGroup id="updatePanelGroup">
    .....
    ....
</h:panelGroup> 
```

更新组件的基本面版本不同。**

# android - 具有 ROWID 别名的 SQLite CREATE 表

> ID：11365097
> 
> 赞同：2
> 
> 时间：2012-07-06T15:22:17.040
> 
> 标签：android, sqlite

看着[这个答案](https://stackoverflow.com/a/4868829/236743)，我试图弄清楚如何实际创建一个表，其中的列只是 ROWID 的别名。我想这样做，因为某些 android 类需要一个名为“_id”的唯一列，但我不希望该列成为主键。我不能在不是 PK 的 col 上使用 AUTO_INCREMENT，所以我希望 _id 成为别名。我知道我可以在查询中做到这一点，但这对我的情况不实用。任何指针？这甚至可能吗？

谢谢 ：）

编辑：真的我只是希望能够拥有自己的 PK，但也有一个 id 字段供 CursorAdapters 正常工作等

编辑：查看[我是否必须使用 _ID 作为 SQlite 主键？它必须是INT吗？(Android Dev)](https://stackoverflow.com/questions/4313987/do-i-have-to-use-id-as-a-sqlite-primary-key-and-does-it-have-to-be-an-int-an)如果我的 PK 也是数字类型，它建议在查询中执行此操作，但如果它是我用于我的 PK 的 TEXT col 怎么办？（在这里大声思考）-我想我可以复制[CursorAdaptor](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/CursorAdapter.java)并且只是 getString 而不是 _id col 的 long （另外，将 col 的名称作为 PK 传递给光标适配器，摆脱 _id！）或者只是在 SELECT 中为 ROWID 添加一个别名作为 _id，虽然感觉有点 hacky...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:41:01.413

您可能有一个完全独立于 SQLite 内置[rowid](http://www.sqlite.org/lang_createtable.html)的主键。

> 每个 SQLite 表的每一行都有一个 64 位有符号整数键，用于唯一标识其表中的行。这个整数通常称为“rowid”。可以使用与特殊大小写无关的名称“rowid”、“oid”或“ *rowid* ”之一来代替列名来访问 rowid 值。

`_id`您可以制定查询，以便`CursorAdaptor`通过将隐藏的 rowid 列添加到结果中来调用内置的 rowid ：

```
select _rowid_ as _id, ... 
```

rowid 是唯一的，但不必是主键。您可以在 CREATE TABLE 语句中设置任何您喜欢的主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:29:58.613

TBH，我不认为这真的可行。您需要拥有这种 PK 专栏（即使有很多黑客攻击，您也可以创建某种解决方法）。

我宁愿建议将 _id 列作为技术 PK 并有一个附加列作为逻辑 PK，即只是一个具有唯一约束的自由定义的列。然后，您的程序逻辑应该能够简单地将逻辑 PK 用于所有操作。当然，这需要您使用自定义查询进行查找操作等，但这通常更合适。

hth..

# yii - Yii 框架未检查 accessRules 中的角色

> ID：11365099
> 
> 赞同：3
> 
> 时间：2012-07-06T15:22:24.593
> 
> 标签：yii, setstate

我正在 Yii 框架中创建某种管理面板，并且我在登录时设置状态是这样的

```
public function authenticate()
{

    $record=AdminTbl::model()->findByAttributes(array('usr'=>$this->username));
    if($record===null)
        $this->errorCode=self::ERROR_USERNAME_INVALID;
    else if($record->pwd!==$this->password)
        $this->errorCode=self::ERROR_PASSWORD_INVALID;
    else
    {
        $this->_id=$record->id;
        $this->setState('roles','main');
        $this->errorCode=self::ERROR_NONE;
    }
    return !$this->errorCode;
} 
```

我检查了状态是否真的设置，在视图中回显。后来我把这个角色放在 accessrules()

```
public function accessRules()
{
    return array(
        array('allow',  // allow all users to perform 'index' and 'view' actions
            'actions'=>array('index','view','create','update','admin','delete'),
            'roles'=>array('main'),
        ),
        array('deny',  // deny all users
            'users'=>array('*'),
        ),
    );
} 
```

我无法在此用户登录的情况下访问这些页面。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:16:53.417

看看这里，[http://www.yiiframework.com/doc/guide/1.1/en/topics.auth](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth)

您需要创建*主要*角色并通过用户 ID 分配它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T09:54:31.470

如果您需要简单的基于角色的访问控制而不需要冗长的 RBAC 流程，那么本文就是为您准备的

[http://www.yiiframework.com/wiki/328/simple-rbac/](http://www.yiiframework.com/wiki/328/simple-rbac/)

# google-app-engine - 谷歌应用引擎 HTTP 错误 403

> ID：11365100
> 
> 赞同：3
> 
> 时间：2012-07-06T15:22:26.023
> 
> 标签：google-app-engine

我正在尝试编写一个简单的 Google App Engine 应用程序。我正在关注本教程： [https](https://developers.google.com/appengine/docs/java/gettingstarted/creating) ://developers.google.com/appengine/docs/java/gettingstarted/creating ，但是我无法使其正常工作。

在本地主机上测试时，我收到：

```
HTTP ERROR 403
Problem accessing /. Reason:
    FORBIDDEN
Powered by Jetty:// 
```

这是我的应用程序代码：

```
package test;

import java.io.IOException;
import javax.servlet.http.*;

public class Test extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");
        resp.getWriter().println("Hello, world");
    }
} 
```

我的 web.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE web-app PUBLIC
 "-//Oracle Corporation//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app xmlns="http://java.sun.com/xml/ns/javaee" version="2.5">
    <servlet>
        <servlet-name>test</servlet-name>
        <servlet-class>test.Test</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>test</servlet-name>
        <url-pattern>/test</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

我的 appengine-web.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>halocline-test</application>
  <version>10</version>

  <!--
    Allows App Engine to send multiple requests to one instance in parallel:
  -->
  <threadsafe>true</threadsafe>

  <!-- Configure java.util.logging -->
  <system-properties>
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
  </system-properties>

  <!--
    HTTP Sessions are disabled by default. To enable HTTP sessions specify:

      <sessions-enabled>true</sessions-enabled>

    It's possible to reduce request latency by configuring your application to
    asynchronously write HTTP session data to the datastore:

      <async-session-persistence enabled="true" />

    With this feature enabled, there is a very small chance your app will see
    stale session data. For details, see
    http://code.google.com/appengine/docs/java/config/appconfig.html#Enabling_Sessions
  -->

</appengine-web-app> 
```

控制台输出：

```
Jul 06, 2012 2:42:34 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
Jul 06, 2012 2:42:35 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed C:\Users\Halocline\workspace\Test\war\WEB-INF/appengine-web.xml
Jul 06, 2012 2:42:35 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed C:\Users\Halocline\workspace\Test\war\WEB-INF/web.xml
Jul 06, 2012 3:42:36 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The server is running at http://localhost:8888/
Jul 06, 2012 3:42:36 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The admin console is running at http://localhost:8888/_ah/admin 
```

当我在 Web 浏览器中打开 localhost:8888 时，控制台中没有显示任何错误。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:23:43.027

您的 servlet 映射到`http://localhost:8888/test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T16:14:20.927

我相信您可能将 index.html 文件放在错误的目录中。检查它没有意外滑下`WEB-INF`。应该是直接下`war`。

# ruby-on-rails - Rails 邮件在生产中呈现空邮件正文

> ID：11365101
> 
> 赞同：0
> 
> 时间：2012-07-06T15:22:39.643
> 
> 标签：ruby-on-rails, mail-gem

我使用 rails Rails 3.2.3 和 Resque 发送电子邮件。出于某种奇怪的原因，有关生产的电子邮件以空正文发送。我尝试在本地重现问题，但没有运气。生产日志没有什么奇怪的

```
Sent mail to somemail@rambler.ru (730ms)
  Rendered user_mailer/_activation_email.html.erb (0.8ms)
  Rendered user_mailer/activate_service_provider_with_email.html.erb within  layouts/user_mailer (83.2ms)

Sent mail to somemail@rambler.ru (737ms)
  Rendered user_mailer/_activation_email.html.erb (0.7ms)
  Rendered user_mailer/activate_service_provider_with_email.html.erb within   layouts/user_mailer (83.3ms)

Sent mail to somemail@rambler.ru (740ms)
  Rendered user_mailer/discount.html.erb within layouts/user_mailer (231.6ms)

Sent mail to somemail@rambler.ru (536ms)
Starting the New Relic Agent.
Installed New Relic Browser Monitoring middleware
Creating scope :near. Overwriting existing method ServiceProvider.near.
Connected to NewRelic Service at collector-2.newrelic.com 
```

任何人都可以建议我应该检查什么 - 缓存等以发现问题...电子邮件应该包含 html 但我得到纯文本内容类型 **这是邮件文本：**

```
Delivered-To: somemail@gmail.com
Received: by 11.11.66.777 with SMTP id c8csp32365iei;
    Fri, 6 Jul 2012 06:34:44 -0700 (PDT)
Received: by 11.22.333.444 with SMTP id lv8mr2489460igc.41.1341581684021;
    Fri, 06 Jul 2012 06:34:44 -0700 (PDT)
Return-Path: <noreply@oursite.ua>
Received: from soursite.ru (oursite.ru. [184.106.242.18])
    by mx.google.com with ESMTPS id vb2si4216338igc.71.2012.07.06.06.34.43
    (version=TLSv1/SSLv3 cipher=OTHER);
    Fri, 06 Jul 2012 06:34:44 -0700 (PDT)
Received-SPF: pass (google.com: domain of noreply@oursite.ua designates 111.11.111.11   as permitted sender) client-ip=123.456.78.90;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of  noreply@oursite.ua   designates 123.456.78.908 as permitted sender)  smtp.mail=noreply@oursite.ua
Received: from localhost ([127.0.0.1] helo=localhost.localdomain)
by oursite.ru with esmtp (Exim 4.71)
(envelope-from <noreply@oursite.ua>)
id 1Sn8k3-00086o-Vt
for somemail@gmail.com; Fri, 06 Jul 2012 13:38:40 +0000
Date: Fri, 06 Jul 2012 13:38:39 +0000
From: noreply@oursite.ua
To: somemail@gmail.com
Message-ID: <4ff6ea5fb7942_79c0f9c45069741@OURSITE.ru.mail>
Subject: =?UTF-8?Q?=D0=9C=D1=8B?=
 =?UTF-8?Q?_=D0=BF=D1=80=D0=B8=D0=B2=D0=BE=D0=B4=D0=B8=D0=BC_=D0=BA?=
 =?UTF-8?Q?_=D0=92=D0=B0=D0=BC?=
 =?UTF-8?Q?_=D0=BA=D0=BB=D0=B8=D0=B5=D0=BD=D1=82=D0=BE=D0=B2_=D0=B8?=
 =?UTF-8?Q?_=D0=BE=D0=BF=D0=BB=D0=B0=D1=87=D0=B8=D0=B2=D0=B0=D0=B5=D0=BC?=
 =?UTF-8?Q?_=D0=B8=D0=BC_=D1=83=D1=81=D0=BB=D1=83=D0=B3=D0=B8?=
 =?UTF-8?Q?_=D0=92=D0=B0=D1=88=D0=B5=D0=B3=D0=BE?=
 =?UTF-8?Q?_=D1=81=D0=B0=D0=BB=D0=BE=D0=BD=D0=B0:?=
 =?UTF-8?Q?_=D0=9F=D0=B0=D1=80=D1=82=D0=BD=D0=B5=D1=80=D1=81=D0=BA=D0=B0=D1=8F?=
 =?UTF-8?Q?_=D0=BF=D1=80=D0=BE=D0=B3=D1=80=D0=B0=D0=BC=D0=BC=D0=B0?=
 =?UTF-8?Q?_=D0=BE=D1=82?=
 =?UTF- ?Q?_=D0=98=D0=BD=D1=82=D0=B5=D1=80=D0=BD=D0=B5=D1=82-=D0=BF=D0=BE=D1=80=D1=82=D0=B0=D0=BB=      D0=B0?=
 =?UTF-8?Q?=
 Mime-Version: 1.0
 Content-Type: text/plain;
 charset=UTF-8
 Content-Transfer-Encoding: 7bit 
```

**这是我在开发中收到的正确邮件**

```
Return-Path: <noreply@oursite.ua>
Received: from [11.2.2.21] (HELO mx21.rambler.ru)
  by mail43.rambler.ru (rmaild SMTP 1.3.41)
  with ESMTP id 44865232 for someguy@rambler.ru; Fri, 06 Jul 2012 17:24:06 +0400
Received: from oursite.ru (oursite.ru [111.456.111.11])
    by mx21.rambler.ru (Postfix) with ESMTP id E6D5ED85F69
    for <someguy@rambler.ru>; Fri,  6 Jul 2012 17:24:05 +0400 (MSK)
Received: from localhost ([127.0.0.1] helo=localhost.localdomain)
    by oursite.ru with esmtp (Exim 4.71)
    (envelope-from <noreply@oursite.ua>)
    id 1Sn8Zl-0007up-Cj
    for someguy@rambler.ru; Fri, 06 Jul 2012 13:28:01 +0000
Date: Fri, 06 Jul 2012 13:28:01 +0000
From: noreply@oursite.ua
To: someguy@rambler.ru
Message-ID: <4ff6e7e127236_76d3127debc36876@oursite.ru.mail>
Subject: =?UTF-8?Q?=D0=90=D0=BA=D1=82=D0=B8=D0=B2=D0=B0=D1=86=D0=B8=D1=8F?=
 =?UTF-8?Q?_=D0=B0=D0=BA=D0=BA=D0=B0=D1=83=D0=BD=D1=82=D0=B0_=D0=B2_oursite?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.o=
rg/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns=3D"http://www.w3.org/1999/xhtml" xml:lang=3D"en-GB">
<head>
    <title>oursite email notification</title>
    <meta http-equiv=3D"Content-Type" content=3D"application/xhtml+xml; char=
set=3Dutf-8" />
    <meta name=3D"description" content=3D"oursite!" />
    <meta name=3D"keywords" content=3D"" />
    <meta name=3D"robots" content=3D"index, follow" />
    <meta http-equiv=3D"X-UA-Compatible" content=3D"IE=3Dedge" /> <!-- IE=
 9 rounded corners -->
</head>
<body>
 =

    <div style=3D"border:4px solid #a90e15; width:600px; padding:20px; ba=
ckground-color:#fff; font-family:Helvetica, Arial, sans-serif;">
        <div style=3D"color:#a90e15; font-size:60px; letter-spacing:-1px;=
 font-weight:lighter;">Style <span style=3D"background-color:#a90e15; col=
or:#fff; font-size: 40px; padding:10px; font-weight:bold;">Up</span></div=
><br />
        <div style=3D"color:#000; font-size:14px;">
            =

                            =D0=94=D0=BE=D0=B1=D1=80=D0=BE =D0=BF=D0=BE=D0=B6=D0=B0=
=D0=BB=D0=BE=D0=B2=D0=B0=D1=82=D1=8C =D0=B2 oursite, DeleteThis!<br />
          =D0=94=D0=BB=D1=8F =D1=82=D0=BE=D0=B3=D0=BE =D1=87=D1=82=D0=BE=D0=
=B1=D1=8B =D0=B0=D0=BA=D1=82=D0=B8=D0=B2=D0=B8=D1=80=D0=BE=D0=B2=D0=B0=D1=
=82=D1=8C =D0=92=D0=B0=D1=88 =D0=B0=D0=BA=D0=BA=D0=B0=D1=83=D0=BD=D1=82 =D0=
=BF=D1=80=D0=BE=D0=B9=D0=B4=D0=B8=D1=82=D0=B5 =D0=BF=D0=BE =D1=81=D1=81=D1=
=8B=D0=BB=D0=BA=D0=B5 <a href=3D"http://kiev.oursite.ua/activate/S6oqGyan=
66i83NoTNUI">http://kiev.oursite.ua/activate/S6oqGyan66i83NoTNUI</a>.<br =
/>

          <br />
          <br />

            =

</div>

    </div><!-- end of accom div -->

    <div style=3D"color:#000; background-color:#FBF5E5; font-size:12px; w=
idth:628px; padding:10px; text-align:center; font-family:Helvetica, Arial=
, sans-serif;">
        =D0=93=D1=80=D1=83=D0=BF=D0=BF=D0=B0 oursite! <a href=3D"http://v=
kontakte.ru/club1111409799" style=3D"color:#000; font-weight:bold;">=D0=B2=D0=
=BA=D0=BE=D0=BD=D1=82=D0=B0=D0=BA=D1=82=D0=B5</a><br />
        =D0=93=D1=80=D1=83=D0=BF=D0=BF=D0=B0 =D0=B2 <a href=3D"http://www=
.facebook.com/oursite.ru" style=3D"color:#000; font-weight:bold;">faceboo=
k</a><br />
        =D0=9D=D0=B0=D1=88=D0=B8 =D0=BD=D0=BE=D0=B2=D0=BE=D1=81=D1=82=D0=B8=
 =D0=B2 <a href=3D"https://twitter.com/intent/user?screen_name=3Doursite_=
ru" style=3D"color:#000; font-weight:bold;">twitter</a><br />
        <a href=3D"oursite.ua" style=3D"color:#000; font-weight:bold;"></=
a><br /><br />
        &copy; 2011 oursite! =

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:49:07.723

看起来我找到了解决方案。邮件的 HTML 模板仅包含**<%= render 'some_partial' %>** ，当我将文本从部分复制到模板时，它开始正确呈现。

# opengl - 检测 glsl 兼容性配置文件中是否启用了 gl_LightSource

> ID：11365102
> 
> 赞同：1
> 
> 时间：2012-07-06T15:22:40.560
> 
> 标签：opengl, glsl, maya

我正在编写一个 GLSL 程序，作为在 Maya（一个闭源 3D 应用程序）内部运行的插件的一部分。`gl_LightSource`Maya 使用固定函数管道来定义它的灯光，因此我的程序必须使用兼容性配置文件从阵列中获取它的灯光信息。我的灯光评估工作正常[（感谢 Nicol Bolas）](https://stackoverflow.com/questions/11212933/glsl-gl-lightsource-point-directional-spot-differentiation)，除了一件事，我无法弄清楚如何确定阵列中的特定灯光是启用还是禁用。这是我到目前为止所拥有的：

```
#version 410 compatibility

vec3 incidentLight (in gl_LightSourceParameters light, in vec3 position)
{
    if (light.position.w == 0) {
        return normalize (-light.position.xyz);
    } else {
        vec3 offset = position - light.position.xyz;
        float distance = length (offset);
        vec3 direction = normalize (offset);
        float intensity;
        if (light.spotCutoff <= 90.) {
            float spotCos = dot (direction, normalize (light.spotDirection));
            intensity = pow (spotCos, light.spotExponent) *
                    step (light.spotCosCutoff, spotCos);
        } else {
            intensity = 1.;
        }
        intensity /= light.constantAttenuation +
                light.linearAttenuation * distance +
                light.quadraticAttenuation * distance * distance;
        return intensity * direction;
    }
}

void main ()
{
    for (int i = 0; i < gl_MaxLights; ++i) {
        if (/* ??? gl_LightSource[i] is enabled ??? */ 1) {
            vec3 incident = incidentLight (gl_LightSource[i], position);
            <snip>
        }
    }
    <snip>
} 
```

当 Maya 启用新灯光时，我的程序按预期工作，但是当 Maya 禁用先前启用的灯光时，大概`glDisable (GL_LIGHTi)`是使用. 虽然我没有在上面显示它，但浅色，例如，在它们被禁用后也继续具有陈旧的非零值。`gl_LightSource``gl_MaxLights``gl_LightSource[i].diffuse`

Maya 使用固定功能管道（无 GLSL）绘制所有其他几何体，并且这些对象正确忽略禁用的灯光，我如何在 GLSL 中模仿这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T17:20:24.570

```
const vec4 AMBIENT_BLACK = vec4(0.0, 0.0, 0.0, 1.0);
const vec4 DEFAULT_BLACK = vec4(0.0, 0.0, 0.0, 0.0);

bool isLightEnabled(in int i)
{    
    // A separate variable is used to get    
    // rid of a linker error.    
    bool enabled = true;       
    // If all the colors of the Light are set    
    // to BLACK then we know we don't need to bother    
    // doing a lighting calculation on it.    

    if ((gl_LightSource[i].ambient  == AMBIENT_BLACK) &&        
        (gl_LightSource[i].diffuse  == DEFAULT_BLACK) &&        
        (gl_LightSource[i].specular == DEFAULT_BLACK))        
    enabled = false;    
    return(enabled);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:18:33.093

不幸的是，我查看了 GLSL 规范，但没有看到任何提供此信息的内容。我还看到[另一个线程](http://www.gamedev.net/topic/402360-no-glsl-light-enabled-flag/)似乎得出了相同的结论。

有什么方法可以修改插件中的灯光值，或者添加一个额外的统一可以用作启用/禁用标志？

# xml - 在 XPath 中使用 translate 函数会出错

> ID：11365104
> 
> 赞同：2
> 
> 时间：2012-07-06T15:22:43.233
> 
> 标签：xml, xpath

我必须进行不区分大小写的 XML 搜索。我编写了运行良好`translate`的 XPath 表达式，但是当我在 XPath 表达式中使用该函数时出现错误。以下是运行良好的 XPath 表达式：

```
string upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
string lower = "abcdefghijklmnopqrstuvwxyz";

string xpath = "/data/item[AID/@iskey='true' and AID/text() = 'fep'][not(*[@iskey][local-name() != 'AID' ])]";       

string xpath1 = "/data/item[translate('Aid','" + upper + "','" + lower + "')]"; 
```

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<data>
<item>
 <AID iskey="true">fep</AID>
  <account>MS</account>
  </item>
</data> 
```

我想将`translate`函数放在第一个 XPath 表达式中，如下所示：

```
 string xpath = "/data/item[translate('AID','" + upper + "','" + lower + "')/@iskey='true' and translate('AID','" + upper + "','" + lower + "')/text() = 'fep'][not(*[@iskey][local-name() != translate('aid','" + upper + "','" + lower + "') ])]"; 
```

当我这样做时，我收到以下错误：

> **表达式必须计算为节点集。**

这个 xpath 对我来说很好用。

```
 string col="AID"; 
 string xpath = "/data/item[col/@iskey='true' and col/text() = 'fep'][not(*[@iskey][local-name() != 'col' ])]"; 
```

现在我的要求是 col 值在任何情况下都可以是大写或小写，所以我想要更改我的 xpath，无论 xml 中存在哪种情况下的数据，它都会返回结果。如果用户提供援助或援助或援助，它会返回结果给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:20:41.233

该错误是由于在您的 XPath 表达式中您有一个像这样的位置步骤：

```
item['aid'/@isKey = 'true' ...] 
```

子表达式：

```
'aid'/@isKey 
```

在 XPath 中在语法上是非法的，因为运算符的左侧`/`必须是一个节点集——这里它只是一个字符串。

**您希望有一个这样的 XPath 表达式 - 而不是您目前正在生成的那个**：

```
/data/item
       [*[translate(name(), 'aid', 'AID') = 'AID']/@iskey='true'
      and
        *[translate(name(), 'aid', 'AID') = 'AID'] = 'fep'
         ]
          [not(*[@iskey]
                [translate(name(), 'aid', 'AID') != 'AID']
             )
         ] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vLower" select="'aid'"/>
 <xsl:variable name="vUpper" select="'AID'"/>

 <xsl:template match="node()|@*">
     <xsl:copy-of select=
      "/data/item
           [*[translate(name(), 'aid', 'AID') = 'AID']/@iskey='true'
          and
            *[translate(name(), 'aid', 'AID') = 'AID'] = 'fep'
             ]
              [not(*[@iskey]
                    [translate(name(), 'aid', 'AID') != 'AID']
                 )
             ]
      "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<data>
    <item>
        <AID iskey="true">fep</AID>
        <account>MS</account>
    </item>
</data> 
```

**计算 XPath 表达式并将选定节点（在本例中只有一个）复制到输出**：

```
<item>
   <AID iskey="true">fep</AID>
   <account>MS</account>
</item> 
```

**更新**：

OP 很难理解这个解决方案。这是一个示例，向他展示了该解决方案适用于字符串“aid”的任何大写形式：

当上述转换应用于 XML 文档时，该文档包含的元素名称是“aid”的任何大写形式——例如：

```
<data>
    <item>
        <aId iskey="true">fep</aId>
        <account>MS</account>
    </item>
</data> 
```

**再次产生预期的结果**：

```
<item>
   <aId iskey="true">fep</aId>
   <account>MS</account>
</item> 
```

**更新 2**：

OP 仍然不理解解决方案，并声称对于特定的 XML 文档——下面提供——“我使用了你的表达式，它返回 null ”

**这是 OP 评论中提供的 XML 文档：**

```
<data>
    <item>
        <aId iskey="true">fep</aId>
        <account>FG</account>
    </item>
</data> 
```

**当针对该文档运行相同的 XSLT 验证时，*再次*选择并输出正确的元素**：

```
<item>
   <aId iskey="true">fep</aId>
   <account>FG</account>
</item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:33:48.043

尝试使用联合，而不是 using `translate()`：`(aid|AID)`

新的 xpath：

```
/data/item[(aid|AID)/@iskey='true' and (aid|AID)/text() = 'fep'][not(*[@iskey][local-name() != 'AID' and local-name() != 'aid'])] 
```

# android - 澄清静态与动态片段

> ID：11365105
> 
> 赞同：-1
> 
> 时间：2012-07-06T15:22:49.007
> 
> 标签：android

美好的一天，试图澄清这一点：如果我有这个纵向布局的布局

主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <fragment
        android:id="@+id/configFragment_id"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:name="com.example.settingsFragment">
</fragment> 
```

这对于景观（主要用于平板电脑），main.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <fragment
        android:id="@+id/configFragment_id"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:name="com.example.SettingsFragment" ></fragment>

        <fragment
        android:id="@+id/detailFragment_id"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:name="com.Example.DetailFragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment>

</LinearLayout> 
```

现在在我的 SettingFragment 中，我实现了一个转到 DetailFragment 的按钮：

```
DetailFragment fragment = (DetailFragment)getActivity().getSupportFragmentManager().findFragmentById(R.id.detailFragment_id);
            FragmentTransaction fragmentTransaction = getActivity().getSupportFragmentManager().beginTransaction();
            if (fragment != null && fragment.isInLayout()) {
                DetailFragment detailfragment = new WallpaperFragment();
                fragmentTransaction.add(R.id.detailFragment_id, detailfragment);
                fragmentTransaction.addToBackStack(null);
                fragmentTransaction.commit();
            }else{
                Intent intent = new Intent(getActivity().getApplicationContext(),DetailActivity.class);
                startActivity(intent);
            } 
```

我现在是在实现动态片段还是仍在使用静态片段？.. 还是仅在使用 FrameLayout 之类的视图组代替片段标记元素时才使用动态片段？

想法是为手机设置一个窗格，为平板电脑设置多个窗格。我知道混合静态和动态片段是个坏主意，但这有点令人困惑。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:40:37.040

你知道，我在这里可能错了（所以请随时纠正我），但看起来你同时使用了静态和动态片段。在您的 XML 布局中，您已经添加了片段，然后您将通过 Activity 中的片段事务重新实例化它们。或者，如果您在 XML 中声明了一个容器（例如 FrameLayout）而不是片段，则必须使用 FragmentTransaction 在运行时添加片段。

在您的示例中，您只是踩在您准备好的片段上。基本上，操作系统在膨胀时会在 XML 中看到您的片段（我认为那是它调用片段代码的时候？）并通过片段中的标签执行与其关联的代码。然后，您的应用程序会在其自身顶部添加相同的片段。显示这一点的一种简单方法是在 Fragment 类的 onCreateView 方法中添加 LogCat 调用。如果您不止一次地看到它，那么您使用相同的片段踩到前一个片段（我 99% 确定您是）。希望这有助于回答您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T17:51:01.313

静态片段在布局中定义，通常不会在运行时添加或删除。它们在您的代码中由它们的 id 引用。它们通常作为布局的子元素放置，如下所示。一旦在这里定义了它们，android就会知道制作一个片段，这就是你所要做的。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="1">
    <fragment
        android:id="@+id/fooFragment"
        android:name="com.example.myapplication.TestFragment"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" /> 
```

动态片段在您的代码中定义，可以在运行时进行操作、添加、删除等操作。它们看起来像这样：

```
 FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.add(R.id.your_placeholder, new TestFragment());
    ft.commit(); 
```

# https - Play 框架 HTTPS 代理

> ID：11365110
> 
> 赞同：1
> 
> 时间：2012-07-06T15:22:58.993
> 
> 标签：https, playframework

我有戏！需要使用 HTTP 和 HTTPS 的应用程序。该应用程序在代理服务器（使用 Apache）后面运行，该代理服务器将 Web 请求转发到播放应用程序。

代理将一个端口用于 HTTP 请求，另一个端口用于 HTTPs 请求。请注意，代理上*的*端口与 Play 应用程序使用的端口不同（这是由于提供商的限制！）。

Play 应用程序使用“标准”端口 9000 用于 HTTP，9443 用于 HTTP。代理在 8080 端口接收 HTTP 请求并将其转发到 Play 的 9000 端口。代理在 8090 端口接收 HTTPs 请求并将它们转发到 Play 的 9443 端口。

我的问题是，当我使用 secure() 方法使页面出现在 Play 中时，Play 的逻辑导致应用程序尝试使用 9443 作为 HTTPS 的端口。这会导致请求丢失，因为代理正在使用不同的端口。

当我想从 HTTP 切换到 HTTP 时，似乎也会发生同样的情况。我似乎无法让系统转到代理使用的端口。

不知何故，我需要让系统转到代理服务器已知的端口，而不会搞砸我的路由。有没有办法做到这一点？

提前感谢您的任何帮助/见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:02:39.937

我找到了我自己的“答案”，尽管它有点杂乱无章。

事实证明，根据我从文档中可以确定的内容，当 Play 应用程序位于代理后面时，确实没有办法告诉 Play 在端口之间切换。这是因为尽管 Play 确实识别出请求进入的端口，但它无法告诉在安全和不安全端口之间移动时应该使用哪个*代理*端口。例如，它知道 HTTP 请求来自代理端口 8080，并且它知道对其端口 9000 的后续请求将来自该代理端口。当有人尝试使用 https 访问其端口 9443 时，它不知道要切换到另一个代理端口。因此，如果您的页面 `http://toproxy:8080/links`具有一个或多个使用 secure() 方法激活 https 的链接, 然后 Play 会将链接解析为`https://toproxy:8080`-- 尽管代理服务器可能希望将端口 8090 用于 HTTPS 请求。因为代理端口 8080 被重定向到 Play 的端口 9000，所以将该端口用于 HTTPS 请求总是会失败。在 Play 2.0 和 Play 1.X 中都是如此。

我相信 Play 需要一些标准配置参数来告诉它将代理端口映射到其 HTTP 和 HTTPS 端口。这样，当它位于代理服务器后面时，开发人员可以使用 secure() 方法，Play 将能够将 URL 解析到正确的代理端口。此功能应在 1.X 和版本 2 中可用。

直到有人真正实现这一点（如果我有时间，我可能会这样做，但是我致力于做的所有事情，人们不应该屏住呼吸），我的结论是简单地使用 redirect() 方法在 HTTP 和 HTTPS 之间切换代理端口。redirect() 方法显然允许我们输入完整的 URL，因此我只需调用打开请求的页面的完整 URL。

例如：在上述页面`http://toproxy:8080/links`中，我可能有一个指向我想使用 HTTPS 保护的登录页面的链接。为此，我创建了两个操作：一个用于重定向到代理 HTTPS 端口（在此示例中，称为 gotoLogin()），另一个用于实际呈现登录页面（在此示例中，将其称为 loginPage() 并给它一个/loginpage 的路由）。

在 gotoLogin() 中，我以以下方式重定向到 loginPage：

重定向（“https://toproxy:8090/loginpage”）；

这使得 Play 在代理端口 8090 上进入，该端口被重定向到 Play 的端口 9443。

当用户正确登录时，我的身份验证操作只需使用另一个 redirect() 调用：

重定向（“http://toproxy:8080/destination_page”）；

这会导致 Play 为不安全的请求返回到正确的代理端口。

这不是这个问题的最佳解决方案。代理服务器有可能以某种方式配置为在 HTTP 和 HTTPS 端口之间进行正确切换，但是对于不是代理服务器配置专家的人（这描述了我！），调查这可能需要一些时间。当然，最好的解决方案是在 Play 中实现我之前描述的那种代理端口处理。

But this solution works and can be adapted to many different situations. Unless someone comes up with another better solution, this solution is the one I am using.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T07:17:03.917

Play 应该识别请求来自的端口，并使用该端口。您的 apache 配置可能未正确设置。

您是否将以下行放入您的 apache 配置中？

```
ProxyPreserveHost on 
```

您可能还需要`XForwardedSupport=127.0.0.1`根据您的服务器配置。

# perl - 新手perl串行编程

> ID：11365111
> 
> 赞同：2
> 
> 时间：2012-07-06T15:23:01.447
> 
> 标签：perl, serial-port

我有一个用于 433 mhz 信号的 RFXCOM 收发器。我设法编写了一个可以毫无问题地传输信号的程序（例如打开灯）。但是，我也希望能够接收来自遥控器的信号。一些谷歌搜索给了我这个工作代码；

```
use Device::SerialPort;
 my $PortObj=Device::SerialPort->new("/dev/ttyUSB1");

  $PortObj->user_msg(ON);
  $PortObj->databits(8);
  $PortObj->baudrate(38400);
  $PortObj->parity("none");
  $PortObj->stopbits(1);
  $PortObj->handshake("rts");

 my $STALL_DEFAULT=10; # how many seconds to wait for new input

 my $timeout=$STALL_DEFAULT;

 $PortObj->read_char_time(0);     # don't wait for each character
 $PortObj->read_const_time(1000); # 1 second per unfulfilled "read" call

 my $chars=0;
 my $buffer="";
 while ($timeout>0) {
        my ($count,$saw)=$PortObj->read(1); # will read _up to_ 255 chars
        if ($count > 0) {
                $chars+=$count;
                $buffer.=$saw;
print $saw; 
                # Check here to see if what we want is in the $buffer
                # say "last" if we find it
        }
        else {
                $timeout--;
        }
 }

 if ($timeout==0) {
        die "Waited $STALL_DEFAULT seconds and never saw what I wanted\n";
 } 
```

我想不通的一件事——这个脚本在大约 10 秒后给了我输出，但我想立即看到接收到的数据。知道我需要改变什么吗？我认为这与超时部分无关，因为这似乎只是测量自上次接收信号以来的时间。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:38:37.410

受缓冲之苦？[放](http://search.cpan.org/perldoc?perlvar#%24OUTPUT_AUTOFLUSH)

```
$| = 1; 
```

在脚本的顶部。

# android - 为联想ideapad a107制作可闪存拉链时出错

> ID：11365113
> 
> 赞同：1
> 
> 时间：2012-07-06T15:23:03.837
> 
> 标签：android, android-source, android-4.0-ice-cream-sandwich

*   我已经从谷歌存储库下载了 Android ICS 源代码。

    *   我已经进行了一些调整并成功编译了源代码，并且在模拟器上运行良好。
    *   我决定在 lenovo Ideapad a107 设备上刷机。所以我从链接[https://github.com/gmarkall/android_device_ideapad_a1/tree/ics](https://github.com/gmarkall/android_device_ideapad_a1/tree/ics)下载了设备配置。我能够使用命令**make -j4编译 lenovo ideapad a107 设备的源代码**
    *   但是，当我执行命令**make -j4 otapackage**（制作可闪存 zip）时，我收到以下错误。

    **文件“./build/tools/releasetools/ota_from_target_files”，第 846 行，在 main(sys.argv[1:]) 文件“./build/tools/releasetools/ota_from_target_files”，第 814 行，在 main WriteFullOTAPackage(input_zip, output_zip ) 文件“./build/tools/releasetools/ota_from_target_files”，第 416 行，在 WriteFullOTAPackage MakeRecoveryPatch(output_zip, recovery_img, boot_img) 文件“./build/tools/releasetools/ota_from_target_files”，第 343 行，在 MakeRecoveryPatch recovery_type, recovery_device = common .GetTypeAndDevice("/recovery", OPTIONS.info_dict) File "/home/ashwin/bin/12_APRIL_ANDROID/build/tools/releasetools/common.py", 第 826 行，在 GetTypeAndDevice 返回 PARTITION_TYPES[fstab[mount_point].fs_type], fstab[mount_point].device KeyError: '/recovery'**

我在谷歌上搜索了将近 15 天。在 xda-developers、android-porting 组、android-platform 组和许多但没有答案没有指南上发布了相同的问题。请任何人在这方面帮助我。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:52:25.570

我通过在 recovery.fstab 文件中添加以下行解决了这个问题

```
/recovery mtd recovery 
```

# opencv - 对目录中的每个文件运行命令

> ID：11365117
> 
> 赞同：-2
> 
> 时间：2012-07-06T15:23:17.680
> 
> 标签：opencv, process, batch-file, blob

我需要对目录中的每个文件运行一个命令。由于我想处理数百个视频，我会发现使用批处理脚本更容易。

该命令如下所示：

```
blobtrack_sample.exe fg=FG_0 bd=BD_CC btgen=RawTracks track=E:\opencv\tracks\video1.txt bta=TrackDist btavi=E:\opencv\btavi\test.avi E:\sample\video1.avi 
```

where`btavi=`表示输出文件，最后一个参数表示输入文件。
每个文件的输出文件名必须不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:57:59.013

要遍历某个文件夹中的所有文件，请执行以下操作：

```
@echo off
setlocal enabledelayedexpansion
set EXE_FILE=E:\opencv\build\bin\Debug\blobtrack_sample.exe
set INPUT_PATH=E:\sample\
set TRACKS_PATH=E:\opencv\tracks\
set OUTPUT_PATH=E:\opencv\btavi\
set COUNT=0
pushd %INPUT_PATH%
for %%f in (*) do if %%f neq %~nx0 (
    set /a COUNT+=1
    echo Processing %%f, track=%%~nf.txt, btavi=test!COUNT!%%~xf
    %EXE_FILE% fg=FG_0 bd=BD_CC btgen=RawTracks track=%TRACKS_PATH%\%%~nf.txt bta=TrackDist btavi=%OUTPUT_PATH%\test!COUNT!%%~xf %%f
)
popd 
```

循环获取每个文件，将其放入变量中`%%f`并调用您的 blobtrack_sample.exe`%%f`作为其参数之一。此外，. 中的可执行文件的名称`EXE_FILE`。

要运行此脚本，请将此代码复制粘贴到扩展名为“.bat”的文件中并执行它。希望能帮助到你！

# ms-access - SQL SELECT 查询相关表

> ID：11365120
> 
> 赞同：1
> 
> 时间：2012-07-06T15:23:29.873
> 
> 标签：ms-access, vba

我有一个问题，我找到了一个相当长的解决方案，我认为这不是一个好的做法。但是我觉得必须有一种可用的语法能够立即解决这个问题而没有太多的复杂性。我已经多次遇到这个问题，我想一劳永逸地知道。

我有一个名为“T_STOP_LOSS”的表，其中有三列“LIVES_FROM”、“LIVES_TO”和“SL_VALUE”（所有数字类型+包含具有自动编号类型的 ID 的列）。我想检索包含 SL_VALUE 的记录，其中变量值位于 LIVES_FROM 和 LIVES_TO 之间的间隔中。

```
ID  LIVES_FROM   LIVES_TO   NR_COUNTRIES_FROM   NR_COUNTRIES_TO SL_VALUE
1   0   999 2   2   39,3
12  0   999 3   3   34,6
23  0   999 4   4   29,6
34  0   999 5   9   25,7
45  0   999 10  100 22,17
46  1000    1499    2   2   31,1
2   1000    1499    3   3   27,4
13  1000    1499    4   4   23,3
24  1000    1499    5   9   20,4
35  1000    1499    10  100 17,5
36  1500    1999    2   2   23,6
47  1500    1999    3   3   20,7
3   1500    1999    4   4   17,7
14  1500    1999    5   9   15,4
25  1500    1999    10  100 13,3
26  2000    2999    2   2   23,6
37  2000    2999    3   3   20,7
48  2000    2999    4   4   17,7
4   2000    2999    5   9   15,4
15  2000    2999    10  100 13,3 
```

通常我会使用：

```
lNr_Lives = <Something> '(Retrieved via Textbox)
sSQL_Select = "SELECT SLVALUE FROM T_STOP_LOSS WHERE LIVES_FROM <= " & LNr_Lives & " AND LIVES_TO >= " & LNr_Lives & ";" 
```

但是，LIVES_FROM 和 LIVES_TO 通过外键与表 NR_LIVES 相关联。
上面的语句永远不会起作用，因为表 'NR_LIVES' 包含一个 ID 字段作为主键，用于链接到 T_STOP_LOSS 表。（NR_LIVES 中的列被命名为：ID、NR_LIVES_FROM 和 NR_LIVES_TO（没关系））。

```
ID  NR_LIVES_FROM   NR_LIVES_TO
1   0   999
2   1000    1499
3   1500    1999
4   2000    2999 
```

请告诉我，您认为访问存储在 NR_LIVES 表中的 LIVES_FROM 和 LIVES_TO 的实际值并让我的 SELECT 语句按我期望的方式工作的最简单方法是什么（返回包含 SL 的记录正确的间隔）。

我希望我的问题很清楚。如果没有，请毫不犹豫地提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:06:07.847

在我看来，您想做一些简单的联接查询。[首先在此处](http://www.w3schools.com/sql/sql_join.asp)和[此处](http://office.microsoft.com/en-us/access-help/join-tables-and-queries-HA010096320.aspx)查看这些参考资料，以使您更熟悉该方法。

其次，通常没有理由在子表中拥有额外的“查找”列，因为可以从适当的 JOIN 查询中访问这些值。

我怀疑您要查找的查询是：

```
SELECT SLVALUE FROM
T_STOP_LOSS
INNER JOIN
NR_LIVES 
ON T_STOP_LOSS.ID=NR_LIVES.ID
WHERE 
NR_LIVES_FROM <=  LNr_Lives  
AND 
NR_LIVES_TO >= LNr_Lives ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:14:49.833

感谢 Nicolas，我找到了我需要的东西。

```
Dim cQueries                    As clsQueries
Dim oRst                        As DAO.Recordset
Dim sSQL_Select                 As String
Dim LNr_Lives                   As Long
Dim iNr_Countries               As Integer
Dim i As Integer

If Not IsNull(Me.txt_Nr_Lives) Then
    LNr_Lives = Me.txt_Nr_Lives
Else
    MsgBox "No number of lives defined!", vbCritical
    Exit Sub
End If

If Not IsNull(Me.cbb_Nr_Countries) Then
    iNr_Countries = Me.cbb_Nr_Countries
Else
    MsgBox "No number of countries defined!", vbCritical
    Exit Sub
End If

Set cQueries = New clsQueries
sSQL_Select = "SELECT " & _
                    "* " & _
                "FROM " & _
                    "T_STOP_LOSS " & _
                "INNER JOIN " & _
                    "NR_LIVES ON (T_STOP_LOSS.LIVES_FROM = NR_LIVES.ID) " & _
                " WHERE " & _
                    "NR_LIVES.NR_LIVES_FROM <= " & LNr_Lives & _
                " AND " & _
                    "NR_LIVES.NR_LIVES_TO >= " & LNr_Lives & _
                " AND " & _
                    "T_STOP_LOSS.NR_COUNTRIES_FROM <= " & iNr_Countries & _
                " AND " & _
                    "T_STOP_LOSS.NR_COUNTRIES_TO >= " & iNr_Countries & ";"

Set oRst = cQueries.Select_Statement(sSQL_Select)
oRst.MoveFirst

Do While Not oRst.EOF
    Me.txt_FSL = oRst![SL_VALUE]
    oRst.MoveNext
Loop 
```

# regex - Checkstyle抑制：我做错了什么？

> ID：11365125
> 
> 赞同：0
> 
> 时间：2012-07-06T15:23:50.583
> 
> 标签：regex, checkstyle

我在命令行上使用 checkstyle。不在 Maven 或 ANT 中。

我已经定义了一个`suppressions.xml`文件并从我的`-c CheckstyleConfig.xml`.

Checkstyle 运行（没有解析错误），但它没有抑制任何东西。

我正在尝试让 Checkstyle 忽略`.class`文件。这是我的`suppression.xml`文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suppressions PUBLIC
"-//Puppy Crawl//DTD Suppressions 1.1//EN"
"http://www.puppycrawl.com/dtds/suppressions_1_1.dtd">
<suppressions>
 <suppress checks="." files="(.*\.class)"/>
</suppressions> 
```

关于我做错了什么的任何想法？Checkstyle 仍在处理`.class`文件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:16:38.837

Checkstyle 适用于您提供的任何内容。默认的 eclipse-cs 安装只会为其提供 Java 文件和属性文件，但由于您是从命令行运行的，因此您必须`.class`从检查中排除这些文件或禁止显示警告。

最好将`.class`文件排除在检查之外（这样 Checkstyle 永远不会看到它们），因为它会节省您的时间。

但如果你想抑制警告，你也可以这样做。*suppresss.xml*中的`files`正则表达式是贪婪的，因此已经涵盖了整个文件名，并且您的示例中的模式永远不会匹配。试试这个语法（抑制所有文件）：*`.*``.class`*

 *```
<suppressions>
    <suppress checks=".*" files="\.class$" />
</suppressions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:00:01.380

Checkstyle 不适用于类文件，它无法解析它们。Checkstyle 适用于 Java 源代码，即以“.java”结尾的文件。

所以，问题是你的正则表达式来抑制错误。压制应该是：

```
<suppress checks="." files="(.*\.java)"/> 
```*

# php - 我应该将 PDO 对象传递给每个对象，还是为每个对象创建一个新对象？

> ID：11365126
> 
> 赞同：2
> 
> 时间：2012-07-06T15:23:51.503
> 
> 标签：php, mysql, oop, pdo

多年来，我主要从事程序性编程，并试图围绕 OOP 和 PDO 进行研究。我已经开始将我编写的应用程序转换为使用类而不是独立函数（这是一场噩梦，但我认为这将是值得的......）并且想使用 PDO 而不是常规`mysql_*`函数。我有点坐在我的裤子座位上飞行，只是边学习边学习，我不确定我应该如何处理 PDO 对象。

我知道每次我需要进行查询时创建一个新的 PDO 对象是愚蠢的，所以我可以看到两种方式：

1.  在每个类中创建一个 PDO 对象（即每次创建一个对象时，调用一个成员函数创建一个 PDO 供其使用）。
2.  在我的应用程序开始时创建 PDO 对象并将其传递给创建的每个对象的构造函数，并且所有对象共享 PDO 对象。

做这个的最好方式是什么？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:40:02.947

不要多做一个。尝试管理所有数据库连接会发疯。

一个好的解决方案是创建一个用于数据访问的[单例对象](http://en.wikipedia.org/wiki/Singleton_pattern)，并在您想要使用数据库时通过它的静态访问器方法检索它。这样一来，您就只有一个地方可以管理 DB 访问和 PDO。如果你想要更多的[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)，你也可以把所有的 SQL 代码放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:41:08.330

根据应用程序的大小，您可能希望使用[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)来处理数据库连接。本质上，这将是一个包装您的数据库连接并具有将返回您的 PDO 对象的静态函数的类。然而，因为它是一个单例，它只会创建一个（假设你不让它更复杂）。这使您不必连续创建对象，也不必将一个对象传递给所有对象，从而将持久性与业务逻辑正确分离。

# javascript - （kendoUI 图表）可以通过调整窗口大小来重排其大小吗？

> ID：11365128
> 
> 赞同：5
> 
> 时间：2012-07-06T15:23:58.780
> 
> 标签：javascript, css, highcharts, kendo-ui

这是饼图的设置：

```
function createChart(chartDataSource) {
    $("#chart").kendoChart({
        theme:$(document).data("kendoSkin") || "black",
        title:{
            text:"Efficiency"
        },
        legend:{
            position:"bottom"
        },
        dataSource:chartDataSource,
        series:[
            {
                type:"pie",
                field:"val",
                categoryField:"status"
            }
        ],
        tooltip:{
            visible:true,
            template:"${category} - #= kendo.format('{0:P}', percentage)#"
        }
    }); 
```

CSS 样式：

```
#chart {
    width: 50%;
    height: 50%;
    } 
```

我知道 Highcharts 的`reflow`布尔值（[StackOverflow 中的 reflow 示例](https://stackoverflow.com/questions/8809852/highcharts-how-to-have-a-chart-with-dynamic-height)）完全符合我的要求。

我不确定 kendoUI 图表是否具有相同的回流设置，或者我应该使用 CSS 样式。如果选择 CSS，如何进行这样的设置？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T16:25:01.147

在您的链接帖子中应用我的想法，只需挂钩窗口调整大小事件并重绘图表：

```
$(window).resize(function() 
{    
    var chart = $("#chart").data("kendoChart");
    chart.refresh();
}); 
```

[在这里](http://jsfiddle.net/neCLb/)工作小提琴。

# c++ - 显式运算符布尔错误

> ID：11365129
> 
> 赞同：11
> 
> 时间：2012-07-06T15:24:01.283
> 
> 标签：c++, c++11, operator-overloading, explicit

当我尝试实现时出现[编译器错误 C2071](http://msdn.microsoft.com/en-us/library/deb3kh5w(v=vs.110).aspx?appId=Dev11IDEF1&l=IT-IT&k=k(C2071)%3bk(VS.ErrorList)&rd=true)`explicit operator bool`：

```
class C
{
public:

    explicit operator bool() const
    {
        return !!*this;
    }
}; 
```

为什么？我怎么解决这个问题？
我正在使用 Visual Studio 2012 RC。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T15:31:12.607

Visual Studio 2012 不支持显式转换运算符，请参阅[Visual C++ 11 中的 C++11 功能](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)。

这些文章讨论了*安全的布尔成语*：

*   [http://www.artima.com/cppsource/safebool.html](http://www.artima.com/cppsource/safebool.html)
*   [http://en.wikibooks.org/wiki/More_C++_Idioms/Safe_bool](http://en.wikibooks.org/wiki/More_C++_Idioms/Safe_bool)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T15:34:41.797

如果您查看[Visual Studio 2010 中的功能](http://blogs.msdn.com/b/vcblog/archive/2010/04/06/c-0x-core-language-features-in-vc10-the-table.aspx)列表，您会发现它不是可用功能。查看[Visual Studio 2012 中 Visual C++ 的新增功能](http://msdn.microsoft.com/en-US/library/hh409293%28v=vs.110%29.aspx)表明尚未添加。

# objective-c - 将 UITapGestureRecognizer 添加到 UIScrollViews 的 UIView

> ID：11365130
> 
> 赞同：0
> 
> 时间：2012-07-06T15:24:04.787
> 
> 标签：objective-c, uiview, uilabel, uitapgesturerecognizer

我正在开发一个通知中心插件，但我在使用 UITapGestureRecognizer 时遇到了问题。我有一个 UIScrollView，其中 UIViews 作为我的两个 UILabel 的包装器。

我附加到 UITapGestureRecognizer 的选择器从未被调用，我也不知道为什么。

**编辑：**好的，现在它可以工作了，但只适用于 UIScrollView 中的最后一个元素。我想这是因为我在循环中使用了相同的 UILabel。我应该怎么办？

```
- (UIView *)view
{
if (_view == nil)
{

    self.aArray = [self.connector refreshData];

    _view = [[UIView alloc] initWithFrame:CGRectMake(2, 0, 316, 110)];

//setting the background 
    UIImage *bg = [[UIImage imageWithContentsOfFile:@"/System/Library/WeeAppPlugins/NCAppline.bundle/WeeAppBackground.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:10];
    UIImageView *bgView = [[UIImageView alloc] initWithImage:bg];
    bgView.frame = CGRectMake(0, 0, 316, 110);
    [_view addSubview:bgView];

//creating the scrollview
    UIScrollView *scrView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

    UITapGestureRecognizer *linkTappedRec = [[UITapGestureRecognizer alloc] 
                                 initWithTarget: self
                                 action: @selector(articleTap:)];
    linkTappedRec.numberOfTapsRequired = 1;
    linkTappedRec.enabled = YES;
    linkTappedRec.cancelsTouchesInView = YES;

//getting the number of pages required
    NSInteger viewcount = [self.aArray count]/3; 

    for (int i = 0; i <viewcount; i++) 
    { 
        CGFloat y = i * self.view.frame.size.width;

        UILabel *lbl1 = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 306, 23)];
        /* setting bunch of properties */

        UILabel *lbl2 = [[UILabel alloc] initWithFrame:CGRectMake(10, 25, 288, 85)];
                    /* setting bunch of properties */

//this will be the container
        UIView *vview = [[UIView alloc] initWithFrame:CGRectMake(y, 0,                                                      self.view.frame.size.width, self.view.frame.size.height)];
        [vview addSubview:lbl1];
        [vview addSubview:lbl2];
        vview.tag = i*3+2;

        [vview addGestureRecognizer:linkTappedRec];

        vview.userInteractionEnabled = YES;

        [scrView addSubview:vview]; 
    }

    scrView.contentSize = CGSizeMake(self.view.frame.size.width *viewcount, self.view.frame.size.height);
    scrView.pagingEnabled = YES;

    [_view addSubview:scrView];  

}

return _view;
}

- (void)articleTap:(UITapGestureRecognizer *)sender {
NSLog("tap");
} 
```

# windows - 从 .mui 文件获取 Internet Explorer 快捷方式

> ID：11365134
> 
> 赞同：1
> 
> 时间：2012-07-06T15:24:16.013
> 
> 标签：windows, internet-explorer, internationalization, keyboard-shortcuts, autoit

我正在尝试制作一个 AutoIT 脚本来自动化某些任务。问题是我的大部分 IE 控件都基于快捷方式的使用。快捷方式取决于 IE 语言设置，因此，为了实现国际化，我应该知道哪些是当前 IE 语言包的当前热键。我知道这可以使用 IE 语言包中的 .mui 文件来完成，但我没有找到这些快捷方式设置的位置。一些 .mui 文件具有清楚地表示快捷方式的条目，但它们在每个语言包中似乎都是相同的......有什么想法吗？

# mongodb - MongoDB 中“父链接”树上的 MapReduce

> ID：11365136
> 
> 赞同：2
> 
> 时间：2012-07-06T15:24:27.327
> 
> 标签：mongodb, tree, mapreduce, hierarchical-data

我有一组实体，代表一棵树。每个实体都有一个包含属性数组的属性。

例如：

```
{
    "_id" : 1,
    "parent_id" : null,
    "attributes" : [ "A", "B", "C" ]
} 
```

我想使用 MapReduce 生成另一个类似于原始集合的集合，但是对于集合中的每个项目，它不仅包含与实体直接关联的属性，还包含其祖先的属性，一直到等级制度的根源。

所以给定以下实体：

```
{
    "_id" : 1,
    "parent_id" : null,
    "attributes" : [ "A", "B", "C" ]
}

{
    "_id" : 2,
    "parent_id" : 1,
    "attributes" : [ "D", "E", "F" ]
}

{
    "_id" : 3,
    "parent_id" : 2,
    "attributes" : [ "G", "H", "I" ]
} 
```

MapReduce 作业的结果如下：

```
{
    "_id" : 1,
    "attributes" : [ "A", "B", "C" ]
}

{
    "_id" : 2,
    "attributes" : [ "A", "B", "C", "D", "E", "F" ]
}

{
    "_id" : 3,
    "attributes" : [ "A", "B", "C", "D", "E", "F", "G", "H", "I" ]
} 
```

我已经管理生产 MapReduce 作业，这些作业做一些简单的事情，比如计算每个实体的属性，但我不知道如何处理层次结构。我对存储数据的替代方法持开放态度，但不想将整个层次结构存储在单个文档中。

在 MongoDB 中使用 MapReduce 是否可以实现这种精简，还是我只是以错误的方式思考问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:51:41.423

好的，所以我认为这不会非常高效/可扩展，因为您必须递归地从子节点中找到父 ID。但是，它确实提供了您想要的输出。

```
var mapFunc = function(doc, id) {
  // if this is being invoked by mapReduce, it won't pass any parameters 
  if(doc == null) {
    doc = this; 
    id = this._id; 
  } else if (doc.parent_id != null) {
    // if this is a recursive call, find the parent
    doc = db.test.findOne({_id:doc.parent_id});
  }
  // emit the id, which is always the id of the child node (starting point), and the attributes
  emit(id, {attributes: doc.attributes}); 
  // if parent_id is not null, call mapFunc with the hidden parameters
  if(doc.parent_id != null) {
    // recursive mapFunc call
    mapFunc(doc, id); 
  } 
}
// since we're going to call this from within mapReduce recursively, we have to save it in the system JS
db.system.js.save({ "_id" : "mapFunc", "value" : mapFunc});

var reduceFunc = function(key, values) {
  var result = {attributes:[]}; 
  values.forEach(function(value) {
    // concat the result to the new values (I don't think order is guaranteed here)
    result.attributes = value.attributes.concat(result.attributes);
  }); 
  return result; 
}

// this just moves the attributes up a level
var finalize = function(key, value) {return value.attributes};

// quick test...
db.test.mapReduce(mapFunc, reduceFunc, {out: {inline: 1}, finalize: finalize}); 
```

提供：

```
"results" : [
    {
        "_id" : 1,
        "value" : [
            "A",
            "B",
            "C"
        ]
    },
    {
        "_id" : 2,
        "value" : [
            "A",
            "B",
            "C",
            "D",
            "E",
            "F"
        ]
    },
    {
        "_id" : 3,
        "value" : [
            "A",
            "B",
            "C",
            "D",
            "E",
            "F",
            "G",
            "H",
            "I"
        ]
    }
],
"timeMillis" : 2,
"counts" : {
    "input" : 3,
    "emit" : 6,
    "reduce" : 2,
    "output" : 3
},
"ok" : 1,
} 
```

# confluence - 如何在 Confluence 表上协同工作？

> ID：11365141
> 
> 赞同：2
> 
> 时间：2012-07-06T15:24:49.967
> 
> 标签：confluence, collaboration

这个想法是：

页面 A 包含一个表头和许多子页面（B、C、D），这些子页面又包含表行。页面 A 应显示 ONE 表中所有子页面的所有行。

无论我使用哪种类型的包含宏（包括、摘录-包含、多摘录-包含），页面 A 的表宏都将结果解释为单列。我猜这是由于标记和宏的执行顺序。有没有人手头有另一种解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:52:25.733

一个简单的解决方法是在 .asp 页面中创建表格，然后在必要的页面中通过 html 包含它们，尽管它可能不适合您的需要。

我已经多次使用带有 html-include 的 .asp 页面来显示我无法在 Confluence 中使用的内容。

希望有帮助。

# mule - 骡子选择比较

> ID：11365142
> 
> 赞同：0
> 
> 时间：2012-07-06T15:24:52.890
> 
> 标签：mule

在 mule 流中，我需要比较输入字符串消息中的最后两个参数

> 2012-04-30,2012-05-30,1,5

如果`param1(1) <= param2(5)`，我需要执行`jms:outbound-endpoint`。

是否有标准的选择元素来做到这一点？您能否提供示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:20:20.210

在使用 mule 3.2.x 时，您最好的选择是使用 groovy 评估器并使用如下所示的选择路由器

```
 <when expression="#[groovy:payload.split(',')[2] &lt;= payload.split(',')[3] ]">
      <processor-chain>
          <jms:outbound-endpoint queue="out" doc:name="JMS"/>
      </processor-chain>
 </when> 
```

否则，如果你愿意升级到 Mule 3.3.0，你可以利用新的[Mule 表达式语言](http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Expression+Language)，它允许在不需要 groovy 运算符的情况下做同样的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T12:17:22.060

您不需要为此使用 Groovy。您可以直接在有效负载上应用 split() 函数。

```
<when expression="#[payload.split(',')[2]&lt;=payload.split(',')[3]]">
  <processor-chain doc:name="Processor Chain">
     <jms:outbound-endpoint queue="data" connector-ref="Active_MQ"doc:name="JMS"/>
  </processor-chain>
</when> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T10:10:45.660

您还可以使用拆分器并在“，”的基础上进行拆分，然后对参数进行比较逻辑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-03T13:25:46.187

除了表达式过滤器，您还可以使用选择流控制。捕获要在流变量中比较的 2 个值，并在选择流控制条件时使用以下表达式。

# [flowVars.param1 <= flowVars.param1]

在链接下方提供更多信息。

[https://docs.mulesoft.com/mule-user-guide/v/3.7/choice-flow-control-reference](https://docs.mulesoft.com/mule-user-guide/v/3.7/choice-flow-control-reference)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-15T16:59:51.063

您可以利用新的 Mule 表达式语言，它允许在不需要 groovy 运算符的情况下做同样的事情

# database - 在 serlvet jsp 中使用显示标签

> ID：11365144
> 
> 赞同：0
> 
> 时间：2012-07-06T15:25:05.977
> 
> 标签：database, jsp, servlets, resultset, displaytag

我有一个进行数据库查询的 servlet。现在我需要将最终结果集转发到我的 jsp 页面，然后使用 display-tag 显示行。这该怎么做？如何将结果集从 servlet 传输到 jsp。无法直接转发结果集，因为它不可序列化。

> 如果我必须将**两个**结果集从 serverlet 传输到 jsp 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:31:08.133

对象不必可序列化以存储在请求属性中。HttpServletRequest 对象及其属性存在于内存中。

并且 displaytag 使用应该遵守 JavaBeans 约定的对象集合（大多数情况下是列表）。

所以过程很简单：

1.  servlet 执行数据库查询
2.  它遍历 ResultSet，并创建一个`List<Foo>`包含查询检索到的数据
3.  它将这个列表存储为请求的属性：`request.setAttribute("foos", fooList);`
4.  它使用 RequestDispatcher 将请求和响应转发给 JSP
5.  JSP 使用 displaytag 将内容显示`${foos}`为表格。

如果必须传输两个结果集，执行 2 个请求，构建两个列表，将它们存储在 2 个请求属性中，并在 JSP 中使用两次 displaytag。

# visual-studio-2008 - 错误：指定的 DSN 包含驱动程序和应用程序之间的架构不匹配

> ID：11365146
> 
> 赞同：2
> 
> 时间：2012-07-06T15:25:13.320
> 
> 标签：visual-studio-2008, odbc, business-intelligence

. 我尝试将 Visual Studio 2008 中的 BI 项目连接到 mysql 数据库。所以我在开始>程序>管理工具>数据源[win 7]中定义了odbc连接，我尝了一下，它连接成功。

但是当我想在 VS > "View" > "Server Explorer" 中打开这个连接时，我看到了这个错误：

> 错误 [IM014] [Microsoft][ODBC Driver Manager] 指定的 DSN 包含驱动程序和应用程序之间的架构不匹配

![在此处输入图像描述](../Images/e206dd1680ae0e9703e45b7cde4b6c9e.png)

即使我在文本框中输入“root”作为用户名并传递空 [bc I didn't set pass for my mysql db]，但没有任何改变！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:56:02.897

[http://msdn.microsoft.com/en-us/library/ms712362%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms712362%28v=vs.85%29.aspx)

如果您使用 64 位 odbcad32.exe 配置或删除连接到 32 位驱动程序的 DSN，例如 Driver do Microsoft Access (*.mdb)，您将收到以下错误消息：

指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配

要解决此错误，请使用 32 位 odbcad32.exe 配置或删除 DSN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:18:44.100

我也遇到了这个问题，但是将访问驱动程序重新配置为 32 位并没有解决它。

我正在从任务调度程序运行 .vbs 脚本。它给了我 800004005 错误架构不匹配错误。

我运行的是 64 位 Windows 脚本主机而不是 32 位版本。一旦我指定了 32 位 WSH，代码就像在我的 Win 2000 服务器上一样工作。没有错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T21:01:57.050

我遇到了类似的问题，但在 Visual Studio 2008 中有一个控制台应用程序。项目的平台目标设置为“任何 CPU”，默认为 64 位，当我尝试使用 32 位 ODBC 驱动程序访问数据时，我得到了描述的错误@afsane。我的解决方案是将平台目标设置为 x86：

![在此处输入图像描述](../Images/266edbc80954f05a7350151a86fd3bea.png)

# jquery - 谷歌地图：IE7 和 IE8 在删除项目时未捕获 mouseup 事件

> ID：11365147
> 
> 赞同：1
> 
> 时间：2012-07-06T15:25:15.643
> 
> 标签：jquery, google-maps, jquery-gmap3

我无法理解为什么[这个小提琴](http://jsfiddle.net/5cX3t/12/)不适用于 IE7 和 IE8。

目标是在地图上拖动一个气球并捕获 mouseup 事件以检索项目已放置的坐标。

如果用户没有拖动气球，该事件会在所有浏览器（包括 IE7 和 IE8）上正确触发。但是，如果用户正在拖动气球，IE7 和 IE8 就不会捕捉到该事件......

有人了解发生了什么吗？

**测试小提琴：不要点击地图，只需拖放气球**

注意：IE7 和 IE8 已经通过 IE9 开发者选项进行了测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:24:51.060

它是固定的。诀窍是将图像放在 a 的背景中`<div>`而不是使用`<img>`元素

[http://jsfiddle.net/5cX3t/17/](http://jsfiddle.net/5cX3t/17/)

祝你今天过得愉快

# perl - 如何确定数组中是否存在元素（perl）

> ID：11365148
> 
> 赞同：12
> 
> 时间：2012-07-06T15:25:16.567
> 
> 标签：perl

我正在遍历一个数组，我想测试是否在另一个数组中找到了一个元素。

在伪代码中，我想做的是：

```
foreach $term (@array1) {
    if ($term is found in @array2) { 
        #do something here
    }
} 
```

我已经得到了“foreach”和“在这里做点什么”部分向下拍......但是我为“如果在数组中找到术语”测试所做的一切都不起作用......

我试过grep：

```
if grep {/$term/} @array2 { #do something }
# this test always succeeds for values of $term that ARE NOT in @array2

if (grep(/$term/, @array2)) { #do something }
# this test likewise succeeds for values NOT IN the array 
```

我已经尝试了几种不同风格的“将数组转换为哈希”，许多以前的帖子都表明它们是如此简单和容易……但它们都没有奏效。

我是 perl 的长期低级用户，我只了解 perl 的基础知识，不了解包含我在互联网上阅读的 99% 解决方案的所有花哨的混淆代码......我真的，真的，老实说，感谢代码中明确的任何答案，并提供代码在做什么的分步解释......

...我真的不了解 $_ 和任何其他类型或类型的隐藏、理解或隐含的值、变量或函数。如果任何示例或示例的所有变量和函数都以明确的术语命名（$term 而不是 $_），我将非常感激......可能希望有一天能够理解它。请。:-)

...

我有一个现有的脚本，它成功地使用了“grep”：

```
$rc=grep(/$term/, @array);
if ($rc eq 0) { #something happens here } 
```

但是我将完全相同的代码应用到我的新脚本中，但它根本没有正确成功......即，当它测试我知道数组中不存在的 $term 值时它“成功”（rc = 零）测试。我只是不明白。

'旧'脚本和'新'脚本之间的'grep'方法的唯一区别是我如何构建数组......在旧脚本中，我通过从文件中读取来构建数组：

```
 @array=`cat file`; 
```

而在新脚本中，我将数组放在脚本本身中（因为它很小）......像这样：

```
 @array=("element1","element2","element3","element4"); 
```

这怎么会导致 grep 函数的不同输出？它们都是沼泽标准阵列！我不明白！！！！:-(

################################################# ######################

### 附录...我的实际代码的一些说明或示例：

################################################# ######################

我试图匹配/查找/grep 的术语是一个单词元素，例如“word123”。

这个练习只是为了成为一个快速n-dirty脚本，从一个充满垃圾的文件中找到一些重要信息，所以我选择跳过所有细节（使用严格、警告、模块、子例程）......这不是不必优雅，只要简单。

我正在搜索的术语存储在一个通过拆分实例化的变量中：

```
foreach $line(@array1) {
  chomp($line);  # habit

  # every line has multiple elements that I want to capture
  ($term1,$term2,$term3,$term4)=split(/\t/,$line);  

  # if a particular one of those terms is found in my other array 'array2'
  if (grep(/$term2/, @array2) { 
    # then I'm storing a different element from the line into a 3rd array which eventually will be outputted
    push(@known, $term1) unless $seen{$term1}++;
  }
} 
```

看到那里的 grep 了吗？它工作不正确......它对 $term2 的所有值都成功，即使它绝对不在 array2 中...... array1 是一个几千行的文件。我在这里调用 $term2 的元素是一个离散项，它可能位于多行中，但在任何给定行中都不会重复（或较大字符串的一部分）。Array2 大约有几十个元素，我需要为我的输出“过滤”。

...

我刚刚尝试了以下建议之一：

```
if (grep $_ eq $term2, @array2) 
```

对于 $term2 的所有值，这个 grep 都失败了……我从 grep 得到一个全有或全无的响应……所以我想我需要停止使用 grep。尝试其中一种哈希解决方案......但我真的可以使用更多的解释和澄清。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T15:47:25.360

这是在[perlfaq](http://learn.perl.org/faq/perlfaq4.html#How-do-I-compute-the-difference-of-two-arrays-How-do-I-compute-the-intersection-of-two-arrays-)中。一个快速的方法是

```
my %seen;
$seen{$_}++ for @array1;
for my $item (@array2) {
    if ($seen{$item}) {
        # item is in array2, do something
    }
} 
```

如果字母大小写不重要，您可以使用 设置键`$seen{ lc($_) }`并使用 进行检查`if ($seen{ lc($item) })`。

**预计到达时间：**

更改后的问题：如果任务是将 中的单个单词与 中的`@array2`整行进行匹配`@array1`，则任务会更加复杂。由于标点符号和其他类似的东西，尝试拆分行并与哈希键匹配可能是不安全的。因此，正则表达式解决方案可能是最安全的。

除非`@array2`非常*大*，否则您可能会执行以下操作：

```
my $rx = join "|", @array2;
for my $line (@array1) {
    if ($line =~ /\b$rx\b/) {  # use word boundary to avoid partial matches
        # do something
    }
} 
```

如果`@array2`包含元字符，例如`*?+|`，您必须确保它们被转义，在这种情况下，您会执行以下操作：

```
my $rx = join "|", map quotemeta, @array2;
# etc 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T15:46:41.617

如果您使用的是 5.10 或更高版本，则可以使用（臭名昭著的）“智能匹配”运算符：

```
#!/usr/bin/perl
use strict;
use warnings;

my @array1 = qw/a b c d e f g h/; 
my @array2 = qw/a c e g z/; 

print "a in \@array1\n" if 'a' ~~ @array1;
print "z in \@array1\n" if 'z' ~~ @array1;
print "z in \@array2\n" if 'z' ~~ @array2; 
```

该示例非常简单，但如果需要，您也可以使用 RE。我应该补充一点，不是每个人都喜欢~~因为有一些模棱两可的地方，嗯，“未记录的功能”。不过，应该没问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-06T15:37:03.657

这应该有效。

```
#!/usr/bin/perl
use strict;
use warnings;

my @array1 = qw/a b c d e f g h/;
my @array2 = qw/a c e g z/;

for my $term (@array1) {
    if (grep $_ eq $term, @array2) {
        print "$term found.\n";
    }
} 
```

输出：

```
a found.
c found.
e found.
g found. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-11T09:21:21.353

```
#!/usr/bin/perl

@ar = ( '1','2','3','4','5','6','10' );
@arr = ( '1','2','3','4','5','6','7','8','9' ) ;

foreach $var ( @arr ){
    print "$var not found\n " if ( ! ( grep /$var/, @ar )) ;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-04T12:25:59.480

模式匹配是匹配元素的最有效方式。这可以解决问题。干杯!

```
print "$element found in the array\n" if ("@array" =~ m/$element/); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T18:45:06.170

您的“实际代码”甚至不应该编译：

```
if (grep(/$term2/, @array2) { 
```

应该：

```
if (grep (/$term2/, @array2)) { 
```

您的代码中有不平衡的括号。您可能还会发现将 grep 与对其参数（数组）进行操作的回调（代码参考）一起使用更容易。它有助于防止括号混淆在一起。不过，这是可选的。这将是：

```
if (grep {/$term2/} @array2) { 
```

您可能要使用严格；并使用警告；抓住这样的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-04T03:18:56.823

下面的示例可能会有所帮助，它会尝试查看@array_sp 中的任何元素是否存在于@my_array 中：

```
#! /usr/bin/perl -w

@my_array = qw(20001 20003);

@array_sp = qw(20001 20002 20004);
print "@array_sp\n";

foreach $case(@my_array){
    if("@array_sp" =~ m/$case/){
    print "My God!\n";
    }

} 
```

使用模式匹配可以解决这个问题。希望它有所帮助-QC

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-22T10:11:45.587

```
1\. grep with eq , then 
    if (grep {$_ eq $term2} @array2) { 
    print "$term2 exists in the array";
    }

2\. grep with regex , then 
    if (grep {/$term2/} @array2) {
    print "element with pattern $term2 exists in the array";
    } 
```

# c++ - 缺少 shared_ref

> ID：11365149
> 
> 赞同：3
> 
> 时间：2012-07-06T15:25:19.063
> 
> 标签：c++, c++11, refcounting

虽然`std::shared_ptr`有很多工作，但我有点想念一个`shared_ref`实现。这是 的一种特殊化`shared_ptr`，它保证它永远不会包装 a `nullptr`（当然，在正确使用的情况下）。我有点想知道为什么它不在 C++11 标准中。实施过程中是否有市长问题？在我的头顶上，我想不出任何东西。

编辑：

我希望有一个类似于：

```
template <typename T>
class shared_ref {
public:
  shared_ref( T&& ref );
  T& get();
  T* operator&() const;

  template< class Y > 
  void reset( Y&& obj );

  long use_count() const;
  bool unique() const;

  void swap( shared_ref& r );
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:24:48.023

> 实施过程中是否有市长问题？

这是一个：您不能拥有*reference*的所有权。智能指针的全部意义在于声明指针本身的所有权。`shared_ref`无法工作，因为您无法控制引用的生命周期。

不，这也不会飞：

```
shared_ref( T&& ref ) : p(&ref) {} 
```

用户可能已经给了您一个堆栈变量，这意味着您现在在此对象和堆栈变量之间拥有“共享”所有权。堆栈变量*不能*与某些东西共享所有权。

您只能控制指针的生命周期。并且指针可以为NULL。因此，您唯一能做的就是运行时检查指针是否为 NULL。

您可以做的最好的事情是一个等效的接口，`shared_ptr`除了它没有默认构造函数并且在被赋予 NULL 的情况下抛出。这真的值得创建一个全新的指针类型吗？

* * *

C++ Core Guidelines 支持库具有`not_null`模板，可应用于大多数类似指针的类型。因此，您可以`not_null<shared_ptr>`在要验证指针是否为 NULL 时使用，但只能在它进入使用时使用一次。初始创建指针后，无需再次检查。

当然，您不能强迫其他人使用它们，但始终使用该类型将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:52:31.327

只有两种方法可以使 a`shared_ptr`为空 - 要么是默认构造的，要么在某个时候被分配了一个空值。由于您已经同意默认构造您的假设类是没有意义的`shared_ref`，因此只剩下第二个条件。

如果您尝试将 a 分配`nullptr`给您的`shared_ref`对象，您希望会发生什么？它应该抛出错误吗？`shared_ptr`使用简单的模板函数对常规做同样的事情是微不足道的：

```
template<typename T>
T* notnull(T* ptr)
{
    if (ptr == std::nullptr)
        throw std::invalid_argument(std::string("nullptr"));
    return ptr;
}

std::shared_ptr<int> pint = notnull(GetIntPtr()); 
```

通常，除非有迫切的需求且没有简单的解决方法，否则不会将内容添加到标准中。

# vb.net - AES（RijndaelManaged）解密额外字符？

> ID：11365150
> 
> 赞同：0
> 
> 时间：2012-07-06T15:25:19.607
> 
> 标签：vb.net, encryption, .net-2.0, aes

因此，我使用`RijndaelManaged`类 (.NET 2.0) 对配置文件中的小字符串（大约十几个字符或更少）进行 AES-128 CBC 加密。除了当我解密数据时，填充字节没有被删除之外，我已经让一切正常工作了。我知道我可以选择不进行任何填充，但这是非常不安全的，并且需要添加填充字节，因为这就是 AES 的工作原理（以谨慎的块大小）。现在我正在使用`PaddingMode.ISO10126`让`CryptoStream`自动附加加密随机字节。

处理此问题的行业标准方法是什么？在解密时摆脱这些“额外字节”的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:27:06.023

摆脱填充的最佳方法当然是使用 PKCS#7 填充，并让密码实例摆脱填充，正如 GregS 建议的那样。

现在执行加密的最佳方法是使用 CTR 模式加密，或者最好使用包含身份验证/完整性保护的密码，例如 GCM。请注意，对于小字符串，您需要注意不要通过密文的大小泄露信息（对“是”执行 CTR 模式加密的结果将导致三个字节，“否”将导致 2 个字节）。

# c# - TFS 从上次构建中获取 SQL 更改

> ID：11365151
> 
> 赞同：1
> 
> 时间：2012-07-06T15:25:21.400
> 
> 标签：c#, tfs, workflow-activity

我目前正在研究 TFS 实现的构建定义。我几乎所有东西都在工作，除了我无法让最后一部分工作。下面是我目前正在实现的 CodeActivity 类。

在工作流程图中，我使用默认`associatedChangesets`变量作为 InArgument。

以下代码有效并创建文件夹`Database`，但`AssociatedChangesets`似乎不包含任何项目。

```
public sealed class CreateDatabaseDrop : CodeActivity
    {

        public InArgument<Workspace> Workspace { get; set; }
        public InArgument<string> DropLocation { get; set; }
        public InArgument<IList<Changeset>> AssociatedChangesets { get; set; }
        // If your activity returns a value, derive from CodeActivity<TResult>
        // and return the value from the Execute method.

        Workspace workspace;
        string dropLocation;
        IList<Changeset> associatedChangesets;
        protected override void Execute(CodeActivityContext context)
        {
            List<string> filesChanged = new List<string>();
            workspace = context.GetValue(this.Workspace);
            dropLocation = context.GetValue(this.DropLocation);
            associatedChangesets = context.GetValue(this.AssociatedChangesets);

            if (!Directory.Exists(dropLocation + @"\database\"))
                Directory.CreateDirectory(dropLocation + @"\database\");

            foreach (var c in associatedChangesets.OrderBy(x => x.CreationDate))
            {
                foreach (var change in c.Changes)
                {
                    context.WriteBuildMessage(change.Item.ServerItem);
                }
                foreach (var change in c.Changes.Where(x => x.Item.ItemType == ItemType.File && x.Item.ServerItem.Split('/').Last().ToLower().Contains(".sql")))
                {
                    string fileName = change.Item.ServerItem.Split('/').Last();
                    context.WriteBuildMessage(string.Format("SQL File Found: {0}", change.Item.ServerItem));
                    WorkingFolder wf = workspace.GetWorkingFolderForServerItem(change.Item.ServerItem);
                    string copyFrom = Path.Combine(wf.LocalItem, fileName),
                    copyTo = dropLocation + @"\database\" + fileName;
                    context.WriteBuildMessage(string.Format("Copying {0} to {1}", fileName, copyTo));
                    File.Copy(copyFrom, copyTo, true);
                }
            }
        } 
```

自上次构建完成以来，任何人都可以帮助我弄清楚如何获得所有 SQL 更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:17:40.960

我最终找到了如何做到这一点。我将把大部分代码放在下面以供将来参考和遇到同样问题的人。

```
 public sealed class CreateDatabaseDrop : CodeActivity
    {
        [RequiredArgument]
        public InArgument<Workspace> Workspace { get; set; }
        [RequiredArgument]
        public InArgument<IBuildDefinition> BuildDefinition { get; set; }
        [RequiredArgument]
        public InArgument<string> ProjectName { get; set; }
        Workspace workspace;

        protected override void Execute(CodeActivityContext context)
        {
            workspace = context.GetValue(this.Workspace);
            IBuildDefinition buildDef = context.GetValue(this.BuildDefinition);
            DateTime? comparison = null;
            var details = buildDef.QueryBuilds().Where(x => x.Status == BuildStatus.Succeeded).OrderBy(x => x.StartTime);
            if (details.Count() > 0)
            {
                comparison = details.Last().StartTime;
            }
            if (!comparison.HasValue)
            {
                return;
            }
            IEnumerable history = workspace.VersionControlServer.QueryHistory("$/" + context.GetValue(ProjectName),
                VersionSpec.Latest,
                0,
                RecursionType.Full,
                null,
                new DateVersionSpec(comparison.Value),
                VersionSpec.Latest,
                Int32.MaxValue,
                true,
                false);

            foreach (Changeset c in history.OfType<Changeset>().OrderBy(x => x.CreationDate))
            {
                foreach (var change in c.Changes.Where(x => x.Item.ItemType == ItemType.File
                    && x.Item.ServerItem.Split('/').Last().ToLower().Contains(".sql")
                    && (x.ChangeType != (ChangeType.Delete | ChangeType.SourceRename | ChangeType.Rename))))
                {
                    string fileName = change.Item.ServerItem.Split('/').Last();
                    WorkingFolder wf = workspace.TryGetWorkingFolderForServerItem(change.Item.ServerItem);
                    if (wf != null && !string.IsNullOrEmpty(wf.LocalItem))
                    {
                        context.WriteBuildMessage(string.Format("SQL File found: {0}", fileName));

                    }
                }
            }
    } 
```

# sql-server-2008 - SQL Server 2008 计划定时作业运行

> ID：11365154
> 
> 赞同：3
> 
> 时间：2012-07-06T15:25:26.440
> 
> 标签：sql-server-2008, job-scheduling

我有一个 .sql 脚本文件，我想每 24 小时运行一次。在 SQL Server 2008 中生成计划任务以执行此操作的最佳（和最简单）步骤是什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T15:29:02.833

您可以使用 SQL Server 代理（如果您不使用 SQL Server 的 Express 版本）。在 Management Studio 中，展开 SQL Server Agent 节点，右键单击 Jobs 并单击 New Job...

从那里您将能够安排各种作业，包括每 24 小时运行一次脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T15:29:34.270

[您可以使用SQL Server 代理](http://msdn.microsoft.com/en-us/library/ms189237.aspx)创建作业。

> SQL Server 代理使用 SQL Server 存储作业信息。作业包含一个或多个作业步骤。每个步骤都包含自己的任务，例如备份数据库。
> 
> SQL Server 代理可以按计划、响应特定事件或按需运行作业。例如，如果您想在每个工作日下班后备份所有公司服务器，您可以自动执行此任务。将备份安排在周一至周五的 22:00 之后运行；如果备份遇到问题，SQL Server 代理可以记录事件并通知您。

您可以根据特定的计划运行作业，它可以执行存储过程、SSIS 等。

要创建新作业，请在 SQL Server Management Studio 中的 SQL Server 代理下，右键单击作业并选择新建作业。

![在此处输入图像描述](../Images/7cee1acec3418c0173c7d497ead77976.png)

这是 MSDN 关于创建作业的一步一步：

[http://msdn.microsoft.com/en-us/library/ms190268.aspx](http://msdn.microsoft.com/en-us/library/ms190268.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T10:03:47.293

好吧，如果您没有 SQL 代理或完整的 SQL 版本：您可以安排一个任务以在 Windows 调度程序中运行一个批处理文件，该批处理文件“调用”SQL 脚本。这是我的批处理文件，例如：**SQLCMD.EXE -S sqlServerInstanceName -E -i C:_software\mySQLscript2Execute.sql**。请记住以 .bat 扩展名保存文件。谢谢：查格伯特

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T19:04:47.483

在您的 SQL Server 代理中 1\. 右键单击​​作业以添加新作业 2\. 为其命名并确保所有者具有对数据库的执行访问权限。3.下台阶和新台阶。您可以简单地将脚本复制粘贴到文本区域中，然后单击“确定”选择要运行的数据库。4\. 在计划下单击添加新计划并选择时间、发生、开始和结束时间 5\. 单击确定，您就完成了。希望它可以帮助您和其他遇到此问题但仍然不确定它是如何工作的人，就像我一样 :)

# domain-driven-design - 具有 CQRS 和 EventSourcing 的灵活实体模型

> ID：11365156
> 
> 赞同：2
> 
> 时间：2012-07-06T15:25:28.457
> 
> 标签：domain-driven-design, cqrs, event-sourcing

引用[Rinat Abdullin 的文章](http://abdullin.com/journal/2010/3/23/dddd-cqrs-and-other-enterprise-development-buzz-words.html)：

> CQRS 和事件溯源还简化了具有各种自定义字段和属性的灵活实体模型的实现，这些自定义字段和属性通常在运行时定义并由最终用户在布局和拖放设计器中使用。

我不明白如何使用事件溯源和 cqrs 来定义运行时自定义字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:15:35.197

只需将 IDictionary 字段添加到您的命令和事件，然后在处理事件时将其内容添加到 Projections。只需确保您放入 Dictionary 中的内容确实是可序列化的。

# flv - 录制 VNC 会话

> ID：11365157
> 
> 赞同：1
> 
> 时间：2012-07-06T15:25:28.840
> 
> 标签：flv, vnc, flvplayback, vnc-server

我目前正在使用 vnc2flv 录制 vnc 会话。但是我得到的flv文件非常大。对于 5 秒的记录，文件大小约为 10 mb。我应该为参数提供什么值，以便获得正确的 flv 文件。生成的 flv 文件也无法使用 vnc 媒体播放器播放

# java - 如何为正则表达式组绑定 +/*？

> ID：11365159
> 
> 赞同：0
> 
> 时间：2012-07-06T15:25:40.973
> 
> 标签：java, regex

说我有正则表达式：

```
(CC|NP)* 
```

因此，它会在 Java 中的前瞻正则表达式中产生问题。我该如何写才能避免这些问题？我想把它重写为：

```
(CC|NP){1,9} 
```

[在 regexr 上测试似乎完全忽略了上限。](http://regexr.com?31fah) 在 Java 中，这些量 {} 似乎只适用于非组正则表达式元素，如：

```
\w+\[\S{1,9}\] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:16:36.670

我不确定您在哪里发现问题。量词像任何实体一样作用于组。

所以，`\w+\[\S{1,9}\]`本来可以写成`\w+\[(\S){1,9}\]`同样的结果。

就您在 regexr 上的示例而言，那里没有任何问题。它符合它应该的。

`(PUN|CC|NP){1,3}`将贪婪地尝试匹配任何交替（从左到右优先）。它将匹配的内容没有中断。它匹配 1-3 个连续出现的 PUN 或 CC 或 NP。

您提供的示例字符串在 CC 之间有一个空格，因此由于正则表达式中不存在空格，因此不匹配。唯一匹配的是单个`CC`.

如果你想占一个空间，它可以像这样添加到分组中：
`(?:(?:PUN|CC|NP)\s*){1,3}`

如果您只想在交替之间允许空格，可以这样做：
`(?:PUN|CC|NP)(?:\s*(?:PUN|CC|NP)){0,2}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:46:41.937

抱歉，后面的模式通常对子模式有限制。请参阅 fx[为什么在某些情况下，lookbehind 中的有限重复不起作用？p](https://stackoverflow.com/questions/3159524/why-doesnt-finite-repetition-in-lookbehind-work-in-some-flavorsp)。或在网络上搜索“lookbehind 模式限制”。

您可以尝试将后视模式的所有固定长度变体写成交替模式。但这可能是很多...

您还可以通过通常匹配内部模式并匹配和分组您的实际目标来模拟后视：`(?:CC|NP)*(.*)`

# android - 替换 Android Mapview 以使用 WMS 服务

> ID：11365164
> 
> 赞同：6
> 
> 时间：2012-07-06T15:25:51.483
> 
> 标签：android, android-webview, android-mapview, osmdroid, wms

我正在寻找 Android MapView 的替代品，因为我需要在地图视图中添加 WMS 服务，并且使用本机视图时效果很差。

我已经尝试为此使用[Osmdroid](http://code.google.com/p/osmdroid/) API，但仍然没有成功。这需要修改几个 java 类，如 XYTileSource 和 BitmapTileSourceBase。而且我不确定我是否可以工作，因为我还没有找到有关它的信息。

例如：[https ://groups.google.com/forum/?fromgroups#!topic/osmdroid/IUcc4Q0DmOE](https://groups.google.com/forum/?fromgroups#!topic/osmdroid/IUcc4Q0DmOE)

Android Market 中有一些应用程序可以使它像 OruxMaps 一样完美地工作，但没有用于开发的 API。: (

任何人都知道如何以编程方式在另一个地图视图中使用 WMS 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:39:37.007

您是否尝试过 mapforges 的 API： [http ://code.google.com/p/mapsforge/](http://code.google.com/p/mapsforge/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:56:07.890

你可以试试 Nutiteq，他们的 API 令人印象深刻，并且有很多特性：

[http://www.nutiteq.com/content/different-map-sources](http://www.nutiteq.com/content/different-map-sources)

# google-app-engine - 谷歌 AppEngine 管道 API

> ID：11365172
> 
> 赞同：4
> 
> 时间：2012-07-06T15:26:31.313
> 
> 标签：google-app-engine

我想将我的一些任务重写为管道。主要是因为我需要一种方法来检测任务何时完成或按特定顺序启动任务。我的问题是我不确定如何将递归任务重写为管道。通过递归，我的意思是这样称呼自己的任务：

```
class MyTask(webapp.RequestHandler):
    def post(self):
        cursor = self.request.get('cursor', None)

        [set cursor if not null]
        [fetch 100 entities form datastore]

        if len(result) >= 100:
            [ create the same task in the queue and pass the cursor ]

        [do actual work the task was created for] 
```

现在我真的很想把它写成一个管道并做类似的事情：

```
class DoSomeJob(pipeline.Pipeline):

   def run(self):
       with pipeline.InOrder():
          yield MyTask()
          yield MyOtherTask()
          yield DoSomeMoreWork(message2) 
```

对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-02T09:57:58.940

一个基本的管道只返回一个值：

```
class MyFirstPipeline(pipeline.Pipeline):
    def run(self):
        return "Hello World" 
```

该值必须是 JSON 可序列化的。

如果您需要协调多个管道，则需要使用*生成器管道*和`yield`语句。

```
class MyGeneratorPipeline(pipeline.Pipeline):
    def run(self):
        yield MyFirstPipeline() 
```

您可以将管道的产生视为返回['future'](http://en.wikipedia.org/wiki/Futures_and_promises)。

您可以将此 future 作为输入 arg 传递给另一个管道：

```
class MyGeneratorPipeline(pipeline.Pipeline):
    def run(self):
        result = yield MyFirstPipeline()
        yield MyOtherPipeline(result) 
```

Pipeline API 将确保仅在将future from解析为实际值后才调用的`run`方法。`MyOtherPipeline``result``MyFirstPipeline`

你不能混合使用相同`yield`的`return`方法。如果您使用`yield`的值必须是 Pipeline 实例。如果您想这样做，这可能会导致问题：

```
class MyRootPipeline(pipeline.Pipeline):
    def run(self, *input_args):
        results = []
        for input_arg in input_args:
            intermediate = yield MyFirstPipeline(input_arg)
            result = yield MyOtherPipeline(intermediate)
            results.append(result)
        yield results 
```

在这种情况下，Pipeline API 只会在您的最后一行中看到一个**列表**`yield results`，因此它不知道在返回之前解决其中的期货，您将收到错误。

它们没有记录，但包含一个实用管道库，可以在这里提供帮助：
[https ://code.google.com/p/appengine-pipeline/source/browse/trunk/src/pipeline/common.py](https://code.google.com/p/appengine-pipeline/source/browse/trunk/src/pipeline/common.py)

因此，实际工作的上述版本如下所示：

```
import pipeline
from pipeline import common

class MyRootPipeline(pipeline.Pipeline):
    def run(self, *input_args):
        results = []
        for input_arg in input_args:
            intermediate = yield MyFirstPipeline(input_arg)
            result = yield MyOtherPipeline(intermediate)
            results.append(result)
        yield common.List(*results) 
```

现在我们好了，我们正在生成一个管道实例，并且 Pipeline API 知道正确地解析它的未来值。管道的来源`common.List`很简单：

```
class List(pipeline.Pipeline):
    """Returns a list with the supplied positional arguments."""

    def run(self, *args):
        return list(args) 
```

...在调用*此*管道的`run`方法时，管道 API 已将列表中的所有项目解析为实际值，可以作为`*args`.

无论如何，回到你原来的例子，你可以做这样的事情：

```
class FetchEntitites(pipeline.Pipeline):
    def run(self, cursor=None)
        if cursor is not None:
            cursor = Cursor(urlsafe=cursor)

        # I think it's ok to pass None as the cursor here, haven't confirmed
        results, next_curs, more = MyModel.query().fetch_page(100,
                                                              start_cursor=cursor)

        # queue up a task for the next page of results immediately
        future_results = []
        if more:
            future_results = yield FetchEntitites(next_curs.urlsafe())

        current_results = [ do some work on `results` ]

        # (assumes current_results and future_results are both lists)
        # this will have to wait for all of the recursive calls in
        # future_results to resolve before it can resolve itself:
        yield common.Extend(current_results, future_results) 
```

## 进一步说明

一开始我说我们可以把`result = yield MyPipeline()`它当作返回一个“未来”。严格来说这不是真的，显然我们实际上只是在产生实例化的管道。（不用说我们的`run`方法现在是一个*生成器*函数。）

**[Python 的yield 表达式](https://docs.python.org/2/reference/expressions.html#yield-expressions)**如何工作的奇怪部分是，尽管它看起来像这样，但您将值放在函数*之外*`yield`的某个地方（到 Pipeline API 设备）而不是进入您的var。表达式左侧的 var 的值也通过调用生成器（生成器是您定义的方法）从函数*外部推入。**`result``result`*`send``run`**

 **因此，通过产生一个实例化的 Pipeline，您可以让 Pipeline API 获取该实例并`run`在其他时间调用它的方法（实际上，它将作为类名和一组 args 和 kwargs 传递到任务队列中并重新-在那里实例化...这就是为什么您的 args 和 kwargs 也需要 JSON 可序列化的原因）。

同时，Pipeline API `send`sa`PipelineFuture`对象进入您的`run`生成器，这就是您的`result`var 中出现的内容。这似乎有点神奇和违反直觉，但这就是带有 yield 表达式的生成器的工作方式。

我花了相当多的时间才把它解决到这个水平，我欢迎对我做错的任何事情进行澄清或更正。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T22:37:15.617

当您创建管道时，它会返回一个表示“阶段”的对象。您可以向舞台询问其 ID，然后将其保存。稍后，您可以根据保存的 id 重新构建阶段，然后询问阶段是否已完成。

请参阅[http://code.google.com/p/appengine-pipeline/wiki/GettingStarted](http://code.google.com/p/appengine-pipeline/wiki/GettingStarted)并查找`has_finalized`. 有一个示例可以满足您的大部分需求。**

# java - 多线程 http/https Man in the middle Proxy, Socket Performance

> ID：11365173
> 
> 赞同：0
> 
> 时间：2012-07-06T15:26:34.043
> 
> 标签：java, multithreading, performance, sockets, proxy

在第一条评论之后编辑了问题。

我的问题主要是 java 套接字性能，尤其是从目标服务器读取。

服务器是一个简单的 serversocket.accept() 循环，它为来自 firefox 的每个连接创建一个客户端线程

主要问题是套接字输入流读取会阻塞大量时间。

客户端线程如下：

```
//Take an httpRequest (hc.apache.org), raw string http request, and the firefox socket outputstream 
private void handle(httpRequest req, String raw, Outputstream out)
{

        InputStream targetIn =null;
        OutputStream targetOut = null;
        Socket target = null;

        try {
        System.out.println("HANDLE HTTP");
            String host = req.getHeaders("Host")[0].getValue();
            URI uri = new URI(req.getRequestLine().getUri());
            int port = uri.getPort() != -1 ? uri.getPort() : 80;
            target = new Socket(host, port);

//**I have tried to play around with these but cannot seem to get a difference in performance**

            target.setTcpNoDelay(true);
//          target.setReceiveBufferSize(1024 *1024);
//          target.setSendBufferSize(1024 * 1024);

//Get your plain old in/out streams         
            targetIn = target.getInputStream();
            targetOut = target.getOutputStream();

//Send the request to the target
            System.out.println("---------------Start response---------------");
            targetOut.write(raw.getBytes());
            System.out.println("request sent to target");

        ////Same as membrane            
            byte[] buffer = new byte[8 * 1024];
            int length = 0;
            try {
                while((length = targetIn.read(buffer)) > 0) {
                    out.write(buffer, 0, length);
                    out.flush();
                }
            } catch(Exception e) {
                e.printStackTrace();
            }

            System.out.println("closing out + target socket");

//IOUTILS
//          long count = IOUtils.copyLarge(targetIn, out, 0L, 1048576L);
//          int count = IOUtils.copy(targetIn, out);
//          System.out.println("transfered : " + count );

//CHANNEL COPY
//
//          ReadableByteChannel input = Channels.newChannel(targetIn);
//          WritableByteChannel output = Channels.newChannel(out);
//          
//          ChannelTools.fastChannelCopy(input, output);
//          
//          input.close();
//          output.close();

//CHAR TO CHAR COPY         
//            int c;
//            while ((c = targetIn.read()) != -1) {
//                out.write(c);
//            }

            target.close();
            out.close();

            System.out.println("--------------------  end response   ------------------------------");
        }
         catch (Exception e) {
             // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

主要问题在于将目标输入流复制到客户端（firefox）输出流的适当方法。

我用来测试的站点是[http://www.ouest-france.fr](http://www.ouest-france.fr)（带有大量图像并发出大量请求的新站点）。

从工作站到目标的 Ping 时间：10 毫秒

iceweasel 中的正常加载（debian firefox，firebug 时间）：14 秒，2.5MB

在这个代理后面加载：14 分钟（firebug 网络面板充满了虚假的 404，并且在一定时间后返回黑色的中止请求，大量请求处于阻塞或等待模式）

现在，当执行 i loadup visual vm 时，启动没有类过滤器的分析（查看应用程序真正花费时间的地方）并且它花费 99% 的时间在 java.net.SocketInputStream.read(byte[], int, int )，它正在读取目标套接字输入流。

我想我已经完成了我的功课，并且一直在寻找可以在任何地方测试不同的解决方案。

但性能似乎从未改善。

我已经尝试过的东西：

- 将输入和输出流放入它们的缓冲版本，完全没有变化

-int 到 int 复制，完全没有变化，

- 具有可变大小数组的经典字节 [] 数组副本，完全没有变化

摆弄 settcpnodelay、setsendbuffersize、setreceivebuffersize，没有得到任何改变。

正在考虑尝试 nio socketchannels ，但找不到将套接字劫持到 sslsocket 的方法。

所以目前我有点卡住并寻找解决方案。

我查看了开源代理的源代码，似乎找不到逻辑上的根本区别，所以我完全迷失了这一点。

尝试了其他测试：

导出 http_proxy="localhost:4242" wget debiandvd.iso

吞吐量达到 2MB/s。线程似乎花费 66% 的时间从目标读取，33% 的时间写入客户端

我在想，也许我有很多线程正在运行，但在 www.google.com 上运行测试的请求要少得多，但问题仍然与 www.ouest-france.fr 相同

通过 debian iso 测试，我认为我必须运行许多线程（法国西部大约有 270 个请求），但谷歌测试（10 个请求）测试似乎证实线程数不是问题。

任何帮助将不胜感激。

环境是debian，sun java 1.6，带有eclipse和visualvm的dev

我可以根据需要提供其余代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:13:07.427

找到部分解决方案：

不是一个非常干净的解决方案，但有效。

我仍然有吞吐量问题。

我所做的是将套接字计时器设置为正常超时（30000 毫秒）。

当第一次读取进入循环时，我将计时器重置为更低的值（目前为 1000 毫秒）。

这让我可以等待服务器开始发送数据，如果我在 1 秒内没有任何新数据出现，我认为传输已经完成。

响应时间仍然很慢，但要好得多。

# asp.net - ASP - 为什么这个 img 不显示

> ID：11365182
> 
> 赞同：0
> 
> 时间：2012-07-06T15:27:08.460
> 
> 标签：asp.net, html

以下代码不会显示图像，它确实显示图像存在但图像不显示。有任何想法吗？

```
 <%@ Page Language="C#" MasterPageFile="~/Main_MP.master" AutoEventWireup="true" CodeFile="Phone.aspx.cs"
    Inherits="Phone1" Title="Talk & Txt" %>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

<img src="Talk & Txt Page.jpg" alt="Smiley face" height="42" width="42" />

    <br />
<asp:Label ID="lblCounter" runat="server" Visible="False" Font-Bold="True" Font-Names="Calibri" Font-Size="Small" ForeColor="#C00000"></asp:Label></div>
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:30:05.140

未转义的＆符号可能会导致您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:32:07.770

将图像文件重命名为`TalkAndTxtPage.jpg`- 通过 URL 链接的所有文件（包括图像）最好在不使用保留或不安全字符的情况下命名（空格 (" ") 和 & 符号 ("&") 都属于此类别）。参考 - [http://www.blooberry.com/indexdot/html/topics/urlencoding.htm](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)

然后这样做（你也有一个坏`<div>`标签）：

```
 <%@ Page Language="C#" MasterPageFile="~/Main_MP.master" AutoEventWireup="true" CodeFile="Phone.aspx.cs"
    Inherits="Phone1" Title="Talk & Txt" %>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

<img src="TalkAndTxtPage.jpg" alt="Smiley face" height="42" width="42" />

    <br />
<asp:Label ID="lblCounter" runat="server" Visible="False" Font-Bold="True" Font-Names="Calibri" Font-Size="Small" ForeColor="#C00000"></asp:Label>
    <div>
    </div>
</asp:Content> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:33:27.790

删除图像名称中的空格。

```
<img src="Talk-Txt-Page.jpg" alt="Smiley face" height="42" width="42" /> 
```

另外，图像相对于页面的位置在哪里？您可能需要指向该目录。

```
<img src="/images/Talk-Txt-Page.jpg" alt="Smiley face" height="42" width="42" /> 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T15:34:07.870

仅此一项与名为 Talk & Txt Page.jpg 的图像就在我身边。

我在您的代码中看到几个没有开始 div 的结束 div 标签

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T15:29:16.140

用 %20 替换图像 URL（即“src”）属性中的空格。

URL 中不能有空格，但 %20 应该可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T15:30:03.440

该图像是否与页面在同一目录中，否则您需要提供完整的相对路径

# apache - .htaccess 从一个 url 到另一个内部

> ID：11365183
> 
> 赞同：0
> 
> 时间：2012-07-06T15:27:11.107
> 
> 标签：apache, http, .htaccess, url, rewrite

我想要完成的是，如果用户写入例如： http: [//domain.co.uk/projects/category1](http://domain.co.uk/projects/category1) 或 [http://domain.co.uk/projects/category2](http://domain.co.uk/projects/category2) 或 category3 等。

他们将被重定向到

```
http://domain.co.uk/projects/ 
```

我对 htaccess 没有真正的经验，所以这里的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:28:14.663

```
RewriteRule ^projects/([^/]+)$    http://domain.co.uk/projects/   [R=301,L] 
```

# c# - 选择由对象类型确定的 WPF DataTemplate

> ID：11365184
> 
> 赞同：1
> 
> 时间：2012-07-06T15:27:11.660
> 
> 标签：c#, wpf, xaml, user-controls, datatemplate

我有一个 ViewModel，它有一个具有相同接口的对象列表，并在视图中显示它们，我们`UserControl`在视图绑定到的视图模型中有一个 s 列表。我想知道是否可以为列表中不同类型的具体对象创建一个模板，并让 WPF 为我应用正确的模板，而不是创建`UserControl`列表并绑定到该模板。

基本上我有：

```
<StackPanel 
            Margin="0,0,20,0"
            >                
            <my2:ProfileIdentificationView />
            <ItemsControl
                ItemsSource="{Binding Path=ProfileSections}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </DockPanel> 
```

ItemsSource 绑定是用户控件的列表。我正在寻找一种方法来根据 ProfileSection 的类型在此处应用这些 UserControls 的外观。就像一种类型是 IIS 部分，另一种类型是用户部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:33:47.583

您可以`DataTemplates`通过[`DataTemplate.DataType`](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.datatype.aspx). 确保使用`x:Type`标记扩展，因为字符串被解释为 XML 元素标记（以允许 XML 的隐式模板）。

# c# - Windows Phone 中 SQL Server CE 中超过 4000 个字符的 NTEXT

> ID：11365186
> 
> 赞同：2
> 
> 时间：2012-07-06T15:27:27.047
> 
> 标签：c#, windows-phone-7, sql-server-ce, ntext

Windows phone 中 SQL Server CE 中超过 4000 个字符的 NTEXT

我的 Windows Phone 应用程序中有一个数据库，`ntext`其中一个表中有一个字段，我正在尝试向该字段写入一些内容，但我收到一条`InvalidOperationException`消息：

> 字符串截断：max=4000，len=4621

我正在尝试使用`ntext`，因为我知道它`nvarchar`不接受超过 4000 个字符。

我一直在寻找解决方案，但找不到任何解决方案。

我发现我无法在 Windows Phone 上使用的唯一解决方案，因为它使用`SqlConnection`and `SqlCommand`with `SqlDbType`.

以下是列的声明方式：

```
 private string _content;
    [Column(DbType="ntext")]
    public string Content
    {
        get
        {
            return _content;
        }
        set
        {
            if (value != _content)
            {
                _content = value;
                NotifyChange(o => o.Content);
            }
        }
    } 
```

我将其插入：

```
cn.Articles.InsertAllOnSubmit(articlesToSave); 
cn.SubmitChanges(); 
```

有谁知道任何解决方法？

提前感谢您的回答！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:25:52.457

我认为您在实际数据库文件中的列不是 ntext，无论出于何种原因。

这对我来说很好：

```
 using (NorthwindContext ctx = new NorthwindContext(NorthwindContext.ConnectionString))
    {
        ctx.DeleteDatabase();
        ctx.CreateDatabase();
        var category = new Categories();
        category.CategoryName = "Test";
        category.Description = new string('x', 6666);
        ctx.Categories.InsertOnSubmit(category);
        ctx.SubmitChanges();

        var testCat = ctx.Categories.First();
        if (testCat.Description.Length == 6666)
        {
            MessageBox.Show("Works on my Windows Phone");                
        }
    } 
```

列声明：

```
[global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Description", DbType="NText", UpdateCheck=UpdateCheck.Never)]
        public string Description
        {
            get
            {
                return this._Description;
            }
            set
            {
                if ((this._Description != value))
                {
                    this.OnDescriptionChanging(value);
                    this.SendPropertyChanging();
                    this._Description = value;
                    this.SendPropertyChanged("Description");
                    this.OnDescriptionChanged();
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:19:02.187

ntext 支持超过 5 亿个字符，因此您遇到的问题与它无关。请参阅[http://msdn.microsoft.com/en-us/library/ms172424.aspx](http://msdn.microsoft.com/en-us/library/ms172424.aspx)

您可能想查看以下内容：http: [//msdn.microsoft.com/en-us/library/hh202872 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202872(v=vs.92).aspx)

该列表没有提到 ntext，但确实提到了 text。我猜您可能需要提供自己的自定义格式化程序。

**更新**

查看以下修补程序。它涵盖了使用 linq、ce 和 ntext 数据类型时的某些情况。看起来*没有*修复，格式化程序强制 ntext 成为引擎盖下的 nvarchar(4000) 。 [http://support.microsoft.com/kb/958478](http://support.microsoft.com/kb/958478)

# c# - WCF Web 服务 IP 日志记录

> ID：11365190
> 
> 赞同：-1
> 
> 时间：2012-07-06T15:27:44.770
> 
> 标签：c#, wcf, logging, ip

我正在尝试在我的 Web 服务中创建一个方法，该方法将记录服务中每个方法的每个请求的 IP。我尝试使用 HttpContext，但无论我做什么，它都会返回一个空引用异常。我希望能够从请求中获取 IP 并将其记录到 SQL 数据库中。这是我尝试记录的一种方法的示例。

```
public GetPL GPL(string code)
    {
        var db = new TDCDataContext();

        var pq = db.PROC_SELECT_GPL(code).ToList();

        //a bunch of nonsense

        //logging
        var ip = HttpContext.Current.Request.UserHostAddress;
        var method = GetMethod();
        db.PROC_INSERT_Log(ip, code, method, true, null, null);

        return stuff;
    } 
```

我是不是走错了方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:29:39.263

```
 try
                {
                    var context = OperationContext.Current;
                    if (context != null)
                    {
                        var prop = context.IncomingMessageProperties;

                        if (prop != null && 
                            !string.IsNullOrEmpty(RemoteEndpointMessageProperty.Name) && 
                            prop.ContainsKey(RemoteEndpointMessageProperty.Name))
                        {
                            endpoint = prop[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;
                        }
                    }                    
                } 
                catch (Exception e)
                {
                    //log
                } 
```

`//endpoint.Address - ip address`

# gwt - GWT 单元格表中的内联编辑

> ID：11365191
> 
> 赞同：3
> 
> 时间：2012-07-06T15:27:47.467
> 
> 标签：gwt

我的一个 GWT 屏幕中有一个单元格表。现在的要求是屏幕上会有一些按钮，点击哪一个可编辑的行将被插入到单元格表中。如果我没记错的话，这称为内联编辑。

有人可以帮我吗？我刚刚开始在 GWT 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:32:50.830

这是向单元格表添加新的可编辑行的非常简单的示例。我希望我明白你的意思:)

```
public class Test
implements EntryPoint
{
    public void onModuleLoad()
    {
        //create and attach table
        final CellTable<A> table = new CellTable<A>();
        RootPanel.get().add(table);

        //add editable cell
        table.addColumn(new Column<A, String>(new TextInputCell())
        {

            @Override
            public String getValue(
                A object)
            {
                return object.getA() == null ? "" : object.getA();
            }
        });

        //put some data
        ListDataProvider<A> dataProvider = new ListDataProvider<A>(
            Arrays.asList(new A("AAA"), new A("BBB"), new A("CCC")));
        dataProvider.addDataDisplay(table);

        //add button with click handler
        RootPanel.get().add(new Button("add new", new ClickHandler()
        {

            @Override
            public void onClick(
                ClickEvent event)
            {
                //add new object to visible items
                List<A> data = new ArrayList<A>(table.getVisibleItems());
                A newOne = new A();
                data.add(newOne);
                table.setRowData(data);
            }
        }));
    }

    class A
    {
        String a;

        public A(
            String a)
        {
            super();

            this.a = a;
        }

        public A()
        {
            super();
        }

        public String getA()
        {
            return a;
        }

        public void setA(
            String a)
        {
            this.a = a;
        }
    } 
```

# networking - 每秒路由器请求数与进入网络的主机之间的关系

> ID：11365194
> 
> 赞同：0
> 
> 时间：2012-07-06T15:27:55.683
> 
> 标签：networking, network-protocols, ipv6

我在一本书中读到，一旦主机进入网络，它就会发出路由器请求，以便它可以建立它的路由器列表。所有主机在网络中的行为是否都如此？是否存在主机进入网络并等待未经请求的路由器广告而不是发送路由器请求以了解路由器并配置自身的情况？（在 ipv6 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:48:04.417

'取决于主机'......他们可能会发送路由器请求，但他们可以等待路由器广告的到来。Windows、Mac OS 和 Linux 等最常见的操作系统都会发送它们。

# facebook-graph-api - 带有 IN 子句的 FQL 流表中的结果不一致

> ID：11365196
> 
> 赞同：0
> 
> 时间：2012-07-06T15:28:04.847
> 
> 标签：facebook-graph-api, facebook-fql

我在让 FQL 查询与多个页面的 IN 子句一起使用时遇到问题。这些页面可公开访问 - 所以我不确定是否存在权限问题

前任：

```
SELECT post_id, source_id, message FROM stream WHERE source_id in (40796308305, 56381779049) order by updated_time; 
```

这是使用启用了所有权限的图形 api 资源管理器。我要么没有数据，要么只是从 IN 子句中指定的最后一个 graphid 中获得一些帖子。

想法？FQL 文档中似乎没有很好地记录这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:22:55.453

您可以将其作为多查询来执行。您将一次获得所有数据。您需要在脚本中对结果进行排序，以按时间顺序排列。

```
{
  "coke":"SELECT post_id, source_id, message FROM stream WHERE source_id = 40796308305 order by updated_time",
  "pepsi":"SELECT post_id, source_id, message FROM stream WHERE source_id = 56381779049 order by updated_time"
 } 
```

# c - qtcreator 项目的 cmake vs gmake

> ID：11365197
> 
> 赞同：1
> 
> 时间：2012-07-06T15:28:10.167
> 
> 标签：c, qt, cmake, gnu-make

我正在尝试将 QtCreator 用作直接 C 项目的 IDE。原因是我对 QtCreator 很满意，我想要一个可视化的 IDE 来逐步完成我正在从事的这个新项目。我的开发箱和我的部署箱是不同的，但它们都有 gmake。QtCreator 需要 cmake，我不介意把它放在我的开发箱上，但我的部署箱不会有 cmake。

我可以在 Qt 盒子上构建我的软件，并确保它会部署在部署盒子上吗？

编辑：要清楚，现有的代码库已经有一个makefile结构，我不想打断它。如果我可以将我的项目设置为使用那些现有的目标，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:22:59.827

如果您的项目使用 CMake 作为构建系统，那么您应该将它安装在您正在构建的机器上。你不能预先生成 Makefile，然后`make`在另一个盒子上运行。

好吧，您实际上可以，但是您可能需要相同的编译器版本、位于相同路径中的库/头文件等。所以通常这不是一个好主意。

至于部署已编译的二进制文件 - 它与 CMake 无关。一般规则是您应该在两台机器上拥有相同的共享库。静态链接您的项目允许部署单个胖可执行文件/库，而无需任何其他依赖项。

# c# - 从网络摄像头 c# WPF 应用程序捕获图像

> ID：11365200
> 
> 赞同：1
> 
> 时间：2012-07-06T15:28:34.693
> 
> 标签：c#, wpf, webcam, image

我正在尝试为 WPF/C# 中的一个应用程序从网络摄像头捕获图像

1）我尝试了 WIA，但我发现错误 0x80210015，我已经读到当没有可用的 WIA 设备时会发生此错误。我读到在 windows vista/7 WPD 中使用了 insted WIA 但是当我尝试一个简单的例子时

```
PortableDeviceManager deviceManager = new PortableDeviceManager();
deviceManager.RefreshDeviceList();

uint numberOfDevices = 1;

deviceManager.GetDevices(null, ref numberOfDevices);

if (numberOfDevices == 0)
{
    Console.WriteLine("No device");
}
else
{
    string[] deviceIds = new string[numberOfDevices];
    deviceManager.GetDevices(ref deviceIds[0], ref numberOfDevices);

    Console.WriteLine(deviceIds);
}

Console.Read(); 
```

我无法检测到设备。

2）我尝试使用[http://easywebcam.codeplex.com/](http://easywebcam.codeplex.com/)工作，但我随机收到错误“捕获视频图像时发生错误。视频捕获...”我需要始终选择设备，我需要执行 webcam.start() 几次（2 或 3 次）以使相机正常工作。

我有两个网络摄像头

*   Chicony Web 2.0（内置网络摄像头）
*   天才 FaceCam 2000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:54:59.100

这是一个简单的拍照类程序

```
 Image<Bgr, Byte> img; 
    private Capture capture;
    private bool captureInProgress;

    private void gumb_kamera_Click(object sender, EventArgs e)
    {

    }

    private void processFunction(object sender, EventArgs e)
    {
         img = capture.QueryFrame();

       //  imageBox1.Image = img;
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        if (capture == null)
        {
            try
            {
                capture = new Capture(0);
            }
            catch (NullReferenceException excpt)
            {
                MessageBox.Show(excpt.Message);
            }
        }

        if (capture != null)
        {
            if (captureInProgress)
            {
                Application.Idle -= processFunction;
            }
            else
            {
                Application.Idle += processFunction;
            }
            captureInProgress = !captureInProgress;
        }

    }

    private void button1_Click(object sender, EventArgs e)
    {

    imageBox1.Image = img; 

    } 
```

# javascript - 评估参考错误

> ID：11365204
> 
> 赞同：1
> 
> 时间：2012-07-06T15:29:00.987
> 
> 标签：javascript, json

在javascript中，我正在建立一个这样的字符串......

```
var txt = "{authenticationToken: 1, authenticated: 2, authenticationTokenExpiry: 3,sessionTimeoutMinutes: 4,userName: " + userName + "}"; 
```

这稍后会像这样通过和 eval 语句......

```
var obj = eval('(' + txt + ')'); 
```

当发生这种情况时，我收到一个参考错误，指出用户名变量的值未定义。

有谁知道这是什么原因？我想念的东西很简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:53:53.017

您在用户名变量周围缺少引号：

```
var txt = "{authenticationToken: 1, authenticated: 2, authenticationTokenExpiry: 3,sessionTimeoutMinutes: 4,userName: '" + userName + "'}"; 
```

我假设您想将用户名的字符串值存储在您的 userName 变量中。由于它没有被引用，因此将用户名的值视为变量。因此，例如，如果用户名是“testValue123”，它将`userName: testValue123`不是`userName: 'testValue123'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:50:07.233

如果 jQuery 可用`eval()`，我建议使用[$.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)方法而不是 ：

**jQuery：**

```
$(function(){
    var userName = 'me';

    var txt = '{"authenticationToken": 1, "authenticated": 2, "authenticationTokenExpiry": 3, "sessionTimeoutMinutes": 4, "userName": "' + userName + '"}';

    var obj = $.parseJSON(txt);
}); 
```

*注意：必须修改字符串以满足格式良好的 JSON 字符串的要求*

演示：http: [//jsfiddle.net/WTC7k/](http://jsfiddle.net/WTC7k/)

但是，您遇到 value`userName`未定义错误的原因是您必须将字符串括在引号中以允许 eval() 正常工作：

```
var userName = 'me';

var txt = "{authenticationToken: 1, authenticated: 2, authenticationTokenExpiry: 3,sessionTimeoutMinutes: 4,userName: '" + userName + "'}"; 

var obj = eval('(' + txt + ')'); 
```

演示：http: [//jsfiddle.net/9rtgK/](http://jsfiddle.net/9rtgK/)

# ruby-on-rails - 如何在 Rails 中存储第三方服务的凭据

> ID：11365207
> 
> 赞同：0
> 
> 时间：2012-07-06T15:29:12.913
> 
> 标签：ruby-on-rails, security, capistrano

我正在通过 SendGrid 为我的 rails 应用程序发送的邮件设置重定向。但是，我对被告知存储凭据的方式并不满意。

正如那里指定[的](http://docs.sendgrid.com/documentation/get-started/integrate/examples/rails-example-using-smtp/)那样，他们建议覆盖 config/environment.rb 文件中的 ActionMailers 默认值。我发现我的前任创建了一个 initializers/smtp.rb 文件，他在其中定义了以前的设置，但是通过发现这个文件，我发现了 SMTP 密码......

如果我修改这些文件中的任何一个，有权访问 git 存储库的任何人都将有权访问凭据（包括与我们合作的前端和后端自由职业者）。

我正在考虑创建一个文件，该文件将保留在服务器的共享文件夹中（如 database.yml 文件），并且每次我们部署时都会符号链接到应用程序，这要归功于 capistrano。

你怎么看呢？将这个初始化程序/smtp.rb 移动到服务器的共享文件夹并在部署时对其进行符号链接是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:35:05.650

我的建议（我所看到的）：

将 API 密钥和敏感信息移动`yml`到`config/`.

将此 yml 文件加载到变量中，例如

`KEYS = YAML::load(File.open("#{RAILS_ROOT}/config/config.yml"))`

瞧。

此外，例如，当您将代码放在 GitHub 上时，这`config.yml`将是您添加到`.gitignore`. 相反，制作一个`config-example.yml`并告诉您的开发人员获取他们自己的密钥和密码等，将它们存储在他们的本地`config.yml`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:41:21.390

如果您在 *nix 上，环境变量是最好的方法

将变量粘贴在 .bashrc 文件中，如下所示：

```
// no need for quotation marks
export GMAIL_USER=my_gmail_user_name@gmail.com
export GMAIL_PASSWORD=my_gmail_password 
```

并在您的 smtp 初始化程序中调用它们，如下所示：

```
ActionMailer::Base.smtp_settings = {
  :user_name            => ENV['GMAIL_USER'],
  :password             => ENV['GMAIL_PASSWORD']
} 
```

重新启动 bash 和您的 rails 应用程序。一切都应该工作。Heroku 有一篇关于如何在其网络上使用[环境变量的好文章。](https://devcenter.heroku.com/articles/config-vars)

# jquery - 如何使用 jQuery 重置 jquery 选择的选择选项？

> ID：11365212
> 
> 赞同：77
> 
> 时间：2012-07-06T15:29:32.467
> 
> 标签：jquery, jquery-chosen

我尝试了很多东西，但似乎没有任何效果。

我正在使用 jQuery 和 Chosen 插件。

我尝试过的方法：

```
var select = jQuery('#autoship_option');

select.val(jQuery('options:first', select).val());

jQuery('#autoship_option').val('');

jQuery('#autoship_option').text('');

jQuery('#autoship_option').empty('');

jQuery("#autoship_option option[value='']").attr('selected', true); 
```

一旦被选中，它总是显示 Active Autoship 选项。我似乎无法清除选择。

这是选择框：

```
<select id="autoship_option" data-placeholder="Choose Option..." 
style="width: 175px;" class="chzn-select">
    <option value=""></option>
    <option value="active">Active Autoship</option>
</select> 
```

任何熟悉选择并能够通过一个选项清除选择框的人？（未来会有更多选择。

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-07-06T15:38:30.007

将`select`元素的值设置为空字符串*是*正确的方法。但是，这只会更新根`select`元素。自定义`chosen`元素不知道根`select`已更新。

为了通知`chosen`已`select`修改，您必须触发`chosen:updated`：

```
$('#autoship_option').val('').trigger('chosen:updated'); 
```

或者，如果您不确定第一个选项是否为空字符串，请使用以下命令：

```
$('#autoship_option')
    .find('option:first-child').prop('selected', true)
    .end().trigger('chosen:updated'); 
```

阅读[此处的文档](http://harvesthq.github.io/chosen/)（找到标题为**动态更新选择**的部分）。

* * *

**PS**旧版本的 Chosen 使用稍微不同的事件：

```
$('#autoship_option').val('').trigger('liszt:updated'); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-06T15:35:14.617

第一个选项应该足够了：http: [//jsfiddle.net/sFCg3/](http://jsfiddle.net/sFCg3/)

```
jQuery('#autoship_option').val(''); 
```

但是您必须确保在`click`按钮`ready`或文档之类的事件上运行它，例如在 jsfiddle 上。

还要确保选项标签上始终有一个值属性。如果没有，某些浏览器总是在`val()`.

**编辑：**
既然您已经阐明了 Chosen 插件的使用，您必须调用

```
$("#autoship_option").trigger("liszt:updated"); 
```

在更改它的值以更新接口之后。

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-12T06:24:17.757

试试这个以使用最新选择的 JS 重新加载更新的选择框。

```
$("#form_field").trigger("chosen:updated"); 
```

[http://harvesthq.github.io/chosen/](http://harvesthq.github.io/chosen/)

它将使用带有 Ajax 的新加载选择框更新选择的下拉列表。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-06T15:37:54.367

试试这个：

```
$("#autoship_option option[selected]").removeAttr("selected"); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-11-01T12:53:16.587

如果您使用`chosen`的是 jquery 插件，那么要刷新或清除下拉菜单的内容，请使用：

```
$('#dropdown_id').empty().append($('< option>'))

dropdown_id.chosen().trigger("chosen:updated") 
```

`chosen:updated`事件`re-build`本身将基于更新的内容。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-05-12T15:20:41.617

我用这个：

`$('idSelect').val([]);`

在 IE、Safari 和 Firefox 上测试

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-21T13:32:15.393

```
$('#autoship_option').val('').trigger('liszt:updated'); 
```

并将默认选项值设置为`''`.

它必须与此链接上可用的所选更新 jQuery 一起使用：[https](https://raw.github.com/harvesthq/chosen/master/chosen/chosen.jquery.min.js) ://raw.github.com/harvesthq/chosen/master/chosen/chosen.jquery.min.js 。

我花了一整天的时间才发现最后`jquery.min`与`chosen.jquery.min`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-12-18T21:34:01.170

这比 find 更有效。

```
$('select').children('option').first().prop('selected', true)
$('select').trigger("chosen:updated"); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-07-24T03:35:44.010

```
var config = {
      '.chosen-select'           : {},
      '.chosen-select-deselect'  : {allow_single_deselect:true},
      '.chosen-select-no-single' : {disable_search_threshold:10},
      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
      '.chosen-select-width'     : {width:"95%"}
    }
    for (var selector in config) {
      $(selector).chosen(config[selector]);
    } 
```

使用上述配置并申请`class='chosen-select-deselect'`手动取消选择并将值设置为空

或者如果您想在所有组合中取消选择选项，则应用如下配置

```
var config = {
  '.chosen-select'           : {allow_single_deselect:true},//Remove if you do not need X button in combo
  '.chosen-select-deselect'  : {allow_single_deselect:true},
  '.chosen-select-no-single' : {disable_search_threshold:10},
  '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
  '.chosen-select-width'     : {width:"95%"}
}
for (var selector in config) {
  $(selector).chosen(config[selector]);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-06T15:36:32.860

```
jQuery("#autoship_option option:first").attr('selected', true); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-27T11:55:34.170

我不确定这是否适用于旧版本的 selected，但现在在当前版本（v1.4.1）中，他们有一个选项`$('#autoship_option').chosen({ allow_single_deselect:true });`这将在所选名称旁边添加一个“x”图标。使用“x”清除“选择”字段。

PS：确保根据 selected.css 在正确的位置有“chosen-sprite.png”，以便图标可见。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-12-22T17:26:26.487

在 Chrome 版本 49 中

你总是需要这个代码

`$("select option:first").prop('selected', true)`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-07-06T15:35:22.880

我认为您必须为选择分配一个新值，因此如果您想清除您的选择，您可能希望将其分配给具有值 =“”的那个。我认为您可以通过将值分配给空字符串来获得它，因此 .val('')

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-02-22T01:52:28.400

**HTML：**

```
<select id="autoship_option" data-placeholder="Choose Option..." 
        style="width: 175px;" class="chzn-select">
    <option value=""></option>
    <option value="active">Active Autoship</option>
</select>
<button id="rs">Click to reset</button> 
```

**JS：**

```
$('#rs').on('click', function(){
    $('autoship_option').find('option:selected').removeAttr('selected');
}); 
```

小提琴：http: [//jsfiddle.net/Z8nE8/](http://jsfiddle.net/Z8nE8/)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-11-13T10:17:33.310

你可以试试这个重置（空）下拉

```
 $("#autoship_option").click(function(){
            $('#autoship_option').empty(); //remove all child nodes
            var newOption = $('<option value=""></option>');
            $('#autoship_option').append(newOption);
            $('#autoship_option').trigger("chosen:updated");
        }); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-03-17T01:37:04.137

新的 Chosen 库不使用 liszt。我使用了以下内容：

```
document.getElementById('autoship_option').selectedIndex = 0;
$("#autoship_option").trigger("chosen:updated"); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-05-14T17:57:58.630

如果您需要选择第一个选项，无论其值如何（有时第一个选项值不为空），请使用：

```
$('#autoship_option').val($('#autoship_option option:first-child').val()).trigger("liszt:updated"); 
```

它将获得第一个选项的值并将其设置为选中，然后触发选择更新。所以它就像重置为列表中的第一个选项一样工作。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-05-23T18:38:38.393

正是我有同样的要求。但是通过使用 jquery 设置简单的空字符串来重置下拉列表是行不通的。您还应该触发更新。

```
Html:
<select class='chosen-control'>
<option>1<option>
<option>2<option>
<option>3<option>
</select>

Jquery:
$('.chosen-control').val('').trigger('liszt:updated'); 
```

有时根据您使用的所选控件的版本，您可能需要使用以下语法。

```
$('.chosen-control').val('').trigger("chosen:updated"); 
```

参考：[如何重置 Jquery 选择的选择选项](https://wikigurus.com/Article/Show/32498/How-do-I-reset-a-jquery-chosen-select-option-with-jQuery)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-01-18T07:45:20.453

```
jQuery('.chosen-processed').find('.search-choice-close').click(); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-05-22T03:18:24.223

像这样简单的添加触发器更改：

```
$('#selectId').val('').trigger('change'); 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-07-03T12:03:44.987

从上面的解决方案中，没有什么对我有用。这有效：

`$('#client_filter').html(' '); //this worked`

这是为什么？:)

```
$.ajax({ 
        type: 'POST', 
        url: xyz_ajax,
        dataType: "json",
        data : { csrfmiddlewaretoken: csrftoken,
                instancess : selected_instances }, 
        success: function(response) { 
            //clear the client DD       
            $('#client_filter').val('').trigger('change') ; //not working
            $('#client_filter').val('').trigger('chosen:updated') ; //not working
            $('#client_filter').val('').trigger('liszt:updated') ; //not working
             $('#client_filter').html(' '); //this worked
             jQuery.each(response, function(index, item) {
                  $('#client_filter').append('<option value="'+item.id+'">' + item.text + '</option>');
                });                 
           $('#client_filter').trigger("chosen:updated");
        }
      });
     } 
```

# javascript - KnockoutJs：将数据绑定值传递给 javascript 变量/对象

> ID：11365220
> 
> 赞同：1
> 
> 时间：2012-07-06T15:29:47.853
> 
> 标签：javascript, knockout.js

我对knockoutjs有些困惑。我已经阅读了大部分教程，并且对如何使用它有一个大致的了解。我可以很好地操作 UI，但我不明白 KO 如何与 KO 之外的其他 javascript 函数进行通信。

我认为我的目标相当简单明了。我需要用户从一系列单选按钮中选择的单选按钮的值。这就是我所拥有的。

HTML

```
<input type="radio" name="templateStyle" value="DR.php" data-bind="checked: tempStyle">
<input type="radio" name="templateStyle" value="DRH.php" data-bind="checked: tempStyle">
<input type="radio" name="templateStyle" value="PS.php" data-bind="checked: tempStyle">

<p>The template style selected is <span data-bind="text: selectedStyle"></span></p>

<button id="submitTemplate">Submit Template</button> 
```

JS

```
var radioValue = { rv: "" };

function viewModel() {
    var self = this;

    self.tempStyle = ko.observable("DR.php");
    self.selectedStyle = ko.computed(function() {
            return self.tempStyle();
    },
        self
    );

    return self.selectedStyle();
}
ko.applyBindings(new viewModel());

$("#submitTemplate").click(function() {
    radioValue.rv = viewModel();

    console.log(radioValue.rv); 
}); 
```

这在 UI 端可以正常工作，但`radioValue.rv`对象只保留在“DR.php”中。如何更新它以反映`data-bind="text: selectedStyle"`价值？

我试过变体，`radioValue.rv = ko.toJS(viewModel())`但这没有用。

如果这是完全错误的，我如何获得 templateStyle 单选按钮的值？所以我可以在我的javascript的其他方面使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:48:27.157

**我没有编辑我原来的问题，因为它显示了我的错误。**

我不敢相信我花了 2 天时间和一个 SO 问题来解决这个问题，但就是这样。

HTML

```
<input type="radio" name="templateStyle" value="DR.php" data-bind="checked: tempStyle">
<input type="radio" name="templateStyle" value="DRH.php" data-bind="checked: tempStyle">
<input type="radio" name="templateStyle" value="PS.php" data-bind="checked: tempStyle">

<p>The template style selected is <span data-bind="text: selectedStyle"></span></p>

<button id="submitTemplate" data-bind="click: submitTemplate">Submit Template</button> 
```

JS

```
var radioValue = { rv: "" };

function viewModel() {
    var self = this;

    self.tempStyle = ko.observable("DR.php"); // Set default selected radio button

    self.selectedStyle = ko.computed(function() {
            return self.tempStyle(); // Update viewModel to reflect user input
        },
        self
    );

    self.submitTemplate = function() {
        radioValue.rv = self.tempStyle(); // Return user input on button click

        console.log(radioValue.rv); // JS object can now be used anywhere
    };

}
ko.applyBindings(new viewModel()); 
```

基本上，我试图在`viewModel`早期工作之外。

我现在看到了曙光，明白了为什么淘汰赛这么好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:42:54.917

我的淘汰赛有点模糊，但我希望这会有所帮助。你什么时候这样做：

```
return self.tempStyle(); 
```

它正在调用 tempStyle。tempStyle 是`ko.observable("DR.php")`，所以实际返回的是 ，也就是说`ko.observable("DR.php")()`，它获取的是 observable 的值，而不是 observable 本身。

尝试删除括号：

```
return self.tempStyle; 
```

这样，radioValue.rv 将被分配给可观察对象本身，而不是可观察对象的值。

# c# - Perft 测试结果 - 找不到错误？

> ID：11365221
> 
> 赞同：2
> 
> 时间：2012-07-06T15:29:48.730
> 
> 标签：c#, algorithm, chess, minimax

我现在为我糟糕的英语道歉，我是意大利人。

我正在用 C#、Player vs Player 和 Player vs Computer 编写一个国际象棋游戏的完整实现，现在我在实现 NegaMax 算法时遇到了一些困难。对于有兴趣的人，这是我的 github 存储库：[https ://github.com/crybot/ChessEngine_NOGUI/tree/master/Chess%20Engine%20-%20NOGUI](https://github.com/crybot/ChessEngine_NOGUI/tree/master/Chess%20Engine%20-%20NOGUI)

我试图让这个项目尽可能地面向对象，所以，如果你认为我的设计不正确，请告诉我:)

这是我的问题：

我实现了一个非常简单的评估函数，它对所有玩家对称地工作：

```
public static float Evaluate(PieceColor playerColor, Game game)
{
    float score = 0;

    score += 1 * (game.board.GetNumberOfPieces(PieceType.Pawn, playerColor)
    - game.board.GetNumberOfPieces(PieceType.Pawn, playerColor.GetOpposite()));

    score += 3 * (game.board.GetNumberOfPieces(PieceType.Bishop, playerColor)
    - game.board.GetNumberOfPieces(PieceType.Bishop, playerColor.GetOpposite()));

    score += 3 * (game.board.GetNumberOfPieces(PieceType.Knight, playerColor)
    - game.board.GetNumberOfPieces(PieceType.Knight, playerColor.GetOpposite()));

    score += 5 * (game.board.GetNumberOfPieces(PieceType.Rook, playerColor)
    - game.board.GetNumberOfPieces(PieceType.Rook, playerColor.GetOpposite()));

    score += 9 * (game.board.GetNumberOfPieces(PieceType.Queen, playerColor)
    - game.board.GetNumberOfPieces(PieceType.Queen, playerColor.GetOpposite()));

    score += 0.1f * (game.GetPlayer(playerColor).GetMoves(game).Count);

    return score;
} 
```

这是我的 NegaMax 函数，它接受一个游戏参数（包括棋盘、玩家、ecc.ecc。）、由枚举提供的 playerColor 和深度搜索；

我首先扫描了 EnginePlayer 的所有可能动作，然后我从 NegaMax 函数中得到了他们的分数，但是有些东西不起作用......

```
private float NegaMax(Game game, PieceColor playerColor, int depth)
{
    if (depth == 0) 
    return EvaluateMove(playerColor, game);

    float max = float.MinValue;
    float score;

    foreach (Move move in game.GetPlayer(playerColor.GetOpposite()).GetMoves(game))
    {
        game.board.SimulateMove(move);
        score = Math.Max(max, -NegaMax(game, playerColor.GetOpposite(), depth - 1));

        game.board.CancelMove(move);

        if (score > max)
          max = score;
    }

    return max;
}

public Move ThinkMove(Game game, PieceColor playerColor, int depth)
{

    Move bestMove = new NullMove();
    float bestScore = float.MinValue;
    float temp = 0;

    foreach (Move move in GetMoves(game))
    {
        game.board.SimulateMove(move);
        temp = NegaMax(game, playerColor, depth);
        game.board.CancelMove(move);

        if (temp > bestScore)
        {
            if (Judge.IsLegal(move, game))
            {
                 bestMove = move;
                 bestScore = temp;
            }
        }
    }

    if (bestMove is NullMove)
    throw new NotImplementedException();
    return bestMove;
} 
```

我想这就是全部......我希望你会发现我做错了什么:)谢谢。

**编辑：** 我实现了一个 Perft，它显示了移动生成器的不正确性。它帮助找到了一些相对容易找到的错误，但最后一些结果仍然是错误的。结果如下：

```
Perft Depth: 1
Nodes: 20  Captures: 0  Checks: 0  Castles: 0  Mates: 0  EnPassant: 0

Perft Depth: 2
Nodes: 400  Captures: 0  Checks: 0  Castles: 0  Mates: 0  EnPassant: 0

Perft Depth: 3
Nodes: 8902  Captures: 34  Checks: 12  Castles: 0  Mates: 0  EnPassant: 0

Perft Depth: 4
Nodes: 197281  Captures: 1610  Checks: 473  Castles: 0  Mates: 8  EnPassant: 0 
```

这是正确的结果：[https ://chessprogramming.wikispaces.com/Perft+Results](https://chessprogramming.wikispaces.com/Perft+Results)

如您所见，在深度 4，我得到了正确的节点分析，但不正确的捕获和检查值（而配合是正确的）。

由于这些结果，我试图通过在深度 4 处划分每次移动分析的节点来隔离错误，得到这些结果：

```
Move    Nodes
a2a3    8457
a2a4    9329
b2b3    9345
b2b4    9332
c2c3    9272
c2c4    9744
d2d3    11959
d2d4    12435
e2e3    13134
e2e4    13160
f2f3    8457
f2f4    8929
g2g3    9345
g2g4    9328
h2h3    8457
h2h4    9329
b1a3    8885
b1c3    9755
g1f3    9748
g1h3    8881
Total Nodes: 197281 
```

**并与从 Sharper 获得的那些结果进行比较：**

```
 Sharper v0.17 by Albert Bertilsson
 divide 4
 b1c3 9755
 b1a3 8885
 g1h3 8881
 g1f3 9748
 a2a3 8457
 a2a4 9329
 b2b3 9345
 b2b4 9332
 c2c3 9272
 c2c4 9744
 d2d3 11959
 d2d4 12435
 e2e3 13134
 e2e4 13160
 f2f3 8457
 f2f4 8929
 g2g3 9345
 g2g4 9328
 h2h3 8457
 h2h4 9329
 Nodes: 197281
 Moves: 20 
```

但即使在这里，这些值也是正确的......所以我尝试了深度 5 perft 以获得这些结果：

```
Move    Nodes
a2a3    181046
a2a4    217813
b2b3    215255
b2b4    216110
c2c3    222861
c2c4    240044
d2d3    328511
d2d4    361753
e2e3    402988
e2e4    405348
f2f3    178891
f2f4    198437
g2g3    217210
g2g4    214017
h2h3    181044
h2h4    218810
b1a3    198572
b1c3    234656
g1f3    233491
g1h3    198502
Total Nodes: 4865359 
```

然后与Sharper的结果进行比较：

```
 Sharper v0.17 by Albert Bertilsson
 divide 5
 b1c3 234656
 b1a3 198572
 g1h3 198502
 g1f3 233491
 a2a3 181046
 a2a4 217832
 b2b3 215255
 b2b4 216145
 c2c3 222861
 c2c4 240082
 d2d3 328511
 d2d4 361790
 e2e3 402988
 e2e4 405385
 f2f3 178889
 f2f4 198473
 g2g3 217210
 g2g4 214048
 h2h3 181044
 h2h4 218829
 Nodes: 4865609
 Moves: 20 
```

所以我意识到问题是由棋子的两次推动产生的动作引起的......但我真的找不到这个错误...... **有没有人有同样的问题？** 或类似的东西，或者只是提示找到那个错误......

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:44:04.870

你应该首先**确保**移动生成是一致[的，看看这里如何](http://www.felicepollano.com/2011/11/26/MyCChessEngineOnBitBucket.aspx)。这被称为 perft 测试。另一个奇怪的事情是我在你的算法中看不到“队友”受到威胁：**当根本没有任何动作并且国王被俘虏时，你应该返回一个非常糟糕的值**（否则就是一个立场）。然后你应该采取一些策略来对移动进行排序，以便从 negamax 算法中受益，然后是一些“水平”策略（也就是说，如果在 depth== 0 时仍有捕获会发生什么？）。如果您在移动生成方面遇到问题，请尝试用一些更有趣的位置来挑战您的引擎，[例如看看这里](http://www.rocechess.ch/perft.html)，或者如果您想要更难的东西，[这是我用来测试我的引擎的文件](https://bitbucket.org/Felice_Pollano/felpo-ii/src/5d10a59cdc8c/FelpoIITest/Perft/perftsuite.epd). 它由许多行组成，其中包含 FEN 格式的位置，然后是以下格式的深度移动计数：

```
D1 50; D2 279 
```

这意味着（例如）50 在深度 1 移动，279 在深度 2 移动

我提出的职位来自我对护目镜的旧研究，关于挑战职位。您需要能够[支持 FEN 表示法](http://en.wikipedia.org/wiki/Forsyth%E2%80%93Edwards_Notation)，如果您还没有我强烈建议您实施，因为它是在国际象棋引擎（而不仅仅是）世界中交流位置的“事实上的”标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T05:12:39.110

你想通了吗？我遇到了同样的问题。说同样的话，我的意思是我在初始位置获得了 perft(4) 的 1610 次捕获。

而且，[这](http://www.open-chess.org/viewtopic.php?f=5&t=2238)家伙似乎也有同样的问题。

我非常仔细地检查了代码（并用幼稚的替代方案替换了一些复杂的代码），但没有发现任何错误。毕竟，总移动计数是正确的，不是吗？

然后我意识到：1610 = 1576 + 34。这只是一个例子，我检查了其余的 perft 结果，并确定这是问题所在。

这些“标准” perft 结果表中的捕获计数仅捕获深度等于 0 的叶节点，包括经过的捕获。

# email - VBA 中的节流

> ID：11365223
> 
> 赞同：4
> 
> 时间：2012-07-06T15:30:03.317
> 
> 标签：email, vba, throttling, exchange-server-2010

**背后的故事**

不久前，有人问我是否可以在内部实施群发电子邮件解决方案，以便更好地控制敏感信息。我提出了一个两步计划：在 Excel/VBA/CDO 中开发原型以使用户熟悉，然后分阶段使用 .Net/SQL 服务器解决方案以提高速度和稳健性。

**发生了什么变化**

进入第二阶段 3 个月后，管理层决定继续将电子邮件营销外包给另一家公司，这很好。第一个问题是管理层还没有采取行动让一家公司通过，所以我仍然有义务让当前的原型工作。

尽管如此，原型仍然有效，或者至少它确实有效。第二个问题出现在我们的 Exchange 2003 中继服务器与 Exchange 2010 切换时。事实证明，默认情况下会启用更多“安全”功能，例如节流策略，我一直在帮助系统管理员解决有效的服务器配置。发生的事情是发送 +100 封电子邮件后，服务器开始拒绝发送请求，并出现以下错误：

```
The message could not be sent to the SMTP server. The transport error code is 0x800ccc67\. 
The server response was 421 4.3.2 The maximum number of concurrent connections has exceeded a limit, closing transmission channel 
```

不幸的是，我们只有在 Marketing 有东西要发送时才能测试服务器配置，大约每月一次。

**下一步是什么？**

我正在查看 Excel 的 VBA 计时器功能，以帮助限制我的主循环泵以帮助限制发送请求。根据我的阅读理解，这里的第三个问题是，我能获得的最佳精度是计时器上的 1 秒。与我们一直发送的 5 封电子邮件/秒相比，每秒 1 封电子邮件会更长（大约长 4 到 5 倍）。这将 3 小时的流程变成了超过员工可用时间的全天流程。我想我可以通过每经过一秒发送 5 封电子邮件来反转速率，但是如果计时器的精度更高，则会产生更多的突发影响，而不是稳定的速率。在我看来，这会创建一个控制较少的过程，我不确定服务器将如何处理突发而不是稳定的速率。 **我有哪些选择？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T15:46:24.963

如果您需要更精细的计时器控制，可以使用 windows sleep API。它的单位为毫秒：

```
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Public Sub Testing()

'do something
Sleep(1000) 'sleep for 1 second
'continue doing something

End Sub 
```

我对 Exchange 不是很熟悉，因此无法对现有的限制政策发表评论。

# android - 为华为 U8818 设备编译 android ICS 时出现 wpa-supplicant 错误

> ID：11365225
> 
> 赞同：1
> 
> 时间：2012-07-06T15:30:05.717
> 
> 标签：android, android-source, android-4.0-ice-cream-sandwich

*   我成功编译了android ICS源代码并能够在模拟器上运行。在这个里程碑之后，我计划在华为设备上刷它。

    *   我从链接[https://github.com/Dazzozo/android_device_huawei_u8818](https://github.com/Dazzozo/android_device_huawei_u8818.But)下载了设备配置。但是当我执行命令**make -j4**时，我收到以下提到的错误。

    **`make: *** No rule to make target`out/target/product/u8818/obj/STATIC_LIBRARIES/lib_driver_cmd_wext_intermediates/lib_driver_cmd_wext.a'，需要`out/target/product/u8818/obj/EXECUTABLES/wpa_supplicant_intermediates/LINKED/wpa_supplicant'. Stop.`**

我在谷歌上搜索了将近 15 天。发布在各种论坛和群组上，包括 xda-developers、android-porting 等，但没有帮助。请有人建议我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:54:46.517

下载这个并将wifi目录复制到您的设备目录（设备/品牌/设备名称/）

[https://dl.dropbox.com/s/bxxfatctb879799/wifi.tar.gz?dl=1](https://dl.dropbox.com/s/bxxfatctb879799/wifi.tar.gz?dl=1)

它为我解决了问题...

:)

# android - 如何在Android上检测蓝牙版本？

> ID：11365227
> 
> 赞同：1
> 
> 时间：2012-07-06T15:30:07.430
> 
> 标签：android, bluetooth-lowenergy

我目前正在开发 BLE 应用程序，我想过滤发现的设备并在列表中只保留 BLE 兼容的设备。

使用 Broadcom API 很容易确定设备是否为 BLE。不幸的是，DROID RAZR 不提供 Broadcom 库，所以我不得不使用摩托罗拉 BLE 库......毫无疑问，他们没有检查蓝牙版本的方法。

我阅读了所有可能的原生 Android 蓝牙类，但没有找到与我相关的信息（我找到了类别 - 电脑、智能手机等，但没有版本。）

有谁知道如何检查扫描设备的蓝牙版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-08T16:38:02.793

当你发现设备时，如果你能得到蓝牙设备的 android.bluetooth.BluetoothDevice ，也许你可以使用 Android 官方的 Api BluetoothDevice.getType() 来过滤经典或 ble 设备。

```
/**
 * Get the Bluetooth device type of the remote device.
 *
 * <p>Requires {@link android.Manifest.permission#BLUETOOTH}
 *
 * @return the device type {@link #DEVICE_TYPE_CLASSIC}, {@link #DEVICE_TYPE_LE}
 *                         {@link #DEVICE_TYPE_DUAL}.
 *         {@link #DEVICE_TYPE_UNKNOWN} if it's not available
 */
public int getType() {
    if (sService == null) {
        Log.e(TAG, "BT not enabled. Cannot get Remote Device type");
        return DEVICE_TYPE_UNKNOWN;
    }
    try {
        return sService.getRemoteType(this);
    } catch (RemoteException e) {Log.e(TAG, "", e);}
    return DEVICE_TYPE_UNKNOWN;
} 
```

# ddl - SQL Server 2012

> ID：11365228
> 
> 赞同：5
> 
> 时间：2012-07-06T15:30:12.070
> 
> 标签：ddl

有没有办法为 SQL Server 2012 导出 DDL？

2009 年 12 月回答了此类性质的先前问题，但似乎并不适用，先前的答案：对于 SQL Server：

在 SQL Server Management Studio 中，右键单击您的数据库并选择“任务”->“生成脚本”。

您将被要求选择要包含在脚本中的 DDL 对象。链接已于 2009 年 12 月 19 日 8:58 编辑

Daniel Vassallo 78.6k11129180 于 2009 年 12 月 18 日 18:53 回答

我已经尝试过这个建议，但是在我的数据库上右键单击后，这些是没有这样的“任务”选项。

有任何想法吗？

2012 Analysis Services 只有一个部署向导。我没有部署，只是想记录。我检查了数据质量服务、集成服务、性能工具，但没有看到任何我认识的东西。

在过去的几年里，我一直在使用 SQL Devloper for Oracel，但我似乎记得 ACCESS 和 SQL Server 管理在工具菜单上有一个数据导出。它允许您选择要导出的内容，包括 DDl，有或没有数据。

我想做类似的事情 - 包括我所有的表格，但没有数据。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T04:13:53.593

我假设您想从 SQL Server 2012 实例上的特定数据库编写 DDL 脚本。为此，您单击 SSMS 中感兴趣的数据库，然后右键单击，然后将鼠标悬停在“任务 >”上，然后上下左右单击“生成脚本”。这将打开向导，如下面的三个屏幕截图所示。提示：请务必查看“高级”选项卡上的脚本选项。

![生成脚本 - 1](../Images/2a6d143789b21a030bac91417957c034.png)

![选择选项对话框](../Images/e9938afc0d78a413343c293edc3a81e9.png)

![脚本选项对话框](../Images/f20825591d98ca9a064ae11576d05f6b.png)

# gcc - 弱属性是否仅适用于 Linux GCC 中的共享库？

> ID：11365230
> 
> 赞同：2
> 
> 时间：2012-07-06T15:30:17.577
> 
> 标签：gcc, shared-libraries, weak-linking

我是 Linux gcc 的新手。我正在编写一个简单的代码来学习 Linux gcc 中的弱属性。

查看我的示例代码：

weakref.c，主文件。我希望文件可以在定义或不定义 foo 方法的情况下工作。

```
#include <stdio.h>
extern void foo(void) __attribute__((weak));

int main() {
  if (foo){
    foo();
    printf ("foo is defined\n");
  } else {
    printf("foo is not defined\n");
  }
} 
```

所以，我运行以下命令来编译它并运行它：

```
gcc weakref.c -o main_static
./main_static 
```

并且输出是“foo is not defined”，这是我所期望的。

然后我创建了一个新文件 libfoo.c，见下图：

```
#include <stdio.h>

void  foo() {
  printf("Print in foo.\n");
} 
```

我尝试了 3 种方法来尝试使主文件与 libfoo.c 一起使用：

1.  编译 libfoo.c 和 weakref.c 并链接目标文件。
2.  将libfoo.c编译为静态库，并与weakref.c的目标文件链接
3.  将libfoo.c编译为共享库，并与weakref.c的目标文件链接

只有第三种方式有效并获得以下输出：

```
Print in foo.
foo is defined 
```

您能否让我知道弱引用是否仅适用于共享库，为什么？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:51:27.017

> 让我知道弱引用是否仅适用于共享库

一点也不。

1\. 和 3\. 都应该产生“foo is defined”。

2.预计*不会*`libfoo.o`从 中拉取`libfoo.a`，因为从归档库中拉取对象时，未解析的弱引用 from`weakref.o`不算作未解析的符号。但是，您可以像这样*强制* `libfoo.o`被拉入链接：`gcc weakref.o -lfoo -ufoo`，然后您应该再次获得“foo is defined”。

既然我已经说明了*应该*发生的事情，让我们看看实践是否同意。来自 Linux/x86_64 系统的脚本，使用`gcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3`and `GNU ld (GNU Binutils for Ubuntu) 2.20.1-system.20100303`：

```
$ gcc -c weakref.c libfoo.c
$ ar ruv libfoo.a libfoo.o
ar: creating libfoo.a
a - libfoo.o
$ gcc weakref.o && ./a.out
foo is not defined 
```

这是你的#1：

```
$ gcc weakref.o libfoo.o && ./a.out
Print in foo.
foo is defined 
```

如您所见，＃1“有效”，正如我所料，而不是您声称的那样。你一定在某个地方犯了一些错误。

这是你的#2：

```
$ gcc weakref.o -L. -lfoo && ./a.out
foo is not defined 
```

您的 #2 再次，但强制将 libfoo.o 拉入链接：

```
$ gcc weakref.o -L. -lfoo -ufoo && ./a.out
Print in foo.
foo is defined 
```

# zend-framework - PDO_Mysql 适配器 - 数据类型比较（相同比较）

> ID：11365231
> 
> 赞同：1
> 
> 时间：2012-07-06T15:30:22.937
> 
> 标签：zend-framework, pdo, comparison

当我将 PDO_Mysql 适配器与 Zend 一起使用时，我遇到了一些问题。

应用程序.ini

```
resources.db.adapter = mysqli
resources.db.host = localhost
resources.db.dbname = myproject
resources.db.username = root
resources.db.password = 123456
resources.db.profiler.enabled = true
resources.db.profiler.class = "Zend_Db_Profiler_Firebug" 
```

bootstrap.php 中的数据库初始化

```
$database = $config['resources']['db'];
$db = Zend_Db::factory($database['adapter'], $database);
$db->setFetchMode(Zend_Db::FETCH_OBJ);
$db->query("SET NAMES 'utf8';");
$db->query("SET CHARACTER SET 'utf8';");

Zend_Db_Table::setDefaultAdapter($db);
Zend_Registry::getInstance()->set('db', $db);

return $db; 
```

好的，当我做一个简单的 fetchAll() 并检查循环时：

```
foreach ($rows as $row) {
    if ($row->id === 1) {
        echo 'first id';
    } else {
        echo 'other rows';
    }
} 
```

表中存在一行“ID”=“1”（整数），但是，出于任何原因......当我使用 PDO_Mysql 时，我无法进行数据类型比较（“===”或“！==”），但如果我使用“Mysqli”适配器工作正常。

使用 PDO_Mysql 适配器，每一行的每一列都是“字符串”（当我检查 var_dump 时）。

有人知道原因吗？

谢谢。

# android - Android Canvas -- 绘制一个矩形或矩形的图片

> ID：11365234
> 
> 赞同：3
> 
> 时间：2012-07-06T15:30:32.630
> 
> 标签：android, performance, canvas

如果您总是必须绘制相同的矩形，使用静态位图或使用 canvas.drawRect() 会更快吗？

对于此示例，它们是四个分层的矩形。所以有一个填充颜色的边界，然后是中间颜色和填充颜色之间的边界。

所以四个paint.setColor() 命令和四个canvas.drawRect 命令或一个canvas.drawBitmap()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:37:50.250

我强烈推荐`drawRect()`。

位图占用大量内存，`Out Of Memory`如果使用不当可能会导致异常。

安卓写的：

> 位图占用大量内存，尤其是对于照片等丰富的图像。例如，Galaxy Nexus 上的相机可拍摄高达 2592x1936 像素（5 兆像素）的照片。如果使用的位图配置是 ARGB_8888（Android 2.3 及更高版本的默认配置），则将此图像加载到内存中大约需要 19MB 内存（2592*1936*4 字节），**立即耗尽某些设备上的每个应用程序限制**。

防止头痛和意外崩溃。利用`drawRect();`

如果您定期为不同的对象进行这 4 次绘制，请考虑编写一个为您完成所有 4 次绘制的方法。因此，您不会造成大量重复。

例如：

```
public void DrawMyRect(Canvas canvas, int x, int y)
{
   canvas.drawRect(x, y ,x + 15, y + 40, paint);
   // Draw its line etc etc..
 } 
```

或者，如果您确实要绘制位图，因为它确实具有以下优点：

[**请参阅 Android 的此史诗链接，了解如何正确使用位图**](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:38:15.697

性能差异可能可以忽略不计。位图将使用更多内存，画布绘制调用将使用稍微更多的 CPU。如果您想减少调用而不需要位图的开销，您可能可以使用[ShapeDrawable 。](http://developer.android.com/guide/topics/graphics/2d-graphics.html#shape-drawable)

# c++ - 将 std::vector 扩展为具有 NULL 对象的动态数组

> ID：11365235
> 
> 赞同：0
> 
> 时间：2012-07-06T15:30:33.100
> 
> 标签：c++, stdvector, derived-class

正如标题所说，如果我删除一个元素，我会尝试以这种方式扩展 std::vector 类，位置的值不会*被删除*，但实际上设置为 NULL（提供间隙）。

```
template<typename T>
class FVector : public std::vector<T> {
    typedef std::vector<T> Base;

protected:
    /** The number of elements in the vector */
    size_t elementCount;

    /**
     * The index of the last element. This field is actually vector's length. 
     * For example when you have a vector like this ["a","b","c"] then the 
     * elementCount would be 3 and lastIndex would be 2 (because indexes are 
     * zero-based). But if you erased two first elements, 
     * leaving [null, null, "c" ] then elementCount=1 (because there is only 
     * one element in the vector!) however lastIndex would still remain 2\. 
     * After you erase "c" lastIndex would be set to -1 (so it's enough to 
     * add 1 to lastIndex to determine vector's length.
     */
    int lastIndex;

private:
    /**
     * Returns the index of the last not-null element in the vector, 
     * starting from position position downwards.
     *
     * @param position the position from which counting is to be begun.
     * @return last element before (or on) index <code>position</code>
     */
    int FindLastIndex(int position) {
        int nLastItem = position;

        if (position < 0) {
            return -1;
        }

        for (; nLastItem >= 0; nLastItem--) {
            if (Base::operator[](nLastItem) != NULL) {
                break;
            }
        }

        return (nLastItem);
    }

public:

    FVector(const T & value = T())
    : elementCount(0), lastIndex(-1) {
    }

    FVector(int initialCapacity, const T & value = T())
    : elementCount(0), lastIndex(-1),
      std::vector<T>(initialCapacity, value) {
    }

    size_t Capacity() const {
        return Base::size();
    }

    size_t Size() const {
        return elementCount;
    }

    int LastIndex() const {
        return lastIndex;
    }

    void AddElement(const T& obj) {
        Base::push_back(obj);

        elementCount++;
        lastIndex++;
    }

    T & ElementAt(int index) {
        if (index > lastIndex) {
            // error
        }

        return Base::at(index);
    }
    void EraseElementAt(int index) throw() {
        if (index > lastIndex) {
            std::stringstream ss;
            ss << index << " > " << lastIndex;
            throw ArrayIndexOutOfBoundsException(ss.str());
        }

        if (Base::operator[](index) != NULL) {
            elementCount--;
            T v = Base::at(index);
            delete v;
            Base::at(index) = NULL;

            if (index == lastIndex) {
                lastIndex = FindLastIndex(lastIndex - 1);
            }
        }
    }
}; 
```

它不像我预期的那样工作。当我在元素上调用 erase() 方法时，该元素未设置为 NULL。

例如：

```
class Int {
    int i;
public:
     Int(int v): i(v) { };
     ~Int() { }
};

//... 

FVector<Int *> * v = new FVector<Int *>();

v->AddElement(new Int(1));
v->AddElement(new Int(3));
v->AddElement(new Int(5));
v->EraseElementAt(0);
v->EraseElementAt(2);

// ...

delete v; 
```

将导致

**[空，3]**

但我希望它是

**[空，3，空]**

好吧，我不知道这是否可能是我试图实现的目标。我认为采用 std::vector 类，它是一个动态数组（那么我为什么要编写自己的数组类）为我提供了实现此类东西所需的所有基础知识。

任何人都可以对此有所了解，我想我在这里有一些实施问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:39:54.820

在你的 EraseElementAt 你有这个：

```
 if (index == lastIndex) {
            lastIndex = FindLastIndex(lastIndex - 1);
        } 
```

如果您碰巧擦除了向量中的最后一个元素（您这样做了），它将缩短向量（递减 lastIndex）。似乎您希望您的向量不这样做 - 而是您希望向量为空但不缩短。也许只是把这个拿出来。

# javascript - 如何在 three.js 中使用反射？

> ID：11365236
> 
> 赞同：8
> 
> 时间：2012-07-06T15:30:40.597
> 
> 标签：javascript, webgl, three.js

我想在带有 Three.js 的 WebGL 页面中有一个反射立方体表面。它应该像一个手机显示屏，反射一些光，但它仍然必须是黑色的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-06T17:22:42.287

我创建了一个带有详细注释的反射立方体（以及反射球）示例。现场版在

[http://stemkoski.github.com/Three.js/Reflection.html](http://stemkoski.github.com/Three.js/Reflection.html)

带有格式良好的代码

[https://github.com/stemkoski/stemkoski.github.com/blob/master/Three.js/Reflection.html](https://github.com/stemkoski/stemkoski.github.com/blob/master/Three.js/Reflection.html)

（这是[http://stemkoski.github.com/Three.js/](http://stemkoski.github.com/Three.js/)上的教程示例集合的一部分）

要点是：

*   在您的场景中添加第二个相机（CubeCamera），该相机位于表面应该是反射的物体上
*   创建一个材质并将环境贴图设置为第二个摄像机的渲染结果，例如

例如：

```
 var mirrorCubeMaterial = new THREE.MeshBasicMaterial( 
    { envMap: mirrorCubeCamera.renderTarget } ); 
```

*   在您的渲染功能中，您必须从所有相机进行渲染。暂时隐藏正在反射的对象（这样它就不会妨碍您要使用的相机），从该相机进行渲染，然后取消隐藏反射对象。

例如：

```
mirrorCube.visible = false;
mirrorCubeCamera.updateCubeMap( renderer, scene );
mirrorCube.visible = true; 
```

这些代码片段来自我上面发布的链接；去看一下！

# c# - 注销数据源并删除关联的 CSV 文件

> ID：11365242
> 
> 赞同：0
> 
> 时间：2012-07-06T15:31:36.337
> 
> 标签：c#, openoffice.org, openoffice-writer

我正在自动化使用 CSV 文件的邮件合并过程。此过程的一部分需要创建一个数据库（OpenOffice odb 文件），然后将其注册为数据源。当我来删除数据库时，我收到一个异常，指出“无法删除您的文件：它正在被其他人或程序使用”。问题是我无法让 OpenOffice 进程释放此资源（不杀死它）。我目前的代码是：

```
public string DeleteDatasource(string datasourceName)
    {
        string result = string.Empty;
        object databaseContext = _MultiServiceFactory.createInstance("com.sun.star.sdb.DatabaseContext");;
        try
        {
            XDatabaseRegistrations databaseRegistrations = (XDatabaseRegistrations)databaseContext;
            if(databaseRegistrations.hasRegisteredDatabase(datasourceName))
            {
                /*  //attempt one
                XNameAccess nameAccess = (XNameAccess)OODatabaseContext;
                object datasource = nameAccess.getByName(datasourceName);
                XNamingService namingservice = (XNamingService)OODatabaseContext;
                namingservice.revokeObject(datasourceName);
                */

                //attempt 2
                string databaseLocation = databaseRegistrations.getDatabaseLocation(datasourceName);
                databaseRegistrations.revokeDatabaseLocation(datasourceName);

                if (!String.IsNullOrEmpty(databaseLocation))
                    try
                    {                             
                        //As File Path converts the uno file string into a standard form i.e. "file:///c:/temp/DatabaseFile.odb" to "c:\\temp\\DatabaseFile.odb"
                        File.Delete(databaseLocation.AsFilepath());                                 
                    }
                    catch (System.Exception ex)
                    { 
                        //some error handling
                    }
            }
            return result;
        }
        catch (System.Exception ex)
        {
            //More error handling
        }
    } 
```

任何想法如何取消注册此数据源，以便我可以删除 odb。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:53:43.377

设法解决了这个问题，以防万一其他人对此感兴趣。
关键是获取对实际数据源的引用，然后将其处理掉。

基本步骤是：

1.  检查是否存在具有指定名称的数据源
2.  获取数据源对象
3.  获取数据源文件名
4.  处置与数据源关联的数据库文档
5.  处理实际的数据源
6.  删除数据库文件:)

这个的源代码看起来像

```
XNameAccess nameAccess = (XNameAccess)_MultiServiceFactory.createInstance("com.sun.star.sdb.DatabaseContext");
object datasource = nameAccess.getByName(datasourceName);
XDocumentDataSource obj = (XDocumentDataSource)((Any)datasource).Value;
//get the location of the associated odb file before we dispose the document object
//and deregister the datasource
string databaseLocation = databaseRegistrations.getDatabaseLocation(datasourceName);
databaseRegistrations.revokeDatabaseLocation(datasourceName);
((XComponent)obj.DatabaseDocument).dispose();
((XComponent)obj).dispose();

//put in a try block as we want to continue even if this fails
//AsFilepath converts the OpenOffice file path to standard for that can be used with the standard IO file access classes
File.Delete(databaseLocation.AsFilepath()); 
```

如果有任何改进请告诉我...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T03:08:30.067

单击查看，单击数据源，右键单击要删除的已注册数据库，单击已注册数据库，单击要删除的突出显示的已注册数据库的删除。

# python - Python：如何评估列表中每个项目的一部分，并附加匹配的结果？

> ID：11365252
> 
> 赞同：1
> 
> 时间：2012-07-06T15:32:16.063
> 
> 标签：python, list

**问题：**

*   尝试评估列表中每个项目的前 4 个字符。
*   如果前 4 个字符与列表中的另一个前 4 个字符匹配，则将最后三个数字附加到前四个数字。请参见下面的示例。

**笔记：**

*   列表值不是硬编码的。
*   该列表始​​终具有这种结构“####.###”。
*   只需要匹配每个列表项中的前 4 个字符。
*   顺序不是必需的。

**代码：**

```
Grid = ["094G.016", "094G.019", "194P.005", "194P.015", "093T.021", "093T.102", "094G.032"] 
```

**期望的输出：**

```
Grid = ["094G.016\019\032", "194P.005\015", "093T.021\102"] 
```

**研究：**

*   我知道集合可以找到重复项，我可以使用集合仅评估第一个 4 个字符吗，由于无法对集合进行索引，我会遇到问题吗？

*   将列表项分成两部分会更好吗？句点前的四位数字（“094G”）和句点后的三位数字（“093”）的单独列表，比较它们，然后将它们加入一个新列表？

*   有没有更好的方法来一起做这一切，我没有意识到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:43:28.950

这是一种直接的方法。

```
from collections import defaultdict

grid = ['094G.016', '094G.019', '194P.005', '194P.015', '093T.021', '093T.102', '094G.032']
d = defaultdict(list)

for item in grid:
    k,v = item.split('.')
    d[k].append(v)

result = ['%s.%s' % (k, '/'.join(v)) for k, v in d.items()] 
```

给出无序`result`：

```
['093T.021/102', '194P.005/015', '094G.016/019/032'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:44:40.300

您最可能需要的是将每个代码的第一部分映射到第二部分列表的字典。您可以像这样构建字典：

```
mappings = {}    #Empty dictionary
for code in Grid:  #Loop over each code
    first, second = code.split('.')   #Separate the code into first.second
    if first in mappings:     #if the first was already found
        mappings[first].append(second)  #add the second to those already computed
    else:
        mappings[first] = [second]   #otherwise, put it in a new list 
```

一旦你有了字典，循环它并将第二部分组合在一起将非常简单（理想情况下，使用`'\\'.join`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:46:22.950

听起来像是一份工作`defaultdict`。

```
from containers import defaultdict

grid = ["094G.016", "094G.019", "194P.005", "194P.015", "093T.021", "093T.102"]
d = defaultdict(set)

for item in grid:
    prefix, suffix = item.split(".")
    d[prefix].add(suffix)

output = [ "%s.%s" % (prefix, "/".join(d[prefix]), ) for prefix in d ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:04:35.803

```
>>> from itertools import groupby
>>> Grid = ["094G.016", "094G.019", "194P.005", "194P.015", "093T.021", "093T.102", "094G.032"]
>>> Grid = sorted(Grid, key=lambda x:x.split(".")[0])
>>> gen = ((k, g) for k, g in groupby(Grid, key=lambda x:x.split(".")[0]))
>>> gen = ((k,[x.split(".") for x in g]) for k, g in gen)
>>> gen = list((k + '.' + '/'.join(x[1] for x in g) for k, g in gen))
>>> for x in gen:
...     print(x)
...
093T.021/102
094G.016/019/032
194P.005/015 
```

# ruby-on-rails - Rails validates_uniqueness_of 带有 :conditions 参数

> ID：11365255
> 
> 赞同：1
> 
> 时间：2012-07-06T15:32:21.500
> 
> 标签：ruby-on-rails

`validates_uniqueness_of :prod_id, :scope => [:col_id, :parent_col_id], :conditions => lambda { |table| table[:state].not_in(%w(cancelled denied)) }`

我找不到任何将 :conditions 传递给 validates_uniqueness_of... 的文档。我正在寻找解释。

更新 - 感谢您的回答，自定义验证或使用 if 或更少是有意义的......但是这是我在更改之前试图完全理解的预先存在的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T15:42:36.040

您可以为此制定自己的验证方法。例如：

```
validates_uniqueness_of :prod_id, :scope => [:col_id, :parent_col_id],
                                  :if => :custom_validation

def custom_validation
  #your code here
end 
```

# c# - StackPanel 逆序 - WPF

> ID：11365258
> 
> 赞同：2
> 
> 时间：2012-07-06T15:32:43.630
> 
> 标签：c#, wpf, stackpanel

我试图颠倒孩子们出现在 StackPanel 中的顺序。我希望能够将新的孩子（在运行应用程序时）添加到列表的顶部而不是底部。我尝试过使用各种 XAML 代码，但没有任何效果。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T15:36:26.230

利用：

```
stackPanel.Children.Insert(0, uiElement); 
```

这将在列表的头部插入元素。

[资源](http://msdn.microsoft.com/en-us/library/system.windows.controls.uielementcollection.insert.aspx)

# javascript - Opera 中的 HTML5 文件阅读器

> ID：11365260
> 
> 赞同：1
> 
> 时间：2012-07-06T15:32:55.983
> 
> 标签：javascript, html, opera, filereader

我正在尝试使用opera 12中的文件阅读器api读取多个本地ogg音频文件，方法是将它们转换为数据url并将它们存储到我打算稍后访问的数组中。

```
 function music(list)
    {
        var playlistlength=0;
        try
        {
           for (var temp=0; temp < list.files.length; temp++)
           {
             f[playlistlength][0] = list.files.item(temp).name;
             var freader = new FileReader();
             freader.onload = function(frevent){
                                      f[playlistlength][1]=frevent.target.result;
                                               };
             freader.readAsDataURL(list.files[temp]);
             playlistlength++;
           }
        }
        catch(e)
        {
           alert("Error");
        }
     } 
```

然而，在调试器中检查时，在 for 循环中，没有执行任何语句，它跳转到 catch 块，无法弄清楚。有人可以解释为什么会发生这种情况以及可能的任何替代方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:14:56.317

这适用于 jsFiddle。我是用你的代码做的，你的用法类似吗？

HTML：

```
 ​&lt;input type="file" id="browser"/>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

Javascript：

```
 function music(list)
   {
     var playlistlength=0;
      var f = new Array();
     try
     {
       for (var temp=0; temp < list.files.length; temp++)
       {
         var music = new Array();
         music[0] = list.files.item(temp).name;
         var freader = new FileReader();
         freader.onload = function(frevent){
           music[1]=this.result;
           f.push(music);
           alert(f);
         };
         freader.readAsDataURL(list.files[temp]);
         playlistlength++;
       }
       alert(f);
     }
     catch(e)
     {
        alert(e);
     }
   }

   function FileSelectHandler(e) {
     var list = e.target || e.originalEvent.dataTransfer;
     music(list);
   }

   document.getElementById("browser").onchange = FileSelectHandler; 
```

为什么它不起作用？

*   首先，您尝试在 f[playlistlength][1] 中设置一个值，因为 onload 函数在 playlistlength++ 之后异步执行。它崩溃了，因为这个引用不存在。
*   f 可能是错误声明的 ​</li>

# c# - 为除 ASP.NET 中的其他 IP 地址返回 404

> ID：11365266
> 
> 赞同：2
> 
> 时间：2012-07-06T15:33:10.790
> 
> 标签：c#, asp.net, http-status-code-404

我正在在线测试我的 ASP.net 网站，但我不希望任何人都可以通过我的 IP 地址访问它。我如何为不是来自我的 IP 地址的人返回 404 或其他内容。在 ASP.net 4 和 C# 中开发我的网站。或者是否可以在 IIS 7.5 中完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T15:34:41.580

您可以使用[`<ipsecurity>`](http://www.iis.net/ConfigReference/system.webServer/security/ipSecurity)限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T15:52:44.017

验证您是否具有 IP 和域限制角色

1.  通过选择路径开始 > 管理工具 > 服务器管理器打开服务器管理器。
2.  单击“添加角色服务”链接以添加所需的角色。选中“选择角色服务”屏幕中的“IP 和域限制”复选框，然后单击“下一步”继续。

启用 IP 和域限制

1.  打开 IIS 7.5
2.  选择您要过滤 IP 的网站（在左侧面板上）
3.  单击**IP 地址和域限制**（在中心面板中）
4.  **添加 Allow Entry**，并设置您的 IP 地址

5.  单击“操作”面板上的“**编辑功能设置”**

6.  为未指定的客户端选择**拒绝访问**。

# c# - LINQ：使用 AND 序列构建动态过滤器

> ID：11365267
> 
> 赞同：3
> 
> 时间：2012-07-06T15:33:19.650
> 
> 标签：c#, .net, linq, linq-expressions

我正在努力动态创建这样的查询：

```
Dictionary<string, Guid> parms = new Dictionary<string, Guid>();

foreach (var kvp in parms)
{
    var exp = ReportDefinitions.Where(x=> 
        x.Discriminants.Any(y=> y.Key == kvp.Key && y.Value == kvp.Value)
// && more conditions to add here at each cycle
        );  
} 
```

其中 ReportDefinitions.Discriminants 是`IDictionary<string, Guid>`; 我知道如何构建简单的表达式，但我不知道如何构建这个“任何”似乎真的很复杂。任何电话都很难理解

任何人都知道如何处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:00:30.323

```
var query = parms.Aggregate(ReportDefinitions.AsQueryable(),
  (a, kvp) => a.Where(x => x.Discriminants.Any(
     y => y.Key == kvp.Key && y.Value == kvp.Value))); 
```

我们从一个未过滤的 ReportDefinitions 查询开始，并折叠所有查询参数。最终结果是一系列嵌套过滤器，相当于一系列 AND。

关键的见解是这个过程很好地映射到从函数式语言中知道的*reduce 。*LINQ to objects 通过`Aggregate`.

# ruby-on-rails - Rails i18N 翻译 yml 文件中的感叹号是什么意思？

> ID：11365272
> 
> 赞同：12
> 
> 时间：2012-07-06T15:33:40.867
> 
> 标签：ruby-on-rails, internationalization

我正在使用 Rails i18n 本地化我的网站。

在翻译 yml 文件中，我看到

```
time:
    am: am
    formats:
      default: ! '%a, %d %b %Y %H:%M:%S %z'
      long: ! '%d %B, %Y %H:%M'
      short: ! '%d %b %H:%M'
    pm: pm 
```

（取自[https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en-GB.yml](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en-GB.yml)）

感叹号是什么意思？去掉感叹号有什么不同？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-06T00:13:45.493

% 是 YAML 中的特殊字符。单个感叹号避免将其解析为特殊字符并将其作为字符串传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T06:34:01.043

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 请参阅[YAML 中的单个感叹号有什么作用？](https://stackoverflow.com/questions/9664113/what-does-a-single-exclamation-mark-do-in-yaml)

~ 每个[Stefan的链接，](https://stackoverflow.com/users/477037/stefan) [Juan Mellado](https://stackoverflow.com/users/1209430/juan-mellado)回答的链接问题

# security - 许可您的工作

> ID：11365275
> 
> 赞同：-2
> 
> 时间：2012-07-06T15:33:45.063
> 
> 标签：security, digital-signature, signing

假设我正在销售一些我从零开始开发的 PHP 脚本，以及一些由我从零开始开发的 Flash 游戏。

我将 Flash 游戏和 PHP 脚本卖给了一些客户，其中一些我什至将它们与源代码一起卖给了他们。

现在，如果一个客户未经我的同意将代码出售给其他人，而其他人，第三个人声称代码属于他，该怎么办？

PHP脚本或代码可以在线签名或类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:39:14.750

你卖给客户的时候，合同有没有规定不能卖？更重要的是，合同是否还规定客户不得以任何方式修改源代码然后出售？

今天，保护您的知识产权的最佳方式是聘请律师，是的，这是一件可悲的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:38:13.487

你试图通过技术手段解决社会问题。这行不通。

如果有人这样对你，你应该找律师起诉他。

# bugzilla - 如何为 Bugzilla 3.0.x 中的错误/功能建模状态“需要讨论”

> ID：11365282
> 
> 赞同：0
> 
> 时间：2012-07-06T15:34:27.543
> 
> 标签：bugzilla

在我们的小组中，我们必须为 Bugzilla 建模状态“需要讨论”。

因此，引入了自定义*RESOLVED - 待讨论*状态。适当的人群搜索具有这种“解决”状态的问题并**离线**讨论这些问题。

在我看来，这**不是**正确的方法，因为如果仍然需要讨论，错误/功能显然没有解决。这也体现在[一个bug的标准生命周期中](http://www.bugzilla.org/docs/3.0/html/lifecycle.html)。这有点误导，因为“需要讨论”项目显示在您已解决的错误列表中。

![Bugzilla 错误的生命周期](../Images/a541cf988dfa5fa78f4ded942a839786.png)

我能想到的一种方法是创建一种“虚拟用户”，代表必须参与讨论的小组。这样做的好处是可以轻松搜索错误。还可以设置一个邮件列表来通知用户。

我想知道如何适当地建模这个*需要讨论*Bugzilla 3.0.x 中的一个错误的状态。（还有：Mozilla 方式的解决方案是什么？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:30:07.713

与任何软件系统一样，有多种方法可以满足您的需求。

在开始使用*机制*之前，最好考虑一下*需求*。

您是否希望需要讨论的错误仍被视为“开放”，或者您是否认为它们“已解决”。你甚至收集这些类型的指标吗？

我从你的问题中得出的要求是

1.  不想在正常搜索中看到它们
2.  确实希望能够在明确查看时看到它们
3.  需要能够最终确定讨论，并将错误“恢复”正常
4.  想通知人们有一个讨论要举行
5.  希望错误看起来不像已解决

如果这些确实是要求，并且您不在乎“讨论”错误显示为已解决指标等，那么我认为您所拥有的可能已经足够好，除了第 5 点。

其他一些选择

1.  创建一个“讨论”产品（或组件）。
2.  创建一个自定义生命周期（不过我不建议这样做）。
3.  分配给“讨论我”组/用户
4.  使用“超级错误”，并将错误标记为阻止“讨论超级错误”
5.  创建一个“讨论这个问题”错误，并将该错误标记为被讨论阻止（这反映了最接近的现实，但这并不使其成为最佳选择）。

但是，正如我所说，请先考虑您要实现的目标，然后根据此选择机制。为了使它们都能正常工作，您必须做的错误摆弄量有不同的权衡:-)。

# ipod - 歌曲在 iPod shuffle 中重复播放

> ID：11365293
> 
> 赞同：1
> 
> 时间：2012-07-06T15:35:26.053
> 
> 标签：ipod

尽管我已经加载了大约 125 首歌曲，但我的 iPod Shuffle 仍然只重复大约 10 首歌曲。

当我同时保持“正常”和“随机播放”模式时，就会发生这种情况。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-02T23:23:52.033

您应该将您的 iPod 连接到 iTunes，并确保其他 350 首歌曲确实存在并且采用 iPod 可以播放的格式。有时，当同步中止时，歌曲的名称会出现，但歌曲不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:43:34.290

你有一个播放列表吗？如果是这样删除它。你有没有尝试添加一些新歌？添加一对，看看他们是否会玩

# java - 如何将焦点设置到 JScrollPane 内的 JTable 中的第一行

> ID：11365294
> 
> 赞同：10
> 
> 时间：2012-07-06T15:35:26.543
> 
> 标签：java, swing, jtable, jscrollpane

我有一个`JTable`里面的`JScrollPane`。我把它放在一个面板里。面板加载后，我希望 JTable 中的第一行获得焦点但默认情况下焦点转到`JScrollPane`并且在按下选项卡时焦点进入表的第一行。我不想使用`setRowSelectionInterval(0,0)`，`setColumnSelectionInterval(0,0)`因为我的要求与此不同。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-07T05:22:40.970

如果要编辑单元格，可以使用，

```
jTable1.requestFocus();
jTable1.editCellAt(row,column); 
```

或者你只想选择行，你可以使用，

```
jTable1.requestFocus();
jTable1.changeSelection(row,column,false, false); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T15:39:06.597

*   尝试`myTable.changeSelection(row, column, false, false);`

*   取决于[ListSelectionModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)

# javascript - 如何使用 Javascript 获取元素的不透明度？

> ID：11365296
> 
> 赞同：12
> 
> 时间：2012-07-06T15:35:44.487
> 
> 标签：javascript, css, opacity

如果我有：

```
#em {
  opacity:0.5;
} 
```

我如何获得`#em`不透明度使用`javascript`？:D

我遇到了以下问题（它什么也没返回）：

```
return document.getElementById("em").style.opacity; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-11-08T16:15:12.803

```
var em = document.getElementById("em");
var  temp = window.getComputedStyle(em).getPropertyValue("opacity"); 
```

现在，变量*temp*将具有“em”的不透明度值。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-06T15:37:19.583

在样式表中设置 CSS 值与通过`style`属性设置不同。您需要查看[`getComputedStyle`](https://developer.mozilla.org/en/DOM/window.getComputedStyle)获取此信息的方法（也`currentStyle`适用于较旧的 IE）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-24T10:17:20.860

```
document.getElementById("em").style.opacity; 
```

如果您使用内联样式，它将正常工作。例如。

```
<div id="em" style="width: 50px; height: 50px; opacity: 0.5;"> 
```

# sql-server - 什么时候使用 @@IDENTITY 而不是 SCOPE_IDENTITY 才有意义？

> ID：11365297
> 
> 赞同：1
> 
> 时间：2012-07-06T15:35:46.040
> 
> 标签：sql-server

根据 MSDN，`@@IDENTITY returns the last identity value generated for any table in the current session, across all scopes.`

有没有人遇到过此功能有用的情况？我想不出您希望为所有范围内的任何表生成最后一个 ID 或如何使用它的情况。

更新：

不知道所有的反对票是关于什么的，但我想我会试着澄清我在问什么。

首先，我知道何时使用 SCOPE_IDENTITY 和 IDENT_CURRENT。我想知道什么时候使用 @@IDENTITY 比使用这些其他选项更好？我还没有找到在日常工作中使用它的地方，我想知道是否有人可以描述一种情况，什么时候它是最好的选择。

大多数时候，当我看到它时，是因为有人不明白他们在做什么，但我认为微软包含它是有原因的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:44:03.980

一般来说，不应该使用它。`SCOPE_IDENTITY()`使用起来要安全得多（只要我们谈论的是单行插入，正如上面评论中突出显示的那样），*除了*在以下情况下，`@@IDENTITY`可以使用一种方法（`SCOPE_IDENTITY()`在这种情况下不能）：

*   您的代码故意触发触发器
*   触发器插入到具有标识列的表中
*   调用代码需要触发器内部生成的标识值
*   调用代码可以保证`@@IDENTITY`触发器中生成的值永远不会被更改以反映不同的表（例如，有人在您依赖的插入*后将日志记录添加到触发器中）*

这是一个奇怪的用例，但可行。

`IDENTITY`请记住，如果您要插入多行并需要返回多个值，这将不起作用。还有其他方法，但它们还需要允许来自游标的结果集的选项，并且 IIRC 不推荐使用此选项。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-06T15:40:05.070

@@IDENTITY 非常适合根据 ID 列识别单个行。

```
ID | Name | Age
1    AA     20
2    AB     30 
etc... 
```

在这种情况下，ID 列将依赖于@@IDENTITY 属性。

# java - 为什么当我单击小程序中的启动按钮时看不到新的 jsp 页面？

> ID：11365300
> 
> 赞同：0
> 
> 时间：2012-07-06T15:36:08.600
> 
> 标签：java, jsp, servlets, applet, httpconnection

我正在尝试与 a`servlet`和`jsp`通过小程序进行通信。当单击小程序中的按钮时，请求被触发到 servlet，然后我尝试从该 servlet 转发到 jsp 页面。尽管对 servlet 方法的请求成功，但`doGet`我在浏览器中既没有看到 servlet 页面，也没有看到 jsp 页面。这是为什么 ？我错过了什么？

*小程序按钮点击代码：*

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    System.out.println("pressed the button !");
    try {
          URLConnection connection = new URL("http://localhost:8084/poll/servlet_1").openConnection();
          connection.setRequestProperty("Accept-Charset", "UTF-8");
          InputStream response  = connection.getInputStream();
          connection.connect();
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

*小服务程序代码：*

```
@Override
public void doGet(HttpServletRequest request,HttpServletResponse response) throws 
        ServletException,IOException {
    System.out.println("---inside the doGet method of servlet----");
    PrintWriter writer = response.getWriter();
    response.setContentType("text/plain");
    writer.println("You just landed on a servlet from an applet !");
    RequestDispatcher rd = request.getRequestDispatcher("jsp_1.jsp");
    rd.forward(request, response);
} 
```

*我在服务器日志中看到的是消息：`---inside the doGet method of servlet----`*

当我触发事件时，方法中的第一条语句`doGet`被打印，但请求不会转发到`jsp`页面。这是为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:38:56.113

如果我让您正确，您需要从小程序重定向到 servlet，然后转发 JSP 页面？

```
after your servlet response
.....redirect to jsp from applet.

 AppletContext appletContext = getAppletContext();
 appletContext.showDocument(new URL(getDocumentBase(), "yourJsp.jsp")); 
```

# android - 如何模拟Android杀死我的进程

> ID：11365301
> 
> 赞同：197
> 
> 时间：2012-07-06T15:36:13.533
> 
> 标签：android

如果一个进程在后台并且操作系统决定它需要资源（RAM、CPU 等），Android 将终止该进程。我需要能够在测试期间模拟这种行为，以便我可以确保我的应用程序行为正确。我希望能够以自动化的方式执行此操作，以便在发生这种情况时测试应用程序是否正确运行，这意味着我必须在每个活动等中测试它。

我知道如何杀死我的进程。那不是问题。问题是，当我终止我的进程（使用 DDMS、`adb shell kill`、`Process.killProcess()`等）时，Android 不会像 Android 操作系统自行终止它那样重新启动它。

如果 Android OS 杀死进程（由于资源需求），当用户返回应用程序时，Android 将重新创建该进程，然后重新创建**Activity 堆栈上的顶部 Activity**（调用`onCreate()`）。

另一方面，如果**我**终止进程，**Android 会假定活动堆栈顶部的活动表现不佳**，因此它会自动重新创建进程，然后**从活动堆栈中删除顶部活动并重新创建在下面的活动顶部活动**（调用 onCreate()`）。这不是我想要的行为。我想要与 Android 终止进程时相同的行为。

只是为了形象地解释，如果我的活动堆栈看起来像这样：

```
 ActivityA -> ActivityB -> ActivityC -> ActivityD 
```

如果 Android 杀死进程并且用户返回到应用程序，Android 会重新创建进程并创建 ActivityD。

如果我终止进程，Android 会重新创建进程并创建 ActivityC。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-09-09T10:14:10.937

对我来说测试这个的最好方法是这样做：

*   在您的应用程序中打开 ActivityD
*   **按主页按钮**
*   在 Android Studio 中按下`Terminate Application`Logcat 窗口（这将终止应用程序进程，请确保在顶部的 Logcat 下拉列表中选择您的设备和进程）
*   通过主页长按或打开的应用程序返回应用程序（取决于设备）
*   应用程序将在重新创建的 ActivityD 中启动（ActivityA、ActivityB、ActivityC 已失效，当您返回它们时将重新创建）

在某些设备上，您还可以使用 Applications -> Your launcher icon 返回应用程序 (ActivityD)，但在其他设备上，它将启动 ActivityA。

这就是 Android 文档所说的：

> 通常，当用户从主屏幕重新选择该任务时，系统会在某些情况下清除任务（从根活动上方的堆栈中删除所有活动）。通常，如果用户在一定时间内（例如 30 分钟）没有访问任务，则会执行此操作。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2014-11-12T15:13:01.623

这似乎对我有用：

```
adb shell am kill <package_name> 
```

这不同于`adb shell kill`与OP提到的不同。

请注意，该`am kill`命令的帮助说：

```
am kill: Kill all processes associated with <PACKAGE>.  Only kills.
  processes that are safe to kill -- that is, will not impact the user
  experience. 
```

所以，如果它在前台，它不会杀死进程。这似乎符合 OP 的要求，因为如果我离开我的应用程序，然后运行`adb shell am kill <package_name>`它将杀死应用程序（我已经`ps`在设备上确认了这一点）。然后，如果我返回应用程序，我将回到我之前的活动中 - 即在 OP 的示例中，进程被重新创建并创建 ActivityD（而不是像大多数其他杀戮方法似乎触发的 ActivityC）。

抱歉，我迟到了 OP 几年，但希望其他人会发现这很有用。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-12-29T21:52:11.940

另一种方法，可能是可编写脚本的，因为它不需要 DDMS：

一次性设置：转到开发人员选项，选择后台进程限制设置，将值从“标准限制”更改为“无后台进程”。

当您需要重新启动该过程时，请按主页按钮。该进程将被终止（您可以在工作室的 logcat/Android Monitor 中进行验证——该进程将被标记为 [DEAD]）。然后使用任务切换器切换回应用程序。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-03-19T15:18:32.777

这个问题很老，但是这个问题有一个答案，不需要 adb、Android Studio 等。唯一的要求是 API 23 或更高版本。

要通过操作系统模拟应用程序重启，请在应用程序运行时进入应用程序设置，禁用（然后您可以启用）权限并从最近的应用程序中返回应用程序。当权限被禁用时，操作系统会终止应用程序但保留保存的实例状态。当用户返回应用程序时，应用程序和最后一个活动（具有已保存状态）被重新创建。

“无后台进程”方法有时会导致相同的行为，但并非总是如此。例如，如果应用程序正在运行后台服务，则“无后台进程”不会执行任何操作。但是该应用程序可能会被包括其服务在内的系统杀死。即使应用程序有服务，权限方法也有效。

例子：

我们的应用程序有两个活动。ActivityA 是从启动器启动的主要活动。ActivityB 从 ActivityA 开始。我将只展示 onCreate、onStart、onStop、onDestroy 方法。Android 总是在调用 onStop 之前调用 onSaveInstanceState，因为处于停止状态的活动可能会被系统杀死。[ [https://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle]](https://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle])

许可方式：

```
<start app from launcher first time>
Application onCreate
ActivityA onCreate WITHOUT savedInstance
ActivityA onStart
<open ActivityB>
ActivityB onCreate WITHOUT savedInstance
ActivityB onStart
ActivityA onStop (the order is like this, it is stopped after new one is started)
<go settings>
ActivityB onStop
<disable a permission>
//Application is killed, but onDestroy methods are not called.
//Android does not call onDestroy methods if app will be killed.
<return app by recent apps>
Application onCreate (this is the important part. All static variables are reset.)
ActivityB onCreate WITH savedInstance (user does not notice activity is recreated)
//Note that ActivityA is not created yet, do not try to access it.
ActivityB onStart
<return ActivityA by back>
ActivityA onCreate WITH savedInstance (user does not notice activity is recreated)
ActivityA onStart
ActivityB onStop
ActivityB onDestroy
<press back again, return launcher>
ActivityA onStop
ActivityA onDestroy
<open app again>
//does not call Application onCreate, app was not killed
ActivityA onCreate WITHOUT savedInstance
ActivityA onStart 
```

我想比较其他答案中提到的其他方法。

不要保留活动：这不会杀死应用程序。

```
<start app from launcher first time>
Application onCreate
ActivityA onCreate WITHOUT savedInstance
ActivityA onStart
<open ActivityB>
ActivityB onCreate WITHOUT savedInstance
ActivityB onStart
ActivityA onStop
ActivityA onDestroy (do not keep)
<return launcher by home button>
ActivityB onStop
ActivityB onDestroy (do not keep) 
<retun app from recent apps>
// NO Application onCreate
ActivityB onCreate WITH savedInstance (user does not notice activity recreated)
ActivityB onStart
<return ActivityA by back>
ActivityA onCreate WITH savedInstance (user does not notice activity recreated)
ActivityA onStart
ActivityB onStop
ActivityB onDestroy
<press back again, return launcher>
ActivityA onStop
ActivityA onDestroy
<open app again>
//does not call Application onCreate, app was not killed
ActivityA onCreate WITHOUT savedInstance
ActivityA onStart 
```

强制停止方法：不存储保存的实例状态

```
<start app from launcher first time>
Application onCreate
ActivityA onCreate WITHOUT savedInstance
ActivityA onStart
<open ActivityB>
ActivityB onCreate WITHOUT savedInstance
ActivityB onStart
ActivityA onStop
<go settings>
ActivityB onStop
<force stop, return app from recent apps>
Application onCreate
ActivityA onCreate WITHOUT savedInstance 
//This is important part, app is destroyed by user.
//Root activity of the task is started, not the top activity.
//Also there is no savedInstance. 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2018-07-03T14:15:20.540

使用 HOME 按钮将应用程序置于后台

在 Android Studio 中选择“Logcat”模式下的进程，然后点击左下角的 Terminate Application

[![终止按钮](../Images/99786ac27f27ded8da8ec3558718a85b.png)](https://i.stack.imgur.com/n3o3n.png)

现在从 Android 设备上的启动器启动您的应用程序

* * *

**编辑：**根据互联网，以下内容也有效：

```
 adb shell am kill [my-package-name] 
```

* * *

**来自未来的编辑：**需要注意的是，Android Studio 4.0 发生了变化，如果您`Run`从 AS 使用，那么`Terminate`将发出`Force Stop`.

但是，如果您之后从启动器启动，然后您尝试以这种方式模拟它，那么您将获得您想要的结果（低内存行为）。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-11-24T10:06:53.437

我参加聚会已经很晚了，在我之前的几个人给出了相同的正确答案，但为了简化我之后的任何人，只需按下主页按钮并运行以下命令：

`adb shell ps | grep <package name> | awk '{print $2}' | xargs adb shell run-as <package name again> kill`

该应用程序不会丢失状态，根据我自己的经验，这与操作系统在后台杀死应用程序的方式相同。这仅适用于调试构建的应用程序

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-02-01T09:07:13.327

这就是您在 Android Studio 中的操作方式。

1.  将处于调试模式的设备连接到计算机。
2.  在您的设备上打开应用程序并转到您想要测试“死而复生”的任何活动。
3.  按设备上的主页按钮。
4.  在 Android Studio 中，转到 Android Monitor -> Monitors 并按 Terminate Application 图标。
5.  现在您可以通过最近的应用程序或单击它的启动器图标返回您的应用程序，在我的测试中行为是相同的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-05-27T08:32:56.563

您可以执行后续步骤来重现寻求的行为：

1.  打开您的应用程序，导航到顶部活动
2.  使用通知面板导航到任何其他全屏应用程序（例如，系统设置 - 在右上角）
3.  杀死你的申请进程
4.  按下返回按钮

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-05-03T20:13:39.033

在设置下的开发人员选项中，选择“不保留活动”，这将在您离开活动时立即销毁活动。

注意：根据下面的有用评论，仅当您不关心静态值被清除时才使用此选项。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-07T11:58:31.043

按下 Home 键，首先将应用程序置于后台。然后从 DDMS 或 ADB 停止或终止该进程。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-10T08:48:10.190

您还可以从终端连接到您的设备/模拟器`adb shell`，然后使用 获取进程的 PID`ps | grep <your_package_name`并执行`kill -9 <pid>`。然后从最近的应用程序选择器中打开您的最小化应用程序，它将重新启动上次活动

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-11T22:07:11.753

我不确定这是否是您正在寻找的答案，它更像是一种逻辑思维。

我不认为你真的可以做一个完全自动化的测试，模拟它的唯一方法就是重新创建它，AKA 有这么多的活动，Android 会杀死你的应用程序。

所以我的想法或建议是制作另一个小应用程序，它会不断弹出新的活动，直到Android内存不足并开始在后台杀死进程。

其中的一些东西：

启动活动 i -> 如果应用程序在列表中，则检查正在运行的进程，增加 i 并重新启动循环而不关闭当前活动，否则 -> 减少 i 并关闭当前活动，返回上一个并重新检查...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-05-21T21:29:13.160

您的问题的根源似乎是您`Activity`在终止进程时处于前台。

您可以通过在可见时按 DDMS 中的停止`Activity`（完全按照您的描述发生）并将其与回家后按停止并稍后返回应用程序进行比较来观察这一点。

只要确保以`moveTaskToBack(true)`某种方式在您的测试中。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-22T20:04:03.943

当应用程序进程终止时，Android 会检查活动记录（条目表示历史堆栈中的活动），并[决定](https://android.googlesource.com/platform/frameworks/base/+/master/services/core/java/com/android/server/wm/ActivityStack.java#4790)将哪些保留在历史记录中，哪些从其中删除。

这里的关键点之一是`ActivityRecord`名为 的字段`haveState`，Android 框架工程师将其[描述](https://android.googlesource.com/platform/frameworks/base/+/master/services/core/java/com/android/server/wm/ActivityRecord.java#330)为“我们是否获得了最后一个活动状态？”。

默认情况下，Android[认为](https://android.googlesource.com/platform/frameworks/base/+/master/services/core/java/com/android/server/wm/ActivityRecord.java#980)活动具有状态。当应用程序向活动任务管理器服务报告活动已恢复时，活动将变为无状态，[并且](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/app/IActivityTaskManager.aidl#132)在应用[程序](https://android.googlesource.com/platform/frameworks/base/+/master/services/core/java/com/android/server/wm/ActivityRecord.java#2183)[通知](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/app/IActivityTaskManager.aidl#135)框架活动已进入停止状态之前这是[有效的。](https://android.googlesource.com/platform/frameworks/base/+/master/services/core/java/com/android/server/wm/ActivityRecord.java#2265)简单来说，值在activity被调用和或被调用之间，[取决于](https://stackoverflow.com/a/20831956)应用程序目标版本。`haveState``false``onResume()``onStop()``onSaveInstanceState()`

> 如果我终止进程，Android 会重新创建进程并创建 ActivityC。

在这种情况下，ActivityD 在应用程序清单中没有`android:stateNotNeeded="true"`属性，并且它当前正在前台运行，因此 Android 将其从历史记录中删除，因为系统尚未获得其最后一个状态。

> 如何模拟Android杀死我的进程

正如多次提到的，您可以简单地将应用程序移动到后台，因此活动回栈中的顶部活动将保存其状态，然后您可以通过 Android Debug Bridge、Android Studio 或使用开发人员选项中的后台进程限制属性。之后，您最近的活动将被成功重新创建。

尽管如此，还有另一种简单的方法来测试应用程序进程死亡场景。了解了上述所有内容以及事实，如果您从当前运行的 ActivityD 启动新的 ActivityE，则`onStop()`仅在 ActivityE 方法之后调用 ActivityD 回调`onResume()`，您可以执行以下技巧。

```
class TerminatorActivity : Activity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        val isPrePie = applicationInfo.targetSdkVersion < Build.VERSION_CODES.P
        val callbacks = TerminatorLifecycleCallbacks(isPrePie)
        (applicationContext as Application).registerActivityLifecycleCallbacks(callbacks)
    }

    private class TerminatorLifecycleCallbacks(
        // Before P onSaveInstanceState() was called before onStop(), starting with P it's
        // called after
        // Used to schedule the death as app reports server that activity has stopped
        // after the latest of these was invoked
        private val isPrePie: Boolean
    ) : ActivityLifecycleCallbacksDefault {

        private val handler = Handler(Looper.getMainLooper())

        override fun onActivityPostStopped(activity: Activity) {
            if (isPrePie) {
                terminate()
            }
        }

        override fun onActivityPostSaveInstanceState(activity: Activity, outState: Bundle) {
            if (!isPrePie) {
                terminate()
            }
        }

        fun terminate() {
            handler.postDelayed(
                {
                    Process.killProcess(Process.myPid()) // This is the end... 
                },
                LAST_MILLIS
            )
        }

        companion object {
            // Let's wait for a while, so app can report and server can handle the update
            const val LAST_MILLIS = 100L
        }

    }

    private interface ActivityLifecycleCallbacksDefault : Application.ActivityLifecycleCallbacks {
        override fun onActivityCreated(activity: Activity, savedInstanceState: Bundle?) {}
        override fun onActivityStarted(activity: Activity) {}
        override fun onActivityResumed(activity: Activity) {}
        override fun onActivityPaused(activity: Activity) {}
        override fun onActivityStopped(activity: Activity) {}
        override fun onActivitySaveInstanceState(activity: Activity, outState: Bundle) {}
        override fun onActivityDestroyed(activity: Activity) {}
    }
} 
```

然后`TerminatorActivity`在您想终止应用程序时开始。

最后，有一个轻量级的工具可以简化对应用程序进程死亡的测试，称为[Venom](https://github.com/YarikSOffice/venom)。

# eclipse - 无法在 Juno 中启动 eclipse rcp 应用程序

> ID：11365303
> 
> 赞同：4
> 
> 时间：2012-07-06T15:36:19.423
> 
> 标签：eclipse, rcp

我无法在新发布的 juno 中启动我的 rcp 应用程序，但它在 indigo 中运行良好。我发现有很多 lucene 包没有解决。但是它们被添加到运行配置中所需的插件中。

有人有什么建议吗？谢谢！

```
!SESSION 2012-07-06 16:45:10.801 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_05
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=sv_SE
Framework arguments:  -product Myproduct.product
Command-line arguments:  -product Myproduct.product -data C:\Users\user\workspace/../runtime-Myproduct.product -dev file:C:/Users/user/workspace/.metadata/.plugins/org.eclipse.pde.core/Myproduct.product/dev.properties -os win32 -ws win32 -arch x86_64

!ENTRY org.eclipse.equinox.app 0 0 2012-07-06 16:45:11.986
!MESSAGE Product Myproduct.product could not be found.

!ENTRY org.eclipse.osgi 2 0 2012-07-06 16:45:12.106
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.106
!MESSAGE Bundle initial@reference:file:plugins/org.apache.lucene.queries_3.5.0.v20120319-2345.jar was not resolved.

!SUBENTRY 2 org.apache.lucene.queries 2 0 2012-07-06 16:45:12.106
!MESSAGE Missing required bundle org.apache.lucene.core_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.106
!MESSAGE Bundle initial@reference:file:plugins/org.apache.lucene.analysis_2.9.1.v201101211721.jar was not resolved.

!SUBENTRY 2 org.apache.lucene.analysis 2 0 2012-07-06 16:45:12.106
!MESSAGE Missing required bundle org.apache.lucene.core_[2.9.1,3.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.106
!MESSAGE Bundle initial@reference:file:plugins/org.apache.lucene.misc_3.5.0.v20120319-2345.jar was not resolved.
!SUBENTRY 2 org.apache.lucene.misc 2 0 2012-07-06 16:45:12.106
!MESSAGE Missing required bundle org.apache.lucene.core_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.106
!MESSAGE Bundle initial@reference:file:plugins/org.apache.lucene_3.5.0.v20120319-2345.jar was not resolved.

!SUBENTRY 2 org.apache.lucene 2 0 2012-07-06 16:45:12.106
!MESSAGE Missing required bundle org.apache.lucene.core_[3.5.0,4.0.0).

!ENTRY org.eclipse.osgi 2 0 2012-07-06 16:45:12.119
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.119
!MESSAGE Bundle org.eclipse.help.base_3.6.100.v201206081400 [18] was not resolved.
!SUBENTRY 2 org.eclipse.help.base 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.apache.lucene_2.9.0.
!SUBENTRY 2 org.eclipse.help.base 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.apache.lucene.analysis_2.9.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.119
!MESSAGE Bundle org.eclipse.help.webapp_3.6.100.v20120521-2344 [21] was not resolved.
!SUBENTRY 2 org.eclipse.help.webapp 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.eclipse.help.base_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.119
!MESSAGE Bundle org.apache.lucene.analysis_2.9.1.v201101211721 [25] was not resolved.
!SUBENTRY 2 org.apache.lucene.analysis 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.apache.lucene.core_[2.9.1,3.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.119
!MESSAGE Bundle org.eclipse.help.ui_3.5.200.v20120521-2344 [35] was not resolved.
!SUBENTRY 2 org.eclipse.help.ui 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.eclipse.help.base_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.119
!MESSAGE Bundle org.apache.lucene.queries_3.5.0.v20120319-2345 [39] was not resolved.
!SUBENTRY 2 org.apache.lucene.queries 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.apache.lucene.core_[3.5.0,4.0.0).
!SUBENTRY 2 org.apache.lucene.queries 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing optionally imported package org.apache.regexp_1.4.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.119
!MESSAGE Bundle org.apache.lucene_3.5.0.v20120319-2345 [52] was not resolved.
!SUBENTRY 2 org.apache.lucene 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.apache.lucene.core_[3.5.0,4.0.0).
!SUBENTRY 2 org.apache.lucene 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.apache.lucene.misc_[3.5.0,4.0.0).
!SUBENTRY 2 org.apache.lucene 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.apache.lucene.queries_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.119
!MESSAGE Bundle org.apache.lucene.misc_3.5.0.v20120319-2345 [79] was not resolved.
!SUBENTRY 2 org.apache.lucene.misc 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.apache.lucene.core_[3.5.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-06 16:45:12.119
!MESSAGE Bundle Myproduct_1.0.0 [171] was not resolved.
!SUBENTRY 2 Myproduct 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.eclipse.help.ui_3.5.101.
!SUBENTRY 2 Myproduct 2 0 2012-07-06 16:45:12.119
!MESSAGE Missing required bundle org.eclipse.help.webapp_3.6.0.

!ENTRY org.eclipse.osgi 4 0 2012-07-06 16:45:12.128
!MESSAGE Application error

!STACK 1
java.lang.RuntimeException: No application id has been found.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:242)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T09:10:18.890

我通过启用 lucene 插件的特定子集解决了这个问题。

*   转到您的插件/产品配置的运行配置对话框（运行->运行配置...）
*   选择插件选项卡
*   在搜索字段中输入“lucene”。它应该显示以 org.apache.lucene* 开头的七个条目
*   将 2.9.1 的所有内容标记为已启用
*   将 3.5.0 的所有内容标记为禁用
*   单击验证插件，它应该说“未检测到问题”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:52:28.007

通过选择启动选项解决了它：所有工作区和启用的外部插件。 [更多关于午餐选择](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.pde.doc.user/guide/tools/launchers/eclipse_plugins.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T22:25:56.510

嗯。经过几个小时的挣扎：

如果您在插件概览选项卡上指定了错误的“执行环境”，也会出现此错误。例如，指定 JavaSE 1.7，即使您只有 JavaSE 1.6。

# unicode - 使用 unicode 字符的 SQL LIKE 语句不显示正确的结果

> ID：11365304
> 
> 赞同：6
> 
> 时间：2012-07-06T15:36:22.393
> 
> 标签：unicode, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。我只是想知道为什么这个语句不能正常工作。

例如：声明

```
WHERE CONTRACTORNAME LIKE '%á%' 
```

会给我包含“á”的每条记录的正确结果。但声明

```
WHERE CONTRACTORNAME LIKE '%ạ%' 
```

即使在`CONTRACTORNAME`列中有大量包含此字符的记录，也不会给出任何记录。有什么帮助吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T15:40:47.727

尝试使用 Unicode 搜索字符串：

```
WHERE CONTRACTORNAME LIKE N'%ạ%' 
```

# watir-webdriver - 模拟用户浏览多页搜索结果

> ID：11365305
> 
> 赞同：0
> 
> 时间：2012-07-06T15:36:22.840
> 
> 标签：watir-webdriver

我需要通过在 watir 中运行多个页面的多个搜索结果来模拟用户搜索。因此，假设我搜索产品并获得 35 个搜索结果（每页 10 个搜索结果），我需要单击查看产品，转到详细的产品页面并返回搜索页面。

我们正在开发的这个站点与linkedin非常相似，所以我在这里附上了一个linkedin html。挑战是我需要在 html 中识别类似于以下[https://linkedin.com/view=1324526](https://linkedin.com/view=1324526)的模式？...现在由于有很多链接，我如何识别这种特定模式并单击产品/配置文件。另外，一旦我到达个人资料，我如何返回搜索结果。请注意，linkedin 之间有很多巧合，所以我以linkedin 为例。如果它类似于linkedin，我可以轻松修改脚本。谢谢

```
</li>
<li class="vcard expanded-view " id="vcard-8">
<div class="result-data">
<div class="actions">
<a href="http://www.linkedin.com/people/invite?from=profile&amp;key=39198881&amp;firstName=Sharon&amp;lastName=Monteiro&amp;authToken=MrLR&amp;authType=OUT_OF_NETWORK&amp;pvs=ps&amp;trk=pp_invite_member_action&amp;goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2" class="primary-action trk-invite-member connecticon" name="_inviteLink"><strong>Connect</strong></a>
<div class="dropdown action-dropdown">
<h3>See all results &#187;</h3>
<ul class="drop action-dropdown-list">
<li>
<a href="/requestList?destID=39198881&amp;creationType=REFERRAL&amp;displayProposal=&amp;pvs=ps&amp;trk=pp_get_intro_action&amp;goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2" class="external-link trk-get-intro" name="_getIntroducedLink"> Get introduced </a>
</li>
<li>
<a href="/requestList?destID=39198881&amp;creationType=DC&amp;displayProposal=&amp;pvs=ps&amp;authToken=MrLR&amp;authType=OUT_OF_NETWORK&amp;trk=pp_send_inmail_action&amp;goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2" class="external-link trk-send-inmail" name="_sendInMailLink"> Send InMail </a>
</li>
<li>
<a href="/forwardProfileMsg?displayCreate=&profileID=39198881&profileName=Sharon+Monteiro&network=I&authToken=MrLR&authType=OUT_OF_NETWORK&trk=pp_share_profile_action" class="external-link trk-share-profile" name="_shareProfileLink"> Share Profile </a>
</li>
<li class="one-click">
<a href="#" class="trk-find-references" name="vcard-8">Find references</a>
</li>
</ul>
</div>
</div>
<a href="/profile/view?id=39198881&authType=OUT_OF_NETWORK&authToken=MrLR&locale=en_US&srchid=26e4d6f3-1ee3-436f-b006-395fded1f576-0&srchindex=9&srchtotal=1317249&goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2&pvs=ps&trk=pp_profile_photo_link" class="profile-photo external-link trk-profile-photo" target="_top" tracking="hb_upphoto" data-li-larger-profile="http://media01.linkedin.com/media/p/2/000/053/26a/23e1360.jpg">
<img src="http://media03.linkedin.com/mpr/mpr/shrink_60_60/p/2/000/053/26a/23e1360.jpg" class="photo" alt="Sharon Monteiro" width="60" height="60">
<span class="larger-profile-photo-control"></span>
</a>
<h2>
<a href="/profile/view?id=39198881&authType=OUT_OF_NETWORK&authToken=MrLR&locale=en_US&srchid=26e4d6f3-1ee3-436f-b006-395fded1f576-0&srchindex=9&srchtotal=1317249&goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2&pvs=ps&trk=pp_profile_name_link" class="fn n external-link trk-profile-name" title="View Profile" target="_top">
Sharon Monteiro
</a>
<span class="badges">
<abbr title="Sharon Monteiro is a 2nd degree contact"><span class="network-degree">2<sup>nd</sup></span></abbr>
</span>
<span class="saved-profile">
<a href="/organizer?trk=subpro_goto_srch" >Saved</a>
</span>
</h2>
<a href="/profile/view?id=39198881&authType=OUT_OF_NETWORK&authToken=MrLR&locale=en_US&srchid=26e4d6f3-1ee3-436f-b006-395fded1f576-0&srchindex=9&srchtotal=1317249&goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2&pvs=ps" class="url">View Profile</a>
<dl class="vcard-basic">
<dt>Title</dt>
<dd class="title">Life Coach whose specializes in transforming people's lives with NLP, Theta Healing, Coaching, EFT,</dd>
<dt class="demographic-info">Demographic info</dt>
<dd class="location-industry">
<span class="location">
United Arab Emirates
</span>
<span class="separator">&#183;</span>
<span class="industry">
Think Tanks
</span>
</dd>
<dt class="network-information">Network Information</dt>
<dd class="connections-recommendations">
91 connections
<span class="separator">&#183;</span>
1 recommendation
</dd>
</dl>
<dl class="vcard-expanded">
<dt class="current">Current:</dt>
<dd class="show-less-text">
<span class="current-details less-text">Educator, Trainer, Speaker, Writer ... <span class="toggle-show-more">more</span></span>
<span class="current-details more-text">Educator, Trainer, Speaker, Writer at Releasing With Love <span class="toggle-show-less">less</span></span>
</dd>
<dt class="past">Past:</dt>
<dd class="show-less-text">
<span class="past-details less-text">Head <strong class="highlight">Instructor</strong> at Releasing With ... <span class="toggle-show-more">more</span></span>
<span class="past-details more-text">Head <strong class="highlight">Instructor</strong> at Releasing With Love <span class="toggle-show-less">less</span></span>
</dd>
<dt class="incommon-connections">In Common:</dt>
<dd>
<span>
<a href="/profile/view?id=39198881&authType=OUT_OF_NETWORK&authToken=MrLR&locale=en_US&srchid=26e4d6f3-1ee3-436f-b006-395fded1f576-0&srchindex=9&srchtotal=1317249&goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2&pvs=ps&trk=pp_shared_conn_link" name="vcard-8" class="toggle-shared-connections trk-shared-conn-link trk-no-external" title="View your shared connections"> <strong>1</strong> shared connection</a>
<span class="separator">&#183;</span>
<a title="View similar people" target="_top" class="similar trk-similar" href="/search/fpsearch?viewType=sim&sId=39198881&trk=psearch_similar">Similar</a>
</span>
</dd>
</dl>
<div class="shared-connections">
<h3>Shared Connections</h3>
<div class="progress-indicator"><img src="http://static01.linkedin.com/scds/common/u/img/anim/anim_loading_16x16.gif" width="16" height="16" alt="Loading"></div>
<ul>
</ul>
<p class="error-msg">
<span class="error">There was an error loading your shared connections. Refresh the page and try again.</span>
</p>
</div>
</div>
</li>
<li class="vcard expanded-view " id="vcard-9">
<div class="result-data">
<div class="actions">
<a href="/requestList?destID=82828415&amp;creationType=DC&amp;displayProposal=&amp;pvs=ps&amp;authToken=uja0&amp;authType=OUT_OF_NETWORK&amp;trk=pp_send_inmail_action&amp;goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2" class="primary-action trk-send-inmail messageicon" name="_sendInMailLink"><strong>Send InMail</strong></a>
<div class="dropdown action-dropdown">
<h3>See all results &#187;</h3>
<ul class="drop action-dropdown-list">
<li>
<a href="/requestList?destID=82828415&amp;creationType=REFERRAL&amp;displayProposal=&amp;pvs=ps&amp;trk=pp_get_intro_action&amp;goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2" class="external-link trk-get-intro" name="_getIntroducedLink"> Get introduced </a>
</li>
<li>
<a href="/forwardProfileMsg?displayCreate=&profileID=82828415&profileName=Phillip+E%2E+G%2E&network=I&authToken=uja0&authType=OUT_OF_NETWORK&trk=pp_share_profile_action" class="external-link trk-share-profile" name="_shareProfileLink"> Share Profile </a>
</li>
<li class="one-click">
<a href="#" class="trk-find-references" name="vcard-9">Find references</a>
</li>
</ul>
</div>
</div>
<a href="/profile/view?id=82828415&authType=OUT_OF_NETWORK&authToken=uja0&locale=en_US&srchid=26e4d6f3-1ee3-436f-b006-395fded1f576-0&srchindex=10&srchtotal=1317249&goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2&pvs=ps&trk=pp_profile_photo_link" class="profile-photo external-link trk-profile-photo" target="_top" tracking="hb_upphoto" data-li-larger-profile="http://media03.linkedin.com/media/p/2/000/068/3b8/1a0b9bf.jpg">
<img src="http://media02.linkedin.com/mpr/mpr/shrink_60_60/p/2/000/068/3b8/1a0b9bf.jpg" class="photo" alt="Phillip E. G." width="60" height="60">
<span class="larger-profile-photo-control"></span>
</a>
<h2>
<a href="/profile/view?id=82828415&authType=OUT_OF_NETWORK&authToken=uja0&locale=en_US&srchid=26e4d6f3-1ee3-436f-b006-395fded1f576-0&srchindex=10&srchtotal=1317249&goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2&pvs=ps&trk=pp_profile_name_link" class="fn n external-link trk-profile-name" title="View Profile" target="_top">
Phillip E. G.
</a>
<span class="badges">
<abbr title="Phillip E. G. is a 3rd degree contact"><span class="network-degree">3<sup>rd</sup></span></abbr>
</span>
<span class="saved-profile">
<a href="/organizer?trk=subpro_goto_srch" >Saved</a>
</span>
</h2>
<a href="/profile/view?id=82828415&authType=OUT_OF_NETWORK&authToken=uja0&locale=en_US&srchid=26e4d6f3-1ee3-436f-b006-395fded1f576-0&srchindex=10&srchtotal=1317249&goback=%2Efps_PBCK_instructor_*1_*1_*1_*1_*1_*1_*2_*1_Y_*1_*1_*1_false_1_R_*1_*51_*1_*51_true_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2_*2&pvs=ps" class="url">View Profile</a>
<dl class="vcard-basic">
<dt>Title</dt>
<dd class="title">Director of Training - Clark County Dive Rescue Team</dd>
<dt class="demographic-info">Demographic info</dt>
<dd class="location-industry">
<span class="location">
Portland, Oregon Area
</span>
<span class="separator">&#183;</span>
<span class="industry">
Public Safety
</span>
</dd>
<dt class="network-information">Network Information</dt>
<dd class="connections-recommendations">
500+ connections
<span class="separator">&#183;</span>
1 recommendation
</dd>
</dl>
<dl class="vcard-expanded">
<dt class="current">Current:</dt>
<dd class="show-less-text"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:28:59.303

据我了解，您需要做的就是使用浏览器中的后退按钮。

```
 @browser.back 
```

# sql-server - 更改列数据类型后截断（使用 ROUND）已停止工作

> ID：11365309
> 
> 赞同：2
> 
> 时间：2012-07-06T15:36:32.997
> 
> 标签：sql-server, sql-server-2008

我在第三方产品的 SQL Server 2008 数据库上使用以下查询来生成一些报告。

```
SELECT ROUND(SUM(Price),0,1) AS SumNetPrice FROM Transactions 
```

例如

```
 SUM(Price): 1.2345678
 ROUND(SUM(Price),0,1): 1 
```

到目前为止，这一直很好，并删除了所有小数位。事实上，奇怪的是，即使我没有根据 ROUND 函数的 MSDN 信息[http://msdn.microsoft.com/en-us/library/ms175003.aspx指定第三个参数，结果也会被截断。](http://msdn.microsoft.com/en-us/library/ms175003.aspx)

第 3 方公司现在已将价格列的数据类型从“真实”更改为小数 (22, 7)。不幸的是，这意味着即使我使用 ROUND 函数的截断选项，我也总是得到 7 个小数位。所以现在我得到：

```
 ROUND(SUM(Price),0,1): 1.0000000 
```

ROUND(expression,0,1) 不应该截断结果，所以我没有得到任何小数位吗？如何从 SQL 查询的结果中删除这些小数位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:40:27.290

为了使它像以前那样工作，是将类型从十进制转换为实数。这是您更新的查询以获得所需的输出。

```
select Cast(ROUND(SUM(Price),0,1) as Real) AS SumNetPrice FROM Transactions 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:44:23.157

```
SELECT CAST(ROUND(SUM(Price),0,1) AS DECIMAL(22,0)) AS SumNetPrice FROM Transactions 
```

# php - 使用 PHP 对 Google OAuth2 进行单元测试

> ID：11365311
> 
> 赞同：0
> 
> 时间：2012-07-06T15:36:35.170
> 
> 标签：php, unit-testing, google-api

我想知道是否有某种方法可以使用 Google API 进行单元测试，以使用 Google API PHP 客户端进行身份验证。

这是我想在我的单元测试用例中使用的那种代码示例。（但我当然想围绕它做更复杂的事情，这就是我需要进行单元测试的原因）

[http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/userinfo/index.php](http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/userinfo/index.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:50:57.833

这很混乱，但有可能。它不会完全是单元测试，但仍然......

你需要

*   要么为你的代码部分编写存根，这些部分对谷歌 api 进行实际请求，这将返回你的代码需要准备好的预定义响应。
*   或在您的本地网络中创建一个简单的单独服务，其行为类似于 google api 网络服务。这比听起来容易 - 一个简单的 php 脚本，带有一个开关和一个 readfile(responseFileNumberN)...

无论哪种方式，您都需要决定您需要模仿哪些谷歌的行为/错误。对实时服务进行测试是个坏主意。这样，您将测试不受您控制或网络连接的 google api，而不是您的应用程序。

# java - Java 构造函数中的引用

> ID：11365313
> 
> 赞同：0
> 
> 时间：2012-07-06T15:36:51.987
> 
> 标签：java, android

这是我的代码的第一个版本：

```
public class ListSchedule implements ListInterface {

    private ArrayList<Schedule> list;

    private String cookie;

    public ListSchedule() {
        this.list = new ArrayList<Schedule>();
    }

    public ArrayList<Schedule> getList() {
        return list;
    }
} 
```

在另一堂课上，我打了这个电话：

```
protected final ListSchedule parse(String jsonString)
        throws CustomException {

    ListSchedule list = new ListSchedule();

    JSONArray schedulesArray;

    try {

        // Convert the response to a JSONObject
        JSONObject json = new JSONObject(jsonString);

        try {

            int errorCode = json.getInt("error");

            // Check if there is no error from FilBleu server
            if (errorCode > 0) {
                throw new CustomException(
                        CustomException.ERROR_FILBLEU,
                        "DataAccessObject", "Server error "
                                + json.getInt("subError"));
            }

            try {
                String cookie = json.getString("cookie");
                list = new ListSchedule(cookie);
            } catch (JSONException e) {
                throw new CustomException(CustomException.JSON_FORMAT,
                        "DataAccessObject", "No cookie value");
            }

            schedulesArray = json.getJSONArray("schedules");

            // NullPointerException with the line below
            Log.d("DAO", list.getList().toString());

            parseSchedulesArray(list, schedulesArray);

        } catch (JSONException e) { // Unable to get the error code
            throw new CustomException(CustomException.JSON_FORMAT,
                    "DataAccessObject", "Bad JSON format ("
                            + e.getMessage() + ")");
        }

    } catch (JSONException e) { // Unable to convert response
        throw new CustomException(CustomException.JSON_FORMAT,
                "DataAccessObject", "Bad JSON format ("
                        + e.getMessage() + ")");
    }

    return list;
} 
```

然后我有一个`NullPointerException`从行`Log.d("DAO", list.getList().toString());`。所以我尝试了另一种解决方案。如您所见，唯一的区别是`list`属性的初始化：

```
public class ListSchedule implements ListInterface {

    private ArrayList<Schedule> list = new ArrayList<Schedule>();

    private String cookie;

    public ListSchedule() {
    }

    public ArrayList<Schedule> getList() {
        return list;
    }
} 
```

并且`NullPointerException`再也没有被抛出......

我不太了解初始化`list`属性的两种方式之间的区别。有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T15:39:52.587

我推测您的代码库中存在以下构造函数：

```
public ListSchedule(String cookie) {
        this.cookie = cookie;
    } 
```

您需要的是以下内容：

```
 public ListSchedule(String cookie) {
                this.cookie = cookie;
                this.list = new ArrayList<Schedule>();
            } 
```

在您的程序中调用此行进一步验证了这一点：

```
list = new ListSchedule(cookie); 
```

注意你没有在第二个构造函数中初始化列表。此外，您首先调用默认构造函数，但稍后将指向对象的指针重新分配到从 ListSchedule 的 String 构造函数创建的内容中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:54:33.493

您的代码正在调用此构造函数：

```
list = new ListSchedule(cookie); 
```

对我来说，它不会调用初始化您`ArrayList<Schedule>`并解释`NullReferenceException`

# git-svn - git-svn 克隆失败“致命：不是有效的对象名称”

> ID：11365317
> 
> 赞同：16
> 
> 时间：2012-07-06T15:37:19.647
> 
> 标签：git-svn

在此过程中，`git svn clone -s https://svn.example.com/repo/`我收到以下输出：

```
r3073 = a6132f3a937b632015e66d694250da9f606b8333 (refs/remotes/trunk)
Found possible branch point: https://svn.example.com/repo/trunk => https://svn.example.com/repo/branches/v1.3, 3073
W: Refspec glob conflict (ref: refs/remotes/trunk):
expected path: repo/branches/trunk
    real path: repo/trunk
Continuing ahead with repo/trunk
W: Refspec glob conflict (ref: refs/remotes/trunk):
expected path: repo/branches/trunk
    real path: repo/trunk
Continuing ahead with repo/trunk
W: Refspec glob conflict (ref: refs/remotes/trunk):
expected path: repo/branches/trunk
    real path: repo/trunk
Continuing ahead with repo/trunk
W: Refspec glob conflict (ref: refs/remotes/trunk):
expected path: repo/branches/trunk
    real path: repo/trunk
Continuing ahead with repo/trunk
fatal: Not a valid object name refs/remotes/tags/Sync Controllers
cat-file commit refs/remotes/tags/Sync Controllers: command returned error: 128 
```

运行`git branch -a`给出：

```
remotes/tags/Sync%20Controllers
remotes/tags/v1.1
remotes/trunk
remotes/v1.2 
```

我认为问题在于“remotes/tags/Sync Controllers”！=“remotes/tags/Sync%20Controllers”。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-06T15:37:20.490

SVN 上的标签中有一个空格，但 git 中的标签将此空格转换为`%20`（URL 编码）。要解决它，只需手动添加一个带有逐字名称的新标签：

```
cd .git/refs/remotes/tags/
mv Sync%20Controllers Sync\ Controllers 
```

然后再次运行该`git svn clone`命令。

*（通常你会这样做，`git tag OLDTAG NEWTAG`但 git 不允许我定义一个带有空格的标签。标签文件只是包含相关提交哈希的文本文件。）*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T14:31:42.660

您可以使用 git-svn 服务器端替代方案[SubGit](http://subgit.com/)以避免许多 git-svn 翻译问题。

我是一名 SubGit 开发人员，可以说我们为解决上述字符翻译问题做了很多工作；在这种特殊情况下，标签将被转换为`refs/tags/Sync+Controllers`标签。

另请注意，git-svn 已将 Subversion 标签翻译为分支而不是标签。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-12T01:54:55.180

我今天遇到了这个问题，并认为这个包含速度的分支并不重要，我只是运行

```
git branch -r -d partialPayment%202.4 
```

并重新运行`git`svn fetch 它跳过了当前分支并继续抓取下一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:00:22.820

我相信空格的问题在 Git >= 1.8.0 中已修复（参见：[#786942](https://bugs.launchpad.net/ubuntu/+source/git/+bug/786942)）。

所以你应该升级它。

我已经对其进行了测试，它似乎可以在最新版本的 git 中使用。

见 GitHub 主页：[https ://github.com/git/git](https://github.com/git/git)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-08T10:08:49.587

我正在使用 git 1.29.2 并且也遇到了问题。此外，它正在运行到 Windows Server 2016 并且 git 在 cygwin 下。

正在检查`/GitMigration/.git/svn/refs/remotes/origin`，并且该文件夹在那里有空格`%20`，所以没有什么可以改变的。

但是进入`packed-refs`产生问题的标签没有出现，没有名称，也没有哈希。

该问题应该有另一个与产生错误的其他相关问题，而不仅仅是这个。

查看`./.git/config`发现以下行的一系列重复：

```
branches = server/branches/*:refs/remotes/origin/*
tags = server/tags/*:refs/remotes/origin/tags/* 
```

每次我运行 git-svn clone 语句时都会产生这种情况。所以我确实从配置文件中删除了这些，保存并再次运行，但这次使用`git svn fetch`, 以防止再次重复行，voala !! 问题解决了。

# validation - Salesforce 验证规则确保字段不包含换行符

> ID：11365320
> 
> 赞同：1
> 
> 时间：2012-07-06T15:37:21.207
> 
> 标签：validation, salesforce

我正在尝试编写一个数据验证规则，以确保`Shipping Street`是一行（不包含换行符）

`CONTAINS( ShippingStreet , BR() )`我已经尝试过, 和之类的东西
`CONTAINS( ShippingStreet , "\n" )`，
但我无法触发规则。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T19:05:28.693

这将做到：

```
REGEX(ShippingStreet,'.*\\n.*') 
```

从这个关于 SFDC REGEX 解析的问题中可以学到两件事：

(1) 根据[Java SE 6 模式语法，当在编译为正则表达式的](http://java.sun.com/javase/6/docs/api/java/util/regex/Pattern.html)*字符串*中使用时，您需要对换行符 (\n) 以及各种其他特殊字符进行双重转义，即使用'\n'。

(2) Salesforce 正则表达式解析器默认匹配**整个短语**。要匹配短语的一部分，您必须用**.*包围您的模式**

例子：

```
 1\. REGEX('Marc Benioff','Marc Benioff') -> TRUE
 2\. REGEX('Marc Benioff is a CEO','Marc Benioff') -> FALSE
 3\. REGEX('Marc Benioff','.*Marc Benioff.*') -> TRUE
 4\. REGEX('Marc Benioff is a CEO','.*Marc Benioff.*') -> TRUE 
```

[有关更多信息，请阅读SFDC REGEX 帮助文档](https://login.salesforce.com/help/doc/user_ed.jsp?section=Customizing&target=customize_functions.htm#REGEX&loc=help)的“提示”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:47:35.153

验证规则中的以下内容应该意味着只接受仅包含字符的 ShippingStreet 值（因此没有换行符等）。

```
NOT(REGEX(ShippingStreet, '.*')) 
```

# c# - 如何在 vb.net/c# 或 vbscript 中创建 ISAPI 过滤器 DLL

> ID：11365324
> 
> 赞同：2
> 
> 时间：2012-07-06T15:37:40.850
> 
> 标签：c#, dll, asp-classic, vbscript, isapi

我在互联网上研究了很多关于创建一个但我发现只有一个是用 c++ 创建的。有没有办法在 c# 或 vb.net 中创建一个？谁能提供教程链接谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T03:17:25.450

回答您的问题：**不**，您不能在 C# 或 VB.NET 中创建 ISAPI。构建 ISAPI 需要使用非托管代码 - C 或 C++。

您可以使用 .NET 语言创建类似过滤器的功能，[从 IIS7 开始](http://msdn.microsoft.com/en-us/library/bb757017.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:04:46.097

更好地阅读反应而不是我的错误答案

c# 不是选择，isapi.dll 应该知道在 c# vb.net 中的痛苦完全相同，这就是为什么这些示例在 c++ 中它“应该”在 c# 中使用 regasm 是可能的，但真的......不要去那里，你会失去支持，例子等等等等......

如果你再告诉我一点，也许还有 isapi 的替代品（总是有替代品，甚至是你永远无法想象的酷的）....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:36:27.550

要回答我的问题 - 您必须在 C++ 中创建 ISAPI DLLS，没有其他方法可以做到这一点

# android - 广播接收器 (AsyncTask?) 中的 HttpPost (Android ≤ 4.0)

> ID：11365326
> 
> 赞同：0
> 
> 时间：2012-07-06T15:37:44.017
> 
> 标签：android, http-post, compatibility

我正在构建一个通过 HttpPost 将变量传递给我的服务器的应用程序。在我昨天将我的 Android 2.3 设备更新到 Android 4.0 之前，一切都运行良好。更新后，我正在处理的应用程序在每次运行 HttpPost 时都会崩溃。我认为由于相同的代码在 Android 2.3 中运行，问题在于它与更新的系统不兼容。

我可以传递相同的变量并仍然与 Android 2.3 - 4.0 兼容的最佳方式是什么？这里的最佳做法是什么？我对移动开发相当陌生。我的方法论如何？

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("MY URL");
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
  nameValuePairs.add(new BasicNameValuePair("receiver", "BLAH"));
   try {
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
   } catch (UnsupportedEncodingException e) {
    e.printStackTrace();
   }
   try {
    httpClient.execute(httpPost);
   } catch (ClientProtocolException e) {
    e.printStackTrace();
   } catch (IOException e) {
    e.printStackTrace();
   } 
```

**更新**

这是我的 LogCat

```
07-06 10:41:25.385: D/DroidGap(6856): DroidGap.onCreate()
07-06 10:42:09.205: I/dalvikvm(7330): Turning on JNI app bug workarounds for target SDK version 10...
07-06 10:42:09.275: D/AndroidRuntime(7330): Shutting down VM
07-06 10:42:09.275: W/dalvikvm(7330): threadid=1: thread exiting with uncaught exception (group=0x40acd210)
07-06 10:42:09.275: E/AndroidRuntime(7330): FATAL EXCEPTION: main
07-06 10:42:09.275: E/AndroidRuntime(7330): java.lang.RuntimeException: Unable to start receiver tellatext.sms.app.SmsReceiver: android.os.NetworkOnMainThreadException
07-06 10:42:09.275: E/AndroidRuntime(7330):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2229)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at android.app.ActivityThread.access$1500(ActivityThread.java:134)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1283)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at android.os.Looper.loop(Looper.java:137)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at android.app.ActivityThread.main(ActivityThread.java:4697)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at java.lang.reflect.Method.invokeNative(Native Method)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at java.lang.reflect.Method.invoke(Method.java:511)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at dalvik.system.NativeStart.main(Native Method)
07-06 10:42:09.275: E/AndroidRuntime(7330): Caused by: android.os.NetworkOnMainThreadException
07-06 10:42:09.275: E/AndroidRuntime(7330):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1119)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at java.net.InetAddress.lookupHostByName(InetAddress.java:441)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:243)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at tellatext.sms.app.SmsReceiver.onReceive(SmsReceiver.java:114)
07-06 10:42:09.275: E/AndroidRuntime(7330):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2221)
07-06 10:42:09.275: E/AndroidRuntime(7330): ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:43:59.217

Android 3.0 及更高版本不允许在主 UI 线程上发送网络请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:40:57.797

您需要在后台进程中运行您的 URL 请求。

这是示例代码

```
new TestTask().execute(); 
```

和

```
public class TestTask extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Void... params) {

        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("MY URL");
         List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
          nameValuePairs.add(new BasicNameValuePair("receiver", "BLAH"));
           try {
            httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
           }
           try {
            httpClient.execute(httpPost);
           } catch (ClientProtocolException e) {
            e.printStackTrace();
           } catch (IOException e) {
            e.printStackTrace();
           }
        return null;
    }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:44:10.000

好像您正在主线程上运行网络任务。

在 AsyncTask 中运行您的网络任务，因此它不会阻塞您的 UI 线程。永远不要在你的 UI 线程中运行阻塞任务。这是一个教程：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T15:50:41.253

1.  确保您使用的是 Asynctask（正如其他人所提到的）
2.  你在使用代理服务器吗？通常如果您通过 3G 连接到 Internet，移动运营商会在您的设备上自动设置代理服务器 + 端口。如果您正在使用它，请尝试清除它并再次运行您的应用程序。

# windows-phone-7 - ScheduledNotification 中的贪睡从哪里弹出？

> ID：11365331
> 
> 赞同：-1
> 
> 时间：2012-07-06T15:37:55.997
> 
> 标签：windows-phone-7

只是想知道使用 ScheduledNotification 时从哪里触发贪睡弹出窗口，我的意思是我想给它一些效果，以便获得一个花哨的弹出窗口，而不仅仅是普通的弹出窗口。试图检查所有地方，但找不到如何编辑或覆盖相同的内容。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:56:50.003

`ScheduledNotification`s 由操作系统处理，所以不能再“花哨”了——如果你想做一些不同的事情，你需要自己实现它，以及所有框架来实现。

# c++ - 使用 cookie 的完整路径创建 SoupCookieJarText

> ID：11365333
> 
> 赞同：0
> 
> 时间：2012-07-06T15:38:11.270
> 
> 标签：c++, c, webkit, gtk

我使用 webkitgtk 向 wxWebview 添加功能，但遇到了问题。我可以将文件名添加到soup_cookie_jar_text_new 但不能添加到cookie 的完整路径。该库使用当前工作目录，我想指向我的目录。就像是

```
SoupCookieJar* cookie = soup_cookie_jar_text_new("/path/to/cookies/cookie.txt", FALSE);//New cookie Jar to hold cookies 
```

有没有办法从自定义位置加载 cookiejar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:50:51.563

对不起朋友。通过路径有问题。所以这行代码完美运行！

```
SoupCookieJar* cookie = soup_cookie_jar_text_new("/path/to/cookies/cookie.txt", FALSE); 
```

# c# - 无法访问已处置的对象

> ID：11365338
> 
> 赞同：0
> 
> 时间：2012-07-06T15:38:27.790
> 
> 标签：c#, linq-to-sql

我在测试使用 LINQ to SQL 的 DAL 库时遇到问题

正在测试的方法如下（一个简单的）：

```
public List<tblAccount> GetAccountsByCustomer(tblCustomer customer)
{
    using (OnlineBankingDataClassesDataContext dbcntx = new OnlineBankingDataClassesDataContext())
    {
        var accounts = dbcntx.tblAccounts.Where(p => p.tblCustomer.ID.CompareTo(customer.ID)==0);
        return accounts.ToList<tblAccount>();
    }
} 
```

测试代码如下：

```
static tblCustomer GetTopOneCustomer()
{
    OnlineBankingDataClassesDataContext dbcntx = new OnlineBankingDataClassesDataContext();
    var customers = dbcntx.tblCustomers.Take(1);
    return customers.Single<tblCustomer>();
}

public static void Should_List_All_Account_By_Customer()
{

    tblCustomer customer = GetTopOneCustomer();

    DataController dc = new DataController();
    List<tblAccount> accounts=dc.GetAccountsByCustomer(customer);
    foreach (tblAccount account in accounts)
    {
        string accountdetails=string.Format("Account ID:{0} \n Account Type:{1} \n Balance:{2} \n BranchName:{3} \n AccountNumber:{4}",
                        account.ID.ToString(), account.tblAccountType.Name, 
                        account.Balance.ToString(),
                        account.tblBranch.Name, account.Number);

        Console.WriteLine(accountdetails);

    }
} 
```

我收到错误消息“无法访问已处置的对象”。在这种情况下访问关联对象时，我使用的是`account.tblAccountType.Name`. 我知道这与`DataContext`. 我该如何让这段代码工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:47:04.627

`dbcntx`是一次性物品。垃圾收集器可以在`GetTopOneCustomer()`被调用后的任何时间出现并处理它。这就是看起来正在发生的事情。

尝试更改`GetTopOneCustomer()`为：

```
static tblCustomer GetTopOneCustomer(OnlineBankingDataClassesDataContext dataContext) 
{
    //Stuff
} 
```

然后在里面`Should_List_All_Account_By_Customer()`改变它：

```
using (OnlineBankingDataClassesDataContext dataContext = new OnlineBankingDataClassesDataContext())
{
    tblCustomer customer = GetTopOneCustomer(dataContext); 
    //More Stuff
} 
```

这样您就可以控制`dataContext`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:49:10.937

由于 DataContext 在 using 语句中，`using (OnlineBankingDataClassesDataContext dbcntx = new OnlineBankingDataClassesDataContext())` 一旦上下文超出范围，就会调用 Disposed。这会导致所有实体都被分离，并且需要 DataContext 的实体上的所有操作都将失败。`account.Balance.ToString()`这就是调用时发生的情况。

解决这个问题的一种方法是创建一个新的上下文并使用`context.Attach(entity)`.

# javascript - Kineticjs：drag.movi ng 事件在最新版本上不起作用。如何升级代码？

> ID：11365342
> 
> 赞同：0
> 
> 时间：2012-07-06T15:38:37.207
> 
> 标签：javascript, animation, kineticjs

我正在使用 Kineticjs 的 v3.10.2。我正在关注[官方演示](http://www.html5canvastutorials.com/labs/html5-canvas-interactive-ball-physics/) 问题在第48行（评论说：“//如果拖放”）

在最新版本`.drag`中已经去掉了替换wi的`.isDragging()`方法。但是`.moving`房产呢？它未定义。

如何使它与 Kineticjs 的最新版本一起使用

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:34:44.787

感谢那些抽出时间提供帮助的朋友。

我只是把使用 3.7.4 版本 KineticJS 的代码升级到 3.10.0

它工作得很好。

请看一下[小提琴](http://jsfiddle.net/jeykeu/DNAYK/)

这是[原始示例](http://www.html5canvastutorials.com/labs/html5-canvas-interactive-ball-physics/#comment-16382)

快乐编码

问候，

# jquery - jQuery DataTable 在 asp.net mvc 4 中不起作用

> ID：11365344
> 
> 赞同：3
> 
> 时间：2012-07-06T15:38:49.360
> 
> 标签：jquery, asp.net-mvc, datatable

我一直在尝试各种方法将 jQuery DataTables 插入我的 mvc 应用程序。在阅读了[http://datatables.net/blog/Microsoft_CDN](http://datatables.net/blog/Microsoft_CDN)之后，我决定使用 Microsoft 的 CDN 可能是让 DataTable 启动并运行的最简单方法。

我将博客示例中的确切代码复制并粘贴到 Index.vbhtml 中，但我得到“$("#example").dataTable is not a function”。我也尝试使用 DataTable 调试器，但它在我的页面上找不到任何 DataTables。

因为我是一个 ASP.net 菜鸟，而且我在任何地方都没有发现任何类似的问题，所以我觉得问题很简单，我只是忽略了。因此，如果这是一个荒谬的问题，我提前道歉，但非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:40:44.893

我怀疑与不同版本的 jquery 有冲突。CDN 上的版本和 MVC 站点中捆绑的 jquery 版本可能存在冲突。

在您的 /Views/Shared/_Layout.vbhtml（或 C# 的 _Layout.cshtml）中查找此行：

```
@Scripts.Render("~/bundles/jquery") 
```

把它注释掉，然后再试一次，如果它有效，那么它是一个冲突。

# python - 在没有默认排序的情况下将数据存储在 django 应用程序的表中

> ID：11365345
> 
> 赞同：0
> 
> 时间：2012-07-06T15:38:55.433
> 
> 标签：python, django, linux, ubuntu, sqlite

我的代码：

```
for name, count1 in list:
    s = Keywords(file_name=name,frequency_count=count1)
    s.save() 
```

这是我在 django 中创建的应用程序的 views.py 文件中的一段代码。在本节中，这是我在表中存储数据的方式。这些数据以我不想要的文件名的递增顺序存储。我尝试使用没有任何参数但没有效果的 order_by() 函数。数据仍按升序存储。请提出一些解决方案。

我是 django 和 sqlite3 的新手。所以，

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:47:38.017

秩序是密不可分的。查询集总是按*某事*排序，即使它只是主键的默认值。这实际上是一个数据库的东西，而不是 Django 的东西。数据库固有地按主键对数据进行排序，除非被其他东西告知要排序。如果您想要真正的随机排序，那么您可以使用`order_by('?')`，但这会显着增加数据库必须做的工作。

# javascript - 使用 kineticjs 如何将图像对象旋转到位？

> ID：11365349
> 
> 赞同：2
> 
> 时间：2012-07-06T15:39:13.337
> 
> 标签：javascript, animation, kineticjs

考虑以下代码：

```
var stage = new Kinetic.Stage({
            container : "container",
            width : 600,
            height : 200
        });

var layer = new Kinetic.Layer();

// one revolution per 4 seconds
var angularSpeed = Math.PI / 2;

var imageObj = new Image();
var image = {};
imageObj.onload = function() {
    image = new Kinetic.Image({
                x : 500,
                y : 135,
                image : imageObj,
                width : 99,
                height : 99,
                offsetX: 0,
                offsetY: 0
            });
    image.rotation = 0;

    layer.add(image);
    stage.add(layer);
    stage.onFrame(function(frame) {
                var angleDiff = frame.timeDiff * angularSpeed / 1000;
                image.rotateDeg(angleDiff);

                layer.draw();
            });
                stage.start();

};
imageObj.src = "images/tire-brands.png"; 
```

如何使图像就地旋转，例如 360 度，但枢轴点在中心？

所以，当我制作图像对象时，目标是让动画在那里运行。目前它只在一侧旋转图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:24:02.000

您需要使用 offset 属性（不确定您从哪里获得 offsetX 和 offsetY - KinectJS 的旧版本？）：

```
image = new Kinetic.Image({
            x : 500,
            y : 135,
            image : imageObj,
            width : 99,
            height : 99,
            offset: [50, 50]
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:20:35.867

```
function rotate(angle){ // 90 or -90
    if(stage.getHeight() <= image.getWidth()){ 
        aspect = image.getWidth() / image.getHeight();
        height = stage.getHeight() / aspect;
        image.setWidth(stage.getHeight());
        image.setHeight(height);
    }
    image.setOffset(image.getWidth()/2,image.getHeight()/2);
    image.setPosition(stage.getWidth()/2,stage.getHeight()/2);
    image.rotateDeg(angle);
    layer.draw();
} 
```

上面的代码帮助我旋转图像

# c++ - 如何实现高效的 C++ 运行时统计

> ID：11365351
> 
> 赞同：11
> 
> 时间：2012-07-06T15:39:18.783
> 
> 标签：c++, linux, statistics, embedded, runtime

我想知道是否有一种监视我的应用程序内部的好方法，最好是以现有库的形式。

我的应用程序是多线程的，并且使用消息系统在线程之间和与外部世界进行通信。我的目标是监控发送的消息类型、频率等。

还可能有其他更通用的统计信息，例如每分钟产生多少线程，调用了多少新/删除，或更具体的应用程序方面；你的名字。

令人敬畏的是您为 Google Chrome 提供的“内部页面”，例如[net](http://www.chromium.org/developers/design-documents/network-stack/view-net-internals)或 chrome://tracing ，但以命令行方式。

如果有一个足够通用的库来适应我的应用程序的特殊性，那就太好了。
否则我准备实现一个可以完成这项工作的小类，但我不知道从哪里开始。我认为最重要的是代码不应该过多干扰，以免影响性能。

你们对这个问题有什么建议吗？

编辑：我的应用程序在 Linux 上运行，在嵌入式环境中，遗憾的是 Valgrind 不支持 :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:05:43.083

我猜你正在尝试收集运行时统计信息——比如你发送了多少字节，你已经运行了多长时间，以及用户激活了特定功能的次数。

通常，为了从各种来源（如工作线程）编译诸如此类的运行时统计数据，我会让每个来源（线程）增加自己的最基本数据的本地计数器，但不执行任何冗长的数学运算或尚未对该数据进行分析。

然后回到主线程（或者你想要分析和显示这些统计数据的任何地方），我向`RequestProgress`每个工作线程发送一条类型消息。作为响应，工作线程将收集所有基本数据并可能执行一些简单的分析。这些数据连同基本分析的结果一起以`ProgressReport`消息的形式发送回请求（主）线程。然后主线程聚合所有这些数据，进行额外的（可能是昂贵的）分析、格式化和显示给用户或记录。

主线程`RequestProgress`根据用户请求（例如当他们按下`S`键时）或按时间间隔发送此消息。如果我想要一个定时间隔，我通常会实现另一个新的“心跳”线程。这个线程所做的只是`Sleep()`在指定的时间内，然后向`Heartbeat`主线程发送一条消息。主线程反过来通过向每个要从中收集统计信息的工作线程`Heartbeat`发送消息来处理此消息。`RequestProgress`

收集统计数据的行为似乎应该相当简单。那么为什么会有如此复杂的机制呢？答案是双重的。

首先，工作线程有工作要做，而不是计算使用统计。试图重构这些线程以承担与其主要目的正交的第二个责任有点像试图将一个方形钉塞进一个圆孔。它们不是为此而构建的，因此代码将抵制被编写。

其次，如果您尝试做太多、太频繁，则运行时统计的计算可能会很昂贵。例如，假设您有一个在网络上发送多播数据的工作线程，并且您想要收集吞吐量数据。多少字节，在多长时间内，平均每秒多少字节。您可以让工作线程自行计算所有这些，但工作量很大，而且 CPU 时间最好由工作线程来做它应该做的事情——发送多播数据。相反，如果您只是为每次发送消息时发送的字节数增加一个计数器，则计数对线程性能的影响很小。然后回应偶尔的`RequestProgress`消息，您可以计算出开始和停止时间，然后将其发送以让主线程完成所有划分等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T15:44:53.763

我建议在您的代码中，维护递增的计数器。计数器可以是`static`类成员或全局变量。如果您使用类来定义您的计数器，您可以让构造函数将您的计数器注册到单个存储库以及名称。然后，您可以通过查询存储库来查询和重置您的计数器。

```
struct Counter {
    unsigned long c_;
    unsigned long operator++ () { return ++c_; }
    operator unsigned long () const { return c_; }
    void reset () { unsigned long c = c_; ATOMIC_DECREMENT(c_, c); }
    Counter (std::string name);
};

struct CounterAtomic : public Counter {
    unsigned long operator++ () { return ATOMIC_INCREMENT(c_, 1); }
    CounterAtomic (std::string name) : Counter(name) {}
}; 
```

`ATOMIC_INCREMENT`将是一种特定于平台的机制，可以原子地增加计数器。`__sync_add_and_fetch`GCC为此提供了一个内置的。`ATOMIC_DECREMENT`类似，内置 GCC `__sync_sub_and_fetch`。

```
struct CounterRepository {
    typedef std::map<std::string, Counter *> MapType;
    mutable Mutex lock_;
    MapType map_;
    void add (std::string n, Counter &c) {
        ScopedLock<Mutex> sl(lock_);
        if (map_.find(n) != map_.end()) throw n;
        map_[n] = &c;
    }
    Counter & get (std::string n) const {
        ScopedLock<Mutex> sl(lock_);
        MapType::const_iterator i = map_.find(n);
        if (i == map_.end()) throw n;
        return *(i->second);
    }
};

CounterRepository counterRepository;

Counter::Counter (std::string name) {
    counterRepository.add(name, *this);
} 
```

如果你知道同一个计数器会增加一个以上的线程，那么使用`CounterAtomic`. 对于特定于线程的计数器，只需使用`Counter`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T19:19:56.643

使用共享内存（POSIX、System V、mmap 或任何可用的内存）。通过将原始内存块转换为数组定义，在其中放置一个固定长度的 volatile 无符号 32 位或 64 位整数数组（即您可以在平台上以原子方式递增的最大值）。请注意， volatile 不会让您获得原子性。它可以防止可能会破坏您的统计值的编译器优化。使用 gcc 的 __sync_add_and_fetch() 或较新的 C++11 atomic<> 类型等内在函数。

然后，您可以编写一个附加到同一块共享内存的小程序，并可以打印出一个或所有统计信息。这个小型统计阅读器程序和您的主程序必须共享一个公共头文件，该文件强制执行每个统计数据在数组中的位置。

这里明显的缺点是你被固定数量的计数器困住了。但就性能而言，它很难被击败。影响是程序中各个点处整数的原子增量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T19:46:45.810

在嵌入式系统中，一种常见的技术是为“日志”保留一块内存，并将其视为循环队列。编写一些可以读取这块内存的代码；这将有助于在运行时拍摄“快照”。

在网上搜索“调试日志”。应该打开一些你可以用来玩的来源。我去过的大多数商店通常都是自己开的。

如果您有额外的非易失性内存，您可以保留一个区域并写入该区域。如果您的系统足够大以支持文件系统，这也将包括文件。

最坏的情况，将数据写入调试（串行）端口。

对于实际的实时测量，我们通常使用连接到 GPIO 或测试点的示波器，并将脉冲输出到 GPIO/测试点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-25T19:10:32.923

这是一个很好的答案，@John Dibling！我有一个与此非常相似的系统。但是，我的“stat”线程每秒查询工作线程 10 次，它会影响工作线程的性能，因为每次“stat”线程请求数据时，都会有一个关键部分访问这些数据（计数器等）并且它表示在检索此数据时工作线程被阻塞。事实证明，在工作线程负载很重的情况下，这种 10Hz 的统计查询会影响工作线程的整体性能。

所以我切换到一个稍微不同的统计报告模型——而不是从主线程主动查询工作线程，我现在有工作线程向他们的专有统计存储库报告它们的基本统计计数器，主线程可以随时查询对工人没有直接影响。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T15:45:02.920

看看 valgrind/callgrind。

它可以用于分析，这是我理解你正在寻找的。我认为它在运行时不起作用，但它可以在您的过程完成后生成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-24T06:40:02.843

如果您使用的是 C++11，则可以使用 std::atomic<>

```
#include <atomic>

class GlobalStatistics {
public:

    static GlobalStatistics &get() {
        static GlobalStatistics instance;
        return instance;
    }

    void incrTotalBytesProcessed(unsigned int incrBy) {
        totalBytesProcessed += incrBy;
    }

    long long getTotalBytesProcessed() const { return totalBytesProcessed; }

private:

    std::atomic_llong totalBytesProcessed;

    GlobalStatistics() { }
    GlobalStatistics(const GlobalStatistics &) = delete;
    void operator=(const GlobalStatistics &) = delete;
}; 
```

# objective-c - 保存和加载高分

> ID：11365352
> 
> 赞同：4
> 
> 时间：2012-07-06T15:39:20.437
> 
> 标签：objective-c, xcode, uilabel, nsuserdefaults

我尝试使用 NSUserDefults 为我的游戏保存和加载高分（nsinteger）。我创建了一个 void 函数来检查 gameoverscore 是否大于我的 highscore 以及是否可以在它们之间切换。我希望每次比赛结束时都会有一个标签显示我的当前高分。为此，我为我的 NSUsweDefults 创建了一个属性，在我的 viewdidload 中我尝试加载当前的高分和另一个函数（checkIfHighscore）。这是我的 NSUserDefults 属性：

```
@property(readwrite) NSUserDefaults *prefs; 
```

这是我的 viewdidload 代码：

```
 NSInteger currectHighscore =  [prefs integerForKey:@"highscore"];
    highScoreLabel.text = [NSString stringWithFormat:@"%d",currectHighscore]; 
```

这是我的 checkIfHighscore：

```
-(void)checkIfHighScore
{
    if(gameOverScore > highScore)
    {
        highScore = gameOverScore;
        [self newHighscoreAnimation];

        [prefs setInteger:highScore forKey:@"highscore"];
        [prefs synchronize];

    }
    highScoreLabel.text = [NSString stringWithFormat:@"Highscore:  %d", highScore];
} 
```

当我进入这个视图控制器时，我的高分标签显示为 0，就像它没有保存我的高分一样。

我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:48:53.230

```
// Snippet used to save your highscore in the prefs.
int highScore  = yourGameScore;
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:highScore] forKey:@"HighScore"];
[[NSUserDefaults standardUserDefaults] synchronize];

// Snippet used to get your highscore from the prefs.
highScore = [[[NSUserDefaults standardUserDefaults] objectForKey:@"HighScore"] intValue ]; 
```

# asp.net - 当我将 Default.aspx 设置为默认页面时，IIS 一直重定向到 Login.aspx

> ID：11365356
> 
> 赞同：1
> 
> 时间：2012-07-06T15:39:29.530
> 
> 标签：asp.net, iis

`Login.aspx`当我设置`Default.aspx`为默认页面时， IIS 不断将我重定向到。在我的开发环境中，它工作正常，我进入了正确的页面，但是一旦我从 IIS 服务器发布并尝试，login.aspx 总是首先出现。

我已确保允许匿名用户：

```
 <location path="Default.aspx">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location> 
```

并将其设置为默认网址（在配置的下方）：

```
<authentication mode="Forms">
  <forms loginUrl="Login.aspx" defaultUrl="Default.aspx"></forms>
</authentication>
<authorization>
  <deny users="?" />
</authorization> 
```

我什至在 IIS 中设置了默认页面，但每次发布时都会重置它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T17:47:52.180

尝试将 Authenticated User 添加到 IIS 中 web 文件夹的安全属性。授予该用户修改权限（读取、写入、修改、列出文件夹内容、读取和执行）。

这当然应该只是临时情况，以验证您是否有权限问题。您应该考虑为站点用户设置适当的权限。

//和平

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-14T20:24:19.207

我花了大约 6 个小时来调试这个问题。我们的网站运行良好，突然它开始重定向到登录页面而不是默认页面（未经身份验证）。我们的 web.config 正确包含所有身份验证/授权设置。

```
 <authentication mode="Forms">
      <forms name="MyAuth" path="/" loginUrl="login.aspx" protection="All" timeout="30" />
    </authentication>
    <authorization>
      <deny users="?" />
    </authorization>

  <system.webServer>
    <defaultDocument>
      <files>
        <clear />
        <add value="default.htm" />
      </files>
    </defaultDocument>
...
  </system.webServer>

  <location path="default.htm">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location> 
```

...

解决方案：您需要从您的网站中删除无扩展 URL 功能。参考： https: [//support.microsoft.com/en-us/help/2526854/users-may-be-redirected-to-the-login-page-of-an-asp-net-4-application](https://support.microsoft.com/en-us/help/2526854/users-may-be-redirected-to-the-login-page-of-an-asp-net-4-application)

```
<system.webServer>

     <handlers>
          <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
          <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
          <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
     </handlers>

     <validation validateIntegratedModeConfiguration="false" />

</system.webServer> 
```

修复后，网站恢复正常。

# php - PDO - 将字段名称作为变量传递

> ID：11365357
> 
> 赞同：4
> 
> 时间：2012-07-06T08:57:03.420
> 
> 标签：php, mysql, pdo, migration

我只是将我的代码从 mysql_query 样式命令迁移到 PDO 样式，但遇到了问题。旧代码如下所示：

```
$query_list_menu = "SELECT ".$_GET['section_name']." from myl_menu_hide_show WHERE id='".$_GET['id']."'"; 
```

更新后的代码如下所示。显然它不起作用。我存储在`$_GET['section_name']`一个字符串中，该字符串表示数据库中的字段名称。但是我认为当我将它作为变量传递时会出现问题。下面的代码有效吗？谢谢。

```
$query_list_menu = "SELECT :section_name from myl_menu_hide_show WHERE id=:id";
$result_list_menu = $db->prepare($query_list_menu);
$result_list_menu->bindValue(':section_name', $_GET['section_name'] , PDO::PARAM_STR);
$result_list_menu->bindValue(':id', $_GET['id'] , PDO::PARAM_INT);  
$result_list_menu->execute(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T09:04:38.790

如果`$_GET['section_name']`包含列名，您的查询应该是：

```
$query_list_menu = "SELECT " . $_GET['section_name'] . " from myl_menu_hide_show WHERE id=:id"; 
```

给予：

```
$query_list_menu = "SELECT :section_name from myl_menu_hide_show WHERE id=:id";
$result_list_menu = $db->prepare($query_list_menu);
$result_list_menu->bindValue(':id', $_GET['id'] , PDO::PARAM_INT);  
$result_list_menu->execute(); 
```

原因是您希望列的实际名称出现在查询中 - 您已将其更改为参数，这并没有多大意义。

我还要补充一点，`$_GET['section_name']`像这样直接使用会带来巨大的安全风险，因为它允许 SQL 注入。我建议您`$_GET['section_name']`在构建和执行查询之前通过对照列列表检查它的值来验证它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-22T12:38:48.870

根据用户的选择从记录中只选择一个字段没有好的和安全的方法。最明智的解决方案是选择整行，然后返回唯一请求的字段

```
$sql = "SELECT * from myl_menu_hide_show WHERE id=?";
$stmt = $db->prepare($query_list_menu);
$stmt->execute([$_GET['id']]);
$row = $stmt->fetch();
return $row[$_GET['section_name']] ?? false; 
```

# javascript - 谷歌地理编码器找到的是乔治亚州，而不是国家

> ID：11365360
> 
> 赞同：2
> 
> 时间：2012-07-06T15:39:31.893
> 
> 标签：javascript, google-maps-api-3

我有一个带有搜索栏的全球比例地图，允许用户搜索一个国家，当他们点击按钮时，它将放大到他们搜索的国家（使用谷歌地理编码器）。我的问题是，当我将“Georgia”传递给地理编码器时，它会找到乔治亚州，而不是国家。有没有办法避免这种情况？如何指定格鲁吉亚的国家，而忽略美国的格鲁吉亚？

在这里试试：[https ://mywebspace.wisc.edu/csterling/web/practice.html](https://mywebspace.wisc.edu/csterling/web/practice.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T15:43:45.273

它对我有用，我做了以下事情：

单击“按国家/地区搜索”，而不是仅键入“格鲁吉亚”，而是输入“格鲁吉亚国家”，它就可以工作了。

由于谷歌地图地理编码器就像谷歌搜索一样，它是“智能的”。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:06:14.843

我用的是“格鲁吉亚国家”。 [例子](http://geocodezip.com/v3_zoom2countrySelectList.html)

# c# - 具有未定义项目计数的 XML 模式

> ID：11365363
> 
> 赞同：1
> 
> 时间：2012-07-06T15:39:44.387
> 
> 标签：c#, .net, xml, serialization, schema

我在制作 XML-Schema 时遇到了一点麻烦。

这是我在 items.xml 中的一个小例子

```
<items>    
  <category name="Sample Category #1">
    <category name="Sample Subcategory #1.1">
      <object>
        <name>Sample Inner Object</name>
        <desc>Sample Description</desc>
      <object>
    </category>
    <object>
      <name>Sample Name</name>
      <desc>Sample Description #2</desc>
    <object>
  </category>
  <category name"MyCat #2">
    <object>
      <name>Another Object</name>
      <desc>Another Description</desc>
    <object>
  </category>
</items> 
```

现在，正如您已经看到的，一个类别中可以有“无限”子类别。它们可以包含对象，但它们的父项也可以包含对象。这描述了我的问题：我如何在 xsd 中定义我想在我的第一层中拥有 -Elements 以及子层中的“无限”可能性或只是对象（包含这两个元素）。

xsd 是否可能（我想是这样，但我不知道如何）还是我选择将 xml 用于这种“数据库”完全错误？

PS：我想稍后在 C# 中实现这个结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:26:45.617

这有帮助吗？

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:complexType name="categoryType">
    <xs:sequence>
        <xs:element name="category" type="categoryType" minOccurs="0" maxOccurs="unbounded"/>
        <xs:element name="object" minOccurs="0" maxOccurs="unbounded">
            <xs:complexType>
                <xs:sequence>
                    <xs:element name="name" type="xs:string"/>
                    <xs:element name="desc" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
    </xs:sequence>
    <xs:attribute name="name" type="xs:string" use="required"/>
</xs:complexType>

<xs:element name="items">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="category" type="categoryType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
</xs:schema> 
```

# django - 如果使用 South，那么底层数据库是什么是否重要？

> ID：11365372
> 
> 赞同：1
> 
> 时间：2012-07-06T15:40:04.723
> 
> 标签：django

今天我开始了我的 postgresql 的第一步，因为它被 Django 团队推荐。

我遇到了几个问题，我耐心地一一解决。

1）在 postgresql 下创建表需要以不同的操作系统登录名登录，您甚至不知道密码。很好，我找到了解决方案并创建了数据库。

2）运行syncdb后，不能像这样简单地执行一个简单的insert sql：

```
INSERT INTO App_contacttype (contact_type, company_id) VALUES ('Buyer', 1),('Seller', 1); 
```

由于 Django 使用引号创建它，表变得区分大小写，因此它必须是这样的：

```
INSERT INTO "App_contacttype" (contact_type, company_id) VALUES ('Buyer', 1),('Seller', 1); 
```

但问题似乎永远不会结束。现在突然插入脚本的执行说

```
ERROR: value too long for type character varying(40)
SQL state: 22001 
```

在 MySQL 中，这没有问题。我不知道，现在我有点冷，也许我应该坚持使用 MySQL。

我考虑使用 postgresql 的唯一原因是一些研究表明 postgresql 比 MySQL 对更改模式的支持要好得多。

但是考虑到[http://south.aeracode.org/](http://south.aeracode.org/)会消除同步模式的所有痛苦，无论底层数据库是什么，我都需要担心模式变化吗？

# ios - 静态 UITableView 的更新部分

> ID：11365375
> 
> 赞同：2
> 
> 时间：2012-07-06T15:40:14.417
> 
> 标签：ios, xcode, ipad, static, tableview

我希望有人能帮帮忙...

我已经设置了一个包含四个部分的静态 UITableView 控制器。前两个部分用于输入数据。第三部分有 1 个单元格并包含一个保存按钮。

最后一部分有 6 个单元格，从长远来看，我希望能够用前两个部分的数据填充这六个单元格......

所以我尝试了一个小例子，但它不起作用。控制台返回以下错误：

> UITableView dataSource 必须从 tableView 返回一个单元格：cellForRowAtIndexPath:' ***首先抛出调用堆栈：

这是一个例子：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    NSIndexPath *EditRow = [NSIndexPath indexPathForRow:1 inSection:4];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:EditRow];

    NSString *test = @"Test";
    cell.textLabel.text = test;

    NSLog(@"Index Path: %d", indexPath.row);
    NSLog(@"Cell ID:, %@", CellIdentifier);

    return cell;
} 
```

所以我的问题归结为..如何更新特定部分中的特定单元格？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T16:38:08.597

当我实现静态单元格时，我从Xcode 生成的通用存根中删除了`cellForRowAtIndexPath`、`numberOfSectionsInTableView`和方法；这些似乎只有在您处理动态单元格时才有必要。`numberOfRowsInSection``UIViewController`

然后，通过在情节提要中进行控制拖动，我为单元格中需要以编程方式设置的所有 UI 元素创建命名出口；就我而言，这些通常是`UILabel`s。在`viewDidLoad`控制器的方法中，我给这些网点设置了合适的初始值，例如：

```
self.nameLabel.text = self.dataSource.name; 
```

一旦你把它连接起来，你可以随意改变任何值。

我希望这对你有用。我很乐意向任何有更好（更合适？）这样做的人学习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:43:03.417

只需调用 - [UITableView (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation]，然后您的数据源将被调用以获取适当的索引路径。

# amazon - 如何获取所有卖家列表？

> ID：11365377
> 
> 赞同：6
> 
> 时间：2012-07-06T15:40:19.020
> 
> 标签：amazon, amazon-mws

我需要获取有关我的亚马逊卖家中心账户中所有商品的数据。

我检查了亚马逊可以生成的可用报告，最好的是开放列表报告——最好的——我的意思是它提供了比其他报告更多的数据，但仍然缺少很多，例如 EAN、照片 URL。

然而，开放列表报告有一个问题 - 它裁剪列表的长标题并放置“...”后缀。它还将产品类型字符串添加到标题，例如“标题 [电子]”。

因此，虽然公开列表报告可以用作“总比没有好”，但我需要一些更体面的东西。

是否有其他东西可以用来完成我的任务，或者该报告是我能得到的最好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:58:44.687

您可以从亚马逊 MWS 请求“_GET_MERCHANT_LISTINGS_DATA_”报告，这将为您提供最多的数据，包括照片 URL。

不幸的是，标题数据仍然被缩短并且产品类型仍然被添加。

可以在[文档](http://s3.amazonaws.com/devo.docs.developer.amazonservices.com/en_DE/reports/Reports_ReportType.html)中找到所有库存报告的列表。

您也可以尝试使用[Products API](http://s3.amazonaws.com/devo.docs.developer.amazonservices.com/en_DE/products/Products_Overview.html)。

这将为您提供有关具有正确标题的每个产品的非常详细的数据，但是您必须发送查询以获取结果，而不是在单个报告中获取所有内容。

# iis - 找不到 IIS AppPool 标识

> ID：11365379
> 
> 赞同：4
> 
> 时间：2012-07-06T15:40:20.910
> 
> 标签：iis

我有一台 Win 2008 R2 Enterprise 机器，它运行良好的多个网站，每个网站都有自己的应用程序池。

我没有问题授予 IIS AppPool\A、IIS AppPool\B 等权限（使用 Windows GUI）...但是今天我又创建了一个应用程序池“C”，但我在 GUI 中找不到它，也无法使用icacls 命令。我正在尝试将文件夹中的权限授予 IIS AppPool\C 但它说找不到！我在搜索中包含内置的安全主体，如果我键入任何现有的应用程序池身份窗口，则可以找到。问题就在于这个新的。

有谁知道发生了什么？

我不知道它是否已更新，但对该服务器所做的唯一更改是为 http 和非 http 启用 .net 3.5 WCF 激活。启用此功能后，我在所有 .net 4 站点中都出现错误，并通过运行 aspnet_regiis.exe /iru 进行修复，如此处所述[http://devonenote.com/2010/06/could-not-load-type-system-servicemodel-激活-httpmodule](http://devonenote.com/2010/06/could-not-load-type-system-servicemodel-activation-httpmodule)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T20:47:25.807

事实证明，您需要第一次启动关联的 IIS 应用程序，然后才能在 Windows GUI 中看到您的应用程序池！

# c# - 绑定到返回子集合的集合中的属性

> ID：11365380
> 
> 赞同：0
> 
> 时间：2012-07-06T15:40:23.780
> 
> 标签：c#, wpf, xaml, data-binding, observablecollection

有没有办法将 ListBox 'ItemsSource' 绑定到 SeriaCollection XAxeLabels 或 YAxeLabels？

如果没有办法-我想知道为什么-解决方法是什么？

*当前指定的 Binding 似乎没有这样做。*

```
public class AxeLabel
{
    public string Text { get; set; }
    public Brush Foreground { get; set; }
    public double X { get; set; }
    public double Y { get; set; }
}    

public class AxeLabels : ObservableCollection<AxeLabel>
{}

public class Seria
{
    public string Name { get; set; }
    public Brush Color { get; set; }
    public double Thickness { get; set; }
    public PointCollection Points { get; set; }
}

public class SeriaCollection : ObservableCollection<Seria>
{
    public AxeLabels XaxeLabels { get; set; }
    public AxeLabels YaxeLabels { get; set; }
} 
```

```
 <Window.Resources>
    <my:SeriaCollection x:Key="mySeria">
        <my:SeriaCollection.YaxeLabels>
            <my:AxeLabel Text="3" X="0" Y="0" Foreground="Black" />
            <my:AxeLabel Text="5" X="0" Y="-10" Foreground="Black" />
            <my:AxeLabel Text="10" X="0" Y="-20" Foreground="Black" />
            <my:AxeLabel Text="20" X="0" Y="-30" Foreground="Black" />
        </my:SeriaCollection.YaxeLabels>
        <my:SeriaCollection.XaxeLabels>
            <my:AxeLabel Text="Jan-1-2013" X="0" Y="0" Foreground="Black" />
            <my:AxeLabel Text="Jan-9-2013" X="20" Y="0" Foreground="Black" />
            <my:AxeLabel Text="Jan-18-2013" X="40" Y="0" Foreground="Black" />
            <my:AxeLabel Text="Jan-27-2013" X="60" Y="0" Foreground="Black" />
        </my:SeriaCollection.XaxeLabels>
        <my:Seria Name="FirstSeria" Thickness="2">
            <my:Seria.Points>
                <PointCollection>
                    <Point X="10" Y="10" />
                    <Point X="50" Y="50" />
                    <Point X="100" Y="30" />
                </PointCollection>
            </my:Seria.Points>
            <my:Seria.Color>
                <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
                    <GradientStop Color="#FF8400FF" Offset="0" />
                    <GradientStop Color="#FF5EFF00" Offset="1" />
                </LinearGradientBrush>
            </my:Seria.Color>
        </my:Seria>
        <my:Seria Name="SecondSeria" Color="Blue" Thickness="6">
            <my:Seria.Points>
                <PointCollection>
                    <Point X="10" Y="60" />
                    <Point X="50" Y="30" />
                    <Point X="100" Y="20" />
                </PointCollection>
            </my:Seria.Points>
        </my:Seria>
    </my:SeriaCollection>
</Window.Resources>
<Grid>
    <ListBox ItemsSource="{Binding Source={StaticResource mySeria}, Path=YaxeLabels}" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:38:53.717

添加一个构造函数来`SeriaCollection`创建`ObservableCollection`s：

```
public class SeriaCollection : ObservableCollection<Seria>
{
    public AxeLabels XaxeLabels { get; set; }
    public AxeLabels YaxeLabels { get; set; }

    public SeriaCollection()
    {
        XaxeLabels = new AxeLabels();
        YaxeLabels = new AxeLabels();
    }
} 
```

使用一个`ListBox.ItemTemplate`，例如

```
<ListBox ItemsSource="{Binding Source={StaticResource mySeria}, Path=YaxeLabels}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Text}" Width="100" />
                <TextBlock Text="{Binding X}" Width="50" />
                <TextBlock Text="{Binding Y}" Width="50" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

或使用该`DataType`属性将 a 分配`DataTemplate`给您的班级：

```
<Window.Resources>
    <DataTemplate DataType="{x:Type my:AxeLabel}">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Text}" Width="100" />
            <TextBlock Text="{Binding X}" Width="50" />
            <TextBlock Text="{Binding Y}" Width="50" />
        </StackPanel>
    </DataTemplate>
</Window.Resources> 
```

两者都会显示您的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:09:04.860

尝试在您的容器类上实现 INotifyPropertyChanged，并调用 OnPropertyChanged 来更新绑定 - 抱歉，现在不在我的办公桌前，所以不能更具体！

# php - 将图像上传到亚马逊 s3

> ID：11365381
> 
> 赞同：0
> 
> 时间：2012-07-06T15:40:26.683
> 
> 标签：php, amazon-s3

我正在将图像上传到 amazons3 存储桶，但执行 10 张图像需要 2 分钟，但我必须上传 10GB 的图像，我应该收到每个图像更新的更新，以确保其正常工作....

```
 while($file=readdir($handle)):
            if(is_file($file)){
                $extn = explode('.',$file);
                $extn = array_pop($extn);
                if (in_array(strtolower($extn),$includedExtn)) {
                    set_time_limit(0);
                    if ($s3->putObjectFile($file, $bucketName, baseName($file), S3::ACL_PUBLIC_READ)) {
                        echo "<br/>";
                        echo "S3::putObjectFile(): File copied to {$bucketName}/".baseName($file);
                    } else {
                        echo "S3::putObjectFile(): Failed to copy file\n";
                    }
                }
            } else {
                echo "No more files left";
            }
    endwhile; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:46:53.543

看起来您使用的代码与我使用的代码几乎相同。虽然我通过同时运行相同的脚本（并行多次）获得了更快的结果，但我的速度也有同样的问题，似乎每个 put 可能是有限的，但是对并发 PUT 的数量没有限制（或者如果有我还没找到）。我通常从命令行运行脚本 6 次。

您只需要编写代码以确保它不会多次上传同一个文件，否则您将为每个文件产生多次费用（因此向您的数据源添加诸如分段之类的内容）。我`include`在几个脚本中使用它，每个脚本都指定了它应该从数据库访问的唯一扇区。

# list - 在 Haskell 中定义为 Maybe 的列表？为什么不？

> ID：11365383
> 
> 赞同：5
> 
> 时间：2012-07-06T15:40:33.390
> 
> 标签：list, haskell, maybe

例如，除了错误处理之外，您不会看到`Maybe List`，因为列表有点`Maybe`自己：它们有自己的 " `Nothing`":`[]`和自己的 " `Just`": `(:)`。我使用 Maybe 和函数编写了一个列表类型来转换标准列表和“实验”列表。`toStd . toExp == id`.

```
data List a = List a (Maybe (List a))
    deriving (Eq, Show, Read)

toExp [] = Nothing
toExp (x:xs) = Just (List x (toExp xs))

toStd Nothing = []
toStd (Just (List x xs)) = x : (toStd xs) 
```

作为减少重复、概括的尝试，您如何看待它？

树也可以使用这些列表来定义：

```
type Tree a = List (Tree a, Tree a) 
```

不过，我还没有测试过最后一段代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T16:55:33.320

您可以在 Haskell 中以多种方式定义列表。例如，作为函数：

```
{-# LANGUAGE RankNTypes #-}

newtype List a = List { runList :: forall b. (a -> b -> b) -> b -> b }

nil :: List a
nil = List (\_ z -> z )

cons :: a -> List a -> List a
cons x xs = List (\f z -> f x (runList xs f z))

isNil :: List a -> Bool
isNil xs = runList xs (\x xs -> False) True

head :: List a -> a
head xs = runList xs (\x xs -> x) (error "empty list")

tail :: List a -> List a
tail xs | isNil xs = error "empty list"
tail xs = fst (runList xs go (nil, nil))
    where go x (xs, xs') = (xs', cons x xs)

foldr :: (a -> b -> b) -> b -> List a -> b
foldr f z xs = runList xs f z 
```

这个实现的诀窍是列表被表示为对列表元素执行折叠的函数：

```
fromNative :: [a] -> List a
fromNative xs = List (\f z -> foldr f z xs)

toNative :: List a -> [a]
toNative xs = runList xs (:) [] 
```

在任何情况下，真正重要的是类型及其操作所遵循的**合同**（或**法律），以及实现的****性能**。基本上，任何满足合同的实现都会给你正确的程序，更快的实现会给你更快的程序。

什么是清单合同？好吧，我不会详细地表达它，但列表遵循如下陈述：

1.  `head (x:xs) == x`
2.  `tail (x:xs) == xs`
3.  `[] == []`
4.  `[] /= x:xs`
5.  如果`xs == ys`和`x == y`，那么`x:xs == y:ys`
6.  `foldr f z [] == z`
7.  `foldr f z (x:xs) == f x (foldr f z xs)`

**编辑：**并将其与 augustss 的回答联系起来：

```
newtype ExpList a = ExpList (Maybe (a, ExpList a))

toExpList :: List a -> ExpList a
toExpList xs = runList xs (\x xs -> ExpList (Just (x, xs))) (ExpList Nothing)

foldExpList f z (ExpList Nothing) = z
foldExpList f z (ExpList (Just (head, taill))) = f head (foldExpList f z tail)

fromExpList :: ExpList a -> List a
fromExpList xs = List (\f z -> foldExpList f z xs) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-07T00:05:55.703

所有的 ADT与`(,)`, `Either`, `()`,`(->)`的某种组合是同构的（几乎——见结尾）`Void``Mu`

```
data Void --using empty data decls or
newtype Void = Void Void 
```

并`Mu`计算仿函数的不动点

```
newtype Mu f = Mu (f (Mu f)) 
```

所以例如

```
data [a] = [] | (a:[a]) 
```

是相同的

```
data [a] = Mu (ListF a)
data ListF a f = End | Pair a f 
```

它本身同构于

```
newtype ListF a f = ListF (Either () (a,f)) 
```

自从

```
data Maybe a = Nothing | Just a 
```

同构于

```
newtype Maybe a = Maybe (Either () a) 
```

你有

```
newtype ListF a f = ListF (Maybe (a,f)) 
```

可以在 mu 中内联到

```
data List a = List (Maybe (a,List a)) 
```

和你的定义

```
data List a = List a (Maybe (List a)) 
```

只是 Mu 的展开和外部 Maybe 的消除（对应非空列表）

你完成了......

几件事

1.  使用自定义 ADT 可提高清晰度和类型安全性

2.  这种普遍性很有用：参见 GHC.Generic

* * *

好吧，我说几乎是同构的。不完全是，即

```
hmm = List (Just undefined) 
```

`[a] = [] | (a:[a])`在列表的定义中没有等效值。这是因为 Haskell 数据类型是协约的，并且一直是[惰性求值模型的一个批评点](http://existentialtype.wordpress.com/2011/04/24/the-real-point-of-laziness/)。您可以通过仅使用严格的求和和乘积（以及按值函数调用）并添加特殊的“惰性”数据构造函数来解决这些问题

```
data SPair a b = SPair !a !b
data SEither a b = SLeft !a | SRight !b
data Lazy a = Lazy a --Note, this has no obvious encoding in Pure CBV languages,
--although Laza a = (() -> a) is semantically correct, 
--it is strictly less efficient than Haskell's CB-Need 
```

然后可以忠实地编码所有同构。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-06T15:51:09.423

您可以根据 定义列表`Maybe`，但不是这样。您的`List`类型不能为空。或者你是否打算`Maybe (List a)`成为`[a]`. 这似乎很糟糕，因为它不区分列表和类型。

这会起作用

```
newtype List a = List (Maybe (a, List a)) 
```

这有一些问题。首先使用它会比通常的列表更冗长，其次，域与列表不是同构的，因为我们在那里有一对（可以是未定义的；在域中添加一个额外的级别）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T17:48:36.857

如果它是一个列表，它应该是一个实例`Functor`，对吧？

```
instance Functor List
  where fmap f (List a as) = List (f a) (mapMaybeList f as)

mapMaybeList :: (a -> b) -> Maybe (List a) -> Maybe (List b)
mapMaybeList f as = fmap (fmap f) as 
```

这里有一个问题：你可以创建`List`一个 的实例`Functor`，但你的 Maybe List 不是：即使它本身`Maybe`还不是一个实例`Functor`，你也不能直接将一个构造像`Maybe . List`任何东西的实例（你需要包装器类型）。

对于其他类型类也是如此。

* * *

话虽如此，使用您的公式，您可以做到这一点，而标准 Haskell 列表则无法做到这一点：

```
instance Comonad List
  where extract (List a _) = a
        duplicate x @ (List _ y) = List x (duplicate y) 
```

不过，Maybe List 仍然不会是comonadic。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-07T05:56:28.067

当我第一次开始使用 Haskell 时，我也尝试尽可能多地用现有类型表示事物，因为避免冗余是件好事。我目前的理解（移动目标！）倾向于更多地涉及多维权衡网络的想法。我不会在这里给出任何“答案”，而是粘贴示例并询问“你明白我的意思吗？” 无论如何，我希望它有所帮助。

让我们看一下 Darcs 代码：

```
data UseCache = YesUseCache | NoUseCache
    deriving ( Eq )

data DryRun = YesDryRun | NoDryRun
    deriving ( Eq )

data Compression = NoCompression
                 | GzipCompression
    deriving ( Eq ) 
```

您是否注意到这三种类型都可能是`Bool`'s？为什么你认为 Darcs 黑客决定他们应该在他们的代码中引入这种冗余？再举一个例子，这是我们几年前更改的一段代码：

```
type Slot = Maybe Bool                  -- OLD code
data Slot = InFirst | InMiddle | InLast -- newer code 
```

为什么你认为我们认为第二个代码是对第一个代码的改进？

最后，这是我日常工作中的一些代码。它使用`newtype`augustss提到的语法，

```
newtype Role = Role { fromRole :: Text }
  deriving (Eq, Ord)

newtype KmClass = KmClass { fromKmClass :: Text }
  deriving (Eq, Ord)

newtype Lemma = Lemma { fromLemma :: Text }
  deriving (Eq, Ord) 
```

在这里，您会注意到我做了一件奇怪的事情，即采用一个非常好的`Text`类型，然后将它包装成三个不同的东西。与普通的 old 相比，这三件事没有任何新功能`Text`。他们只是为了与众不同。老实说，我不完全确定这样做对我来说是否是个好主意。我暂时认为这是因为我出于多种原因操纵了许多不同的文本片段，但时间会证明一切。

你能看出我想表达什么吗？

# r - R-继承的数字方法中用于分块数据的 S4 类将不起作用

> ID：11365384
> 
> 赞同：0
> 
> 时间：2012-07-06T15:40:44.903
> 
> 标签：r, class, inheritance, chunking, s4

我想在 R 中创建一个 S4 类，它允许我从云中访问大型数据集（以块的形式）（类似于 ff 包的目标）。现在我正在使用一个名为“range.vec”的玩具示例（我还不想处理互联网访问），它存储了一个数字序列，如下所示：

```
setClass("range.vec",
representation(start = "numeric", #beginning num in sequence
end = "numeric",                  #last num in sequence
step = "numeric",                 #step size
chunk = "numeric",                #cache a chunk here to save memory
chunkpos = "numeric"),            #where does the chunk start in the overall vec
contains="numeric"                #inherits methods from numeric
) 
```

我希望这个类从“numeric”继承方法，但我希望它在整个向量上使用这些方法，而不仅仅是我存储的块。例如，我不想为'mean'定义我自己的方法，但我希望'mean'通过使用length()、'['、'[ [' 和我定义的 el() 函数。我还定义了一个分块函数：

```
setGeneric("set.chunk", function(x,...) standardGeneric("set.chunk"))
setMethod("set.chunk",  signature(x = "range.vec"),
    function (x, chunksize=100, chunkpos=1) {
    #This function extracts a chunk of data from the range.vec object.
    begin <- x@start + (chunkpos - 1)*x@step
    end <- x@start + (chunkpos + chunksize - 2)*x@step
    data <- seq(begin, end, x@step) #calculate values in data chunk

    #get rid of out-of-bounds values
    data[data > x@end] <- NA

    x@chunk <- data
    x@chunkpos <- chunkpos
    return(x)
}}) 
```

当我尝试调用像“mean”这样的方法时，该函数会正确继承，并访问我的长度函数，但返回 NA 因为我没有任何数据存储在 .Data 插槽中。有没有一种方法可以使用 .Data 插槽来指向我的分块函数，或者告诉类在不自己定义每个方法的情况下分块数字方法？如果可以的话，我会尽量避免使用 C 进行编码。任何建议都会非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:44:13.790

您可以删除您的*块*插槽并将其替换为数字的*.Data*插槽。

小例子：

```
## class definition
setClass("foo", representation(bar="numeric"), contains="numeric")
setGeneric("set.chunk", function(x, y, z) standardGeneric("set.chunk"))
setMethod("set.chunk",
        signature(x="foo", y="numeric", z="numeric"), 
        function(x, y, z) {
    ## instead of x@chunk you could use numeric's .Data slot
    x@.Data <- y
    x@bar <- z
    return(x)
})

a <- new("foo")

a <- set.chunk(a, 1:10, 4)

mean(a) # 5.5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:29:15.100

看起来在课堂上没有一个好的方法可以做到这一点。我发现的唯一解决方案是告诉用户进行计算以遍历来自云的所有数据块，并在它们进行时进行计算。

# sql - 阻止 SQL 查询多次显示表的方法？

> ID：11365386
> 
> 赞同：0
> 
> 时间：2012-07-06T15:40:48.223
> 
> 标签：sql

在我的脚本中，我有一个显示 SQL 查询结果的表。但是，我将结果用作摘要，但 SQL 使页面显示表的次数与返回 SQL 中由于 Where 子句而允许的结果（行）一样多。即如果汇总了 3 组人，则表格重复相同的信息 3 次

有没有解决这个问题的常用方法？谢谢！

```
SELECT 
    Demographics.Name,
    Demographics.NDoc_Number,
    Demographics.PID_alphanumeric,
    Demographics.Company,
    Demographics.Company_Name,
    Demographics.Location,
    Demographics.Location_Name,
    Demographics.Team_CMT, 
    Demographics.Case_Manager,
    Demographics.Case_Manager_UID,
    Demographics.SiteName, 
    CareEpisodes.BGNDATE, 
    CareEpisodes.BRFA, 
    CareEpisodes.ENDDATE, 
    CareEpisodes.ERFA,
    OASIS_Improvement.BGNRPT,
    OASIS_Improvement.ENDRPT,
    ISNULL(SUM(CASE OASIS_Improvement.O_I_@Request.MooNum~
        WHEN 'NA'
        THEN 1
        ELSE 0
    END),0) AS numberImproveNA,
    ISNULL(SUM(CASE OASIS_Stabilization.O_S_@Request.MooNum~
        WHEN 'NA'
        THEN 1
        ELSE 0
    END),0) AS numberStabilizeNA,
    ISNULL(SUM(CASE OASIS_Improvement.O_I_@Request.MooNum~
        WHEN 'NA'
        THEN 0
        ELSE 1
    END),0) AS couldShowImprovement,
    ISNULL(SUM(CASE OASIS_Stabilization.O_S_@Request.MooNum~
        WHEN 'NA'
        THEN 0
        ELSE 1
    END),0) AS couldShowStabilization,
    ISNULL(COUNT(Demographics.Name),0) AS patientCount,
    ISNULL(SUM(CASE OASIS_Improvement.O_I_@Request.MooNum~
        WHEN 1
        THEN 1
        ELSE 0
    END),0) AS doShowImprovement,
    ISNULL(SUM(CASE OASIS_Stabilization.O_S_@Request.MooNum~
        WHEN 1
        THEN 1
        ELSE 0
    END),0) AS doShowStabilization

FROM 
    Demographics  
     INNER JOIN OASIS_Improvement  ON 
    Demographics.NDoc_Number = OASIS_Improvement.NDocNumber 
     INNER JOIN OASIS_Stabilization  ON 
    Demographics.NDoc_Number = OASIS_Stabilization.NDocNumber AND
        OASIS_Improvement.BGNRPT=OASIS_Stabilization.BGNRPT
     INNER JOIN CareEpisodes  ON 
    Demographics.NDoc_Number = CareEpisodes.NDocNumber AND
        OASIS_Improvement.BGNRPT=CareEpisodes.BGNRPT
WHERE
    (Demographics.Company IN (@SingleQuote.Request.companyInput~) OR '@Request.companyInput~' = '') AND
    (Demographics.Location IN (@SingleQuote.Request.locationInput~) OR '@Request.locationInput~' = '') AND
    (Demographics.Team_CMT IN (@SingleQuote.Request.teamInput~) OR '@Request.teamInput~' = '') AND
    (Demographics.Case_Manager_UID IN (@SingleQuote.Request.clinicianInput~) OR '@Request.clinicianInput~' = '') AND
    CareEpisodes.ERFA <> 6 AND
    (OASIS_Improvement.O_I_@Request.MooNum~ = 'NA' OR
    OASIS_Improvement.O_I_@Request.MooNum~ = 1 OR
    OASIS_Improvement.O_I_@Request.MooNum~ = 0) AND
    (OASIS_Stabilization.O_S_@Request.MooNum~ = 'NA' OR
    OASIS_Stabilization.O_S_@Request.MooNum~ = 0 OR
    OASIS_Stabilization.O_S_@Request.MooNum~ = 1) AND
    CareEpisodes.BGNDATE >= '@Request.FromDateInput~' AND
    CareEpisodes.ENDDATE <= '@Request.ThruDateInput~' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:30:39.630

如果您尝试对信息进行分组，则需要考虑使用 GROUP BY 语句。如果您想总结信息，请尝试查看 GROUP BY 但 WITH ROLLUP。ROLLUP 将允许您根据您在 GROUP BY 中选择的值对信息进行分组和汇总。

# android - 开始一个简单的动画

> ID：11365387
> 
> 赞同：2
> 
> 时间：2012-07-06T15:40:49.187
> 
> 标签：android, animation

作为一个更复杂的功能的一部分，我已经被困在显示一个圆圈在屏幕的某个点变得不透明的能力上。

我已经创建了一个测试项目，其中我的动画代码如下：

```
View mLongPressImage;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mLongPressImage = findViewById(R.id.onPressImage);

     findViewById(R.id.button).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                startAnimation(v.getX(), v.getY());
            }
        });
}

private AlphaAnimation onPressAnimation;

private void startAnimation(final float f, final float g) {
    Log.v("", "START");
    mLongPressImage.setX(f);
    mLongPressImage.setY(g);
    onPressAnimation = new AlphaAnimation(0f, 1f);
    onPressAnimation.setDuration(1000);
    onPressAnimation.setFillAfter(true);
    onPressAnimation.setFillEnabled(true);
    mLongPressImage.startAnimation(onPressAnimation);
} 
```

记录显示正确的事件正在发生。

视图看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="PRESS ME" />

    <ImageView
        android:id="@+id/onPressImage"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:background="#000000"
        android:scaleType="fitXY"
        android:src="@drawable/shape_circle_onpress" />

</FrameLayout> 
```

现在图像只是在 1 秒后出现在坐标处。

谁能指出这个极其简单的功能中隐藏的缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:23:47.257

上面的代码在技术上似乎是正确的，这就是为什么我在解决它时遇到了这么大的问题。

这个问题是由我使用`setX()`and`setY()`和`Animation`一起引起的 - 在我的 Xoom 平板电脑（运行 3.2 API 13）上，即使在切换到`ScaleAnimation`.

移除`setX()`和`setY()`移除故障行为，就像切换到 Galaxy Nexus（运行 API 4.0 Icecream Sandwich）一样。设置`hardwareAccelerated`为`true`而不是删除`setX()`并且`setY()`也改善了问题（但没有完全解决它）。

如果有人知道这是**为什么**，我将非常乐意投票并更改此问题的已接受答案。在那之前，我将把它归结为一个脆弱的 Android API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:15:36.177

如果您对圆圈周围的黑色背景不满意，您可以将`ImageView`背景更改为以下（注意两个额外的零来描述 Alpha 通道值）：

`android:background="#00000000"`

# macos - 加载 R 包“rgl”时出现问题

> ID：11365391
> 
> 赞同：2
> 
> 时间：2012-07-06T15:40:59.850
> 
> 标签：macos, r, rgl

当我尝试加载包时，我收到以下错误消息：

```
Error : .onLoad in loadNamespace() fehlgechlagen, Details:   
  Call: rgl 
  Error: dyn.load(file, DLLpath = DLLpath, ...) 
Error: Laden von Paket/Namensraum für ‘rgl’ fehlgeschlagen 
```

该翻译只是“无法加载'rgl'包/命名空间”。

已安装所有依赖项。我试图卸载并重新安装它，`package.install()`但没有成功。我正在运行 OSX 10.6，R 版本 2.15.0。

有谁知道问题出在哪里？

编辑：我被要求执行以下操作

`install.packages("rgl", verbose=TRUE)`

结果我得到：

> download.file(url, destfile, method, mode = "wb", ...) 中的错误：unbenutzte(s) Argument(e) (verbose = TRUE)
> 
> 警告在 download.packages(pkgs, destdir = tmpd, available = available, : 下载 von Paket 'rgl' fehlgeschlagen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:01:53.863

尝试从源代码安装它怎么样。如果您安装了颠覆，终端中的以下代码应该可以工作。我从[http://danbri.org/words/2011/12/08/761](http://danbri.org/words/2011/12/08/761)得到的。

```
svn checkout svn://svn.r-forge.r-project.org/svnroot/rgl
R CMD INSTALL ./rgl/pkg/rgl –configure-args=”–disable-carbon” rgl 
```

高温高压

# css - 如何使用框阴影而不是边框 进行选项卡式导航的边框底部技巧？

> ID：11365392
> 
> 赞同：0
> 
> 时间：2012-07-06T15:41:05.793
> 
> 标签：css, tabs, navigation, nav

代码见这里：http: [//jsfiddle.net/9pezn/](http://jsfiddle.net/9pezn/)

我知道如何使用底部边框进行位置底部负边距技巧，以在其上创建悬停/活动“选项卡”z-index，但在使用框阴影时无法重新创建此效果。有任何想法吗？

IE 我希望主导航选项卡位于 box-shadow 的顶部！我基本上是在尝试复制 Nike.com 导航的功能。例如，当您将鼠标悬停在“Sports”上时，底部的阴影就会被覆盖。

提前致谢！

![在此处输入图像描述](../Images/c82c45f2c17475f60d2ee75bd41d1152.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:57:02.763

我找到了一个我愿意接受的解决方案：http: [//jsfiddle.net/LVppY/](http://jsfiddle.net/LVppY/)

斯科特，你在正确的轨道上，它可以用 z-index 完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:43:22.893

~~`z-index`是你的朋友。~~

~~将一级导航设置为`z-index:1`，然后将二级导航设置为`z-index:2`，它应该位于一级导航的顶部`box-shadow`。~~

长话短说，耐克通过一系列巧妙堆叠的图像做到了这一点。我不肯定你可以用原生的盒子阴影实现来做到这一点，原因有两个：

1) box-shadow 与元素的 z-index 相关联，这意味着您不能将 nav1 的子级拉到 nav2 的子级之上，而不会导致 nav1 的 box-shadow 与 nav2 重叠。

2）如果您找到了一种绕过它的方法（也许通过将单独的框阴影应用于每个导航“选项卡”而不是整个容器，那么阴影会稍微重叠，从而导致较暗的斑点。

可能存在我缺少的解决方案，但这是我可能会认输并改用图像的情况之一。

# string - DOS中的嵌套字符串操作

> ID：11365394
> 
> 赞同：1
> 
> 时间：2012-07-06T15:41:07.633
> 
> 标签：string, dos

我知道你可以像这样在 DOS 中使用字符串操作：

```
echo %TIME%
echo %TIME:~0,2%
echo %TIME: =0% 
```

这三个命令的输出将是：

```
 8:36:05.60
 8
08:36:12.93 
```

我想知道如何结合第二行和第三行来获得这个输出：

```
08 
```

我不能使用 set 来临时存储一个值，因为我想在命令行参数中使用这个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:37:45.703

在纯 DOS 中，您没有嵌套语句。除非您的应用程序（参数是）是控制台应用程序，否则您将没有控制台来解析您的环境变量（在运行框中，尝试记事本 c:\%TIME:~0,2%.txt 并查看发生）。
如果它是一个控制台应用程序，那么您将能够使用 env vars，但不能使用由 cmd 本身处理的解析。

因此，您必须使用 cmd.exe 或批处理文件来启动您的应用程序，并且您可以在 SET 之间使用您需要的所有表达式。

# twitter-bootstrap - 如何在 Roots 主题中禁用 Twitter Bootstrap 图标？

> ID：11365396
> 
> 赞同：2
> 
> 时间：2012-07-06T15:41:15.850
> 
> 标签：twitter-bootstrap, wordpress-theming, font-awesome

我正在使用[Roots WordPress 主题](http://www.rootstheme.com/)，尽管我确信任何启用 Bootstrap 的站点的过程都是相同的。

我想禁用内置的 Twitter Bootstrap 图标并使用 Font Awesome 来代替它们。我已经加载了 Font Awesome's，它们正在工作，但有些图标`icon-envelope`似乎从两个集合中加载图标。

有没有办法禁用默认的 Twitter Bootstrap 图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:21:39.220

您需要将 Roots 存储库中的 LESS 源重新编译为 CSS，在 Font Awesome 网站的[集成部分中](http://fortawesome.github.com/Font-Awesome/#integration)进行更改。

## 懒惰的方式

我`bootstrap.css`对 Roots 存储库和`bootstrap.min.css`Bootstrap 存储库中的 进行了比较，结果发现它们是相同的。因此，从技术上讲，您应该能够使用[Bootstrap Customize 页面](http://twitter.github.com/bootstrap/download.html)，取消选中`Icons`复选框，然后点击底部巨大的 DOWNLOAD 按钮。

`bootstrap.css`将Roots 主题中的`bootstrap.min.css`替换为`css`下载的 zip 目录中的 （当然要重命名）。

现在只需使用 Font Awesome 提供的 CSS 文件。

完毕。

## 长（彻底）路

1.  [克隆Roots 存储库](https://github.com/retlehs/roots)的副本。

2.  安装某种形式的 LESS 编译器（参见[关于 LESS 编译的 Twitter Bootstrap 页面](http://twitter.github.com/bootstrap/less.html#compiling)）

3.  将 Font Awesome 文件复制到 repo 中，包括`font-awesome.less`到`roots/css/less`目录中。

4.  编辑`bootstrap.less`, 替换`@import "sprites.less";`为`@import "font-awesome.less";`

5.  更新`font-awesome.less`文件中字体的路径。

6.  编译`bootstrap.less`为`bootstrap.css`. （*不要忘记缩小*）

7.  使用该文件并将字体上传到您指定的目录。

### 这是你的选择。要么应该工作。

* * *

## 更新

[BootstrapCDN](http://bootstrapcdn.com)现在提供无图标版本的 Bootstrap，以及 FontAwesome CSS 文件。这使得“**懒惰的方式**”更加简单。

# opengl - OpenGL着色器：聚光灯和定向光

> ID：11365399
> 
> 赞同：2
> 
> 时间：2012-07-06T15:41:25.090
> 
> 标签：opengl, glsl

我想要两个光源：一个定向光源和一个聚光灯。我似乎无法理解我做错了什么——可能不了解着色器是如何工作的！我得到第一盏灯很好，但没有迹象表明第二盏灯（又名聚光灯）的效果。这是我想出的片段着色器：

```
varying vec4 diffuse,ambientGlobal, ambient;
varying vec3 normal,lightDir,halfVector;
varying float dist;

void main()
{
    vec3 n, halfV, viewV, ldir;
    float NdotL, NdotHV;
    vec4 color = ambientGlobal;
    float att, spotEffect;
    n = normalize(normal);

    NdotL = max(dot(n,normalize(lightDir)),0.0);

    if (NdotL > 0.0) {

        att = 1.0 / (gl_LightSource[0].constantAttenuation +
                gl_LightSource[0].linearAttenuation * dist +
                gl_LightSource[0].quadraticAttenuation * dist * dist);
        color += att * (diffuse * NdotL + ambient);

        halfV = normalize(halfVector);
        NdotHV = max(dot(n,halfV),0.0);
        color += att * gl_FrontMaterial.specular * gl_LightSource[0].specular * pow(NdotHV,gl_FrontMaterial.shininess);

        spotEffect = dot(normalize(gl_LightSource[1].spotDirection), normalize(-lightDir));
        if (spotEffect > gl_LightSource[1].spotCosCutoff) {
            spotEffect = pow(spotEffect, gl_LightSource[1].spotExponent);
            att = spotEffect / (gl_LightSource[1].constantAttenuation +
                    gl_LightSource[1].linearAttenuation * dist +
                    gl_LightSource[1].quadraticAttenuation * dist * dist);

            color += att * (diffuse * NdotL + ambient);

            halfV = normalize(halfVector);
            NdotHV = max(dot(n,halfV),0.0);
            color += att * gl_FrontMaterial.specular * gl_LightSource[1].specular * pow(NdotHV,gl_FrontMaterial.shininess);
        }

    }

    gl_FragColor = color;
} 
```

**PS**：当然这是一个已经解决的问题....有人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:49:27.700

这是我想出的：

顶点着色器：

```
varying vec3 N;
varying vec3 v;
void main(void)  
{     
   v = vec3(gl_ModelViewMatrix * gl_Vertex);       
   N = normalize(gl_NormalMatrix * gl_Normal);
   gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;  
} 
```

和片段着色器：

```
varying vec3 N;
varying vec3 v;
#define MAX_LIGHTS 2 
void main (void)  
{  
   vec4 finalColour;

   for (int i=0; i<MAX_LIGHTS; i++)
   {
       vec3 L = normalize(gl_LightSource[i].position.xyz - v);   
       vec3 E = normalize(-v);
       vec3 R = normalize(-reflect(L,N));  
       vec4 Iamb = gl_FrontLightProduct[i].ambient;    
       vec4 Idiff = gl_FrontLightProduct[i].diffuse * max(dot(N,L), 0.0);
       Idiff = clamp(Idiff, 0.0, 1.0);     
       vec4 Ispec = gl_FrontLightProduct[i].specular 
                    * pow(max(dot(R,E),0.0),0.3*gl_FrontMaterial.shininess);
       Ispec = clamp(Ispec, 0.0, 1.0);
       finalColour += Iamb + Idiff + Ispec;
   }
   gl_FragColor = gl_FrontLightModelProduct.sceneColor + finalColour;
} 
```

这给出了这个图像：

![在此处输入图像描述](../Images/a7feb97ae607949b63a4d2bc22c111ae.png)

# jquery - 冲突 phonegap 和 jQuery/jQuery Mobile...？

> ID：11365400
> 
> 赞同：0
> 
> 时间：2012-07-06T15:41:26.183
> 
> 标签：jquery, cordova, conflict

我来问你是否知道jQuery / jQuery Mobile与phonegap的一些冲突，因为我有一个用jQuery Mobile和phonegap制作的应用程序，当我包含cordova.js时应用程序不起作用，也就是说，我明白了用户界面很好，但应用程序没有做任何事情......并且一些 div 应该改变但它们保持停止。问候，丹尼尔

**索引.html**

```
<!DOCTYPE HTML>
<html>
<head>
    <title>APP THE SUPERDRIVER</title>
    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- necesario para jQuery Mobile -->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" /> 
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <link rel="stylesheet" href="estilos.css" type="text/css" /> <!-- incluimos la hoja de estilos -->
        <!-- incluimos el api de PhoneGap -->
    <script type="text/javascript" charset="utf-8" src="api.js"></script>
    <script type="text/javascript" charset="utf-8" src="funciones.js"></script>
</head>
<body>
    <div data-role="page"> <!-- jQuery Mobile: div que hará el papel de página de nuestra app -->
        <div data-role="content"> <!-- jQuery Mobile: div que hará el papel de contenedor -->
            <div id="div"> <!-- div que contiene la esfera central, la que marca la marcha recomendada -->
                <div class="contenido">1</div>
            </div>
            <div id="divSupIzq"> <!-- div que contiene la esfera superior izquierda , que marca la velocidad actual -->
                <div class="contenidos"><div id="textoDinamico">120 </div><div id="textoEstatico">KM/H</div></div>
            </div>
            <div id="divSupDer"> <!-- div que contiene la esfera superior derecha , que marca los avisos -->
                <div class="contenidos">zona de</br>avisos</div>
            </div>
            <div id="divInfIzq"> <!-- div que contiene la esfera inferior izquierda , que contiene información -->
                <div class="contenidos">zona de</br>informaci&oacute;n</div>
            </div>
            <div id="divInfDer"> <!-- div que contiene la esfera inferior derecha , que marca las alarmas -->
                <div class="contenidos"><img src="aceleracionBrusca.gif" class="aceleracionBrusca" style="display:none"/>
                <p>zona de</br>alarmas</p></div>
            </div>  
        </div>
        <div data-role="navbar" data-position="fixed" data-theme="b"> <!-- jQuery Mobile: div que hará el papel de menú footer -->
            <nav>
                <ul>
                    <li><a href="#">One</a></li>
                    <li><a href="#">Twoo</a></li>
                    <li><a href="#">Three</a></li>
                </ul>
            </nav>  
        </div>  
    </div>
</body>
</html> 
```

如果我评论/删除第五行，则该应用程序有效。但我需要包括 phonegap api。注意：在我的 javascript 文件中，我使用：

```
document.addEventListener("deviceready", onDeviceReady, false);
var watchIDgeolocation = null;      // ID que devolverá el objeto geolocation

function onDeviceReady() {
var options = { frequency: 1000 };  // Cada 1 s queremos obtener los datos
watchIDgeolocation = navigator.geolocation.watchPosition(onSuccessGeolocation, onErrorGeolocation, options);
}

var onSuccessGeolocation = function(position){
   // here I call other functions and make things through jQuery 
}

function onErrorGeolocation(error) {
 alert('code: '    + error.code    + '\n' +
  'message: ' + error.message + '\n');
} 
```

但是如果我包含phonegap库，这个javascript代码就不起作用......只有没有它......我认为没有这个phonegap api它就可以工作，因为代码是html5的api的一部分，对吧？此致

# unix - 如何将file.txt复制到不同的文件夹中

> ID：11365401
> 
> 赞同：0
> 
> 时间：2012-07-06T15:41:28.717
> 
> 标签：unix

我有 5 个文件夹（fld1、fld2、fld3、fld4、fld5），我想使用 bash 命令在所有 5 个文件夹中自动复制一个名为 pippo.txt 的文件。谁能帮我？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:53:41.277

尝试这个：

```
for i in fld[1-5]
do
    cp pippo.txt $i
done 
```

或这个：

```
seq 5 | xargs -n1 -I{} cp pippo.txt fld{} 
```

# .net - Azure 表存储中的 TimeSpan 属性

> ID：11365405
> 
> 赞同：6
> 
> 时间：2012-07-06T15:41:36.477
> 
> 标签：.net, azure, azure-table-storage

我有一个`TimeSpan`要保存在 Azure 表存储中的属性的实体。当我尝试保存实体时，出现错误：

> 无法转换为不受支持的类型“TimeSpan”

有没有办法进行自动转换或其他方式来支持`TimeSpan`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T15:48:35.323

我将 TimeSpan 作为刻度存储在 int 或 bigint 字段中并进行转换。您也可以将其存储为 varchar。我更喜欢刻度，因为如果需要，您可以在数据库中对其进行数学运算，并且它使范围比较更容易。如果您使用的是实体框架，则可以声明一个未映射的属性，该属性从您的数据库友好属性获取和设置 TimeSpan。

查看[Azure 表中的实体](http://convective.wordpress.com/2009/12/30/entities-in-azure-tables/)。其中一部分描述了如何从 Azure 表存储中排除属性，这应该使我提出的 EF 建议也适用于 ATS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-08T21:10:45.777

`TimeSpan``TimeSpan?`Azure Storage SDK > v8.0.0 支持类型甚至可为空的类型。

使用静态辅助方法`TableEntity.Flatten`方法展平您的实体并写入表存储：

[https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.tableentity.flatten.aspx](https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.tableentity.flatten.aspx)

当您从表中读取实体时，使用方法将其转换回原始实体`TableEntity.Convertback`。

[https://msdn.microsoft.com/en-us/library/azure/mt775432.aspx](https://msdn.microsoft.com/en-us/library/azure/mt775432.aspx)

Flatten 和 Convertback 方法几乎支持任何类型的属性，除了 IEnumerable / ICollection 类型的索引属性。

我编写了一个 TableEntityAdapter 类，它位于调用`TableEntity.Flatten`和`ConvertBack`方法的下方，便于开发人员使用。

您需要做的就是将您的对象传递给这个适配器，仅此而已。 [https://www.nuget.org/packages/TableEntityAdapter/](https://www.nuget.org/packages/TableEntityAdapter/)

如果您想进一步了解 Flatten 和 ConvertBack 方法是如何在幕后工作的，请查看我写的文章。 [https://www.nuget.org/packages/ObjectFlatenerRecomposer/](https://www.nuget.org/packages/ObjectFlattenerRecomposer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:19:09.963

正如 JamieSee 建议的那样，您可以将 TimeSpan 作为刻度存储在一些 long int 中，您还可以将对象序列化为字节数组。

无论您拥有什么复杂/不受支持的类，您始终可以将其序列化为字节数组并上传，然后对其进行检索、反序列化并将其转换回任何类型。当我需要上传 KeyValuePairs 列表时，我这样做了。

您可以在属性 getter 和 setter 中创建自动转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:15:47.317

因为我在 Microsoft 客户端上遇到了限制，所以我编写了一个备用 Azure 表存储客户端 Lucifure Stash，它具有许多高级抽象。

Lucifure Stash，支持 > 64K 的数据列、列表、数组、枚举、序列化、变形、公共和私有属性和字段等。它免费供个人使用，可以从[http://www.lucifure.com](http://www.lucifure.com) 或通过 NuGet.com (http://nuget.org/packages/LucifureStash) 下载。

您可以轻松地使用它将 TimeSpan 变形为 Azure 存储表支持的数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-29T14:23:57.550

为了将 a 存储`TimeSpan`到 CloudTable 中，我使用了一个使用该`long`属性进行翻译的`TimeSpan`属性：

```
public class MyEntity : Microsoft.WindowsAzure.Storage.Table.TableEntity
{
    public TimeSpan MyDuration { get; set; }

    // Workaround the fact that TableEntity does not automatically store a `TimeSpan` 
    public long MyDurationTicks
    {
        get { return MyDuration.Ticks; }
        set { MyDuration = TimeSpan.FromTicks(value); }
    }
} 
```

# c - 为什么程序不提示其他答案

> ID：11365407
> 
> 赞同：0
> 
> 时间：2012-07-06T15:41:43.887
> 
> 标签：c

**这是问题**

为什么下面的程序在提示了第一个答案后没有提示其他答案？

**以下是一些额外的细节**

(c) 保险公司按照以下规则计算保费。(1) 如果一个人的健康状况很好，年龄在 25 至 35 岁之间，居住在城市并且是男性，那么保费为卢比。千分之四，他的保单金额不能超过卢比。20万。(2) 如果一个人满足上述所有条件，但性别为女性，则保费为卢比。千分之三，她的保单金额不能超过卢比。10万。(3) 如果一个人的健康状况不佳，并且该人的年龄在 25 至 35 岁之间，并且居住在村庄并且是男性，那么保费为卢比。千分之六，他的保单不能超过卢比。10,000。(4) 在所有其他情况下，该人没有被保险。编写一个程序来输出该人是否应该投保，他/她的保费率和他/她可以投保的最大金额。

**这是我的代码**

```
/* pg 88 G-c
06/07/2012 6:14pm */

#include<stdio.h>
#include<conio.h>
void main() {
    char health,live,sex;
    int age,insured=0,policy=0,premium;

    printf("where is the person living? C or c for city OR V or v for village");
    scanf("%c",&live);
    printf("enter the health of the person: E or e for excellent OR P or p for poor");
    scanf("%c",&health);
    printf("what's the Sex of the person? M or m for Male OR F or f for Female");
    scanf("%c",&sex);
    printf("enter the age of the person");
    scanf("%d",&age);

    if((health=='E'||health=='e')&&(age>=25&&age<=35)&&(live=='C'||live=='c')&&(sex=='M'||sex=='m')) {
        insured=1;
        premium=4;
        policy=200000;
    }
    else if((health=='E'||health=='e')&&(age>=25&&age<=35)&&(live=='C'||live=='c')&&(sex=='F'||sex=='f')) {
        insured=1;
        premium=3;
        policy=100000;
    }
    else if((health=='P'||health=='p')&&(age>=25&&age<=35)&&(live=='V'||live=='v')&&(sex=='M'||sex=='m')) {
        insured=1;
        premium=6;
        policy=10000;
    }

    if(insured==1) {
        printf("the person is insured");
        printf("the premium of the person is %d Rs. per thousand",premium);
        printf("the policy cannot exceed Rs. %d", policy);
    }
    else
        printf("the person is not insured");
} 
```

**这是** 当屏幕询问我输入 C,c 或 V,v 的地方时的问题，当我按 Enter 键时，它会显示第二个问题，即人的健康，并立即询问第三个问题，即人的性别。

它没有给我输入第二个问题的值的地方或选项:(

我想知道为什么会这样……请帮助我，谢谢并问候 Saksham

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T15:44:58.660

当您按下回车键时，您还添加了一个`\n`字符，您`scanf()`很乐意接受它作为下一个输入。在您的情况下，最简单的解决方案是告诉`scanf()`读取下一个*非空白*字符。这可以像这样完成：

```
scanf(" %c",&health); /* note the added space before %c! */ 
```

格式中的这个空格将`scanf()`吃掉它找到的任何前导空白字符。

# javascript - javascript中带构造函数的对象和闭包的区别

> ID：11365410
> 
> 赞同：2
> 
> 时间：2012-07-06T15:41:49.687
> 
> 标签：javascript, closures, prototype

我是 JavaScript 新手，现在对这两个概念感到困惑：具有构造函数和原型的对象，以及闭包。

在这里，闭包意味着具有嵌套在其中的其他函数及其环境的函数。

我觉得这两个概念从某种角度来说似乎是相似的：

它们都有变量，就像其他语言中的字段一样。在闭包中，它被称为环境，我认为它是值和某些变量之间的一种绑定。

而且，他们都有“方法”。最后，我认为内部嵌套函数的行为就是这样。

那么，这两个概念的本质区别是什么？或者，这两种记忆数据的方法有何不同？

如果我在上面的这些概念中犯了一些错误，请纠正我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:50:35.820

好吧，闭包本身没有“方法”，因为它实际上并不是一个具体的对象——它更多的是一个概念。闭包是使用函数实现的，函数本身可以有方法，但你不会将闭包描述为有方法。正如您所说，闭包是一个函数*加上*有关其环境的信息。

另一方面，原型只是一个基本的 JavaScript 对象，所以说原型有方法是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:50:54.197

*闭包*和*原型*真的不是一回事。

*原型*是创建新对象的模板（简而言之）；例如：

```
 var someType = function()
 {
 };

 someType.prototype.someOtherFunction = function()
 {
 }; 
```

每当您创建 的实例时`sometype`，它都会`someOtherFunction`附加一个作为函数的成员。此外，其他实例也获得了价值。所以很容易将函数“添加”到字符串中，例如：

```
String.prototype.doSomething = function() 
{

} 
```

现在所有的字符串都得到了这个方法。

*闭包*实际上是另一个作用域内的子作用域，它是从外部作用域到内部作用域捕获或*关闭*变量的行为，使其成为闭包。

例如：

```
function something()
{
    for(var j = 0; j < 10; j++)
    {
        setTimeout(function()
        {
            alert(j);
        }, 25);
    }
} 
```

在这种情况下， 的值`j`被`setTimeout`回调关闭。在任何其他上下文中，`j`不会存在于内部函数内部（因为它既不是全局函数也不是函数的参数），但是因为它是以这种方式引入的，所以内部函数被称为*关闭*变量引用。

# java - getItem()、getSelectableItem() 和 getSource() 有什么区别？

> ID：11365413
> 
> 赞同：2
> 
> 时间：2012-07-06T15:42:00.660
> 
> 标签：java, swing, events, jcheckbox, itemlistener

我不太了解 ItemEvent 对象的以下方法之间的区别，尤其是在下面的代码示例中：

`Object getItem()`从类*ItemEvent*，Java-API：

> 返回受事件影响的项目。

`ItemSelectable getItemSelectable()`从类*ItemEvent*，Java-API：

> 返回事件的发起者。

`Object getSource()`继承自*EventObject*类，Java-API：

> 返回最初发生事件的对象。

我所知道的是，这`getItemSelectable()`简化了获取对象的过程，因为我不必显式地强制转换来使用`getText()`. （所以`(JCheckBox)`第二个`println`命令中的强制转换是不必要的。）我知道，`getItemSelectable()`使用`getSource()`. **但为什么还有另一个`getItem()`？**

但是下面的示例没有显示这些方法之间的任何区别：

```
JCheckBox cb = new JCheckBox("text of checkbox", true);

ItemListener myListener = new ItemListener()
    {
        @Override
        public void itemStateChanged(ItemEvent e)
        {
            System.out.println(((JCheckBox) e.getItem()).getText());
            System.out.println(((JCheckBox) e.getSource()).getText());
            System.out.println(((JCheckBox) e.getItemSelectable()).getText());
        }
    };

cb.addItemListener(myListener); 
```

输出：

> 复选框文本
> 
> 复选框文本
> 
> 复选框文本

那么确切的区别是什么，我什么时候使用哪个功能？

编辑：也许没有区别，至少没有概念上的区别（返回类型和原始类除外）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:28:11.690

如果你看一下`ItemEvent`构造函数的定义：

```
 /**
 * Constructs an <code>ItemEvent</code> object.
 * <p> This method throws an
 * <code>IllegalArgumentException</code> if <code>source</code>
 * is <code>null</code>.
 *
 * @param source The <code>ItemSelectable</code> object
 *               that originated the event
 * @param id           The integer that identifies the event type.
 *                     For information on allowable values, see
 *                     the class description for {@link ItemEvent}
 * @param item   An object -- the item affected by the event
 * @param stateChange  An integer that indicates whether the item was
 *               selected or deselected.
 *                     For information on allowable values, see
 *                     the class description for {@link ItemEvent}
 * @throws IllegalArgumentException if <code>source</code> is null
 * @see #getItemSelectable()
 * @see #getID()
 * @see #getStateChange()
 */
public ItemEvent(ItemSelectable source, int id, Object item, int stateChange) {
    super(source, id);
    this.item = item;
    this.stateChange = stateChange;
} 
```

`ItemSelectable source`参数是将由返回的元素`e.getSource()`。`Object item`参数是将由返回的元素`e.getItem()`。

所以实际上问题是什么时候用不同的对象调用构造函数 for`source`和`item`？

查看`JCheckBox`超类 -`JToggleButton`和`AbstractButton`，ItemEvent 始终使用相同的对象构造两个参数。因此，也许在某些自定义实现中，使用这些不同的方法是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:47:21.477

在这里查看描述... [ItemListener](http://docs.oracle.com/javase/tutorial/uiswing/events/itemlistener.html)

# flash - 如何防止按下多个键时停止移动（ActionScript）

> ID：11365414
> 
> 赞同：0
> 
> 时间：2012-07-06T15:42:12.453
> 
> 标签：flash, actionscript

我有 2 个事件监听器：

1）关键监听器（A，S，D，W）；- 用于移动对象

2) key listener(WhiteSpace) - 用于跳转对象

因此，当我按下 A OR S OR D OR W 键时，我按下空格键，在此之前一切正常，对象同时移动和跳跃，但如果我在移动时释放空格键，对象停...

那么当我释放键空白时，我怎么能做到这一点，对象仍然会移动？不注意其他键的释放或按下？

```
private function onKeyDown(e:KeyboardEvent):void {

    //trace(e.keyCode);
    switch(e.keyCode)
    {

    case 68:
    direction = 'left';
    stage.addEventListener(Event.ENTER_FRAME, moveRight);
    break;
    case 65:
    direction = 'right';
    stage.addEventListener(Event.ENTER_FRAME, moveLeft);
    break;
    case 32:
    jump() // the whitespace key
        break;

    }

private function moveRight(e:Event):void {

shape.x += 5;

}

private function moveLeft(e:Event):void {

shape.x += 5;

}

private function jump():void {

    stage.addEventListener(Event.ENTER_FRAME, jumpAnimation);
}

private function jumpAnimation(e:Event):void {

   //here code for jumping increasing the y and decreasing....
}

private function onKeyUp(e:Event):void {

    stage.removeEventListener(Event.ENTER_FRAME, moveRight);
    stage.removeEventListener(Event.ENTER_FRAME, moveLeft);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:14:37.660

您可以实现一个按键向上/向下监听器和一个输入帧监听器，并使用一些布尔值来指示哪些键被按下并相应地更新。像这样的东西可能会起作用：

```
var keyMap:Dictionary = new Dictionary();

addEventListener( KeyboardEvent.KEY_DOWN, onKeyDown );
addEventListener( KeyboardEvent.KEY_UP, onKeyUp );
addEventListener( Event.ENTER_FRAME, onEnterFrame );

function onKeyDown( event:KeyboardEvent ):void 
{
    keyMap[ event.keyCode ] = true;
}

function onKeyUp( event:KeyboardEvent ):void 
{
    keyMap[ event.keyCode ] = false;
}

function onEnterFrame( event:EnterFrame ):void 
{
    if( keyMap[ 68 ] ) 
    {
        // -- move left
    }

    if( keyMap[ 65 ] ) 
    {
        // -- move right 
    }

    // -- ect...
} 
```

这将避免一个键向上导致所有其他键连续触发的情况，因为您只依赖于每个键向上或向下的单个键。更新场景的代码将连续运行。

# r - 当我在 R 中读取文件时，标题的变化？

> ID：11365424
> 
> 赞同：1
> 
> 时间：2012-07-06T15:42:50.323
> 
> 标签：r

每当我使用`read.csv()`with option读取文件时`header=T`，标题都会以奇怪（但可预测）的方式发生变化。应该读取的标题名称`"P(A<B)"`变为`"P.A.B."`，例如：

```
> # when header=F:
> myfile1 <- read.csv(fullpath,sep="\t",header=F,nrow=3)
> myfile1
     V1    V2     V3
1    ID  Name P(A>B)
2 AB001 Alice  0.997
3 AB002   Bob  0.497
>
> # When header=T:
> myfile2 <- read.csv(fullpath,sep="\t",header=T,nrow=3)
> myfile2
     ID    Name P.A.B.
1 AB001   Alice  0.997
2 AB002     Bob  0.497
3 AB003 Charles  0.732 
```

我试图像这样修复它，但它没有用：

```
> names(myfile2) <- myfile1[1,]
> myfile2
      3       3     3
1 AB001   Alice 0.997
2 AB002     Bob 0.497
3 AB003 Charles 0.732 
```

因此，我尝试使用`sub()`编写一个函数，该函数将接受任何向量`"arbitrary.lengths.here."`并返回一个向量`"arbitrary(lengths>here)"`，但我并没有真正得到任何结果，我开始怀疑我让这个问题变得比它必须的更复杂。

你将如何处理这个标题问题？我在正确的轨道上`sub()`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T15:46:54.980

设置`check.names=FALSE`在`read.csv()`

```
read.csv(fullpath,sep="\t", header=FALSE, nrow=3, check.names=FALSE) 
```

从帮助`?read.csv`：

*检查名称*

*合乎逻辑。如果为 TRUE，则检查数据框中的变量名称以确保它们是语法上有效的变量名称。如有必要，它们会被调整（通过 make.names），以确保它们没有重复。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:01:18.130

并不是真的打算作为答案，但打算对 Rnewbs 有所帮助：这些标题被作为因素读入（并导致第三列也是一个因素。扭曲的`names()`分配可能使用了它们的整数存储模式。@Andrie 已经给了你首选解决方案，但如果您只想重新分配名称（这不会消除对第三列的损坏），您可以使用：

```
 names(myfile1) <- scan(file=fullpath, what="character" nmax=1 , sep="\t")
 myfile1 <- myfile[-1, ]    # gets rid of unneeded line 
```

# ajax - 对 Amazon S3 的跨域 AJAX 请求

> ID：11365425
> 
> 赞同：3
> 
> 时间：2012-07-06T15:42:50.437
> 
> 标签：ajax, amazon-s3, cross-domain, amazon

有什么方法可以启用从服务器发送到 Amazon S3 的 AJAX 请求？

我有一个使用 AJAX 请求加载字幕的视频播放器，我想将字幕存储在 Amazon S3 上，但显然我遇到了跨域错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T07:14:59.480

相对较新，但我相信它应该可以解决问题：[http ://aws.typepad.com/aws/2012/08/amazon-s3-cross-origin-resource-sharing.html](http://aws.typepad.com/aws/2012/08/amazon-s3-cross-origin-resource-sharing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:42:45.013

S3 仅支持有限数量的 HTTP 标头，而 Access-Control-Allow-* 标头不支持……因此您必须等到亚马逊实施此功能。

来源：[AWS 开发人员论坛：Access-Control-Allow-Origin 标头](https://forums.aws.amazon.com/thread.jspa?threadID=34281&start=200&tstart=0)

AWS 团队成员的最新官方声明（2012 年 6 月 19 日）：

> 我只是想重申一下，我们知道对此功能的进一步要求。我们正在继续研究此功能，我们感谢对此的持续反馈。
> 
> 我们将在可用时提供更多信息。

# jquery - jqgrid内联编辑选择选项中的jquery datepicker

> ID：11365429
> 
> 赞同：1
> 
> 时间：2012-07-06T15:42:58.997
> 
> 标签：jquery, jqgrid, datepicker

我不确定我要问的是否可能。

我有一个启用内联编辑的 jqgrid。其中一列的编辑类型设置为“选择”。

```
name: 'PayDate',
index: 'PayDate',
align: 'center',
hidden: false,
search: true,
stype: 'select',
searchoptions: { dataUrl: path + '/Helper/FirstPaid?clientId=' + clientId },
editable: true,
edittype: "select",
editoptions: { value: "HIDA:Hiring Date;DATE:Choose a date..." } 
```

结果如下：

![在此处输入图像描述](../Images/d55b89e1f079f5dccfb7d049cd0e55a3.png)

我想做的是，当用户单击“选择日期...”时，会出现一个 jquery datepicker。

如果您对如何实现它有任何想法，那就太好了。

提前致谢

# openxml - 如何在 Excel 工作表 OpenXML 2.0 C# 中创建图表/图形

> ID：11365430
> 
> 赞同：2
> 
> 时间：2012-07-06T15:43:00.003
> 
> 标签：openxml, openxml-sdk

以前我发布了一个问题，如何将数据集中的数据填充到 excel 工作表中，而不是如何使用该数据创建图表。那篇文章不太走运，但现在我设法从数据集中填充数据，但也在努力根据该数据创建图表，我希望图表与我的数据在同一张表中。我不想在“图表表”中创建图表。请任何人帮助我，如果可能的话，请给出一个 OpenXML 图表创建的代码示例。

以下是我在我的 excel 表中的示例数据，我想根据这些数据以编程方式创建图表。

```
CountryName             AnnualGrowth

UK                      757565

America                 568965

Canada                  555544

Italy                   665533

Germany                 558899

France                  995577 
```

问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T10:07:36.553

使用 Open XML SDK 创建图表确实要复杂得多。我编写了一个电子表格库，用于创建 Excel 提供的基本图表。标准布局，仅此而已（到目前为止）。你可以在这里得到它：[SpreadsheetLight](http://spreadsheetlight.com/)。

该库提供源代码，因此您可以使用它来提出更适合您的东西。主要困难（和乏味）与填写类别/日期轴（X 轴）和价值轴（Y 轴）有关。每个图表类型在 SDK 中都有自己的类。例如，柱形图和条形图具有 BarChartSeries 类。圆环图和饼图具有 PieChartSeries 类。

# javascript - jQuery动态改变图片头

> ID：11365435
> 
> 赞同：1
> 
> 时间：2012-07-06T15:43:07.103
> 
> 标签：javascript, jquery

我正在尝试编写一个简单的 jQuery 函数来更改我网页的图像标题。

HTML 如下所示：

```
<div class="slider"> 
<ul>
<li> <img src="img/slide21.png" alt=""> </li>
<li> <img src="img/slide31.png" alt=""> </li> 
```

我只想每 5 秒淡入下一张图像并淡出旧图像。图像的位置不应改变，并且所有图像的大小相同。

我的 js 代码如下所示：

```
function menu (obj) {
if (!obj.length) {
  return;
}
  $(obj).find("li").hide();
  $(obj).find("li").next().fadeIn(2400);
}
 $(document).ready(function () {
   menu(".slider");
 });
} 
```

这段代码真的不是我想要的，但目前我不知道该怎么做。

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:45:24.910

由于您已经在使用 jQuery，请查看循环插件[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:13:33.093

你可以使用settimeout：

```
function change_image(obj) {
    $(obj).find("li").fadeOut();
    $(obj).find("li").next().fadeIn();
}

var menu_obj;
function menu(obj) {
   ...
   menu_obj = obj
   setTimeout("change_image(menu_obj);", 5000);

} 
```

我认为 Fadeout 和 fadein 默认为 500，对于实际的淡入淡出动画来说是半秒。

您也可以执行以下操作：

```
$(obj).find("li:first-child").delay(5000).fadeOut().next().find("li").fadeIn(); 
```

延迟函数延迟 jQuery 的动画队列的地方。

但是，您的选择器 find("li") 将找到所有 LI 元素并将它们全部淡出，然后找到它们的兄弟元素并尝试将它们淡入，因此您需要类似 li:first-child 或 li:nth- child(x) 并保持运行计数。nth-child 的问题是我不确定 IE 是否支持 CSS……但我相信 jQuery 选择器仍然可以工作。

无论如何，你必须使用它，也许保持一个全局变量来跟踪当前图像并调用 next() （小心检查列表的末尾，这需要你开始在第一个孩子结束）。您可以使用 LI 数量的长度来确保这一点，或者保留指向 obj > li:last-child 元素的指针并对其进行测试。

或者，继续按照建议使用图像循环插件。

就个人而言，当我做循环图像时，我只是创建一个足够宽的 div 来容纳所有图像，而 div 的宽度足以容纳一个图像作为其容器，然后将其设置为剪辑任何溢出，并具有一个 jquery 函数每 M 秒将位置或边距更改 N * image_width 因子，其中 N 是图像的数量。

这是一个不同的例子：

[http://www.htmlgoodies.com/beyond/javascript/article.php/3881826/JavaScript-Tutorial-Adding-Rotating-Images-to-Your-Web-Site.htm](http://www.htmlgoodies.com/beyond/javascript/article.php/3881826/JavaScript-Tutorial-Adding-Rotating-Images-to-Your-Web-Site.htm)

它至少可以给你一些想法`setTimeout`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:37:19.157

几个月前，我构建了一个简单的图像转换脚本，效果很好。我的脚本不只是交换图像，而是首先将包含 div 的背景设置为第一个图像。这样，当第一张图像被隐藏时，没有闪烁，而第二张图像淡入。您可以在[AdairHomes.com](http://adairhomes.com "AdairHomes.com")上查看过渡，这是大图像旋转。

# HTML 包装器

```
 <div id="galleryContent" style="background:url(images/simple-banner-image-bath.jpg) top left;">
    <img id="bannerImage" src="<!--Place the first image source here-->" alt="<!--Place your first ALT tag here-->" width="960" height="562" />
  </div> 
```

# jQuery

```
<script type="text/javascript">
    var banners = new Array();
    // Array of images which you want to cycle
    banners = [{"Source":"images/simple-banner-image-construction2.jpg","Alt":"Construction - Framing"},
               {"Source":"images/simple-banner-image-bath.jpg","Alt":"Signature Custom Bathroom"},
               {"Source":"images/simple-banner-image-2659.jpg","Alt":"Model Signature 2659"},
               {"Source":"images/simple-banner-image-kitchen.jpg","Alt":"Signature Custom Kitchen"},
               {"Source":"images/simple-banner-image-2432.jpg","Alt":"Model Signature 2432"},
               {"Source":"images/simple-banner-image-1405.jpg","Alt":"Model Signature 1405"},
               {"Source":"images/simple-banner-image-2830.jpg","Alt":"Model Signature 2830"}];

    var count = banners.length - 1; // subtracting 1 accounts for the array starting at [0]
    var counting = 0;
    going = setInterval(function(){

      $("#bannerImage").fadeOut(200,function(){
        $(this).attr({'src':banners[counting]['Source'],'alt':banners[counting]['Alt']}).fadeIn(200);
      });

      // Select Next Picture
      if(counting != count){counting++;}else{counting = 0;}

      // Set new background image
      $("#galleryContent").css({'background':'url('+banners[counting]['Source']+') top left'});
    },6000);

    var loadCount = 1;

    // Preload images after the first image is displayed
    slowLoad = setInterval(function(){
      if(loadCount < banners.length){
        $("body").append('<img src="'+banners[loadCount]['Source']+'" style="display:none;" />');
        loadCount++;
      }else{
        clearInterval(slowLoad);
      }
    },500);    

</script> 
```

您会注意到我选择将我正在旋转的所有图像保留在一个数组中。这是因为我使用 PHP 管理所有包含的图像。

使用此代码，您基本上只需要设置`#galleryContent`div 的样式以使其看起来像您希望的样子，并将所有带有 alt 标签的图像添加到横幅数组中。您还需要将要首先显示的任何标题放入`#bannerImage`.

如果您需要更多代码或帮助，请告诉我。我想你可以从我上面的链接中得到很好的感觉。

# php - 这个sql语法有什么问题？

> ID：11365436
> 
> 赞同：1
> 
> 时间：2012-07-06T15:43:18.630
> 
> 标签：php, mysql, sql, insert

```
$sql3 = 
    "INSERT INTO `orders` (cid, eid, order, date_ordered, date_called, status) 
  VALUES ('$cid', '$eid', '$order', '$date_ordered', '$date_called', '$status')"; 
```

错误是：

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 'order, date_ordered, date_called, status) VALUES ('0012', '0', 'gydfhtfhjghj', '' at line 1 附近使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T15:45:36.400

`ORDER`是保留字。所以你可以用反引号来逃避它：

```
$sql3 = 
"INSERT INTO `orders` (cid, eid, `order`, date_ordered, date_called, status) 
 VALUES ('$cid', '$eid', '$order', '$date_ordered', '$date_called', '$status')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:45:04.320

ORDER 是保留关键字。使用不同的名称或将其包装在反引号中（显然它们不称为引号）。

```
`order` 
```

# python - 在 python 上读取令牌

> ID：11365448
> 
> 赞同：1
> 
> 时间：2012-07-06T15:43:37.660
> 
> 标签：python, token

我想从文本文档中读取令牌并检查特定关键字。我该怎么做？例如，我的文件如下所示：

```
<protein id="Q11" name="HUMAN" length="655" crc64="30E1C1D138">
    <match id="G3DSA:3.30.160.60" name="ZC2f_H2/iegse_NA-bd" dbname="GE3D" status="T" evd="HMPfm">
      <ipr id="IPR013087" name="Zinc finger, H2-type/inrase, D-bindg" tpe="Dain" />
      <ln stt="114" end="142" sc="1.0E-8" />
    </match> 
```

（我想跳过第一行并在第二行搜索token，dbname必须等于GE3D。如果是我想存储stt号和结束号。）

*所以我这样做了，但我不知道为什么它只返回一个数字作为开始和结束，因为多个数字应该满足要求：from lxml import entree

文件名 = 'inQ14591.txt'

使用 open(filename,'rb') 作为 f：

```
root = etree.parse(f)
for ln in root.xpath("/protein/match[@dbname='GE3D']/ln"):
    start = ln.get("stt")
    end = ln.get("end") 
```

打印 (stt)

打印结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:59:06.127

这看起来很像 XML，您可以利用它来发挥自己的优势。

```
from lxml import etree

filename = "somefilename" # change this

with open(filename, 'rb') as f:
    root = etree.parse(f)
    for ln in root.xpath("/protein/match[@dbname='GE3D']/ln"):
        stt = ln.get("stt")
        end = ln.get("end")
        print "%s, %s" % (stt, end, )
        # do something else with stt and end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:54:16.513

好像你可以用 解析它`BeautifulSoup`，但我不确定你在找什么

```
from BeautifulSoup import BeautifulSoup
text = '''<protein id="Q11" name="HUMAN" length="655" crc64="30E1C1D138">
    <match id="G3DSA:3.30.160.60" name="ZC2f_H2/iegse_NA-bd" dbname="GE3D" status="T" evd="HMPfm">
      <ipr id="IPR013087" name="Zinc finger, H2-type/inrase, D-bindg" tpe="Dain" />
      <ln stt="114" end="142" sc="1.0E-8" />
    </match>'''

soup= BeautifulSoup(text)

res=soup.findAll(dbname='GE3D') 
```

根据您的评论更新以找到该`stt`值，您需要找到该行，`ln`然后使用以下标签获取标签`stt`：

```
stt_value = soup.findAll('ln')[0]['stt'] # u'114'
end_value = soup.findAll('ln')[0]['end'] # u'142' 
```

# iphone - 来自 Web 服务的带有 Unicode 问题的 NSString

> ID：11365450
> 
> 赞同：1
> 
> 时间：2012-07-06T15:43:42.453
> 
> 标签：iphone, xcode, unicode, nsstring

我试图在 Stackoverflow 中搜索。但我无法得到正确的解决方案。有人可以帮帮我吗？

我有来自网络服务的数据。

```
KEY: 1036   TYPE: string    VALUE = French (fran\u00E7aise)
KEY: 1032   TYPE: string    VALUE = Greek  (\u03B5\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC) 
```

有谁知道如何正确打印这个 Unicode 字符串？我试图对其进行编码和解码（如下所示）。但它不起作用。:(

```
NSString *value = [NSString stringWithFormat:@"%@", t.dataValue]; 
NSData *bytes = [message dataUsingEncoding:NSUTF8StringEncoding];
NSString* messageDecoded = [[NSString alloc] initWithData:bytes encoding:NSUTF8StringEncoding];
NSLog(@"decoded: %@", messageDecoded); 
```

提前谢谢各位！

## 回答：

我从这个[链接](https://stackoverflow.com/questions/2099349/using-objective-c-cocoa-to-unescape-unicode-characters-ie-u1234)得到了答案：

```
NSString* input = @"ab\"cA\"BC\\u2345\\u0123";
// will cause trouble if you have "abc\\\\uvw"
NSString* esc1 = [input stringByReplacingOccurrencesOfString:@"\\u" withString:@"\\U"];
NSString* esc2 = [esc1 stringByReplacingOccurrencesOfString:@"\"" withString:@"\\\""];
NSString* quoted = [[@"\"" stringByAppendingString:esc2] stringByAppendingString:@"\""];
NSData* data = [quoted dataUsingEncoding:NSUTF8StringEncoding];
NSString* unesc = [NSPropertyListSerialization propertyListFromData:data
  mutabilityOption:NSPropertyListImmutable format:NULL
  errorDescription:NULL];
assert([unesc isKindOfClass:[NSString class]]);
NSLog(@"Output = %@", unesc); 
```

# android - android 通用 SQLite 数据库

> ID：11365452
> 
> 赞同：-1
> 
> 时间：2012-07-06T15:43:46.300
> 
> 标签：android, sqlite, reflection, sqliteopenhelper, invocationhandler

我开发了一个小型 java.lang.reflect.InvocationHandler 拦截方法调用（来自 json webservice）并将结果缓存到本地 SQLite db。如果没有互联网连接，则从本地缓存中读取结果。

一切正常；我的问题如下：

拦截的每个方法都可以返回不同的实体，我使用反射将每个实体保存在不同的表上。我事先不知道我需要创建的所有表，所以每次我创建一个 SQLiteOpenHelper “如果不存在则创建表 {ENTITY_NAME}”，并且每次我将数据库版本增加 1 时调用 onUpgrade 方法.

这适用于开发环境，但我一点也不喜欢。

有人可以推荐一个更好的解决方案来用新表更新数据库吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:54:17.223

尝试 `mYourDbHelper.getWritableDatabase().execSQL("CREATE TABLE ....")`从您需要创建另一个表的位置

# objective-c - SearchDisplayController 在多个数组中搜索

> ID：11365453
> 
> 赞同：2
> 
> 时间：2012-07-06T15:43:47.343
> 
> 标签：objective-c, ios, uitableview, searchdisplaycontroller

好的，经过长时间的搜索、犹豫和更多的搜索，我似乎无法弄清楚这一点。

我有一个 SearchDisplayController，我有四个不同的数组，我正在使用 NSPredicate 进行搜索，因为每个 UITableViewCell 都由 4 个字符串（标题、描述等）组成。

我现在有 4 个搜索数组、search_title、search_description 等，它们的填充方式如下：

```
- (void)filterContentForSearchText:(NSString*)searchText 
                             scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate 
                                    predicateWithFormat:@"SELF contains[cd] %@",
                                    searchText];

    self.search_category = [self.temp_category filteredArrayUsingPredicate:resultPredicate];
    self.search_producttitle = [self.price_producttitle filteredArrayUsingPredicate:resultPredicate];
    self.search_type = [self.price_type filteredArrayUsingPredicate:resultPredicate];
    self.search_description = [self.price_description filteredArrayUsingPredicate:resultPredicate]; 
```

当我使用 NSLog（数组计数）时，我可以看到它正在工作，因为它在我输入搜索词时给出了每个数组的正确计数。

我的表格视图单元格如下所示：

```
if ([tableView isEqual:self.searchDisplayController.searchResultsTableView]){
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.nameLabel.text = [self.search_producttitle objectAtIndex:[[searchResults objectAtIndex:indexPath.row] integerValue]];
        cell.priceLabel.text = [self.search_price objectAtIndex:[[searchResults objectAtIndex:indexPath.row] integerValue]];
        cell.descrLabel.text = [self.search_description objectAtIndex:[[searchResults objectAtIndex:indexPath.row] integerValue]];
        cell.IDLabel.text = [self.search_type objectAtIndex:[[searchResults objectAtIndex:indexPath.row] integerValue]];
    }
    else{
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.nameLabel.text = [price_producttitle objectAtIndex:indexPath.row];
        cell.IDLabel.text = [price_type objectAtIndex:indexPath.row];
        cell.priceLabel.text = [price objectAtIndex:indexPath.row];
        cell.descrLabel.text = [price_description objectAtIndex:indexPath.row]; 
```

也许您已经可以看到我正在尝试做的事情。我现在从旧数组制作新数组，我称之为搜索数组。然而，这些数组是相互独立的（一个数组可能是空的，而另一个是研究结果）。我需要知道数据来自哪个索引，存储在那些搜索数组中。如果我知道 search_producttitle 中的数据来自 price_producttitle （原始数组）中的索引 1,3 和 4，那么我可以将这些数字用于 indexPath.row 来显示。至少，这是我现在的计划，制作一个 searchResult 数组，其中包含在制作单元格时应该在 objectAtIndex 中使用的数字。

我正在为此苦苦挣扎，我找不到他们在多个数组中搜索的任何示例，因为单元格是由多个数组组成的。

有人可以给我一个好的方向提示，或者我可以使用的例子吗？

先感谢您。

普拉斯托

我使用的参考资料：

[SearchDisplayController 搜索多个数组](https://stackoverflow.com/questions/8169889/searchdisplaycontroller-search-multiple-arrays)

[http://ygamretuta.me/2011/08/10/ios-implementing-a-basic-search-uisearchdisplaycontroller-and-interface-builder/](http://ygamretuta.me/2011/08/10/ios-implementing-a-basic-search-uisearchdisplaycontroller-and-interface-builder/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:49:38.283

虽然没有人回答我的问题，但我自己想通了。

其实，我想得太难了。我想使用 NSPredicate ，这在我的情况下是不必要的。我想先从 NSPredicate 得到一个字符串，然后比较字符串。我现在使用 rangeofstring，在每个 objectatindex 的循环中，我对每个数组都这样做。

如果在数组中找到它，则报告 YES 并且索引将被放入不同的数组中。这个数组将在稍后制作 UITableView 时使用，替换 indexPath.row。

```
[self.searchResults removeAllObjects];

for (int i = 0; i < [temp_category count]; i++) {
    BOOL foundResult = FALSE;

    if ([[temp_category objectAtIndex:i] rangeOfString:searchText].location != NSNotFound) {
        foundResult = TRUE;
    }
    if ([[price_producttitle objectAtIndex:i] rangeOfString:searchText].location != NSNotFound) {
        foundResult = TRUE;
    }
    if ([[price_type objectAtIndex:i] rangeOfString:searchText].location != NSNotFound) {
        foundResult = TRUE;
    }
    if ([[price_description objectAtIndex:i] rangeOfString:searchText].location != NSNotFound) {
        foundResult = TRUE;
    }
    if (foundResult) {

        NSNumber *result = [NSNumber numberWithInt:i];
        if ([self searchResults] == nil) {
            NSMutableArray *array = [[NSMutableArray alloc] init];
            [self setSearchResults:array];
            [array release];
        }

            [searchResults addObject:result];

    }
}

NSLog (@"array = %i", [searchResults count]);
NSLog(@"%@",searchResults); 
```

我不相信这个答案。学分应该去：[SearchDisplayController search multiple arrays](https://stackoverflow.com/questions/8169889/searchdisplaycontroller-search-multiple-arrays)

我采用了这种方法并在 -(void)searchtableview 中实现了它。我应该提一下，关于此的问题并不多，这是我能找到的唯一合适的答案。

我希望其他人也会发现这很有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T09:04:00.067

```
-(void)searchBar:(UISearchBar *)searchBar1 textDidChange:(NSString *)searchText
{
if ([searchText length]==0)
    {
      temp_array1 =[array_Main1 mutableCopy];
      temp_array2 =[array_Main2 mutableCopy];
      temp_array3 =[array_Main3 mutableCopy];
    }
 else
    {
      [temp_array1 removeAllObjects];
      [temp_array2 removeAllObjects];
      [temp_array3 removeAllObjects];
       int g = 0;
       for (int i=0; i< array_Main1.count;i++)
        {
            NSRange Range1 = [[array_Main1 objectAtIndex:i] rangeOfString:searchText options:NSCaseInsensitiveSearch];
            NSRange Range2 = [[array_Main2 objectAtIndex:i] rangeOfString:searchText options:NSCaseInsensitiveSearch];
            NSRange Range3 = [[array_Main3 objectAtIndex:i] rangeOfString:searchText options:NSCaseInsensitiveSearch];
            if (Range1.location != NSNotFound ||  Range2.location != NSNotFound ||  Range3.location != NSNotFound )
            {
                [temp_array1 addObject:[array_Main1 objectAtIndex:g]];
                [temp_array2 addObject:[array_Main2 objectAtIndex:g]];
                [temp_array3 addObject:[array_Main3 objectAtIndex:g]];

            }
            g++;
        }
    }
[table reloadData];
} 
```

# c++ - 将数据保存和加载到文件 c++（初学者）

> ID：11365456
> 
> 赞同：7
> 
> 时间：2012-07-06T15:43:56.173
> 
> 标签：c++, loading, save

我有一个包含许多不同变量的类，例如那里有一些多维向量。

我听说您可以将数据直接存储和加载到文件中，但是到什么程度呢？

例如，如果我创建此类的一个实例，将其填充，然后将其保存到文件中，我可以以相同的方式加载它吗？就像它是如何工作的？我是一次性保存所有数据还是必须以某种方式拆分数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T16:12:49.377

这不完全是 C++ 初学者的主题

C++ 没有自动的方式来存储/加载您的对象到/从文件中。无论您选择哪种方式，您都必须自己实施。

您可能会选择重载`<<`an`>>`运算符以与流一起使用，或者您可能希望使用自己的`Load`和`Store`方法（或您选择的任何合适的名称，例如`Serialize`/ `Deserialize`）。我个人更喜欢创建自己的函数而不是使用运算符，但这只是我。

这是一个简单的示例（带有重载`<<`和`>>`运算符）：

```
#include <fstream>
#include <iostream>

using namespace std;

class MyClass
{
public:
    MyClass (int x) : m_x(x), m_y(x+1) {}

    friend istream& operator >> (istream& in, MyClass& obj);
    friend ostream& operator << (ostream& out, const MyClass& obj);

private:
    int m_x;
    int m_y;
};

istream& operator >> (istream& in, MyClass& obj)
{
    in >> obj.m_x;
    in >> obj.m_y;
    return in;
}

ostream& operator << (ostream& out, const MyClass& obj)
{
    out << obj.m_x << ' ';
    out << obj.m_y << endl;
    return out;
}

int main(int argc, char* argv[])
{
    MyClass myObj(10);
    MyClass other(1);
    cout << myObj;
    ofstream outFile ("serialized.txt");
    outFile << myObj;
    outFile.close();
    ifstream inFile ("serialized.txt");
    inFile >> other;
    inFile.close();
    cout << other;
    return 0;
} 
```

值得一提的是，您应该注意序列化格式。在上面的示例中，它只是文本；但是如果您要存储大量这些对象，您可能会开始考虑序列化二进制数据（您需要在打开文件时使用`ofstream::binary`和`ifstream:binary`标志，并且不需要额外的分隔符，如序列化流中的和）`' '`。`endl`

通常，当您考虑序列化时，您还想考虑流的版本控制——这是另一个单独的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:02:25.713

您可以提供一个代码来遍历类的所有成员（可以选择跳过不重要的成员并转换其他一些成员）并准备连续的数据流。这就是狭义的序列化。Ofc 阅读时需要反过来做同样的事情。

在 C++ 中，您还可以执行二进制转储，例如`CopyMemory(ptr, sizeof(*ptr)`. 只有当您的数据不包含指针时它才能工作（尤其是包含具有虚拟方法的类的隐藏指针）。它唯一的优点是简单和惊人的速度。这种方法要求您的数据在内存中是连续的，这有时对它自己是有益的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T15:48:33.637

您可以考虑实现流运算符。

有了这些，您可以简单地使用以下内容进行读写：

```
fileStream >> yourObject
fileStream << yourObject 
```

基本上在 >> 运算符中，您将读取流并使用找到的数据构造对象。在 << 运算符中，您将对象以与您期望读取它的格式相同的格式写入流。

使用这种工作方式，您可以序列化您拥有的任何对象。

Google 为“重载流操作符”了解如何实现这些操作符。

# c++ - 用于文件 I/O 的 OpenMP“主”

> ID：11365464
> 
> 赞同：1
> 
> 时间：2012-07-06T15:44:06.350
> 
> 标签：c++, parallel-processing, openmp

我正在尝试将以下函数与 OpenMP 并行化。如果我使用`#pragma omp parallel for private(dbf,t_tmp)`我在读取数据库文件时得到一个 BAD_EXEC。这`PreFilter`是应该并行化的计算最密集的任务。最佳情况是一个主线程用于 IO，一个从属线程用于`PreFilter`. 这可以通过 OpenMP 实现还是我应该使用 pthreads？

```
for(int it=1; it <= dbfiles->size(); ++it) 
{
    ...

    dbf = openFILE(db_result->db_name,(char *)&id);
    ...
    readHMMFile(dbf,db_result->db_name,filename,t_tmp[curr_index],start_pos);   
    if(curr_index==0){ // modulo 4 ==0
          t_vec[bin]->MapFourHMMsToHMM4(t_tmp[0],t_tmp[1],t_tmp[2],t_tmp[3]);
          PreFilter(q_vec,t_vec[bin]);
    }
    fclose(dbf);
} 
```

# c# - 按固定宽度将字符串拆分为子字符串

> ID：11365466
> 
> 赞同：9
> 
> 时间：2012-07-06T15:44:16.830
> 
> 标签：c#, winforms

我有看起来像这样的数据......

```
 1 TESTAAA      SERNUM    A DESCRIPTION
   2 TESTBBB      ANOTHR    ANOTHER DESCRIPTION
   3 TESTXXX      BLAHBL 
```

我的问题是，将这些数据拆分成更小的子字符串的最有效方法是什么，因为会有数百行。此外，某些行将缺少最后一列。我尝试做正则表达式，但没有成功使用我用于宽度的模式。上面的数据应该分解成这些字段（下面列出的每列的长度）

```
{id} {firsttext} {serialhere} {description}
 4    22          6            30+ 
```

任何人都可以伸出援助之手或建议一个好的正则表达式匹配模式来提取信息吗？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T15:54:07.603

尝试以下正则表达式：

```
(.{4})(.{22})(.{6})(.+)? 
```

如果这些值始终为非空并用空格分隔（也就是说，它们不会相互碰撞），那么尝试一些更简单的方法，例如

```
line.Split(" ") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T15:46:37.897

我实际上建议直接通过[String.Substring](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)编写一个方法来执行此操作。这可能会更有效地为您提供确切的所需宽度。

这可能会起作用（尽管它未经测试，并且故意不剥离字符串填充）：

```
public static string[] SplitFixedWidth(string original, bool spaceBetweenItems, params int[] widths)
{
    string[] results = new string[widths.Length];
    int current = 0;

    for (int i = 0; i < widths.Length; ++i)
    {
        if (current < original.Length)
        {
            int len = Math.Min(original.Length - current, widths[i]);
            results[i] = original.Substring(current, len);
            current += widths[i] + (spaceBetweenItems ? 1 : 0);
        }
        else results[i] = string.Empty;
    }

    return results;
} 
```

话虽如此，如果您`Stream`直接从文本文件或文本文件中读取，则使用[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)将允许您直接将数据作为固定宽度数据读取。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-06T15:54:01.573

查看 MSDN 上的此链接：

[http://msdn.microsoft.com/en-us/library/zezabash.aspx](http://msdn.microsoft.com/en-us/library/zezabash.aspx)

基本上，这个`TextFieldParser`类正是做这种事情。这也是读取分隔数据（如 CSV 文件）的好方法。无论出于何种原因，Microsoft 选择将它放在`Microsoft.VisualBasic.FileIO`命名空间下，这很烦人，因为它与 VB 没有任何关系。

例如，您可以像这样使用它：

```
TextFieldParser parser = new TextFieldParser(new StringReader(fixedWidthData));
parser.TextFieldType = FieldType.FixedWidth;
parser.SetFieldWidths(4, 22, 6, -1);
while (!parser.EndOfData)
{
    string[] row = parser.ReadFields();
} 
```

# iphone - 以编程方式更改 SegmentControl 值的视图已更改

> ID：11365467
> 
> 赞同：0
> 
> 时间：2012-07-06T15:44:17.243
> 
> 标签：iphone, uiview, uiviewcontroller, uisegmentedcontrol

我在界面生成器的同一个 ViewController 中创建了两个视图。一个带有表格视图，另一个带有几个按钮。我想改变对 segmentControl 的 valueChanged 事件的看法。如何调用我已经创建的第二个视图。

***请帮忙。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:40:59.277

分段控件的处理程序：

```
-(void)controlDidChange:(id)sender {
   viewWithTable.hidden = !viewWithTable.hidden;
   viewWithButtons.hidden = !viewWithTable.hidden;
} 
```

# c# - 如何从模板中读取表单，然后使用 iTextSharp 填写？

> ID：11365468
> 
> 赞同：0
> 
> 时间：2012-07-06T15:44:22.373
> 
> 标签：c#, pdf-generation, itextsharp, livecycle, acrofields

我正在尝试使用 iTextSharp 阅读 PDF 模板，然后自动填写表格。该模板是使用 LiveCycle Developer 创建的。我不知道下面的代码有什么问题，但它并没有改变表单值。

有人可以告诉我我做错了什么吗？很难为 iText 的 C# 版本找到好的文档。

```
private void button_fill_Click(object sender, EventArgs e)
{
     OpenFileDialog ofd = new OpenFileDialog();
     if (ofd.ShowDialog() == DialogResult.OK)
     {
         using (MemoryStream ms = new MemoryStream())
         {
             PdfReader pdfReader = new PdfReader(ofd.FileName);
             PdfStamper pdfStamp = new PdfStamper(pdfReader, ms);
             AcroFields fields = pdfStamp.AcroFields;
             foreach (KeyValuePair<string, AcroFields.Item> f in fields.Fields)
             {
                 // this message is never displayed
                 MessageBox.Show("key: " + f.Key);  
             }

             //textfields
             // this one is working, and showing the value saved in the template
             MessageBox.Show("FakeDatabase_Table1_Company: " + fields.GetField("FakeDatabase_Table1_Company")); 
             // this part returns a false value, and not changing the field
             MessageBox.Show("Set: " + fields.SetField("FakeDatabase_Table1_Company", "Testing")); 

             try
             {
                 fields.SetField("FakeDatabase_Table1_Company", "Coca-Cola");
             }
             catch (Exception e2) { MessageBox.Show(e2.Message); }

             pdfReader.Close();
             pdfStamp.FormFlattening = true;
             pdfStamp.FreeTextFlattening = true;
             pdfStamp.Writer.CloseStream = false;
             pdfStamp.Close();
             Process.Start(ofd.FileName);
        }
    }
} 
```

try/catch 从不​​输出任何东西.. 也没有设置任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T20:09:01.227

事实证明代码很好。问题是pdf是动态的。自从我将 pdf 更改为静态后，我的代码现在几乎可以工作了。我现在可以在 AcroFields 中阅读，这就是给我带来问题的原因。它实际上并没有保存带有填充值的表单，但这是我到目前为止所拥有的。

```
public void loadPDF(String path)
        {
            using (MemoryStream ms = new MemoryStream())
            {
                PdfReader pdfReader = new PdfReader(path);
                PdfStamper pdfStamp = new PdfStamper(pdfReader, ms);
                AcroFields fields = pdfStamp.AcroFields;
                List<String> Keys = new List<string>();
                Boolean empty = true;
                foreach (var field in fields.Fields)
                {
                    empty = false;
                    Keys.Add(field.Key);
                }
                if (empty) MessageBox.Show("The template does not have any form fields in it.");
                foreach (String k in Keys)
                {
                    fields.SetField(k, "Testing");
                }

                pdfReader.Close();
                pdfStamp.FormFlattening = true;
                pdfStamp.FreeTextFlattening = true;
                pdfStamp.Writer.CloseStream = false;
                pdfStamp.Close();
                Process.Start(path);
            }
        } 
```

# c# - C# 和 Oracle 数据库连接

> ID：11365469
> 
> 赞同：1
> 
> 时间：2012-07-06T15:44:22.437
> 
> 标签：c#, database, oracle, oledb

您好，我有一个开发人员使用的项目

```
conn1 = new OleDbConnection("Provider=MSDAORA; Data Source=example;User ID=test;Password=test;Unicode=True");
        conn1.Open(); 
```

我对那个提供商 MSDAORA 有疑问，我认为它已经过时了所以我想用另一个没有 MSDAORA 的简单解决方案连接到我的数据库。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:46:29.717

尝试使用 Oracle 提供程序，添加对 System.Data.OracleClient 程序集的引用

在本例中使用 OracleConnection

```
string connectionString = "...";
using (OracleConnection connection = new OracleConnection(connectionString))
{
    connection.Open();
    using(OracleCommand command = new OracleCommand(your query))
    {
       command.Connection = connection;
       command.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:00:44.100

我使用了来自 oracle 的最新 ODAC (ODP.NET)，并将以下字符串与 ADO.NET 实体数据模型一起使用。

```
<add name="Entities" connectionString="metadata=res://*/DataTypes.Model1.csdl|res://*/DataTypes.Model1.ssdl|res://*/DataTypes.Model1.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=YOUR_SOURCE_HERE;PASSWORD=YOUR_PASSWORD_HERE;PERSIST SECURITY INFO=True;USER ID=YOUR_USER_ID_HERE&quot;" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T18:08:28.957

看看您如何要求一个简单的解决方案，另一个可能是最快和最肮脏的选择是尝试更改连接字符串中的提供程序。这将使您不必返回代码并添加对程序集的引用。

换句话说，在您的原始示例中，您的连接字符串是：

*提供者=MSDAORA；数据源=example；用户 ID=test；密码=test；Unicode=True*

尝试将提供程序更新为

*提供者= **OraOLEDB.Oracle**；数据源=example；用户 ID=test；密码=test；Unicode=True*

有关更多信息，请查看[http://www.c-sharpcorner.com/UploadFile/nipuntomar/connection-strings-for-oracle/](http://www.c-sharpcorner.com/UploadFile/nipuntomar/connection-strings-for-oracle/)

# xml - Dynamics CRM、功能区按钮、添加链接的子实体

> ID：11365473
> 
> 赞同：0
> 
> 时间：2012-07-06T15:44:52.273
> 
> 标签：xml, dynamics-crm, microsoft-dynamics

我正在尝试向联系人表单添加一个按钮，该按钮创建一个链接到父联系人的子活动记录。

我正在使用 Ribbon Workbench 来尝试这个。我已成功显示按钮，但无法创建子记录。功能区工作台不会发布以下 xml

我到目前为止的 XML 是：

```
 <?xml version="1.0" encoding="utf-16"?>
<RibbonDiffXml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <CustomActions>
    <CustomAction Id="new.contact.Button1.Button.CustomAction" Location="Mscrm.Form.contact.MainTab.Actions.Controls._children" Sequence="19">
      <CommandUIDefinition>
        <Button Command="new.contact.Command0.Command" Description="Send SMS" Id="new.contact.Button1.Button" Image32by32="$webresource:new_sms32" Image16by16="$webresource:new_sms16" LabelText="$LocLabels:new.contact.Button1.Button.LabelText" Sequence="19" TemplateAlias="o1" ToolTipTitle="$LocLabels:new.contact.Button1.Button.ToolTipTitle"     ToolTipDescription="$LocLabels:new.contact.Button1.Button.ToolTipDescription" />
      </CommandUIDefinition>
    </CustomAction>
  </CustomActions>
  <Templates>
    <RibbonTemplates Id="Mscrm.Templates" />
  </Templates>
  <CommandDefinitions>
    <CommandDefinition Id="new.contact.Command0.Command">
      <EnableRules />
      <DisplayRules />
      <Actions>
        <JavaScriptFunction FunctionName="AddSMS" Library="$webresource:new_WFTrigger">
          <StringParameter Name="child" Value="new_sms" />
          <CrmParameter Name="parentRecordId" Value="PrimaryItemIds" />
          <CrmParameter Name="parente" Value="PrimaryEntityTypeCode" /> <!--The ribbon workbench refuses to fill the Name of this parameter and tries to publish it as blank -->
        </JavaScriptFunction>
          </Actions>
    </CommandDefinition>
  </CommandDefinitions>
  <RuleDefinitions>
    <TabDisplayRules />
        <DisplayRules />
    <EnableRules />
  </RuleDefinitions>
  <LocLabels>
    <LocLabel Id="new.contact.Button1.Button.LabelText">
      <Titles>
        <Title description="Send SMS" languagecode="1033" />
      </Titles>
    </LocLabel>
    <LocLabel Id="new.contact.Button1.Button.ToolTipTitle">
      <Titles>
        <Title description="Send SMS" languagecode="1033" />
      </Titles>
    </LocLabel>
    <LocLabel Id="new.contact.Button1.Button.ToolTipDescription">
      <Titles>
        <Title description="Send SMS" languagecode="1033" />
      </Titles>
    </LocLabel>
  </LocLabels>
</RibbonDiffXml> 
```

我拥有的javascript网络资源是：

```
function AddSMS(child, parente, parentRecordId) {
    var url = Xrm.Page.context.getServerUrl() + "main.aspx?etn= " + child + " &extraqs=%3f_CreateFromId%3d" + parentRecordId + "%26_CreateFromType%3d" + parente + "%26etn%" + child + " &pagetype=entityrecord";
open(url, 'Create SMS');
} 
```

更新：在我的环境中出现了一个问题，所以我开始了一个新的组织来开发定制。当我回到同一点时，我会回到这个线程。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:22:16.493

导入屏幕的最后一页应该有一个错误，可以帮助您推断问题。我花了一段时间才意识到错误日志甚至在那个页面上。如果我没记错的话，它看起来像一个超链接。

您可以在该错误日志中发布错误消息吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:02:34.513

功能区工作台不发布 JavaScriptFunction 参数的“名称”属性，因为它们仅在将参数添加到 Url 操作时使用 - 所以我认为问题与此无关。

你遇到了什么错误？也许您可能会遇到超时 - 您是否正在发布到 Dynamics CRM Online？

# ejs - 使用来自 express 客户端的 ejs 部分

> ID：11365479
> 
> 赞同：1
> 
> 时间：2012-07-06T15:45:09.933
> 
> 标签：ejs

如何在 EJS 客户端使用部分？我正在使用 express，我想在服务器端和客户端之间共享相同的模板。我已将相同的模板编译为客户端代码，但它无法识别部分功能。

```
ReferenceError: ejs:38
    36|   <body>
    37| 
 >> 38|         <%- partial('header') %>
    39|     <div class="container">
    40|         <%- body %>
    41|     </div> <!-- /container -->

partial is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T19:56:49.653

我认为包括（部分一年前）在客户端不起作用。您仍然可以尝试编写支持它们的实现，但这会非常困难。就我而言，我只是想在客户端禁用它们。添加这一行：

```
source = source.replace(/<% include.+%>/g, ""); 
```

成功了。它位于：

```
EJS.Compiler = function(source, left) {
   this.pre_cmd = ['var ___ViewO = [];'];
   this.post_cmd = new Array();
   this.source = ' ';   
   if (source != null)
   {
      if (typeof source == 'string')
      {
        source = source.replace(/\r\n/g, "\n");
        source = source.replace(/\r/g,   "\n");
        // Just ignore the includes
        source = source.replace(/<% include.+%>/g, "");
        this.source = source;
      } else if (source.innerHTML){
        this.source = source.innerHTML;
      } 
```

当然，它离最佳解决方案还很远，但它使我的模板在服务器端和客户端都可以工作。就我而言，我不需要在客户端执行此包含。

# vim - 在vim中禁用有向图

> ID：11365481
> 
> 赞同：2
> 
> 时间：2012-07-06T15:45:24.217
> 
> 标签：vim, digraphs

我的 gVim 安装有一个不寻常的问题——大约有一半的时间我打开我的电脑，gVim 会自动用它们对应的二合字母替换字符序列，例如 'a 和 "o。另一半的时候，它不会.我不想要这个功能，因为它使输入字符串和其他序列非常令人沮丧。但我找不到禁用它的方法。

这似乎不是默认的二合字母选项，因为它们使用退格键或 CTRL-K 来执行任何操作。这可能是什么？我的 vimfiles 文件夹中唯一的包是 pyflakes。我尝试将键盘映射设置为默认值，并检查我是否以某种方式安装了 EasyAccents 插件。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:31:42.333

检查，没有定义键盘映射。检查对`:verbose set keymap?` 我来说听起来的输出，就像某些插件正在设置重音键盘映射，因此将例如 'a 替换为 á

否则，如果这没有帮助，请使用粘贴模式，这基本上会在输入字符时禁用 Vim 的所有后处理。该`pastetoggle`设置对此很有用。

无论如何，请查看[常见问题 36.12](http://vimhelp.appspot.com/vim_faq.txt.html#faq-36.12)以了解如何调试 .vimrc 或插件的问题。

# jquery - 与 PhoneGap Cordova 1.9.0 和 Windows Phone 7.1.1 一起使用时，jQuery Mobile 无法启动

> ID：11365485
> 
> 赞同：1
> 
> 时间：2012-07-06T15:45:42.217
> 
> 标签：jquery, cordova, windows-phone

在 Windows 7 Ultimate 64 位机器上的 Visual Studio 2010 SP1 中与 PhoneGap Cordova 1.9.0 和 Windows Phone 7.1.1 一起使用时，我无法让 jQuery Mobile 正确初始化和启动。

有没有人有一个带有测试页面的入门项目模板来演示如何正确设置项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:37:49.010

我不确定这是否适用于 windows phone，但它对 iOS 和 Android 有帮助：

1）按照此处的说明关闭“自动页面初始化”：http: [//jquerymobile.com/test/docs/api/globalconfig.html](http://jquerymobile.com/test/docs/api/globalconfig.html)

2) 在您的应用程序的 phonegap "deviceinit" 处理程序中，调用 $.mobile.initializePage();

问题源于 jquerymobile 以多种方式重新排列 DOM，并且您不希望在您的电话间隙应用程序准备好之前发生这种情况。这发生在 DOM 准备好之后。

在我的页面中，我在加载 jquery mobile*之前立即使用它：*

```
 <script type="text/javascript">
    //this must come before jquery is loaded
    $(document).bind("mobileinit", function(){
        "use strict";
        $.mobile.autoInitializePage = false;
    });
    </script> 
```

在同一页面的末尾，我使用它来进行最终初始化：

```
 <script type="text/javascript">
    //called on phone when device is full initialized
    document.addEventListener("deviceready",function() {
        "use strict";
        //phone init code that manipulates the DOM...
        $.mobile.initializePage();

    });

    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:20:52.027

您可以通过下载 Cordova 2.2.0 版本并解压缩来创建自己的模板。在文件夹中有一个名为 incubator-cordova-wp7.zip 的子文件夹

解压缩该文件，您将看到一个用于示例 Cordova 项目的 Visual Studio 解决方案 - 打开它。然后在 Visual Studio 中转到文件 > 导出模板并使用默认设置。将其保存在您喜欢的任何位置，现在您就拥有了您的模板。

使用这个新模板创建一个新项目，然后按“运行”，您应该会在 Windows Phone 模拟器中看到通常的 Cordova 起始页。

* * *

*我在让 jquery mobile 在 WP7 中工作时遇到问题。从布局来看，似乎并非所有东西都在工作——就像不是所有的 CSS 都被应用了，我正试图找出如何调试这个东西——非常令人沮丧。我很惊讶，因为 jqm 网站说 Windows Phone 7 获得了 A 级支持。我注意到当从文件或网址（例如 localStorage）加载文件时，某些功能会打开/关闭。例如，在 IE 中打开一个网站，然后在控制台中键入 localStorage - 它会告诉您它是一个对象等等。从你的硬盘打开一个 html 文件并输入 localStorage，你什么也得不到。我试过弄乱 angularjs 和 emberjs，它们在模拟器和 IE10 中都有问题，所以我认为 WP7 / IE9 / 什么都烂！（恕我直言）*

# javascript - 如何设置新创建的 DOM 元素的 HTML 内容？

> ID：11365489
> 
> 赞同：4
> 
> 时间：2012-07-06T15:46:03.057
> 
> 标签：javascript, html, string, dom-manipulation

我正在尝试以这种方式写入文档。我不使用的原因`document.getElementById("holder").innerHTML="x"`是因为有机会我会写不止一次，并且不希望任何内容被覆盖。然而，这种方法的问题在于，当我希望包含在字符串中的标签工作时，文本内容被视为文字字符串。我应该如何更改此代码以使标签正确显示在文档上？

```
if (office1match == matchindex[0]) {
    var newParagraph = document.createElement('article');
    newParagraph.textContent = "<p class=\"title\">Core i.1.1</p><img class=\"caseimg\" src=\"images\\case1.png\"><p><span class=\"bold\">Motherboard:</span> ASRock H61M/U3S3 LGA 1155 Intel H61</br><span class=\"bold\">Processor:</span> Intel Celeron G550 Sandy Bridge 2.6GHz LGA 1155 65W</br><span class=\"bold\">Video Card:</span> On Board</br><span class=\"bold\">Memory:</span> Crucial 2GB (2 x 1GB) 240-Pin DDR3 SDRAM DDR3 1333</br><span class=\"bold\">DVD Burner:</span> ASUS 24X DVD Burner</br><span class=\"bold\">Hard Drive:</span> Western Digital Caviar Blue WD2500AAKX 250GB 7200 RPM</br><span class=\"bold\">Case:</span> Rosewill R363-M-BK Black Ultra High Gloss Finished MicroATX</br><span class=\"bold\">OS:</span> Microsoft Windows 7 Home Premium</br><span class=\"bold\">Cost:</span> $430.00</p>";
    document.getElementById("holder").appendChild(newParagraph);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T15:47:58.210

使用[`innerHTML`](https://developer.mozilla.org/en/DOM/element.innerHTML)属性 of`newParagraph`而不是[`textContent`](https://developer.mozilla.org/en/DOM/Node.textContent)。顾名思义，前者处理 HTML，而后者处理纯文本（因此插入的 HTML 被转义，这在您想要防止 XSS 时很有用）。

```
newParagraph.innerHTML = "<p class=\"title\">Core i.1.1</p><img class=\"caseimg\" src=\"images\\case1.png\"><p><span class=\"bold\">Motherboard:</span> ASRock H61M/U3S3 LGA 1155 Intel H61</br><span class=\"bold\">Processor:</span> Intel Celeron G550 Sandy Bridge 2.6GHz LGA 1155 65W</br><span class=\"bold\">Video Card:</span> On Board</br><span class=\"bold\">Memory:</span> Crucial 2GB (2 x 1GB) 240-Pin DDR3 SDRAM DDR3 1333</br><span class=\"bold\">DVD Burner:</span> ASUS 24X DVD Burner</br><span class=\"bold\">Hard Drive:</span> Western Digital Caviar Blue WD2500AAKX 250GB 7200 RPM</br><span class=\"bold\">Case:</span> Rosewill R363-M-BK Black Ultra High Gloss Finished MicroATX</br><span class=\"bold\">OS:</span> Microsoft Windows 7 Home Premium</br><span class=\"bold\">Cost:</span> $430.00</p>"; 
```

[jsFiddle 演示](http://jsfiddle.net/bjF8V/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T07:12:28.190

由于您提到您可能不止一次编写，并且不想覆盖您可以使用的现有数据`.insertAdjacentHTML()`。专业提示：如果您使用单引号括住您的字符串，则不必在字符串中使用斜线转义双引号。

**演示：http:** [//jsfiddle.net/ThinkingStiff/myzjn/](http://jsfiddle.net/ThinkingStiff/myzjn/)

### 脚本：

```
var newParagraph = document.createElement('article');
newParagraph.insertAdjacentHTML( 'beforeEnd', '<p class="title">Core i.1.1</p><img class="caseimg" src="images\case1.png"><p><span class="bold">Motherboard:</span> ASRock H61M/U3S3 LGA 1155 Intel H61</br><span class="bold">Processor:</span> Intel Celeron G550 Sandy Bridge 2.6GHz LGA 1155 65W</br><span class="bold">Video Card:</span> On Board</br><span class="bold">Memory:</span> Crucial 2GB (2 x 1GB) 240-Pin DDR3 SDRAM DDR3 1333</br><span class="bold">DVD Burner:</span> ASUS 24X DVD Burner</br><span class="bold">Hard Drive:</span> Western Digital Caviar Blue WD2500AAKX 250GB 7200 RPM</br><span class="bold">Case:</span> Rosewill R363-M-BK Black Ultra High Gloss Finished MicroATX</br><span class="bold">OS:</span> Microsoft Windows 7 Home Premium</br><span class="bold">Cost:</span> $430.00</p>' );
document.body.appendChild(newParagraph); 
```

# javascript - 如果选中一个则禁用所有复选框，并在未选中时启用

> ID：11365491
> 
> 赞同：2
> 
> 时间：2012-07-06T15:46:10.423
> 
> 标签：javascript, jquery, html

我正在编写一个基本脚本，但我似乎无法理解它为什么不起作用。基本上，如果选中一个复选框，脚本会锁定所有复选框，然后如果用户决定取消选中复选框，则将其解锁。

这是代码

```
//Script for questions where you check one option or the other (locks other options out)
$('.optionBox input').click(function(){
    var optionBoxElement$ = $(this).closest('.optionBox');

    //If no option is checked, the make all the options available to be selected
    //Otherwise, one option must be checked so lock out all other options
    if(optionBoxElement.find('input:not(:checked)').length == optionBoxElement.find(':input').length)
        optionBoxElement.find(':input').prop('disabled',false); 
    else
        optionBoxElement.find('input:not(:checked)').prop('disabled',true); 
        optionBoxElement.find('input:checked').prop('disabled',false); //makes sure that the checkbox that was checked is not disabled so the user can uncheck and change his answer    

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T15:58:47.640

你可以像下面那样做。您所要做的就是检查复选框是否被选中。

```
$('.optionBox input:checkbox').click(function(){
    var $inputs = $('.optionBox input:checkbox'); 
    if($(this).is(':checked')){  // <-- check if clicked box is currently checked
       $inputs.not(this).prop('disabled',true); // <-- disable all but checked checkbox
    }else{  //<-- if checkbox was unchecked
       $inputs.prop('disabled',false); // <-- enable all checkboxes
    }
}) 
```

[http://jsfiddle.net/ZB8pT/](http://jsfiddle.net/ZB8pT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:58:12.030

像[这样的小提琴](http://jsfiddle.net/fFhSh/1/)：

```
//Script for questions where you check one option or the other (locks other options out)
$(':checkbox').click(function(){ 

    var $checkbox = $(this);
    var isChecked = $checkbox.is(':checked')

    //If no option is checked, the make all the options available to be selected
    //Otherwise, one option must be checked so lock out all other options
    if(isChecked)
        $checkbox.siblings(":checkbox").attr("disabled", "disabled");
    else
        $checkbox.siblings(":checkbox").removeAttr("disabled"); 

});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T16:15:57.927

也许像[这样的小提琴](http://jsfiddle.net/CrossEye/vNpmB/)。

```
$('.optionBox :checkbox').click(function() {
    var $checkbox = $(this), checked = $checkbox.is(':checked');
    $checkbox.closest('.optionBox').find(':checkbox').prop('disabled', checked);
    $checkbox.prop('disabled', false);
}); 
```

# javascript - Javascript 更改服务器给我的时间以匹配另一个时区

> ID：11365503
> 
> 赞同：1
> 
> 时间：2012-07-06T15:46:46.843
> 
> 标签：javascript

我有一个网页，其中有一个表格，表格中的列是时间发生了变化。时间来自另一个页面/服务器。我需要将此时间转换为 UTC 时间，以便我可以添加两个小时，然后将其显示。

网上所有的方法都试过了，好像没有用，有大神帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:14:07.890

您可以使用[http://momentjs.com/](http://momentjs.com/)。

> 用于解析、操作和格式化日期的轻量级 (4.3k) javascript 日期库。

```
alert(moment("2011-10-31", "YYYY-MM-DD").subtract('hours', 3)); 
```

**编辑：**
对于您的情况：

```
var myTime = moment(data.lastTrade.date, "HH:MM:SS");
alert(myTime.utc().format("HH:MM:SS")); 
```

# ruby-on-rails - Rails - f.select 和奇怪的语法错误

> ID：11365505
> 
> 赞同：0
> 
> 时间：2012-07-06T15:46:51.650
> 
> 标签：ruby-on-rails, ruby, syntax

我使用以下`f.select`查询：

```
= f.select(:category_id, @categories, :html_options => {:class => 'select_box'}, {:disabled => lambda{ |category| category.id == 18 }}) 
```

这行给我一个语法错误......为什么？所有的大括号都应该闭合...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:50:03.503

```
= f.select(:category_id, @categories, :html_options => {:class => 'select_box'}, {:disabled => lambda{ |category| category.id == 18 }}) 
```

应该

```
= f.select(:category_id, @categories, :html_options => {:class => 'select_box', :disabled => lambda{ |category| category.id == 18 }}) 
```

您在自己的哈希中有 disabled 选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:03:34.487

根据api，方法定义为

```
f.select(method, choices, options = {}, html_options = {}) 
```

where`:disabled`是一个选项，`:class`将是一个 html_option，所以调用应该写成

```
f.select(:category_id, @categories, {:disabled => lambda{ |category| category.id == 18 }}, { :class => 'select_box' }). 
```

不过，最后一组括号不是必需的。

# ios - 在 Xcode 3 上自定义 App 外观？

> ID：11365507
> 
> 赞同：-5
> 
> 时间：2012-07-06T15:46:54.497
> 
> 标签：ios, xcode

是否可以使用 Xcode 3 自定义应用程序的外观？我只是在等待 Mountain Lion 下载 Xcode 4，但我想自定义我的应用程序的外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:50:19.807

是的，您使用界面生成器。你特别想定制什么？你的问题非常模糊。此外，您知道您仍然可以在没有安装山狮的情况下下载 Xcode 4。

这是有关如何自定义应用程序 UI 的链接：

[http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/xcode_quick_start/020-Tutorial_Designing_a_User_Interface_with_Interface_Builder/interface_builder_tutorial.html](http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/xcode_quick_start/020-Tutorial_Designing_a_User_Interface_with_Interface_Builder/interface_builder_tutorial.html)

编辑：

您说您想将图像添加到导航栏。只需检查类参考：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)

采用`setBackgroundImage:forBarMetrics:`

# http - 寻找http沙箱

> ID：11365513
> 
> 赞同：0
> 
> 时间：2012-07-06T15:47:00.703
> 
> 标签：http, testing

我正在寻找可以在其上测试我的 AJAX 请求的可公开访问的 Web 服务器。我记得有一个网站可以显示我的所有请求等，但我忘记了名字。任何人都可以推荐一些东西吗？

编辑：

我在 localhost 上有一个 Web 服务器，我想从我的 Javascript 向另一台服务器发送 POST。这是为了测试我的跨源功能。我知道我可以设置自己的 Web 服务器并更改本地 DNS 设置，使其显示为另一个域，但我宁愿使用现有服务器也不愿编写自己的服务器端代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:51:25.637

我想你可以为此使用[jsfiddle](http://jsfiddle.net/)。查看他们的[API 文档](http://doc.jsfiddle.net/use/echo.html)以获取指南和一些[示例](http://jsfiddle.net/zalun/NF2jz/light/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:35:09.060

如果您想从不同的域发送和获取数据，而无需更改“Access-Control-Allow-Origin”，您可以使用[JSONP](http://en.wikipedia.org/wiki/JSONP)。这完全避免了整个跨源的痛苦，但是您必须使用 GET 请求。

您可以使用 jsfiddle 网址对此进行测试：

```
http://jsfiddle.net/echo/jsonp/ 
```

例如：

```
http://jsfiddle.net/echo/jsonp/?name=fred&callback=callbackName 
```

将返回

```
callbackName({"name": "fred"}); 
```

# maven - 无法使用 Maven 构建 WSO2 XACML 示例项目

> ID：11365514
> 
> 赞同：0
> 
> 时间：2012-07-06T15:47:04.147
> 
> 标签：maven, wso2, xacml

我正在尝试开发用于医疗保健应用程序的 XACML 示例——位于[此处](http://xacmlinfo.com/2012/03/06/xacml-sample-for-health-care "这里")的 1 个教程。它指出您必须使用 Maven 构建项目

所以我尝试了：

```
mvn package 
```

但是得到以下错误：

[错误] 无法在项目 com.medi.sample.service 上执行目标：无法解析项目 com.medi:com.medi.sample.service:jar:1.0.0 的依赖关系：未能找到 org.apache.axis2：[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)中的axis2:jar:1.6.1-wso2v5已缓存在本地仓库中，直到central 的更新间隔已过或强制更新后才会重新尝试解析-> [帮助1]

使用 Maven 构建项目的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:15:21.723

我想你已经从这里 [1] 得到了答案...... :) 但是你需要在 pom.xml 文件中配置一个 maven 存储库，并且你需要在线构建......我猜那个 pom 有问题。根据this [2] .xml文件...似乎现在已修复..

[1] [http://xacmlinfo.com/2012/03/06/xacml-sample-for-health-care/#comment-145](http://xacmlinfo.com/2012/03/06/xacml-sample-for-health-care/#comment-145) [2] [http://xacmlinfo.com/2012/03/06/xacml-医疗保健样本/#comment-150](http://xacmlinfo.com/2012/03/06/xacml-sample-for-health-care/#comment-150)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:23:59.323

问题是基于在 Maven Central 中找不到的 1.6.1-wso2v5 版本的依赖 axis2 的错误版本。这意味着您必须配置一个补充存储库，或者只是该示例无法以这种方式工作。

# java - 读取 xml 节点时的 classcastexception

> ID：11365517
> 
> 赞同：0
> 
> 时间：2012-07-06T15:47:17.200
> 
> 标签：java, android, xml

我将尝试阅读 xml，按照此处在线找到的教程[http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

```
public String leggi_palinsesto()
{
    String comodo="";
    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element
    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    // looping through all item nodes <item>

    for (int i = 0; i < nl.getLength(); i++) {
        //Element e = null;
        Element e = (Element) nl.item(i);
        String titolo = parser.getValue(e, KEY_TITOLO); // name child value
        String artista = parser.getValue(e, KEY_ARTISTA); // cost child value
        System.out.println(artista+" - "+titolo);
        comodo=artista+" - "+titolo;
    }

    return comodo;
} 
```

当调试到达时`Element e = (Element) nl.item(i);`返回 classcastexception 错误，但我确定这是正确的代码。

这是日志猫

```
07-06 18:03:14.561: E/AndroidRuntime(1602): FATAL EXCEPTION: main
07-06 18:03:14.561: E/AndroidRuntime(1602): java.lang.ClassCastException: org.apache.harmony.xml.dom.ElementImpl
07-06 18:03:14.561: E/AndroidRuntime(1602):     at it.axiomatic.radioamicizia.RadioAmiciziaActivity.leggi_palinsesto(RadioAmiciziaActivity.java:254)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at it.axiomatic.radioamicizia.RadioAmiciziaActivity$1$1.run(RadioAmiciziaActivity.java:121)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at android.os.Handler.handleCallback(Handler.java:587)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at android.os.Looper.loop(Looper.java:123)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at java.lang.reflect.Method.invokeNative(Native Method)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at java.lang.reflect.Method.invoke(Method.java:521)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-06 18:03:14.561: E/AndroidRuntime(1602):     at dalvik.system.NativeStart.main(Native Method) 
```

这是 .xml 文件：

```
http://www.radioamicizia.com/demo.xml 
```

编辑：我已经尝试使用原始示例 xml 文件（http://api.androidhive.info/pizza/?format=xml），但是在将节点转换为元素时......错误！

编辑：

```
static final String KEY_ITEM = "item"; // parent node
static final String KEY_TITOLO = "name";
static final String KEY_ARTISTA = "cost"; 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:13:39.723

来自 Java[文档](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/NodeList.html#item%28int%29)：

> 公共节点项目（int index）

`NodeList.item(i)`返回 a`Node`不是`Element`. 该节点可以是其他任何东西，而不仅仅是一个`Element`，这解释了为什么您会收到该错误。

如果您只想处理 XML 的元素，您应该在之前进行此检查：

```
if(nl.item(i).getNodeType() == Node.ELEMENT_NODE){
  Element e = (Element) nl.item(i);
  // Process element here
} 
```

**编辑**用这个替换你的`for`循环：

```
for (int i = 0; i < nl.getLength(); i++) {
    if(nl.item(i).getNodeType() != Node.ELEMENT_NODE)
            continue;

    Element e = (Element) nl.item(i);
    String titolo = parser.getValue(e, KEY_TITOLO); // name child value
    String artista = parser.getValue(e, KEY_ARTISTA); // cost child value
    System.out.println(artista+" - "+titolo);
    comodo=artista+" - "+titolo;
} 
```

# java - 在jsp中插入非编码的html代码

> ID：11365518
> 
> 赞同：0
> 
> 时间：2012-07-06T15:47:19.083
> 
> 标签：java, jsp, url, encoding, get

我有一个 jsp 页面，它在 get 参数中接受一个字符串`mystring`：

```
http://localhost:8080/MyApp/index.jsp?mystring= 
```

我正在尝试将此字符串放在`<pre>`标签内。

```
<body>
 <pre>
      <%= request.getParameter("mystring") %>
  </pre>
</body> 
```

当我打电话时，`http://localhost:8080/MyApp/index.jsp?mystring=<html>`什么都没有打印。然后我尝试[了 URLUTF8Encoder](http://www.google.co.in/url?sa=t&rct=j&q=urlutf8encoder&source=web&cd=1&ved=0CFEQFjAA&url=http://www.w3.org/International/URLUTF8Encoder.java&ei=9QL3T9CcBoXUrQfBxu3ZBg&usg=AFQjCNEnumDvxsVxcmuPQfm85w4nqiTi5Q)并且它适用于大多数标签但是当我通过这样的东西时：

```
<script>window.serq=[];StackExchange={ready:function(f){serq.push(f)}}</script>
    <title>Get SVG representation of div using jQuery SVG - Stack Overflow</title>
    <link rel="shortcut icon" href="http://cdn.sstatic.net/stackoverflow/img/favicon.ico">
    <link rel="apple-touch-icon" href="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png">
    <link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml">
    <link rel="stylesheet" type="text/css" href="http://cdn.sstatic.net/stackoverflow/all.css?v=691f98480525">
    <meta name="relativepagescore" content="5555">
    <link rel="canonical" href="http://stackoverflow.com/questions/11340476/get-svg-representation-of-div-using-jquery-svg">
    <link rel="alternate" type="application/atom+xml" title="Feed for question 'Get SVG representation of div using jQuery SVG'" href="/feeds/question/11340476">
    <script type="text/javascript">
      StackExchange.ready(function () {
        StackExchange.realtime.init('ws://sockets.ny.stackexchange.com');
        StackExchange.realtime.subscribeToInboxNotifications();
        StackExchange.realtime.subscribeToReputationNotifications('1');            
      });
    </script> 
```

我没有得到任何回应。

url编码后如下：

```
http://localhost:8080/SnippetImage/image.jsp?mystring=%3cspan+class%3d%22tag%22%3e%26lt%3bscript%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3ewindow%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e.%3c%2fspan%3e%3cspan+class%3d%22pln%22%3eserq%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%5b%5d%3b%3c%2fspan%3e%3cspan+class%3d%22typ%22%3eStackExchange%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%7b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3eready%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3a%3c%2fspan%3e%3cspan+class%3d%22kwd%22%3efunction%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e(%3c%2fspan%3e%3cspan+class%3d%22pln%22%3ef%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e)%7b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3eserq%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e.%3c%2fspan%3e%3cspan+class%3d%22pln%22%3epush%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e(%3c%2fspan%3e%3cspan+class%3d%22pln%22%3ef%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e)%7d%7d%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3b%2fscript%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++%0a%0a++++%0a%0a++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3btitle%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3eGet+SVG+representation+of+div+using+jQuery+SVG+-+Stack+Overflow%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3b%2ftitle%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3blink%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3erel%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22shortcut+icon%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3ehref%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22http%3a%2f%2fcdn.sstatic.net%2fstackoverflow%2fimg%2ffavicon.ico%22%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3blink%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3erel%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22apple-touch-icon%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3ehref%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22http%3a%2f%2fcdn.sstatic.net%2fstackoverflow%2fimg%2fapple-touch-icon.png%22%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3blink%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3erel%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22search%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3etype%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22application%2fopensearchdescription%2bxml%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3etitle%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22Stack+Overflow%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3ehref%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22%2fopensearch.xml%22%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a%0a%0a++++%0a%0a++++%0a%0a++++%0a%0a++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3blink%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3erel%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22stylesheet%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3etype%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22text%2fcss%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3ehref%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22http%3a%2f%2fcdn.sstatic.net%2fstackoverflow%2fall.css%3fv%3d691f98480525%22%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++%0a%0a++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3bmeta%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3ename%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22relativepagescore%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3econtent%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%225555%22%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3blink%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3erel%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22canonical%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3ehref%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22http%3a%2f%2fstackoverflow.com%2fquestions%2f11340476%2fget-svg-representation-of-div-using-jquery-svg%22%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3blink%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3erel%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22alternate%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3etype%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22application%2fatom%2bxml%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3etitle%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22Feed+for+question+'Get+SVG+representation+of+div+using+jQuery+SVG'%22%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3ehref%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22%2ffeeds%2fquestion%2f11340476%22%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a%0a%0a%0a%0a++++++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3bscript%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22atn%22%3etype%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%3d%3c%2fspan%3e%3cspan+class%3d%22atv%22%3e%22text%2fjavascript%22%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a+++++++++++++%3c%2fspan%3e%3cspan+class%3d%22typ%22%3eStackExchange%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e.%3c%2fspan%3e%3cspan+class%3d%22pln%22%3eready%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e(%3c%2fspan%3e%3cspan+class%3d%22kwd%22%3efunction%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e()%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e+%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%7b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a+++++++++++++++++%3c%2fspan%3e%3cspan+class%3d%22typ%22%3eStackExchange%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e.%3c%2fspan%3e%3cspan+class%3d%22pln%22%3erealtime%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e.%3c%2fspan%3e%3cspan+class%3d%22pln%22%3einit%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e(%3c%2fspan%3e%3cspan+class%3d%22str%22%3e'ws%3a%2f%2fsockets.ny.stackexchange.com'%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e)%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++++++++++++++%3c%2fspan%3e%3cspan+class%3d%22typ%22%3eStackExchange%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e.%3c%2fspan%3e%3cspan+class%3d%22pln%22%3erealtime%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e.%3c%2fspan%3e%3cspan+class%3d%22pln%22%3esubscribeToInboxNotifications%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e()%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++++++++++++++%3c%2fspan%3e%3cspan+class%3d%22typ%22%3eStackExchange%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e.%3c%2fspan%3e%3cspan+class%3d%22pln%22%3erealtime%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e.%3c%2fspan%3e%3cspan+class%3d%22pln%22%3esubscribeToReputationNotifications%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e(%3c%2fspan%3e%3cspan+class%3d%22str%22%3e'1'%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e)%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e++++++++++++%0a%0a++++++++%3c%2fspan%3e%3cspan+class%3d%22pun%22%3e%7d)%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%0a++++++++%3c%2fspan%3e%3cspan+class%3d%22tag%22%3e%26lt%3b%2fscript%26gt%3b%3c%2fspan%3e%3cspan+class%3d%22pln%22%3e%0a%3c%2fspan%3e 
```

我在这里做错了什么？有什么办法可以在不编码的情况下显示html？

*   我只需要发送一个 GET 请求。不是 POST 请求。
*   没有javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:58:38.737

> url编码后如下： `http://localhost:8080/SnippetImage/image.jsp?code=%3cspan...`

请注意，您的参数`mystring`在您的 URL 字符串中不存在。因此，您的 jsp 页面将一无所获。

另请注意，[http url 有一个最大长度](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)，我只是在猜测，但看起来你可能会遇到硬限制。如果是，则此编码返回的方式可能无法预测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:25:58.933

试试这个：

```
<%= request.getParameter("mystring").replaceAll("<","&lt;").replaceAll(">","&gt;") %> 
```

# asp.net - 如何在我的源代码中对字符串进行拼写检查

> ID：11365522
> 
> 赞同：2
> 
> 时间：2012-07-06T15:47:37.497
> 
> 标签：asp.net, spell-checking

由于我是一个如此懒惰的程序员，我的代码充满了字符串，而且我不会像我应该使用的那样使用资源文件。我喜欢认为我是一个很好的拼写者，但我犯了错误......

```
MessageToUser = "Please clikc on teh button"  
DisplayPopup(MessageToUser) 
```

我使用 Visual Web Developer 编写 VB.net 和 C#，但也想检查经典 ASP、Javascript 文件甚至 HTML。是否有免费工具可以检查我的整个项目（或目录中的每个文件）的拼写？

我发现了[Softario](http://www.softario.com/scsc.html)（有点旧？）、[BatchSpellChecker](http://www.batchspellchecker.com/)（没有提到 .net）和[这个 VSIX](http://visualstudiogallery.msdn.microsoft.com/7c8341f1-ebac-40c8-92c2-476db8d523ce)（仅适用于 Visual Studio），但在我安装未知的东西之前想要一些建议。可能有更好的工具？

（不要将此问题与对我的程序中的用户输入进行拼写检查的行为混淆。这是我希望检查的源代码中的单词。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:49:26.100

是的，有一个名为 Spell Checker 的视觉工作室扩展。在 NuGet 中搜索它。

[拼写检查扩展 Visual Studio](http://visualstudiogallery.msdn.microsoft.com/7c8341f1-ebac-40c8-92c2-476db8d523ce/)

这是[Julie Lerman](http://thedatafarm.com/blog/)在 Entity Framework Pluralsight 教程中推荐的。

# sinatra - Sinatra /w Thin：记录？

> ID：11365524
> 
> 赞同：0
> 
> 时间：2012-07-06T15:47:38.333
> 
> 标签：sinatra, thin, webrick

我最近为我正在开发的 Sinatra 应用程序安装了 Thin。但是，它似乎不像 WEBrick 那样记录/输出请求、响应和错误消息。有什么办法可以打开这些，也可以使用调试记录器？

如果没有，如果有人可以向我指出如何让 Sinatra 选择 WEBrick 而不是 Thin（我正在使用 shotgun 运行我的 sinatra 应用程序），我会很乐意切换回 WEBrick

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:15:04.580

要使用 WEBrick，请将 shotgun 运行为：shotgun yourapp.rb --server=webrick

# android - SharedPreferences.getAll() 没有错误的首选项键。如何检索所有密钥？

> ID：11365525
> 
> 赞同：6
> 
> 时间：2012-07-06T15:47:39.293
> 
> 标签：android, sharedpreferences, android-preferences

只有具有 android:defaultValue="true" 的 CheckboxPreference 键将显示在下面的代码中。所以没有显示 defaultValue="false" 的键。**那么如何获取我的首选项文件中所有键的列表？**

```
 PreferenceManager.setDefaultValues(this,R.xml.settings,true); //readAgain=false is same result
        SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(this);
        Map<String, ?> prefMap=prefs.getAll();
         for(String key:prefMap.keySet()) {
             Log.d("preference key=",key); //only keys with true are shown
         }
    } 
```

根据文档 getAll() 应该：“从首选项中检索所有值。” 但是，除非用户稍后设置了首选项，否则它似乎只能获取具有 default=true 的键。

**编辑：[这可能与 Android Bug: 6441 有关](http://code.google.com/p/android/issues/detail?id=6641)，但没有给我一个解决方法来获取所有密钥。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:56:27.350

您可以使用以下命令访问所有首选项（我使用它来启用/禁用所有首选项）：

```
 final ListAdapter adapter = getPreferenceScreen().getRootAdapter();
    for (int i = 0; i < adapter.getCount(); i++) {
        Object object = adapter.getItem(i);
        if(object instanceof Preference){
            ((Preference)object).setEnabled(state);  // state -> my own variable
        } 
    } 
```

# c# - 根据属性的最小值从集合中查找项目

> ID：11365527
> 
> 赞同：2
> 
> 时间：2012-07-06T15:47:54.690
> 
> 标签：c#, linq, lambda

我定义了以下对象：

```
public class MyGroup
{
    public MyItem[] Items;
}

public class MyItem
{
    public int Val;
} 
```

假设我有一个列表作为列表，其中每个 MyGroup 对象包含不同数量的 MyItems；这反过来又包含 Val 的变化值。

如何在所有 MyGroup 对象中找到包含最低 Val 的 MyGroup 对象子集。

例如：如果我用以下值定义列表

*   **MyGroup1**包含以下每个值的 MyItem：1、5 和 7
*   **MyGroup2**包含以下每个值的 MyItem：3 和
    8
*   **MyGroup3**包含以下每个值的 MyItem：2、4、5 和 7

然后返回的值将是**MyGroup1**（作为单个项目列表），因为它包含值 1，这是所有值中的最低值。

但是，如果有多个具有最低值的值，例如：

*   **MyGroup1**包含以下每个值的 MyItem：1、5 和 7
*   **MyGroup2**包含以下每个值的 MyItem：3 和 8
*   **MyGroup3**包含以下每个值的 MyItem：1、4、5 和 7

然后它将在列表中返回**MyGroup1**和**MyGroup3**。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T15:57:09.780

```
int lowestValue = groups.SelectMany(group => group.Items)
                  .Min(item => item.Val);

IEnumerable<MyGroup> result = groups.Where(group => 
    group.Items.Select(item => item.Val).Contains(lowestValue)); 
```

这将是一个两遍算法。如果您有适当的动机，您可以通过在搜索该最小值时跟踪包含最小值的所有项目来一次性完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:04:42.177

```
 var myGroup1 = new MyGroup();
    myGroup1.Items = Enumerable.Range (1,3).Select (x=> new MyItem {Val=x}).ToArray();
    var myGroup2 = new MyGroup();
    myGroup2.Items = Enumerable.Range (1,4).Select (x=> new MyItem {Val=x}).ToArray();
    var myGroup3 = new MyGroup();
    myGroup3.Items = Enumerable.Range (3,5).Select (x=> new MyItem {Val=x}).ToArray();

    var groupList = new List<MyGroup>();
    groupList.Add(myGroup1);
    groupList.Add(myGroup2);
    groupList.Add(myGroup3);

    var filterGroups = groupList.Select ( x=>new {Group=x, Min=x.Items.Select( y=> y.Val).Min()}).GroupBy (x=>x.Min).OrderBy (x=>x.Key).Take(1).SelectMany (x=> x).Select (x=>x.Group); 
```

由于嵌套数据结构，最后一个查询非常大。

以下是解释

`groupList` //MyGroup
`.Select ( x=>new {Group=x, Min=x.Items.Select( y=> y.Val).Min()})`列表 // 组列表和最小值

`.GroupBy (x=>x.Min).OrderBy (x=>x.Key)`按最小值分组并排序
`.Take(1)`// 取第一项
`.SelectMany (x=> x)`//(MyGroups 的最小值列表)
`.Select (x=>x.Group)`; // 只选择 MyGroups，忽略 Key

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:08:26.850

```
 var query = from gr in myGroups
               where gr.Items.Any(x => x.Val ==
                 (from g in myGroups
                  from i in g.Items
                  orderby i.Val
                  select i.Val).FirstOrDefault())
               select gr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-02T05:28:04.227

这是我刚刚为此编写的代码片段。它是 的扩展方法`IEnumerable<T>`，它基于“排序”函数返回一个最小元素（实际上没有进行排序，或执行两次传递，并且没有两次传递时发生的竞争条件）。

```
/// <summary>
/// Get the minimum element, based on some property, like a distance or a price.
/// </summary>
static public T MinElement<T>(this IEnumerable<T> list, System.Func<T, float> selector)
{
    T ret = default(T);
    float minValue = float.MaxValue;
    foreach (T elem in list)
    {
        float value = selector(elem);
        if (value <= minValue)
        {
            ret = elem;
            minValue = value;
        }
    }

    return ret;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-06T15:58:15.923

将此添加到您的 Linq 查询中： .FirstOrDefault(); 你只得到一个值。

# php - 用ajax收听php echo

> ID：11365528
> 
> 赞同：0
> 
> 时间：2012-07-06T15:47:56.663
> 
> 标签：php, jquery, ajax

我使用 ajax 将一些数据发送到服务器，我收到 2 个变量，成功和错误，具体取决于邮件是否已发送。如何使用 ajax 收听它们，如何提醒它们，php 代码是否正确？

php代码：

```
if ($send){
    echo json_encode($success);
} else { echo json_encode($error);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:55:54.997

我假设您的`$send`变量是`mail()`函数的返回值，类似于以下内容：

```
$headers = 'From: from@from.com';
$send = mail('test@test.com', 'Subject', 'Message', $headers);

echo json_encode(array( 'success' => ($send ? 1 : 0))); 
```

您可以通过 AJAX 使用 jQuery 以这种方式调用它：

```
$.ajax({
    url: '/path/to/script.php',
    success: function( json ) {
        var obj = JSON.parse( json );
        if(obj['success'] == 1) {
            alert('Success!');
        } else {
            alert('Fail!');
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:52:21.833

你可以这样做

```
$result["error"] = false;
if($send) {
    $result["data"] = $success
    echo json_encode($result);
} else {
    $result["error"] = true;
    echo json_encode($result);
} 
```

# opencv - 使用 android NDK 编译 OpenCV 2.4.1 以使用 gprof 进行分析

> ID：11365529
> 
> 赞同：1
> 
> 时间：2012-07-06T15:47:57.627
> 
> 标签：opencv, android-ndk, gprof

我正在使用 android NDK 和 OpenCV（版本 2.4.1）。我要做的是分析一个使用opencv作为库的android应用程序（并分析调用opencv的函数）。

我设置了所有环境（android NDK、SDK、openCV 和 openCV for android），但显然无法分析 opencv，因为在 android 中它使用了一堆预构建的库。

我试过这两种方法：

1 - 重新编译 openCV 库，添加 C 标志 -pg

> > 我试图把选项 -pg 但它给了我一个不兼容的错误，所以建议[在这里](http://code.opencv.org/issues/1813)。我纠正了这个错误，把选项 -DENABLE_PROFILING=ON -DOPENCV_LINKER_LIBS=/full/path/to/libandprof.a 但是我得到了这个错误：

[ 0%] 构建 C 对象 3rdparty/libtiff/CMakeFiles/libtiff.dir/tif_aux.co

在 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:32 包含的文件中：/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:56：错误：“size_t”之前的预期声明说明符或“...”

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:56：错误：预期的声明说明符或“...”在“size_t”之前

在 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:60 包含的文件中，来自 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:32 ：/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:67: 错误：在 'tmsize_t' 之前需要 '='、','、';'、'asm' 或 ' **attribute '**

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:77：错误：在 'tsize_t' 之前应有 '='、','、';'、'asm' 或 ' **attribute '**

在 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:60 包含的文件中，来自 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:32 ：/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:275：错误：预期的声明说明符或“*”标记之前的“...”

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:275：错误：预期的声明说明符或'tmsize_t'之前的'...'

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:275：警告：在“tmsize_t”的声明中，类型默认为“int”

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:275：错误：“tmsize_t”声明为函数返回函数

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:348：错误：“TIFFScanlineSize”声明为函数返回函数

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:350：错误：“TIFFRasterScanlineSize”声明为函数返回函数

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:352：错误：“TIFFStripSize”声明为函数返回函数

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:354：错误：“TIFFRawStripSize”声明为函数返回函数

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:356：错误：“TIFFVStripSize”声明为函数返回函数

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:358：错误：“TIFFTileRowSize”声明为函数返回函数

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:360：错误：“TIFFTileSize”声明为函数返回函数

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:362：错误：“TIFFVtileSize”声明为函数返回函数

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:376：错误：在“TIFFGetReadProc”之前需要“=”、“、”、“;”、“asm”或“**属性”**

/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:377：错误：预期'='，'，'，';'，'asm'或'**属性**'在'TIFFGetWriteProc'之前/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:434：错误：预期的声明说明符或'...'之前'TIFFReadWriteProc'/home/bacci/librerie/ OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:434：错误：在“TIFFReadWriteProc”/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio 之前的预期声明说明符或“...”。 h：452：错误：“TIFFReadTile”声明为函数返回函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:453：错误：“TIFFWriteTile”声明为函数返回函数/ home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:456：错误：“TIFFReadEncodedStrip”声明为函数返回函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/ tiffio.h:457: 错误: 'TIFFReadRawStrip' 声明为函数返回函数 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:458：错误：'TIFFReadEncodedTile' 声明为函数返回函数 /home/bacci/librerie/OpenCV -2.4.1/3rdparty/libtiff/tiffio.h:459：错误：“TIFFReadRawTile”声明为函数返回函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:460：错误：“TIFFWriteEncodedStrip”声明为函数返回函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:461：错误：“TIFFWriteRawStrip”声明为函数返回函数/home/bacci/librerie /OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:462：错误：“TIFFWriteEncodedTile”声明为函数返回函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:463 ： 错误： 'TIFFWriteRawTile' 声明为返回函数的函数 在 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:32 包含的文件中：/home/bacci/librerie/OpenCV-2.4.1/3rdparty/ libtiff/tiffiop.h:148：错误：字段“tif_tilesize”声明为函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:171：错误：字段“tif_scanlinesize”声明为函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:172：错误：字段“tif_scanlineskew”声明为函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff /tiffiop.h:174：错误：字段“tif_rawdatasize”声明为函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:175：错误：字段“tif_rawdataoff”声明为函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:176：错误：字段“tif_rawdataloaded”声明为函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:178：错误：字段“tif_rawcc”声明为函数/home/bacci/librerie/ OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:181：错误：字段“tif_size”声明为函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffiop.h:186：错误：'TIFFReadWriteProc'之前的预期说明符限定符列表在/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:33中包含的文件中：/home/bacci/librerie/OpenCV-2.4.1 /3rdparty/libtiff/tif_predict.h:40：错误：字段“步幅”声明为函数 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_predict.h:41：错误：字段“行大小”声明为函数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c：在函数'_TIFFCheckRealloc'中：/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:67：错误：函数'bytes'被初始化为变量/home/bacci/librerie/OpenCV-2.4 .1/3rdparty/libtiff/tif_aux.c:67：错误：二进制操作数无效*（有'int（*)()' 和 'int (* )()') /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:72: 错误：二进制 / 的操作数无效（有 'int ( *)( )' 和 'int (*)()') /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:67：错误：嵌套函数“字节”声明但从未定义/home/bacci/librerie/OpenCV-2.4。 1/3rdparty/libtiff/tif_aux.c：在函数“TIFFDefaultTransferFunction”中：/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:101：错误：强制转换指定函数类型/home/bacci/ librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:102：错误：二进制操作数无效*（有'int（*）（）'和'unsigned int'）/home/bacci/librerie/OpenCV- 2.4.1/3rdparty/libtiff/tif_aux.c:106：错误：需要左值作为赋值的左操作数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:106：错误：需要左值作为增量操作数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:107：错误：在预期浮点值的地方使用的指针值/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:107：错误：在预期浮点值的地方使用的指针值/home/bacci/ librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:108：错误：数组下标不是整数/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c：在函数中' TIFFDefaultRefBlackWhite'：/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:137：警告：传递'_TIFFmalloc'的参数1使指针从整数而不进行强制转换/home/bacci/librerie/OpenCV -2.4.1/3rdparty/libtiff/tiffio.h:295：注意：预期为“int (*)()”，但参数为“unsigned int”类型在预期浮点值时使用的指针值/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:108：错误：数组下标不是整数/home/bacci/librerie/OpenCV- 2.4.1/3rdparty/libtiff/tif_aux.c：在函数“TIFFDefaultRefBlackWhite”中：/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:137：警告：传递“_TIFFmalloc”的参数 1从没有强制转换/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:295 的整数中生成指针：注意：预期为“int (*)()”，但参数的类型为“unsigned int”在预期浮点值时使用的指针值/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:108：错误：数组下标不是整数/home/bacci/librerie/OpenCV- 2.4.1/3rdparty/libtiff/tif_aux.c：在函数“TIFFDefaultRefBlackWhite”中：/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tif_aux.c:137：警告：传递“_TIFFmalloc”的参数 1从没有强制转换/home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:295 的整数中生成指针：注意：预期为“int (*)()”，但参数的类型为“unsigned int”1/3rdparty/libtiff/tif_aux.c:137：警告：传递 '_TIFFmalloc' 的参数 1 使指针从没有强制转换的整数 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:295 ：注意：预期为“int (*)()”，但参数的类型为“unsigned int”1/3rdparty/libtiff/tif_aux.c:137：警告：传递 '_TIFFmalloc' 的参数 1 使指针从没有强制转换的整数 /home/bacci/librerie/OpenCV-2.4.1/3rdparty/libtiff/tiffio.h:295 ：注意：预期为“int (*)()”，但参数的类型为“unsigned int”

make[2]: *** [3rdparty/libtiff/CMakeFiles/libtiff.dir/tif_aux.co] 错误 1

制作[1](http://code.opencv.org/issues/1813)：*** [3rdparty/libtiff/CMakeFiles/libtiff.dir/all] 错误 2

制作：*** [全部] 错误 2

`

2 - 尝试在我的c++ android应用程序（extern C）中集成openCV的一些源代码

> > 这不是一个好的解决方案，因为但是我无法通过程序的所有调用获得一棵真正的树，因为您没有将所有 opencv 源代码集成到我的 jni 文件夹中的应用程序中。

有人可以帮我解决这个问题吗？

谢谢

# asp.net-mvc-3 - 没有帮助程序的 MVC3 ViewModel 只有空值

> ID：11365532
> 
> 赞同：2
> 
> 时间：2012-07-06T15:48:08.690
> 
> 标签：asp.net-mvc-3

我有一个与强类型 ViewModel 相关联的视图，但我**没有**使用 MVC3 HTML 帮助程序，只是使用普通的 HTML`input`标记。但是，这似乎没有将值正确传递给操作方法，因为 ViewModel 完全为空。

视图模型：

```
class QuoteSearch {
    public long? CustomerId { get; set; }
    public string CustomerFirstName { get; set; }
    public string CustomerLastName { get; set; }
} 
```

看法：

```
@model QuoteSearch

<form action="/quotes/search" method="POST">
    <p>Customer ID: <input id="CustomerIdField" name="CustomerId" type="text" /></p>
    <p>Customer First Name: <input id="CustomerFirstNameField" name="CustomerFirstName" type="text"/></p>
    <p>Customer Last Name: <input id="CustomerLastNameField" name="CustomerLastName" type="text"/></p>
    <p><button id="SearchButton" type="submit">Search</button></p>
</form> 
```

控制器：

```
 [HttpPost]
 public ActionResult Search(QuoteSearch search) { 
     // checking if fields are set here.
 } 
```

我似乎记得有一种方法不必使用 Html 助手但仍使用强类型模型（而不是 a `FormCollection`）；我认为它涉及将 name 属性设置为模型上属性的确切名称，但我似乎弄错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:17:33.770

您的名称并非全部对齐（如评论中所建议的那样），但对于对齐的字段，当我执行上述代码时，模型已正确填充（名称在那里，CustomerId 为空）。

您是否设置了断点，并且您知道代码正在被命中吗？

还请确认您的控制器名为 Quotes。即使是这样，您也会更好地使用：

```
<form action="@Url.Action("search", "quotes")" method="POST"> 
```

...即使您添加区域等，路由也能正常工作。Url 助手将根据您的路由规则为请求计算出正确的路径。

最后，如果您没有通过设置断点到达该执行点，请务必使用 F12/dev 工具来监控您的网络请求并确保调用了正确的地址。上面的代码片段也应该有助于解决这个问题。

希望对一些人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:40:22.490

尝试 name="[ViewModel].[FieldName]" 和 id="[ViewModel]_[FieldName]"

这些是我在使用 HTML 帮助程序时输入标签中的值。

所以对你来说，这将是：

```
<input type="text" name="QuoteSearch.CustomerId" id="QuoteSearch_CustomerId" /> 
```

ETC..

# ruby - 如何以编程方式确定网页是否包含不安全的元素？

> ID：11365540
> 
> 赞同：2
> 
> 时间：2012-07-06T15:48:39.470
> 
> 标签：ruby, automated-tests, watir-webdriver

我正在使用 watir-webdriver 进行测试自动化，并且需要一种方法来确定我的测试页面是否触发了浏览器中的不安全内容警告，或者它是否正在以 http 而不是 https 加载任何资源。

有没有办法在 watir-webdriver 中做到这一点？或者我可以使用其他工具来执行此操作吗？

**例如**，如果您访问[https://github.com](https://github.com)并查看网络流量，您会看到一堆通过 https 加载的 .js 文件和图像。我需要一个能够确定是否使用 http 而不是 https 加载这些资源的脚本。当这种情况发生在安全站点上时，主要浏览器会发出某种警告，但它们并不总是会创建弹出窗口。

![在此处输入图像描述](../Images/dc58d6c75076d39bc1911e89fee76646.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:18:11.087

我一直在开发的内容适用于 99% 的案例。您可以使用[PhantomJS并使用](http://phantomjs.org/)[backtics](https://stackoverflow.com/questions/6443945/running-phantomjs-from-a-ruby-on-rails-application)从您的 Ruby 代码中执行它，或者使用[此 GEM](https://github.com/westoque/phantomjs.rb)，捕获输出，然后对其进行过滤。他们甚至有一个名为 netlog.js 的示例，可以开箱即用。

输出是 HAR 或 HTTP 存档，这是您在屏幕抓取中看到的内容，但已被美化。

如果 Flash 文件调用了 http 元素，则 1% 的情况下它不起作用。我在广告中看到过这个。如果您的网站上没有 Flash 广告，那应该不是问题。我的做，现在我正在研究那 1% ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T20:25:37.630

我认为您最好的选择是使用`pcap`（[ruby](https://github.com/ahobson/ruby-pcap) ​​-pcap ，[tutorial](http://arstechnica.com/information-technology/2005/10/linux-20051002/)）捕获 watir-webdriver 发送的请求。您的代码将是这样的：

```
require 'pcaplet'

# start capturing packets
httpdump = Pcaplet.new('-s 1500')

#
# do web requests here
#

insecure_reqs = []
httpdump.add_filter(
  # you could also filter by just tcp and then check pkt.dst_port in the loop
  Pcap::Filter.new('tcp and dst port 80', httpdump.capture)
)

httpdump.each_packet do |pkt|
  insecure_reqs << pkt.dst.to_s
end 
```

[（免责声明：这是未经测试的，是从 ruby​​-pcap 的示例](https://github.com/ahobson/ruby-pcap/blob/master/examples/httpdump.rb)拼凑而成的。）

缺点是你需要确保你的机器上没有其他东西在你的测试运行时发出请求，所以在隔离的服务器或虚拟机中运行它是一个不错的选择。

# c++ - 拔网线时如何防止windows报错10054

> ID：11365547
> 
> 赞同：0
> 
> 时间：2012-07-06T15:49:09.487
> 
> 标签：c++, sockets, tcp

我有一个 c++ 应用程序，它使用 TCP 套接字将文件从一个处理器传输到另一个处理器。应用程序将在不可靠的网络上运行，因此在连接丢失和重新恢复时继续传输非常重要。我正在使用 ACE 来允许应用程序在 Windows 或 Linux 上运行。

目前，当我开始传输并断开两个处理器之间的网络连接时，如果我在不到 20 秒的时间内重新连接它，传输就会恢复并且一切正常。如果在 20 秒内没有重新建立连接，我会收到 Windows 错误 10054，表明连接已被重置。那时，套接字消失了，一旦重新建立连接，传输将不会恢复。有没有办法覆盖它，以便我控制连接何时超时？

编辑：这似乎是一个 Windows 问题。我尝试将文件从 Linux VM 发送到 Windows 机器。我在传输过程中断开了网络电缆超过 5 分钟。当我重新连接它时，传输在它停止的地方继续并完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:07:54.550

我相信主题应该说*如何处理*，而不是*如何预防*，对吗？您肯定希望收到此错误，因为（根据您的评论）*此时文件传输将处于暂停状态，并且用户也会意识到这一点*。为了暂停并通知用户，您需要得到一个错误。

无论如何，您提到的 20 秒可能是由于您的操作系统/路由器超时。该数字可能会有很大差异，您不应以任何方式依赖它。您可以尝试更新路径上每个框的超时，但这通常是不可能的，也不能真正解决您的问题（您总是会失去连接的时间超过您设置的超时时间）。

为了构建不受超时影响的解决方案，您需要在原始连接之上建立一个简单的协议，并允许从数据流的特定偏移量重新连接和恢复传输。您可以修改您的客户端以发送包含重传点详细信息的请求。

如果您的网络确实不可靠并且经常中断，您可以切换到 UDP。有些数据包会到达，有些会丢失。您可以收集块并请求重新传输尚未到达的部分数据。您可能需要花更多时间来设计正确的协议，但该解决方案可能优于标准 TCP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:39:59.920

虽然您可能可以尝试一些套接字选项，但正确的解决方案可能是：

**将重新连接逻辑构建到您在 TCP 之上实现的任何协议中。**

即使您将网络电缆粘到端口中，您也总是需要处理套接字断开连接。因此，您不妨只专注于让您的套接字定期尝试“重新连接”，然后让您的协议意识到处理这种情况。（例如，尝试每 N 秒重新连接一次，每次可能等待更长时间，直到某个最大超时）。然后对于协议特定的更改，我会假设接收者应该从什么时候开始传输数据来指示发送者。类似于 Web 浏览器如何告诉 http 服务器如何恢复文件传输。

# python - python中的sys.excepthook行为

> ID：11365549
> 
> 赞同：4
> 
> 时间：2012-07-06T15:49:14.403
> 
> 标签：python, exception

我觉得 sys.excepthook 是如何工作的很令人费解。鉴于以下情况，我找不到继续前进的方法，以防异常被钩子捕获。简而言之，我从未达到 print 声明，但我确信理论上可以继续。返回 True 或 False 也没有帮助？

```
import sys
from shutil import copy
from subprocess import Popen

def my_except_hook(etype, value, tb):
    print("got an exception of type", etype)

if __name__ == '__main__':
    sys.excepthook = my_except_hook
    copy('sdflsdk')
    print("here")
    Popen('sdflkjdklsdj') 
```

那么输出是：

```
('got an exception of type', <type 'exceptions.TypeError'>) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:57:32.913

不，理论上不可能继续下去。`sys.excepthook`仅在整个堆栈展开且未找到异常处理程序时调用，就在程序退出之前。除了退出程序之外，没有什么可以继续的。您确定您不是在寻找[try...except](http://docs.python.org/tutorial/errors.html)语句吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T16:03:58.707

sys.excepthook 并不打算强制转换为 VB 风格的“On Error Resume Next”。可能有办法做到这一点，但你真的应该包装自己的代码来做到这一点。system.excepthook 是为诸如 python 交互式解释器之类的东西而设计的，以便它们打印异常并将您返回到交互式 shell。要执行您寻求的恢复行为，您应该考虑执行以下操作：

```
import sys
from shutil import copy
from subprocess import Popen

if __name__ == '__main__':
    try:
        copy('sdflsdk')
    except:
        pass
    print("here")
    try:
        Popen('sdflkjdklsdj')
    except:
        pass 
```

# typo3 - tt_news：“不在单个视图中显示第一张图像”（firstImageIsPreview）不起作用

> ID：11365553
> 
> 赞同：0
> 
> 时间：2012-07-06T15:49:30.897
> 
> 标签：typo3, tt-news

我在新闻模块中设置了以下选项：

*   不要在单个视图中显示第一张图像 (firstImageIsPreview)
*   即使只有一个图像可用，也不要在单个视图中显示第一张图像 (forceFirstImageIsPreview)

但是，文章仍然以单一视图显示第一张图片。如果我使用 1 张或更多照片都没关系。我使用版本 4.7.2（当前最新）。问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:26:51.690

也许您需要清除 FE 缓存？然后我记得单个视图使用 html 模板，因此您可以删除图像的 html，或者何时可以删除图像的 TS？

# git - git commit 消息中的 Jira 问题编号

> ID：11365554
> 
> 赞同：31
> 
> 时间：2012-07-06T15:49:31.483
> 
> 标签：git, hook, push, jira, issue-tracking

在我们公司，我们正在从 svn 迁移到 git。对于问题跟踪，我们使用 Atlassian 的 JIRA。

现在我们要强制每个提交消息都包含一个问题编号（就像我们对 svn 所做的那样）。

我们找到了 commit-msg 钩子，如果它不包含问题编号，我们会使用它来拒绝提交。

JIRA 使用 Fisheye 扫描 git repo。如果提交消息包含问题编号，则更改将显示在该问题下。

问题是克隆 git 存储库时不会复制挂钩。因此，提交消息中的问题编号不会被强制执行。这意味着当向上游推送新提交时，Jira 可能不会列出问题下的更改。

问题是; 我们是否以某种错误的方式使用 Git，有什么方法可以真正在提交消息中强制执行问题编号？或者有没有人简单地有一个脚本/钩子（除了 commit-msg 钩子）来完成这个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T21:30:58.050

I used [git-jira-hook](https://github.com/joyjit/git-jira-hook/blob/master/git-jira-hook "git-jira-hook") and modified it to my needs, which should also work for you. For your needs, just remove the parts where it logs into Jira to check if the jira issue number regexed from the commit message is valid. If you don't like python (git-jira-hook is written in python) and prefer bash, you should be able to adapt the example scripts in each repo's .git/hooks dir to your needs.

As to implementing something that will work for everyone, you want to use git-jira-hook as the 'update' hook on your upstream repos. This will block pushes that contain commit messages that lack proper jira issue references. Since it is more convenient to get feedback about missing issue references at commit time (rather than at push time), you'll need to get your developers to install git-jira-hook as their commit-msg hook. I'll explain later how this can be done globally.

Here is how I have solved this issue:

1.  Private repo commit-msg hook: I modified git-jira-hook to check for jira issue references in the notation that we use. Then, I emailed out the hook with instructions to everyone explaining how to install the hook globally, as is explained in [this SO question](https://stackoverflow.com/questions/2293498/git-commit-hooks-global-settings). If you install the hook globally then it will be used in all future clones, and can be easily applied to already cloned repos using git init.

2.  Upstream repo update hook: I used the already modified git-jira-hook script and installed it in each of our repos. I couldn't get the interactive authentication bits working on the upstream repo (symlinked it), so I instead created a restricted permissions Jira user and hard coded their authentication into the script.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-12-09T23:59:33.340

如果您使用的是 npm，您可以使用[https://github.com/typicode/husky](https://github.com/typicode/husky)和[​​https://github.com/marionebl/commitlint](https://github.com/marionebl/commitlint)

创建文件：commitlint.config.js

```
module.exports = {
rules: {
    'references-empty': [2, 'never']
},
parserPreset: {
    parserOpts: {
        issuePrefixes: ['REF-']
    }
}}; 
```

并在 package.json 中为钩子添加配置

```
commit-msg: commitlint -E HUSKY_GIT_PARAMS 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T15:53:37.553

你也可以有服务器端的钩子，pre-receive-hook 之类的，但是如果你习惯了 github，这并不明显。

如果做不到这一点，我可能会考虑提供一个“安装挂钩”构建选项（作为 rake 任务、制作任务或其他），尽管这会让我觉得有点“肮脏”，因为现在我的构建与版本控制系统相关联...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-26T04:17:51.597

如果您在 .git 文件夹中使用默认挂钩，那么您在其中所做的更改不会被编入索引，这仅仅意味着它们无法被检出或克隆。

您可以将您的提交消息挂钩移动到名为“挂钩”的不同文件夹中并提交它，以便它覆盖 .git 中的默认挂钩。

如果提交不包含问题编号，我们会显示一个消息框作为错误，以便用户在不需要问题跟踪编号时仍然可以继续（适用于补丁/修补程序）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-12T09:43:34.953

**有一个附加组件：[JIRA 的提交策略插件](https://marketplace.atlassian.com/plugins/com.midori.jira.plugin.jira-commit-policy-plugin)！**

它不仅检查 JIRA 问题键是否“正式”包含在消息中，还检查相应的问题是否与 JQL 查询匹配。使用它，您有多种可能性，允许仅检查特定问题类型、特定状态的问题、当前 Scrum sprint 中的问题、针对下一个版本的问题等等。

[![在此处输入图像描述](../Images/53232b14e4d12df312b5a24a1e36f328.png)](https://i.stack.imgur.com/VWCN0.png)

作为奖励，它可以与您的原始版本 ( [Subversion](http://www.midori-global.com/products/jira-commit-policy-plugin/documentation/subversion) ) 和目标版本控制系统 ( [Git](http://www.midori-global.com/products/jira-commit-policy-plugin/documentation/git) ) 一起使用，即使在过渡期间也可以控制您的工作。

您可以将挂钩脚本安装到受祝福的 repo 和任何分叉中。不幸的是，使用 Git 克隆存储库时不会克隆钩子脚本，但我们目前正在研究解决此问题的方法。

完整文档： http: [//www.midori-global.com/products/jira-commit-policy-plugin/documentation/](http://www.midori-global.com/products/jira-commit-policy-plugin/documentation/)

*免责声明：这是 JIRA 的商业和受支持的附加组件，我是一名开发人员。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-04T11:02:23.547

克隆存储库时不会复制 Git 挂钩。我们建议使用[husky](https://www.npmjs.com/package/husky)。这有助于将 git hooks 发布给克隆 repo 的每个人。

强制 git commit 包含 jira id 参考。我已经在 repo- [husky-jira-demo](https://github.com/samarpanda/husky-jira-demo/)中配置了它。希望这可以解决您的要求。

# asp.net - 与开发服务器（卡西尼）相比，IIS 中的 RegEx.Match 慢得多？

> ID：11365555
> 
> 赞同：6
> 
> 时间：2012-07-06T15:49:39.010
> 
> 标签：asp.net, .net, iis, cassini

在查看 asp.net (webservice) 应用程序的性能时，我们注意到在 IIS 上它（38 秒）比在开发服务器上（18 秒）慢得多。运行 Visual Studio 的性能分析器（在采样模式下），我们注意到不同之处在于调用 regex.Match？！在 IIS 中，它花费了 70% 的时间，在开发服务器中针对同一个应用程序运行相同的测试，它花费的时间不到总时间的 1%。

所以任何人都可以解释 IIS 和开发服务器之间这种奇怪的行为差异？？？我已经尝试过具有不同应用程序池设置的东西......但没有任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T13:03:58.730

**找到了！**

这似乎是因为 IIS 以 64 位运行它（而 casinni 可能以 32 位运行）。通过将应用程序池切换为使用 32 位，它在 IIS 中也很快，将其重置为 64 位，它又变慢了。

通过搜索 64 位 + 正则表达式慢，我还发现人们已经在 2006 年找到了这个，而且它应该在 .NET 2.0 上的 sp 中修复（参见：http: [//blogs.msdn.com/b /bclteam/archive/2007/05/21/the-regexoptions-compiled-flag-and-slow-performance-on-64-bit-net-framework-2-0-josh-free.aspx](http://blogs.msdn.com/b/bclteam/archive/2007/05/21/the-regexoptions-compiled-flag-and-slow-performance-on-64-bit-net-framework-2-0-josh-free.aspx)）

但是我使用.NET 4.0，所以我没想到这个问题仍然存在......

（在 stackoverflow 上另见：[Regex slow on Windows Server 2008](https://stackoverflow.com/questions/1491164/regex-slow-on-windows-server-2008)）

顺便说一句，如果我在创建正则表达式时**不使用**，它在 64 位上**也能快速执行。**但是我需要做一些基准测试来看看不编译它对 32 位的影响。`RegexOptions.Compiled`

# wpf - 单击按钮时删除 ScatterViewItem

> ID：11365556
> 
> 赞同：0
> 
> 时间：2012-07-06T15:49:38.840
> 
> 标签：wpf, pixelsense, scatterview

我的小组正在为学校开发一个地面项目，我们对这项技术都很陌生。情况是：

我们有一个带有 4 个表面按钮的页面。每当用户单击/点击其中一个表面按钮时，都会弹出一个图像。由于这个应用程序是为多用户环境而设计的，如果另一个用户点击相同的按钮，将会有另一个弹出但相同的图像。当用户看到图像时，每个弹出窗口上都有一个关闭按钮来关闭它。

每当单击按钮时，都会创建画布、网格和 ScatterViewItem，以及每个 ScatterViewItem 上的按钮。

我现在遇到的问题是每个 ScatterViewItem 上的关闭按钮都可以关闭弹出窗口。但是，它仅在只有一个弹出窗口时才有效。当有多个弹出窗口时，按钮将仅关闭最后一个弹出窗口。有人有什么建议吗？非常感谢 。提前致谢

下面是代码：

```
private void btn1_Click(object sender, RoutedEventArgs e)
        {

            Image imageControl = new Image();
            Grid grid = new Grid();

            // changing to popup from image control

            Canvas cv1 = new Canvas();
            cv1.ClipToBounds = true;
            cv1.Width = 350;
            cv1.Height = 350;
            cv1.SetValue(Canvas.BackgroundProperty, new SolidColorBrush(Colors.Transparent));

            Image imageControl1 = new Image();
            var myBitmapImage1 = new BitmapImage();
            myBitmapImage1.BeginInit();
            myBitmapImage1.UriSource = new Uri("/Images/btn1.jpg", UriKind.Relative);
            myBitmapImage1.EndInit();
            imageControl1.Source = myBitmapImage1;
            imageControl1.Width = 250;
            imageControl1.Height = 250;

            Button sb1 = new Button();
            sb1.Content = "Close";
            sb1.Width = 40;
            sb1.Height = 40;

            imageControl1.SetValue(Canvas.TopProperty, -40.0);

            sb1.SetValue(Canvas.LeftProperty, 180.0);
            sb1.SetValue(Canvas.TopProperty, 2.0);
            sb1.Click +=new RoutedEventHandler(Close_Click);

            cv1.Children.Add(imageControl1);
            cv1.Children.Add(sb1);
            grid.Children.Add(cv1);

            App.svi = new ScatterViewItem();

            App.svi.Content = grid;
          sv.Items.Add(App.svi);

         App. svi.Visibility = System.Windows.Visibility.Visible;
            Surfaceapp1.Show();

        }

   public void Close_Click(object sender, RoutedEventArgs e)
        {
            Button srcButton = e.Source as Button;

      App.svi.Visibility = System.Windows.Visibility.Collapsed;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:18:09.863

您发出的每个“弹出窗口”（ScatterView）都是表面上的一个独特对象。因此，关闭一个与您创建的任何其他 ScatterView 无关。如果您希望所有这些都关闭，您只能做几件事：

您只能在表面上保留一个 ScatterView。您可以保留对它的引用，并且当第二次单击该按钮时，它可能是一个触发事件来为原始 ScatterView 设置动画，从而引起对它的注意。（确保你也关注它）

另一种方法是保持您的逻辑，但构建您构建的每个控件的列表。这样，当您收到关闭事件时，您会进入该列表并在列表中的每个实例上调用关闭。自然地，每个列表都会与表单上的每个按钮间接关联。您可能希望将您的钩子放入每个 ScatterView 的 Closing 事件中，以便您知道其中一个何时关闭。由于表格上有多个对象，因此您还需要假设可以有多次点击，因此在处理关闭整个列表时需要使逻辑线程安全。

# iphone - 从其他 NSString 的某个点创建 NSString

> ID：11365558
> 
> 赞同：0
> 
> 时间：2012-07-06T15:49:51.063
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

我有一个带有以下文本的 NSString：

```
You can now download "file.png" from "http://www.example.com/RANDOM.png" 
```

如何使用该字符串中的 URL 创建一个新的 NSString？我想要：

```
http://www.example.com/RANDOM.png 
```

我通常只会删除开头的文本，但“file.png”可以是任何长度的任何文件名，并且不能被删除`stringByReplacingOccurrencesOfString`（因为我不知道它是什么）。关于如何删除所有内容直到结束的任何想法`from "`？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:55:52.077

```
NSRange range = [string rangeOfString:@"from \""];
NSString *URL = [string substringFromIndex:range.location + range.length]; 
```

错误检查可能是个好主意（即`range.location != NSNotFound`）。您还必须`"`从字符串中删除最后一个，但是有一种`substringToIndex:`方法结合字符串长度可以做到这一点（我把这个留给你，它微不足道）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:57:05.133

最好的方法是使用能够识别 url 的正则表达式。这是一个使用来自@gruber 的 URL 匹配 RegEx 的示例，您可能需要根据服务器的实际输出对其进行一些调整：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\b(([\\w-]+://?|www[.])[^\\s()<>]+(?:\\([\\w\\d]+\\)|([^[:punct:]\\s]|/)))" options:NSRegularExpressionAnchorsMatchLines | NSRegularExpressionAllowCommentsAndWhitespace error:NULL];
NSRange range = [regex rangeOfFirstMatchInString:myString options:0 range:NSMakeRange(0, [myString length])];
NSString *URL = [myString substringWithRange:range]; 
```

# spring - Spring Security 如何使用 exceptionMappings 在 PRE_AUTH_FILTER 中捕获异常

> ID：11365567
> 
> 赞同：7
> 
> 时间：2012-07-06T15:50:07.677
> 
> 标签：spring, exception, spring-security

我正在使用 Spring MVC (3.1.1.RELEASE) 和 Spring Security (3.1.0.RELEASE)。

spring 应用程序是一个 REST API 服务器，移交 Json。

我的 security-context.xml 包含这个 PRE_AUTH_FILTER 过滤器：

```
<custom-filter position="PRE_AUTH_FILTER"  ref="siteminderFilter"  />
...
<beans:bean id="siteminderFilter" class=
"com.test.server.util.RequestHeaderAuthenticationFilter" >
    <beans:property name="principalRequestHeader" value="login"/>
    <beans:property name="authenticationManager" ref="authenticationManager" />    
</beans:bean> 
```

我的自定义 RequestHeaderAuthenticationFilter 扩展**AbstractPreAuthenticatedProcessingFilter** 并抛出**PreAuthenticatedCredentialsNotFoundException**

因此用户收到 500 Internal Server Error。但我希望用户改为接收 JSON 字符串。可能吗 ？如果是，我该怎么做？

我尝试以这种方式使用异常映射，但它似乎不起作用

```
<beans:bean id="siteminderFilter" class=
"com.pecunia.server.util.RequestHeaderAuthenticationFilter" >
    <beans:property name="principalRequestHeader" value="login"/>
    <beans:property name="authenticationManager" ref="authenticationManager" />    
   <beans:property name="exceptionMappings">
      <beans:props>
    <beans:prop key="org.springframework.security.web.authentication.preauth.PreAuthenticatedCredentialsNotFoundException">/error.json</beans:prop>
    </beans:props>
   </beans:property>
</beans:bean> 
```

部署时给我这个错误：

```
Bean property 'exceptionMappings' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter 
```

我也试过

```
<form-login authentication-failure-handler-ref="authenticationFailureHandler" />
...
<beans:bean id="authenticationFailureHandler" class="org.springframework.security.web.authentication.ExceptionMappingAuthenticationFailureHandler">
   <beans:property name="exceptionMappings">
      <beans:props>
    <beans:prop key="org.springframework.security.web.authentication.preauth.PreAuthenticatedCredentialsNotFoundException">/error.json</beans:prop>
    </beans:props>
   </beans:property>
</beans:bean> 
```

但没有错误也没有结果（只是通常的 500 页）

# c# - Azure：我没有看到我的所有跟踪日志

> ID：11365568
> 
> 赞同：1
> 
> 时间：2012-07-06T15:50:07.827
> 
> 标签：c#, .net, logging, azure, azure-diagnostics

我使用 VisualStudio2010 和仿真器工具（2012 年 6 月）。
我创建了一个新的工作角色项目。

在*WorkerRole.cs*文件中：

```
public class WorkerRole : RoleEntryPoint
{
    public override void Run()
    {
        Trace.TraceInformation("Begin loop at " + DateTime.Now);
        int i = 0;
        while (true)
        {
            Trace.TraceInformation("I'm in a loop (" + i++ + ") at " + DateTime.Now + ".");
            Thread.Sleep(15000);
        }
    }

    private void InitLogs()
    {
        DiagnosticMonitorConfiguration config = DiagnosticMonitor.GetDefaultInitialConfiguration();
        config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Verbose;
        config.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);

        DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", config);
        Trace.TraceInformation("Start at " + DateTime.Now);
    }

    public override bool OnStart()
    {
        ServicePointManager.DefaultConnectionLimit = 12;
        InitLogs();
        return base.OnStart();
    }
} 
```

在我的*设置中*：

```
Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString = UseDevelopmentStorage=true 
```

在*app.config*中：

```
<system.diagnostics>
    <trace>
        <listeners>
            <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                name="AzureDiagnostics">
                <filter type="" />
            </add>
        </listeners>
    </trace>
</system.diagnostics> 
```

当我在本地开始调试 (F5) 时，我可以在*Windows Azure Compute Emulator*中看到：

```
[fabric] Role Instance: deployment16(275).WindowsAzureProject2.WorkerRole1.0
[fabric] Role state Started
[Diagnostics]: UpdateState(Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorStartupInfo, Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorConfiguration, )
[runtime] Role entrypoint . CALLING   OnStart()
[Diagnostics]: Acquired mutex
[Diagnostics] Information: C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor
[Diagnostics] Information: c:\users\benjamin.lux\documents\visual studio 2010\Projects\WindowsAzureProject2\WindowsAzureProject2\csx\Debug\roles\WorkerRole1\diagnostics\x64\monitor\MonAgentHost.exe -LocalPath "C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor" -StaticConfigFile "C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor\Configuration\mastaticconfig.xml" -ConfigFile "C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor\Configuration\maconfig.xml" -ShutDownEvent WADDM-ShutDown-54bc885b045e40ecaf8474c810199ab5 -InitializedEvent WADM-StartUp-54bc885b045e40ecaf8474c810199ab5 -parent 7656 -events
[Diagnostics]: UpdateState(Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorStartupInfo, Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorConfiguration, )
[Diagnostics]: Mutex already taken
[Diagnostics]: Creating config channel client
[Diagnostics]: Attempting to connect to server...
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:17:40.111Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6920
[MonAgentHost] Error:     4636
[MonAgentHost] Error:     SelfMonitoring
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\agent\dll\selfmon.cpp
[MonAgentHost] Error:     MASelfMon::GetProcCntrs
[MonAgentHost] Error:     1421
[MonAgentHost] Error:     ffffffffc0000bb8
[MonAgentHost] Error:     0
[MonAgentHost] Error:     
[MonAgentHost] Error:     PdhAddCounter(\Process(MonAgentHost#0)\ID Process) failed
[Diagnostics]: Creating config channel server
[MonAgentHost] Output: Agent will exit when WADDM-ShutDown-54bc885b045e40ecaf8474c810199ab5 is signaled.
[MonAgentHost] Output: Will signal WADM-StartUp-54bc885b045e40ecaf8474c810199ab5 after the agent is initialized.
[MonAgentHost] Output: Registered as an event consumer.
[MonAgentHost] Output: Agent will exit when parent process 7656 exits.
[MonAgentHost] Output: Monitoring Agent Started
[Diagnostics]: Starting configuration channel polling
[Diagnostics]: Connection sucessful, sending config
[WaWorkerHost.exe] Start at 09/07/2012 10:17:40
[runtime] Role entrypoint . COMPLETED OnStart()
[Diagnostics]: Config request received
[Diagnostics]: Signalling process restart on event = WADDM-ShutDown-54bc885b045e40ecaf8474c810199ab5
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:17:40.662Z
[MonAgentHost] Error:     3
[MonAgentHost] Error:     6920
[MonAgentHost] Error:     4636
[MonAgentHost] Error:     SelfMonitoring
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\agent\dll\selfmon.cpp
[MonAgentHost] Error:     MASelfMon::StartTerminationCountdown
[MonAgentHost] Error:     1088
[MonAgentHost] Error:     10011
[MonAgentHost] Error:     0
[MonAgentHost] Error:     
[MonAgentHost] Error:     Not starting termination thread inside a client hosted monitoring agent
[MonAgentHost] Output: Exiting the monitoring agent 6920 after the shutdown event was signaled.
[MonAgentHost] Output: Monitoring Agent Stopped
[Diagnostics] Information: Diagnostic process exited with code: 0
[runtime] Role entrypoint . CALLING   Run()
[WaWorkerHost.exe] Begin loop at 09/07/2012 10:17:40
[WaWorkerHost.exe] I'm in a loop (0) at 09/07/2012 10:17:40.
[Diagnostics] Information: C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor
[Diagnostics] Information: c:\users\benjamin.lux\documents\visual studio 2010\Projects\WindowsAzureProject2\WindowsAzureProject2\csx\Debug\roles\WorkerRole1\diagnostics\x64\monitor\MonAgentHost.exe -LocalPath "C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor" -StaticConfigFile "C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor\Configuration\mastaticconfig.xml" -ConfigFile "C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor\Configuration\maconfig.xml" -ShutDownEvent WADDM-ShutDown-5548c4bc522e4f858d6ab6df287747cf -InitializedEvent WADM-StartUp-5548c4bc522e4f858d6ab6df287747cf -parent 7656 -events
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:17:42.930Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6260
[MonAgentHost] Error:     5472
[MonAgentHost] Error:     SelfMonitoring
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\agent\dll\selfmon.cpp
[MonAgentHost] Error:     MASelfMon::GetProcCntrs
[MonAgentHost] Error:     1421
[MonAgentHost] Error:     ffffffffc0000bb8
[MonAgentHost] Error:     0
[MonAgentHost] Error:     
[MonAgentHost] Error:     PdhAddCounter(\Process(MonAgentHost#0)\ID Process) failed
[MonAgentHost] Output: Agent will exit when WADDM-ShutDown-5548c4bc522e4f858d6ab6df287747cf is signaled.
[MonAgentHost] Output: Will signal WADM-StartUp-5548c4bc522e4f858d6ab6df287747cf after the agent is initialized.
[MonAgentHost] Output: Registered as an event consumer.
[MonAgentHost] Output: Agent will exit when parent process 7656 exits.
[MonAgentHost] Output: Monitoring Agent Started
[Diagnostics]: Starting configuration channel polling
[WaWorkerHost.exe] I'm in a loop (1) at 09/07/2012 10:17:55.
[WaWorkerHost.exe] I'm in a loop (2) at 09/07/2012 10:18:10.
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:18:15.202Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6260
[MonAgentHost] Error:     5412
[MonAgentHost] Error:     NetTransport
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\shared\nettransport\src\netutils.cpp
[MonAgentHost] Error:     OpenHttpSession
[MonAgentHost] Error:     749
[MonAgentHost] Error:     0
[MonAgentHost] Error:     2f94
[MonAgentHost] Error:     
[MonAgentHost] Error:     WinHttpGetProxyForUrl(http://127.0.0.1) failed ERROR_WINHTTP_AUTODETECTION_FAILED (12180)
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:18:22.313Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6260
[MonAgentHost] Error:     7912
[MonAgentHost] Error:     NetTransport
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\shared\nettransport\src\netutils.cpp
[MonAgentHost] Error:     OpenHttpSession
[MonAgentHost] Error:     749
[MonAgentHost] Error:     0
[MonAgentHost] Error:     2f94
[MonAgentHost] Error:     
[MonAgentHost] Error:     WinHttpGetProxyForUrl(http://127.0.0.1) failed ERROR_WINHTTP_AUTODETECTION_FAILED (12180)
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:18:24.578Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6260
[MonAgentHost] Error:     7912
[MonAgentHost] Error:     NetTransport
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\shared\nettransport\src\netutils.cpp
[MonAgentHost] Error:     OpenHttpSession
[MonAgentHost] Error:     749
[MonAgentHost] Error:     0
[MonAgentHost] Error:     2f94
[MonAgentHost] Error:     
[MonAgentHost] Error:     WinHttpGetProxyForUrl(http://127.0.0.1) failed ERROR_WINHTTP_AUTODETECTION_FAILED (12180)
[WaWorkerHost.exe] I'm in a loop (3) at 09/07/2012 10:18:25.
[Diagnostics]: Checking for configuration updates 09/07/2012 10:18:40.
[WaWorkerHost.exe] I'm in a loop (4) at 09/07/2012 10:18:40.
[Diagnostics]: Signalling process restart on event = WADDM-ShutDown-5548c4bc522e4f858d6ab6df287747cf
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:18:40.731Z
[MonAgentHost] Error:     3
[MonAgentHost] Error:     6260
[MonAgentHost] Error:     5472
[MonAgentHost] Error:     SelfMonitoring
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\agent\dll\selfmon.cpp
[MonAgentHost] Error:     MASelfMon::StartTerminationCountdown
[MonAgentHost] Error:     1088
[MonAgentHost] Error:     10011
[MonAgentHost] Error:     0
[MonAgentHost] Error:     
[MonAgentHost] Error:     Not starting termination thread inside a client hosted monitoring agent
[MonAgentHost] Output: Exiting the monitoring agent 6260 after the shutdown event was signaled.
[MonAgentHost] Output: Monitoring Agent Stopped
[Diagnostics] Information: Diagnostic process exited with code: 0
[Diagnostics] Information: C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor
[Diagnostics] Information: c:\users\benjamin.lux\documents\visual studio 2010\Projects\WindowsAzureProject2\WindowsAzureProject2\csx\Debug\roles\WorkerRole1\diagnostics\x64\monitor\MonAgentHost.exe -LocalPath "C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor" -StaticConfigFile "C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor\Configuration\mastaticconfig.xml" -ConfigFile "C:\Users\benjamin.lux\AppData\Local\dftmp\Resources\0f8904a1-352a-4726-a1fc-17fb8d128797\directory\DiagnosticStore\Monitor\Configuration\maconfig.xml" -ShutDownEvent WADDM-ShutDown-88b62f24f2154dbabb56a138a624ff8a -InitializedEvent WADM-StartUp-88b62f24f2154dbabb56a138a624ff8a -parent 7656 -events
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:18:42.920Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6068
[MonAgentHost] Error:     7820
[MonAgentHost] Error:     SelfMonitoring
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\agent\dll\selfmon.cpp
[MonAgentHost] Error:     MASelfMon::GetProcCntrs
[MonAgentHost] Error:     1421
[MonAgentHost] Error:     ffffffffc0000bb8
[MonAgentHost] Error:     0
[MonAgentHost] Error:     
[MonAgentHost] Error:     PdhAddCounter(\Process(MonAgentHost#0)\ID Process) failed
[MonAgentHost] Output: Agent will exit when WADDM-ShutDown-88b62f24f2154dbabb56a138a624ff8a is signaled.
[MonAgentHost] Output: Will signal WADM-StartUp-88b62f24f2154dbabb56a138a624ff8a after the agent is initialized.
[MonAgentHost] Output: Registered as an event consumer.
[MonAgentHost] Output: Agent will exit when parent process 7656 exits.
[MonAgentHost] Output: Monitoring Agent Started
[Diagnostics]: Starting configuration channel polling
[WaWorkerHost.exe] I'm in a loop (5) at 09/07/2012 10:18:55.
[WaWorkerHost.exe] I'm in a loop (6) at 09/07/2012 10:19:10.
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:19:15.198Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6068
[MonAgentHost] Error:     612
[MonAgentHost] Error:     NetTransport
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\shared\nettransport\src\netutils.cpp
[MonAgentHost] Error:     OpenHttpSession
[MonAgentHost] Error:     749
[MonAgentHost] Error:     0
[MonAgentHost] Error:     2f94
[MonAgentHost] Error:     
[MonAgentHost] Error:     WinHttpGetProxyForUrl(http://127.0.0.1) failed ERROR_WINHTTP_AUTODETECTION_FAILED (12180)
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:19:22.313Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6068
[MonAgentHost] Error:     7748
[MonAgentHost] Error:     NetTransport
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\shared\nettransport\src\netutils.cpp
[MonAgentHost] Error:     OpenHttpSession
[MonAgentHost] Error:     749
[MonAgentHost] Error:     0
[MonAgentHost] Error:     2f94
[MonAgentHost] Error:     
[MonAgentHost] Error:     WinHttpGetProxyForUrl(http://127.0.0.1) failed ERROR_WINHTTP_AUTODETECTION_FAILED (12180)
[MonAgentHost] Error: MA EVENT: 2012-07-09T08:19:24.577Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6068
[MonAgentHost] Error:     7748
[MonAgentHost] Error:     NetTransport
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\shared\nettransport\src\netutils.cpp
[MonAgentHost] Error:     OpenHttpSession
[MonAgentHost] Error:     749
[MonAgentHost] Error:     0
[MonAgentHost] Error:     2f94
[MonAgentHost] Error:     
[MonAgentHost] Error:     WinHttpGetProxyForUrl(http://127.0.0.1) failed ERROR_WINHTTP_AUTODETECTION_FAILED (12180)
[WaWorkerHost.exe] I'm in a loop (7) at 09/07/2012 10:19:25.
[WaWorkerHost.exe] I'm in a loop (8) at 09/07/2012 10:19:40. 
```

所以我可以看到跟踪消息 0、1、2、3、4、5、6、7 和 8。
但是当我查看我的“WADLogsTable”时，我只有消息：开始、1、2、3 和 4， **no Begin，数字 0 和 5, 6, 7 和 8**。

两个主要问题：他们在哪里？
如果我在两个日志记录“传输期”之间停止实例会发生什么？在这种情况下，我最后的日志是保存还是我必须使用*DeploymentDiagnosticManager*类强制上传？

第二个问题是因为也许 4 last 消息不是问题。

对于*Windows Azure Compute Emulator*中的信息错误并不重要：[博客文章](http://blogs.msdn.com/b/avkashchauhan/archive/2011/01/20/winhttpgetproxyforurl-failed-error-winhttp-autodetection-failed-12180-error-message-in-windows-azure-infrastructure-log.aspx)

编辑 09/07/2012：澄清情况。

**编辑**16/07/2012 ：如果有人可以创建一个新的工人角色项目并添加上面的代码，然后按 F5。我想知道这是个人交易还是模拟器（或其他）的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:11:57.023

根据我的经验，您必须在启动诊断监视器之前使用 SetCurrentConfiguration，否则跟踪日志不会传输到 WadLogsTable。这将使用当前日志传输时间来移动日志。您是否还可以添加时间勾选您的日志以查看创建时间？

# function - 错误：函数 lastvar() 不存在

> ID：11365569
> 
> 赞同：0
> 
> 时间：2012-07-06T15:50:08.357
> 
> 标签：function, triggers, plpgsql, postgresql-8.4

我在使用[LASTVAL()](http://www.postgresql.org/docs/8.4/interactive/functions-sequence.html "PostgreSQL 8.4 文档")函数时遇到问题。我有一个触发器：

```
CREATE OR REPLACE FUNCTION schema_name.function_name() RETURNS TRIGGER AS
  $BODY$
  DECLARE
    registry_id bigint;
  BEGIN
    INSERT INTO schema_name.table_name(column1, column2) VALUES (value1, value2);
    SELECT LASTVAR() INTO registry_id;
    ... 
```

当触发器被触发时，我收到错误：

```
ERROR:  function lastvar() does not exist
LINE 1: SELECT LASTVAR()
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
QUERY:  SELECT LASTVAR()
CONTEXT:  PL/pgSQL function "function_name" line 5 at SQL statement 
```

该表有一个 PK 列，其中一个 SEQUENCE 作为默认值：

```
...
table_name_id bigint NOT NULL DEFAULT nextval('table_name_seq'::regclass),
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:53:04.337

您写了 LASTVAR() 而不是 LASTVAL() （**R**而不是**L**）。

# jquery - TinyMCE 字符数不正确

> ID：11365572
> 
> 赞同：5
> 
> 时间：2012-07-06T15:50:15.587
> 
> 标签：jquery, tinymce, charactercount

我在页面的文本区域上使用 TinyMCE。我正在尝试获取字符和字数并输入文本区域。我一直在尝试各种版本以使其正常工作，但没有成功。这是最新的错误版本：

```
$().ready(function() {
    $('textarea.tinymce').tinymce({
        // Location of TinyMCE script
        script_url: 'jscripts/tiny_mce/tiny_mce.js',

        // General options
        theme: "advanced",
        plugins: "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",

        // Theme options
        theme_advanced_buttons1: "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4: "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "bottom",
        theme_advanced_resizing: true,

        // Example content CSS (should be your site CSS)
        content_css: "css/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url: "lists/template_list.js",
        external_link_list_url: "lists/link_list.js",
        external_image_list_url: "lists/image_list.js",
        media_external_list_url: "lists/media_list.js",

        // Replace values for the template plugin
        template_replace_values: {
            username: "Some User",
            staffid: "991234"
        },

        //setup:'tmceWordcount'
        setup: function(ed) {

            ed.onKeyUp.add(function(ed, e) {

                //Following does not work correctly
                //var strip = (tinyMCE.activeEditor.getContent()).replace(/(<([^>]+)>)/ig,"");

                //Neither does the code below
                var strip = (tinyMCE.activeEditor.getContent()).replace(/<[^>]+>/g, "");

                var text = strip.split(' ').length + " Words, " + strip.length + " Characters"
                tinymce.DOM.setHTML(tinymce.DOM.get(tinyMCE.activeEditor.id + '_path_row'), text);
            });
        }

    });
}); 
```

这是我的例子。我正在输入第一个单词：`Me` 当我输入第一个单词时，它会正确显示字符和单词。但是当我按空格输入下一个单词时，它显示字符是8。如何？IMO，它也包括 HTML 标签。上述输入文本的 HTML 代码如下：

```
<p>Me&nbsp;</p> 
```

我希望输出为 1 个单词和 3 个字符（2 个字符 + 1 个空格）。但它向我展示了另外 5 个字符。这是怎么发生的？我该如何阻止它？如果您确实输入了下一个单词，一旦您开始输入，它就会显示正确的字符数。但是当你再次点击空格时，它会添加更多字符。因此，每当按下空格和输入按钮时，似乎都会出现此问题。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:07:56.317

如果你想做这样的事情，那么必须像这样添加一个 jQuery 函数：http: [//jsfiddle.net/uA9Jx/](http://jsfiddle.net/uA9Jx/)

```
jQuery.fn.stripTags = function() {
        return this.replaceWith( this.text().replace(/<\/?[^>]+>/gi, '') );
}; 
```

假设这是您的 HTML：

`<textarea id='bar'>This is <b>bold</b> and this is <i>italic</i>.</textarea>`

然后你做：

`$("#bar").stripTags();`

这将导致：

`This is bold and this is italic.`

或者此代码的工作方式类似：http: [//jsfiddle.net/cwbMX/](http://jsfiddle.net/cwbMX/)

```
$("#bar").html( $("#bar").text().replace(/<\/?[^>]+>/gi, '') ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T22:10:18.390

对于那些想要使用多个 tineMCE 实例的人来说，这只是一些提示。

```
...    
setup: function(e){
        //I think in this case 'change' is better than 'keyup' because the user can click a button and change the code without typing.
        e.on('change', function(e){
                var len = tinymce.activeEditor.getContent().length; //Here we get the length of the content with the html tags.
                        var inputName       = tinymce.activeEditor.id; //here we get the name of the input or textarea.

                        var obj = $('input[name="'+inputName+'"]').parent();//Here we set a jquery object reference.

                        var maxLen = 400;
                        obj.find('.char-count').html(len); //Here we set a span tag with the length.

                        if(len > maxLen){
                            obj.find('.char-count').css('color','#fa8072'); //If the len is bigger than maxLen.
                        }else{
                            obj.find('.char-count').css('color','#808080'); //If the len is lower than maxLen.
                        }
                    });
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T13:21:53.947

您不必实现自己的解决方案，已经有一个插件可以同时计算字符和字数： [http ://adamscheller.com/tinymce-count-characters-plugin/](http://adamscheller.com/tinymce-count-characters-plugin/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-26T17:32:32.643

internet的内存是无穷无尽的，tinymce上的大多数线程在版本4中都不起作用我的解决方案很简单：更改wordcount插件如下：}return e + ' Chars: '+a.getContent().length} 并更改onkeyup 代码通过消除对 keycode 32 a.on("keyup",function(a){b()})},0)}) 的检查，就像一个魅力将这些结果插入到 tinymce 实例中确实需要一个插件, 但这是对示例插件的小修改

# c++ - C ++ IDE无需重新编译即可检测语法错误？

> ID：11365576
> 
> 赞同：1
> 
> 时间：2012-07-06T15:50:21.967
> 
> 标签：c++, ide, compiler-errors, syntax-error

我在 Windows 上使用 Code::Blocks IDE。代码重新编译以查找错误浪费了大量时间。
是否有无需重新编译即可检测语法错误的 C++ IDE？

我想任何基于clang的IDE都是一种选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:53:23.607

您会惊讶于 Qt Creator 在编译前检测 C++ 错误的效率。试试看！

Eclipse 对 Java 有这个很棒的特性，但是 IIRC CDT 框架没有那么强大：它只检测模糊的语法错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T15:52:35.513

带有 IntelliSense 的 Microsoft Visual Studio。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T15:59:22.467

如果您在 Windows 上，Microsoft 的 VisualStudio 可以免费获得 Express 版，这非常好。Apple 的 XCode 相当不错，但它只出现一个错误就放弃了，它的错误消息非常简短且晦涩难懂，而且我相信它仅在 Mac OS X 上可用。不幸的是，我不知道支持 Linux 的 IDE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T10:20:45.250

配置代码块以使用 clang。对我来说工作得很好。

# templates - 如何向模板添加安全注释？

> ID：11365577
> 
> 赞同：2
> 
> 时间：2012-07-06T15:50:22.527
> 
> 标签：templates, grails, groovy

我希望我的模板能够更智能地生成控制器。在我的域类中，我指定了一个带有属性的枚举，这些属性应该添加到控制器中的安全注释中。

```
static enum SecurityProperties {
    ROLE_SUPER_USER( "ROLE_SUPER_USER" ),
    IS_AUTHENTICATED_FULLY( "IS_AUTHENTICATED_FULLY" )

    SecurityProperties( String s ) {
        this.s = s
    }

    @Override
    public String toString() {
        return s;
    }        
} 
```

我希望模板查看此枚举并在生成控制器时在控制器中创建安全注释。我经常使用模板，运行起来很烦人，`generate-all`然后必须为我的所有控制器重新添加安全注释。

我的问题是我在从模板访问枚举时遇到问题，因为我无法获取域类。

我通常会得到这样的域类：

```
grailsApplication.getArtefact( "Domain", "myDomainClass" )?.getClazz() 
```

但`grailsApplication`在模板中不可用。

还有什么其他的 Grails / Groovy 方法可以获取课程或`grailsApplication`提供课程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:07:48.340

在脚手架模板中，您有一个`domainClass`可用的变量，其中包含`GrailsDomainClass`，因此`domainClass.clazz`应该为您提供所需的内容。

# css - 使用 :before 伪元素插入非 ASCII 字符

> ID：11365582
> 
> 赞同：0
> 
> 时间：2012-07-06T15:50:41.513
> 
> 标签：css, pseudo-element, non-ascii-characters

我在跨度内有一个输入字段，因此我可以在 priceField 类的跨度中的所有输入字段之前放置一个井号。但是，由于磅符号是一个特殊字符，我无法正确渲染它。我已经尝试过 ascii dec 和 hex 值、html 数字和名称以及实际符号。除了符号之外的所有内容都打印出实际代码，而符号输出 Â£。

这是我当前的CSS：

```
#productEditForm .priceField:before {
    position:relative;
    display: block;
    float: left;
    content: "£";
    margin: 9px 4px 9px 2px;
    color: #075946;
}​ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:21:30.657

您可以修复字符编码不匹配（需要更多信息以获取有关如何执行此操作的说明），或者您可以使用构造“\a3”而不是“£”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T15:53:16.257

样式表编码和您的文档编码不匹配。将两者都保存为 UTF-8（或其他常见编码）

# python - 如何用 pymox 对这段代码进行单元测试？

> ID：11365586
> 
> 赞同：1
> 
> 时间：2012-07-06T15:50:57.483
> 
> 标签：python, mox, pymox

所以我已经安装了pymox，我想测试这个方法：

```
class HttpStorage():

    def download(self, input, output):
        try:
            file_to_download = urllib2.urlopen(input)
        except URLError:
            raise IOError("Opening input URL failed")

        f = open(output, "wb")
        f.write(file_to_download.read())
        f.close()
        return True 
```

我正在阅读 pymox 文档，但我不知道该怎么做。你能帮我一些示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:03:07.540

```
import unittest
import mox

class HttpStorageTest(mox.MoxTestBase):

  def setUp(self):
    self.httpstorage = HttpStorage()

  def test_download(self):
    self.mox.StubOutWithMock(urllib2, "urlopen")
    test_file = open("testfile")
    urllib2.urlopen(mox.IgnoreArg()).AndReturn(test_file)

    self.mox.ReplayAll()
    feedback = self.httpstorage.download(test_input, test_output)
    self.assertEqual(feedback, True) 
```

您可以尝试这种格式来测试您的下载功能，因为 urllib2.openurl() 已被模拟进行单元测试。

# iphone - 使用父/子上下文时，批量大小不起作用

> ID：11365589
> 
> 赞同：10
> 
> 时间：2012-07-06T15:51:15.210
> 
> 标签：iphone, objective-c, ios, core-data

我已经能够在我的应用程序上确认这一点，并且我创建了一个快速示例应用程序来确认这一点。这是设置：

您有两个托管对象上下文：

```
masterMOC: NSPrivateQueueConcurrencyType, tied to persistent store coordinator
mainMOC: NSMainQueueConcurrencyType, child of masterMOC, NOT tied to any store coordinator 
```

此设置的灵感来自 WWDC 视频，这表明我们可以通过将 设置`masterMOC`为私有队列并将其绑定到持久存储来保存在后台线程上。如果你设置一个`NSFetchedResultsController`using `mainMOC`（它必须是那个，`mainMOC`因为那是绑定到 UI 的那个），并设置一个`fetchBatchSize`，批量大小将被忽略，所有实体都会立即出错。我启用了 SQLite 调试注释，当滚动数千行（批量大小为 20）时，不会触发任何错误。

如果我进行一个简单的调整，即将持久存储协调器绑定到`mainMOC`并使其成为根上下文（即，它不再是主上下文的子级），那么批量大小就可以完美地工作，并且当我滚动数千行时，触发了几个故障。

这是预期的行为吗？我错过了什么吗？

[您可以在此处](https://www.dropbox.com/s/tiqzb3msw4w471c/Core%20Data%20master:main.zip)下载示例项目

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T12:30:26.573

文档中对嵌套上下文的讨论有限，它只出现在“iOS v5.0 的核心数据发行说明”中，并且在`UIManagedDocument`. 关于获取和嵌套上下文的唯一评论是：

> 获取和保存操作由父上下文而不是协调器进行调解。

鉴于缺少与嵌套上下文批量获取功能相关的任何免责声明，我建议不要期望批量获取和嵌套上下文不兼容。但是，这似乎是这种情况，因为最基本的示例不起作用。*（见下面的测试代码）*。

这里还有一个描述相同问题的开放雷达提交：http: [//openradar.appspot.com/11235622](http://openradar.appspot.com/11235622)，以及 FetchedResultsControllers 和嵌套上下文注意到的其他问题：[当子 ManagedObjectContext 进行更改时实体重复被推送（保存）给它的父母](https://stackoverflow.com/questions/9641748/duplication-of-entity-when-change-made-by-a-child-managedobjectcontext-is-pushed)。

一个可能的部分解决方案可能是直接添加一个额外`NSManagedObjectContext`的，仅用于服务于. 然后，当用户选择项目时，可以将 ObjectIDs 交回嵌套的子上下文，然后可以在嵌套的上下文中执行任何后续编辑。`NSMainQueueConcurrencyType``NSPersistentStoreCoordinator``NSFetchedResultsController`

这显然会降低使用嵌套上下文的好处，并且需要更频繁地保存以在嵌套上下文和`NSFetchedResultsControllers`上下文之间进行同步。但是，根据应用程序的设计以及嵌套上下文与批量加载的相对优势，这可能很有用。*（见下面的示例代码）*

**测试代码显示嵌套上下文中最简单的案例批量获取失败：**

```
#import "AppDelegate.h"

// Xcode 4.3.3:
// Create a new iOS Master-Detail project called "BatchTest" tick the "Use Core Data" check box.
// Delete all files except the AppDelegate and the BatchTest data model (leave supporting files).
// Delete all properties and methods from AppDelegate.h
// Paste this code into AppDelegate.m
// Switch on core data debugging by editing the "BatchTest" scheme and adding 
//   -com.apple.CoreData.SQLDebug 1
// To the "arguments passed on launch" list in the "Run" step
// Run.

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    /////////////////////////////////////////////////////////////////////////////////////
    // Setup the core data stack.
    /////////////////////////////////////////////////////////////////////////////////////
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"BatchTest" withExtension:@"momd"];
    NSManagedObjectModel *model = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    NSURL *appDocsDirectory = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    NSURL *storeURL = [appDocsDirectory URLByAppendingPathComponent:@"BatchTest.sqlite"];

    NSPersistentStoreCoordinator *coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:model];
    [coordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:nil];

    NSManagedObjectContext *parentContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    parentContext.persistentStoreCoordinator = coordinator;

    NSManagedObjectContext *childContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    childContext.parentContext = parentContext;

    /////////////////////////////////////////////////////////////////////////////////////
    // Load some test data and reset the context.
    /////////////////////////////////////////////////////////////////////////////////////
    [parentContext performBlockAndWait:^{
        for (int i=0; i<1000; i++) {
            [NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:parentContext];
        }
        [parentContext save:nil];
        [parentContext reset];
    }];

    /////////////////////////////////////////////////////////////////////////////////////
    // Test Batched Fetching
    /////////////////////////////////////////////////////////////////////////////////////

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Event"];
    request.fetchBatchSize = 10;

    // Fetch from the child.
    NSArray *results = [childContext executeFetchRequest:request error:nil];
    NSLog(@"Object 500: %@", [results objectAtIndex:500]);
    // Result is all 1000 rows fetched in full, no subsequent batch fetching for event 500.

    [childContext reset];    
    [parentContext performBlockAndWait:^{
        [parentContext reset];

        // Fetch from the parent.
        NSArray *results = [parentContext executeFetchRequest:request error:nil];
        NSLog(@"Object 500: %@", [results objectAtIndex:500]);
        // Result is 1000 primary keys fetched, followed by a batch of 10 rows to find event 500.

    }];

    return YES;
}

@end 
```

**示例代码显示使用附加上下文来提供`NSFetchedResultsController`批处理工作：**

```
#import "AppDelegate.h"

// Xcode 4.3.3:
// Create a new iOS Master-Detail project called "BatchTest" tick the "Use Core Data" check box.
// Delete all files except the AppDelegate and the BatchTest data model (leave supporting files).
// Delete all properties and methods from AppDelegate.h
// Paste this code into AppDelegate.m
// Switch on core data debugging by editing the "BatchTest" scheme and adding 
//   -com.apple.CoreData.SQLDebug 1
// To the "arguments passed on launch" list in the "Run" step
// Run.

@interface AppDelegate () {
    NSManagedObjectContext *backgroundContext;
    NSManagedObjectContext *editingContext;
    NSManagedObjectContext *fetchedResultsControllerContext;
    NSManagedObject *selectedObject;
}

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    /////////////////////////////////////////////////////////////////////////////////////
    // Setup the core data stack.
    /////////////////////////////////////////////////////////////////////////////////////
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"BatchTest" withExtension:@"momd"];
    NSManagedObjectModel *model = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    NSURL *appDocsDirectory = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    NSURL *storeURL = [appDocsDirectory URLByAppendingPathComponent:@"BatchTest.sqlite"];

    NSPersistentStoreCoordinator *coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:model];
    [coordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:nil];

    backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    backgroundContext.persistentStoreCoordinator = coordinator;

    editingContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    editingContext.parentContext = backgroundContext;

    fetchedResultsControllerContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    fetchedResultsControllerContext.persistentStoreCoordinator = coordinator;

    /////////////////////////////////////////////////////////////////////////////////////
    // Load some test data and reset the context.
    /////////////////////////////////////////////////////////////////////////////////////
    [backgroundContext performBlockAndWait:^{
        for (int i=0; i<1000; i++) {
            [NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:backgroundContext];
        }
        [backgroundContext save:nil];
        [backgroundContext reset];
    }];

    /////////////////////////////////////////////////////////////////////////////////////
    // Example of three contexts performing different roles.
    /////////////////////////////////////////////////////////////////////////////////////

    // The fetchedResultsControllerContext will batch correctly as it is tied directly 
    // to the persistent store.  It can be used to drive the UI as it is a Main Queue context. 
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Event"];
    request.fetchBatchSize = 10;
    NSArray *fetchResults = [fetchedResultsControllerContext executeFetchRequest:request error:nil];

    // User selects an object in the fetchedResultsControllerContext (i.e. in a UITableView).
    selectedObject = [fetchResults lastObject];
    NSLog(@"**** selectedObject.timeStamp before editing:%@", [selectedObject valueForKey:@"timeStamp"]);

    // Pass the object to the editing context for editing using its objectID.
    NSManagedObjectID *selectedObjectID = selectedObject.objectID;
    NSManagedObject *objectForEditing = [editingContext objectWithID:selectedObjectID];

    // Edit the object
    [objectForEditing setValue:[NSDate date] forKey:@"timeStamp"];

    // Subscribe to save notifications of the background context so the 
    // fetchedResultsControllerContext will be updated after the background save occurs.
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(backgroundContextDidSave:) 
                                                 name:NSManagedObjectContextDidSaveNotification 
                                               object:backgroundContext];

    // Save the editing context to push changes up to the parent, then background save.
    [editingContext save:nil];
    [backgroundContext performBlock:^{
        [backgroundContext save:nil];
    }];

    return YES;
}

- (void)backgroundContextDidSave:(NSNotification *)notification {

    [fetchedResultsControllerContext mergeChangesFromContextDidSaveNotification:notification];
    NSLog(@"**** selectedObject.timeStamp after editing:%@", [selectedObject valueForKey:@"timeStamp"]);
    // Merging changes into the fetchedResultsControllerContext would trigger updates
    // to an NSFetchedResultsController and it's UITableView where these set up.

}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:41:17.707

来自[NSFetchRequest 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html)：

> 执行获取时，会评估整个请求并记录所有匹配对象的身份，但一次从持久存储中获取不超过 batchSize 对象的数据。执行请求返回的数组将是一个代理对象，可以根据需要透明地对批次进行故障处理。

因此，如果托管对象上下文未附加到持久存储，则没有任何东西可以获取 - 因此您看到的行为至少与文档有些一致。fetchLimit 可能适用于您描述的场景。我仍然会在 bugreporter.apple.com 上发射雷达。

# php - 尝试写入 MongoDB 副本集的 PHP 错误

> ID：11365601
> 
> 赞同：1
> 
> 时间：2012-07-06T15:51:56.950
> 
> 标签：php, mongodb, mongodb-php

我在向位于另一台机器上的副本集写入/更新时遇到问题。这是执行的代码：

```
<?php
//Create a connection
$connection = new Mongo("mongodb://user:password@mycompany.com:27017/dbName", array("persist" => "pcName", "replicaSet"=>"myReplSet"));

//Select a database
$db = $connection->dbName;

//Select a collection
$collection = $db->testCollection;

//Add a record
$obj = array("FirstName" => "Brian", "LastName"=>"Renze", "Email"=>"abc@me.com");
$collection->insert($obj);
?> 
```

我收到一个错误：*致命错误：未捕获的异常“MongoCursorException”，消息“错误或格式错误的命令请求？”* 接下来是*下一个异常“MongoCursorException”，带有消息“无法确定主人”*

没有任何东西被写入数据库，但我不确定我正在使用的代码有什么问题。它是 php.net 上 php-mongo 教程的几乎完全相同的副本。

我们的 mongoDB 实例仅在直接连接到数据库时可用（在本例中为 dbName），所以我应该采取“选择数据库”步骤吗？

如何找到副本集的主实例？这不应该自动发生吗？

有什么建议么？

谢谢，布赖恩·伦岑布林克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:53:56.280

我认为您正在尝试在没有设置的情况下使用副本集。

如果删除`replicaSet`参数：

```
$connection = new Mongo("mongodb://user:password@mycompany.com:27017/dbName", array("persist" => "pcName")); 
```

那应该行得通。

如果它不起作用，您能否包括 mongo、php、mongo-php 的版本以及您的操作系统的版本？

您可以在此处阅读有关复制的更多信息：[http ://www.mongodb.org/display/DOCS/Replication](http://www.mongodb.org/display/DOCS/Replication)

您可以在此处阅读有关连接的更多信息：[http ://www.php.net/manual/en/mongo.connecting.php](http://www.php.net/manual/en/mongo.connecting.php)

# c# - 使用 PDFsharp 将 PDF 转换为 Jpeg（资源为空）

> ID：11365603
> 
> 赞同：3
> 
> 时间：2012-07-06T15:52:13.433
> 
> 标签：c#, .net, pdf, jpeg, pdfsharp

我正在尝试使用 PDFsharp 将 pdf 转换为 jpeg。

这是我的代码：

```
PdfSharp.Pdf.PdfDocument document = PdfSharp.Pdf.IO.PdfReader.Open(doc);
PdfSharp.Pdf.PdfPage page = document.Pages[0];

// get resources dictionary
PdfSharp.Pdf.PdfDictionary resources = page.Elements.GetDictionary("/resources");
if (resources != null)
{
    // get external objects dictionary
    PdfSharp.Pdf.PdfDictionary xobjects = resources.Elements.GetDictionary("/xobject");
    if (xobjects != null)
    {
        ICollection<PdfSharp.Pdf.PdfItem> items = xobjects.Elements.Values;

        // iterate references to external objects
        foreach (PdfSharp.Pdf.PdfItem item in items)
        {
            PdfSharp.Pdf.Advanced.PdfReference reference = item as PdfSharp.Pdf.Advanced.PdfReference;
            if (reference != null)
            {
                PdfSharp.Pdf.PdfDictionary xobject = reference.Value as PdfSharp.Pdf.PdfDictionary;

                // is external object an image?
                if (xobject != null && xobject.Elements.GetString("/subtype") == "/image")
                {
                    ExportJpegImage(xobject);
                }
            }
        }
    }
} 
```

行：`if (resources != null)`返回错误。我不确定`resources`应该包含什么，但它似乎对其余的转换很重要。我从 PDFsharp 示例站点复制了这段代码。我的PDF可能有问题吗？我是用 Word 2010 制作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:55:38.137

如果您想将 PDF 转换为 JPEG，并希望使用免费软件库来完成，请考虑[ImageMagick](http://imagemagick.org/)。这可以在所有主要平台上运行，因此您在 Windows 上会很好。它可以在命令行上启动，您可以设置您喜欢的有损压缩级别。

编辑：啊，我在另一个问题上看到您正在使用 ImageMagick 的 .net 接口。如果您可以让它工作，那就太好了，但是您可能会发现仅使用`convert`命令会更容易！

# c# - C# PostMessage 语法，尝试将 WM_CHAR 发布到另一个应用程序窗口

> ID：11365605
> 
> 赞同：2
> 
> 时间：2012-07-06T15:52:18.190
> 
> 标签：c#, winforms, winapi, formatting

```
public partial class Form1 : Form
{
    [return: MarshalAs(UnmanagedType.Bool)]
    [DllImport("user32.dll", SetLastError = true)]
    static extern bool PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

    public const Int32 WM_CHAR = 0x0102;
    public const Int32 WM_KEYDOWN = 0x0100;
    public const Int32 WM_KEYUP = 0x0101;
    public const Int32 VK_RETURN = 0x0D;

    public Form1()
    {
        InitializeComponent();
    }

    public bool working;

    private void button1_Click(object sender, EventArgs e)
    {
        Process[] proc = Process.GetProcessesByName("processname");

        if (proc[0] == null || proc.Length == 0)
        {
            Debug.WriteLine("Process not found.");
            return;
        }

        foreach (char c in textBox1.Text)
        {
            // char ascii value in decimal
            int charValue = c;

            // char ascii value in hex
            string hexValue = charValue.ToString("X");

            IntPtr val = new IntPtr(c);

            Debug.WriteLine(c + " = dec: " + charValue + ", hex: " + hexValue + ", val: " + val);

            PostMessage(proc[0].MainWindowHandle, WM_KEYDOWN, val, new IntPtr(0));
            PostMessage(proc[0].MainWindowHandle, WM_CHAR, val, new IntPtr(0));
            PostMessage(proc[0].MainWindowHandle, WM_KEYUP, val, new IntPtr(0));

            PostMessage(proc[0].MainWindowHandle, WM_KEYDOWN, new IntPtr(VK_RETURN), new IntPtr(0));
            PostMessage(proc[0].MainWindowHandle, WM_KEYUP, new IntPtr(VK_RETURN), new IntPtr(0));
        }
    } 
} 
```

如果我设置`val = char 'm'`（即 dec：109，hex：0x6D），那么当窗口收到消息时，它会出于某种原因显示字符“-”（即 dec 45，hex 0x2D）。我最初怀疑十六进制/十进制格式问题，但我错了。作为一个 winapi 新手，我的问题似乎与 PostMessage() 语法有关。如何发送正确的消息以使窗口显示正确的字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:53:35.883

0x6C 和 108 在 C# 中是一回事，都是整数，所以...

```
IntPtr val = new IntPtr(0x6C) 
```

和

```
IntPtr val = new IntPtr(108) 
```

在功能上是等价的。

因此，在上面的代码中，您应该能够使用：

```
IntPtr val = new IntPtr((Int32)c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:40:14.920

我所有困惑的根源`PostMessage`在于`WM_CHAR`. 我认为这`wParam`是一个标准的 ascii 十六进制键码，但事实并非如此。它实际上是一个（十六进制）[虚拟键码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)。

这就解释了为什么 0x6D 发送的是减号而不是“m”！

# c# - OpenGL着色问题

> ID：11365607
> 
> 赞同：1
> 
> 时间：2012-07-06T15:52:23.517
> 
> 标签：c#, opengl, glsl, shader

我遇到了一些 GLSL 问题。当我只使用没有着色器的普通 VBO 时，一切都按预期显示在屏幕上，我可以四处走动。

一旦我链接着色器，它就像它“冻结”，绘制一次，并且不刷新。我检查了更新和渲染帧正在按应有的方式执行（进行了消息框输出检查以确保它到达代码）。

我认为它必须与矩阵有关，但我不知道它是什么

这是我所拥有的：

着色器创建：

```
private int vertShadHandle, fragShadHandle;
    private int shadProgHandle;

    private void ShaderCreate()
    {
        string vertShadeSource, fragShadeSource, vertcontent,fragcontent;

        vertcontent = System.IO.File.ReadAllText(@"resources/shaders/vertcoordshader.glsl");
        fragcontent = System.IO.File.ReadAllText(@"resources/shaders/fragcoordshader.glsl");

        vertShadeSource = "resources/shaders/vertcoordshader.glsl";
        fragShadeSource = "resources/shaders/fragcoordshader.glsl";

        Console.WriteLine("\nvertex shader path:" + System.IO.File.Exists("/resources/shaders/vertcoordshader.glsl"));
        Console.WriteLine("frag shader path:" + System.IO.File.Exists("/resources/shaders/fragcoordshader.glsl\n"));

        vertShadHandle= GL.CreateShader(ShaderType.VertexShader);  //connect the handles to created shaders
        fragShadHandle = GL.CreateShader(ShaderType.FragmentShader);

        shadProgHandle = GL.CreateProgram();  //create shader program

        GL.ShaderSource(vertShadHandle,vertcontent); //attach file to the shader handle
        GL.ShaderSource(fragShadHandle,fragcontent);

        GL.CompileShader(vertShadHandle); //compile the shaders
        GL.CompileShader(fragShadHandle);

        Console.WriteLine("\n" + GL.GetShaderInfoLog(vertShadHandle) + "\n");
        Console.WriteLine("\n" + GL.GetShaderInfoLog(fragShadHandle) + "\n");

        GL.AttachShader(shadProgHandle, vertShadHandle); //attach the shader to the program created
        GL.AttachShader(shadProgHandle, fragShadHandle);

        //BindAttributes go here (optional)

        GL.BindAttribLocation(shadProgHandle,0,"a_Vertex");
        GL.BindAttribLocation(shadProgHandle, 1, "a_Color");

        GL.UniformMatrix4(GL.GetUniformLocation(shadProgHandle,"MVP"), false, ref MVP);

        GL.LinkProgram(shadProgHandle); //sanity check on the created shader program, links it

        Console.WriteLine("\n"+ GL.GetProgramInfoLog(shadProgHandle) +"\n");

        GL.DeleteShader(vertShadHandle);
        GL.DeleteShader(fragShadHandle);

    } 
```

更新框架：

```
 protected override void OnUpdateFrame(FrameEventArgs e)
    {

        const float PIE = 3.141592654f;

        gamePad = XNA.GamePad.GetState(Microsoft.Xna.Framework.PlayerIndex.One);

        camAngle.Y += gamePad.ThumbSticks.Right.X * (float)e.Time * 180;
        camAngle.X += gamePad.ThumbSticks.Right.Y * (float)e.Time * 180;

        Vector2 RadAng = new Vector2();

        RadAng.X = (camAngle.X / 180 * PIE);
        RadAng.Y = (camAngle.Y / 180 * PIE);

        if (gamePad.ThumbSticks.Left.Y > 0)
        {
            camCoord.X -= (float)(Math.Sin(RadAng.Y) * gamePad.ThumbSticks.Left.Y) * (float)(e.Time);
            camCoord.Z += (float)(Math.Cos(RadAng.Y) * gamePad.ThumbSticks.Left.Y) * (float)(e.Time);
            camCoord.Y += (float)(Math.Sin(RadAng.X) * gamePad.ThumbSticks.Left.Y) * (float)(e.Time);
        }
        if (gamePad.ThumbSticks.Left.Y < 0)
        {
            camCoord.X -= (float)(Math.Sin(RadAng.Y) * gamePad.ThumbSticks.Left.Y) * (float)(e.Time);
            camCoord.Z += (float)(Math.Cos(RadAng.Y) * gamePad.ThumbSticks.Left.Y) * (float)(e.Time);
            camCoord.Y += (float)(Math.Sin(RadAng.X) * gamePad.ThumbSticks.Left.Y) * (float)(e.Time);
        }
        if (gamePad.ThumbSticks.Left.X > 0)
        {
            camCoord.X -= (float)(Math.Cos(RadAng.Y) * gamePad.ThumbSticks.Left.X) * (float)(e.Time);
            camCoord.Z -= (float)(Math.Sin(RadAng.Y) * gamePad.ThumbSticks.Left.X) * (float)(e.Time);
        }
        if (gamePad.ThumbSticks.Left.X < 0)
        {
            camCoord.X -= (float)(Math.Cos(RadAng.Y) * gamePad.ThumbSticks.Left.X) * (float)(e.Time);
            camCoord.Z -= (float)(Math.Sin(RadAng.Y) * gamePad.ThumbSticks.Left.X) * (float)(e.Time);
        }

        //camCoord.X -= (float)(Math.Sin(RadAng.Y));
        //camCoord.Z += (float)(Math.Cos(RadAng.Y));
        //camCoord.Y += (float)(Math.Sin(RadAng.X));

        if (camAngle.X > 89)
        {
            camAngle.X = 89;
        }
        if (camAngle.X < -89)
        {
            camAngle.X = -89;
        }

        if (camAngle.Y > 360)
        {
            camAngle.Y -= 360;
        }
        else if (camAngle.Y < 0)
        {
            camAngle.Y += 360;
        }

        CameraMatrix();
        MVP = Matrix4.Mult(camMatrix, perspectivematrix);
    } 
```

相机功能：

```
public Matrix4 MVP = new Matrix4();
    public Matrix4 camMatrix = new Matrix4();
    private void CameraMatrix()
    {
        camMatrix = Matrix4.Identity;
        camMatrix = Matrix4.CreateRotationX(camAngle.X);
        camMatrix = Matrix4.CreateRotationY(camAngle.Y);
        camMatrix = Matrix4.CreateTranslation(camCoord);
        //GL.Rotate(camAngle.X, 1, 0, 0);
        //GL.Rotate(camAngle.Y, 0, 1, 0);
        //GL.Translate(camCoord);
    } 
```

渲染帧：

```
protected override void OnRenderFrame(FrameEventArgs e)
    {

        //Qfont display debug info

        GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit | ClearBufferMask.StencilBufferBit);

        coordSys.Draw(ref shadProgHandle);

        GL.PushAttrib(AttribMask.ColorBufferBit);

        int qFontLine = 0;
        QFont.Begin();
        InfFont.Print("FPS: " + Math.Round(RenderFrequency, 2), new Vector2(0, 0));
        ++qFontLine;
        InfFont.Print(new String('\n', ++qFontLine) + "X: " + -Math.Round(camCoord.X, 2));
        InfFont.Print(new String('\n', ++qFontLine) + "Y: " + -Math.Round(camCoord.Y, 2));
        InfFont.Print(new String('\n', ++qFontLine) + "Z: " + -Math.Round(camCoord.Z, 2));
        ++qFontLine;
        InfFont.Print(new String('\n', ++qFontLine) + "H-Angle: " + -Math.Round(camAngle.Y, 2));
        InfFont.Print(new String('\n', ++qFontLine) + "V-Angle: " + -Math.Round(camAngle.X, 2));
        ++qFontLine;
        InfFont.Print(new String('\n', ++qFontLine) + "Thumbsticks: ");
        InfFont.Print(new String('\n', ++qFontLine) + "Left.X : " + Math.Round(gamePad.ThumbSticks.Left.X,2));
        InfFont.Print(new String('\n', ++qFontLine) + "Left.Y : " + Math.Round(gamePad.ThumbSticks.Left.Y,2));
        InfFont.Print(new String('\n', ++qFontLine) + "Right.X: " + Math.Round(gamePad.ThumbSticks.Right.X,2));
        InfFont.Print(new String('\n', ++qFontLine) + "Right.X: " + Math.Round(gamePad.ThumbSticks.Right.Y,2));
        QFont.End();

        GL.PopAttrib();

        SwapBuffers();
    } 
```

绘图命令

```
GL.UseProgram(ShaderProgramHandle);

 GL.EnableVertexAttribArray(0);
        GL.EnableVertexAttribArray(1);

        GL.BindBuffer(BufferTarget.ArrayBuffer, _VBO[1]);
        GL.VertexAttribPointer(1, 3, VertexAttribPointerType.Float, false, 0, 0);

        GL.BindBuffer(BufferTarget.ArrayBuffer, _VBO[0]);
        GL.VertexAttribPointer(0, 3, VertexAttribPointerType.Float, false, 0, 0);

        GL.DrawArrays(BeginMode.Lines, 0, 6);

        GL.DisableVertexAttribArray(0);
        GL.DisableVertexAttribArray(1); 
```

最后，分别是顶点和片段着色器：

```
 #version 330

in vec3 a_Vertex;
in vec3 a_Color;

uniform mat4 MVP;

out vec3 color;

void main()
{

    gl_Position = vec4(a_Vertex,1.0);// * MVP;

    color = a_Color;
}

    #version 330

in vec3 color;
out vec4 outColor;

void main()
{
    outColor = vec4(1,1,1,1.0); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:10:53.800

我已经想通了。我改变了顶点着色器说

gl_Position = gl_ModelViewProjectionMatrix * vec4(a_Vertex,1.0);

我不知道存在

# c++ - 为非 Cocoa C++ Mac 项目构建应用程序包

> ID：11365612
> 
> 赞同：5
> 
> 时间：2012-07-06T15:52:34.467
> 
> 标签：c++, macos, xcode4.3, building

我正在 Xcode 4.3.3 中构建一个 C++ OpenGL 纸牌游戏，目的是在 64 位和 32 位 Mac 上运行它，这不是我的问题。我的问题是我已经在程序开发中达到了一个点，我想测试它是否可以在不同的 32 位 Mac（我的是 64 位）上运行，而无需安装 Xcode。显然，这需要我将其导出为 .app。我可以从我的项目中找到并运行导出的 Unix 可执行文件，在一些 cd'ing 之后，通过终端，但这对我和程序的目标受众来说是不可取的。我已经搜索了谷歌和 Stack Overflow，寻找任何可以帮助我的东西，但是所有提到存档的东西似乎对我的特定项目都不成功，我认为那是因为它是一个 C++ 命令行工具项目。所以，有人可以帮我将我的项目导出为 .app 吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T16:05:00.103

最简单的方法是创建一个 Cocoa 项目，进入“构建阶段”并从“与库链接”构建阶段删除所有 Objective-c 框架，删除模板添加的所有 Objective-c 文件（应用委托等），然后用您的 main.cpp 文件替换 main.c。

Cocoa 项目并没有什么特别之处，除了它链接到 Cocoa 并从它的 main() 函数调用 NSApplicationMain() 之外。

Cocoa 还使用了一堆 .plist 条目，您将不再需要它们。但它们不会影响 OS X 处理您的应用程序的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-29T15:36:28.590

我正在寻找 XCode 设置解决方案，但这是我目前创建应用程序的方法：

你必须把你的二进制文件（比方说`myapp`）放在“MyApp.app/Contents/MacOS/myapp”中，然后它现在可以作为.app启动。那是个把戏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T16:27:07.707

只需转到左侧文件导航器中的目标文件夹，那里就会列出一个可执行文件。左键单击该可执行文件，然后单击“在查找器中显示”。（我是从记忆中描述的，所以我可能有错误的确切细节。）文件路径非常长（涉及任意字母数字路径名，我**不**知道为什么），所以你可能无法找到它用命令行。

如果您愿意，可以将文件的扩展名从无更改为“.app”，它根本不会影响文件的性质。此外，如果您想要自定义图标，您可以在查找器中“获取信息”，然后单击信息窗口中的图标，然后使用 Cmd-V 将其粘贴（显然您必须将图标复制到剪贴板）。在 Xcode 中也有一种方法可以做到这一点，但我不记得了。

# jquery - 聚焦 HTML5元素

> ID：11365613
> 
> 赞同：0
> 
> 时间：2012-07-06T15:52:34.313
> 
> 标签：jquery, html, button, focus

如何聚焦 HTML5`<button>`元素（最好使用 jQuery）？

我努力了：

```
$('#myButton').focus(); 
```

和

```
$('#myButton').trigger('focus'); 
```

我在按钮上有和没有 a 的情况下都试过了`tabstop`，到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:55:18.243

弄清楚了。我试图从另一个事件处理程序中聚焦按钮（这显然不起作用）。

我的解决方案是添加一个简单的 1ms 超时：

```
window.setTimeout(function () { $('#myButton').focus(); }, 1); 
```

这使它完美地工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T15:59:30.980

在 XP 上的 Chrome 20 中为我工作：http: [//jsfiddle.net/Grezzo/KCS9T/](http://jsfiddle.net/Grezzo/KCS9T/)

# perl - 如何使用 perl 为应用程序输出添加时间戳

> ID：11365616
> 
> 赞同：2
> 
> 时间：2012-07-06T15:52:36.707
> 
> 标签：perl, time, io, piping

我有一个命令行应用程序，它在运行时提供命令行输出。当我将它写入文件（例如：app >> log.txt）时，它都显示在文本文件中，就像它出现在终端中一样。我需要能够为输出加上时间戳，这样如果我让它继续运行，我就可以回来查看它何时打印。

我尝试过管道到 perl 脚本：

```
#!/usr/bin/env perl
use strict;
use warnings;
while (<STDIN>) {
  print time.": $. : $_";
} 
```

使用此命令：

```
./app | perl timestamp.pl >> test.log 2>&1 
```

但是日志是空的。很抱歉，我无法更具体地了解我正在运行的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T15:56:30.063

受缓冲之苦？[放](http://search.cpan.org/perldoc?perlvar#%24OUTPUT_AUTOFLUSH)

```
$| = 1; 
```

在脚本的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:43:28.527

[@mob 的回答](https://stackoverflow.com/a/11365691/100754)很可能解决了您的直接问题。但是，我建议您考虑在模式下使用[Log::Log4perl](http://search.cpan.org/perldoc/Log::Log4perl)`easy`。它将帮助您避免多次重新发明轮子，并且您将免费获得易于配置的日志记录级别：

```
#!/usr/bin/env perl

use strict; use warnings;

use Log::Log4perl qw(:easy);
Log::Log4perl->easy_init($WARN);

while (<>) {
    INFO "$. : $_";
    if ( /easy/ and ($. > 1)) {
        ERROR "$ARGV [$.] - Make easy things harder!";
    }
    if (eof) {
        ALWAYS "Done with $ARGV";
    }
} 
```

```
C:\temp> log.pl log.pl
2012/07/07 20:41:57 log.pl [5] - 让简单的事情变得更难！
2012/07/07 20:41:57 log.pl [6] - 让简单的事情变得更难！
2012/07/07 20:41:57 log.pl [10] - 让简单的事情变得更难！
2012/07/07 20:41:57 log.pl [11] - 让简单的事情变得更难！
2012/07/07 20:41:57 完成 log.pl
```

另请注意：

> 虽然这已被证明可以很好地让人们慢慢熟悉 Log::Logperl，有效地避免用大量不同的旋钮来摆弄他们（类别、附加器、级别、布局），但 Log 的总体使命是： :Log4perl 就是让人们从一开始就使用类别来习惯这个概念。所以，让我们把它隐藏在手册页中（恭喜你读到这里 :)。

# javascript - CTRL S 如果光标留在输入字段中，函数会添加一个 s，你如何停止它？

> ID：11365617
> 
> 赞同：0
> 
> 时间：2012-07-06T15:52:40.897
> 
> 标签：javascript, dom

我在下面使用的代码工作正常，除了如果光标留在输入字段中它会添加一个“s”。我该怎么做`CTRL`-`S`没有添加那个讨厌的 s ？

```
window.onload = function() {

//-------------------------------------------------------------------->>
// CTRL-S FEATURE:
//-------------------------------------------------------------------->>
var isCtrl = false; 
document.attachEvent('onkeyup', KeyUpHandler); 
document.attachEvent('onkeydown', KeyDownHandler); 

function KeyUpHandler() {
    if (event.keyCode == 17) { 
    isCtrl = false; 
    }
}//end of function 

function KeyDownHandler() {
    if (event.keyCode == 17) { isCtrl = true }
    if (event.keyCode == 83 && isCtrl == true) {
    v8_update()
    } 
}//end of function

}//end of onload() 
```

非常感谢和感谢您提前提供的所有帮助和支持，

干杯

周杰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:56:09.470

`keydown`处理程序应阻止默认操作继续执行——即插入焦点元素的字符。为此，请使用`preventDefault`事件对象的方法：

```
function KeyDownHandler(evnt) {
    var evnt = evnt || window.event;
    if (evnt.keyCode == 83 && evnt.ctrlKey) {
        evnt.preventDefault ? evnt.preventDefault() : window.event.returnValue = false;
        v8_update();
        return false;
    }
} 
```

On 也可以返回 false 以停止传播并防止默认，但是，这可能对绑定到与您的事件相同的元素的其他事件有害——您可能希望传播，尤其是在将此类事件附加到文档本身时。如果是这样，请取出虚假退货。

在这里试试：http: [//jsfiddle.net/LzezS/](http://jsfiddle.net/LzezS/)

**文档**

*   MDN 上的 event.preventDefault - [https://developer.mozilla.org/en/DOM:event.preventDefault](https://developer.mozilla.org/en/DOM:event.preventDefault)
*   W3 上的 DOM 事件规范 - [http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event-preventDefault](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event-preventDefault)
*   MSDN 和 IE 的非标准事件模型 - [http://msdn.microsoft.com/en-us/library/ie/ms534372%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms534372%28v=vs.85%29.aspx)
*   MDN 上的 event.ctrlKey - [https://developer.mozilla.org/en/DOM/event.ctrlKey](https://developer.mozilla.org/en/DOM/event.ctrlKey)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:02:59.980

不要使用这样的黑客来检测是否`ctrl`按下。只需检查布尔[`event.ctrlKey`](https://developer.mozilla.org/en/DOM/event.ctrlKey)属性。另一件事，您的代码只能在古老的 IE 浏览器中运行，因为使用[`attachEvent`](https://developer.mozilla.org/en/DOM/element.addEventListener#Legacy_Internet_Explorer_and_attachEvent). 这应该是您的代码：

```
function keyDownHandler(event) {
    event = event || window.event; // <-- IE
    if (event.keyCode == 83 && event.ctrlKey) {
        v8_update();
        return false; // <--
    } 
}
if (window.addEventListener) {
    document.addEventListener('keydown', keyDownHandler, false);
} else {
    document.attachEvent('onkeydown', keyDownHandler);
} 
```

`return false;`停止事件的传播，并阻止输入字符：http: [//jsfiddle.net/ZwejW/](http://jsfiddle.net/ZwejW/)。

# python - psycopg2 安装错误 - 未加载库：libssl.dylib

> ID：11365619
> 
> 赞同：40
> 
> 时间：2012-07-06T15:52:44.460
> 
> 标签：python, virtualenv, psycopg2

我尝试使用 安装`psycopg2`在 virtualenv 中`pip`，编译看起来没问题，它说“成功安装 psycopg2”，但是当我尝试在 python 解释器（在 virtualenv 中）中导入它时，它表明错误：

```
 File "<stdin>", line 1, in <module>
  File "/Users/me/sites/env/trackmap/lib/python2.7/site-packages/psycopg2/__init__.py", line 67, in <module>
    from psycopg2._psycopg import BINARY, NUMBER, STRING, DATETIME, ROWID
ImportError: dlopen(/Users/me/sites/env/trackmap/lib/python2.7/site-packages/psycopg2/_psycopg.so, 2): Library not loaded: libssl.dylib
  Referenced from: /Users/me/sites/env/trackmap/lib/python2.7/site-packages/psycopg2/_psycopg.so
  Reason: Incompatible library version: _psycopg.so requires version 1.0.0 or later, but libssl.0.9.8.dylib provides version 0.9.8 
```

问题是我之前在我的其他虚拟环境中成功安装了它`pip`，就像几周前一样，并让它`postgresql`在我的 mac 上工作。我想知道这是否是编译器的问题？我`shortens from 64-bit to 32-bit`在安装 psycopg2 期间看到了一些警告。我的编译器是`i686-apple-darwin11-llvm-gcc-4.2`mac os x lion 上的默认编译器。

我看到了几篇与`psycopg2`安装相关的帖子，但其中大部分都是通过在虚拟环境中安装来解决的。所以……有人可以给我一个建议吗？谢谢！非常感谢。

ps 如果需要安装psycopg2的编译日志，请告诉我，因为太长，我没有贴在这里。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-11T04:20:29.923

错误是否说`libssl.dylib`版本太旧？

`libssl.dylib`在我的 Mac 上，错误是`libcrypto.dylib`pyscopg 无法使用。mac使用的`openssl`包是0.98，而pyscopg需要1.0.0或更高版本。

我的解决方案是这样的：

1.  从 brew 安装 openssl

    ```
    $ brew install openssl 
    ```

2.  复制`libssl.1.0.0.dylib`和`libcrypto.1.0.0.dylib`从`/usr/local/Cellar/openssl/1.0.1c`到`/usr/lib/`

    ```
    $ cd /usr/local/Cellar/openssl/1.0.1c/lib
    $ sudo cp libssl.1.0.0.dylib libcrypto.1.0.0.dylib /usr/lib/ 
    ```

3.  在`/usr/lib`目录中，创建一个软链接`libssl.dylib`和`libcrypto.dylib`. 您可能必须删除现有链接。

    ```
    $ sudo rm libssl.dylib libcrypto.dylib
    $ sudo ln -s libssl.1.0.0.dylib libssl.dylib
    $ sudo ln -s libcrypto.1.0.0.dylib libcrypto.dylib 
    ```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2020-03-06T04:15:25.433

我认为在 Mac 中我们需要：

```
export LDFLAGS="-L/usr/local/opt/openssl/lib" 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-10-09T07:59:16.850

在 OSX 10.11+（El Capitan 或更高版本）解决方案上替换符号链接（见上文 - [https://stackoverflow.com/a/11911870/565525](https://stackoverflow.com/a/11911870/565525)）`sudo rm libssl.dylib libcrypto.dylib`报告`Operation not permitted`。对我有用的解决方案是：

```
brew install openssl 
```

找到 openssl brew 库所在的位置，从 directory 开始搜索`/usr/local/Cellar/openssl`。就我而言，它在`/usr/local/Cellar/openssl/1.0.2d_1/lib`

最后设置 DYLD_LIBRARY_PATH，即在 .bash_profile 中添加这样的一行：

```
# replace location of lib files with folder name you found in previous step
export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:/usr/local/Cellar/openssl/1.0.2d_1/lib 
```

重新启动 shell，或者只是`source ~/.bash_profile`测试它是否有效：

```
$ python -c"import psycopg2  ;   print('psycopg2 is now ok')" 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-10-29T00:57:05.363

我有一个类似的问题。我曾使用 Anaconda 安装 python 和一些软件包，然后使用 pip 安装 psycopg2。我能够通过卸载 psycopg2 并使用 conda 包管理器而不是 pip 重新安装它来修复错误。

```
pip uninstall psycopg2
conda install psycopg2 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-01-25T23:19:18.407

感谢@khrf 的回答。

如果您使用的是 postgres 系统安装程序（而不是 Postgres.app），请使用：

```
export DYLD_LIBRARY_PATH=/Library/PostgreSQL/9.3/lib 
```

`~/.bash_profile`如果您想避免每次都键入它，可以将其放在您的中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-23T13:03:25.840

如果您使用的是 PostgresApp，请相应地设置 DYLD_LIBRARY_PATH 环境变量，例如：

```
DYLD_LIBRARY_PATH=/Applications/Postgres.app/Contents/MacOS/lib/ ../venv/bin/python manage.py syncdb 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-10T07:53:06.220

在 ~/.bash_profile 中添加以下行

```
export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/opt/openssl/lib/ 
```

然后

```
source ~/.bash_profile 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-29T06:34:42.183

经过几个小时的故障排除后，添加到我的`.zshrc`文件中的以下行帮助了我

```
export DYLD_LIBRARY_PATH=/Library/PostgreSQL/11/lib 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-08T07:58:49.257

找到您的 libssl 和 libcrypto 文件所在的位置，并在您的 zshrc 文件中设置 LIBRARY_PATH 即可。

参考： [添加库搜索路径到 clang](https://stackoverflow.com/questions/42997218/add-library-search-path-to-clang) [https://mithun.co/hacks/library-not-loaded-libcrypto-1-0-0-dylib-issue-in-mac/](https://mithun.co/hacks/library-not-loaded-libcrypto-1-0-0-dylib-issue-in-mac/)

# c# - 检查ThreadPool线程何时完成的正确方法？

> ID：11365621
> 
> 赞同：0
> 
> 时间：2012-07-06T15:52:49.827
> 
> 标签：c#, multithreading, threadpool, interlocked

我正在寻找一种检查线程池中的所有线程何时完成任务的方法。目前我正在使用一个计数器，当线程完成它的工作以及`counter == 0`我调用我的`WorkComplete`方法时它会递减。这似乎可行，但是当我到达最后的“工作”时，它似乎没有处理结果？或者至少用户界面没有得到它。这是我目前拥有的：

排队工作项 + 递增计数器

```
foreach (string s in URLs)
{
       ThreadPool.QueueUserWorkItem(new WaitCallback(DoWork), s);
       Interlocked.Increment(ref counter);
} 
```

做工作：

```
public void DoWork(object sender)
{      
    lock (_threadLock)
    {
        try
        {
            string url = (string)sender;
            result.URL = url;
            if (chkFb.Checked)
            {
                 result.Shares = grabber.GetFacebookShares(url);
            }
            if (chkTwitt.Checked)
            {
                 result.Tweets = grabber.GetTweetCount(url);
            }
            if (chkPlusOne.Checked)
            {
                 result.PlusOnes = grabber.GetPlusOnes(url);
            }
            Interlocked.Decrement(ref counter);
            this.Invoke(new ThreadDone(ReportProgress), result);
        }
        catch (Exception exc)
        {
            MessageBox.Show(string.Format("Errror: {0}", exc.Message);
        }
        finally
        {
            if (counter == 0)
            {
                this.Invoke(new ThreadDone(ReportProgress), result);
                this.Invoke(new Complete(WorkComplete));
            }
        }
    }
} 
```

但是处理的 URL 的数量总是比总数少一个，这几乎就像最后一个线程不是“报告回来”之类的。有没有人有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:00:46.470

上面的代码有几个问题：

1.  您包括异常处理，但您的调用`Interlocked.Decrement`不在 finally 块中。这意味着异常将阻止`jobCounter`正确减少。
2.  您在每个线程上锁定您的方法。这有效地使得这些 ThreadPool 线程中只有一个可以在任何时间点执行，因为它们都锁定在同一个变量 ( `_threadLock`) 上。如果这是需要的，则没有理由使用多个线程池线程 - 只需让一个线程处理循环中的所有项目，因为这实际上就是您现在正在做的事情。
3.  看起来（尽管代码不是 100% 清晰）您正在直接从线程池线程访问 UI 元素（即：）`chkTwitt.Checked`。这不可靠。
4.  您将所有内容都设置为单个`result`变量，该变量在所有线程之间共享。在实际意义上，尚不清楚如何使用它。

鉴于您实际上只是在处理一组项目（URL），您可能还需要考虑使用`Parallel.ForEach`for even`PLINQ`来处理这些项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:06:45.193

好吧，我解决了我遇到的问题。

```
ScrapeResult result = new ScrapeResult();
string url = (string)sender;
result.URL = url;

if (chkFb.Checked)
{
    result.Shares = grabber.GetFacebookShares(url);
}
if (chkTwitt.Checked)
{
    result.Tweets = grabber.GetTweetCount(url);
}
if (chkPlusOne.Checked)
{
    result.PlusOnes = grabber.GetPlusOnes(url);
}

Interlocked.Decrement(ref counter);
this.Invoke(new ThreadDone(ReportProgress), result); 
```

`result`我没有在我的方法中重用相同的变量，而是`DoWork`为每个线程创建一个新变量，这样线程就不可能获取任何旧/已处理的数据（因为我为每个线程创建了一个新实例）。这也解决了我在 UI 上多次显示结果时遇到的一些问题。

我还能够移除锁（这首先是没有意义的）并且通过这次经历学到了更多关于多线程的知识:)

# sql - Oracle 和 SQL Server - 将十六进制转换为十进制

> ID：11365628
> 
> 赞同：0
> 
> 时间：2012-07-06T15:53:15.513
> 
> 标签：sql, sql-server, oracle, oracle11g, hex

我需要一种将十六进制值转换为数字的方法，以便我可以在 oracle 和 SQL 服务器中将它们加在一起（我需要最终得到一个值）。我很难在两台服务器上获得相同的结果。这些是十六进制值：

```
 SQL SERVER                            ORACLE
____________________________________________________________________
0x6512BD43D9CAA6E02C990B0A82652DCA  6512BD43D9CAA6E02C990B0A82652DCA
0xC20AD4D76FE97759AA27A0C99BFF6710  C20AD4D76FE97759AA27A0C99BFF6710
0xC51CE410C124A10E0DB5E4B97FC2AF39  C51CE410C124A10E0DB5E4B97FC2AF39
0x1FF1DE774005F8DA13F42943881C655F  1FF1DE774005F8DA13F42943881C655F
0x1C383CD30B7C298AB50293ADFECB7B18  1C383CD30B7C298AB50293ADFECB7B18
0xC74D97B01EAE257E44AA9D5BADE97BAF  C74D97B01EAE257E44AA9D5BADE97BAF
0x67C6A1E7CE56D3D6FA748AB6D9AF3FD7  67C6A1E7CE56D3D6FA748AB6D9AF3FD7
0x6F4922F45568161A8CDF4AD2299F6D23  6F4922F45568161A8CDF4AD2299F6D23 
```

我对任何解决方案都持开放态度，并感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:21:51.043

甲骨文：

```
select to_number('6512BD43D9CAA6E02C990B0A82652DCA', 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx') from dual; 
```

SQL 服务器：

```
select convert(int, convert(varbinary, '0x6512BD43D9CAA6E02C990B0A82652DCA', 1)) 
```

请注意，您使用的数字很大，因此可以解释您遇到的转换问题。它们看起来像 UDID。将这些十六进制字符串转换为整数有合理的理由吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:49:41.563

这些十六进制值太大而无法存储为数字、句号。给出的示例是 32 个十六进制数字，需要 124 位（无符号）的数据类型。如果您尝试使用本机整数，*则会溢出。*将它们相加将产生更大的值。

无论哪种方式，您都需要找到一种方法来处理任意长的十六进制数字。找到或编写一个数学库来执行此操作。在 Oracle 中，您可能可以使用 Java 或 .NET 存储过程来执行此操作。同样，SQL Server 可能具有可以使用的 .NET 例程，这将提供一致的代码。PL/SQL 或 T-SQL 解决方案不太可能表现得非常好。

# apache2 - Apache http 服务器问题

> ID：11365630
> 
> 赞同：13
> 
> 时间：2012-07-06T15:53:17.960
> 
> 标签：apache2, apache

我正在使用 Apache 版本 2.2.20 (ubuntu) 并尝试使用自定义 httpd.conf 设置，但是我收到以下错误消息，希望能给予我任何指导。我是开发团队的一员，并获得了这个自定义的 httpd.conf 文件，所以我并不认为它是问题的原因（但我并没有完全排除这种可能性）。

我运行命令“sudo apache2ctl -k restart”并得到以下结果

```
[Fri Jul 06 11:33:34 2012] [warn] module ssl_module is already loaded, skipping
[Fri Jul 06 11:33:34 2012] [warn] module rewrite_module is already loaded, skipping
httpd not running, trying to start
(98)Address already in use: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
Action '-k restart' failed.
The Apache error log may have more information. 
```

如果我注释掉 httpd.conf 文件中的行（如下），我可以摆脱这两个警告。我真的想这样做吗？我可以去哪里验证这些模块是否已加载到其他地方并且在我的 conf 文件中将它们注释掉不会有任何伤害？

```
LoadModule ssl_module modules/mod_ssl.so
LoadModule rewrite_module modules/mod_rewrite.so 
```

至于无法绑定到 80 端口的错误，我无法让它消失。当我执行“sudo netstat -lnp | grep :80”时，我得到以下信息

```
tcp        0      0 0.0.0.0:80       0.0.0.0:*      LISTEN      6233/apache2 
```

我知道上面的输出意味着 apache 认为它正在运行，有一段时间我什至能够看到“它工作了！” 当我导航到 localhost 时的页面，但是现在当我转到该页面时，我只会在 localhost 端口 443 上找到“未找到 Apache/2.2.20 (ubuntu) 服务器”。此外，我似乎无法杀死运行“kill -9 6233”命令的 apache 进程，只会导致 apache 的 PID 发生变化（例如从 6233 到 6234）。我也尝试使用命令“sudo etc/init.d/apache2 stop”，它会产生“* Stopping web server apache2 [ OK ]”消息，但我再次看到 apache2 进程占用了端口 80。

对任何这些问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-15T17:48:56.620

看：“模块 xxx_module**已加载**”

答：您不止一次加载这些模块。尝试搜索并评论/删除有问题的行：

**在 Centos/RHEL 中：**

```
grep ssl_module -rI /etc/httpd/*   
/etc/httpd/conf/httpd.conf:LoadModule ssl_module /usr/lib64/httpd/modules/mod_ssl.so
/etc/httpd/conf.d/ssl.conf:LoadModule ssl_module modules/mod_ssl.so 
```

在这种情况下 ^ 我在其中注释掉了`/etc/httpd/conf/httpd.conf`所有 SSL 内容`/etc/httpd/conf.d/ssl.conf`

相同的`rewrite_module`

```
grep rewrite_module -rI /etc/httpd/* 
```

**在 Debian/Ubuntu 中：**

```
grep ssl_module -rI /etc/apache2/* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:23:54.207

我有一个类似的问题，我使用带密码的 SSL 密钥。我为使其运行所做的工作是：

```
sudo pkill apache2
sudo /etc/init.d/apache2 start 
```

我不建议`Listen *:80`从您的 Apache 配置中删除。

# dependency-injection - 在创建 Guice 注入器时，我们是否需要为间接依赖进行模块化？

> ID：11365631
> 
> 赞同：0
> 
> 时间：2012-07-06T15:53:22.300
> 
> 标签：dependency-injection, guice

当创建一个注入器来创建一个对象时，我们是否需要为它的间接依赖包含模块？

例如，在下面的代码中，我们应该如何在 main() 中创建注入器？

```
public class Foo {
    private Bar bar;

    @Inject
    public Foo(Bar bar) {
        this.bar = bar;
    }

    public static void main(String[] argv) {
        Injector injector = Guice.getInjector(new BarModule());
        // or Injector injector = Guice.getInjector(new BarModule(), new BarDepModule());
        Foo foo = injector.getInstance(Foo.class);
    }
}

//=====================
public interface Bar {}

public class BarImp {
    private BarDep barDep; // Dependency of Bar

    @Inject
    public Bar(BarDep barDep) {
        this.barDep = barDep;
    }
}
//===================== 
```

当然，BarDep 应该有一个绑定。问题是我们应该明确加载 BarDepModule 还是应该由 BarModule 负责？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:51:55.033

是的，这正是策略。让最高级别的模块安装依赖项可以清楚地明确服务器/应用程序的配置方式。这有助于读者理解服务器是如何配置的，并且应该消除潜在的绑定冲突（如 Nacho 示例所示）。演示文稿的幻灯片在这里： [http ://bit.ly/BigGuice2011](http://bit.ly/BigGuice2011)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:12:47.807

Fred Faber 做了一个很好的演讲，涵盖了一些最佳实践（但我在网上找不到幻灯片）。他的建议是垂直构建模块安装：最高级别的组件负责安装所有依赖项。在这种情况下，main 应该绑定 BarModule 和 BarDepModule。将来，如果您有一些 NachoModule 也恰好依赖于 BarDepModule，如果您采用这种方法，您将不会遇到绑定冲突......

# javascript - 如何检测用户何时在输入字段中按 Enter

> ID：11365632
> 
> 赞同：50
> 
> 时间：2012-07-06T15:53:23.140
> 
> 标签：javascript

我只有 1 个输入字段，我想注册 onChange 和 onKeyPress 事件来检测用户何时完成输入或按下 Enter 键。我只需要使用javascript。谢谢您的帮助。

我有：

```
var load = function (){
   //I want to trigger this function when user hit Enter key.
}

document.getElementById('co').onchange=load;   //works great
document.getElementById('co').onKeyPress=load; 
//not sure how to detect when user press Enter 
```

html

```
//no form just a single input field
<input type='text' id='co'> 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-06T15:55:59.303

```
document.getElementById('foo').onkeypress = function(e){
    if (!e) e = window.event;
    var keyCode = e.code || e.key;
    if (keyCode == 'Enter'){
      // Enter pressed
      return false;
    }
  } 
```

[演示](http://jsbin.com/aligus/2)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-09-26T02:47:32.747

到目前为止，这些答案都没有具体回答这个问题。问题分为两部分。1\. Enter 被按下。2\. 用途集中在输入上。

**jQuery**

```
$('#input-id').on("keyup", function(e) {
    if (e.keyCode == 13) {
        console.log('Enter');
    }
}); 
```

**香草 JavaScript**

```
inputId = document.getElementById('input-id');
inputId.addEventListener('keyup', function onEvent(e) {
    if (e.keyCode === 13) {
        console.log('Enter')
    }
}); 
```

这种方式 ENTER 仅在用户按 enter FROM 该输入时才被检测到。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-09-05T21:26:11.343

更新和更清洁：使用`event.key`而不是`event.keyCode`. **没有更多的任意数字代码！**

```
const node = document.getElementById('co');
node.addEventListener('keydown', function onEvent(event) {
    if (event.key === "Enter") {
        return false;
    }
}); 
```

[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)

[支持的浏览器](http://caniuse.com/#feat=keyboardevent-key)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-06T16:08:00.320

使其跨浏览器：

```
document.getElementById('foo').onkeypress = function(e) {
    var event = e || window.event;
    var charCode = event.which || event.keyCode;

    if ( charCode == '13' ) {
      // Enter pressed
      return false;
    }
} 
```

有关更多详细信息，请参阅此问题：[javascript 事件 e.which？](https://stackoverflow.com/questions/3050984/javascript-event-e-which)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T15:59:38.390

使用 event.keyCode

```
var code = (e.keyCode ? e.keyCode : e.which);
 if(code == 13) { //Enter keycode
   //Do something
 } 
```

此链接中已经有讨论 [jQuery Event Keypress: Which key waspressed？](https://stackoverflow.com/questions/302122/jquery-event-keypress-which-key-was-pressed)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T15:56:39.420

这是一个很好的链接，讨论了这个主题并提供了一个工作示例

```
function DetectEnterPressed(e) {
var characterCode
if(e && e.which){ // NN4 specific code
e = e
characterCode = e.which
}
else {
e = event
characterCode = e.keyCode // IE specific code
}
if (characterCode == 13) return true // Enter key is 13
else return false
} 
```

[http://hspinfo.wordpress.com/2008/09/01/using-javascript-detect-enter-key-pressed-event-in-a-textbox-and-perform-the-action/](http://hspinfo.wordpress.com/2008/09/01/using-javascript-detect-enter-key-pressed-event-in-a-textbox-and-perform-the-action/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-28T18:39:53.637

我使用这段代码，它工作正常：

```
document.getElementById("theIdHere").onkeypressed = 
function() {
     if(this.event.which === 13)
        console('passed');
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-22T23:48:27.537

如今，您可以通过以下方式做到这一点：

```
document.getElementById('co').addEventListener('keydown',
  e => !e.repeat && e.keyCode === 13 && load()); 
```

请注意，`load()`它将运行一次。

# crystal-reports - 无法在水晶报表中看到更新的存储过程参数

> ID：11365637
> 
> 赞同：3
> 
> 时间：2012-07-06T15:53:34.133
> 
> 标签：crystal-reports, crystal-reports-2010

我在 SQL Server 2008 中修改了一个存储过程，但我无法在 Crystal Report 6 版本中看到我修改后的列名（能够在数据库中看到）。我所做的是删除旧的 SProc 并通过选项数据库将修改后的一个添加到同一报告中 - 将数据库添加到报告中，但我无法保存，它通过错误..

任何人都可以帮我解决这个问题..

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:16:23.863

无需删除存储过程并重新添加它，只需转到`Database -> Verify Database`强制您的报告查看修改后的过程。

# url-rewriting - iis7.5 为子虚拟应用重写 500.52

> ID：11365644
> 
> 赞同：3
> 
> 时间：2012-07-06T15:53:46.247
> 
> 标签：url-rewriting, iis-7.5, subapplication

我刚刚从 IIS6 svr2003 迁移到 IIS7.5 服务器 2008r2 并安装了 url rewrite。这一切都很好。有问题的网站很大，并且在 .net 2 集成管道下运行。目前无法在 .net 4 中重做。我对此很陌生，在这里有点超出我的深度。我真的很想使用重写功能，但我也需要子应用程序才能工作。任何帮助，将不胜感激。

但是，来自外部供应商的子虚拟应用程序在 webconfig 的重写部分存在问题。我将其注释掉，子虚拟效果很好。我在网上查看并尝试了一些事情：

```
<location path="." inheritInChildApplications="false"> 
```

或者

```
<location path="." allowOverride="true" /> 
```

环绕重写模块给我：system.web 元素的子元素位置无效。

我在子虚拟应用程序的 webconfig 中的 system.web 下尝试过，但即使重写注释掉了 - 这会产生错误。我可以尝试删除，但想知道是否有人可以就这个问题给我一些见解。

这是基本的重写：

```
<rewrite>
  <rules>
    <rule name="RedirectUserFriendlyURL1" stopProcessing="true">
      <match url="^sethsBrochure.pdf$" />
      <conditions>
        <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
      </conditions>
      <action type="Redirect" url="path/path/doc.pdf" appendQueryString="false" />
    </rule>
    <rule name="RewriteUserFriendlyURL1" stopProcessing="true">
      <match url="^sethsBrochure$" />
      <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
      </conditions>
      <action type="Rewrite" url="path/path/doc.pdf" />
    </rule>
  </rules>
  <outboundRules>
    <rule name="OutboundRewriteUserFriendlyURL1" preCondition="ResponseIsHtml1">
      <match filterByTags="A, Form, Img" pattern="^(.*)path/path/doc\.pdf$" />
      <action type="Rewrite" value="{R:1}/ path/path/doc" />
    </rule>
    <preConditions>
      <preCondition name="ResponseIsHtml1">
        <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/html" />
      </preCondition>
    </preConditions>
  </outboundRules>
</rewrite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T23:57:29.540

如您所料，最简单的方法是在子应用程序中使用`clear`或`remove`。例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <clear />
                <!-- Insert rules for this application (if any) **below** the "clear" -->
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

但是，正如您在网上找到的，您也可以使用`location`块来执行此操作。您尝试的问题是位置块需要在块*之外*`system.webServer`，而不是在块内。

您写道您尝试过：

```
<configuration>
    <system.webServer>
        <location path="." inheritInChildApplications="false">
            <rewrite>
            ...
            </rewrite>
        </location>
    <system.webServer>
<configuration> 
```

相反，您需要这样做：

```
<configuration>
    <location path="." inheritInChildApplications="false">
        <system.webServer>
            <rewrite>
            ...
            </rewrite>
        <system.webServer>
    </location>
<configuration> 
```

# jquery - 使用 jquery 验证插件的最佳实践是什么

> ID：11365645
> 
> 赞同：-2
> 
> 时间：2012-07-06T15:53:51.730
> 
> 标签：jquery

我需要编写一个 jQuery 插件来验证表单，我正在考虑这样的事情开始：

只是一个例子：

```
$('form').submit(function() {
    var isValid = true;
    var required = $('.required').val();

    if(required== ''){
        isValid = false;
    }

    return isValid;
}); 
```

我是个好习惯吗？存在一些模式来验证表单？，最好的选择是什么？

注意：我不会使用插件。​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:57:41.977

尝试：

```
$('form').submit(function() {
    var isValid = true;
    $('.required').each(function(){
         if($(this).val() == ''){
            isValid = false;
         }
    })
    return isValid;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:01:47.827

这是一个开始：

```
$('form').submit(function()
{
    var isValid = true;

    $('.required', this).each(function()
    {
        if (this.value == '')
        {
            isValid = false;

            $(this).addClass('error').focus();

            return false;
        }
    });

    return isValid;
}); 
```

这是小提琴：http: [//jsfiddle.net/DUNc2/](http://jsfiddle.net/DUNc2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:57:14.677

我知道你不想使用插件，但这是一个很好的学习方式，你可以在这里下载最流行的 jquery 验证插件：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

从如何制作该插件来创建您自己的插件中吸取一些教训。

# c# - 使用非对称密钥解密 XML 文件

> ID：11365647
> 
> 赞同：1
> 
> 时间：2012-07-06T15:53:56.293
> 
> 标签：c#, encryption, encryption-asymmetric

我有一个导出一组数据库行的程序。行内是需要加密的数据。我能够加密数据，但我似乎无法解密它。[我按照使用非对称密钥 Windows 窗体和 Windows 服务解密 Xml 文件](https://stackoverflow.com/questions/11260031/decrypt-xml-file-with-asymetric-key-windows-forms-and-windows-service)中显示的编码，我仍然收到消息“无法检索解密密钥”

目前这是在同一用户下的同一台机器上完成的，但情况并非总是如此。导出的文件将被移动到另一台机器并以不同的用户导入。

这是我的加密例程...

```
 XmlElement elementToEncrypt;

        var security = new CryptoKeySecurity();
        // Give the creating user full access 
        security.AddAccessRule(new CryptoKeyAccessRule(new NTAccount(Environment.UserDomainName, Environment.UserName), 
            CryptoKeyRights.FullControl, AccessControlType.Allow));

        // Specify that the key is to be stored in the machine key-store, and apply the security settings created above 
        var cspParams = new CspParameters
        {
            KeyContainerName = "XML_ENC_RSA_KEY",
            Flags = CspProviderFlags.UseMachineKeyStore,
            CryptoKeySecurity = security
        };
        var rsaKey = new RSACryptoServiceProvider(cspParams);

        elementToEncrypt = xmlDocument.GetElementsByTagName(elementName)[0] as XmlElement;

        var sessionKey = new RijndaelManaged() { KeySize = 256 };

        EncryptedXml eXml = new EncryptedXml();
        byte[] encryptedElement = eXml.EncryptData(elementToEncrypt, sessionKey, false);

        var edElement = new EncryptedData()
        {
            Type = EncryptedXml.XmlEncElementUrl,
            Id = elementName,
            EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncAES256Url)
        };

        var ek = new EncryptedKey();
        var encryptedKey = EncryptedXml.EncryptKey(sessionKey.Key, rsaKey, false);

        ek.CipherData = new CipherData(encryptedKey);
        ek.EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncRSA15Url);
        edElement.KeyInfo.AddClause(new KeyInfoEncryptedKey(ek));

        // Create a new KeyInfoName element. 
        var kin = new KeyInfoName() { Value = elementName };

        // Add the KeyInfoName element to the encryptedKey object. 
        ek.KeyInfo.AddClause(kin);
        edElement.CipherData.CipherValue = encryptedElement;
        EncryptedXml.ReplaceElement(elementToEncrypt, edElement, false); 
```

这是我的解密程序....

```
 var cspParams = new CspParameters
        {
            KeyContainerName = "XML_ENC_RSA_KEY",
            Flags = CspProviderFlags.UseMachineKeyStore | CspProviderFlags.UseExistingKey
        };
        var rsaKey = new RSACryptoServiceProvider(cspParams);

        var exml = new EncryptedXml(xmlDocument);
        exml.AddKeyNameMapping(elementName, rsaKey);
        exml.DecryptDocument(); 
```

预先感谢您的任何帮助！！！

加里

# combobox - 寻找 plone howto 组合框多选 - 带我从理论到实践

> ID：11365650
> 
> 赞同：-1
> 
> 时间：2012-07-06T15:54:07.707
> 
> 标签：combobox, plone, multi-select

不是程序员，我发现在 buildout.cfg /Addon Product 中成功拥有 Products.AddRemoveWidget 和collective.js.ui.multiselect ，然后意识到我在 Add Item like 页面中看不到它，事件，帮助中心，然后想要实际使用组合框/列表框中显示的数据

就我而言，作为一名旅行社，我想根据 30 年的旅行顾问经验建立一个多选逻辑演练。想到“像这样/那样做”的表达

“级联小部件” - 寻找新手/中级/有经验的切入点

```
COUNTRY
  |
  |         STATE             Tourism Region   Local Council     Local Town
Australia - South Australia - Barossa Valley - Barossa Council - Nuriootpa - local item
  |                                                                          This would
  |                                                                          be more
  |                                                                          specific 
```

元搜索将指示入口级别和起始导航点的位置。

我知道我想要什么，但必须先学会爬行。

有没有人有教程/如何让我从理论到实践。

感谢迈克尔 Wunderlich

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:28:55.623

编辑：现在我推荐[Plomino](http://plomino.net/)作为复杂表单的解决方案。它有一个 hidewhen 概念来创建动态表单，并且不需要太多编程。

你还没有弄清楚你想要什么，所以我将列出两种可能对你有帮助的方法。

使用[eea.facetednagivation 的分面导航](http://plone.org/products/eea.facetednavigation)

在这里，您创建项目然后对其进行分类，然后使用此插件您可以创建一个非常自定义的列表表单，允许您的用户选择不同的标准来缩小结果集。分类方法取决于您的用例，但您可以使用

*   普通克隆页面和默认标签字段
*   一个像collective.facets这样的插件来添加额外的标签字段
*   自定义内容类型以完全控制字段。例如使用灵巧

或者，您可能的意思是一种多页表单或“向导”。实现这一点的最简单方法是使用 PloneFormGen 插件使用此[方法](http://plone.org/products/ploneformgen/documentation/how-to/create-a-multi-page-form)。这种方法可以创建[相当复杂的表格，例如我们为客户制作的表格](http://www.cmc.qld.gov.au/topics/misconduct/online-complaint-form/intro_form)。（请注意，我们还使用了一个名为[collective.stepypfg](http://svn.plone.org/svn/collective/collective.stepypfg/trunk/collective/stepypfg/)的插件来实现该表单的第二个向导）

# core-data - 获取的结果导致部分崩溃

> ID：11365658
> 
> 赞同：0
> 
> 时间：2012-07-06T15:54:21.443
> 
> 标签：core-data, nsfetchedresultscontroller, nsindexpath

我正在使用核心数据来获取实体。我只希望这些结果显示在我的表格视图的第二部分中，而其他内容显示在另一部分中...我的应用程序没有崩溃，但获取的数据没有显示在表格视图中...我也很确定我正在正确获取数据。

这是一些代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

if (indexPath.section==0){
    switch (indexPath.row) {
        case 0:
            cell.textLabel.text = _team.teamName;
            break;
        case 1:
            cell.textLabel.text = _team.headCoach;
            break;
        default:
            break;
    }

}

if (indexPath.section ==1) {
    Player *p = [_fetchedResultsController objectAtIndexPath: indexPath];
    cell.textLabel.text = p.firstName;
    cell.detailTextLabel.text = p.team.teamName;
}       

return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:54:30.093

有几个问题，首先你应该只有一个部分，所以你不需要访问部分属性。所以试试这个

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    switch(section){
        case 0:
            return 7;
        case 1:
            return [self.fetchedResultsController.fetchedObjects count];
    }
    return 0;
} 
```

其次，您在使用以下代码的位置存在问题：

```
Player *p =[_fetchedResultsController objectAtIndexPath: indexPath]; 
```

这是导致问题的原因，因为您在两个部分都调用它，而您的 fetch 只有一个部分。

要修复崩溃，请使用检查正确 indexPath.section 的条件对其进行包装，或者将其放在第 1 节的 switch/case 语句中。您可以执行以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    if (indexPath.section==0){
        switch (indexPath.row) {
        case 0:
            cell.textLabel.text = _team.teamName;
            break;
        case 1:
            cell.textLabel.text = _team.headCoach;
            break;
        default:
            break;
        }

    }else{
        Player *p = [self.fetchedResultsController.fetchedObjects objectAtIndex: indexPath.row];
        cell.textLabel.text = p.firstName;
        cell.detailTextLabel.text = p.team.teamName;
    }       

    return cell;

} 
```

祝你好运

吨

# mapping - BLToolkit 对象作为参数

> ID：11365659
> 
> 赞同：0
> 
> 时间：2012-07-06T15:54:22.587
> 
> 标签：mapping, bltoolkit

使用 BLToolkit，很容易从存储过程输出映射到对象，但是可以用其他方式完成吗？从一个对象到一个存储过程的输入，使得每个对象的属性都成为一个参数

我希望能够做这样的事情：

```
[SprocName("sp_name")]
public abstract void InsertViaSproc(int param1, int param2, 
                                    SomeObject restOfParams);

public class SomeObject
{
    [MapField("param3")] int param3;
    [MapField("param4")] string param4;
} 
```

使用存储过程

```
CREATE PROCEDURE sp_name(
    @param1 int,
    @param2 int,
    @param3 int,
    @param4 varchar(50))
AS
--The rest 
```

开箱即用的 BLToolkit 可以做到这一点吗？还是我必须修改源才能实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:23:19.090

是的，有可能。

这是我们项目的代码：

```
 public abstract void Save(long userId, [Direction.InputOutput("id")] Email email);

    protected override string GetDefaultSpName(string typeName, string actionName)
    {
        return "fspEmail" + actionName;
    } 
```

和 T-SQL...

```
 CREATE PROCEDURE [fspEmailSave]
   @userId BIGINT,
   @name NVARCHAR(250),
   @subject NVARCHAR(255),
   @from NVARCHAR(255),
   @replyTo NVARCHAR(255),
   @forward NVARCHAR(255),
   @description NVARCHAR(300),
   @id BIGINT OUT
... 
```

在我的情况下，电子邮件模型甚至没有 MapField 属性：

```
public class Email
{
    public long Id { get; set; }

    public string Name { get; set; }        

    public string Description { get; set; }

    public string Subject { get; set; }

    public string From { get; set; }        

    public string ReplyTo { get; set; }

    public string Forward { get; set; }

    public string HtmlContent { get; set; }

    public string TextContent { get; set; }
} 
```

只要属性与存储过程中的参数名称相同（不区分大小写），所有东西都会正常工作。当然，您可以将 MapField 属性应用于模型属性并将 SprocName 应用于您的抽象方法，以确保如果有人重命名它们，不会发生任何不好的事情。但我个人讨厌那些魔法弦。

# json - 淘汰赛强制选择更新绑定

> ID：11365664
> 
> 赞同：0
> 
> 时间：2012-07-06T15:54:54.590
> 
> 标签：json, knockout.js

我有多个地址的地址表格。

[http://jsfiddle.net/VAs5r/6/](http://jsfiddle.net/VAs5r/6/)

加载表单时，addresses 对象的值 Active:false 绑定到所有输入字段的启用属性，以阻止任何条目。然后一个名为“新地址”的按钮将 Active 属性更改为 true，以便启用所有输入并让用户输入信息。

正在工作，但问题是在您更改选择选项然后再次返回到当前地址类型之前不会刷新字段。

有什么解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:10:43.470

这是[你的小提琴](http://jsfiddle.net/VAs5r/7/)，更新和工作。

您遇到的问题是这不是设置可观察值的有效方法：

```
self.selectedAddress().active=true; 
```

在淘汰赛中，可观察对象是函数，并通过将新值作为参数传递给它们来设置，如下所示：

```
self.selectedAddress().active(true); 
```

当您按照您的方式设置可观察对象时，它们的“可观察性”被覆盖，它们成为标准对象。发生这种情况时，不会通知 UI 其更新。

# php - MySQL 获取相关用户

> ID：11365665
> 
> 赞同：2
> 
> 时间：2012-07-06T15:54:57.180
> 
> 标签：php, mysql, sql, phpmyadmin

我有两张桌子`Schools`和`Users`

餐桌学校

```
-----------------------------------------------------
| id |     name    |  city  |     major    | userID |
----------------------------------------------------|
| 1  |  school A   | chicago |    CS       |    1   |
----------------------------------------------------|
| 2  |  school B   | chicago |    CS       |    1   |
----------------------------------------------------|
| 3  |  school A   | chicago |    CS       |    2   |
----------------------------------------------------|
| 4  |  school C   | chicago |    Art      |    2   |
----------------------------------------------------|
| 5  |  school B   | chicago |    CS       |    3   |
----------------------------------------------------|
| 6  |  school D   | chicago |    Math     |    3   |
----------------------------------------------------|
| 7  |  school A   |New York |    CS       |    3   |
----------------------------------------------------|
| 8  |  school B   | chicago |    Art      |    3   |
----------------------------------------------------- 
```

表用户

```
--------------------
| id |     name    |
____________________
| 1  |    User A   |
____________________
| 2  |    User B   |
____________________
| 3  |    User C   |
____________________
| 4  |    User D   |
____________________
| 5  |    User E   |
____________________ 
```

表中的`userID`字段是表中字段`schools`的外键。我想编写一个 MySQL 语句，它接受一个给定的并列出该用户的所有同学。`id``users``userID`

因此，对于上面的示例， `User A`(ID#1) 的同学是与 上同一所学校`User A`、位于同一学校`city`并具有相同的用户`major`。因此，有效的同学`User A`只有`User B`(ID#2) AND `User C`(ID#3)。

现在，我正在使用两个 MySQL 语句来实现这个目标。第一个是这个

```
SELECT id FROM schools WHERE userID = '1' 
```

其中列出了所有学校`User A`。然后我使用 PHP 循环遍历结果并为每一行运行以下命令

```
 SELECT userID from schools WHERE 
name city LIKE '%$chicago%' 
AND name LIKE '%$school A%' 
AND major LIKE '%$CS%' 
```

这可以正常工作并返回正确的用户 ID 列表。但是，我想知道是否有一种更有效的方法可以在一条 SQL 语句中执行此操作而无需使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:04:12.677

你可以这样做：

```
select distinct u.name
from Users u
join School s on s.userID = u.id
join (
            select distinct s.name, s.city
            from School s
            inner join Users u on u.id = s.userID
            where u.name = 'User A'
           ) aux on s.name = aux.name and s.city = aux.city
where u.name <> 'User A' 
```

在`aux`查询中，您选择 a 的`name`'s 和`city`'s，`@user`然后选择所有`users`具有这些要求且不是`@user`本身的要求。

您可以用变量替换“用户 A”。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-06T16:21:39.517

您的 SCHOOL 表被认为不正确。它违反了关系数据库管理系统的规则。

一个人必须多做 3 个表格：一个是学校名称，另一个是城市名称，第三个是专业名称。所有这些都必须是具有 id 的不同表。

显然 name 列和 city 列具有多对多的关系，因此必须为此制作一个查找表。

这同样适用于主要列。看起来有很多表，但是您提取任何值都会很简单。

好的，我对您的表格进行了一些更改。我更喜欢这种方式来存储数据：

```
table student
col.
id 
name
major
reg.no.   (to make each student unique)

table school
col.
id 
name

table city
col.
id 
name

table student_school (lookup table)
col.
student_id
school_id

table school_city
col.
school_id
city_id 
```

更喜欢这些表，您会发现每个查询都可以轻松完成。如果您对此有任何理解问题，请告诉我。

# java - 隐藏轴标签 jfreechart

> ID：11365672
> 
> 赞同：1
> 
> 时间：2012-07-06T15:55:33.407
> 
> 标签：java, charts, hide, jfreechart, linechart

我用 Jfreechart lib 生成这个图表

我想隐藏轴中的标签，但只显示第一个和最后一个值，我该怎么办？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:21:36.243

我认为您必须覆盖 NumberAxis.refreshTicks 方法（如果您使用的是折线图）。这里有一个类似的例子：

[JFreechart：以特定单位后的值显示 X 轴](https://stackoverflow.com/questions/10753961/jfreechart-displaying-x-axis-with-values-after-specific-units)

当您使用此函数仅设置两个刻度值时，其他值将自动变得不可见。

# ruby-on-rails - 使印象派 gem 适应 mongoid

> ID：11365676
> 
> 赞同：1
> 
> 时间：2012-07-06T15:55:46.980
> 
> 标签：ruby-on-rails, gem, mongoid

我正在尝试将这个 gem，[https:](https://github.com/charlotte-ruby/impressionist) //github.com/charlotte-ruby/impressionist 改编为**mongoid** odm。

我在[https://github.com/tute/impressionist/commit/1c3f809da8ebd3ced8cb9bda8caee89012091a10中看到了](https://github.com/tute/impressionist/commit/1c3f809da8ebd3ced8cb9bda8caee89012091a10)**mongo_mapper**的提交。

这是 mongoid 的印象.rb 模型：

```
class Impression
  include Mongoid::Document
  include Mongoid::Timestamps::Created
  field :impressionable_type, :type => String
  field :impressionable_id, :type => String
  field :user_id, :type => String
  field :controller_name, :type => String
  field :action_name, :type => String
  field :view_name, :type => String
  field :request_hash, :type => String
  field :ip_address, :type => String
  field :session_hash, :type => String
  field :message, :type => String
  field :referrer, :type => String
end 
```

生成 mongoid 文件后：

```
rails g impressionist --orm mongo_id
      invoke  mongo_id
      create  config/initializers/impression.rb 
```

我尝试运行服务器并收到此错误：

```
uninitialized constant Impressionist::Engine::MongoId (NameError)
    from /home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/gems/impressionist-1.1.1/lib/impressionist/engine.rb:11:in `block in <class:Engine>' 
```

在`engine.rb`文件中我有：

```
require "impressionist"
require "rails"

module Impressionist
  class Engine < Rails::Engine
    initializer 'impressionist.model' do |app|
      require "#{root}/app/models/impressionist/impressionable.rb"
      if Impressionist.orm == :mongo_id
        require "impressionist/models/mongo_id/impression.rb"
        require "impressionist/models/mongo_id/impressionist/impressionable.rb"
        MongoId::Document.plugin Impressionist::Impressionable
      end
    end

    initializer 'impressionist.controller' do
      ActiveSupport.on_load(:action_controller) do
        include ImpressionistController::InstanceMethods
        extend ImpressionistController::ClassMethods
      end
    end
  end
end 
```

第 11 行是`MongoId::Document.plugin Impressionist::Impressionable`

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:50:26.473

在第 11 行

```
MongoId::Document.plugin Impressionist::Impressionable 
```

应该

```
Mongoid::Document.plugin Impressionist::Impressionable 
```

注意 的大小写`Mongoid`。

# javascript - 如何在 onKeyPress 期间获取输入文本框的文本？

> ID：11365686
> 
> 赞同：98
> 
> 时间：2012-07-06T15:56:11.573
> 
> 标签：javascript, html, input, onkeypress

我试图在用户输入文本框中获取文本（[jsfiddle playground](http://jsfiddle.net/VDd6C/3/)）：

```
function edValueKeyPress() {
    var edValue = document.getElementById("edValue");
    var s = edValue.value;

    var lblValue = document.getElementById("lblValue");
    lblValue.innerText = "The text box contains: " + s;

    //var s = $("#edValue").val();
    //$("#lblValue").text(s);    
}
```

```
<input id="edValue" type="text" onKeyPress="edValueKeyPress()"><br>
<span id="lblValue">The text box contains: </span>
```

​ 代码运行没有错误，除了box的***值***，`input text`期间`onKeyPress`始终是更改*前*的值：

![在此处输入图像描述](../Images/982867bbb2531fbaf819d44ed61a966b.png)

> **问题**：如何获取文本框的文本`onKeyPress`？

## 奖金喋喋不休

HTML DOM 中有三个与*“用户正在输入”相关的事件：*

*   `onKeyDown`
*   `onKeyPress`
*   `onKeyUp`

在**Windows**`WM_Key`中，当用户按住某个键时，消息的顺序变得很重要，并且该键开始重复：

*   `WM_KEYDOWN('a')`- 用户已按下`A`键
*   `WM_CHAR('a')`-`a`从用户那里收到一个字符
*   `WM_CHAR('a')`-`a`从用户那里收到一个字符
*   `WM_CHAR('a')`-`a`从用户那里收到一个字符
*   `WM_CHAR('a')`-`a`从用户那里收到一个字符
*   `WM_CHAR('a')`-`a`从用户那里收到一个字符
*   `WM_KEYUP('a')`- 用户已释放`A`密钥

将导致在文本控件中出现五个字符：`aaaaa`

重要的一点是您对`WM_CHAR`消息的响应，即重复的消息。否则，您会在按下某个键时错过事件。

在**HTML**中，情况略有不同：

*   `onKeyDown`
*   `onKeyPress`
*   `onKeyDown`
*   `onKeyPress`
*   `onKeyDown`
*   `onKeyPress`
*   `onKeyDown`
*   `onKeyPress`
*   `onKeyDown`
*   `onKeyPress`
*   `onKeyUp`

Html 提供一个`KeyDown`和`KeyPress`每个键重复。并且该`KeyUp`事件仅在用户释放密钥时引发。

**带走**

*   我**可以**回复`onKeyDown`or ，但在更新`onKeyPress`之前两者都已提出`input.value`
*   我无法回复`onKeyUp`，因为它不会随着文本框中的文本更改而发生。

**问题：**如何在 期间获取文本框的文本`onKeyPress`？

## 奖金阅读

*   [使用 jQuery 获取表单值](http://www.electrictoolbox.com/jquery-get-set-form-values/)
*   [获取输入文本框中的值](https://stackoverflow.com/questions/4088467/jquery-get-value-in-input-text-box)

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-06T16:04:17.507

把事情简单化。同时使用`onKeyPress()`和`onKeyUp()`：

```
<input id="edValue" type="text" onKeyPress="edValueKeyPress()" onKeyUp="edValueKeyPress()"> 
```

这负责获取最新的字符串值（在键向上之后），并且如果用户按住键也会更新。

jsfiddle：http: [//jsfiddle.net/VDd6C/8/](http://jsfiddle.net/VDd6C/8/)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2019-01-04T14:01:27.533

处理`input`事件是一个一致的解决方案：所有当代浏览器中的元素都[支持](https://caniuse.com/input-event)它，`textarea`并且它会在您需要时*准确触发：*`input`

 *```
function edValueKeyPress() {
    var edValue = document.getElementById("edValue");
    var s = edValue.value;

    var lblValue = document.getElementById("lblValue");
    lblValue.innerText = "The text box contains: " + s;
}
```

```
<input id="edValue" type="text" onInput="edValueKeyPress()"><br>
<span id="lblValue">The text box contains: </span>
```

不过，我会重写一下：

```
function showCurrentValue(event)
{
    const value = event.target.value;
    document.getElementById("label").innerText = value;
}
```

```
<input type="text" onInput="showCurrentValue(event)"><br>
The text box contains: <span id="label"></span>
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-06T16:03:40.663

> 输入文本框的值，在onKeyPress期间始终是改变前的值

这是故意的：这允许事件侦听器取消按键。

如果事件侦听器[取消事件](https://developer.mozilla.org/en/DOM:event.preventDefault)，则不会更新该值。如果事件未取消，则更新值，但*在调用事件侦听*器之后。

要在字段值更新后获取值，请安排一个函数在下一个事件循环上运行。执行此操作的通常方法是调用`setTimeout`超时`0`：

```
$('#field').keyup(function() {
    var $field = $(this);

    // this is the value before the keypress
    var beforeVal = $field.val();

    setTimeout(function() {

        // this is the value after the keypress
        var afterVal = $field.val();
    }, 0);
}); 
```

在这里试试：http: [//jsfiddle.net/Q57gY/2/](http://jsfiddle.net/Q57gY/2/)

**编辑**：某些浏览器（例如 Chrome）不会触发退格的按键事件；在代码中将按键更改为 keyup。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-22T07:40:59.760

保持紧凑。
每按一次键，`edValueKeyPress()`就会调用该函数。
您还在该函数中声明并初始化了一些变量——这会减慢进程并需要更多的 CPU 和内存。
您可以简单地使用此代码 - 源自简单替换。

```
function edValueKeyPress()
{
    document.getElementById("lblValue").innerText =""+document.getElementById("edValue").value;
} 
```

这就是你想要的，而且速度更快！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-27T12:04:35.950

```
<asp:TextBox ID="txtMobile" runat="server" CssClass="form-control" style="width:92%;  margin:0px 5px 0px 5px;" onkeypress="javascript:return isNumberKey(event);" MaxLength="12"></asp:TextBox>

<script>
    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode;
        if (charCode > 31 && (charCode < 48 || charCode > 57)) {
            return false;
        }
        return true;
    }
</script> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-08-30T02:36:46.850

到目前为止，没有一个答案提供完整的解决方案。有很多问题需要解决：

1.  并非所有的按键都被传递到`keydown`和`keypress`处理程序（例如，退格键和删除键被某些浏览器抑制）。
2.  处理`keydown`不是一个好主意。在某些情况下，按键不会导致按键！
3.  `setTimeout()`样式解决方案在 Google Chrome/Blink 网络浏览器下会延迟，直到用户停止输入。
4.  鼠标和触摸事件可用于执行剪切、复制和粘贴等操作。这些事件不会触发键盘事件。
5.  取决于输入法，浏览器可能不会传递元素已更改的通知，直到用户导航离开该字段。

更正确的解决方案将处理`keypress`、`keyup`、`input`和`change`事件。

例子：

```
<p><input id="editvalue" type="text"></p>
<p>The text box contains: <span id="labelvalue"></span></p>

<script>
function UpdateDisplay()
{
    var inputelem = document.getElementById("editvalue");
    var s = inputelem.value;

    var labelelem = document.getElementById("labelvalue");
    labelelem.innerText = s;
}

// Initial update.
UpdateDisplay();

// Register event handlers.
var inputelem = document.getElementById("editvalue");
inputelem.addEventListener('keypress', UpdateDisplay);
inputelem.addEventListener('keyup', UpdateDisplay);
inputelem.addEventListener('input', UpdateDisplay);
inputelem.addEventListener('change', UpdateDisplay);
</script> 
```

小提琴：

[http://jsfiddle.net/VDd6C/2175/](http://jsfiddle.net/VDd6C/2175/)

处理所有四个事件会捕获所有边缘情况。处理用户输入时，应考虑所有类型的输入法，并验证跨浏览器和跨设备功能。上面的代码已经在桌面版的 Firefox、Edge 和 Chrome 以及我拥有的移动设备上进行了测试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-06T16:05:10.960

我通常将字段的值（即在更新之前）与与键事件关联的键连接起来。以下使用最近的 JS，因此需要调整以支持较旧的 IE。

最近的 JS 示例

```
document.querySelector('#test').addEventListener('keypress', function(evt) {
    var real_val = this.value + String.fromCharCode(evt.which);
    if (evt.which == 8) real_val = real_val.substr(0, real_val.length - 2);
    alert(real_val);
}, false); 
```

支持旧 IE 示例

```
//get field
var field = document.getElementById('test');

//bind, somehow
if (window.addEventListener)
    field.addEventListener('keypress', keypress_cb, false);
else
    field.attachEvent('onkeypress', keypress_cb);

//callback
function keypress_cb(evt) {
    evt = evt || window.event;
    var code = evt.which || evt.keyCode,
        real_val = this.value + String.fromCharCode(code);
    if (code == 8) real_val = real_val.substr(0, real_val.length - 2);
} 
```

[编辑 - 默认情况下，这种方法会禁用诸如退格键、CTRL+A 之类的按键。上面的代码适用于前者，但需要进一步修改以允许后者以及其他一些可能性。请参阅下面 Ian Boyd 的评论。]

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-02T16:33:02.220

简单的...

在您的 keyPress 事件处理程序中，编写

```
void ValidateKeyPressHandler(object sender, KeyPressEventArgs e)
{
    var tb = sender as TextBox;
    var startPos = tb.SelectionStart;
    var selLen= tb.SelectionLength;

    var afterEditValue = tb.Text.Remove(startPos, selLen)
                .Insert(startPos, e.KeyChar.ToString()); 
    //  ... more here
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-11T18:28:42.817

因此，每个事件都有优点和缺点。事件`onkeypress`并`onkeydown`不会检索最新值，并且`onkeypress`在某些浏览器中不会触发不可打印的字符。该`onkeyup`事件不会检测何时按住多个字符的键。

这有点hacky，但是做类似的事情

```
function edValueKeyDown(input) {
    var s = input.value;

    var lblValue = document.getElementById("lblValue");
    lblValue.innerText = "The text box contains: "+s;

    //var s = $("#edValue").val();
    //$("#lblValue").text(s);    
} 
```

```
<input id="edValue" type="text" onkeydown="setTimeout(edValueKeyDown, 0, this)" /> 
```

似乎可以处理所有世界中最好的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-03T08:12:44.357

通过使用**event.key**，我们可以在进入 HTML 输入文本框之前获取值。这是代码。

```
function checkText()
{
  console.log("Value Entered which was prevented was - " + event.key);

  //Following will prevent displaying value on textbox
  //You need to use your validation functions here and return value true or false.
  return false;
}
```

```
<input type="text" placeholder="Enter Value" onkeypress="return checkText()" />
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-13T07:29:30.003

尝试将事件 charCode 连接到您获得的值。这是我的代码示例：

```
<input type="text" name="price" onkeypress="return (cnum(event,this))" maxlength="10">
<p id="demo"></p> 
```

js：

```
function cnum(event, str) {
    var a = event.charCode;
    var ab = str.value + String.fromCharCode(a);
    document.getElementById('demo').innerHTML = ab;
} 
```

in 中的值`ab`将获取输入字段中的最新值。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-09T03:32:03.970

有更好的方法来做到这一点。使用 concat 方法。例子

声明一个全局变量。这在 Angular 10 上效果很好，只需将其传递给 Vanilla JavaScript。例子：

HTML

```
<input id="edValue" type="text" onKeyPress="edValueKeyPress($event)"><br>
<span id="lblValue">The text box contains: </span> 
```

代码

```
emptyString = ''

edValueKeyPress ($event){
   this.emptyString = this.emptyString.concat($event.key);
   console.log(this.emptyString);
} 
```*

# sql - 选择然后甲骨文

> ID：11365689
> 
> 赞同：1
> 
> 时间：2012-07-06T15:56:16.693
> 
> 标签：sql, oracle

我想退回`RATE`5 个月前的那个`EFFECTIVE_DATE`。如果该日期是星期六，那么我想将日期`EFF_DATE`向后移动 1 天，以便`EFFECTIVE_DATE`在星期五。这是我正在使用的代码，但到目前为止它没有返回任何值：

```
DEFINE EFF_DATE = TO_DATE('05/31/2012','MM/DD/RRRR')
SELECT RATE, EFFECTIVE_DATE
FROM RATES_ALL
WHERE EFFECTIVE_DATE IN
  CASE 
    WHEN TO_CHAR(add_months(&&EFF_DATE, -5), 'DAY') = 'SATURDAY'
    THEN 
      (
        SELECT EFFECTIVE_DATE 
        FROM RATES_ALL 
        WHERE EFFECTIVE_DATE = add_months(&&EFF_DATE, -5)-1
      )
    END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:15:54.677

RATES_ALL.EFFECTIVE_DATE 中的日期只是日期，还是也有时间？你可能需要类似的东西：

```
SELECT RATE, EFFECTIVE_DATE 
  FROM RATES_ALL 
 WHERE EFFECTIVE_DATE IN   
       CASE
         WHEN TRIM(TO_CHAR(add_months(&&EFF_DATE, -5), 'DAY')) = 'SATURDAY'
           THEN
            (
              SELECT MAX(EFFECTIVE_DATE)
                FROM RATES_ALL
               WHERE TRUNC(EFFECTIVE_DATE) = add_months(&&EFF_DATE, -5)-1
            ) 
       END; 
```

**编辑：** 好的，这就是您的代码不起作用的原因：

[从文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#i34924)中，DAY 格式模型是“日期名称，用空格填充以显示用于此元素的日期语言中最宽的日期名称的宽度。” 因此，您的 TO_CHAR 函数引用的输出实际上是 'SATURDAY '（注意末尾的空格）。您必须在 WHEN 子句中修剪 TO_CHAR 函数的输出（有关已编辑的查询，请参见上文）。

您还需要在 SELECT 中使用聚合函数来返回 CASE 语句中的单行，例如 MAX。

重新测试：

```
WITH rates_all AS
  (SELECT TO_DATE('05/31/2012','MM/DD/RRRR') effective_date, 1 rate from dual
   UNION
   SELECT TO_DATE('12/30/2011','MM/DD/RRRR'), 2 FROM dual
   UNION 
   SELECT TO_DATE('12/30/2011','MM/DD/RRRR'), 3 FROM dual)
SELECT RATE, EFFECTIVE_DATE
  FROM RATES_ALL
 WHERE EFFECTIVE_DATE IN
       CASE
         WHEN TRIM(TO_CHAR(add_months(TO_DATE('05/31/2012','MM/DD/RRRR') , -5), 'DAY')) = 'SATURDAY' THEN
           (SELECT MAX(EFFECTIVE_DATE)
              FROM RATES_ALL
             WHERE TRUNC(EFFECTIVE_DATE) = 
                   add_months(TO_DATE '05/31/2012','MM/DD/RRRR') , -5)-1)
         END;

      RATE EFFECTIVE_DATE
---------- --------------
         2 12/30/2011
         3 12/30/2011 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:24:17.560

我认为有一个内部查询会更容易，它返回 5 个月前和 5 个月前和一天前的记录，然后在外部查询中，您从内部查询中选择当天的最大结果星期六。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:47:04.123

如果您的子查询中包含 equals，则只有在 RATES_ALL 中有一个 ROW 且日期正好是 5 个月之前，您才会得到匹配。

你确定你的表总是有一个日期在 5 个月前的行吗？例如（不确定这是否是您想要的，但这将返回至少 5 个月前的最新/最新行）：

```
 SELECT MAX(EFFECTIVE_DATE) 
    FROM RATES_ALL 
    WHERE EFFECTIVE_DATE <= add_months(&&EFF_DATE, -5)-1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:17:00.930

我不了解 Oracle，但假设您检查周六的原因是因为 RATES_ALL 表中没有周六的条目，那么为什么不简单地像这样：

```
SELECT RA1.RATE, RA1.EFFECTIVE_DATE
FROM RATES_ALL RA1
WHERE RA1.EFFECTIVE_DATE = add_months(&&EFF_DATE, -5)
   OR (RA1.EFFECTIVE_DATE = add_months(&&EFF_DATE, -5)-1
   AND NOT EXISTS(SELECT * FROM RATES_ALL RA2
                  WHERE RA2.EFFECTIVE_DATE = add_months(&&EFF_DATE, -5)) 
```

# c# - 水平滚动时 Telerik Grid 样式不正确

> ID：11365690
> 
> 赞同：3
> 
> 时间：2012-07-06T15:56:17.287
> 
> 标签：c#, asp.net-mvc-3, telerik, telerik-grid, telerik-mvc

我在 C# 中使用带有 Razor 和 Telerik Grid 控件的 MVC-3 设计模式。除了一个会阻止我们发布产品的小问题之外，一切都很好。

我们只是使用标准的 Telerik 样式，所以没有自定义 CSS。然而，正如预期的那样，这一切看起来都很好，直到……您向右水平滚动。

滚动前： ![在此处输入图像描述](../Images/868c37eb6f36eefd13c651e8fc51b01f.png)

滚动后： ![在此处输入图像描述](../Images/533453fd6c33e2ffaa3aadc82a5e554f.png)

Telerik 控件本身实际上似乎不支持水平滚动，因此我们在其周围弹出了一个 div 标签并在其上设置了滚动条。即使使用 Telerik 窗口控件也会发生同样的事情。Telerik 确实支持垂直滚动，并且设置 .Scrollable() 会激活它。有没有办法说 .Scrollable("Horizo​​ntal") 之类的东西。

根据我的猜测，这似乎与页眉和页脚没有扩展到包含所有列有关。有什么办法可以修复它。在过去的一天左右，我尝试过在 Telerik 样式表和 JQuery 中进行挖掘，但无济于事。

提前感谢您提供的任何帮助。

编辑1：正如以下答案之一指出的那样，我应该将 .Width(xxx) 添加到每一列，它会起作用。我以前这样做过，但没有用。很抱歉之前没有这么说。

编辑2：要求的代码：

```
<div id="ListContent">
    @{
        Html.Telerik()
            .Grid<YeatsClinical.PatientPortal.Web.ViewModels.PatientEducation>("PatientEducations")
            .Name("grid")
            .DataKeys(k => k.Add(o => o.MrPatientEducationId))

            .Columns(c =>
                {
                    c.Bound(o => o.MrPatientEducationId).ReadOnly().Width(100);
                    c.Command(s =>
                    {
                        s.Select();
                    }).Width(100);
                    c.Bound(o => o.PatientId).Visible(false).Width(100);
                    c.Bound(o => o.MrPatientEncounterId).Visible(false).Width(100);
                    c.Bound(o => o.MrPatientEducationResourceId).Visible(false).Width(100);
                    c.Bound(o => o.GivenAsPrint).Width(100);
                    c.Bound(o => o.DatePrinted).Width(100);
                    c.Bound(o => o.SentViaEmail).Width(100);
                    c.Bound(o => o.DocumentTitle).Width(100);
                    // image is temporary disabled because its causing huge lag spikes and very long database retrievals
                    c.Bound(o => o.File).Visible(false).Width(100);
                    c.Bound(o => o.DateCreated).Width(100);
                    c.Bound(o => o.CreatedByUserId).Visible(false).Width(100);
                    c.Bound(o => o.DateLastUpdated).Width(100);
                    c.Bound(o => o.LastUpdatedByUserId).Visible(false).Width(100);
                })
            .Pageable()
            .Sortable()
            .Filterable()
            .Groupable()
            .Render();
    }
</div> 
```

上面的外部 div 是带有蓝色滚动条的样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:10:23.187

首先，感谢 Jeff 和 Pollirrata，他们都帮助找到了问题的部分答案。然而，经过更多研究，我在其他地方找到了答案。但我决定在这里为可能有同样问题的其他人发布一个链接。

在阅读 pollirrata 指出的 Telerik 手册时，我确实需要将 .Width 添加到所有列**（步骤 1）**并添加 Scrollable() **（步骤 2）**。虽然我之前这样做过，但由于下面解释的原因，它没有工作，但是 +1 给 pollirata 的有用答案，因为这需要完成。

还要感谢 Jeff 通过在他的评论中提出同样的建议来提供帮助，我无法 +1 答案，因为我已经拿走了 .Pageable 并且它没有任何区别，并且正如解释的那样，当我在他发布时添加代码时，我得到了一个 execption . 但是，不幸的是，我可以对评论 +1，虽然他的评论是正确的，但他提供的答案却不是）。

自从我开始这篇文章以来，我发现了[这个链接](http://www.telerik.com/community/forums/aspnet-mvc/grid/horizontal-scrolling-and-the-grid-header.aspx)，并注意到我使用的 jQuery 版本是 1.5，而 Telerik 需要 V1.7.1。我已经更新了我的版本，这部分地帮助解决了问题**（第 3 步）**。我还检查并仔细检查了链接引用的其他依赖项，并且所有这些依赖项都符合要求。但是，我确实注意到其中一个子依赖项丢失了。就我而言，我的网格需要 DatePicker - 我有，但 DatePicker 需要 Calender - 我没有（一定是意外删除了它）**（第 4 步）**。我还确保我在整个项目中使用 .Compressed() 和 .Combined() 方法的正确参考，如第二个链接中的参考。在这最后一步之后，一切顺利**（步骤 5）**。

感谢大家对此的帮助和指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:08:05.607

Telerik MVC Grid 确实支持水平滚动。只需设置所有列的宽度并添加 . `Scrollable()`到网格，就是这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:21:50.760

**请使用以下技术**

```
<div class="DataGridXScroll">
    @(Html.Telerik().Grid(Model)
    .Name("grvSalesSummary")
    .DataKeys(keys => keys.Add(k => k.Unit_Code))
    .Columns(column =>
    {
        column.Bound(s => s.Zone_Name).Width(100).HtmlAttributes(new { @class = "GridColumnLeftAlign" }).Hidden(true)
            .GroupHeaderTemplate(@<text>Zone: @item.Key</text>);
        column.Bound(s => s.Region_Name).Width(100).HtmlAttributes(new { @class = "GridColumnLeftAlign" }).Hidden(true)
            .GroupHeaderTemplate(@<text>Region: @item.Key</text>);
        column.Bound(s => s.Unit_Code).Width(100).HtmlAttributes(new { @class = "GridColumnLeftAlign" });
        column.Bound(s => s.Unit_Name).Width(150).HtmlAttributes(new { @class = "GridColumnLeftAlign" });

        column.Bound(s => s.TotalCustomer).Width(70).HtmlAttributes(new { @class = "GridColumnRightAlign" })
             .Aggregate(aggreages => aggreages.Sum())
                .Format("{0:N}")
                .FooterTemplate(@<text> @item.Sum.Format("{0:N}") </text>)
                .GroupFooterTemplate(@<text>@item.Sum.Format("{0:N}")</text>);

        column.Bound(s => s.TotalActiveCustomer).Width(70).HtmlAttributes(new { @class = "GridColumnRightAlign" })
             .Aggregate(aggreages => aggreages.Sum())
                .Format("{0:N}")
                .FooterTemplate(@<text> @item.Sum.Format("{0:N}") </text>)
                .GroupFooterTemplate(@<text>@item.Sum.Format("{0:N}")</text>);

        column.Bound(s => s.NoOfSalesInCurrentMonth).Width(70).HtmlAttributes(new { @class = "GridColumnRightAlign" })
             .Aggregate(aggreages => aggreages.Sum())
                .Format("{0:N}")
                .FooterTemplate(@<text> @item.Sum.Format("{0:N}") </text>)
                .GroupFooterTemplate(@<text>@item.Sum.Format("{0:N}")</text>);

        column.Bound(s => s.TotalRecoveredWithoutDP).Width(100).HtmlAttributes(new { @class = "GridColumnRightAlign" })
             .Aggregate(aggreages => aggreages.Sum())
                .Format("{0:N}")
                .FooterTemplate(@<text> @item.Sum.Format("{0:N}") </text>)
                .GroupFooterTemplate(@<text>@item.Sum.Format("{0:N}")</text>);

        column.Bound(s => s.CollectionInCurrentMonth).Width(100).HtmlAttributes(new { @class = "GridColumnRightAlign" })
             .Aggregate(aggreages => aggreages.Sum())
                .Format("{0:N}")
                .FooterTemplate(@<text> @item.Sum.Format("{0:N}") </text>)
                .GroupFooterTemplate(@<text>@item.Sum.Format("{0:N}")</text>);

        column.Bound(s => s.TotalOverdue).Width(70).HtmlAttributes(new { @class = "GridColumnRightAlign" })
             .Aggregate(aggreages => aggreages.Sum())
                .Format("{0:N}")
                .FooterTemplate(@<text> @item.Sum.Format("{0:N}") </text>)
                .GroupFooterTemplate(@<text>@item.Sum.Format("{0:N}")</text>);

        column.Bound(s => s.TotalAdvance).Width(70).HtmlAttributes(new { @class = "GridColumnRightAlign" }) .Aggregate(aggreages => aggreages.Sum())
                .Format("{0:N}")
                .FooterTemplate(@<text> @item.Sum.Format("{0:N}") </text>)
                .GroupFooterTemplate(@<text>@item.Sum.Format("{0:N}")</text>);

        column.Bound(s => s.TotalOutstanding).Width(80).HtmlAttributes(new { @class = "GridColumnRightAlign" })
             .Aggregate(aggreages => aggreages.Sum())
                .Format("{0:N}")
                .FooterTemplate(@<text> @item.Sum.Format("{0:N}") </text>)
                .GroupFooterTemplate(@<text>@item.Sum.Format("{0:N}")</text>);

        column.Template(@<a href="http://172.25.40.50/MonthlyEntrySales/SalesReports.aspx?lc=@item.Unit_Code" target="_blank">Show</a>).Width(50);

        column.Bound(s => s.FinalizedByRM).Format("{0:dd-MMM-yyyy}").Width(90).HtmlAttributes(new { @class = "GridColumnLeftAlign" });
        column.Bound(s => s.FinalizedByZM).Format("{0:dd-MMM-yyyy}").Width(90).HtmlAttributes(new { @class = "GridColumnLeftAlign" });
        column.Bound(s => s.FinalizedByHO).Format("{0:dd-MMM-yyyy}").Width(90).HtmlAttributes(new { @class = "GridColumnLeftAlign" });

        column.Template(@<a href="#" onclick="return SaveSalesStatus('@item.Unit_Code','@item.FinalizedByRM','@item.FinalizedByZM','@item.FinalizedByHO');">Save</a>).Width(50);
    })
    .Selectable()
    .Scrollable(scroll => scroll.Height(300))
    .Groupable(settings => settings.Groups(group =>
    {
        group.Add(g => g.Zone_Name);
        group.Add(g => g.Region_Name);

    }).Visible(false))
    )
</div> 
```

**添加以下 CSS**

```
.DataGridXScroll
{
    width: 1000px;
    overflow-x: scroll;
    text-align: left;
} 
```

# java - 使用 JavaPlot/Gnuplot 进行 3D 绘图

> ID：11365693
> 
> 赞同：0
> 
> 时间：2012-07-06T15:56:47.907
> 
> 标签：java, eclipse, gnuplot, javaplot

我正在努力按照标题所说的去做。显然 gnuplot 能够做到这一点，但我想使用 JavaPlot 来调用它。JavaPlot 中的[Graph3D 类](http://gnujavaplot.sourceforge.net/docs/)让我认为它是可能的，但由于我没有找到 3D 示例并且几乎没有关于 JavaPlot 的文档，所以我只有一个粗略的想法。如果有人已经知道如何做到这一点并且我的努力正在重新发明轮子，请赐教，但目前我将继续进行，就好像以前没有人尝试过这样做一样。

查看GNUPlot类，有一个plot方法，但是splot方法被注释掉了，GNUPlotExec类中没有对应的方法。我尝试添加一个，但目前它仍以 2D 绘图。为了充分披露，我没有从头开始制作，而是修改了当前的绘图方法。

这是被注释掉的 GNUPlot.class splot 方法

```
 public void splot() throws GNUPlotException {
    exec.splot(param, term);
} 
```

这是从 plot 方法派生的 GNUPlotExec.class splot 方法

```
void splot(GNUPlotParameters par, GNUPlotTerminal terminal) throws GNUPlotException {
    try {
        final GNUPlotTerminal term = terminal;  // Use this thread-aware variable instead of "terminal"
        final String comms = getCommands(par, term); // Get the commands to send to gnuplot
        final Messages msg = new Messages();    // Where to store messages from output threads

        /* Display plot commands to send to gnuplot */
        GNUPlot.getDebugger().msg("** Start of splot commands **", Debug.INFO);
        GNUPlot.getDebugger().msg(comms, Debug.INFO);
        GNUPlot.getDebugger().msg("** End of splot commands **", Debug.INFO);

        /* It's time now to start the actual gnuplot application */
        String[] command;
        if (ispersist) {
            command = persistcommand;
        } else {
            command = nopersist;
        }
        command[0] = getGNUPlotPath();
        {
            String cmdStr = "";
            for (String cmd : command) {
                cmdStr += cmd + " ";
            }
            GNUPlot.getDebugger().msg("exec(" + cmdStr + ")", Debug.INFO);
        }
        final Process proc = Runtime.getRuntime().exec(command);

        /* Windows buffers DEMAND asynchronus read & write */

        /* Thread to process the STDERR of gnuplot */
        Thread err_thread = new Thread() {

            public void run() {
                BufferedReader err = new BufferedReader(new InputStreamReader(proc.getErrorStream()));
                StringBuffer buf = new StringBuffer();
                String line;
                try {
                    while ((line = err.readLine()) != null) {
                        line = parseErrorLine(line, "gnuplot> splot");
                        line = line.replace("input data ('e' ends) >", "").trim();   // Remove entries having the "input data" prompt
                        if (line.equals("^")) {
                            line = "";
                        }  // Ignore line with error pointer
                        if (!line.equals("")) {     // Only take care of not empty lines
                            if (line.indexOf(GNUPlotParameters.ERRORTAG) >= 0) {
                                msg.error = "Error while parsing \'splot\' arguments.";    // Error was found in plot command
                                break;
                            }
                            buf.append(line).append('\n');
                        }
                    }
                    err.close();
                    msg.output = buf.toString(); // Store output stream
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
        };
        /* Thread to process the STDOUT of gnuplot */
        err_thread.start();
        Thread out_thread = new Thread() {

            public void run() {
                msg.process = term.processOutput(proc.getInputStream());    // Execute terminal specific output parsing
            }
        };
        out_thread.start();

        /* We utilize the current thread for gnuplot execution */
        OutputStreamWriter out = new OutputStreamWriter(proc.getOutputStream());
        out.write(comms);
        out.flush();
        out.close();

        try {
            proc.waitFor(); // wait for process to finish
            out_thread.join();  // wait for output (terminal related) thread to finish
            err_thread.join();  // wait for error (messages) output to finish
        } catch (InterruptedException ex) {
            throw new GNUPlotException("Interrupted execution of gnuplot");
        }

        /* Find the error message, if any, with precendence to the error thread */
        String message = null;
        if (msg.error != null) {
            message = msg.error;
        } else {
            message = msg.process;
        }

        /* Determine if error stream should be dumbed or not */
        int level = Debug.VERBOSE;
        if (message != null) {
            level = Debug.ERROR;
        }
        GNUPlot.getDebugger().msg("** Start of error stream **", level);
        GNUPlot.getDebugger().msg(msg.output, level);
        GNUPlot.getDebugger().msg("** End of error stream **", level);

        /* Throw an exception if an error occured */
        if (message != null) {
            throw new GNUPlotException(message);
        }

    } catch (IOException ex) {
        throw new GNUPlotException("IOException while executing \"" + getGNUPlotPath() + "\":" + ex.getLocalizedMessage());
    }

} 
```

这是我正在尝试运行的测试

```
public static void main(String[] args) {

    GNUPlot p = new GNUPlot("path goes here");

    FunctionPlot myPlot = new FunctionPlot("tan(x)");

    p.addPlot(myPlot);

    p.splot();
} 
```

我相信 gnuplot 正在执行的命令是

```
gnuplot> _gnuplot_error = 1
gnuplot> plot tan(x) title 'tan(x)' ; _gnuplot_error = 0
gnuplot> if (_gnuplot_error == 1) print '_ERROR_'
gnuplot>          undefined function: if 
```

当然应该说是情节，而不是情节

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:10:36.090

弄清楚了。我需要添加

```
p.new3DGraph(); 
```

在 p.addPlot(myPlot); 希望这会帮助其他人，因为人，JavaPlot 上什么都没有

# c# - C# 多线程 - 同步的设置点

> ID：11365694
> 
> 赞同：2
> 
> 时间：2012-07-06T15:56:49.437
> 
> 标签：c#, multithreading, synchronization, mutex, semaphore

程序有 n 个线程（图形着色，一个线程负责一个节点）执行相同的代码。如何以这样的方式制作一个同步点：在n个线程中的每一个都达到这个点之前，没有一个线程可以通过那个点？想法类似于当线程到达特定位置时递增的计数器。在 C# 中解决它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:02:40.587

有多种方法可以做到这一点。

类`System.Threading.Barrier`(Fx4+) 似乎很合适，请参阅[障碍介绍](http://geekswithblogs.net/jolson/archive/2009/02/09/an-intro-to-barrier.aspx)

# download - LSF wget 不适用于 bsub

> ID：11365703
> 
> 赞同：2
> 
> 时间：2012-07-06T15:57:24.820
> 
> 标签：download, wget, lsf

我正在尝试通过他们的 lsf 系统在服务器上运行脚本以提交作业。当我在不使用 bsub 的情况下运行 wget 时，wget 成功下载了我要获取的文件。但是，当我在 bsub 中运行相同的命令时，作业会运行，但是无论我允许作业运行多长时间，wget 都会卡住（下载文件只需要大约 10 秒）。以下是我运行的命令：

```
wget ftp://ftp-trace.ncbi.nih.gov/1000genomes/ftp/data/NA19238/sequence_read/ERR000018.filt.fastq.gz #This one runs no problems.

bsub -q short -J wgettest -oo wtest.out -eo wtest.err wget ftp://ftp-trace.ncbi.nih.gov/1000genomes/ftp/data/NA19238/sequence_read/ERR000018.filt.fastq.gz #This one does not work. :( 
```

作业的stderr文件如下

--2012-07-05 20:57:59-- [ftp://ftp-trace.ncbi.nih.gov/1000genomes/ftp/data/NA192](ftp://ftp-trace.ncbi.nih.gov/1000genomes/ftp/data/NA192) 38/sequence_read/ERR000018.filt.fastq.gz => `ERR000018 .filt.fastq.gz' 正在解析 ftp-trace.ncbi.nih.gov... 130.14.250.10 正在连接到 ftp-trace.ncbi.nih.gov|130.14.250.10|:21... 已连接。以匿名身份登录... 登录不正确。

有没有人有什么建议？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-05T20:54:36.470

在 beowulf 集群中，将工作节点与外部网络断开是标准做法。当您使用 bsub 提交时，您的作业正在工作节点上运行，因此它无法访问 Internet。这就是为什么必须始终通过头节点之一建立与集群的连接。通常，您应该在提交作业之前在头节点（不带 bsub）上手动下载任何需要的文件。如果您必须能够从工作节点下载某些东西，则可以使用某种隧道，但您必须与集群管理员讨论这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T14:05:45.220

执行命令的机器很可能没有 Internet 访问权限。

这些命令在资源分配后的节点上运行。

检查您是否有可以与系统耦合的代理，然后通过它执行 wget。

# gwt - GWT SimplePager 未显示

> ID：11365705
> 
> 赞同：1
> 
> 时间：2012-07-06T15:57:27.413
> 
> 标签：gwt, uibinder

我正在尝试在我的应用程序中使用 SimplePager 并将其显示设置为实现 HasRows 的自定义小部件，但未显示 SimplePager。

这是 UiBinder 片段：

```
<g:LayoutPanel ui:field="mainPanel" styleName="{style.panel}">
    <!-- OTHER LAYERS CONTAINING DATA CONTAINERS (ROWS) -->
    <g:layer left="0%" width="30%" top="0px" height="200px">
        ...
    </g:layer>
    ...
    <!-- LAYER CONTAINING SimplePager -->
    <g:layer left="0px" right="0px" top="400px" height="50px">
        <cv:SimplePager ui:field="pager" />
    </g:layer>
</g:LayoutPanel> 
```

这是自定义小部件类：

```
public class MyCustomWidget extends Composite implements HasRows {

    private static final int NUM_ROWS = 3;

    private static MyCustomWidgetUiBinder uiBinder = GWT.create(MyCustomWidgetUiBinder.class);

    public interface MyCustomWidgetUiBinder extends UiBinder<Widget, MyCustomWidget> {
    }

    @UiField LayoutPanel mainPanel;
    @UiField(provided = true) SimplePager pager;

    public MyCustomWidget() {
        // create and initialize SimplePager
        SimplePager.Resources resources = GWT.create(SimplePager.Resources.class);
        pager = new SimplePager(TextLocation.CENTER, resources, false, 0, true);
        pager.setDisplay(this);
        pager.setPageSize(NUM_ROWS);
        initWidget(uiBinder.createAndBindUi(this));
    }
    ...
    // HasRows implementations, etc.
} 
```

数据正在显示，pager的hasNextPage()方法返回true，但是SimplePager没有显示。为什么？

# java - SQLiteOpenHelper 中的 onDowngrade() （或降级时不崩溃的另一种方法）

> ID：11365706
> 
> 赞同：4
> 
> 时间：2012-07-06T15:57:29.887
> 
> 标签：java, android, sqlite

对 Java 非常陌生。使用我的应用程序并决定将我的 DATABASE_VERSION 降回 1（没有真正的原因）。

当我启动该应用程序时，它崩溃了，其中一个错误是：

> E/AndroidRuntime(14905)：原因：android.database.sqlite.SQLiteException：无法将数据库从版本 17 降级到 4
> 
> E/AndroidRuntime(14905)：在 android.database.sqlite.SQLiteOpenHelper.onDowngrade(SQLiteOpenHelper.java:307)

我已经有一个`onUpgrade()`，我删除表然后运行`onCreate()`......所以我想我会做一个`onDowngrade()`：

```
@Override
public void onDowngrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    onUpgrade(db);
} 
```

但显然这不是我可以覆盖的超类方法。

有没有办法（希望是简单的方法）允许我将数据库版本更改为我想要的任何数字并让它仍然运行而不会立即崩溃？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T16:50:22.617

> 有没有办法（希望是简单的方法）允许我将数据库版本更改为我想要的任何数字并让它仍然运行而不会立即崩溃？

在开发中，只需通过“设置”中应用程序的“清除数据”按钮，或通过从设置中卸载应用程序，或擦除整个模拟器（如果这是一个模拟器）来删除你的数据库。您的数据库将在下次运行时通过调用`onCreate()`在您的`SQLiteOpenHelper`.

正如 rciovati 所说，在生产中，支持降级的概念仅在 API 级别 11 中引入，我从未亲自尝试过。

# jquery - Colorbox iframe - 仅加载特定的 div

> ID：11365710
> 
> 赞同：0
> 
> 时间：2012-07-06T15:57:38.907
> 
> 标签：jquery, iframe, colorbox

我正在使用 wordpress 和 jquery colorbox 插件，并且正在将我网站的内部页面加载到 iframe 中。我想要么只加载特定的 div ID，要么隐藏特定的 div ID 或类。我已经[从 iFrame 阅读了 Colorbox Load Specific div，](https://stackoverflow.com/questions/9025937/colorbox-load-specific-div-from-iframe)但不幸的是我无法让此代码正常工作，整个页面继续显示在 iframe 中。我的链接用 .colorbox-link 类标识，我试图只在 iframe 内显示#main 的 div。这是我放在 header.php 中的当前代码：

```
<script type="text/javascript">
    $(window).load(function () {
        var $iframe = $(".colorbox-link"); 
        $(".colorbox-link").colorbox({      
             href: $(".colorbox-link").attr('href') + " #main", 
        }); 
    }); 
</script> 
```

对不起，如果这是一个 jquery 新手问题 - 在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T02:23:21.853

在这种情况下，colorbox 不会在 iframe 中显示任何内容。iframe 不是 colorbox 所假设的，您必须将 colorbox 的 iframe 属性显式设置为 true 才能在 iframe 中显示某些内容。无论如何，在这种情况下，这不是你想做的事情。

您发布的代码应该可以工作（在那个杂散的逗号之外），所以也许您应该发布一个链接来展示您遇到的问题。还要仔细检查“#main”是否与您正在加载的文档中的元素匹配。

```
<script type="text/javascript">
    $(window).load(function () {
        $(".colorbox-link").colorbox({      
             href: function(){ return $(this).attr('href') + " #main";}
        }); 
    }); 
</script> 
```

# .net - UPS API (.Net) 中的请求和响应需要原始 XML

> ID：11365715
> 
> 赞同：0
> 
> 时间：2012-07-06T15:57:53.117
> 
> 标签：.net, xml, api, ups

这个问题的答案可能是显而易见的。但是需要一些帮助...

我目前正在使用 UPS API/Service 来生成测试标签。一切都很好。但要获得认证，我必须将请求和响应中的原始 XML 发送给 UPS。

我不是发送原始 xml，而是使用服务及其各种属性。发货结果中的某处是否返回了原始 XML？还是必须手动序列化请求和响应以满足 UPS 在审查中的要求？

这是我的代码（一切正常，我能够生成标签。但是我如何获取请求和响应 xml？）

```
try
        {
            ShipService shpSvc = new ShipService();
            ShipmentRequest shipmentRequest = new ShipmentRequest();
            UPSSecurity upss = new UPSSecurity();
            UPSSecurityServiceAccessToken upssSvcAccessToken = new UPSSecurityServiceAccessToken();
            upssSvcAccessToken.AccessLicenseNumber = s.APIKey;
            upss.ServiceAccessToken = upssSvcAccessToken;
            UPSSecurityUsernameToken upssUsrNameToken = new UPSSecurityUsernameToken();
            upssUsrNameToken.Username = s.Username;
            upssUsrNameToken.Password = s.Password;
            upss.UsernameToken = upssUsrNameToken;
            shpSvc.UPSSecurityValue = upss;
            RequestType request = new RequestType();

            String[] requestOption = { "nonvalidate" };
            request.RequestOption = requestOption;
            shipmentRequest.Request = request;                

    ShipmentType shipment = new ShipmentType();                
            ShipperType shipper = new ShipperType();
            shipper.ShipperNumber = s.ShipperAccountNumber;
            PaymentInfoType paymentInfo = new PaymentInfoType();

    ShipmentChargeType shpmentCharge = new ShipmentChargeType();
            BillShipperType billShipper = new BillShipperType();
            billShipper.AccountNumber = s.ShipperAccountNumber;
            shpmentCharge.BillShipper = billShipper;
            shpmentCharge.Type = "01";

    ShipmentChargeType[] shpmentChargeArray = { shpmentCharge };
            paymentInfo.ShipmentCharge = shpmentChargeArray;
            shipment.PaymentInformation = paymentInfo;
            ShipWebReference.ShipAddressType shipperAddress = new ShipWebReference.ShipAddressType();
            String[] addressLine = { s.ShipperAddressLine };

    shipperAddress.AddressLine = addressLine;
            shipperAddress.City = s.ShipperCity;
            shipperAddress.PostalCode = s.ShipperZip;
            shipperAddress.StateProvinceCode = s.ShipperState;
            shipperAddress.CountryCode = "US";
            shipperAddress.AddressLine = addressLine;
            shipper.Address = shipperAddress;
            shipper.Name = s.ShipperName;
            shipper.AttentionName = s.ShipperName;
            ShipPhoneType shipperPhone = new ShipPhoneType();
            shipperPhone.Number = s.ShipperPhone;
            shipper.Phone = shipperPhone;
            shipment.Shipper = shipper;
            ShipFromType shipFrom = new ShipFromType();

    ShipWebReference.ShipAddressType shipFromAddress = new ShipWebReference.ShipAddressType();
            String[] shipFromAddressLine = { s.ShipperAddressLine };
            shipFromAddress.AddressLine = addressLine;
            shipFromAddress.City = s.ShipperCity;
            shipFromAddress.PostalCode = s.ShipperZip;
            shipFromAddress.StateProvinceCode = s.ShipperState;
            shipFromAddress.CountryCode = "US";
            shipFrom.Address = shipFromAddress;
            shipFrom.AttentionName = s.ShipperName;
            shipFrom.Name = s.ShipperName;
            shipment.ShipFrom = shipFrom;

    ShipToType shipTo = new ShipToType();
            ShipToAddressType shipToAddress = new ShipToAddressType();
            String[] addressLine1 = { s.ShipToAddressLine };
            shipToAddress.AddressLine = addressLine1;
            shipToAddress.City = s.ShipToCity;
            shipToAddress.PostalCode = s.ShipToZip;
            shipToAddress.StateProvinceCode = s.ShipToState;
            shipToAddress.CountryCode = "US";
            shipTo.Address = shipToAddress;
            shipTo.AttentionName = s.ShipToName;
            shipTo.Name = s.ShipToName;

            ShipPhoneType shipToPhone = new ShipPhoneType();
            shipToPhone.Number = s.ShipToPhone;
            shipTo.Phone = shipToPhone;
            shipment.ShipTo = shipTo;
            ServiceType service = new ServiceType();

            service.Code = "03";
            shipment.Service = service;
            PackageType package = new PackageType();
            PackageWeightType packageWeight = new PackageWeightType();
            packageWeight.Weight = s.PackageWeight;
            ShipUnitOfMeasurementType uom = new ShipUnitOfMeasurementType();
            uom.Code = "LBS";
            packageWeight.UnitOfMeasurement = uom;
            package.PackageWeight = packageWeight;
            PackagingType packType = new PackagingType();
            packType.Code = "02";
            package.Packaging = packType;
            PackageType[] pkgArray = { package };
            shipment.Package = pkgArray;
            LabelSpecificationType labelSpec = new LabelSpecificationType();
            LabelStockSizeType labelStockSize = new LabelStockSizeType();
            labelStockSize.Height = "6";
            labelStockSize.Width = "4";
            labelSpec.LabelStockSize = labelStockSize;
            LabelImageFormatType labelImageFormat = new LabelImageFormatType();
            LabelDeliveryType labelDel = new LabelDeliveryType();
            labelDel.LabelLinksIndicator = "";
            labelImageFormat.Code = "GIF";

            PackageServiceOptionsType packServiceOptions = new PackageServiceOptionsType();
            PackageDeclaredValueType decType = new PackageDeclaredValueType();
            decType.CurrencyCode = "USD";
            decType.MonetaryValue = s.PackageValue;
            packServiceOptions.DeclaredValue = decType;
            package.PackageServiceOptions = packServiceOptions;

            labelSpec.LabelImageFormat = labelImageFormat;
            ShipmentTypeShipmentServiceOptions shipServOpt = new ShipmentTypeShipmentServiceOptions();

            shipment.ShipmentServiceOptions = shipServOpt;

            shipmentRequest.LabelSpecification = labelSpec;
            shipmentRequest.Shipment = shipment;

            System.Net.ServicePointManager.CertificatePolicy = new TrustAllCertificatePolicy();
            Console.WriteLine(shipmentRequest);

            shipmentResponse = shpSvc.ProcessShipment(shipmentRequest);               

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:50:54.410

我遇到了同样的问题，幸运的是我解决了这个问题；）

你需要一些东西来注册一个 SOAP 扩展：

```
 [ReflectionPermission(SecurityAction.Demand, Unrestricted = true)]
    public static void RegisterSoapExtension(Type type, int priority, PriorityGroup group)
    {
        if (!type.IsSubclassOf(typeof(SoapExtension)))
        {
            throw new ArgumentException("Type must be derived from SoapException.", "type");
        }

        if (priority < 1)
        {
            throw new ArgumentOutOfRangeException("priority", priority, "Priority must be greater or equal to 1.");
        }

        // get the current web services settings...  
        WebServicesSection wss = WebServicesSection.Current;

        // set SoapExtensionTypes collection to read/write...  
        FieldInfo readOnlyField = typeof(System.Configuration.ConfigurationElementCollection).GetField("bReadOnly", BindingFlags.NonPublic | BindingFlags.Instance);
        readOnlyField.SetValue(wss.SoapExtensionTypes, false);

        // inject SoapExtension...  
        //wss.SoapExtensionTypes.Add(new SoapExtensionTypeElement(type, priority, group));

        System.Web.Services.Configuration.SoapExtensionTypeElement soapInterceptor = new SoapExtensionTypeElement();
        soapInterceptor.Type = type;
        soapInterceptor.Priority = priority;
        soapInterceptor.Group = group;
        wss.SoapExtensionTypes.Add(soapInterceptor);

        // set SoapExtensionTypes collection back to readonly and clear modified flags...  
        MethodInfo resetModifiedMethod = typeof(System.Configuration.ConfigurationElement).GetMethod("ResetModified", BindingFlags.NonPublic | BindingFlags.Instance);
        resetModifiedMethod.Invoke(wss.SoapExtensionTypes, null);
        MethodInfo setReadOnlyMethod = typeof(System.Configuration.ConfigurationElement).GetMethod("SetReadOnly", BindingFlags.NonPublic | BindingFlags.Instance);
        setReadOnlyMethod.Invoke(wss.SoapExtensionTypes, null);
    } 
```

您需要定义实际的扩展名：

```
/// <summary>
/// SOAP Extension that traces the SOAP request and
/// SOAP response to a SOAP API Web service. 
/// </summary>
public class TraceExtension : SoapExtension
{
    private Stream oldStream;
    private Stream newStream;

    private static XmlDocument xmlRequest;

    /// <summary>
    /// Gets the outgoing XML request
    /// </summary>
    public static XmlDocument XmlRequest
    {
        get { return xmlRequest; }
    }

    private static XmlDocument xmlResponse;

    /// <summary>
    /// Gets the incoming XML response
    /// </summary>
    public static XmlDocument XmlResponse
    {
        get { return xmlResponse; }
    }

    /// <summary>
    /// Save the Stream representing the SOAP request
    /// or SOAP response into a local memory buffer. 
    /// </summary>
    /// <param name="stream"></param>
    /// <returns></returns>
    public override Stream ChainStream(Stream stream)
    {
        oldStream = stream;
        newStream = new MemoryStream();
        return newStream;
    }

    /// <summary>
    /// If the SoapMessageStage is such that the SoapRequest or
    /// SoapResponse is still in the SOAP format to be sent or received,
    /// save it to the xmlRequest or xmlResponse property.
    /// </summary>
    /// <param name="message"></param>
    public override void ProcessMessage(SoapMessage message)
    {
        switch (message.Stage)
        {
            case SoapMessageStage.BeforeSerialize:
                break;
            case SoapMessageStage.AfterSerialize:
                xmlRequest = GetSoapEnvelope(newStream);
                CopyStream(newStream, oldStream);
                break;
            case SoapMessageStage.BeforeDeserialize:
                CopyStream(oldStream, newStream);
                xmlResponse = GetSoapEnvelope(newStream);
                break;
            case SoapMessageStage.AfterDeserialize:
                break;
        }
    }

    /// <summary>
    /// Returns the XML representation of the Soap Envelope in the supplied stream.
    /// Resets the position of stream to zero.
    /// </summary>
    /// <param name="stream"></param>
    /// <returns></returns>
    private XmlDocument GetSoapEnvelope(Stream stream)
    {
        var xml = new XmlDocument();
        stream.Position = 0;
        var reader = new StreamReader(stream);
        xml.LoadXml(reader.ReadToEnd());
        stream.Position = 0;
        return xml;
    }

    /// <summary>
    /// Copies a stream.
    /// </summary>
    /// <param name="from"></param>
    /// <param name="to"></param>
    private void CopyStream(Stream from, Stream to)
    {
        TextReader reader = new StreamReader(from);
        TextWriter writer = new StreamWriter(to);
        writer.WriteLine(reader.ReadToEnd());
        writer.Flush();
    }

    /// <summary>
    /// Included only because it must be implemented.
    /// </summary>
    /// <param name="methodInfo"></param>
    /// <param name="attribute"></param>
    /// <returns></returns>
    public override object GetInitializer(LogicalMethodInfo methodInfo,
                                          SoapExtensionAttribute attribute)
    {
        return null;
    }

    /// <summary>
    /// Included only because it must be implemented.
    /// </summary>
    /// <param name="WebServiceType"></param>
    /// <returns></returns>
    public override object GetInitializer(Type WebServiceType)
    {
        return null;
    }

    /// <summary>
    /// Included only because it must be implemented.
    /// </summary>
    /// <param name="initializer"></param>
    public override void Initialize(object initializer)
    {
    }

} 
```

然后你需要注册扩展：

```
RegisterSoapExtension(typeof(TraceExtension), 1, 0); 
```

最后，在您的请求/响应完成后，您需要保存 XML：

```
TraceExtension.XmlRequest.Save(@"c:\temp\ForwardRequest.xml");
TraceExtension.XmlResponse.Save(@"c:\temp\ForwardResponse{0}.xml"); 
```

警告：这实际上是我过去通过 UPS 认证的内容，但此代码只使用过一次。因此，它可能不是最好的质量、漂亮或其他非常有用的东西，除了那一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T21:04:30.033

对于那些像我一样挣扎的人，如果您的 Request 和 Respose 都为 Null，则需要在实例化 ShipService 之前注册扩展。

TraceExtension.RegisterSoapExtension(typeof(TraceExtension), 1, 0); ShipService shpSvc = new ShipService();

希望这对某人有帮助:)

# wpf - WPF 4 资源

> ID：11365718
> 
> 赞同：2
> 
> 时间：2012-07-06T15:58:09.970
> 
> 标签：wpf, resources

我有一个让我困惑的问题。我正在为我的 MCP 学习（使用 .Net 4 测试 70-511 Windows App. Dev.），并且我在资源部分和更改代码中的资源。这是直接来自书中的引述（自定进度培训套件）：

> 如果资源引用的对象在代码中发生更改，则使用该资源的对象的行为会有所不同，具体取决于引用资源的方式。当资源在代码中更改时，使用*DynamicResource*标记引用的资源使用新对象。*使用StaticResource*标记引用资源的对象继续使用它们最初从*Resources*集合中检索到的对象，并且不知道更改。

话虽如此，他们让您解决的问题之一是 XAML 问题。这是该问题的代码：

```
<Window x:Class="Window1"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  Title="Window1" Height="300" Width="300">
  <Window.Resources>
    <SolidColorBrush Color="Red" x:Key="ForegroundBrush" />
    <SolidColorBrush Color="Blue" x:Key="BackgroundBrush" />
  </Window.Resources>
  <Grid>
    <Button Background="{StaticResource BackgroundBrush}"
       Foreground="{DynamicResource ForegroundBrush}" Height="23"
       Margin="111,104,92,0" Name="Button1"
       VerticalAlignment="Top">Button</Button>
  </Grid>
</Window> 
```

问题是：*执行以下代码时，按钮的颜色会发生什么变化？*

```
SolidColorBrush aBrush = new SolidColorBrush(Colors.Green);
this.Resources["ForegroundBrush"] = aBrush;
SolidColorBrush bBrush;
bBrush = (SolidColorBrush)this.Resources["BackgroundBrush"];
bBrush.Color = Colors.Black 
```

答案选择是：

1.  没发生什么事。
2.  背景变为黑色。
3.  前景变为绿色。
4.  2和3都有。

本书给出的答案是 4 2 和 3。

我的困境/困惑是：如果书中指出动态资源将更改以反映代码中所做的更改，而静态资源将继续使用他们最初检索的对象，那么为什么背景和前景上面代码/XAML 示例中的按钮更改？我已经尝试过了，他们都改变了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:21:48.513

让我们把它分成两部分：

1）这里**的参考改变了**：

```
SolidColorBrush aBrush = new SolidColorBrush(Colors.Green);
this.Resources["ForegroundBrush"] = aBrush; 
```

2）这里**的参考保持不变，但你改变了一个属性**（颜色）：

```
SolidColorBrush bBrush;
bBrush = (SolidColorBrush)this.Resources["BackgroundBrush"];
bBrush.Color = Colors.Black 
```

请记住，在框架 (WPF) 的背后，有像你我一样可以编写的常规代码。
您在此处看到的行为非常类似于 ObservableCollections 的行为：

如果您使用`ObservableCollection`as `ItemsSource`of an `ItemsControl`，然后执行以下操作：

```
myBoundObsCollection = new ObservableCollection<object>(); 
```

[除非您提出PropertyChanged](http://msdn.microsoft.com/fr-fr/library/system.componentmodel.inotifypropertychanged%28v=vs.95%29.aspx)，否则绑定不会刷新。

这是一个小样本，测试移动线：

```
Mycol = new ObservableCollection<string>(); 
```

在构造函数之前/之后`InitializeComponent()`，看看会发生什么。

```
public partial class MainWindow : Window
    {
        public MainWindow()
        {
            this.DataContext = this;
            Mycol = new ObservableCollection<string>();
            InitializeComponent();

            Mycol.Add("this");
            Mycol.Add("is");
            Mycol.Add("a");
            Mycol.Add("test");
        }

        public ObservableCollection<string> Mycol { get; set; }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            Mycol = new ObservableCollection<string>();
            Mycol.Add("??");
        }
    } 
```

和 XAML：

```
<Window x:Class="ObsColTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <ListBox ItemsSource="{Binding Mycol}" />
        <Button Content="Click me!"  Click="Button_Click"/>
    </StackPanel>
</Window> 
```

然后，当您单击按钮时，请注意`ListBox`它没有更新，即使它必然会彻底改变的集合！

但是，如果您只是修改了集合，那么无论您是否`PropertyChanged`在集合上提出了新行，都会显示新行。
你的`Color`财产也是如此`SolidColorBrush`。

DynamicResource 可以解决这个问题：最重要的是，如果您更改资源的任何属性，它将反映在 UI 上，如果您更改引用，它也会反映在 UI 上。

请记住，它使 DynamicResource （[稍微？](https://stackoverflow.com/questions/2248904/is-there-a-significant-performance-cost-to-dynamicresource-instead-of-staticreso)）性能低于 StaticResource ；）

# mysql - mysql查询返回整体排名

> ID：11365721
> 
> 赞同：1
> 
> 时间：2012-07-06T15:58:17.057
> 
> 标签：mysql

我有一个包含以下数据的用户表：

```
+----+------------+--------------+--------------+- -------------+
| 编号 | 姓名 | points_game1 | 积分游戏2 | points_game3 |
+----+------------+--------------+--------------+- -------------+
| 1 | 玩家 1 | 10 | 0 | 5 |
| 2 | 玩家 2 | 0 | 25 | 0 |
| 3 | 玩家 3 | 30 | 3 | 0 |
| 4 | 玩家 4 | 0 | 0 | 20 |
+----+------------+--------------+--------------+- -------------+

```

我希望能够显示总体排名，其中排名被定义为总体最高分，而不是每场比赛的排名。因此，在上面的示例中，我将使用什么查询来显示此结果：

```
+----+------------+--------+----------------+
| 编号 | 姓名 | 分数 | 游戏 |
+----+------------+--------+----------------+
| 3 | 玩家 3 | 30 | points_game1 |
| 2 | 玩家 2 | 25 | 积分游戏2 |
| 4 | 玩家 4 | 20 | points_game3 |
| 1 | 玩家 1 | 10 | points_game1 |
+----+------------+--------+----------------+

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:39:56.157

以下查询回答了您的问题：

```
SELECT 
  id, 
  name, 
  GREATEST(points_game1, points_game2, points_game3) AS score,
  CASE
    WHEN points_game1 = GREATEST(points_game1, points_game2, points_game3) THEN 'points_game1'
    WHEN points_game2 = GREATEST(points_game1, points_game2, points_game3) THEN 'points_game2'
    WHEN points_game3 = GREATEST(points_game1, points_game2, points_game3) THEN 'points_game3'
  END AS game
FROM
  users
ORDER BY 
  3 DESC 
```

由于 GREATEST(...) 计算的重复性，有点粗糙。您可能希望将其放在子查询中。

在任何情况下，请注意此查询不会使用表上的任何索引，因为 ORDER BY 使用列上的函数——这否定了 MySQL 中键的使用。

# c#-4.0 - 迭代时从字典中删除项目

> ID：11365725
> 
> 赞同：3
> 
> 时间：2012-07-06T15:58:31.997
> 
> 标签：c#-4.0, dictionary

我有问题`Dictionary(buzzCompaignsPerUserIntersets)`。我有字典（key = stringand value = ICollection），我想从每个键的值中删除，这里验证条件的活动是我使用的代码：

```
buzzCompaignsPerUserIntersets = Dictionary<string, ICollection<Buzzcompaign> ;

foreach(var dic_compaign in buzzCompaignsPerUserIntersets)
{

     var listCompaign = buzzCompaignsPerUserIntersets[dic_compaign.Key];
     for (int i = 0; i < listCompaign.Count(); i++)
     {
         if (listCompaign.ElementAt(i).MayaMembership.MayaProfile.MayaProfileId == profile_id)
                         buzzCompaignsPerUserIntersets[dic_compaign.Key].Remove(listCompaign.ElementAt(i));         
      }                
} 
```

使用这段代码，我得到了一个奇怪的结果，因为我遍历了一个从中删除元素的字典。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:09:37.297

使用`ElementAt(i)`不是获得特定项目的理想方式，并且表现不佳。它的用法表明您需要一个带有索引器的集合，例如`IList<T>`.

使用您当前的设置，您可以使用这种方法：

```
foreach(var key in buzzCompaignsPerUserIntersets.Keys)
{
     var list = buzzCompaignsPerUserIntersets[key];
     var query = list.Where(o => o.MayaMembership
                                  .MayaProfile.MayaProfileId == profile_id)
                     .ToArray();
     foreach (var item in query)
     {
         list.Remove(item);
     }
} 
```

或者，如果您可以将 更改为 ，则`ICollection<T>`可以`IList<T>`使用索引器和`RemoveAt`方法。看起来像这样：

```
foreach(var key in buzzCompaignsPerUserIntersets.Keys)
{
     var list = buzzCompaignsPerUserIntersets[key];
     for (int i = list.Count - 1; i >= 0; i--)
     {
         if (list[i].MayaMembership.MayaProfile.MayaProfileId == profile_id)
         {
             list.RemoveAt(i);
         }
     }
} 
```

A`List<T>`会让你使用该`RemoveAll`方法。如果您对它的工作原理感兴趣，请查看[我对另一个问题的回答](https://stackoverflow.com/a/1582317/59111)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:48:30.847

尝试这样的事情

```
foreach(var dic_compaign in buzzCompaignsPerUserIntersets) 
{ 
   buzzCompaignsPerUserIntersets[dic_compaign.Key].RemoveAll(
     dic_campaign.Value.FindAll(
       delegate(ListCampaignType item) 
       { return item.MayaMembership.MayaProfile.MayaProfileId == profile_id; })
   );
} 
```

ListCampaignType 是字典中的值类型。

基本上，您无法更改正在迭代的集合，因此执行上述操作的方法很长。

```
foreach(var dic_compaign in buzzCompaignsPerUserIntersets) 
{ 
   List<ListCampaignType> itemstoremove = new List<ListCampaignType>();
   foreach(var item in buzzCompaignsPerUserIntersets[dic_compaign.Key])
   {
      if (item.MayaMembership.MayaProfile.MayaProfileId == profile_id)
      {
         itemstoremove.Add(item);
      }
   }
   buzzCompaignsPerUserIntersets[dic_compaign.Key].RemoveAll(itemstoremove);
} 
```

# jquery - mySQL if X > Y 不保存信息

> ID：11365726
> 
> 赞同：0
> 
> 时间：2012-07-06T15:58:33.927
> 
> 标签：jquery

我有一个存储从 API 返回的信息的函数。

我已经有一个 if 语句告诉用户返回调用的准确性太低。但是我该如何为我的 mysql 语句做同样的事情呢？

```
if(tag.uid == 0) s += "I got something, but the data wasn't clear. Sorry.";
     if(tag.confidence < 80) {
      s += "<li>User identification accuracy was too low, please try again</li>";
    }
     else if(tag.uid) { s += "<li> User:" + uid + "</li>";
     if(tag.uid) s += "<li> Accuracy:" + tag.confidence + "%" + "</li>";
     if(tag.uid) s += "<li> Timestamp:" + log_time + "</li>";
    }

    } 
    if(photo.tags.length) {
      if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
      }
      xmlhttp.open("GET", "mysql/save.php?uid=" + tag.uid + "&month=" + month + "&day=" + day + "&hours=" + hours + "&min=" + min + "&suffix=" + suffix + "&accuracy=" + tag.confidence,  true);
      xmlhttp.send();
    } 
```

我认为它与前面的语句几乎相同，但不知道如何编写错误语句，因为我不想提醒用户错误，只是在准确率提高之前不保存任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:12:38.183

没关系，其实很简单。

```
if(photo.tags.length) {
      var tag = photo.tags[0].uids[0];
      s += "<p>";
     //$('#result') .html ('Welcome Back:' + photo.uid + ',' + 'Confidence:' + photo.confidence);
     if(tag.uid == 0) s += "I got something, but the data wasn't clear. Sorry.";
     if(tag.confidence < 80) 
      {
      s += "<li>User identification accuracy was too low, please try again</li>";
      }
     else if(tag.uid) { 
       s += "<li> User:" + uid + "</li>";
       if(tag.uid) s += "<li> Accuracy:" + tag.confidence + "%" + "</li>";
       if(tag.uid) s += "<li> Timestamp:" + log_time + "</li>";
       if (window.XMLHttpRequest) 
        {
          xmlhttp = new XMLHttpRequest();
        }
        xmlhttp.open("GET", "mysql/save.php?uid=" + tag.uid + "&month=" + month + "&day=" + day + "&hours=" + hours + "&min=" + min + "&suffix=" + suffix + "&accuracy=" + tag.confidence,  true);
        xmlhttp.send();
      }
    } 
```

# android - Android - 从另一个资源获取资源 ID

> ID：11365729
> 
> 赞同：0
> 
> 时间：2012-07-06T15:58:52.110
> 
> 标签：android, resources, drawable

假设我有一个 drawable ：

```
foo.png 
```

在我的程序中的某个时刻，它接收两个可能的字符串键之一：“img_foo1”或“img_foo2”，我想用它们来检索相同的“foo”可绘制对象。

所以我尝试通过以下方式从其他两个资源访问drawable：

```
<drawable name="img_foo1">@drawable/foo</drawable>
<drawable name="img_foo2">@drawable/foo</drawable> 
```

然后我认为我可以将 getResources().getIdentifier() 与这些键名一起使用，但是这给了我 img_foo1 和 img_foo2 的 ID，而不是可绘制 foo 的 ID。

有什么方法可以获取这些资源所引用的资源 ID？

**编辑：**

我这样做的原因是因为我从无法控制的外部来源接收这些密钥。我唯一能做的是以某种方式将已知键映射到相应的可绘制对象以绘制正确的图像（因为不同的键可能使用相同的图像）。

我可以使用可以使用应用程序初始化的静态集合来实现这一点，但是我正在尝试帮助我处理资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:54:01.823

使用[`getValue()`](http://developer.android.com/reference/android/content/res/Resources.html#getValue%28int,%20android.util.TypedValue,%20boolean%29), 传递`false`最后一个参数。我想你现在可以在你现在可以检索到的 id 中获得`@drawable/foo`引用`TypedValue`。我没试过；如果你试一试，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:53:10.560

好吧，不是完全干净，但与此同时我设法通过以下方式获得了可绘制的 ID：

```
int keyId = getResources().getIdentifier(key, "drawable", getPackageName());

int drawableId = getResources().getIdentifier(getString(keyId).replace("res/","").replace(".png",""),null,getPackageName()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:12:06.957

你能解释一下你为什么要这样做吗？您通常根本不会使用字符串。此外，我不熟悉使用这样的可绘制对象。

据我所知，您只想拥有一个 foo.png 的可绘制对象。如果您想在各种布局中使用它，那很好 - 只需使用图像视图。对于所有资源，您需要跟踪程序中的整数值（R.drawable.foo 等）。

# amazon-s3 - 如何（安全地）使用 cloudinit 将私有 S3 资产下载到新的 EC2 实例上？

> ID：11365730
> 
> 赞同：17
> 
> 时间：2012-07-06T15:59:04.100
> 
> 标签：amazon-s3, amazon-web-services, amazon-cloudformation, cloud-init

我正在使用 CloudFormation 管理 Tomcat 网络服务器堆栈，但厌倦了为新应用程序版本进行原始 AMI 管理。我想朝大厨的方向前进，但现在没有时间。相反，我试图解决网络服务器实例化中的一个简单问题：当新机器启动时，如何下载“当前”WAR？

我的想法是使用私有 S3 存储桶和 cloudinit，但我对如何处理 IAM 凭证感到有些困惑。我可以将它们放入模板的用户数据中，但我不愿意这样做，特别是因为我正在控制该文件的版本。我能想到的唯一选择是在 AMI 本身中使用环境变量。它们必须是纯文本的，但是……嗯，如果你能闯入我的实例，你可以压缩并下载我的整个网络服务器。只要 IAM 用户不被重复用于其他任何事情并且定期轮换，这似乎是解决问题的合理方法。我错过了什么吗？如何使用 cloudinit 安全地下载私有 S3 资产？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T20:46:21.303

Amazon 最近宣布了一项新功能，您可以在其中为您的 EC2 实例提供“IAM 角色”。这使得允许特定实例具有读取特定 S3 资源的权限变得相当容易。

这是他们宣布新功能的博客文章：

[http://aws.typepad.com/aws/2012/06/iam-roles-for-ec2-instances-simplified-secure-access-to-aws-service-apis-from-ec2.html](http://aws.typepad.com/aws/2012/06/iam-roles-for-ec2-instances-simplified-secure-access-to-aws-service-apis-from-ec2.html)

这是 EC2 文档中的部分：

[http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/UsingIAM.html#UsingIAMrolesWithAmazonEC2Instances](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/UsingIAM.html#UsingIAMrolesWithAmazonEC2Instances)

这是 IAM 文档中的部分：

[http://docs.amazonwebservices.com/IAM/latest/UserGuide/WorkingWithRoles.html](http://docs.amazonwebservices.com/IAM/latest/UserGuide/WorkingWithRoles.html)

IAM 角色通过 HTTP 向实例提供凭证，因此在实例上运行的任何用户或进程都可以看到它们。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-02T15:33:54.333

稍微更新一下这个问题的答案：

与 IAM 角色一起，新的[AWS 命令​​行客户端](http://aws.amazon.com/cli/ "AWS 命令​​行客户端")使获取这些资产变得轻而易举。它将自动从环境中提取通过 IAM 授予的 AWS 凭证并处理这些凭证的刷新。

以下是从用户数据脚本中的安全 S3 存储桶获取单个资产的示例：

```
# Install the AWS command-line tools
pip install awscli

# Fetch the asset
aws s3 cp --region us-east-1 s3://my-private-bucket/a-folder/an-asset.zip /some/destination 
```

就那么简单。您还可以从 S3 复制整个目录内容并上传等。有关更多详细信息和选项，请参阅[参考资料](http://docs.aws.amazon.com/cli/latest/reference/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T14:45:19.423

具有 IAM 角色的实例具有自动轮换的临时安全凭证。它们可以通过 http at 获得`http://169.254.169.254/latest/meta-data/iam/security-credentials/RoleName`，其中 RoleName 是您所称的角色。因此，它们很容易从您的实例中获取，但它们会定期过期。

使用它们有点困难。CloudFormation 不能直接使用临时凭证。Amazon Linux AMI 安装了 Python boto，它现在足够智能，可以自动为您查找和使用这些凭证。这是一个单行程序，您可以将其放入脚本中以从 S3 存储桶**b**获取文件，将密钥**k**放入本地文件**f**：

```
python -c "import boto;boto.connect_s3().get_bucket('b').get_key('k').get_contents_to_filename('f')" 
```

boto 为您查找并使用该角色的临时凭证，这使得它非常易于使用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-05T23:37:05.110

要安全地将私有 S3 资产下载到新的 EC2 实例上，您应该使用EC2 的[IAM 角色](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html)向您的 EC2 实例授予必要的 S3 权限，然后调用[`aws s3 cp`](http://docs.aws.amazon.com/cli/latest/reference/s3/cp.html)您实例的[UserData](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html#cfn-ec2-instance-userdata) [cloudinit 脚本](https://cloudinit.readthedocs.io/en/latest/topics/format.html#user-data-script)来下载资产。

要从 CloudFormation 模板为 EC2 设置 IAM 角色，请使用[`AWS::IAM::InstanceProfile`](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-instanceprofile.html)资源，引用具有[`AWS::IAM::Role`](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html)对 的`AssumeRolePolicyDocument`委派访问权限的资源`ec2.amazonaws.com`，以及旨在[授予最低权限](http://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege)的策略（在这种情况下，`'s3:GetObject'`仅允许下载特定的 S3 资产）。

这是一个完整的示例模板，它使用 cloudinit 将 S3 资产下载到新的 EC2 实例上，并将其内容作为[堆栈输出](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/outputs-section-structure.html)返回：

[![启动堆栈](../Images/cdd74e8962d0bd8161420e0433b29dd8.png)](https://console.aws.amazon.com/cloudformation/home#/stacks/new?stackName=S3Asset&templateURL=https://s3.amazonaws.com/wjordan-cf-templates/11365730-S3Asset.yml)

```
Description: (securely) download a private S3 asset onto a new EC2 instance with cloudinit
Parameters:
  S3Bucket:
    Description: S3 bucket name
    Type: String
  S3Key:
    Description: S3 object key
    Type: String
Mappings:
  # amzn-ami-hvm-2016.09.1.20161221-x86_64-gp2
  RegionMap:
    us-east-1:
      "64": "ami-9be6f38c"
Resources:
  EC2Role:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
        - Effect: Allow
          Principal: {Service: [ ec2.amazonaws.com ]}
          Action: ["sts:AssumeRole"]
      Path: /
      Policies:
      - PolicyName: EC2Policy
        PolicyDocument:
          Version: 2012-10-17
          Statement:
          - Effect: Allow
            Action: ['s3:GetObject']
            Resource: !Sub 'arn:aws:s3:::${S3Bucket}/${S3Key}'
  RootInstanceProfile:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: /
      Roles: [ !Ref EC2Role ]
  WebServer:
    Type: AWS::EC2::Instance
    Properties:
      ImageId: !FindInMap [ RegionMap, !Ref "AWS::Region", 64 ]
      InstanceType: m3.medium
      IamInstanceProfile: !Ref RootInstanceProfile
      UserData:
        "Fn::Base64":
          !Sub |
            #!/bin/bash
            DATA=$(aws s3 cp s3://${S3Bucket}/${S3Key} -)
            /opt/aws/bin/cfn-signal \
              -e $? \
              -d "$DATA" \
              '${Handle}'
  Handle:
    Type: AWS::CloudFormation::WaitConditionHandle
  Wait:
    Type: AWS::CloudFormation::WaitCondition
    Properties:
      Handle: !Ref Handle
      Timeout: 300
Outputs:
  Result:
    Value: !GetAtt Wait.Data 
```

# c# - MVC 模型/上下文工作流

> ID：11365734
> 
> 赞同：0
> 
> 时间：2012-07-06T15:59:26.473
> 
> 标签：c#, asp.net-mvc, model, telerik

又一个 MVC 问题。

我正在开发一个 Web 应用程序工具，它​​可以处理很多数据库请求等。而这一页让我在 MVC 中遇到了很多困难。

我之前在 C# 中创建了页面，这就是它的样子 ![数据搜索](../Images/ee3c2ee35b005778605581483bc8211f.png)

您最多可以显示 4 个彼此相邻的网格以比较值。

现在在 MVC 中，我正在考虑以这种方式解决问题：

![流程图](../Images/ca10eee1103995a2a2f783e29450b4b8.png)

但是，我总是收到通常基于连接问题的随机错误消息......我尝试了很多不同的东西，这就是为什么我的代码现在有点混乱，但这里是最重要的部分。（示例只有 2 个选项）

**看法**

通过 MainDDL1、SubDDL1、Search1、MainDDL2、SubDDL2、Search2（这工作）

**控制器**

```
public PartialViewResult getGrid1(string MainDDL1, string SubDDL1, string Search1)
    {
        DataSearchModel voModel = new DataSearchModel();
        voModel.dtResultSet1 = DLA.DataSearchContext.getResultSet1(MainDDL1, SubDDL1, Search1);
        return PartialView(MainDDL1, voModel);
    }

public PartialViewResult getGrid2(string MainDDL2, string SubDDL2, string Search2)
{
    DataSearchModel voModel = new DataSearchModel();
    voModel.dtResultSet2 = DLA.DataSearchContext.getResultSet2(MainDDL2, SubDDL2, Search2);
    return PartialView(MainDDL2, voModel);
}

public ViewResult DataSearch(string text)
{
    DataSearchModel oModel = new DataSearchModel();
    oModel.alMainDDL = DLA.DataSearchContext.getMainDDL();

    return View(oModel);
} 
```

我真的不喜欢我必须使用 dtResultSet1 和 dtResultSet2 而不是仅仅调用相同的方法。为什么我不能只调用 getResultSet、dtResultSet 等？！由于我创建了新模型，模型应该有自己的方法吗？或者是一个模型不能与一个对象相提并论。

**模型**

dtResultSet1、dtResultSet2、搜索字符串等的声明。

**语境**

```
 public static DataTable getResultSet1(string sChoice, string sFeat, string sSearch)
        {
            return setResultSet1(sChoice, sFeat, sSearch);
        }

private static DataTable setResultSet1(string sChoice, string sFeat, string sSearch)
        {

            DataTable dtTemp = new DataTable();
            string sQuery = setSqlQuery(sChoice, sFeat, sSearch);

            OleDbConnection dbConnection = null;
            // Instantiate the Connection Object
            dbConnection = new OleDbConnection(ConfigurationManager.ConnectionStrings["OracleDataBase"].ConnectionString);

            //dbConnection.Open();
            dbConnection.Open();

            OleDbCommand dbCommand = null;
            // Instantiate the Command Object
            dbCommand = new OleDbCommand(sQuery, dbConnection);
            dbCommand.CommandType = CommandType.Text;

            OleDbDataReader dr = null;
            // Execute the Stored Procedure
            dr = dbCommand.ExecuteReader();

            dtTemp = setResultSetRows(dtTemp, sChoice, dr);

            dr.Dispose();
            dbConnection.Close();

            return dtTemp;
        }

private static string setSqlQuery(string sChoice, string sFeat, string sSearch)
        {
            switch (sChoice)
            {
                case "T_PRCL":
                case "T_PRCL_FEA":
                case "T_GIS_PRCL":
                    return "SELECT * FROM " + sChoice + " WHERE " + sFeat + "='" + sSearch + "' and sys_del_flag = 0";
                case "SGD_SFC_FEAT":
                case "MSURFACE":
                case "SGD_MIN_FEAT":
                case "MMINERAL":
                    return "SELECT * FROM " + sChoice + " WHERE " + sFeat + "='" + sSearch + "' AND EXPIRY_DATE is NULL";
                case "V_SURFACE":
                case "V_MINERAL":
                    return "SELECT * FROM " + sChoice + " WHERE " + sFeat + "='" + sSearch + "'";
                default:
                    return "SELECT sysdate as UNKNOWN_ERROR from dual";
            }
        } 
```

2\. 的方法完全相同。在这里，我更愿意将所有内容放在一个名为 getResultSet 的静态方法中。此外，我确实将连接作为全局变量（OleDBConnection = null 等），连接等是自己的方法。每当连接重叠时，这给了我更多的随机错误。通常，如果一个 Reader 在另一个 Reader 之前完成。我不明白，因为它们是不同的模型（对象），他们不应该使用自己的独立变量，对象吗？！

我希望有人可以对此有所启发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:43:22.780

在 Pabloker 的 Tipp 检查[连接管理 ASP.net](https://stackoverflow.com/questions/342613/connection-management-asp-net)之后，我能够解决我的问题。

这是本准则最重要的部分。

**语境**

```
public class MyConnectionManager : IDisposable
        {
            [ThreadStatic] // static per thread
            private static OleDbConnection con;

            public static OleDbConnection Connection
            {
                get
                {
                    if (con == null)
                    {
                        con = new OleDbConnection(ConfigurationManager.ConnectionStrings["OracleDataBase"].ConnectionString);
                        con.Open();
                    }
                    return con;
                }
            }

            public void Dispose()
            {
                if (con != null)
                {
                    con.Close();
                }
            }
        }

private static DataTable setResultSet(string sChoice, string sFeat, string sSearch)
        {
            DataTable dtTemp = new DataTable();
            string sQuery = setSqlQuery(sChoice, sFeat, sSearch);

            // Instantiate the Command Object
            OleDbCommand dbCommand = new OleDbCommand(sQuery, MyConnectionManager.Connection);
            dbCommand.CommandType = CommandType.Text;

            // Execute the Stored Procedure
            OleDbDataReader dr = dbCommand.ExecuteReader();

            dtTemp = setResultSetRows(dtTemp, sChoice, dr);

            return dtTemp;

    }

        public static DataTable getResultSet(string sChoice, string sFeat, string sSearch)
        {
            return setResultSet(sChoice, sFeat, sSearch);
        } 
```

**模型**

```
public DataTable dtResultSet { get; set; } 
```

**控制器**

```
public PartialViewResult getGrid1(string MainDDL1, string SubDDL1, string Search1)
{
    DataSearchModel voModel = new DataSearchModel();
    voModel.dtResultSet = DLA.DataSearchContext.getResultSet(MainDDL1, SubDDL1, Search1);
    return PartialView(MainDDL1, voModel);
}

public PartialViewResult getGrid2(string MainDDL2, string SubDDL2, string Search2)
{
    DataSearchModel voModel = new DataSearchModel();
    voModel.dtResultSet = DLA.DataSearchContext.getResultSet(MainDDL2, SubDDL2, Search2);
    return PartialView(MainDDL2, voModel);
} 
```

**看法**

```
<script type="text/javascript">

    $(document).ready(function () {

        $.ajaxSetup({
            error: function (xhr, status, error) {
                alert("An AJAX error occured: " + status + "\nError: " + error);
            }
        });

        $('#btnSubmit').click(function () {
            var time = new Date().getTime(); // @* unique random number to workaround IE cache issue - IE will cache the ajax if you don't use this *@
            var oMainDDL1 = $('#MainDDL1').data("tComboBox");
            var oSubDDL1 = $('#SubDDL1').data("tComboBox");
            var sSearch1 = $("#Search1").val();

            var oMainDDL2 = $('#MainDDL2').data("tComboBox");
            var oSubDDL2 = $('#SubDDL2').data("tComboBox");
            var sSearch2 = $("#Search2").val();

            var actionURL = '@Url.Action("getGrid1", "DataSearch", new { MainDDL1 = "PLACEHOLDER" })'.replace('PLACEHOLDER', oMainDDL1.value()) + "&SubDDL1=" + oSubDDL1.value() + "&Search1=" + sSearch1 + "&time=" + time;
            if (actionURL != null) {
                alert('actionURL');
                $.get(actionURL, function (data) {
                    $('#result1').fadeOut('slow', 'linear', function () { $('#result1').empty(); $('#result1').append(data); });
                    $('#result1').fadeIn('slow', 'linear', function () {
                        if ($.browser.msie) {
                            this.style.removeAttribute('filter'); // @* Needed to fix IE7 cleartype bug with jQuery fade, but will crap out on FF/Chrome *@
                        }
                    });
                });
            }

            actionURL = '@Url.Action("getGrid2", "DataSearch", new { MainDDL2 = "PLACEHOLDER" })'.replace('PLACEHOLDER', oMainDDL2.value()) + "&SubDDL2=" + oSubDDL2.value() + "&Search2=" + sSearch2 + "&time=" + time;
            if (actionURL != null) {
                alert('actionURL');
                $.get(actionURL, function (data) {
                    $('#result2').fadeOut('slow', 'linear', function () { $('#result2').empty(); $('#result2').append(data); });
                    $('#result2').fadeIn('slow', 'linear', function () {
                        if ($.browser.msie) {
                            this.style.removeAttribute('filter'); // @* Needed to fix IE7 cleartype bug with jQuery fade, but will crap out on FF/Chrome *@
                        }
                    });
                });
            }
        });
    });

    function onMainDDL1Change(e) {
        var combo = $("#SubDDL1").data("tComboBox");
        combo.value("");
        combo.reload();
    }

    function onSubDDL1DataBinding(e) {
        var combo = $("#MainDDL1").data("tComboBox");
        e.data = $.extend({}, e.data, { mainDDL1ID: combo.value() });
    }

    function onMainDDL2Change(e) {
        var combo = $("#SubDDL2").data("tComboBox");
        combo.value("");
        combo.reload();
    }

    function onSubDDL2DataBinding(e) {
        var combo = $("#MainDDL2").data("tComboBox");
        e.data = $.extend({}, e.data, { mainDDL2ID: combo.value() });
    }
</script>

<table>
    <tr>
        <td>
            @(Html.Telerik().ComboBox()
                .Name("MainDDL1")
                .AutoFill(true)
                .DataBinding(binding => binding.Ajax().Select("LoadMainDDL", "DataSearch"))
                .HighlightFirstMatch(true)
                .ClientEvents(events => events.OnChange("onMainDDL1Change"))
                )
        </td>
        <td>
            @(Html.Telerik().ComboBox()
                .Name("MainDDL2")
                .AutoFill(true)
                .DataBinding(binding => binding.Ajax().Select("LoadMainDDL", "DataSearch"))
                .HighlightFirstMatch(true)
                .ClientEvents(events => events.OnChange("onMainDDL2Change"))
                )
        </td>
    </tr>
    <tr>
        <td>
            @(Html.Telerik().ComboBox()
                .Name("SubDDL1")
                .DataBinding(binding => binding.Ajax().Select("LoadSubDDL1", "DataSearch"))
                .HighlightFirstMatch(true)
                .ClientEvents(events => events.OnDataBinding("onSubDDL1DataBinding"))
                )
        </td>
        <td>
            @(Html.Telerik().ComboBox()
                .Name("SubDDL2")
                .DataBinding(binding => binding.Ajax().Select("LoadSubDDL2", "DataSearch"))
                .HighlightFirstMatch(true)
                .ClientEvents(events => events.OnDataBinding("onSubDDL2DataBinding"))
                )
        </td>
    </tr>
    <tr>
        <td>
            @Html.TextBox("Search1")
        </td>
        <td>
            @Html.TextBox("Search2")
        </td>
    </tr>
    <tr align="center">
        <td colspan="4">
        <input type="button" class="t-button button1" value="Search" id="btnSubmit" />
        </td>
    </tr>
</table>

<div id="result1">
</div>
<div id="result2">
</div> 
```

**局部视图 - 示例**

```
@model ...DataSearchModel

@(Html.Telerik().Grid(Model.dtResultSet)
.Name("Grid")
.Footer(false)
.Columns(columns =>
{
columns.Bound(o => o.Row[0]).Title("T_PRCL");
})) 
```

# android - 从数字时钟小部件中删除秒和 AM/PM

> ID：11365737
> 
> 赞同：4
> 
> 时间：2012-07-06T15:59:42.303
> 
> 标签：android

我想从数字时钟小部件中删除秒和 AM/PM 指示，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T16:43:10.777

它在 DigitalClock 类中是硬编码的，因此您不能以编程方式对其进行更改。改变它的唯一方法是重新实现 DigitalClock 小部件。哟可以从[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/DigitalClock.java)获取源代码。

您需要将此代码复制到您的项目中，将其重命名为“MyDigitalClock”并将其用作您的小部件。正如您将在实现中看到的那样，您应该关注两个变量以获得您想要的：

```
private final static String m12 = "h:mm:ss aa";
private final static String m24 = "k:mm:ss"; 
```

ss 代表秒，aa 代表上午/下午。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T00:39:36.907

您可以使用 addTextChangedListener()，然后在 afterTextChanged() 中取出秒数和 AM/PM。此示例仅删除秒数：

```
DigitalClock dc = (DigitalClock) findViewById(R.id.currentTime);
    dc.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
            if (s.charAt(4) == ':') {
                s.delete(4, 7);
            } else if (s.charAt(5) == ':') {
                s.delete(5, 8);
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-10T00:48:27.980

让我一点点扩展和刷新[Erol](https://stackoverflow.com/users/1380723/erol)的完美答案。

实际上，您需要在项目中添加一个文件并更新 xml 布局。

可以从这里获取示例：[/frameworks/base/core/java/android/widget/DigitalClock.java](http://androidxref.com/6.0.1_r10/xref/frameworks/base/core/java/android/widget/DigitalClock.java)

改编**的 DigitalClock.java**：

```
import android.content.Context;
import android.database.ContentObserver;
import android.os.Handler;
import android.os.SystemClock;
import android.provider.Settings;
import android.text.format.DateFormat;
import android.util.AttributeSet;
import android.widget.TextView;

import java.text.SimpleDateFormat;
import java.util.Calendar;

/**
 * Like AnalogClock, but digital.  Shows seconds.
 *
 * @deprecated It is recommended you use {@link TextClock} instead.
 */
@Deprecated
public class DigitalClock extends TextView {
    // FIXME: implement separate views for hours/minutes/seconds, so
    // proportional fonts don't shake rendering

    Calendar mCalendar;
    @SuppressWarnings("FieldCanBeLocal") // We must keep a reference to this observer
    private FormatChangeObserver mFormatChangeObserver;

    private Runnable mTicker;
    private Handler mHandler;

    private boolean mTickerStopped = false;

    java.text.DateFormat mFormat;

    public DigitalClock(Context context) {
        super(context);
        initClock();
    }

    public DigitalClock(Context context, AttributeSet attrs) {
        super(context, attrs);
        initClock();
    }

    private void initClock() {
        if (mCalendar == null) {
            mCalendar = Calendar.getInstance();
        }

        mFormatChangeObserver = new FormatChangeObserver();
        getContext().getContentResolver().registerContentObserver(
                Settings.System.CONTENT_URI, true, mFormatChangeObserver);

        setFormat();
    }

    @Override
    protected void onAttachedToWindow() {
        mTickerStopped = false;
        super.onAttachedToWindow();
        mHandler = new Handler();

        /**
         * requests a tick on the next hard-second boundary
         */
        mTicker = new Runnable() {
            public void run() {
                if (mTickerStopped) return;
                mCalendar.setTimeInMillis(System.currentTimeMillis());
//                setText(DateFormat.format(mFormat, mCalendar));
                setText(mFormat.format(mCalendar.getTime()));
                invalidate();
                long now = SystemClock.uptimeMillis();
                long next = now + (1000 - now % 1000);
                mHandler.postAtTime(mTicker, next);
            }
        };
        mTicker.run();
    }

    @Override
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        mTickerStopped = true;
    }

    private void setFormat() {
//      mFormat = DateFormat.getTimeFormatString(getContext());  //<== ORIGINAL
//        mFormat = DateFormat.getTimeFormat(getContext());      //<== Fixed with PM
//        mFormat = new SimpleDateFormat("hh:mm a");
        mFormat = new SimpleDateFormat("h:mm");                  //<== Your variant
    }

    private class FormatChangeObserver extends ContentObserver {
        public FormatChangeObserver() {
            super(new Handler());
        }

        @Override
        public void onChange(boolean selfChange) {
            setFormat();
        }
    }

    @Override
    public CharSequence getAccessibilityClassName() {
        //noinspection deprecation
        return DigitalClock.class.getName();
    }
} 
```

**布局.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".HomeActivity" >

    <HERE_YOUR_PACKAGE_NAME.DigitalClock
        android:id="@+id/digitalClock"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/background_light"
        android:layout_centerInParent="true"
        android:textSize="130dp"/>

</RelativeLayout> 
```

结果：

[![在此处输入图像描述](../Images/f6c4bb6933ac3e6204e8e85ac03d6c15.png)](https://i.stack.imgur.com/4gd0W.png)

# c++ - 为 while、if 和 for 语句获取用户定义类的对象值

> ID：11365738
> 
> 赞同：2
> 
> 时间：2012-07-06T15:59:44.223
> 
> 标签：c++

我正在尝试从用户定义的对象中获取布尔值。例如使用 float 或 int 我可以做类似的事情

```
float a = 3.5
if (a) doSomething(); 
```

我希望我的班级看起来像这样：

```
class Socket {
...
...
};
...
Socket T;

if (!T) cout << "Error occured";
else {
   doStuff();
} 
```

当然我可以定义一个返回bool的函数（比如bool isValid();）并直接调用它，但是我想知道是否可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:03:58.940

在 C++11 中，您可以安全地将类型转换为布尔值：

```
explicit operator bool() const {return isValid();} 
```

如果您的编译器不支持它，那么您*可以*`explicit`在没有;的情况下编写相同的东西。但是，这可能有点危险，因为它可以隐式转换为任何数字类型。相反，您可以使用一种称为[安全 bool idiom](http://www.artima.com/cppsource/safebool.html)的技巧：

```
private:
    typedef void (Socket::*safe_bool)() const;
    void safe_true() const {}
public:
    operator safe_bool() const {return isValid() ? &Socket::safe_true : 0;} 
```

这将返回一个指针类型，它不能转换为除 之外的任何东西`bool`。

# latex - 如何在 Emacs 的 0rg 模式下取消 \hypersetup

> ID：11365739
> 
> 赞同：10
> 
> 时间：2012-07-06T15:59:53.583
> 
> 标签：latex, org-mode

Org-mode 是一个强大的编辑器。我用它来写科学笔记并将它们制作成 tex/PDF 文件。

当我将 .org 文件生成 .tex 或 .pdf 文件时，org-mode 会自动生成一些代码，例如：

```
 \hypersetup{
    pdfkeywords={},
    pdfsubject={},
    pdfcreator={Emacs Org-mode version 7.8.11}} 
```

这些代码使一些信息占据了PDF文件的第一页，这对我来说毫无用处。如何防止这些代码出现在生成的 tex 文件及其 PDF 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-01T00:05:08.440

我在我的初始化文件中使用它：

`(setq org-latex-with-hyperref nil)`

然后你必须把你自己的超级设置放在你想要的地方。

# c++ - 具有多个可访问参数的 C++ 中的访问者模式

> ID：11365741
> 
> 赞同：5
> 
> 时间：2012-07-06T15:59:56.960
> 
> 标签：c++, visitor-pattern, double-dispatch

考虑以下层次结构：

```
class Base
{
   virtual void Method() = 0;
   virtual void Accept(Visitor *iVisitor) = 0;
};
class Derived1: public Base
{
   virtual void Method(){//impl}
   virtual void Accept(Visitor *iVisitor)
   {
        iVisitor->Visit(this);
   }
};
class Derived2: public Base
{
   virtual void Method(){//impl}
   virtual void Accept(Visitor *iVisitor)
   {
       iVisitor->Visit(this);
   }
}; 
```

和访客类：

```
class VisitorInterface
{
    virtual void Visit(Derived1 * param);
    virtual void Visit(Derived2 * param);
}
class Visitor: public VisitorInterface
{
    void Visit(Derived1 * param){}
    void Visit(Derived2 * param){}
} 
```

通常当重载方法依赖于参数类型时，我使用访问者模式来实现双重调度，但我只有指向基类的指针。

例如：

```
void foo(Visitor *visitorPtr, Base * basePtr)
{
    basePtr->Accept(visitorPtr);    
} 
```

我认为这是实现双重调度的唯一方法，因为虚拟函数的动态绑定应该只发生在调用方法的对象上，而不是其参数（派生类型）上。

现在我遇到了一个新情况，我需要一种在多个参数上重载的 Visit 方法。像这样的东西：

```
class VisitorInterfaceMultiple
{
    virtual void Visit(Derived1 * param1, Derived2 * param2);
    virtual void Visit(Derived2 * param1, Derived3 *param2);
} 
```

我不能使用经典的访问者模式解决方案，因为仅在其中一个参数上调用了接受方法。

我的问题是：是否存在任何类似的访问者模式解决方案或类似的东西，我可以在这种情况下使用？（我需要用确切的 2 个参数重载 Visit，不超过 2 个）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T22:15:35.647

我为您创建了“三重”调度模式：http: [//ideone.com/FoXNW](http://ideone.com/FoXNW) 这很容易。主要部分如下：

```
class Derived1;
class Derived2;
class Visitor;
class Base
{
public:
   virtual void Accept(Visitor &iVisitor, Base& param1) = 0;
   virtual void Accept(Visitor &iVisitor, Derived1& param2) = 0;
   virtual void Accept(Visitor &iVisitor, Derived2& param2) = 0;
};

class Visitor
{
public:
    virtual void Visit(Derived1 & param1, Derived1 &param2) { cout << "11\n"; }
    virtual void Visit(Derived1 & param1, Derived2 &param2) { cout << "12\n"; }
    virtual void Visit(Derived2 & param1, Derived1 &param2) { cout << "21\n"; }
    virtual void Visit(Derived2 & param1, Derived2 &param2) { cout << "22\n"; }
};

class Derived1: public Base
{
public:
   virtual void Accept(Visitor &iVisitor, Base& param1) 
   { param1.Accept(iVisitor, *this); }
   virtual void Accept(Visitor &iVisitor, Derived1& param2)
   { iVisitor.Visit(*this, param2); }
   virtual void Accept(Visitor &iVisitor, Derived2& param2)
   { iVisitor.Visit(*this, param2); }
};
class Derived2: public Base
{
public:
   virtual void Accept(Visitor &iVisitor, Base& param1) 
   { param1.Accept(iVisitor, *this); }
   virtual void Accept(Visitor &iVisitor, Derived1& param2)
   { iVisitor.Visit(*this, param2); }
   virtual void Accept(Visitor &iVisitor, Derived2& param2)
   { iVisitor.Visit(*this, param2); }
};

void Visit(Visitor& visitor, Base& param1, Base& param2)
{
   param2.Accept(visitor, param1);
} 
```

请注意，Derived1 和 Derived2 的实现实际上是相同的。如果您有更多派生，您可以将其包含在宏中。

# jquery - 如何在 ASP.NET MVC 3 中为 Ipad 创建自定义 jquery 脚本

> ID：11365742
> 
> 赞同：0
> 
> 时间：2012-07-06T16:00:03.357
> 
> 标签：jquery, asp.net-mvc-3, ipad

我有一个 ASP MCV 3 应用程序，我想使用 iPad 访问它。但是我遇到了一些在平板电脑上不起作用的 jquery 脚本问题。我设法找到了一种创建自定义视图的方法，如果用户使用 iPad 打开应用程序，就会显示这些视图。

有没有办法对 jQuery 文件做同样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:04:16.447

是的，将页面中插入脚本的部分移动到检查 Razor 部分的块中，并在那里加载脚本。

将您的新脚本声明放在备用视图中，并且仅在正在呈现的页面上不存在该部分时呈现标准 jQuery 脚本（在布局中）。

```
@if (IsSectionDefined("CustomScripts")) {
    RenderSection("CustomScripts", false);
}
else
{
   // put in your normal scripts/css here
} 
```

干杯。

# c++ - 命名构造函数和临时生命周期延长

> ID：11365747
> 
> 赞同：2
> 
> 时间：2012-07-06T16:00:32.560
> 
> 标签：c++, named-constructor

我正在寻找一种定义“基础”构造函数的方法，它将使用默认值初始化值，然后将该基础扩展到许多专门的构造函数。

我想要的伪代码可能如下所示：

```
class Foo{
private:
    int val;
    /* ... */

public:
    // Base constructor
    Foo(){ /*...*/ }           // This provides basic initialization of members

    // Named constructors
    static Foo fromString(string s){
        Foo f;                 // Call base constructor
        f.val = s.length();    // Customize base object
        return f;              // Return customized object
    }
    static Foo fromInt(int v){
        Foo f;
        f.val = v;
        return f;
    }
} 
```

起初，我考虑[延长临时的生命周期`f`](https://stackoverflow.com/questions/2616107/returning-object-from-function)，但 const 声明阻止我编辑它的成员。所以这似乎已经结束了。

然后我尝试了[“命名构造函数”](http://www.parashift.com/c++-faq-lite/named-ctor-idiom.html)方法（如上所示）。但是，我必须先修改示例以创建对象，然后修改它，然后返回它。这似乎可行，但我有理由相信这只是巧合，因为它`f`是暂时的，并且在函数结束时超出了范围。

我也考虑过使用`auto_ptr`s 之类的东西，但是我同时使用 Foo 对象以及`auto_ptr`s 到 Foo，这使得其余代码“关心”对象是否是通过基本构造函数创建的（在这种情况下它将是一个对象）或通过扩展构造函数之一（在这种情况下它将是一个指针）。

如果它有帮助，在 Python 中，我会使用这样的东西：

```
class Foo(object):
    def __init__(self):
        /* Basic initialization */

    @classmethod
    def fromString(cls, s):
        f = Foo() #†
        f.val = len(s)
        return f 
```

最后，我想这样做有两个原因：

1.  代码重用，我想将公共初始化从每个构造函数中移出并移入一个。我意识到我可以`init()`通过每个构造函数调用的 -type 私有方法来做到这一点，但我只想提一下。
2.  清晰并解决歧义。与命名构造函数示例的动机非常相似，参数类型本身不足以确定应该使用哪个 ctor。此外，`fromSomething`语法提供了极好的清晰度。

如果有一个简单的解决方案，请原谅我，过去几年我的工作已经从 c++ 转移到 Java/Python，所以我有点生疏了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T16:06:22.490

这是完全有效的：

```
static Foo fromInt(int v){
    Foo f;
    f.val = v;
    return f;
} 
```

这会在您返回时调用`Foo`的复制构造函数`f`（可能编译器会应用[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)，因此不会制作副本）。`f`超出范围，但返回值只是它的副本，所以这是完全有效的，它的工作不仅仅是“巧合”。

因此，如果您担心使用命名构造方法只是因为您不知道它是否有效，请继续使用它，它可以完美运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:07:10.187

在 C++11 中，您可以从构造函数中调用其他构造函数：

```
struct X{
  X() : ... { ... }
  X(int i) : X() { ... }
  X(std::string s) : X() { ... }
}; 
```

对于 C++03，命名构造函数方法可能是最好的和完全合理的，恕我直言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:06:01.133

为什么不：

```
class Foo{
private:
    int val;
    void Init(int v = <some default value>/*What ever here *));
    /* ... */

public:
    // Base constructor
    Foo(){ Init(); }           // This provides basic initialization of 
    Foo(string &s) { Init(s.length); };
    Foo(int v) { Init(v); };
}; 
```

看起来更简单。

# java - Java 对象从另一个实例中获取变量？

> ID：11365748
> 
> 赞同：1
> 
> 时间：2012-07-06T16:00:32.633
> 
> 标签：java, oop, variables

我不太确定该怎么称呼它，但本质上，当我运行此代码时：

```
public class test {

    static Device one;
    static Device two;

    public static void main(String[] args) throws Exception {

        one = new Device("One", "ONE");
        System.out.println(one.getName());
        two = new Device("Two", "TWO");

        System.out.println(one.getName());
        System.out.println(two.getName());

    }
} 
```

输出是：

```
ONE  
TWO
TWO 
```

什么时候应该：

```
ONE
ONE
TWO 
```

设备对象非常简单，它只接收两个字符串，第二个是我要求它打印的“名称”。我以前做过OOP，但我觉得我只是忘记了一些重要的方面，但似乎无法弄清楚。任何帮助表示赞赏，谢谢！

这是设备构造函数：

```
public Device(String iP, String Name) {
    //Set the IP address
    IP = iP;
    //Set the device's name
    name = Name;
    // Set the string version of the device (for transmitting)
    stringVersion = IP + ";" + name;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T16:05:29.410

看起来您也使用过`static`字段`Device`。这些不是实例字段。`static`应避免使用可变字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:09:02.207

从评论：

> 显示整个 Device 类。IP 和名称是静态的吗？– assylias 2 分钟前
> 
> 对，他们是

每当您实例化一个新实例时，您的设备静态成员就会重新初始化，`Device`这就是您获得该行为的原因。你可以拥有`one`and `two`as`static`但你不应该拥有可变成员变量`static`

# c# - HttpWebRequest GetResponseStream 是如何工作的

> ID：11365749
> 
> 赞同：0
> 
> 时间：2012-07-06T16:00:32.903
> 
> 标签：c#, .net

假设我创建了一个`HttpWebRequest`并调用它的`GetResponseStream`方法。当我尝试读取流时，是否所有数据都已复制到本地缓冲区，或者当它通过线路时它是否通过读取它来工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:00:28.657

[`Stream`](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)GetResponseStream 方法返回抽象类的特定实现，它是一个[`NetworkStream`](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx). 这种类型的流绑定到一个套接字。它是一个指向 TCP/IP 套接字流的指针。如果服务器已向其写入了一些数据，当客户端开始从此流中读取数据时，它将仅读取套接字上可用的数据，如果您尝试读取的数据多于当前可用的数据，则会阻塞，直到服务器写入更多数据到插座。

因此，如果我们假设服务器已经将 5 个字节写入套接字，如果您尝试从客户端的流中读取 5 个字节，您将能够检索这 5 个字节，但如果您尝试读取 6 个字节，则读取操作将阻塞，直到服务器再发送一个字节或超时。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T16:10:14.967

如果您查看[该示例](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream.aspx)，您会发现您需要先致电`.GetResponse()`，这将回答您的问题。

# mysql - Mysql 从月份字符串列中选择下个月

> ID：11365751
> 
> 赞同：0
> 
> 时间：2012-07-06T16:00:37.913
> 
> 标签：mysql

如果我有一个名为“月”的列包含实际月份名称的字符串表示，我如何选择下个月的记录？

```
SELECT * FROM minutes WHERE year = YEAR(CURDATE()) AND month = 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:04:05.557

明白了，没关系：

```
SELECT * FROM  minutes WHERE year = YEAR(CURDATE()) AND month = MONTHNAME(now() + INTERVAL 1 MONTH) 
```

# objective-c - 组合谓词以获得低于恒定值的最大值

> ID：11365756
> 
> 赞同：0
> 
> 时间：2012-07-06T16:00:51.153
> 
> 标签：objective-c, ios, core-data, nspredicate

我有一个包含日期的核心数据实体（例如 2011-03-30、2011-06-30、2011-09-30）。

您如何建议我指定一个 NSPredicate 来获取最大日期，该日期低于指定日期（2011-08-17），例如查询`date <= 2011-08-17 AND date = @max`应该返回 2011-06-30（这是最高日期但不超过给定的日期）。

你能帮我做谓词吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:12:56.817

您可以使用简单的小于或等于谓词，将顺序设置为降序并将获取配置为仅返回单个结果。

# java - 如何从 HTML Web 应用程序查询远程 oracle 数据库？

> ID：11365757
> 
> 赞同：1
> 
> 时间：2012-07-06T16:00:52.483
> 
> 标签：java, javascript, database, oracle, html

我正在设计一个 HTML 5 的 Web 应用程序。我需要使用特定查询查询远程 oracle 数据库（我拥有所有凭据），然后在网页中显示结果。实现这一目标的最佳方法是什么？我有一个 java 应用程序，它查询我的数据库并为我显示信息（目前尚未解析）。是否可以使用 JavaScript 从这个 java 应用程序中获取信息并通过 HTML 显示它？我已经为此寻找解决方案，但我仍然不清楚。我想避免使用 PHP，因为它似乎需要在数据库服务器上安装。从架构的角度来看，我只是不确定我应该如何去做。你能引导我完成常用方法的步骤吗？我会做所有的研究。到目前为止，这就是我的想法，所以我

HTML 5 <-> JavaScript <-> Java <-> Oracle 数据库

这甚至可能吗？

肯尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:30:51.340

由于您已经开发了使用数据库的 Java 代码，因此您可以使用相同的应用程序逻辑并创建 JSP 页面。如果您已经了解 HTML 和 Java，JSP 很容易学习。

这里有一个简短的教程 - [JSP 快速指南](http://www.tutorialspoint.com/jsp/jsp_quick_guide.htm)(tutorialspoint.com)

基本上，JSP 页面很像 HTML 页面，但您可以在其中插入 Java 代码。Java 代码在服务器中执行，当涉及到客户端时，JSP 变成了纯 HTML 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:43:51.083

如果您的 HTML5 + CSS + JavaScript 代码只需要向服务器发送数据库请求（并自行呈现），那么与 Oracle 数据库通信的简单方法是

*   小服务程序
*   JAX-RS (RESTful) Web 服务

在 Java EE（Web Profile）应用服务器上。

在这两种情况下，您都可以重用现有的 Java / JDBC 数据库访问代码，并将数据简单地序列化为 JSON，这可以在您的 JavaScript 代码中使用。

# eclipse - 我是否误解了 OSGI Bundles 中 Export-Package 的用法？

> ID：11365759
> 
> 赞同：0
> 
> 时间：2012-07-06T16:00:58.890
> 
> 标签：eclipse, eclipse-plugin, osgi, eclipse-3.6

我正在开发一个需要访问类的插件`org.eclipse.swt.widgets.Display`。此类包含在`org.eclipse.swt.win32.win32.x86_3.5.2.v3557f-RCP20100710-0200.jar`. 但是，该类也由清单导出，`com.ibm.rcp.jfaceex_6.2.2.20100729-1241`如下所示：

```
Export-Package: com.ibm.rcp.jface.action,com.ibm.rcp.jface.launcher,co
 m.ibm.rcp.jface.themes,com.ibm.rcp.jface.util,com.ibm.rcp.jface.viewe
 rs,com.ibm.rcp.jface.window,com.ibm.rcp.jface.window.effects,com.ibm.
 rcp.ui.widgets.api.jface,com.ibm.rcp.ui.widgets.api.swt
Require-Bundle: com.ibm.rcp.swtex,org.eclipse.swt,org.eclipse.core.run
 time,org.eclipse.jface,org.eclipse.ui 
```

现在，`com.ibm.rcp.jfaceex`不包含在我的 JRE 系统库中*。*但是，它是一个包，其中包含自己的类以及上面的导出包。

我被引导相信在我自己的项目中我需要做的就是在我自己的项目的构建路径中包含对它的引用，但这似乎不起作用。编译器无法针对`org.eclipse.swt.widgets`包中的类解析导入语句。

如果我需要这些类，我究竟需要做什么才能*正确*导入它们，并且工作量最少？

**注意**我们没有使用 Maven 或任何第三方构建工具。这是管理层规定的，我无法更改。

**更新**

根据下面 E-Riz 的建议，我添加`org.eclipse.swt`到插件的 Dependencies 选项卡的 Required Bundles 部分。然后，我尝试按如下方式导出项目：

1.  右键单击项目，选择导出。
2.  选择插件开发 -> 可部署的插件和片段
3.  全选，然后点击完成

Eclipse 构建项目，然后告诉我有错误。检查日志会发现以下错误：

```
1\. ERROR in E:\NotesDev\Plug-in\com.ibm.lotuslabs.ui\src\com\ibm\lotuslabs\ui\UI.java (at line 1)
    /**
    ^
The type org.eclipse.swt.widgets.Shell cannot be resolved. It is indirectly referenced from required .class files 
```

我的代码中有很多这样的代码；每个对 org.eclipse.swt 命名空间包中的类或方法的引用。这一点，尽管捆绑包调试得很好！

**更新 2**

事实上，我发现您*可以*将绝对路径放入`Bundle-Classpath`in 中`MANIFEST.MF`。奇怪的是，这使得编译时错误消失了。在这一点上，我不相信这是正确的做法，因为绝对路径肯定不能保证与最终用户的配置相对应。

但是，将插件安装到 Notes（目标平台）中并没有按预期工作。

Notes 报告插件安装成功，但插件（工具栏的一个补充）没有出现。在这一点上，我假设类路径的某些内容仍然不正确。

**更新 3**

根据请求，`MANIFEST.MF`和`build.properties`文件。请注意绝对路径是 Eclipse 通过 Dependencies 和 Runtime 选项卡添加的。

**`MANIFEST.MF`：**

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Context Plug-in
Bundle-SymbolicName: com.ibm.lotuslabs.context.service;singleton:=true
Bundle-Version: 1.0.2
Bundle-Vendor: IBM
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Bundle-Activator: com.ibm.lotuslabs.context.service.internal.ContextPlugin
Bundle-ActivationPolicy: lazy
Bundle-ClassPath: context.jar,
 lib/activation-1.1.1.jar,
 lib/mail.jar,
 lib/SatuitCRM_XML_API2.jar,
 lib/commons-lang3-3.1/commons-lang3-3.1.jar,
 E:/NotesDev/Notes/framework/rcp/eclipse/plugins/org.eclipse.swt.win32.win32.x86_3.5.2.v3557f-RCP20100710-0200.jar
Require-Bundle: org.eclipse.core.runtime,
 org.eclipse.ui,
 org.eclipse.ui.views,
 org.eclipse.swt,
 com.ibm.rcp.swtex,
 com.ibm.rcp.jfaceex,
 com.satuit.core 
Export-Package: com.ibm.lotuslabs.context.service.document,
 com.ibm.lotuslabs.context.service.internal
Import-Package: org.eclipse.core.resources 
```

**`build.properties`：**

```
output.. = bin/
bin.includes = META-INF/,\
               context.jar,\
               lib/activation-1.1.1.jar,\
               lib/mail.jar,\
               lib/commons-lang3-3.1.jar,\
               lib/SatuitCRM_XML_API2.jar,\
               plugin.xml,\
               E:/NotesDev/Notes/framework/rcp/eclipse/plugins/org.eclipse.swt.win32.win32.x86_3.5.2.v3557f-RCP20100710-0200.jar
jars.compile.order = context.jar
source.context.jar = src/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:42:03.923

仅仅因为一个包在其`Export-Package`声明中命名一个包并不一定意味着它*包含*该包的代码。一个包可以从它所依赖的包中导出包（尽管我认为在大多数情况下这通常是一个坏主意）。

对您来说，解决方案很简单：在您`MANIFEST.MF`转到 Dependendencies 选项卡并添加`org.eclipse.swt`到**所需插件列表中**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:08:00.433

不太确定，但我想到了两件事。

*   从项目类路径中删除 jar 并将 com.ibm.rcp.jfaceex jar 添加到目标平台（Preferences->PDE->Target platform 并指向包含 com.ibm.rcp.jfaceex jar 的目录）

*   或者留下引用并将 jar 添加到您的包类路径（在清单的运行时选项卡上）

它不太清楚这将如何导致*此*错误，但类路径问题可以在 PDE 中以奇怪的方式表现出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:34:31.720

我查看了 eclipse juno 中的 swt 相关包：org.eclipse.swt_3.100.0.v4233d.jar org.eclipse.swt.win32.win32.x86_3.100.0.v4233d.jar

小部件位于第二个包中，这是第一个包的片段。

因此，您必须确保两个捆绑包都在目标平台中。我不确定 require bundle 在这种情况下是否有效（它可能有效）。您可以尝试导入您需要的所有包。特别是您需要在包 org.eclipse.swt.widgets 上使用 Import-Package。

# objective-c - Apple 示例代码：多个详细信息视图

> ID：11365761
> 
> 赞同：0
> 
> 时间：2012-07-06T16:01:01.577
> 
> 标签：objective-c, uiviewcontroller

我刚刚下载了苹果相同的代码多个细节视图。

[http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html)

我一直在尝试弄清楚它是如何工作的，到目前为止我只有一个问题：当我创建自己的文件/视图时，菜单按钮不存在。

![带有菜单按钮的默认第一个视图控制器](../Images/c5c3cf9d2e2264cda58babd4b06e373b.png) 带有菜单按钮的默认第一个视图控制器

![我创建的第三个视图的下拉菜单](../Images/e5090dfc4c724e6fa54121d6136b3db9.png) 我创建的第三个视图的下拉菜单

![我创建的第三个视图，没有菜单按钮](../Images/ff9025ffc53a75a162e243ba85fc3d2d.png) 我创建的第三个视图，没有菜单按钮

我浏览了界面构建器，默认视图没有按钮。然后我在 RootViewController 中找到了一个显示按钮的方法。

我的问题是我找不到前 2 个视图调用该方法以显示该按钮的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:11:27.387

在这里回答我自己的问题：

最后，您所要做的就是将视图和工具栏链接到文件的所有者。[您可以在此处](https://stackoverflow.com/questions/11368581/set-up-a-basic-split-view-based-application/11368582#11368582)查看有关如何执行此操作的教程（在第 3c 部分中）

# javascript - 在 FireFox 中，“Location.prototype”不是“真的”继承自“Object.prototype”？

> ID：11365762
> 
> 赞同：2
> 
> 时间：2012-07-06T16:01:05.430
> 
> 标签：javascript, internet-explorer, firefox, google-chrome, location

我测试了 Location 对象并有一些疑问；Location.prototype 并没有真正继承 "Object" 的属性；例如

```
Object.prototype.testProperty = 5; 
```

然后，如果我们检索“location.testProperty”，我们只会得到“未定义”；理论上location是“Location”的实例，Location.prototype链接到Object，所以期望继承Object.prototype的所有属性；但在FF中，这条规则被打破了。我不知道为什么？有人知道原因吗？顺便说一下，这样的测试在 IE / Chrome 中没有问题

# objective-c - AFHTTPClient - 解析响应对象

> ID：11365764
> 
> 赞同：4
> 
> 时间：2012-07-06T16:01:23.910
> 
> 标签：objective-c, ios, nsurlconnection, nsxmlparser, afnetworking

我刚开始使用 AFNetworking，我正在尝试学习如何正确使用它。我将其子类化并使用正确的基本 URL`AFHTTPClient`创建了我自己的。 我正在使用 HTTP POST 请求与我的服务器进行通信，并使用 xml 进行服务器响应。`MyAppClient`

为了发送请求，我这样做：

```
 [[MyAppClient sharedClient] postPath:somePath parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {

    // need to parse the data here...

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //
    NSLog(@"%@", [error localizedDescription]);
}]; 
```

几个问题：

1.  `AFHTTPClient`如果无论如何它使用`NSURLConnection`不阻塞主线程 的异步操作，为什么还要使用操作？

2.  在获得需要解析的数据后，我现在是否应该创建一个新操作来解析数据？
    在我看来，在操作中也解析数据然后返回解析的对象会更好吗？

3.  在同一主题中，我有一个自定义的通用 XMLParser 类，它获取 a`NSData`并将其解析为`NSDictionary`，并且我想将它用于所有响应，如何将它集成到中`AFHTTPClient` `AFHTTPRequestOperation`以便响应已经被解析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T21:39:29.843

> 如果 AFHTTPClient 使用不阻塞主线程的异步 NSURLConnection ，为什么还要使用操作？

这实际上是一个很好的问题。

事实上，一个可行的“HTTPRequestOperation”类并不都需要从`NSOperation`. 的设计`AFHTTPRequestOperation`很可能是基于苹果工程师“Quinn”介绍的“原始”设计，他与他的班级一起发明了第一个“参考设计”，`QHTTPOperation`并提供了许多宝贵的样品——这些样品仍然被强烈推荐和值得去看一眼。这第一个设计子类 a`NSOperation`并封装了一个`NSURLConnection`对象。

这种设计有很多优点：

*   由于它是 的*子类*，`NSOperation`因此网络请求看起来像一个“异步操作”。这基本上意味着，网络请求具有主要方法`start`，`cancel`并且具有完成处理程序来指示请求的最终结果。这个*通用*API 对于异步*网络*操作很重要，因此它成为更通用的*异步操作*。

*   由于它是一个类，它封装了请求的所有相关状态变量。例如，请求、响应、响应数据、错误（如果有）和一些更相关的状态变量。然后，“网络请求对象”变得非常方便使用，不像委托方法，当一个委托对象的委托方法中应该处理多个请求时，它开始变得困难。

*   一个`NSOperation`对象可以排队到一个`NSOperationQueue`. 这样就可以定义请求的顺序，特别是*任何其他*操作，以及同时活动操作（请求）的数量（如果您有很多）。

*   可以在其他操作之间`NSOperation`定义或多或少复杂的*依赖*关系，这使您可以添加一些额外的“业务逻辑”层。有时，这对于解决更复杂的异步问题变得非常方便。

所以，*为什么*已经异步`NSURLConnection`被封装在一个子类中的问题`NSOperation`是这些前面提到的优点。原因是永远不要将它像*同步函数*一样包装到 an`NSOperation`中，以便它可以在 a 中执行`NSOperationQueue`。

事实上，对此存在广泛的误解。看来，很多人认为网络请求操作的方法会在执行上下文中执行`NSOperation`（例如添加到一个NSOperationQueue时）。但是，情况并非如此（在各种其他实现中可能存在一些小例外）。方法的执行上下文（主要是 的委托方法`NSULRConnection`）是一个*专用的私有线程*，将由`NSOperation`子类创建。不管怎样，底层的低层函数`NSURLConnection`也会在它们的私有执行上下文（一个或多个线程）上执行。

只有`start`方法会在操作的执行上下文中执行，它会快速返回。也就是说，如果有一个队列（比如调度队列或 NSOperationQueue）在其中调度了操作，那么只有该`start`方法在队列的执行上下文上执行。

然而，`NSOperation`的`isFinished`状态将被推迟到网络请求确实完成的点。此状态对其他`NSOperation`对象和具有重要意义`NSOperationQueue`：它向队列和其他操作发出此请求已完成的信号。

因此，`NSOperation`它不是定义网络请求功能的执行上下文的工具，而是组织和设置与其他操作的关系的一种手段。

* * *

> 在获得需要解析的数据后，我现在是否应该创建一个新操作来解析数据？在我看来，在操作中也解析数据然后返回解析的对象会更好吗？

好吧，你*可以*这样做。但是，我不认为这是一个好的设计决策：一个操作*应该*只处理一个*特定*的任务。网络操作是一个，解析任务_是另一个任务，它*也可以*是一个操作。

原因之一是操作可以根据它们*主要*需要哪些系统资源进行“分类”：CPU、内存、IO 等。合并不同的“任务类型”使得无法利用将它们关联到专用队列以控制系统资源的利用（见下文）。

好吧，当然，您*可以*将解析任务作为操作。不过，这是否有意义，取决于：

是否要执行特定任务（或功能）的`NSOperation`决定取决于以下考虑：

*   “操作”是合理的，如果该任务可能需要很长时间才能完成（从用户的角度来看），因此您（作为开发人员）希望用户有机会取消任务：（请记住：异步操作有主要方法`cancel`）

*   另一个原因是将操作与特定的执行上下文相关联，该执行上下文本身与特定的共享和有限的系统资源相关联 - 例如 CPU、内存、IO 等。这使您可以控制例如需要特定的并行执行操作的数量系统资源。假设您有一个“磁盘绑定”任务。在这种情况下，您可以创建一个`NSOperationQueue`其并发操作数为 1，并为其赋予特定的“角色”和合适的名称，例如“DiskBoundQueue”。队列帮助您控制操作的创建和启动，并强制限制并行执行操作的数量，以免耗尽受限的系统资源。然后，将“磁盘绑定”操作添加到专用的“DiskBoundQueue”。由于磁盘在同时从不同任务访问时运行不佳，因此将并发操作数设置为 1。也就是说，这种*专用队列*有助于优化系统资源的利用率。

*   如果您在操作之间存在依赖关系，假设您只想在操作 A AND 操作 B 已成功完成时才开始操作 C。`NSOperation`提供一种建立这种依赖关系的方法。

*   另一个原因可能是控制对共享资源的并发访问：如果有几个访问某个共享资源（例如 ivar）的操作被添加到 serial`NSOperationQueue`中，则对共享资源的访问被序列化，因此“线程安全” ”。但是，如果并发是唯一的要求，我更愿意使用更简单的方法，利用调度队列和块。

因此，为了更准确地了解您的问题：不， an`NSOperation`可能会过大。您可能最好使用专用的调度队列，可能是一个串行的队列，它也可以解决共享资源的并发访问。

* * *

> 在同一主题上，我有一个自定义的通用 XMLParser 类，它获取 NSData 并将其解析为 NSDictionary，我想将它用于所有响应，如何将它集成到 AFHTTPClient AFHTTPRequestOperation 以便响应已经解析？

例如，一种可行的方法是在 a`AFHTTPRequestOperation`或 AFClient 的完成处理程序中启动 XML 解析器。

如果您有*另一个*操作依赖于 XML 解析器的结果，那么一种方法是将 XML 解析器封装在一个`NSOperation`中，然后使另一个操作依赖于 XML 解析器操作。（不过，对于这种依赖关系还有其他更简单的解决方案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:42:29.150

1.  这没有立即意义。我的猜测是使用标准机制可以提供最佳性能。但是，成功/失败块也在操作中执行。

2.  我在操作的成功块中进行所有解析。如果您使用 JSON，您还可以将 AFNetworking 配置为自动为您进行反序列化。不过，您可能希望将这些字典和数组转换为更智能的类。

3.  看看[AFJSONRequestOperation](http://afnetworking.github.com/AFNetworking/Classes/AFJSONRequestOperation.html)。它可能会给你一些提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T17:57:02.260

1) 在 AFNetworking - 操作是最细粒度的级别。您可以启动它或将它们加入队列。如果您正在排队请求，AFHTTPClient 非常棒。看[enqueueOperation](http://engineering.gowalla.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/enqueueHTTPRequestOperation%3a)

2) AFNetworking 保持模块化。本质上，您与他们的解析器无关。您可以使用任何 xml 解析器来解析数据。虽然我喜欢 (DCKeyValue)[https://github.com/dchohfi/KeyValueObjectMapping] 来解析您的数据并将它们直接转换为对象。

3）您不能像 RestKit 那样自动解析，但答案 2 应该对您有所帮助。

# javascript - 获取元素的第 n 个

> ID：11365765
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript, html, dhtml, dom

无论如何我可以使用 JavaSCript 在 <table> 中获取指定的第 n^个<td> 的 innerHTML 吗？

由于我的表是自动生成的，所以我的 <td> 没有 ID。我正在使用以下 HTML 代码：

```
<table id="table">
  <tr>
    <td onmouseover="myTD()">Cell 1</td>
    <td onmouseover="myTD()">Cell 2</td>
    <td onmouseover="myTD()">Cell 3</td
  </tr>
  <tr>
    <td onmouseover="myTD()">Cell 4</td>
    <td onmouseover="myTD()">Cell 5</td>
    <td onmouseover="myTD()">Cell 6</td>
  </tr>
</table> 
```

但是如何访问例如 Cell 5？

非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T16:04:52.567

```
var cells = document.getElementById('table').getElementsByTagName('td'); 
```

这将包含所有表格单元格。使用数组表示法访问特定的：

```
cells[4] 
```

这是一个更改背景颜色的快速演示：

[http://jsfiddle.net/jackwanders/W7RAu/](http://jsfiddle.net/jackwanders/W7RAu/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T23:52:52.283

将单元格传回函数：

`<td onmouseover="myTD(this)">Cell 1</td>`

从对象中获取innerhtml：

```
function myTD(obj) {
    alert(obj.innerHTML);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T16:05:41.833

不确定你想要什么 - Dom: document.getElementsByTagName("table")[0].rows[2].cells[1]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T16:05:58.037

仅使用 CSS，您可以执行以下操作：

```
#table tr:nth-child(2) td:nth-child(2)
{
    background:#ff0000;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/dGf8k/1/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T16:06:01.203

```
function addClassToNthTD(n) {
    var table = document.getElementById('table');

    for (var i = 0; i < table.childNodes.length; i++;) {
        var rows = table.childNodes[i];
        for (var j = 0; j < tr.childNodes.length; j++;) {
            n = n - 1;
            if (n == 0) {
                tr.childNodes[j].className = 'foo';
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T16:07:54.883

这一行：

```
$('td') 
```

将代码中的所有`td`元素放入从零开始的数组中，因此以“单元格 5”为内容的单元格将是该数组的第五个元素，即：

```
$('td')[4] 
```

[jQuery 也接受 CSS 样式选择器](http://api.jquery.com/category/selectors/)，所以如果你想定位连续的第二个单元格，你可以使用一个选择器，例如：

```
$('tr td:nth-child(2)') 
```

阅读我链接的选择器文档，它可以在这种情况下非常方便

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-06T16:09:04.237

你能澄清什么时候（加载，悬停，......）和哪里（客户端，服务器端......）你想这样做吗？

如果您需要 myTD 中的单元格，只需使用**this**关键字，它恰好是您的 HTMLTableCell：

```
function myTD() {
   this.style.color="red"; // just for the example, using CSS classes is much better
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-06T16:12:31.560

我不知道你想做什么，但如果你想做某种“悬停”能力，jquery 可以很简单地做到这一点。我创建了一个示例小提琴[http://jsfiddle.net/fd3GK/1/](http://jsfiddle.net/fd3GK/1/)

# ruby-on-rails - Ruby on rails 密码在 url 中作为参数可见

> ID：11365768
> 
> 赞同：0
> 
> 时间：2012-07-06T16:01:38.083
> 
> 标签：ruby-on-rails

我有一个初始登录屏幕，我们可以在其中输入“用户名”和“密码”。我有四个视图，我使用在第一个登录视图中输入的“用户名”和“密码”在第四个视图中建立 SSH 连接。

为了传递和使用用户名和密码，我`hidden_field_tag`在所有这些视图中通过 a 传递它们，当我们单击提交按钮时，这些隐藏字段值被传递到第二个视图。

所有这些提交都是`get`请求。

用户名和密码出现在 URL 中，因为我将它们作为参数传递。如果我使用`post`request 而不是 a `get`，当我单击浏览器中的后退按钮时，页面就会过期。

无论如何要在 URL 中隐藏/加密这些参数吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:16:01.920

我认为您无法隐藏它们，因为我们知道 GET 会暴露参数。我想知道您是否可以将它们存储在会话中？我不知道你在做什么，但逻辑似乎有点不透明。也许您可以将逻辑重新考虑为更常见的模式。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:03:37.920

当您点击返回按钮时页面过期有什么问题？对我来说似乎很好。您通常无法登录某些内容，然后点击后退按钮返回页面 - 例如谷歌。 **使用帖子。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:15:39.413

您真的不应该将用户名和密码作为 GET 请求传递。我建议使用另一个表单按钮返回 4 步过程，以便整个过程通过 POST 完成，无论您前进的方向是什么，这也可以确保用户在转到前一页时不会丢失数据。

```
<%= form.submit 'Previous Step' %>
<%= form.submit 'Next Step' %> 
```

控制器：

```
if params[:commit] == "Next Step" 
  object.update_attributes(params[:item])
  <..logic..>
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:18:51.180

您真的不应该将用户名和密码作为获取请求传递。如果您不希望页面作为帖子过期，我想您可以做些什么来通过 AJAX 发布请求发送用户名和密码，其余的通过获取请求发送。

# eclipse - Eclipse 安装新的扩展问题

> ID：11365769
> 
> 赞同：0
> 
> 时间：2012-07-06T16:01:40.417
> 
> 标签：eclipse, eclipse-plugin

我正在使用 Eclipse 3.3.1.1，当尝试安装扩展时，我会去帮助 -> 软件更新 -> 查找并安装...

然后我收到下一条消息：无法执行请求的操作，因为它会使当前配置无效，有关详细信息，请参阅详细信息...

详细信息：平台配置已在此程序之外进行了修改。建议重新启动。

每次我尝试我都会得到同样的错误，即使我重新启动 eclipse 和我的设备也是如此。

# django - Django 自定义标签

> ID：11365770
> 
> 赞同：0
> 
> 时间：2012-07-06T16:01:40.393
> 
> 标签：django, django-custom-tags

我正在构建一个自定义标签，我必须在其中传递多个参数。我可以使用 , 分隔列表作为参数，但在传递该列表中的对象时遇到问题。

```
def mytag(id,args): 
```

我调用它并在html中传递这样的参数

```
 {% for image in images %}
  {{ image.pk|mytag:"100,100"}}
 {% endfor %} 
```

在上述情况下，我通过 pk 和 100 、 100 并且它工作正常。但我必须通过另一件事是对象。{{ image.pk|mytag:"100,100,{{image.name}}"}} 但这不起作用尝试了不同的语法但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:06:10.357

您在这里向我们展示的不是标签，而是过滤器。

如果您仍想使用过滤器，则可以将其应用于图像对象，因此您不需要传递标题的值：

```
{{ image|myfilter:"100,100" }} 
```

# wix - WiX 引导程序查询

> ID：11365771
> 
> 赞同：0
> 
> 时间：2012-07-06T16:01:41.033
> 
> 标签：wix, windows-installer, bootstrapper

我为我的产品创建了一个 msi，它运行良好，但我需要安装 .net 4.0 作为先决条件。我遇到了burn和bootstrapper，但有几个问题：

我应该为主 msi 和引导程序创建一个单独的项目吗？

我的客户需要一个 msi（不是 exe），那么引导程序可以是 msi 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:11:17.300

MSI (Windows Installer) 不支持“嵌套”安装，即一个**.msi**包运行一段时间，然后暂停，运行一个单独的安装程序包，然后从它暂停的位置继续。MSI 使用一些本质上是系统全局的 Windows 资源，因此“内部”安装胜过“外部”安装。

将多次安装作为单一用户体验的方法是按顺序运行每个安装，一次一个。这就是*引导程序*（也称为链接程序）的*目的*：逐个链接地运行安装链。引导程序*本身*不是安装包；它是一个*运行*一个或多个安装包的工具。

这就是引导程序不能是**.msi**的原因：它本身不是安装程序包。引导程序可以像批处理文件或脚本一样简单，也可以使用工业级工具，例如[WiX**刻录**包](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)、[Flexera AdminStudio](http://www.flexerasoftware.com/products/adminstudio.htm)等。

请注意，有些安装程序包以**.exe**的形式提供，例如 .NET Framework 或 SQL Server 安装程序。这些本质上是*包含*一个或多个**.msi**包的自解压存档，转储该有效负载的临时副本，然后在其上运行 Windows Installer 服务。从某种意义上说，它们是“引导程序”加包，全部合二为一。引导程序可以运行包（和其他引导程序），但反之则不行。

您可能认为您可以让您的外包装运行一个自定义操作来启动内包装。我们都尝试过......并发现它通常无法正常工作，即使您似乎在某些特定目标系统上逃脱了它。

您必须说服您的客户，Windows Installer 不会也不能按照他认为的方式工作。可悲的是，有时唯一的办法就是更换客户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:11:37.070

引导程序项目是一个单独的项目，并生成一个 .exe 作为其输出。它是它自己的可执行文件，而 .msi 本质上是一个由 Windows Installer 处理的数据库。

# core-graphics - 如何使用 CoreGraphics 绘制椭圆弧？

> ID：11365775
> 
> 赞同：5
> 
> 时间：2012-07-06T16:02:04.120
> 
> 标签：core-graphics

是否可以在 CoreGraphics 中绘制类似 SVG 路径的椭圆弧以及如何绘制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T03:38:56.173

今晚我遇到了同样的事情。CG 没有提供绘制非圆弧的简单方法，但您可以使用 CGPath 和合适的变换矩阵来完成。假设你想要一个轴对齐椭圆的弧线，从左上角开始，大小为宽高。然后你可以做这样的事情：

```
CGFloat cx = left + width*0.5;
CGFloat cy = top + height*0.5;
CGFloat r = width*0.5;

CGMutablePathRef path = CGPathCreateMutable();
CGAffineTransform t = CGAffineTransformMakeTranslation(cx, cy);
t = CGAffineTransformConcat(CGAffineTransformMakeScale(1.0, height/width), t);
CGPathAddArc(path, &t, 0, 0, r, startAngle, endAngle, false);
CGContextAddPath(g->cg, path);

CGContextStrokePath(g);

CFRelease(path); 
```

请注意，如果您想绘制一个饼形楔形，则只需用 CGContextMoveToPoint(cx,cy) 和 CGContextAddLineToPoint(cx,cy) 围绕“CGContextAddPath”调用，并使用 CGContextFillPath 而不是 CGContextStrokePath。（或者如果你想同时填充和描边，使用 CGContextDrawPath。）

# c# - PHP webservice返回混合数据我如何在c#中使用它

> ID：11365776
> 
> 赞同：1
> 
> 时间：2012-07-06T16:02:19.580
> 
> 标签：c#, php, web-services

我在 php 中有 Web 服务，其中包含应该返回 false 或关联数组的方法（登录）！

我试图在 c# 中使用它，但是 c# 一直告诉我我必须使用对象来处理返回的数据，所以我做到了，但我无法解析任何数据

这是代码的一瞥

```
 object user;
        user = Chat.login(txtUsername.Text,txtPassword.Text);

        if (user.Equals(false))
        {
            MessageBox.Show("Error !");
        }
        else {
           //i wanna here for example show user['name'] for example
        } 
```

如果用户输入了错误的数据，上面的代码可以正常工作，如果它在系统中，它会返回混合数据（用户数据数组）但我不能使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:08:19.640

您应该重写 web 服务，以便它返回一个对象而不是两种不同的类型。在 JSON 中，它应该看起来像，

```
{"status": "SUCCEDED", "result": [1,2,3,4]} // valid login
{"status": "FAILED"} // valid login 
```

然后您可以检查状态是否为`"SUCCEDED"`.

另一种方法是返回一个数组。成功返回关联数组。失败时返回一个**空**数组。这允许您检查数组的长度以确定是否成功。

```
[1,2,3,4] // valid login
[] // valid login 
```

该示例采用 JSON 格式。无论如何，您都可以将其转换为 XML。最重要的是你应该有这个想法。

# antlr - 插入符号前缀而不是 antlr 中的后缀

> ID：11365781
> 
> 赞同：6
> 
> 时间：2012-07-06T16:02:54.363
> 
> 标签：antlr, antlr3

我知道插入符号后缀在 antlr 中的含义（即 make root）但是当插入符号是我一直在阅读的以下语法中的前缀时呢（这个语法是全新的，由学习 antlr 的新团队完成）.. ..

```
selectClause
    : SELECT resultList -> ^(SELECT_CLAUSE resultList) 
    ;

fromClause
    : FROM tableList -> ^(FROM_CLAUSE tableList) 
    ; 
```

另外，我知道 => 是什么意思，但是 -> 呢？-> 意味着什么？

谢谢，院长

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T18:16:01.007

`^`用作内联树运算符，指示某个标记应成为树的根。

例如，规则：

```
p : A B^ C; 
```

创建以下 AST：

```
 B
 / \
A   C 
```

还有另一种创建使用*重写规则*的 AST 的方法。*重写规则*放置在解析器规则的替代项之后（或右侧）。您使用“箭头”开始*重写规则*`->`，然后是您希望在 AST 中出现的规则/令牌。

采取之前的规则：

```
p : A B C; 
```

并且您想反转令牌，但保持 ASST“平坦”（无根节点）。这可以使用以下*重写规则*来完成：

```
p : A B C -> C B A; 
```

如果你想创建一个类似于 的 AST `p : A B^ C;`，你开始*重写规则*，`^( ... )`括号内的第一个令牌/规则将成为根节点。所以规则：

```
p : A B C -> ^(B A C); 
```

产生与 相同的 AST `p : A B^ C;`。

* * *

### 有关的：

*   [树建设](http://www.antlr.org/wiki/display/ANTLR3/Tree+construction)
*   [如何输出使用 ANTLR 构建的 AST？](https://stackoverflow.com/questions/4931346/how-to-output-the-ast-built-using-antlr)

# c# - 在 .Net 中使用全球化

> ID：11365782
> 
> 赞同：0
> 
> 时间：2012-07-06T16:02:56.110
> 
> 标签：c#, asp.net, .net

我在 asp.net 中阅读了一些关于全球化的文章，但有些观点对我来说并不清楚。所有这些文章都在说我们应该在 web.config 中添加一些部分，例如：

```
<system.web>
<globalization fileEncoding="utf-8" requestEncoding="utf-8" responseEncoding="utf-8" culture="de-DE" uiCulture="de-DE"/>
</system.web> 
```

在 aspx 和 aspx.cs 中也像：

```
<%@ Page UICulture="de-DE" Culture="de-DE" ....%> 
```

和

```
using System.Threading;
using System.Globalization;
....

protected void Page_Load(object sender, EventArgs e)
        {
            Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("de-DE");
            Thread.CurrentThread.CurrentUICulture = new CultureInfo("de-DE");
            //Button1.Text = Resources.Resource1.city;
        } 
```

如果我想更改标签等的文本，我应该添加资源文件和一些这样的代码：

```
Button1.Text = Resources.Resource1.city; 
```

如果我从 web.config 和 pageload 中删除配置，上面的代码行可以正常工作，但为什么要在 web.config、aspxpage 和页面加载中添加此配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:09:16.327

您必须添加您的配置文件才能概括您的应用程序。您可以从您的页面和代码中删除

# jquery - JQuery 可滚动排序

> ID：11365783
> 
> 赞同：4
> 
> 时间：2012-07-06T16:02:56.390
> 
> 标签：jquery, jquery-ui-sortable

使用 jQuery 可排序，我有一个很长的列表，它强制滚动条。只要有足够长的时间来执行此操作，每次我抓取一个项目时，页面都会自动开始滚动，并且 LI 会跳离我的光标。每当我使用较短的列表时，它都能完美运行。有什么帮助吗？

当前的李 CSS：

```
min-height: 60px;
margin-top: 12px;
margin-bottom: 10px;
padding: 10px 10px 15px 10px;

background: #FAFAFA;

.roundCorners(3px);
.boxShadow(0,4px,10px,#222);

border: 1px #D4D4D4 solid; 
```

当前的 jQuery：

```
 var makeNotesSortable = function () {
        $("#notes").sortable
        ({
            update: function () {
                console.log($("#notes"));
                updateNoteOrder($("#notes"));
            }
        }).disableSelection();
    } 
```

![LI 移动跳出光标](../Images/a0e241ec27679e080eb42b2ab2927a34.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:38:54.033

我找不到这个问题的解决方案，但我关闭了滚动并将轴设置为“y”。

```
 $("#notes").sortable
        ({
            scroll: false,
            sort: function (event, ui) {
                ui.helper.css({ 'top': ui.position.top + $(window).scrollTop() + 'px' });
            },
            helper: 'clone',
            axis: 'y',
            update: function () {
                updateNoteOrder($("#notes"));
            }
        }).disableSelection(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-07T09:41:11.557

@Kerry Ritter 的回答是解决问题的正确方法但不要忘记通过添加以下内容来修改 #sortable 元素的 CSS：

```
position: relative; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T09:33:39.590

您需要使容器本身可滚动，而不是页面正文或任何其他父级，然后将正确计算滚动位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T13:40:38.083

调试第一拖！

```
jQuery(".sortable").sortable({

    axis: "y", 
    containment: "parent",
    scroll: false,
    handle: ".handle",
    tolerance: "pointer",

    create: function (event, ui) {
        this.first_drag_debug = true;
    },
    sort: function (event, ui) {
       if ( this.first_drag_debug == false ) {
         ui.item.css( 'top', ( ui.position.top + jQuery(window).scrollTop() ) + 'px');
       }
    },
    change:function(event, ui){
        this.first_drag_debug = false;
    },
    stop: function(event, ui){ 
        this.first_drag_debug = false;
    },
    update: function(){ 
        update(); 
    },

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-19T18:52:34.587

我知道这是一个老问题，但这就是我如何解决页面上多个滚动元素的问题：

```
$("ul.reorder").sortable({ 
    axis: 'y',
    containment: 'parent',
    tollerance: 'pointer',
    cursor: 'move',
    sort: function(event, ui) {
        var $target = $(event.target);
        if (!/html|body/i.test($target.offsetParent()[0].tagName)) {
            var top = event.pageY - $target.offsetParent().offset().top - (ui.helper.outerHeight(true) / 2);
            ui.helper.css({'top' : top + 'px'});
        }
    }
}); 
```

# php - PHP将数组循环成多维数组？

> ID：11365786
> 
> 赞同：1
> 
> 时间：2012-07-06T16:03:06.507
> 
> 标签：php, arrays, loops, multidimensional-array

我有一个包含 8 个值的简单数组。我想把它变成一个多维数组。目前它看起来像这样：

```
array(8) {
  [0]=>
  int(0)
  [1]=>
  float(100)
  [2]=>
  int(0)
  [3]=>
  int(0)
  [4]=>
  float(0.5)
  [5]=>
  float(53.6)
  [6]=>
  float(32.8)
  [7]=>
  float(9.4)
} 
```

使用上面的值，我希望数组的格式如下：

```
array[0][0] = 0
array[0][1] = 100

array[1][0] = 0
array[1][1] = 0

array[2][0] = .5
array[2][1] = 53.6 
```

等等

因此，目标是创建一个循环，循环遍历并将每 2 个值设置为数组中的一个数组。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T16:11:13.433

使用[array_chunk](http://php.net/manual/en/function.array-chunk.php)将数组每 2 个元素拆分一次。

这段代码应该可以准确地为您提供所需的内容。

```
$newArray=array_chunk($oldArray,2,false); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T16:06:49.743

这应该分解为您描述的格式。

```
$newArray = array();
for ($i=0;$i<count($originalArray);$i+=2) {
   $newArray[] = array($originalArray[$i], $originalArray[$i+1]);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T16:07:48.567

```
$output = array();
for ($i = 0, $j = 0, $n = count($array); $i < $n; $i++) {
  $output[$j][] = $array[$i];
  if ($i % 2 == 1) {
    $j++;
  }
} 
```

或者...

```
$output = array();
while ($array) {
  $output[] = array(array_shift($array), array_shift($array));
} 
```

...以及该主题的任何数量的变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T16:16:19.730

数组变换：

```
$a = array(0, 100, 0, 0, 0.5, 53.6, 32.8, 9.4);
$b = array();
$j=0;
foreach ($a as $i => $value) {
    if ($i%2) {
        $b[$j][1] = $value;
        $j++;
    } else {
        $b[$j][0] = $value;
    }
}
echo '<pre>';
var_export($a);
var_export($b);
echo '</pre>'; 
```

# linqpad - 使用列表输出作为输入的 Linq 查询

> ID：11365787
> 
> 赞同：0
> 
> 时间：2012-07-06T16:03:07.453
> 
> 标签：linqpad

我正在使用 Linqpad 并设置了 odata 连接。我有一个查询如下

QUERY1

```
void Main()
{var a = from cpuid in Computers
where cpuid.DnsHostName == "xyz"
select new {
    ID = cpuid.TechnicalProductsHosted.Select (x => new { Id = x.Id }),
    System_Dept = cpuid.SystemDepartment,
    };
Console.WriteLine(a);
} 
```

输出：它返回 4 个 id，但一个部门在所有 4 个 id 中是通用的。当我以其他方式查询时，即

QUERY2

```
var a = from id in TechnicalProducts
where id.Id == "ID-15784"
select new
{System_Dept = id.Computers.Select(x => x.SystemDepartment),
Support_Team = id.Computers.Select(x => x.SupportTeam)
};
Console.WriteLine(a); 
```

输出：id 的 4 个部门。我希望在第一种情况下拥有整个部门列表。这怎么可能？在查询 1 中，我可以将 id 作为 System Department 的输入并以某种方式查询吗？

输出样本 ![在此处输入图像描述](../Images/fd21c7235b2fd947c99b1c3db744fe5c.png)

# android - 使用 achartEngine 从 Preference xml 中的值绘制饼图

> ID：11365789
> 
> 赞同：1
> 
> 时间：2012-07-06T16:03:19.800
> 
> 标签：android, xml, preferences, achartengine

我正在尝试从存储在 XML 首选项文件中的值中绘制一个饼图。我有 2 个值 xy 并且需要从这些值中绘制一个饼图。它不会通过类传递变量。如果我输入整数而不是 x 和 y，则该图可以正常工作，但我不能将 x 和 y 作为变量传递。怎样才能使这个工作？

```
public class MGraphPie extends Activity{
    public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
    String x = preferences.getString("amountx", "DEFAULT");
    String y = preferences.getString("amounty", "DEFAULT");
}

public Intent getIntent (Context context) {

    int[] values = {x, y};
    CategorySeries series = new CategorySeries("Pe");
    int k = 0;
    for (int value: values) {
        series.add("Section " + ++k, value);

    }
    int[] colors = new int[] { Color.CYAN, Color.RED };

    DefaultRenderer renderer = new DefaultRenderer();
    for (int color : colors) {
        SimpleSeriesRenderer r = new SimpleSeriesRenderer();
        r.setColor(color);
        renderer.addSeriesRenderer(r);
    }

    Intent intent = ChartFactory.getPieChartIntent(context, series, renderer, "PLEAaa");
    return intent;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:15:18.830

只需将 x 和 y 声明为实例变量而不是本地变量。

# scala - 让 SBT 任务依赖于 OneJar 任务

> ID：11365790
> 
> 赞同：3
> 
> 时间：2012-07-06T16:03:21.290
> 
> 标签：scala, sbt

我无法让我的新 SBT 任务“安装”依赖于[OneJar](https://github.com/sbt/sbt-onejar)任务。这是我的 Build.scala 文件：

```
import sbt._
import Keys._
import com.github.retronym.SbtOneJar._

object BuildBroBuild extends Build {
  val install = TaskKey[Unit]("install", "Installs the JAR and a launcher script into your homedir")

  private def installTask = task {
    println("Hello world!")
  }

  override lazy val settings = super.settings ++
    Seq(install <<= (oneJar in Global)(installTask dependsOn(_)))

  lazy val root = Project(id = "buildbro",
                          base = file("."),
                          settings = Project.defaultSettings)
} 
```

这是我得到的错误：

```
[error] Reference to undefined setting: 
[error] 
[error]   */*:one-jar from {.}/*:install
[error]      Did you mean *:one-jar ?
[error] 
```

有人知道这是什么意思吗？我相信我必须以不同的方式确定 oneJar TaskKey 的范围。谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:57:59.867

我认为这样的事情应该有效：

```
object BuildBroBuild extends Build {
  val install = TaskKey[Unit]("install", "Installs the JAR and a launcher script into your homedir")

  private lazy val installTask = install <<= (oneJar, streams) map { case (a, s) => {
    // 'a' is the output from the onejar task (ie, the artifact)
    println("Hello world!")
  }

  override lazy val settings = super.settings ++
    Seq(installTask)

  lazy val root = Project(id = "buildbro",
                          base = file("."),
                          settings = Project.defaultSettings)
} 
```

在这里，我们将 oneJar 任务的输出（以及`streams`允许记录等）作为我们新任务的输入。

# objective-c - MPMoviePlayerController 不播放任何视频内容 [由于 ARC 和内存管理]

> ID：11365791
> 
> 赞同：6
> 
> 时间：2012-07-06T16:03:21.673
> 
> 标签：objective-c, xcode, mpmovieplayercontroller

我正在尝试在 iOS 应用程序中播放视频，当用户按下按钮时，使用 MPMoviePlayerController 将电影视图附加到现有视图。该视图在正确的位置和所有内容上显示为一个黑框，但没有任何反应。我期待电影开始播放，但没有任何反应，应用程序也没有提示原因。

谁能看到这哪里出错了？

```
-(IBAction) playButtonClicked:(id)sender
{
    NSString* path = [[NSBundle mainBundle] pathForResource:@"sample_mpeg4" ofType:@"mp4"];
    NSLog(@"Using videoPath %@", path);
    NSURL* url = [NSURL fileURLWithPath:path];
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [self.view addSubview:player.view];
    player.view.frame = CGRectMake(10, 10, 300, 220);
   [player play]; 
```

}

电影存在并记录了正确的路径，但仍然没有电影播放。

```
2012-07-06 11:51:13.492 experiments[84702:12203] Using videoPath /Users/marius/Library/Application Support/iPhone Simulator/5.1/Applications/9799C851-8D2B-4CFE-8CFA-A4C4C954787F/experiments.app/sample_mpeg4.mp4 
```

根据我的阅读和理解，这应该是可行的。关于尝试什么的任何提示或建议？

* * *

我将电影移至 HTTP 服务器 (fg.mp4) 并跟踪访问日志。单击播放按钮时，会出现通常的黑色窗口。服务器端我在日志中发现了两个新条目：

```
168.122.x.x - - [06/Jul/2012:22:42:33 +0200] "GET /fg.mp4 HTTP/1.1" 304 192 "-" "AppleCoreMedia/1.0.0.9B176 (iPhone Simulator; U; CPU OS 5_1 like Mac OS X; en_us)"
168.122.x.x - - [06/Jul/2012:22:42:33 +0200] "GET /fg.mp4 HTTP/1.1" 206 33304 "-" "AppleCoreMedia/1.0.0.9B176 (iPhone Simulator; U; CPU OS 5_1 like Mac OS X; en_us)" 
```

因此，手机获取了部分电影内容，并且——显然——准备在需要时获取其余部分。我缺少的 MPMoviePlayerController 是否有一些明显的参数？

* * *

**更新：解决方案和工作代码**

该问题是由 ARC 引起的，并且`MPMoviePlayerController`在调用设置控制器的方法后没有保留对 的引用。解决方案：向类添加一个类变量，并使用它在电影的生命周期内保持对控制器的引用。

在类声明的早期（在任何消息/函数定义之外）：

```
MPMoviePlayerController* mpController; 
```

并且前面提到的`playButtonClicked`使用这个变量来跟踪控制器：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"sample_mpeg4" ofType:@"mp4"];
NSURL* url = [NSURL fileURLWithPath:path];
mpController = [[MPMoviePlayerController alloc] initWithContentURL:url];
mpController.view.frame = CGRectMake(10, 10, 300, 220);
[self.view addSubview:mpController.view];
[mpController play]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-07T15:13:14.980

正如我对[MPMoviePlayerController 播放在视频结束之前终止](https://stackoverflow.com/questions/11367245/mpmovieplayercontroller-playback-terminates-before-video-finishes)的回答一样，这看起来是一个内存管理（实例生命周期）问题。假设您正在使用 ARC 进行编译，则该变量会在您的方法返回`player`时被释放。`playButtonClicked:`此时`MPMoviePlayerController`个体拿起球棒和球回家。

尝试将`MPMoviePlayerController`实例分配给强实例变量或属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:23:25.360

在我看来，没有什么明显不合适的。以下是一些有助于缩小问题范围的调试技巧：

*   尝试使用通过 http 提供的 mp4 文件的 URL——这应该告诉您这是 UI 问题还是资产问题。
*   尝试检查`url`文件长度等属性并确认它与您的期望完全匹配。

# django - djangonic 处理 rdf 的方法？

> ID：11365796
> 
> 赞同：8
> 
> 时间：2012-07-06T16:03:40.870
> 
> 标签：django, rdf

我正在为 django 寻找一个 RDF 项目，但我找不到任何活动的。

这似乎是一个不错的[http://code.google.com/p/django-rdf](http://code.google.com/p/django-rdf)，但最后一次提交是在 2008 年（4 年前）。google-groups 中的组似乎已被放弃。上一次没有垃圾邮件的帖子是在 2008 年。因此它不支持新的 django 版本。

是否有任何库或一些预构建的开源应用程序可以轻松公开 rdf 数据？

也许很容易解决，比如写一个视图并在一两行代码中使用[https://github.com/RDFLib/rdflib](https://github.com/RDFLib/rdflib)返回一些东西，但我不知道该怎么做......

使用 RDFlib 的想法是获取一个 django 对象或对象集合，并以某种方式将其转换为 rdf，可能使用 rdf 解析器。

我认为如果客户端请求“accept:text/html”，我可以给出 html 响应，如果用户使用带有 rdf+xml 或 rdf+turtle 的 html 接受标头请求同一页面，我可以给出 RDF（并且它可能存在一个处理那对我来说）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:33:29.777

根据我对 RDF 的了解，您可能需要手动工作才能从 Django 模型中获取有意义的 RDF 语句，因为它不是像 JSON 这样的简单数据表示格式，它正在尝试对语义进行编码。

也就是说，看看 django-rdflib：
[https ://github.com/odeoncg/django-rdflib](https://github.com/odeoncg/django-rdflib)

似乎没有任何文档（它似乎是为特定应用程序构建的），但作者在此处发布了关于`manage.py syncvb`从现有 Django 模型生成 RDF 图的命令：
[https ://groups.google.com /d/msg/django-rdf/14WVK7t88PE/ktAKJo-aCfUJ](https://groups.google.com/d/msg/django-rdf/14WVK7t88PE/ktAKJo-aCfUJ)

不确定 django-rdflib 提供了哪些视图，但如果它可以为您制作 RDFlib 图，那么您可能可以使用 RDFlib 提供的序列化插件从您自己的视图中输出 rdf+xml 或任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:48:03.217

[http://code.google.com/p/djubby/](http://code.google.com/p/djubby/)

SURF 可用作 RDF->object 映射器（或 RDFAlchemy）

将 rdfa 注入到您的模板中也应该可以工作（如果您想避免三重存储）

[您还可以使用http://d2rq.org/](http://d2rq.org/)等工具将数据库公开为 sparql 端点

# c# - iframe 使用服务器互联网连接返回内容

> ID：11365801
> 
> 赞同：0
> 
> 时间：2012-07-06T16:04:02.310
> 
> 标签：c#

有谁知道是否可以在网站上编写 iframe 代码以使用服务器互联网连接而不是客户端返回数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:10:53.673

是的，有可能。在代码中调用 url，然后将响应中的 html 传递给要在 iFrame 中呈现的内容。

# c# - 使用 Jquery 从多行文本框中检索值时出错

> ID：11365804
> 
> 赞同：1
> 
> 时间：2012-07-06T16:04:08.950
> 
> 标签：c#, jquery, asp.net, multiline

我有一个要求，我必须验证 aspx 中多行文本框的空文本。我为此目的使用 jquery。

我的 aspx 页面如下所示：

```
<asp:TextBox runat="server" ID="txtClarification" ClientIDMode="Static" TextMode="MultiLine" Rows="8" Style="width: 780px;"></asp:TextBox> 
```

在我的 Jquery 函数中：

```
var textbox = ('#txtClarification').val();
if (textbox.length == 0) {
    //do something
} 
```

但是我检索文本框值的语句会引发错误：

> Microsoft JScript 运行时错误：对象不支持属性或方法“val”

从多行文本框中检索值有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:05:53.040

不要忘记`$`：

```
var textbox = $('#txtClarification').val();
//------------^
if (textbox.length == 0) {
    //do something
} 
```

此外，我不是 ASP.NET 专家，但您可能需要指定`ClientID`选择器才能工作。

# c# - Sharepoint 警报访问被拒绝

> ID：11365809
> 
> 赞同：1
> 
> 时间：2012-07-06T16:04:17.343
> 
> 标签：c#, sharepoint, sharepoint-2010

我一直在开发一个界面，为 Sharepoint 2010 上的当前用户添加列表警报。对于高权限用户，我可以从列表和文档中添加和删除警报，但是当我使用低级别用户“访客”时**读取**站点和列表/文档的权限 我无法添加多个警报或删除它们。一个接一个，我得到一个“拒绝访问”。

如果你愿意，我可以给你看我的代码。TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:20:20.327

假设您没有被沙盒化，您可以使用委托以提升权限运行吗？例如

```
string employeeIdToRemove = "1337";
Guid siteGuid = SPContext.Current.Site.ID;

SPSecurity.RunWithElevatedPermissions(delegate
{
   using (SPSite mySite = new SPSite(siteGuid))
   {
      SPListItemCollection listItems = mySite.Lists["SuperSecretList"].Items;
      int itemCount = listItems.Count;

      for (int k=0; k<itemCount; k++)
      {
         SPListItem item = listItems[k];

         if (employeeIdToRemove.Equals(item["Employee"].ToString()))
         {
             listItems.Delete(k);
         }
      }
   }
}); 
```

# css - 为什么 IE7 和 IE8 会忽略我在 wordpress 中对 .widget 类的编码？

> ID：11365812
> 
> 赞同：0
> 
> 时间：2012-07-06T16:04:22.397
> 
> 标签：css, wordpress, internet-explorer

我一直在为我的主题进行 css 编码，该主题基于 21 岁。除了 IE7 和 IE8 之外，一切看起来都很好。

我意识到在这两个提到的浏览器中，我的小部件类“.widget”的样式被忽略了。我在进行消除测试后发现了这一点。我测试过的所有其他课程都需要进行 css 调整。只有那些 .widget 不会被 IE7 和 8 接收。

有一个已知的解决方案吗？

额外信息：我希望通过实现 1px 的黑色边框将每个小部件包含在一个框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:38:40.383

没有更多信息，不可能肯定地说，但正如 miszczu 已经评论的那样，旧版本的 IE 在应用具有多个类的规则时遇到问题，如下所示：

```
.widget { background: red; }
.widget.blue { background: blue; } 
```

在大多数浏览器中，如果您有`<div class="widget blue">test</div>`，它将是蓝色的。但在较旧的 IE 中，它仍然是红色的，因为它不知道如何处理多个类。

如果这不适用于您，也许您可​​以使用更多详细信息编辑您的问题——指向您网站的链接或带有问题的 jsfiddle 将对解决您的问题非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:02:56.190

感谢@Scott 和@misczu 的帮助。

我做了主要的消除测试，发现这是一个 HTML5 问题。IE7 & 8 无法读取新的 HTML5 元素，而且我之前的外包似乎忽略了包含 HTML5 js 兼容性文件。IE7 和 8 无法处理包含小部件的 'aside' 元素。

最后，我不得不从 Google SVN 检索 HTML5 兼容性代码；包含在过时版本的 21 中的那个很古怪。它现在可以正常工作。

# wpf - 如何在 View Model 中设置 XamDataGrid Cell 的 Tooltip thru 属性

> ID：11365813
> 
> 赞同：0
> 
> 时间：2012-07-06T16:04:25.213
> 
> 标签：wpf, mvvm, tooltip, xamdatagrid

我正在通过 MVVM 架构实现 WPF XamDataGrid。想知道如何通过绑定到视图模型文件中的属性来设置单元格的工具提示文本？任何建议都将受到欢迎！安舒曼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:45:35.890

例如，您想要一个用于行的工具提示，并且行表示类 GridRow。

在 GridRow 中添加下一个：

```
class GridRow
{
  GridRow() //or other constructor
  {
    ...
    RowToolTip = "Tooltip for one row";
  }

  public string RowToolTip {get; set;}
} 
```

如果您想在运行时更新工具提示，请不要忘记为 GridRow 实现并使用 INotifyPropertyChanged。

在带有网格的 xaml 中添加下一个代码：

```
<igDP:XamDataGrid.Resources>
  <Style TargetType="{x:Type igDP:CellValuePresenter}">
    <Setter Property="ToolTip" Value="{Binding DataItem.RowToolTip}" />
  </Style>
</igDP:XamDataGrid.Resources> 
```

如果您需要为行中的不同单元格提供不同的工具提示，那么这需要更多的代码。

# haskell - Emacs 的 Haskell 缩进模式有什么异同？

> ID：11365815
> 
> 赞同：39
> 
> 时间：2012-07-06T16:04:38.217
> 
> 标签：haskell, emacs, haskell-mode

通过仔细阅读[文档](https://github.com/haskell/haskell-mode)，我了解到 Emacs`haskell-mode`提供了三种不同的、相互排斥的自动缩进方法。它们被称为`haskell-indentation`、`haskell-indent`和`haskell-simple-indent`。谁能解释这些方法的相似之处和不同之处？我不仅对单个功能感兴趣，而且对其中一个是否是*事实上的*标准或一两个不再维护感兴趣。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-21T00:47:33.810

真的，据我询问人们所知道的，没有事实上的标准，人们对他们更喜欢哪个有强烈的意见，但除了“它在大多数情况下对我有用”之外几乎没有具体的证据。

包`haskell-indentation`和`haskell-indent`包是最受欢迎的：

*   两者都有一个标签循环
*   两者都是复杂的代码库
*   两者都有很多边缘情况，它们会崩溃

每个人都会在不同的情况下做正确的事，但同样，没有单元测试，没有真正的解析器等。只是作者碰巧想到的一堆特殊情况，所以文档和理解他们如何严格意义上的行为是稀疏的。`haskell-indentation`比 了解更多 Haskell `haskell-indent`，但是很多人会告诉你，包括我在内，你会花很多时间在缩进中循环来找到正确的。

该`haskell-simple-indent`包没有 Haskell 知识，它只知道列对齐并且它没有制表符循环，它有缩进和去缩进。这是我使用的版本，因为上述模式中的边缘情况有时会让人分心。

我认为对于这样的库，除了轶事之外，很难描述它们之间的差异。我欢迎进行一些严格的比较（尽管时间可能会更好地用于编写更好的模式）。

`simple-indent`由我维护。我不知道其他人的作者是否对维护感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:59:42.640

[我相信您提到的 3 种模式对应于本文](http://www.haskell.org/haskellwiki/Emacs/Indentation)中描述的 3 种 haskell 模式，即；

*   `haskell-indentation`== 标签单车
*   `haskell-indent`== 矩形区域
*   `haskell-simple-indent`== 对齐代码

但是，由于我不是 100% 确定，所以我回家后会调查更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T18:12:13.487

`haskell-indentation`并且`haskell-indent`具有误导性的相似性，两者都通过重复键入 TAB 来提供循环提案，这是 IMO 的主要功能。

然而`haskell-indent`绝对是我最喜欢的，主要是因为它会提出一些非常有用的补全：

*   在你写好类型签名后为你重复一个函数名
*   重复用于模式匹配的函数名称
*   案例分支管道

我最近刚刚切换了环境，不得不重新设置 emacs，并且`haskell-indentation`被错误地使用了，天哪，我错过了这些。OTOH，您可能会发现其中一些完成令人讨厌；更重要的是，它们在某些情况下不起作用：如果您的函数以下划线开头，或者（更糟）如果您正在追踪鸟类。

# mysql - mysql中的奇怪转换行为

> ID：11365824
> 
> 赞同：3
> 
> 时间：2012-07-06T16:05:16.537
> 
> 标签：mysql, string, casting, implicit-conversion

这是代码

```
mysql> SELECT id FROM tbl WHERE id = '1h';
+----+
| id |
+----+
|  1 |
+----+
1 row in set 
```

确实有一个 id 为 1 的字段（但不是 '1h'）。
这是 MySQL 文档的摘录：http: [//dev.mysql.com/doc/refman/5.1/en/type-conversion.html](http://dev.mysql.com/doc/refman/5.1/en/type-conversion.html)

```
mysql> SELECT 1 > '6x';
    -> 0
mysql> SELECT 7 > '6x';
    -> 1 
```

所以这个错误被记录在案，可以这么说。问题是这种行为的原因是什么以及如何纠正它以使其不使用 char 符号转换字符串？我可以转换所有字段值，例如

```
mysql> SELECT id FROM tbl WHERE cast(`id`, BINARY) = '1h'; 
```

但我不太喜欢这个变种

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:11:40.563

这不是错误。

解决方案**不是**使用您的条件的字符串值来查询数字列。

**永远不要**依赖隐式类型转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:19:01.513

您的任何观察都不是错误。它们是依赖隐式类型转换的结果。

在所有示例中，您都需要 MySQL 将字符串转换为 int。如果您阅读您链接到的页面，您会看到 MySQL 遵循一些规则来实现这一点。因此

```
'1h' -> 1
'6x' -> 6
'x6' -> 0 
```

所以，如果你遵守这些规则，你会没事的。

更好的是，只是不要将 MySQL 置于需要进行这些转换的位置。这种情况通常指向系统其他地方的某种逻辑错误。

# java - android从另一个活动执行方法

> ID：11365827
> 
> 赞同：-1
> 
> 时间：2012-07-06T16:05:38.000
> 
> 标签：java, android

我正在从activityA 调用activityB 上的方法。方法被正确地从 A 调用到 B，但是当我在其中执行 webviewB.loadUrl(myUrl) 时，应用程序因空指针异常而崩溃。相同的 webviewB 方法，如果从 activityB 执行，则可以正常工作。可能是因为上下文，当从 A 调用到 B 时必须设置，但是如何？最好的方法是什么？谢谢你。

ActivityA (tabHost) 和 ActivityB (tabcontent) 已正确初始化，来自 ActivityB 的 webview 显示 URL1。然后，当收到来自 ActivityA 的事件时，我需要在 ActivityB 的 webview 上加载 URL2。

编辑：当在 ActivityA 上收到事件时，

```
 ActivityB test = new ActivityB();
 test.recalcula(); 
```

活动B，

```
@Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        setContentView(R.layout.vistaaib); 

        webviewB = (WebView) findViewById(R.id.webviewB);

            webviewB.loadUrl(URL1);

...

public void recalcula (){

        webviewB.loadUrl(URL2);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:07:31.560

在活动之间进行通信的最佳方式是使用 Intent 机制。因此，只需从 activityA 启动一个意图，以便与 activityB 通信它的 loadUrl 方法应该运行。

或者对于其他解决方案，您可以阅读以下问题： [Best way to complete inter-activity communication in an Android TabHost application](https://stackoverflow.com/questions/1162659/best-way-to-accomplish-inter-activity-communication-in-an-android-tabhost-applic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:13:43.620

Ortisi 建议的任何意图。或者你为什么不尝试创建一个类，在这个类中创建那个方法，然后从两个活动中调用那个方法。

# objective-c - 使用 MKStoreKit 恢复消耗品购买

> ID：11365832
> 
> 赞同：1
> 
> 时间：2012-07-06T16:05:53.863
> 
> 标签：objective-c, in-app-purchase, restore, storekit, mkstorekit

我正在使用 MKStoreKit，它具有一种相当有用的方法来恢复购买，如此[处所述](https://stackoverflow.com/questions/10983050/how-to-restore-purchases-using-mkstorekit)

但是，我使用消耗性货币来解锁对象。每一个消费币解锁的物件都只在本地解锁，所以如果用户花费1币解锁1个物件，然后删除并重新安装应用程序，该1个物件将不会被记忆为已解锁。

一种不涉及在我自己的服务器上存储用户详细信息的解决方法是为每个对象创建非消耗性应用内购买，并在用户花费货币时解锁它们。因此，非消耗品对用户是不可见的。我没有尝试过，这并不理想，因为添加购买会产生更多开销，但我不明白为什么它不起作用？

这留下了货币。我可以使用 MKStoreKit 恢复货币，而无需在我自己的服务器上登录或通过 GameKit 等获取用户详细信息吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:58:39.690

关于您的第一个问题，如果您使用单独的非消耗品进行操作，用户体验的唯一真正区别是，当您要求商店套件购买非消耗品时，他们会被要求完成交易，而不是当他们购买您的货币。这使得货币的概念有些无关紧要，因为在您描述的模型中，它们仅在消费时才收费，并且与消费量成正比。

如果你已经发布了一个应用程序，并且有真实的人购买了这种货币，那么你将不得不支持一个过渡期，让那些留下代币的人可以使用它们，并避免在这种情况下调用 store kit，因为它已经调用以获取令牌。还要确保停止销售新产品。

如果它是一个新的应用程序，完全放弃货币的想法，支持用真钱购买东西。这就是它对用户的样子，这就是它现在的样子。

# php - 电子邮件表单选择列表菜单

> ID：11365840
> 
> 赞同：0
> 
> 时间：2012-07-06T16:06:09.480
> 
> 标签：php, javascript

我有一个在我的电子邮件表单中使用的选择列表菜单：

```
<select name="orgSelect" class="orgSelect">
<option value="0">----Select product----</option>
<option value="1">Product 1</option>
<option value="2">Product 2</option>
<option value="3">Product 3</option>
</select> 
```

但是，当发送电子邮件表单时，它的值和我不希望他得到值，但是“产品 1”前面的项目标签......，选项的值正在使用另一件事，可以有人告诉我如何获取数据“产品 1”或产品 2...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:08:31.520

要么根本不使用该`value=`属性，而是让客户端发送选项的名称（但您没有得到产品的实际编号（猜测这是 ID））。

或者，一个更好的解决方案是在发送电子邮件之前查询数据库中的产品 ID，然后从那里获取产品名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:09:43.143

你这样设置

```
<select name="orgSelect" class="orgSelect">
<option value="0-0">----Select product----</option>
<option value="1|Product 1">Product 1</option>
<option value="2|Product 2">Product 2</option>
<option value="3|Product 3">Product 3</option>
</select> 
```

并获得这样的帖子价值

```
 var arr=explode('|',$_post['orgSelect']);
  var arrval=arr[0];
  var arrname=arr[1] 
```

# javascript - 为什么谷歌地图不适用于 gmaps.js + ie9？

> ID：11365845
> 
> 赞同：0
> 
> 时间：2012-07-06T16:06:40.790
> 
> 标签：javascript, google-maps, google-maps-api-3, internet-explorer-9, google-maps-markers

我不明白为什么谷歌地图补充适用于 ie8、firefox、chrome 和 safari，但会在 ie9 上崩溃……我使用[gmaps.js](http://hpneo.github.com/gmaps/)库来制作谷歌地图。我试图停用 modernizr 补充或引导程序，但仍然无法正常工作......

[http://masqmenos.com/eng/donde-quedamos.php](http://masqmenos.com/eng/donde-quedamos.php)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T00:30:43.850

对我来说，看看控制台就足以回答这个问题（你有时也应该看看控制台）。

IE 已阻止脚本[https://raw.github.com/HPNeo/gmaps/master/gmaps.js](https://raw.github.com/HPNeo/gmaps/master/gmaps.js)因为错误的 MIME 类型（它被用作“文本/纯文本”）。

GitHub 不是 CDN，请将文件复制到您的服务器上。

请参阅：[Github 是否应该用作 JavaScript 库的 CDN？](https://stackoverflow.com/questions/5502540/should-github-be-used-as-a-cdn-for-javascript-libraries)

# android - 为什么在 ProGuard 中禁用混淆会破坏优化步骤？

> ID：11365846
> 
> 赞同：3
> 
> 时间：2012-07-06T16:06:41.333
> 
> 标签：android, proguard

我们最近决定在我们的 Android 构建中禁用代码混淆，因为虽然它使最终的 APK 稍微大一些，但它使调试变得更加困难。

自从我们这样做以来，我一直在我们的应用程序中遇到以前不存在的崩溃，即当混淆仍然有效时。通常这些崩溃是由 Java`VerifyError`或Java 引起`NoSuchMethodError`的。

以下是我在禁用混淆时突然看到的两个错误：

```
Could not find method org.apache.http.HttpConnectionMetrics.getResponseCount, referenced from method com.google.android.apps.analytics.PipelinedRequester.sendRequests
W/dalvikvm( 6652): VFY: unable to resolve virtual method 16112: Lorg/apache/http/HttpConnectionMetrics;.getResponseCount ()J
W/dalvikvm( 6652): VFY:  rejecting opcode 0x6e at 0x000c
W/dalvikvm( 6652): VFY:  rejected Lcom/google/android/apps/analytics/PipelinedRequester;.sendRequests ()V
W/dalvikvm( 6652): Verifier rejected class Lcom/google/android/apps/analytics/PipelinedRequester;
D/dalvikvm( 6652): GC_CONCURRENT freed 253K, 46% free 3261K/6023K, external 0K/0K, paused 2ms+2ms
I/dalvikvm( 6652): Rejecting re-init on previously-failed class Lcom/google/android/apps/analytics/PipelinedRequester; v=0x4062de30
D/AndroidRuntime( 6652): Shutting down VM
W/dalvikvm( 6652): threadid=1: thread exiting with uncaught exception (group=0x400a7560)
E/AndroidRuntime( 6652): FATAL EXCEPTION: main
E/AndroidRuntime( 6652): java.lang.VerifyError: com/google/android/apps/analytics/PipelinedRequester
... 
```

我可以通过 !class/merging/* 禁用类合并来解决此错误

我看到的另一个错误是：

```
I/dalvikvm( 7292): DexOpt: access denied from Lcom/urbanairship/analytics/EventUploadManager; to field Lorg/apache/http/entity/AbstractHttpEntity;.contentEncoding
W/dalvikvm( 7292): VFY: unable to resolve instance field 5188
D/dalvikvm( 7292): VFY: replacing opcode 0x5b at 0x00ec
I/dalvikvm( 7292): Could not find method org.apache.http.conn.scheme.PlainSocketFactory.<init>, referenced from method com.google.android.apps.analytics.PipelinedRequester.<init>
W/dalvikvm( 7292): VFY: unable to resolve direct method 15044: Lorg/apache/http/conn/scheme/PlainSocketFactory;.<init> (B)V
D/dalvikvm( 7292): VFY: replacing opcode 0x70 at 0x0003
D/dalvikvm( 7292): VFY: dead code 0x0006-0009 in Lcom/google/android/apps/analytics/PipelinedRequester;.<init> (Lorg/apache/http/HttpHost;)V
I/dalvikvm( 7292): DexOpt: access denied from Lcom/google/android/apps/analytics/PipelinedRequester; to field Lorg/apache/http/impl/SocketHttpClientConnection;.open
W/dalvikvm( 7292): VFY: unable to resolve instance field 5234
D/dalvikvm( 7292): VFY: replacing opcode 0x55 at 0x0006
D/dalvikvm( 7292): VFY: dead code 0x0008-000e in Lcom/google/android/apps/analytics/PipelinedRequester;.closeConnection ()V
D/dalvikvm( 7292): VFY: dead code 0x0010-0011 in Lcom/google/android/apps/analytics/PipelinedRequester;.closeConnection ()V
I/dalvikvm( 7292): DexOpt: access denied from Lcom/google/android/apps/analytics/PipelinedRequester; to field Lorg/apache/http/impl/SocketHttpClientConnection;.open
W/dalvikvm( 7292): VFY: unable to resolve instance field 5234
D/dalvikvm( 7292): VFY: replacing opcode 0x55 at 0x0006
D/dalvikvm( 7292): VFY: dead code 0x0008-0009 in Lcom/google/android/apps/analytics/PipelinedRequester;.addRequest (Lorg/apache/http/HttpEntityEnclosingRequest;)V
D/dalvikvm( 7292): GC_CONCURRENT freed 253K, 47% free 3251K/6023K, external 0K/0K, paused 2ms+3ms
I/dalvikvm( 7292): DexOpt: access denied from Lcom/google/android/apps/analytics/PipelinedRequester; to field Lorg/apache/http/impl/AbstractHttpClientConnection;.metrics
W/dalvikvm( 7292): VFY: unable to resolve instance field 5225
D/dalvikvm( 7292): VFY: replacing opcode 0x54 at 0x0008
D/dalvikvm( 7292): VFY: dead code 0x000a-0090 in Lcom/google/android/apps/analytics/PipelinedRequester;.sendRequests ()V
D/AndroidRuntime( 7292): Shutting down VM
W/dalvikvm( 7292): threadid=1: thread exiting with uncaught exception (group=0x400a7560)
E/AndroidRuntime( 7292): FATAL EXCEPTION: main
E/AndroidRuntime( 7292): java.lang.NoSuchMethodError: org.apache.http.conn.scheme.PlainSocketFactory.<init> 
```

我可以通过设置 !method/propagation/* 来解决这个问题

但是为什么这些问题只出现在*禁用*混淆的情况下？一个不应该对另一个没有影响吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T23:28:44.977

混淆节省了您，因为它将您的 Apache HttpClient 类的副本重命名为不会与[Android 中已经存在](https://stackoverflow.com/questions/2618573/what-version-of-apache-http-client-is-bundled-in-android-1-6)的那些类的副本冲突的名称。

令人讨厌的地方......您可能要考虑根本不使用 Apache HttpClient，并使用 Jesse Wilson 建议的内置[HttpURLConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)类：

[http://android-developers.blogspot.com/2011/09/androids-http-clients.html](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)

你可以在 HttpURLConnection 上试试这个 Android 友好的面板：

[https://github.com/kevinsawicki/http-request](https://github.com/kevinsawicki/http-request)

如果您确实*必须*使用 Apache HttpClient，请使用 Android 中嵌入的旧版本，或者尝试调整您的 ProGuard 配置以*混淆*HttpClient 库。

# signal-processing - 在 Haxe 中避免异常

> ID：11365848
> 
> 赞同：0
> 
> 时间：2012-07-06T16:06:59.060
> 
> 标签：signal-processing, multimedia, haxe

我在 Haxe 做 DSP。我的一些 DSP 包含递归算法，可能会生成非正规（也称为次正规）数。某些平台在遇到此类数字时表现不佳，无法进行实时处理（在某些情况下，甚至离线处理变得更加困难）。显然，只有产生非常小的数字（例如，通过递归乘法）的算法才会受到影响，但我正在使用这些算法。

处理该问题的一个非常常见的过程就是：

```
if r is a denormal
   r <- 0 
```

当非规范化太小而对给定算法（几乎）总是有任何影响时，这可以正常工作。

我正在为许多平台构建，并希望在它们发生之前尽可能避免这些令人头疼的问题。所以问题是，我如何快速有效地识别/消除 Haxe 中的异常？

这可能会分解为其他问题，例如：Haxe 是否具有特定于语言的处理非规范化的方法，还是取决于平台？（我在文档中什么也没看到——甚至没有 isDenormal 函数）如果取决于平台，是否有标志或其他东西？我如何知道哪些平台需要特殊处理，哪些不需要？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:47:05.677

Haxe 不支持这些操作。问题是它所解决的大多数本机平台也没有对此的任何支持。我在这里主要谈论 JavaScript、Flash、PHP 和 Neko。您当然可以构建自己的库，并尝试使用内联尽可能优化事物。

# c++ - 在命令提示符下运行 C++ - Windows

> ID：11365850
> 
> 赞同：89
> 
> 时间：2012-07-06T16:07:06.450
> 
> 标签：c++, windows, command-line

我知道现在每个人都使用 IDE，但我发现在 notepad++ 中编写代码、使用命令提示符命令编译它并从那里运行它更简单。至少这适用于 Java 和 Python。我试图弄清楚如何用 C++ 做到这一点，但一直找不到任何好的东西。是否有任何编译器（如 Java 的 JDK）我可以坚持我的路径并使用 C++ 等价物`javac`并`java`从 CMD 运行和编译我的代码？

注意：请不要发布关于 IDE 如何更好的答案和评论 - 我知道它们是。我只是习惯于用旧的方式来做：D

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-06T16:19:31.187

**执行任务的步骤：**

1.  首先，[下载](https://sourceforge.net/project/showfiles.php?group_id=2435&package_id=240780)并安装编译器。

2.  然后，键入 C/C++ 程序并保存。

3.  然后，打开命令行并将目录更改为存储源文件的特定目录，`cd`如下所示：

    ```
    cd C:\Documents and Settings\... 
    ```

4.  然后，要编译，请在命令提示符下键入：

    ```
    gcc sourcefile_name.c -o outputfile.exe 
    ```

5.  最后，要运行代码，请键入：

    ```
    outputfile.exe 
    ```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-06T16:17:05.353

这取决于您使用的编译器。

例如，如果您使用 Visual C++ .NET 2010 Express，从开始菜单运行 Visual C++ 2010 Express 命令提示符，您可以简单地编译和运行代码。

```
> cl /EHsc mycode.cpp
> mycode.exe 
```

或者从常规命令行，您可以`vcvars32.bat`先运行以设置环境。或者搜索`setvcvars.cmd`（FLOSS 项目的一部分）并使用它来定位已安装的 VS 并让它`vcvars32.bat`为您调用。

请检查您的编译器手册中的命令行。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-05-31T13:56:49.127

如果您正在运行 Windows，请使用以下命令：

```
g++ -o program program.cpp 
```

`g++`是编译器的名称，是创建文件`-o`所需的选项。`.o`程序（不带`.cpp`后缀）是`exe`文件，`program.cpp`是您要编译的源文件。

```
g++ -o program program.cpp&program.exe 
```

使用此快捷方式运行`.exe`程序文件。这可能在 Linux 中运行，但您可能必须使用`.out`suffix 而不是`.exe`. 使用这个方便的批处理脚本在 Windows 上执行您的程序：

```
@echo off&&cls
set /p pathName=Enter The Path where the file is located:%=%
cd %pathName%
REM set /p exec=Enter The Name of the executable you want to make:%=%
set /p file=Enter The Name of the file you want to compile:%=%
g++ -o %file% %file%.cpp
%file%.exe 
```

另存为`cppExecutor.bat`

您也可以在 Unix（Linux 和 Mac）操作系统上使用以下命令：

```
CC program.cc 
```

如果你想使用`gcc`：

```
gcc -o program program.cpp 
```

使用快捷方式：

```
gcc -o program program.cpp&program.exe 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-06T16:15:36.493

当然，大多数编译器都是这样开始的。[GCC](http://gcc.gnu.org/)可能是最受欢迎的（带有大多数 *nix 风格）。语法只是`gcc my_source_code.cpp`, 或`gcc -o my_executable.exe my_source_code.cpp`. 当然，当您有多个源文件时，它会变得更加复杂（就像在实现中一样；`#include`只要 GCC 可以找到它，任何东西都会自动工作）。

[MinGW](http://www.mingw.org/)似乎是 Windows 的 GCC 版本，如果您正在使用它的话。我还没有尝试过。

可以肯定的是，大多数 IDE 还包括命令行界面。我知道 Visual Studio 可以，但我从未使用过它。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-06T16:13:32.077

我真的不明白你的问题是什么，这个问题相当不具体。鉴于 Notepad++，我假设您使用 Windows。

这里有很多选择，从 MinGW（使用 GCC 工具链和 GNU `make`）到使用现代 MSVC。您可以使用[WDK](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)（`ddkbuild.bat/.cmd`或plain `build.exe`）、[Windows SDK](http://msdn.microsoft.com/en-us/library/ms717422.aspx)（ ）、 [premake](http://industriousone.com/premake)和[CMake](http://www.cmake.org/)`nmake.exe`等其他工具，或者MSVC 和 Windows SDK 附带的工具。`msbuild`

我的意思是，`cl.exe`对于 MSVC 和 WDK 和 Windows SDK，`gcc.exe`对于 MinGW，编译器名称会有所不同，但即使是从控制台，也习惯于以某种方式组织您的项目。`make`毕竟，这就是发明和朋友的目的。

因此，要了解特定编译器的命令行开关，请查阅该编译器的手册。要找到自动化构建的方法（即运行简单命令而不是复杂命令行的能力），您可以筛选[Wikipedia 上的列表](https://secure.wikimedia.org/wikipedia/en/wiki/Category:Build_automation)或选择我上面提到的工具之一并使用它。

旁注：没有必要要求人们不要提及 IDE。大多数专业开发人员已经将他们的构建自动化，以便从命令行而不是在 IDE 中运行（例如在开发周期中），因为这种方法有很多优点。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-03-12T01:32:46.913

1.  下载 MinGW 表格：[https ://sourceforge.net/projects/mingw-w64/](https://sourceforge.net/projects/mingw-w64/)
2.  使用 notepad++ 编写 C++ 源代码。
3.  使用命令行更改保存源代码的目录/文件夹（使用记事本++）
4.  编译：g++ 文件名.cpp -o 文件名.exe
5.  运行可执行文件：file_name.exe

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-07-12T04:06:43.073

*   第一个命令是：

> `g++ -o program file_name.cpp`

*   第二个命令是：

> `.\program.exe`

> *[让我们检查这张图片](https://i.stack.imgur.com/TH8qL.png)*

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-03-25T07:01:20.427

MinGW 的一个更好的替代方案是 bash for powershell。[您可以使用此处](https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/)给出的步骤为 Windows 10 安装 bash

安装 bash 后，您所要做的就是在终端上运行 bash 命令。

```
PS F:\cpp> bash
user@HP:/mnt/f/cpp$ g++ program.cpp -o program
user@HP:/mnt/f/cpp$ ./program 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-02-26T14:54:02.947

打开 cmd 并进入保存文件的目录。然后，为了编译，g++ FileName。cpp 或 gcc 文件名。cpp

对于运行，文件名。可执行程序

这是用于编译和运行程序。

确保 gcc 编译器安装在 PC 或笔记本电脑中。并且还必须设置路径变量。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-12-21T17:32:18.490

这是我在MAC上使用的。

> 使用您喜欢的编译器。

用 gcc 编译。

```
gcc -lstdc++ filename.cpp -o outputName 
```

或者用clang编译。

```
clang++ filename.cpp -o outputName 
```

编译完成后。你可以运行它。

```
./outputFile 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-21T01:53:18.410

将 MinGW 编译器 bin 目录添加到路径中。

用来`mingw32-g++ -s -c source_file_name.cpp -o output_file_name.o`编译

然后`mingw32-g++ -o executable_file_name.exe output_file_name.o`构建exe

最后，你运行`executable_file_name.exe`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-07T11:01:26.407

[工作 100%] 来自 Windows 用户。打开创建您的终端（powershell）`file.cpp`。

1.  `g++ file.cpp` //它将文件编译成a.exe
2.  `.\a.exe`//这将运行程序。

# android - 用你的安卓吐司？

> ID：11365851
> 
> 赞同：0
> 
> 时间：2012-07-06T16:07:08.330
> 
> 标签：android, toast

我正在尝试根据向上或向下按下的音量按钮编写一个基本的吐司示例。我知道这听起来很愚蠢和疯狂，因为大多数人都避免使用音量按钮，比如瘟疫。我只是想知道为什么“上下文”区域会以红色突出显示。

也许我在某个地方遗漏了一个代码，但无论哪种方式都与我正在使用的内容一致：

```
public void onStopTrackingTouch(SeekBar seekBar) {
    Toast.makeText(context, "Now stopped", Toast.LENGTH_LONG).show();
    } 
```

此外，代码本身也不是按预期运行的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T16:09:46.553

因为你的类/活动中没有定义上下文，所以你最好使用

```
public void onStopTrackingTouch(SeekBar seekBar) {
    Toast.makeText(this, "Now stopped", Toast.LENGTH_LONG).show();
    }  // if this method is inside activity 
```

或者

```
public void onStopTrackingTouch(SeekBar seekBar) {
    Toast.makeText(yourActivityname.this, "Now stopped", Toast.LENGTH_LONG).show();
    } 
```

或者

在您的活动中定义一个变量，在活动方法中将其`Context context;`初始化`onCreate()`为`context = this`；然后你可以在 Toast.makeText 方法中使用上下文。

# html - 如何将 mime 类型添加到 htaccess 文件？

> ID：11365852
> 
> 赞同：4
> 
> 时间：2012-07-06T16:07:08.723
> 
> 标签：html, apache, .htaccess, mime-types, add-type

我在向我的服务器添加 mime 类型时遇到问题。这是我当前的 .htaccess：

```
AuthUserFile /usr/local/www/pass/.htpasswd
AuthType Basic
AuthName "Mockups"

<LIMIT GET POST>
require valid-user
</LIMIT> 
```

我想添加这个：

```
AddType audio/mpeg .mp3 
```

但是当我这样做时，我会收到 500 内部服务器错误。然后我重新创建没有“AddType”行的 .htaccess 文件，它又可以正常工作了。可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:10:30.083

你需要

```
AllowOverride FileInfo 
```

在您的虚拟主机配置和 .htaccess 文件所在的[目录](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)中，能够使用[AddType](http://httpd.apache.org/docs/2.2/mod/mod_mime.html#addtype)指令。

# javascript - Twitter 按钮加载资源文件失败：//platform.twitter.com/widgets.js

> ID：11365856
> 
> 赞同：2
> 
> 时间：2012-07-06T16:07:27.933
> 
> 标签：javascript, html, twitter, twitter-button

将 Twitter 按钮的以下代码复制并粘贴到文本文件中时：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-via="jpkcambridge">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

我收到一个 JavaScript 错误，提示“无法加载资源文件：//platform.twitter.com/widgets.js”

这可能是什么原因造成的？以为我应该能够从 Twitter 复制和粘贴代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:14:52.277

您正在尝试在本地文件中加载无协议 URL。Twitter 通过 提供其脚本，该脚本在本地`//platform.twitter.com/widgets.js`转换为协议。`file:`这是提供内容的最佳实践（它不会在 IE 中生成那些烦人的混合内容警告），但只是在本地文件中不起作用。

尝试将该脚本行更新为`https://platform.twitter.com/widgets.js`. 这应该可以帮助您在本地进行测试；完成测试后，将其翻转回无协议结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:13:54.390

你确定你输入的代码正确吗？尝试为您的按钮使用直接链接目标，如下所示：只需将 URL 更改为您想要指向的任何位置，并将用户名更改为您使用的任何用户名。此代码是该站点的代码：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://anawesomesite.html" data-text="super site of awesome" data-via="Username" data-related="face" data-hashtags="emplosion">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:14:40.000

src 应该是 "https://......" 而不仅仅是 "//....." 吗？

# r - R中的实时，自动更新，增量绘图

> ID：11365857
> 
> 赞同：20
> 
> 时间：2012-07-06T16:07:31.437
> 
> 标签：r, plot, real-time

我正在尝试制作一个动态图，有点像自动更新，增量，可能是实时的。我想完成这样的事情 [http://www.youtube.com/watch?v=s7qMxpDUS3c](http://www.youtube.com/watch?v=s7qMxpDUS3c)

这是我到目前为止所做的。假设您在名为 temp 的 data.frame 中有一个时间序列。第一列是时间，第二列是值所在的位置。

```
for(i in 1: length(temp$Time[1:10000]))
{
flush.console()
plot(temp$Time[i:i+100],temp$Open[i:i+100],
xlim=c(as.numeric(temp$Time[i]),as.numeric(temp$Time[i+150])),
ylim=c(min(temp$Open[i:i+100]),max(tmep$Open[i:i+120])))
Sys.sleep(.09)
} 
```

这确实是增量绘制的，但我没有得到 100 个单位的长时间序列，而是我只得到一个点更新。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-06T19:54:13.010

你想做这样的事情吗？

```
n=1000
df=data.frame(time=1:n,y=runif(n))
window=100
for(i in 1:(n-window)) {
    flush.console()
    plot(df$time,df$y,type='l',xlim=c(i,i+window))
    Sys.sleep(.09)
} 
```

浏览您的代码：

```
# for(i in 1: length(temp$Time[1:10000])) { 
for (i in 1:10000) # The length of a vector of 10000 is always 10000
    flush.console()
    # plot(temp$Time[i:i+100],temp$Open[i:i+100],
    # Don't bother subsetting the x and y variables of your plot.
    # plot() will automatically just plot those in the window.
    plot(temp$Time,temp$Open, 
    xlim=c(as.numeric(temp$Time[i]),as.numeric(temp$Time[i+150]))
    # Why are you setting the y limits dynamically? Shouldn't they be constant?
    # ,ylim=c(min(temp$Open[i:i+100]),max(tmep$Open[i:i+120])))
    Sys.sleep(.09)
} 
```

# asp.net-mvc - mvc .net mobile：如何安排控制器（非常初学者）

> ID：11365863
> 
> 赞同：-1
> 
> 时间：2012-07-06T16:07:46.857
> 
> 标签：asp.net-mvc, asp.net-mvc-3

所以我想开始在我网站上的特定页面上工作，以获得移动版本。我想知道我应该怎么做？我是否为每个控制器创建一个新控制器，以便在检测到移动设备时重定向到该控制器？还是我只是使用 css 来更改页面的查看方式？

如果我需要创建一个新的控制器，我是否将它托管在子域上？

非常感谢评论。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:43:44.690

@TheRealKingK 是正确的选择一些关于此事的书。解决一个问题总是有 1000 种方法，所以这实际上取决于您项目中涉及的变量。我在最新的 MSDN 中阅读了一篇涉及移动/桌面策略的文章，其中有一些很好的见解。

1.  CSS 媒体查询非常适合帮助为不同大小的屏幕呈现内容，但无助于检测硬件功能，或过滤掉网站中的重媒体以加快在 3G 移动网络上的下载速度。

2.  拥有一个单独的控制器基地可能是一个不错的策略。我会让你的所有控制器都继承自一个自定义的基本控制器（除其他外），它将确定请求的来源，并将它们路由到正确的控制器。这实际上取决于站点的用途以及您的客户端在桌面上与移动应用程序（本机或 HTML5）上的需求

我正在尝试在后端使用自定义内容管理来滚动 MVC4 博客应用程序。到目前为止，它非常轻量级，所以 CSS 为我工作。

我不知道这听起来是否像书呆子漫谈，但希望它能给你一些见解。

# html - 如何在jenkins中导出渲染页面，例如带有html标记的控制台输出？

> ID：11365869
> 
> 赞同：0
> 
> 时间：2012-07-06T16:08:01.147
> 
> 标签：html, plugins, jenkins, file-conversion

站点上可见的控制台输出（或构建日志）包含 html 标记（主要来自 ansi color 插件），我打算将其作为电子邮件通知的一部分通过 email-ext 导出（作为内容或附件）。是否有任何现有的插件/方法可以用来有效地做到这一点？除了 wget + dom 解析，我想不出更好的方法，我觉得这比较乏味。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:39:09.073

在构建过程中，似乎无法通过 wget 完全获取渲染的页面（返回部分 javascript 代码）。这可能是有道理的，但出于我的目的，我最终决定从电子邮件中过滤掉 ansi 转义序列（这可以通过 build.getLog() + String.replaceAll 实现），因此它与在线版本一样可读。

# javascript - Jquery JScrollPane - 设置滚动速度/灵敏度

> ID：11365877
> 
> 赞同：0
> 
> 时间：2012-07-06T16:08:37.333
> 
> 标签：javascript, jquery, jquery-plugins, jscrollpane

我有一个相对简单的问题，我只是无法在任何地方找到解决方案。

有谁知道，如何以更敏感的滚动速度初始化 JScrollPane 插件（[插件网站）？](http://jscrollpane.kelvinluck.com/)默认速度太慢太慢，尤其是在更高分辨率的显示器上。

初始化示例：

```
 $('#element').jScrollPane(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-24T09:25:53.243

试试这个：

```
$('.ym-col3').jScrollPane({ showArrows: true, mouseWheelSpeed: 60 }); 
```

轮速在我的页面上不起作用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:13:20.890

您正在搜索*wheelSpeed*（默认为 18）

```
$('#element').jScrollPane({wheelSpeed: 50}); 
```

# asp.net - 分页标准

> ID：11365879
> 
> 赞同：3
> 
> 时间：2012-07-06T16:09:00.227
> 
> 标签：asp.net

有谁知道分页的定义标准？我们有一家咨询公司为我们建立了一个网站，并且该网站的一部分有一个使用分页的项目列表。它们有一个非常标准的分页布局，由数字列表（链接）两侧的两个按钮组成。

```
[<<]  [<]   1   2   3   4   5   [>]  [>>] 
```

按钮 [<] 和 [>] 可让您浏览页面，无论是后退还是前进。这些数字都是指向页面的直接链接。

我遇到的问题是带有双“箭头”的按钮。我认为这些应该将您带到第一页或最后一页。这里的每个人都同意这一点，并期望它以这种方式工作。但是，设计该网站的公司有这些按钮可以向前或向后跳 10 页。我从来没有见过这样的做法，所以预期的行为不是我和其他用户所期望的。这个网站昨晚刚刚上线，我们已经有 3 位用户将此功能报告为错误。

有一套标准我可以用来向顾问展示吗？他们不想更改此功能。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:29:40.200

分页标准的问题是最好的解决方案真的取决于：

*   分页的内容
*   结果集的大小
*   遍历结果集的性能和技术可行性

在您的特定情况下，我不希望双箭头移动 10。这可能比第一个/最后一个更有用，但是应该以某种方式向用户显示任意 10 值。

以下是一些 UI 分页示例：

*   [分页画廊：示例和良好实践](http://www.smashingmagazine.com/2007/11/16/pagination-gallery-examples-and-good-practices/)
*   [Twitter 引导分页](http://cssdeck.com/item/271/twitter-bootstrap-pagination-and-pager)
*   [雅虎搜索分页](http://developer.yahoo.com/ypatterns/navigation/pagination/search.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:19:23.920

我从来没有听说过像*标准*这样的东西，但我总是按照你描述的方式编码。如果您的页面数量相对较多，但对于非常大的数量，我可以看到 forward 10 很有用。但是，如果您有那么多页面，那么用户无论如何都不太可能翻阅数据。在这种情况下需要搜索。无论如何，一位顾问告诉您您错了，您似乎应该寻找一位新顾问。他们可能不同意（我可以看到他们的论点），但你应该有最终决定权......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T16:32:19.193

就个人而言，我认为最左边和最右边的按钮应该分别移动到第一页和最后一页。但是，我也认为制造它的公司考虑到他们使用的是双箭头，因此使用了正确的行为。对我来说，双箭头表示它与单箭头的作用相同，但*更多*。换句话说，我认为双箭头向左或向右移动 10 页是有道理的，因为单箭头向左或向右移动 1 页。

基本上：

*   我**同意所用****符号**的行为。
*   我**不同意****符号**的选择。在大多数情况下，我认为单箭头 + 垂直线（ l< 和 >l ）会更清楚，但这只是我个人的看法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-26T04:36:51.387

这是我最近构建的分页控件的代码，具有以下优点：

*   第一页和最后一页页码始终可见（不需要 [<<] 或 [>>] 按钮）
*   单击 [...] 可以快速跳转到任何页面
*   没有要本地化的单词（不需要下一个、上一个、第一个、最后一个按钮，因为控件很清晰）
*   没有依赖项（不需要 jQuery）

运行下面的代码片段，让我知道你的想法。

```
var Pagination = {
  code: '',

  Extend: function(data) {
    data = data || {};
    Pagination.size = data.size || 300;
    Pagination.page = data.page || 1;
    Pagination.step = data.step || 3;
  },

  Add: function(s, f) {
    for (var i = s; i < f; i++) {
      Pagination.code += '<a>' + i + '</a>';
    }
  },

  Last: function() {
    Pagination.code += '<i>...</i><a>' + Pagination.size + '</a>';
  },

  First: function() {
    Pagination.code += '<a>1</a><i>...</i>';
  },

  Click: function() {
    Pagination.page = +this.innerHTML;
    Pagination.Start();
  },

  Prev: function() {
    Pagination.page--;
    if (Pagination.page < 1) {
      Pagination.page = 1;
    }
    Pagination.Start();
  },

  Next: function() {
    Pagination.page++;
    if (Pagination.page > Pagination.size) {
      Pagination.page = Pagination.size;
    }
    Pagination.Start();
  },

  TypePage: function() {
    Pagination.code = '<input onclick="this.setSelectionRange(0, this.value.length);this.focus();" onkeypress="if (event.keyCode == 13) { this.blur(); }" value="' + Pagination.page + '" /> &nbsp; / &nbsp; ' + Pagination.size;
    Pagination.Finish();
    var v = Pagination.e.getElementsByTagName('input')[0];
    v.click();
    v.addEventListener("blur", function(event) {

      var p = parseInt(this.value);

      if (!isNaN(parseFloat(p)) && isFinite(p)) {
        if (p > Pagination.size) {
          p = Pagination.size;
        } else if (p < 1) {
          p = 1;
        }
      } else {
        p = Pagination.page;
      }

      Pagination.Init(document.getElementById('pagination'), {
        size: Pagination.size,
        page: p,
        step: Pagination.step
      });
    }, false);
  },

  Bind: function() {
    var a = Pagination.e.getElementsByTagName('a');
    for (var i = 0; i < a.length; i++) {
      if (+a[i].innerHTML === Pagination.page) a[i].className = 'current';
      a[i].addEventListener('click', Pagination.Click, false);
    }
    var d = Pagination.e.getElementsByTagName('i');
    for (i = 0; i < d.length; i++) {
      d[i].addEventListener('click', Pagination.TypePage, false);
    }
  },

  Finish: function() {
    Pagination.e.innerHTML = Pagination.code;
    Pagination.code = '';
    Pagination.Bind();
  },

  Start: function() {
    if (Pagination.size < Pagination.step * 2 + 6) {
      Pagination.Add(1, Pagination.size + 1);
    } else if (Pagination.page < Pagination.step * 2 + 1) {
      Pagination.Add(1, Pagination.step * 2 + 4);
      Pagination.Last();
    } else if (Pagination.page > Pagination.size - Pagination.step * 2) {
      Pagination.First();
      Pagination.Add(Pagination.size - Pagination.step * 2 - 2, Pagination.size + 1);
    } else {
      Pagination.First();
      Pagination.Add(Pagination.page - Pagination.step, Pagination.page + Pagination.step + 1);
      Pagination.Last();
    }
    Pagination.Finish();
  },

  Buttons: function(e) {
    var nav = e.getElementsByTagName('a');
    nav[0].addEventListener('click', Pagination.Prev, false);
    nav[1].addEventListener('click', Pagination.Next, false);
  },

  Create: function(e) {
    var html = [
      '<a>&#9668;</a>', // previous button
      '<span></span>', // pagination container
      '<a>&#9658;</a>' // next button
    ];
    e.innerHTML = html.join('');
    Pagination.e = e.getElementsByTagName('span')[0];
    Pagination.Buttons(e);
  },

  Init: function(e, data) {
    Pagination.Extend(data);
    Pagination.Create(e);
    Pagination.Start();
  }
};

var init = function() {
  Pagination.Init(document.getElementById('pagination'), {
    size: 30, // pages size
    page: 1, // selected page
    step: 2 // pages before and after current
  });
};

document.addEventListener('DOMContentLoaded', init, false);
```

```
html {
  height: 100%;
  width: 100%;
  background-color: #ffffff;
}
body {
  margin: 0;
  height: 100%;
  width: 100%;
  text-align: center;
  font-family: Arial, sans-serif;
}
body:before {
  content: '';
  display: inline-block;
  width: 0;
  height: 100%;
  vertical-align: middle;
}
#pagination {
  display: inline-block;
  vertical-align: middle;
  padding: 1px 2px 4px 2px;
  font-size: 12px;
  color: #7D7D7D;
}
#pagination a,
#pagination i {
  display: inline-block;
  vertical-align: middle;
  width: 22px;
  color: #7D7D7D;
  text-align: center;
  padding: 4px 0;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
#pagination a {
  margin: 0 2px 0 2px;
  cursor: pointer;
}
#pagination a:hover {
  background-color: #999;
  color: #fff;
}
#pagination i {
  border: 2px solid transparent;
  cursor: pointer;
}
#pagination i:hover {
  border: 2px solid #999;
  cursor: pointer;
}
#pagination input {
  width: 40px;
  padding: 2px 4px;
  color: #7D7D7D;
  text-align: right;
}
#pagination a.current {
  border: 1px solid #E9E9E9;
  background-color: #666;
  color: #fff;
}
```

```
<div id="pagination"></div>
```

# php - 基于按钮单击的 php 数组到 javascript

> ID：11365881
> 
> 赞同：1
> 
> 时间：2012-07-06T16:09:01.133
> 
> 标签：php, javascript, arrays, forms

概述 - 您单击一个按钮（在 javascript 页面上），该按钮将向 php 页面发送请求以提取特定数组，然后应将该数组发送回 javascript 页面。当该数组传递到 javascript 页面时，我需要将其传递到函数中以供使用。有谁知道该怎么做。

我目前正在做的事情如下 -

```
<form action="GetTest.php" method="post">
    Something: <input id = "something" input type="submit" name="q" on/>
</form> 
```

当我点击提交时，我被重定向到我的 php 页面，其中包含我需要的数组（这是预期的），但我不知道从那里开始做什么。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:19:29.177

您有两种方法可以帮助您：

1.  **使用`GET`或`POST`值**- 在您的情况下`POST`。内部`GetTest.php`使用`$_POST`变量来处理从表单接收到的数据。

    *参考：* [$_POST 文档](http://php.net/manual/en/reserved.variables.post.php)

2.  **使用 AJAX 功能**。在这种情况下，您将使用`XMLHTTPRequest`or `$.ajax`（如果您即将使用 jQuery）。

    *参考：* [使用 jQuery 和 AJAX - NetTuts+](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)或[AJAX 教程 - W3Schools](http://www.w3schools.com/ajax/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:12:58.493

首先，处理 HTML，这样您就不会将其传递给 PHP 表单（留在页面上）：

改变：

```
<form action="GetTest.php" method="post">
    Something: <input id = "something" input type="submit" name="q" on/>
</form> 
```

至：

```
 Something: <input id = "something" input type="submit" name="q" on/> 
```

然后，查看 jQuery 的 AJAX 功能：

```
$("#something").click(function() {
    $.ajax({
      url: 'GetTest.php',
      type: 'POST',
      success: function(data){
        alert('success');
      },
      error: function(){
        alert('failure');
      }
    });
}); 
```

您可以从 GetTest.php 中检索 POST 数据并直接通过 Javascript 传输它。

祝你好运！

# php - php 框架如何保护动作脚本/数据服务文件？

> ID：11365887
> 
> 赞同：0
> 
> 时间：2012-07-06T16:09:19.460
> 
> 标签：php, apache, model-view-controller

我想知道框架如何阻止用户直接访问操作/数据服务脚本。

例如我们去`www.test.com/test.html`模板`test.html`调用**`test_action.php`**。是什么阻止用户访问此操作脚本直接所在的目录？

如`www.test.com/index/actions/test_action.php`

服务器权限是如何配置的，所以**`test_action.php`**只能通过`test.html`.

*   在我被困在共享托管服务器上的 doc-root 中的情况下
*   在我运行节目的情况下〜IE我的apache服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:16:24.340

如果您什么都不做，并且 test_action.php 在您的 docroot 下，则用户可以访问它。有几种方法可以解决这个问题，如果这是不可接受的（请注意，如果您的服务器正确安装/配置了 PHP，他们将*看*不到源代码，只会看到源代码的输出）。

如果不允许用户直接查看该脚本的输出，您可以选择以下几种方法之一：

1.  将所有*受保护*的脚本放在 HTTP 服务器的 docroot*之外*，然后使用 ../includes 或类似方法引用它们
2.  [使用 apache 访问控制](http://www.techiecorner.com/1245/how-to-block-access-to-certain-file-types-using-htaccess/)文件拒绝对 .php 的请求（在传递时将其切断）。
3.  创建一个名为`entry.php`声明全局常量的文件，然后首先从所有*有效*入口点包含该文件，然后在每个*受保护*的脚本中检查该常量的存在（IIRC，这就是 CodeIgniter 所做的）。

一般推荐#1。如果这不好，#2 非常有效，#3 是，IMO，只是俗气。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:22:40.867

既然你问php框架如何处理这个问题，有两种常见的方法：

*   **正确的方法**：

    将所有代码保留在`DOCUMENT_ROOT`. 基本上你有一个`/public`文件夹，其中只包含`index.php`，然后包含`include '../application/init.php`'.

    所有其他 php 文件都放在外面`DOCUMENT_ROOT`，不能直接访问。

*   **愚蠢的方式**

    他们在文件中定义了一个常量`index.php`，所有其余文件都以：

    ```
     defined('SOMETHING') or die('No direct script access.'); 
    ```

    如果服务器上的 php 扩展程序发生故障，这显然会*失败*。您最终会得到所有人都可以看到的 php 源代码。

*顺便说一句*，我不建议使用任何特定于 apache 的方式来处理此问题，因为您无法确定您的框架将在哪个网络服务器上使用。NginX 和 Lighttpd 都变得非常流行。也总是有 IIS。

# asp.net - 向 System.Web.UI.Control 添加样式

> ID：11365891
> 
> 赞同：2
> 
> 时间：2012-07-06T16:09:25.827
> 
> 标签：asp.net, vb.net, attributes, styles

我正在从数据库模式构建一大堆不同的控件。当我在后面的代码中运行控件时，我想将控件和样式（作为数据库中的字符串......例如“颜色：白色；宽度：50 像素；高度：10 像素；”）传递给重新- 可用的功能。

这就是我认为我应该这样做的方式：

```
 Sub AddStylesToControl(ByRef ctrl As Control, Styles As String)

    'split styles string by semi colon
    Dim StyleArr() As String
    Dim count As Integer
    StyleArr = Styles.Split(";")
    For count = 0 To StyleArr.Length - 1

        '//ctrl.Attributes.Add("style", "color: red;")
        ctrl.Attributes.Add("style", StyleArr(count))
    Next

End Sub 
```

不幸的是，在 "ctrl.Attributes.Add("style", StyleArr(count))" 这一行我收到一个错误：'attributes' is not a member of 'system.web.ui.control' 我理解错误的含义，但有人知道解决这个问题的方法吗？

非常感谢，斯科特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T16:13:38.960

您应该使用`WebControl`而不是`Control`. `WebControl`派生自`Control`但包括该`Attributes`属性。

此外，控件的“样式”属性应包含一个字符串，其中包含由 . 分隔的 CSS `;`。因此，传递数据库中的整个字符串就足够了，您不需要再进行任何处理。

所以你的函数应该看起来像......

```
Sub AddStylesToControl(ByRef ctrl As WebControl, ByVal styles As String)
    ctrl.Attributes("style") = styles
End Sub 
```

我已将其更改为直接设置（而不是`Add`），因为这将覆盖任何现有的`"style"`. 如果集合中已经存在，则使用`Attributes.Add`将失败。`"style"`

# javascript - Web Workers - JSON 的可传输对象

> ID：11365894
> 
> 赞同：30
> 
> 时间：2012-07-06T16:09:34.920
> 
> 标签：javascript, json, html, web-worker

在大型 JSON 对象上使用 worker.postMessage 时，HTML 5 Web 工作者非常慢。我试图弄清楚如何将 JSON 对象传输到网络工作者 - 使用 Chrome 中的“可传输对象”类型，以提高速度。

这就是我所指的，它似乎应该加快速度：http: [//updates.html5rocks.com/2011/12/Transferable-Objects-Lightning-Fast](http://updates.html5rocks.com/2011/12/Transferable-Objects-Lightning-Fast)

我很难找到一个很好的例子（而且我不相信我想使用 ArrayBuffer）。任何帮助，将不胜感激。

我在想象这样的事情：

```
worker = new Worker('workers.js');

var large_json = {};
for(var i = 0; i < 20000; ++i){
   large_json[i] = i;
   large_json["test" + i] = "string";
};

//How to make this call to use Transfer Objects? Takes approx 2 seconds to serialize this for me currently.
worker.webkitPostMessage(large_json); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T15:06:39.357

如果您必须从现有的 Json 数组从头开始构建它，那么使用可转移对象将无济于事（这非常接近克隆......）

Json 数据从何而来？保持工作线程上所有繁重工作的一种可能方法是让它使用 XmlHttpRequest 获取数据，对其进行转换并将其发送到 UI 线程。这样，克隆的高成本发生在工作线程上，虽然它需要与 UI 线程中相同的时间，但它不会阻塞您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T19:37:21.607

好的，我这样做了，我不知道这是好还是坏，理想还是最坏的方法。我刚刚做完。在工人档案中

```
var data = e.data;
var string = String.fromCharCode.apply(null, new Uint16Array(data));
var objnow = JSON.parse(string); 
```

在 html 文件中

```
function str2ab(str) {
   var buf = new ArrayBuffer(str.length*2); // 2 bytes for each char
   var bufView = new Uint16Array(buf);
   for (var i=0, strLen=str.length; i<strLen; i++) {
     bufView[i] = str.charCodeAt(i);
   }
   return buf;
 }
function stop() {
 var obj = {'cmd': 'stop', 'msg': 'Bye'};
 var str= JSON.stringify(obj);
 var arbfr = str2ab(obj);
 worker.postMessage(arbfr,[arbfr]);
} 
```

现在它可以工作了，我可以发送 json 对象，传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:10:10.543

虽然不使用“可转移对象”，但这可能会解决您的问题。

您也可以尝试优化您的数据表示。例如，您的示例需要 ~1350 毫秒为我打包/解包（Google Chrome 19），但以下代码的执行速度快了 ~25 倍（50 毫秒）：

```
console.time('json');
var a = [], test = [];
for(var i = 0; i < 20000; ++i){
   a.push(i);
   test.push("string");
};
var large_json = {
  a: a.join(','),
  test: test.join(',')
};
large_json = JSON.parse(JSON.stringify(large_json));
large_json.a = large_json.a.split(",");
large_json.test = large_json.test.split(",");
console.timeEnd('json'); 
```

# php - PHP比较2个文件夹以查找丢失的文件

> ID：11365898
> 
> 赞同：3
> 
> 时间：2012-07-06T16:10:06.873
> 
> 标签：php, compare

我有两个图像文件夹 original/ 和 thumbs/ 但文件数不同（thumbs/ 少）所以我需要找到丢失的图像，文件名完全相同 IE 没有前缀，所以标题说如何可以我比较两个文件夹并输出丢失图像的列表？

**更新：**

没有一个答案似乎符合我的要求，但我想出了这个非常粗略的答案

不建议使用！！

我们给 body 一个深色背景，然后用明亮的突出颜色为 img 设置样式：

```
<style>
    body{background:#000;}
    img {height:10px;width:10px;background:pink;border:1px solid #ccc;padding:10px;margin:5px;}
</style> 
```

PHP：

```
// Read dir ...
        $images = glob('original/{*.jpg,*.gif,*.png}', GLOB_BRACE);

// throw out a foreach ...
        foreach($images as $image) 
         {

// using str_replace switch folders 
          $image  = str_replace('original/', 'thumbs/', $image);

// echo result 
          $result = '<img src="' . $image . '" alt="m" />';
          echo $result;
} 
```

经过漫长的等待和几乎杀死您的系统所有图像显示，现在您只需查看每个图像并找到丢失的图像。

在此处查看结果：http: [//s12.postimage.org/5kcsvs48r/missing.jpg](http://s12.postimage.org/5kcsvs48r/missing.jpg)

就像我说的那样，这是一种非常粗暴的方式，并且非常耗费服务器，如果只有几张图片可能还可以，但是您可能通过阅读很容易找到它们，但是我有超过 8000 张图片要浏览，就像我之前所说的那样是不可取的，但我想我会分享我的答案，无论好坏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T16:21:43.480

一种开始的方式：

```
$original = array_map('basename', glob('original/*.{jpg,gif,png}', GLOB_BRACE));
$thumbs = array_map('basename', glob('thumbs/*.{jpg,gif,png}', GLOB_BRACE));
$missing_thumbs = array_diff($original, $thumbs);
$missing_original = array_diff($thumbs, $original); 
```

**编辑说明：**我错过了`array_diff()`在这里不起作用，因为`glob()`数组包含路径名......用`basename()`映射修补，现在它可以按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:42:55.097

php.net 有很多关于如何通过目录的文档和讨论（参见：[`scandir()`](http://php.net/manual/en/function.scandir.php)、、[`readdir()`](http://php.net/manual/en/function.readdir.php)等等[`glob()`](http://php.net/manual/en/function.glob.php)）。

## 示例 1

这个例子读取一个平面目录（没有子目录）并比较它们，把结果留在数组的最后。

```
$original = glob('path/to/original/*.*');
$thumbs   = glob('path/to/thumbs/*.*');

$missing = array('original' => array(), 'thumbs' => array());

$missing['original']   = array_diff($thumbs, $original);
$missing['thumbs'] = array_diff($original, $thumbs);

print_r($missing); // Prints out a sorted array of the missing files for each dir 
```

此示例的问题是，如果您在任一文件夹中都有子文件夹。要处理这个问题，您必须使用如下递归结构。

## 示例 2

此示例利用递归通过和的*所有*子目录查找*所有*丢失的文件。*`thumbs/``original/`*

 *```
/* Returns an associative array of all files under a directory,
including those inside of sub-directories, using recursion */
function scan($path) {
  $dir = opendir($path);

  while(false !== ($f = readdir($handle)))
    if(is_dir($f))
        $files[$f] = scan($path.$f.'/');
      else
        $files[$f] = $f;

    return $files;
  }

$original = scan('path/to/original/');
$thumbs = scan('path/to/thumbs/');

$missing['thumbs'] = array_diff($original, $thumbs);
$missing['original'] = array_diff($thumbs, $original);

print_r($missing);
print_r($original);
print_r($thumbs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:27:56.147

```
$dir_files1 = array();
$dir_files2 = array();

//Do this twice, Once for each directory
if ($handle = opendir('/path/to/files1')) {
    echo "Directory handle: $handle\n";
    echo "Entries:\n";

    /* This is the correct way to loop over the directory. */
    while (false !== ($entry = readdir($handle))) {
        $dir_files1[] = $entry;
    }
}

//Then compare the two arrays with eachother
foreach($dir_files1 as $d1)
{
 $match =false;
 foreach($dir_files2 as $d2)
 {
    if($d1==$d2)
     $match=true;
 }
 if(!$match)
   do_something();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:17:23.823

以下内容来自[www.php.net/opendir/](http://www.php.net/opendir/)：

```
// Open a known directory, and proceed to read its contents
if (is_dir($dir)) {
    if ($dh = opendir($dir)) {
        while (($file = readdir($dh)) !== false) {
            echo "filename: $file : filetype: " . filetype($dir . $file) . "\n";
        }
        closedir($dh);
    }
} 
```

您可以对两个目录执行此操作，并将文件名放在单独的数组中，而不是回显它们。然后比较数组以查找丢失的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T16:17:40.330

```
$originalsDir = 'path';
$originalsArray = array();
if ($handle = opendir($originalsDir)) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry == '.' || $entry == '..') {
            continue;
        }
        $originalsArray[] = $entry;
    }
    closedir($handle);
} else {
    die('Could not open originals dir: ' . $originalsDir);
}
$thumbsDir = 'path';
$thumbsArray = array();
if ($handle = opendir($thumbsDir)) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry == '.' || $entry == '..') {
            continue;
        }
        $thumbsArray[] = $entry;
    }
    closedir($handle);
} else {
    die('Could not open thumbs dir: ' . $thumbsDir);
}

$missingThumbs = array_diff($originalsArray, $thumbsArray); 
```

见[array_diff()](http://php.net/array_diff)，[opendir()](http://php.net/opendir)，[readdir()](http://php.net/readdir)*

# php - 为什么要实现两个已经相互扩展的接口？

> ID：11365902
> 
> 赞同：3
> 
> 时间：2012-07-06T16:10:28.510
> 
> 标签：php, spl, arrayobject, arrayiterator

我想了解一些关于[`ArrayObject`](http://php.net/manual/en/class.arrayobject.php)和[`ArrayIterator`](http://php.net/manual/en/class.arrayiterator.php)类的东西

**`ArrayObject`**: 这个类实现了[`IteratorAggregate`](http://php.net/manual/en/class.iteratoraggregate.php)和[`Traversable`](http://www.php.net/manual/en/class.traversable.php)接口。既然`IteratorAggregate`扩展`Traversable`了自己，为什么`ArrayObject`在它可以实现的时候同时实现`IteratorAggregate`呢？

**`ArrayIterator`**：如上，这个类实现了两者并[`Iterator`](http://www.php.net/manual/en/class.iterator.php)扩展了。`Traversable``Iterator`

当这些类可以实现扩展接口时，为什么要实现两个接口`Traversable`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:27:23.477

根据[SPL source code](http://www.php.net/~helly/php/ext/spl/spl_8php-source.html)， ArrayObject 不`Traversable`直接实现：

```
class ArrayObject implements IteratorAggregate, ArrayAccess, Countable
{
    ...
} 
```

这与[SPL 文档](http://www.php.net/~helly/php/ext/spl/main.html)相匹配。我相信 DaveRandom 是正确的。

# python - Python3 函数中没有标识符的单个 * 是什么意思？

> ID：11365909
> 
> 赞同：23
> 
> 时间：2012-07-06T16:10:52.370
> 
> 标签：python, function, python-3.x

Python 函数参数中没有标识符的单个 * 是什么意思？这是一个适用于 Python3.2 的示例：

```
class Shape:
    def __init__(self, *, shapename, **kwds):
        self.shapename = shapename
        super().__init__(**kwds) 
```

对我来说，自我之后的星星很奇怪。

我在这里找到了它（从第 46 行开始）： [http ://code.activestate.com/recipes/577720-how-to-use-super-effectively/](http://code.activestate.com/recipes/577720-how-to-use-super-effectively/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T16:12:29.847

单独的`*`表示所有后续参数都是仅关键字参数，也就是说，它们只能使用它们的名称提供，而不是作为位置参数。

有关详细信息，请参阅[PEP 3102](http://www.python.org/dev/peps/pep-3102/)。

# javascript - 如何测试 Date 对象是否等于特定日期

> ID：11365911
> 
> 赞同：2
> 
> 时间：2012-07-06T16:11:00.910
> 
> 标签：javascript, date, jquery-ui-datepicker

确定对象是否等于 2012 年 7 月 4 日的**最佳（最清晰、最短、最快等）方法是什么？**`Date`

例如，这可行，但相当冗长：

```
if (date.getFullYear() === 2012 && date.getMonth() + 1 === 7 && date.getDate() === 4) 
```

有没有更优雅的解决方案？

（在我的实际场景中，服务器端代码将插入特定日期以进行测试。此外，`date`来自 jQuery UI 日期选择器，因此将具有 00:00:00 的时间组件。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T16:15:07.197

构造一个新日期并比较结果`getTime`：

```
var existingDate = new Date('2012', '6', '4');
new Date('2012', '6', '4').getTime() == existingDate.getTime(); 
```

# ios - 如何在 iOS 中使用 NSURLConnection 关闭 SSL 连接

> ID：11365913
> 
> 赞同：2
> 
> 时间：2012-07-06T16:11:16.463
> 
> 标签：ios, ssl, nsurlconnection, ssl-certificate, nsmutableurlrequest

我的钥匙串中有一个证书，并且为一个请求创建了一个 SSL 连接。当我们从设备钥匙串中删除该证书时，我如何关闭该 SSL 连接。如果有任何示例代码可用，如果有人可以分享，我将不胜感激。

我需要它作为紧急，请分享一些答案。

# c++ - 将 C++ Qt 应用程序与 Google AdWords API 连接的推荐方法

> ID：11365916
> 
> 赞同：1
> 
> 时间：2012-07-06T16:11:30.193
> 
> 标签：c++, python, qt, soap, google-ads-api

将 C++ Qt 应用程序与 Google AdWords API 连接的推荐方式是什么？有许多[客户端库（java、python、C# 等）](https://developers.google.com/adwords/api/docs/clientlibraries)，但没有一个是基于 C++ 的。所以我可以：

1.  使用以一种支持的语言编写的外部程序。它在错误处理、并发性和可移植性方面带来了许多问题（在我的例子中是 Windows 和 Mac）
2.  将 JavaScript 库与 QtWebKit 一起使用，但这似乎有点矫枉过正。
3.  制作我自己的 SOAP 客户端实现。这将是越野车。
4.  使用[QtSOAP](https://github.com/commontk/QtSOAP)，但我认为它不支持 Qt 4.8。
5.  在 C++ 中嵌入 python。我从来没有做过，所以我不知道会出现什么问题。
6.  寻找其他方式。

我需要使用几乎所有的 API 功能。那么哪种方法最不容易出错？

# asp.net-mvc-3 - 在 linq to entity 中选择最大值

> ID：11365917
> 
> 赞同：3
> 
> 时间：2012-07-06T16:11:34.000
> 
> 标签：asp.net-mvc-3, linq, entity-framework

我正在尝试为**用户**选择 MAX LevelId 值，然后将该值分配给变量。

在普通 SQL 中，等价于：

```
SELECT        MAX(LevelID) AS MaxLevel
FROM            Character
WHERE        (UserId = 'John')

//Check User existing Characters max level per user 
```

**int 用户级别 ID = 0;**

```
var userQuery = (from o in db.Characters
where o.UserId == UserID
      select o); 
```

**UserLevelID = userQuery.Max(LevelID);**

问题就在这里。我不知道如何提取levelID的最大值

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T16:13:57.587

您可以在一个查询中完成所有操作：

```
var userLevelId = db.Characters.Where(o => o.UserID == UserID)
                               .Max(o => o.LevelID); 
```

我已将其从查询表达式更改为不再是查询表达式，因为这引入了更多麻烦-在它们实际上有助于提高可读性的地方使用查询表达式，而扩展方法则需要更易读的简单解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T16:15:08.283

怎么样：

```
var theLevel = db.Characters.Where(z => z.UserId == UserID).Max(z => z.LevelID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T11:12:23.270

var max = db.Characters.Where(o => o.UserID == UserID).Max(o => o == null ? 0 : o.LevelID);

当 db 中没有记录时，它会毫无例外地返回 0。

# plone - 克隆 CMS - 无法发布页面

> ID：11365922
> 
> 赞同：1
> 
> 时间：2012-07-06T16:11:42.410
> 
> 标签：plone

我们正在使用已发布站点的 Plone CMS 系统。当我创建一个新页面时，突然之间我无法发布它。我尝试复制已发布的页面以查看是否会发布，但是当我尝试使其生效时收到相同的错误。

以下是完整的错误消息： [https ://docs.google.com/document/pub?id=1ZMSoK5UU1PuFjAc8FdckjUcqo6XoIN3nfEHG5zfaltI](https://docs.google.com/document/pub?id=1ZMSoK5UU1PuFjAc8FdckjUcqo6XoIN3nfEHG5zfaltI)

知道问题是什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:09:24.217

根据错误消息：quintagroup.plonegooglesitemaps 尝试 ping Google 失败，可能是为了让它知道该出版物。我会尝试禁用该插件。

# javascript - 使用 jQuery 禁用表单中的输入字段

> ID：11365926
> 
> 赞同：2
> 
> 时间：2012-07-06T16:12:13.260
> 
> 标签：javascript, jquery, jsf-2, liferay-6

我最近升级到 Liferay 6.0、JSF 2.1 和 jQuery 1.7。

这是我的html表单：

```
 <h:form id="fundRequestForm" action="" method="post">
      <!-- Inside this I have various form field -->
    </h:form> 
```

html页面源码中生成的表单：

```
<form id="_jpfcpncuivr_A2262_j_id1:fundRequestForm" name="_jpfcpncuivr_A2262_j_id1:fundRequestForm"
method="post" action="">
</form> 
```

我想禁用隐藏表单字段以外的表单中的所有输入字段。

这是我的javascript

```
jQuery(document).ready(function()
{
  jQuery('form#_jpfcpncuivr_A2262_j_id1:fundRequestForm input[type!="hidden"]').attr('disabled', 'true');
}); 
```

输入字段没有被禁用。请让我知道这段代码有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:27:06.303

虽然在 HTML 元素 ID/名称中有效，但冒号是 CSS 选择器中的特殊字符，因为它代表伪选择器的开始。您需要在 CSS 选择器中对其进行转义。

```
jQuery('form#_jpfcpncuivr_A2262_j_id1\\:fundRequestForm input[type!="hidden"]').attr('disabled', 'true'); 
```

### 也可以看看：

*   [如何使用 jQuery 选择 JSF 组件？](https://stackoverflow.com/questions/7927716/how-to-select-primefaces-ui-or-jsf-components-using-jquery/7928290#7928290)（有关替代方案的更详细答案）
*   [默认情况下，JSF 会生成不可用的 id，这些 id 与 web 标准的 css 部分不兼容](https://stackoverflow.com/questions/10726653/by-default-jsf-generates-unusable-ids-which-are-incompatible-with-css-part-of)（有人咆哮说它与标准不兼容，但答案证明它是错误的）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T17:06:45.627

尝试添加一个类：

```
<h:form id="fundRequestForm" action="" method="post" class="someClass">
  <!-- Inside this I have various form field -->
</h:form> 
```

JS：

```
jQuery(document).ready(function()
{
  jQuery('.someClass input').prop('disabled', true); //<-- use prop NOT attr
}); 
```

# jqgrid - JQGrid 编辑表单设置焦点在一个元素上

> ID：11365927
> 
> 赞同：0
> 
> 时间：2012-07-06T16:12:14.360
> 
> 标签：jqgrid, jqgrid-asp.net

嗨，我有一个 jqGrid 设置，我试图在加载编辑表单后将焦点设置在我的一个输入框上。我的代码如下：

```
ondblClickRow: function (rowid) {
    $(this).jqGrid('editGridRow', rowid, { left: '250', afterShowForm: function (formid) {   
          console.log('Bong');  
           $('elementID').focus(); } 
}); 
```

显示“Bong”，事件触发，但焦点命令似乎不起作用，我的 google-fu 似乎没有想出为什么这不起作用的答案。

先感谢您。

编辑：我的代码带有 $('#elementID').focus(); 仍然没有工作，所以我在下面实施了 Oleg 的延迟建议，它开始按我想要的方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:15:15.190

在我看来，您只是在代码中输入了错误：您应该使用

```
$('#elementID').focus(); 
```

代替

```
$('elementID').focus(); 
```

在某些情况下，需要将代码放在`setTimeout(function() {/*here*/}, 50);`块中，但我认为在您的情况下不需要。

# r - r 前测差异的相关控制

> ID：11365929
> 
> 赞同：0
> 
> 时间：2012-07-06T16:12:20.453
> 
> 标签：r, correlation

这看起来很简单——我很可能没有想到正确的条款。

我有两组。它们显示了小组和预测试分数之间的相关性。

在查看组和后测之间的相关性时，我想控制前测分数之间的初始差异。

我如何在 r 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:19:04.323

```
 model <- lm(post ~ pre + grp, data=dat) 
```

这确实是重复测量设计的最简单案例，并且在过去一年中产生了大量的统计评论和意见。我确实尝试找到较早的 SO 帖子，但两次尝试均未成功，因此仅发布了答案。您可能需要访问 stats.stackexchange.com 并使用回归或 ANOVA 搜索 pre-post。

# android - 到新屏幕的按钮不起作用

> ID：11365931
> 
> 赞同：0
> 
> 时间：2012-07-06T16:12:26.600
> 
> 标签：android, button

我已经搜索并尝试了所有结果，但无济于事。我正在制作一个从主屏幕开始并通过按钮指向新屏幕的程序。我可以通过 setContentView(R.layout.screen2); 进入下一个屏幕。但是我从连接到 xml 文件的 java 文件中的数据永远不会传输。我不认为 xml 文件正在注册与 java 文件的关联（因为我什至尝试创建后退按钮，无论我输入什么代码，它们都不会返回到前一个屏幕）。意图使按钮甚至不会进入下一个屏幕。我已经在这里待了一个星期，但我仍然不知道如何解决这个问题。

主要活动-

```
package com.wunapp.newsvideoapp;

import android.app.Activity;
import android.content.Intent;

import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;

public class MainActivity extends Activity {

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button videoNext = (Button) findViewById(R.id.videoButton) ; 
        videoNext.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
              //setContentView(R.layout.screen2);

                  Intent i = new Intent(MainActivity.this, Screen2.class);
               // i.setClassName("rahul.application.WunApp", "rahul.application.WunApp.screen1");
                startActivity(i);
            }
        });

        Button newsNext = (Button) findViewById(R.id.newsButton);
        newsNext.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
            //setContentView(R.layout.screen1);
            Intent intent = new Intent(MainActivity.this, Screen1.class);   
            startActivity(intent);

            }
        });

}

} 
```

屏幕2-

```
package com.wunapp.newsvideoapp;

//import java.io.IOException;

import java.io.File;

import android.net.Uri;

import android.os.Bundle;
import android.os.Environment;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.graphics.PixelFormat;
import android.view.Menu;
import android.widget.MediaController;
import android.widget.VideoView;

import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnPreparedListener;

public class Screen2 extends Activity {

    VideoView videoView;
    @Override
  public void onCreate(Bundle savedInstanceState) 
    {
      super.onCreate(savedInstanceState);

      setContentView(R.layout.screen2);

 Button back = (Button)this.findViewById(R.id.backButton);
        back.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
            setContentView(R.layout.activity_main);

            }
        });

...[code]
}
} 
```

主要活动 xml-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:text="@string/welcome" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </RelativeLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" />

        <Button
            android:id="@+id/videoButton"
            android:layout_width="156dp"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="@string/videoButton" />

        <Button
            android:id="@+id/newsButton"
            android:layout_width="152dp"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/videoButton"
            android:layout_below="@+id/textView2"
            android:layout_marginTop="33dp"
            android:text="@string/newsButton" />

    </RelativeLayout>

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </RelativeLayout>

</LinearLayout> 
```

屏幕2 xml-

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_height="fill_parent" 
    android:paddingLeft="2dp" android:paddingRight="2dp"
    android:paddingTop="2dp" android:paddingBottom="2dp"
    android:layout_width="fill_parent" android:orientation="vertical">

    <VideoView
        android:id="@+id/VideoView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true" />

<Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/backButton" />

</RelativeLayout> 
```

显现-

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.wunapp.newsvideoapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="12"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

该应用程序是一个新的/视频应用程序，您可以在 screen1 中获取 RSS 提要，在 screen2 中获取视频...我省略了所有使这些工作正常的东西，因为我知道它们的代码工作正常（尝试将它们作为主要不同项目中的文件）。我需要帮助的只是从屏幕到屏幕的链接（在后退按钮的情况下是向后链接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:23:01.110

您需要将其他活动添加到清单中

```
<activity
    android:name=".Screen1" android:label="Screen1Label" >
</activity>
<activity
    android:name=".Screen2" android:label="Screen2Label" >
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:24:40.997

您`AndroidManifest.xml`表示只有一项主要活动。您需要在清单中定义 Screen1 和 Screen2 活动。

例如：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.wunapp.newsvideoapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="12"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Screen1"
            android:label="@string/title_activity_screen1" >
        </activity>
        <activity
            android:name=".Screen2"
            android:label="@string/title_activity_screen2" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T16:44:16.683

我添加新活动的做法如下：

1.  单击**AndroidManifest.xml**。
2.  单击**应用程序节点** 选项卡（屏幕左下角）
3.  单击**添加**并选择**活动**作为选项
4.  单击**名称**链接并输入您的活动名称。

这会为您的项目和清单添加一个新活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:24:49.527

像这样更改清单文件

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  <activity
        android:name=".Screen2" />
</application> 
```

# c# - C# 桌面应用程序在运行时引发加密异常

> ID：11365934
> 
> 赞同：1
> 
> 时间：2012-07-06T16:12:38.867
> 
> 标签：c#, encryption, cryptography

首先，让我承认我对 C# 非常陌生，特别是在使用密码学方面。我开发了一个 C# 应用程序来管理我的登录和密码信息。我从 Winform 读取信息并存储在 XML 中。XML 已加密。

该程序在我有代码的机器上运行良好。在调试器中工作，当我使用 exe（在 Visual Studio 之外）时也可以工作。

现在，当我将 exe（整个 bin 目录）带到我的家用计算机（具有 C# express 2010）时，它在尝试读取/写入 xml 中的任何信息时崩溃。这是我在异常对话框中得到的错误：

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.Security.Cryptography.CryptographicException: Bad Data.

   at System.Security.Cryptography.CryptographicException.ThrowCryptogaphicException(Int32 hr)
   at System.Security.Cryptography.Utils._DecryptKey(SafeKeyHandle hPubKey, Byte[] key, Int32 dwFlags)
   at System.Security.Cryptography.RSACryptoServiceProvider.Decrypt(Byte[] rgb, Boolean fOAEP)
   at System.Security.Cryptography.RSAPKCS1KeyExchangeDeformatter.DecryptKeyExchange(Byte[] rgbIn)
   at System.Security.Cryptography.Xml.EncryptedXml.DecryptKey(Byte[] keyData, RSA rsa, Boolean useOAEP)
   at System.Security.Cryptography.Xml.EncryptedXml.GetDecryptionKey(EncryptedData encryptedData, String symmetricAlgorithmUri)
   at System.Security.Cryptography.Xml.EncryptedXml.DecryptDocument()
   at MyCal.Calendar.Decrypt(String Doc, RSA Alg, String KeyName) in C:\Users\mpaudel\Desktop\MyCal\MyCal\Form1.cs:line 191
   at MyCal.Calendar.btnSaveAdd_Click(Object sender, EventArgs e) in C:\Users\mpaudel\Desktop\MyCal\MyCal\Form1.cs:line 971
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5448 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/mscorlib.dll
----------------------------------------
MyCal
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Users/remoteuser/Desktop/Release/MyCal.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5446 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5453 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Windows.Forms.Calendar
    Assembly Version: 1.0.4359.17528
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Users/remoteuser/Desktop/Release/System.Windows.Forms.Calendar.DLL
----------------------------------------
RicherTextBox
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Users/remoteuser/Desktop/Release/RicherTextBox.DLL
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
33fead0k
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5453 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
Microsoft.mshtml
    Assembly Version: 7.0.3300.0
    Win32 Version: 7.0.3300.0
    CodeBase: file:///C:/Windows/assembly/GAC/Microsoft.mshtml/7.0.3300.0__b03f5f7f11d50a3a/Microsoft.mshtml.dll
----------------------------------------
System.Security
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Security/2.0.0.0__b03f5f7f11d50a3a/System.Security.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

请帮助我度过难关。非常感谢您调查它。- 议员

**更新：-**

这是我的代码。如果代码很糟糕，请原谅:-) 这是我的学习项目。

```
public partial class frmLogOn : Form
    {
        public frmLogOn()
        {
            InitializeComponent();
        }

        string LOGON_FILE_NAME = "logon.xml";//"logon.xml";

        private void btnEnterLogon_Click(object sender, EventArgs e)
        {

            CspParameters cspParams = new CspParameters();
            cspParams.KeyContainerName = "XML_ENC_RSA_KEY";
            RSACryptoServiceProvider rsaKey = new RSACryptoServiceProvider(cspParams); 
            Decrypt(LOGON_FILE_NAME, rsaKey, "rsaKey");

            //Read Password from the xml file
            XmlDocument xmlDoc = new XmlDocument();

            if (File.Exists(LOGON_FILE_NAME))
            {
                XmlTextReader rdrXml = new XmlTextReader(LOGON_FILE_NAME);
                string existingpswd;
                do
                {
                       switch (rdrXml.NodeType)
                       {
                        case XmlNodeType.Text:
                        existingpswd = rdrXml.Value;
                        if (this.txtpswdLogon.Text == existingpswd)
                        {
                            this.DialogResult = DialogResult.OK;

                        }
                        else
                        {
                            MessageBox.Show("Password did not match", "Validate Entry", MessageBoxButtons.OK);
                            rdrXml.Close();
                            Encrypt(LOGON_FILE_NAME, "Pswrds", "EncryptedElement1", rsaKey, "rsaKey");
                            return;

                        }
                        break;
                       }

                } while (rdrXml.Read());
                rdrXml.Close();
                Encrypt(LOGON_FILE_NAME, "Pswrds", "EncryptedElement1", rsaKey, "rsaKey");
            }
        }

        private void chkChangepswdLogon_CheckedChanged(object sender, EventArgs e)
        {
            if (this.chkChangepswdLogon.Checked == true)
            {
                this.Height = 180;
                this.txtNewPswdLogon.Visible = true;
                this.txtOldPswdLogon.Visible = true;
                this.btnChangeLogOn.Visible = true;
                this.txtOldPswdLogon.Focus();
            }
            else if (this.chkChangepswdLogon.Checked == false)
            {
                this.Height = 105;
                this.txtNewPswdLogon.Visible = false;
                this.txtOldPswdLogon.Visible = false;
                this.btnChangeLogOn.Visible = false;
            }
        }

        private void frmLogOn_Load(object sender, EventArgs e)
        {

        }

        private void btnChangeLogOn_Click(object sender, EventArgs e)
        {
            CspParameters cspParams = new CspParameters();
            cspParams.KeyContainerName = "XML_ENC_RSA_KEY";
            RSACryptoServiceProvider rsaKey = new RSACryptoServiceProvider(cspParams);

            Decrypt(LOGON_FILE_NAME, rsaKey, "rsaKey");
            XmlTextReader reader = new XmlTextReader(LOGON_FILE_NAME);
            XmlDocument doc = new XmlDocument();
            doc.Load(reader);
            reader.Close();
            XmlNode oldRecord;
            XmlElement root = doc.DocumentElement;
            try
            {
                oldRecord = root.SelectSingleNode("/Pswrds/pswd[password='" + this.txtOldPswdLogon.Text + "']");
                if (oldRecord == null)
                {
                    MessageBox.Show("Wrong existing password, not authorized to change");
                    this.txtNewPswdLogon.Text = "";
                    this.txtOldPswdLogon.Text = "";
                    this.txtpswdLogon.Text = "";
                    return;
                    Encrypt(LOGON_FILE_NAME, "Pswrds", "EncryptedElement1", rsaKey, "rsaKey");
                }
            }
            catch
            {
                MessageBox.Show("Wrong existing password, not authorized to change");
                return;
                Encrypt(LOGON_FILE_NAME, "Pswrds", "EncryptedElement1", rsaKey, "rsaKey");
            }
            string aa = oldRecord.Value;
            XmlElement newRecord = doc.CreateElement("pswd");

            newRecord.InnerXml = "<password>" + this.txtNewPswdLogon.Text + "</password>" ;

            root.ReplaceChild(newRecord, oldRecord);
            //save the output to a file 
            doc.Save(LOGON_FILE_NAME);
            MessageBox.Show("Password successfully changed.");
            this.txtNewPswdLogon.Text = "";
            this.txtOldPswdLogon.Text = "";
            this.txtpswdLogon.Text = "";
            this.chkChangepswdLogon.Checked = false;

            Encrypt(LOGON_FILE_NAME, "Pswrds", "EncryptedElement1", rsaKey, "rsaKey");
        }

        public static void Encrypt(string Doc, string ElementToEncrypt, string EncryptionElementID, RSA Alg, string KeyName)
        {
            // Create an XmlDocument object.
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.PreserveWhitespace = true;
            xmlDoc.Load(Doc);

            // Check the arguments.
            if (Doc == null)
                throw new ArgumentNullException("Doc");
            if (ElementToEncrypt == null)
                throw new ArgumentNullException("ElementToEncrypt");
            if (EncryptionElementID == null)
                throw new ArgumentNullException("EncryptionElementID");
            if (Alg == null)
                throw new ArgumentNullException("Alg");
            if (KeyName == null)
                throw new ArgumentNullException("KeyName");

            ////////////////////////////////////////////////
            // Find the specified element in the XmlDocument
            // object and create a new XmlElemnt object.
            ////////////////////////////////////////////////
            XmlElement elementToEncrypt = xmlDoc.GetElementsByTagName(ElementToEncrypt)[0] as XmlElement;

            // Throw an XmlException if the element was not found.
            if (elementToEncrypt == null)
            {
                throw new XmlException("The specified element was not found");

            }
            RijndaelManaged sessionKey = null;

            try
            {
                //////////////////////////////////////////////////
                // Create a new instance of the EncryptedXml class
                // and use it to encrypt the XmlElement with the
                // a new random symmetric key.
                //////////////////////////////////////////////////

                // Create a 256 bit Rijndael key.
                sessionKey = new RijndaelManaged();
                sessionKey.KeySize = 256;

                EncryptedXml eXml = new EncryptedXml();

                byte[] encryptedElement = eXml.EncryptData(elementToEncrypt, sessionKey, false);
                ////////////////////////////////////////////////
                // Construct an EncryptedData object and populate
                // it with the desired encryption information.
                ////////////////////////////////////////////////

                EncryptedData edElement = new EncryptedData();
                edElement.Type = EncryptedXml.XmlEncElementUrl;
                edElement.Id = EncryptionElementID;
                // Create an EncryptionMethod element so that the
                // receiver knows which algorithm to use for decryption.

                edElement.EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncAES256Url);
                // Encrypt the session key and add it to an EncryptedKey element.
                EncryptedKey ek = new EncryptedKey();

                byte[] encryptedKey = EncryptedXml.EncryptKey(sessionKey.Key, Alg, false);

                ek.CipherData = new CipherData(encryptedKey);

                ek.EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncRSA15Url);

                // Create a new DataReference element
                // for the KeyInfo element.  This optional
                // element specifies which EncryptedData
                // uses this key.  An XML document can have
                // multiple EncryptedData elements that use
                // different keys.
                DataReference dRef = new DataReference();

                // Specify the EncryptedData URI.
                dRef.Uri = "#" + EncryptionElementID;

                // Add the DataReference to the EncryptedKey.
                ek.AddReference(dRef);
                // Add the encrypted key to the
                // EncryptedData object.

                edElement.KeyInfo.AddClause(new KeyInfoEncryptedKey(ek));
                // Set the KeyInfo element to specify the
                // name of the RSA key.

                // Create a new KeyInfoName element.
                KeyInfoName kin = new KeyInfoName();

                // Specify a name for the key.
                kin.Value = KeyName;

                // Add the KeyInfoName element to the
                // EncryptedKey object.
                ek.KeyInfo.AddClause(kin);
                // Add the encrypted element data to the
                // EncryptedData object.
                edElement.CipherData.CipherValue = encryptedElement;
                ////////////////////////////////////////////////////
                // Replace the element from the original XmlDocument
                // object with the EncryptedData element.
                ////////////////////////////////////////////////////
                EncryptedXml.ReplaceElement(elementToEncrypt, edElement, false);
                xmlDoc.Save(Doc);
            }
            catch (Exception e)
            {
                // re-throw the exception.
                throw e;
            }
            finally
            {
                if (sessionKey != null)
                {
                    sessionKey.Clear();
                }

            }

        }

        public static void Decrypt(string Doc, RSA Alg, string KeyName)
        {
            // Create an XmlDocument object.
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.PreserveWhitespace = true;
            xmlDoc.Load(Doc);
            // Check the arguments.  
            if (Doc == null)
                throw new ArgumentNullException("Doc");
            if (Alg == null)
                throw new ArgumentNullException("Alg");
            if (KeyName == null)
                throw new ArgumentNullException("KeyName");

            // Create a new EncryptedXml object.
            EncryptedXml exml = new EncryptedXml(xmlDoc);

            // Add a key-name mapping.
            // This method can only decrypt documents
            // that present the specified key name.
            exml.AddKeyNameMapping(KeyName, Alg);

            // Decrypt the element.
            exml.DecryptDocument();
            xmlDoc.Save(Doc);

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:10:26.027

这些是评论，但评论框不够大，无法容纳它们。这段代码：

```
catch (Exception e)
{
    // re-throw the exception.
    throw e;
} 
```

正在丢弃您的堆栈跟踪，因此您看不到导致错误的原因。删除该代码。

我怀疑`Doc`你传递给的那个`Decrypt`是无效的。`xmlDoc.Load(Doc)`在调用和检查之前设置断点。你必须向我们展示你传递的是什么`Doc`，或者至少从哪里`MyCal.Calendar.btnSaveAdd_Click`得到它。

另外，你在打电话

```
if (Doc == null)
    throw new ArgumentNullException("Doc"); 
```

**在**使用`Doc`后`xmlDoc.Load(Doc)`。为时已晚，您必须在使用参数之前验证参数，而不是之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:01:55.267

我终于发现我试图运行应用程序的两台机器都没有安装 X.509 证书，因此代码在尝试解密时会抛出异常。我从这个链接 [microsoft.com/en-us/download/details.aspx?id=14089] 安装了证书，重新编译了应用程序，现在它就像一个魅力！感谢大家的帮助！

# mysql - 获取具有 max(column) 的行

> ID：11365937
> 
> 赞同：3
> 
> 时间：2012-07-06T16:12:55.650
> 
> 标签：mysql, sql

每当我使用该`max`函数时，我都会以某种方式失去与其他值的所有连接，因此稍后打印的行与我运行 max 的列不再相关。

所以我的桌子是：

```
user col1 col2 col3
1    1    2    3
1    3    4    5
2    2    3    1
3    1    1    3
3    2    4    6
4    5    1    5 
```

所以如果我跑

```
select user, col1, col2, max(col3) as col3
from table
group by user
order by user; 
```

我会得到

```
user col1 col2 col3
1    1    2    5
2    2    3    1
3    1    1    6
4    5    1    5 
```

所以 col3 的最大值是正确的，但它没有得到该值的正确行。

我想要的是获取一列的最大值并为每个用户返回该行。如果有多个最大值，它应该返回所有用户，即使它具有相同的用户 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:19:28.387

其他数据库（例如 MS SQL Server）不允许您将聚合值与非聚合值混合，因为您会得到错误的结果。

因此，如果您想从最大值所在的记录中获取非聚合值，请再次加入该表：

```
select x.user, y.col1, y.col2, x.col3
from (
  select user, max(col3) as col3
  from table
  group by user
) x
inner join table y on y.user = x.user and y.col3 = x.col3
order by x.user 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:28:19.670

这可能看起来很疯狂，但它应该对你有用

```
SELECT B.* FROM
(
    SELECT user,MAX(col3) col3
    FROM mytable GROUP BY user
) A
INNER JOIN mytable B
USING (user,col3) ORDER BY user,col3; 
```

这是示例数据：

```
mysql> DROP DATABASE IF EXISTS terry;
Query OK, 1 row affected (0.06 sec)

mysql> CREATE DATABASE terry;
Query OK, 1 row affected (0.00 sec)

mysql> USE terry
Database changed
mysql> CREATE TABLE mytable
    -> (user INT,col1 INT,col2 INT,col3 int,
    -> key (user,col3));
Query OK, 0 rows affected (0.06 sec)

mysql> INSERT INTO mytable VALUES
    -> (1,    1,    2,    3),(1,    3,    4,    5),
    -> (2,    2,    3,    1),(3,    1,    1,    3),
    -> (3,    2,    4,    6),(4,    5,    1,    5);
Query OK, 6 rows affected (0.07 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM mytable;
+------+------+------+------+
| user | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    1 |    2 |    3 |
|    1 |    3 |    4 |    5 |
|    2 |    2 |    3 |    1 |
|    3 |    1 |    1 |    3 |
|    3 |    2 |    4 |    6 |
|    4 |    5 |    1 |    5 |
+------+------+------+------+
6 rows in set (0.00 sec) 
```

这是查询的输出：

```
mysql> SELECT B.* FROM
    -> (
    ->     SELECT user,MAX(col3) col3
    ->     FROM mytable GROUP BY user
    -> ) A
    -> INNER JOIN mytable B
    -> USING (user,col3) ORDER BY user,col3;
+------+------+------+------+
| user | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    3 |    4 |    5 |
|    2 |    2 |    3 |    1 |
|    3 |    2 |    4 |    6 |
|    4 |    5 |    1 |    5 |
+------+------+------+------+
4 rows in set (0.02 sec)

mysql> 
```

此输出将是正确的，因为对于您提供的示例数据中的每个用户，col3 的最大值只有一次出现。如果给定用户的两行具有相同的 col3 作为最大值，则它们都应该出现。

为了说明这一点，让我们添加另一行 user=3 和 col3=6;

```
mysql> INSERT INTO mytable VALUES (3,8,9,6);
Query OK, 1 row affected (0.10 sec)

mysql> SELECT B.* FROM
    -> (
    ->     SELECT user,MAX(col3) col3
    ->     FROM mytable GROUP BY user
    -> ) A
    -> INNER JOIN mytable B
    -> USING (user,col3) ORDER BY user,col3;
+------+------+------+------+
| user | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    3 |    4 |    5 |
|    2 |    2 |    3 |    1 |
|    3 |    2 |    4 |    6 |
|    3 |    8 |    9 |    6 |
|    4 |    5 |    1 |    5 |
+------+------+------+------+
5 rows in set (0.00 sec)

mysql> 
```

试试看 ！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T16:36:40.840

```
select t1.user, t1.col1, t1.col2, t1.col3
from table1 t1
where not exists(select * from table1 t2
                 where t1.user = t2.user
                   and t1.col3 < t2.col3) 
```

如果一个用户的多行具有相同的（最大）col3 值，则将返回该用户具有该值的所有行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T16:17:30.783

您需要从查询中消除 col1 和 col2，因为它们使行唯一。尝试

```
SELECT user, max(col3) AS col3 FROM table GROUP BY user ORDER BY user; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T16:18:50.840

在您的查询中，您为每一行选择最大值，并将其选为一列。您想知道最大值是多少，并将其用作选择具有该值的行的限制。

* * *

假设你想要`max`from `col3`，你可以这样做：

```
select t.user,
       t.col1,
       t.col2,
       t.col3
from tablename t
join (
      select max(col3) as 'maximum'
      from tablename
     ) aux on aux.maximum = t.col3 
```

`aux`连接选择 的值`max`，`col3`然后您使用`col3`作为限制的表连接。

# ios5 - iOS5 中文本框中的格式和项目符号

> ID：11365941
> 
> 赞同：1
> 
> 时间：2012-07-06T16:13:10.033
> 
> 标签：ios5, webview, formatting, xcode4.3

有谁知道如何在文本框中插入项目符号并进行一些格式化，也许在 iOS 5、XCode 4.3 的 web 视图中（如下面的打印屏幕所示）？

![在此处输入图像描述](../Images/d4acbbab9112106de63e3b166f4df16e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:25:05.483

对于`UITextView`手动添加点和换行符，例如：

```
NSArray  *items = [NSArray arrayWithObjects:@"Stack",@"Overflow",nil];
NSMutableString *formattedString = [[NSMutableString alloc] init ];
for (NSString *item in items) [formattedString appendFormat:@"\u2022 %@\n", item];
theTextViewName.text = formattedString; 
```

对于`UIWebView`创建无序`HTML`列表，例如：

```
NSArray  *items = [NSArray arrayWithObjects:@"Stack",@"Overflow",nil];
NSMutableString *theSource = [[NSMutableString alloc] init ];
[theSource appendFormat:@"<ul>"];
for (NSString *item in items) [theSource appendFormat:@"<li>%@</li>", item];
[theSource appendFormat:@"</ul>"];
[theWebView loadHTMLString:theSource baseURL:nil]; 
```

两者都导致以下列表：

> *   堆
> *   溢出

# visual-studio-2010 - 如何正确卸载 C++ Shell 扩展 DLL

> ID：11365944
> 
> 赞同：7
> 
> 时间：2012-07-06T16:13:24.380
> 
> 标签：visual-studio-2010, winapi, visual-c++, shell-extensions

我有用C++ 和 COM 编写的**shell 扩展 dll该 dll 已注册并加载到内存中。**我的升级设置程序将执行以下操作：

*   注销shell扩展dll，杀死explorer.exe
*   复制更高版本的shell扩展dll（步骤2）
*   启动 explorer.exe

它工作正常。但问题是：

如果用户打开了任何其他应用程序（Internet Explorer，有时是 Windows 任务管理器，记事本等），则**步骤 2**将失败。

升级 dll 时有什么方法可以关闭所有 shell 扩展 dll 挂钩。

在 dll 中，我使用 GetOverlayInfo、上下文菜单、数据库连接等

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T16:39:02.883

**简单地说：不要这样做（即不要强行卸载它）。**您必须枚举所有加载了您的 shell 扩展的进程，然后“重新启动”这些进程。这是非常具有侵略性的，坦率地说：不良行为（对于安装程序）。这也需要您的安装程序*可能*不需要的特殊权限。

大多数人似乎仍然不知道的是`MoveFile`(and `MoveFileEx`) 可用于移动正在运行的应用程序*当前正在使用的 DLL 或 EXE 文件。*

这是 Windows Installer 采用的方法。安装后，您有没有注意到`\Config.msi`给定驱动器根目录中的文件夹`.msi`？该文件夹实际上包含（已移动并通常重命名为某个唯一的“临时”名称）已被移出但当时仍在使用的原始文件。然后通常安排在启动时删除它们（`MoveFileEx`with `MOVEFILE_DELAY_UNTIL_REBOOT`）。

您可以在自制安装程序中使用相同的机制，将正在使用的旧文件移出其原始位置，并立即将另一个移入。然后，任何新的应用程序实例都将使用新的 shell 扩展 (*)，而旧的应用程序将继续被任何在某个时间点加载它的正在运行的应用程序使用。

(*) 我不能 100% 确定这一点，因为适用于 DLL 加载并防止在某些情况下再次加载同名模块的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:25:06.880

根据您的安装程序，您可能能够使用 Windows Vista+ 中的[重新启动管理器](http://msdn.microsoft.com/en-gb/library/windows/desktop/cc948910%28v=vs.85%29.aspx)支持。这将允许您的设置查询正在使用您的 DLL 的每个应用程序，并尝试优雅地关闭它们。如果它们不能，那么您将需要在重新启动时注册它以进行更换。设置完成后，重新启动管理器将尝试重新启动它关闭的所有程序（支持重新启动）。

# macos - 如何保存/恢复 Sublime Text 2 配置/插件以迁移到另一台计算机？

> ID：11365948
> 
> 赞同：90
> 
> 时间：2012-07-06T16:13:33.943
> 
> 标签：macos, backup, restore, sublimetext2

我需要从一台 Mac 迁移到另一台 Mac，并希望新计算机上的 Sublime Text 2 具有我在旧计算机上安装的所有相同配置/插件。

是否有一些文件夹我可以复制并恢复到另一个文件夹以复制所有内容？

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-07-09T16:24:40.680

我只是为此设置了一个很好的解决方案，它需要保管箱。我目前正在使用它在 windows、linux、osx 和一些 vm 上的 ~5 种不同的 sublime 安装中同步插件和设置。

*   第 1 步：使用[PackageControl](http://wbond.net/sublime_packages/package_control)管理所有插件，非常棒。

*   第 2 步：将“Sublime”目录添加到您的根投递箱目录（我复制了完整的目录结构，为了它的地狱，`{DropBox}/Sublime/Packages/User`）。确保 sublime 已关闭，并将`{SublimeRoot}/Packages/User`in 的内容移动到您刚刚创建的 Dropbox 目录中。删除`{SublimeRoot}/Packages/User`，并将其替换为指向 的符号链接`{DropBox}/Sublime/Packages/User`。

在每台使用 sublime 的计算机上使用相同的过程，它可以完成两件事。

*   1) 您的`User/`目录的内容是同步的，因此您的所有自定义设置在机器上都是相同的。

*   2) 每次 PackageControl 启动时，它都会检查`Package Control.sublime-settings`您的`User/`目录。如果 if 找到应该根据设置安装的插件，但实际上并没有安装，它会自动安装它，不问任何问题。

使用此解决方案设置另一台计算机只需要安装 sublime 和 package control，然后只需删除`{SublimeRoot}/Packages/User/`目录并将其指向带有符号链接的 dropbox 中的副本。下次你启动 sublime 时，包控制会自动安装你所有的插件。

***创建符号链接***：从`{Sublime}/Packages`目录

*   **窗户**：`mklink /D .\User C:\Users\[username]\Dropbox\Sublime\Packages\User`
*   **Linux/OSX**：`ln -s {DropboxRoot}/Sublime/Packages/User ./User`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-25T07:05:51.553

将目录添加`~/Library/Application Support/Sublime Text 2/Packages`到 git 存储库。例如[位桶](https://bitbucket.org/)。因此，您可以在使用插件和设置进行任何更改后提交。如果 sublime text2 出现问题，您可以轻松回滚。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-09T08:10:30.823

# 备份崇高文本

1.  从文件位置复制文件`C:\Users\[userName]\AppData\Roaming\Sublime Text 2\`
    可以通过使用 - Open Sublime Text -> Browse Packages 找到
2.  关闭崇高文本
3.  备份 Sublime Text 2 文件夹中的所有文件夹
    a. Sublime Text 2/已安装的包
    b. Sublime Text 2/包
    c. Sublime Text 2/Pristine 包
    d. Sublime Text 2/设置

# 新安装

*   现在替换新安装中的所有备份文件`C:\Users\[NewUserName]\AppData\Roaming\Sublime Text 2\`
*   可以使用 - Open Sublime Text -> Browse Packages 找到文件位置
*   关闭崇高文本
*   如果您收到错误无法保存工作空间
    1.  创建一个新项目
    2.  保存项目
    3.  出口
    4.  重新启动崇高文本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-25T17:32:14.577

您需要做的就是从旧的 MacOs 计算机复制以下文件：

~/Library/Application Support/Sublime Text 3/Packages/User/Package Control.sublime-settings ~/Library/Application Support/Sublime Text 3/Packages/User/Preferences.sublime-settings

还要确保您找到带有您购买的许可证的旧电子邮件，并记下禁用的软件包，因为当您使用新配置重新启动应用程序时，这些软件包可能不会被禁用。

然后在新的 MacOs 上：

1.  安装 ST3
2.  安装 PackageControl
3.  将文件复制到 ~/Library/Application Support/Sublime Text 3/Packages/User/
4.  重新启动应用程序
5.  注意：您可能需要重新启动它几次，在配置重新安装 .sublime-settings 文件中的所有软件包之前，它可能会出现问题。

您不需要用户目录中的所有设置包，这些将在重新启动时自动重新安装。我想把它们都抓起来不会有什么坏处，但通常是新的 Mac == 新的设置。“Package Control.sublime-settings”将自动安装其中列出的所有包。

我即将迁移 Mac，完成后我会更新它以验证它是否有效！

# bash - Bash脚本，替换文件中的文本？

> ID：11365949
> 
> 赞同：3
> 
> 时间：2012-07-06T16:13:36.823
> 
> 标签：bash, ssh

我目前有

```
echo -n "MySQL Database Name:  "; read MyVar; sed -i 's/database_name_here/$MyVar/g' config.php 
```

它部分工作，它提示我输入数据库名称。输入后，它会更新文件，但它仍然放置 $MyVar 而不是输入的内容。

```
echo -n "MySQL Database Name:  "; read MyVar; echo "$Myvar" 
```

^ 工作得很好。

有任何想法吗？

更新：

```
echo -n MySQL Database Name: ; read MyVar; sed -i s/database_name_here/$MyVar/g config.php
# ////
echo -n MySQL Username: ; read usr; sed -i s/username_here/$usr/g config.php
# ////
echo -n MySQL Password: ; read blackberg; sed -i s/password_here/$blackberg/g config.php 
```

如果它只是 bash 上的一行，它可以工作并替换该值。但是当我有上述内容时，它会部分工作，但会用空白替换值。

有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:23:06.397

```
sed -i "s/database_name_here/$MyVar/g" config.php 
```

要让 shell 解释变量，您需要使用双引号。

# php - facebook页面访问令牌问题

> ID：11365952
> 
> 赞同：1
> 
> 时间：2012-07-06T16:13:40.083
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试从他们的 FB 页面将提要放在公司网站上。提要只会在帖子中阅读。为提要维护访问令牌的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:20:47.490

为了建立这个提要访问，您可以使用 Facebook 的通用页面 RSS 提要：

`https://facebook.com/feeds/page.php?id=PAGE_ID_HERE&format=rss20`

只需相应地检索和解析数据。

祝你好运！

# java - 使用 PrefixBasedActionMapper 的 Struts 2 动作映射

> ID：11365956
> 
> 赞同：1
> 
> 时间：2012-07-06T16:13:55.443
> 
> 标签：java, struts2, struts, struts-config

我正在尝试更改 Struts 2 中 url 的映射方式。

我希望能够设置一个像 www.site.com/login.action 这样的网址，让它看起来像 www.site.com/action/login

我知道我可以使用 struts.xml 常量删除操作扩展

```
<constant name="struts.action.extension" value="" /> 
```

我用以下内容更新了 web.xml：

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/action/*</url-pattern>
</filter-mapping> 
```

这给了我想要将所有*/action/* url 路由到 Struts 的结果。问题是 Struts 没有意识到 url 的动作部分实际上是动作扩展......当然我不希望 Struts 知道这一点。因此，在我的所有 Struts.xml 动作映射中，我必须在命名空间甚至动作名称中包含 /action。

我已经看过 PrefixBasedActionMapper 类，我想知道我是否走在正确的轨道上来完成我想要做的事情......或者可能不是......也许甚至不可能。

有人对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:40:22.177

看起来您想在应用程序上创建类似 REST 的链接。您是否考虑过类似 REST 插件[http://struts.apache.org/2.1.6/docs/rest-plugin.html](http://struts.apache.org/2.1.6/docs/rest-plugin.html)的东西 ？

# javascript - 单击另一个图像时检索图像源？

> ID：11365958
> 
> 赞同：2
> 
> 时间：2012-07-06T16:14:06.287
> 
> 标签：javascript, jquery

我正在尝试根据用户先前单击的单独图像来检索图像的来源。

```
<div class="card1">
    <div>
    <a href="#" class="quickFlipCta"><img class="back" src="Memory Pals/Test Pictures/QuestionMark.gif" /></a>
    </div>

    <div>
    <a href="#" class="quickFlipCta"><img class="front" src="Memory Pals/Test Pictures/flower.gif" /></a>
    </div>
</div>

<div class="card2">
    <div>
    <a href="#" class="quickFlipCta"><img class="back" src="Memory Pals/Test Pictures/QuestionMark.gif" /></a>
    </div>

    <div>
    <a href="#" class="quickFlipCta"><img class="front" src="Memory Pals/Test Pictures/flower.gif" /></a>
    </div>
</div> 
```

在我的具体示例中，我试图在单击“后”时检索“前”的来源。此外，它必须在同一张卡片中检索“front”的来源。

这是我尝试过的，但我无法让它工作：

```
$(document).ready(function(){

        var found = 0;
        var last = null;

        $('img').each(function(index){
          $(this).attr('id','img-' + index);
        });    

        $('img').click(function(){
          if( last ) {
            if( ($(this).attr('src') == last.attr('src')) ) {
              $(this).css('visibility', 'hidden');
              last.css('visibility', 'hidden');
              found++;
            }
            if (found == 3) {
            window.location.href = "#play2"; 
            location.reload(); //resets found to 0
            }
            last = null;
          } else {
            last = $(this);
          }
        }); 
```

我意识到它不是检索“正面”的来源，而是检索用户点击的图像的来源。如何更改它以便在单击“后”时检索“前”的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:25:44.483

以下内容可能会为您指明正确的方向：

```
$('img.back').click(function () {
    var frontSrc = $('img.front').first().attr('src');
    alert('The source for \'front\' is ' + frontSrc);
    }
}); // end .click handler 
```

使用`hasClass`jQuery 函数来确定您单击的元素是否具有 'back' 类。然后使用`img.front`选择器找到带有前端类的图像并检索它的源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:29:33.790

这是你要找的吗？

```
$('img').click(function(){
    console.log($(this)
           .closest('div[class*=card]') // <-- get closest div with class containing card
           .find('div > a > img') // <-- find all img under that div
           .not(this) // <-- filter out the clicked one
           .attr('src')); // <-- get src of the image not clicked under same div with class containing card
});​ 
```

[http://jsfiddle.net/gweVT/](http://jsfiddle.net/gweVT/)

# java - 找不到 Android CalendarView 类

> ID：11365959
> 
> 赞同：30
> 
> 时间：2012-07-06T16:14:06.527
> 
> 标签：java, android, eclipse, calendarview

我正在为要在应用程序中使用的日历设计 xml 格式，但我无法让日历在**图形布局**淋浴中显示。

相反，我得到以下“错误”：

> 找不到以下类： - CalendarView（更改为 android.widget.CalendarView，修复构建路径，编辑 XML）

该项目的最低 SDK 版本为 14，目标版本为 15。

这是我的**XML**代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

        <RelativeLayout android:id="@+id/top"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
                <Button android:id="@+id/dash"
                    android:layout_height="wrap_content"
                    android:layout_width="wrap_content"
                    android:maxWidth="200dp"
                    android:maxHeight="10dp"
                    android:text="DASHBOARD"
                    android:textAppearance="?android:attr/textAppearanceSmall"
                    android:layout_alignParentLeft="true"/>

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true"
                    android:paddingBottom="10px"
                    android:paddingTop="10px"
                    android:text="Calendar"
                    android:textAppearance="?android:attr/textAppearanceLarge"/>
                <Button
                    android:id="@+id/plusButton"
                    style="?android:attr/buttonStyleSmall"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:text="+"
                    android:textAppearance="?android:attr/textAppearanceLarge"/>
        </RelativeLayout>
        <CalendarView
            android:id="@+id/calview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/top"
            android:maxHeight="300dp" />

        <RelativeLayout android:id="@+id/infoScroll"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/calview">

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:maxHeight="100dp">

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </ListView>

            </ScrollView>
        </RelativeLayout>
        <RelativeLayout android:id="@+id/bottomBar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/infoScroll">
            <Button android:id="@+id/todayButton"
                android:layout_height="wrap_content"
                    android:layout_width="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:text="Today"
                android:textAppearance="?android:attr/textAppearanceSmall"/>

            <Button android:id="@+id/listButton"
                android:layout_height="wrap_content"
                    android:layout_width="wrap_content"
                    android:layout_toLeftOf="@+id/dayButton"
                    android:text="List"
                    android:textAppearance="?android:attr/textAppearanceSmall"/>

        <Button android:id="@+id/dayButton"
                android:layout_height="wrap_content"
                    android:layout_width="wrap_content"
                    android:layout_centerInParent="true"
                    android:text="Day"
                android:textAppearance="?android:attr/textAppearanceSmall"/>

        <Button
            android:id="@+id/monthButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/dayButton"
            android:text="Month"
            android:textAppearance="?android:attr/textAppearanceSmall"/>

        <Button android:id="@+id/PeopleButton"
            android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                    android:layout_alignParentRight="true"
                android:text="People"
                android:textAppearance="?android:attr/textAppearanceSmall"/>

        </RelativeLayout>

</RelativeLayout> 
```

非常感激！谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-07T18:15:22.577

您可能正在 Android Target 16 上预览屏幕。尝试使用 Android Target 15 for Graphic Layout Editor（顶部的 Android 图标，在 ADT 20 中）。看起来 Android Target 16 有问题。

注意：您**不需要**在图形布局编辑器中仅设置项目目标。

# android - 是否可以在两个 strings.xml 文件之间进行选择？

> ID：11365963
> 
> 赞同：3
> 
> 时间：2012-07-06T16:14:26.880
> 
> 标签：android, xml

我目前正在开发一个 Android 应用程序，并且已经工作了大约六周。我刚刚发现它还需要以不同的语言运行。我所有的字符串资源都保存在`strings.xml`文件中。

我想知道的是，如果我可以制作一个单独的文件，例如`strings2.xml`，并且根据用户的选择，程序将为`strings.xml or strings2.xml`所有字符串引用选择其中一个。

这将在我的布局文件中，`main.xml`.

```
<Button
android:id="@+id/more_parametersButton"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/more_parameters" /> 
```

然后我会有 2 个单独的字符串文件。字符串.xml

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<resources>
    <string name="more_parameters">More Parameters</string>
</resources> 
```

和strings2.xml

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<resources>
    <string name="more_parameters">Mais Parâmetros</string>
</resources> 
```

这似乎是不可能的，但如果是的话，我会很感激这些信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T16:19:44.807

看起来您只是想使您的应用程序国际化。android 当然为此有一个明确定义的工具。`res`在as下创建特定于语言环境的值文件夹

```
res/values-<locale>/strings.xml 
```

并根据语言环境使用值填充此文件。例如，

```
res/values-fr_FR/strings.xml 
```

有关详细信息，请阅读开发者网站上的[Android 本地化](http://developer.android.com/guide/topics/resources/localization.html)页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:29:31.870

它可以很容易地在Android中完成，

不仅是 String.xml（针对不同的语言），您还可以使用相同的 layouts.xml、drawables（针对不同的屏幕尺寸），您只需相应地命名您的 res/folder-name 文件夹，Blattman 先生已经详细回答了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T16:26:14.767

你可以手动切换语言..

```
 String[] array={"English","Deutsch"};
                Locale locale = new Locale(array[0]);
Locale.setDefault(locale);
                Configuration config = new Configuration();
                config.locale = locale;
getBaseContext().getResources().updateConfiguration(config,getBaseContext().getResources().getDisplayMetrics()); 
```

但为此，您需要 res/values-de/strings.xml 进行德语[本地化。](http://developer.android.com/guide/topics/resources/localization.html)

# javascript - IE Jquery 故障

> ID：11365964
> 
> 赞同：1
> 
> 时间：2012-07-06T16:14:31.500
> 
> 标签：javascript, jquery, internet-explorer

在我的网站上，我使用了一些自定义构建的 jquery 插件和几个外部插件。

我遇到的问题只发生在 IE 中。在这个页面上，我有一个 KenBurns Jquery Slider 和一些 jquery 选项卡。这两个插件在 Chrome / Firefox 上都能正常工作。但是在 IE 上，当我在选项卡之间切换时（在 KenBurns 滑块下方），第一个选项卡保持打开状态并且不会隐藏。Ken Burns Slider 也会重新加载或似乎会自行重新加载。

有谁知道为什么会发生这种情况或愿意看看吗？

页面：[http ://devsite80.clickdealer.co.uk/used-land-rover-range-rover-364746](http://devsite80.clickdealer.co.uk/used-land-rover-range-rover-364746)

我的标签代码：

```
(function($) {

jQuery(document).ready(function () {

// Generate Tabs
$(".tabContents").hide();
    $(".tabContents:first").show();

    $("#tabContaier ul li a").click(function(e){

        e.preventDefault();

        var activeTab = $(this).attr("href");
        $("#tabContaier ul li a").removeClass("active");
        $(this).addClass("active");
        $(".tabContents").hide();
        $(activeTab).fadeIn();
    });

// Fix Tabs for Mobile
$(window).resize(function(){
    console.log('resize called');
    var width = $(window).width();
    if(width <= 757){
           $('.tabContents').show();
     }
     else{
            $(".tabContents:first").show();
     }
})
.resize();//trigger the resize event on page load.

});

}(jQuery)); 
```

这是我正在调用的其他插件的链接：http: [//devsite80.clickdealer.co.uk/js/jquery.config.js](http://devsite80.clickdealer.co.uk/js/jquery.config.js)

如果您需要更多信息，请告诉我:-)

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:45:45.963

你的问题是你绑定到window.resize。在 IE 中，**当页面上的任何元素被调整大小时会触发 window.resize 事件。**

文章听到更多讨论它： [window.resize event 在 Internet Explorer 中触发](https://stackoverflow.com/questions/1852751/window-resize-event-firing-in-internet-explorer)

我不建议在调整大小时绑定。我不会使用隐藏和显示，而是将此功能移至 CSS 并使用 jQuery 切换您的类。这也将允许你设置 CSS 媒体查询来完成你需要的：

```
@media screen and (min-width: 757px) {
    #YOUR CONDITIONAL CSS HERE
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:28:47.627

我收到语法错误：

`'position().left' is null or not an object`在 jquery.themepunch.kenburn.min.js 的第 128 行，字符 644

此外，无论出于何种原因，resize 在错误发生之前在 IE 中被调用了 4 次。您可以在 IE 上按 F12 以访问开发人员工具，然后返回页面并刷新它以查看错误。当然，单击“脚本”选项卡。

仅供参考，刷新工具控制台只会清除缓存，但我认为它不会重新加载页面，您实际上必须重新选择 IE 窗口。

我应该补充一点，这些图像不会显示为我的缩略图，只是作为图像的垂直列表。最后，我在 WinXP 上使用 IE8 (8.0.6001.18702IC)。

# php - Wordpress 中隐藏的“内联 CSS”在哪里？

> ID：11365971
> 
> 赞同：1
> 
> 时间：2012-07-06T16:15:00.037
> 
> 标签：php, css, wordpress, file, inline

这是我在 Wordpress 中放入 style.css 的代码：

```
h3.list {
    color: #FFFFFF;
    font: bold 15pt Arial,sans-serif;
    letter-spacing: -1px;
    margin: 10px 10px 0;
    padding-bottom: 8px;
} 
```

这是我无法找到和删除的：

```
h1, h2, h3, h4, h5, h6, ul#top-menu a {
    font-family: 'Arvo',Arial,sans-serif !important;
} 
```

请帮助我找到导致此问题的文件。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T16:19:03.323

在 Chrome 中打开您的网站并查看开发工具（扳手 > 工具 > 开发人员工具）

转到资源选项卡并搜索该字符串`h1, h2, h3, h4`，您将在网站上使用的文件中找到它的所有实例。

如果您知道它适用的元素（任何`h1`都可以），您可以在“元素”选项卡中看到所有应用的样式，它会告诉您定义该样式的文件名和行号。

正如我所怀疑的，它位于索引页面的 HTML 中。

![在此处输入图像描述](../Images/5b2400c68925c9f70741ea8e07966af2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:01:10.280

实际上只需添加**!important**，您的 css 规则将被优先考虑并被应用

```
font: bold 15pt Arial,sans-serif !important; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T02:32:06.523

优雅的主题通常有一个用于排版的主题选项面板。您可能可以在其中进行更改，而不是在 CSS 中进行更改。正如其他人所指出的，Firebug 是发现声明来源的好工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T18:15:36.710

我基于以下演示：[http ://elegantthemes.com/preview/eList/](http://elegantthemes.com/preview/eList/)

如果您查看第 43 行，您会注意到以下内容：

```
<style type='text/css'>h1,h2,h3,h4,h5,h6,ul#top-menu a { font-family: 'Arvo', Arial, sans-serif !important;  }</style> 
```

这就是应用字体的原因。看到它直接在该`<head>`部分中并且也已`!important`应用，您最好的选择就是将其删除或注释掉。然后，您可以随意应用自己的字体。

# algorithm - 局部二进制模式算法

> ID：11365972
> 
> 赞同：4
> 
> 时间：2012-07-06T16:15:01.357
> 
> 标签：algorithm, face-recognition

我正在研究 LBP 算法并阅读论文 Face Detection and Verification using Local Binary Patterns，Y Rodriguez 这是一篇 PHD 论文。在第 21 页（第 2.2.2 节弱分类器），作者提到：

```
A weak classifier hp (x) consists of a look-up table of 2^9 − 1 = 511 bins 
```

我不明白为什么有 2^9-1 个垃圾箱。到目前为止我能理解的是，特定像素的 LBP 代码是 8 个数字，0 或 1 从其周围的 8 个像素计算得出。但是为什么查找表包含 2^9-1 个 bin？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:22:18.360

我建议您阅读论文“Multiresolution Gray-Scale and Rotation Invariant Texture Classification with Local Binary Patterns”，作者是 Timo Ojala、Matti PietikaÈ inen、IEEE 高级成员和 Topi MaÈenpaÈa。你会在第 2.2 章找到答案 例如，像素被 8 个像素包围，lbp bin 将为 256(-1) = 1111 1111，同理，被 9 个像素包围的 bin 512(-1) = 1111 1111 1...你可以认为像素被9个像素组成的环链包围。

# jsf - 生成PDF文档并在新窗口中用java bean打开

> ID：11365982
> 
> 赞同：2
> 
> 时间：2012-07-06T16:15:38.240
> 
> 标签：jsf, javabeans

我正在尝试生成 PDF 文档并在新窗口中打开它。我创建了一个 Servlet 来创建 PDF，在我的支持 bean 中我有以下代码：

```
public void viewReport(){
        try {
            FacesContext.getCurrentInstance()
               .getExternalContext().redirect("/app/report.pdf?type=sb");
            return;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
} 
```

在我的页面中，我有这个：

```
<h:form target="_blank">
<h:commandButton action="#{clientBean.viewReport}" value="#{msgs['button.view']}"/>
</h:form> 
```

PDF 没问题，但它在同一个窗口中打开。如何从 bean 在新窗口中打开 PDF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:04:02.460

你用纯 HTML 来做，而不是在服务器端用 bean 做黑客呢？

```
<a href="/app/report.pdf?type=sb" target="_blank" />#{msgs['button.view']}</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:00:57.457

看[这个例子](http://balusc.blogspot.de/2006/05/pdf-handling.html)

```
<h:form target="_blank">
    <h:commandButton value="Download PDF" action="#{myBean.downloadPDF}" />
</h:form> 
```

它使用与您的示例相同的代码，不同之处在于支持 bean 代码不执行重定向，而是直接在响应流中创建并返回 PDF 文档。

# c# - c# 使用默认应用程序和参数打开文件

> ID：11365984
> 
> 赞同：131
> 
> 时间：2012-07-06T16:15:41.377
> 
> 标签：c#, file

使用默认应用程序打开文件的最简单方法是：

```
System.Diagnostics.Process.Start(@"c:\myPDF.pdf"); 
```

但是，我想知道是否存在将参数设置为默认应用程序的方法，因为我想以确定的页码打开 pdf。

我知道如何创建一个新进程并设置参数，但是这样我需要指明应用程序的路径，并且我希望有一个可移植的应用程序，而不必每次都设置应用程序的路径我在其他计算机上使用该应用程序。我的想法是，我希望计算机已经安装了 pdf 阅读器，并且只说要打开什么页面。

谢谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-06T16:25:25.393

如果您希望使用默认应用程序打开文件，我的意思是不指定 Acrobat 或 Reader，则无法在指定页面中打开文件。

另一方面，如果您可以指定 Acrobat 或 Reader，请继续阅读：

* * *

您可以在不告知完整 Acrobat 路径的情况下执行此操作，如下所示：

```
using Process myProcess = new Process();    
myProcess.StartInfo.FileName = "acroRd32.exe"; //not the full application path
myProcess.StartInfo.Arguments = "/A \"page=2=OpenActions\" C:\\example.pdf";
myProcess.Start(); 
```

如果您不想使用 Reader 而是使用 Acrobat 打开 pdf，请像这样更改第二行：

```
myProcess.StartInfo.FileName = "Acrobat.exe"; 
```

您可以查询注册表以识别打开 pdf 文件的默认应用程序，然后相应地在进程的 StartInfo 上定义 FileName。

请按照此问题了解有关执行此操作的详细信息：[Finding the default application for opening a specific file type on Windows](https://stackoverflow.com/questions/162331/finding-the-default-application-for-opening-a-particular-file-type-on-windows)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2019-01-20T09:27:27.627

**这应该很接近！**

```
public static void OpenWithDefaultProgram(string path)
{
    using Process fileopener = new Process();

    fileopener.StartInfo.FileName = "explorer";
    fileopener.StartInfo.Arguments = "\"" + path + "\"";
    fileopener.Start();
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-21T14:47:11.077

[我将xsl](https://stackoverflow.com/a/162356/67824)链接的博文中的VB代码转换为C#并稍作修改：

```
public static bool TryGetRegisteredApplication(
                     string extension, out string registeredApp)
{
    string extensionId = GetClassesRootKeyDefaultValue(extension);
    if (extensionId == null)
    {
        registeredApp = null;
        return false;
    }

    string openCommand = GetClassesRootKeyDefaultValue(
            Path.Combine(new[] {extensionId, "shell", "open", "command"}));

    if (openCommand == null)
    {
        registeredApp = null;
        return false;
    }

    registeredApp = openCommand
                     .Replace("%1", string.Empty)
                     .Replace("\"", string.Empty)
                     .Trim();
    return true;
}

private static string GetClassesRootKeyDefaultValue(string keyPath)
{
    using (var key = Registry.ClassesRoot.OpenSubKey(keyPath))
    {
        if (key == null)
        {
            return null;
        }

        var defaultValue = key.GetValue(null);
        if (defaultValue == null)
        {
            return null;
        }

        return defaultValue.ToString();
    }
} 
```

**编辑 - 这是不可靠的。**请参阅[查找在 Windows 上打开特定文件类型的默认应用程序](https://stackoverflow.com/questions/162331/finding-the-default-application-for-opening-a-particular-file-type-on-windows)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T16:18:48.440

你可以试试

```
Process process = new Process();
process.StartInfo.FileName = "yourProgram.exe";
process.StartInfo.Arguments = ..... //your parameters
process.Start(); 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-07-06T16:24:34.680

请在项目的属性下添加设置并以这种方式使用它们，您可以获得干净且易于配置的设置，可以将其配置为默认设置

[如何：在设计时创建新设置](http://msdn.microsoft.com/en-us/library/bb397757%28v=vs.90%29)

**更新：在下面的评论之后**

> 1.  右键 + 单击项目
> 2.  添加新项目
> 3.  在 Visual C# 项下 -> 常规
> 4.  选择设置文件

# asp.net - 为 ViewModel 创建视图帖子返回具有空外键属性的 ViewModel

> ID：11365991
> 
> 赞同：1
> 
> 时间：2012-07-06T16:16:04.793
> 
> 标签：asp.net, asp.net-mvc-3, post, mvvm, viewmodel

我正在用 ASP.NET MVC3（我的第一个）开发一个 Web 应用程序，以跟踪我工作的工程公司的数据处理步骤。

以下是一些领域模型：

**数据集：**

```
Partial Public MustInherit Class Dataset
    Public Property DatasetID As System.Guid
    Public Property Name As String

    Public Overridable Property ProcessDatasets As ICollection(Of ProcessDataset) = New HashSet(Of ProcessDataset)
    Public Overridable Property DeliveryBatches As ICollection(Of DeliveryBatch) = New HashSet(Of DeliveryBatch)

End Class 
```

**过程：**

```
Partial Public Class Process
    Public Property ProcessID As System.Guid
    Public Property Name As String
    Public Property Type As String
    Public Property Description As String
    Public Property SOP As String
    Public Property ProcessOrder As Nullable(Of Integer)

    Public Overridable Property ProcessDatasets As ICollection(Of ProcessDataset) = New HashSet(Of ProcessDataset)

End Class 
```

**ProcessDataset：（**属性连接表）

```
Partial Public Class ProcessDataset
    Public Property ProcessID As System.Guid
    Public Property DatasetID As System.Guid
    Public Property OwnerID As Nullable(Of System.Guid)
    Public Property Started As Nullable(Of Date)
    Public Property Completed As Nullable(Of Date)

    Public Overridable Property Dataset As Dataset
    Public Overridable Property Process As Process
    Public Overridable Property ProcessOwner As ProcessOwner

End Class 
```

我的目标是从 Dataset 的 Index 或 Details 视图中选择 1 个或多个 Datasets（使用域模型），然后单击一个链接，`Add New Process to Dataset(s)`该链接将打开这个所需的 Create 视图。Create 视图创建的任何 ProcessDatasets 将自动引用选定的 Datasets，而无需用户从列表中选择它们。

下面是我为 ProcessDataset 创建的 ViewModel。

**过程状态数据集：**

```
Public Class ProcessStatusDataset

    Public Property ProcessDataset As ProcessDataset
    Public Property Datasets As IEnumerable(Of Dataset)

End Class 
```

**ProcessDatasetController 中的控制器方法：**

```
'
' GET: /ProcessDataset/Create

Function CreateProcessStatus(id As Guid) As ViewResult
    Dim processStatus As New ProcessStatusDataset
    processStatus.Datasets = db.Datasets.Where(Function(d) d.DatasetID = id)
    ViewBag.ProcessID = New SelectList(db.Processes, "ProcessID", "Name")
    ViewBag.OwnerID = New SelectList(db.ProcessOwners, "ProcessOwnerID", "Name")
    Return View(processStatus)
End Function

'
' POST: /ProcessDataset/Create

<HttpPost()>
Function CreateProcessStatus(processstatusdataset As ProcessStatusDataset) As ActionResult
    If ModelState.IsValid Then
        For Each dataset In processstatusdataset.Datasets
            Dim processdataset As New ProcessDataset
            processdataset.ProcessID = processstatusdataset.ProcessDataset.ProcessID
            processdataset.OwnerID = processstatusdataset.ProcessDataset.OwnerID
            processdataset.Completed = processstatusdataset.ProcessDataset.Completed
            processdataset.Started = processstatusdataset.ProcessDataset.Started
            processdataset.DatasetID = dataset.DatasetID
            db.ProcessDatasets.Add(processdataset)
        Next
        db.SaveChanges()
        Return RedirectToAction("Index")
    End If

    ViewBag.ProcessID = New SelectList(db.Processes, "ProcessID", "Name", processstatusdataset.ProcessDataset.ProcessID)
    ViewBag.OwnerID = New SelectList(db.ProcessOwners, "ProcessOwnerID", "Name", processstatusdataset.ProcessDataset.OwnerID)
    Return View(processstatusdataset) 
```

**CreateProcessStatus 视图：**

```
@ModelType ProductionDataTrackingMVC.ProcessStatusDataset
@Code
    ViewData("Title") = "Add New Process to Datasets"
End Code
<h2>
    Add New Process to Datasets</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@Using Html.BeginForm("CreateProcessStatus","ProcessDataset")
    @Html.ValidationSummary(True)
    @<fieldset>
        <legend>Process Status</legend>
        <div class="editor-label">
            @Html.LabelForPascalCase(Function(model) model.ProcessDataset.Process):
        </div>
        <div class="editor-field">
            @Html.DropDownList("ProcessID", String.Empty)
            @Html.ValidationMessageFor(Function(model) model.ProcessDataset.ProcessID)
        </div>
        <div class="editor-label">
            @Html.LabelForPascalCase(Function(model) model.ProcessDataset.ProcessOwner):
        </div>
        <div class="editor-field">
            @Html.DropDownList("OwnerID", String.Empty)
            @Html.ValidationMessageFor(Function(model) model.ProcessDataset.OwnerID)
        </div>
        <div class="editor-label">
            @Html.LabelForPascalCase(Function(model) model.ProcessDataset.Started):
        </div>
        <div class="editor-field">
            @Html.EditorFor(Function(model) model.ProcessDataset.Started)
            @Html.ValidationMessageFor(Function(model) model.ProcessDataset.Started)
        </div>
        <div class="editor-label">
            @Html.LabelForPascalCase(Function(model) model.ProcessDataset.Completed):
        </div>
        <div class="editor-field">
            @Html.EditorFor(Function(model) model.ProcessDataset.Completed)
            @Html.ValidationMessageFor(Function(model) model.ProcessDataset.Completed)
        </div>
        <br />
        <div>
            <table>
                <tr>
                    <th>
                        Dataset Type
                    </th>
                    <th>
                        @Html.LabelForPascalCase(Function(model) model.Datasets.FirstOrDefault().Name)
                    </th>
                </tr>
    @For Each item In Model.Datasets
        Dim currentItem = item
                @<tr>
                    <td>
                        @currentItem.GetType().BaseType.Name
                    </td>
                    <td>
                        @Html.DisplayFor(Function(modelItem) currentItem.Name)
                    </td>
                </tr>
    Next
            </table>
        </div>
        <p>
            <input type="submit" value="Add New Process Status" />
        </p>
    </fieldset>
End Using
<div>
    @Html.ActionLink("Back to Process Status Datasets List", "Index")
</div> 
```

此时，`ProcessStatusDataset`传入`CreateProcessStatus`POST 方法的参数总是带有空白 Guid，其中应该有一个 ID`Process`和`Owner`。该`Datasets`物业也是`Nothing`。

当我查看渲染页面的来源时，我看到：

```
<form action="/ProcessDataset/CreateProcessStatus/e29bc119-b8c2-4ac5-9ce7-c9780673c193" method="post"> 
```

链接末尾的 Guid 是Details 视图`Dataset`中所选单曲的 ID。`Dataset`

谁能指出我正确的方向。我一直在搜索谷歌，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:52:56.740

**下拉菜单**

我认为这行不通：

...

```
@Html.DropDownList("ProcessID", String.Empty) 
```

...

相反，你应该尝试这样的事情：

...

```
@{
    Dim processes = DirectCast(ViewBag.Processes, SelectList);
}

@Html.DropDownListFor(Function(model) model.ProcessDataset.ProcessId, processes, "Select Process") 
```

...

```
'remember to set this on the post too, in case of returning the same view.
ViewBag.Processes = New SelectList(db.Processes, "ProcessID", "Name") 
```

...

这应该让**模型绑定器**（如果你不知道这个概念，你可能想用谷歌搜索）来发挥它的魔力。否则，只需将`HttpPost`操作方法​​的返回类型更改为`FormCollection`并检查键以检查您从帖子中返回的内容。

**数据集问题**

我认为您没有设置任何 html 表单字段来期望在您的帖子中看到某些内容。

# perl - 解析html文件以便稍后将其输入数据库的最简单方法是什么？

> ID：11365994
> 
> 赞同：3
> 
> 时间：2012-07-06T16:16:11.883
> 
> 标签：perl, parsing

我有一个大约 2 MB 的`html`文件，我需要解析它，其中包含大约 500 行和大约 70 列。我显然需要以一种稍后可以将其输入 SQL Server 数据库的方式对其进行清理。我过去用 Perl 解析过文件，但从来没有解析过`html`文件，我想知道在进行普通匹配和格式化之前是否应该检查任何模块。

一点更新：

```
<td class="tableHeaderDarkCenter">CUSIP/ISIN</td>

<td class="tableHeaderDarkCenter">Stock Ticker</td>

<td class="tableHeaderDarkCenter">MLCC Code</td>

<td class="tableHeaderDarkCenter">Bond Ticker</td>

<td class="tableHeaderDarkCenter">Issuer Name</td>

<td class="tableHeaderDarkCenter">Convertible Price(USD)</td>

<td class="tableHeaderDarkCenter">Par Amount</td>

<td class="tableHeaderDarkCenter">Coupon</td>

<td class="tableHeaderDarkCenter">Maturity/Mandatory Conversion Date</td>

<td class="tableHeaderDarkCenter">Outstanding Amt ($MM)</td>

<td class="tableHeaderDarkCenter">Bonds/Shrs Outstanding</td>

<td class="tableHeaderDarkCenter">Market Value($MM)</td>

<td class="tableHeaderDarkCenter">Index Weight(%)</td>

<td class="tableHeaderDarkCenter">YTM(%)</td>

<td class="tableHeaderDarkCenter">YTP(%)</td>

<td class="tableHeaderDarkCenter">Greater of YTM/YTP(%)</td>

<td class="tableHeaderDarkCenter">Duration</td>

<td class="tableHeaderDarkCenter">Currency</td>

<td class="tableHeaderDarkCenter">Country</td>

<td class="tableHeaderDarkCenter">Series</td>

<td class="tableHeaderDarkCenter">Accrued Interest</td>

<td class="tableHeaderDarkCenter">Current Yield(%)</td>

<td class="tableHeaderDarkCenter">Yield Advantage(%)</td>

<td class="tableHeaderDarkCenter">Moody Rating</td>

<td class="tableHeaderDarkCenter">S&P Rating</td>

<td class="tableHeaderDarkCenter">Avg. Rating</td>

<td class="tableHeaderDarkCenter">Internal Rating</td>

<td class="tableHeaderDarkCenter">Collateral Type</td>

<td class="tableHeaderDarkCenter">Status</td>

<td class="tableHeaderDarkCenter">Security Type</td>

<td class="tableHeaderDarkCenter">Announce Date</td>

<td class="tableHeaderDarkCenter">Issue Date</td>

<td class="tableHeaderDarkCenter">At-Issue Yield</td>

<td class="tableHeaderDarkCenter">At-Issue Prem</td>

<td class="tableHeaderDarkCenter">Delta</td>

<td class="tableHeaderDarkCenter">Gamma</td>

<td class="tableHeaderDarkCenter">RHO</td>

<td class="tableHeaderDarkCenter">Theoretical Value</td>

<td class="tableHeaderDarkCenter">Theoretical Discount (%)</td>

<td class="tableHeaderDarkCenter">Cheap (%)</td>

<td class="tableHeaderDarkCenter">Conversion Ratio</td>

<td class="tableHeaderDarkCenter">Parity Cash Adjustment</td>

<td class="tableHeaderDarkCenter">Payback</td>

<td class="tableHeaderDarkCenter">Implied Volatility(%)</td>

<td class="tableHeaderDarkCenter">Implied Spread</td>

<td class="tableHeaderDarkCenter">Parity Delta</td>

<td class="tableHeaderDarkCenter">Conversion Premium(%)</td>

<td class="tableHeaderDarkCenter">Investment Value Premium(%)</td>

<td class="tableHeaderDarkCenter">Investment Value(Bond floor)</td>

<td class="tableHeaderDarkCenter">Price to Par</td>

<td class="tableHeaderDarkCenter">Next Put Date</td>

<td class="tableHeaderDarkCenter">Yrs to Put</td>

<td class="tableHeaderDarkCenter">Yrs to Mat/Mand Conv Date</td>

<td class="tableHeaderDarkCenter">Yrs to Mat/Yrs to Put</td>

<td class="tableHeaderDarkCenter">Years to Call</td>

<td class="tableHeaderDarkCenter">1-Day Total Return(%)</td>

<td class="tableHeaderDarkCenter">1-WK Total Return(%)</td>

<td class="tableHeaderDarkCenter">MTD Total Return(%)</td>

<td class="tableHeaderDarkCenter">QTD Total Return(%)</td>

<td class="tableHeaderDarkCenter">YTD Total Return(%)</td>

<td class="tableHeaderDarkCenter">Index Sector</td>

<td class="tableHeaderDarkCenter">Industry</td>

<td class="tableHeaderDarkCenter">CS Sector L1</td>

<td class="tableHeaderDarkCenter">CS Sector L2</td>

<td class="tableHeaderDarkCenter">CS Sector L3</td>

<td class="tableHeaderDarkCenter">CS Sector L4</td>

<td class="tableHeaderDarkCenter">CS Sector L5</td>

<td class="tableHeaderDarkCenter">ML Sector L1</td>

<td class="tableHeaderDarkCenter">ML Sector L2</td>

<td class="tableHeaderDarkCenter">ML Sector L3</td>

<td class="tableHeaderDarkCenter">ML Sector L4</td>

<td class="tableHeaderDarkCenter">GIC Sector</td>

<td class="tableHeaderDarkCenter">GIC Industry Group</td>

<td class="tableHeaderDarkCenter">GIC Industry</td>

<td class="tableHeaderDarkCenter">GIC Sub Industry</td>

<td class="tableHeaderDarkCenter">Bloomberg Sector</td>

<td class="tableHeaderDarkCenter">Stock Price(USD)</td>

<td class="tableHeaderDarkCenter">Stock Yield</td>

<td class="tableHeaderDarkCenter">1-Day Equity Total Return(%)</td>

<td class="tableHeaderDarkCenter">1-WK Equity Total Return(%)</td>

<td class="tableHeaderDarkCenter">MTD Equity Total Return(%)</td>

<td class="tableHeaderDarkCenter">QTD Equity Total Return(%)</td>

<td class="tableHeaderDarkCenter">YTD Equity Total Return(%)</td>

<td class="tableHeaderDarkCenter">Eq Mkt Value($MM)</td> 
```

这是文件中发生的内容，从文件末尾到文件末尾是映射到列名的相应值。显然很多。我正在试一试`HTML::TableExtract`，但我不确定它是否适合这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:25:40.257

你的朋友在这里[`HTML::TableExtract`](https://metacpan.org/module/HTML%3a%3aTableExtract)。它写得很好（在总共五次评论中获得了五颗星中的五颗星），并允许您以非常方便的方式指定要提取的数据。

* * *

**更新**

为了演示应用到某些 HTML 数据是多么容易`HTML::TableExtract`，这里有一些代码打印文件中找到的第一个表的每一行。

如果文件中有多个表，那么您必须使用模块提供的几种方法中的一种来选择其中一种。

每行的数据都以 Perl 数组的形式返回，使用 DBI 将其存储在数据库中很简单。

```
use strict;
use warnings;

use HTML::TableExtract;

my $te = HTML::TableExtract->new;
$te->parse_file('data_snippet.txt');
my $table = $te->first_table_found;

for my $row ($table->rows) {
  print "@$row\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:22:14.027

使用现成的 HTML 解析器，如[`HTML::Parser`](http://p3rl.org/HTML%3a%3aParser),[`HTML::TreeBuilder`](http://p3rl.org/HTML%3a%3aTreeBuilder)和 like。然后简单地遍历 DOM 中的表。

# bioinformatics - Bioperl 读取 fasta 序列

> ID：11365995
> 
> 赞同：1
> 
> 时间：2012-07-06T16:16:18.133
> 
> 标签：bioinformatics, fasta, bioperl

我发现如果我的 fasta 文件以单行序列结尾，那么 Bioperl 返回的该序列将缺少一个核苷酸。如果 fasta 文件以新行结尾，则返回完整序列。不明白为什么？这是否要求 fasta 文件以空的新行结尾？

这是我正在使用的代码

```
my $obj    = $db->get_Seq_by_id($id);
my $seq    = $obj->seq; # returns 36 or 35 nucleotides depending if last new line exists 
my $length = $obj->length; # returns 36 or 35 
```

和fasta序列：

> gi|37423|emb|X04588.1| 用于细胞骨架原肌球蛋白 TM30(nm) 的人 2.5 kb mRNA CCCTTTAAATTTCCCTTTAAATTTCCCTTTAAATTTT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:56:40.540

您应该检查您的 fasta 文件是否有偶数行：`wc -l file.fasta`.

要求对于您的 fasta 文件中的每一行，必须有一个当前行字符的结尾：`$`. 如果您使用`vi`编辑器，请键入`:set list`以显示这些隐藏的字符。或者，尝试：`cat -A file.fasta`查看行尾。

此外，要成为真正的 fasta 文件，您的标题行应以`>`字符开头。

* * *

也许这不是行的均匀性，而是文件中的最后一行是否包含换行符结尾。如果这：

```
cat -A fasta.file | awk 'END { print substr ($0, length, 1) }' 
```

不返回美元符号 ( )，*那么*`$`您在使用 fasta 文件时可能会遇到问题。

* * *

要复制该问题，您可以使用以下命令从“好”（偶数行）fasta 文件中删除最后一个换行符：

```
perl -i -pe 'chomp if eof' fasta.file 
```

您可以使用以下命令在文件末尾添加换行符：

```
perl -i -ne 'chomp; print "$_\n"' fasta.file 
```

# html - 完成后介绍 SWF 重定向

> ID：11365998
> 
> 赞同：0
> 
> 时间：2012-07-06T16:16:20.347
> 
> 标签：html, actionscript-3, flash, actionscript, flash-cs5

我正在使用 adobe flash cs5。我动画的最后 5 帧包括以下内容“navigateToURL(new URLRequest("http://www.soldbybillcox.com/tyler/redwirehome.html"),
"_self");"

这是在播放完成后尝试进行 Flash 重定向！

我将其导出为设置为 AS3.0 Flash 播放器 10 的 redwirewithsound.swf 文件。

现在使用以下代码进入 HTMl im，其中包含允许脚本访问的代码！

```
<object

 classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"

 codebase="
 http://fpdownload.adobe.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0"           
 width="550" height="400" align="middle">

 <param name="movie" value="http://soldbybillcox.com/redwirewithsound.swf">

 <param name="allowScriptAccess" value="always">

 <embed type="application/x-shockwave-flash"

 pluginspage="http://www.adobe.com/go/getflashplayer"

 width="550" height="400" align="middle"

 src="http://soldbybillcox.com/redwirewithsound.swf"

 allowScriptAccess="always"></embed>

 </object> 
```

此代码会播放视频，但完成后不会重定向！我不确定问题出在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:47:38.663

这可能是由于以下的安全模型`navigateToUrl`：

> 在浏览器中运行的 Flash Player 10 及更高版本中，以编程方式使用此方法打开弹出窗口可能不会成功。各种浏览器（和浏览器配置）可能随时阻止弹出窗口；无法保证会出现任何弹出窗口。但是，为了获得最大的成功机会，请仅在作为用户操作的直接结果执行的代码中使用此方法打开弹出窗口（例如，在鼠标单击或按键事件的事件处理程序中。 )

根据[Adob​​e 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html)：