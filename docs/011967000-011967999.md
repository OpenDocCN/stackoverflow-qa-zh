# StackOverflow 问答 11967000-11967999

# passenger - 在 bitnami redmine 中安装 gitosis 插件缺少锁文件

> ID：11967000
> 
> 赞同：0
> 
> 时间：2012-08-15T09:34:13.530
> 
> 标签：passenger, redmine, bitnami, lockfile

我已经研究这个问题很长一段时间了，到目前为止我还没有提出解决方案。我已经通过 bitnami 堆栈安装了 redmine。我也通过 gitosis 设置了 git，现在我正在尝试为 redmine 安装 gitosis 插件。但是当我尝试使用“rake redmine:plugins:migrate RAILS_ENV=production”激活插件时，我收到以下错误：

> 耙中止！没有要加载的文件 -- lockfile
> 
> 任务：TOP => db:migrate_plugins => redmine:plugins:migrate => environment（通过使用 --trace 运行任务查看完整跟踪）

我使用 use_redmine 脚本运行了该命令。我已经通过“gem install lockfile”安装了lockfile。捆绑检查返回所有依赖项都得到满足，但我仍然无法让这个东西工作。

在这里阅读了一些类似的问题后，我想这可能与乘客模块有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:30:48.773

我现在想通了。对不起，我忘记了我在这里的帖子。

解决方案有点愚蠢。我确实安装了所需的软件包，但我没有将它们包含在我的 Gemfile 中。

开发 Rails 甚至安装 Rails 应用程序可能会让人头疼-.-

# macos - 如何在 MAC (Mountain Lion) 上构建 OpenCASCADE

> ID：11967001
> 
> 赞同：3
> 
> 时间：2012-08-15T09:34:13.920
> 
> 标签：macos, build, opencascade

我正在尝试在 Mac 上构建 OpenCASCADE，但我没有任何运气。

我在 tar.gz 中从 Github 下载了它，但我对 Mac 真的很陌生，我被卡住了。

谁能解释我的下一步应该是什么？

（我找到了一些我应该使用的终端命令，但我不熟悉它们。所以如果这是在 Mac 上构建 OpenCASCADE 的正确方法，请写下详细的终端命令。谢谢！）

**编辑：**

[我现在从下面的链接](https://github.com/tpaviot/oce/wiki/Build)中理解了命令行命令。我之前也理解过，但我错了，因为我的主要问题是我没有安装 gcc（XCode 不会自动安装 gcc...）。所以无论如何，现在我终于可以运行 cmake 命令了。它开始，但以这样的方式结束：

> /Applications/CMake 2.8-9.app/Contents/share/cmake-2.8/Modules/FindX11.cmake:420 (MESSAGE) 处的 CMake 错误：找不到 X11 调用堆栈（最近的调用优先）：CMakeLists.txt:313 （查找包）

有人知道该怎么做吗？我也尝试在这里搜索这个，然后用谷歌搜索......我找到了一些“解决方案”，但这些对我不起作用。

**编辑编辑：**

最后一次编辑的解决方案是 Mountain Lion 没有安装 X11。所以打开一个使用 X11 或 Xquartz 的应用程序，它会自动安装。

不幸的是，它仍然不起作用。在终端中的 make 命令之后，我的下一条错误消息如下：

> 在 /Users/davidbirkas/Documents/tpaviot-oce-6c9a06a/src/AlienImage/AlienImage_X11XWDAlienData.cxx:14 包含的文件中：/Users/davidbirkas/Documents/tpaviot-oce-6c9a06a/inc/Aspect_XWD.hxx:5:12：致命错误：未找到“X11/XWDFile.h”文件#include ^ 1 生成错误。make[2]: *** [adm/cmake/TKService/CMakeFiles/TKService.dir/_ */* _/__/src/AlienImage/AlienImage_X11XWDAlienData.cxx.o] 错误 1 ​​make [1](https://github.com/tpaviot/oce/wiki/Build) :** **[adm/cmake/TKService/CMakeFiles/TKService.dir/all] 错误 2 make: ** * [all] 错误 2*

 *任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:14:00.823

确保与 XCode 一起安装 Apple 的 Devtools 提供的 X11 支持。您的错误消息表明它丢失了。

FWIW，我前段时间在 Mac 上写了一篇关于 OCC 和 PythonOCC 的博客文章。也许你会在那里找到一些详细的信息。

[http://cad-3d.blogspot.com/2011/10/pythonocc-open-source-interactive-cad.html](http://cad-3d.blogspot.com/2011/10/pythonocc-open-source-interactive-cad.html)

在这篇文章中，我仍然在讨论使用二进制安装程序，但最近对 OCE 版本的更新通常可以开箱即用地编译，在 OSX 上也是如此（官方 OpenCASCADE 版本并非如此）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:08:39.723

我花了一点时间在这上面，我想我做到了。这是我一步一步做的：

准备阶段：

*   安装 Xcode（使用命令行工具）= Apple 开发者网站 // 如果 Xcode 没有安装 gcc，您仍然可以从开发者网站下载它作为 Xcode 的命令行工具。

*   安装 Cmake (使用命令行工具) = Google // 你可以从官方网站下载它，文件扩展名为 .dmg/.pkg。易于安装。

*   Mountain Lion 下的 X11 “更改”为 Xquartz。可能它默认没有安装，但很容易检查它。只需转到文件夹“应用程序”并启动 X11 应用程序。如果未安装 X11/Xquartz，它将自动安装！

*   安装 FTGL = MacPorts = Google // 从他们的官方网站下载 MacPorts，使用安装程序进行安装，然后将其写入终端：

> sudo 端口安装 ftgl

*   下载 OCE 并解压（.OCE-0.9.0.tar.gz 文件）= [https://github.com/tpaviot/oce/wiki/Download](https://github.com/tpaviot/oce/wiki/Download)

安装阶段：

I. 打开终端。

二、运行此命令 // 这将设置正确的 PATH。

> ln -s /opt/X11/include/X11 /usr/local/include/X11

三、然后从终端转到您提取 OCE 文件的目录（原始提取的文件名应为：tpaviot-oce-6c9a06a）。

四。比编写这些命令：//您为提取的 OCE 文件夹创建一个构建目录。

> ```
> mkdir build 
> cd build 
> ```

V. 在这之后你发出 cmake 命令：

> ```
> cmake -DOCE_INSTALL_PREFIX:PATH=$HOME/OCE  \
>     -DOCE_WITH_FREEIMAGE:BOOL=ON \
>     -DOCE_WITH_GL2PS:BOOL=ON \
>     -DOCE_DRAW:BOOL=ON \
>     .. 
> ```

六、最后是 make 命令：

> ```
> make
> make install/strip 
> ```

如果你完全像这样做所有事情，那么它应该可以工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T09:59:44.137

[试试 OCE](https://github.com/tpaviot/oce/wiki/Build)。为 osx 编译是在公园里散步*

# android - 使用 LayerDrawable 背景自动调整 ImageButton 的大小

> ID：11967002
> 
> 赞同：1
> 
> 时间：2012-08-15T09:34:22.347
> 
> 标签：android, drawable, imagebutton, autoresize, text-size

我有一个 ImageButton，它应该包含文本。为此，我使用 LayerDrawable（CustomViewFactory 类中的 createImage 方法）简而言之

```
 public class CustomViewFactory extends ImageButton {
    public CustomViewFactory createButton(String text) {
    this.setBackgroundDrawable(createImage(R.drawable.back_configuration, text));
    return this;
    } 
```

back_configuration.xml

```
 <?xml version="1.0" encoding="utf-8"?>
     <selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/back_button_pressed" adroid:state_pressed="true">     </item>
    <item android:drawable="@drawable/back_button_normal"></item>
    <item android:drawable="@drawable/back_button_pressed" android:state_focused="true"/>

    </selector> 
```

back_button_normal 和 back_button_pressed - 9 个补丁 png 文件。

```
public LayerDrawable createImage(int resource, String text){
        Drawable [] layers = new Drawable[2];
        layers[0] = new TextDrawable(text);
        layers[1] = r.getDrawable(R.drawable.back_configuration);
        return new LayerDrawable(resource);
    }

public class TextDrawable extends Drawable {

    private final String text;
    private final Paint paint;
    public TextDrawable(String text) {

        this.text = text;
       this.paint = new Paint();
        paint.setColor(Color.WHITE);
        paint.setFilterBitmap(true); 
        paint.setTextSize(textSize);
        paint.setAntiAlias(true);
        paint.setFakeBoldText(true);
        paint.setStyle(Paint.Style.FILL);
        paint.setTextAlign(Paint.Align.LEFT);

    }

    @Override
    public void draw(Canvas canvas) {
        canvas.drawText(text, 0, 0, paint);
    }

    @Override
    public void setAlpha(int alpha) {
        paint.setAlpha(alpha);
    }

    @Override
    public void setColorFilter(ColorFilter cf) {
        paint.setColorFilter(cf);
    }

    @Override
    public int getOpacity() {
        return PixelFormat.TRANSLUCENT;
    }
} 
```

问题。如果文本很大，则将其截断。如何根据里面的文字使 ImageButton 本身的大小增加。有哪些替代方法。

如果我使用按钮，图像会在按钮上拉伸

我为我的英语道歉。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:45:56.060

您可以尝试使用 textView 而不是 imageView 或 imageButton，然后将文本视图的背景分配为您想要的图像，并为 textView 设置您想要的文本并将其设置为 layout_width 的 wrap_content

**编辑：**检查是否对文本视图使用填充将其删除。

# wpf - XmlSerializer 和/或 StreamWriter 未释放其内容

> ID：11967005
> 
> 赞同：0
> 
> 时间：2012-08-15T09:34:34.580
> 
> 标签：wpf, xmlserializer, streamwriter

我在流式传输到文件时遇到问题，我确信有一个简单的解决方案，但我很难找到它！我正在尝试做的事情非常简单，我正在获取一个类的内容并将它们序列化为 XML 并将它们流式传输到一个文件中。我正在使用的代码是：

```
 ObservableCollection<RackItemViewModel> rackVMs = ProjectTree.GetTreeData();

 XmlSerializer serializer = new XmlSerializer(typeof(RackItem));
 using (TextWriter tw = new StreamWriter(filename, false))
 {
     foreach (RackItemViewModel VM in rackVMs)
         serializer.Serialize(tw, VM.RackItem);
 } 
```

ProjectTree.GetTreeData() 只返回要序列化的数据。如果我运行程序并保存数据，它一切都按预期工作，数据将被保存并可以使用反序列化读取。我遇到的问题是当我执行多个保存时。如果我将一组数据保存到一个文件，然后将另一组数据保存到另一个文件，则第一个文件是正确的，但第二个文件是第一个文件和第二个文件的串联！似乎流或 XMLSerializer 都没有在保存之间释放它们的内容。我尝试使用 writefile 而不是 Stream，但仍然遇到同样的问题，我也尝试过刷新和关闭流，但这没有效果。不用说，如果我在保存之间关闭并重新启动应用程序，一切正常。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:01:45.510

我想我会整理这个线程，因为我已经设法解决了这个问题。事实证明，这与数据的序列化或流式传输无关。正在写入的数据缓冲区没有完全释放写入之间的数据。我正在检查 View Model 对象，该对象没问题，但正在写入的对象（RackItem）没有遵循套件。我的愚蠢错误。感谢您的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:39:26.520

在写入新文件之前，请尝试刷新流`tw.Flush()`。

# inheritance - Ormlite关系和继承

> ID：11967014
> 
> 赞同：2
> 
> 时间：2012-08-15T09:34:52.000
> 
> 标签：inheritance, ormlite

我想知道是否有机会与 interhited 类建立关系。下面的例子不起作用，因为它抛出了关系“人”不存在的错误。如果我将 DatabaseTable 标记放在 Person 类上方，它也不起作用。Ormlite 是否支持与继承对象的关系？

```
public abstract class Person{
    @DatabaseField(generatedId = true)
    public int id;
    @DatabaseField
    public String name;
    @DatabaseField(canBeNull = false, foreign = true)
    private School school;
 }

@DatabaseTable
 public class Student extends Person{
    @DatabaseField
    public String class;
    @DatabaseField
    public String year;
 }

 @DatabaseTable
 public class Teacher extends Person{
    @DatabaseField
    public String title;
 }

 @DatabaseTable
 public class School {
     @DatabaseField(generatedId = true)
     public int id;
     @ForeignCollectionField(eager = true)
     ForeignCollection<Person> persons;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:11:15.057

试一试[http://code.google.com/p/compot/](http://code.google.com/p/compot/)。它仍处于测试阶段，但它专注于实体继承并且非常易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T22:22:51.277

回复晚了非常抱歉。

不幸的是，这行不通。该类`School`必须查询 2 个不同的表来构建`persons`外部集合字段。

您可以使用具有和具有外部字段的`Person`表来完成此操作，但[ORMLite](http://ormlite.com/)无法自动为您执行此操作。`Student``Teacher``Person`

```
@DatabaseTable
public class Student {
    @DatabaseField
    public String class;
    @DatabaseField
    public String year;
    @DatabaseField(foreign = true)
    public Person person;
} 
```

然后`Person`就不会`abstract`了，会有一张`Person`桌子。这可能就是 Hibernate 在幕后所做的。

# python - Python 无法识别属性

> ID：11967015
> 
> 赞同：3
> 
> 时间：2012-08-15T09:34:52.387
> 
> 标签：python, oop, user-interface, tkinter

我正在编写我的第一个 GUI 应用程序来为公司查找产品。

```
from Tkinter import *
import tkMessageBox

def debug():
    buttonText = relStatus.get()
    tkMessageBox.showinfo("You Clicked ", buttonText)
    return

app = Tk()
app.title("Ironcraft Product Finder")
app.geometry("700x500")

labelText = StringVar()
labelText.set("Choose an Appliance Type")
topLabel = Label(app, textvariable = labelText, height = 5).pack()

fire = Button(app, text="Fire", width=20, command=debug)
fire.pack(padx=10)

relStatus = StringVar()
relStatus.set(fire.text)

app.mainloop() 
```

当我运行它时，它会出现错误消息：

```
AttributeError: Button instance has no attribute 'text' 
```

但在“火”的创造中，它说

```
text="fire" 
```

这不是属性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T09:39:55.180

Tkinter 模块有点老派。`text`可以通过项目查找访问该值：

```
relStatus.set(fire['text']) 
```

请参阅 Tkinter 文档的[设置选项部分](http://docs.python.org/library/tkinter.html#setting-options)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:18:41.803

```
topLabel = Label(app, textvariable = labelText, height = 5).pack()  # so topLabel is None

topLabel = Label(app, textvariable = labelText, height = 5)
topLabel.pack() # topLabel is Label 
```

# ios - ASIHTTPRequest 不更新进度

> ID：11967016
> 
> 赞同：0
> 
> 时间：2012-08-15T09:35:05.930
> 
> 标签：ios, asihttprequest, progress

**更新**

我认为问题出在networkQueue上。当我用**[request startAsynchronous]**或**[request startSynchronous]替换****[self.networkQueue addOperation:request]**时，它可以工作。

 ****我更新了代码以使其更清晰。

**原来的**

我使用 ASIHTTPRequest 上传带有编码图像（或 [request setFile:imagefile...]）的 json 文件，但我无法更新进度。

我只有一个输出：**value: 1.000000**，这意味着上传完成。

**incrementUploadSizeBy**从未被触发。

我在网上搜索了很多，但仍然找不到答案。这是我的代码。

```
+ (ASIEngine *)sharedInstance {
    static ASIEngine *sharedInstance = nil;
    static dispatch_once_t pred;

    dispatch_once(&pred, ^{
        sharedInstance = [[self alloc] init];
    });

    return sharedInstance;
}

- (id)init {
    if (self = [super init]) {
        _networkQueue = [ASINetworkQueue queue];
        [_networkQueue setMaxConcurrentOperationCount:MAX_CONCURRENT_OPERATION_COUNT];
        [_networkQueue setDelegate:self];
        [_networkQueue go];
    }
    return self;
}

    - (void)upload:(NSString *)imageJsonString onCompletion:(void(^)(NSString *responseString))onCompletion onFailed:(void(^)(NSError *error))onFailed {

        __unsafe_unretained __block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:UPLOAD_URL]];
        [request setShowAccurateProgress:YES];
        [request setUploadProgressDelegate:self];

        [request setPostValue:imageJsonString forKey:@"imageString"];

        [request setCompletionBlock:^{
            NSString *responseString = [request responseString];
            onCompletion(responseString);
        }];

        [request setFailedBlock:^{
            onFailed([request error]);
        }];

        [self.networkQueue addOperation:request];
    }

    #pragma mark - ASIProgressDelegate

    - (void)setProgress:(float)newProgress {
        NSLog(@"value: %f", newProgress);
    }

    - (void)request:(ASIHTTPRequest *)request incrementUploadSizeBy:(long long)newLength {
        NSLog(@"data length: %lld", newLength);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:05:27.957

如果您正在上传一个字符串，那么您可能上传的数据太少（与上传图片时相反），它会一步上传所有内容。您可以尝试从文件中读取一个巨大的字符串，看看会发生什么。****

# jquery - jQuery数据表：获取已编辑单元格的类和ID

> ID：11967017
> 
> 赞同：0
> 
> 时间：2012-08-15T09:35:06.790
> 
> 标签：jquery, datatable, html-table

我正在使用 jquery-datatables-editable ( [http://code.google.com/p/jquery-datatables-editable/](http://code.google.com/p/jquery-datatables-editable/) ) 来使用 jQuery 管理我的表，但是我需要做的是当我编辑一个单元格时，我想要获取我刚刚编辑的单元格的 id 和类。我怎样才能做到这一点？这是我的代码的一部分：

```
//creating the table
var table = $('<table id="mytable" border="1" cellpadding="1" cellspacing="1"></table>');
var head = $('<thead><tr><th>Name</th><th>IP</th><th>Status</th><th>Last Seen</th><th>Pref. Smithers</th><th>Debug LvL</th></tr></thead>');
table.append(head);
var body = $('<tbody></tbody>');
for (var i = 0; i < x.length; i++) {
    //using xml to fill the cells
    var ip = x.item(i).getAttribute("id");
    var row = $('<tr id="' + ip + '"></tr>');
    var id = $('<td id="ip" class="' + ip + '"></td>');
    var ls = $('<td id="lastseen" class="' + ip + '"></td>');
    var nm = $('<td id="name" class="' + ip + '"></td>');
    var st = $('<td id="status" class="' + ip + '"></td>');
    var dblvl = $('<td id="defaultloglevel" class="' + ip + '"></td>');
    var prfsmth = $('<td id="preferedsmithers" class="' + ip + '"></td>');
    var lastseen = x.item(i).getElementsByTagName("lastseen")[0].childNodes[0].nodeValue;
    var name = x.item(i).getElementsByTagName("name")[0].childNodes[0].nodeValue;
    var status = x.item(i).getElementsByTagName("status")[0].childNodes[0].nodeValue;
    var defaultloglevel = x.item(i).getElementsByTagName("defaultloglevel")[0].childNodes[0].nodeValue;
    var preferedsmithers = x.item(i).getElementsByTagName("preferedsmithers")[0].childNodes[0].nodeValue;
    nm.html(name);
    id.html(ip);
    st.html(status);
    ls.html(lastseen);
    dblvl.html(defaultloglevel);
    prfsmth.html(preferedsmithers);
    row.append(nm);
    row.append(id);
    row.append(st);
    row.append(ls);
    row.append(prfsmth);
    row.append(dblvl);
    body.append(row);
}
table.append(body);

$('#service_table').append(table);

//initiating the editable datatable
var oTable = $('#mytable').dataTable().makeEditable({
    sUpdateURL: function(value, settings) {
        return (value); //Simulation of server-side response using a callback function
    },
    "aoColumns": [
        {
        indicator: 'Saving platforms...',
        tooltip: 'Click to edit platforms',
        type: 'textarea',
        submit: 'Save changes',
        fnOnCellUpdated: function(sStatus, sValue, settings) {
            alert("(Cell Callback): Cell is updated with value " + sName);
        }},
        null
        ,
    {
        indicator: 'Saving platforms...',
        tooltip: 'Click to edit platforms',
        type: 'textarea',
        submit: 'Save changes',
        fnOnCellUpdated: function(sStatus, sValue, settings) {
            //I WANT HERE TO BE ABLE TO ALERT() THE ID AND THE CLASS OF THE CELL THAT WAS JUST EDITED
            alert("(Cell Callback): Cell is updated with value " + sValue);
        }},
        null
        ,
    {
        indicator: 'Saving platforms...',
        tooltip: 'Click to edit platforms',
        type: 'textarea',
        submit: 'Save changes',
        fnOnCellUpdated: function(sStatus, sValue, settings) {
            alert("(Cell Callback): Cell is updated with value " + sValue);
        }},
    {
        indicator: 'Saving platforms...',
        tooltip: 'Click to edit platforms',
        type: 'textarea',
        submit: 'Save changes',
        fnOnCellUpdated: function(sStatus, sValue, settings) {
            alert("(Cell Callback): Cell is updated with value " + sValue);
        }}
    ]

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:38:07.800

`fnOnCellUpdated`使用默认功能是不可能的。但是，您可以在 jquery-datatables-editable 插件中进行简单的调整。

我在 code.google 上发现了一个提供解决方案的[问题](http://code.google.com/p/jquery-datatables-editable/issues/detail?id=38)：更改此行：

```
settings.fnOnCellUpdated(status, sValue, settings); 
```

至

```
settings.fnOnCellUpdated(status, sValue, aPos[0], settings); 
```

那应该给你行的ID。

因为我需要来自 html 的表格行的 id，如下所示：

```
<tr id="46" class="odd">
    <td class="sorting_1">46</td>
    <td >0</td>
</tr> 
```

我换了行

```
settings.fnOnCellUpdated(status, sValue, settings); 
```

至

```
settings.fnOnCellUpdated( fnGetCellID(this), status, sValue, settings); 
```

并在调用函数时返回表行的 id：

```
fnOnCellUpdated:function(id){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:33:21.563

我可以提供一些理论，没有确定的：

## 这个

有可能`this`，在`fnOnCellUpdated`回调的范围内。指已编辑的`td`.

## 设置

可能`td`作为属性传递`settings`给`fnOnCellUpdated`回调，但是 datatables-editable 文档在定义`settings`. 您可以尝试探索它的属性。

## 其他回调

[此页面](http://code.google.com/p/jquery-datatables-editable/wiki/EditorSettings)表明该选项将采用回调函数，但是您遇到与- 它的参数未定义`sUpdateURL`相同的问题。`fnOnCellUpdated``settings`

[此页面](http://jquery-datatables-editable.googlecode.com/svn/trunk/events.html)表明有一个`fnOnEdited`回调，这可能很有用，但它的参数没有完全定义。

# java - 在 Java 中，删除字符串的第一个字符，如果它是 ,（逗号）

> ID：11967019
> 
> 赞同：13
> 
> 时间：2012-08-15T09:35:10.367
> 
> 标签：java, string, character, comma

在 Java 中，我有一个 String 变量。

有时字符串的第一个字符是逗号`,`

只有当它是逗号时，我才想删除第一个字符。

做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-15T09:36:24.570

就像是：

```
text = text.startsWith(",") ? text.substring(1) : text; 
```

很简单...

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-15T09:37:48.790

我会将`^`锚与以下内容一起使用`replaceFirst()`：

```
niceString = yourString.replaceFirst("^,", ""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T11:10:19.173

如果您的类路径中有 commons-lang，可以查看[StringUtils.removeStart(String str, String remove)](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#removeStart-java.lang.String-java.lang.String-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T12:25:27.273

尝试这个

```
public String methodNoCharacter(String input, String character){

if(input!= null && input.trim().length() > 0)//exist
            if(input.startsWith(character))//if start with '_'
                return methodNoCharacter(input.substring(1));//recursive for sure!

        return input;

} 
```

# debugging - 我应该使用 windbg_x86 在 64 位窗口中调试 32 位应用程序吗？

> ID：11967020
> 
> 赞同：2
> 
> 时间：2012-08-15T09:35:11.343
> 
> 标签：debugging, kernel, windbg, x86-64, remote-debugging

我使用带有英特尔 CPU 的 Windows 7 x64。哪个 windbg 工作正常，我应该使用它来调试 x86 应用程序吗？和另一个类似的问题，我安装 windows XP x86 作为 vmware guest 进行内核调试。我的主机是 x64 windows 7。我应该使用哪个 windbg？windbg x86 或 x64 用于内核调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:02:38.960

我不想说 RTFM，但在这种情况下，这就是答案所在。这是 WinDbg 帮助的摘录：

> **运行 32 位版本 Windows** 的主机 如果您的主机运行 32 位版本的 Windows，请使用 32 位调试工具。（这种情况适用于基于 x86 和基于 x64 的目标。）
> 
> **运行 64 位版本 Windows** 的基于 x64 的主机 如果您的主机使用基于 x64 的处理器并运行 64 位版本的 Windows，则适用以下规则：
> 
> *   如果您正在分析转储文件，您可以使用 32 位调试工具或 64 位调试工具。（转储文件是用户模式转储文件还是内核模式转储文件并不重要，转储文件是在基于 x86 还是基于 x64 的平台上制作的也不重要。）
>     
>     
> *   如果您正在执行实时内核模式调试，则可以使用 32 位调试工具或 x64 调试工具。（这种情况适用于基于 x86 和基于 x64 的目标。）
>     
>     
> *   如果您正在调试与调试器在同一台计算机上运行的实时用户模式代码，请使用 64 位工具来调试在 WOW64 上运行的 64 位代码和 32 位代码。要将调试器设置为 32 位或 64 位模式，请使用 .effmach 命令。
>     
>     
> *   如果您正在调试在单独的目标计算机上运行的实时 32 位用户模式代码，请使用 32 位调试工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:51:02.013

通常最好将调试器与被调试的应用程序的体系结构相匹配（有时甚至是必需的）。对于调试 32 位应用程序，即使在 64 位 Windows 操作系统上，我也建议使用 x86 版本的 WinDbg。只有当我想调试 32 位应用程序的 WOW64 部分的一部分时，我才会使用 x64 版本的 WinDbg，这不应该经常发生。

# html - 调整大小时如何自动将框移到底部？

> ID：11967024
> 
> 赞同：0
> 
> 时间：2012-08-15T09:35:41.110
> 
> 标签：html, css, responsive-design

```
<div class="main">
<div class="cleft">
</div>
<div class="cright">
</div>
</div>

.cleft{
    float: left;
    padding-left: 1%;
    width: 68%;
}

.cright{
    float: right;
    padding-right: 1%;
    width: 28%;
} 
```

我有左右两个盒子。我想要一个东西，当有人调整宽度和宽度小于主容器（在我的情况下为 1075px）时，我想要放置左右框宽度：100%。

我如何使左右两边的宽度达到 100% 将显示在底部。

注意：我对 ipad、iphone 进行了一些更改，在这种情况下它们可以正常工作。但是当有人调整浏览器大小时，我如何申请那件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:58:44.317

我认为您想使用媒体查询：

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

```
@media screen and (max-width: 1075px) {
   .cleft, .cright {
       float:none;
       width:50%;
       padding:none;
   }
} 
```

# javascript - 为什么javascript函数调用中使用方括号？jQuery

> ID：11967025
> 
> 赞同：4
> 
> 时间：2012-08-15T09:35:42.603
> 
> 标签：javascript, jquery, syntax, widget

来自： [andrew whittakers 示例显示自定义 jquery 自动完成实现中的结果编号](http://jsfiddle.net/andrewwhitaker/VBTGJ/)

```
 _response: function(contents){
        $.ui.autocomplete.prototype._response.apply(this, arguments);
        $(this.element).trigger("autocompletesearchcomplete", [contents]);
    } 
```

为什么`[contents]`而不是`contents`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T09:38:28.943

`jQuery`的函数要求`trigger`第二个参数是一个数组（在 1.6.2 之前），因此需要进行包装以使其成为一个数组。从[触发文档](http://api.jquery.com/trigger/)（我强调）：

```
$('#foo').bind('custom', function(event, param1, param2) {
  alert(param1 + "\n" + param2);
});
$('#foo').trigger('custom', ['Custom', 'Event']); 
```

> 事件对象始终作为第一个参数传递给事件处理程序，但如果在 .trigger() 调用期间指定了其他参数，这些参数也将传递给处理程序。**要传递多个参数，请使用此处所示的数组。从 jQuery 1.6.2 开始，可以在不使用数组的情况下传递单个参数。**

所以从 1.6.2 开始，实际上没有必要将单个参数包装在一个数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:40:05.277

如果函数需要一个数组，则将一个或多个元素放在方括号中。例如，[trigger](http://api.jquery.com/trigger/)的函数声明是

> .trigger( eventType [, extraParameters] )

由于您可能想给它多个额外的参数，它接受它们的数组。如果您只有一个额外的参数，例如您的情况下的“内容”，那么您可以将它放入一个数组中（或者如果您只有一个参数，您也不能将它放入一个数组中，因为 JQuery 现在接受无论哪种方式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T09:42:39.703

正如 Trinh 指出的那样，它是一个包含一个元素的数组 [content]。

我不知道为什么，但是如果您将其更改为内容而不是 [内容]，它将在整个单词中搜索查询。

如果它的 [content] 它只会在开头搜索。

# php - PHP 会话未在所有页面上正确打开

> ID：11967026
> 
> 赞同：0
> 
> 时间：2012-08-15T09:35:53.167
> 
> 标签：php, session

所以我为我的 php 站点创建了这个小登录系统，我有一个登录表单，我首先使用一些会话变量（如 UserId 等）创建会话。在创建会话之前，我还会执行 session_destroy()，以便销毁任何现有会话。

然后我有这个 php 文件，我包含在我网站上每个页面的顶部，它打开该会话`session_start()`并启动 mysql 连接等。

问题是，在某些页面上会话确实打开了，而在其他页面上似乎创建了一个新会话。事实上，如果我转到另一个页面并返回到正确会话未打开的页面，那么它就是同一个错误会话，所以我实际上打开了两个会话，看起来......

当我在有效的页面和无效的页面上回显会话 ID 时，它们有不同的会话 ID，所以我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:40:22.523

首先不要使用`session_destroy()`，因为它会在下一页请求中删除会话。而是使用：

```
unset( $_SESSION ); //this will delete the session immediately 
```

要尝试测试问题，请使用以下`session_id()`功能：

```
<?php
    $a = session_id();
    if(empty($a)) session_start();
    echo "SID: ".SID."<br>session_id(): ".session_id()."<br>COOKIE: ".$_COOKIE["PHPSESSID"];
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T12:35:33.887

如果您收到重复的 cookie（如本例所示），请检查每个 cookie 的域和路径。确保 cookie 路径是域始终设置为相同的域，并且路径始终是您网站的根目录（假设您想要 cookie 站点全局）。

每个 cookie 对设置的路径和域都是可见的，所有路径都以路径集开头，并且可以设置为匹配域的所有子域。

基于对问题的评论。

# sql - 查询以查找和替换 SQL 数据库中的特定文本（所有表和所有列）

> ID：11967030
> 
> 赞同：2
> 
> 时间：2012-08-15T09:36:31.917
> 
> 标签：sql, sql-server-2008

我有一个带有 +100 个表的数据库，大多数表都有一个保存 URL 但具有不同“列名”的列，并且 URL 也不同。例如

在一张桌子上

```
usa3030.Development.com/portal/mybook/chapter1/page1/line1 
```

在另一个它的

```
usa3030.Development.com/portal/mybook/chapter1 
```

依此类推，但可以肯定的是，每个 URL 中都有“usa3030.Development.com/portal/mybook/chapter1”

**所以我想要一个查询，它将找到在列数据中包含文本的每一列（用“*”我认为我们称之为通配符）**

```
"usa3030.Development.com/portal/mybook/chapter1" 
```

并将其替换为

```
usa3030.Development.com/MyWorld/Chp1 
```

**回答**

[搜索或替换存储过程](http://vyaskn.tripod.com/search_all_columns_in_all_tables.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:49:54.550

在这里，我想您必须经过以下步骤：

```
DECLARE @string varchar(max)
For each table in sys.Objects (where type='U')

      For each column of the above table

        IF EXISTS(select * from tablename where colname like '%'+@string+'%')
        update table tablename SET colnmae=REPLACE(colname,'old','new') where colname like '%'+@string+'%') 
```

# android - 添加操作栏

> ID：11967040
> 
> 赞同：0
> 
> 时间：2012-08-15T09:37:22.610
> 
> 标签：android, android-actionbar

我正在尝试添加 on 的操作栏，但未显示...

我正在关注此[文档](http://developer.android.com/guide/topics/ui/actionbar.html)，如我所见，操作栏应包含在应用程序的活动中（如果它在 Android 3.0 AVD 上运行，这是我的情况）。

以下是我的代码的一些部分：

**AndroidManifest.xml**

```
//...
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Holo"  >
//... 
```

**MenuActivity.java**

```
public class MenuActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_menu);

    //...
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_menu, menu);
    return true;
}
} 
```

**/res/menu/activity_menu.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_settings"
        android:title="@string/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="ifRoom" />
</menu> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:30:03.333

[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)需要 Android API 级别 11 或更高版本（Android 3.0.0 或更高版本）。

```
<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" /> 
```

或者，安装并使用[Android 支持库](http://developer.android.com/tools/extras/support-library.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T20:54:23.683

代替文件中的`android:theme="@android:style/Theme.Holo"` 尝试`android:theme="@style/AppTheme"``AndroidManifest.xml`

# boost - 根据 typedef 可以是 wcout 的通用 cout

> ID：11967051
> 
> 赞同：3
> 
> 时间：2012-08-15T09:37:47.773
> 
> 标签：boost, typedef, boost-mpl, c++

我有一个`typedef char char_t`which 也可以`typedef wchar_t char_t`，我想要的是一个通用的`cout`.
我有一个`util`我想要的命名空间`util::cout`，`std::cout`如果`char_t`是`char`，`std::wcout`如果`char_t`是`wchar_t`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:53:22.523

是没有问题; `static`您可以使用包含对适当对象的引用的模板特化来做到这一点。

```
template<typename T> struct select_cout;

template<> struct select_cout<char> { static std::ostream &cout; };
std::ostream &select_cout<char>::cout = std::cout;

template<> struct select_cout<wchar_t> { static std::wostream &cout; };
std::wostream &select_cout<wchar_t>::cout = std::wcout;

std::basic_ostream<char_t> &cout = select_cout<char_t>::cout; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:44:36.297

您正在重新发明 MS 的一个糟糕的设计（至少在此时此地，也许这是一个不错的决定）。

请注意，所有其他平台最有可能使用 UTF-8 进行输出，因此通过`std::cout`输出的 UTF-8 字符串就可以了。在 Windows 上，控制台上的 Unicode 输出无论如何都不可能正确（由于字体和损坏的控制台代码页）。

简而言之，没有理由*想要*这样的东西，你最好使用其中一个，而不是两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-24T16:08:54.393

如果您正在阅读宽格式文件并使用我从评论中挑选的多字节程序，那么解决方案可能是 . . .

您可以将文件内容作为输入读取`std::wstring`到程序内存中，并用于`wcstombs_s()`将从文件中读取的字符串转换为多字节字符串。

本质上，字符串的格式并不重要，您可以随时根据需要更改它。

# file - 多个文件中的单个 fortran 模块

> ID：11967053
> 
> 赞同：3
> 
> 时间：2012-08-15T09:37:56.690
> 
> 标签：file, module, fortran, explicit-interface

[我刚刚在这里](https://stackoverflow.com/questions/11953087/proper-use-of-modules-in-fortran)阅读了关于在 Fortran 中使用模块的正确方法的非常好的问题/答案。通过在模块中编写子例程，除了阐明代码之外，还可以使它们变得明确。

据我所知，一个模块必须放在一个文件中，例如“mod_exemple.f90”。我编写的程序通常很长，有许多子程序，它们确实可以按目的排序，从而放入模块中。问题：那会做**很**长的模块文件，有数百行。

您可以将一个模块拆分为多个文件吗？是否建议？为什么？你有其他的分裂建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T10:05:20.427

我会避免将模块拆分为多个文件，这不是标准的做法，我会发现比所有相关例程都在同一个文件中更难阅读/理解。如果您的模块太大，那么我强烈建议重新考虑模块的逻辑，看看您是否不能将通用代码和实用程序例程分解到它们自己的模块中。最好的解决方案不是让您的相关代码分布在多个文件中，而是最好的解决方案，无论需要多少行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:40:26.117

是的，您可以，但您必须使用`include`、 或 cpp`#include`或子模块，这些不是 Fortran 2003 广泛支持的功能。

如果由于某种原因（例如，子模块尚不可用），长且逻辑上独立的单元必须在同一个文件中结束，我认为使用单独的文件和`include`它们没有什么不好的。

# android - 如果有任何网络活动，我如何获得通知？

> ID：11967061
> 
> 赞同：2
> 
> 时间：2012-08-15T09:38:40.530
> 
> 标签：android

如果手机上有任何网络活动，我可以注册到某个意图过滤器并获得事件通知吗？

通知栏顶部的箭头（wifi和hsdpa）移动，所以我猜有一些方法可以得到通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:17:44.467

使用以下代码注册监听器

```
((TelephonyManager)mContext.getSystemService(Context.TELEPHONY_SERVICE))
 .listen(mPhoneStateListener, PhoneStateListener.LISTEN_DATA_CONNECTION_STATE
                      | PhoneStateListener.LISTEN_DATA_ACTIVITY); 
```

在[Phonestatelistener.OnDataActivity](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#onDataActivity%28int%29)你会收到回调

# android - android 的 KXmlParser 中的 ArrayIndexOutOfBoundsException

> ID：11967062
> 
> 赞同：7
> 
> 时间：2012-08-15T09:38:53.437
> 
> 标签：android, xmlpullparser, kxml2

我在 android 上进行常规 XML 解析，很少会遇到这个异常，而且只在特定的手机上。一直没能找到这个问题的根源。有人知道可能是什么原因造成的吗？

```
 java.lang.ArrayIndexOutOfBoundsException: src.length=8192 srcPos=1 dst.length=8192 dstPos=0 length=-1
    at java.lang.System.arraycopy(Native Method)
    at org.kxml2.io.KXmlParser.fillBuffer(KXmlParser.java:1489)
    at org.kxml2.io.KXmlParser.skip(KXmlParser.java:1574)
    at org.kxml2.io.KXmlParser.parseStartTag(KXmlParser.java:1049)
    at org.kxml2.io.KXmlParser.next(KXmlParser.java:369)
    at org.kxml2.io.KXmlParser.next(KXmlParser.java:310) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:04:31.253

我有一个类似的例外。就我而言，xml 已下载并保存到 SD。当我打开文件时，我看到它剪掉了“句子中间”，就像它一样。下载文件时似乎出现了错误。删除文件并重新下载解决了这种情况下的问题，但为了防止将来出现相同类型的问题，我在读取 xml 时检查 ArrayIndexOutOfBoundsException，并假设文件在捕获时已损坏。

这显然只是对目前定义模糊的问题的临时解决方案。如果我想得更多，我会更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T09:40:00.627

我发现了一个针对 Android 4.4 的错误修复，其中提到了这一点：[更改 61530](https://android-review.googlesource.com/#/c/61530/)

因此，您应该得到的正确例外是：**未终止的元素内容规范**，意味着意外的 EOF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T00:01:41.893

下层 (kxml) 在遇到错误 xml 时错误地抛出未经检查的异常。要解决此问题，在使用 XmlPullParser 时，请替换

```
try {
    // use XmlPullParser
}
catch (XmlPullParserException ex) { ... } 
```

和

```
try {
    // use XmlPullParser
}
catch (Exception ex) { ... } 
```

# delphi - 我应该为 TCP 客户端发送使用互斥锁还是编写自己的队列机制？

> ID：11967064
> 
> 赞同：1
> 
> 时间：2012-08-15T09:39:02.390
> 
> 标签：delphi, mutex, indy10

Delphi XE2、Indy V10、Windows 7 Pro - 但我认为我有一个普遍的概念问题。

1.  Indy 的 TCP 客户端是同步的——它使用阻塞调用。
2.  但是我的应用程序的某些部分是异步的 - 我想通过 TCP 发送数据并等待响应
    A）第 3 方串行端口组件报告来自串行端口的输入（它似乎是异步的并在它自己的线程中运行，发布消息到我的应用程序的主窗体的 Windows 消息队列）和
    B）当几个计时​​器之一到期时（也是异步的）
3.  我的应用程序对这些异步事件的处理需要进行阻塞调用以通过 TCP 发送数据并在发送下一个 TCP 数据之前获得响应。例如

    ```
    procedure OnSerialPortRxChar(...);
    begin  
      if SendTCpData(...) = 'OK' then ...  
    end;  

    procedure OnTimerExpiry(...);  
    begin  
      if SendTCpData(...) = 'OK' then ...  
    end; 
    ```

这些不应该互相打断，但目前可以。

显然，我的函数`SendTCpData`需要某种阻塞机制来防止重入调用，或者需要排队机制。鉴于调用者需要知道结果，我最好的解决方案是互斥体吗？问题在于 TCP 事务只是`SendTCpData`那些异步事件可以调用的 20 行函数中的一行。

我希望我已经解释清楚了。如果没有，请索取更多信息。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:56:47.750

如果您的串行库是 AsyncPro，我会选择单线程解决方案。给猫剥皮的方法不止一种，我并不是说不能使用多线程解决方案。但是鉴于 AsycPro 事件将在主线程中运行，并且您当前没有在应用程序中使用线程，这可能是最简单的前进方式。

在这个解决方案中，我们使用了重入门和队列。下面是 Delphi 和伪代码的混合。

```
var
  isInTCP: boolean = False;

function DoSendTCP: boolean;
begin
isInTCP := True;
try
  result := SendTCpData(...) = 'OK'
finally
  isInTCP := False
end
end;

procedure OnSerialPortRxChar(...);
// This is safely re-entrant.
begin  
  repeat
    if isInTCP then
        Push the event onto a queue
      else if DoSendTCP then
        // Calling DoSendTCP may cause re-entry.
        etc...
        ;
    if (queue is empty) or isInTCP then break;
    Pop from head of queue
  until False 
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:54:15.923

您可以使用 TIdAntiFreeze。只需将其放在您的主窗体上。您的呼叫仍将被阻止，但您的 GUI 不会被阻止。不过，您可能希望对您的客户端使用一些超时。

# php - 优化mysql日期生成器？

> ID：11967066
> 
> 赞同：2
> 
> 时间：2012-08-15T09:39:09.903
> 
> 标签：php, mysql, date

我有一个接受的功能`($year, $month = null, $day = null)`

本质上总是必须传入一年，但月份和日期是可选的。
如果它们没有被传入，那么它将范围设置为最大可能。

所以：`call | result`

```
(2012, 08, 15) | ['2012-08-15', '2012-08-15']  
(2012, 08)     | ['2012-08-01', '2012-08-31']
(2012, 02)     | ['2012-02-01', '2012-02-29']
(2012)         | ['2012-01-01', '2012-12-31']
()             | false 
```

我有下面的代码，但是对我来说它似乎不必要地复杂，有人能想到更好的版本吗？

```
if (!is_null($year)) {

  //year
  $from = $year . '-';
  $to   = $year . '-';

  //month
  if (!is_null($month)) {
    $from .= sprintf('%02d', $month) . '-';
    $to   .= sprintf('%02d', $month) . '-';

    //day
    if (!is_null($day)) {
      $from .= sprintf('%02d', $day);
      $to   .= sprintf('%02d', $day);
    } else {
      $from .= '01';
      $to   .= sprintf('%02d', cal_days_in_month(CAL_GREGORIAN, $month, $year));
    }

  } else {
    $from .= '01-31';
    $to   .= '12-31';
  }
  return array($from, $to);
}
return false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:56:15.723

首先，我会稍微改变设计，以便使用更容易：

```
function my_func_your_func_date_func($year, $month = null, $day = null)
{
    if (NULL === $year)
        return false;

    $mask = '%04d-%02d-%02d';
    $from = vsprintf($mask, date_pad_first($year, $month, $day));
    $to   = vsprintf($mask, date_pad_last($year, $month, $day));

    return array($from, $to);
} 
```

然后是这些辅助函数：

```
function date_pad_first($year, $month = NULL, $day = NULL)
{
    if (NULL === $month)
        $month = 1;

    if (NULL === $day)
        $day = 1;

    return array($year, $month, $day);
}

function date_pad_last($year, $month = NULL, $day = NULL)
{
    if (NULL === $month)
        $month = 12;

    if (NULL === $day)
        $day = cal_days_in_month(CAL_GREGORIAN, $month, $year);

    return array($year, $month, $day);
} 
```

然后我可能想提取这两个看起来非常相似的函数之间的差异并将其参数化，但我不确定。

* * *

如果您更喜欢将它放在一个函数中（并且使用稍微不同的语义重置`$day`if`$month`未设置），则需要使用 进行分支`if`：

```
function my_func_your_func_date_func($year, $month = null, $day = null)
{
    if (NULL === $year)
        return false;

    $from[-1] = $year;
    $to = $from;

    if (NULL === $month) {
        $from += [1, 1];
        $to += [12, 31];
    } else {
        $from[2] += [$month, 1];
        $to[2] += [$month, cal_days_in_month(CAL_GREGORIAN, $month, $year)];
    }

    $mask = '%04d-%02d-%02d';
    return array(
        vsprintf($mask, $from),
        vsprintf($mask, $to)
    );
} 
```

如果有一个 12 月的时间少于或多于 31 天，此功能也将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:12:36.410

```
function my_func_your_func_date_func($year, $month = NAN, $day = NAN) 
{
  if (!is_null($year)) {

  $from_month = max(1, $month);
  $to_month = min($month,12);

  $from_day = max(1,$day);
  $to_day = min($day,cal_days_in_month(CAL_GREGORIAN, $max_m, $year));

  $from = sprintf('%s-%02d-%02d',$year,$from_month,$from_day);
  $to = sprintf('%s-%02d-%02d',$year,$to_month,$to_day);

  return array($from,$to);
  }
  return false;
} 
```

看看[如何](http://www.php.net/manual/en/function.min.php#101058)处理`min`- http://www.php.net/manual/en/function.min.php#101058`max``NAN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:03:15.017

```
$format = '%d-%02d-%02d';

$to = $from = array ('year' => $year);

if ( ! is_null ($month) )
{
    $to['month'] = $from['month'] = $month;

    if ( ! is_null ($day) )
    {
        $to['day'] = $from['day'] = $day;
    }
    else
    {
        $from['day'] = '01';
        $to['day'] = cal_days_in_month(CAL_GREGORIAN, $month, $year);
    }
}
else
{
    $from += ['month' => '01', 'day' => '01'];
    $to += ['month' => '12', 'day' => '31'];
}

return array (
    vsprintf ($format, $from),
    vsprintf ($format, $to)
); 
```

像这样的东西？

# c# - 正则表达式查找文件中的空格数或不使用 Visual Studio

> ID：11967068
> 
> 赞同：-1
> 
> 时间：2012-08-15T09:39:11.653
> 
> 标签：c#, regex, visual-studio-2010

我需要将以下所有示例替换为`<#= ObjectType #>`

```
<#= DatabaseName #>.<#= Table.Name #>
<#=DatabaseName#>.<#=Table.Name#>
<#=  DatabaseName  #>.<#=  Table.Name  #>
<#=DatabaseName #>.<#= Table.Name#> 
```

如您所见，所有这些示例都以`<#=`并且可以继续一些空格或没有，然后`DatabaseName`又可以继续一些空格或没有，然后`#>.<#=`再一次可以继续一些空格或没有然后`Table.Name`一些空格或非，最后`#>`

我尝试使用 Visual Studio 2010 查找和替换文件，那么您有什么建议正则表达式来匹配此示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:47:11.657

[以下正则表达式将使用Visual Studio 正则表达式语法](http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx)执行您的要求（使用您的示例进行测试）：

```
^\<\#=:b*DatabaseName:b*\#\>\.\<\#=:b*Table\.Name:b*\#\>$ 
```

我锚定在行的开头`^`和结尾`$`，尽管你可能不想。

此外，,`<`和都需要转义。`#``>``.`

`:b*`表示任意数量的空格或制表符。

# android - 有什么方法可以检查被叫号码是关闭还是打开...？

> ID：11967073
> 
> 赞同：0
> 
> 时间：2012-08-15T09:39:48.280
> 
> 标签：android

我正在开发一些应用程序，我需要知道被叫号码的状态是关闭还是打开，这将在 android 中完成任何建议我们如何做到这一点..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:10:59.333

根本不...这是网络提供商（GSM，CDMA等）的问题，他们也无法确定...

# python - 如何使用 python beautifulsoup 解析 HTML 标签数组

> ID：11967075
> 
> 赞同：3
> 
> 时间：2012-08-15T09:39:51.747
> 
> 标签：python, html, beautifulsoup

如何使用 python beautifulsoup 解析以下代码？我需要获取每个图像及其相应的宽度和高度属性（如果它们存在）。

下面的代码“表示此页面上有 3 张图片，第一张图片为 300x300，中间一张的尺寸未指定，最后一张为 1000px 高”（如此[处](http://ogp.me/)所述）

```
<meta property="og:image" content="http://example.com/rock.jpg" />
<meta property="og:image:width" content="300" />
<meta property="og:image:height" content="300" />
<meta property="og:image" content="http://example.com/rock2.jpg" />
<meta property="og:image" content="http://example.com/rock3.jpg" />
<meta property="og:image:height" content="1000" /> 
```

到目前为止，我有以下代码，但它只返回第一组维度：

```
images = []
img_list = soup.findAll('meta', {"property":'og:image'})
for og_image in img_list:
    if not og_image.get('content'):
        continue

    image = {'url': og_image['content']}

    width = self.soup.find('meta', {"property":'og:image:width'})
    if width:
        image['width'] = width['content']
    height = self.soup.find('meta', {"property":'og:image:height'})
    if width:
        image['height'] = height['content']

    images.append(image) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:59:15.340

这不是 BeautifulSoup，但 pyparsing 方法可以很快组合在一起：

```
html = """
<meta property="og:image" content="http://example.com/rock.jpg" /> 
<meta property="og:image:width" content="300" /> 
<meta property="og:image:height" content="300" /> 
<meta property="og:image" content="http://example.com/rock2.jpg" /> 
<meta property="og:image" content="http://example.com/rock3.jpg" /> 
<meta property="og:image:height" content="1000" /> 
"""

from pyparsing import makeHTMLTags, withAttribute, Optional, Group

# use makeHTMLTags to define tag expressions (allows attributes, whitespace, 
# closing '/', etc., and sets up results names for matched attributes so they
# are easy to get at later)
meta,metaEnd = makeHTMLTags("meta")

# define a copy of the opening tag, filtering on the specific attribute to select for
img_meta = meta.copy().setParseAction(withAttribute(('property','og:image')))
wid_meta = meta.copy().setParseAction(withAttribute(('property','og:image:width')))
hgt_meta = meta.copy().setParseAction(withAttribute(('property','og:image:height')))

# now define the overall expression to look for, and assign names for subexpressions
# for width and height
img_ref = img_meta + Optional(Group(wid_meta)("width")) + Optional(Group(hgt_meta)("height"))

# use searchString to scan through the given text looking for matches
for img in img_ref.searchString(html):
    print "IMAGE:", img.content
    if img.height:
        print "H:", img.height.content
    if img.width:
        print "W:", img.width.content
    print 
```

印刷：

```
IMAGE: http://example.com/rock.jpg
H: 300
W: 300

IMAGE: http://example.com/rock2.jpg

IMAGE: http://example.com/rock3.jpg
H: 1000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T14:11:36.780

我想要一些快速的东西，它使用beautifulsoup 树结构。这是我认为合适的解决方案，以防有人在寻找类似的东西：

```
from BeautifulSoup import BeautifulSoup, Tag

soup = BeautifulSoup(html)
images = []
image = {}

img_list = soup.findAll('meta', {"property":'og:image'})
for og_image in img_list:
    if not og_image.get('content'):
        continue

    image = {'url': og_image['content']}
    next = og_image.nextSibling.nextSibling # calling once returns end of line char '\n'

    if next and isinstance(next, Tag) and next.get('property', '').startswith('og:image:'):
        dimension = next['content']
        prop = next.get('property').rsplit(':')[-1]
        image[prop] = dimension

        next = next.nextSibling.nextSibling
        if next and isinstance(next, Tag) and next.get('property', '').startswith('og:image:'):
            dimension = next['content']
            prop = next.get('property').rsplit(':')[-1]
            image[prop] = dimension

    images.append(image) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:09:52.077

你的不是解析问题，而是列表处理问题。你想像这样“分组”一个列表：

```
[u'http://example.com/rock.jpg', u'300', u'300', u'http://example.com/rock2.jpg', u'http://example.com/rock3.jpg', u'1000'] 
```

变成这样：

```
[[u'http://example.com/rock.jpg', u'300', u'300'], [u'http://example.com/rock2.jpg'], [u'http://example.com/rock3.jpg', u'1000']] 
```

这是我的解决方案：

```
import BeautifulSoup as BS                                                  

content = '''<meta property="og:image" content="http://example.com/rock.jpg" 
<meta property="og:image:width" content="300" />                            
<meta property="og:image:height" content="300" />                           
<meta property="og:image" content="http://example.com/rock2.jpg" />         
<meta property="og:image" content="http://example.com/rock3.jpg" />         
<meta property="og:image:height" content="1000" />'''                       

soup = BS.BeautifulSoup(content)                                            
data = [m['content'] for m in soup.findAll('meta')]                         

# Grouping                                                                            
images = []                                                                 
current_image = None                                                        
for d in data:                                                              
    if d.startswith('http'):                                                
        if current_image:                                                   
            images.append(current_image)                                    
        current_image = [d]                                                 
    else:                                                                   
        if current_image:                                                   
            current_image.append(d)                                         
        else:                                                               
            raise Exception('error')                                        
images.append(current_image)                                                

print data                                                                  
print images 
```

# ruby-on-rails - Rails 简单形式 group_method

> ID：11967082
> 
> 赞同：3
> 
> 时间：2012-08-15T09:40:37.487
> 
> 标签：ruby-on-rails, simple-form

我在 simple_form github repo 上遇到了以下内容：

```
f.input :country_id, :collection => @continents, :as => :grouped_select, :group_method =>   :countries 
```

引起我注意的是，`:group_method`在创建一个根据数据库中的内容提供选项的选择框时，这将非常有用。我唯一无法解决的是`:group_method`期望什么样的输入，以及将方法放在哪里。

例如，我想为表格 column 创建一个选择框`:product_type`。我想我会用我的简单形式写这样的东西：

```
= f.input :product_type_contains, :collection => @products, :as => :grouped_select, :group_method => :product_types 
```

`:product_type`被调用的方法在哪里。但是我不知道我应该写什么样的方法，simple_form期望什么样的结果，如果我应该把它放在Product类中，`Product.rb`. 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:33:39.737

根据[测试套件](https://github.com/plataformatec/simple_form/blob/master/test/inputs/grouped_collection_select_input_test.rb)，**simple_form**似乎期望您将与 grouped_options_for_select 一起使用的数组或散列类型：

```
test 'grouped collection accepts group_label_method option' do
  with_input_for @user, :tag_ids, :grouped_select,
    :collection => { ['Jose', 'Carlos'] => 'Authors' },
  :group_method => :first,
  :group_label_method => :last
  [...]

test 'grouped collection accepts label and value methods options' do
  with_input_for @user, :tag_ids, :grouped_select,
    :collection => { 'Authors' => ['Jose', 'Carlos'] },
    :group_method => :last,
    :label_method => :upcase,
    :value_method => :downcase
  [...] 
```

据推测，您可以编写一个`Product.rb`创建类似结构的类方法，甚至尝试使用 grouped_options_for_select(@products)...

希望这能让你走上正确的道路。

# blackberry - BlackBerry - 登录页面上的 Dialog.cancel()

> ID：11967086
> 
> 赞同：2
> 
> 时间：2012-08-15T09:40:56.010
> 
> 标签：blackberry, dialog, listener

我有一个接受用户名和密码的登录页面。当用户单击“登录”时，会显示加载屏幕“正在登录..”，其中后台线程调用 doLogin() 方法，该方法调用 Web 服务并加载适当的页面。

我面临的问题是`Dialog.cancel()`单击登录后“取消”登录。它取消了加载屏幕，但后台线程仍在处理中，即使单击“取消”，也会加载新页面。如何取消后台线程？

```
Thread backgroundWorker = new Thread(new Runnable() {
    public void run() {
        doLogin(uname, pwd);
    }
});
Dialog busyDialog = new Dialog("Signing in...",
                               new String [] { "Cancel" },
                               new int [] { Dialog.CANCEL},
                               Dialog.CANCEL,
                               Bitmap.getPredefinedBitmap(Bitmap.HOURGLASS))
{
    public void fieldChanged(Field field1, int context1)
    {
        //Something to stop the login and close the loading screen
    }
};
busyDialog.setEscapeEnabled(false);
busyDialog.show();
backgroundWorker.start(); 
```

它调用的推动新屏幕的方法是`doLogin()`：

```
private String doLogin(String user_id, String password)
{
    SoapObject resultRequestSOAP = null;
    HttpConnection httpConn = null;
    HttpTransport httpt;
    SoapPrimitive response = null;
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("username", user_id);
    request.addProperty("password", password);
    System.out.println("The request is=======" + request.toString());
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    httpt = new HttpTransport(URL+C0NNECTION_EXTENSION);
    httpt.debug = true;
    try
    {
        httpt.call(SOAP_ACTION, envelope);
        response = (SoapPrimitive) envelope.getResponse();
        String result = response.toString();
        resultRequestSOAP = (SoapObject) envelope.bodyIn;
        String[] listResult = split(result, sep);
        strResult = listResult[0].toString();
        if(strResult.equals("credentialdenied"))
        {
            Dialog.alert("Invalid login details.");
        }
        else
        {
            strsessionFirstName = listResult[1].toString();
            strsessionLastName = listResult[2].toString();
            strsessionPictureUrl = MAINURL + listResult[3].substring(2);
            strsessionStatusId = listResult[4].toString();
            strsessionStatusMessage = listResult[5].toString();
            strsessionLastUpdateTst = listResult[6].toString();
        }
        if(strResult.equals("credentialaccepted"))
        {
            if(checkBox1.getChecked() == true)
            {
                persistentHashtable.put("username", user_id);
                persistentHashtable.put("password", password);
            }
            Bitmap bitmap = getLiveImage(strsessionPictureUrl, 140, 140);
            nextScreen.getUsername(user_id);
            nextScreen.getPassword(password);
            nextScreen.setPictureUrl(bitmap);
            nextScreen.setImage(strsessionPictureUrl);
            nextScreen.setFirstName(strsessionFirstName, strsessionLastName, strsessionLastUpdateTst, strsessionStatusMessage);
            UiApplication.getUiApplication().invokeLater( new Runnable()
            {
                public void run ()
                {
                    UiApplication.getUiApplication().pushScreen(nextScreen);
                }
            } );
        }
    } catch (IOException e) {
        System.out.println("The exception is IO==" + e.getMessage());
    } catch (XmlPullParserException e) {
        System.out.println("The exception xml parser example==="
           + e.getMessage());
    }
    System.out.println( resultRequestSOAP);
    return response + "";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:11:30.140

您可能需要`boolean`在您的方法中向您的类添加一个成员变量，您可以在多个步骤中检查该变量`doLogin()`：

```
private boolean stopRequested = false;

private synchronized void requestStop() {
    stopRequested = true;
}

private synchronized boolean isStopRequested() {
    return stopRequested;
}

private String doLogin(String user_id, String password)          
{          
    SoapObject resultRequestSOAP = null;          
    HttpConnection httpConn = null;          
    HttpTransport httpt;          
    SoapPrimitive response = null;          
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);          
    request.addProperty("username", user_id);          
    request.addProperty("password", password);          
    System.out.println("The request is=======" + request.toString());          
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);          
    envelope.dotNet = true;          
    envelope.setOutputSoapObject(request);          
    httpt = new HttpTransport(URL+C0NNECTION_EXTENSION);          
    httpt.debug = true;

    if (isStopRequested()) return null;          

    try          
    {          
        httpt.call(SOAP_ACTION, envelope);          
        response = (SoapPrimitive) envelope.getResponse();          
        String result = response.toString();          
        resultRequestSOAP = (SoapObject) envelope.bodyIn;          
        String[] listResult = split(result, sep);          
        strResult = listResult[0].toString();          
        if(strResult.equals("credentialdenied"))          
        {          
            Dialog.alert("Invalid login details.");          
        }          
        else          
        {          
            strsessionFirstName = listResult[1].toString();          
            strsessionLastName = listResult[2].toString();          
            strsessionPictureUrl = MAINURL + listResult[3].substring(2);          
            strsessionStatusId = listResult[4].toString();          
            strsessionStatusMessage = listResult[5].toString();          
            strsessionLastUpdateTst = listResult[6].toString();          
        }    

        if (isStopRequested()) return null;          

        if(strResult.equals("credentialaccepted"))          
        {          
            if(checkBox1.getChecked() == true)          
            {          
                persistentHashtable.put("username", user_id);          
                persistentHashtable.put("password", password);          
            }          
            Bitmap bitmap = getLiveImage(strsessionPictureUrl, 140, 140);          
            nextScreen.getUsername(user_id);          
            nextScreen.getPassword(password);          
            nextScreen.setPictureUrl(bitmap);          
            nextScreen.setImage(strsessionPictureUrl);          
            nextScreen.setFirstName(strsessionFirstName, strsessionLastName, strsessionLastUpdateTst, strsessionStatusMessage);

            if (isStopRequested()) return null;          

            UiApplication.getUiApplication().invokeLater( new Runnable()          
            {          
                public void run ()          
                {          
                    UiApplication.getUiApplication().pushScreen(nextScreen);          
                }          
            } );          
        }          
    } catch (IOException e) {          
        System.out.println("The exception is IO==" + e.getMessage());          
    } catch (XmlPullParserException e) {          
        System.out.println("The exception xml parser example==="          
           + e.getMessage());          
    }          
    System.out.println( resultRequestSOAP);          
    return response + "";          
} 
```

然后，像这样停止线程：

```
Dialog busyDialog = new Dialog("Signing in...",               
                               new String [] { "Cancel" },               
                               new int [] { Dialog.CANCEL},               
                               Dialog.CANCEL,               
                               Bitmap.getPredefinedBitmap(Bitmap.HOURGLASS))               
{               
    public void fieldChanged(Field field1, int context1)               
    {               
        requestStop();               
    }               
}; 
```

# javascript - ASP.NET 独立的 javascript 目录结构

> ID：11967087
> 
> 赞同：1
> 
> 时间：2012-08-15T09:40:56.830
> 
> 标签：javascript, asp.net, directory, structure

我正在使用带有 jquery/javascript 的 ASP.Net。常识似乎规定页面的javascript位于单独的文件中，我想知道是否有人对这些js文件应放置在网站目录结构中的位置提出最佳实践建议，因为您最终可能会拥有一个每个页面都有相当多的 JS，显然库例程将位于专用的 js 目录中。有没有人有什么建议？这些是我正在考虑的可能性：

*   JS
    *   默认.js
    *   lib.js
*   应用程序
    *   默认.aspx
    *   默认.aspx.cs

或者

*   JS
    *   lib.js
*   应用程序
    *   默认.aspx
    *   默认.aspx.cs
    *   默认.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:46:52.580

我们在团队中所做的是，我们的 .Net 文件和 .js 文件具有重复的目录结构。它为我们提供了很好的服务，这样您的 Javascript 代码和 .Net 代码就组合在一起并且很容易找到。

所以我会投票给你的第一个例子作为“最佳实践”

# java - JNI 和共享内存

> ID：11967093
> 
> 赞同：2
> 
> 时间：2012-08-15T09:41:23.577
> 
> 标签：java, c, java-native-interface, posix, shared-memory

我使用 JNI 访问之前创建的共享内存段。我使用 Java/Jni 读/写函数，它可以获取共享缓冲区的地址，也可以获取映射区域的 id。

不幸的是，似乎每次我调用读/写函数时，我都必须使用下面的函数重新映射段。有没有办法解决这个问题？我想（我已经尝试过了，但它没有用，只需要映射一次段，并且将来只需使用 void* addr 参数，而不是每次我调用 JNI 方法读取或写入, 必须调用 map_shared_memory。当前代码运行良好，但仍然相对较慢。因此希望尽量减少看似不必要的操作。

```
void* map_shared_memory(int id) {
     void* addr;
     if (id == 0)
         return NULL;
     addr = shmat(id, NULL, 0);
     shmctl(id, IPC_RMID, NULL);
     if(addr<=0) 
         perror("Error Mapping Shared Memory: "); 
     return addr; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:13:28.373

我建议在打开（或创建）共享内存的类 ShmFactory 和提供读/写方法的 ShmAccess 之间进行协作。

```
interface ShmAccess
{
   void read( shmId, byte[] bytes );
   void write( shmId, byte[] bytes );
}

interface ShmFactory
{
   public native ShmAccess open( int shmId );
} 
```

# c# - 2D Tile-Based Game Engine - 使用 C# 在 XNA 中进行图层管理

> ID：11967096
> 
> 赞同：4
> 
> 时间：2012-08-15T09:41:37.567
> 
> 标签：c#, xna, 2d

我将构建一个高级的 2D Up-Down RPG。

它将是我现有的 2D Flash RPG 引擎 (Adobe Air) 的 C# + XNA 版本。

好吧，在 Flash Pro 中，我只是为不同的图层使用了不同的 MovieClip，但我怎么能在 C# 中使用 XNA 实现这一点？

我希望能够使用我制作的 Flash Map Editor 的输出 ( map-data-file )。

输出文件如下所示：

```
<layer1>
0.0.0.A.A.A.A.B.B.A.A.0.0.0
0.0.0.A.A.A.A.B.B.B.A.A.0.0
0.0.A.A.A.B.B.B.B.B.B.A.0.0
0.A.A.A.A.B.B.B.B.B.B.A.A.0
0.A.A.A.A.B.B.B.B.B.B.A.A.0
0.A.A.A.A.A.B.B.B.B.B:B.A.0
0.0.A.A.A.A.B.B.B.B.A.A.A.0
0.0.A.A.A.A.A.B.B.A.A.A.0.0
0.0.0.A.A.A.A.B.B.A.A.0.0.0

<layer2>
. . . . . 
. . .
.
.

<layer3>
.
.
. 
```

以此类推……

在哪里：

```
0 = Blank;
A = Gras;
B = Water; 
```

所以我想简单地遍历这些行，保存在数组中并将对应的精灵添加到特定的层，可能是这样的：

```
Layers[2].Add( tile, x, y ); 
```

我怎么能意识到这一点？还有，我如何管理 z 排序，因为我希望能够在桥下行走，或者开车穿过隧道。

（就像在这张图片中，可能有一艘船在桥下行驶）

![在此处输入图像描述](../Images/7068729a4199fd7fb95de4dd1efd7f12.png)

甚至一些楼梯可以到达下一个阶段（切换层）

你们对我有什么想法甚至是参考吗？

谢谢你所有的答案！

编辑：

层 hiracy 应该是这样的：

```
map{
    Layer[0] { // "bg"
        xyArray{ .... }
    }
    Layer[1] { // "static" - bottom part / stairs of the bridge
        xyArray{ .... }
    }
    Layer[2] { // "items"
        xyArray{ .... }
    }
    Layer[3] { // "player"
        xyArray{ .... }
    }
    Layer[4] { // "static2" - top part of bridge
        xyArray{ .... }
    }
}

// if the player is ON a tile that hat a Stair funktion, the "player" layer will be
// moved on top of the "static2" layer, so 'Layer[3].Z = 4;' and 'Layer[4].Z = 3;'
// like i showed in the Switch funktion up there 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T23:04:48.853

该`SpriteBatch.Draw`方法具有允许您指定层的重载

[具体来说，这里](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.draw.aspx)表格的底部两个条目

该层是介于 0 和 1 之间的浮点数。您还需要`SpriteSortMode`在`SpriteBatch.Begin()`. 下面是我编写的棋盘游戏示例，当多个玩家占据同一个方格时，它会为玩家标记着色并将活跃玩家移动到堆栈的最前面：

```
if (i == currentPlayer)
{
     SpriteColor = Color.White;
     spriteDepth = 0f; // Front
}
else
{
     SpriteColor = Color.Gray;
     spriteDepth = 0.1f; // Back
}
spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
spriteBatch.Draw(players[i].Sprite, SquareCentre, null, SpriteColor, 0f, SpriteCentre,0.5f, SpriteEffects.None, spriteDepth);
spriteBatch.End(); 
```

希望这可以帮助。

# html - IE 7 在桌子上增加额外的高度

> ID：11967100
> 
> 赞同：1
> 
> 时间：2012-08-15T09:41:59.297
> 
> 标签：html, css, internet-explorer, alignment

我试图找出为什么 IE 会增加额外的空间。这是一个临时图像，唯一的静态数据是图像宽度（171 px）。

使用 Jquery，我提醒了 div 高度，在 Firefox、Chrome 和 Opera 中，div 高度为 164px，但在 IE 7 上为 172！

火狐：

![火狐](../Images/80a56ed9c418218afffc1a7b9ae82046.png)

铬合金：

![铬合金](../Images/1c5711082b12eb22e0e720b22cf193c9.png)

即 7：

![即 7](../Images/f8c86deae5487c1b13f3e7abe7e21080.png)

HTML：

```
<div class='wide-box'>
            <table border="0" cellspacing="0" cellpadding="0" width="171">
                <tr><td height="7"><img src="images/wide-box-header.png" width="100%" alt='' /></td></tr>
                <tr><td class='y-repeat'><img src="images/temp/3.png" alt=''/></td></tr>
                <tr><td height="9"><img src="images/wide-box-footer.png" width="100%" alt='' /></td></tr>
                <tr><td class='shadow'></td></tr>
            </table>
        </div><!-- WIDE BOX --> 
```

CSS：

```
.wide-box{
    display:block;
    width:171px;
    float:right;
    margin-right:10px;
}

.wide-box .y-repeat img { display:block;margin:0 auto; }
.wide-box .y-repeat { background:url(images/wide-box-y-repeat.png) top left repeat-y; }
.wide-box .shadow { height:10px;background:url(images/wide-box-shadow.png) top center no-repeat; } 
```

查询：

```
$(window).load(function(){
    $(".wide-box table").height( $(".wide-box .y-repeat img").height() + 24 );
}); 
```

为什么IE讨厌我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T10:02:39.520

我实际上在 Chrome 和 IE9 中看到了间距。没有看到一个完整的例子我不能确定，但​​添加

```
td img {
    display:block;
} 
```

在我的本地测试中删除了行之间的间距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:45:49.187

添加以下 css 重置脚本：[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/) 应该使 IE、Chrome 和 Firefox 的反应更加一致

# c# - 动态 LINQ 加入 DataTable 上的动态列

> ID：11967101
> 
> 赞同：3
> 
> 时间：2012-08-15T09:42:01.863
> 
> 标签：c#, linq, datatable

我有一种情况，我目前不确定如何进行。

我有两个从数据库填充的数据表，我还有一个可用的列名列表，可用于将这两个数据表连接在一起。我希望编写一组 LINQ 查询，它们将：

1.  显示两个数据表中的行（内连接，用于从另一个更新一个）。
2.  显示一个数据表中不存在于另一个数据表中的行（一个查询，用于插入的左连接，另一个用于删除的右连接）。

现在我知道如何使用普通的 LINQ 对对象或数据表执行此操作，但是在这种情况下，我需要应用列以动态连接，并且可能不止一个。查看以下部分示例代码：

```
table1.AsEnumerable()
.Join(table2.AsEnumerable(),
    dr1 => dr1.Field<string>("ID"),
    dr2 => dr2.Field<string>("ID"),
    (dr1, dr2) => new
    {
        FieldID = dr1.Field<string>("ID"),
        CdGroup = dr2.Field<string>("Name")
    }) 
```

问题是我不知道字段类型，因此`.Field<string>`无法应用语句的部分内容。此外，如果它们是多个连接列，那么我将需要多个连接语句。

我已经阅读了动态 LINQ 并且看起来很有希望，但是我还没有像我试图做的那样找到关于动态 LINQ 连接的任何信息。我知道使用嵌套循环或数据表`.Select()`上的方法可能会得到相同的结果，但我正在尝试将 LINQ 应用于我需要的一些更难的查询。

有没有人有任何关于我如何实现这一点的指示或示例，或者我应该恢复使用非 LINQ 方法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:08:55.017

如果您使用的是实体框架，您可以下载 Microsoft Dynamics CRM，并使用回答此问题的模式[是否可以构建 QueryExpression，以便您可以动态处理未知数量的条件](https://stackoverflow.com/questions/12591190/is-there-way-to-structure-a-queryexpression-so-that-you-could-dynamically-handle/12595500#comment17003707_12595500)

有一个称为 QueryExpression 的构造，您可以从中对动态查询进行建模。请参阅此 MSDN 文章[http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.query.queryexpression.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.query.queryexpression.aspx)

# jquery - 使用带有多个选择器的 jquery $.each

> ID：11967102
> 
> 赞同：8
> 
> 时间：2012-08-15T09:42:03.647
> 
> 标签：jquery

我想获取按钮或链接上的所有访问密钥。我有以下。

```
$(":button[accesskey!=''], :a[accesskey!='']").each(function(i) {
 //code
}); 
```

你可以在这里看到它[http://jsfiddle.net/QNPZU/](http://jsfiddle.net/QNPZU/)

我认为您可以使用逗号分隔多个选择器，但上面的代码不起作用。

如果我做

```
$(":*[accesskey!='']").each(function(i) {
 //code
}); 
```

它会起作用，但我认为如果 dom 很大，会有性能问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T09:44:38.330

你可以编码：

```
$("button[accesskey], a[accesskey]").each(function(i) {
   //code
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T09:44:18.087

使用`a`代替`:a`：

```
$(":button[accesskey!=''], a[accesskey!='']").each(function(i) {
 //code
}); 
```

代码：http: [//jsfiddle.net/QNPZU/3/](http://jsfiddle.net/QNPZU/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T09:44:48.537

检查这个更新的小提琴：http: [//jsfiddle.net/techfoobar/QNPZU/2/](http://jsfiddle.net/techfoobar/QNPZU/2/)

您的代码有 2 个问题。

一种。对于选择链接和按钮，您需要使用`a`and`button`和 not `:a`and`:button`

湾。您可以简单地通过使用来选择具有名为 accesskey 的属性的项目`a[accesskey]`。你不需要使用`a[accesskey!=""]`

# c# - 以编程方式向 C:\ 中的用户授予访问权限以创建文本文件

> ID：11967104
> 
> 赞同：-2
> 
> 时间：2012-08-15T09:42:07.383
> 
> 标签：c#

我在 C# 中运行我的程序，假设要在 C:\ 中创建和写入文件，但发生错误，表明对路径 C:\mytextfile.txt 的访问被拒绝。是否有任何代码可以在 C:\ 中授予用户权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:52:15.467

是的，通过使用清单[http://www.codeproject.com/Articles/66259/Requesting-Admin-Approval-at-Application-Start](http://www.codeproject.com/Articles/66259/Requesting-Admin-Approval-at-Application-Start)或以具有足够权限的[不同帐户运行](https://stackoverflow.com/questions/1873796/asp-net-run-program-with-administrator-account)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:03:33.850

您需要以管理员身份运行代码。您不需要 C# 代码，您需要更改运行代码的方式。但是，我怀疑您正在尝试做错事。我猜您正在尝试在本地存储一些数据，并且正在使用 C: 的根目录，为简单起见，您实际上应该使用标准库来定位用户文件夹或获取临时文件。

例如 Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)

（对于其他文件夹，使用 Intellisense 查看其他 SpecialFolder 子文件夹。）

# css - 使用字符的段落图标

> ID：11967106
> 
> 赞同：1
> 
> 时间：2012-08-15T09:42:15.993
> 
> 标签：css, icons, font-face

我需要为某些类型的段落设置一个图标，例如注释或警告消息。我使用 @font-face 规则和 :before 伪元素将字符用作图标，如下所示：

```
p.warning:before    {content: '⚠';} 
```

问题是：如何在段落中以正确的方式呈现/设置此图标的样式。我的意思是在左边/开始边距的顶部？作为解决方案，我使用了以下规则：

```
p.warning   {display: table;}
p.warning:before    {display: table-cell;} 
```

它在 WebKit 和 Gecko 中运行良好，但在 opera 中运行良好。这是输出：

[http://richstyle.org/demo-web.php](http://richstyle.org/demo-web.php)

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:45:47.437

您需要将其 unicode 字符代码放入`content`属性中，而不是使用实际字符本身，如下所示：

```
p.warning:before { 
    content: "\26A0";
} 
```

您提供的符号代码可在[此处](http://www.fileformat.info/info/unicode/char/26a0/index.htm)找到。请注意，某些字体可能不支持扩展的 Unicode 字符。例如，在 Windows 7 上使用 Chrome[对 JSFiddle 进行快速测试会](http://jsfiddle.net/QL9m2/)产生一个空白矩形（不支持字符）。您可能要考虑使用带有`background-image: url(...)`代替的图像或其他字符。

# jquery - jquery 动画或缓动向左滚动增量

> ID：11967107
> 
> 赞同：6
> 
> 时间：2012-08-15T09:42:27.437
> 
> 标签：jquery, scroll, jquery-animate

```
$(document).ready(function(){
    $("#right_arrow").click(function(e) {
        var scrollleftvar = $(window).scrollLeft();
        e.preventDefault()
        $("body").scrollLeft(scrollleftvar + 50);
    });
}); 
```

嗨，我试图动画或缓和上面触发的增量滚动 eleft，但有点挣扎，任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-15T09:50:40.087

您可以使用`.animate()`- 功能：

```
$('body').animate( { scrollLeft: '+=50' }, 1000, 'easeOutQuad' ); 
```

*   第一个参数设置您要设置动画的值。您可以使用类似`+=value`或`-=value`从当前值（如偏移量）设置动画。
*   第二个参数是动画运行的时间。
*   第三个是缓动，如果你使用缓动插件的话。

有关更多信息，请参阅[jQuery 文档：“.animate()”](http://api.jquery.com/animate/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-23T10:02:27.237

我认为它工作正常：

```
$('.tag-container').animate({scrollLeft:'+=300'}, 1000, "swing"); 
```

使用`swing`方法而不是`easeOutQuad`.

# git - gitk 找不到 GIT 存储库

> ID：11967110
> 
> 赞同：4
> 
> 时间：2012-08-15T09:42:34.387
> 
> 标签：git, gitk

当我运行时`gitk`，会弹出一个 Tk 窗口，提示“它无法在此处找到 GIT 存储库”。
我错过了什么？这些是我遵循的步骤。如果我错过了一些愚蠢的事情，请原谅我。

```
[~/TEMP]$ ls
[~/TEMP]$ git init abc
Initialized empty Git repository in /*******/home/jganhotra/TEMP/abc/.git/ 
```

添加了一个文件

```
[~/TEMP]$ cd abc/
[~/TEMP]$ ls -la
total 16
drwxr-x---  3 jganhotra eng 4096 Aug 15 16:05 ./
drwxr-x---  3 jganhotra eng 4096 Aug 15 16:04 ../
drwxr-x---  8 jganhotra eng 4096 Aug 15 16:05 .git/
[abc]$ touch a.txt
[abc]$ gvim a.txt 
[abc]$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       a.txt
nothing added to commit but untracked files present (use "git add" to track)
[abc]$ git add .
[abc]$ git commit -m "Added file"
[master (root-commit) 1ff1051] Added file
 1 file changed, 1 insertion(+)
 create mode 100644 a.txt 
```

做出了承诺

```
[abc]$ git status
# On branch master
nothing to commit (working directory clean)
[abc]$ git log
commit 1ff1051370dfb69a0e85a60f322da7389366db8b
Author: Jatin Kumar Ganhotra <jganhotra@******.com>
Date:   Mon Aug 13 19:10:38 2012 +0530

    Added file

[abc]$ gitk
[abc]$ which gitk
gitk:    aliased to /*******/tools/install/git-tools/git-1.7.11.2/bin/gitk

[abc]$ ls -la /******/tools/install/git-tools/git-1.7.11.2/bin/gitk
-rwxr-x---  1 devadmin eng 329597 Jul 17 17:43 /*******/tools/install/git-tools/git-1.7.11.2/bin/gitk 
```

这应该有效。我错过了什么？我相信还有一些依赖。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T13:07:28.117

好。首先，这里唯一实际正确的答案是，使用你的包管理器，你的问题就会消失。

但我会解释我为什么这么说。你的包管理器会将 git 文件放到你所有登录和 shell 会话的 $PATH 中的位置。

我看到您已经安装了 git，它是从源代码手动编译的，位于一个名为`/******/tools/install/git-tools/git-1.7.11.2/`. 我认为正在发生的事情是这样的：您要么`$PATH`在此登录/shell 会话中将 git 二进制文件添加到您的唯一文件中，要么在 bash 配置文件中为它们添加了别名。

这将导致您看到的错误。[阅读 gitk 的源码](https://github.com/gitster/git/blob/master/gitk-git/gitk)，可以看到错误发生在这里：

```
if {[catch {set gitdir [exec git rev-parse --git-dir]}]} {
show_error {} . [mc "Cannot find a git repository here."]
exit 1
} 
```

因此，gitk 使用 git 二进制文件来检查那里是否有 git repo。但是 gitk 找不到 git 二进制文件，因为它不会访问您的 shell 别名或您可能在某些临时登录/shell 会话中的某处对 $PATH 所做的任何临时更改。

所以使用你的包管理器。:) 或者修复你的路径，如果你坚持使用手动 git。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-20T14:18:20.043

确保它`/tmp`是可写的。

当我收到此错误时，这就是问题所在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-08-04T11:17:03.003

当 /tmp 文件系统已满时，我可以看到同样的问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-05T12:40:47.237

在您的 Git 存储库中只需运行：

```
$ git-init 
```

gitk 现在将看到您的 git 目录。

有关更多信息，请查看[git-init 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-init.html)。

# python - 在 wxpython 中动态创建文本控件。我怎样才能从他们那里检索数据？

> ID：11967113
> 
> 赞同：0
> 
> 时间：2012-08-15T09:42:44.807
> 
> 标签：python, user-interface, wxpython

我创建了一个带有按钮的 wxframe，单击该按钮会弹出一个子框架，该子框架生成文本控件，其中的数据存储在名为“samples”的字典中，如下所示。子框架的想法是它是一个用于编辑数据的编辑窗口。

我的问题是我不知道如何从生成的文本控件中检索数据。我只能从最后生成的文本控件中获取数据。

这是我创建的代码的简化版本：

```
import wx

class MyFrame1(wx.Frame):

    def __init__(self, *args, **kwds):
        # begin wxGlade: MyFrame1.__init__
        kwds["style"] = wx.DEFAULT_FRAME_STYLE
        self.frame=wx.Frame.__init__(self, *args, **kwds)
        self.panel_1 = wx.Panel(self, -1)
        self.f3 = wx.Frame(None,-1,'Edit Tags')

        self.editTag = wx.Button(self.panel_1, -1, "Edit Tags", size=(100, 50))
        self.editTag.Bind(wx.EVT_BUTTON, self.editTags)

        self.Bind( wx.EVT_CLOSE, self.CloseAll)

        # end wxGlade

#-------------------------------------------------------------------------------
    def editTags(self, event):  # wxGlade: MyFrame.<event_handler>
        samples={
              "Face1":"(100,100)", \
              "Face2":"(50,40)", \
              "Car":"(500,230)", \
              "Wallclock":"(120,230)"

            }

        self.f3.okButton = wx.Button(self.f3, label="OK")
        self.f3.okButton.Bind(wx.EVT_BUTTON, self.onOK)
        self.f3.okButton.SetPosition((40,200))

        spacer=0

        for k, v in sorted(samples.iteritems()):
            print "K: ", k

            spacer=spacer+40
            print "V: ", v
            print

        self.f3.new_TextControl = wx.TextCtrl(self.f3, -1, value=k)
        self.f3.new_TextControl.SetPosition((40,spacer))

        print

        self.f3.Show()

   #-------------------------------------------------------------------------------
    def onOK(self, event):  # wxGlade: MyFrame.<event_handler>
        print self.f3.new_TextControl.GetValue()
        print self.f3.new_TextControl.GetValue()
        print "OK clicked"
        self.f3.Hide()
   #-------------------------------------------------------------------------------

    def CloseAll(self, event):
        self.DestroyChildren()  # First destroy child frames
        self.Destroy()          # Then destroy the parent frame
        self.f3.Close()
        self.Close()
   #-------------------------------------------------------------------------------

    # end of class MyFrame1
    if __name__ == "__main__":
        app = wx.PySimpleApp(0)
        frame_1 = MyFrame1(None, -1, "")
        app.SetTopWindow(frame_1)
        frame_1.Show()
        app.MainLoop() 
```

也欢迎任何替代解决方案

我正在使用 python 2.7.2。和 wxpython

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:09:16.123

让我们看看你的代码：

```
def editTags(self, event):  # wxGlade: MyFrame.<event_handler>
    samples={
          "Face1":"(100,100)", \
          "Face2":"(50,40)", \
          "Car":"(500,230)", \
          "Wallclock":"(120,230)"

        }

    self.f3.okButton = wx.Button(self.f3, label="OK")
    self.f3.okButton.Bind(wx.EVT_BUTTON, self.onOK)
    self.f3.okButton.SetPosition((40,200)) 
```

让我们为您的新控件创建一个存储空间（将在下面讨论）：

```
 self.f3.new_controls = {}

    spacer=0 
```

在这里你迭代你未来的领域，这是一个问题：

```
 for k, v in sorted(samples.iteritems()):
        print "K: ", k

        spacer=spacer+40
        print "V: ", v
        print 
```

下一步：您实际创建控件。以下是一些问题隐藏的地方：

1.  您从循环中创建它，您必须将它们放在 for-loop 块中（在您的变体中，只有一个文本控件（存储在`new_TextControl`字段中创建）），它将是最后一个迭代`v`值的字段（这就是`for`工作原理） .
2.  您需要创建一些容器（还记得`self.f3.new_controls`我们在上面创建的吗？）来保存您的控件（例如`dict)`.

因此，让我们对您的代码进行一些进一步的更改：

```
 # Dict will hold {'Car': wx.TextCtrl(...), 'Wallclock': ...}
        self.f3.new_controls[k] = wx.TextCtrl(self.f3, -1, value=k)
        self.f3.new_controls[k].SetPosition((40,spacer)) 
```

你展示你的框架，没关系：

```
 self.f3.Show() 
```

`new_controls`您可以从dict访问新创建字段的值：

```
self.f3.new_controls['Car'].GetValue()  # Receive input from 'Car' text control. 
```

# java - 声明一个扩展类并实现其他类的引用

> ID：11967118
> 
> 赞同：0
> 
> 时间：2012-08-15T09:42:56.853
> 
> 标签：java, android

我正在实现一个游戏，我有一些类，比如：

```
GameObject (Abstract)
CircularGameObject
RectangularGameObject 
```

它们基本上存储位置 (x,y) 和用于检查碰撞的不同形状。

现在我想实现类**墙**（矩形）和**炸弹**（圆形）。两者都可以启用或禁用，所以我声明

```
 public interface Activable {

     public void setEnabled(boolean status);
     public boolean isEnabled();
 } 
```

而且我有一个列表用于存储对在碰撞中杀死玩家的物品（墙壁和炸弹）的引用。如何声明扩展 GameObject 并实现 Activable 的对象的 ArrayList？

我尝试声明一个类：

```
 public class ActivableGameObject extends GameObject implements Activable{}; 
```

但编译器不允许为该引用分配例如炸弹（因为是一个 CircularGameObject）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:46:11.740

尝试这个...

```
Class Bomb extends CircularGameObject implements Activable {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:50:59.767

一种方法是拥有：

```
`GameObject implements GameObjectInterface {}` 
```

然后：

```
`Activable extends GameObjectInterface` 
```

这样您就可以使用使阵列使用 Activable。

# android - 如何将画廊视图中加载的资产文件夹中的图像附加到电子邮件android？

> ID：11967126
> 
> 赞同：0
> 
> 时间：2012-08-15T09:43:34.290
> 
> 标签：android, assets

我是安卓新手。我在资产文件夹中有一些图像。我知道/并且已经将它们加载到图库视图中。

所以我的问题是：

当我打开图库时，我的资产文件夹中的图像会加载到图库视图中。但是何时通过电子邮件发送它。它不会附加到电子邮件。我希望它们附加到电子邮件（一次一个）而不保存它们到 SD 卡。

谁能帮我解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:50:03.743

不确定这是否适用于资产，但在启动电子邮件应用程序时使用标志[Intent.FLAG_GRANT_READ_URI_PERMISSION 。](http://developer.android.com/reference/android/content/Intent.html#FLAG_GRANT_READ_URI_PERMISSION)

# c++ - 在 C++ 上给定布尔表达式分配整数值

> ID：11967139
> 
> 赞同：0
> 
> 时间：2012-08-15T09:44:59.080
> 
> 标签：c++, algorithm

我试图理解从 C++ 代码中提取的一段算法，这里是 C++ 代码

`inline void DBGame::make_chain( Edge* &newedge, Edge *edges[], Node *node ){ newedge->length = edges[0]->length + edges[1]->length;`

`for (int j = 0; j < 2; j++)` `{`

`edges[j]->parent = newedge; edges[j]->remove();`

```
 // replace the old edge with the new edge at the other end
  // -------------------------------------------------------
  int k = (edges[j]->node[0] == node);
  newedge->node[j] = edges[j]->node[k];
  newedge->pself[j] = edges[j]->pself[k];
  *newedge->pself[j] = newedge;
  } 
```

}

仅供参考，节点是一个对象，而不是一个整数。
我不明白如何`int k` 通过给出一个真假表达式来分配一个整数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:47:55.003

有一个 bool 到 0 或 1 的隐式转换。它不会大大增加可读性或效率，并且至少部分是 C 没有 bool 类型的结果。

这一行：

```
int k = (edges[j]->node[0] == node); 
```

相当于：

```
int k = edges[j]->node[0] == node ? 1 : 0; 
```

除此之外，由于最初的提问者似乎已经决定使用评论来扩展问题，因此还有来自数字类型的隐式转换和指向 bool 的指针。

所以

```
if (node) 
```

相当于

```
if (node != 0) 
```

这是我不完全迷恋的另一个捷径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:47:12.987

false 为 0，true 为除 0 之外的所有内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T09:48:04.250

结果的类型`edges[j]->node[0] == node`是`bool`。它可以隐式转换为`int`，`false`变为 0 并`true`变为非零值，通常为 1。

# mysql - 如何计算两列中具有相同值的行并仅返回计数的行 关于那个问题： 如何计算两列（SQL）中具有相同值的行？ 有没有办法只返回计数小于 3 的行？ +---- 问问题 问问题 2012-08-15T09:45:33.383 201 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 关于那个问题： 如何计算两列（SQL）中具有相同值的行？ 有没有办法只返回计数小于 3 的行？ +-----+-----+-----+ | A | B |count| +=====+=====+=====+ | 1 | 3 | 2 | +-----+-----+-----+ | 4 | 2 | 1 | +-----+-----+-----+ 将 AppleScript 应用到 Mail 中的特定电子邮件消息 我有一个 AppleScript，我想将其应用于单个电子邮件（将它们归档为具有特定文件名的 PDF），但不知道如何将其应用于特定的电子邮件。 我无法设置邮件规则来运行脚本，因为这只是我是否要从 Mail 中归档一个邮件的判断。已尝试将其设置为服务，但右键单击邮件中的电子邮件时没有服务菜单。 有什么建议么？！ 富有的 mysqlsql 4 2 回答 2 This answer is useful 1 该HAVING条款 SELECT ... FROM ... WHERE ... GROUP BY whatever HAVING count(*) <3 于 2012-08-15T09:47:39.573 回答 This answer is useful 1 只需在HAVING子句中添加条件 SELECT colName, COUNT(*) FROM tableName GROUP BY colName HAVING COUNT(*) < 3 于 2012-08-15T09:48:51.400 回答 Related 2 google-app-engine - 为什么 GAE 启动第二个实例并将 Max Idle Instances 设置为 1 2 php - 搜索选项卡并将其替换为活动选项卡 3 javascript - 在 jsp 上显示时钟 1 performance - 在silverlight中绘制波形的更好方法是什么？ 1 windows - 如果单击复选框，如何为数据网格中的行着色？ 6 php - 是什么让 PHP 未设置表单变量？ 4 c# - 每个结果都有计数器的匿名类型 2 storage - 计算机如何区分整数是有符号还是无符号？ 1 android - 阻止 Android 中断用户输入/从 EditText 元素中移开焦点 5 php - 当用户按下创建按钮时，将数据加载到 html 中选择 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11967142
> 
> 赞同：0
> 
> 时间：
> 
> 标签：mysql, sql

关于那个问题： [如何计算两列（SQL）中具有相同值的行？](https://stackoverflow.com/questions/1597055/how-to-count-rows-that-have-the-same-values-in-two-columns-sql)

有没有办法只返回计数小于 3 的行？

```
+-----+-----+-----+
|  A  |  B  |count|
+=====+=====+=====+
|  1  |  3  |  2  |
+-----+-----+-----+
|  4  |  2  |  1  |
+-----+-----+-----+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:47:39.573

该`HAVING`条款

```
 SELECT ...
 FROM ...
 WHERE ...
 GROUP BY whatever
 HAVING count(*) <3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:48:51.400

只需在`HAVING`子句中添加条件

```
SELECT colName, COUNT(*)
FROM tableName
GROUP BY colName
HAVING COUNT(*) < 3 
```

# windows-8 - Windows 8 / Metro UI 中文本框下的自动完成框

> ID：11967143
> 
> 赞同：1
> 
> 时间：2012-08-15T09:45:35.190
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

我想使用 C#/XAML 在 Windows 8 UI / Metro UI 应用程序中的文本框上实现自动完成。

目前，当软/触摸键盘显示时，它会遮挡自动完成框。但是，在文本框焦点上，Windows 8 会自动向上滚动整个视图并确保文本框处于焦点位置。

实际上，我想要的只是向上滚动一点的视图（实际上是自动完成框的高度）。

我意识到我可以拦截 InputPane.GetForCurrentView() 的 Showing 事件

我可以在 Showing 事件中将 InputPaneVisibilityEventArgs.EnsuredFocusedElementInView 设置为 true（这样 Windows 不会尝试做任何事情）......但是，我如何调用与 Windows 8 相同的滚动功能，但要求它滚动再多一点！？

这是主页的代码：

```
 <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,200,0,0">
        <TextBlock HorizontalAlignment="Center" FontSize="60">App 1</TextBlock>
        <TextBlock HorizontalAlignment="Center">Enter text below</TextBlock>
        <TextBox HorizontalAlignment="Center" Margin="-10,0,10,0" Width="400" Height="30"/>
        <ListBox HorizontalAlignment="Center" Width="400">
            <ListBoxItem>Auto complete item 1</ListBoxItem>
            <ListBoxItem>Auto complete item 2</ListBoxItem>
            <ListBoxItem>Auto complete item 3</ListBoxItem>
            <ListBoxItem>Auto complete item 4</ListBoxItem>
            <ListBoxItem>Auto complete item 5</ListBoxItem>
        </ListBox>
    </StackPanel>
</Grid> 
```

如果您以最低分辨率启动模拟器，请用手“触摸”文本框，这将调出软键盘。在真实的应用程序中，当用户输入文本时，自动完成列表将与项目一起出现。

所以简而言之，我怎样才能将屏幕向上移动一点，以便用户可以看到整个自动完成列表？

请记住，在真正的应用程序中，情况会更糟，因为用户甚至可能没有注意到出现在键盘“下方”的自动完成列表。

我真的很感激一些建议，非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T22:24:54.543

我已经为 Windows 应用商店应用程序创建了一个 AutoCompleteBox，nuget 包可在[https://nuget.org/packages/AutoCompleteBoxWinRT](https://nuget.org/packages/AutoCompleteBoxWinRT)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:41:48.057

好的，这就是我将如何解决这个问题，因为我似乎找不到任何方法来根据键盘的外观来控制应用程序的滚动。我将创建一个用户控件，该控件将构成自动完成文本框的基础。

```
<UserControl
x:Class="App6.MyUserControl1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App6"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="400">

<Grid>
    <TextBox x:Name="textBox" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top"  GotFocus="textBox_GotFocus" LostFocus="textBox_LostFocus" />
    <ListBox x:Name="listBox" Height="150"  Margin="0,-150,0,0" VerticalAlignment="Top" Visibility="Collapsed"/>
</Grid> 
```

这是一个非常基本的实现，因此您必须进行调整以满足您的需求。

然后，我将以下代码隐藏添加到用户控件

```
public sealed partial class MyUserControl1 : UserControl
{
    // Rect occludedRect;
    bool hasFocus = false;

    public MyUserControl1()
    {
        this.InitializeComponent();
        InputPane.GetForCurrentView().Showing += MyUserControl1_Showing;
    }

    void MyUserControl1_Showing(InputPane sender, InputPaneVisibilityEventArgs args)
    {
        if (hasFocus)
        {
            var occludedRect = args.OccludedRect;

            var element = textBox.TransformToVisual(null);
            var point = element.TransformPoint(new Point(0, 0));

            if (occludedRect.Top < point.Y + textBox.ActualHeight + listBox.ActualHeight)
            {
                listBox.Margin = new Thickness(0, -listBox.ActualHeight, 0, 0);         // Draw above     
            }
            else
            {
                listBox.Margin = new Thickness(0, textBox.ActualHeight, 0, 0); // draw below
            }
        }          
    }

    private void textBox_GotFocus(object sender, RoutedEventArgs e)
    {
        listBox.Visibility = Windows.UI.Xaml.Visibility.Visible;
        hasFocus = true;
    }

    private void textBox_LostFocus(object sender, RoutedEventArgs e)
    {
        listBox.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
        hasFocus = false;
    }        
} 
```

接下来的步骤是公开属性以传递要绑定到 ListBox 的数据。硬核将是 ListBoxItem 模板等等，具体取决于您希望它的可重用程度。

# email - 将 AppleScript 应用到 Mail 中的特定电子邮件消息

> ID：11967144
> 
> 赞同：0
> 
> 时间：2012-08-15T09:45:36.693
> 
> 标签：email, applescript

我有一个 AppleScript，我想将其应用于单个电子邮件（将它们归档为具有特定文件名的 PDF），但不知道如何将其应用于特定的电子邮件。

我无法设置邮件规则来运行脚本，因为这只是我是否要从 Mail 中归档一个邮件的判断。已尝试将其设置为服务，但右键单击邮件中的电子邮件时没有服务菜单。

有什么建议么？！

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:10:07.100

您打算如何指定哪些单独的电子邮件？如果通过手动选择它们，您可以“获取选择”。这是一个简单的脚本，它将获取每条选定消息的主题和消息 ID。

```
tell application "Mail"
    set mySelection to get selection
    set eMails to {}
    repeat with selectedMessage in mySelection
        set messageId to selectedMessage's message id as string
        set eMail to selectedMessage's subject & ": " & messageId
        tell me to set end of eMails to eMail
    end repeat
    set AppleScript's text item delimiters to "\n\n"
    set the clipboard to (eMails as string)
end tell 
```

将其保存在 ~/Library/Scripts/Applications/Mail/ 中，它将显示在您的脚本菜单中。您可能必须转到 AppleScript Editor 的设置以“在菜单栏中显示脚本菜单”才能显示“脚本”菜单。

（注意：当你编译这个脚本时，\n\n 会变成新的行。）

# c# - 简单的 try/catch 不使用异常

> ID：11967151
> 
> 赞同：9
> 
> 时间：2012-08-15T09:45:49.117
> 
> 标签：c#, error-handling

我已经搜索了我的问题的答案，但找不到答案。抱歉，如果答案在那里并且我正在复制！

我不断看到 try/catch 代码，例如.....

```
try
{
    //Do whatever
}
catch (Exception ex)
{
    MessageBox.Show("Oops, something went wrong!");
} 
```

这将导致警告 ex is never used。

所以我的问题是......虽然 ex 从未使用过，但声明中有什么好处吗？有人告诉我，它可能会向堆栈跟踪添加细节？有时我会看到 catch(Exception) 停止警告，但这会带来什么好处（如果有的话）？如果我要写这个并且不以任何方式使用异常，我就不会声明 ex...

```
try
{
    //Do whatever
}
catch
{
    MessageBox.Show("Oops, something went wrong!");
} 
```

不是一个大问题，但肯定知道会很好！

谢谢

弗雷德

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T09:50:27.597

您可以使用以下模式，仍然声明特定的异常类型，不使用变量，以确保结构化异常处理 (SEH) 仍然发生：

```
try
{
    //Do whatever
}
catch (IOException)
{
    MessageBox.Show("Oops, something went wrong in the IO!");
}
catch (Exception)
{
    MessageBox.Show("Oops, something went wrong!");
} 
```

这不是我通常会使用的做法，因为如果不重新抛出它，我可能会记录异常详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T09:49:28.293

抑制异常通常是不好的形式……让它们向上移动。

关于“添加细节”，重新抛出异常`throw`以保留堆栈跟踪，否则您将*丢失*细节。同样，替代方法是根本不抓住它。如果您对异常没有任何用处（恢复、展开等），则很可能没有充分的理由来捕获它。

请参阅：[在 C# 中重新引发异常的正确方法是什么？](https://stackoverflow.com/questions/178456/what-is-the-proper-way-to-re-throw-an-exception-in-c)

另请参阅：[“回归基础 - 例外”](http://codebetter.com/karlseguin/2008/05/30/foundations-of-programming-pt-8-back-to-basics-exceptions/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T09:49:35.677

请务必注意，您发布的两个代码块存在差异。 `catch (Exception ex)`只会捕获 CLR 定义的异常（从 派生的异常`Exception`）。 `catch`单独将捕获任何东西 - 包括 CLR 尚未捕获或包装自身的非托管异常。

如果你想在不改变代码行为的情况下避免编译器警告，或者如果你想在仍然捕获特定异常类型的同时避免警告，你可以使用它来代替：

```
catch (Exception)
{
} 
```

这里的好处是您可以具体：`catch (SqlException)`例如。如果您不使用该变量，则声明发出警告，但特定于类型的行为仍然有用。

无论如何，声明异常不会向信息中添加任何内容（堆栈跟踪或其他），除非您明确地包装和/或重新抛出异常。（顺便说一句，不要使用`throw ex`rethrow，因为这*确实*会丢失信息：只需使用`throw`。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T09:47:21.387

您可以将该`ex`变量用于以后使用，包括日志记录、消息传递等。

```
try
{
    //Do whatever
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);

} 
```

假设您想记录您的异常，以便开发人员稍后可以查看日志并确定出了什么问题。在这种情况下，`ex`将保存记录所需的所有必要详细信息。例如 StackTrace、Message、InnerException（如果有）等。

对于您的问题：

> 虽然 ex 从未使用过，但声明中是否有任何好处？

如果您不打算使用，那么声明它没有任何好处。

> 有人告诉我，它可能会向堆栈跟踪添加细节？

我不确定，但我认为不是。如果您定义一个，那么它将包含异常的堆栈跟踪，但它不会向其中添加任何内容。

> 有时我会看到 catch(Exception) 停止警告，但这会带来什么好处（如果有的话）？

如果要使用`throw`关键字重新抛出异常，可以使用`catch(Exception)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T09:49:52.113

如果你真的不想做任何有异常的事情，你也可以这样做以避免编译器警告：

```
catch (Exception)
{
  // Stick our head in the sand
} 
```

（[或只是抓住](https://stackoverflow.com/questions/8900815/difference-between-catchexception-catch-and-just-catch)）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T09:51:57.387

这一切都与开发人员和他在以后实施适当的日志记录/调试的能力有关......

这：

```
catch (Exception ex)
{
    MessageBox.Show("Oops, something went wrong!");
} 
```

可以很容易地转换为

```
catch (Exception ex)
{
    Log.Append(ex);
    MessageBox.Show("Oops, something went wrong. Please check the Log file.");
} 
```

有时，当您逐行运行时，它只是**用于调试**`MessageBox.Show`，您可以在行上设置一个断点并读取`ex`变量。

它有它的用处，但是，在编译时，如果你不使用它，**你会得到一个警告**，指出该变量`ex`已声明但未使用，因此，你可以跟踪所有这些并将其记录或删除它。

再一次，这完全取决于程序员的选择，而且……一个未使用的变量在结束程序上并不是那么成问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T09:47:38.993

不，除非您实际使用它，否则声明它是没有意义的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-15T09:52:20.257

which将`Exception ex`作为对运行时异常对象的引用可以提供多种优势。作为开发人员，您自己可以将其记录在文本文件中或向自己发送报告。

从 MSDN 的文档开始：

> 如果要重新抛出当前由无参数 catch 子句处理的异常，请使用不带参数的 throw 语句。

[http://msdn.microsoft.com/en-us/library/0yd65esw%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/0yd65esw%28v=vs.80%29.aspx)

# matlab - 计算字符串出现次数并绘制直方图

> ID：11967154
> 
> 赞同：7
> 
> 时间：2012-08-15T09:45:59.710
> 
> 标签：matlab, histogram, cell

是否有任何直接的方法可以从像下面这样的单元格数组创建直方图？连续条之间的间距应该完全相同，并且 x 轴的标签应该是垂直方向下面变量的对应名称。

```
'w464'
'w462'
'w461'
'w464'
'w461'
'w463'
'w466'
'w461' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T10:11:57.317

我也想知道更好的方法。Fwiw，我以迂回的方式使用[countmember来绘制这样的数据。](http://www.mathworks.com/matlabcentral/fileexchange/7738)IE 如果您发布的数据被命名`A`

```
>> B={sort(unique(A)) countmember(sort(unique(A)),A)};
>> bar(B{2});
>> set(gca,'XTickLabel',B{1}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T12:55:58.283

如果您可以访问统计工具箱，`grp2idx`则非常有用：

```
%# sorting is only necessary if the output should be sorted as well
[idx,label] = grp2idx(sort(A)) 

hist(idx,unique(idx));
set(gca,'xTickLabel',label) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-01T16:09:12.927

仅使用内置函数的解决方案

```
[u,~,n] = unique(A(:));
B = accumarray(n, 1, [], @sum);
bar(B)
set(gca,'XTickLabel',u) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-17T13:36:28.143

您还可以使用直方图函数，如下所示：

```
[C,~,ic] = unique(A);

fig1 = figure;
axes1 = axes('Parent',fig1,'XTickLabel',C,'XTick',1:length(C));
hold(axes1,'on');

histogram(ic) 
```

# content-management-system - silverstripe 3 addFieldToTab“设置”

> ID：11967157
> 
> 赞同：10
> 
> 时间：2012-08-15T09:46:07.920
> 
> 标签：content-management-system, silverstripe

我想在编辑页面视图的现有选项卡“设置”中添加一个字段（在屏幕截图中标记）。

我试过这个：

```
$fields->addFieldToTab('Root.Settings', new TextField('Intro')); 
```

但它只是在包含附加字段的辅助选项卡“主要内容”旁边添加了一个新选项卡。

![Silverstripe Edid 页面视图](../Images/9e4424cebdc00af782986c2e6a45f49d.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T10:34:14.770

对于 SilverStripe 3.0，您需要覆盖模型中的[getSettingsFields()](http://api.silverstripe.org/3.0/cms/SiteTree.html#methodgetSettingsFields)函数，例如

```
function getSettingsFields() {
    $fields = parent::getSettingsFields();
    $fields->addFieldToTab("Root.Settings", new TextField('Intro'));
    return $fields;
} 
```

在 SilverStripe 2.x 中，这是在 getCMSFields() 函数中完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:13:16.737

这种方法对我有用：

```
public function updateSettingsFields(FieldList $fields) {
  $fields->addFieldToTab("Root.MyNewSettingsSubTab", new TextField('Intro'));
  return $fields;
} 
```

# linux - 限制对 Wordpress 中上传内容的访问（通过插件或 httpd 配置）

> ID：11967159
> 
> 赞同：0
> 
> 时间：2012-08-15T09:46:11.620
> 
> 标签：linux, wordpress, apache

我们的 linux 系统上有 Wordpress 网站。它托管了可以登录的人可以看到的私人文件的数量。我们将这些文件的权限设置为完全读取（rwxr-xr-x）。问题是任何拥有直接链接的人都可以访问所有内容！主要问题是如何限制对这些直接链接的访问仅限于登录用户？

是否有任何 Wordpress 插件或 httpd 配置这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:00:37.250

我会在上传文件夹的根目录中放置一个`.htaccess`带有子句的文件。`deny from all`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:16:38.300

我通过修改 httpd.conf 为上传子目录添加特殊策略暂时解决了这个问题：

```
 <Directory /var/www/wp-content/uploads>
                Options FollowSymLinks
                AllowOverride All
                Order deny,allow
                Allow from XXX.XXX.XX
                Deny from all
        </Directory> 
```

这仅允许我们的本地用户访问内容。但是，我仍然很好奇 wordpress 如何只允许登录用户进行此访问。

# java - 具有唯一键的有序对列表的 Java 结构建议

> ID：11967172
> 
> 赞同：1
> 
> 时间：2012-08-15T09:47:12.480
> 
> 标签：java, sorting, hashmap, sortedmap

一个结构`k => v`（`k`和`v`是`>=0`整数），其中所有`k`都是唯一的，而`v`可能相等（`k1 => v`和`k2 => v`）应该按`v`值的升序排序，例如：

让我们有`[35 => 1, 23 => 4, 9 => 9, 2 => 14]`并且想要插入一个新的对`20 => 5`，那么结果就是`[35 => 1, 23 => 4, 20 => 5, 9 => 9, 2 => 14]`。

我可以使用 Java 中最快的结构是什么，以便根据一些输入数据创建它，并从左侧以“一个接一个”的方式进一步迭代它。`SortedHashMap`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:00:44.993

我不认为有一个现有的结构。

SortedMap 不适合您，因为它使用键而不是值进行排序。

我将使用 HashMap 并在将 entrySet 复制到列表中的附加方法中实现排序。该列表将使用比较值的自定义比较器进行排序。

如果性能在这里很重要，那么您应该考虑实现自己的结构。有很多可能性可以做到这一点，但不能说什么是最快的。这取决于您想要执行的操作频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:09:53.420

前段时间我也遇到过类似的情况；我并行使用了几张地图：

*   A `HashMap<K, P>`M，其中 P 是对类型，以便能够通过它们的键找到对。

*   A `TreeMap<P, P>`S，带有一个比较器，它首先按值排序，然后按键排序，以始终提供正确的排序顺序。

通过并行维护这两个结构，可以始终对您的对进行排序，而不必使用键作为排序值。

添加一对：

```
M.put(key, pair);
S.put(pair, pair); 
```

要通过密钥获取一对：

```
M.get(key); 
```

要删除一对：

```
P pair = M.get(key);
M.remove(key);
S.remove(pair); 
```

要获得对的排序列表：

```
S.keySet(); 
```

核心操作的平均复杂度为：

*   添加：`O(logn)`( `TreeMap`)
*   得到：`O(1)`( `HashMap`)
*   删除`O(logn)`：( `TreeMap`)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:10:36.783

如果您不需要增量构建，我会这样做：

```
List<Pair> pairs = ...;
Collections.sort(pairs, new Comparator<Pair>() {
    @Override public int compare(Pair p1, Pair p2) {
        return p1.v - p2.v;
    }
}
LinkedHashMap<Integer, Integer> map = new LinkedHashMap<>();
map.addAll(pairs); // retains insertion order
return map; 
```

# magento - 模型的集合结果是非对象

> ID：11967173
> 
> 赞同：0
> 
> 时间：2012-08-15T09:47:13.487
> 
> 标签：magento

我正在尝试在 Magento 中获取已查看产品的列表，但以下代码：

```
$model = Mage::getModel('reports/product_index_viewed')->getCollection()
    ->addAttributeToFilter('store_id', array('eq' => 1)); 
```

创建了错误消息：

致命错误：在第 816 行对 C:\xampp\htdocs\magento\app\code\core\Mage\Eav\Model\Entity\Abstract.php 中的非对象调用成员函数 getBackend()

为什么 getCollection() 中返回的集合是非对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:15:11.120

您的过滤器调用中有错误。实际上，产品没有 store_id 属性，在您的案例中，集合尝试获取此属性，但由于它不存在，因此会发生错误。在报告集合中，创建了一个特殊方法来指定存储过滤器，因此您的代码应该如下所示（我还包括了正确类型提示的构造）：

```
/* @var $collection Mage_Reports_Model_Resource_Product_Viewed_Collection */ // This enabled type hinting
$collection = Mage::getModel('reports/product_index_viewed')->getCollection();
$collection->setStoreId($storeId); // Setting data scope (e.g translated names, prices, etc)
$collection->addStoreFilter($storeId); // Set filter by exact availability on this store. 
```

享受 Magento 开发的乐趣！

# perl - Moose Perl：“修改所有子类中的多个方法”

> ID：11967174
> 
> 赞同：2
> 
> 时间：2012-08-15T09:47:19.463
> 
> 标签：perl, methods, moose, method-modifier

我有一个 Moose BaseDBModel，它有不同的子类映射到我在数据库中的表。子类中的所有方法都像“get_xxx”或“update_xxx”，指的是不同的数据库操作。

现在我想为所有这些方法实现一个缓存系统，所以我的想法是“在”所有名为“get_xxx”的方法之前，我将在我的 memcache 池中搜索方法的名称作为键值。如果我找到了值，那么我将直接返回该值而不是方法。

理想情况下，我的代码是这样的

基础数据库模型

```
package Speed::Module::BaseDBModel;
use Moose;
sub BUILD {
  my $self = shift;

  for my $method ($self->meta->get_method_list()){
    if($method =~ /^get_/){
      $self->meta->add_before_method_modifier($method,sub {
        warn $method;
        find_value_by_method_name($method);
        [return_value_if_found_value]
      });
    }
  }
} 
```

子类示例 1

```
package Speed::Module::Character;
use Moose;

extends 'Speed::Module::BaseDBModel';
method get_character_by_id {
    xxxx
} 
```

现在我的问题是，当我的程序运行时，它会反复修改方法，例如：

1.  重启阿帕奇

2.  访问将调用 get_character_by_id 的页面，因此我可以看到一条警告消息

代码：

```
my $db_character = Speed::Module::Character->new(glr => $self->glr);
$character_state = $db_character->get_character_by_id($cid); 
```

警告：

```
get_character_by_id at /Users/dyk/Sites/speed/lib/Speed/Module/BaseDBModel.pm line 60. 
```

但是如果我刷新页面，我会看到 2 条警告消息

警告：

```
get_character_by_id at /Users/dyk/Sites/speed/lib/Speed/Module/BaseDBModel.pm line 60.
get_character_by_id at /Users/dyk/Sites/speed/lib/Speed/Module/BaseDBModel.pm line 60. 
```

我正在使用带有 apache 的 mod_perl 2.0，每次我刷新页面时，我的 get_character_by_id 方法都会被修改，这是我不想要的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:29:35.653

每次构建新实例时，您的 BUILD 不是都在执行 add_before 吗？我不确定那是你想要的。

* * *

好吧，简单/笨重的方法是设置一些包级别的标志，这样你只做一次。

否则，我认为您想与 Moose 自己的属性构建挂钩。看看这个：[http ://www.perlmonks.org/?node_id=948231](http://www.perlmonks.org/?node_id=948231)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T08:31:19.243

问题是`BUILD`每次创建*对象*时都会运行（即在每次`->new()`调用之后），但会向*class*（即*所有 objects*`add_before_method_modifier` ）添加修饰符。

 **## 简单的解决方案

请注意，每次都从使用过的包中`use`调用[导入函数。](http://perldoc.perl.org/functions/import.html)那是您要添加修饰符的地方。

家长：

```
package Parent;

use Moose;

sub import {
    my ($class) = @_;

    foreach my $method ($class->meta->get_method_list) {
        if ($method =~ /^get_/) {
            $class->meta->add_before_method_modifier($method, sub {
                warn $method
            });
        }
    }
}

1; 
```

孩子1：

```
package Child1;

use Moose;
extends 'Parent';

sub get_a { 'a' }

1; 
```

孩子2：

```
package Child2;

use Moose;
extends 'Parent';

sub get_b { 'b' }

1; 
```

所以现在它按预期工作：

```
$ perl -e 'use Child1; use Child2; Child1->new->get_a; Child2->new->get_b; Child1->new->get_a;'
get_a at Parent.pm line 11.
get_b at Parent.pm line 11.
get_a at Parent.pm line 11. 
```

## 更清洁的解决方案

因为你不能 100% 确定`import`会被调用（因为你不能确定`use`会被使用），所以更简洁和直接的解决方案就是`use My::Getter::Cacher`在每个派生类中添加类似的东西。

```
package My::Getter::Cacher;

sub import {
    my $class = [caller]->[0];

    # ...
} 
```

在这种情况下，每个派生类都应该包含两者`extends 'Parent'`，`use My::Getter::Cacher`因为第一行是关于继承，而第二行是关于添加 before 修饰符。你可能认为它有点多余，但正如我所说，我相信它更干净、更直接。

## 附言

也许你应该看一下[Memoize](http://perldoc.perl.org/Memoize.html)模块。**

# c#-4.0 - 为什么 .First 在此 Linq-To-Xml 查询中是必需的？

> ID：11967177
> 
> 赞同：0
> 
> 时间：2012-08-15T09:47:25.030
> 
> 标签：c#-4.0, linq-to-xml

这是我的 xml 文件：

```
<Corsi>
  <corso ID="0" nome="Corso 1" quota="100" dataCorso="24/08/2012"></corso>
  <corso ID="1" nome="Corso 2" quota="100" dataCorso="04/09/2012"></corso>
  <corso ID="2" nome="Corso 3" quota="100" dataCorso="14/09/2012"></corso>
  <corso ID="3" nome="Corso 4" quota="100" dataCorso="20/08/2012"></corso>
  <corso ID="4" nome="Corso 5" quota="100" dataCorso="30/09/2012"></corso>
</Corsi> 
```

查询1：工作

```
var QUERY = docCorsi.Descendants("corso")
            .Where(a => (int)a.Attribute("ID") == Convert.ToInt16(txtNomeAgenzia.Text))
            .Select(a =>a.Attribute("dataCorso").Value)
            .First(); 
```

查询2：不起作用

```
var QUERY = docCorsi.Descendants("corso")
            .Where(a => (int)a.Attribute("ID") == Convert.ToInt16(txtNomeAgenzia.Text))
            .Select(a =>a.Attribute("dataCorso").Value); 
```

任何人都可以解释为什么 .First 是必要的，即使我确定查询只返回一个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:12:13.370

原因是普通的 LINQ 查询总是返回一个`IEnumerable<T>`，即使只有一个结果。追加`First`返回查询返回的第一个元素。如果您确定只能有一个，您也可以使用`Single`.

# android - 从另一个包启动无启动器活动

> ID：11967178
> 
> 赞同：0
> 
> 时间：2012-08-15T09:47:27.323
> 
> 标签：android, securityexception, start-activity

我尝试从另一个包开始活动，但它没有 LAUNCHER 类别

```
Intent i = new Intent();            
i.setComponent(new ComponentName(maxVerPackageName, maxVerClassName));
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
startActivity(i); 
```

我遇到了异常：“发生异常：java.lang.SecurityException”

怎么了，请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:01:34.977

另一个活动是执行许可。这样只有具有权限或相同 uid 的应用程序才能启动活动。

编辑：如果您编写了其他应用程序

然后将此属性添加到您尝试启动的其他活动

```
android:exported="true" 
```

# objective-c - 如何防止浮动键盘。目标 C

> ID：11967183
> 
> 赞同：-4
> 
> 时间：2012-08-15T09:47:48.013
> 
> 标签：objective-c, xcode

> **可能重复：**
> [禁用 UITextField 键盘？](https://stackoverflow.com/questions/5615806/disable-uitextfield-keyboard)

如果您有多个文本字段，如何防止在少数文本字段之一中出现浮动键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:18:47.860

将文本字段的委托设置为`self`并实现

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
  return NO;
} 
```

# php - 打包 Zend Framework，但只包含使用的组件

> ID：11967188
> 
> 赞同：0
> 
> 时间：2012-08-15T09:48:02.460
> 
> 标签：php, zend-framework, package

我正在构建一个新的应用程序，最终我打算将它发布到互联网上免费使用。

为了减少软件包的最终下载大小，我只想捆绑我的应用程序使用的绝对裸 ZF 组件：

```
Zend
Zend_Application
Zend_Config
Zend_Config_Ini
... 
```

我可以手动执行此操作 - 尽管我不想这样做。是否有一个工具可以指向我的应用程序，它可以扫描 PHP 代码库并创建一个包含所有引用的类的包。

我知道 ZF2 使用 composer.json 来解决这个问题 - 但是我正在构建 ZF 1.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:53:38.993

不，没有工具可以为您完成这项工作。但是，我建议*不要*将 ZF1 拆成碎片，因为跟踪组件之间的多个依赖关系并非易事。也没有任何好处：自动加载器负责只加载所需的类，因此您只节省了少量磁盘空间。那不值得付出所有的努力。这意味着无论您是否整体使用 ZF1 或仅使用部分 ZF1，您*肯定不会觉得有什么区别，除非您发现您自己创建的损坏的依赖项。*

# facebook - Facebook Open Graph 响应 ID，但未显示在个人资料中

> ID：11967190
> 
> 赞同：0
> 
> 时间：2012-08-15T09:48:33.967
> 
> 标签：facebook, api

我正在尝试使用 Open Graph 来实现一些事情：当用户打开一个站点时，它应该发布到他的 facebook：*“Herp 看了 DOMAIN 上的 'THE MEMES NAME'”*。所以我得到了一个名为*“看一看”*的动作和一个名为*“Meme”*的对象。

这是发布它的代码：

```
$url = 'https://graph.facebook.com/me/xxxx:look';     
$ch = curl_init();   
$attachment = array('access_token' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
   'meme' => xxxxxxxxxxxxx',
    );      
curl_setopt($ch, CURLOPT_URL,$url);     
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);     
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);     
curl_setopt($ch, CURLOPT_POST, true);     
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);     
$result= curl_exec($ch);
curl_close ($ch);
echo $result; 
```

这是我的元标签：

```
<head prefix='og: http://ogp.me/ns# fb: xxxxxxxxxxxxxxxxxxxxx'>
<meta property='fb:app_id' content='xxxxxxxxx' > 
<meta property='og:type'   content='xxx:xxx' > 
<meta property='og:type'   content='object' > 
<meta property='og:url'    content='xxxxx' > 
<meta property='og:title'  content='".$zeile[2]."' > 
<meta property='og:image'  content='".$image_path."' > 
```

所以还有一个`og:type`对象，因为用户也可以喜欢它。

当我打开这个页面时，我得到一个 id 作为响应。所以一切都应该工作。但是当我查看我的个人资料时，没有发布任何内容。应该写成*“Derp看了xxxxxx上的'memename'”*。

有人有想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:13:25.537

> 但是当我查看我的个人资料时，没有发布任何内容。应该写“Derp 看了 xxxxxx 上的 'memename'”。

不过，我敢打赌，您可以在您的活动日志中看到它？

AFAIK 动作出版物不会立即开始显示在您的提要中 - 它需要更多已发布的动作，直到它们自动显示。

也许您想为您的 OG 操作查看[显式共享？](https://developers.facebook.com/docs/opengraph/explicit_sharing/)

# bash - Jenkins 电子邮件分机预发送脚本

> ID：11967191
> 
> 赞同：6
> 
> 时间：2012-08-15T09:48:35.703
> 
> 标签：bash, jenkins, jenkins-plugins, email-ext

我想在 Email-ext Jenkins 插件的预发送脚本中编辑电子邮件正文。我应该使用什么语言来编写代码？Bash脚本或其他？你能添加一些代码吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T17:54:01.320

您必须使用的语言是 Groovy，您可以在脚本控制台中的 Jenkins > Manage > script 下测试您的一段代码，以了解不依赖于构建特定值的任何内容。

如果没有更改则取消发送电子邮件的示例（使用 Git 时测试）：

```
如果（build.changeSet.emptySet）取消=真；
```

Groovy 是一种在幕后真正使用 Java 的便捷脚本语言，因此您可能必须深入研究 Jenkins Java 类以查看定义的内容/可以使用的对象。例如，当我在 Jenkins 作业上运行它时，示例代码中的构建变量实际上是 java 对象 FreeStyleBuild（这显然是一个自由样式的构建作业）。

# facebook - 在 iPad Facebook 应用程序上 signed_request 为空

> ID：11967192
> 
> 赞同：1
> 
> 时间：2012-08-15T09:48:38.870
> 
> 标签：facebook

我为 Facebook Fanpage 开发了一个应用程序。它工作得很好。当我通过网络浏览器查看我的 Facebook fanpage 应用程序时，我可以在我的 POST 方法中获取 signed_request 参数：

```
@RequestMapping(value = "/facebook/competition**", method = RequestMethod.POST)
public ModelAndView facebookPost(HttpServletRequest request)
throws SAXException,IOException,
ParserConfigurationException {

logger.info("FACEBOOK SIGNED REQUEST POST: " +  
request.getParameter("signed_request")); 
```

但是当我通过 Facebook 应用程序查看我的 IPAD 粉丝页面应用程序时，看起来请求进入了 GET 方法，并且 signed_request 值为空。

```
@RequestMapping(value = "/facebook/competition**", method = RequestMethod.GET)
public ModelAndView facebookGet(HttpServletRequest request)
throws SAXException,IOException,
ParserConfigurationException {

logger.info("FACEBOOK SIGNED REQUEST GET: " +  
request.getParameter("signed_request")); 
```

你知道为什么这不会进入我的 POST 方法吗？

非常感谢，

# c++ - 如何推断迭代器模板类型，或其模板的嵌套类型？

> ID：11967193
> 
> 赞同：1
> 
> 时间：2012-08-15T09:48:46.687
> 
> 标签：c++, templates, c++11

这个问题需要更多的准备，所以我先提供一些代码，然后是确切的问题

假设我声明了以下类型

```
template<typename T>
struct some_type
{
    T t_;
}; 
```

它将用这样的工厂函数构造

```
typedef float numeric_type;
std::vector<std::string> construction_material;
//Push_back of strings in certain form...
std::vector<std::unique_ptr<some_type<numeric_type>> instances;
build_instances(construction_material.begin(), construction_material.end(), back_inserter(instances)); 
```

并且构造函数将*类似于*以下内容

```
template<typename input_iterator, typename output_iterator>
output_iterator build_instances(input_iterator begin, input_iterator end, output_iterator out)
{
    for(input_iterator iter = begin; iter != end; ++iter)
    {
        //This won't work, but to illustrate some ideas...
        //build_instance<std::iterator_traits<output_iterator>::value_type>(*iter)
    }

    //[...]

    return *out;
}

template<typename T>
std::unique_ptr<some_type<T>> build_instance(std::string const& material)
{
    static_assert(std::is_floating_point<T>::value == true, "The template type needs to be a floating point type.");

    std::unique_ptr<some_instance<T>> instance(new some_instance<T>());
    //Some processing...

    return instance;
} 
```

我知道我可以更改函数以返回一些容器（或者甚至模板化容器类型），例如

```
template<typename input_iterator, typename T>
std::vector<std::unique_type<T>> build_instances(input_iterator begin, input_iterator end,       
output_iterator out)
{
    //Likewise code to the previous snippets...
    return ...
} 
```

我无法解决的问题是：

1.  是否有可能 - 或不可能 - 使用类似*back_inserter*的方法？看起来对呼叫者来说是最灵活的？
2.  如何在*build_instances主体中保留**numeric_type*（如通过 output_iterator 获得它），以便它可以用于一个接一个地构建实例？
**   如何确保调用者知道等待包含在 std::unique_ptrs 中的对象？另一种选择就是简单的指针，但我对此并不热情。*

 *有一个类似的问题，标题[如何我怎样才能让这个模板方法更优雅？(or: less explicit template parameters required)](https://stackoverflow.com/questions/10350795/how-can-i-make-this-template-method-more-elegant-or-less-explicit-template-pa)，它接受一个容器并将其转换为不同类型的容器。

**编辑** 正如对 Jogojapan 的评论所评论的那样，目前我像这样转换输入

```
std::transform(construction_material.begin(), construction_material.end(), std::inserter(instances, instances.begin()), build_instance<numeric_type>); 
```

~~但是随后的函数调用也需要提供`numeric_type`typedef，这有点麻烦。我希望避免这种情况。~~看起来我错了，但是出于教育和所有目的，是否有可能进一步减少 typedef 数字类型并从迭代器中推断出来的需要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:51:35.643

一个侵入性的解决方案是让`some_type`暴露它的类型参数，同样的方式`std::unique_ptr<T, D>`暴露它的第一个参数`element_type`（我们稍后需要）：

```
template<typename T>
struct some_type
{
    // give it an appropriate meaningful name
    using value_type = T;
    value_type t_;
};

template<typename input_iterator, typename output_iterator>
output_iterator build_instances(input_iterator begin, input_iterator end, output_iterator out)
{
    using pointer_type = typename std::iterator_traits<output_iterator>::value_type;
    using value_type = typename pointer_type::element_type::value_type;
    return std::transform(begin, end, out, build_instance<value_type>);
} 
```

您还可以非侵入式地提取模板特化的第一个模板参数：

```
template<typename T>
struct first;

template<template<typename...> class Template, typename First, typename... Pack>
struct first<Template<First, Pack...>>> {
    using type = First;
};

template<typename T>
using First = typename first<T>::type; 
```

中的`value_type`别名`build_instances`将改为

```
using value_type = First<typename pointer_type::element_type>; 
```

最后，我觉得`build_instance`接受一个`T`参数但构造`some_type<T>`. 如果它采用并构造了（其中可能仅限于.）的`T`实例，那么这也可以避免您的问题。`T``T``some_type`*

# c# - 在 WPF RichTextBox 中限制格式

> ID：11967195
> 
> 赞同：1
> 
> 时间：2012-08-15T09:48:55.607
> 
> 标签：c#, wpf, richtextbox

我有一个丰富的文本框，我想将其限制为公告、编号、arial 大小 10、下划线、粗体、斜体。

没有其他事情是可能的。当用户将某些内容粘贴到文本框中时，就会出现此问题。然后将背景颜色、图片等粘贴到文本框中。

粘贴仍然需要成为可能。但我们只想保留公告、编号、下划线、粗体和斜体。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:52:11.677

您必须拦截该`Pasted`事件并删除除文本之外的所有内容。根据粘贴数据的格式，您可能需要像[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)这样的解析库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:54:15.903

您可以将事件挂钩`disabling the paste operation in case DataObject is not of type text`。这就是您要查找的内容，在此示例中将 textBox 实例替换为您的 RichTextBox 实例 -[如果未复制文本，则禁用 textBox 上的粘贴操作](https://stackoverflow.com/questions/3061475/paste-event-in-a-wpf-textbox "如果未复制文本，则禁用文本框上的粘贴操作")

# embedded - Arduino：通过内置 USB 进行应用程序通信？

> ID：11967197
> 
> 赞同：5
> 
> 时间：2012-08-15T09:48:59.943
> 
> 标签：embedded, arduino

[Arduino Nano](http://arduino.cc/en/Main/ArduinoBoardNano/)（和其他型号）在 pcb 上有一个 USB 连接器。

Arduino 应用程序（loop() 函数内的代码）可以通过内置 USB 通道与 PC/Mac 通信吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:36:18.840

您发布的链接中的电路板使用 FTDI USB 转 UART 芯片；ATMega168 本身没有 USB 控制器。FTDI 芯片的 UART 端连接到 ATMega168 的 RXD/TXD UART 引脚。因此，从 Arduino 代码的角度来看，您只是在与 UART 驱动的串行端口进行通信。

在 PC 端，FTDI 芯片使用 USBSER.SYS 驱动程序来模拟传统的 UART 串​​行端口（*虚拟 COM 端口*或*VCP*）。您将能够在设备管理器中看到它以及它已分配给哪个 COM 端口。

所以本质上你只需要知道如何在 PC 和 Arduino 上进行串行端口编程，你就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:23:44.973

[我就是这样做的。](https://github.com/H2CO3/libavrutil/blob/master/src/usart.c)您还需要在您的计算机上编写一个程序——对于兼容 POSIX 的操作系统，[这个程序可以帮助您。](https://github.com/H2CO3/serialtool)

# mysql - MySQL从函数查询自定义排序

> ID：11967199
> 
> 赞同：1
> 
> 时间：2012-08-15T09:49:19.300
> 
> 标签：mysql

假设我有一个包含以下字段名称的表

```
'id' 'likes' 'rating' 'view' 
```

一个普通的 MySQL 排序需要一个简单的

```
SELECT * FROM $table ORDER BY likes DESC, rating DESC, view DESC 
```

现在假设我想通过任意函数对表中的给定条目进行排序

```
function custom_sort(likes, rating, view) {
    fame = 0.5 * like + 0.25 * rating - view;
    return fame;
} 
```

我想知道是否可以执行此伪代码之类的操作

```
 SELECT * FROM $table ORDER BY custom_sort(likes, rating, view) DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:53:24.873

何况简单...

```
SELECT * FROM $table ORDER BY ( 0.5 * likes + 0.25 * rating - view ) DESC 
```

# tsql - T-SQL CTE + 经典 asp - 使用哪个 CommandType？

> ID：11967200
> 
> 赞同：0
> 
> 时间：2012-08-15T09:49:22.840
> 
> 标签：tsql, asp-classic, common-table-expression

我有一份 CTE 声明。当我尝试使用经典 asp 执行时，参数未正确替换：

```
Set cmd=Server.CreateObject("ADODB.Command")
cmd.ActiveConnection = objConnection
cmd.CommandText =   " my CTE is here"

cmd.CommandType = adCmdText

'adCmdUnspecified,adCmdText,adCmdTable,adCmdStoredProc,adCmdUnknown,adCmdFile,adCmdTableDirect

Set objParam = cmd.CreateParameter(, adBigInt , adParamInput ,8,CLng(MyParameter))
cmd.Parameters.Append objParam 
```

当我得到最后的陈述时，“？” 不是在声明中替换，它给了我错误。

我尝试了每种命令类型，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:33:51.410

该问题是由“CommandText”字符串中的愚蠢语法错误引起的。

# gridview - Ext gridView 无法刷新

> ID：11967204
> 
> 赞同：0
> 
> 时间：2012-08-15T09:49:29.783
> 
> 标签：gridview, extjs, refresh, gridpanel

当我创建一个`Ext.grid.GridPanel`对象并调用`this.getView().refresh(false)`时，我可以获得 gridPanel.GridView ，但错误是：

```
this.grid is undefined 
```

GridView 没有网格。这是代码：

```
Ext.extend(Erms.user.EventUserPanel, Ext.grid.GridPanel, { loadData : function() {
   this.getStore().reload({ params : { start : 0, limit : 2 } });
   this.getView().refresh(false);
}}); 
```

# html - 从主容器中分离页脚

> ID：11967207
> 
> 赞同：0
> 
> 时间：2012-08-15T09:49:42.153
> 
> 标签：html, css

我的网站的网页布局如下所示：

我的网站的网页布局如下所示：

```
<body>
<div class="container">
   <div class="sidebar">
   </div>
   <div class="content">
   </div>
</div>

<div class="pre-footer">
</div>
<div class="footer">
</div>
</body> 
```

CSS：

```
body  {background:#eaeaea url('../images/bg/sfere.jpg') no-repeat top center fixed;}
.footer {float:left;width:100%;height:67px;background:url('../images/bottom.png') bottom center;bottom:0px;left:0px;}
.container{padding-top:5px;margin-left:100px;margin-right:auto;}
.sidebar {float:left;width:220px;min-height:610px;text-align:center;}
.home {margin:178px 0 0 100px;padding:0 10px 0px 10px;width:800px;float:left;}
.pre-footer {float:left;width:98%;height:100px;position:relative;background:url('../images/pre-footer.png') bottom center;left:15px;bottom:-32px;} 
```

所有元素在布局中都显示得很好。但是，问题是当容器的高度较小时，页脚元素会粘在容器下方并且不会停留在页脚位置。同样，如果我手动将高度固定为 600px 以使其看起来像页脚，则在浏览器调整大小时，页脚仍然粘在容器下方并且看起来不像页脚。

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:52:21.620

为您的页脚使用固定位置。

```
div.footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    max-height: 50px; /* change this as needed */
} 
```

并为你的 body 指定一个底部填充，以确保滚动时所有内容都可见。

```
body {
    padding-bottom: 50px; /* change this to the max-height given for your footer */
} 
```

# android - 在 Android 中为不同（特定）语言使用相同的值文件夹

> ID：11967209
> 
> 赞同：2
> 
> 时间：2012-08-15T09:49:43.230
> 
> 标签：android, android-layout, android-resources

我的默认应用程序语言是英语，因此`strings.xml`位于`res\values`.

我的app应该也支持`Hebrew`，所以我放`Hebrew`了`strings.xml`下`res\values-he`。

我的问题是，在某些设备上，希伯来语被定义为“iw”（而不是“he”）。

有没有办法让我省去另一个`strings.xml`under副本的麻烦`res\values-iw`，但是要处理一个文件夹`he`，`iw`并使用默认值文件夹来处理所有其余的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:10:45.077

这是一个已知问题，已在此处得到解答： [CyanogenMod：翻译项目](https://stackoverflow.com/questions/5074769/cyanogenmod-translate-a-project/8470980#8470980)

因此，如果您想在所有设备上获得全面支持，您必须同时包含这两个版本。就是复制粘贴，哪里有问题？:)

# objective-c - 收到此警告：使用类型为“*”的表达式初始化“*”的不兼容指针类型

> ID：11967210
> 
> 赞同：0
> 
> 时间：2012-08-15T09:49:47.870
> 
> 标签：objective-c, xcode

我收到此警告，但不知道我做错了什么，这是一个简单的代码，可以通过转换更改视图。我以前在 Xcode 3.x 中没有出现此错误，但现在在 4.x 中问题开始了。尽管这只是一个警告并且代码可以完美编译，但我想知道问题出在哪里。

```
-(IBAction)swapViews:(id)sender{
DemoViewController *view3 = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
view3.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:view3 animated:YES];} 
```

感谢您的所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:51:18.220

```
 //DemoViewController*   ThirdViewController*   ????
 //the warning is in this line 
DemoViewController *view3 = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
view3.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:view3 animated:YES]; 
```

我想你想在这里做的是。

```
ThirdViewController *view3 = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:52:01.537

你忘了花括号吗？

```
-(IBAction)swapViews:(id)sender {
    DemoViewController *view3 = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
    view3.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:view3 animated:YES];
} 
```

# python - 在 python 中使用您自己的颜色与 guiqwt 进行绘图

> ID：11967219
> 
> 赞同：1
> 
> 时间：2012-08-15T09:50:19.463
> 
> 标签：python, plot

是否可以在 python 的 guiqwt 模块中使用您自己的颜色（可能由十六进制代码指定）？我的意思是这样的：

```
my_colour = '#EE686B'

figure('my figure')
plot(x, y, '-', color = my_colour)
show() 
```

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:57:39.710

Sure, I don't see the problem in your code. I don't know the guiqwt module but try using Matplotlib: [http://matplotlib.sourceforge.net/api/colors_api.html](http://matplotlib.sourceforge.net/api/colors_api.html)

You can also try this color table:

```
 from PyQt4 import QtCore, QtGui

  red   = QtGui.QColor(200, 0, 0)
  green = QtGui.QColor(0, 200, 0)
  blue  = QtGui.QColor(0, 0, 200)
  black = QtGui.QColor(0, 0, 0)
  white = QtGui.QColor(255, 255, 255, 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T15:34:09.147

试试这个例子：

```
import matplotlib.pyplot as plt
import numpy as np
x = np.linspace(-10, 10)
plt.plot(x, x**2, 'r+')
plt.show() 
```

# c - gcc 为 qsort 生成警告

> ID：11967222
> 
> 赞同：2
> 
> 时间：2012-08-15T09:50:28.323
> 
> 标签：c, gcc, qsort

我们在 spatialite 中有一些代码，如下所示：

```
static int cmp_pt_coords (const void *p1, const void *p2)
{
    ....
}

static gaiaGeomCollPtr auxPolygNodes (gaiaGeomCollPtr geom)
{
    ....
/* sorting points by coords */
    qsort (sorted, count, sizeof (gaiaPointPtr), cmp_pt_coords);
    ....
} 
```

这显然是简化的——真正的代码可以在 [https://www.gaia-gis.it/fossil/libspatialite/artifact/fe1d6e12c2f98dff23f9df9372afc23f745b50df看到](https://www.gaia-gis.it/fossil/libspatialite/artifact/fe1d6e12c2f98dff23f9df9372afc23f745b50df)

我从 gcc (gcc version 4.6.1 (Ubuntu/Linaro 4.6.1-9ubuntu3)) 得到的错误是

```
/bin/bash ../../libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I../.. -g  -Wall -Werror -fprofile-arcs -ftest-coverage -g -I../../src/headers   -fvisibility=hidden -g -Wall -Werror -fprofile-arcs -ftest-coverage -g -MT libsplite_la-spatialite.lo -MD -MP -MF .deps/libsplite_la-spatialite.Tpo -c -o libsplite_la-spatialite.lo `test -f 'spatialite.c' || echo './'`spatialite.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I../.. -g -Wall -Werror -fprofile-arcs -ftest-coverage -g -I../../src/headers -fvisibility=hidden -g -Wall -Werror -fprofile-arcs -ftest-coverage -g -MT libsplite_la-spatialite.lo -MD -MP -MF .deps/libsplite_la-spatialite.Tpo -c spatialite.c  -fPIC -DPIC -o .libs/libsplite_la-spatialite.o
spatialite.c: In function 'auxPolygNodes':
spatialite.c:17843:5: error: passing argument 4 of 'qsort' from incompatible pointer type [-Werror]
/usr/include/stdlib.h:761:13: note: expected '__compar_fn_t' but argument is of type 'int (*)(void *, void *)'
cc1: all warnings being treated as errors 
```

我看过一些以前的帖子：

*   [这个 C qsort 函数调用中的参数是什么？](https://stackoverflow.com/questions/2228695/what-are-the-parameters-in-this-c-qsort-function-call)
*   [在 C 中使用 qsort 时的警告](https://stackoverflow.com/questions/2561697/warning-when-using-qsort-in-c)

但是它们看起来并不相同（或者至少，我在这些帖子中阅读建议的方式是我认为我们已经在这里所做的）。

我可以绕过这个，使用：

```
 qsort (sorted, count, sizeof (gaiaPointPtr), (__compar_fn_t)cmp_pt_coords); 
```

但是我不明白为什么有必要这样做，而且我担心对其他系统的可移植性。似乎编译器从参数中省略了 const-s。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T09:53:31.957

那个演员完全没问题。GCC 不够聪明，无法知道 __compar_fn_t 是

```
int (*)(const void *, const void *) 
```

所以它发出警告。

然而， __compar_fn_t 是不可移植的——所以如果你不想用它来进行转换，你可能应该让 GCC 不使用适当的编译器标志对此发出警告。

或者你可以看看是否`__compar_fn_t`定义，如果没有，你自己定义：

```
#ifndef __GNUC__
typedef int (*__compar_fn_t)(const void *, const void *);
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:17:38.973

该错误可能来自您传递给编译器的可见性标志。您是说该编译单元中的所有功能都应该隐藏。对于 gcc，这会更改函数 API，因此您的比较函数与`qsort`.

你可能想处理

```
#pragma visibility 
```

或者

```
__attribute__((__visibility(default))) 
```

或类似的比较功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-18T08:21:09.343

警告/错误的原因是**__compar_fn_t**的 GCC 原型是：

typedef int (*__compar_fn_t)( **__const** void *, **__const** void *);
而不是：
typedef int (* __compar_fn_t)( **const** void *, **const** void *);

因此，为了解决问题，只需将您的函数定义为：
static int cmp_pt_coords (__const void *p1, __const void *p2)

# jquery - 切换菜单选择的问题

> ID：11967225
> 
> 赞同：0
> 
> 时间：2012-08-15T09:50:39.130
> 
> 标签：jquery, html

我有一个菜单，在该菜单中，当我们单击它的主 div 时，它的颜色会发生变化，当我们再次单击时，它仍然保持相同的颜色。

现在我需要什么，在这个切换菜单中，当我们单击它时，它会改变颜色，但是当我们再次单击时，它看起来就像其他父 div。

这是我的[小提琴](http://jsfiddle.net/wasimkazi/CGsJH/1/)。请检查一下。

这是我的脚本。

```
$(document).ready(function() {

$(".widget2").hide();
$(".inner").hide();

function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
}

function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays === null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
}

$(".box2").hover(

function() {
    $(this).addClass("hover");
}, function() {
    $(this).removeClass("hover");
});

var widget2 = $(".widget2");
var box2 = $(".box2");
if (getCookie('box2id') || getCookie('box1text')) {
    var text = getCookie('box1text');
    var id = getCookie('box2id');
    $('#' + id).addClass("active");
    $('#' + id).next().slideDown(600, function() {
        $('.box:contains(' + text + ')').next('.inner').slideDown(500);
    });
} else {
    $(".widget2").hide();
    $(".inner").hide();
}

box2.click(

function() {
    $(this).next(widget2).slideToggle(200);
    $(".widget2").not($(this).next(widget2)).stop(true, false).slideUp();       //Hide others divs   
    var box2ID = $(this).attr('id');
    $(".box2").removeClass("active");
    $(this).removeClass("hover").addClass("active");
    setCookie('box2id', box2ID);
});

$(".box").click(function() {
    $(this).next(".inner").slideToggle(200);
    var box1TX = $(this).text();
    setCookie('box1text', box1TX);
});

});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:10:50.063

这个问题就解决了。

这个例子在**[这里](http://jsfiddle.net/wasimkazi/CGsJH/2/)**工作得很好。请检查我的链接。

# sql - 将数据从 SQL 导入 Orchard CMS

> ID：11967238
> 
> 赞同：1
> 
> 时间：2012-08-15T09:51:21.850
> 
> 标签：sql, import, orchardcms

我有一个基于 Orchard CMS 和我自己的 ContentType 的网站。如果我在 Web 界面中创建我的 ContentType 的新对象，我可以在 SQL 数据库中看到它。但是，如果我在我的 ContentType 表中创建新行（在 SQL Management Studio 中），我无法在 Web 界面中看到新对象。有没有办法将数据从 SQL 导入 Orchard？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:41:23.597

如果您将数据放在正确的位置，它应该可以工作，但它涉及的表格不止一张。很容易搞砸。导入/导出功能可能是一种更可靠的方法。如果先将数据从 SQL 移植到 xml，然后再导入。这可能就是要走的路。您可以先导出测试记录，看看架构是什么样子。

# javascript - 如何从成功回调中提取ajax响应数据

> ID：11967240
> 
> 赞同：1
> 
> 时间：2012-08-15T09:51:29.233
> 
> 标签：javascript, ajax, jquery

抱歉，如果这是重复的，但我在以前的帖子中找不到任何令人满意的答案。

```
$(function() {
    $.ajax({
        url: 'ajax/test.html',
        success: function(data) {
            // Data received here
        }
    });
}); 
```

[或者]

```
someFunction() {
    return $.ajax({
        // Call and receive data
    });
}

var myVariable;

someFunction().done(function(data) {
    myVariable = data;
    // Do stuff with myVariable
}); 
```

上面的代码工作得很好。但是，这个 ajax 请求是在页面加载时发出的，我想稍后处理这些数据。我知道我可以在回调中包含处理逻辑，但我不想这样做。由于调用的异步性质，将响应分配给全局变量也不起作用。

在上述两种方式中，“数据”都仅限于成功回调或完成回调，如果可能的话，我想在这些之外访问它。以前可以使用 jQuery 'async:false' 标志，但在 jQuery 1.8 中已弃用。

任何建议表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:16:46.710

您可以将回调“外包”给普通函数，因此您可以将它放在您喜欢的某个地方：

```
$(function() {
    $.ajax({
        url: 'ajax/test.html',
        success: yourOwnCallback
    });
}); 
```

还有一些你可以定义你的回调

```
function yourOwnCallback(data) {
  // Data received and processed here
} 
```

这甚至可以通过对象方法实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:20:30.020

这个解决方案可能不是主意，但我希望它有所帮助。

*   在回调时设置变量。
*   无论您需要在哪里处理数据，请检查是否设置了变量，如果没有以某种方式等待。

尝试：

```
$(document).ready(function(){
    var myVar = false;
    $.ajax({
        url: 'ajax/test.html',
        success: function(data) {
            myVar=data;
        }
    });

    someFunction(){ //this is invoked when you need processing
        while(myVar==false){}
        ... do some other stuff ..
    }
}); 
```

或者

```
someFunction(){
    if(myVar==false){
        setTimeout(someFunction(),100); //try again in 100ms
        return;
    }
.. do some other stuff ..
} 
```

# java - 无线电组崩溃应用程序

> ID：11967241
> 
> 赞同：0
> 
> 时间：2012-08-15T09:51:35.203
> 
> 标签：java, android

我在下面遇到困难。我相信代码是正确的，但是当我进行此活动时，它会导致应用程序崩溃吗？

任何人都可以帮助我并指出我所缺少的吗？

```
import java.text.DecimalFormat;
import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;

public  class CanopySizer extends Activity implements RadioGroup.OnCheckedChangeListener{

EditText CanopyLength, CanopyWidth;
TextView Volume;
RadioButton Light, Medium, Heavy;
RadioGroup Loadings;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.canopysizer);

    CanopyLength=(EditText)findViewById(R.id.CanopyL);
    CanopyWidth=(EditText)findViewById(R.id.CanopyW);
    Volume=(TextView)findViewById(R.id.Volume);
    Light=(RadioButton)findViewById(R.id.Light);
    Medium=(RadioButton)findViewById(R.id.Medium);
    Heavy=(RadioButton)findViewById(R.id.Heavy);
    Loadings=(RadioGroup)findViewById(R.id.Loading);
    Loadings.setOnCheckedChangeListener(this);

}

public void onCheckedChanged(RadioGroup Loadings, int aplication) {

    if (aplication==Light.getId()){
        double Canopylength = Double.parseDouble(CanopyLength.getText().toString());
        double Canopywidth = Double.parseDouble(CanopyWidth.getText().toString());
        double CanopyArea = Canopylength * Canopywidth;
        double ExtractionRate = CanopyArea * 0.25;
        DecimalFormat df = new DecimalFormat();
        Volume.setText(df.format(ExtractionRate));
    }
    if (aplication==Medium.getId()){
        double Canopylength = Double.parseDouble(CanopyLength.getText().toString());
        double Canopywidth = Double.parseDouble(CanopyWidth.getText().toString());
        double CanopyArea = Canopylength * Canopywidth;
        double ExtractionRate = CanopyArea * 0.35;
        DecimalFormat df = new DecimalFormat();
        Volume.setText(df.format(ExtractionRate));
            }       
    if (aplication==Heavy.getId()){
        double Canopylength = Double.parseDouble(CanopyLength.getText().toString());
        double Canopywidth = Double.parseDouble(CanopyWidth.getText().toString());
        double CanopyArea = Canopylength * Canopywidth;
        double ExtractionRate = CanopyArea * 0.50;
        DecimalFormat df = new DecimalFormat();
        Volume.setText(df.format(ExtractionRate));

    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:21:22.530

事实证明，只需用替换线`if (aplication==Light.getId()){` 就`if (aplication==R.id.Light){`可以了。应用程序不再崩溃。

干杯。

# ios - iOS 的分配工具：比较两个快照的内存

> ID：11967243
> 
> 赞同：2
> 
> 时间：2012-08-15T09:51:40.040
> 
> 标签：ios, memory-management, xcode-instruments

在我的情况下，我不断地进入一个场景，而不是退出等等......所以`Live bytes`重新进入场景时数量必须相同，但每次进入时它都会增长 3Mb。

我想找到前一幕留下的记忆。内存泄漏仪器显示没有泄漏。如何比较两个内存“快照”以突出分配差异？

上一个场景快照： ![在此处输入图像描述](../Images/fefc0faf22cca0deb9f64c8c523d4074.png)

重新进入后： ![在此处输入图像描述](../Images/66d8c5482bd12620133ee88149192fd6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:54:46.810

使用 Heapshot Analysis 进行处理

这是 bbum 的一篇很棒的博客文章：[什么时候泄漏不是泄漏？使用 Heapshot 分析发现不希望的内存增长](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)

# git - Git-tfs - 将遥控器重置为特定的 sha

> ID：11967245
> 
> 赞同：0
> 
> 时间：2012-08-15T09:51:56.973
> 
> 标签：git, git-tfs

我正在使用 git-tfs。

如何将遥控器重置为特定的 sha？

我基本上想撤消对遥控器所做的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:41:58.930

以下 git 命令使您能够恢复远程更改...

```
//reset your local index to the desired sha 
git reset --hard sha

//move the branch pointer back to the HEAD immediately preceding the HEAD at the desired SHA 
//The 'soft' means that the changes made between the HEAD-1 and HEAD at the desired SHA  are left in place and are visible as 'new' changes 
git reset --soft HEAD@{1}

git commit -m "Revert to sha"

git-tfs checkintool (or whatever syntax you use for pushing to the remote) 
```

# ruby - ruby 快捷方式？

> ID：11967246
> 
> 赞同：1
> 
> 时间：2012-08-15T09:51:57.690
> 
> 标签：ruby

我有这个，它将附加另外 3 或 4 个变量：

```
name, theme = row[0], row[1] 
```

右边的代码有快捷方式吗？我试过：

```
name, theme = row 
```

但是随后 name 返回了整行，在这种情况下似乎不起作用。

我正在使用 CSV.foreach，当我添加 {headers: true} 时，上述内容不起作用：

```
CSV.foreach('file.csv', {headers: true}) do |row|
  name, theme = row

  name # returns entire row in string
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:55:45.497

`name, theme = row`没关系。

```
irb(main):001:0> row = [1,2,3]
=> [1, 2, 3]
irb(main):002:0> first,second = row
=> [1, 2, 3]
irb(main):003:0> first
=> 1
irb(main):004:0> second
=> 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T10:01:57.827

以防万一您的行不是数组，请尝试调用

```
name, theme = Array row 
```

或者

```
name, theme = row.to_a 
```

如果它没有 to_a 方法，你必须定义它。

# batch-file - 使用我的用户权限从批处理文件启动进程

> ID：11967247
> 
> 赞同：0
> 
> 时间：2012-08-15T09:51:58.930
> 
> 标签：batch-file, cmd, uac

我在 Windows 中编写了一些批处理文件来集中对其他批处理文件的一些调用，以便我可以轻松启动一些进程，但是当从我的中央文件运行时，进程无法正常运行；他们需要网络访问，这似乎被拒绝了，我得到了很多连接被拒绝的异常。这可能是一个权限问题，但我不确定如何解决它。我尝试通过单击并选择“以管理员身份运行”来运行我的脚本，但这不能正常工作（我的第一个“cd ...”由于某种原因没有更改目录，然后调用失败）是否有我可以暗示我对其他进程的权限吗？我的脚本基本上是这样的：

```
cd "F:\Applications\Process1"
START "Process 1" runProcess1.cmd
cd "C:\Applications\Process2"
START "Process 2" runProcess2.cmd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:09:37.300

`runas`带有选项的命令`/savecred`应在第一次运行时要求输入密码。

也许这可以帮助[http://www.bellamyjc.org/en/superexec.html](http://www.bellamyjc.org/en/superexec.html)，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:18:39.557

事实证明，如果您尝试使用 'cd "F:\Applications\Process1"' 驱动器 F 将切换到所选文件夹，但您不会切换到驱动器 F。即您仍将位于 C:\user\用户名（或任何默认值），然后键入“F:”，您将位于“F:\Applications\Process1”。这意味着我从同一个地方运行同一个进程的两个实例，而实际上我想在不同的位置运行同一个进程的两个实例，所以看起来 ti 正确启动然后未能获得网络权限，但是实际上与自己相冲突。为了解决这个问题，我改变了我的脚本：

```
F:
cd "F:\Applications\Process1"
START "Process 1" runProcess1.cmd
C:
cd "C:\Applications\Process2"
START "Process 2" runProcess2.cmd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-01T20:17:34.153

意为对 2012 年 8 月 24 日 14:18 user1111284 回答的评论，但在获得 50 声望之前我无法发表评论。

使用“cd/？” 获取 cd 命令用法的简短摘要。

使用“cd/d”更改当前驱动器和路径。

像这样更改您的脚本：

cd/d "F:\Applications\Process1" START "Process 1" runProcess1.cmd cd/d "C:\Applications\Process2" START "Process 2" runProcess2.cmd

我将此发布给其他求职者。/d 选项应该更广为人知。

# javascript - 将 jQuery 与 OOP JS 一起使用是否有效/高效，如果是，我如何跨类函数创建状态变化的菜单？

> ID：11967251
> 
> 赞同：1
> 
> 时间：2012-08-15T09:52:13.133
> 
> 标签：javascript, jquery, oop

我正在尝试用`widget`面向对象的 JavaScript 编写 JavaScript，或者至少是我理解的 JS 几乎等效的类。

我想要实现的只是一个改变状态的菜单。在伪;

*   加载小部件后，`#nav`使用包含*year group*`<ul>`的菜单填充。 *`<li>`*
**   单击一年组后，将其`<li>`清空并用该年的*导师组*重新填充它，并附加一个链接。`#nav ul``<li>` *`<li>``return`***   单击`return`链接后，清空并使用原始*年份组*`#nav`菜单重新填充它，同时能够利用上述所有功能。 *`<ul>`***

 *****从历史上看**，即迄今为止，我使用“嵌入式”函数来尝试将所有内容保持在同一个 DOM 层/时序内。我真的不明白其中任何一个是如何工作的，或者这是否是一件合适的事情，但代码本身似乎工作。

这是我以前完成的方式的一个示例：

```
var GroupsDisplayHTML = '<h2>Tutor Groups</h2>' +
    '<ul><li><a class="year" href="javascript:void(0);" title="Year 9" id="9">Year 9</a></li>' +
    '<li><a class="year" href="javascript:void(0);" title="Year 10" id="10">Year 10</a></li>' +
    '<li><a class="year" href="javascript:void(0);" title="Year 11" id="11">Year 11</a></li>' +
    '<li><a class="year" href="javascript:void(0);" title="Year 12" id="12">Year 12</a></li>' +
    '<li><a class="year" href="javascript:void(0);" title="Year 13" id="13">Year 13</a></li></ul>';

$("div#groups").html(GroupsDisplayHTML);

$('a.year').click( function() {
    var Groups;
    var Groups_Sorted = [];

    Frog.API.get('groups.getAll',
    {
        'onSuccess': function (data) { Groups = data; },
        'onError': function(err) { alert(err); }
    });

    for (var i = 0; i < Groups.length; i++) {
        var Year = $(this).attr("id");

        if (Groups[i].name.indexOf(Year) == 0 && Groups[i].name.indexOf('/Tp') != -1) {
            var arrayToPush = { 'id': Groups[i].id, 'name': Groups[i].name };
            Groups_Sorted.push(arrayToPush);
        }
    }

    GroupsDisplayHTML = '<h2>Year ' + Year + '</h2><ul>';

    for(var i = 0; i < Groups_Sorted.length; i++){
        GroupsDisplayHTML += '<li><a class="group" href="javascript:void(0);" title="' + Groups_Sorted[i].id + '" id="' + Groups_Sorted[i].id + '">' + 
            Groups_Sorted[i].name + ' <span style="font-size:10px;color:#bbb;">(' + Groups_Sorted[i].name + ')</span></a></li>';
    }

    GroupsDisplayHTML += '<li><a class="return" href="javascript:void(0);">&lt;- Back to Year Groups</a></li></ul>';

    $("div#groups").html(GroupsDisplayHTML);

    $('a.group').click( function() {
        var Group_ID = $(this).attr("id");
        AssignPoints.getUsers(Group_ID);
    });

    $('a.return').click( function() {
        AssignPoints.displayGroups(data);
    });
}); 
```

* * *

但是，现在，我想知道是否更好的方法是使用 jQuery 的**`on`**函数。这是我目前正在编写的代码（*只是为了尝试实现更改状态菜单）：

```
var TutorGroupPoints = {
    URL: 'http://staff.curriculum.local/frog/rewards.php',
    currentUser: UWA.Environment.user.id,
    groupsObject: { },
    sortedArray: [ ],
    navHTML: '<h2>Tutor Groups</h2>' +
        '<ul>' +
            '<li><a class="year" title="Year 9" id="9">Year 9</a></li>' +
            '<li><a class="year" title="Year 10" id="10">Year 10</a></li>' +
            '<li><a class="year" title="Year 11" id="11">Year 11</a></li>' +
            '<li><a class="year" title="Year 12" id="12">Year 12</a></li>' +
            '<li><a class="year" title="Year 13" id="13">Year 13</a></li>' +
        '</ul>',

    init: function() {
        /* caching outer this -> AJAX scope problems */
        var that = this;

        /* retrieve all of the user groups from Frog VLE and store them in an object-level variable */
        Frog.API.get('groups.getAll',
        {
            'onSuccess': function (data) { that.groupsObject = data; },
            'onError': function(err) { alert(err); }
        });

        /* populate the div#nav with our year group UL */
        $('#nav').append(this.navHTML);

        /* using "on" because the LIs have been created in the DOM? */
        $('#nav ul').on("click", "li a", function(e) {
            e.preventDefault();
            that.yearClick( $(this).attr("id") );
        });
    },

    yearClick: function(year) {
        /* run through groupsObject and pull out any tutor groups found in the year we've clicked on
           then put those into our sortedArray */
        for (var i = 0; i < this.groupsObject.length; i++) {
            if (this.groupsObject[i].name.indexOf(year) == 0 && this.groupsObject[i].name.indexOf('/Tp') != -1) {
                /* all we need is name and id */
                var arrayToPush = { 'id': this.groupsObject[i].id, 'name': this.groupsObject[i].name };
                this.sortedArray.push(arrayToPush);
            }
        }

        /* clear the existing UL from div#nav */
        $('#nav ul').empty();

        /* populate div#nav's UL with LIs of our tutor groups (label being name, attr="id" being id) and
           clickable links for each */
        for (var i = 0; i < this.sortedArray.length; i++) {
            $('#nav ul').append('<li><a class="tutor" id="' + this.sortedArray[i].id + '">' + this.sortedArray[i].name + '</a></li>');
        }

        /* add a "return" link to view other years' tutor groups */
        $('#nav ul').append('<li><a id="return">&lt;- Return</a></li>');

        /* upon clicking the return link, empty #nav ul then re-append our navHTML from earlier */
        $('#nav ul').on("click", "a#return", function(e) {
            e.preventDefault();
            $('#nav ul').empty();
            $('#nav').append(this.navHTML);
        });

        /* upon clicking any of our tutor group LIs, display that link's id so that we can use it in
           another function to actually display some content */
        $('#nav ul').on("click", "a.tutor", function(e) {
            e.preventDefault();
            alert( $(this).attr("id") );
        });
    }

};

widget.onLoad = function(){
    /* run our "class" */
    TutorGroupPoints.init();
} 
```

和 HTML：

```
<div id="wrapper">
    <div id="nav">

    </div>
    <div id="content">

    </div>
</div> 
```

我在[这里创建了一个 jsFiddle](http://jsfiddle.net/byzgv/1/)，这是对代码的轻微操作（即我已经删除了无法访问的 Frog API 调用并用固定对象替换它们）。希望这能充分发挥作用。

**这里的问题是，一旦我点击返回按钮，什么都没有发生**。此外，我怀疑修复返回按钮会为我提供一些链接，当点击这些链接时，它们什么也不做。

**理想情况下**，根据代码的底部，当用户单击特定的导师组时，我想*在我的 TutorGroupPoints 类中运行另一个函数。*这将如何影响我的返回按钮等？他们会因为没有从“当前”功能运行而停止工作吗？

不仅仅是“只是”对我的代码问题的回答，我更想要一些*方向*，即我最近编写的代码是否比旧代码更好？我应该使用`on`还是应该使用嵌入式 jQuery 函数和通信类函数？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:27:01.177

简短回答：http: [//jsfiddle.net/byzgv/4/](http://jsfiddle.net/byzgv/4/)

我不确定 OOP 方面，但这似乎是您的情况：

1.  加载页面时，将列表插入到 div 中。
2.  您将一些事件处理程序添加到此列表中
3.  您单击一个列表项，您的事件处理程序运行，并更改列表项。
4.  单击“返回”列表项“什么都不做”。

在您的小提琴中，单击“返回”列表项*确实会*执行某些操作，它会清空此列表。这部分是你要求它做的：

```
$('#nav').on("click", "ul a#return", function(e) {
    e.preventDefault();
    $('#nav ul').empty();
    $('#nav').append(this.navHTML);
}); 
```

所以这个事件处理程序已经触发，前两条指令已经生效。调用`append`不起作用，因为您处于不同的上下文中 -`this`不引用 TutorGroupPoints 对象。因此，您可以通过明确引用您的对象来解决此问题：

```
$('#nav').on("click", "ul a#return", function(e) {
    e.preventDefault();
    $('#nav ul').empty();
    $('#nav').append(TutorGroupPoints.navHTML);
}); 
```

（顺便说一句，您正在附加一个全新的列表，所以您需要这样做`$('#nav').empty();`而不是`$('#nav ul').empty();`）

然后，如您所料，单击“返回”项会为您提供一个不响应单击事件的新列表。这是因为您调用该`on`函数的方式。在设置事件处理程序时，您调用的 jQuery 对象`on`必须存在。在您的`init`函数中，当您设置事件处理程序时，该列表确实存在，因为您将其附加到`div`调用之前`on`。但后来，你丢弃了这个列表并替换它。

要让您的事件处理程序处理所有列表而不仅仅是第一个列表，您需要将事件处理程序附加到从一开始就存在且不会更改的元素，即`#nav`div。所以

```
$('#nav ul').on("click", "li a", function(e) { 
```

可以变成

```
$('#nav').on("click", "ul li a", function(e) { 
```***

# java - 如何使用 like 和 % 进行 Hibernate 查询？

> ID：11967255
> 
> 赞同：8
> 
> 时间：2012-08-15T09:52:23.397
> 
> 标签：java, sql, hibernate

我有一个这样的 Hibernate SQL 查询：

```
public void funcA(String str) {
  StringBuilder sql = new StringBuilder();
  sql.append("select fieldA from tableA where fieldB like '%:searchKey%'");

  ...

  session.createSQLQuery(sql.toString())
  .addScalar("fieldA", StandardBasicTypes.STRING)
  .setParameter("searchKey", str);

  ...
} 
```

当我进行这样的查询时`query.list()`，出现以下错误：

```
[WARNING ] SQL Error: -7, SQLState: 42601[ERROR   ] The character "%" following "fieldB like" is not valid.
[ERROR   ] An error occurred during implicit system action type "2".  Information returned for the error includes SQLCODE "-7", SQLSTATE "42601" and message tokens "%|fieldB like". 
```

我可以知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T10:03:43.080

这应该工作：

```
 public void funcA(String str) {
  StringBuilder sql = new StringBuilder();
  sql.append("select fieldA from tableA where fieldB like :searchKey");

  ...

  session.createSQLQuery(sql.toString())
  .addScalar("fieldA", StandardBasicTypes.STRING)
  .setParameter("searchKey", "%" + str + "%");

  ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-06T07:51:06.327

在同一个示例中，我使用[了 MatchMode](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/criterion/MatchMode.html#END)（休眠类，用于处理类似谓词的限制）。

```
 public void funcA(String str) {
  StringBuilder sql = new StringBuilder();
  sql.append("select fieldA from tableA where fieldB like :searchKey");

  ...
  session.createSQLQuery(sql.toString())
  .addScalar("fieldA", StandardBasicTypes.STRING)
  .setParameter("searchKey", MatchMode.ANYWHERE.toMatchString(str));

  ...
} 
```

> MatchMode.ANYWHERE.toMatchString(str) ：toMatchString 方法将值字符串转换为从中调用它的枚举。

选项：

*   任何地方：'%' + 值 + '%'
*   结束：“%”+ 值
*   开始：值 + '%'
*   精确：值

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T09:59:57.640

对我们来说，这有效...

```
 whereCluase += " and lower(" + firstAttribute + ") like ?";
    queryParams.add("%" + value.toLowerCase() + "%"); 
```

很抱歉发布了一个小片段。但这应该足以让你摆脱困境。

**编辑**：来自评论，`lower`并`toLowerCase()`在这里实现区分大小写。

# c# - 从控制台应用程序创建 Windows 服务

> ID：11967257
> 
> 赞同：2
> 
> 时间：2012-08-15T09:52:29.743
> 
> 标签：c#, windows-services, console-application

是否可以从控制台应用程序创建 Windows 服务。事实上，我制作了一个控制台应用程序，可以从数据库向人员发送电子邮件，但是当我尝试使用几乎相同的代码创建服务时，它不起作用。安装后不再发送电子邮件。因此，如果有办法，我想将我的控制台应用程序转换为服务，因为我想自动发送它们并且我不想使用任务调度程序。

这是我的控制台应用程序主

```
 {
        MailMessage mail = new MailMessage();
        mail.From = new MailAddress(ConfigurationManager.AppSettings["email"]);
        mail.Subject = "Rappel délai tâche";
        SmtpClient client = new SmtpClient(ConfigurationManager.AppSettings["domaine"]);
        client.EnableSsl = true;

        client.Credentials = new NetworkCredential(ConfigurationManager.AppSettings["email"], ConfigurationManager.AppSettings["password"]); 

        BDGestionEntities bd = new BDGestionEntities();
        TimeSpan diff;
        DateTime aujourdhui = DateTime.Today;
        List <tache> taches = bd.taches.ToList();

        foreach (var k in taches)
        {
            Console.WriteLine(k.nom_tache);
            diff = k.date_fin.Subtract(aujourdhui);
            int datediff = Convert.ToInt32(diff.TotalDays);
            if (datediff <= 2)
            {

                mail.To.Add(k.utilisateur.email);

                mail.Body = "Bonjour, " + k.utilisateur.nom + " " + k.utilisateur.prenom +
                    "\n\nNous vous envoyons le présent mail pour vous rappeler que la tâche \"" + k.nom_tache + "\" qui vous est accordée touchera à sa fin d'ici deux jours.\nVeuillez respecter le délai. \n\n Bien cordialement.";
                try
                {
                    client.Send(mail);
                    Console.WriteLine("Email envoyé");
                }
                catch (Exception ex)
                {
                    Console.Write(ex.Message);
                }
            }
        }
    } 
```

事实上，我正在使用带有 ado .net 的模型来访问我的数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:32:39.523

我不会尝试直接转换它，而是先尝试编写一个非常简单的服务来感受它的工作原理。也许是一些简单的事情，比如每 5 分钟将日期和时间写入一个文件。然后，您可以尝试将您的代码添加到服务主体。

显然你会想要避免任何写入屏幕的东西。这应该写入日志或事件查看器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:32:42.087

基本代码将起作用，您只需将其移至服务部分 - 但是它可能会在控制台写入行崩溃，因为默认情况下服务无权访问屏幕，并且没有分配控制台。

如果您使用 Visual Studio，它将为您提供服务模板。但是，你可以做几乎相同的工作——我实际上改变了我的服务，所以我可以从命令行运行它，如果它有参数 /console 它分配了一个控制台，所以它可以使用它，我可以调试它等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T15:52:35.977

我找到了解决方案。事实上，这只是一个连接问题，我所要做的就是为服务添加权限，以便让它访问数据库。谢谢大家。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T09:56:27.547

Windows 服务比控制台应用程序更多。如果您有源，您可以将其转换为一个，或者您可以使用现有的服务包装器。如果您想转换您的应用程序，您可能需要从以下其中一项开始

*   [http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)
*   [http://www.c-sharpcorner.com/uploadfile/mahesh/window_service11262005045007am/window_service.aspx](http://www.c-sharpcorner.com/uploadfile/mahesh/window_service11262005045007am/window_service.aspx)

如果您想使用服务包装器，[这](http://kenai.com/projects/winsw/)可能会很有趣，或者其他类似的产品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T12:14:29.393

Windows 2003 Server Resource Kit 提供了两个实用程序，允许您为 Windows 应用程序创建 Windows 用户定义的服务。

Instrsrv.exe 安装和删除系统服务，Srvany.exe 允许任何 Windows 应用程序作为服务运行。

[这篇](http://support.microsoft.com/kb/137890)Microsoft 支持文章展示了如何操作。

# java - 使用 jSoup 查找具有某些特定文本的节点

> ID：11967258
> 
> 赞同：5
> 
> 时间：2012-08-15T09:52:34.870
> 
> 标签：java, xpath, jsoup

如何使用 jSoup 在节点中找到这段 HTML 片段：

```
<span style="font-weight: bold">Party Date:</span> 14.08.2012<br> 
```

我想从 HTML 片段中提取日期。问题是这个 HTML 片段可以出现在元素中的任何地方，所以我需要使用包含的文本来匹配它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T20:45:51.457

如果您仍在寻找 jsoup 选择器查询.. 这对我有用..

```
 String html = "<span style=\"font-weight: bold\">Party Date:</span> 14.08.2012<br>";

    System.out.println("Date " + Jsoup.parse(html).select("span:matchesOwn(Party Date:)").first().nextSibling().toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:55:37.750

由于您已将问题标记为“xpath”，因此我假设您将接受 XPATH 解决方案。在没有相反信息的情况下，我会做出一些合理的假设。如果您想更正或完善这些假设，请告诉我们。

## 假设

1.  正是文档中的一个 span 元素，其文本值为 'Party Date:' 。
2.  “零件日期：”文本与原样完全相同。永远不要使用前导或尾随空格或大小写变化。
3.  所述跨度之后的文本节点包含目标值。
4.  所述 span 元素可以出现在文档中的任何位置。
5.  样式属性对问题无关紧要。

## XPath 表达式

以下 XPATH 表达式...

```
//span[.='Party Date:'][1]/following-sibling::text() 
```

...返回...

```
' 14.08.2012' 
```

注意：这适用于 XPATH 1.0 和 XPATH 2.0

# html - 绝对定位元素的不透明度

> ID：11967262
> 
> 赞同：0
> 
> 时间：2012-08-15T09:52:54.383
> 
> 标签：html, css

我试图制作一个弹出框，导致周围区域变灰。我的问题是阴影 div 的不透明度似乎超过了弹出窗口的不透明度。我尝试将一个从绝对位置更改为固定位置并增加弹出窗口的 z 索引，但都没有奏效。

[这](https://dl.dropbox.com/u/88682337/cssIssue.bmp)是问题的屏幕截图。

以下是相关代码（询问您是否需要查看更多内容）

```
.textPopup
{
    width: 1400px;
    height: 600px;
    background-color: White;
    position: fixed;
    margin-left: auto;
    margin-right: auto;
    z-index: 15;
    left: 0;
    right: 0;
    top: 50px;
    bottom: 0;
    opacity: 0.2;
}
#innerPopup
{
    background-color: White;
    width: 1350px;
    height: 550px;
    position: absolute;
    margin-left: auto;
    margin-right: auto;
    z-index: 15;
    left: 0;
    right: 0;
    top: 50px;
    bottom: 0;
    opacity: 1;
}

... snip
    <div id="popupShadow">
    </div>
    <div class="textPopup">
        <div id="innerPopup">
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:06:59.440

你的问题`#innerPopup`是在里面`#textPopup`。然后不透明度由孩子继承，并且不能被它自己的属性覆盖。

如果无法将它们分开，则考虑使用`rgba`背景值而不是`opacity`属性值：

```
#textPopup {
    background-color: rgba(255,255,255,0.2);
} 
```

您可以看到它在[jsfiddle](http://jsfiddle.net/cchana/fC2Mz/1/)上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:01:23.600

通过在 CSS 中进行以下更改，您将能够使其按预期工作：

```
#innerPopup
{
    position: relative; /* change this to relative - will allow you to override the parent specified opacity */

    opacity: 1;

    /* other properties */
} 
```

# javascript - 函数之间的延迟

> ID：11967263
> 
> 赞同：2
> 
> 时间：2012-08-15T09:53:03.283
> 
> 标签：javascript, jquery, html

这是我的代码片段。

```
 function customFadeIn () {
    $("img.imgKit").each(function(index) {
        $(this).delay(1000*index).fadeIn("slow");
    });
    console.log("one runs");
}

function customFadeOut () {
    $("img.imgKit").each(function(index) {
        $(this).delay(1000*index).not(document.getElementById('card-6')).fadeOut("slow" , function () {
            $("#card-6").delay(1000).rotate({angle:0});
        });
    });
    console.log("two runs");
} 
```

我希望 customFadeOut 仅在 customFadeIn 完成后运行，因此我通过这个来调用它

```
customFadeIn();
customFadeOut(); 
```

但它没有用，我想我在这里做错了，帮助真的很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:56:50.447

您可以使用 jQuerys `Deferred`/`promise`对象。动画也确实“继承”了这些对象，您可以申请`jQuery.when()`拍摄多个承诺来完成。

有几种方法可以为此重新构建代码，一个简单的实现可能如下所示：

```
(function() {
    var promises = [ ];

    function customFadeIn () {
        $("img.imgKit").each(function(index) {
             promises.push( $(this).delay(1000*index).fadeIn("slow").promise() );
        });
    }

    function customFadeOut () {
        jQuery.when.apply( null, promises ).done(function() {
            $("img.imgKit").each(function(index) {
                $(this).delay(1000*index).not(document.getElementById('card-6')).fadeOut("slow" , function () {
                    $("#card-6").delay(1000).rotate({angle:0});
                });
            });
            console.log("two runs");
        });
    }
}()); 
```

如果我在那里做的一切都是正确的，那么在它运行自己的代码之前，`customFadeOut`设置一个等待所有*动画*/*承诺完成的监听器。*您甚至不必在`.promise()`最后显式调用该方法，jQuery 应用了一些白魔法来将该节点与内部的 Promise 链接起来。

**演示**：http: [//jsfiddle.net/RGgr3/](http://jsfiddle.net/RGgr3/)

* * *

看起来我做的一切都是正确的；）

# ios - 如何将 UILabel 文本中的更改与相关动画同步？

> ID：11967266
> 
> 赞同：2
> 
> 时间：2012-08-15T09:53:13.657
> 
> 标签：ios, core-animation, synchronous, cakeyframeanimation

我使用 CAKeyframeAnimation 制作了一个水杯从空到满的动画。动画效果很好。

我需要用与玻璃的饱满度相对应的百分比来更新 UILabel，即动画开始时它会显示“0%”，结束时会显示“100%”。

关键帧动画运行 5 秒。我看不到更新此标签的好方法。我可以想到两个选择：

1.  启动另一个线程并运行轮询类型的循环，以处理能力为代价更新文本。
2.  将动画分解为 100 个部分并使用 CABasicAnimation 更新文本，然后继续下一段玻璃动画。

有一个更好的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:12:02.993

您可以使用 NSTImer 或 dispatch_after() 块在某个预定时间间隔更新标签：

```
// assume an ivar "NSTimer *myTimer" and "int count", initially 0

// fires 20 times, so update is 0.05
myTimer = NSTimer scheduledTimerWithTimeInterval:0.25 target:self selector:@selector(updateLabel:) userInfo:nil repeats:YES

- (void)updateLabel:(NSTimer *)timer
{
  ++count;
  if(count >= 20) {
     [timer invalidate];
  }
  CGFloat percent += 0.05;
  myLabel.text = [NSString stringWithFormat:...
} 
```

# java - Java 在 linux 上使用 100% 的 cpu

> ID：11967273
> 
> 赞同：6
> 
> 时间：2012-08-15T09:53:36.500
> 
> 标签：java, linux, cpu-usage

在我的 linux 服务器上，任何 java 程序（甚至是“Hello world”）都使用 100% 的 cpu，而且速度非常慢。id不依赖java版本，我试过不同版本的openjdk和sun jdk，都表现一样。我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T09:53:36.500

我在这篇文章[http://blog.wpkg.org/2012/07/01/java-leap-second-bug-30-june-1-july-2012-fix/中找到了解决方案](http://blog.wpkg.org/2012/07/01/java-leap-second-bug-30-june-1-july-2012-fix/)

很有可能，这是由“闰秒内核错误”引起的。首先，检查以下内容`dmesg`

```
[10703552.860274] Clock: inserting leap second 23:59:60 UTC 
```

要修复它，首先停止 ntp 客户端。在类似 Debian 的系统上

```
/etc/init.d/ntp stop 
```

存储当前时间

```
date -s now 
```

并测试java。如果一切正常，请尝试重新启动 ntp 服务

```
/etc/init.d/ntp start 
```

并再次测试。

# symfony - Symfony2 查询中的 Doctrine2

> ID：11967283
> 
> 赞同：2
> 
> 时间：2012-08-15T09:54:09.647
> 
> 标签：symfony, doctrine-orm

我在 Symfony2 中使用 Doctrine。这是代码：

```
$repository = $this->getDoctrine()->getRepository('AcmeCrawlerBundle:Trainings');
$allActive = $repository->findByStatus('(Active)'); 
```

我怎样才能使用最小的 allByStatus `realId`？我的意思是，一行是状态“（活动）”和最小的“realId”。

谢谢！

更新。我很stu...我可以先找到并观看它的真实ID，因为我在循环中保存了它...谢谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:08:22.347

您可以重载存储库中的 findByStatus 函数，以在查询构建器中使用 orderby close

```
<?php class TrainingsRepository { 
  /*other code here */
  public function findByStatus($status){
     $qb =  $this->createQueryBuilder('t');
     $qb->addWhere('t.status=:status');
     $qb->orderBy('idItem','ASC');
     $qb->setParameters(array(':status'=>$status));

    return $qb->getQuery()->getResult();
  } 
```

# ios - 当第一个描述符是 NSDate 时，多个 NSSortDescriptor 不起作用

> ID：11967289
> 
> 赞同：0
> 
> 时间：2012-08-15T09:55:00.233
> 
> 标签：ios, nsdate, nsfetchedresultscontroller, nsfetchrequest, nssortdescriptor

我试图通过“recordDate”将数据分成多个部分，然后对于每个部分，数据将按“elementName”升序排序。以下是当前代码（不工作）：

```
NSManagedObjectContext *context = self.tankDatabase.managedObjectContext;
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Log"];
request.sortDescriptors = [NSArray arrayWithObjects:[NSSortDescriptor sortDescriptorWithKey:@"recordDate" ascending:NO], [NSSortDescriptor sortDescriptorWithKey:@"elementName" ascending:YES selector:@selector(localizedStandardCompare:)], nil];
request.predicate = [NSPredicate predicateWithFormat:@"ownedBy = %@", self.tank];

self.controller = [[NSFetchedResultsController alloc]
                                          initWithFetchRequest:request
                                          managedObjectContext:context
                                          sectionNameKeyPath:@"recordDate"
                                          cacheName:nil];

self.controller.delegate = self;

NSError *error;
BOOL success = [self.controller performFetch:&error]; 
```

但是，当我尝试使用其他属性进行排序（例如：elementName ASC、value DESC 并按 elementName 对它们进行分组）时，它确实可以正常工作。请注意，recordDate 在数据模型中是“日期”类型，在类中是 NSDate。

此外，recordDate 包含需要将其分组到该详细信息的分钟和秒。

我试图在整个互联网上搜索类似的案例，但我没有找到任何可行的解决方案。我的代码中缺少什么？或者它只是一个苹果的错误？感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:12:02.037

我终于想通了：

显然，亚秒级信息也被保存到 Core Data 中，使得日期之间的比较（即使被比较的日期共享完全相同的日期）不起作用。

所以我所做的是在将亚秒信息保存到核心数据之前删除它：

```
self.recordDate = [NSDate dateWithTimeIntervalSinceReferenceDate:floor([recordDate timeIntervalSinceReferenceDate])]; 
```

我希望这可以帮助任何面临同样问题的人。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T09:50:12.230

是的，如果您希望您的子排序描述符（基于 elementName）启动，那么您需要与 recordDate 建立一些联系，因此您截断 recordDate 的想法很好。事实上，很多时候，NSDate 信息被截断为 YY:MM:DD，因此属于同一天的所有事件都无法区分。

顺便说一句，通常只有您的 sectionNameKeyPath 需要“粗粒度”，例如，您通过从 recordDate 中删除亚秒信息来创建一个新的瞬态属性，并将其作为 sectionNameKeyPath 提供给 NSFetchedResultsController。换句话说，您可以按原样继续使用 recordDate ...

这类似于姓氏排序（例如，升序），其中部分名称为 A、B、C、...、Z。

# playframework - 转义分号路由playframework 2.0.2

> ID：11967290
> 
> 赞同：1
> 
> 时间：2012-08-15T09:55:01.480
> 
> 标签：playframework, routes, playframework-2.0, uri

我想用 playframework 做一个重定向功能。到目前为止，我的路线中有这个

```
GET     /redirect            com.test.redirect(redirecturl: String?="") 
```

和我的控制器：

```
public static Result redirect(String redirecturl) { 
   return redirect(redirectURL); 
} 
```

这运行良好，但是当我传递包含分号“;”的 url 时出现问题

如果我去

`http:localhost:9000/redirect?redirecturl=http://www.google.com;testaftersemicolon`

它将我重定向到 google.com，但在我的日志中，redirecturl 仅等于“ [http://www.google.com](http://www.google.com) ”在分号后停止。

有没有办法逃脱呢？还是在play里面做一个自定义路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:32:36.863

您应该能够通过在路由文件中使用自定义正则表达式来转义它。这在[有关路由的文档](http://www.playframework.org/documentation/2.0.2/JavaRouting)中进行了描述。基本上类似下面的东西应该工作：

```
GET     /redirect/$url<.+>            com.test.redirect(url: String?="") 
```

# .net - 当Type 为 TimeSpan 时尝试解析泛型类型时出错

> ID：11967291
> 
> 赞同：4
> 
> 时间：2012-08-15T09:55:06.160
> 
> 标签：.net, vb.net, parsing, generics, type-conversion

我有以下代码用于尝试将字符串解析为泛型类型。在我使用它的实例中，当我尝试解析为 TimeSpan 时它会失败。输入字符串可以`"12:34"`很好地解析，`TimeSpan.Parse`但我找不到实现的解决方案`<Generic>.Parse`

```
Public Function ParseGeneric(Of T)(ByVal stringValue As String) As T
    Return DirectCast(Convert.ChangeType(stringValue, GetType(T)), T)
End Function 
```

错误：**从“System.String”到“System.TimeSpan”的无效转换。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:02:22.947

如果你会原谅一些 C#，`TypeDescriptor`/`TypeConverter`可以在这里提供帮助：

```
static T ParseGeneric<T>(string stringValue)
{
    return (T)TypeDescriptor.GetConverter(typeof(T))
                 .ConvertFromString(stringValue);
} 
```

如果我不得不*猜测*（完全未经测试）VB：

```
Public Function ParseGeneric(Of T)(ByVal stringValue As String) As T
    Return DirectCast(TypeDescriptor.GetConverter(GetType(T)) _
                .ConvertFromString(stringValue), T)
End Function 
```

# ruby-on-rails - 如何在查询结果中添加虚拟字段

> ID：11967294
> 
> 赞同：3
> 
> 时间：2012-08-15T09:55:19.610
> 
> 标签：ruby-on-rails, activerecord

为了提高性能，我写了以下内容：

```
a = Address.joins(:vacancies).select('"addresses"."city", COUNT (*) AS total_count').group('"addresses"."city"').order('total_count DESC') 
```

代替：

```
a = Address.all.keep_if{ |a| a.vacancies.all_active.size > 0 }.uniq{ |a| a.city }.map{ |a| [a.city, a.vacancies.all_active.size] }.sort{ |aa, ab| aa[1] <=> ab[1] }.reverse 
```

但是，该`total_count`字段不会显示在结果中。如果我在 sqlite 中运行查询，它会显示出来。我向地址模型添加了一个虚拟属性，但这没有帮助。如何解决这个问题？

另外，这是我的 Rails 控制台输出：

```
1.9.3p194 :010 > a = Address.joins(:vacancies).select("addresses.city, count(*) as total_count").group("addresses.city").order("total_count DESC")
  Address Load (3.9ms)  SELECT addresses.city, count(*) as total_count FROM "addresses" INNER JOIN "vacancies" ON "vacancies"."address_id" = "addresses"."id" GROUP BY addresses.city ORDER BY total_count DESC
 => [#<Address city: "Amsterdam">, #<Address city: "Rotterdam">, #<Address city: "Utrecht">, #<Address city: "Den haag">, #<Address city: "Delft">, #<Address city: "Hilversum">, #<Address city: "Amstelveen">, #<Address city: "Rijswijk">, #<Address city: "Breda">, #<Address city: "Zwolle">, #<Address city: "Tilburg">, #<Address city: "Amersfoort">, #<Address city: "Amsterdam centrum">, #<Address city: "Eindhoven">, #<Address city: "Next nature netwerk, amsterdam">, #<Address city: "Almere">, #<Address city: "Ameide">, #<Address city: "Arnhem">, #<Address city: "Baarlo">, #<Address city: "Capelle a/d ijssel">, #<Address city: "De lier">, #<Address city: "Leiden">, #<Address city: "Reigerstraat 16, breda">, #<Address city: "Rottedam">, #<Address city: "'s-hertogenbosch ">, #<Address city: "Alkmaar">, #<Address city: "Alphen aan den rijn">, #<Address city: "Amsterdam singel 137">, #<Address city: "Amsterdam, keizergracht">, #<Address city: "Barendrecht">, #<Address city: "Den haag e.o.">, #<Address city: "Deventer">, #<Address city: "Dordrecht">, #<Address city: "Groningen">, #<Address city: "Gummo, amsterdam">, #<Address city: "Hillversum">, #<Address city: "Houten">, #<Address city: "Lisse">, #<Address city: "Moti, breda">, #<Address city: "Nijmegen">, #<Address city: "Rotterdam ">, #<Address city: "Tuil (waardenburg)">, #<Address city: "Zaltbommel">] 
1.9.3p194 :011 > a.first.total_count
 => nil 
1.9.3p194 :012 > a.first.to_json
 => "{\"city\":\"Amsterdam\",\"total_count\":null}" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T09:39:28.693

首先，删除虚拟属性（我假设您的意思是您`attr_accessor :total_count`的模型中有）。

Active Record 的`inspect`方法（在控制台中生成输出）是硬连线的，它只显示有关它所期望的属性的信息，即对应于表上实际列的那些信息。仅因为您在 select 子句中添加了某些内容而存在的属性不会显示。他们还在那里 - 你可以做

```
a.first.total_count 
```

或者

```
a.first.attributes 
```

看见了。在您的控制台会话`a.first.total_count`中不起作用，因为您`attr_accessor`正在隐藏数据库属性。

该`to_json`方法的相似之处在于默认情况下它会序列化它知道的属性。您可以通过执行包含`total_count`在您的输出中

```
a.to_json(:methods => [:total_count]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T10:27:11.947

您的查询：

```
@result = Address.joins(:vacancies).select("addresses.city, count(*) as total_count").group("addresses.city").order("total_count DESC") 
```

第一个元素的总数：

```
@result.first.total_count 
```

如果您在控制台中看不到 total_count 属性

```
@result.first.to_json 
```

将向您显示所有属性。

**提示：**我认为您使用了太多引号，并且如果属性仅存在于一个表中，则不需要在表名前为属性添加前缀。联接不会提高性能。如果您想提高性能，请查看[急切加载](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)

# magento - Magento 多商店电子邮件模板

> ID：11967295
> 
> 赞同：0
> 
> 时间：2012-08-15T09:55:36.433
> 
> 标签：magento

我有一个带有共享电子邮件模板的多商店设置（商店 A 和 B）。在这些模板中，我引用了区别于 A 和 B 的自定义变量。

```
Shop A ==\                           /==> Custom Var (version A)
          >==>  E-mail Template X ==<
Shop B ==/                           \==> Custom Var (version B) 
```

这很好用，除了 1 个问题：当我通过管理员为商店 B 创建帐户时，我无法获得商店 B 的密码提醒。向该用户发送新密码将始终作为商店 A 发送。

请注意，发送的欢迎邮件*是*正确的（B），但我猜只是因为您从“创建帐户”屏幕中选择了发送商店。

我确实意识到该帐户被标记为由管理员而不是商店 B 创建，而不是通过商店 B 注册时。我可以想象这可能会导致问题，但是，我真的很想找到一种方式：

1.  通过管理员为 Shop B 创建一个帐户
2.  以 Shop B 风格发送密码提醒

* * *

*编辑：以下问题与将用户与管理员的商店相关联的意义相关：[如何在 Magento 中更改客户 store_id 或在创建新客户时设置“created_from”属性](https://stackoverflow.com/questions/5424423/how-can-i-change-a-customer-store-id-in-magento-or-set-the-created-from-attrib)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:01:32.883

似乎默认情况下，不可能从链接到特定商店的管理员创建帐户。不过，我确实找到了一种方法，通过收听 adminhtml_customer_prepare_save 并滥用帐户创建表单中的“发送自”。

这是我为它准备的一个模块：

等\config.xml：

```
<config>
  <modules>
    <Company_AccountPerStore>
      <version>1.0</version>
    </Company_AccountPerStore>
  </modules>
  <global>
    <models>
      <accountperstore>
        <class>Company_AccountPerStore_Model</class>
      </accountperstore>
    </models>
  </global>
  <adminhtml>
    <events>
      <adminhtml_customer_prepare_save>
        <observers>
          <accountperstore_observer>
            <class>Company_AccountPerStore_Model_Observer</class>
            <method>customerPrepareSave</method>
          </accountperstore_observer>
        </observers>
      </adminhtml_customer_prepare_save>
    </events>
  </adminhtml>
</config> 
```

模型\观察者.php：

```
class Company_AccountPerStore_Model_Observer extends Varien_Object
{
  public function customerPrepareSave($observer)
  {
    $customer = $observer->getEvent()->getCustomer();

    if (!$customer->hasStoreId() && $customer->hasData('sendemail_store_id')) {
      $customer->setStoreId($customer->getData('sendemail_store_id'));
    }
  }
} 
```

请注意，您将无法再检测到该帐户是使用管理员创建的。

# sql - 如何使用 Fluent NHibernate 映射 Tsql 用户定义函数？

> ID：11967296
> 
> 赞同：3
> 
> 时间：2012-08-15T09:55:38.540
> 
> 标签：sql, nhibernate, fluent-nhibernate, user-defined-functions

如何使用 Fluent NHibernate 映射 Tsql 用户定义函数？我找到了一个适用于 hbm 的解决方案。

[http://ayende.com/blog/1720/using-sql-functions-in-nhibernate](http://ayende.com/blog/1720/using-sql-functions-in-nhibernate)

但我正在使用 ClassMaps。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:25:50.490

我相信这`<sql-query>`还没有在 FluentNHibernate 中实现。GitHub 上有一个[未解决的问题。](https://github.com/jagregory/fluent-nhibernate/issues/62)

但是，您可以使用 FluentNHibernate 配置混合使用 fluent 映射和 .hbm 映射。这是一个例子：http: [//www.dotnetguy.co.uk/post/2009/11/01/stored-procedures-with-fluent-nhibernate/](http://www.dotnetguy.co.uk/post/2009/11/01/stored-procedures-with-fluent-nhibernate/)

像这样的东西：

```
Fluently.Configure()
    .Database(MsSqlConfiguration.MsSql2008.ConnectionString(c => c.Is("...")))
    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<SessionFactory>())
    .Mappings(m => m.HbmMappings.AddFromAssemblyOf<SessionFactory>())
    .BuildSessionFactory(); 
```

# vba - MS Word VBA 动态页脚

> ID：11967299
> 
> 赞同：0
> 
> 时间：2012-08-15T09:55:45.720
> 
> 标签：vba, footer, ms-word

我想替换页脚中的标签。它可以工作，但替换会删除页脚文本上方的水平线。如何在不删除水平线的情况下替换标签？如何在页脚中画一条线？

```
Private Sub Document_Open()
   Dim unit As String
   Dim footer As String
   unit = "New text"
   footer = ActiveDocument.Sections(1).Footers(wdHeaderFooterFirstPage).Range.Text
   ActiveDocument.Sections(1).Footers(wdHeaderFooterFirstPage).Range.InlineShapes.AddHorizontalLineStandard   
   footer = Replace(footer, "<<Label>>", unit)
   ActiveDocument.Sections(1).Footers(wdHeaderFooterFirstPage).Range.Text = footer
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:16:59.857

有几种方法可以做你想做的事，并不是所有的方法都在 VBA 中。你试过什么了？

如果您想使用 VBA 在文本上方画一条线，请将光标设置在您想要的位置，然后调用以下命令：

```
With Selection.Borders(wdBorderTop)
    .LineStyle = Options.DefaultBorderLineStyle
    .LineWidth = Options.DefaultBorderLineWidth
    .Color = Options.DefaultBorderColor
End With 
```

# facebook - Facebook 聊天限制

> ID：11967300
> 
> 赞同：0
> 
> 时间：2012-08-15T09:55:55.753
> 
> 标签：facebook, facebook-oauth, facebook-chat

我的公司在 Facebook 上开发了一种客户支持产品，我们希望为代表提供一种通过 Facebook Chat 联系客户的方式。我已阅读 Chat API 文档，但不清楚用户是否必须成为 Facebook 上的朋友才能聊天，或者他们都安装了 Facebook 应用程序就足够了？更多限制？任何见解将不胜感激。

提前感谢您的回答， Yaniv Hakim

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:20:30.450

Facebook 向外部世界提供[XMPP](http://xmpp.org/)端口，而在内部实现[MQTT](http://mqtt.org/)。根据 XMPP 规范，消息传递在两个实体之间工作，而不需要它们在彼此的名册列表（朋友/联系人列表）中。然而，Facebook 似乎将此限制作为其自身业务需求的一部分。我认为，如果两个联合实体试图在没有出现在名册列表中的情况下相互发送消息，那么即使是 GoogleTalk 也不允许这样做。

简而言之，是的，您可以发送消息。您不需要某人的在场授权即可向他们发送消息（在 XMPP 世界中）。然而，尽管 XMPP 规范没有强制要求，但某些服务有要求这样做的策略。

# c# - C# 文件处理：在可执行文件所在的目录中创建文件

> ID：11967302
> 
> 赞同：7
> 
> 时间：2012-08-15T09:56:02.820
> 
> 标签：c#, file-io

我正在创建一个将分发给许多用户的独立应用程序。现在每个人都可以将可执行文件放在他们机器上的不同位置。
我希望在执行可执行文件的目录中创建一个新文件。所以，如果用户有他的可执行文件：

```
C:\exefile\ 
```

该文件是在那里创建的，但是如果用户将可执行文件存储在：

```
C:\Users\%Username%\files\ 
```

应该在那里创建新文件。

我不希望在我的应用程序中对路径进行硬编码，而是确定可执行文件存在的位置并在该文件夹中创建文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-15T10:00:16.180

永远不要在可执行文件所在的目录中创建文件。尤其是使用市场上最新的操作系统，您可以轻松地在文件创建时跳入安全问题。为了*保证*文件创建过程，所以你的数据也持久性，使用这个代码：

```
var systemPath = System.Environment.
                             GetFolderPath(
                                 Environment.SpecialFolder.CommonApplicationData
                             );
var complete = Path.Combine(systemPath , "files"); 
```

这将生成一个路径，如*C:\Documents and Settings\%USER NAME%\Application Data\files 文件*夹，您*保证*在其中具有写入权限。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-15T09:59:17.727

只需使用[`File.Create`](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)：

```
File.Create("fileName"); 
```

这将在您的可执行程序中创建文件，而无需指定完整路径。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-10T09:07:35.263

您可以使用以下命令获取新文件的完整路径：

```
string path = Path.GetDirectoryName(Application.ExecutablePath) + "\\mynewfile.txt" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T10:00:06.237

```
string path;
   path = System.IO.Path.GetDirectoryName( 
      System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase );
   MessageBox.Show( path ); 
```

[http://msdn.microsoft.com/en-us/library/aa457089.aspx](http://msdn.microsoft.com/en-us/library/aa457089.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-15T19:12:22.220

在现代操作系统中，公认的答案是：

```
var systemPath = System.Environment.GetFolderPath(
    Environment.SpecialFolder.CommonApplicationData
);
var complete = Path.Combine(systemPath , "files"); 
```

将产生一个用户不可知的路径，如：“C:\ProgramData\files”

生成类似于以下内容的基于用户的路径：“C:\Documents and Settings\%USER NAME%\Application Data\files”

您应该使用`SpecialFolder.ApplicationData`or`SpecialFolder.LocalApplicationData`代替。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-07T16:01:31.300

我喜欢给用户选择。我会将目录默认为 Environment.SpecialFolder.CommonApplicationData 之类的目录，并让他们随意读取和编辑路径。如果在控制台应用程序中显示帮助中的路径并允许他们通过命令行参数传递它。这为他们省去了寻找文件夹的麻烦。如果他们指向您无法写入的路径，那么您会抛出错误并让他们决定要做什么。

# r - 访问包 lme4

> ID：11967306
> 
> 赞同：0
> 
> 时间：2012-08-15T09:56:23.047
> 
> 标签：r

我正在尝试使用包 doBy，它需要安装包 lme4。

我在这里找到了 CRAN [http://cran.r-project.org/web/packages/lme4//index.html](http://cran.r-project.org/web/packages/lme4//index.html)

但是，当我尝试下载 .zip 版本时，我收到错误“找不到对象！”。据我所知，它不是一个过时的包（它最后一次更新是在今年 6 月）。

有谁知道解决这个问题的方法，还是我只需要等待 lme4 修复/找到 doBy 的替代方案？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:00:23.933

尝试

```
install.packages("lme4",repos="http://r-forge.r-project.org") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-15T20:48:57.813

你使用 R Studio 吗？我遇到了同样的问题，但后来我使用了 R Studio 的选项卡“包”-> 安装选项卡-> 从 CRAN 存储库写入 lme4。

# c++ - Facebook 编程挑战

> ID：11967310
> 
> 赞同：7
> 
> 时间：2012-08-15T09:56:34.747
> 
> 标签：c++, algorithm

Mastermind 是两个玩家的游戏。一开始，第一个玩家决定一个秘密密钥，它是一个序列`(s1,s2,...sk)`，`0 < si <= n`然后第二个玩家轮流猜测，每个猜测的形式为`(g1,g2, ...gk)`，每次猜测后，第一个玩家计算猜测的分数。猜测的分数等于我们拥有的 i 的数量`gi = si`。

例如，如果密钥是`(4,2,5,3,1)`并且猜测是`(1,2,3,7,1)`，那么得分是 2，因为 `g2 = s2`和`g5 = s5`。

给定一系列猜测和每个猜测的分数，您的程序必须确定是否存在至少一个生成这些精确分数的密钥。

输入

输入的第一行包含一个整数*C* `(1 <=C <= 100)`。C 测试用例如下。每个测试用例的第一行包含三个整数*n*、*k*和*q*。`(1 <=n,k <=11, 1<=q<=8)`. 接下来的*q*行包含猜测。

每个猜测由*k*个整数组成，`gi,1, gi,2,....gi,k`由一个空格分隔，后面是猜测*bi的分数* `(1 <= gi,j <=n for all 1 <=i <=q, 1 <=j <=k; and 0 <= bi <=k )`

输出

对于每个测试用例，如果至少存在一个生成这些精确分数的密钥，则输出“是”（不带引号），否则输出“否”。

样本输入

```
2
4 4 2
2 1 2 2 0
2 2 1 1 1
4 4 2
1 2 3 4 4
4 3 2 1 1 
```

样本输出

```
Yes
No 
```

除了蛮力，我无法思考其他任何事情，即通过生成所有可能的密钥并检查所有猜测的相应分数复杂性非常高，大约需要 (11^11)*8 次操作

请建议一些如何及时做到这一点？

时间限制：3秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:16:42.453

[这与公牛和奶牛](http://en.wikipedia.org/wiki/Bulls_and_cows)的游戏非常相似。网络上有很多关于它的信息，在 wiki 文章中你可以找到实现的链接。使它们适应您的确切挑战应该相当容易。

# cakephp - 为 v2.2.1 安装 cakephp-scripts 的正确方法？

> ID：11967312
> 
> 赞同：4
> 
> 时间：2012-08-15T09:56:41.570
> 
> 标签：cakephp, cakephp-2.1, cakephp-bake

我正在使用 ubuntu，并按照说明使用“apt-get isntall cakephp-scripts”

我正在使用 cake v 2.2.1 的最新稳定版本，但是当我运行 cake bake -app 时，我总是得到 v1.3.2 的控制台

为什么我在 cakephp v 2.2.1 上获得 CakePHP v1.3.2 控制台

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:31:05.257

正如其他人已经指出的那样，存储库中的 CakePHP 是 v1.3.2，它不适用于您的 2.1。

卸载 ( `sudo apt-get remove cakephp-scripts`) 后，执行以下操作：

1.  下载 CakePHP 2.1 并将其解压到全局可用的地方（例如`/usr/share/php/cakephp/`
2.  检查权限：`/usr/share/cakephp/`所有子文件夹都应该对每个人都可读并且`/usr/share/cakephp/app/Console/cake`应该是可执行的。
3.  现在链接您的可执行文件`/usr/bin/`：

    ```
    cd /usr/bin
    ln -s /usr/share/php/cakephp/app/Console/cake cake 
    ```

4.  您现在应该能够在控制台的任何地方使用正确版本的脚本。

如果你想让 cake 的版本可以轻松切换，你应该把源放在一个子文件夹中，即`/usr/share/php/cakephp/2.1/`并链接到那里：`ln -s 2.1 current`. 现在您可以链接`/usr/bin`到您的`current`目录：`ln -s /usr/share/php/cakephp/current/app/Console/cake cake`. 如果您想切换版本，您唯一需要做的就是更改`current`链接到的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T09:06:37.033

Go to your terminal

```
1\. sudo apt-get remove cakephp-scripts 
2.cd /var/www/html/yourproject/app/Console/
3.sh cake bake 
```

I think you will be able to use cake bake console with your cakePHP same version.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:08:49.073

检查 Linux 中的 PATH 变量，它可能指向旧版本的 cake

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T20:01:52.487

而不是通过做`cake bake`直接运行它。事情是安装和旧版本的蛋糕脚本。`cakeDir/app``Console/cake bake``install cakephp-scripts`

# php - Codeigniter - 扩展控制器不起作用

> ID：11967315
> 
> 赞同：2
> 
> 时间：2012-08-15T09:56:51.673
> 
> 标签：php, codeigniter, extending

我正在尝试用我自己的类扩展一个控制器，该类扩展了默认的 CI_Controller 类。除非它不起作用。

它说它找不到我的子类。我的子类位于 application/core 并命名为 My_Control_Panel。

我的类在我的子类上扩展：

```
if (!defined('BASEPATH')) exit('No direct script access allowed');

class Developers extends My_Control_Panel
{
    public function __construct()
    {
        parent::__construct();
        $this->load->helper('form');
        $this->load->helper('url');
        $this->load->database();

        $this->checkIfLoggedIn();
        $this->checkIfAllowedToViewPage();
} 
```

我的子类：

```
if (!defined('BASEPATH')) exit('No direct script access allowed');

class My_Control_Panel extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();
    }
} 
```

它一直说它找不到我的子类，但它应该可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:51:55.480

`My_Controller.php`你应该在你的文件夹中这样命名你的`core`文件，然后你输入你的代码

```
if (!defined('BASEPATH')) exit('No direct script access allowed');

class My_Control_Panel extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();
    }
} 
```

这是在 CodeIgniter 中执行此操作的正确方法，而不是在第一个答案中提到的包含一个 ..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T10:03:33.677

如果您希望 CI 接听您的扩展课程，您必须为其命名`MY_Controller`。该`MY_`部分是可配置的，但其他部分不是。

这`MY_`部分来自于`config/config.php:`

```
$config['subclass_prefix'] = 'MY_'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T10:00:39.620

您需要在子类 ( `My_Control_Panel`) 中包含父类 ( `Developers`)，如下所示：

```
if (!defined('BASEPATH')) exit('No direct script access allowed');

include_once '../path/to/mycontrolpanel.php';

class Developers extends My_Control_Panel
{
    // whatever
} 
```

# wix - WiX - 如何在安装过程中有不同的复制策略

> ID：11967316
> 
> 赞同：0
> 
> 时间：2012-08-15T09:56:53.773
> 
> 标签：wix

在安装过程中，我的应用程序将：

步骤 A，查找`C:\WebService`目录。如果找到，请执行以下操作：

```
copy *.bat      --> C:\WebService\
copy boost*.dll --> C:\WebService\libs\
copy myApp.dll  --> C:\WebService\plugins\ 
```

步骤 B，如果找不到，请执行以下操作：

```
copy *.bat --> [LocalAppData]\myApp\bin\
copy *.dll --> [LocalAppData]\myApp\libs\ 
```

我怎样才能做到这一点？

**编辑：**

我通过以下方式完成了第 2 步：

1.  创建源目录：

    `src\bin`
    `src\libs`

2.  将文件复制到这些子目录

3.  用于`heat`扫描 src 目录并将组生成到 wxs 文件中。

这里的问题是，看起来对于步骤 A，我必须再次做同样的事情。但是有大量的 *.dll，将它们再次复制到另一个目录看起来不是一个好主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:11:06.630

您对问题的表述方式表明您对 Windows Installer 的理解存在巨大差距。MSI / WiX 不是脚本语言。您需要了解 AppSearch、功能、目录、组件和条件如何工作。基本上，您需要将文件分组到组件中，并使用 AppSearch 来检测目录是否存在。然后使用条件中的搜索结果来决定安装哪些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:07:13.813

好的，终于搞定了。

简而言之，我通过编写一个 C++ 程序来提供帮助。

详情如下。。

我的 wxs 开头如下：

```
<Directory Id='TARGETDIR' Name='SourceDir'>
  <Directory Id='WebDir'>
      <Directory Id='INSTALLDIR' Name='$(var.ProductName)'/>
  </Directory>
  <Directory Id='DefaultDir'/>
</Directory> 
```

现在使用`heat`收获我的源目录来生成另一个 wxs 文件`candle`并`light`链接

然后是我的 C++ 程序，它的设计目的是

1.  扫描整个生成的 wxs 文件以创建另一个目录结构。
2.  替换目录、组件和文件的所有 ID 以使其唯一。
3.  为所有新组件生成新的 GUID。
4.  收集所有新组件 ID 以创建新组件组。

这个新的组件组可以有条件地引用安装，取决于是否有注册表项，或者是否找到目录，在我的情况下是：

```
 <Feature Id='RuntimeChrome' Level='1'>
    <Condition Level='0'>NOT INSTALLDIR_REGCU AND NOT INSTALLDIR_REGLM</Condition>
    <ComponentGroupRef Id='WebGroup' />
  </Feature>
  <Feature Id='RuntimeDefault' Level='1'>
    <ComponentGroupRef Id='DefaultGroup' />
  </Feature> 
```

有了这些wxs文件，就可以在不同的场景下将包安装到不同的地方。

# centos - 具有许多 ips 的后缀

> ID：11967317
> 
> 赞同：1
> 
> 时间：2012-08-15T09:57:02.827
> 
> 标签：centos, postfix-mta, mail-server

您好，我正在 CentOs 6.2 中安装 Postfix，问题是我有几个 IP 块，比如说我希望从其中发送电子邮件的 5 个 ip，所以第一个发送电子邮件的请求服务器将使用第一个 ip，后面是第二个，依此类推，我该如何设置？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T11:32:09.447

这就是解决方案，如果您可以将这个想法实施到您的后缀中，那么您可以按照您的意愿安排 IP，

1) 以递增的方式为您的每封邮件提供消息 ID 2) 在传输中，您可以将通过隧道发送的邮件作为消息 ID 注意：如果您使用 5 个 IP，那么您可以计算 ID%5=1 然后是第一个 IP ID%5 =2 然后是第二个 IP。您可以借助正则表达式（[链接](http://www.postfix.org/transport.5.html)）来做到这一点。

# asp.net - vb.net 数据库连接失败

> ID：11967318
> 
> 赞同：0
> 
> 时间：2012-08-15T09:57:04.757
> 
> 标签：asp.net, vb.net, dataset

我有以下代码，我正在尝试用这些信息更新一个新的数据库行。我很确定我以前曾这样做过，但它会因在线上的“NullReferenceExcetption”而崩溃

```
dtItemsFeed = taItemsFeed.GetData() 
```

代码（精简）如下：

```
Public Partial Class downloaditems

    Private dtItemsFeed As dsItems.ItemsFeedDataTable
    Private taItemsFeed As dsItemsTableAdapters.ItemsFeedTableAdapter

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        checkSite("http://www.tiag.me/whatever/header.html", "Header")

    End Sub

    Private Sub checkSite(ByVal URL As String, ByVal Type As String)

        dtItemsFeed = taItemsFeed.GetData()
        Dim rFeed As dsItems.ItemsFeedRow

        rFeed = dtItemsFeed.NewItemsFeedRow

      ### Code that loads items ###

        rFeed.HeaderCode = sourcecode
        rFeed.LastImport = System.DateTime.Now
        rFeed.Verified = "True"

        dtItemsFeed.AddItemsFeedRow(rFeed)
        taItemsFeed.Update(dtItemsFeed)

    End Sub

End Class 
```

当我查看编辑数据集时数据有效，所以我知道它正在连接

错误：![在此处输入图像描述](../Images/21a5493da7a9bde95daeeaa73bbd6253.png)

任何帮助将不胜感激。汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:58:58.443

您必须创建一个`dsItemsTableAdapters.ItemsFeedTableAdapter`.

```
Private taItemsFeed As new dsItemsTableAdapters.ItemsFeedTableAdapter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:01:02.047

您没有将值分配给 的代码`taItemsFeed`。因此，总是`Nothing`在您到达该代码时。

那或者你在你的问题中错过了一些重要的代码！

# google-drive-api - 插入文件权限并以“组”类型共享不会在 Google Drive SDK 中发送通知电子邮件

> ID：11967319
> 
> 赞同：1
> 
> 时间：2012-08-15T09:57:25.940
> 
> 标签：google-drive-api

**当我在将值设置为组电子邮件地址并键入“组**”的同时创建文件并插入权限时，不会发送通知电子邮件，但是当我只尝试单个用户并键入“用户”时，我会收到通知电子邮件。此外，当我在云端硬盘中检查文件时，我看到标记为共享的文件，即使它没有出现在用户（组的一部分）云端硬盘帐户中。我做错了什么？

**注意：**具有权限的文件位于文件夹中，会不会有问题？我应该认为不会...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:17:34.110

我想我找到了解决我遇到的这个有趣问题的方法。所以我碰巧发现当我对文件标题进行**URL 编码**并共享它时，它对用户和组都有效。所以我认为 Google Drive 在共享时不喜欢文件标题中的有趣字符。虽然我会得到纠正，但这似乎暂时解决了我的问题，当有人会给出一个有效的解释时。

# mercurial - 如何仅提交文件重命名，而不是 Mercurial 中的实际内容更改

> ID：11967320
> 
> 赞同：3
> 
> 时间：2012-08-15T09:57:38.990
> 
> 标签：mercurial, rename

我在 repo 中重命名了几个文件，并对它们进行了一些更改。现在，我只想提交我重命名文件的事实，然后分别提交更改。在 Mercurial 中这可能吗？

我看到的一种选择是搁置所有更改，然后手动记录所有重命名。我想知道是否有一种更自动化、更不容易出错的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:04:18.220

Mercurial 没有内置的方法来执行此操作 - 提交将始终记录重命名和新文件内容。

但是，您可以通过几个步骤来完成。如果工作副本父级是 X，则执行以下操作：

1.  提交混合的重命名和更改，称之为 Y

2.  提取重命名并将其提交到 X，将此提交称为 Z

3.  将 Y（混合提交）重新设置为 Z（仅重命名）。Rebase 足够聪明，可以看到 Y 中的重命名已经在 Z

在命令行上看起来像这样：

```
$ hg commit -m "mixed commit with both changes and renames"
$ hg update -r "p1(.)"
$ hg diff -c tip | grep "^\(diff\|rename\)" | hg import -m 'renames' -
$ hg rebase -s -2 -d . 
```

# c# - 使用 LINQ 获取内部列表的值

> ID：11967321
> 
> 赞同：3
> 
> 时间：2012-08-15T09:57:44.093
> 
> 标签：c#, linq

我有以下简单的数据结构。学生列表，每个学生都有一个唯一的 ID。每个学生都有一个他们注册的课程列表。课程也有唯一的 ID，但将是多个 studentCourses 列表的成员（因为每个课程都由多个学生注册）。

我正在尝试通过 studentId 和 courseId 找到特定的成绩值。我正在使用下面的 linq 查询。我对我的 linq 仍然有点动摇，想知道我写的查询是否正确？它确实可以正常工作，但是可以将其更改为更优雅/可读吗？

```
class Student {
    int studentId;
    string studentName;
    List<Course> studentCourses;
}

class Course {
    int courseId;
    string courseName;
    int grade;
}

List<Student> students = new List<Student>();
//populate list.                
int studentGrade = students
    .Where(c => c.studentId == 1)
    .Select(c => c.studentCourses.FirstOrDefault(a => a.courseId == 1).grade)
    .FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:02:09.270

我会使用一些查询语法：

```
var studentGrade = 
    (from student in students
    where student.studentId == 1
    from course in student.studentCourses
    where course.courseId == 1
    select course.grade)
        .FirstOrDefault(); 
```

如果查找的任何部分（学生/课程）失败，则序列将为空并`FirstOrDefault`给您一个零。

这也可以用 来完成`SelectMany`，这就是这些多个`from`s 所转换的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:03:55.763

```
int studentGrade = students
                      .Where(d=>d.studentId == 1)
                      .FirstOrDefault().studentCourses
                      .FirstOrDefault(d=>d.courseId == 1).grade; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:32:25.087

如果您确定学生和课程存在，那么

```
int studentGrade = students
                      .FirstOrDefault(s => s.studentId == 1).studentCourses
                      .FirstOrDefault(c => c.courseId == 1).grade; 
```

其他类似的东西

```
var student = students.FirstOrDefault(s => s.studentId == 1);
var course = student != null ? student.studentCourses.FirstOrDefault(c => c.courseId == 1) : null;
int studentGrade = course != null ? course.grade : -1; 
```

# java - 字符编码 JDBC MySQL

> ID：11967322
> 
> 赞同：4
> 
> 时间：2012-08-15T09:57:46.107
> 
> 标签：java, mysql, jdbc, character-encoding

我有一个多语言 Java 应用程序，它在 MySql 数据库中获取和存储数据。

我将表格排序规则保留为**utf-8-general-ci**

对于 JDBC 连接，我使用**useUnicode=true&characterEncoding=UTF-8**参数。

® 之类的字符可以正常显示，但中文字符却混乱了。

**现在**，

关于添加 JVM 参数 **-Dfile.encoding=UTF8**

显示中文字符，但不显示像 ® 这样的字符。

我应该怎么做才能显示从不同语言输入的所有字符。

**编辑：**

输入数据来自 UDP 数据包，由 ByteBuffer 上的 get 方法处理。

和一个像这样实现的 getString 方法。

```
public String getString() {
    byte[] remainingBytes = new byte[this.byteBuffer.remaining()];
    this.byteBuffer.slice().get(remainingBytes);
    String dataString = new String(remainingBytes);
    int stringEnd = dataString.indexOf(0);

    if(stringEnd == -1) {
        return null;
    } else {
        dataString = dataString.substring(0, stringEnd);
        this.byteBuffer.position(this.byteBuffer.position() + dataString.getBytes().length + 1);

        return dataString;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:42:16.710

当您直接在 MYSQL 中尝试该字符时，您声明它可以工作，只有当 java 将它放在那里时，它才不正确。

尝试让您的代码查找这些字符并将它们转储到文本文件或转储到 std 以进行简短测试以比较文本 std 输出与发送到 db 的内容？

还值得存储数据库事务以查看发送的内容：

就 mysql 配置而言，确保您的表和 mysql 本身以 utf-8 模式运行：

```
[client]
default-character-set=utf8

# This was formally known as [safe_mysqld]. Both versions are currently parsed.
[mysqld_safe]
default-character-set=utf8
default-collation=utf8_general_ci
character-set-server=utf8
collation-server=utf8_general_ci
init-connect='SET NAMES utf8'

[mysqld]
default-character-set=utf8
default-collation=utf8_general_ci
character-set-server=utf8
collation-server=utf8_general_ci 
```

确保上面已为您在下面运行的每个数据库名称放入 /etc/mysql/my.cnf 以使其转储表并向每个表添加一条更改行以转换为 utf8

```
select CONCAT("Alter Table `",  i.TABLE_NAME, "` CONVERT TO CHARACTER SET utf8;") as MySQLCMD from information_schema.TABLES i where i.TABLE_SCHEMA =
"userbase" INTO OUTFILE '/tmp/userbase.csv' ; 
```

其他值得尝试的事情 - 特别是如果它在此服务器上以 utf-8 编写：

1.  Linux系统环境：

    Unix 语言环境

    LANG=en_GB.UTF-8 LC_CTYPE="en_GB.UTF-8" LC_NUMERIC="en_GB.UTF-8" LC_TIME="en_GB.UTF-8" LC_COLLATE="en_GB.UTF-8" LC_MONETARY="en_GB.UTF- 8" LC_MESSAGES="en_GB.UTF-8" LC_PAPER="en_GB.UTF-8" LC_NAME="en_GB.UTF-8" LC_ADDRESS="en_GB.UTF-8" LC_TELEPHONE="en_GB.UTF-8" LC_MEASUREMENT=" en_GB.UTF-8" LC_IDENTIFICATION="en_GB.UTF-8" LC_ALL=

要解决这个问题

```
 sudo dpkg-reconfigure locales    select en_GB.UTF-8
 update-locale LANG=en_GB.UTF-8 
```

重新启动服务框以获取 utf-8 作为用户，您需要完全注销并重新登录并在重新启动之前检查语言环境以确保其正常工作。

这意味着您现在可以在本地 ssh 上输入日语（如果需要选择设置中的 putty utf-8）

1.  Tomcat：将 URIEncoding="UTF-8" 添加到

我还添加到

```
 <Connector port="8009"......
           protocol="AJP/1.3"  URIEncoding="UTF-8" /> 
```

3.2 在本地站点的 web.xml 中（在 WEB-INF 内） web.xml（不确定这是否必要）

```
<web-app>
    <filter>
        <filter-name>charsetFilter</filter-name>
        <filter-class>filters.SetCharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
    </filter> 
```

然后寻找映射并添加：

```
 <!-- Define filter mappings for the defined filters -->
<filter-mapping>
<filter-name>charsetFilter</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping> 
```

我遇到了值得在一个好的 utf-8 编辑器（notepad++ 带有启用 utf-8 的选项）或 kate 或 kde 上的其他东西中打开保存和查看 udp 字符串的特定字符损坏问题。

还可以通过 std out 或 file on 测试不同的 utf-8 字符，哪些可以工作，哪些可能不工作

[http://www.fileformat.info/info/unicode/char/search.htm](http://www.fileformat.info/info/unicode/char/search.htm)

并确保字符相同 [http://www.fileformat.info/info/unicode/char/00ae/index.htm](http://www.fileformat.info/info/unicode/char/00ae/index.htm)

# java - 在检票口中使整行可点击

> ID：11967323
> 
> 赞同：0
> 
> 时间：2012-08-15T09:57:54.673
> 
> 标签：java, wicket

我正在使用 wicket 1.5.7，我想在 DefaultDataTable 的单元格中创建一个链接。
所以我复制了[这个页面](http://www.wicket-library.com/wicket-examples/repeater/wicket/bookmarkable/org.apache.wicket.examples.repeater.DataTablePage?0)中的例子，但我从检票口得到运行时错误：

最后一个原因：找不到关联的标记文件。ActionPanel：[ActionPanel [组件 id = 单元]]

这是我的一些代码：

```
public GroupsList(final PageParameters parameters)
{
  ArrayList<IColumn> columns = new ArrayList<IColumn>();
  columns.add(new AbstractColumn<Group>(new Model<String>("Actions"))
    {
        public void populateItem(Item<ICellPopulator<Group>> cellItem, String componentId,
            IModel<Group> model)
        {
            cellItem.add(new ActionPanel(componentId, model));
        }
    });
    add(new DefaultDataTable("table", columns, new GroupDataProvider(), 8));
} 
```

这是我的 ActionPanel

```
class ActionPanel extends Panel
{
    public ActionPanel(String id, IModel<Group> model)
    {
        super(id, model);
        add(new Link("select")
        {
            @Override
            public void onClick()
            {
                PageParameters pp = new PageParameters();
                setResponsePage(new HomePage(pp));
            }
        });
    }
} 
```

任何想法的根本原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:13:01.077

从错误消息来看，您缺少 ActionPanel.html。要么是命名错误，放错了地方，要么完全失踪了。随着面板的发展，他们需要他们的标记。在提到的示例的情况下，标记文件被“隐藏”为[BasePage$ActionPanel.html](http://www.wicket-library.com/wicket-examples/repeater/wicket/bookmarkable/org.apache.wicket.examples.source.SourcesPage?SourcesPage_class=org.apache.wicket.examples.repeater.DataTablePage&source=BasePage%24ActionPanel.html)，因为 ActionPanel 是 BasePage 的内部类。

# uitableview - UITableViewCell 的 IamgeView 框架

> ID：11967324
> 
> 赞同：0
> 
> 时间：2012-08-15T09:58:03.570
> 
> 标签：uitableview, uiimageview

我正在尝试在 UITableViewCell 中打印 UIImageView 的框架，但我得到的是 {{0,0},{0,0}}

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    if(cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        cell.textLabel.font = [UIFont fontWithName:@"Arial" size:13.0f];        
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        //cell.imageView.frame = CGRectMake(2, 2, 38, 38);
    }

    NSString *imageName = [[itemsArr objectAtIndex:indexPath.row] objectForKey:@"image"];
    cell.imageView.image = [UIImage imageNamed:imageName];
    cell.textLabel.text = [[itemsArr objectAtIndex:indexPath.row] objectForKey:@"title"];

    NSLog(@"Image Frame : %@", NSStringFromCGRect([cell.imageView frame]));

    return cell;
} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:12:31.783

试试这个，我在你的代码中添加了我的标记

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    if(cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        cell.textLabel.font = [UIFont fontWithName:@"Arial" size:13.0f];        
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        //cell.imageView.frame = CGRectMake(2, 2, 38, 38);
    }

    NSString *imageName = [[itemsArr objectAtIndex:indexPath.row] objectForKey:@"image"];
    cell.imageView.image = [UIImage imageNamed:imageName];

    /* EDITED CODE START */
    CGFloat x = cell.imageView.image.origin.x;
    CGFloat y = cell.imageView.image.origin.y;
    CGFloat width = cell.imageView.image.size.width;
    CGFloat height = cell.imageView.image.size.height;
    cell.imageView.frame = CGRectMake(x,y,width,height);
    /* EDITED CODE END */

    cell.textLabel.text = [[itemsArr objectAtIndex:indexPath.row] objectForKey:@"title"];

    NSLog(@"Image Frame : %@", NSStringFromCGRect([cell.imageView frame]));

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:14:29.993

```
@implementation UITableViewCell (BrowseHistoryView)

- (void)layoutSubviews
{
    [超级布局子视图];

    如果（是电话）
    {
        self.imageView.frame = CGRectMake(5, 3, 18.0f, 18.0f);
    }
    别的
    {
        self.imageView.frame = CGRectMake(10, 15, 18.0f, 18.0f);
    }
}

@结尾

```

# c# - 在 .NET Compact 中模拟曲线图

> ID：11967331
> 
> 赞同：2
> 
> 时间：2012-08-15T09:58:52.077
> 
> 标签：c#, .net, graph, compact-framework, geometry

我正在使用 .NET Compact 并创建对数刻度。我目前有一个保存要绘制的值的列表，然后将其转换为点数组，然后 Graphics.DrawLines() 方法将获取它们并在每个点之间画一条线。但是，您可以想象，这可能看起来参差不齐且不稳定。由于 .NET Compact 没有 Graphics.DrawCurve() 方法等，我想知道是否有人知道在可以模拟曲线图的点之间创建点的好方法？理想情况下，创建点的东西可能出现在点之间的样条线上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:56:08.290

好吧，我不能说我花时间去研究这个并理解正在发生的一切背后的数学，但我能够在[VB 论坛](http://www.vbforums.com/showthread.php?613483-Graphics.DrawCurve-length)上找到一个帖子，将样条线分成多个片段来制作情节.

我对代码进行了修改以将其用于 Windows Mobile 的 C#。

它编译，但我不知道如何处理它。

```
private void Spline(Graphics g, Pen pen, Point[] points, double tx) {
  int arrayLength = points.Length;
  int max = arrayLength - 4;
  if (3 < arrayLength) {
    for (int i = 0; i < arrayLength; i++) {
      int n1, n2, n3, n4;
      if (i == 0) {
        n1 = i + 0;
        n2 = i + 0;
        n3 = i + 1;
        n4 = i + 2;
      } else if (i < max) {
        n1 = i + 0;
        n2 = i + 1;
        n3 = i + 2;
        n4 = i + 3;
      } else {
        n1 = max + 1;
        n2 = max + 2;
        n3 = max + 3;
        n4 = max + 3;
      }
      Segment(g, pen, points[n1], points[n2], points[n3], points[n4], tx);
    }
  }
}

private void Segment(Graphics g, Pen pen, Point pt0, Point pt1, Point pt2, Point pt3, double tx) {
  int pointCount = 4;
  double sx1 = tx * (pt2.X - pt0.X);
  double sy1 = tx * (pt2.Y - pt0.Y);
  double sx2 = tx * (pt3.X - pt1.X);
  double xy2 = tx * (pt3.Y = pt2.Y);
  double a1 = sx1 + sx2 + 2 * pt1.X - 2 * pt2.X;
  double a2 = sy1 + xy2 + 2 * pt2.Y - 2 * pt2.Y;
  double b1 = -2 * sx1 - sx2 - 3 * pt1.X + 3 * pt2.X;
  double b2 = -2 * sy1 - xy2 - 3 * pt1.Y + 3 * pt2.Y;
  double c1 = sx1;
  double c2 = sy1;
  double d1 = pt1.X;
  double d2 = pt1.Y;
  for (int i = 0; i < pointCount; i++) {
    double x = (double)i / pointCount;
    double xSq = x * x; // x^2
    double xCu = x * xSq; // x^3
    double f1 = a1 * xCu + b1 * xSq + c1 * x + d1; // f(x) = A x^3 + B x^2 + C x + D
    double f2 = a2 * xCu + b2 * xSq + c2 * x + d2; // f(x) = A x^3 + B x^2 + C x + D
    double dx = Math.Floor(f1);
    double dy = Math.Floor(f2);
    g.DrawRectangle(pen, (int)dx, (int)dy, 1, 1); // calculated points
  }
  g.DrawRectangle(pen, pt0.X, pt0.Y, 1, 1); // original point
} 
```

我不知道为您建议什么值`double tx`。你只需要玩弄它。

这可能会让您获得一些里程，但我真的不知道这会如何为您添加积分......除非您编辑代码以包含一些中间点。

一旦你解决了它，用一些最终结果的屏幕截图编辑你的帖子（如果你不介意的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:26:29.503

然后你想看看实现一些你自己的图形方法。根据您想要的确切结果，您可以使用各种现有的和有据可查的方法。在一般计算机图形学和在线书籍中都可以找到很多内容。例如，请参阅下面链接中的堆栈溢出文章作为起点：

[高效的线条平滑](https://stackoverflow.com/q/5829437/964043)

# erlang - Erlang：透析器对于一个大项目来说非常慢

> ID：11967334
> 
> 赞同：5
> 
> 时间：2012-08-15T09:58:56.050
> 
> 标签：erlang, dialyzer

Scalaris[键值存储](https://code.google.com/p/scalaris/)是一个包含约 100 个模块的大型 Erlang 项目。我正在这个项目中实施一个新模块，并且对透析器对项目进行一次完整检查需要多长时间感到震惊。在我的机器上运行`make dialyzer`大约需要 200 秒，这对于实施更改时的频繁测试来说是难以忍受的。

`make dialyzer`运行以下命令来启动透析器：

```
/usr/lib/erlang/bin/dialyzer -Dtid_not_builtin -Dwith_export_type_support  \
        -DNO_FILE_SENDFILE -Dhave_cthooks_support -Dhave_callback_support  \
        -Werror_handling -Wrace_conditions -Wunmatched_returns -I include/ \
        -I contrib/yaws/include/ -I contrib/log4erl/include/ \
        --src -c src src/*/ test/unittest_helper.erl test/tester*.erl \
                          test/mockup*.erl test/erl_id_trans.erl \
                          test/measure_util.erl test/scalaris_cth.erl \
        --no_native 
```

我想我应该只能在 的参数列表中包含我的模块所需的文件`--src`，但是该列表可能非常大，归结为包含给定 100 的 90 个文件。有没有更好的方法来加快速度假设在后续运行之间只有一个模块会发生变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:21:00.247

如果其余模块在更改模块中没有调用，那么您可以将它们添加到您的 PLT 中，并且不会每次都检查它们。但是，如果他们确实有调用，那么如果您更改更改模块中的代码，则无法确保这些调用的结果相同。

```
dialyzer --add_to_plt <unchanged modules> 
```

如果你有一台多核机器，你可能还想使用 Erlang R15B02（在我写这篇文章的时候还没有发布，但可以在[https://github.com/erlang/otp](https://github.com/erlang/otp)的“maint”分支上构建） ，它有一个并行版本的 Dialyzer。

# java - 不同文件中的 Java 类编译

> ID：11967337
> 
> 赞同：1
> 
> 时间：2012-08-15T09:59:03.217
> 
> 标签：java, design-patterns, compilation

我一直在读一本设计模式书，里面全是java。我只是对java有一些基本的了解。我现在正在尝试实现一些代码，但我面临一些困难。例如，不同的文件中编写了不同的类。所有这些类都被制作成一个包。现在，当我尝试对 main 所在的 java 文件进行 javac 处理时，它抱怨找不到其他类（在本例中为 WeatherData 和 CurrentConditionsDisplay）。

这是主文件：

```
package headfirst.src.observer.weatherobservable;

public class WeatherStation {

    public static void main(String[] args) {
        WeatherData weatherData = new WeatherData();
        CurrentConditionsDisplay currentConditions = new CurrentConditionsDisplay(weatherData);`
        //StatisticsDisplay statisticsDisplay = new StatisticsDisplay(weatherData);
        //ForecastDisplay forecastDisplay = new ForecastDisplay(weatherData);

        weatherData.setMeasurements(80, 65, 30.4f);
        weatherData.setMeasurements(82, 70, 29.2f);
        weatherData.setMeasurements(78, 90, 29.2f);
    }
} 
```

我只需要知道如何正确编译文件。书中的java代码很基础，我能看懂。但我就是无法编译文件！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:02:40.993

我猜您正在尝试通过命令行编译文件。我看到您有软件包，请先在[Eclipse](http://www.eclipse.org/downloads/)之类的 IDE 中尝试此操作，以了解“如何运行程序？”

通过命令行，您需要传递适当的类路径，您可以在稍后阶段学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:00:38.393

您可能需要将所有文件一起编译。例如

```
$ javac *.java 
```

或者，您可以将其他人构建到 .jar 文件中并在命令行上引用该文件，例如

```
$ javac -cp my.jar File.java 
```

等等

# python - NumPy：3 字节、6 字节类型（又名 uint24、uint48）

> ID：11967339
> 
> 赞同：7
> 
> 时间：2012-08-15T09:59:05.410
> 
> 标签：python, numpy, bigdata

NumPy 似乎缺乏对 3 字节和 6 字节类型（又名`uint24`和`uint48`. 我有一个使用这些类型的大型数据集，并希望将其提供给 numpy。我目前在做什么（对于 uint24）：

```
import numpy as np
dt = np.dtype([('head', '<u2'), ('data', '<u2', (3,))])
# I would like to be able to write
#  dt = np.dtype([('head', '<u2'), ('data', '<u3', (2,))])
#  dt = np.dtype([('head', '<u2'), ('data', '<u6')])
a = np.memmap("filename", mode='r', dtype=dt)
# convert 3 x 2byte data to 2 x 3byte
# w1 is LSB, w3 is MSB
w1, w2, w3 = a['data'].swapaxes(0,1)
a2 = np.ndarray((2,a.size), dtype='u4')
# 3 LSB
a2[0] = w2 % 256
a2[0] <<= 16
a2[0] += w1
# 3 MSB
a2[1] = w3
a2[1] <<=8
a2[1] += w2 >> 8
# now a2 contains "uint24" matrix 
```

虽然它适用于 100MB 的输入，但它看起来效率低下（想想 100s GB 的数据）。有没有更有效的方法？例如，创建一种特殊类型的只读视图来屏蔽部分数据会很有用（“具有两个 MSB 始终为零的 uint64”类型）。我只需要对数据进行只读访问。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T10:11:27.533

我不相信有一种方法可以满足您的要求（它需要未对齐的访问，这在某些架构上效率非常低）。我从[文件中读取和存储任意字节长度整数的](https://stackoverflow.com/questions/11508010/reading-and-storing-arbitrary-byte-length-integers-from-a-file/11511453#11511453)解决方案可能更有效地将数据传输到进程内数组：

```
a = np.memmap("filename", mode='r', dtype=np.dtype('>u1'))
e = np.zeros(a.size / 6, np.dtype('>u8'))
for i in range(3):
    e.view(dtype='>u2')[i + 1::4] = a.view(dtype='>u2')[i::3] 
```

`strides`您可以使用构造函数参数获得非对齐访问：

```
e = np.ndarray((a.size - 2) // 6, np.dtype('<u8'), buf, strides=(6,)) 
```

但是，每个元素都将与下一个元素重叠，因此要实际使用它，您必须在访问时屏蔽高字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-07T07:34:18.450

对此有一个答案： [如何创建包含 24 位整数的 Numpy dtype？](https://stackoverflow.com/questions/12080279/how-do-i-create-a-numpy-dtype-that-includes-24-bit-integers/34128171#34128171)

它有点难看，但正是你想要的：允许你索引你的 ndarray，就像它有一个 dtype 一样，`<u3`你可以`memmap()`从磁盘获取大数据。
您仍然需要手动应用位掩码来清除第四个重叠字节，但这可以在访问后应用于切片（多维）数组。

诀窍是滥用 ndarray 的“步幅”部分，以便索引工作。为了让它在不抱怨限制的情况下工作，有[一个特殊的技巧](http://www.scipy-lectures.org/advanced/advanced_numpy/#example-fake-dimensions-with-strides)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:20:43.883

使用下面的代码，您可以读取编码为大端或小端的任何大小的整数：

```
def readBigEndian(filename, bytesize):
    with (open(filename,"rb")) as f:
         str = f.read(bytesize)
         while len(str)==bytesize:
             int = 0;
             for byte in map(ord,str):
                 print byte
                 int = (int << 8) | byte
             yield(int)
             str = f.read(bytesize)

def readLittleEndian(filename, bytesize):
    with (open(filename,"rb")) as f:
         str = f.read(bytesize)
         while len(str)==bytesize:
             int = 0;
             shift = 0
             for byte in map(ord,str):
                 print byte
                 int |= byte << shift
                 shift += 8
             yield(int)
             str = f.read(bytesize)

for i in readLittleEndian("readint.py",3):
    print i 
```

# javascript - 从远程 URL 检索 javascript cookie 列表

> ID：11967340
> 
> 赞同：1
> 
> 时间：2012-08-15T09:59:08.577
> 
> 标签：javascript, cookies

如何从远程 URL 创建 javascript cookie 列表（例如 google analytics _utmz cookie）？

我可以通过获取 http 标头来获取 http cookie。有没有办法在远程 URL 上执行“document.cookie”？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:20:55.053

出于明显的安全原因，网站不可能访问其他网站设置的 cookie。

例如，Alice 访问 Bob 的网站并登录。Bob 的网站在 Alice 的浏览器中设置了一个 cookie，证明她已登录。Alice 访问了 Malory 的网站。如果 Malory 可以读取 Bob 为 Alice 设置的 cookie，那么 Malory 可以轻松地伪装成 Alice，并访问 Alice 存储在 Bob 站点上的所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:03:23.197

您只能获取站点所在域的 cookie。

唯一的其他选择是使用来自该域的 iframe，但这仍然需要您控制相关域才能对信息执行任何操作。

编辑：

如果您尝试从与网页相同的域获取 cookie，请使用：

```
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
} 
```

getCookie("分析_utmz");

（参见备受憎恨的[W3Schools](http://www.w3schools.com/js/js_cookies.asp)中的示例）

# jquery - jquery - 每个循环都有条件给出错误的结果

> ID：11967343
> 
> 赞同：2
> 
> 时间：2012-08-15T09:59:13.457
> 
> 标签：jquery

我正在循环一个对象，并且有条件地我正在安慰结果。但我得到了所有 3 个结果，而不是只得到 2 个。我的代码有什么问题？

请问有什么建议吗？

我的代码：

```
 var processModules = function (mData) {
    var lcalmData = obj = {'content':'new content','navigation':'newNavigation','form':'newform'}; var title;
    $('body').append(
        $.each(lcalmData, function (i,val) {
            title = (i === 'content' || i === 'navigation')  ? $('<div />') : i === 'form' ? $('<form />') : null;
            return title;
        } )  
    )
} 
```

[jsfiddle](http://jsfiddle.net/WsQ6K/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:03:47.410

这条线是有问题的：

`val === 'content' || 'navigation'`

我想你的意思是检查是否`val`等于这些值之一？) 但它不是这样工作的：由于`===`操作员优先级高于`||`一，它本质上与...相同

`(val === 'content') || 'navigation'`

...换句话说，总是一个真实的价值。

您的意图可能会被重写，就像...

`... (i === 'content' || i === 'navigation')`

...因为它是应该检查的索引（键），而不是值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:22:23.393

[http://jsfiddle.net/WsQ6K/2/](http://jsfiddle.net/WsQ6K/2/)

您使用的是 val 而不是 i 即属性名称而不是值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:04:46.583

你需要这样做：

```
var title = ( val === 'content' || val === 'navigation' ) ? val.type  : null; 
```

括号 () 可能不是必需的。您现在正在测试 val === 'content' 或 'navigation' 是否为 'true'。事实上，后者总是正确的。

# sproutcore - 如何在 Sproutcore 中离开状态？

> ID：11967348
> 
> 赞同：1
> 
> 时间：2012-08-15T09:59:40.020
> 
> 标签：sproutcore

怎么可能在 Sproutcore 中留下一个状态？实际上，我正在寻找相当于：

```
MyApp.statechart.gotoState('StateA'); 
```

是否有另一种方法可以手动离开状态而不是通过`substatesAreConcurrent: NO`属性控制它？例如：StateA 和 StateB 是并发的。StateB 有两个嵌套的子状态：StateBa 和 StateBb。当我从 StateBa 切换到 StateBb 时，我想离开 StateA。这怎么可能？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T15:24:44.877

给定一个状态图：

```
App.statechart = SC.Statechart.create({

   substatesAreConcurrent: YES,

   stateA: SC.State.extend({
   }),

   stateB: SC.State.extend({

      initialSubstate: 'stateBa'

      stateBa: SC.State.extend({
      }),

      stateBb: SC.State.extend({
      })

   })

}); 
```

您的应用程序同时在 stateA 和 stateB 内。为了在从 stateBa->stateBb 转换时从 stateA 转换到其他状态，我们必须如下增强 stateA：

```
 stateA: SC.State.extend({

      initialSubstate: 'stateAa',

      stateAa: SC.State.extend({
      }),

      stateAb: SC.State.extend({
      })

   }), 
```

实现这一点的惯用方法是在两种状态下处理相同的事件，比如“更改”，如下所示：

```
App.statechart = SC.Statechart.create({

   substatesAreConcurrent: YES,

   stateA: SC.State.extend({

      initialSubstate: 'stateAa',

      stateAa: SC.State.extend({

         change: function() {
            this.gotoState('stateAb');
         }

      }),

      stateAb: SC.State.extend({
      })

   }),

   stateB: SC.State.extend({

      initialSubstate: 'stateBa'

      stateBa: SC.State.extend({

         change: function() {
            this.gotoState('stateBb');
         }

      }),

      stateBb: SC.State.extend({
      })

   })

}); 
```

这样，发送“更改”事件会导致两个并发状态的状态转换。但是，如果您有兴趣离开并发，您可以像这样增强您的状态图：

```
App.statechart = SC.Statechart.create({

   stateSuperA: SC.State.extend({
      substatesAreConcurrent: YES,

      stateA: SC.State.extend({

         initialSubstate: 'stateAa',

         stateAa: SC.State.extend({

            change: function() {
               this.gotoState('stateAb');
            }

         }),

         stateAb: SC.State.extend({

            join: function() {
               this.gotoState('stateSuperB');
            }

         })

      }),

      stateB: SC.State.extend({

         initialSubstate: 'stateBa'

         stateBa: SC.State.extend({

            change: function() {
               this.gotoState('stateBb');
            }

         }),

         stateBb: SC.State.extend({
         })

      })

   }),

   stateSuperB: SC.State.extend({
   })

}); 
```

在收到上面的“加入”事件后，您的应用程序将不再处于并发子状态，而只是处于 stateSuperB。

# vb.net - 使用 VB.Net 进行串行端口通信（端口不显示）

> ID：11967360
> 
> 赞同：0
> 
> 时间：2012-08-15T10:00:23.373
> 
> 标签：vb.net, winforms, serial-port

首先，我不太擅长编程，我试图在我的代码中尽可能地解释清楚。我一直在尝试编写一个程序，使用户能够使用简单的定制红外调制解调器通过串行端口聊天（接收和传输）消息。我已经构建了调制解调器，现在尝试编写自己的简单程序，而不是使用终端或其他已编写的程序（即 Tera Term）。顺便说一句，我在 Windows 7 上并使用 Microsoft Visual Express 2010 环境

我根据本网站上的教程编写了以下代码。（以防万一） [MSDN on Serial Port](http://msdn.microsoft.com/en-us/library/30swa673%22%5DMSDN%20Serial%20Port%20Class%20reference)

问题（截至目前）组合框 cmbComPort 似乎没有捕获我计算机上的任何可用端口。我怀疑可能没有！所以我检查了一下，这就是我发现的。基于此，我假设我的计算机上有一个串行端口，因此这不是问题的根源（否则请告诉我，因为我不太确定）。我运行调试并弹出一条错误消息。然后我构建程序来测试它。两个错误消息都附在下面

问题 1\. 似乎下面的代码没有捕获可用端口并将它们存储在 myPort 数组中。

```
'procedure to detect all available ports and store them in the myPort array
    For Each port_name As String In IO.Ports.SerialPort.GetPortNames
        Dim myPort As New IO.Ports.SerialPort(port_name)
        If myPort.IsOpen = True Then
            cmbComPort.Items.Add(port_name)
        End If
    Next 
```

我想知道端口本身是否有问题并且未被检测到。但是，使用下面的代码，我能够确认 COM1 存在并且正在工作。

```
Imports System
Imports System.IO.Ports

Module SerialPortExample

Sub Main()
' Get a list of serial port names. 
Dim ports As String() = SerialPort.GetPortNames()

Console.WriteLine("The following serial ports were found:")

' Display each port name to the console. 
Dim port As String 
For Each port In ports
    Console.WriteLine(port)
Next port

Console.ReadLine()

End Sub 
End Module 
```

这是控制台输出的内容 -

找到以下串行端口：COM1

所以，港口就在那里。问题可能在于（我不完全确定）这部分代码？

```
'procedure to detect all available ports and store them in the myPort array
For Each port_name As String In IO.Ports.SerialPort.GetPortNames
    Dim myPort As New IO.Ports.SerialPort(port_name)
    cmbComPort.Items.Add(port_name)
Next 
```

无论如何我可以在这一行之后检查 myPort 数组的内容吗？以及 cmbComPort 的项目？

还有一件事，这是一个接受任何额外功能的项目（编写我自己的程序绝对是其中之一）。如果你们能对这些功能提出任何想法，我将不胜感激，无论是与串行端口通信还是程序接口本身有关。我可以想到一些，例如将聊天保存到文件、加载聊天文件、帮助/教程文件 - 一旦我发现上述错误，所有这些都将被实施。此外，我在想无论如何我可以绘制一个“泡泡聊天”来显示对话而不是纯富文本框吗？那样就好了。

提前致谢！:D [项目文件](http://dl.dropbox.com/u/88282904/Version%201.3.rar)

代码：

```
'Chatty Raffy Version 1.3
'This is a simple program to demonstrate Serial Ports communication via a simple custom made IR Modem. 

Imports System
Imports System.ComponentModel
Imports System.Threading
Imports System.IO.Ports

Public Class frmMain

Dim myPort As Array  'an array to store list of available ports

Delegate Sub SetTextCallback(ByVal [text] As String) 'Added to prevent threading errors during receiveing of data

Private Sub frmMain_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)

    'Fill up the cmbBaudRate Combo box to common baud rates used
    cmbBaudRate.Items.Add(9600)
    cmbBaudRate.Items.Add(19200)
    cmbBaudRate.Items.Add(38400)
    cmbBaudRate.Items.Add(57600)
    cmbBaudRate.Items.Add(115200)

    'procedure to detect all available ports and store them in the myPort array
    For Each port_name As String In IO.Ports.SerialPort.GetPortNames
        Dim myPort As New IO.Ports.SerialPort(port_name)
        If myPort.IsOpen = True Then
            cmbComPort.Items.Add(port_name)
        End If
    Next

    'initiate the combo boxes
    cmbComPort.SelectedIndex = 0  'set cmbComPort text to the first COM port detected
    cmbBaudRate.SelectedIndex = 0    'set cmbBaudRate text to the first Baud rate on the list
    cmbParity.SelectedIndex = 0    'set cmbParity text to the first Baud rate on the list
    cmbStopBit.SelectedIndex = 0    'set cmbStopBit text to the first Baud rate on the list

    'btnDisconnect.Enabled = False   'disable the disconnect button

End Sub

'open the selected serial port and start the connection
Private Sub btnConnect_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnConnect.Click
    SerialPort1.PortName = cmbComPort.Text      'set Serial Port to the selected COM port 
    SerialPort1.BaudRate = cmbBaudRate.Text      'set Baud rate to the selected value Baud rate
    SerialPort1.Parity = cmbParity.Text     'set parity setting to the selected value 
    SerialPort1.StopBits = cmbStopBit.Text  'set stop bit setting to the selected value

    SerialPort1.DataBits = 8    'use the default 8 bit for data bit length

    SerialPort1.Open()      'open the chosen serial port

    btnConnect.Enabled = False      'disable the Connect button
    btnDisconnect.Enabled = True    'enable the Disconnect button
    picboxDisconnect.Visible = False 'disable the disconnect picture
    picboxConnect.Visible = True 'enable the disconnect picture
End Sub

'close the serial port currently in used, hence closing the connection
Private Sub btnDisconnect_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnDisconnect.Click
    SerialPort1.Close()     'close the used Serial Port

    btnConnect.Enabled = True  'esable the Connect button
    btnDisconnect.Enabled = False  'disable the Disconnect button
    picboxDisconnect.Visible = True 'enable the 'disconnect' picture
    picboxConnect.Visible = False 'disable the 'connect' picture
End Sub

'send the text contained in the txtText to the serial port in ASCII using the 'SEND' key
Private Sub btnSend_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
    SerialPort1.Write(txtTransmit.Text & vbCr)
End Sub

'detect data at the serial port and call ReceivedText automatically 
Private Sub SerialPort1_DataReceived(ByVal sender As Object, ByVal e As System.IO.Ports.SerialDataReceivedEventArgs)
    ReceivedText(SerialPort1.ReadExisting())
End Sub

'read incoming messages at serial port once data is detected
Private Sub ReceivedText(ByVal [text] As String)
    'compare the ID of the Creating Thread to the ID of the Calling Thread
    If Me.rtbReceived.InvokeRequired Then
        Dim x As New SetTextCallback(AddressOf ReceivedText)
        Me.Invoke(x, New Object() {(text)})
    Else
        Me.rtbReceived.Text &= [text]
    End If
End Sub

'this section prevents user from making any changes to the current connection without disconnecting

Private Sub cmbComPort_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)
    If SerialPort1.IsOpen = False Then
        SerialPort1.PortName = cmbComPort.Text
    Else
        'pop an error message if user try to change port without closing the current port in use
        MsgBox("Please close the currently used port before making any changes to the connection setting", vbCritical)
    End If
End Sub

Private Sub cmbBaudRate_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbBaudRate.SelectedIndexChanged
    If SerialPort1.IsOpen = False Then
        SerialPort1.BaudRate = cmbBaudRate.Text
    Else
        'pop an error message if user try to change Baud rate without closing the current port in use
        MsgBox("Please close the currently used port before making any changes to the connection setting", vbCritical)
    End If
End Sub

Private Sub cmbParity_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbBaudRate.SelectedIndexChanged
    If SerialPort1.IsOpen = False Then
        SerialPort1.Parity = cmbParity.Text
    Else
        'pop an error message if user try to change Baud rate without closing the current port in use
        MsgBox("Please close the currently used port before making any changes to the connection setting", vbCritical)
    End If
End Sub

Private Sub cmbStopBit_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbBaudRate.SelectedIndexChanged
    If SerialPort1.IsOpen = False Then
        SerialPort1.StopBits = cmbStopBit.Text
    Else
        'pop an error message if user try to change Baud rate without closing the current port in use
        MsgBox("Please close the currently used port before making any changes to the connection setting", vbCritical)
    End If
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-15T20:01:14.297

好吧，我之前确实误解了端口是“开放”或“关闭”的含义，并且被我的朋友指出。从那时起，我将那部分代码修复为

```
 'procedure to detect all available ports and store them in the myPort array
    For Each port_name As String In IO.Ports.SerialPort.GetPortNames
    Dim myPort As New IO.Ports.SerialPort(port_name)
        cmbComPort.Items.Add(port_name)
    Next 
```

@hans：实际上电路已经在实验室的计算机上使用终端红外调制解调器（带有 windows）工作。而且我已经确认使用此代码实际上，串行端口确实退出并工作

```
Imports System
Imports System.IO.Ports

Module SerialPortExample

Sub Main()
    ' Get a list of serial port names. 
    Dim ports As String() = SerialPort.GetPortNames()

    Console.WriteLine("The following serial ports were found:")

    ' Display each port name to the console. 
    Dim port As String 
    For Each port In ports
        Console.WriteLine(port)
    Next port

    Console.ReadLine()

End Sub 
End Module 
```

这是控制台输出的内容 -

找到以下串行端口：COM1

所以，港口就在那里。问题可能在于（我不完全确定）这部分代码？

```
'procedure to detect all available ports and store them in the myPort array
    For Each port_name As String In IO.Ports.SerialPort.GetPortNames
        Dim myPort As New IO.Ports.SerialPort(port_name)
        cmbComPort.Items.Add(port_name)
    Next 
```

无论如何我可以在这一行之后检查 myPort 数组的内容吗？以及 cmbComPort 的项目？

# java - 多线程中的 ExecuteQuery 关闭 hsqldb 数据库连接

> ID：11967361
> 
> 赞同：1
> 
> 时间：2012-08-15T10:00:26.343
> 
> 标签：java, multithreading, hsqldb

我正在尝试改进从 hsqldb 中选择数据的函数，因此我尝试在多个线程中运行它，但出现以下异常：

```
java.sql.SQLNonTransientConnectionException: connection exception: closed
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCStatementBase.checkClosed(Unknown Source)
    at org.hsqldb.jdbc.JDBCStatementBase.getResultSet(Unknown Source)
    at org.hsqldb.jdbc.JDBCStatement.getResultSet(Unknown Source)
    at org.hsqldb.jdbc.JDBCStatement.executeQuery(Unknown Source) 
```

这是我每次都尝试在新线程中运行的函数：

```
public List<String> getAllClassNames(boolean concrete) throws ClassMapException {
        List<String> result = new ArrayList<String>();

        try {
            ResultSet rs = null;
            Connection connection = DBConnection.getConnection();
            Statement st = connection.createStatement();
            if (concrete)
                rs = st.executeQuery("select cd_name from CLASS_DESCRIPTORS where CD_CONCRETE=true  order by cd_name");
            else
                rs = st.executeQuery("select cd_name from CLASS_DESCRIPTORS order by cd_name");
            while (rs.next()) {
                result.add(rs.getString("cd_name"));
            }
        } catch (SQLException e) {
            _log.error("SQLException while retrieve all class names." + e.getMessage(), e);
            throw new ClassMapException("SQLException while retrieve all class names." + e.getMessage(), e);
        } finally {
            DBConnection.closeConnection();
        }
        return result;
    } 
```

我读到由不同的线程执行多个选择会关闭连接。这是真的吗？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:15:22.937

似乎连接已关闭，因为该功能使用相同的连接并在第一次使用后关闭。检查您的 DBConnection 类是如何编写的。

代码中还有其他问题，例如语句 st 永远不会关闭，或者语句没有准备好然后重用。

您还可以使用 HSQLDB 中的 ARRAY_AGG 函数来返回您的数组，而不是自己创建它。下面给出了指南的链接和使用示例。

[http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#N12538](http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#N12538)

```
select array_agg(cd_name order by cd_name) as arr from CLASS_DESCRIPTORS where CD_CONCRETE=true

Array array = rs.getArray(1) 
```

该数组是一个 JDBC 数组，可以通过其 JDBC 方法进行引用。

# c# - 如何使用 c# 或 xml 放大 windows phone 的页面？

> ID：11967362
> 
> 赞同：0
> 
> 时间：2012-08-15T10:00:27.313
> 
> 标签：c#, xml, visual-studio, silverlight, windows-phone

嘿，我正在开发一个应用程序，我必须放大页面或页面的一部分，因为文本是小字体.. 像网络浏览器这样的缩放工具将是完美的.. 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:47:25.197

[我会先在网上多看看，你可能会发现以前在 SO](https://stackoverflow.com/questions/8870755/detect-pinch-zoom-in-windows-phone-7-1)上问过这类问题。或者看看[别人做了什么](http://www.codeproject.com/Articles/335069/Nice-panning-and-zooming-in-Windows-Phone-7)，用[不同的方法](http://www.frenk.com/2011/03/windows-phone-7-correct-pinch-zoom-in-silverlight/)。这是一个很好的问题，但之前可能有人问过。希望这可以帮助 ：）

# php - 如何执行 php 文件，如“index.php?go=....”

> ID：11967364
> 
> 赞同：0
> 
> 时间：2012-08-15T10:00:31.383
> 
> 标签：php, forms

对于我的 html 文件，我在 index.php 中有这个：

```
 <?php
      $go = $_GET['go'];

      if(!empty($go)) {

        if(is_file("page/$go.html")) include "page/$go.html";

        else echo "<br />Page doesn't exist yet, we're working on it :-(";
      }

      else include "page/start.html";

    ?> 
```

我现在想以相同的方式包含一个带有表单的 php 文件。我这样要求一种形式：

```
<form name='add_position' method="post" action="page/pr_edit.php" > 
```

然后带有验证的整个表单在 pr_edit 文件中：

```
if (isset($_POST['add_position'])) {} 
```

目前该表单在新窗口中打开，我需要将其作为其余的 html 文件包含在我的主 div 中。

正确的方法是什么？我应该将名称更改为 pr_edit.html 吗？它给了我想要的效果，但我不确定它是否正确，因为所有验证都是这个文件？

# php - 表单适用于 Chrome 和 IE，但不适用于 firefox

> ID：11967374
> 
> 赞同：0
> 
> 时间：2012-08-15T10:01:14.940
> 
> 标签：php, html, forms

我创建了一个适用于 Chrome 和 IE 的表单，但不适用于 Firefox。提交时，它只是进入一个空白屏幕，其中包含我的 PHP 文件的 URL `sendContact.php`，.

这是标记：

```
<form action="script/sendContact.php" method="post" class="contactForm">
  <div class="textBoxDivs">
    <label>Name</label>
    <br />
    <input type="text" id="name" name="name" size="40" class="textField"/>
  </div>
  <div class="textBoxDivs">
    <label>Phone</label>
    <br />
    <input type="text" id="phone" name="phone" size="40"class="textField"/>
  </div>
  <div class="textBoxDivs">
    <label>Email</label>
    <br />
    <input type="text" id="email" name="email" size="40"class="textField"/>
  </div>
  <div class="textArea">
    <label>Please describe what services you will require and your proposed budget.</label>
    <br />
    <textarea id="message" cols="40" rows="7" name="message" class="textAreaField">    </textarea>
  </div>
  <div class="formButtonDiv">
    <input type="submit" value="submit" class="formBut"/>
    <input type="reset" value="reset" class="formBut" />
  </div>
</form> 
```

PHP如下：

```
$name       = $_POST['name'];
$email      = $_POST['email'];
$message    = $_POST['message'];
$phone      = $_POST['phone'];
$formcontent= "From: $name \n Email: $email \n Phone: $phone \n Message: $message";
$recipient  = "al@gmail.com";
$subject    = "Contact Form";
$mailheader = "From: $userEmail \r\n";

if (mail($recipient, $subject, $formcontent, $mailheader, $email))
{
  header ("Location: thankYou.html");
} else {
  echo "mail was not sent";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:14:46.713

我现在已经在 Firefox 上试过了，一切都很顺利。顺便说一句，查看您的 php 代码，您应该在发送之前检查表单是否正常。我试过用空字段，我猜你只是收到一封没有人发来的邮件..

尝试类似：

```
$name       = trim($_POST['name']);
$email      = trim($_POST['email']);
$message    = trim($_POST['message']);
$phone      = trim($_POST['phone']);

$formcontent= "From: $name \n Email: $email \n Phone: $phone \n Message: $message";
$recipient  = "alverdeja88@gmail.com";
$subject    = "Contact Form";
$mailheader = "From: $userEmail \r\n";

if (!empty($name) 
  && !empty($email)
  && !empty($message)
  && mail($recipient, $subject, $formcontent, $mailheader, $email))
{
  header ("Location: http://www.dukecitygrafx.com/thankYou.html");
}
else
{
  echo "mail was not sent";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:10:04.250

1.  删除 html 文件中的新行（表单标记！）。Firefox 可能会遇到问题来解决这个问题！

2.  `die("hello");`在您的 sendContact.php 中尝试

所以你可以检查你的脚本是否会被加载

```
<?php 
die("hello");

$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$phone = $_POST ['phone'];
$formcontent="From: $name \n Email: $email \n Phone: $phone \n Message: $message";
$recipient = "alverdeja88@gmail.com";
$subject = "Contact Form";
$mailheader = "From: $userEmail \r\n";
if (mail($recipient, $subject, $formcontent, $mailheader, $email)) {
  header ("Location: http://www.dukecitygrafx.com/thankYou.html");
  die();
} else {
  echo "mail was not sent";
}
?> 
```

# python - 是否可以在不使用继承的情况下扩展 Python 类

> ID：11967375
> 
> 赞同：0
> 
> 时间：2012-08-15T10:01:16.993
> 
> 标签：python, class, inheritance, io, monkeypatching

例如，

扩展字符串类，以便打印它会在它前面加上一个制表符或一些空格。然后能够调用它，

```
print 'hello world' 
```

当在标准输出上看到时，会在前面加上制表符（空白）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:06:49.953

是：编辑 Python 的源代码。

说真的：像任何其他编程模型（结构化、OO、建模）一样，Python 对您可以做的事情施加了一些限制。虽然其中一些可能会让人觉得武断或“愚蠢”，但它们都有一个很好的理由（通常是所有其他解决方案的缺点或过去的错误，如果不破坏所有现有代码就无法再修复）。

当你觉得你需要打破规则时，退后一步考虑一下：也许你的“解决方案”是错误的？也许有更好的方法来实现你想要的？

在这种情况下，使用格式：

```
f = '\t%s'
print f % 'hello world' 
```

与您的解决方案不同，这明确地传达了您尝试实现的目标。

也就是说，您可以使用“[猴子修补](https://en.wikipedia.org/wiki/Monkey_patch)”的技术。请注意，这种技术是危险的。在大多数情况下，这意味着使用该技术的人不知道他们在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T10:23:12.380

你想改变字符串类，还是只是`print`你想改变的行为？如果你：

```
from __future__ import print_function 
```

（或使用 Python 3）您可以提供自己的`print`函数，例如：

```
def print(*line, **kwargs):

    args = dict(sep=' ', end='\n', file=None)
    args.update(kwargs) 

    sep  = args['sep']
    end  = args['end']
    file = args['file']

    newlist = [];

    for userln in line:
        newlist.append("\t"+userln)  # prefix the line with a tab

    if file == None:
        file = sys.stdout

    __builtin__.print(sep.join(newlist),end=end,file=file) 
```

# javascript - 将您的 jQuery 代码转换为 Backbone.js 结构

> ID：11967378
> 
> 赞同：2
> 
> 时间：2012-08-15T10:01:24.737
> 
> 标签：javascript, jquery, model-view-controller, backbone.js

我对 Backbone.js 很陌生，但我喜欢 jQuery。然而，我喜欢 Backbone 将代码组织成模型、视图和集合的方式，但我仍然无法理解在编写 JS 代码时如何使用它。

例如，以我在 jQuery 中编写的这个简单代码为例，当用户在输入框中键入时，它会附加一个建议框：

```
// this is the model
var questions = [
    {question: "what is your name"},
    {question: "How old are you"},
    {question: "what is your mothers name"},
    {question: "where do work/or study"}
];

// search data function
function searchData(datas,term){
    return _.filter(datas, function(obj) {
        return ~obj.question.toLowerCase().indexOf(term);
    });
}

// Events
$("#suggestinput").on({
    keyup: function(){
        var results = searchData(questions, this.value);
        $("#suggestions")
            .addClass("active")
            .html(_.reduce(results, function(last, q){
                return last + "<p>" + q.question + "</p>";
             }, ""));
    },
    blur: function () {
        $("#suggestions").removeClass('active');
        $("#suggestions").html(" ");
    },
    focus: function () {
        if ( $(this).val() === "" ) {
            $("#suggestions").addClass('active');
            $("#suggestions").html("<p> start typing a question </p>");
        }
    }
}); 
```

关于使用 Backbone.js 结构构建这样的迷你功能有什么建议吗？我并不是说要编写整个代码，只是一个粗略的指导或解释将不胜感激。

在 JSFiddle 上还有一个此代码的工作示例：http: [//jsfiddle.net/X8geT/1/](http://jsfiddle.net/X8geT/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:43:55.140

*免责声明*：与 Backbone 中的任何解决方案一样，有多种方法可以处理给定问题，以下答案可能完全是矫枉过正，应谨慎使用。

## 定义你的模型

它们将代表您的数据以及应如何处理它。在这里，我将定义一个 Question 模型（空的，但你永远不知道），一个 Questions 集合（定义了一个术语的过滤），以及一个负责存储当前术语和匹配问题的搜索状态控制器：

```
var Question = Backbone.Model.extend();

var Questions = Backbone.Collection.extend({
    model: Question,
    matches: function (term) {
        if (term==="")
            return [];

        term = term.toLowerCase();
        return this.filter(function(model) {
            return model.get('question').toLowerCase().indexOf(term)!==-1
        });
    }
});

var QuestionController = Backbone.Model.extend({
    defaults: {
        term: ""
    },
    initialize: function(opts) {
        this.questions = opts.questions; //known questions
        this.matches = new Questions();  //filtered questions

        //when the term changes, update the matches
        this.on('change:term', function (model, term) {
            this.matches.reset(this.questions.matches(term));
        }, this);
    }
}); 
```

## 定义你的观点

它们将在 DOM 中显示模型的状态，并处理与用户的交互。让我们有一个处理输入的 SearchView 和一个显示当前建议的 SuggestionsView：

```
var SearchView = Backbone.View.extend({
    events: {
        'keyup ': function (e) {
            this.model.set('term', this.$el.val());
        },
        'focus ': function (e) {
            this.trigger('start');
        },
        'blur ': function (e) {
            this.trigger('stop');
        }
    }
});

var SuggestionsView = Backbone.View.extend({
    initialize: function () {
        _.bindAll(this, 'activate', 'deactivate', 'render');
        this.listenTo(this.model.matches, 'reset', this.render);
    },
    activate: function () {
        this.$el.addClass('active');
        this.render();
    },
    deactivate: function () {
        this.$el.removeClass('active');
        this.$el.html(" ");
    },
    render: function () {
        var html = '';

        if (this.model.get("term") === "") {
            html = "<p> start typing a question </p>";
        } else {
            if (this.model.matches.length === 0) {
                html = "<p> No match </p>";
            } else {
                this.model.matches.each(function(model) {
                    html += '<p>'+model.get('question')+'</p>';            
                });
            }
        }        
        this.$el.html(html);
    }
}); 
```

## 将模型和视图结合在一起

实例化、绑定事件和运行事物

```
var questions = new Questions([
    {question: "what is your name"},
    {question: "How old are you"},
    {question: "what is your mothers name"},
    {question: "where do work/or study"}
]);
var controller = new QuestionController({
    questions: questions
});

var vSearch = new SearchView({
    el: '#suggestinput',
    model: controller
});
var vSuggestions=new SuggestionsView({
    el: '#suggestions',
    model: controller
});

vSuggestions.listenTo(vSearch, 'start', vSuggestions.activate);
vSuggestions.listenTo(vSearch, 'stop', vSuggestions.deactivate); 
```

还有一个可以玩的小提琴[http://jsfiddle.net/nikoshr/QSE95/](http://jsfiddle.net/nikoshr/QSE95/)

当然，您可以通过让单个视图处理所有交互来大大简化此操作，但乐趣在哪里呢？

# python - 选择性python字符串替换

> ID：11967379
> 
> 赞同：1
> 
> 时间：2012-08-15T10:01:32.857
> 
> 标签：python, string, function, replace, pi

我正在尝试使用以下 Python 函数`pi`替换。`math.pi`

```
def cleanup(x):
  return x.replace("pi", "math.pi") 
```

我有以下字符串：

```
a = "2*pi"
b = "the pink elephant" 
```

的输出`cleanup(a)`是：`2*math.pi`-- 这很好用！

的输出`cleanup(b)`是`the math.pink elephant`-- 问题：我不想改变“文本”。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:07:59.727

您正在寻找正则表达式，特别是“单词边界”( `\b`) 断言：

```
import re
print re.sub(r'\bpi\b', 'math.pi', "2*pi")
print re.sub(r'\bpi\b', 'math.pi', "the pink elephant") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:04:26.803

听起来你需要一个更复杂的过滤器，你应该看看正则表达式，有一个内置在 Python 中的模块

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

# algorithm - 变化的固定大小数组中的 O(1) 最小值

> ID：11967386
> 
> 赞同：1
> 
> 时间：2012-08-15T10:02:01.890
> 
> 标签：algorithm, math

我有一个包含 32 个数字的数组。最初，每个数字都是 0，尽管它可能并不重要。

我可以随时更改此数组中的一个数字。

我想在这样的更新后快速找到最小值及其索引。有没有办法在 O(1) 时间内做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:20:04.643

几乎你在一个大小为 32 的数组上所做的一切都是`O(1)`. 线性扫描需要 32 次比较，在`O(1)`

O(1) = 常量操作数。如果数组大小为 32（或任何固定大小），则操作数确实是恒定的（可以这样想：您可以用链式 if 条件而不是循环替换线性扫描：
`if (arr[0] < min), if (arr[1] < min) , ... if (arr[31] < min)`

令人兴奋的是，对于 size 数组的一般情况，`n`基于比较的算法是不可能的。
如果是，我们可以`O(n)`使用基于比较的算法进行排序：

```
given an array A:
max <- max(A)
build an empty data structure as desired let it be `S`.
for each element of A - insert it into S in a different index.
while (S.min() <= max):
   idx <- S.findminIndex()
   print S.min()
   S.update(idx,max+1) 
```

假设上述算法中的每个操作都是`O(1)`，并且循环迭代`n`次数，您的算法对 A 进行排序`O(n)`- 这是无法完成的，因为基于比较的排序被证明是有`Omega(nlogn)`问题的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:19:19.213

我不能提供 O(1) 算法，可能是使用最小堆的一种好方法，`O(log n)`在`O(1)`. 小尺寸数组的最小堆足够快，更新的性能可以忽略不计。

# c++ - C++ 强制覆盖

> ID：11967387
> 
> 赞同：4
> 
> 时间：2012-08-15T10:02:02.203
> 
> 标签：c++, c++11, overriding, virtual

我有一些课，比如

```
class object {
public:
virtual std::string name() const; 
}; 
```

它提供了一些接口，我希望所有派生的都覆盖方法`name`。问题是，它没有被覆盖，编译时没有任何问题，但我在运行时遇到问题。有没有办法强制方法覆盖？编辑：我想在所有衍生品中强制执行覆盖，而不仅仅是直接后代！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T10:03:03.107

是的，让它成为一个*纯*虚拟的：

```
constexpr virtual std::string name() = 0; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T10:41:22.453

您可以通过检查成员指针类型来检查成员是否在基类中定义：

```
static_assert(std::is_same<decltype(&U::name), std::string (U::*)()>::value,
              "name must be defined directly in U"); 
```

这确实意味着在编译时您必须有权访问您感兴趣的所有后代类型。

# c++ - OpenGL 为一个程序工作，而另一个程序给出错误：“请求失败的 X 错误”

> ID：11967388
> 
> 赞同：0
> 
> 时间：2012-08-15T10:02:02.443
> 
> 标签：c++, opengl, ubuntu-12.04, xorg

> **可能重复：**
> [OpenGL 窗口未打开](https://stackoverflow.com/questions/8356058/opengl-window-isnt-opening)

这个问题与 C++ 没有太大关系，只是代码是用那种语言编写的。

只是在玩OpenGL，而且还很新。我的操作系统是 Ubuntu 12.04。我能够运行一些基本程序。

[此链接](http://www.videotutorialsrock.com/opengl_tutorial/get_opengl_setup_linux/video.php)中提到的代码在我的系统上运行良好。
现在，当我开始编写书面教程时，[第 1 章程序](http://openglbook.com/the-book/chapter-1-getting-started/)无法加载。它给出的错误如下：

```
X Error of failed request:  BadRequest (invalid request code or no such operation)
  Major opcode of failed request:  154 (GLX)
  Minor opcode of failed request:  34 ()
  Serial number of failed request:  34
  Current serial number in output stream:  33 
```

这不是`glxinfo`问题。我已经[解决了 glxinfo 和 xorg 中的问题](https://askubuntu.com/questions/175744/x-error-of-failed-request-badrequest-invalid-request-code-or-no-such-operation)。我`/var/log/Xorg.0.log`没有给出任何错误`(EE)`。
我还安装了 、`freeglut`等`mesa-utils`软件包`glew`。

我在这里有什么遗漏吗？

# jquery - 无法删除使用 jquery 外部加载的图像（asp.net mvc3）

> ID：11967392
> 
> 赞同：0
> 
> 时间：2012-08-15T10:02:21.560
> 
> 标签：jquery, asp.net-mvc-3, mschart

我在局部视图中有一个图像，最终将由视图中的各种控件更改。由 MS Chart Controls 提供，这意味着我每次更改其中一个设置时都需要创建一个新图像。现在我只想在更改下拉属性时从页面中删除所述图像（稍后我计划调用使用不同参数绘制图表的操作），但这似乎不起作用。

在我的局部视图中：

```
<!--I populate the dropdown from a model loaded from a database-->
<select id="scoresSelect">
    @foreach(var option in @Model.testlist)
    {
      <option value="@option">@option</option>
    }
</select>

<div style="clear:both">&nbsp</div>

<img id="statusgraph" src="@Url.Action("StatusGraph", new { title=@Model.Options.First().Value.First()})"/>

 <p>Bottom controls</p>

<!--Downside of using partial views: scripts cannot be externally loaded-->
<script type="text/javascript">

$(document).ready(function () {

    $("#scoresSelect").change(function () {
        alert("changed");   // this executes just fine
        $("#graphid").prop({display: "none"});
    });

});

</script> 
```

alert 方法执行得很好，所以我知道这不是 javascript 问题。有谁知道它为什么会中断以及如何使其工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:09:46.550

使用`$("#graphid").css({display: "none"});`代替`$("#graphid").prop({display: "none"});`

[**.prop()**](http://api.jquery.com/prop/)方法仅获取匹配集中第一个元素的属性值。

而[**.css()**](http://api.jquery.com/css/)方法是从第一个匹配元素获取样式属性的便捷方法。

### 注意：`display`是 css 中的属性。

# sql - 当时间戳的开始时间大于时间戳的结束时间时查询失败

> ID：11967396
> 
> 赞同：0
> 
> 时间：2012-08-15T10:02:30.243
> 
> 标签：sql, postgresql, datetime, aggregate-functions, common-table-expression

我有一个基于 CTE 的查询，我在其中检索两个给定时间跨度之间的每小时间隔。我的查询工作如下：

获取开始和结束日期时间（比如说 07-13-2011 00:21:09 和 07-31-2011 21:11:21）获取每小时间隔之间的每小时总查询值（这里是从 00 到 21，a总共 21 小时，但这是参数化的，取决于我每天输入的时间）。

此查询适用于第一个时间戳的小时小于第二个时间戳的输入 - 例如，03 AM 表示第一个时间戳的小时，07 AM 表示第二个时间戳的小时，但存在问题。当我想检索 07-13-2011 22:11:43 和 07-25-2011 04:06:04 等输入的查询总数时，我遇到了问题。我需要检索查询的总数，如下所示：

```
07-13-2011 22:00:00    143 //representing the total amounts of queries 22:11:43 - 22:59:59 interval-
07-13-2011 23:00:00    121 //representing the total amounts of queries in 23:00:00  -23:59:59 interval-
07-14-2011 00:00:00     65 //00:00:00  - 00:59:59 interval
07-14-2011 01:00:00     51 //01:00:00  - 01:59:59 interval...
.
.
.
07-14-2011 04:00:00  22  //query amount for 04:00:00 - 04:06:04 interval 
```

等等。除了我在下面写的 CTE 查询之外，我还需要做什么？

```
WITH cal AS (
    SELECT generate_series('2011-02-02 00:00:00'::timestamp
                         , '2012-04-01 05:00:00'::timestamp
                         , '1 hour'::interval) AS stamp
    )
, qqq AS (
    SELECT date_trunc('hour', calltime) AS stamp
    , count(*) AS zcount
    FROM mytable
    WHERE calltime >= '07-13-2011 22:00:00'
    AND calltime <='07-31-2011 04:33:21' 
    AND calltime::time >= '22:00:00' 
    AND calltime::time <= '04:33:21'
    -- this calltime::time part obviously doesn't work due to common sense and logic
    -- edited it to show what I try to mean 
    AND date_part('hour', calltime) >= 0
    AND date_part('hour', calltime) <= 21
    GROUP BY date_trunc('hour', calltime)
    )
SELECT cal.stamp
     , COALESCE (qqq.zcount, 0) AS zcount
FROM cal
LEFT JOIN qqq ON cal.stamp = qqq.stamp
WHERE cal.stamp >= '07-13-2011 22:00:00'
AND cal.stamp<='07-31-2011 04:33:21'
AND date_part('hour', cal.stamp) >= 0
AND date_part('hour', cal.stamp) <= 21
ORDER BY stamp ASC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:12:55.617

考虑这个修改后的版本：

```
WITH param AS (
   SELECT '2011-07-13 22:11:43'::timestamp AS start -- supply start / stop once
         ,'2011-07-25 04:06:04'::timestamp AS stop
   )
   , cal   AS (
   SELECT generate_series(date_trunc('hour', p.start)
                         ,date_trunc('hour', p.stop + interval '1h')
                         ,interval '1h') AS h
   FROM param p
   )
   , q    AS (
   SELECT date_trunc('hour', calltime) AS h
         ,count(*) AS ct
   FROM   mytable
         ,param p
   WHERE  calltime >= p.start
   AND    calltime <= p.stop
   -- uncomment if you actually want to exclude hours 22 & 23 (?)
   -- AND    extract('hour' FROM calltime) BETWEEN 0 AND 21
   GROUP  BY 1
   )
SELECT cal.h, COALESCE(q.ct, 0) AS ct
FROM   cal
LEFT   JOIN q USING (h)
-- uncomment if you actually want to exclude hours 22 & 23 (?)
-- WHERE  extract('hour' FROM cal.h) BETWEEN 0 AND 21
ORDER  BY 1; 
```

主要变化是立即从实际时间跨度生成小时数。
删除了几个不需要的条件。
使用 ISO 8601 格式的时间戳（适用于每个语言环境）。

[在此相关答案](https://stackoverflow.com/a/8194088/939860)中查找更多上下文和链接。唯一的区别：那里是关于*运行*计数的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:24:29.520

本条款：

```
AND calltime::time >= '00:21:09' AND calltime::time <= '21:11:21' 
```

考虑到其他条款，看起来很可疑。

目前尚不清楚为什么需要它，如果文字时间分别`22:11:43`和`04:06:04`作为示例给出的不起作用，则此子句将过滤掉所有内容，因此您最终每小时计数为 0。

# iphone - UipanGesture 不适用于 Uiswitch

> ID：11967397
> 
> 赞同：1
> 
> 时间：2012-08-15T10:02:37.297
> 
> 标签：iphone, ios5, uiswitch, uipangesturerecognizer

我添加了一个 uiswitch 并希望通过手势将其移动到另一个位置。但 uipangesture 不适用于 uiswitch .. 下面是我的代码

```
 UISwitch *swich = [[UISwitch alloc]initWithFrame:CGRectMake(20, 20, 40, 50)];

    swich.userInteractionEnabled = YES;

    UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc] 
                                       initWithTarget:self 
                                       action:@selector(switchdraged:)];
    [swich addGestureRecognizer:gesture];

    [self.view addSubview:swich]; 
```

函数switchdraged没有被调用..

下面是开关拖动功能

```
- (void)switchdraged:(UIPanGestureRecognizer *) gesture1
{
        UISwitch *swich = (UISwitch *)gesture1.view;
        CGPoint translation = [gesture1 translationInView:swich];
        swich.center = CGPointMake(swich.center.x + translation.x, 
                                swich.center.y + translation.y);
        // reset translation
        [gesture1 setTranslation:CGPointZero inView:swich];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:43:44.783

我认为`UIPanGestureRecognizer`不会与`UISwitch`.

类参考说

> UIPanGestureRecognizer 是 UIGestureRecognizer 的一个具体子类，用于查找平移（拖动）手势。用户在平移视图时必须在视图上按下一根或多根手指。

*所以 UISwitch 可能被覆盖以更改状态*

我创建了一个示例应用程序

相同的代码与`UILabel`而不是`UISwitch`. 我已经和阿比森讨论过了。他告诉我，**它可能会因为改变状态而被覆盖**。

请描述好你需要用 UISwitch 做什么。

这种方法可以帮助你

**1.在视图内创建一个开关并添加为子视图**

```
- (void)viewDidLoad
{  

    UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(20, 20, 100, 100)];  
    containerView.backgroundColor = [UIColor blackColor];
    UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc] 
                                       initWithTarget:self 
                                       action:@selector(switchdraged:)];
    [containerView addGestureRecognizer:gesture];

    UISwitch *swich = [[UISwitch alloc]initWithFrame:CGRectMake(20, 20, 40, 50)];    
    swich.userInteractionEnabled = YES;

    [containerView addSubview:swich];    

    [self.view addSubview:containerView];
    [self.view bringSubviewToFront:containerView];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)switchdraged:(UIPanGestureRecognizer *) gesture1
{
    NSLog(@"triggered");

    UIView *swich = (UIView *)gesture1.view;
    CGPoint translation = [gesture1 translationInView:swich];
    swich.center = CGPointMake(swich.center.x + translation.x, 
                               swich.center.y + translation.y);
    // reset translation
    [gesture1 setTranslation:CGPointZero inView:swich];
} 
```

或者

此链接可能对您有所帮助

[可拖动的按钮和标签](http://www.cocoanetics.com/2010/11/draggable-buttons-labels/)

# android - AndEngine：GLThread 中的致命异常：IndexOutOfBoundsException

> ID：11967400
> 
> 赞同：0
> 
> 时间：2012-08-15T10:02:54.223
> 
> 标签：android, andengine

我正在为我的 AndEngine 的 BaseGameActivity 编写一个自定义对话框窗口，有时，当对话框必须消失时，应用程序会因以下错误而崩溃：

```
08-15 09:49:16.193: ERROR/AndroidRuntime(1572): FATAL EXCEPTION: GLThread
        java.lang.IndexOutOfBoundsException: Invalid index 3, size is 3
        at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
        at java.util.ArrayList.get(ArrayList.java:304)
        at org.anddev.andengine.entity.Entity.onManagedDrawChildren(Entity.java:1008)
        at org.anddev.andengine.entity.Entity.onDrawChildren(Entity.java:1000)
        at org.anddev.andengine.entity.Entity.onManagedDraw(Entity.java:993)
        at org.anddev.andengine.entity.scene.Scene.onManagedDraw(Scene.java:233)
        at org.anddev.andengine.entity.Entity.onDraw(Entity.java:875)
        at org.anddev.andengine.engine.Engine.onDrawScene(Engine.java:517)
        at org.anddev.andengine.engine.Engine.onDrawFrame(Engine.java:509)
        at org.anddev.andengine.opengl.view.RenderSurfaceView$Renderer.onDrawFrame(RenderSurfaceView.java:154)
        at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:617)
        at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.run(GLSurfaceView.java:549) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T10:02:54.223

我发现当您尝试在后台线程中分离子项时可能会发生这种情况，因此每次要分离某些东西时都必须使用此代码：

```
activity.runOnUpdateThread(new Runnable() {
    @Override
    public void run() {
        scene.detachChild(child);
    }
}); 
```

# git - Git：如何将使用 git hash-object 创建的对象推回原点？

> ID：11967405
> 
> 赞同：3
> 
> 时间：2012-08-15T10:03:04.020
> 
> 标签：git

我正在尝试使用 git notes 来存储一些（小）数据块。我几乎让它工作了，但是当我尝试将数据提取到另一台机器时遇到了麻烦。

我正在使用`git hash-object`并将返回的哈希存储在便笺中。

```
git hash-object -w timestamp.signed.tsr | git notes --ref=timestamps add --file - 
```

[我可以使用Note to Self](http://git-scm.com/2010/08/25/notes.html)中概述的方法推送和获取包含哈希的笔记。

```
git push origin refs/notes/timestamps
git fetch origin refs/notes/*:refs/notes/* 
```

但是，我不知道如何让 blob 对象与它一起使用。我相当确定我的 blob 对象没有被推到原点。我检查的方式是在推送一个注释之后`0dd470d2fc5556de62d813537fd483aede2f6b35`，它应该是一个 blob 对象的哈希，我用我的裸存储库去机器并寻找`objects/0d/d470d2fc5556de62d813537fd483aede2f6b35`. 由于它不存在，我认为它永远不会被推动。

是否有一些简单的事情我忽略了我需要这样做，以便 git 知道注释引用了 blob 对象？将数据直接存储在便笺中会更好吗？将数据进行base64编码并直接存储在便笺中会更好吗？

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:31:15.800

注释可以包含任意数据，它们不是必需的，甚至不需要包含对其他对象的引用。出于这个原因，git 不会将注释内容解释为引用。由于您显示的命令不会创建对散列对象的引用，因此该对象不会被推送到不同的存储库。事实上，一旦对象变得足够老，它就有资格进行垃圾收集。

# c# - 为什么我找不到面板中继器项目？

> ID：11967409
> 
> 赞同：0
> 
> 时间：2012-08-15T10:03:31.133
> 
> 标签：c#, asp.net, controls, repeater, panel

`Object reference not set to an instance of an object`当我尝试`Panel`在`Repeater`. 但是其他控件都发现没问题？谁能看到这里有什么问题？

这就是我选择控件的方式：

```
Panel pnlSubCategories = (Panel)e.Item.FindControl("pnlSubCategories"); 
```

标记：

```
<asp:Repeater ID="rptInnerCategories" runat="server" OnItemDataBound="rptCategories_OnItemDataBound">
  <ItemTemplate>
       <li id="liCategory" runat="server">
           <asp:HyperLink ID="lnkCategory" runat="server">
                <span><asp:Literal ID="litCategory" runat="server" Visible="true" /></span>
                <asp:Image ID="imgMan" runat="server" Visible="false" /></asp:HyperLink>

                <asp:Panel ID="pnlSubCategories" runat="server" Visible="false">
                  <ul>
                     <asp:Repeater ID="rptSubCategories" runat="server" Visible="false" OnItemDataBound="rptSubCategories_OnItemDataBound">
                      <ItemTemplate>
                        <li id="liSubCategory" runat="server">
                         <asp:HyperLink ID="lnkSubCategory" runat="server">
                          <span><asp:Literal ID="litSubCategory" runat="server" /></span></asp:HyperLink>
                        </li>
                       </ItemTemplate>
                      </asp:Repeater>
                  </ul>
                 </asp:Panel>
        </li>            
   </ItemTemplate>
</asp:Repeater> 
```

后面的代码：

```
if ((e.Item.ItemType == ListItemType.Item) || (e.Item.ItemType == ListItemType.AlternatingItem))
{
     Category category = (Category)e.Item.DataItem;
     HyperLink lnkCategory = (HyperLink)e.Item.FindControl("lnkCategory");
     Literal litCategory = (Literal)e.Item.FindControl("litCategory");
     HtmlGenericControl liCategory = (HtmlGenericControl)e.Item.FindControl("liCategory");
     Image imgMan = (Image)e.Item.FindControl("imgMan");

     Panel pnlSubCategories = (Panel)e.Item.FindControl("pnlSubCategories");
     Repeater subCategories = (Repeater)e.Item.FindControl("rptSubCategories");

     if (category.ParentCategoryId != 0)
     {
          pnlSubCategories.Visible = true; //Getting the error on this line 
```

谢谢你的帮助。

编辑*到目前为止我尝试过的内容：

`Panel pnlSubCategories = (Panel)liCategory.Controls[0].FindControl("pnlSubCategories");`

`Panel pnlSubCategories = (Panel)liCategory.Controls[1].FindControl("pnlSubCategories");`

`Panel pnlSubCategories = (Panel)Page.FindControl("pnlSubCategories");`

`Panel pnlSubCategories = (Panel)e.Item.FindControl("pnlSubCategories");`

但我仍然得到同样的错误......

编辑 2*

我注释掉了`Panel`控件，它也找不到`Repeater subCategories`下面的控件？这里发生了可怕的错误......

编辑 3*

[代码隐藏](http://pastebin.com/H6ms8x71)和[标记](http://pastebin.com/xeKZ0BGX)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T12:04:15.327

问题是您对不同的中继器使用相同的方法。

在您上次更新中，您发布了整个标记和代码，如果您搜索标记，您可以找到`rptCategories_OnItemDataBound`在多个转发器上使用的：

```
<asp:Repeater ID="rptCategories" runat="server" OnItemDataBound="rptCategories_OnItemDataBound"> 
```

和

```
<asp:Repeater ID="rptInnerCategories" runat="server" OnItemDataBound="rptCategories_OnItemDataBound"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:20:01.953

根据[msdn 上 FindControl() 方法的文档，如果它是您正在搜索的元素的](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)**直接**子元素，它只会找到一个控件。

在您的情况下并非如此，这就是为什么您无法以这种方式找到控件的原因。你应该找到`liCategory`，然后`lnkCategory`，然后`pnlSubCategories`。

所以，试试这个代码：

```
Control liElement = (Control)e.Item.FindControl("liCategory");
Panel pnlSubCategories = (Panel)liElement .FindControl("pnlSubCategories"); 
```

**编辑**

我已经更正了代码片段，现在应该可以了:)。

或者，您可以编写该`FindControl()`方法的递归版本并使用它。但是，当您希望解决方案独立于页面结构时，应该使用它。您可以在这里找到这种递归方法的一些示例实现：http: [//geekswithblogs.net/QuandaryPhase/archive/2009/05/06/asp.net-recursive-findcontrol-amp-extension-methods.aspx](http://geekswithblogs.net/QuandaryPhase/archive/2009/05/06/asp.net-recursive-findcontrol-amp-extension-methods.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:07:49.570

用这个

```
Panel pnlSubCategories = (Panel)liCategory.FindControl("pnlSubCategories"); 
```

# asp.net - 调整 div 标签的大小

> ID：11967412
> 
> 赞同：2
> 
> 时间：2012-08-15T10:03:36.603
> 
> 标签：asp.net, html

首先，我看到了一些与我要问的问题类似的问题，但没有一个回答我的问题。

我有一个 div 标签并将高度增加到 100%。但是 div 标签的大小保持不变？

我的第一个问题是为什么？我的第二个问题是：如何让潜水标签响应我想要的尺寸？

![截屏](../Images/90b195a17c07e746af8b1bab52c1e6e7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:10:53.743

如果父元素的高度是`auto`，那么百分比高度也被视为`auto`。

元素的高度`html`没有在你的 CSS 中指定，所以它是`auto`.

元素的高度`body`被指定为`100%`但是它的子元素，`html`这样就变成了`auto`

元素的高度`div`指定为，`50%`但它是 的子级`body`，因此也变为`auto`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:13:20.750

Div 标签高度 100% 等于 Div 所在容器的高度。如果您想为 Div 实现最小设置大小，请尝试在 CSS 中设置最小高度。

```
{
min-height: 200px;
} 
```

# actionscript-3 - ComboBox 文本属性仅在第二次函数调用时更新

> ID：11967416
> 
> 赞同：1
> 
> 时间：2012-08-15T10:03:57.507
> 
> 标签：actionscript-3, flash, combobox, flash-cs5

我试图在启用后立即更改 ComboBox 的文本。但是，直到第二次调用该函数（在这种情况下，当第二次按下按钮时），文本才会更新。函数期间的 trace() 显示 text 属性第一次确实发生了变化，但直到第二次调用此函数时，该变化才在屏幕上可见。

这是一个测试用例，它应该说明粘贴到 Flash CS5 中新项目的第一帧时出现的问题：

```
import flash.events.Event;
import fl.controls.Button;
import fl.controls.ComboBox;

stop()

var btn_test:Button = new Button()
var cb_test:ComboBox = new ComboBox()

this.addChild(btn_test)
this.addChild(cb_test)

btn_test.x = 100
cb_test.enabled = false

btn_test.addEventListener(MouseEvent.MOUSE_DOWN, setText)

function setText(evt:Event)
{
    cb_test.enabled = true
    cb_test.textField.text = "foo"
    trace(cb_test.textField.text)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:55:06.843

可能您可以尝试 UIComponent.validateNow() 方法。由于 fl.controls.UIComponent 决定缓存属性更改，并且有时反应过度，您可能会尝试强制它使用`cb_test.validateNow();`

# c# - 如何不断检查文件是否被删除，如果没有被删除，请重试

> ID：11967417
> 
> 赞同：0
> 
> 时间：2012-08-15T10:04:02.457
> 
> 标签：c#, file

在我当前的项目中，我遇到了随机错误，抱怨有问题的文件正在被其他进程使用。

有时它动作很快，一切都很好，有时它不起作用并不断给我错误

> 该文件正被另一个进程使用

所以我想我把delete方法放在a里面`try-catch`，在catch中我有某种循环，它会尝试删除文件，甚至更好：解锁它并让它准备好被删除。

我不知道在那个循环中我是否得到另一个异常，以及如何管理它。如何找到解决方案将该进程与文件分离，并使其准备好删除？

## 更新

这是我目前的代码：

```
 private void Test(string imagePath)
 {
        try
        {
            if (File.Exists(imagePath))
            {
                pictureBoxExistingPicture.Visible = true;
                labelnew.Visible = true;
                labelold.Visible = true;
                pictureBoxExistingPicture.Image = ImageUtility.SafeLoadImage(imagePath);

                if (MessageBox.Show("Do you want to overwrite the existing image?", "warning", MessageBoxButtons.YesNo, MessageBoxIcon.Warning) == System.Windows.Forms.DialogResult.Yes)
                {
                    pictureBoxExistingPicture.Image = Properties.Resources._default;//restore default

                    while (true)
                    {
                        try
                        {
                            File.Delete(imagePath);
                            break;
                        }
                        catch (Exception)
                        {
                        }
                    }

                    pictureBoxHonarjo.Image.Save(imagePath);
                }
                else
                {
                    pictureBoxHonarjo.Image = ImageUtility.SafeLoadImage(imagePath);//restore original image
                }

                pictureBoxExistingPicture.Visible = false;
                labelnew.Visible = false;
                labelold.Visible = false;
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

在当前主题的上下文中，我需要说，如果用户希望替换图像，它应该完成，它不应该花费很长时间，也不应该失败。所以基本上当有人试图改变一张图片，它必须在很短的时间内改变。

对于该`SafeLoadImage`功能，这是我的实现：

```
public class ImageUtility
{
   public static byte[] ImageToBytes(string FilePath, int FileLength)
   {
      FileStream fileStream = new FileStream(FilePath, FileMode.Open, FileAccess.Read);
      BinaryReader breader = new BinaryReader(fileStream);
      return breader.ReadBytes(FileLength);
    }

    public static Image SafeLoadImage(string imagePath)
    {
        byte[] image_byte;
        Image image;
        FileInfo fileinfo = new FileInfo(imagePath);
        image_byte = ImageUtility.ImageToBytes(imagePath, (int)fileinfo.Length);
        image = ImageUtility.BytesToImage(image_byte);
        return image;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:10:17.870

好的

所以你有一些伪代码，例如：

```
success = false
while not success
..try
..  delete file
..  success = true
..catch
..  wait a second
while end 
```

你可以添加一个重试计数器，这样它就不会无休止地循环等等，如果你运气好的话，你可以猜到哪里。

我故意不包含代码，因为您没有提供自己的代码，而是给了您可以尝试的模板

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:31:52.713

这是一个尝试删除文件的循环：

```
protected virtual bool IsFileLocked(FileInfo file) 
```

{ 文件流流 = null;

```
try 
{ 
    stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None); 
} 
catch (IOException) 
{ 
    //the file is unavailable because it is: 
    //still being written to 
    //or being processed by another thread 
    //or does not exist (has already been processed) 
    return true; 
} 
finally 
{ 
    if (stream != null) 
        stream.Close(); 
} 

//file is not locked 
return false; 
```

}

```
FileInfo file = new FileInfo("PathToTheFile"); 
while (IsFileLocked(file)) 
    Thread.Sleep(1000); 
file.Delete(); 
```

您还可以使用进程资源管理器了解哪个进程访问文件[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:42:52.167

`ImageUtility.ImageToBytes`完成后不处理 FileStream

难道是这个锁定了文件？

```
public static byte[] ImageToBytes(string FilePath, int FileLength) 
{ 
    FileStream fileStream = new FileStream(FilePath, FileMode.Open, FileAccess.Read); 
    BinaryReader breader = new BinaryReader(fileStream); 
    return breader.ReadBytes(FileLength); 
} 
```

考虑`using`执行退出代码块后将释放资源的语句（它包装 IDisposable 并为您调用 dispose 方法）：

```
public static byte[] ImageToBytes(string FilePath, int FileLength) 
{ 
    using(FileStream fileStream = new FileStream(FilePath, FileMode.Open, FileAccess.Read)) 
    {
        BinaryReader breader = new BinaryReader(fileStream); 
        return breader.ReadBytes(FileLength); 
    }
} 
```

这可能是您的文件被锁定的原因。

当然，如果其他人正在锁定您的文件，那么这可能没用 :) 但我怀疑这些是您创建/正在处理的图像文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-01T08:39:34.120

我使用 MessageBox 的简单解决方案：

```
bool deleted= false;
while(!deleted)
{
 try
  {
    File.Delete("path to file");                                 
    deleted = true;
  }
 catch 
  {
    MessageBox.Show("You can't delete file. Close file and press 'OK'");
    deleted = false; 
  }
} 
```

# c# - 网页转发

> ID：11967418
> 
> 赞同：0
> 
> 时间：2012-08-15T10:04:11.740
> 
> 标签：c#, jquery, html, request, forward

我正在创建一个旨在绕过基于位置的网站的小项目。我对加密等不感兴趣...

到目前为止，我已经创建了一个这样做的网站：

[http://www.mysite.com?q=http://www.myothersite.com](http://www.mysite.com?q=http://www.myothersite.com)

它返回该网站的 HTML。非常标准，简单的东西。

我的问题是我不确定如何捕获从该页面发出的请求。我可以简单地在 HTML 中进行基于文本的替换来更改所有请求以通过我的页面进行过滤，但这对任何基于 AJAX 的请求都没有帮助。

有没有办法做到这一点？

非常感谢您的帮助，

理查德·休斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:02:21.670

作为回答，我没有做上述任何事情。我购买了一个 VPN 包。

# windows - 通过单击关闭按钮关闭批处理脚本时如何运行批处理命令

> ID：11967419
> 
> 赞同：3
> 
> 时间：2012-08-15T10:04:10.247
> 
> 标签：windows, batch-file, command, cmd

我正在运行一个运行长时间运行命令的批处理脚本。当我关闭使用关闭按钮运行第一个脚本的命令提示符时，我想运行另一个脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:55:30.453

这是不可能的。CMD 没有任何类型的事件触发命令。这包括诸如关闭窗口、移动窗口、滚动窗口内容和单击鼠标等事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-13T05:22:02.117

以静默模式运行辅助 cmd，它将始终检查使用 pid 运行的第一个 cmd。当第一个不出现时，第二个触发 require 事件并运行 exit cmd 以关闭自身。

# javascript - .HTML() 来自多个选择器

> ID：11967420
> 
> 赞同：1
> 
> 时间：2012-08-15T10:04:19.020
> 
> 标签：javascript, jquery, html

我有以下[jsfiddle](http://jsfiddle.net/sshg7/1/)，代码如下：

**HTML：**

```
<div id="one" style="display:none">One</div>
<div id="two" style="display:none">Two </div>
<div id="three" style="display:none">Three</div>
<div id="output"></div> 
```

​<strong>jQuery：

```
$("#output").html($("#one,#two").html()); 
```

我可以让它与一个选择器一起工作，我想做的是使用多个选择器，我似乎走错了路。有人可以指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T10:05:57.443

`.html()`只会从匹配选择器规则的第一个元素中获取内容：

> 获取匹配元素集中第一个元素的 HTML 内容。

*来源：[http ://api.jquery.com/html/](http://api.jquery.com/html/)*

* * *

如果您想要来自两个元素的内容，您应该这样做：

```
$("#output").html($("#one").html() + $("#two").html()); 
```

见演示：http: [//jsfiddle.net/sshg7/2/](http://jsfiddle.net/sshg7/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T10:07:38.440

`.text()`如果您只想从这些 div 中获取文本，则可以使用：

```
$("#output").html($("#one, #two, #three").text()) 
```

[演示](http://jsfiddle.net/sshg7/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:10:28.827

或者：

```
$("#output").html(function() {
  var html = [];
  $("#one,#two").each(function() {
     html.push(this.innerHTML);
  });
  return html.join("");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T10:22:10.133

如果有很多元素：

```
$("#output").html(
  $(selector_for_many_elements).map(function () {
    return $(this).html();
  }).get().join(', ');
); 
```

# spring - 如何在处理 Oracle 日期数据类型时避免使用已弃用的 Date 构造函数？

> ID：11967422
> 
> 赞同：0
> 
> 时间：2012-08-15T10:04:26.310
> 
> 标签：spring, hibernate, jsp, datetime, oracle10g

我正在使用 Hibernate 3.2.1 和 Oracle 10g 作为后端使用 Spring 3.0.2。在 Oracle 数据库表中，有一个数据类型为 的字段`Date`。此`Date`类型字段在 Hibernate (POJO) 中映射`java.util.Date`如下。

```
private Date discountStartDate; 
```

在向 Oracle 表中插入或更新数据时，我提供了一个`java.lang.String`类似这样的日期类型`08/15/2012 15:08:13`。完全没有问题。一切正常，但由于 Oracle 日期数据类型（据我所知）总是`java.util.Date`与 Hibernate 实体映射，我不能使用其他 Java API，如 Calendar，我必须使用类的**不推荐使用**的构造函数`Date`来处理 Hibernate，如下所示.

```
Discount obj=new Discount();
date=new Date(request.getParameter("txtDiscountStartDate"));
obj.setDiscountStartDate(date); 
```

应避免此类弃用的功能。有没有办法在 Hibernate 中绕过这个已弃用的~~Date~~ ("StringDate") 构造函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:14:09.067

不，那是错误的。

您应该将其解析`String`为`Date`using `DateFormat`and `SimpleDateFormat`。

[这](http://javatechniques.com/blog/dateformat-and-simpledateformat-examples/)是一个例子。

这是另一个，因为这对您来说似乎很困难：

```
DateFormat formatter = new SimpleDateFormat("yyyy-MMM-dd");
formatter.setLenient(false);
String discountDateAsString = request.getParameter("txtDiscountStartDate");
Date discountDate = formatter.parse(discountDateAsString); 
```

# java - 初学者java 什么是错误，为什么？

> ID：11967423
> 
> 赞同：-4
> 
> 时间：2012-08-15T10:04:28.733
> 
> 标签：java, swing

```
JTextField ageTxt;
ageTxt = new JTextField("30");
int age = ageTxt.getText( );

if (age < 30)
    System.out.println("You are young");
else
    System.out.println("You are NOT young"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T10:07:36.897

`ageTxt.getText()`返回一个`java.lang.String`。您正在尝试将其分配给一个`int`不起作用的原语。

您可以使用`Integer.parseInt()`将 a 转换`String`为`int`. 但请注意，`NumberFormatException`当字符串不是有效数字时，这可能会抛出 a 。所以你可能想把它包装在一个`try-catch`块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:14:47.657

希望这会对您有所帮助，因为您没有将它转换为整数，所以 getText() 返回一个字符串，这就是它给您异常的原因。首先像这样将它转换成 int 然后使用它。

```
JTextField ageTxt;
ageTxt = new JTextField("30");
int age = Integer.parseInt(ageTxt.getText( ));

if (age < 30){
    System.out.println("You are young");
}
else{
    System.out.println("You are NOT young");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:09:56.170

您的问题表述得不是很好，但据我所知，您正在尝试使用返回 String 的方法初始化 int 值。

```
int age = ageTxt.getText( ); 
```

相反，您应该这样做：

```
String ageS = ageTxt.getText();
int age = Integer.parseInt(ageS);
if (age < 30) {
  // do something
} 
```

当然要确保 parseInt 不会抛出异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T10:08:53.457

```
JTextField ageTxt;
ageTxt = new JTextField("30");
String age = ageTxt.getText( );

if (Integer.parseInt(age) < 30)
    System.out.println("You are young");
else
    System.out.println("You are NOT young"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-04T02:34:09.510

您可以使用扫描仪而不是 jtextfield。这是我制作的代码：

```
import java.util.Scanner;

public class Test {
public static void main(String[]args){
int age;
Scanner getage = new Scanner(System.in);
System.out.println("How old are you");
age = getage.nextInt();
if (age < 30){
System.out.println("You are young");
}
else{
System.out.println("You are NOT young");
}

}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T10:09:34.690

`ageTxt.getText()`返回一个`String`包含用户键入的字符的对象，然后您尝试将其放入`int`var 中，该 var 只能包含整数。所以它不能工作。只需将它放在一个 String 对象中，然后通过执行解析它以获取整数值`Integer.parseInt(myStringObject)`。请注意，如果 String 对象不包含整数，这可能会引发异常。

# objective-c - 在类实例上使用委托的充分理由？

> ID：11967426
> 
> 赞同：0
> 
> 时间：2012-08-15T10:04:52.450
> 
> 标签：objective-c, delegates, protocols

我被问到一个关于代表的问题，我对正确答案有些怀疑：

当您创建**自己的协议**时，使用委托或仅实例化类并调用简单方法有什么区别？

我想：有了委托，你就不用去实例化一个新的整个类了，你可以在类之外设置委托，然后用“委托”调用方法。**使用代表来避免无限导入**也是一件好事吗？就像classA导入classB一样，如果你实例化类而不是使用委托，classB也会导入classA，它会导致崩溃吗？

当您创建自己的协议/委托时，还有其他好的理由吗？

感谢分享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:40:55.000

好吧，看一个例子。

假设您有“某些东西”碰巧显示一个窗口作为它正在做的任何事情的一部分。如果没有委托或类似的设置，您必须是“Window”的子类才能处理窗口内容，并且您必须是其他东西的子类才能处理您正在做的任何其他事情。所以这要么是不可能的，要么你会陷入各种多重继承的怪圈。

因此，您可能最终会创建任何东西的子类，以及“Window”的子类，并为两者实例化对象，并让它们以某种方式进行通信。这正是代表所做的，除了你必须一遍又一遍地做各种各样的事情。就像想象一个有 10 个按钮的窗口，每个按钮都需要一个按钮子类，除了在你的实际类上调用“ButtonXClicked”之外，它并没有真正做那么多。再一次，看看这里重新实现的“委托”（是的，在 Cocoa 中它不是委托；那将是目标/动作。但它与委托并没有什么不同）？

因此，委托几乎可以方便地连接那些实际上并不具有派生类所暗示的“某种”关系的对象。

它还允许您连接“在其他地方创建”的对象，例如当您有创建对象并将其返回给您的东西时：您不能真正在那里替换子类，但 API 可能仍然允许您执行“ setDelegate:"- 类似将该对象连接到您的应用程序的东西。

有时委托更合适，有时子类更好，而且可能在某些情况下它并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:23:33.677

我想委托的主要优点是它们允许您在运行时更改*对象的行为。*它们还有助于加强功能区域之间的分离。

我们来看一个具体的例子： `NSTableView`的数据源。 `NSTableView`为 OS X 中的表提供 UI 实现。数据源委托提供了获取数据以填充表的功能。

在我来到 Objective-C 并用 C++ 和 Java 编程之前的过去，我会通过 UI 类和一些受保护的方法来管理数据，这些方法将被子类化以创建不同的表视图，从而实现了一个表视图。

这种方法是完全有效的，但是它将管理数据的功能与显示的功能混为一谈，而且不是很灵活。一旦你说小部件 X 是一个表格视图，它以某种方式访问​​数据，那一切都是一成不变的。如果您希望小部件 X 以不同的方式获取其数据，您必须将这种灵活性构建到 UI 类中，或者销毁它并从不同的子类重新创建它。

另一方面，委托模式允许`NSTableView`通过简单的分配和重新加载来完全更改其数据源。此外，UI 类不会被数据处理代码污染，数据处理类也不会被 UI 处理代码污染。

您可以在不使用协议的情况下进行委托，事实上，在 Cocoa 的 10.5 之前版本中，这是规范而不是例外，但是，如果您使用协议来定义委托 API，您将获得编译器支持以检查委托实现的错误和最低级别的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:31:59.157

问题是一个概括性的问题。最好避免无限进口。

想象一下这个场景。您有一个计时器（来自一个名为 KDTimer 的类）正在运行，并在某个时间点到期。现在您想在 3 种游戏模式 A、B 和 C 中使用它（它们都对应于 3 个不同的类别）。现在不同的游戏模式会对计时器的到期做出不同的反应。你得到的不同是：

**代表：**

您在 KDTimer 中定义您的协议，将 a、b 或 c 设置为其委托（实际上 a、b 或 c 将自己设置为计时器委托），然后执行

```
-(void) increaseProgress {
//incrementProgress
if(self.progress>=1) 
[_delegate timeExpired];
} 
```

而你是金色的。

**非代表：**

```
#import "A"
#import "B"
#import "C"

@synthesize a,b,c;
-(void) increaseProgress {
//incrementProgress
if(self.progress>=1) 
[self.a timeExpired];
[self.b timeExpired];
[self.c timeExpired];
//we don't really know which instance should be messaged
} 
```

关键是，不使用委托会导致复杂的代码，通过使用它们，您可以获得更多可重用的组件。计时器不需要知道游戏模式，它只是试图告诉它已经过期。

# apache - Apache 不会在 XAMPP v3.0.12 中启动

> ID：11967427
> 
> 赞同：-4
> 
> 时间：2012-08-15T10:04:53.020
> 
> 标签：apache, xampp, localhost

我想使用 XAMPP v3.0.12 设置一个本地主机服务器。但是apache不会启动。早些时候我收到错误消息“端口 80 或 443 ssl 已在使用中，安装 apache2.2 服务失败”...我发现 skype 正在使用端口 80。我修复了它并重新安装了 XAMPP..这次我没有得到任何错误消息...但 Apache 仍然无法启动，我尝试从 xampp 控制面板启动 Apache，但它只是无法启动..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:13:21.873

尝试通过运行`xampp/apache_start.bat`文件来启动 apache，它会打印出错误是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T06:23:29.427

1）重新安装Xampp。

* * *

2）启动Xampp。

* * *

3) 单击 Apache 的“配置”按钮。

* * *

4) 点击'Apache(httpd.confg)。

* * *

5）找到'80'并用'8080'替换它并保存。

* * *

6) 再次单击 Apache 的“配置”按钮。

* * *

7) 点击'Apache(httpd-ssl.confg)。

* * *

8) 找到“443”并将其替换为“4433”并保存。

* * *

9) 现在启动 Apache。`

# grails - Grails gui：datePicker 不显示

> ID：11967430
> 
> 赞同：1
> 
> 时间：2012-08-15T10:05:12.237
> 
> 标签：grails, datepicker

我正在尝试在 grails 中显示 gui:datePicker

```
<div style="margin:0 20px 0 0;display:inline" class="yui-skin-sam">
    <label for="fromDate">From :</label><gui:datePicker id="fromDate" value="${new Date()}"/>
</div> 
```

但是，它只显示空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:48:19.207

你把 <gui:resources components="datePicker"/> 放在头上了吗？
请阅读此处的用法部分以获取更多信息： http: [//grails.org/plugin/grails-ui](http://grails.org/plugin/grails-ui)

编辑：需要安装 grails ui 插件
`grails install-plugin grails-ui`
阅读： http: [//grails.org/plugin/grails-ui](http://grails.org/plugin/grails-ui)

# android - 如何将“bmp”保存为 sd 卡中的 bmp 文件？

> ID：11967433
> 
> 赞同：0
> 
> 时间：2012-08-15T10:05:19.470
> 
> 标签：android, bitmap, android-ndk, bitmapfactory

现在我正在尝试从视频文件中获取帧图片，我知道该怎么做（使用`ffmpeg`或`getFrameAtTime`功能）

所以我可以在我的程序中获得一个帧作为 bmp 结构但是当我将它保存为`png`or`jpeg`时，

这些质量不好，虽然视频质量很好

所以我想保存这个bmp而不进行任何**压缩**

据我**`copyPixelsToBuffer`**所知，功能适用于此，但我做不到... T_T ...

请任何人都可以向我解释如何使用它？//我的录音大小是 (1280, 720)

我应该录制更大尺寸的视频吗？还是应该将帧保存为 SD 卡中的位图？？？

不压缩？？？

//我的猜测是它用于压缩。压缩是一种与质量的权衡

现在我用这个函数制作了一个 png 或 jpeg **`Bitmap.compress(CompressFormat.PNG, 100, fos)`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:12:16.990

来自维基百科：[http ://en.wikipedia.org/wiki/Portable_Network_Graphics](http://en.wikipedia.org/wiki/Portable_Network_Graphics)

> 便携式网络图形 (PNG /ˈpɪŋ/[2] ping) 是一种采用无损数据压缩的位图图像格式。

您使用显示的代码进行的 PNG 压缩不会丢失任何质量。PNG是无损的。

最有可能发生的是，将位图对象放入内存的实现在某处丢失了一些像素。

我建议您（出于比较和测试目的）在应用程序的 ImageView 全屏中显示位图对象，并将其与保存的 PNG 进行比较。只是为了检查哪个转换真正失去质量。

# fortran - 类型数组内的数组作为函数参数

> ID：11967439
> 
> 赞同：1
> 
> 时间：2012-08-15T10:05:59.677
> 
> 标签：fortran, argument-passing, fortran90, gfortran

我手头有以下程序

```
program foo
  type bar
    real, dimension(2) :: vector
  end type
  type(bar), dimension(3) :: bararray
  call doSomething(bararray%vector)
end program

subroutine doSomething(v)
  real, dimension(3,2), intent(inout) :: v
  ...
end subroutine 
```

现在这给了我一个编译错误。

```
Error: Two or more part references with nonzero rank must not be specified at (1) 
```

如果我将呼叫更改为

```
call doSomething((/bararray%vector(1), bararray%vector(2)/)) 
```

一切都很顺利。问题是这看起来有点麻烦，所以问题是，有没有其他方法可以为子例程编写参数？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T21:19:19.140

出现错误是因为语言中存在一个约束（在 F2008 中，语法规则为 C618），即结构组件（或类似的多部分参考）中只有一个部分可能具有非零等级。您对`bararray%vector`结构组件的引用有两个非零等级的部分-组件`vector`和变量`bararray`。

（在“更改调用”方法中，对分量向量的引用具有一个下标，该下标使该部分的总体排名为零，因此接受 bararray%vector(1)。）

“改变呼叫”方法存在一个重大的潜在问题。

子程序中的哑元是`INTENT(INOUT)`. 这要求实际参数是可定义的（一个实际上可以“变化”的变量）。

在您的“更改调用”方法中，与该虚拟参数关联的实际参数是一个表达式 - 一个数组构造函数。表达式是不可定义的——评估它们的结果是一个值，而不是可以“定义”的东西——即你不能理智地说`2 + 2 = 6`。

大概在实际代码中，doSomething 子例程是一个外部过程，因此您的编译器没有诊断出这一点。如果 doSomething 有一个显式接口（可能是因为它在一个模块中），那么我希望编译器会报告一个错误。

其他人建议在调用之前重新编组数据的方法（将数据复制到适当大小的数组变量中，调用过程，将数据复制出来）。重写子例程的接口以获取 bar 类型的对象（将类型的定义移至模块）显然是另一种可能性。派生类型不仅是存储数据的便捷方式，而且通常是处理数据的便捷方式。

我会非常警惕那些试图欺骗处理器接受你“知道”是`bararray%vector`内存中假设数组布局的方法。类型和数组的布局可能因处理器而异，而且随着处理器错误检查的改进，这种技巧可能会导致以后的诊断。供应商提供的库可以摆脱这种伎俩，但不是我们这些单纯的编程凡人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T10:39:17.107

Intel Fortran (13.0.xxx) 编译器给出错误

```
error #6159: A component cannot be an array if the encompassing structure is an array. 
```

我认为你的问题的答案是调用带参数的子程序的正确方法`real, dimension(3,2)`是给该死的东西一个`real, dimension(3,2)`参数，这需要在调用子程序之前以某种方式编组你的数据。是的，这有点麻烦，但是严格的类型检查不是一个很好的功能吗？

您可以按照以下几行定义包装子例程：

```
subroutine wrapDoSomething(abar)
  type(bar), dimension(:), intent(inout) :: abar
    ...
    ... marshal your data ...
    call subroutine doSomething(marshalled_data)
    ...
end subroutine wrapDoSomething 
```

我怀疑，如果您在`subroutine doSomething`没有显式接口的情况下进行定义，您可能会逃避传递调用者认为是`bar`s 的数组但子例程作为 s 的 rank-2 数组得到的东西`real`。如果这不能直接从块中使用，则可能`BIND(C)`在您的类型定义中使用，这可能会欺骗编译器为 6 个实数分配连续存储。

如果这一切都在你的脸上爆发，你就靠你自己了，我将被拒绝参与该任务。

# debugging - 进入 GDB 中的特定函数

> ID：11967440
> 
> 赞同：9
> 
> 时间：2012-08-15T10:06:02.863
> 
> 标签：debugging, automation, gdb, visual-studio-debugging, step-into

GDB 是否支持在包含嵌套函数调用表达式的行上单步执行*特定*函数，例如`f`或`g`，例如

```
f(g()); 
```

类似于[Visual Studio 2010 所支持](http://msdn.microsoft.com/en-us/library/7ad07721.aspx)的。也许 GDB 脚本是解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-05T06:06:35.897

`advance`来自答案[https://stackoverflow.com/a/1133403/2708138](https://stackoverflow.com/a/1133403/2708138)的命令很有用。您可以将该命令与预先获取当前上下文中`print f`的类型相结合。`f`

此外，我已经在对您的问题的评论中提到，如果您不想单步`skip`执行该功能，则可以使用该功能。`g`

请参阅 gdb 帮助中的关键字`advance`,`print`和`skip`.

至少`skip`-feature 是相当新的。[所以也许，在Employed Russian](https://stackoverflow.com/users/50617/employed-russian)给出他的答案时它不可用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-15T16:19:33.447

> GDB 是否支持 Stepping into a specific function

不，如果你想踏入`g`，一个简单的`step`应该做到。如果你想踏入，`f`做`step`，，，。`finish``step`

欢迎您在 GDB [bugzilla](http://sourceware.org/bugzilla/enter_bug.cgi?product=gdb)中提交功能请求，尽管我怀疑`Step into Specific`是否可以在 CLI 调试器中合理实现。

# php - 不能从同一类的相同方法调用相同的静态方法

> ID：11967450
> 
> 赞同：6
> 
> 时间：2012-08-15T10:07:13.180
> 
> 标签：php, codeigniter, error-handling, controller

我的 Codeigniter 2.1.0 应用程序中有这个错误控制器：

```
<?php

class Error extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        set_status_header(404);
        $data->menuItems = Main::_menu();
        $data->title = "404 error !";
        $data->pageview = 'templates/404';
        $this->load->view('templates/main', $data);
    }

    public function facebook()
    {

        set_status_header(404);            
        $data->menuItems = Main::_menu();
        $data->title = "Facebook error !";
        $data->pageview = "templates/facebook_error";
        $this->load->view('templates/main', $data);
    }
}
?> 
```

主控制器 _menu：

```
<?php
class Main extends CI_Controller
{
    // ...  a lot of methods here ...
    public static function _menu()
    {
            static $menuItems = array( //just a simple array
                                     );
    }
}
?> 
```

facebook() 方法与 index() 完全一样，但是 index 工作正常，facebook() 抛出这个消息：

```
Fatal error: Class 'Main' not found in /var/www/MYApplicationName/application/controllers/error.php on line 22 
```

地球怎么可能？我怎样才能`Main::_menu()`从 facebook() 方法到达？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:49:27.917

从另一个控制器调用函数会破坏 MVC 并将您置于 HMVC 领域。

如果您确实需要这样做，请查看[此线程](http://codeigniter.com/forums/viewthread/55212/)以及 CodeIgniter 的[模块化扩展 (HMVC) 插件。](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:40:37.663

为什么不创建 MY_Controller 来扩展 CI_Controller 您放置可重用代码的位置？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T04:37:13.867

实际上 - 你错了。您的“索引”代码也不起作用。

我刚刚将您上面的所有代码粘贴到 CI 2.1.2 的干净版本中，索引函数也返回相同的错误。

因此，也许您的计算机缓存了某些内容，或者您​​在其他地方有一些其他代码让您认为它正在工作。但它不起作用。

无论如何-*真正的问题*是您为什么要尝试从另一个控制器调用控制器？这不是一个好的 MVC 方法。您的“_menu()”函数应该位于一个[库](http://codeigniter.com/user_guide/general/creating_libraries.html)中——这是它所属的地方。

或者将 _menu() 代码放入“MY_Controller”并让两个控制器扩展[MY_Controller](http://codeigniter.com/user_guide/general/core_classes.html)。

或者将 _menu() 代码放入[helper](http://codeigniter.com/user_guide/general/helpers.html)中。

基本上有三种更好的方法可以解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T08:37:37.523

根据@TheShiftExchange 的回答，我能够追踪到路线设置导致了这种行为。我的`config/routes.php`样子是这样的：

```
$route['404_override'] = 'error/index';
$route['(:any)'] = "main/$1"; 
```

`www.example.com/nonexistent-url`所以，当我向控制器发出请求时`main`，CI 注意到没有这样的方法，所以它也运行`error/index`了，但是`main`控制器已经加载了。

另一种方法`facebook`是从 only 的现有方法重定向的`main`，例如`gallery`，这种方式就像我转到 url 一样`www.example.com/error/facebook`，因此`main`未加载控制器，因为仅`error/facebook`请求了。如果我调用`www.example.com/error/index`它，它的工作原理是一样的，因为在这种情况下，`main`控制器没有加载，只有`error`.

（赏金去了@TheShiftExchange，因为他的回答是最准确的，并为我提供了能够追踪问题的最佳信息。谢谢！
我的重定向之一从未到达，我认为这是错误/索引页面。）

# actionscript-3 - 哪个更好，hitTestObject 还是自计算？（Actionscript）

> ID：11967456
> 
> 赞同：0
> 
> 时间：2012-08-15T10:08:11.693
> 
> 标签：actionscript-3, flash, actionscript

我的意思是使用 object.hitTestObject 或计算以下边界对性能更好：

```
if(obj.x > obj2.x && obj.x < obj2.x + obj2.width &&
obj.y > obj2.y && obj.y < obj2.y + obj2.height)
{
    trace('spaceship damaged!!!');

}

//or using

if(obj.hitTestObject(obj2))
{

   trace('spaceship damaged by hitTestObject!!!');

} 
```

你在实践中更多地使用什么？什么更有效？多少百分比的性能给出自我计算？20%？40%？60%？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:33:50.377

请参阅以下内容`performance comparsion article`：

[ActionScript 3 中碰撞检测技术的相对性能](http://www.mikechambers.com/blog/2009/06/26/relative-performance-for-collision-detection-techniques-in-actionscript-3/)

[使用 BitmapData.hitTest 优化碰撞检测的策略](http://www.mikechambers.com/blog/2009/06/25/strategies-for-optimizing-collision-detection-with-bitmapdata-hittest/)

你喜欢的问题

[[AS3] hitTestObject 性能问题](http://www.kongregate.com/forums/4-game-programming/topics/232237)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:34:24.950

这篇文章让您对您的问题有一个很好的了解

[http://www.mikechambers.com/blog/2009/06/26/relative-performance-for-collision-detection-techniques-in-actionscript-3/](http://www.mikechambers.com/blog/2009/06/26/relative-performance-for-collision-detection-techniques-in-actionscript-3/)

HitTest 似乎是最快的，这似乎是合理的，因为我认为 Adob​​e 的 API 将针对可能的最佳性能进行优化。

[编辑] 至于回答，bitmapdata.com 似乎比 Will Kru 稍快。

# java - java - 如何在不损失质量的情况下调整图像大小？

> ID：11967458
> 
> 赞同：2
> 
> 时间：2012-08-15T10:08:12.633
> 
> 标签：java, swing, image-processing

我的要求是：“如何在不损失质量的情况下使用摇摆调整图像大小”。

我正在使用调整器组件、标签、面板。我此时正在使用调整大小的概念，图像模糊并失去质量。所以你知道“如何使用摇摆概念在不损失质量的情况下调整图像大小？”。把相关信息或代码发给我。

谢谢你，GaneshKumar。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T17:01:48.713

加内什，

您可能会看一下[imgscalr](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)，它是一个非常简单的（单个类，使用一堆静态方法），看起来像这样使用：

```
BufferedImage thumbnail = Scalr.resize(srcImage, 150); 
```

为了确保最高质量的缩放结果，您可以将其他参数传递给 resize 方法，如下所示：

```
BufferedImage thumbnail = resize(img, Method.ULTRA_QUALITY, 125, OP_ANTIALIAS); 
```

您还可以使用[许多简单的图像操作](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/Scalr.html)（如裁剪、填充、旋转等）。例如，如果您在服务器上进行图像处理，还有一个异步类可以一次将许多操作排队并在可配置数量的线程中执行它们。

该库是用纯 Java 编写的，并在 Apache 2 许可下发布，如果您有兴趣，可以[在这里找到所有源代码。](https://github.com/thebuzzmedia/imgscalr)

如果您对其他示例或用例感到好奇，这里有[一些其他相关的 SO 问题。](https://stackoverflow.com/questions/tagged/imgscalr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:57:29.510

你要求的是不可能的。缩放`new resolution > native resolution`根据定义有损的光栅图像。如果万一我误解了这个问题，我提前道歉。

# git - ssh 对于远程 git 存储库来说太“强大”了？如何设置权限？

> ID：11967461
> 
> 赞同：1
> 
> 时间：2012-08-15T10:08:25.343
> 
> 标签：git, permissions, ssh

我在我的 suse 盒子上创建了一个 ssh 服务器，基本上我只是希望它用作使用 ssh 的 git 服务器，但是当我使用 ssh name@server 登录时，我可以查看我的 home/repo 目录，这很正常，但我什至可以检查其他用户的文件，例如我不想要的 home/steve，如何将用户 repo 设置为只能访问 git 目录？说 home/repo/repository.git ？或者只是来自 /home/repo 的文件？

我已经从 Yast2-sshd 配置工具（基本上只是一个编辑 /etc/sshd/sshd_config 的工具）中禁用了“允许 Root 登录”，但这似乎还不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:37:47.657

如果您[将用户的 shell 设置为 git-shell](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server)，他们只能运行 git 命令。

如果您不需要细粒度的权限，那么[您不需要 gitolite 或类似的](https://stackoverflow.com/a/10888536/761202)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:21:08.160

ssh 太强大了，因为它允许交互式会话。
giZm0[提到](https://stackoverflow.com/questions/11967461/ssh-is-too-powerful-for-a-remote-git-repository-how-to-setup-permission/11967640#comment15950449_11967461)，[gitolite](http://sitaramc.github.com/gitolite/master-toc.html)是一个[授权层，](http://sitaramc.github.com/gitolite/auth.html)[它](https://stackoverflow.com/users/481406/gizm0) 可以利用 ssh 提供的身份验证，并允许对您的存储库进行细粒度的访问控制。 它只是一个 perl 脚本，它可以在文件中设置自身以拦截任何 git 命令，并根据简单的文本配置文件验证它们。 这利用了 ssh 功能（与 git 无关），称为[强制命令](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)。
`~/.ssh/authorized_keys`

注意：gitolite 也可以与 httpd 服务器链接：请参阅“[为什么需要 Gitosis 或 Gitolite？](https://stackoverflow.com/a/10893091/6309) ”或“ [git on HTTP with gitolite and nginx](https://serverfault.com/questions/377066/git-on-http-with-gitolite-and-nginx/377082#377082) ”了解更多信息。

# sed - Sed 不处理所有脚本行

> ID：11967462
> 
> 赞同：1
> 
> 时间：2012-08-15T10:08:33.063
> 
> 标签：sed

我的[sed 脚本](http://pastebin.com/2Hik91KG)有问题。我使用上面的脚本处理[这些数据。](http://pastebin.com/2WqbA8WU)

问题是，脚本中的行：

```
/^$/d
s/ $/ajes/g 
```

不起作用。当然，如果我再次处理数据，它会起作用。

这不起作用：

```
sed -f script.sed -i data.file 
```

但这会起作用（双重处理）：

```
sed -f script.sed -i data.file
sed -f script.sed -i data.file 
```

这是为什么？问题出在哪里？为什么我不能一次处理所有结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:36:58.150

真正的问题是你只有一条线。并`sed`读取一次并尝试一一执行每个命令，而整行都在模式空间中。当你用一些东西代替它时，`\n`它仍然只是一个字符串，它在模式空间中。它没有被分成多个字符串并一一重读。

显然`/^$/`不匹配你的`\n\n`，`s/ $/ajes/g`也不匹配你之前的任何空间`\n`。这就是为什么它不能按您期望的方式工作的原因。

您可以通过修改“非工作”命令来解决问题

```
s/\n\+/\n/g # equals to /^$/d
s/ \n/ajes\n/g # equals to s/ $/ajes/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:16:31.487

你在那里有很多替代品。假设你有替换

*   规则 A
*   规则 B
*   规则 C。

因此，这里的问题是，如果*规则 A*最初不匹配，然后规则 B 或 C 匹配导致替换后将再次与 A 匹配的模式，则规则 A 不会对该行生效。因此，您需要分析处理替换的顺序，并希望您能找到错误。

希望这可以帮助您朝着正确的方向前进。

# jqgrid - 这两个不同的jqGrids有什么区别？

> ID：11967466
> 
> 赞同：3
> 
> 时间：2012-08-15T10:09:02.510
> 
> 标签：jqgrid

我刚开始使用 jqGrid。我遇到了两种不同类型的 jqGrid，如下所示。

一个看起来像下面

```
 <trirand:JQGrid ID="Jqgrid3" runat="server">
    <Columns>
        <trirand:JQGridColumn DataField="OrderID" PrimaryKey="True" />
        <trirand:JQGridColumn DataField="Freight" Editable="true" />
        <trirand:JQGridColumn DataField="OrderDate" Editable="true"/> 
        <trirand:JQGridColumn DataField="ShipCity" Editable="true" />
        </Columns>
    </trirand:JQGrid> 
```

另一个看起来像下面

```
 $("#list").jqGrid({
        url: ResolveUrl() + '/DoctorList',
        datatype: 'local',
        postData: { "searchText": searchText },
        mtype: 'POST',
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        serializeGridData: function (jsondata) { return JSON.stringify(jsondata); },
        jsonReader: { repeatitems: false, root: "d.rows", page: "d.page", 
                     total: "d.total", records: "d.records" },
        colNames: ['Add', 'DoctorID', 'Last Name', 'First Name', 'Address'],
        colModel: [
    { name: 'AddAction', width: 80, fixed: true, 
      sortable: false, resize: false, align: "center" },
    { name: 'ID', index: 'ID', width: 50, sortable: false, hidden: false },
    { name: 'LastName', index: 'LastName', width: 100, 
      hidden: false, frozen: true, sortable: false },
    { name: 'FirstName', index: 'FirstName', width: 100, hidden: 
      false, frozen: true, sortable: false },

    { name: 'Address', width: 420, hidden: false, sortable: false,
        jsonmap: function (obj) {
            var street = obj.Address.Address1
            var city = obj.Address.City
            var state = obj.Address.StateProvince
            var zip = obj.Address.PostalCode

            if (street != '') { street = street + ', ' }
            if (city != '') { city = city + ', ' }
            if (state != '') { state = state + ', ' }

            var Address = street + city + state + zip
            return Address
        }
    }], 
```

对于以前的类型，我可以在代码隐藏中做这样的事情

Jqgrid3.DataSource = GetTable() Jqgrid3.DataBind()

我不知道是否有办法从代码隐藏页面访问 cclist jqGrid。有人可以帮助我理解我如何理解上述两种不同的类型，与另一种相比有什么优势以及它们最适合哪些场景？

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:36:10.500

您的第一个网格是购买的版本，其中包含用于简化网格使用的包装方法，尤其是在您不熟悉 Jquery/Javascript 的情况下。它还附带一个支持包和一套额外的组件。

[开发者说明](http://www.trirand.com/blog/?page_id=932)：

> jqGrid 是并且将始终在最宽松和免费的 MIT 许可下获得许可。但是，许多客户和组织需要商业级许可证、支持和功能。这就是我们推出官方商业网站[http://www.trirand.net](http://www.trirand.net)的原因。我们决定将两个站点分开，以便减少客户的困惑。
> 
> 我们从 jqGrid 开始，为 3 个不同的平台（PHP、ASP.NET WebForms 和 ASP.NET MVC）构建了一整套名为 jqSuite 的组件。这些组件包括 HTML5 图表、树视图、表单构建器、调度器等等。除了纯 HTML5/Javascript 功能外，它们还与各自的平台紧密相连，并具有强大的服务器端 API、绑定到各种数据源、对 Oracle、MySQL、MS SQL 等许多数据提供者的无代码支持。这提供了全面的商业支持、有保证的响应、拥有超过 10,000 个帖子的活跃论坛（截至今天），并且由创建 jqGrid 的同一个人编写和支持。事实上，您的问题只会由创建相应产品的开发人员来回答。
> 
> 我们的商业许可非常简单明了——“每个开发人员”许可无限制（对服务器、项目、时间等没有限制）。只是团队中使用产品的开发人员的数量。价格合理，可以为您节省数月的开发时间。

第二个[网格](http://www.trirand.com/blog/?page_id=6)是免费版本，更适合那些熟悉 Jquery/Javascript 的人。有一个[wiki](http://www.trirand.com/jqgridwiki/doku.php)和可用的[演示很有帮助](http://trirand.com/blog/jqgrid/jqgrid.html)，还有一点谷歌搜索，您可以找到许多使用任何支持的语言的服务器端代码示例。

性能方面，网格几乎相同，归结为开发人员的易用性，以及您是否需要额外的组件和支持。

# c# - 为什么不能通过没有“out”的方法分配 Texture2D？

> ID：11967471
> 
> 赞同：0
> 
> 时间：2012-08-15T10:09:25.917
> 
> 标签：c#, xna

我有一个像这样拥有 Texture2D 的类：

```
public class TextureData
{
    public Texture2D texture;
} 
```

当我加载所有纹理时，我通过以下方法处理它：

```
public void LoadAllTextures()
{
    foreach(string s in texturesToBeLoaded)
    {
        TextureData data = new TextureData();
        LoadTexture(s, data.texture);
        // data.texture is still null.
    }
}
public void LoadTexture(string filename, Texture2D texture)
{
    texture = content.Load<Texture2D>(filename);
    // texture now holds the texture information but it doesn't
    // actually retain it when the method ends...why?
} 
```

我在这里错过了什么吗？如果我改变

```
public void LoadTexture(string filename, Texture2D texture) 
```

到

```
public void LoadTexture(string filename, out Texture2D texture) 
```

它工作正常。

* * *

编辑：好吧，我现在理解的方式是这样的......

```
public void LoadAllTextures()
{
    foreach(string s in texturesToBeLoaded)
    {
        TextureData data = new TextureData();
        // here, data.texture's memory address == 0x0001
        LoadTexture(s, data.texture /*0x0001*/);
    }
}
public void LoadTexture(string filename, Texture2D texture /* this is now 0x0001 */)
{
    texture = content.Load<Texture2D>(filename);
    // now the PARAMETER is set to 0x0002, not data.texture itself.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:11:16.363

C# 按值传递变量 - 传递了引用的副本，但原始变量或字段保持不变。添加`out`（或`ref`）使其通过引用传递，然后导致原始变量/字段被更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:15:00.810

卢塞罗的回答是正确的——你要做的实际改变是改变你的工作方法，如下所示：

```
public void LoadAllTextures()
{
    foreach(string s in texturesToBeLoaded)
    {
        TextureData data = LoadTexture(s);
        // do something with data here
    }
}

public Texture2D LoadTexture(string filename)
{
    Texture2D texture = content.Load<Texture2D>(filename);
    return texture;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:15:54.153

那是因为您正在修改引用的副本。假设前面`data.texture`指向一个内存位置`048`，当您调用`LoadTexture(s, data.texture);`参数时，纹理现在保存该值`048`。在您方法的第一行中，您`LoadTexture`为其分配了一个新的内存位置，因此现在`texture`指向全新的东西，但不是`048`. 这就是为什么你看不到任何变化。

但是，如果您更新 的任何属性`texture`，您也会看到原始数据的变化。

考虑以下情况：

```
public class TempClass
{
    public string MyProperty { get; set; }
} 
```

在您的`Main`方法中，您可以执行以下操作：

```
TempClass tc = new TempClass();
tc.MyProperty = "Some value";
SomeMethod(tc); 
```

您的 SomeMethod 在哪里：

```
public static void SomeMethod(TempClass temp)
{
    temp = null;
} 
```

现在这不会将对象设置`tc`为`TempClass`空。

您应该看到 Jon Skeet 的这篇文章：[C# 中的参数传递](http://www.yoda.arachsys.com/csharp/parameters.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T10:17:24.277

混淆可能来自通过引用传递的含义。在 C# 中，对象是通过引用传递的。这意味着如果您在函数中修改对象的属性，这些更改将反映在调用函数中，并且它们都具有对同一对象的引用。但是，按引用传递并不意味着如果您在函数中更新变量以引用不同的对象（例如，通过创建新对象），调用函数中的变量将被更新为引用相同的对象。如果这是您想要的行为，您必须使用 ref 或 out。

# python - 我应该使用什么来将 ICQ 与 Python 一起使用？

> ID：11967478
> 
> 赞同：0
> 
> 时间：2012-08-15T10:09:51.820
> 
> 标签：python, icq

我想写一个脚本来支持我的客户在线。我决定为此使用 ICQ-protocol（一种 icq-bot）。我有 25 个 icq uins。我需要一些能够：

1.  让他们都在线
2.  如果某些 uins 断开连接 - 重新连接它们。
3.  使用代理登录，因为 ICQ 服务器无法接受来自一个 IP 的连接。
4.  接收一些消息并回答它们。

我应该用什么来做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:15:45.630

我建议使用[XMPP](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)（又名 Jabber）而不是 ICQ，真的。

它是一个免费的协议，并且有 python APIs，比如[jabber.py](http://jabberpy.sourceforge.net/)和[xmpppy](http://xmpppy.sourceforge.net/)。

xmpppy 很简单：

```
jid = xmpp.protocol.JID('your id')
cl = xmpp.Client(jid.getDomain(),debug=[])
cl.connect()
cl.auth(jid.getNode(), 'your password')
cl.send(xmpp.protocol.Message('reciever id', 'your text')) 
```

* * *

此外，您可以使用所谓的传输来使用 XMPP 透明地发送/接收来自其他协议（如 ICQ、MSN、AOL 等）的消息，如果您*真的*需要 ICQ，这可能是您需要的。

* * *

否则，我只知道[NanoICQ](http://wiki.wxpython.org/NanoICQ)，它声称是一个基于 python 的 ICQ 客户端，我不知道该项目是否仍然处于活动状态......

# java - ConcurrentHashMap.put VS ConcurrentHashMap.replace

> ID：11967479
> 
> 赞同：9
> 
> 时间：2012-08-15T10:09:52.327
> 
> 标签：java, concurrency, map, java.util.concurrent, concurrenthashmap

从 Javadoc 我知道`ConcurrentHashMap.replace`是原子的，但是呢`ConcurrentHashMap.put`？我看到它们在源代码中的实现方式不同，但我无法弄清楚它们的区别。任何大师就如何使用这两种方法提供一些指导？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T10:15:32.047

它们在功能上是不同的。`replace`仅当指定键下已存储值时才存储键值对。的 API 文档对此进行`replace`了解释：

> 仅当当前映射到某个值时才替换键的条目。这相当于
> 
> ```
> if (map.containsKey(key)) {
>     return map.put(key, value);
> } else return null; 
> ```
> 
> 除了动作是原子执行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:25:18.327

`put()`继承自`AbstractMap`扩展的类`ConcurrentHashMap`。没有特定的并发合同`put()`。这种继承允许在`ConcurrentHashMap`Map 的“传统”上下文中使用。但是没有`AbstractMap`一种方法是原子的。

`replace()``ConcurrentMap`根据接口的要求实现。此接口需要原子操作，例如`replace()`. 只有此接口的方法才能在并发感知代码中使用。

要进行原子`put()`操作，请使用`putIfAbsent()`来自同一个`ConcurrentMap`接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-26T13:25:24.850

查看 ConcurrentHashMap 中的 PUT 代码，实现添加了原子行为，Java 文档说：

> Blockquote 该类遵循与 Hashtable 相同的功能规范，并包含与 Hashtable 的每个方法对应的方法版本。

As I understand, it should be safe to use put method in a ConcurrentHashMap.

# ruby-on-rails - Rails Time 类有一个 TimeZone 错误。这可以确认吗？

> ID：11967485
> 
> 赞同：2
> 
> 时间：2012-08-15T10:10:12.520
> 
> 标签：ruby-on-rails, ruby

开始 ：

```
Time.zone.now => "Eastern Time (US & Canada)"
Time.zone.now => Wed, 15 Aug 2012 06:05:37 EDT -04:00
Time.zone.now + 39.years => Tue, 15 Aug 2051 06:06:03 EST -05:00 
```

所以你知道了，我们传说中的东部夏令时的结束已经被 Ruby on Rails 预言到 2051 年结束。

也适用于任何其他时区更改区域。

```
Time.zone
 => "Pacific Time (US & Canada)" 
1.9.2p180 :003 > Time.zone.now
 => Wed, 15 Aug 2012 03:08:57 PDT -07:00 
1.9.2p180 :004 > Time.zone.now + 39.years
 => Tue, 15 Aug 2051 03:08:57 PST -08:00 
```

这存在于 Rails 3.0 和 Rails 3.2.6 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:14:23.067

是的，它看起来像一个错误。然而，它不是 Rails，而是 Ruby **Time**类。它在 2038 年之后的时代存在问题。

例如，对于 Ruby 1.8.7：

```
> Time.local(2037,8,16,9,30,15)
 => Sun Aug 16 09:30:15 -0400 2037 
>
> Time.local(2038,8,16,9,30,15)
 => Mon Aug 16 09:30:15 -0500 2038 
```

JRuby 1.6.7.2 - 例如 - 没有这个问题：

```
> Time.local(2038,8,16,9,30,15)
 => Mon Aug 16 09:30:15 -0400 2038 
```

请注意，在 64 位系统上的 MRI Ruby 上，支持添加持续时间的 ActiveSupport 时间扩展最终通过 active_support/core_ext/time/calculations.rb 中的此方法调用 Time.local 或 Time.utc：

```
 # Returns a new Time if requested year can be accommodated by Ruby's Time class
      # (i.e., if year is within either 1970..2038 or 1902..2038, depending on system architecture);
      # otherwise returns a DateTime
      def time_with_datetime_fallback(utc_or_local, year, month=1, day=1, hour=0, min=0, sec=0, usec=0)
        ::Time.send(utc_or_local, year, month, day, hour, min, sec, usec)
      rescue
        offset = utc_or_local.to_sym == :local ? ::DateTime.local_offset : 0
        ::DateTime.civil(year, month, day, hour, min, sec, offset)
      end 
```

我想问题是多年来> = 2038，他们期待一个溢出异常并使用 DateTime 代替。在 64 位系统上，这不会发生。

更新：此分析对于 Ruby 1.9.2+ 是不正确的。Time.local 按预期工作，但仍然出现原始问题。

# ruby-on-rails - Rails 节省了一半的帖子条目

> ID：11967486
> 
> 赞同：1
> 
> 时间：2012-08-15T10:10:14.213
> 
> 标签：ruby-on-rails, ruby, string

整个下午，

我有一个帖子模型，它有一个歌曲名称、歌曲字符串字段和一个 user_id 字段。用户可以创建最多 10,000 个字符的新歌曲。现在，当保存一首短歌时，它可以完整地显示它，但是当用户输入一首长歌说超过 400 个字符时，它似乎将其中的大部分内容切断，只显示大约 200 个字符，编辑时也会发生同样的情况，添加这首歌的遗骸，它仍然切断它。数据库是 Mysql 并在控制台中检查，它似乎也没有保存完整的条目。歌曲以键盘格式编写，例如 ETWR[TREW] | 威尔。我有一个谷歌并没有找到任何类似的东西。

我的代码如下；

post.rb

```
class Post < ActiveRecord::Base
  attr_accessible :song, :song_name, :user_id, :rating
  has_many :comments, dependent: :destroy
  has_many :ratings, dependent: :destroy
  belongs_to :user

  before_save :rating

  validates_presence_of :user_id
  validates :song_name, presence: true, length: { maximum: 70 }
  validates :song, presence: true, length: { maximum: 10000 }

  default_scope order: "posts.created_at DESC" 
```

post_controller.rb

```
def show
    @post = Post.find(params[:id])
    @comments = @post.comments
    @ratings = @post.ratings
    respond_to do |format|
      format.html 
      format.json { render json: @post }
    end
  end

  def new
    @post = Post.new
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  def edit
    @post = Post.find(params[:id])
  end

  def create
    @post = current_user.posts.build(params[:post])
    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, success: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new", error: "please sign in to post" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
    @post = Post.find(params[:id])
    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, success: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit", error: "please try again" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end 
```

和 show.html.erb

```
<div class="center hero-unit">
    <h1><%= @post.song_name %></h1>
     <p>Transcript by: <%= @post.user.name %><br/>
     Rating: <%= @post.rating %>/10</p>
    <br/>
     <p><%= raw @post.song %></p>
    <br/>
     <span class="timestamp">
       updated <%= time_ago_in_words(@post.updated_at) %> ago.
    </span>
       <%= link_to 'Edit', edit_post_path(@post) %>
    <br/>
       <% if !signed_in %>
         please login to rate songs
       <% else %>
         <%= render partial: "ratings/form", locals: { post_id: @post.id }%>
      <% end %>
   </div>

<%= render partial: "comments/form", locals: { post_id: @post.id } %>
<%= render partial: "comments/show", locals: { comments: @comments, post_id: @post.id } %> 
```

如果有人有任何想法，将不胜感激，如果您需要更多代码，请询问。欢呼安迪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:21:25.667

可能是数据库字段被定义为 varchar，它将字符串限制为 255 个字符。但我相信你可以快速检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:04:28.723

正如 Dane 已经指出的那样，您可能正试图将这些长字符串存储在容量有限的数据库字段中（例如*varchar*，它具有固定的、可定义的长度）。只需使用字段类型*文本*（长度不受限制）来保存长字符串...

要更改数据库，请使用 sql：

```
ALTER TABLE your_table CHANGE COLUMN your_column your_column TEXT; 
```

或使用包含以下内容的迁移：

```
change_column :your_table, :your_column, :text 
```

* * *

**更新：** 为避免此类错误，您还可以启用 MySQL 严格模式：[http](http://www.mysqlperformanceblog.com/2009/02/07/beware-of-mysql-data-truncation/) ://www.mysqlperformanceblog.com/2009/02/07/beware-of-mysql-data-truncation/ 。如果您尝试在太短的字段中保存太长的字符串，严格模式会引发错误。

# c# - 计算数组中字符串的出现次数

> ID：11967495
> 
> 赞同：0
> 
> 时间：2012-08-15T10:10:48.053
> 
> 标签：c#, arrays, string, count

我正在计算数组中存在多少个字符串-

```
Tags = "the cat the mat the sat";

string[] words = Tags.Split(' ');

int counter = 0;

foreach (string item in words)
{
    if (item != "")
    {
      counter++;

    }
} 
```

但是，我如何修改我的代码以便计算每个字符串的出现次数。所以例如 -

*   “该” = 3
*   “猫” = 1
*   “垫子” = 1
*   “星期六” = 1

然后以某种方式存储这些值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T10:21:21.850

你没有说你使用什么语言，但我看到它看起来像 c#。这是一种方法。

```
 Dictionary<string, int> dictionary = new Dictionary<string, int>();
    foreach (string word in words)
    {
        if (dictionary.ContainsKey(word))
        {
            dictionary[word] += 1; 
        }
        else
        {
            dictionary.Add(word,1);
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T10:29:39.417

试试这个：

```
var result = tags.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)
                 .GroupBy(tag => tag)
                 .ToDictionary(group => group.Key, group => group.Count()); 
```

* * *

```
var max = result.MaxBy(kvp => kvp.Value);
var min = result.MinBy(kvp => kvp.Value); 
```

使用来自 MoreLINQ 的 MaxBy 和[MinBy](http://code.google.com/p/morelinq/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:20:53.180

存储在地图中，其中键是单词，值是它出现次数的计数器....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T10:25:36.357

您必须使用字典。这里是：

```
 string Tags = "the cat the mat the sat";

        string[] words = Tags.Split(' ');

        Dictionary<string, int> oddw = new Dictionary<string, int>();

        foreach (string item in words)
        {
            if (item != "")
            {
                if (oddw.ContainsKey(item) == false)
                {
                    oddw.Add(item, 1);
                }
                else
                {
                    oddw[item]++;
                }
            }
        }

        foreach (var item in oddw)
        {
            Console.WriteLine(item);
        } 
```

# c++ - 可以在 .h 文件中声明静态全局变量吗？

> ID：11967502
> 
> 赞同：18
> 
> 时间：2012-08-15T10:11:24.553
> 
> 标签：c++, c, static, global, extern

static 关键字将全局变量的范围限制在该翻译单元内。如果我 `static int x`在 .h 文件中使用并包含该 .h 文件每隔一个文件，它们不都属于同一个翻译单元吗？那么，x 不是随处可见吗？那么静态现在的作用是什么？

另外，有没有使用`static const int x`, 其中 x 是一个全局变量？默认情况下不是所有的 const 全局变量都是静态的吗？并且 const 变量的范围是否仅限于 TU，即使它限制在文件中的 for 循环中？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-15T10:20:05.437

如果你写

```
static const int x 
```

在*.h文件中，* *#include* -s this *.h*的每个翻译单元都有自己的私有变量`x`。

如果你想让每个人都能看到 1 个全局变量，你应该写

```
extern const int x; 
```

在*.h*文件中和

```
const int x = ...; 
```

在*.cpp*文件之一中。

如果您想让一个静态 const int 仅对一个翻译单元可见 - 根本不要在*.h*文件中提及它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T10:17:58.493

> 如果我在 .h 文件中使用 static int x 并在每个其他文件中包含该 .h 文件，它们不都属于同一个翻译单元吗？

如果您将某些内容声明为静态（不在类内部，因为 class static 关键字具有不同的语义），则在其 TU 之外无法看到该静态变量。因此，将它放在头文件中将导致包括该头文件的每个 TU 拥有该静态变量的不同私有副本。

> 并且 const 变量的范围是否仅限于 TU，即使它限制在文件中的 for 循环中？

不。即使对于静态 const 值，范围也由它的声明决定。因此，范围将受到您的 for 括号的限制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T10:15:53.327

你最终会得到每个翻译的那个变量的私有副本，如果你把它放在那里会导致膨胀。必须在整个地方随机复制也是没有意义的。不，不行。

你可以`const int`在一个`namespace`块中声明一个；没关系。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T10:35:50.597

`const`可观察到的合格变量的区别在于，在该`static`版本中，每个翻译单元将获得一份副本，因此两个此类副本的地址比较可能会失败。

如果您从不使用`const`变量的地址，任何现代编译器都应该能够只使用该值并优化变量本身。在这种情况下，一个`static` `const`-qualified 变量是完全可以的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T10:16:21.977

基本上，每个源文件连同所有包含的头文件都是一个翻译单元。因此，如果您在头文件中有一个静态变量，那么它在包含头文件的每个源文件（翻译单元）中都是唯一的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-26T07:06:08.030

“静态全局”没有意义，它们在某种程度上是相互对立的。

术语“全局”经常被误用来描述在*文件范围内*的任何函数之外声明的变量。相反，全局变量是具有*外部链接*的变量，可以由项目中的任何文件访问 - 因此是全局变量。

与外部链接相反的是*内部链接*，这意味着变量只能由声明它的*翻译单元*访问。翻译单元意味着一个`.c`文件及其包含的所有标题（递归）。

`static`是变量获得内部链接的保证。因此其他翻译将无法访问它或声明`extern`引用它的变量。

如果您`static`在头文件中声明一个变量会发生什么情况，多个翻译单元将获得一个具有该名称的单独变量。尽管聪明的链接器会注意到这一点并给出链接器错误，但代码会编译得很好。这些类型的链接器错误通常是非描述性的并且难以追踪。

这导致我们采用以下最佳实践：

*   永远不要在头文件中声明*任何变量，因为这通常会产生细微的错误和链接器错误。*
*   为防止出现此类错误，请始终使用“header guards”包围所有头文件：

    ```
    #ifndef MYHEADER_H 
    #define MYHEADER_H 
      /* contents of header */ 
    #endif 
    ```

*   `static`出于私有封装和减少命名空间混乱的目的，应声明在文件范围内声明的所有变量。同样，`extern`应该避免，因为它会导致糟糕的设计和意大利面条式编程。

# iphone - 通过 UIDocumentInteractionController 将 pdf 文件添加到 iBooks 但不打开文件

> ID：11967508
> 
> 赞同：1
> 
> 时间：2012-08-15T10:12:06.853
> 
> 标签：iphone, ios, ibooks, uidocumentinteraction

我有小代码可以使用 UIDocumentInteractionController 从 iBooks 中的应用程序中打开 pdf 文件。有用。但我只想保存并将文件添加到 iBooks 库，而不是立即打开它，这意味着当用户从菜单中选择 iBooks 应用程序时，只会显示一个警报视图以通知用户该应用程序已成功添加到 iBooks，而不是打开 pdf 文件，并且用户仍在应用程序中。对我的问题有任何想法，请帮助我，非常感谢这是我用来从我的应用程序中打开 ibook 中的 pdf 文件的示例代码

```
NSURL *url = [NSURL fileURLWithPath:FilePath];
UIDocumentInteractionController *docController = [UIDocumentInteractionController interactionControllerWithURL:url];

docController.delegate = self;
[docController retain];
BOOL isValid = [docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];
if(isValid){
} 
```

顺便说一句，如果没有打开 ibook 就无法解决我的问题，那么当用户在 ibook 中阅读书籍而不按主页按钮时，还有其他方法可以返回我的应用程序吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:24:19.127

您描述保存流程的方式与 Apple API 的工作方式不同。

如果您使用`UIDocumentInteractionController`PDF，您将被发送到用户选择的应用程序。在水下什么都没有做，文件 URL 被直接发送到另一个应用程序。此应用程序（例如 iBooks）将检查文件并保存。因此，您无法阻止它打开应用程序。

# android - 在 Honeycomb 及更高版本上使用没有 Holo 主题的 ActionBarSherlock

> ID：11967515
> 
> 赞同：2
> 
> 时间：2012-08-15T10:12:37.383
> 
> 标签：android, android-3.0-honeycomb, android-4.0-ice-cream-sandwich, actionbarsherlock, android-theme

我正在构建一个应该能够在 Android 2.1 及更高版本上运行的 Android 应用程序。`minSdkVersion`设置为*7*，`targetSdkVersion`设置为*14*。为了拥有 ActionBar 功能，我正在使用 ActionBarSherlock 库，并根据需要将应用程序的主题设置为`Theme.Sherlock`（等）的派生类。

除了提供一个 ActionBar，我注意到当我在 Honeycomb/ICS 设备上运行应用程序时，其他一些小部件和对话框现在具有不同的（即 Holo）外观。我想要一个 ActionBar 但保持正常的非 Holo Android 主题 - Holo 样式与应用程序的其余部分不匹配。尤其是 EditText 视图看起来明显不同。

我看到 ActionBarSherlock 在*values-11* (Honeycomb) 和*values-14* (ICS) 中定义了一些自定义主题，它们继承自*Theme.Holo*。*values-14*中还有自定义样式，将 ABS 样式映射到原生样式（因为原生 ActionBar 用于 ICS+）。

我发现我至少必须做以下事情：

1.  *禁用values-11*和*values-14*的自定义主题- 这会阻止 Holo 小部件/对话框出现。

2.  禁用 ICS+ 的 ActionBar 的本机实现 - 这会阻止 ICS 上的崩溃，因为它依赖于作为 Holo 主题的一部分提供的本机 ActionBar。这需要修改库。

3.  禁用*values-14*的自定义样式- 这与兼容性 ActionBar 的外观/样式混为一谈。

我不确定是否还有其他我遗漏的问题。有没有人找到一种在不修改库的情况下将非 Holo Android 主题与 ActionBarSherlock 一起使用的好方法？在ICS及以上使用兼容性ActionBar有什么问题吗？

# python - Python连接列表

> ID：11967516
> 
> 赞同：13
> 
> 时间：2012-08-15T10:12:44.790
> 
> 标签：python, string, list

我是 python 新手，这只是为了在我的 PC 上自动化一些东西。我想连接列表中的所有项目。问题是

```
''.join(list) 
```

不起作用，因为它不是字符串列表。

这个网站[http://www.skymind.com/~ocrow/python_string/](http://www.skymind.com/~ocrow/python_string/)说最有效的方法是

```
''.join([`num` for num in xrange(loop_count)]) 
```

但这不是有效的python ...

有人可以解释在 string.join() 中包含这种循环的正确语法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-15T10:14:26.820

您需要使用[`str()`构造函数](http://docs.python.org/library/functions.html#str)将列表中的所有内容转换为字符串：

```
''.join(str(elem) for elem in lst) 
```

请注意，使用`list`变量名通常不是一个好主意，它会隐藏内置`list`构造函数。

我在那里使用了一个生成器表达式来将`str()`构造函数应用于列表中的每个元素。另一种方法是使用[`map()`函数](http://docs.python.org/library/functions.html#map)：

```
''.join(map(str, lst)) 
```

您示例中的反引号是调用[`repr()`](http://docs.python.org/library/functions.html#repr)值的另一种拼写，与 ; 略有不同`str()`。你可能想要后者。因为它违反了 Python 的[“应该有一种——最好只有一种——明显的方式来做到这一点”的原则。](http://www.python.org/dev/peps/pep-0020/)，反引号语法已从 Python 3 中删除。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T10:15:00.050

这是另一种方式（讨论是关于 Python 2.x）：

```
''.join(map(str, my_list)) 
```

该解决方案将具有最快的性能，并且看起来不错且简单 imo。使用生成器不会更有效。实际上，这会更有效，因为`''.join`必须根据元素的长度为字符串分配确切的内存量，因此无论如何在创建字符串之前都需要消耗整个生成器。

请注意，````它已在 Python 3 中删除，不再使用它不是一个好习惯，`str()`如果必须使用，请使用更明确。`str(num)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T10:13:37.980

只需使用它，不需要`[]`和使用`str(num)`：

```
''.join(str(num) for num in xrange(loop_count)) 
```

对于列表，只需替换`xrange(loop_count)`为列表名称。

例子：

```
 >>> ''.join(str(num) for num in xrange(10)) #use range() in python 3.x
    '0123456789' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T10:15:41.370

`[x for x in ...]`如果您的 Python 对于“列表推导”（奇怪的语法）来说太旧了，请使用`map()`：

```
 ''.join(map(str, list)) 
```

# android - 始终在 android 中使用启动器活动启动应用程序

> ID：11967517
> 
> 赞同：0
> 
> 时间：2012-08-15T10:12:44.803
> 
> 标签：android

我的应用程序包含 3 个活动。假设 A,B,C 。A是启动活动。现在以这种方式运行应用程序 - A -> B -> C 现在我按 Home 键（出现主屏幕）。现在，当我再次按下应用程序图标启动应用程序时，然后从前面的活动 C 开始。但是我希望我的应用程序在主屏幕上按应用程序图标时始终以活动 A 开头。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:15:35.340

在 OnPause 期间完成活动 B 和 C

```
 onPause(){ finish();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:17:41.383

```
onPause()
{
  B.this.finish();
  C.this.finish();
} 
```

这将从活动堆栈中删除 B 和 C 活动，因此您将不会再次看到活动 B 和 C。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:19:04.177

我建议你覆盖主页按钮

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if ((keyCode == KeyEvent.KEYCODE_HOME)) {
    Toast.makeText(this, "You pressed the home button!", Toast.LENGTH_LONG).show();    
// finish activities here                 
    return true;
}
return super.onKeyDown(keyCode, event);
} 
```

# jquery - IE 9 中的 jquery ajax 问题

> ID：11967518
> 
> 赞同：0
> 
> 时间：2012-08-15T10:12:46.570
> 
> 标签：jquery, internet-explorer-9

我有一个基于 jquery 移动的小型应用程序，我在 IE 9 中面临以下问题。我正在我的应用程序中下载某些文件，这些文件具有带有 ip 地址的绝对路径：http: [//xxx.xxx.xxx.xxx/folder1 /folder2/file.json](http://xxx.xxx.xxx.xxx/folder1/folder2/file.json)

现在，问题是如果我通过网站地址调用网络应用程序：www.exampleaddress.com

那么下载文件的ajax调用失败但是如果我通过IP地址调用网站：

[http://xxx.xxx.xxx.xxx/folder1/webapp.html](http://xxx.xxx.xxx.xxx/folder1/webapp.html)，然后ajax调用工作正常，没有任何问题。

我只在 IE 9 中遇到此问题，否则，我在其他浏览器（例如 Firefox、Safari、Chrome 等）中没有问题。如何解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:40:48.983

听起来您正在使用浏览器的“同源”安全功能来阻止 Javascript 加载跨域数据（显然浏览器不知道 IP 地址和域实际上是同一个站点）。

最大的问题是为什么你在代码中有 IP 地址的硬编码绝对路径？如果它们不是那样硬编码，你就不会有问题。

您的问题的解决方案不是对域进行硬编码。从问题看来，一切都在同一个站点中，所以只需从 URL 中删除硬编码的 IP 地址，就可以了。

所以你的 URL 看起来像这样：`/folder1/folder2/file.json`

无论您以何种方式访问​​该站点，这都应该有效。

# javascript - 如果选中收音机，则需要输入字段

> ID：11967519
> 
> 赞同：13
> 
> 时间：2012-08-15T10:12:51.097
> 
> 标签：javascript, html, radio-button, onchange, required

只有在选中某个收音机时，我才能以某种方式将所需的属性插入输入字段吗？

我有一个名为“ladder-meters”的输入字段，默认情况下不需要填写。但是，如果用户选中一个名为“ladder”的单选按钮，则需要填写“ladder-meters”字段。

我的输入如下所示：

```
<input type="text" name="ladder-meters" id="ladder-meters"> 
```

并且应该在电台的 onchange 活动中喜欢这个

```
<input type="text" name="ladder-meters" id="ladder-meters" required> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T10:22:05.983

```
document.getElementById("ladder").addEventListener('change', function(){
    document.getElementById("ladder-meters").required = this.checked ;
}) 
```

每当单击复选框时，将更改所需属性以匹配复选框的选中属性。要反转这种关系，请替换`this.checked`为`!this.checked`

这可能需要一些调整以适应您的特定项目。

这将与此复选框一起使用：

```
<input type='checkbox' id='ladder' name='ladder' /> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-06-15T08:08:39.833

试过 F. Orvalho，对我不起作用，我不得不使用

```
$('#ladder').change(function () {
    if(this.checked) {
        $('#ladder-meters').prop('required', true);
    } else {
        $('#ladder-meters').prop('required', false);
    }
}); 
```

它可能很有用。感谢 F. Orvalho 的结构

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-15T10:20:56.850

使用 jQuery 轻松实现：

```
$('#ladder').change(function () {
    if($(this).is(':checked') {
        $('#ladder-meters').attr('required');
    } else {
        $('#ladder-meters').removeAttr('required');
    }
}); 
```

# validation - 日期验证：在文本框中设置最小和最大日期

> ID：11967520
> 
> 赞同：2
> 
> 时间：2012-08-15T10:12:56.387
> 
> 标签：validation, vba, date, excel

我的 VBA 代码中有一个函数，它为文本框设置特定的日期格式。

这是我验证日期格式正确的代码：

```
Function CheckDate(DateStg As String) As Boolean

If DateStg = "" Then
  ' Accept an empty value in case user has accidentally moved to a new row
  CheckDate = True
  lblMessage.Caption = ""
  Exit Function
End If

If IsDate(DateStg) Then
  CheckDate = True
  lblMessage.Caption = ""
Else
  CheckDate = False
  lblMessage.Caption = "Sorry I am unable to recognise " & DateStg & " as a date."
End If

End Function 
```

除了检查文本框中的日期是否为实际日期外，我还需要验证文本框日期不小于当前日期减去 1 个月，并且。另外，我想验证日期不超过当前日期加上 1 年。

所以：

*   DateStg > 今天 - 1 个月
*   DateStg < 今天 + 1 年

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:59:26.387

您可以使用一些功能：

```
''Assume date is not good
DateOK=False
If IsDate(DateStg) Then
     If DateStg > dateAdd("m",-1,Date()) _
         And DateStg < dateAdd("m",12,Date()) Then
        ''Date is good
        DateOK=True
     End If
End if 
```

在大多数情况下，文本框可以设置为仅接受日期，您可以设置验证规则来检查范围，因此可能不需要代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:35:49.380

如果您只想检查日期，可以使用 DateAdd 函数来获取要比较的日期：

```
'Subtract a month from today and return it as a string
Format(DateAdd("m", -1, Now), "yyyy-mm-dd")

'Add a year to today and return it as a string
Format(DateAdd("yyyy", 1, Now), "yyyy-mm-dd") 
```

# objective-c - 在iOS中功能结束前突出显示按钮

> ID：11967522
> 
> 赞同：0
> 
> 时间：2012-08-15T10:13:07.990
> 
> 标签：objective-c, ios, function, button, highlight

我会尽可能清楚地解释我的问题。我有一架钢琴，你可以弹奏并录制你所做的歌曲，你弹奏的钢琴的每个按钮，这个按钮都会突出显示。问题是我有另一个按钮来播放我录制的歌曲，但我想要的是突出显示正在发声的钢琴的每个按钮。这是我编写的函数的一部分：

```
- (IBAction)play:(id)sender
{   
    for(NSString *string in [Singleton sharedInstance].notesMusicals)
        if([string isEqualToString:@"doMenor"]){
            UIImage *buttonImage = [UIImage imageNamed:@"do-menor_ON.png"];
            [doMenorButton setImage:buttonImage forState:UIControlStateNormal];
            CFBundleRef mainBundle = CFBundleGetMainBundle();
            CFURLRef soundFileURLRef;
            soundFileURLRef = CFBundleCopyResourceURL(mainBundle,(CFStringRef) @"Do_m", CFSTR ("mp3"), NULL);
            UInt32 soundID;
            AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
            AudioServicesPlaySystemSound(soundID);
            //doMenorButton.highlighted = YES;
             sleep(1);

        }
        else if([string isEqualToString:@"Re"]){
            UIImage *buttonImage = [UIImage imageNamed:@"do-menor_OFF.png"];
            [doMenorButton setImage:buttonImage forState:UIControlStateNormal];
            UIImage *buttonImage1 = [UIImage imageNamed:@"re_ON.png"];
            [reButton setImage:buttonImage1 forState:UIControlStateNormal];
            CFBundleRef mainBundle = CFBundleGetMainBundle();
            CFURLRef soundFileURLRef;
            soundFileURLRef = CFBundleCopyResourceURL(mainBundle,(CFStringRef) @"Re", CFSTR ("mp3"), NULL);
            UInt32 soundID;
            AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
            AudioServicesPlaySystemSound(soundID);
            sleep(1);

        } 
```

您可以看到，在每个音符中，我都会突出显示该音符的按钮，但我遇到的问题是该按钮仅在功能结束后才突出显示，因此一旦旋律完成，我的所有音符都会突出显示。我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:34:28.800

问题是`sleep(1)`通话。用户界面元素只会在`play`函数返回到主运行循环时更新。

使用这种同步方法进行计时是一个糟糕的设计。例如，您可以使用`NSTimer`异步等待一秒钟。但这需要对您的`play`方法进行重大重新设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:46:30.293

您必须有某种计时器对象（请参阅 参考资料`NSTimer`）来与音乐同步，然后根据需要突出显示按钮（确保为此使用主线程）。

这样做不会影响当前按下的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:47:34.837

试试这个（我没有尝试编译这么多错别字等）：

```
// Assumes ARC. Note that since the block retains "self", you won't get dealloc'd
// until the queued block has run. If the user wants to stop the music set "cancel = YES"

@implementation MyClass
{
    NSArray *notes;
    NSUInteger theNote;
    BOOL cancel;
}

- (void)playOneSound
{
    if(cancel) return;

    if([string isEqualToString:@"doMenor"]){
        UIImage *buttonImage = [UIImage imageNamed:@"do-menor_ON.png"];
        [doMenorButton setImage:buttonImage forState:UIControlStateNormal];
        CFBundleRef mainBundle = CFBundleGetMainBundle();
        CFURLRef soundFileURLRef;
        soundFileURLRef = CFBundleCopyResourceURL(mainBundle,(CFStringRef) @"Do_m", CFSTR ("mp3"), NULL);
        UInt32 soundID;
        AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
        AudioServicesPlaySystemSound(soundID);
        //doMenorButton.highlighted = YES;
    }
    else if([string isEqualToString:@"Re"]){
        UIImage *buttonImage = [UIImage imageNamed:@"do-menor_OFF.png"];
        [doMenorButton setImage:buttonImage forState:UIControlStateNormal];
        UIImage *buttonImage1 = [UIImage imageNamed:@"re_ON.png"];
        [reButton setImage:buttonImage1 forState:UIControlStateNormal];
        CFBundleRef mainBundle = CFBundleGetMainBundle();
        CFURLRef soundFileURLRef;
        soundFileURLRef = CFBundleCopyResourceURL(mainBundle,(CFStringRef) @"Re", CFSTR ("mp3"), NULL);
        UInt32 soundID;
        AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
        AudioServicesPlaySystemSound(soundID);
    }
    // now going to queue up another sound to play in 1 second, leaving your UI responsive
    double delayInSeconds = 1.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^{ [self playOneSound];} );
}

- (IBAction)play:(id)sender
{
    notes = [Singleton sharedInstance].notesMusicals;
    theNote = 0;
    cancel = NO;
    // by defering til the next runLoop round, the play button gets to unhilite
    dispatch_async(dispatch_get_main_queue(), ^{ [self playOneSound];} );
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-15T11:28:36.210

尝试在单独的线程中调用您的突出显示代码

```
[self performSelectorInBackground:@selector(myMethod:) withObject:_myParamsArray]; 
```

例如：

```
...
        else if([string isEqualToString:@"Re"]){
            [self performSelectorInBackground:@selector(highlight:) withObject:myButton];
            CFBundleRef mainBundle = CFBundleGetMainBundle();
            CFURLRef soundFileURLRef;
            soundFileURLRef = CFBundleCopyResourceURL(mainBundle,(CFStringRef) @"Re", CFSTR ("mp3"), NULL);
            UInt32 soundID;
            AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
            AudioServicesPlaySystemSound(soundID);
            sleep(1);

        }

...

-(void) highlight:(UIButton)*button
{
                UIImage *buttonImage1 = [UIImage imageNamed:@"re_ON.png"];
                [button setImage:buttonImage1 forState:UIControlStateNormal];
} 
```

如果代码中有任何错别字，请原谅。我在编辑器中对其进行了修改。

您需要修改我的示例以停用其他突出显示的按钮，但这应该没问题

# ruby - 使用 SequenceFile 的 Hadoop 流式处理（在 AWS 上）

> ID：11967530
> 
> 赞同：4
> 
> 时间：2012-08-15T10:13:47.490
> 
> 标签：ruby, hadoop, amazon-web-services, amazon-emr

我有大量的 Hadoop 序列文件，我想在 AWS 上使用 Hadoop 进行处理。我现有的大部分代码都是用 Ruby 编写的，因此我想在 Amazon EMR 上使用 Hadoop Streaming 以及我的自定义 Ruby Mapper 和 Reducer 脚本。

我找不到任何关于如何将序列文件与 Hadoop 流集成以及如何将输入提供给我的 Ruby 脚本的文档。我很感激一些关于如何启动作业（直接在 EMR 上，或者只是一个普通的 Hadoop 命令行）以使用 SequenceFiles 的说明，以及一些关于如何期望将数据提供给我的脚本的信息。

--编辑：我之前错误地提到了 StreamFiles 而不是 SequenceFiles。我认为我的数据文档不正确，但很抱歉。答案很容易改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:50:19.077

对此的答案是将输入格式指定为 Hadoop 的命令行参数。

`-inputformat SequenceFileAsTextInputFormat`

您可能希望将 SequenceFile 作为文本，但`SequenceFileAsBinaryInputFormat`如果那更合适，也有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:27:13.290

不确定这是否是您所要求的，但使用 ruby​​ map reduce 脚本和 hadoop 命令行的命令看起来像这样：

```
% hadoop jar $HADOOP_INSTALL/contrib/streaming/hadoop-*-streaming.jar \
  -input input/ncdc/sample.txt \
  -output output \
  -mapper ch02/src/main/ruby/max_temperature_map.rb \
  -reducer ch02/src/main/ruby/max_temperature_reduce.rb 
```

您可以（并且应该）将组合器与大数据集一起使用。使用选项添加它`-combiner`。组合器输出将直接输入到您的映射器中（但不能保证这将被调用多少次，如果有的话）。否则，您的输入将被拆分（根据标准 hadoop 协议）并直接输入您的映射器。该示例来自 O'Reily 的 Hadoop：权威指南第 3 版。它有一些关于流式传输的非常好的信息，以及一个专门用于使用 ruby​​ 进行流式传输的部分。

# c# - 从 Internet 获取图像时的一个有趣的异常

> ID：11967535
> 
> 赞同：7
> 
> 时间：2012-08-15T10:14:15.823
> 
> 标签：c#, wpf, image, argumentexception

我正在 WPF 中开发一个程序，从网上获取图片并使用图像控件。我的图片列表有 50 张图片（来自 vimeo 的缩略图）。一切看起来都很好，但数字 45。图片有一些问题，当我到达第 45 张图片时，我得到了这个异常：

> 值不在预期范围内。

[异常 http://img232.imageshack.us/img232/2748/5688301315b2497090468bc.png](http://img232.imageshack.us/img232/2748/5688301315b2497090468bc.png)

我使用了 try-catch 但我无法捕捉到它。因为它发生在 Bitmap 类中。以下是详细信息：

```
   在 System.Windows.Media.ColorContext.GetColorContextsHelper（GetColorContextsDelegate getColorContexts）
   在 System.Windows.Media.Imaging.BitmapFrameDecode.get_ColorContexts()
   在 System.Windows.Media.Imaging.BitmapImage.FinalizeCreation()
   在 System.Windows.Media.Imaging.BitmapImage.OnDownloadCompleted（对象发送方，EventArgs e）
   在 System.Windows.Media.UniqueEventHelper.InvokeEvents（对象发送者，EventArgs 参数）
   在 System.Windows.Media.Imaging.LateBoundBitmapDecoder.DownloadCallback（对象 arg）
   在 System.Windows.Threading.ExceptionWrapper.InternalRealCall（委托回调，对象 args，Int32 numArgs）
   在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen（对象源，委托方法，对象 args，Int32 numArgs，委托 catchHandler）
   在 System.Windows.Threading.DispatcherOperation.InvokeImpl()
   在 System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext（对象状态）
   在 System.Threading.ExecutionContext.RunInternal（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
   在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
   在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）
   在 System.Windows.Threading.DispatcherOperation.Invoke()
   在 System.Windows.Threading.Dispatcher.ProcessQueue()
   在 System.Windows.Threading.Dispatcher.WndProcHook（IntPtr hwnd，Int32 msg，IntPtr wParam，IntPtr lParam，Boolean& 处理）
   在 MS.Win32.HwndWrapper.WndProc（IntPtr hwnd，Int32 msg，IntPtr wParam，IntPtr lParam，Boolean& 处理）
   在 MS.Win32.HwndSubclass.DispatcherCallbackOperation（对象 o）
   在 System.Windows.Threading.ExceptionWrapper.InternalRealCall（委托回调，对象 args，Int32 numArgs）
   在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen（对象源，委托方法，对象 args，Int32 numArgs，委托 catchHandler）
   在 System.Windows.Threading.Dispatcher.LegacyInvokeImpl（DispatcherPriority 优先级，TimeSpan 超时，委托方法，对象 args，Int32 numArgs）
   在 MS.Win32.HwndSubclass.SubclassWndProc（IntPtr hwnd，Int32 msg，IntPtr wParam，IntPtr lParam）
   在 MS.Win32.UnsafeNativeMethods.DispatchMessage（味精和味精）
   在 System.Windows.Threading.Dispatcher.PushFrameImpl（DispatcherFrame 框架）
   在 System.Windows.Threading.Dispatcher.PushFrame（DispatcherFrame 框架）
   在 System.Windows.Threading.Dispatcher.Run()
   在 System.Windows.Application.RunDispatcher（对象忽略）
   在 System.Windows.Application.RunInternal（窗口窗口）
   在 System.Windows.Application.Run（窗口窗口）
   在 System.Windows.Application.Run()
   在 C:\.........\obj\x86\Debug\App.g.cs:line 0 中的 youtube.App.Main()
   在 System.AppDomain._nExecuteAssembly（RuntimeAssembly 程序集，字符串 [] 参数）
   在 System.AppDomain.ExecuteAssembly（字符串 assemblyFile，证据 assemblySecurity，String [] args）
   在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   在 System.Threading.ThreadHelper.ThreadStart_Context（对象状态）
   在 System.Threading.ExecutionContext.RunInternal（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
   在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
   在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）
   在 System.Threading.ThreadHelper.ThreadStart()

```

这是我的代码：

```
for (int i = 0; i <50 ; i++)
{
    product p = new product();

    Common.SelectedOldColor = p.Background;
    p.VideoInfo = results[i];
    Common.Products.Add(p, false);
    p.Visibility = System.Windows.Visibility.Hidden;
    p.Drop_Event += new product.DragDropEvent(p_Drop_Event);
    main.Children.Add(p);
} 
```

当我设置`p.VideoInfo = results[i];`属性时，它分配了一些东西：

```
private VideoList videoInfo;
public VideoList VideoInfo
{
    get { return videoInfo; }
    set
    {
        videoInfo = value;
        label1.Content = videoInfo.Title;
        try
        {
             image1.Source = new BitmapImage(new Uri(videoInfo.ThumbNail));
        }
        catch (Exception ex)
        {

        }             
    }
}

image1.Source = new BitmapImage(new Uri(videoInfo.ThumbNail)); 
```

这是问题的根源。但仅针对此图像：

![问题图片](../Images/1d26aa64becd81644a2441f2e34fdcf3.png)

我尝试了很多次，每个图像都很好。但是这个不一样？也许是模糊？

我该如何解决这个问题？也许我可以使用不同的方式将源分配给 image1？

我希望我描述得很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T10:18:18.217

尝试忽略颜色配置文件，可能元数据已损坏：

```
var bi = new BitmapImage();
bi.BeginInit();
    bi.CreateOptions = BitmapCreateOptions.IgnoreColorProfile;
    bi.UriSource = new Uri("http://hanselman.com/blog/images/JPGwithBadColorProfile.jpg");
bi.EndInit();

foo.Source = bi; 
```

或使用 XAML：

```
<Image>
    <Image.Source>
        <BitmapImage CreateOptions="IgnoreColorProfile" UriSource="{Binding ....}"/>
    </Image.Source>
</Image> 
```

也看这里[Source](http://www.hanselman.com/blog/DealingWithImagesWithBadMetadataCorruptedColorProfilesInWPF.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:18:53.283

这让我想起了我自己的问题。如果您在紧密循环中加载图像，它将在 X 图像之后崩溃。您可能需要将线程返回给调度程序一秒钟以清理一些已使用的内存。

资料来源：

*   [如何使用调度程序加载多个图像](https://stackoverflow.com/q/8094355/637425)
*   [Silverlight：流中的 BitmapImage 引发异常（灾难性故障（来自 HRESULT 的异常：0x8000FFFF (E_UNEXPECTED)））](https://stackoverflow.com/a/6936084/637425)

# magento - 在 Magento 的购物车页面上更改模板页面布局

> ID：11967538
> 
> 赞同：-1
> 
> 时间：2012-08-15T10:14:27.483
> 
> 标签：magento

请帮助我。我想在 magento 中更改购物车页面的模板页面布局。

以下是网址： http: [//www.wildgoosetrading.com/index.php/checkout/cart/](http://www.wildgoosetrading.com/index.php/checkout/cart/)

我希望这看起来像其他类别的页面。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T10:46:48.047

您将在 checkout.xml 布局文件中设置购物车的模板。

在`checkout_cart_index`部分（紧随其后`<default>`）中查找以下块并更改购物车页面使用的模板；

```
 <!-- Mage_Checkout -->
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference> 
```

**编辑**

我知道这是公认的答案，但 soipo 的答案是更好的方法。将更改应用到 local.xml，不要修改核心布局文件，在主题布局中使用 local.xml 覆盖它们。见[http://www.classyllama.com/development/magento-development/the-better-way-to-modify-magento-layout](http://www.classyllama.com/development/magento-development/the-better-way-to-modify-magento-layout)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T23:27:41.310

在 local.xml 文件中，您只需添加以下内容：

```
 <checkout_cart_index translate="label">
 <reference name="root">
        <action method="setTemplate"><template>page/3columns.phtml</template ></action >  
  </reference> 
```

只需将模板更改为您需要的模板即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T16:18:54.437

通过使用 Magento 的常用方法，丢失`setTemplate`了 Magento 自己引入的固有粒度。`app/design/frontend/base/default/layout/checkout.xml`

Magento 特意为此创建了两种方法：`setCartTemplate`和`setEmptyTemplate`. 他们处理两个不同的条件。

一种情况是购物车有物品时，另一种情况是购物车是空的。通过调用`setTemplate`，该粒度丢失。这意味着带有物品的购物车和带有零物品的购物车都将显示相同的模板，这可能是不希望的。

更多信息可以在这里找到：[https ://stackoverflow.com/a/33875491/2973534](https://stackoverflow.com/a/33875491/2973534)

# objective-c - UITableView 改变风格

> ID：11967539
> 
> 赞同：0
> 
> 时间：2012-08-15T10:14:37.740
> 
> 标签：objective-c, ios, uitableview, storyboard

我有一个 uitableView，其中包含我以编程方式创建的不同部分和行

当我点击一行时，我将转到新视图，在导航栏中的新视图中，我有带有取消按钮的 canel 按钮，它应该像后退按钮一样工作，但是当我单击取消时，它会加载表格，但会更改表格样式组到平原

提前致谢！

有人知道为什么吗？

你能帮我吗？我想知道它为什么会改变。我应该添加什么以具有相同的 stype

这是我的代码：

在第一个表中，我以编程方式和通过情节提要添加了样式

```
- (id)initWithStyle:(UITableViewStyle)style
{
style = UITableViewStyleGrouped;
self = [super init];
if (self) {
    self = [super initWithStyle:style];
    monthTitle = [[NSMutableArray alloc] init];
}
return self;
} 
```

按钮代码

```
-(void)cancelItem{
Report *report = [[Report alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:report animated:YES];
[self.tableView reloadData];

} 
```

**编辑**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
_selectedIndex = indexPath.section;
[self.tableView reloadData];
switch (indexPath.section){
    case 0:
        [self performSegueWithIdentifier:@"WorkTime" sender:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T06:07:28.127

我们可以将样式设置为

```
[[UITableViewController alloc] initWithStyle:UITableViewStyleGrouped]; 
```

# mysql - 排除某行

> ID：11967543
> 
> 赞同：1
> 
> 时间：2012-08-15T10:14:53.803
> 
> 标签：mysql, select

我有几个连接的查询。我的查询根据他们的总步数返回排行榜的前十名。我想排除在列中具有值的所有行`privacy`设置为`out`.

MySQL 查询的现状：

```
SELECT ga.owner_id, u.displayname, g.title, SUM(ga.steps) as `Total Steps`, u.user_id, g.group_id, pri.privacy FROM engine4_passport_goalactivitys ga
LEFT JOIN engine4_passport_goals goals ON goals.goal_id = ga.owner_id
LEFT JOIN engine4_passport_passports p ON p.passport_id = goals.owner_id
LEFT JOIN engine4_users u ON u.user_id = p.owner_id
LEFT JOIN engine4_passport_teams t ON t.owner_id = u.user_id
LEFT JOIN engine4_group_groups g ON g.group_id = t.group_id
LEFT JOIN engine4_passport_privacy pri on pri.user_id = u.user_id
GROUP BY u.user_id
ORDER BY `Total Steps` DESC
LIMIT 0,10 
```

我努力了：

```
SELECT ga.owner_id, u.displayname, g.title, SUM(ga.steps) as `Total Steps`, u.user_id, g.group_id, pri.privacy FROM engine4_passport_goalactivitys ga
LEFT JOIN engine4_passport_goals goals ON goals.goal_id = ga.owner_id
LEFT JOIN engine4_passport_passports p ON p.passport_id = goals.owner_id
LEFT JOIN engine4_users u ON u.user_id = p.owner_id
LEFT JOIN engine4_passport_teams t ON t.owner_id = u.user_id
LEFT JOIN engine4_group_groups g ON g.group_id = t.group_id
LEFT JOIN engine4_passport_privacy pri on pri.user_id = u.user_id
AND pri.privacy <> 'out'
GROUP BY u.user_id
ORDER BY `Total Steps` DESC
LIMIT 0,10 
```

上面两个查询之间的区别在于：

`AND pri.privacy <> 'out'`

但是，它不会排除隐私设置为“out”的用户，而是将它们包含在查询中，并将其隐私值设置为`null`

我也尝试过`where`，`and`但它只返回 0 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:39:25.100

解决了 -

```
SELECT ga.owner_id, u.displayname, g.title, SUM(ga.steps) as `Total Steps`, u.user_id, g.group_id, pri.privacy FROM engine4_passport_goalactivitys ga
LEFT JOIN engine4_passport_goals goals ON goals.goal_id = ga.owner_id
LEFT JOIN engine4_passport_passports p ON p.passport_id = goals.owner_id
LEFT JOIN engine4_users u ON u.user_id = p.owner_id
LEFT JOIN engine4_passport_teams t ON t.owner_id = u.user_id
LEFT JOIN engine4_group_groups g ON g.group_id = t.group_id
LEFT JOIN engine4_passport_privacy pri on pri.user_id = u.user_id
WHERE pri.privacy is null OR pri.privacy = 'in'
GROUP BY u.user_id
ORDER BY `Total Steps` DESC
LIMIT 0,10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:17:43.350

尝试在 WHERE 子句中使用它而不是 AND

```
where pri.privacy <> 'out' 
```

# ruby-on-rails-3 - Rails：如何使用带有其他数据的参数在数据库上创建项目

> ID：11967545
> 
> 赞同：0
> 
> 时间：2012-08-15T10:14:58.313
> 
> 标签：ruby-on-rails-3, activerecord, status, model-associations

我会尽量简单：

我有一个表格，可以获取我想添加到商店产品列表中的产品信息（名称、描述等）（使用模型关联：产品`belongs_to :store`和商店`has_many :products`）。

除了该信息之外，我还想在产品表中添加一个“开启”状态字段。为什么？如果产品所有者想删除产品，状态会变为“关闭”，而不是完全销毁数据库中的产品（出于统计原因，我必须保留数据 6 个月。）

这是我的控制器代码：

```
# Create a new product for the actual company.
def create

    # Get store information.
    @store = Store.find_by_id session[:store_id]

    # Set new store product.
    product = @store.products.build(
        :name   => params[:product][:name],
        :desc   => params[:product][:desc],
        :url    => params[:product][:url],
        :status => 'ON'
        )

    if product.save
        redirect_to :back, :notice => 'Product successfully created.'
    else
        redirect_to :back, :alert => 'Something goes wrong.'
    end
end 
```

我试过这个快捷方式，但它不起作用：

```
product = @store.products.build(params, :status => 'ON') 
```

我的问题是，如何添加`:status => 'ON'`比列出所有更优雅`params`？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:28:19.623

```
product = @store.products.build(params[:product])
product.status = 'ON' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:45:48.173

我认为你可以创建一个范围，比如说`scope :enabled, conditions: {status: 'ON'}`，然后你可以做`product = @store.products.enabled.build(params[:product])`。

# android - 使用 android SmsManager 发送消息时出错

> ID：11967552
> 
> 赞同：2
> 
> 时间：2012-08-15T10:15:27.597
> 
> 标签：android, sms

我正在开发用于发送 SMS 的 android 应用程序。我已经同意了`AndroidManifest.xml`。

我使用以下代码发送短信。

```
SmsManager sm =SmsManager.getDefault();
sm.sendTextMessage(number, null, message, null, null); 
```

使用此代码我只能发送一次消息。如果我下次尝试发送短信，即使使用我的应用程序和短信也无法发送消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:24:25.967

尝试：

```
public class SMS extends Activity {
     ...

     private void sendSMS(String phoneNumber, String message) {        
         PendingIntent pi = PendingIntent.getActivity(this, 0, new Intent(this, SMS.class), 0);                
         SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, pi, null);        
     }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:45:12.003

面临同样的问题。首先，我在这里按照 mkyong 的教程进行操作：(http://www.mkyong.com/android/how-to-send-sms-message-in-android/)

第一条短信成功发送，但后续短信均未成功发送。

之后，我查看了另一个教程，它在“sendTestMessage()”之后发送了一个pendingIntent。它可以工作并且可以发送多条短信。下面的工作教程：（http://mobiforge.com/developing/story/sms-messaging-android）

# unit-testing - 创建单个共享模拟对象或每个单元测试一个

> ID：11967558
> 
> 赞同：7
> 
> 时间：2012-08-15T10:15:38.890
> 
> 标签：unit-testing, mocking

我目前正在通过利用 Mock 对象（在这种特殊情况下为 nSubsitute）来扩展我的单元测试。但是我想知道创建 Mock 对象时当前的智慧是什么。例如，我正在使用一个包含各种例程来获取和处理数据的对象 - 这里没什么大不了的，但它将在相当多的测试中使用。

我是否应该创建一个共享函数来返回 Mock 对象，其中包含为几乎大多数测试项目模拟的所有适当方法和行为，并将该对象调用到我的单元测试中？或者我应该将对象模拟到每个单元测试中，只模拟该测试所需的行为（尽管有时我会不止一次地模拟相同的行为）。

非常感谢您的想法或建议...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T23:30:51.183

我不确定这是否有公认的“当前智慧”，但这是我的 2 美分。

首先，正如@codebox 指出的那样，为每个单元测试重新创建模拟是一个好主意，因为您希望单元测试彼此独立运行。否则会导致测试在一起运行时通过，但在单独运行时失败（反之亦然）。创建测试所需的模拟通常在测试设置中完成（`[SetUp]`在 NUnit 中，在 XUnit 中的构造函数），因此每个测试都会获得一个新创建的模拟。

在配置这些模拟方面，这取决于情况和您的测试方式。我的偏好是在每次测试中使用最少的必要配置来配置它们。这是准确传达测试对其依赖项的要求的好方法。在这些情况下，一些重复并没有错。

如果多个测试需要相同的配置，我会考虑使用基于[场景的测试夹具](http://davesquared.net/2009/06/moving-to-scenario-based-unit-testing.html) *（链接免责声明：无耻的自我推销）*。场景可能类似于`When_the_service_is_unavailable`，并且该场景的设置可以配置模拟服务以引发异常或返回错误代码。然后，每个测试都会根据该常见配置/场景做出断言（例如，应该显示错误消息，应该向管理员发送电子邮件等）。

如果您有很多重复的配置位，另一种选择是使用[Test Data Builder](http://www.natpryce.com/articles/000714.html)。这为您提供了可重用的方式来配置模拟或其他任何其他测试数据的许多不同方面。

最后，如果您发现需要大量配置，则可能值得考虑将测试依赖项的接口更改为不那么“健谈”。通过寻找一个有效的抽象来减少被测类所需的调用次数，您将在测试中配置更少，并且很好地封装了该类所依赖的职责。

值得尝试几种不同的方法，看看哪种方法适合你。任何重复的删除都需要与保持每个测试用例独立、简单、可维护和可靠进行平衡。如果您发现大量测试因小的更改而失败，或者您无法确定单个测试所需的配置，或者如果测试失败取决于它们的运行顺序，那么您将需要完善你的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T10:20:01.943

我会为每个测试创建新的模拟——如果你重复使用它们，你可能会得到意想不到的行为，早期测试的模拟状态会影响以后测试的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:48:17.207

如果不看具体案例，很难提供一般性答案。

我会坚持与其他地方相同的方法：首先将测试视为独立的存在，然后寻找相似之处并提取出共同的部分。

**您的目标是遵循*DRY*，以便您的测试在需求发生变化时可维护。**

所以...

1.  如果很明显组中的每个测试都将使用相同的模拟行为，请在您的通用设置中提供它

2.  如果它们中的每一个都显着不同，例如：模拟的内容构成了您正在测试的重要部分并且测试/模拟关系看起来像 1:1，那么让它们接近测试是合理的

3.  如果他们之间的模拟不同，但只是在某种程度上，你仍然希望避免冗余。一个常见的设置对您没有帮助，但您可能想引入一个这样的实用程序`PrepareMock(args...)`来涵盖不同的情况。这将使您的实际测试方法免于重复设置，但仍然可以让您在它们之间引入任何程度的差异。

当您向上提取所有相似性（到 SetUp 或辅助方法）时，测试看起来不错，因此测试方法中唯一剩下的就是它们之间的不同之处。

# php - PHP - PHP 警告：PHP 启动：在第 0 行未知

> ID：11967563
> 
> 赞同：7
> 
> 时间：2012-08-15T10:15:54.677
> 
> 标签：php, windows

我安装了 apache2 和 php 5.4.5。

当你启动 apache 这个错误：

> PHP 警告：PHP 启动：在第 0 行未知

扩展不起作用：

```
; extension = php_intl.dll
; extension = php_ldap.dll
; extension = php_oci8.dll
; extension = php_oci8_11g.dll
; extension = php_pdo_firebird.dll
; extension = php_pdo_oci.dll
; extension = php_pdo_pgsql.dll
; extension = php_pgsql.dll
; extension = php_pspell.dll
; extension = php_shmop.dll 
```

也许更多。

扩展目录：extension_dir = "C:/dev/prog/php5/ext /"

```
Path: C: \ dev \ prog \ php5

php.ini is copied to C: \ WINDOWS \ 
```

ssleay32.dll php5ts.dll 并复制到 C:\WINDOWS\system32\

请简单说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:20:19.267

[使用pecl 命令](http://php.net/manual/en/install.pecl.windows.php)升级这些模块

另外，检查 php.ini 中的 extension_dir 指令

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-26T11:39:03.223

我有同样的问题。问题是，这些行默认在 php.ini 中

```
; On windows:
; extension_dir = "ext" 
```

我假设，只有取消注释第二行和 Apache 重启才能解决这个问题。但事实并非如此！

**我必须输入 ext 文件夹的完整路径，如下所示：**

```
extension_dir = "d:\php-5.4.32\ext" 
```

执行此操作并重新启动 Apache Web 服务器后，问题就解决了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-29T16:29:54.750

我在 wampserver 论坛上的这篇文章中找到了这个答案，它对我有用：

单击您在 WAMPServer 菜单中使用的 Apache 版本，例如

wampmanager -> Apache -> 版本 -> 2.4.9 （只需点击此菜单项上的版本号）

这将为导致“in Unknown on line 0”错误的扩展重建符号链接。

![WAMP 服务器菜单](../Images/2269e2a25351028169460f0fb87e5d86.png)

RiggsFolly 在此线程中给出了答案：http: [//forum.wampserver.com/read.php? 2,128734](http://forum.wampserver.com/read.php?2,128734)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-06T14:12:57.323

您应该检查您的 php.ini 文件以确保正确设置了 extension_dir。当我启用这五个扩展时，我遇到了同样的问题：

```
extension=php_mbstring.dll
extension=php_exif.dll
extension=php_mysql.dll
extension=php_mysqli.dll
extension=php_curl.dll 
```

警告的数量与启用的扩展相同。所以我想可能有某事。扩展设置错误。当我将 extension_dir 指令更改为正确的目录时，问题就解决了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T20:16:57.857

我在启用扩展时遇到了同样的问题（请参阅[启用 PHP 扩展时出错](https://stackoverflow.com/questions/14540850/error-when-enabling-php-extensions)）。

我解决了将 PHP 文件夹添加到路径并重新启动计算机的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-12T06:14:54.527

1.  您需要下载并安装 Aspell for Windows “GNU Aspell-0.50.3 (win32)”。

[http://aspell.net/win32/](http://aspell.net/win32/)

[http://ftp.gnu.org/gnu/aspell/w32/Aspel](http://ftp.gnu.org/gnu/aspell/w32/Aspel) ... -Setup.exe

你的字典也在这里。Aspell 至少需要一个 Dictionary 才能运行。

或者

[ftp://ftp.gnu.org/gnu/aspell/w32/](ftp://ftp.gnu.org/gnu/aspell/w32/)

[ftp://ftp.gnu.org/gnu/aspell/w32/Aspell](ftp://ftp.gnu.org/gnu/aspell/w32/Aspell) ... -Setup.exe

[ftp://ftp.gnu.org/gnu/aspell/w32/aspell-w32-0.50.3.zip](ftp://ftp.gnu.org/gnu/aspell/w32/aspell-w32-0.50.3.zip)

1.  Aspell 应该将“aspell-15.dll”复制到 php 扩展 php_pspell.dll 需要并寻找执行的“Windows/System32”目录。如果没有，则在 C:/Program Files/Aspell/bin/aspell-15.dll 中找到 aspell-15.dll 并将其复制到 C:/Windows/System 32/aspell-15.dll

2.  您现在只需要在 xampp/apache/bin/php.ini ;extension=php_pspell.dll 中取消注释此行：extension=php_pspell.dll

3.  重启阿帕奇。（如果 Apache 无法启动，请在此处粘贴错误消息）。

4.  从 XAMPP 欢迎页面的菜单中查看您的 phpinfo() 文件，检查 pspell 模块是否就位并启用。`http://localhost/index.php` 欲了解更多信息，请访问[https://community.apachefriends.org/f/viewtopic.php?p=83942](https://community.apachefriends.org/f/viewtopic.php?p=83942)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-24T15:28:08.690

问题不是来自那里，问题来自路径（我的意思是 Windows 用户的 %PATH%，因为 %PATH% 是一个包含许多由 ; 分隔的路径的变量）。因此，要找出问题，您必须：

1-在 httpd.conf 文件中进行配置：

```
PHPIniDir "${path}/conf_files" 
```

2-在您的 php.ini 文件中进行配置（它必须与 httpd.conf 文件位于同一位置）：更改此：

```
extension_dir = "${path}\php\ext\" 
```

至

```
extension_dir = "D:\EasyPHP5.3.0\php\ext\" 
```

（在我的例子中，php 安装在 D:\EasyPHP5.3.0 中）

## 可选的：

如果您需要从 CLI（命令提示符）执行 PHP，则必须在安装 PHP 时将 php.ini 文件复制到文件夹（在我的情况下为 D:\EasyPHP5.3.0\php）

重新启动/启动您的网络服务器并享受！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-02T10:47:00.827

我有类似的问题。cURL 需要 SSL 层。问题在于*php_curl*库的安装，请参阅[http://php.net/manual/en/curl.installation.php](http://php.net/manual/en/curl.installation.php)。第一个问题：PATH 上需要*libeay32.dll*和*ssleay32.dll 。*我把它们放在*apache/bin*目录中。第二个问题是*php.ini*需要在*php_curl*之前加载*php_openssl*，所以我修改了 ini 文件。

```
extension=php_openssl.dll
extension=php_curl.dll 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-27T08:25:55.623

我通过两个步骤解决了我的 Windows 7 上的问题：

1.  在 php.ini 中将 extension_dir 设置为绝对路径

    `extension_dir = "d:\php-5.4.32\ext"`

2.  注释 php.ini 中的 php_curl.dll 模块

    `;extension=php_curl.dll`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-02T17:27:31.267

通过更改为完整路径解决了同样的问题：
`PHPIniDir`in`httpd.conf`和`extension_dir`in `php.ini`。

# c# - LINQ to SQL：为什么这些实体不更新？

> ID：11967567
> 
> 赞同：1
> 
> 时间：2012-08-15T10:15:59.250
> 
> 标签：c#, linq-to-sql

为什么下面返回的实体不更新？即使 stocktakeid 变量具有值，它们在 Get 上为空，并且在 Save（在数据库中）之后保持为空。

```
protected void GetPipelineState()
        {
            InventoryModelDataContext context = new InventoryModelDataContext(this.ConnectionString);
            var f = from pe in context.StockTakePipelines
                    where pe.StockTakeId == null
                    select pe;
            this.PipeLine = f;
        }

        protected void SavePipelineState()
        {
            InventoryModelDataContext context = new InventoryModelDataContext(this.ConnectionString);
            foreach (StockTakePipeline p in this.PipeLine)
            {
                p.StockTakeId = this.StockTakeId;
            }
            context.SubmitChanges();
        } 
```

**编辑：重新PK**

![在此处输入图像描述](../Images/198e0f178f465278bd5247db0f4e24cd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:24:24.423

您将实体从`context`本地更改为`GetPipelineState()`，然后调用本地`SubmitChanges()`到。`context``SavePipelineState()`

尝试更多类似的东西：

```
 protected IQueryable<StockTakePipeline> GetPipelineState(InventoryModelDataContext context)
    {
        return from pe in context.StockTakePipelines
                where pe.StockTakeId == null
                select pe;
    }

    protected void SavePipelineState()
    {
        using(InventoryModelDataContext context = new InventoryModelDataContext(this.ConnectionString));
        {
          foreach (StockTakePipeline p in GetPipelineState(context))
          {
              p.StockTakeId = this.StockTakeId;
          }
          context.SubmitChanges();
        }
    } 
```

编辑：

只是给其他人发现这个问题的说明。导致实体不更新的另一件事是，如果他们不实现`INotifyPropertyChanging`and `INotifyPropertyChanged`，他们通常会这样做，但如果您手动编写类并忘记实现这些，或者表没有主键 (在这种情况下，无论如何都无法对给定的行进行更新，因为它无法被识别，并且代码生成器放弃了那些现在毫无意义的接口的实现作为优化）。

# gwt - 向 ButtonCell 添加样式

> ID：11967570
> 
> 赞同：1
> 
> 时间：2012-08-15T10:16:17.627
> 
> 标签：gwt, button, cell, styling, celltable

我知道我的问题最初被认为是指“非常新手”级别，但我花了很多时间来寻找答案。我在 gwt 应用程序中使用了 DataGrid，并附加了各种特定的 Cell 小部件（即 TextCell、ButtonCell）。我关心的是如何通过自定义 css 向 ButtonCell 的按钮添加和处理样式。实现 ButtonCells 列的代码如下：

```
Column<FilterInfo, String> delButtonColumn = new Column<FilterInfo, String>(new ButtonCell()) {

  @Override
  public String getValue(FilterInfo object) {
    return "X";
  }
}; 
```

那么，如何为按钮（而不是整个单元格）添加样式？我怀疑我也应该覆盖渲染功能，但是我无法弄清楚如何应用样式

```
@Override
public void render(Context context, FilterInfo object, SafeHtmlBuilder sb) {
  super.render(context, object, sb);
      ???
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:18:07.557

[您可以使用Column](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/cellview/client/Column.html#setCellStyleNames%28java.lang.String%29)中的 setCellStyleNames() 方法应用将应用于列的每个单元格的样式。您必须使用 GWT 2.4 才能工作。它可能会是这样的。请注意，代码是在任何 IDE 之外编写的，因此可能包含错误。

```
Column<FilterInfo, String> delButtonColumn = new Column<FilterInfo, String>(new     ButtonCell()) {

  @Override
  public String getValue(FilterInfo object) {
    return "X";
  }
};
delButtonColumn.setCelLStyleNames("yourStyleName"); 
```

和CSS：

```
.yourStyleName.gwt-Button{
  //your styling here
} 
```

# c# - 如何复制 Win8 Metro 文件选择器 UI

> ID：11967574
> 
> 赞同：2
> 
> 时间：2012-08-15T10:16:23.437
> 
> 标签：c#, windows-8, microsoft-metro, winrt-xaml

我正在创建一个 Windows 8 Metro 风格的应用程序，用于导航一个与文件系统基本相同的 rest api。我想使用与文件选择器和内置搜索结果相同的 UI。

如何获取此 UI 中使用的 XAML（或理想情况下的 XAML+代码）？有样品吗？我可以使用工具吗？代码在任何地方都可用吗？

谢谢，乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:41:07.133

FilePicker 作为操作系统的 UI 片段提供，在所有 WinRT 开发环境中都很常见。没有任何可用的源或 XAML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:58:42.970

只是建造它，对吧？用户界面非常简单，我想一个小时和一些 TLC，你就会得到你想要的。您无法获得原始 XAML，因为它位于操作系统本身中，但无论如何您都不想要它 - 它的实现肯定比您想要或需要的复杂性更高。

我会提供一点建议。为了可用性，复制文件选择器的一般外观是有意义的。但是，请帮自己一个忙，做一些不同的事情。用户没有理由对相似性感到困惑——想知道他们的 SkyDrive 在哪里或其他什么。你可能已经想到了这一点。

# css - iPad 上的背景图像/位置渲染不同

> ID：11967575
> 
> 赞同：0
> 
> 时间：2012-08-15T10:16:27.710
> 
> 标签：css, ipad, background-image, background-position

我有一个 div，它具有精灵背景图像的两个背景位置之一，具体取决于 php 脚本中为 div 设置的类。

下面的 CSS 在标准浏览器上运行良好，但在 iPad 上我没有看到相同的结果。相反，我看到的背景图像比我想要的要多。正如您从下图中看到的那样，我不仅看到了一颗星星，还看到了另一颗星星的一部分。

如何让背景位置/图像在 iPad 上看起来正确？

```
.normal, .favourite {
    width:18px;
    height:17px;
    margin-right: 4px;
    border:none;
    cursor: pointer;
    display:inline-block;
    vertical-align: middle;
    background-color:transparent;
    background-repeat: no-repeat;
}

.normal {
    background-image: url('/images/playlist_sprite.png');
    background-position: left bottom;
}

.favourite {
    background-image:url('/images/playlist_sprite.png');
    background-position: right bottom;
} 
```

![在此处输入图像描述](../Images/bf845536cc7b7d7c10d05bfaf59de5b3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:35:44.643

与其使用左/右/下定义背景位置，不如尝试使用像素精确定义它。

例如

```
background-position: XXpx XXpx; 
```

此外，请确保您的精灵中的这两个图像都是 18 像素 x 17 像素，因为这就是类所说的图像大小。

# c# - 为什么我们可以在没有监听器的情况下在 OpenFileDialog 中获得按下的按钮？

> ID：11967576
> 
> 赞同：1
> 
> 时间：2012-08-15T10:16:29.287
> 
> 标签：c#, winforms, events

在 C# 中，我们可以执行以下操作：

```
OpenFileDialog dlg = new OpenFileDialog();
  if (dlg.ShowDialog() == DialogResult.OK)
  {
    pbxPhoto.Image = new Bitmap(dlg.OpenFile());
  } 
```

但是为什么我们可以在没有监听器的情况下找出按下了哪个按钮呢？程序流程是否在“if”子句之前停止，直到打开文件对话框关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:17:44.863

该类的`ShowDialog()`方法在`OpenFileDialog`内部处理按钮单击事件，然后返回一个`DialogResult`返回类型，指示按下了哪个按钮。（所以是的，该方法是同步调用的，因此在对话框返回之前，调用方法的流程确实会停止。）。

如果您编写自己的模态对话框类（或用户控件），您可以模仿这种行为，您可以在对话框类内部处理按钮单击事件，然后提供一个枚举作为结果来封装对话框的内部工作。

作为替代方案，您可以将自己的处理程序添加到[FileOk](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.fileok)`Show()`事件，但是根据贾斯汀的回答，使用非模态可能更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:21:24.050

我认为答案是肯定的。ShoweDialog 调用将阻塞，直到模态对话框关闭。如果你想要不同的（即非模态的）行为，你需要调用 Show() 来代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:28:39.570

ShowDialog 是一种模式形式，这意味着必须在应用程序返回其正常状态之前将其关闭。调用 ShowDialog 方法时，它会返回一个枚举，其中包含按下对话框上的按钮之一后的状态。例如，如果用户按下 OK，则 DialogResult 设置为 OK 并返回给调用者。然后调用者根据返回的结果（枚举）确定要做什么。

# android - 无限列表中的图像而不是字符串

> ID：11967600
> 
> 赞同：0
> 
> 时间：2012-08-15T10:18:11.243
> 
> 标签：android

我正在尝试创建一个无限的图像列表，每次滚动到底部时都会加载 5 个项目。首先，我查看了 Mark Mooibroeks 的代码。它基本上是一个日期列表。但我想完成每次向下滚动而不是文本时加载图像的效果（由于每天更新，它们的链接从 mysql 数据库中获取）。

```
package com.pxr.tutorials.neverendinglist;

import java.util.ArrayList;
import java.util.Calendar;

import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.ArrayAdapter;

public class NeverEndingList extends ListActivity {

    //how many to load on reaching the bottom
    int itemsPerPage = 5;
    boolean loadingMore = false;

    ArrayList<String> myListItems;
    ArrayAdapter<String> adapter;

    //For test data :-)
    Calendar d = Calendar.getInstance();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);

        //Remove title bar
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        //Remove notification bar
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.listplaceholder);

        //This will hold the new items
        myListItems = new ArrayList<String>();
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, myListItems);

        //add the footer before adding the adapter, else the footer will nod load!
        View footerView = ((LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.listfooter, null, false);
        this.getListView().addFooterView(footerView);

        //Set the adapter
        this.setListAdapter(adapter);

        //Here is where the magic happens
        this.getListView().setOnScrollListener(new OnScrollListener(){

            //useless here, skip!
            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {}

            //dumdumdum         
            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {

                //what is the bottom iten that is visible
                int lastInScreen = firstVisibleItem + visibleItemCount;             

                //is the bottom item visible & not loading more already ? Load more !
                if((lastInScreen == totalItemCount) && !(loadingMore)){                 
                    Thread thread =  new Thread(null, loadMoreListItems);
                    thread.start();
                }
            }
        });

        //Load the first 15 items
        Thread thread =  new Thread(null, loadMoreListItems);
        thread.start();

    }

    //Runnable to load the items 
    private Runnable loadMoreListItems = new Runnable() {           
        @Override
        public void run() {
            //Set flag so we cant load new items 2 at the same time
            loadingMore = true;

            //Reset the array that holds the new items
            myListItems = new ArrayList<String>();

            //Simulate a delay, delete this on a production environment!
            try { Thread.sleep(1000);
            } catch (InterruptedException e) {}

            //Get 15 new listitems
            for (int i = 0; i < itemsPerPage; i++) {        

                //Fill the item with some bogus information
                myListItems.add("Date: " + (d.get(Calendar.MONTH)+ 1) + "/" + d.get(Calendar.DATE) + "/" + d.get(Calendar.YEAR) + "http://www.test.com/" + i );             

                // +1 day :-D
                d.add(Calendar.DATE, 1);

            }

            //Done! now continue on the UI thread
            runOnUiThread(returnRes);

        }
    };  

    //Since we cant update our UI from a thread this Runnable takes care of that! 
    private Runnable returnRes = new Runnable() {
        @Override
        public void run() {

            //Loop thru the new items and add them to the adapter
            if(myListItems != null && myListItems.size() > 0){
                for(int i=0;i<myListItems.size();i++)
                    adapter.add(myListItems.get(i));
            }

            //Update the Application title
            setTitle("Neverending List with " + String.valueOf(adapter.getCount()) + " items");

            //Tell to the adapter that changes have been made, this will cause the list to refresh
            adapter.notifyDataSetChanged();

            //Done loading more.
            loadingMore = false;
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:48:11.440

而不是`ArrayAdapter<String> adapter`您必须实现自己的自定义适配器。搜索`android custom adapter`它，您会发现大量有关它的信息/教程。

# svn - 保管箱文件夹中的 SVN 工作副本。这是个好主意吗？

> ID：11967605
> 
> 赞同：0
> 
> 时间：2012-08-15T10:18:42.383
> 
> 标签：svn, dropbox

我需要将某个 svn 文件夹保存在位于 Dropbox 文件夹内的已安装 boxcryptor 目录中。这是一个好主意吗？

我认为 .svn 文件夹的大小不断增长，我不想为此浪费保管箱空间和网络带宽。我只想在没有 .svn 文件夹的情况下保留工作目录。有没有办法做到这一点？还是有其他修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:44:08.820

我使用 Dropbox 来存储我的 Subversion 存储库！

我觉得这是一个方便的地方。我可以`svnserve`在我的各种计算机上运行。只要我是唯一一个访问存储库的人，而且我一次只能从一台计算机上访问，就可以了。

您签出的工作目录也是如此。只要一次只有一个用户访问它，就***可能***没有问题。然而，事实是，将整个存储库保存在 Dropbox 中的问题可能比拥有工作目录的问题要少。

无法保证一个 Dropbox 客户端与另一个兼容。也就是说，不能保证一个 Subversion 客户端的工作目录可以被另一个客户端使用。在 Subversion 1.7 中引入的主要更改尤其如此。但是，如果您在每台机器上使用相同的客户端，或者找到两个兼容的客户端，则应该没有任何问题。

当然，版本控制的整个想法是让您能够在多个位置拥有相同的文件，因此几乎没有理由共享一个工作目录。唯一的好处是在工作中进行更改，然后运行回家并继续，而无需在两者之间进行提交。

您关心的是`.svn`目录的大小。您可以`svn export`对目录执行操作。这不包括`.svn`目录，但它也不允许您修改并将更改提交回 Subversion。而且，您将无法使用诸如`svn log`.

Subversion 使用`.svn`目录将您的工作副本与存储库连接起来。在 1.7 之前的版本中，Subversion 将存储整个结帐的副本。这将使您`svn diff`无需 ping 存储库即可。我不是 100% 确定 Subversion 1.7 的工作目录布局的布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T11:05:04.427

一般来说，我看不出使用 DropBox 作为工作副本的位置有什么问题。（我将它用于一些我自己在不同设备之间同步的参考书目文件，但它们也在我们的 svn 中供其他人使用和修改）

但是，您将无法绕过其中的 .svn 文件夹，否则您将无法将 svn 与该代码一起使用。我想不出任何方法可以在没有 .svn 文件夹的情况下将文件保存在其中，但仍将其用作工作副本（例如`svn export`，只会转储代码的副本，但它不受版本控制。）

编辑：之前发布了一个类似的问题（关于节省空间）：[“Subversion and DropBox”](https://stackoverflow.com/questions/2099803/using-subversion-with-dropbox?rq=1)

# java - 无法使用 os.popen 捕获 java -version 的输出

> ID：11967609
> 
> 赞同：1
> 
> 时间：2012-08-15T10:18:56.660
> 
> 标签：java, python, printing, version, popen

这是我的代码

```
 f = os.popen("java -version")
    for i in f.readlines():
        print "result, ", i, 
```

基本上我希望将 java -version 的输出存储在 f 中。发生的情况是，脚本的第一行执行后，java -version 信息被打印出来，但没有存储在 f 中，因此根本没有执行第三行代码。此代码适用于其他命令，例如“ls -la”，但不适用于 java -version。关于为什么的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:30:24.130

由于`java -version`去stderr，而不是stdin，你必须重定向它：

```
f = os.popen("java -version 2>&1")
for i in f.readlines():
    print "result, ", i, 
```

更好的是，使用[subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)模块，该模块旨在使此类事情变得更容易：

```
print subprocess.check_output("java -version", stderr=subprocess.STDOUT, shell=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:21:19.737

尝试类似：

```
from subprocess import Popen, PIPE
stdout,stderr= Popen(['java','-version'], shell=False, stderr=PIPE).communicate()
print(stderr) 
```

**输出：**

```
b'java version "1.6.0_20"\nOpenJDK Runtime Environment (IcedTea6 1.9.13) (6b20-1.9.13-0ubuntu1~10.10.1)\nOpenJDK Client VM (build 19.0-b09, mixed mode, sharing)\n' 
```

# shell - 使用 scala.sys.process 在 Windows 7 上调用 echo

> ID：11967612
> 
> 赞同：2
> 
> 时间：2012-08-15T10:19:06.297
> 
> 标签：shell, scala, windows-7, cross-platform, dos

我正在尝试使用 Scala 内部的外部程序，该程序接受来自标准输入流的输入。

与以下代码大致等效的代码在 Linux 上运行，但在 Windows 上运行时引发异常（在 Windows 7 上测试）。异常的描述表明找不到 echo 命令。

```
def invokeProgram(data : String) {
       import scala.sys.process._
       val cmdEcho = Seq("echo", data)
       val cmdProgram = Seq("program")
       println((cmdEcho #| cmdProgram).!!)
} 
```

该代码在 Linux 上正常工作，但在 Windows 上失败，但 echo 命令对两个平台都是通用的，并且它的用法在语法上对于我的目的是相同的。这就像 echo 不在 PATH 中一样简单吗？Windows 上什至有单独的 echo.exe 还是捆绑到其他东西中？可以使调用的程序从临时文件中接受其输入，如果我无法解决此问题，我将使用该文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:33:31.247

区别在于：

```
dcs@shadowfax:~$ which echo
/bin/echo 
```

也就是说，在 Unix 上，该`echo`命令实际上是一个二进制文件，尽管大多数 shell 将其实现为内置命令。另一方面，在 Windows 上，没有称为`echo.exe`（或`echo.com`等）的二进制文件。它只是 shell 的内置命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:33:51.803

你根本不需要使用`echo`。相反，请使用[ProcessBuilder](http://www.scala-lang.org/api/current/index.html#scala.sys.process.ProcessBuilder)的 #< 方法。这是一个例子：

```
import java.io.ByteArrayInputStream
import scala.sys.process._

val data = "hello"
val is = new ByteArrayInputStream(data.getBytes)
"cat" #< is ! //complicated way to print hello 
```

# c# - 同时使用 XNA 和 WinForm

> ID：11967615
> 
> 赞同：0
> 
> 时间：2012-08-15T10:19:16.750
> 
> 标签：c#, winforms, xna, window

我想用 XNA 和 BEPU 创建一个实体编辑器。我需要用 XNA 创建一个“窗口”，这将是实际的工作空间，另一个带有按钮、列表等表单控件来选择添加形状、创建约束等选项......它也可以像 3dmax 布局或 Photoshop .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:26:26.830

看看这个教程：http: [//xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_1](http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_1)

从描述：

> 此示例向您展示如何使用 XNA Framework GraphicsDevice 对象在 WinForms 应用程序中显示 3D 图形。

# android - 在独立应用程序中处理“忘记密码”的最佳方法

> ID：11967616
> 
> 赞同：0
> 
> 时间：2012-08-15T10:19:18.193
> 
> 标签：android, passwords, forgot-password

如问题中所述，我正在尝试制作一个**与 server 没有交互**的应用程序。问题是用户可以在应用程序的某些部分使用密码，然后启动问题。我真的找不到太多材料的一个问题是如何实现本地*忘记密码*功能，我认为这是必不可少的。

**由于许多原因，在本地存储密码而不进行任何加密，然后在需要时检索它不是任何选择**（密码暴露给黑客，每个拿到手机的人也可以检索它）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:24:12.080

不知道有关 Android 的细节，但在 iOS 中，我使用存储在`NSUserDefaults`（应用程序范围的非加密数据存储）中的安全问题来完成此操作，然后将密码和安全答案保存在加密的钥匙串中。回答完问题后，系统会提示用户更改密码，然后在钥匙串中更新密码。

我认为 Android 会有类似的功能和方法。我会在大约 6 个月后更好地知道这个答案（我承诺接下来要学习 Android）

# mysql - Mysql查询不起作用

> ID：11967622
> 
> 赞同：-1
> 
> 时间：2012-08-15T10:19:58.760
> 
> 标签：mysql, sql

以下sql有什么问题？我完全不知道

```
SELECT  `posts`.* 
FROM `posts`  
WHERE ((`posts`.`featured` = 1 OR `posts`.`author_id` = 5)) 
ORDER BY (ln( 1 + posts.likes_count) +  
         (EXTRACT(EPOCH FROM posts.created_at) - 
          1327654606)/9000) desc LIMIT 15 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:33:17.210

`EPOCH`在 MySQL 中无效。尝试更换

```
EXTRACT(EPOCH FROM posts.created_at) 
```

和

```
UNIX_TIMESTAMP(posts.created_at) 
```

得到`posts.created_at`since的秒数`1970-01-01 00:00:00`。

请参阅[MySQL UNIX_TIMESTAMP](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

# php - 用php更新mysql中的信息

> ID：11967626
> 
> 赞同：0
> 
> 时间：2012-08-15T10:20:06.630
> 
> 标签：php, mysql

我正在学习php，现在我被困住了。我有代码必须使用字段 id 和 zagolovok 更新名为 title 的表中的信息，但它没有更新，并且显示没有错误的白屏。

```
$db = mysql_connect('server', 'login', 'passr' );
mysql_select_db(u20221, $db);  
$query = mysql_query("UPDATE title SET zagolovok = '$_REQUEST[title]' WHERE id = 5");  
mysql_close($db); 
```

ps server/login/pass因隐私而改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:23:10.140

```
$_REQUEST[title]   $_REQUEST is an array use $_REQUEST['title'] 
 $query = mysql_query('UPDATE title SET zagolovok = "\'$_REQUEST['title']\'" WHERE id = 5'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:23:14.017

打开错误报告，它会告诉您需要在数据库名称周围加上引号。

为此，请在索引（或已执行文件）的顶部添加：

```
error_reporting(E_ALL); 
```

并确保它在您的浏览器中可见：

```
ini_set('display_errors', 'On'); 
```

还值得注意的是，您的代码很容易受到`SQL Injection`, 修复此问题（以及您的其他未定义常量）：

```
$safeTitle = mysql_real_escape_string($_REQUEST['title']);
$query = mysql_query("UPDATE title SET zagolovok = '$safeTitle' WHERE id = 5"); 
```

或者，您可以切换到[`PDO`](http://php.net/PDO)并使用强烈推荐的准备好的语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:24:35.380

试试这个

```
$db = mysql_connect('server', 'login', 'passr' );
if( !$db) die("no connection");
mysql_select_db(u20221, $db);  
$query = mysql_query("UPDATE title SET zagolovok = '".$_REQUEST['title']."' WHERE id = 5");  
mysql_close($db); 
```

标题是你的表名还是你的列？？？语法是 `UPDATE table SET column = value WHERE ...`

# ios - 没有为 UIscrollView 中的 viewControllers 调用 ViewDidUnload

> ID：11967628
> 
> 赞同：1
> 
> 时间：2012-08-15T10:20:18.557
> 
> 标签：ios, viewdidunload

我有这个层次结构：

MainViewController -> 子视图控制器 -> UIScrollViewController -> 几个 (4) 视图控制器。

当我离开时，`Sub View Controller`我希望里面的 ViewController`UIScrollView`会调用他们的 ViewDidUnload，这样我就可以关闭一些进程。

实现这一目标的正确方法是什么，我不得不说我的目标是 iOS 4.1 及更高版本。

谢谢沙妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:31:28.017

从 UIViewController 类参考：

> 在 iOS 6 上，视图永远不会被清除，并且 viewWillUnload 和 viewDidUnload 永远不会被调用。如果您的视图控制器需要在内存不足时执行特定任务，它应该覆盖 didReceiveMemoryWarning 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:23:04.493

iOS 4 和 iOS 5 之间的行为有点不同。有关[详细信息](https://stackoverflow.com/questions/5594410/viewdidunload-is-not-getting-called-at-all)，请参见此处。您是否从层次结构中明确删除视图？

# .net - “无法加载文件或程序集”错误，但我不知道哪个项目正在使用旧编号引用此程序集

> ID：11967632
> 
> 赞同：1
> 
> 时间：2012-08-15T10:20:23.357
> 
> 标签：.net, reference, .net-assembly

当我启动我的 WPF 应用程序时，我收到错误“无法加载文件或程序集 'ASSEMBLY_NAME, Version=0.4010.4609.26378, Culture=neutral, PublicKeyToken='XXX' 或其依赖项之一。定位程序集的清单定义没有匹配程序集引用。（来自 HRESULT 的异常：0x80131040）“。

ASSEMBLY_NAME 是一个项目的名称，它被许多其他项目引用，因为它是一个核心。我的 WPF 项目也引用了它，一些引用 ASSEMBLY_NAME 的项目是我的 WPF 项目的引用。但是，WPF 项目及其引用 ASSEMBLY_NAME 的引用都引用了版本 0.4010.4610.xxxx。所以即使我理解为什么会发生这个错误——这是因为旧版本是目标但是我只有新版本，我无法找出哪个项目或部分引用了版本 0.4010.4609.xxxx。正如我提到的，启动项目，我的 WPF 项目不是。谁能告诉我如何检查谁在引用它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:29:44.740

`ASSEMBLY_NAME\bin\Debug`您可以检查对 ASSEMBLY_NAME 的每个引用的属性，并验证您看到的路径是否类似于`PROJECT_CONTAINING_THE_REFERENCE\bin\Debug`.

或者，您可以删除项目中的所有文件夹`bin`并`obj`重新构建。您的一个项目应该无法构建。那就是引用错误的那个。

# php - 计算 2 个或更多日期是否重叠

> ID：11967634
> 
> 赞同：1
> 
> 时间：2012-08-15T10:20:41.763
> 
> 标签：php, algorithm

有没有一种有效的方法来计算 PHP 中是否有 2 个或更多日期重叠？

前任。

*   **日期 1：**开始 1 = 2012-03-10 / 结束 1 = 2012-05-10
*   **日期 2：**开始 2 = 2012-04-25 / 结束 2 = 2012-06-01
*   **日期 3：**开始 3 = 2012 年 7 月 15 日 / 结束 3 = 2012 年 8 月 20 日

在上面的例子中 Date1 和 Date2 重叠，Date3 是可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:30:12.687

如果您的日期是 YYYY-MM-DD 格式，那么您可以只进行**字符串比较**（如果使用 strtotime() 作为 unix 时间戳，它们不必是有效日期或 1970 年之后）

```
if( ($date1['start']>=$date2['start'] && $date1['start']<=$date2['end']) || ($date1['end']>=$date2['start'] && $date1['end']<=$date2['end']) || ($date1['start']<=$date2['start'] && $date1['end']>=$date2['end']) )
{
    // overlap
} 
```

这将检查 date1 的开始或结束是否在 date2 的开始和结束之间，或者 date1 是否围绕 date2

.

感谢@Germann-Arlington -

```
if($date1['start']<=$date2['end'] && $date2['start']<=$date1['end']) { // overlap } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:25:27.443

如果您有一堆日期（据我了解问题），您可以使用[区间树](http://en.wikipedia.org/wiki/Interval_tree)，并将日期转换为整数（可以使用[unix 时间）](http://en.wikipedia.org/wiki/Unix_time)

# ios - 带有下拉刷新的 NSFetchedResultsController 更新后不显示任何内容

> ID：11967636
> 
> 赞同：0
> 
> 时间：2012-08-15T10:20:49.290
> 
> 标签：ios, ipad, core-data, refresh, nsfetchedresultscontroller

**问题：**

当我通过下拉刷新控件（删除所有内容，然后再次添加所有内容）进行总体核心数据刷新时，我的自动 NSFetchedResultsController (CoreDataTableViewController) 只会删除所有行并且不显示新数据。

**我的设置：**

我使用 Core Data 数据存储，通过使用[CoreDataTableVewController](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2010-fall)的子类从中获取数据。在这种情况下，我有一个登录用户添加到的组列表，它是通过使用谓词获取的：

`[NSPredicate predicateWithFormat:@"users CONTAINS %@", self.currentUser];`

然后，我使用数据存储刷新功能（与应用程序启动时相同）通过下拉刷新控件 ( [SVPullToRefresh](https://github.com/samvermette/SVPullToRefresh) ) 刷新数据。

```
[self.tableView addPullToRefreshWithActionHandler:^{
        DatabaseMerger *merger = [DatabaseMerger sharedInstance];
        [merger refreshDatabase:self.context];
        self.tableView.pullToRefreshView.lastUpdatedDate = [NSDate date];
    }]; 
```

在此刷新中，所有核心数据托管对象都被删除，然后使用 JSON 数据再次添加。

通过使用观察上下文的 CoreDataTableViewController，如果上下文发生变化，应该刷新行。目前，唯一改变的是所有行都消失了。

奇怪的是，当我弹出视图控制器并再次按下它（通过导航栏的后退按钮）时，行与数据一起正确显示。在我看来，这是实时获取数据的问题。

**我试过的：**

*   通过使用手动重新获取数据`[self.fetchedresultscontroller performFetch:&error]`
*   通过使用删除 fetchedresultscontroller 的缓存`[NSFetchedResultsController deleteCacheWithName:nil]`
*   将 fetchresultscontroller 设置为 nil，然后重新设置控制器

**相关代码：**

```
- (void)setupFetchedResultsController
{    
    NSFetchRequest *groupRequest = [NSFetchRequest fetchRequestWithEntityName:@"Group"];
    groupRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES]];
    groupRequest.predicate = [NSPredicate predicateWithFormat:@"users CONTAINS %@", self.currentUser];
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:groupRequest managedObjectContext:self.context sectionNameKeyPath:nil cacheName:nil];
}

- (void)viewWillAppear:(BOOL)animated 
{
    [super viewWillAppear:animated];
    [self setupFetchedResultsController];
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.debug = YES;
    self.currentUser = [Settings currentUser:self.context];
    [self.tableView addPullToRefreshWithActionHandler:^{
        DatabaseMerger *merger = [DatabaseMerger sharedInstance];
        [merger refreshDatabase:self.context];
        self.tableView.pullToRefreshView.lastUpdatedDate = [NSDate date];
    }];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(receiveFinishedNotification:)
                                                 name:@"dataMergeFinished"
                                               object:nil];
    // Do any additional setup after loading the view.
}
- (void)receiveFinishedNotification:(NSNotification *) notification
{
    if ([[notification name] isEqualToString:@"dataMergeFinished"]) {
        [self.tableView.pullToRefreshView stopAnimating];

        [NSFetchedResultsController deleteCacheWithName:nil];
        NSError *error = nil;
        [self.fetchedResultsController performFetch:&error];
        if (error) {
            DebugLog(@"Error: %@", error);
        }
    }
}

- (void)viewWillDisappear:(BOOL)animated 
{
    [super viewWillDisappear:animated];
    self.fetchedResultsController = nil;
} 
```

**我正在使用带有 ARC 的 iOS 5.1.1**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:36:36.110

您是否实现了 NSFetchedResultsController 委托？如果您没有 FRC，则不会自动更新。

执行以下操作：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    NSLog(@"POSTDETAIL: controllerWillChangeContent");
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    NSLog(@"POSTDETAIL: controllerDidChangeContent");

    [self.tableView reloadData];
} 
```

那应该刷新您的表格视图

# javascript - 使用 jquery 用 window.location 更改 returnURL

> ID：11967642
> 
> 赞同：0
> 
> 时间：2012-08-15T10:21:11.523
> 
> 标签：javascript, jquery

我有以下链接：

```
<ul id="countrySelect">
<ul>
<li><a href="setlocale.aspx?returnURL=Default.aspx&amp;localesetting=en-US">EN</a></li>
</ul>

<ul>
<li><a href="setlocale.aspx?returnURL=Default.aspx&amp;localesetting=cs-CZ">CZ</a></li>
</ul>
<!-- END COUNTRY SELECT LIST -->
<p></p>
</ul> 
```

我想`Default.aspx`从 returnURL 中删除并将其替换为用户所在的当前页面。这是我尝试过的，但不确定它是否正确？

```
var pathname = window.location.pathname;
var countryArr = [];
var $ul = $('<ul id="countrySelect"/>');

countryArr = $('ul#countrySelect ul li a').map(function() {
        return this.value;
    }).get();

$.each(countryArr, function() {

$ul.append('<li>' + '<a href="setlocale.aspx?returnURL=' + pathname + '&localesetting=' + this.slice(0) + '">' + this.slice(3) + '</a>');

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:26:21.497

你能不这样做吗，基本上遍历每个并在属性上`<a>`做一个：`string.replace``href`

```
$("a").each(function() {
    var oldHref = $(this).attr("href");

    var newHref = oldHref.replace("Default.aspx", window.location.pathname);

    $(this).attr("href", newHref);
});​​​ 
```

如果您要更换更多，这显然是行不通的`Default.aspx`。您需要以下内容：

```
$("a").each(function() {
    var oldHref = $(this).attr("href");

    // get the URL to string.replace
    var toReplace = oldHref.substring(oldHref.indexOf("=") + 1, oldHref.indexOf("&"));

    var newHref = oldHref.replace(toReplace, window.location.pathname);

    $(this).attr("href", newHref);
});​​​ 
```

# jquery - colorbox - 改变“当前”

> ID：11967644
> 
> 赞同：0
> 
> 时间：2012-08-15T10:21:17.277
> 
> 标签：jquery, colorbox

我正在使用 colorbox-script 来制作灯箱图像。现在我想将语句“y 的图像 x”更改为“x/y”，但它不起作用。

我正在使用这个脚本：

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $('a').colorbox({current: "{current}/{total}"});
  });
</script> 
```

这是 HTML 输出：

```
<a class='colorbox cboxElement'  title="Roll Up Display Start<br /><span style='font-weight:normal; font-size: 9px'>Roll Up Display Start</span>"  href='assets/images/disroll_start.jpg' ><img style="float: right;" title="Roll Up Display Start" src="assets/components/directresize/cache/dr_disroll_start_w200_h437.jpg" alt="Roll Up Display Start"   /></a> 
```

我也想去掉这个部分`"<br /><span style='font-weight:normal; font-size: 9px'>Roll Up Display Start</span>"`，但我不知道在哪里改变这个......

任何人的任何提示？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:43:59.840

```
$('a').colorbox({current: "{current}/{total}"}); 
```

这是正确的。如果它不适合你，那么你已经在你的帖子中留下了相关信息。

您的 title 属性中的标记与颜色框没有任何关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:55:10.387

您需要使用插件的 CSS 文件来处理 ColorBox Title 字符串的样式，而不是通过在标记中嵌入 CSS 规则。

研究插件使用的 CSS 文件，因为作者 (JackM) 在这方面做得非常出色。特别注意选择器**#cboxTitle**上的规则；这应该会让你成功完成一半以上。

KJM

# haskell - 为什么一个函数不能接受单子值并返回另一个单子值？

> ID：11967645
> 
> 赞同：7
> 
> 时间：2012-08-15T10:21:17.577
> 
> 标签：haskell, functional-programming, monads

假设我们有两个一元函数：

```
 f :: a -> m b
  g :: b -> m c
  h :: a -> m c 
```

绑定函数定义为

```
(>>=) :: m a -> (a -> m b) -> m b 
```

我的问题是为什么我们不能做下面的事情。声明一个接受一元值并返回另一个一元值的函数？

```
 f :: a -> m b
  g :: m b -> m c
  h :: a -> m c 
```

绑定函数定义为

```
(>>=) :: m a -> (ma -> m b) -> m b 
```

haskell 中有什么限制函数将一元值作为参数？

编辑：我想我没有把我的问题说清楚。关键是，当您使用绑定运算符组合函数时，为什么绑定运算符的第二个参数是一个采用非单子值（`b`）的函数？为什么它不能采用一元值 ( `mb`) 并回馈`mc` 。是不是这样，当您处理 monad 时，您将编写的函数将始终具有以下类型。

```
 f :: a -> m b
  g :: b -> m c
  h :: a -> m c 
```

和`h = f 'compose' g`

我正在尝试学习单子，这是我无法理解的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T16:53:10.180

的一个关键能力`Monad`是“查看内部”`m a`类型并查看`a`; 但是 的一个关键限制`Monad`是 monad 必须是“不可避免的”，即`Monad`typeclass 操作不应该足以编写 type 的函数`Monad m => m a -> a`。 `(>>=) :: Monad m => m a -> (a -> m b) -> m b`给你这个能力。

但实现这一目标的方法不止一种。该类`Monad`可以这样定义：

```
class Functor f where
    fmap :: (a -> b) -> f a -> f b

class Functor f => Monad m where
    return :: a -> m a
    join :: m (m a) -> m a 
```

你问为什么我们不能有一个`Monad m => m a -> (m a -> m b) -> m b`功能。好吧，鉴于`f :: a -> b`，`fmap f :: ma -> mb`基本上就是这样。但`fmap`它本身并不能让你“向内看”`Monad m => m a`但又无法摆脱它。然而`join`，`fmap`一起给你这种能力。 `(>>=)`一般可以写成`fmap`and `join`：

```
(>>=) :: Monad m => m a -> (a -> m b) -> m b
ma >>= f = join (fmap f ma) 
```

事实上，`Monad`当你想出一个定义时，这是定义实例的一个常见技巧——为你的可能的 monad 编写函数，然后`(>>=)`使用.`join``(>>=)`

* * *

好吧，这回答了问题的“它必须是它的方式”的一部分，并带有“否”。但是，为什么会这样呢？

我不能代表 Haskell 的设计者，但我喜欢这样想：在 Haskell monadic 编程中，基本的构建块是这样的动作：

```
getLine :: IO String
putStrLn :: String -> IO () 
```

更一般地说，这些基本构建块的类型看起来像`Monad m => m a`, `Monad m => a -> m b`, `Monad m => a -> b -> m c`, ..., `Monad m => a -> b -> ... -> m z`。人们非正式地称这些*动作*。 `Monad m => m a`是无参数动作，`Monad m => a -> m b`是单参数动作，依此类推。

嗯，`(>>=) :: Monad m => m a -> (a -> m b) -> m b`基本上是“连接”两个动作的最简单的功能。 `getLine >>= putStrLn`是首先执行的动作，`getLine`然后执行`putStrLn`传递从执行中获得的结果`getLine`。如果你有`fmap`和`join`没有`>>=`，你必须写这个：

```
join (fmap putStrLn getLine) 
```

更一般地说，`(>>=)`它体现了一个很像动作“管道”的概念，因此对于使用 monad 作为一种编程语言来说，它是更有用的运算符。

* * *

最后一件事：确保您了解该[`Control.Monad`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html)模块。虽然`return`和`(>>=)`是 monad 的基本函数，但您可以使用这两个函数定义无数其他更高级的函数，并且该模块收集了几十个更常见的函数。您的代码不应被`(>>=)`; 它是一个重要的构建块，既可以单独使用，也可以作为更大构建块的组件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T16:23:25.477

> 为什么我们不能做下面的事情。声明一个接受一元值并返回另一个一元值的函数？

```
f :: a -> m b
g :: m b -> m c
h :: a -> m c 
```

我是否理解您希望编写以下内容？

```
compose :: (a -> m b) -> (m b -> m c) -> (a -> m c)
compose f g = h where
  h = ??? 
```

事实证明，这只是常规的函数组合，但参数的顺序相反

```
(.) :: (y -> z) -> (x -> y) -> (x -> z)
(g . f) = \x -> g (f x) 
```

让我们选择专门研究`(.)`类型`x = a`,`y = m b`和`z = m c`

```
(.) :: (m b -> m c) -> (a -> m b) -> (a -> m c) 
```

现在翻转输入的顺序，您将获得所需的`compose`功能

```
compose :: (a -> m b) -> (m b -> m c) -> (a -> m c)
compose = flip (.) 
```

请注意，我们在这里甚至没有提到单子。这对于任何类型的构造函数都非常有效`m`，无论它是否是 monad。

* * *

现在让我们考虑你的另一个问题。假设我们要编写以下内容：

```
composeM :: (a -> m b) -> (b -> m c) -> (a -> m c) 
```

停止。胡歌时间。[搜索该类型签名](http://www.haskell.org/hoogle/?hoogle=%28a+-%3E+m+b%29+-%3E+%28b+-%3E+m+c%29+-%3E+%28a+-%3E+m+c%29)，我们发现完全匹配！它`>=>`来自 Control.Monad，但请注意，对于这个函数，它`m` *必须*是一个 monad。

现在的问题是为什么。是什么让*这个组合与**另一个*不同，使得*这个*组合需要`m`是 Monad，而*另一个*不需要？嗯，这个问题的答案在于理解 Monad 抽象是什么的核心，所以我将为讨论这个主题的各种互联网资源留下更详细的答案。可以说，`composeM`不了解.就无法*写作*`m`。来吧，试试看。如果没有一些关于是什么的额外知识，你就无法编写它`m`，而编写此函数所需的额外知识恰好是`m`具有以下结构的`Monad`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T13:10:29.020

让我稍微解释一下你的问题：

> 为什么我们~~不能~~ *在*`g :: m a -> m b`Monads中使用类型函数？

答案是，**我们*已经*使用 Functors 了**。关于where没有什么特别*“单调的”*。单子是函子；我们只需使用 good old 就可以获得这样的功能：`fmap f :: Functor m => m a -> m b``f :: a -> b``fmap`

```
class Functor f a where
    fmap :: (a -> b) -> f a -> f b 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-15T19:30:00.330

如果你有两个函数`f :: m a -> m b`和一个单值`x :: m a`，你可以简单地应用`f x`。您不需要任何特殊的一元运算符，只需函数应用程序即可。**但是诸如此类的函数`f`永远不能“看到” type 的值`a`。**

函数的一元组合是一个更强大的概念，类型函数是`a -> m b`一元计算的核心。如果你有一个单子 value `x :: m a`，你不能“进入它”来检索一些 type 的值`a`。但是，如果您有一个`f :: a -> m b`对 type 值进行操作的函数`a`，您可以使用`>>=`to get的函数组合该值`x >>= f :: m b`。关键是，**`f`“看到”一个类型的值`a`并且可以使用它**（但它不能返回它，它只能返回另一个单子值）。这是 monad 的好处，`>>=`每个 monad 都需要提供其正确的实现。

比较两个概念：

*   如果你有`g :: m a -> m b`，你可以用它`return`来获得`g . return :: a -> m b`（然后用`>>=`），但是
*   反之亦然。通常，无法`m a -> m b`从 type 的函数创建 type 的函数`a -> m b`。

因此，组合 like 类型的函数`a -> m b`是一个比组合 like 类型的函数严格更强的概念`m a -> m b`。

* * *

例如：[list](https://en.wikibooks.org/wiki/Haskell/Understanding_monads/List) monad 表示可以给出可变数量答案的计算，包括 0 个答案（您可以将其视为非确定性计算）。list monad 中计算的关键元素是 type 的函数`a -> [b]`。他们接受一些输入并产生可变数量的答案。这些函数的组合从第一个函数中获取结果，将第二个函数应用于每个结果，并将其合并到所有可能答案的单个列表中。

类型的函数`[a] -> [b]`会有所不同：它们代表接受多个输入并产生多个答案的计算。它们也可以组合，但我们得到的东西不如原始概念强。

* * *

也许更独特的例子是`IO`单子。如果您`getChar :: IO Char`只调用并使用 type 的函数`IO a -> IO b`，您将永远无法使用读取的字符。但是`>>=`允许您将这样的值与`a -> IO b`可以“看到”字符并对其执行某些操作的类型函数结合起来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T15:30:12.037

The reason (>>=)'s second argument does not take a monad as input is because there is no need to bind such a function at all. Just apply it:

```
m :: m a
f :: a -> m b
g :: m b -> m c
h :: c -> m b

(g (m >>= f)) >>= h 
```

You don't need (>>=) for g at all.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T15:07:43.523

我喜欢将 monad 视为构建具有特定上下文的程序的秘诀。monad 提供的功能是能够在您构建的程序的任何阶段根据先前的值进行分支。通常的`>>=`函数被选为这种分支能力最常用的接口。

例如，`Maybe`monad 提供了一个可能在某个阶段失败的程序（上下文是失败状态）。考虑这个伪 Haskell 示例：

```
-- take a computation that produces an Int.  If the current Int is even, add 1.
incrIfEven :: Monad m => m Int -> m Int
incrIfEven anInt =
    let ourInt = currentStateOf anInt
    in if even ourInt then return (ourInt+1) else return ourInt 
```

为了基于当前计算结果进行分支，我们需要能够访问该当前结果。如果我们可以访问 ，上面的伪代码就可以工作`currentStateOf :: m a -> a`，但这通常不适用于 monads。相反，我们将分支的决定写为 type 的函数`a -> m b`。由于`a`is 不在此函数的 monad 中，我们可以将其视为常规值，这样更容易使用。

```
incrIfEvenReal :: Monad m => m Int -> m Int
incrIfEvenReal anInt = anInt >>= branch
  where branch ourInt = if even ourInt then return (ourInt+1) else return ourInt 
```

所以 的 类型`>>=`确实是为了便于编程，但有一些替代方案有时更有用。值得注意的是函数`Control.Monad.join`，当它与 结合使用时，它的功能与（可以根据另一个定义）`fmap`完全相同。`>>=`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-15T11:01:22.627

正如其他人指出的那样，没有什么可以限制函数将一元值作为参数。bind 函数本身需要一个，但不是赋予绑定的函数。

我认为你可以用“Monad 是一个容器”的比喻来让自己理解这一点。一个很好的例子是Maybe。虽然我们知道如何从 Maybe 容器中解包一个值，但我们并不知道每个 monad 的值，而且在某些 monad（如 IO）中这是完全不可能的。现在的想法是，Monad 在幕后以您不必知道的方式执行此操作。例如，您确实需要使用在 IO monad 中返回的值，但您无法打开它，因此执行此操作的函数需要位于 IO monad 本身中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-15T10:56:43.103

*如果*需要，该函数可以采用一元值。但它*不是被迫*这样做的。

考虑以下人为的定义，使用来自 Data.Char 的列表 monad 和函数：

```
m :: [[Int]]
m = [[71,72,73], [107,106,105,104]]

f :: [Int] -> [Char]
f mx = do
    g <- [toUpper, id, toLower]
    x <- mx
    return (g $ chr x) 
```

你当然可以跑`m >>= f`；结果将具有 type `[Char]`。

（这很重要，`m :: [[Int]]`而不是`m :: [Int]`.`>>=`总是从它的第一个参数中“剥离”一个单子层。如果你不希望这种情况发生，请做`f m`而不是`m >>= f`.）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-15T15:08:48.260

正如其他人所提到的，没有什么可以限制编写此类函数。

事实上，有一大类 type 函数`:: m a -> (m a -> m b) -> m b`：

```
f :: Monad m => Int -> m a -> (m a -> m b) -> m b
f n m mf = replicateM_ n m >>= mf m 
```

在哪里

```
f 0 m mf = mf m

f 1 m mf = m >> mf m

f 2 m mf = m >> m >> mf m 
```

... ETC。 ...

（注意基本情况：当 n 为 0 时，它只是普通的功能应用程序。）

但是这个函数有什么作用呢？它多次执行一个单子动作，最后丢弃所有结果，并将 mf 的应用程序返回给 m。

有时有用，但通常几乎没有用，尤其是与`>>=`.

快速的[Hoogle 搜索](http://www.haskell.org/hoogle/?hoogle=m+a+-%3E+%28m+a+-%3E+m+b%29+-%3E+m+b)不会出现任何结果；也许是一个有说服力的结果。

# html - 不应该出现的下拉箭头

> ID：11967650
> 
> 赞同：0
> 
> 时间：2012-08-15T10:21:22.833
> 
> 标签：html, css, dropdownbox

我有 IE 和 Firefox 的问题。我相信我想要达到的效果只适用于 chrome。问题是它在 chrome 中完美地显示了下拉菜单，如下图所示：![正确的下拉菜单](../Images/32c270a6d3e6c9eb99f5ca9a0e70c542.png)

并在 Firefox / ie 中以这种方式显示它： ![在此处输入图像描述](../Images/a303f29b6cbaea043bbc76619d055f42.png)

所以，基本上它保持默认的下拉箭头。

这是一个代码：

```
 <select name="gender">
       <option value="">Gender</option>
       <option value="male">Male</option>
       <option value="female">Female</option>
      </select> 
```

和CSS：

```
input {
height: 67px;
width: 400px;
border:none;
background:url(../_images/butt-reg.png) no-repeat;
padding: 0 20px;
margin: 0 10px 20px 10px;
text-align:left;
vertical-align: middle;
font-size: 18pt;
color: #666; 
```

我确信有一个简单的解决方案可以解决它，但我尝试了几件事，但没有任何效果。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:31:50.837

仅使用**CSS**进行这种*跨浏览器*是非常困难的（如果不是不可能的话）。我能想到的唯一给你的元素设置样式的方法就是模拟它。首先，插入一个具有选定值的隐藏文本。这是一个模拟 dropdown-元素的示例 HTML ：**`<select>``input``select`**

 **```
<div class = "select">
    <div class = "curVal">Gender</div><div class = "arrow">V</div>
    <div class = "choices">
        <div class = "choice">Male</div>
        <div class = "choice">Female</div>
        <div class = "choice">Refuse to answer</div>
    </div>
</div> 
```

让我们设计它：

```
body {
    font-family: 'Arial', Helvetica, Sans-Serif;        
}
.select div {
    display: inline-block;
}
.curVal {
    height: 30px;
    width: 150px;
    line-height: 30px;
    vertical-align: middle;
    background-color: rgb(0, 162, 232);
    color: white;
}
.arrow {
    color: white;
    background-color: rgb(0, 140, 200); /* this can be an image */
    cursor: pointer;
    height: 30px;
    line-height: 30px;
    vertical-align: middle;
    position: absolute;
    top: 0px;
}
.choices {
    position: absolute;
    left: 0px;
    top: 30px;
    background-color: rgb(255, 127, 39);
    color: white;
    padding: 3px 3px 3px 3px;
    width: 150px;
}
.choices div {
    display: block;
    cursor: pointer;        
} 
```

一些jQuery：

```
$(document).ready()(function(){
    $(".choices").hide();
});
$(".arrow").click(function(event) {
   $(".choices").slideToggle("fast");
   event.stopPropagation();
});
$(".choice").click(function() {
   $(".curVal").html($(this).html());
   $(".choices").slideToggle("fast");
   event.stopPropagation();
});
$("html").click(function() {
   $(".choices").slideUp("fast");
}); 
```

把它们放在一起，你会得到这个：[jsFiddle](http://jsfiddle.net/ZEtCG/22/)。

我希望这对你有任何帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:53:52.703

看看[Style a Select Box Using Only CSS](http://bavotasan.com/2011/style-select-box-using-only-css/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:02:07.970

看这里：[http ://result.dabblet.com/gist/3358882/5eeb2b8d4fe6adf243c5c463111d367c7651a029](http://result.dabblet.com/gist/3358882/5eeb2b8d4fe6adf243c5c463111d367c7651a029)

我试图通过使用父节点上的伪元素（在本例中为标签元素）来用自定义按钮覆盖下拉按钮。CSS 属性 pointer-events 确保您仍然可以单击粉红色按钮来打开选择控件。**

# iphone - 将室内平面图映射到 OSM-XML 以在 iPhone 应用程序中使用

> ID：11967654
> 
> 赞同：2
> 
> 时间：2012-08-15T10:21:56.187
> 
> 标签：iphone, indoor-positioning-system

我目前正在我的家乡大学开展一个项目，以创建一个无基础设施的室内导航 iPhone 应用程序。我有几个关于 IndoorOSM 的问题，希望这里的专家能引导我走向正确的方向。

1.  给定一个室内平面图，如何使用 JOSM 将其映射为 OSM-XML 格式？我知道平面图将表示为节点、方式、标签和关系，每个节点都有一个 lat-lon 值。由于我要绘制的室内空间位于新加坡，现有的地图绘制工作很少，因此在建模之前我不确定在 JOSM 中准确放置平面图的位置（建筑物不存在）。问题是，如果我在错误的位置开始建模，OSM-XML 文件中生成的经纬度值将与实际空间中的经纬度值相差甚远，对吧？在那种情况下，我认为我无法使用磁力计来识别用户当前在地图上的位置......

2.  在 OSM wiki 中，提到节点表示一个地理空间点，而方式只是 2-2000 个节点的集合，可用于表示一个区域。请原谅我的无知，但我怎么知道这个“点”或节点的物理大小/面积是多少？

3.  除了 IndoorOSM，有没有更简单的方法可以将室内平面图转换为我的应用程序可以轻松理解和使用以允许导航的东西？我在 youtube 上看到了一个名为 roodin 的项目，但我不确定他们是如何进行映射的（[链接](http://www.youtube.com/watch?v=HTZFRDBdQck)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:09:20.790

我也在开发具有类似功能的应用程序。我的理解是：

1 - 映射建筑物时，您应该使用正确的纬度/经度进行映射。如果您可以去那里并使用带 GPS 的智能手机检查坐标，那么获取建筑物坐标应该不难。你不能去那里，那就更难了。也许请某人这样做可以帮助您。但是，要开始绘制平面图，您不需要坐标。您可以在完成绘图后执行此操作

2 - 使用 JOSM 绘图时，它会显示（在状态栏中）您的路径长度

3 - 目前，我坚持使用 IndoorOSM。我喜欢他们重用节点、方式和关系来绘制平面图的方式。这是我的建议

# jquery - Magento Catalog_Products 在管理员中使用 jQuery 拖放表

> ID：11967656
> 
> 赞同：1
> 
> 时间：2012-08-15T10:22:08.160
> 
> 标签：jquery, magento, prototypejs

我正在尝试将 jQuery 插件[http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/](http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/)与 Catalog_Products 表连接起来，我做到了。我将此代码（jQuery 代码）注入到 grid.js 文件中：

```
...

initGrid : function(){
    if(this.preInitCallback){
        this.preInitCallback(this);
    }
    if($(this.containerId+this.tableSufix)){
        this.rows = $$('#'+this.containerId+this.tableSufix+' tbody tr');
        for (var row=0; row<this.rows.length; row++) {
            if(row%2==0){
                Element.addClassName(this.rows[row], 'even');
            }

            Event.observe(this.rows[row],'mouseover',this.trOnMouseOver);
            Event.observe(this.rows[row],'mouseout',this.trOnMouseOut);
            Event.observe(this.rows[row],'click',this.trOnClick);
            Event.observe(this.rows[row],'dblclick',this.trOnDblClick);

            if(this.initRowCallback){
                try {
                    this.initRowCallback(this, this.rows[row]);
                } catch (e) {
                    if(console) {
                        console.log(e);
                    }
                }
            }
        }
    }
    if(this.sortVar && this.dirVar){
        var columns = $$('#'+this.containerId+this.tableSufix+' thead a');

        for(var col=0; col<columns.length; col++){
            Event.observe(columns[col],'click',this.thLinkOnClick);
        }
    }
    this.bindFilterFields();
    this.bindFieldsChange();
    if(this.initCallback){
        try {
            this.initCallback(this);
        }
        catch (e) {
            if(console) {
                console.log(e);
            }
        }
    }
    // Drag and drop
    jQuery(document).ready(function() {
        // Initialise the table
        jQuery("#catalog_category_products_table tbody").tableDnD({
            onDrop: function() {
                jQuery("#catalog_category_products_table tbody tr").each(function(index) {
                    jQuery("#catalog_category_products_table tbody tr td input.input-text:eq("+index+")").removeAttr('value');
                    jQuery("#catalog_category_products_table tbody tr td input.input-text:eq("+index+")").attr('value', index + 1);
                });
            }
        });
    });
},
getContainerId : function(){
    return this.containerId;
},

... 
```

删除后，我执行排序功能以对输入值进行排序，例如 1,2... 这工作正常。问题是当我保存这个产品时，新的输入值没有保存我认为这是因为 magento 我使用了一些按键，改变了绑定功能。我将非常感谢帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T17:22:40.563

我不确定将 jQuery 包含到管理面板中是否有意义，只是为了使用这个组件。Magento 已经有 Prototype + Scriptaculous 可用，你甚至不需要启用它们。您可以使用的组件是可排序的，它可以满足您的所有需求： http: [//madrobby.github.com/scriptaculous/sortable-create/](http://madrobby.github.com/scriptaculous/sortable-create/)

修改grid.js文件也不是一个好主意，您可以轻松地将任何类方法包装在prototypejs框架中。为此，通过布局更新，您可以包含具有此类内容的自定义 JS 文件：

```
varienGrid = Class.create(varienGrid, {
   initGrid: function ($super) {
       $super(); // Calling parent method functionality
       // Doing your customization
   }
}); 
```

在这种情况下，此页面上实例化的所有网格对象都将调用您的自定义方法代码，并且您可以安全地升级您的代码。

对于您的特定情况，代码可能如下所示：

```
varienGrid = Class.create(varienGrid, {
   initGrid: function ($super) {
       $super(); // Calling parent method functionality
       var table = $(this.containerId+this.tableSufix);
       this.sortedContainer = table.down('tbody');
       Sortable.create(this.sortedContainer.identify(), {
            tag: 'TR', 
            dropOnEmpty:true, 
            containment: [this.sortedContainer.identify()], 
            constraint: false,
            onChange: this.updateSort.bind(this)
       });
   },
   updateSort: function () 
   {
       var rows = this.sortedContainer.childElements(); // Getting all rows
       for (var i = 0, l = rows.length; i < l; i++) {
           // Check if input is available
           if (rows[i].down('input[type="text"]')) {
               rows[i].down('input[type="text"]').value = i + 1;
               // Updating is changed flag for element
               rows[i].down('input[type="text"]').setHasChanges({});
           }
       }
   }
}); 
```

同样对于元素，其中一些元素可能被禁用且未处理。您可以在 updateSort 方法中调试每个元素。

享受 Magento 开发的乐趣！

# erlang - Mnesia 查询游标 - 在实际应用程序中使用它们

> ID：11967660
> 
> 赞同：2
> 
> 时间：2012-08-15T10:22:20.727
> 
> 标签：erlang, cursor, erlang-otp, mnesia, yaws

在大多数应用程序中，很难避免查询用户想要查询的大量信息`browse through`。这就是导致我使用光标的原因。使用 mnesia，游标是使用[qlc:cursor/1 或 qlc:cursor/2](http://www.erlang.org/doc/man/qlc.html#cursor-1)实现的。与他们合作了一段时间，多次面对这个问题，

```
11> qlc:next_answers(QC,3)。
** 异常错误：{qlc_cursor_pid_no_longer_exists,<0.59.0>}
     在函数 qlc:next_loop/3 中（qlc.erl，第 1359 行）
12>

```

我突然想到，整个游标必须在一个 mnesia 事务中：作为一个整体执行一次。像下面这样

```
E:\>erl
Eshell V5.9（使用 ^G 中止）
1> 失忆症：开始（）。
行
2> rd（obj，{键，值}）。
对象
3> mnesia:create_table(obj,[{attributes,record_info(fields,obj)}])。
{原子，好的}
4> 写 = fun(Obj) -> mnesia:transaction(fun() -> mnesia:write(Obj) end) 结束。
#Fun<erl_eval.6.111823515>
5> [写入(#obj{key = N,value = N * 2}) || N <- 列表：seq(1,100)]，好的。
行
6> 记忆：交易（乐趣（）->
            QC = cursor_server:cursor(qlc:q([XX || XX <- mnesia:table(obj)])),
            Ans = qlc:next_answers(QC,3),
            io:format("\n\tAns: ~p~n",[Ans])
    结尾）。
        答：[{obj,20,40},{obj,21,42},{obj,86,172}]
{原子，好的}
7>

```

当你尝试`qlc:next_answers/2`在 mnesia 事务之外调用 say: 时，你会得到一个异常。不仅在事务之外，而且即使该方法由与创建游标的进程不同的进程执行，也必然会发生问题。

另一个有趣的发现是，一旦您退出 mnesia 事务，mnesia 游标中涉及的一个进程（显然 mnesia 在后台生成一个进程）就会退出，导致游标无效。看看下面这个：

```
-模块（光标服务器）。
-编译（export_all）。

光标（Q）->
    案例记忆：is_transaction() 的
        假->
            F = fun(QH)-> qlc:cursor(QH,[]) 结束，
            mnesia:activity(transaction,F,[Q],mnesia_frag);
        真-> qlc：光标（Q，[]）
    结尾。

%% --- 模块结束 ------------------------------ -

```

然后在shell中，我使用该方法：

```
7> QC = cursor_server:cursor(qlc:q([XX || XX <- mnesia:table(obj)]))。
{qlc_cursor,{<0.59.0>,<0.30.0>}}
8> erlang:is_process_alive(list_to_pid("<0.59.0>"))。
错误的
9> erlang:is_process_alive(list_to_pid("<0.30.0>"))。
真的
10> 自我（）。
<0.30.0>
11> qlc:next_answers(QC,3)。
** 异常错误：{qlc_cursor_pid_no_longer_exists,<0.59.0>}
     在函数 qlc:next_loop/3 中（qlc.erl，第 1359 行）
12>

```

因此，这使得构建一个用户需要浏览一组特定结果的 Web 应用程序变得非常困难，一组一组说：给他/她前 20 个，然后是下一个 20 等等 这涉及到，获得第一个结果，将它们发送到网页，然后等待用户单击`NEXT`然后请求`qlc:cursor/2`下一个 20 等等。这些操作无法在挂在 mnesia 事务中时完成！！！唯一可能的方法是生成一个将挂在那里的进程，接收并发送回下一个答案作为消息，并接收 next_answers 请求作为这样的消息：

```
-定义（CURSOR_TIMEOUT，计时器：小时（1））。

%% 初始请求在下面进行
请求（页面大小）->
    我 = 自我（），    
    CursorPid = spawn(?MODULE,cursor_pid,[Me,PageSize]),
    收到
        {initial_answers,Ans} ->
            %% 找到隐藏光标 Pid 的方法
            %% 在页面中以便后续请求
            %% 随之而来
            {Ans,pid_to_list(CursorPid)}
    在 ?CURSOR_TIMEOUT -> 超时之后
    结尾。

cursor_pid(ParentPid,PageSize)->
    F = 乐趣(Pid,N)->
            QC = cursor_server:cursor(qlc:q([XX || XX <- mnesia:table(obj)])),
            Ans = qlc:next_answers(QC,N),
            皮德！{initial_answers,Ans},
            收到
                {From,{next_answers,Num}} ->
                    从 ！{next_answers,qlc:next_answers(QC,Num)},
                    %% 这里有问题！如何循环回
                    %% 检查：Erlang Y-Combinator
                删除->
                    %% 它可能已经死了，所以我们在这里要小心！
                    试试 qlc:delete_cursor(QC) 的
                        _ -> 好的
                    抓住
                        _:_ -> 好的
                    结尾，
                    退出（正常）
            在 ?CURSOR_TIMEOUT -> 退出（正常）之后
            结尾
        结尾，
    mnesia:activity(transaction,F,[ParentPid,PageSize],mnesia_frag)。

next_answers(CursorPid,PageSize)->
    list_to_pid(CursorPid) ！{self(),{next_answers,PageSize}},
    收到
        {next_answers,Ans} ->
            {Ans,pid_to_list(CursorPid)}
    在 ?CURSOR_TIMEOUT -> 超时之后
    结尾。

```

这将产生管理进程退出、跟踪/监控等更复杂的问题我想知道为什么 mnesia 实施者没有看到这一点！

现在，这让我想到了我的问题。我一直在网上寻找解决方案，您可以查看出现问题的这些链接：[mnemosyne](http://www.erlang.org/documentation/doc-5.5.5/lib/mnemosyne-1.2.7.1/doc/html/mnemosyne.html)，[Ulf Wiger's Solution to Cursor Problems](http://www.trapexit.org/forum/viewtopic.php?p=44243)，[AMNESIA - mnesia 的 RDBMS 实现](http://amnesia.sourceforge.net/user_manual/manual.html)。

**1.**有没有人知道如何以不同于记录的方式处理 mnesia 查询游标，并且值得分享？

**2.** mnesia 实现者决定在单个事务中强制使用游标的原因是什么：甚至是对`next_answers`?

**3.**从我所介绍的内容中，有什么我不明白的地方（除了我的糟糕的错误插图代码 - 请忽略那些）？

**4.** AMNESIA（在我上面给出的链接的第 4.7 节），有一个很好的游标实现，因为对 next_answers 的后续调用，不需要在同一个事务中，也不需要在同一个过程中。你会建议任何人因此而从 mnesia 切换到 amnesia 吗？而且，这个库是否仍然受支持？

**5.** `Ulf Wiger`，（许多 erlang 库，尤其是 GPROC 的作者），建议使用[`mnesia:select/4`](http://www.erlang.org/doc/man/mnesia.html#select-4). 我将如何使用它来解决 Web 应用程序中的光标问题？

注意：请不要建议我离开 mnesia 并使用其他东西，因为我想使用 mnesia 来解决这个特定问题。感谢您抽出宝贵时间阅读所有这些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:30:27.270

动机是事务抓取（在您的情况下）读取锁。锁不能保留在事务之外。

如果需要，您可以在dirty_context 中运行它，但是您会丢失事务属性，即表可能会在调用之间发生变化。

```
make_cursor() ->
    QD = qlc:sort(mnesia:table(person, [{traverse, select}])),
    mnesia:activity(async_dirty, fun() -> qlc:cursor(QD) end, mnesia_frag).

get_next(Cursor) ->
    Get = fun() -> qlc:next_answers(Cursor,5) end,
    mnesia:activity(async_dirty, Get, mnesia_frag).

del_cursor(Cursor) ->
    qlc:delete_cursor(Cursor). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T13:09:42.607

我认为这可能会对您有所帮助：

使用**async_dirty**而不是**事务**

```
{Record,Cont}=mnesia:activity(async_dirty, fun mnesia:select/4,[md,[{Match_head,[Guard],[Result]}],Limit,read]) 
```

然后读取下一个**限制**记录数：

```
mnesia:activity(async_dirty, fun mnesia:select/1,[Cont]) 
```

完整代码：

```
-record(md,{id,name}).
batch_delete(Id,Limit) ->
    Match_head = #md{id='$1',name='$2'},
    Guard = {'<','$1',Id},
    Result = '$_',
    {Record,Cont} = mnesia:activity(async_dirty, fun mnesia:select/4,[md,[{Match_head,[Guard],[Result]}],Limit,read]),
    delete_next({Record,Cont}).

delete_next('$end_of_table') ->
    over;
delete_next({Record,Cont}) ->
    delete(Record),
    delete_next(mnesia:activity(async_dirty, fun mnesia:select/1,[Cont])).

delete(Records) ->
    io:format("delete(~p)~n",[Records]),
    F = fun() ->
        [ mnesia:delete_object(O) || O <- Records]
    end,
    mnesia:transaction(F). 
```

请记住，您不能在一项事务中使用游标

# bash - 命令 `timeout` 不适用于 Scala - 为什么？

> ID：11967663
> 
> 赞同：6
> 
> 时间：2012-08-15T10:22:22.737
> 
> 标签：bash, scala, timeout

**设置：** Ubuntu 12.04，32 位；斯卡拉 2.9.1; Java 1.6.0_24

**描述：**

虽然在 bash 命令行上该命令`/usr/bin/timeout 10 scala -version`工作正常，但在 bash 脚本中执行时会卡住。

在命令行上执行（持续时间`< 1`秒）：

```
user@ubuntu:~$ /usr/bin/timeout 10 scala -version
Scala code runner version 2.9.1 -- Copyright 2002-2011, LAMP/EPFL
user@ubuntu:~$ echo $?
1 
```

放在 bash 脚本中的相同命令卡住了：

`testScript.sh`：

```
#!/bin/bash
/usr/bin/timeout 10 scala -version
echo "finished with $?" 
```

执行`testScript.sh`（持续时间 10 秒）：

```
user@ubuntu:~/scripts$ ./testScript.sh
Scala code runner version 2.9.1 -- Copyright 2002-2011, LAMP/EPFL
finished with 124
user@ubuntu:~/scripts$ 
```

注意：Java（Scala 使用）不会出现此问题，它似乎是 Scala 特有的问题。

**问题：**为什么`timeout`脚本中的调用卡住了？

我该如何解决这个问题/什么是一个好的解决方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T11:57:47.377

尝试包括该`--foreground`选项。来自`man timeout`：

> - 前景
> 
> > When not running timeout directly from a shell prompt, allow COMMAND to read from the TTY and receive TTY signals. In this mode, children of COMMAND will not be timed out.

Using the following test script:

```
#!/bin/bash
/usr/bin/timeout --foreground 10 scala -version
echo "finished with $?" 
```

It appears to work fine.

```
$ ./test.sh 
Scala code runner version 2.9.1 -- Copyright 2002-2011, LAMP/EPFL
finished with 1 
```

Without `--foreground` the script hangs as you've described.

# java - 为什么我的方法不适用于字母 ENUMS？

> ID：11967664
> 
> 赞同：-1
> 
> 时间：2012-08-15T10:22:24.830
> 
> 标签：java, keyboard

我正在尝试为 java 游戏编写一个动态键绑定系统。它主要是有效的，除了一个大问题：像`a`, `b`,`c`这样的字符不起作用。只有像`~`, `&`,这样的字符`$`有效。

我用这个方法调用`KeyFinder lookup = KeyFinder.lookup(keyChar);`

这是我当前的代码文件，对不起，如果这真的很长。

# KeyFinder.java

```
public enum KeyFinder {
    A(Keyboard.KEY_A, "a", "A"),
    B(Keyboard.KEY_B, "b", "B"),
    C(Keyboard.KEY_C, "c", "C"),
    D(Keyboard.KEY_D, "d", "D"),
    E(Keyboard.KEY_E, "e", "E"),
    F(Keyboard.KEY_F, "f", "F"),
    G(Keyboard.KEY_G, "g", "G"),
    H(Keyboard.KEY_H, "h", "H"),
    I(Keyboard.KEY_I, "i", "I"),
    J(Keyboard.KEY_J, "j", "J"),
    K(Keyboard.KEY_K, "k", "K"),
    L(Keyboard.KEY_L, "l", "L"),
    M(Keyboard.KEY_M, "m", "M"),
    N(Keyboard.KEY_N, "n", "N"),
    O(Keyboard.KEY_O, "o", "O"),
    P(Keyboard.KEY_P, "p", "P"),
    Q(Keyboard.KEY_Q, "q", "Q"),
    R(Keyboard.KEY_R, "r", "R"),
    S(Keyboard.KEY_S, "s", "S"),
    T(Keyboard.KEY_T, "t", "T"),
    U(Keyboard.KEY_U, "u", "U"),
    V(Keyboard.KEY_V, "v", "V"),
    W(Keyboard.KEY_W, "w", "W"),
    X(Keyboard.KEY_X, "x", "X"),
    Y(Keyboard.KEY_Y, "y", "Y"),
    Z(Keyboard.KEY_Z, "z", "Z"),
    TILDE(Keyboard.KEY_GRAVE, "~", "`"),
    TAB(Keyboard.KEY_TAB, "tab"),
    F1(Keyboard.KEY_F1, "F1"),
    F2(Keyboard.KEY_F2, "F2"),
    F3(Keyboard.KEY_F3, "F3"),
    F4(Keyboard.KEY_F4, "F4"),
    F5(Keyboard.KEY_F5, "F5"),
    F6(Keyboard.KEY_F6, "F6"),
    F7(Keyboard.KEY_F7, "F7"),
    F8(Keyboard.KEY_F8, "F8"),
    F9(Keyboard.KEY_F9, "F9"),
    F10(Keyboard.KEY_F10, "F10"),
    F11(Keyboard.KEY_F11, "F11"),
    F12(Keyboard.KEY_F12, "F12"),
    F13(Keyboard.KEY_F13, "F13"),
    F14(Keyboard.KEY_F14, "F14"),
    F15(Keyboard.KEY_F15, "F15"),
    ONE(Keyboard.KEY_1, "1", "!", "one"),
    TWO(Keyboard.KEY_2, "2", "@", "two"),
    THREE(Keyboard.KEY_3, "3", "#", "three"),
    FOUR(Keyboard.KEY_4, "4", "$", "four"),
    FIVE(Keyboard.KEY_5, "5", "%", "five"),
    SIX(Keyboard.KEY_6, "6", "^", "six"),
    SEVEN(Keyboard.KEY_7, "7", "&", "seven"),
    EIGHT(Keyboard.KEY_8, "8", "*", "eight"),
    NINE(Keyboard.KEY_9, "9", "(", "nine"),
    ZERO(Keyboard.KEY_0, "0", ")", "zero"),
    MINUS(Keyboard.KEY_MINUS, "-", "_", "minus"),
    EQUALS_ADD(Keyboard.KEY_EQUALS, "=", "+", "plus", "equals"),
    INSERT(Keyboard.KEY_INSERT, "insert", "ins"),
    DEL(Keyboard.KEY_DELETE, "del", "delete"),
    HOME(Keyboard.KEY_HOME, "home"),
    ADD(Keyboard.KEY_ADD, "add"),
    PAGE_UP(Keyboard.KEY_PRIOR, "prior", "pageup"),
    PAGE_DOWN(Keyboard.KEY_NEXT, "next", "pagedown"),
    NUM_LOCK(Keyboard.KEY_NUMLOCK, "numlock", "numberlock"),
    SQBRACKET_LEFT(Keyboard.KEY_LBRACKET, "[", "{"),
    SQBRACKET_RIGHT(Keyboard.KEY_RBRACKET, "]", "}"),
    SEMICOLON(Keyboard.KEY_SEMICOLON, ";", ":");
    private static final Map<Integer, KeyFinder> keys = new HashMap<Integer, KeyFinder>();
    private static final Map<String, KeyFinder> lookup = new LinkedHashMap<String, KeyFinder>();
    private final int key;
    private final String keyName;
    private final String[] lookupKeys;
    static {
        for (KeyFinder type : EnumSet.allOf(KeyFinder.class)) {
            keys.put(type.key, type);
            for (String key : type.lookupKeys) {
                lookup.put(key, type);
            }
        }
    }

    KeyFinder(int key, String keyName, String lookupKey) {
        this.key = key;
        this.keyName = keyName;
        this.lookupKeys = new String[] { lookupKey };
    }

    KeyFinder(int key, String keyName, String... lookupKeys) {
        this.key = key;
        this.keyName = keyName;
        this.lookupKeys = lookupKeys;
    }

    public static KeyFinder fromKey(int key) {
        return keys.get(key);
    }

    public static String toKeyName(int key) {
        KeyFinder type = keys.get(key);
        if (type != null) {
            return type.getKeyName();
        } else {
            return "#" + key;
        }
    }

    public static KeyFinder lookup(String keyName) {
        return lookup(keyName, true);
    }

    public static KeyFinder lookup(String keyName, boolean fuzzy) {
        KeyFinder i = StringUtil.lookup(lookup, keyName, fuzzy);
        if(i != null)
            return i;
        else
            try {
                return fromKey(Integer.parseInt(keyName));
            } catch (NumberFormatException e) {
                return null;
            }
    }

    public int getKey() {
        return key;
    }

    public String getKeyName() {
        return keyName;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:22:24.487

我剥离了您`KeyFinder`并与 一起测试`StringUtil`并意识到您从未`keyName`在`lookup`地图中使用过。所以`a`不存在。

以下是我所做的一些更改，可能会对您有所帮助。

将 更改`lookupKeys`为列表而不是数组。

```
private final ArrayList<String> lookupKeys = new ArrayList<String>(); 
```

删除你的一个构造函数（它已经过时了，因为你有一个 with `varargs`）

```
KeyFinder(int key, String keyName, String lookupKey) // Remove 
```

更改其他构造函数并让`keyName`包含在`lookupKeys`.

```
KeyFinder(int key, String keyName, String... lookupKeys) {
    this.key = key;
    this.keyName = keyName;
    this.lookupKeys.add(keyName);
    this.lookupKeys.addAll(Arrays.asList(lookupKeys));
} 
```

它在一些简单的测试中对我有用。

**注意**

我没有比这更多地分析你的代码。我不知道你是否真的需要，`keyName`但我把它留给你。我只是想让查找工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T10:32:32.297

你的问题是你不能减少问题，因为你的代码太复杂了（=它有太多的依赖关系）。

尝试将代码分成独立的部分，并为每个部分编写单元测试。如果单元测试有效，那么您将知道任何错误只能隐藏在连接不同部分的代码中。

也就是说，我的猜测是某些方法返回`null`并且您编写的代码在这种情况下静默失败（即，您没有给出错误消息“这不应该在此处返回 null”，而是放弃）。像这样的代码非常不友好，因为任何不寻常的情况都会让它默默地失败，而对于试图理解发生了什么的人（在这种情况下是你）没有任何线索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T11:32:05.123

你错了，你的代码不能被剥离——如果你这样做了，你自己就会发现错误。

[这是一个 ideone 片段](http://ideone.com/fYVeH)，它说明了查找失败的核心。请注意，您的第一个关键字符没有出现在查找映射中 - 因为它是 the`keyName`而不是`lookupKey`.

[这是一个修改后的代码段](http://ideone.com/GRCdp)，其中名称也显示为查找键。不出所料，查找成功。

事实上，拥有一个`keyName`字段似乎毫无意义，因为它从未使用过（并且`toString()`更适合获取枚举常量的“名称”）。所以[这个变种](http://ideone.com/mAh2y)可能是更好的一种。

* * *

您的问题与字母与符号*无关；*只是第一个引用的符号不起作用（因此查找大写字母会起作用）。同样，它不需要 99% 来理解代码是如何工作的，这只是一个错误地填充静态地图的问题。

今后请尽量少眨眼，多主动。

# mysql - 使用参数时mysql语法错误

> ID：11967666
> 
> 赞同：0
> 
> 时间：2012-08-15T10:22:57.560
> 
> 标签：mysql, vb.net, parameters

当我使用参数时，我一直被告知我的 mysql 语法中有错误。

这是我的代码：

```
 Dim db As New Database

    Dim sql As String = "select firstname, password from users where email = :email"

    Dim args As New List(Of MySqlParameter)
    args.Add(New MySqlParameter(":email", txtEmail.Text))

    ' execDB(procedurename As String, proceduretype As String, parameters() as MySqlParameter, returntype As String, newconnection As Boolean)

    Dim dr As MySqlDataReader = db.execDB(sql, "Text", args.ToArray, "DataReader", False) 
```

错误表明这`:email`不是有效值。我不明白为什么它不使用参数，因为我将它传递给`execDB`函数。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:29:42.533

使用`?param` [语法](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html#connector-net-examples-mysqlcommand-parameters)，

```
Dim sql As String = "select firstname, password from users where email = ?email" 
```

# pyrocms - 会话的自定义输出：消息？

> ID：11967669
> 
> 赞同：1
> 
> 时间：2012-08-15T10:23:08.523
> 
> 标签：pyrocms

在 PyroCMS 中，我使用`session:messages`标签向用户显示消息。这运作良好，但我想为每条消息添加一个关闭按钮，这需要在每条消息中放置一个跨度。例如：

```
<div class="alert success">
  You have logged in successfully. <span class="close">X</span>
</div> 
```

每条消息都包装在一个 div 中，通过设置`session:messages`标签的属性来给它一个类。没有指定输出的内置方法。如何覆盖`messages()`session.php 中的函数，添加一个新属性来附加这个关闭按钮？

到目前为止，我已经尝试过：

1.  *将system/cms/plugins/session.php*复制到 *addons/shared_addons/plugins/session.php* 并修改`messages()`函数。使用的是核心功能，而不是我希望的新插件。

2.  如上所述复制插件，然后将其类更改为`My_Plugin_Session extends Plugin_Session`希望其功能随后覆盖核心 Plugin_Session 类。没运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T21:23:41.857

无法扩展核心中的某些内容（[例如库和帮助程序](http://docs.pyrocms.com/2.1/manual/index.php/developers/basics/the-addons-directory)） - 我*认为*这也适用于插件。

在这种情况下，如果我是你（我可能必须为我的下一个项目这样做，因为这些可关闭的警报通常在[Twitter Bootstrap](http://twitter.github.com/bootstrap/components.html)等中）我只需直接编辑*/system/cms/plugins/session.php*并将`<span>`关闭按钮的额外内容添加到成功、通知和错误条件（“if”语句）中。

在一个典型的网站上，我想不出你会需要一些与其他人不同的警报显示的情况（除了不同的颜色，当然取决于结果，你可以在 CSS 中使用类名来做到这一点）。

**如果您正在使用 Git（您已经克隆或分叉了[官方 PyroCMS 存储库](https://github.com/pyrocms/pyrocms)**并**创建了自己的分支），那么您对未来的更新绝对没问题 - 如果在未来版本中会话插件发生更改，任何更改都将被合并到您的代码会自动生成，或者如果 Git 无法弄清楚，它会向您显示差异并提示您手动修复它。**

 **注意 - 基于管理界面，还有一些其他解决方案可以解决这个特定问题（您可能已经注意到那里的 flash 消息是可关闭的）。

您可以创建一个部分 - 它可以包含 PHP，而不仅仅是 Lex 标记 - 例如，查看*/system/cms/themes/pyrocms/views/admin/partials/notices.php*类似这样的内容（根据需要编辑并复制通知和错误):

```
<?php if ($this->session->flashdata('success')): ?>
<div class="alert success">
    <?php echo $this->session->flashdata('success'); ?>
</div>
<?php endif; ?> 
```

PyroCMS 管理员实际上使用[liveQuery](http://docs.jquery.com/Plugins/livequery)`<span>`在浏览器中附加关闭按钮
来源：*/system/cms/modules/wysiwyg/js/wysiwyg.js*：

```
// Add the close link to all alert boxes
$('.alert').livequery(function(){
    $(this).prepend('<a href="#" class="close">x</a>');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T21:58:02.713

我这样做了，它运行完美，不需要 jQuery 以外的其他插件。

**在模板布局中添加：**

```
{{ session:messages success="message success" notice="message info" error="message error" }} 
```

**JavaScript**：

```
$(function() {
    $('.message').prepend('<a class="baxclose" id="baxclose"></a>');
    $('#baxclose').click(function(){
        $('.message').fadeOut('slow');
    });
}); 
```

和CSS：

```
 a.baxclose{
    float:left;
    width:30px;
    height:30px;
    background:transparent url(../img/close-icon.png);
    margin-top: -30px;
    margin-left: -30px;
    cursor:pointer;
}
.message {
    padding: 20px 20px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;
    margin-bottom: 10px;
    -moz-box-shadow:inset 0 2px 3px rgba(255,255,255,0.5), 0 2px 3px rgba(0,0,0,0.1);
    -webkit-box-shadow:inset 0 2px 3px rgba(255,255,255,0.5), 0 2px 3px rgba(0,0,0,0.1);
    box-shadow:inset 0 2px 3px rgba(255,255,255,0.5), 0 2px 3px rgba(0,0,0,0.1);
    zoom: 1;
    margin-bottom: 20px;
}
    .message h3 {
        margin-top: 0;
        font-size: 12px;
        font-weight: bold;
    }
    .message p {
        margin-bottom: 0;
    }

.message.info {
    border: 1px solid #cadcea;
    background-color: #cdf;
    background-image: -o-linear-gradient(top,  #eef,  #cdf);
    background-image: -ms-linear-gradient(top,  #eef,  #cdf);
    background-image: -moz-linear-gradient(top,  #eef,  #cdf);
    background-image: -webkit-gradient(linear, left top, left bottom, from(#eef), to(#cdf));
    background-image: -webkit-linear-gradient(top,  #eef,  #cdf);
    background-image: linear-gradient(top,  #eef,  #cdf);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#EEEEFF', endColorstr='#CCDDFF');
    color: #225b86;
    text-shadow: 0 1px 1px #fff;
}

.message.error {
    border: 1px solid #eeb7ba;
    background-color: #fae2e2;
    background-image: -o-linear-gradient(top,  #fae2e2,  #f2cacb);
    background-image: -ms-linear-gradient(top,  #fae2e2,  #f2cacb);
    background-image: -moz-linear-gradient(top,  #fae2e2,  #f2cacb);
    background-image: -webkit-gradient(linear, left top, left bottom, from(#fae2e2), to(#f2cacb));
    background-image: -webkit-linear-gradient(top,  #fae2e2,  #f2cacb);
    background-image: linear-gradient(top,  #fae2e2,  #f2cacb);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fae2e2', endColorstr='#f2cacb');
    color: #be4741;
    text-shadow: 0 1px 1px #fff;
}

.message.success {
    border: 1px solid #b8c97b;
    background-color: #e5edc4;
    background-image: -o-linear-gradient(top,  #e5edc4,  #d9e4ac);
    background-image: -ms-linear-gradient(top,  #e5edc4,  #d9e4ac);
    background-image: -moz-linear-gradient(top,  #e5edc4,  #d9e4ac);
    background-image: -webkit-gradient(linear, left top, left bottom, from(#e5edc4), to(#d9e4ac));
    background-image: -webkit-linear-gradient(top,  #e5edc4,  #d9e4ac);
    background-image: linear-gradient(top,  #e5edc4,  #d9e4ac);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#e5edc4', endColorstr='#d9e4ac');
    color: #3f7227;
    text-shadow: 0 1px 1px #fff;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T14:59:59.937

代替您用来删除的按钮，另一个选项是在单击事件上创建一个淡出消息。

HTML：

```
<div id="msgAlert"> …session:messages goes here...</div> 
```

JS：

```
<script type="text/javascript">
$('html').click(function() { $('#msgAlert').delay(5000).fadeOut('slow'); }); 
```

单击将在 5 秒后淡出会话消息。**

# licensing - Away3D 和 AwayPhysics：内容使用需要许可证的功能

> ID：11967674
> 
> 赞同：0
> 
> 时间：2012-08-15T10:23:22.187
> 
> 标签：licensing, adobe, away3d

刚刚从 Github 中抓取了所有 Away3D 分支，并将它们包含在我在 FlashBuilder 中创建的测试项目中。一切运行良好，但如果我运行“awayphysics-examples-fp11”集合中的任何文件，我会收到这条可怕的消息， ![http://i.imgur.com/A0pJR.jpg](../Images/66fa871b1943f80448d99635e27d051b.png)

我已经在这里和谷歌上搜索了这条消息，包括 Away3D，但没有任何相关信息出现，所以如果这已经是一个已知问题，我很抱歉。

如果我想使用 Away3D 和 AwayPhysics，这只是我必须接受的吗？

我遇到问题的分支是 away3d-core-fp11、awayphysics-core-fp11 和 awayphysics-examples-fp11。

* * *

只是说，我了解 Adob​​e 的新模型，它规定您必须获得使用共享内存空间（Alchemy 等）*和*Stage3D 的许可证。我质疑是否有办法在没有 Alchemy 元素的情况下使用 Away3D 和 AwayPhysics，一个 lá（我刚刚发现）jiglibflash。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:50:02.043

Don't use flash player. Using Stage3d in in a flash player app is a premium feature. [http://www.adobe.com/devnet/flashplayer/articles/premium-features.html](http://www.adobe.com/devnet/flashplayer/articles/premium-features.html)

Sorry for necroposting, but someone might find it useful, since google drops this link first on a few queries.

# openerp - OpenErp 6.0 工资单

> ID：11967675
> 
> 赞同：4
> 
> 时间：2012-08-15T10:23:23.287
> 
> 标签：openerp

**OpenERP**如何 根据**HR**中**的文本框**计算税收->配置->工资单->薪金头有文本框“<strong>基于”我想把所得税计算放在基本

 **如果基本 < 150

```
 don’t deduct 
```

否则如果基本 < 650

```
 deduct basic*0.1 -50 
```

elseif基本<1400

```
 deduct basic*0.15 -270 
```

我需要计算这样的东西，你能帮帮我，我来自埃塞俄比亚，非常感谢你的帮助。我正在使用 OpenERP 6.0 v

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:14:14.790

我正在使用 OpenERP 6.1 - 您可能希望升级，因为它具有更好的界面恕我直言。

在 6.1 中，您将向绑定到员工合同的薪金结构添加薪金规则。

工资规则将保存计算。本质上，您有两个选择：

1）在单个规则的python代码中编写所有计算 - 像这样：

```
if categories.BASIC < 150:
    result = 0
elif categories.BASIC < 650:
    result = - categories.BASIC * 0.1 + 50
else:
    result = - categories.BASIC * 0.15 + 270 
```

2）使用基于categories.BASIC的规则范围条件，并仍然用python定义一些规则：

```
# For 150 - 650
result = - categories.BASIC * 0.1 + 50

# For 650 - 1400
result = - categories.BASIC * 0.15 + 270 
```

3）如果您想进一步复杂化，请使用范围条件百分比值规则，那么您不需要在规则中放入任何 python 代码，但您将拥有双倍的规则数量 - 一组用于百分比（-basic*0.1）和一组偏移量（50）

取决于您喜欢什么，因为这将决定工资单的外观。虽然财务效果是一样的。

忘了说，序列号是必不可少的！categories.BASIC 将仅包含先前根据序列号计算的规则值。**

# facebook - 测试用户和页面访问令牌可能存在的错误

> ID：11967680
> 
> 赞同：0
> 
> 时间：2012-08-15T10:23:47.633
> 
> 标签：facebook, facebook-graph-api, testing, access-token

可能的 Facebook 错误：首先我在这里发帖，因为出于某种原因，当我转到[https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)时，创建错误的按钮永远不会出现！

Facebook 测试用户的行为与真实用户不同：如果您使用页面访问令牌调用图形 api fql 来检索用户的基本信息，例如姓名等，则 api 不会返回任何内容。我使用页面访问令牌的原因是因为我正在发出需要页面访问令牌的批处理请求。真实用户用户返回基本信息，如带有页面访问令牌的名称，但测试用户不返回。

谢谢

# c++ - LDAP 获取完整的用户名 C++

> ID：11967690
> 
> 赞同：0
> 
> 时间：2012-08-15T10:24:34.773
> 
> 标签：c++, qt, qt4, ldap, ldap-query

我正在我的办公室写一个小应用程序。在这个应用程序中，我必须获得完整的用户名。它是用 Qt / C++ 编写的

我喜欢通过 LDAP 获取这些信息。现在我可以连接到我们的 Active Directory 服务器并可以连接到搜索功能。

此信息来自 Microsoft 编写的示例。

但是在这一点上，示例使我感到困惑。我不明白如何给这个服务器一个用户名并接收全名。

链接到 Microsoft 示例： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa367016 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367016(v=vs.85).aspx)

有人可以给我一个建议，我如何才能获得这些信息？

谢谢，最好的问候克里斯；）

PS对不起英语不好。PSS，如果我错过了什么或者您需要更多信息，请说出来。

LDAP_query.cpp：

```
#include <settings.h>
#include <ui_settings.h>
#include <mainwindow.h>
#include <ui_mainwindow.h>
#include <QtGui>
#include <QString>
//Header Files for LDAP Query
#include <windows.h>
#include <winldap.h>
#include <winber.h>
#include <rpc.h>
#include <rpcdce.h>
#include <stdio.h>

void MainWindow::LDAP_query(QString name)
{

//Name contains the username

PWCHAR hostName = NULL;
PWCHAR Domain = NULL;
PWCHAR pMyDN = NULL;
PWCHAR pUserName;
PWCHAR pPassword;
LDAP* pLdapConnection = NULL;
ULONG version = LDAP_VERSION3;
ULONG getOptSuccess = 0;
ULONG connectSuccess = 0;
INT returnCode = 0;

//  Convert String hostname to a wchar_t*
char *hostName_2 = "Server.office.com";
QString Test = QString::fromAscii(hostName_2);
hostName = (WCHAR*)(Test.utf16());

//Connverting Char to WCHAR to connect to Directory
char *pMyDN_2 = "Ou=directory,Dc=Name,DC=office";
QString test2 = QString::fromAscii(pMyDN_2);
pMyDN = (WCHAR*)(test2.utf16());

//Open Connection
pLdapConnection = ldap_init(hostName, LDAP_PORT);
//Setting Connection Parm's

  ldap_set_option(pLdapConnection, LDAP_OPT_PROTOCOL_VERSION, (void*)&version);
ldap_connect(pLdapConnection, NULL);
returnCode = ldap_bind_s(pLdapConnection, pMyDN, NULL, LDAP_AUTH_NEGOTIATE);

if(returnCode == LDAP_SUCCESS)
{
    ui->InputA->setText("Connection sucessfull");
}
else
{
    ui->InputA->setText("Connection unsucessfull");
}

//Variables for Search Results    
LDAPMessage* pSearchResult;
PWCHAR pMyFilter = NULL;
char *pMyFilter_2 = "(&(objectCategory=person)(objectClass=user))";
QString Test7 = QString::fromAscii(pMyFilter_2);
pMyFilter = (WCHAR*)(Test7.utf16());

PWCHAR pMyAttributes[6];
ULONG errorCode = LDAP_SUCCESS;

pMyAttributes[0] = (WCHAR*)QString("cn").utf16();
pMyAttributes[1] = (WCHAR*)QString("company").utf16();
pMyAttributes[2] = (WCHAR*)QString("department").utf16();
pMyAttributes[3] = (WCHAR*)QString("telephoneNumber").utf16();
pMyAttributes[4] = (WCHAR*)QString("memberOf").utf16();
pMyAttributes[5] = NULL;

errorCode = ldap_search_s(
                    pLdapConnection,    // Session handle
                    pMyDN,              // DN to start search
                    LDAP_SCOPE_SUBTREE, // Scope
                    pMyFilter,          // Filter
                    pMyAttributes,      // Retrieve list of attributes
                    0,                  // Get both attributes and values
                    &pSearchResult);    // [out] Search results

if (errorCode != LDAP_SUCCESS)
   {
       ui->InputB->setText("ldap_search_s failed with");
       ldap_unbind_s(pLdapConnection);
       if(pSearchResult != NULL)
           ldap_msgfree(pSearchResult);
     }
   else
        ui->InputB->setText("ldap_search succeeded \n");

//here i like to receive the user's full name

//Closing Connection
ldap_unbind(pLdapConnection);

ui->Test_Ausgabe -> setText(name);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:53:46.813

看来您正在请求`cn`or `commonName`，有时该属性的值是全名。如果不是，请尝试将`givenName`和添加`sn`到请求的属性列表中。`givenName`is first name`sn`是`surname`或姓氏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:54:52.013

只是一个小问题。下面你会看到得到我需要的东西的线条。听起来有点愚蠢，但是当我运行代码时，pMyAttributes[0] 中的属性将永远不会显示。我不在乎，因为我不需要这些信息，但它似乎是正确的。我有点害怕我以后会得到错误的信息，我的程序会得到错误。

使用“PWCHAR pMyAttributes[4];”设置过滤器 什么都不显示

但设置过滤器“PWCHAR pMyAttributes[5];” 就像那样，我得到了我想要的一切。有人可以解释一下吗？

```
PWCHAR pMyAttributes[4];
ULONG errorCode = LDAP_SUCCESS;

pMyAttributes[0] = (WCHAR*)QString("sn").utf16();
pMyAttributes[1] = (WCHAR*)QString("mailNickname").utf16();
pMyAttributes[2] = (WCHAR*)QString("cn").utf16();
pMyAttributes[3] = NULL; 
```

显示用户的代码：

```
// Get the number of entries returned.
  ULONG numberOfEntries;

numberOfEntries = ldap_count_entries(
                    pLdapConnection,    // Session handle
                    pSearchResult);     // Search result

/*if(numberOfEntries == NULL)
{
    qDebug("ldap_count_entries failed with 0x%0lx \n",errorCode);
    ldap_unbind_s(pLdapConnection);
    if(pSearchResult != NULL)
        ldap_msgfree(pSearchResult);
}
else
    qDebug("ldap_count_entries succeeded \n");
*/
qDebug("The number of entries is: %d \n", numberOfEntries);

//----------------------------------------------------------
// Loop through the search entries, get, and output the
// requested list of attributes and values.
//----------------------------------------------------------
LDAPMessage* pEntry = NULL;
PWCHAR pEntryDN = NULL;
ULONG iCnt = 0;
char* sMsg;
BerElement* pBer = NULL;
PWCHAR pAttribute = NULL;
PWCHAR* ppValue = NULL;
ULONG iValue = 0;

for( iCnt=0; iCnt < numberOfEntries; iCnt++ )
{
    // Get the first/next entry.
    if( !iCnt )
        pEntry = ldap_first_entry(pLdapConnection, pSearchResult);
    else
        pEntry = ldap_next_entry(pLdapConnection, pEntry);

    // Output the entry number.
    qDebug("ENTRY NUMBER %i \n", iCnt);

    // Get the first attribute name.
    pAttribute = ldap_first_attribute(
                  pLdapConnection,   // Session handle
                  pEntry,            // Current entry
                  &pBer);            // [out] Current BerElement

    // Output the attribute names for the current object
    // and output values.
    while(pAttribute != NULL)
    {
        // Output the attribute name.
        QString abc = QString::fromWCharArray(pAttribute);
        qDebug() << "abc" << abc;

        // Get the string values.

        ppValue = ldap_get_values(
                      pLdapConnection,  // Session Handle
                      pEntry,           // Current entry
                      pAttribute);      // Current attribute

        // Print status if no values are returned (NULL ptr)
        if(ppValue == NULL)
        {
            qDebug(": [NO ATTRIBUTE VALUE RETURNED]");
        }

        // Output the attribute values
        else
        {
            iValue = ldap_count_values(ppValue);
            if(!iValue)
            {
                qDebug(": [BAD VALUE LIST]");
            }
            else
            {
                // Output the first attribute value
                QString abc2 = QString::fromWCharArray(*ppValue);
                qDebug()<< "abc2" << abc2;
                qDebug()<< "iValue" << iValue;

                // Output more values if available
                ULONG z;
                for(z=1; z<iValue; z++)
                {
                    QString abc3 = QString::fromWCharArray(ppValue[z]);
                    qDebug() << "abc3" << abc3;
                }
            }
        }

        // Free memory.
        if(ppValue != NULL)
            ldap_value_free(ppValue);
        ppValue = NULL;
        ldap_memfree(pAttribute);

        // Get next attribute name.
        pAttribute = ldap_next_attribute(
                        pLdapConnection,   // Session Handle
                        pEntry,            // Current entry
                        pBer);             // Current BerElement
        qDebug("\n");
    }

    if( pBer != NULL )
        ber_free(pBer,0);
    pBer = NULL;
}

//Closing Connection
ldap_unbind(pLdapConnection);

ui->Test_Ausgabe -> setText(name);
} 
```

# perl - 将选项放入 Perl 程序

> ID：11967692
> 
> 赞同：0
> 
> 时间：2012-08-15T10:24:35.840
> 
> 标签：perl, command-line, arguments

我已经在谷歌上搜索了一段时间，奇怪的是没有找到任何可以回答我问题的东西。

我想将 -n 作为选项传递给程序，其中 n 是整数。

这就是我所拥有的：

```
if($ARGV[0] eq "-A_NUMBER") 
```

我可以为此使用某种类型的通配符吗？那么对于任何负号后跟任何整数（或字符）的条件都成立吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T10:48:00.243

我建议阅读有关[Getopt::Std](http://perldoc.perl.org/Getopt/Std.html)的内容，它比仅检查 @ARGV 更冗长，但更强大

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:39:34.143

采用

```
if ($ARGV[0] =~ /^-\d/) 
```

此正则表达式匹配一个减号，然后是一个数字。

“^”将匹配锚定到行首，“\d”是表示数字的转义字符

# .net - 在 .NET 中确定本地 Intranet ip 地址

> ID：11967694
> 
> 赞同：4
> 
> 时间：2012-08-15T10:24:49.657
> 
> 标签：.net, ip-address, windows-networking

我正在尝试从该机器上运行的代码中获取该机器的本地 Intranet ip 有没有明确的方法可以做到这一点？

我尝试获取所有 IP 并按 10.0.0.0-10.255.255.255,172.16.0.0-172.31.255.255,192.168.0.0-192.168.255.255 过滤

```
Dns.GetHostEntry(Dns.GetHostName()).AddressList 
```

但这对我来说似乎有点神奇，我宁愿 .net 完成这项工作，由于我安装了 VirtualBox，它也会返回多个 ip

我也试过以下

```
var localAddress =
    (
        from ni in NetworkInterface.GetAllNetworkInterfaces()
        where ni.NetworkInterfaceType != NetworkInterfaceType.Loopback
                && hostEntry.HostName.EndsWith(string.Concat(".", ni.Name))
        let props = ni.GetIPProperties()
        from unicastAddress in props.UnicastAddresses
        where unicastAddress.Address.AddressFamily == AddressFamily.InterNetwork
        select unicastAddress.Address).FirstOrDefault(); 
```

哪个有效，但它适用于其他网络配置吗？

这一点与我有关`hostEntry.HostName.EndsWith(string.Concat(".", ni.Name))`

有没有人有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:29:26.227

您不能可靠地使用单个 IP，因为机器可能有多个网卡或每个网卡有多个 IP。例如，我的笔记本电脑有一个有线网卡和一个无线网卡，并且很乐意通过 DHCP 从我的路由器获取两个本地 IP。

此外，在一些花哨的网络设置（主要是企业环境）中，您可以拥有不同子网的 IP，这些子网能够通过路由器与每个子网通信。我可能在办公大楼的第 6 层是 192.168.6.X，第 7 层是 192.168.7.X，然后有一个路由器允许跨多个子网的流量，尽管它们被子网掩码屏蔽。

更好的策略是获取本地 IP 列表，过滤环回地址 (127.0.0.1)，然后尝试连接到目标计算机。

但是，如果您只想将本地 IP 检测为“在 Internet 上不公开”，则可以尝试以 1 跳的生存时间 (TTL) ping 一个公共地址（可能是您的网络服务器？）。如果存在任何路由器，这将不会使其通过任何路由器，这意味着如果它无法在 1 跳或更短的时间内到达公共互联网，表明它位于防火墙后面，它将失败。

在包含源代码的 stackoverflow 上查看这个很棒的答案：[检查 IP 是否在 LAN 中（在防火墙和路由器后面）](https://stackoverflow.com/a/7232612/1002041)

# java - 如何在Android中将字符串排序为表格格式

> ID：11967695
> 
> 赞同：0
> 
> 时间：2012-08-15T10:24:52.363
> 
> 标签：java, string, android-layout, tabular

我从客户那里收到了无数长字符串，例如“1 15/8/2012 15:00 palak paneer 2 200 dam aaloo 2 100”，所以我的要求是我希望这个字符串采用表格格式，例如：

```
1""""""""""""""""""""""           ''''''''''''''''''''''''''''''''''''''''''''         15/8/2012 15:00

palak paneer """""""""""""   2 """""""""""""""""   200

dam aaloo '''''''''''''''''''''''''''      2   '''''''''''''''''''''''''''' 100 
```

等等。

任何帮助，将不胜感激。我应该使用什么来将整个字符串放入表格格式并且我不知道字符串的长度，所以我们不能使用硬编码值。

我已经尝试过这个`string.split`函数，我有一个字符串数组，但是正如我所说的字符串的长度不是固定的，所以我们不能进行硬编码，所以我应该使用什么？

这是我的尝试：

```
recieved =modifiedSentence.split("~");
int length = 0;
length = recieved.length;
modifiedSentence = modifiedSentence.substring(length);
String string =String.format("%+s %+4s",recieved[0],recieved[1]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:44:59.230

此代码可能会对您有所帮助，它将字符串拆分`received`为行。

```
 int start=0; 
    String[] rows=new String[10];
    int colCount=0;
    int rowCount=0,i;
    String str="";
    String received="1 15/8/2012 15:00 palak paneer 2 200 dam aaloo 2 100 a a a 3 4";
    String splittedStrs[]=received.split("[a-z]");
    String header=splittedStrs[0].trim(); 
    received=received.substring(header.length()+1);
    boolean prev=false;
    for ( i = 0; i < received.length(); i++) {
        char c=received.charAt(i);
        if(c==' '){ 
            if(str.matches("\\D+")){                        
                prev=true; 
                str="";
            }
            else{
                if(prev==true){ 
                    colCount++;
                    if(colCount==3){
                        rows[rowCount]=received.substring(start,i);
                        rowCount++; 
                        start=i+1;
                        colCount=0;
                    } 
                }
                colCount++;
                if(colCount==3){
                    rows[rowCount]=received.substring(start,i);
                    rowCount++;
                    start=i+1;
                    colCount=0;
                }
                prev=false;
                str="";
            }
        } 
        else{
            str=str.concat(c+"");
        }
    }
    rows[rowCount]=received.substring(start,i);

    System.out.println("Header ="+header);
    for ( i = 0; i <= rowCount; i++) {
        System.out.println(rows[i]);
    } 
```

# iphone - 报亭套件背景下载

> ID：11967698
> 
> 赞同：1
> 
> 时间：2012-08-15T10:25:08.587
> 
> 标签：iphone, ios, newsstand-kit

我有一个 Newsstand 应用程序，它使用 Apple Newsstand Kit 来下载内容。

当我开始下载资产时，它开始正常下载并且一切正常。但是，如果我开始下载并退出应用程序，然后我关闭了 wifi，然后重新启动应用程序并重新连接下载资产，即使互联网不可用。现在我再次退出应用程序并打开 wifi 并启动应用程序。NKLibrary 的下载资产消失了，我在 NKLibrary 下载资产中一无所获。

```
NKLibrary *library = [NKLibrary sharedLibrary];

for(NKAssetDownload *asset in [library downloadingAssets]){
  [asset downloadWithDelegate:[NKDownloadManager defaultManager]];

  NSLog(@"reconnected");
} 
```

我找到了问题，这是由于方法`connectionDidFail:withError:`。如果没有互联网，则调用此方法并终止连接。无论如何在终止后暂停连接或重新连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:33:26.210

不，您不能暂停/重新连接 NSURLConnection。我的建议是检查 Wifi 是否可用，然后调用“downloadWithDelegate”，这样您的 NKAssetDownload 就不会被浪费

# c# - 在 Object 中查找自定义类型

> ID：11967700
> 
> 赞同：0
> 
> 时间：2012-08-15T10:25:22.353
> 
> 标签：c#, object, types, recursion, propertyinfo

我有一个具有不同属性的 Upload 类，我喜欢在此类或其他属性中找到每个 UploadObject 属性。如何在我的 Upload 类中找到所有 UploadObjects？

```
class UploadObject
{
    public string ID {get; set;}
    //...
}

class PicUpload
{
    UploadObject Pic {get; set;}
    //...
}

class FileUpload
{
    UploadObject File {get; set;}
    //...
}

class Upload
{
    //..
    FileUpload File {get; set;}
    List<PicUpload> Pics  {get; set;}
    //...
    UploadObject Something {get; set}
} 
```

编辑：我正在寻找一个功能，如：

```
public object[] FindProperties(object objectTree, Type targetType) {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:34:04.963

```
typeof(Upload).GetProperties()
   .Where(p => typeof(UploadObject).IsAssignableFrom(p.PropertyType)); 
```

将返回返回类型为 UploadClass 或继承类的所有属性。然后，您将对其使用递归，并在不可能包含 UploadObject 的类型上使用停止条件。停止条件可以是使用`IsPrimitive`(available on `Type`) 检查返回类型是否为原始类型。

`== typeof(UploadObject)`如果您只想要特定类型，则可以替换 IsAssignableFrom 。

**编辑：**

这是我心中的想法。免责声明：我所做的唯一测试是编译它并针对一个场景运行它，它适用于它，但它说明了这个想法。

```
public static T[] GetAllPropertyValuesForTypeinTree<T>(object rootObject)
{
    var propertyInfos = rootObject.GetType().GetProperties();
    var withCorrectPropertyType = propertyInfos
        .Where(p => p.PropertyType == typeof(T)).ToList();

    var withListsOfType = propertyInfos.Where(p => 
        IsEnumerableOf<T>(p.PropertyType)).ToList();
    var complexProperties = propertyInfos.Except(
         withCorrectPropertyType.Concat(withListsOfType))
         .Where(p => !p.PropertyType.IsPrimitive && !p.PropertyType.IsGenericType);

    var complexValues = new List<T>();
    foreach (var complexProperty in complexProperties)
    {
         complexValues.AddRange(GetAllPropertyValuesForTypeinTree<T>(
             complexProperty.GetValue(rootObject, null)));
    }

    var listValues = withListsOfType.Select(p => 
        (IEnumerable)p.GetValue(rootObject, null))
        .SelectMany(p => p.OfType<T>());
    var propertyValues = withCorrectPropertyType.Select(p => 
        (T) p.GetValue(rootObject, null));
    return propertyValues.Concat(listValues).Concat(complexValues).ToArray();
}

private static bool IsEnumerableOf<T>(Type type)
{
    if (!typeof (IEnumerable).IsAssignableFrom(type)) 
        return false;

    return type.GetInterfaces().Any(interfaceType => interfaceType.IsGenericType
        && (interfaceType.GetGenericTypeDefinition() == typeof(IEnumerable<>) 
        && type.GetGenericArguments()[0] == typeof(T)))
        || type == typeof(IEnumerable<T>);
 } 
```

你可以这样称呼它：

```
var propVals = GetAllPropertyValuesForTypeinTree<UploadObject>(theInstance); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:30:06.830

你在寻找这样的东西吗？

```
typeof(UploadClass).GetProperties().Where(x => x.PropertyType == typeof(UploadObject)); 
```

# ios - addchildviewcontroller 传递数据

> ID：11967703
> 
> 赞同：1
> 
> 时间：2012-08-15T10:25:28.213
> 
> 标签：ios, xcode, parent-child

我正在尝试将数据传递给 childviewcontroller。我有一个带有两个按钮和一个视图的视图控制器。按下按钮定义显示的视图。具体情况是我想显示一个项目列表。第一种方式（按钮）在列表中，第二种方式在地图视图中。要显示项目，我需要将类别传递给孩子。

在我的 viewDidLoad 中，我使用 addchildviewcontroller 添加两个视图控制器，然后将我的视图设置为 listviewcontroller 的视图。

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    UIStoryboard* sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    ItemListViewController * itemListViewController = (ItemListViewController *)[sb instantiateViewControllerWithIdentifier:@"ItemList"];
    itemListViewController.view.frame = detailView.bounds;
    [self addChildViewController:itemListViewController];
    [itemListViewController didMoveToParentViewController:self];
    itemListViewController.category = category;

    ItemListMapViewController * itemListMapViewController = (ItemListMapViewController *)[sb instantiateViewControllerWithIdentifier:@"ItemListMap"];
    itemListMapViewController.view.frame = detailView.bounds;
    [self addChildViewController:itemListMapViewController];
    itemListMapViewController.category = category;

    childControllers = [NSArray arrayWithObjects:itemListViewController, itemListMapViewController, nil];

    [self.detailView addSubview:itemListViewController.view];
    currentPage = 0;
} 
```

根据按下的按钮，我改变了我的看法

```
- (IBAction)buttonClicked:(id)sender 
{   
    UIButton * button = sender;
    UIViewController *source = (UIViewController *)[childControllers objectAtIndex:currentPage];
    [source.view removeFromSuperview];
    UIViewController *destination = (UIViewController *)[childControllers objectAtIndex:button.tag - 100];
    [self.detailView addSubview:destination.view];
    currentPage = button.tag - 100;
    button = nil;
} 
```

但是将类别传递给我的 childviewcontrollers 什么也没做。我的子控制器中的类别始终为空。我还尝试通过访问 childviewcontroller 上的 parentviewcontroller 来获取类别，

```
NSLog(@"::%@", ((ItemListHeaderViewController *)self.parentViewController).category); 
```

但这也会导致 null。

我不知道我做错了什么，或者我对整个收容故事的理解是错误的……我是 ios 开发的新手，所以如果这个问题很愚蠢，请不要开枪。:) 这也是我关于堆栈溢出的第一个问题，所以如果我做错了什么，再次不要开枪。

帮助将不胜感激。提前致谢。亲切的问候...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:41:46.997

在子视图控制器 .h 中：

```
@property(nonatomic, strong) NSString *category; 
```

子 VC .m：

```
@synthesize category; 
```

然后在父类中获取对该类的引用并设置属性。我想知道你为什么在代码中这样做。在 IB 中进行布局非常容易，并且对我来说使用 segues 更直接。

# javascript - 在 OpenLayers 中捕获鼠标滚轮缩放

> ID：11967706
> 
> 赞同：0
> 
> 时间：2012-08-15T10:25:38.937
> 
> 标签：javascript, dom-events, openlayers, openstreetmap

我在 OpenLayers 中有一张地图，其中有许多带有标记的图层。每次用户缩放地图时，我都会调用一个对重叠标记进行分组的函数。这在使用普通缩放按钮进行缩放时效果很好，但我也想在用户使用鼠标滚轮缩放时调用此函数。

我想我必须使用`OpenLayers.Handler.MouseWheel`来捕获这个事件，但我不知道如何。有没有人有这方面的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:55:29.073

`zoomend`无论用户如何操作（按钮、双击或鼠标滚动），您都应该使用每次用户放大或缩小时触发的地图事件。

代码应如下所示：

```
map.events.on({ "zoomend": function(){
    //Do whatever you need to do here
}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-16T08:14:39.813

使用最新版本的 Openlayers v6.5.0。我搞定了

```
this.map = new Map({
            controls: [],
            interactions: defaultInteractions({
                shiftDragZoom: false,
                doubleClickZoom: false,
                pinchRotate: false,
                mouseWheelZoom: false,
            }).extend([
                new MouseWheelZoom({
                    condition: platformModifierKeyOnly,
                    handleEvent: (event) => {
                        if (event.type !== "wheel") return;

                        if (event.originalEvent.deltaY <= -3) {
                            //mouse wheel up
                        } else {
                            //mouse wheel down
                        }
                    },
                }),
            ]),
            target: "map",
            layers,
        }); 
```

# css - 从浏览器的 print() 功能的输出中省略链接 URL

> ID：11967708
> 
> 赞同：17
> 
> 时间：2012-08-15T10:26:03.783
> 
> 标签：css, browser, printing

一些现代浏览器将链接转换为

```
<a href="http://somesite.com">Site</a> 
```

进入

> ```
> Site (http://somesite.com) 
> ```

作为生成的 PDF 的一部分。

有没有办法通过*纯 CSS*从生成的 PDF 版本中省略链接？

为了抑制链接 URL，必须定义 print.css 中的哪些 CSS 类？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-21T08:48:33.943

下面是一个示例，说明如何`<a href=...>`在 CSS 文件中操作标签样式以使其显示为您不喜欢的样子：

```
@media print {
  ##....
  a[href]:after {
     content:" ("attr(href)")";
     color:#868686;
     background-color:inherit;
     font-style:italic;
     size:90%;
  }
  ##....
} 
```

要覆盖此设置（并使其看起来更符合您的喜好），您可能需要使用包含以下内容（作为其总内容的一部分）的（用户）print.css：

```
a[href]:after {
   content:"" !important;
} 
```

您的问题对您的要求范围不是很清楚：

*   它是否应该仅对您控制的网站和访问它的用户有效？
*   它应该适用于您访问的*任何*网页吗？

如果你想要第一个，你可以将你的 print.css 引用以通常的方式放入 HTML 标题部分，并将文件托管在你的 Web 服务器上

如果你想要第二个，你应该用谷歌搜索“用户样式表”来找到如下链接：

*   [CSS 的辅助功能：用户覆盖样式](http://www.w3.org/TR/CSS-access#UserControl)
*   [利用 Mozilla 用户样式表的力量](http://www.oreillynet.com/pub/a/network/2000/06/30/magazine/mozilla_stylesheets.html)
*   [如何为 Safari 编写用户样式表](http://webdesign.about.com/od/css/ht/htcssusersafari.htm)

# jquery - jsplumb没有在嵌套的div之间连接

> ID：11967715
> 
> 赞同：2
> 
> 时间：2012-08-15T10:26:36.043
> 
> 标签：jquery, jsplumb

我在尝试让 jsplumb 在嵌套在列 div 中的 2 个 div 之间绘制连接器时遇到一些问题。

这是一个显示问题的[小提琴，有人可以帮忙吗？](http://jsfiddle.net/chrisp_68/5YwVu/6/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:47:07.860

由于您要连接的两个元素具有不同的父级，因此您需要使用“容器”概念：

[http://jsfiddle.net/sporritt/5YwVu/9/](http://jsfiddle.net/sporritt/5YwVu/9/)

[http://jsplumb.org/doc/content.html#containerDefault](http://jsplumb.org/doc/content.html#containerDefault)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T11:44:36.847

尝试取消绝对定位。

见[http://jsfiddle.net/chrisp_68/5YwVu/8/](http://jsfiddle.net/chrisp_68/5YwVu/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T10:28:15.423

看起来上面的 jsfiddle 示例不起作用，所以我为 jsPlumb 1.7.5 编写了小的工作示例

```
jsPlumb.ready(function() {
  var container = document.body;
  jsPlumb.setContainer(container);

  ...

  jsPlumb.connect({
    source: container.querySelector("#div1"),
    target: container.querySelector("#div2")
  });
}) 
```

完整示例[http://plnkr.co/edit/8uwriJCdJ77N4w9xJfzU?p=preview](http://plnkr.co/edit/8uwriJCdJ77N4w9xJfzU?p=preview)

# vba - MS Access 从子属性设置父表单属性

> ID：11967717
> 
> 赞同：3
> 
> 时间：2012-08-15T10:26:36.667
> 
> 标签：vba, ms-access, vbscript

如何从子表单属性设置访问表单父表单属性（父表单内的属性）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T10:53:48.753

要从子表单代码页引用代码中的父级：

```
Me.Parent.MyControl 
```

或者

```
Forms!MainForm.MyControl 
```

# algorithm - 统一成本搜索算法的最坏情况时间和空间复杂度是多少？

> ID：11967719
> 
> 赞同：4
> 
> 时间：2012-08-15T10:26:46.837
> 
> 标签：algorithm, artificial-intelligence

我在这里的书（人工智能一种现代方法）说，统一成本搜索算法的最坏情况时间和空间复杂度为 **O(b[C*/e])** ，其中*b*是分支因子，*C**是最优解的成本，每个动作的成本至少为*e*。但为什么会这样呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:33:39.693

首先，复杂度是**`O(B^(C/e))`**[指数`C/e`]。

要理解它，首先想一个简单的例子：

让我们`G=(V,E)`成为一个带有分支因子的图`B`。该图未加权（`w(e) = 1`对于每个`e`）。

考虑寻找从 S 到 T 的最短路径。
在这种情况下，该算法实际上是一个**BFS**，它会发现路径中直到 length 的所有节点`SOL`，其中`SOL`是最短路径的长度，即`O(B^|SOL|)`

对于一般情况 - 相同的想法成立，您需要发现所有节点到 cost `C`。因此，您可以发现深度节点`C/e`，从而为您**`O(B^(C/e))`**提供需要探索的总节点。

指数因子是因为：第一层（根）有`B^0=1`节点，第二层有B个节点。从每一个你发现`B`节点，给你`B^2`，....

* * *

**编辑：**
到目前为止错过了，但标题要求*空间复杂度*而不是*时间复杂度*。但是，答案保持不变，因为统一成本搜索`visited`为已经访问过的节点保留了一个集合。由于您发现的每个节点也被添加到其中 - 答案仍然存在`O(B^(C/e))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:33:47.117

`C*/e`表示在搜索过程中应该访问的平均节点数，对于访问每个节点，您应该查看所有可能的`b`分支（至少是根节点），因此您应该在搜索中检查 b ^([C*/e])节点。这是您的搜索时间复杂度，这是通过假设每个节点上的过程需要 O(1)。

[PS：最坏的情况是 Ω(b ^([C*/e] ))]

# python - 创建临时压缩文件

> ID：11967720
> 
> 赞同：16
> 
> 时间：2012-08-15T10:26:52.390
> 
> 标签：python

我需要创建一个临时文件来发送它，我已经尝试过：

```
# Create a temporary file --> I think it is ok (file not seen)
temporaryfile = NamedTemporaryFile(delete=False, dir=COMPRESSED_ROOT)

# The path to archive --> It's ok
root_dir = "something"

# Create a compressed file --> It bugs
data = open(f.write(make_archive(f.name, 'zip', root_dir))).read()

# Send the file --> Its ok
response = HttpResponse(data, mimetype='application/zip')
response['Content-Disposition'] = 'attachment; filename="%s"' % unicode(downloadedassignment.name + '.zip')
return response 
```

我根本不知道这是否是好方法..

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-15T14:48:26.697

实际上，我只需要做类似的事情，如果可能的话，我想完全避免文件 I/O。这是我想出的：

```
import tempfile
import zipfile

with tempfile.SpooledTemporaryFile() as tmp:
    with zipfile.ZipFile(tmp, 'w', zipfile.ZIP_DEFLATED) as archive:
        archive.writestr('something.txt', 'Some Content Here')

    # Reset file pointer
    tmp.seek(0)

    # Write file data to response
    return HttpResponse(tmp.read(), mimetype='application/x-zip-compressed') 
```

它使用 a`SpooledTemporaryFile`因此它将保留在内存中，除非它超出内存限制。然后，我将此临时文件设置为`ZipFile`要使用的流。传递给`writestr`的文件名只是文件在存档中的文件名，它与服务器的文件系统没有任何关系。然后，我只需要在完成它的事情`seek(0)`后倒回文件指针（）`ZipFile`并将其转储到响应中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-15T10:29:25.373

首先，你不需要创建一个`NamedTemporaryFile`来使用`make_archive`；`make_archive`您想要的只是要创建的文件的唯一文件名。

## `.write`不返回文件名

专注于该错误：您假设的返回值`f.write`是您可以打开的文件名；只需寻找文件的开头并阅读：

```
f.write(make_archive(f.name, 'zip', root_dir))
f.seek(0)
data = f.read() 
```

请注意，您*还*需要清理您创建的临时文件（您设置`delete=False`）：

```
import os
f.close()
os.unlink(f.name) 
```

或者，只需省略`delete`关键字使其`True`再次默认为，然后仅关闭文件，无需取消链接。

## 那只是将存档文件名写入新文件..

您只是将新存档名称写入临时文件。你最好直接阅读档案：

```
data = open(make_archive(f.name, 'zip', root_dir), 'rb').read() 
```

请注意，现在您的临时文件根本没有被写入。

## 做到这一点的最佳方法

避免完全创建一个`NamedTemporaryFile`：[`tempfile.mkdtemp()`](http://docs.python.org/library/tempfile.html#tempfile.mkdtemp)改为使用生成一个临时目录来放置您的存档，然后清理它：

```
tmpdir = tempfile.mkdtemp()
try:
    tmparchive = os.path.join(tmpdir, 'archive')

    root_dir = "something"

    data = open(make_archive(tmparchive, 'zip', root_dir), 'rb').read()

finally:
    shutil.rmtree(tmpdir) 
```

# python - python中关闭的套接字错误导致管道损坏与文件描述符损坏有什么区别

> ID：11967721
> 
> 赞同：0
> 
> 时间：2012-08-15T10:26:54.780
> 
> 标签：python, sockets

当套接字已经关闭时，这两个异常都会被抛出。但是我还没有理解它们之间的区别。有人可以帮助我吗？太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:40:18.347

如果你关闭一个套接字然后尝试读取/写入它，你会得到错误的文件描述符。损坏的管道是当您尝试写入另一端已关闭的套接字时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:08:37.567

> 当套接字已经关闭时，这两个异常都会抛出

*不会。当对*端关闭连接时，会发生断管、连接重置等*。**当您*已经关闭套接字时，会发生错误的文件描述符、套接字关闭等*。*

# java - java.util.concurrent：外部同步以移除地图值

> ID：11967725
> 
> 赞同：2
> 
> 时间：2012-08-15T10:27:06.667
> 
> 标签：java

我需要针对唯一键（即 1(a,b) 2(c,d) 等）跟踪多个值...

该解决方案由多个线程有效地访问，我定义了以下内容；

```
ConcurrentSkipListMap<key, ConcurrentSkipListSet<values>> 
```

我的问题是当值集大小为 0 时删除键是否需要同步？我知道这两个类是“并发的”，并且我已经查看了 OpenJDK 源代码，但是在一个线程 T1 检查 Set 是否为空并在 remove(...) 中删除 Map 之间似乎有一个窗口另一个线程 T2 调用 add(...)。结果是 T1 删除了最后一个 Set 条目并删除了与 T2 交错的 Map，只需添加一个 Set 条目。因此 Map 和 T2 Set 条目被 T1 删除，数据丢失。

我只是“同步” add() 和 remove() 方法还是有“更好”的方法？

Map由多个线程修改，但仅通过两种方法。

代码片段如下；

```
protected static class EndpointSet extends U4ConcurrentSkipListSet<U4Endpoint> {
    private static final long serialVersionUID = 1L;
    public EndpointSet() {
        super();
    }
}

protected static class IDToEndpoint extends U4ConcurrentSkipListMap<String, EndpointSet> {
    private static final long serialVersionUID = 1L;
    protected Boolean add(String id, U4Endpoint endpoint) {
        EndpointSet endpoints = get(id);
        if (endpoints == null) {
            endpoints = new EndpointSet();
            put(id, endpoints);
        }
        endpoints.add(endpoint);
        return true;
    }

    protected Boolean remove(String id, U4Endpoint endpoint) {
        EndpointSet endpoints = get(id);
        if (endpoints == null) {
            return false;
        } else {
            endpoints.remove(endpoint);
            if (endpoints.size() == 0) {
                remove(id);
            }
            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:49:17.163

因为它是你的代码有数据竞争。可能发生的事情的例子：

*   一个线程可以在`if (endpoints.size() == 0)`和之间添加`remove(id);`- 你看到了
*   in `add`，一个线程可以读取一个非空值`EndpointSet endpoints = get(id);`，另一个线程可以从该集合中删除数据，从映射中删除该集合，因为该集合为空。然后，初始线程将向集合添加一个值，该值不再保存在映射中 => 数据也会丢失，因为它变得无法访问。

解决问题的最简单方法是同时添加和删除`synchronized`。但是您会失去使用`ConcurrentMap`.

或者，您可以简单地将空集留在地图中 - 除非您有内存限制。您仍然需要某种形式的同步，但它会更容易优化。

如果争用（性能）是一个问题，您可以通过在键或值上同步来尝试更细粒度的锁定策略，但这可能非常棘手（并且由于字符串池，锁定字符串并不是一个好主意）。

似乎在所有情况下，您都可以使用非并发集，因为您需要自己在外部同步它。

# css - CSS - 创建 DIV 网格的正确方法

> ID：11967727
> 
> 赞同：0
> 
> 时间：2012-08-15T10:27:12.043
> 
> 标签：css

我正在创建一个论坛样式页面，其中每个主题一行，每行有四列。

由于这更像是一种布局而不是表格数据，因此我选择使用 Div's。但是，我担心Divitius。

这是我发现的方法：http: [//jsfiddle.net/XFUm9/](http://jsfiddle.net/XFUm9/)

有没有更好、更有效的方法来实现这一点，或者我做得对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:29:54.577

我建议您研究面向对象的 css 设计，因为您希望在不同的场景中将结构调整为不同的大小

```
.left { float:left; }
.right { float: right }
.onetenth { width: 10%; }
.onetwentieth { width: 5%; } 
```

等等...

我向您保证，这种方法将大大减少您的样式，从而提高性能。

参见：[https](https://github.com/stubbornella/oocss/wiki/) ://github.com/stubbornella/oocss/wiki/ （面向对象的 CSS）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:30:23.833

我喜欢[Twitter Bootstrap - 脚手架](http://twitter.github.com/bootstrap/scaffolding.html)所有的辛苦工作都是为我完成的。或者[960 Grid](http://960.gs/)也不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:53:48.013

我做了这个小提琴[http://jsfiddle.net/thiswolf/zVapK/](http://jsfiddle.net/thiswolf/zVapK/)

这是页面

```
<!Doctype html>
<head>
<title>
Divs
</title>
<style type="text/css">
.right-rows{
float:right;
}
.green{float:left; margin-left:20px; background-color:green;}
.blue{float:left; margin-left:20px; background-color:blue;}
.purple{float:left; margin-left:20px; background-color:purple;}
.orange{float:left; margin-left:20px; background-color:orange;}
.grey{float:left; margin-bottom:20px; background-color:grey;}
.main{}
.row{width:900px;height:auto;}
.to-the-left{float:left;}
</style>
</head>
<body>
<div class="main">
<article>
<div class="grey row">
<p class="to-the-left">Lorem ipsum</p>
<div class="right-rows">
<div class="green row-1">
<p>Row one</p>
</div>
<div class="blue row-2">
<p>Row two</p>
</div>
<div class="purple row-3">
<p>Row three</p>
</div>
<div class="orange row-4">
<p>Row four</p>
</div>
</div>
</div>
</article>
<article>
<div class="grey row">
<p class="to-the-left">Lorem ipsum</p>
<div class="right-rows">
<div class="green row-1">
<p>Row one</p>
</div>
<div class="blue row-2">
<p>Row two</p>
</div>
<div class="purple row-3">
<p>Row three</p>
</div>
<div class="orange row-4">
<p>Row four</p>
</div>
</div>
</div>
</article>
<article>
<div class="grey row">
<p class="to-the-left">Lorem ipsum</p>
<div class="right-rows">
<div class="green row-1">
<p>Row one</p>
</div>
<div class="blue row-2">
<p>Row two</p>
</div>
<div class="purple row-3">
<p>Row three</p>
</div>
<div class="orange row-4">
<p>Row four</p>
</div>
</div>
</div>
</article>
<article>
<div class="grey row">
<p class="to-the-left">Lorem ipsum</p>
<div class="right-rows">
<div class="green row-1">
<p>Row one</p>
</div>
<div class="blue row-2">
<p>Row two</p>
</div>
<div class="purple row-3">
<p>Row three</p>
</div>
<div class="orange row-4">
<p>Row four</p>
</div>
</div>
</div>
</article>
</div>
</body>
</html> 
```

# jquery - Places API 不接受推荐人

> ID：11967729
> 
> 赞同：1
> 
> 时间：2012-08-15T10:27:29.147
> 
> 标签：jquery, google-places-api

我已经阅读了几乎所有提到这个问题的帖子。大多数答案是“改用 Javascript API”。我不认为这是一个有效的答案。我正在尝试在 Google 的 API 控制台上设置引用者，以便我可以在本地和我的开发服务器上进行测试。

这是我从 Google API 控制台获取的 API 密钥： ![在此处输入图像描述](../Images/5db0ffff1881c656951115f9e1bd0378.png)

这是我的要求：

```
Request URL:https://maps.googleapis.com/maps/api/place/autocomplete/json?input=a&sensor=false&key=AIzaSyABBKjubUcAk69Kijktx-XXXXXXXXXX
Accept:*/*
Origin:http://localhost:5000
Referer:http://localhost:5000/users/profile/edit/location/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.75 Safari/537.1 
```

我收到了众所周知的错误：

```
Origin http://localhost:5000 is not allowed by Access-Control-Allow-Origin. 
```

我也尝试过“任何引用者”API 密钥，但没有成功。这个referers不是为了允许这种AJAX调用而设置的吗？我在 Gunicorn 服务器上运行 Django 应用程序，它可能与“5000”端口有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:19:52.670

好的，还有其他解决方案应该有效：

尝试使用 ssh 隧道。

如果您使用[localtunnel](http://progrium.com/localtunnel/)，设置非常简单。

*   第 1 步：`sudo gem install localtunnel`在终端中运行
*   第 2 步：在任何端口上运行本地 Web 服务器！假设您在端口 8080 上运行 Apache。
*   第 3 步：现在运行 localtunnel 并将端口传递给共享。第一次运行 localtunnel 时，您必须指向一个公共 SSH 密钥。如果您需要帮助，请查看自述文件。

这是一个例子： `$ localtunnel -k ~/.ssh/id_rsa.pub 8080`

您应该会看到如下内容：端口 8080 现在可以从[http://8bv2.localtunnel.com](http://8bv2.localtunnel.com)公开访问...

您现在可以将此 URI 放入 Google 控制台。

但请注意，当您使用此解决方案时，您的 localhost 是公开可用的。

# xcode - 有没有办法在 Xcode 4.4.1 Mountain Lion 上获得 ios4 模拟器？

> ID：11967730
> 
> 赞同：10
> 
> 时间：2012-08-15T10:27:33.337
> 
> 标签：xcode, ios-simulator, simulator

首先，我将解释我在 Xcode 4.4.1 上尝试支持 ios4+ 应用程序时遇到的问题，然后我有以下 3 个问题，感谢任何可能对我有帮助的答案。

我很高兴地使用了各种版本的 Xcode，最近升级到了 Xcode 4.4.1 和 ML。在过去，总是可以将旧模拟器 sdks 复制到 Xcode 包内容中的相关文件夹中，这种技术不再有效。

Xcode 4.4.1 的广告内容如下：

“Xcode 包含一个新的“下载”首选项窗格，用于安装可选组件，例如命令行工具和以前的 iOS 模拟器”

这让我确信我可以让旧模拟器工作，但根据我目前的经验，你只能得到一个单一的旧模拟器（ios 5.0）。上面的摘录表明您可以访问多个旧模拟器，因为它使用复数“以前的 ios 模拟器”。

**编辑**

如果您在安装 Mountain Lion 之前已更新到 Xcode 4.4.1，您还可以选择下载 ios4.3 模拟器。但是，一旦您拥有 ML 和 4.4.1，模拟器将无法工作。

**结束编辑**

我已经能够使用运行 ios4.3 的个人设备 (iphone) 进行测试，但这不是我测试的理想方式。我支持到 ios4.0，所以最好用 ios 模拟器检查我的代码，用于 ios4.0、ios4.1、ios4.2 和 ios4.3。

我喜欢使用最新的 Xcode 和 ML，但似乎我最好的选择可能是在 Lion 上回滚到较旧的 Xcode。

问题

1) 有没有办法在 Xcode 4.4.1 Mountain Lion 上获得功能性 ios4 模拟器？

2) 是否有计划在新版本中允许 ios4 模拟器，或者 Apple 故意阻止这一点？

3）这个职位上是否有其他开发人员可以建议最好的措施是什么？人们是否在 ML 上推迟/回滚 Xcode 4.4.1？

谢谢

**第二次编辑 - 我的解决方案**

正如我已经确认的那样，Xcode 4.4.1 (ML) 不支持 ios4 模拟器，建议您应该在设备上进行测试。

我决定我仍然需要一个带有 xcode 4.3.3 的 Lion 版本，这样我就可以访问 ios 4 模拟器。因此，在我的 imac 上，我通过运行 osx 10.7 lion 的 vmware 设置了一个虚拟机。在这个虚拟机上，我安装了 Xcode 4.3.3 和旧模拟器，现在我可以在我想测试任何 ios4 问题时使用它们:)。

这个解决方案在我的 imac 上花费了 28gb 的内存空间，但我很高兴我的主机上运行着山狮，并且运行着狮子和 xcode 4.3.3 的虚拟机。这似乎很麻烦，但其他选择是什么？

另一种解决方案可能是询问用户 Popeye 他声称自己是如何做到的。除了不相关的信息和删除问题的请求之外，我试图找出但没有得到任何东西。

**结束第二次编辑**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:42:24.073

我刚刚发表了评论，但我也刚刚完成了，所以是的，它可以完成。

打开 xcode 并在顶部菜单中转到 xcode >> 首选项 >> 下载，您将可以选择下载旧的 sdks 以与 xcode 一起使用。您还可以下载命令行工具和设备调试支持。

请记住在您的目标设置中将您的项目设置为 Deployment Target 到该版本或更早的版本（摘要）

**编辑**

这是 Apple 开发者下载部分的[链接](https://developer.apple.com/downloads/index.action)，您需要用户名和密码才能登录。一旦取消选择除 iOS 之外的所有搜索选项，您将在那里找到所有可用的 iOS。但是请注意，如果您有任何在更高版本中而不是在早期版本的 iOS 中的东西，它将崩溃，例如 Storyborads（在 iOS 5 中引入）。

# python - python中的无效URL解析器

> ID：11967733
> 
> 赞同：1
> 
> 时间：2012-08-15T10:27:54.117
> 
> 标签：python, python-2.7

[是的，标题没有错字！]

在 python 中，我需要一些可以解析 URL 的东西。我不敢相信一些标准还不存在。由于 URL 是在配置中设置的，因此我想确保它不是垃圾。

有 urlparse.urlparse，但它只解析“有效的 URL”（一些无效的 URL 有时会引发未记录的 ValueError）

例如

```
>>> import urlparse
>>> urlparse.urlparse('http://aa :: aa ! aa:11.com:aa').netloc
'aa :: aa ! aa:11.com:aa' 
```

显示 urlparse 如何解析我认为无效的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:32:58.743

URL 解析和 URL 验证实际上是不同的任务。

`urlparse.urlparse``re`进行解析，验证通常使用正则表达式机器（ Python中的内置模块）进行。

下面是来自 Django 框架的 URL 验证示例：

```
regex = re.compile(
    r'^(?:http|ftp)s?://' # http:// or https://
    r'(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\.)+(?:[A-Z]{2,6}\.?|[A-Z0-9-]{2,}\.?)|' #domain...
    r'localhost|' #localhost...
    r'\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})' # ...or ip
    r'(?::\d+)?' # optional port
    r'(?:/?|[/?]\S+)$', re.IGNORECASE) 
```

# c++ - 如何使用 Visual Studio 创建 .NET 独立应用程序？

> ID：11967743
> 
> 赞同：8
> 
> 时间：2012-08-15T10:28:36.253
> 
> 标签：c++, .net, visual-studio-2010, unmanaged

存在许多 C++ IDE。但是，我发现 Visual Stuido (Visual Studio 2010 Pro) 最舒服，这可能是因为我花了很多时间使用它。问题是我真的不喜欢速度方面和兼容性方面的依赖 .NET 的产品。

我想没有.NET依赖就没有办法编译VB和C#代码（如果我错了，请纠正我）。在 C++ 中，有没有办法使用 VS IDE 及其所有功能，如自动完成、GUI 设计等。同时保持所有代码不受管理，这样就不需要 .NET？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T12:46:07.987

创建新项目时，如果选择 Win32 项目，则它是“本机”C++ 应用程序，不依赖于 .NET。对于现有项目，相关设置为`Configuration Properties -> General -> Common Language Runtime Support`。将此设置`No Common Language Runtime Support`为删除 .NET 依赖项。

当然，VC++ 的主要 UI 设计者是 WPF 和 Windows.Forms 设计者——它们依赖于 .NET 组件来实现它们。如果您不想使用它们，那么您将无法使用 MFC 作为您的用户界面。这不是我认为的好时光，但很多人确实使用它。

# jquery - 无法让 RGraph (Canvas) 在 Internet Explorer 6 到 8 上工作

> ID：11967746
> 
> 赞同：0
> 
> 时间：2012-08-15T10:28:45.323
> 
> 标签：jquery, internet-explorer, rgraph

我正在使用 RGraph 显示一个简单的条形图。在这里找到：[RGraph](http://www.rgraph.net/docs/msie.html)

这是我的代码：`var vprogress = new RGRAPH.VProgress('vc',200,500); vprogress.draw()`

我的 index.hmtl 中还有以下行：

```
<!--[if IE]><script src="/excanvas/excanvas.js"></script><![endif]--> 
```

我的 index.html 中也有这个

```
<canvas id="vc" width="100px" height="800px">[No Canvas Support]</canvas> 
```

我无法在 IE 6 和 8 中查看图表，我无法在 7 中进行测试。

我在 excanvas.js 中收到线路错误，但没有显示任何内容。

这些图表在 Chrome 和 Firefox 中完美运行。

我还必须提到，我的 javascript 是在 Jquery Ajax 函数中完成的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:51:31.093

对任何有兴趣的人。

我发现问题在于我在高度和宽度中包含了“px”。删除这些以使其正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:49:44.813

对于 IE，我还要补充一点，您必须将 Graph 代码包装在 window.onload 函数中：

```
window.onload = function() {
  var vprogress = new RGRAPH.VProgress('vc',200,500); 
  vprogress.draw();
} 
```

# camera - directshow 视频捕获中的 VFW_E_NOT_IN_GRAPH

> ID：11967748
> 
> 赞同：1
> 
> 时间：2012-08-15T10:28:49.977
> 
> 标签：camera, directshow, video-capture, ccd

我再次尝试使用directShow。我试图从相机分发器中实现一个示例来读取相机（我想以字节数组的形式获取帧），并且在尝试连接引脚时收到 VFW_E_NOT_IN_GRAPH-Error。

我已经搜索过并且现在知道了，这意味着我没有向图形生成器添加特定的过滤器（或者我使用的过滤器不兼容？），但是我添加了一个过滤器并且看不到样本的任何差异...但是，该示例不是一个项目，而只是代码片段，所以我想我可能忘记了任何初始化...

你能看看这个并告诉我你是否发现错误吗？一切正常，没有错误，只是最后一个小时充满了 0x8004025F 并且没有任何反应（我在 DoRenderSample 方法中做了一个停止点）：

```
 HRESULT hr = S_OK;
    IBaseFilter* pFilter=0;
    hr=CreateKernelFilter(
        CLSID_VideoInputDeviceCategory,
            L"Videology USB-C Camera",
            &pFilter
    );
    CoInitialize(NULL);
//  CComQIPtr<IVideology20K1XX> pKs(pFilter);
    CComQIPtr<IVideologyCommon> pKs( pFilter );
    if(pFilter==0)return;
//  hr=pKs->SetWhiteBalanceMode(wbAuto);

    CBitmapRenderer *m_pSnapshotter = new CBitmapRenderer( _T("Bitmap renderer"), NULL, &hr );

    if( FAILED(hr) )
    {
        ASSERT("Couldn't create bitmap renderer.");
        return;
    }
    m_pSnapshotter->SetCallback( (IBitmapCallback*) this );
    CComQIPtr< IBaseFilter > pGrabBase( m_pSnapshotter );
    IGraphBuilder*  m_pGraphBuilder=0;
     hr = CoCreateInstance(CLSID_FilterGraph, NULL,
    CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void **)&m_pGraphBuilder);
    hr = m_pGraphBuilder->AddFilter( pGrabBase, L"Snapshot" );

    CComPtr<IPin> pOutPin;
    hr= pFilter->FindPin( L"1", &pOutPin );

    CBasePin* pInPin = m_pSnapshotter->GetPin( 0 );
    hr = m_pGraphBuilder->Connect( pOutPin, pInPin ); 
```

我希望我没有忘记任何重要信息......（我认为使用 embarcadero XE2 16 的 C++-Builder 和 2005 年的 DirectShow9）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:53:08.807

错误代码告诉您出了什么问题。`VFW_E_NOT_IN_GRAPH`，有些东西不在图中。您连接两个引脚，它们属于两个过滤器。其中一个过滤器不在图中。当您在`pGrabBase`上面添加几行时，另一个过滤器不在图中。在连接引脚之前添加它。

# c# - 我的代码在视觉工作室中不起作用

> ID：11967750
> 
> 赞同：-4
> 
> 时间：2012-08-15T10:29:00.917
> 
> 标签：c#, visual-studio-2010, methods

我有一个错误说我没有一个名为'GetUser'的方法，即使它在那里。错误说：“System.Security.Principal.IPrincipal'不包含'GetUser'的定义并且没有扩展方法可以找到接受“System.Security.Principal.IPrincipal”类型的第一个参数的“GetUser”“

这是我在用户类中的代码

```
public static List<User> GetUser()
    {
        SqlConnection conn = null;
        List<User> result = new List<User>();
        try
        {
            conn = new SqlConnection();
            conn.ConnectionString = ConfigurationManager.ConnectionStrings["2ndEardbConnectionString"].ConnectionString;
            conn.Open();
            SqlCommand comm = new SqlCommand();
            comm.Connection = conn;
            comm.CommandText = "select * from User";
            SqlDataReader dr = comm.ExecuteReader();
            while (dr.Read())
            {
                User u = new User();
                u.Name = (string)dr["Name"];
                u.UserName = (string)dr["UserName"];
                u.Password = (string)dr["Password"];
                u.DOB = (DateTime)dr["DOB"];
                u.Gender = (string)dr["Gender"];
                u.Email = (string)dr["Email"];
                u.ContactNumber = (int)dr["ContactNumber"];
                u.ProfilePic = (byte)dr["ProfilePic"];
                u.Image = (byte)dr["Image"];

                result.Add(u);
            }
            dr.Close();
        }
        catch (SqlException e)
        {
            throw e;
        }
        finally
        {
            conn.Close();
        }
        return result;
    } 
```

在表格中，这是我输入的代码

```
protected void Button1_Click(object sender, EventArgs e)
    {
        List<User> results = User.GetUser();
        foreach (User u in results)
        {
            if (TextBox8.Text.ToString() == u.UserName.ToString())
            {
                Label13.Visible = true;
                break;
            }
            else
            {
                Label12.Visible = true;
            }
        }
    } 
```

但是错误发生在 User.GetUser()：

表示没有方法。

我如何在visual studios C#中解决这个问题请帮助谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:32:59.497

您不是在调用 GetUser 方法，而是调用 System.Security.Principal.IPrincipal 方法。使用完整的命名空间。

```
List<User> results = MyNamespace.User.GetUser(); 
```

# php - 如何在php中使用截距和斜率画线

> ID：11967756
> 
> 赞同：0
> 
> 时间：2012-08-15T10:29:14.793
> 
> 标签：php, draw, jpeg

我想用php画一条线，我的数据是这样的：

> y=m*x+c

有没有这个目标的图书馆？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:32:51.483

试试[PHPLot](http://www.phplot.com/)。你可以很容易地用它来[绘制函数](http://www.phplot.com/phplotdocs/ex-lines2.html)。

# python - Python和numpy - 从相应的矩阵中删除行

> ID：11967757
> 
> 赞同：0
> 
> 时间：2012-08-15T10:29:15.830
> 
> 标签：python, numpy

我正在使用 numpy。

我有一个数组`Y`和一个矩阵`X`。这是为了回归。他们的数组有标签，例如`0,1,2,3,4,5`。我需要创建一个新数组，其中`0`删除了所有行的标签，并删除了相应的行`X`。最有效的方法是什么？

例如

```
for i in xrange(y.shape):
    if y==0:
       pop y pop X 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:57:03.740

Numpy 数组不擅长追加/删除行。如果您知道要删除哪些行，只需提取其他行（您需要）并创建一个新数组。

我不太明白你的问题，所以如果我错了，请纠正我：

```
x = x[y != 0]
y = y[y != 0] 
```

例子：

```
import numpy as np
x = np.array([[11, 12, 13], [21, 22, 23], [31, 32, 33]])
y = np.array([1, 0, 3])
x = x[y != 0]
y = y[y != 0] 
```

现在：

```
x == array([[11, 12, 13],
            [31, 32, 33]])
y == array([1, 3]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T02:03:20.987

如果你知道无论如何你都会有那个空行，我不明白为什么你甚至需要 NUMPY 来做这个......

```
Z = Z[:][1:] 
```

如果它只是第一行，这实际上适用于矩阵，当然还有数组

```
Z = Z[1:] 
```

如果您不关心矩阵中项目的位置，我喜欢@eumiro 的解决方案，但我相信他们的解决方案将删除所有零和移位元素。

# jquery-mobile - jQuery Mobile 单选按钮上的键盘导航

> ID：11967758
> 
> 赞同：0
> 
> 时间：2012-08-15T10:29:23.500
> 
> 标签：jquery-mobile

我在使用平板电脑（带键盘底座）上的箭头键选择单选按钮时遇到问题。对于普通按钮，选择有效，但不适用于单选按钮。

```
<body>      
    <div data-role="page" data-theme="a">
        <div id="type_selection" data-role="controlgroup" data-type="horizontal">
            <input type="radio" id="radio_option1" name="radio" checked="checked" /><label for="radio_option1">Option 1</label>
            <input type="radio" id="radio_option2" name="radio" /><label for="radio_option2">Option 2</label>
            <input type="radio" id="radio_option3" name="radio" /><label for="radio_option3">Option 3</label>
            <input type="radio" id="radio_option4" name="radio" /><label for="radio_option4">Option 4</label>
        </div>
    </div>  
</body> 
```

用键盘选择常规按钮不是问题：

```
<button id="btn_dothat" data-inline="true">That</button> 
```

无论如何要解决这个问题还是这是 jQuery Mobile 的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:40:06.787

用于`checkboxradio("refresh")`更新单选按钮

## 更新：

而不是使用`div`for `control group`，使用`fieldset`

```
<fieldset id="type_selection" data-role="controlgroup" data-type="horizontal">
    <input type="radio" id="radio_option1" name="radio" checked="checked" />
    <label for="radio_option1">Option 1</label>
    <input type="radio" id="radio_option2" name="radio" />
    <label for="radio_option2">Option 2</label>
    <input type="radio" id="radio_option3" name="radio" />
    <label for="radio_option3">Option 3</label>
    <input type="radio" id="radio_option4" name="radio" />
    <label for="radio_option4">Option 4</label>
</fieldset> 
```

# asp.net-mvc-3 - 从 MVC3 应用程序更改 AD 密码

> ID：11967759
> 
> 赞同：1
> 
> 时间：2012-08-15T10:29:24.690
> 
> 标签：asp.net-mvc-3, active-directory, wif, adfs2.0

我正在使用 WIF 和 ADFS 2.0 构建一个 MVC3 Web 应用程序。我想做的是为我的用户提供更改密码功能，他们将从此 Web 应用程序更改他们的 AD 密码。由于我处于开发阶段，我必须能够从我的开发计算机（域外）更改 AD 密码。稍后，权限将委派给运行具有足够访问权限的服务的用户。

我想以这个角色为基础，不输入用户名和密码，而且我似乎找不到任何资源来指引我正确的方向。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:13:52.750

WIF 或 AD FS 中没有任何特定内容可用于更改用户密码。您必须使用`System.DirectoryServices`命名空间中提供的标准 AD 功能。

下面是一些在 AD 中更改密码的示例代码：

```
internal UserPrincipal GetUser(string userName)
{
    PrincipalContext principalContext = new PrincipalContext(ContextType.Domain, "YourADController",
                                               "YourADContainer",
                                               "ADAdminUser", "ADAdminPassword");

    UserPrincipal user = UserPrincipal.FindByIdentity(principalContext, userName);

    return user;
}

internal void ResetPassword(string userName, string newPassword)
{
    try
    {
        //
        // Update normal AD attributes
        //
        UserPrincipal user = GetUser(userName);
        user.SetPassword(newPassword);
    }
    catch (PasswordException)
    {
        throw new Exception("Password does not meet complexity requirements");
    }
}

internal void SetPassword(string userName, string oldPassword, string newPassword)
{
    try
    {
        //
        // Update normal AD attributes
        //
        UserPrincipal user = GetUser(userName);
        user.ChangePassword(oldPassword, newPassword);
    }
    catch (PasswordException)
    {
        throw new Exception("Password does not meet complexity requirements");
    }
} 
```

# python - 任何 Python 模块（适用于 Windows 和类 Unix）从视频/音频文件中提取信息？

> ID：11967773
> 
> 赞同：0
> 
> 时间：2012-08-15T10:30:04.223
> 
> 标签：python

想知道使用哪个 Python 模块从视频/音频文件中提取元信息（包括容器格式、编解码器格式、分辨率、帧速率、长度）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:37:28.060

将成为一个有趣的模块。这是 MP3 的一个 SO 问题：[Accessing mp3 Meta-Data with Python](https://stackoverflow.com/questions/8948/accessing-mp3-meta-data-with-python)

Sourceforge python 包，可以处理一些图像和音频格式：http: [//sourceforge.net/projects/mmpython/](http://sourceforge.net/projects/mmpython/)

不确定它是否涵盖您正在寻找的所有格式。

# sed - 交换两列 - awk、sed、python、perl

> ID：11967776
> 
> 赞同：71
> 
> 时间：2012-08-15T10:30:16.487
> 
> 标签：sed, awk

我有一个大文件中的数据（280 列宽，700 万行长！），我需要交换前两列。我想我可以使用某种 awk for 循环来执行此操作，打印 $2、$1，然后是文件末尾的范围 - 但我不知道如何执行范围部分，我无法打印 $2 、1 美元、3 美元……280 美元！我在这里看到的大多数列交换答案都特定于具有可管理列数的小文件，因此我需要一些不依赖于指定每个列号的东西。

该文件是制表符分隔的：

```
Affy-id chr 0 pos NA06984 NA06985 NA06986 NA06989 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-08-15T10:35:48.040

您可以通过交换前两个字段的值来做到这一点：

```
awk ' { t = $1; $1 = $2; $2 = t; print; } ' input_file 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-04-09T07:37:19.830

我在带有制表符分隔文件的 Windows 系统上用 cygwin 尝试了 perreal 的答案。它不起作用，因为标准分隔符是空格。

如果您遇到同样的问题，请尝试以下操作：

```
awk -F $'\t' ' { t = $1; $1 = $2; $2 = t; print; } ' OFS=$'\t' input_file 
```

传入分隔符由 定义`-F $'\t'`，输出分隔符由定义`OFS=$'\t'`。

```
awk -F $'\t' ' { t = $1; $1 = $2; $2 = t; print; } ' OFS=$'\t' input_file > output_file 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-12-08T10:43:36.270

试试这个与您的问题更相关：

```
awk '{printf("%s\t%s\n", $2, $1)}' inputfile 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-15T11:08:09.660

这可能对您有用（GNU sed）：

```
sed -i 's/^\([^\t]*\t\)\([^\t]*\t\)/\2\1/' file 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-15T10:42:35.227

您是否尝试过使用 cut 命令？例如

```
cat myhugefile | cut -c10-20,c1-9,c21- > myrearrangedhugefile 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-01T23:01:26.130

这在 perl 中也很容易：

```
perl -pe 's/^(\S+)\t(\S+)/$2\t$1/;' file > outputfile 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-07-02T06:15:47.643

你可以在 Perl 中做到这一点：

```
perl -F\\t -nlae 'print join("\t", @F[1,0,2..$#F])' inputfile 
```

`-F`指定分隔符。在大多数 shell 中，您需要在反斜杠前面加上另一个来转义它。在某些平台上`-F`自动暗示`-n`，`-a`因此它们可以被删除。

对于您的问题，您不需要使用`-l`，因为最后一列出现在输出的最后。但是如果在不同的情况下，如果最后一列需要出现在其他列之间，则必须删除换行符。`-l`交换机负责这一点。

可以将`"\t"`in 连接更改为其他任何内容，以在输出中生成不同的分隔符。

`2..$#F`指定从 2 到最后一列的范围。正如您可能已经猜到的那样，在方括号内，您可以按所需顺序放置任何单列或列范围。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-02-05T14:25:59.577

除了你的shell，不需要调用其他任何东西：

```
bash> while read col1 col2 rest; do 
        echo $col2 $col1 $rest
      done <input_file 
```

测试：

```
bash> echo "first second a c d e f g" | 
      while read col1 col2 rest; do 
        echo $col2 $col1 $rest
      done
second first a b c d e f g 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-20T16:22:40.600

甚至可能使用*“内联”* Python - 就像在 shell 脚本中的 Python 脚本中一样 -**但**前提是您想事先或之后使用 Bash 进行更多脚本编写......否则它会变得不必要地复杂。

脚本文件内容`process.sh`：

```
#!/bin/bash

# inline Python script
read -r -d '' PYSCR << EOSCR
from __future__ import print_function
import codecs
import sys

encoding = "utf-8"
fn_in = sys.argv[1]
fn_out = sys.argv[2]

# print("Input:", fn_in)
# print("Output:", fn_out)

with codecs.open(fn_in, "r", encoding) as fp_in, \
        codecs.open(fn_out, "w", encoding) as fp_out:
    for line in fp_in:
        # split into two columns and rest
        col1, col2, rest = line.split("\t", 2)
        # swap columns in output
        fp_out.write("{}\t{}\t{}".format(col2, col1, rest))
EOSCR

# ---------------------
# do setup work?
# e. g. list files for processing

# call python script with params
python3 -c "$PYSCR" "$inputfile" "$outputfile"

# do some more processing
# e. g. rename outputfile to inputfile, ... 
```

* * *

如果您只需要为单个文件交换列，那么您也可以只创建一个 Python 脚本并静态定义文件名。或者只是使用上面的答案。

# php - 如何在数组中存储多个文本框值

> ID：11967781
> 
> 赞同：1
> 
> 时间：2012-08-15T10:30:32.947
> 
> 标签：php, html, arrays, textbox

是否可以在数组中存储多个文本框值，我有 N 个文本框

```
<input type="text" name="grade[]" id="grade" />
<input type="text" name="grade[]" id="grade" />
<input type="text" name="grade[]" id="grade" /> 
```

我尝试使用此代码添加所有文本框值，但它仅返回最后一个文本框值。

```
 $grade=$_POST['grade'];
for($i=1;$i<=3;$i++)
{
    $per=$grade[$i]*$grade[$i];
    echo $per;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:39:44.230

试试这个...

```
<?php

    foreach ($_GET['grade'] as $grade){
        $per = $grade * $grade;
        echo $per;
    }

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T10:37:33.500

除了从 0 开始之外，如果您有 3 个文本框，它应该在 2 结束。

```
for($i=0;$i<=2;$i++)
{
  $per=$grade[$i]*$grade[$i];
  echo $per;
} 
```

或者，如果您不想硬编码迭代次数，则可以使用[数组长度。](http://php.net/manual/en/function.count.php)这应该有效：

```
for($i=0;$i<=count($grade)-1;$i++)
{
  $per=$grade[$i]*$grade[$i];
  echo $per;
} 
```

编辑

这也应该工作，它稍微干净（避免-1）并使用[pow()](http://php.net/manual/en/function.pow.php)函数：

```
for($i=0;$i<count($grade);$i++)
{
  echo pow($grade[$i], 2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:49:44.820

尝试使用这个

```
$per='';
$grade=$_POST['grade'];
for($i=0;$i<count($grade);$i++)
{
    $per .=$grade[$i]*$grade[$i];
    $per .='<<>>';
}
 echo $per; 
```

`count($grade)`用于*n*号。的*文本框*。您需要连接变量的值以获取所有文本框的值。

# python - 如何停止 GNU 缓冲 Python 输出？

> ID：11967782
> 
> 赞同：2
> 
> 时间：2012-08-15T10:30:34.167
> 
> 标签：python, stream, makefile

以下示例 Python 程序打印更新进度条。

`progress.py :`

```
import sys
import time

for i in range(100):
    sys.stdout.write("\r%3d%%" % (i + 1))
    sys.stdout.flush()
    time.sleep(.02)
sys.stdout.write("\n") 
```

但是，当使用以下 Makefile 通过 GNU Make（来自 Ubuntu 上的 Bash）运行它时，输出似乎被缓冲，直到遇到换行符，因此进度更新不可见。为了确定，未缓冲的输出被指定给 Python。

```
all :
    python -u progress.py 
```

有没有办法让部分行输出在使用 make 时立即可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:46:57.307

我最终追查到`make`在`colormake`我们的`/etc/bash.bashrc`.

```
> type make
make is aliased to `colormake' 
```

似乎`colormake`缓冲输出。大概它需要在着色之前解析整行。

通过添加以下内容已解决此问题：

```
unalias make 
```

到`~/.bashrc`.

```
> type make
make is /usr/bin/make 
```

# sparql - 如何更改 DBpedia SPARQL 查询的执行时间上限？（Virtuoso 42000 错误）

> ID：11967785
> 
> 赞同：4
> 
> 时间：2012-08-15T10:30:39.537
> 
> 标签：sparql, dbpedia

我正在通过 Python 使用 SPARQL 查询 DBpedia。我面临执行时间上限的问题。这是错误：

代码 ：

```
sparql = SPARQLWrapper("http://dbpedia.org/sparql")
newquery = "DEFINE input:inference "skos-trans" PREFIX dcterms: <http://purl.org/dc/terms/> 
select distinct ?cat1 ?cat2 ?cat3 ?cat4  where { 
<http://dbpedia.org/resource/Pulp_Fiction> dcterms:subject ?cat1 . 
?cat1  skos:broaderTransitive   ?cat2\. 
?cat2  skos:broaderTransitive   ?cat3\. 
?cat3  skos:broaderTransitive   ?cat4\. 
 } "

sparql.setQuery( newquery)
sparql.setReturnFormat(JSON)
results = sparql.query().convert() 
```

回复：
`Virtuoso 42000 Error The estimated execution time 5286 (sec) exceeds the limit of 3000 (sec)`

如何解决这个问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:46:55.100

您不能使用公共 DBPedia 端点，因为该端点是众所周知的，它也被大量使用，因此他们必须限制他们允许人们运行的查询的复杂程度。

如果您需要运行遇到此类超时问题的查询，请考虑使用可用的[数据库转储](http://wiki.dbpedia.org/Downloads38)之一并在 Virtuoso 的本地副本或您选择的三重存储中运行它们。

# javascript - 将用户电子邮件输入字段复制到用户名字段中（剥离包括“@”在内的所有内容）

> ID：11967787
> 
> 赞同：0
> 
> 时间：2012-08-15T10:30:54.607
> 
> 标签：javascript, jquery, forms, input, user-registration

我有以下表单字段：

```
<label for="user_email"><?php _e('Your Email'); ?>: </label>
<input type="text" name="user_email" value="<?php echo esc_attr(stripslashes($user_email)); ?>" size="25" id="user_email" class="required email" tabindex="102" />

<label for="user_login"><?php _e('Username'); ?>: </label>
<input type="text" name="user_login" value="<?php echo esc_attr(stripslashes($user_login)); ?>" size="20" id="user_login" tabindex="101" class="required" /> 
```

有没有办法让 user_login 字段从输入到 user_email 中实时填充（理想情况下是逐个字母，如果不是，在未聚焦之后），在@符号之前停止，这样当用户填写“example@example.com " 进入 user_email 字段，user_login 字段会自动填充“示例”？

我想最终将用户名字段设置为隐藏，但想先看看它是否可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:38:46.560

是的，您可以收听关键事件并将值设置为其他字段，如下所示：

```
$('#user_email').keyup(function(){
    var email = $('#user_email').val();
    var index = email.indexOf('@');
    var username = index >= 0 ? email.substring(0, index) : email;
   $('#user_login').val(username);     
});​ 
```

[看到这个小提琴](http://jsfiddle.net/f7Mg3/)

我认为这个功能可能很方便建议一些用户名，但用户应该能够覆盖它。也许他想要一个不同的名字，或者这个名字已经被占用了。否则，您可以只使用整个电子邮件地址广告，例如 facebook 之类的用户名。

此外，如果您隐藏用户名字段，您可以将其省略，并使用 PHP 从服务器端的电子邮件地址获取用户名。请记住，用户可以通过使用浏览器包含的工具操作页面来向您发送其他值。或者 JavaScript 可能被禁用并且该字段将是空白的。

简而言之：您应该如何使用该字段并让用户使用它，或者将其完全删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:39:06.200

根据需要在 keyup 或其他相关操作上触发：

```
$('#user_login').val($('#user_email').val().split('@')[0]); 
```

您应该使更改成为可能：

设置：

```
var userNoEdit = true; 
```

关于电子邮件的事件更改：

```
if(userNoEdit){
  $('#user_login').val($('#user_email').val().split('@')[0]);
} 
```

和

在事件手动更改用户名时：

```
userNoEdit = false; 
```

# java - eclipse 与 red5 的 flex 插件

> ID：11967789
> 
> 赞同：0
> 
> 时间：2012-08-15T10:30:58.227
> 
> 标签：java, eclipse, flash, apache-flex, red5

我刚刚开始搞乱 red5 ，我不能说一开始就很容易让它运行，但是在谷歌上一天之后我终于成功了。

我必须面对的第一件事是该服务器的糟糕文档。我找不到任何关于制作应用程序的好教程（我会为一个好的应用程序付费，但仍然没有），但这没关系，因为它是免费的。

我发现了这个：[Adobe TV](http://tv.adobe.com/watch/360flex-conference/building-red5-applications-by-chris-allen/)。这是迄今为止我能找到的最好的起点。唯一的问题是我无法设置与视频中那个人相同的工作环境。我知道它是 eclipse（我有那个），我知道他正在使用 flex 插件，但是我如何让 eclipse 像他一样调试 mxml 文件？（视频中的 3.20 左右）。我下载了[flex 插件](https://www.adobe.com/cfusion/tdrc/index.cfm?product=flex_eclipse)，但安装后，eclipse 和以前完全一样。

请注意，我是 eclipse 的新手（以及 JAVA 和 flash -huhh ... :D - ）。

我正在运行 Windows 7 Ultimate 32 位。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:11:48.740

我更喜欢 Flex Development 与 flashdevelop：[http ://www.flashdevelop.org/](http://www.flashdevelop.org/)

这是一个非常好的开源代码编辑器。配置非常简单，只需 1 分钟。唯一要做的就是配置flex sdk的路径。调试很好，我喜欢代码完成功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:55:10.587

还有一个称为 FDT 的 IDE 用于 flex 应用程序开发。他们正在使用日食。值得尝试这个 IDE [http://fdt.powerflasher.com/](http://fdt.powerflasher.com/)这也是可用的 linux。这是本机不支持red5。但是您可以简单地创建为 java 项目。

# javascript - Jquery 在 wordpress 内容中不起作用

> ID：11967791
> 
> 赞同：0
> 
> 时间：2012-08-15T10:31:01.223
> 
> 标签：javascript, jquery, wordpress

基于单击 div，我有一段非常简单的 jquery 代码（向上滑动一段文本）。

```
<script>
jQuery("#test").click(function () {
    jQuery(this).slideUp();
});
</script> 
```

当

```
<div id="test">some text</div> 
```

`<div id="test">some text</div>`放置在页面的主要内容之外，因此在页眉或页脚中，但是当放置在内容部分中时它不起作用。

我已经在互联网上搜索了解决方案，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:32:44.393

确保代码在 DOM 就绪上执行：

```
jQuery(document).ready(function () {
    jQuery("#test").click(function () {
        jQuery(this).slideUp();
    });
}); 
```

说明：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:37:47.780

使用 $(document).ready 函数作为代码的包装器。

# iphone - iPhone 3G 后台定位应用

> ID：11967792
> 
> 赞同：0
> 
> 时间：2012-08-15T10:31:13.477
> 
> 标签：iphone, objective-c, core-location

我正在开发一个基于位置的应用程序，它需要以定义的时间间隔将坐标发送到服务器。它可以在 iPhone 4 上正常工作，即使在后台也是如此（请参阅：[iOS HTTP request while in background](https://stackoverflow.com/questions/11864553/ios-http-request-while-in-background)）。

我的一个朋友在 iOS 4.2.1 的 iPhone 3G 上安装了它，在他将应用程序置于后台后，它被操作系统杀死了。该应用程序有 3 个屏幕，第一个是登录屏幕。在他返回前台后，登录屏幕再次出现，而不是他打开的屏幕（这意味着应用程序被杀死并在重新启动时重新启动）。在 iPhone 4 上按预期工作。

为什么在 iPhone 3G 上，即使将应用程序声明为位置应用程序，应用程序也不会在后台运行（“所需的后台模式”设置在“应用程序注册以进行位置更新”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:34:05.933

因为在 iPhone 3G 上，多任务处理不是正式可用的。

（你可以越狱 iPhone，做一些 plist 黑客，让你的 iPhone 3G 具有多任务处理，但我想即使你知道越狱，你也根本不考虑越狱。）

# android - onClickListener 在我的活动中不起作用

> ID：11967794
> 
> 赞同：3
> 
> 时间：2012-08-15T10:31:32.737
> 
> 标签：android, onclick

我的布局有 13 个 TextView，点击后会更改 ListView 项。

这是我的活动：

```
public class ExampleActivity extends ListActivity implements
        OnClickListener {

    private String[] sa = new String[100];
    private ListView lv;
    private Context context = this;
    private ArrayAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        new LongOperation().execute("1");
        lv = getListView();
    }

    private class LongOperation extends AsyncTask<String, Void, String> {

        private ProgressDialog dialog = new ProgressDialog(
                ExampleActivity.this);

        @Override
        protected String doInBackground(String... params) {

            int i = Integer.parseInt(params[0]);
            for (int n = 0; n < 100; n++) {
                if (i != 5 && i != 10) {
                    sa[n] = "Item" + i;
                } else {

                }
            }
            return params[0];
        }
        @Override
        protected void onPostExecute(String result) {

            adapter = new ArrayAdapter<Object>(context,
                    android.R.layout.simple_list_item_1, sa);
            lv.setAdapter(adapter);
            this.dialog.dismiss();
        }
        @Override
        protected void onPreExecute() {

            this.dialog.setMessage("Please wait");
            this.dialog.show();
        }
        @Override
        protected void onProgressUpdate(Void... values) {

        }
    }
    public void onClick(View v) {

        Log.d("onClick", v.getId() + "**");
        int id = v.getId();

        switch (id) {

        case R.id.tv1: {

            new LongOperation().execute("1");
        }
        case R.id.tv2: {

            new LongOperation().execute("2");
        }
        case R.id.tv3: {

            new LongOperation().execute("3");
        }
        case R.id.tv4: {

            new LongOperation().execute("4");
        }
        case R.id.tv5: {

            new LongOperation().execute("5");
        }
        case R.id.tv6: {

            new LongOperation().execute("6");
        }
        case R.id.tv7: {

            new LongOperation().execute("7");
        }
        case R.id.tv8: {

            new LongOperation().execute("8");
        }
        case R.id.tv9: {

            new LongOperation().execute("9");
        }
        case R.id.tv10: {

            new LongOperation().execute("10");
        }
        case R.id.tv11: {

            new LongOperation().execute("11");
        }
        case R.id.tv12: {

            new LongOperation().execute("12");
        }
        case R.id.tv13: {

            new LongOperation().execute("13");
        }
        }
    }
} 
```

当我启动应用程序时，listView 填充为 item1。但是当我单击任何 TextViews 时，不会触发 onClick 方法。我使用日志检查了它。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T10:39:20.983

因为您**没有注册** `onClickListener`，`TextViews`因此您的 TextViews 没有收到 Clicked 事件。

为此，您必须执行以下操作，

```
onCreate()
{

 TextView tv1 = (TextVIew)findViewById(R.id.tv1);
 tv1.setOnClickListener(this); 
```

**更好的解决方案：**

在 Activity 的 xml 布局文件中，

在你所有的`TextView`put 属性中`android:onClick="textClick"`

现在从您的活动中删除 onClickListener 并编写

```
public void textClick(View TextView) 
```

在你的活动中。那么你就不必为所有的TextView注册onClicklistener了。Android为你做自己..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T10:40:42.550

这是您使用实现 OnClickListener 时提供的示例程序

```
public class ExampleActivity extends Activity implements OnClickListener {
    protected void onCreate(Bundle savedValues) {

        Button button = (Button)findViewById(R.id.corky);
        button.setOnClickListener(this);  // have a look on this line. registering.
    }

    // Implement the OnClickListener callback
    public void onClick(View v) {
      // do something when the button is clicked
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:40:36.747

发生这种情况是因为您没有`setOnClickListener()`使用`TextViews`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-10T10:40:18.910

在你的活动类中添加这个静态函数，这在我的**MainActivity.java中对我有用**

```
public class MainActivity extends AppCompatActivity {
 static {
  AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);
 }

 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
 }

} 
```

# javascript - 如何在 OnKeyPress 事件后获取输入表单元素的值？

> ID：11967801
> 
> 赞同：0
> 
> 时间：2012-08-15T10:32:00.297
> 
> 标签：javascript, android, html, cordova

如何在 OnKeyPress 事件后获取文本框的值？例如，假设我有以下代码：

```
<input type = "number" id = "foo" onKeyPress = "submit();"/>
<script type = "text/javascript">
function submit()
{
var textValue = document.getElementById("foo").value;
alert(textValue);
}
</script> 
```

不幸的是，这不起作用，因为在`OnKeyPress`触发之后，变量`textValue`仍然会落后一个字符。我会使用`OnKeyUp`，但遗憾的是它在 Android 设备上不起作用，除非`<input type = "text">`在我的情况下不起作用......有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:01:43.667

我建议改用该`input`事件，该事件在输入值发生任何更改后触发（例如，通过键入的字符、删除、粘贴和拖放操作）。这将适用于除 IE < 9 之外的所有主要浏览器。

```
document.getElementById("foo").addEventListener("input", function() {
    alert("CHANGED!");
}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:44:07.383

尝试以下代码

```
<input type = "number" id = "foo" onKeyPress = "submit(this);"/>
    <script type = "text/javascript">
    function submit(e) {
      alert(e.value);
    }
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:45:32.150

如果唯一的问题是 Android 设备，我建议其他人使用 onkeyup。然后您可以检测它是否是 android（或者输入是否支持 keyup），并在必要时实施 Android 特定的解决方案。

```
function submit(){
    function submitNow() {
        var textValue = document.getElementById("foo").value;
        alert(textValue);
    }   
    if(isAndroid) {
        setTimeout(submitNow, 10);
    }
    else {
        submitNow() ;
    }
}

var isAndroid = navigator.userAgent.toLowerCase().indexOf("android") > -1; 
var eventType = (isAndroid) ? "keyup" : "keypress" ;
document.getElementById("foo").addEventListener(EventType, submit); 
```

然后，您可以`onKeyPress = "submit();"`从输入中删除 。

当不在 Android 上时，此代码将使用 keyup 事件正常运行。当客户端在 Android 上时，它将等待 1/100 秒，这是输入更新的足够时间，但太短而不会被注意到。

通常，我会警告不要长按按键，但我不知道支持它们的 Android 键盘。

## 仅限安卓解决方案：

```
function submit(){
    function submitNow() {
        var textValue = document.getElementById("foo").value;
        alert(textValue);
    }   
    setTimeout(submitNow, 10);
}

document.getElementById("foo").addEventListener("keyup", submit); 
```

`onKeyPress = "submit();"`如果你真的喜欢，你甚至可以保留你的。只需删除此处的最后一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T10:45:43.267

你试过使用 jQuery 吗？

要将 jQuery 添加到您的页面，只需将其放在页面 `<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>`的头部即可。

然后执行您需要的操作，使用代码

```
<script type="text/javascript">
  $("#my_field").keydown (function (e) {
      alert ($(this).val());
  });
</script> 
```

其中#myField 是您的字段的ID。

注意 您将不再需要输入中的按键事件。

# java - 使用 JSPDF 在客户端生成 PDF

> ID：11967802
> 
> 赞同：3
> 
> 时间：2012-08-15T10:32:09.820
> 
> 标签：java, javascript, gwt, pdf-generation, jspdf

在我的应用程序中，我需要通过在客户端本身解析 HTML 来下载 pdf。为了在客户端生成 pdf，我使用的是 jsPdf。以下是我的代码。

**PdfGenerator.java**

```
public static native String createPDF() /*-{
        $wnd.createPDF(); 
}-*/; 
```

**入口点.html**

```
 function createPDF(){
         try {
          var doc = new jsPDF();
           doc.text(20, 20, 'This PDF has a title, subject, author, keywords and a crea');
           doc.output('datauri');
           var out = doc.output();
           var url = 'data:application/pdf;base64,' + Base64.encode(out);
           document.location.href = url;
        } catch (e) {
            return e.message;
        }
        return "";
}; 
```

我已经在我的项目中添加了所有的 js 并定义了脚本。但是每当我调用此方法时，它都会给出输出**“未定义 sprintf”。**. 如果我错过了什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:11:04.690

我猜你忘记为`sprintf.js`and添加脚本了`base64 js`。由于`jsPdf.js`内部使用这两个 js。

**入口点.html**

```
<script type="text/javascript" src="base64.js"></script>
<script type="text/javascript" src="sprintf.js"></script>
<script type="text/javascript" src="jspdf.js"></script> 
```

请参考此链接[http://forums.webhosting.uk.com/web-designing-development/6718-jspdf-generating-your-pdf-web-page-documents-using-javascript.html](http://forums.webhosting.uk.com/web-designing-development/6718-jspdf-generating-your-pdf-web-page-documents-using-javascript.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T21:22:01.630

在最新版本的 jsPDF 中，您不需要 base64 或 sprintf，只需在“dist”文件夹中找到 jspdf.min.js，包括所有插件（除了 downloadify/swfobject）。

如果有人在尝试找出 jsPDF 时遇到旧票，只需更新旧票，因为它不是很好的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-12T11:22:28.290

您不需要使用`window.location`. JsPDF 有`.save()`处理它的方法。

```
function createPDF(){
         try {
           var doc = new jsPDF();
           doc.text(20, 20, 'This PDF has a title, subject, author, keywords and a crea');
           doc.save('file_name.pdf');
        } catch (e) {
            return e.message;
        }
        return "";
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-08T20:20:14.013

根据您支持的浏览器（所有浏览器版本和 IE 10+），您甚至不需要包含`Base64.encode()`. 只是打电话`btoa()`。

# jquery - Fancybox 2 - 将图像计数显示为标题

> ID：11967803
> 
> 赞同：2
> 
> 时间：2012-08-15T10:32:19.253
> 
> 标签：jquery, fancybox, fancybox-2

我想在 Fancybox 弹出窗口的标题中添加“Image 1 of 3”（与链接库中的图像位置相关），如下所示：

```
$(document).ready(function() {
    $(".fancybox-button").fancybox({
        prevEffect      : 'none',
        nextEffect      : 'none',
        closeBtn        : false,
        helpers     : {
            title   : { type : 'inside'},
            buttons : {}
        },
        afterLoad : function() {
                this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
            }
    });
}); 
```

我已经搜索了很多地方，但在任何地方都找不到。

编辑

我设法让它在第一次点击时工作，`afterLoad`但是找不到下一次和上一次点击的类似功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-04T16:18:06.687

## 如果您使用的是 fancybox v2.0.6+，请使用 API 选项 beforeShow ，例如：

```
$(document).ready(function(){
 $(".fancybox").fancybox({
   helpers : { 
title : { type : 'over' }
}, // helpers
beforeShow : function() {
this.title = (this.title ? '' + this.title + '' : '') + 'Image ' + (this.index + 1) + ' of ' + this.group.length;
} // beforeShow
}); // fancybox
}); // ready` 
```

# php - PHP - 登录脚本无法正常工作

> ID：11967811
> 
> 赞同：0
> 
> 时间：2012-08-15T10:32:48.460
> 
> 标签：php, cookies, administration, login-script

我有一个问题问你。我正在创建一个管理面板，这对我来说是第一次，我遇到了一些问题。

**1.问题** 我是这样使用mysqli_fetch_assoc()的：

```
 $row_cnt = mysqli_fetch_assoc($result);
        printf('Result set has %d rows.<br />', $row_cnt);

    if ($row_cnt['COUNT(id)'] == 0) {
       return false;
    } else {
       return true;
    } 
```

我用它来查看数据库中是否有一些条目，它每次都返回 1，无论我在字段中插入什么。我认为如果数据库中没有条目，它必须返回 0，我错了吗？

* * *

请耐心等待，这是我第一个带有管理面板的登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:40:53.113

您没有指定实际使用的 SQL，但假设它类似于

```
Select Count(*) from mytable where myvalue= 'Something' 
```

RowCount 将始终为 1，因为 The Count 将始终返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:44:35.287

只看一眼——

mysql_real_escape_string 需要通过 mysql_connect 建立连接，需要使用 mysqli_real_escape... 函数 - [http://php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)

# php - 如何从记录集中获取数组中的 2 个值

> ID：11967813
> 
> 赞同：0
> 
> 时间：2012-08-15T10:32:50.807
> 
> 标签：php, mysql, arrays

使用静态数据很简单

```
 $items = array( "Great Bittern"=>"Botaurus stellaris",
 "Heuglin's Gull"=>"Larus heuglini" ); 
```

现在我想用数据库中的动态数据来做到这一点

```
 $items = array();

 do{
     $items[] = $row_Recordset1['ID'] => $row_Recordset1['ARTIST'];

 } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); 
```

它只适用于一个 $row_recordset 但是当我放置 => 和第二个记录集时它给了我一个错误

解析错误：语法错误，意外的 T_DOUBLE_ARROW

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:36:50.283

它应该如下所示：

```
$items = array();
while ($row = mysql_fetch_assoc($resource)) {
  $items[$row['ID']] = $row['ARTIST'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:38:04.353

选项1

```
$items[$row_Recordset1['ID']] = $row_Recordset1['ARTIST']; 
```

或者可能

```
 $items[] =array($row_Recordset1['ID'] => $row_Recordset1['ARTIST']); 
```

# format - 备份格式化数据

> ID：11967814
> 
> 赞同：-1
> 
> 时间：2012-08-15T10:32:58.083
> 
> 标签：format, backup, restore, hard-drive

我格式化了我的 D: dard 驱动器分区，我错误地在上面安装了 Windows。我必须将窗口安装到 C: 驱动器，这是我的错误。无论如何要让我的旧数据在格式化之前存储在 D: 驱动器中。

请帮我这样做..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:03:15.607

不是没有第二个硬盘，或第二台计算机来安装它。

此外，您还需要有数据恢复软件才能对此类内容进行完全恢复。

基本说明。关闭计算机，保护驱动器。安装另一个硬盘，格式化，安装windows。最近我一直在向 runtime.org 推荐 getdataback，它大约是 99 美元。您很可能需要 ntfs 版本。安装它，（您可以在不购买的情况下对其进行测试，但如果不安装许可证则无法完成恢复）关闭计算机。从旧硬盘更改bios设置，如果驱动器未被识别。开机进入windows运行，取回ntfs的数据。选择格式化的媒体让它运行几个小时。选择要恢复的数据，保存恢复，安装许可证，完成恢复。

就这么简单。

更重要的是，停止使用计算机，因为任何下载或使用都可能通过覆盖数据来破坏仍位于驱动器上的数据。

# powershell - 从 Powershell 运行 cmd 文件时，无法安装 [Name] MsiExec 返回：255

> ID：11967819
> 
> 赞同：2
> 
> 时间：2012-08-15T10:33:16.127
> 
> 标签：powershell, windows-installer

我正在尝试使用 cmd 文件从 Powershell 运行 MSI 安装命令。
我创建我的安装命令：

```
msiexec /i [insert here a HUGE amount of param values] /lv install.log /passive 
```

然后我将它写入**temp.cmd**然后从 Powershell 执行如下：

```
$exitCode = (Start-Process -FilePath "temp.cmd" -Wait -Passthru).ExitCode 
```

然后我收到以下错误消息：

> CategoryInfo：OperationStopped：255：String
> RuntimeExceptionfullyQualifiedErrorId
> 无法安装 [Msi 名称] MsiExec 返回：255

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:34:58.467

如果您尝试从命令行运行我遇到问题的 MsiExec 命令，我会收到以下错误消息：

> 输入行太长

此错误在 Powershell 中执行时并不明显，您可能认为这是 MsiExec 的问题。

This is a bit of a cryptic error message and relates to cmd.exe having a total commandline length of 8191.
See the Microsoft KB article on cmd length: [http://support.microsoft.com/kb/830473](http://support.microsoft.com/kb/830473)

# perl - cPanel 上的 SOAP::Lite 模块安装

> ID：11967820
> 
> 赞同：0
> 
> 时间：2012-08-15T10:33:29.143
> 
> 标签：perl, cpanel, soaplite

我正在创建一个自定义模块以放置在目录 /usr/local/cpanel/Cpanel 中。我的 perl 模块需要 SOAP::Lite。由于放置在目录 /usr/local/cpanel/Cpanel 中的脚本在 cpanel 的内部 perl 版本 5.6.2 下运行，是否安装 SOAP::Lite 模块？

尝试使用 cpanel 的构建工具构建模块失败，因为需要另一个 perl 模块才能从 cpan 构建soap::lite 的源模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:34:15.710

Perl 模块通常使用[Perl 附带的 cpan 程序](http://perldoc.perl.org/cpan.html)安装。这将为您检查所有依赖项并安装您需要的所有内容。这是你应该做的。

如果您无法访问和运行此程序，那么您可能根本没有安装模块的权限。可能你可以让运行你系统的任何人为你做这件事（也可以让他们升级你将近 9 年的 Perl 版本！）。

除此之外，没有太多选择。你可以尝试在另一个类似的系统上构建所需的模块并复制过来——如果你喜欢痛苦的话。

# matlab - 在matlab中查找行号

> ID：11967821
> 
> 赞同：1
> 
> 时间：2012-08-15T10:33:36.247
> 
> 标签：matlab

从以下示例：

```
x = 1 + (10-1)*rand(1,100);
x(12:22) = 20 + (30-20)*rand(1,11);
x(70:94) = 20 + (30-20)*rand(1,25); 
```

在这里，我正在尝试几件事。首先，我试图找到大于 20 的第一个值的行号，其中连续值 >20 的数量超过 24。所以在这个例子中，我想返回行号 70。

我可以通过以下方式做到这一点：

```
y = x > 20;
k = [strfind([~y(1),y],[0 1]);strfind([y,~y(end)],[1 0])];
idx = k(1,diff(k) + 1 > 24); 
```

但是，我还想将第一组值（不包括超过 24 个 > 20 的连续值）替换为 nan。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:18:02.540

你已经有了一个很好的 find 解决方案`idx`，也许 find 更适合，我不知道：

```
y = x > 20;
kstart = find(diff([0 y])==1);
kend   = find(diff([y 0])==-1);
klen   = kend-kstart+1;

idx = kstart(find(klen>=24,1,'first')); %* 
```

[[*是的，我知道您可以省略`'first'`，但为了清楚起见，它在那里。]]

无论如何：要替换第一组值（那些有`index<idx`）使用：

```
x(1:idx-1) = NaN; 
```

或者，如果您只想替换之前大于 20 的所有数字`idx`：

```
x(y(1:idx-1)) = NaN; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:25:58.933

至于你的问题的第一部分，这里有一个单行代码，用于查找大于 20 的 25 个或更多连续出现的元素的*所有索引：*

```
idx = strfind((x(:)' > 20), ones(1, 25)); 
```

用于`idx(1)`获取第一个索引，在您的示例中为 70。

至于你问题的第二部分，这里有一个解决方案：

```
idx_start = strfind([0, x(:)'] > 20, [0 1]);           %# Start indices
len = strfind([x(:)' > 20, 0], [1 0]) - idx_start + 1; %# Sequence lengths
first = find(len < 25, 1);                             %# First desired sequence
x(idx_start(first):idx_start(first) + len(first) - 1) = NaN; 
```

请注意，这仅替换x > 20 的*第一次*连续出现，不超过 24。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T14:27:40.240

我想要一套已经很好的解决方案。

您也可以使用卷积：

```
tmp = conv(x>20, ones(1,25));
inds = find(tmp==25)
first_indes = inds(1); 
```

# sharepoint-2010 - 无法完成此操作 0x80004005

> ID：11967833
> 
> 赞同：0
> 
> 时间：2012-08-15T10:34:17.123
> 
> 标签：sharepoint-2010

将工作站点保存为模板，然后基于此模板创建新站点后，通过浏览器从列表中删除项目时出现以下错误

无法完成此操作 0x80004005

查看 ULS 日志，我似乎得到的只是

无法完成此操作。请再试一次。0x80004005

有趣的是，如果我将列表保存为模板，然后从该模板创建一个列表，我不会收到错误消息

有任何想法吗？

# jquery - 突出显示 .slideToggle 上的 div 显示

> ID：11967835
> 
> 赞同：0
> 
> 时间：2012-08-15T10:34:42.740
> 
> 标签：jquery

这是我的第一个问题，所以我希望我能够正确地格式化和措辞。

我刚刚开始在网站 codeacademy 上学习 jQuery，我一直在尝试根据我所学的内容创建一个简单的应用程序。这是一个基于布里斯托尔市长候选人的顶级特朗普风格的游戏（我知道非常非原创）。

我想要的是，当您单击 Marvin 卡上的选项之一时，右侧加载的卡 (George) 会突出显示相同的选择。例如，如果我选择“Tweets”选项，那么它会在 George 的卡片上突出显示“Tweets”选项，然后再滑动切换。

我已经设法获得了一些通用样式和一些 jQuery（如果很难理解我可能是如何编写它的，请道歉），您可以在此处查看示例：

[http://jsfiddle.net/4vdf4/](http://jsfiddle.net/4vdf4/)

关于如何编写一些 jQuery 代码的任何想法，以便根据用户的点击在单独的 div 中突出显示选择。

非常感谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:06:13.683

让我成为第一个说第一个用户这是一个写得很好的问题，比一些长期成员更好！

在一个简化的示例中，仅回答有关选择行的问题，这是一个示例[http://jsfiddle.net/chricholson/xhAnK/1/](http://jsfiddle.net/chricholson/xhAnK/1/)

```
<div id="card1">
    <ul>        
        <li class="row1">Row 1</li>
        <li class="row2">Row 2</li>
        <li class="row3">Row 3</li>
        <li class="row4">Row 4</li>
    </ul>
</div>

<div id="card2">
    <ul>        
        <li class="row1">Row 1</li>
        <li class="row2">Row 2</li>
        <li class="row3">Row 3</li>
        <li class="row4">Row 4</li>
    </ul>
</div> 
```

jQuery

```
$(document).ready(function(){

    $('div li').click(function(){

        // remove any previous selections
        $('div li').removeClass('selected'); 

        // get the class of the row you have clicked
        var strClass = $(this).attr('class'); 

        // apply the class to the other divs
        $('div li.' + strClass).addClass('selected');

    });

});​ 
```

发生什么了？好吧，基本上单击任何列表项都会在类似的 div 中找到它的合作伙伴。在这种情况下，我使用了类，因此如果由于某种原因，行出现乱序，那也没关系。因为您有固定顺序的固定行，所以您可能会根据行的位置而不是它的名称进行跟踪。

请注意，我使用的是类而不是 id。出于同样的原因，您总是有相同的行，这意味着您可以简单地获取您单击的行的类并使用相同的字符串在其他地方找到它。在您的情况下，使用 ID，您必须首先操作从单击的列表项收到的 ID 字符串，在末尾添加“1”。请参阅您修改的示例：http: [//jsfiddle.net/chricholson/4vdf4/10/](http://jsfiddle.net/chricholson/4vdf4/10/)。请记住，您可以同时拥有 ID 和类，因此您仍然可以保留 ID 以正确绑定数据，然后只需将类用于选择过程。

我认为我的答案写得比你的问题要粗心得多！如果您需要更多指导，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:02:20.900

您的标记不是很好，但是您可以毫不费力地访问`$(".link").click`函数内第二张卡片上的相应列表项，如下所示：

```
$('#' + $(this).attr('id') + '1').css('background-color','red'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:05:56.157

只需用这个替换点击代码。然后显然对其进行了一些调整。

这将按照您的要求定位索引 LI。

```
var getId;
            $("#stats li").click(function () {
                getId = $(this).index();
                $('#card1').slideToggle();
            });

            $(".link").click(function() {
                $(".link").css('color', '');
                $(".link").css('background-color', '');
                $(this).css('background-color', 'red');
                $(this).css('color', 'white');
                $(this).addClass('picked');
                $('#stats1 ul li').eq(getId).addClass("picked");
            }); 
```

# java - 从 Servlet 发送和接收 JSON 数据

> ID：11967841
> 
> 赞同：1
> 
> 时间：2012-08-15T10:35:00.457
> 
> 标签：java, json, web-services, servlets

如何将 JSON 数据发送到我的 Servlet`doPost()`方法并接收回来？我有一个生成和使用 JSON 的 Web 服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:39:02.863

在 servlet 中使用传递给 doPost 方法的 HttpServletRequest 和 HttpServletResponse 参数

```
public class ExampServlet extends HttpServlet {
  public void doPost(HttpServletRequest request,HttpServletResponse response)throws ServletException, IOException
  {
    // to accept the json data

    String jsonData = request.getParameter("json");  

    // to send out the json data

    response.setContentType("application/json");
    PrintWriter out = response.getWriter();
    out.println(jsonData) ; 
    out.close() /
   } 
```

# html - div容器不居中

> ID：11967842
> 
> 赞同：-3
> 
> 时间：2012-08-15T10:35:13.220
> 
> 标签：html, css

我对一些基本的 css 内容有疑问，我正在网上浏览此内容，但找到了示例，但没有一个可以解释我的问题：

**页面模板 [HTML]：**

```
 <div id="container" class="gallery-list"> <!-----gallery-list---->
    <div id="content" role="main">
        <h1 class="page-title"><?php the_title(); ?></h1>
        <div id="gallery-list-container" class="list-container">
                <?php wp_reset_query(); ?> 
                <?php
                // Set up the arguments for retrieving the pages
                $args = array(
                    'post_type' => 'page',
                    'numberposts' => -1,
                    'post_status' => null,
                // $post->ID gets the ID of the current page
                'post_parent' => $post->ID,
                    'order' => ASC,
                    'orderby' => title
                    );
                 $subpages = get_posts($args);
                  if ($subpages[0]) :?>
                        <div class="gallery-list-wrap">
                            <?php
                             // Just another WordPress Loop
                             foreach($subpages as $post) :
                                setup_postdata($post);
                            ?>
                                <div id="post-<?php the_ID(); ?>" class="list-entry-container">
                                    <?php 
                                        $count++;
                                        // Show the Post thumbnail
                                        if ( has_post_thumbnail() ) : ?>

                                                <div class="list-entry">
                                                    <a class="size-small" href="<?php the_permalink(); ?>"><?php the_post_thumbnail('thumbnail'); ?></a>
                                                    <h2 class="list-entry-title"><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'highart' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a></h2>
                                                </div><!-- .entry-content -->                   
                                            <?php
                                        // Show the High Art image
                                         else : ?>
                                            <div class="entry-content">
                                                <?php highart_entry_image_attachment('thumbnail') ?>
                                            </div><!-- .entry-content -->                       
                                        <?php endif; ?>

                                        <div class="entry-utility">
                                            <?php edit_post_link( __( 'Edit', 'highart' ), '<span class="edit-link">', '</span>' ); ?>
                                        </div><!-- .entry-utility -->
                                </div>
                        <?php endforeach; ?>
                    </div>
                 <?php endif; ?>
        </div>
    </div><!-- #content -->
</div><!-- #container --> 
```

**[CSS]**

```
#main .gallery-list{margin:0;width:925px;overflow:hidden; display:block;}
#main .gallery-list #content{width:925px;}
.list-container{margin:0 auto; display:block; padding:11px 0 0; list-style:none; border-bottom: 1px solid lightgray;}
.gallery-list #gallery-list-container {margin-top:-22px;float:none; width:925px;}
.gallery-list li {display:inline;width:185px;height:241px;margin-right:25px;padding:22px 0 44px;border:1px solid lightgray;border-width:0 0 0; position:relative; overflow:hidden;}
.gallery-list #gallery-list-container li {min-height:252px; display:inline;clear:none;padding-bottom:25px;}
.gallery-list-wrap{display:inline; float:left; margin:0 auto;}
.list-entry-container {display:inline; float:left;}
.gallery-list .list-entry{display:inline;width:165px;font-size: 9px; font-weight:400; line-height:11px; text-transform:uppercase; padding:5px 0 6px;}
.gallery-list-line-wrap{margin: 0 auto; display:block;} 
```

为什么 div: gallery-list-wrap 不以容器为中心？它只是保持与容器的左侧对齐。

在这种情况下，我真的不明白浏览器是如何处理这个的。

可能是一个新手问题，但我似乎无法弄清楚

**EDIT1：** 根据下面的答案，这可能是一个有问题的方法，所以有一些背景故事：我有一个 div，其中包含带有缩略图和页面标题的子页面的 div。到目前为止这么好问题是我不知道有多少所以我不知道我是否每行有 1、2、3 或 4 个我希望每行最多有 4 个并且每行以容器为中心

这是可行的吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:42:06.403

删除：

```
display: inline;
float: left; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:45:56.580

你需要删除

```
display:inline;
float:left; 
```

并为画廊列表包装添加宽度。

目前，您将 margin-left 和 margin-right 设置为 auto ，这是正确的做法，但是要使其正常工作，您还需要定义宽度。

因此，如果您有两个 div，请计算出它们的组合宽度并将其应用于 gallery-list-wrap。

我希望这有帮助。

# eclipse - 学习操作Eclipse调试模式的按钮

> ID：11967843
> 
> 赞同：0
> 
> 时间：2012-08-15T10:35:14.950
> 
> 标签：eclipse, debugging

这篇文章*不是*重复的

[调试 Eclipse IDE 本身](https://stackoverflow.com/questions/2324852/debug-eclipse-ide)

这一个都不是

[调试 Eclipse IDE 本身](https://stackoverflow.com/questions/2324852/debug-eclipse-ide)

背景是，我对调试 Eclipse 几乎一无所知。多年来我一直在使用“打印”和“断言”进行调试。

在哪里可以学习如何操作Eclipse中调试模式的36个按钮？？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:37:04.297

您可以使用几个链接。

例如 ：

**[使用 Eclipse 调试](http://www.eclipse.org/resources/resource.php?id=503)**（官方教程）

还有这个，

**[使用 Eclipse 进行 Java 调试 - 教程](http://www.vogella.com/articles/EclipseDebugging/article.html)**

# jquery - 这在 jQuery 中合法吗？

> ID：11967844
> 
> 赞同：3
> 
> 时间：2012-08-15T10:35:16.820
> 
> 标签：jquery, comments, nested, selector, quotes

在 jQuery 中在链式查询中间放置评论是否合法？

```
$('#deForm :input')
    .not('.notHide')  //Commment
    .not('.alsoNotHide'); 
```

我正在测试这样的代码，但它有一个奇怪的行为，我想确定这不是刷新问题，因为对我来说，行为没有变化。

选择器最好使用单引号还是双引号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:38:07.790

这没有任何问题，只要注释是该行中唯一的内容（该行的其余部分将被解释器逐字忽略）。

如果有疑问，您可以随时尝试将其更改为：

```
/* Comment */ 
```

但是使用`//`不是问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T10:40:19.743

1.  是的，有这样的评论是合法的。
2.  通常，您使用哪个引号并不重要。[在此处查看接受的答案](https://stackoverflow.com/questions/3149192/difference-between-single-quotes-and-double-quotes-in-javascript)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T10:40:36.957

您的问题**与 jquery 无关**，双引号与单引号具有相同的目的，这只是一个偏好问题。

并且评论风格是完全有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T10:38:14.593

是的，这是完全合法的。它只是被调用的javascript函数，jQuery库甚至不应该意识到评论在那里。

而且我倾向于对所有 javascript 字符串使用单引号，这通常是我所看到的，所以我认为这是“标准的”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T10:40:37.347

如果您的代码有换行符，那没关系。如果这在一行中，那将是一个问题。

# javascript - XMLHttpRequest 的 open() 在 Chrome 中失败

> ID：11967845
> 
> 赞同：0
> 
> 时间：2012-08-15T10:35:17.780
> 
> 标签：javascript, asp.net, ajax, asp.net-ajax

我正在尝试修补一些在 Chrome 中不起作用的 AJAX。这不是我的脚本，我宁愿不将整个东西转换为 jQuery。

```
xmlhttp.open("GET", query, true);
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4) {
        console.log(xmlhttp.responseText);
    }
}
xmlhttp.send(); 
```

这实际上在使用 Internet Explorer 时会在日志中输出一些内容，但是在 (Ch)rome 中我得到一个空字符串，因为 JS 调试器告诉我`GET`失败了。目标 URL 是正确的，因为它在 IE 中工作，但它是某种 ASP.NET 脚本，我不太熟悉它的内部工作原理（我在这里做 HTML、CSS 和 JavaScript）。

为什么允许 IE 从目标中检索信息，但不允许 Chrome？当使用 Chrome 时`xmlhttp`，`XMLHttpRequest`IE 会得到某种`ActiveXObject`.

**编辑。**我在[这里](https://stackoverflow.com/questions/1742049/jquery-ajax-problem-in-chrome)找到了一些可能的解决方案。`Response.Close()`，没有异步或指定/空数据类型。虽然是 jQuery。

**编辑#2。** [Chrome 对我的标题说了什么。](http://db.tt/ybKwIMcG)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:49:26.873

您可以通过在 Chrome 的地址栏中输入网址来查看网址吗？您的浏览器配置可能只是阻止 Chrome 看到服务器。

另一种可能性是您被同源[策略](http://en.wikipedia.org/wiki/Same_origin_policy)所困扰-您访问的网址与页面在同一个域上吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:27:23.303

好的，所以我已经解决了。Chrome 显然不喜欢`Response.Close()`在请求页面的末尾添加。更改为`Response.End()`修复它。谢谢您的帮助！

我还用一行 jQuery 替换了那个 JavaScript。

# python - Boa 构造函数找不到 Python 2.7

> ID：11967847
> 
> 赞同：0
> 
> 时间：2012-08-15T10:35:43.750
> 
> 标签：python, installation, boa-constructor

在 Boa Constructor 的安装屏幕上，它说在注册表中找到了 Python 2.2 和 3.1，但是我使用 2.7 作为我的主要版本。我怎样才能让它识别它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T19:55:43.630

我认为 Boa Constructor 不存在。他网站上发布的最后一条消息是 2006 年。所以它可能无法识别最近的 python 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T23:00:13.327

这取决于python版本。我已经在 Windows 操作系统上进行了测试。

*   Boa Constructor可以检测python-2.5.4
*   Boa Constructor 可以检测到python 2.6.6。
*   Boa Constructor 也可以检测 python 3.4.4 但是
*   Boa Constructor 无法检测到 python 3.4.3
*   Boa Constructor 无法检测到 python 2.7.12。

除了从 2.7.x 开始之外，我仍在尝试使用其他版本。我认为要获得 BOA Constructor 的 2.7.x 正确版本会花费我很多时间。但是（我只是分享我的经验）如果你想让 Windows 上的 Boa Constructor 运行良好，你需要它们的正确版本，所以我已经下载并测试了它并且它正在运行，这里列出了不相互冲突的正确版本。

1.  python-2.5.4.msi。
2.  boa-constructor-0.6.1.src.win32.exe。
3.  wxPython2.8-win32-unicode-2.8.10.1-py25.exe（可选）作为 GUI。
4.  MySQL-python-1.2.2.win32-py2.5.exe（可选）作为 mySQL 连接器。
5.  xlutils-1.4.1.win32.exe（可选）用于 Ms Excel 访问。
6.  xlwt-0.7.2.win32.exe（可选）用于 Ms Excel 访问。
7.  xlrd-0.7.9.win32.exe（可选）用于 Ms Excel 访问。

# search - Liferay 搜索 - PermissionChecker

> ID：11967848
> 
> 赞同：1
> 
> 时间：2012-08-15T10:35:46.137
> 
> 标签：search, liferay, liferay-6

我可以禁用搜索结果的权限检查吗？当我看到 BaseIndexer.java 时，它正在做以下事情。

```
PermissionChecker permissionChecker =
            PermissionThreadLocal.getPermissionChecker();

        int start = searchContext.getStart();
        int end = searchContext.getEnd();

        if (isFilterSearch() && (permissionChecker != null)) {
            searchContext.setStart(0);
            searchContext.setEnd(end + INDEX_FILTER_SEARCH_LIMIT);
        }

        Hits hits = SearchEngineUtil.search(searchContext, fullQuery);

        searchContext.setStart(start);
        searchContext.setEnd(end);

        if (isFilterSearch() && (permissionChecker != null)) {
            hits = filterSearch(hits, permissionChecker, searchContext);
        } 
```

isFilterSearch() 方法：

```
 protected boolean isFilterSearch() {
    return _FILTER_SEARCH;
} 
```

和 _FILTER_SEARCH 变量：

```
private static final boolean _FILTER_SEARCH = false; 
```

修改此类以不检查权限是唯一的选择吗？任何更好的想法来做到这一点。我想这样做的原因是，更多的搜索结果需要时间来检查所有搜索结果的权限。这是我们需求的瓶颈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:01:47.610

也许是疯狂的想法，但您可以暂时禁用权限检查器：

```
PermissionChecker permissionChecker = PermissionThreadLocal.getPermissionChecker();
PermissionThreadLocal.setPermissionChecker(null);

//Search

PermissionThreadLocal.setPermissionChecker(permissionChecker); 
```

# java - 如何在 JPanel 布局后才向 JPanel 添加内容

> ID：11967852
> 
> 赞同：3
> 
> 时间：2012-08-15T10:35:49.830
> 
> 标签：java, swing, layout, jpanel

我需要在 JPanel 中显示一个图像（它本身被放置在几层 JPanel 中），并且我想调整图像的大小以适合 JPanel 的宽度。现在，当我将图像添加到 JPanel 时，JPanel 的 getWidth() 等于屏幕宽度，因此图像被调整为屏幕宽度。但是在将 Jpanel 添加到其父 JPanel 之后，宽度发生了变化，因此图像对于 JPanel 的宽度来说太大了。

我想仅在 JPanel 布局后调整大小并添加图像，因此我获得了面板的正确宽度并可以相应地调整图像大小。

我怎样才能做到这一点？有没有像 afterLayout() 这样的事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:49:19.417

是的，您可以使用[ComponentListener](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/event/ComponentListener.html)来做到这一点。LayoutManager 应该在布局组件时调用 setSize 方法，因此您应该能够收到此类修改的通知。

您正在寻找的方法是：

```
void componentResized(ComponentEvent e){} 
```

所以实现 ComponentListener 接口并通过[addComponentListener()](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#addComponentListener%28java.awt.event.ComponentListener%29)方法将其添加到所需的 Component 中：

```
JPanel panel;
...
panel.addComponentListener(new YourClassImplementingComponentListener()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T12:00:34.563

使用`ComponentListener`和聆听`ComponentResized`方法。在那写下你的逻辑来根据面板的大小调整图像的大小。当面板调整大小时，图像也会相应地调整大小。

# java - 是否可以从字体中获取矢量形式的字符？

> ID：11967854
> 
> 赞同：3
> 
> 时间：2012-08-15T10:36:06.977
> 
> 标签：java, fonts

我需要在我的应用程序中以矢量形式（点和曲线）获得字母的形状。我可以轻松获得[Font实例，而且](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html)[GlyphVector](http://docs.oracle.com/javase/6/docs/api/java/awt/font/GlyphVector.html)类似乎能够为我提供所需的[Shape](http://docs.oracle.com/javase/6/docs/api/java/awt/Shape.html)。但是要从[Font](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html)创建[GlyphVector](http://docs.oracle.com/javase/6/docs/api/java/awt/font/GlyphVector.html)，我需要一些[FontRenderContex](http://docs.oracle.com/javase/6/docs/api/java/awt/font/FontRenderContext.html)。

我不是在渲染某些东西时执行此操作，因此我看不到获取该[FontRenderContex](http://docs.oracle.com/javase/6/docs/api/java/awt/font/FontRenderContext.html)的方法。是否可以创建一些默认的[FontRenderContex](http://docs.oracle.com/javase/6/docs/api/java/awt/font/FontRenderContext.html)或绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:01:30.003

我不确定这是否有效，但您可以从[BufferedImage](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)对象的[Graphics2D](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics2D.html)对象中获取[FontRenderContext](http://docs.oracle.com/javase/6/docs/api/java/awt/font/FontRenderContext.html)；

```
BufferedImage img = new BufferedImage(8, 8, BufferedImage.TYPE_INT_ARGB);
Graphics2D g2 = img.getGraphics();
FontRenderContext frc = g2.getFontRenderContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:51:10.840

您的应用程序中有什么可以扩展[Graphics2D](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html)吗？这样，您就可以访问该`getFontRenderContext`方法。

我的意思是您*可以*只使用其中一个构造函数，但我在[FontRenderContext](http://docs.oracle.com/javase/6/docs/api/java/awt/font/FontRenderContext.html)的文档中看到了这一点：

```
Typically, instances of FontRenderContext are obtained from a Graphics2D object.
A FontRenderContext which is directly constructed will most likely not represent
any actual graphics device, and may lead to unexpected or incorrect results. 
```

# asp.net-mvc - MVC3，CSS3 - 无法在文本框中获取样式

> ID：11967855
> 
> 赞同：0
> 
> 时间：2012-08-15T10:36:08.510
> 
> 标签：asp.net-mvc, asp.net-mvc-3, css, razor

我刚刚看过一个关于 CSS3 的培训视频，在我的 MVC 应用程序中加入这些样式看起来是个好主意；

```
input.data:required {
    background-color: rgba(255, 0, 0, 0.04);
}

input.data:focus {
    background-color: rgba(255, 255, 255, 0.8);
    border: 5px solid #ff5400;
} 
```

因此，这将为必填字段添加背景颜色，并突出显示焦点所在的文本框。然而，这些样式并没有在我的 MVC 表单中得到体现；

```
 <tr>
                <td style="text-align: right">
                    Client Organisation Name<span class="error">*</span>
                </td>                    
                <td>
                    @Html.TextBoxFor(model => model.clientContact.ContactName, 
                        new { autocomplete = "off", maxlength = "255", style = "text-transform: capitalize; width:400px;" })
                    @Html.ValidationMessageFor(model => model.clientContact.ContactName)
                </td>
            </tr> 
```

当我检查文本框字段时，我看到输入元素的类型是“文本框”。所以我把 input.data 改成了 input.text-box 和 input.text。但这也不起作用。那么我需要做什么才能让它工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:42:53.410

`.data`实际上是一个应用在`textbox`. 在您的文本框上定义一个 CSS 类名称`data`。

**像这样：**

```
<td>
    @Html.TextBoxFor(model => model.clientContact.ContactName, 
        new { autocomplete = "off", maxlength = "255", @class= "data", style = "text-transform: capitalize; width:400px;" })
    @Html.ValidationMessageFor(model => model.clientContact.ContactName)
</td> 
```

**注意`@class= "data"`上面代码中的。**

# 或者使用下面提到的另一种方式：

像这样在你的css中使用或`input[type=textbox]`代替：`input.text-box``input.data`

```
input[type=textbox]:required {
    background-color: rgba(255, 0, 0, 0.04);
}

input[type=textbox]:focus {
    background-color: rgba(255, 255, 255, 0.8);
    border: 5px solid #ff5400;
} 
```

# android - /proc/wakelocks 的列是什么意思？

> ID：11967856
> 
> 赞同：1
> 
> 时间：2012-08-15T10:36:09.803
> 
> 标签：android, shell, wakelock, android-wake-lock

在 cat /proc/wakelocks 之后，我得到了类似的东西。但是列中的数字是什么意思？

```
 ------ KERNEL WAKELOCKS (/proc/wakelocks) ------
name    count   expire_count    wake_count  active_since    total_time  sleep_time  max_time    last_change
"event2-366"    26021   0   0   0   1780516781  0   98555000    2746261947545
"mmc0"  0   0   0   0   0   0   0   0
"qcril" 467 0   0   0   262658558   1293333 71696667    2745863710879
"rpc_reply" 250 0   0   0   208878752   17641665    21993333    2745857429212 
```

*   名称 - 这很容易。
*   count - 锁定了多少个锁？
*   expire_count - 不知道。这是什么？
*   wake_count - 同上。这是什么？
*   active_since - 同上。这是什么？
*   total_time - 同上。什么总时间？
*   sleep_time - 同上。这是什么？
*   max_time - 同上。这是什么？
*   last_change - 同上。这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-11T21:47:00.527

1.  count：表示持有锁的次数

2.  expire_count：表示唤醒源超时的次数。例如，当某些模块打开设备并且长时间未使用它时，就会发生这种情况。然后在超时时，唤醒源将过期。

3.  active_since：指示唤醒源活动的时间。该值以 jiffies 为单位。

4.  total_time：表示此唤醒源被保持的总时间（以 jiffies 为单位）。

5.  max_time：表示保持唤醒源的最长时间（jiffies）

# c# - 休眠刷新 IEnumerable

> ID：11967857
> 
> 赞同：2
> 
> 时间：2012-08-15T10:36:15.657
> 
> 标签：c#, database, nhibernate, orm

我有两个班

```
public class Notification
{
    public virtual Guid ID { get; set; }
    public virtual IEnumerable<Message> Messages {get;set;}
}

public class Message
{
    public virtual Guid ID { get; set; }
    public virtual string Message { get; set; }
} 
```

我的页面上有两个 .ascx 控件，一个通过公共方法在另一个上调用 Bind。现在，如果我在消息列表中添加一行，然后运行我的绑定方法，该方法只是通过 ID 获取通知并返回消息。我没有收到新添加的消息。在它获取此数据之前，我必须再次刷新页面。

是否有关于 IEnumerable 缓存的内容，或者我如何强制它返回运行 Session.Get<> 的数据库，但它没有我想要的效果。

我也试过

Session.Evict
Session.Refresh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:53:48.410

请检查下面发布的 Q 和 A，我认为他们的情况与您的情况非常相似。也许通过简单地改变他处理你的收藏的方式

[在 NHibernate 中重新加载关联/相关集合](https://stackoverflow.com/questions/1654213/reload-association-related-collection-in-nhibernate)
[在 nhibernate 中刷新实体的最佳方法是什么](https://stackoverflow.com/questions/4106554/whats-the-best-way-to-refresh-entities-in-nhibernate)
[https://forum.hibernate.org/viewtopic.php?f=1&t=968923](https://forum.hibernate.org/viewtopic.php?f=1&t=968923)

主要问题是NH没有“收藏”的概念。它只是处理对象并将它们映射到表。如果你关注一个关系，NH 会生成一个查询，下载对象列表，认为它已经完成并对此感到高兴。您将获得查询返回的对象集合。要重新读取集合，您实际上必须重新运行查询。这就是查询和标准的意义所在：准备一些可以重复使用的东西来刷新您的收藏。刷新 - 通过从数据库中重新获取它们。

IIRC，NH 跟踪对象。这意味着，如果查询的第一次运行返回对象 A、B、C 并将它们放在 List<> 中，那么 hext 运行返回 A、C、D、E 并将它们返回到其他一些 List<> 中，那么对象 A 和 C 将是与第一次相同的对象。除非您使用不同的 NH 会话，否则不会有对象克隆。当然，由您来处理 List<> - 也就是说，您必须决定如何将它们合并到向用户显示的一件事中。通常，您会希望删除第一个并仅使用最新鲜的一个来立即指示“B”已被删除，或者将它们合并，假装“B”从未被删除并在提交时默默地修补它。

# asp.net-mvc - 跨控制器的 ActionLink

> ID：11967858
> 
> 赞同：0
> 
> 时间：2012-08-15T10:36:23.250
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor

我正在尝试在我的控制器 RequestedService 的视图中创建一个操作链接，它将用户带到另一个控制器并采取以下形式的操作：

/ItemsForService/创建/{id}

ItemsForService 是 create 函数所在的控制器。

到目前为止，我有：

```
@Html.ActionLink("Add Item", "ItemsForService", "Create", New With {.id = currentItem.RequestedServiceId}) 
```

然而，这似乎将它作为 Create?=id 而不是 Create/id

我将如何通过后者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:50:00.310

使用正确的 ActionLink 重载来获得预期的结果

```
@Html.ActionLink("Add Item", "ItemsForService", "Create", New With { id = currentItem. currentItem }, Nothing) 
```

你不需要`.id = ...`它只是`id = ...`

过载是`ActionLink(string linkText, string actionName, string controllerName, object routeValues, object htmlAttributes)`

当您为操作提供参数时，需要添加最后一个参数`Nothing`as null HTML 属性。或者，如果您确实需要将 HTML 属性应用于链接，您可以使用：

```
@Html.ActionLink("Add Item", "ItemsForService", "Create", New With { id = currentItem. currentItem }, New With { @class = "MyCustomCssClassName" } ) 
```

# python - python脚本是否可以知道它是否使用交互式选项'-i'运行？

> ID：11967870
> 
> 赞同：0
> 
> 时间：2012-08-15T10:37:07.910
> 
> 标签：python

> **可能重复：**
> [判断python是否处于-i模式](https://stackoverflow.com/questions/640389/tell-whether-python-is-in-i-mode)
> [判断python是否处于交互模式](https://stackoverflow.com/questions/2356399/tell-if-python-is-in-interactive-mode)

有没有办法检查是否使用交互式选项 -i 运行了 python 脚本？

例如

```
if interactive_mode:
    print 'I am in interactive mode!'
else:
    print 'I am in batch mode!' 
```

然后调用

```
python hello_world.py
I am in batch mode!

python -i hello_world.py
>> I am in interactive mode! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:49:04.317

```
import sys
if sys.flags.interactive:
    print 'I am in interactive mode!'
else:
    print 'I am in batch mode!' 
```

# download - Symfony2.1 服务上传

> ID：11967872
> 
> 赞同：3
> 
> 时间：2012-08-15T10:37:17.913
> 
> 标签：download, symfony-2.1

我有一个关于使用 Symfony 2.1 提供文件的问题

```
public function exampleFileAction(){
    $response = new Response();

    $d = $response->headers->makeDisposition(ResponseHeaderBag::DISPOSITION_ATTACHMENT, 'File.xls');

    $response->setContent(file_get_contents('../uploads/Bundle/Files/File.xls'));
    $response->headers->set('Content-Disposition', $d);
    return $response;
} 
```

我上面的代码工作正常，但它是这样做的实际方法吗？使用 file_get_contents 获取文件是否很好？

谢谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T14:36:15.423

**编辑 2013 年 3 月**：

大文件不应该遵循这个响应，游戏中有一个新玩家：[https ://github.com/igorw/IgorwFileServeBundle](https://github.com/igorw/IgorwFileServeBundle)

它支持 SendFile 将文件下载委托给 Apache/Ngnix，这要好得多。

**编辑 2013 年 5 月**：

好消息：核心中现在提供了一个内置解决方案：[BinaryFileResponse](https://github.com/symfony/HttpFoundation/blob/master/BinaryFileResponse.php)。

* * *

**旧回应：**

有一个名为 Response 的新类`StreamedResponse`，它完全符合您的要求，但内存效率更高，并且由内核很好地处理。

> StreamedResponse 表示流式 HTTP 响应。
> StreamedResponse 对其内容使用回调。
> 回调应使用标准 PHP 函数（如 echo）将响应流式传输回客户端。如果需要，也可以使用 flush() 方法。

[http://symfony.com/doc/master/components/http_foundation/introduction.html#streaming-a-response](http://symfony.com/doc/master/components/http_foundation/introduction.html#streaming-a-response)

所以对于一个大文件，你可以在没有 file_get_content 的情况下做到这一点：

```
<?php
use Symfony\Component\HttpFoundation\StreamedResponse;
use Symfony\Component\HttpFoundation\ResponseHeaderBag;

$response = new StreamedResponse();
$response->setCallback(function () {
    $name = 'bigfile.pdf';
    $fp = fopen($name, 'rb');
    fpassthru($fp);
});
$d = $response->headers->makeDisposition(ResponseHeaderBag::DISPOSITION_ATTACHMENT, 'foo.pdf');
$response->headers->set('Content-Disposition', $d);
$response->send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:00:13.733

我无法让 Damien 的解决方案在控制器中工作。

这是我要做的工作：

```
<?php
...
return new StreamedResponse(
  function () use ($file) {
    readfile($file);
  }, 200, array(
            'Content-Type' => 'image/png',
            'Content-Disposition' => 'inline; filename="filename.png"')
); 
```

信用：[http ://ailoo.net/2013/03/stream-a-file-with-streamedresponse-in-symfony/](http://ailoo.net/2013/03/stream-a-file-with-streamedresponse-in-symfony/)

# java - 如何将 HTML 转换为二维数组 假设我将一个完整的 HTML 表（当每个tr和td具有额外属性时）复制到一个字符串中。如何获取所有内容（标签之间的内容）并创建一个像原始表格一样组织的二维数组？ 例如对于这个表： 于 2012-08-15T11:25:31.030 回答 This answer is useful 5 也许String.split('<whateverhtmltabletag>')可以帮助你？ 上课也StringTokenizer很有用。例子： String data = "one
two
three"; StringTokenizer tokens = new StringTokenizer(data, "
"); while (tokens.hasMoreElements()) { System.out.println(tokens.nextElement()); // prints one, then two, then three } 此外，indexOf("<tag")在这里使用示例：http 0="" :="" forums.devshed.com="" java-help-9="" parse-html-table-into-2d-arrays-680614.html="" 您还可以使用="" html="" 解析器（如jsoup），然后将表中的内容复制到数组中。这是="" javascript="" 中的一个示例：javascript="" to="" parse="" table="" of="" numbers="" into="" an="" array="" 于="" 2012-08-15t10:48:13.323="" 回答="" this="" answer="" is="" useful="" 没关系，我在网上看到了这段代码：htmltableparser="" 其实现在好像又遇到了一个问题，但是和这个问题不完全相关，所以我再开一个。="" 2012-08-15t10:57:12.030="" 到目前为止我所拥有的，它不是最好的，但我希望它会有所帮助......简单的字符串="" public="" void="" read_data()="" {="" try="" file="new" file("_result.xml");="" filereader="" filereader(file);="" bufferedreader="" bufferedreader(filereader);="" string="" line="" ;="" output="" int="" a="0," b="0;" boolean="" _write="false;" while="" ((line="bufferedReader.readLine())" !="null)" if(line.trim().startswith("<td"))="" }="" else="" if(_write)="">')+1; b = line.lastIndexOf('<'); output += line.substring(a,b) + "|"; } if(line.trim().equals("</tag")在这里使用示例：http></whateverhtmltabletag>")) { System.out.println(output); output = ""; } } fileReader.close(); } catch (IOException e) { e.printStackTrace(); } 于 2015-11-15T00:23:54.040 回答 This answer is useful 0 为了我自己的需要，我找到了一种 javascript 自动将表格转换为二维数组的方法。考虑以下代码： document.querySelector("#table").children[0].children[r].children[c].innerText 在上面，r = 行索引，c = 列索引。可以像使用行索引和列索引一样自动访问数据，就像二维数组一样。 这是另一种方式，类似于 2D 数组访问，但使用 CSS 选择器： document.querySelector("tr:nth-child(5) td:nth-child(4)") 在第 5 行中找到第 4 列 于 2021-12-23T23:34:59.497 回答 Related 1 ruby-on-rails - 如何将 .sqlite3 文件中的数据加载到 Ruby on Rails 应用程序 1 asp.net - 上传文件时回发错误 2 php - 将 PHP 输出到 HTML 表中 2 java - Work-around for a Joda Time bug in PeriodFormat? 2 regex - VS中的正则表达式搜索不起作用 2 android - Android SQL 数据库 - 未找到 rawQuery() 源 2 jquery - jQuery 1.6 在 div 之后追加一个新 div 3 javascript - 如何使用下一个和上一个按钮创建一个 jquery 滑块 2 apache - 可扩展的 URL 重写规则 3 java - Java中文件名的编码 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11967874
> 
> 赞同：3
> 
> 时间：
> 
> 标签：java, android, html, arrays, html-table

假设我将一个完整的 HTML 表（当每个`tr`和`td`具有额外属性时）复制到一个字符串中。如何获取所有内容（标签之间的内容）并创建一个像原始表格一样组织的二维数组？

例如对于这个表：

```
<table border="1">
    <tr align= "center">
        <td align="char">TD1</td>
        <td>td1</td>
        <td align="char">TD1</td>
        <td>td1</td>
    </tr>
    <tr>
        <td>TD2</td>
        <td>tD2</td>
        <td class="bold>Td2</td>
        <td>td2</td>
    </tr>
</table> 
```

我想要这个数组： ![大批](../Images/ccb3c999a214241fe2eef59462975165.png)

PS：我知道我可以使用正则表达式，但这会非常复杂。我想要一个像 JSoup 这样的工具，它可以自动完成所有工作，而无需编写太多代码

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T11:25:31.030

这就是使用 JSoup 完成的方法（[srsly，不要对 HTML 使用正则表达式](https://stackoverflow.com/a/1732454/967142)）。

```
Document doc = Jsoup.parse(html);
Elements tables = doc.select("table");
for (Element table : tables) {
    Elements trs = table.select("tr");
    String[][] trtd = new String[trs.size()][];
    for (int i = 0; i < trs.size(); i++) {
        Elements tds = trs.get(i).select("td");
        trtd[i] = new String[tds.size()];
        for (int j = 0; j < tds.size(); j++) {
            trtd[i][j] = tds.get(j).text(); 
        }
    }
    // trtd now contains the desired array for this table
} 
```

此外，`class`在您的示例中，此处的属性值未正确关闭：

```
<td class="bold>Td2</td> 
```

它应该是

```
<td class="bold">Td2</td> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T10:48:13.323

也许`String.split('<whateverhtmltabletag>')`可以帮助你？

上课也`StringTokenizer`很有用。例子：

```
String data = "one<br>two<br>three";  
StringTokenizer tokens = new StringTokenizer(data, "<br>");  
while (tokens.hasMoreElements()) {  
   System.out.println(tokens.nextElement());  // prints one, then two, then three
} 
```

此外，`indexOf("<tag")`在这里使用示例：[http ://forums.devshed.com/java-help-9/parse-html-table-into-2d-arrays-680614.html](http://forums.devshed.com/java-help-9/parse-html-table-into-2d-arrays-680614.html)

您还可以使用 HTML 解析器（如[jsoup](http://jsoup.org)），然后将表中的内容复制到数组中。这是 javascript 中的一个示例：[JavaScript to parse HTML table of numbers into an array](https://stackoverflow.com/questions/4150968/javascript-to-parse-html-table-of-numbers-into-an-array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:57:12.030

没关系，我在网上看到了这段代码：[`HtmlTableParser`](http://forums.devshed.com/showpost.php?p=2427144&postcount=5)

其实现在好像又遇到了一个问题，但是和这个问题不完全相关，所以我再开一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-15T00:23:54.040

到目前为止我所拥有的，它不是最好的，但我希望它会有所帮助......简单的字符串

```
public void read_data() {
    try {
        file = new File("_result.xml");
        FileReader fileReader = new FileReader(file);
        BufferedReader bufferedReader = new BufferedReader(fileReader);
        String line = "";
        String output = "";
        int a = 0, b = 0;
        boolean _write = false;

        while ((line = bufferedReader.readLine()) != null) {
            if(line.trim().startsWith("<td")) { _write = true; } else { _write = false; }

            if(_write) {
                a = line.indexOf('>')+1;
                b = line.lastIndexOf('<');
                output += line.substring(a,b) + "|";
            }

            if(line.trim().equals("</tr>")) {
                System.out.println(output);
                output = "";
            }

        }
        fileReader.close();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-23T23:34:59.497

为了我自己的需要，我找到了一种 javascript 自动将表格转换为二维数组的方法。考虑以下代码：

```
document.querySelector("#table").children[0].children[r].children[c].innerText 
```

在上面，r = 行索引，c = 列索引。可以像使用行索引和列索引一样自动访问数据，就像二维数组一样。

这是另一种方式，类似于 2D 数组访问，但使用 CSS 选择器：

```
document.querySelector("tr:nth-child(5) td:nth-child(4)") 
```

在第 5 行中找到第 4 列

|  |
| TD1 | td1 | TD1 | td1 |
| TD2 | tD2 | two three"; StringTokenizer tokens = new StringTokenizer(data, "
"); while (tokens.hasMoreElements()) { System.out.println(tokens.nextElement()); // prints one, then two, then three } 此外，indexOf("<tag")在这里使用示例：http 4="" 5="" 12="" :="" forums.devshed.com="" java-help-9="" parse-html-table-into-2d-arrays-680614.html="" 您还可以使用="" html="" 解析器（如jsoup），然后将表中的内容复制到数组中。这是="" javascript="" 中的一个示例：javascript="" to="" parse="" table="" of="" numbers="" into="" an="" array="" javaandroidhtmlarrayshtml-table="" 回答="" this="" answer="" is="" useful="" 这就是使用="" jsoup="" 完成的方法（srsly，不要对="" 使用正则表达式）。="" document="" doc="Jsoup.parse(html);" elements="" tables="doc.select(&quot;table&quot;);" for="" (element="" tables)="" {="" trs="table.select(&quot;tr&quot;);" string[][]="" trtd="new" string[trs.size()][];="" (int="" i="0;" <="" trs.size();="" i++)="" tds="trs.get(i).select(&quot;td&quot;);" trtd[i]="new" string[tds.size()];="" j="0;" tds.size();="" j++)="" trtd[i][j]="tds.get(j).text();" }="" now="" contains="" the="" desired="" 此外，class在您的示例中，此处的属性值未正确关闭：="" <td="" class="bold>Td2</td>
它应该是
<td class=" bold"="">Td2</tag")在这里使用示例：http> |

# php - 如何为 Crawler Bots 取消移动网站（服务器端）的事件跟踪？

> ID：11967876
> 
> 赞同：1
> 
> 时间：2012-08-15T10:37:26.547
> 
> 标签：php, mobile, google-analytics, server-side

目前，我正在使用 Google Analytics for Mobile 网站的服务器端实现。你知道，有一张图片用于发送跟踪数据。机器人爬取移动网站时是否可以不跟踪事件？

也许我应该使用 rel="nofollow" 属性作为标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:54:39.383

您可以使用 robots.txt 文件或类似的机器人阻止机制（例如[http://www.robotstxt.org/](http://www.robotstxt.org/)），但这只是在您不希望您的内容被机器人抓取以用于搜索引擎目的的情况下。

我没有使用服务器端谷歌分析，但如果它们与谷歌托管的服务相同，但我认为谷歌在阻止机器人方面做得相当不错（[http://support.google.com/analytics/ bin/answer.py?hl=en&answer=1315708](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1315708)）并允许您从报告中识别和阻止机器人 ( [http://www.blastam.com/blog/index.php/2012/06/block-web-monitoring-机器人在谷歌分析/](http://www.blastam.com/blog/index.php/2012/06/block-web-monitoring-bots-in-google-analytics/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:31:21.147

这些机器人不理解帧、Flash 电影、图像或 JavaScript。他们不能点击网站上的任何按钮，如果没有静态链接供他们关注，他们就不会关注。GA 中的事件跟踪是基于 javascript 的，并且需要对用户部分执行操作，因此您的 GA 事件报告中不应出现机器人流量。

# r - 在 r 中为带有彩色叶子的树状图创建图例

> ID：11967880
> 
> 赞同：5
> 
> 时间：2012-08-15T10:37:41.643
> 
> 标签：r, plot, legend, hclust

我在树状图中为叶子着色如下

```
require(graphics)

dm <- hclust(dist(USArrests[1:5,]), "ave")

df<-data.frame("State"=c("Alabama","Alaska","Arizona","Arkansas","California"),   "Location"=c("South","North","West","South","West"))

color.sites<-function(dm){
    dend<-as.dendrogram(dm)
    plot(dend)

    cols <- attributes(dend)
    df$ColorGroups <- factor(df$Location)

    #Set colour pallette
    Location.Pal <- rainbow(nlevels(df$ColorGroups), s=0.9,v=0.9,start=0.1,end=0.9,alpha=1)

    colorleaves <- function (n) {
    # only apply to "leaves" in other words the labels
    if(is.leaf(n)) { 
        i <- which(df$State == attr(n,"label"))
        col.lab  <- Location.Pal[[unclass(df$ColorGroups[[i]])]]
        a <- attributes(n)
        attr(n, "nodePar") <- c(a$nodePar, list(lab.col = col.lab))
    }
    n
}

xx <- dendrapply(dend, colorleaves)

plot(xx, cex=3, cex.main=2, cex.lab=5, cex.axis=1, mar=c(3,3,3,3), main="Title")
}

color.sites(dm) 
```

![在此处输入图像描述](../Images/31a7da98f83f3524fd23bf25c4b5bab3.png)

我想：1）添加一个解释颜色的图例（即橙色 = 北）2）使叶子标签更大更粗（cex.lab 似乎没有做这项工作）3）创建一个具有鲜明对比的调色板当树状图中有许多叶子和颜色时，颜色（彩虹，heat.colors 等似乎都融合在一起了。

任何意见是极大的赞赏 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T11:48:02.440

如果您已经知道如何使用和调整 ggplot2 图形，另一种解决方案是使用 @Andrie [ggdendro 包](http://cran.r-project.org/web/packages/ggdendro/index.html)

```
library(ggplot2)
library(ggdendro)

dm <- hclust(dist(USArrests[1:5,]), "ave")

df <- data.frame(State = c("Alabama","Alaska","Arizona","Arkansas","California"),
                 Location = c("South","North","West","South","West"))

hcdata<- dendro_data(dm, type="rectangle")

hcdata$labels <- merge(x = hcdata$labels, y = df,  by.x = "label", by.y = "State")

ggplot() +
 geom_segment(data=segment(hcdata), aes(x=x, y=y, xend=xend, yend=yend)) +
 geom_text(data = label(hcdata), aes(x=x, y=y, label=label, colour = Location, hjust=0), size=3) +
 geom_point(data = label(hcdata), aes(x=x, y=y), size=3, shape = 21) +
 coord_flip() +
 scale_y_reverse(expand=c(0.2, 0)) +
 scale_colour_brewer(palette = "Dark2") + 
 theme_dendro() 
```

![在此处输入图像描述](../Images/ca492bc245247c595e15edd0bcd9585a.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T11:29:45.950

1.  利用`legend()`

    ```
    cols <- c("orange","forestgreen")
    legend("topright", legend = c("North","South"),
           fill = cols, border = cols, bty = "n") 
    ```

2.  我不相信你可以，`stats:::plot.dendrogram()`因为标签是用绘制的`text()`并且图形参数没有传递给该函数，所以没有黑客攻击。中的相关代码`stats:::plot.dendrogram()`为：

    ```
    if (!is.null(et <- attr(x, "edgetext"))) {
        my <- mean(hgt, yTop)
        if (horiz) 
            text(my, x0, et)
        else text(x0, my, et)
    } 
    ```

    将整个函数源复制到编辑器中并对其进行编辑以执行您想要的操作，然后将其分配给您自己的函数对象并使用它。如果它因为找不到函数而失败（它们可能未从命名空间中导出，请找出它是哪个命名空间，并`ns:::`在`ns`有问题的函数前面加上相关的命名空间。

3.  尝试使用[RColorBrewer](http://cran.r-project.org/web/packages/RColorBrewer//index.html)包来选择分类调色板。

# linux - 更改生成的转义序列

> ID：11967882
> 
> 赞同：0
> 
> 时间：2012-08-15T10:37:49.690
> 
> 标签：linux, keyboard, terminal, centos, terminfo

这个问题是我之前问题的通用版本：[Change the escape sequence generated by xterm for key combination](https://stackoverflow.com/questions/11840763/change-the-escape-sequence-generated-by-xterm-for-key-combinations)。关于如何更改 xterm 生成的转义序列（通过主目录中的 .Xresources 文件更改其转换表），我有一个很好的答案。

现在我想知道是否有更通用的方法来更改 linux (Ubuntu/CentOS) 中生成的转义序列。我的意思是，我希望更改不仅适用于 xterm，也适用于 gnome-terminals。我正在考虑使用 terminfo 来执行此操作，但我尝试并修改、重新编译了 terminfo，但无法在终端中按 Ctrl+F2 获得 ^[O5Q 响应。

我还尝试了以下操作但没有成功：

*   xmodmap，但对于组合键它不起作用
*   xdotool windowactivate xyz type ^[O5P，这将返回单个字符的字符代码
*   xmacro，它不会将击键发送到其他窗口
*   Ironahk，我在尝试运行 example.ahk 时一开始就遇到错误，并且在其简易手册中找不到我想要的命令。
*   bind '\e[1;5P":"\e[O5P"'，这里的第一个键码是我当前输入 ctrl+f1 时得到的，然后是我希望通过这种组合得到的键码。没有效果。
*   xbindkeys + xvkbd，也没有帮助

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:43:49.227

没有通用的方法可以做到这一点。每个终端小部件（VTE 等）都有自己的将按键转换为字符序列的方法，有些甚至可能将其硬编码在代码本身中。

# asp.net-mvc-3 - 如何在 Orchard 的替代视图中包含模块的资源？

> ID：11967883
> 
> 赞同：3
> 
> 时间：2012-08-15T10:37:59.370
> 
> 标签：asp.net-mvc-3, c#-4.0, orchardcms

假设有一个具有视图的模块，并且该视图中包含一个 java 脚本文件：

像这样 ：

```
Script.Include("myscripts/somescript.js"); 
```

因此，当我从原始视图创建替代视图时，它将放置在显然无法访问原始视图的脚本文件夹的 MyTheme 文件夹（模块目录以外的一些位置）中。
问题是：**现在如何从替代视图中访问该资源文件夹**？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:44:58.527

听起来您应该使用 ResourceManifest 来注册脚本。查看 Orchard.JQuery 模块如何注册所有不同的 jQuery 文件。一旦你有了它，并且启用了模块，你就可以要求一个具有其注册名称的脚本......

```
Script.Require("somescript"); 
```

# flash - 编译时加载外部 swf，但导出后不加载

> ID：11967892
> 
> 赞同：0
> 
> 时间：2012-08-15T10:38:33.153
> 
> 标签：flash, actionscript-2, external

我正在使用 as1/2 脚本加载外部 swf 文件

```
loadMovieNum("marioStrtfight.swf", 0);

keylistener = new Object();
keylistener.onKeyDown = function ()
{
    if (Key.getCode() == 49)
    {
        _level0.LP_P1.reset();
        _level0.element_mc.life_power.LP_P1.power_now = 300;
        _level0.P1_role.life = 300;
    }
};
Key.addListener(keylistener); 
```

在测试文件加载完美但导出后未加载。当我右键单击屏幕时，我弹出“未加载 Flash 电影”

任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:34:14.103

您不应该使用 loadMovieNum。

您应该创建一个 MovieClip，您将在其中加载外部 swf。加载外部 swf 的最佳方式是 MovieClipLoader。

```
var mclListener:Object = new Object();
mclListener.onLoadInit = mx.utils.Delegate.create(this, onLoadInitEvt);

var mcl:MovieClipLoader = new MovieClipLoader();
mcl.addListener(mclListener);
mcl.loadClip("marioStrtfight.swf", the_name_of_the_clip_you_created);

function onLoadInitEvt():Void {
  trace("load ready");
} 
```

您应该检查外部 swf 与您在 Flash 中测试时的文件夹配置是否完全相同。

# ios - 是否可以仅使用 Javascript 加密/解密 SQLite 数据库？

> ID：11967894
> 
> 赞同：0
> 
> 时间：2012-08-15T10:38:56.683
> 
> 标签：ios, sqlite, cordova, encryption

我正在使用 html5、phonegap (cordova) 和 SQLite（来管理我的数据）制作一个 iOS 应用程序。是否可以加密 SQLite 数据库或其数据，然后仅使用 Javascript 对其进行解密？还有其他方法可以保护我的应用程序数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:47:01.763

可以加密您的数据，但由于 Phonegap 的应用程序源始终对用户可见，因此用户将始终看到如何解密 Sqlite 数据库的方式。

不久前我正在研究这个问题，这是我的问题，下面有一些信息：[如何在 Android Phonegap 移动应用程序中加密 HTML+JS 资产？](https://stackoverflow.com/questions/6160554/how-to-encrypt-htmljs-assets-in-android-phonegap-mobile-app)

到目前为止，我想出的最好的方法是使用 JScrambler.com，它可以混淆你的 JS 代码，这样它就会对用户隐藏你的加密技术。但是，它既不安全也不防弹。高级用户将始终能够将您的 JS 代码转换为他们可以阅读的内容。它只是有助于避免脚本小子和新手......

# c# - WPF 中的进度条样式是老式的。酒吧的增量。如何实现具有 vista 或 windows-7 阴影发光效果的进度条？

> ID：11967898
> 
> 赞同：5
> 
> 时间：2012-08-15T10:39:07.683
> 
> 标签：c#, .net, wpf, progress-bar

WPF 中的进度条样式是老式的。酒吧的增量。如何实现带有 vista 或 windows-7 阴影发光效果的进度条？

[图片 http://quickshare.my3gb.com/download/2.JPG](http://quickshare.my3gb.com/download/2.JPG)

甚至检查了进度条的属性。但是，没有与发光效果相关的属性。

另外，是否有任何动画或与正常进度条不同的东西/

**编辑**

编码：

```
<ProgressBar Height="41" HorizontalAlignment="Left"    Margin="372,215,0,0" Name="progressBar1" VerticalAlignment="Top" Width="150">

</ProgressBar> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T10:51:39.230

自己滚应该不会太难。

创建一个具有标准进度条属性的用户控件

```
Value
Maximum
Minimum 
```

您可以创建一个派生属性，该属性使用 a 公式计算条形的大小：

```
ProgressBarWidth = (Value / (Maximum + Minimum) * ControlWidth) - Padding 
```

更新值、最大值或最小值时会发生变化

将此绑定到进度条控件模板中的“栏”的宽度 - 这样，当 Value 属性更新时，进度条将调整大小。

你的酒吧看起来如何取决于你，但我想你只是想要一堆花哨的填充/渐变/发光效果 - 你可以在 Blend 中添加这些

免责声明：公式可能不正确！

如果您想尝试自己动手，这是我刚刚敲过的一个，它似乎可以正常工作

```
public partial class MyProgressBar : UserControl
    {
        public MyProgressBar()
        {
            InitializeComponent();

            Loaded += new RoutedEventHandler(MyProgressBar_Loaded);
        }

        void MyProgressBar_Loaded(object sender, RoutedEventArgs e)
        {
            Update();
        }

        private static readonly DependencyProperty MaximumProperty = DependencyProperty.Register("Maximum", typeof(double), typeof(MyProgressBar), new PropertyMetadata(100d, OnMaximumChanged));
        public double Maximum
        {
            get { return (double)GetValue(MaximumProperty); }
            set { SetValue(MaximumProperty, value); }
        }

        private static readonly DependencyProperty MinimumProperty = DependencyProperty.Register("Minimum", typeof(double), typeof(MyProgressBar), new PropertyMetadata(0d, OnMinimumChanged));
        public double Minimum
        {
            get { return (double)GetValue(MinimumProperty); }
            set { SetValue(MinimumProperty, value); }
        }

        private static readonly DependencyProperty ValueProperty = DependencyProperty.Register("Value", typeof(double), typeof(MyProgressBar), new PropertyMetadata(50d, OnValueChanged));
        public double Value
        {
            get { return (double)GetValue(ValueProperty); }
            set { SetValue(ValueProperty, value); }
        }

        private static readonly DependencyProperty ProgressBarWidthProperty = DependencyProperty.Register("ProgressBarWidth", typeof(double), typeof(MyProgressBar), null);
        private double ProgressBarWidth
        {
            get { return (double)GetValue(ProgressBarWidthProperty); }
            set { SetValue(ProgressBarWidthProperty, value); }
        }

        static void OnValueChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            (o as MyProgressBar).Update();
        }

        static void OnMinimumChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            (o as MyProgressBar).Update();
        }

        static void OnMaximumChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            (o as MyProgressBar).Update();
        }

        void Update()
        {
            // The -2 is for the borders - there are probably better ways of doing this since you
            // may want your template to have variable bits like border width etc which you'd use
            // TemplateBinding for
            ProgressBarWidth = Math.Min((Value / (Maximum + Minimum) * this.ActualWidth) - 2, this.ActualWidth - 2);

        }          
    } 
```

XAML

```
<UserControl x:Class="WpfApplication1.MyProgressBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" x:Name="uc">
    <Grid>
        <Border Background="White">
            <Border BorderBrush="Gray" BorderThickness="1">
                <Grid>
                    <Grid.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FFE5E5E5" Offset="0" />
                            <GradientStop Color="White" Offset="1" />
                        </LinearGradientBrush>
                    </Grid.Background>
                    <Grid Width="{Binding ProgressBarWidth, ElementName=uc}" HorizontalAlignment="Left">
                        <Grid.Background>
                            <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
                                <GradientStop Color="#FFCBFFD0" Offset="0" />
                                <GradientStop Color="#FF62EF73" Offset="1" />
                                <GradientStop Color="#FFAEE56D" Offset="0.39" />
                            </LinearGradientBrush>
                        </Grid.Background>
                    </Grid>
                </Grid>
            </Border>
        </Border>
    </Grid>
</UserControl> 
```

结果：

![进度条......自产自销！](../Images/5241bedfcd083074ed5c3330e536f212.png)

就像我说的那样，这样的事情很容易，但仍然考虑重新定义模板或使用原始模板，因为它确实支持正确操作系统上的发光

这是在我添加了一个“百分比”依赖属性并绑定到控件模板中之后：

![家有号码！](../Images/21233912800efd0003a7ea3039d77e22.png)

更新代码`Percent`是

```
 Percentage = Math.Min((int)(Value / (Maximum + Minimum) * 100), 100); 
```

编辑2：

我弄乱了填充并添加了一个白色的内边框，使它看起来更有光泽。唯一缺少的是闪亮的动画

顶部是我的控件，底部是默认的 WPF 之一

请记住，所有这些都可以通过编辑进度条控件模板来实现

![哦哦闪亮...](../Images/38b08e7dc1a0c7a78a5f610368cf0202.png)

这是更新的 XAML：

```
<UserControl x:Class="WpfApplication1.MyProgressBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" x:Name="uc">
    <Grid>
        <Border Background="White" BorderBrush="Gray" BorderThickness="1">
            <Border BorderBrush="White" BorderThickness="1">
                <Grid>
                    <Grid.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FFE5E5E5" Offset="0" />
                            <GradientStop Color="White" Offset="1" />
                        </LinearGradientBrush>
                    </Grid.Background>
                    <Grid Width="{Binding ProgressBarWidth, ElementName=uc, FallbackValue=200}" HorizontalAlignment="Left">
                        <Grid.Background>
                            <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
                                <GradientStop Color="#FF8BBA91" Offset="0" />
                                <GradientStop Color="#FF8BBA91" Offset="1" />
                                <GradientStop Color="#FF9ED76A" Offset="0.8" />
                                <GradientStop Color="#FF9ED76A" Offset="0.2" />
                            </LinearGradientBrush>
                        </Grid.Background>
                    </Grid>
                    <Border>
                        <Border.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#89E2E2E2" Offset="0" />
                                <GradientStop Color="#C1FFFFFF" Offset="0.5" />
                                <GradientStop Color="Transparent" Offset="0.52" />
                            </LinearGradientBrush>
                        </Border.Background>
                    </Border>
                    <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Text="{Binding Percentage, ElementName=uc}"></TextBlock>
                </Grid>
            </Border>
        </Border>
    </Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T11:25:58.130

您需要在 Windows 的个性化设置中使用 Aero 主题（即 Windows 7 Basic 或 Windows 7），以获得平滑的进度条和动画发光外观。

Vista 和 Windows 7 具有 Aero 主题。它甚至在 Windows XP 发布时都不存在。它还在 Windows 8 中被删除，以获得更标准的外观。如果您切换到 Windows 经典版，那么您会看到旧的粗大条寻找进度条。

WPF 为 Luna、Aero、Royale、Classic 定义了一组不同的模板......它所做的是查看您的系统当前使用的主题，然后决定使用哪一组 WPF 模板。

因此，当您使用 XP 时，它永远没有机会使用 Aero 模板集。

如果出于某种原因，即使 Windows 未使用 Aero 主题，您也希望进度条以 Aero 外观为主题，那么有 2 个主要解决方案。

解决方案：

您可以强制 WPF 应用程序对其所有控件使用以 Aero 为主题的 WPF 模板：

*   [http://arbel.net/2006/11/03/forcing-wpf-to-use-a-specific-windows-theme/](http://arbel.net/2006/11/03/forcing-wpf-to-use-a-specific-windows-theme/)

*   [http://www.kennethham.com/wp/2010/11/force-wpf-to-use-windows-7aero-theming-in-classic-mode/](http://www.kennethham.com/wp/2010/11/force-wpf-to-use-windows-7aero-theming-in-classic-mode/)

或者

如果您不希望所有应用程序控件都以 Aero 为主题，那么只需从 Aero 主题资源中获取定义 ProgressBar 的 Aero 外观的样式/模板，并将其应用于您的 ProgressBar。

*   [我可以从哪里下载 Microsoft 的标准 WPF 主题？](https://stackoverflow.com/questions/4158678/where-can-i-download-microsofts-standard-wpf-themes-from)

希望任何一种方式都能让您获得发光的进度条....注意，我没有 XP 来测试是否是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-08T04:53:28.873

您可以使用以下方法模仿动画，这是对已接受答案的调整：

```
<Grid Background="LightGray">
    <Grid Width="{Binding ProgressBarWidth, ElementName=uc}" HorizontalAlignment="Left">
        <Grid.Triggers>
            <EventTrigger RoutedEvent="Rectangle.Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetProperty="Background.(GradientBrush.GradientStops)[1].(GradientStop.Offset)" From="-1" To="0" Duration="0:0:1.5" RepeatBehavior="Forever"/>
                        <DoubleAnimation Storyboard.TargetProperty="Background.(GradientBrush.GradientStops)[2].(GradientStop.Offset)" From="0" To="1" Duration="0:0:1.5" RepeatBehavior="Forever"/>
                        <DoubleAnimation Storyboard.TargetProperty="Background.(GradientBrush.GradientStops)[3].(GradientStop.Offset)" From="1" To="2" Duration="0:0:1.5" RepeatBehavior="Forever"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Grid.Triggers>
        <Grid.Background>
            <LinearGradientBrush>
                <GradientStop Color="#FF218ED6" Offset="0.0" />
                <GradientStop Color="#FF4BA5E0" Offset="0.4" />
                <GradientStop Color="#FF8ECCF5" Offset="0.5" />
                <GradientStop Color="#FF4BA5E0" Offset="0.6" />
                <GradientStop Color="#FF218ED6" Offset="1.0" />
            </LinearGradientBrush>
        </Grid.Background>
    </Grid>
</Grid> 
```

预览：

[![在此处输入图像描述](../Images/c3a3f8039b7af326c455f8f90e280824.png)](https://i.stack.imgur.com/6911e.gif)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T10:58:59.130

如果你想改变进度条的外观，你必须重新定义它的（控制）模板。
ms在这里解释了这一点：http:
[//msdn.microsoft.com/en-us/library/ms750638.aspx](http://msdn.microsoft.com/en-us/library/ms750638.aspx)
在编写模板时，要获得发光，您可以使用带有 OuterGlowBitmapEffect 的 BitmapEffect（！软件渲染），但是最好是使用效果（更新）。

如果您使用进度条的效果，也许您不必重新定义模板，它适合您。

请注意，您在网上为您的应用程序提供了很好的免费主题。

# azure - Azure Compute Emulator：是否可以控制单个实例的 IP？

> ID：11967902
> 
> 赞同：6
> 
> 时间：2012-08-15T10:39:24.610
> 
> 标签：azure, iis-express

使用 2012 年 6 月的 Azure SDK、Visual Studio 2010 和 IIS Express，我有一个在 127.255.0.2 上运行的 Web 应用程序。我正在使用 ACS 进行身份验证，并且我的应用程序被配置为该 IP 的依赖方。我在我的解决方案中添加了一个新的工作角色，出于某种原因，这将我的网络应用程序的 IP 推回了 127.255.0.3。这是解决方案中其他地方的第三次更改更改了此 IP，我有点厌倦了必须添加新的依赖方设置并重新运行 STS 向导。

是否有任何正式的方法来控制哪个模拟角色绑定到哪个 IP？如果没有，那么启动/绑定的顺序是否与 Roles 文件夹中项目的顺序相同，如果是这样，那么将我的网络角色称为 Aardvark 之类的，以确保它始终是第一个绑定的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T12:40:12.230

我不知道我的经历是否完全符合描述的场景，但我认为它至少可以成为一种灵感。

在我的解决方案中，我有四个不同的云服务，每个都有一个 Web 角色，每个人都必须知道其他服务的 url 才能正常工作。在生产中，我确切地知道我所有服务的 url，我可以通过其域名引用每个服务。但是当需要进行调试时，这可能是一场噩梦，因为没有将云服务绑定到特定 IP 地址（和端口）的选项，并且 DevFabric 无法保证特定云服务在两个不同的调试会话之间保持相同的地址.

我用一种简单的技术解决了这个问题：

在我的 WebRoles 中，我总是提到像**debug.myservice.com**或**debug.myotherservice.com**这样的域名。

使用**主机**文件解析本地 IP 地址，您可以在以下位置找到：

```
windows/system32/drivers/etc/hosts 
```

通过附加一些简单的语句，例如：

```
127.0.0.1 debug.myservice.com
127.0.0.2 debug.myotherservice.com 
```

这解决了问题，但可能非常无聊，因为每次启动新的调试会话时都需要手动更新**主机文件。**

但是有一个简单而强大的解决方案。您知道您可以设置一个简单的启动脚本，该脚本在每次云服务初始化时执行，您可以在此处找到详细信息：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh180155.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh180155.aspx)

当您在云端或模拟器中运行时，您也可以运行不同的脚本。

我所做的是运行一个脚本，每次我的云服务在模拟器（并且仅在模拟器）环境中初始化时自动更新主机文件。

这里的脚本：

```
IF "%ComputeEmulatorRunning%" == "true" (
    cd Startup
    UpdateDnsHostsOnDebugEnv.exe MyCompany.MyService.Site.WebRole debug.myservice.com
    cd..
) 
```

在这里您需要添加到**ServiceDefinition.csdef**以便在启动时运行脚本：

```
<Startup>
    <Task commandLine="Startup\UpdateDnsHosts.cmd" executionContext="elevated" taskType="foreground">
       <Environment>
           <Variable name="ComputeEmulatorRunning">
               <RoleInstanceValue xpath="/RoleEnvironment/Deployment/@emulated" />
           </Variable> 
       </Environment>
     </Task>
</Startup> 
```

请注意**UpdateDnsHostsOnDebugEnv.exe**程序的使用。这是我编写的一个简单的控制台应用程序，它只需运行 csrun.exe 并解析结果以提取角色的本地端点地址并更新**主机**文件。

希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T10:48:27.197

为什么要更改该 IP 地址？这仅在内部使用以避免 IP/端口冲突。您的所有角色只能通过 127.0.0.1:[port] 访问，这是您应该用作依赖方应用程序基地址的地址。127.255.0.XX 地址是位于 Compute Emulator 的模拟负载均衡器后面的内部地址。

没有正式或非正式的方式来控制计算模拟器的实例/角色的实例 IP 地址。另外，即使有办法做到这一点，我也不建议使用它！

您始终可以通过[RoleEnvironment.CurrentRoleInstance.InstanceEndpoints](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.currentroleinstance.aspx)属性获取在云服务中配置的任何端点的正确 IP 地址和端口。

在此处阅读有关[IP 地址和端口分配的信息](http://msdn.microsoft.com/en-us/library/windowsazure/hh403975.aspx)。

**更新**

尽管您的应用程序在 IIS Express 中绑定到 127.255.0.XX（模拟直接 IP 地址，又名 DIP），但对您的应用程序的实际调用应通过 127.0.0.1:81（模拟虚拟 IP 地址，又名 VIP）（其中仅端口更改）。这是 Visual Studio 启动应用程序时的默认加载页面。开发 Fabric（又名 Compute Emulator）模拟了负载均衡器，它侦听 127.0.0.1:81（模拟 VIP）并将流量重定向到适当的实例，这些实例分布在 127.255.0.XX（模拟 DIP）上。这就是为什么在使用计算模拟器和配置 ACS 依赖方时必须始终使用 127.0.0.1 的原因。您所做的任何其他事情都是错误的，并且不代表 Azure 环境。

您可以通读[这个](http://blogs.staykov.net/2011/12/windows-azure-basics-part-1-of-n.html)和[那个](http://blogs.staykov.net/2012/03/windows-azure-basics-part-2-of.html)博客条目，以了解 Windows Azure 的术语和网络。

# ios - NSDateComponent 中的小时是 12 还是 24 小时格式？

> ID：11967906
> 
> 赞同：19
> 
> 时间：2012-08-15T10:39:47.387
> 
> 标签：ios, objective-c, nsdate, nsdatecomponents

NSDateComponent 的小时部分是 12h 还是 24h 格式？我在文档中找不到任何关于此的内容...

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-15T10:47:32.827

现在是 24 小时，在公历上。

为什么？文档没有明确说明；但是，它确实声明这些值适用于使用的任何日历。am/pm 只是一种不同的表示法——使用 am/pm 的国家仍然每天有 24 小时，如果不同，它们只是在书写。

此外，如果您查看可用的单位常量，您会注意到没有“am/pm”常量。同样，这是因为 am/pm 是本地化符号，而不是公历的属性。

编辑：如果你问这个是因为你想以可读的形式输出时间，不要使用 NSDateComponents——使用 NSDateFormatter。

# arm - 将字节添加到寄存器值的末尾

> ID：11967907
> 
> 赞同：0
> 
> 时间：2012-08-15T10:39:48.477
> 
> 标签：arm

好的，所以基本上我正在尝试将两个字符串逐个字符地添加在一起。

我遍历第一个字符串的每个字符，直到我到达结尾

然后我也遍历下一个字符串的每个字符

我的问题是尝试将下一个字符串的字符存储到第一个字符串（在 0 终止字节之前）。

```
strcat
    ADD R4, R4, #1
    LDRB R0, [R1], #1
    CMP R0, #0
    BNE strcat
    SUB R4, R4, #1      ;take byte pointer 1 step back to ignore 0
    B stradd

stradd  
    LDRB R0, [R2], #1   ;otherwise we would include the 0 char
    STRB R0, [R1], R4
    CMP R0, #0
    ADD R4, R4, #1
BNE stradd      ;keep adding chars 
```

到目前为止是我的方法，它试图连接 R1 + R2

**问题**

如何更改 STRB（或完全更改其他方法）以确保它开始在 R1 中字符串的最后一个正确字符的地址处保存字节

**示例** 如果 R1 中的字符看起来像 'h' 'e' 'l' 'l' 'o' 0 而 R2 中的字符看起来像 'y' 'u' 'o'

该方法应将 R1 中的字符更改为 'h' 'e' 'l' 'l' 'o' 'y' 'u' 'o' 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:46:35.627

从那以后，我问过一位提供此解决方案的朋友

无需使用 R4 来跟踪 char 位置。相反，排除第一个字符串的 0 并连接的更优雅的解决方案是：

```
strcat
    LDRB R0, [R1], #1
    CMP R0, #0
    BNE strcat
SUB R1, R1, #1

stradd  
    LDRB R0, [R2], #1   ;otherwise we would include the 0 char
    STRB R0, [R1], #1
    CMP R0, #0
    BNE stradd      ;keep adding chars 
```

# python - Pythonbrew 在 Ubuntu 上安装 ZSH

> ID：11967908
> 
> 赞同：1
> 
> 时间：2012-08-15T10:39:57.510
> 
> 标签：python, ubuntu, zsh, pythonbrew

当我的外壳是 ZSH 时，任何人都可以了解如何安装 pythonbrew / pythonz。我在 ubuntu 12.04 上。

我遵循 curl 的标准安装，然后将该行添加到 ~/.bashrc 但它会在新的 zsh 终端中返回一个未知命令。

```
[[ -s $HOME/.pythonbrew/etc/bashrc ]] && source $HOME/.pythonbrew/etc/bashrc 
```

[PythonBrew 自述文件](https://github.com/utahta/pythonbrew#readme)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:41:07.560

不幸的是，bashrc 文件不适用于 zsh。

以python2.5为例，这似乎可行：

```
sudo ~/.pythonbrew/bin/pythonbrew install 2.5 
```

然后调用python2.5：

```
~/.pythonbrew/pythons/Python-2.5/bin/python 
```

为了方便设置：

```
$PATH=$HOME/.pythonbrew/pythons/Python-2.5/bin:$PATH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:00:28.433

zsh 不读取 ~/.bashrc - 尝试将相同的代码放入 ~/.zshrc

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-06T05:37:41.660

您可以在 zshrc 中尝试[emulate](http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html)命令。

```
emulate sh -c '[[ -s $HOME/.pythonbrew/etc/bashrc ]] && . $HOME/.pythonbrew/etc/bashrc' 
```

我有一个不同的设置（我的仿真调用了一个 functionrc，它具有可用于 bash 和 zsh 的功能），但我认为这会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-28T09:15:09.523

万一有人偶然发现这个老问题：

As I write this (late 2017), `pythonbrew` is unmaintained and `pythonz` appears to be in maintenance-only mode.

At this time I would strongly suggest users switch to the actively maintained [`pyenv`](https://github.com/pyenv/pyenv) instead.

And just for the record, `pyenv` fully supports bash, zsh and fish.

# vb.net - 自动递增数字和字母

> ID：11967913
> 
> 赞同：0
> 
> 时间：2012-08-15T10:40:23.360
> 
> 标签：vb.net

我有一个带有字母数字的文本框 - 001 ,002、003、numbers.text 和一个名为 suffix.text 的第二个文本框。我如何能够自动增加后缀，所以如果用户在 numbers.text 中输入 001 作为第一个条目，然后他们添加的下一个值也是 001，我需要 suffix.text 自动显示这一点。

所以它看起来像这样：

```
number.text     suffix.text
001
001                 a
001                 b
002 
002                 a 
```

等等。

# android - 如何在phonegap中将sqlite事务标记为完成

> ID：11967914
> 
> 赞同：2
> 
> 时间：2012-08-15T10:40:33.267
> 
> 标签：android, sqlite, cordova

我有以下代码：

```
 db.transaction(
    function runQuery(tx) {
      tx.executeSql(
        'delete from meetings where id='+id
      );
      log('delete from meetings where id='+id);
    },
    function(e) {
      log('failed to delete from database: '+e.code);
    },
    function() {
      log('meeting deleted from db: '+id);
      setTimeout(callback, 1);
    } 
  ); 
```

在回调中，我查询了会议表，我刚刚删除的行仍然存在。这是超时是否为 1、1000 或其他。

我如何告诉 phonegap 请关闭事务以便数据库正确同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:37:37.247

对于任何有同样问题的人，这对我有用。[http://osdir.com/ml/phonegap/2012-12/msg00429.html](http://osdir.com/ml/phonegap/2012-12/msg00429.html)

```
db.transaction(function(tx) {tx.executeSql("Delete FROM myTable where id=?",[1]);}, errorDeleteCB,successDeleteCB); 
```

我看到的唯一真正的区别是使用 ? 和 [1]

# symfony-1.4 - 如何使用 composer 安装 Symfony 1.4？

> ID：11967920
> 
> 赞同：8
> 
> 时间：2012-08-15T10:40:55.890
> 
> 标签：symfony-1.4, composer-php

我有一些遗留的 Symfony 1.4 项目，我想用 composer.json 文件来增强它们的依赖项。

我设法将作曲家配置为使用“插件”目录而不是“供应商”。然而，根据 Symfony 1.4 文档，理想情况下，该库应该位于我的项目根目录之外的“lib/vendor”中。

如果我要在我的 composer.json 中配置一个指向最新 1.4.x svn 的自定义存储库包，我将如何获取它以便安装到“lib/vendor”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T10:55:17.723

事实上，在外部拥有 symfony 并不是什么大问题`lib/vendor`。建议将其放在此文件夹路径中，因为这样会自动加载。在 Composer 中使用`vendor-dir`，您可以配置放置供应商库的位置。但这是一个设置为*root-only*的配置，因此不能根据需要库进行配置（至少我是这么认为的）。

但是你可以把 symfony 放在你的`plugins/`目录中，然后对你的应用说你想在这里自动加载所有东西，使用`apps/frontend/config/autoload.yml`：

```
autoload:
  symfony:
    path:      %SF_PLUGIN_DIR%/symfony/lib
    recursive: on 
```

不要忘记更改您的路径`config/ProjectConfiguration.class.php`：

```
<?php

require_once dirname(__FILE__).'/../plugins/symfony/lib/autoload/sfCoreAutoload.class.php'; 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:36:02.280

您可以编写自己的[作曲家安装程序](http://getcomposer.org/doc/articles/custom-installers.md)。

# c# - 如何通过代码将复选框添加到滚动查看器？

> ID：11967923
> 
> 赞同：1
> 
> 时间：2012-08-15T10:41:02.567
> 
> 标签：c#, windows-phone-7, silverlight-toolkit

```
<Grid>
                <ScrollViewer Height="391" HorizontalAlignment="Left" Margin="10,10,0,0" Name="scrollViewer1" VerticalAlignment="Top" Width="427" >
                    <Grid Height="733">

                    </Grid>
                </ScrollViewer>
                <TextBox Height="76" HorizontalAlignment="Left" Margin="19,453,0,0" Name="textBox1" Text="TextBox" VerticalAlignment="Top" Width="254" />
                <Button Content="Button" Height="77" HorizontalAlignment="Left" Margin="290,450,0,0" Name="button1" VerticalAlignment="Top" Width="136" />
            </Grid> 
```

当用户单击按钮时，我想在滚动查看器中添加一个复选框。每次点击时，一个新的复选框也应该出现在前一个复选框的下方。而且，ScrollViewer 是完成这项任务的理想控件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:04:51.730

如果您希望复选框出现在彼此下方，您应该使用 StackPanel 而不是 Grid 作为 SrollViewer 内的容器：

```
 <ScrollViewer Height="391" HorizontalAlignment="Left" Margin="10,10,0,0" Name="scrollViewer1" VerticalAlignment="Top" Width="427" > 
                <StackPanel Name="CheckBoxContainer">

                </StackPanel> 
   </ScrollViewer> 
```

在您的点击事件中，您添加复选框

```
 CheckBoxContainer.Children.Add(new CheckBox()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T10:46:39.510

您需要将复选框添加到包含在 ScrollViewer 中的网格中。这可以使用类似于以下的代码来完成：

```
myGrid.Children.Add(new CheckBox()); 
```

假设“myGrid”是您的网格的名称。

当您有一个有限的区域需要包含通常不适合该区域的内容时，ScrollViewer 是一个很好的控件。因为我不知道你的应用程序做什么，它看起来像什么，或者它是如何工作的，所以从设计的角度很难说它是否是正确的控制。

但是，鉴于用户可能会添加 10 个（甚至 100 个）复选框，那么您可能希望这不会超出您希望的范围来扩展表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:06:33.223

对于继续添加复选框，请使用 StackPanel 而不是 Grid

```
<Grid>
    <ScrollViewer Height="391" HorizontalAlignment="Left" Margin="10,10,0,0" Name="scrollViewer1" VerticalAlignment="Top" Width="427" >
        <StackPanel x:Name="stackPanel">

        </StackPanel>
    </ScrollViewer>
    <TextBox Height="76" HorizontalAlignment="Left" 
             Margin="19,453,0,0" Name="textBox1" Text="TextBox" VerticalAlignment="Top" Width="254" />
    <Button Content="Button" Height="77" HorizontalAlignment="Left" 
            Margin="290,450,0,0" Name="button1" Click="button1_Click" VerticalAlignment="Top" Width="136" />
</Grid> 
```

然后：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    stackPanel.Children.Add(new CheckBox() { Content = "Hi"});
} 
```

# java - 从 WebApplicaiton 到 JavaApplication 的通信哪种方法更好？

> ID：11967924
> 
> 赞同：0
> 
> 时间：2012-08-15T10:41:05.570
> 
> 标签：java, web-services, servlets, web

我有 JavaApplication，它在启动时会打开套接字并监听连接（如服务器）。我也有 WebApplication，它应该从 JavaApplication 中获取一些数据并将其显示在 WebBrowser 中。为了实现这一点，我想：

1.  使用 Servlet 我可以使用套接字连接到该 JavaApplication 并获取数据
2.  创建 WebService：WebApplication 将向 WebService 发送请求，WebService 将打开套接字并连接到 JavaApplication。
3.  你的方法

所有这些都位于同一台服务器中。

第二种方法是否看起来已经过时了，因为最终我打开了套接字，所以我可以从 Servlet 中做到这一点，而不是在中间与 WebService 交谈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:48:13.817

这个问题没有答案——根本没有任何信息可以作为这个决定的依据。

编写 Web 服务需要大量工作，因此方法 #1 将避免“无用”工作。另一方面，它将使 Java 服务可供其他用途使用，因为其他应用程序（甚至其他 Web 服务）可以使用该 Web 服务与其通信。

因此，如果这项工作也对其他人有用，请将其实现为 Web 服务。这也将允许您自行部署 Web 服务，因此对 Java 应用程序的访问将不取决于您的 Web 应用程序是否正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:44:51.197

IMO，如果你想“正确”地做到这一点，你应该计划至少以两种方式实施它。为此，您必须在 Java 应用程序中定义您的“服务”，而与您随后将使用的通信机制无关。

一旦定义了该服务接口，您需要从一大堆可能性中选择您要使用的两种方式：

*   文件
*   数据库表
*   原始套接字
*   管理系统
*   AMQP
*   网络套接字
*   基于 SOAP 的网络服务
*   RESTful Web 服务
*   其他很多，但你明白了

正如另一个答复中指出的那样，没有普遍的“正确”选择。该决定将取决于您正在解决的问题的具体情况。一旦你选择了两个可能性，你就实现了这两个中的最佳候选。如果你真的需要第二个，你也可以实现它，或者只是保存它以供以后使用，因为你知道你的设计很容易适应这种增长:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:58:22.253

首先，是否有可能直接集成“服务器”Java 代码？制作一个可调用的库？

其次，对 servlet 的请求与从服务器获取数据之间的关系是什么？您是否为每个请求获得不同的数据？

一般来说，我不喜欢为每个请求打开和关闭与服务器通信的套接字 - 似乎更像是一个这样的连接池的情况。

我的直觉，对您的要求知之甚少。编写一个线程安全的 Java 组件，它打开一个套接字并获取一些数据。拥有一个 servlet 请求可以使用并返回到池中的对象池。

Java EE 对 servlet 和 EJB 中允许的内容有一些限制，您的应用服务器可能有一些“工作者”概念，您实际上可以从中使用连接器对象。

# sencha-touch - 如何在sencha touch 2中获取当前活动的轮播项目

> ID：11967925
> 
> 赞同：2
> 
> 时间：2012-08-15T10:41:14.733
> 
> 标签：sencha-touch, sencha-touch-2, carousel

目前我有一个带有 3 个项目的轮播，名为第 1 页、第 2 页和第 3 页，我要做的是在用户通过滑动动画从第 1 页切换到第 2 页时为第 2 页制作粗体文本。有人可以给我一个解决方案如何实现这个目标。谢谢！

**应用程序.js**

```
Ext.Loader.setPath({
'Ext': 'sdk/src'
});

Ext.application({
controllers: ["Main"],

name: 'Sencha',

views: ['Main'],

icon: {
    57: 'resources/icons/Icon.png',
    72: 'resources/icons/Icon~ipad.png',
    114: 'resources/icons/Icon@2x.png',
    144: 'resources/icons/Icon~ipad@2x.png'
},

phoneStartupScreen: 'resources/loading/Homescreen.jpg',
tabletStartupScreen: 'resources/loading/Homescreen~ipad.jpg',

launch: function() {
    // Destroy the #appLoadingIndicator element
    Ext.fly('appLoadingIndicator').destroy();

    // Initialize the main view
    Ext.Viewport.add(Ext.create('Sencha.view.Main'));
},

onUpdated: function() {
    Ext.Msg.confirm(
        "Application Update",
        "This application has just successfully been updated to the latest version. Reload now?",
        function() {
            window.location.reload();
        }
    );
}
}); 
```

**用于查看的 Main.js**

```
Ext.define("Sencha.view.Main", {
extend: 'Ext.Carousel',
xtype: 'mainview',

config: {
    id: 'carousel',

    fullscreen: true,

    indicator: false,

    directionLock: true,

    items: [
    {
        id: 'page1',
        xtype: 'panel',
        html: 'Page 1'
    },

    // Carousel 2
    {
            id: 'page2',
            xtype: 'panel',
            html: 'Page 2',
            initialize: function() {
                var carouselId = Ext.getCmp('carousel');
                var carouselIndex = carouselId.getActiveIndex();
                console.log(carouselIndex);
            }
    },

    // Carousel 3
    {
            id: 'page3',
            xtype: 'panel',
            html: 'Page 3'
    },
    ]

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:33:42.860

您可以在每个轮播项目上使用激活事件。因此，在您的控制器的控制配置中为您的第二页的 id 添加它，并在相应的函数中将您需要的任何代码放入其中，它会在激活特定轮播项目时运行。

这是一个例子：

```
new Ext.Carousel({
   fullscreen : true,
   defaults : {
      listeners : {
         activate : function() {
            console.log('activate');
         }
      }
   },
   items: [ 
      {
         html : 'One'
      },
      {
         html : 'Two'
      },
      {
         html : 'Three'
      }
    ]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:17:04.563

`getActiveItem()`轮播的用户方法

# python - Python：合并字典列表

> ID：11967927
> 
> 赞同：5
> 
> 时间：2012-08-15T10:41:28.900
> 
> 标签：python, list, dictionary, merge, iterator

我在字典中有列表：

```
Number_of_lists=3           #user sets this value, can be any positive integer
My_list={}
for j in range(1,Number_of_lists+1):
  My_list[j]=[(x,y,z)] 
```

`Number_of_lists`是用户设置的变量。在事先不知道用户设置的值的情况下，我希望最终获得所有字典列表的合并列表。例如，如果`Number_of_lists=3`和对应的列表是`My_list[1]=[(1,2,3)]`, `My_list[2]=[(4,5,6)]`，`My_list[3]=[(7,8,9)]`则结果将是：

```
All_my_lists=My_list[1]+My_list[2]+My_list[3] 
```

其中： `All_my_lists=[(1,2,3),(4,5,6),(7,8,9)]`.

所以我想做的是尽可能地自动化上述过程：

`Number_of_lists=n #where n can be any positive integer`

到目前为止，我有点迷失了，试图使用迭代器来添加列表并且总是失败。我是 python 初学者，这是我的一个爱好，所以如果你回答，请在你的回答中解释所有内容，我这样做是为了学习，我不是要求你做我的作业:)

## **编辑**

@codebox（请看下面的评论）正确地指出，`My_List`我的代码中显示的实际上是字典而不是列表。如果您使用任何代码，请小心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:47:27.983

如果您只关心最终列表，并且实际上并不需要`My_list`（您应该重命名，因为它是一本字典！），那么您可以这样做：

```
Number_of_lists=3
result = []
for j in range(1,Number_of_lists+1):
    result += (x,y,z) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:48:20.900

使用列表理解：

```
>>> Number_of_lists=3 
>>> My_list={}
>>> for j in range(1,Number_of_lists+1):
      My_list[j]=(j,j,j)
>>> All_my_lists=[My_list[x] for x in My_list]

>>> print(All_my_lists)
[(1, 1, 1), (2, 2, 2), (3, 3, 3)] 
```

`All_my_lists=[My_list[x] for x in My_list]`相当于：

```
All_my_lists=[]
for key in My_list:
   All_my_lists.append(My_list[key]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T10:56:42.390

`All_my_lists`先生成然后再生成可能更容易`My_list`。

### 建造`All_my_lists`

使用[列表理解](http://www.secnetix.de/olli/Python/list_comprehensions.hawk)并[`range()`](http://docs.python.org/library/functions.html#range)生成`All_my_lists`：

```
>>> num = 3  # for brevity, I changed Number_of_lists to num
>>> All_my_lists = [tuple(range(num*i + 1, num*(i+1) + 1)) for i in range(0, num)]
>>> All_my_lists
[(1, 2, 3), (4, 5, 6), (7, 8, 9)] 
```

或者，我们可以使用[itertools 配方](http://docs.python.org/library/itertools.html#recipes)`grouper()`列表中的函数，这将产生更简洁的代码：

```
>>> All_my_lists = list(grouper(num, range(1, num*3+1)))
>>> All_my_lists
[(1, 2, 3), (4, 5, 6), (7, 8, 9)] 
```

### 建造`My_lists`

然后我们可以使用[`dict`构造函数](http://mainlydata.kubadev.com/python/the-python-dict-constructor/)和列表理解并[`enumerate()`](http://docs.python.org/library/functions.html#enumerate)构建派生`My_list`自`All_my_list`：

```
>>> My_lists = dict((i+1, [v]) for i,v in enumerate(All_my_lists))
>>> My_lists
{1: [(1, 2, 3)], 2: [(4, 5, 6)], 3: [(7, 8, 9)]}
>>> My_lists[1]
[(1, 2, 3)]
>>> My_lists[2]
[(4, 5, 6)]
>>> My_lists[3]
[(7, 8, 9)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T11:06:08.457

您可以尝试一种更实用的方法，方法是`Number_of_lists`使用以下命令转换为一系列键`range`并从字典中选择`map`：

```
My_list={1:[1,2,3], 2:[4,5,6], 3:[7,8,9], 4:[10,11,12]}
Number_of_lists=3
All_my_lists=map(lambda x: tuple(My_list[x]), range(1, Number_of_lists+1)) 
```

示例输出：

```
>>> All_my_lists
[(1, 2, 3), (4, 5, 6), (7, 8, 9)] 
```

# java - jWebsocket未连接错误

> ID：11967933
> 
> 赞同：0
> 
> 时间：2012-08-15T10:42:13.377
> 
> 标签：java, websocket

在我的jsp文件中，我有

```
 <script type="text/javascript" src="/resources/scripts/jWebSocket.js"></script>

  <script type="text/javascript">
  //jws.browserSupportsWebSockets checks if web sockets are available
  //either natively, by the FlashBridge or by the ChromeFrame.
  if( jws.browserSupportsWebSockets() ) {
  jWebSocketClient = new jws.jWebSocketJSONClient();
  // Optionally enable GUI controls here
  } else {
  // Optionally disable GUI controls here
  var lMsg = jws.MSG_WS_NOT_SUPPORTED;
  alert(lMsg);
 }

  var lURL = jws.getDefaultSSLServerURL() + "/;timeout=360000";
 alert(lURL);

     /* var lRes = jWebSocketClient.broadcastText(
    "",   // broadcast to all clients (not limited to a certain pool)
    lMsg  // broadcast this message
  );

  alert(lRes.code);
   */

  function broadcast() {

        var lMsg = "This is test message";
        var lTarget = "*";
        if( lMsg.length > 0 ) {
            //log( USR, OUT, lMsg );
            var lRes;
            if( !lTarget || lTarget == "*") {
                alert(lMsg);
                lRes = jWebSocketClient.broadcastText(
                    "",         // broadcast to all clients (not limited to a certain pool)
                    lMsg        // broadcast this message
                );
            } else {
                lRes = jWebSocketClient.sendText(
                    lTarget,    // broadcast to all clients (not limited to a certain pool)
                    lMsg        // broadcast this message
                );
            }
            // log error only, on success don't confuse the user
            if( lRes.code != 0 ) {
                alert(lRes.msg);
                //log( SYS, OUT, "broadcast: " + lRes.msg );
            }
            // eMessage.value = "";
        }
        //doFocus( eMessage );
    }     

   </script> 
```

它不会转到 if(jws.browserSupportsWebSockets()) 的 else 部分。这意味着浏览器支持 websockets。

最后它转到 if( lRes.code != 0 ) 并警告“未连接”

我是不是错过了什么。请帮忙

在我的终端窗口中，我收到了这条消息

```
 TCPEngine: SSL engine 'tcp0' started' at port 9797 with default timeout infinite.
 2012-08-15 09:52:45,979 DEBUG - JWebSocketFactory: Starting servers...
 2012-08-15 09:52:45,980 INFO  - TokenServer: Token server 'ts0' started.
 2012-08-15 09:52:45,980 INFO  - JWebSocketFactory: jWebSocket server startup complete 
```

这意味着服务器正在运行。

当我从下面的代码中提醒 lURL

```
 var lURL = jws.getDefaultSSLServerURL() + "/;timeout=360000"; in my jsp file. 
```

它打印

```
 wss://localhost:9797/jWebSocket/jWebSocket/;timeout=360000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:40:26.523

是的。您错过了登录调用。添加以下行（而不是您所在的`alert(lUrl)`位置）：

```
jWebSocketClient.logon( lURL, "guest", "guest", {

   OnOpen: function( aEvent ){
   // something to do when connection is established
   }

   OnMessage: function( aEvent, aToken ){
   // something to do when a message is recieved
   }
} 
```

第一个`"guest"`是用户名，第二个是密码。如果您尚未更改服务器中的 jwebsocket.conf 文件，则应该有一个具有这些凭据的用户。

让知道这是否有帮助

# php - $_POST 返回 {"readyState":4,"status":200,"statusText":"success"}

> ID：11967935
> 
> 赞同：-1
> 
> 时间：2012-08-15T10:42:40.083
> 
> 标签：php, jquery, ajax, post

尝试使用时：

```
$.ajax({
    type: "POST",
    url: surl,
    data: {funcToCall: "getHello",val:"Luke"},
    dataType: "jsonp",
    jsonp : "callback",
    jsonpCallback: "getHelloResponse"

}).success(function(data){
    alert(JSON.stringify(data));
}).
    error( function (data){
    alert(JSON.stringify(data));
}); 
```

我收到：

```
{"readyState":4,"status":200,"statusText":"success"} 
```

但是当省略默认类型为“GET”的类型时，它工作正常！

目标 php 页面被编辑以处理 POST 和 GET。

**编辑：**

所以实际的问题是：为什么 ajax 帖子没有返回“Hello Luke！”的预期结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:07:31.703

成功和错误预期为 $.ajax 设置，它返回 jqXhr，例如您可以在其上执行 .done()，但不是成功或错误。

这是工作变体：

```
$.ajax({
    type: "POST",
    url: surl,
    data: {funcToCall: "getHello",val:"Luke"},
    dataType: "jsonp",
    jsonp : "callback",
    jsonpCallback: "getHelloResponse",
    success: function(data){
        alert(JSON.stringify(data));
    }
    error: function (data){
        alert(JSON.stringify(data));
    }
}); 
```

这是完成的示例，如果您可以检查执行是否正常通过或出现问题..等。

```
$.ajax({
    url: "file.php",
    context: document.body
}).done(function() { 
    ($this).addClass("greenBody"); // This is the context - document.body
}); 
```

# ios - 导航到 MKMapView 上的注释位置

> ID：11967936
> 
> 赞同：0
> 
> 时间：2012-08-15T10:42:42.010
> 
> 标签：ios, mkmapview, mapkit, coordinates, mkannotation

我正在开发一个 iOS 应用程序。在这个应用程序中，我有一种视图类型，其中包括向当前选择的公司商店提供 MKMapView 地图的其他信息；商店的位置通过图钉绘制在地图上。该图钉有一个自定义的 MKAnnotationView，我在其中添加了一个详细信息披露按钮。我想要做的是当用户按下按钮时，呈现一个带有一些选择的弹出窗口 - 比如去那个特定商店的网站。

我想在那里实现的选项之一是从用户的当前位置导航到商店的位置。我希望应用程序做的是提供一个应该说 smith 的选项。比如“导航到位置”，点击它会打开 GoogleMaps，选择导航到位置选项，选择 CurrentLocation 作为“开始”，选择存储在 pin 坐标中的商店位置作为“结束”。可以这样做吗，因为我还没有找到解决方案？如果有，怎么做？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:22:56.387

我用这段代码做到了：

```
- (void) openBrowser:(id)sender
{ 
    NSString *launchUrl=@"";
    launchUrl= [launchUrl stringByAppendingString:@"http://maps.google.com/maps?daddr="];
    NSString *tmpLat = [[NSString alloc] initWithFormat:@"%g", self.newRegion.center.latitude];
    NSString *tmpLong = [[NSString alloc] initWithFormat:@"%g", self.newRegion.center.longitude];
    NSString *llat=[tmpLat stringByAppendingString:[@"," stringByAppendingString:tmpLong]];
    launchUrl=[@"http://maps.google.com/maps?daddr=" stringByAppendingString:llat];
    launchUrl=[launchUrl stringByAppendingString:[@"&saddr=" stringByAppendingString:@"Current Location"]];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[launchUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];
} 
```

`openBrowser`是我使用详细信息披露按钮调用的方法。`maps.google.com`我发现手机上安装的谷歌地图应用程序默认处理指向的网址；对于从 A 点到 B 点的路线，网址必须类似于：

[http://maps.google.com/maps?daddr=whatever&saddr=whatever](http://maps.google.com/maps?daddr=whatever&saddr=whatever)

daddr=目的地

saddr= 来源

# objective-c - Obj-c/Cocoa touch：有 UITableViewCell - CellTextField 只接受数字字符吗？

> ID：11967937
> 
> 赞同：0
> 
> 时间：2012-08-15T10:42:45.740
> 
> 标签：objective-c, ios, cocoa-touch

我希望 UITableViewCell 中的 CellTextField 只接受数字字符。我以编程方式创建 UITableViewCells，如下所示：

```
 -(UITableViewCell*) getCellContentView: (NSString*) cellIdentifier {

        ...

        UITableViewCell *cell = [[UITableViewCell alloc] initWithFrame:cellFrame reuseIdentifier:cellIdentifier];

        ... 

        CellTextField *txt;  
        txt = [[CellTextField alloc] initWithFrame:amountFrame];

        ... //here we should setup a delegate or similar to handle char validation for txt

        [cell.contentView addSubview:txt];
        return cell;
    } 
```

对于 UITextField 组件，我们有一个委托“shouldChangeCharactersInRange”，但我找不到 CellTextFields 的等价物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:47:14.123

试试这个

。H

```
 @interface YourClass : ParentClass <UITextFieldDelegate>{
  NSNumberFormatter *integerNumberFormatter;
  }
  @end 
```

.m

```
-(void)viewDidLoad
{
      [integerNumberFormatter setMaximumFractionDigits:0];
       yourTextField.delegate = self;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSString* proposedString = [textField.text stringByReplacingCharactersInRange:range withString:string];
    NSNumber *proposedNumber = [integerNumberFormatter numberFromString:proposedString];
    if (proposedNumber) {
        NSString *integerString = [integerNumberFormatter stringFromNumber:proposedNumber];
        if ([integerString isEqualToString:proposedString]) {
            // proposed string is an integer
            return YES;
        }
    }

    return NO;
} 
```

# c# - 从 Sage 50 中的字段中提取数据到应用程序中

> ID：11967938
> 
> 赞同：0
> 
> 时间：2012-08-15T10:42:48.277
> 
> 标签：c#, opayo, sage-erp, sage50

这与其说是一个问题，不如说是一个“有人能指出我正确的方向吗”。

我接到了一项工作任务，将 Sage 50 中产品的某个字段中的一些数据引入我们的应用程序（用 C# 编写以供参考）。该信息是静态的，不会用于任何形式的计算，它只是一个产品的描述，IE Pack of 10。

我以前从未对 Sage 做过任何事情，我想知道是否有人可以阐明我需要朝哪个方向发展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:06:47.547

安装 Sage ODBC 驱动程序，然后使用[System.Data.Odbc](http://msdn.microsoft.com/en-us/library/system.data.odbc%28v=vs.100%29.aspx)中的类进行连接和查询。

# asp.net - 为什么我的按钮不对齐

> ID：11967940
> 
> 赞同：-2
> 
> 时间：2012-08-15T10:42:50.050
> 
> 标签：asp.net, html

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Menu.aspx.cs" Inherits="Menu" %>
<link rel="stylesheet" href="Styles/Menu.css" type="text/css" />

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body style="position:absolute; margin: 0px; width:100%; height:100%;">
<form id="form1" runat="server">
<div style="text-align:center">
    <p id="userID">User ID</p>
</div>
<br /><br />
<div id="content" style="text-align:center; position:relative;">
<asp:Button text="MS Walking Scale Test" runat="server" /><br />
<asp:Button Text="Get Results" runat="server"/>
 <asp:Button ID="Button1" style="top:80%; position:relative;" Text="LogOut" runat="server" />
</div>
</form>
</body>
</html> 
```

![页面截图](../Images/daab9c0197477a0228146dda36b153cd.png)

为什么我的按钮没有均匀居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:49:10.627

也许是因为 div 太短了？[在这里](http://jsfiddle.net/y2w8j/)寻找重现问题的尝试。[1](http://jsfiddle.net/y2w8j/) 按钮的默认样式应内联显示。由于按钮不能在一行上显示其完整尺寸，因此它们已损坏且未居中。您还应该将 text-align center 替换为更常见的对齐 div 中心的方法。和内联的按钮。

可以这样做

我建议您使用 css 而不是 style 属性。

# javascript - 输入文本的掩码

> ID：11967949
> 
> 赞同：0
> 
> 时间：2012-08-15T10:43:19.110
> 
> 标签：javascript, jquery, html

如何制作面具，输入时间 11:24，这将在 IE7、IE8、IE9 crome 中工作。
我在这里使用这个库，但它只适用于 chrome [https://raw.github.com/fabiomcosta/jquery-meiomask/08b92c411a60ace9131de697179fda433178b8d9/jquery.meio.mask.js](https://raw.github.com/fabiomcosta/jquery-meiomask/08b92c411a60ace9131de697179fda433178b8d9/jquery.meio.mask.js)。
告诉库准备好在所有浏览器中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:46:03.227

我不确定 IE9，但在 ajax 控件工具包中，有一个类似于 Visual Studio 工具箱中的 maskedtextbox。它适用于 IE 8、firefox 和 chrome。

见演示： [http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/MaskedEdit/MaskedEdit.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/MaskedEdit/MaskedEdit.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:10:16.573

[http://www.meiocodigo.com/projects/meiomask/](http://www.meiocodigo.com/projects/meiomask/)

我认为这适用于所有浏览器

编辑：meioMask 兼容性

meioMask 已经在所有主流浏览器上使用 jQuery 1.7.2 进行了测试：

```
Firefox2, Firefox3, Firefox3.5 (Win, Mac, Linux);
IE6, IE7, IE8 (Win);
Chrome (Win, Mac, Linux);
Safari3.2, Safari4 (Win, Mac, iPhone, yes, it supports iPhone!);
Opera (Win, Mac, Linux). 
```

这个笔记在他们自己的网站上

# facebook - 使用正确的 URL 编码构建自己的 loginUrl

> ID：11967950
> 
> 赞同：0
> 
> 时间：2012-08-15T10:43:26.597
> 
> 标签：facebook, facebook-graph-api, facebook-authentication

作为我登录过程的一部分，我正在尝试检查用户是否已接受所需的权限。我编写了一个函数来检索他们接受的权限并返回它们是否正确。如果这返回 false 我想构建 loginUrl 以将它们定向到身份验证对话框，以便他们可以接受额外的权限。

```
// Declares the required permissions
        $reqPerms = array(
            'user_status',
            'user_videos'
        );

        $permVer = verifyPermissions($reqPerms);

        if (!$permVer) {
            //$s = "'scope' => '" . implode("','", $reqPerms) . "' ";
            $s = "'".implode("','", $reqPerms)."'";

            echo $s." ";
            $loginUrl = $facebook->getLoginUrl(array(
                'scope' => $s,
                'redirect_uri' => $fbconfig['appUrl']
                ));
print "<script type='text/javascript'>top.location.href = '$loginUrl';</script>"; 
```

这会导致以下错误：

```
API Error Code: 100
    API Error Description: Invalid parameter
    Error Message: Unsupported scope: ''user_status''. Supported scopes: ads_management create_event create_note email export_stream friends_about_me friends_activities friends_birthday friends_checkins friends_education_history friends_events friends_games_activity friends_groups friends_hometown friends_interests friends_likes friends_location friends_notes friends_online_presence friends_photo_video_tags friends_photos friends_questions friends_relationship_details friends_relationships friends_religion_politics friends_status friends_subscriptions friends_videos friends_website friends_work_history manage_friendlists manage_notifications manage_pages offline_access photo_upload publish_actions publish_checkins publish_stream read_friendlists read_insights read_mailbox read_page_mailboxes read_requests read_stream rsvp_event share_item sms status_update user_about_me user_activities user_birthday user_checkins user_education_history user_events user_games_activity user_groups user_hometown user_interests user_likes user_location user_notes user_online_presence user_photo_video_tags user_photos user_questions user_relationship_details user_relationships user_religion_politics user_status user_subscriptions user_videos user_website user_work_history video_upload xmpp_login 
```

如果我在方法中明确引用权限“user_status”和“user_videos”，我决定在`$loginUrl`自动生成的 $loginUrl 旁边回显我正在构建的内容`getLoginUrl()`。

登录 url 的范围部分不同，这显然与 url 编码有关：

构造的 URL： `scope=%27user_status%27%2C%27user_videos%27` 生成的 URL： `scope=user_status&0=user_status&1=user_videos`

如果我只是将`$reqPerms`直接传递给`getLoginUrl`我得到的函数： `scope=user_status%2Cuser_videos`

**我的问题是：如何编辑我的代码以使 URL 的“范围”部分正确显示？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:58:39.157

主要的问题在于你的

```
 $loginUrl = $facebook->getLoginUrl(array(
        'scope' => $s,
        'redirect_uri' => $fbconfig['appUrl']
        )); 
```

[你可以参考](http://developers.facebook.com/docs/reference/php/facebook-api/)

正确的应该是：

```
$login_url = $facebook->getLoginUrl( array( 
'scope' => 'user_status, user_videos'
) ); 
```

# sql-server - 像 SQL 表一样查询数据集

> ID：11967951
> 
> 赞同：1
> 
> 时间：2012-08-15T10:43:32.593
> 
> 标签：sql-server, dataset, password-checker

有没有办法查询`DataSet`类似 SQL 表？例如。我想检查`DataSet`用户名是否与密码匹配。我可以像这样使用这段代码：

```
foreach (DataRow row in dataset.Tables[0].Rows)
{
   MessageBox.Show(row.ItemArray[1].ToString());
} 
```

但我只想让它选择给定用户名的行，而不是迭代整个表。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:12:00.850

您可以使用行过滤器

```
dataset.Tables[0].DefaultView.RowFilter = "UserName='MyUserName' 
And Password='0x0000000000000000'"

if(dataset.Tables[0].DefaultView.Count > 0){
//User Found
}else{
//User Not Found
} 
```

更多信息如下；

[http://msdn.microsoft.com/en-us/library/system.data.datatable.defaultview.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.defaultview.aspx)

也就是说，理想情况下，这种过滤是在 SQL 而不是 .NET 代码中完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:03:19.350

您可以使用

```
 dataset.Tables[0].Select(....) 
```

[http://msdn.microsoft.com/en-us/library/det4aw50.aspx](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)

但你不应该。在几乎所有情况下，SQL 服务器都会更快地找到匹配项。

此外，您应该散列您的密码

# .net - 保持实体框架上下文打开

> ID：11967952
> 
> 赞同：0
> 
> 时间：2012-08-15T10:43:47.750
> 
> 标签：.net, entity-framework

我有几组数据可供现场所有用户使用。我传统上会考虑缓存这些。

我当前的 EF 设置使用 uow 和存储库模式，因此我倾向于将上下文用于单个事务并处理它。

我计划引入一些用户交互，因此曾经完全静态的数据将不再允许用户添加、删除和编辑。我估计数据仍然只会每 2 分钟左右刷新一次，这仍然是缓存的合理候选者。

一种选择是保留缓存的想法，但在每次更改后检索和重新缓存。最大的数据集将有大约 5-10k 行。

我想到的另一个选择是为每个我保持打开（静态）的数据集设置一个上下文，并以这种方式管理数据。我对 EF 很陌生，所以我不确定这是一个好主意还是坏主意，但从表面上看，它似乎类似于缓存的工作方式。我唯一不确定的是如何处理额外的表数据，因为我相信您无法跟踪和使用 Include()。

有人对此有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:34:20.580

对问题采取了不同的方法。

我现在不是针对每个事务，而是针对每个 httprequest 提出一个 uow 来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:35:34.367

您绝对应该缓存您的数据集，并在单个原子事务后处理您的上下文。

亚历克斯詹姆斯写了一篇很棒的[博客文章](http://blogs.msdn.com/b/alexj/archive/2009/05/07/tip-18-how-to-decide-on-a-lifetime-for-your-objectcontext.aspx)。

几个要点是上下文不是线程安全的，并且对象上下文可能有以前事务的剩余物，这可能会改变结果。

# c# - 获取枚举值

> ID：11967953
> 
> 赞同：-2
> 
> 时间：2012-08-15T10:43:48.797
> 
> 标签：c#

> **可能重复：**
> [枚举返回 int 值](https://stackoverflow.com/questions/943398/enums-returning-int-value)

我想计算`"Stack"`,`"Overflow"`和`"Stackoverflow"`。因此我使用枚举。

```
enum Status : int
{
     Stack = 1,
     Overflow = 2,
     StackOverflow = 3
} 
```

但是当我想获得 Stack 的值时，我得到`"Stack"`.

```
int status = 0;
status = Status.Stack; //I want to assign 1 to status but Status.Stack returns "Stack" 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T10:45:34.580

只需转换为 int：

```
status = (int) Status.Stack; 
```

# picasa - 如何获取 google picasa 网络相册中所有图片的实际网址

> ID：11967955
> 
> 赞同：1
> 
> 时间：2012-08-15T10:44:05.793
> 
> 标签：picasa

我在 picasa 网络相册中有很多图片，我想获取该相册中所有图片的 URL。

该相册的共享设置为 Visibility= Restricted，均带有链接。

如何获取这些 URL？我知道我可以打开每张图片，然后在右侧获取该图片的 URL - 但是该相册中有很多图片，那么还有其他方法可以获取此信息吗？

我想要原始大小的图像的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:39:37.307

您需要将 picasa api 与您的“userID”和“albumID”一起使用...

阅读 picasa api 以了解如何获取这些值...然后

看看我的回答[here](https://stackoverflow.com/questions/10592633/php-picasa-api-show-large-image)

该答案是针对应用于 gdata 请求的 'fields=' 部分的稍微不同的 xslt 表达式。

你想要专辑提要的所有条目......然后在每个条目中你想要等效的json：

> “入口”：[“媒体$组”：{“媒体$内容”：[{“网址”

因此，当您弄清楚另一个答案中解释的 oauth 游乐场时，在您对“Picasa”服务进行身份验证后，您可以简单地请求此请求字符串替换您的 (userID, albumID) ：

```
/feed/api/user/rowntreerob/albumid/5682316071017984417?fields=entry%2Fmedia%3Agroup%2Fmedia%3Acontent%5B%40url%5D&alt=json 
```

并使用 Json 解析器显示您的结果，这是您在下面看到的前几张图片的摘录：

> {“版本”：“1.0”，“编码”：“UTF-8”，“提要”：{“xmlns”：“ [http://www.w3.org/2005/Atom](http://www.w3.org/2005/Atom) ”，“xmlns$gphoto”： " [http://schemas.google.com/photos/2007](http://schemas.google.com/photos/2007) ", "xmlns$media":" [http://search.yahoo.com/mrss/](http://search.yahoo.com/mrss/) ", "entry":[ { "media$group":{ “媒体$内容”：[{“网址”：“ [https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/DSC01612.JPG](https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/DSC01612.JPG) ”，“高度”：512，“宽度”：341，“类型”：“图像/jpeg”，“媒体”：“图像”} ] } }，{“媒体$组”：{“媒体$内容”：[{“url”：“ [https://lh3.](https://lh3.googleusercontent.com/-MhKoWh5MMxE/TtukZNnPvJI/AAAAAAAACkk/oz5fxA6qHx4/DSC01613.JPG)googleusercontent.com/-MhKoWh5MMxE/TtukZNnPvJI/AAAAAAAACkk/oz5fxA6qHx4/DSC01613.JPG ", "height":512, "width":341, "type":"image/jpeg", "medium":"image" } ] } }, { "media$group":{ "media$content":[ { "url":"[https://lh4.googleusercontent.com/-Bg9L7Cggfak/TtukZ0BtRiI/AAAAAAAACk0/2HiJtkEFUss/DSC01614.JPG](https://lh4.googleusercontent.com/-Bg9L7Cggfak/TtukZ0BtRiI/AAAAAAAACk0/2HiJtkEFUss/DSC01614.JPG) “，“高度”：512，“宽度”：341，“类型”：“图像/jpeg”，“中等”： "图像" } ] } }, { "media$group":{ "media$content":[ { "url":" [https://lh3.googleusercontent.com/-u-kqaskIfqc/TtukajDNYHI/AAAAAAACk8/3jo9wS- zhbA/DSC01615.JPG](https://lh3.googleusercontent.com/-u-kqaskIfqc/TtukajDNYHI/AAAAAAAACk8/3jo9wS-zhbA/DSC01615.JPG) ", "height":512, "width":341, "type":"image/jpeg", "medium":"image" } ] } }, { "media$group":{ " media$content":[ { "url":" [https://lh3.googleusercontent.com/-9OoGQKTh7CQ/Ttukh1ocOCI/AAAAAAAACgQ/fKy-0Ru7J4M/DSC01624.JPG](https://lh3.googleusercontent.com/-9OoGQKTh7CQ/Ttukh1ocOCI/AAAAAAAACgQ/fKy-0Ru7J4M/DSC01624.JPG) ", "height":512, "width":341,“类型”：“图像/jpeg”，“中等”：“图像”}]}}，

你想要的图片在“url”属性中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:57:28.163

使用 Firefox，可以使用 Greasemonkey 脚本，该脚本提供指向 Picasa 相册中部分/所有图像的实际链接。

您需要导航到 Firefox 中的相册页面，扩展程序顶部会显示选项 - 例如，如果您想要特定大小的图像的 url，或者仅适用于某些图像 - 一旦填写了这些选项，您就可以轻松获得链接(s)。

我使用的greasemonkey 脚本位于[http://www.userscripts.org](http://www.userscripts.org)（免责声明-在确保它不是恶意后使用这样的脚本）。

[在http://www.userscripts.org](http://www.userscripts.org-)上有很多这样的脚本（用于获取指向 picasa 相册中图像的链接） ——只需进行搜索，您就会得到这些脚本的列表。

# node.js - 在 node.js 中的 TCP 服务器和 HTTP 服务器之间创建 WebSocket

> ID：11967958
> 
> 赞同：7
> 
> 时间：2012-08-15T10:44:18.017
> 
> 标签：node.js, websocket, socket.io, tcpserver, httpserver

我使用***Node.js*****创建了一个TCP 服务器**，它监听客户端连接。我需要在 Node.js 中再次将数据从***TCP 服务器***传输到***HTTP 服务器***，可能通过**Websocket** ( *socket.io* )。

 *****但是，我不知道如何创建这样的连接，以便 TCP 服务器能够通过 Websocket 将数据推送到 HTTP 服务器。

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T19:41:37.293

我尝试了很多事情来完成这项工作。大多数时候，我都是依靠**socket.io**来完成这项工作的，但它不能与 TCP 一起工作。

然而，**net.Socket**就足够了。

这是它的工作示例。

**TCP 服务器**

```
var net = require('net');

var HOST = 'localhost';
var PORT = 4040;

var server = net.createServer();
server.listen(PORT, HOST);

server.on('connection', function(sock) {
    console.log('CONNECTED: ' + sock.remoteAddress +':'+ sock.remotePort);
sock.write("TCP sending message : 1");
    console.log('Server listening on ' + server.address().address +':'+ 
        server.address().port);
}).listen(PORT, HOST); 
```

**HTTP 服务器**

```
var http = require('http').createServer(httpHandler),
    fs = require("fs"),
    wsock = require('socket.io').listen(http),
    tcpsock = require('net');

var http_port = 8888;

var tcp_HOST = 'localhost';
var tcp_PORT = 4040;

/**
 * http server
 */
function httpHandler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

http.listen(http_port);
console.info("HTTP server listening on " + http_port);

wsock.sockets.on('connection', function (socket) { 

    var tcpClient = new tcpsock.Socket();
    tcpClient.setEncoding("ascii");
    tcpClient.setKeepAlive(true);

    tcpClient.connect(tcp_PORT, tcp_HOST, function() {
        console.info('CONNECTED TO : ' + tcp_HOST + ':' + tcp_PORT);

        tcpClient.on('data', function(data) {
            console.log('DATA: ' + data);
            socket.emit("httpServer", data);
        });

        tcpClient.on('end', function(data) {
            console.log('END DATA : ' + data);
        });
    });

    socket.on('tcp-manager', function(message) {
        console.log('"tcp" : ' + message);
        return;
    });

    socket.emit("httpServer", "Initial Data");
}); 
```

**浏览器客户端**

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');
  socket.on('httpServer', function (data) {
    console.log(data);
    document.write(data + "\r\n");
    socket.emit('tcp', "For TCP");
  });
</script> 
```

这样，Node.js 中的 HTTP 服务器和 TCP 服务器之间就打开了一个套接字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T11:33:36.793

如果您需要与服务器-服务器通信，那么 websockets 可能不是最佳选择。尝试其中一个[RPC 库](https://github.com/joyent/node/wiki/Modules#wiki-rpc)，或者只使用 HTTP 或您自己的协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:31:53.733

您可以在 Node.js 上使用 socket.io 或 ws（仅 WebSocket）作为客户端（不仅在浏览器中）

```
var io = require('socket.io-client');
var socket = io.connect('http://IP address of Websocket server');
socket.on('news', function (data) {
  console.log(data);
  socket.emit('my other event', { my: 'data' });
}); 
```*****

# javascript - 如何从 Highstock 图表中获得导航器选择？

> ID：11967959
> 
> 赞同：3
> 
> 时间：2012-08-15T10:44:25.650
> 
> 标签：javascript, highcharts, dom-events, selection, navigator

我正在使用 Highcharts js 库，尤其是 Highstock Timeseries 图表，例如：[http](http://www.highcharts.com/stock/demo/) ://www.highcharts.com/stock/demo/ 。

你知道我怎样才能在一个事件之后得到当前导航器的选择是什么？例如，假设我们可视化从 6 月 25 日到 6 月 27 日的数据，而整个可视化包括从 6 月 1 日到 6 月 30 日的数据，有没有办法检索显示选择的值：25th-27th？

如果我没有说清楚，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T18:10:49.117

根据highcharts API参考：

```
events: {
    selection: function(event) {
        console.log(
            Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', event.xAxis[0].min),
            Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', event.xAxis[0].max)
        );
    }
} 
```

[**演示**](http://jsfiddle.net/6CbxR/1/)

[参考](http://api.highcharts.com/highstock#chart.events.selection)

# perl - 为 Strawberry Perl 编译 Net::SSL：“openssl/ssl.h：没有这样的文件或目录”

> ID：11967961
> 
> 赞同：1
> 
> 时间：2012-08-15T10:44:43.347
> 
> 标签：perl, module, installation, cpan

当我尝试安装 Net::SSL 时，我得到以下输出。我一点也不明白。谁能在不涉及技术的情况下为我指出正确的方向？

```
C:\文档和设置\管理员>cpan
CPAN: File::HomeDir 加载正常 (v0.69)

cpan shell -- CPAN 探索和模块安装 (v1.9205)
已启用 ReadLine 支持

cpan> 安装网络::SSL
数据库于 2012 年 8 月 14 日星期二 14:54:56 GMT 生成
为模块“Net::SSL”运行安装
为 N/NA/NANIS/Crypt-SSLeay-0.64.tar.gz 运行 make
C:\strawberry\cpan\sources\authors\id\N\NA\NANIS\Crypt-SSLeay-0.64 的校验和。
tar.gz 好的
扫描缓存 C:\strawberry\cpan\build 的大小
..................................................... ..........................完毕

CPAN.pm：将构建 N/NA/NANIS/Crypt-SSLeay-0.64.tar.gz

测试套件可以尝试连接到公共服务器以确保
代码工作正常。如果您位于严格的防火墙之后或没有
网络连接，这些测试可能会失败（通过代码没有错误）。
是否要运行实时测试（是/否）？[N]
警告：BUILD_REQUIRES 不是已知参数。
检查您的套件是否完整...
看起来不错
警告：未找到先决条件 LWP::Protocol::https 6.02。
“BUILD_REQUIRES”不是已知的 MakeMaker 参数名称。
为 Crypt::SSLeay 编写 Makefile
cp lib/Crypt/SSLeay/X509.pm blib\lib\Crypt\SSLeay\X509.pm
cp lib/Net/SSL.pm blib\lib\Net\SSL.pm
cp SSLeay.pm blib\lib\Crypt\SSLeay.pm
cp lib/Crypt/SSLeay/Conn.pm blib\lib\Crypt\SSLeay\Conn.pm
cp lib/Crypt/SSLeay/CTX.pm blib\lib\Crypt\SSLeay\CTX.pm
cp lib/Crypt/SSLeay/MainContext.pm blib\lib\Crypt\SSLeay\MainContext.pm
cp lib/Crypt/SSLeay/Err.pm blib\lib\Crypt\SSLeay\Err.pm
C:\草莓\perl\bin\perl.exe C:\草莓\perl\lib\ExtUtils\xsubpp -typemap
C:\strawberry\perl\lib\ExtUtils\typemap -typemap typemap SSLeay.xs > SSLeay.xs
c && C:\strawberry\perl\bin\perl.exe -MExtUtils::Command -e mv SSLeay.xsc SSLeay
。C
gcc -c -IC:\strawberry\c\include -s -O2 -DWIN32 -DHAVE_DES_FCRYPT -DPERL_
IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -fno-strict-aliasing -DPERL_MSVCRT_READFIX
-s -O2 -DVERSION=\"0.64\" -DXS_VERSION=\"0.64\" "-IC:\strawberry\perl\lib
\核心" SSLeay.c
SSLeay.xs:35:25: openssl/ssl.h: 没有这样的文件或目录
SSLeay.xs:36:28: openssl/crypto.h: 没有这样的文件或目录
SSLeay.xs:37:25: openssl/err.h: 没有这样的文件或目录
SSLeay.xs:38:26: openssl/rand.h: 没有这样的文件或目录
SSLeay.xs:39:28: openssl/pkcs12.h: 没有这样的文件或目录
SSLeay.xs:55：错误：“*”标记之前的语法错误
SSLeay.xs：在函数“InfoCallback”中：
SSLeay.xs:60: error: `where' undeclared (第一次在这个函数中使用)
SSLeay.xs:60: 错误：（每个未声明的标识符只报告一次
SSLeay.xs:60：错误：对于它出现的每个函数。）
SSLeay.xs:60: error: `SSL_ST_MASK' undeclared (第一次在这个函数中使用)
SSLeay.xs:62: error: `SSL_ST_CONNECT' undeclared (首先在这个函数中使用)
SSLeay.xs:64: error: `SSL_ST_ACCEPT' undeclared (第一次在这个函数中使用)
SSLeay.xs:69: error: `SSL_CB_LOOP' undeclared (首先在这个函数中使用)
SSLeay.xs:70: error: `s' undeclared (第一次在这个函数中使用)
SSLeay.xs:72: error: `SSL_CB_ALERT' undeclared (首先在这个函数中使用)
SSLeay.xs:73：错误：“SSL_CB_READ”未声明（在此函数中首次使用）
SSLeay.xs:75: error: `ret' undeclared (第一次在这个函数中使用)
SSLeay.xs:78: 错误: `SSL_CB_EXIT' undeclared (首先在这个函数中使用)
SSLeay.c：在函数“XS_Crypt__SSLeay__CTX_new”中：
SSLeay.c:146: error: `SSL_CTX' undeclared (第一次在这个函数中使用)
SSLeay.c：在函数“XS_Crypt__SSLeay__CTX_use_pkcs12_file”中：
SSLeay.c:334: 错误: `SSL_CTX' undeclared (首先在这个函数中使用)
SSLeay.c:334: error: `ctx' undeclared (第一次在这个函数中使用)
SSLeay.xs:188: error: `EVP_PKEY' undeclared (first use in this function)
SSLeay.xs:188: error: `pkey' undeclared (第一次在这个函数中使用)
SSLeay.c:421: error: `ctx' undeclared (first use in this function)
SSLeay.c:646: error: `ssl' undeclared (第一次在这个函数中使用)
SSLeay.c:658: 错误: ')' 标记之前的语法错误

很多与上述类似的行

SSLeay.xs:505：错误：`->' 的无效类型参数
dmake.EXE：错误代码 129，同时制作“SSLeay.o”
NANIS/Crypt-SSLeay-0.64.tar.gz
C:\strawberry\c\bin\dmake.EXE -- 不行
运行 make 测试
没有成功就无法测试
运行 make install
Make 已返回错误状态，安装似乎不可能
在此命令期间失败：
NANIS/Crypt-SSLeay-0.64.tar.gz：不做

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-03T03:41:27.013

我遇到了同样的问题，虽然我安装了*openSSL*包，但开发标头没有。我必须安装软件包*libssl-dev*。我使用*Ubuntu 软件中心*下载并安装了该软件包。或者，您可以`sudo apt-get install libssl-dev`从终端命令行使用。

这解决了我的问题，但对您使用 Windows 并没有真正的帮助。*openSSL*有一个指向 Windows 二进制文件的链接：[OpenSSL for Windows](http://www.openssl.org/related/binaries.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:48:31.070

以下几行表明您可能尚未安装[OpenSSL](http://www.openssl.org/)库/头文件，或者它位于 perl 不知道的位置。用你操作系统的包管理器安装，或者编译安装。

```
>SSLeay.xs:35:25: openssl/ssl.h: No such file or directory
>SSLeay.xs:36:28: openssl/crypto.h: No such file or directory
>SSLeay.xs:37:25: openssl/err.h: No such file or directory
>SSLeay.xs:38:26: openssl/rand.h: No such file or directory
>SSLeay.xs:39:28: openssl/pkcs12.h: No such file or directory 
```

安装库/头文件后，`cpan`应该可以`make`和`install` [`Net::SSL`](https://metacpan.org/module/Net%3a%3aSSL).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-27T06:28:20.880

首先，我遇到了这样的问题：

```
mod_qos.c:83:26: error: openssl/rand.h: No such file or directory
mod_qos.c:84:25: error: openssl/evp.h:  No such file or directory 
```

**然后**我使用了以下内容：

`apxs -I/usr/local/openssl/include/openssl -i -c mod_qos.c -lcrypto -lpcre`

它**成功了！**为什么？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-04T08:08:51.637

通常`CPAN`通过安装所有依赖模块来为您解决这个问题。您面临的问题是此警告

```
WARNING: BUILD_REQUIRES is not a known parameter. 
```

现在由于`CPAN`无法读取此参数，因此无法为您获取所有依赖模块，因此无法安装。

问题可能出在带有 cpan 实用程序的 perl-ExtUtils-MakeMaker 模块上。

您可能需要安装最新版本的 cpan 并尝试。或者如前所述，您可能希望在单独下载所有模块然后手动安装后安装它们。

# php - 使用 javascript 创建动态下拉菜单

> ID：11967962
> 
> 赞同：0
> 
> 时间：2012-08-15T10:44:53.587
> 
> 标签：php, javascript, dom, createelement

您好，我想使用 javascript 创建动态下拉列表，但它不起作用..

我的PHP代码：

```
<input type="button" onclick="javascript:addRow();" value="Add Row" name="addRow"/> 
```

我的 JS 代码：

```
// This function is used to create dynamic form element
function addRow() {
    var opt = document.createElement("option");
    element = document.createElement("select");
    element.setAttribute('id', 'focus');
    element.options.add(opt);
} 
```

PS：它没有给出任何 js 控制台错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T10:48:39.857

您没有将元素添加到正文中，因此它不会显示

```
// This function is used to create dynamic form element
function addRow() {
    var opt = document.createElement("option");
    element = document.createElement("select");
    element.setAttribute('id', 'focus');
    element.options.add(opt);
    document.body.appendChild(element);
} 
```

# autocomplete - Aptana 的 css 自动完成不会自行更新

> ID：11967964
> 
> 赞同：0
> 
> 时间：2012-08-15T10:45:03.787
> 
> 标签：autocomplete, aptana

我正在做一个网络项目，所有页面都有 .php 后缀。我从一个 css (style-default.css) 文件开始，自动完成功能完美。现在我更改了该 css 文件名（更改为 custom.css）并添加了更多 css 文件（Foundation 3 框架）。

奇怪的是，当键入`class="..."`自动完成功能时，我只显示了 custom.css 的选项，尽管它显示了名称“style-default.css”，并且根本没有建议“foundation.min.css”。尽管我无法*构建*Web 项目，但我检查了这两个文件都*包含在构建中。***有没有办法刷新自动完成？**

 ***我什至尝试删除该项目并再次导入它，但它没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:59:59.517

好的，我发现... Aptana 自动完成功能显然无法读取 *.min.css。我改为包含 *.css 并出现了建议。尽管如此，过时的文件名对我来说似乎是一个错误。***

# sql - Java + Sql 数据库数据回滚不起作用

> ID：11967965
> 
> 赞同：0
> 
> 时间：2012-08-15T10:45:09.327
> 
> 标签：sql, rollback, jaas

在我的应用程序中，我正在将数据写入数据库。这是数据库编写的代码。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

public class DatabaseRollback {

private static Connection getDBConnection() {

    Connection dbConnection = null;
    try {
        Class.forName("org.postgresql.Driver");
    } catch (ClassNotFoundException e) {
        System.out.println("Where is your PostgreSQL JDBC Driver? " + "Include in your library path!");
        System.out.println(e.getMessage());
        e.printStackTrace();
    }
    System.out.println("PostgreSQL JDBC Driver Registered!");

    try {
    dbConnection = DriverManager.getConnection("jdbc:postgresql://127.0.0.1:5432/MyDB","root","123");

        if (dbConnection != null) {
            System.out.println("You made it, take control your database now!");
        } else {
            System.out.println("Failed to make connection!");
        }
        return dbConnection;
    } catch (SQLException e) {
        System.out.println("Connection Failed! Check output console");
        System.out.println(e.getMessage());
        e.printStackTrace();
    }
    return dbConnection;
}

public static void main(String args[]) throws SQLException {
    Connection dbConnection = null;
    PreparedStatement pstmt = null;

    String query = "insert into orders(orderid, execid, exectype, lastprice, lastqty, ordstatus) values(?, ?, ?, ?, ?, ?)";

        try {
            dbConnection = getDBConnection();
            dbConnection.setAutoCommit(false);

            pstmt = dbConnection.prepareStatement(query); // create a statement
            pstmt.setString(1, "OrderID"); 
            pstmt.setString(2, "Test02"); 
            pstmt.setString(3, "exectype");
            pstmt.setDouble(4, 100.00);
            pstmt.setInt(5, 100);  
            pstmt.setString(6,"ordstatus"); 

            pstmt.executeUpdate(); 

            dbConnection.commit();

            query.concat("error");
            dbConnection.prepareStatement(query);
            pstmt.setString(1, "eeeeeeeeeeeeeeeeeeeeeeee");
            pstmt.executeUpdate(); // here error comes.........
        } catch (Exception e) {
        //  e.printStackTrace();
            dbConnection.rollback();
        } 
     finally {

        if (pstmt != null) {
            pstmt.close();
        }

        if (dbConnection != null && !dbConnection.isClosed()) {
            dbConnection.close();
        }

    }
}} 
```

调试点到达后，`the dbConnection.commit();`我检查了数据库并插入了一条记录。但随后它会通过`dbConnection.rollback();`部分。但它不会回滚插入的记录。如何实现回滚机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:00:20.897

```
dbConnection.commit(); 
```

应该放在交易的最后。

```
pstmt.setString(1, "eeeeeeeeeeeeeeeeeeeeeeee");
 pstmt.executeUpdate(); // here error comes.........
 dbConnection.commit();
        } catch (Exception e) { 
```

# c# - 如何在不使用额外文件进行解密的情况下加密可执行文件并使该加密文件可执行？

> ID：11967966
> 
> 赞同：0
> 
> 时间：2012-08-15T10:45:10.067
> 
> 标签：c#, encryption, exe, windows-applications

我们如何使用**c#**加密可执行文件并使该加密文件仍然可执行而不使用额外文件进行解密？
意味着解密方法应该在文件中。
我怎么能用 c# 语言写这样的东西？

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:04:15.697

在客户端机器上存储加密数据并让它自动解密意味着您也必须在该机器上存储解密密钥。这意味着您无法有效地保护数据并将其提供给用户。这种加密仅用于减缓用户篡改数据的速度，因为需要时间来恢复解密密钥和算法。

如果要对可执行文件本身的代码进行加密，以防止用户对其进行篡改，这是一个非常非常复杂的话题。只是坚持和时间的问题。您不会在一篇 StackOverflow 帖子中得到此类问题的答案。您必须学习 PE 和 .NET 文件格式、有关可执行加载程序以及 mscor* 的操作系统内部结构。

如果你需要存储一些数据

*   选择一些加密算法并将您的数据加密到文件中（请参阅[此问题](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)）
*   将加密文件作为嵌入式资源添加到您的 c# 项目中
*   在运行时访问这个文件（见[这个问题](https://stackoverflow.com/questions/2820384/reading-embedded-xml-file-c-sharp)）并解密它（已经在第一点讨论过）

# c# - 切换图片框

> ID：11967967
> 
> 赞同：0
> 
> 时间：2012-08-15T10:45:25.503
> 
> 标签：c#, winforms

在 Windows 窗体上，我尝试使用 PictureBoxes 作为状态图标。我有 4 个图标，分别代表 Running、Stopped、StartPending 和 StopPending。我不确定如何最好地做到这一点，所以我决定将它们相互堆叠并只使有效的可见。我想出了这样的事情。

```
switch (currentServiceStatus)
{
    case "Running":
        pb_startedTestService.Visible = true;
        pb_startingTestService.Visible = false;
        pb_stoppedTestService.Visible = false;
        pb_stoppingTestService.Visible = false;
        break;
    case "StartPending":
        pb_startedTestService.Visible = false;
        pb_startingTestService.Visible = true;
        pb_stoppedTestService.Visible = false;
        pb_stoppingTestService.Visible = false;
        break;
    case "Stopped":
        pb_startedTestService.Visible = false;
        pb_startingTestService.Visible = false;
        pb_stoppedTestService.Visible = true;
        pb_stoppingTestService.Visible = false;
        break;
    case "StopPending":
        pb_startedTestService.Visible = false;
        pb_startingTestService.Visible = false;
        pb_stoppedTestService.Visible = false;
        pb_stoppingTestService.Visible = true;
        break;
} 
```

如果它只是一项服务，我可以接受，但至少有 7 项服务我要检查并认为服务名称旁边的小图标有点多。我有强迫症吗？这不是什么大不了的事，不会让我的代码像我想的那样草率吗？有没有更简单或更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:48:19.417

为什么不使用一个 PictureBox 并在您的 switch 语句中简单地更改正在显示的图像。即：PictureBox1.Image = ...

假设您已将图片加载到资源中，以下是访问它们的语法。

```
PictureBox1.Image = global::(Namespace).Properties.Resources.(PictureName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:08:02.793

尝试设置[`PictureBox.Image`](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.image.aspx)属性：

我使用了一个`Dictionary`集合，并且可能需要用于[`Properties.Resources`](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=VS.80%29.aspx)在运行时访问资源：

```
var imageDic = new Dictionary<string, Image>
                    {
                        {"Running", Properties.Resources.YourImageName},
                        {"StartPending", new Bitmap("...")},
                        {"Stopped", new Bitmap("...")},
                        {"StopPending", new Bitmap("...")}
                    };

// and use it:
pb.Image = imageDic[currentServiceStatus]; 
```

或以您的方式：

```
Image imgRunning = ...;
Image imgStartPending = ...;
Image imgStopped = ...;
Image imgStopPending = ...;

switch (currentServiceStatus)
{
    case "Running":
        pb.Image = imgRunning;
        break;
    case "StartPending":
        pb.Image = imgStartPending;
        break;
    case "Stopped":
        pb.Image = imgStopped;
        break;
    case "StopPending":
        pb.Image = imgStopPending;
        break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:49:28.047

每个服务只使用一个图片框，并根据状态分配图像。C# 不会创建图像的额外副本，因此以这种方式使用它们非常好。或者自己绘制整个控件，为每个服务绘制图片，同时只使用一个控件（或整个窗口）作为画布。

# c# - MVC 3 如何让用户查看警告/免责声明屏幕

> ID：11967981
> 
> 赞同：2
> 
> 时间：2012-08-15T10:46:17.557
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我认为这会很简单，但我有点挣扎。我正在为使用 MVC 3 的客户开发一个项目，该项目要求用户在使用该站点之前同意某些条件。我创建了一个标准的同意/不同意屏幕，该屏幕在首次进入网站时加载，但如果用户键入网站不同部分的地址，他们可以绕过条件，例如 www.test.com 加载条件但如果用户键入 www.test.com/home 他们绕过条件。

我怎样才能确保他们已经同意这些条件，然后他们才能到达网站上的其他任何地方？我一直在尝试一个会话变量，我认为这是要走的路，但是有没有办法在每个页面请求上检查这个变量，而不必在网站上的每个控制器操作中写入检查？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T10:56:28.577

您可以创建一个自定义属性并将其添加到控制器的顶部。

例如：

```
 [AgreedToDisclaimer]
    public ActionResult LoadPage()
    {
         return View();
    } 
```

只有在 AgreedToDisclaimer 返回 true 时才会加载视图。

```
public class AgreedToDisclaimerAttribute : AuthorizeAttribute
{

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
       if (httpContext == null)
        throw new ArgumentNullException("httpContext");

       // logic to check if they have agreed to disclaimer (cookie, session, database)
       return true;
    }

   protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
   {
          // Returns HTTP 401 by default - see HttpUnauthorizedResult.cs.
           filterContext.Result = new RedirectToRouteResult(
            new RouteValueDictionary 
            {
             { "action", "ActionName" },
             { "controller", "ControllerName" },
             { "parameterName", "parameterValue" }
            });
   }
} 
```

[http://msdn.microsoft.com/en-us/library/dd410209(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/dd410209(v=vs.90).aspx)

[http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.handleunauthorizedrequest.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.handleunauthorizedrequest.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:52:14.837

该问题有两种方法：

*   如果这种情况改变了站点（如 StackOverflow 的通知，显示在顶部），但不阻止您使用它，那么我认为它应该在表示逻辑中解决（因此在视图中，如果您有真实视图而不是只是美化模板）。

    在这种情况下，会话变量只是模型层状态的另一部分。当视图实例从模型层请求数据时，它会被告知有新的通知给用户。这意味着每个视图都可以将这个通知的表示添加到当前响应中。最好在组合输出时选择使用一个额外的模板。此功能将在所有视图之间共享，因此可以在基类中实现，提供一个单点更改。

*   If this acceptance of disclaimer is mandatory for everyone (like "I am 18 or older" in adult-themed sites), then the best option, in this case, would be to check, if user has agreed to condition in the routing mechanism. I am not sure how much control you have over request routing in ASP.NET MVC, but that again would provide you with as single point of change.

    If decision is made in routing mechanism, it would also mean, that you put the condition outside the standard MVC triad entirely.

# php - 用于分页的mysql LIMIT关键字不起作用

> ID：11967982
> 
> 赞同：-5
> 
> 时间：2012-08-15T10:46:23.647
> 
> 标签：php, mysql, limit, pagination

在检查页数后，我尝试在 SELECT 语句中使用 LIMIT 关键字对 30 条记录的结果进行分页，我使用了 2 个循环，用于标题的 FOR 循环和用于结果行的 WHILE 循环，并使用 LIMIT 进行限制，如果我需要知道可以在 LIMIT 关键字之后使用变量。我的代码如下：

```
<?php 
    include 'dbconnect.php'; 

    ?>

    //--CHECKING number of records from STOCK table------------------------------------
    $di=mysql_query("SELECT * FROM CYLSTOCK_draft WHERE (DC_Date BETWEEN '$startdat' AND '$enddat' AND Ac_code='$custno' AND Product_Desc='$gas') OR (Ecr_dt BETWEEN '$startdat' AND '$enddat' AND Ac_code='$custno' AND Product_Desc='$gas') ORDER BY DC_Date");

    $numrows=mysql_num_rows($di);

    // number of rows to show per page
    $rowsperpage = 30;
    // find out total pages
    $totalpages = ceil($numrows / $rowsperpage);

    if ($numrows>0)
    {
        $sn=0;
        //--------for loop for Paging-------------
        for ($x=0; $x < $totalpages; $x++)
        {
            echo "<br><table width='622' border='1' cellspacing='0' cellpadding='5' align='center'>";
            echo "<tr>";
            echo "<td width='30' align='center' class='toprow'>SNo.</td>";
            echo "<td width='86' align='center' class='toprow'>DC Date</td>";
            echo "<td width='94' align='center' class='toprow'>DC No.</td>";
            echo "<td width='160' align='center' class='toprow'>Product Description</td>";
            echo "<td width='89' align='center' class='toprow'>Cylinder No.</td>";
            echo "<td width='91' align='center' class='toprow'>ECR Date</td>";
            echo "<td width='72' align='center' class='toprow'>ECR No.</td>";
            echo "</tr>";

            //---while loop with select statement limit to 30 records---------------------------------
            $dis=mysql_query("SELECT * FROM CYLSTOCK_draft WHERE (DC_Date BETWEEN '$startdat' AND '$enddat' AND Ac_code='$custno' AND Product_Desc='$gas') OR (Ecr_dt BETWEEN '$startdat' AND '$enddat' AND Ac_code='$custno' AND Product_Desc='$gas') ORDER BY DC_Date LIMIT '$sn', 30");
            while ($di2=mysql_fetch_assoc($dis))
            {
                $sn++;
                $k3=$di2['DC_Date'];
                $date_array = explode( "-", $k3 );
                $kk3 = sprintf( '%02d-%02d-%4d', $date_array[2], $date_array[1], $date_array[0]);
                $kk3a=strtotime($kk3);

                $k2=$di2['DC_No'];
                $k6=$di2['Product_Desc'];
                $k7=$di2['Cylinder_No'];
                $k5=$di2['Ecr_dt'];
                $kk5=strtotime($k5);
                $k4=$di2['Ecr_No'];

                echo "<tr>";
                echo "<td width='30' align='center' class='sty1'>$sn</td>";
                echo "<td width='86' align='center' class='sty1'>";
                if ($kk3a>0)
                {
                    echo $kk3;
                }
                echo "</td>";

                echo "<td width='94' align='center' class='sty1'>$k2</td>";
                echo "<td width='160' align='center' class='sty1'>$k6</td>";
                echo "<td width='89' align='center' class='sty1'>$k7</td>";
                echo "<td width='91' align='center' class='sty1'>";
                if($kk5>0)
                {
                    $date_array = explode( "-", $k5 );
                    $kk5 = sprintf( '%02d-%02d-%4d', $date_array[2], $date_array[1], $date_array[0]);
                    echo $kk5;
                }
                echo "</td>";

                echo "<td width='72' align='center' class='sty1'>";
                if (substr($k4,5) > 0)
                {
                    echo $k4;
                }
                echo "</td>";
                echo "</tr>";
            }
        //---End of for loop
        }
    }
    echo "</table><br>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:51:03.583

```
.. LIMIT '$sn', 30");  .. 
```

$sn 周围没有引号

# php - apache mod_rewrite 中的奇怪行为

> ID：11967992
> 
> 赞同：4
> 
> 时间：2012-08-15T10:47:14.447
> 
> 标签：php, apache, .htaccess, mod-rewrite

我对理解 mod_rewrite 行为有疑问。我将用一个例子来说明这一点。我的根目录中有 3 个文件：**.htaccess**、**index.php**和**test.php**。文件内容：

**.htaccess**

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.+) ?link=$1 [L] 
```

**索引.php**

```
<?php
$db = mysqli_connect('localhost', 'root', '', 'mydb'); 
$db->real_query ("INSERT INTO `test` (`str`) VALUES ('test_string')");
print_r($_GET);
?> 
```

**测试.php**

```
<?php
$db = mysqli_connect('localhost', 'root', '', 'mydb'); 
$db->real_query ("INSERT INTO `test` (`str`) VALUES ('another_test_string')");
print_r($_GET);
?> 
```

因此，当我使用浏览器访问站点的根文件夹时，会在数据库中插入**两个**字符串——“test_string”和“test_string”。如果我去`/test.php`，还将插入两个字符串 - 一个来自 index.php 脚本 - 'test_string' 和一个来自`test.php`字符串 - 'another_test_string'。如果我从 .htacess 中删除重写规则，则只会为两个页面插入一个字符串。我无法理解这种行为 - 为什么所有脚本都执行两次？尤其是我不明白为什么会发生这种情况`test.php`since `I wrote RewriteCond %{REQUEST_FILENAME} !-f`，所以不应该进行重写。
先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:54:35.507

一旦处理了该代码片段，您拥有的 php 代码将插入到数据库中。

如果您多次执行它，您将在数据库中看到更多的插入。

然而，重写规则也只执行一次。

因此，您所经历的可能与您的重写规则完全无关。如果您不信任我，请为重写启用日志记录（[请参阅 apace 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)）并跟踪跟踪。

你可能在电脑前坐得太久了，所以喝杯茶，放松一下，找到那个虫子。

# ruby-on-rails - Rails：覆盖“无法找到 id=xxx 的项目”错误以显 示 flash 错误消息

> ID：11967995
> 
> 赞同：1
> 
> 时间：2012-08-15T10:47:40.093
> 
> 标签：ruby-on-rails, overriding, alert

在我的程序中，我必须使用产品 ID 获取产品信息，如下所示：

```
# Show the product info.
def show
    @product = Product.find params[:id]

    if !@product
        redirect_to products_path, :alert => 'Product not found!.'
    end
end 
```

如果该产品不存在，我会遇到 Rails 错误**Couldn't find Product with id=xxx**。我想覆盖此错误消息并自己将错误显示为闪光警报。

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:52:47.950

如果没有找到产品而不是异常，您可以编写`Product.try(:find, params[:id])`or并获得 nil`Product.find_by_id params[:id]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:55:32.230

find 方法总是引发 ResourceNotFound。如果您只想为此操作自定义错误消息，您可以这样做：

```
def show
    @product = Product.find_by_id params[:id]

    if @product.blank?
        redirect_to products_path, :alert => 'Product not found!.'
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:05:33.997

```
def show
    begin
      @product = Product.find params[:id]
    rescue ActiveRecord::RecordNotFound => e
      redirect_to products_path, :alert => 'Product not found!.'
    end
end 
```

总是尝试挽救特定的异常，这会给你想要的结果。正如@Emrah 提到的，当没有给定 id 的记录时，`find`方法会引发。`ActiveRecord::RecordNotFound`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T10:58:48.417

如果未找到任何内容，则指定该`find`方法以引发错误。您可以使用 ARel 样式

```
@product = Product.where(:id => params[:id]).first 
```

相反，它将返回`nil`一个空结果。

# javascript - 图像的 HTML Javascript getElementById返回 null

> ID：11967997
> 
> 赞同：1
> 
> 时间：2012-08-15T10:47:51.447
> 
> 标签：javascript, dom, image

噢噢噢噢噢我的img标签去哪儿了？

我有以下 HTML。我正在为 searchTopPanel div 使用 OnClick 来切换 searchPopDown 可见性。作为其中的一部分，我想动态更改 img 的 src - 以指示折叠/展开。这是HTML：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style type="text/css">
        #searchTopPanel
        {
            background-color: rgb(155,154,211);
        }
    </style>
    <script type="text/javascript">
        function toggleSearch() {
            var style = document.getElementById("searchPopDown").style;
            var img = document.getElementById("xxxx");

            style.display = (style.display != "none") ? "none" : "block";
            img.src = (img.src != "images/expand.png") ? "images/expand.png" : "images/collapse.png";
        }
    </script>
</head>
<body>
    <div id="mainSearch">
        <div id="searchTopPanel" onclick="toggleSearch()" style="cursor:pointer">
            <span>Advanced Search</span>
            <img id="xxxx" src="images/expand.png" alt="" />
        </div>
        <div id="searchPopDown" style="display:none">
            <span>Search Options</span>
            <div id="searchOptions">
                <table>
                <tr><td>Summary</td><td>
                    <select id="Select1">
                        <option>Contains</option>
                        <option>Does not contain</option>
                        <option>Equal to</option>
                        <option>Not equal to</option>
                    </select></td><td>
                        <input id="Text1" type="text" /></td></tr>
                </table>                
            </div>
            <input id="search" type="submit" value="Search" />
        </div>
    </div>
</body>
</html> 
```

我已将我的 img xxxx 命名为。我已经尝试了各种方法来找到它。
我正在使用 IE9 从 VS2010 运行它。我有能够调试 javascript 的优势（dis），当我调用 var img = document.getElementById("xxxx"); 时，它会显示 xxxx 为 null；.

只是希望我今天早上很愚蠢，错过了一些明显的事情。

有什么想法吗？

谢谢，

安德斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:56:30.263

我整理了一个[JS Fiddle 来证明你的 JavaScript 可以工作](http://jsfiddle.net/Sohnee/Yvxjc/)。

考虑到这一点，我建议您的图像路径不正确。

也许：

```
images/expand.png 
```

应该：

```
/images/expand.png 
```

或者图像位置/名称可能是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:57:24.380

img.src 扩展为完整的 url。试试这个：

```
 function toggleSearch() {
        var style = document.getElementById("searchPopDown").style;
        var img = document.getElementById("xxxx");

        style.display = (style.display != "none") ? "none" : "block";
        img.expanded = !img.expanded || false;
        img.src = (img.expanded ? "images/expand.png" : "images/collapse.png");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T11:03:44.247

src 属性的值是完整路径而不是相对路径，即使您将其设置为相对路径。所以用这种方式改变它：

```
function toggleSearch() {
    var style = document.getElementById("searchPopDown").style;
    var img = document.getElementById("xxxx");
    //console.log(img.src); /* will show you the full path to image source */
    style.display = (style.display != "none") ? "none" : "block";
    img.src = (img.src.indexOf("images/expand.png") < 0 )
        ? "images/expand.png"
        : "images/collapse.png";
} 
```

另一种解决方案是：

```
style.display = (style.display != "none") ? "none" : "block";
// Sure it's better to initialize this variable once - 
// somewhere outside the click handler:
var state = {
    'none': 'images/expand.png',
    'block': 'images/collapse.png'
}
img.src = state[style.display]; 
```

# jquery - 使用嵌套可排序插件的 JQuery 冲突

> ID：11967999
> 
> 赞同：0
> 
> 时间：2012-08-15T10:48:03.760
> 
> 标签：jquery, jquery-ui

我正在使用 jquery 嵌套可排序插件在我的站点中进行拖放功能。我的主要布局中包含一些 Javascript，这会造成拖放问题。包含的 JS 文件是

```
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/jq/jquery-1.7.2.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/jquery.dropdownPlain.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/ui.core.pack.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/ui.tabs.pack.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/tools.scrollable.pack.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/tools.scrollable.circular.pack.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/tools.scrollable.navigator.pack.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/tools.scrollable.autoscroll.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/tools.tabs-1.0.4.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/jquery.color.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/jquery.panda.js') }}"></script> 
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/theblock/jquery.prettyPhoto.js') }}"></script>

<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/jq/jquery-ui-1.8.21.custom.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/nestedsortable.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/munichinnovationgroup/js/dragdrop.js') }}"></script> 
```

当我尝试拖动项目时，我在控制台中看到此错误

```
TypeError: this.helper.scrollParent is not a function 
```

在 jquery-ui-1.8.21.custom.min.js 中（第 37 行）

知道哪个文件正在创建冲突以及如何删除它

谢谢