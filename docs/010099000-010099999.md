# StackOverflow 问答 10099000-10099999

# php - 使用 PHP 从 MySQL 获取 UTF-8 字符串

> ID：10099011
> 
> 赞同：4
> 
> 时间：2012-04-11T02:19:00.170
> 
> 标签：php, mysql, utf-8

在经历了大约两打帖子之后，我被正式难住了。我有一个带有 utf8_general_ci 整理列的数据库。使用 PHPMyAdmin，我能够正确地查看表中的 UTF-8 数据（至少据我所知。）我认为我想做的事情很简单。我已经通过多种方式查询了数据，我只想回显 utf-8 值：

```
echo bin2hex("more…"); //note "…" is a special character
6d 6f 72 65 e2 80 a6 (Hex Value) 
```

但是，如果我只是 echo $row->value 我得到：

```
6d 6f 72 65 85 
```

它给出的 UTF-8 编码：

```
6d 6f 72 65 c2 85 
```

我读过的大多数帖子都说要使用 mysql_set_charset("utf8") 但这确实搞砸了：

```
6d 6f 72 65 26 61 63 69 72 63 3b 80 26 62 72 76 62 61 72 3b 
```

最后使用 mysql_set_charset("utf8") & utf8_encode($var):

```
6d 6f 72 65 26 61 63 69 72 63 3b c2 80 26 62 72 76 62 61 72 3b 
```

我还尝试在 PHP 中设置 UTF8 设置。Godaddy 使这变得更加困难，所以我使用 ini_set 完成了。但是 mbstring.encoding_translation 不会打开。

```
// UTF8 settings
ini_set('mbstring.language',            'Neutral');
ini_set('mbstring.internal_encoding',       'UTF-8');
ini_set('mbstring.http_input',          'UTF-8');
ini_set('mbstring.http_output',         'UTF-8');
ini_set('mbstring.encoding_translation',    'On');
ini_set('mbstring.detect_order',        'auto');
ini_set('mbstring.substitute_character',    'long'); 
```

关于我需要做什么的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:06:55.700

我敢打赌，您的实际数据可能会以 utf8 以外的方式存储。

首先确保您的数据库设置正确，这意味着所有内容都真正使用 UTF-8 编码存储。

这是我在遇到类似问题时所做的：

始终在干净的表中进行测试，这意味着您应该出于测试目的创建新的数据库和表，并且从一开始就确保实际存储在数据库中的所有数据都是真正的 utf8 编码。

确保数据库编码为 utf8：

```
CREATE DATABASE `test` CHARACTER SET `utf8` COLLATE `utf8_general_ci`; 
```

确保包含文本的字段使用 utf8 编码：

```
CREATE TABLE `test` \
(`id` INT AUTO_INCREMENT PRIMARY KEY, \
`name` VARCHAR(512) COLLATE `utf8_general_ci`) \
CHARACTER SET `utf8` COLLATE `utf8_general_ci`; 
```

确保用于检索数据的连接返回未修改的 UTF-8 字符串。

```
$connection = mysql_connect( ... );
// Make sure that connection does not change encoding:
mysql_set_charset('utf8', $connection);
// Insert some test data:
mysql_query("INSERT INTO `test` (`name`) VALUES (`Ab✓cdÄö`)", $connection); 
```

之后尝试阅读它并检查它是否像它应该的那样工作，如果它工作那么你知道问题是你现有的数据库、表结构或连接中的某些东西是错误的，应该是我们刚刚在测试中设置的类似的东西环境。

如果您使用 phpmyadmin，只需将所有内容设置为 utf8 并选择在每个点都相同的合适 utf8 排序规则。然后尝试使用 phpmyadmin 将一些数据添加到表中，并尝试使用您的 php 应用程序读取它。utf8_general_ci 应该可以正常工作。

这里的一些信息： [MySQL 连接字符集和排序规则](http://dev.mysql.com/doc/refman/5.1/en/charset-connection.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:50:28.860

使用[PDO](http://php.net/manual/en/book.pdo.php)，您可以轻松更改字符集。它还支持准备好的语句、事务等。所以你只需要在创建类时设置字符集就可以了。

来自[PHP 手册评论](http://www.php.net/manual/en/book.pdo.php#98659)：

```
$db = new PDO('mysql:host=your_hostname;dbname=your_db;charset=UTF-8', $user, $pass); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T02:37:09.103

你可以试试这个：

```
SET NAMES utf8;
SET CHARACTER SET utf8; 
```

看[这里](https://stackoverflow.com/questions/405684/php-mysql-with-encoding-problems)，[这里](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)和[这里](http://php.net/manual/en/function.mysql-set-charset.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T05:16:40.507

感谢 Deceze，罪魁祸首最终是一个需要替换为的 htmlentities 调用：

```
htmlspecialchars($row['col'], ENT_QUOTES, "UTF-8"); 
```

最后，我只是误读了自己的代码。毕竟这一切都是那么微不足道的事情。令人沮丧，但很高兴找到了解决方案。

感谢你的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-17T15:31:12.053

这篇文章解释了在 PHP 和 MySQL 中使用 UTF-8 的所有方面：

*   [PHP 和 MySQL 的 UTF-8 入门](http://bit.ly/1ma0wIz)

希望对您有所帮助并节省您的时间。

# python - ImportError：无法导入名称计数器

> ID：10099013
> 
> 赞同：16
> 
> 时间：2012-04-11T02:19:07.637
> 
> 标签：python

我曾尝试使用 Counter() 但每次我这样做：

```
from collections import Counter 
```

我收到一条错误消息：

```
Traceback (most recent call last):
  File "<web session>", line 1, in <module>
ImportError: cannot import name Counter 
```

我真的必须制作一个包含计数器的文件，然后从那里导入它吗？我是初学者，所以只有最基本的答案才行。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-25T18:26:50.627

Counter 仅支持 python2.7 及更高版本，在早期版本中不可用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-08-12T20:39:47.717

利用

```
from collections import Counter 
```

并确保`C`字母 of`Counter`是大写字母。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T02:21:53.867

您可以将列表转换为 a `set`：

```
l = ['a','b', 'c', 'a', 'd', 'e', 's', 'd', 'e', 'c']
print (len(set(l)) #prints  6 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T02:36:37.253

我认为您不想使用集合中的 Counter 。当您想要执行诸如计算每个单词的出现次数之类的操作时，使用计数器。例如：

```
from collections import Counter
Counter(['dog','cat','dog']) # Should output Counter({'dog': 2, 'cat': 1}) 
```

要计算列表中不同单词的数量，您可以尝试使用以下方法：

```
len(set(yourList)) 
```

以避免不同情况下的重复：

```
len(set(word.lower() for word in yourList)) 
```

与列表不同，一个集合只允许包含它所包含的项目的一个实例。

您可能拥有标准库中不包含 Counter 的早期版本的 Python。如果是这种情况，您应该尽可能更新到较新的版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-01T07:12:30.707

**在 Python3 中**

```
import collections
a=collections.Counter(list(i for i in input()))
print(a) 
```

输入- `aaabbbcccc`

输出- `Counter({'c': 4, 'a': 3, 'b': 3})`

如果你想要元素然后使用`a.elements()`, 获取值使用`a.values()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-14T11:12:32.550

重命名您的文件，就像您的文件命名为集合或计数器一样。之后，这将起作用

# biztalk - 创建用于接收 zip 文件的 wcf 接收位置

> ID：10099017
> 
> 赞同：0
> 
> 时间：2012-04-11T02:19:59.940
> 
> 标签：biztalk

我们要创建一个通用的 wcf 接收位置，它必须非常通用，就像文件适配器一样，只接收它接收到的任何内容并传递到消息框，即它应该允许客户端提交一个 zip 文件，一个平面文件或任何 xml，我很困惑如何实现这一点，我只能想到将架构定义为 xsd:any child，但它适用于 zip 文件吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:47:52.920

有两种可能的方法可以在单个位置执行单独的消息“解包”。使用其中任何一个，您都需要构建、购买或借用自定义管道组件进行解压缩，因为这不是标准的 BizTalk 功能。以下管道组件使用开源 zip 库： http: [//www.codeproject.com/Articles/12867/UnzipDisassembler-A-custom-pipeline-component-for](http://www.codeproject.com/Articles/12867/UnzipDisassembler-A-custom-pipeline-component-for)

您现在可以创建一个自定义管道，其中包含解压缩反汇编程序、平面文件反汇编程序和 Xml 反汇编程序，所有这些都在管道的反汇编阶段。这*应该*能够拾取和解包任何类型的文件。

不过，更好的建议是使用 3 个不同的接收位置，全部连接到同一个接收端口，使用单独的文件掩码过滤器（“ *.zip”、“.* csv”、“*.xml”）来确定哪个文件取货和处理。如果您稍后需要添加不同的文件类型，这将更有效，并且更易于增强。

# asp.net-mvc-3 - NHibernate - 随机出现“无法找到持久性”

> ID：10099018
> 
> 赞同：1
> 
> 时间：2012-04-11T02:20:24.820
> 
> 标签：asp.net-mvc-3, nhibernate, iis-6

我看过很多帖子回复：上述问题（无法找到持久性）。但是我们遇到的问题是这个错误在我们的 Web 应用程序（ASP.Net MVC）中随机发生。此外，当我们重新启动应用程序池时，问题就消失了。

大多数错误发生在缓存的实体上。请参阅下面的映射。

```
 <class name="Privilege" table="PRIVILEGE" lazy="false">
<cache usage="nonstrict-read-write"/>
<id name="Id" />
<property name="Description" column="DESCRIPTION" not-null="true" />
<set name="RoleCollection" table="PRIVILEGE_ROLE">
  <cache usage="nonstrict-read-write"/>
  <key column="PRIVILEGE_ID" foreign-key="PRIVILEGE_ROLE_FK1" />
  <many-to-many class="Role" column="ROLE_ID" foreign-key="PRIVILEGE_ROLE_FK2" />
</set> 
```

```
<class name="Role" table="ROLE" lazy="false" >
<cache usage="nonstrict-read-write"/>
<id name="Id"  />
<property name="Description" column="DESCRIPTION" not-null="true" />
<set name="PrincipalCollection" table="ROLE_PRINCIPAL">
  <cache usage="nonstrict-read-write"/>
  <key column="ROLE_ID" foreign-key="ROLE_PRINCIPAL_FK1" />
  <many-to-many class="Principal" column="PRINCIPAL_ID" foreign-key="ROLE_PRINCIPAL_FK2" />
</set> 
```

这可能与 NHb 会话损坏有关吗？如果有人至少可以指出解决此问题的方向，我们将不胜感激，因为也无法始终如一地重现该问题。（我们使用 NHb 3.1.0.4000）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:59:20.423

很抱歉迟到提供更新。

我已经找到了原因，这恰好是 Nhibernate Session Factory 的初始化方式。

1.  Nhb 会话工厂是惰性启动的。即在第一个需要数据库会话的 HTTP 请求时。（即仅在主动需要时创建）
2.  一旦创建它就会被重复使用，因为它是一个单例
3.  我们已将应用程序池配置为每天（凌晨 4 点）回收，我们注意到异常的第一次出现也大致在同一时间范围内。
4.  当用户 (HTTP) 请求落在应用程序池回收窗口内时，该问题看起来像是 IIS 多线程和 NHb 会话工厂实现的组合。

解决方案

1.  回到急切的初始化。即 NHb 会话工厂的初始化现在发生在 Application_Start。
2.  因此，HTTP 用户请求“始终”有一个现成的会话因素可供使用。

Not only is this approach fixed the issue, I think it's a better option from a performance point of view. Eagerly doing the costly operation of Session Factory initialization rather than putting more weight on a particular user request is more reflective of the problem at hand.

We are running this modified version in prod for a month now without any issues.

# c# - 使用 HTML 文件作为模板使用 ABCpdf 创建 PDF

> ID：10099020
> 
> 赞同：0
> 
> 时间：2012-04-11T02:20:32.880
> 
> 标签：c#, asp.net, pdf, pdf-generation, abcpdf

如何使用 HTML 作为模板，然后替换其中的文本，然后使用 ABCpdf 将其转换为 PDF？是否有任何示例代码可以做到这一点？提前致谢！

我正在使用 C# ASP.NET

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T02:26:33.617

[http://www.websupergoo.com/helppdf6net/source/5-abcpdf6/doc/1-methods/addimageurl.htm](http://www.websupergoo.com/helppdf6net/source/5-abcpdf6/doc/1-methods/addimageurl.htm)

将服务器上 html 模板的绝对路径传递给 AddImageUrl 函数。

```
Doc theDoc = new Doc();
theDoc.AddImageUrl("http://www.google.com/");
theDoc.Save(Server.MapPath("htmlimport.pdf"));
theDoc.Clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:53:07.453

将是一场噩梦，最简单的方法是为您的文本创建一个带有空格的网页 pdf，将测量设置为自上而下，您所需要的只是 X、Y 字体名称、大小，然后当您提交文本时只需添加到指定的坐标。

快，非常快，您可以将其作为新的 PDF 流式传输

# javascript - 无法返回 JSON 数组对象的倒数第二个元素的值

> ID：10099023
> 
> 赞同：1
> 
> 时间：2012-04-11T02:21:04.203
> 
> 标签：javascript, json

我无法获得以下 JSON 数组对象的长度。实际上我需要返回倒数第二个数组元素的值。

```
var myObject = { "Maths" : [{"Name" : "Amit", "Marks" : 67, "age" : 23 },
{"Name"  : "Sandeep", "Marks" : 65, "age" : 21 },
{"Name"  : "Shali", "Marks" : 56, "age" : 27 },  
{"Name"  : "Santosh", "Marks" : 78, "age" : 41 }] }

a = myObject.Maths.length - 1;
alert(a);
var b=new Object();
b.mk=myObject.Maths[a]['Marks'];
b.ag=myObject.Maths[a]['age'];
alert(b.mk);
alert(b.ag); 
```

为什么应该返回 56 和 27 时返回 78 和 41？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T02:24:45.207

为什么你认为它会返回 56 和 27？您是否意识到数组索引从 0 开始？
因此，如果 a = 3（长度 - 1、4 - 1 = 3）。

Math 数组的第三个索引正是您在输出中看到的。

编辑：所以，为了得到倒数第二个，你的索引需要长度 - 2。（当然要确保你的数组实际上足够长，不会遇到越界错误）

# .net - BackgroundWorker_DoWork 导致 UI 无响应？

> ID：10099025
> 
> 赞同：1
> 
> 时间：2012-04-11T02:21:16.117
> 
> 标签：.net, multithreading, winforms, backgroundworker

我正在使用后台工作人员使用 tableadapter.fill() 填充一堆数据集。出于某种原因，它们导致 UI 无响应。这怎么可能？我不会用它向 UI 报告任何信息……它只是应该在后台运行，没有进度条。

```
Me.spOpportunityTableAdapter.Fill(Me.DsBdPipeline.spOpportunity, CType(ActiveStatus, Integer))
Me.ClientTableAdapter.Fill(Me.DsBdPipeline.Client)
Me.ClientTypeTableAdapter.Fill(Me.DsBdPipeline.ClientType)
Me.ClientPriorityTableAdapter.Fill(Me.DsBdPipeline.ClientPriority)
Me.OpportunityStatusTableAdapter.Fill(Me.DsBdPipeline.OpportunityStatus)
Me.MarketSegmentTableAdapter.Fill(Me.DsBdPipeline.MarketSegment)
Me.ProcurementTypeTableAdapter.Fill(Me.DsBdPipeline.ProcurementType)
Me.BusDevProjectTableAdapter.Fill(Me.DsBdPipeline.BusDevProject)
Me.ProjectTableAdapter.Fill(Me.DsBdPipeline.Project)
Me.StateTableAdapter.Fill(Me.DsBdPipeline.State)
Me.OrgMapTableAdapter.Fill(Me.DsBdPipeline.OrgMap)
Me.EmployeeTableAdapter.Fill(Me.DsBdPipeline.Employee)
Me.ClientServiceManagerViewTableAdapter.Fill(Me.DsBdPipeline.ClientServiceManagerView) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:16:22.143

老实说，我不知道为什么这会给某些用户而不是其他用户带来麻烦，但这就是解决问题的原因。

我将其追溯到`TableAdapter.Fill`在 backgroundworker 方法中执行的`DoWork`方法。对我来说，在后台线程上执行的某些东西没有用它的进度更新 UI 会导致 UI 无响应，这对我来说毫无意义。所以我认为这一定是 TableAdapter 填充的内容绑定到 UI 组件并导致问题（只有上帝知道为什么）。

因此，我将所有设计时数据绑定从控件中移除。我重新排序，以便在后台工作线程中`TableAdapter`填充。在该`RunWorkerCompleted`方法中，我将控件绑定到 BindingSource。

瞧，问题解决了。

# php - 来自数据库驱动表单的多个提交按钮

> ID：10099026
> 
> 赞同：2
> 
> 时间：2012-04-11T02:21:15.847
> 
> 标签：php, mysql, forms, dynamic, submit

好吧，伙计们，

我正在尝试显示数据库表的内容以及 REMOVE 或 PUSH 按钮。REMOVE 按钮将从数据库中删除所述项目。PUSH 按钮会将项目推送到另一个数据库中，然后通过将变量 push 设置为 true 来 FLAG 表示项目。

我有连接和 while 循环回显数据库中的每个项目以及一个 REMOVE 按钮和一个 PUSH 按钮。回声看起来像这样：

```
echo '<form method='post' name='$ID' action='$_PHP_SELF'>
    <tr>
        <td width='5%' align='center'>$ID</td>
        <td width='75%'>$content</td>
        <td width='10%' align='center'><input type='submit' name='remove' id='remove' value='REMOVE'></td>
        <td width='10%' align='center'><input type='submit' name='push' id='push' value='PUSH'></td>
    </tr>
</form>'; 
```

我遇到的问题是如何设置一个简单的提交代码，该代码将检查表单并推送或删除该特定项目。If/Else 或 Switch 语句不起作用，因为我期望有几十个数据库条目，并且我希望提交代码本身也是动态的。

我开始：

```
if(isset($_POST['push'])){
 echo "PUSH ".$ID." TO DATABASE";
}

if(isset($_POST['remove'])){
 echo "REMOVE ".$ID." FROM DATABASE";
} 
```

但是这两个都只返回最后一个 $ID 变量。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T02:29:00.813

使用它自己的两个按钮使每个相关行都成为自己的表单。他们都可以提交到同一个页面。此外，将 ID 保留在隐藏字段中（并验证服务器端），而不是作为表单名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T02:29:57.830

一个简单的解决方案是将您的 HTML 输出更改为具有两个表单，每个表单提交一个。你可以保持你的 PHP 完全一样。

编辑：为了动态获取按下按钮的 ID，然后添加一个带有 ID 的隐藏数据字段，如下所示：

```
<tr>
    <td width='5%' align='center'>$ID</td>
    <td width='75%'>$content</td>
    <td width='10%' align='center'>
        <form method='post' action='$_PHP_SELF'>
            <input type='hidden' value='$ID' name='id'>
            <input type='submit' name='remove' id='remove' value='REMOVE'>
            </form>
    </td>
    <td width='10%' align='center'>
        <form method='post' name='$ID' action='$_PHP_SELF'>
            <input type='hidden' value='$ID' name='id'>
            <input type='submit' name='push' id='push' value='PUSH'>
        </form>
    </td>
</tr> 
```

然后，您的 PHP 将是：

```
$ID=mysql_real_escape_string($_POST['id']); //Encapsulate in this function to prevent bad IDs causing SQL injections.
if(isset($_POST['push'])){
 echo "PUSH ".$ID." TO DATABASE";
}

if(isset($_POST['remove'])){
 echo "REMOVE ".$ID." FROM DATABASE";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T02:33:14.890

按照本教程创建复选框系统和 php 处理器。 [PHP 复选框](http://www.html-form-guide.com/php-form/php-form-checkbox.html)

您可以通过以下两种方式之一进行操作。如果您希望用户能够通过一个链接一次删除多个项目，您可以这样做。

让用户通过复选框选择尽可能多的行。然后点击“删除”或“推送”按钮，将其发送到另一个页面，并处理每一行。

另一种方法是在每行旁边有一个 REMOVE 和 PUSH 按钮，一次删除或推动一行。我会推荐第一种方法。如果您遵循该指南，则它非常简单。

# objective-c - memset 做什么（在 CoreAudio 中使用）？

> ID：10099032
> 
> 赞同：1
> 
> 时间：2012-04-11T02:22:16.677
> 
> 标签：objective-c, ios

这里真正的基本问题：

我见过一堆`memset`处理结构时使用的 CoreAudio 代码，但我无法弄清楚原因。这是来自 .m ObjC 文件。

这是下面代码块中的行：

```
memset(&clientFormat, 0, sizeof(clientFormat)); 
```

//---------------

```
 AudioStreamBasicDescription clientFormat;
    if ( sourceFormat.mFormatID == kAudioFormatLinearPCM ) {
    clientFormat = sourceFormat;
    } else {
    memset(&clientFormat, 0, sizeof(clientFormat));
    int sampleSize = sizeof(AudioSampleType);
    clientFormat.mFormatID = kAudioFormatLinearPCM;
    clientFormat.mFormatFlags = kAudioFormatFlagsCanonical;
    clientFormat.mBitsPerChannel = 8 * sampleSize;
    clientFormat.mChannelsPerFrame = sourceFormat.mChannelsPerFrame;
    clientFormat.mFramesPerPacket = 1;
    clientFormat.mBytesPerPacket = clientFormat.mBytesPerFrame = sourceFormat.mChannelsPerFrame * sampleSize;
    clientFormat.mSampleRate = sourceFormat.mSampleRate;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T02:26:12.463

正如调用的那样，它将内存设置为`&clientFormat`，长度为`sizeof(clientFormat)`，到`0`。这是必需的，因为 C 中的内存在`0`使用`malloc()`和大多数其他分配函数分配后不会被清除。

# ruby-on-rails - Rails 3：如何在我的 select_all 查询中返回玩家数量？

> ID：10099037
> 
> 赞同：0
> 
> 时间：2012-04-11T02:23:18.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我目前有一个带有 Player 对象列表的 Game 模型......

```
has_many :players, :dependent => :destroy 
```

...并且我有以下语句来返回我的数据库中所有 Game 对象的名称和 ID ...

```
self.connection.select_all("select id, name from games") 
```

...我怎样才能包括每个游戏的玩家数量以及 id 和名称？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:25:35.893

我认为这应该有效：

```
self.connection.select_all("SELECT games.id, games.name, COUNT(players.id) AS player_count FROM games LEFT JOIN players ON games.id=players.game_id GROUP BY games.id") 
```

# c++ - 显式调用析构函数时出现c ++内存错误（“双重释放或损坏”）

> ID：10099039
> 
> 赞同：0
> 
> 时间：2012-04-11T02:23:37.220
> 
> 标签：c++, memory, glibc

我遇到了“*** glibc detected *** /home/ubuntu[....] : double free or corruption (fasttop) : 0x09851168 ***”问题。

调试我发现了似乎是问题根源的行：

```
data[i]->~Class(); 
```

指的是

```
 class Class {
public:
    Class();
    Class(char *name, double value);
    virtual ~Class();
    char *name;
    double value;
private:

}; 
```

然后

```
 Class::Class() {
}

Class::Class(char* name, double value){
    this->name = new char[std::strlen(name)];
    std::strcpy(this->name, name);
    this->value = value;
}

Class::~Class() {
    delete name;
} 
```

现在，显然我在那里做错了什么。谁能告诉我什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T02:25:20.653

您做错的事情是显式调用析构函数：

```
data[i]->~Class(); 
```

除非你*绝对*知道你应该明确地调用它（这是不寻常的，许多大型程序从来不需要这样做），你可能应该改用`delete`：

```
delete data[i]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T02:25:51.280

```
data[i]->~Class(); 
```

你永远不应该这样调用析构函数。`delete`如果它是用 分配的，或者`new`什么都不做，当对象超出范围时将调用析构函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T02:29:33.740

我只知道您在几种情况下使用：`data[i]->~Class();`. 一种是您正在使用placement new 在该位置创建一个对象。另一个是您通过销毁对象来重新初始化一个对象，然后立即使用placement new 在那里创建一个新对象。这两种技术都是*相当*先进的技术，坦率地说，相当不寻常，除非您正在创建自己的集合类。

我的猜测是 1）你不需要那个，2）你没有真正向我们展示重要的代码（这很可能是围绕显式 dtor 调用的东西）。

您确实还有另一个小问题，即使用 分配`name`和`new[]`删除它`delete name;`- 两者应该匹配，所以您应该使用`delete [] name;`. 然而，鉴于这是一个数组`char`，这主要是一个技术问题——在这种情况下，它几乎肯定不会造成问题。如果它是一组具有重要析构函数的对象，典型的症状是一些（大多数）对象没有被正确销毁（即它们的析构函数不会被调用）。从理论上讲，这只是未定义的行为，所以任何事情都*可能*发生，但它成为问题根源的真正机会非常渺茫（特别是，正如我所说，在数组的情况下`char`）。

当然，你真正应该做的是做`name`一个`std::string`并完全跳过所有废话。

# javascript - Safari 中的 jQuery 视差滞后

> ID：10099041
> 
> 赞同：1
> 
> 时间：2012-04-11T02:23:43.837
> 
> 标签：javascript, jquery, safari, webkit

我有一个用于创建视差样式效果的脚本。当用户滚动时，它会更新图像的 css left 属性。

它在 Firefox 中看起来非常平滑，但在 safari 中它看起来非常糟糕（与 chrome 相同，但没有 safari 的程度）。

是否有任何人都知道的这个问题的解决方案？

**更新**

我很想展示一些代码，但它是针对客户的，我不想公开任何设计。

它使用了大量基于百分比缩放的大图像，我认为这是这里的主要问题。移除设计中较大的图像之一后，滚动时的延迟似乎大大减少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T02:32:21.630

如果您可以在[jsfiddle.net](http://jsfiddle.net)上提供一个说明问题的示例，将会有所帮助。话虽如此，您可以通过使用 CSS 过渡来平滑 Safari 和 Chrome 中的移动：http: [//developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/AnimatingCSSTransitions/AnimatingCSSTransitions。 html](http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/AnimatingCSSTransitions/AnimatingCSSTransitions.html)

像这样的东西：

```
img {
    -webkit-transition-property: left;
    -webkit-transition-duration: 0.5s;
} 
```

您将需要调整持续时间以达到所需的效果。还要更改选择器以仅匹配有问题的图像；此示例匹配文档中的所有图像。

# audio-streaming - 如何设置音频链接的到期日期

> ID：10099048
> 
> 赞同：0
> 
> 时间：2012-04-11T02:25:08.877
> 
> 标签：audio-streaming

我想将音频文件上传到网站，并且想设置文件或链接的过期时间。

我不希望用户重新播放文件，我想让他们只听到一次音频文件..

是否可以？任何类型的软件或音频共享网站都可以做到这一点？

请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:28:16.077

要设置下载文件的过期时间（或直接从您的服务器流式传输），您可以简单地使用 PHP 提供文件，并`403 Forbidden`在请求的文件“过期”时抛出一个或其他错误。

请注意，如果有人以前下载过该文件，则该文件仍然可以播放。如果你想防止这种情况发生，那么你需要巧妙地使用 DRM。我强烈建议避免这条路线，因为任何想要窃取您的音频的人都可以轻松地这样做，而您只会给您网站的合法用户带来不便。DRM 对阻止未经授权的媒体使用几乎没有什么作用。

# unix - 对文件 i/o 所做的更改不可见

> ID：10099050
> 
> 赞同：0
> 
> 时间：2012-04-11T02:25:22.730
> 
> 标签：unix, transactions, io

我有一个 python 脚本，它打开一个文件并写一堆东西然后关闭它。我通过连接到 ssh 来运行这个 python 文件。另一方面，我有另一个连接到同一台机器的 ssh 终端，我想通过正在运行的脚本监视对文件的更改/写入。但是，当我执行 cat "file_name" 或类似的操作时，文件似乎是空的。只有在脚本终止后，我才能看到这些东西。

首先，这与事务的原子性属性有关吗？

其次，有没有办法实现对我的文件的监控？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:24:54.247

你的文件有多大？

如果它很小（对于一些模糊的小定义，但可能低于 4 KiB），那么您的 Python 脚本很可能正在缓冲它在内存中所做的更改，并且仅在您关闭文件时才写入磁盘。

如果您的文件很大（例如，大于 64 KiB），那么这不是解释。在中等大小的情况下，它相对不太可能成为解释；对于 1 KiB 或更小的真正小尺寸，这是非常合理的。

考虑寻找刷新文件更改或内存映射文件的方法。

# arrays - 单个 foreach 中的 2 个数组 - perl

> ID：10099056
> 
> 赞同：1
> 
> 时间：2012-04-11T02:26:33.717
> 
> 标签：arrays, perl, foreach

我很讨厌 perl，你可能会说...我正在使用脚本来使用 Net::Application::Session 将更改应用到 Cisco 设备。我有 2 个数组，1 个是接口，1 个是接口描述。我需要像这样输入命令“$s->cmd[]”：

```
$s->cmd("interface $configDescription");
$s->cmd("description >> WAP - $desName <<"); 
```

但我无法弄清楚如何使用 foreach 语句来做到这一点。下面是我目前正在做的事情，这只改变了数组中的最后一行。请建议...我是这个网站的菜鸟，如果这还不够信息，请告诉我需要什么。谢谢你。

```
foreach $configDescription (@changeme) {
   foreach $desName (@changename) {
      $s->cmd("interface $configDescription");
      $s->cmd("description >> WAP - $desName <<");
   };
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T03:15:19.943

它们被称为并行数组。

```
for my $i (0..$#changeme) {
   my $configDescription = $changeme[$i];
   my $desName           = $changename[$i];
   $s->cmd("interface $configDescription");
   $s->cmd("description >> WAP - $desName <<");
} 
```

或者：（破坏性的）

```
while (@changeme) {
   my $configDescription = shift(@changeme);
   my $desName           = shift(@changename);
   $s->cmd("interface $configDescription");
   $s->cmd("description >> WAP - $desName <<");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:34:53.660

另一种方式，如果你和我一样喜欢 map-grep 链。

```
map { 
    $s->cmd("interface $_->[0]");
    $s->cmd("description >> WAP - $_->[1] <<");
} 
map { [ $changeme[$_], $changename[$_] ] } 
0..$#changeme
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T04:17:49.633

```
use Algorithm::Loops 'MapCar'; # or MapCarE, MapCarU, etc.

MapCar {
    my ($configDescription, $desName) = @_;
    $s->cmd("interface $configDescription");
    $s->cmd("description >> WAP - $desName <<");
} \@changeme, \@changename; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T19:33:16.340

我想我会将其添加为另一种解决方案，仅用于文档目的。

```
 use List::MoreUtils qw( each_array );

 my $it = each_array( @changeme, @changename );
              while ( my ($configDescription, $desName) = $it->() ) {
                 $s->cmd("interface $configDescription");
                 $s->cmd("description >> WAP - $desName <<");
              }; 
```

# javascript - Meteor、Ember.js 和 Backbone.js 之间的主要区别是什么？

> ID：10099059
> 
> 赞同：248
> 
> 时间：2012-04-11T02:26:41.493
> 
> 标签：javascript, backbone.js, knockout.js, ember.js, meteor

学习 Ember.js / Backbone.js 已经在我的待办事项列表上一段时间了。现在[Meteor](http://meteor.com/)出来了，我想知道是否有任何有 Meteor、Ember.js 和 Backbone.js 经验的人可以为没有任何经验的人总结这三个 JavaScript 框架的主要区别和优缺点。

具体来说，我想知道每个框架更适合哪些任务，以及为什么其他框架不适合。

编辑：现在我阅读了更多关于 Meteor 的内容，它似乎更类似于 Knockout.js 而不是 Backbone.js。因此，也欢迎与 Knockout.js 进行任何比较。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-04-11T11:58:19.313

在这里 [http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)对各种 MVx JS 框架进行了很好的总结/比较， 随后在评论中也进行了很好的讨论. 我想我在这里见过 Gordon（谁写的）所以也许你会得到他的回复。

我想说，如果您想学习这种应用程序开发风格，那么一方面，大量的开源主干示例可能对您有好处。但另一方面，Ember*包*虽然是新的，但实际上 IMO 比骨干包更完整。

两者都使您能够以各种可能令人困惑的方式实现事物，但是 Ember 提供了更多您必须自己在骨干网中编写的代码作为标准，对我个人而言，这对于快速原型制作比丰富的代码更重要可用的主干示例。

有更成熟的用于主干数据持久性的插件，但是社区围绕 Ember 引起了很大的轰动，许多贡献库都取得了长足的进步。我（和其他人）对 Stack Overflow 上一个相对较新的框架的质量响应速度之快让我感到惊喜。

当您说流星时，我们指的是完全不同的东西。如果您想在客户端和服务器端进行更多代码重用，请查看最近在 node.js 上运行的开源 yahoo mojito [https://github.com/yahoo/mojito](https://github.com/yahoo/mojito) - 我一直在搞砸在上周使用它，并且如果您熟悉骨干/余烬或任何其他人，那么它很快就会掌握。

我还应该说我在某些生产系统上使用了 Knockout.js，但从未将它用于完全成熟的“应用程序”。我已经将它连接到一个 mongo 界面，用于深入了解和分页存储在 mongo 中的日志。我真的很喜欢它，但我不会觉得在里面建造太大的东西。

好吧，这有点乱 - 不是吗:)

很高兴与任何有兴趣的人谈论它。我在愤怒/生产中使用了许多这样的框架（包括未在“前 10 名”文章中列出的东西），工作中的人厌倦了听我谈论我认为的 JS :-D

# java - 请求-响应模式的 JMS

> ID：10099060
> 
> 赞同：0
> 
> 时间：2012-04-11T02:26:45.330
> 
> 标签：java, jms

我们计划用 Java 实现我们的新系统。由于系统的性质，需要与各种内网/外网/互联网系统交互，并与各种外部系统共享相同的逻辑（稍作调整），我们计划将业务逻辑移出前端，使其成为服务，并计划使用JMS来互连表示层和业务逻辑层。表示层发送请求，业务逻辑层对处理结果发送响应。

在做了一个小型的 POC 系统后，我们发现这种方式非常有前景。但是 Oracle 的人（我们计划将 weblogic 用于 ap 服务器和 JMS 服务器）说总会有性能问题，因为消息队列的本质不是请求-响应模式。

对甲骨文家伙的意见有什么建议吗？我们对 Java 世界还很陌生（完全没有关于 Java 的经验，必须在内部实现这个系统，没有外包选项），尽管我们以每秒大约 300 个 req-resp 的速度测试了我们的 POC（这似乎对我们的系统），我们仍然无法确定系统上线后是否肯定会出现性能下降......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T02:46:43.087

绝对不是这样的性能问题。

由于 JMS 的事务性质，您会有些损失。来自表示层的消息必须在业务层开始处理之前记录在日志中，同样必须在表示层开始处理回复之前记录回复。

然而，这个小缺点被重负载期间并行处理的能力以及在极端负载下安全排队请求的能力所弥补。（在这些情况下，RPC 应用程序只是简单地死掉了，JMS 只是慢了下来）。

主要问题是处理异步环境中的错误。如果您的表示层发送一个请求，在假设业务服务器端出现问题之前，它应该合理地等待多长时间的回复？如果表示层炸毁了您应该如何处理回复消息，特别是如果它是某种更新？所有这些问题都可以解决，但是，您需要考虑如何解决。

# php - PHP 中的 Rss 阅读器

> ID：10099062
> 
> 赞同：2
> 
> 时间：2012-04-11T02:27:01.127
> 
> 标签：php, rss

```
 header('Access-Control-Allow-Origin: *');
 $tmpFile = 'tmpFile.txt';

 $val="http://rss.news.yahoo.com/rss/topstories";
  $curlHandle = curl_init($val);  
 $filePointer = fopen($tmpFile, "w");  
 curl_setopt($curlHandle, CURLOPT_FILE, $filePointer);  
 curl_exec($curlHandle);
 curl_close($curlHandle);
 fclose($filePointer); 

 $linesArr = file($tmpFile);  
 foreach($linesArr as $eachLine){
 echo($eachLine);
} 
```

该程序应该从 yahoo rss 站点获取所有材料并将它们输出到 tmpFile。

执行程序后，我打开了 tmpFile.txt。表明

c1.ops.sp1.yahoo.com 未压缩/分块 Wed Apr 11 01:46:41 UTC 2012 -->

这看起来不对。我粘贴了网址[http://rss.news.yahoo.com/rss/topstories](http://rss.news.yahoo.com/rss/topstories)有很多材料返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T02:32:25.880

你需要的是`curl_setopt($curlHandle, CURLOPT_ENCODING , "gzip");`......它的饲料`yahoo`用途......`compression``rss`

附加信息包括。

A. `CURLOPT_USERAGENT`.... 如果您不这样做，那就太好了；不要开始看起来像垃圾邮件

B. `CURLOPT_TIMEOUT`...只是为了效率

C. `CURLOPT_FOLLOWLOCATION`.. 因为干净的 URL 和路由的问题

工作代码

```
header ( 'Access-Control-Allow-Origin: *' );
$tmpFile = 'out.txt';

$val = "http://rss.news.yahoo.com/rss/topstories";
$curlHandle = curl_init ( $val );
$filePointer = fopen ( $tmpFile, "w" );
curl_setopt ( $curlHandle, CURLOPT_FILE, $filePointer );
curl_setopt($curlHandle, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/533.2 (KHTML, like Gecko) Chrome/5.0.342.3 Safari/533.2');
curl_setopt($curlHandle, CURLOPT_ENCODING , "gzip");
curl_setopt($curlHandle, CURLOPT_TIMEOUT,5);
curl_setopt($curlHandle, CURLOPT_FOLLOWLOCATION, TRUE);
curl_exec ( $curlHandle );
curl_close ( $curlHandle );
fclose ( $filePointer );

$linesArr = file ( $tmpFile );
foreach ( $linesArr as $eachLine ) {
    echo ($eachLine);
} 
```

我希望这会有所帮助..如果您需要更多信息，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T02:35:41.073

如果你有`http`file_*_contents 的包装器支持：

```
header('Access-Control-Allow-Origin: *');
$tmpFile = 'out.txt';
$content = file_get_contents("http://rss.news.yahoo.com/rss/topstories");
file_put_contents($tmpFile, $content);

echo $content; 
```

# java - 在java中创建文件以供以后使用

> ID：10099063
> 
> 赞同：0
> 
> 时间：2012-04-11T02:27:02.707
> 
> 标签：java, file

我正在编写一个 Java 应用程序，它写入许多文件，然后读取文件以获取它们的值。我正在使用 InstallShield 在 下安装应用程序`C:\Program Files`，这通常是创建临时文件的位置。但是，在使用 Windows 7 时，文件是在用户临时文件夹下创建的，名称是随机的。

这是我的代码...

```
File usersTemp = File.createTempFile("users", null,temp); 
```

这是生成的文件...

```
C:\Users\TP\AppData\Local\Temp\users2343200092608531612.tmp 
```

由于文件是使用随机数生成的，因此很难检索文件以进行处理。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T02:38:16.327

除非您以超级用户身份运行（您可能不是），否则您只能编辑用户主目录中的文件，您可以使用`user.home` [系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)找到该目录：

```
System.getProperty("user.home") 
```

因此，如果您想在应用程序的应用程序数据文件夹中保存文件：

```
File appDataFolder = new File(System.getProperty("user.home"), "Local Settings\\Application Data\\YourProgramName"); 
```

然后将东西保存在该文件夹下，它们会一直存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T02:34:12.097

是否有某些原因不能正常保存文件（随意命名）？我已经为 Windows 7 编写了许多 Java 程序，并且在保存文件时没有遇到任何问题。

只需使用 FileOutputStream 或您通常用来保存文件的任何方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T02:35:43.113

临时文件的定义是它应该只存在很短的时间。似乎您想要创建一个将持续更长时间的文件，可能会在应用程序运行之间保留？如果是这种情况，您应该创建一个具有正确名称的文件...

```
new File("c:\filename.txt").createNewFile(); 
```

这样，无论您在什么操作系统上运行应用程序，您都可以选择合适的目录和名称。

# php - 无法使用 codeigniter 创建图像的两个缩略图

> ID：10099066
> 
> 赞同：1
> 
> 时间：2012-04-11T02:27:44.913
> 
> 标签：php, codeigniter

我正在尝试创建用户上传的图像的两个缩略图。我重复了两次代码，对第二个缩略图的配置进行了一些更改，但我只创建了第一个缩略图，而没有创建第二个缩略图。这是代码：

```
//First Thumbnail
$conf['image_library'] = 'gd2';
$conf['source_image']   = "images/photos/123.jpg";
$conf['create_thumb'] = TRUE;
$conf['thumb_marker'] = "_1";
$conf['maintain_ratio'] = true;
$conf['width']   = 150;
$conf['height']  = 150;
$this->load->library('image_lib', $conf); 
$this->image_lib->resize();

//Second smaller Thumbnail
$conf2['image_library'] = 'gd2';
$conf2['source_image']  = "images/photos/123.jpg";
$conf2['create_thumb'] = TRUE;
$conf2['thumb_marker'] = "_2";
$conf2['maintain_ratio'] = true;
$conf2['width']  = 50;
$conf2['height']     = 50;
$this->load->library('image_lib', $conf2); 
$this->image_lib->resize(); 
```

出于某种原因，第二部分根本不起作用，而第一部分单独工作以及与第二部分一起工作都很好。我想我不应该在同一个地方两次加载图书馆。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T02:33:31.363

你需要清除两者之间的库，使用这个：

```
$this->image_lib->clear(); 
```

如果清除和重新加载不起作用，您可以尝试用初始化函数替换第二个库加载，由于某种原因在 ci_documentation 中没有提到该函数：

```
$this->image_lib->clear();
$this->image_lib->initialize($conf2); 
```

# php - 在 PHP 中迭代一个多维数组

> ID：10099067
> 
> 赞同：0
> 
> 时间：2012-04-11T02:28:04.137
> 
> 标签：php, multidimensional-array

我正在尝试构建一个显示书籍信息的简单页面，我打算将其全部存储在数据库中，但我决定构建一个多维数组并将其存储在其中会更好。

下面的示例中只有 4 本书，但最终可能会达到 100 本书。

我需要帮助迭代这个数组并在 HTML 中显示每个项目，`<li>`但我只需要连续显示 4 个然后开始新行。有人可以告诉我如何做到这一点吗？

```
<?php
$books = array(
        1 => array(
            'name' => 'book 1 name here',
            'url' => '',
            'big_photo' => 'big photo of book 1',
            'small_photo' => 'small photo of book 1',
            'bio' => 'short bio 1'
            ),
        2 => array(
            'name' => 'book 2 name here',
            'url' => '',
            'big_photo' => 'big photo of book 2',
            'small_photo' => 'small photo of book 2',
            'bio' => 'short bio 2'
            ),
        3 => array(
            'name' => 'book 3 name here',
            'url' => '',
            'big_photo' => 'big photo of book  3',
            'small_photo' => 'small photo of book 3',
            'bio' => 'short bio 3'
            ),
        4 => array(
            'name' => 'book 4 name here',
            'url' => '',
            'big_photo' => 'big photo of book 4',
            'small_photo' => 'small photo of book 4',
            'bio' => 'short bio 4'
            )
);

echo $books["1"]["small_photo"];
?> 
```

示例输出

```
<ul>
    <li>books data</li>
    <li>books data</li>
    <li>books data</li>
    <li class="lastRow">books data</li>
    <li>books data</li>
    <li>books data</li>
    <li>books data</li>
    <li class="lastRow">books data</li>
    <li>books data</li>
    <li>books data</li>
    <li>books data</li>
    <li class="lastRow">books data</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T02:41:47.363

自从我编写任何 PHP 以来已经有一段时间了，但应该这样做：

```
$numBooks = count($books);
$j = 0
for ($i = 0; $i < $numBooks; i+=4)
{
    for ($j = $i; $j < $i + 4; $j < $numBooks; ++$j)
    {
        if ($j == 3)
        {
            echo '<li class="lastRow">' . $books[$j]["name"] . "</li>";
        }
        else
        {
            echo "<li>" . $books[$j]["name"] . "</li>";
        }        
    }
    // do whatever you need to break the row here
    $i = $j; 
} 
```

`li`就在单行上实际显示元素而言，您可能希望使用`display:inline`或`inline-block`在您的 css 中。 `float:left`也可以...尝试所有这些，看看哪种最适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:09:40.667

```
<?php

$perRow=4;
$i = 0;
foreach($books as $book){
    if($i === 0){
        echo '<div class="row">';
    }
        echo '<div>';
        echo $book['name']. '<br>';
        echo $book['url']. '<br>';
        echo $book['big_photo']. '<br>';
        echo $book['small_photo']. '<br>';
        echo $book['bio']. '<br><br><br>';
        echo '</div>';

    if($i === $perRow){
        $i = 0;
        echo '</div>';
    }else{
        $i++;
    }
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T02:31:49.633

对行使用计数器并使用模数来决定何时在显示逻辑中中断行。

# c++ - 在哪里可以找到 C++11 参考论文/数字和书籍参考

> ID：10099068
> 
> 赞同：6
> 
> 时间：2012-04-11T02:28:06.657
> 
> 标签：c++, reference, c++11

> **可能重复：**
> [c++11 标准在哪里](https://stackoverflow.com/questions/7747069/where-is-the-c11-standard)

我正在寻找购买/下载一些东西。首先，我想要官方 c++11 参考的数字副本和纸质副本。

我还想要一本书，它是参考的总结，侧重于常用的 c/c++ 函数和 STL，比官方参考本身更易于访问。对于纸质版和数字版也都很棒。我不需要初学者的书，只是一个参考。这个可能会是固执己见，所以随意说出你喜欢哪一个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T02:55:27.847

Nicolai Josuttis 于 2012 年 4 月更新了他的《[The C++ Standard Library](http://www.cppstdlib.com/) for C++11》一书。具体来说，它涵盖了以下几个方面：

*   并发
*   分数算术
*   时钟和计时器
*   随机数和分布
*   新的智能指针
*   常用表达
*   新的 STL 容器，例如数组、前向列表和无序容器
*   新的 STL 算法
*   元组
*   类型特征和类型实用程序

它还涵盖了以下新的 C++11 语言元素：

*   拉姆达斯
*   基于范围的 for 循环
*   移动语义
*   可变参数模板。

Josuttis 还[接受了有关他的新书的采访](http://www.informit.com/articles/article.aspx?p=1846582&WT.mc_id=IT_NL_Content_2012_3_7&rll=1)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T02:42:54.827

有很多关于 STL 的好书，[亚马逊](http://www.amazon.com/Essential-C-and-STL-books/lm/2YJO15RIJZW96)上有一个巨大的列表。一些最流行的 STL 是

*   [有效的 STL：50 种改进标准模板库使用的具体方法](https://rads.stackoverflow.com/amzn/click/com/0201749629)
*   [C++ 标准库：教程和参考](https://rads.stackoverflow.com/amzn/click/com/0201379260)。

对于 C++ 11，有很多位置可供参考，例如

*   [C++11 中最大的变化（以及为什么你应该关心）](http://www.softwarequalityconnection.com/2011/06/the-biggest-changes-in-c11-and-why-you-should-care/)
*   [C++ 11](http://en.wikipedia.org/wiki/C++11)
*   [C++ 参考](http://en.cppreference.com/w/cpp)（这比 C++11 更多，但 C++11 被标记为这样并且很容易注意到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T02:32:44.580

2011年[2 月论文中的](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/)[N3242](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)是您可以获得的最接近“官方”C++11 标准的免费副本...

# math - 计算一个项目的成本？

> ID：10099072
> 
> 赞同：-1
> 
> 时间：2012-04-11T02:29:01.593
> 
> 标签：math, computation, gstreamer

我不确定我说得对不对。

我的问题是，如果给定的是 Net 和 GST，我怎么能得到一个项目的 COST？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T02:30:50.327

基本方程是：

```
net = cost + (gst * cost) = cost * (1.0 + gst) 
```

（用`gst`小数表示）

因此，通过代数（两边除以`1.0 + gst`），您有：

```
cost = net / (1.0 + gst) 
```

# python - 如何将具有 0 值字节的 char * 转换为 python 字符串？

> ID：10099077
> 
> 赞同：6
> 
> 时间：2012-04-11T02:29:43.070
> 
> 标签：python, ctypes

使用 ctypes 模块，我可以轻松地将 POINTER(c_char) 或 c_char_p 类型导入 python，但它们都没有提供一种方法来结束包含零值字节的 python 字符串。

c_char_p 以零结尾，这意味着来自 C 的 char * 数组在第一个零值处终止。

POINTER(c_char) 是导入可以具有 0 值的二进制数据的推荐方法，但似乎没有办法直接将其转换为 python 字符串。

我可以做这个：

```
pixels = clibblah.get_pixels()
a = ""
for i in range(0, clibblah.get_pixel_length()):
    a += pixels[i] 
```

...但是这 1) 看起来不是很 Pythony，并且 2) 需要很长时间（在我的 Mac 上转换 640x480 像素数据块大约需要 2 秒）。

我在堆栈溢出时看到了很多关于这个的问题，但是如果我能看到一个不是人们会说的“你为什么需要这样做？” 或“c_char_p 会做你想做的事”（它不会，正如我上面所描述的）。

我见过的唯一可靠的建议是使用 c api PyString_FromStringAndSize，如下所示：http: [//www.cosc.canterbury.ac.nz/greg.ewing/python/Pyrex/version/Doc/FAQ.html](http://www.cosc.canterbury.ac.nz/greg.ewing/python/Pyrex/version/Doc/FAQ.html)

不过，我真的看不出这有什么帮助，因为 afaik 这是一个 cython 功能，而不是 python 功能。

对于感兴趣的人，我需要这样做的原因是我正在使用 panda3d 和 kinect，而 kinect c api 提供了一个 unsigned char * 值数组，而 panda3d api 亲切地提供了一个 setPixels() 调用，它只需要一个python字符串作为参数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T03:01:08.073

如您所说，使用 a`POINTER(c_char)`获取指向二进制数据数组的指针。要将它们组合成一个字符串，您可以只取它的一部分，因为数组索引使用 ctypes 指针按预期工作：

```
clibblah = ctypes.cdll.LoadLibrary('clibblah.dylib')
get_pixels = clibblah.get_pixels
get_pixels.restype = ctypes.POINTER(ctypes.c_char)

pixels = get_pixels()
num_pixels = clibblah.get_pixel_length()

# Slice the ctypes array into a Python string
a = pixels[:num_pixels] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-02T02:40:49.443

有几种不同的方法。我喜欢`ctypes.string_at`它，因为它并不挑剔：无论您是否提供`c_char_p`类型、指向指针`c_char`、或 void 指针类型，甚至只是一个`int`地址，它都可以工作。

```
s = b'hello\x00world' # create a string containing null bytes
sz = len(s)
from ctypes import *

p = c_char_p(s) # obtain a pointer of various types
p2 = cast(p,POINTER(c_char))
address = cast(p,c_void_p).value

print p.value # by default it is interpreted as null-terminated

print p2[:sz] # various methods of explicitly specifying the full length
print string_at(p,size=sz)
print (c_char * sz).from_address(address).raw 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T02:46:11.283

我不知道主要问题的最佳答案是什么，但这里有一些关于如何`PyString_FromStringAndSize`用来完成你想要的东西的评论。

`PyString_FromStringAndSize`是 Python C API 的一部分：http: [//docs.python.org/c-api/string.html](http://docs.python.org/c-api/string.html)

这意味着您可以使用它来

*   用 C/C++ 编写一个 Python 模块，在其中定义一个新的 Python 数据类型，您的 C 派生字符串与空字符
*   您可以定义该数据类型，以便它提供一个 Python 构造函数，该构造函数接受以某种方式包含指向相关 C 字符串的指针的参数。如果没有任何帮助，构造函数接受的参数可能是`c_void_p`来自 cytpes。
*   您定义的构造函数（在 C/C++ 中）必须将指向 C 字符串的指针存储在成员变量中。它还可能进行复制和/或增加引用计数等。由于构造函数是用 C/C++ 编写的，因此该构造函数中可能存在的任何事情都是可能的。

您必须将其构建到 .dll/.pyd 库中，然后才能将其构建`import`到任何 Python 代码中。

诚然，这是一个相当复杂的过程。希望其他人提出一种更简单的方法，可能直接基于 ctypes 。

# ruby - 如何计算一个页面的出站链接数量？

> ID：10099079
> 
> 赞同：1
> 
> 时间：2012-04-11T02:30:01.583
> 
> 标签：ruby, scraper, open-uri

使用 Ruby 学习抓取。我正在尝试计算给定页面的出站链接数量，但我不确定如何告诉 Ruby 我只想计算出站链接。

我当前的代码：

```
require "open-uri"

# Collect info
puts "What is your URL?"
url = gets.chomp
puts "Your URL is #{url}"
puts "Loading..."

# Check keyword count
page = open(url).read
link_total = page.scan("</a>")
# obl_count = ???
link_count = link_total.count
puts "Your site has a total of #{link_count} links." 
```

我怎样才能完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:36:59.117

就像[您永远不应该使用正则表达式解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)一样，您可能应该使用[nokogiri](http://nokogiri.org/)来为您完成肮脏的工作。

简单来说，您可以使用 CSS 选择器来查找标签。从那里很容易计算：

```
Nokogiri::HTML(page).css('a').length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T12:29:03.983

您可以使用：

[http://anemone.rubyforge.org/](http://anemone.rubyforge.org/)

Anemone 是一个 Ruby 库，可让您快速轻松地编写爬取网站的程序。它提供了一个简单的 DSL，用于在站点的每个页面上执行操作，跳过某些 URL，并计算到站点上给定页面的最短路径。

多线程设计使 Anemone 速度更快。API 使它变得简单。Ruby 的表现力使它变得强大。

# php - Codeigniter -> 图片上传第 1 部分

> ID：10099080
> 
> 赞同：0
> 
> 时间：2012-04-11T02:30:47.800
> 
> 标签：php, codeigniter, image-upload

在我下面的代码中，创建文件夹时似乎没有上传图像，但是如果我返回并刷新上一页并使用创建的文件夹再次尝试上传图像，

我是否必须将上传的内容移动到`is_dir if statement`文件夹中，但是在已经创建文件夹的情况下会发生什么？`else?`

```
$conceptOne = 'conceptOne';
        $conceptTwo = 'conceptTwo';

        $location = $_SERVER['DOCUMENT_ROOT'].'/_assets/quote/uploads/';

        $folderName = $this->quote->getCompanyDetails()->companyName;
        $folderName = str_replace(" ", "_", $folderName);
        $folderName = strtolower($folderName);

        if(!is_dir($location.$folderName))
        {   
            mkdir($location.$folderName);
            chmod($location.$folderName, 0777);

        }else{

        //Set File Settings 
          $config['upload_path'] = $location.$folderName; 
          $config['allowed_types'] = 'jpg|png|pdf'; 
          $config['file_name'] = $conceptOne;
          $config['remove_spaces'] = TRUE;
          $config['overwrite'] = TRUE;
          $config['max_size'] = '1024'; 
          $config['max_width'] = '1024'; 
          $config['max_height'] = '768'; 

          $this->load->library('upload', $config); 

            print_r($config);

          if(!$this->upload->do_upload($conceptOne)) { #= try upload

            $data['uploadError'] = array('uploadError' => $this->upload->display_errors()); #Error

            $this->load->view('layout', $data);

      } // Do upload
          else{
            $data = array('upload_data' => $this->upload->data($conceptOne));

          }// end else
        }// end if folde 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:57:36.753

删除上面的else

```
//Set File Settings 
```

这样它下面的块就不再处于那种状态了。

# javascript - 制作带有自定义控件的 html5 视频/音频播放列表播放器

> ID：10099081
> 
> 赞同：0
> 
> 时间：2012-04-11T02:30:49.073
> 
> 标签：javascript, jquery, html5-video, html5-audio, playlist

我正在制作一个带有自定义控件的 HTML5 视频/音频播放列表播放器。

我有适用于单个视频的自定义控件，但我无法将这些控件和 currentTime/duration 属性绑定到用户可能单击的每个视频上。

这是一个显示我的意思[的jsfiddle 。](http://jsfiddle.net/trpeters1/EyZdy/74/)

代码也在这个问题的底部。请不要害怕，JS 底部 90% 是自定义控件。前 10% 是定义视频对象和`on`单击功能以选择所需的视频。

我已将默认设置为播放 3 个中的“视频 2”。自定义控件确实控制“视频 2”。按钮切换每个视频的播放/暂停，但您会注意到自定义控件仍控制“视频 2”，无论单击哪个按钮。

基本上，我只需要找到一种方法，当您单击每个视频按钮时，所有控件和属性（currentTime，duration）都会绑定到所选视频。

HTML：

```
<button class="icon" data-id="1" >Video 1</button>
<button class="icon" data-id="2">Video 2</button>
<button class="icon" data-id="3">Video 3</button>
<div id="url"  data-id="2"></div>

<div class="videoContainer">  
<video data-id="1" width="100%" height="80%"    poster="http://www.birds.com/wp-content/uploads/home/bird.jpg" >    
<source src="http://video-js.zencoder.com/oceans-clip.mp4" type="video/mp4" />
</video>

<video data-id="2"  width="100%" height="80%"  poster="http://www.logobird.com/wp-content/uploads/2011/03/new-google-chrome-logo.jpg">
<source src="http://www.html5rocks.com/en/tutorials/video/basics/Chrome_ImF.mp4" type="video/mp4" />
</video>

<video data-id="3" width="100%" height="80%"  poster="http://cheerioscoupons.info/wp-content/uploads/_Cheerios-Coupons-1-300x283.jpg">
<source src="http://media.jilion.com/videos/demo/midnight_sun_sv1_360p.mp4" type="video/mp4" />
</video>

    <div class="progress">
        <span class="bufferBar"></span>
        <span class="timeBar"></span>
    </div>

    <div class="control">    
        <div class="btnPlay btn btn-primary" title="Play/Pause video">PLAY</div>        
        <div class="time">
            <span class="current"></span> / 
            <span class="duration"></span> 
        </div>    
        <div class="sound sound2 btn btn-primary" title="Mute/Unmute sound"></div>
        <div class="volume" title="Set volume">VOLUME
            <span class="volumeBar"></span>
        </div>

        <div class="btnFS btn btn-primary" title="Switch to full screen">FULLSCREEN</div>
    </div><!--/control-->   
</div><!--/videocontainer-->​ 
```

JS：

```
var url=$('#url').data('id');
var $video=$('video[data-id="'+url+'"]');
$('video').not($('video[data-id="'+url+'"]')).hide();

$('.icon').click(function(){
var id=$(this).data('id'),
    $video=$("video[data-id='" + id +"']");
$('video').each(function () {
    this.pause();
    //this.currentTime = 0;
});
   $('video').not($video).hide();
   $video.show();    
   $video.get(0).play();   
});    

//before everything get started
$video.on('loadedmetadata', function() {

        //set video properties
        $('.current').text(timeFormat(0));
        $('.duration').text(timeFormat($video.get(0).duration));
        updateVolume(0, 0.7);

        //start to get video buffering data 
        setTimeout(startBuffer, 150);

        //bind video events
        $('.videoContainer').on('click', function() {
            $('.btnPlay').find('i').addClass('icon-pause');
            $(this).unbind('click');
            $video.get(0).play();
        });

    });

    //display video buffering bar
    var startBuffer = function() {
        var currentBuffer = $video.get(0).buffered.end(0);
        var maxduration = $video.get(0).duration;
        var perc = 100 * currentBuffer / maxduration;
        $('.bufferBar').css('width',perc+'%');

        if(currentBuffer < maxduration) {
            setTimeout(startBuffer, 500);
        }
    };    

    //display current video play time
    $video.on('timeupdate', function() {
        var currentPos = $video.get(0).currentTime;
        var maxduration = $video.get(0).duration;
        var perc = 100 * currentPos / maxduration;
        $('.timeBar').css('width',perc+'%');    
        $('.current').text(timeFormat(currentPos));    

    });

    //CONTROLS EVENTS
    //video screen and play button clicked
    $video.on('click', function() { playpause(); } );
    $('.btnPlay').on('click', function() { playpause(); } );
    var playpause = function() {
        if($video.get(0).paused || $video.get(0).ended) {
            $('.btnPlay').find('i').addClass('icon-pause');
            $video.get(0).play();
        }
        else {
            $('.btnPlay').find('i').removeClass('icon-pause');
            $video.get(0).pause();
        }
    };

    //fullscreen button clicked
    $('.btnFS').on('click', function() {
        if($.isFunction($video.get(0).webkitEnterFullscreen)) {
            $video.get(0).webkitEnterFullscreen();
        }    
        else if ($.isFunction($video.get(0).mozRequestFullScreen)) {
            $video.get(0).mozRequestFullScreen();
        }
        else {
            alert('Your browsers doesn\'t support fullscreen');
        }
    });

    //sound button clicked
    $('.sound').click(function() {
        $video.get(0).muted = !$video.get(0).muted;
        $(this).toggleClass('muted');
        if($video.get(0).muted) {
            $('.volumeBar').css('width',0);
        }
        else{
            $('.volumeBar').css('width', $video.get(0).volume*100+'%');
        }
    });

    //VIDEO EVENTS
    //video canplay event
    $video.on('canplay', function() {
        $('.loading').fadeOut(100);
    });

    //video canplaythrough event
    //solve Chrome cache issue
    var completeloaded = false;
    $video.on('canplaythrough', function() {
        completeloaded = true;
    });

    //video ended event
    $video.on('ended', function() {
        $('.btnPlay').removeClass('paused');
        $video.get(0).pause();
    });

    $video.on('ended', function() {

       var nextVideo= $(this).next();
        if(!$('video').last()){
          $(this).hide();
          nextVideo.show(); 
          nextVideo.get(0).play();  
        }        
    }); //onended

    //video seeking event
    $video.on('seeking', function() {
        //if video fully loaded, ignore loading screen
        if(!completeloaded) { 
        //    $('.loading').fadeIn(200);
        }    
    });

    //video seeked event
    $video.on('seeked', function() { });

    //video waiting for more data event
    $video.on('waiting', function() {
        $('.loading').fadeIn(200);
    });

    //VIDEO PROGRESS BAR
    //when video timebar clicked
    var timeDrag = false;    /* check for drag event */
    $('.progress').on('mousedown', function(e) {
        timeDrag = true;
        updatebar(e.pageX);
    });
    $(document).on('mouseup', function(e) {
        if(timeDrag) {
            timeDrag = false;
            updatebar(e.pageX);
        }
    });
    $(document).on('mousemove', function(e) {
        if(timeDrag) {
            updatebar(e.pageX);
        }
    });
    var updatebar = function(x) {
        var progress = $('.progress');

        //calculate drag position
        //and update video currenttime
        //as well as progress bar
        var maxduration = $video.get(0).duration;
        var position = x - progress.offset().left;
        var percentage = 100 * position / progress.width();
        if(percentage > 100) {
            percentage = 100;
        }
        if(percentage < 0) {
            percentage = 0;
        }
        $('.timeBar').css('width',percentage+'%');    
        $video.get(0).currentTime = maxduration * percentage / 100;
    };

    //VOLUME BAR
    //volume bar event
    var volumeDrag = false;
    $('.volume').on('mousedown', function(e) {
        volumeDrag = true;
        $video.get(0).muted = false;
        $('.sound').removeClass('muted');
        updateVolume(e.pageX);
    });
    $(document).on('mouseup', function(e) {
        if(volumeDrag) {
            volumeDrag = false;
            updateVolume(e.pageX);
        }
    });
    $(document).on('mousemove', function(e) {
        if(volumeDrag) {
            updateVolume(e.pageX);
        }
    });
    var updateVolume = function(x, vol) {
        var volume = $('.volume');
        var percentage;
        //if only volume have specificed
        //then direct update volume
        if(vol) {
            percentage = vol * 100;
        }
        else {
            var position = x - volume.offset().left;
            percentage = 100 * position / volume.width();
        }

        if(percentage > 100) {
            percentage = 100;
        }
        if(percentage < 0) {
            percentage = 0;
        }

        //update volume bar and video volume
        $('.volumeBar').css('width',percentage+'%');    
        $video.get(0).volume = percentage / 100;

        //change sound icon based on volume
        if($video.get(0).volume == 0){
            $('.sound').removeClass('sound2').addClass('muted');
        }
        else if($video.get(0).volume > 0.5){
            $('.sound').removeClass('muted').addClass('sound2');
        }
        else{
            $('.sound').removeClass('muted').removeClass('sound2');
        }

    };

    //Time format converter - 00:00
    var timeFormat = function(seconds){
        var m = Math.floor(seconds/60)<10 ? Math.floor(seconds/60) : Math.floor(seconds/60);
        var s = Math.floor(seconds-(m*60))<10 ? "0"+Math.floor(seconds-(m*60)) : Math.floor(seconds-(m*60));
        return m+":"+s;
    }; 
```

​</p>

CSS：

```
 /* video container */
.videoContainer{
width:97.8%;
height:250px;
overflow:hidden;
background:#ccc;
color:#ccc;
}
 /*** VIDEO CONTROLS CSS ***/
/* control holder */
.control{
background:#333;
color:#ccc;
width:100%;
z-index:5;   
}
.control >div{
display:inline-block;
}
.control div.btn { 
cursor:pointer;
}
.control div.text{
font-size:18px;
line-height:30px;
text-align:center;
width:20px;
}
.control div.selected{
font-size:18px;
color:#ccc;
}
.control div.sound{
background:url(/assets/img/video/control.png) no-repeat -88px -30px;
border:none;

}
.control div.sound2{
background:url(/assets/img/video/control.png) no-repeat -88px -60px !important;
}
.control div.muted{
background:url(/assets/img/video/control.png) no-repeat -88px 0 !important;
}
.control div.btnFS{

float:right;
}

/* PROGRESS BAR CSS */
/* Progress bar */
.progress {
width:100%;
height:24px;   
position:relative;
float:left;
cursor:pointer;
background: gray; /* fallback */
background:-moz-linear-gradient(top,#666,#333);
background:-webkit-linear-gradient(top,#666,#333);
background:-o-linear-gradient(top,#666,#333);
box-shadow:0 2px 3px #333 inset;
-moz-box-shadow:0 2px 3px #333 inset;
-webkit-box-shadow:0 2px 3px #333 inset;
border-radius:5px;
-moz-border-radius:5px;
-webkit-border-radius:5px;
}
.progress span { 
height:100%;
position:relative;
top:0;
left:0;
display:inline-block;

height:100%;
position:absolute;
top:0;
left:0;
display:block;

border-radius:5px;
-moz-border-radius:5px;
-webkit-border-radius:5px;
}

.timeBar{
position:absolute;
left:0px;
top:0px;
z-index:10;

width:0;
background: #006DCC; /* fallback */
background:-moz-linear-gradient(top,#A0DCFF 50%,#3FB7FC 50%,#16A9FF 100%);
background:-webkit-linear-gradient(top,#A0DCFF 50%,#3FB7FC 50%,#16A9FF 100%);
background:-o-linear-gradient(top,#A0DCFF 50%,#3FB7FC 50%,#16A9FF 100%);
box-shadow:0 0 1px #fff;
-moz-box-shadow:0 0 1px #fff;
-webkit-box-shadow:0 0 1px #fff;
}
.bufferBar{
z-index:5;
width:0;
background: #777;
background:-moz-linear-gradient(top,#999,#666);
background:-webkit-linear-gradient(top,#999,#666);
background:-o-linear-gradient(top,#999,#666);
box-shadow:2px 0 5px #333;
-moz-box-shadow:2px 0 5px #333;
-webkit-box-shadow:2px 0 5px #333;
}
/* time and duration */

/* VOLUME BAR CSS */
/* volume bar */
.volume{
position:relative;
cursor:pointer;
width:100px;
height:24px;

}
.volumeBar{
display:block;
height:100%;
position:absolute;
top:0;
left:0;
background-color:#006DCC;
z-index:10;
border-radius:5px;
-moz-border-radius:5px;
-webkit-border-radius:5px;
}

/* OTHERS CSS */
/* video screen cover */
.loading, #init{

width:100%;
height:100%;

z-index:2;

}
#init{

cursor:pointer;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T19:16:30.353

试试[这个](http://jsfiddle.net/EyZdy/107/)

我在图标上添加了这个类点击

```
 $("video[data-id='" + id +"']").addClass("active");
 $video = $('video.active'); 
```

所以这里尝试根据活动的课程选择视频，它工作正常。单击另一个视频时，请删除以前的活动类并将其添加到新选择的视频中。

# android - Android 模拟器上的 Vintage Thermometer 组件 + SensorSimulator

> ID：10099084
> 
> 赞同：1
> 
> 时间：2012-04-11T02:31:51.837
> 
> 标签：android, android-emulator, android-ui, android-sensors, android-custom-view

在我发现[这个很好的自定义组件](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/ "老式温度计")（这个词是否正确？）显示从 Android 设备的温度传感器读取的温度后，我想用模拟器对其进行测试，看看它是如何工作的，所以我找到[了这个 Sensor Simulator](http://code.google.com/p/openintents/wiki/SensorSimulator "Android 传感器模拟器")和更改了组件的源以使用它。

我确实设法让它在仿真设备上工作，但是我做了一些幸运的猜测并且想知道我到底做了什么:-)

以下是我必须对温度计代码进行的更改，以使其与温度传感器模拟器一起工作：

导入`sensorsimulator`类后：

```
import org.openintents.sensorsimulator.hardware.Sensor;
import org.openintents.sensorsimulator.hardware.SensorEvent;
import org.openintents.sensorsimulator.hardware.SensorEventListener;
import org.openintents.sensorsimulator.hardware.SensorManagerSimulator; 
```

我不得不删除

```
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener; 
```

改变了

`private SensorManager getSensorManager()`

进入

`private SensorManagerSimulator getSensorManager()`

然后第一个问题出现了。根据*How to use the SensorSimulator in your application*我更改了行：

`return (SensorManager) getContext().getSystemService(Context.SENSOR_SERVICE);`

进入

`return SensorManagerSimulator.getSystemService(this, SENSOR_SERVICE);`

那是一个错误。在`this`我不得不使用的情况下`getContext()`，我不知道为什么会这样 - 也许是因为`thermometer`类扩展`View`因此它不是活动？而不是`SENSOR_SERVICE`我不得不把`Context.SENSOR_SERVICE`.

在那之后，下一个变化是：

```
private void attachToSensor() {
    SensorManagerSimulator sensorManager = getSensorManager();
    sensorManager.connectSimulator(); 
```

由于它似乎`sensorsimulator`没有实现`getSensorList`我不得不更换

```
List<Sensor> sensors = sensorManager.getSensorList(Sensor.TYPE_TEMPERATURE); 
```

和

```
Sensor sensor = sensorManager.getDefaultSensor(Sensor.TYPE_TEMPERATURE); 
```

并删除

```
if (sensors.size() > 0) {
        Sensor sensor = sensors.get(0); 
```

然后，当然我也删除了该`else`语句，因此当温度传感器丢失的情况现在可能会在尝试注册侦听器时引发异常。

最后，为了消除编译错误，我还必须进行一项更改，由于某种原因，`registerListener`in的实现`Sensor Simulator`接受的参数比 android 的方法少，所以我不得不`handler`从

```
sensorManager.registerListener(this, sensor, SensorManagerSimulator.SENSOR_DELAY_FASTEST, handler); 
```

在这里，我想知道为什么这次我不必使用`getContext()`而不是`this`！？

这就是我必须更改的所有内容，最后一件事是删除未使用的 vars（处理程序）、未使用的导入（java.util.List）和 remove `handler = new Handler();`。

我发现这个自定义 UI 组件的示例非常有趣，希望有人能够澄清并完善代码。

# bash - makefile 中的部分预处理错误

> ID：10099089
> 
> 赞同：1
> 
> 时间：2012-04-11T02:32:33.413
> 
> 标签：bash, makefile

这是我的制作文件。而且，我正在尝试使用 unifdef 运行部分预处理。但是在执行 unifdef 后它失败了。

```
#HELLO = world
HELLO_WORLD = $(HELLO) world!
COMMA := ,
VAR_ARG_LIST_A := $(subst $(COMMA), ,$(VAR_ARG_LIST))
VAR_ARG_LIST_1 := $(word 1,$(VAR_ARG_LIST_A))
VAR_ARG_LIST_2 := $(word 2,$(VAR_ARG_LIST_A))
VAR_ARG_LIST_3 := $(word 3,$(VAR_ARG_LIST_A))
VAR_ARG_LIST_4 := $(word 4,$(VAR_ARG_LIST_A))
VAR_ARG_LIST_5 := $(word 5,$(VAR_ARG_LIST_A))
VAR_ARG_LIST_6 := $(word 6,$(VAR_ARG_LIST_A))
all:
#       echo $(HELLO_WORLD)
        echo $(VAR_ARG_LIST_1)
#       echo $(VAR_ARG_LIST)
        echo $(VAR_ARG_LIST_2)
        echo $(VAR_ARG_LIST_3)
        echo $(VAR_ARG_LIST_4)
        echo $(VAR_ARG_LIST_5)
        echo $(VAR_ARG_LIST_6)
        unifdef -USW1 -USW2 -USW3 -USW4 -USW5 -USW6 -t file1.txt > file2.txt 
```

错误是

```
make VAR_ARG_LIST=AW1,AW2
echo AW1
AW1
echo AW2
AW2
echo 

echo 

echo 

echo 

unifdef -USW1 -USW2 -USW3 -USW4 -USW5 -USW6 -t file1.txt > file2.txt
make: *** [all] Error 1 
```

file1.txt 的内容是：

```
#ifdef SW1
This is a file1
#endif
This is file file 1
This is file file 2
This is file file3 
```

file2.txt 的内容是：

```
This is file file 1
This is file file 2
This is file file3 
```

make 在执行 unifdef 命令后立即失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:08:32.067

问题是，如果输出与输入不同（也就是说，如果它做任何事情）， unifdef 将以状态 1 退出，但 Make 将非零状态解释为失败并中止。你可以用连字符来解决这个问题：

```
-unifdef -USW1 -USW2 -USW3 -USW4 -USW5 -USW6 -t file1.txt > file2.txt 
```

现在 Make 将报告

```
make: [all] Error 1 (ignored) 
```

并继续前进。（如果它让您烦恼，可能有一种方法可以抑制错误消息。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:55:31.803

如果您不关心 unifdef 的退出代码，那么只需确保配方行以真值退出。例如：

```
unifdef -USW1 -USW2 -USW3 -USW4 -USW5 -USW6 -t file1.txt > file2.txt || true 
```

将确保该行始终成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:51:53.717

unifdef 2.7 版（2013 年 3 月发布）有一个 -x 选项来控制退出状态逻辑，因此它与 make 配合得更好。您可能想要使用 -x1 以便 make 确保 unifdef 确实进行了更改。见[http://dotat.at/prog/unifdef/](http://dotat.at/prog/unifdef/)

# ruby-on-rails-3.2 - RailsAdmin + 嵌套模型

> ID：10099099
> 
> 赞同：1
> 
> 时间：2012-04-11T02:34:36.657
> 
> 标签：ruby-on-rails-3.2, rails-admin

我的公司有很多电话。

我创建了种子数据以添加 1 家公司和 1 部电话

当 RailsAdmin 呈现公司表单时，电话的嵌套字段正确显示。

当我单击“添加新电话”时，它会添加 2 个选项卡（每个选项卡都显示“电话（新）”），但无法显示这些字段。我一次又一次地单击“添加新手机”，又获得了 2 个标签，但无法输入数据。

```
def Company < ActiveRecord::Base
  has_many :phones
  attr_accessible :name, :phones_attributes
  accepts_nested_attributes_for :phones, :allow_destroy => true, :reject_if => proc { |obj| obj.blank? }
end

def Phone < ActiveRecord::Base
  belongs_to :company, :inverse => :phones
  attr_accessible :number, :provider, :phone_type
end 
```

顺便说一句 - 无论是编辑还是新建，“添加新手机”都不会显示任何输入数据的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:46:41.747

我不知道它是否有很大帮助，但我也遇到了这个问题，因为我使用了另一个嵌套表单 gem，它与 RailsAdmin 所依赖的一个冲突（至少在 JS 中）。当我删除那个 gem（我相信是 awesome_nested_forms）时，所有内置的 RailsAdmin has_many 关联小部件再次正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:43:37.723

从 rails 3.1.3 到 3.2.6 也遇到了同样的问题。我通过将 id 和 foreign_id 添加到 attr_accessible 来解决它。

```
def Company < ActiveRecord::Base
  has_many :phones
  attr_accessible :id, :name, :phones_attributes
  accepts_nested_attributes_for :phones, :allow_destroy => true, :reject_if => proc { |obj| obj.blank? }
end

def Phone < ActiveRecord::Base
  belongs_to :company, :inverse => :phones
  attr_accessible :id, :number, :provider, :phone_type, :company_id
end 
```

# ios - FireMonkey iOS RAD Studio XE2 - 在从 URL 加载的表单上显示图像

> ID：10099100
> 
> 赞同：18
> 
> 时间：2012-04-11T02:34:45.783
> 
> 标签：ios, delphi, url, firemonkey, timage

是否可以在 iOS 的 FMX 表单上放置 TImage 并将图像（jpg）从 URL 加载到此 TImage 中以显示在 iOS 应用程序中？

我试过没有成功。任何提示或指向正确的方向表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:01:46.593

将 TButton、TImageControl 和 TIdHttp 拖放到 Firemonkey 表单上，此代码将从 Web 拉取图像：

```
procedure TForm1.btnReadWebImgClick(Sender: TObject);
begin
  ReadWebImage('http://www.gravatar.com/avatar/5af5f8c5f88c6c237745e9472a31410f?s=32&d=identicon&r=PG');
end;
procedure TForm1.ReadWebImage(imgAddress: string);
var
  memStream: TMemoryStream;
begin
  memStream := TMemoryStream.Create;
  try
    idhttp1.Get (imgAddress,memStream);
  except
    ShowMessage('Image not found at:'+imgAddress);
    memStream.Free;
    exit;
  end;
  try
    memStream.Position := 0;
    ImageControl1.Bitmap.LoadFromStream(memStream);
  finally
    memStream.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T18:56:26.263

答案有点冻结。我循环加载 4 张图像。当我按下按钮时，程序冻结下载图像，进度条不工作，如果下载继续完美。4 幅图像冻结 1 秒。对于 50，这是“无连接”或“错误程序”。这是代码。

```
procedure TForm1.SpeedButton1Click(Sender: TObject);
var
  i: Integer;
  Stream: TMemoryStream;
  imgAddress: string;
begin
  ProgressBar1.Min := 0;
  ProgressBar1.Max := Table1.RecordCount;

   for i := 1 to Table1.RecordCount do
     begin
     ProgressBar1.Value := i;

     imgAddress := VirtualTable1.FieldByName('flyer').AsString;
     Stream := TMemoryStream.Create;
     idhttp1.Get (imgAddress,Stream);

     try
        Stream.Position := 0;
        Table1.Edit;
        TBlobField(Table1.FieldByName('image')).LoadFromStream(Stream);
        Table1.Post;
     finally
        Stream.Free;
     end;
     Table1.Next;
    end;
    Table1.First;
end; 
```

# tfs - TFS 中 WorkItemEdit.aspx 中 url 查询字符串参数的参考

> ID：10099102
> 
> 赞同：0
> 
> 时间：2012-04-11T02:35:06.610
> 
> 标签：tfs, tfs-workitem, user-acceptance-testing

如果用户在 UAT 中遇到异常，他们将在 TFS 中记录错误，例如：

```
public void TopLevelExceptionHandler(Exception ex)
{
...
System.Diagnostics.Process.Start(Settings.Default.TFSBugReportingURL + ex); 
```

[http://tfsportal/CompanyName/ProjectName/_layouts/tswa/UI/Pages/WorkItems/WorkItemEdit.aspx](http://tfsportal/CompanyName/ProjectName/_layouts/tswa/UI/Pages/WorkItems/WorkItemEdit.aspx)？**wit=错误**&[系统信息]=

请参阅`wit`查询字符串参数（也称为工作项类型），此 WorkItemEdit.aspx 页面的这些查询字符串参数的引用在哪里？

**我正在尝试设置 AssignedTo 字段。**

**编辑：** 这是您设置自由文本标题字段和下拉列表优先级字段的方式：

[标题]=FixSomeBug&[优先级]=1&

我只是无法计算 AssignedTo 字段？我还想知道如何访问 [Steps to Reproduce] 字段。

**编辑2：**

我查看了 SDK，偶然发现：&[Assigned to]=THOMPSON, Jeremy&

* * *

**编辑 3：**

> 有一种简单的方法可以获取工作项模板的 url。当您在 Team System Web Access 中创建新工作项时，有一个可用的“复制模板 URL”按钮来获取反映您对工作项所做更改的 URL。

像往常一样，Ewald 来救援，不幸的是我的屏幕没有“复制模板 URL”按钮： ![在此处输入图像描述](../Images/efedba14c1d80db867b7024625883342.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:55:05.233

如果您填写了错误表单，您可以使用工具栏中的复制模板 URL 按钮来了解您应该如何构建 URL。[请参阅http://www.ewaldhofman.nl/post/2009/05/06/Initial-values-in-a-work-item.aspx](http://www.ewaldhofman.nl/post/2009/05/06/Initial-values-in-a-work-item.aspx)上的按钮图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:55:34.253

我看到隐藏的“复制模板 URL”按钮的解决方案是在我使用的 URL 中：

[http://tfsportal/CompanyName/ProjectName/_layouts/tswa/UI/Pages/WorkItems/WorkItemEdit.aspx](http://tfsportal/CompanyName/ProjectName/_layouts/tswa/UI/Pages/WorkItems/WorkItemEdit.aspx) <- 不显示按钮。

[http://tfs.CompanyNameURL:8080/tfs/web/wi.aspx](http://tfs.CompanyNameURL:8080/tfs/web/wi.aspx)？<- 确实显示按钮

# python - MSSQL 连接字符串 - 使用另一组凭据的 Windows 身份验证

> ID：10099103
> 
> 赞同：3
> 
> 时间：2012-04-11T02:35:31.790
> 
> 标签：python, sql-server, windows, authentication, odbc

似乎不可能制作连接字符串，以便您可以使用其他用户的 Windows 凭据打开与 mssql 服务器的连接。您似乎仅限于指定一个 sql server 帐户，或者根本不指定任何凭据，这些凭据会沿着域上使用的当前集合传递。

**哪些变通方法是规避此限制的有效方法？**

一些背景知识：
我正在部署的公司希望为访问共享数据库的每个应用程序设置 Windows 凭据。这适用于类似守护进程的后台任务，但对于桌面应用程序来说似乎有点复杂。

我被要求不要将用户凭据传递给数据库，而是传递一组为应用程序本身保留的 Windows 凭据......不是 sql server 凭据，而是应用程序域上的帐户。

我一直在考虑使用[Runas](http://technet.microsoft.com/en-us/library/bb490994.aspx)来使用这个应用程序 windows 帐户启动应用程序（用 Python 编写）。

也许有人可以提出更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:19:17.103

您可以为应用程序设置域组（活动目录），然后将特定域用户分配到该组中。我想您可以为该组授予数据库权限。

这将允许控制组的特定权限。

只是一个建议，希望对你有帮助。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:12:15.910

无法在连接字符串中指定一组备用 Windows 凭据。你对 runas 的直觉是正确的。当连接到与笔记本电脑不同的域时，我经常使用它来启动 SSMS。祝你好运！

# iphone - 如何在 UIWebview 中启用水平滚动和禁用垂直滚动？

> ID：10099108
> 
> 赞同：11
> 
> 时间：2012-04-11T02:36:26.797
> 
> 标签：iphone, uiwebview, uiscrollview

我的 UIWebView 不应该允许垂直滚动。但是，水平滚动应该是可能的。

我一直在查看文档，但找不到任何提示。

以下代码禁用两个滚动方向，但我只想禁用垂直：

```
myWebView.scrollView.scrollEnabled = NO; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-25T01:21:42.100

**启用水平滚动并禁用垂直滚动：**

```
myWebView.scrollView.delegate = self;
[myWebView.scrollView setShowsVerticalScrollIndicator:NO];

-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.y > 0  ||  scrollView.contentOffset.y < 0 )
        scrollView.contentOffset = CGPointMake(scrollView.contentOffset.x, 0);
} 
```

第二行将隐藏垂直滚动指示器。检查“scrollView.contentOffset.y < zero”是否会在您尝试向下滚动时禁用弹跳。你也可以这样做：scrollView.bounces=NO 做同样的事情！！通过查看 Rama Rao 的回答，我可以看出他的代码会在您尝试垂直滚动时将 scrollView 重置为 (0.0)，从而使您远离水平位置，这并不好。

**启用垂直滚动并禁用水平滚动：**

```
myWebView.scrollView.delegate = self;
[myWebview.scrollView setShowsHorizontalScrollIndicator:NO];

-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.x > 0)
        scrollView.contentOffset = CGPointMake(0, scrollView.contentOffset.y);
} 
```

和平

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-08T19:37:52.697

要使其充分发挥作用，请编写：

```
 webview.scrollView.delegate = self;
    [webview.scrollView setShowsHorizontalScrollIndicator:NO];

}

-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.x > 0)
        scrollView.contentOffset = CGPointMake(0, scrollView.contentOffset.y);
    if (scrollView.contentOffset.x < 0)
        scrollView.contentOffset = CGPointMake(0, scrollView.contentOffset.y);
} 
```

我刚刚添加了最后两行，因为当你像 pnizzle 那样编写它时，你不能从右边滚动到左边，但仍然从左边滚动到右边。

祝你好运

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T04:55:04.277

```
-(void) scrollViewDidScroll:(UIScrollView *)scrollView{
    if (scrollView.contentOffset.y>web.frame.origin.x) {
        scrollView.contentOffset = CGPointMake(0, 0);
    }
} 
```

通过这种方式，我们可以解决问题。取一个全局滚动视图对象，如下所示：

```
UIScrollView* scrollView =web.scrollView; 
```

将委托设置为滚动视图然后`-(void) scrollViewDidScroll:(UIScrollView *)scrollView`将被调用，您可以获得结果。我检查了两个版本（iOS 5 和 iOS 4.2）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T04:56:46.520

离开scrollEnabled == YES。滚动视图将根据内容大小限制滚动。要仅允许水平滚动，请将 contentSize 设置为：

```
scrollView.contentSize = CGSizeMake(1000, scrollView.bounds.size.height); 
```

宽度应该与滚动视图中正在滚动的任何内容的宽度相关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-05T18:42:45.920

斯威夫特 4.2：

**启用水平滚动并禁用垂直滚动：**

```
webview.scrollView.delegate = self
webView.scrollView.showsHorizontalScrollIndicator = false

func scrollViewDidScroll(_ scrollView: UIScrollView) {
    if scrollView.contentOffset.y > 0  ||  scrollView.contentOffset.y < 0{
        scrollView.contentOffset = CGPoint(x: scrollView.contentOffset.x, y:0)
    }
} 
```

**启用垂直滚动并禁用水平滚动：**

```
webview.scrollView.delegate = self
webView.scrollView.showsHorizontalScrollIndicator = false

func scrollViewDidScroll(_ scrollView: UIScrollView) {
    if scrollView.contentOffset.x > 0 {
        scrollView.contentOffset = CGPoint(x: 0, y:scrollView.contentOffset.y)
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-27T21:14:46.880

```
i created three seperate UIScrollViews because I wanted three rows, added the IBOutlet below than added the following properties, it gave me no vertical scrolling and horizontal scrolling, i created my own buttons and just added them into the subview for the scroll view i wanted. 
```

@IBOutlet 弱变量 backScrollVIew：UIScrollView！

```
 @IBOutlet weak var chestScrollVIew: UIScrollView!

    @IBOutlet weak var legScrollVIew: UIScrollView!
override func viewDidLoad() {
        super.viewDidLoad()

        backScrollVIew.alwaysBounceHorizontal = true
        backScrollVIew.isScrollEnabled = true
        backScrollVIew.contentSize = CGSize(width: 500, height: 100)

        chestScrollVIew.isScrollEnabled = true
        chestScrollVIew.isPagingEnabled = false
        chestScrollVIew.contentSize = CGSize(width: 1000, height: 100)
        legScrollVIew.alwaysBounceHorizontal = true
        legScrollVIew.isScrollEnabled = true
        legScrollVIew.contentSize = CGSize(width: 1000, height: 100) 
```

# c# - 在 MVC 中使用 Ajax

> ID：10099112
> 
> 赞同：1
> 
> 时间：2012-04-11T02:37:10.583
> 
> 标签：c#, javascript, ajax, asp.net-mvc

我正在尝试使用 Ajax 注入一个视图，但它不是很有效。我对 Ajax 一无所知，但我正在努力学习。我在这里错过了什么，或者我这样做的方式完全错误。

```
 foreach(ect...) {
   <tr>
       <td>
      <a href="#" onclick="AjaxStoryClick(@item.Id)" style="color:dodgerblue; font-weight: bold">@item.Name</a>

       <script type="text/javascript">
function AjaxStoryClick(storyid) {

    $.ajax({
        url: '@Url.Action("UserStoriesList", "Estimate")',
        type: 'POST',
        data: storyid,
        success: function(result){
            $('#stories').html(result);

        }
     });         
}    

      </script> 
```

控制器：

```
 public ActionResult UserStoriesList(int id)
    {
        ActiveEpicId = id;
        var userstories = userRepository.Select().Where(x => x.EpicId.Equals(id)).ToList();
        return PartialView("UserStoriesList",userstories);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T02:42:57.053

`UserStoriesList`Action 方法是 Type吗`HttpPost`？您的 Ajax 请求属于`POST`. 所以它只会由 HttpPost 类型的 UserStoriesList 操作方法处理。

```
 [HttpPost]
 public ActionResult UserStoriesList(int id)
 {
   // your code goes here
 } 
```

如果您的 ActionMethod 不是类型`HttpPost`（这意味着它是`HttpGet`类型），您可以使用 jquery get ajax 调用来获取数据

确保 ajax 调用中的参数名称与操作方法中的参数名称相同。

```
function AjaxStoryClick(storyid) {
  $.get('@Url.Action("UserStoriesList", "Estimate")',{id : storyid},function(result){
     $('#stories').html(result);
  });
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:08:00.290

Ajax 调用未将参数“Id”的值传递给操作方法“UserStoriesList”，行*“data:storyid”*应为*“data:{id:storyid}”*

由于您的操作方法“UserStoriesList”具有不可为空的*id*参数，服务器将生成错误响应：

如果 ajax 错误事件没有回调，您将看不到错误响应，并且在调试模式下，操作中的断点不会被命中。

这是更新的脚本：

```
<script type="text/javascript">

function AjaxStoryClick(storyid) {

 $.ajax({
    url: '@Url.Action("UserStoriesList", "Estimate")',
    type: 'POST',
    data: { id: storyid },
    success: function (result) {
        $('#stories').html(result);
    },
    error: function (xhr) {
        alert("Error: " + xhr.responseText);
    }
 });
}
</script> 
```

动作方法：

```
public ActionResult UserStoriesList(int id)
{
  ActiveEpicId = id;
  var userstories = userRepository.Select().Where(x => x.EpicId.Equals(id)).ToList();

  if (Request.IsAjaxRequest())
    return PartialView("_UserStoriesList", userstories);
  else
    return View("UserStoriesList", userstories);
} 
```

# javascript - 在每秒调用 10 个限制的情况下，一次发出 50 个 API 请求的有效方法是什么（烂番茄 API）？

> ID：10099115
> 
> 赞同：0
> 
> 时间：2012-04-11T02:37:57.043
> 
> 标签：javascript, ajax, rotten-tomatoes

我有一个应用程序必须在一个循环中进行 50 到 100 个 API 调用。烂番茄每秒最多调用 10 次。因此，我的请求在两者之间失败，并且每次都会得到不同的结果。在不超过每秒 10 个请求的限制的情况下发出这 50 个请求的有效方法是什么？这是我的代码：

```
$.each(elem, function (index, item) {

    var $placeholder = $('<div>').appendTo("div.content");

    $.ajax({
        type: 'post' ,
        url: moviesSearchUrl + '&q=' + encodeURI(item) + '&page_limit=1',
        dataType: "jsonp",
        async: false, 
        success: searchCallback
    });

    function searchCallback(data) {
        var movies = data.movies;

        var markup = index + ': '+   movies[0].title + '<img class=" bord" src="' + movies[0].posters.thumbnail + '" /><br/>';

        $placeholder.replaceWith(markup);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:29:50.840

这取决于你想要做什么。如果结果直接（排队）进入您正在呈现的用户网页（并且没有可以做的批量调用而不是单独的调用），那么您几乎无能为力（您至少需要 5 秒呈现该页面）。

如果您经常重复使用相同的内容，那么如果服务提供商的条款允许，可能值得在短时间内缓存调用结果，以避免不得不一次又一次地点击所有调用。

同意上面的观点——如果你直接渲染到一个有多个用户的网页，你会很痛苦——最好考虑一个简短的缓存策略。

# node.js - 我怎么知道 Mongodb 服务器正在运行 --auth ？

> ID：10099120
> 
> 赞同：1
> 
> 时间：2012-04-11T02:38:36.880
> 
> 标签：node.js, mongodb

我正在使用 nodejs 和 Mongodb JS 驱动程序 mongodb-native。

但是我似乎无法知道我连接的 mongo 服务器是否需要身份验证，这意味着它在 --auth 上运行，所以我可以决定是否应该调用 db.authenticate 方法。

检查了 db、server 和 admin 对象的属性，似乎没有人指出 --auth 选项。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:01:09.370

是的，目前没有办法做到这一点，但我认为这是一个有效的案例。[我建议您在https://jira.mongodb.org](https://jira.mongodb.org)上打开一个功能请求并对其进行投票，以便它可能包含在服务器的未来版本中。

# javascript - 使用 jQuery 滚动图像墙

> ID：10099125
> 
> 赞同：0
> 
> 时间：2012-04-11T02:38:44.737
> 
> 标签：javascript, jquery, image

我需要一些帮助来弄清楚我应该如何做到这一点。

我想用 jQuery 制作一个滚动的图像墙。我只想平铺数百个小图像（推特个人资料图片），然后在浏览器窗口中一个接一个地平铺它们。此平铺应间隔浏览器窗口的整个宽度/高度。基本上我想用 javascript 创建一个页面，您可以在其中输入用户的 Twitter 名称，它会调用 API，并返回所有用户关注者的个人资料图片。然后将这些图片放入前面提到的整页滚动图片墙中。图像应该换行，当它们向右滚动页面时，它们会在左侧环绕。

有谁知道我会怎么做？我会使用什么库？非常感谢任何帮助/指导！

谢谢

编辑：澄清；我已经知道如何检索图像（据我所知）但是我不知道如何以全屏平铺形式布置它们，并让它们从左到右滚动（所以如果有朋友/图像的数量超出了屏幕所能容纳的范围）。那部分有多难？是否有任何用于在浏览器窗口周围滚动/包装图像的好库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T02:49:12.013

您将使用 Twitter API 获取关注者[GET 关注者/ID](https://dev.twitter.com/docs/api/1/get/followers/ids)

然后您可以使用[GET users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)来获取每个用户的图像（我知道有点痛苦，但我看不到任何其他方式）。

之后，您将在页面上打印结果，每个结果都向左浮动。如果您搜索浮动元素及其工作方式，您会发现显示您所描述的结果是微不足道的。

如果您对这些任务中的任何一个有任何具体问题，请不要犹豫，发布更详细的问题。

# jquery - span 标签上的 jquery .height() 和 .width() 得到不一致的结果

> ID：10099126
> 
> 赞同：2
> 
> 时间：2012-04-11T02:39:05.577
> 
> 标签：jquery, height, width, html

我需要获取可变高度和宽度元素`#sentence`的尺寸，以便更改与其相关的其他元素的尺寸。`#sentence`位于浏览器窗口的中心，无论其内容是什么，它的高度和宽度都是确定的。我的代码如下所示：

HTML

```
<body>
    <div id="wrapper">
        <div id="cell">
            <span id="sentence">
                sentence
            </span>
        </div>
    </div>
</body> 
```

CSS

```
body, html  {
    font-size: 18pt;
    padding: 0px;
    margin: 0px;
    overflow: hidden;
}
#wrapper    {
    width: 100%;
    height: 100%;
    display: table;
    text-align: center;
}
#cell   {
    display: table-cell; vertical-align: middle;
}

#sentence   {
    display: inline-block;
    background-color: #abc;
    padding: 1em;
} 
```

JS

```
$(document).ready(function(){
    var h = $("#sentence").height();
    alert(h);
}); 
```

当我尝试获取`.height()`or`.width()`时`#sentence`，我得到了不一致的值。通常高度为 28，但有时返回为 19。宽度为 84，有时为 52。

我认为差异可能是由于页面加载时滚动条暂时出现然后消失造成的。我尝试添加`overflow: hidden;`并删除任何可能出现的滚动条`html`，`body`但这没有用。我也尝试添加

```
$(window).resize(function(){ 
    h = $("sentence").width(); 
}); 
```

那没有用。使用`.css("height")`似乎也不起作用。

那么会怎样呢？为什么我有这个问题？提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T02:52:38.660

为了使尺寸正确，浏览器需要布局并呈现页面。`.ready(...)`当事件被触发时，这不一定是真的。

尝试`$(window).load(...)`改用。

# r - 在新版本的包中重命名函数时是否有最佳/推荐的做法？

> ID：10099128
> 
> 赞同：41
> 
> 时间：2012-04-11T02:39:33.517
> 
> 标签：r, roxygen

我正在更新一个旧包并缩短一堆非常长的函数名称。如何让用户知道旧功能已被弃用？我记录了所有内容，`roxygen2`所以我想知道`#' @alias`我应该使用什么？想法？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-13T17:39:44.307

即使您只是缩短函数名称，我仍然会像对包的公共 API 的任何更改一样大张旗鼓地对待它：随着新函数的引入，旧函数的弃用/失效阶段。

在第一阶段，对于要缩短名称的每个函数（我们称之为它`transmute_my_carefully_crafted_data_structure_into_gold`），您保留一个具有该签名的函数，但将所有实际代码移动到新命名的函数中（我们称之为它`alchemy`）。

最初：

```
transmute_my_carefully_crafted_data_structure_into_gold <- function(lead, alpha=NULL, beta=3) {
  # TODO: figure out how to create gold
  # look like we are doing something
  Sys.sleep(10)
  return("gold")
} 
```

首次使用新名称发布：

```
transmute_my_carefully_crafted_data_structure_into_gold <- function(lead, alpha=NULL, beta=3) {
  .Deprecated("alchemy") #include a package argument, too
  alchemy(lead=lead, alpha=alpha, beta=beta)
}

alchemy <- function(lead, alpha=NULL, beta=3) {
  # TODO: figure out how to create gold
  # look like we are doing something
  Sys.sleep(10)
  return("gold")
} 
```

因此，这`transmute_my_carefully_crafted_data_structure_into_gold`从 . 周围的薄包装开始`alchemy`，并带有额外的`.Deprecated`调用。

```
> transmute_my_carefully_crafted_data_structure_into_gold()
[1] "gold"
Warning message:
'transmute_my_carefully_crafted_data_structure_into_gold' is deprecated.
Use 'alchemy' instead.
See help("Deprecated") 
> alchemy()
[1] "gold" 
```

如果您对 进行更改`alchemy`，它仍然存在，`transmute_my_carefully_crafted_data_structure_into_gold`因为它只是调用前者。但是，您不会更改`transmute_my_carefully_crafted_data_structure_into_gold`即使更改的签名`alchemy`；在这种情况下，您需要尽可能地将旧参数映射到新参数中。

在以后的版本中，您可以更改`.Deprecated`为`.Defunct`.

```
> transmute_my_carefully_crafted_data_structure_into_gold()
Error: 'transmute_my_carefully_crafted_data_structure_into_gold' is defunct.
Use 'alchemy' instead.
See help("Defunct") 
```

请注意，这是一个错误并停止；它不会继续调用`alchemy`。

您可以在以后的某个版本中完全删除此功能，但我会将其保留在此状态作为路标。

您提到使用 roxygen。当您第一次过渡到弃用时，您可以将@rdname 更改为 package-deprecated，在描述的开头添加一行说明它已弃用，将新功能添加到 @seealso。当它更改为 defunct 时，将 @rdname 更改为 package-defunct。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-26T05:57:14.437

我想“正确”的答案取决于你想要什么。在我看来：

1.  Jeff 和 Brandon 的方法的问题在于，您的索引将列出两个函数名称，并且没有说明哪个是首选名称。此外，如果没有某种 .Deprecated 调用，用户就更不可能知道调用该函数的首选方式是什么。
2.  Brian 方法的问题在于，我不清楚将多个函数列为已弃用的过程。

因此，请在下面输入我的示例。在另一个位置，我定义了函数的“好”版本（例如炼金术、latinSquareDigram）。在这里，我定义了我想要为其生成弃用警告的所有旧的“坏”版本。我遵循了 car 包的方法，并将我所有的函数调用更改为不推荐使用的版本，以使用 ... 作为参数。这帮助我避免了一堆杂乱的@param 语句。我还使用了@name 和@docType 指令使“yourPackageName-deprecated”出现在索引中。也许有人有更好的方法来做到这一点？

现在，每个已弃用的函数仍会显示在索引中，但在它们旁边会显示“yourPackageName 包中已弃用的函数”，并且对它们的任何调用都会产生弃用警告。要将它们从索引中删除，可以删除 @aliases 指令，但随后您将拥有用户级未记录的代码对象，我认为这是错误的形式。

```
#' Deprecated function(s) in the yourPackageName package
#' 
#' These functions are provided for compatibility with older version of
#' the yourPackageName package.  They may eventually be completely
#' removed.
#' @rdname yourPackageName-deprecated
#' @name yourPackageName-deprecated
#' @param ... Parameters to be passed to the modern version of the function
#' @docType package
#' @export  latinsquare.digram Conv3Dto2D Conv2Dto3D dist3D.l
#' @aliases latinsquare.digram Conv3Dto2D Conv2Dto3D dist3D.l
#' @section Details:
#' \tabular{rl}{
#'   \code{latinsquare.digram} \tab now a synonym for \code{\link{latinSquareDigram}}\cr
#'   \code{Conv3Dto2D} \tab now a synonym for \code{\link{conv3Dto2D}}\cr
#'   \code{Conv2Dto3D} \tab now a synonym for \code{\link{conv2Dto3D}}\cr
#'   \code{dist3D.l} \tab now a synonym for \code{\link{dist3D}}\cr
#' }
#'  
latinsquare.digram <- function(...) {
  .Deprecated("latinSquareDigram",package="yourPackageName")
  latinSquareDigram(...)
}
Conv3Dto2D <- function(...) {
  .Deprecated("conv3Dto2D",package="yourPackageName")
  conv3Dto2D(...)
}
Conv2Dto3D <- function(...) {
  .Deprecated("conv2Dto3D",package="yourPackageName")
  conv2Dto3D(...)
}
dist3D.l <- function(...) {
  .Deprecated("dist3D",package="yourPackageName")
  dist3D(...)
}
NULL 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-10T17:04:19.610

我有一段时间遇到这个问题，无法找到一个好的解决方案。然后我发现了这个。尽管如此，对于简单的情况，上述答案过于复杂：1）添加一个别名，以便旧代码不会停止工作，2）别名必须与内置文档一起使用，以及 3）它应该用roxygen2完成。

首先，添加一个函数的副本：

```
old_function_name = new_function_name 
```

然后，在哪里`new_function_name()`定义，添加到roxygen2：

```
#' @export new_function_name old_function_name
#' @aliases old_function_name 
```

现在旧函数可以工作，因为它只是新函数的副本，而文档可以工作，因为您设置了别名。旧版本也被导出，因为它包含在`@export`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T15:33:31.597

在将过长的函数名称转换为较短版本的情况下，我建议将两个名称导出为同一个函数（参见@Br​​andon 的评论）。这将允许旧代码继续工作，同时为新用户提供更方便的选择。

在我看来，将某些内容标记为`.Deprecated`（请参阅@GSEE）的唯一原因是您计划从根本上更改功能或停止在未来版本中支持某些功能。如果是这种情况，您可以使用`.Defunct`or `.Deprecated`。

# sql - 添加列值的 case 语句

> ID：10099130
> 
> 赞同：5
> 
> 时间：2012-04-11T02:39:47.960
> 
> 标签：sql, sql-server-2008, case

我需要写一个将返回的 case 语句

```
“1 of 3” if someone voted in one of three elections, 
“2 of 3” if someone voted in two of three elections, 
“3 of 3” if someone voted in three of three elections, 
```

问题是有些值是 varchar，有些是 null，我无法将它们加在一起。这是我的想法，但我无法让它发挥作用。

```
select 
id,
CASE 
     WHEN race1 + race2 + race3 = 0 then '0-3'
     WHEN race1 + race2 + race3 = 1 then '1-3'
     WHEN race1 + race2 + race3 = 2 then '2-3'
     WHEN race1 + race2 + race3 = 3 then '3-3'
     WHEN race1 + race2 + race3 is null then 'Unknown'
 END AS General_Turnout
from test4 
```

[http://sqlfiddle.com/#!3/cac66/3](http://sqlfiddle.com/#!3/cac66/3)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T02:47:05.570

这应该有效：

```
select 
id,
    CAST( (CASE WHEN race1 IS NOT NULL THEN 1 ELSE 0 END)
   +(CASE WHEN race2 IS NOT NULL THEN 1 ELSE 0 END)
   +(CASE WHEN race3 IS NOT NULL THEN 1 ELSE 0 END) AS CHAR) + '-3'
AS General_Turnout
from test4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T02:45:32.607

使用 COELESCE(value,0) 以便将 null 视为零

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:41:13.100

根据您在 SQLfiddle 上发布的内容，我假设 NULL 表示*没有投票*，任何字符串都表示*确实投票*。您不能在race1、race2 和race3 列中添加非数字字符串，但这应该可以：

```
SELECT 
  id,
  CAST(
    CASE WHEN race1 IS NOT NULL then 1 ELSE 0 END +
    CASE WHEN race2 IS NOT NULL then 1 ELSE 0 END +
    CASE WHEN race3 IS NOT NULL then 1 ELSE 0 END
  AS CHAR) + '-3' AS General_Turnout
FROM test4 
```

# ios - xCode 4.3.2 链接错误，但确实存在拱门。为什么？

> ID：10099135
> 
> 赞同：1
> 
> 时间：2012-04-11T02:40:24.780
> 
> 标签：ios, xcode, compilation, linker, amr

我试图将 AMR-NB 解码支持添加到 iOS 应用程序中，这在之前已经成功完成。但是自从我升级了我使用的框架（PhoneGap，现在作为 Cordova），我开始了一个新项目并将所有代码迁移到新项目，AMR-NB 库在链接短语期间开始出错。

![在此处输入图像描述](../Images/6e3e6a1296895668d7749a3cce8d8b43.png)

我一直在使用'file'和'lipo -info'命令检查.a lib文件，并确保fat lib包含i386的arch，并且它已经包含在构建短语的链接短语中。我一直在比较新旧项目的构建设置，但没有找到解决这个问题的运气。

有谁知道我可能在哪里弄错了？谢谢！

更新：添加了 amrFileCodec.h 和 CJ-Func.m 的代码片段

amrFileCodec.h

```
//  amrFileCodec.h
//  Created by Tang Xiaoping on 9/27/11.
//  Copyright 2011 test. All rights reserved.

#ifndef amrFileCodec_h
#define amrFileCodec_h
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include "interf_dec.h"
#include "interf_enc.h"

...

// 将AMR文件解码成WAVE文件
int DecodeAMRFileToWAVEFile(const char* pchAMRFileName, const char* pchWAVEFilename);

#endif 
```

CJ-Func.m

```
//  CJ-Func.m
//  iBear
//  Created by Chris Jiang on 11-4-22.
//  Copyright 2011 Individual. All rights reserved.

#import "CJ-Func.h"
#import "interf_dec.h"
#import "interf_enc.h"
#import "amrFileCodec.h"

@implementation MyPGPlugFunc

...

- (void)decodeAMR:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options {
    NSArray *currentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = [currentPaths objectAtIndex:0];
    NSString *wavDir = [basePath stringByAppendingPathComponent:@"tmp/wav"];
    NSString *wavPath = [basePath stringByAppendingPathComponent:[arguments objectAtIndex:1]];

    NSLog(@"[CJ-FUNC] Decoding %@ to %@", [arguments objectAtIndex:0], wavPath);

    BOOL isDir = YES;
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    if ( ![fileMgr fileExistsAtPath:wavDir isDirectory:&isDir] ) {
        if ( ![fileMgr createDirectoryAtPath:wavDir withIntermediateDirectories:YES attributes:nil error:nil] )
            NSLog(@"[CJ-FUNC] ERROR: tmp/wav directory creation failed");
        else
            NSLog(@"[CJ-FUNC] tmp/wav directory created");
    }
    [fileMgr release];

    int encRes = DecodeAMRFileToWAVEFile(
        [[arguments objectAtIndex:0] cStringUsingEncoding:NSASCIIStringEncoding], 
        [wavPath cStringUsingEncoding:NSASCIIStringEncoding]
    );

    if ( encRes <= 0 )
        [self writeJavascript:[NSString stringWithFormat:@"%@();", [arguments objectAtIndex:3]]];
    else
        [self writeJavascript:[NSString stringWithFormat:@"%@('%@');", [arguments objectAtIndex:2], wavPath]];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:22:15.510

“架构 i386 的未定义符号”消息并不意味着您的库缺少 i386 架构。重要的部分是下一行：

> “_DecodeAMRFileToWaveFile”，引用自 CJ-Func.o 中的 -[MyPGPlugFunc decodeAMR:withDict:]

听起来您有一个函数 DecodeAMRFileToWaveFile()，它在 Obj-C++ .mm 文件中定义，但您正试图从 .m 文件中使用它。因此，您遇到了 C 编译函数的方式与 C++ 编译函数的方式之间的区别。您需要告诉 C++ 使该函数看起来像一个普通的 C 函数。

您需要在头文件中使用它：

```
#ifdef __cplusplus
extern "C" {
#endif

void DecodeAMRFileToWaveFile();  // or whatever its declaration is

#ifdef __cplusplus
}
#endif 
```

这是[C++ FAQ 中的参考](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html#faq-32.6)，以及[更详细的解释](https://stackoverflow.com/questions/3789340/combining-c-and-c-how-does-ifdef-cplusplus-work)。

# ruby-on-rails - 在生产中使用 jquery-ui-rails gem 时 Heroku 找不到 jquery.ui

> ID：10099136
> 
> 赞同：9
> 
> 时间：2012-04-11T02:40:47.183
> 
> 标签：ruby-on-rails, jquery-ui, heroku

我正在使用[jquery-ui-rails](https://github.com/joliss/jquery-ui-rails) gem。它在本地主机上运行良好，但是当我推送到 heroku 时，它会显示 heroku 日志：

```
2012-04-11T02:28:59+00:00 app[web.1]: ActionView::Template::Error (couldn't find file 'jquery.ui.slider'
2012-04-11T02:28:59+00:00 app[web.1]:   (in /app/app/assets/stylesheets/application.css:12)): 
```

我的生产配置文件：

```
config.cache_classes = true

config.consider_all_requests_local       = false
config.action_controller.perform_caching = true

config.serve_static_assets = true

config.assets.compress = true

config.assets.compile = true

config.assets.digest = true 
```

网上有些问题说要改成`config.assets.compile`false，但是当我这样做时，我得到了一个`application.css not precompiled`错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-11T23:13:26.437

将线路`gem jquery-ui-rails`从`assets`Gemfile 中的组中取出似乎会有所帮助。twitter bootstrap gem 的类似问题/修复。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T05:08:01.420

我有一个类似但不完全相同的问题。就我而言，拖放方法在本地工作，但 Heroku 抱怨它找不到 jquery-ui。

为我解决的问题是：

1.  在 Gemfile 中，添加了

    **宝石'jquery-ui-rails'**

2.  在 application.js 中，添加

    **//= 需要 jquery.ui.all**

3.  在 application.css 中，添加

    * **= 需要 jquery.ui.all**

最后，当然是`git commit -a -m "added jquery ui statements"`，然后是`git push heroku master`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T07:48:01.757

您的某些资产文件中可能存在某种语法错误。由于资产是预编译的，不同类型的资产被连接为一个。现在，如果您的某个 CSS 文件的末尾有语法错误，它可能不会影响我们本地环境中的任何内容，因为资产未预编译。但是，当资产文件作为一个大文件组合在一起时，任何随后发生错误的东西都不会被加载。这可能会导致缺少 JavaScript 内容、CSS 规则等。

# lotus-notes - xpages 中的计算字段值

> ID：10099137
> 
> 赞同：2
> 
> 时间：2012-04-11T02:40:58.537
> 
> 标签：lotus-notes, xpages, lotus-domino

我正在尝试通过单击具有编辑框值+其自身值的按钮来更新计算字段值。

写在按钮上的代码：这里我将编辑框的值放在范围变量中，并使编辑框为空白。comment_te 是编辑框的名称

```
requestScope.put("commentValue", getComponent("comments_te").getValue);
getComponent("comments_te").setValue(""); 
```

为计算域的值编写的代码：comments 是计算域的名称

```
getComponent("comments").getValue + "\n" + requestScope.get("commentValue") 
```

但我得到的输出是：0 com.ibm.xsp.component.xp.XspInputText@65426542

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T04:46:42.023

您在调用 getValue() 时缺少括号。通过省略这些，您将返回一个指向组件的 getValue 方法的指针，而不是调用该方法的结果。将每个对 getValue 的引用更改为 getValue()，您将得到不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:21:39.540

您的代码返回对象。试试下面的。以下代码获取编辑框值并设置为范围变量。

```
requestScope.commentValue = getComponent("comments_te").value;
getComponent("comments_te").value = ""; 
```

以下代码将值设置为计算域。

```
getComponent("comments").value = getComponent("comments").value + "\n" + requestScope.commentValue; 
```

当您将值附加到计算字段时，默认情况下它将为其值添加 0。如果需要，请进行验证。

我希望这可以帮助你...！！！

# java - Telnet 服务器返回奇怪的字符

> ID：10099138
> 
> 赞同：1
> 
> 时间：2012-04-11T02:41:11.547
> 
> 标签：java, character, telnet

我为一所学校制作了这个程序，它涉及一个 telnet 服务器。当我运行它时，它会返回奇怪的字符，例如`ÿûÿû`. 这是输出：

```
Client connected with the IP /127.0.0.1
Client /127.0.0.1 has entered the username ÿûÿû ÿûÿû'ÿýÿûÿýdcole. 
```

我的代码：

```
Socket client = serv.accept();

InetAddress clientip = client.getInetAddress();

out("Client connected with the IP " + clientip);

InputStream clientinput = client.getInputStream();
OutputStream clientoutput = client.getOutputStream();

Scanner in = new Scanner(clientinput);
clientoutput.write("Please enter your username: ".getBytes());

String username = in.nextLine();
out("Client " + clientip + " has entered the username " + username + ".");

String pass = "Please enter the password for " + username + ": ";
clientoutput.write(pass.getBytes());

String password = in.nextLine();

if (username.equals("dcole") && password.equals("test")) {
    clientoutput.write("\r\nCorrect password!".getBytes());
} else {
    clientoutput.write("\r\nIncorrect password!".getBytes());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T03:21:18.640

真正的问题是您将 telnet 服务器视为简单地发送和接收字符数据的套接字服务器。它没有这样的事情！

[telnet 服务器实现RFC 854](https://www.rfc-editor.org/rfc/rfc854)中描述的 telnet 协议（由[RFC 5198](https://www.rfc-editor.org/rfc/rfc5198)更新以支持 Unicode ）。主 RFC 指定了一些由 telnet 客户端或服务器发送的特殊序列。

如果您的客户端要在任何 telnet 服务器上正常工作，它需要正确实现协议。WATTO 建议的解决方法可能适用于这种情况......但您可能会发现这个（或另一个）telnet 服务器在其他点插入这些“奇怪的字符”。事实上，他们根本不是“奇怪的人物”。它们是 telnet 协议中定义明确的元素，它们意味着什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T02:47:44.123

`InputStream`从您创建`Socket`. 您是否可以在请求用户名之前清除数据，例如调用`in.nextLine();`和丢弃数据，或者通过调用`clientinput.skip(clientinput.available());`尝试在请求用户名之前执行此操作 - 即在创建`Scanner`.

作为后续，当您与 Telnet 服务器交谈时，我绝对鼓励您遵循@StephenC 的建议 - 您应该实现 Telnet 规范的正确握手和数据传输属性，而不是简单地通过插座。

# iphone - 如何在 NSMutableArray IOS5 中保留对象

> ID：10099149
> 
> 赞同：-1
> 
> 时间：2012-04-11T02:43:23.167
> 
> 标签：iphone, objective-c, ios5, xcode4.2

我有一个名为数组的自定义对象数组，它存储了一堆核心数据。我使用这个数组来填充我的 UITableView 并创建单元格。然后我尝试在打开 UISearch 时使用相同的数组，但此时数组为空，我怎么能保留数组中的对象？

**编辑**

好的，这是我的一些代码

我的 .h 文件

```
@interface SelectCourses : UIViewController <DataHandlerDelegate, UITableViewDataSource, UITableViewDelegate, UITableViewDataSource> {
DataHandler *dataHandler;
NSMutableArray *courses;
IBOutlet UITableView *table;
IBOutlet UISearchBar *searchFilter;
//NSMutableArray *filteredCourses;
BOOL isFiltered;
}

@property (retain) NSMutableArray* filteredCourses; 
```

然后是我的 .m 文件，我遗漏了几个我认为无关紧要的功能

```
@implementation SelectCourses

@synthesize Delegate;
@synthesize filteredCourses;
...
...

- (void) dataHandlerHasLoadedCourseData:(NSMutableArray *)courseData {
courses = courseData;
[table reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
if(isFiltered){
    return filteredCourses.count;
}
if (courses) {
    NSLog(@"Count: %i", [courses count]);
    if (courses.count == 1) {
        return 0;
    }
    return [courses count];
}
else
    return 0;
}
...
...
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchFiltert { 
NSLog(@"searchBarSearchButtonClicked");//More debugging

if(searchFilter.text.length == 0)
{
    isFiltered = FALSE;
}
else
{
    NSLog(@"%@", [NSString stringWithFormat:searchFilter.text]);
    isFiltered = true;

    for (Course *course in courses) 
    {
        NSRange codeRange = [course.Code rangeOfString:searchFilter.text options:NSCaseInsensitiveSearch];
        NSRange nameRange = [course.Name rangeOfString:searchFilter.text options:NSCaseInsensitiveSearch];
        if(codeRange.location != NSNotFound || nameRange.location != NSNotFound)
        {
            [filteredCourses addObject:course];
        }
    }
}
[table reloadData];
} 
```

运行脚本时仍然出现以下错误，我只是假设这是由于数组为空

```
2012-04-11 20:54:23.067 scheduleTable[45885:fb03] -[__NSArrayM Code]: unrecognized selector sent to instance 0x897b360
2012-04-11 20:54:23.068 scheduleTable[45885:fb03] *** WebKit discarded an uncaught exception in the webView:shouldInsertText:replacingDOMRange:givenAction: delegate: <NSInvalidArgumentException>     -[__NSArrayM Code]: unrecognized selector sent to instance 0x897b360 
```

我的 course.h 和 .m 看起来像这样

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Post;

@interface Course : NSManagedObject

@property (nonatomic, retain) NSString *Code;
@property (nonatomic, retain) NSString *Name;
@end 
```

和

```
#import "Course.h"
#import "Post.h"

@implementation Course

@synthesize Code;
@synthesize Name;
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:03:29.653

如果我正确理解您的问题，要保留您的数组，请在 .h 文件中声明该数组，如下所示： `@property (retain) NSMutableArray *yourArrayName;`

然后，在你的 .m 文件中合成它，如下所示： `@synthesize yourArrayName;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:44:30.847

我尝试使用 Retain 方法作为 Oral b 的回答，但它让我无处可去，我对 Objective c 有点陌生，这就是我遇到问题的原因。

我的课程数组是在一个接口中声明的，但我无法使用它获得与我为搜索创建的新数组相同的结果。所以在 ViewDidLoad 我这样做

```
coursesForSearch = [[NSMutableArray alloc] init]; 
```

然后将对象添加到我的另一个数组中，我只是添加了这个数组并将对象添加到其中。

现在我可以像这样从数组中获取对象

```
[[coursesForSearch objectAtIndex:500] objectAtIndex:0]); 
```

# .net - C++ 客户端调用 C# COM 服务器返回 System.FormatException

> ID：10099150
> 
> 赞同：1
> 
> 时间：2012-04-11T02:43:44.883
> 
> 标签：.net, com, clr, marshalling, com-interop

我有一个 C# COM 接口定义为

```
 [ComVisible(true)]
    [Guid("EB6602D5-8458-4733-8F0A-05A88FEEB42F")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    public interface IMyInterface
    {
        [DispId(1)]
        void Initialize(string szPath, uint uiAddress,
            [MarshalAs(UnmanagedType.Interface)]
            object pEventsImpl,   //Interface pointer for my COM Svr Callback
            [MarshalAs(UnmanagedType.Interface)]
            out object ppCommunication); //Interface for Client to Access Server 
} 
```

为这个 COM 接口生成的 tlb 是

```
 interface IMyInterface : IUnknown {
    HRESULT _stdcall Initialize(
                    [in] BSTR szPath, 
                    [in] unsigned long uiAddress, 
                    [in] IUnknown* pEventsImpl, 
                    [out] IUnknown** ppCommunication);
} 
```

在 C++ 客户端代码中，我将 C# COM 称为

```
hr = pInterface->Initialize(    strPath, iAddress, m_Events, &pUnk); 
```

但是我收到了以下例外

```
A first chance exception of type 'System.FormatException' occurred in mscorlib.dll
First-chance exception at 0x7c812aeb in MyClient.exe: 0xE0434352: 0xe0434352\. Microsoft C++ exception: _com_error at memory location 0x0012f0ac..
A first chance exception of type 'System.Runtime.InteropServices.SEHException' occurred in MyClient.exe
An unhandled exception of type 'System.Runtime.InteropServices.SEHException' occurred in MyClient.exe 
```

我在这里做错了吗？这个 System.FormatException 是什么？

****[更新] 附加信息 **** 我尝试使用 /clr（公共语言运行时支持）选项编译 C++ 代码，它似乎可以工作。但是，我想知道是否可以不使用公共语言运行时支持编译我的 C++ 代码，因为我有一些限制，因为我使用的是现有的 C++ 客户端，我不想使用不同的配置重新编译**

 **谢谢**

# iphone - Xcode - 如何知道哪些类使用或导入了某个类？

> ID：10099152
> 
> 赞同：5
> 
> 时间：2012-04-11T02:44:28.240
> 
> 标签：iphone, xcode, xcode4

例如，我有`Class A`（头文件和 cpp 文件），我怎么知道使用了哪些 cpp 文件或头文件`Class A`？

在 Eclipse 中，我可以`Open Call Hierarchy`做到这一点。

我如何在 Xcode 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T02:47:58.533

尽管这个特性可能很方便，但不幸的是，从**Xcode 4.3**开始，这个特性仍然**不存在**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-08T00:28:49.373

可以通过单击编辑器左上角的“四个方块”图标或按-访问Xcode**相关项目菜单**`CMD``1`

Related Items 菜单包括**Included By**，您可以在其中查看包含此类的所有其他类。

[![Xcode 中包含的菜单](../Images/c4238242416ad99007754ef43e516a91.png)](https://i.stack.imgur.com/35a2i.png)

# ruby - 这段 Ruby 代码做了什么？：def self.metaclass; 类<<自我；自己; 结尾; 结尾

> ID：10099157
> 
> 赞同：5
> 
> 时间：2012-04-11T02:45:35.993
> 
> 标签：ruby, class, object, metaprogramming

以下是[Why's Poignant Guide to Ruby Chapter 6](http://mislav.uniqpath.com/poignant-guide/book/chapter-6.html)中的一段 Ruby 代码片段，他试图在其中演示 Ruby 中的元编程：

```
# Get a metaclass for this class
def self.metaclass; class << self; self; end; end 
```

我对 Ruby 不太熟悉，但这就是它在扩展形式中的样子吗？

```
def self.metaclass
    def self.self
    end
end 
```

至少我是这么理解的。但是，它仍然不完全理解这段代码的作用。**它的目的是什么？**

进一步在代码中，为什么添加这个：

```
arr.each do |a|
   metaclass.instance_eval do
     define_method( a ) do |val|
       @traits ||= {}
       @traits[a] = val
     end
   end
 end 
```

如果我理解正确，这段代码会使用给定的名称和值向@traits 添加一个新值。**那是对的吗？**

感谢您的帮助，这是给我带来麻烦的完整源代码，任何想看的人都可以：

```
# The guts of life force within Dwemthy's Array
class Creature

# Get a metaclass for this class
def self.metaclass; class << self; self; end; end

# Advanced metaprogramming code for nice, clean traits
def self.traits( *arr )
 return @traits if arr.empty?

 # 1\. Set up accessors for each variable
 attr_accessor *arr

 # 2\. Add a new class method to for each trait.
 arr.each do |a|
   metaclass.instance_eval do
     define_method( a ) do |val|
       @traits ||= {}
       @traits[a] = val
     end
   end
 end

 # 3\. For each monster, the `initialize' method
 #    should use the default number for each trait.
 class_eval do
   define_method( :initialize ) do
     self.class.traits.each do |k,v|
       instance_variable_set("@#{k}", v)
     end
   end
 end

end

# Creature attributes are read-only
traits :life, :strength, :charisma, :weapon
end 
```

**在使用中：**

```
class Dragon < Creature
    life( 1340 )     # tough scales
    strength( 451 )  # bristling veins
    charisma( 1020 ) # toothy smile
    weapon( 939 )    # fire breath
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T03:25:08.393

```
class Foo
  def self.bar    # Create a method invoked by Foo.bar instead of Foo.new.bar
    42            # the return value of this method (value of last expression)
  end
end

class Foo
  def self.jim    # Another method on the class itself
    class << self # Change the 'self' to be the metaclass of the current object
      self        # Evaluate the current 'self' as the 'return value' of 
    end           # class<<self…end; and since this is the last expression in
  end             # the method, its value is the return value for the method
end 
```

简而言之：您所看到的定义了一个以类本身命名的方法`metaclass`（`Creature`而不是实例）。当您运行此方法时，它会找到元类`Creature`并返回它。

[阅读“网络](http://yehudakatz.com/2009/11/15/metaprogramming-in-ruby-its-all-about-the-self/)”以了解对象的“元类”是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T03:30:49.697

在扩展形式中，它看起来完全一样：

```
def self.metaclass
  class << self
    self
  end
end 
```

注意它只是返回`self`，因为它是在元类的上下文中评估的，实际上`class << self`是`self`元类。

随着[define_singleton_method](http://apidock.com/ruby/Object/define_singleton_method)之类的引入，您需要直接访问元类的情况变得非常少。

这一切都[非常复杂](http://www.klankboomklang.com/2007/10/05/the-metaclass/)，似乎是“一切都是对象”设计原则的结果。

# html - 如何处理带有不确定复选框的浏览器差异

> ID：10099158
> 
> 赞同：22
> 
> 时间：2012-04-11T02:45:41.113
> 
> 标签：html, checkbox, html-input

**Primer：**一个 HTML 复选框可以设置为`indeterminate`，它显示为既未选中也未选中。即使在这种不确定的状态下，仍然存在一个潜在的布尔`checked`状态。

![处于各种状态的 Mac OS X 复选框](../Images/30bfac9a39ef32c8f1edc9e7631723f2.png)

* * *

当一个不确定的复选框被点击时，它会失去它的`indeterminate`状态。根据浏览器 (Firefox)，它还可以切换`checked`属性。

[这个 jsfiddle](http://jsfiddle.net/MLMep/9/)说明了这种情况。在 Firefox 中，单击其中一个复选框会导致它们切换其初始基础`checked`状态。在 IE 中，该`checked`属性在第一次单击时会单独保留。

我希望所有浏览器的行为都相同，即使这意味着额外的 javascript。不幸的是，在调用处理程序（或和 jquery ）*之前*，该`indeterminate`属性设置为 false ，因此我无法检测是否调用它以单击复选框。*`onclick``onchange``change``indeterminate`*

 *和`mouseup`（`keyup`用于空格键切换）事件显示先前的`indeterminate`状态，但我不想那么具体：它看起来很脆弱。

我可以在复选框（或类似的）上维护一个单独的属性`data-indeterminate`，但我想知道我是否缺少一个简单的解决方案，和/或其他人是否有类似的问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-18T10:55:43.663

**如果您希望在单击时在所有浏览器**（或至少在 IE、Chrome 和 FF5+ 上）选中一个不确定的复选框，您需要正确初始化选中的属性，如下所示[http://jsfiddle.net/K6nrT /6/](http://jsfiddle.net/K6nrT/6/)。我写了以下函数来帮助你：

```
/// Gives a checkbox the inderminate state and the right
/// checked state so that it becomes checked on click
/// on click on IE, Chrome and Firefox 5+
function makeIndeterminate(checkbox)
{
    checkbox.checked = getCheckedStateForIndeterminate();
    checkbox.indeterminate = true;
} 
```

以及依赖特征检测的有趣功能：

```
/// Determine the checked state to give to a checkbox
/// with indeterminate state, so that it becomes checked
/// on click on IE, Chrome and Firefox 5+
function getCheckedStateForIndeterminate()
{
    // Create a unchecked checkbox with indeterminate state
    var test = document.createElement("input");
    test.type = "checkbox";
    test.checked = false;
    test.indeterminate = true;

    // Try to click the checkbox
    var body = document.body;
    body.appendChild(test); // Required to work on FF
    test.click();
    body.removeChild(test); // Required to work on FF

    // Check if the checkbox is now checked and cache the result
    if (test.checked)
    {
        getCheckedStateForIndeterminate = function () { return false; };
        return false;
    }
    else
    {
        getCheckedStateForIndeterminate = function () { return true; };
        return true;
    }
} 
```

没有图像技巧，没有 jQuery，没有额外的属性，也没有涉及事件处理。这仅依赖于简单的 JavaScript 初始化（请注意，不能在 HTML 标记中设置“不确定”属性，因此无论如何都需要 JavaScript 初始化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T11:41:41.297

这解决了我的问题

```
$(".checkbox").click(function(){
    $(this).change();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-07T20:03:29.087

我不确定使用函数为不确定的复选框设置值是否会是好的解决方案，因为：

*   你将不得不改变你使用它们的每个地方，
*   如果用户在不点击复选框的情况下提交表单，您的后端将收到的值将因浏览器而异。

但我喜欢用聪明的方法来确定浏览器的工作方式。因此，您可以检查一下是否是 IE（或者其他以不寻常方式工作的浏览器）`isCheckedAfterIndeterminate()`。`window.navigator.userAgent.indexOf('Trident') >= 0`

所以我的解决方案是：

```
/// Determine the checked state to give to a checkbox
/// with indeterminate state, so that it becomes checked
/// on click on IE, Chrome and Firefox 5+
function isCheckedAfterIndeterminate()
{
    // Create a unchecked checkbox with indeterminate state
    var test = document.createElement("input");
    test.type = "checkbox";
    test.checked = false;
    test.indeterminate = true;

    // Try to click the checkbox
    var body = document.body;
    body.appendChild(test); // Required to work on FF
    test.click();
    body.removeChild(test); // Required to work on FF

    // Check if the checkbox is now checked and cache the result
    if (test.checked) {
        isCheckedAfterIndeterminate = function () { return false; };
        return false;
    } else {
        isCheckedAfterIndeterminate = function () { return true; };
        return true;
    }
}

// Fix indeterminate checkbox behavoiur for some browsers.
if ( isCheckedAfterIndeterminate() ) {
    $(function(){
        $(document).on('mousedown', 'input', function(){
            // Only fire the change event if the input is indeterminate.
            if ( this.indeterminate ) {
                this.indeterminate = false;
                $(this).trigger('change');
            }
        });
    });
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T19:15:09.020

制作您自己的可点击图像并使用一些 java(script) 使其表现得像这样。我怀疑有多少用户会理解这种状态，所以在使用它时要小心。*

# android - 停止 Java 处理程序

> ID：10099160
> 
> 赞同：0
> 
> 时间：2012-04-11T02:45:50.950
> 
> 标签：android, handler

我有一个 Java 处理程序代码，我在 android 中使用它来运行一个计时器......它运行得很棒。

我需要帮助以编程方式停止此计时器（处理程序）...当我退出 Android 中的活动时，任何简单的方法来停止此处理程序？

处理程序代码部分是：

```
Handler handler = new Handler();
handler.postDelayed(new Runnable() {
    public void run() 
    {
        // Do something after duration
    }
}, duration); 
```

如何停止此处理程序，以便在持续时间之后不执行该语句。或者有没有其他方法可以使用可以自己处理的延迟定时器线程？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T02:51:22.747

保留对您的 Runnable 的引用，然后`removeCallbacks(runnable)`为您添加到处理程序的每个 Runnable 调用以删除它们。

# jquery - 我用jqm和struts-json，ajax不能执行回调函数

> ID：10099164
> 
> 赞同：0
> 
> 时间：2012-04-11T02:46:43.157
> 
> 标签：jquery, jquery-mobile, struts2

我使用jqm和struts-json，可以成功调用strtus2Action中的后台函数，但是ajax不能执行回调函数。

`$.get("BookCollectAction!delete",{id:deleteId},function() { alert("1"); });`

我可以成功删除数据，但是 alert("1") 没有执行，为什么

# ruby-on-rails - jPlayer + Rails 3.1.3 swfPath？

> ID：10099166
> 
> 赞同：3
> 
> 时间：2012-04-11T02:46:59.817
> 
> 标签：ruby-on-rails, jplayer

* * *

我正在尝试让 jPlayer 在 rails 应用程序中使用 flash 回退，但到目前为止还没有运气！我的构造函数现在看起来像这样：

```
$("#jquery_jplayer_1").jPlayer({
preload: "auto",
errorAlerts: true,
swfPath: "javascripts",
solution: "flash, html",
supplied: "oga",
wmode: "window",
ended: function(e) {
        ...some function...
}
}); 
```

我似乎无法让 swfPath 正确，而且我必须在这里遗漏一些关于 jPlayer 如何寻找该路径的内容。我的其他资产（例如样式表中的图像）似乎已正确路由到 assets 文件夹/images 文件夹。我似乎找不到让 jPlayer 找到 Jplayer.swf 的神奇组合。我尝试将 swf 文件放在公用文件夹、公用文件夹内的文件夹、资产文件夹以及资产文件夹内的 javascripts 文件夹中。没运气！以前有人处理过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T02:20:27.940

我有同样的问题......在互联网上找不到答案后，我开始尝试：）

这对我有用（Rails 3.2）：

```
$(document).ready(function(){
   $("#jplayer").jPlayer({
       ready: function (event) {
           $(this).jPlayer("setMedia", {
               m4a: "url goes here"
           });
       },
       swfPath: "/",
       supplied: "m4a",
       solution: "flash, html"
   });
}); 
```

或在咖啡脚本中：

```
$ = jQuery
$ ->
  $(document).ready ->
    $("#jplayer").jPlayer(
      ready: (event) ->
        $(this).jPlayer "setMedia",
          m4a: "url goes here"
      preload: "auto",
      swfPath: "/",
      solution: "html, flash",
      supplied: 'm4a') 
```

我将 Jplayer.swf 文件放在 public/ 下。现在工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T21:43:55.247

我认为这样做的一个好方法是向`swf`资产管道添加一个目录。

您可以通过添加来做到这一点

```
config.assets.paths << Rails.root.join("app", "assets", "swf") 
```

到您的`config/application.rb`文件并将`Jplayer.swf`文件放入`vendor/swf/Jplayer.swf`

在您的 JS 文件中，您使用`.js.erb`

```
$(document).ready(function(){
  $("#jplayer").jPlayer({
    swfPath: "<%= asset_path "Jplayer.swf" %>"
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T15:02:16.410

由于这里还没有人提到它，你也可以在你的 jplayer 初始化代码中这样做：

适用于使用资产管道的 Rails >= 3.2！

```
swfPath: "<%= escape_javascript(asset_path('jplayer/Jplayer.swf')) %>",
solution: "flash,html",
supplied: "rtmpa,mp3", 
```

记住文件有一个大写的 J :-)

# php - 如何在树枝模板中添加 require_once('file.php') 语句？

> ID：10099169
> 
> 赞同：2
> 
> 时间：2012-04-11T02:47:13.233
> 
> 标签：php, symfony, twig, require-once

我是这个 symfony2 和 twig 的新手，所以我对它不是很熟悉。我需要将 require_once(file.php) 添加到 mytemplate.html.twig 中，但我只是不知道该怎么做！！:S
问题是我必须在我的网站上添加一个社交滑块，该滑块正在使用 symfony2 开发。
该插件的要求是添加 require_once(file.php) 语句，所以关于如何做到这一点的任何想法？:S 这是文件.php

```
require_once(dirname(__FILE__) . '/common.inc.php');

DEFINE('FBLB_DEMO',true);

function fblb_slider()
{
//print_r($_REQUEST);
global $fblb_preview_options;
if (isset($_REQUEST['Preset']) && FBLB_DEMO===true && FBLB_CONFIG===0)
{
    require(dirname(__FILE__) . '/fblbconfig.inc.php');
    require_once(dirname(__FILE__) . '/config.php');
    $fblb_preview_options = array_merge((array)$fblb_options,    (array)$FBLB_Presets[$_GET['Preset']]['Options']);
}
if (isset($_REQUEST['preview']) && (FBLB_CONFIG===1 || FBLB_DEMO===true))
{
    $options = $fblb_preview_options;
}
else
{
    require_once(dirname(__FILE__) . '/config.php');
    $options = $fblb_options;
    if($options['DisableByGetParamN'] && $options['DisableByGetParamV'] && $_GET[$options['DisableByGetParamN']]==$options['DisableByGetParamV'])
    {
        return;
    }
}
if ($options['Enable'] == 1 && $options['FacebookPageURL'])
{
    require_once(dirname(__FILE__) . '/fblb_slider.php');
}
if ($options['TW_Enable'] == 1 && $options['TW_Username'])
{
    require_once(dirname(__FILE__) . '/fblb_tw_slider.php');
}
if ($options['GP_Enable'] == 1 && $options['GP_PageID'])
{
    require_once(dirname(__FILE__) . '/fblb_gp_slider.php');
}
if ($options['YT_Enable'] == 1 && $options['YT_Channel'])
{
    require_once(dirname(__FILE__) . '/fblb_yt_slider.php');
}
if ($options['LI_Enable'])
{
    require_once(dirname(__FILE__) . '/fblb_li_slider.php');
}
}
fblb_slider(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T21:08:31.380

好的，我解决了！首先我必须创建树枝扩展>_>
我遵循本指南[http://www.solidwebcode.com/web-development/twig-extensions-symfony-2/](http://www.solidwebcode.com/web-development/twig-extensions-symfony-2/)或西班牙语[http://facultia.com/博客/2011/08/08/extensiones-personalizadas-twig-proyectos-symfony2/](http://facultia.com/blog/2011/08/08/extensiones-personalizadas-twig-proyectos-symfony2/)
我用过

```
Twig_Function_Method($this, 'your_method_name') 
```

而不是过滤器，它运作良好！之后我只是授予脚本执行权限，就是这样 =D !! 在树枝模板中，您使用这样的方法

```
{{ your_method_name(your_params) }} 
```

感谢所有试图提供帮助的人！！！=D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:26:40.060

简短的回答：您不能在树枝模板中包含 PHP 代码。

我没有详细查看您发布的代码，但您可能希望使用嵌入式控制器来包装您的滑块。

通读此：

[http://symfony.com/doc/current/book/template.html](http://symfony.com/doc/current/book/templating.html)

特别是关于嵌入式控制器的部分。由您的嵌入式控制器决定是否包含 myfile.php 文件，捕获滑块生成的 html/js 代码（这是我假设的），然后返回它。

# hadoop - 将hadoop集群升级到clodera 4 b1后，出现Invalid "mapreduce.jobtracker.address" 配置错误

> ID：10099170
> 
> 赞同：3
> 
> 时间：2012-04-11T02:47:15.560
> 
> 标签：hadoop, hbase

我最近升级到 clodera4b1 。升级之前，mapreduce 作业运行良好，但现在当我执行任何 mapreduce 程序时，出现以下错误：

命令运行：

```
hadoop jar /usr/lib/hadoop/hadoop-mapreduce-examples-0.23.0-cdh4b1.jar grep *.xml /user/out/ 'dfs'

12/04/10 19:23:15 INFO mapreduce.Cluster: Failed to use org.apache.hadoop.mapred.LocalClientProtocolProvider due to error: Invalid "mapreduce.jobtracker.address" configuration value for LocalJobRunner : "dev-xxx:yyyy"
12/04/10 19:23:15 ERROR security.UserGroupInformation: PriviledgedActionException as:anchauhan (auth:SIMPLE) cause:java.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.
Exception in thread "main" java.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.
    at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:123)
    at org.apache.hadoop.mapreduce.Cluster.<init>(Cluster.java:85)
    at org.apache.hadoop.mapreduce.Cluster.<init>(Cluster.java:78)
    at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1185)
    at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1181)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1167)
    at org.apache.hadoop.mapreduce.Job.connect(Job.java:1180)
    at org.apache.hadoop.mapreduce.Job.submit(Job.java:1209)
    at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:1233)
    at com.nextag.mapred.MerchantImport.doTask(MerchantImport.java:221)
    at com.nextag.mapred.Main.main(Main.java:9)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:200) 
```

对于我的自定义映射作业，我在编译 jar 文件时将库文件更改为新文件，但没有成功

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:24:41.217

我们有同样的异常，原因是我们在 pom 文件中有错误的依赖项。我们指向的是用于 yarn 的 hadoop-client 版本 2.0.0-cdh4.0.0，但我们使用的是 MRv1，所以我们应该指向 2.0.0-mr1-cdh4.0.0。您的依赖项中不应有任何纱线 jar 文件。

[参考](https://www.cloudera.com/documentation/cdh/5-0-x/CDH-Version-and-Packaging-Information/cdhvd_hadoop_api_dependencies.html)

# iphone - 尽可能快地显示 CGImage 数据流

> ID：10099171
> 
> 赞同：0
> 
> 时间：2012-04-11T02:47:36.337
> 
> 标签：iphone, ios, ipad, opengl-es, uiimage

我正在通过网络连接接收一系列图像，并希望以最快的速度显示它们，最高 30 FPS。我派生了一个 UIView 对象（因此我可以覆盖 drawRect）并公开了一个名为`cameraImage`. 帧数据按需要尽快到达，但实际绘制到屏幕需要太多时间（由于 setNeedsDisplay 的滞后），这既会在视频中造成滞后，也会减慢与其他控件的交互。有什么更好的方法来做到这一点？我虽然使用 OpenGL，但我看到的唯一示例不是用于将静态图像绘制到屏幕上，而是用于向某些旋转多边形添加纹理。

```
- (void)drawRect:(CGRect)rect
{
  CGContextRef context = UIGraphicsGetCurrentContext();

  CGRect screenBounds = [[UIScreen mainScreen] bounds];
  [self.cameraImage drawInRect:screenBounds];

  // Drawing code
  //CGContextDrawImage(context, screenBounds, [self.cameraImage CGImage]); // Doesn't help
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T02:59:01.310

尝试将`CALayer`'s设置`contents`为图像。或者，如果您使用相对健全的参数进行设置，则设置 a`UIImageView`应该`image`不会慢很多。

OpenGL 绝对是一个替代方案，但它更难使用，而且它仍然会受到与其他相同的东西的限制：纹理上传速度。

（你这样做的方式（绘图`drawRect:`），你必须让UIKit为你分配一个位图，然后将图像绘制到位图中，然后将位图上传到视频硬件。最好跳过中间人并上传图像如果可以的话，直接。）

它还可能取决于 CGImage 的来源。它是由原始位图数据支持的（如果是，是什么格式？），还是 JPEG 或 PNG？如果图像必须进行格式转换或解码，则需要更长的时间。

另外，CGImage 有多大？确保它不大于它需要的大小！

# android-wifi - wifi监听器

> ID：10099177
> 
> 赞同：1
> 
> 时间：2012-04-11T02:48:14.900
> 
> 标签：android-wifi, wifimanager

我想在 wifi 信号强度较弱时发出通知。如果没有 wifi 的监听器，我可以为 wifi 创建一个自定义监听器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T03:27:27.657

最简单的做法是为 RSSI_CHANGED_ACTION 注册一个监听器，可以在[WifiManager](http://developer.android.com/reference/android/net/wifi/WifiManager.html#RSSI_CHANGED_ACTION)中找到。

# iphone - 加密 iOS 应用程序 ipa 文件

> ID：10099184
> 
> 赞同：1
> 
> 时间：2012-04-11T02:51:00.847
> 
> 标签：iphone

我希望为越狱用户加密一个免费软件的ipa文件，以便其他人无法查看项目详细信息。

有什么工具可以做到这一点吗？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:08:04.427

据我所知，**你不能做那样**的事情！苹果可能一开始就不允许你的应用进入 AppStore。

生成 ipa 文件的方式（截至目前），**越狱不允许**黑客查看使用的类或底层代码/算法（我认为他可以通过 iExplorer 查看使用的图像，或者可能一个简单的 ssh 就足够了）。考虑到您希望将应用程序上传到 AppStore，进一步加密并不是一个很好的解决方案。

所有开发人员都严格遵守 Apple 的规则及其领域。开发人员唯一需要担心的是*付费*应用程序可以在网络上*免费*使用。关于这一点，我们可以期待苹果公司在今年晚些时候提供解决方案来防止*盗版（希望如此）*

# django - Django 不显示错误回溯到浏览器 - 只有 500 页

> ID：10099186
> 
> 赞同：3
> 
> 时间：2012-04-11T02:51:07.897
> 
> 标签：django

我已将 DEBUG、TEMPLATE_DEBUG 和 DEBUG_PROPAGATE_EXCEPTIONS 设置为 true，并且没有向浏览器显示回溯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:14:50.720

模块中需要以下内容才能在`settings`错误后显示诊断页面：

*   `DEBUG`是真的
*   客户端（Web 浏览器）从 localhost 或从 中列出的任何 IP 地址连接`INTERNAL_IPS`。
*   变量`TEMPLATE_CONTEXT_PROCESSORS`包含`"django.core.context_processors.debug"`或保留默认值。

您可以通过以下不同的文本轻松区分 Web 服务器的错误 500 页面和 Django 的错误页面：
“...出现错误。已报告...”（这是来自默认模板。）如果您这样做`import handler500 from django.conf.urls`（或django.conf.urls.defaults 在旧 Django 中）在主 urlconf 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:34:16.027

试试这个：

```
set DEBUG = True
TEMPLATE_DEBUG = DEBUG 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T18:31:22.927

在进入错误页面之前，您的 process_request 中的中间件可能有错误。虽然，您可以访问某些页面表明这不是问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-01T11:37:16.433

评论**DEBUG_PROPAGATE_EXCEPTIONS=True**，这应该有效。请试试。

# iphone - 保留 plist 但失去 plist 值

> ID：10099192
> 
> 赞同：0
> 
> 时间：2012-04-11T02:52:06.803
> 
> 标签：iphone, ios, plist

我正在创建一个 plist 来保存一些值，但是在测试期间我注意到在应用程序关闭并从多任务处理中删除后我保留了新创建的 plist。但是，如果应用程序从多任务处理中删除，但如果应用程序关闭，我会在该 plist 中丢失我的值...

这是我在管理所有读/写/保存等的 plist 控制器类中的保存数据方法。

```
- (void) saveData:(NSString *)methodName signature:(NSString *)pSignature Version:(NSNumber *)pVersion request:(NSNumber *)rNumber dataVersion:(NSNumber *)dvReturned cacheValue:(NSNumber *)cValue;
    {
        // get paths from root direcory
        NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
        // get documents path
        NSString *documentsPath = [paths objectAtIndex:0];
        // get the path to our Data/plist file
        NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"EngineProperties.plist"];

        // set the variables to the values in the text fields
        self.signature = pSignature;
        self.version = pVersion;
        self.request = rNumber;
        self.dataVersion = dvReturned;

        //do some if statment stuff here to put the cache in the right place or what have you.
        if (methodName == @"manu")
        {
            self.man = cValue; 
        }
        else if (methodName == @"models")
        {
            self.mod = cValue;
        }
        else if (methodName == @"subMod")
        {
            self.sub = cValue;
        }

        self.cacheValue = [NSDictionary dictionaryWithObjectsAndKeys:
                           man, @"Manu",
                           mod, @"Models",
                           sub, @"SubModels", nil];

        NSDictionary *plistDict = [NSDictionary dictionaryWithObjectsAndKeys:
                                   signature, @"Signature",
                                   version, @"Version",
                                   request, @"Request",
                                   dataVersion, @"Data Version",
                                   cacheValue, @"Cache Value", nil];

        NSString *error = nil;
        // create NSData from dictionary
        NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

        // check is plistData exists
        if(plistData)
        {
            // write plistData to our Data.plist file
            [plistData writeToFile:plistPath atomically:YES];

            NSString *myString = [[NSString alloc] initWithData:plistData encoding:NSUTF8StringEncoding];
            //        NSLog(@"%@", myString);
        }
        else
        {
            NSLog(@"Error in saveData: %@", error);
            //        [error release];
        }
    }

    @end 
```

我的问题有两个部分。我可以保存这些值，以便即使从多任务栏中删除应用程序，它们也会保留在 plist 中。如果它可以工作，我需要改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:00:28.343

这可能与调用 saveData 方法的位置有关。查看应用程序委托，默认情况下有一些存根。您可能需要 applicationWillResignActive、applicationDidEnterBackground 或 applicationWillTerminate。检查每个文档，您想要的文档将取决于您希望何时写入数据。

# c# - 使用 WinRT 的 UDP 发现（Metro 风格的 API）

> ID：10099196
> 
> 赞同：2
> 
> 时间：2012-04-11T02:52:40.610
> 
> 标签：c#, wcf, windows-runtime, .net-4.5, ws-discovery

我在尝试在 Metro 中实施 WS-Discovery 时遇到了很多麻烦。似乎不支持发现服务：

我想在 Metro 中执行以下操作，但不认为我能够从 .NET 4.0 的示例中执行（我想在 WinRT 中执行等效操作）：

```
 DiscoveryClient discoveryClient = new DiscoveryClient(new UdpDiscoveryEndpoint());   
        FindResponse discoveryResponse= discoveryClient.Find(new FindCriteria(typeof(ISampleService)));  
        EndpointAddress address = discoveryResponse.Endpoints[0].Address;   
        SampleServiceClient service = new SampleServiceClient(new BasicHttpBinding(), address); 
        service.Echo("WS-Discovery test"); 
```

有没有人有任何想法？

查看 API： http: [//msdn.microsoft.com/en-us/library/windows/apps/hh454057 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh454057(v=vs.85).aspx)

似乎没有很多人支持发现。最好使用 DatagramSocket 实现我自己的发现机制吗？

# java - Android - 在项目根目录中存储和加载文件

> ID：10099198
> 
> 赞同：2
> 
> 时间：2012-04-11T02:52:59.190
> 
> 标签：java, android, storage

我正在寻找一种合适的方式来存储和访问我的 Android 应用程序中的 pdf 文件。

问题是：我有 5 个 pdf 文件，我想将它们存储在项目资源中并加载到应用程序中。

我试图在项目 root 中创建一个新目录`/myApp/pdfs`，并通过以下方式访问它：

```
File myFile = new File("/myApp/pdfs/,fileName); 
```

我尝试了一些不同的路径名变体：`./myApp/pdfs`, `myApp/pdfs`, `/pdfs`, `./pdfs`. 但是，我收到相同的消息，指出找不到该文件。

如何获取我的应用程序目录的路径？这是保存少量pdf文件的最合适方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T02:57:31.337

如果您想从应用程序加载 pdf（在应用程序运行时），您可能希望将它们存储在 res/raw 文件夹中。

# javascript - 如何使用 Meteor 处理文件上传？

> ID：10099202
> 
> 赞同：77
> 
> 时间：2012-04-11T02:54:07.473
> 
> 标签：javascript, file-upload, meteor

使用 Meteor 处理文件上传的规范方法是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-18T20:47:24.320

我使用[了 http://filepicker.io](http://filepicker.io)。他们将上传文件，将其存储到您的 S3 中，并向您返回文件所在的 URL。然后我只是将 url 放入数据库中。

1.  将文件选择器脚本放入您的客户端文件夹。

    ```
    wget https://api.filepicker.io/v0/filepicker.js 
    ```

2.  插入文件选择器输入标签

    ```
    <input type="filepicker" id="attachment"> 
    ```

3.  在启动时，初始化它：

    ```
    Meteor.startup( function() {
        filepicker.setKey("YOUR FILEPICKER API KEY");
        filepicker.constructWidget(document.getElementById('attachment'));
    }); 
    ```

4.  附加事件处理程序

    ```
    Templates.template.events({
        'change #attachment': function(evt){
            console.log(evt.files);
        }
    }); 
    ```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-04T20:53:01.607

对于图像，我使用类似于[Dario 的](https://stackoverflow.com/a/12985583/166101)方法，只是我不将文件写入磁盘。我将数据作为模型上的字段直接存储在数据库中。这对我有用，因为我只需要支持支持[HTML5 File API](http://www.w3.org/TR/FileAPI/)的浏览器。我只需要简单的图像支持。

```
Template.myForm.events({
  'submit form': function(e, template) {
    e.preventDefault();
    var file = template.find('input type=["file"]').files[0];
    var reader = new FileReader();
    reader.onload = function(e) {
      // Add it to your model
      model.update(id, { $set: { src: e.target.result }});

      // Update an image on the page with the data
      $(template.find('img')).attr('src', e.target.result);
    }
    reader.readAsDataURL(file);
  }
}); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-20T05:32:49.670

我刚刚提出了一个使用 Meteor.methods 和 HTML5 File 的 API[实现文件上传的方法。](https://gist.github.com/3922137)让我知道你的想法。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-04-11T06:24:18.820

目前似乎没有办法与 HTTP 服务器交互或做任何与 HTTP 相关的事情。

您唯一能做的就是通过 Meteor.methods 公开的 RPC 方法与服务器对话，或者直接通过公开的 mongoDB API 与 mongoDB 对话。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-01-12T23:35:18.677

有一个新包：[edgee:slingshot](https://github.com/CulturalMe/meteor-slingshot/)。它不会将文件上传到您的流星服务器，但这样更好，因为它允许流星服务器专注于服务流星应用程序的主要目标，而不是处理昂贵的文件传输。

相反，它将文件上传到云存储服务。目前它支持 AWS S3 和 Google Cloud Files，但它也将支持 Rackspace Cloud Files，未来可能还会支持 Cloudinary。

您的流星服务器仅充当协调器。

![直接 VS 间接上传](../Images/a94be784bab9495607031c196f024020.png)

它也是一种用途广泛且重量轻的包装。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-03-24T15:57:57.977

有一个名为[router](https://github.com/tmeasday/meteor-router)的环境包，它允许这样做。

实际上，现在处理文件上传的最佳方式是[collectionFS](https://github.com/raix/Meteor-CollectionFS)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-09-09T06:12:46.023

这是这次的最佳解决方案。它使用[collectionFS](https://github.com/CollectionFS/Meteor-CollectionFS)。

```
meteor add cfs:standard-packages
meteor add cfs:filesystem 
```

客户：

```
Template.yourTemplate.events({
    'change .your-upload-class': function(event, template) {
        FS.Utility.eachFile(event, function(file) {
            var yourFile = new FS.File(file);
            yourFile.creatorId = Meteor.userId(); // add custom data
            YourFileCollection.insert(yourFile, function (err, fileObj) {
                if (!err) {
                   // do callback stuff
                }
            });
        });
    }
}); 
```

服务器：

```
YourFileCollection = new FS.Collection("yourFileCollection", {
    stores: [new FS.Store.FileSystem("yourFileCollection", {path: "~/meteor_uploads"})]
});
YourFileCollection.allow({
    insert: function (userId, doc) {
        return !!userId;
    },
    update: function (userId, doc) {
        return doc.creatorId == userId
    },
    download: function (userId, doc) {
        return doc.creatorId == userId
    }
}); 
```

模板：

```
<template name="yourTemplate">
    <input class="your-upload-class" type="file">
</template> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-09-06T22:27:51.903

如果您不需要非常大的文件，或者可能只在短时间内存储文件，那么这个简单的解决方案非常有效。

在你的 html...

```
<input id="files" type="file" /> 
```

在您的模板事件映射中...

```
Template.template.events({
  'submit': function(event, template){
    event.preventDefault();
    if (window.File && window.FileReader && window.FileList && window.Blob) {
      _.each(template.find('#files').files, function(file) {
        if(file.size > 1){
          var reader = new FileReader();
          reader.onload = function(e) {
            Collection.insert({
              name: file.name,
              type: file.type,
              dataUrl: reader.result
            });
          }
          reader.readAsDataURL(file);
        }
      });
    }
  }
}); 
```

订阅集合并在模板中呈现链接...

```
<a href="{{dataUrl}}" target="_blank">{{name}}</a> 
```

虽然这对于大文件或文件密集型应用程序可能不是最强大或最优雅的解决方案，但如果您想实现文件的简单上传和下载/渲染，它对所有类型的文件格式都非常有效。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-04-11T12:57:47.037

您可以尝试直接上传到亚马逊 S3，使用 js 上传器和其他东西做一些技巧。 [http://aws.amazon.com/articles/1434](http://aws.amazon.com/articles/1434)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-09-22T02:21:21.367

您可以在[流星路线图](https://trello.com/b/hjBDflxp/meteor-roadmap)上看到，“文件上传模式”功能计划用于“1.0 之后”。所以我们还得等看官方的办法。

目前，最好的方法之一是使用[“collectionFS”](https://github.com/raix/Meteor-CollectionFS)（在撰写本文时是 0.3.x 开发预览版）。

或这里建议的[inkfilepicker（例如filepicker.io）](https://www.inkfilepicker.com/)。它很容易使用，尽管这显然需要用户端的 Internet 连接。

如果只是玩玩，您也可以利用 html5 功能。[类似的](http://georgeinenglish.com/upload-files-meteor-js/)东西。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-09-18T01:53:34.280

要在不花费 filepicker.io 的情况下完成与最受好评的答案相同的操作，请按照此包的说明进行操作：[https ://github.com/Lepozepo/S3](https://github.com/Lepozepo/S3)

然后获取链接，使用类似于下面的代码。最后，将secureLink返回的url插入数据库。

```
Template.YourTemplate.events({
  "click button.upload": function() {
    var files = $("input.file_bag")[0].files;
    S3.upload(files, "/subfolder", function(e,r) {
      console.log(r);
      Session.set('secureLink', r.secure_url);
    })
  }
}); 
```

```
Template.YourTemplate.helpers({
  "files": function() {
    return S3.collection.find();
  },

  "secureLink": function() {
    return Session.get('secureLink');
  }
}); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-11-24T21:42:39.747

这是另一个解决方案：

[https://doctorllama.wordpress.com/2014/11/06/meteor-upload-package-with-jquery-file-upload/](https://doctorllama.wordpress.com/2014/11/06/meteor-upload-package-with-jquery-file-upload/)

这个使用了 Blueimp 的上传解决方案，它支持分块上传、进度条等。

# binary-search-tree - 任何优雅的二叉搜索树算法来解决这个问题？

> ID：10099204
> 
> 赞同：0
> 
> 时间：2012-04-11T02:54:13.820
> 
> 标签：binary-search-tree

我遇到了这个问题，并希望有一个快速的算法来解决它。

给定 2D 平面中的 n 个点（没有一个 x 值或 y 值等于另一个），找出形成正斜率线的所有点对的数量。（比如 (0,0) 和 (1 ,1)，正斜率为 45 度)

由于 n 很大（比如 60000），所以我需要一个优雅的算法来将它保持在 1 秒内。我知道用 O(n^2) 很容易做到这一点，但它只是变慢了，大约需要 30 秒。是否可以使用二叉搜索树来完成 nlogn 复杂性？

我感谢任何想在这方面启发我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:01:10.550

看起来你应该能够在数学上做到这一点..

每组 2 个点（我相信使用排列）将是正数或负数，如果它们是随机点，这意味着平均 50% 正数和 50% 负数。所以这将是对的数量/ 2。

# c++ - 如何使用 C++ 解析向量的路径

> ID：10099206
> 
> 赞同：0
> 
> 时间：2012-04-11T02:55:00.603
> 
> 标签：c++, parsing, vector, path

我需要将“路由器”的 URL 的路径部分解析为 REST Web 服务的一部分。我正在使用 PION 库来处理 HTTP 请求。这个库似乎没有任何检索部分 URL 路径的功能——至少看起来是这样。我找不到另一个这样做的图书馆。[例如， http://www.w3.org/Library/src/HTParse.c](http://www.w3.org/Library/src/HTParse.c)没有给出部分路径。

有没有更快，更强大的方法来做到这一点：

```
std::vector<std::string> parsePath(std::string path)
{
    std::string delimiter = "/";
    std::string part = "";
    std::size_t firstPos = 0;
    std::size_t secondPos = 0;
    std::vector<std::string> parts;

    while (firstPos != std::string::npos)
    {
        firstPos = path.find(delimiter, firstPos);
        secondPos = path.find(delimiter, firstPos + 1);
        part = path.substr(firstPos + 1, (secondPos - 1) - firstPos);
        if (part != "") parts.push_back(part);
        firstPos = secondPos;
    }

    return parts;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T03:01:54.693

如果您可以自由使用[Boost](http://www.boost.org)，解析文件系统路径的最简单方法是使用[filesystem library](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/index.htm)，它具有独立于平台和处理 POSIX 和 Windows 路径变体的优点：

```
boost::filesystem::path p1("/usr/local/bin");
boost::filesystem::path p2("c:\\");
std::cout << p1.filename() << std::endl; // prints "bin"
std::cout << p1.parent_path() << std::endl; // prints "/usr/local" 
```

要遍历路径的每个元素，可以使用[路径迭代器](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#path-iterators)：

```
for (auto const& element : p1)
    std::cout << element << std::endl; 
```

印刷

```
"/"
"usr"
"local"
"bin" 
```

如果没有 Boost，请选择[解析分隔字符串的多种方法之一](https://stackoverflow.com/q/909289/1170277)。

# jquery - 为什么这个 json 脚本在 IE7 和 8 中不起作用，但在所有其他浏览器中都起作用？

> ID：10099208
> 
> 赞同：0
> 
> 时间：2012-04-11T02:55:08.360
> 
> 标签：jquery, json

我几乎完成了我的网站重建工作，现在正处于测试阶段。在 IE7 和 8 中进行测试时，我发现由于 json 脚本，我的 jquery 脚本将无法正常工作，即使它们在包括 IE9 在内的所有其他浏览器中都可以正常工作。

该页面是：[http ://www.carcityofdanbury.com/New/?cat=01&do=View&stock=18481](http://www.carcityofdanbury.com/New/?cat=01&do=View&stock=18481)

该脚本是信息请求表单，这一行中 `".append("<p>Thank you " + data.name + ",</p><p class=\"indent\">we recieved your info request " + data.for + " on our<br />'.$vehicle.' and will contact you shortly.</p>")"`的内容：导致 jquery 选项卡不再工作。

我做了 php 和 jquery 编码，但雇了人来做 json，所以我不知道如何解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:35:53.700

问题在于，`data.for`听起来有点像您（编写代码的人）正在尝试访问其中一个保留名称。即使`data.for`应该是有效的，IE 也不喜欢它认为特殊的名称（例如类）。`data.class`会导致 IE 出现问题，即使它是有效的。

例如，尝试重命名`data.for`为其他名称`data._for`。确保更新`01/Resources/infoRequest.php`PHP 文件以返回*新*值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T19:25:59.173

解决了...代码中有一个额外的逗号：

```
 <script language="javascript" type="text/javascript">
        $(document).ready(function() {

        // Tabs
            $("#tabs").tabs();

        // Google map
            $(\'#embed\').gmap3(
                {action: \'addMarker\', lat:41.40372, lng:-73.45844, map:{center: true, zoom: 17, mapTypeId: google.maps.MapTypeId.ROADMAP}}
            );

        // Pic popup
            $("#viewPics").fancybox({
                \'type\': \'iframe\', \'transitionIn\': \'fade\', \'transitionOut\': \'fade\', \'width\': 900, \'height\': 500, \'autoScale\': false, \'scrolling\': \'no\'
            });

        // Form Validation
            jQuery.validator.messages.required = "";
            $("#infoForm").validate({

                invalidHandler: function(e, validator) {
                    var errors = validator.numberOfInvalids();
                    if (errors) {
                        var message = errors == 1
                            ? \'You missed 1 required field.\'
                            : \'You missed \' + errors + \' required fields\';
                        $("li.Error span").html(message);
                        $("li.Error").show();
                    } else {
                        $("li.Error").hide();
                    }
                },

                onkeyup: false,
                submitHandler: function(form) {
                    $.ajax({
                        url: "01/Resources/infoRequest.php",
                        type: "POST",
                        cache:false,
                        data: $("#infoForm").serialize(),
                        dataType: "json",
                        success: function(data) {
                            $("li.Error").hide();
                            $("#contact_form").html(\'<div id="message"></div>\');
                            $("#message").html("<h2>Info Request Submitted!</h2>")
                            .append("<p>Thank you " + data.name + ",</p><p class=\"indent\">we recieved your info request " + data.test + " on our<br />'.$vehicle.' and will contact you shortly.</p>")
                            .hide()
                            .fadeIn(2500, function() {
                                $("#message").append("<p>Would you like to <a href=\"?cat=02&stock='.$stock.'\">prefill an application</a> now?</p>")
                            });
                        }
                    });
                }, <------- This guy was the culprit

            });

        });
    </script> 
```

# c# - 无法在 selenium RC 中找到动态下拉项目

> ID：10099212
> 
> 赞同：0
> 
> 时间：2012-04-11T02:55:51.440
> 
> 标签：c#, .net, selenium-rc

我是 selenium 的新手，很长一段时间以来，我一直在通过从另一个下拉列表中选择项目来动态绑定的下拉列表中找到一个项目。我的示例代码后跟：

selenium.Open(".../Default.aspx");

selenium.WindowMaximize();

selenium.Click("name=ddCountry");

selenium.Click("//div[@id='ddCountry_DropDown']/div/ul/li[1]");

str = selenium.GetText("//div[@id='ddCountry_DropDown']/div/ul/li[1]");

selenium.Type("name=ddCountry", strValue);

selenium.Click("name=ddCity");

selenium.Click("//div[@id='ddCity_DropDown']/div/ul/li[1]");

str = selenium.GetText("//div[@id='ddCity_DropDown']/div/ul/li[1]");

selenium.Click("id=btnRedirect");

selenium.WaitForPageToLoad("30000");

在上面的代码中，我试图在国家下拉列表中选择一个项目后做类似的事情。在 selectionchange 事件触发时，很少有项目绑定到城市下拉菜单。我的问题是“ selenium.Click("//div[@id='ddCity_DropDown']/div/ul/li[1]"); ”当此代码执行时我收到类似“Element //div[@id= 'ddCity_DropDown']/div/ul/li[1] 未找到”。请提前提供此问题的解决方案，谢谢。

问候，文卡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:42:49.837

这是因为城市下拉是一个国家下拉的结合。您需要在国家下拉列表后添加一些有意的等待，以使城市下拉列表出现。

您可以在数据库代码之后的第一个测试用例中在 Java 中引发一些等待，如下所示：

long end3 = System.currentTimeMillis() + 6000;

```
 while(System.currentTimeMillis()<end3)
    {
        // Do nothing here Just time pass.  
    } 
```

这将确保 Java 代码等待 6000 毫秒

# assembly - 汇编语言随机数生成器

> ID：10099214
> 
> 赞同：3
> 
> 时间：2012-04-11T02:56:18.433
> 
> 标签：assembly, random, x86, numbers, prng

我最近开始学习汇编语言。对于我正在从事的项目，我必须使用线性同余制作一个随机数生成器。我想取三个数字。一个上限、一个下限和我想要多少个随机数。至于我想出的获取随机数的公式......

randomNumber = (seed % (upper-lower) + lower)

然后我尝试将其放入代码中。我想出了这个

```
.data
  upper BYTE 100      ;setting upper limit 100
  lower BYTE 0        ;setting lower limit 0
  number BYTE 5       ;number of random numbers

.code
call main
exit

main proc

   cls    
   mov bx,upper            ;moving upper bound into bx
   mov dx,lower            ;moving lower bound into dx
   mov ax,2914017          ;taking a random number for this trial
   mov ecx,number          ;setting the loop counter
L1:
   sub bx,dx               ;(upper-lower)
   div bx               
   add ah,dx               ;(randomNumber mod (bx) + lower

main endp 
```

我很好奇如何在每个循环周期结束时打印出随机数。如果上面的代码有意义。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:03:59.807

您的问题的答案取决于平台，因此您需要指定这一点，我们可以以更具体的方式为您提供帮助。

但实地址模式（例如 MS-DOS）中的一种常用方法是调用中断并将数据发送到 SO（标准输出）。

示例（ %macro 关键字是 NASM 理解的预处理器指令 - 但并非所有编译器都使用它，但为了清楚起见，我将其包括在内）：

```
%macro printLn 1
        mov ah, 09h ; 9h means "write a string" on screen
        mov edx, %1
        int 21h ; call the ISR for MS-DOS Services
%endmacro        

[SECTION .text]

mystart:
        printLn string
        ret

[SECTION .data]
string  db      "This is a string of text", 13, 10, '$' 
```

另一种方法可能是直接挂钩 C-Lib 函数并以这种方式输出。

您应该参考[ASCII 表](http://www.asciitable.com/)中的字符代码。

还请记住，正如下面提到的 drhirsch，如果您打算输出整数，则需要将这些值转换为 ISR 可以处理的形式，例如十六进制等价物。然后，您将需要编写一个附加函数来“翻译”这些值。[这个问题](https://stackoverflow.com/questions/8031831/outputting-integers-in-assembly-on-linux)是我所指的一个很好的例子。

# php - 致命错误：调用成员函数结果错误

> ID：10099219
> 
> 赞同：-2
> 
> 时间：2012-04-11T02:58:11.113
> 
> 标签：php, codeigniter

这段代码有什么问题。收到此错误

```
Fatal error: Call to a member function result() on a non-object in /system/application/models/miscellaneousmodel.php on line

function getSubCategories($categoryId){
        $this->db->select("CATEGORY_ID,SUB_CATEGORY_URL AS CATEGORY_URL, CATEGORY_DESC,ACTIVE_STATUS,SORT_ORDER");  
        $whereCondition = $array = array('CATEGORY_ID' =>$categoryId);      
        $this->db->where($whereCondition); 
        $query = $this->db->get('TRN_SUB_CATEGORY');                
        return $query->result();    
    } 
```

现在，该错误已通过以下代码解决，但是

**现在不显示 SUB_CATEGORY_URL AS CATEGORY_URL 的正确别名**

```
ResultstdClass Object ( [SUB_CAT_ID] => 1 [CATEGORY_ID] => 1 [CATEGORY_DESC] => EMU Meat [ACTIVE_STATUS] => A [SUB_CATEGORY_URL] => /categories/agriculture-products/emu-meat ) 

$query = $this->db->query("SUB_CATEGORY_ID,SUB_CATEGORY_URL AS CATEGORY_URL, CATEGORY_DESC,ACTIVE_STATUS");
        $whereCondition = $array = array('CATEGORY_ID' =>$categoryId);  
        $this->db->where($whereCondition);  
        $query = $this->db->get("trn_sub_category");
        return $query->result(); 
```

这是我的桌子

```
CREATE TABLE IF NOT EXISTS `trn_sub_category` (
  `SUB_CAT_ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `CATEGORY_ID` int(10) unsigned NOT NULL,
  `CATEGORY_DESC` varchar(250) NOT NULL,
  `ACTIVE_STATUS` varchar(1) NOT NULL,
  `SUB_CATEGORY_URL` varchar(300) NOT NULL,
  PRIMARY KEY (`SUB_CAT_ID`)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:21:11.113

让我们尝试使您的功能像这样：

```
function getSubCategories($categoryId){
        $select = "CATEGORY_ID,SUB_CATEGORY_URL AS CATEGORY_URL, CATEGORY_DESC,ACTIVE_STATUS,SORT_ORDER";
        $whereCondition = $array = array('CATEGORY_ID' =>$categoryId);
        $this->db->select($select)->where($whereCondition);

        $query = $this->db->get('trn_sub_category');                
        return $query->result();    
    } 
```

通常这对我来说很好，你可以试试并告诉我它是否有效..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:30:11.290

尝试

```
return $query->result_array(); 
```

# java - Java中8x8网格上的广度优先搜索

> ID：10099221
> 
> 赞同：10
> 
> 时间：2012-04-11T02:58:32.287
> 
> 标签：java, breadth-first-search, maze

我要做的是计算使用最短路径到达目标所需的移动次数。必须使用广度优先搜索来完成。我将 8x8 网格放入一个 2d 数组中，该数组用四个字符之一填充，E 表示空（可以移动到这些位置），B 表示阻塞（不能在此处移动），R 表示机器人（起点）或 G为目标。该算法必须按向上、向左、向右、向下的顺序检查可移动空间，我相信我做得对。检查节点后，它将其内容更改为“B”。如果无法达到目标，则应返回 0。

我已经更改了我的代码以实现 Kshitij 告诉我的内容，并且效果很好。我太累了，看不到在每个新数据集后我都没有初始化队列，哈哈。谢谢您的帮助！

```
public static int bfSearch(){
    Queue <int []> queue = new LinkedList <int []> ();
    int [] start = {roboty,robotx,0};
    queue.add(start);

    while (queue.peek() != null){
        int [] array = queue.remove();

            if(array[0]-1 >= 0 && grid[array[0]-1][array[1]] != 'B'){

                if (grid[array[0]-1][array[1]] == 'G'){
                    return array[2]+1; 
                }
                else{
                    grid[array[0]-1][array[1]] = 'B';
                    int [] temp = {array[0]-1, array[1], array[2]+1};
                    queue.add(temp);
                }
            }

            if(array[1]-1 >= 0 && grid[array[0]][array[1]-1] != 'B'){

                if (grid[array[0]][array[1]-1] == 'G'){
                    return array[2]+1;
                }
                else{
                    grid[array[0]][array[1]-1] = 'B';
                    int [] temp = {array[0], array[1]-1, array[2]+1};
                    queue.add(temp);
                }
            }

            if(array[1]+1 <= 7 && grid[array[0]][array[1]+1] != 'B'){

                if (grid[array[0]][array[1]+1] == 'G'){
                    return array[2]+1;
                }
                else{
                    grid[array[0]][array[1]+1] = 'B';
                    int [] temp = {array[0], array[1]+1, array[2]+1};
                    queue.add(temp);
                }
            }

            if(array[0]+1 <= 7 && grid[array[0]+1][array[1]] != 'B'){

                if (grid[array[0]+1][array[1]] == 'G'){
                    return array[2]+1;
                }
                else{
                    grid[array[0]+1][array[1]] = 'B';
                    int [] temp = {array[0]+1, array[1], array[2]+1};
                    queue.add(temp);
                }
            }
        }           
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T03:24:52.573

您需要在队列中存储 2 件东西。让我们将队列中的每个项目称为节点。

1.  位置（您已经存储）
2.  计数（从起始位置到该位置所需的移动）

您首先将起始位置的计数分配为 0。

该算法的工作方式是：

1.  你从队列中弹出一个节点
2.  你确定你可以从你刚刚弹出的节点指定的位置去哪里。也就是说，如果您将此视为“即时制作树”，则您正在确定从队列中弹出的节点的子节点
3.  您将这些孩子添加到队列中。

在第三步中，当您将节点子节点添加到队列中时，您必须确定需要添加到该节点的计数。这个计数简直就是`count of the parent node (that you popped in step 1) + 1`

最后，您的返回值将是与携带目标位置的节点关联的计数。

例如，让我们使用 4x4 网格，其中位置 [0,0] 是起点，位置 [0,3] 是目的地。

```
S E E B
E B E E
B B B E
G E E E 
```

最初，您的队列将是：

```
[{(0, 0), 0}] 
```

其中，里面的值`()`是位置，里面的第二个值`{}`是计数。

您从队列中弹出此节点，并确定您可以到达位置 (0,1) 和 (1,0)。因此，您将项目添加`{(0, 1), 1}`到`{(1, 0), 1}`队列中。请注意，计数为 1，因为弹出节点的计数为 0，我们将其增加 1。您的队列现在看起来像：

```
[{(0, 1), 1},  {(1, 0), 1}] 
```

你弹出第一个元素，意识到它没有可行的孩子，所以你继续前进。

您弹出剩余的元素，并发现它在位置 (2, 0) 处为您提供了一个您可以到达的节点。由于您弹出的节点的计数为 1，因此您将这个与 count = 1 + 1 = 2 配对的新位置添加到队列中。

最终，您将从队列中弹出目标节点，其计数为 9。

**编辑**

如果您想获取从源到目的地的路径，当前编码不能按原样工作。您需要使用计数维护一个单独的大小为 8x8 的二维数组，而不是在节点本身中对它们进行编码。当您最终找到目的地的计数时，您使用 2D 计数数组从目的地回溯到源。本质上，如果您可以在 9 步内到达目的地，那么您可以在 8 步内到达其相邻位置之一。因此，您找到计数为 8 且与目的地相邻的位置。您反复重复此操作，直到找到源。

您描述的向节点添加额外元素的方法不起作用。我会把它留给你找出原因，因为这是家庭作业:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T12:18:53.457

这是您的代码的一个不错的**简短替代方案。**完全相同的想法，但不需要那么多“如果”条件来检查每个坐标的有效性。这一切都可以一口气完成。看一看。

我已经尽可能多地评论了解释。即使对于没有丝毫想法的人来说，它也可以阅读。当我为类似（相同？）问题实施解决方案时，我碰巧遇到了您的问题，其中一个被困在迷宫中的人必须找到出路。网格中有陷阱（B）和可移动区域（E）。目标是到达他的目的地（G）。

无论如何，这是通用代码。我接受行数，列数，然后是完整的网格。我只打印是否可以到达目的地。我把剩下的留给阅读这篇文章的人作为练习，以确保你已经理解了代码；）

请注意，我回答的**主要目的**是向您展示**BFS 函数的大小可以减小**。我发布我的整个解决方案只是为了给出在网格中应用 BFS 的总体思路，因为我在学习它时遇到了困难。希望这将帮助陷入相同情况的人。如果您想要该职位或所遵循的路径或任何其他内容，请按照此问题答案中的说明进行操作。自己做 ;）

```
import java.util.*;

/**
 * Created by Shreyans on 4/30/2015 at 10:27 PM using IntelliJ IDEA
 */

class MAZE
{
    static int r,c,s1,s2,f1,f2;//Rows, Columns, Start Coordinates, Finish Coordinates
    static int[] dx={1,-1,0,0};//right, left, NA, NA
    static int[] dy={0,0,1,-1};//NA, NA, bottom, top
    static char[][] grid;//Main grid
    public static void main(String[] args)
    {
        Scanner sc=new Scanner(System.in);//I suggest using faster IO if you have performance concerns. I did. Scanner is readable hence the choice
        r=sc.nextInt();
        c=sc.nextInt();
        grid=new char[r][c];
        for(int i=0;i<r;i++)
        {
            char[] s1=sc.next().toCharArray();//Reading a line of the Grid
            System.arraycopy(s1,0,grid[i],0,c);//Nice inbuilt function to copy contents of an array. Also doable manually
        }
        s1=sc.nextInt()-1;
        s2=sc.nextInt()-1;
        f1=sc.nextInt()-1;
        f2=sc.nextInt()-1;
        if(MAZEBFS())
        {
            System.out.println("PATH EXISTS");
        }
        else
        {
            System.out.println("PATH DOES NOT EXIST");
        }
    }
    private static boolean MAZEBFS()
    {
        if(s1==f1&&s2==f2)
        {
            return true;//He's already there
        }
        else
        {
            grid [f1][f2]='G';//finish
            Queue<int[]> q=new LinkedList<int[]>();
            int[]start={s1,s2};//Start Coordinates
            q.add(start);//Adding start to the queue since we're already visiting it
            grid[s1][s2]='B';
            while(q.peek()!=null)
            {
                int[]curr=q.poll();//poll or remove. Same thing
                for(int i=0;i<4;i++)//for each direction
                {
                    if((curr[0]+dx[i]>=0&&curr[0]+dx[i]<r)&&(curr[1]+dy[i]>=0&&curr[1]+dy[i]<c))
                    {
                        //Checked if x and y are correct. ALL IN 1 GO
                        int xc=curr[0]+dx[i];//Setting current x coordinate
                        int yc=curr[1]+dy[i];//Setting current y coordinate
                        if(grid[xc][yc]=='G')//Destination found
                        {
                            //System.out.println(xc+" "+yc);
                            return true;
                        }
                        else if(grid[xc][yc]=='E')//Movable. Can't return here again so setting it to 'B' now
                        {
                            //System.out.println(xc+" "+yc);
                            grid[xc][yc]='B';//now BLOCKED
                            int[]temp={xc,yc};
                            q.add(temp);//Adding current coordinates to the queue
                        }
                    }
                }
            }
            return false;//Will return false if no route possible
        }
    }
} 
```

实际代码：http: [//ideone.com/jiZKzn](http://ideone.com/jiZKzn)

欢迎提出任何建议。干杯：D

# javascript - 确定 HTML5 画布中字符串的宽度

> ID：10099226
> 
> 赞同：15
> 
> 时间：2012-04-11T02:59:11.810
> 
> 标签：javascript, html, text, canvas, fonts

我在图像（模因生成器）顶部的 HTML5 画布中绘制文本。我想计算字体大小，以便字符串跨越画布的整个宽度。

所以基本上，在 JavaScript 中有没有一种方法可以确定对于给定宽度的某种字体的某些字符串我应该使用什么字体大小？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-11T03:01:20.933

该[`fillText()`](https://developer.mozilla.org/en/docs/Drawing_text_using_a_canvas#fillText%28%29)方法有一个可选的第四个参数，它是呈现字符串的*最大宽度。*

MDN 的文档说...

> **最大宽度**
> 
> 选修的; 要绘制的最大宽度。如果指定，并且字符串被计算为比此宽度更宽，则调整字体以使用更水平压缩的字体（如果可用或可以通过水平缩放当前字体来合成合理可读的字体）或更小字体。

但是，在撰写本文时，跨浏览器还不能很好地支持此参数，这导致第二种解决方案使用[`measureText()`](https://developer.mozilla.org/en/Drawing_text_using_a_canvas#measureText%28%29)来确定字符串的尺寸而不渲染它。

```
var width = ctx.measureText(text).width; 
```

这是我可以做到的...

```
var canvas = document.getElementById('canvas'),
    ctx = canvas.getContext('2d');

// Font sizes must be in descending order. You may need to use `sort()`
// if you can't guarantee this, e.g. user input.
var fontSizes = [72, 36, 28, 14, 12, 10, 5, 2],
    text = 'Measure me!';

// Default styles.
ctx.textBaseline = 'top';
ctx.fillStyle = 'blue';

var textDimensions,
    i = 0;

do {
   ctx.font = fontSizes[i++] + 'px Arial';
   textDimensions = ctx.measureText(text);        
} while (textDimensions.width >= canvas.width);

ctx.fillText(text, (canvas.width - textDimensions.width) / 2, 10);​ 
```

[js小提琴](http://jsfiddle.net/52ECS/)。

我有一个按降序排列的字体大小列表，我遍历列表，确定渲染的文本是否适合画布尺寸。

如果可以，我将文本中心对齐。如果您必须在文本的左侧和右侧进行填充（看起来会更好），请`textDimensions.width`在计算文本是否适合时将填充值添加到 。

如果您有一长串要尝试的字体大小，最好使用[二分搜索算法](http://en.wikipedia.org/wiki/Binary_search_algorithm)。但是，这会增加代码的复杂性。

例如，如果您有 200 种字体大小，则通过数组元素的线性 O(n) 迭代可能会非常慢。

二进制斩波应该是 O(log n)。

这是*函数*的核心。

```
var textWidth = (function me(fontSizes, min, max) {

    var index = Math.floor((min + max) / 2);

    ctx.font = fontSizes[index] + 'px Arial';

    var textWidth = ctx.measureText(text).width;

    if (min > max) {
        return textWidth;
    }

    if (textWidth > canvas.width) {
        return me(fontSizes, min, index - 1);
    } else {
        return me(fontSizes, index + 1, max);
    }

})(fontSizes, 0, fontSizes.length - 1); 
```

[js小提琴](http://jsfiddle.net/3JmfP/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-14T15:20:12.937

1.  为文本写下你想要的所有东西。（例`ctx.font`）

2.  在编写实际文本之前使用`ctx.measureText("myText").width`获取文本的宽度，因为我们在ctx上进行了更改后调用了它，所以每次更改ctx属性（例如字体）时都会有所不同

3.  现在我们将从中间缩放它。

    ```
     ctx.translate(midPoint_X_Of_Text, midPoint_Y_Of_Text);
     ctx.scale(desiredWidth/measuredWidth, desiredWidth/measuredWidth);
     ctx.translate(-midPoint_X_Of_Text, -midPoint_Y_Of_Text); 
    ```

4.  写文字`ctx.fillText()`或`ctx.strokeText()`

5.  `ctx.save()`通过和`ctx.restore()`或手动反转所有更改`setTransform()`

```
var can = document.getElementById('myCan');
var ctx = can.getContext("2d");

var desiredWidth = can.width;
var myText = "Hello How Are You?"

function draw(){
  ctx.font = can.height/2 + "px verdana";
  ctx.fillStyle = "red";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  let measuredWidth = ctx.measureText(myText).width;
  let ratio = desiredWidth/measuredWidth;
  ctx.translate(can.width/2,can.height/2);
  ctx.scale(ratio,ratio);
  ctx.translate(-can.width/2,-can.height/2);
  ctx.fillText(myText,can.width/2,can.height/2);
  ctx.setTransform();
}

draw();

let myInput = document.getElementById('myInput');
myInput.addEventListener('input',(e)=>{
    ctx.clearRect(0,0,can.width,can.height);
        myText = myInput.value;
        draw();
})
```

```
<html>
<body>
  <center>
    <input id="myInput" value="Hello How Are You?"/><br>
    <canvas id="myCan" height="300" width=300 style="border:black solid 2px;">
    </canvas>
  </center>
</body>
</html>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T19:13:59.203

我有下一个代码，它非常适合我。也许有一点错误，但我不需要列出字体大小。我只是用字体大小获得宽度，如果它太大，我会根据画布宽度和填充（50）计算比例大小

```
ctx.font = FONT_SIZE+"pt Verdana";
var textWidth = ctx.measureText(markText).width;
if(textWidth > canvas.width - 50) {
    ctx.font = parseInt(FONT_SIZE*(canvas.width-50)/textWidth)+"pt Verdana";
    textWidth = ctx.measureText(markText).width;
}
ctx.textBaseline = "middle";
ctx.fillStyle = "rgba(255,255,255,0.5)";
ctx.strokeStyle = "rgba(0,0,0,0.5)";
var xT = image.width / 2 - textWidth / 2;
var yT = image.height / 2;
ctx.fillText(markText, xT, yT);
ctx.strokeText(markText, xT, yT); 
```

# android - Android-不显示多个视图。（仅显示第一个视图）

> ID：10099227
> 
> 赞同：0
> 
> 时间：2012-04-11T02:59:12.943
> 
> 标签：android, android-layout, android-view

我进行了很多搜索，但没有找到解决我问题的方法。当我创建多个视图并尝试将它们添加到 LinearLayout 时，仅显示第一个视图（蛋糕）。

这是我创建和添加视图的地方。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LinearLayout linearLayout = (LinearLayout) findViewById(R.id.image_View);

    PlayAreaView cake = new PlayAreaView(SecondTestActivity.this, R.drawable.cake);
    views.add(cake);
    PlayAreaView bomb = new PlayAreaView(SecondTestActivity.this, R.drawable.bomb);
    views.add(bomb);
    PlayAreaView crown = new PlayAreaView(SecondTestActivity.this, R.drawable.crown);
    views.add(crown);
    PlayAreaView scissors = new PlayAreaView(SecondTestActivity.this, R.drawable.cut);
    views.add(scissors);
    PlayAreaView trash = new PlayAreaView(SecondTestActivity.this, R.drawable.bin_closed);
    views.add(trash);
    PlayAreaView key = new PlayAreaView(SecondTestActivity.this, R.drawable.bullet_key);
    views.add(key);

    LayoutParams params 
    = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    for(View v : views){
        Log.v("created", "view created");
        v.setLayoutParams(params);
        linearLayout.addView(v);
    }
} 
```

这是我的 main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_View"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
        <LinearLayout 
            android:id="@+id/image_View"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
        </LinearLayout>
    </FrameLayout> 
```

我可以创建一个视图并且没问题，但我无法在 LinearLayout 中添加多个视图。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:18:39.427

我找到了我的问题的答案。我不完全理解 Activity 如何处理视图。为了绘制多个单独的视图，我必须遍历添加到数组中的每个视图，并在自定义视图中调用覆盖的绘制方法。在我理解这一点后，我能够创建多个视图并在每个视图上添加单独的拖动功能。这是代码。

```
 public class ThirdTestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LinearLayout layout = (LinearLayout) findViewById(R.id.main_View);
    layout.addView(new MyCircles(this));
}

private class MyCircles extends View{

    private Context myContext;
    private ArrayList<MyCircle> circles = new ArrayList<MyCircle>();
    private int size = 10;

    public MyCircles(Context context) {
        super(context);
        myContext = context;
        addCircles();
    }

    private void addCircles(){
        for (int i = 0; i < size; i++){
            circles.add(new MyCircle(myContext, R.drawable.skullcrossbones, i * 40, 50));
        }
    }

    @Override
    protected void onDraw(Canvas canvas){
        for (View v : circles){
            v.draw(canvas);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {
        int mouseX = (int)event.getX();
        int mouseY = (int)event.getY();
        MyCircle image = null;
        for(MyCircle images : circles){
            //Log.v("image checked X: " + images.imageX + ", Y: " + images.imageY, "checked");
            // Is the event inside of this view?
            if(images.getImageRect().contains((int)event.getX(), (int)event.getY()))
            {
                image = images;
            }
        }
        if (image != null){
            if(event.getAction() == MotionEvent.ACTION_DOWN)
            {
                Log.v("touched down", "touched down  at X: " + mouseX + ", Y: " + mouseY);
                image.dragDistance = new Point(mouseX, mouseY);
                bringToFront();
                isSelected();
                return true;
            }
            else if(event.getAction() == MotionEvent.ACTION_MOVE)
            {
                Log.v("move", "moving to X: " + mouseX + ", Y: " + mouseY);
                image.dragDistance.set(mouseX, mouseY);
                invalidate();
                return true;
            }
        }   
        return super.onTouchEvent(event);
    }       
}

private class MyCircle extends View{

    private int imageId;
    private Drawable image;
    private Context myContext;      
    private int size = 48;
    private int imageOffset = size/2;
    private int imageX;
    private int imageY;
    private Point dragDistance;

    public MyCircle(Context context, int id, int x, int y) {
        super(context);
        myContext = context;
        imageId = id;
        imageX = x;
        imageY = y;
        dragDistance = new Point(imageX + imageOffset, imageY + imageOffset);
    }

    public Rect getImageRect(){
        return image.getBounds();
    }

    @Override
    public void draw(Canvas canvas) {
        //Log.v("draw","drawn");
        super.onDraw(canvas);
        image = myContext.getResources().getDrawable(imageId);
        imageX = (dragDistance.x - imageOffset);
        imageY = (dragDistance.y - imageOffset);
        image.setBounds(imageX, imageY, imageX + size, imageY + size);
        image.draw(canvas);
    } 
      }
    } 
```

这是为 Android 2.1 API 7 编写的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:22:24.307

如果你看[这里](https://stackoverflow.com/questions/5104936/linearlayout-addview-doesnt-work-properly)，有另一个人基本上有同样的问题。但是，他们没有声明布局的方向，因此默认为水平。在您的布局中，您已明确声明水平。这是有意的（例如让项目并排显示）？如果没有，请将方向更改为垂直，您应该会很好。

如果您需要它们并排显示，那么我不确定如何做到这一点，但我猜您需要将每个视图声明为放置在它之前的视图旁边（例如使用某些东西就像'alignToRightOf'。同样，这只是一个暗中的刺，但它可能会让你走上正确的道路。

希望这可以帮助。

# postgresql - PostgreSQL 在 plpgsql 函数中创建临时表

> ID：10099230
> 
> 赞同：6
> 
> 时间：2012-04-11T02:59:32.540
> 
> 标签：postgresql, plpgsql, temp-tables

我正在尝试创建一个执行此操作的函数：

```
drop table t_rv_openitem;
select * into t_rv_openitem from rv_openitem;
select * from t_rv_openitem; 
```

当谈到 PostgreSQL 中的函数并得到这个错误时，我有时会感到困惑：

> 发生了错误：
> 
> 错误：“DROP”第 3 行或附近的语法错误：DROP TABLE t_rv_openitem；

我知道这似乎是一项简单的任务，但我正在努力解决这个问题。

这是完整的函数创建语句：

```
CREATE OR REPLACE FUNCTION adempiere.update_t_rv_openitem()
  RETURNS rv_openitem AS
$BODY$

Drop table t_rv_openitem;
select * into t_rv_openitem from rv_openitem;
select * From t_rv_openitem;

$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION adempiere.update_t_rv_openitem() OWNER TO adempiere; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T03:21:58.227

只需添加 BEGIN 和 END

```
CREATE OR REPLACE FUNCTION adempiere.update_t_rv_openitem()
  RETURNS rv_openitem AS
$BODY$

BEGIN -- ADD THIS

Drop table t_rv_openitem;
select * into t_rv_openitem from rv_openitem;
select * From t_rv_openitem;

END; -- AND THIS

$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION adempiere.update_t_rv_openitem() OWNER TO adempiere; 
```

如果您正在使用，则不需要 BEGIN 和 END 块`LANGUAGE sql`，但如果您正在使用，则需要它们`LANGUAGE plpgsql`

**更新**

关于`ERROR: syntax error at "t_rv_openitem" DETAIL: Expected record variable...`. 你的代码没有语法错误，你只需要改变这个：

```
select * into t_rv_openitem from rv_openitem; 
```

对此：

```
create table t_rv_openitem as
select * from rv_openitem; 
```

`SELECT * INTO tablehere FROM tableSource`只有在 PLPGSQL 之外使用它时，表创建才有效；当该代码结构在 PLPGSQL 中时，语义会有所不同，这意味着：

```
SELECT * INTO declaredVariableHere FROM tableSource; 
```

要在独立语句和 PLPGSQL 内部创建表，只需使用：

```
CREATE TABLE AS SELECT * FROM tableSourceHere; 
```

# android - 使用 drawBitmap() 时的视觉缺陷

> ID：10099232
> 
> 赞同：0
> 
> 时间：2012-04-11T02:59:50.413
> 
> 标签：android, android-canvas, drawbitmap

在模拟器和手机上看起来都是[这样。](http://s17.postimage.org/47h8d9t1p/what_Imean.png)它总是一个被破坏的随机方块。

这是 SurfaceView 类的代码，最相关的部分是 prepareBackground() ：

**代码开始：**

公共类 MenuBackgroundView 扩展 SurfaceView 实现 SurfaceHolder.Callback {

```
private Paint mPaint;
private Bitmap blocks12x12;
private boolean draw = false;
private Context ctx;
//private int begOffX;
private int offX;
private int offY;
private int mWidth = 1;
private int mHeight = 1;
private ViewThread mThread;
private int calcSizeXY;

public MenuBackgroundView(Context context, AttributeSet attrs) {
    super(context, attrs);
    getHolder().addCallback(this);
    mThread = new ViewThread(this);
    mPaint = new Paint();
    mPaint.setColor(Color.RED);
    ctx = context;
}

public void doDraw(long elapsed, Canvas canvas) {

    canvas.drawColor(Color.BLUE);

    if(draw)
    {
        canvas.drawBitmap(blocks12x12, offX, offY, mPaint);
    }
    canvas.drawText("FPS: " + Math.round(1000f / elapsed) + " Elements: ", 10, 10, mPaint);
}

public void animate(long elapsed)
{
    /*
    //elapsed = elapsed/10;
    offX = (offX+2);
    if(offX >= 0)
    {
        offX -= 2*calcSizeXY;
    }

    offY = (offY+3);
    if(offY >= 0)
    {
        offY -= 2*calcSizeXY;
    }
    //offY = (offY + (int)(elapsed/10f)) % calcSizeXY*2;//
     * 
     *///
}

public void prepareBackground()
{
    if(mWidth <= 1 || mHeight <= 1 )
        return;

    Log.d("Menu", "prepareBackground");

    if(mHeight > mWidth)
    {
        calcSizeXY = mHeight/10;
    }
    else
    {
        calcSizeXY = mWidth/10;     
    }

    offX = -2*calcSizeXY;

    Bitmap block = BitmapFactory.decodeResource(ctx.getResources(), R.drawable.block);
    block = Bitmap.createScaledBitmap(block, calcSizeXY, calcSizeXY, false);

    // Group together
    int sizeX = 12*calcSizeXY;
    int sizeY = 12*calcSizeXY;
    blocks12x12 = Bitmap.createBitmap(sizeX, sizeY, Bitmap.Config.ARGB_8888);
    Canvas blocks12x12Canvas = new Canvas(blocks12x12);

    for(int i = 0; i < 14; i+=2)
    {
        for(int j = 0; j < 14; j+=2)
        {
            blocks12x12Canvas.drawBitmap(block, (j*calcSizeXY), (i*calcSizeXY), mPaint);
        }
    }

    // "Memory leak"
    block.recycle();

    draw = true;
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    mWidth = width;
    mHeight = height;
    prepareBackground();
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    prepareBackground();
    if (!mThread.isAlive()) {
        mThread = new ViewThread(this);
        mThread.setRunning(true);
        mThread.start();
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    if (mThread.isAlive()) {
        mThread.setRunning(false);
        freeMem();
    }
}

public void freeMem() {
    // TODO Auto-generated method stub
    draw = false;
    blocks12x12.recycle(); // "Memory leak"
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:19:36.207

好的，我想通了，只需让线程休眠 1ms：

```
blocks12x12 = Bitmap.createBitmap(sizeX, sizeY, Bitmap.Config.ARGB_8888);
    Canvas blocks12x12Canvas = new Canvas(blocks12x12);

    for(int i = 0; i < 14; i+=2)
    {
        for(int j = 0; j < 14; j+=2)
        {
            try {
                Thread.sleep(1);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            blocks12x12Canvas.drawBitmap(block, (j*calcSizeXY), (i*calcSizeXY), mPaint);
        }
    } 
```

# objective-c - 如何保存这组图像？

> ID：10099233
> 
> 赞同：0
> 
> 时间：2012-04-11T02:59:51.170
> 
> 标签：objective-c, ios, image, tags

我对编程很陌生，我直接进入了一个项目（我知道这不是最聪明的事情，但我边走边学）。我正在编写的应用程序有 10 个 UIImageViews，它们显示来自用户相机胶卷的图片。我使用的代码需要每个 UIImageViews 都有标签。我目前正在使用 NSData 来保存数组图像，效果很好，但是我不能再使用这种方法了，因为 NSData 不支持使用标签。我也不能使用 NSUserDefaults，因为我不能将图像保存到 plist。这是我尝试执行此操作的方式（使用 NSData 方法，该方法有效，但我必须对其进行编辑，以便我的标签有效。）

这是我当前的代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    if (imageView.image == nil) {
        imageView.image = img;

        [self.array addObject:imageView.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;

    }

    if (imageView2.image == nil) {
        imageView2.image = img;
        NSLog(@"The image is a %@", imageView);
        [self.array addObject:imageView2.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }
    ...

- (void)applicationDidEnterBackground:(UIApplication*)application {
    NSLog(@"Image on didenterbackground: %@", imageView);

    [self.array addObject:imageView.image];
    [self.array addObject:imageView2.image];

    [self.user setObject:self.array forKey:@"images"];
    [user synchronize];

}

- (void)viewDidLoad
{
    self.user = [NSUserDefaults standardUserDefaults];
    NSLog(@"It is %@", self.user);
    self.array = [[self.user objectForKey:@"images"]mutableCopy];
    imageView.image = [[self.array objectAtIndex:0] copy];
    imageView2.image = [[self.array objectAtIndex:1] copy];    

    UIApplication *app = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(applicationDidEnterBackground:)
                                                 name:UIApplicationDidEnterBackgroundNotification
                                               object:app];

    [super viewDidLoad];

} 
```

任何有关如何编辑此代码的帮助或建议，以便我可以在使用标签的同时保存图像，非常感谢，谢谢！

**编辑：这是我更新的代码：**

```
 -(IBAction)saveButtonPressed:(id)sender {
    NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES) objectAtIndex:0];

    for (UIImageView *imageView in self.array) {

        NSInteger tag = self.imageView.tag;
        UIImage *image = self.imageView.image;
        NSString *imageName = [NSString stringWithFormat:@"Image%i.png",tag];

        NSString *imagePath = [docsDir stringByAppendingPathComponent:imageName];
        [UIImagePNGRepresentation(image) writeToFile:imagePath atomically:YES];
    }
NSLog(@"Saved Button Pressed");
}

- (void)applicationDidEnterBackground:(UIApplication*)application {

}

-(void)viewDidLoad {

    NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES) objectAtIndex:0];

    NSArray *docFiles = [[NSFileManager defaultManager]contentsOfDirectoryAtPath:docsDir error:NULL];

    for (NSString *fileName in docFiles) {

        if ([fileName hasSuffix:@".png"]) {
            NSString *fullPath = [docsDir stringByAppendingPathComponent:fileName];
            UIImage *loadedImage = [UIImage imageWithContentsOfFile:fullPath];

            if (!imageView.image) {
                imageView.image = loadedImage;
            } else {
                imageView2.image = loadedImage;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:25:20.467

您需要使用“快速枚举”来解析数组的对象，并将每个对象按顺序写入磁盘。首先，您需要将 UIImageView 对象而不是 UIImageView 的 UIImage 属性添加到数组中，以便您可以恢复标签。所以不要写

```
[self.array addObject:imageView.image]; 
```

这将是

```
[self.array addObject:imageView]; 
```

尝试遵循我的代码。我在每一行都插入了注释以提供帮助。

```
-(void)applicationDidEnterBackground:(UIApplication *)application {
    //Obtain the documents directory
    NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainmask,YES) objectAtIndex:0];
    //begin fast enumeration
    //this is special to ObjC: it will iterate over any array one object at a time
    //it's easier than using for (i=0;i<array.count;i++)
    for (UIImageView *imageView in self.array) {
        //get the imageView's tag to append to the filename
        NSInteger tag = imageView.tag;
        //get the image from the imageView;
        UIImage *image = imageView.image;
        //create a filename, in this case "ImageTAGNUM.png"
        NSString *imageName = [NSString stringWithFormat:@"Image%i.png",tag];
        //concatenate the docsDirectory and the filename
        NSString *imagePath = [docsDir stringByAppendingPathComponent:imageName];
        [UIImagePNGRepresentation(image) writeToFile:imagePath atomically:YES];
    }
} 
```

要从磁盘加载图像，您必须查看 viewDidLoad 方法

```
-(void)viewDidLoad {
    //get the contents of the docs directory
    NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainmask,YES) objectAtIndex:0];
    //Get the list of files from the file manager
    NSArray *docFiles = [[NSFileManager defaultManager]contentsOfDirectoryAtPath:docsDir error:NULL]);
    //use fast enumeration to iterate the list of files searching for .png extensions and load those
    for (NSString *fileName in docFiles) {
        //check to see if the file is a .png file
        if ([fileName hasSuffix:@".png"]) {
            NSString *fullPath = [docsDir stringByAppendingPathComponent:fileName];
            UIImage *loadedImage = [UIImage imageWithContentsOfFile:fullPath];
            //you'll have to sort out how to put these images in their proper place
            if (!imageView1.image) {
                imageView1.image = loadedImage;
            } else {
                imageView2.image = loadedImage;
            }
        }
    }
} 
```

希望这可以帮助

您需要注意的一件事是，当应用程序进入后台时，它有大约 5 秒的时间来清理其行为，然后才暂停。UIPNGRepresentation() 函数需要大量时间并且不是即时的。你应该意识到这一点。在其他地方编写这些代码并在应用程序后台执行之前可能会更好。FWIW

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T03:31:20.263

首先，您的 for 循环中仍然存在问题。

```
for (UIImageView *imageView in self.array) {
    NSInteger tag = self.imageView.tag;
    UIImage *image = self.imageView.image;
    // ...
} 
```

在进行任何其他更改之前，您必须了解原因。 `imageView`是您的*for 循环控制变量*，它在循环的每次迭代中都会发生变化。 `self.imageView`是另一回事。它是*附加到您的 viewController 的 10 个 imageView 中的第一个*。每次循环循环时，它都会查看第一个 imageView，并且只查看第一个。

至于为什么保存不起作用，可能是因为其他地方的数组不起作用。添加一些日志记录以确保数组中有某些内容，并且它具有您期望的尽可能多的元素。

```
-(IBAction)saveButtonPressed:(id)sender {
    NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES) objectAtIndex:0];

    // Log to make sure the views expected have previously been stored.
    // If the array is empty, or shorter than expected, the problem is elsewhere.
    NSLog(@"Image view array before saving = %@", self.array);

    for (UIImageView *imageViewToSave in self.array) {

        NSInteger tag = imageViewToSave.tag;
        UIImage *image = imageViewToSave.image;
        NSString *imageName = [NSString stringWithFormat:@"Image%i.png",tag];

        NSString *imagePath = [docsDir stringByAppendingPathComponent:imageName];

        // Log the image and path being saved.  If either of these are nil, nothing will be written.
        NSLog(@"Saving %@ to %@", image, imagePath);

        [UIImagePNGRepresentation(image) writeToFile:imagePath atomically:NO];
    }
    NSLog(@"Save Button Pressed");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T03:44:18.423

您可以使用 [NSbundle Mainbundel] 来存储该图像。

**获取路径**

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

 NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

# python - 使用 Python2.6 解析 Bash 输出

> ID：10099235
> 
> 赞同：0
> 
> 时间：2012-04-11T03:00:06.707
> 
> 标签：python, bash, parsing, variables

我是 python 新手，在这里遇到了一些概念 - 任何帮助表示赞赏。

我有一个自定义系统工具，可以查询数据库，并返回几行作为要读取的结果——每行一个。以下 python 脚本接受来自 raw_input 的站点 FQDN 并在该 fqdn 上运行 $path。

```
#!/usr/bin/python

import subprocess
import getpass

#get the site name.
site = raw_input("What is the name of the site?: ").strip()

#run path.
cmd = 'path '+ site;
p = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE);
path_output = p.stdout.read().strip().split('\n')

print path_output 
```

它返回这样的结果：

```
['    fqdn          = www.hcasc.info', '    account_id    = 525925', '    parent_id     = 525925', '    nfs           = /mnt/stor7-wc2-dfw1/525925/www.hcasc.info', '  server_type   = PHP5', '    ssl           = False', '    host_ip       = 98.129.229.186', '    cgi_hosting   = False', '    test_link_ip  = 98.129.229.186', '    ipv6_ip       = 2001:4800:7b02:100::1600:0'] 
```

如何从“nfs = etc”中取出多余的空格，或者只取第三列（又名 awk '{print $3}'）和/或将 bash 中的每一个结果分配给单独的变量以进行进一步操作？

只是在安装此学习曲线时遇到了一些麻烦，我们真诚地感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:10:38.880

第三列是`line.split()[2]`; 如果你想扔掉前两个词并取其余词，那就是`line.split(None, 2)[-1]`. （`split`没有参数，或 a`None`作为第一个参数，在任何空白处拆分。）

```
>>> '    fqdn          = www.hcasc.info'.split()
['fqdn', '=', 'www.hcasc.info']

>>> for var, equals, rest in (l.split(None, 2) for l in path_output):
    assert equals == '='
    print var, 'is', rest

fqdn is www.hcasc.info
account_id is 525925
parent_id is 525925
nfs is /mnt/stor7-wc2-dfw1/525925/www.hcasc.info
server_type is PHP5
ssl is False
host_ip is 98.129.229.186
cgi_hosting is False
test_link_ip is 98.129.229.186
ipv6_ip is 2001:4800:7b02:100::1600:0 
```

* * *

解释： `(l.split(None, 2) for l in path_output)`是一个*生成器表达式*，它为（调用它）`l.split(None, 2)`的每个值运行。这就像一个列表推导，它是相同的东西，但它周围而不是，但它只在循环通过它时运行调用然后忘记以前的值，而列表推导将构造一个包含所有结果的大列表首先在每一步，然后正常循环遍历该列表。这种方式就像做`path_output``l``[]``()``l.split``for``l.split`

```
for line in path_output:
    var, equals, rest = line.split(None, 2)
    ... 
```

但短一点。:)

* * *

如果您想将其放入字典中，如[DSM 建议](https://stackoverflow.com/a/10099330/344821)的那样，您可以以这种方式（仅用于上下文）作为

```
d = dict((var, rest) for var, equals, rest in (l.split(None, 2) for l in path_output)) 
```

或者，在 Python 2.7 / 3 中，更好

```
d = { var: rest for var, equals, rest in (l.split(None, 2) for l in path_output) } 
```

当然，您可以在两行上使其更具可读性：

```
output_vals = (l.split(None, 2) for l in path_output)
d = dict((var, rest) for var, equals, rest in output_vals) 
```

您是否需要字典或只是循环取决于您将对其进行的处理，但字典可能是大多数事情的更好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T20:50:26.600

首先第二个问题：您可以将结果收集在一个列表中，但使用字典更方便。

第一个问题：由于您的结果都在 form`key = value`中，您可以像这样提取它们：

```
results = dict()
for line in p.stdout:
    key, value = line.split('=')
    results[key.strip()] = value.strip() 
```

当像这样调用`p.stdout`（或任何文本文件对象）时，它一次隐式读取一行。下一条语句在等号上拆分行，并将各部分分配给两个变量。最后，我们去除周围的空白`key`并将`value`它们存储在字典中。

PS。`line.split()`您还可以使用;在空白处拆分行 但是如果值或（不太可能）键包含嵌入空间，那么您就会遇到问题。

# javascript - 匹配 url 的 javascript 问题

> ID：10099237
> 
> 赞同：0
> 
> 时间：2012-04-11T03:00:53.910
> 
> 标签：javascript, javascript-events

如果找到匹配项，我如何在 javascript 中添加一些内容来检查网站上某人的网站 url，然后重定向到网站上的某个页面？例如...

我们要检查的字符串将是 mydirectory，所以如果有人去`mysite.com/mydirectory/anyfile.php`甚至`mysite.com/mydirectory/index.php`，javascript 会将他们的页面/url 重定向到，`mysite.com/index.php`因为它在 url 中有 mydirectory，否则如果找不到匹配项，请不要重定向，我'正在使用下面的代码...

```
var search2 = 'mydirectory';
var redirect2 = 'http://mysite.com/index.php'

if (document.URL.substr(search2) !== -1)
    document.location = redirect2 
```

问题在于，即使没有找到匹配项，它总是为我重定向，有谁知道出了什么问题，有没有更快/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:08:47.447

改用[String.indexOf()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
if (window.location.pathname.indexOf('searchTerm') !== -1) {
    // a match was found, redirect to your new url
    window.location.href = newUrl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:08:07.243

`substr`在这种情况下不是您需要的，它从字符串中提取子字符串。而是使用`indexOf`：

```
if(window.location.pathname.indexOf(search2) !== -1) {
    window.location = redirect2;
} 
```

如果可能，最好在服务器端执行此重定向。它将始终有效，对搜索引擎更加友好且速度更快。如果您的用户禁用了 JavaScript，他们将不会被重定向。

# mysql - Xeround 与 ClearDB 托管 MySQL 的优缺点？

> ID：10099239
> 
> 赞同：5
> 
> 时间：2012-04-11T03:01:03.603
> 
> 标签：mysql, heroku, xeround

我们目前正在使用托管 MySQL 的 RDS，但正在考虑迁移到 Heroku 的容错 MySQL 插件之一。两个主要的似乎是 xeround 和 ClearDB，但我很难确定它们之间的差异。我们主要对容错、一致和快速的性能以及 UTF8 字符集支持感兴趣。欢迎任何经验。那里似乎没有太多讨论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T06:46:19.297

我与 Xeround 作斗争。我们有一个为非 heroku 环境构建的应用程序，我们迁移到了 Heroku。我们尝试了 Xeround，但是在针对 Xeround 运行时，由于某种原因，我们的一些查询出现了一些问题。激烈，但我们结束了运行 Slicehost mySQL 实例。我们最近重新审查并发现 ClearDB 对我们来说工作得更好，所以我们现在在那个 Db 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:33:39.383

我不得不说我完全同意 Jhon 的观点。我有同样的问题。我正在运行我的应用程序 [play + heroku + xeround ]，但是一些查询没有给我任何结果，所以我切换到 clearDB 并且一切正常。

# php - SQL将错误分配给会话或变量？

> ID：10099242
> 
> 赞同：0
> 
> 时间：2012-04-11T03:01:16.400
> 
> 标签：php, sql, session, variables

我为网站创建了登录表单和注册表单。

该表单已发布到 checklogin.php 和 checksign.php 以供验证，但是当它发现任何错误时，它会在单独的文件中显示它们。

![登录](../Images/3b8abd43cc918e9685ac2560882cab86.png)

**以下是以下验证语句的错误消息**

```
 if (!$_POST['fullname'] | !$_POST['myusername'] | !$_POST['mypassword'] | !$_POST['remypassword']) {

        die('You did not complete all of the required fields');
    } 
```

![错误](../Images/d4973b99bcf93c49ce4255615e91e23f.png)

我的问题是：我如何在同一页面中显示它们？例如; 在表单旁边的标签中。谢谢，任何提示都会有很大帮助。这是我做汽车销售的[网站](http://auto-sal.es)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:09:57.170

通过构建您的代码，以便验证顺序可以在最终处理之前出现，如果没有，则再次显示表单页面

```
if($_SERVER['REQUEST_METHOD'] === 'POST')
{
  $valid = false;
  // perform input validations here
  if(dosomething())
  {
    $valid = true;
  }

  // if valid, perform processing here, and either show success page (or redirect)
  if($valid === true)
  {
    // SQL junk here
    include('success.php');
    exit();
  }
}

// render original form after this line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:06:39.260

您的表单将数据发布到 checklogin.php，而不是将数据发布到 index.php 并在该页面上处理验证。

```
<form class="clearfix" action="checklogin.php" method="post"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T03:07:38.360

过去，我使用过一个自定义错误处理程序，它使用会话来存储错误，我建议这样做。

使用会话（在自定义错误处理程序中）存储错误的优点是它们可以很容易地被读取并显示在您拥有的任何视图页面中。例如，如果您想在类中抛出错误，则可以在将它们保存到会话后随时显示它们。因此，虽然对于这个特定问题，您可以简单地将所有代码移动到一个 php 文件中，但这可能不是最好的解决方案。

更不用说如果您的“检查登录”重定向回登录页面，显然您的所有变量值都不会保留。

# zooming - matplotlib：放大后重新缩放imshow的颜色

> ID：10099244
> 
> 赞同：1
> 
> 时间：2012-04-11T03:01:22.597
> 
> 标签：zooming, matplotlib

我正在尝试使用 imshow 绘制 2D 字段。我希望在放大后重新调整颜色，以便我可以看到更多细节。

我知道的唯一解决方案是获取 RectangleSelector 事件返回的框的坐标并重新绘制原始数据的子矩阵。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:12:50.550

您可以使用交互式绘图并使用命令而不是命令`pylab.ion`更新绘图。然后，在您的代码中，创建一个提示您进行键盘输入的 while 循环。在每次迭代中，如果输入程序存在。否则，也许您输入的内容类似于您想要在坐标轴上放大的边界框，然后您的程序制作一个新图形，将相关数据重新计算到涉及 input 的新网格上，然后重新绘制。如果您保存所有输入坐标，您甚至可以为“撤消”使用特殊的键盘输入（例如，缩小到我刚才所在的位置）。这应该不是很难实现，唯一的问题是计算将图像重新采样到放大的网格上有多严重。`draw``show``-1``x1, y1, x2, y2``x1, y1, x2, y2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:04:47.730

经过大量搜索，我找不到任何替代方案。但是，使用 RectangleSelector 实现这一点并重新绘制原始数据的子矩阵结果证明效果很好。

# streaming - 如何编写一个 Lighttpd 插件来进行直播

> ID：10099245
> 
> 赞同：1
> 
> 时间：2012-04-11T03:01:39.090
> 
> 标签：streaming, lighttpd, live-streaming

我想写一个 Lighttpd 插件来做流媒体..

到目前为止，我在函数'mod_strm_handle_physical'中复制了client_socket（con->fd）。这样我就可以在子进程中通过它发送流数据。至于主进程，我为连接结构设置了一些状态，告诉服务器不要关闭这个连接。

以下是我在“mod_strm_handle_physical”函数中的操作：

```
URIHANDLER_FUNC(mod_strm_handle_physical)
{
    if(con->uri.path->ptr)
    {
        if(!strcmp("/abcd", con->uri.path->ptr))
        {
            // change Content-Type
            response_header_overwrite(srv, con
                                     , CONST_STR_LEN("Content-Type")
                                     , CONST_STR_LEN("application/octet-stream"));

            con->http_status = 200;
            con->file_finished = 0; // not to close the connection
            con->response.keep_alive = 1;

            int dup_fd = dup(con->fd); // duplicate the client-socket

            int child = fork();
            if(child>0)
                return HANDLER_FINISHED;
            else if(child==0)
            {
                send(dup_fd, STREAMING_DATA, LENGTH, 0);
                close(dup_fd);

                exit(0);
            }
            else
                perror("fork()");
        }
    }

    return HANDLER_GO_ON;
} 
```

问题是..这样，服务器可以进行流式传输并且看起来还可以。但是，服务器不能同时进行多个流式传输。我做错了什么吗？我虽然流式传输作业是进程外的

# css - 媒体查询在样式表中的位置：在底部还是混合在一起？

> ID：10099247
> 
> 赞同：2
> 
> 时间：2012-04-11T03:02:21.393
> 
> 标签：css, stylesheet, media-queries

我正在开发我的第一个响应式网站，并阅读了大量文章，但找不到我的问题的明确答案。

此时我已经创建并编码了 3 个设计。整个网站有一个流动的主栏和一个固定的侧边栏。页眉和页脚是流畅的。在截止点之后，它将从 2 列变为 1 列，并进行一些额外的更改以转到智能手机尺寸。我想要一个样式表。阅读了几个优点和缺点后，由于这是我的第一个响应式网站，我将桌面设计设为“默认”，并希望使用媒体查询来更改较小尺寸的样式。

我有几种尺寸不会随尺寸变化的款式，还有一些会改变的款式。

我是否继续为桌面制作整个样式表，然后在底部添加媒体查询？（在打印样式之前还是之后？）或者我是否在整个样式表中混合媒体查询，无论“默认”样式在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:42:56.750

我也为这个问题争论了一段时间。我的一些网站在底部有一个很大的手持或仅打印部分，有些网站在它们影响的选择器之后有相关的媒体查询。据我所见，这两种方式都不会对渲染性能产生任何影响（如果有的话，我还没有察觉到）。

我的回答是只**使用你觉得更容易阅读的那个**。如果这是一个更大项目的一部分，请咨询任何也从事 CSS 工作的团队成员，并询问他们更喜欢哪一个。

# iphone - iPhone - 这会泄漏吗？

> ID：10099249
> 
> 赞同：0
> 
> 时间：2012-04-11T03:02:44.643
> 
> 标签：iphone, ios, ipad

我有一个这样的二传手：

```
- (UIImagePickerController *) foto {

    if (_foto == nil) { 
        _foto = [[UIImagePickerController alloc] init];
        _foto.delegate = self;
    }
    return _foto;
} 
```

它被宣布为

```
@property (nonatomic, retain) UIImagePickerController *foto; 
```

和

```
@synthesize foto = _foto; 
```

在我的交易中，我有

```
[_foto release]; 
```

在我的代码中的某个时刻，我想这样做

```
self.foto = nil; 
```

但是我灵魂中的某些东西说，以前分配给 self.foto 的对象会泄漏，因为它是在 setter 上分配的……我该如何使它正确？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:06:38.747

编辑：不，那应该没问题。只要您在发布之前不为 _foto 分配其他内容，它就应该可以工作。

是的。您创建一个对象，然后松开指向它的指针。如果你在 init 行抛出一个自动释放，那将修复它。您也可以使用 ARC。

init 行实际上并没有做任何事情......您将指针分配给您创建的对象，然后将其分配给其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:15:20.960

我不认为那里有泄漏。当你像这样分配给 self.foto 时`self.foto = nil;`，它会自动释放前一个。如果通过这种方式分配：`_foto = nil;`，您需要在分配之前手动释放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T03:17:32.017

是的，它有效，并且不会泄漏。当您设置 的值时`_foto`，其保留计数为 1（因为您调用了`alloc`）。只要你在 中释放它（你说过你做了）`dealloc`，你应该没问题，因为保留计数会回到 0。除非你的 setter 也是你写的，并且写得不正确。如果不是，它需要显式释放旧值`nil`。像这样的东西：

```
- (void)setFoto:(UIImagePickerController*)foto {
     if (_foto) {
          [_foto release];
          _foto = nil;
     }
     if (foto)
          _foto = [foto retain];
} 
```

# jquery - 显示与文本内联的 JQuery ui-icon

> ID：10099253
> 
> 赞同：5
> 
> 时间：2012-04-11T03:03:11.500
> 
> 标签：jquery, html, jquery-ui

我的 html 中有以下内容：

```
<div id="flash_message" class="ui-state-highlight ui-helper-hidden">
    <p>
        <span id="flash_message_content">Hey, Sailor!</span>
        <span id="flash_message_button" class="ui-icon ui-icon-circle-minus"></span>
    </p>
</div> 
```

这些类来自 JQuery UI。我的目标是显示消息（在本例中为“嘿，水手！”），然后在其旁边立即显示减号图标。然后我将处理程序绑定到图标；该处理程序允许用户隐藏消息。

这一切都很好，除了跨度`flash_message_button`显示为一个块。图标出现在消息的下一行，而不是旁边。如果我包含一个内联样式命令“display: inline”，则图标完全消失（它仍在 DOM 中，但呈现 0px 乘 0px）。

我应该进行哪些更改以强制图标显示在消息旁边？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T03:38:48.987

您是否尝试将其设置为“显示：内联块；” ?

这将允许您为 span flash_message_button 定义宽度和高度，还可以内联显示它。

我不确定这是否正是您正在寻找的东西，但考虑到您所描述的问题，我肯定会尝试这样做。

注意：显示：内联块；除非您有正确的 DOCTYPE 声明，否则在许多版本的 IE 中都无法使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-09T18:46:14.707

我有同样的问题，我只是在 - [jQuery UI - 图标对齐的帮助下解决了这个问题](https://stackoverflow.com/questions/6408989/jquery-ui-icon-alignment)

他们的关键是添加**float: left;** （或右）到您赋予类 ui-icon 的元素。

这是一个带有打印按钮的 JSFiddle，以及带有浮动的示例代码 - [http://jsfiddle.net/fgpjx5rc/](http://jsfiddle.net/fgpjx5rc/)

例子：

```
 <button>
    <span class="ui-icon ui-icon-print" style="float: left;"></span>
    Print
  </button> 
```

我最初的问题——我试图将 jQuery UI 图标放在一个文本单词旁边的按钮中。如果我将文本放在图标之前，则图标位于文本下方。如果我将图标放在文本之前，则文本位于图标下方。这里没有其他解决方案有效。我用 Firefox 检查并禁用了所有的 CSS 并没有帮助。我还尝试在那里添加东西（上面建议的所有内容）。即使我在此处使用 jQuery UI 网站[http://jqueryui.com/button/#icons](http://jqueryui.com/button/#icons)的按钮测试了相同的代码，它们也不起作用。我在 Google 上搜索了 jquery ui 图标旁边的文本变体，这是第一个结果。我还发现了这个[https://forum.jquery.com/topic/how-to-make-jquery-ui-icons-align-with-text](https://forum.jquery.com/topic/how-to-make-jquery-ui-icons-align-with-text)，它提到了这个[如何使用没有按钮的 jQuery UI 图标？](https://stackoverflow.com/questions/8027996/how-to-use-jquery-ui-icons-without-buttons)原来的提问者在那里放弃了，只是直接引用了图像文件。

然后我坚持下去，谢天谢地找到了第一个条目。

# avaudioplayer - 在一台设备上录制音频并使用 UDP 在另一台设备上播放

> ID：10099254
> 
> 赞同：3
> 
> 时间：2012-04-11T03:03:12.857
> 
> 标签：avaudioplayer, cmsamplebufferref

我想从一台 iOS 设备录制音频并同时发送和播放到另一台设备。

我尝试在两端正确使用 AVCaptureAudioDataOutput 和发送/接收 CMSampleBufferRef 但是当我在接收器设备上播放它时，我得到：错误域 = NSOSStatusError 域代码 = 1954115647。

我正在使用以下代码将收到的 CMSampleBufferRef 转换为 Sender Device 上的 NSData ：

```
if (captureOutput == audioOutput) {
        AudioBufferList audioBufferList;
        NSMutableData *data=[[NSMutableData alloc] init];
        CMBlockBufferRef blockBuffer;
        CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(sampleBuffer, NULL, &audioBufferList, 
                                                            sizeof(audioBufferList), NULL, NULL, 0, &blockBuffer);

        for( int y=0; y<audioBufferList.mNumberBuffers; y++ )
        {
             AudioBuffer audioBuffer = audioBufferList.mBuffers[y];
             Float32 *frame = (Float32*)audioBuffer.mData;
            [data appendBytes:frame length:audioBuffer.mDataByteSize];
        }
        [self performSelectorOnMainThread:@selector(sendAudio:) withObject:data waitUntilDone:NO];
        CFRelease(blockBuffer);
        blockBuffer=NULL;
} 
```

和以下代码在 Receiver Device 上播放音频：

```
audioPlayer = [[AVAudioPlayer alloc] initWithData:audioData error:&error];
audioPlayer.numberOfLoops = -1;
audioPlayer.volume = 1.0;
if (audioPlayer == nil)
    NSLog(@"%@", [error description]);
else
    [audioPlayer play]; 
```

它似乎无法将接收到的字节识别为正确的音频格式。

请帮我接收这个问题。

谢谢。

# git - 如何在 Git 中恢复丢失的提交？

> ID：10099258
> 
> 赞同：401
> 
> 时间：2012-04-11T03:04:02.310
> 
> 标签：git

首先，得到“你的分支比 origin/master 提前 3 次提交”然后我的应用程序已经恢复到更早的时间，并进行了更早的更改。

我怎样才能找回过去 11 个小时所做的事情？

* * *

## 回答 #1

> 赞同：909
> 
> 时间：2012-04-11T03:08:59.943

[`git reflog`](https://git-scm.com/docs/git-reflog)是你的朋友。在该列表中找到您想要的提交，您可以重置它（例如：）`git reset --hard e870e41`。

（如果您没有提交更改......您可能会遇到麻烦 - 尽早提交，并经常提交！）

* * *

## 回答 #2

> 赞同：173
> 
> 时间：2016-01-13T21:20:00.967

在回答之前，让我们添加一些背景，解释这`HEAD`是什么。

# ***`First of all what is HEAD?`***

`HEAD`只是对当前分支上的当前提交（最新）的引用。在任何给定时间
只能有一个（不包括）。`HEAD``git worktree`

的内容`HEAD`存储在里面`.git/HEAD`，它包含当前提交的 40 字节 SHA-1。

* * *

# ***`detached HEAD`***

如果您不在最新的提交上 - 意思`HEAD`是指向历史上的先前提交，则称为***`detached HEAD`***.

[![在此处输入图像描述](../Images/710da6a5310c7e3bb8c402b699e28541.png)](https://i.stack.imgur.com/OlavO.png)

在命令行上，它看起来像这样 - SHA-1 而不是分支名称，因为`HEAD`它没有指向当前分支的尖端：

[![在此处输入图像描述](../Images/7fdd6e3aa84c08ec60de8aadf477891c.png)](https://i.stack.imgur.com/qplvo.png)

[![在此处输入图像描述](../Images/68adb63705f150d3d5d7df5de315f38f.png)](https://i.stack.imgur.com/U0l3s.png)

* * *

### 关于如何从分离的 HEAD 中恢复的一些选项：

* * *

### [`git checkout`](https://git-scm.com/docs/git-checkout)

```
git checkout <commit_id>
git checkout -b <new branch> <commit_id>
git checkout HEAD~X // x is the number of commits t go back 
```

这将签出指向所需提交的新分支。
此命令将检出给定的提交。
此时，您可以创建一个分支并从这一点开始工作。

```
# Checkout a given commit.
# Doing so will result in a `detached HEAD` which mean that the `HEAD`
# is not pointing to the latest so you will need to checkout branch
# in order to be able to update the code.
git checkout <commit-id>

# Create a new branch forked to the given commit
git checkout -b <branch name> 
```

* * *

### [`git reflog`](https://git-scm.com/docs/git-reflog)

您也可以随时使用`reflog`。
`git reflog` 将显示更新的任何更改，`HEAD`并检查所需的 reflog 条目将设置`HEAD`回此提交。

**每次修改 HEAD 都会在`reflog`**

```
git reflog
git checkout HEAD@{...} 
```

这将使您回到所需的提交

[![在此处输入图像描述](../Images/d9d35fc9cf87a8800b44b46201bbf486.png)](https://i.stack.imgur.com/atW9w.png)

* * *

### ***[`git reset --hard <commit_id>`](https://git-scm.com/docs/git-reset)***

将您的 HEAD “移动”回所需的提交。

```
# This will destroy any local modifications.
# Don't do it if you have uncommitted work you want to keep.
git reset --hard 0d1d7fc32

# Alternatively, if there's work to keep:
git stash
git reset --hard 0d1d7fc32
git stash pop
# This saves the modifications, then reapplies that patch after resetting.
# You could get merge conflicts if you've modified things which were
# changed since the commit you reset to. 
```

*   注意：（[从 Git 2.7 开始](https://github.com/git/git/blob/master/Documentation/RelNotes/2.7.0.txt)）你也可以使用`git rebase --no-autostash`。

* * *

### ***[`git revert <sha-1>`](https://git-scm.com/docs/git-revert)***

“撤消”给定的提交或提交范围。
重置命令将“撤消”在给定提交中所做的任何更改。
将提交带有撤消补丁的新提交，而原始提交也将保留在历史记录中。

```
# Add a new commit with the undo of the original one.
# The <sha-1> can be any commit(s) or commit range
git revert <sha-1> 
```

* * *

这个模式说明了哪个命令做什么。
如您所见，`reset && checkout`修改`HEAD`.

[![在此处输入图像描述](../Images/51c3905f4271fd296733a009b3c73cc9.png)](https://i.stack.imgur.com/NuThL.png)

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2016-01-12T19:38:36.210

获取已删除提交的另一种方法是使用`git fsck`命令。

```
git fsck --lost-found 
```

这将在最后一行输出类似的内容：

```
dangling commit xyz 
```

我们可以检查它是否与`reflog`其他答案中建议的提交相同。现在我们可以做一个`git merge`

```
git merge xyz 
```

**注意：**如果我们已经运行了将删除对悬空提交的引用的命令，
我们将无法取回提交。`fsck``git gc`

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-08-04T14:57:55.040

试试这个，这将显示一段时间内记录在 git 中的所有提交

```
git reflog 
```

找到你想要的提交

```
git log HEAD@{3} 
```

或者

```
git log -p HEAD@{3} 
```

然后检查它是否正确：

```
git checkout HEAD@{3} 
```

这将为该提交创建一个分离的头。如果需要，添加并提交任何更改

```
git status 
git add
git commit -m "temp_work" 
```

现在，如果想将提交恢复到分支，可以说 master，您需要将此分支开关命名为 master，然后合并到 master。

```
git branch temp
git checkout master
git merge temp 
```

这里还有一个 Git 教程网站上专门针对 reflog 的链接： [Atlassian Git Tutorial](https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2021-02-13T16:03:05.597

这只是今天发生在我身上，所以我正在写一些对我来说是救命稻草的东西。我的回答与@Amber 的回答非常相似。

首先，我做了 a`git reflog`并搜索了该特定提交的哈希，然后复制了该哈希并`git cherry-pick <hash>`从该分支执行了 a。这将丢失提交的所有更改带到了我当前的分支，并恢复了我对 GIT 的信心。

祝你今天过得愉快！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-10-01T14:44:17.017

如果您找不到您的提交`git reflog`并且碰巧您正在使用**IntelliJ IDE**，您可以`right click on your project root folder -> Local History -> Show History`从那里恢复您的更改。

我搞砸了`git rebase`，`git push -f`这真的救了我，因为提交是从本地和远程存储库中删除的。

希望能拯救某人的一天

干杯

* * *

## 回答 #7

> 赞同：-17
> 
> 时间：2020-09-01T19:35:03.187

可悲的是 git 太不可靠了 :( 我刚刚失去了 2 天的工作 :(

最好在提交之前手动备份任何内容。我只是做了“git commit”，而 git 只是破坏了我所有的更改，什么也没说。

我吸取了教训 - 下次先备份，然后再提交。永远不要相信 git 做任何事情。

# compiler-construction - 用于静态分支预测的程序注释，如 __builtin_expect

> ID：10099260
> 
> 赞同：0
> 
> 时间：2012-04-11T03:04:27.720
> 
> 标签：compiler-construction, annotations, branch, prediction

我正在寻找像 GCC 中的 __builtin_expect 这样的编译器构造，它使程序员能够向编译器提供有关分支的信息。其他语言或编译器中是否有任何替代方案（或类似结构）？

# php - 可能组合的 PHP 代码

> ID：10099265
> 
> 赞同：1
> 
> 时间：2012-04-11T03:05:00.553
> 
> 标签：php, arrays, combinations, combinatorics

我有一个代码给了我可能的组合，但它缺少每个数组的组合。请让我知道如何生成每个数组的组合。就像在运行规定的代码之后我会得到可能的组合......但我也需要像（粗糙，中等，小）这样的组合......

```
$array1 = array('rough', 'smooth', 'coarse');
$array2 = array('shiny', 'matte', 'rough');
$array3 = array('very large', 'large', 'medium', 'small');

foreach($array1 as $i)
    foreach($array2 as $j)
        foreach($array3 as $k)
            $output[] = "$i, $j, $k";

var_dump($output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:18:39.163

我想这就是你想要的

```
$array1 = array('rough', 'smooth', 'coarse');
$array2 = array('shiny', 'matte', 'rough');
$array3 = array('very large', 'large', 'medium', 'small');

generateCcombination(array($array1,$array2,$array3));
function generateCcombination($array) {
    global $codes, $pos;
    if(count($array)) {
        for($i=0; $i<count($array[0]); $i++) {
            $tmp = $array;
            $codes[$pos] = $array[0][$i];
            $tarr = array_shift($tmp);
            $pos++;
            generateCcombination($tmp);
        }
    } else {
        echo join(", ", $codes)."<br/>";
    }
    $pos--;
} 
```

输出

```
rough, shiny, very large
rough, shiny, large
rough, shiny, medium
rough, shiny, small
rough, matte, very large
rough, matte, large
rough, matte, medium
rough, matte, small
rough, rough, very large
rough, rough, large
rough, rough, medium
rough, rough, small
rough, shiny, very large, smooth
rough, shiny, large, smooth
rough, shiny, medium, smooth
rough, shiny, small, smooth
rough, matte, very large, smooth
rough, matte, large, smooth
rough, matte, medium, smooth
rough, matte, small, smooth
rough, rough, very large, smooth
rough, rough, large, smooth
rough, rough, medium, smooth
rough, rough, small, smooth
rough, shiny, very large, coarse
rough, shiny, large, coarse
rough, shiny, medium, coarse
rough, shiny, small, coarse
rough, matte, very large, coarse
rough, matte, large, coarse
rough, matte, medium, coarse
rough, matte, small, coarse
rough, rough, very large, coarse
rough, rough, large, coarse
rough, rough, medium, coarse
rough, rough, small, coarse 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:25:06.350

问题不是很清楚，但在我看来，您希望每个数组在组合中多次使用。试试这个：

```
$array1 = array('rough', 'smooth', 'coarse');
$array2 = array('shiny', 'matte', 'rough');
$array3 = array('very large', 'large', 'medium', 'small');

$combinedArray=array_merge($array1, $array2, $array3);

foreach($combinedArray as $i)
    foreach($combinedArray as $j)
        foreach($combinedArray as $k)
            $output[] = "$i, $j, $k";

var_dump($output); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T03:31:50.967

```
$array1 = array('rough', 'smooth', 'coarse');
$array2 = array('shiny', 'matte', 'rough');
$array3 = array('very large', 'large', 'medium', 'small');

$array=array_merge($array1,$array2,$array3);

$combinations=array();
for($x=0;$x<(count($array)-2);$x++) {
    $a=$array[$x];
    for ($y=$x+1;$y<count($array);$y++) {
        $b=$array[$y];
        for ($z=$y+1;$z<count($array);$z++) {
            $c=$array[$z];
            $combinations[]="$a, $b, $c";
        }
    }
} 
```

这会输出所有值的所有可能组合，而不会重复任何内容。如下所示：

```
Array
(
    [0] => rough, smooth, coarse
    [1] => rough, smooth, shiny
    [2] => rough, smooth, matte
    [3] => rough, smooth, rough
    [4] => rough, smooth, very large
    [5] => rough, smooth, large
    [6] => rough, smooth, medium
    [7] => rough, smooth, small
    [8] => rough, coarse, shiny
    [9] => rough, coarse, matte
    [10] => rough, coarse, rough
    [11] => rough, coarse, very large
    [12] => rough, coarse, large
    [13] => rough, coarse, medium
    [14] => rough, coarse, small
    [15] => rough, shiny, matte
    [16] => rough, shiny, rough
    [17] => rough, shiny, very large
    [18] => rough, shiny, large
    [19] => rough, shiny, medium
    [20] => rough, shiny, small
    [21] => rough, matte, rough
    [22] => rough, matte, very large
    [23] => rough, matte, large
    [24] => rough, matte, medium
    [25] => rough, matte, small
    [26] => rough, rough, very large
    [27] => rough, rough, large
    [28] => rough, rough, medium
    [29] => rough, rough, small
    [30] => rough, very large, large
    [31] => rough, very large, medium
    [32] => rough, very large, small
    [33] => rough, large, medium
    [34] => rough, large, small
    [35] => rough, medium, small
    [36] => smooth, coarse, shiny
    [37] => smooth, coarse, matte
    [38] => smooth, coarse, rough
    [39] => smooth, coarse, very large
    [40] => smooth, coarse, large
    [41] => smooth, coarse, medium
    [42] => smooth, coarse, small
    [43] => smooth, shiny, matte
    [44] => smooth, shiny, rough
    [45] => smooth, shiny, very large
    [46] => smooth, shiny, large
    [47] => smooth, shiny, medium
    [48] => smooth, shiny, small
    [49] => smooth, matte, rough
    [50] => smooth, matte, very large
    [51] => smooth, matte, large
    [52] => smooth, matte, medium
    [53] => smooth, matte, small
    [54] => smooth, rough, very large
    [55] => smooth, rough, large
    [56] => smooth, rough, medium
    [57] => smooth, rough, small
    [58] => smooth, very large, large
    [59] => smooth, very large, medium
    [60] => smooth, very large, small
    [61] => smooth, large, medium
    [62] => smooth, large, small
    [63] => smooth, medium, small
    [64] => coarse, shiny, matte
    [65] => coarse, shiny, rough
    [66] => coarse, shiny, very large
    [67] => coarse, shiny, large
    [68] => coarse, shiny, medium
    [69] => coarse, shiny, small
    [70] => coarse, matte, rough
    [71] => coarse, matte, very large
    [72] => coarse, matte, large
    [73] => coarse, matte, medium
    [74] => coarse, matte, small
    [75] => coarse, rough, very large
    [76] => coarse, rough, large
    [77] => coarse, rough, medium
    [78] => coarse, rough, small
    [79] => coarse, very large, large
    [80] => coarse, very large, medium
    [81] => coarse, very large, small
    [82] => coarse, large, medium
    [83] => coarse, large, small
    [84] => coarse, medium, small
    [85] => shiny, matte, rough
    [86] => shiny, matte, very large
    [87] => shiny, matte, large
    [88] => shiny, matte, medium
    [89] => shiny, matte, small
    [90] => shiny, rough, very large
    [91] => shiny, rough, large
    [92] => shiny, rough, medium
    [93] => shiny, rough, small
    [94] => shiny, very large, large
    [95] => shiny, very large, medium
    [96] => shiny, very large, small
    [97] => shiny, large, medium
    [98] => shiny, large, small
    [99] => shiny, medium, small
    [100] => matte, rough, very large
    [101] => matte, rough, large
    [102] => matte, rough, medium
    [103] => matte, rough, small
    [104] => matte, very large, large
    [105] => matte, very large, medium
    [106] => matte, very large, small
    [107] => matte, large, medium
    [108] => matte, large, small
    [109] => matte, medium, small
    [110] => rough, very large, large
    [111] => rough, very large, medium
    [112] => rough, very large, small
    [113] => rough, large, medium
    [114] => rough, large, small
    [115] => rough, medium, small
    [116] => very large, large, medium
    [117] => very large, large, small
    [118] => very large, medium, small
    [119] => large, medium, small
) 
```

# svn - 从命令行输出中排除目录

> ID：10099266
> 
> 赞同：0
> 
> 时间：2012-04-11T03:05:01.380
> 
> 标签：svn, bash, scripting, directory

我正在尝试使用以下命令创建在 SVN 版本之间添加或修改的所有文件的 tar.gz：

```
svn diff -r1:HEAD --summarize|grep -ve '^D'|awk '{print $2}'|xargs tar -vzcf file.tar.gz --exclude .svn 
```

我想我正在寻找任何技巧来加强这个命令，但是我的主要问题是带有修改的文件夹被添加到存档中，这反过来又添加了整个文件夹的内容，这是不可取的。

我希望得到类似的东西，`|xargs test -f`但如果为真，它将返回文件名，如果为假，则不返回任何内容，因此将目录从混合中排除。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:32:12.197

我决定用一个快速的 perl 脚本来解决这个问题：

exclude_dir.pl：

```
#!/usr/bin/perl -w

use diagnostics;
use strict;

my $arg = '';

while ($arg = shift) {
  print "$arg\n" if -f $arg;
} 
```

然后将命令修改为：

```
svn diff -r1:HEAD --summarize|grep -ve '^D'|awk '{print $2}'|xargs exclude_dir.pl|xargs tar -vzcf file.tar.gz --exclude .svn 
```

# java - 如何从网页中抓取图像？

> ID：10099269
> 
> 赞同：1
> 
> 时间：2012-04-11T03:06:05.507
> 
> 标签：java, htmlunit

我使用 htmlunit 从网页中抓取图像。我是htmlunit的初学者。我编码，但不知道如何获取图像。下面是我的代码。

```
import java.io.*;
import java.net.URL;
import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class urlscrap {

    public static void main(String[] args) throws Exception 
    {

        //WebClient webClient = new WebClient(Opera);
        WebClient webClient = new WebClient();
        HtmlPage currentPage = (HtmlPage) webClient.getPage(new URL("http://www.google.com"));

        System.out.println(currentPage.asText());
        //webClient.closeAllWindows();      

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T03:51:33.980

这对你有用吗？？

```
import java.net.URL;
import java.util.List;

import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlImage;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class urlscrap {

    public static void main(String[] args) throws Exception 
    {

        //WebClient webClient = new WebClient(Opera);
        WebClient webClient = new WebClient();
        HtmlPage currentPage = (HtmlPage) webClient.getPage(new URL("http://www.google.com"));
      //get list of all divs
        final List<?> images = currentPage.getByXPath("//img");
        for (Object imageObject : images) {
            HtmlImage image = (HtmlImage) imageObject;
            System.out.println(image.getSrcAttribute());
        }
        //webClient.closeAllWindows();      
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:11:02.377

看起来您正在获取页面的文本，这确实是第一步。你有什么问题？您在查找页面中引用的所有图像时遇到问题吗？我建议查找如何在 Java 中进行 DOM 解析，并使用它从页面中提取所有 img 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T03:26:23.590

如果你不介意切换语言，那么我会推荐 Python 的[scrapy](http://scrapy.org/)。这是迄今为止我用来抓取 Web 内容（包括图像）的最佳框架（它甚至可以自动为您创建缩略图）。就个人而言，我不会将 java 用于此类任务。

# iis-7.5 - ASP.NET Web API 仅在某些服务器上为 PUT 返回 404

> ID：10099270
> 
> 赞同：33
> 
> 时间：2012-04-11T03:06:13.843
> 
> 标签：iis-7.5, asp.net-mvc-4, asp.net-web-api

我已经编写了一个使用 ASP.NET MVC Web API 的站点，并且一切都运行良好，直到我将它放在临时服务器上。该站点在我的本地计算机和开发 Web 服务器上运行良好。开发服务器和登台服务器都是 Windows Server 2008 R2。

问题是这样的：网站基本上可以工作，但是有一些 API 调用使用了 HTTP PUT 方法。这些在暂存返回 404 时失败，但在其他地方工作正常。

我遇到并解决的第一个问题是请求过滤。但仍然得到404。

我已在 IIS 中打开跟踪并遇到以下问题。

```
168\. -MODULE_SET_RESPONSE_ERROR_STATUS 
ModuleName IIS Web Core 
Notification 16 
HttpStatus 404 
HttpReason Not Found 
HttpSubStatus 0 
ErrorCode 2147942402 
ConfigExceptionInfo  
Notification MAP_REQUEST_HANDLER 
ErrorCode The system cannot find the file specified. (0x80070002) 
```

dev 和 staging 的配置是一样的，事实上整个站点是一个直接的副本。

为什么 GET 和 POST 可以工作，而 PUT 不行？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-19T04:15:56.657

对于那些没有启用 WebDAV 但仍然使用 MVC 4 的 Web API 遇到此问题的人...

Steve Michelotti 在[这里](http://geekswithblogs.net/michelotti/archive/2011/05/28/resolve-404-in-iis-express-for-put-and-delete-verbs.aspx)记录了一个对我有用的解决方案。

在一天结束时，我在我的 Web 配置中启用了 ExtensionlessUrlHandler-Integrated-4.0 处理程序的所有动词 (verb="*")。

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
        <handlers>
            <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
            <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />
        </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-11T07:21:08.130

那些 IIS 服务器上安装了 web-dav 模块，我敢打赌它是不需要的，因为安装人员勾选了所有框，所以安装了它。

只需从 iis 中删除 web-dav。

或者使用 web.config 删除 web dav 模块：

```
<system.webServer>
    <modules>
        <remove name="WebDAVModule" />
    </modules>
    ... 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-11-15T20:57:47.100

发生这种情况似乎有很多原因。以上都不适合我。我已经在 web.config 中有 ExtensionlessUrlHandler 设置以及所有必需的 HTTP 动词。最后，我不得不在 IIS 中进行以下更改：

*   在 IIS 中选择您的网站并双击`Handler Mappings`
*   查找`ExtensionlessUrlHandler-ISAPI-4.0_32bit`并双击
*   在出现的对话框中，单击`Request Restrictions`
*   在动词选项卡上添加以逗号分隔的丢失的 HTTP 动词（在我的情况下是`PUT`和`DELETE`
*   在需要的地方单击并在弹出的对话框中`Ok`回答。`Yes``Edit Script Map`
*   重复`ExtensionlessUrlHandler-ISAPI-4.0_64bit`

希望这可以帮助某人:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-27T05:34:26.667

我的托管服务提供商无法卸载 WebDAV，因为这会影响所有人。

这 runAllManagedModulesForAllRequests="true" 有效，但不推荐。

许多修复包括删除 WebDAVModule 的模块，但这仍然不起作用。我也删除了处理程序，最后我可以使用所有动词 POST GET PUT DELETE。

删除模块和处理程序中的 WebDAVModule 和 WebDAV。

```
<modules>
    <remove name="WebDAVModule" />
</modules>
<handlers>
    <remove name="WebDAV" />
</handlers> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-05-19T15:56:21.307

我修复了这个删除 UrlScan ISAPI 过滤器的问题

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-27T20:46:48.007

就我而言，这些解决方案都没有应用。

我通过将我的应用程序池更改为**集成**而不是经典来修复它。

处理程序：

`<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />`

不适用于 Classic 应用程序池，因为它`preCondition`是`integratedMode`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-15T19:48:05.980

West-Wind 的 Rick Strahl 提出以下建议：

```
    <处理程序>
    <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
    < add name="ExtensionlessUrlHandler-Integrated-4.0"
    路径=“*。”
    动词=“获取，头部，发布，调试，放置，删除，补丁，选项”
    type="System.Web.Handlers.TransferRequestHandler"
    preCondition="integratedMode,runtimeVersionv4.0"
    />
    < /处理程序>

```

这对我来说非常有效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-31T09:24:37.177

嗨对我来说，没有一个解决方案有效。我终于让它工作了：

1) 在 IIS 中选择您的应用程序。
2) 转到请求过滤
3) 然后选择 HTTP Verbs 选项卡
4) 我发现 PUT 和其他动词允许为假但无法编辑所以我删除了动词然后在右侧的窗格中选择允许动词或右键单击列表并选择它。输入您遇到问题的动词，瞧！

希望这会对某人有所帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-11T01:52:36.760

我通过将网站的应用程序池更改为以前处于经典模式时的集成模式来解决此问题。

# wpf - MVVM 模式中的 SQLite 到 WPF

> ID：10099276
> 
> 赞同：0
> 
> 时间：2012-04-11T03:07:07.357
> 
> 标签：wpf, sqlite, mvvm, observablecollection

我正在使用 SQLite 在 WPF 中从头开始一个项目。我想使用最新的技术和最佳实践，并想使用 MVVM 模式。

最好的开始方式是什么？

使用 Linq to SQL 任何其他 ORM 或使用数据表来列出集合和可观察集合？

如果我使用 Observable 集合，如何从 SQLite 更新/删除数据？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:14:04.530

既然你提到了最佳实践，你为什么不先写单元测试。它还将帮助您进行抽象思考。

另外我会使用实体框架而不是 linq-to-sql。

# javascript - 如何使用 RegEx 和 '\' 字符正确解析 JSON？

> ID：10099277
> 
> 赞同：0
> 
> 时间：2012-04-11T03:07:11.210
> 
> 标签：javascript, regex, node.js

给定以下代码：

```
var a = 'somegarbage=http://somesite.com/foo/bar/&moregarbage';
var result = a.match(/http.+\//g); 
```

产生预期的结果：`["http://somesite.com/foo/bar/"]`

现在，如果我这样做：

```
var a = 'somegarbage=http://somesite.com/foo/bar/&moregarbage';
var config = JSON.parse('{"filter":"/http.+\\//g"}'); //notice the extra '\'?
var result = a.match(config.filter); 
```

它返回空值。我认为它与`\`JSON 中的字符串转义有关。我觉得我缺少一个简单的解决方案。我怎样才能解决这个问题？谢谢。

**编辑：**

我也试过这个，但它不起作用：

```
var a = 'somegarbage=http://somesite.com/foo/bar/&moregarbage';
var config = JSON.parse('{"filter":"/http.+\\//g"}'); //notice the extra '\'?
var result = a.match(new RegExp(config.filter)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:10:50.973

JSON 不接受正则表达式作为一种类型。因此，您只需将正则表达式放在一个字符串中（带有前导 / 和尾随 / ，然后在解析它之后，您需要将正则表达式提供给 new RegExp(str) 以将其转换为正则表达式。

你可以这样做：

```
var a = 'somegarbage=http://somesite.com/foo/bar/&moregarbage';
var x = JSON.parse('{"filter":"http.+/", "flags": "g"}');
x.filter = new RegExp(x.filter, x.flags);
var result = a.match(x.filter);
alert(result);​ 
```

这里的工作示例：http: [//jsfiddle.net/jfriend00/5pa2j/](http://jsfiddle.net/jfriend00/5pa2j/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:14:14.060

在 javascript 中，`/.../`RegExp 的语法是一种特殊的语法，而不仅仅是一个字符串。如果要将正则表达式存储为 JSON 中的字符串，则需要使用[RegExp 构造函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)。

```
var config = JSON.parse('{"filter":"/http.+\\//g"}');
var result = a.match(new RegExp(config.filter)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T03:25:46.273

使用正则表达式

```
var a = 'somegarbage=http://somesite.com/foo/bar/&moregarbage';
var config = JSON.parse('{"filter":"http.+/"}'); 
var result = a.match(new RegExp(config.filter, "g")); 
```

# sitecore - 如何更改sitecore中的媒体网址？

> ID：10099284
> 
> 赞同：1
> 
> 时间：2012-04-11T03:08:57.497
> 
> 标签：sitecore

我正在使用 sitecore6.5 开展一个项目，我们将媒体资产存储在 Akamai 的 CDN 上，因此我们必须更改媒体 URL 的解析方式。下面的线程正是我正在寻找的，看起来我需要做一些改变

> LinkProvider 类的 ExpandDynamicLinks() 和 Sitecore.Resources.Media.MediaProvider 的 GetMediaUrl() 方法。

谁能告诉我更详细的信息，如果可能的话，显示一些示例代码！谢谢 ！

[如何配置 Sitecore 以生成指向媒体项目的绝对链接？](https://stackoverflow.com/questions/5977809/how-can-i-configure-sitecore-so-that-it-generates-absolute-links-to-media-items)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:43:37.310

制作一个每个环境的补丁文件，如下所示：

```
 <setting name="Media.MediaLinkPrefix">
      <patch:attribute name="value">http://mycdn.mydomain.com/~/media</patch:attribute>
  </setting> 
```

或者直接在 web.config 中进行更改，具体取决于您的偏好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:12:28.920

查看这篇博文，因为它提供了额外的示例代码：[使用 Akamai Net Storage 处理 Sitecore 媒体项目](http://www.sitecoredevelopment.com/en/MarkGraber/2011/January/Using-Akamai-Net-Storage-for-Sitecore-Media-Items.aspx)

此外，正如您所指的帖子所说（我已回答），您应该反编译我引用的开箱即用的类并对其进行调整。您可以使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)之类的工具免费反编译它们。我会在自定义类中按原样实现它们并让它工作，然后您可以调试它们并查看需要在哪里进行调整。

# php - PHP：如何访问 XML 文件中的最后一个元素

> ID：10099286
> 
> 赞同：0
> 
> 时间：2012-04-11T03:09:01.940
> 
> 标签：php, xml, arrays

我有一个 XML 文件，我希望能够访问文件中的最后一个元素。（注意：文件是动态更新的，最新的值总是在最新的元素中：

```
<?xml version="1.0"?> 
```

```
<tran>
    <balance>25000</balance>
    <amount>560</amount>

</tran>

<tran>
    <amount>5999</amount>
    <balance>30999</balance>
</tran>
<tran>
    <amount>5000</amount>
    <balance>20000</balance>
</tran>
<tran>
    <amount>8923</amount>
    <balance>25000</balance>
</tran> 
```

我希望能够访问最后一个节点。

如何使用 Php Simple XML 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T03:20:11.287

首先，您的 XML 需要一个父节点（在下面的示例中，我插入了“trans”元素）然后试试这个 xpath：

```
<?php
$xmlstr=<<<EOXML
<?xml version="1.0"?>
<trans>
<tran>
    <balance>25000</balance>
    <amount>560</amount>

</tran>

<tran>
    <amount>5999</amount>
    <balance>30999</balance>
</tran>
<tran>
    <amount>5000</amount>
    <balance>20000</balance>
</tran>
<tran>
    <amount>8923</amount>
    <balance>25000</balance>
</tran>
</trans>
EOXML;

$xml =new SimpleXMLElement($xmlstr);
$last = $xml->xpath("/trans/tran[last()]");
var_dump($last);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:19:23.617

**试试这个 ：**

```
<?php
    $xmlstr = <<<XML
    <?xml version="1.0"?>
    <transactions>
        <tran>
            <balance>25000</balance>
            <amount>560</amount>
        </tran>
        <tran>
            <amount>5999</amount>
            <balance>30999</balance>
        </tran>
        <tran>
            <amount>5000</amount>
            <balance>20000</balance>
        </tran>
        <tran>
            <amount>8923</amount>
            <balance>25000</balance>
        </tran>
    </transactions>
    XML;

    $elements = new SimpleXMLElement($xmlstr);

    $last_element = $elements->tran[count($elements)-1];

    print_r($last_element);

?> 
```

**输出 ：**

```
SimpleXMLElement Object
(
    [amount] => 8923
    [balance] => 25000
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T03:33:48.183

尝试

```
$xmlString = '<?xml version="1.0"?>
<doc>
<tran>
    <balance>25000</balance>
    <amount>560</amount>
</tran>

<tran>
    <amount>5999</amount>
    <balance>30999</balance>
</tran>
<tran>
    <amount>5000</amount>
    <balance>20000</balance>
</tran>
<tran>
    <amount>8923</amount>
    <balance>25000</balance>
</tran>

</doc>';

$xml = simplexml_load_string($xmlString);
$var = end($xml);
$var = end($var);
var_dump($var); 
```

输出

```
object(SimpleXMLElement)[5]
  public 'amount' => string '8923' (length=4)
  public 'balance' => string '25000' (length=5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:26:35.117

您可以简单地计算“tran”元素

```
//value of $i is the total count of tran element in xml
$last_element_amount  = $xml->tran[$i]['amount'];
$last_element_balance  = $xml->tran[$i]['balance']; 
```

# c++ - boost::program_options 可以从管道中解析标准输入字符串吗？

> ID：10099288
> 
> 赞同：1
> 
> 时间：2012-04-11T03:09:18.083
> 
> 标签：c++, python, boost, pipe

在开始时不解析参数，而是在程序已经运行一段时间时解析从管道读取的输入字符串。boost::program_options 可以这样做吗？谢谢。 **编辑：** 我必须在 python 中使用不同的参数多次测试 c++ 程序。我想通过 subprocess.PIPE 传递参数来改变程序的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:18:08.027

我无法想象为什么不。也就是说，您为什么要尝试将选项传递给程序？大概您正在查看一个选项集，该选项集太长而无法在每次调用程序时键入。如果是这样，program_options 有一个非常好的方法来合并配置文件，以便在命令行之前检查它们的选项。

与往常一样， Boost[提供了一些很棒的文档和示例](http://www.boost.org/doc/libs/1_49_0/doc/html/program_options/tutorial.html#id2500303)，详细解释了这一点。

编辑：感谢您的澄清。如果您希望在 Python 中处理传入或传出子进程的管道输入，那么 subprocess.PIPE 是您的朋友。

# android - 如何从字符串转换 XML 数据？

> ID：10099290
> 
> 赞同：0
> 
> 时间：2012-04-11T03:09:19.567
> 
> 标签：android, xml

有谁知道如何从字符串转换 XML？我一直在看到从 XML 到 String 值的转换，但不是从 String 到 XML。我有一个包含 XML 内容的字符串，但是当我使用该`parse()`方法时，它失败了。

这是示例：

```
 String content = EntityUtils.toString(responseEntity);
Therefore content now contains:    
    content = "<MGMT>" +
        "<NET>" +
            "<HEAD>" +
                "<ClientID>99999999</ClientID>" +
                "<ServerID>WEB_01</ServerID>" +
                "<Rsp>00</Rsp>" +
                "<Auth></Auth>" +
            "</HEAD>" +
            "<STAT>" +
                "<IP>192.168.5.158</IP>" +
                "<Status>OK, Success!</Status>" + 
        "</NET>" +
    "</MGMT>"; 
```

请帮忙？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:32:08.313

您的“内容”是否遵循 XML 格式？您可以在“内容”前面添加标题，例如：

`<?xml version="1.0" encoding="UTF-8" ?>`

我认为您可以先将“内容”保存到文件中，然后解析该文件。这可以帮助您验证 XML 格式。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:58:20.893

您的示例内容缺少结束 STAT 标记。

添加后，我就能够使用 LINQ to XML 解析字符串：

```
 string sContent =
        sContent = "<MGMT>" +
    "<NET>" +
        "<HEAD>" +
            "<ClientID>99999999</ClientID>" +
            "<ServerID>WEB_01</ServerID>" +
            "<Rsp>00</Rsp>" +
            "<Auth></Auth>" +
        "</HEAD>" +
        "<STAT>" +
            "<IP>192.168.5.158</IP>" +
            "<Status>OK, Success!</Status>" + 
        "</STAT>" +
    "</NET>" +
"</MGMT>";

        XElement element = XElement.Parse(sContent);

        string sStatus = element.Descendants("Status").First().Value; 
```

我不知道在为 Android 编程时是否可以使用 LINQ to XML，但希望缺失标签的识别能够解决您的基本问题。

# java - 如何在mysql中转换字符串类型（java）并存储在日期数据类型中？

> ID：10099291
> 
> 赞同：0
> 
> 时间：2012-04-11T03:09:39.443
> 
> 标签：java, sql, date

我从表单中插入值时收到错误消息。错误是**Column count 与 raw 1 的 value count 不匹配**。我的第 5 个字符串值必须存储为sql 中的**日期**数据类型。

```
String s1=this.txtUsername.getText();
String s2=this.txtPassword.getText();
String s3=this.txtName.getText();
String s4=this.txtAddress.getText();
String s5=this.txtContractEndDetails.getText();

         connection getcon = new connection();
         Connection conn;

    try{
        conn=getcon.creatConnection();
        Statement stmt=conn.createStatement();

        stmt.executeUpdate("insert into TravelGuide(username,password,name,address,contract_end_date)values ('"+s1+"','"+s2+"','"+s3+"','"+s4+"'+'"+s5+"')");

        }
    catch(Exception ex){
        JOptionPane.showMessageDialog(PanelTG, ex.getMessage(),"Error Occured",2);
    } 
```

这是我用于 SQL 查询的相关表。

```
 create table TravelGuide(
  username char(20),
  password char(20),
  name varchar(100),
  address varchar(150),
  contract_end_date date,
  constraint TravelGuide_PK primary key(username)
  ); 
```

**已编辑**

我很困惑

```
preparedStatement("insert into TravelGuide (username,password,name,address,contract_end_date) values (?, ?, ?, ?, ?)"); 
```

你能解释一下吗？

这是正确的吗？** 标记内的代码给出错误非法表达式开头并且找不到符号..请帮助我..

```
try {
    conn=getcon.creatConnection();

    **String sql="insert into TravelGuide("+"username,"+"password,,"+,"name,"+"address,"+"contract_end_date)"+"values(?,?,?,?,?)";**
    PreparedStatement stmt = conn.**preparedStatement**(sql);
    java.sql.Date dtValue = java.sql.Date.valueOf(s5); 

    stmt.setString(1, s1);
    stmt.setString(2, s2);
    stmt.setString(3, s3);
    stmt.setString(4, s4);
    stmt.setDate(5, dtValue);
    stmt.executeUpdate();                
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T03:19:07.320

在 中`try`，改为执行以下操作：

```
conn = getconn.creatConnection();
PreparedStatement stmt = conn.prepareStatement("insert into TravelGuide (username,password,name,address,contract_end_date) values (?, ?, ?, ?, ?)");

java.sql.Date date = someFunctionToConvertYourDateStringToADate(s5);

stmt.setString(1, s1);
stmt.setString(2, s2);
stmt.setString(3, s3);
stmt.setString(4, s4);
stmt.setDate(5, date);
stmt.executeUpdate();

[and so on] 
```

这样，您就可以免受 SQL 注入攻击，而且您不必担心如何将字符串转换为特定数据库对`date`列所需的格式。`java.sql.Date`给定一个对象，JDBC 驱动程序将为您处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:25:34.070

```
stmt.executeUpdate("insert into TravelGuide(username,password,name,address,contract_end_date)values ('"+s1+"','"+s2+"','"+s3+"','"+s4+"'**+**'"+s5+"')"); 
```

为什么+，我想我应该是，

# php - 如何处理没有双引号的文件名的JSON

> ID：10099294
> 
> 赞同：0
> 
> 时间：2012-04-11T03:09:59.630
> 
> 标签：php, json

如何在PHP中解析其字段名没有双引号的JSON

这是我收到的此类 JSON 的示例....

```
[{meta_data: [{name: "HANDLE", value: "2"}], compound: { name: "Numeric", entries: [{meta_data: [{name: "partition", value: "2"}, {name: "metric-id", value: "18474"}, {name: "unit-code", value: "2720"}, {name: "unit", value: "bpm"}], simple: {name: "Basic-Nu-Observed-Value", type: "float", value: "72.000000"}}, {compound: { name: "Absolute-Time-Stamp", entries: [{simple: {name: "century", type: "intu8", value: "20"}}, {simple: {name: "year", type: "intu8", value: "12"}}, {simple: {name: "month", type: "intu8", value: "4"}}, {simple: {name: "day", type: "intu8", value: "11"}}, {simple: {name: "hour", type: "intu8", value: "3"}}, {simple: {name: "minute", type: "intu8", value: "10"}}, {simple: {name: "second", type: "intu8", value: "26"}}, {simple: {name: "sec_fractions", type: "intu8", value: "0"}}] }}] }}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:24:25.820

手动，因为没有“”是无效的 JSON。如果要求声明数据将以 JSON 格式交换，那么它不是你的问题，它是应用程序/提供 JSON 的人有问题。推回他们并让他们解决他们的问题。

熊 说：

> 我正在为他们修理 :) thx

好的，那么您需要修复生成 JSON 的应用程序部分，而不是使用它的部分（假设您`json_decode`在消费端使用标准）。如果是这种情况，您的初始问题真的变得无关紧要，您可能需要也可能不需要发布一个关于如何最好地重新编写代码以生成正确 JSON 的新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:24:01.077

这是你想要的？我在萤火虫上试过这个。

```
obj = [{meta_data: [{name: "HANDLE", value: "2"}], compound: { name: "Numeric", entries: [{meta_data: [{name: "partition", value: "2"}, {name: "metric-id", value: "18474"}, {name: "unit-code", value: "2720"}, {name: "unit", value: "bpm"}], simple: {name: "Basic-Nu-Observed-Value", type: "float", value: "72.000000"}}, {compound: { name: "Absolute-Time-Stamp", entries: [{simple: {name: "century", type: "intu8", value: "20"}}, {simple: {name: "year", type: "intu8", value: "12"}}, {simple: {name: "month", type: "intu8", value: "4"}}, {simple: {name: "day", type: "intu8", value: "11"}}, {simple: {name: "hour", type: "intu8", value: "3"}}, {simple: {name: "minute", type: "intu8", value: "10"}}, {simple: {name: "second", type: "intu8", value: "26"}}, {simple: {name: "sec_fractions", type: "intu8", value: "0"}}] }}] }}] 

console.log(obj[0].meta_data); 
```

**输出**

```
[Object { name="HANDLE", value="2"}] 
```

# asp.net-mvc - 从不同的视图填充模型（会话状态？）

> ID：10099295
> 
> 赞同：0
> 
> 时间：2012-04-11T03:10:13.737
> 
> 标签：asp.net-mvc, session-state

对于从用户那里收集信息以填充同一模型的不同属性的两个操作，我有两个视图。例如（简单的东西）：型号：

```
String Name {get; set;} 
String Status {get; set;} 
```

应该从视图 UserDetails.cshtml 和从 UserStatus.cshtml 接收名称。有人告诉我这可以通过会话状态来完成。谁能给我一个例子，这可以/应该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:34:05.740

Session 对象实际上只是一个字典。所以假设你有这样的行动方法

```
[HttpPost]
public ActionResult UserDetails(string Name) {
    var model = (Model)Session["ModelKey"];
    model.Name = Name;
    Session["ModelKey"]   = model;
}

[HttpPost]
public ActionResult UserStatus(string Status) {
    var model = (Model)Session["ModelKey"];
    model.Status= Status;
    Session["ModelKey"]   = model;
} 
```

# matlab - Matlab gui 3 3D 数据的 2D 视图。非主要图像平面。保持交互速度？

> ID：10099301
> 
> 赞同：0
> 
> 时间：2012-04-11T03:11:03.317
> 
> 标签：matlab

我处理 3D 医学图像。（CT，MRI，SPECT，PET，...）我发现 Matlab 足够快，可以在 3 个视图（横向、矢状、冠状）中显示、平移、缩放和询问基本正交平面的值。我通过创建一个带有纹理映射的表面对象来实现这一点。

但是，我想更进一步，并能够通过体积显示任意平面。因此，如果我在一个视图上设置任意平面，其他视图将更新并正交。

所以，现在我必须执行 3 次大约 512x512 的插值并更新曲面，而不是索引到您可以在基数平面中执行的体积（例如 Arr(:,:,i)）。这没有提供我想要的交互速度类型 - 它不是旋转的交互。如果我将采样率降低到 64x64，它是合理的，但这并不是一个真正的选择。我已经分析了我的代码，插值和设置表面 CData 占用了大部分时间。

我会以错误的方式解决这个问题吗？是否有可能（并且会更快）加载体积，随相机任意旋转并设置近处和远处剪切平面以显示非基本图像平面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:36:56.270

也许先旋转 3D 体积然后通过基面会快一点？

[http://blogs.mathworks.com/steve/2006/08/17/spatial-transformations-three-dimensional-rotation/](http://blogs.mathworks.com/steve/2006/08/17/spatial-transformations-three-dimensional-rotation/)

# iphone - 如何让现有的 Flash 站点在 iPhone 和 iPad 上运行？

> ID：10099303
> 
> 赞同：0
> 
> 时间：2012-04-11T03:11:27.203
> 
> 标签：iphone, flash, video-streaming, html5-video, video-encoding

我目前的 HTML4 过渡网站有几个 Flash 视频。我怎样才能让它们在 Apple 设备上进行最小的改动？

我看过很多线程，但我很困惑。这些线程中建议的一些可能方法：

1.  从请求中识别设备并提供另一种格式的视频。这里应该提供哪种格式？我需要以 2 格式维护所有视频吗？[这里](https://apple.stackexchange.com/questions/8513/if-iphones-ipads-dont-support-flash-how-do-they-play-youtube)建议使用 H.264 编码。

2.  [HTML 5](https://stackoverflow.com/questions/2595780/what-is-the-best-way-to-serve-videos-on-a-website) 选项。在我的情况下不可行。用 HTML5 重写页面对我来说不是一个选择。

有人可以为我的案例推荐推荐的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:34:04.433

> HTML 5 选项。在我的情况下不可行。用 HTML5 重写页面对我来说不是一个选择。

我认为您对支持 HTML5 的含义有些误​​解。

替换`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`为`<!doctype html>`。完毕！您可以在 HTML5 中使用新标签，但不是必须的。事情与少数（罕见的）边缘情况很好地[向后兼容。](http://www.w3.org/TR/html5-diff/#backwards-compatible)

将所有内容编码为 H.264，您将度过最轻松的时光。如果您愿意，可以使用 Flash 桌面版提供文件，并通过 HTML5`<video>`标记提供给移动设备。

考虑使用一个不错的混合 HTML5/Flash 预建播放器，如[Video.js](http://videojs.com/)或[SublimeVideo](http://sublimevideo.net/)，让您的生活更轻松。

# asp.net - 具有自定义功能的多个应用程序中的 WCF 服务

> ID：10099304
> 
> 赞同：0
> 
> 时间：2012-04-11T03:11:38.853
> 
> 标签：asp.net, wcf, authorization, wcf-security

我为我的 Web 应用程序创建了 WCF 服务。我能够访问接口内声明的所有函数和方法。现在，我想创建一个具有相同 WCF 服务的新 Web 应用程序，但我不希望这个 Web 应用程序访问所有功能和方法，即限制访问。可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:56:33.187

我认为您应该首先在 WCF 服务上实现基于凭据的访问，即多个客户端应用程序将使用凭据访问 WCF 服务。您可以指定操作合同的声明性按需权限。

例如。

```
 [PrincipalPermission(SecurityAction.Demand,Role = @”&lt;Domain>\Customer”)] 
```

这篇[文章](http://msdn.microsoft.com/library/ff406125.aspx)可能会对你有所帮助。

# java - tar.gz 压缩不适用于 GIF 文件

> ID：10099308
> 
> 赞同：1
> 
> 时间：2012-04-11T03:13:42.177
> 
> 标签：java, file, compression

我正在尝试制作一个将文件压缩为 .tar.gz 的程序：

这是代码：

```
import java.io.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.zip.GZIPOutputStream;
import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;

public class Compress {

    public static void main(String[] args) {
        BufferedInputStream input = null;
        try {
            input = new BufferedInputStream(new FileInputStream(new File("input_filename.filetype")));
            TarArchiveOutputStream out = null;
            try {
                out = new TarArchiveOutputStream(new GZIPOutputStream(new BufferedOutputStream(new FileOutputStream("output_filename.tar.gz"))));
                out.putArchiveEntry(new TarArchiveEntry(new File("input_filename.filetype")));

                int count;
                byte data[] = new byte[input.available()];
                while ((count = input.read(data)) != -1) {
                    out.write(data, 0, count);
                }

                input.close();
            } catch (IOException ex) {
                Logger.getLogger(Compress.class.getName()).log(Level.SEVERE, null, ex);
            } finally {
                if (out != null) {
                    try {
                        out.closeArchiveEntry();
                        out.close();
                    } catch (IOException ex) {
                        Logger.getLogger(Compress.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            }
        } catch (FileNotFoundException ex) {
            Logger.getLogger(Compress.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            try {
                input.close();
            } catch (IOException ex) {
                Logger.getLogger(Compress.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

我使用[Apache Commons Compression](http://commons.apache.org/compress/download_compress.cgi)作为库。

我用2个条件测试：

1.  压缩 GIF 文件
2.  压缩 PDF 文件

我比较使用[PeaZip](http://peazip.sourceforge.net/)进行压缩，结果如下：

1.  ![比较 GIF，从左到右 -> 上面的代码，PeaZip，文件输入](../Images/a6020eed9c4f25f5eeb0de743d48bec3.png)
2.  ![比较 PDF，从左到右 -> 上面的代码，PeaZip，文件输入](../Images/5d89d6d532c5b31f49cd3ee7bd699a1c.png)

**如果输入文件是 GIF，压缩文件的大小会增加，如果我们使用[PeaZip](http://peazip.sourceforge.net/)也是如此。但对于其他文件，它适用于压缩过程。**

谁能解释这会发生什么？我的代码有问题吗？

感谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T03:18:36.890

GIF 和 PDF 文件通常都已经被很好地压缩了，所以 LZW 算法（如果我没记错的话，在 boh Zip 和 GZip 中使用）不能从中得到更多。

想象一下，如果每个文件都可以压缩。然后我们可以`gzip`一遍又一遍地运行，直到文件像我们想要的那样小:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T03:20:09.720

根据您使用的压缩算法，您会得到不同的结果——每种类型的文件压缩方式不同。例如，文本文件的压缩效果非常好。此外，由于 GIF 文件已经使用 LZW 压缩进行压缩，因此第二次压缩几乎没有效果。

来自 Wikipedia，“GIF 图像使用 Lempel-Ziv-Welch (LZW) 无损数据压缩技术进行压缩，以在不降低视觉质量的情况下减小文件大小。”

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Graphics_Interchange_Format](http://en.wikipedia.org/wiki/Graphics_Interchange_Format)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T03:18:02.550

`GIF`文件*已经被*压缩（使用 LZW），因此再次压缩它们不会有太大的改进（这是信息论的基本“定律”）。

事实上，您可能会*发现*文件大小增加了，因为虽然您无法再压缩数据，但您仍然需要添加另一层压缩控制信息。

这可能就是你的情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T03:18:23.633

仅当可以压缩内容时，压缩才有效。大多数 GIF 文件已经被 LZW 压缩，所以它们通常不会压缩太多；一旦包含存档头和压缩数据表，净变化就是文件大小的增加。许多 PDF 文件也被压缩，因此您经常会看到同样的情况；在这种情况下，PDF 足够大，以至于 GZip 压缩（相同 LZW 算法的稍新版本）可以找到更多可以挤出的空间。

# forms - 在 Symfony 2 中绑定表单后设置字段

> ID：10099312
> 
> 赞同：0
> 
> 时间：2012-04-11T03:14:01.940
> 
> 标签：forms, validation, symfony

我正在练习在 symfony2 中做一个简单的注册表单。我创建了一个带有plainPassword 字段和一个嵌入式用户文档（我正在使用mongoDB）和两个FormTypes 的Register 模型。User 文档在密码字段中具有 NotBlank 约束。

我希望从注册模型中读取plainPassword，对其进行哈希处理并将其设置为用户文档。这是为了在散列之前验证最大/最小长度。

问题是，当我绑定表单时，Symony 似乎已经保存了一个错误数组，其中 User.password 字段为空。因此，即使我在绑定后设置散列通行证，表单也永远不会有效。我总是收到“此值不应为空”

最后，从 User.password 中删除 NotBlank 约束会导致“您无法在未绑定的表单上调用 isValid()”。无论哪种方式，我都不希望删除约束，但我至少希望看到它起作用。

一些代码：

```
class RegisterController extends Controller {

/**
 * @Route("/register/", name="register_new")
 * @Template()
 */
public function indexAction(Request $request)
{
    $form = $this->createForm(new RegistrationType(), new Registration());

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        $register = $form->getData();
        $user = $register->getUser();
        $user->setPassword(sha1($register->getPlainPassword()));
        $form->setData($register);
        if ($form->isValid()) {
            return $this->redirect($this->generateUrl('login_form'));
        } 
    }
    return array('form' => $form->createView());
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:00:24.407

至少有两种方法可以解决这个问题：

*   **从字段中删除`NotBlank`约束。`password`**这里的原因是您不允许用户设置他们的编码密码，因此您实际上不需要验证它。

    顺便说一句，您在删除约束后得到的错误不是由您删除它的事实引起的，而是由其他原因引起的。

*   **使用[验证组](http://symfony.com/doc/current/book/validation.html#validation-groups)。**如果您仍然希望能够在`password`其他地方验证该字段（例如在[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)中），请创建验证组并`password`从您用于注册的组中排除该字段的约束。

# jquery - jQuery/Effects/.delay() & .stop() 功能

> ID：10099317
> 
> 赞同：0
> 
> 时间：2012-04-11T03:14:20.103
> 
> 标签：jquery, effects

我试图让我的内容动画`DIV`首先淡出，然后在这个淡出阶段停止，并且只将淡入排队，以便在`.dequeue()`我动态加载内容（可能通过 ajax）后可以调用。

```
$content.fadeTo(1000,0.0).delay(1000).stop().fadeTo(1000, 1) 
```

我有两个问题-

1.  我的淡出立即发生并且不会淡出 1 秒。
2.  该`stop()`功能不会停止动画直接运行的任何内容。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:38:56.883

有几个问题：

`$content.fadeTo(1000,0.0)`将在 1 秒内淡出您的 div（`.fadeOut(1000)`如果您愿意，可以使用）。

然后，`.delay()`daley 会按您提供的毫秒数执行后续动画，所以如果您这样做

`$content.fadeOut(1000).delay(300).fadeIn();`它将在持续 1 秒的动画中淡出 div，等待 300 毫秒，然后将 div 淡入。

到目前为止一切都很好，但是`.stop()`在匹配的元素中停止动画，所以你`fadeTo`不会运行，它不会排队。然后，当你这样做`.fadeTo(1000, 1)`（相当于`.fadeIn(1000)`）时，div 已经可见，所以它什么也不做。

我建议你这样做：

```
$content.fadeOut(1000);

//Later in the code
$.ajax({
//...
success: function() {
     //code..
     $content.fadeIn(1000);
}); 
```

但是，如果您想将动画排队，您可以使用[`.queue()`](http://api.jquery.com/queue/)和[`dequeue()`](http://api.jquery.com/dequeue/)

# python - 如何使用 python 在 ANTLR 中执行自定义错误报告？

> ID：10099319
> 
> 赞同：4
> 
> 时间：2012-04-11T03:14:24.423
> 
> 标签：python, antlr, antlr3

我正在为我的编译器类编写一个简单的解析器（只是我可以让工具工作的概念证明），并且正在将 ANTLR 与 python 绑定一起使用。我已经获得了正确标记和解析的简单语法，但我还想以自定义方式处理错误。根据 ANTLR 文档（更具体地说：[http](http://www.antlr.org/wiki/display/ANTLR3/Error+reporting+and+recovery) ://www.antlr.org/wiki/display/ANTLR3/Error+reporting+and+recovery ），我可以将以下代码放入我的语法文件中：

```
@members {
    private List<String> errors = new LinkedList<String>();
    public void displayRecognitionError(String[] tokenNames,
                                        RecognitionException e) {
        String hdr = getErrorHeader(e);
        String msg = getErrorMessage(e, tokenNames);
        errors.add(hdr + " " + msg);
    }
    public List<String> getErrors() {
        return errors;
    }
} 
```

但是，这是一个我似乎无法在 python 中复制的 Java 示例（我可以复制代码，但似乎无法让它运行）。有谁知道我会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:33:41.687

我设法找到了解决我的问题的方法：

```
@members {
def displayRecognitionError(self, tokenNames, e):
    # do something
    pass

antlr3.BaseRecognizer.displayRecognitionError = displayRecognitionError
} 
```

# java - 如何在 Java 中实现 Kerberos 协议转换？（S4U2自我）

> ID：10099321
> 
> 赞同：3
> 
> 时间：2012-04-11T03:14:49.277
> 
> 标签：java, windows, impersonation, kerberos

**编辑**

现在我知道我需要什么了。我需要用 Java 实现 Kerberos 协议转换（S4U2Self）。.Net 中有示例，但 Java 中没有示例。

有这个第三方库[Quest Single Sign on for Java](http://www.quest.com/single-sign-on-for-java/)声称可以做到这一点。我已经下载了 JAR，它看起来不错，但我宁愿使用自定义实现而不是其他人的代码（必须付费）。

任何人都可以在需要做的事情上抢先一步吗？任何现有的开放 Java API 来处理这个问题？

谢谢

**之前的问题**

目前我的应用程序只知道用户 ID，我需要使用 Kerberos 对该用户进行身份验证，创建服务票证并使用它来访问第三方服务。

我的应用程序需要充当代理，并且需要代表提供的用户 ID 向第三方服务发送请求。这是因为对其他第三方应用程序存在限制。

我无法以任何方式获取给定用户 ID 的密码，也无法从同一用户 ID 获取以前的服务票证（转发它）。我知道，管理员用户的凭据。

有没有办法只使用用户 ID（主名称）来创建服务令牌？

也许是某种委托，其中受信任的主体已经过身份验证并为其他主体请求服务票证？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T14:10:38.703

S4U2self/S4U2proxy 应该在 JDK 8 中出现：

*   [http://openjdk.java.net/projects/jdk8/features](http://openjdk.java.net/projects/jdk8/features)
*   [http://openjdk.java.net/jeps/113](http://openjdk.java.net/jeps/113)

与此同时，我正在查看[https://github.com/cconlon/kerberos-java-gssapi](https://github.com/cconlon/kerberos-java-gssapi)

（他的 SWIG 输入文件不包括 gss_acquire_cred_impersonate_name 但这很容易更改。弄清楚如何使用它可能需要更长的时间。）

# swing - Myeclipse：在设计视图中进行更改时，自动更改为源视图

> ID：10099322
> 
> 赞同：0
> 
> 时间：2012-04-11T03:14:55.267
> 
> 标签：swing, myeclipse, matisse

我正在使用 MyEclipse 并使用 Matisse 对 Swing 进行编程。

MyEclipse 的这个功能有一点让我很恼火：当你在设计视图中更改某些内容（添加组件、调整大小、添加事件……任何东西）时，MyEclipse 会自动生成代码并从设计视图更改为代码视图。

因此，每次更改某些内容时，我都必须再次单击设计视图选项卡。（你可以想象一个按钮有一些属性，比如：鼠标点击的方法，鼠标悬停，这个按钮上的文字，它的大小，......），每个属性，我必须再次选择查看选项卡......

请帮我解决这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:42:46.523

我在 MyEclipse 论坛上看到了这个，如果你有 MyEclipse for Spring，那么这里可能有一个解决方案：[http ://www.myeclipseide.com/index.php?name=PNphpBB2&file=viewtopic&p=130152#130152](http://www.myeclipseide.com/index.php?name=PNphpBB2&file=viewtopic&p=130152#130152)

如果您没有使用 MyEclipse for Spring，那么您可能会考虑切换到用于 MyEclipse 的 Swing Designer，它可以通过 MyEclipse 配置中心仪表板添加。这似乎是现在推荐的路线，如果您可以离开 Matisse，这可能是一个更好的选择，因为 Swing Designer 不需要单独的表单文件（它仅从 Java 源代码运行）。

# python - 如何为远程沙箱执行做一个嵌入式python模块？

> ID：10099326
> 
> 赞同：3
> 
> 时间：2012-04-11T03:15:26.840
> 
> 标签：python, function, pickle

我正在尝试将 python 代码动态添加到沙盒模块中，以便在远程机器上执行。我遇到了如何处理导入方法的问题。例如，常见的脚本编写如下：

```
 from test_module import g
 import other_module

 def f():
     g()
     other_module.z() 
```

我知道我可以用 g 和可能的 z 腌制 f，但是如何保留 z 的“other_module”范围？如果我将 f 和 g 都放在沙箱中，那么在调用 f 时 z 将无法正确解析。是否可以使用某种类型的嵌入式模块来正确解析 z，即 sandbox.other_module？

我将远程代码加载到沙箱中的目的是不污染全局命名空间。例如，如果使用它自己的依赖图调用另一个远程方法，那么它不应该干扰另一组远程代码。期望 python 在沙盒模块进出使用时保持稳定是否现实？我之所以这么说是因为这篇文章： [如何卸载（重新加载）Python 模块？](https://stackoverflow.com/questions/437589/how-do-i-unload-reload-a-python-module) 这让我觉得在这种情况下删除模块（例如不同的沙箱）可能会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:51:28.587

其他模块可以通过以下方式导入*沙箱*（您的意思是在运行时动态创建的模块）

```
 sandbox.other_module = __import__('other_module') 
```

或者：

```
 exec 'import other_module' in sandbox.__dict__ 
```

如果您从其他模块或其他沙盒模块中调用“沙盒”模块，并且您想稍后重新加载一些新代码，那么只导入一个模块而不是像“from sandbox import f”这样的模块名称会更容易，然后调用“sandbox. f”不是“f”。然后很容易重新加载。（但自然地重新加载命令对它没有用）

* * *

课程

```
>>> class A(object): pass
... 
>>> a = A()
>>> A.f = lambda self, x: 2 * x  # or a pickled function
>>> a.f(1)
2
>>> A.f = lambda self, x: 3 * x
>>> a.f(1)
3 
```

似乎重新加载方法很容易。我记得重新加载在修改后的源代码中定义的类可能会很复杂，因为旧的类代码可以由某个实例保存。在最坏的情况下，可以/需要单独更新实例的代码：

```
 some_instance.__class__ = sandbox.SomeClass  # that means the same reloaded class 
```

我将后者与通过 win32com 自动化访问的 python 服务一起使用，并且类代码的重新加载成功而不会丢失实例数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:08:43.883

我目前的方法是启用“import x”和“from x import y”依赖捆绑。对于当前的实现，一个缺点是它会在每个使用的模块中创建方法的副本，而在代码源中，每个用法只是对内存中相同方法的引用（尽管我在这里有冲突的结果 -请参阅代码后的部分）。

/// analysis_script.py /// （为简洁起见，排除了依赖项）

```
import test_module
from third_level_module import z

def f():
    for i in range(1,5):
        test_module.g('blah string used by g')
        z() 
```

/// 驱动程序.py ///

```
import modutil
import analysis_script

modutil.serialize_module_with_dependencies(analysis_script) 
```

/// modutil.py ///

```
import sys
import modulefinder
import os
import inspect
import marshal

def dump_module(funcfile, name, module):
    functions_list = [o for o in inspect.getmembers(module) if inspect.isfunction(o[1])]
    print 'module name:' + name
    marshal.dump(name, funcfile)
    for func in functions_list:
       print func
       marshal.dump(func[1].func_code, funcfile)

def serialize_module_with_dependencies(module):

    python_path = os.environ['PYTHONPATH'].split(os.pathsep)
    module_path = os.path.dirname(module.__file__)

    #planning to search for modules only on this python path and under the current scripts working directory
    #standard libraries should be expected to be installed on the target platform
    search_dir = [python_path, module_path]

    mf = modulefinder.ModuleFinder(search_dir)

    #__file__ returns the pyc after first run
    #in this case we use replace to get the py file since we need that for our call to       mf.run_script
    src_file = module.__file__
    if '.pyc' in src_file:
        src_file = src_file.replace('.pyc', '.py')

    mf.run_script(src_file)

    funcfile = open("functions.pickle", "wb")

    dump_module(funcfile, 'sandbox', module)

    for name, mod in mf.modules.iteritems():
        #the sys module is included by default but has no file and we don't want it anyway, i.e. should
        #be on the remote systems path. __main__ we also don't want since it should be virtual empty and
        #just used to invoke this function.
        if not name == 'sys' and not name == '__main__':
            dump_module(funcfile, name, sys.modules[name])

    funcfile.close() 
```

/// sandbox_reader.py ///

```
import marshal
import types
import imp

sandbox_module = imp.new_module('sandbox')

dynamic_modules = {}
current_module = ''
with open("functions.pickle", "rb") as funcfile:
    while True:
        try:
            code = marshal.load(funcfile)
        except EOFError:
             break

        if isinstance(code,types.StringType):
            print "module name:" + code
            if code == 'sandbox':
                current_module = "sandbox"
            else:
                current_module = imp.new_module(code)
                dynamic_modules[code] = current_module
                exec 'import '+code in sandbox_module.__dict__
        elif isinstance(code,types.CodeType):
            print "func"
            if current_module == "sandbox":
                func = types.FunctionType(code, sandbox_module.__dict__, code.co_name)
                setattr(sandbox_module, code.co_name, func)
            else:
                func = types.FunctionType(code, current_module.__dict__, code.co_name)
                setattr(current_module, code.co_name, func)
        else:
            raise Exception( "unknown type received")

#yaa! actually invoke the method
sandbox_module.f()
del sandbox_module 
```

例如，函数图在序列化之前如下所示：

```
 module name:sandbox
 ('f', <function f at 0x15e07d0>)
 ('z', <function z at 0x7f47d719ade8>)
 module name:test_module
 ('g', <function g at 0x15e0758>)
 ('z', <function z at 0x7f47d719ade8>)
 module name:third_level_module
 ('z', <function z at 0x7f47d719ade8>) 
```

具体来说，查看函数 z 我们可以看到所有引用都指向同一个地址，即 0x7f47d719ade8。

在沙盒重建后的远程进程上，我们有：

```
 print sandbox_module.z 
 <function z at 0x1a071b8>
 print sandbox_module.third_level_module.z 
 <function z at 0x1a072a8>
 print sandbox_module.test_module.z 
 <function z at 0x1a072a8> 
```

这让我大吃一惊！我原以为这里的所有地址在重建后都是唯一的，但由于某种原因 sandbox_module.test_module.z 和 sandbox_module.third_level_module.z 有相同的地址？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T23:20:22.773

*   您可能不想序列化从 Python 库导入的函数，例如数学函数或混合 Python + C 的大包，但您的代码会将其序列化。它们没有 func_code 属性等可能会导致不必要的问题。
*   您不需要重复序列化之前已序列化的函数。您可以发送全名并根据此导入它们。这就是您在内存中多次使用它的原因。
*   原始格式`<module_name> <serialized_func1> <serialized_func2>...`不够通用。一个函数可以在本地机器上通过“... import ... as ...”子句以不同的名称导入。您可以序列化混合字符串和代码对象的元组列表。

暗示

```
def some_filter(module_name):
    mod_path = sys.modules[module_name].__file__
    # or if getattr(sys.modules[module_name], 'some_my_attr', None)
    return not mod_path.startswith('/usr/lib/python2.7/')

dumped_funcs = {}

def dump_module(...
    ...
    data = []
    for func_name, func_obj in functions_list:
        if some_filter(func_obj.__module__) and not func_obj in dumped_funcs and \
                    hasattr(func_obj, 'func_code'):
            data.append((func_name, func_obj.func_code))
            dumped_funcs[func_obj] = True  # maybe later will be saved package.mod.fname
        else:
            data.append((func_name, '%s.%s' % (func_obj.__module__, \
                                               func_obj.func_code.co_name)))
    marshal.dump(data, funcfile) 
```

现在沙盒和其他序列化模块之间没有重要区别。条件“如果沙箱”可以很快被删除。

# mobile - textarea上的弹出层

> ID：10099327
> 
> 赞同：0
> 
> 时间：2012-04-11T03:15:40.927
> 
> 标签：mobile, mobile-website

我的项目是一个移动网络。在首页中间有一个textarea，当用户点击一个按钮时，会跳出一个弹出层。

但是，该层被textarea覆盖，如果用户单击弹出层上的一个元素，该层下的textarea将获得焦点。

如何防止这个文本区域获得焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:21:39.953

你能发布一个说明问题的代码片段吗？另外，您使用的是哪种移动设备和浏览器？

一种可能的解决方案是设置弹出窗口和文本区域的 CSS`z-index`属性。将`z-index`弹出窗口的值设置为高于 textarea 的值，使其显示在顶部。

# mediawiki - 文章仅在用户登录时显示

> ID：10099328
> 
> 赞同：1
> 
> 时间：2012-04-11T03:15:42.503
> 
> 标签：mediawiki

我管理一个 mediawiki，但我遇到了一个我无法解决或在任何地方找到任何信息的问题。问题是在我的 wiki 上创建的新文章只显示给已登录的用户。如果用户使用搜索，他们可以在那里找到它们，但如果他们拉出一个类别中的所有列表，那么它们就不会显示那里。它们也不会出现在语义列表中。这是一个问题，因为这些文章是不易搜索的报告，因此我们依靠类别页面来查找我们正在寻找的内容。对此的任何帮助将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:36:07.443

几周前我碰巧遇到了这个确切的问题。解决方案是关闭 wiki 的缓存。我正在为我的网站使用简单的文件缓存，但它开始出现与您遇到的相同问题。我不知道 MediaWiki 的缓存是如何工作的，但似乎缓存正在为未登录的用户提供过时的数据（请注意如何仅对某些用户和页面执行缓存，如此[处](http://www.mediawiki.org/wiki/Manual%3aFile_cache#Domain_and_range)所述）。刷新页面和更改其内容似乎没有帮助，在数据库中手动编辑页面的类别链接也没有帮助。

就我而言，解决方法是改变

```
$wgUseFileCache = true; 
```

到

```
$wgUseFileCache = false; 
```

我宁愿保持缓存以提高速度（如果我确切地弄清楚发生了什么，我会的），但我宁愿让用户看到正确的内容。

显然，如果您使用不同的缓存系统，关闭缓存的方法会有所不同。如果问题不是缓存，那么我不确定它可能是什么，尽管通过暂时关闭它至少可以消除一个变量并更容易找出潜在问题。

# node.js - 使用 nodejs 进行 Google 身份验证

> ID：10099341
> 
> 赞同：22
> 
> 时间：2012-04-11T03:19:05.027
> 
> 标签：node.js, oauth, google-api, redirect

我正在尝试使用我的 node.js 服务器访问 Google 身份验证 API，但我只是找不到方法。基本上，我希望用户到达我的登录页面，单击身份验证按钮，然后服务器将他重定向到 Google API，用户允许我的应用访问他的数据，然后 Google API 将用户重定向到我的网站授权令牌。

我已经设置了 oauth2 所需的 url，它似乎可以工作（如果我将它粘贴到我的网络浏览器中，它会将我重定向到谷歌授权页面）。我看到[这篇文章](https://stackoverflow.com/questions/6234380/nodejs-redirect-url)似乎回答了我的问题，但我不知道如何处理快速代码部分。

这是我正在使用的代码：

```
https.get(options, function(res) {
    var retrieved_data = '';
    res.on('data', function(data) { retrieved_data += data; });
    res.on('end', function() { 
        // FIXME
        client_response.writeHead(302, {"Content-Type" : "text/plain", "Location" : res.headers.location});
        client_response.end(retrieved_data);    
    });
}); 
```

但是此方法在我的客户端页面上返回错误（由我的 ajax 请求的错误字段引发）。如果我在没有“位置”信息的情况下将 HTTP 代码更改为 200，它会在客户端上显示一个“临时移动”页面，并带有一个将我重定向到 Google API 授权页面的按钮。

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T12:50:28.310

我建议使用现有模块来完成该任务。[everyauth](https://github.com/bnoguchi/everyauth)是一个模块，它不仅允许 oauth2 访问 Google，还允许访问大多数其他提供它的平台。我在我的项目中使用它来访问 Twitter。它也有`express`集成。

[您可以在The Node Toolbox](http://nodetoolbox.com/categories/Authentication)中寻找更多替代方案。想到护照。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-03T14:18:57.740

正如 Burcu Dogan 所说，谷歌已经发布了一个用于访问谷歌 API 的官方客户端库。可以在这里找到：[https ://github.com/google/google-api-nodejs-client/](https://github.com/google/google-api-nodejs-client/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-01T10:37:20.827

我在[Passport](http://passportjs.org/)上取得了不错的成绩（与 MS 身份验证方案无关！）。我最初尝试了everyauth，但 IMO 护照更适合 expressjs 约定。

有一个可供使用的 Google 身份验证提供程序：http: [//passportjs.org/guide/google/](http://passportjs.org/guide/google/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-23T05:25:53.533

您可能想在这里查看我的 Node.JS + Google Calendar 项目： [https ://github.com/berryboy/google-calendar](https://github.com/berryboy/google-calendar)

我还有一些使用 google oauth 的示例。

# iphone - 无法专注于文本字段

> ID：10099347
> 
> 赞同：-1
> 
> 时间：2012-04-11T03:19:54.197
> 
> 标签：iphone, objective-c, ios, ios5, xcode4

在我的项目中，我将视图设置为我的应用程序的根视图。

在这个根视图的控制器中，我得到了这样一个层次结构：

> 根视图--[添加子视图]-- 前景视图--[添加子视图]-- 文本字段

我已经在代码而不是 xib 中做到了这一点。

在这种情况下，文本字段无法获得焦点。当我单击屏幕上的文本字段时，似乎什么也没发生。但如果我这样修改：

> rootview --[addsubview]--foregroundView
> 
> 根视图--[添加子视图]-- 文本字段

一切正常。

由于我想将 foregroundView 和 textfield 作为一个组，我更喜欢使用前一种样式。有人知道吗？非常感谢。

这是我的麻烦的核心源代码：

```
//it's a viewController.m , it's view has been set as the root view for the app.
self.foregroundView = [[UIImageView alloc] initWithFrame:CGRectMake(15, 140, 290, 250)]; 
UIImage *foregroundImage = [XYZImageProcessor resizeImage:[UIImage imageNamed:@"Texture0203.jpg"] toSize:CGSizeMake(275, 250)];
[self.view addSubview:self.foregroundView ];
self.nickNameTextField = [self.class customTextFieldMake:CGRectMake(80, 200, 150, 30)];
[self.view addSubview:self.nickNameTextField];
//if I change it to    [self.foregroundView addSubview:self.nickNameTextField],the textfield can not be focused. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:06:57.677

这听起来好像您`foregroundView`已`userInteractionEnabled`设置为 NO。这不仅仅意味着它`foregroundView`不接收触摸事件——它的子视图也没有。请参阅[当父视图在 iOS 中将 userInteractionEnabled 设置为 NO 时如何进行触摸](https://stackoverflow.com/q/4661589/1318452)。（简短的回答：你不能。）

`[foregroundView setUserInteractionEnabled:YES]`因此，在构建视图时尝试设置。

如果`foregroundView`实现它自己的`hitTest:withEvent:`，它也可以防止与它的子视图交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:35:12.953

尝试在**viewWillAppear 中执行此操作：**

```
[desiredField becomeFirstResponder]; 
```

通过使该字段成为第一响应者，它具有焦点并且将显示键盘。

# css - CSS 设置锚点图像源

> ID：10099353
> 
> 赞同：0
> 
> 时间：2012-04-11T03:21:29.787
> 
> 标签：css

假设我有一个链接如下：

```
 <a class="addthis_button_facebook"></a> 
```

是否可以在 css 中设置这个链接的 img 属性，所以最终看起来像：

```
<a class="addthis_button_facebook"><img src="twitter.png" /></a> 
```

就像我试过的

一个 img { 背景颜色：黑色；}

但没有快乐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:24:25.130

您是否要为锚点设置背景？

```
a.addthis_button_facebook { background:url('twitter.png') no-repeat; display:block; width:32px; height:32px; } 
```

虽然公平... facebook 按钮应该使用 facebook 图标 ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T04:02:05.943

嘿，您可以在锚标记中定义背景图像，并给左填充，并根据图像高度给出行高，如下所示。

**CSS**

```
.addthis_button_facebook{
    background:url('http://dummyimage.com/50/000/fff.jpg') no-repeat 0px 0px;
    padding-left:60px;
    display:inline-block;
    line-height:50px;
}​ 
```

**HTML**

```
<a class="addthis_button_facebook">Hello this is your link</a>​ 
```

现场演示[http://jsfiddle.net/rohitazad/PQ4q2/](http://jsfiddle.net/rohitazad/PQ4q2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T03:28:08.733

链接没有“img”属性。

如果您只是尝试使用图像作为链接，为什么不按照您在第二个块中使用它的方式进行操作，将`img`标签放在标签内`a`？

要使用 CSS 将图像设置为背景，您可以这样做

```
a.addthis_button_facebook {
    background-image:url('twitter.png');
} 
```

# php - 这是逃避多个领域的正确方法吗？

> ID：10099356
> 
> 赞同：0
> 
> 时间：2012-04-11T03:22:03.217
> 
> 标签：php, security, mysql-real-escape-string

我刚刚雇了一个人来做一个安全的表格，下面粘贴的只是一段大代码：

```
 $_POST = escape_all($_POST);

        $some1 = $_POST['some1'];
        $some2 = $_POST['some2'];
        $some3 = $_POST['some3'];
        $some4 = $_POST['some4'];
        $some5 = $_POST['some5'];
        $some6 = $_POST['some6'];
        $some7 = $_POST['some7'];
        $some8 = $_POST['some8']; 
```

这是正确的方法还是我应该添加 mysql_real_escape_string(); 对所有变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:26:42.620

看起来他编写了一个自定义函数来逃避。只要该 escape_all 函数调用 mysql_real_escape 字符串，它在技术上就可以工作，尽管出于某些原因我不会说它是首选解决方案。

首先，您要小心不要在其他任何地方转义，因为它很容易导致双重转义，从而导致其他问题。

此外，如果性能是一个问题，您最终可能会转义大量不需要转义的数据，具体取决于具体情况。

是的，使用 mysqli 而不是 mysql 通常更可取。

# ruby - 私有方法、继承和元编程？

> ID：10099362
> 
> 赞同：1
> 
> 时间：2012-04-11T03:22:36.977
> 
> 标签：ruby, metaprogramming

我定义了以下内容：

```
#!/usr/bin/env ruby

class Something
  def self._attr_accessor key, value, type
    (class << self; self; end).send( :attr_accessor, key.to_sym)
    instance_variable_set "@#{key}", value
  end
end

class Client < Something
  _attr_accessor 'foo_bar', 'json', String
end

my_something = Client.new
puts my_something.foo_bar 
```

但我收到以下错误：

```
/test_inheritance.rb:18:in `<class:Client>': undefined method `foo_bar' for Client:Class (NoMethodError)
    from ./test_inheritance.rb:14:in `<main>' 
```

我正在做的一些元编程工作：

```
#!/usr/bin/env ruby
class Something
  def self._attr_accessor key, value, type
    (class << self; self; end).send( :attr_accessor, key.to_sym)
    instance_variable_set "@#{key}", value
  end
end

class Client < Something
  _attr_accessor 'foo_bar', 'json', String

  puts self.foo_bar
end

my_something = Client.new

#puts my_something.foo_bar 
```

因为它输出正确的结果。但是如何定义 _attr_accessor 方法以便我能够公开访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:44:52.993

尝试将您的方法替换为：

```
class Something

  def self._attr_accessor key, value, type
    method_sym      = key.to_sym
    insance_variable = "@#{key}"

    (class << self; self; end).send( :attr_accessor, method_sym)
    instance_variable_set insance_variable, value

    attr_accessor method_sym

    define_method(method_sym) do 
        self.instance_variable_get(insance_variable) or self.class.send(method_sym) 
    end

  end

 end 
```

* * *

```
 define_method(method_sym) do 
    self.instance_variable_get(insance_variable) or self.class.send(method_sym) 
 end 
```

上面代码中，**define_method**是为Someting定义一个实例方法，方法名是key，如

```
 attr_accessor "foo_bar", "json", String 
```

那么**define_method**生成的代码是：

```
 def foo_bar
    if @foo_bar
       @foo_bar
    else
      self.class.foo_bar
    end        
 end 
```

另外，ActiveSupport 有 **attr_accessor_with_default**方法，好像也是这个功能。请参考它的代码：

```
class Module
# Declare an attribute accessor with an initial default return value.t>:
#
#   class Person
#     attr_accessor_with_default :age, 25
#   end
#
#   person = Person.new
#   person.age # => 25
#
# To give attribute <tt>:element_name</tt> a dynamic default value, evaluated
# in scope of self:
#
#   attr_accessor_with_default(:element_name) { name.underscore }
#
def attr_accessor_with_default(sym, default = Proc.new)
  define_method(sym, block_given? ? default : Proc.new { default })
  module_eval(<<-EVAL, __FILE__, __LINE__ + 1)
    def #{sym}=(value)
      class << self; attr_accessor :#{sym} end
      @#{sym} = value
    end
  EVAL
end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:45:20.660

`format`对于一个人，我认为您正在绊倒一个保留方法的事实，`Class`并且它与您的`attr_accessor`尝试相冲突。

其次，有更好的方法来做到这一点。我为我正在处理的项目制作了一个相当强大的“访问器”实用程序类。它允许您定义类级别的默认值并仍然覆盖实例定义。

实现如下所示：

```
module OptionAccessor
  # Given a list of names, this declares an option accessor which works like
  # a combination of cattr_accessor and attr_accessor, except that defaults
  # defined for a class will propagate down to the instances and subclasses,
  # but these defaults can be over-ridden in subclasses and instances
  # without interference. Optional hash at end of list can be used to set:
  #  * :default => Assigns a default value which is otherwise nil
  #  * :boolean => If true, creates an additional name? method and will
  #                convert all assigned values to a boolean true/false.
  def option_accessor(*args)
    option_reader(*args)
    option_writer(*args)
  end

  # Given a list of names, this declares an option reader which works like
  # a combination of cattr_reader and attr_reader, except that defaults
  # defined for a class will propagate down to the instances and subclasses,
  # but these defaults can be over-ridden in subclasses and instances
  # without interference. Optional hash at end of list can be used to set:
  #  * :default => Assigns a default value which is otherwise nil
  #  * :boolean => If true, creates an additional name? method and will
  #                convert all assigned values to a boolean true/false.
  def option_reader(*names)
    names = [ names ].flatten.compact
    options = names.last.is_a?(Hash) ? names.pop : { }

    names.each do |name|
      iv = :"@#{name}"

      (class << self; self; end).class_eval do
        if (options[:boolean])
          define_method(:"#{name}?") do
            iv_value = instance_variable_get(iv)

            !!(iv_value.nil? ? (self.superclass.respond_to?(name) ? self.superclass.send(name) : nil) : iv_value)
          end
        end

        define_method(name) do
          iv_value = instance_variable_get(iv)

          iv_value.nil? ? (self.superclass.respond_to?(name) ? self.superclass.send(name) : nil) : iv_value
        end
      end

      define_method(name) do
        iv_value = instance_variable_get(iv)

        iv_value.nil? ? self.class.send(name) : iv_value
      end

      if (options[:boolean])
        define_method(:"#{name}?") do
          iv_value = instance_variable_get(iv)

          !!(iv_value.nil? ? self.class.send(name) : iv_value)
        end
      end

      instance_variable_set(iv, options[:default])
    end
  end

  # Given a list of names, this declares an option writer which works like
  # a combination of cattr_writer and attr_writer, except that defaults
  # defined for a class will propagate down to the instances and subclasses,
  # but these defaults can be over-ridden in subclasses and instances
  # without interference. Options can be specified:
  #  * :boolean => If true, converts all supplied values to true or false
  #                unless nil, in which case nil is preserved.
  def option_writer(*names)
    names = [ names ].flatten.compact
    options = names.last.is_a?(Hash) ? names.pop : { }

    names.each do |name|
      iv = :"@#{name}"

      (class << self; self; end).class_eval do
        if (options[:boolean])
          define_method(:"#{name}=") do |value|
            instance_variable_set(iv, value.nil? ? nil : !!value)
          end
        else
          define_method(:"#{name}=") do |value|
            instance_variable_set(iv, value)
          end
        end
      end

      if (options[:boolean])
        define_method(:"#{name}=") do |value|
          instance_variable_set(iv, value.nil? ? nil : !!value)
        end
      else
        define_method(:"#{name}=") do |value|
          instance_variable_set(iv, value)
        end
      end
    end
  end
end 
```

# javascript - for...in 循环和原型链

> ID：10099374
> 
> 赞同：1
> 
> 时间：2012-04-11T03:24:18.190
> 
> 标签：javascript

我们知道 for..in 循环不关心属性是否是对象原型链的属性。所以它会全部输出属性。让我们做一个测试

```
var o={};
for(var i in o){
    console.log(o[i]);//  output  none
} 
```

一个对象（通过这种方式创建：{}）来自Object，
但是当我们运行代码时，没有输出Object原型链方法（如toString）
为什么没有输出Object原型链中的方法（toString） ？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T03:27:32.383

`toString`不可[枚举](http://es5.github.com/#x8.6.1)：

```
("toString" in {}) === true
({}).propertyIsEnumerable("toString") === false 
```

您可以创建自己的不可枚举属性，如下所示：

```
var object = {};

Object.defineProperty(object, "property", { enumerable: false, value: 5 }); 
```

[从技术上讲，您可以省略`enumerable: false`, 因为这是默认设置。]

* * *

这在第 15 条总括条款[的规范中有所说明：](http://es5.github.com/#x15)

> 在任何情况下，本节中描述的内置`Function`对象的长度属性都具有属性`{ [[Writable]]: false, [[Enumerable]]: false, [[Configurable]]: false }`。**除非另有说明，否则****本节中描述的所有其他属性都具有属性。`{ [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true }`**

# .net - VB.NET 控制台应用程序中的关闭函数

> ID：10099377
> 
> 赞同：2
> 
> 时间：2012-04-11T03:24:29.957
> 
> 标签：.net, vb.net, console-application, exit, exit-code

当使用时检测到控制台关闭时，如何触发功能`Environment.Exit(0)`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T03:35:28.233

最简单的方法可能是处理应用程序父进程退出时引发的[`AppDomain.ProcessExit`事件。](http://msdn.microsoft.com/en-us/library/system.appdomain.processexit.aspx)

例如：

```
Module MyApp

    Sub Main()
        ' Attach the event handler method
        AddHandler AppDomain.CurrentDomain.ProcessExit, AddressOf MyApp_ProcessExit

        ' Do something
        ' ...

        Environment.Exit(0)
    End Sub

    Private Sub MyApp_ProcessExit(sender As Object, e As EventArgs)
        Console.WriteLine("App Is Exiting...")
    End Sub

End Module 
```

但是打电话`Environment.Exit`可能不是解决您最初问题的最佳方法。通常，[唯一需要使用此方法的情况是可能有其他前台线程正在运行](https://stackoverflow.com/a/692371/366904)。在这种情况下，值得研究如何优雅地终止那些其他线程，而无需采取严厉措施来杀死整个进程。

`Environment.Exit`，尽管这个名字听起来有些悦耳，但却是一个相当残酷的措施。它不像在 Windows 任务管理器中单击“结束任务”那么糟糕（请注意，如果您这样做*，*则`ProcessExit`不会引发事件，这意味着上述建议将不起作用），但这可能不是您真正的解决方案想要，要么。

# java - 2D OpenGL 盒子上的精灵，java

> ID：10099380
> 
> 赞同：0
> 
> 时间：2012-04-11T03:25:08.173
> 
> 标签：java, opengl, jogl

我想让这个盒子成为一张与这个盒子的属性相同的图片。我真的只想在上面叠加一张图片。建议？

```
public void draw(GLAutoDrawable gld) {
        final GL2 gl = gld.getGL().getGL2();
        // set color
        gl.glColor3d(0.1, 0.0, 0.9);
        // draw the object
        gl.glBegin(GL2.GL_QUADS);
        // x, y, z coordinates of the corners
        gl.glVertex3d(posx-size, posy-size, 0);
        gl.glVertex3d(posx+size, posy-size, 0);
        gl.glVertex3d(posx+size, posy+size, 0);
        gl.glVertex3d(posx-size, posy+size, 0);
        gl.glEnd();
    } 
```

# zend-framework - Zend 布局占位符在哪里？

> ID：10099385
> 
> 赞同：0
> 
> 时间：2012-04-11T03:25:36.253
> 
> 标签：zend-framework, placeholder

我已经阅读了这篇关于占位符的文章。以前，我将一堆文件包含在我的视图脚本中。之后变得复杂，因为我必须考虑上下文并且没有一个很好的解决方案。

我猜这就是占位符的用武之地。我已经阅读了[zend 文章](http://devzone.zend.com/1235/view-helpers-in-zend-framework/)。我读过的文章都没有非常具体地说明我放置占位符的位置。他们应该放在哪个文件夹中？

请原谅我对zend仍然很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:02:29.673

基本上，您将在控制器/视图中的某处捕获一个块，然后将其显示在模板/布局中。

我认为这个[Zend Doc 示例更有意义](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)。

```
// before the view is displayed
// you can use other methods to render the templates into placeholder for later use
<?php $this->placeholder('foo')->set("Some text for later") ?>

// most like somewhere in the view
<?php
    echo $this->placeholder('foo');
    // outputs "Some text for later"
?>
or 
<?= $this->placeholder('sidebar') ?> 
```

# sql - sql查询按月返回显示

> ID：10099389
> 
> 赞同：2
> 
> 时间：2012-04-11T03:26:05.160
> 
> 标签：sql, pivot

我正在尝试生成一个基于月份返回结果的查询。

例如：表 1

```
Name     Amount   createDate
p1        100      01/01/2012
p1         50      02/01/2012
p1        200      03/01/2012
p3        100      04/01/2012 
```

查询应返回：

```
Name Jan   Feb   Mar   April
p1   100   50    200    0
p2    0     0     0    100 
```

任何建议或任何想法如何做到这一点。

我正在使用 db2 数据库。抱歉遗漏了详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:36:31.027

像这样的东西可能会起作用......

```
select
  name, 
  case when month(createDate) = '1' then amount end as Jan,
  case when month(createDate) = '2' then amount end as Feb
  --etc...
from
  table1
group by
  name
; 
```

但是，日期相等性测试可能无法通过。就像其他人说的那样，您可能必须查找日期功能并找到适合您需求的功能。

# python - Python 2.7 PIL打开JPEG格式的图片错误，Mac Lion

> ID：10099391
> 
> 赞同：0
> 
> 时间：2012-04-11T03:26:31.307
> 
> 标签：python, osx-lion, python-imaging-library

我试过[http://mail.python.org/pipermail/image-sig/2010-June/006313.html](http://mail.python.org/pipermail/image-sig/2010-June/006313.html)，但我仍然收到错误

```
dreampuf@HX:~/hub/lweibo$ python2.7 lweibo.py 
Traceback (most recent call last):
  File "lweibo.py", line 235, in <module>
    lweibo_render(107906)
  File "lweibo.py", line 228, in lweibo_render
    p = LPic(a_body, a_title, a_ukey_nickname, a_ukey_img, a_create)
  File "lweibo.py", line 114, in __init__
    a_ukey_img.save("s.png", "PNG", qualty=100)
  File "/Users/dreampuf/opt/macports/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Pillow-1.7.7-py2.7-macosx-10.7-x86_64.egg/PIL/Image.py", line 1406, in save
    self.load()
  File "/Users/dreampuf/opt/macports/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Pillow-1.7.7-py2.7-macosx-10.7-x86_64.egg/PIL/ImageFile.py", line 215, in load
    raise_ioerror(e)
  File "/Users/dreampuf/opt/macports/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Pillow-1.7.7-py2.7-macosx-10.7-x86_64.egg/PIL/ImageFile.py", line 52, in raise_ioerror
    raise IOError(message + " when reading image file")
IOError: broken data stream when reading image file 
```

然后我尝试使用Macports安装jpeg6b，但它提醒我，jpeg6b版本太旧并重命名为jpeg

```
dreampuf@HX:~/lweibo$ sudo port install jpeg6b
Password:
--->  Configuring jpeg6b
Error: jpeg6b has been renamed to jpeg. Please install jpeg instead.
Error: Target org.macports.configure returned: obsolete port
Log for jpeg6b is at: /Users/dreampuf/opt/macports/var/macports/logs/_Users_dreampuf_opt_macports_var_macports_sources_rsync.macports.org_release_tarballs_ports_graphics_jpeg6b/jpeg6b/main.log
Error: Status 1 encountered during processing.
To report a bug, see <http://guide.macports.org/#project.tickets> 
```

但是jpeg的版本是8d。

```
 dreampuf@HX:~/hub/lweibo$ port installed jpeg
 The following ports are currently installed:
  jpeg @8d_0 (active) 
```

我知道这个错误的原因。但我无法在我的系统中安装 jpeg6b ，**或者无法重新安装 PIL 以使用 jpeg6b**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:43:18.590

我不明白您写出 PNG 的第一个示例与讨论 jpeg 问题之间的相关性。

如果您的 libjpeg 依赖于 macports，那么为什么不使用它来安装 PIL 呢？
在构建 PIL 时，您可以告诉它在哪里寻找 JPEG 库： `export JPEG_ROOT=/usr/local/include`

我建议删除 PIL，删除 libjpeg... 然后重新安装最新的 jpeg，然后重建 PIL。

尝试使用 pip 安装 PIL：`pip install -U PIL`

# mysql - 如何使用 BLToolkit 通过 id 列表获取对象列表？

> ID：10099392
> 
> 赞同：1
> 
> 时间：2012-04-11T03:26:38.237
> 
> 标签：mysql, linq-to-sql, bltoolkit

我正在尝试编写将转换为以下查询的代码：

```
SELECT * FROM players WHERE Id IN (xxx) 
```

对于 MS-SQL 和 linq2sql，我使用了“包含”结构，效果很好。

现在（对于 MySQl 和 BLToolkit）我这样做了：

```
 public static IList<Player> GetPlayersByIds(IList<int> ids, DbManager db)
    {
        return db.GetTable<Player>().Where(pl => ids.Contains(pl.Id)).ToList();
    } 
```

但此代码的执行返回以下错误：

> value(vfm_elita.elita_table.player.Player+<>c__DisplayClass13).ids.Contains(pl.Id)' 无法转换为 SQL。

有什么解决办法吗？

如果不是，如何通过 ID 列表查询对象列表？

非常感谢，欢迎任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:52:38.637

看起来我的 BLToolkit 旧版本有一个错误。得到 4.1（完全重写 linq2sql 转换器）后问题得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:51:11.037

您也可以在 BLToolkit 中使用 Contains，检查 BLToolkit 源中的文件 ..\UnitTests\Linq\Functions.cs 以获取一些使用 contains 的单元测试

我认为（未经测试）您当前代码的问题是使用 IList 只需使用 List 尝试

```
public static IList<Player> GetPlayersByIds(List<int> ids, DbManager db)
{
    return db.GetTable<Player>().Where(pl => ids.Contains(pl.Id)).ToList();
} 
```

# java - 我可以使用什么来为在 tomcat 上运行的 java servlet 中的每个会话实现后台进程？

> ID：10099394
> 
> 赞同：3
> 
> 时间：2012-04-11T03:26:43.413
> 
> 标签：java, ajax, tomcat, servlets, dojo

我希望定期为每个具有会话的用户运行一个函数，以检查用户是否处于活动状态。如果未激活，该函数将从 servlet 上下文中的用户列表中删除用户并清除用户会话。

我可以使用什么来为每个用户定期运行该功能？

据我了解，servletcontextlistener 在 servlet 的生命周期内只运行一次，而不是为每个用户运行一次，因此它不可用。此外，建议不要在 servlet 中使用线程。

编辑：用户（使用 ajax）调用一个操作，其中包含更新我为每个用户存储的变量的函数，该变量指示他们最后一次联系服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:40:00.767

您可能正在寻找`javax.servlet.http.HttpSessionListener`. 创建一个，注册它`web.xml`并让`sessionDestroyed`你做你的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:53:41.517

我可以想到两种方法：

1.  使用 request.getSession().setMaxInactiveInterval(someValue)

2.  由于您使用的是 ajax，因此您不妨发送实际的“终止会话”请求，而不是发送“用户活动”值。这意味着更少的 http 调用，因为用户是否处于活动状态的逻辑在客户端，而实际的“会话终止”逻辑在后端。所以这里是场景：

    Javascript 代码每分钟运行一次以检查用户是否处于活动状态（不确定您实际在看什么，但那是另一回事）。如果在 5 分钟后用户没有在客户端执行任何操作，那么将向后端发送一个 ajax 调用以终止会话。

# objective-c - 尝试为 viewController 转换 iOS4 设置自定义动画时出错

> ID：10099395
> 
> 赞同：3
> 
> 时间：2012-04-11T03:26:58.607
> 
> 标签：objective-c, uinavigationcontroller, uiviewanimationtransition

我正在构建一个 iPhone 应用程序，并且我已经实现了一个关于该应用程序主题的知识库部分。我使用了表格视图和导航视图控制器，以便在选择表格中的任何单元格时，将创建一个新的视图控制器并将其添加到导航堆栈中。

我尝试自己实现向上/向下卷曲动画，但在运行时出现此错误

> 父视图控制器在调用 -[UIViewController transitionFromViewController:toViewController:duration:options:animations:completion:]' 时使用了遗留容器

这是代码示例

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

// change the accessory button to activity indicator
UITableViewCell *cell = [mTableView cellForRowAtIndexPath:indexPath];

SomeViewController *ad = [[SomeViewController alloc] initWithNibName:@"SomeViewController" bundle:[NSBundle mainBundle]];
ad.title = cell.textLabel.text;

[self.navigationController addChildViewController:ad];
[self.navigationController transitionFromViewController:self toViewController:ad duration:0.7 options:UIViewAnimationOptionTransitionCurlUp animations:^{} completion:^(BOOL completed){
    [ad release];
}]; 
```

非常感谢任何帮助、建议和提示！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T00:30:49.380

嘿，当我的自定义包含视图控制器是 UINavigationViewController 的子类时，我遇到了同样的异常。当我让我的容器 vc 成为 UIViewController 的子类时，它就像一个魅力。你的问题可能不一样。来自苹果文档：

> 此方法仅供自定义容器视图控制器的实现调用。如果你重写这个方法，你必须在你的实现中调用 super。

您在 UINavigationViewController 实例上调用此方法，而不是在自定义容器视图控制器的实例上。

# c# - 从 gridview 获取底层 ObjectDataSource

> ID：10099396
> 
> 赞同：0
> 
> 时间：2012-04-11T03:27:04.323
> 
> 标签：c#, asp.net, datagridview

我有一个绑定到 ObjectDataSource 的 gridview，包括一个用于选择网格中项目的复选框。

在 CheckChanged 事件中，我有一些这样的代码：

```
 //Clear the existing selected row
        foreach (GridViewRow oldrow in uxRaceList.Rows)
        {
            var otherOpt = (RadioButton)oldrow.FindControl("rdbRaceNum");
            if (otherOpt != sender)
                otherOpt.Checked = false;
        }

        //Set the new selected row
        RadioButton rb = (RadioButton)sender;
        GridViewRow row = (GridViewRow)rb.NamingContainer;
        ((RadioButton)row.FindControl("rdbRaceNum")).Checked = true; 
```

现在我有了对 GridViewRow 的引用，我是否可以访问我的 OrigionalDataSourceObject？

我知道我可以获取网格中显示的数据：

```
_selectedRaceNum = Convert.ToInt32(rb.Text.Substring(0, 1)); 
```

但我想要类似的东西：

var odsMyobject = row.DataItem as MyCustomObject;

我知道我可以在网格中存储一个 ID 并使用它来回顾我的数据库以获取数据，但我想避免再次往返数据。

也许我可以以某种方式向 ObjectDataSource 询问对象？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:06:01.807

我可能会误解您的问题，但是如果您希望数据对象绑定到该特定 GridViewRow，您应该能够只使用 DataItem 属性来获取它。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.dataitem.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.dataitem.aspx)

> 获取 GridViewRow 对象绑定到的基础数据对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:32:20.247

> **您的问题 -**既然我有对 GridViewRow 的引用，我是否可以访问我的 OrigionalDataSourceObject？

您`GridView` `DataSource Object`将`Disposed`在`Page Life Cycle`. 您可以在`Quick Watch`加载后`Postback`检查它。`Page`

* * *

> **你的问题 -**我知道我可以在网格中存储一个 ID 并使用它来回顾我的数据库以获取数据，但我想避免再次往返数据。

您可以选择在`ViewState`. 如果仅将数据保留在同一页面中，则应仅考虑。`Session``Postback``ViewState`

* * *

> **你的问题 -**但我想要类似的东西：
> 
> var odsMyobject = row.DataItem as MyCustomObject;

您可以使用`DataKeys`in并且可以使用您已经计算`GridView`过的 轻松访问它。另一个选项/替代方案是隐藏控件及其与您的并访问此控件，如下所示。`RowIndex``NamingContainer``Bind``Property`

```
((ControlType)row.FindControl("ControlID")). 
```

# java-native-interface - 使用 SWIG %native 函数编译错误

> ID：10099397
> 
> 赞同：0
> 
> 时间：2012-04-11T03:27:05.940
> 
> 标签：java-native-interface, swig

我正在尝试使用 SWIG %native 函数编译本机 JNI 调用，并且我得到头文件的以下异常。我在下面的 makefile 中同时包含 jdk-1.6.0_30/include 和 jdk-1.6.0_30/include/linux，有什么想法吗？我在 32 位 linux 上编译。

**样本.h：**

```
JNIEXPORT jobject JNICALL Java_test_jni_GetData (JNIEnv *, jclass); 
```

**SWIG.i：**

```
%module Sample
%{
   #include "Sample.h"
%}
%include "Sample.h"
%typemap(jstype) DeviceId getID "com.test.jni.DeviceId"
%typemap(jtype) DeviceId getID "com.test.jni.DeviceId"
%typemap(javaout) DeviceId getID { return $jnicall; }
%native(getID) DeviceId getID(); 
```

**例外：**

```
[exec]Sample.h: Error: Syntax error in input(1).
[exec] make-3.79.1-p7: *** [sample_wrap.c] Error 1 
```

**Makefile（不完整的文件）：**

```
 PACKAGE_DIR = src/java/com/test/jni
     PACKAGE = com.test.jni
     INCLUDES = -I/user/java/jdk-1.6.0_30/include/linux \
                -I/user/java/jdk-1.6.0_30/include \
                -I/user/src/include #Sample.h resides here
     CFLAGS = -Wall -fpic $(INCLUDES) -O0 -g3
     SFLAGS = -java $(INCLUDES) -package $(PACKAGE) -outdir $(PACKAGE_DIR) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:58:29.353

我认为你的顺序错误。你需要**先**写：

```
%{
JNIEXPORT jobject JNICALL Java_test_jni_GetData(JNIEnv *, jclass);
%} 
```

这样当你写：

```
%native (GetData) jobject GetData(); 
```

SWIG 将生成的包装器代码中已经存在函数的声明。

* * *

`%include`如果Sample.h 中包含本机函数，则不能直接这样。SWIG 预处理器不知道 JNIEXPORT 或 JNICALL 是什么——它们看起来像语法错误，除非它们是作为宏给出的。

我建议将本机函数放在一个单独的头文件中，然后你*只需要* `#include`，而不是`%include`那个文件。

如果您没有打开几个选项，则从 SWIG 隐藏本机功能，例如：

```
#ifndef SWIG
JNIEXPORT jobject JNICALL Java_test_jni_GetData (JNIEnv *, jclass);
#endif 
```

在头文件中将起作用，或者您可以修改接口文件以使 SWIG 忽略 JNIEXPORT 和 JNICALL：

```
%module Sample
%{
   #include "Sample.h"
%}
#define JNIEXPORT
#define JNICALL
%include "Sample.h"
%typemap(jstype) DeviceId getID "com.test.jni.DeviceId"
%typemap(jtype) DeviceId getID "com.test.jni.DeviceId"
%typemap(javaout) DeviceId getID { return $jnicall; }
%native(getID) DeviceId getID(); 
```

尽管在那种情况下 SWIG 会尝试包装它并采用`%native`可能不是您想要的指令！

# ruby-on-rails - 需要帮助扩展错误消息

> ID：10099399
> 
> 赞同：1
> 
> 时间：2012-04-11T03:27:18.797
> 
> 标签：ruby-on-rails, ruby, macos, cucumber

我需要扩展一条错误消息。我在 Mac 上运行 Cucumber 测试并收到一条错误消息……使用省略号而不是相关详细信息。有人可以告诉我，可能是简单的方法来获取整个错误消息而不是这个：

```
Command failed with status (1): [bundle exec /Users/sshea4/.rvm/rubies/ree-...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:11:01.043

这是一件愚蠢的事情，但我想我应该回答这个问题……黄瓜不是一项繁重的任务。它是通过做`cucumber`而不是运行`rake cucumber`

# java - 使用语法着色制作 java 编辑器的步骤

> ID：10099407
> 
> 赞同：4
> 
> 时间：2012-04-11T03:28:10.390
> 
> 标签：java, user-interface, syntax

我对如何制作用于编辑 Java 语言的简单文本编辑器有疑问？谁能提供一些提示、步骤、参考或其他内容。

这是我的Java编程课..

感谢任何帮助.. :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:03:28.310

查看[JSyntaxPane](http://code.google.com/p/jsyntaxpane/)。

这是一个开源项目，听起来它完全符合您的需求。看看别人如何完成这样的任务可能会给你很多想法。

这是它的外观截图（右侧面板）：

![在此处输入图像描述](../Images/d64fffc1830387c7ba27d40c06b8e93b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:35:39.880

查看[如何使用编辑器窗格和文本窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)。

此外，这里有一些示例 -[在 JTextComponent 中突出显示单词](http://www.exampledepot.com/egs/javax.swing.text/style_HiliteWords.html)并[在 JTextPane 组件中插入样式文本](http://www.exampledepot.com/egs/javax.swing.text/tp_StyledText.html)。

这是一个带有词法分析器的 -[文本编辑器教程](http://ostermiller.org/syntax/editor.html)

# python - python列表交集 - 正则表达式匹配

> ID：10099413
> 
> 赞同：1
> 
> 时间：2012-04-11T03:29:54.853
> 
> 标签：python, regex, list

我有以下列表：

```
list1 = ['john mayer', 'elizabeth taylor', 'steven barber','jennifer richards']
list2 = ['john','jennifer'] 
```

我想比较 list1 和 list2 并返回 TRUE，因为名字匹配。我知道如果 list2 中的全名可用，我可以通过使用集合交集来完成这项工作。但事实并非如此。是否有设置交集的正则表达式匹配版本

编辑：是的，上面例子的结果应该是真的如果我有一个 list3

```
list3 = ['jack','jennifer']
list1-list2 : TRUE
list2-list3 : FALSE 
```

EDIT2：我想我在原来的帖子中不是很清楚。在 list2 或 list3 我可以有名字和全名的组合

```
list4 = ['john mayer', 'jennifer']
list1-list4 : TRUE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:45:31.503

`list1`您可以像这样制作一组名字

```
>>> {x.split()[0] for x in list1}
set(['john', 'jennifer', 'elizabeth', 'steven']) 
```

您可以像这样进行各种设置操作

```
>>> list2 = ['john','jennifer']
>>> set(list2).difference(x.split()[0] for x in list1)
set([])        # ie False
>>> list3 = ['jack','jennifer']
>>> set(list3).difference(x.split()[0] for x in list1)
set(['jack'])  # ie True 
```

如果你真的需要布尔...

```
>>> bool(set(list2).difference(x.split()[0] for x in list1))
False
>>> bool(set(list3).difference(x.split()[0] for x in list1))
True 
```

或相反...

```
>>> bool(not set(list2).difference(x.split()[0] for x in list1))
True
>>> bool(not set(list3).difference(x.split()[0] for x in list1))
False 
```

对于新的 list4 测试用例

```
>>> list4 = ['john mayer', 'jennifer']
>>> {x.split()[0] for x in list1}.union(list1) > set(list2)
True
>>> {x.split()[0] for x in list1}.union(list1) > set(list3)
False
>>> {x.split()[0] for x in list2}.union(list2) > set(list3)
False
>>> {x.split()[0] for x in list1}.union(list1) > set(list4)
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:50:37.590

```
>>> set(list2).issubset(ele.split(' ')[0] for ele in list1)
True 
```

由于 jamylak 提出的观点，我删除了 [.] ，就像我在原始帖子中所做的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T03:36:49.057

```
def first_name_is_in(first_names, full_names):
    for name in first_names:
        for full_name in full_names:
            if full_name.startswith("%s " % (name,)):
               return True
    return False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T03:35:56.883

```
full_names = ['john mayer', 'elizabeth taylor', 'steven barber','jennifer richards']
first_names = ['john','jennifer']

all((any(full.split()[0]==first for full in full_names) for first in first_names)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T03:41:09.247

正如@gnibbler 建议的那样，最好制作一套，所以我已经改变了我的使用它。

```
>>> first_names = {name.split()[0] for name in list1}
>>> all(x in first_names for x in list2)
True 
```

# wpf - 如何将 UIElement 在不同位置的可视化树中放置两次？

> ID：10099416
> 
> 赞同：0
> 
> 时间：2012-04-11T03:30:20.180
> 
> 标签：wpf, windows-phone-7, visual-tree

我想在 wp 应用程序中两次将网络浏览器放在网格中两次，但我得到了例外：元素已经是另一个元素的子元素。我怎么解决这个问题？PS：我需要两个浏览器同时显示，但我每次只需要与其中一个交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:59:26.857

您不能在两个地方添加相同的视觉效果，但您可以从“原始”视觉效果创建视觉画笔并将其显示在其他地方。您可以在 WebBrowser 中拥有许多“只读”视图，但只有一个交互式视图。

否则，您将需要 2 个控件，每个控件都是独立的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:43:32.827

创建第二个 WebBrowser 控件。

如错误所示，不能将单个控件添加两次。

# php - 这个正则表达式实现了什么？

> ID：10099417
> 
> 赞同：1
> 
> 时间：2012-04-11T03:30:42.510
> 
> 标签：php, regex, preg-match

我见过这个...

```
preg_match("/.*" . $row['keyword'] . ".*/", $word, $matches); 
```

该模式试图暗示什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T03:32:08.987

这意味着找到后面或前面有 0 个或多个字符 ( `*`) 而不是`\n`( `.`) 的术语。

除非它在其他地方完成，否则你应该`$row['keyword']`用`preg_quote($row['keyword'], '/')`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T03:34:44.980

**解释 ：**

```
/                            # start of the regex
.                            # match anything (any character, etc - except for /n)
*                            # zero or more times
" . $row['keyword']. "       # match the keyword
.*                           # same as above
/                            # end of the regex 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T03:33:34.460

`/`只是模式分隔符，`.*`意思是“任何字符（换行符除外）重复 0 次或多次”，所以它只是搜索出现在`$row['keyword']`, in 中的任何字符串`$word`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T03:33:43.103

它试图找出是否`$row['keyword']`包含在中，如果关键字包含元字符，例如，等，`$word`调用它也更安全`preg_quote``$row['keyword']``*``/``\`

# node.js - Node.js 将标准输出生成到字符串以获取进度

> ID：10099419
> 
> 赞同：2
> 
> 时间：2012-04-11T03:30:42.980
> 
> 标签：node.js

如何将标准输出块与动态控制台输出（如 git clone --progress）合并。

例如带有“工作”\b（退格）的标准输出字符串

# css - 将页脚刷新到页面底部，twitter bootstrap

> ID：10099422
> 
> 赞同：333
> 
> 时间：2012-04-11T03:31:04.757
> 
> 标签：css, twitter-bootstrap, footer

我通常熟悉使用 css 刷新页脚的技术。

但是我在让这种方法适用于 Twitter 引导程序时遇到了一些麻烦，这很可能是因为 Twitter 引导程序本质上是响应式的。使用 Twitter 引导程序，我无法使用上述博客文章中描述的方法将页脚刷新到页面底部。

* * *

## 回答 #1

> 赞同：502
> 
> 时间：2012-11-13T17:26:36.723

这现在包含在 Bootstrap 2.2.1 中。

**引导程序 3.x**

使用导航栏组件并添加`.navbar-fixed-bottom`类：

```
<div class="navbar navbar-fixed-bottom"></div> 
```

**引导程序 4.x**

```
<div class="navbar fixed-bottom"></div> 
```

不要忘记添加`body { padding-bottom: 70px; }`，否则可能会覆盖页面内容。

文档： http: [//getbootstrap.com/components/#navbar-fixed-bottom](http://getbootstrap.com/components/#navbar-fixed-bottom)

* * *

## 回答 #2

> 赞同：330
> 
> 时间：2012-10-03T02:13:52.057

[发现这里](http://bootstrapfooter.codeplex.com/)的片段非常适合引导程序

html:

```
<div id="wrap">
  <div id="main" class="container clear-top">
    <p>Your content here</p>
  </div>
</div>
<footer class="footer"></footer> 
```

CSS：

```
html, body {
  height: 100%;
}

#wrap {
  min-height: 100%;
}

#main {
  overflow:auto;
  padding-bottom:150px; /* this needs to be bigger than footer height*/
}

.footer {
  position: relative;
  margin-top: -150px; /* negative value of footer height */
  height: 150px;
  clear:both;
  padding-top:20px;
} 
```

* * *

## 回答 #3

> 赞同：85
> 
> 时间：2014-01-07T12:17:27.487

**Twitter bootstrap NOT STICKY FOOTER**的工作示例

 **```
<script>
$(document).ready(function() {

    var docHeight = $(window).height();
    var footerHeight = $('#footer').height();
    var footerTop = $('#footer').position().top + footerHeight;

    if (footerTop < docHeight)
        $('#footer').css('margin-top', 10+ (docHeight - footerTop) + 'px');
});
</script> 
```

在用户打开开发工具或调整窗口大小时始终更新的版本。

```
<script>
    $(document).ready(function() {
        setInterval(function() {
            var docHeight = $(window).height();
            var footerHeight = $('#footer').height();
            var footerTop = $('#footer').position().top + footerHeight;
            var marginTop = (docHeight - footerTop + 10);

            if (footerTop < docHeight)
                $('#footer').css('margin-top', marginTop + 'px'); // padding of 30 on footer
            else
                $('#footer').css('margin-top', '0px');
            // console.log("docheight: " + docHeight + "\n" + "footerheight: " + footerHeight + "\n" + "footertop: " + footerTop + "\n" + "new docheight: " + $(window).height() + "\n" + "margintop: " + marginTop);
        }, 250);
    });
</script> 
```

## 你至少需要一个元素`#footer`

如果内容适合屏幕不想要滚动条，只需将值 10 更改为 0
如果内容不适合屏幕，滚动条将显示。

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2012-04-11T03:39:27.093

对于[粘性页脚](http://ryanfait.com/sticky-footer/)`DIV's`，我们在 HTML 中使用两个来实现基本的**粘性页脚**效果。像这样写：

**HTML**

```
<div class="container"></div>

<div class="footer"></div> 
```

**CSS**

```
body,html {
    height:100%;
}
.container {
    min-height:100%;
}
.footer {
    height:40px;
    margin-top:-40px;
} 
```

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2013-01-30T02:18:20.320

以下是从官方页面实现此功能的方法：

[http://getbootstrap.com/2.3.2/examples/sticky-footer.html](http://getbootstrap.com/2.3.2/examples/sticky-footer.html)

我刚刚测试了它，它工作得很好！:)

**HTML**

```
<body>

    <!-- Part 1: Wrap all page content here -->
    <div id="wrap">

      <!-- Begin page content -->
      <div class="container">
        <div class="page-header">
          <h1>Sticky footer</h1>
        </div>
        <p class="lead">Pin a fixed-height footer to the bottom of the viewport in desktop browsers with this custom HTML and CSS.</p>
      </div>

      <div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Example courtesy <a href="http://martinbean.co.uk">Martin Bean</a> and <a href="http://ryanfait.com/sticky-footer/">Ryan Fait</a>.</p>
      </div>
    </div>
</body> 
```

相关的 CSS 代码是这样的：

```
/* Sticky footer styles
-------------------------------------------------- */
html,
body {
    height: 100%;
    /* The html and body elements cannot have any padding or margin. */
}

/* Wrapper for page content to push down footer */
#wrap {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    /* Negative indent footer by it's height */
    margin: 0 auto -30px;
}

/* Set the fixed height of the footer here */
#push,
#footer {
    height: 30px;
}

#footer {
    background-color: #f5f5f5;
}

/* Lastly, apply responsive CSS fixes as necessary */
@media (max-width: 767px) {
    #footer {
        margin-left: -20px;
        margin-right: -20px;
        padding-left: 20px;
        padding-right: 20px;
    }
} 
```

* * *

## 回答 #6

> 赞同：32
> 
> 时间：2015-02-25T07:18:44.883

更简单的官方示例： http: [//getbootstrap.com/examples/sticky-footer-navbar/](http://getbootstrap.com/examples/sticky-footer-navbar/)

```
html {
  position: relative;
  min-height: 100%;
}
body {
  margin-bottom: 60px;
}
.footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 60px;
  background-color: #f5f5f5;
} 
```

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2017-09-10T18:32:18.977

在[最新版本](https://getbootstrap.com/)的 bootstrap 4.3 中，这可以使用`.fixed-bottom`class 来完成。

```
<div class="fixed-bottom"></div> 
```

这是我在页脚中使用它的方法：

```
<footer class="footer fixed-bottom container">
        <hr>
        <p>&copy; 2017 Company, Inc.</p>
</footer> 
```

[您可以在此处的](https://getbootstrap.com/docs/4.3/utilities/position/#fixed-bottom)*职位*文档中找到更多信息。

* * *

## 回答 #8

> 赞同：27
> 
> 时间：2019-05-25T19:35:49.880

使用 Bootstrap 4 中内置的 flex 实用程序！以下是我主要使用 Bootstrap 4 实用程序得出的结论。

```
<div class="d-flex flex-column" style="min-height: 100vh;">
  <header></header>
  <div class="container flex-grow-1">
    <div>Some Content</div>
  </div>
  <footer></footer>
</div> 
```

*   `.d-flex`使主 div 成为 flex 容器
*   `.flex-column`在主 div 上将您的弹性项目排列在一个列中
*   `min-height: 100vh`到主 div，无论是使用样式属性还是在您的 CSS 中，以垂直填充视口
*   `.flex-grow-1`在容器上，元素让主内容容器占据视口高度中剩余的所有空间。

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2013-04-21T20:17:17.387

好吧，我发现了`navbar-inner`和 `navbar-fixed-bottom`

```
<div id="footer">
 <div class="navbar navbar-inner  navbar-fixed-bottom">
    <p class="muted credit"><center>ver 1.0.1</center></p>
 </div>
</div> 
```

看起来不错，对我有用

![在此处输入图像描述](../Images/10fa210a1aea8612ee714cc4206e7d3e.png)

参见示例`**[Fiddle](http://jsfiddle.net/SAWsA/699/)**`

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2016-04-03T12:53:27.837

[HenryW 的回答](https://stackoverflow.com/a/20971428/8207)很好，尽管我需要进行一些调整才能使其按我的意愿工作。特别是以下还处理：

*   通过首先在 javascript 中标记为不可见并设置为可见来避免页面加载时的“跳跃”
*   处理浏览器优雅地调整大小
*   如果浏览器变小并且页脚变得大于页面，则另外设置页脚备份页面
*   高度函数调整

这些调整对我有用：

**HTML：**

```
<div id="footer" class="invisible">My sweet footer</div> 
```

**CSS：**

```
#footer {
    padding-bottom: 30px;
} 
```

**JavaScript：**

```
function setFooterStyle() {
    var docHeight = $(window).height();
    var footerHeight = $('#footer').outerHeight();
    var footerTop = $('#footer').position().top + footerHeight;
    if (footerTop < docHeight) {
        $('#footer').css('margin-top', (docHeight - footerTop) + 'px');
    } else {
        $('#footer').css('margin-top', '');
    }
    $('#footer').removeClass('invisible');
}
$(document).ready(function() {
    setFooterStyle();
    window.onresize = setFooterStyle;
}); 
```

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2016-11-16T14:34:57.053

这对我来说非常有效。

将此类 navbar-fixed-bottom 添加到您的页脚。

```
<div class="footer navbar-fixed-bottom"> 
```

我这样使用它：

```
<div class="container-fluid footer navbar-fixed-bottom">
<!-- start footer -->
</div> 
```

它设置在整个宽度的底部。

编辑：这会将页脚设置为始终可见，这是您需要考虑的事情。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2012-04-11T14:17:21.893

您需要包装您的`.container-fluid`div 以使您的粘性页脚工作，您还缺少`.wrapper`类上的一些属性。试试这个：

`padding-top:70px`从您的`body`标签中删除并将其包含在您的标签中`.container-fluid`，如下所示：

```
.wrapper > .container-fluid {
    padding-top: 70px;
} 
```

我们必须这样做，因为`body`向下推以适应导航栏最终会将页脚推得更远（70px）超过视口，所以我们得到一个滚动条。我们会得到更好的结果，而不是推动`.container-fluid`div。

接下来，我们必须删除div`.wrapper`外部的类`.container-fluid`并用它包装`#main`div，如下所示：

```
<div class="wrapper">
    <div id="main" class="container-fluid">
        <div class="row-fluid">...</div>
        <div class="push"></div>
    </div>
</div> 
```

您的页脚当然必须在`.wrapper`div 之外，因此将其从 `.wrapper div 中删除并将其放在外面，如下所示：

```
<div class="wrapper">
    ....
</div>
<footer class="container-fluid">
    ....
</footer><!--END .row-fluid--> 
```

`.wrapper`完成后，通过使用负边距正确地将页脚推到更靠近班级的位置，如下所示：

```
.wrapper {
    min-height: 100%;
    height: auto !important; /* ie7 fix */
    height: 100%;
    margin: 0 auto -43px;
} 
```

这应该可以工作，尽管您可能必须修改其他一些东西才能在调整屏幕大小时使其工作，例如重置`.wrapper`类的高度，如下所示：

```
@media (max-width:480px) {
   .wrapper {
      height:auto;
   }
} 
```

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2013-02-06T18:09:18.157

这是使用 Twitter Bootstrap 和新的 navbar-fixed-bottom 类的正确方法：（你不知道我花了多长时间寻找这个）

CSS：

```
html {
  position: relative;
  min-height: 100%;
}
#content {
  padding-bottom: 50px;
}
#footer .navbar{
  position: absolute;
} 
```

HTML：

```
<html>
  <body>
    <div id="content">...</div>
    <div id="footer">
      <div class="navbar navbar-fixed-bottom">
        <div class="navbar-inner">
          <div class="container">
            <ul class="nav">
              <li><a href="#">Menu 1</a></li>
              <li><a href="#">Menu 2</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2021-08-18T17:24:16.057

### 使用 Bootstrap 5 将页脚保持在底部

```
 <div class="min-vh-100 d-flex flex-column 
                justify-content-between">

         <div> <!-- Wrapper (Without footer) -->

            <header>
             I am a header.
            </header>

            <article>
            I am an article!
            </article>

        </div> <!-- End: Wrapper (Without footer) -->

         <footer>
         I am a footer.
         </footer>

    </div> 
```

* * *

[**CodePen 中的现场演示**](https://codepen.io/rasaf-ibrahim/pen/gOmzPZe?editors=0110)

* * *

#### 笔记

*   确保您`<div>`使用以下 Bootstrap 类将所有内容包装在一个或任何其他块级元素中`min-vh-100, d-flex,flex-column,justify-content-between` ：

*   确保将除页脚元素之外的所有内容都包装在 a`<div>`或任何其他块级元素中。

*   确保您使用`<footer>`或任何其他块级元素来包装页脚。

#### 代码说明

*   `min-vh-100`确保 body 元素将至少伸展到屏幕的整个高度

*   `flex-column`在保留堆叠的块元素方面保持正常文档流的行为（假设正文的直接子元素实际上都是块元素）。

*   `justify-content-between`将页脚推到屏幕底部。

* * *

查看如何仅使用 CSS 执行相同操作（将页脚保持在底部） -[链接](https://stackoverflow.com/questions/643879/css-to-make-html-page-footer-stay-at-bottom-of-the-page-with-a-minimum-height-b/67846892#67846892)

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2016-02-23T08:47:34.133

使用导航栏组件并添加 .navbar-fixed-bottom 类：

```
<div class="navbar navbar-fixed-bottom"></div> 
```

添加正文

```
 { padding-bottom: 70px; } 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2020-05-05T21:25:26.670

## Bootstrap v4+ 解决方案

这是一个不需要重新考虑 HTML 结构或任何其他涉及填充的 CSS 技巧的解决方案：

```
<html style="height:100%;">
  ...
  <body class="d-flex flex-column h-100">
    ...
    <main class="flex-grow-1">...</main>
    <footer>...</footer>
  </body>
  ...
</html> 
```

请注意，此解决方案允许具有灵活高度的页脚，这在为多种屏幕尺寸设计页面时特别方便，并且在缩小时会进行内容换行。

## 为什么这有效

*   `style="height:100%;"`使`<html>`标签占据文档的整个空间。
*   类`d-flex`设置`display:flex`为我们的`<body>`标签。
*   类`flex-column`设置`flex-direction:column`为我们的`<body>`标签。它的孩子（`<header>`,`<main>`和`<footer>`任何其他直接孩子）现在垂直对齐。
*   class`h-100`设置`height:100%`为我们的`<body>`标签，这意味着它将垂直覆盖整个屏幕。
*   class`flex-grow-1`设置`flex-grow:1`为 our `<main>`，有效地指示它填充任何剩余的垂直空间，从而达到我们之前在`<body>`标签上设置的 100% 垂直高度。

工作演示：[https ://codepen.io/maxencemaire/pen/VwvyRQB](https://codepen.io/maxencemaire/pen/VwvyRQB)

有关 flexbox 的更多信息，请参阅[https://css-tricks.com/snippets/css/a-guide-to-flexbox/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2013-08-15T19:50:10.030

要处理宽度约束布局，请使用以下内容，这样您就不会得到圆角，并且您的导航栏将与应用程序的两侧齐平

```
<div class="navbar navbar-fixed-bottom">
    <div class="navbar-inner">
        <div class="width-constraint clearfix">
            <p class="pull-left muted credit">YourApp v1.0.0</p>

            <p class="pull-right muted credit">©2013 • CONFIDENTIAL ALL RIGHTS RESERVED</p>
        </div>
    </div>
</div> 
```

然后您可以使用 css 覆盖引导类来调整高度、字体和颜色

```
 .navbar-fixed-bottom {
      font-size: 12px;
      line-height: 18px;
    }
    .navbar-fixed-bottom .navbar-inner {
        min-height: 22px;
    }
    .navbar-fixed-bottom .p {
        margin: 2px 0 2px;
    } 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2014-06-18T06:32:04.723

您可以使用 jQuery 来处理这个问题：

```
$(function() {
    /**
     * Read the size of the window and reposition the footer at the bottom.
     */
    var stickyFooter = function(){
        var pageHeight = $('html').height();
        var windowHeight = $(window).height();
        var footerHeight = $('footer').outerHeight();

        // A footer with 'fixed-bottom' has the CSS attribute "position: absolute",
        // and thus is outside of its container and counted in $('html').height().
        var totalHeight = $('footer').hasClass('fixed-bottom') ?
            pageHeight + footerHeight : pageHeight;

        // If the window is larger than the content, fix the footer at the bottom.
        if (windowHeight >= totalHeight) {
            return $('footer').addClass('fixed-bottom');
        } else {
            // If the page content is larger than the window, the footer must move.
            return $('footer').removeClass('fixed-bottom');
        }
    };

    // Call when this script is first loaded.
    window.onload = stickyFooter;

    // Call again when the window is resized.
    $(window).resize(function() {
        stickyFooter();
    });
}); 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2015-06-29T20:19:58.043

最简单的技术可能是将 Bootstrap`navbar-static-bottom`与设置主容器 div 结合使用`height: 100vh`（新的 CSS3[视图端口百分比](http://www.w3.org/TR/css3-values/#viewport-relative-lengths)）。这会将页脚刷新到底部。

```
<main class="container" style="height: 100vh;">
  some content
</main>      
<footer class="navbar navbar-default navbar-static-bottom">
  <div class="container">
  <p class="navbar-text navbar-left">&copy; Footer4U</p>
  </div>
</footer> 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2017-07-08T16:09:34.113

经测试`Bootstrap 3.6.6`。

**HTML**

```
<div class="container footer navbar-fixed-bottom">
  <footer>
    <!-- your footer content here -->
  </footer>
</div> 
```

**CSS**

```
.footer {
  bottom: 0;
  position: absolute;
} 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-04-17T20:38:10.573

唯一对我有用的！：

```
html {
  position: relative;
  min-height: 100%;
  padding-bottom:90px;
}
body {
  margin-bottom: 90px;
}
footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 90px;
} 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2019-07-20T00:10:33.317

根据[Bootstrap 4.3 示例](https://getbootstrap.com/docs/4.3/examples/sticky-footer/)，如果您像我一样失去理智，这就是它的实际工作方式：

*   页脚 div 的所有父母都需要有`height: 100%`(`h-100`类)
*   页脚的直接父级需要有`display: flex`（`d-flex`类）
*   页脚需要有`margin-top: auto`（`mt-auto`类）

问题在于，在现代前端框架中，我们经常在这些元素周围有额外的包装器。

例如，在我的例子中，使用 Angular，我从一个单独的应用程序根、主应用程序组件和页脚组件组成了视图——所有这些都将它们的自定义元素添加到 DOM。

所以，为了让它工作，我必须向这些包装元素添加类：一个附加`h-100`的，`d-flex`向下移动一层，并从页脚向上移动`mt-auto`一层（所以实际上它不再在页脚类上，而是在我的`<app-footer>`自定义元素）。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-07-20T11:49:47.823

```
#wrap {
min-height: 100%;
height: auto !important;
height: 100%;
width: 100%;
/*Negative indent footer by its height*/
margin: 0 auto -60px;
position: fixed;
left: 0;
top: 0;
} 
```

页脚高度与换行元素底部缩进的大小相匹配。

```
.footer {
position: fixed;
bottom: 0;
left: 0;
right: 0;
height: 60px;
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2014-01-12T01:09:42.760

把事情简单化。

```
footer {
  bottom: 0;
  position: absolute;
} 
```

您可能还需要通过将`margin-bottom`与页脚高度等效的值添加到`body`.

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-04-10T02:32:25.017

这是使用 Flexbox 的最新版 Bootstrap（撰写本文时为 4.3）的解决方案。

HTML：

```
<div class="wrapper">
  <div class="content">
    <p>Content goes here</p>
  </div>
</div>
<footer class="footer"></footer> 
```

CSS：

```
html, body {
  height: 100%;
}

body {
  display: flex;
  flex-direction: column;
}

.wrapper {
  flex-grow: 1;
} 
```

还有一个 codepen 示例：[https ://codepen.io/tillytoby/pen/QPdomR](https://codepen.io/tillytoby/pen/QPdomR)

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-04-20T10:25:23.207

在引导程序中使用这段代码它的作品

```
<div class="navbar fixed-bottom">
<div class="container">
 <p class="muted credit">Footer <a href="http://google.com">Link</a> and <a 
href="http://google.com/">link</a>.</p>
 </div>
 </div> 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2012-04-11T07:55:37.440

看起来`height:100%`“链条”正在被打破`div#main`。尝试添加`height:100%`它，这可能会让你更接近你的目标。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2012-12-02T22:59:52.250

在这里，您将找到 HAML ( [http://haml.info](http://haml.info) ) 中的方法，导航栏位于顶部，页脚位于页面底部：

```
%body
  #main{:role => "main"}
    %header.navbar.navbar-fixed-top
      %nav.navbar-inner
        .container
          /HEADER
      .container
        /BODY
    %footer.navbar.navbar-fixed-bottom
      .container
        .row
          /FOOTER 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2014-10-10T17:41:21.100

这是一个使用 css3 的示例：

**CSS：**

```
html, body {
    height: 100%;
    margin: 0;
}
#wrap {
    padding: 10px;
    min-height: -webkit-calc(100% - 100px);     /* Chrome */
    min-height: -moz-calc(100% - 100px);     /* Firefox */
    min-height: calc(100% - 100px);     /* native */
}
.footer {
    position: relative;
    clear:both;
} 
```

**HTML：**

```
<div id="wrap">
    <div class="container clear-top">
       body content....
    </div>
</div>
<footer class="footer">
    footer content....
</footer> 
```

[小提琴](http://jsfiddle.net/vcarvalho/637j2cfw/2/)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2015-01-05T23:16:52.023

这就是引导程序的做法：

[http://getbootstrap.com/2.3.2/examples/sticky-footer.html](http://getbootstrap.com/2.3.2/examples/sticky-footer.html)

只需使用页面源，您应该可以看到。不要忘记`<div id="wrap">`顶部。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2016-05-09T10:59:01.843

另一种可能的解决方案，仅使用媒体查询

```
@media screen and (min-width:1px) and (max-width:767px) {
    .footer {
    }
}
/* no style for smaller or else it goes weird.*/
@media screen and (min-width:768px) and (max-width:991px) {
    .footer{
        bottom: 0;
        width: 100%;
        position: absolute;
    }
}
@media screen and (min-width:992px) and (max-width:1199px) {
    .footer{
        bottom: 0;
        width: 100%;
        position: absolute;
    }
}
@media screen and (min-width:1120px){
    .footer{
        bottom: 0;
        width: 100%;
        position: absolute;
    }
} 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2018-05-28T11:36:51.427

使用下面的类将其推送到页面的最后一行并使其居中。如果您在 Rails HAML 页面上使用 ruby​​，您可以使用以下代码。 `%footer.card.text-center`

请不要忘记使用 twitter bootstrap

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2020-02-16T15:43:48.610

这很好用

html

```
<footer></footer> 
```

css

```
html {
  position: relative;
  min-height: 100%;
  padding-bottom:90px;
}
body {
  margin-bottom: 90px;
}
footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 90px;
} 
```

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2019-09-25T10:40:42.143

HTML

```
<div id="wrapper">

  <div id="content">
    <!-- navbar and containers here -->
  </div>

  <div id="footer">
   <!-- your footer here -->
  </div>

</div> 
```

CSS

```
html, body {
  height: 100%;
}

#wrapper {
  min-height: 100%;
  position: relative;
}

#content {
  padding-bottom: 100px; /* Height of the footer element */
}

#footer {
  width: 100%;
  height: 100px; /* Adjust to the footer needs */
  position: absolute;
  bottom: 0;
  left: 0;
} 
```

* * *

## 回答 #35

> 赞同：-1
> 
> 时间：2019-10-15T05:33:36.650

这个是最好的！

```
html {
  position: relative;
  min-height: 100%;
  padding-bottom:90px;
}
body {
  margin-bottom: 90px;
}
footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 90px;
} 
```**

# opencv - 直接转换黑白图像：3通道到1通道？

> ID：10099425
> 
> 赞同：0
> 
> 时间：2012-04-11T03:31:18.253
> 
> 标签：opencv

是否有任何功能可以直接将 3 通道（黑白图像 - 3 通道的斑点图像）转换为 1 通道图像？目前，我需要使用

cvCvtColor 然后是 cvThreshold

获得 1 个通道图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:55:35.227

根据应用程序，只需将其中一个通道馈送到`threshold()`. 您可以使用 分割 3 通道图像`split()`，这样可以节省一些时间，`cvtColor()`因为它不必对每个像素进行 3 次乘法运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:50:19.240

不，阈值算法采用单通道图像（即来自 cvtColor 的灰度）。您可以编写自己的函数来直接检查像素值，但很可能 cvtColor 后跟一些阈值函数同样快

# jquery - 块引用 prependTo

> ID：10099431
> 
> 赞同：0
> 
> 时间：2012-04-11T03:32:07.753
> 
> 标签：jquery, syntax, prepend

编辑：

当我尝试添加@NiftyDude 时，这是矛盾的。

大多数页面：

```
 $("blockquote").appendTo(".entry");

   <div class="entry">
      <div class="project">
     <blockquote>  </blockquote>    
      </div>

  </div> 
```

它将块引用移到条目 div 之外。

```
 <div class="entry">
      <div class="project">

      </div>

<blockquote>  </blockquote> 
  </div> 
```

当块引用被附加到条目时，DOM 正在影响出口页面。我想将它移回项目出口 div。

```
 <div class="entry outlet">
      <div class="project outlet">

      </div>
    <blockquote>  </blockquote>
  </div> 
```

对此：

```
 <div class="entry outlet">
      <div class="project outlet">

              <blockquote>  </blockquote>

      </div>

  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:35:06.990

你的选择器错了，`blockquote`不是`.project`

我认为以下是您正在寻找的内容：

```
$(".project.outlet").next("blockquote").prependTo(".project"); 
```

在我看来，您想将每个都移`blockquote`回，所以让我们尝试以下操作：

```
$('blockquote').each(function() {
   if($(this).prev('.project.outlet').length) {
      $(this).appendTo($(this).prev());
   }
}); 
```

# sharepoint - Stapling Feature - Publishing Infrestructure in blank site results in no left menu bar

> ID：10099436
> 
> 赞同：2
> 
> 时间：2012-04-11T03:32:25.070
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-feature

I Have created a stapling feature so i can activate the publishing infraestructure feature by default on new blank site.

It does work as expected, the only problem is that the new created site, does not have the left menu visible, and there is no way make it visible.

This does not happen on Team sites, but only on new blank sites.

If I disable the stapling feature and create a new blank site and manually activate the Publishing Infraestructure feature everything works as expected and the menu is visible.

Any clues?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:34:32.513

What we found is that when you activate a feature in code, e.g. in a feature stapler, any dependant features it lists are not activated. The Publishing feature has a number of dependant features, hence the result you are seeing.

We used PowerShell to enumerate the "missing" features and then added them to our list of features to activate. We tested our result by running a PS script which listed all of the features active at both the Site and Web level for both cases (auto-activate vs. manual).

This is not a perfect solution. However, the cost / benefit ratio was better than the other options in our particular case.

# c# - 有没有办法在更改任一字段时触发远程验证属性？

> ID：10099437
> 
> 赞同：2
> 
> 时间：2012-04-11T03:33:00.233
> 
> 标签：c#, .net, asp.net-mvc-3, validation

所以我面临的问题是，我创建的 Remote 属性仅在它声明的字段发生更改时才会触发。但是当任何一个发生变化时，我都需要它来触发。

```
class MyViewModel

[Remote("ValidateTwoFields", "ControllerName", AdditionalFields = "Field2", ErrorMessageResourceName = "Errors_SomeErrorMessageThatShouldBeShowOnce", ErrorMessageResourceType = typeof(Resources.Resource))]

public string Field1{ get; set; }

public string Field2{ get; set; } 
```

在控制器中：

```
//this only gets called when Field1 changes
//If I put the remote attribute on Field2 as well it displays the error message twice
public JsonResult ValidateTwoFields(MyViewModel model)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:37:54.387

我还没有尝试过，但是可以通过将两个字段集中到一个包含两个字符串的类中并在一个类上添加验证来解决吗？

# java - 活动所需的建议以及如何保持通用性

> ID：10099455
> 
> 赞同：1
> 
> 时间：2012-04-11T03:35:31.540
> 
> 标签：java, android, android-activity, multiple-inheritance, listactivity

我正在为用户单击 AlertDialog 选项时可能发生的所有操作创建一个通用位置/类。我找到了这个[链接](https://stackoverflow.com/questions/3924464/how-to-implement-a-generic-activity-that-can-be-extended-by-normal-list-and-map)，但它并没有真正帮助我理解这个概念。这就是我想要做的。

1.  我有一个从 Activity 扩展的类（ClassA）和从 ListActivity 扩展的另一个类（ClassB）。
2.  无论从哪里调用，我都会弹出警报对话框。
3.  我创建了一个在 ClassA 中扩展的 BaseRootActivity 类。由于 ClassB 从 RootListActivity 类扩展，我无法调用位于 BaseRootActivity 内的方法，尤其是那些使用上下文方法的方法。

我可以根据链接创建两个单独的通用列表活动，但代码会在两个类中重复。我想避免这种情况。有没有办法可以做到这一点，我知道答案可能在给出的链接中，但是，我并不能真正理解用户所说的基本逻辑。我将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:43:29.377

您应该始终更喜欢组合而不是继承。所以，你有两个不错的选择：

*   只需将对话逻辑放在您将使用的第三个类中，`ClassA`并且`ClassB`（不扩展它，只是使用它）。
*   使用 Fragments API（您可以使用[兼容性库](http://developer.android.com/sdk/compatibility-library.html)使其在旧版本的 Android 上可用）；在那里你可以找到一个名为的类`DialogFragment`，它基本上迫使你在分离的类上创建对话框（顺便说一句，这是一个好主意），如果你选择遵循第一个选择，这将帮助你处理可能面临的问题。

# jquery - 根据jquery中选择的数字克隆div

> ID：10099456
> 
> 赞同：0
> 
> 时间：2012-04-11T03:35:36.470
> 
> 标签：jquery, select, clone

我需要一些认真的帮助！我正在尝试创建一个酒店搜索引擎。我需要从选择框中获取房间数，并克隆选择框的 div，其次数与在房间选择框中选择的次数相同。我希望这是有道理的。我还需要将 div 的文本更改为 Room 1、Room 2、Room 3 等。这是我已经开始的一个 jsfiddle，我不知道从哪里开始。 [http://jsfiddle.net/liveandream/YxXtY/](http://jsfiddle.net/liveandream/YxXtY/) 这是我的代码：HTML：

```
Rooms:<select name="rooms" id='rooms'>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
      </select><br>
<div id="room">Room 1:
<br />
<div class='left' >Adults:
    <select name="adults" id='adults'>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option></select></div>
 <div class='left'>Children:
   <select name="children" id="children">
        <option selected="selected">0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select></div>
<div class='left' id="childage">Child Ages:
    <select name="children" >
        <option selected="selected">0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select></div><br clear="all" /></div>
<div id="txt"></div> 
```

​查询：

```
$("select#rooms").change(function () {
          var str = "";
          $("select#rooms option:selected").each(function () {
                $("#room").clone(2).insertAfter("#txt");
              });
          $("#txt").text(str);
        })
        .change();​ 
```

提前感谢任何愿意提供帮助的人！

编辑：我需要它是这样的：[http ://www.helloweekends.com/](http://www.helloweekends.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:49:05.900

我已经在[http://jsfiddle.net/ryanfernandes/YxXtY/81/](http://jsfiddle.net/ryanfernandes/YxXtY/81/)更新了你的 jsfiddle看看它是否是你要找的。

我修改了 html，以便您的 div 具有唯一的 ID，并包含根据所选数字删除/隐藏房间的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:14:16.580

与其仅仅从现有的 HTML 中复制元素，不如使用 JavaScript 创建这些元素。因此，对于您在更改所选房间数量时调用的函数，例如

```
 function () {
    var html = "";
    var i;
    for(i = 0; i < this.value; i++)
    {
       html += "<div class='room'>Room " + (i + 1);
       html += "<br clear='all' />";   
       html += "<div class='left' >Adults:<select name='adults' id='adults'>";        

       // ... Create the rest of the form part for the room  ...

    }    
    $("#roomsContainer").html(html); // #roomsContainer is a container around where the
                                     // menus for the individual rooms should be. 
} 
```

# python - 将一个正方形分成 N 个较小的正方形并找到 N 个较小正方形的中心坐标

> ID：10099458
> 
> 赞同：-1
> 
> 时间：2012-04-11T03:35:39.493
> 
> 标签：python, for-loop, numpy, sorting

我有一个尺寸为 10x10 的正方形，我想将它分成 25 个尺寸为 2x2 的小正方形，所以最后我将有一个 5x5 的数组。我还想做的是找到每个新正方形的中心坐标。我已经编写了以下代码作为起点，它为我提供了 x(0) 和 y(0) 坐标的正方形中心的坐标。我已经尝试过嵌套，但这给了我很高的 y 值。我知道我需要保持一个变量固定并根据它迭代另一个变量。我只是不确定如何链接它们。如果有人可以提供帮助或指出一些有助于找到非对角线元素的文档，我们将不胜感激。提前致谢。

```
def Cell_centers():
 dx = 2
 dy = 2             #length of cell side
 N = 5              #number of cells
 Xc = zeros(N)      #array creation
 Yc = zeros(N)             
 x1=0
 y1=0

 for i in range(N):       #for loops to define cell centers
   Xc[i] = dx/2 +x1                  
   x1+=dx                   #increments x1 positions by dx
 for j in range(N):
   Yc[j] = dy/2 +y1
   y1+=dy

 centers = np.array((Xc, Yc), dtype=float)    
return(centers) 
```

例如，如果我们有一个边长为 2 的正方形并将其分成每边长度为 1 的四个正方形，我想要的是这样的东西

```
 [(.5 ,1.5),(1.5,1.5)]
 [(.5,.5)  ,(.5 ,1.5)] 
```

我不知道这是否正确 Python 这就是我在这里学习的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:10:48.543

如果我正确理解了您的要求，那么您似乎只想要这样的东西（使用 numpy 数组实现）：

```
import numpy as np

n=5
dx=2.
dy=dx

x=(dx/2.)+dx*np.arange(0,n).reshape((n,1))
y=(dy/2.)+dy*np.arange(0,n).reshape((1,n))

xcoords=np.kron(np.ones_like(x.T),x)
ycoords=np.kron(y,np.ones_like(y.T)) 
```

在这里`x`并`y`包含我认为您所指的“对角线条目”，即。每个唯一的 x 坐标和 y 坐标，假设正方形的“左上角”在`(0,0)`. x 和 y 坐标的完整数组，我认为这可能是“非对角线条目”与您提到的“对角线条目”的联合，然后可以使用[Kronecker product](http://en.wikipedia.org/wiki/Kronecker_product)方便地计算。这给出了一对 5x5 数组，一个保存所有中心的 x 坐标，另一个保存相应的 y 坐标：

```
In [77]: print xcoords
[[ 1\.  1\.  1\.  1\.  1.]
 [ 3\.  3\.  3\.  3\.  3.]
 [ 5\.  5\.  5\.  5\.  5.]
 [ 7\.  7\.  7\.  7\.  7.]
 [ 9\.  9\.  9\.  9\.  9.]]

In [78]: print ycoords
[[ 1\.  3\.  5\.  7\.  9.]
 [ 1\.  3\.  5\.  7\.  9.]
 [ 1\.  3\.  5\.  7\.  9.]
 [ 1\.  3\.  5\.  7\.  9.]
 [ 1\.  3\.  5\.  7\.  9.]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:40:21.570

你要`diagonal`方法吗？

```
In [1]: x = scipy.randn(5,5)

In [2]: x
Out[2]: 
array([[ 0.90077481,  0.33192388, -0.16153472, -0.78663912, -2.45735516],
       [ 0.51063641,  0.01209047, -0.39667355, -0.9603519 , -0.19263007],
       [-0.73422795, -0.45595695, -0.8915272 ,  0.20074704, -0.78286524],
       [ 0.53628315,  0.93238853, -1.16648829,  1.26122884, -0.70490362],
       [ 0.31389001, -1.48574572,  2.16641639, -0.67982623, -0.59455518]])

In [3]: x.diagonal(offset=2)
Out[3]: array([-0.16153472, -0.9603519 , -0.78286524])

In [4]: x.diagonal(offset=-3)
Out[4]: array([ 0.53628315, -1.48574572]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:08:17.677

这是你想要的（我更新它以返回一个数组）？

```
import numpy as np
dx = 2.
dy = 2.
N = 5
centers = np.mgrid[dx/2:N*dx:dx, dy/2:N*dy:dy] 
```

结果是：

```
>>> centers.shape
(2, 5, 5)
>>> centers
array([[[ 1.,  1.,  1.,  1.,  1.],
        [ 3.,  3.,  3.,  3.,  3.],
        [ 5.,  5.,  5.,  5.,  5.],
        [ 7.,  7.,  7.,  7.,  7.],
        [ 9.,  9.,  9.,  9.,  9.]],

       [[ 1.,  3.,  5.,  7.,  9.],
        [ 1.,  3.,  5.,  7.,  9.],
        [ 1.,  3.,  5.,  7.,  9.],
        [ 1.,  3.,  5.,  7.,  9.],
        [ 1.,  3.,  5.,  7.,  9.]]]) 
```

更新：如果您希望坐标沿最后一个维度，您可以使用 rollaxis。

```
>>> centers = np.rollaxis(centers, 0, centers.ndim)
>>> centers.shape
(5, 5, 2)
>>> centers
array([[[ 1.,  1.],
        [ 1.,  3.],
        [ 1.,  5.],
        [ 1.,  7.],
        [ 1.,  9.]],

       [[ 3.,  1.],
        [ 3.,  3.],
        [ 3.,  5.],
        [ 3.,  7.],
        [ 3.,  9.]],

       [[ 5.,  1.],
        [ 5.,  3.],
        [ 5.,  5.],
        [ 5.,  7.],
        [ 5.,  9.]],

       [[ 7.,  1.],
        [ 7.,  3.],
        [ 7.,  5.],
        [ 7.,  7.],
        [ 7.,  9.]],

       [[ 9.,  1.],
        [ 9.,  3.],
        [ 9.,  5.],
        [ 9.,  7.],
        [ 9.,  9.]]]) 
```

# iphone - 从 NSData 打印 NSString 并比较 HMAC 哈希

> ID：10099460
> 
> 赞同：3
> 
> 时间：2012-04-11T03:35:48.660
> 
> 标签：iphone, objective-c, ios, cocoa-touch, hmac

我有一个使用 HMAC 算法散列的 NSData。我想打印结果字符串并查看它的外观，但我一直在屏幕上打印（null）。我尝试了 2 种方法，但没有奏效。有人可以建议如何打印散列数据字符串吗？我想将这种方式创建的哈希与在 JAVA 服务器上创建的哈希进行比较。现在，JAVA 返回一个字符串对象。这将如何与目标 C 创建的 NSData 进行比较。

```
NSData *hmac = [aData HMACWithAlgorithm:kCCHmacAlgSHA1];
NSString *hmacStr = [NSString stringWithUTF8String:[hmac bytes]];
NSString *hmacStr1 = [[NSString alloc] initWithData:hmac
                                                encoding:NSUTF8StringEncoding];
NSLog(@"Hashed Data=%@ data2=%@",hmacStr,hmacStr1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T05:28:33.983

我相信这里的问题`HMACWithAlogorithm:`是返回构成摘要的原始字节，而不是构成摘要的字符串 UTF8 编码的字节。这是基于这样的假设`HMACWithAlgorithm`： : 是`CCHmac`从`CommmonCrypto`引擎盖下的库中使用的。

我认为以下内容可能会满足您的要求，它将获取返回的原始摘要并将其转换为摘要的十六进制编码 NSString：

```
NSData *hmac = [aData HMACWithAlgorithm:kCCHmacAlgSHA1];

// Get a pointer to the raw bytes of the digest
unsigned char *digest = (unsigned char *)[hmac bytes];

// Convert the bytes to their hex representation
NSString *hmacStr = [NSString stringWithFormat:@"%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X",
                digest[0], digest[1], digest[2], digest[3], digest[4], digest[5], digest[6], digest[7],
                digest[8], digest[9], digest[10], digest[11], digest[12], digest[13], digest[14], digest[15],
                digest[16], digest[17], digest[18], digest[19]];      

NSLog(@"Hashed Data=%@",hmacStr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:45:42.753

你的第二个想法（hmacStr1）很好。如果该字符串为空，那么它会对您的输入数据产生怀疑。

看看当你这样做时会发生什么：

```
NSLog(@"about to hash %@, which is %d bytes long", aData, [aData length]);
NSData *hmac = [aData HMACWithAlgorithm:kCCHmacAlgSHA1];
NSLog(@"the hash result is %@, which is %d bytes long", hmac, [hmac length]); 
```

空数据，对吧？修复需要在转换为字符串之前进行。

# c++ - 对象标识符、返回值还是变量？

> ID：10099465
> 
> 赞同：0
> 
> 时间：2012-04-11T03:36:19.357
> 
> 标签：c++, inheritance

目前正在构建这种对象层次结构并能够使基类中的日志记录更加清晰，我决定使用某种变量或函数来返回类的类型。

例如：

```
class fruit {
   string _type;

   fruit() {
       _type = "base"; // or i dont have to set it. however, it wont be inforced
   }

   virtual const char* type() const { return "base"; } // or just = 0 to inforce it

   void function() {
       log(this->type(), " tastes good");
       log(this->_type, "tastes good");
   }
}

class apple : public fruit {

   apple() {
       _type = "apple";
   }

   const char* type() const { return "apple"; }
} 
```

如您所见，有两种方法，我个人认为返回值版本更清晰，因为很明显它需要实现。

然而，我的问题是什么方法是最好的？每次我记录一些东西时调用一个函数会慢很多吗？只是假设它会被优化，但我可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:42:27.757

首先，如果您需要*知道*程序中类的类型，那么您的设计就有问题。通常，您不希望您的程序依赖于*具体的实现*，而是依赖于*接口*。

无论如何，该函数应该是一个纯虚函数，因此每个派生类都必须实现它，否则如果有人没有为其派生类实现它，那么您最终会为派生类获得错误的类型。

分配一个字符串和返回一个字符串文字都很好。
字符串文字具有静态存储持续时间，因此它将在整个程序期间有效，而且您适当地拥有`const char`返回类型，以便用户不会修改返回的文字并最终导致**Undefined Behavior**。
返回成员也很好，尽管它只是为您的班级增加了额外成员的一些开销，并且您不太担心这个额外的成员。

# c++ - 调试帮助：C++ 错误

> ID：10099467
> 
> 赞同：0
> 
> 时间：2012-04-11T03:36:26.167
> 
> 标签：c++, debugging

我收到此错误：

```
SortedList.cpp:197: error: expected constructor, destructor, or type conversion before '*' token 
```

这是代码：

```
197    Listnode *SortedList::copyList(Listnode *L) {
198        Listnode *current = L;
199
200        Listnode *copy = new Listnode;
201        copy->student = new Student(*current->student);
202        copy->next = NULL;
203
204        Listnode *head = copy;
205
206        current = current->next;
207        while (current != NULL) {
208            copy = copy->next = new Listnode;
209            copy->student = new Student(*current->student);
210            copy->next = NULL;
211        }
212        return head;
213    } 
```

这是列表节点：

```
struct Listnode {
    Student *student;
    Listnode *next;
};
Listnode *head; 
```

不知道我应该做什么。如果需要查看，我已经实现了构造函数和析构函数。关于问题可能是什么的任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:48:35.013

从评论 `ListNode`看来，您需要使用以下嵌套类： 如果是公共的`SortedList::Listnode *SortedList::copyList(SortedList::Listnode *L)` ，您也可能需要将其设为公开。`public``copyList`

# apache - 如果找不到文件，如何告诉 apache 重写到另一个目录？

> ID：10099471
> 
> 赞同：1
> 
> 时间：2012-04-11T03:37:38.130
> 
> 标签：apache, .htaccess, mod-rewrite

如果找不到特定文件，我需要知道如何修改我的 .htaccess 文件以告诉 Apache 在另一个目录中查找。在下面的示例中，目录 /dir 可能有数千个丢失的文件，其文件类型可能存在于 /dir2 中。

例如我有：

```
domain.com/dir/ 
```

如果找不到文件，请尝试

```
domain.com/dir2/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:02:17.440

查看[RewriteCond 模式中的](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)**-f**以测试文件是否存在。因此，您将使用以下内容：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^dir/(.+)$ /dir2/$1 [L] 
```

如果文件不在 dir2 中，那么您会收到常规的 404 消息。

# c# - 为什么此代码中的锁定不起作用？

> ID：10099474
> 
> 赞同：7
> 
> 时间：2012-04-11T03:37:59.117
> 
> 标签：c#

我写了简单的代码（附件），但我不明白为什么某个块上的锁没有锁定范围。

编码 ：

```
 object locker = new object();
    private void foo(int i)
    {
        Console.WriteLine( string.Format( "i is {0}", i ) );
        lock( locker )
        {
            while( true )
            {
                Console.WriteLine( string.Format( "i in while loop is {0}", i ) ) ;
                foo( ++i );
            }
        }
    } 
```

我希望在 while 循环中调用 foo 方法将一直等到 locker 将被释放（ locker 范围） - 但 foo 的所有调用 ++i 的 arg 都可以进入 locker 块。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T03:42:34.907

这里使用的锁是可重入的。它会阻止另一个线程进入监视器，但持有锁的线程不会被阻塞。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T03:42:55.653

lock 关键字只是`Monitor.Enter`and`Monitor.Exit`方法的语法糖。如[文档](http://msdn.microsoft.com/en-us/library/de0542zz.aspx)中所示`Monitor`：

> 同一个线程在没有阻塞的情况下多次调用 Enter 是合法的；

`lock(object)`从同一个线程多次调用除了增加锁计数之外没有任何作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T03:42:53.767

如果您在同一个线程上，则锁定不适用。请参阅[http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T04:04:40.023

当您在线程 t1 上进行递归调用时，它并没有脱离单独的线程。递归调用是在同一个线程 t1 上进行的。

由于 t1 已经持有锁，它不必等待锁。

# spring - 在 jquery AJAX 响应之后用 jquery 重新调用可折叠效果

> ID：10099476
> 
> 赞同：0
> 
> 时间：2012-04-11T03:38:22.733
> 
> 标签：spring, jquery, jsf-2

我在通过 jquery 给出的 html 表中有一个可折叠的行效果。如果没有 ajax 轮询，这可以正常工作，但是当 ajax 更新发生时，崩溃效果将不起作用，我在这里做错了什么。

注意：有时当用户单击 + 号时，它会变为 - 号，但行不显示，而且大多数情况下，即使双击也适用

.xhtml 页面

```
<tbody>
<ui:repeat var="trY" value="#{dataBean.bdata}">
<tr class="main-#{trY.symbol}">
<td><span id="more-#{trY.symbol}">
    <ui:fragment rendered="#{trY.has == '+'}">
    <a id="a-#{trY.symbol}" class="plus" href="#" style="color: black;" name="+">+</a>
    </ui:fragment>
    </span>
</td>
    </tr>
    <ui:repeat var="trB" value="#{trY.comp}" varStatus="st">
<tr class="orB-#{trY.symbol}">
<td class="tbl_column_buy1">
       <div class="qty_margins">
       <span id="orBbidQty-#{trY.symbol}#{st.index}">#{trB.bidQuantity}</span>
       </div>
</td>
<td class="tbl_column_buy2">
     <div class="qty_margins">
      <span id="orBbidPrice-#{trY.symbol}#{st.index}">#{trB.bidPrice}</span>
     </div>
</td>
<td>&nbsp;</td>
</tr>
</ui:repeat>
</tbody> 
```

jQuery 脚本

```
$(document).ready(function() { 
    $('.orB').hide();
    $(".plus").click(function(){
        var id = $(this).attr('id');
                id = id.split('-');

        if($("#a-"+id[1]).html() == '+'){
            $(".orB-"+id[1]).show();
            $("#a-"+id[1]).html("-"); 
        }else if($("#a-"+id[1]).html() == '-'){
            $(".orB-"+id[1]).hide();
            $("#a-"+id[1]).html('+');
        }
        return false;
    });    
});

    function orBK(){
            $(".plus").click(function(){
        var id = $(this).attr('id');
                id = id.split('-');

        if($("#a-"+id[1]).html() == '+'){
            $(".orB-"+id[1]).show();
            $("#a-"+id[1]).html("-"); 
        }else if($("#a-"+id[1]).html() == '-'){
            $(".orB-"+id[1]).hide();
            $("#a-"+id[1]).html('+');
        }
        return false;
    });   
    }
    /* ajax timer to update */        
    $(document).ready(function() {
    var i = setInterval(function ()
                {

                    $.ajax({
                          type : "POST",
                          url : 'http://localhost:8080/myproject/faces/trade/dataPage.xhtml',
                          dataType : "json",

                          success: function(data) {

                           $.each(data, function(i, item) {

                 if(data[i].Has == "+" ){
                   $("span[id*='more-"+data[i].Symbol+"']").html("<a id='a-"+data[i].Symbol+"' class='plus' href='#' style='color: black;'>+</a>");
                 }
                 if(data[i].comp != null){
                    for(var j=0; j<data[i].comp.length; j++){
                        $("span[id*='orBbidQty-"+data[i].Symbol+""+j+"']").text(item.comp[j].BidQuantity);
                        $("span[id*='orBbidPrice-"+data[i].Symbol+""+j+"']").text(item.comp[j].BidPrice);
                    }
                 }
                        });   
                           $(".plus").unbind('click', orBK);
                           $(".plus").bind('click', orBK);
                          },
                          error : function() {
                            alert("Sorry, The requested property could not be found.");
                          }
                        });
                }, 4000);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:02:54.913

首先，Javascript 区分大小写。您的函数名为`orBK`，但在您的 AJAX 更新中您重新绑定为`orBk`. 其次，`orBK`分配一个点击处理程序，但它本身正在分配另一个点击处理程序。最后，查找 jQuery 委托事件绑定（`.live`在旧版本中，`.on`在较新版本中）。你不需要重新绑定你的处理程序。

# linux-kernel - 获取 Kconfig 文件中环境变量值的语法

> ID：10099478
> 
> 赞同：7
> 
> 时间：2012-04-11T03:38:28.443
> 
> 标签：linux-kernel

谁能给我提供在 Kconfig 文件中获取环境变量值的语法？

根据环境变量的值，我需要有条件地获取另一个 Kconfig 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T22:18:38.867

您需要使用“option env”在配置符号中捕获环境变量的值，如下所示：

```
配置 ENV_VAR
    细绳
    选项 env="ENV_VAR"

如果 ENV_VAR = "foo"
源“foo_file”
万一

```

作为旁注，“源”语句中的 $-references 指的是配置变量，而不是环境变量。你不能做类似的事情

```
来源“foo/$ENV_VAR/Kconfig”

```

你将需要做

```
配置 ENV_VAR_SYM
    细绳
    选项 env="ENV_VAR"

源“foo/$ENV_VAR_SYM/Kconfig”

```

（ENV_VAR_SYM 当然也可以称为 ENV_VAR；我只是更改了名称以澄清事情。）

另一个示例，请参见内核根目录中的顶级 Kconfig 文件。

（我是 Kconfiglib [Kconfiglib](https://github.com/ulfalizer/Kconfiglib)的作者，这是一个用于处理基于 Kconfig 的配置系统的库。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T04:39:54.990

根据[kconfig 文档](http://kernel.org/doc/Documentation/kbuild/kconfig-language.txt)：

```
<expr> ::= <symbol>                             (1)
           <symbol> '=' <symbol>                (2)
           <symbol> '!=' <symbol>               (3)
           '(' <expr> ')'                       (4)
           '!' <expr>                           (5)
           <expr> '&&' <expr>                   (6)
           <expr> '||' <expr>                   (7)

- misc options: "option" <symbol>[=<value>]

  - "env"=<value>
  This imports the environment variable into Kconfig.

if:

    "if" <expr>
    <if block>
    "endif"

This defines an if block. The dependency expression <expr> is appended
to all enclosed menu entries.

source:

    "source" <prompt>

This reads the specified configuration file. This file is always parsed. 
```

所以我会尝试

```
option env="YOURVAR"
if YOURVAR=foo
    source "somefile"
endif
if YOURVAR!=foo
    source "someotherfile"
endif 
```

# ios - iOS 通知接收：有的可以，有的不能

> ID：10099479
> 
> 赞同：0
> 
> 时间：2012-04-11T03:38:31.190
> 
> 标签：ios, objective-c, uinavigationcontroller, nsnotifications

我使用 a`UINavigationController`来控制视图控制器的更改。假设我将 A1 和 A2 一个一个推入。A1 和 A2 都是我自定义的 View Controller A 的实例。A 已经注册了一个通知，它会在收到通知时刷新 UI。

我的问题是：
当我在 A2 中发布通知时，A2 可以收到它。
但是，当我弹出到 A1 时，A1 没有变化。

那么任何人都可以帮我解决它吗？

顺便说一句，我使用通知的原因是我可能会推送多个 A 的实例，如果任何一个发布通知，堆栈中的其他实例也需要更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:27:30.990

只是猜测，但

您是否在 viewDidLoad: 或 viewDidAppear: 中注册通知？您是在 viewDidUnload: 或 viewDidDisappear: 中注销吗？

通常，使用出现/消失方法注册通知是最好的选择，因为视图控制器只会对可见的通知感兴趣。

但是，无论您使用哪种方法，请确保您的注册和取消注册调用在匹配的 UIViewController 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:03:53.423

以下是您的问题 - 我的问题是：当我在 A2 中发布通知时，A2 可以收到它。但是，当我弹出到 A1 时，A1 没有变化。

当您弹出到 A1 时，那时 A2 被释放，并且您在那里创建的通知/侦听器也被删除，因此它不会响应通知。现在，如果您希望 A1 也收听通知，那么您还需要在 A1 中添加观察者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:17:03.347

奇怪的是，在我重新启动 Xcode(4.3.1 (4E1019)) 后它可以收到通知。

谢谢你们的帮助。

顺便说一句，如果对象没有被释放，它将收到通知。

# join - 关联映射还是加入？

> ID：10099480
> 
> 赞同：0
> 
> 时间：2012-04-11T03:38:32.453
> 
> 标签：join, doctrine, associations, codeigniter-2

我是 Doctrine 的新手，我才刚刚想到实体，这太棒了。

我有两个表，其中包含有关消息的信息。

Msg_links 有一个

*   msg_ID 字段
*   to_user
*   is_read。

Msg_content 有

*   内容键
*   msg_text
*   from_user
*   时间戳。

当在我的应用程序中生成一条消息时，如果它是从 1 个用户到 1 个用户，它会在两个表中生成内容，并且在显示时，来自 Msg_links 的 msg_ID 是相对于 content_key 的。

如果有一条消息发送给 2 个用户，那么 msg_content 表中将只有一行，但 msg_links 中有两行。我希望这是有道理的。

当我的代码显示邮件时，它需要链接两个表。我之前在 mysql 中使用 VIEW 或使用内部连接完成了此操作。

如果我正确理解关联映射，它更像是一个连接实体。哪里近？

那么我需要弄清楚关联映射并使用它，还是使用 querybuilder 进行连接？

（请注意，我也在使用 CodeIgniter2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:16:49.743

通过教义加入。

```
$query = $this->doctrine->em->createQuery("SELECT a.firstname, b.lastname FROM ORM\Testing\Firstnames a JOIN a.mylastname b WHERE b.id = $whichFamily"); 
```

# php - 从另一个数组创建动态树数组

> ID：10099487
> 
> 赞同：1
> 
> 时间：2012-04-11T03:40:00.463
> 
> 标签：php, arrays

我有一个数组，我们称之为 $childrenIds，它的输出如下：

```
array(

[74252] => Array
    (
        [0] => 1753
        [1] => 1757
        [2] => 1758
        [3] => 1760
    )

[74238] => Array
    (
        [0] => 1753
        [1] => 1755
        [2] => 1758
        [3] => 1761
    )

[76476] => Array
    (
        [0] => 1754
        [1] => 1755
        [2] => 1758
        [3] => 1763
    )

[76478] => Array
    (
        [0] => 1754
        [1] => 1756
        [2] => 1758
        [3] => 1763
    )

[76480] => Array
    (
        [0] => 1754
        [1] => 1757
        [2] => 1758
        [3] => 1763
    )

[74253] => Array
    (
        [0] => 1753
        [1] => 1757
        [2] => 1759
        [3] => 1760
    ) 
```

); 我需要做的是从中创建一个新数组，其中例如 [74252] 被忽略，但每个子数组的子数组都被路径...

因此，使用此示例，我的输出将类似于：array(

```
[1753] => Array
(
    [1757] => Array
    (
        [1758] => Array
        (
            1760
        ),
        [1759] => Array
        (
            1760
        ),
    )
    [1755] =>  Array
        (
            1758 =>  Array
            (
                1761
            )
        )
    )
),
[1754] => Array
(
    [1755] => Array
    (
        [1758] => Array
        (
            1763
        )
    ),
    [1756] => Array
    (
        [1758] => Array
        (
            1763
        )
    ),
    [1757] => Array
    (
        [1758] => Array
        (
            1763
        )
    )
)
); 
```

所以不会总是有4个子数组元素，那是动态的......

父母只是基于该数组的索引。所以... index[0] 是 index[1] 的父级， index[1] 是 index[2] 的父级，依此类推。

另外，我想以所有唯一路径结束，每个路径没有重复值。

希望我已经清楚地解释了这一点，一直在寻找几个小时，但找不到满足我所有要求的解决方案，如果我忽略了一个，我提前道歉。

谢谢

**更新**

与传递数组相反，我最终传递了一个下划线分隔的字符串，然后使用此函数：

```
function explodeTree($array, $delim = '/')
{
$tree = array();

foreach($array as $elem)
{
    //  Split our string up, and remove any blank items
    $items = explode($delim, $elem);
    $items = array_diff($items, array(''));

    //  current holds the current position in the tree
    $current = &$tree;

    foreach($items as $item)
    {
        //  If we've not created this branch before, or there is
        //  a leaf with the same name, then turn it into a branch
        if(!isset($current[$item]) || !is_array($current[$item]))
        {
            $current[$item] = array();
        }

        //  Update our current position to the branch we entered
        //  (or created, depending on the above if statement)
        $current = &$current[$item];
    }

    //  If the last value in this row is an array with 0 elements
    //  then (for now) we will consider it a leaf node, and set it
    //  to be equal to the string representation that got us here.
    if(count($current) == 0)
    {
        $current = $elem;
    }
}

return $tree;
} 
```

找到@： [http](http://project-2501.net/index.php/2007/10/explodetree/)
://project-2501.net/index.php/2007/10/explodetree/ 和：http: [//kevin.vanzonneveld.net/techblog/article/convert_anything_to_tree_structures_in_php/](http://kevin.vanzonneveld.net/techblog/article/convert_anything_to_tree_structures_in_php/)

我能够获得预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:26:50.717

对于数组中的第一个元素：

```
[74252] => Array
    (
        [0] => 1753
        [1] => 1757
        [2] => 1758
        [3] => 1760
    ) 
```

表示的路径基本上是

```
[0] => 1753
[1] => 1753/1757
[2] => 1753/1757/1758
[3] => 1753/1757/1758/1760 
```

你可能可以用这样的东西来解决（未经测试）。explodeTree 函数来自[http://kevin.vanzonneveld.net/techblog/article/convert_anything_to_tree_structures_in_php/](http://kevin.vanzonneveld.net/techblog/article/convert_anything_to_tree_structures_in_php/)我假设它像宣传的那样工作。我自己从来没有用过。

```
$pathArray = array();
foreach($startArray as $subArray) {
    $pathStr = '';

    foreach($subArray as $v) {
        $pathStr = $pathStr.'/'.$v;
        $pathArray[]=$pathStr;
    }        
}

$pathArray = array_unique($pathArray);
$treeArray = explodeTree($pathArray, "/"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:03:49.810

**代码：（** ***更新）***

```
$newarr = array();

function getElem($sub,$n)
{
    $res = array();

    if ($n==count($sub)-1)
        $res[]=$sub[$n];
    else
        $res[$sub[$n]] = getElem($sub,$n+1);

    return $res;
}

foreach ($arr as $subarr)
{
    $newarr[$subarr[0]] = getElem($subarr,1);
}

print_r($newarr); 
```

* * *

**输入 ：**

```
$arr=
array(

74252 => Array
    (
        0 => 1753,
        1 => 1757,
        2 => 1758,
        3 => 1760
    ),

74238 => Array
    (
        0 => 1753,
        1 => 1755,
        2 => 1758,
        3 => 1761
    ),

76476 => Array
    (
        0 => 1754,
        1 => 1755,
        2 => 1758,
        3 => 1763
    ),

76478 => Array
    (
        0 => 1754,
        1 => 1756,
        2 => 1758,
        3 => 1763
    )
); 
```

**输出 ：**

```
Array
(
    [1753] => Array
        (
            [1755] => Array
                (
                    [1758] => Array
                        (
                            [0] => 1761
                        )

                )

        )

    [1754] => Array
        (
            [1756] => Array
                (
                    [1758] => Array
                        (
                            [0] => 1763
                        )

                )

        )

) 
```

# php - 将 LaTeX 标记转换为 HTML

> ID：10099490
> 
> 赞同：5
> 
> 时间：2012-04-11T03:40:24.760
> 
> 标签：php, latex, word, preg-replace, adobe-indesign

**[更新]**

这是我的任务——将一堆自定义构建的 LaTeX 文件转换为 InDesign。所以我目前的方法是：通过 PHP 脚本运行 .tex 文件，将自定义 LaTeX 代码更改为更通用的 TeX 代码，然后我使用 TeX2Word 将它们转换为 .doc 文件，然后将它们放入 InDesign。

我想要做的`preg_replace`是转换一些 TeX 标签，以便 TeX2Word 不会触及它们，然后我将能够在 InDesign 中运行一个脚本，将类似 HTML 的标签更改为 InDesign 文本框架、脚注、变量等。

**[/更新]**

我有一些带有 LaTeX 标记的文本：

```
$newphrase = "\blockquote{\hspace*{.5em}Lorem ipsum dolor sit amet, consectetur
adipiscing elit. Integer posuere erat a ante venenatis dapibus posuere
velit aliquet. Aenean lacinia bibendum nulla sed consectetur. Aenean
eu leo quam. Pellentesque ornare sem lacinia quam venenatis
vestibulum. Sed posuere consectetur est at lobortis. \note{Integer
posuere erat a ante venenatis dapibus posuere velit aliquet.
\textit{Vivamus} sagittis lacus vel augue laoreet rutrum faucibus
dolor auctor.}}"; 
```

我想要做的是删除`\blockquote{...}`并替换它`<div>...</div>`

所以我尝试了很多不同的版本：

```
$regex = "#(blockquote){(.*)(})#";
$replace = "<div>$2</div>";
$newphrase = preg_replace($regex,$replace,$newphrase); 
```

这是输出

```
\<div>\hspace*{.5em</div>Lorem ipsum dolor sit amet, consectetur
adipiscing elit. Integer posuere erat a ante venenatis dapibus posuere
velit aliquet. Aenean lacinia bibendum nulla sed consectetur. Aenean
eu leo quam. Pellentesque ornare sem lacinia quam venenatis
vestibulum. Sed posuere consectetur est at lobortis. \note{Integer
posuere erat a ante venenatis dapibus posuere velit aliquet.
\textit{Vivamus} sagittis lacus vel augue laoreet rutrum faucibus
dolor auctor.}}"; 
```

它的第一个问题是它替换了从`\blockquote{`到 first 的所有内容`}`。当我希望它忽略下一个`}`时，如果`{`在最初的`\blockquote{`.

我遇到的下一个问题是`\`我似乎无法逃脱它！我试过了`\\`, `/\\/`, `\\\`, `/\\\/`, `[\]`, `[\\]`. 没有任何作用！我确定这是因为我不明白它应该如何工作。

所以最后，这就是我想要的结果：

```
<div>\hspace*{.5em}Lorem ipsum dolor sit amet, consectetur
adipiscing elit. Integer posuere erat a ante venenatis dapibus posuere
velit aliquet. Aenean lacinia bibendum nulla sed consectetur. Aenean
eu leo quam. Pellentesque ornare sem lacinia quam venenatis
vestibulum. Sed posuere consectetur est at lobortis. \note{Integer
posuere erat a ante venenatis dapibus posuere velit aliquet.
\textit{Vivamus} sagittis lacus vel augue laoreet rutrum faucibus
dolor auctor.}</div>"; 
```

我打算将`$regex`&制作`$replace`成数组，所以我可以`\textit{Vivamus}`用这个替换类似的东西`<em>Vivamus</em>`

任何指导都将受到欢迎和赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:08:37.820

如果您仍想自己进行转换，您可以通过字符串多次传递，首先替换内部元素：

```
$t = '\blockquote{\hspace*{.5em}Lorem ipsum dolor sit amet, consectetur
adipiscing elit. Integer posuere erat a ante venenatis dapibus posuere
velit aliquet. Aenean lacinia bibendum nulla sed consectetur. Aenean
eu leo quam. Pellentesque ornare sem lacinia quam venenatis
vestibulum. Sed posuere consectetur est at lobortis. \note{Integer
posuere erat a ante venenatis dapibus posuere velit aliquet.
\textit{Vivamus} sagittis lacus vel augue laoreet rutrum faucibus
dolor auctor.}}';

function hspace($m) { return "<br />"; }
function textit($m) { return "<i>" . $m[1] . "</i>"; }
function note($m) { return "<b>" . $m[1] . "</b>"; }
function blockquote($m) { return "<quote>" .  $m[1] . "</quote>"; }

while (true) {
  $newt = $t;
  $newt = preg_replace_callback("/\\\\hspace\\*\\{([^{}]*?)\\}/", "hspace", $newt);
  $newt = preg_replace_callback("/\\\\textit\\{([^{}]*?)\\}/", "textit", $newt);
  $newt = preg_replace_callback("/\\\\note\\{([^{}]*?)\\}/", "note", $newt);
  $newt = preg_replace_callback("/\\\\blockquote{([^{}]*?)\\}/", "blockquote", $newt);

  if ($newt == $t) break;
  $t = $newt;
}

echo $t; 
```

当然，这可能适用于简单的示例，但您不能使用此方法正确解析整个 TeX 格式。对于较长的输入，它也变得非常无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:38:26.807

如上所述，您可以使用专用的 LaTeX 到 HTMl 转换器，例如：[SimpleTex4ht](http://www.simpletex4ht.free.fr/)。

# python - Python 的 unittest 模块如何检测测试用例？

> ID：10099491
> 
> 赞同：22
> 
> 时间：2012-04-11T03:40:36.467
> 
> 标签：python, unit-testing

我想知道当我们运行时`unittest.main()`，Python 怎么知道子类`unittest.Testcase`有什么？

例如，如果我添加一个类`FromRomanBadInput(unittest.TestCase)`，如何`unittest`知道运行它？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-11T05:07:22.057

`Python27/Lib`所以我在我的目录中四处寻找......

`unittest.main`实际上是一个类的别名，`unittest.TestProgram`. 所以发生的事情是你构建了一个 this 的实例，并`__init__`运行它，它会进行一系列健全性检查和配置，包括你从中调用它的模块的动态导入（它使用`__import__`函数，`__main__`作为模块的名称导入，默认情况下）。所以现在它有一个`self.module`属性，其中包含一个代表您的源的模块对象。

最终，它得到了这段代码：

```
self.test = self.testLoader.loadTestsFromModule(self.module) 
```

`self.testLoader`的实例在哪里`unittest.TestLoader`。该方法包括，除其他外：

```
 for name in dir(module):
        obj = getattr(module, name)
        if isinstance(obj, type) and issubclass(obj, case.TestCase):
            tests.append(self.loadTestsFromTestCase(obj)) 
```

因此，它使用`dir`您的模块对象来获取您定义的所有全局变量（包括类）的名称，将其过滤到仅派生自的类`unittest.TestCase`（本地，`case.TestCase`是该类的别名），然后在内部查找测试方法那些要添加到`tests`列表中的类。该搜索的行为类似：

```
 def isTestMethod(attrname, testCaseClass=testCaseClass,
                     prefix=self.testMethodPrefix):
        return attrname.startswith(prefix) and \
            hasattr(getattr(testCaseClass, attrname), '__call__')
    testFnNames = filter(isTestMethod, dir(testCaseClass)) 
```

因此它使用`dir`类的 来获取要尝试的名称列表，查找具有这些名称的属性，并选择那些以`self.testMethodPrefix`(`'test'`默认情况下) 开头且可调用的属性（依次具有`__call__`属性）。（我真的很惊讶他们在这里不使用内置`callable`函数。我想这是为了避免使用嵌套类。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T04:29:03.620

'main' 函数在导入的模块中搜索所有继承了 unittest.TestCase 的类。和当前路径，然后尝试运行以“测试”开头的每个方法

来自[python的文档](http://docs.python.org/library/unittest.html)：

```
import random
import unittest

class TestSequenceFunctions(unittest.TestCase):

    def setUp(self):
        self.seq = range(10)

    def test_shuffle(self):
        # make sure the shuffled sequence does not lose any elements
        random.shuffle(self.seq)
        self.seq.sort()
        self.assertEqual(self.seq, range(10))

        # should raise an exception for an immutable sequence
        self.assertRaises(TypeError, random.shuffle, (1,2,3))

    def test_choice(self):
        element = random.choice(self.seq)
        self.assertTrue(element in self.seq)

    def test_sample(self):
        with self.assertRaises(ValueError):
            random.sample(self.seq, 20)
        for element in random.sample(self.seq, 5):
            self.assertTrue(element in self.seq)

if __name__ == '__main__':
    unittest.main() 
```

> 测试用例是通过继承 unittest.TestCase 来创建的。这三个单独的测试是用名称以字母 test 开头的方法定义的。此命名约定告知测试运行程序哪些方法代表测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-13T13:18:45.227

我写了一些代码，试图做与下面的 unittest.main() 类似的行为。总之，我遍历模块，对于不以名称“unittest”开头的模块，我检查它的成员。然后，如果这些成员是一个类并且是 unittest.TestCase 的子类，我会解析该类的成员。然后，如果这些类的成员是以“test”开头的函数或方法，我将其添加到测试列表中。类对象的`__dict__`用于内省方法/函数，因为使用 inspect.getmembers 可能会显示太多。最后，该测试列表被转换为一个元组并包装为一个套件。然后使用运行程序以详细级别 2 运行该套件。请注意，当然，可以删除在函数/方法名称开头检查“test”的正则表达式，以将 bar_test() 包含到测试列表中如果你不想要那个限制。

```
#!/usr/bin/env python

import unittest
import inspect
import sys
import re

class Foo(unittest.TestCase):
   @staticmethod
   def test_baz():
      pass

   @classmethod
   def test_mu(cls):
      pass

   def test_foo(self):
      self.assertEqual('foo', 'foo')

   def bar_test(self):
      self.assertEqual('bar', 'bar')

class Bar:
   pass

if __name__ == '__main__':
   runner = unittest.TextTestRunner(verbosity=2)
   tests = []
   is_member_valid_test_class = lambda member: inspect.isclass(member) and \
      issubclass(member, unittest.TestCase)

   for module_name, module_obj in sys.modules.items():
      if not re.match(r'unittest', module_name):
         for cls_name, cls in inspect.getmembers(
            module_obj, is_member_valid_test_class):
            for methname, methobj in cls.__dict__.items():
               if inspect.isroutine(methobj) and re.match(r'test', methname):
                  tests.append(cls(methname))

   suite = unittest.TestSuite(tests=tuple(tests))
   runner.run(suite) 
```

结果输出是：

```
test_foo (__main__.Foo) ... ok
test_baz (__main__.Foo) ... ok
test_mu (__main__.Foo) ... ok

----------------------------------------------------------------------
Ran 3 tests in 0.001s

OK 
```

# android - 将更改的自定义列表视图编辑文本值更新为 android 中的 mysql 数据库

> ID：10099493
> 
> 赞同：0
> 
> 时间：2012-04-11T03:40:37.660
> 
> 标签：android, android-listview

```
 listview
       jArray = new JSONObject(result);
         json = jArray.getJSONArray("mainmenu");
        list = (ListView) findViewById(R.id.mainmenulist);
        adapter = new EditMainMenulistview(this, json);
        list.setAdapter(adapter);
         EditMainMenulistview

        public class EditMainMenulistview extends BaseAdapter {
public final ArrayList<String> arr=new ArrayList<String>();
protected static Context Context = null;
int i;
public String editnewmainmenu, menuname,edittext;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname, itemcode;
public String[] itemnames, itemcodes;
HashMap<String, String> map = new HashMap<String, String>();

public EditMainMenulistview(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.itemcodes = new String[imageArrayJson.length()];

    try {

        for (i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);
            qrimage = image.getString("menuimage");
            itemname = image.getString("menuname");
            itemcode = image.getString("menucode");
            itemnames[i] = itemname;
            itemcodes[i] = itemcode;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(itemnames[i]);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;

    if (convertView == null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.editmainmenulist, null);
        holder.caption = (EditText) convertView
                .findViewById(R.id.editmaimenu);
        holder.caption1=(ImageView) convertView.findViewById(R.id.menuimage);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    //Fill EditText with the value you have in data source
    holder.caption.setText(itemnames[position]);
    holder.caption.setId(position);
    holder.caption1.setImageBitmap(bmps[position]);

    //we need to update adapter once we finish with editing
    holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
        if(!hasFocus)
        {
                final int position = v.getId();
                final EditText Caption = (EditText) v;

                holder.caption.setFocusable(true);

                arr.add(holder.caption.getText().toString());

        }
            }

    });  

    return convertView;
}
 }

     class ViewHolder {
EditText caption;
ImageView caption1;
    }

     class ListItem {
String caption;
 } 
```

如果我可以更改所有 ediitext 值并发送到 mysql 数据库，我可以替换旧的菜单名称。如果我无法更新 2 个菜单名称..请告诉我.................................................. ………………………………………………………………………………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:52:51.143

使用[getText()](http://developer.android.com/reference/android/widget/EditText.html#getText%28%29)方法..获取所有这些值，然后更新您的数据库（但我认为这不是您要查找的内容...但您的问题尚不清楚）..

这是您需要遵循的步骤..

使用[findViewByID()](http://developer.android.com/reference/android/app/Activity.html#findViewById%28int%29)获取所有编辑文本的引用，然后使用 getText 方法获取所有这些文本，然后使用这些值更新数据库。

代替 ArrayList 使用 HashMap.. 并在您的代码中进行这些更改..

```
public class EditMainMenulistview extends BaseAdapter {
public final HashMap<String, String> arr=new HashMap<String, String>;
protected static Context Context = null;
int i;
public String editnewmainmenu, menuname,edittext;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname, itemcode;
public String[] itemnames, itemcodes;
HashMap<String, String> map = new HashMap<String, String>();

public EditMainMenulistview(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.itemcodes = new String[imageArrayJson.length()];

    try {

        for (i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);
            qrimage = image.getString("menuimage");
            itemname = image.getString("menuname");
            itemcode = image.getString("menucode");
            itemnames[i] = itemname;
            itemcodes[i] = itemcode;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(itemnames[i]);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;

    if (convertView == null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.editmainmenulist, null);
        holder.caption = (EditText) convertView
                .findViewById(R.id.editmaimenu);
        holder.caption1=(ImageView) convertView.findViewById(R.id.menuimage);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    //Fill EditText with the value you have in data source
    holder.caption.setText(itemnames[position]);
    holder.caption.setId(position);
    arr.add(position,itemnames[position]);
    holder.caption1.setImageBitmap(bmps[position]);

    //we need to update adapter once we finish with editing
    holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
        if(!hasFocus)
        {
                final int position = v.getId();
                final EditText Caption = (EditText) v;

                holder.caption.setFocusable(true);
                arr.remove(holder.caption.getId());
                arr.add(holder.caption.getId(),holder.caption.getText().toString());

        }
            }

    });  

    return convertView;
}
 }

     class ViewHolder {
EditText caption;
ImageView caption1;
    }

     class ListItem {
String caption;
 } 
```

# google-chrome-extension - 在闭包中应用建议回调时出错

> ID：10099494
> 
> 赞同：0
> 
> 时间：2012-04-11T03:40:46.070
> 
> 标签：google-chrome-extension

```
chrome.omnibox.onInputChanged.addListener(function(text, suggestionsCallback){
    ....
    $.get(url_base + text, function(data){
        ....
        suggestionsCallback(suggest_results); 
```

在我的回调闭包中“suggestionCallback”无效。但是如果我把这个回调线放在闭包之外，这条线就可以正常工作。

这是Chrome的错误吗？或者，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:48:08.733

我对jquery一无所知，只是对细节感到恐惧，所以我无法向您解释为什么它不起作用。但在我的测试中，我注意到以非 jquery 方式进行操作是可行的，所以尝试这样的事情......

```
chrome.omnibox.onInputChanged.addListener(
function(text, suggest) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url_base + text, true);
    xhr.onload = function(e) {
        if (this.status == 200) {
            suggest(suggest_results);
        } else {
            //error, not found or something
            console.debug('Im bugging out man!');
        }
    }
    xhr.send();
}); 
```

# java - 根据关键字（特别是城市或国家）在线动态获取图像

> ID：10099495
> 
> 赞同：2
> 
> 时间：2012-04-11T03:41:06.063
> 
> 标签：java, image, gwt, google-image-search

我正在开发一个处理旅行的网络应用程序。我希望能够获取特定地理位置的图片（或多张图片）并将其显示给用户。

我进行了一些搜索并找到了几个可能的解决方案，不幸的是我的第一选择（谷歌图片搜索）已被弃用。

最好，我想要一个客户端 GWT 库，但如果这不是一个选项，那么 Java 库就足够了。

有什么建议么？

基本目的是为用户想要前往的每个城市/国家/地区制作一张图片。如果有另一种更简单的方法来完成这项任务，请告诉我（我知道从网上抓取图像并将它们保存在本地是一种选择，但这不仅是非法的，而且效率非常低且容易出错 - - 所以这不是一个选择）。

谢谢，

弗拉基米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:57:05.137

谷歌街景图像 API 怎么样？只需按照文档构造一个 URL，Google Street View Image API 就会返回对应的图片。

[https://developers.google.com/maps/documentation/streetview/](https://developers.google.com/maps/documentation/streetview/)

# c - 为什么FILE指针不能读取文件中的内容？

> ID：10099498
> 
> 赞同：0
> 
> 时间：2012-04-11T03:41:44.220
> 
> 标签：c, file, pointers

我正在尝试从文件 yh.dat 中获取内容，该文件具有诸如“456 78921”之类的文本以及 C 的其他内容。但是当我尝试调试代码时，FILE 指针不是 NULL(0x00428af8) 和 _ptr _base 为 NULL(0x000000)。他们说“CXX0030：错误：无法评估表达式”。如何解决？

```
int main(){
   FILE *fp=NULL;
   fp=fopen("yh.dat","rb");
   if(fp==NULL)
   {
        printf("error");
    exit(0);
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:45:30.413

为了允许您更改文件缓冲，C 不会为文件设置缓冲区，直到您发出第一次读取。因此，除非您尝试至少一次读取，否则 FILE * 指向的任何结构的成员都处于仅半初始化状态是正常的。

您是否尝试过仅读取数据以查看其是否有效？

# php - 如何使用jquery触发单击或解决方法实现无限滚动

> ID：10099499
> 
> 赞同：0
> 
> 时间：2012-04-11T03:41:44.683
> 
> 标签：php, jquery, ajax, wordpress, buddypress

我试图在 div 内无限滚动以根据此主题中的设置工作。它在列表底部有一个“加载更多”链接，单击该链接时，将通过 ajax 加载内容。我正在使用 WP（最新）和 Buddypress（最新）。我发现了一个基本绕过它的小技巧，因为我不是最擅长查询和 php。它工作了一半，因为它确实触发了触发的“点击”并加载了内容，但是每次用户继续滚动时，它都会继续加载内容。它加载最后两组（重复），然后在每次滚动没有要加载的内容时给出错误，默认情况下仅在页面加载期间没有要加载的内容时显示。首先，这是“加载更多”链接用于工作的脚本：

```
jq('div.activity').click( function(event) {
    var target = jq(event.target);

    if ( target.parent().hasClass('load-more') ) {
        jq("li.load-more").addClass('loading');

        if ( null == jq.cookie('bp-activity-oldestpage') )
            jq.cookie('bp-activity-oldestpage', 1, {path: '/'} );

        var oldest_page = ( jq.cookie('bp-activity-oldestpage') * 1 ) + 1;

        jq.post( ajaxurl, {
            action: 'activity_get_older_updates',
            'cookie': encodeURIComponent(document.cookie),
            'page': oldest_page
        },
        function(response)
        {
            jq("#content li.load-more").removeClass('loading');
            jq.cookie( 'bp-activity-oldestpage', oldest_page, {path: '/'} );
            jq("#content ul.activity-list").append( response.contents, function(){

            jq('li.post').hide().each(function(index) {
                timeOuts[index] = setTimeout(myFadeIn, index*100, jq(this));
            });
            });
            target.parent().hide();

        }, 'json' );

        return false;
    }
});
}); 
```

这是当用户滚动到#content div末尾时触发单击该链接的小工作：

```
jq( function($) {
$('#content').bind('scroll', function() {
    if($(this).scrollTop() + 
       $(this).innerHeight()
        >= $(this)[0].scrollHeight)
       {
        jq("#content li.load-more a").trigger('click', function(e){
        e.preventDefault();
        });

        }
     })
}); 
```

这是包含循环的 Html 以防万一：

```
<div id="content">
<div class="activity">
<?php if ( bp_has_activities( bp_ajax_querystring( 'activity' ) ) ) : ?>

<?php /* Show pagination if JS is not enabled, since the "Load More" link will do nothing */ ?>
<noscript>
    <div class="pagination">
        <div class="pag-count"><?php bp_activity_pagination_count(); ?></div>
        <div class="pagination-links"><?php bp_activity_pagination_links(); ?></div>
    </div>
</noscript>

<?php if ( empty( $_POST['page'] ) ) : ?>

    <ul id="activity-stream" class="activity-list item-list">

<?php endif; ?>

<?php while ( bp_activities() ) : bp_the_activity(); ?>

    <?php locate_template( array( 'activity/entry.php' ), true, false ); ?>

<?php endwhile; ?>

<?php if ( bp_activity_has_more_items() ) : ?>

    <li class="load-more yori">
        <a class="thiss" href="#more"><?php _e( 'Load More', 'buddypress' ); ?></a>
    </li>

<?php endif; ?>

<?php if ( empty( $_POST['page'] ) ) : ?>

    </ul>

<?php endif; ?>

<?php else : ?>

<div id="message" class="info">
    <p><?php _e( 'Sorry, there was no activity found. Please try a different filter.', 'buddypress' ); ?></p>
</div>

<?php endif; ?>

</div>
</div> 
```

正如我所说，它可以工作，但它带有错误并且相当草率，因为我知道有一种更清洁的方法可以完成这个哈哈。这就是我想要弄清楚的。我尝试了很多无限滚动插件，包括来自 WP 的那个，但它们似乎不适用于我正在尝试做的事情。我认为这与 Buddypress 设置“加载更多”的方式有关。没有什么是不可能的，这就是为什么我需要你们帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:15:24.057

我已经实现了这个功能，我在这里用代码片段解释它供你应用。干杯；）

[http://buddypress.org/community/groups/creating-extending/forum/topic/auto-load-more-activity-stream-items-when-scroll-reaches-the-bottom-of-the-page/?topic_page =1&num=15](http://buddypress.org/community/groups/creating-extending/forum/topic/auto-load-more-activity-stream-items-when-scroll-reaches-the-bottom-of-the-page/?topic_page=1&num=15)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:33:56.337

使用这个 Wordpress 插件可能对你有用

```
http://wordpress.org/extend/plugins/infinite-scroll/ 
```

# ios - 翻转动画后 UISegmentedControl 变得扭曲

> ID：10099503
> 
> 赞同：0
> 
> 时间：2012-04-11T03:42:28.987
> 
> 标签：ios, uiviewanimation

我在主窗口上使用，同时通过设置数组`UIViewAnimationTransitionFlipFromRight`切换主视图控制器。`UINavigationController``viewControllers`

一切正常，除了`UISegmentedControl`导航栏中的 5 次随机扭曲大约 1 次。如果有人看到类似的东西并找到了解决方案，请告诉我。

生成的屏幕如下所示：

![在此处输入图像描述](../Images/5e843e4a47bbc2920f9eb0d17ba2848d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:57:31.827

当 iOS 定义了更高级别的转换 API 时，为什么要走这么原始的路线。例如，`UIModalTransitionStyleFlipHorizontal`使用与 大致相同的动画`UIViewAnimationTransitionFlipFromRight`，但通常使用***起来要***简单得多。它还允许显示导航控制器（正如我在屏幕截图中看到的那样），这反过来又允许从所述模态视图内部推送视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:58:44.353

如果在动画完成后调用`setNeedsDisplay`AFTER`UISegmentedControl`会发生什么？

# android - 在 Android 其他地方存储 res/drawable 图像？

> ID：10099516
> 
> 赞同：0
> 
> 时间：2012-04-11T03:44:30.333
> 
> 标签：android, drawable

我在项目的 res/drawable 文件夹中有几个图像文件。我正在使用安卓 3.2。我已经为操作栏适当地声明了图像：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/ports_page"
      android:icon="@drawable/ic_program"
      android:title="@string/main1"
      android:showAsAction="ifRoom|withText" />
<item android:id="@+id/listportingreds"
      android:icon="@drawable/ic_list"
      android:title="@string/listportingred"
      android:showAsAction="ifRoom|withText" /> 
```

ic_program.png 和 ic_list.png 都在 res/drawable 文件夹中。这些是外观不同的图标。问题是两个图像都显示为好像它们都是 ic_program。如果我双击 eclipse 中的图像，它们会正确打开，但在我的应用程序中，两个图像看起来完全一样。我什至取出了 ic_program，复制了 ic_list 并将副本重命名为 ic_program，它们看起来仍然像应用程序中的原始 ic_program。

这个其他图像是否可能缓存在某个地方？也许在 DDMS 的文件探索中？我似乎找不到它。这似乎是一件愚蠢的事情，但我不知道从哪里得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:05:13.080

您是否使用 Eclipse 导入了它们？如果您只是使用文件系统添加它们，则需要刷新项目，以便 Eclipse 将它们视为项目的一部分。如果不是这样，那么尝试 Luksporg 和 Macarse 的建议可能会有所帮助。

# authentication - Tomcat - 根据用户到达那里的方式使登录页面内容不同

> ID：10099519
> 
> 赞同：6
> 
> 时间：2012-04-11T03:45:00.003
> 
> 标签：authentication, tomcat, servlets, login

我在 Tomcat 中实现了一个基于 Web 的服务，并使用基于 Tomcat 容器的身份验证。我想要实现的是让登录页面根据用户到达那里的方式而有所不同。具体来说：

*   如果用户单击“登录”按钮，我希望登录页面只要求输入用户名和密码。我已经实现了登录按钮，以简单地将用户带到“登录”页面，并将该页面设为安全页面，以便触发容器登录。

*   如果未经身份验证的用户访问需要身份验证的页面，我希望登录页面也显示“您必须登录才能执行此操作”或类似的内容。

所以问题是让登录表单的控制器或 JSP 知道浏览器在重定向到这里时所请求的内容。我查看了请求对象中的标头和其他属性，但看不到任何有用的东西。

任何人都可以提出解决方案吗？或者也许是一种不同的方式来实现可以避免问题的“登录”按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T07:33:51.910

您可以使用它来确定原始请求的目标：

```
<%
String value0 = (String)request.
                getAttribute("javax.servlet.forward.request_uri");
if(value0.contains("login_success.jsp")) {
    out.print("USER, LOG IN!");
} else {
    out.print("USER, you have to LOG IN to go there!");
}
%> 
```

其他选项包括：

您可以实现登录按钮以重定向到URL`login success page`并将 a 添加`?MyKey=value`到 URL，该属性可以被看到`login page`并且您可以对其做出反应。

我将处理我的代码，将我能找到的所有内容和任何内容都绘制出来，并使其更具可读性，然后将其发布在这里。我**确信**用户下一步获得的值**存在**于您的某处`request`，您只需要找出在哪里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T14:33:06.917

您有几个选项，1 是标题“Referer” 此字段将包含浏览器最后所在的 URL...所以您可以在登录页面上看到，我的页面链接它们的最后一页是这里，还是其他地方.

这会起作用，但它不是万无一失的，有些人/公司会过滤掉引用者等，有些浏览器可能允许用户关闭它，所以你不会得到他们上次访问的页面的引用。

最好的办法是在用户登录时分配 cookie 值，然后如果用户请求需要登录的页面，您的代码只需检查 cookie 值是否存在。如果它在那里，则用户已经登录并且您可以显示该页面......如果不是，您发送给他们您必须登录才能执行此页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T22:01:02.923

我赞成@Angelo 对可移植性的回答，但是如果您愿意将您的应用程序绑定到Tomcat，您可以从保存在会话中的触发请求中获取目标目的地（用户登录后想要去的地方）。我还没有尝试过，但我认为它会起作用：

```
import org.apache.catalina.authenticator.Constants
import org.apache.catalina.authenticator.SavedRequest
import org.apache.catalina.session.StandardSession

...

StandardSession standardSession = 
    (StandardSession) httpServletRequest.getSession();

// Retrieve the SavedRequest object from our session
SavedRequest saved = (SavedRequest)
        standardSession.getNote(Constants.FORM_REQUEST_NOTE);
if ((saved == null) || 
    httpServletRequest.getRequestURI().equals(saved.getRequestURI())) {
    // user came directly to login page
} else {
    // "You must login to do this"
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T15:17:39.677

上述解决方案对我来说似乎倒退了。身份验证控制器不应该查看请求的来源来决定做什么......应该被告知。重定向控制器/规则应该知道他们想要做什么，并将其发送到适当的操作。

登录可以直接进入 servlet 的登录动作。

我不知道您的 servlet 是如何设置的，但是 servlet 应该在需要执行某些操作的情况下寻找身份验证。如果未通过身份验证，请重定向到身份验证操作。登录/验证操作会略有不同（设置参数或文本），但可以转到相同的视图。

话虽如此，从头开始进行身份验证需要大量工作，而且通常只引入其他框架要容易得多。例如：弹簧安全。

# javascript - Nodejs加载并执行文件

> ID：10099521
> 
> 赞同：1
> 
> 时间：2012-04-11T03:45:06.640
> 
> 标签：javascript, node.js

是否有可能让它返回一个输出？

**你好.js**

```
var y = 1;

console.log(x);
console.log(y); 
```

**main.js**

```
var x = 42;

var magic = somehowInclude('hello.js'); 
```

当您`main.js`使用节点运行时，它会打印`42`并`1`

`require`没有and可以做到这一点`exports`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:37:15.610

使用 Node.js 模块。

**你好.js**

```
module.exports.magic = function (x) {
  var y = 1;

  console.log(x);
  console.log(y);
}; 
```

**main.js**

```
var x = 42;

var hello = require('./hello.js');
hello.magic(42); 
```

阅读Node.js 文档中关于[模块加载系统的详细描述。](http://nodejs.org/api/modules.html)

# ios - 检测（当前）应用程序是否在 iOS 中被删除？

> ID：10099526
> 
> 赞同：6
> 
> 时间：2012-04-11T03:45:38.360
> 
> 标签：ios, notifications

我可以知道下载了我开发的应用程序的用户是否将其删除？如何放置标签，或请求当应用程序被删除时我收到对我的服务器的调用？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T03:47:18.650

删除应用程序时没有定义的通知。如果您必须与服务器通信，请在预定义的时间限制后暂停非活动帐户。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T17:51:39.923

如果为应用启用了推送，则可以查询[Apple 反馈服务](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW3)以获取删除该应用的设备列表。

# ruby-on-rails - 创建一种方法或范围来显示较低的价格？

> ID：10099529
> 
> 赞同：2
> 
> 时间：2012-04-11T03:46:32.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对如何制作这个范围或方法感到困惑。我有以下关联：

楷模

```
class User
  has_many :prices
  has_many :products, :through => :prices
  has_many :subscriptions, :foreign_key => :subscriber_id
end

class Product
  has_many :prices
  has_many :users, :through => :prices
end

class Price
  # Table columns => :product_id, :cost, :user_id
  belongs_to :user
  belongs_to :product
  belongs_to :store
  has_many :subscriptions, :as => :subscribable
end

class Subscription
  # Table columns => :product_id, :cost, :subscriber_id, :subscribable_id
  # :subscribable_type
  belongs_to :subscriber, :class_name => "User"
  belongs_to :subscribable, :polymorphic => true
  validates_uniqueness_of :subscribable_id, :scope => 
                        [ :subscriber_id, :subscribable_type]
end 
```

所以方法应该是这样的：

```
class Price

def self.lower_price
  if self.product_id == self.subscription.product_id
     if self.cost < self.subscription.cost
     end
  end
end

end 
```

该方法的目的是仅显示`UserProducts`与 相同`Product`的价格较低的价格`Subscription`，同时将自身与订阅`price`字段进行比较以查看其是否较低。

我这样做对吗？需要修复什么？

* * *

**编辑**

```
class Price < ActiveRecord::Base
  scope :for_product, lambda { |product_id| where( :product_id => product_id) }
  scope :cheaper, lambda { |cost| where(["prices.cost < :cost", { :cost => cost } ] ) }
end

class Subscription < ActiveRecord::Base

  def cheaper_prices
    Price.for_product(product_id).cheaper(cost)
  end
end

PrivatePagesController:

def watch
 @prices = Price.cheaper_prices.paginate(:page => params[:page], :per_page => 20).order('purchase_date DESC')
end

This gives me the error:

NoMethodError in PrivatePagesController#watch

undefined method `cheaper_prices' for #<Class:0x6f99210> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:06:51.800

首先，您应该将 UserProduct 表命名为更有意义。除了作为链接表之外，我无法说出它的语义是什么。

订阅产品或用户产品也有一些混淆。我看到了多态关联，但我怀疑存在一些混淆。

我注意到 Subscription 有一个 product_id，所以这告诉我 Subscription 属于 Product，而不是属于可订阅的。

所以，首先你可能需要清理你的设计。

但是，假设我可以相信您的条件是您想要的，那么您在 SQL 中想要的是

```
SELECT cheaper.*
FROM user_products
  INNER JOIN subscriptions ON subscribable_type = 'UserProduct'
                           AND subscriptions.subscribable_id = user_products.id
  INNER JOIN user_products cheaper ON cheaper.product_id = subscriptions.product_id
WHERE cheaper.price < user_products.price 
```

这将为您提供一份您会发现的所有更便宜价格的报告。对于给定 user_products 记录的所有更便宜的价格，您需要包含一个条件，即它适用于给定的 id。

接下来，为了在 ActiveRecord 中进行这项工作，我们希望选择在该类的表上，所以让我们将 SQL 转换为

```
SELECT user_products.*
FROM user_products
  INNER JOIN subscriptions ON user_products.product_id = subscriptions.product_id
  INNER JOIN user_products target ON subscribable_type = 'UserProduct'
                           AND subscriptions.subscribable_id = target.id
WHERE user_products.price < target.price
  AND target.id = ? 
```

现在我们准备进行 ActiveRecord 调用。

我不知道 ActiveRecord 是否可以从关联中形成联接。我知道 Rails 2.3 API 需要一个字符串。因此，范围将是：

```
 class UserProduct
   ...

   #defines UserProduct.cheaper(user_product_id)
   scope :cheaper, lambda do |user_product_id|
     join(%Q{INNER JOIN subscriptions
             ON user_products.product_id = subscriptions.product_id
             INNER JOIN user_products target
             ON subscribable_type = 'UserProduct'
             AND subscriptions.subscribable_id = target.id}).
    where("cheaper.price < user_products.price").
    where(["target.id = :target_id", { :target_id => user_product_id } ] )
  end

  #defines user_product.cheaper
  def cheaper
    UserProduct.cheaper(id)
  end
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:37:58.630

我认为您正在创建一个网站，用户可以在其中输入他们找到的价格并订阅以找到更便宜的价格。我将 UserProduct 实体重命名为 Price。

订阅者是订阅产品还是订阅价格是模棱两可的。如果你清除它，它可能会简化多态关联。假设他们以给定的价格订阅了产品。然后你想要以下内容：

```
class Price
  # Table columns => :product_id, :price, :user_id
  belongs_to :finder, :class_name => "User"
  belongs_to :product
  belongs_to :store

  scope for_product, lambda { |product_id| where(:product_id => product_id)
  scope cheaper, lambda { |price| where([ "prices.price < :price", {:price => price} ] }
end

class Subscription
  # Table columns => :product_id, :price, :subscriber_id
  belongs_to :subscriber, :class_name => "User"
  belongs_to :product
  validates_uniqueness_of :subscribable_id, :scope => 
                        [ :subscriber_id, :subscribable_type]

  def cheaper
    Price.for_product(product_id).cheaper(price)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:04:48.630

如果您可以假设您拥有的每个产品都有订阅，那么这应该适合您

```
 scope :lower_priced_user_products, self.joins("join subscriptions on subscriptions.product_id = user_products.product_id").where("user_products.product_id < subscriptions.product_id") 
```

这将返回一个只读记录。如果您想要读/写访问权限，那么您应该使用 UserProduct.find(rec.id) 重新加载记录。

让我知道事情的后续。

# internet-explorer-8 - IE8 和 IE9 中显示的样式问题

> ID：10099531
> 
> 赞同：1
> 
> 时间：2012-04-11T03:46:53.523
> 
> 标签：internet-explorer-8, styles

我现在在 IE8 中显示有很多问题，页面在 IE9 中的样式适当，我附上了页面差异的示例屏幕截图。我使用了一个名为主题森林星座管理模板的基于 css-html 的模板皮肤，我不确定它是否支持 IE8

无论如何，我正在使用各种样式，其中一些是 ul、li 元素、边距、自动宽度、显示：块、内联、浮动：左...等

我想知道如何开始修复 IE8 中的显示，我是否必须手动修复每种样式，或者是否有一个我可以在 IE8 和 9 之间参考的已知差异列表，然后看看我是否使用过其中的任何一个来修复. 下图显示了差异，问题是
1) 日期输入下方的灰色条
2​​) IE8 中的图表 div 框向下移动，并且它的一小部分在框外

![IE8和IE9的显示区别](../Images/30f26d2307fb7cdcec45cf5845ccbcd9.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:32:35.290

我的建议是在您发现 IE8 兼容性问题时解决它们，并尽可能使用 gauruntee IE8 支持的库和框架（如果这是优先事项）。

至于 IE CSS/HTML 错误的一般参考：http: [//jhop.me/ie8-bugs](http://jhop.me/ie8-bugs) 浏览器的 CSS 兼容性列表：[http ://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T00:41:17.897

IE8 与 IE9 的唯一真正区别（除了 CSS3 支持）是默认字体、边距和填充等值。这就是使用标准 CSS 重置至关重要的原因： [http ://www.cssreset.com/](http://www.cssreset.com/)

Eric Meyer 是一个受欢迎的选择： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

重置后，您不必修改各个浏览器的 margin-bottom 值。

注意：您可能需要提供不同的默认值才能让您的网站看起来正确，但之后，假设您只需要支持 IE8+，跨浏览器问题就会少很多麻烦。

此外，原生 IE8 浏览器与运行在 IE8 仿真模式下的 IE9+ 浏览器之间存在一些细微差别，因此您需要使用原生 IE8 浏览器进行测试。

# c# - 从多个数据库中搜索记录

> ID：10099532
> 
> 赞同：0
> 
> 时间：2012-04-11T03:47:01.177
> 
> 标签：c#, asp.net, database

我有 10 多个具有相同表但不同记录的数据库。

现在我想要一个可以搜索所有数据库的搜索引擎。比如说我要按姓氏或名字搜索一个人，然后搜索必须转到所有数据库，查询将搜索所有数据库。

我怎样才能做到这一点？..

你有 ASP.NET C# 的示例代码吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:30:12.937

嗨@Dhenn 通过联合 10 个表在您的一个数据库中创建一个视图，您可以轻松搜索

table1 在 database1 中，而 table2 在 database2 中

```
 select * from  database1.dbo.table1\. 
union all

 select * from  database2.dbo.table1\. 

.
.
. 
```

其他选项，您可以从 asp.net c# 对 10 个数据库进行 10 次点击，然后合并结果并显示在屏幕上。

请参考[这个](https://stackoverflow.com/questions/594256/ms-sql-server-2000multiple-database-query)

# json - 如何修复（引用键）格式错误的 JSON？

> ID：10099537
> 
> 赞同：1
> 
> 时间：2012-04-11T03:48:09.477
> 
> 标签：json, bash

```
# http://www.google.com/ig/calculator?hl=zh-cn&q=1RMB=?USD
{lhs: "1人民币",rhs: "0.158469 美元",error: "",icc: true} 
```

它是一个`javascript`对象，但不是一个`json`字符串：

```
{"lhs": "1人民币","rhs": "0.158469 美元","error": "","icc": true} 
```

我不认为使用`sed`.
有没有工具可以修复这个格式不正确的 json？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:56:11.973

```
$ js -e 'print(JSON.stringify({lhs: "1人民币",rhs: "0.158469 美元",error: "",icc: true}))'
{"lhs":"1人民币","rhs":"0.158469 美元","error":"","icc":true} 
```

*运行*

# django - 一个字符行的 Django max_length 值

> ID：10099539
> 
> 赞同：6
> 
> 时间：2012-04-11T03:48:39.310
> 
> 标签：django, postgresql, varchar

所以我有这个预先存在的数据库，我正在尝试使用 Django 连接它，我已经自省了数据库，我只是在实际做任何事情之前清理模型，我遇到了障碍。其中一个数据库表有一行：

> “名称”字符变化 NOT NULL

当我运行时`python manage.py syncdb`，我收到以下错误：

> app.artistname: "name": CharFields 需要一个正整数的 "max_length" 属性。

所以我进入 models.py 找出问题所在，我看到：

> name = models.CharField(unique=True, max_length=-1)

所以我的问题是，如果数据库中的定义没有设置值，我应该将 max_length 设置为什么值？我只是将其设置为最大可能值吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T04:03:25.273

对于不同长度的字段，您可以使用 a[`TextField`](https://docs.djangoproject.com/en/dev/ref/models/fields/#textfield)而不是 a [`CharField`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.CharField)，因此您不必设置大小。

变长字段和`TextField`s 通常都适用于大量文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:00:58.353

我会将其设置为应用程序预期的相当高的值。名称...通常 80 个字符就足够了，除非您有理由不相信。

# linux - bash中的shell脚本从ftp服务器下载文件

> ID：10099540
> 
> 赞同：3
> 
> 时间：2012-04-11T03:48:46.230
> 
> 标签：linux, bash, shell, ftp, download

我必须为 bash shell 编写一个 shell 脚本，以便在给定
ftp 服务器的情况下从 ftp 服务器传输文件 -- fileserver@example.com
用户 user1
密码 pass1

现在在 ftp 服务器的 /dir1/dir2 我有以下形式的文件夹
0.7.1.70
0.7.1.71
0.7.1.72

在这种情况下，我必须从最新文件夹（即 0.7.1.72）中复制文件“file1.iso”。我还必须在复制时检查文件的完整性，即假设文件正在上传到服务器，如果我开始复制，在这种情况下复制将不完整。

我必须每 4 小时后做一次。这可以通过将其设为 cron 作业来完成。请帮忙

我已经这样做了，我将 ftp 服务器文件夹安装到我的本地机器上。为了检查文件是否已完全上传，我每 50 秒检查一次大小，如果相同，我将复制它，否则在 4 小时后运行脚本... .txt”，其中包含我从中复制所需文件的所有文件夹的名称..所以我通过检查文件夹名称.文本文件中的名称来检查是否在服务器上添加了新文件夹..**

**一切都很好，现在唯一的问题是..假设当时正在下载文件，并且当时有一些网络故障..我将如何确保我已经完全下载了文件..我尝试使用 md5sum 和 chksum但是在已安装的文件夹上计算需要很长时间。请帮忙**

这是我的脚本..

```
#!/bin/bash
#
# changing the directory to source location 
echo " ########### " >> /tempdir/pvmscript/scriptlog.log
echo `date`>> /tempdir/pvmscript/scriptlog.log
echo " script is strting " >> /tempdir/pvmscript/scriptlog.log
cd /var/mountpt/pvm-vmware
#
# array to hold the name of last five folders of the source location
declare -a arr
i=0
for folder in `ls -1 | tail -5 `; do
arr[i]=$folder
#echo $folder
i=$((i+1))
done
echo " array initialised " >> /tempdir/pvmscript/scriptlog.log
#
#now for these 5 folders we will check if their name is present in the list of copied         
#  folder names
#
echo " checking for the folder name in list " >> /tempdir/pvmscript/scriptlog.log
## $(seq $((i-1)) -1 0 
for j in $(seq $((i-1)) -1 0  ) ; do
var3=${arr[$j]}
#var4=${var3//./}
echo " ----------------------------------------" >>  /tempdir/pvmscript/scriptlog.log
echo " the folder name is $var3" >> /tempdir/pvmscript/scriptlog.log
#
# checking if the folder name is present in the stored list of folder names or not
#
#
foldercheck=$(grep $var3 /tempdir/pvmscript/foldernames.txt | wc -l)
#
if test $foldercheck -eq 1
then 
echo " the folder $var3 is present in the list so will not copy it " >>  /tempdir/pvmscript/scriptlog.log
foldercheck=" "
continue
else
#
echo " folder $var3 is not present in the list so checking if it has the debug.iso file ">> /tempdir/pvmscript/scriptlog.log
#enter inside  the new folder in source
#
cd  /var/mountpt/pvm-vmware/$var3
#
# writing the names of content of folder to a temporary text file
#
ls -1 > /var/temporary.txt
#checking if the debug.iso is present in the given folder
var5=$(grep debug.iso /var/temporary.txt | wc -l)
var6=$(grep debug.iso //var/temporary.txt)
#
check1="true"
#
# if the file is present then checking if it is completely uploaded or not  
#
rm -f /var/temporary.txt
if test $var5 -eq 1 
then 
echo " it has the debug.iso checking if upload is complete   ">>/tempdir/pvmscript/scriptlog.log
#
# getting the size of the file we are checking if size of the file is constant or     changing    # after regular interval
#
var7=$(du -s ./$var6 |cut -f 1 -d '.')
#echo " size of the file is $var7"
sleep 50s
#
# checking for 5 times at a regular interval of 50 sec if size changing or not 
#
#
for x in 1 2 3 4 5 ;do
var8=$(du -s ./$var6 |cut -f 1 -d '.')
#
#if size is changing exit and check it after 4 hrs when the script will rerun
#echo " size of the file $x is $var7"
if test $var7 -ne $var8
then
check1="false"
echo " file is still in the prossess of being uploadig so exiting will check after 4 hr  " >> /tempdir/pvmscript/scriptlog.log
break
fi
sleep 50s
done
#
#if the size was constant copy the file to destination
#
if test $check1 = "true" 
then
echo " upload was complete so copying the debug.iso file  " >>  /tempdir/pvmscript/scriptlog.log
cp $var6 /tempdir/PVM_Builds/ 
echo " writing the folder name to the list of folders which we have copied " >>  /tempdir/pvmscript/scriptlog.log
echo $var3 >> /tempdir/pvmscript/foldernames.txt
echo " copying is complete  " >> /tempdir/pvmscript/scriptlog.log
fi
#else 
#echo $foldercheck >> /vmfs/volumes/Storage1/PVM_Builds/foldernames.txt
else
echo " it do not have the debug.iso file so leaving the directory "  >>/tempdir/pvmscript/scriptlog.log
echo $var3 >> /tempdir/pvmscript/foldernames.txt
echo 
fi
#rm -f /var/temporary.txt
fi
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:37:43.610

此处有一些评论和澄清请求，请参阅下面的中断以获取一个可能的答案。

（很高兴更新您的问题。）

这些文件有多大？

您是否可以控制这些文件的创建开始时间（例如数据库备份）。

了解这些文件的更多细节也会有所帮助，即大小、MB、GB、TB、PB？以及创建它们的源，db-backup 或???。

你的担忧是理论上的，对最坏情况的积极探索，或者如果你有真正的问题，多久发生一次，后果是什么？

您的 SLA 是一个不切实际/无法实现的管理梦想吗？如果是这样，那么您必须开始创建文档以表明当前系统将需要 X 数量的额外资源（人员、硬件、编程等）来纠正系统中的缺陷。

* * *

如果正在传输的文件是源系统创建的数据文件，一种技术是让源系统创建一个“标志”文件，该文件在发送主文件*之后发送。*

它可能包含详细信息，例如

```
 filename : TradeData_2012-04-13.dat
  recCount : 777777
  fileSize : 37604730291
  workOfDate: 2012-04-12
  md5sum    : .... 
```

因此，现在您的系统等待发现标志文件已交付，因为您对收到的每个文件都使用标准命名约定，并且您使用文件中嵌入的标准日期戳。当文件到达时，您的脚本会计算每个相关的详细信息，并将它们与存储在标志文件中的值进行比较。

如果您无法安排此级别的详细信息，则至少可以在通用标志文件、每天每个文件或每批文件（在所有文件完成后发送）之后进行测试，将新文件与一组文件进行比较对您的特定情况有意义的测试，...以下一些：

*   文件必须至少 X 大
*   文件必须至少有 N 条记录
*   文件永远不能小于昨天的文件
*   ETC

那么您的辩护是“我们无法完全控制文件，但我们检查了它们的 X、Y、Z 并且它通过了这些测试，这就是我们加载它们的原因”。

* * *

虽然`rsync`可能很好，但鉴于提到的一些场景，我不知道如何确保开始加载文件是安全的，因为`rsync`可能会开始向文件添加更多数据。

* * *

通读您的脚本，如果您无法从源代码中获得详细的标志文件，那么您就在正确的轨道上。Glenn Jackman 的解决方案旨在用更少的代码实现相同的目标。您可以将其放在 scriptFile 'getRemotedata.sh' 或类似文件中，并将其放入 while 循环中，该循环仅在 'getRemotedata.sh' 成功退出时退出。我想我想要某种类型的通知，它已经花费了 3*normalTime 运行。但是当您尝试涵盖所有条件时，它会变得非常复杂。有可以管理文件下载的 3rd 方工具，但我们从来没有购买它们的预算，所以我不能推荐任何东西。

哇

我希望这有帮助。

* * *

PS 欢迎使用 StackOverflow (SO) 请记住阅读常见问题解答，[http](http://tinyurl.com/2vycnvr) ://tinyurl.com/2vycnvr ，使用灰色三角形为好的 Q/A 投票， http: [//i.imgur.com/kygEP.png](http://i.imgur.com/kygEP.png)，并接受 bes 解决您的问题的答案，如果有的话，请点击复选标记， http: [//i.imgur.com/uqJeW.png](http://i.imgur.com/uqJeW.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:12:22.340

```
#!/bin/sh
if mkdir /tmp/download_in_process 2>/dev/null; then
    echo "cannot start, download in process"
    exit 1
fi

latest=$(ftp hostname << END1 | tail -1
user user1 pass1
cd /dir1/dir2
ls
END1
)

ftp hostname << END2
user user1 pass1
cd /dir1/dir2/$latest
get file1.iso
END2

rmdir /tmp/download_in_process 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T04:19:48.423

FTP 协议不够健壮。它不处理原子性，并且在您下载文件时无法知道文件是否仍在上传。如果您需要此功能，您需要调查使用`rsync`下载和上传。

# php - 通过 jQuery 重定向

> ID：10099541
> 
> 赞同：0
> 
> 时间：2012-04-11T03:49:08.913
> 
> 标签：php, javascript, jquery, redirect

我有这段代码可以向数据库添加新记录。运行后，我需要使用 jQuery 将用户重定向到成功页面。

```
 <? session_start();
include "sec.php";
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../scripts/forms.css">
<head>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="js/datetimepicker.js"></script>
<script language="javascript">
    $(document).ready(function() {
        $("[required=true]").after("<span></span>");
        $("#submit").click(function(){
            var error=false;
            $("span").text("");
            $("[class~=Red]").removeClass("Red");
            if(trim($("#VisaDocNo").val())==""){
                $("#VisaDocNo").addClass("Red");
                error=true;
            }
            if(trim($("#VisaCountry").val())==""){
                $("#VisaCountry").addClass("Red");
                error=true;
            }
            if(trim($("#CustNo").val())==""){
                $("#CustNo").addClass("Red");
                error=true;
            }
            $("[class=Red]").eq(0).focus();
            return !error;
        });
    });
    function trim(x) {
        return x.replace(/^\s+|$\s+/,'');
    }
    function isEmail(str)
    {
        var regex = /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
        return regex.test(str);
    }
</script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>اضافة تأشيرة جديدة</title>
</head>
<body topmargin="0">
<?php
include("../functions/connect.php");
if(!empty($action)){
$sql="select * from visa where VisaNo='$VisaNo'";
$q=mysql_query($sql);
$n=mysql_num_rows($q);
if($n==1 ){
echo  "<script>window.alert('عفوا ,,, السجل مسجل ممسبقا.')</script>";
}
else{
if($ActFollow!=1)
    $ActFollow=0;

$sql="insert into visa
(VisaNo,VisaDate,CustNo,VisaDocNo,VisaCountry,VisaDoneDate,VisaType,SysUser,Notify,Notes,FileNo)
 values
(0,CURDATE(),'$CustNo','$VisaDocNo','$VisaCountry','$VisaDoneDate','$VisaType','$SysUser','$Notify','$Notes','$FileNo')";
$q=mysql_query($sql);
if($q){
echo "<script>window.alert('تمت اضافة سجل جديد.')</script>";
  $insert_page = mysql_insert_id(); 
  echo "<script type='text/javascript'>window.location='editvisa.php?change=$insert_page'</script>";  
}
else{
echo  "<script>window.alert('خطأ في اضافة سجل جديد.')</script>";
}
}
}

include "visamenu.php";
?>
<div class="theform">
<table width="777" border="0" align="center" cellspacing="1" >
<form action="" method="post" name="visa" dir="rtl">
        <tr >
          <td colspan="2" class="xtt" height="30"><div align="center">اضافة سجل جديد</div></td>
        </tr>
        <tr>
          <td width="553" align="right" class="xtd">
          <input id="preview" name="CustNo" required="true" dir="rtl" value="<?=$r[CustomersNo]?>" size="50" readonly="readonly">
<button type="button" name="choice" onClick="window.open('chs_customer.php','popuppage','width=900,toolbar=0,resizable=1,scrollbars=no,height=500,top=100,left=100');">عرض الزبائن</button>
          </td>
          <td align="right"  class="xtx"><div align="right">اسم الزبون</div></td>
        </tr>
        <tr>
          <td align="right" class="xtd"><input name="VisaDocNo" required="true" type="text" id="VisaDocNo" dir="rtl" lang="ar" size="50" maxlength="40" /></td>
          <td align="right" class="xtx"><div align="right">رقم الفيزا</div></td>
        </tr>
        <tr>
          <td align="right" class="xtd"><input name="VisaCountry" required="true" type="text" id="VisaCountry" dir="rtl" lang="ar" size="50" maxlength="40" /></td>
          <td align="right" class="xtx"><div align="right">دولة الذهاب - التأشيرة</div></td>
        </tr>
                <tr>
          <td align="right" class="xtd"><input name="VisaDoneDate" type="text" id="Date" dir="rtl" lang="ar" size="50" maxlength="40" />
          <a href="javascript:NewCal('Date','ddmmyyyy')"><img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a>
          </td>
          <td align="right" class="xtx"><div align="right">تاريخ دور التأشيرة</div></td>
        </tr>
        <tr>
          <td align="right" class="xtd"><input name="VisaType" type="text" id="VisaType" dir="rtl" lang="ar" size="50" maxlength="40" /></td>
          <td align="right" class="xtx"><div align="right">نوع الفيزا</div></td>
        </tr>
        <tr>
          <td align="right" class="xtd"><input name="SysUser" type="text" readonly="readonly" id="SysUser" value="<? echo $_SESSION[aname]?>" size="50" maxlength="40"  dir="rtl"/></td>
          <td align="right" class="xtx"><div align="right">الموظف المسؤول </div></td>
        </tr>
        <tr>
          <td align="right" class="xtd"><input name="Notify" type="checkbox" id="Notify" value="1"/></td>
          <td align="right" class="xtx"><div align="right">تنبيه</div></td>

        </tr>
        <tr>
          <td align="right" class="xtd"><input name="Notes" type="text" id="Notes" size="50" maxlength="40"  dir="rtl"/>
          </td>
          <td align="right" class="xtx"><div align="right">ملاحظات </div></td>
          </tr>
          <tr>
          <td align="right" class="xtd"><input name="FileNo" type="file" disabled="disabled" id="FileNo" size="41" maxlength="40"  dir="rtl"/></td>
          <td align="right" class="xtx"><div align="right">ملفات مرفقة</div></td>
          </tr>        <tr>
          <td align="right" class="xtd"><label>
            <input type="submit" name="Submit" value="اضافة التأشيرة" onClick="return validate()">
          </label></td>
          <td class="xtd"><input name="action" type="hidden" id="action" value="done" /></td>
        </tr>
      </form>
</table>
</div>
</body>
</html> 
```

添加新记录后，我们使用此方法重定向到另一个页面：

```
 $insert_page = mysql_insert_id(); 
  echo "<script type='text/javascript'>window.location='editvisa.php?change=$insert_page'</script>"; 
```

如何使用 jQuery 重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:13:00.123

使用这样的代码

```
<?php
$insert_page = mysql_insert_id(); 
?>
<script type='text/javascript'>
window.location='editvisa.php?change=<?php echo $insert_page;?>'
</script>; 
```

# jquery - 是什么触发了后面的更改功能

> ID：10099542
> 
> 赞同：0
> 
> 时间：2012-04-11T03:49:39.803
> 
> 标签：jquery, backbone.js

有点像一个JavaScript 新手，阅读了一个骨干网教程[http://arturadib.com/hello-backbonejs/docs/5.html](http://arturadib.com/hello-backbonejs/docs/5.html)并对作者使用的一些代码有一些疑问。

在下面的初始化函数中，作者绑定了

```
 this.model.bind('change', this.render);
  this.model.bind('remove', this.unrender); 
```

我假设这意味着`render`每当调用更改函数时都会在“this”对象上调用该函数，并且`unrender`每当`remove`调用该函数时都会运行该函数。对我来说，问题是他的代码中有一个定义的函数`'remove'`，但没有定义的函数`'change'`

问题：做`change`和`remove`引用jquery函数还是`remove`函数引用`remove`代码中定义的函数（即它覆盖jquery函数）而`change`引用jquery函数。`'change'`如果是后者，如果从未显式调用该函数并因此触发该函数，究竟是什么触发了该`render`函数？

代码

```
var ItemView = Backbone.View.extend({
    tagName: 'li', // name of tag to be created        

    events: { 
      'click span.swap':  'swap',
      'click span.delete': 'remove'
    },    

    initialize: function(){
      _.bindAll(this, 'render', 'unrender', 'swap', 'remove'); // every function that uses 'this' as the current object should be in here

      this.model.bind('change', this.render);
      this.model.bind('remove', this.unrender);
    },

    render: function(){
      $(this.el).html('<span style="color:black;">'+this.model.get('part1')+' '+this.model.get('part2')+'</span> &nbsp; &nbsp; <span class="swap" style="font-family:sans-serif; color:blue; cursor:pointer;">[swap]</span> <span class="delete" style="cursor:pointer; color:red; font-family:sans-serif;">[delete]</span>');
      return this; // for chainable calls, like .render().el
    },

    unrender: function(){
      $(this.el).remove();
    },

    swap: function(){
      var swapped = {
        part1: this.model.get('part2'), 
        part2: this.model.get('part1')
      };
      this.model.set(swapped);
    },

    remove: function(){
      this.model.destroy();
    }
  }); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:01:48.860

`change`and是 Backbone 事件，而`remove`不是 jQuery 事件。这些：

```
this.model.bind('change', this.render);
this.model.bind('remove', this.unrender); 
```

表示`this.render`模型触发事件时调用，模型触发`change`事件`this.unrender`时调用`remove`。模型上的[`set`方法](http://documentcloud.github.com/backbone/#Model-set)：

> **放** `model.set(attributes, [options])`
> 
> 在模型上设置属性的散列（一个或多个）。如果任何属性更改模型状态，`"change"`则会触发事件，除非`{silent: true}`作为选项传递。

`change`是触发模型事件的一种方式[`unset`](http://documentcloud.github.com/backbone/#Model-unset)，[`clear`](http://documentcloud.github.com/backbone/#Model-clear)也会触发`change`事件。

`remove`事件通常来自集合，但集合将通过适当的模型发送它们，以防有视图监听。

您可能想阅读（相当不错的）[Backbone 文档](http://documentcloud.github.com/backbone/)并特别查看[事件目录](http://documentcloud.github.com/backbone/#FAQ-events)。

# extjs - ExtJs4 如何将默认事件添加到 GridPanel

> ID：10099552
> 
> 赞同：0
> 
> 时间：2012-04-11T03:50:49.197
> 
> 标签：extjs, extjs4

我希望所有网格面板都有 selectionchange 事件；

因为我在一页中有一些网格，所以我需要让 currentGrid 做一些事情；

如 ：

变量 activeGrid

```
selectionchange:function(){
activeGrid = this;
} 
```

然后我可以得到currentGrid。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:38:24.610

```
Ext.override('Ext.grid.Panel', {
  initComponent: function(config) {
    this.callOverridden(arguments);

    this.on({
      selectionchange: this.mySelectionFunction,
      scope: this
    });
  },
  mySelectionFunction: function() {
    // Do your stuff here
  }
}); 
```

您需要对此进行一些解释吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:39:00.840

看看这个问题：[How to Perform Controller Inheritance in ExtJS 4?](https://stackoverflow.com/questions/9628306/how-to-perform-controller-inheritance-in-extjs-4/9628534#9628534)

我发布了一些关于如何在视图/控制器中创建基本功能的示例。我想你会找到你要找的东西。

# java - 对多个字段进行排序——它的工作原理，但无法理解它是如何工作的。

> ID：10099554
> 
> 赞同：2
> 
> 时间：2012-04-11T03:51:00.350
> 
> 标签：java, collections, core

```
class Employee implements Comparable{
    private String name;
        private String gender;

        Employee(String name, String gender) {
            this.name = name;
            this.gender = gender;
        }

        public String getName() {
                return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getGender() {
                return gender;
        }

        public void setGender(String gender) {
                this.gender = gender;
        }

        public String toString() {
            return this.getName() + " : " + this.getGender();
        }

        @Override
        public int compareTo(Object o) {
            int gendarComp=this.getGender().compareTo(((Employee)o).getGender());
            return (gendarComp!=0?gendarComp:this.name.compareTo(((Employee)o).getName()));
        }
    } 

    class EmployeeExec {
        public static void main(String[] args) {
            List allEmpls = new ArrayList();
            allEmpls.add(new Employee("vijay", "m"));
            allEmpls.add(new Employee("balaji", "m"));
            allEmpls.add(new Employee("shaifali", "f"));
            allEmpls.add(new Employee("archana", "f"));
            allEmpls.add(new Employee("alala", "m"));
            allEmpls.add(new Employee("kiran", "f"));

            sortEmployees(allEmpls);
        }

        public static void sortEmployees(List allEmpls) {
            Collections.sort(allEmpls);
            System.out.println(allEmpls);
        }
    } 
```

任何人都可以帮助我了解它是如何工作的吗？要排序的基础是什么。我保留了一些 sysout 语句以查看，但我真的不明白它是如何被调用的。我知道它与合并排序一起工作。但如何？请帮我。

-巴拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:56:55.513

排序基于`compareTo`（为了便于阅读，稍微重新格式化）的返回值：

```
@Override
public int compareTo(Object o) {
    int gendarComp = this.getGender().compareTo(((Employee)o).getGender());
    return (gendarComp != 0
               ? gendarComp
               : this.name.compareTo( ((Employee)o).getName() )
           );
} 
```

逻辑显然是比较值`getGender()`并返回该比较，除非它们测试相等。如果它们相等，则返回比较名称的结果。

顺便说一句：如果这是您的代码，最好使用泛型而不是原始类型。宣布

```
class Employee implements Comparable<Employee> {... 
```

然后`compareTo`用签名声明方法：

```
@Override
public int compareTo(Employee o) {... 
```

并且您可以省去方法内部的强制转换（以及提高客户端代码中的类型安全性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:57:34.250

```
 @Override
 public int compareTo(Object o) {
    int gendarComp=this.getGender().compareTo(((Employee)o).getGender());
    return (gendarComp!=0 ?
                            gendarComp
                          : this.name.compareTo(((Employee)o).getName()));
 } 
```

如您所见，代码首先比较了性别。

如果性别相等，则结果整数将为 0，然后按名称作为辅助排序键进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:10:39.480

两个人已经解释了 compareTo() 方法的作用，但是既然你说

> 但我真的不明白它是如何被调用的

我会解释那部分。当调用 Collections.sort(allEmpls) 时，所有列表对象的 compareTo() 方法都会相互调用，因为它们都实现了 Comparable 接口。然后 sort() 方法中的代码根据对象的 compareTo() 值重新组织对象。就是这样（当然，过于简化了，但它回答了你的问题）。

# android - 如果设备连接到路由器，如何检查互联网连接可用性？

> ID：10099564
> 
> 赞同：1
> 
> 时间：2012-04-11T03:53:50.300
> 
> 标签：android, networking, connectivity, internet-connection

如何检查 Android 设备是否已连接到 Internet 连接？目前，我正在使用以下代码：

```
ConnectivityManager connectivityManager = context.getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
boolean isConnectedToNetwork = (networkInfo != null && networkInfo.isConnected()); 
```

但是，上面代码的问题在于它只检查设备是否连接到网络。它不检查互联网连接是否可用。例如，如果设备连接到没有互联网访问权限的路由器，它仍然会返回 true，`isConnectedToNetwork`因为从技术上讲，您是通过路由器连接到网络的。只是路由器没有互联网连接。

我看到的一个建议是尝试连接到一个停机几率非常低的网站。这方面的一个例子是 www.google.com。但是，我认为这不是正确的解决方案。首先，如果用户使用 GPRS 并按每 KB 为他的互联网使用收费，那么他将为此承担额外的费用。其次，我认为使用这样的第三方网站是不道德的。这真的是检查互联网连接的唯一方法，还是您可以提出不同的解决方案？未经他们同意就这样连接到谷歌真的可以吗？如何检查设备是否有互联网连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T11:28:10.637

```
 public boolean isOnline(Context context) {
    try {
        ConnectivityManager cm = (ConnectivityManager) context .getSystemService(Context.CONNECTIVITY_SERVICE); 
        if (cm.getActiveNetworkInfo().isConnectedOrConnecting()) {
            URL url = new URL("http://www.ripansekhon.blogspot.com");
            HttpURLConnection urlc = (HttpURLConnection) url .openConnection();
            urlc.setRequestProperty("User-Agent", "test");
            urlc.setRequestProperty("Connection", "close"); 
            urlc.setConnectTimeout(1000); // mTimeout is in seconds
            urlc.connect();
            if (urlc.getResponseCode() == 200) {
                return true;
            } else {
                return false;
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    return false;
} 
```

检查此功能，检查互联网是否正常工作，表示网站是否打开 希望此代码可以帮助所有想要互联网工作的人除了网络是否连接之外

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:45:37.217

利用`ConnectivityManager.TYPE_WIFI`

```
ConnectivityManager connectivityManager = context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    boolean isConnectedToNetwork = (networkInfo != null && networkInfo.isConnected()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:35:22.090

```
public  boolean checkInternetConnection() {

    ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    if (conMgr.getActiveNetworkInfo() != null
            && conMgr.getActiveNetworkInfo().isAvailable()
            && conMgr.getActiveNetworkInfo().isConnected()) {
        Log.d("Internet Connection  Present","");
        isFound=true;
    } else {
        Log.d("Internet Connection Not Present","");
        isFound= false;
    }
    return isFound;
} 
```

# php - 如何提供唯一编号以在网站上添加新产品

> ID：10099568
> 
> 赞同：-1
> 
> 时间：2012-04-11T03:54:21.767
> 
> 标签：php, time, unique-key

我正在创建一个电子商务网站，我想在添加时给产品一个唯一的编号。我想以一种现在使用 time() 函数自动获取这个数字的方式来做到这一点。用这个产品在添加时获得时间价值。但我不知道每次使用时间功能都会给出一个唯一的数字，或者如果任何人同时添加产品，它也可以重复。

如果任何机构有任何其他建议为其提供唯一编号或 ID，请告诉我。

将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:06:05.533

不要费心使用`time()`来唯一地命名您的产品。只需使用 MySQL **auto_increment**列，然后如果您需要从数据库中检索新 ID，请使用 PHP`mysql_insert_id()`函数（或您使用的任何数据库接口的等效函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:27:48.353

创建具有以下架构的表

```
create table products
(
  id int auto_increment primary key,
  product nvarchar(40),
  type nvarchar(10),
  time timestamp default now(),
  ...
); 
```

将数据插入表中使用

```
insert into products(product,type) 
values ('JEdit','Editor'),('BlueFish','Compiler'); 
```

你的桌子看起来像这样

```
id     product      type       time                 ...
_____________________________________________________
1      JEdit        Editor     2012-4-11 10:00:00  
2      BlueFish     Compiler   2012-4-11 11:00:00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:30:33.277

如前所述，使用 time() 将为您提供一种创建唯一 ID 的可排序方式。连接字符串还将进一步随机化您想要的结果并仍然保持可排序：

```
$uniqueId= time().mt_rand(); 
```

# php - 带有 ModelCriteria 对象参数的 PropelORM IN 子句

> ID：10099569
> 
> 赞同：0
> 
> 时间：2012-04-11T03:54:23.390
> 
> 标签：php, propel

使用 PropelORM，是否可以添加一个带有另一个 ModelCritera 对象作为参数的 IN 子句？

我一直在尝试以下但没有成功：

```
$oAuthorQ = new AuthorQuery(); 
$oAuthorQ->filterByLastName('Smith'); 

$oBookQ = new BookQuery();
$oBookQ->where('Book.Author IN ? ', $oAuthorQ);
... 
```

我收到错误：

```
PHP Fatal error:  Nesting level too deep - recursive dependency? 
```

我的假设是我只是在构建查询时做错了 - 有没有办法实现我正在寻找的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:49:14.707

我不确定使用 Propel 执行此操作的最佳方法，但我最近所做的一种方法是执行 2 个单独的查询，在第一个查询上使用 select 仅获取 Id。此查询返回一个 Id 数组，然后可以将其传递给第二个查询。它比单个数据库调用效率低，但代码很容易阅读（请耐心等待，这是我第一次尝试将一些代码转换为答案）

这是一个来自我碰巧在自己的代码库中工作的位置的快速测试示例：

```
$posts = PostsQuery::create()->select('Id')->filterByDeleted(ACTIVE_RECORD)->filterByPostTypeId($postType->getId())->limit(5)->find()->toArray();

$posts2 = PostsQuery::create()->filterById($posts)->find(); 
```

第一个对象（$posts）是：

```
array(5) {\n  [0]=>\n  string(3) "374"\n  [1]=>\n  string(3) "375"\n  [2]=>\n  string(3) "376"\n  [3]=>\n  string(3) "377"\n  [4]=>\n  string(3) "378"\n}\n 
```

...第二个是完整的 5 行。

免责声明这是一个简化的示例，最初只是一个分页查询：

```
$posts = CmsPostsQuery::create()->filterByDeleted(ACTIVE_RECORD)->filterByPostTypeId($postType->getId())->paginate($pageNum,10); 
```

我偶然发现了一个更好的答案： [ORM Solution for really complex queries](https://stackoverflow.com/questions/7892354/orm-solution-for-really-complex-queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:19:28.717

我不认为你需要在`where in`这里。

```
$oBookQ = BookQuery::create()
  ->useAuthorQuery()
    ->filterByLastName('Smith')
  ->endUse()
  ->find(); 
```

但是您的查询是像书和作者一样简单，还是问题更复杂？

# google-docs-api - 如何解决使用 Google Apps 脚本从集合中删除资源时出现的 ETag 错误

> ID：10099572
> 
> 赞同：3
> 
> 时间：2012-04-11T03:54:51.270
> 
> 标签：google-docs-api, google-apps-script

根据[文档](https://developers.google.com/google-apps/documents-list/#removing_a_resource_from_collection)，从集合中删除项目不需要 If-Match eTag，但我收到以下错误：

```
"Request failed for returned code 403\. Server response:
<errors xmlns='http://schemas.google.com/g/2005'>
  <error>
    <domain>GData</domain>
    <code>matchHeaderRequired</code>
    <location type='header'>If-Match|If-None-Match</location>
    <internalReason>If-Match or If-None-Match header or entry etag attribute required</internalReason>
  </error>
</errors>" 
```

我错过了什么？如果我确实希望丢弃资源，我将如何以及在哪里指定 If-Match 标记？为了以防万一，我尝试在选项中添加“If-Match:”*”，但没有成功。

这与此 Python 客户端库错误有关吗？[使用 Python 从 Google Docs 中删除资源](https://stackoverflow.com/questions/9940578/deleteresource-from-google-docs-with-python)

我的 Apps 脚本代码如下：

```
function deleteResourceFromCollection_(originCollectionId,resourceId) {
  var options = buildDeleteOptions_();

  var result = UrlFetchApp.fetch(DOC_API_URL+ACTIVE_USER+"/private/full/"+originCollectionId+"/contents/"+resourceId, options); 
}

//////////////////////////////////////////////
// Build URLFetchApp Delete Options
//////////////////////////////////////////////
function buildDeleteOptions_() {

  return {
    method : "delete",
    headers : {"GData-Version": "3.0"},
    oAuthServiceName: "google",
    oAuthUseToken: "always",
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:03:59.700

选项的正确语法是：

```
function buildDeleteOptions_() {

  return {
    method : "delete",
    headers : {"GData-Version": "3.0", "If-Match":"*"},
    oAuthServiceName: "google",
    oAuthUseToken: "always",
    };
} 
```

# java - TreeSet 如何检查重复项

> ID：10099573
> 
> 赞同：4
> 
> 时间：2012-04-11T03:54:55.263
> 
> 标签：java, generics

我正在检查 TreeSet 如何检查重复元素并具有以下代码

```
 import java.util.*;

  public class TreeDemo{

    public static void main(String[] args)
        {
            new TreeDemo().go();
        }

    public void go()
    {
        Song s1 = new Song("song1","artist1");
        Song s2 = new Song("song2","artist2");
        Song s3 = new Song("song3","artist3");
        Song s4 = new Song("song3","artist3");

        Set<Song> tree = new TreeSet<Song>();

        tree.add(s1);
        tree.add(s2);
        tree.add(s3);
        tree.add(s4);

        System.out.println(tree);

    }
}

class Song implements Comparable<Song>{
    private String title;
    private String artist;

    public Song(String t, String a)
    {
        title=t;
        artist=a;
    }

    public String getTitle(){
        return title; 
    }

    public int compareTo(Song s){
        //Song s = (Song)o;
        return title.compareTo(s.getTitle());
    }

public String toString(){
    return title;
}

} 
```

当我执行此代码时，我得到以下输出

```
[song1, song2, song3] 
```

我的问题是：-

*   即使我没有实现 hashCode 和 equals 方法（我确实实现了 Comparable 接口，因为它是强制性的并且需要保持 Set 排序），TreeSet 是如何确定重复项的？
*   它是否使用了 Object 类的默认实现？看起来它使用“标题”字段进行此检查，因为当我添加时将其视为重复但当我添加时不会将其视为重复。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T04:22:55.580

`TreeSet`（或者从技术上讲，`TreeMap`支持它）仅使用该`compareTo()`函数来比较元素。它不使用`Object`'s`.equals()`或`.hashCode()`. 此外，如果它使用了其中任何一个，您的输出将是

```
[song1, song2, song3, song3] 
```

因为`Object`的默认实现使用内存地址来测试对象是否相等，而不是它们的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T04:12:29.210

比较器返回 < 0, 0 或 > 0... 所以 equals 是通过 compareTo 返回 0 来实现的。因此

```
if (node1.compareTo(node2) == 0) 
```

那么节点已经在集合中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T04:15:50.617

TreeSet 基于其成员的排序（通过 Comparable 或 Comparator 接口）实现平衡的二叉搜索树，而不是散列。

[http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)

# jsf - SessionScoped Managed Bean 值未从 Servlet 过滤器更改

> ID：10099574
> 
> 赞同：0
> 
> 时间：2012-04-11T03:54:57.680
> 
> 标签：jsf, servlet-filters, managed-bean, session-scope

我见过类似的问题，但我不认为这是一个转发，因为我可以从 WebFilter 访问 ManagedBean，但奇怪的是更新的属性.... 并没有真正更新。以下是详细信息：

我有一个过滤器（在 Glassfish 3.1.2 上使用 Mojarra 2.1.6，WebFilter 注释）：

```
public void doFilter(ServletRequest request, ServletResponse response,
              FilterChain chain)
       throws IOException, ServletException {
    // FacesContextHelper is a utility class to get some Faces stuff
    FacesContextHelper facesContextHelper = new FacesContextHelper();
    // this returns the correct instance of a SessionScoped ManagedBean
    userInfoView = (UserInfoView) facesContextHelper.getManagedBean(request,
       response, "userInfoView", UserInfoView.class);
    // ... some computation here to get the 'vm' URL parameter
    userInfoView.setViewMode(viewMode);
    // ....
    chain.doFilter(request, response);
} 
```

现在在 Facelet 中，我正在使用这个`viewMode`：

```
<h:panelGroup layout="block" rendered="#{userInfoView.viewMode ne 1}">
  <ui:include src="/WEB-INF/jsf/v2/products.xhtml"/>
</h:panelGroup> 
```

为了完整起见，这里是部分 UserInfoView：

```
@ManagedBean(name = "userInfoView")
@SessionScoped
public class UserInfoView extends AbstractView
   implements ServiceConstant, Serializable {
 private Integer viewMode = 0;

 public Integer getViewMode() {
   return viewMode;
 }

 public void setViewMode(Integer viewMode) {
   this.viewMode = viewMode;
 }
} 
```

现在发生的事情是由于某种原因（它似乎与 JSESSIONID 相关联）我将有预期的行为：
- 在 GET 请求集中具有“vm = 1”（调用 UserInfoView setViewMode）viewMode 为 1
- Facelet 得到适当的值

然后只需重新启动 Glassfish 并：
- GET 请求中的“vm=1”**仍然**将 viewMode 设置（调用 UserInfoView setViewMode）为 1
- Facelet 获得 --default** 值（即 0）

我怀疑 RESTORE_VIEW 阶段以某种方式将变量重置为默认值，尽管除了跟踪请求的生命周期之外，我没有任何东西可以支持这个理论......

从 Servlet 过滤器更改 SessionScoped 托管 bean 的变量时，我应该注意什么？我的方法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:46:11.360

不是您问题的答案，但由于您使用的是 JSF 2，因此传递这些参数的更好方法是使用：

```
<f:viewParam name="vm" value="userInfoView.viewMode"/> 
```

# java - 运行 32&64 位 java 代码

> ID：10099578
> 
> 赞同：0
> 
> 时间：2012-04-11T03:56:02.810
> 
> 标签：java, 32bit-64bit, cplex

我正在开发一个调用 32 位 CPLEX 优化器的 Java 程序，
但我将在 64 位机器上运行此代码。
我可以在 64 位中运行部分程序，而在 32 位中运行其他部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:10:20.730

如果它是在自己的进程中运行的单独程序，则没有问题。32 位和 64 位进程可以在同一系统上共存。

如果它是一个将 32 位本机库加载到 JVM 中的 Java 库（例如，使用 JNI），它只能在 32 位 JVM 进程中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:59:48.557

要从 64 位进程使用 32 位共享库，您需要有两个进程。一个拥有 64 位 JVM 的 JVM，它调用一个 32 位进程来保存您的共享库。

另一种选择是将您的共享库从源代码重新编译为 64 位库。

# linq - Windows Phone 7 在多大程度上支持 Linq？

> ID：10099580
> 
> 赞同：0
> 
> 时间：2012-04-11T03:56:14.573
> 
> 标签：linq, windows-phone-7, compact-framework

我知道 Windows Phone 7 支持 Linq，但我听说有一些限制，谁能指出我正确的方向，以便我找出它对标准 linq 有哪些限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:01:07.563

[http://msdn.microsoft.com/en-us/library/hh202872(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202872(v=vs.92).aspx)

据此，它提供了 System.Data.Linq(+ .Mapping) 中部分支持或不支持的成员列表。

我不认为你会有问题，几乎所有东西都得到完全支持，你只能用本地数据库做这么多：D

# c - C - 如何提示用户输入文件名

> ID：10099581
> 
> 赞同：0
> 
> 时间：2012-04-11T03:56:40.100
> 
> 标签：c, printf

对 C 编程非常陌生。我正在编写一个程序，我想提示用户输入要打开以供阅读的文件的名称。在下面显示的代码中，如果它没有打开或文件不存在，我想抛出一个错误，但是当我运行它时，我的代码会爆炸，我必须关闭程序（DOS）

```
/*ask user for the name of the file*/
  printf("enter file name: ");
  gets(fname);

//Opens the file from where the text will be read. 
fp=fopen(fname, "r");

//Checks if the file us unable to be opened, then it shows the error message 
if (fp == NULL)
    {
     printf("\nError, Unable to open the file for reading\n");
    } 
```

// 你可以通过创建一个 name.txt 文件来测试它。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T04:03:16.817

好吧，你应该确保有足够的空间`fname`来存储你的文件名，否则你几乎肯定会导致损坏和“炸毁”:-)

例如，以下代码段：

```
char fname[10];
gets (fname); 
```

如果您输入的信息多于`fname`无法容纳的信息，将会出现问题。那时，您进入了未定义的行为领域，*任何事情都*可能发生。

但是，由于`gets`无法限制用户输入的内容，*因此您永远不应该使用它！*

可以在[此答案](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)中找到一种适当的、受保护的用户输入方法。

它使用`fgets`，因为这可以限制用户输入的内容。它还允许提示，在出现问题时提供错误指示，正确处理文件结尾，并删除任何过大行的其余部分，使其不会影响下一个输入操作。

事实上，我会在这里复制它以使这个答案自成一体：

```
#include <stdio.h>
#include <string.h>

#define OK       0
#define NO_INPUT 1
#define TOO_LONG 2
static int getLine (char *prmpt, char *buff, size_t sz) {
    int ch, extra;

    // Get line with buffer overrun protection.
    if (prmpt != NULL) {
        printf ("%s", prmpt);
        fflush (stdout);
    }
    if (fgets (buff, sz, stdin) == NULL)
        return NO_INPUT;

    // If it was too long, there'll be no newline. In that case, we flush
    // to end of line so that excess doesn't affect the next call.
    if (buff[strlen(buff)-1] != '\n') {
        extra = 0;
        while (((ch = getchar()) != '\n') && (ch != EOF))
            extra = 1;
        return (extra == 1) ? TOO_LONG : OK;
    }

    // Otherwise remove newline and give string back to caller.
    buff[strlen(buff)-1] = '\0';
    return OK;
} 
```

您可以按如下方式调用它，指定缓冲区和大小，并在返回时接收错误指示：

```
// Test program for getLine().

int main (void) {
    int rc;
    char buff[10];

    rc = getLine ("Enter string> ", buff, sizeof(buff));
    if (rc == NO_INPUT) {
        // Extra NL since my system doesn't output that on EOF.
        printf ("\nNo input\n");
        return 1;
    }

    if (rc == TOO_LONG) {
        printf ("Input too long [%s]\n", buff);
        return 1;
    }

    printf ("OK [%s]\n", buff);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T15:30:17.930

好吧，这就是我发生的事情，为“if”添加一个“else”条件对我有用。下面提到的是代码。

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

int  main() 
{

char fname[100];
FILE* fp;
memset(fname, 0, 100);
/*ask user for the name of the file*/
printf("enter file name: ");
gets(fname);

fp = fopen(fname, "r");

//Checks if the file us unable to be opened, then it shows the error message 
if (fp == NULL)
{
    printf("\nError, Unable to open the file for reading\n");
}

else
{
    printf("hello");
}

getch();
} 
```

还要确保您已将“#include”添加为头文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:02:22.383

不确定您缺少什么，但是该程序可以在命令行上使用 cl.exe 为我编译和运行。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(){
    char fname[100];
    FILE* fp;
    memset(fname, 0, 100);
    /*ask user for the name of the file*/
    printf("enter file name: ");
    gets(fname);

    //Opens the file from where the text will be read. 
    fp = fopen(fname, "r");

    //Checks if the file us unable to be opened, then it shows the error message 
    if (fp == NULL)
    {
        printf("\nError, Unable to open the file for reading\n");
    }

} 
```

另请注意，某些编译器（包括 Microsoft 的）要求您在使用默认选项调用时将所有声明放在函数的顶部。

# oracle - Oracle 花费太长时间返回无效的用户名/密码错误

> ID：10099582
> 
> 赞同：1
> 
> 时间：2012-04-11T03:56:53.123
> 
> 标签：oracle, jdbc, connection

我们有一个场景，它需要大约 10 秒来获取应用程序需要大约 10 秒才能从应用程序服务器获取 SQL 异常（声明登录被拒绝，因为用户 ID/密码组合无效）。

我写了一个小的java应用程序只是为了直接启动sql连接。

公共类 TestUsingJ2SE {

```
/**
 * @param args
 */
public static void main(String[] args) {

    Date start = new Date();

    Connection conn = null;

    Date end = new Date();

    Properties connectionProps = new Properties();
    connectionProps.put("user", "ivr_cds");
    connectionProps.put("password", "something");

    start = new Date();

    try {
        String url = "jdbc:oracle:thin:@localhost:1521:XE";
        DriverManager.getDriver(url);
        conn = DriverManager.getConnection(url, connectionProps);
    } catch (Exception e) {
        System.out.println("Driver Manager --> error ..." + e.getMessage());
    }

    end = new Date();

    System.out.println("Using Driver Manager ..");
    System.out.println("Started at:" + start + " and finished at:" + end);
    System.out.println("Duration :" + (end.getTime() - start.getTime()));

} 
```

}

我们发现 oracle 仍然需要 10 秒才能返回无效/用户名密码错误。我用于连接到 oracle 的 jar 是 ojdbc5.jar（JAVA 5 版本），因为我们的环境是在 WAS 6.1.2 上。

当我使用 ojdbc6.jar（JAVA 6 版本）并运行上述程序时，oracle 在 600 毫秒内返回无效的用户名/密码。

任何关于为什么会发生这种情况的线索，以及 Oracle 中是否有一些参数可以用来快速获取和出错，而不是 10 秒的延迟。

提前致谢。高拉夫

# javascript - 简单的删除文本脚本

> ID：10099589
> 
> 赞同：0
> 
> 时间：2012-04-11T03:58:02.733
> 
> 标签：javascript, text

这可能很简单，但我花了很长时间搜索和谷歌搜索，我已经接近了，但没有雪茄......

有谁能帮我写一个小脚本来删除所有实例

```
<a href="http://mysite.com/search?mode=results&amp;queries_name_query="></a> 
```

在 HTML 文档的正文中？

我的标签是由 JS 生成的，它们总是打印一个额外的空白 href，所以希望另一个快速删除它们的脚本可以清除它？

非常感谢所有帮助和有用的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:12:46.267

```
function cleanlinks(){
  var tem, s="http://mysite.com/search?mode=results&amp;queries_name_query=",
  L=document.links, len=L.length;
  while(len){
    tem=L[--len];
    if(tem.href===s)tem.parentNode.removeChild(tem);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:02:47.583

我的直觉告诉我你可能只是想改变创建它们的脚本以防止它发生，但如果你真的不能这样做，像下面这样的东西应该快速摆脱所有它们 - 'n -一种肮脏的方式...

```
var badLinks = document.querySelectorAll("a[href='http://mysite.com/search?mode=results&amp;queries_name_query=']");

for (var i=0;i<badLinks.length;i++)
   badLinks[i].parentNode.removeChild(badLinks[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:08:22.240

如果`mode=results&amp;queries_name_query=`可以获得动态，您可以通过以下方式匹配上一部分：

```
var anchors = document.getElementsByTagName(a);
for(var i = 0; i < anchors.length; i++) {  
  if(anchors[i].getAttribute('href').match('http://mysite.com/search?mode=results&amp;queries_name_query=') !== -1) {
       anchors[i].parentNode.removeChild(anchors[i]);
   }
} 
```

# android - 启动时启动应用程序

> ID：10099590
> 
> 赞同：2
> 
> 时间：2012-04-11T03:58:20.280
> 
> 标签：android, startup, launching-application

我正在为以类似信息亭的模式运行的专用 Android 设备编写应用程序，即我的应用程序将是唯一运行的应用程序，并且必须在启动时运行。

此外，应用程序必须在用户使用修改后的 Android 启动器解锁设备后才能启动。

我正在考虑在这种情况下如何启动应用程序。一些想法：

*   启动一个接收 ACTION_BOOT_COMPLETED 广播的服务，然后让该服务通过一个意图启动主应用程序活动。我担心的是我不确定 ACTION_BOOT_COMPLETED 广播何时发生。我只需要在用户解锁设备后启动应用程序，而不是之前。
*   修改启动器以在设备解锁时启动应用程序。这可能吗？

有没有其他直观的方法来做我所描述的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:52:25.573

不是在接收 ACTION_BOOT_COMPLETED 时启动应用程序，而是在动态启动完成时注册另一个广播接收器 ACTION_SCREEN_ON 和 ACTION_USER_PRESENT，您不能在 Manifest 文件中注册它，在接收到 ACTION_USER_PRESENT 时只需启动您的主要活动。

这是[ACTION_SCREEN_ON](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)示例的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:39:15.343

这两种情况都是可能的，我们对这两种情况都有侦听器，在重新启动应用程序时，您可以使用 Action_Boot_completed。并且要解锁屏幕，请遵循[lock and unlock](http://chandan-tech.blogspot.in/2010/10/handling-screen-lock-unlock-in-android.html)的指导。希望这会帮助你。问候：HariramLakshmiNarayanan。

# java - 从命令行运行具有依赖项的 maven 项目

> ID：10099591
> 
> 赞同：3
> 
> 时间：2012-04-11T03:58:22.357
> 
> 标签：java, maven

我有一个 maven 项目，它依赖于 2 个其他本地项目和许多 3rd 方 jars。我想将 jar 文件移动到另一台机器并从那里运行应用程序。我尝试了 mvn exec:exec 命令，但找不到 2 个本地项目，这是有道理的。我如何让这种情况发挥作用。将安装应用程序的机器有 maven 并连接到 Internet，因此如果需要，它可以下载 pom.xml 中提到的 jar。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-07T18:13:31.643

从上面的答案中，我真的无法理解太多。Maven对我来说看起来很复杂。无论如何，我想如果您这样做，那么您的问题将得到解决

**首先在 pom.xml 文件中在build**部分添加这个插件，如下所示

```
<build>
  <plugins>
    <plugin>
      <artifactId>maven-assembly-plugin</artifactId>
      <configuration>
        <descriptorRefs>
          <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
      </configuration>
   </plugin>
 </plugins>
</build> 
```

我认为 jar-with-dependencies 可以解决问题

现在从您的根目录（pom.xml 所在的位置）执行此命令序列

```
mvn compile
mvn package
mvn install assembly:assembly 
```

我不知道是否需要 mvn 包，但第三个很重要。现在，如果您看到您的目标/，您将看到一个具有依赖关系的 jar。

如何运行

```
 java -cp target/Your-Jar-1.0-SNAPSHOT-jar-with-dependencies.jar com.mycode.myapp 
```

这将运行您的 java 程序代码 com.mycode.myapp 主要方法...（免责声明：我不是 maven 专家，但这对我有用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:05:20.090

使用[Maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)创建一个 jar-with-dependencies，这将导致`mvn package`创建一个更容易部署的包的执行。

# linux - Gnome shell 权限提升

> ID：10099593
> 
> 赞同：10
> 
> 时间：2012-04-11T03:58:23.713
> 
> 标签：linux, gnome-3, gnome-shell, gnome-shell-extensions

我正在构建一个 Gnome shell 扩展，我希望能够以升级的权限做一些事情。所以，我想我需要使用“策略工具包”，但我不知道该怎么做。

所以，假设我想做类似`ifconfig eth0 down`或`ifconfig eth0 up`

我可以从终端运行：`pkexec ifconfig eth0 down`它会提示输入密码，然后执行。

但是，我应该如何从扩展内部做到这一点？

我很确定这与在 /usr/share/polkit-1/actions 中创建文件有关，但我在互联网或其他地方找不到任何东西。

我希望能够对其进行设置，以便无需输入密码，并且扩展程序可以随时运行特定命令。

我知道允许运行*任何*命令是一个非常糟糕的主意。这不是我想要的，我希望能够只运行一个程序/命令。

编辑：我不确定，但我认为可能不需要输入密码。我只知道 sudo 在第一次之后一段时间内不会要求输入密码，所以我有点想要类似的功能。不确定有什么可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:20:25.087

很久没有使用 PolicyKit 了，但据我所知，您确实必须在 actions/ 目录中创建一个文件，其内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE policyconfig PUBLIC
 "-//freedesktop//DTD PolicyKit Policy Configuration 1.0//EN"
 "http://www.freedesktop.org/standards/PolicyKit/1/policyconfig.dtd">
<policyconfig>

  <action id="org.freedesktop.policykit.pkexec.run-ifconfig">
    <description>Configure network</description>
    <message>Authentication is required to set ifconfig parameters</message>
    <defaults>
      <allow_any>no</allow_any>
      <allow_inactive>no</allow_inactive>
      <allow_active>...</allow_active>
    </defaults>
    <annotate key="org.freedesktop.policykit.exec.path">/sbin/ifconfig</annotate>
  </action>

</policyconfig> 
```

您必须更改以下值：

```
<allow_active>...</allow_active> 
```

到你想要的值。选择 的值：

*   “否”将拒绝访问
*   “是”将隐式允许访问
*   “auth_user”需要用户认证
*   “auth_admin”需要管理员身份验证。
*   “auth_user_keep”和“auth_admin_keep”功能类似，但在几分钟后保留身份验证。
*   加上其他一些值，请[在此处](http://beginlinux.com/appsm/policykit/922-declaringactions)查看。

将 allow_active 密钥的值更改为“yes”应该会停止身份验证要求。

然后您需要根据您的需要调整操作文件并调用它。

雨果，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T21:02:42.777

我在尝试实现调谐选择器时遇到了同样的问题。这是我想出的。

正如其他人回答的那样，您可能需要编写一个策略文件（我使用了“auth_admin”）。我把它放在“/usr/share/polkit-1/actions/tuned-adm.policy”中。我不认为我可以通过扩展模型分发它，所以我必须要求上游包含它。

接下来，我使用 pkexec 和我的命令来获取“sudo 弹出窗口”并让它工作。

```
const GLib = imports.gi.GLib;
const Util = imports.misc.util;
this.pkexec_path = GLib.find_program_in_path('pkexec');
this.tunedadm_path = GLib.find_program_in_path('tuned-adm');
let result = Util.trySpawnCommandLine(this.pkexec_path + " " + this.tunedadm_path  + " list") 
```

这里真正的问题是我使用了其他几种方法来运行命令行，它们会锁定 gnome-shell。我在这里找到了代码：[https](https://github.com/nodefourtytwo/gnome-shell-extension-cpu-freq/blob/master/extension.js) ://github.com/nodefourtytwo/gnome-shell-extension-cpu-freq/blob/master/extension.js特别方便。

# arrays - 从 JSON 数组中加载带有标记的谷歌地图？

> ID：10099595
> 
> 赞同：1
> 
> 时间：2012-04-11T03:58:27.370
> 
> 标签：arrays, json, google-maps, google-maps-markers

```
// // // // // // // // Ajax returns from PHP
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var obj = $.parseJSON(xmlhttp.responseText);

        var tLat = getCookie("tLat");
        var tLng = getCookie("tLng");

        var options = {
          zoom: 4,
          center: new google.maps.LatLng(40.7257, -74.0047),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Creating the map  
        var map = new google.maps.Map(document.getElementById('map'), options);

        // Adding a marker to the map
        var marker1 = new google.maps.Marker({
          position: new google.maps.LatLng(tLat, tLng),
          map: map,
          title: 'Click me',
          icon: 'http://gmaps-samples.googlecode.com/svn/trunk/markers/blue/blank.png'
        });

        var i = 0;
        for(i=0;i<=10;i++) {
            // Adding a marker to the map
            var marker[] = new google.maps.Marker({
            position: new google.maps.LatLng(obj[i].lat, obj[i].lng),
            map: map,
            title: 'Click me',
            icon: 'http://gmaps-samples.googlecode.com/svn/trunk/markers/blue/blank.png'
            });
        }

        $('#map').show();
    }
}
// // // // // // // // 
```

所以我有一个 JSON 数组，我正在尝试加载前十个标记。我在 for 循环中的 JavaScript 格式有点不正确，我正在尝试开发一个解决方案，该解决方案将从 JSON 数组中正确添加标记。for 循环上方的第一个标记确实可以正确加载。有没有人这样做过？

PS我也试过这个也不起作用。我的警报显示小数点后七位数的浮点值。

```
 // // // // // // // // Ajax returns from PHP
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var obj = $.parseJSON(xmlhttp.responseText);

        var tLat = getCookie("tLat");
        var tLng = getCookie("tLng");

        var options = {
          zoom: 4,
          center: new google.maps.LatLng(40.7257, -74.0047),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Creating the map  
        var map = new google.maps.Map(document.getElementById('map'), options);

        alert(obj[0][1]+','+obj[0][2]);

        //var myLatLng = new google.maps.LatLng(40.7257, -74.0047);
        var myLatLng = new google.maps.LatLng(String(obj[0][1]), String(obj[0][2]));

        var marker = new google.maps.Marker({ position: myLatLng, map: map });

        $('#map').show();
    }
}
// // // // // // // // 
```

PPPS 我的 obj 警告框带有 -84.3132324,34.0393598，看起来像所需的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:50:52.750

```
 // // // // // // // // Ajax returns from PHP
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var obj = $.parseJSON(xmlhttp.responseText);

        var tLat = getCookie("tLat");
        var tLng = getCookie("tLng");

        var options = {
          zoom: 4,
          center: new google.maps.LatLng(tLat, tLng),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Creating the map
        var map = new google.maps.Map(document.getElementById('map'), options);

        var myLatLng = new google.maps.LatLng(parseFloat(obj[0][2]), parseFloat(obj[0][1]));

        //var marker = new google.maps.Marker({ position: myLatLng, map: map });

        var marker;

        for(var i=0;i<obj.length;i++) {

            var myLatLng = new google.maps.LatLng(parseFloat(obj[i].lat), parseFloat(obj[i].lng));

            var marker = new google.maps.Marker({ position: myLatLng, map: map });
        }

        $('#map').show();
    }
}
// // // // // // // // 
```

事实证明，这是使事情与 APIv3 一起工作的方法之一

# android - 为什么我清理数据后 PRAGMA 总是保持相同的值？

> ID：10099596
> 
> 赞同：1
> 
> 时间：2012-04-11T03:58:31.230
> 
> 标签：android, sqlite, contacts, android-contentprovider

我正在测试中的`onUpgrade`方法`ContactsProvider`。

当我`ContactsProvider`从设置->应用程序->联系人存储->清理数据中清理数据，然后`contacts`再次启动。`user_version`变量在清理之前仍然保持值。

例如：原来`user_version`是 354，我把它加一到`PRAGMA user_version=355`. 然后清理数据。启动联系人。`user_version`还是355 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:49:10.020

Refer to [Doc of SQLite](http://www.sqlite.org/pragma.html),

> The PRAGMA statement is an SQL extension specific to SQLite and used to modify the operation of the SQLite library or to query the SQLite library for internal (non-table) data.

# asp.net - 嵌套列表视图

> ID：10099598
> 
> 赞同：1
> 
> 时间：2012-04-11T03:59:04.460
> 
> 标签：asp.net, vb.net, listview

好的，我已经看到很多关于在嵌套列表视图中访问父列表视图的问题，但没有人回答我的问题。

为什么我不能访问第一个列表视图的某些属性并将其发送到第二个？我尝试了很多不同的属性，但没有一个工作。ItemPlaceHolder 或只是 User_Category 呢？我的想法是使用两个 ObjectDataSoureces 并将 DataKeyName 从父列表视图发送到第二个 ObjectDataSource。但我不知道如何获取 DataKeyName（参见下面的 ????）

```
<asp:ListView ID="ListView1" runat="server" 
     DataSourceID="srcGetOrderForm"
     DataKeyNames=User_Category
     ItemPlaceholderID="lvItemPlaceHolder">

     <LayoutTemplate>
        <asp:PlaceHolder runat="server" ID="lvItemPlaceHolder" />
     </LayoutTemplate>

     <ItemTemplate>
         <asp:Panel runat="server" ID="panelCustomerInfo"
              cssclass="collapsePanelHeaderForFilter"> 
              <%# Eval("User_Category")%>
         </asp:Panel>    
         <asp:panel runat="server" ID="panelCustomerDetails"
              cssclass="collapsePanelForFilter">

        <asp:ListView ID="ListView2" runat="server" 
             DataSourceID="srcGetOrderForm2"
             ItemPlaceholderID="lvOrdersItemPlaceHolder">

             <LayoutTemplate>
             <ul>
               <asp:PlaceHolder runat="server" 
                    ID="lvOrdersItemPlaceHolder" />
             </ul>
             </LayoutTemplate>

             <ItemTemplate>
             <li>
                 Description: <%# Eval("Description")%> 
             </li>
             </ItemTemplate>
             </asp:ListView>

      </asp:panel>
 </ItemTemplate>
</asp:ListView>

    <asp:ObjectDataSource 
        ID="srcGetOrderForm" 
        TypeName = "ABC.Products"
        SelectMethod = "NewGetOrderFormCategories"
        runat="server" >
        <SelectParameters>
            <asp:ProfileParameter Name="User" PropertyName="User_ID" />
        </SelectParameters>
    </asp:ObjectDataSource>

    <asp:ObjectDataSource 
        ID="srcGetOrderForm2" 
        TypeName = "ABC.Products"
        SelectMethod = "NewGetOrderFormCategoryItems"
        runat="server" >
        <SelectParameters>
            <asp:ProfileParameter Name="User" PropertyName="User_ID" />
            <asp:ControlParameter ControlID="ListView1" Name="User_Category" PropertyName=???? />
        </SelectParameters>
    </asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:40:28.920

是可以做到的，但这一切都取决于你所说的“传递”是什么意思，你想传递什么，以及你想传递值的时间。

如果您想将信息从主列表视图传递到子列表视图，您可以覆盖主列表视图的`ItemCreated`事件。在这种情况下，您可以访问`Container.DataItem`，它将提供父列表视图的行绑定到的当前对象。然后，您可以使用该`FindControl`函数找到内部列表视图，并在您认为合适的情况下与之交互。但是，您可能无法使用`ObjectDataSource`. 您可能必须直接绑定第二个列表视图的数据源。

# java - 错误：找不到符号：方法 startActivity

> ID：10099600
> 
> 赞同：1
> 
> 时间：2012-04-11T03:59:41.350
> 
> 标签：java, android, android-intent

我正在开发一个应用程序，以便通过以下代码连接到 Google Navigator..

```
import android.app.Activity; 
import android.content.Context;
import android.content.Intent;
import android.net.Uri;

public static void Call_GoogleMapsNavigation(int longitud,int latitud)
{
Intent i = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("google.navigation:q=" +latitud+ ","+longitud+"")); 
Context.startActivity(i); 
} 
```

...但我收到以下错误：

返回错误：

```
GWDCPSET_GlobalProcedures_MobileDevice.java:1223: cannot find symbol
symbol : method startActivity(android.content.Intent)
location: class antay.cfsatv30.wdgen.GWDCPSET_GlobalProcedures_MobileDevice
startActivity(i); 
^ 
```

我找不到问题的解决方案...

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-14T13:03:53.663

为了进一步解释上面的答案。这意味着你不能/不应该不静态调用`startActivity(intent).`

```
Context.startActivity(intent); //wrong notice capital 'C' 
```

您需要一个 Context 实例。

因此，最简单的做法是在静态方法中添加一个参数：（ **注意小写“c”作为 Java 中方法名称的约定）**

```
public static void call_GoogleMapsNavigation(final Context context, int longitud,int latitud) { 

        ...
        context.startActivity(i); //right
} 
```

因此，例如在您的活动或应用程序中包含对上下文实例的引用的任何组件中，您可以按如下方式调用您的方法

为简单起见，我假设您从活动中调用它（始终包含对上下文的引用）：

```
MainActivity extends AppCompatActivity { 

    OnCreate(Bundle savedInstance) {
        <YourHelperClass>.callGoogleMapsNavigation(this, 23, 44); //static call
    }
} 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:01:18.810

试试这种方式：

```
Context oContext;
oContext= mContext;
Intent i = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("google.navigation:q=" + latitud+ "," + longitud));
oContext.startActivity(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-19T22:51:22.700

`Uri.parse("google.navigation:q=" +latitud+ ","+longitud+""));`

`getContext.startActivity(i); //to get the context the method is called in`

# python - 如何在python的列表中获取10个最常见的字符串

> ID：10099602
> 
> 赞同：1
> 
> 时间：2012-04-11T04:00:20.147
> 
> 标签：python

我有一个包含 93 个不同字符串的列表。我需要找到 10 个最频繁的字符串，并且返回必须按照从最频繁到最不频繁的顺序。

```
mylist = ['"and', '"beware', '`twas', 'all', 'all', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'arms', 'as', 'as', 'awhile', 'back', 'bandersnatch', 'beamish', 'beware', 'bird', 'bite', 'blade', 'borogoves', 'borogoves', 'boy', 'brillig']
 # this is just a sample of the actual list. 
```

我没有最新版本的 python，不能使用计数器。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T04:04:23.570

您可以使用[模块](http://docs.python.org/library/collections.html)[`Counter`](http://docs.python.org/library/collections.html#collections.Counter)中的 a来执行此操作。[`collections`](http://docs.python.org/library/collections.html)

```
from collections import Counter
c = Counter(mylist) 
```

然后做`c.most_common(10)`回报

```
[('and', 13),
 ('all', 2),
 ('as', 2),
 ('borogoves', 2),
 ('boy', 1),
 ('blade', 1),
 ('bandersnatch', 1),
 ('beware', 1),
 ('bite', 1),
 ('arms', 1)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T04:54:27.573

David 的回答是最好的——但是如果您使用的 Python 版本不包括 collections 模块中的 Counter（在 Python 2.7 中引入），您可以使用执行相同操作的 counter 类的[这个实现。](http://code.activestate.com/recipes/576611/)我怀疑它会比模块慢，但会做同样的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T05:10:29.690

大卫的解决方案是最好的。

但可能更有趣的是，这里有一个不导入任何模块的解决方案：

```
dicto = {}

for ele in mylist:
    try:
        dicto[ele] += 1
    except KeyError:
        dicto[ele] = 1

top_10 = sorted(dicto.iteritems(), key = lambda k: k[1], reverse = True)[:10] 
```

结果：

```
>>> top_10
[('and', 13), ('all', 2), ('as', 2), ('borogoves', 2), ('boy', 1), ('blade', 1), ('bandersnatch', 1), ('beware', 1), ('bite', 1), ('arms', 1)] 
```

编辑：

回答后续问题：

```
new_dicto = {}

for val, key in zip(dicto.itervalues(), dicto.iterkeys()):

    try:
        new_dicto[val].append(key)
    except KeyError:
        new_dicto[val] = [key]

alph_sorted = sorted([(key,sorted(val)) for key,val in zip(new_dicto.iterkeys(), new_dicto.itervalues())], reverse = True) 
```

结果：

```
>>> alph_sorted
[(13, ['and']), (2, ['all', 'as', 'borogoves']), (1, ['"and', '"beware', '`twas', 'arms', 'awhile', 'back', 'bandersnatch', 'beamish', 'beware', 'bird', 'bite', 'blade', 'boy', 'brillig'])] 
```

如果您注意到某些单词中有额外的引号，则出现一次的单词会按字母顺序排序。

编辑：

回答另一个后续问题：

```
top_10 = []

for tup in alph_sorted:
    for word in tup[1]:
        top_10.append(word)
        if len(top_10) == 10:
            break 
```

结果：

```
>>> top_10
['and', 'all', 'as', 'borogoves', '"and', '"beware', '`twas', 'arms', 'awhile', 'back'] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T04:05:43.493

不用`Counter`作问题请求的修改版本

`heap.nlargest`按照@Duncan 的建议改为使用

```
>>> from collections import defaultdict
>>> from operator import itemgetter
>>> from heapq import nlargest
>>> mylist = ['"and', '"beware', '`twas', 'all', 'all', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'and', 'arms', 'as', 'as', 'awhile', 'back', 'bandersnatch', 'beamish', 'beware', 'bird', 'bite', 'blade', 'borogoves', 'borogoves', 'boy', 'brillig']
>>> c = defaultdict(int)
>>> for item in mylist:
        c[item] += 1

>>> [word for word,freq in nlargest(10,c.iteritems(),key=itemgetter(1))]
['and', 'all', 'as', 'borogoves', 'boy', 'blade', 'bandersnatch', 'beware', 'bite', 'arms'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T05:36:08.067

如果你的 Python 版本不支持 Counter，你可以按照 Counter 的实现方式

```
>>> import operator,collections,heapq
>>> counter = collections.defaultdict(int)
>>> for elem in mylist:
    counter[elem]+=1        
>>> heapq.nlargest(10,counter.iteritems(),operator.itemgetter(1))
[('and', 13), ('all', 2), ('as', 2), ('borogoves', 2), ('boy', 1), ('blade', 1), ('bandersnatch', 1), ('beware', 1), ('bite', 1), ('arms', 1)] 
```

如果您看到 Counter 类，它会创建一个包含 Iterable 中存在的所有元素的字典，然后将数据放入 heapq，key 是字典的值并检索 nargest

# compression - SPHINX 输出压缩？

> ID：10099603
> 
> 赞同：0
> 
> 时间：2012-04-11T04:00:26.133
> 
> 标签：compression, sphinx, resultset

是否有任何选项可用于以压缩格式获取 SPHINX 结果集？像gzip等，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:20:21.100

不不直接。可能的想法

1.  在与 sphinx 相同的服务器上安装轻量级代理。这需要在后台使用 sphinx，但会将数据压缩回真实客户端。（可能使用 json 或类似的，应该可以很好地压缩 - 这样做而不是尝试压缩 sphinxes 二进制协议 - 因为必须使用 sphinx api 代码对其进行解码）

2.  使用 SSH 隧道 - 并在隧道上启用压缩。但是 SSH 可能会抵消您可能会看到的压缩带来的小好处。

3.  使用 SphinxQL。mysql 客户端有一个压缩设置 - 但我不确定 sphinx 是否支持服务器端。

# python - 在 tkinter (python) 的条目小部件中设置整数限制

> ID：10099610
> 
> 赞同：1
> 
> 时间：2012-04-11T04:00:58.127
> 
> 标签：python, integer, tkinter, limit

我该如何做到这一点，如果有人输入一个高于 3000 的数字，它会打印出一条自定义消息，而不是计算该特定数字的阶乘？

我试过'如果数字> 3000，打印“blah blah blah”'，但它不起作用。认为它与tkinter有关。

```
from Tkinter import *
import tkMessageBox, os

#calculates factorial of inputNumber
def calculate():
    number = inputNumber.get()
    inputNumber.delete(0, END)
    product = 1
    for i in range(int(number)):
        product = product * (i+1)
    facAnswer.delete(1.0, END)
    facAnswer.insert(END, product)

cal = Tk()
cal.title("Factorial Calculator")
cal.geometry('450x300+200+200')

#Enter the number you want the factorial of 
factorialNumber = IntVar()
inputNumber = Entry(cal, textvariable=factorialNumber)
inputNumber.pack()

#executes calculate function by pressing button
enterButton= Button(cal, text="CALCULATE!", width=20,command=calculate)
enterButton.pack(side='bottom',padx=15,pady=15)

#Where the answer appears:
facAnswer = Text(cal)
facAnswer.insert(END, "Answer:")
facAnswer.pack()

cal.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:28:50.143

It seemed to work for me. You could put everything in a class,
and try using `get()` on `factorialNumber`, to see if it makes a difference.

```
import Tkinter as tk

class GUI(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)

        self.title("Factorial Calculator")
        self.geometry('450x300+200+200')

    # Enter the number you want the factorial of
        self.factorialNumber = tk.IntVar()
        self.inputNumber = tk.Entry(self, textvariable=
                                    self.factorialNumber)
        self.inputNumber.pack()

    # executes calculate function by pressing button
        enterButton= tk.Button(self, text="CALCULATE!",
                                width=20,command=self.calculate)
        enterButton.pack(side='bottom',padx=15,pady=15)

    # Where the answer appears
        self.facAnswer = tk.Text(self)
        self.facAnswer.insert('end', "Answer:")
        self.facAnswer.pack()

    def calculate(self):
        number = self.factorialNumber.get()
        if number > 3000:
            print('The number is out of range.')
        else:
            self.inputNumber.delete(0, 'end')
            product = 1
            for i in range(int(number)):
                product = product * (i+1)
            self.facAnswer.delete(1.0, 'end')
            self.facAnswer.insert('end', product)

gui = GUI()
gui.mainloop() 
```

# objective-c - Objective-C 中的 Sscanf 等价物

> ID：10099612
> 
> 赞同：9
> 
> 时间：2012-04-11T04:01:04.557
> 
> 标签：objective-c, cocoa, 3d

我目前正在用 Objective-C 编写波前 OBJ 加载器，我正在尝试弄清楚如何以与 C 中的 sscanf() 函数类似的方式解析来自 NSString 的数据。

OBJ 文件在顶点、纹理坐标和法线的 x、y、z 三元组中定义面，例如：

```
f 1.43//2.43 1.11//2.33 3.14//0.009 
```

目前我不关心纹理坐标。在 C 中，解析这一行的一种简单方法是使用如下语句：

```
sscanf(buf, "f %d//%d %d//%d %d//%d", &temp[0], &temp[1], &temp[2], &temp[3], &temp[4], &temp[5]); 
```

显然，如果不先将 NSStrings 转换为 C 风格的字符串，就不能在 sscanf() 中使用它们，但我想知道是否有更优雅的方法来执行此操作而不进行此类转换。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T04:06:54.320

[NSScanner](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)类可以解析字符串中的数字，尽管它不能用作 sscanf 的替代品。

**编辑**：这是使用它的一种方法。您也可以将`/`放入要跳过的字符列表中。

```
float temp[6];
NSString *objContent = @"f 1.43//2.43 1.11//2.33 3.14//0.009";
NSScanner *objScanner = [NSScanner scannerWithString:objContent];

// Skip the first character.
[objScanner scanString:@"f " intoString:nil];

// Read the numbers.
NSInteger index=0;
BOOL parsed=YES;
while ((index<6)&&(parsed))
{
    parsed=[objScanner scanFloat:&temp[index]];
    // Skip the slashes.
    [objScanner scanString:@"//" intoString:nil];

    NSLog(@"Parsed %f", temp[index]);
    index++;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T04:10:00.980

要从 NSString 转到 C-String (char *)，请使用

```
NSString *str = @"string";
const char *c = [str UTF8String]; 
```

或者，

```
NSString *str = @"Some string";
const char *c = [str cStringUsingEncoding:NSUTF8StringEncoding]; 
```

提供对 sscanf() 函数的访问。

要走另一条路，请使用

```
const *char cString = "cStr";
NSString *string = [NSString stringWithUTF8String:cString]; 
```

或者

```
const *char cString = "cStr";
NSString *myNSString = [NSString stringWithCString:cString encoding:NSASCIIStringEncoding]; 
```

从纯 ObjC 的角度来看，NSScanner 提供了`-scanInteger`or`-scanFloat`方法来从字符串中提取整数和浮点数。

```
NSScanner *aScanner = [NSScanner scannerWithString:string];
[aScanner scanInteger:anInteger]; 
```

# php - 命令行上的 PHP 使用类 OOP 编写脚本并使用 NetBeans 运行

> ID：10099618
> 
> 赞同：0
> 
> 时间：2012-04-11T04:01:54.743
> 
> 标签：php, class, netbeans, arguments, command-line-interface

我有兴趣使用**PHP语言构建一个****类以在****NetBeans**中运行它。该类用于在**命令行界面**中运行，我需要传递**Arguments**。

 ******有人知道如何使用 Netbeans 运行它吗？

基于**OOP**概念的实现。

谢谢你。

切佩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:48:52.490

你不能运行这个类，但是你可以创建一个小的“test.php”来初始化你的类并运行它。

你可以做几件事：

### 项目运行配置

1.  右键项目，进入属性
2.  转到“运行配置”
3.  将“运行方式”更改为“脚本（在命令行中运行）”

[这是 NetBeans doc](http://netbeans.org/kb/docs/php/project-setup.html#scriptCommandLine)，但它已经过时了……但是逻辑是一样的。

### Netbeans 控制台

从 NetBeans 6.9 开始，您可以在 NetBeans 中使用终端。

1.  转到窗口->输出->终端
2.  `cd /path/to/your/project/`
3.  `php test.php`******

# python - 如何在 Python 中初始化二维元素的一维数组？

> ID：10099619
> 
> 赞同：2
> 
> 时间：2012-04-11T04:01:55.863
> 
> 标签：python, arrays

我想初始化一个包含 X 个二维元素的数组。例如，如果 X = 3，我希望它是 [[0,0], [0,0], [0,0]]。我知道 [0]*3 给出 [0, 0, 0]，但是对于二维元素我该如何做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T04:03:28.027

试试这个：

```
m = [[0] * 2 for _ in xrange(3)] 
```

在上面的代码中，将`3`视为矩阵中的行数，将`2`视为列数。这`0`是您要用于初始化元素的值。请记住这一点：如果您使用的是 Python 3，请`range`使用`xrange`.

对于更通用的解决方案，请使用此功能：

```
def create_matrix(m, n, initial=0):
    return [[initial] * n for _ in xrange(m)] 
```

对于问题的特殊情况：

```
m = create_matrix(3, 2)
print m
> [[0, 0], [0, 0], [0, 0]] 
```

或者，如果您不介意使用`numpy`，您可以使用`numpy.zeros()`Mellkor 的答案中所示的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T04:22:35.130

我猜[numpy.zeros](http://docs.scipy.org/doc/numpy-1.6.0/reference/generated/numpy.zeros.html)对此很有用。说，

```
x=4

numpy.zeros((x,x)) 
```

会给你：

> 数组（[[ 0., 0., 0., 0.], [ 0., 0., 0., 0.], [ 0., 0., 0., 0.], [ 0., 0 ., 0., 0.]])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:02:53.400

我相信这是`[[0,0],]*3`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T06:45:05.827

使用构造

`[[0,0]]*3`

工作得很好并返回以下内容：

`[[0, 0], [0, 0], [0, 0]]`

# mysql - MySQL 永远“发送数据”。查询简单，数据量大

> ID：10099620
> 
> 赞同：1
> 
> 时间：2012-04-11T04:01:58.360
> 
> 标签：mysql, performance, query-optimization, large-data

我正在尝试在一个相当大的数据集上运行我认为是一个简单的查询，并且它需要很长时间才能执行——它在“发送数据”状态下停滞 3-4 小时或更长时间。

该表如下所示：

```
CREATE TABLE `transaction` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
`uuid` varchar(36) NOT NULL,
`userId` varchar(64) NOT NULL,
`protocol` int(11) NOT NULL,
... A few other fields: ints and small varchars
`created` datetime NOT NULL,
PRIMARY KEY (`id`),
KEY `uuid` (`uuid`),
KEY `userId` (`userId`),
KEY `protocol` (`protocol`),
KEY `created` (`created`)
) ENGINE=InnoDB AUTO_INCREMENT=61 DEFAULT CHARSET=utf8 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=4 COMMENT='Transaction audit table' 
```

查询在这里：

```
select protocol, count(distinct userId) as count from transaction
where created > '2012-01-15 23:59:59' and created <= '2012-02-14 23:59:59'
group by protocol; 
```

该表有大约 2.22 亿行，查询中的 where 子句过滤到大约 2000 万行。distinct 选项会将其减少到大约 700,000 个不同的行，然后在分组之后（以及当查询最终完成时），实际返回 4 到 5 行。

我意识到这是很多数据，但对于这个查询来说，4-5 小时似乎是一个非常长的时间。

谢谢。

编辑：作为参考，这是在 db.m2.4xlarge RDS 数据库实例上的 AWS 上运行的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T05:15:54.163

你为什么不分析一个查询，看看到底发生了什么？

```
SET PROFILING = 1; 
SET profiling_history_size = 0; 
SET profiling_history_size = 15; 
/* Your query should be here */
SHOW PROFILES; 
SELECT state, ROUND(SUM(duration),5) AS `duration (summed) in sec` FROM information_schema.profiling WHERE query_id = 3 GROUP BY state ORDER BY `duration (summed) in sec` DESC; 
SET PROFILING = 0; 
EXPLAIN /* Your query again should appear here */; 
```

我认为这将帮助您查看查询需要时间的确切位置，并根据结果您可以执行优化操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T08:12:46.573

这是一个非常沉重的查询。要了解为什么需要这么长时间，您应该了解细节。

您对索引字段有一个范围条件，即 MySQL 在索引中找到最小的创建值，并且对于每个值，它从索引中获取相应的主键，从磁盘中检索行，并获取所需的字段（协议、用户 ID ) 在当前索引记录中丢失，将它们放在“临时表”中，对这 700000 行进行分组。索引实际上可以使用，这里仅用于加速范围条件。

加快速度的唯一方法是拥有一个包含所有必要数据的索引，这样 MySQL 就不需要在磁盘上查找行。那就是所谓的`covering index`。但是您应该了解索引将驻留在内存中并且将包含 ~`sizeOf(created+protocol+userId+PK)*rowCount`字节，这可能会成为更新表和其他索引的查询本身的负担。创建单独的聚合表并使用查询定期更新表更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T04:10:26.703

distinct 和 group by 都需要对服务器上的临时数据进行排序和存储。有这么多数据可能需要一段时间。

索引 userId、created 和 protocol 的不同组合会有所帮助，但我不能说多少或什么索引最有帮助。

# matlab - Matlab 仿真（统计）

> ID：10099622
> 
> 赞同：-1
> 
> 时间：2012-04-11T04:02:06.237
> 
> 标签：matlab, math, statistics, histogram

我想模拟 Y^x 的 150,000 个随机值并创建它们的直方图。谁能告诉我如何在matlab上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:16:00.333

```
Y = y_lower + (y_upper-y_lower) * rand(150000,1);
x = x_lower + (x_upper-x_lower) * rand(150000,1);

U = Y .^ x;
hist(U); 
```

`Y`从 5 到 8 和`x`从 2 到 2.5 的示例输出：![](../Images/a6946491a487f062a94e0e023b1ab522.png)

# java - 域对象中的持久性注释是一种不好的做法吗？

> ID：10099636
> 
> 赞同：36
> 
> 时间：2012-04-11T04:03:51.947
> 
> 标签：java, hibernate, annotations, domain-driven-design, morphia

我意识到诸如 Morphia 和 Hibernate 之类的持久性框架依赖于域对象上的注释来发挥它们的魔力。在某种程度上，在我看来，这是将持久性问题插入到域层中，这是我们应该努力避免的。

这是我应该尝试通过使用外部配置文件或将 DTO 与域模型分开来避免的事情吗？或者，持久层和域层之间的这种小泄漏通常被认为是可以接受的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T04:37:24.197

在我对使用 Spring 和 Hibernate 的现有系统的最新迭代中，我已经开始处理类似的问题。在第一次实现 Hibernate 模型时，我努力通过数据访问对象将服务类中的应用程序逻辑与持久性逻辑分开。去年构建一个新系统时，我允许大多数持久性对象充当域对象，因为这是权宜之计。

然而，我正在根据不断变化的业务需求重新设计相同的系统，并且我再次倾向于分离这些关注点。我只接触了新设计几天，但我已经发现自己更喜欢有一个代表内存中关注对象的对象，而一个单独的基于持久性的对象用于将其状态更改存储到数据库中。例如，我有一个持久性和一个跨事务`Lead`的并行。`ActiveLead`

我还不相信这是最好的方法，但它在直觉层面上是有道理的。我一直渴望拥有一组与持久性无关——不，持久性——*无知*的对象集，它们在数据库事务中保持内存驻留，而不考虑标准的 CRUD 简化。然而我知道最终所有的数据库操作都是作为 CRUD 实现的。两个世界必须碰撞，诀窍在于让它们和谐共舞。

域对象上的休眠注释？在我看来，这是易于实施与易于维护之间的良好折衷。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-11T06:18:56.663

我最近在一个相当复杂的系统上工作，它有一个单独的持久层，这是一个巨大的痛苦，对可维护性非常不利。你基本上是在看 YAGNI 和单一职责原则之间的冲突。在我看来，YAGNI 是更重要的一个（唉，也是最常被忽略的一个）。

我想说，在绝大多数情况下，如果您使用 ORM，直接持久化域对象会更好，除非您有*具体要求*强制持久化实体以不同的结构（如果它们具有完全相同的结构，除了象牙塔论点外，没有理由将它们分开）。

可以肯定的是：*始终*在单独的服务/DAO 层中执行实际的持久性工作（调用 ORM 函数）！这样，如果您发现需要它，以后很容易引入持久层。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-04T18:27:42.033

***域对象中的持久性注释是一种不好的做法吗？***

**是**的。随着 NoSQL 的兴起，你不能依赖单一的持久化策略。

例如，今天我将我的域对象（比如说使用 morphia）持久化到[MongoDB](http://www.mongodb.org/)中。如果明天我想将域对象持久化到[Neo4j](http://www.neo4j.org/)怎么办？

或者，您可能希望将域对象持久保存到所有三种数据库，如关系数据库（Postgres / MySQL）、MongoDB（文档存储）和 Neo4J（图形数据库），仅用于评估。

在所有这些情况下，最好有单独的持久性策略，而不是仅仅依赖域对象

**最佳实践**：将持久策略作为策略模式传递可能会有所帮助。但是在设计你的类/对象时必须小心。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-07T14:35:15.383

简短的回答：我喜欢持久的、丰富的域对象。

长答案：

近 10 年来，我使用 Spring 和 Hibernate 开发了一个相当大的系统 ~ 500k LOC。一开始，我们从“事务脚本”（参见 Fowler）方法开始，部分原因是我们不太信任 Hibernate。然而，在很短的时间内，我们开始信任 Hibernate，并且由于我更早地接受过相当纯粹的 OO 培训，我成为了将瞬态持久性与域驱动设计方法相结合的忠实信徒。我们基本上认为我们的系统是由 ODBMS 支持的（有很多小漏洞:-)）。

我称我们的架构为“域内核”，因为 DDD 的书还没有写完。这是在 Hibernate 的早期，所以领域模型没有被注释污染。持久性的独立关注点在 XML 映射中保持独立。

同样，随着时间的推移，我们在将行为下推到领域层方面做得更好。我们有一个非常传统的控制器-->服务-->dao-->域分层方案，它通过编译时依赖项强制执行。随着时间的推移，我观察到这个模型非常适合我们的系统，它代表了相当复杂的 401(k) 计划管理领域的各个方面，包括计划设置、交易、会计、合规性测试、销售、品牌推广等。具有（相对）透明的“神奇”持久性的富域模型是我们能够根据域模型中的现有特性构建新特性的关键。

我们的服务层仅编排技术服务之间的交互（例如电子邮件、文件 I/O、排队等），并在必要时帮助跨域包。服务层还定义了事务边界（通过 Spring）。服务仅接收或发出 DTO 或原语。很多人讨厌这样，作为 DRY 的一个突破，但我们发现它在定义服务接口和使用它们的代码时让我们保持诚实。这也使得以后远程操作变得非常容易。

这种方法使我们能够用一个非常小的团队（我们是一个 Scrum 团队）构建高质量的软件。

因此，请考虑我是持久域对象的信徒。不知道我的故事是否有帮助，但我想分享。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-02-11T09:54:20.980

如果我已经决定使用我要使用的持久性框架，我相信我会在我的域上使用注释，但是，如果您遵循[Hexagonal](http://alistair.cockburn.us/Hexagonal+architecture)架构和 TDD，XML 会更方便。如果您预先使用特定框架注释您的域，您将与持久性集成相结合，并且无法以与技术/框架无关的目的测试核心功能。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-11T05:02:32.937

在我看来，无需复制域对象即可将它们与持久层分离。它可以处理重复的代码，并且通过使用与 DTO 相同的对象完全可行。如有必要，您可以随时使用单独的课程，但我不会将其作为经验法则，这会花费您的时间，而且我们都知道时间很宝贵。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-10T10:06:48.120

我更喜欢上面有注释的富域对象。甚至 Evans 在他的[示例应用程序](http://dddsample.sourceforge.net/)中也使用了这种方法。他使用 XMl 而不是 Annotations，但他仍然保留相同的对象。

也许将域和持久性分开会更干净，但不要只是为了能够在未来选择不同的数据库技术。这是通往复杂地狱的道路，YAGNI 先生会咬你的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-21T05:48:12.007

在 DDD 社区发现的东西

> 由 Chris Richardson 发表 *如果您想将 JPA 排除在域模型之外，请使用 XML 而不是注释（我从来都不是 ORM 注释的粉丝，因为恕我直言，它混合了关注点）

就我个人而言，我非常喜欢使用注释，XML 对我来说总是容易出错，字段名称的一个小改动，你也需要手动更改 XML。如果你想重构你的域的一个类，你最终可能会更改几个文件而不是自动处理它。但最近，我一直在重新考虑这一点，因为我希望能够在一个项目中使用多个持久选项。我不想要任何与我的域中的持久性相关的东西，所以 XML 是一种选择。尽管如此，有几次我到达了没有直接映射的地步，或者我仍然想使用注释，因为它们很容易更改并且可以直接在代码中看到。我最近一直在做的事情是将我的业务域类创建为抽象类，并使用另一个以持久扩展它。像这样的东西：

```
public abstract class Persona {
  private Set<State>states;
  public boolean inState(State state){
    return states.contains(state);
  }
} 
```

如果由于某种原因有一个数据库，其中状态已经定义为单个列，并且不可能进行直接映射，我可以扩展业务类并将其用作持久性实体。

```
@Entity
public class PersonaSql extends Persona {
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Integer id;

  private String statesDefinition;

  @PrePersist
  void prePersist(){
    this.statesDefinition = mapStatesSetToString();
  }

  @PostPersist
  void postPersists(){
    this.states = mapStatesStringToSet();
  }
} 
```

当然，这是一个微不足道的例子。还有其他方法可以解决这个问题，我的观点是：通过使用继承，您可以利用使用注释的巨大优势，并使您的业务模型不了解特定的持久性代码。

不使用继承的另一个选择是将持久性实体转换为业务模型，反之亦然，但我不建议采用这种方法（即使使用自动映射器之类的东西），除非您的域很简单并且您确定它会保持简单。例如，如果您正在创建微服务，那么您的域应该足够简单，并且它应该是简单的。

# mysql - 将列设置为行值之间的差异，它们之间的行数不确定

> ID：10099641
> 
> 赞同：0
> 
> 时间：2012-04-11T04:04:43.493
> 
> 标签：mysql, sql

一直试图围绕如何`Duration`在此表中进行设置，使用单个查询，即行的时间戳与相同`SkillTargetID`值的前一行之间的差异。我已经发现了一些类似的问题（[这个](https://stackoverflow.com/questions/5078987/calculate-deltadifference-of-current-and-previous-row-in-sql)问题特别有帮助），但是他们都能够预测第二行的距离，例如，基于一个月的值。对于我的数据的每一行，它的“姐妹”行可能与它相邻，也可能不相邻。

这是此示例中我的表的简化版本：

```
mysql> select * from testdur order by id;
+----+---------------+--------------+----------+
| id | SkillTargetID | UTC_DateTime | Duration |
+----+---------------+--------------+----------+
|  1 |          5000 |   1323719341 |     NULL |
|  2 |          5010 |   1323719341 |     NULL |
|  3 |          5000 |   1323719342 |     NULL |
|  4 |          5010 |   1323719342 |     NULL |
|  5 |          5000 |   1323719343 |     NULL |
|  6 |          5055 |   1323719345 |     NULL |
|  7 |          5010 |   1323719350 |     NULL |
|  8 |          5010 |   1323719441 |     NULL |
|  9 |          5010 |   1323719444 |     NULL |
| 10 |          5000 |   1323719445 |     NULL |
| 11 |          5055 |   1323719445 |     NULL |
| 12 |          5060 |   1323719445 |     NULL |
| 13 |          5000 |   1323719445 |     NULL |
| 14 |          5010 |   1323719445 |     NULL |
| 15 |          5060 |   1323719446 |     NULL |
| 16 |          5000 |   1323719460 |     NULL |
| 17 |          5000 |   1323719460 |     NULL |
| 18 |          5060 |   1323719500 |     NULL |
+----+---------------+--------------+----------+ 
```

表中的基本数据遵循此规则：当按 排序时`id`， 的值`UTC_DateTime`将始终大于或等于前一行，如此示例数据所示。相同的不同`SkillTargetID`值的顺序`UTC_DateTime`是不可预测的，很多行会有相同的`UTC_DateTime`和`SkillTargetID`（例如16和17）。

到目前为止，我想出的最佳尝试包括一个子查询来查找前一个关联的行，如果它存在的话（我还选择了第二个`UTC_DateTime`，这样你就可以看到被减去的内容）：

```
SELECT
 t.id,
 t.SkillTargetID,
 t.UTC_DateTime,
 t2.UTC_DateTime AS UTC_DateTime2,
 (CASE WHEN t2.UTC_DateTime IS NULL THEN 0 ELSE t.UTC_DateTime - t2.UTC_DateTime END) AS Duration
FROM testdur t LEFT JOIN testdur t2
 ON t.SkillTargetID = t2.SkillTargetID
 AND t2.id = (
  SELECT id FROM testdur
  WHERE SkillTargetID = t.SkillTargetID AND id < t.id
  ORDER BY id DESC
  LIMIT 1 )
ORDER BY t.id;
+----+---------------+--------------+---------------+----------+
| id | SkillTargetID | UTC_DateTime | UTC_DateTime2 | Duration |
+----+---------------+--------------+---------------+----------+
|  1 |          5000 |   1323719341 |          NULL |        0 |
|  2 |          5010 |   1323719341 |          NULL |        0 |
|  3 |          5000 |   1323719342 |    1323719341 |        1 |
|  4 |          5010 |   1323719342 |    1323719341 |        1 |
|  5 |          5000 |   1323719343 |    1323719342 |        1 |
|  6 |          5055 |   1323719345 |          NULL |        0 |
|  7 |          5010 |   1323719350 |    1323719342 |        8 |
|  8 |          5010 |   1323719441 |    1323719350 |       91 |
|  9 |          5010 |   1323719444 |    1323719441 |        3 |
| 10 |          5000 |   1323719445 |    1323719343 |      102 |
| 11 |          5055 |   1323719445 |    1323719345 |      100 |
| 12 |          5060 |   1323719445 |          NULL |        0 |
| 13 |          5000 |   1323719445 |    1323719445 |        0 |
| 14 |          5010 |   1323719445 |    1323719444 |        1 |
| 15 |          5060 |   1323719446 |    1323719445 |        1 |
| 16 |          5000 |   1323719460 |    1323719445 |       15 |
| 17 |          5000 |   1323719460 |    1323719460 |        0 |
| 18 |          5060 |   1323719500 |    1323719446 |       54 |
+----+---------------+--------------+---------------+----------+ 
```

显然，随着这个表的增长，像这样的 UPDATE 会变得非常糟糕。这是我在绕圈子之前能想到的全部：

```
UPDATE testdur t SET t.Duration = t.UTC_DateTime - (
 SELECT UTC_DateTime FROM testdur
 WHERE SkillTargetID = t.SkillTargetID AND id < t.id
 ORDER BY id DESC LIMIT 1 );
ERROR 1093 (HY000): You can't specify target table 't' for update in FROM clause 
```

我还有什么其他选择？

这是我使用的测试数据：

```
CREATE TABLE `testdur` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `SkillTargetID` int(10) unsigned NOT NULL,
  `UTC_DateTime` int(10) unsigned NOT NULL,
  `Duration` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
INSERT INTO testdur (SkillTargetID,UTC_DateTime) VALUES (5000,1323719341),(5010,1323719341),(5000,1323719342),(5010,1323719342),(5000,1323719343),(5055,1323719345),(5010,1323719350),(5010,1323719441),(5010,1323719444),(5000,1323719445),(5055,1323719445),(5060,1323719445),(5000,1323719445),(5010,1323719445),(5060,1323719446),(5000,1323719460),(5000,1323719460),(5060,1323719500); 
```

奖励 - 如果已经包含已订购的新多行数据，是否可以在插入新的多行数据时执行此操作`id`？比如期间：

```
INSERT INTO testdur (id,SkillTargetID,UTC_DateTime) VALUES
(19,5010,1323719505),
(20,5055,1323719510); 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:16:00.193

通过实现@mysql 变量，您可能会更简化它。预查询以获取 ID，以及与之关联的下一个 ID，然后连接到原始表 TWICE（不同的别名）以获得正确的值，然后执行您需要的任何计算......所以，“LastID " 列是 @WasLastID 的任何值，如果它在相同的技能目标 ID 资格范围内。如果不是，则将其设置回零。应用 TEST 之后，@WasLastID 获取当前记录的 ID 作为下一个条目测试的基础。

```
select
      t.id,
      t.SkillTargetID,
      t.UTC_DateTime,
      t.UTC_DateTime2,
      if( @WasLastTarget = t.SkillTargetID, @WasLastID, 0 ) LastID,
      @WasLastID := t.ID as tmpLastID,
      @WasLastTarget := t.SkillTargetID as tmpLastTarget
   from
      testdur t,
      ( select @WasLastID = 0,
               @WasLastTarget := 0 ) sqlvars
   order by
      t.skillTargetID,
      t.id 
```

order by 将在处理任何 @ 变量之前应用于结果集，因此上述查询实质上将创建以下结果，以确保在应用 @last 目标比较时所有技能目标都正确排序...

```
 +----+---------------+--------------+--------+------------+---------------+
    | id | SkillTargetID | UTC_DateTime | LastID |  tmpLastID | tmpLastTarget |
    +----+---------------+--------------+--------+------------+---------------+
    |  1 |          5000 |   1323719341 |     0  |      1     | 5000 
    |  3 |          5000 |   1323719342 |     1  |      3     | 5000
    |  5 |          5000 |   1323719343 |     3  |      5     | 5000
    | 10 |          5000 |   1323719445 |     5  |     10     | 5000
    | 13 |          5000 |   1323719445 |    10  |     13     | 5000
    | 16 |          5000 |   1323719460 |    13  |     16     | 5000
    | 17 |          5000 |   1323719460 |    16  |     17     | 5000
-- BREAK BETWEEN SKILL TARGET...
    |  2 |          5010 |   1323719341 |     0  |      2     | 5010
    |  4 |          5010 |   1323719342 |     2  |      4     | 5010
    |  7 |          5010 |   1323719350 |     4  |      7     | 5010
    |  8 |          5010 |   1323719441 |     7  |      8     | 5010
    |  9 |          5010 |   1323719444 |     8  |      9     | 5010
    | 14 |          5010 |   1323719445 |     9  |     14     | 5010
-- BREAK BETWEEN SKILL TARGET...
    |  6 |          5055 |   1323719345 |     0  |      6     | 5055
    | 11 |          5055 |   1323719445 |     6  |     11     | 5055
-- BREAK BETWEEN SKILL TARGET...
    | 12 |          5060 |   1323719445 |     0  |     12     | 5060
    | 15 |          5060 |   1323719446 |    12  |     15     | 5060
    | 18 |          5060 |   1323719500 |    15  |     18     | 5060
    +----+---------------+--------------+--------+------------+---------------+ 
```

现在，所有所说的和提供的样本，然后您可以对其进行扩展，例如...

```
select
      PreQuery.*,
      CASE WHEN t1.UTC_DateTime IS NULL THEN 0 
           ELSE t2.UTC_DateTime - t1.UTC_DateTime END) AS Duration
   from
      ( above full select query ) as PreQuery
         LEFT JOIN testdur t1
            on PreQuery.ID = t1.ID
         LEFT JOIN testdur t2
            on PreQuery.LastID = t2.ID 
```

# jaxb - 使用 JAXB 转换值

> ID：10099642
> 
> 赞同：0
> 
> 时间：2012-04-11T04:04:56.080
> 
> 标签：jaxb

我有一个字符串值，我希望使用 JAXB 将其设置为 bean。所以我有一个 RuntimeTypeInfoSet 实例，我可以获取 RuntimePropertyInfo 并从该调用 getAccessor 获取属性的访问器。问题是访问器要求值已经是正确的类型。我该如何转换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:19:12.927

答案是使用 Transducer 实例：

```
switch (property.kind()) {
    case VALUE:
    case ATTRIBUTE:
        transducer = ((RuntimeNonElementRef) property).getTransducer();
        break;
    case ELEMENT:
        transducer = ((RuntimeElementPropertyInfo) property).getTypes().get(0).getTransducer();
        break;
    case REFERENCE:
    case MAP:
    default:
        throw new UnsupportedOperationException("Don't know how to handle property kind " + property.kind() + " for " + property);
} 
```

# drupal-7 - 如何在 Drupal 7 视图中使用当前用户作为相关字段？

> ID：10099644
> 
> 赞同：1
> 
> 时间：2012-04-11T04:05:03.443
> 
> 标签：drupal-7, drupal-views

当用户注册时，他们通过用户配置文件关联到一个或多个位置。位置是自定义内容类型。我在用户配置文件中有一个自定义字段，定义了与该位置的关系。

我有一个用户类型的视图，它返回未经身份验证的用户，并且仅限于提升角色的用户。我想添加一个过滤器，它只返回关联位置值与请求视图的当前用户的一个或多个位置值匹配的未经身份验证的用户。

我可以按关联的位置进行过滤，但我不能将该值与当前用户的值相关联。我觉得如果我可以将当​​前用户 uid 添加到关系区域而不仅仅是上下文过滤器区域，我可能能够做到这一点。我可以在不使用自定义过滤器或关系的情况下做到这一点吗？

**编辑：**

可能会有一些混乱，所以也许这将有助于澄清。

`User -> Profile -> Location`是数据关联链。我只想显示位置值与当前登录用户匹配的用户。

`User (any) -> Profile (Student) -> Location(s) == User (current) -> Profile (admin) -> Location(s)`

我可以编写 SQL 来执行此操作，但不清楚是否可以单独使用视图，或者我是否需要自定义关系或过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:54:42.747

在视图中执行此操作的唯一方法如下：

1.  查看使用用户类型
2.  将关系添加到[Profile2](http://drupal.org/project/profile2)类型（在我的情况下为“学生”）
3.  添加 profile:student:location 类型的上下文过滤器
4.  选择“提供默认值”
5.  类型：“php代码”
6.  使用以下代码：

    ```
    global $user;
    $profile = profile2_load_by_user($user->uid,'facilitator');
    if (!$profile) { return ''; }
    if (!isset($profile->field_location['und'])) { return ''; }
    $locations='';
    foreach ($profile->field_location['und'] as $location) {
      $locations.=','.$location['nid'];
    }
    return substr($locations,1); 
    ```

7.  在“更多”下，将“允许多个值”设置为 TRUE
8.  保存您的上下文过滤器

以这种方式使用 PHP，您可以加载当前用户并获取关联值以进行过滤。这在许多其他上下文和环境中可能很有用。

# android - 根据在 android 应用程序中单击的句子显示各种上下文菜单的最佳方式？

> ID：10099645
> 
> 赞同：0
> 
> 时间：2012-04-11T04:05:04.583
> 
> 标签：android, android-layout, textview, contextmenu

我正在显示大量文本（（在文本视图中），对于每个句子，我希望能够长按并显示基于当前句子的选项（例如：包含所有单词的上下文菜单我已经扩展了定义）。

例如，我有以下文字： The dog ate and running. 猫坐了下来。当长按第一句话的区域时，会出现一个上下文菜单，允许我选择 dog 并运行（因为我的引擎中有这些定义）。第二句话会拉起猫。（引擎为引擎选择的词现在是理论上的，真正的问题在上下文菜单上）

我该怎么做？我是否必须为每个句子创建 TextView，然后将长按上下文菜单添加到每个句子中？或者还有其他方法吗？

感谢你们对我的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:54:16.903

我想你应该看看这个

[http://developer.android.com/resources/articles/wikinotes-linkify.html](http://developer.android.com/resources/articles/wikinotes-linkify.html)

其次是这个

[http://developer.android.com/reference/android/text/util/Linkify.html](http://developer.android.com/reference/android/text/util/Linkify.html)

您正在尝试的内容看起来很有趣，但最终可能会是一个非常乏味的过程，除非上述链接有帮助。

# cordova - 如何在 phonegap .exec 警报框中创建 Phonegap 取消按钮？

> ID：10099647
> 
> 赞同：1
> 
> 时间：2012-04-11T04:05:08.697
> 
> 标签：cordova, cancel-button

如何使用在phonegap中创建取消和确定按钮`PhoneGap.exec(null, null, "Notification", "activityStart", ["Downloading file","Please wait..."]);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:28:10.107

```
 navigator.notification.confirm(
        'Do you want to signout and close the application?',  // message
        onConfirm,              // callback to invoke with index of button pressed
        'Sign Out',            // title
        'Sign Out,Cancel'          // buttonLabels
        ); 
```

和

```
function onConfirm(button) {
    //action for confirmation
} 
```

参考 [http://docs.phonegap.com/en/1.2.0/phonegap_notification_notification.md.html](http://docs.phonegap.com/en/1.2.0/phonegap_notification_notification.md.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:20:46.320

请在下面指定您要应用phonegap插件（ios，android）的技术是帮助您创建android核心警报框的代码在执行方法上调用此函数

```
 public synchronized void customalertBox(final String callBackId, JSONArray jarray) {
            final AlertDialog showCustomDialog = null;
            final Runnable runnable = new Runnable() {

                @Override
                public void run() {
                    AlertDialog.Builder customdialog = new AlertDialog.Builder(null);
                    showCustomDialog.setButton2("OK", new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            customalertPLUGIN.success(new PluginResult(
                                    PluginResult.Status.OK, setJSONDataTORETURN),
                                    callBackId);
                            showCustomDialog.dismiss();

                        }
                    });
                    showCustomDialog.setButton2("Cancel", new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            customalertPLUGIN
                                    .error(new PluginResult(
                                            PluginResult.Status.INVALID_ACTION),
                                            callBackId);
                            showCustomDialog.dismiss();

                        }
                    });
                    showCustomDialog = customdialog.create();
                    showCustomDialog.setCancelable(true);
                    showCustomDialog.show();

                }

            };
        } 
```

希望这会对你有所帮助。留下评论

# events - 创建没有 end_time 的事件

> ID：10099648
> 
> 赞同：0
> 
> 时间：2012-04-11T04:05:12.257
> 
> 标签：events, facebook-graph-api

我试图弄清楚如何在不指定 end_time 的情况下创建新事件。这已在 Graph API Explorer 中成功运行，但在我的 JavaScript 代码中却没有。

```
FB.api('/me/events?access_token=' + accessToken,'post',{name: retVal.name, start_time: retVal.start_time, location: retVal.location, description: retVal.description, privacy: 'SECRET'},function(retVal) {}); 
```

如果我包含一个 end_time，它会完美运行。但如果没有，我会得到“（#100）一个事件的结束时间不能早于它的开始时间。” 必须有办法做到这一点。我的客户可能并不总是希望为他们碰巧创建的任何事件指定结束时间，如果我为他们设置一个可能会稍微惹恼他们。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:20:01.730

这对我有用：

```
 FB.api('/me/events','post',{name:"SomeTestEvent",start_time:1272718027,location:"my_location"},function(resp) {
    console.log(resp);
}); 
```

注意：您还需要具有扩展权限“create_event”。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:12:03.323

所以......这是交易。基本上，我是个白痴。我在测试中没有发现的是，我的本地事件的数据库需要一个 end_date，所以如果没有提供它，它会使用 start_date。我在逻辑中有一个 if 语句来检查 end_date 是否为空，在这种情况下它从来都不是。因此 API 调用为 start 和 end 传递了相同的值，从而引发了错误。

当你工作到深夜时会发生这种情况......

# java - 使用 java 文件和相应的命令行工具来获得基本的 JUnit 4 设置需要帮助

> ID：10099649
> 
> 赞同：0
> 
> 时间：2012-04-11T04:05:17.420
> 
> 标签：java, command-line, junit, classpath

我正在尝试使用 java 文件和相应的命令行工具来获得一个基本的 JUnit 4 设置（在我继续使用 eclipse 之前 - 我怀疑这会更容易开始工作，但我仍然想先这样做）和以下是我认为会引发问题的不言自明的输入/输出：

```
deniz@debian:~$ cd /tmp/temp2/src/com/example/example
deniz@debian:/tmp/temp2/src/com/example/example$ echo $CLASSPATH
.:/home/deniz/CLASSPATH_DIR:/usr/share/java/jogl.jar:/usr/share/java/gluegen-rt.jar:/usr/share/java/junit4.jar
deniz@debian:/tmp/temp2/src/com/example/example$ ls -l /usr/share/java/junit4.jar
lrwxrwxrwx 1 root root 16 Feb  8  2011 /usr/share/java/junit4.jar -> junit4-4.8.2.jar
deniz@debian:/tmp/temp2/src/com/example/example$ ls
MathUtils.java  MathUtilsTest.java
deniz@debian:/tmp/temp2/src/com/example/example$ javac ./*.java
deniz@debian:/tmp/temp2/src/com/example/example$ ls
MathUtils.class  MathUtils.java  MathUtilsTest.class  MathUtilsTest.java
deniz@debian:/tmp/temp2/src/com/example/example$ java MathUtils
Exception in thread "main" java.lang.NoClassDefFoundError: MathUtils (wrong name: com/example/example/MathUtils)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:334)
Could not find the main class: MathUtils. Program will exit.
deniz@debian:/tmp/temp2/src/com/example/example$ java MathUtilsTest
Exception in thread "main" java.lang.NoClassDefFoundError: MathUtilsTest (wrong name: com/example/example/MathUtilsTest)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:334)
Could not find the main class: MathUtilsTest. Program will exit.
deniz@debian:/tmp/temp2/src/com/example/example$ cat MathUtils.java
package com.example.example;

public class MathUtils
{
    public static double multiply(double a, double b)
    {
        return a * b;
    }

    public static void main(String[] args)
    {
        double num = multiply(4.0,-5.0);
        System.out.println("The number is: " + num);
    }
}
deniz@debian:/tmp/temp2/src/com/example/example$ cat MathUtilsTest.java 
package com.example.example;

import org.junit.Test;

import static org.junit.Assert.*;

public class MathUtilsTest
{
    @Test
    public void testMultiply()
    {
        double a = 5.0;
        double b = -4.0;

        double expected = -20.0;
        double result = MathUtils.multiply(a, b);

        assertEquals(expected, result, 0.00001);
    }
}
deniz@debian:/tmp/temp2/src/com/example/example$ 
```

有人可以告诉我发生了什么以及如何解决这个问题吗？甚至 MathUtils 类也不起作用，我觉得它做得很好；它定义了包并有一个 main 方法。

如果需要比我提供的更多信息，请询问。

如果我犯了任何愚蠢的错误和/或假设，我深表歉意，因为我打字时非常疲倦；尽管如此，请纠正我。

任何帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:56:43.993

您的 MathUtilsTest 有一个包声明：

```
package com.example.example; 
```

由于各种原因，这意味着您的物理文件必须在`com/example/example/MathsUtilsTest`. 所以你需要从`/tmp/temp2/src/`. 那么java应该能够正确找到类。

始终从该目录运行 javac 也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:00:58.047

第一次尝试：使用完整的类名（带包）

`java com.example.example.MathUtils`

第二次尝试：添加类路径

`java -cp . com.example.example.MathUtils`

并注意[目录结构](https://stackoverflow.com/a/10102012/589766)

要运行测试，您需要按照运​​行测试中的说明[进行操作](http://junit.sourceforge.net/doc/cookbook/cookbook.htm)

# perl - 将格式化的输出放入文件中，perl 格式

> ID：10099653
> 
> 赞同：0
> 
> 时间：2012-04-11T04:05:35.470
> 
> 标签：perl, format

如果我们像这样设置一个指定的格式。有什么方法可以复制输出并将其放入文件中。

ps：当我使用严格时，它显示“全局符号“$counter”需要在 aggregator.pl 第 19 行明确的包名称”。这是什么原因造成的？我已经使用 local 来定义它的范围，所以我有点困惑。希望有人能给我一个答复。多谢

```
enter code here

# Setup includes
# use strict;
use XML::RSS;
use LWP::UserAgent;
# Declare variables for URL to be parsed
my $url2parse;
# Get the command-line argument
my $arg = shift;
# Create new instance of XML::RSS
my $rss = new XML::RSS;
# Get the URL, assign it to url2parse, and then parse the RSS content
$url2parse = get($arg);
die "Could not retrieve $arg" unless $url2parse;
$rss->parse($url2parse);
#create arrays to hold data
my @titles;
local $counter = 0;

#open file and write .txt output to it
open my $fh, ">output.txt" or die "File creation failed: $!";

# Print the channel items
foreach my $item (@{$rss->{'items'}}) {
     $titles[$counter] = $item->{'title'};
 &format_output($item->{'title'});
 $counter++;
}
sub get { 
    my $url = shift; 
    my $ua = LWP::UserAgent->new(); 
    my $res = $ua->get($url); 
    die ("Could not retrieve $url: " . $res->status_line) unless($res->is_success); 
    return $res->content; 
} 

sub format_output {
    local($title) = @_;
    $~ = "MYFORMAT";
    write;
    print $fh @_;
}
format MYFORMAT = 

=======================
  Title :~ ^<<<<<<<<<
$title
=======================
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:09:52.363

`write`接受一个可选的文件句柄参数，所以你可以`print`用`write $fh`. 您需要使用 1 参数`select`来设置`$~`文件句柄以及`STDOUT`.

`local`不声明名称的范围，它只是在范围的进入/退出时保存和恢复值。使用`our`or`use vars`来声明变量的作用域。

# javascript - 淘汰 javascript foreach 绑定

> ID：10099657
> 
> 赞同：3
> 
> 时间：2012-04-11T04:06:25.567
> 
> 标签：javascript, knockout.js

我试图允许用户创建一个演员表并向这个演员表对象添加一个类别数组。我试图使用淘汰赛的 foreach 绑定到类别数组，并让用户将新类别添加到铸件中。我创建了一个 jsfiddle 来说明我在这里要解释的内容。
[http://jsfiddle.net/msell/ueNg7/16/](http://jsfiddle.net/msell/ueNg7/16/)

当用户修改演员表时，JSON 对象会正确构建，但我无法完全获得要显示的演员表列表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T04:26:37.067

你有几个问题：

## 您正在使用淘汰赛 1.2.1

`foreach`直到 Knockout 2.0 才添加绑定。

## 您没有使用`observableArray`

您需要将您的`categories`属性修改为 a `ko.observableArray()`，而不仅仅是一个空数组。否则 Knockout 将无法观察`push`到它，并且该`remove`方法将不存在。

## 你的`this`绑定是错误的。

从事件处理程序调用时，`this`将设置不正确。您可以通过多种方式解决此[问题，在 Knockout 文档中进行了详细讨论](http://knockoutjs.com/documentation/click-binding.html)，但一个简单的解决方法是将引用更改为 to`viewModel`而不是`this`。

* * *

要解决所有这些问题，您应该升级到 Knockout 2.0，并将您的视图模型声明更改为

```
var viewModel = {
    name: ko.observable(''),
    description: ko.observable(''),
    categories: ko.observableArray(),
    categoryToAdd: ko.observable(''),

    removeCategory: function(category) {
        viewModel.categories.remove(category);
    },

    addCategory: function() {
        viewModel.categories.push(new Category(viewModel.categoryToAdd()));
        viewModel.categoryToAdd('');
    }
}; 
```

这是一个更正的 JSFiddle：http: [//jsfiddle.net/ueNg7/19/](http://jsfiddle.net/ueNg7/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:23:18.380

您需要为您的数组使用 ko.observableArray 否则 Knockout 不会知道您何时更改数组并且不会更新，您也应该使用模板，请阅读此处[http://knockoutjs.com/documentation/template-binding.html#note_2_using_the_foreach_option_with_a_named_template](http://knockoutjs.com/documentation/template-binding.html#note_2_using_the_foreach_option_with_a_named_template)

```
var viewModel = {
    name: ko.observable(''),
    description: ko.observable(''),
    categories: ko.observableArray([]),
    categoryToAdd: ko.observable(''),
    removeCategory: function(category) {
        this.categories.remove(category);
    },

    addCategory: function() {

        this.categories.push(new Category(this.categoryToAdd()));
        this.categoryToAdd('');
    }
}; 
```

# iphone - 在 iOS 5 中为 UINavigationBar 设置不同的背景图片

> ID：10099663
> 
> 赞同：2
> 
> 时间：2012-04-11T04:08:00.030
> 
> 标签：iphone, uinavigationbar, background-image

我的应用程序有几个 viewControllers，对于其中一些，我想在将它们推送到导航堆栈时使用不同的导航栏背景图像。

例如，当我的 mainViewController 加载时，我有这个：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    NSLog(@"Setting toolbar for iOS 5+");
    UIImage * navbarImage = [UIImage imageNamed:@"navbar01.png"];
    [[UINavigationBar appearance] setBackgroundImage:navbarImage forBarMetrics:UIBarMetricsDefault];
} 
```

同样，当我的另一个 viewController 被推送到导航堆栈时，我使用与上面相同的代码，除了使用不同的 UIImage (navbar02.png)。

但是，导航栏与我设置的第一个图像没有变化。出现新视图时，有什么方法可以更改 UINavigationBar 背景图像？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:13:46.593

这是类似问题的链接：[UINavigationBar setBackgroundImage: forBarMetrics: Not Working](https://stackoverflow.com/questions/7760819/uinavigationbar-setbackgroundimage-forbarmetrics-not-working)

答案是使用这个：

```
[self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

而不是您使用的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:53:24.263

```
float version = [[[UIDevice currentDevice] systemVersion] floatValue];
//  NSLog(@"%f",version);
if (version >= 5.0) {
    UIImage *backgroundImage = [UIImage imageNamed:@"image.png"];
   [self.navigationController.navigationBar setBackgroundImage:backgroundImage forBarMetrics:UIBarMetricsDefault];
}
else
{
   // UIImage *backgroundImage = [UIImage imageNamed:@"image.png"];
    NSString *barBgPath = [[NSBundle mainBundle] pathForResource:@"NavBar" ofType:@"png"];
    [self.navigationController.navigationBar.layer setContents:(id)[UIImage imageWithContentsOfFile: barBgPath].CGImage];
} 
```

它对我来说很成功......也许它会帮助你。

# jquery - 一页上有多个 SimpleModal

> ID：10099668
> 
> 赞同：0
> 
> 时间：2012-04-11T04:08:43.317
> 
> 标签：jquery, simplemodal

我认为是新手问题，但可能不是......我在一个项目中使用 SimpleModal，并且有一个页面上有多个触发器和模式的情况。

页面在这里： http: [//lumetta.highchairdesign.com/newsite/lumenate-portfolio/linen](http://lumetta.highchairdesign.com/newsite/lumenate-portfolio/linen)

触发器的标记如下：

```
<a class="modalbutton" href="#item_31" title="D112 Sand"
    style="background-image: url(/newsite/documents/gallery_photos/59.D112-Sand.jpg);">
</a> 
```

模态的标记如下：

```
<div id="#item_31" class="modal">
    <h3>D112 Sand</h3>
    <a href="javascript:;" class="lumenate_largethumb" style="background-image: url(/newsite/documents/gallery_photos/59.D112-Sand.jpg);">
    </a>
</div> 
```

是的，我知道这很奇怪，但是模态包含一个精灵，所以这就是为什么我使用带有背景图像的 A ......

我的 JS 看起来像：

```
$(".modalbutton").click(function (e) {

  var iden = $(this).attr("href"); 

  $("" + iden + "").modal( {
      close: true 
  }); 
}); 
```

我的 JS 试图找出点击了哪个链接，并用正确的 DIV 注入它。我得到了点击动作，我得到了模态容器出现，但内容没有被注入。

我在“iden”变量周围尝试了引号，我没有尝试引号......没有帮助。我尝试直接调用模态操作，它看起来像 $.modal( $( iden ), { 等等...，没有运气。我尝试将内容 div ID 传递给 SimpleModal 的正确设置变量，即“dataId “... 没有骰子。

我快疯了，要睡觉了。这应该很简单。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:46:07.417

我认为 .load() 是您正在寻找的：

```
$(".modalbutton").click(function(e)
{
    var iden = $(this).attr("href");
    $("<div></div>").load( iden ).modal(
    {
        overlayClose: true
    });
}); 
```

# android-camera - XT910 上未调用相机 onPreviewFrame

> ID：10099670
> 
> 赞同：1
> 
> 时间：2012-04-11T04:09:09.573
> 
> 标签：android-camera, surfaceview

我的 MOTO XT910 安卓手机的摄像头有问题。我只想访问相机的（帧）缓冲区，但永远不会调用“onPreviewFrame”。在我的模拟器上，它工作正常。

提前致谢，

我的代码如下：

```
public class Store extends SurfaceView implements SurfaceHolder.Callback, PreviewCallback {
static {
    System.loadLibrary("hello-jni");
}

public native void decode(Bitmap pTarget, byte[] pSource);

private Camera mCamera;
private byte[] mVideoSource;
private Bitmap mBackBuffer;
private Paint mPaint;
private Size lSize;
private static String TAG = Store.class.getCanonicalName();

public Store(Context context) {
    super(context);
    getHolder().addCallback(this);
    setWillNotDraw(false);
}

public void surfaceCreated(SurfaceHolder holder) {
    try {
        mCamera = Camera.open();
        mCamera.setDisplayOrientation(0);
        mCamera.setPreviewDisplay(null);
        mCamera.setPreviewCallbackWithBuffer(this);
        Log.d(TAG,"surfaceCreated ok");
    } catch (IOException eIOException) {
        mCamera.release();
        mCamera = null;
        Log.d(TAG,"surfaceCreated failed");
        throw new IllegalStateException();
    }
}

public void surfaceChanged(SurfaceHolder pHolder, int pFormat, int pWidth, int pHeight) {
    Log.d(TAG,"surfaceChanged in");
    mCamera.stopPreview();
    lSize = findBestResolution(pWidth, pHeight);        
    invalidate();       
    PixelFormat lPixelFormat = new PixelFormat();
    PixelFormat.getPixelFormatInfo(mCamera.getParameters()
            .getPreviewFormat(), lPixelFormat);
    int lSourceSize = lSize.width * lSize.height * lPixelFormat.bitsPerPixel / 8;
    mVideoSource = new byte[lSourceSize];
    mBackBuffer = Bitmap.createBitmap(lSize.width, lSize.height,Bitmap.Config.ARGB_8888);
    Camera.Parameters lParameters = mCamera.getParameters();
    lParameters.setPreviewSize(lSize.width, lSize.height);
    lParameters.setPreviewFormat(PixelFormat.YCbCr_420_SP);
    mCamera.setParameters(lParameters);
    mCamera.addCallbackBuffer(mVideoSource);
    mCamera.startPreview();
    Log.d(TAG,"surfaceChanged out");
}

private Size findBestResolution(int pWidth, int pHeight) {
    List<Size> lSizes = mCamera.getParameters().getSupportedPreviewSizes();
    Size lSelectedSize = mCamera.new Size(0, 0);
    for (Size lSize : lSizes) {
        if ((lSize.width <= pWidth) && (lSize.height <= pHeight)
                && (lSize.width >= lSelectedSize.width)
                && (lSize.height >= lSelectedSize.height)) {
            lSelectedSize = lSize;
        }
    }
    if ((lSelectedSize.width == 0) || (lSelectedSize.height == 0)) {
        lSelectedSize = lSizes.get(0);
    }
    return lSelectedSize;
}

public void surfaceDestroyed(SurfaceHolder holder) {
    if (mCamera != null) {
        Log.d(TAG,"surfaceDestroyed");
        mCamera.stopPreview();
        mCamera.release();

        mCamera = null;
        mVideoSource = null;
        mBackBuffer = null;
    }
}

public void onPreviewFrame(byte[] pData, Camera pCamera) {
    Log.d(TAG,"onPreviewFrame");
    decode(mBackBuffer, pData);
    invalidate();
}

@Override
protected void onDraw(Canvas pCanvas) {
    Log.d(TAG,"onDraw in");
    if (mCamera != null) {
        Paint paint = new Paint(); 
        paint.setColor(Color.YELLOW); 
        String text = String.format("%dx%d", lSize.width, lSize.height);
        pCanvas.drawText(text, 10, 10, paint);          
        pCanvas.drawLine(0, 0, 100, 100, paint);
        pCanvas.drawLine(20, 0, 0, 20, paint); 
        pCanvas.drawBitmap(mBackBuffer, 0, 0, mPaint);

        mCamera.addCallbackBuffer(mVideoSource);
        Log.d(TAG,"onDraw out");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:35:01.503

首先，我假设您没有遇到异常，并且您的相机支持您使用的相机参数 (PixelFormat.YCbCr_420_SP)。

要解决此问题，您应该尝试添加 mCamera.setPreviewDisplay(view); 具有表面视图而不是空值。不幸的是，根据 android 家伙的说法，预览不应该在没有表面视图的情况下开始：

> 不幸的是，如果您的目标是 3.0 之前的设备，则无法在没有 SurfaceView 的情况下获取预览帧。在 3.0 及更高版本上，您可以使用 Camera#setPreviewTexture() 方法将预览数据发送到 GPU 纹理。即使只是想在 GPU 中使用 YUV 数据而不是 RGB 数据，这也可以让您在没有强制 UI 元素的情况下进行流式传输；完全忽略 SurfaceTexture 。
> 
> 如果您坚持当前的方法，您会不幸地发现您的应用程序无法在许多设备上正常运行；有几个遵循 API 的限制，即在发送预览数据之前必须设置 setPreviewDisplay() 或 setPreviewTexture()。

在此处查看完整的错误报告：[http ://code.google.com/p/android/issues/detail?id=28238](http://code.google.com/p/android/issues/detail?id=28238)

然而，正如我在这个错误报告中所说，它可以在没有表面视图的情况下工作，但不能保证。

# c# - WPF 饼图 - 图表上未显示切片

> ID：10099675
> 
> 赞同：0
> 
> 时间：2012-04-11T04:10:02.133
> 
> 标签：c#, wpf, charts, pie-chart, codeplex

我正在尝试使用 WPF 饼图。问题是只显示最后一个切片。我可以看到所有切片都显示并立即隐藏，除了最后一个。任何想法 ？

```
<Window x:Class="ScrumApp01.WindowGraphique"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit" 
    xmlns:DV="clr-namespace:System.Windows.Controls.DataVisualization;assembly=System.Windows.Controls.DataVisualization.Toolkit"
    xmlns:DVC="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"
    xmlns:local="clr-namespace:ScrumApp01"
    Title="Fenêtre graphiques SCRUM" Height="674" Width="1216" ResizeMode="CanResizeWithGrip" Name="GraphicScrum01">

<DVC:Chart Margin="25,268,0,0" Title="Pointe de tarte" LegendTitle="Les datas" Background="LightSteelBlue" HorizontalAlignment="Left" VerticalAlignment="Top" Height="324" Width="307">
<DVC:PieSeries Title="Les datas en tarte" Name="Tarte2"
    ItemsSource="{StaticResource FruitCollection2}"
    IndependentValueBinding="{Binding Path=sss}"
    DependentValueBinding="{Binding Path=nnn}" >
</DVC:PieSeries> 
```

```
private void button3_Click(object sender, RoutedEventArgs e)
{
  FruitCollection2 fff = new FruitCollection2();
  fff.Clear();
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[0], bbb = 1, ddd = 10, sss =   "Item a" });
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[1], bbb = 2, ddd = 9, sss = "Item b" });
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[2], bbb = 3, ddd = 11, sss = "Item c" });
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[3], bbb = 1, ddd = 14, sss = "Item d" });
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[4], bbb = 4, ddd = 7, sss = "Item e" });
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[5], bbb = 5, ddd = 1, sss = "Item f" });
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[6], bbb = 6, ddd = 7, sss = "Item g" });
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[7], bbb = 3, ddd = 6, sss = "Item h" });
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[8], bbb = 3, ddd = 7, sss = "Item i" });
  fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[9], bbb = 4, ddd = 5, sss = "Item j" });

  this.Tarte2.ItemsSource = fff;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:01:52.780

您在 Chart 上设置 ItemsSource 的方式很奇怪。这样做应该有效：

在`sss`定义为由`{Binding Path=sss}`（基本上是 DVC 的 DataContext:PieSeries）引用的类中，声明此属性：

```
private ObservableCollection<Fruit02> mFff = new ObservableCollection<Fruit02>();
public ObservableCollection<Fruit02> fff
{
    get { return mFff; }
} 
```

然后像这样绑定你的 DVC:PieSeries ItemSource：

```
<DVC:PieSeries Title="Les datas en tarte" Name="Tarte2"
    ItemsSource="{Binding Path=fff}"
    IndependentValueBinding="{Binding Path=sss}"
    DependentValueBinding="{Binding Path=nnn}" >
</DVC:PieSeries> 
```

然后在您的点击处理程序中，不要创建新的集合，只需修改现有的：

```
 private void button3_Click(object sender, RoutedEventArgs e)
    {
        fff.Clear();
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[0], bbb = 1, ddd = 10, sss = "Item a" });
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[1], bbb = 2, ddd = 9, sss = "Item b" });
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[2], bbb = 3, ddd = 11, sss = "Item c" });
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[3], bbb = 1, ddd = 14, sss = "Item d" });
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[4], bbb = 4, ddd = 7, sss = "Item e" });
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[5], bbb = 5, ddd = 1, sss = "Item f" });
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[6], bbb = 6, ddd = 7, sss = "Item g" });
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[7], bbb = 3, ddd = 6, sss = "Item h" });
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[8], bbb = 3, ddd = 7, sss = "Item i" });
        fff.Add(new Fruit02 { nnn = this.data001.listeNombres03[9], bbb = 4, ddd = 5, sss = "Item j" });
    } 
```

假设您的 DataContext 设置正确并且您的饼图控件已正确实施，这应该可以工作。

# zend-framework - zend 框架：创建默认模块

> ID：10099678
> 
> 赞同：1
> 
> 时间：2012-04-11T04:10:24.593
> 
> 标签：zend-framework, default, modular

我按照 Vaswani V. - Zend 框架中所写的一切做了一切。初学者指南（第 33 页），但页面“http://square.localhost/default/index/index”返回响应“未找到”。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:16:10.057

我对这本书的那部分有完全相同的问题。幸运的是，本书的配套网站 (zf-beginners-guide.com) 有一个勘误表/疑难解答部分很好地解决了这个问题。引自网站：

> [如果在实施模块化目录布局并访问 URL http://square.localhost/default/index/index](http://square.localhost/default/index/index)后看到“找不到文件”错误 ，请检查新虚拟主机是否支持 .htaccess 覆盖。您可以通过在虚拟主机配置中添加以下行来启用此功能，记住将目录路径更改为虚拟主机的文档根目录。

```
<Directory "/usr/local/apache/htdocs/square/public">
   AllowOverride All
   Options All
</Directory> 
```

顺便说一句，如果您使用的是 Ubuntu，它可能没有默认启用 mod_rewrite。（顺便说一句，我自己也遇到了完全相同的问题）。如果您仍然遇到问题，请尝试以下操作：

```
sudo a2enmod rewrite
sudo service apache2 restart 
```

（非常感谢 Mahok 的帮助，顺便说一句！）

# jquery - 使用 jQuery 来“重置”功能以使插件工作

> ID：10099682
> 
> 赞同：0
> 
> 时间：2012-04-11T04:11:20.353
> 
> 标签：jquery, slider, fade

我正在使用 jQuery 图像库（在本例中为[FlexSlider](http://www.woothemes.com/flexslider/)）在一个页面上呈现多个画廊。一次只能查看一个。为了适应这一点，我在单击缩略图后使用淡入/淡出。问题是画廊休息。我尝试了几个，它们以不同的方式破裂。我确信有一种方法可以“重置”插件以防止其损坏。这就是我正在做的事情，当在页面上显示多个滑块时，应该根据站点工作：

jQuery：

```
<script type="text/javascript" charset="utf-8">
      $(window).load(function() {

        $('#main-slider').flexslider({
        animation:'fade',
        directionNav:true,
        controlsContainer: ".flex-container"
        });

        $('#secondary-slider').flexslider({
        animation:'fade',
        directionNav:true,
        controlNav:true,
        controlsContainer: ".flex-container"
        });

      });

      $(function(){
        $('#main-slider,#secondary-slider').hide();

//1//       

  $('.gal_icon_1').click(function(){
        $('#secondary-slider').fadeOut(function(){
        $('#main-slider').fadeIn();
        });
  });

//2//

   $('.gal_icon_2').click(function(){
        $('#main-slider').fadeOut(function(){
        $('#secondary-slider').fadeIn();
        });
  });

    });
    </script> 
```

html:

```
<div class="container">
    <div id="main-slider" class="flexslider">
        <ul class="slides">
            <li>
                <img src="images/BVL_CHANDRA-B_MM_2010_A3.jpg" />
            </li>
            <li>
                <img src="images/BVL_CHANDRA-BLUE_MM_2010_A3.jpg" />
            </li>
            <li>
                <img src="images/BVL_JEWELS_MM_2010_A3.jpg" />
            </li>
        </ul>
    </div> 
```

至于简单地将一个滑块淡出并淡入另一个滑块。但是当我这样做时，它会变得不稳定。那么，再一次，有没有办法“重置”滑块以使其在每个 div 上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:33:01.637

我相信问题在于您初始化滑块，然后隐藏它们。

插件代码启动并开始动画过程，然后尝试对隐藏的元素进行动画处理。这会导致 jQuery 崩溃。

从 GitHub ( [https://github.com/woothemes/FlexSlider/](https://github.com/woothemes/FlexSlider/) ) 下载最新代码，您的问题应该可以通过您当前的实现来解决。我最近添加了预防逻辑，以在滑块不可见时阻止滑块执行操作。

# sql - db 设计评论家/建议

> ID：10099684
> 
> 赞同：2
> 
> 时间：2012-04-11T04:11:40.760
> 
> 标签：sql, database, postgresql

我正在重新设计一个药房数据库系统，需要输入以查看新设计是否最佳或需要调整。

这是旧系统的快照..

![药房 Db 旧](../Images/b4029598c45d230970c16c6ee575ed0f.png)

可以看出，药房表存储药房信息，连同其地址和联系信息。药房为了开票目的（pharmacygroup）或为了销售、广告其他目的（banner group）而组合在一起。发票组可能有不同的实际地址、不同的联系信息。

这是我的新设计。我已将 pharmacy 和 pharmacygroup 表中的地址拆分为自己的表，并为联系人创建了一个新表。他们可能是技术联系人、客户联系人、所有者联系人等，因此是联系人类型表。药房和药房组可以有单独的联系信息，我想制作一个联系表并有一个“链接类型”和“链接ID”列来指示它是药房联系人还是药房组联系人，但我不确定这是否是正确的做法。这是一个好的设计还是会因为连接的数量而在数据检索方面成本高昂？我注意到的另一件事是，在旧设计中，他们没有创建任何外键约束，尽管药房表有药房组和横幅组的 groupid 和 bannergroupid 引用，可能是为了节省数据检索的时间。这是一个好方法吗？

![药房数据库设计新](../Images/61015e7e1b7dba14b0316cc28ecec9f9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T05:49:27.657

你的设计对我来说很好。我总是更喜欢在设计步骤中有几个额外的连接，而不是在系统投入生产后花时间重新组织数据。你永远不知道管理层/销售/财务人员会要求什么样的报告，适当的关系设计会给你更多的自由。

此外，您不能只`JOIN`将性能问题归咎于几个额外的 s。您应该始终查看：

*   数据量（和物理数据布局），
*   交易金额和密度，
*   I/O、CPU、内存使用率、
*   您的 RDBMS 配置，
*   SQL 查询质量。

在我看来，`JOIN`s 将在这个列表的底部。

至于[RI 约束](http://www.postgresql.org/docs/current/static/ddl-constraints.html)（参照完整性），我已经看到几个项目在没有任何主键/外键的情况下运行以提高性能。主要借口是：我们将所有检查嵌入到*应用程序*中，而*应用程序*是系统中任何更改的唯一来源。另一方面，他们同意，目前尚不清楚系统是否处于一致状态（事实上，分析表明并非如此）。

我总是坚持在设计状态上创建所有可能的键/约束，因为总会有一些“牛仔”，他们会挖掘你的数据库并“调整”他们看起来更合适的数据。不过，您可能希望暂时禁用甚至删除一些用于批量数据操作的约束/索引，这也是[官方建议](http://www.postgresql.org/docs/current/static/populate.html)。

如果不确定，创建 2 个测试数据库，一个有约束，另一个没有约束。加载一些数据并比较查询性能。我认为这将是相似的。

在这里，我对你的草图的评论，决定都是你的。

*   您可能希望以`contacts`与 相同的方式创建一个公共表`addresses`，即向目标关系添加`contact_id`、`owner_contact_id`等列，而不是从`contacts`表中引用关系；
*   由于表中只有一列`contacttype`（如果您有一个 common `contacts`），最好将唯一的字段移开并避免使用此表；
*   您的表格似乎混合了单数/复数名称，最好在这里坚持一个共同的模式。我个人更喜欢单数；
*   在`pharmacygroup`您的 PK 中命名为`id`，而所有其余 PK 都遵循`table`id 模式，如果您在这里使用通用模式，以后编写脚本会更容易；
*   在`addresses`表格中，您有带下划线的字段，例如`street_name`，而在其他地方则避免使用`_`- 考虑使其通用；
*   引用的名称不同。虽然它不是那么重要，但我确实有几个系统必须依赖约束的名称，所以最好在这里使用一些模式。我使用以下一个：

    1.  prefix `p_`, `f_`, `c_`, `t_`, `u_`or`i_`用于主键、外键、检查约束、触发器、唯一性和其他索引；
    2.  表名；
    3.  列约束/索引/触发器引用的名称。

为什么我更喜欢以单数形式命名表？`table`因为我总是使用_id 模式命名 PK ，而恕我直言`pharmacy_id`看起来更好`pharmacies_id`。我使用这种方法是因为我有一堆通用脚本，它们在将数据加载到主表之前执行数据一致性检查时依赖于这种模式。

**编辑：** 有关联系人的更多信息。您可以`contact_id`在所有表​​格中使用，使其成为*主要联系人*，无论这在您的应用程序中意味着什么。如果您需要更多联系人来处理某些关系，那么您可以使用不同的前缀，例如`owner_contact_id`,`sales_contact_id`等。

如果您希望有大量联系人用于某些关系，例如`pharmacygroup`，那么您可以添加一个额外的表格，如下所示：

```
CREATE TABLE pharmacygroupcontact (
    contactid     int4,
    groupid       int4,
    contact_desc  text
); 
```

它部分复制了您的 initial `groupcontacts`，但包含两个 FK 和一个描述。我不知道哪种方法更好，因为我不知道应用程序是如何设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:29:05.057

您有 2 个联系人表，我会创建一个，然后使用链接表来链接 groupcontacts 和 pharmacycontacts。我肯定希望设置 FK 和 PK 关系。

# mysql - 为什么在使用 PostgreSQL v. MySQL 时，Rails 上的整数大小限制不同？

> ID：10099685
> 
> 赞同：9
> 
> 时间：2012-04-11T04:11:43.657
> 
> 标签：mysql, ruby-on-rails, ruby, postgresql

我正在将我的应用程序从 MySQL 迁移到 Postgres。如果我执行 a `rake db:schema:load`，它会很好地加载到 Postgres 中，并且我的所有测试都会通过。

如果我这样做`rake db:migrate:reset`了，那么我之前设置的一个整数列将`:limit => 1`被设置为 have `:limit => 2`。

我的迁移设置如下：

```
t.integer "foo", :limit => 1, :null => false 
```

这仅仅是 Postgres 的最小尺寸较小的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T04:21:16.970

PostgreSQL 中的[`smallint`类型](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)占用两个字节，接受从 -32768 到 +32767 的数字。

[`tinyint`MySQL](http://dev.mysql.com/doc/refman/5.6/en/numeric-types.html)中没有like占用 1 个字节并接受从 -128 到 127 的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T04:22:09.373

Postgres 不提供 1 字节整数类型。整数的最小数据类型是 2 字节的 smallint。

# java - 计算器应用程序，包括 java swing 中的键盘输入

> ID：10099686
> 
> 赞同：4
> 
> 时间：2012-04-11T04:11:54.347
> 
> 标签：java, swing, calculator, key-bindings, glasspane

我在 java swing 中有一个计算器应用程序，它可以在鼠标单击输入下正常工作。现在我希望它使用键盘按钮读取输入。我听说过java教程中的**玻璃窗格**，但我需要知道任何其他简单的方法来满足要求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T04:28:40.347

[`KeyPadPanel`](http://sites.google.com/site/drjohnbmatthews/keypad-panel)是一个使用[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)和[*键绑定*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)进行数字输入的示例。

# c# - 我遇到了来自 Graphics.DrawImage 的意外结果

> ID：10099687
> 
> 赞同：3
> 
> 时间：2012-04-11T04:11:59.793
> 
> 标签：c#, .net, gdi+

要重现此问题，请在 Microsoft Paint 中创建一个 2x2 像素的黑色图像，另存为`D:\small.png`. 然后在 Visual Studio 中创建一个带有无边距 PictureBox 的新 WinForms 应用。然后使用以下代码：

```
void f6(Graphics g)
{
    var img = Image.FromFile(@"d:\small3.png");
    var srcRect = new Rectangle(0, 0, img.Width, img.Height);
    int factor = 400;
    var destRect = new Rectangle(0, 0, img.Width * factor, img.Height * factor);
    g.DrawRectangle(new Pen(Color.Blue), destRect);
    g.DrawImage(img, destRect, srcRect, GraphicsUnit.Pixel);
}

void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    f6(e.Graphics);
} 
```

我希望蓝色边距内的整个矩形都是黑色的，而输出如下：

![在此处输入图像描述](../Images/077342d9b6591ec827bb47e3d5af7e8d.png)

为什么会这样？

* * *

好，谢谢。我不知道插值。现在，让我们将代码更改如下：

```
void f6(Graphics g)
{
    var img = Image.FromFile(@"d:\small3.png");
    var srcRect = new Rectangle(0, 0, img.Width, img.Height);
    int factor = 200;
    var destRect = new Rectangle(0, 0, img.Width * factor, img.Height * factor);
    g.FillRectangle(new SolidBrush(Color.DarkCyan), pictureBox1.ClientRectangle);
    g.InterpolationMode = InterpolationMode.NearestNeighbor;
    g.DrawRectangle(new Pen(Color.Blue), destRect);
    g.DrawImage(img, destRect, srcRect, GraphicsUnit.Pixel);
} 
```

它产生以下结果：

[结果3](http://www.uploadup.com/di-NYDK.png)

这仍然是不可接受的。我也试过 60x60 的图像。问题不是因为它是 2x2 图像。它们产生相同的效果。问题是为什么 GDI+ 决定不用整个 srcRect 填充整个 destRect？！最初的问题是我有一个大图像平铺在较小的图像中。我需要相邻的瓷砖既不重叠也不存在接缝。在 C++ 中，StretchBlt 可以正常工作。但它不会产生平滑的拉伸图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T23:41:07.920

GDI+ 对源矩形的定义有点奇怪。

源图像中的 (0,0) 实际上是图像左上角像素的中心。(width-1,height-1) 是图像右下角像素的中心。

这意味着左上像素是从（-0.5，-0.5）到（0.5，0.5）的矩形，右下像素是从（width-1.5，height-1.5）到（width-0.5）的矩形,高度-0.5)。因此，您的源矩形实际上位于图像的右侧和底部 0.5 像素之外。

因此，您实际上需要一个 (-0.5, -0.5, img.Width, img.Height) 的源矩形。

我想您也可以尝试按照 Hans 的建议设置 PixelOffsetMode。这实际上可以理解这种行为，但我没想到它会应用于源矩形。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T04:24:26.180

看起来图像是使用双三次插值调整大小的。正常的双三次尺寸算法通常需要 16 个像素来插入一个，但图像中只有 4 个像素，因此永远不会设置剩余的 12 个像素，保持白色。

尝试将调整大小的方法更改为最近邻。这是通过将 Graphics 对象 g 的 InterpolationMode 属性设置为 InterpolationMode.NearestNeighbor 来完成的：

```
void f6(Graphics g) 
{ 
    var img = Image.FromFile(@"d:\small3.png"); 
    var srcRect = new Rectangle(0, 0, img.Width, img.Height); 
    int factor = 400; 
    var destRect = new Rectangle(0, 0, img.Width * factor, img.Height * factor);
    g.ImterpolatonMode = InterpolationMode.NearestNeighbor;
    g.DrawRectangle(new Pen(Color.Blue), destRect); 
    g.DrawImage(img, destRect, srcRect, GraphicsUnit.Pixel); 
} 
```

# wordpress - 使用 WP_Query，但保持分页

> ID：10099692
> 
> 赞同：0
> 
> 时间：2012-04-11T04:12:39.600
> 
> 标签：wordpress

我想让我的页面显示 2 个最近的帖子，所以我使用 WP_Query 并将 posts_per_page 设置为 2，效果很好，但它会破坏分页。这是我的代码。如何更改它以显示两个最近的帖子并保持分页？

```
 <?php $wp_query = new WP_Query( array( 'posts_per_page' =>2 ));?>

  <?php if ( $wp_query->have_posts() ) : ?>

  <?php while ( $wp_query->have_posts() ) : $wp_query->the_post(); ?>

<div <?php post_class() ?> id="post-<?php the_ID(); ?>">

    <div id="ind_post">

        <h2 class="post-title"><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>

        <div id="entry">
        <?php include (TEMPLATEPATH . '/inc/meta.php' ); ?>

            <p><?php the_excerpt(); ?></p>
        </div>
        <h4 class="more-post"><a href="<?php the_permalink() ?>">continue reading…&lt;/a></h4>

    </div>

<?php endwhile; ?>

<?php include (TEMPLATEPATH . '/inc/nav.php' ); ?>

    <?php else : ?>

    <h2>No results found</h2>

<?php endif; ?>
        <?php wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:52:42.260

这应该这样做

```
<?php $wp_query = new WP_Query( array( 'posts_per_page' =>2, 'paged=' . get_query_var( 'page' ) ));?> 
```

# ruby - ActiveSupport::TimeWithZone#to_date 返回错误的日期

> ID：10099698
> 
> 赞同：4
> 
> 时间：2012-04-11T04:13:20.303
> 
> 标签：ruby, ruby-on-rails-3, datetime

我想要一个实例中的日期部分`ActiveSupport::TimeWithZone`。我为此使用`to_date`了函数，但它返回前一天的日期。

例如，如果 datetime 是`2012-04-11 09:05:00 UTC`，并且如果我调用`to_date`那么它会返回`2012-04-10`but `2012-04-11`。

另外我没有使用特定的时区（默认为 UTC）

应用程序正在运行`Ruby 1.8.7`并且`Rails 3.0.2`

谁能告诉我为什么它给出了错误的日期？如果有更好的方法从给定的（的实例）获取日期（的实例`Date`）部分，也请建议我`DateTime``ActiveSupport::TimeWithZone`

**编辑**：这里也有人面临同样的问题[http://pastebin.com/sn8ExZiQ](http://pastebin.com/sn8ExZiQ)

**注意**：`Time.zone`退货`'UTC'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:45:14.217

谢谢[Jignesh](https://stackoverflow.com/users/936494/jignesh)。在这里，我分享您的发现和解决方案。

可能有一些 gem 覆盖了`to_date`实现，它可能被错误地实现，并且这个被覆盖的版本可能会被调用。

就我而言，罪魁祸首是`ruby-units`宝石

**根本原因**：`ruby-units`应用程序的 Gemfile 中包含 gem

**问题分析**：

**宝石文件**

```
# Ruby-units overrides String class #to method, hence placed before Rails
gem "ruby-units" # Loads first and then rails is loaded

gem "rails", "3.0.11"

..
.. 
```

**time.rb 文件（ruby-units gem 代码库）**

```
..
..

unless Time.instance_methods.include?(:to_date)
    # :nocov_19:
    # @return [Date]
    def to_date
     x=(Date.civil(1970,1,1)+((self.to_f+self.gmt_offset)/86400.0)-0.5)
     Date.civil(x.year, x.month, x.day)
    end
    # :nocov_19:
end

..
.. 
```

假设`UTC`时区 中的当前时间`Wed, 11 Apr 2012 10:12:17 UTC +00:00`由一个`ActiveSupport::TimeWithZone` 实例表示。当我们执行 Rails 应用程序时，`<TimeWithZone>.to_date`它会返回一个`2012-04-10`不正确的日期。

上述错误行为的罪魁祸首是gem`to_date`提供的方法的实现`ruby-units`

以下是演示上述错误行为的示例程序。该方法与gem`to_date`实现的方法相同，只是在方法中添加了一个参数，即实现中的 由参数“date_time”替换。`ruby-units``date_time``self`

用于确认上述发现的示例 Ruby 程序：

```
require 'rubygems'
require 'active_support/all'

class TestDT
 def to_date(date_time)
     #x=(Date.civil(1970,1,1)+((self.to_f+self.gmt_offset)/86400.0)-0.5)
     x=(Date.civil(1970,1,1)+((date_time.to_f+date_time.gmt_offset)/86400.0)-0.5)
     Date.civil(x.year, x.month, x.day)
 end
end

tdt = TestDT.new
utc_time = Time.now.in_time_zone('UTC')
puts tdt.to_date(utc_time) 
```

输出（撰写本文时的日期是星期三，`11 Apr 2012 08:35:12 UTC +00:00`）：

```
$ ruby test_date_time.rb
2012-04-10 
```

**解决方案：**

1.  移除`ruby-units`gem`Gemfile`或在 rails gem 之后加载它
2.  解决方法：不要执行`datetime.to_date`，而是使用`datetime.to_s.to_date`

# java - 对原始值进行通用转换导致 ClassCastException

> ID：10099699
> 
> 赞同：1
> 
> 时间：2012-04-11T04:13:24.640
> 
> 标签：java, generics, casting, classcastexception

我有一个下面的方法根据给定的类型对字符串进行强制转换，假设给定的字符串必须是正确的。

```
private static <T> T parsePrimitive(final Class<T> primitiveType, final String primitiveValue) {
    if (primitiveType.equals(int.class) || primitiveType.equals(Integer.class)) {
        return primitiveType.cast(Integer.parseInt(primitiveValue));
    }
    /*
    ...
    for the rest of the primitive type
    ...
    */
} 
```

但是，当我打电话时`parsePrimitive(int.class, "10");`，

> originalType.cast(Integer.parseInt(primitiveValue));

这导致`ClassCastException`，对此有任何想法吗？

ps 实际上，当我使用 Object 作为返回类型，并且在返回之前没有强制转换时，它在方法之外可以正常工作，但是我认为这不够通用。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:20:57.977

您正在混淆自动装箱和铸造。Java 编译器将生成字节码来将您的原语装箱和拆箱到对象，反之亦然，但这不适用于类型。

*   装箱/拆箱 = 变量
*   铸造=类型

在您的特定情况下， int.class 和 Integer.class 不能相互分配。

```
Class<?> intClazz = int.class;
Class<?> integerClazz = Integer.class;
System.out.println(intClazz);
System.out.println(integerClazz);
System.out.println(integerClazz.isAssignableFrom(intClazz)); 
```

输出：

```
int
class java.lang.Integer
false 
```

由于您必须在逻辑中进行大量的专门检查，我不确定尝试提出一种将字符串解析为原始值的通用方法是否值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:44:49.840

`int.class`是一个 VM 内部类，与`Integer.class`. 下面是一小段代码来展示 int.class 和 Integer.class 之间的区别。

```
import java.lang.reflect.Modifier;
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        dump(int.class);
        System.out.println("---");
        dump(Integer.class);
    }

    private static void dump(Class<?> c) {
        System.out.printf(
            "Name: %s%n" +
            "Superclass: %s%n" +
            "Interfaces: %s%n" +
            "Modifiers: %s%n",
            c.getName(),
            c.getSuperclass() == null ? "null" : c.getSuperclass().getName(),
            Arrays.asList(c.getInterfaces()),
            Modifier.toString(c.getModifiers()));
    }
} 
```

输出：

```
Name: int
Superclass: null
Interfaces: []
Modifiers: public abstract final
---
Name: java.lang.Integer
Superclass: java.lang.Number
Interfaces: [interface java.lang.Comparable]
Modifiers: public final 
```

# php - 卷曲后重定向不起作用

> ID：10099700
> 
> 赞同：1
> 
> 时间：2012-04-11T04:13:34.873
> 
> 标签：php, codeigniter, curl, payment-gateway

我有一个 codeigniter 应用程序，它通过 authorize.net 有一个结帐系统。我使用的 authorize.net 库执行 curl 进行付款，但完成后我无法重定向，因为

```
headers already sent by (output started at /Users/phil/Sites/Medbridge/httpdocs/application/libraries/AuthorizeCimLib.php:1 
```

这就是日志所说的。如果我注释掉付款的东西，它会重定向罚款。我不知道我是否不了解卷曲，这就是它正在做某事的原因，或者我是否需要更改一些卷曲设置。
谢谢

**编辑**
这是我正在使用的库的链接，它很大，不想重新发布整个代码
[http://www.communitymx.com/content/article.cfm?page=4&cid=FDB14](http://www.communitymx.com/content/article.cfm?page=4&cid=FDB14)

这是卷曲部分，也许有人可以看到这是否正在向标题输出

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $this->_url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Content-Type: text/xml"));
    curl_setopt($ch, CURLOPT_HEADER, FALSE);
    curl_setopt($ch, CURLINFO_HEADER_OUT, FALSE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $this->_xml);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    $this->_response = curl_exec($ch); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:00:41.940

这是因为服务器已经向您的浏览器输出了一些内容，之后就无法通过 php 进行重定向。

如评论中所述，您很可能在代码中的某处包含一些空格。为了练习和减少故障排除，您不需要`?>`在 php 文件的底部包含结尾。这根本不是必需的，有时可能会在其后出现一个空格，`?>`这会在代码执行期间导致回显。

您是否`include`在代码中使用文件末尾可能有 a`的任何文件？`

 `如果可以的话，另一个“解决方案”是回显

```
<script type="text/javascript">
    top.location = '<?=$str_redirect_url?>';
</script> 
```

**编辑：**

如果你使用 Codeigniter，你应该检查你的`model`,`helper`和`library`文件是否有空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:52:20.590

也许您可以使用 AJAX 来发出支付调用、获取响应并使用 Javascript 重定向？`

# android - android 短信应用程序显示发件人的位置

> ID：10099703
> 
> 赞同：1
> 
> 时间：2012-04-11T04:13:52.493
> 
> 标签：android, eclipse

我是一个安卓新手。我对一个非常原始的问题表示歉意。我打算为短信消息开发一个安卓应用程序，这样当接收者收到一条消息时，发送者的物理位置也会自动显示（使用发送者的 GPS）可能是 Lat Long 格式。我的问题是，如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:55:03.307

我认为..获取发件人的位置完全取决于发件人..即如果发件人决定透露他的位置..只有收件人才能获得他的位置..所以..您尝试制作的应用程序应该在发件人电话...在这种情况下..

创建一个带有文本字段的活动和一个按钮来发送这样的消息..

```
 class A extends Activity
  {
    String s;
Oncreate()
{
 editText = (EditText) findViewById(R.id.message);
 sendBtn  =  (Button)findViewById(R.id.send);

sendBtn  .setonclickListener(new OnClickListener(){
public void Onclick(){
       locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(
        LocationManager.GPS_PROVIDER, 
        MINIMUM_TIME_BETWEEN_UPDATES, 
        MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
        new MyLocationListener()
);
    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

if (location != null) {

    clat=location.getLatitude();
    clon=location.getLongitude();
       }
    s=editText.getText().toString()+"lat"+clat+"long"+clong
PendingIntent pi = PendingIntent.getActivity(this, 0,
        new Intent(this, Object.class), 0);  
     SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, s, pi, null);  
}
});

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T08:13:06.067

```
if (ActivityCompat.checkSelfPermission(**this**, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &&
                        ActivityCompat.checkSelfPermission(**this**, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) 
{
} 
```

如何解决第一个参数中的错误，即“ **this** ”？

# css - 如果一个 div 有“clear:right”，那么它的右边不应该有任何东西浮动，不是吗？

> ID：10099705
> 
> 赞同：8
> 
> 时间：2012-04-11T04:13:55.877
> 
> 标签：css, css-float

我似乎对css“clear”关键字的含义感到困惑。

我有许多 div 元素，都带有“float:left”。倒数第二个 div 元素也有“clear:right”。我认为这会导致后续元素进入下一行。但对我来说，它没有。

这是我的例子：

```
<div class="Section">
    <div class="Thumbnail"></div>
    <div class="Number">0</div>
    <div class="Title">ShopTVC Wallace and Gromit WOA 6Apr11</div>
    <div class="Duration">00:00:32</div>
</div>​ 
```

看起来像这样：

![在此处输入图像描述](../Images/5395e7b5c4d8475540a15f7c69c1410f.png)

我正在尝试使持续时间（“00:00:32”）出现在缩略图右侧（蓝色矩形）的下一行。

我知道我可以将最后三个 div 放入另一个容器 div，但这个问题的目的是了解为什么“clear:right”不会阻止持续时间在标题右侧浮动。

这是CSS：

```
div.Section
{
    overflow:auto;
    background:cornsilk;
    border:2px solid navy;
    padding:12px;
}

div.Section div.Thumbnail
{
    width:64px;
    height:42px;
    background:SteelBlue;
    foreground:Navy;
}

div.Number
{
    width:16px;
    margin-left:6px;
}

div.Duration
{
    margin-left:22px;
}

div.Section div
{
    float:left;
}

div.Section div.Title
{
    color:DarkGreen;
    clear:right;
} 
```

当然，还有 jsfiddle 链接：http: [//jsfiddle.net/8J7V6/3/](http://jsfiddle.net/8J7V6/3/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T04:28:52.667

该`clear`属性不会阻止将元素放置在已清除元素之后的该空间中。它可以防止元素被放置在已经有元素浮动到它之前的那个方向的地方。添加`clear:left`to`div.Duration`将使其放置在海军框下方。在持续时间之前添加 a`<br/>`可能会解决您的问题，或者，正如您在问题中已经说过的，您可以为最后三个 div 使用另一个容器 div。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-23T15:37:14.043

ahruss 的答案是正确的，但我也注意到没有人真正回答你的问题。基本上`clear:left`是指左浮动元素。`clear:right`指右浮动元素。

由于您的元素是向左浮动而不是向右浮动，`clear:right`因此不会影响它。

您可以做的另一件事是将两个文本元素包装在与蓝色框分开的 div 中，将该容器 div 和蓝色 div 浮动，然后当您浮动两个文本元素时，您的`clear:left`代码仍会将日期放在文本下方在您的容器 div 中，而不是在它左侧的蓝色图像下方。

像这样：

```
<div class="Section">
   <div class="Thumbnail"></div>
   <div class="TextContainer">
      <div class="Number">0</div>
      <div class="Title">ShopTVC Wallace and Gromit WOA 6Apr11</div>
      <div class="Duration">00:00:32</div>
   </div>
</div> 
```

并将其添加到您的 CSS 中：

```
div.TextContainer {
   float:left;
} 
```

添加您需要的任何其他视觉样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T04:24:14.047

我使用了**padding 和 margin**。如果无法在您的情况下使用，则以下解决方案将不合适。

[http://jsfiddle.net/8J7V6/5/](http://jsfiddle.net/8J7V6/5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T04:24:58.460

它的右边没有任何东西漂浮。您面临的问题是您已经在时间之前发送了所有内容，然后您告诉时间向左浮动。**它仍然漂浮在左侧，只是堆叠在左侧***已经存在*的内容之上。

但是，是的，向右清除会使该元素分解，超出所有在其之前浮动到右侧的元素。清除不影响它之后的元素。

您是否尝试过[在标题后](http://jsfiddle.net/Y8UHt/)[使用简单`<br />`](http://jsfiddle.net/Y8UHt/)的？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T04:28:04.540

`.Duration { clear: left; }`应该管用

# python - 如何从 Django 中的 ModelForm 手动创建选择字段？

> ID：10099710
> 
> 赞同：2
> 
> 时间：2012-04-11T04:15:25.527
> 
> 标签：python, django, django-forms, django-templates, django-models

我有一个`ModelForm`where 字段（名为`creator`）是 a `ForeignKey`，所以对于`{{ form.creator }}`Django 呈现这样的`<select>`标签：

```
<select id="id_approver" name="approver">
    <option selected="selected" value="">---------</option>
    <option value="1">hobbes3</option>
    <option value="2">tareqmd</option>
    <option value="3">bob</option>
    <option value="4">sam</option>
    <option value="5">jane</option>
</select> 
```

但是我想添加一个`onchange`事件属性，以便以后可以使用 AJAX 来做其他事情。我还想更改`---------`为其他内容并显示批准者的全名，而不是他们的用户名。

那么是否有可能获得可能的批准者列表并生成我自己的选择选项？有一些像

```
<select id="id_approver" name="approver" onchange="some_ajax_function()">
    <option select="selected" value="0">Choose a user</option>
{% for approver in form.approver.all %} <!-- This won't work -->
    <option value="{{ approver.pk }}">{{ approver.get_full_name }}</option>
{% endfor %}
</select> 
```

而且我还认为大多数审批者列表都太大了（比如超过 50 个），那么我最终会想要审批者的某种可搜索的自动完成字段。那么我肯定需要编写自己的 HTML。

如果有人需要它，我的`ModelForm`样子是这样的：

```
class OrderCreateForm( ModelForm ) :
    class Meta :
        model = Order
        fields = (
            'creator',
            'approver',
            'work_type',
            'comment',
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:10:35.460

[ModelChoiceField 文档](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)解释了如何执行此操作。

要更改空标签：

```
empty_label

    By default the <select> widget used by ModelChoiceField
    will have an empty choice at the top of the list. You can change the text
    of this label (which is "---------" by default) with the empty_label
    attribute, or you can disable the empty label entirely by setting
    empty_label to None:

    # A custom empty label
    field1 = forms.ModelChoiceField(queryset=..., empty_label="(Nothing)")

    # No empty label
    field2 = forms.ModelChoiceField(queryset=..., empty_label=None) 
```

至于您的第二个查询，它也在文档中进行了解释：

```
The __unicode__ method of the model will be called to generate string
representations of the objects for use in the field's choices;
to provide customized representations, subclass ModelChoiceField and override
label_from_instance. This method will receive a model object, and should return
a string suitable for representing it. For example:

class MyModelChoiceField(ModelChoiceField):
    def label_from_instance(self, obj):
        return "My Object #%i" % obj.id 
```

最后，要传递一些自定义 ajax，请使用[`attrs`](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Widget.attrs)select 小部件的参数（在 ModelForm 字段中使用）。

最后，你应该有这样的东西：

```
creator = MyCustomField(queryset=...,
                        empty_label="Please select",
                        widget=forms.Select(attrs={'onchange':'some_ajax_function()'}) 
```

# html - mailto 链接在 Chrome 浏览器中不起作用（版本：18.0.1025.152 m）

> ID：10099711
> 
> 赞同：3
> 
> 时间：2012-04-11T04:15:27.153
> 
> 标签：html, google-chrome

mailto 链接在 Google Chrome 浏览器中不起作用（版本：18.0.1025.152 m）

```
<a href="mailto:someone@example.com?cc=someoneelse@example.com&bcc=andsomeoneelse@example.com&subject=Summer%20Party&body=You%20are%20invited%20to%20a%20big%20summer%20party!">Send mail!</a> 
```

我在ff和chrome中使用了上面的代码。它在 ff 中运行良好，但在 chrome 中运行良好，您也可以测试[此链接](http://www.w3schools.com/Html/tryit.asp?filename=tryhtml_mailto2)。我认为这是 chrome 设置的问题。有谁知道如何更改设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T17:44:12.880

您可以通过输入来检查哪个程序被映射到处理 mailto: 链接`chrome://settings/handlers`。很可能是如果 mailto: 处理程序配置错误，Chrome 会在 mailto: 链接上静默失败。

有关处理程序的更多信息，包括允许网站处理特殊链接，请访问[http://support.google.com/chrome/bin/answer.py?hl=en&answer=1382847](http://support.google.com/chrome/bin/answer.py?hl=en&answer=1382847)

值得一提的是，W3Schools 示例中的 mailto: 链接可以在 Windows 7 Professional（64 位）下与 Chrome 19.0.1084.41（官方版本 134854）beta-m 和 Outlook 2010 一起正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-15T05:24:01.113

这是因为 chrome 以不同的方式处理 mailto。您可以访问`chrome://settings/handlers`并确保哪个是默认处理程序。在你的情况下，它不会。现在去 gmail.com。当您单击书签按钮旁边的按钮时，您应该会看到类似的内容。

![在chrome中设置mailto](../Images/3078b284d6f599721868525793a0329a.png)

如果您希望通过 gmail 打开所有电子邮件链接，请设置使用 gmail。现在，当您单击 mailto 按钮时，chrome 将自动在 gmail 中打开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T11:54:39.020

发生这种情况是因为您的**电子邮件默认程序**无法正常工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-26T18:06:13.060

这修复了我的.. 设置您的默认电子邮件阅读器。

[http://see.kirkstrobeck.com/VD7s](http://see.kirkstrobeck.com/VD7s)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-04T18:34:24.063

这不是因为 Chrome 设置... Chrome 对 Html 和 CSS 更具体，所以如果您尝试将图像用作邮件命令。一旦你在页面上你试图使这项工作右键单击并选择“检查元素”并检查是否有另一个元素正在通过你的链接......然后在 Css 中修复它并且你的 mailto 链接将工作......

希望这可以帮助

网站设计

# ios - iOS UIDocumentInteractionController 截图

> ID：10099719
> 
> 赞同：1
> 
> 时间：2012-04-11T04:16:33.880
> 
> 标签：ios

我曾经`- (BOOL)presentPreviewAnimated:(BOOL)animated;` 加载文档，然后我想从文档中截取屏幕截图。所以我尝试

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
currentImage=UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但它只占用主视图，所以我正在寻找可以告诉我如何获取文档视图层的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:23:20.653

这将不起作用，因为弹出框（其中包含 UIDocumentInteractionController）未添加到您的视图控制器的视图中。

它们被添加到应用程序窗口顶部的自己的视图中。

```
// This is kind of hacky, do not use for production :)
// Make sure this code is executed while the popover is being shown.
UIView *uiDimmingView = [[[[UIApplication sharedApplication] keyWindow] subviews] lastObject];
UIView *uiPopoverView = [[uiDimmingView subviews] lastObject]; 
```

如果您使用`uiDimmingView`，您将获得包含弹出框的整个视图。`uiPopoverView`是弹出框本身。

这些结果不是最优的，但对于非生产的东西来说可能就足够了（我假设你想要这个来展示给其他人，等等）。

# android - 将位图设置为联系人图像

> ID：10099720
> 
> 赞同：2
> 
> 时间：2012-04-11T04:16:52.170
> 
> 标签：android, android-contacts

我很难理解如何从联系人那里获取信息以及如何将信息提供给联系人。有人知道学习的好方法吗？

无论如何，我的主要问题。我从互联网上找到的一些随机代码中获得了联系人图像，但现在我想为我的联系人设置一个新的位图图像。我需要联系人的哪些信息（URI 或 Contact_id），如果有人能给我一个非常基本和简单的代码和某种步骤，那就太棒了。但是，如果您没有时间逐步完成它，那么只需简单的基本代码就可以了。谢谢你的帮助。

立即编辑工作代码：这是我使用的代码：

```
// Update picture to contact
        ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

        //contactUriId is my contact URI with just contact id number at the end of the "content://..."
        try
        {
            Bitmap bitmap = bmpNewContact;
            ByteArrayOutputStream image = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG , 100, image);

            Builder contentOp = ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI);
            contentOp.withSelection(ContactsContract.Data.CONTACT_ID + "=?" + " AND " + ContactsContract.Data.MIMETYPE + "=?", new String[]{String.valueOf(contactUriId), ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE});
            contentOp.withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, image.toByteArray());
            ops.add(contentOp.build());
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

        // Update
        try
        {
            getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-18T12:44:03.870

```
// Update picture to contact
    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

    //contactUriId is my contact URI with just contact id number at the end of the "content://..."
    try
    {
        Bitmap bitmap = bmpNewContact;
        ByteArrayOutputStream image = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG , 100, image);

        Builder contentOp = ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI);
        contentOp.withSelection(ContactsContract.Data.CONTACT_ID + "=?" + " AND " + ContactsContract.Data.MIMETYPE + "=?", new String[]{String.valueOf(contactUriId), ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE});
        contentOp.withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, image.toByteArray());
        ops.add(contentOp.build());
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    // Update
    try
    {
        getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    } 
```

# google-app-engine - 如何防止开发数据存储在重新启动时自行清除

> ID：10099724
> 
> 赞同：3
> 
> 时间：2012-04-11T04:17:22.567
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我需要更改 APP Engine 的本地数据存储路径。我已遵循此处指定的方法[如何在重新启动之间保留 GoogleAppEngineLauncher 的本地数据存储？](https://stackoverflow.com/questions/1547087/how-can-i-persist-the-local-datastore-for-googleappenginelauncher-between-reboot). 我尝试更改数据存储路径，但没有成功。我在 Windows 7 上使用 App Engine SDK 1.6.4、Python 2.7 和 NDB 作为数据存储。此外，我无法在我的计算机上找到默认数据存储位置，如 dev_appserver.py -help 输出中所述（这是一个临时位置，但我搜索时应用程序正在运行并且数据存储正在服务）。

我的目标是在每次启动时停止本地数据存储清理（我正在使用启动器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:35:14.790

数据存储应该在重新启动之间保持不变。

当您关闭服务器时，您应该在控制台中看到一条消息“正在应用所有待处理的事务并保存数据存储”。如果没有，您可能会看到以下问题（两个问题，同一个问题，第一个问题有解决方法）

[GAE SDK 1.6.4 dev_appserver 数据存储刷新](https://stackoverflow.com/questions/10060172/gae-sdk-1-6-4-dev-appserver-datastore-flush)

[App Engine 本地数据存储区内容不持久](https://stackoverflow.com/questions/10047315/app-engine-local-datastore-content-does-not-persist)

# selenium - Selenium IDE，[错误] 元素名称....未找到

> ID：10099727
> 
> 赞同：9
> 
> 时间：2012-04-11T04:17:43.797
> 
> 标签：selenium

尝试 Selenium IDE。我遇到了一个间歇性错误，我尝试降低 IDE 的速度，但它仍然会发生。我开始使用谷歌搜索fishbase，然后单击搜索fishbase 链接-然后单击“通用名称”，然后将Taron 放入并喜欢最上面的“美国”链接。通常它在同一个地方出现错误“[error] Element name=CommonName not found”，十有八九它在那里有问题。我希望我已经提供了足够的信息。使用 Ubuntu 11.10 和 FF 11.0。我的连接速度非常快，但将滑块移动到慢速。为什么会出现这个问题？

```
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=gbqfq</td>
    <td>fishbase</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>css=em</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>name=CommonName</td>
    <td>Tarpon</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>css=input[type=&quot;button&quot;]</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>link=Tarpon</td>
    <td></td>
</tr> 
```

它第一次有效，但第二次无效……谢谢。

```
[info] Executing: |open | / | |
[info] Executing: |type | id=gbqfq | fishbase |
[info] Executing: |clickAndWait | css=em | |
[info] Executing: |type | name=CommonName | Tarpon |
[info] Executing: |clickAndWait | css=input[type="button"] | |
[info] Executing: |clickAndWait | link=Tarpon | |
[info] Executing: |open | / | |
[info] Executing: |type | id=gbqfq | fishbase |
[info] Executing: |clickAndWait | css=em | |
[info] Executing: |type | name=CommonName | Tarpon |
[error] Element name=CommonName not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:22:37.743

这将解决您的问题

```
 <tr>
        <td>click</td>
        <td>css=em</td>
        <td></td>
    </tr>
    <tr>
        <td>pause</td>
        <td>7000</td>
        <td></td>
    </tr>
    <tr>
        <td>type</td>
        <td>name=CommonName</td>
        <td>Tarpon</td>
    </tr> 
```

或者只是在命令之前暂停`type| name=CommonName |Tarpon`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:29:43.250

您可以添加`waitForElementPresent`命令。适用于最快的 IDE 参数：

```
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=gbqfq</td>
    <td>fishbase</td>
</tr>
<tr>
    <td>waitForElementPresent</td>
    <td>css=em</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>css=em</td>
    <td></td>
</tr>
<tr>
    <td>waitForElementPresent</td>
    <td>name=CommonName</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>name=CommonName</td>
    <td>Tarpon</td>
</tr>
<tr>
    <td>waitForElementPresent</td>
    <td>css=input[type=&quot;button&quot;]</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>css=input[type=&quot;button&quot;]</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>link=Tarpon</td>
    <td></td>
</tr> 
```

# unit-testing - 我的单元测试应该有多干？

> ID：10099729
> 
> 赞同：6
> 
> 时间：2012-04-11T04:17:49.780
> 
> 标签：unit-testing, dry

我正在为我的 webapp 编写单元测试。我的许多测试用例共享相同的样板。例如，从购物车中删除商品和更新购物车中商品数量的测试都从导航到产品页面、搜索产品并将其添加到购物车开始。

这种重复的代码是否应该以某种方式从单元测试中剔除？我应该写一个函数`add_item_to_cart`吗？但是，我有另一个测试`test_add_to_cart`，它基本上只包含添加到购物车的重复样板。

由于每个测试都需要独立，单元测试本质上不是 DRY 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:41:37.997

[单元测试应该只测试一件事](https://stackoverflow.com/questions/235025/why-should-unit-tests-test-only-one-thing)。以“导航到产品页面、搜索产品并将其添加到购物车”开始的测试——这是三个不同的东西——听起来根本不像是单元测试，而是集成测试。我怀疑你实际上有两个不同的测试要在这里构建。

你的集成测试，在[Cucumber](http://cukes.info/)或类似的东西中，应该包括一系列步骤：

```
When I navigate to the products page
 And I search for a product
 And I add it to the cart 
```

您可以定义每个步骤一次并多次使用它，使其变得既美观又干燥。

另一方面，您的单元测试应该删除所有必要的设置，只测试您感兴趣的一件事：

```
before
  stub(cart)
  stub(product)
  click on "X" for item in cart
it should...
  expect(cart not to contain item)
  expect(product count to be updated) 
```

如果这变得非常复杂并且涉及大量存根，则表明您的代码不是模块化的；解决方案是 TDD 并首先编写测试，而不是之后添加它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T04:39:02.000

至少将通用代码重构为一个函数，并在启动时简单地调用该函数。您想测试特定于您的测试的代码，而不是重复的设置代码（应该在其他地方测试）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T04:32:40.797

您应该将相同的原则应用于任何其他代码的测试。

考虑示例，然后您更改会破坏测试的内容。您希望在一个地方或每个测试中更新测试代码吗？

我认为答案是显而易见的。

# gwt - 使用 Tree.Resources 将打开/关闭/叶子图像添加到 gwt 树

> ID：10099731
> 
> 赞同：1
> 
> 时间：2012-04-11T04:18:23.997
> 
> 标签：gwt, tree

我一直在尝试使用 Tree.Resources 来获取 Gwt 树打开状态的图像。以下是我使用的资源类。

```
public class TreeImageResource implements Tree.Resources
{

    @Override
    public ImageResource treeClosed()
    {
        return ImageResource.IMAGE_RESOURCE.treeClosed();
    }

    @Override
    public ImageResource treeLeaf()
    {
        return ImageResource.IMAGE_RESOURCE.treeLeaf();
    }

    @Override
    public ImageResource treeOpen()
    {
        return ImageResource.IMAGE_RESOURCE.treeOpen();
    }

} 
```

我已经尝试将它传递给带有树的ui的模型和演示者类中的树的构造函数，但它不显示图像。我错过了什么？

我创建了资源客户端包，如下所示

```
public interface ImageResource extends ClientBundle, ClientBundleWithLookup
{
    ImageResource IMAGE_RESOURCE = GWT.create( ImageResource.class );

        @Source("imageresource/treeClosed.gif")
    ImageResource treeClosed();

    @Source("imageresource/treeLeaf.gif")
    ImageResource treeLeaf();

    @Source("imageresource/treeOpen.gif")
    ImageResource treeOpen();
} 
```

树的创建如下

```
public class MainPanel extends Composite implements Display
{

  private static MainPanelUiBinder uiBinder = GWT.create(MainPanelUiBinder.class );

  @UiField
  SimplePanel desktopPanel;
  @UiField
  ListBox recentToolsBox;
  @UiField
  Tree recentToolsTree;

  interface MainPanelUiBinder extends UiBinder<Widget, ToolsMainPanel>
  {
  }

  public MainPanel()
  {
    Tree.Resources resources = new TreeImageResource();
    recentToolsTree = new Tree(resources);
    initWidget( uiBinder.createAndBindUi( this) );
    recentToolsTree.setAnimationEnabled( true );
  }
} 
```

# matlab - 使用 Octave/Matlab 将向量的值添加到另一个向量

> ID：10099732
> 
> 赞同：1
> 
> 时间：2012-04-11T04:19:00.160
> 
> 标签：matlab, octave

我有一个值向量，需要在另一个向量指定的索引处添加到第二个向量。如何使用 Octave/Matlab 完成此任务？

编辑：v1 = [1 2 3 4]

v2 = [0 0]

指数 = [1 2 1 2]

输出 = [4 6]

v1 的第一个和第三个元素添加到 v2 的索引 1，v1 的第二个和第四个元素添加到 v2 的第二个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:50:59.757

我*认为*这就是您的意思（如果您在问题中提供一个小示例，则更容易理解）。

你有一个值向量

```
toAdd = 1:5; 
```

你有第二个更大的向量：

```
bigVector = 1:10; 
```

您想要做的，在其中将*特定*索引处`bigVector + toAdd`的元素添加到 中，由以下方式指定：`toAdd`*`bigVector`*

 *```
indices = [1 3 5 7 9]; 
```

也就是说，您想要输出向量：

```
[ bigVector(1)+toAdd(1);
  bigVector(2);
  bigVector(3)+toAdd(2);
  bigVector(4);
  bigVector(5)+toAdd(3);
  ....
 ] 
```

在这种情况下，您可以执行以下操作：

```
outputVector = bigVector;
outputVector(indices) = bigVector(indices) + toAdd; 
```

特别要注意`outputVector(indices)`and ，它选择由向量和指定`bigVector(indices)`的元素。`outputVector``bigVector``indices`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:31:12.220

这应该这样做：

```
for k=unique(indices),
    v2(k) = v2(k) + sum(v1(indices==k));
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:37:47.593

它的......

```
v2 = accumarray(indices, v1) 
```*

# android - 在 Android 上处理多个广告来源（adMob + Leadbolt）

> ID：10099735
> 
> 赞同：4
> 
> 时间：2012-04-11T04:19:25.950
> 
> 标签：android, admob, ads, leadbolt

我是 Android 新手，过去几周我一直在玩它。我一直在关注一些教程，其中大多数都用 adMob 解释了广告主题，这是一个显而易见的解决方案，因为它是由制造操作系统的同一家企业制造的。但是，我一直在寻找其他一些解决方案，一个朋友向我推荐了 Leadbolt，我已经下载了 sdk 来使用它，但是我想到了另一个想法，我来自 .NET，在 ASP.NET 上有 adrotator控制，我可以用来显示来自多个来源的广告在 android 上没有类似的东西吗？如果没有，还有另一种解决方案可以在应用程序的同一空间使用两个广告吗？我有它作为横幅。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:18:25.290

听起来您正在寻找一种中介解决方案，您可以在其中配置（服务器端）如何将请求分发到来自多个广告网络的不同广告。如果一个网络未满足请求，则中介解决方案将尝试您配置的其他网络之一。

AdMob SDK 现在从 v6.0 开始包含中介。[您可以在此处](http://support.google.com/admob/answer/2413211?hl=en)详细了解 AdMob 中介以及如何在[此处](https://developers.google.com/mobile-ads-sdk/docs/admob/mediation#android)进行集成。

# actionscript - 如何使用actionscript3将纯色填充到透明PNG文件的形状中？

> ID：10099736
> 
> 赞同：2
> 
> 时间：2012-04-11T04:19:38.920
> 
> 标签：actionscript, png, transparent, mask

例如，我有一个透明的 png 文件，形状是一辆汽车。在 png 文件中，我只绘制了白色边框形状。外边框和内边框都是透明的。

我想用actionscript3代码来显示不同颜色的汽车对象，这意味着只在边框内填充颜色，而对于边框外侧，保持透明。怎么做？

到目前为止，最简单的解决方法是使用 PhotoShop 准备许多图像，但这对我来说还不够好。当我有许多形状并使用许多颜色时，我必须准备许多图像。

添加更多细节：（因为我使用的是白色边框，如果你的浏览器背景是白色的，你可能看不到基本的png文件） ![这是我的基本 png 文件](../Images/783a6efe42713cc9798530abeb83cdce.png)

![这是我预期的汽车 1](../Images/b8a9dbc77841390b2f8efd11327b85b9.png)

![这是我预期的汽车 2](../Images/d754bd1db036d1c18af376c29f89bcf5.png)

将我的形状边框更改为黑色，希望这有助于理解我的问题。

![在此处输入图像描述](../Images/e3cc53b9790d7313bb9a766ebaad5cce.png)

![在此处输入图像描述](../Images/0aeeb63216c877ac51f2849f513582fd.png)

![在此处输入图像描述](../Images/791dced6a964c27891d680cf18e72a15.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:46:51.477

由于您正在处理加载的图像/像素，因此您可以使用 BitmapData 的[floodFill()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#floodFill%28%29)，这几乎可以满足您的需求。下面的方法描述中也有一个示例。

它几乎可以满足您的需求，尽管在某些情况下它可能并不完美。值得一看[Jan 的优化 floodFill() 方法的](http://web.archive.org/web/20120704205549/http://www.multimediacollege.be/2010/04/optimizing-the-floodfill-method/)文章更深入。

![高级 floodFill() 示例](../Images/c6b9422cd7e4dfac65f5294ae89a684e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:15:04.763

一个简单的解决方案是使用多层。顶层将只包含边框。下层将只包含没有边框的汽车。您可以使用[ColorTransform](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/ColorTransform.html)或[ColorMatrixFilter](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filters/ColorMatrixFilter.html)调整汽车层的颜色。

# azure - 我应该将所有后端处理分配给工作人员角色吗？

> ID：10099740
> 
> 赞同：2
> 
> 时间：2012-04-11T04:20:04.043
> 
> 标签：azure, azure-blob-storage, azure-worker-roles

对于 Azure 和整个工作角色的概念来说相当新，以前如果我想完成一些后端工作，我只会创建一个 Windows 窗体应用程序并将其作为计划任务。

在我的新站点中，我创建了一个 Windows 窗体应用程序，我每小时运行一次，它读取 XML 提要并执行所有处理并将信息插入到 sql azure 中。

还有一些图像链接我想存储在 azure blob 存储中并可能调整它们的大小，我在我的 vb.net 应用程序中遇到了麻烦。

我的问题是我应该将所有处理从我的 Windows 窗体应用程序转移到工作角色，还是应该设置一个工作角色来仅将图像处理到 blob 存储？

辅助角色使用多少计算时间？我已经看到有睡眠定时器的例子，但是否可以每小时运行一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:29:04.480

您可以轻松地设置一个计时器以每小时触发一次。你在哪里运行你的代码，这取决于你的应用程序架构。如果您有 Web 角色，则可以将其放置在您的 Web 角色中，而不是专门的工作角色中，除非您确实需要单独实例的额外处理能力并且愿意为此付费。此外，每个角色（网络/工作人员）的实例数量会给解决方案增加复杂性。

您的架构的详细轮廓将为您寻求的答案提供更好的参考框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:19:15.077

Worker 角色是为执行各种后台活动而设计的。因此您可以将所有处理逻辑从 Windows 应用程序移动到 workerrole。它只是一个带有入口点类的类库。

您不能以工作角色自动安排任何工作。你必须为你自己纠正一个逻辑。worker 角色正在无限循环中执行一段代码。您将被收取没有的费用。您在工作角色（计算）中使用的小时数，无论您的工作角色是空闲还是处理某些东西都没有关系。另外，如果您使用 blob 和队列，您还将为访问它们和在其中存储数据付费。

# mysql - zend 数据库查询限制未按预期工作

> ID：10099741
> 
> 赞同：1
> 
> 时间：2012-04-11T04:20:05.733
> 
> 标签：mysql, zend-framework

我有一个查询要从 db 阅读杂志

```
$select = $db->select()
            ->from('tbl_magazine',array('magazine_id','magazine_name'))
            ->join('tbl_magazine_issue','tbl_magazine_issue.magazine_id = tbl_magazine.magazine_id',array(null))
            ->join('mst_publisher','mst_publisher.publisher_id = tbl_magazine.publisher_id',array(null))
            ->where('tbl_magazine.is_active =?',1)
            ->where('mst_publisher.is_active =?',1)
            ->where('tbl_magazine_issue.os_select =?',2)
            ->where('tbl_magazine_issue.publish_status = ?',1)
            ->where('curdate() <= DATE(tbl_magazine.validity_till)')
            ->group('tbl_magazine.magazine_id')
            ->limit($start,$per_page); 
```

但是当我打印查询时，我看到了类似这样的东西

```
SELECT `tbl_magazine`.`magazine_id`, `tbl_magazine`.`magazine_name` 
FROM `tbl_magazine` 
INNER JOIN `tbl_magazine_issue` ON tbl_magazine_issue.magazine_id = tbl_magazine.magazine_id 
INNER JOIN `mst_publisher` ON mst_publisher.publisher_id = tbl_magazine.publisher_id 
WHERE (tbl_magazine.is_active =1) AND (mst_publisher.is_active =1) 
  AND (tbl_magazine_issue.os_select =2) AND (tbl_magazine_issue.publish_status = 1) 
  AND (curdate() <= DATE(tbl_magazine.validity_till)) 
GROUP BY `tbl_magazine`.`magazine_id` 
LIMIT 2147483647 OFFSET 8 
```

但我已将 $start 设置为 0 并将 $perpage 设置为 8

我正在寻找一个限制为的查询`"limit 0 ,8"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T05:05:52.060

你没有`limit`正确使用。

这是来自 的函数定义`Zend_Db_Select`。如您所见，第一个参数 is`count`和 not `offset`。

```
/**
 * Sets a limit count and offset to the query.
 *
 * @param int $count OPTIONAL The number of rows to return.
 * @param int $offset OPTIONAL Start returning after this many rows.
 * @return Zend_Db_Select This Zend_Db_Select object.
 */
public function limit($count = null, $offset = null)
{
    $this->_parts[self::LIMIT_COUNT]  = (int) $count;
    $this->_parts[self::LIMIT_OFFSET] = (int) $offset;
    return $this;
} 
```

* * *

只是为了解释为什么你会得到那些疯狂的值......下面是呈现 SQL 查询的脚本的一部分。因为您有偏移量，所以将计数设置为 PHP_INT_MAX。

```
 if (!empty($this->_parts[self::LIMIT_OFFSET])) {
        $offset = (int) $this->_parts[self::LIMIT_OFFSET];
        $count = PHP_INT_MAX;
    } 
```

# android - 错误：'gint' 尚未声明

> ID：10099744
> 
> 赞同：1
> 
> 时间：2012-04-11T04:20:17.447
> 
> 标签：android, gstreamer

我正在尝试在 android 中构建一个 Gstreamer 插件（一个表面纹理接收器）。我和其他几个错误一起出现：

```
“错误：'gint' 尚未声明”。
```

我做了 source build/envsetup.sh 然后进入 sink 目录并做了“mm”。然后我得到了上述错误。

我相信我应该包括“gst.h”和“glib.h”。但是当我添加这些包含行时，我收到一条错误消息，指出无法找到这些文件。所以，我认为这些头文件的路径需要正确设置。但我不知道如何或在哪里设置这条路径。

应该以某种方式修改 Android.mk 吗？

请帮助谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:03:02.360

在我见过的所有系统上，gint 都在 glib.h 中声明。你有安装 glib 吗？

# java - java中多线程的使用

> ID：10099746
> 
> 赞同：0
> 
> 时间：2012-04-11T04:20:41.407
> 
> 标签：java, multithreading

我有一个代码，它为特定的学生 ID 执行加载过程，为特定的学生 ID 执行插入操作。我有大约 500 个学生证，它们必须经过完全相同的程序。我想在这里使用多线程，因为我不想将学生 id 的数据逐个加载。我如何在这种情况下使用多线程，或者在这种情况下多线程有帮助。在这里，我如何在多线程中使用这个巨大的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T04:22:53.927

不要在这里使用多线程。这将需要一个简单的任务并使其变得更加复杂。对于 500 条记录，一次只做一条。如果确实必须，请使用 JDBC 批处理来减少数据库命中次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:15:59.483

如果你真的觉得你需要并行访问数据库的性能，那么你将需要：

*   使用 a`ThreadPool`并限制它将容纳的线程数。
*   每个线程必须保持`ThreadLocal`与数据库的连接。
*   每个线程必须持有一个`ThreadLocal`语句来执行插入。

这并不简单，但肯定可以做到。请确保您确实需要这样做。值得首先研究批处理，看看是否有帮助。

如果您有兴趣，我稍后会尝试在此处发布一些示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:08:04.413

听起来很适合“生产者/消费者”模式。关于它的维基百科文章有一个合理的 Java 示例开始：

[http://en.wikipedia.org/wiki/Producer-consumer_problem](http://en.wikipedia.org/wiki/Producer-consumer_problem)

并确保每个线程都有自己的数据库连接（它们通常不是线程安全的）。

# javascript - 在字符串中的每个单词之后附加一个数字序列

> ID：10099747
> 
> 赞同：2
> 
> 时间：2012-04-11T04:20:47.033
> 
> 标签：javascript

我有一个函数需要在字符串中每个单词的末尾附加一个数字序列（从 1 开始）。这是我的功能：

```
function insertNum(str) {
    var word = new Array();
    word = str.split(" ");
    return src[0] + "1 " + src[1] + "2 " + src[2] + "3 " + src[3];
}

insertNum("word word word word."); // return "word1 word2 word3 word4."
insertNum("word word word."); // return "word1 word2 word3." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:23:30.440

这个应该做...

```
function insertNum(str) {
    var index = 1;
    return str.replace(/\w\b/g, function(match) {
        return match + index++;
    });
} 
```

[js小提琴](http://jsfiddle.net/H3tkt/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:25:13.843

一个简单的方法：

```
function insertNum(str) {
    var word = new Array();
    word = str.split(" ");
    var tmp = "";
    for (i = 1; i <= word.length; i ++) {
       tmp += word[i-1] + i + " ";
    }
    return tmp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T06:09:55.987

```
 int count = 1;
    String s = "This is nice";

    String a[] = s.split(" ");

    for(String m : a){
        System.out.print(m + count++ + " ");
    } 
```

# android - 片段中的应用内计费

> ID：10099749
> 
> 赞同：3
> 
> 时间：2012-04-11T04:21:05.263
> 
> 标签：android, android-fragments, in-app

我正在制作一个包含选项卡中的片段的应用程序。每当我尝试调用应用内计费请求购买时，它都会给我粘贴下面的错误。

这是我在应用程序中调用片段的设计。

`CalendarUIActivity (FragmentActivity) -> CalendarUIMain (Fragment) -> When the user ask for more then InAppSubsricbe (DialogFragment) -> On click of OK of above dialog another dialog fragment got open with list of In-App Products which InAppProductsList(DialogFragment)`

现在，当我单击 Dialog Fragment 中的产品列表时，`Edit it redirects it method to main CalendarUIMain Fragment at that time`它给了我错误（如下粘贴），市场购买屏幕已成功打开。但是在单击购买屏幕的 OK 时，它会随着应用程序被强制关闭而消失。

```
04-11 09:10:52.450: E/AndroidRuntime(1966): FATAL EXCEPTION: main
04-11 09:10:52.450: E/AndroidRuntime(1966): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.uks.android.epn.activity/com.uks.android.epn.activity.MainActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.uks.android.epn.activity/com.uks.android.epn.activity.CalendarUIActivity}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.uks.android.epn.fragments.CalendarUIMain$InAppProductsDialog: make sure class name exists, is public, and has an empty constructor that is public
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1818)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3200)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread.access$600(ActivityThread.java:125)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1031)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.os.Looper.loop(Looper.java:132)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread.main(ActivityThread.java:4135)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at java.lang.reflect.Method.invoke(Method.java:491)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at dalvik.system.NativeStart.main(Native Method)
04-11 09:10:52.450: E/AndroidRuntime(1966): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.uks.android.epn.activity/com.uks.android.epn.activity.CalendarUIActivity}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.uks.android.epn.fragments.CalendarUIMain$InAppProductsDialog: make sure class name exists, is public, and has an empty constructor that is public
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1818)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1659)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:676)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.widget.TabHost.setCurrentTab(TabHost.java:345)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.widget.TabHost.addTab(TabHost.java:235)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at com.uks.android.epn.activity.MainActivity.addTab(MainActivity.java:78)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at com.uks.android.epn.activity.MainActivity.initTabs(MainActivity.java:45)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at com.uks.android.epn.activity.MainActivity.onCreate(MainActivity.java:35)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.Activity.performCreate(Activity.java:4397)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782)
04-11 09:10:52.450: E/AndroidRuntime(1966):     ... 12 more
04-11 09:10:52.450: E/AndroidRuntime(1966): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.uks.android.epn.fragments.CalendarUIMain$InAppProductsDialog: make sure class name exists, is public, and has an empty constructor that is public
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.support.v4.app.Fragment.instantiate(Fragment.java:395)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.support.v4.app.FragmentState.instantiate(Fragment.java:96)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1726)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:198)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at com.uks.android.epn.activity.ActivitysTab.onCreate(ActivitysTab.java:25)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at com.uks.android.epn.activity.CalendarUIActivity.onCreate(CalendarUIActivity.java:23)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.Activity.performCreate(Activity.java:4397)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782)
04-11 09:10:52.450: E/AndroidRuntime(1966):     ... 24 more
04-11 09:10:52.450: E/AndroidRuntime(1966): Caused by: java.lang.InstantiationException: com.uks.android.epn.fragments.CalendarUIMain$InAppProductsDialog
04-11 09:10:52.450: E/AndroidRuntime(1966):     at java.lang.Class.newInstanceImpl(Native Method)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at java.lang.Class.newInstance(Class.java:1301)
04-11 09:10:52.450: E/AndroidRuntime(1966):     at android.support.v4.app.Fragment.instantiate(Fragment.java:384)
04-11 09:10:52.450: E/AndroidRuntime(1966):     ... 32 more 
```

现在请参考这个链接的代码（因为代码有点大）。[关联](http://pastebin.com/2JstbYcU)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:38:53.003

显示来自 的相关代码`CalendarUIMain$InAppProductsDialog`。是`InAppProductsDialog`静态内部类吗？它有可访问的默认构造函数吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:14:18.640

很抱歉打扰 Stacked Guys 的回答，

这是一个简单的问题，我发现片段没有在屏幕方向被实例化，因为屏幕方向被锁定`portrait`。所以每当我在平板电脑上测试该代码时，Google Play 的屏幕都会进入横向模式，这反过来会导致异常.

感谢@Nikolay Elenkov 提供静态内部类的想法。

# c# - 如何在 C# ASP.Net 网站中通过浏览器游戏分配玩家名称？

> ID：10099753
> 
> 赞同：2
> 
> 时间：2012-04-11T04:21:32.040
> 
> 标签：c#, asp.net, forms, browser

# 您好，您如何通过浏览器分配名称。

想象一下，您尝试在浏览器文本框中注册一个名字，以便加入游戏，您的名字作为 cookie 保存在浏览器中。可能有多个玩家可以签名，但游戏只有两个玩家。如何设置进入我的网站的玩家姓名，在保存到 cookie 中的文本框中输入他的姓名，然后他按下加入按钮向众生发送请求，以向主机寻找其他玩家进行游戏.

我的问题是，由于玩家是两个玩家，实际上是井字游戏，在我将他们选择的名称设置为变量字符串之后，我如何将他们的名字分配给游戏中的物理玩家 1 和玩家 2，因为一个玩家去了第一名，一名球员第二名。

我认为谁开始发送请求以寻找另一个玩家成为第一个玩家（X），所以谁回答了这个请求，响应成为第二个玩家，O 玩家。那有可能吗？

我正在使用 ASP.NET 网站表单运行 Visual Studios '08。所以一般使用文本框、按钮、MapPathing Stream Reader for data 和 cookie。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:31:37.197

这有很多需要查看，但应该给你一个很好的起点：

ASPX：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="MultipleUsers.aspx.cs" Inherits="WebApplicationCS2.MultipleUsers" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager runat="server" ID="ScriptManager1"></asp:ScriptManager>
        <div style="float:left; border:1px solid gray; min-height:200px; width:40%;">
            <asp:Timer runat="server" ID="tmrUsersList" Interval="1000"></asp:Timer>
            <asp:UpdatePanel runat="server" ID="pnlAjaxUserList">
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="tmrUsersList" />
                </Triggers>
                <ContentTemplate>
                    <table style="width:100%;">
                        <asp:Repeater runat="server" ID="rptUsersList">
                            <ItemTemplate>
                                <tr>
                                    <td>
                                        <asp:Label runat="server" ID="lblUserName" Text='<%# Eval("UserName")%>' />
                                    </td>
                                    <td>
                                        <asp:LinkButton runat="server" ID="lnkChallenge" Enabled='<%# Eval("CanChallenge")%>' 
                                            Text="Challenge" CommandArgument='<%# Eval("UserName")%>'
                                            OnCommand="lnkChallenge_Command" />
                                    </td>
                                </tr>
                            </ItemTemplate>
                        </asp:Repeater>
                    </table>
                </ContentTemplate>
            </asp:UpdatePanel>
        </div>
        <div style="float:left;">
            Choose username:
            <asp:TextBox runat="server" ID="txtChosenName"></asp:TextBox>
            <asp:Button runat="server" ID="btnSignin" Text="Sign In" 
                OnClick="btnSignin_Click" />
            <br />
            <asp:Label runat="server" ID="lblMessage" ForeColor="Red" Visible="false" EnableViewState="false"></asp:Label>
        </div>
    </div>
    </form>
</body>
</html> 
```

代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplicationCS2
{
    public partial class MultipleUsers : System.Web.UI.Page
    {
        private const string UserNameKey = "SitePlayer_UserName";
        private string CurrentUserName;
        private List<GameUser> lGameUsers;

        protected void Page_Load(object sender, EventArgs e)
        {
            HttpCookie playerCookie = Request.Cookies[UserNameKey];
            CurrentUserName = (playerCookie != null ? playerCookie.Value : null);
            if (CurrentUserName != null)
            {
                // Update cache to indicate user is still online.
                Cache.Add(UserNameKey + CurrentUserName, CurrentUserName, null,
                          System.Web.Caching.Cache.NoAbsoluteExpiration,
                          TimeSpan.FromMinutes(1), System.Web.Caching.CacheItemPriority.Normal, null);
            }

            lGameUsers = GetUserList();
            rptUsersList.DataSource = lGameUsers;
            rptUsersList.DataBind();
        }

        protected void btnSignin_Click(object sender, EventArgs e)
        {
            string chosenName = txtChosenName.Text.Trim();
            foreach (GameUser u in lGameUsers)
            {
                if (string.Compare(chosenName, u.UserName, StringComparison.OrdinalIgnoreCase) == 0)
                {
                    lblMessage.Text = "Username already in use.";
                    lblMessage.Visible = true;
                    return;
                }
            }
            Cache.Add(UserNameKey + chosenName, chosenName, null,
                      System.Web.Caching.Cache.NoAbsoluteExpiration, 
                      TimeSpan.FromMinutes(1), System.Web.Caching.CacheItemPriority.Normal, null);
            Response.AppendCookie(new HttpCookie(UserNameKey, chosenName));
        }

        protected void lnkChallenge_Command(object sender, CommandEventArgs e)
        {

        }

        class GameUser
        {
            public string UserName { get; set; }
            public bool CanChallenge { get; set; }
        }
        private List<GameUser> GetUserList()
        {
            List<GameUser> userList = new List<GameUser>();
            foreach (System.Collections.DictionaryEntry cacheItem in Cache)
            {
                if (cacheItem.Key.ToString().StartsWith(UserNameKey))
                {
                    string name = cacheItem.Value.ToString();
                    if (string.Compare(CurrentUserName, name, StringComparison.OrdinalIgnoreCase) != 0)
                    {
                        GameUser u = new GameUser() 
                        {
                            UserName = name,
                            CanChallenge = (CurrentUserName != null)
                        };
                        userList.Add(u);
                    }
                }
            }
            return userList;
        }
    }
} 
```

要查看运行中的代码，请运行网站，浏览到表单，然后使用两种不同的浏览器登录。

您需要执行的步骤包括验证用户仅登录一次、连接“挑战”链接按钮等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:39:24.627

您可以在请求者向第一个玩家发送播放请求时设置 Session["FirstPlayer"] = "true"，在第二个玩家接受播放请求时设置 Session["FirstPlayer"] = "false"。我认为这将为您提供整个会话期间谁是第一名以及谁是第二名的信息。

如果需要，您可以在 Internet 上了解有关会话的更多信息。

如果您不进行回发，您还可以使用 Javascript 全局变量来存储玩家和他们的回合。

# ruby - 从 Ruby 访问 Google 文档列表 API

> ID：10099755
> 
> 赞同：4
> 
> 时间：2012-04-11T04:21:50.647
> 
> 标签：ruby, api, google-docs, google-docs-api

我试图弄清楚如何从 Ruby 访问 Google Documents List API。

我查看了[google-api-ruby-client](http://code.google.com/p/google-api-ruby-client/)但这似乎不支持该特定 API。我还查看了[gdata-ruby-util](http://code.google.com/p/gdata-ruby-util/)客户端，但它看起来已经过时并且不再活跃。

没有 ruby​​ 客户端来访问如此流行的 API 似乎很奇怪，所以任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:04:44.757

这是一个可让您读取/写入文件的库。它还具有读取/写入电子表格单元格的方法。

[https://github.com/gimite/google-drive-ruby](https://github.com/gimite/google-drive-ruby)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:20:05.633

[http://code.google.com/p/gdata-ruby-util/](http://code.google.com/p/gdata-ruby-util/)是正确的库。

我会说它比“不再活跃”更“稳定”。

# matlab - 如何在matlab中训练SVM进行字符识别？

> ID：10099756
> 
> 赞同：5
> 
> 时间：2012-04-11T04:21:58.740
> 
> 标签：matlab, ocr, svm

我是我的主要项目的最后一年学生。我的项目基本上是从自然场景中提取文本，识别它，然后将它们显示在记事本等中。

我已经从图像中提取了文本，并且还为每个提取的字符获得了 85 个特征。

但是，对于识别部分，我不知道如何在 matlab 中训练或使用 SVM（支持向量机），以便获得匹配。

请帮助我，因为这非常困难

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T06:26:06.700

如果您对使用现有的 SVM 实现感到满意，那么您应该使用生物信息学工具箱[svmtrain](http://www.mathworks.co.uk/help/toolbox/bioinfo/ref/svmtrain.html)，或者下载[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)的 Matlab 版本。如果您想自己实现 SVM，那么您应该了解 SVM[理论](http://en.wikipedia.org/wiki/Support_vector_machine)，并且可以使用[quadprog](http://www.mathworks.co.uk/help/toolbox/optim/ug/quadprog.html)来解决适当的优化问题。

使用您的数据，您将需要一个 N×85 特征矩阵，其中 N 是多个字符，以及一个您手动提供的 N×1 的“真实标签”数组。根据您用于训练 SVM 的工具，参数`svmtrain`会略有不同 - 请查看文档。

如果您想评估您的 SVM 以表明它有效，您可能需要组织您的数据，以便您可以估计分类器的泛化误差 - 请参阅[交叉验证](http://www.cs.cmu.edu/~schneide/tut5/node42.html)

# android - 如何为listview设置一个简单的适配器？

> ID：10099764
> 
> 赞同：6
> 
> 时间：2012-04-11T04:22:47.000
> 
> 标签：android, android-listview, simpleadapter

我在将 arraylist 添加到列表视图时遇到问题，将在此处解释我的问题.. 告诉我这里出了什么问题... 我有三个线性布局，在中间布局中我有列表视图，如下面的 xml 文件所示。 .`

```
 <LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.59"
        android:src="@drawable/x_title" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout_grouplist"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.09"
    android:orientation="vertical"
    android:weightSum="1" >

    <ListView
        android:id="@+id/listview_grouplist"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
    </ListView>

</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.39"
        android:text="TextView" />

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
  </LinearLayout>
</LinearLayout>` 
```

当我尝试使用数组适配器将项目添加到列表时，它对我来说工作正常..但它不适用于列表适配器。它正在崩溃。

```
ListAdapter adapter = new SimpleAdapter(this,
      mylist, 
      R.layout.grouplistlayout, 
      new String[] { "Group Name" }, 
      new int[] { R.id.listview_grouplist });

String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
      "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
      "Linux", "OS/2" };

ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, values);
lst_projlist.setAdapter(adapter1); 
```

有人可以告诉我这里缺少什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T04:50:33.160

你的问题在这里：

```
 R.layout.grouplistlayout,
    new int[] { R.id.listview_grouplist }); 
```

顶部应该指向列表布局，例如`android.R.layout.simple_list_item_1` 底部应该指向 TextView，而不是列表视图。

另外，我看不到您将适配器绑定到列表视图的位置。

来自[SimpleAdapter 文档](http://developer.android.com/reference/android/widget/SimpleAdapter.html)：

```
public SimpleAdapter(Context context, 
                     List<? extends Map<String, ?>> data, 
                     int resource, 
                     String[] from, 
                     int[] to) 
```

> *自：API 级别 1*
> 
> ## 构造函数
> 
> ***参数***
> **context** *与此 SimpleAdapter 关联的 View 正在运行*
> **数据的上下文** *A List of Maps。列表中的每个条目对应于列表中的一行。Maps 包含每一行的数据，并且应该包括**定义此列表项的视图的视图布局的“来自”*
> **资源资源标识符中指定的所有条目。** *布局文件应该至少包含那些在“to”中定义的命名视图，这些命名视图*
> **将** *被添加到与每个项目关联的 Map 中。*
> **to** *应该在“from”参数中显示列的视图。这些都应该是 TextViews。此列表中的前 N ​​个视图被赋予 from 参数中前 N 列的值。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:52:11.350

如果您使用 Activity 进行扩展，那么您必须使用 setAdapter，如果您使用 ListActivity 进行扩展，那么您应该使用 setListAdapter 而无需使用 xml 文件。

在这里，我认为您正在使用 Activity 进行扩展，然后无需使用 setListAdapter ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:31:57.023

只需替换您的 ListView 代码。

```
<ListView
android:id="@id/android:list"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >
</ListView> 
```

这将使您的应用程序完全运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T04:47:44.690

在下面，检查您传递的参数，

```
ListAdapter adapter = new SimpleAdapter(this,
  mylist, 
  R.layout.grouplistlayout, 
  new String[] { "Group Name" }, 
  new int[] { R.id.listview_grouplist }); 
```

1.  是`myList`地图？
2.  你发送的资源参数应该是提供ure item而不是ure list布局的资源。您正在传递 ure list 的资源（假设 grouplistlayout 是您在上面提供的布局）。改变它。
3.  同样，`to`应该包含映射到`from`参数的资源中提到的文本视图。

查看[官方 SimpleAdapter 文档](http://developer.android.com/reference/android/widget/SimpleAdapter.html#SimpleAdapter%28android.content.Context,%20java.util.List%3C?%20extends%20java.util.Map%3Cjava.lang.String,%20?%3E%3E,%20int,%20java.lang.String%5B%5D,%20int%5B%5D%29)以获取更多详细信息

# c++ - fprintf 没有写入管道

> ID：10099768
> 
> 赞同：3
> 
> 时间：2012-04-11T04:23:00.513
> 
> 标签：c++, c, gnuplot, printf

我使用_popen 成功打开了管道，即gnuplot 窗口。但无法使用 fprintf 写入流。我检查了文件指针值，它不为空。我搜索了许多来源并使用了 fflush ，但它不起作用。我找不到解决方案。

实际上，我在这里 [通过管道的 gnuplot c++ 接口之前问了一个类似的问题 - 无法打开 wgnuplot](https://stackoverflow.com/questions/10068235/gnuplot-c-interface-through-pipes-cannot-open-wgnuplot.But)重新发布并进行一些修改。

任何的意见都将会有帮助..

```
FILE* gp;
  string command = "set style data lines\n" ;
  char *path = "\"C:\\Program Files\\gnuplot\\bin\\wgnuplot\" -persist";

  gp = _popen(path , "wt");

  if (gp == NULL)
    return -1;

 fprintf(gp,command );
 fflush(gp);
 _pclose(gp); 
```

我在不使用管道的情况下使用了这段代码，它使用了 createprocess。这里也是同样的情况，gnuplot.exe 打开但没有输出图。

```
int _tmain (int argc, LPTSTR argv [])

{
    DWORD i;
    HANDLE hReadPipe, hWritePipe;

    SECURITY_ATTRIBUTES PipeSA = {sizeof (SECURITY_ATTRIBUTES), NULL, TRUE};
            /* Init for inheritable handles. */
    TCHAR outBuf[ ] = TEXT("a=2; plot sin(a*x)/x; pause mouse; plot exp(-a*x); pause mouse") ;  
    TCHAR inBuf[80];
    DWORD dwWritten, dwRead ;
    BOOL  bSuccess = FALSE;
    PROCESS_INFORMATION  ProcInfo2;
    STARTUPINFO StartInfoCh2;

    /* Startup info for the Gnuplot process. */

    GetStartupInfo (&StartInfoCh2);

    /* Create an anonymous pipe with default size.
        The handles are inheritable. */

    bSuccess = CreatePipe (&hReadPipe, &hWritePipe, &PipeSA, 0);
    if (bSuccess == TRUE) printf("pipe created\n");

    WriteFile(hWritePipe, outBuf, sizeof(outBuf), &dwWritten, NULL) ;   
    printf("Wrote %d bytes to Gnuplot\n", dwWritten) ;

    CloseHandle (hWritePipe);

    /* Repeat (symmetrically) for the child process. */

    StartInfoCh2.hStdInput  = hReadPipe;
    StartInfoCh2.hStdError  = GetStdHandle (STD_ERROR_HANDLE);
    StartInfoCh2.hStdOutput = GetStdHandle (STD_OUTPUT_HANDLE);
    StartInfoCh2.dwFlags = STARTF_USESTDHANDLES;
    bSuccess = FALSE ;
    bSuccess = CreateProcess ("C:\\Program Files\\gnuplot\\bin\\wgnuplot.exe", NULL, NULL, NULL,
            TRUE,0, NULL, NULL, &StartInfoCh2, &ProcInfo2);
    if (bSuccess == TRUE)
      printf("Created Gnuplot Process\n" ) ;

    WaitForSingleObject (ProcInfo2.hProcess, INFINITE);
    CloseHandle (ProcInfo2.hThread); 
    CloseHandle (hReadPipe);

    /* Wait for Gnuplot process to complete.*/

    CloseHandle (ProcInfo2.hProcess);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:35:53.540

我认为问题不在于您的代码，而是 -persist在 Windows**上没有做任何事情。**这意味着图表永远不会显示超过一瞬间。您可以生成如下所示的图像，而不是显示 gnuplot 窗口。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  FILE* gp;
  gp = _popen("gnuplot", "w");

  if (gp == NULL)
    return -1;

  fprintf(gp, "set terminal png\nset output 'tmp.png'\n");
  fprintf(gp, "set isosample 100\n");
  fprintf(gp, "min=-1\n");
  fprintf(gp, "max=1\n");
  fprintf(gp, "pi=3.141592\n");
  fprintf(gp, "set hidden3d\n");
  fprintf(gp, "set pm3d\n");
  fprintf(gp, "set contour\n");
  fprintf(gp, "splot [min:max] [min:max] x*x+2*y*y-0.3*cos(3*pi*x)-0.4*cos(4*pi*y)+0.7\n");
  fflush(gp);
  pclose(gp);

  return 0;
} 
```

或者你可以引入某种等待。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  FILE* gp;
  gp = _popen("gnuplot", "w");

  if (gp == NULL)
    return -1;

  fprintf(gp, "set isosample 100\n");
  fprintf(gp, "min=-1\n");
  fprintf(gp, "max=1\n");
  fprintf(gp, "pi=3.141592\n");
  fprintf(gp, "set hidden3d\n");
  fprintf(gp, "set pm3d\n");
  fprintf(gp, "set contour\n");
  fprintf(gp, "splot [min:max] [min:max] x*x+2*y*y-0.3*cos(3*pi*x)-0.4*cos(4*pi*y)+0.7\n");
  fflush(gp);
  for (;;) { }

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:41:01.123

您对 fprintf 的语法使用是错误的。它是

```
fprintf(FILE,"[string literals] [format place holder]",[arguments corresponding to each place holder]); 
```

占位符的语法是

```
%[format type] 
```

对于格式类型，

```
i or d = int
e = double shown in exponential form
f = double shown in floating point notation
g = double shown in best format
s = char * (a string literal)
c = char 
```

举个例子：

```
int i=5;
fprintf("i is equal to: %i\n",i); 
```

会输出：

```
i is equal to 5 
```

\n 是用于显示新行的转义序列。

# wpf - 无法使用 JpegBitmapDecoder 解码 jpeg

> ID：10099774
> 
> 赞同：2
> 
> 时间：2012-04-11T04:23:49.913
> 
> 标签：wpf, jpeg, decoder

我有以下两个函数将字节转换为图像并在 WPF 中的图像上显示

```
 private JpegBitmapDecoder ConvertBytestoImageStream(byte[] imageData)
        {
            Stream imageStreamSource = new MemoryStream(imageData);            

            JpegBitmapDecoder decoder = new JpegBitmapDecoder(imageStreamSource, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);
            BitmapSource bitmapSource = decoder.Frames[0];

            return decoder;
        } 
```

上面的代码根本不起作用。我总是遇到“未找到成像组件”图像未显示的异常。

```
private MemoryStream ConvertBytestoImageStream(int CameraId, byte[] ImageData, int imgWidth, int imgHeight, DateTime detectTime)
    {  
        GCHandle gch = GCHandle.Alloc(ImageData, GCHandleType.Pinned);
        int stride = 4 * ((24 * imgWidth + 31) / 32);
        Bitmap bmp = new Bitmap(imgWidth, imgHeight, stride, PixelFormat.Format24bppRgb, gch.AddrOfPinnedObject());
        MemoryStream ms = new MemoryStream();
        bmp.Save(ms, ImageFormat.Jpeg);
        gch.Free();

        return ms;
    } 
```

此功能有效，但速度很慢。我希望优化我的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T10:18:17.480

`ConvertBytestoImageStream`如果我将 JPEG 缓冲区传递给它，你的工作对我来说很好。然而，有一些事情可以改进。根据您是否真的要返回解码器或位图，该方法可以这样编写：

```
private BitmapDecoder ConvertBytesToDecoder(byte[] buffer)
{
    using (MemoryStream stream = new MemoryStream(buffer))
    {
        return BitmapDecoder.Create(stream,
            BitmapCreateOptions.PreservePixelFormat,
            BitmapCacheOption.OnLoad); // enables closing the stream immediately
    }
} 
```

或者这样：

```
private ImageSource ConvertBytesToImage(byte[] buffer)
{
    using (MemoryStream stream = new MemoryStream(buffer))
    {
        BitmapDecoder decoder = BitmapDecoder.Create(stream,
            BitmapCreateOptions.PreservePixelFormat,
            BitmapCacheOption.OnLoad); // enables closing the stream immediately
        return decoder.Frames[0];
    }
} 
```

请注意，此代码不使用 JpegBitmapDecoder，而是使用抽象基类[BitmapDecoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapdecoder.aspx)的静态工厂方法，该方法自动为提供的数据流选择适当的解码器。因此，此代码可用于 WPF 支持的所有图像格式。

另请注意，Stream 对象在[using 块](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)内使用，该块会在不再需要时处理它。[BitmapCacheOption.OnLoad](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcacheoption.aspx)确保将整个流加载到解码器中，然后可以关闭。

# c++ - Pcrecpp multiple lines

> ID：10099778
> 
> 赞同：1
> 
> 时间：2012-04-11T04:24:14.427
> 
> 标签：c++, pcre

I'm using pcrecpp to match and expression in my C++ program. The relevant code is:

```
pcrecpp::RE("GET (\n*|.*)* HTTP").PartialMatch(packet, &getUrl);

cout << "GET " << getUrl << endl; 
```

And the text i want to match is something like:

```
GET /subscribe?host_int=52830395&ns_map=39290872_6081712982008&ts=133411801
3 HTTP ... 
```

I cannot match the whole expression between `GET` and `HTTP` because there is a new line (\n). Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:56:27.970

You should take a look at the documentation: [http://linux.die.net/man/3/pcrecpp](http://linux.die.net/man/3/pcrecpp)

Most notably look at the section titled "Passing Modifiers To The Regular Expression Engine".

You are probably interested in using the PCRE_MULTILINE and PCRE_DOTALL options. With the DOTALL option you wouldn't have to do the OR you are doing. "." would match newline characters as well.

# objective-c - 在没有粘贴板或模拟打字的情况下向应用程序输入字符串

> ID：10099785
> 
> 赞同：3
> 
> 时间：2012-04-11T04:25:31.577
> 
> 标签：objective-c, macos, cocoa, pasteboard

我需要将一串文本粘贴到打开的任何应用程序中，并且我宁愿不清除粘贴板，以防有重要的东西，而且我宁愿不将每个字符都变成键盘事件。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:33:43.700

您可以尝试使用可访问性：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Accessibility/cocoaAXIntro/cocoaAXintro.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Accessibility/cocoaAXIntro/cocoaAXintro.html 虽然它可能是矫枉过正。

另一种选择可能是将粘贴板的当前内容复制到局部变量，将其替换为您自己的字符串，执行粘贴，然后将原始值恢复回粘贴板。取决于你想要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:13:03.820

您可以提供一项[服务](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SysServices/introduction.html)来粘贴所提供的文本。

# jqplot - jqplot主题消失x轴标签

> ID：10099786
> 
> 赞同：1
> 
> 时间：2012-04-11T04:25:39.080
> 
> 标签：jqplot

使用主题时`jqPlot`，x 轴标签会消失。颜色也添加到系列中，也可以设置 y 轴刻度标签字体大小。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:15:49.120

我有同样的问题。如果我正在使用切换主题（甚至切换回默认值）

```
 renderer: $.jqplot.CategoryAxisRenderer 
```

不再绘制 x 轴文本。

如果我使用

```
 $.jqplot.DateAxisRenderer 
```

但是它们是被绘制的。

我什至尝试将渲染器指定为主题的一部分，但这似乎被忽略了（可能是故意的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T17:10:37.573

我现在正在处理这个问题（jqPlot v. 1.0.8），我想我找到了问题的根源。在执行 ThemEngine activateTheme() 函数末尾调用的重绘过程时，在 CategoryAxisRenderer 的 createTicks() 中，“showLabel”属性默认设置为 false，并且对于带有标签的刻度无法切换为 true。

**对我有用的快速修复：**在插件中：*jqplot.categoryAxisRenderer.js*

评论

```
t.showLabel = false; @line 149 
```

并取消注释

```
t.showLabel = true; @line 155 
```

在这些更改之后，默认主题和用户创建的主题都按预期工作。我必须再次强调，这只是一个快速解决方案，而不是我将尽快在此处发布的最终解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T07:54:03.893

我试图直接设置对我有用的 option.seriesColors。这意味着该主题仅作为创建图形的辅助函数中的某些内容存在，但对我来说没问题。

# java - 在java中将JSON类型转换为字节数组格式

> ID：10099787
> 
> 赞同：38
> 
> 时间：2012-04-11T04:26:04.187
> 
> 标签：java, json, byte

当我想在 UDP 协议中使用字节格式发送数据时遇到问题，问题是当我尝试创建类型为 json 对象的数据时，我无法获取数据的字节格式，这是我的示例代码：

```
 JSONObject obj = new JSONObject();
    obj.put("name", "foo");
    obj.put("num", new Integer(100));
    obj.put("balance", new Double(1000.21));
    obj.put("is_vip", new Boolean(true));
    obj.put("nickname",null);

    sendData = obj.getBytes(); //this is error because not have methos getBytes(); 
```

我知道我的问题，但我找不到如何将 json 对象转换为字节，有什么建议吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-11T04:29:02.307

获取字符串的字节数：

```
obj.toString().getBytes(theCharset); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-11T04:31:14.870

假设您提到的 JSONObject 来自[this](http://www.json.org/javadoc/org/json/JSONObject.html)，您可以获得如下所示的字节

```
sendData = obj.toString().getBytes("utf-8"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-09T12:59:22.527

为了避免不必要的转换 from which`String`根据`byte[]`提供的*charset*强制编码，我更喜欢`JsonWriter`直接使用 with`ByteArrayOutputStream`例如（`JsonValue`子类型使用`JsonWriter`with `StringWriter`）：

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
Json.createWriter(stream).write(obj);

byte[] sendData = stream.toByteArray()

System.out.println("Bytes array: " + sendData);
System.out.println("As a string: " + stream.toString()); 
```

此外，甚至可以启用*漂亮的打印*，如下所示：

```
Json.createWriterFactory(
            Collections.singletonMap(JsonGenerator.PRETTY_PRINTING, true))
        .createWriter(stream)
        .write(obj); 
```

唯一可悲的是，它不是*单行的*。您至少需要 3 个（考虑到您省略`JsonWriter.close()`了在这种情况下不必要的调用）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-27T14:25:40.943

使用项目的实用程序类`ObjectMapper`，`jackson-databind`即`objectMapper.writeValueAsBytes(dto)`返回`byte[]`

```
@Autowired
private ObjectMapper objectMapper;

ContractFilterDTO filter = new ContractFilterDTO();
    mockMvc.perform(post("/api/customer/{ico}", "44077866")
            .contentType(MediaType.APPLICATION_JSON_UTF8_VALUE)
            .content(objectMapper.writeValueAsBytes(filter)))... 
```

Maven依赖：

```
<!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind -->
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.8.8.1</version>
</dependency> 
```

# drupal - .htaccess 错误后无法访问/使用我的 Drupal 站点

> ID：10099788
> 
> 赞同：2
> 
> 时间：2012-04-11T04:26:12.823
> 
> 标签：drupal

希望我能在这个问题上得到一些快速帮助。

这是我网站的 URL：www.eastwestcards.com - 我不小心将 drupal 生成的 .htaccess 文件用于我的主机上的其他网站，我认为这就是导致此错误的原因。谁能告诉我如何解决这个问题？它实际上是在我复制了 drupal .htaccess 文件并在另一个也使用 drupal 的域上使用它之后发生的。当我尝试访问使用 drupal 的其他域时，也会发生同样的错误。

这是我在尝试访问我的站点时正在阅读的错误解析错误：语法错误，解析错误中的意外 T_CLASS：语法错误，/nfs/c07/h04/mnt/108263/domains/eastwestcards.com/ 中的意外 T_CLASS第 287 行的 html/includes/bootstrap.inc

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:53:08.990

I think here you could find a answer [http://drupal.org/node/1373932](http://drupal.org/node/1373932)

# c# - 搜索数千个 xml 文件

> ID：10099790
> 
> 赞同：2
> 
> 时间：2012-04-11T04:26:20.737
> 
> 标签：c#, .net, xml, vb.net

我有大约 50000 个 XML 文件，每个文件大小为 50KB。我想在这些文件中搜索数据，但到目前为止我的解决方案非常慢。有什么方法可以提高搜索性能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T04:37:35.083

您可以使用[Lucene.NET](http://lucene.apache.org/core/ "Lucene.NET")，这是一个轻量级、快速、平面文件搜索索引引擎。

有关入门教程，请参阅[http://codeclimber.net.nz/archive/2009/09/02/lucene.net-your-first-application.aspx 。](http://codeclimber.net.nz/archive/2009/09/02/lucene.net-your-first-application.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:27:35.853

您始终可以将文件内容索引到数据库并在那里执行搜索。数据库在搜索方面非常高效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T05:00:39.083

我假设您使用的是 Windows，并且您可以使用 Windows 桌面搜索来快速搜索文件。您将使用 Windows 索引，该索引会在文件更改时更新。[SDK 可在此处获得](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=7388)，可从 .NET 使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T05:29:03.917

You could spin up a Splunk instance and have it index your files. It's billed mostly as a log parser but would still serve your needs. It tokenizes files into words, indexes those words, and provides both a web-based and a CLI-based search tool that supports complex search criteria.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T04:52:23.717

很大程度上取决于这些 XML 文件的性质。它们只是 50,000 个不会重新生成的 XML 文件吗？还是它们在不断变化？XML 文件中是否只有某些元素要索引以进行搜索？

当然，打开 50k 文件句柄、读取其内容和搜索文本会非常慢。我同意 Pavel 的观点，将数据放入数据库会产生很大的性能，但如果您的 XML 文件经常更改，则必须有一些方法使它们与数据库保持同步。

如果您想推出自己的解决方案，我建议您扫描所有文件并创建一个单词索引。如果您的文件经常更改，您还需要跟踪您的“最后修改”日期，如果文件更改时间比该日期更晚，请更新您的索引。这样，您将拥有一个巨大的单词索引，如果搜索“foo”，索引将显示该单词可以在文件 file39209.xml、file57209 和 file01009.xml 中找到。根据 XML 的性质，您甚至可以将元素存储在索引文件中（本质上，这就像将所有 XML 文件合并为一个）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T08:27:49.013

使用 XML 数据库。如果您想要开源，通常的建议是 eXist，如果您想要商业化的东西，则使用 MarkLogic，但如果 Microsoft 对您很重要并且您不想要最终的 XML 功能，您可以使用 SQL Server。如果你想评估它们，还有很多其他的。所有数据库产品都有一个陡峭的学习曲线，但对于这些数据量，它是正确的解决方案。

# asp.net - ASP.NET 路由：格式化 URL 字符串

> ID：10099794
> 
> 赞同：2
> 
> 时间：2012-04-11T04:26:52.650
> 
> 标签：asp.net, routing, url-routing

我已经在我的项目（新闻网站）中成功实现了路由功能：

```
 Sub RegisterRoutes(ByVal routes As RouteCollection)
        routes.MapPageRoute("ndetails", "news/{title}/{id}/", "~/newsdetail.aspx")
 End Sub 
```

我像这样设置 URL（数据绑定到转发器）：

```
href="<%# Page.GetRouteUrl("ndetails", new with { .title= Server.UrlEncode(Eval("Title")), .id= Eval("NewsID")})%>" 
```

生成的 URL 如下：

```
/this%20is%20a%20news%20item/89 
```

如上所示，URL 部分很难阅读，我希望它是这样的：

```
/this_is_a_news_item/89 
```

我想去一个替换功能。但是，由于创建新闻的用户可能输入任何字符串，我必须考虑可能需要替换的所有其他字符。

我只是想从经验丰富的开发人员那里知道，是否使用长替换功能是可行的方法，或者在这种路由场景中是否有另一种解决方案来格式化我的 URL。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:28:45.810

AFAIK there is no built in funcitonality in the framework to make url "pretty". You have to implement your own url fo rewriting the title.

In the save of your entities simply use a function that do the replaces that you need (' ' with '_' or example) and then use UrlEncode. You can also use a Regular expression to do the replacement in one go.

# jquery - jquery加载功能不会替换以前加载的页面

> ID：10099796
> 
> 赞同：1
> 
> 时间：2012-04-11T04:27:17.520
> 
> 标签：jquery, setinterval

当用户点击链接时，我试图将不同的页面加载到 div 中。

这是我的 index.html 代码：

```
 <li><a href="javascript:loadContent('#content_main','cardinal.jsp')">SMS</a></li>
 <li><a href="javascript:loadContent('#content_main','paypoint.jsp')">Paypoint</a></li> 
```

loadContent 函数如下所示：

```
function loadContent(elementSelector, sourceUrl) {
$(""+elementSelector+"").empty();
$(""+elementSelector+"").load("http://localhost:7070/ning/"+sourceUrl+"");
} 
```

我的 cardinal.jsp 看起来像这样：

```
$(document).ready(function() {
    setInterval(function(){
    alert("Cardinal");
},5000);
}); 
```

paypoint.jsp 有这样的代码：

```
$(document).ready(function() {
    setInterval(function(){
    alert("paypoint");
},5000);
}); 
```

我首先点击链接短信。这将加载 cardinal.jsp 并每 5 秒显示一次 alertbox(cardinal)。现在，当我单击 paypoint 链接时，我应该只运行 paypoint.jsp 页面。但是，相反，它似乎将 paypoint.jsp 内容附加到 div（它已经具有 cardinal.jsp 的内容）。这导致两个警报框交替显示。

如您所见，我曾尝试在加载新页面之前清空 div 的内容。但是，它仍然不起作用。我在这里做错了什么？

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:40:28.870

如果您删除设置它的代码，间隔不会消失。如果要删除它，请执行以下操作：

```
var interval = setInterval(function() {
  alert("paypoint");
}, 5000);

clearInterval(interval); 
```

请记住，您加载的不是一个全新的页面，而是现有页面的新内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:37:11.160

是的，正如 Heikki 所建议的那样……这对我有用……

在 index.html 中

```
<script>
    var interval;
function loadContent(elementSelector, sourceUrl) {
    $(elementSelector).empty(); 
    interval = window.clearInterval(interval);
    $(elementSelector).load("http://localhost/"+sourceUrl+"");
}
</script> 
```

在 paypoint.jsp 中

```
$(document).ready(function() {
    interval = window.setInterval(function(){
    alert("Paypoint");
    },5000);
}); 
```

在 cardinal.jsp 中

```
$(document).ready(function() {
    interval = window.setInterval(function(){
    alert("Cardinal");
    },5000);
}); 
```

检查这是否也适合您....

# java - 定义一个 gradle 任务来运行 caliper microbenchmark

> ID：10099804
> 
> 赞同：5
> 
> 时间：2012-04-11T04:28:02.517
> 
> 标签：java, gradle, caliper, microbenchmark

这可能更像是一个 Gradle 问题而不是 Caliper 问题，但我对 Gradle 还是很陌生。我有兴趣在我的构建中提供一个可以使用 Caliper 运行一些基准测试的任务。我已经将 Caliper 添加到我的 testCompile 依赖项中，并且可以正常工作并将所有内容都拉下来。我想知道如何提供一个实际运行基准的任务。

顺便说一句，我已经知道 caliper-ci。我确实有一个 Jenkins 版本，但它在一个云服务上，还不允许我配置 caliper-ci 的使用，此外，我希望能够在将更改提交到云之前在本地运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:23:20.600

事实证明这是一个简单的使用案例`JavaExec`（无论如何我都是新手）：

```
task runBenchmark(type: JavaExec, dependsOn: test) {
    def vmVer = System.getProperty('java.version')
    def osName = System.getProperty('os.name').replaceAll('\\s','')
    def osArch = System.getProperty('os.arch')
    def fnameBase = "ver${version}_${osName}-${osArch}_jvm${vmVer}"
    def benchMarksDir = "${project.buildDir}/benchmarks"
    ant.mkdir(dir: benchMarksDir)
    def outStream = new FileOutputStream("${benchMarksDir}/${fnameBase}-out.txt")
    standardOutput = outStream
    main = 'org.funcito.benchmarks.MyBenchmark'
    classpath = sourceSets.test.runtimeClasspath
    args = ['--saveResults', "${benchMarksDir}/${fnameBase}.json", '-Jmode=-server,-client']
} 
```

# php - 是否可以在 GROUP BY 中进行子查询？

> ID：10099807
> 
> 赞同：1
> 
> 时间：2012-04-11T04:28:09.067
> 
> 标签：php, sql, group-by, subquery

我的问题类比是这样的：

```
table: place
id   title            branch
===============================
1    pizza store      california
2    pizza store      manhattan
3    coffee shop      california
4    pizza store      texas
5    cookie store     new york

table: rating
id    place_id     rating
================================
1     1            3.5
2     2            5.0
3     2            4.2
4     2            5.0
5     5            4.0 
```

我使用查询：

```
 SELECT F.id AS id, F.title AS title, G.rating 
 FROM place F 
 JOIN rating G ON F.id = G.place_id 
 GROUP BY F.title 
```

显示将是：

```
id   title          rating
===========================
1    pizza store    3.5
3    coffee shop    -
5    cookie store   4.0 
```

我想要的是对评级最高的标题进行排序，在这种情况下，我希望它显示评级为 5 和 id 2 的披萨店。是否可以在 GROUP BY 中插入一些子查询？

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:35:55.087

尝试

```
SELECT F.id , F.title, s.Maxrating 
FROM place F 
INNER JOIN (SELECT id,Max(rating) as MaxRating FROM rating  GROUP BY place_id ) s 
ON s.id = F.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T04:42:30.633

```
SELECT F.id AS id, F.title AS title, max(G.rating)
FROM place F, rating G
where F.id = G.place_id(+)
group by f.id, f.title 
```

# haskell - 为什么 Haskell 类型的“派生积分”需要“派生枚举”？

> ID：10099808
> 
> 赞同：5
> 
> 时间：2012-04-11T04:28:25.137
> 
> 标签：haskell

我最近一直在尝试“向我学习 Haskell”，并且我想创建一个新类型来表示整数状态，而不仅仅是使用原始整数（为了类型安全和代码清晰）。具体来说，编译以下代码：

```
newtype AuxState = AuxState Integer
  deriving (Eq, Ord, Num, Integral, Real, Enum) 
```

但是，由于我的应用程序中有无数个状态，因此我没有兴趣将此状态转换为 Enum。但是，如果我尝试删除该`deriving (Enum)`语句，那么它只是`deriving (Eq, Ord, Num, Integral, Real)`，编译器会抱怨：

```
No instance for (Enum AuxState)
  arising from the 'deriving' clause of a data type declaration
Possible fix:
  add an instance declaration for (Enum AuxState)
  or use a standalone 'deriving instance' declaration,
       so you can specify the instance context yourself
When deriving the instance for (Integral AuxState) 
```

我很难相信 Haskell 会强制 Integral 类中的类型也属于 Enum 类。不应该反过来吗？这是有原因的，还是我做/理解错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T04:37:26.313

所有`Integral`这些都是必然`Enum`的，因为`Integral`数学的基础是`succ`和`pred`运算。（我认为，从技术上讲`Enum`，它代表了一个适当的类型层次结构，其中一个`Integral`类型是一个数学半群。）反过来似乎更错误：你的意思是每个都`Enum`应该是`Integral`？这是否包括随机 ADT，例如

```
data Foo = A | B | C | D | E | F | G deriving (Enum) 
```

?

（当然，每个都`Enum`应该与 的子集同构`Integral`，但这实际上表明它朝另一个方向发展： `Integral`可以表示任何`Enum`但不能反之亦然，`Integral`ur- 的种类也是如此`Enum`。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T05:54:45.110

技术原因是因为`Integral`定义`Prelude`如下：

```
class (Real a, Enum a) => Integral a where
   ... 
```

数学上的原因是每个整数类型都是可枚举的，但反之则不然。例如考虑有理数。请注意，Enum 并不意味着如 所示的有限枚举`Integer`。

# haskell - Haskell：自动更新两个或多个 TVar。可能的？

> ID：10099815
> 
> 赞同：4
> 
> 时间：2012-04-11T04:29:14.593
> 
> 标签：haskell, concurrency, stm, tvar

`TVar`一个事务可以以原子方式更新两个不同的 s 吗？即我可以用大量的 s 组成数据结构`TVar`来减少争用吗？如果是这样，你能举个例子吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T05:48:21.727

> 一个事务可以以原子方式更新两个不同的 TVar 吗？

是的，您可以在一个事务中自动更新多个 TVar。这就是STM的全部意义所在。如果你不能，它不会很有用。

> 我可以从大量 TVar 中组合数据结构以减少争用吗？如果是这样，你能举个例子吗？

这是一个将 TVar 存储在数据结构中的（有点愚蠢的）示例。它模拟了银行账户之间的一堆随机并发交易，其中每个账户只是一个`TVar Integer`. 帐户 TVar 保存在帐户 ID 的映射中，帐户 ID 本身保存在 TVar 中，以便可以即时创建新帐户。

```
import Control.Concurrent
import Control.Concurrent.MVar
import Control.Concurrent.STM
import Control.Monad
import System.Random

import qualified Data.Map as Map

type AccountId = Int
type Account = TVar Dollars
type Dollars = Integer
type Bank = TVar (Map.Map AccountId Account)

numberOfAccounts = 20
threads = 100
transactionsPerThread = 100
maxAmount = 1000

-- Get account by ID, create new empty account if it didn't exist
getAccount :: Bank -> AccountId -> STM Account
getAccount bank accountId = do
  accounts <- readTVar bank
  case Map.lookup accountId accounts of
    Just account -> return account
    Nothing -> do
      account <- newTVar 0
      writeTVar bank $ Map.insert accountId account accounts
      return account

-- Transfer amount between two accounts (accounts can go negative)
transfer :: Dollars -> Account -> Account -> STM ()
transfer amount from to = when (from /= to) $ do
  balanceFrom <- readTVar from
  balanceTo <- readTVar to
  writeTVar from $! balanceFrom - amount
  writeTVar to $! balanceTo + amount

randomTransaction :: Bank -> IO ()
randomTransaction bank = do
  -- Make a random transaction
  fromId <- randomRIO (1, numberOfAccounts)
  toId   <- randomRIO (1, numberOfAccounts)
  amount <- randomRIO (1, maxAmount)

  -- Perform it atomically
  atomically $ do
    from <- getAccount bank fromId
    to   <- getAccount bank toId
    transfer amount from to

main = do
  bank <- newTVarIO Map.empty

  -- Start some worker threads to each do a number of random transactions
  workers <- replicateM threads $ do
    done <- newEmptyMVar
    forkIO $ do
      replicateM_ transactionsPerThread $ randomTransaction bank
      putMVar done ()
    return done

  -- Wait for worker threads to finish
  mapM_ takeMVar workers

  -- Print list of accounts and total bank balance (which should be zero)
  summary <- atomically $ do
    accounts <- readTVar bank
    forM (Map.assocs accounts) $ \(accountId, account) -> do
      balance <- readTVar account
      return (accountId, balance)

  mapM_ print summary
  putStrLn "----------------"
  putStrLn $ "TOTAL BALANCE: " ++ show (sum $ map snd summary) 
```

如果在传输过程中没有竞争条件，这应该在最后打印总余额为零。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T05:21:16.857

事务是完全原子的；如果它修改了多个`TVar`s，则这两个更改将一起发生，原子地，孤立地发生。在单个`atomically`块中运行的任何东西都是单个事务。例如：

```
swap :: (Num a) => TVar a -> TVar a -> STM ()
swap v1 v2 = do
    a <- readTVar v1
    b <- readTVar v2
    writeTVar v1 b
    writeTVar v2 a 
```

在这里，`swap a b`将原子交换两个`TVar`s。这种原子事务的*可组合性*是 STM 的主要优点之一。

# hadoop - 在本文的上下文中，“数据的本地缓存”是什么意思？

> ID：10099816
> 
> 赞同：3
> 
> 时间：2012-04-11T04:29:17.533
> 
> 标签：hadoop, hdfs

从以下几段文字——（http://developer.yahoo.com/hadoop/tutorial/module2.html），提到顺序可读的大文件不适合本地缓存。但我不明白这里的本地是什么意思......

我认为有两种假设：一种是Client缓存来自HDFS的数据，另一种是datanode将hdfs数据缓存在其本地文件系统或内存中以供Client快速访问。有没有人可以解释更多？非常感谢。

* * *

但是，虽然 HDFS 具有很强的可扩展性，但其高性能设计也将其限制在特定类别的应用程序中；它不像 NFS 那样通用。使用 HDFS 做出了大量额外的决定和权衡。尤其：

假设使用 HDFS 的应用程序从文件中执行长的顺序流式读取。HDFS 进行了优化以提供流式读取性能；这是以文件中任意位置的随机寻道时间为代价的。

数据会一次写入HDFS，然后多次读取；不支持在文件关闭后更新文件。（Hadoop 的扩展将支持将新数据附加到文件的末尾；它计划包含在 Hadoop 0.19 中，但尚不可用。）

**由于文件的大小和读取的顺序性，系统不提供*本地缓存数据*的机制。缓存的开销足够大，数据应该简单地从 HDFS 源重新读取。**

假设单个机器经常发生故障，无论是永久性的还是间歇性的。集群必须能够承受多台机器的完全故障，可能同时发生许多故障（例如，如果一个机架一起发生故障）。虽然性能可能会与丢失的机器数量成比例地下降，但整个系统不应变得过于缓慢，也不应丢失信息。数据复制
策略可以解决这个问题。

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:28:19.453

任何真正的 Mapreduce 作业都可能会处理来自 HDFS 的 GB（10/100/1000 秒）数据。

因此，任何一个映射器实例很可能会以顺序方式处理大量数据（典型的块大小为 64/128/256 MB，具体取决于您的配置）（它将从一开始就完整读取文件/块结束。

在同一台机器上运行的另一个映射器实例也不太可能在不久的将来随时再次处理该数据块，因此多个映射器实例也将在任何一个 TaskTracker 中与该映射器一起处理数据（希望具有很少有人是“本地”到数据的实际物理位置，即数据块的副本也存在于映射器实例正在运行的同一台机器上）。

考虑到这一切，缓存从 HDFS 读取的数据可能不会给您带来太多好处——在查询另一个块之前，您很可能不会对该数据进行缓存命中，并最终将其替换到缓存中。

# algorithm - 这个函数的复杂度是多少？

> ID：10099817
> 
> 赞同：0
> 
> 时间：2012-04-11T04:29:20.077
> 
> 标签：algorithm, complexity-theory

我总是在面试中提供这样的解决方案，但我不确定 O(n^2)、O(nlogn) 的复杂度是多少？

```
for(i = 0; i < limit; i++)
{
    for(j = i; j < limit; j++)
    {
        // do something
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:47:02.610

只是为了理解，以limit为6。现在，i可以从0到5，j可以从i到5。当i=0 j=0到5时，i=1 j=1到5，i=2 j =2 到 5，i=3 j=3 到 5，i=4 j=4 到 5，i=5 j=5

因此，程序的“做某事”部分运行 5、4、3、2 和 1 次。这意味着limit = 6总共有15次。或n（n + 1）/ 2次，因为从1到n的数字之和就是这样。（假设极限由 n 表示）。

我看到它并不完全是 n^2 复杂性，但随着 n 变大，n^2 项将占主导地位。因此，在我看来，它是 O(n^2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:38:44.207

让我们分析一下。外循环将运行`limit`时间。

```
First iteration of outer loop, i=0.. Inner loop runs limit times..
Second iteration of outer loop, i=1.. Inner loop runs limit-1 times.. 
.
.
.
.
Limit-th iteration of outer loop, i=limit-1.. Inner loop runs 1 time.. 
```

这给了我们一个复杂性，`O(limit) * O(limit-1) * O(limit-2)*..*O(1)`这反过来又使这段代码的复杂性`O(n2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:46:26.233

这种复杂度当然是 O(N^2)。为什么，让我们用演绎的方式简单地分析一下。

```
 Limit = 10, the iterations are = 10 + 9 + 8 + 7 + ... + 1 = 10*(10+1) / 2
    Limit = 20, the iterations are = 20 + 19 + 18 + ... + 1 = 20*(20+1) / 2
    .
    .
    .
    Limit = N, the iterations are = N + N-1 + N-2 + ... + 1 = (N)(N+1)/2 
    In big-Oh notation, its complexity is O( (N)(N+1)/2 ) = O( (N^2 + N) / 2 ) which gives O(N^2) 
```

# objective-c - UITableViewCell 自定义，更新 UILabel

> ID：10099818
> 
> 赞同：0
> 
> 时间：2012-04-11T04:29:44.210
> 
> 标签：objective-c, uitableview

我有自定义 UITableView 和 UIImageView，UILabel 在里面。在某些通知上，我只需要更新 UILabel 而不是 UIImageView。如果我这样做：

```
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:idxCell inSection:0]] withRowAnimation:UITableViewRowAnimationFade]; 
```

单元格的所有内容都在更新，我对 UIImageView 有闪烁效果。我已经这样做了：

```
MyTableViewCell *cell = (MyTableViewCell *)[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:idx inSection:0]];
cell.counterLabel.text = [NSString stringWithFormat:@"%@", counter]; 
```

但是我觉得不好，因为它不对应MVC模式。我想我应该更新我的模型对象。我需要建议，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:52:36.947

您应该从您获取数据的地方更新您的 NSArray 或 NSDictionary。因为当您重新加载行时，它再次调用相同的字典或数组并且具有相同的值。

didSelectRowAtIndexPath 在更新字典或数组，然后重新加载行。

cellForRowAtIndexPath 更新获取行数据的 NSArray 或 NSDictionary。

可能有效

# hibernate - 使用 Oracle XE 数据库运行休眠

> ID：10099820
> 
> 赞同：0
> 
> 时间：2012-04-11T04:30:01.390
> 
> 标签：hibernate

**当我尝试在 Hibernate 中执行示例程序时...我收到以下错误...有人知道修复它们吗？**

```
Hibernate: insert into USER_DETAILS (data, date, phonenumber, USER_NAME, USER_ID) values (?, ?, ?, ?, ?)
Exception in thread "main" org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:268)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)
    at org.rathan.dto.Test.main(Test.java:31)
Caused by: java.sql.BatchUpdateException: ORA-01747: invalid user.table.column, table.column, or column specification

    at oracle.jdbc.driver.DatabaseError.throwBatchUpdateException(DatabaseError.java:367)
    at oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:9119)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
    ... 8 more 
```

这是我的主要课程：

```
package org.rathan.dto;

import java.util.Date;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class Test {

    public static void main(String[] args) {
    System.out.println(1);
    UserDetails user=new UserDetails();
    System.out.println(2);
    user.setUserid(100);
    user.setUsername("Rathan");
    //user.setSalary(10000);
    user.setPhonenumber("9989242487");
    user.setAddress("My Home address");
    user.setData("blah....blah....blah....blah....blah....");
    user.setDate(new Date());
    System.out.println(3);
    SessionFactory factory=new Configuration().configure().buildSessionFactory();
    System.out.println(4);
    Session session=factory.openSession();
    System.out.println(5);
    session.beginTransaction();
    System.out.println(6);
    session.save(user);
    System.out.println(7);
    session.getTransaction().commit();
    System.out.println(8);
    session.close();
}} 
```

这里它可以运行到 System.out.println(7); 之后发生错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:34:41.887

这是 UserDetails.java

```
 package org.rathan.dto;

import java.util.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Lob;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.persistence.Transient;

@Entity
@Table (name="USER_DETAILS")
public class UserDetails {
    @Id
    @Column (name="USER_ID")
    private int userid;
    @Column (name="USER_NAME")
    private String username;
    @Transient
    private String Address;
    private static long salary;
    private String phonenumber;
    @Lob
    private String data;
    @Temporal (TemporalType.DATE)
    private Date mydate;

public String getData() {
        return data;
    }
    public void setData(String data) {
        this.data = data;
    }

public Date getMydate() {
        return mydate;
    }
    public void setMydate(Date mydate) {
        this.mydate = mydate;
    }
public String getAddress() {
        return Address;
    }
    public void setAddress(String address) {
        Address = address;
    }
    public static long getSalary() {
        return salary;
    }
    public static void setSalary(long salary) {
        UserDetails.salary = salary;
    }
    public String getPhonenumber() {
        return phonenumber;
    }
    public void setPhonenumber(String phonenumber) {
        this.phonenumber = phonenumber;
    }
public int getUserid() {
    return userid;
}
public void setUserid(int userid) {
    this.userid = userid;
}
public String getUsername() {
    return username;
}
public void setUsername(String username) {
    this.username = username;
}
} 
```

# django - 将现有的博客代码集成到 Django-CMS 中？

> ID：10099822
> 
> 赞同：1
> 
> 时间：2012-04-11T04:30:05.913
> 
> 标签：django, django-cms

如果我已经有一个使用 Django 完成的博客应用程序并且我想将它与我的新 Django CMS 站点一起使用，是否*可以*简单地将它作为一个解耦应用程序放入我的新 Django CMS 项目中并将任何 /blog/ 与博客应用程序匹配相对于 Django CMS 插件？我想我需要知道什么时候最好将我的 Django 应用程序编写为插件与整个应用程序？

谢谢

杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:36:32.047

是的，但您不只是将它放入 . `urls.py`，而是您可以编写一个[AppHook](http://docs.django-cms.org/en/latest/extending_cms/app_integration.html#app-hooks)将您博客的 URL 方案绑定到您的 CMS 中的特定页面。

[另一方面，如果您想将应用程序的特定方面插入到其他页面的占位符中，插件](http://docs.django-cms.org/en/latest/extending_cms/custom_plugins.html#writing-a-custom-plugin)会很有用 - 例如在首页上显示您最近的 3 个帖子。

您可能还希望将博客的路径包含在站点上的面包屑或菜单中 - 在这种情况下，您还需要编写自定义[菜单](http://docs.django-cms.org/en/latest/extending_cms/app_integration.html#menus)。

[最后，在您的博客模型中使用 django cms 的占位符](http://docs.django-cms.org/en/latest/extending_cms/placeholders.html)也可能很有用。他将允许您通过插件发布各种内容。

# ios - 为什么我不应该修改 UINavigationController 的工具栏？

> ID：10099824
> 
> 赞同：3
> 
> 时间：2012-04-11T04:30:09.737
> 
> 标签：ios, cocoa-touch, uinavigationcontroller, uitoolbar

`toolbar`UINavigationController中属性的文档说：

> 此属性包含对导航控制器管理的内置工具栏的引用。此工具栏的访问权仅提供给希望从工具栏中显示操作表的客户。您不应该直接修改 UIToolbar 对象。

我可以理解为什么我不应该修改工具栏的可见性或项目，因为 UINavigationController 提供了一个接口来做到这一点。但是我添加了一个按钮，当点击该按钮时，工具栏会在屏幕外显示动画。为什么我不应该这样做？

我是否必须创建自己的 ToolbarNavigationController 类来复制 UINavigationController 对工具栏所做的一切，我可以用工具栏做我想做的事吗？当 UINavigationController 已经做了我想要的事情时，这似乎是一种浪费。为什么文档会建议我如此严格地限制我用它做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:35:07.757

移动导航栏的三种方式可能会混淆它：

1.  如果您的应用程序可以旋转，它是否在旋转后停留在正确的位置？当它返回屏幕时，它是否从正确的位置开始动画？
2.  如果显示搜索栏，导航栏会自动关闭。如果它已经被手动移动过，它知道它在哪里吗？
3.  如果将`viewController`hidesBottomBarWhenPushed[设置](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/hidesBottomBarWhenPushed)为`YES`并返回，是否`navigationController`将其工具栏放回它所属的位置？

另一方面，调用[UINavigationController setNavigationBarHidden:NO animated:YES](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/setNavigationBarHidden%3aanimated%3a)怎么样 - 这样做是否符合您的要求，同时让导航控制器保持对其工具栏的控制？

**编辑**：抱歉误读。是的，您可能可以按照您的要求做，只要您不做任何意味着`navigationController`移动其工具栏的任何事情（如上面的第 3 项）。

另一方面，你想要的行为也可以实现如下：

1.  对于`viewController`具有多个工具栏的 ，将其设置`hidesBottomBarWhenPushed`为`YES`.
2.  将**所有**需要的工具栏`viewController`放在上面，并让它完全控制它们的位置和可见性。

如果默认工具栏与 navigationController 自己的工具栏具有相同的布局，这将产生奇怪的视觉效果，即看到同一组工具栏项目滑下然后又滑开，但其他一切都应该正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:59:26.900

UIToolbar 是不可访问的，因为它不需要***可***访问。它对 +appearance 的响应很好。在您的情况下，您可以访问只读变量的属性（查看 CGRect！）。如果您需要在屏幕外为 UIToolbar 或 UINavigatiomBar 设置动画，请将其 frame.center 属性设置为 UIView 动画块中的 CGPointMake。

# saml - SAML NameId 策略

> ID：10099828
> 
> 赞同：13
> 
> 时间：2012-04-11T04:30:40.297
> 
> 标签：saml

我是单点登录（SSO）概念的新手。我开始知道 SAML 请求和响应是实现 SSO 流程的最佳方式。然后我开始阅读有关 SAML2.0 的信息。我在 saml2.0 中遇到了一个术语**NameIdPolicy**，而 saml1.0 中没有。

定义说这是我们向 IdP 请求的 NameID 的格式。我想知道该格式是什么？我的意思是来自 IDP 的哪些数据应该采用 NameIDPolicy 指定的格式？谁能向我简要介绍一下这个 NameIdPolicy 概念？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-03-13T19:53:02.000

根据[SAML 2.0 核心规范](http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf)，**NameIDPolicy**

*指定对用于表示请求主题的名称标识符的约束。如果省略，则可以使用身份提供者支持的所请求主题的任何类型的标识符，受任何相关部署特定策略的约束，例如隐私方面。*

在执行身份联合时，关联方必须就委托人的关联账户的标识符达成一致。标识符字符串称为**NameID**，其规范（包括格式）是**NameIDPolicy**。

例如，服务提供者 (SP) 通过向身份提供者 (IDP) 发送 AuthnRequest 来发起联合，其中包含

```
<samlp:NameIDPolicy Format="urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress" /> 
```

这告诉 IDP 它的响应断言 XML 应该包含类似

```
<saml:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress">user@example.com</saml:NameID> 
```

其中电子邮件地址代表正在验证的主题。

您可以通过阅读[SAML 2.0 维基百科页面](http://en.wikipedia.org/wiki/SAML_2.0)（编写良好）、[SAML 2.0 核心规范](http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf)和[SAML 2.0 名称标识符文档](https://www.oasis-open.org/committees/download.php/4587/)了解更多信息。

# gwt - GWT：向 EditTextCell 小部件添加值更改侦听器

> ID：10099830
> 
> 赞同：1
> 
> 时间：2012-04-11T04:30:58.040
> 
> 标签：gwt, gwt-edittext

我想对`EditTextCell`网格中的小部件进行验证。所以我试图扩展`EditTextCell`并添加一个值更改侦听器，以便我可以继续验证。但我无法添加相同的内容。任何帮助，将不胜感激。我正在使用 GWT 2.4.0

我的代码看起来像这样。

```
public class MyEditTextCell extends EditTextCell { 
        public MyEditTextCell() { 
            super(); 
            onValueChange( new ValueChangeHandler<String>() { 
                @Override public void onValueChange( ValueChangeEvent event ) { 
                    Window.alert( "jsdfk" ); 
                } 
            } ); 
        } 
        private void onValueChange( ValueChangeHandler<String> valueChangeHandler ) { 
            Window.alert( "jsdfk" ); 
        } 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:10:42.650

似乎使用 EditTextCell 执行此操作的唯一适当方法是重写 onBrowserEvent() 类似于 EditTextCell 类的私有 editEvent() 方法。

```
public void onBrowserEvent(Context context, Element parent, String value,
      NativeEvent event, ValueUpdater valueUpdater) {
          super.onBrowserEvent(context, parent, value, event, valueUpdater);
          String type = event.getType();
          if ("keyup".equals(type) || "keydown".equals(type) || "blur".equals(type) {
              validateValue();
          }
  }
```

但是监听 keyup、keydown 和 blur 事件并不能保证处理实际的变化。如果您不想跳过任何更改（例如通过上下文右键单击菜单粘贴文本），您应该添加 com.google.gwt.user.client.Timer 来检查值。计时器应该在焦点上运行并在模糊时停止。

如果您想以“事件方式”编码 1) 将 validateValue() 替换为 ValueChangeEvent.fire(this, vale); 2）添加到您的 MyEditTextCEll 接口 HasValueChangeHandlers 并像这样实现它

```
public HandlerRegistration addValueChangeHandler(
      ValueChangeHandler<String> handler) {
    return addHandler(handler, ValueChangeEvent.getType());
  } 
```

# android - What Technology can Render Medium Scale 3d Environments in a Web-Browser

> ID：10099834
> 
> 赞同：-1
> 
> 时间：2012-04-11T04:31:18.240
> 
> 标签：android, ios, css, opengl-es, browser

I intend to make a web application that displays 3d environments that can be navigated by dragging(with a finger or mouse depending on the platform). The web app will render 3d environments of development sites including contours, water pipeline locations, buildings etc.

I am trying to decide what technology/libraries to use that will create a web-app that will work on Android-Web-Browser, iOS-Safari, IE9, Safari, Firefox and Chrome. And also what technology will provide speed in development. I understand that this is *'asking for my cake and eating it too'/'asking for the moon'* but I don't know all the technologies out there - so there may be advanced libraries that can render 3d environments across many web-browsers including the main smart phone ones and I dont know of them.

The 3d rendering would not be highly detailed buildings or water with effects, but rather simple 3d representations of these objects. The environment would be navigable by dragging around and you could view the landscape in layers(view only contour lines, view only underground pipelines, view only sewerage pipes, etc.).

**Are there any 3d libraries for web-browsers out there? Is there a way to run OpenGL(or OpenGL ES) through a webbrowser?**

**What technology would you use if you were making this kind of app/web app that should work on desktop Windows, Android, iOS and WindowsPhone?**

**Is there any technology I have failed to mention that would be good for this kind of project?**

I am tending towards a **Browser Driven Web App** because I get that cross platform ability(where it even works on linux and MacOS by using compatible web-browsers). Also I know of CSS3 transforms that can create cubes that can rotate in 3d space(NOTE only works for WebKit browsers - so no IE :( ). *But I don't know if CSS3 is robust enough to render whole 3d environments? Do you think it could? Maybe I could use HTML5 canvas's for this? Can Google maps create custom 3d maps?*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:26:15.477

Technically, this is possible in either flash or webgl, but neither of those technologies are deployed across all the devices you want to address (no WebGL anywhere, flash is only on very recent Androids, and Adobe is no longer developing it). If you want to be on mobile, then you will have to go native on all platforms you care about.

While CSS3D transforms allow you to arrange things in 3D space, you can only arrange 2D elements (images, HTML elements) in the 3D space, so it's very difficult to model volumes with any degree of verisimilitude, although it's possible in a limited way to use gradients or SVG filters to do a not-so-convincing job of this.

# c# - MongoDB：MVC 未在发布时序列化 BsonId

> ID：10099835
> 
> 赞同：1
> 
> 时间：2012-04-11T04:31:48.080
> 
> 标签：c#, asp.net-mvc-3, mongodb, mongodb-.net-driver

我无法使用 MongoDB csharp 官方库获取模型的 ObjectId 以返回值。当我提交回发给控制器的表单时，PageID 总是在模型中返回 {000000000000000000000000}。呈现的 HTML 具有有效的 id，即一个字段永远不会从表单发布中正确返回。

html呈现：`<input id="PageID" name="PageID" type="hidden" value="4f83b5ccd79f660b881887a3" />`

这就是我所拥有的。

模型：

```
public class PageModel
    {
        public PageModel()
        {
            CanEdit = false;
            CancelRequest = false;
        }

        [BsonId]
        public ObjectId PageID { get; set; }

        [Display(Name = "Page URL")]
        public string PageURL { get; set; }

        [AllowHtml]
        [Display(Name = "Content")]
        public string Value { get; set; }

        [Display(Name = "Last Modified")]
        public DateTime LastModified { get; set; }

        [BsonIgnore]
        public bool CancelRequest { get; set; }
        [BsonIgnore]
        public bool CanEdit { get; set; }

    } 
```

控制器岗位：

```
[HttpPost]
        public ActionResult Edit(PageModel model)
        {
            // check to see if the user canceled
            if (model.CancelRequest)
            {
                return Redirect(model.PageURL);
            }

            // check for a script tag to prevent
            if (!model.Value.Contains("<script"))
            {
                // save to the database
                model.LastModified = DateTime.Now;
                collection.Save(model);

                // return to the page
                return Redirect(model.PageURL);
            }
            else
            {
                ModelState.AddModelError("Value", "Disclosures discovered a script in the html you submitted, please remove the script before saving.");
            }

            return View(model);
        } 
```

看法：

```
@model LeulyHome.Models.PageModel

@{
    ViewBag.Title = "";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm())
{ 
    <fieldset>
        <legend>Edit Page</legend>
        <div class="control-group">
            @Html.LabelFor(m => m.PageURL, new { @class = "control-label" })
            <div class="controls">
                @Html.TextBoxFor(m => m.PageURL, new { @class = "input-xlarge leu-required span9" })
                @Html.ValidationMessageFor(m => m.PageURL, null, new { @class = "help-block" })
            </div>
        </div>
        <div class="control-group">
            @Html.LabelFor(m => m.Value, new { @class = "control-label" })
            <div class="controls">
                @Html.TextAreaFor(m => m.Value)
                @Html.ValidationMessageFor(m => m.Value, null, new { @class = "help-block" })
            </div>
        </div>
        <div class="control-group">
            @Html.LabelFor(m => m.LastModified, new { @class = "control-label" })
            <div class="controls">
                @Html.DisplayFor(m => m.LastModified)
                @Html.HiddenFor(m => m.LastModified)
            </div>
        </div>

        @Html.HiddenFor(m => m.PageID)
        @Html.HiddenFor(m => m.CancelRequest)

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Page</button>
            <button type="button" class="btn btn-danger" id="cancelBtn">Cancel Changes</button>
        </div>
    </fieldset>
}

@section Footer {
    <script type="text/javascript" src="@Url.Content("~/Content/ckeditor/ckeditor.js")"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            // adjust the editor's toolbar
            CKEDITOR.replace('Value', {
                toolbar: [["Bold", "Italic", "Underline", "-", "NumberedList", "BulletedList", "-", "Link", "Unlink"],
                  ["JustifyLeft", "JustifyCenter", "JustifyRight", "JustifyBlock"],
                  ["Cut", "Copy", "Paste", "PasteText", "PasteFromWord", "-", "Print", "SpellChecker", "Scayt"], ["Source", "About"]]
            });

            $("#cancelBtn").click(function () {
                $("#CancelRequest").val("True");
                $("#updateBtn").click();
            });
        });
    </script>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:53:32.067

看起来您正在为 PageID 发送一个字符串值，您期望它是一个 ObjectId 类型的对象。

模型绑定不知道如何获取此字符串并将其转换为 ObjectId。如果您看一下 MongoDriver 中的 ObjectId 类，您会发现它非常复杂。

我们经常使用 mongodb，对于我们的 id，我们只使用提供了很大灵活性的字符串。我不确定您需要 ObjectId 类作为文档 ID 的用例，但您可能不需要它。

所以从这里看来你有两个选择。

1.  将您的文档 ID 更改为字符串或其他内容
2.  为 ObjectId 类编写自定义模型绑定器

希望有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T09:05:20.573

创建绑定：

公共类 ObjectIdBinder : IModelBinder {

```
public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    var result = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
    return !string.IsNullOrWhiteSpace(result.AttemptedValue) ? ObjectId.Parse(result.AttemptedValue) : ObjectId.Empty;
} 
```

}

创建 ModelBinderConfig：

命名空间 Nasa8x.CMS { public class ModelBinderConfig { public static void Register(ModelBinderDictionary binder) { binder.Add(typeof(ObjectId), new ObjectIdBinder());

```
 binder.Add(typeof(string[]), new StringArrayBinder());

        binder.Add(typeof(int[]), new IntArrayBinder());

    }
} 
```

}

在 Global.cs 上注册：

```
 protected void Application_Start()
            {  

                ModelBinderConfig.Register(ModelBinders.Binders);

                WebApiConfig.Register(GlobalConfiguration.Configuration);
                FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
                RouteConfig.RegisterRoutes(RouteTable.Routes);    

            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-11T11:32:00.970

如果您不需要 C# 类中的 PageID 属性为 ObjectId 类型，但想在 MongoDB 端利用此类型，则可以让驱动程序处理您的类定义中的转换：

```
public class PageModel
{

    [BsonId]
    [BsonRepresentation(BsonType.ObjectId)]
    public string PageID { get; set; }

} 
```

# sql - 分组函数中带有汇总和案例语句的数据透视表

> ID：10099838
> 
> 赞同：2
> 
> 时间：2012-04-11T04:32:19.017
> 
> 标签：sql, sql-server-2008, pivot-table, rollup

我正在尝试在分组函数中创建一个带有汇总和 case 语句的数据透视表。当不需要更改数据透视表的列部分中的数据时，我的查询效果很好，

他就是一个例子。

[http://sqlfiddle.com/#!3/3143e/2](http://sqlfiddle.com/#!3/3143e/2)

但是当我需要在列部分中有一个案例陈述时，它就会搞砸了。例如其中一列需要返回

```
“1 of 3” if someone voted in one of three elections, 
“2 of 3” if someone voted in two of three elections, 
“3 of 3” if someone voted in three of three elections, 
```

这是案例陈述

```
CAST( (CASE WHEN election1 IS NOT NULL THEN 1 ELSE 0 END)
       +(CASE WHEN election2 IS NOT NULL THEN 1 ELSE 0 END)
       +(CASE WHEN election3 IS NOT NULL THEN 1 ELSE 0 END) AS CHAR(1)) + '-3' as election 
```

我需要帮助弄清楚如何将此案例语句放入 Grouping() 函数中，或者可能有不同的方法可以做到这一点。我尝试过这样的事情

[http://sqlfiddle.com/#!3/3143e/3](http://sqlfiddle.com/#!3/3143e/3)

但当然它没有用。这就是最终支点的样子

[1 http://img842.imageshack.us/img842/6884/84834931.jpg](http://img842.imageshack.us/img842/6884/84834931.jpg)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:48:52.793

所以我有一个建议给你。我以另一种方式做到了，但它有效。

**测试数据**

```
create table test4(city nvarchar(10), race nvarchar(30), sex nvarchar(10), age int, type nvarchar(30),election1 nvarchar(30), election2 nvarchar(30), election3 nvarchar(30),)
insert into test4 values ('Austin',  'African-American', 'male', 21, 'gv','G10','G08','G06')
insert into test4 values ('Austin',  'Asian', 'female', 22,'AV',null,'G08','G06')
insert into test4 values ('Austin',  'Caucasian', 'male', 23,'BV','G10',null,null)
insert into test4 values ('Austin',  'Hispanic', 'female', 24,'AV','G10','G08','G06')
insert into test4 values ('Austin',  'African-American', 'Unknown', 25,'CV','G10','G08',null)
insert into test4 values ('Austin',  'Asian', 'male', 26,'gv',null,'G08','G06')
insert into test4 values ('Austin',  'Caucasian', 'female', 27,'CV',null,'G08','G06')
insert into test4 values ('Austin',  'Hispanic', 'Unknown', 28,'AV',null,'G08','G06')
insert into test4 values ('Austin',  'Asian', 'male', 29,'BV','G10',null,'G06')
insert into test4 values ('Austin',  'Caucasian', 'female', 31,'gv','G10',null,'G06')
insert into test4 values ('Dallas',  'Hispanic', 'Unknown', 32,'BV','G10',null,'G06')
insert into test4 values ('Dallas',  'African-American', 'male', 33,'gv','G10',null,'G06')
insert into test4 values ('Dallas',  'Asian', 'female', 34,'BV',null,'G08','G06')
insert into test4 values ('Dallas',  'Caucasian', 'Unknown', 35,'AV',null,null,null)
insert into test4 values ('Dallas',  'Hispanic', 'male', 500,'AV',null,'G08',null)
insert into test4 values ('Dallas',  'African-American', 'female', 36,'AV','G10',null,'G06')
insert into test4 values ('Dallas',  'Asian', 'Unknown', 37,'CV','G10','G08',null)
insert into test4 values ('Dallas',  'Caucasian', 'male', 38,'CV',null,null,null)
insert into test4 values ('Dallas',  'Hispanic', 'female', 39,'gv','G10','G08','G06')
insert into test4 values ('Dallas',  'African-American', 'Unknown', 41,'CV',null,'G08','G06')
insert into test4 values ('Houston',  'Asian', 'male', 42,'BV',null,'G08',null)
insert into test4 values ('Houston',  'Caucasian', 'female', 43,'CV','G10',null,'G06')
insert into test4 values ('Houston',  'Hispanic', 'Unknown', 44,'BV','G10',null,'G06')
insert into test4 values ('Houston',  'African-American', 'male', 45,'CV',null,'G08','G06')
insert into test4 values ('Houston',  'Asian', 'female', 46,'CV','G10','G08','G06')
insert into test4 values ('Houston',  'Caucasian', 'Unknown', 47,'gv',null,null,null)
insert into test4 values ('Houston',  'Hispanic', 'male', 48,'AV','G10','G08',null)
insert into test4 values ('Houston',  'African-American', 'female', 49,'gv','G10',null,'G06')
insert into test4 values ('Houston',  'Asian', 'Unknown', 51,'BV',null,'G08',null)
insert into test4 values ('Houston',  'Caucasian', 'male', 52,'AV',null,'G08','G06'); 
```

一个`PIVOT`_`UNION ALL`

```
;WITH PivotTable
AS
(
    SELECT
        pvt.city,
        pvt.sex,
        pvt.election,
        ISNULL(pvt.[20_30_Af],0) AS [20_30_Af],
        ISNULL(pvt.[20_30_As],0) AS [20_30_As],
        ISNULL(pvt.[20_30_C],0) AS [20_30_C],
        ISNULL(pvt.[20_30_H],0) AS [20_30_H],
        ISNULL(pvt.[30_40_Af],0) AS [30_40_Af],
        ISNULL(pvt.[30_40_As],0) AS [30_40_As],
        ISNULL(pvt.[30_40_C],0) AS [30_40_C],
        ISNULL(pvt.[30_40_H],0) AS [30_40_H],
        ISNULL(pvt.[40_50_Af],0) AS [40_50_Af],
        ISNULL(pvt.[40_50_As],0) AS [40_50_As],
        ISNULL(pvt.[40_50_C],0) AS [40_50_C],
        ISNULL(pvt.[40_50_H],0) AS [40_50_H]
    FROM
    (
    SELECT
        (
        case 
            when race = 'African-American' and age between 21 and 30 
            then '20_30_Af' 
            when race = 'Asian' and age between 21 and 30
            then '20_30_As'
            when race = 'Caucasian' and age between 21 and 30
            then '20_30_C'
            when race = 'Hispanic' and age between 21 and 30
            then '20_30_H'
            when race = 'African-American' and age between 31 and 40
            then '30_40_Af'
            when race = 'Asian' and age between 31 and 40
            then '30_40_As'
            when race = 'Caucasian' and age between 31 and 40
            then '30_40_C'
            when race = 'Hispanic' and age between 31 and 40
            then '30_40_H'
            when race = 'African-American' and age between 41 and 50
            then '40_50_Af'
            when race = 'Asian' and age between 41 and 50
            then '40_50_As'
            when race = 'Caucasian' and age between 41 and 50
            then '40_50_C'
            when race = 'Hispanic' and age between 41 and 50
            then '40_50_H'
        end
        ) AS pivotText,
        1 as pivotNbr,
        test4.city,
        test4.sex,
        CAST( (CASE WHEN election1 IS NOT NULL THEN 1 ELSE 0 END)
           +(CASE WHEN election2 IS NOT NULL THEN 1 ELSE 0 END)
           +(CASE WHEN election3 IS NOT NULL THEN 1 ELSE 0 END) AS CHAR(1)) 
            + '-3' as election
    FROM
        test4
    ) AS p
    PIVOT
    (
        SUM(pivotNbr)
        FOR pivotText IN([20_30_Af],[20_30_As],
            [20_30_C],[20_30_H],[30_40_Af],
            [30_40_As],[30_40_C],[30_40_H],
            [40_50_Af],[40_50_As],[40_50_C],[40_50_H])
    ) AS pvt
)
SELECT
    PivotTable.city,
    PivotTable.sex,
    PivotTable.election,
    PivotTable.[20_30_Af],
    PivotTable.[20_30_As],
    PivotTable.[20_30_C],
    PivotTable.[20_30_H],
    PivotTable.[30_40_Af],
    PivotTable.[30_40_As],
    PivotTable.[30_40_C],
    PivotTable.[30_40_H],
    PivotTable.[40_50_Af],
    PivotTable.[40_50_As],
    PivotTable.[40_50_C],
    PivotTable.[40_50_H],
    (
        PivotTable.[20_30_Af]+
        PivotTable.[20_30_As]+
        PivotTable.[20_30_C]+
        PivotTable.[20_30_H]+
        PivotTable.[30_40_Af]+
        PivotTable.[30_40_As]+
        PivotTable.[30_40_C]+
        PivotTable.[30_40_H]+
        PivotTable.[40_50_Af]+
        PivotTable.[40_50_As]+
        PivotTable.[40_50_C]+
        PivotTable.[40_50_H]
    ) AS Total,
    null as isGrandTotal,
    2 AS sortOrder
FROM
    PivotTable
UNION ALL
SELECT
    PivotTable.city,
    '' AS sex,
    '' AS election,
    SUM(PivotTable.[20_30_Af]) AS [20_30_Af],
    SUM(PivotTable.[20_30_As]) AS [20_30_As],
    SUM(PivotTable.[20_30_C]) AS [20_30_C],
    SUM(PivotTable.[20_30_H]) AS [20_30_H],
    SUM(PivotTable.[30_40_Af]) AS [30_40_Af],
    SUM(PivotTable.[30_40_As]) AS [30_40_As],
    SUM(PivotTable.[30_40_C]) AS [30_40_C],
    SUM(PivotTable.[30_40_H]) AS [30_40_H],
    SUM(PivotTable.[40_50_Af]) AS [40_50_Af],
    SUM(PivotTable.[40_50_As]) AS [40_50_As],
    SUM(PivotTable.[40_50_C]) AS [40_50_C],
    SUM(PivotTable.[40_50_H]) AS [40_50_H],
    SUM(
        PivotTable.[20_30_Af]+
        PivotTable.[20_30_As]+
        PivotTable.[20_30_C]+
        PivotTable.[20_30_H]+
        PivotTable.[30_40_Af]+
        PivotTable.[30_40_As]+
        PivotTable.[30_40_C]+
        PivotTable.[30_40_H]+
        PivotTable.[40_50_Af]+
        PivotTable.[40_50_As]+
        PivotTable.[40_50_C]+
        PivotTable.[40_50_H]
    ) AS Total,
    null as isGrandTotal,
    1 AS sortOrder
FROM
    PivotTable
GROUP BY 
    PivotTable.city
UNION ALL
SELECT
    'Grand Total' AS city,
    '' AS sex,
    '' AS election,
    SUM(PivotTable.[20_30_Af]) AS [20_30_Af],
    SUM(PivotTable.[20_30_As]) AS [20_30_As],
    SUM(PivotTable.[20_30_C]) AS [20_30_C],
    SUM(PivotTable.[20_30_H]) AS [20_30_H],
    SUM(PivotTable.[30_40_Af]) AS [30_40_Af],
    SUM(PivotTable.[30_40_As]) AS [30_40_As],
    SUM(PivotTable.[30_40_C]) AS [30_40_C],
    SUM(PivotTable.[30_40_H]) AS [30_40_H],
    SUM(PivotTable.[40_50_Af]) AS [40_50_Af],
    SUM(PivotTable.[40_50_As]) AS [40_50_As],
    SUM(PivotTable.[40_50_C]) AS [40_50_C],
    SUM(PivotTable.[40_50_H]) AS [40_50_H],
    SUM(
        PivotTable.[20_30_Af]+
        PivotTable.[20_30_As]+
        PivotTable.[20_30_C]+
        PivotTable.[20_30_H]+
        PivotTable.[30_40_Af]+
        PivotTable.[30_40_As]+
        PivotTable.[30_40_C]+
        PivotTable.[30_40_H]+
        PivotTable.[40_50_Af]+
        PivotTable.[40_50_As]+
        PivotTable.[40_50_C]+
        PivotTable.[40_50_H]
    ) AS Total,
    1 as isGrandTotal,
    3 AS sortOrder
FROM
    PivotTable
ORDER BY 
    isGrandTotal,
    city,
    sortOrder 
```

# mongodb - Meteor 有哪些安全机制？

> ID：10099843
> 
> 赞同：92
> 
> 时间：2012-04-11T04:32:49.077
> 
> 标签：mongodb, security, meteor

我们都知道 Meteor 提供了 miniMongo 驱动程序，它允许客户端无缝访问持久层（MongoDB）。

如果任何客户端都可以访问持久 API，如何保护他的应用程序？

Meteor 提供了哪些安全机制，应该在什么情况下使用它们？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-19T03:30:44.987

当您使用流星命令创建应用程序时，默认情况下该应用程序包含以下包：

*   自动发布
*   不安全

它们一起模拟了每个客户端对服务器数据库具有完全读/写访问权限的效果。这些是有用的原型工具（仅用于开发目的），但通常不适合生产应用程序。当您准备好发布产品时，只需删除这些包。

添加更多，Meteor 支持[Facebook / Twitter / 和 Much More](http://docs.meteor.com/#accounts_api)包来处理身份验证，最酷的是[Accounts-UI](http://docs.meteor.com/#accountsui)包

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-11T04:39:04.867

在[集合文档](http://docs.meteor.com/#collections)中说：

> 目前，客户端被授予对集合的完全写入权限。他们可以执行任意 Mongo 更新命令。一旦我们建立了身份验证，您将能够限制客户端对插入、更新和删除的直接访问。我们也在考虑验证器和其他类似 ORM 的功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T06:18:35.583

如果您正在谈论限制客户端不使用任何未经授权的插入/更新/删除 API，那是可能的。

[在https://github.com/meteor/meteor/tree/171816005fa2e263ba54d08d596e5b94dea47b0d/examples/todos](https://github.com/meteor/meteor/tree/171816005fa2e263ba54d08d596e5b94dea47b0d/examples/todos)上查看他们的待办事项应用程序

此外，他们现在添加了一个内置的 AUTH 模块，可让您登录和注册。所以它是安全的。就您处理 XSS、验证、客户端标头等而言。

但是您可以随时通过部署到 node 将流星应用程序转换为完全正常工作的 nodejs 应用程序。因此，如果您知道如何保护 nodejs 应用程序，您应该能够保护流星。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-02T14:58:26.457

从 0.6.4 开始，在开发模式下，is_client 和 is_server 块仍然都进入客户端系统。当您关闭开发模式时，我不能说这些是否被隔离。

但是，如果不是，黑客可能能够通过查看 if(Meteor.is_server) 代码块从系统中获得洞察力。这让我特别担心，特别是因为我注意到我仍然无法将集合分离到客户端和服务器上的单独文件中。

## 更新

好吧，关键是不要将与安全相关的代码放在非服务器目录中的 is_server 块中（即 - 确保它位于 /server 下的某个东西中。

我想看看我是否只是因为无法在客户端和服务器目录中分离客户端和服务器集合而发疯。事实上，这没有问题。

这是我的测试。这是发布/订阅模型的一个简单示例，似乎工作正常。 [http://goo.gl/E1c56](http://goo.gl/E1c56)

# java - 如何使用 JSP、Java (Struts.) 上传 dat 文件？

> ID：10099844
> 
> 赞同：0
> 
> 时间：2012-04-11T04:32:53.230
> 
> 标签：java, file-upload, struts

我需要从 jsp 页面上传 .dat 文件。我正在使用支柱。我在用

```
<input type="file" name="file"  size=25 /> 
```

在jsp和action类中

```
FileUploadForm uploadForm = (FileUploadForm) form;
FormFile file = uploadForm.getFile();
InputStream stream = file.getInputStream(); 
```

在这之后我很困惑。我不想打开和读取 dat 文件，因为它的大小可能很大。我只想根据 dat 文件的原始名称在服务器中的某个指定路径中创建/复制相同的 dat 文件。怎么做？

如果没有其他方法只能读取它，那么还要告诉我如何读取和写入 dat 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:54:47.007

这些是您需要完成的任务才能完成此任务：

1.  决定上传文件在服务器上的存储位置
2.  在适当位置打开文件的输出流
3.  将上传的数据从输入流复制到输出流

下面是一些伪代码，利用 Apache IOUtils 复制流数据：

```
final FormFile formFile = uploadForm.getFile();
final String outPath = "/somerootpath/" + formFile.getFileName();
final OutputStream outStream = new FileOutputStream(outPath);
IOUtils.copy(formFile.getInputStream(), outStream);
IOUtils.closeQuietly(outStream); 
```

# magento - Magento 地理位置和多个仓库。

> ID：10099850
> 
> 赞同：0
> 
> 时间：2012-04-11T04:33:43.477
> 
> 标签：magento, geolocation, multiple-databases

这是一个复杂的问题。因此，如果您喜欢解决棘手的问题，那么这种情况适合您。我正在经营一家出售轮胎的 Magento 商店。我从多个仓库获取轮胎。有些仓库有独特的轮胎，但许多仓库的轮胎与其他仓库的轮胎相同，但它们以不同的价格卖给我。

所有仓库都会在当地将我的轮胎运送给客户，所有仓库都会 UPS 将我的轮胎运送到任何地方。

这是问题所在。当客户购物时，他们会选择他们的轮胎。结果可能有来自许多仓库的几个相同的轮胎。他们需要能够从当地仓库中挑选一个，以便仓库可以用他们的卡车运送。

但是，如果当地仓库没有轮胎，那么客户可以使用 UPS。由于轮胎的运输成本很高，因此轮胎需要来自最近的仓库以进行 UPS 交付。

我试图想出最好的方法来设置目录并将其与这种独特的运输情况联系起来。按地理位置和多仓库购物。我希望每个仓库都有自己的数据库。如果没有，那么我将在每个 sku 上使用前缀。有任何想法吗？提前致谢。JJB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:55:14.543

## 按地理位置和多仓库购物。

1a 您应该[设置](http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/)多个网站。多个网站允许您在多个项目中拥有不同的库存。

1b 您也可以购买一些模块，让您的物品有多个库存。

2 我不知道你是否需要它，但是有这样的解决方案，比如 Apache 的 mod_geoip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:01:15.940

我在 Magento connect 中发现了[Multi-Warehouse](http://www.magentocommerce.com/magento-connect/multi-warehouse.html)自定义模块，这可能是一个解决方案。

# android - 如何使用 Android 中的 zxing 应用程序扫描 PDF 417 格式的条形码？

> ID：10099852
> 
> 赞同：3
> 
> 时间：2012-04-11T04:33:55.760
> 
> 标签：android, android-intent, zxing, barcode-scanner

如何扫描 PDF417 格式的条码？我需要传递意图附加信息吗？（注意：我的设备中已经安装了 Zxing 条码应用程序）。请帮我。这是我使用 Intent 从我的应用程序中使用 Zxing 条码扫描器的代码

```
 Intent intent = new Intent("com.google.zxing.client.android.SCAN");
 intent.setPackage("com.google.zxing.client.android");
 intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
 startActivityForResult(intent, MY_ACTIVITY_CONSTANT); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:45:03.820

“PRODUCT_MODE”永远不会起作用，因为 PDF417 不是产品条形码格式。您需要将“SCAN_FORMATS”设置为“PDF_417”。但是，您可能会发现通常难以扫描 PDF417。[Barcode Scanner+](https://play.google.com/store/apps/details?id=com.srowen.bs.android)将更好地阅读并响应这些意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-10T15:37:44.773

使用 mit 应用程序发明者 2，使用条形码扫描器对象，您可以做到这一点。

在设备中安装 ZXing 条码阅读器，然后转到配置并启用 pdf417 格式（默认禁用），然后使用外部条码阅读器下载或编程任何条码阅读应用程序。工作正常。

# email - 在 unix mailx 中使用 CC BCC 和发件人地址发送电子邮件

> ID：10099854
> 
> 赞同：10
> 
> 时间：2012-04-11T04:33:57.350
> 
> 标签：email, unix, mailx

我想使用 mailx 命令从 HP unix 发送电子邮件。我必须在我的电子邮件中包含 cc 和 bcc 并且必须使用特定的电子邮件地址作为发件人。

但是 -r （用于定义发件人的电子邮件地址）将禁用 ~ 命令，因此如果我必须定义发件人的电子邮件地址，我不能对 cc 和 bcc 使用 ~c 和 ~b 命令。

有什么解决办法吗？？？因为这些是用户的要求。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T17:52:38.963

只需将参数重新排序即可`mailx`。这将给出预期的结果

```
$ echo "something" | mailx -s "subject" -b bcc_user@some.com -c cc_user@some.com  -r sender@some.com recipient@example.com 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-25T07:13:58.640

在我的情况下，我必须`id`在 cc 中保留多个 '，这是通过将`email-id`' 逗号一一分开来完成的，如下所示：

```
$ echo -e "Hi Team, \n \n Action Needed \n \n Regards, \n XYZ team"| mailx -s "subject" -b bcc_user1@some.com,bcc_user2@some.com -c cc_user1@some.com,cc_user2@some.com -r sender@some.com receiver@xyz.com 
```

还利用该`echo`命令将多行传递给`mailx`实用程序。认为这会有所帮助。

# objective-c - 如何将 ASIHTTPRequest 添加到正在运行的 ASINetworkQueue？

> ID：10099861
> 
> 赞同：0
> 
> 时间：2012-04-11T04:34:34.293
> 
> 标签：objective-c, ios, asihttprequest

我一直在尝试使用 ASIHTTP 库触发多个下载请求。我可以开始第一个请求的下载...但是当我将另一个 ASIHTTPRequest 添加到队列中时，它没有下载..你能不能建议让下一个下载开始..

```
-(void)createNewDownloadRequestWithURL:(NSString *)videoURL andProgressIndicator:      (UIProgressView *)progressView andDelegate:(id)delegate
{
ASIHTTPRequest *request;
request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:videoURL]];
NSString * destFilePath = [[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"Videos"] stringByAppendingPathComponent:[videoURL lastPathComponent]];
[request setDownloadDestinationPath:destFilePath];
[request setDownloadProgressDelegate:progressView];
[request setAllowResumeForFileDownloads:YES];
[request setTemporaryFileDownloadPath:[NSString stringWithFormat:@"%@.download",destFilePath]];
[request setUserInfo:[NSDictionary dictionaryWithObjectsAndKeys:[videoURL lastPathComponent],@"name",delegate,@"delegate",nil]];
request.delegate = self;
request.tag = VIDEO_DOWNLOAD_REQUEST;
[networkQueue addOperation:request];

if(!isDownloadOn)
    [networkQueue go];
isDownloadOn = YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:39:23.100

做这个：

```
[networkQueue go]; 
```

代替：

```
if(!isDownloadOn)
    [networkQueue go];

isDownloadOn = YES; 
```

`[networkQueue go]`您应该在添加下载请求时调用。

# php - 这是 mysql_real_escape_string 的正常行为吗？

> ID：10099862
> 
> 赞同：2
> 
> 时间：2012-04-11T04:35:04.397
> 
> 标签：php, mysql

我刚刚禁用了magic_quotes_gpc，我注意到用户输入到我的数据库中有撇号，好像没有任何内容被转义。

```
($_POST['message'])="it's a test";
$string = mysql_real_escape_string(htmlentities($_POST['message'])); 
```

然后我将它插入数据库，数据库显示： `it's a test`

不应该是`it\'s a test`我申请之后`mysql_real_escape_string`吗？或者是数据库（在这里，使用 PHPMyAdmin）将它们翻译`\'`成`'`? 提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:40:46.797

转义 SQL 的目的是避免 SQL 注入。`INSERT INTO table VALUES ('it's a test') ..`会给您带来麻烦，但是当您逃避它时，它会变成`INSERT INTO table VALUES ('it\'s a test') ..`并且这将起作用并将“'it's a test'”插入到您的数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:41:53.060

mysql_real_escape_string() 只是转义字符以正确地将它们放入数据库。所以你不会在你的数据库中看到任何反斜杠。

由于mysql Doc（http://dev.mysql.com/doc/refman/5.1/en/string-literals.html#character-escape-sequences）：

```
That is, the escaped character is interpreted as if it was not escaped. For example, “\x” is just “x”. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:45:27.967

`INSERT INTO atable VALUES ('it\'s a test')`查询执行时

仅`"it's a test"`存储在您的数据库中:)

# php - 在 Yii gridview 分页中保留复选框值

> ID：10099867
> 
> 赞同：11
> 
> 时间：2012-04-11T04:35:23.540
> 
> 标签：php, ajax, pagination, yii

我有一个 gridview，其中包含一个复选框列，并且还使用分页。当我选中第一页中的一些复选框并导航到第二页并在第二页中选中另一个复选框时，我在第一页中选中的选项不会保留在那里。分页期间是否可以保留复选框值？

**Gridview 的代码是**

```
$widget = $this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'     => $model->search(),
    'cssFile'          => Yii::app()->baseUrl . '/media/js/admin/css/admingridview.css',
    //'filter' => $model,
    'ajaxUpdate'       => true,
    'enablePagination' => true,
    'columns'          => array(
        array(
            'name'   => 'id',
            'header' => '#',
            'value'  => '$this->grid->dataProvider->pagination->currentPage * $this->grid->dataProvider->pagination->pageSize + ($row+1)',
        ),
        array(
            'class'          => 'CCheckBoxColumn',
            'selectableRows' => '2',
            'header' => 'Selected',
        ),
        array(
            'name'   => 'fb_user_id',
            'header' => 'FaceBook Id',
            'value'  => 'CHtml::encode($data->fb_user_id)',
        ),
        array(
            'name'   => 'first_name',
            'header' => 'Name',
            'value'  => 'CHtml::encode($data->first_name)',
        ),
        array(
            'name'   => 'email_id',
            'header' => 'Email',
            'value'  => 'CHtml::encode($data->email_id)',
        ),
        array(
            'name'   => 'demo',
            'type'   => 'raw',
            'header' => "Select",
            'value'  => 'CHtml::checkBox("email[]","",array("class"=>"check","value"=>$data->email_id))',
        ),
    ),
)); 
```

**编辑：**

用于记住 gridview 中选定选项的扩展，请查看此链接[Selgridview](http://www.yiiframework.com/extension/selgridview)

感谢***[bool.dev](https://stackoverflow.com/users/720508/bool-dev)***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T15:55:07.480

您可以使用会话/cookie 来存储检查的值。我不太确定如何使 cookie 工作，所以我会告诉你如何使用会话来做到这一点。特别是 yii 创建的用户会话。

现在要使用会话，我们需要将选中（和未选中）的 id 传递给控制器​​，因此我们将在每次 ajax 更新（即分页之间）时修改发送到控制器的数据，为此我们利用[CGridView](http://www.yiiframework.com/doc/api/1.1/CGridView#beforeAjaxUpdate-detail "http://www.yiiframework.com/doc/api/1.1/CGridView#beforeAjaxUpdate-detail")`beforeAjaxUpdate`的选项.

我还在您的代码中使用[CCheckBoxColumn](http://www.yiiframework.com/doc/api/1.1/CCheckBoxColumn "http://www.yiiframework.com/doc/api/1.1/CCheckBoxColumn") **而不是**以下代码（当然您可以修改解决方案以满足您自己的需要）：

```
array(
     'name' => 'demo',
     'type'=>'raw',
     'header' => "Select",
     'value' => 'CHtml::checkBox("email[]","",array("class"=>"check","value"=>$data->email_id))',
), 
```

### 网格视图更改：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    // added id of grid-view for use with $.fn.yiiGridView.getChecked(containerID,columnID)
    'id'=>'first-grid',

    'dataProvider'=>$model->search(),
    'cssFile' => Yii::app()->baseUrl . '/media/js/admin/css/admingridview.css',

    // added this piece of code
    'beforeAjaxUpdate'=>'function(id,options){options.data={checkedIds:$.fn.yiiGridView.getChecked("first-grid","someChecks").toString(),
        uncheckedIds:getUncheckeds()};
        return true;}',

    'ajaxUpdate'=>true,
    'enablePagination' => true,
    'columns' => array(
            array(
                 'name' => 'id',
                 'header' => '#',
                 'value' => '$this->grid->dataProvider->pagination->currentPage * $this->grid->dataProvider->pagination->pageSize + ($row+1)',
            ),
            array(
                 'name' => 'fb_user_id',
                 'header' => 'FaceBook Id',
                 'value' => 'CHtml::encode($data->fb_user_id)',
            ),
            array(
                 'name' => 'first_name',
                 'header' => 'Name',
                 'value' => 'CHtml::encode($data->first_name)',
            ),
            array(
                 'name' => 'email_id',
                 'header' => 'Email',
                 'value' => 'CHtml::encode($data->email_id)',
            ),

            /* replaced the following with CCheckBoxColumn
              array(
                 'name' => 'demo',
                 'type'=>'raw',
                 'header' => "Select",
                 'value' =>'CHtml::checkBox("email[]","",array("class"=>"check","value"=>$data->email_id))',
              ),
            */

            array(
                 'class' => 'CCheckBoxColumn',
                 'selectableRows' => '2',
                 'header'=>'Selected',
                 'id'=>'someChecks', // need this id for use with $.fn.yiiGridView.getChecked(containerID,columnID)
                 'checked'=>'Yii::app()->user->getState($data->email_id)', // we are using the user session variable to store the checked row values, also considering here that email_ids are unique for your app, it would be best to use any field that is unique in the table
            ),
    ),
));
?> 
```

特别注意 CCheckBoxColumn 的代码`beforeAjaxUpdate`，在 beforeAjaxUpdate 中，我们将`checkedIds`所有已检查的 ids（在本例中为 email_ids）`uncheckedIds`的 csv 字符串作为所有未检查 id 的 csv 字符串传递，我们通过调用一个函数`getUncheckeds()`，它紧随其后。请注意，当我在测试时，我使用了一个整数 id 字段（我的表）作为唯一字段，而不是电子邮件字段。

该`getUncheckeds()`函数可以像这样在gridview的视图文件中的任何位置注册：

```
Yii::app()->clientScript->registerScript('getUnchecked', "
       function getUncheckeds(){
            var unch = [];
            /*corrected typo: $('[name^=someChec]') => $('[name^=someChecks]') */
            $('[name^=someChecks]').not(':checked,[name$=all]').each(function(){unch.push($(this).val());});
            return unch.toString();
       }
       "
); 
```

在上面的函数中注意选择器和`each`和`push`函数。

完成后，我们需要修改该视图的控制器/动作。

```
public function actionShowGrid(){
     // some code already existing
     // additional code follows
     if(isset($_GET['checkedIds'])){
          $chkArray=explode(",", $_GET['checkedIds']);
          foreach ($chkArray as $arow){
               Yii::app()->user->setState($arow,1);
          }
     }
     if(isset($_GET['uncheckedIds'])){
          $unchkArray=explode(",", $_GET['uncheckedIds']);
          foreach ($unchkArray as $arownon){
               Yii::app()->user->setState($arownon,0);
          }
     }
     // rest of the code namely render()
} 
```

就是这样，它现在应该可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:39:07.930

要开发该方案，您需要了解导航时发生的情况。

当您导航到分页页面时，会进行 ajax 调用并接收到新数据并从 CActive Record 或任何数据源中获取。新数据是根据数据库记录或源记录。当您再次返回上一页时，将进行 Ajax 调用并更新内容，因此与数据库中的内容相同。

我觉得你应该暂时保存检查项目的数据，如果采取行动，则将其永久保存。

你可以做这样的事情

```
<script type="text/javascript">
$("input:checkbox").click(function () {
    var thisCheck = $(this);
    if (thisCheck.is (':checked')){
        // do what you want here, the way to access the text is using the
        // $(this) selector. The following code would output pop up message with
        // the selected checkbox text
        $(this).val());
    }
});
</script> 
```

您可以在某处保存临时存储空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T11:25:04.743

**也可以在普通表单提交上进行这项工作：**

我想将此添加为对 bool.dev 答案的评论，但我还没有足够的声誉来做到这一点。所以我不得不把它放在一个单独的答案中。

bool.dev，你的回答很好，效果很好，thanx。

但是，正如预期的那样，它仅在 ajax 调用更新 gridview 时才有效。我有 gridview 构成表单的一部分，所以我希望它也可以正常提交表单，否则当表单上存在其他验证错误时，不会再次加载复选框。

因此，除了您所做的之外，我在表单上添加了隐藏字段，例如：

```
<input type="hidden" name='checkedBox1' id='checkedBox1' value=''>
<input type="hidden" name='uncheckedBox1' id='uncheckedBox1' value=''> 
```

然后，在提交表单之前，我的 sumbit 按钮运行您的 getChecked() 和 getUncheckeds() 函数并将它们的结果存储在隐藏字段中：

```
if ($('#checkedBox1').length >0)   {$('[name=checkedBox1]').val(getChecked());}
if ($('#uncheckedBox1').length >0) {$('[name=uncheckedBox1]').val(getUncheckeds());} 
```

在控制器中，除了检查 $_GET['checkedIds'] 之外，您还检查 $_POST['checkedBox1'] 并将其值存储到会话中，就像检查 $_GET['checkedIds'] 一样，使用相同的会话变量。

对 $_POST['uncheckedBox1'] 执行相同的操作。

那应该行得通。

# php - 缓存css以更新facebook中的样式

> ID：10099868
> 
> 赞同：0
> 
> 时间：2012-04-11T04:35:25.613
> 
> 标签：php, facebook

`Parse error: syntax error, unexpected '?'`错误指向“.css之后”：

```
echo '<fb:recommendations bordercolor="'.$bordercolor.'" colorscheme="'.$colorscheme.'" recommendations="'.$recommTxt.'" height="'.$height.'" width="'.$width.'" header="'.$header.'" site="'.$site.' " css="'.'"<?php bloginfo( 'stylesheet_url' ); ?>/style.css?2"></fb:recommendations>'; 
```

我正在尝试对 fb 推荐框进行一些样式更改，因此 css 文件的完整路径不可行，因为文件将移动到具有不同域的不同服务器..

我可能忽略了单引号或双引号？我对这些不好..

你能指出/指导我纠正吗？谢谢你

**编辑#2**

```
css="'.'"<?php bloginfo( 'stylesheet_url' ); ?>/style.css?2" 
```

它已更新，但在萤火虫上我看到：

```
<fb:recommendations class=" fb_iframe_widget " clear"="" css="http://xxx.com/wp-content/themes/xxx/facebook.css?2></fb:recommendations></div> </div><!--/sidebar--> <div class=" site="xxx.com " header="false" width="245" height="" recommendations="true" colorscheme="White" bordercolor="#fdbc88"> 
```

很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:03:51.107

将其更改为：

```
css="'. bloginfo( 'stylesheet_url' ) . '/style.css?2" 
```

只要它已经是一个 php 代码 - 你不应该指定`<?php`

# ruby-on-rails - 更改 Bootstrap SASS 边界半径（和其他混合） - Rails

> ID：10099869
> 
> 赞同：4
> 
> 时间：2012-04-11T04:35:50.593
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass

我正在使用rails gem Bootstrap SASS，并且想知道如何覆盖一些mixin。具体边界半径等。

我以为我可以像这样简单地覆盖它：

```
@import "bootstrap";
@import "bootstrap-responsive";

    @mixin border-radius($radius: 1px) {
      -webkit-border-radius: $radius;
         -moz-border-radius: $radius;
              border-radius: $radius;
    } 
```

但这似乎并不适合深蹲！有任何想法吗？

[引导 SASS - 混合](https://github.com/thomas-mcdonald/bootstrap-sass/blob/master/vendor/assets/stylesheets/bootstrap/_mixins.scss)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T07:49:28.793

这实际上是一个带有参数的 mixin，SASS 称它为“mixin”，但它实际上是一个参数或动态的 mixin。但是为了澄清您的问题，您是要更改边界半径 mixin 半径的**默认**值，还是要逐个班级动态地进行更改？如果您希望更改默认值，您应该直接在 Bootstrap mixin.scss 文件中进行。

但是，如果您想要后者，您只需将 mixin 添加到任何类中，就像添加诸如 font-size 之类的属性一样，但是您每次使用 mixin 时都会传入您希望声明的值。像这样：

```
.giant-box {  
   width: 400px;
   height: 400px;
   background-color: #900;
   @include border-radius(20px);  
}

.small-box {  
   width: 10px;
   height: 10px;
   background-color: #900;
   @include border-radius(3px);  
} 
```

在 LESS 中，它看起来像这样：

```
.giant-box {  
   width: 400px;
   height: 400px;
   background-color: #900;
   .border-radius(20px);  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-18T08:42:03.147

检查Bootstrap 站点上的自[定义和下载](http://getbootstrap.com/customize/)页面。页面上列出了 LESS 变量列表。

通常 SASS 变量是相同的，但使用 '$' 而不是 '@'。要自定义引导程序而无需在更改一两个变量后重新下载所有内容，您可以在 .scss 文件中执行此操作：

```
$border-radius-base: 0;
@import "bootstrap"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T01:30:50.907

如果要覆盖 Bootstrap 变量，则需要在导入之前进行。例如

```
$baseFontFamily: $serifFontFamily; // Use serif fonts instead of sans-serifs
@import "bootstrap";
@import "bootstrap-responsive"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-27T01:58:18.197

这对游戏来说特别晚，但在 Bootstrap 4 中，您可以`enable-rounded`像这样覆盖 Sass 变量：

```
@enable-rounded    false;
@import "~bootstrap/scss/bootstrap" /*lots of ways to do this step, see other answers herein*/ 
```

[引导 Sass 选项文档](https://getbootstrap.com/docs/4.1/getting-started/theming/#sass-options)

# php - Codeigniter -> 图片上传第 2 部分 -> 多张图片

> ID：10099871
> 
> 赞同：0
> 
> 时间：2012-04-11T04:36:08.003
> 
> 标签：php, image, codeigniter, image-upload

我正在尝试创建一个多图像上传器，我遇到了这个[链接](http://taggedzi.com/articles/display/multiple-file-uploads-using-codeigniter)。我对下面的代码感到困惑，链接是我必须有 2

`$this->upload->do_upload();`运行我的代码的函数或如何使用

`$this->upload->initialize($config);`在以下情况下？

**代码：**

```
//Image Upload Function

$conceptOne = 'conceptOne';
$conceptTwo = 'conceptTwo';

$location = $_SERVER['DOCUMENT_ROOT'].'/_assets/quote/uploads/';

$folderName = $this->quote->getCompanyDetails()->companyName;
$folderName = str_replace(" ", "_", $folderName);
$folderName = strtolower($folderName);

if(!is_dir($location.$folderName))
{   
    mkdir($location.$folderName);
    chmod($location.$folderName, 0777);

    //Set File Settings 
    $config['upload_path'] = $location.$folderName; 
    $config['allowed_types'] = 'jpg|png|pdf'; 
    $config['file_name'] = $conceptOne;
    $config['remove_spaces'] = TRUE;
    $config['overwrite'] = TRUE;
    $config['max_size'] = '1024'; 
    $config['max_width'] = '1024'; 
    $config['max_height'] = '768'; 

    $this->load->library('upload', $config); 

    print_r($config);

    if(!$this->upload->do_upload($conceptOne)) { #= try upload
        $data['uploadError'] = array('uploadError' => $this->upload->display_errors()); #Error
        $this->load->view('layout', $data);
    } // Do upload
    else{
        $data = array('upload_data' => $this->upload->data($conceptOne));
    }// end else
}// end if folder 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T04:55:54.187

您需要一个循环来重新初始化文件上传库，以便您可以处理用户上传的其他一些图像。

假设用户上传了 2 张图片。那么这意味着您需要将初始化文件上传库的代码并在该循环中进行文件上传。

```
for ($i = 0; $i < 2; $i++)
{
     // Change the config here if necessary
     $this->upload->initialize($config);
     // Call do_upload() here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T05:11:05.813

Kemal 是对的：您必须遍历您拥有的文件。我会将“概念”放在一个数组中，这样您就可以使用`foreach`：

```
// Load upload library without any configuration
$this->load->library('upload');

$concepts = array('conceptOne','conceptTwo');

$location = $_SERVER['DOCUMENT_ROOT'].'/_assets/quote/uploads/';

$folderName = $this->quote->getCompanyDetails()->companyName;
$folderName = str_replace(" ", "_", $folderName);
$folderName = strtolower($folderName);

if(!is_dir($location.$folderName))
{   
    mkdir($location.$folderName);
    chmod($location.$folderName, 0777);
}

$config['upload_path'] = $location.$folderName;
$config['allowed_types'] = 'jpg|png|pdf';
$config['remove_spaces'] = TRUE;
$config['overwrite'] = TRUE;
$config['max_size'] = '1024';
$config['max_width'] = '1024';
$config['max_height'] = '768';

// Upload 'concepts'
foreach($concepts as $concept)
{
    $config['file_name'] = $concept;
    $this->upload->initialize($config);
    $this->upload->do_upload($concept);
}

// Upload logo
$config['file_name'] = 'logo-filename.gif';
$this->upload->initialize($config);
$this->upload->do_upload('logo'); 
```

# java - 从 JAVA 中的 PHP 脚本获取数据

> ID：10099872
> 
> 赞同：0
> 
> 时间：2012-04-11T04:36:23.583
> 
> 标签：java, php, sql, soap

我对 Android 编程相当陌生，想知道如何在我的 Android 应用程序中从 SQL 数据库中获取数据。

我目前有一个 PHP 脚本，可以从 SQL 表中提取我想要的数据，但我不确定如何将 PHP 脚本中的数据提取到我的 Java 中。我该怎么做呢？我读过一些关于 SOAP 的东西。这是我要使用的协议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:40:25.207

这取决于。数据库在哪里，在设备上还是在服务器上？如果它在服务器上，PHP 代码是否已经是一个 Web 应用程序，还是只是一个脚本？

一般来说，如果数据库在设备上，扔掉 PHP 并使用 JDBC 直接从 Java 中抓取数据。如果数据在服务器上，则将 PHP 脚本转换为 Web 应用程序，并从 Java 访问该 Web 应用程序。SOAP 无疑是您可以为此使用的一种协议，尽管它是一种复杂的协议，而且往往过于矫枉过正。JSON 或纯文本是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:38:46.393

您可以使用下面的函数从您的 PHP 脚本中获取内容

```
 public static String get(String from) {
        try {
            HttpClient client = new DefaultHttpClient();  
            HttpGet get = new HttpGet(from);
            HttpResponse responseGet = client.execute(get);  
            HttpEntity resEntityGet = responseGet.getEntity();  
            if (resEntityGet != null) return EntityUtils.toString(resEntityGet);
        } catch (Exception e) {
            Log.e("", e.toString());
        }
        return null;
    } 
```

# asp.net-mvc-3 - 如何通过远程变量从深层关系中返回包含相关数据的查询？

> ID：10099874
> 
> 赞同：0
> 
> 时间：2012-04-11T04:37:05.507
> 
> 标签：asp.net-mvc-3, linq

我正在开发一个包含 5 个表的项目：

* * *

This-->ThisThat<--That-->ThatFoo<--Foo

我已经通过 asp.net Entity Framework 中的模型定义了表关系：

'This' 包含列：ThisID(PK)、Name。

“ThisThat”包含列：ThisThatID(PK)、ThisID(FK)、ThatID(FK)。

'That' 包含列：ThatID(PK)、Name。

“ThatFoo”包含列：ThatFooID(PK)、ThatID(FK)、FooID(FK)。

* * *

好的，所以我有“FooID”，我需要获取相关“ThisThat”的列表。

这是我尝试过的：

```
int FooID = 1;
IEnumerable<int> thatIDs = db.ThatFoo.Where(tf=>tf.FooID == FooID).ToList();
IEnumerable<ThisThat> thisthats = db.ThisThat.Where(tt=>tt.ThatID == thatIDs).ToList(); 
```

和：

```
IEnumerable<ThisThat> thisthat = db.ThisThat.Include(p=>p.That.ThatFoo.Where(x=>x.FooID == FooID)).ToList(); 
```

我也玩过.Select 和.SelectMany。我用谷歌搜索了各种各样的东西，但我没有找到任何与我的情况有关的东西。

我不太确定还有什么可以尝试的……建议（请并感谢您的阅读）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:58:23.937

尝试

```
IEnumerable<ThisThat> thisthats = db.ThisThat
     .Where(tt=>tt.That.ThatFoos.Any(tf =>tf.FooID == FooID)).ToList(); 
```

# java - 运行soapui生成的axis2代码

> ID：10099880
> 
> 赞同：1
> 
> 时间：2012-04-11T04:37:49.467
> 
> 标签：java, soap

我正在使用soapui 来生成我的axis2 java 代码。现在我有一个 build.xml 和一个 java 文件。如何将 ths 作为独立的 java 应用程序运行。我应该使用什么ide以及如何编译这段代码（如果我直接将这段代码粘贴到netbeans中，我必须添加很多jar。即使在这之后找不到一些类，我也无法编译它）。我需要添加什么外部罐子。有没有这方面的好教程。也有人知道将 wsdl url 转换为 javastandalone 代码以查询 Web 应用程序的任何简单方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:04:27.143

您可以将 Ant 项目作为自由格式项目导入 NetBeans。

[NetBeans 自由形式项目](http://netbeans.org/kb/docs/java/project-setup.html#free-form)

如果您喜欢冒险，可以手动将您的 Ant 项目转换为 Maven

[将 Ant 项目转换为 Maven](https://stackoverflow.com/questions/4029501/how-to-convert-ant-project-to-maven-project)

有许多工具可以从 WSDL 生成 Java 代码。大多数现代 IDE 都有用于此目的的内置插件（Eclipse、NetBeans、IDEA]。由于您使用的是 Axis2，因此您也可以使用`wsdl2java`命令行工具。

[轴 2：从 WSDL 创建客户端代码](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html)

# wordpress - Wordpress 儿童主题或插件？

> ID：10099882
> 
> 赞同：0
> 
> 时间：2012-04-11T04:38:06.003
> 
> 标签：wordpress, wordpress-theming

我有一个客户想要在他的 Wordpress 网站上添加一个自定义表单作为页面。他的网站正在使用“Genesis”框架，并且已经在使用“Manhattan”子主题。我可以从曼哈顿目录中将表单创建为页面模板，但如果它们更新，更改将会丢失。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:58:39.733

我建议你把它做成一个带有简码的插件[，](http://codex.wordpress.org/Shortcode_API)这样你就可以在你想要的每个页面上使用它。甚至帖子（不使用模板）

您还可以查看表单插件，如果您不需要高级表单，这很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:46:23.543

只要您将模板放在Manhattan 目录中——假设您没有将该目录放在Genesis 目录中——就不会在更新Genesis 主题时出现覆盖写入问题。子主题不必在父主题的目录中，事实上，它们不是——它们必须在 /themes 目录中。见，[http://codex.wordpress.org/Child_Themes](http://codex.wordpress.org/Child_Themes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-12T22:29:13.510

这是一个非常复杂的形式？如果您将自定义模板添加到现有主题，您可能会在更新主题时丢失更改。

*   如果是一个简单的表格，我会使用像联系表格 7 或火山口表格这样的插件。

*   如果没有（或者您不想使用 wp.org 插件），您可以创建自己的插件并注册一个简码，您可以在插件中编写所有表单功能并在 WP 编辑器中使用简码。

这样您就不会因为主题升级而失去功能的任何风险

# c# - 如何在 Windows Phone 上合并 2 个图像

> ID：10099885
> 
> 赞同：5
> 
> 时间：2012-04-11T04:38:29.717
> 
> 标签：c#, .net, windows-phone-7, bitmapimage, writeablebitmap

我有 2 张图像，我想在 Windows Phone 的应用程序中将它们合并为一张。

我的 WP 相机拍摄的第一张图像，第二张图像是用户可以在我们的模板中选择的框架（边框、滤镜等）。那么如何将它们合并为一个。

谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T05:02:14.090

我不太明白你问什么。但我想您想将 1 张图像叠加在另一张图像之上。如果是这样，这里已经有答案[了](https://stackoverflow.com/a/9677987/476917)。在 中`<grid>`，您可以同时提供图像，并自定义每个图像的不透明度以使其叠加。

**已编辑：** 您可以为此使用 Writeablebitmap ，并且这里已经有一个[库](http://writeablebitmapex.codeplex.com/)。在您的 WP7 项目中添加 WriteableBitmapExWinPhone 后，您可以通过执行以下操作合并图像和框架：

```
 var photo = ...//you writeablebitmap of image here
    var frame = ...//your writeablebitmap of frame here
    var merge = new WriteableBitmap(435, 435); //size of merge canvas
    merge .Clear(Colors.White); //white background
    merge.Blit(new Rect(oX, oY, w, h), photo, new Rect(0, 0, photo.PixelWidth,        photo.PixelHeight)); //draw the photo first
    merge.Blit(new Rect(0, 0, 435, 435), frame, new Rect(0, 0, frame.PixelWidth,        frame.PixelHeight)); //draw the frame 
```

# java - Android 编程：Intent.getExtras() 似乎以某种方式停止了方法中的执行流程

> ID：10099891
> 
> 赞同：3
> 
> 时间：2012-04-11T04:39:21.463
> 
> 标签：java, android

我在搞乱 Android SDK，并注意到在接收 SMS 消息的示例之一中，onReceive 的执行从未超过 Intent.getExtras()。可以肯定的是，我在该行之前和之后添加了日志，并且在执行 getExtras 之后没有日志。Android 模拟器版本为 4.0.3。谁能指出这段代码中我没有看到的一些缺陷，或者为这个看似随机且令人沮丧的问题提供解决方法或解决方案？

```
public class SmsReceiver extends BroadcastReceiver 
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Log.i("smsreceiver", "Intent: " + intent.getAction()); //Shows up in LogCat normally
        Bundle bundle = intent.getExtras();
        Log.i("smsreceiver", "after"); //this is never reached, and nothing after this is executed

        Object messages[] = (Object[]) bundle.get("pdus");
        SmsMessage smsMessage[] = new SmsMessage[messages.length];
        for (int n = 0; n < messages.length; n++) 
        {
            smsMessage[n] = SmsMessage.createFromPdu((byte[])messages[n]);

        }
        Log.i("smsreceiver", "Message: " + smsMessage[0].getMessageBody());

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:15:00.670

我会在调试器下运行你的应用程序，并让它像你提到的那样“挂起”，然后手动闯入应用程序，看看执行在哪里。这可能会提示您可能是什么原因。

为了获得奖励积分，您可以将 IDE 设置为能够解析框架源代码，然后实际调试到 getExtras() 调用中，以找出问题所在。

# java - Java Slick2d - 如何将鼠标坐标转换为世界坐标

> ID：10099895
> 
> 赞同：0
> 
> 时间：2012-04-11T04:39:53.930
> 
> 标签：java, mouse, coordinates, slick2d

我正在翻译我的主要课程的渲染。如何根据翻译获得鼠标位置？

```
public void render(GameContainer gc, Graphics g) 
        throws SlickException 
{
    float centerX = 800/2;
    float centerY = 600/2;
    g.translate(centerX, centerY);
    g.translate(-player.playerX, -player.playerY);
    gen.render(g);
    player.render(g);
}

playerX = 800 /2 - sprite.getWidth();
playerY = 600 /2 - sprite.getHeight(); 
```

我通过 .2f * delta 更新 keydown 上的玩家位置

***图片帮助解释***

i92.photobucket.com/albums/l22/occ31191/Untitled-4.png

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:05:02.087

世界坐标=相机位置+鼠标位置

在我对这个问题的回答中计算/解释了相机位置：[Slick2D 和 JBox2D。如何绘制](https://stackoverflow.com/questions/9997006/slick2d-and-jbox2d-how-to-draw/10013128#10013128)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:43:10.807

您正在制作一个基于图块的游戏，其中每个图块似乎具有相同的大小。对于这种情况，您不需要广义的非投影。

想象一下完整的地图。视口只显示了它的一部分；您需要将`(x,y)`视口的偏移量存储到完整地图中的某个位置。由于鼠标坐标是相对于视口的，因此您需要将此偏移量添加到鼠标坐标上。现在，您可以通过对移动的鼠标坐标与图块的宽度和高度进行模运算轻松获得图块坐标。

实际上，这是从窗口坐标到*平铺*坐标的坐标变换。

# joomla - 如何在 Joomla 1.7 中隐藏文章详细信息？

> ID：10099898
> 
> 赞同：0
> 
> 时间：2012-04-11T04:40:21.760
> 
> 标签：joomla

如何在 Joomla 1.7 中隐藏文章详细信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:48:36.620

菜单管理器 > 分类 > 文章 > 文章选项 >

从那里您可以隐藏作者、日期等内容。

# oop - 良好的面向对象类设计，用于游戏开发中的碰撞检测

> ID：10099900
> 
> 赞同：19
> 
> 时间：2012-04-11T04:40:27.813
> 
> 标签：oop, collision-detection

我想学习如何为游戏开发中两个对象之间的碰撞情况创建良好的面向对象 (OO) 设计实践。

假设我有一个 SpaceShip 类和一个 Meteor 类。当 Meteor 与 SpaceShip 相撞时，SpaceShip 将被摧毁。

问题：流星与飞船是否发生碰撞的方法以及碰撞解决方法（摧毁飞船）应该放在什么类？是在 SpaceShip 类还是 Meteor 类？或者，也许我应该上另一堂课，即。GameArea 或 GameController 类？

注意：为简单起见，假设 Meteor 和 SpaceShip 是图像资源的形式。我习惯使用Java语言，但其他语言也可以。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T21:56:22.037

更自然地认为碰撞检测是不属于 Spaceship 或 Meteor 类的职责。尤其是当这变得复杂时，在不同方向有多种碰撞可能性。如果你把这个逻辑放在这两个类中，它们将需要引用它们周围的许多其他对象，这是不合适的。

您可以将它放在一个单独的类上，例如**CollisionDetector**，它跟踪游戏空间中所有对象的坐标并检测碰撞。在我看来，防撞似乎也是一项单独的责任，应该属于不同的类别。您可以为此设置一个单独的类**CollisionResolver**。根据要求，**CollisionDetector**可以与**CollisionResolver**对话。

**CollisionResolver**可能需要能够与 Spaceships 对话，以便建议它们改变方向或命令向 Meteor 发射导弹。

**CollisionDetector**和**CollisionResolver**可以位于**GameSpace** /* *GameController* * 中。ETC..

这将促进**[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)**，因此每个组件将只执行一项重点任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T08:05:05.390

在我看来，碰撞检测不是对象的一部分......它应该被定义为其他东西 - 一些物理管理器等。这样你的对象将独立于碰撞算法。

另一件事是，在游戏中，对象通常由几个层（组件）组成：图形层、物理层、逻辑层。这样物理管理器只管理给定对象的物理组件。

```
class GameObject 
{
    RenderComponent  m_renderComponent;
    LogicComponent   m_aiComponent;
    PhysicsComponent m_physicsComponent;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T04:54:10.720

好吧，我通常创建一个（有时是通用的）`GameObject`类或接口，它有一个碰撞方法。例如：

```
template< typename T = int > class GameObject
{
public:
    bool collides(const GameObject& obj);
};

// usage
GameObject<int> my_obj, your_obj;
if(my_obj.collides(your_obj)) { ... }; 
```

我有时（但很少）做的另一件事是创建一个单独的`GamePhysics`类：

```
template< typename T > class GamePhysics
{
public:
    /* you may make this static or the class a singleton */
    void detect_collision(const T& obj, const T& obj2);
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T23:18:35.490

在 Java（或任何其他 OO 语言）中，我会在游戏中所有移动对象的公共祖先类中放置一个**CollisionDetected 回调/事件**。

这是对游戏的简化描述：

*   在游戏中，通常有一个**游戏循环**。游戏循环就像一个持续运行的*while(true)*循环（有点像应用程序的主 UI 线程），并且在每一步都检查对象发生了什么变化，应该更新什么以及应该调用什么事件（和更多...）。

*   为了响应，这个循环应该每秒循环很多次。

*   在这个循环中，**物理引擎**对象应该不断更新它的状态。这将是一个独立类的实例对象。正是这个引擎应该检测对象之间的碰撞并在所有碰撞的对象上调用 CollisionDetected 事件。

这是一个想法，而不是最终的解决方案...

# javascript - jQuery Isotope 切换内容

> ID：10099907
> 
> 赞同：0
> 
> 时间：2012-04-11T04:41:05.063
> 
> 标签：javascript, jquery, sorting, jquery-isotope

我有大量的文章标题，每个标题都有一个根据来源的类名。当网站加载时，所有标题都会显示。来源列在页面顶部，我希望 Isotope 在单击时显示或隐藏每个来源，以便用户可以选择他们喜欢的来源。

就目前而言，我可以将它们删除，但我不确定如何让它们再次出现。

```
jQuery(function($){
    var $container = $('.isotope-box');
    $container.isotope({
    masonry: {
        columnWidth: 333,
        cornerStampSelector: '.corner-stamp'
    },
    itemSelector: '#headlines'
});

// filter items when filter link is clicked
$('#filters a').click(function(){
    $(this).toggleClass("active");
    var selector = $(this).attr('data-filter');
    var $removable = $container.find( selector );
    $container.isotope( 'remove', $removable );
    jQEvent.preventDefault();
});

$('#filters a.active').click(function(){
    $(this).toggleClass("active");
    var selector = $(this).attr('data-filter');
    var $addition = $container.find( selector );
    $container.isotope( 'insert', $addition );
    jQEvent.preventDefault();
    });
}); 
```

我猜问题出在我的“插入”代码上，但我不确定它应该如何工作。我也在使用无限滚动，我需要使用相同的过滤器显示新添加的页面。

请帮忙！

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:33:25.380

你可以过滤掉不需要的同位素元素，不是吗？过滤类将是您的来源（nyt、wsj、wp、...）。如果你 .remove() 它们，你将它们从 DOM 中删除！请参阅[过滤文档](http://isotope.metafizzy.co/docs/filtering.html)，但也许我没有完全理解您的问题？

# xpages - 自定义扩展库中的 NamePicker

> ID：10099909
> 
> 赞同：0
> 
> 时间：2012-04-11T04:41:36.560
> 
> 标签：xpages

我想使用扩展库中的 NamePicker 从视图中选择多个客户。

```
<xe:namePicker id="namePicker1" for="customers">
  <xe:this.dataProvider>
    <xe:dominoViewNamePicker
       labelColumn="IdName" viewName="viewCustomers">
    </xe:dominoViewNamePicker>
  </xe:this.dataProvider>
</xe:namePicker> 
```

该视图有两列： 1\. CustId - 客户 ID 2\. IdName - 客户 ID + “-” + 客户名称

NamePicker 在左侧框中显示 IdName，在右侧框中显示所选客户的 CustId。

是否可以更改 NamePicker 在右侧框中显示的内容？除了显示选定客户的 CustId 之外，我还想显示客户的姓名。

是否可以自定义搜索功能？在我看来，现在您只能搜索与视图中第一列的开头匹配的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:16:21.323

绝对地。扩展库 (Extlib) 的伟大之处在于它是开源的。但是，如果您正在寻找“是的，只需设置此属性即可完成”的快速解决方案......好吧......恐怕它并不那么容易。但是，您可以编写自己的组件，从 Extlib 扩展组件，然后添加/覆盖您想要自定义的功能。

总而言之，是的，它是可能的，但它不像更改控件上的某些属性那么容易。

# c++ - C++ 范围错误

> ID：10099913
> 
> 赞同：1
> 
> 时间：2012-04-11T04:42:01.133
> 
> 标签：c++

我有以下代码：

```
#include <iostream>
#include "Student.h" <-- fixed the problem
#include "SortedList.h" <-- fixed the problem

using namespace std;

int main() {
    // points to the sorted list object
    SortedList *list = new SortedList;   //This is line 17

    // array to hold 100 student objects
    Student create[100];

    int num = 100000;   // holds different ID numbers

    // fills an array with 100 students of various ID numbers
    for (Student &x : create) {
        x = new Student(num);
        num += 100;
    }

    // insert all students into the sorted list
    for (Student &x : create)
        list->insert(&x);

    delete list;
    return 0;
} 
```

而且我不断收到编译时错误：

```
main.cpp: In function ‘int main()’:
main.cpp:17: error: ‘SortedList’ was not declared in this scope
main.cpp:17: error: ‘list’ was not declared in this scope
main.cpp:17: error: expected type-specifier before ‘SortedList’
main.cpp:17: error: expected `;' before ‘SortedList’
main.cpp:20: error: ‘Student’ was not declared in this scope
main.cpp:20: error: expected primary-expression before ‘]’ token
main.cpp:20: error: expected `;' before ‘create’
main.cpp:25: error: expected `;' before ‘x’
main.cpp:31: error: expected primary-expression before ‘for’
main.cpp:31: error: expected `;' before ‘for’
main.cpp:31: error: expected primary-expression before ‘for’
main.cpp:31: error: expected `)' before ‘for’
main.cpp:31: error: expected `;' before ‘x’
main.cpp:34: error: type ‘&lt;type error>’ argument given to ‘delete’, expected pointer
main.cpp:35: error: expected primary-expression before ‘return’
main.cpp:35: error: expected `)' before ‘return’ 
```

我的 Student.cpp 和 SortedList.cpp 文件编译得很好。它们都还包括 .h 文件。我只是不明白为什么我在那条线上出现错误。不过，这似乎是一个小问题。任何见解将不胜感激。

UPDATE1：我最初包含 .h 文件，但在试图找出错误原因时我更改了它。但是，包含的 .h 文件仍然存在错误。

更新2：

**排序列表.h**

```
#ifndef SORTEDLIST_H
#define SORTEDLIST_H

#include "Student.h"

/*
 * SortedList class
 *
 * A SortedList is an ordered collection of Students.  The Students are ordered
 * from lowest numbered student ID to highest numbered student ID.
 */
class SortedList {

  public:

    SortedList();
    // Constructs an empty list.

    SortedList(const SortedList & l);
    // Constructs a copy of the given student object

    ~SortedList();
    // Destructs the sorted list object

    const SortedList & operator=(const SortedList & l);
    // Defines the assignment operator between two sorted list objects

    bool insert(Student *s);
    // If a student with the same ID is not already in the list, inserts 
    // the given student into the list in the appropriate place and returns
    // true.  If there is already a student in the list with the same ID
    // then the list is not changed and false is returned.

    Student *find(int studentID);
    // Searches the list for a student with the given student ID.  If the
    // student is found, it is returned; if it is not found, NULL is returned.

    Student *remove(int studentID);
    // Searches the list for a student with the given student ID.  If the 
    // student is found, the student is removed from the list and returned;
    // if no student is found with the given ID, NULL is returned.
    // Note that the Student is NOT deleted - it is returned - however,
    // the removed list node should be deleted.

    void print() const;
    // Prints out the list of students to standard output.  The students are
    // printed in order of student ID (from smallest to largest), one per line

  private:

    // Since Listnodes will only be used within the SortedList class,
    // we make it private.
    struct Listnode {    
      Student *student;
      Listnode *next;
    };

    Listnode *head; // pointer to first node in the list

    static void freeList(Listnode *L);
    // Traverses throught the linked list and deallocates each node

    static Listnode *copyList(Listnode *L);
    // Returns a pointer to the first node within a particular list
};

#endif 
```

**学生.h**

```
#ifndef STUDENT_H
#define STUDENT_H
/*
 * Student class
 *
 * A Student object contains a student ID, the number of credits, and an
 * overall GPA.
 */
class Student {

  public:

    Student();
    // Constructs a default student with an ID of 0, 0 credits, and 0.0 GPA.

    Student(int ID);
    // Constructs a student with the given ID, 0 credits, and 0.0 GPA.

    Student(int ID, int cr, double grPtAv);
    // Constructs a student with the given ID, number of credits, and GPA.\

    Student(const Student & s);
    // Constructs a copy of another student object

    ~Student();
    // Destructs a student object

    const Student & operator=(const Student & rhs);
    // Defines the assignment operator between two student objects

    // Accessors
    int getID() const;       // returns the student ID
    int getCredits() const;  // returns the number of credits
    double getGPA() const;   // returns the GPA

    // Other methods

    void update(char grade, int cr);
    // Updates the total credits and overall GPA to take into account the
    // additions of the given letter grade in a course with the given number
    // of credits.  The update is done by first converting the letter grade
    // into a numeric value (A = 4.0, B = 3.0, etc.).  The new GPA is 
    // calculated using the formula:
    //
    //            (oldGPA * old_total_credits) + (numeric_grade * cr)
    //   newGPA = ---------------------------------------------------
    //                        old_total_credits + cr
    //
    // Finally, the total credits is updated (to old_total_credits + cr)

    void print() const;  
    // Prints out the student to standard output in the format:
    //   ID,credits,GPA
    // Note: the end-of-line is NOT printed after the student information 

  private:
    int studentID;
    int credits;
    double GPA;
};

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:44:06.733

您想包含 .h 文件，而不是 .cpp 文件：

```
#include "Student.h"
#include "SortedList.h" 
```

如果没有更多代码，很难推测还有什么问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T04:56:55.107

您的主要功能似乎存在许多问题。这更正确：

```
int main() {
    SortedList *list = new SortedList; //1
    Student create[100]; //2
    int num = 100000;

    for (Student &x : create) { //3
        x = Student(num); //4
        num += 100;
    }

    for (Student &x : create) //5
        list->insert(&x);

    delete list;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T04:44:12.770

您需要`SortedList`在 cpp 文件中包含定义类的标头。
附带说明一下，我不知道您为什么`cpp`在程序中包含文件，请不要这样做。

**编辑：** 对于您更新的 Q。
如果您已经在文件中包含了定义类的 geader 文件，`SortedList`这`cpp`会给您带来错误，可能您已经将您的类包装在命名空间中。如果是这样，您应该使用该类的完全限定名称或在主 cpp 文件中对类名使用 using 声明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T05:01:48.910

我怀疑`SORTEDLIST_H`是在处理之前定义`SortedList.h`的..

检查您是否`SORTEDLIST_H`在 Student.h 中定义了相同的...

更新 1：尝试将这些标志与您的 g++ 编译语句一起添加

```
 g++ -USORTEDLIST_H -USTUDENT_H <fileNames> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T04:50:02.173

我怀疑`SortedList`已在命名空间中声明。

例子：

**排序列表.h**

```
namespace MON {
class SortedList { ... };
} // << MON 
```

**主文件**

```
int main() {
    MON::SortedList *list = new MON::SortedList();  //This is line 17
    ....
} 
```

# facebook - 使用 c# facebook sdk 查找 Facebook Friends 朋友

> ID：10099917
> 
> 赞同：0
> 
> 时间：2012-04-11T04:42:36.393
> 
> 标签：facebook, facebook-graph-api

有没有办法在使用 c# facebook SDK 时找到用户的朋友朋友？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:24:10.327

看这里：http: [//developers.facebook.com/docs/reference/api/user/#friends](http://developers.facebook.com/docs/reference/api/user/#friends)

“您可以通过使用当前会话用户的任何有效 access_token 向 /PROFILE_ID/friends 发出 HTTP GET 来读取用户的朋友列表。”

# objective-c - 如何将 fieldEditor 移动到选定位置？

> ID：10099919
> 
> 赞同：0
> 
> 时间：2012-04-11T04:43:05.153
> 
> 标签：objective-c, cocoa, nstableview, nsevent

当我尝试使用字段编辑器编辑列`-(void)editColumn:(NSInteger)column row:(NSInteger)row withEvent:(NSEvent *)theEvent select:(BOOL)select`时，`NSTableView`总是出现在开头。`NSTextField`我为文本插入了一些制表符空格。我想将字段编辑器（光标）移动到文本的开头。有什么提示可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:21:00.840

我可以使用以下代码解决问题。

```
[[self.tableView currentEditor] setString:@"YourStringValue"]; 
```

# haskell - 有效地将 ByteString 转换为十六进制表示

> ID：10099921
> 
> 赞同：11
> 
> 时间：2012-04-11T04:43:52.570
> 
> 标签：haskell, bytestring

我需要能够给出 SHA512 哈希的十六进制表示。也许我只是看起来不够努力，但我可以在 Hackage 上找到任何功能来做到这一点。所以我写了一个使用`unfoldrN`. 对于我的目的来说，它绝对足够快，但我想知道是否有人知道更快的方法。

我已将我的实现放在 Github 上作为要点：[https](https://gist.github.com/2356925) ://gist.github.com/2356925 。该文件还包括一个基于`Numeric.showHex`QuickCheck 测试和标准基准的简单实现。我目前的简单版本与`unfoldrN`版本的结果是：

```
benchmarking simple
mean: 4.677296 ms, lb 4.656011 ms, ub 4.696684 ms, ci 0.950
std dev: 104.2791 us, lb 87.77023 us, ub 128.1627 us, ci 0.950
found 5 outliers among 100 samples (5.0%)
  4 (4.0%) low mild
variance introduced by outliers: 15.195%
variance is moderately inflated by outliers

benchmarking unfoldrN_MS1
mean: 370.0101 us, lb 365.9819 us, ub 373.8619 us, ci 0.950
std dev: 20.17016 us, lb 16.92772 us, ub 24.08982 us, ci 0.950
found 14 outliers among 100 samples (14.0%)
  7 (7.0%) low mild
  7 (7.0%) high mild
variance introduced by outliers: 52.467%
variance is severely inflated by outliers 
```

有人想尝试改进它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T09:55:57.477

往下走，

```
import Data.ByteString.Internal
import Foreign.Ptr
import Foreign.Storable
import qualified Data.ByteString as B
import Data.ByteString.Unsafe
import Data.Bits
import Data.Word

maxLen :: Int
maxLen = maxBound `quot` 2

hexDig :: Word8 -> Word8
hexDig d
    | d < 10    = d + 48
    | otherwise = d + 87

toHex :: ByteString -> ByteString
toHex bs
    | len > maxLen = error "too long to convert"
    | otherwise    = unsafeCreate nl (go 0)
      where
        len = B.length bs
        nl  = 2*len
        go i p
            | i == len  = return ()
            | otherwise = case unsafeIndex bs i of
                            w -> do poke p (hexDig $ w `shiftR` 4)
                                    poke (p `plusPtr` 1) (hexDig $ w .&. 0xF)
                                    go (i+1) (p `plusPtr` 2) 
```

我可以将盒子上的转换时间再减少大约 3.5 倍。再`sample`长一点（25000），我得到了

```
benchmarking simple
mean: 13.76532 ms, lb 13.64184 ms, ub 13.88680 ms, ci 0.950
std dev: 633.2413 us, lb 582.6342 us, ub 687.9701 us, ci 0.950
variance introduced by outliers: 44.438%
variance is moderately inflated by outliers

benchmarking unfoldrN_MS1
mean: 430.5705 us, lb 424.9206 us, ub 438.5689 us, ci 0.950
std dev: 33.85429 us, lb 26.25623 us, ub 45.74915 us, ci 0.950
found 4 outliers among 100 samples (4.0%)
  3 (3.0%) high mild
  1 (1.0%) high severe
variance introduced by outliers: 69.726%
variance is severely inflated by outliers

benchmarking LowHex
mean: 123.6000 us, lb 123.0551 us, ub 124.7084 us, ci 0.950
std dev: 3.837497 us, lb 1.869370 us, ub 6.470112 us, ci 0.950
found 6 outliers among 100 samples (6.0%)
  4 (4.0%) high mild
  2 (2.0%) high severe
variance introduced by outliers: 25.818%
variance is moderately inflated by outliers 
```

对于最初的 500 长`sample`，它是

```
benchmarking simple
mean: 2.603306 ms, lb 2.583054 ms, ub 2.629212 ms, ci 0.950
std dev: 116.5341 us, lb 81.61409 us, ub 191.3293 us, ci 0.950
found 7 outliers among 100 samples (7.0%)
  2 (2.0%) low severe
  3 (3.0%) low mild
  1 (1.0%) high severe
variance introduced by outliers: 42.490%
variance is moderately inflated by outliers

benchmarking unfoldrN_MS1
mean: 83.19349 us, lb 82.88474 us, ub 83.58283 us, ci 0.950
std dev: 1.771460 us, lb 1.486104 us, ub 2.174729 us, ci 0.950
found 14 outliers among 100 samples (14.0%)
  12 (12.0%) high mild
  2 (2.0%) high severe
variance introduced by outliers: 14.225%
variance is moderately inflated by outliers

benchmarking LowHex
mean: 24.50564 us, lb 24.41683 us, ub 24.61241 us, ci 0.950
std dev: 497.1908 ns, lb 415.6366 ns, ub 609.7594 ns, ci 0.950
found 5 outliers among 100 samples (5.0%)
  5 (5.0%) high mild
variance introduced by outliers: 13.256%
variance is moderately inflated by outliers 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T08:13:15.270

您正在寻找的函数是[`Data.ByteString.Builder.byteStringHex`](http://hackage.haskell.org/package/bytestring/docs/Data-ByteString-Builder.html#v%3abyteStringHex)（或其用于 Lazy ByteStrings 的孪生函数），它由新的字节串生成器提供。我[扩展了您的基准测试](https://gist.github.com/2488098)并在我的机器上获得了以下结果：

```
benchmarking size 5000/simple
mean: 2.469847 ms, lb 2.440422 ms, ub 2.522850 ms, ci 0.950
std dev: 196.5903 us, lb 116.8811 us, ub 318.4720 us, ci 0.950
found 16 outliers among 100 samples (16.0%)
  3 (3.0%) low severe
  2 (2.0%) low mild
  10 (10.0%) high severe
variance introduced by outliers: 70.721%
variance is severely inflated by outliers

benchmarking size 5000/unfoldrN_MS1
mean: 102.6075 us, lb 101.7695 us, ub 104.0159 us, ci 0.950
std dev: 5.468574 us, lb 3.681120 us, ub 8.080665 us, ci 0.950
found 16 outliers among 100 samples (16.0%)
  6 (6.0%) high mild
  10 (10.0%) high severe
variance introduced by outliers: 51.455%
variance is severely inflated by outliers

benchmarking size 5000/byteStringHexFixed
mean: 5.675204 us, lb 5.636296 us, ub 5.750211 us, ci 0.950
std dev: 264.3726 ns, lb 140.9738 ns, ub 398.8494 ns, ci 0.950
found 5 outliers among 100 samples (5.0%)
  4 (4.0%) high severe
variance introduced by outliers: 44.476%
variance is moderately inflated by outliers 
```

我喜欢这个数字。太糟糕了，我的字节串库补丁仍在 Duncan Coutts 的审查中。最迟将在下一个 GHC 版本中提供新的字节串构建器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T05:35:50.237

好像刚用过

```
hex :: B.ByteString -> String
hex = concatMap (printf "%02x") . B.unpack 
```

上次我想这样做。这与 Crypto.Hash 库 iirc 结合使用。我怀疑性能有那么好，但与（慢）sha512 函数本身相比，为什么十六进制转换会成为问题？

# arrays - AS3 使用一个变量来加载所有的movieclip

> ID：10099923
> 
> 赞同：0
> 
> 时间：2012-04-11T04:43:58.297
> 
> 标签：arrays, actionscript-3, flash

有没有办法让我想在舞台上加载的所有影片剪辑成一个数组？

```
if (selectDiffText.text == "Collection 1 Easy")
    {
        var c1_easy:cartoonEasy = new cartoonEasy();
        addChild(c1_easy);
        c1_easy.x = 412;
        c1_easy.y = 400;
        TweenMax.from(c1_easy, 0.5, {alpha:0, ease:Expo.easeOut});
    }
    else if (selectDiffText.text == "Collection 1 Medium")
    {
        var c1_medium:cartoonMedium = new cartoonMedium();
        addChild(c1_medium);
        c1_medium.x = 412;
        c1_medium.y = 400;
        TweenMax.from(c1_medium, 0.5, {alpha:0, ease:Expo.easeOut});
    }
    else if (selectDiffText.text == "Collection 1 Hard")
    {
        var c1_hard:cartoonHard = new cartoonHard();
        addChild(c1_hard);
        c1_hard.x = 412;
        c1_hard.y = 400;
        TweenMax.from(c1_hard, 0.5, {alpha:0, ease:Expo.easeOut});
    }
else{trace("ERROR!")} 
```

现在我在图书馆里有 3 个电影剪辑，分别是 cartoonEasy、cartoonMedium 和 cartoonHard。我会将其中一个添加到舞台中，但变量不同。这是一种我可以让他们只使用一个变量的方法吗？它使用数组吗？

因为如果只使用 1 个变量，那么我可以轻松地控制我从库中调用的影片剪辑的 1 内的对象。

我的想法是这样的：

```
var c1_all:cartoonAll = new cartoonEasy() = new cartoonMedium() = new cartoonHard() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:35:20.473

```
function addCartoon( obj:* ):void{ // might change * to DisplayObject
    addChild(obj);
    obj.x = 412;
    obj.y = 400;
    TweenMax.from(obj, 0.5, {alpha:0, ease:Expo.easeOut});
}

var obj:*;
switch (selectDiffText.text ){ // use switch since it is clean code
  case "Collection 1 Easy":
    obj = new cartoonEasy();
  case "Collection 1 Medium":
    obj = new cartoonMedium();
  case "Collection 1 Hard":
    obj = new cartoonHard();
  default:
    trace("ERROR!")
}
if( obj ){
  addCartoon( obj );
}

// manipulating obj will change the item on stage.
obj.x = 500; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:05:27.090

确实可以使用数组。

```
var c1All:Array = [
    new cartoonEasy(),
    new cartoonMedium(),
    new cartoonHard()
]; 
```

要将您的代码应用于所有这些对象，您可以执行以下操作：

```
for each(var i:MovieClip in c1All)
{
    addChild(i);
    i.x = 412;
    i.y = 400;
    TweenMax.from(i, 0.5, {alpha:0, ease:Expo.easeOut});
} 
```

PS我建议使用`throw new Error("message");`而不是`trace("error")`.

# php - 获取日期时间格式之间的持续时间

> ID：10099927
> 
> 赞同：2
> 
> 时间：2012-04-11T04:44:30.930
> 
> 标签：php

如何在php中以hrs min sec格式获取start_date和end_date之间的持续时间？

```
$start_date=2012-03-23 11:58:14  and $end_date=2012-03-24 11:54:29 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T04:51:13.750

使用`DateTime`类：

```
$start_date = new DateTime('2012-03-23 11:58:14');
$end_date = new DateTime('2012-03-24 11:54:29');

$dd = date_diff($end_date, $start_date); 
```

获取小时使用`$dd->h`，分钟 - `$dd->i`，秒 - `$dd->s`。

```
echo "Hours = $dd->h, Minutes = $dd->i, Seconds = $dd->s"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T04:51:54.900

我会

```
$start_time = strtotime($start_date);
$end_time = strtotime($end_date);
$difference = $end_time - $start_time;
echo date('H:i:s', $difference); 
```

**编辑**

我在假设时差小于一天时犯了一个错误，所以如果时差大于一天，你只会看到 Hours:minuetes:seconds，这可能不是你想要的（如果它是忽略这个）

所以我现在会

```
$seconds = $difference % 60;            //seconds
$difference = floor($difference / 60);
$min = $difference % 60;              // min
$difference = floor($difference / 60);
$hours = $difference;  //hours
echo "$hours : $min : $seconds"; 
```

抱歉更正

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:48:34.580

这个功能可以帮助你

```
function datediff($interval, $datefrom, $dateto, $using_timestamps = false) {
 /*
  $interval can be:
  yyyy - Number of full years
  q - Number of full quarters
  m - Number of full months
  y - Difference between day numbers
   (eg 1st Jan 2004 is "1", the first day. 2nd Feb 2003 is "33". The datediff is "-32".)
  d - Number of full days
  w - Number of full weekdays
  ww - Number of full weeks
  h - Number of full hours
  n - Number of full minutes
  s - Number of full seconds (default)
 */ 
```

[http://php.net/manual/en/function.date-diff.php](http://php.net/manual/en/function.date-diff.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T04:49:10.163

1.  将这些字符串格式化为日期
2.  将这些日期转换为毫秒
3.  做 endate - stardate
4.  从结果计算 h:mm:ss

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T06:25:05.890

看到它在这里工作：[http ://codepad.viper-7.com/FPuOks](http://codepad.viper-7.com/FPuOks)

```
$start_date="2012-03-22 11:58:14";
$end_date="2012-03-24 11:54:29";

$start_time = strtotime($start_date);
$end_time = strtotime($end_date);
$difference = $end_time - $start_time;

echo sprintf("%02d%s%02d%s%02d", floor($difference/3600), ':', ($difference/60)%60, ':', $difference%60); // outputs 47:56:15 
```

# python - 在迭代数据集中的所有元素的同时，如何筛选适合特定键的记录的大型数据集

> ID：10099928
> 
> 赞同：2
> 
> 时间：2012-04-11T04:44:41.073
> 
> 标签：python, collections

我有大量数据，我通过生成器/迭代器访问它们。在处理数据集时，我需要确定该数据集中的任何记录是否具有与正在处理的当前记录的属性具有相同值的属性。一种方法是使用嵌套的 for 循环。例如，如果要处理学生数据库，我可以执行以下操作：

```
def fillStudentList():
    # TODO: Add some code here to  filll
    # a student list
    pass

students = fillStudentList()
sameLastNames = list()
for student1 in students1:
  students2 = fillStudentList()
  for student2 in students2:
    if student1.lastName == student2.lastName:
        sameLastNames.append((student1, student2)) 
```

当然，上面的代码片段可以改进很多。该片段的目标是显示嵌套的 for 循环模式。

现在假设我们有一个 Student 类，一个 Student 类（它是一个迭代器）和一个 Source 类，它以某种内存有效的方式（比如另一个迭代器）提供对数据的访问......

下面，我勾勒出这段代码的样子。有人对如何改进此实施有想法吗？目标是能够在非常大的数据集中找到具有相同属性的记录，以便可以处理过滤后的集合。

```
#!/usr/bin/python

from itertools import ifilter

class Student(object):
    """
    A class that represents the first name, last name, and
    grade of a student.
    """
    def __init__(self, firstName, lastName, grade='K'):
        """
        Initializes a Student object
        """
        self.firstName = firstName
        self.lastName = lastName
        self.grade = grade

class Students(object):
    """
    An iterator for a collection of students
    """
    def __init__(self, source):
        """
        """
        self._source = source
        self._source_iter = source.get_iter()
        self._reset = False

    def __iter__(self):
        return self

    def next(self):
        try:
            if self._reset:
                self._source_iter = self._source.get_iter()
                self._reset = False
            return self._source_iter.next()
        except StopIteration:
            self._reset = True
            raise StopIteration

    def select(self, attr, val):
        """
        Return all of the Students with a given
        attribute
        """
        #select_iter = self._source.get_iter()
        select_iter = self._source.filter(attr, val)
        for selection in select_iter:
            # if (getattr(selection, attr) == val):
            #    yield selection
            yield(selection)

class Source(object):
    """
    A source of data that can provide an iterator to 
    all of the data or provide an iterator to the
    data based on some attribute
    """
    def __init__(self, data):
        self._data = data

    def get_iter(self):
        """
        Return an iterator to the data
        """
        return iter(self._data)

    def filter(self, attr, val):
        """
        Return an iterator to the data filtered by some
        attribute
        """
        return ifilter(lambda rec: getattr(rec, attr) == val, self._data)

def test_it():
    """
    """
    studentList = [Student("James","Smith","6"),
                   Student("Jill","Jones","6"),
                   Student("Bill","Deep","5"),
                   Student("Bill","Sun","5")]
    source = Source(studentList)
    students = Students(source)
    for student in students:
        print student.firstName

        for same_names in students.select('firstName', student.firstName):
            if same_names.lastName == student.lastName:
                continue
            else:
                print " %s %s in grade %s has your same first name" % \
                (same_names.firstName, same_names.lastName, same_names.grade)

if __name__ == '__main__':
    test_it() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:56:21.317

嵌套循环是 O(n**2)。您可以改为使用排序和[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)O(nlogn) 性能：

```
students = fill_student_list()
same_last_names = [list(group) for lastname, group in 
                   groupby(sorted(students, key=operator.attrgetter('lastname'))] 
```

通常，您似乎正在尝试执行由数据库支持的 ORM 所做的事情。与其自己动手，不如使用现有的众多 ORM 之一。请参阅[有哪些好的 Python ORM 解决方案？](https://stackoverflow.com/questions/53428/what-are-some-good-python-orm-solutions)列表。它们将比您自己编写的代码更优化、更强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:58:10.970

也许这样的事情对你有用（这是 O(n)）

```
from collections import defaultdict
students = fillStudentList()
sameLastNames = defaultdict(list)
for student in students:
    sameLastNames[student.lastName].append(student)

sameLastNames = {k:v for k,v in sameLastNames.iteritems() if len(v)>1} 
```

# java - 如何删除字符串中不需要的字符

> ID：10099941
> 
> 赞同：0
> 
> 时间：2012-04-11T04:46:40.630
> 
> 标签：java, android, string

嗨，我收到了来自服务器的 json 响应。我解析了它。但是响应中的字符串看起来像这样

roominfo<br /><br /> <p><strong>通知和费用：</strong><br /></p><p><ul><li>显示的总价中包括度假费</li> </ul></p><p></p><p></p> <p>以下费用和押金由住宿在提供服务、入住或退房时收​​取-出去。<ul><li>代客停车费用：每晚 USD30（自由进出）</li><li>宠物费：每次住宿 USD45</li><li>所有公共区域无线上网费用： 11.95 美元（24 小时，费率可能会有所不同）</li><li>室内无线上网费用：11.95 美元（24 小时，费率可能会有所不同）</li> </ul></p>< p>以上列表可能并不全面。费用和押金可能不包括税，并且可能会发生变化。</p>

如何从此字符串中删除不需要的字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:50:52.223

如果您不需要的字符是`HTML`标签，那么使用它

```
 String noHTMLString = htmlString.replaceAll("\\<.*?>",""); 
```

它使用正则表达式来删除用括号括起来的任何文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:19:59.307

使用 jsoup 解析

[汤](http://jsoup.org/cookbook/extracting-data/attributes-text-html)

例如，您可以使用 jsoup 在 java 中执行以下操作：

```
String html = "<p>An <a href='http://example.com/'><b>example</b></a> link.</p>";
Document doc = Jsoup.parse(html);
Element link = doc.select("a").first();

String text = doc.body().text(); // "An example link"
String linkHref = link.attr("href"); // "http://example.com/"
String linkText = link.text(); // "example""

String linkOuterH = link.outerHtml(); 
// "<a href="http://example.com"><b>example</b></a>"
String linkInnerH = link.html(); // "<b>example</b>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:54:53.390

Html Class 支持一些 html 标签。看到这个[http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

您可以通过 android Html 类来删除或处理这些标签。格式会是这样的。

`Html.fromHtml(text).toString();`

但是有几个 html 类不支持 html 标签，因此您可以使用 webview 来处理这些标签。

# algorithm - 当某些 x 必须是整数时，给定一种求解差分约束系统的有效算法

> ID：10099943
> 
> 赞同：0
> 
> 时间：2012-04-11T04:46:44.110
> 
> 标签：algorithm, clrs

这是 CLRS 24.4-12 的练习，（不是作业，我只是尝试解决 CLRS 中的所有练习）

> 当 b 的所有元素都是实值并且某些但不一定是所有未知数 xi 的指定子集必须是整数时，给出一个有效的算法来求解具有差异约束的系统 Ax ≤ b。

如果所有 xi 都是整数，我们可以让 b = floor(b) 并使用 Bellman-Ford 算法在约束图中找到解决问题的最短路径，但是 xi 有些是整数而有些不是呢？它类似于整数规划问题，但整数规划是NP-hard，这个问题的约束较少，有没有更高效的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:32:09.807

First find the element with minimum absolute value in vector b , multiply it by C to make all of the values in vector of b integer (e.g. if the minimum absolute value is 3.102, we can multiply vector b by 1000), then solve it by bellman-ford algorithm , and finally divide it by C !

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:37:53.830

你在线性优化中有类似的东西——唯一的区别是你没有最低或最高要求。也许你可以调整一些方法。从实值解开始，有 Gomory 算法添加额外的约束来强制整数 xi 变为整数，还有分支定界算法，试图尽快排除搜索空间的大部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T15:43:30.597

出色地。伙计，这是算法导论的练习。我自己的方法是采用Bellman-Ford算法，基本就是根据不等式构造一个有向加权图，然后在放松边的时候，只允许整数作为节点的键值。我想它会起作用的。

# php - PHP中的连接

> ID：10099950
> 
> 赞同：0
> 
> 时间：2012-04-11T04:48:07.633
> 
> 标签：php

编写以下代码的正确方法是什么？

```
echo '<img src="'images/.$row['picture']. '"/>'; 
```

我想显示数据库中的图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T04:51:01.737

如果我正确理解了这个问题，

```
<?php
echo '<img src="/images/' . $row['picture'] . '"/>';
?> 
```

或者

```
<?php
echo "<img src='/images/" . $row['picture'] . "'/>";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:12:50.293

您可以使用 vprintf 功能：[http ://www.php.net/manual/ru/function.vprintf.php](http://www.php.net/manual/ru/function.vprintf.php)

```
vprintf('<img src="images/%s"/>', $row['picture']); 
```

或这个：

```
echo "<img src=\"{$row['picture']}\" />"; 
```

不要忘记转义 html 字符： http: [//php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

```
$row['picture'] = htmlspecialchars($row['picture'], ENT_QUOTES); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T04:52:05.407

```
echo  '<img src="images/'.$row['picture'].'" />'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T04:54:00.180

```
 echo '<img src=images/'.$row['picture'].'>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T04:51:03.003

尝试

```
<?php
echo "<img src=images/".$row['picture']."/>";
?> 
```

# php - php zend 函数中的内存泄漏

> ID：10099951
> 
> 赞同：1
> 
> 时间：2012-04-11T04:48:17.243
> 
> 标签：php, memory-leaks

我在 php 代码中遇到内存泄漏。当我使用启用调试的 php 5.3.10 运行代码时，我看到 zend 函数中存在内存泄漏。据我所知，zend 使用自己的垃圾收集器来清理分配的内存。你能建议在这种情况下可以做些什么吗？

.../php-5.3.10/Zend/zend_objects.c(32)：释放 0x0229FD20（64 字节），脚本=static_cl_put.php .../php-5.3.10/Zend/zend_alloc.c(2454)：实际位置（已转发位置） 最后一次泄漏重复 9998 次

[2012 年 4 月 11 日星期三 10:06:52] 脚本：'static_cl_put.php'
.../php-5.3.10/Zend/zend_objects.c(31)：释放 0x0229FE50（72 字节），脚本=static_cl_put.php 最后泄漏重复 9998 次

谢谢， 苏南达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-10T15:18:33.220

你可以加：

```
ini_set('memory_limit', '-1'); 
```

给使用该 zend 组件的 php 脚本，这样您就可以覆盖最初的 .ini 限制。

之后您可能还需要编辑：

```
ini_set('max_input_time', '-1');
ini_set('max_execution_time', '-1'); 
```

# liferay-6 - Liferay 6 :portlet:renderURL 不重定向

> ID：10099955
> 
> 赞同：0
> 
> 时间：2012-04-11T04:48:54.110
> 
> 标签：liferay-6

我正在使用 Liferay 6 。

当我将 Portlet 添加到页面时，首先显示此页面

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>

<portlet:defineObjects />

<portlet:renderURL var="homeurl">
<portlet:param name="jspPage" value="/WEB-INF/jsp/view1.jsp" />
</portlet:renderURL>

<portlet:renderURL var="homeurl2">
<portlet:param name="jspPage" value="/WEB-INF/jsp/view2.jsp" />
</portlet:renderURL>

<portlet:renderURL var="testUpdateURL">
<portlet:param name="jspPage" value="/WEB-INF/jsp/view3.jsp" />
</portlet:renderURL>

<p><a href="<%=homeurl%>" >
1\. Go home
</a></p>

<p><a href="<%=homeurl2%>" >
2\. Go home 2
</a></p>

<p><a href="<%=testUpdateURL%>" >
3\. TestUpdate
</a></p> 
```

这是 view1.jsp

这是**view1** portlet。

类似地，存在其他 JSP 页面 view2.jsp 和 view3.jsp

但是当我点击任何显示的超级链接时，什么都没有发生，同样的情况再次显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T10:52:02.203

只需在 DOCROOT 目录中移动所有 jsp 页面并使用

```
`<portlet:renderURL var="homeurl2">
       <portlet:param name="jspPage" value="/view2.jsp" />
 </portlet:renderURL>` 
```

这对我有用，我希望它能解决问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T18:42:50.910

我在liferay上不是很好，但我也在做同样的事情。假设我们创建了一个简单的 portlet，我们在其中给出了包名称，假设为 com.portl.asif。现在默认情况下，我们的 view.jsp 位置是 /docroot/html/asif/view.jsp。所以我认为这是我们一般创建其他jsps的地方。让我们假设我在同一个目录 asif 中创建了另一个 jsp 说 fill.jsp 所以它的路径 /docroot/html/asif/view.jsp 现在如果你想通过另一个 jsp 页面调用那个 jsp 然后使用下面的代码这对我有用

```
 <portlet:renderURLvar="viewEmployeeDataURL">      <!-- to redirect to another jsp page -->
         <portlet:param name="jspPage" value="/html/asif/second.jsp" />
       </portlet:renderURL> 
```

这里 second.jsp 是我想从我当前的 jsp 页面导航到的页面

希望这对你有用

```
 <a href="<%=viewEmployeeDataURL%>" /> 
```

如果您进一步面对或上述方法对您不起作用，请告诉我

谢谢 asif aftab

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:33:25.433

代码正是它应该的。

它们必须在您的控制器中，如果您没有在控制器中设置 jspPage 参数，请检查一次。

# ruby-on-rails - 为什么 Rails 3 嵌套路由忽略嵌套资源？

> ID：10099959
> 
> 赞同：2
> 
> 时间：2012-04-11T04:49:33.083
> 
> 标签：ruby-on-rails, resources, routes

协会：

```
location  has_many :comments
comment  belongs_to :location 
```

出于某种原因，这个 GET：

```
/locations/5/comments.json 
```

像这样 GET：

```
/comments.json

Started GET "/locations/5/comments.json" for 127.0.0.1 at 2012-04-10 21:18:00 -0700
  Processing by CommentsController#index as JSON
  Parameters: {"location_id"=>"5"}
  Comment Load (0.1ms)  SELECT "comments".* FROM "comments" 
Completed 200 OK in 21ms (Views: 1.0ms | ActiveRecord: 0.7ms) 
```

注意 SQL 查询：SELECT "comments".* FROM "comments"

路线是这样设置的：

```
 resources :locations do
    resources :comments
  end 
```

耙路线确认路线：

```
location_comments GET    /locations/:location_id/comments(.:format)          {:action=>"index", :controller=>"comments"} 
```

这是索引操作：

```
 def index
    @comments = Comment.all
    respond_to do |format|
      format.json { render json: @comments }
    end
  end 
```

这是正确的行动吗？它与结果一致，但我不确定这里应该还有什么。我以前从来没有遇到过嵌套资源的问题，所以我从来没有研究过细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:04:34.033

试试这个：

```
def index
  @location = Location.find(params[:location_id])
  @comments = @location.comments
  respond_to do |format|
    format.json { render json: @comments }
  end
end 
```

# php - 更新服务器中的图像-> chrome 缓存问题

> ID：10099960
> 
> 赞同：1
> 
> 时间：2012-04-11T04:49:42.220
> 
> 标签：php, html, google-chrome

每当用户上传新图像时，图像名称保持不变（因为图像名称基于文件扩展名和用户 ID 值）chrome 不会更新缓存，图像看起来保持不变。

例如，用户将上传文件`image.png`

服务器将分析文件并将其存储为

```
87.png 
```

但是，以前的文件`image2000.png`也存储为

```
87.png 
```

即使它们是不同的文件。

现在，img 调用是

```
<img src="/images/87.png"> 
```

对于两个单独的图像，但 chrome 没有意识到它们已更改，因此它输出缓存的图像`87.png`，而不是在刚刚更新的服务器中加载新图像。

有没有办法强制chrome（和其他浏览器）意识到这个图像刚刚更新，并从服务器而不是缓存加载图像？或者图像是否需要有一个新名称才能实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:55:06.853

对不起，我没有正确阅读问题。

这种行为是因为来自您的服务器的响应的 expires 标头。更新图像后，将该图像的标头设置为过期。所以浏览器得到更新的图像。

```
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past 
```

如何专门将标题设置为更新图像？

在数据库中放置一个名为 updated 的列。因此，每次更新图像时，将此列设置为 1。

```
(if update ==1) 
```

设置适当的标题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:04:26.237

您必须正确配置您的网络服务器。请注意服务器随图像返回的“ETag”和“Expires”标头。

# javascript - Google Map Bug，Dragend 事件也在 IE 中触发 Click 事件

> ID：10099961
> 
> 赞同：3
> 
> 时间：2012-04-11T04:49:57.633
> 
> 标签：javascript, jquery, internet-explorer, google-maps, google-maps-api-3

我发现 Google Map 中的 dragend 事件也会触发 IE 中的 click 事件。在 Firefox 和 Chrome 中都可以。打开 IE/FF/Chrome 控制台，看看这个小提琴的结果。任何解决方法将不胜感激。

[http://jsfiddle.net/ABqMH/8/](http://jsfiddle.net/ABqMH/8/)

[在这里](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4072&thanks=4072&ts=1334128318#makechanges)提交的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:56:23.257

这是一个快速的解决方法

```
var map;
var elevator;
var dragged = false;
var myOptions = {
    zoom: 6,
    center: new google.maps.LatLng(46.87916, -3.32910),
    mapTypeId: 'terrain'
};
map = new google.maps.Map($('#map')[0], myOptions);
var marker = new google.maps.Marker({
            map: map,
    position: new google.maps.LatLng(46.87916, -3.32910),
    draggable: true
});
google.maps.event.addListener(marker, 'dragend', function () {
    console.log('dragend');
    dragged = true;
    setTimeout(function(){ dragged = false; }, 200);
        });
google.maps.event.addListener(map, 'click', function (evt) {
if (dragged) return;
console.log('click')
}); 
```

# meteor - Meteor - 在客户端启动时使用集合

> ID：10099968
> 
> 赞同：22
> 
> 时间：2012-04-11T04:50:42.920
> 
> 标签：meteor

为什么这段代码显示“0”？它不应该返回“1”吗？

```
Messages = new Meteor.Collection("messages");

if (Meteor.is_client) {
    Meteor.startup(function () {    
        alert(Messages.find().count());
    });
}

if (Meteor.is_server) {
    Meteor.startup(function () {
        Messages.insert({text: "server says hello"});
    });
} 
```

如果我稍后执行“Messages.find().count()”，它会返回 1。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-11T06:29:04.013

默认情况下，当 Meteor 客户端启动时，它会连接到服务器并订阅`Meteor.Collection`您定义的任何文档。这需要一些时间才能完成，因为在建立服务器连接和接收文档时总会有一些延迟。

`Meteor.startup()`on client 很像`$()`jQuery —— 一旦客户端 DOM 准备好，它就会运行它的参数。它不会*等待*客户的集合从服务器接收所有文档。因此，按照您编写代码的方式，调用`find()`总是会运行得太早并返回 0。

如果您想等到第一次从服务器下载集合之后再运行代码，您需要使用`Meteor.subscribe()`显式订阅集合。 `subscribe()`接受一个回调，当初始文档集在客户端上时将运行该回调。

看：

[流星发布](http://docs.meteor.com/#meteor_publish) 和[流星订阅](http://docs.meteor.com/#meteor_subscribe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T01:12:22.040

只是跟进一个代码示例，说明如何知道集合何时可以在客户端上使用。

正如[@debergalis](https://stackoverflow.com/users/791538/debergalis)所述，您应该使用[Meteor.subscribe](http://docs.meteor.com/api/pubsub.html#Meteor-subscribe)方法 - 它接受几个回调，特别是`onReady`

例如：

```
if(Meteor.isClient){

    Meteor.subscribe("myCollection", {

        onReady: function(){

            // do stuff with my collection

        }

    });

} 
```

# asp.net-web-api - 在 Meteor 中调用外部 Web API 有多容易？

> ID：10099970
> 
> 赞同：12
> 
> 时间：2012-04-11T04:50:59.223
> 
> 标签：asp.net-web-api, meteor

Meteor 是否（或将）提供一个库来处理外部 Web API 调用？例如，构建与 Facebook Graph API 或 Google Spreadsheet API 集成的 Meteor 应用程序。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-29T15:46:09.197

Meteor now includes the http package. First, run `meteor add http`. Then you can make HTTP requests on the server in either sync or async style:

```
// server sync
res = Meteor.http.get(SOME_URL);
console.log(res.statusCode, res.data);

// server async
Meteor.http.get(SOME_URL, function (err, res) {
  console.log(res.statusCode, res.data);
}); 
```

Same thing works on the client, but you have to use the async form.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T05:47:10.837

```
if (Meteor.is_server) {
    var http = __meteor_bootstrap__.require("http")
    // talk to external HTTP API like you would in node.js
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-18T18:52:22.723

HTTP

HTTP 在客户端和服务器上提供 HTTP 请求 API。要使用这些功能，请使用 $meteor add http 将 HTTP 包添加到您的项目中。

# java - 使用 JAVA 编写的自定义算法加密网页文件

> ID：10099974
> 
> 赞同：0
> 
> 时间：2012-04-11T04:51:06.403
> 
> 标签：java, php, html, encryption

我设计了一个使用 HTML 的网页和使用 JavaScript 的客户端验证。服务器端的 PHP。我想在字段通过网络传输之前对其进行加密，我有用 JAVA 编写的加密代码。谁能给我一个解决方案，我该怎么做合并java代码进行加密？或任何更好的加密方式？

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:13:03.010

可以在[此处](http://people.eku.edu/styere/Encrypt/JS-AES.html)找到使用 JavaScript 进行 AES 加密的示例。根据您的用例，https 加密可能是更好的选择，或者至少可以提供额外的隐私层。我认为要问自己的关键问题是服务器上的数据是否应该对除客户端之外的任何人都不透明。如果服务器要以明文形式使用数据，那么 https 是一个相对安全、简单和健壮的选项。如果服务器不需要数据，那么让用户在客户端使用 JavaScript 加密将允许您的服务器以一种对您自己的员工无用的方式维护这些敏感字段，但对可以重新生成的客户端有用相同的密钥来解密它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T04:55:40.613

如果要在客户端加密并在服务器端解密，则必须在客户端使用 javascript；也许你可以用一个小程序来做到这一点，这样就可以在客户端使用 Java，但这似乎很麻烦。

我认为你最好看看https。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:54:38.673

如果您可以选择这样做，我认为更好的方法是使用 https。为什么要重新发明轮子？

# android - 具有 imageview、textview 和按钮的 listview 行布局有问题吗？

> ID：10099975
> 
> 赞同：1
> 
> 时间：2012-04-11T04:51:10.100
> 
> 标签：android, android-layout

我设计了以下布局。在除 wxga 屏幕之外的所有大小的模拟器上都可以正常工作。我也在我的 tegra 2 驱动的 Toshiba AC100 上尝试过，但按钮没有与屏幕右侧对齐，而是缩小并在 textview 右侧可见。在我兄弟的 HVGA xperia mini ST15i 上看起来不错。

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
    <TableRow android:id="@+id/tableRow">
    <ImageView android:id="@+id/image"
               android:layout_width="32dp"
               android:layout_gravity="center_vertical"
               android:layout_marginRight="5dp"
               android:layout_height="32dp"
               android:focusable="false"
               android:focusableInTouchMode="false" />
    <TextView android:id="@+id/text"
              android:layout_width="220dp"
              android:layout_height="wrap_content"
              android:padding="10dp"
              android:focusable="false"
              android:focusableInTouchMode="false" />
    <Button android:id="@+id/button"
            android:layout_width="60dp"
            android:layout_alignParentRight="true"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/button"
            android:focusable="false"
            android:focusableInTouchMode="false" />
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:03:51.477

我用 imageview、textview 和按钮找出 listview 的布局。它在不同的屏幕方向和尺寸下都能很好地工作。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:id="@+id/relativeLayout"
                android:layout_height="wrap_content">
    <ImageView android:id="@+id/drawable_icon"
               android:layout_width="36dp"
               android:layout_centerVertical="true"
               android:layout_marginRight="5dp"
               android:layout_alignParentLeft="true"
               android:layout_height="36dp"
               android:focusable="false"
               android:focusableInTouchMode="false" />
    <TextView android:id="@+id/text"
              android:layout_toRightOf="@id/drawable_icon"
              android:layout_width="wrap_content"
              android:layout_centerVertical="true"
              android:layout_height="wrap_content"
              android:padding="10dp"
              android:layout_marginRight="65dp"
              android:focusable="false"
              android:focusableInTouchMode="false" />
    <Button android:id="@+id/button"
            android:layout_width="60dp"
            android:layout_alignParentRight="true"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginRight="5dp"
            android:text="@string/buttonText"
            android:focusable="false"
            android:focusableInTouchMode="false" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:58:36.230

也许您可以将 LinearLayout 用于 ImageView、TextView 和 Button 的父级。在 LinearLayout 中使用水平方向。如果您希望孩子在所有情况下都可见，您可以在 ImageView、TextView 和 Button 中添加 android:layout_weight="1" 属性。

# .net - 为什么我们应该在 .Net 中使用 Invoke？

> ID：10099978
> 
> 赞同：0
> 
> 时间：2012-04-11T04:51:33.330
> 
> 标签：.net

如果.Net中的Invoke在同一个线程上工作，并且阻塞了调用线程，我们为什么要使用invoke？我们不能直接调用方法而不是使用调用吗？是否有任何特定场景应该使用调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:55:29.240

`Invoke`当您不知道在编译时要执行哪个方法时很有用。

# c# - 我在一个文件夹中有一个 aspx 页面，当通过菜单链接单击时出现错误

> ID：10099986
> 
> 赞同：-1
> 
> 时间：2012-04-11T04:52:25.310
> 
> 标签：c#, asp.net, .net

我遇到的问题是，当我通过菜单链接单击一个名为 Masters 的文件夹中的 aspx 页面时，它没有打开。我收到的错误是找不到 URL [http://ATT1/masters/masters/axy.aspx](http://ATT1/masters/masters/axy.aspx)。我的代码是：

```
<body onload=" $(document).ready(function ()">
    <form id="Form1" runat="server">
    <div class="page" id="container">
    <div class="header" >
        <div class="title">
            My ASP.NET Application
        </div>
        <div class="loginDisplay">
            <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    [ <a href="~/Account/Login.aspx" id="HeadLoginStatus" runat="server">Log In</a>
                    ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold">
                        <asp:LoginName ID="HeadLoginName" runat="server" />
                    </span>! [
                    <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out"
                        LogoutPageUrl="~/" />
                    ]
                </LoggedInTemplate>
            </asp:LoginView>
        </div>
        <div class="nav" style="background-color: #dedede; height: 25px">
            <ul id="nav">
                <li>Master
                    <ul class="nav first">

                        <li><a href="Masters/Employee_Details.aspx">
                            <asp:Image ID="Image39" runat="server" ImageUrl="~/icons/a_g.gif" />Compaines</a></li>
                        <li><a href="Masters/Master_setting.aspx">
                            <asp:Image ID="Image41" runat="server" ImageUrl="easymenu/b_i.gif" />Master Settings</a></li>
                        <li><a href="Masters/Mail_Setting.aspx">
                            <asp:Image ID="Image42" runat="server" ImageUrl="easymenu/email.png" />Mail Settings</a></li>
                        <li><a href="Masters/Shift_List.aspx">
                            <asp:Image ID="Image40" runat="server" ImageUrl="icons/device.gif" />Shift Details</a></li>
                        <li><a href="Masters/Shift%20Calender%20List%20.aspx">
                            <asp:Image ID="Image43" runat="server" ImageUrl="easymenu/oCalendar.gif" />Shift
                            Calenders</a></li>
                        <li><a href="Masters/Shift_Roster_List.aspx">
                            <asp:Image ID="Image44" runat="server" ImageUrl="easymenu/oCalendar.gif" />Shift
                            Rosters</a></li>
                        <li><a href="Masters/Shift_Group.aspx">
                            <asp:Image ID="Image45" runat="server" ImageUrl="icons/device.gif" />Shift Group</a></li>
                        <li><a href="Masters/Leave_Type_List.aspx">
                            <asp:Image ID="Image46" runat="server" ImageUrl="easymenu/b_g.gif" />Leave Types</a></li>
                        <li><a href="Masters/Employee_Category.aspx">
                            <asp:Image ID="Image47" runat="server" ImageUrl="icons/oTasks.gif" />Employees Categories</a></li>
                        <li><a href="">
                            <asp:Image ID="Image48" runat="server" ImageUrl="icons/holiday.gif" />Public Holidays</a></li>
                        <li><a href="">
                            <asp:Image ID="Image49" runat="server" ImageUrl="easymenu/b_b.gif" />Departments</a></li>
                        <li><a href="">
                            <asp:Image ID="Image50" runat="server" ImageUrl="easymenu/b_c.gif" />Departments
                            Shifts</a></li>
                        <li><a href="">
                            <asp:Image ID="Image51" runat="server" ImageUrl="easymenu/b_a.gif" />Employees</a></li>
                        <li><a href="">
                            <asp:Image ID="Image52" runat="server" ImageUrl="easymenu/b_h.gif" />Employees Shifts</a></li>
                        <li><a href="">
                            <asp:Image ID="Image53" runat="server" ImageUrl="easymenu/b_d.gif" />Employees Leave
                            Entries</a></li>
                        <li><a href="">
                            <asp:Image ID="Image54" runat="server" ImageUrl="easymenu/b_d.gif" />Employees OutDoor
                            Entries</a></li>
                        <li><a href="">
                            <asp:Image ID="Image55" runat="server" ImageUrl="easymenu/BackupDataBase.gif" />Attendence
                            Log</a></li>
                        <li><a href="">
                            <asp:Image ID="Image56" runat="server" ImageUrl="easymenu/BackupDataBase.gif" />Manage
                            Work Code</a>
                            <ul class="nav">
                                <li><a href="">Work Code</a></li>
                                <li><a href="">Work Code Wise Daily Report</a></li>
                                <li><a href="">Work Code Wise Summary Report</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="">Device Management</a>
                    <ul class="nav first">
                        <li><a href="">
                            <asp:Image ID="Image57" runat="server" ImageUrl="easymenu/Device.gif" />Device List</a></li>
                        <li><a href="">
                            <asp:Image ID="Image58" runat="server" ImageUrl="icons/logs.gif" />Employee Device
                            Logs</a></li>
                        <li><a href="">
                            <asp:Image ID="Image59" runat="server" ImageUrl="icons/device.gif" />Device Commands</a></li>
                        <li><a href="">
                            <asp:Image ID="Image60" runat="server" ImageUrl="icons/device.gif" />Device Operation
                            Logs</a></li>
                        <li><a href="">
                            <asp:Image ID="Image61" runat="server" ImageUrl="icons/device.gif" />Device Error
                            Messages</a></li>
                    </ul>
                </li>
                <li><a href="">Utilities</a>
                    <ul class="nav first">
                        <li><a href="">
                            <asp:Image ID="Image62" runat="server" ImageUrl="icons/import.gif" />Import Employees
                            Details</a></li>
                        <li><a href="">
                            <asp:Image ID="Image63" runat="server" ImageUrl="icons/import.gif" />Import EmployeesOtherDetails</a></li>
                        <li><a href="">
                            <asp:Image ID="Image64" runat="server" ImageUrl="icons/export.gif" />Export Employees
                            Details</a></li>
                        <li><a href="">
                            <asp:Image ID="Image65" runat="server" ImageUrl="icons/export.gif" />Export Employees
                            Other Details</a></li>
                        <li><a href="">
                            <asp:Image ID="Image66" runat="server" ImageUrl="icons/export.gif" />Export Employees
                            Leave Details</a></li>
                        <li><a href="">
                            <asp:Image ID="Image67" runat="server" ImageUrl="icons/import.gif" />Import Employees
                            Leave Balance</a></li>
                        <li><a href="">
                            <asp:Image ID="Image68" runat="server" ImageUrl="icons/import.gif" />Import Log
                            Records</a></li>
                        <li><a href="">
                            <asp:Image ID="Image70" runat="server" ImageUrl="icons/import.gif" />Parallel Database
                            Export</a></li>
                        <li><a href="">
                            <asp:Image ID="Image69" runat="server" ImageUrl="icons/import.gif" />Export Attendence
                            Logs</a></li>
                    </ul>
                </li>
                <li><a href="">Reports</a>
                    <ul class="nav first">
                        <li><a href="">
                            <asp:Image ID="Image71" runat="server" ImageUrl="easymenu/c_c.gif" />Recalculate
                            Attendence</a></li>
                        <li><a href="">
                            <asp:Image ID="Image72" runat="server" ImageUrl="easymenu/c_c.gif" />Daily Attendence
                            Report</a></li>
                        <li><a href="">
                            <asp:Image ID="Image73" runat="server" ImageUrl="easymenu/c_c.gif" />Monthly Status</a></li>
                        <li><a href="">
                            <asp:Image ID="Image74" runat="server" ImageUrl="easymenu/c_c.gif" />Yearly Summary</a></li>
                        <li><a href="">
                            <asp:Image ID="Image75" runat="server" ImageUrl="easymenu/c_c.gif" />Attendence
                            Sumary Report</a></li>
                        <li><a href="">
                            <asp:Image ID="Image76" runat="server" ImageUrl="easymenu/c_c.gif" />Leave Summary</a></li>
                        <li><a href="">
                            <asp:Image ID="Image77" runat="server" ImageUrl="easymenu/c_c.gif" />Employees Details</a></li>
                        <li><a href="">
                            <asp:Image ID="Image78" runat="server" ImageUrl="easymenu/c_c.gif" />Employees Shift
                            Scheduler</a></li>
                        <li><a href="">
                            <asp:Image ID="Image79" runat="server" ImageUrl="easymenu/c_c.gif" />Department
                            Summary</a></li>
                        <li><a href="">
                            <asp:Image ID="Image80" runat="server" ImageUrl="easymenu/c_c.gif" />Log Records</a></li>
                        <li><a href="">
                            <asp:Image ID="Image81" runat="server" ImageUrl="easymenu/c_c.gif" />Random Check
                            Report</a></li>
                        <li><a href="">
                            <asp:Image ID="Image82" runat="server" ImageUrl="easymenu/c_c.gif" />Leave Entry
                            Report</a></li>
                        <li><a href="">
                            <asp:Image ID="Image83" runat="server" ImageUrl="easymenu/c_c.gif" />OutDoor Entry
                            Report</a></li>
                        <li><a href="">
                            <asp:Image ID="Image84" runat="server" ImageUrl="easymenu/c_c.gif" />Daily Log Report
                            Matrix</a></li>
                        <li><a href="">
                            <asp:Image ID="Image85" runat="server" ImageUrl="easymenu/c_c.gif" />Last Day Status
                            Report</a></li>
                        <li><a href="">
                            <asp:Image ID="Image86" runat="server" ImageUrl="easymenu/c_c.gif" />Continuous
                            Abnormality</a></li>
                        <li><a href="">
                            <asp:Image ID="Image87" runat="server" ImageUrl="easymenu/c_c.gif" />Muster Roll
                            Report</a></li>
                        <li><a href="">
                            <asp:Image ID="Image88" runat="server" ImageUrl="easymenu/c_c.gif" />Form J Report</a></li>
                        <li><a href="">
                            <asp:Image ID="Image89" runat="server" ImageUrl="easymenu/c_c.gif" />Detailed Form
                            J Report</a></li>
                        <li><a href="">
                            <asp:Image ID="Image90" runat="server" ImageUrl="easymenu/c_c.gif" />Generate memo</a></li>
                        <li><a href="">
                            <asp:Image ID="Image91" runat="server" ImageUrl="easymenu/c_c.gif" />Special Reports</a>
                            <ul class="nav">
                                <li><a href="">Departments vs EmploymentType Matrix</a></li>
                                <li><a href="">Company vs EmploymentType Matrix</a></li>
                                <li><a href="">Department Graph</a></li>
                                <li><a href="">Company Graph</a></li>
                            </ul>
                        </li>
                        <li><a href="">
                            <asp:Image ID="Image92" runat="server" ImageUrl="easymenu/c_c.gif" />Export Logs</a>
                            <ul class="nav">
                                <li><a href="">Export Attendence Logs</a></li>
                                <li><a href="">Attendence Logs (Employee Wise)</a></li>
                                <li><a href="">Export Device Logs</a></li>
                                <li><a href="">Export Logs in Custom Format</a></li>
                                <li><a href="">Logs in Third Party Payroll Format</a></li>
                                <li><a href="">SAP P10/ P20 Export</a></li>
                            </ul>
                        </li>
                        <li><a href="">
                            <asp:Image ID="Image93" runat="server" ImageUrl="easymenu/c_c.gif" />Extra Reports</a>
                            <ul class="nav">
                                <li><a href="">Custom Monthly Status Report</a></li>
                                <li><a href="">Monthly Late Arrival Early Departure Report</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="">System User</a></li>
                <li><a href="">Database Setting</a></li>
                <li><a href="">Change Password</a></li>
                <li><a href="">About</a>
                    <ul class="nav first">
                        <li><a href="">Help Manual</a></li>
                        <li><a href="">About Us</a></li>
                        <li><a href="">Extend Evaluation</a></li>
                    </ul>
                </li>
                <li><a href="">Logoff</a></li>
            </ul>
        </div>
        <div style="background-image: url('images/title2.jpg ')">
            <asp:Image ID="Image36" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image1" runat="server" ImageUrl="~/easymenu/a_a.gif" />
            <asp:Image ID="Image2" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image3" runat="server" ImageUrl="~/easymenu/a_d.gif" />
            <asp:Image ID="Image5" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image4" runat="server" ImageUrl="~/easymenu/a_e.gif" />
            <asp:Image ID="Image6" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image7" runat="server" ImageUrl="~/easymenu/b_i.gif" />
            <asp:Image ID="Image8" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image9" runat="server" ImageUrl="~/easymenu/a_c.gif" />
            <asp:Image ID="Image10" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image11" runat="server" ImageUrl="~/easymenu/b_b.gif" />
            <asp:Image ID="Image12" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image13" runat="server" ImageUrl="~/icons/holiday.gif" />
            <asp:Image ID="Image15" runat="server" ImageUrl="~/icons/device.gif" />
            <asp:Image ID="Image14" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image17" runat="server" ImageUrl="~/easymenu/oCalendar.gif" />
            <asp:Image ID="Image16" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image19" runat="server" ImageUrl="~/icons/oTasks.gif" />
            <asp:Image ID="Image18" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image21" runat="server" ImageUrl="~/easymenu/b_g.gif" />
            <asp:Image ID="Image20" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image23" runat="server" ImageUrl="~/easymenu/b_c.gif" />
            <asp:Image ID="Image22" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image25" runat="server" ImageUrl="~/easymenu/b_a.gif" />
            <asp:Image ID="Image24" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image27" runat="server" ImageUrl="~/easymenu/b_h.gif" />
            <asp:Image ID="Image26" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image29" runat="server" ImageUrl="~/easymenu/b_f.gif" />
            <asp:Image ID="Image28" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image31" runat="server" ImageUrl="~/easymenu/b_f.gif" />
            <asp:Image ID="Image30" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image33" runat="server" ImageUrl="~/icons/logs.gif" />
            <asp:Image ID="Image32" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image35" runat="server" ImageUrl="~/easymenu/BackupDataBase.gif" />
            <asp:Image ID="Image34" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
            <asp:Image ID="Image37" runat="server" ImageUrl="~/easymenu/a_g.gif" />
            <asp:Image ID="Image38" runat="server" ImageUrl="~/easymenu/header_divider.gif" />
        </div>            
        <%--<a class="vlightbox1" href="" title="10" id="firstImage">
        <img src="images/calender.jpg" alt="10"/></a>--%>
    </div>
    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server" />
    </div>
    </div>
    <div class="clear">
    </div>     
    <div id="popup_box" style="width:445px; margin-top:50px; margin-left:50px" >
        <table id="" style="width:445px" cellpadding="0" cellspacing="0"  align="center">
        <tr>
        <td style="background-color:#0099CC; height:25px">
            <asp:Label ID="Label1" runat="server" Text=" Login Form"></asp:Label><a id="popupBoxClose">Close</a></td>            
        </tr>
            <tr style="font-size: 0;">               
                <td>
                    <img src="images/login-header.gif" />
                </td>
            </tr>
            <tr>
                <td style="padding-left: 30px; padding-top: 20px;" align="left">
                    <table id="" cellpadding="1px" style="width:350px;" >
                        <tr>
                            <td style="width:100px;" align="right">
                                <b><asp:Label ID="Label2" runat="server" Text="Login Name"></asp:Label></b></td>
                            <td align="left">
                                <asp:TextBox ID="txt_LoginName" runat="server" Width="210px"></asp:TextBox></td>
                        </tr>
                        <tr>
                            <td align="right">
                                <b><asp:Label ID="Label3" runat="server" Text="Password"></asp:Label></b></td>
                            <td  align="left">                                    
                                <asp:TextBox ID="Txt_Password"  runat="server" TextMode="Password"  Width="210px"></asp:TextBox></td>
                        </tr>
                        <tr><td colspan="2"  align="right"  >
                        <table id="" width="100%"><tr><td>
                  <%--    <cc1:captchacontrol id="CaptchaControl1" runat="server" CaptchaChars="ACDEFGHJKLNPQRTUVXYZ2346789" CaptchaMinTimeout="3" ErrorMessage="" Text="Enter the code shown:"></cc1:captchacontrol>--%></td><td><asp:ValidationSummary  ID="ValidationSummary2" runat="server" Visible="False"  />
                       </td></tr></table>
                        </td></tr>
                        <tr>
                            <td align="right" colspan="2" >
                            <table>
                            <tr>
                            <td>
                            <asp:Label ID="lbl_InValidError" runat="server" EnableViewState="False" ForeColor="Red"></asp:Label>
                            </td>
                            <td align="right">
                                <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/images/login_btn.jpg" />
                            &nbsp;&nbsp;&nbsp;
                            </td>
                            </tr>
                            </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        </div>
<div class="footer">
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:55:15.267

如果您作为示例显示的页面位于 Masters 文件夹中，则其上的链接将与该文件夹相关。

href="Masters/Master_setting.aspx" 将给出 "Masters/Masters/Master_setting.aspx"

所以正如 V4Vendetta 的评论所说，从相对链接中删除 Masters，或者使用绝对链接，例如 href="~/Masters/Master_setting.aspx"

# haskell - Haskell：TVar：防止饥饿

> ID：10099990
> 
> 赞同：7
> 
> 时间：2012-04-11T04:53:02.967
> 
> 标签：haskell, concurrency, ghc, stm, tvar

我正在考虑使用 TVar 在 Web 应用程序中存储一些状态（可以在重新启动时重新创建）。但是，我担心 TVar 的争用方面。似乎频繁的短时间运行的事务可以通过不断地中断较长的事务来饿死它们。此外，随着更多运行时间较长的事务不断重启，这将增加 CPU 的负载，从而进一步增加这些事务的长度。最终我觉得这可能会导致服务器完全没有响应。

考虑到这一点，我有以下问题：

(1) TVar（或其他数据类型）可以使用锁，而不是同时尝试/重试。

（2）TVar（或其他数据类型）能否有一些不同的争用机制，即“让事务在运行另一个事务之前运行一秒钟”，或者至少有一些保证事务最终会完成（即[防止](http://en.wikipedia.org/wiki/Resource_starvation)对运行时间更长的事务）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T05:35:41.547

我认为没有办法保证饥饿自由，除非您更改 STM 系统本身的运行时代码。在我看来，引入锁以避免争用`TVars`首先违背了拥有 STM 的目的，因为使用 STM 的全部目的是摆脱经典的容易出错的基于锁的并发编程方法。

当然，饥饿可能会导致显着的性能损失，但前提是这样的大事务实际上是*必要*的。我试图记住的一个设计原则是`TVars`在低粒度级别上使用。例如，您可以使用更适合 STM 的数据结构，例如跳过列表 [1]，而不是将整个`Data.Map`放入 a`TVar`中，这可能会导致每次更新条目时发生争用。

[1] [http://hackage.haskell.org/package/tskiplist](http://hackage.haskell.org/package/tskiplist)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T05:37:48.100

仅当您有许多更新数据的廉价事务和读取数据的一些昂贵事务时，这才是一个问题。也许是对实时更新的数据集进行分析。

如果您确实对此感到担忧，请考虑使用标志 TVar。将其设置为 false 并在每次廉价交易开始时检查它是否为 false，`retry`否则调用。然后在进入您的长期事务之前将其设置为 true，并在退出时将其设置为 false。或者，您可以简单地将您的状态保护在`TMVar`. 您的长时间运行计算以原子方式获取 tmvar，执行其感觉，然后返回它。其他事务完全发生在一个实际的 STM 事务中。

还要记住，长时间运行的 STM 事务是一种棘手的野兽。由于懒惰，您可以廉价地将昂贵的值放入 var 中。您还可以非常快速地从一大堆变量中读取数据的“快照”。要进行真正长时间运行的事务，您需要从一大堆 var 中读取，然后根据您已阅读的内容，计算您将要写入新值（或从中读取值）的 var，以及计算*本身*一定很贵。很可能你甚至一开始都不在那种情况下！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:17:06.677

这是对克林顿对彼得斯回答的评论之一的评论。但它变得很长。

考虑一下，您有两个银行账户：A 和 B。每个账户都有自己的锁保护。现在，您有两个事务，第一个是从 A 到 B 的资金转移，第二个是从 B 到 A 的事务。每个事务首先获取源帐户的锁定，然后获取目标帐户的锁定，转移资金并释放锁定。如果你不走运，这两个交易将陷入死锁，这两个帐户将永远不会做任何事情。如果您在 STM 中这样做，它们将相互追逐。如果你有无数的第一种，他们可能会饿死第二次交易。但是您仍然可以完成很多工作。在锁定的情况下，什么都不会发生。

STM 保证不存在与 TVar 的数据竞争！没有任何。通过锁定，您可以在非常仔细地检查您的代码后得出该结论。您添加的每一行都可能使您的结论完全无效。

# windows-phone-7 - 如何以编程方式更改“ListPicker”控件的属性“SelectedValue”的值

> ID：10099992
> 
> 赞同：0
> 
> 时间：2012-04-11T04:53:19.550
> 
> 标签：windows-phone-7

我有两个“ListPicker”控件。我怎样才能做到这一点，以便在用户更改这些控件之一的“SelectedValue”属性后，第二个控件的相应属性也会更改？

有人可以给我们举个例子吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:12:54.943

您可以像此代码一样设置选择项目。当您填写列表时，您可以设置所选项目属性。

```
 private void FillAssetType(int assetTypeID)
        {
            List<TbAssetType> lst = Asset.GetAssetType();
            TbAssetType tb = new TbAssetType { AssetTypeName = "Select Asset Type" };
            lst.Insert(0, tb);
            lstpickAssetType.ItemsSource = lst;
            lstpickAssetType.SelectedItem = lst.Where(p => p.AssetTypeID == assetTypeID).FirstOrDefault();
        } 
```

# php - 行成列和/或php中的交叉表数组

> ID：10099998
> 
> 赞同：0
> 
> 时间：2012-04-11T04:53:52.940
> 
> 标签：php, mysql, crosstab

我有这个帐单表，我可以根据报告要求从中获取记录。

我得到的数组是这样的：

```
Array(
[0] => stdClass Object
    (
        [bid] => 3
        [uid] => 2
        [total_inc] => 100
        [total_exp] => 55
        [mon] => 1
        [year] => 2012
        [mstdatereg] => 2012-03-14
    )

[1] => stdClass Object
    (
        [bid] => 2
        [uid] => 3
        [total_inc] => 85
        [total_exp] => 45
        [mon] => 1
        [year] => 2012
        [mstdatereg] => 2012-03-14
    )

[2] => stdClass Object
    (
        [bid] => 1
        [uid] => 8
        [total_inc] => 130
        [total_exp] => 75
        [mon] => 1
        [year] => 2012
        [mstdatereg] => 2012-03-14
    )

[3] => stdClass Object
    (
        [bid] => 5
        [uid] => 25
        [total_inc] => 130
        [total_exp] => 65
        [mon] => 2
        [year] => 2012
        [mstdatereg] => 2012-03-14
    )

[4] => stdClass Object
    (
        [bid] => 4
        [uid] => 27
        [total_inc] => 75
        [total_exp] => 50
        [mon] => 2
        [year] => 2012
        [mstdatereg] => 2012-03-14
    )

[5] => stdClass Object
    (
        [bid] => 10
        [uid] => 3
        [total_inc] => 180
        [total_exp] => 100
        [mon] => 3
        [year] => 2012
        [mstdatereg] => 2012-04-05
    )

[6] => stdClass Object
    (
        [bid] => 6
        [uid] => 12
        [total_inc] => 60
        [total_exp] => 35
        [mon] => 3
        [year] => 2012
        [mstdatereg] => 2012-03-14
    )

[7] => stdClass Object
    (
        [bid] => 7
        [uid] => 22
        [total_inc] => 160
        [total_exp] => 90
        [mon] => 3
        [year] => 2012
        [mstdatereg] => 2012-03-14
    )

[8] => stdClass Object
    (
        [bid] => 9
        [uid] => 3
        [total_inc] => 115
        [total_exp] => 70
        [mon] => 4
        [year] => 2012
        [mstdatereg] => 2012-03-16
    )
) 
```

我通过循环所做的结果是这样的：

```
 January, 2012
        ==========
        Income  Expense
    2   100     55
    3   85      45
    8   130     75
    ---------------------------------
Total   315     175

        February, 2012
        ===========
        Income  Expense
    25  130     65
    27  75      50
    ---------------------------------
Total   205     115

        March, 2012
        Income  Expense
    3   180     100
    12  60      35
    22  160     90
    ---------------------------------
Total   400     225

        April, 2012
        Income  Expense
    3   115     70
    ---------------------------------
Total   115     70

Net Total Income: 1035
Net Total Expense: 585code here 
```

但是我想要的是

```
Sr.No   Member  1, 2012     2, 2012     3, 2012     4, 2012     Total
                Inc|Exp     Inc|Exp     Inc|Exp     Inc|Exp     Inc|Exp 
=======================================================================
1       2       100|55                                          100|55
2       3       85|45                   180|100     115|70      380|215
3       8       130|75                                          130|75  
4       25                  130|65                              130|65
5       27                  75|50                               75|50
6       12                              60|35                   60|35
7       22                              160|90                  160|90  
=======================================================================
Total           315|175     205|115     400|225     115|70      1035|585 
```

在发布之前，我搜索了这样的问题，这就是我发现的：[Building a "crosstab" or "pivot" table from an array in php](https://stackoverflow.com/questions/712186/building-a-crosstab-or-pivot-table-from-an-array-in-php)

我试图让它按照我的要求工作，但 cud 不这样做。

已经尝试了很多天了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:16:10.683

我认为你会更幸运地使用 SQL 来为你做大部分的数字运算。

过程比较简单，那么：

1.  确定要在表中表示的月份（列）。
2.  使用 GROUP BY 将您的数据按 Sr. No（或您想使用的任何内容）分成几行
3.  使用 WHERE 子句删除不在您选择的日期范围内的数据（即，如果报告仅适用于 2 月和 3 月，则不包括 1 月）
4.  Totals 列是给定行的收入或费用的总和（请记住，行是使用您之前选择的标准分组的）
5.  单个月份列是 IF 的总和（日期在该列的月份，金额，0）
6.  总计行在您的 PHP 中计算

您可以通过编程方式生成月份列代码。

下面是一些代码示例，用于为给定的一组月-年组合生成查询（未经测试）。从这里把它放到一个表中是微不足道的（你只需要在 PHP 中计算总计行）。

```
$qstr = 'SELECT bid, uid, ';
$reportMonths = array(1 => 2012, 2 => 2012, 3 => 2012, 4 => 2012);

foreach ($reportMonths as $mon => $year) {
    $qstr .= "SUM(IF(mon=$mon AND year=$year),total_inc,0)) as $mon-inc, SUM(IF(mon=$mon AND year=$year,total_exp,0)) as $mon-exp, ";
}

$qstr .= 'SUM(total_inc) as total-inc, SUM(total_exp) as total-exp from bill_mst WHERE ';

foreach ($reportMonths as $mon => $year) {
    $qstr .= '(mon=$mon AND year=$year) OR ';
}
// chop off last or
$qstr = substr($qstr, 0, -3);
$qstr .= 'GROUP BY bid, uid ASC';

$res = mysql_query($qstr); 
```