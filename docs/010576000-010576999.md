# StackOverflow 问答 10576000-10576999

# css - How to get the CSS rules compatible with a node?

> ID：10576003
> 
> 赞同：2
> 
> 时间：2012-05-13T23:25:09.263
> 
> 标签：css, google-chrome, webkit

It's possible to know what CSS rules is applied to a specific node?

Example:

```
<div class="test-node">
  <strong>Test</strong>
</div> 
```

And the CSS rules:

```
div           { color: blue }
div:hover     { color: green; }
.test-node    { font-weight: bold; }

div > strong  { color: red; } 
```

So, the `div` node is affected by two rules `div` and `.test-node` and the `div:hover` if hover node only. The `strong` node is affected by `div` and `div:hover` rule, because it is inner a `div`, but the `color` property is overwrited by your own rule `div > strong` (example [http://jsfiddle.net/yyf9v/](http://jsfiddle.net/yyf9v/)).

Basically I need discovery how I can do the samething that *Chrome Inspector* does in javascript. If you use Chrome, go to Inspector (CTRL + Shift + J, Elements and select a node). You will se a *Styles* tab, that show `element.style` rule (attribute `style` basically) and the *Matched CSS Rules*... I need this!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:54:11.803

你为什么不在firefox上试试firebug ......就像谷歌浏览器中的检查员......

它显示了应用于特定节点的所有 CSS 类以及它继承的内容和覆盖的内容。

你可以在这里找到它

[http://getfirebug.com/](http://getfirebug.com/)

和这里

[https://addons.mozilla.org/en-US/firefox/addon/firebug/](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

# jquery - 根据内容动态调整 iframe 高度

> ID：10576005
> 
> 赞同：3
> 
> 时间：2012-05-13T23:25:31.603
> 
> 标签：jquery, ajax, iframe, height, computed-style

关于如何动态更改 iframe 高度有很多答案。我尝试了插件[https://github.com/house9/jquery-iframe-auto-height](https://github.com/house9/jquery-iframe-auto-height)

该插件适用于 iframe 加载，但是，如果内容不重新加载（例如 ajax），高度不会根据 iframe 内容内的变化动态变化。

我的问题是：如何在内容改变高度时动态改变 iframe 的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:21:59.690

> 编辑...好吧，我的朋友告诉我正确的方法。我从主窗口中删除了插件并将这个 jquery 代码添加到 iframe 页面：

_

```
setInterval(function(){
    //console.log($("body").height());
    parent.$("iframe").height($("body").height());
}, 100); 
```

> 但是有一个问题，就是在扩展之后，高度并没有改变到它的第一个状态。它会变大，但如果我关闭手风琴，它不会变小......这个问题只在Chrome浏览器中......
> 
> 看起来是 Chrome 错误，因为如果您尝试调整 Chrome 窗口的大小，iframe 会恢复到正常高度。在 IE9 和 FF12 上工作正常。

# django - 不能在另一个查询集中使用一个查询集吗？

> ID：10576007
> 
> 赞同：0
> 
> 时间：2012-05-13T23:25:33.703
> 
> 标签：django

模型：

```
class Car(models.Model):
    ...

class CarInstance(models.Model):
    car =  models.ForeignKey(Car) 
```

不能在另一个查询集中使用一个查询集吗？喜欢：

```
data1 = Car.objects.filter(id__in = [1,3,6])
data2 = CarInstance.objects.filter(car = data1) 
```

我将来需要使用这两个查询集对象。Car 可以有几个 CarInstance 对象。我认为不可能像`data2__data1`.

并像这样循环：

```
car_list = []
for i in data1:
  car_list.append(i.id)
data2 = CarInstance.objects.filter(car__in = car_list) 
```

看起来无效。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:42:58.260

看起来你想这样做

```
data2 = CarInstance.objects.filter(car__id__in = [1,3,6]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:01:00.637

如果您想从 data1 对象中获取 id，请使用：

```
data1_id = Car.objects.filter(id__in = [1,3,6]).values_list('id', flat=True) 
```

# sql - SQL - 如何返回 TOP 5 最高收入年份？

> ID：10576009
> 
> 赞同：0
> 
> 时间：2012-05-13T23:25:39.227
> 
> 标签：sql

我有一张`paystub`记录工资单记录的表。

与此查询相关的字段是`YearToDateGrossPay`和`year`。

我需要*搜索所有的 paystub 记录并**选择前 5 个最高薪年***。

每年的最后一个工资单会告诉我该年的最终 YTD 金额，然后我可以选择该子查询的前 5 个，但我不太确定该怎么做。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:31:02.467

如果您已经有选择最终 YTD 金额的子查询，您可以通过

```
SELECT * FROM final_ytd_amounts ORDER BY ytd_amount DESC LIMIT 5 
```

ORDER BY ytd_amount DESC 按 ytd_amount 降序对表进行排序

LIMIT 5 只选择前 5 行，并切掉其他所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T01:32:49.177

如果您使用的是 SQL Server，则上述方法将不起作用。通常，您应该在询问查询时指定特定的数据库。在 SQL Server 中，您可以执行以下操作：

```
SELECT top 5 *
FROM final_ytd_amounts
ORDER BY ytd_amount DESC 
```

为了完整起见，以下是您在 Oracle 中执行此操作的方式：

```
SELECT *
FROM final_ytd_amounts
where rownum <= 5
ORDER BY ytd_amount DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:54:31.173

标准 SQL：

```
SELECT * 
FROM final_ytd_amounts 
WHERE ROWNUM <= 5 
ORDER BY ytd_amount DESC 
```

# c# - 如何获取 xml 文件的所有节点？

> ID：10576010
> 
> 赞同：0
> 
> 时间：2012-05-13T23:25:42.457
> 
> 标签：c#, xml, parsing, nodes

假设我有这个 XML 文件：

```
<Names>
    <Name>
        <FirstName>John</FirstName>
        <LastName>Smith</LastName>
    </Name>
    <Name>
        <FirstName>James</FirstName>
        <LastName>White</LastName>
    </Name>
</Names> 
```

现在我想打印节点的所有名称：

```
Names
Name
FirstName
LastName 
```

我设法在 XmlNodeList 中获取所有内容，但我不知道 SelectNodes 是如何工作的。

```
XmlNodeList xnList = xml.SelectNodes(/*What goes here*/); 
```

我想选择所有节点，然后执行 xnList 的 foreach （使用我假设的 .Value 属性）。

这是正确的方法吗？如何使用 selectNodes 选择所有节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:29:23.357

确保您在范围内具有 LINQ 和 LINQ to XML：

```
using System.Linq;
using System.Xml.Linq; 
```

如果将它们加载到`XDocument`：

```
var doc = XDocument.Parse(xml);    // if from string
var doc = XDocument.Load(xmlFile); // if from file 
```

您可以执行以下操作：

```
doc.Descendants().Select(n => n.Name).Distinct() 
```

这将为您提供文档中所有不同`XName`元素的集合。如果您不关心 XML 命名空间，可以将其更改为：

```
doc.Descendants().Select(n => n.Name.LocalName).Distinct() 
```

这将为您提供所有不同元素名称的集合作为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:33:43.077

有几种方法可以做到这一点。

使用 XDocument 和 LINQ-XML

```
foreach(var name in doc.Root.DescendantNodes().OfType<XElement>().Select(x => x.Name).Distinct()) 
{ 
    Console.WriteLine(name); 
} 
```

如果您使用的是 C# 3.0 或更高版本，则可以执行此操作

```
var data = XElement.Load("c:/test.xml"); // change this to reflect location of your xml file 
var allElementNames =  
(from e in in data.Descendants() 
select e.Name).Distinct(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T23:42:16.493

添加

```
 using System.Xml.Linq; 
```

然后你可以做

```
var element = XElement.Parse({Your xml string});

    Console.Write(element.Descendants("Name").Select(el => string.Format("{0} {1}", el.Element("FirstName").Value, el.Element("LastName").Value))); 
```

# maven - Maven 配置文件未部署以使用 maven-tomcat-plugin 更正 tomcat

> ID：10576011
> 
> 赞同：2
> 
> 时间：2012-05-13T23:25:44.093
> 
> 标签：maven, tomcat7, maven-tomcat-plugin

所以我的 Maven 不想选择正确的配置文件，不管我怎么说：

`mvn -Denv=dev tomcat7:deploy-only`或者`mvn -P dev -Denv=dev tomcat7:deploy-only`

我在我的服务器上配置了两台服务器，`settings.xml`并且下面的配置指向正确的服务器。

使用`mvn -X`它似乎 Maven 总是按照它出现在文件中的顺序选择最后一个服务器，这意味着它正在选择`prod`服务器。

任何线索任何人？谢谢！

这是我的`<profiles>`：

```
<profiles>
<profile>
  <id>dev</id>
  <activation>
    <property>
      <name>env</name>
      <value>dev</value>
    </property>
  </activation>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.0-beta-1</version>
        <configuration>
          <server>dev</server>
          <url>http://localhost:8080/manager/text</url>
          <username>tomcat</username>
          <password>tomcat</password>
          <path>/</path>
        </configuration>
      </plugin>
    </plugins>
  </build>
</profile>
<profile>
  <id>prod</id>
  <activation>
    <property>
      <name>env</name>
      <value>prod</value>
    </property>
    <jdk>1.6</jdk>
  </activation>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.0-beta-1</version>
        <configuration>
          <server>prod</server>
          <url>http://remote/manager/text</url>
          <username>usr</username>
          <password>pwd</password>
          <path>/</path>
        </configuration>
      </plugin>
    </plugins>
  </build>
</profile>
</profiles> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:44:02.210

`<jdk>1.6</jdk>`您的产品资料中有一个额外的“激活” 。激活是“或”，而不是“与”。我猜您正在使用 jdk6 运行 maven，因此 prod 始终处于活动状态。作为 pom 中的最后一个，它的设置将获胜——maven 中的一般规则。

# c# - 在 C# 应用程序中捆绑 2 个 .exe

> ID：10576013
> 
> 赞同：1
> 
> 时间：2012-05-13T23:25:51.213
> 
> 标签：c#, exe, process.start

我想编写一个使用 Process.Start 启动另一个应用程序的应用程序，但该应用程序是一个 .exe，我可以将它捆绑到我的 C# 应用程序中，而不会将它放在文件夹之外吗？我想做它，所以我的应用程序根本不需要安装，那么它可以在应用程序中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T00:35:29.477

不完全确定我是否理解，但您的意思是这样您就可以将它作为单个 .exe 发送并发送（而不是全部压缩）？

您能否将 .exe 作为[嵌入式资源嵌入](http://support.microsoft.com/kb/319292)并让您自己的 .exe 将其放入一些临时文件中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:22:55.913

你想让两个exe看起来像一个exe吗？

没有合理的方法可以做到这一点。您是否正在使用其他人的程序并且不想让人们知道？

# c - 无法启动程序，找不到指定的文件，Visual Studio 11

> ID：10576014
> 
> 赞同：3
> 
> 时间：2012-05-13T23:26:20.317
> 
> 标签：c, windows, visual-studio-2012

我正在 Windows 7 64 位机器上全新安装 VS 11 Beta。当我尝试调试时，它给了我这个错误消息。

“无法启动程序 'C:\Users\myname\documents\Visual Studio 11\Projects\Project1\Debug\Project1.exe”

我几乎完全确定这不是我的代码的问题——它在在线编译器上运行良好，这让我认为这是我如何保存它的问题。以防万一，就在这里。

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
printf("Hello, world!\n");
return 0;
} 
```

我创建项目/文件的过程是创建一个新的空 Visual C++ 项目，然后创建一个 .cpp 文件，编写我的代码，将其保存为 .c 在我提示的第一个文件夹中，在项目文件夹中，然后尝试调试。

我在这里做错了什么？我知道调试文件夹是空的，但我不知道如何创建应该驻留在其中的 .exe 文件。

注意：我对编程比较陌生。如果可以用婴儿语来表达答案，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:52:05.117

好吧，可能有很多事情是错误的。但是，根据您对制作 ccp 文件*和*ac 文件的描述，我敢打赌这是您的 VS 11 项目中的问题，而不是代码本身。我的猜测是 c 文件没有包含在您的项目中（检查解决方案资源管理器），或者您在 cpp 和 c 文件中都定义了 main（或 _tmain）函数，这将使链接器出现问题一个错误。

VS 2010 及更早版本的在线“Hello World”教程有很多，但 VS 11 Beta 似乎还没有很多。您可能想查看 2010 版本。我找到[了这个视频教程](http://www.youtube.com/watch?v=Fr822bJuzmc)，你可能想看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:21:28.313

检查输出目录。您还可以手动设置输出目录来保存构建的 exe 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:23:30.243

我知道这个问题是从 5 月开始的，但我想我会用一个对我有用的解决方案来回答：

我在一个空白项目中创建一个`.cpp`文件并且遇到了类似的错误。我注意到该文件有一个名称，但没有显示扩展名`.cpp`。我将扩展名添加到文件 ( `ex3.18.cpp`) 并且没有`.exe`再次收到错误。

我不知道这对您的问题是否有意义，但我为此工作了两天，卸载并重新安装 VS 11，这最终奏效了。

# c# - 构造函数中的 new 和成员声明中的 new 有什么区别？

> ID：10576015
> 
> 赞同：10
> 
> 时间：2012-05-13T23:26:25.840
> 
> 标签：c#, constructor, member

`new`构造函数和`new`成员声明有什么区别？

例子

```
public class PspGame {

  private List<string>name = new List<string>();
  private List<string>_value;

  public PspGame() {
    _value = new List<string>();
  }
} 
```

最好的方法是什么，是否存在任何性能问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T23:31:38.667

它们几乎是等价的（性能和内存使用方面的任何差异都可以忽略不计）。唯一真正的区别是当你这样做时：

```
private List<string>name = new List<string>(); 
```

...无论使用什么构造函数来创建对象的实例，分配总是会发生。当您在构造函数中进行赋值时，只有在使用该特定构造函数时才会发生。

因此，如果您有多个构造函数，但您总是希望以`name`完全相同的方式进行初始化，那么使用第一种形式比在每个构造函数中显式初始化它要短一些。

然而，作为一般规则，我更喜欢在构造函数实现中初始化字段，即使在某些情况下它确实会使代码更加冗长。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T23:29:38.073

对我来说，在构造函数（非默认构造函数）中有一个参数可以进行更好的测试。您可以将某些数据“注入”到成员字段中，如果不将该成员公开（或至少是内部的）或使用“setter”属性进行第二次调用，您不一定能够做到这一点。

因为你可以有多个构造函数，如果你真的想要的话，你可以有第二个用于测试，结合默认构造函数。

没有任何真正的性能问题，除了必须在以后进行单独调用以填充数据，或者具有对类的多次调用（一个用于创建对象，第二个用于填充成员）的可维护性较差的代码。

**编辑**：我意识到我有点回答了错误的问题。我以为他在问默认构造函数和非默认构造函数之间的区别。现在我看到它是关于一个默认构造函数，它在构造函数与成员声明中初始化成员......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T23:30:30.283

两者是等价的。编译器将任何此类成员的初始化移动到构造函数（如果成员是静态的，则为静态构造函数）。我不会说有一种通用的最佳方式来做到这一点——只要在可能的情况下保持一致，如果在这种情况下更有意义，那就使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T23:30:49.087

在构造函数中初始化实例成员，在声明中初始化类成员。AFAIK 这是（仅）约定，并且没有性能损失。恕我直言，这应该被强制纳入语言规则（语法/语义）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T03:14:20.743

在构造函数中初始化字段也可以避免这个问题：

```
class MyClass
{
    private List<string> _list = new List<string>();
    public MyClass()
    {
        //some logic here
    }
    public MyClass(List<string> initialList) : this()
    {
        _list = initialList;
    }
} 
```

使用此代码，如果您调用第二个构造函数，您将不必要地创建一个几乎立即被放弃并符合垃圾回收条件的列表。

# sql - 是否可以从 1 个控制器向 2 个表插入数据？

> ID：10576017
> 
> 赞同：0
> 
> 时间：2012-05-13T23:26:51.283
> 
> 标签：sql, sql-server

这是我的数据库。我想做一个存储过程来将数据插入到 Reservation 表中。我想插入 room_id、数据签入和其他字段，但我想从 Guest 表中放入名字、姓氏、电话和其他字段，而不是 guest_id。这可能吗？

![在此处输入图像描述](../Images/046c6879c0fcd2b685e7234672b0faa2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T23:43:30.607

无论发布什么数据，您都可以插入任意数量的表格。控制器与表无关，因此没有限制。

我建议尝试写一些东西，如果你能让它工作，在这里发布你的尝试（堆栈溢出......不是这个特定的帖子）描述什么不起作用。这更适合 SO 格式，而不是模糊的非代码特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:52:55.303

我将创建 2 个存储过程。一个用于保存客人信息，一个用于保存预订信息。

```
CREATE PROCEDURE SaveGuest(@firstName varcahr(50),@lastName varchar(50),@phone varchar(15))
AS
 BEGIN

    INSERT INTO Guest(FirstName,LastName,Phone) VALUES (@firstName,@lastName,@phone);
    RETURN SCOPE_IDENTITY()

 END 
```

调用 Second Proc 的过程

```
CREATE PROCEDUE SaveReservation(@roomId int,@guestId int,@price decimal)
AS
 BEGIN
   INSERT INTO Reservation(Room_ID,Guest_ID,Price) VALUES (@roomID,@guestId,@price)
   RETURN SCOPE_IDENTITY()
 END 
```

这是一个样本。您需要为所有不为空的数据库列添加字段。

现在创建 2 个方法来保存这些数据。`SaveGuest`和`SaveReservation`。从您的 SaveGuest 方法返回新保存的访客 ID。现在在您的操作方法调用中，首先是 SaveGuest 方法。检查方法的返回值。如果是有效号码，则表示客人信息已保存。使用该访客 ID 保存第二部分（预订）；像这样的东西

```
public ActionResult SAve(YourViewMolde model)
{
int guestId=  SaveGuest("john","alex",....);
if(guestID>0)
 {
   SaveReservation(guestId,34,...);
 }
 else
 {
   model.AddModelError("","Error in saving Guest info!");
 }
} 
```

# php - 未定义索引 - PHP MySQL

> ID：10576020
> 
> 赞同：-2
> 
> 时间：2012-05-13T23:27:11.877
> 
> 标签：php, mysql

> **可能重复：**
> [奇怪的 php 错误](https://stackoverflow.com/q/302296/)
> [提交带有空复选框的 HTML 表单](https://stackoverflow.com/q/476426/)
> [PHP 表单复选框和未定义的索引](https://stackoverflow.com/q/746396/)

某些原因我在以下代码中收到未定义的索引错误。任何帮助，将不胜感激。这是我收到的错误

```
Notice: Undefined index: username in C:\xampp\htdocs\register.php on line 5
Notice: Undefined index: password in C:\xampp\htdocs\register.php on line 6
Notice: Undefined index: firstname in C:\xampp\htdocs\register.php on line 7
Notice: Undefined index: surname in C:\xampp\htdocs\register.php on line 8 
```

代码：

```
<?php
mysql_connect("localhost", "root", "") or die(mysql_error()); 

 mysql_select_db("clubresults") or die(mysql_error()); 
   $username = $_POST['username'];
   $password = md5($_POST['password']);
   $firstname = $_POST['firstname'];
   $surname = $_POST['surname'];

   $sql = "INSERT INTO members (Username, Password, Firstname, Surname) VALUES ($username, $password, $firstname, $surname);";

   mysql_query($sql);

?>

<html>
        <div class="content">
        <center>
        <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
             <table border="0">
             <tr><td colspan=2><h1>Register</h1></td></tr> 
             <tr><td>Username:</td><td>
             <input type="text" name="username" maxlength="60">
             </td></tr>
             <tr><td>Password:</td><td>
             <input type="password" name="password" maxlength="10">
             </td></tr>
             <tr><td>Firstname:</td><td>
             <input type="text" name="firstname" maxlength=210">
             </td></tr>
             <tr><td>Surname:</td><td>
             <input type="text" name="surname" maxlength=210">
             </td></tr>
             <tr><th colspan=2><input type="submit" name="submit" 
            value="Register"> </th></tr> </table>
         </form>
         </center>
         </div>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:57:06.560

当您的页面第一次加载时（除非它是另一个页面的操作），REQUEST_METHOD 是 'GET'；结果，不存在 POST 变量（尽管存在 $_POST 超全局变量）。
当您从另一个页面或从同一页面进行 POST 时，表单中的所有数据集都将出现在 $_POST 超全局中，并且可以按照您之前访问它们的方式进行访问；不幸的是，如果数据不存在，而您尝试访问它，则会引发错误，类似于您所拥有的。
要解决这个问题，特别是如果您想发布到与表单相同的页面，请使用类似

```
  if (isset($_POST["用户名"]))
   {
      // 做任何事
   }
  if (isset($_POST["password"]))
   {
      // 做任何事
   }
  if (isset($_POST["firstname"]))
   {
      // 做任何事
   }
  if (isset($_POST["surname"]))
   {
      // 做任何事
   }

```

这样，如果这些数据不存在，您的代码将不会引发错误。
希望有帮助。
在一个不相关但重要的注意事项上，不要再使用 mysql_* 函数。它们已被弃用；使用 mysqli 或 PDO 函数进行数据访问。

快乐编码！

# c# - C# Windows 窗体倒数计时器

> ID：10576024
> 
> 赞同：2
> 
> 时间：2012-05-13T23:28:02.643
> 
> 标签：c#, winforms, timer, countdown

我有 3 个文本框（小时、分钟、秒）、一个开始、暂停和停止按钮，我正在使用标签来显示当前计时器。我也有一个间隔为`1000`. 我的问题是为什么不使用标签显示时间？其他一切正常，只是不会注册我已将值放入文本框中。

### 代码

启动定时器：

```
 private void startbutton_Click(object sender, EventArgs e)
    {
        if (paused != true) //Timer is not paused (active)
        {

            int.TryParse(textBoxhrs.Text, out hours);
            int.TryParse(textBoxmin.Text, out minutes);
            int.TryParse(textBoxsec.Text, out seconds);

            if (hours >= 1 || (minutes >= 1) || (seconds >= 1))

            //If there is at least one integer entered in any of the 3 boxes, executes; else - //throws an exception
            {
                startbutton.Enabled = true;
                pausebutton.Enabled = true; //changed the value to 'true'  
                stopbutton.Enabled = true; //changed the value to 'true'
                textBoxhrs.Enabled = false;
                textBoxmin.Enabled = false;
                textBoxsec.Enabled = false;
            }
            else
            {
                MessageBox.Show("Enter at least one integer!");
            }
        }
    }

    private void stopbutton_Click(object sender, EventArgs e)
    {
        // Stop the timer. 
        paused = false;
        timer1.Enabled = false;
        startbutton.Enabled = true; //changed to true
        stopbutton.Enabled = false; //changed to false
        pausebutton.Enabled = false; //changed to false
        textBoxsec.Clear();
        textBoxmin.Clear();
        textBoxhrs.Clear();
        textBoxhrs.Enabled = true;
        textBoxsec.Enabled = true;
        textBoxmin.Enabled = true;
        textBoxhrs.Enabled = true;
        lblHr1.Text = "00";
        lblMin1.Text = "00";
        lblSec1.Text = "00";
        MessageBox.Show("Timer is Stopped, to re-start press <Start>"); //updated to give user a chance to run the timer again after stoppage.

    } 
```

暂停按钮：

```
 private void pausebutton_Click(object sender, EventArgs e)
    {
        // Pause the timer. 
        timer1.Enabled = false;
        paused = true; //
        startbutton.Enabled = true; // changed to true
        pausebutton.Enabled = false; //changed to false
    } 
```

定时器：

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        // Verify if the time didn't pass.
        if ((minutes == 0) && (hours == 0) && (seconds == 0))
        {
            // If the time is over, clear all settings and fields.
            // Also, show the message, notifying that the time is over.
            timer1.Enabled = false;
            MessageBox.Show(textBoxMsg.Text);
            pausebutton.Enabled = false;
            stopbutton.Enabled = false;
            startbutton.Enabled = true;
            textBoxMsg.Clear();
            textBoxsec.Clear();
            textBoxmin.Clear();
            textBoxhrs.Enabled = true;
            textBoxMsg.Enabled = true;
            textBoxsec.Enabled = true;
            textBoxmin.Enabled = true;
            textBoxhrs.Enabled = true;
            lblHr1.Text = "00";
            lblMin1.Text = "00";
            lblSec1.Text = "00";
        }
        else
        {
            // Else continue counting.
            if (seconds < 1)
            {
                seconds = 59;
                if (minutes == 0)
                {
                    minutes = 59;
                    if (hours != 0)
                        hours -= 1;

                }
                else
                {
                    minutes -= 1;
                }
            }
            else
                seconds -= 1;
            // Display the current values of hours, minutes and seconds in
            // the corresponding fields.
            lblHr1.Text = hours.ToString();
            lblMin1.Text = minutes.ToString();
            lblSec1.Text = seconds.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:59:03.360

代码还有其他问题，但是您看不到标签更新的原因是因为您从未真正启动计时器。

在开始单击中，您需要添加：

```
...
stopbutton.Enabled = true; //changed the value to 'true'
textBoxhrs.Enabled = false;
textBoxmin.Enabled = false;
textBoxsec.Enabled = false;

timer1.Start();  //<-- start the timer object 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T00:02:16.573

您需要做两件事才能使其正常工作：

您需要在 startbutton_Click 中启动计时器：

```
if (hours >= 1 || (minutes >= 1) || (seconds >= 1))

//If there is at least one integer entered in any of the 3 boxes, executes; else - //throws an exception
{
    startbutton.Enabled = true;
    ...
    timer1.Enabled = true;
} 
```

您需要将计时器 Tick 事件连接到 timer1_Tick。您可以通过选择计时器并单击属性框架上的闪电工具栏图标来执行此操作，然后为 Tick 选择 timer1_Tick。

# mysql - MySQL 加入同一张表

> ID：10576033
> 
> 赞同：19
> 
> 时间：2012-05-13T23:29:49.083
> 
> 标签：mysql, sql

我有包含以下字段的表'meta_data'：

*   ID
*   post_id
*   元密钥
*   元值

我想循环并显示每个帖子（`post_id`）的列表，其中包含一个条目`meta_key='abc'`但*没有*一个`meta_key='def'`

基本上，每个有条目的帖子都*应该*有一个`meta_key='abc'`条目。我想生成列表，以便添加缺少的条目。*`meta_key='def'``meta_key='def'`*

 ** * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-13T23:33:48.587

为此，您应该使用[LEFT OUTER JOIN](http://docs.oracle.com/javadb/10.8.3.0/ref/rrefsqlj18922.html)操作**加入同一个表**。

```
SELECT a.*
FROM meta_data a
LEFT OUTER JOIN meta_data b ON a.post_id = b.post_id AND b.meta_value = 'def'
WHERE 
a.meta_value = 'abc'
AND b.post_id IS null 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-13T23:33:48.237

对自身进行外部（左）连接，通过在连接表中查找具有空 id 的行来过滤那些*不匹配的记录：*

```
select t1.* 
from meta_data t1
left join meta_data t2 on t2.post_id = t1.post_id and t2.meta_key='def' 
where t1.meta_key='abc'
and t2.id is null 
```*

# c# - MVVM 中的数据库模型

> ID：10576035
> 
> 赞同：6
> 
> 时间：2012-05-13T23:30:22.483
> 
> 标签：c#, database, sqlite, mvvm

您好我正在尝试学习 MVVM，但我对某些部分不太确定，主要是（数据）模型需要与 VM（ViewModel）通信的部分。

所以我得到了一个类人，它有很多属性（使用 Raiseproperty(INotifyPropertyChanged)）。现在如何将该类连接到 VM 我将创建一个新类并将其命名为 ViewModelPerson，但我主要想要一个人员列表，因为只显示一个人有点没用，该列表将从数据库中收集（SQLite ) 与 Dapper。现在我需要在哪里创建一个可观察的列表，在视图模型中还是在（数据）模型中？我认为在 ViewModel 中，因为我需要将它绑定到 View，但是我在哪里将数据库信息从它插入到 ViewModel ObservableCollection 中？我是否将它放在像 ViewModelPersonsList 构造函数这样的构造函数中，该构造函数有一个查询来从 SQlite 数据库中收集所有人员并将其插入到列表中？？？

希望您了解我在哪里无法理解 MVVM 模型，如果有不清楚的地方请尽管问，我会尝试更好地解释我的问题。

格言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:13:53.860

视图 -> 视图模型 -> 业务逻辑 -> 数据层 -> 数据库

或者

视图 -> 视图模型 -> WCF/Web 服务 -> 业务逻辑 -> 数据层 -> 数据库

如果您的视图模型需要一个 Person 对象列表，那么它应该调用您的业务逻辑层，并且您的 BLL 将围绕调用数据层实现必要的逻辑。您的 BLL 返回列表，您的 VM 通过绑定使其可用于视图。

**更新**Person 对象的工作方式相同。VM 只是使用更新的对象调用 BLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:35:37.880

既然我看到你提到了 Sqlite，我假设你在谈论小型 WPF 项目。

我建议您将实体框架代码优先模型映射到您的数据库（阅读[此](https://stackoverflow.com/questions/4428590/sqlite-with-ef-code-first)内容）。

如果您想使用 SQL Server Compact Edition，您甚至可以[为您生成](http://blogs.microsoft.co.il/blogs/shimmy/archive/2012/05/11/entity-framework-code-first-designer-with-database-initialization-in-few-simple-steps.aspx)数据库（这也可以使用 Sqlite 来实现，但需要付出更多努力）。

无论如何，然后您将生成的（或编码的）`DbContext`用作[UoW](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)对象。

您可以选择通过 DAL 或直接从 ViewModel 单独处理数据。

无论如何，我会说创建两个 ViewModel 基类，一个公开 TEntity，另一个公开 TEntity 的集合。如果您选择在您的 VM 中执行 DAL 操作，您可以将 CRUD 方法添加到您的基础 CollectionViewModel 中，然后手动调用或让用户通过公开命令来调用它。

# ruby-on-rails - Rails 控制台无法加载，“找不到 gem 'rails (= 3.0.0.beta3) ruby ”

> ID：10576048
> 
> 赞同：2
> 
> 时间：2012-05-13T23:32:01.373
> 
> 标签：ruby-on-rails, ruby

我在 Rails 控制台中输入开始工作并收到以下错误：

```
MacBook-Pro:blog agreiner$ rails console
/Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/resolver.rb:287:in `resolve': Could not find gem 'rails (= 3.0.0.beta3) ruby' in the gems available on this machine. (Bundler::GemNotFound)
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler 1.1.3/lib/bundler/resolver.rb:161:in `start'
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler 1.1.3/lib/bundler/resolver.rb:128:in `block in resolve'
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/resolver.rb:127:in `catch'
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/resolver.rb:127:in `resolve'
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/definition.rb:192:in `resolve'
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler 1.1.3/lib/bundler/definition.rb:127:in `specs'
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/definition.rb:161:in `requested_specs'
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/environment.rb:23:in `requested_specs'
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler 1.1.3/lib/bundler/runtime.rb:11:in `setup'
from /Users/agreiner/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler.rb:107:in `setup'
from /Users/agreiner/blog/config/boot.rb:5:in `<top (required)>'
from /Users/agreiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/agreiner/.rvm/rubies/ruby 1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from >script/rails:8:in `<main>' 
```

几天前我开始使用 Rails，所以我分析错误的能力仅限于我的谷歌能力。我没有找到任何关于`Could not find gem 'rails(=3.0.0beta3) ruby`

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:36:54.633

看起来 rails gem 是在某个时候安装的，但后来只是部分卸载了，或者安装在了一个意外的位置。第一步是尝试重新安装。我不确定您使用的是系统 ruby​​，还是通过 rvm/ruby-build 安装的系统，所以很难给出比这更多的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:17:15.723

它找不到您的 Rails 宝石。先试试：

宝石安装导轨

# javascript - Javascript 函数 ID

> ID：10576051
> 
> 赞同：0
> 
> 时间：2012-05-13T23:32:36.967
> 
> 标签：javascript

```
<label for="dessert">What is your favourite dessert?*</label>
<input type="text" id="dessert" onchange="checkForm()"><br>
<div id="dessertmsg">  </div>

<input type="submit" value="Submit" id="subbutton" disabled> 
```

我想显示按钮。要显示按钮，我希望我的验证为真，即：

```
 function checkForm()

  {
  var dessert = document.getElementById("dessert").value;

  if(dessert == "cake"|| dessert == "cookie" || dessert == "icecream"){ 
```

当它为真时，我希望启用该按钮。我知道我必须使用 disabled: False 但我将如何为此编写代码行？`document.getElementById(`残疾人的身份证是什么`)`？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T23:36:04.580

```
function checkForm() { 
    var button = document.getElementById("subbutton");
    var dessert = document.getElementById("dessert").value;
    if(dessert == "cake"|| dessert == "cookie" || dessert == "icecream") {
        button.disabled = undefined;
    }
    else {
        button.disabled = true;
    }
} 
```

示例： http: [//jsfiddle.net/3NudE/](http://jsfiddle.net/3NudE/)（有 3 个裸体，哇！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:39:30.937

```
if(dessert == "cake"|| dessert == "cookie" || dessert == "icecream"){
    {document.getElementById("subbutton").disabled = false;} 
```

[http://www.webdeveloper.com/forum/showthread.php?t=147187](http://www.webdeveloper.com/forum/showthread.php?t=147187)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T23:42:15.357

```
function checkForm()
{
   var dessert = document.getElementById("dessert").value;
   document.getElementById("subbutton").disabled = (dessert == "cake"|| dessert == "cookie" || dessert == "icecream");
} 
```

# android - Android Webview HTML5 地理编码

> ID：10576056
> 
> 赞同：1
> 
> 时间：2012-05-13T23:33:28.923
> 
> 标签：android, html, webview, geocoding

我正在尝试将作为 Web 视图的 Android 应用程序修复到使用 HTML5 地理编码功能的站点。该站点显示一个谷歌地图，如果允许该站点知道用户的位置，那么它将在用户的位置添加第二个标记并在地图上显示方向。

截至目前，在 webview 内部，没有弹出按钮要求允许知道用户的位置，也没有反馈表明它确实知道用户的位置。我会接受这些事情发生。

该应用程序请求访问互联网、access_network_state 和 access_fine_location 的权限

我不确定是否有其他权限我必须授予它我无法找到的权限，或者是否有办法使用 access_fine_permission 传递给网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:52:13.803

您需要做几件事：

*   `webview.getSettings().setJavaScriptEnabled(true);`
*   `webview.getSettings().setGeolocationEnabled(true);`
*   将 a 分配`WebChromeClient`给`WebView`并覆盖`onGeolocationPermissionsShowPrompt`。您可以静默授予权限，也可以实现一个对话框来询问用户。

以下是详细信息：[android webview 地理定位](https://stackoverflow.com/questions/5329662/android-webview-geolocation)

# asp.net - 表单身份验证失败：提供的票证无效

> ID：10576072
> 
> 赞同：1
> 
> 时间：2012-05-13T23:37:12.960
> 
> 标签：asp.net, authentication, cookies

我们有两个网站。一个 ASP.NET MVC 3 和一个 ASP.NET 4 Web 窗体。每个网站都有自己的 .NET 4 集成应用程序池，它在“应用程序池标识”用户权限下运行。

我们要做的是在两个站点之间共享 ASP.NET 身份验证 cookie（请继续阅读！）。我们为两个站点提供了相同的机器密钥（在 web.config 文件中），具有相同的加密类型和与 .NET 2 兼容的 cookie 等，以及两个站点的相同应用程序名称。因此，当用户登录到一个站点时，身份验证 cookie 会与另一个站点共享，因此用户在登录到另一个站点时不必登录到站点。

这在多台开发机器以及我们的登台和实时服务器上完美运行。但是，它在客户端的生产服务器上不起作用！我检查了服务器的事件日志，发现只有这个错误消息：“表单身份验证失败：提供的票证无效！”。

我阅读了数十篇博客文章和论坛讨论，例如以下两个，但没有任何帮助：

[http://blogs.msdn.com/b/tess/archive/2009/09/16/forms-authentication-fails-after-installing-iis-7-5.aspx](http://blogs.msdn.com/b/tess/archive/2009/09/16/forms-authentication-fails-after-installing-iis-7-5.aspx)

[http://weblogs.asp.net/scottgu/archive/2010/09/30/asp-net-security-fix-now-on-windows-update.aspx](http://weblogs.asp.net/scottgu/archive/2010/09/30/asp-net-security-fix-now-on-windows-update.aspx)

我还将这两行放在 web.config 中（在`<appSettings>`：

```
<add key="aspnet:UseLegacyEncryption" value="true" />
<add key="aspnet:UseLegacyMachineKeyEncryption" value="true" /> 
```

我还设置了应用程序。两个应用程序的池用户。池到 Net_Work 服务，取消选中 IIS/Machine 密钥等下的“自动生成密钥”，但 ASP.NET 仍然拒绝身份验证票。

有人可以帮我吗？这是服务器的配置：

IIS：版本 7.5 Windows：2008 RS sp 1 64x

# jquery - 如何在 Rails 中对静默失败的 js 进行故障排除？

> ID：10576077
> 
> 赞同：4
> 
> 时间：2012-05-13T23:39:18.267
> 
> 标签：jquery, ruby-on-rails-3.1, firebug, unobtrusive-javascript, infinite-scroll

需要注意的是，我对使用 Firebug 不是很熟练，但是我没有发现任何解释以下问题的错误。

我有一个`feed.js.erb`包含以下代码的文件：

```
var $foos = $('<%= escape_javascript(render(@foos)) %>');
$('#container').append($foos);
$('#pagination_button a').attr('href', '<%= feed_path + '?page=' + @page %>'); 
```

当这个 ajax 调用***第二次时***，它似乎默默地失败了。我在 Firebug 控制台中看到了适当的响应，但**`$foos`没有更改**，因此`#container`从未附加。

我的 html 页面仅包含一个加载指示器，它在第一次调用时成功替换。第二个调用是从其他 javascript ( [Infinite Scroll](http://www.infinite-scroll.com/) ) 触发的。

如果重要的话，我注意到第一次调用是使用自动生成的时间戳参数进行的。之后，我将替换目标网址，如您在我的`#pagination_button a`.

如何在浏览器中调试它？

***更新***：我使用 ERB 制作`$foos`了一个动态变量 ($foos1...$foos2) 并注意到这也不起作用。因此，即使新`@foos`的在控制台的响应中可见，我的 javascript 的第一行也没有被评估。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T00:54:22.443

事实证明，Rails 没有将我的第二个请求作为 JS 处理。更重要的是，如果 JS 引发异常，它将被转换为纯文本[，如此处所述](http://www.alfajango.com/blog/rails-js-erb-remote-response-not-executing/)。[Steve](http://twitter.com/jangosteve)还展示了如何调试 ajax 代码，有效地回答了我的两个问题。

# ruby - @fname 是否类似于在其他语言中调用 this->fname

> ID：10576082
> 
> 赞同：0
> 
> 时间：2012-05-13T23:40:48.297
> 
> 标签：ruby, member-variables

让我们以这个类定义为例：

```
class Person
  def fname
    @fname
  end
  def fname=(fname)
    @fname = fname
  end
  def lname
    @lname
  end
  def lname=(lname)
    @lname = lname
  end
end 
```

例如，只是试图连接 Ruby 和 C++ 语法之间的点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:42:32.553

是的，`@foo`-ish 变量是实例变量。

请注意，以上可以缩短为：

```
class Person
  attr_accessor :fname, :lname
end 
```

# header - Dotnetnuke 中的 HTML 标记不起作用

> ID：10576083
> 
> 赞同：1
> 
> 时间：2012-05-13T23:41:08.110
> 
> 标签：header, tags, dotnetnuke, dotnetnuke-6

我一直在尝试向页面添加 HTML 标记，但没有成功。我使用的代码是：

```
Protected Sub Page_PreRender(sender As Object, e As System.EventArgs) Handles MyBase.PreRender
    Dim defaultPage As CDefault = TryCast(Me.Page, CDefault)
    defaultPage.HtmlAttributes.Add("xmlns:og", "http://opengraphprotocol.org/schema/")
    defaultPage.HtmlAttributes.Add("xmlns:fb", "http://www.facebook.com/2008/fbml")
End Sub 
```

结果页面应包含：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://opengraphprotocol.org/schema/"> 
```

我调试了代码并将标签添加到页面对象，但最终生成的页面标签丢失了。任何人都可以建议它有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:51:14.133

我相信 DNN 中的国际化功能会覆盖它，因为它添加了网站的文化（或至少是用户设置的内容），例如 < html lang="en-US" > （这是我没有追踪的猜测它）

一个简单的修复可能是将您的 html 标记添加到皮肤目录中的 'skin name'.doctype.xml 文件中（确保在它之前定义了一个有效的 doctype。这可以做到

# ruby - 在 ruby 中转义特殊字符

> ID：10576084
> 
> 赞同：0
> 
> 时间：2012-05-13T23:41:08.823
> 
> 标签：ruby, postgresql, character-encoding

这是一个常见问题，但如果不求助于不可靠的正则表达式，似乎无法找到答案。

基本上，如果`\302\240`字符串中有一个或类似的组合，我想用真实字符替换它。

我为此使用 PLruby，因此发出警告。

```
obj = {"a"=>"some string with special chars"}
warn obj.inspect
NOTICE: {"Outputs"=>["a\302\240b"]} <- chars are escaped
warn "\302\240"
NOTICE:   <-- there is a non breaking space here, like I want
warn "#{json.inspect}"
NOTICE: {"Outputs"=>["a\302\240"b]} <- chars are escaped 
```

因此，当我使用字符串文字时，这些可以被解码，但是对于“#{x}”格式，\xxx 占位符永远不会被解码为字符。

我将如何分配与中间命令产生的相同字符串？

红宝石版本：1.8.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:13:20.627

您提到您正在使用 PL/ruby。这表明您的字符串实际上是使用[旧的“转义”格式](https://www.postgresql.org/docs/current/interactive/datatype-binary.html#AEN5217)`bytea`的值（BLOB 的 PostgreSQL 版本）。转义格式以八进制对非 ASCII 值进行编码，并带有前导，因此应该对您进行排序：`\`[`gsub`](https://ruby-doc.org/core/String.html#method-i-gsub)[`Array#pack`](https://ruby-doc.org/core/Array.html#method-i-pack)

```
bytes = s.gsub(/\\([0-8]{3})/) { [ $1.to_i(8) ].pack('C') } 
```

这会将转义值扩展`s`为原始字节并将它们保留在`bytes`. 不过，您仍在处理二进制数据，因此仅尝试在控制台上显示它不一定会做任何有用的事情。如果您知道您正在处理可理解的字符串，那么您将必须弄清楚它们的编码方式并使用[String](https://ruby-doc.org/core/String.html)方法来整理编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:56:16.317

也许您只是想`.to_s`改用？

# mysql - Twitter4j 状态 MySql

> ID：10576086
> 
> 赞同：1
> 
> 时间：2012-05-13T23:41:51.227
> 
> 标签：mysql, class, status, twitter4j

我正在开发一个需要在 MySql 数据库上保留一些 Twitter4J 状态的应用程序。我在哪里可以找到有信息的地方来帮助我为桌子建模？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T17:13:35.857

您应该查看 twitter4j 状态界面。它包含与状态相关的所有信息，例如：

*   创建时间（）
*   获取标识（）
*   用户
*   文本

您将创建的 Status 对象还可用于检索信息数组，例如：

*   标签
*   网址/链接
*   媒体实体和提及。

还有更多功能 - 在此处查看 java 文档[http://twitter4j.org/en/javadoc/index.html](http://twitter4j.org/en/javadoc/index.html)

你如何实现这一点显然取决于你。Twitter 提供了许多 API，更多信息可以在 twitter 开发站点的文档下找到。

当您做出选择时，请记住 REST API 是速率受限的，这意味着您只能在给定的时间段内发出一定数量的请求（有关更多信息，请再次参阅文档）。

您还可以访问基于关键字过滤器等因素将所有数据推送到应用程序的流式 API。

然后，您可以设计您的数据库模型。您可以使用标准 MySQL 库来做到这一点，或者如果您使用的是 java ee 平台，您可以像这样创建实体类：

```
package entities;

import java.io.Serializable;
import java.util.List;
import javax.persistence.*;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

@Entity
@Table(name = "twitterstatus")
public class TwitterStatus implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @Column(name = "statusId")

    private Long statusId;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 15)
    @Column(name = "statusUserName")

    private String statusUserName;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 140)
    @Column(name = "statusText")

    private String statusText;

    @OneToMany(mappedBy = "statusId")    
    private List<TwitterStatusUrl> twitterStatusUrlList;

    public TwitterStatus() {
    }

    public TwitterStatus(Long statusId) {
        this.statusId = statusId;
    }

    public TwitterStatus(Long statusId, String statusUserName, String statusText) {
        this.statusId = statusId;
        this.statusUserName = statusUserName;
        this.statusText = statusText;
    }

    public Long getStatusId() {
        return statusId;
    }

    public void setStatusId(Long statusId) {
        this.statusId = statusId;
    }

    public String getStatusUserName() {
        return statusUserName;
    }

    public void setStatusUserName(String statusUserName) {
        this.statusUserName = statusUserName;
    }

    public String getStatusText() {
        return statusText;
    }

    public void setStatusText(String statusText) {
        this.statusText = statusText;
    }

    public List<TwitterStatusUrl> getTwitterStatusUrlList() {
        return twitterStatusUrlList;
    }

    public void setTwitterStatusUrlList(List<TwitterStatusUrl> twitterStatusUrlList) {
        this.twitterStatusUrlList = twitterStatusUrlList;
    }
} 
```

注意：您将需要创建一个数据源和持久性单元（网上有很多关于这个领域的教程。一个例子可能是这篇文章和它链接到的其他文章 - [JPA java 代码生成](https://stackoverflow.com/questions/452627/jpa-java-code-generation)）。

抱歉会包含更多指向有用信息的链接，但由于我是这里的新用户，因此受到限制。

# sql - Rails ActiveRecord：如何选择具有给定权限的所有用户？

> ID：10576087
> 
> 赞同：1
> 
> 时间：2012-05-13T23:41:53.473
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord, named-scope

我有一个称为用户的模型，其中一些被认为是作者。这是通过一个名为 Roles 的表来完成的，该表列出了许多不同的角色：“作者”就是其中之一。名为 Permissions 的表中的多对多关联链接角色和用户。

为了检查用户是否具有作者权限，我有一个方法运行链接到该特定用户的权限，并返回它们中的任何一个是否也链接到作者权限。

这个系统对我很有帮助。但是，它使在网站上搜索和订购作者变得笨拙。我想做的是简单而优雅的事情，理想情况下，就像一个命名范围，它允许我说诸如 Users.authors.order("date_joined") 之类的东西。

就像现在一样，除了将所有用户从数据库中拉出，一次运行一个，搜索他们的作者权限，然后添加它们之外，我没有任何方法可以获取“作者”用户组如果找到，则发送给一组用户。

这似乎很不优雅，尤其是当我每次想在视图中显示作者列表时都必须这样做。

有没有更好的办法？

**编辑——解决方案：**

遵循以下有用的建议和来自[http://railscasts.com/episodes/215-advanced-queries-in-rails-3?view=asciicast](http://railscasts.com/episodes/215-advanced-queries-in-rails-3?view=asciicast)的提示，我能够将以下内容放在一起。

在 User.rb 中：

```
 class User < ActiveRecord::Base
      scope :authors, joins(:permissions) & Permission.author_permissions
      scope :admins, joins(:permissions) & Permission.admin_permissions 
```

在 Permission.rb 中：

```
 class Permission < ActiveRecord::Base
      scope :author_permissions, where("role_id = ?", Role.find_by_rolename("author"))
      scope :admin_permissions, where("role_id = ?", Role.find_by_rolename("administrator")) 
```

瞧！现在我可以打电话`Users.authors`了，它就像一个魅力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:45:05.173

保留您拥有的架构结构，但请确保添加正确的表索引。

然后查询特定角色的用户，您可以这样做

```
User.all(:joins => :roles,
         :conditions => {:roles => {:id => pick_a_role_id}}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T23:49:57.220

你看过[CanCan](https://github.com/ryanb/cancan)吗？它可能需要一些重构，主要是创建一个`current_user`方法。角色指南可以在[这里找到](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)

# r - 在 ggplot2 中使用 scale_x_date 格式化日期

> ID：10576095
> 
> 赞同：68
> 
> 时间：2012-05-13T23:43:04.203
> 
> 标签：r, date, formatting, ggplot2

在 ggplot2 的早期版本中，我可以使用以下两个命令之一来格式化我的 x 日期：

```
scale_x_date(breaks = "1 month", minor_breaks = "1 week", labels=(date_format="%B")) + 
```

或者

```
scale_x_date(major="months", minor="weeks", format="%B") + 
```

生成完整月份名称的“%B”格式。

（恐怕我再也无法区分哪个有效，因为它们都被注释掉了。）

我不记得什么时候了，但是在 ubuntu 12.04 升级中更新了 R 或 ggplot 之后，这不再对我有用。现在，同样的数据会产生错误：

```
Error in scale_labels.continuous(scale) : 
  Breaks and labels are different lengths 
```

与第一个，和

```
Error in continuous_scale(aesthetics, "date", identity, breaks = breaks,  : 
  unused argument(s) (major = "months", minor = "weeks", format = "%B") 
```

与第二个。

如果我删除 labels= 参数，并应用

```
scale_x_date(breaks = "1 month", minor_breaks = "1 week") + 
```

它会在每个月的第一天生成“YYYY-MM-DD”的日期格式。

咨询函数 ?scale_x_date 的帮助，我还尝试了以下方法：

```
scale_x_date(breaks = "1 month", minor_breaks = "1 week", labels=date_format("%B")) + 
```

但这会产生此错误：

```
Error in structure(list(call = match.call(), aesthetics = aesthetics,  : 
  could not find function "date_format" 
```

如何在我的 x 轴上实现月份名称“%B”格式？（如果您对产生这些错误消息的机制有任何其他见解，我也将不胜感激。）

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2016-01-04T15:05:34.527

使用新的 ggplot2 v 2.0.0，一种方法是：

```
scale_x_date(date_breaks = "1 month", date_minor_breaks = "1 week",
             date_labels = "%B") 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-05-14T00:08:39.220

没关系，答案是使用文档中的版本，

```
scale_x_date(breaks = "1 month", minor_breaks = "1 week", labels=date_format("%B")) + 
```

并`library(scales)`按照[文档](http://docs.ggplot2.org/current/scale_date.html)所述包括在内。

# ruby - ruby rspec 错误“预期：1 得到：# '重量转换器' 试图掌握使用存根的窍门，但我无法获得正确的格式，我有什么问题？我知道在这种情况下我已经在代码中使用了该方法，但我正在尝试学习如何正确执行存根。 测试： describe "Convert Pounds to Kilo 问问题 问问题 2012-05-13T23:43:08.857 1113 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. '重量转换器' 试图掌握使用存根的窍门，但我无法获得正确的格式，我有什么问题？我知道在这种情况下我已经在代码中使用了该方法，但我正在尝试学习如何正确执行存根。 测试： describe "Convert Pounds to Kilograms" do it "should convert 3lb to 1kg" do weight = WeightConverter.stub!(:convert).with(3, 'lbs_to_kgs').and_return(1) weight.should == 1 end 代码： class WeightConverter def self.convert(from, what_to_what) if what_to_what == 'lbs_to_kgs' (from / 2.2).truncate elsif what_to_what == 'kgs_to_lbs' (from * 2.2).truncate end end end 仅供参考 - 这有效（没有存根） it "should convert 91lbs to 41kgs" do weight = WeightConverter.convert(91, 'lbs_to_kgs') weight.should == 41 end 错误： 失败： 1) Convert Pounds to Kilograms should convert 3lb to 1kg Failure/Error: weight.should == 1 expected: 1 got: # <proc:0x000000010b0468@ home="" durrantm="" .rvm="" gems="" ruby-1.9.3-p125="" rspec-mocks-2.10.1="" lib="" rspec="" mocks="" message_expectation.rb:459="" (lambda)="">(using ==) # ./weight_converter_spec.rb:19:in `block (2 levels) in <top (required)="">' Finished in 0.00513 seconds 7 examples, 1 failure 盒子周围的玻璃（不透明/透明）边框？ 我想知道是否可以在 CSS 中的框周围获得一种玻璃效果边框。例如，一个div包含ul等的导航。这是我的意思的一个例子 rubytestingrspecstub 4 1 回答 1 This answer is useful 2 您不想分配给存根，而是应该执行以下操作： it "should convert 3lb to 1kg" do WeightConverter.stub!(:convert).with(3, 'lbs_to_kgs').and_return(1) weight = WeightConverter.convert(3, 'lbs_to_kgs') weight.should == 1 end 然而，这是一个相当无用的测试——它唯一测试的是你的存根/模拟库做了它应该做的事情（即它实际上根本没有测试 WeightConverter）。由于您直接测试 WeightConverter 的内部结构，因此您不需要对它进行存根。您应该使用第二个示例中的实际值。但是，如果 WeightConverter 依赖于另一个类，您可能会存根该其他类。 于 2012-05-13T23:49:48.010 回答 Related 1 c++ - 谷歌原生客户端渲染循环 1 cuda - CUDA：挂起的代码用-g -G编译得很好 1 c - 在不同窗口中并行执行curses ...（使用ncurses） 2 android - 为什么在android Logcat中打印空字符串什么都不显示？ 1 node.js - Node.js + Express 3 + Frameset 导航栏 1 php - PHP：扫描数据库中的某个值然后组织它 1 javascript - jQuery - 我正在尝试将箭头键绑定到动态图片 1 algorithm - 可以选择 n-1 条边以形成具有 n 个节点的连通图的方式数 2 c++ - “元素”的初始化被“案例”标签跳过 4 c - 如何在另一种类型的函数中使用一种类型的函数？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</top></proc:0x000000010b0468@>

> ID：10576096
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ruby, testing, rspec, stub

*'重量转换器'*

试图掌握使用存根的窍门，但我无法获得正确的格式，我有什么问题？我知道在这种情况下我已经在代码中使用了该方法，但我正在尝试学习如何正确执行存根。

**测试：**

```
describe "Convert Pounds to Kilograms" do

it "should convert 3lb to 1kg" do
  weight = WeightConverter.stub!(:convert).with(3, 'lbs_to_kgs').and_return(1)
  weight.should == 1
end 
```

**代码：**

```
class WeightConverter

  def self.convert(from, what_to_what)
    if what_to_what == 'lbs_to_kgs'
      (from / 2.2).truncate
    elsif what_to_what == 'kgs_to_lbs'
      (from * 2.2).truncate
    end
  end
end 
```

仅供参考 - 这有效（没有存根）

```
 it "should convert 91lbs to 41kgs" do
    weight = WeightConverter.convert(91, 'lbs_to_kgs')
    weight.should == 41
  end 
```

**错误：**

失败：

```
 1) Convert Pounds to Kilograms should convert 3lb to 1kg
     Failure/Error: weight.should == 1
       expected: 1
            got: #<Proc:0x000000010b0468@/home/durrantm/.rvm/gems/ruby-1.9.3-p125/gems/rspec-mocks-2.10.1/lib/rspec/mocks/message_expectation.rb:459 (lambda)> (using ==)
     # ./weight_converter_spec.rb:19:in `block (2 levels) in <top (required)>'

Finished in 0.00513 seconds
7 examples, 1 failure 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:49:48.010

您不想分配给存根，而是应该执行以下操作：

```
it "should convert 3lb to 1kg" do
  WeightConverter.stub!(:convert).with(3, 'lbs_to_kgs').and_return(1)
  weight = WeightConverter.convert(3, 'lbs_to_kgs')
  weight.should == 1
end 
```

然而，这是一个相当无用的测试——它唯一测试的是你的存根/模拟库做了它应该做的事情（即它实际上根本没有测试 WeightConverter）。由于您直接测试 WeightConverter 的内部结构，因此您不需要对它进行存根。您应该使用第二个示例中的实际值。但是，如果 WeightConverter 依赖于另一个类，您可能会存根该其他类。

# css - 盒子周围的玻璃（不透明/透明）边框？

> ID：10576099
> 
> 赞同：3
> 
> 时间：2012-05-13T23:43:55.067
> 
> 标签：css

我想知道是否可以在 CSS 中的框周围获得一种玻璃效果边框。例如，一个`div`包含`ul`等的导航。这[是我的意思的一个例子](https://web.archive.org/web/20130901145050/http://puu.sh/uAqw)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T17:21:17.653

# 2020年的玻璃效应

当我在 2012 年回答这个问题时，我只使用了当时浏览器很好支持的功能。您可以在下面找到它以供后代使用，但首先我将分享一个稍微有趣的玻璃效果，它看起来与原始问题中的效果有点不同。

我也不再那么关心一两个额外的元素，但如果你讨厌表现元素，请查看旧答案，看看如何使用伪元素来避免它们。

## 完整演示

```
.glass {
  backdrop-filter: contrast(130%) brightness(120%) blur(2px);
  background:
    radial-gradient(
      ellipse at 16.7% -10%,
      hsla(0, 0%, 100%, 0.44) 24%,
      hsla(0, 0%, 100%, 0.4) 25%,
      hsla(0, 0%, 100%, 0.2) 45%,
      hsla(0, 0%, 100%, 0.1)
    );
  background-size: 300% 100%;
  border-radius: 10px;
  box-shadow:
    0 2px 1px hsla(0, 0%, 100%, 0.5) inset,
    0 -2px 1px hsla(250, 70%, 5%, 0.3) inset,
    0 -2px 6px hsla(0, 0%, 100%, 0.25);
}

/* -------------------------------------------
   Decorative (not relevant to technique)
   ------------------------------------------- */
html {
  background:
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.15) 30%, rgba(255,255,255,.3) 32.9%, rgba(255,255,255,0) 33%) 0 0,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.1) 11%, rgba(255,255,255,.3) 13.9%, rgba(255,255,255,0) 14%) 0 0,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.2) 17%, rgba(255,255,255,.43) 19.9%, rgba(255,255,255,0) 20%) 0 110px,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.2) 11%, rgba(255,255,255,.4) 13.9%, rgba(255,255,255,0) 14%) -130px -170px,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.2) 11%, rgba(255,255,255,.4) 13.9%, rgba(255,255,255,0) 14%) 130px 370px,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.1) 11%, rgba(255,255,255,.2) 13.9%, rgba(255,255,255,0) 14%) 0 0,
    linear-gradient(45deg, #343702 0%, #184500 20%, #187546 30%, #006782 40%, #0b1284 50%, #760ea1 60%, #83096e 70%, #840b2a 80%, #b13e12 90%, #e27412 100%);
  background-size: 470px 470px, 970px 970px, 410px 410px, 610px 610px, 530px 530px, 730px 730px, 100% 100%;
  background-color: #840b2a;
  font: 17px/21px Segoe UI, Tahoma, Helvetica, sans-serif;
  height: 100%;
  idth: 100%;
}

.frame {
  padding: 20px;
}

.centered {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.content {
  background: lemonchiffon;
  border: 1px solid sienna;
  padding: 20px 25px;
  width: 300px;
}

.content > :first-child { margin-top: 0; }
.content > :last-child { margin-bottom: 0; }

c {
  background: rgba(255,255,255,.5);
  box-shadow: 0 0 3px rgba(0,0,0,.4);
  color: #840b2a;
  font-family: Consolas, Courier New, Courier, monospace;
  font-weight: bold;
  padding: 0 3px;
}
```

```
<div class="glass frame centered">
  <section class="content">
    <p>A glass-effect frame using pure CSS.</p>
  </section>
</div>
```

## 打破它

### 背景过滤器

模糊窗格后面的东西给人的印象是光线在穿过玻璃时被散焦。此外，通过表面反射效果，增加了对比度和亮度，使背景更加突出。

```
backdrop-filter: contrast(130%) brightness(120%) blur(2px); 
```

### CSS渐变

这传达了光从玻璃表面不均匀反射的印象。此示例使用径向渐变来暗示光源与窗格的距离有限，但您也可以使用线性或锥形渐变（较少支持）来传达不同的照明效果。

背景大小也增加了，因此椭圆的边缘不显示。

```
background:
  radial-gradient(
    ellipse at 16.7% -10%,
    hsla(0,0%,100%,.44) 24%,
    hsla(0,0%,100%,.4) 25%,
    hsla(0,0%,100%,.2) 45%,
    hsla(0,0%,100%,.1)
  );
background-size: 300% 100%; 
```

### 多个盒子阴影

几个嵌入阴影用于突出顶部边缘并遮蔽另一个，而外部阴影意味着光线被投射到盒子边缘周围的背景上。改变这些阴影的位置和强度意味着隐含光源的位置会有所不同。

```
box-shadow:
  0 2px 1px hsla(0,0%,100%,.5) inset, /* Highlight upper edge */
  0 -2px 1px hsla(250,70%,5%,.3) inset, /* Shade lower edge */
  0 -2px 6px hsla(0,0%,100%,.5); /* Imply light cast around the edges */ 
```

* * *

# 2012 年的玻璃效应（原始答案）

您可以使用更简单的 CSS 实现非常接近此的效果（几乎与问题中的示例相同）。此示例使用具有 RGBA 边框颜色和多个框阴影的单个元素来添加高光和阴影。

```
.box {
  background: #f0edcc;
  background-clip: padding-box;          /* Background stops at border */
  border: 4px solid rgba(255,255,255,.2);
  border-radius: 3px;
  box-shadow:
     0    0   1px  rgba(255,255,255,.8), /* Bright outer highlight */
     0    0   3px  rgba(0,0,0,.8),       /* Outer shadow */
     1px  1px 0    rgba(0,0,0,.8) inset, /* Inner shadow (top + left) */
    -1px -1px 0    rgba(0,0,0,.8) inset; /* Inner shadow (bottom + right) */
  padding: 10px;
}

/* -------------------------------------------
   Decorative (not relevant to technique)
   ------------------------------------------- */
html {
  background: 
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.15) 30%, rgba(255,255,255,.3) 32.9%, rgba(255,255,255,0) 33%) 0 0,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.1) 11%, rgba(255,255,255,.3) 13.9%, rgba(255,255,255,0) 14%) 0 0,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.2) 17%, rgba(255,255,255,.43) 19.9%, rgba(255,255,255,0) 20%) 0 110px,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.2) 11%, rgba(255,255,255,.4) 13.9%, rgba(255,255,255,0) 14%) -130px -170px,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.2) 11%, rgba(255,255,255,.4) 13.9%, rgba(255,255,255,0) 14%) 130px 370px,
    radial-gradient(rgba(255,255,255,0) 0, rgba(255,255,255,.1) 11%, rgba(255,255,255,.2) 13.9%, rgba(255,255,255,0) 14%) 0 0,
    linear-gradient(45deg, #343702 0%, #184500 20%, #187546 30%, #006782 40%, #0b1284 50%, #760ea1 60%, #83096e 70%, #840b2a 80%, #b13e12 90%, #e27412 100%);
  background-size: 470px 470px, 970px 970px, 410px 410px, 610px 610px, 530px 530px, 730px 730px, 100% 100%;
  background-color: #840b2a;
  font: 13px/17px Segoe UI, Tahoma, Helvetica, sans-serif;
  height: 100%;
  width: 100%;
}

c {
  background: rgba(255,255,255,.5);
  box-shadow: 0 0 3px rgba(0,0,0,.4);
  color: #840b2a;
  font-family: Consolas, Courier New, Courier, monospace;
  font-weight: bold;
  padding: 0 3px;
}

.box {
  bottom:0;
  height: 150px;
  left:0;
  margin:auto;
  position:absolute;
  top:0;
  right:0;
  width: 250px;
}

.box > :first-child { margin-top: 0; }
.box > :last-child { margin-bottom: 0; }
```

```
<div class="box">Your message.</div>
```

请注意，`box-shadow`RGBA 边框颜色仅在 IE9+ 和更新版本的 Firefox、Chrome、Opera 和 Safari 中受支持。（尽管后一种浏览器的旧版本可能支持该属性的前缀版本。）在不支持任何一种的浏览器中，这会降级为仅内部黄色框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:44:30.217

您现在无法创建玻璃/模糊效果宽度 CSS。但是宽度透明边框和框阴影可以衰减背景。

您可以在我的 jsfiddle 中看到结果：http: [//jsfiddle.net/DoubleYo/hyETB/1/](http://jsfiddle.net/DoubleYo/hyETB/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T00:31:34.513

由于示例边框中有一个图案，您可能需要一个或多个带有 alpha 通道的 PNG 背景图像（以便父背景可以在所需的位置和范围内发光）；仅具有统一 RGBA 颜色的边框在这里是*不够*的。

然后在具有该背景的元素中嵌套另一个块元素。使用一张背景图片，例如 HTML：

```
<div id="glass-box">
  <div id="inner">
    <p>Text</p>
  </div>
</div> 
```

示例 CSS：

```
#glass-box
{
  background: transparent url(glass.png) 0 0 no-repeat;
}

#glass-box #inner
{
  margin: 10px;
  background-color: white;
} 
```

而不是`transparent`您可能想尝试不透明度 < 1.0 的 RGBA 颜色；也许您会使用半透明的灰度玻璃背景图像，您可以将其投射到任何色调之上。

在本地更好地支持多个边框之前（请参阅我的评论），您可以通过嵌套块元素并为每个元素赋予不同的边框来实现多个边框。其中一些元素的边距将有助于减少需要嵌套以获得所需效果的元素数量。

并且直到[CSS Backgrounds and Borders Level 3](http://www.w3.org/TR/css3-background/)的多背景图片得到更好的支持（但它已经是 CR，所以你可能很幸运），您可以通过使用不同位置（不同）的背景图片来实现多背景图片的错觉嵌套（定位）块元素。这样您就不需要固定大小的框和背景图像。

# asp.net - 根据 SQL Server 列或行更新，在特定页面上将数据传输到客户端

> ID：10576103
> 
> 赞同：3
> 
> 时间：2012-05-13T23:44:18.070
> 
> 标签：asp.net, http, iis, sql-server-2012

我想使用 ASP.NET 和 SQL Server 实现特定的目标。例如，我有几页，每页都有自己的标识（即 id=1，id=5）。此外，让我们假设对于这些 id 中的每一个，我在数据库中都有一行：

简而言之，我想要实现的是：将数据库更改直接推送到特定页面上的特定客户端，同时利用 Web 套接字（持久连接）。

例如：

**第 1 行：**

编号 = 1

名字 = 我的名字 1

**第 2 行：**

编号 = 2

名称 = 我的名字 2

我想要做的是，当特定行甚至列中的特定值发生更改时，它将触发一个事件，该事件可以仅将特定数据发送给那些正在访问具有已更改特定 id 的页面的客户端。

例如：如果第 1 行的列名从“name1”更改为“name2”，并且主键的 ID 为 5，我希望所有访问 id=5 页面的人都能在客户端收到事件。

我想阻止自己开发一个客户端代码，该代码将有争议地向 Web 服务发送请求并通过 id 查询该特定行以查看它是否已更新或特定列值已更改。

我想到的一种解决方案是将键/值保留在内存中（即内存缓存），就像键代表 id 一样，值将是更新的日期时间。然后我可以查询内存，例如，如果 [5, 05/11/2012 12:03:45] 我可以通过保存上次在客户端查询内存的时间来知道他们的数据是否上次更新，并且比较日期。如果客户端日期时间值早于内存中键/值中的值，那么我将再次查询数据库。

但是，它仍然是一种被动的方法。

让我画出它应该如何工作：

1.  客户端和服务器具有持久连接**[可以使用 ASP.NET 4.5 套接字协议完成]**

2.  服务器知道区分来自不同页面的连接，那些具有不同查询字符串的连接，例如 id=1、id=2 等。我想到的一个选项是在内存中创建一个数组，用于存储每个页面的连接 ID连接字符串 id 值。例如：{1: 2346,6767,87878, 2:876,8765,3455}。1 和 2 是页面的标识（即 id=1，id=2），其他值是我使用 ASP.net 4.5 获得的持久连接的连接 ID

3.  主键值 id=5 的行中的列值将其列“count”从值“1”更新为“2”。

4.  触发器调用函数并传递更改行的 id（假设值为 X）。我更喜欢能够发送特定列的值（我选择的某些列）**[这是使用 CLR 触发器完成的]**

5.  该函数有一个连接列表，用于访问 id 值为 X（数字）的页面的客户端

6.  服务器向客户端发送列值，或者如果不可能，只发送 true 或 false，通知客户端该行已发生更改。

**解决到现在：**

1] 可以使用 ASP.NET 4.5 套接字协议来完成

4] 使用 CLR 触发器，我可以使用一个函数来获取已更改的特定行的列数据和 id。

我正在使用 ASP.NET 4.5 开发我的应用程序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:11:31.107

Sql Server Service Broker can accomplish a good portion of your requirements.

Service Broker allows for async messaging in sql server. Since it's asynchronous let's split up the functionality into 2 parts.

The first part is a trigger on the table that writes a message the the service broker queue. This is just straight T-SQL, and fairly straight forward. The payload of the message is anything you can convert to varbinary(max). it could be xml, a varchar(100) that contains comma seperated values, or some other representation.

The second part is the handling of the message. You issue a transact-sql RECEIVE statement to get the next message from the queue. This statement blocks until something arrives. A queue can have multiple conversations, so each client gets their own notifications.

Conceptually, it could work like this (Client is asp.net code):

1.  Client opens Service Broker conversation .
2.  Client sends a message which says "I'm Interested in Page=3)
3.  Client does a RECEIVE which blocks indefinitely
4.  UPDATE changes data for page=3
5.  Trigger on table sends message to every conversation that is interested in Page=3
6.  Client receives the message, and sends updated data to web browser.

No CLR required, no periodic polling of the database.

# objective-c - 更改 TabView：调整 TabView 和窗口的大小

> ID：10576104
> 
> 赞同：0
> 
> 时间：2012-05-13T23:44:24.223
> 
> 标签：objective-c, xcode, macos, cocoa

我制作了一个应用程序，它有一个带有 2 个选项卡的首选项窗口。第一个选项卡中有很多首选项设置，但第二个选项卡非常小......

当我们在这两个选项卡之间切换时，我希望选项卡视图和窗口调整大小。

我这样做，但它似乎不起作用，当我切换视图时，“网络设置”选项卡正在减少并消失（就像高度从原点变为 0 动画一样）。

这是我的代码（.m）：

```
- (void)tabView:(NSTabView *)tabView
didSelectTabViewItem:(NSTabViewItem *)tabViewItem
{
    NSRect  frame;
    int    height;

    if ([[tabViewItem identifier] isEqualTo:@"Panel settings"]) {
        height = 400;

    } else if ([[tabViewItem identifier] isEqualTo:@"Network settings"]) {
        height = 200;

    } 

    frame = [[tabView window] frame];

    frame.size.height = height;
    frame.origin.y += height;

    [[tabView window] setFrame:frame display:YES animate:YES];
} 
```

请注意，我将选项卡视图链接到委托。我的窗口链接到 NSWindow * PrefWindow 引用插座。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:33:58.583

我仍然认为问题在于您的弹簧和支柱在 IB 中的设置方式——确保您不仅为选项卡视图本身设置它们，而且还为选项卡视图项视图中的各个对象设置它们。我注意到我的子视图的默认设置都设置了顶部支柱，这使得视图底部附近的任何子视图在窗口缩小时都会消失。

# javascript - setInterval(function(),time) 在运行时更改时间

> ID：10576106
> 
> 赞同：8
> 
> 时间：2012-05-13T23:44:34.310
> 
> 标签：javascript, jquery

我想在我的代码运行时更改 setInterval 函数时间。

我试试这个

```
<script type="text/javascript">
        $(function () {
            var timer;
            function come() { alert("here"); }
            timer = setInterval(come, 0);
            clearInterval(timer);
            timer = setInterval(come, 10000);
        });
    </script> 
```

第一个 SetInterval 不起作用！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-13T23:47:58.933

您正在清除下一行的间隔，因此第一个将不起作用，因为它会立即被清除：

```
 timer = setInterval(come, 0);
        clearInterval(timer);
        timer = setInterval(come, 10000); 
```

此外，正如 gdoron 所说，设置无任何时间间隔并不是真正有效的，也不是一个好主意，请改用 setTimeout，或者如果不需要延迟，则直接运行该函数。

```
 come();
        clearInterval(timer);
        timer = setInterval(come, 10000); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T23:51:00.663

你不能。您将需要使用 setTimeout，并重复调用它：

```
var timer; // current timeout id to clear
function come(){ /* do something */};
var time; // dynamic interval

(function repeat() {
    come();
    timer = setTimeout(repeat, time);
})(); 
```

有了这个，您可以设置每次`repeat`执行函数时应用的不同“间隔”。但是，如果在超时期间发生更改，则不会发生任何变化`time`，您需要为此停止超时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T23:53:00.103

无法直接更改函数触发的时间间隔。您能做的最好的事情是取消一个间隔并设置一个具有相同功能和更新计时器的新间隔。这是一种可能的方法：

```
timer = {
    timers:{},
    inc:0,
    start:function(cb,gap) {
        var key = inc;
        inc++;
        timer.timers[key] = [setInterval(cb,gap),cb];
        return key;
    },
    stop:function(id) {
        if( !timer.timers[id]) return;
        clearInterval(timer.timers[id][0]);
        delete timer.timers[id];
    },
    change:function(id,newgap) {
        if( !timer.timers[id]) return;
        clearInterval(timer.timers[id][0]);
        setInterval(timer.timers[id][1],newgap);
    }
}; 
```

用法：

```
var myTimer = timer.start(function() {....},1000);
// calls every second

timer.change(myTimer,5000);
// now calls every five seconds 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T23:46:47.187

```
timer = setInterval(come, 0); // zero isn't a valid interval... 
```

你可能想要：

```
come();
timer = setInterval(come, 10000); 
```

[**MDN**](https://developer.mozilla.org/en/DOM/window.setInterval)上的文档：

> delay 是 setInterval() 函数在每次调用 func 之前应该等待的毫秒数（千分之一秒）。与 setTimeout 一样，强制执行最小延迟。

**和：**

> 历史上，浏览器实现 setTimeout() “钳制”：延迟小于“最小延迟”限制的连续 setTimeout() 调用被强制使用至少最小延迟。最小延迟 DOM_MIN_TIMEOUT_VALUE 为 4 毫秒（存储在 Firefox 的首选项中：dom.min_timeout_value），DOM_CLAMP_TIMEOUT_NESTING_LEVEL 为 5 毫秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T09:15:58.360

我知道这篇文章很旧，但我需要类似的东西，也许有人需要它。

这是一个没有 setInterval 的版本，基于其他反应（Niet the Dark Absol）的代码。

```
function timer()
{
    var timer = {
        running: false,
        iv: 5000,
        timeout: false,
        cb : function(){},
        start : function(cb,iv,sd){
            var elm = this;
            clearInterval(this.timeout);
            this.running = true;
            if(cb) this.cb = cb;
            if(iv) this.iv = iv;
            if(sd) elm.execute(elm);
            this.timeout = setTimeout(function(){elm.execute(elm)}, this.iv);
        },
        execute : function(e){
            if(!e.running) return false;
            e.cb();
            e.start();
        },
        stop : function(){
            this.running = false;
        },
        set_interval : function(iv){
            clearInterval(this.timeout);
            this.start(false, iv);
        }
    };
    return timer;
} 
```

用法：

```
var timer_1 = new timer();
timer_1.start(function(){
    //magic here
}, 2000, false);

var timer_2 = new timer();
timer_2.start(function(){
    //more magic here
}, 3000, true);

//change the interval
timer_2.set_interval(4000);

//stop the timer
timer_1.stop(); 
```

如果函数需要在 0 处运行，则 start 函数的最后一个参数是布尔值。

您还可以在此处找到脚本：[https ://github.com/Atticweb/smart-interval](https://github.com/Atticweb/smart-interval)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-16T05:06:52.763

这是mi示例，我认为更简单易懂

```
const timer = {
  time: 5, // 5 time in seconds
  _time: null,
  _timeout: null,
  fun: () => {},
  start() {
    if (this._timeout == null) {
      const self = this;
      this.fun();
      this._timeout = setTimeout(function repeater() {
        self.fun();
        self._timeout = setTimeout(repeater, 1000 * self.time);
      }, 1000 * this.time);
    }
  },
  stop() {
    const timeout = this._timeout;
    this._timeout = null;
    this.set_time(); // set time to default
    clearTimeout(timeout);
  },
  set_time(time) {
    if (this._time == null) this._time = this.time;

    if (time) {
      this.time = time;
    } else {
      this.time = this._time;
    }
  },
}; 
```

解释：

*   **time**：是每次迭代、循环或下一次调用之间的间隔时间
*   **_time** : 该变量保存时间的默认值，当使用 stop() 时，该变量(_time) 恢复“时间”
*   **start**：此函数开始迭代，如果再次调用，它将不会重复。
*   **stop** : 这个函数，停止超时并设置默认时间和_timeout
*   **set_time**：该函数设置一个新的时间值，如果不发送参数，时间恢复到默认值，在这个例子中声明运行时为“5”

例子：

```
const timer = {
      time: 5, // 5 time in seconds
      _time: null,
      _timeout: null,
      fun: () => {},
      start() {
        if (this._timeout == null) {
          const self = this;
          this.fun();
          this._timeout = setTimeout(function repeater() {
            self.fun();
            self._timeout = setTimeout(repeater, 1000 * self.time);
          }, 1000 * this.time);
        }
      },
      stop() {
        const timeout = this._timeout;
        this._timeout = null;
        this.set_time(); // set time to default
        clearTimeout(timeout);
      },
      set_time(time) {
        if (this._time == null) this._time = this.time;

        if (time) {
          this.time = time;
        } else {
          this.time = this._time;
        }
      },
    };

// print time
timer.fun = () =>{
    console.log(new Date())
};
timer.set_time(10)
timer.start()
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-30T14:03:53.250

我知道这是一篇旧文章，但我已经实现了一个用于更改运行时间间隔的打字稿版本：

```
 class LoopTimer {
  private timer: null | NodeJS.Timer;
  private callback: (...args: any[]) => void;
  private ms: number;
  private started: boolean;

  constructor(callback: (...args: any[]) => void, ms: number) {
    this.callback = callback;
    this.ms = ms;
    this.timer = null;
    this.started = false;
  }

  start() {
    if (!this.started) {
      this.timer = setInterval(this.callback, this.ms);
      this.started = true;
    }
  }

  stop() {
    if (this.timer) {
      clearInterval(this.timer);
      this.timer = null;
      this.started = false;
    }
  }

  get getStarted(): boolean {
    return this.started;
  }

  setInterval(ms: number) {
    this.ms = ms;
    if (this.started) {
      this.stop();
      this.start();
    }
  }
} 
```

您可以像这样使用它：当间隔改变时，计时器将停止并重新启动。

```
 const myTimer = new LoopTimer(()=>{
    console.log("Hello");
}, 100);

myTimer.setInterval(500); 
```

# internet-explorer - IE 中的页脚不是 100%

> ID：10576108
> 
> 赞同：0
> 
> 时间：2012-05-13T23:45:47.650
> 
> 标签：internet-explorer

我还在学习 HTML5，所以我知道我需要 shim，所以它就在那里，我已经在许多不同的平台和浏览器上测试了我的网站，包括 windows 和 mac，这似乎是唯一阻止我启动我的site 是 IE 中的页脚脚本。我有垫片，所以不应该工作吗？

当我告诉它时，它并没有跨越 100%。它在除 IE 之外的所有浏览器中都能正常工作。它也没有跨越移动设备。这两者都是由于缺少一段代码造成的吗？

HTML

```
<footer>
<ul class="footer-widgets">
<li class="widget3"><h6>Testimonials</h6>
<p>When I first came to Amber about creating a website for my business I wasn't sure what to expect. After working with her I've found that the whole experience is easy and a lot less expensive then I was previously quoted by another company. She described each step that was required for my projects and worked hard to bring my vision to life.</p>

<p>Amber Goodwin is a very creative &amp; passionate individual with an appetite for design, I would recommend her for any and all your business branding needs!</p>
<a href="http://www.nuggetcity.com">WWW.NUGGETCITY.COM</a>
</li>

<li class="widget4"><h6>Contact</h6>
<p class="footer-title">Are you looking for a new website?</br>Need to update your existing one?</br>Or just need some information?</p>
<img src="img/title-footer-call.jpg" border="0" usemap="#Map">
<map name="Map">
  <area shape="rect" coords="-1,0,114,39" href="mailto:info@ambergoodwin.com" target="_blank">
</map>

</ul>

<div id="footer-bottom">
<p>&copy; 2012 AMBER GOODWIN | Creative &amp; Fresh Designs</p>
</div>
</footer> 
```

CSS

```
footer { width: 100%; height: 500px; background: url(img/BG-footer.jpg) repeat-x; background-color: #211e1b; clear: both; color: #b1b1b1; }

.footer-widgets { width: 905px; margin: 0 auto; padding: 0px; padding-top: 70px; }
.footer-widgets p { width: 94%; }
.footer-widgets a { text-decoration: underline; color: #f8d54b; }
.footer-widgets a:hover { text-decoration: none; color: #f8d54b; }
.footer-widgets li { height: auto; list-style-image: none; list-style-type: none; float: left; color: #b1b1b1;}
.footer-widgets li ul li {color: #fff; margin-left: -50px; margin-top: -15px;}
.footer-widgets li h2 { font-size: 1.4em; font-weight: normal; letter-spacing: 1px; line-height: 30px; text-align: left; }

.widget1 { width: 289px; }
.widget2 { width: 608px; }
.widget3 { width: 580px; }
.widget4 { width: 316px; }
.widget4 p { width: 100%; }

#footer-bottom { width: 100%; height: 50px; padding-bottom: 20px; background-color: #1a1715; border-top: 2px solid #272322; color: #fff; display: block; margin-top: 400px; }
#footer-bottom p { width: 600px; margin-left: 370px; height: 30px; font-size: 1em; line-height: 25px; color: #eee; margin-top: 20px; /*margin-top: 60px;*/ position: absolute;left: 50%; margin-left: -450px;} 
```

头部

```
<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Amber Goodwin | Graphic & Web Designer based in the Okanagan Valley </title>
  <meta name="description" content="">
  <meta name="author" content="Amber Goodwin">

  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link rel="stylesheet" href="style.css">
  <link href="lightbox.css" rel="stylesheet">

  <!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

您可以在[此处查看工作站点](http://www.ambergoodwin.com/_AMBERGOODWIN/index2.php)。

这就是它在 IE 中的样子 ![在此处输入图像描述](../Images/d915a851f440848e1233fcbd010ac9df.png)

我敢打赌，我缺少的只有一件事可以解决这个问题，嗯？一如既往地感谢任何建议和帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:03:00.597

您`</div>`在幻灯片后缺少两个标签，一个结束 .`slides_container`一个结束`slides`. 那里已经有两个了，应该结束`example`和`slide-container`。

不匹配的标签是布局问题的第一大原因。这就是我使用 Notepad++ 的原因，因为它会突出显示匹配的标签 - 使用它我立即看到某些元素没有被关闭，因为缺少`</div>`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:52:44.850

您的页脚设置为 100% 宽度。我会说它可能正在这样做。问题是 100% 是什么。

它只会和它的容器一样大。用 ie 调试器看一下页面，看看父元素有多大。当您发现它与页脚大小相同时，下一个问题就是为什么。

# java - 如何将 JButton 列表添加到 JFrame？

> ID：10576111
> 
> 赞同：-2
> 
> 时间：2012-05-13T23:46:48.503
> 
> 标签：java, swing, layout, add, jbutton

所以...我正在制作 Jeopardy 游戏，并且正在尝试制作和添加按钮的更好方法，以便在源代码中看起来更好。因此，首先，我有一个 CategoryClass，它采用 QuestionButtons 列表（基本上是一个 JButton）、类别名称等参数。我遇到的唯一麻烦是将按钮添加到 JPanel。这是代码：

```
 public void addCategoryButtons(JPanel pane) {
        JLabel head = this.getCategoryHeading();
        pane.add(head);
        List<QuestionButton> buttons = this.getCategoryButtons();
        for (int i = 0; i < buttons.size(); i++) {
            pane.add(buttons.get(i).getButton());
        }
    } 
```

这[就是](http://i.imgur.com/585Ib.png)我得到的。注意：“测试”是类别的名称

如您所见，它显示了我添加的最后一个类别，而不是所有类别。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:52:50.320

您需要设置一些布局管理器，例如：

```
pane.setLayout(new GridLayout(buttons.size(), 1));
for (int i = 0; i < buttons.size(); i++) 
{
    pane.add(buttons.get(i).getButton());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:53:44.093

您可能希望为此任务使用[布局管理器。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

# javascript - Javascript：将div的宽度计算为图像的总和

> ID：10576112
> 
> 赞同：0
> 
> 时间：2012-05-13T23:46:52.540
> 
> 标签：javascript

基本上，我需要将“style="width:__" 添加到“img-container” div 中，宽度是所有图像及其填充的总和。图像和图像宽度是通过 CMS 动态添加的，这就是为什么我需要 javascript 来动态计算宽度。

```
<div id='img-container'[HERE IS WHERE I NEED THE WIDTH TO BE ADDED]>
<div class='picture_holder' >
<div class='picture' >
<img src="{image}" style='width:{width}px;padding-right:10px;'/>
<div class='captioning'>{caption}</div>
</div>
</div>
</div> 
```

我根本不懂 javascript，但试图拼凑一些东西（我什至还没有添加填充）：

```
<script type="text/javascript">
var $name = ('div#img-container');
var Imgs = div.getElementsByTagName('img');
var w = 0;
for ( var i = 0; i < Imgs.length; i++ ){
    w += parseInt(Imgs[i].offsetWidth);
}
</script> 
```

显然，它根本不起作用。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:29:56.730

代码中有一个错误`var $name = ('#div ...`。您必须使用`document.getElementById(id-of-element)`. sintax`#div...`是 jQuery 选择器，据我了解，您没有使用 jQuery。接下来，您调用`div.getElementsByTagName('img') to get only the list of images inside the`div`。尝试这个：

```
<script type="text/javascript">

function add_width_of_images(container) {
    var div = document.getElementById(container);
    if (!div) return;

    var Imgs = div.getElementsByTagName('img');
    var w = 0;
    for ( var i = 0; i < Imgs.length; i++ ){
        w += parseInt(Imgs[i].offsetWidth);
    }
    div.style.width = w + "px";
}
add_width_of_images('img-container');

</script> 
```

# javascript - 使用原型时的类型错误

> ID：10576118
> 
> 赞同：0
> 
> 时间：2012-05-13T23:47:54.407
> 
> 标签：javascript, jquery, prototype

我刚刚开始使用原型，我正在尝试在我正在开发的网站上测试不同的东西。但是我偶然发现了一个错误，我不确定为什么，因为我之前使用过该属性并且它有效。

我不是经验丰富的 JavaScript 开发人员，我还在学习，但我得到了：

```
var defaults = {
    local_storage_key   : "Cluster",
    plugin_navigation   : ".navigation",
    plugin_wrapper      : "content-wrapper",
    iqns_class          : ".iqn"
}

var Clusters = function(environment, options){

    this.options = $.extend({}, defaults, options);

    this.environment = environment;

    this.viewport = $(window);

    this.viewport_width = this.viewport.width();
    this.viewport_height = this.viewport.height();

    this.data_key = this.options.local_storage_key;

    this.iqns_class = this.viewport.find(this.options.iqns_class);

    this.iqn = this.iqns_class.parent();

    this.shop_initiated = false;

    this.plugin_navigation = this.options.plugin_navigation;

    this.plugin_wrapper = this.options.plugin_wrapper;

    this.initiate_plugin(this.plugin_navigation, {
        containerID : this.plugin_wrapper,
        first       : false,
        previous    : false,
        next        : false,
        last        : false,
        startPage   : this.get_local_storage_data(),
        perPage     : 6,
        midRange    : 15,
        startRange  : 1,
        endRange    : 1,
        keyBrowse   : false,
        scrollBrowse: false,
        pause       : 0,
        clickStop   : true,
        delay       : 50,
        direction   : "auto",
        animation   : "fadeInUp",
        links       : "title",
        fallback    : 1000,
        minHeight   : true,
        callback    : function(pages) {
            this.set_local_storage_data(pages.current);
        }
    });

    this.initiate_auxiliars();

    this.set_environment();

};

Clusters.prototype.set_local_storage_data = function(data_val) {
    return localStorage.setItem(this.data_key, data_val);
};

Clusters.prototype.get_local_storage_data = function() {
    return +(localStorage.getItem(this.data_key) || 1);
};

Clusters.prototype.shop_iqns_selected_class = function() {
    var self = this;
    if (this.viewport_width < 980) {
        $(this.iqns_class).each(function(index, element) {
            var element = $(element);
            $(self.iqn).on('click', function() {
                if (element.hasClass('selected')) {
                    element.removeClass('selected');
                } else {
                    element.addClass('selected');
                }
            });
        });
    }
}

Clusters.prototype.initiate_plugin = function(plugin_navigation, plugin_options) {
    return $(plugin_navigation).jPages(plugin_options);
}

Clusters.prototype.initiate_auxiliars = function() {
    return this.shop_iqns_selected_class();
}

Clusters.prototype.set_environment = function() {
    if(this.environment == "Development") {
        less.env = "development";
        less.watch();
    }
}

var cluster = new Clusters("Development"); 
```

我确定我在原型设计方面做错或误解了一些事情，因为否则我不会得到任何错误。我只是就我做错了什么，我应该做什么或不应该做什么征求一些意见或方向。

这是我得到的错误：

```
Uncaught TypeError: Object #<Object> has no method 'set_local_storage_data' on line 53 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:30:53.780

当您使用回调*函数*时，[`this`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)将不再引用集群对象。回调将在“没有方法'set_local_storage_data'”的其他上下文中执行。

为避免这种情况，您可以使用[`bind()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)集群对象的函数，或者使用构造函数范围内的局部变量来引用集群对象：

```
var that = this;
this.initiate_plugin(
    ...,
    function(pages) {
        that.set_local_storage_data(pages.current);
    }
); 
```

# javascript - IE 中的 Javascript 对象需要错误

> ID：10576121
> 
> 赞同：1
> 
> 时间：2012-05-13T23:48:29.003
> 
> 标签：javascript, object, animation

我在 javascript 中创建多个行星对象来处理动画。

动画适用于每个星球，但我在 IE 6/7 中遇到错误，说“第 15 行字符 2 上需要对象”

代码：

```
var earthObj = null;
var mercObj = null;
var jupiObj = null;
var animate;
function init()
{
    mercObj = document.getElementById('mercury');
    earthObj = document.getElementById('earth');
    jupiObj = document.getElementById('jupiter');

    mercObj.style.position= 'relative';  
    mercObj.style.left = '54px'; 
    mercObj.style.visibility = 'hidden';

    earthObj.style.position= 'relative';  //error on this line
    earthObj.style.left = '80px'; 
    earthObj.style.top = 300px';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:08:52.043

在尝试调用对象之前，请测试它是否存在。

```
earthObj = document.getElementById('earth');
if(!earthObj) {
  alert("Could not find Earth");
  return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:06:00.407

我在 mac 上，没有任何 IE 可以尝试。如果您像这样更改代码，您是否会收到相同的错误：

```
function init() {
  var earthObj = null;
  var mercObj = null;
  var jupiObj = null;
  var animate;

  mercObj = document.getElementById('mercury');
  earthObj = document.getElementById('earth');
  jupiObj = document.getElementById('jupiter');

  mercObj.style.position= 'relative';  
  mercObj.style.left = '54px'; 
  mercObj.style.visibility = 'hidden';

  !earhtObj && alert("There is no element with id 'earth'");
  earthObj.style.left = '80px'; 
  earthObj.style.top = '300px';
  earthObj.style.position= 'relative'; 
} 
```

我来到[这篇](https://stackoverflow.com/questions/1368536/internet-explorer-says-object-doesnt-support-this-property-or-method)文章，并认为该错误是否可能与 IE6/7 错误有关，该错误会在某些全局变量与 dom 对象同名时触发。

我还将 移到`earthObj.style.position= 'relative';`块的末尾，并期望错误会在`earthObj.style.left = '80px';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T16:24:03.387

我发现在 IE 中，如果脚本在定义/生成的 HTML 元素之后，该函数就可以工作。

即将脚本放在 HTML 文档的末尾，而不是开头，或者使用 jquery 的 ready 函数：

```
$(function() {
   mercObj = document.getElementById('mercury');
}); 
```

# richfaces - 显示带有 JSF 1.2 和丰富面孔的丰富模式面板时出错

> ID：10576123
> 
> 赞同：0
> 
> 时间：2012-05-13T23:48:58.433
> 
> 标签：richfaces, jsf-1.2, modalpopups

我在显示带有 JSF 1.2 和丰富面孔的模态面板时遇到问题。由于项目限制，我必须使用jsp。a4j commandLink 确实提交到服务器，它返回到浏览器，浏览器闪烁但没有显示。

这是我在我的jsp中使用的片段

```
....
....
<f:view>
....
....
<h:form id="buildForm">
....
....
    <a4j:commandLink id="showItem" action="#{popupBean.selectAttributeAction}" oncomplete="Richfaces.showModalPanel('modalPanelId',{width:550, top:200});" reRender="modalPanelId">
        Click Here!
    </a4j:commandLink>
    <rich:modalPanel id="modalPanelId" width="350" height="100">
         <!-- the external content is loaded inside this tag -->
         <div id="modalPanelResult">
              This is test modal popup
          </div>
    </rich:modalPanel>
....
....
</h:form>
</f:view>
.... 
```

这是我在我的 jsp 中包含上述片段时得到的错误

```
panel.component is undefined

...,opts);});};Richfaces.hideModalPanel=function(id,opts,event){var panel=$(id);if(... 
```

如果我在单独的 Test jsp（如下所示）中使用相同的东西 - 我创建它来测试，它工作正常。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
<%@ taglib uri="http://richfaces.org/rich" prefix="rich"%>
<%@ taglib uri="http://richfaces.org/a4j" prefix="a4j"%>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<f:view>
    <a4j:commandLink id="showItem" action="#{popupBean.selectAttributeAction}" oncomplete="Richfaces.showModalPanel('modalPanelId',{width:550, top:200});" reRender="modalPanelId">
        Click Here!
    </a4j:commandLink>
    <rich:modalPanel id="modalPanelId" width="350" height="100">
         <!-- the external content is loaded inside this tag -->
         <div id="modalPanelResult">
              This is test modal popup
          </div>
    </rich:modalPanel>
</f:view>
</body>
</html> 
```

谢谢，我感谢你们的任何帮助。我花了几天的时间努力做到这一点。我有另一个 css 解决方案，我在 a4j jsfunction 调用服务器后使用它来获取弹出窗口的信息并显示覆盖弹出窗口，但这在 Chrome 中不起作用，它在 IE 中起作用，在 jquery 脚本代码中出现脚本错误，而不是在我的代码中，但在 Firefox 中运行良好，那是当我切换到 Richfaces 解决方案时认为它看起来非常简单，但是一旦我在我的 jsp 中包含一个测试工作（在单独的页面上）解决方案，它就不起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:51:59.580

您是否尝试过以下代码：

```
<a4j:commandLink id="showItem" action="#{popupBean.selectAttributeAction}" reRender="modalPanelId">
    Click Here!
<rich:componentControl for="modalPanelId" attachTo="showItem" operation="show" event="onclick" />
</a4j:commandLink> 
```

? 如果没有，请做，让它在这里工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T10:10:52.447

这是如何打开丰富的示例：modalPanel

```
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://richfaces.org/rich" prefix="rich"%>
<%@ taglib uri="http://richfaces.org/a4j" prefix="a4j"%>
<f:view>
    <head>
        <title>User Registration</title>
    </head>
    <body>
        <jsp:include page="/views/common/styles.jsp"></jsp:include>
        <h:form id="userRegistrationForm">
            <table cellpadding="0" cellspacing="0" border="0" align="center">
                <tr class="rowspace5px"></tr>
                <tr>
                    <td>
                        <table cellpadding="0" cellspacing="3" border="0">
                            <tr>
                                <td>
                                    <h:outputText styleClass="mandatorymarkwidth error" value="*"></h:outputText>
                                </td>
                                <td class="lblwidthfirstpair">
                                    <h:outputText styleClass="labelfont" value="Security Question"></h:outputText>
                                </td>
                                <td>
                                    <h:inputText id="textSecurityQuestionId" styleClass="controlfont" disabled="true" value="#{UserRegistrationBean.textSecurityQuestion}"></h:inputText>
                                </td>
                                <td>
                                    <h:commandButton image="/images/Add_Icon.gif" onclick="Richfaces.showModalPanel('securityQuestionPanel'); return false;">
                                        <a4j:support event="onclick" reRender="userRegistrationForm" oncomplete="Richfaces.showModalPanel('securityQuestionPanel');"></a4j:support>
                                    </h:commandButton>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </h:form>
        <rich:hotKey key="esc" handler="Richfaces.hideModalPanel('securityQuestionPanel');"></rich:hotKey>
        <rich:modalPanel id="securityQuestionPanel" moveable="false" width="450" height="280" resizeable="false">
            <f:facet name="header">
                <h:outputText value="Security Question"></h:outputText>
            </f:facet>
            <f:facet name="controls">
                <h:panelGroup>
                    <h:graphicImage id="securityQuestionImage" value="../../images/close.png" styleClass="hidelink" style="cursor: pointer;" />
                    <rich:componentControl for="securityQuestionPanel" attachTo="securityQuestionImage" operation="hide" event="onclick" />
                </h:panelGroup>
            </f:facet>
            <a4j:form id="securityQuestionForm">
                <table border="0" cellspacing="0" cellpadding="0" width=100%>
                    <tr class="trseperator5"></tr>
                    <tr>
                        <td>
                            <table cellpadding="0" cellspacing="0" border="0">
                                <tr>
                                    <td class="lblwidthfirstpair">
                                        .
                                        .
                                        .
                                        .
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr class="trseperator3"></tr>
                </table>
            </a4j:form>
        </rich:modalPanel>
    </body>
</f:view> 
```

# javascript - 删除空的功能 移除 的内容

> ID：10576134
> 
> 赞同：0
> 
> 时间：2012-05-13T23:51:10.397
> 
> 标签：javascript, jquery, html

我做了一个函数，如果 p 元素没有任何内容或内部有 br，则在 contenteditable 离开时应该删除它。问题是它在 .blur() 时删除了一个有内容的 li ！？我要疯了，因为我确定它在 10 分钟前就起作用了…………

这是功能：

```
$('p').live('blur', function() {
localStorage.setItem('todo', listan.innerHTML);
color();

if ($(this).html() == "" || "<br>")
{
  console.log($(this).html());
  $(this).parent().remove();
  localStorage.setItem('todo', listan.innerHTML);
}
}); 
```

列表（“listan”）如下所示：

```
<ul ID="listan">
      <li><p contenteditable="true" class="thing">something</p><input type="button" value="ta bort" class="delete"></li>  
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T23:54:21.723

从代码中删除`.parent()`，因为“模糊”的父元素`p`是`li`. 还要检查你的 if 语句。

```
$('p').live('blur', function() {
    localStorage.setItem('todo', listan.innerHTML);
    color();

    var html = $(this).html();
    if (html == "" || html == "<br>") {
        console.log($(this).html());
        $(this).remove();
        localStorage.setItem('todo', listan.innerHTML);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:55:22.300

```
if( $(this).html() == "" || "<br>") 
```

这行的意思是“如果 html 是空的，或者`<br>`是什么”。

所以它总是正确的，所以无论内容是什么，它都会被删除。

试试这个：

```
if( $(this).html().replace(/\s|<br ?\/?>/) == "") 
```

这将去除空格（最重要的是前导和尾随）和换行符，并查看结果是否为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T23:56:36.230

```
var html = $(this).html();
if (html == "" || html == "<br>") {....do stuff....} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T00:12:49.470

为什么不使用 CSS？

```
p:empty {
    display: none 
} 
```

# javascript - 退出 xmlhttpRequest 后数组丢失其内容

> ID：10576136
> 
> 赞同：-4
> 
> 时间：2012-05-13T23:51:47.597
> 
> 标签：javascript, arrays, gm-xmlhttprequest

我知道这是一个愚蠢的问题，但我想问我如何将内容保存到 xmlhttpRequest 内的数组中并在之后使用它们。

```
onlinestatus = new Array(count);
for (var i = 0; i <= count; i++) {
    GM_xmlhttpRequest({
        method: 'GET',
        url: 'http://www.website.com/player/' + player[i] + '/details.php',
        onload: function(responseDetails) {
            buddypage = jQuery(responseDetails.responseText);
            online = jQuery("span#OnlineStatus", buddypage);
            onlinestatus[i] = online.text();
        }
    });
    GM_log("Current: " + onlinestatus[i]);
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:54:44.357

您应该知道 ajax 请求在未来某个未知时间返回。
您只能在 ajax 请求的回调中使用该数组。

*AJAX -**异步**JavaScript 和 XML*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:06:42.483

有两件事会阻止此工作：Web 请求将是异步的，并且值将全部存储在数组中的同一位置。

假设 count = 2，这是事情发生的顺序：

1.  放`i = 0`
2.  检查, `i < count`, 为真, 继续 for 循环
3.  Web 请求 A 开始
4.  打印`result[0]`
5.  放`i = 1`
6.  检查, `i < count`, 为真, 继续 for 循环
7.  Web 请求 B 开始
8.  打印`result[1]`
9.  放`i = 2`
10.  检查, `i < count`, 为假，退出for循环
11.  ... 时间流逝 ...
12.  Web 请求 A 完成，设置`result[i]`，设置`result[2] = "foo"`
13.  Web 请求 B 完成，设置`result[i]`，设置`result[2] = "bar"`

这意味着结果数组以`[undefined, undefined, "bar"]`. 数组的最后一个值可以是 foo 或 bar，这取决于哪个 Web 请求首先完成。无论哪种方式，在 Web 请求完成时，`i`都已经被设置为错误的值，并且结果已经被记录，所以结果数组看起来是空的。

# jquery - 多个元素内的 jQuery 操作

> ID：10576138
> 
> 赞同：1
> 
> 时间：2012-05-13T23:52:16.830
> 
> 标签：jquery, loops

我有多个部分...在这些部分中几乎没有子元素...我需要进行操作，以便为每个部分移动 1 个元素，例如 .inner 在另一个元素之后，例如 h1

我的尝试在这里[http://jsfiddle.net/shavindra/LDpwq/1/](http://jsfiddle.net/shavindra/LDpwq/1/)但问题是它没有循环并在最后打印好..但我希望输出不同，如下所示......

初始状态：

```
<section class="greeting">
  <h2>Greetings 1</h2>
  <div class="time">Morning</div>
  <div class="inner">Good 1</div>
</section>

<br />
<br />

<section class="greeting">
  <h2>Greetings 1</h2>
  <div class="time">Afternoon</div>
  <div class="inner">Good 2</div>
</section>

<br />
<br />

<section class="greeting">
  <h2>Greetings 1</h2>
  <div class="time">night</div>
  <div class="inner">Good 3</div>
</section> 
```

操纵后

```
<section class="greeting">
  <h2>Greetings 1</h2>
  <div class="inner">Good 1</div>
  <div class="time">Morning</div>
</section>

<br />
<br />

<section class="greeting">
  <h2>Greetings 1</h2>
  <div class="inner">Good 2</div>
  <div class="time">Afternoon</div>
</section>

<br />
<br />

<section class="greeting">
  <h2>Greetings 1</h2>
  <div class="inner">Good 3</div>
  <div class="time">night</div>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:01:26.417

```
$(".time").each(function() {
    $(this).before($(this).siblings('.inner'));
});​ 
```

**演示：http:** [//jsfiddle.net/LDpwq/4/](http://jsfiddle.net/LDpwq/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:20:54.920

您的原始代码有两个问题：

```
$(".greeting").each(function() {
    $(this).children('.time').addClass("on");
    $(this).children('.time').after($('.inner'));
}); 
```

**1）**您正在选择`inner`要移动的所有具有类的元素：

```
$('.inner') 
```

Intead，仅使用当前 div 中的一个：

```
$(this).children('.inner') 
```

**2）**您正在使用该`after`函数，它将作为参数传递的内容插入到您调用该函数的元素*之后。*另一方面`insertAfter`以相反的方式操作。来自[jQuery 文档](http://api.jquery.com/after/)：

> 使用 .after()，方法前面的选择器表达式是插入内容的容器。另一方面，使用 .insertAfter()，内容在方法之前，作为选择器表达式或作为动态创建的标记，它被插入到目标容器之后。

因此，您可以将代码更改为：

```
$(".greeting").each(function() {
    $(this).children('.time').addClass("on");
    $(this).children('.time').insertAfter($(this).children('.inner'));
}); 
```

或这个：

```
$(".greeting").each(function() {
    $(this).children('.time').addClass("on");
    $(this).children('.inner').after($(this).children('.time'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T00:01:00.547

尝试这个：

```
$(".greeting").each(function() {
    $(this).children('div:eq(0)').before($(this).children('div:eq(1)'));
}); 
```

[http://jsfiddle.net/LDpwq/15/](http://jsfiddle.net/LDpwq/15/)

# email - 发送单个电子邮件而不被标记为垃圾邮件

> ID：10576145
> 
> 赞同：0
> 
> 时间：2012-05-13T23:53:40.927
> 
> 标签：email, mailchimp, amazon-ses

我正在使用我的 Google Apps 帐户（标准版）向真正感兴趣的客户发送单封电子邮件（自动）。

问题是我的发件人电子邮件帐户已被暂停，因为它被 Google 视为“垃圾邮件发送者”。

从现在开始，我该怎么做才能发送此类电子邮件？我使用[MailChimp](http://www.mailchimp.com)发送大量电子邮件，我看到它有一个名为[STS](http://apidocs.mailchimp.com/sts/)的 API ，用于发送单个电子邮件，但它还需要一个 Amazon SES 帐户，所以我不知道是投资这些服务还是做点什么别的。

对于这种情况，您有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:59:27.180

您应该尝试专门发送“交易”电子邮件的服务，例如[Sendgrid](http://sendgrid.com)、[Postmarkapp](http://postmarkapp.com)和[Mailjet](http://mailjet.com)。

他们有适用于大多数编程语言的 API 和库，但在您的情况下，您只需要配置他们在您的电子邮件客户端中提供的 SMTP 服务器，您就可以开始了。它们可以帮助您不进入收件人的垃圾邮件文件夹，并帮助确保您不会被标记为垃圾邮件发送者

对于它们中的大多数，您还应该获得一些非常强大的分析，这是一个不错的奖励。

# apache - 使用 .htaccess 重定向页面而不使用“mod_rewrite”更改 URL

> ID：10576147
> 
> 赞同：0
> 
> 时间：2012-05-13T23:54:16.870
> 
> 标签：apache, .htaccess

我的页面上有一个脚本，用于检查单词签名的 url。如果该词存在，它会在页面加载的下拉列表中显示登录表单。我想避免在服务器上创建额外的文件，所以我想知道如何做到这一点：

当用户位于以下任一 URL 时：

[http://abramobile.com/signin](http://abramobile.com/signin) http://abramobile.com/sign-in

然后将页面引导回主页，但在 URL 中保留“登录”或“登录”，以便我页面上的脚本检测到它在 URL 中。

将什么 mod_rewrite 放入我的 .htaccess 文件中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:58:30.893

这应该这样做。这与 URI 完全匹配，`/signin`或者`/sign-in`在内部重写 URI`/`以便得到服务。

```
RewriteRule ^sign-?in$ / [L] 
```

# python - ImportError：没有名为站点的模块-Python27-MacPorts

> ID：10576151
> 
> 赞同：1
> 
> 时间：2012-05-13T23:55:27.393
> 
> 标签：python, macports

好的，我最近用 macports 安装了 Python27，但是发生了一些事情，我弄得一团糟。所以我用`sudo port uninstall --follow-dependents python27`. 然后我重新安装了它，确实`sudo port select --set python python27`。至此，一切顺利。但是现在我去运行python，我得到一个错误：

`ImportError: No module named site`

有任何想法吗？在过去的一个小时里，它一直让我发疯。

Mac OS X Lion / Python 2.7 / MacPorts

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:58:19.423

此问题的正确解决方案是确保您的`PYTHONHOME`环境变量设置正确。如果`PYTHONHOME`指向无效位置或您尝试运行的另一个 Python 安装，您将收到此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T19:48:54.373

我遇到了这个问题，最后证明与权限有关。

愚蠢的 mac-ports 做了一些事情，不太确定是什么，但我申请了`sudo chmod -R a+x $PYTHONPATH`（这基本上使所有人都可以执行所有*文件*`$PYTHONPATH`）。

 *从安全的角度来看，这是一个令人讨厌的，也许是危险的修复，但在这个阶段，我只想让它工作！*

# php - 如何组合两个文本超链接

> ID：10576161
> 
> 赞同：0
> 
> 时间：2012-05-13T23:58:20.543
> 
> 标签：php, javascript, html

假设我们有以下超链接代码

```
<a id="cont" href="www.first_site.com">Something</a> 
```

我想使用以下java代码将它与弹出窗口结合起来

```
<script language="javascript">
var popupWindow = null;
function centeredPopup(url,winName,w,h,scroll){
LeftPosition = (screen.width) ? (screen.width-w)/2 : 0;
TopPosition = (screen.height) ? (screen.height-h)/2 : 0;
settings =
'height='+h+',width='+w+',top='+TopPosition+',left='+LeftPosition+',scrollbars='+scroll+',resizable'
popupWindow = window.open(url,winName,settings)
}
</script>

<a href="www.second_site.com" onclick="centeredPopup(this.href,'myWindow','500','300','yes');return false">Anything</a> 
```

有什么想法可以将两者结合起来，这样当我点击`Something`第一个超链接时，它会打开弹出窗口`www.second_site.com`并移动到`www.first_site.com`

任何帮助〜谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T00:06:21.153

如果我没有误会你的话……</p>

```
<a href="http://www.first_site.com" onclick="centeredPopup(this.href,'myWindow','500','300','yes'); window.location='http://www.second_site.com'; return false">Anything</a> 
```

请注意，如果您不让它返回 false，它会打开弹出窗口打开的同一个站点。

**编辑：**很抱歉混淆了网站顺序。这是正确的版本：

```
<a href="http://www.second_site.com" onclick="centeredPopup(this.href,'myWindow','500','300','yes'); window.location='http://www.first_site.com'; return false">Anything</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:02:49.860

如果您使用相同的窗口名称，则两个调用都`window.open`将在同一窗口/选项卡中打开 url。该变量`popupWindow`对您的情况没有多大帮助，因为由于同源策略，对大多数引用窗口属性的访问将被拒绝。

# ember.js - 在 EmberJS 中，我的事件触发了所有子视图，而不仅仅是目标视图

> ID：10576163
> 
> 赞同：0
> 
> 时间：2012-05-13T23:58:51.143
> 
> 标签：ember.js

我正在学习 EmberJS 并构建一个允许 1 级子评论的评论部分。我有一个列出所有评论的 Ember 视图，当您在特定评论上单击“回复”时，它应该显示一个文本区域输入，供用户编写子评论。

在我的 EmberJS 代码中，当您单击“回复”时，它会显示所有评论的文本区域输入，而不仅仅是特定评论。任何意见，将不胜感激 ：）

```
// View
App.commentsView = Em.View.create({
templateName: 'commentsTmpl',
showReply: false,

reply: function(e) {
    e.view.set('showReply', true);
    e.preventDefault();
}
}); 

App.replyCommentsView = Em.View.extend({
showReplyBinding: 'App.commentsView.showReply'
}); 
```

```
// Template
<script data-template-name="commentsTmpl" type="text/x-handlebars">
</h2>comment</h2>
{{#each App.commentsController}}
<div class="comment-group clearfix">
  <div class="comment">
    <img class="comment-pic" {{bindAttr src="userPic"}} alt="user pic"> 
    <div class="comment-content">
        <a href="#" class="comment-username">{{userName}}</a> 
        <span class="comment-body">{{text}}</span>
        <div class="comment-actions clearfix">
          <a href="#" {{action "reply"}}>Reply</a>
        </div>
    </div>
  </div>
{{#view App.replyCommentsView}}
  {{#if showReply}}
  <div class="comment-reply">
    <h2>sub-comment</h2>
    <textarea class="txt-comment-reply" rows="2" cols="65"></textarea>
  </div>
  {{/if}}
{{/view}}
</div>
  {{/each}}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:21:27.630

`App.commentsView`当前，您正在绑定作为整个容器的 showReply 。为了方便激活单个评论，我建议查看 CollectionView，这样您的每个评论都会有自己的视图，您可以切换`showReply`单个评论的视图。

像这样的东西：（对不起，我没有测试过）

```
App.commentsView = Em.View.create({
  templateName: 'commentsTmpl'
}); 

App.CommentView = Em.View.extend({
  classNames: "comment-group clearfix".w(),
  showReply: false,

  reply: function(e) {
    e.preventDefault()
    this.set("showReply", true)
  }
}) 
```

```
// Template
<script data-template-name="commentsTmpl" type="text/x-handlebars">
  </h2>comment</h2>
  {{#collection contentBinding="App.commentsController" itemViewClass="App.CommentView"}}
      <div class="comment">
        <img class="comment-pic" {{bindAttr src="content.userPic"}} alt="user pic"> 
        <div class="comment-content">
          <a href="#" class="comment-username">{{content.userName}}</a> 
          <span class="comment-body">{{content.text}}</span>
          <div class="comment-actions clearfix">
            <a href="#" {{action "reply"}}>Reply</a>
          </div>
        </div>
      </div>
      {{#if showReply}}
      <div class="comment-reply">
        <h2>sub-comment</h2>
        <textarea class="txt-comment-reply" rows="2" cols="65"></textarea>
      </div>
      {{/if}}
  {{/each}}
</script> 
```

# latex - 以双列乳胶形式在标题和正文之间输入一个数字

> ID：10576164
> 
> 赞同：2
> 
> 时间：2012-05-13T23:58:52.533
> 
> 标签：latex

我正在使用 Latex 使用 CVPR 模板写一篇小论文。

我想在我的标题+名称和正文（由两列组成）之间放置一个数字，就像许多 CVPR 论文一样，但我找不到这样做的方法。

我试过了，

```
\begin{figure*}
\begin{center}
\fbox{\rule{0pt}{2in} \rule{.9\linewidth}{0pt}}
\end{center}
   \caption{some caption..}
\label{fig:short}
\end{figure*} 
```

*但事实证明 figure-star 仅在下一页*顶部显示它的图形，而当我只使用 figure like`\begin{figure}[htb]`时，它​​仅位于这两列之一。

有谁知道如何在我的标题+名称和正文上下文之间放置一个长数字？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:23:24.453

您没有提及在标题中插入日期的任何内容。那么，为什么不使用日期来存储您的图像：

![在此处输入图像描述](../Images/4c533adfd429f39a2b2cb38c66ccbbc9.png)

```
\documentclass[twocolumn]{article}
\usepackage{mwe}% http://ctan.org/pkg/mwe
\title{My Title}
\author{A.\ Uthor}
\date{\includegraphics[height=2in]{example-image}}
\begin{document}
\maketitle

\lipsum[1-4]
\end{document} 
```

该[`mwe`软件包](http://ctan.org/pkg/mwe)提供了示例图像 (via [`graphicx`](http://ctan.org/pkg/graphicx)) 和虚拟文本 (via [`lipsum`](http://ctan.org/pkg/lipsum))。

# javascript - 不冒泡的 JS 事件（进度、加载的元数据等）

> ID：10576167
> 
> 赞同：0
> 
> 时间：2012-05-13T23:59:35.750
> 
> 标签：javascript, events, event-bubbling

我发现视频/音频标签上的某些事件不会冒泡（加载的元数据、进度等）。这是违反标准还是其他事件很常见？

我怎么知道哪些事件应该冒泡或不冒泡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:03:16.460

1.  你可以测试一下...
2.  `readonly attribute boolean bubbles;`检查事件的这个属性。

**布尔类型的气泡，只读**

> 用于指示事件是否为冒泡事件。如果事件可以冒泡，则值为 true，否则值为 false。

[w3 源](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface)不是 w3School ... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:08:47.673

冒泡事件通常是那些需要冒泡的事件。就像你点击一个元素一样，你也在点击它的父元素，所以它必须冒泡。但是，当媒体元素上发生进度时，它并不会像 keyup、click、mouseover 等那样真正发生在其父元素上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T00:16:00.883

看规格。gdoron 已经发布了他们的链接并解释了每个`Event`都有一个属性来指示它是否冒泡 - 只有当你已经有事件时才有用。

但是，请进一步查看该规范：在[事件模块定义](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings)中，有一个事件概述以及它们是否冒泡。[此外，您会在DOM-Level3-Draft](http://www.w3.org/TR/DOM-Level-3-Events/)中找到更多事件。

此外，您还询问了进度事件。它们只是草稿，但在[有关提议事件的部分](http://www.w3.org/TR/progress-events/#suggested-names-for-events-using-the-progressevent-interface)中，您会发现它们不应该冒泡。

# android - ViewPager 示例的更多问题

> ID：10576175
> 
> 赞同：0
> 
> 时间：2012-05-14T00:00:48.040
> 
> 标签：android, android-viewpager

我从 GitLib 下载了一个 ViewPager 示例，不幸的是，它附带了一个“Sherlock 主题”，但出现了各种错误。有人建议我在另一篇文章中删除主题，其中一个步骤是更改下面的代码以从 FragmentActivity 而不是 SherlockFragmentActivity 扩展。但是当我这样做时，我会得到错误。setContentView(R.layout.main) 错误说'main'不是一个字段 R.id.pager 错误说'pager'不是一个字段 因为我还不明白这段代码是如何工作的，我不知道如何修复错误。任何见解将不胜感激。谢谢，加里

```
public class ViewPagerFragmentDemoActivity extends    SherlockFragmentActivity {  
@Override  
public void onCreate(Bundle savedInstanceState) {    
  super.onCreate(savedInstanceState);    
  setContentView(R.layout.main);    
  ViewPager pager=(ViewPager)findViewById(R.id.pager);    
  pager.setAdapter(new SampleAdapter(getSupportFragmentManager()));  
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:12:28.237

听起来您的 R.java 文件尚未重建（或者您现在指向错误的文件）。

在你的导入中查找一个 android R 文件（IIRC 它是 com.android.R）......如果它在那里删除它。然后清理您的项目，然后 Eclipse 应该重新构建您的项目并导入它。

另一种可能性是您在 xml 文件中有错误。如果编译器无法解析 xml 文件，它将无法生成新的 R.java 文件。通常有问题的孩子会有一个小红旗。

# javascript - 创建一个真正的 3D 网站

> ID：10576177
> 
> 赞同：4
> 
> 时间：2012-05-14T00:01:12.123
> 
> 标签：javascript, 3d, webgl

是否有可能使用 WebGL 等技术创建一个真正的 3D 网站？我所说的 3D 是指**使用 3D 显示器**。

首先，WebGL 的任何浏览器实现是否提供任何类型的允许 3D 的功能，例如**Quad Buffering**？

是否有任何**其他**可行的方法来制作 3D 网页，比如 Flash、浏览器插件等？（不是浮雕）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:11:09.720

并排立体声适用于移动设备，前提是您有 FOV2Go 或 Hasbro My3D 查看器之类的东西来查看它们：

[http://projects.ict.usc.edu/mxr/diy/fov2go/](http://projects.ict.usc.edu/mxr/diy/fov2go/)

[http://www.hasbro.com/hasbromy3d/en_us/shop/browse/_/N-1rZgt/Ntt-my3d&viewer?Ntx=mode+matchallpartial&Items=50&Ntk=All](http://www.hasbro.com/hasbromy3d/en_us/shop/browse/_/N-1rZgt/Ntt-my3d&viewer?Ntx=mode+matchallpartial&Items=50&Ntk=All)

在这种情况下，您只需以稍微不同的角度绘制两次场景，例如此处的示例：http: [//fhtr.blogspot.com/2010/06/webgl-stereo-rendering-demo.html](http://fhtr.blogspot.com/2010/06/webgl-stereo-rendering-demo.html)

# ios - 单击 iPhone 应用程序中的平面图区域？

> ID：10576181
> 
> 赞同：3
> 
> 时间：2012-05-14T00:01:53.870
> 
> 标签：ios

我想构建一个显示不同区域/房间平面图的 iPhone 应用程序。当用户点击一个区域/房间时，它会在几分之一秒内显示命中状态颜色，然后滑动到带有附加文本信息的新 UIView。

我应该通过 UIImages 设置所有不同的区域，还是应该以编程方式绘制自己的平面图？我尝试以编程方式绘制一些矩形，但不确定是否可以将点击事件处理程序附加到图形。或者，如果以编程方式维护具有不寻常形状的楼层地图更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T05:25:56.497

我的要求和你一样。看我的[问题](https://stackoverflow.com/questions/19727944/implement-floor-map-with-user-interaction-on-specific-region-room-area?noredirect=1#comment29376667_19727944)。最后我`UIScrollView`继续`Zoom in out functionality`。我已经添加`UIViews`了多个`Scroll`并且都`UIViews`具有`UILable`所以它`Room / Booth`看起来像[这个问题](https://stackoverflow.com/q/19728213/935381)。为了存档这个，我遇到了一个[查询](https://stackoverflow.com/q/19856928/935381)并最终解决了这个问题并像我的第一个问题链接一样实施了**楼层地图。**

现在要解决您必须`UITapGestureRecognizer`像下面的代码那样实现的问题。

```
UITapGestureRecognizer *fingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handlefingerTap:)];
fingerTap.delegate = self;
[fingerTap setNumberOfTapsRequired:1]; 
```

比您必须将此手势设置为您的视图并实现如下的点击方法 `[rigionView addGestureRecognizer:fingerTap];`

```
- (void)handlefingerTap:(UIGestureRecognizer *)gestureRecognizer
{} 
```

如果您添加了多个`UIViews`而不是在.i中`Scroll`实现上述代码，则执行相同的操作。`for loop`

我希望它会帮助你..

# c# - InputeState 方法参数

> ID：10576190
> 
> 赞同：0
> 
> 时间：2012-05-14T00:03:27.837
> 
> 标签：c#, parameters, xna, boolean

查看 XNA 套件的一些输入`GSM`，我注意到其中一些 `booleans`有两个参数，而另一些只有一个。为什么？两者有区别吗？

这是两个示例，后面是整个代码的链接。

```
 /// <summary>
    /// Checks for a "pause the game" input action.
    /// The controllingPlayer parameter specifies which player to read
    /// input for. If this is null, it will accept input from any player.
    /// </summary>
    public bool IsPauseGame(PlayerIndex? controllingPlayer)
    {
        PlayerIndex playerIndex;

        return IsNewKeyPress(Keys.Escape, controllingPlayer, out playerIndex) ||
               IsNewButtonPress(Buttons.Back, controllingPlayer, out playerIndex) ||
               IsNewButtonPress(Buttons.Start, controllingPlayer, out playerIndex);
    }

    /// <summary>
    /// Checks for a "menu cancel" input action.
    /// The controllingPlayer parameter specifies which player to read input for.
    /// If this is null, it will accept input from any player. When the action
    /// is detected, the output playerIndex reports which player pressed it.
    /// </summary>
    public bool IsMenuCancel(PlayerIndex? controllingPlayer,
                             out PlayerIndex playerIndex)
    {
        return IsNewKeyPress(Keys.Escape, controllingPlayer, out playerIndex) ||
               IsNewButtonPress(Buttons.B, controllingPlayer, out playerIndex) ||
               IsNewButtonPress(Buttons.Back, controllingPlayer, out playerIndex);
    } 
```

[完整的 InputState 代码](http://pastebin.com/MqZRcf5A)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:10:08.477

第一个函数告诉你玩家按下了暂停按钮，但没有告诉你是哪个。第二个函数告诉你一个玩家取消了菜单并告诉你是谁做了它。这就是`out PlayerIndex playerIndex`这个函数的参数。

基本上，开发人员选择传递或不传递他们从输入检测功能接收到的信息。

至于为什么，我想知道哪个玩家关闭菜单很重要。例如，在 PES 中，每个玩家设置他的设置，然后按下取消菜单按钮。只有当两个玩家都按下取消按钮时，菜单才会真正关闭。

猜猜，关于谁请求暂停的信息不相关，因此不会传递出去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:09:11.360

如果您想指定一个特定的人来寻找输入，则使用控制播放器。如果未指定，它将查看所​​有控制器。玩家索引指定谁按下了所提供的输入。这就是为什么它是一个输出参数。

# javascript - 使用 javascript 将表单字段的值传递给 Url

> ID：10576193
> 
> 赞同：1
> 
> 时间：2012-05-14T00:04:49.610
> 
> 标签：javascript, jquery, forms, url

我想将两个输入的值传递给 url 以使其像

“http://www.testing.com?item=product+amount=100”

这只是一个例子。

许多教程都将值从 url 传递到表单的字段中。

如何以相反的方式使其...

提前致谢。

附言

有两页，一页有一个表格。Page One的表单由用户填写，然后通过url将值传递给Page Two的表单，Page Two的表单可以从url中获取值来填充相关字段。

非常感谢你们的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T00:06:58.363

嗯...

```
<form action="" method="get">
    <input type="text" name="item" value="product" />
    <input type="text" name="amount" value="100" />
    <input type="submit" />
</form> 
```

单击提交按钮时，`item`和`amount`变量“传递到 URL”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T00:05:54.837

```
var data = $('input').serialize(); 
```

更具体的可以是：

```
var data = $('#item, #amount').serialize(); 
```

然后将数据附加到 URL 的查询字符串，或使用 jQuery ajax 函数之一。

# objective-c - 分布式对象+大中央调度

> ID：10576194
> 
> 赞同：0
> 
> 时间：2012-05-14T00:04:56.383
> 
> 标签：objective-c, cocoa, grand-central-dispatch, distributed-objects

不是一个具体的问题，我更想试水。我喜欢分布式对象，我喜欢宏大的中央调度；我试着把两者结合起来怎么样？

这甚至有意义吗？有人在这些水域玩过吗？我可以使用 GCD 来帮助同步跨机器的对象访问吗？还是坚持只同步本地对象会更好吗？我应该注意什么？哪些设计模式有帮助，我应该避免什么？

例如，我使用 GCD 队列来同步对某种共享资源的访问。如果我通过分布式对象将此资源公开，会发生什么？像这样的问题：块玩分布式对象有多好？我可以期望在机器上正常使用一切吗？如果没有，我可以争取这样做吗？我会遇到什么困难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:34:21.660

我非常怀疑这是否会奏效。GCD 对象不是 Cocoa 对象，因此您不能远程引用它们。GCD 同步原语不能跨进程边界工作。

虽然块是对象，但它们不支持`NSCoding`，因此它们不能跨进程边界传输。（如果你仔细想想，它们只不过是函数指针。指向的函数必须已经编译到可执行文件中。所以，两个不同的程序共享一个块是没有意义的。）

此外，分布式对象取决于在给定运行循环中调度的连接。由于您不管理 GCD 使用的线程，因此您无权添加运行循环源，除非是临时的。

坦率地说，我什至不确定你如何设想它甚至在理论上有效。你希望做什么？你预计它会如何运作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-02T00:36:43.240

跨机器运行——例如在 LAN、MAN 或 WAN 中？

在 LAN 中，只要您连接的服务器正常运行，分布式对象就可以正常工作。但是，您遇到的大多数程序员可能会扬起眉毛，然后问您：“您为什么不直接在 LAN 上使用 Web 服务器并构建自己的包装类，让它‘感觉’像分布式对象？” 我的意思是，一方面，有一些完善的工具可以对 Web 服务器进行故障排除，而且雇用某人为您构建 Web 服务而不是分布式对象服务器更容易而且通常更便宜。

然而，在 MAN 或 WAN 上，这会很慢，并且对于大多数用途来说是一个非常糟糕的主意。对于这种类型的通信，您最好使用其他人都使用的东西——带有 HTTPS/HTTP 的类似 REST 的 API，来回发送 XML、JSON 或键/值数据。因此，您可以制作一个类包装器，使这种“感觉”有点像分布式对象。我的直觉告诉我，您需要使用技巧来加快速度，例如在客户端本地缓存数据块，这样您就不必一直从服务器获取数据，甚至在服务器上缓存它不必经常与数据库交互。

GCD、分布式对象、Mach 端口、XPC、POSIX 消息队列、命名管道、共享内存和许多其他 IPC 机制实际上只对同一台计算机上的本地应用程序到应用程序通信最有意义。如果您想利用它，它们还具有特权提升的额外优势。（注意，我说的是 POSIX 消息队列，它是特定于工作站的。您仍然可以在 LAN、MAN 或 WAN 上使用“消息队列服务”——有很多产品可用。）

# multithreading - 对于 Mac 和 BSD，我如何找到当前线程正在运行的 cpu？

> ID：10576195
> 
> 赞同：5
> 
> 时间：2012-05-14T00:05:12.827
> 
> 标签：multithreading, macos, bsd, cpuid, multiprocessor

我正在寻找一个在 Mac OS 和 BSD 上等效于 Linux`sched_getcpu()`和 Windows 的功能`GetCurrentProcessorNumberEx()`，以便实现一个用于 cpu-local 存储的库。显然可以使用 cpuid 或 rdtscp 指令来模拟这一点，但可以通过内核合作做得更好：[https](https://lkml.org/lkml/2007/1/6/190) ://lkml.org/lkml/2007/1/6/190 。

我已经知道线程的当前 CPU 可能会在我使用这些信息时发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T06:51:55.497

有[一个](https://stackoverflow.com/questions/4942686/how-to-know-where-queue-am-i-main-queue-or-not)或[两个](https://stackoverflow.com/questions/7336322/how-to-get-hold-of-the-currently-executing-nsoperation)问题涵盖了 OSX 的队列跟踪，以及一个[dispatch_get_global_queue](http://wiki.freebsd.org/GCD) wiki 页面，它涵盖了 BSD 的等价物。我不知道您是否可以将队列映射到 CPU，但如果可以，那似乎是最接近的等价物。

# android - Android - 如何添加一个简单的页脚？

> ID：10576197
> 
> 赞同：1
> 
> 时间：2012-05-14T00:05:48.333
> 
> 标签：android, android-layout

我一直在浏览不同的帖子，他们都有页脚试图留在屏幕上。

但我希望页脚出现在每一页上。我的一些页面没有卷轴，但有些页面有。每当有滚动时，我希望页脚出现在滚动下方。怎么可能呢？

例如，如果我有这个页面：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<ScrollView
      android:layout_width="fill_parent"
      android:layout_height="fill_parent" >    

<LinearLayout 
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >    

<TextView
    android:id="@+id/page_exlain"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Some text that either extends far down or is pretty short."
    android:layout_marginTop ="20dp" 
    />          

</LinearLayout>

</ScrollView>

</LinearLayout> 
```

什么是添加页脚的好方法不一定出现在首屏上方？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T00:22:19.820

我这样做的方法是在父布局内​​有两个线性布局。第一个是我所说的内容区域，它的权重为 1，这意味着它将尝试从父视图中占用尽可能多的空间。另一方面，页脚布局将没有权重，因此即使其他视图（内容区域）为空，也会保持与内部内容匹配的高度。

您可以在此布局的一部分内添加一个`scrollview`或任何其他类型的布局， `content`而不会破坏两个元素的配置，也无需担心页脚的位置，因为它始终位于屏幕底部。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/main"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:orientation="vertical" >
<LinearLayout
                    android:id="@+id/content"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical" >
</LinearLayout>
<LinearLayout
                    android:id="@+id/footer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >
</LinearLayout> 
```

在前面的代码中添加一点内容，你会得到这样的结果，注意它非常简化。只要您了解适当的重量属性，就可以根据需要修改它。

![在此处输入图像描述](../Images/f1b1f284c4d17fdb706568e1221140df.png)

您只需要将“内容”`LinearLayout`视为父内容，插入滚动视图或您需要的任何内容并忘记页脚。请注意，如果页脚是递归的，这意味着您将多次使用它，您可以直接将其加载到 xml 中，而无需将其复制到所有布局中

```
<include layout="@layout/footer" /> 
```

您的布局文件夹中的 xml 文件在哪里，其中`@layout/footer`包含您要重用的页脚内容。这实际上与手动添加它相同，但方便的是不必跨多个文件维护它。

希望我能有所帮助。

# php - PHP - 将由 CSV 制成的二维数组重新格式化为适合 MYSQL 导入的模式

> ID：10576203
> 
> 赞同：0
> 
> 时间：2012-05-14T00:06:36.103
> 
> 标签：php, mysql, csv, import, multidimensional-array

我有一个 CSV 文件要导入 MYSQL 数据库。问题是每行都有不同数量的字段。他们的安排相当随意。
但是，它们可以分为几类（文本、图像....等）。

在目前的形式中，直接导入数据库太不规则了，所以我厌倦了使用 PHP 重新格式化它。

简化示例：

```
$messy = array( 
         [0]  => array("text1","text2" ),
         [1]  => array("img1.jpg" ),
         [2]  => array("text1","img1.jpg","img2.jpg"),
         [3]  => array("img1.jpg","text1","text2"),
            ...
         [1000]  => array("text2","img1.jpg","img2.jpg","text1")
         ); 
```

我希望新数组与以下模式匹配

```
array( 
         [0]  =>array(TEXT,TEXT,IMG,IMG),
         [1]  =>array(TEXT,TEXT,IMG,IMG), 
```

在没有足够数据的情况下，剩余值=0；

```
 [0]  =>array("text1","text2",0,0),
         [1]  =>array(0,0,"img1.jpg",0), 
```

我尝试创建新数组并将“文本”文件移到开头，如下所示：

```
$ordered=array();            
$i=0;

    foreach($messy as $row){

        foreach($row as $item){
            if (strlen(strstr($item,"text"))>0) {

                    if(($key = array_search($item, $row)) !== false){                   
                        unset($row[$key]);                      
                    }

                array_unshift($row,$item);

            }

        }

        $ordered[$i++]=$row;

    } 
```

但是它不会重新格式化，只是重新排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:27:50.560

```
function item_is_img($item) {
    $ext = pathinfo( $item, PATHINFO_EXTENSION )
    switch ( strtolower($ext) ) {
        case 'jpg':
        case 'jpeg':
        case 'png':
            return true;
            break;               
        default:
            return false;
    }        
}

function reorder( $inputArray) {
    $resultArray = array();
    foreach ($inputArray as $line) {
        $t = 0;
        $i = 2;
        $result = array(0,0,0,0);
        foreach ($line as $item) {
            if ( item_is_img($item) )
                $result[$i++] = $item;
            else
                $result[$t++] = $item;
        }
        $resultArray[] = $result;
    }
    return $resultArray;
} 
```

完全未经测试。假设最多有 2 个 TEXT 类型和 2 个 IMG 类型。容易失败。

# java - 我需要在 Java 的特定工作目录中执行命令行程序

> ID：10576205
> 
> 赞同：2
> 
> 时间：2012-05-14T00:06:45.523
> 
> 标签：java, command-line, runtime, execute

我需要执行一个带有 2 个参数的命令行程序。但是，它必须在工作目录中执行。即“命令 arg1 arg2”，而不是“c:\folder\subfolder\command arg1 arg2”

从这里的其他问题来看，我已经开始使用 Runtime.exec(cmdArray, null, workingDirectory); 但我不断收到“CreateProcess error=2，系统找不到指定的文件”。我查了一下，路径和文件都存在，所以我不知道出了什么问题。这是我正在使用的代码。

```
String [] fileName = {"mp3wrap.exe", "Clear_10", "*.mp3"};
String dirName = "E:\\Music\\New Folder\\zz Concatinate\\Clear_10";
try {
    Runtime rt = Runtime.getRuntime();
    Process pr = rt.exec(fileName, null, new File(dirName));
    BufferedReader input = new BufferedReader(new InputStreamReader
        (pr.getInputStream()));
    String line = null;
    while ((line = input.readLine()) != null) {
        System.out.println(line);
    }//end while
    int exitVal = pr.waitFor();
    System.out.println("Exited with error code " + exitVal);
}//end try
catch (Exception e) {
    System.out.println(e.toString());
    e.printStackTrace();
}//end catch` 
```

我收到此错误：

java.io.IOException: Cannot run program "mp3wrap.exe" (in directory "E:\Music\New Folder\zz Concatinate\Clear_10"): CreateProcess error=2, 系统找不到指定的文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T00:12:26.697

给出 mp3wrap.exe 的完整路径。

Java 不使用 PATH 来查找 mp3wrap。

-- 评论后更新：

好的 - 重新阅读问题，他询问如何从目录内部启动程序。如果程序需要它，您必须在此目录中启动 Java 程序。

您可能仍然需要提供程序的整个路径，或者在启动它时指示在当前目录中搜索它。我记得，在 Windows 中，总是搜索当前目录。其他系统在此处有所不同，因此您可以用点表示当前目录，这也适用于 Windows：“./mp3wrap”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T00:39:26.337

或者，您可能想尝试使用`ProcessBulder.start()`. 您可以设置环境变量、工作目录和您想要传递给`Process`由该`start()`方法生成的任何参数。查看 Java 文档以获取示例调用。

# mercurial - Mercurial 将文件名更改为大写并且不跟踪它们

> ID：10576207
> 
> 赞同：2
> 
> 时间：2012-05-14T00:07:04.423
> 
> 标签：mercurial, commit, add, fogbugz, kiln

我在水银和窑方面遇到了一些问题，也许你可以指出我正确的方向。有时，当我提交文件时，它们被重命名为大写“Assembly.NameSpace”将更改为“ASSEMBLY.NAMESPACE”，如果我在对它们进行更改后尝试提交，它们似乎没有被跟踪（我发现了关于我提交后重命名的文件）。

无论我做什么，他们都不会被跟踪。我尝试使用控制台添加，使用 hg 工作台，但似乎没有任何效果。为了让它工作，我需要忘记文件，然后提交，然后再次添加它们，然后提交，这对我来说真的很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:00:41.623

文件是否可能已经存在于存储库中，但大小写不同？对于需要在真正区分大小写的系统和只保留大小写的系统上工作的任何系统来说，“大小写折叠”都是一个问题。当出现折叠问题时，Mercurial 已经做了很多工作来尽可能地降低质量，并且在 Mercurial wiki 中有很多关于它的详细信息。

你在什么操作系统上工作？

当您执行文件的初始添加时，您是使用通配符还是按名称指定它们？

添加文件时磁盘上的文件是否真的改变了大小写？Mercurial 仅更改工作目录中的文件（外部的东西`.hg`） on `update`，因此仅执行此操作似乎几乎不可能`hg add; hg commit`更改工作目录中文件的大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:31:38.380

升级到最新版本将解决问题。

# javascript - 自动分配 ID 的最佳实践

> ID：10576208
> 
> 赞同：1
> 
> 时间：2012-05-14T00:07:06.210
> 
> 标签：javascript, jquery

我有一个页面包含这样的链接：

```
<a href="" onclick="add()">new user </a> 
```

当用户单击链接时，我会在页面中添加一个新的输入字段。我想为该输入字段分配一个 ID。我可以使用 Javascript 做到这一点：

```
var num=0;
function add(){
   num++;
   var input = document.createElement('input');
   input.setAttribute('ID',"input"+num);
} 
```

这行得通；但我的问题是，这是标准方法，还是有更好的方法来做到这一点，不使用 num、JS 或 jQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:10:07.567

您不需要*输入*元素上的 ID。但是，您可能需要一个`name`. 如果是这样，只需使用`name = "input[]"`- 然后在服务器端您将获得一组值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T00:10:08.970

```
var num=0;
function add(){
   num++;
   var input = document.createElement('input');
   input.id = "input"+num;
} 
```

不带的随机 ID `num`：

```
function add(){
   var input = document.createElement('input');
   input.id = 'input'+parseInt(Math.random()*1354243242);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T00:10:15.067

由于您使用的是 jQuery：

```
$('<input id="input'+ num +'"/>').appendTo('#yourElement') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T00:10:34.553

只需将 id 分配给元素：

```
var num=0;
function add(){
   num++;
   var input = document.createElement('input');
   input.id = "input" + num;
} 
```

**由于您使用 jQuery 标记了您的问题，因此您也可以这样做：**

```
function add(){
    var input = $('<input id="input' + num++ +'" />')
    // do something with the input.
} 
```

**或者：**

```
function add(){
    var input = $('<input>', {id = "input" + num++});
    // do something with the input.
} 
```

**更新：**

**没有 javascript 就不能创建 DOM 元素**（jQuery 就是 javascript）。

# node.js - req.session.id 与 req.session._id 不同

> ID：10576209
> 
> 赞同：2
> 
> 时间：2012-05-14T00:07:30.593
> 
> 标签：node.js, mongodb

我想了解为什么会这样：

```
req.session._id = doc._id;
req.session.id = doc._id;

console.log(typeof req.session._id); // object
console.log(typeof req.session.id); // string

console.log(req.session._id); // 4oqTbA06DcK9cIiU3tnK62Ic.0puZ9uPnIaghMBIQKaIbhIHYzeP8wtS3MXnzpi+yC1c
console.log(req.session.id); // 4fb01ad2ca42e9552d000001 
```

所以，当我想这样做时：

```
var myID = req.session._id, myIDm = new BSON.ObjectID(myID); // don't bug
var myID = req.session.id, myIDm = new BSON.ObjectID(myID); // bug: Argument passed in must be a single String of 12 bytes or a string of 24 hex characters 
```

感谢您告诉我有关此的所有信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:16:15.427

问题是，`_id`它是由 mongodb 自动生成的，并且是`ObjectID`可以传递给的类型，`BSON.ObjectID()`并且你会得到`ObjectId`具有相同 id 的新的。该`id`属性不由 mongodb 管理，如果将此值放入`BSON.ObjectID()`构造函数，则会引发错误。预期的字符串必须是 12 字节或长度为 24 的十六进制编码二进制（允许的字符是 af、AF、0-9）。希望这可以帮助。

# android - android线程不清楚

> ID：10576210
> 
> 赞同：0
> 
> 时间：2012-05-14T00:07:42.690
> 
> 标签：android, multithreading, handler

我有这个代码：

```
package org.example.Threading;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class ThreadingActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

    private doinback background = new doinback();
    Handler handle= new Handler(){
    @Override
    public void handleMessage(Message msg) {
        Log.e("INSIDE HANDLER", "About to stop the thread.");
        background.stopThread();
        }};
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.e("ONCREATE", "BEFORE Thread");
        background.start();
        Log.e("ONCREATE", "AFTER Thread started");

        View button = (Button)findViewById(R.id.button1);
        button.setOnClickListener(this);
    }

    class doinback extends Thread{
        private volatile boolean isRunning = false;
        public void run() {
            while(isRunning){
                Log.e("INSIDE THREAD", "about to sleep");
                handle.sendMessage(handle.obtainMessage());
            }

        }
        public void stopThread()
        {
            isRunning = false;
        }
        public void startThread(){
            Log.e("INSIDE StartThread","MAKING isRunning True");
            isRunning = true;
        }
        }
    public void onClick(View v) {
        background.startThread();
        Log.e("INSIDE ONCLICK", "made isRunning true, about to leave");

    }
} 
```

我试图理解为什么它不回到线程，如果我做错了什么，如果是这样，从线程来回返回的最佳方法是什么，例如我更改的 stopThread() 函数用于停止线程运行的 while 变量的值。当我运行代码并按下按钮时，它不会启动线程。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:09:25.447

当`background.start()`被调用时，`isRunning`仍然是假的，所以线程被启动（但没有进入while循环）并立即停止。

为保证线程在被调用时进入while循环`startThread`，可以在`startThread()`方法中放入如下代码：

```
public void startThread(){
    isRunning = true;
    start();
} 
```

而且您不打电话`background.start()`，`onCreate()`只需删除该行。

**编辑**

如果您想保持单个线程处于活动状态，那么您可以“启动”和“停止”它任意多次，您可以使用以下代码：

```
public void run () {
    while (isRunning) {
        if(!isWorking) {
            try { Thread.sleep(10); } catch (InterruptedException ex) { }
            continue;
        }
        //.. do your work here.
    }
} 
```

用 控制线程的运行状态，用 控制`isRunning`工作状态`isWorking`。

# android - 自定义列表项视图中的 Android 复选框问题

> ID：10576215
> 
> 赞同：0
> 
> 时间：2012-05-14T00:09:05.900
> 
> 标签：android, android-widget

请原谅我刚开始使用 Android 时可能听起来像新手的问题。

我试图完成的是创建一个自定义列表项布局，其中包含 2 个文本视图和一个用于选择多个项目的复选框。问题是复选框是“额外的”选择列表项，（例如）如果我选择 #1，那么 #9 和 #18 也会选择。好像 checkBox 实例正在回收自己，或者如果这有意义的话，可能共享相同的侦听器 ID。为简单起见，我已将代码缩小到主要组件。任何建议将不胜感激。

```
package com.untame.mobile.app;

import java.text.ChoiceFormat;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

import com.untame.mobile.app.*;

public class TestList extends ListActivity {

ArrayList<Map<String, String>> artistList;
private static String TAG = "TESTLIST!";
ListView listv;
LayoutInflater mInflater;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.testlayout);
    mInflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    artistList = new ArrayList<Map<String, String>>();

    for(Integer loop = 0 ;loop < 21;loop++){
        String loopI = loop.toString();
        Map<String,String> hm = new HashMap<String, String>();
        hm.put("artist", loopI);
        hm.put("count", loopI);
        artistList.add(hm);
    }

     // Loading artistNames in Background Thread
   // new LoadArtistList().execute("extra_tracks");
    listv = (ListView) getListView();
    listv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
   // listv.setItemsCanFocus(false);

 final class MyListAdapter extends BaseAdapter{

 ArrayList<Integer> ids;
public MyListAdapter(Context context) {

    ids = new ArrayList<Integer>();
    }

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    final ViewHolder holder;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.testlistitem1, null, false);
        convertView.setClickable(true);

        holder = new ViewHolder(getApplicationContext());

        holder.choose = (CheckBox) convertView.findViewById(R.id.testcheckBox1);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    return convertView;

}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return artistList.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return artistList.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
} 
```

}

```
 MyListAdapter adapter = new MyListAdapter(this);
         setListAdapter(adapter);

        }

} 
```

ViewHolder.java

```
package com.untame.mobile.app;

import android.content.Context;
import android.view.View;
import android.widget.CheckBox;
import android.widget.TextView;

public class ViewHolder extends View {
    public ViewHolder(Context context) {
    super(context);

}
    public CheckBox remove;
    public CheckBox choose;
    public TextView text2;
    public TextView text1;

} 
```

测试布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rootLayout"
android:layout_width="wrap_content"
android:layout_height="match_parent" >

    <ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

testitem.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <com.untame.mobile.app.ArtistListCheckBox
        android:id="@+id/testcheckBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="choose"
         />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:16:34.550

解决了！！！经过多次试验和错误后，人们必须将实际的复选框信息（即：checkbox.isChecked）存储到一个单独的对象中，该对象可以存储为当前复选框内的标签。这样，当视图在滚动列表时重绘新项目时，新创建的复选框可以从存储它的对象中重新捕获其最后状态。

就我而言，我在列表中有一个音乐艺术家列表，因此我创建了一个 Artist.java 类来创建 Artist 对象以存储为复选框标签。

# objective-c - 在等待 NSStream 响应时替换睡眠调用

> ID：10576218
> 
> 赞同：1
> 
> 时间：2012-05-14T00:09:25.800
> 
> 标签：objective-c, macos, cocoa, nsstream

我制作了一个应用程序，用于`NSStream`建立与 telnet 服务器的连接。建立连接后，我发送第一个命令。然后我`sleep(1);`用来让我的应用程序等待。然后发送第二个命令。

问题是整个 GUI 在`sleep()`. 我知道这不是“暂停”的“完美”方式，我想学习如何正确地做到这一点。我听说了一些好事，`NSTimer`但我想有一种具体且“简单”的使用方式，以简单地替换我对`sleep()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:17:07.297

您应该能够使用用于建立连接的任何过程注册某种回调。只需让您的代码等待该回调，而无需执行任何操作。

在这种情况下，使用`NSStream`，您需要[在运行循环上安排流](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Streams/Articles/PollingVersusRunloop.html#//apple_ref/doc/uid/20002275-CJBEDDBG)：

```
[stream scheduleInRunLoop:[NSRunLoop currentRunLoop]
                  forMode:NSDefaultRunLoopMode]; 
```

运行循环是为您的应用程序处理事件的构造。当您使用`sleep()`时，它会停止，您的 GUI 无法执行任何操作。通过将流作为输入添加到运行循环，您可以让它们继续工作。

您还必须设置一个委托对象（`[stream setDelegate:self];`例如），该对象将在流有要报告的内容[时接收通知。](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Streams/Articles/ReadingInputStreams.html#//apple_ref/doc/uid/20002273-1001882)该委托必须实现`stream:handleEvent:`，它将通过对流的引用和指示发生了什么的代码来调用。

# objective-c - Objective-C：返回 UIView 另一个 UIView 的中心点是否重叠？

> ID：10576219
> 
> 赞同：0
> 
> 时间：2012-05-14T00:09:35.077
> 
> 标签：objective-c, ios

我在屏幕上拖动一个 UIView，当 UIView 的中心与另一个 UIView 重叠时，视图 Y，我希望返回视图 Y。

Objective-C 中是否有方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:14:56.290

这应该做你喜欢的事情。如果您使用的是 UiPanGesture 而不是 touchesMoved，只需移动 if 语句。

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [ViewA setCenter:[[touches anyObject] locationInView:self.view]];

    if (CGRectContainsPoint(ViewB.frame,viewA.center)){
         // Do something with ViewB
    }
} 
```

# sql - 从表中选择，名称存储在字段中

> ID：10576223
> 
> 赞同：5
> 
> 时间：2012-05-14T00:10:12.230
> 
> 标签：sql, oracle

如何从名称为数据集字段的表中加入一些数据？

像这样：

```
SELECT *
FROM dataset
INNER JOIN dataset.table_name 
ON dataset.param_id = (dataset.table_name).id_(dataset.table_name) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T00:14:53.863

您必须使用 T-SQL 将 select 语句构造为字符串。然后，使用[执行命令](http://msdn.microsoft.com/en-us/library/ms188332.aspx)运行它。例如：

```
DECLARE @sql VARCHAR(MAX);
DECLARE @table_name VARCHAR(100);
SET @table_name = (SELECT TOP 1 table_name FROM dataset)   ' TODO set criteria correctly here
SELECT @sql = 'SELECT * FROM dataset INNER JOIN ' & @table_name & ' ON dataset.param_id = ' & @table_name & '.id_' & @table_name & ';'
EXEC (@sql) 
```

**更新**

这是 Oracle 的语法（引自*Andrewst*[在此处](http://www.dbforums.com/oracle/718534-ms-sql-exec-equivalent.html)的回答）：

```
DECLARE
  TYPE rc_type REF CURSOR;
  rc rc_type;
  table_rec table%ROWTYPE;
BEGIN
  OPEN rc FOR 'select * from table';
  LOOP
    FETCH rc INTO table_rec;
    EXIT WHEN rc%NOTFOUND;
    -- Process this row, e.g.
    DBMS_OUTPUT.PUT_LINE( 'Name: '||table_rec.name );
  END LOOP;
END; 
```

[http://www.dbforums.com/oracle/718534-ms-sql-exec-equivalent.html](http://www.dbforums.com/oracle/718534-ms-sql-exec-equivalent.html)

# iphone - 是否可以使用仪器从移动 safari 捕获站点的屏幕？

> ID：10576228
> 
> 赞同：1
> 
> 时间：2012-05-14T00:11:27.143
> 
> 标签：iphone, xcode, instruments

UIASCRIPT：

```
var result = UIATarget.localTarget().host().performTaskWithPathArgumentsTimeout("/usr/bin/open", ["/Applications/Safari.app", "http://www.google.com"], 30);
UIATarget.captureScreenWithName('test.png'); 
```

命令行：

```
instruments -t /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate Safari.app -e UIASCRIPT cap.js 
```

我的方法有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:53:16.003

问题是您在 UIATarget 类而不是目标对象上调用了 captureScreenWithName 方法。

它应该是：

`UIATarget.localTarget().captureScreenWithName('test.png');`

注意：与 captureRectWithName 相同。

# javascript - `set('pdf ppt tif tiff jpg jpeg'.split())` 的 JavaScript？

> ID：10576238
> 
> 赞同：0
> 
> 时间：2012-05-14T00:12:59.770
> 
> 标签：javascript, set, bookmarklet

主题行中的 Python 习语

```
set('pdf ppt tif tiff jpg jpeg'.split()) 
```

说明了一种相当紧凑的方法来创建一组字符串。¹ 我正在寻找一个类似的*紧凑*习语来在 JavaScript中创建一个***集合。***（注意：我对仅仅创建一个字符串列表***不***感兴趣。）

我知道在 JS 中设置集合的标准方法是使用对象（键是集合元素，值不重要），但我还没有找到在 JS 中创建这样一个集合的相当简洁的方法。

FWIW，我正在寻找的成语是为书签设计的（因此强调简洁）。

谢谢！

¹ 对于不熟悉 Python 的人，内部表达式只计算在空格处拆分调用字符串对象获得的字符串列表；这个列表就是`set`构造函数的参数。

编辑：强调我正在寻找一个***集合***（即***object***），而不是字符串列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T00:14:42.117

JavaScript 没有`set`类型，但您需要一个辅助函数来轻松地从字符串（或从`Array`）创建它。

这是一个辅助函数，它允许您调用`.set()`一个字符串并获取一个将项目从字符串映射到某个值的对象（`true`如果未指定）：

```
String.prototype.set = function(val) {
    var items = this.split(' '),
        len = items.length,
        obj = {},
        i;
    for(i = 0; i < len; i++) {
        obj[items[i]] = val === undefined ? true : val;
    }
    return obj;
}; 
```

演示：

```
> 'pdf ppt tif tiff jpg jpeg'.set()
{ pdf: true,
  ppt: true,
  tif: true,
  tiff: true,
  jpg: true,
  jpeg: true } 
```

由于您更喜欢简洁的东西，如果您只需要单个字符串，这可能是您的解决方案：

```
var set = (function(s){ var obj = {}; for(var i = 0, elems = s.split(' '), l = elems.length; i < l; i++) obj[elems[i]] = 1; return obj; })('pdf ppt tif tiff jpg jpeg'); 
```

在那种情况下，我会考虑简单地使用对象文字......这很可能是最短的解决方案，除非你有大量的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:22:04.533

ECMAScript 第 5 版具有[`Array.reduce`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
'pdf ppt tif tiff jpg jpeg'.split(' ').reduce(function(d,v){
    return d[v] = true,d
}, {});

Object
jpeg: true
jpg: true
pdf: true
ppt: true
tif: true
tiff: true
__proto__: Object 
```

# makefile - 了解makefile中的make命令？

> ID：10576248
> 
> 赞同：0
> 
> 时间：2012-05-14T00:15:45.847
> 
> 标签：makefile

我正在尝试修改生成文件以交叉编译二进制文件。有问题的命令如下：

```
# GNU Make solution makefile autogenerated by Premake
# Type "make help" for usage help

ifndef config
  config=debug
endif
export config

PROJECTS := json openjaus openjaus-core openjaus-environment openjaus-mobility openjaus-manipulator openjaus-ugv Base Managed PingTest LargeMessageTest PdDemo GposDemo   GposClientDemo StillImageSensorDemo StillImageClientDemo

.PHONY: all clean help $(PROJECTS)

all: $(PROJECTS)

json:   
    @echo "==== Building json ($(config)) ===="
    @${MAKE} --no-print-directory -C .build -f json.make 
```

可以看出，makefile 有几个目标。它们都具有与“json”目标相同的结构。有问题的命令是

```
@${MAKE} --no-print-directory -C .build -f json.make 
```

'${MAKE}' 变量 = make（我已经用 echo 验证了这一点） -C 有什么作用？.build 有什么作用？我很擅长 -f json.make

此外，当我运行 make 时，创建的 json.make 文件会编译文件并自行删除，因此我无权访问该文件。

我修改相关命令时收到的错误是

```
==== Building json (debug) ====
make[1]: Nothing to be done for `/home/botbear/openwrt/trunk/staging_dir/toolchain-    arm_v6k_gcc-linaro_uClibc-0.9.32_eabi/bin/arm-openwrt-linux-c++'. 
```

修改后的命令如下：

```
@${MAKE} /home/botbear/openwrt/trunk/staging_dir/toolchain-arm_v6k_gcc-linaro_uClibc-0.9.32_eabi/bin/arm-openwrt-linux-c++ --no-print-directory -C .build -f json.make 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:21:28.977

您可以`man make`用来了解以下参数`make`：

```
-C dir, --directory=dir
        Change to directory dir before reading the makefiles or doing any-
        thing else.  If multiple -C options are specified, each is  inter-
        preted  relative to the previous one: -C / -C etc is equivalent to
        -C /etc.  This is typically used  with  recursive  invocations  of
        make.

-f file, --file=file, --makefile=FILE
        Use file as a makefile. 
```

所以`-C .build`更改目录`.build`。

我不明白你关于修改命令的部分问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:02:37.273

尝试找到 json.make 所在的位置。似乎是那个makefile创建和删除了你正在谈论的目录。

从命令行看来，make 将目录更改为 .build 并执行 json.make。不知道 json.make 是如何结束的。.build 是创建然后删除的目录吗？

# ruby-on-rails - 通过 Ruby Builder 将当前日期/时间插入 XML

> ID：10576249
> 
> 赞同：1
> 
> 时间：2012-05-14T00:15:50.433
> 
> 标签：ruby-on-rails, ruby, xml, datetime

我想使用 Rails Builder 将当前日期/时间插入到我的 xml 提要中。

这是我想要得到的：

```
<?xml version="1.0" encoding="utf-8" ?>
<FirstObject timestamp="2002-06-01T07:00:00">
.... 
```

我有：

```
xml.instruct!
xml.FirstObject 
.... 
```

输入当前日期的命令是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:47:15.160

```
xml.FirstObject :timestamp => Time.now 
```

# c++ - 分段错误：堆栈溢出

> ID：10576257
> 
> 赞同：4
> 
> 时间：2012-05-14T00:16:50.683
> 
> 标签：c++, segmentation-fault, stack-overflow, cout

以下发生在 a`linux 2.6.32-220.7.1.el6.x86_64`和`g++ 4.4.6`中。

以下代码：

```
#include <iostream>
#include <cstdlib>

int PROB_SIZE   = 10000000;
using namespace std;

int main(int argc, char *argv[])    {

    unsigned int numbers[PROB_SIZE];
    cout << "Generating " << PROB_SIZE << " random numbers... " << flush;

    return 0;
} 
```

生成以下 SIGSEGV： (gdb) run 启动程序：/home/cpd20202/sorting/error

```
Program received signal SIGSEGV, Segmentation fault.
0x000000000040093b in main (argc=1, argv=0x7fffffffe4f8) at error.cpp:13
13      cout << "Generating " << PROB_SIZE << " random numbers... " << flush;
Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.47.el6_2.5.x86_64 libgcc-4.4.6-3.el6.x86_64 libstdc++-4.4.6-3.el6.x86_64
(gdb) where
#0  0x000000000040093b in main (argc=1, argv=0x7fffffffe4f8) at error.cpp:13 
```

我真的没主意了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T00:18:44.317

这是因为您的数组大于堆栈的大小。因此，您的程序在函数调用期间尝试推送新内容时会崩溃。

你得到的错误在概念上与堆栈溢出相同，除了它是由一个非常大的局部变量引起的，而不是由嵌套太多的函数调用引起的。

堆栈是一小块内存，供函数用于内务处理和局部变量。它从来都不是很大，最多只有几兆字节。这就是为什么您需要动态分配来解决您的问题。大多数动态分配将利用堆，这通常仅受物理内存的限制。

您将需要在堆上分配数组。为此，您有多种选择，其中最简单的可能是使用`std::vector<int>`. 它们的行为与普通数组大致相同，并且它们的存储是自动管理的，所以这应该不是问题。

```
#include <vector>
#include <iostream>

int PROB_SIZE   = 10000000;
using namespace std;

int main()
{
    vector<int> numbers(PROB_SIZE);
    cout << "Generating " << PROB_SIZE << " random numbers... " << flush;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T00:18:30.177

您的“数字”数组正在堆栈上分配，并且可能太大。您将需要动态分配数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T00:18:47.390

您的进程没有足够的堆栈空间来分配一千万个整数。那是 40 兆字节（如果`int`是 64 位，则为 80 兆字节），进程通常以大约*1*兆字节的堆栈开始。

您有两个基本选择：

*   将您的数组分配为全局变量（通过将其声明移到外部`main`）。
*   使用、或将数组分配到*堆上*。`malloc``new``std::vector`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T00:19:25.487

这不是 cout。您在堆栈上分配了一个非常大的数组 ,`numbers`并炸毁了您的堆栈。堆栈通常为 8 MB 左右，而阵列为 40 MB 左右。

```
int v[size]; // stack
int v* = new int[size]; // heap 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T02:44:14.467

您为堆栈分配了太多空间来处理（1000 万个整数是非常大的数量）。

如果你真的需要这么多，我建议你使用堆空间来代替：

malloc(sizeof(int) * 10000000);

# jena - 用 Pellet 推理 Jena 框架中的 SWRL 规则

> ID：10576258
> 
> 赞同：3
> 
> 时间：2012-05-14T00:16:52.250
> 
> 标签：jena, reasoning, pellet, swrl

我正在尝试使用 Jena 框架来编辑使用 Protoge 4.2 构建的现有本体。即更改属性值或添加个人或类，然后进行推理。假设在本体中我们有这样一条规则：hasAge(?p,?age)^swrlb:greaterThan(?age,18)->Adult(?p)。我希望能够更改耶拿一侧的 hasAge 属性，看看某人是否是成年人。你能给我一些关于这个的示例代码吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T14:00:09.280

假如说 ：

*   你知道如何通过阅读你构建的本体来填充你的模型
*   您已将 Pellet 放在类路径中
*   您将下面的 IRI 替换为您域中的 IRI
*   您启用了断言

以下代码片段将为个人添加一个年龄，`x-test://individual`并断言 SWIRL 将引入的属性得到满足。

```
// create an empty ontology model using Pellet spec
final OntModel model = ModelFactory.createOntologyModel( PelletReasonerFactory.THE_SPEC );   

// read the file
model.read( ont );

// Grab a resource and and property, and then set the property on that individual
final Resource Adult = ResourceFactory.createResource("x-domain://Adult");
final Property hasAge = ResourceFactory.createProperty("x-domain://hasAge");
final Resource res = model.createResource("x-test://individual");
res.addLiteral(hasAge, 19);

// Test that the swirl rule has executed
assert( res.hasProperty(RDF.type, Adult) ); 
```

# nsis - 具有超过 1 个参数的 NSIS 函数

> ID：10576260
> 
> 赞同：5
> 
> 时间：2012-05-14T00:17:13.397
> 
> 标签：nsis

NSIS 函数可以有多个参数吗？

为什么这段代码不能编译？如果我不能为一个函数提供超过 1 个参数，那么我的其他选项是什么（不考虑使用宏）？

编译错误：

> 函数需要 1 个参数，得到 4 个。用法：函数 function_name

```
Outfile "test.exe"
Caption ""
Name ""

# Compile Error Here: "Function expects 1 parameters, got 4\. Usage: Function function_name"
Function MyFunction p1 p2 p3
    DetailPrint "$p1, $p2, $p3"
FunctionEnd

Section
    DetailPrint "Hello World"
SectionEnd 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T01:06:26.540

您必须在寄存器和/或[堆栈](http://nsis.sourceforge.net/Pop,_Push,_Exch..._The_Stack)中传递参数：

```
Function onstack
pop $0
detailprint $0
FunctionEnd

Function reg0
detailprint $0
FunctionEnd

Section
push "Hello"
call onstack
strcpy $0 "World"
call reg0
SectionEnd 
```

# ruby - ruby 多连接和 dns 查询

> ID：10576273
> 
> 赞同：1
> 
> 时间：2012-05-14T00:20:28.193
> 
> 标签：ruby, dns, net-http

```
http = Net::HTTP.new("hostname", 80)
http.open_timeout = 300
http.read_timeout = 300

pagereq = lambda {
    http.request(Net::HTTP::Get.new(page, {"User-Agent" => "Mozilla/5.0"})).body }

some_conditions.to_a.each do |n|

    page = "startpage"+n.to_s

    pagereq.call.scan(/criteria1/).each do |m|
        page = "/"+m.to_s
        puts pagereq.call.scan(/criteria2/)
    end

end 
```

我使用此模板从站点收集链接或其他内容。它在每个连接上产生 DNS 解析，这并不好。

我感兴趣的。一次解析主机名，建立连接，进行所有操作，关闭连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:43:41.667

Mechanize 使用持久的 http 连接并更容易获取链接：

```
require 'mechanize'
@agent = Mechanize.new
@agent.user_agent = 'Mozilla/5.0'
page = @agent.get 'http://www.google.com/'
puts page.links.map &:href 
```

# python - Python, subprocesses and text file creation

> ID：10576275
> 
> 赞同：1
> 
> 时间：2012-05-14T00:20:45.187
> 
> 标签：python, text-files, subprocess, popen

Apologies if this kind of thing has been answered elsewhere. I am using Python to run a Windows executable file using `subprocess.Popen()`. The executable file produces a .txt file and some other output files as part of its operation. I then need to run another executable file using `subprocess.Popen()` that uses the output from the original .exe file.

The problem is, it is the .exe file and not Python that is controlling the creation of the output files, and so I have no control over knowing how long it takes the first text file to write to disk before I can use it as an input to the second .exe file.

Obviously I cannot run the second executable file before the first text file finishes writing to disk.

`subprocess.wait()` does not appear to be helpful because the first executable terminates before the text file has finished writing to disk. I also don't want to use some kind of function that waits an arbitrary period of time (say a few seconds) then proceeds with the execution of the second .exe file. This would be inefficient in that it may wait longer than necessary, and thus waste time. On the other hand it may not wait long enough if the output text file is very large.

So I guess I need some kind of listener that waits for the text file to finish being written before it moves on to execute the second subprocess.Popen() call. Is this possible?

Any help would be appreciated.

* * *

**UPDATE** (see Neil's suggestions, below)

The problem with `os.path.getmtime()` is that the modification time is updated more than once during the write, so very large text files (say ~500 Mb) require a relatively large wait time in between os.path.getmtime() calls. I use `time.sleep()` to do this. I guess this solution is workable but is not the most efficient use of time.

On the other hand, I am having bigger problems with trying to open the file for write access. I use the following loop:

```
while True:
    try:
        f = open(file, 'w')
    except:
        # For lack of something else to put in here
        # (I don't want to print anything)
        os.path.getmtime(file) 
    else:
        break 
```

This approach seems to work in that Python essentially pauses while the Windows executable is writing the file, but afterwards I go to use the text file in the next part of the code and find that the contents that were just written have been wiped.

I know they were written because I can see the file size increasing in Windows Explorer while the executable is doing its stuff, so I can only assume that the final call to open(file, 'w') (once the executable has done its job) causes the file to be wiped, somehow.

Obviously I am doing something wrong. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:31:24.503

There's probably many ways to do what you want. One that springs to mind is that you could poll the modification time with [os.path.getmtime()](http://docs.python.org/library/os.path.html#os.path.getmtime), and see when it changes. If the modification date is after you called the executable, but still a couple seconds ago, you could assume it's done.

Alternatively, you could try opening the file for write access (just without actually writing anything). If that fails, it means someone else is writing it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:27:31.390

This all sounds so fragile, but I assume your hands are somewhat tied, too.

One suggestion that comes to mind is if the text file that is written might have a recognizable end-of-file marker to it. I created a text file that looks like this:

```
BEGIN
DATA
DATA
DATA
END 
```

Given this file, I could then tell if "END" had been written to the end of the file by using [`os.seek`](http://docs.python.org/library/stdtypes.html#file.seek) like this:

```
>>> import os
>>> fp = open('test.txt', 'r')
>>> fp.seek(-4, os.SEEK_END)
>>> fp.read()
'END\n' 
```

# unix - 外壳上带有 mrjob 管道的 hadoop

> ID：10576279
> 
> 赞同：0
> 
> 时间：2012-05-14T00:21:51.567
> 
> 标签：unix, hadoop, pipe, mrjob

我有一个关于 mrjob 的问题。我使用一个名称节点和一个作业跟踪器在 3 个数据节点上使用 hadoopcluster。从一个漂亮的示例应用程序开始，我写了如下内容

```
first_script.py: 
        for i in range(1,2000000): 
                 print "My Line "+str(i) 
```

这显然是在向 stdout 写入一堆行，辅助脚本是 mrjobs Mapper 和 Reducer。我尝试从 unix (GNU) 调用：

```
python first_script| python second_script.py   -r hadoop 
```

这完成了工作，但它正在将输入完全上传到 hdfs。就在所有内容都上传完毕后，他开始了第二份工作。所以我的问题是：是否可以强制流？（比如发送 EOF？）还是我弄错了整个事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:23:18.000

显然你早就忘记了这一点，但我还是会回复：不，不可能强制流。整个 hadoop 编程模型是关于将文件作为输入和输出文件（并可能产生副作用，例如将相同的东西上传到数据库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-27T01:50:53.333

如果您澄清了您想要实现的更多目标，这可能会有所帮助。但是，听起来您可能希望定期处理管道的内容，而不是等到流完成。流不能被强制。

管道的阅读器（您的`second_script.py`）需要将其标准输入分成块，或者使用

*   像[this question and answer](https://stackoverflow.com/questions/39728503/collect-data-in-chunks-from-stdin-python)这样的固定行数，或
*   [非阻塞读取](https://stackoverflow.com/questions/26952473/test-for-new-line-in-stdin)和预设的空闲期，或
*   从 发出的预定中断序列`first_script.py`，例如仅由 组成的“空白”行`\0`。

# android - OnDraw 中的 OnTouch 方法

> ID：10576283
> 
> 赞同：0
> 
> 时间：2012-05-14T00:22:37.473
> 
> 标签：android, touch-event, ondraw

我需要为我设置的矩形设置一个 onTouch 方法，但我不知道如何在 OnDraw 方法中执行此操作。这但我不知道我的代码如何，感谢您的帮助！

```
public class Tab3 extends View implements OnTouchListener
{
    int x1, x2, y1, y2;
    Rect Rect = new Rect();
    public Tab3(Context context, AttributeSet attrs)
    {
        super (context, attrs);
        x1 = 0;
        x2 = 100;
        y1 = 0;
        y2 = 100;

    }

    @Override
    protected void onDraw(Canvas canvas) 
    {
        // TODO Auto-generated method stub
        super.onDraw(canvas);

        Rect.set(x1, y1, x2, y2);

        Paint blue = new Paint();
        blue.setColor(Color.BLUE);
        canvas.drawRect(Rect, blue);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) 
    {

        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:56:09.560

在你的 onTouch 中放：

```
if(Rect.contains((int) event.getX(),(int) event.getY())){ 
```

我想这就是你要问的，如果不是，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:27:09.187

首先，您可能会遇到很多问题

```
Rect Rect = new Rect(); 
```

给它命名

```
Rect rect2 = new Rect(); 
```

或类似的东西，而不是 Rect Rect

一个小小的表演tipp

```
Rect.set(x1, y1, x2, y2); 
```

使这个在

```
public Tab3(Context context, AttributeSet attrs)
    {
} 
```

因为

```
 protected void onDraw(Canvas canvas) 
    { 
```

每次重绘时都会调用

```
invalidate(); 
```

她你检查一下你是否按下了矩形

```
if (rect2.contains(event.getX(),event.getY())) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T00:29:38.293

阅读有关 MotionEvent 类的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T00:44:24.243

在 中`onTouch`，您可以执行以下操作：

```
if(Rect.contains((int) event.getX(), (int) event.getY())) {
//do something
}
return super.onTouch(View v, MotionEvent event);  //call super's method so that system would send event to you only once when you touched it. 
```

# delphi - 带有十字路口等的棋盘游戏地图

> ID：10576285
> 
> 赞同：0
> 
> 时间：2012-05-14T00:23:01.300
> 
> 标签：delphi, logic

我这里有点逻辑问题。

正如标题所说，我尝试将棋盘游戏构建为计算机程序（也许有互联网支持，但那是另一个故事）

至于现在，我有一张地图，其中有一些十字路口，因此我不能简单地将字段定义为“1、2、3、4，...”，因为如果字段 10 有十字路口，我会多个字段必须标记为 11（例如，因为在字段 10 的左侧和右侧有一个字段。）

所以问题是，如果我不能用数字来定义棋盘，那么我就不能简单地得到一个玩家在掷 2d6 骰子时可以采取的可能位置，并计算 'Field-Nr. + 随机范围（1,6）+ 随机范围（1,6）'

有没有人有想法，如何以另一种方式定义这样的地图，我仍然可以用 2d6 掷骰子计算玩家 X 可能的新领域？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:09:33.560

如果我理解得很好......（我不这么认为）这可能会对你有所帮助。只需为您的棋盘游戏字段使用动态数组并在维度 x,y 之后更改您的操作 .... 看看这个“type Name = array of {array of ...} Base type; // Dynamic array”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:15:09.817

听起来你有一个连接顶点的图。当玩家处于 N 条边的特定顶点时，假设 N < 12，将从遍历边号 N % ( rand(6) + rand(6) ) 到达新的 Field。

你也可以只做 rand(12)，但与 2d6 不同，它的分布是均匀的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:15:47.877

*我建议*不要使用动态数组，而是使用***记录的****链接列表**来描述周围的单元格，并使用该链接列表遍历玩家的位置和可能的移动。*

 ***首先，定义一个记录来描述您棋盘的可玩网格中的每个单元格（网格上的单元格可以像棋盘一样是四边形的，也可以像文明 V 中那样是六边形的）......每个单元格记录都应该包含坐标等信息，其中玩家*也在*那个牢房中，任何会影响游戏玩法的奖励/危险/等（你明白了）。

最后，链表连接*所有*这些单元，有效地指向任何连接的单元。这样，您只需要玩家 X 的单元格位置，并计算*n 个*单元格上的可能移动（由掷骰子决定），遍历相邻的单元格（例如，没有危险的单元格）。

如果您只想跟踪可能的道路，您还可以使用这种方法来识别玩家 X 可以行驶的可能路径（而不是单元格）。***

# amazon-s3 - 上传到 Amazon S3 后某些文件名大小写的差异

> ID：10576287
> 
> 赞同：0
> 
> 时间：2012-05-14T00:23:12.863
> 
> 标签：amazon-s3, filenames, case-sensitive

我将很多文件（大约 5,800 个）上传到 Amazon S3，这似乎运行良好，但*其中一些*（大约 30 个）文件名已转换为小写。

第一次，我用[Cyber​​duck](http://cyberduck.ch/)上传。[当我看到这个问题时，我将它们全部删除并使用Transmit](http://panic.com/transmit/)重新上传。结果相同。

我绝对没有看到可以链接更改名称的文件的模式，这似乎很随机。

有没有人遇到过这种情况？
知道会发生什么吗？

谢谢！
丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:32:25.167

我首先让您知道 Amazon S3 对象 URL 区分大小写。因此，当您上传大写文件并使用相同的 URL 访问该文件时，它正在工作。但是在以小写重命名对象后，我希望您尝试使用相同的旧 URL，因此您可能会收到拒绝访问/NoSuchKey 错误消息。

您可以尝试[Bucket Explorer](http://www.bucketexplorer.com/be-download.html)为 Amazon S3 对象生成文件 URL，然后尝试访问该文件吗？

**披露**：我为 Bucket Explorer 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:26:48.197

当我上传到亚马逊服务器时，我总是使用 Filezilla 和 STFP。我从来没有遇到过这样的问题。我猜（老实说，这只是一个猜测，因为我没有使用 Cyber​​duck 也没有使用 Transmit）您使用的实用程序正在更改文件名。用 Filezilla 试试，看看结果如何。

# php - PHPUnit 下管理区域的代码覆盖率

> ID：10576288
> 
> 赞同：1
> 
> 时间：2012-05-14T00:23:29.057
> 
> 标签：php, http-headers, phpunit, code-coverage

我正在尝试在数百个 PHP 代码存储库中获取 PHPUnit 和 CodeCoverage。我收到的一个始终如一的问题是 CodeCoverage 不适用于我的任何具有 session_start 的管理页面或任何使用 header('Location...'); 的反弹重定向页面；否则工作正常的代码会引发“警告：无法修改标头信息 - 标头已由（输出开始于...）发送”

我已经尝试了任意数量的 Google 搜索来找到解决此问题的方法，而我的 Google-fu 目前很弱。提前致谢。

编辑 20120515：我已确保我的代码已将所有 exit() 调用替换为返回。我确实安装了 XDebug，它在非常简单、未经身份验证的应用程序上运行。

编辑 20120531：进一步阅读代码，我发现 SeleniumTestCase.php 中的 file_get_contents 由于 file_get_contents('https://...') 在我的 xampp 下失败。通过在不同的端口上创建一个 http:// 虚拟主机并将我的coverageScriptUrl 指向它来解决它。上面的所有警告显然都是红鲱鱼。

# xcode - 如何追踪导致运行时错误的行？

> ID：10576291
> 
> 赞同：6
> 
> 时间：2012-05-14T00:24:39.813
> 
> 标签：xcode, debugging, runtime-error

我的应用程序因以下错误消息而崩溃：

> 'NSInvalidArgumentException'，原因：'-[__NSCFDictionary setObject:forKey:]：尝试插入 nil 值（键：0）'

我正在尝试在我的代码中找到这种情况。我在环境变量中设置了 NSZombiesEnabled，但是很难找出位置。关于如何调试的任何想法？

我输入了 bt，这是我看到的：

```
 frame #0: 0x30d1832c libsystem_kernel.dylib`__pthread_kill + 8
    frame #1: 0x3597d20e libsystem_c.dylib`pthread_kill + 54
    frame #2: 0x3597629e libsystem_c.dylib`abort + 94
    frame #3: 0x35055f6a libc++abi.dylib`abort_message + 46
    frame #4: 0x3505334c libc++abi.dylib`_ZL17default_terminatev + 24
    frame #5: 0x36c38356 libobjc.A.dylib`_objc_terminate + 146
    frame #6: 0x350533c4 libc++abi.dylib`_ZL19safe_handler_callerPFvvE + 76
    frame #7: 0x35053450 libc++abi.dylib`std::terminate() + 20
    frame #8: 0x35054824 libc++abi.dylib`__cxa_rethrow + 88
    frame #9: 0x36c382a8 libobjc.A.dylib`objc_exception_rethrow + 12
    frame #10: 0x3428d50c CoreFoundation`CFRunLoopRunSpecific + 404
    frame #11: 0x3428d36c CoreFoundation`CFRunLoopRunInMode + 104
    frame #12: 0x3826f438 GraphicsServices`GSEventRunModal + 136
    frame #13: 0x36d27cd4 UIKit`UIApplicationMain + 1080
    frame #14: 0x00051cdc AppName`main + 80 at main.m:16 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T00:31:31.253

添加异常作为断点。假设 Xcode 4+...

1.  在导航器框架的顶部（您可以在其中查看文件等），您将看到一个看起来像侧向箭头的小图标。
2.  这将显示断点导航器。在该视图的底部，单击 + 以添加断点。
3.  单击“添加异常断点...”

默认选项可能很好......您想在抛出所有异常时中断。

现在，当您运行时，您将在应用程序抛出异常的任何地方获得一个断点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:26:54.140

错误是否发生在您的测试中？您是从 iTunes Connect 的崩溃日志中看到的吗？

如果您能够在本地重现它，请运行该方案以复制错误，当调试器变为活动状态时，在控制台的 (gdb) 提示符处键入“bt”以获取带有行号的堆栈跟踪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T00:37:18.620

尝试在 AppDelegate 中添加这部分代码：

```
void uncaughtExceptionHandler(NSException *exception);

void uncaughtExceptionHandler(NSException *exception) {
    NSLog(@"CRASH: %@", exception);
    NSLog(@"Stack Trace: %@", [exception callStackSymbols]);
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSSetUncaughtExceptionHandler(&uncaughtExceptionHandler);

// your previous code here
    return YES;
} 
```

下次发生错误时，您应该有一些有关崩溃的附加信息。

# php - 正则表达式帮助... php 检查条目格式

> ID：10576293
> 
> 赞同：0
> 
> 时间：2012-05-14T00:25:02.653
> 
> 标签：php, mysql, regex, forms

我使用 php 开发应用程序，但我遇到了一些正则表达式问题......

我找到了一些解释它的网站，但出于某种原因，我无法理解？有人可以帮忙解释正则表达式的争论吗？

我上传了我在[这里](http://3rdrockmarketing.com/CLIENTsites/regex/)工作的样本......

首先，单击右上角的“+”按钮进入添加内容视图。

基本上，我需要它，所以当您从该表单提交时，php 将检查值的格式是否正确。

**领域：****这可以是 .com、.co、.biz、.info 等......用户可以输入前缀，如 url，php 会去掉它......所以数组中的结尾字符串只是 domain.com**

 *```
domain1.com 
somedomain.biz
mydomain.co 
```

**重定向：****有了这个，php使用'，'所以我们留下了ip和domainkey作为单独的字符串，ip可以是每节2-3个数字！所以###.##.##.## #，甚至是##.##.##.##，并且域键是varchar（不是那么重要）**

 *```
##.##.##.##, domainkey
###.###.###.###, domainkey 
```

**重定向解决方案：**

```
(\d{1,3}\.){3}\d{1,3} 
```

**/24 的：****这类似于重定向 IP，但结尾总是以 '0/24' 结尾**

 *```
##.##.###.0/24
##.##.###.0/24 
```

**名称：***这个应该是最简单的，只能是字母，不能是数字……任意长度……*

```
randomname
thisisaname 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:59:34.613

我可以建议使用一些允许您测试正则表达式的软件甚至网站。如：

*   [正则表达式教练](http://www.weitz.de/regex-coach/)
*   [正则表达式](http://regexpal.com/)
*   [正则表达式](http://gskinner.com/RegExr/)
*   [快递](http://www.ultrapico.com/Expresso.htm)
*   [正则表达式设计器](http://www.radsoftware.com.au/regexdesigner/)
*   [ETC](http://www.hongkiat.com/blog/regular-expression-tools-resources/)

这真的取决于你想用它有多严格，以及你想让你的正则表达式有多花哨。

`/((\d{1,3}).){3}(\d{1,3})(\/\d{2})?/`***

# dns - 权威的NS可以和服务的域一样吗？

> ID：10576295
> 
> 赞同：1
> 
> 时间：2012-05-14T00:25:34.827
> 
> 标签：dns

假设我有一个服务器（DNS 和其他）myserver.com。现在我注册了一个域 mydomain.com，并在注册商处将它的 NS 设置为 myserver.com - 因此它是权威服务器，如果有的话。

在 mydomain.com 的权威记录中，我可以将 NS 设置为 ns.mydomain.com 吗？

我有两个这样设置的域，一个有效，另一个似乎不愿意传播。所以我想知道这是否有问题 - 我的意思是当您需要解析 NS 的名称以解析 NS 的名称时，您如何解析 NS 的名称......

而且，如果是的话，为什么parallels plesk 会以这种方式自动设置它们？

Ps：在同一台服务器上有 ns.mydomain.com 的 A 记录，指向正确的 IP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:33:42.227

这个问题有一个解决方案——它被称为“粘合记录”，即`A`托管在*父*区域中的记录，其中包含名称服务器的 IP 地址。

见[http://en.wikipedia.org/wiki/Domain_Name_System#Circular_dependencies_and_glue_records](http://en.wikipedia.org/wiki/Domain_Name_System#Circular_dependencies_and_glue_records)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:46:34.293

为什么要为“mydomain.com”设置 NS 记录：

*   到进入父区域 (com.) 的委派记录中的“myserver.com”，但是
*   到区域顶点的“ns.mydomain.com”（在 mydomain.com. 区域内）

? 这会造成不一致（两个不同的 DNS 服务器用两个不同的答案回答同一个问题）而没有任何明显的好处。您应该尝试帮助整个 DNS 系统发出一致的答案。

除非您有充分的理由使 DNS 不一致，否则您应该确定名称服务器的正确规范名称是什么，并在“mydomain.com”的委托和区域顶点的 NS 记录中发布该名称。

话虽如此，它仍然可以工作：

*   如果一个对“mydomain.com”一无所知的递归解析器询问它，gTLD 服务器会告诉它去查看“myserver.com”。gTLD 还将发出 A 和 AAAA 粘合记录以帮助查找“myserver.com”，但即使没有，您在“myserver.com”区域文件中也有“myserver.com”的 A 和 AAAA 记录（右？）。
*   如果一个递归解析器想要刷新它的“mydomain.com”NS 记录的缓存，它可能会查询它已经知道的权威服务器。该服务器将回答名称服务器是“ns.mydomain.com”，并带有粘合记录。这与之前缓存中的内容不同，但最终它将映射到具有相同 IP 地址的服务器。

至于“parallels plesk”，我对此一无所知。

# c++ - 向 TCP 流添加加密？

> ID：10576301
> 
> 赞同：1
> 
> 时间：2012-05-14T00:27:05.093
> 
> 标签：c++, encryption, tcp, liblacewing

我正在使用一个名为 Lacewing 的 TCP 客户端服务器库。

[http://lacewing-project.org/docs/](http://lacewing-project.org/docs/)

我注意到我发送和接收的消息都是纯文本的。鉴于我使用 TCP，有没有办法轻松加密/解密消息？我怎么能添加像 TLS en.wikipedia.org/wiki/Transport_Layer_Security 或类似的东西？

谢谢

该库非常高级，但简而言之，这里是客户端服务器：

```
#include <string>
#include <iostream>  
#define  LacewingFunction
#include "Lacewing.h"

void onReceive (Lacewing::Server &Server, Lacewing::Server::Client &Client,
                char * Data, int Size) {
                    /* callback body */
                    std::cout << Data << "\n";
}

void onConnect (Lacewing::Server &Server, Lacewing::Server::Client &Client)
{
    std::cout << "Connected!" << "\n";
    Client.Send("TestingS");
}

void onReceiveC (Lacewing::Client &Client, char * Data, int Size)
{
    std::cout << Data << "\n";
    Client.Send("TesingC");
}

int main(int argc, char* argv[])  
{  
    std::string s;
    std::cin >> s;
    if(s == "server")
    {
        Lacewing::EventPump pump;
        Lacewing::Server* server = new Lacewing::Server(pump);
        server->onReceive(onReceive);
        server->onConnect(onConnect);
        server->Host(1234);
        pump.StartEventLoop();
    }
    else
    {
        Lacewing::EventPump pump;
        Lacewing::Client* server = new Lacewing::Client(pump);
        server->onReceive(onReceiveC);
        server->Connect("192.168.2.12",1234);
        pump.StartEventLoop();
    }

    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:32:39.870

一句话：是的。您的两个基本选项是 SSL/TLS 和 IPsec。SSL 将在您的应用程序中实现；IPsec 将不在您的控制范围内。

请参阅相关问题的[此答案。](https://stackoverflow.com/a/4238440/77939)

如果您需要有关如何使其适应 SSL/TLS 的帮助，您必须发布一些网络代码。

* * *

**编辑**：如果您不想将源代码修改为 Lacewing，在我看来，最简单的解决方案可能是使用类似[stunnel](http://www.stunnel.org/)的东西来保护您的流量。

# sql - 如何在sql语句中将日期增加1作为时间数

> ID：10576302
> 
> 赞同：2
> 
> 时间：2012-05-14T00:27:27.667
> 
> 标签：sql, sql-server, database, tsql

我试图在有限的时间内将日期增加一。我能够将当前日期增加 1：

```
Select *, DATEADD(d,1, GETDATE()) From MyTable; 
```

但我想增加每一行中时间的日期，例如：

```
ID              Date
1            2012-05-14
2            2012-05-15
3            2012-05-16 
```

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T00:32:49.257

将[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)用作`DATEADD`方法的值。

```
SELECT
    *, 
    DATEADD(d,ROW_NUMBER() OVER (ORDER BY ID ASC), GETDATE())
FROM 
    MyTable; 
```

# android - youtube 中是否有适用于 HTML 播放器的高清版本（更高质量）.3gp 视频？

> ID：10576304
> 
> 赞同：4
> 
> 时间：2012-05-14T00:28:00.117
> 
> 标签：android, youtube, youtube-api, rtsp, 3gp

我正在将视频从 Youtube 以 HTml5 格式流式传输到没有 Flash 的中国平板电脑，质量很差。

没有闪光灯也能正常播放，但我希望平板电脑能获得这种 .3gp 格式的更高质量的视频。

我认为这适用于不在 Wifi 上且仅使用 3g 以下网络的手机

rtsp://v6.cache5.c.youtube.com/CjYLENy73wIaLQkNCW3rSEjLahMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYJqAoPHTrZmFTww=/0/0/0/video.3gp

有没有办法通过 rtsp 指定 .3gp 文件的质量，例如：

高分辨率、hd1080、hd720、大、中、小

或者有没有其他方法可以在不需要在平板电脑上安装 Flash 的情况下在 android 上播放高质量的视频。

回答：

对于任何寻找答案的人，我找到了这个链接：

[https://developers.google.com/youtube/2.0/reference#formatsp](https://developers.google.com/youtube/2.0/reference#formatsp)

# android - Android 如何正确获取 Switch 的值？

> ID：10576307
> 
> 赞同：61
> 
> 时间：2012-05-14T00:29:29.133
> 
> 标签：android, model-view-controller, actionlistener

我正在创建一个`Android`使用[Switch](http://developer.android.com/reference/android/widget/Switch.html)的应用程序。
我正在尝试侦听更改并在更改时获取值。
使用开关时我有两个问题：

1.  我用什么`action listener`？
2.  我如何获得`switch`价值？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-05-14T05:23:11.343

```
Switch s = (Switch) findViewById(R.id.SwitchID);

if (s != null) {
    s.setOnCheckedChangeListener(this);
}

/* ... */

public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    Toast.makeText(this, "The Switch is " + (isChecked ? "on" : "off"),
                   Toast.LENGTH_SHORT).show();
    if(isChecked) {
        //do stuff when Switch is ON
    } else {
        //do stuff when Switch if OFF
    }
} 
```

提示：`isChecked`是新的开关值 [`true`或`false`] 不是旧的。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-05-14T00:49:49.810

由于它从`CompoundButton`( [docs](http://developer.android.com/reference/android/widget/CompoundButton.html) ) 扩展而来，您可以使用它[`setOnCheckedChangeListener()`](http://developer.android.com/reference/android/widget/CompoundButton.html#setOnCheckedChangeListener%28android.widget.CompoundButton.OnCheckedChangeListener%29) 来监听更改；用于`isChecked()`获取按钮的当前状态。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-04-01T17:03:08.107

```
Switch switch = (Switch) findViewById(R.id.Switch2);

switch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    if (isChecked) {
                        ...switch on..
                    } else {
                       ...switch off..
                    }
                }
            }); 
```

我希望这能解决你的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-25T15:27:03.843

我在 kotlin 中添加了这个

```
switchImage.setOnCheckedChangeListener { compoundButton: CompoundButton, b: Boolean ->
    if (b) // Do something
    else // Do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-24T11:57:48.877

## Kotlin，但更具可读性的 Java 风格

```
 videoLoopSwitch.setOnCheckedChangeListener(object : CompoundButton.OnCheckedChangeListener{
                override fun onCheckedChanged(switch: CompoundButton?, isChecked: Boolean) {
                    videoPlayer?.apply {
                        setLooping(isChecked)
                    }
                }
            }) 
```

# javascript - 在输入中输入的小数点前添加 0？

> ID：10576311
> 
> 赞同：4
> 
> 时间：2012-05-14T00:29:58.290
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 完成一个快速表单，如果小数点是输入中输入的第一个字符，则需要在小数点前添加 0。

例如，在提交表单之前，0.25 将变为 0.25。但是，2.05 将保持为 2.05，并且不会添加 0。

这里有一个简单的功能可以帮助我吗？如果没有必要，我宁愿不写长而详细的东西。

另外，这里是我寻求帮助的输入框，供参考

```
<input type="number" name="dailygain" id="dailygain" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T00:31:51.753

您可以使用[`parseFloat`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)函数来格式化浮点数。

```
var el = document.getElementById("dailygain");
el.value = parseFloat(el.value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:33:54.393

乘以 1 ( `*1`) 使其成为数字。

如果你把它变成一个数字，它会自动为你做；根据您的系统区域设置进行格式化。

例子：

```
var x = '.25';
console.log( x*1 );  // 0.25 
```

一元加号也可以实现同样的效果（例如，`console.log( +x );`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T00:37:24.027

parseFloat 可能更适合，但无论如何：

```
$('#dailygain').on('keyup', function() {
    if (this.value[0] === '.') this.value = '0'+this.value;
}); 
```

[小提琴](http://jsfiddle.net/adeneo/bTPxp/) ​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T00:42:55.240

把它放在一个函数 run 中`onsubmit`。

```
var num=$("#dailygain").val(); //read the number from the textbox
num=num.toString(); //convert that number to a string
if (num.charAt(0)==".") //check if the string starts with a period
    num="0"+num; //if so, add a 0 in front of it
$("#dailygain").val(num); //write the number back to the tb 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T00:46:02.040

```
$("input[name=dailygain]").keyup(function(){
   var val = this.value;
   if(val.charAt(0) === '.'){
     this.value = ('0'+val); 
   }
}); 
```

[http://jsbin.com/ofivun/2/edit](http://jsbin.com/ofivun/2/edit)

# delphi - 使用项目中的波形文件

> ID：10576312
> 
> 赞同：4
> 
> 时间：2012-05-14T00:30:06.353
> 
> 标签：delphi, audio, static, playback

我目前只能通过将波形文件放在已编译的 exe 旁边来播放背景声音。但我实际上想要一个带有波形文件的静态可执行文件。这在 Delphi XE2 中可能吗？

这是我的代码：

```
SndPlaySound('.\Raw.wav', SND_ASYNC or SND_LOOP);
#This will play the Raw.wav that is next to my program. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T00:54:06.990

您可以添加[SND_MEMORY](http://msdn.microsoft.com/en-us/library/aa909803.aspx)标志，并将`TResourceStream.Memory`指针作为第一个参数传递。

首先，使用 XE2 的`Project->Resources and Images`菜单项添加新资源。给它你的 .wav 文件的路径和文件名，一个资源类型`RC_DATA`（它不在下拉列表中，但你可以手动输入它），以及一个你可以在运行时使用的资源名称来引用它。（在我的示例中，我使用`C:\Microsoft Office\Office12\MEDIA\APPLAUSE.WAV`，并给它一个资源名称`APPLAUSE`。）

```
procedure TForm2.Button1Click(Sender: TObject);
var
  Res: TResourceStream;
begin
  Res := TResourceStream.Create(HInstance, 'APPLAUSE', 'RC_DATA');
  try
    Res.Position := 0;
    SndPlaySound(Res.Memory, SND_MEMORY or SND_ASYNC or SND_LOOP);
  finally
    Res.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T03:34:06.127

如果您使用`PlaySound()`而不是`sndPlaySound()`，您可以利用该`SND_RESOURCE`标志直接从其资源播放波形声音，而无需先将其加载到内存中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T01:23:12.320

刚刚测试过，它适用于我的：

```
var
  hFind, hRes: THandle;
  Song       : PChar;
begin
  hFind := FindResource(HInstance, 'BATTERY', 'WAV');
  if (hFind <> 0) then
  begin
    hRes := LoadResource(HInstance, hFind);
    if (hRes <> 0) then
    begin
      Song := LockResource(hRes);
      if Assigned(Song) then
      begin
        SndPlaySound(Song, snd_ASync or snd_Memory);
      end;
      UnlockResource(hRes);
    end;
    FreeResource(hFind);
  end; 
```

![在此处输入图像描述](../Images/717640e3ba3fb8cd5280a2d8be729bb8.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-24T11:31:01.170

在资源编辑器（Delphi 10、项目、资源和图像）中导入 wav 文件时，键入“WAVE”作为资源类型，然后简单地使用

```
 PlaySound(resourceIndentifierName, 0, SND_RESOURCE or SND_ASYNC); 
```

不再需要 PS 大写

# asp.net-mvc-3 - 与普通的相比，使用不带参数的 html beginform 有什么好处吗 标签？

> ID：10576313
> 
> 赞同：3
> 
> 时间：2012-05-14T00:30:21.370
> 
> 标签：asp.net-mvc-3, razor

真的有什么区别吗

```
<form method="post" action="/Controller/Action"></form> 
```

和

```
@using (Html.BeginForm("Action","Controller")) {} 
```

当没有使用其他更复杂的参数时？

我知道这个问题听起来很基础，但我谨慎地使用简单的 HMTL，例如前一个示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T00:41:15.667

它呈现相同的，它是相同的。Razor 语法的一个可能优点是它是经过编译的，因此您不可能在不忽略添加 </form> 标记的情况下运行代码。我想，可以说，它的可读性也略高一些，特别是如果文件的其余部分对 Razor 语法很重。

# c++ - C++ 中 BigInt 类的良好和基本实现

> ID：10576314
> 
> 赞同：18
> 
> 时间：2012-05-14T00:30:25.737
> 
> 标签：c++, biginteger, bigint

我在 C++ 中寻找一个好的和基本的 BigInt 类，我找到了很多实现，但大多数时候，它是加密库的复杂实现......

基本上，我的意思是 BigInt 可以处理 BigInt、long long 和带有运算符重载的字符串。如果我有时间，我已经完成了自己，但我没有时间创建一个完整的 BigInt 类。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-28T21:37:18.610

我知道的最简单的库是[InfInt](https://github.com/sercantutar/infint)。它只包含一个头文件。它的用法相当简单。这是一个示例代码：

```
InfInt myint1 = "15432154865413186646848435184100510168404641560358";
InfInt myint2 = 156341300544608LL;

myint1 *= --myint2 - 3;
std::cout << myint1 << std::endl; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-14T00:53:12.167

[这是一个](https://mattmccutchen.net/bigint/)。我没用过，但看起来并不太复杂，这是我google“bigint c++”时的第一个结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T07:09:52.313

[http://sourceforge.net/projects/cpp-bigint/](http://sourceforge.net/projects/cpp-bigint/)

C++ 类 BigInt，使用户能够使用任意精度整数。

# mysql - 执行此 SQL 查询的更简洁方法

> ID：10576317
> 
> 赞同：0
> 
> 时间：2012-05-14T00:31:11.480
> 
> 标签：mysql, sql

所以有一个客户列表，有一个客户列表。

我有 2 张桌子，`customers`并且`invoices`.

`Customer_id`对于我的客户来说可能是一样的，例如

客户A

```
Customer #1 
```

客户 B

```
Customer #1 
```

因此对于不同的客户，发票表的 customer_id 可以为 1。

下面的查询有效，但似乎有点混乱。有什么想法可以清理吗？

```
 SELECT   name, 
           sum(sub_total) total
    FROM   customers, invoices
   WHERE   customer_id = 1438 and 
           invoices.customer_id = 1438 and 
           customers.customer_id = invoices.customer_id 
GROUP BY   name 
Order By   total DESC; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T00:33:28.240

如果`A = B`然后你不需要检查它...... （相信我`A = 1438`， 我在高中的数学获得了**60+ ）**`B = 1438`

 **```
SELECT   name, sum(sub_total) total    
FROM     customers, invoices    
WHERE    invoices.customer_id  = 1438
AND      customers.customer_id = invoices.customer_id 
GROUP BY name 
ORDER BY total DESC; 
```

* * *

或者明确说明您想要哪种类型的 JOIN：

```
SELECT   name, sum(sub_total) total    
FROM     customers  INNER JOIN invoices 
ON       customers.customer_id = invoices.customer_id 
WHERE    invoices.customer_id  = 1438
GROUP BY name 
ORDER BY total DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:32:45.810

你不需要额外的检查...

```
SELECT name, sum(sub_total) total
FROM customers, invoices
WHERE 
customer_id = 1438 and 
customers.customer_id = invoices.customer_id 
GROUP BY name order by total DESC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T02:01:58.433

我强烈不会按名称进行分组...假设您有两个名为“Bill Smith”的客户，但一个是客户 ID 10，另一个是客户 ID 785...您只是将它们组合成一个人。您应该按 ID 分组，而不是按名称...

现在，也就是说，无论如何您只查询一个客户 ID，并且只会返回一条记录。如果您真正想要完成的是获取所有客户及其各自发票的全部内容，请删除单个客户的 where 子句。您可以按 ID 保留组，但显示实际客户的姓名。如果您有多个客户的总数相同，您可以按他们的姓名进行子排序，但分组仍然仅基于客户的 ID。

```
SELECT
      c.name, 
      sum(i.sub_total) total
   FROM
      customers
         JOIN invoices
            on c.Customer_ID = i.Customer_ID
   GROUP BY
      c.customer_ID 
   Order By
      total DESC,
      c.Name 
```**

# php - 如何将数组分配给函数参数？

> ID：10576318
> 
> 赞同：0
> 
> 时间：2012-05-14T00:31:16.837
> 
> 标签：php, arrays, function

我正在尝试将数组的值分配给函数的参数。我不能告诉数组的长度，但我希望数组值成为我的函数参数。前任：

```
$a= array {'1'=>'arg1', '2'=>'arg2', '3'=>'arg3'} ; //could have more than 3 values

function addArray('arg1','arg2','arg3'); //want to add values to argument. 
```

有什么想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:32:38.490

您可以使用以下方法调用任何类似的函数[`call_user_func_array`](http://php.net/call_user_func_array)：

```
call_user_func_array('addArray', $a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T00:34:40.363

您可以使用[`func_get_args()`](http://us3.php.net/manual/en/function.func-get-args.php)来获取函数内部的所有参数。

```
<?php
function foo()
{
    $numargs = func_num_args();
    echo "Number of arguments: $numargs<br />\n";
    if ($numargs >= 2) {
        echo "Second argument is: " . func_get_arg(1) . "<br />\n";
    }
    $arg_list = func_get_args();
    for ($i = 0; $i < $numargs; $i++) {
        echo "Argument $i is: " . $arg_list[$i] . "<br />\n";
    }
}

foo(1, 2, 3);
?> 
```

# objective-c - 如何将多个对象添加到数组中

> ID：10576323
> 
> 赞同：-1
> 
> 时间：2012-05-14T00:31:51.800
> 
> 标签：objective-c, ios

我正在使用以下代码将许多图像加载到数组中，但想知道如何更有效地执行此操作。例如，如何有效地将 100 张图像加载到数组中？

```
hopAnimation=[[NSArray alloc] initWithObjects:
              [UIImage imageNamed:@"frame-1.png"],
              [UIImage imageNamed:@"frame-2.png"],
              [UIImage imageNamed:@"frame-3.png"],
              [UIImage imageNamed:@"frame-4.png"],
              [UIImage imageNamed:@"frame-5.png"],
              [UIImage imageNamed:@"frame-6.png"],
              [UIImage imageNamed:@"frame-7.png"],
              [UIImage imageNamed:@"frame-8.png"],
              [UIImage imageNamed:@"frame-9.png"],
              [UIImage imageNamed:@"frame-10.png"],
.
.
.
               [UIImage imageNamed:@"frame-100.png"],
              nil
              ]; 
```

有没有办法使用 for 循环来有效地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:36:14.487

假设您的命名约定是这样一致的，您可以使用可变数组并在循环中添加项目：

```
NSMutableArray *hopAnimation = [[NSMutableArray alloc] initWithCapacity:100];

for (int i = 1, i <= 100, i++) {
   [hopAnimation addObject:[UIImage imageNamed:[NSString stringWithFormat:@"frame-%i.png", i]]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:37:20.920

当然，您可以使用 for 循环。您可能希望将所有图像名称放入[plist](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/AboutPropertyLists/AboutPropertyLists.html%23//apple_ref/doc/uid/10000048i-CH3-SW2)中。然后您可以创建名称数组：

```
NSArray * imageNames = [NSArray arrayWithContentsOfFile:@"/path/to/names.plist"]; 
```

并循环通过它来创建图像数组：

```
NSMutableArray * images = [NSMutableArray array];
for( NSString * imageName in imageNames ){
    [images addObject:[UIImage imageNamed:imageName]];
} 
```

或者，如果您的图像文件确实是这样命名的，您可以循环一个整数并将其放入文件名字符串中：

```
NSMutableArray * images = [NSMutableArray array]; 
for( int i = 1; i <= numImageFiles; i++ ){
    [images addObject:[UIImage imageNamed:[NSString stringWithFormat:@"frame-%d.png", i]]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T00:58:16.733

其他人建议用循环填充您的数组。您的既定目标是效率，如果有任何循环效率低于您当前加载数组的方式。如果你想清理你的代码，那么一定要使用循环。但是，如果您正在寻找*效率*，则无法填充比您当前使用的方法更有效的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T04:08:00.637

如果使用 Clang 3.1（可能与 Xcode 4.4 一起提供）或更高版本，您可以使用新的数组文字语法：

```
@[
    [UIImage imageNamed:@"frame-1.png"],
    [UIImage imageNamed:@"frame-2.png"],
    [UIImage imageNamed:@"frame-3.png"],
    /* ... */
] 
```

我还没有找到任何关于是否使用 with 之类的循环`-initWithObjects:`或任何其他性能考虑来实现的信息。

# c# - 简单的 LINQ 查询 =>

> ID：10576324
> 
> 赞同：0
> 
> 时间：2012-05-14T00:32:00.160
> 
> 标签：c#, linq

这是使用北风数据库的书中的示例。=> 是什么意思？

```
 Northwind db = new Northwind(@"Data Source=.\SQLEXPRESS;InitialCatalog=Northwind");
   var orders = db.Customers
   .Where(c => c.Country == "USA" && c.Region == "WA")
   .SelectMany(c => c.Orders);
    Console.WriteLine(orders.GetType()); 
```

他们为什么不写

```
 Where(c.Country == "USA" && c.Regian == "WA") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T00:34:21.283

括号内的部分`Where()`需要是一个接受 a并返回ean 值的函数（**在**C# 的类型系统中）。`Customer``bool``Func<Customer, bool>`

[使用 C# 的Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)编写该函数是最常见的。

该`c =>`部分的意思是“获取`Customer`传递给您的内容并调用它`c`。然后使用 的值`c`，计算这个条件。如果没有`c`左侧的`=>`，编译器将无法知道`c`指的是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:34:31.400

这是一个 lambda 表达式。它描述了一个*函数*；箭头左侧的变量是函数的参数。在这种情况下，函数只有一个参数，因此箭头左侧只有一个变量。

考虑一下您给出的“他们为什么不...”示例。在哪里`c`声明？编译器如何知道它代表什么？

您可能想知道编译器如何知道`c`参数的类型，它显然知道，因为它允许您调用`Country`and`Region`属性。这是通过*类型推断*完成的。该`Where`方法需要一个带参数的委托参数，该参数的类型取决于序列的类型（`Customers`在这种情况下）。

由于`Customers`is `IEnumerable<Customer>`，编译器需要一个带有单个`Customer`参数的委托，因此它将 lambda 表达式的单个参数视为一个`Customer`变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T00:35:01.583

如果他们这样写：

```
Where(c.Country == "USA" && c.Regian == "WA") 
```

您将在哪里定义变量`c`所指的内容？如果我在代码的前面某处写过：

```
var c = "this is a string"; 
```

此表示法定义了一个 lambda 构造，其中`c =>`绑定到`Where`函数预期的委托输入 - 在这种情况下，`c`绑定到每一行，并且您运行的函数`c`需要返回一个布尔值。

请注意，您可以编写如下函数：

```
public bool OnlyWA(Row c)
{
    return c.Country == "USA" && c.Regian == "WA";
} 
```

然后像这样使用它：

```
var orders = db.Customers
               .Where(OnlyWA)
               .SelectMany(c => c.Orders); 
```

在这里您不再需要了，`c`因为您使用的是命名函数而不是 lambda 变量。该函数的唯一参数代替`c`. 这对于小型函数来说通常是多余的，并且随着小型谓词函数从其使用（以及因此上下文）位置移开，进一步使其更难阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T00:35:26.017

=> 是 lambda 运算符请参见此处：[msdn](http://msdn.microsoft.com/en-us/library/bb311046)

> 它在 lambda 表达式中用于将左侧的输入变量与右侧的 lambda 主体分开。Lambda 表达式是类似于匿名方法但更灵活的内联表达式；它们广泛用于以方法语法表示的 LINQ 查询。

# c# - 在 Windows 7 上查询 win32_NetworkConnection 很慢

> ID：10576326
> 
> 赞同：2
> 
> 时间：2012-05-14T00:32:26.930
> 
> 标签：c#, windows-7, windows-xp-sp2

伙计们，

多年来，我一直很高兴地使用下面的 C# *IsNetworkDrive*方法来确定“这是网络驱动器吗？” 在 Windows XP 下。它仍然会在 Windows 7 下产生预期的结果，但每次调用需要大约 10 秒的时间......所以大约一百万倍太长了！

```
using System;
using System.Collections.Generic;
using System.Management;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            foreach (var driveName in Environment.GetLogicalDrives())
                Console.WriteLine(driveName + " " + IsNetworkDrive(driveName.Substring(0,2)));
            Console.Write("Press any key to continue ...");
            Console.ReadKey();
        }

        private static bool IsNetworkDrive(string drive)
        {
            var query = @"SELECT Name FROM win32_NetworkConnection WHERE LocalName='" + drive + "'";
            var seacher = new ManagementObjectSearcher(query);
            var resultset = seacher.Get();
            var count = resultset.Count;
            return count == 1;
        }

    }
} 
```

*啊啊啊啊。我讨厌Windows！*

请问有人知道如何 [performantly] 确定给定的驱动器号是在 Windows 7 和 Windows XP（企业 SOE）上代表本地驱动器还是网络驱动器？？？？

[最好在 .NET <= 3.5 中，虽然我可以将项目升级到 4.0，但它只需要一个绿地测试，我们现在没有钱。叹。]

祝大家欢呼。基思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:09:50.233

我在回答我自己的问题。

更多的谷歌搜索将我带到这篇文章：[如何以编程方式发现系统上映射的网络驱动器及其服务器名称？](https://stackoverflow.com/questions/1088752/how-to-programmatically-discover-mapped-network-drives-on-system-and-their-serve)

该问题中的代码将我引向：**DriveInfo.GetDrives()**我在我的主要方法中工作：

```
 static void Main(string[] args) {
        foreach (var driveInfo in DriveInfo.GetDrives())
            Console.WriteLine(driveInfo + " " + driveInfo.DriveType);
        Console.Write("Press any key to continue ...");
        Console.ReadKey();
    } 
```

生产：

```
C:\ Fixed
D:\ CDRom
E:\ Removable
G:\ Network
H:\ Network
I:\ Network
K:\ Network
L:\ Network
M:\ Network
Q:\ Network
Press any key to continue ... 
```

...然后离那里不远：

```
 // Example drives: "C:" or "L:" ... just the drive-letter and a colon. No backslash. 
    private static bool IsNetworkDrive(string drive) {
        return new DriveInfo(drive).DriveType == DriveType.Network;
    } 
```

这会在 Windows 7 下以非管理员身份运行，在预期的 [亚秒级] 时间范围内产生预期的结果。

希望这可以帮助其他人。

祝大家欢呼。基思。

# c++ - 一个类作为另一个类的数据成员

> ID：10576334
> 
> 赞同：2
> 
> 时间：2012-05-14T00:33:25.503
> 
> 标签：c++, constructor, datamember

我有两个类 A 和 C，我需要将类 A 中的 C 对象作为私有成员。这是我的基本结构，我有以下问题：
1\. 如何在构造函数中创建 itsC 对象？
2\. 我收到如下错误“函数调用缺少参数列表”，如下所示

```
C::C(String strc) 
    {    
    //do something  
    }  

Class A  
{  
public:  
A(String stra, String strb)  ;  
~A();  
C GetC();   //method

private:  
C itsC(String str1);   //data member
}

A::A(String stra, String strb)  
{    
  //create object itsC  
  //strb is needed for str1   
}  

C A::GetC()  
{  
  return itsC;  //error::function call missing argument list
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:35:12.367

```
C itsC(String str1); 
```

是成员函数声明，而不是数据成员。它应该是

```
C itsC; 
```

然后你可以初始化它`A::A`

```
A::A(String stra, String strb) : itsC(stra) { } 
```

# c# - XNA - 比例方向 Vector3

> ID：10576343
> 
> 赞同：1
> 
> 时间：2012-05-14T00:34:38.753
> 
> 标签：c#, vector, xna

我有一个小型太空射击游戏，我有炮塔向我的战斗机射击。

炮塔使用这个简单的数学向我的战斗机发射炮弹：

```
Vector3 destination = mTarget;
Vector3 origin = mPosition;
Movement = destination - origin;
Movement .Normalize();
mPosition += Movement * speed; 
```

现在这工作正常，弹丸向我的战斗机开火。

**但是**- 弹丸一旦击中炮塔射击该弹丸时战斗机所在的位置就会停止 - 基本上，我希望弹丸继续沿着其方向矢量移动，无论它是否通过了船所在的点。

我尝试缩放/乘以矢量移动的方向，但没有任何效果。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:19:45.157

改变你的结束条件...

```
 // by distance

 float distance = (destination - origin).Length();

 distance *= 1.1; // Will overpassed by 10%
 ...

 mPosition += Movement * Speed;
 distance -= Speed;             // Movement lenght is one
 if (distance<0) destroy_bullet();

 // by position
 mPosition += Movement * Speed;
 if (!Screen.Bounds.Contains(mPosition)) destroy_bullet(); 
```

# python - 如何在 Python3 中进行 ROT13 编码？

> ID：10576347
> 
> 赞同：15
> 
> 时间：2012-05-14T00:34:56.617
> 
> 标签：python, python-3.x, rot13

Python 3 文档在其[编解码器页面](http://docs.python.org/py3k/library/codecs.html)上列出了 rot13 。

我尝试使用 rot13 编码对字符串进行编码：

```
import codecs
s  = "hello"
os = codecs.encode( s, "rot13" )
print(os) 
```

这给出了一个`unknown encoding: rot13`错误。有没有不同的方法来使用内置的 rot13 编码？如果在 Python 3 中删除了这种编码（如 Google 搜索结果所示），为什么它仍然列在 Python3 文档中？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-19T07:11:37.423

在 Python 3.2+ 中，有[`rot_13`str-to-str 编解码器](http://ideone.com/8OTu6t)：

```
import codecs

print(codecs.encode("hello", "rot-13")) # -> uryyb 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-14T00:44:05.333

啊哈！我认为它已从 Python 3 中删除，但没有——只是接口发生了变化，因为编解码器必须返回字节（这是 str-to-str）。

这是来自[http://www.wefearchange.org/2012/01/python-3-porting-fun-redux.html](http://www.wefearchange.org/2012/01/python-3-porting-fun-redux.html)：

```
import codecs
s   = "hello"
enc = codecs.getencoder( "rot-13" )
os  = enc( s )[0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-20T20:03:31.760

`rot_13`在 Python 3.0 中被删除，然后在 v3.2 中重新添加。`rot13`在 v3.4 中重新添加。

`codecs.encode( s, "rot13" )`在 Python 3.4+ 中运行良好

实际上，现在你可以使用从现在到现在的任何标点符号`rot`，`13`包括：

`rot-13`, `rot@13`,`rot#13`等

[https://docs.python.org/3/library/codecs.html#text-transforms](https://docs.python.org/3/library/codecs.html#text-transforms)

> 3.2 版中的新功能： rot_13 文本转换的恢复。
> 在 3.4 版更改: rot13 别名的恢复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-30T17:20:38.127

```
def rot13(message):
    Rot13=''
    alphabit = 'abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZ'
    for i in message:
        if i in alphabit:
            Rot13 += alphabit[alphabit.index(i) + 13]
        else:
            Rot13 += i
    return Rot13 
```

代码很大，但我只是在学习

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-31T04:50:55.240

首先你需要安装 python 库 - [https://pypi.org/project/endecrypt/](https://pypi.org/project/endecrypt/)

**pip install endecrypt (windows)**
**pip3 install endecrypt (linux)**

然后，

```
from endecrypt import cipher

message_to_encode = "Hello World"
conversion = 'rot13conversion'

cipher.encode(message_to_encode, conversion )
# Uryyb Jbeyq

message_to_decode = "Uryyb Jbeyq"

cipher.decode(message_to_decode, conversion)
# Hello World 
```

# php - 模除法返回一个整数？

> ID：10576351
> 
> 赞同：4
> 
> 时间：2012-05-14T00:35:22.130
> 
> 标签：php

模除法只返回整数吗？我需要一个浮动回报。请参阅以下内容：

```
var_dump(12 % 10); // returns 2, as expected
var_dump(11.5 % 10); // returns 1 instead of 1.5? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T00:37:53.677

是的。运算符`%`返回一个整数。

如果您想要浮点结果，请改用该[`fmod()`](http://php.net/manual/en/function.fmod.php)函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T00:37:32.140

请参阅[手册](http://www.php.net/manual/en/language.operators.arithmetic.php)。

> 模数的操作数在处理之前被转换为整数（通过去除小数部分）。

11.5 变成 11。

`11 % 10 = 1 remainder **1**`

您的解决方案：[`fmod()`](http://php.net/manual/en/function.fmod.php)正如tom_yes_tom 所建议的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T00:41:12.473

引用[文档页面](http://www.php.net/manual/en/language.operators.arithmetic.php)：

> “模数的操作数在处理之前被转换为整数（通过去除小数部分）。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T00:41:15.550

> 有什么解决方法吗？

数学...

`11.5 - floor(11.5 / 10) * 10 == 1.5`

# php - 讲师检索注册了他/她教授的课程的学生

> ID：10576356
> 
> 赞同：0
> 
> 时间：2012-05-14T00:36:04.770
> 
> 标签：php, mysql

我正在建立一个简单的网站，帮助大学的学生和教师。

我面临以下查询的问题：讲师检索在他/她教授的课程中注册的学生的 ID 和姓名。

我有以下表格，后跟它们的字段：
注册（课程代码 - StudentID - 年级）
Studnet（ID - 姓名）

如您所见，两个表之间的唯一连接器是学生 ID。

我写的代码是

```
<?
session_start();
$COCODE = $_SESSION['GlobalCode'];

$result11 = mysql_query("SELECT * FROM Enrollment WHERE CourseCode = '$COCODE' ") ;

$row11 = mysql_fetch_array($result11);
$StID = $row11['StudentID'];
$result22 = mysql_query("SELECT * FROM Student where StudentID= '$StID' ") ;
echo "<table border cellpadding=3>";

while($row123 = mysql_fetch_array($result22)) 
 { 
 echo "<tr>";
 echo "<td>".$row123['ID']."</td> ";
 echo "<td>".$row123['Name']."</td> ";
 echo "</tr>";
 } 

echo "</table>"; 
?> 
```

我要做的是从 Enrollment 表中检索课程代码，然后通过 ID 检索学生姓名。

问题是我收到以下消息：

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource 
```

我希望你能帮我解决问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:39:37.817

该错误通常意味着您的查询有问题，或者您未连接到数据库。如果它是第一个问题，请尝试将您的查询更改为：

```
$result11 = mysql_query("SELECT * FROM `Enrollment` WHERE `CourseCode` = '$COCODE' "); 
```

否则，请检查您的数据库连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T01:13:56.107

您是否尝试缩小导致问题的查询范围？那将是你的第一步。其他一些指针：

1.  您需要检查每个 SQL 查询是否成功并在下一个查询中使用它之前返回一个有效值......否则该查询将导致错误。

2.  尝试使用：`mysql_query ($your_query) or die ('Error: '.mysql_error ());`为每个查询获取更详细的错误消息。（仅用于调试，不适用于生产）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T23:29:49.163

最后，我解决了。

我做了以下更改：

```
$result11 = mysql_query("SELECT * FROM Enrollment WHERE CourseCode = '$InstID' ") or die ('Error: '.mysql_error ());

echo "<table border cellpadding=3>";

while($row11 = mysql_fetch_array($result11))
{
$StID = $row11['StudentID'];
$result22 = mysql_query("SELECT * FROM Students where ID = '$StID' ") or die ('Error: '.mysql_error ()); 
while($row123 = mysql_fetch_array($result22)) 
{ 
echo "<tr>";
echo "<td>".$row123['ID']."</td> ";
echo "<td>".$row123['Name']."</td> ";
echo "</tr>";
} 
}
echo "</table>"; 

mysql_close($con);

?> 
```

谢谢

# jquery - Jquery .Click 事件仅触发循环中的第一个按钮

> ID：10576364
> 
> 赞同：0
> 
> 时间：2012-05-14T00:37:23.577
> 
> 标签：jquery, html, asp.net-mvc

Jquery .click 事件只触发第一个按钮！我遍历数据并在我的html页面上为每个按钮添加按钮，并希望每个按钮在单击时触发一个对话框。但只有第一个有效！其余的似乎没有点击事件。

```
$(document).ready(function () {

$("#btn_comment").click(function () {

    $("#createComment").dialog(
                            {
                                modal: true,
                                height: 300,
                                width: 500,
                                buttons: {
                                    "Create a Comment": function () {
                                    var post_id = $(this).parent().attr("id");
                                    var desc_to_create = $("#txtComment").val();
                                    $.post("CreateComment", { "id": "", "username": "x", "post_id": post_id, "description": desc_to_create, "created": "" }, function (t) {

                                            alert("Thank you! Your comment has been updated!!");
                                            location.reload();

                                        })

                                    },
                                    "Cancel": function () {
                                        $(this).dialog("close");
                                    }
                                }
                            }
                            );
})

}) 
```

```
 <tr id='<%= Html.Encode(item.id) %>'>
        <td>

            <%: Html.ActionLink("Details", "Details", New With {.id = item.id})%> |
              <a href="javascript://" class="delete_btn">Delete</a>

        </td>
      <%--  <td>
            <%: item.id %>
        </td>
        <td>
            <%: item.username %>
        </td>
        <td>
            <%: item.title %>
        </td>--%>
        <td>
            <%: item.description %>
        </td>
        <td>
            <input id="btn_comment" type="button" value="Add a Comment" />
        </td>
        <td>
            <div id="new_comment"></div></td>
    </tr>

<% Next%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:44:06.800

您的 HTML 标记无效。你有这个循环：

```
<input id="btn_comment" type="button" value="Add a Comment" /> 
```

但是，HTML 要求`id`值是*唯一的*。我想你看到的行为（jQuery 只找到第一个匹配元素）是特定于浏览器的，因为它是未定义的。

如果您的元素不是唯一的，解决此问题的最短路径可能是使用 a`class`而不是`id`. 像这样的东西：

```
<input class="btn_comment" type="button" value="Add a Comment" /> 
```

那么您的 jQuery 选择器将是：

```
$('.btn_comment') 
```

这将选择每个匹配的元素。

自然，这假设您没有将其`id`用于其他任何事情。（而且，如果你是，你无论如何都会想要重新处理那个逻辑，因为标记是无效的。）

# c++ - 获取 mp3 专辑封面图片的地址

> ID：10576368
> 
> 赞同：1
> 
> 时间：2012-05-14T00:37:34.487
> 
> 标签：c++, id3lib

我正在尝试显示 mp3 的专辑封面图片。我正在使用 id3lib，但我不知道如何从标签中获取信息（我只需要图片的路径）。我怎样才能做到这一点？

稍后编辑

```
const ID3_Frame *frame = tag.Find(ID3FID_PICTURE);
if(frame && frame->Contains(ID3FN_DATA))
{
    cout << "here" << endl;
    frame->Field(ID3FN_DATA).ToFile(pic);

    cout << pic << endl;
} 
```

问题是，在一首歌中程序崩溃，而在其他歌曲中，在媒体播放器中我看到一张专辑封面图片，我的程序永远不会进入那个 if。可能是什么问题呢？

稍后编辑

最后我已经做到了。问题是我没有给出正确的保存路径。但是对于一些图片作品，但对于其他人，虽然他们有专辑封面图片，但我的程序不起作用。为什么？如果 id3 标签不提供，玩家如何获得专辑封面图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:59:29.037

如果您的问题是玩家如何获得他们的专辑封面，即使它没有嵌入 ID3 标签中。答案是：来自[Gracenote等在线资源](http://www.gracenote.com/)

# javascript - 超过一定宽度时重新加载页面

> ID：10576370
> 
> 赞同：5
> 
> 时间：2012-05-14T00:38:32.693
> 
> 标签：javascript, jquery, browser, window, width

我希望页面仅在浏览器窗口高于或低于 768 像素时重新加载。这是我失败的尝试。

```
if ($(window.width() > "769") {
    $(window).resize(function () {
        if ($(window).width() < "769") {
            location.reload();
        }
    });

}
elseif($(window.width() < "769") {

    $(window).resize(function () {
        if ($(window).width() > "769") {
            location.reload();
        }
    });

} 
```

我确定有一种非常简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T01:14:19.750

## *[演示 jsFiddle](http://jsfiddle.net/YFTht/2/)*

页面重新加载的证据是（选项卡中的等待图标：D）生成随机数的数学随机数（在演示中。）

```
var ww = $(window).width();
var limit = 769;

function refresh() {
   ww = $(window).width();
   var w =  ww<limit ? (location.reload(true)) :  ( ww>limit ? (location.reload(true)) : ww=limit );
}

var tOut;
$(window).resize(function() {
    var resW = $(window).width();
    clearTimeout(tOut);
    if ( (ww>limit && resW<limit) || (ww<limit && resW>limit) ) {        
        tOut = setTimeout(refresh, 100);
    }
}); 
```

超时函数将有助于窗口调整大小以在调用`refresh`函数之前等待 100 毫秒。
您可以增加超时值以提高可用性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T00:42:14.523

可能还有其他更好的方法来做你**真正**需要的事情，但是：

```
if ($(window.width() > "769"){ 
```

应该：

```
if ($(window).width() > 769){ 
```

**完整代码：**

```
var width = $(window).width();
$(window).resize(function() {
    if (width > 769 && $(window).width() < 769) {
        location.reload();
    }
    else if (width < 769 && $(window).width() > 769) {
        location.reload();
    }
});​ 
```

[**现场演示**](http://jsfiddle.net/q4Udy/1/embedded/result/)

它可以用一个 if 语句来实现，但我更喜欢将它分成两部分，这样更容易理解。

# java - 扩展函数和类路径

> ID：10576371
> 
> 赞同：1
> 
> 时间：2012-05-14T00:38:38.957
> 
> 标签：java, xslt, classpath, saxon

我知道这是一篇相当长且详细的帖子。如果可以的话，我会让它更短更简单。我将不胜感激任何建议或想法。

**背景**

我正在编写 XSLT 以在两个应用程序之间传输数据 - 称它们为 Source 和 Target。我的 XSLT 由 Source System 供应商提供的集成引擎调用 - 称他们为 Source Co。

集成引擎通过调用包含在引擎中的适配器来更新 Target，该适配器包装了由 Target 系统的供应商编写的 API - 将它们称为 Target Co。这一切都在 J2EE 服务器内运行。

当集成引擎部署到 Java EE 服务器时，它会复制实现目标系统 API 的 JAR 文件，以便它位于引擎的类路径中。

**我的情况**

Source Co 的 Adapter 封装了 Target CO 的 API，只公开了 API 的一个子集。有时，我的客户的业务需求只能通过绕过 Source Co Adapter 并直接从 JAVA 调用 API 来满足。

我已经通过以下方式实现了这一目标：

*   编写接受和返回 DOM 文档并调用 API 的 Java 类
*   将它们作为 JAR 部署到 Java EE 引擎中，以便它们位于集成引擎可见的类路径上，因此我的 XSLT
*   在我的 XSLT 中，我通过声明命名空间来指向 Java 类，然后通过该命名空间调用适当的公共静态方法

这一切都很好。然而...

**我的问题**

Target Co 的 API 的最新版本具有：

*   删除了几个不推荐使用的方法
*   公开访问目标系统中的其他业务实体

Source Co 的适配器使用这些已删除的方法，因此它的类路径中需要有旧版本的 Target Co API。

只有使用最新的 API 访问这些额外的业务实体，才能满足客户的最新业务需求。

**我的问题**

我如何才能在我的扩展函数的类路径上拥有最新版本的 API，而不是它位于集成引擎适配器的类路径上？

我当然可以使用自定义类加载器。我这样做是为了加载一个 3rd 方数据库驱动程序 jar，如果它在其类路径上，它也会破坏集成引擎。在数据库驱动程序的情况下，这仅涉及使用一次自定义类加载器。然而，在目前的情况下，我看不出如何避免对类加载器的许多调用在我的代码中乱七八糟，这感觉非常错误。

**一些技术细节**

源系统 - SAP

目标系统 - Oracle 的 Primavera

Java EE 引擎 - Netweaver 7.2

XSLT 处理器 - 撒克逊

# c# - 如何使用 LINQ to SQL 映射对象集合？

> ID：10576375
> 
> 赞同：1
> 
> 时间：2012-05-14T00:40:02.557
> 
> 标签：c#, linq-to-sql, orm

我正在做一些测试来体验使用 LINQ to SQL 的对象关系映射，但我一直在尝试使多对多关系工作。为了简单起见，假设我有一个**Order**类，它拥有一个有序**Products**的集合。如何使用 LINQ to SQL 映射此产品集合？

```
[Table(Name = "OrderTable")]
public class Order
{
    [Column(IsPrimaryKey = true, IsDbGenerated = true)]
    public int ID;

    [Column]
    public string Customer;

    [Association(ThisKey = "ID", OtherKey = "ID")] // Not working
    public EntitySet<Product> products = new EntitySet<Product>();
}

[Table(Name = "ProductTable")]
public class Product
{
    [Column(IsPrimaryKey = true, IsDbGenerated = true)]
    public int ID;

    [Column]
    public string Name;

    [Column]
    public double Price;
} 
```

我尝试使用**EntitySet**作为容器来保存**Order**的**Products**但它不起作用，因为 LINQ 查询返回带有空产品集合的**Order对象。**

PS：从[这个问题](https://stackoverflow.com/questions/3026276/many-to-many-mapping-with-linq)看来，我需要创建第三个类来跟踪**订单-产品**关系，但我希望找到一种无需创建另一个类的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T00:48:19.500

除了 Order-Product 表之外，没有其他方法可以在数据库中对此进行建模，并且 Linq-to-SQL 实体与 SQL 表相匹配。不幸的是，这是使用 Linq-to-SQL 建模的唯一方法（据我所知）。

创建模型后，您可以创建一个属性来隐藏此限制，方法是右键单击实体并选择查看代码（假设为 DBML 设计器，否则只需将其添加到代码中），然后添加如下内容：

```
public partial class Order
{
    public IEnumerable<Product> Products
    {
        get
        {
            return OrderProducts.Select(op => op.Product);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T01:24:29.467

正如@TheEvilPenguin 指出的那样，

*   LINQ-to-SQL 将类映射到表
*   您需要一个 OrderProduct 表来促进数据库中的这种多对多关系
*   因此，LINQ-to-SQL 也需要映射该表。

将该连接表拖到设计器上。您将在`Order`named上拥有一个属性`OrderProduct`，并且您将能够通过该属性导航到`Products`on`Order``OrderProducts`

```
foreach (var op in Order.OrderProducts)
{
    var product = op.Product;
} 
```

# jquery - 尝试从外部文件夹执行 ajax 时出错

> ID：10576377
> 
> 赞同：0
> 
> 时间：2012-05-14T00:40:07.550
> 
> 标签：jquery, cakephp-2.0, cakephp-2.1

我在 cakephp 默认安装的 webroot 文件夹下有一个文件，我想得到一个 json 响应。但是当我尝试这样做时，我得到了这个错误

XMLHttpRequest 无法加载[http://test.com/companies/all_company_information](http://test.com/companies/all_company_information)。Access-Control-Allow-Origin 不允许来源[http://dev.local 。](http://dev.local)

```
 $.ajax({

         type: 'POST',
         url: '/controller/method',
         dataType: 'json',
         success: function(data){

             console.log(data);

         }

     }); 
```

我已经阅读了谷歌上的一些信息，但我想我不明白这一点。

**编辑**

当我使用 jsonp 时出现此错误

资源解释为脚本，但使用 MIME 类型 text/html 传输：

$.ajax({

```
 type: 'POST',
         url: '/controller/method',
         dataType: 'jsonp',
         success: function(data){

             console.log(data);

         }

     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:59:24.597

尝试在适当的控制器中创建一个函数，该控制器设置为响应预期的 json。配置为使用 json 响应的控制器：

```
function feed($date){
$this->layout = 'ajax';
$this->autoLayout = false;
$data = $this->Model->find();
echo json_encode($data);
} 
```

我大量使用 firefox 扩展 firebug 以确保我的 ajax 请求正在通过以及它们的响应是什么。

# javascript - 尝试直接从 javascript 控制 Paper.js 时的奇怪行为

> ID：10576378
> 
> 赞同：0
> 
> 时间：2012-05-14T00:40:17.083
> 
> 标签：javascript, canvas, paperjs

我正在做一个项目，该项目需要我通过 javascript 控制纸张，而不是使用普通的 paperscript 路由。由于我似乎无法弄清楚的奇怪行为，我目前陷入困境。这是我正在运行的代码的简化版本

```
paper.install(window);
$(document).ready(function() { 
    paper.setup("canvas");
    Game.ship = new Ship(view.center, 1) // Essentially calls new Raster("imgid"); and positions it
    view.draw(); 
}); 
```

出于某种原因，此代码导致空白画布。奇怪的是，如果我`new Ship(...)`在几秒钟后调用我的开发控制台，光栅在画布上渲染得很好，就像它应该的那样。我还注意到，当我查看 的值时`Game.ship.elem.__canvas`，我看到一个大小为 32、32 的画布元素，即使 DOM 中不存在这样的画布。

我假设这与时间有关，但我似乎无法弄清楚我必须做什么才能使其工作，除了使用 setTimeout 在几秒钟后创建栅格的令人难以置信的混乱方法`$(document).ready()`是叫。

有人对这里发生的事情有任何想法，或者有什么可以引导我走向正确方向的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:22:08.220

实际上，我设法自己弄清楚了。对于遇到此问题的任何人，问题实际上是因为在图像完成加载*之前*`ready()`调用了该函数。

 *因此，`new Raster()`调用将不存在的图像加载到画布中，导致空白结果！*

# jsf - 集成 Picasa 和 JSF 软件的最佳方式是什么？

> ID：10576383
> 
> 赞同：0
> 
> 时间：2012-05-14T00:41:00.343
> 
> 标签：jsf, integration, picasa

我正在用 JSF 实现小软件。我想展示来自 Picasa 的用户照片，但我不知道最好的方法是什么？可以有很多用户，每个人都有自己的 Picasa 相册。

你推荐什么，为什么？使用已经实现的 JavaScript 软件（如 JQuery 插件或 Googles Picasa Web Albums Data API 来获取照片等）是最明智的做法吗？

谢谢！萨米人

编辑：

您或其他人是否尝试过 Fancybox，我对 js 和 css 文件有问题，我认为这是因为这些文件的路径。在 JSF 文件中引用 JS 和 CSS 文件的正确方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:59:33.660

我建议使用基于 jQuery 的解决方案，例如[Picasa Webalbum Integrator](http://code.google.com/p/pwi/)。您所要做的就是将所需的脚本文件添加到您的页面并调用所需的函数，将画廊的用户名传递给它，如下所示：

```
<script type="text/javascript">
$(document).ready(function() {  //-- default jQuery call, do stuff when page is loaded
    $("#container").pwi({  //--specify your DIV's ID here
        username: '#{user.userName}' 
    });
});
</script> 
```

其中 #{user.userName} 是一个 EL 表达式，指向您要显示的画廊的用户名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:46:39.040

我的错！

将 jquery 插件与 JSF 一起使用时必须记住的两件事。

```
<h:outputStylesheet library="css" name="pwi.css"  />
<h:outputScript library="js" name="jquery.pwi.js" /> 
```

你必须使用这些标签。我对它们都只使用了 h:outputScript，它似乎没问题，但当然不是，生成的 html 不好。

另一件事是：

```
 <h:outputScript library="primefaces" name="jquery/jquery.js" target="head" /> 
```

我在 Primefaces 中使用带有 is 的 jquery，没有它，jquery 版本之间会发生冲突，或者 pwi 根本找不到 jquery。至少我是这么认为的 :) 没有一切正常，所以我很高兴！

萨米人

# google-api - invalid_grant 试图从谷歌获取 oAuth 令牌

> ID：10576386
> 
> 赞同：166
> 
> 时间：2012-05-14T00:41:11.560
> 
> 标签：google-api

`invalid_grant`我在尝试从 Google 获取 oAuth 令牌以连接到他们的联系人 api 时不断收到错误消息。所有的信息都是正确的，我已经检查了三次，这让我很困惑。

有谁知道可能导致此问题的原因？我尝试为其设置不同的客户端 ID，但得到相同的结果，我尝试连接许多不同的方式，包括尝试强制身份验证，但结果仍然相同。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2016-07-18T10:08:28.633

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-09-27T00:51:07.070

`access_type`尽管根据 bonkydog 的回答在我的请求中指定了“离线”，但我遇到了同样的问题。长话短说，我发现这里描述的解决方案对我有用：

[https://groups.google.com/forum/#!topic/google-analytics-data-export-api/4uNaJtquxCs](https://groups.google.com/forum/#!topic/google-analytics-data-export-api/4uNaJtquxCs)

本质上，当您在 Google API 的控制台中添加 OAuth2 客户端时，Google 会给您一个“客户端 ID”和一个“电子邮件地址”（假设您选择“webapp”作为您的客户端类型）。`client_id`尽管 Google 有误导性的命名约定，但他们希望您在访问他们的 OAuth2 API 时 发送“电子邮件地址”作为参数的值。

这适用于调用这两个 URL 时：

*   [https://accounts.google.com/o/oauth2/auth](https://accounts.google.com/o/oauth2/auth)
*   [https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token)

请注意，如果您使用“客户 ID”而不是“电子邮件地址”调用第一个 URL，则调用该 URL 将*成功。*但是，当尝试从第二个 URL 获取不记名令牌时，使用从该请求返回的代码将不起作用。相反，您将收到“错误 400”和“invalid_grant”消息。

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2012-05-14T21:57:24.390

当我在将用户发送到 OAuth 时没有明确请求“离线”访问时遇到了这个问题“你想授予这个应用程序触摸你的东西的权限吗？” 页。

确保在请求中指定 access_type=offline。

此处的详细信息：[https ://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

（另外：我认为 Google 在 2011 年末添加了此限制。如果您有在那之前的旧令牌，您需要将您的用户发送到权限页面以授权离线使用。）

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2020-02-17T08:41:27.067

If you're testing this out in postman / insomnia and are just trying to get it working, hint: the server auth code (code parameter) is only good once. Meaning if you stuff up any of the other parameters in the request and get back a 400, you'll need to use a new server auth code or you'll just get another 400\.

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-12-04T07:40:08.013

我遇到了同样的问题。对我来说，我通过使用电子邮件地址（以 ...@developer.gserviceaccount.com 结尾的字符串）而不是 client_id 参数值的客户端 ID 来解决此问题。谷歌设置的命名在这里令人困惑。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-01-12T16:55:21.977

我的问题是我使用了这个 URL：

```
https://accounts.google.com/o/oauth2/token 
```

当我应该使用这个 URL 时：

```
https://www.googleapis.com/oauth2/v4/token 
```

这是在测试一个希望离线访问[存储引擎](https://cloud.google.com/storage/)的服务帐户。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-04-10T16:40:21.250

This is a silly answer, but the problem for me was that I failed to realize I already had been issued an active oAuth token for my google user which I failed to store. The solution in this case is to go to the api console and reset the client secret.

There are numerous other answers on SO to this effect for example [Reset Client Secret OAuth2 - Do clients need to re-grant access?](https://stackoverflow.com/questions/26088202/reset-client-secret-oauth2-do-clients-need-to-re-grant-access)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-03-30T00:35:15.577

Using a Android clientId (no client_secret) I was getting the following error response:

```
{
 "error": "invalid_grant",
 "error_description": "Missing code verifier."
} 
```

I cannot find any documentation for the field 'code_verifier' but I discovered if you set it to equal values in both the authorization and token requests it will remove this error. I'm not sure what the intended value should be or if it should be secure. It has some minimum length (16? characters) but I found setting to `null` also works.

I am using AppAuth for the authorization request in my Android client which has a `setCodeVerifier()` function.

```
AuthorizationRequest authRequest = new AuthorizationRequest.Builder(
                                    serviceConfiguration,
                                    provider.getClientId(),
                                    ResponseTypeValues.CODE,
                                    provider.getRedirectUri()
                            )
                            .setScope(provider.getScope())
                            .setCodeVerifier(null)
                            .build(); 
```

Here is an example token request in node:

```
request.post(
  'https://www.googleapis.com/oauth2/v4/token',
  { form: {
    'code': '4/xxxxxxxxxxxxxxxxxxxx',
    'code_verifier': null,
    'client_id': 'xxxxxxxxxxxxxxxxxxxxxx.apps.googleusercontent.com',
    'client_secret': null,
    'redirect_uri': 'com.domain.app:/oauth2redirect',
    'grant_type': 'authorization_code'
  } },
  function (error, response, body) {
    if (!error && response.statusCode == 200) {
      console.log('Success!');
    } else {
      console.log(response.statusCode + ' ' + error);
    }

    console.log(body);
  }
); 
```

I tested and this works with both `https://www.googleapis.com/oauth2/v4/token` and `https://accounts.google.com/o/oauth2/token`.

If you are using `GoogleAuthorizationCodeTokenRequest` instead:

```
final GoogleAuthorizationCodeTokenRequest req = new GoogleAuthorizationCodeTokenRequest(
                    TRANSPORT,
                    JSON_FACTORY,
                    getClientId(),
                    getClientSecret(),
                    code,
                    redirectUrl
);
req.set("code_verifier", null);          
GoogleTokenResponse response = req.execute(); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-09-27T06:39:05.077

There are two major reasons for **[invalid_grant](https://www.rfc-editor.org/rfc/rfc6749#section-5.2)** error which you have to take care prior to the POST request for Refresh Token and Access Token.

1.  Request header must contain "content-type: application/x-www-form-urlencoded"
2.  Your request payload should be url encoded Form Data, don't send as json object.

[RFC 6749 OAuth 2.0](https://www.rfc-editor.org/rfc/rfc6749#section-5.2) defined **invalid_grant** as: *The provided authorization grant (e.g., authorization code, resource owner credentials) or refresh token is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client.*

I found another good article, [here](https://blog.timekit.io/google-oauth-invalid-grant-nightmare-and-how-to-fix-it-9f4efaf1da35) you will find many other reasons for this error.

[https://blog.timekit.io/google-oauth-invalid-grant-nightmare-and-how-to-fix-it-9f4efaf1da35](https://blog.timekit.io/google-oauth-invalid-grant-nightmare-and-how-to-fix-it-9f4efaf1da35)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-12-14T04:49:00.587

Solved by removing all Authorized redirect URIs in Google console for the project. I use server side flow when you use 'postmessage' as redirect URI

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-01-28T22:34:43.657

We tried so many things, and in the end the issue was that the client had turned "Less Secure App Access" off in their Google Account settings.

To turn this on:

1.  Go to [https://myaccount.google.com/](https://myaccount.google.com/) and manage account
2.  Go to the Security tab
3.  Turn Less secure app access on

[![enter image description here](../Images/3a3b040c1001bca6cf714a668e7109e2.png)](https://i.stack.imgur.com/aHLlM.png)

I hope this saves someone some time!

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-05-18T08:45:11.090

我有相同的错误消息“invalid_grant”，这是因为 服务器上未正确接收从客户端 javascript 发送的**authResult['code'] 。**

尝试从服务器输出它，看看它是否正确，而不是一个空字符串。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-01-13T09:54:03.827

Try change your url for requst to

```
https://www.googleapis.com/oauth2/v4/token 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-05-18T22:49:25.123

You might have to remove a stale/invalid OAuth response.

Credit: [node.js google oauth2 sample stopped working invalid_grant](https://stackoverflow.com/questions/32995046/node-js-google-oauth2-sample-stopped-working-invalid-grant)

**Note**: An OAuth response will also become invalid if the password used in the initial authorization has been changed.

If in a bash environment, you can use the following to remove the stale response:

`rm /Users/<username>/.credentials/<authorization.json>`

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-10-19T17:33:27.077

如果您正在使用 scribe 库，例如设置离线模式，如 bonkydog 建议的那样。这是代码：

```
OAuthService service = new ServiceBuilder().provider(Google2Api.class).apiKey(clientId).apiSecret(apiSecret)
                .callback(callbackUrl).scope(SCOPE).offline(true)
                .build(); 
```

[https://github.com/codolutions/scribe-java/](https://github.com/codolutions/scribe-java/)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-01-26T09:08:12.127

The code you obtain in the URL after user consent has a very short expiry. Please obtain the code again and attempt to get access token within seconds (you have to hurry) and it should work. I can't find out the expiry period of code but it's literally very short.

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2021-07-22T07:00:18.840

In my case it was a callback URL that was different from the original request. So, **callback URL should be the same** for auth request and code exchange.

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-01-14T01:05:52.170

在这个网站 [console.developers.google.com](https://console.developers.google.com/apis/credentials)

此控制台板选择您的项目输入誓言网址。oauth 成功时，oauth 回调 url 将重定向

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-01-04T11:25:12.917

After considering and trying all of the other ways here, here's how I solved the issue in nodejs with the `googleapis` module in conjunction with the `request` module, which I used to fetch the tokens instead of the provided `getToken()` method:

```
const request = require('request');

//SETUP GOOGLE AUTH
var google = require('googleapis');
const oAuthConfigs = rootRequire('config/oAuthConfig')
const googleOAuthConfigs = oAuthConfigs.google

//for google OAuth: https://github.com/google/google-api-nodejs-client
var OAuth2 = google.auth.OAuth2;
var googleOAuth2Client = new OAuth2(
    process.env.GOOGLE_OAUTH_CLIENT_ID || googleOAuthConfigs.clientId, 
    process.env.GOOGLE_OAUTH_CLIENT_SECRET || googleOAuthConfigs.clientSecret, 
    process.env.GOOGLE_OAUTH_CLIENT_REDIRECT_URL || googleOAuthConfigs.callbackUrl);

/* generate a url that asks permissions for Google+ and Google Calendar scopes
https://developers.google.com/identity/protocols/googlescopes#monitoringv3*/
var googleOAuth2ClientScopes = [
    'https://www.googleapis.com/auth/plus.me',
    'https://www.googleapis.com/auth/userinfo.email'
];

var googleOAuth2ClientRedirectURL = process.env.GOOGLE_OAUTH_CLIENT_REDIRECT_URL || googleOAuthConfigs.callbackUrl; 

var googleOAuth2ClientAuthUrl = googleOAuth2Client.generateAuthUrl({
  access_type: 'offline', // 'online' (default) or 'offline' (gets refresh_token)
  scope: googleOAuth2ClientScopes // If you only need one scope you can pass it as string
});

//AFTER SETUP, THE FOLLOWING IS FOR OBTAINING TOKENS FROM THE AUTHCODE

        const ci = process.env.GOOGLE_OAUTH_CLIENT_ID || googleOAuthConfigs.clientId
        const cs = process.env.GOOGLE_OAUTH_CLIENT_SECRET || googleOAuthConfigs.clientSecret
        const ru = process.env.GOOGLE_OAUTH_CLIENT_REDIRECT_URL || googleOAuthConfigs.callbackUrl
        var oauth2Client = new OAuth2(ci, cs, ru);

        var hostUrl = "https://www.googleapis.com";
        hostUrl += '/oauth2/v4/token?code=' + authCode + '&client_id=' + ci + '&client_secret=' + cs + '&redirect_uri=' + ru + '&grant_type=authorization_code',
        request.post({url: hostUrl}, function optionalCallback(err, httpResponse, data) {
            // Now tokens contains an access_token and an optional refresh_token. Save them.
            if(!err) {
                //SUCCESS! We got the tokens
                const tokens = JSON.parse(data)
                oauth2Client.setCredentials(tokens);

                //AUTHENTICATED PROCEED AS DESIRED.
                googlePlus.people.get({ userId: 'me', auth: oauth2Client }, function(err, response) {
                // handle err and response
                    if(!err) {
                        res.status(200).json(response);
                    } else {
                        console.error("/google/exchange 1", err.message);
                        handleError(res, err.message, "Failed to retrieve google person");
                    }
                });
            } else {
                console.log("/google/exchange 2", err.message);
                handleError(res, err.message, "Failed to get access tokens", err.code);
            }
        }); 
```

I simply use `request` to make the api request via HTTP as described here: [https://developers.google.com/identity/protocols/OAuth2WebServer#offline](https://developers.google.com/identity/protocols/OAuth2WebServer#offline)

```
POST /oauth2/v4/token HTTP/1.1
Host: www.googleapis.com
Content-Type: application/x-www-form-urlencoded

code=4/P7q7W91a-oMsCeLvIaQm6bTrgtp7&
client_id=8819981768.apps.googleusercontent.com&
client_secret={client_secret}&
redirect_uri=https://oauth2.example.com/code&
grant_type=authorization_code 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-10-07T10:11:25.047

For future folks... I read many articles and blogs but had luck with solution below...

```
GoogleTokenResponse tokenResponse =
      new GoogleAuthorizationCodeTokenRequest(
          new NetHttpTransport(),
          JacksonFactory.getDefaultInstance(),
          "https://www.googleapis.com/oauth2/v4/token",
          clientId,
          clientSecret,
          authCode,
          "") //Redirect Url
     .setScopes(scopes)
     .setGrantType("authorization_code")
     .execute(); 
```

[This](https://blog.timekit.io/google-oauth-invalid-grant-nightmare-and-how-to-fix-it-9f4efaf1da35) blog depicts different cases in which "invalid_grant" error comes.

Enjoy!!!

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-02-07T11:06:19.263

for me I had to make sure that the `redirect_uri` is an exact match to the one in the developer console `Authorised redirect URIs`, that fixed it for me, I was able to debug and know what exactly was the issue after switching from `https://accounts.google.com/o/oauth2/token` to `https://www.googleapis.com/oauth2/v4/token`

I got a proper error:

```
{"error": "redirect_uri_mismatch",  "error_description": "Bad Request"} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-05-19T18:27:02.763

I had this problem after enabling a new service API on the Google console and trying to use the previously made credentials.

To fix the problem, I had to go back to the credential page, clicking on the credential name, and clicking "Save" **again**. After that, I could authenticate just fine.

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2019-07-26T11:58:57.557

In my case, the issue was in my code. Mistakenly I've tried to initiate client 2 times with the same tokens. If none of the answers above helped make sure you do not generate 2 instances of the client.

My code before the fix:

```
def gc_service
      oauth_client = Signet::OAuth2::Client.new(client_options)
      oauth_client.code = params[:code]
      response = oauth_client.fetch_access_token!
      session[:authorization] = response
      oauth_client.update!(session[:authorization])

      gc_service = Google::Apis::CalendarV3::CalendarService.new
      gc_service.authorization = oauth_client

      gc_service
    end 
```

```
primary_calendar_id = gc_service.list_calendar_lists.items.select(&:primary).first.id

gc_service.insert_acl(primary_calendar_id, acl_rule_object, send_notifications: false) 
```

as soon as I change it to (use only one instance):

```
@gc_service = gc_service
primary_calendar_id = @gc_service.list_calendar_lists.items.select(&:primary).first.id

@gc_service.insert_acl(primary_calendar_id, acl_rule_object, send_notifications: false) 
```

it fixed my issues with grant type.

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-08-09T09:40:51.983

For me the issues was I had multiple clients in my project and I am pretty sure this is perfectly alright, but I deleted all the client for that project and created a new one and all started working for me ( Got this idea fro WP_SMTP plugin help support forum) I am not able to find out that link for reference

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2020-01-05T09:18:46.337

If you are sanitizing user input (For example, `$_GET["code"]` in php) Make sure you don't accidentally replace something in the code.

The regex I am using is now `/[^A-Za-z0-9\/-]/`

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-01-11T16:08:51.207

Look at this [https://dev.to/risafj/beginner-s-guide-to-oauth-understanding-access-tokens-and-authorization-codes-2988](https://dev.to/risafj/beginner-s-guide-to-oauth-understanding-access-tokens-and-authorization-codes-2988)

First you need an access_token:

```
$code = $_GET['code'];

$clientid = "xxxxxxx.apps.googleusercontent.com";
$clientsecret = "xxxxxxxxxxxxxxxxxxxxx";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://www.googleapis.com/oauth2/v4/token");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, "client_id=".urlencode($clientid)."&client_secret=".urlencode($clientsecret)."&code=".urlencode($code)."&grant_type=authorization_code&redirect_uri=". urlencode("https://yourdomain.com"));
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/x-www-form-urlencoded'));

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$server_output = curl_exec($ch);
curl_close ($ch);

$server_output = json_decode($server_output);
$access_token = $server_output->access_token;
$refresh_token = $server_output->refresh_token;
$expires_in = $server_output->expires_in; 
```

Safe the Access Token and the Refresh Token and the expire_in, in a Database. The Access Token expires after $expires_in seconds. Than you need to grab a new Access Token (and safe it in the Database) with the following Request:

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://www.googleapis.com/oauth2/v4/token");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, "client_id=".urlencode($clientid)."&client_secret=".urlencode($clientsecret)."&refresh_token=".urlencode($refresh_token)."&grant_type=refresh_token");
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/x-www-form-urlencoded'));

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$server_output = curl_exec($ch);
curl_close ($ch);

$server_output = json_decode($server_output);
$access_token = $server_output->access_token;
$expires_in = $server_output->expires_in; 
```

Bear in Mind to add the redirect_uri Domain to your Domains in your Google Console: [https://console.cloud.google.com/apis/credentials](https://console.cloud.google.com/apis/credentials) in the Tab "OAuth 2.0-Client-IDs". There you find also your Client-ID and Client-Secret.

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-01-17T16:43:46.737

There is a undocumented timeout between when you first redirect the user to the google authentication page (and get back a code), and when you take the returned code and post it to the token url. It works fine for me with the actual google supplied client_id as opposed to an "undocumented email address". I just needed to start the process again.

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2021-04-23T20:30:46.223

For me, this was caused by subsequent `getToken` calls with the same code.

Namely, in NestJS my callback endpoint was decorated with `@UseGuards(AuthGuard('google'))` and I tried to call `getToken` in the callback.

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2021-10-29T17:27:58.597

I my case I just didn't read the [documentation](https://github.com/googleapis/google-api-nodejs-client#handling-refresh-tokens) properly because I was trying to do `const { tokens } = await oauth2Client.getToken(accessToken);` every time to get an authorized client instance but for the subsequent requests you only need to include the `refresh_token` you store after the first user auth.

```
oauth2Client.setCredentials({
  refresh_token: `STORED_REFRESH_TOKEN`
}); 
```

# ruby-on-rails - 在rails erb错误中创建下拉列表

> ID：10576390
> 
> 赞同：0
> 
> 时间：2012-05-14T00:41:35.640
> 
> 标签：ruby-on-rails, ruby

最初我的视图设置如下：

```
<%= render layout: 'form' do |f| %>

 <% for holiday in Holiday.find(:all) %>
 <label class="checkbox">
  <%= check_box_tag "user[holiday_ids][]", holiday.id, @user.holidays.include?(holiday) %>
  <%= holiday.name %>
</label> 
```

其中呈现了 8 个“兴趣”的列表。但是，我需要这 8 个中的 3 个来拥有唯一的 div id，以便在选中时使用 jquery 显示/隐藏功能来显示它们下方的 div。为此，我只是将上述 erb 代码呈现的 html 粘贴到我的视图中并手动修改它以使用 jquery 语句（粘贴在下面）。我的问题是在 jquery 显示的这些 div 中我需要有一个由我的应用程序中的另一个模型填充的下拉列表。我该如何实现？我在第一个 div 中尝试了该语句，但它导致以下错误（代码取自我的 _form 部分）：

```
undefined method `map' for nil:NilClass
Extracted source (around line #12):

9:       </ul>
10:     </div>
11:   <% end %>
12:   <%= yield f %>
13:   
14:   <div class="actions">
15:     <%= f.submit "Continue" %> 
```

这是我的 _form 部分：

```
<%= form_for @user, url: wizard_path do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>
      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <%= yield f %>

  <div class="actions">
    <%= f.submit "Continue" %>
    or <%= link_to "skip this step", next_wizard_path %>
  </div>
<% end %> 
```

这是我正在尝试的 HTML + erb 语句。

```
<%= render layout: 'form' do |f| %>
<div id="checkbox">
<label class="checkbox">
<input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="2" />
Valentine Day
</label>
</div>
<div style="display:none;">
<%= select_tag 'Interests', options_for_select(@interests) %>
</div>

<div id="checkbox">
<label class="checkbox">
<input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="4" />
Mothers Day
</label>
</div>
<div style="display:none;">
Whatever you have to capture here<input type="text" id="foo2" />
</div>
<label class="checkbox">
<input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="7" />
Thanksgiving
</label>
<div id="checkbox">
<label class="checkbox">
<input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="5" />
Father's Day
</label></div>
<div style="display:none;">
Whatever you have to capture here<input type="text" id="foo3" />
</div>
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="3" />
 Easter
</label>

<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="6" />
 Halloween
</label>
<label class="checkbox">
  <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="8" />
  Christmas
</label>​
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T03:25:57.347

我从来没有见过`<%= yield f %>`

你不必这样做：

```
<%= yield 'form', {:f => f} %> 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:44:30.780

我想我有一个类似的问题，视图没有看到我的变量，这就是我修复它的方法

```
 <% @resources.each do |resource| %>
    <%= render 'layouts/resources_expanded', :resource => resource %>
  <% end %> 
```

# android - Android 模拟器不会在 Eclipse 上启动应用程序

> ID：10576392
> 
> 赞同：2
> 
> 时间：2012-05-14T00:42:18.113
> 
> 标签：android, eclipse, android-emulator

当我尝试启动应用程序以在模拟器中对其进行测试时，模拟器会打开，然后它会安装应用程序（根据 LogCat），但它没有运行。我查看了应用程序，但它不存在。我尝试重新创建模拟器，从 AVD Manager 启动它，重置 ADB 等等。这是我启动模拟器时 LogCat 给我的：

```
[2012-05-13 20:25:23 - StickFigure] Launching a new emulator with Virtual Device 'Droid'
[2012-05-13 20:25:27 - Emulator] emulator: emulator window was out of view and was recentered
[2012-05-13 20:25:28 - Emulator] 
[2012-05-13 20:25:28 - StickFigure] New emulator found: emulator-5554
[2012-05-13 20:25:28 - StickFigure] Waiting for HOME ('android.process.acore') to be launched...
[2012-05-13 20:26:04 - StickFigure] HOME is up on device 'emulator-5554'
[2012-05-13 20:26:04 - StickFigure] Uploading StickFigure.apk onto device 'emulator-5554'
[2012-05-13 20:26:04 - StickFigure] Installing StickFigure.apk...
[2012-05-13 20:26:28 - StickFigure] Success!
[2012-05-13 20:26:28 - StickFigure] /StickFigure/bin/StickFigure.apk installed on device
[2012-05-13 20:26:28 - StickFigure] Done! 
```

编辑：模拟器适用于我的其他应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:54:31.930

首先，验证您的**Run 配置的****Launch Action**是否符合您的预期（Launch Default Activity 或 Launch a specific Activity）。

 **如果一切看起来都很好，但 Activity 没有启动，你可以尝试从命令行执行它：

```
$ adb shell am start -n your.package/your.package.YourActivity 
```**

# c++ - 列表未正确排序

> ID：10576394
> 
> 赞同：1
> 
> 时间：2012-05-14T00:42:56.880
> 
> 标签：c++, list, visual-c++

我正在尝试按 desc 顺序设置列表，将最高设置到列表的前面，但它没有这样做，这是我正在使用的结构

```
struct  datalist
{
    short   index;
    int nNumber;

    bool operator > (const datalist& a) const
    {
        return (nNumber > a.nNumber);
    }
}; 
```

我正在做

```
datalist* pAR = new datalist;
pAR->index = 1000;
pAR->nNumber = 10;
m_SomeList.push_back(pAR);

pAR = new datalist;
pAR->index = 1005;
pAR->nNumber = 30;
m_SomeList.push_back(pAR);

pAR = new datalist;
pAR->index = 0;
pAR->nNumber = 20;
m_SomeList.push_back(pAR);

m_SomeList.sort(greater<datalist*>()); 
```

排序后，它正在输出`20, 30, 10`，我使用的是 VS 6.0，在我得到我需要升级的评论之前，我知道这是一个旧的编译器，但在我的情况下我需要它，所以在回答时请记住这一点，最好的描述性，有用的答案获得投票。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T00:45:46.637

您正在对指针容器进行排序，因此容器`std::greater`在指针上使用，因此它们按*地址*以非降序排序。

你想做这样的事情：

```
struct Comp {
    bool operator()(const datalist* a, const datalist* b) {
        return *a > *b;
    }
};

m_SomeList.sort(Comp()); 
```

或者

```
m_SomeList.sort([](const datalist* a, const datalist* b) {
    return *a > *b;
}); // for C++11 
```

同样正如克里斯所提到的，您可能希望按值而不是指针存储这些对象，因此您不必清理它们。

# bash - 带有图形菜单的 Bash 脚本

> ID：10576401
> 
> 赞同：11
> 
> 时间：2012-05-14T00:44:41.463
> 
> 标签：bash, shell, menu

我一直在编写简单的 bash 脚本，我想知道如何实现简单的菜单，如果可能的话，使用带颜色的菜单。

过去，我编写了使用[ncurses](http://en.wikipedia.org/wiki/Ncurses)的简单 C 应用程序，并且希望（如果可能）在我的 bash 脚本中有菜单，用户可以使用向上/向下箭头选择列表中的项目，然后来回浏览一系列是/否/取消提示。

我熟悉在 bash 中设置彩色文本，所以有一个开始（例如：[使用 colors 的 bash](http://webhome.csc.uvic.ca/~sae/seng265/fall04/tips/s265s047-tips/bash-using-colors.html)），所以此时剩下的唯一要求是查看 bash 是否具有这些功能。我宁愿避免为此使用 C/C++ 编写应用程序，因为我希望能够即时编辑它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-14T00:55:56.083

有一个名为[dialog](http://unstableme.blogspot.com/2009/12/linux-dialog-utility-short-tutorial.html)的包，这与您的要求有关吗？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-14T00:51:56.350

我自己没有使用过这个，但是你检查[过 bashsimplecurses](https://github.com/metal3d/bashsimplecurses)吗？从文档来看，它看起来像是一个可能的解决方案。

# javascript - Ajax 请求但没有内容

> ID：10576403
> 
> 赞同：0
> 
> 时间：2012-05-14T00:45:45.087
> 
> 标签：javascript, ajax, http, request

我正在尝试创建一个 Ajax 请求，然后解析响应标头以获取“位置”属性。这是我的代码：

```
var request = new XMLHttpRequest();
request.onreadystatechange = function() {
    if(request.readyState == 4 && request.status == 301) {
        alert('test');
        var header = request.getResponseHeader('Location');
        console.log(header);
    }
}
request.open('GET', hrefAttr, true);
request.send(null); 
```

问题是由于某种原因，请求被发送并且响应也被接收（Firebug中的红色“GET”请求+响应），但我没有收到任何“测试”警报，也没有在firebug控制台中收到任何文本。

编辑：这是修改后的代码：

```
var request = new XMLHttpRequest();
request.onreadystatechange = function() {
console.log(request.readyState);
    if(request.readyState <= 3 && request.status == 301) {
        alert('test');
        var header = request.getResponseHeader('Location');
        console.log(header);
    }
    else if (request.readyState == 0 && request.status == 301) {
        alert('state0');
    }
}
request.open('GET', hrefAttr, true);
request.send(); 
```

console.log(request.readyState) 给出了这个状态序列：1、1、2、4。

在 Firebug 控制台选项卡中，Http Request+Response 显示正常，但显示为红色（如果这意味着什么）。

不知道为什么我它不工作......编辑：我正在使用 Firefox。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:24:17.887

不幸的是，XHR 将跟随 301 并返回重定向页面的内容。您可以在此处查看 W3C 记录的行为[。](http://www.w3.org/TR/XMLHttpRequest/#infrastructure-for-the-send-method)

> 如果 XMLHttpRequest 源和请求 URL 的源是同源的，则透明地遵循重定向，同时遵守同源请求事件规则。

所以基本上，您的请求是透明地遵循 301。浏览器会自动重定向，您无法执行您打算执行的操作。如果您可以控制 Web 服务器，则可以更改此设置（尽管违反大多数建议）。

希望这可以帮助！

# ruby-on-rails - 自定义链轮预处理器和资产预编译

> ID：10576405
> 
> 赞同：2
> 
> 时间：2012-05-14T00:45:54.250
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

在 Rails 3.2.3 中预编译资产时，我在使用自定义 sprockets 预处理器时遇到问题

我正在使用[sprockets-urlrewriter](https://github.com/carlhoerberg/sprockets-urlrewriter)和 twitter 引导程序。

在开发中，在初始化程序中声明的预处理器工作得很好。 `Rails.application.assets.register_preprocessor 'text/css', Sprockets::UrlRewriter`

它成功地将我的 CSS 中的相对 URL 转换`url(\"../img/glyphicons-halflings.png\")`为`url(bootstrap/img/glyphicons-halflings.png)`

精彩的。

但是当我预编译我的 assets:`rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets`时，编译后的 css 具有原始的相对路径。如何解决使用预处理器预编译资产的问题？

# java - 为什么我没有通过设置此日历对象获得期望的星期几？

> ID：10576408
> 
> 赞同：0
> 
> 时间：2012-05-14T00:46:36.847
> 
> 标签：java, calendar

编辑：谢谢-我现在明白了很多。当你第一次开始时，它非常混乱！谢谢您的帮助。我将按原样保持这个问题（冒着更多反对票的危险），因为它可能会帮助其他人。每个人似乎都推荐其他一些用于日期时间的库

* * *

我正在努力使用 Java 日历功能-它似乎返回了错误的数据，根据日历，底部的数字应该是星期四，但返回的是星期六！

```
Calendar cal = new GregorianCalendar();
       cal.set(2012,2,23); // 0 = January

      String weekdays[]={"sunday","monday", "tuesday", "wednesday","thursday","friday","saturday",};

        Integer Weekdaycurrent1=cal.get(Calendar.DAY_OF_WEEK);
        System.out.println("today is a "+weekdays[Weekdaycurrent1]); //Prints today is Saturday, when it should be a thursday 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T00:51:12.133

首先，`DAY_OF_WEEK`基于`1`：

```
public final static int SUNDAY = 1; 
```

其次，`2012-03-23`（是的，3 月而不是 2 月）设定`cal.set(2012, 2, 23)`为*星期五*

**您的代码行为正确。**

编辑：对于那些太蹩脚而无法正确阅读问题的人，调用`cal.set(2012,2,23)`将日期设置为`2012-03-23`，因为`month`参数是从零开始的（即 Jan = 0、Feb = 1、Mar = 2 等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T00:52:29.540

你的假设是错误的。阅读 javadocs：

[http://docs.oracle.com/javase/1.4.2/docs/api/constant-values.html#java.util](http://docs.oracle.com/javase/1.4.2/docs/api/constant-values.html#java.util)

```
public static final int SUNDAY          1
public static final int MONDAY          2
public static final int TUESDAY         3
public static final int WEDNESDAY       4
public static final int THURSDAY        5
public static final int FRIDAY          6
public static final int SATURDAY        7 
```

# python - NameError django send_mail

> ID：10576414
> 
> 赞同：2
> 
> 时间：2012-05-14T00:48:30.653
> 
> 标签：python, django, django-models, nameerror

为什么我收到 NameError: `global name 'send_mail' is not defined`？

从我的models.py：

```
from django.template import Context, loader
from django.utils.translation import ugettext as _
from django.core.mail import send_mail
.......
class Payment(models.Model):    

    # send email for payment
    # 1\. render context to email template
    email_template = loader.get_template('classifieds/email/payment.txt')
    context = Context({'payment': self})
    email_contents = email_template.render(context)

    # 2\. send email
    send_mail(_('Your payment has been processed.'),
              email_contents, settings.FROM_EMAIL,
              [self.ad.user.email], fail_silently=False) 
```

谢谢！

```
Traceback:
File "/home/.../webapps/django/lib/python2.7/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/.../webapps/django/lib/python2.7/django/views/decorators/csrf.py" in wrapped_view
  77\.         return view_func(*args, **kwargs)
File "/home/.../webapps/django/myproject/classifieds/views/create.py" in checkout
  122\.       send_mail(_('Your ad will be posted shortly.'),

Exception Type: NameError at /checkout/2
Exception Value: global name 'send_mail' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:08:42.207

追溯来自您的观点。

```
File "/home/.../webapps/django/myproject/classifieds/views/create.py" in checkout
  122\.       send_mail(_('Your ad will be posted shortly.'), 
```

您发布了模型中的代码。

`classifieds/views/create.py`我认为没有导入 send_mail 。

另一个问题是你为什么在你的模型类上做这些事情，而不是在模型方法中......

编辑：你把它放在问题中的方式使它看起来非常奇怪，这个发送邮件的东西是在课堂上而不是在方法中发生的。查看源代码，您会看到它在`Payment.complete`方法中：[https ://github.com/saebyn/django-classifieds/blob/master/classifieds/models.py#L273](https://github.com/saebyn/django-classifieds/blob/master/classifieds/models.py#L273)

`send_mail`在这里使用： [https ://github.com/saebyn/django-classifieds/blob/master/classifieds/views/create.py#L116](https://github.com/saebyn/django-classifieds/blob/master/classifieds/views/create.py#L116)

但不是进口的，进口吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-10T23:53:48.613

在项目 settings.py 中使用这些：

```
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.sendgrid.net'
EMAIL_HOST_USER = 'yourusername'
EMAIL_HOST_PASSWORD = 'YourPassword'
EMAIL_PORT = 587
EMAIL_USE_TLS = True 
```

在您的控制器中使用：

```
from django.core.mail import send_mail

send_mail('Subject here', 'Here is the message.', 'from@example.com', ['to@example.com'], fail_silently=False) 
```

以供参考：

[https://sendgrid.com/docs/for-developers/sending-email/django/](https://sendgrid.com/docs/for-developers/sending-email/django/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T01:56:33.980

尝试将您的 send_mail 功能替换为：

```
django.core.mail.send_mail(your_parameters) 
```

另外，您在 send_mail 中的第一个参数似乎不是字符串，请更改为以下内容：（https://docs.djangoproject.com/en/dev/topics/email/?from=olddocs）

```
send_mail('Your payment has been processed.',
              email_contents, settings.FROM_EMAIL,
              [self.ad.user.email], fail_silently=False) 
```

试试这两个建议，让我知道你得到了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-20T09:19:27.227

NameError：未定义名称“send_mail”

```
from django.core.mail import send_mail 
```

# oracle - Oracle 日期的“BETWEEN”SQL 关键字——在 Oracle 中出现错误

> ID：10576420
> 
> 赞同：2
> 
> 时间：2012-05-14T00:49:13.410
> 
> 标签：oracle

我的数据库“01-APR-12”中有这种格式的日期，并且该列是 DATE 类型。

我的 SQL 语句如下所示：

```
SELECT DISTINCT c.customerno, c.lname, c.fname
FROM customer c, sales s
WHERE c.customerno = s.customerno AND s.salestype = 1 
AND (s.salesdate BETWEEN '01-APR-12' AND '31-APR-12'); 
```

当我尝试这样做时，我收到了这个错误——ORA-01839: date not valid for month specified。

我什至可以将 BETWEEN 关键字与数据库中的日期设置方式结合使用吗？

如果没有，是否有另一种方法可以获得该日期范围内的数据输出，而无需修复数据库中的数据？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T00:51:57.410

四月有 30 天而不是 31 天。

改变

```
SELECT DISTINCT c.customerno, c.lname, c.fname
FROM customer c, sales s
WHERE c.customerno = s.customerno AND s.salestype = 1 
AND (s.salesdate BETWEEN '01-APR-12' AND '31-APR-12'); 
```

到

```
SELECT DISTINCT c.customerno, c.lname, c.fname
FROM customer c, sales s
WHERE c.customerno = s.customerno AND s.salestype = 1 
AND (s.salesdate BETWEEN '01-APR-12' AND '30-APR-12'); 
```

你应该很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:46:32.973

如果您要检查的日期范围从一个月的第一天到一个月的最后一天，那么您可以修改查询以避免您必须明确检查该月的最后一天的情况

```
 SELECT DISTINCT c.customerno, c.lname, c.fname
  FROM customer c, sales s
 WHERE c.customerno = s.customerno
   AND s.salestype = 1 AND (s.salesdate BETWEEN '01-APR-12' AND LAST_DAY(TO_DATE('APR-12', 'MON-YY')); 
```

LAST_DAY 函数将提供该月的最后一天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T22:21:15.057

其他答案错过了一些重要的事情，并且不会返回正确的结果。日期具有日期和时间组件。如果您的 salesdate 列实际上是包含时间的日期，那么您将错过 4 月 30 日发生的任何销售，除非它们恰好发生在午夜。

这是一个例子：

```
create table date_temp  (temp date);
insert into date_temp values(to_date('01-APR-2014 15:12:00', 'DD-MON-YYYY HH24:MI:SS'));
insert into date_temp values(to_date('30-APR-2014 15:12:00', 'DD-MON-YYYY HH24:MI:SS')); 
```

表 DATE_TEMP 创建。

插入 1 行。

插入 1 行。

```
select * from date_temp where temp between '01-APR-2014' and '30-APR-2014'; 
```

查询结果：01-APR-14

如果您想获取四月的所有记录，包括日期字段中包含时间成分的记录，您应该使用下个月的第一天作为 between 子句的第二侧：

```
select * from date_temp where temp between '01-APR-2014' and '01-MAY-2014'; 
```

01-APR-14

14 年 4 月 30 日

# c - 为什么这个数组现在不能正确输出，即使它在早期的测试中工作得很好

> ID：10576421
> 
> 赞同：1
> 
> 时间：2012-05-14T00:49:14.693
> 
> 标签：c, file-io

我正在开发一个程序，其中包含“应该”过滤字符串的代码选择，以防止非字母数字字符（下划线除外）被进一步传递到程序中。当我在主程序中实现它之前对其进行测试时，执行此操作的部分工作正常（如下所示），但是当我现在运行它时，输出只是重复了很多次，直到出现分段错误，我不能我的生活弄清楚是什么导致了这种情况发生，所以如果有人能帮助解决这个问题，我将非常感激，谢谢！同样为了便于查看它在主程序中的实现位置，我截取了它在主代码[http://i.imgur.com/dKLgx.png](http://i.imgur.com/dKLgx.png)中的位置的屏幕截图，并为较长的帖子长度道歉

```
austin@Ruby:~/cprac$ ./words
[hel123_lo] 
```

测试有效的代码

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

int main(void) {
    int i;
    char *p;
    char stg[] = "hel123*^_l!o";
    char output[200] = {0x00};
    int index = 0;

    p = stg;
    while( *p )
    {
    if (isalnum(*p) || *p == '_')
    {
        output[index++] = *p;
    }
    p++;
    }

printf("[%s]\n", output);
return 0;
} 
```

主要代码

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#ifndef max
#define max(a, b) ((a)>(b))? (a) : (b)
#endif

long GetFileSize(FILE *fp){
long fsize = 0;

fseek(fp,0,SEEK_END);
fsize = ftell(fp);
fseek(fp,0,SEEK_SET);//reset stream position!!

return fsize;
}
char *lastline(char *filepath){
FILE *fp;
char buff[4096+1];
int size,i;
long fsize;
if(NULL==(fp=fopen(filepath, "r"))){
    perror("file cannot open at lastline");
    return NULL;
}
fsize= -1L*GetFileSize(fp);
if(size=fseek(fp, max(fsize, -4096L), SEEK_END)){
    perror("cannot seek");
    exit(0);
}
size=fread(buff, sizeof(char), 4096, fp);
fclose(fp);
buff[size] = '\0';
i=size-1;
if(buff[i]=='\n'){
    buff[i] = '\0';
}
while(i >=0 && buff[i] != '\n')
    --i;
++i;
return strdup(&buff[i]);
}

int main(int argc, char *argv[], char *envp[]){
    char *last;
    char *name;
    char field_x[128];
    char field_y[128];
    char field_z[128];
    char field_world[128];
    char field_cause[128];
    char field_killer[128];
    name = getenv("MCEXEC_PLAYERNAME");
    char *filename;
    char *p;
    char *ispvp;
    // m
    int i;
    char *f;
    char output[200] = {0x00};
    int index = 0;
    filename = malloc(sizeof "/home/minecraft/freedonia/playerdata/deathlog-.txt" - 1 +     strlen(name) + 1);
    if (!filename) exit(EXIT_FAILURE);
    snprintf(filename,4096,"/home/minecraft/freedonia/playerdata/deathlog-  %s.txt",name);
    last = lastline(filename);
    if( last != NULL ) {
    printf( "%s\n", last );
    sscanf(last, "%*[^:]:%*[^:]:%*[^:]:%127[^:]:", field_x);
    sscanf(last, "%*[^:]:%*[^:]:%*[^:]:%*[^:]:%127[^:]:", field_y);
    sscanf(last, "%*[^:]:%*[^:]:%*[^:]:%*[^:]:%*[^:]:%127[^:]:", field_z);
    sscanf(last, "%*[^:]:%*[^:]:%*[^:]:%*[^:]:%*[^:]:%*[^:]:%127[^:]:", field_world);
    sscanf(last, "%*[^:]:%*[^:]:%*[^:]:%*[^:]:%*[^:]:%*[^:]:%*[^:]:%127[^:]:", field_cause);
    p = strchr(field_cause, '_');
    printf( "X coord: %s\n", field_x);
    printf( "Y coord: %s\n", field_y);
    printf( "Z coord: %s\n", field_z);
    printf( "World: %s\n", field_world);
    printf( "Cause: %s\n", field_cause);
    while (p != NULL) {
    ispvp = "true";
   // printf ("found at %d\n",p - field_cause + 1);
    sscanf(field_cause, "%*[^_]_%128[^_]_", field_killer);
    printf( "%s\n", field_killer);
    f = field_cause;
    while( *f )
    {
      if (isalnum(*f) || *f == '_')
      {
        output[index++] = *f;
      }
      f++;
    }

    printf("[%s]\n", output);
 //   p = strchr(p + 1, '_');
    }

    }
//    printf("\"%s\"\n", last);
free(last);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:01:16.830

```
 while (p != NULL) {
    ispvp = "true";
    // printf ("found at %d\n",p - field_cause + 1);
    sscanf(field_cause, "%*[^_]_%128[^_]_", field_killer);
    printf( "%s\n", field_killer);
    f = field_cause;
    while( *f )
    {
      if (isalnum(*f) || *f == '_')
      {
        output[index++] = *f;
      }
      f++;
    }

    printf("[%s]\n", output);
    //   p = strchr(p + 1, '_');
    } 
```

P 在这个块中永远不会改变，所以它总是 != NULL。

# sinatra - 如何在没有机架文件的情况下将 Sprockets 与 Sinatra 一起使用？

> ID：10576422
> 
> 赞同：10
> 
> 时间：2012-05-14T00:49:27.813
> 
> 标签：sinatra, rack, sprockets

我正在编写一个库，其中包含通过 Thor 启动的嵌入式 Sinatra 应用程序。我想挂载`Sprockets::Environment`at`/css`和`/js`的实例，并将主应用程序映射到`/`. 这很容易`Rack::URLMap`在`config.ru`文件中使用，但在这种情况下没有文件，因为我正在以编程方式启动 Sinatra 应用程序`Sinatra::Application.run!`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T01:50:05.223

其实，这并不难。您需要做的就是将 的实例分配给`Sprockets::Environment`Sinatra 配置变量并定义一些路径来查找您感兴趣的资产。

这是一个基本示例：

```
require "sass"
require "haml"
require "erubis"
require "sinatra"
require "sprockets"

set :assets, Sprockets::Environment.new

# Configure sprockets
settings.assets.append_path "app/javascripts"
settings.assets.append_path "app/stylesheets"

# For compressed JS and CSS output
require "yui/compressor"
settings.assets.js_compressor  = YUI::JavaScriptCompressor.new
settings.assets.css_compressor = YUI::CssCompressor.new

get "/" do
  haml :index
end

get "/javascripts/:file.js" do
  content_type "application/javascript"
  settings.assets["#{params[:file]}.js"]
end

get "/stylesheets/:file.css" do
  content_type "text/css"
  settings.assets["#{params[:file]}.css"]
end 
```

快乐链轮！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T05:41:44.303

我最终通过编写一个具有`Rack::URLMap`. 它看起来大致是这样的：

```
require "sprockets"
require "sinatra/base"

class SprocketsMiddleware
  attr_reader :app, :prefix, :sprockets

  def initialize(app, prefix)
    @app = app
    @prefix = prefix
    @sprockets = Sprockets::Environment.new

    yield sprockets if block_given?
  end

  def call(env)
    path_info = env["PATH_INFO"]
    if path_info =~ prefix
      env["PATH_INFO"].sub!(prefix, "")
      sprockets.call(env)
    else
      app.call(env)
    end
  ensure
    env["PATH_INFO"] = path_info
  end
end

class App < Sinatra::Base
  use SprocketsMiddleware, %r{/assets} do |env|
    env.append_path "assets/css"
    env.append_path "assets/js"
  end
end

App.run! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T09:40:17.600

以下是我如何将 Sprockets 集成到 Sinatra 中，并使用类似 Rails 的目录布局、帮助程序和 JS 和 CSS 的缩小。

我选择编写一个 Sinatra 扩展。此扩展封装了 sprockets 的配置（路径、缩小、助手），并且可以由应用程序注册。

```
module Sinatra
  module Assets
    extend Sinatra::Extension

    configure do
      set :assets, Sprockets::Environment.new(root).tap { |assets|
        %w(assets vendor/assets).each do |base|
          %w(images javascripts stylesheets).each do |type|
            assets.append_path File.join(base, type)
          end
        end
        if production?
          assets.js_compressor = Closure::Compiler.new
          assets.css_compressor = YUI::CssCompressor.new
          uid = Digest::MD5.hexdigest(File.dirname(__FILE__))[0,8]
          assets.cache = Sprockets::Cache::FileStore.new("/tmp/sinatra-#{uid}")
        else
          assets.cache = nil
        end
      }
    end

    get "/assets/*" do
      env["PATH_INFO"].sub!(%r{^/assets}, "")
      expires Time.now + (365*24*60*60) if settings.production?
      settings.assets.call(env)
    end

    helpers do
      include Sprockets::Helpers

      Sprockets::Helpers.configure do |config|
        config.expand = development?
        config.digest = production?
      end

      def assets_environment
        settings.assets
      end
    end
  end
end 
```

在您的应用程序中使用扩展很简单：

```
class App < Sinatra::Base
  register Sinatra::Assets
  # ...
end 
```

资产可以放置在`assets`或`vendor/assets`中。例如`vendor/assets/jquery.js`可以通过逻辑名称引用，即`http://localhost/assets/jquery.js`.

在上面的示例中，我使用了[sprockets-helpers](https://github.com/petebrowne/sprockets-helpers)，它提供了诸如`javascript_tag`. 上面给出的配置假设在开发中，您希望扩展引用资产所需的资产（导致每个资产有多个标签）。

# jquery - 支持分组选择的两侧多选Jquery插件

> ID：10576425
> 
> 赞同：2
> 
> 时间：2012-05-14T00:50:21.913
> 
> 标签：jquery, jquery-plugins, selection

我正在寻找一个带有两侧的 jquery 多选插件。用户可以选择一个或多个项目并将它们发送到另一侧（选择的一侧）。

但是，我最需要的是允许选择一组项目的能力。

我希望多选插件允许选择一个组或组内的单个项目，然后转移到另一边（选择）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:37:28.933

我试过了，很酷。试试看。

[http://quasipartikel.at/multiselect/](http://quasipartikel.at/multiselect/)

它还支持拖放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T22:18:45.677

This is the best I've found: [link](http://loudev.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:27:19.500

我正在使用这个插件[http://www.senamion.com/blog/jmultiselect2side.html](http://www.senamion.com/blog/jmultiselect2side.html)

# c - 在 C 中的时限内演奏

> ID：10576431
> 
> 赞同：1
> 
> 时间：2012-05-14T00:52:00.790
> 
> 标签：c, time

嗯，正如标题所暗示的，我正在编写一个名为 Morabaraba 的游戏。这将是一场计算机与人类的游戏。我将使用游戏树和 alpha-beta 截止值来生成计算机游戏，并且每个计算机游戏都应该在特定的时间量内进行（比如说 15 秒）。

什么是计算自轮到开始以来经过的秒数并验证它仍然没有超过时间限制而不会使系统过载的最佳方法是什么？众所周知，在生成游戏树时，时间非常宝贵。超过时限将被没收。

我想知道如何使用轻量级算法来做到这一点。我如何验证没有达到每 x 秒的时间限制？这个验证的时间可以忽略不计吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:03:53.430

是的，此验证的时间几乎可以忽略不计，因为您将以离散的时间间隔轮询经过的时间量并将其与开始时间进行比较以了解到目前为止已经过去了多少时间。

我在这里看到两个解决方案：

*   将时间检查嵌入计算 alpha-beta 修剪的同一线程中，并相应地停止它，返回迄今为止找到的最佳解决方案
*   将 AI 代码放在一个单独的线程上，并在时间超过阈值时中断它，方法是确保迄今为止最好的解决方案已经存储在某个地方，以便您可以获取它

第二种方法可能听起来很吓人，但在某些情况下，检查算法本身的经过时间是不切实际的，因为代码不能轻易地从被调用者调整和中断（例如，如果你有一个由许多不同步骤组成的非模块化算法，即不是你的情况）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:56:29.977

首先检查每个“步骤”或每 N 个步骤之后的时间，以某种方式，您认为您至少每秒检查一次。如果您的计算性质使这不切实际，您可以使用诸如 POSIX 计时器之类的东西在给定时间过去后向您的进程发出信号。

# html - 重置列表样式后，css如何强制ul，ol显示数字或光盘。？

> ID：10576433
> 
> 赞同：0
> 
> 时间：2012-05-14T00:52:02.727
> 
> 标签：html, css

我已经用重置 css（可能是正常的）重置了我的 css，但最近我使用了所见即所得插件（textarea 插件），每次我插入 ul 或 ol 列表时，光盘或数字都不会出现，因为 list-style:none; 我在 textarea 周围添加了一个新的 div 并在 css 文件中制作了类似的内容

```
.divsurrondig ul{list-type:disc; border:1px solid red;} 
```

每次我使用小部件插入新列表时都会出现红色，但没有！项目符号出现，你知道如何重置列表样式以显示项目符号/数字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:53:19.497

尝试添加`!important`到规则中。

```
.divsurrondig ul{list-type:disc !important; border:1px solid red;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T01:14:15.187

您在这里遇到的是优先级问题。您应该尝试将更具体的 css 选择器应用于列表，而不是盲目地将 !important 设置为规则。有太多 !important 将使将来的调试变得困难，当您试图弄清楚为什么没有应用这个 css 时。只是为了找出一个很久以前设置的重要插科打诨。

您可以阅读本文以了解有关 css 优先级的一些详细信息... [http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

# mysql - MySQL - 在不同条件下计算两件事

> ID：10576435
> 
> 赞同：22
> 
> 时间：2012-05-14T00:52:15.363
> 
> 标签：mysql, count

我想在一个查询中计算不同条件下的两件事。

```
SELECT COUNT(*) AS count FROM table_name WHERE name = ? 
```

和

```
SELECT COUNT(*) as count FROM table_name WHERE address = ? AND port = ? 
```

我需要对具有特定地址和特定端口的行进行计数，对具有特定名称的行进行单独计数。

我知道我可以做到

```
SELECT (COUNT*) as count FROM table_name WHERE (address = ? AND port = ?) OR name = ? 
```

然而，这是一个单一的计数，我需要将它们分开，以便我可以向用户显示更准确的消息。

我该怎么做呢？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-14T01:08:56.227

简单地说：

```
SELECT 
    SUM(IF(name = ?, 1, 0)) AS name_count,
    SUM(IF(address = ? AND port = ?, 1, 0)) AS addr_count
FROM 
    table_name 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-14T01:00:27.207

```
SELECT SUM(CASE WHEN Name = ? THEN 1 ELSE 0 END) as name_match
       , SUM(CASE WHEN Address = ? AND Port = ? THEN 1 ELSE 0 END) as address_match
FROM table_name
WHERE (address = ? AND port = ?) OR name = ? 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-04T10:56:36.737

```
SELECT 
  COUNT( CASE WHEN n1 = 'J' THEN 1 END ) AS t1,
  COUNT( CASE WHEN n2 = 'C' THEN 1 END ) AS t2,
  COUNT( CASE WHEN n3 = 'K' THEN 1 END ) AS t3 
FROM test 
```

使用`COUNT(CASE...)`，您可以从单个表中获取两列的计数，即使两者的条件不同（例如：从 n1 列获取 J 的计数，从 n2 列获取 C 的计数，等等..）

表：测试

```
+----+----+----+----+
| id | n1 | n2 | n3 |
|----+----+----+----+
|  1 | J  | C  | K  |
|----+----+----+----+
|  1 | J  | C  | F  |
|----+----+----+----+
|  1 | J  | K  | C  |
|----+----+----+----+
|  1 | K  | K  | C  |
|----+----+----+----+ 
```

结果：

```
+----+----+----+
| t1 | t2 | t3 |
|----+----+----+
|  3 | 2  | 1  |
|----+----+----+ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T01:00:34.980

做一个*Union*可能是最简单的：

```
SELECT COUNT(*) AS count FROM table_name WHERE name = ? 
    GROUP BY name
UNION ALL
SELECT COUNT(*) as count FROM table_name WHERE address = ? AND port = ?
    GROUP BY address, port 
```

# unit-testing - 模拟蛋糕请求

> ID：10576445
> 
> 赞同：0
> 
> 时间：2012-05-14T00:53:50.860
> 
> 标签：unit-testing, cakephp, mocking, phpunit

我正在为控制器功能开发测试，基本上它只是根据蛋糕请求起作用，无论如何要在测试功能内模拟蛋糕请求，以便每当控制器尝试访问 $this->request->data 它返回数据我在测试用例中设置了吗？如果有办法请告诉我如何。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:52:02.077

该[文档](http://book.cakephp.org/2.0/en/development/testing.html#testing-controllers)包含如何设置请求数据的示例。快速参考：

```
public function testIndexPostData() {
    $data = array(
        'Article' => array(
            'user_id' => 1,
            'published' => 1,
            'slug' => 'new-article',
            'title' => 'New Article',
            'body' => 'New Body'
        )
    );
    $result = $this->testAction(
        '/articles/index',
        array('data' => $data, 'method' => 'post')
    );
    debug($result);
} 
```

# xslt - Remove whitespace from HTML generated using XSL

> ID：10576448
> 
> 赞同：3
> 
> 时间：2012-05-14T00:54:13.540
> 
> 标签：xslt, xhtml, xslt-2.0, removing-whitespace

## Background

Maintain readable XSL source code while generating HTML without excessive breaks that introduce spaces between sentences and their terminating punctuation. From [Rethinking XSLT](http://www.wilmott.ca/rxslt/rxslt.html):

> White space in XSLT stylesheets is especially problematic because it serves two purposes: (1) for formatting the XSLT stylesheet itself; and (2) for specifying where whitespace should go in the output of XSLT-processed XML data.

## Problem

An XSL template contains the following code:

```
 <xsl:if test="@min-time &lt; @max-time">
    for
    <xsl:value-of select="@min-time" />
    to
    <xsl:value-of select="@max-time" />
    minutes
  </xsl:if>

  <xsl:if test="@setting">
    on <xsl:value-of select="@setting" /> heat
  </xsl:if>
  . 
```

This, for example, generates the following output (with whitespace exactly as shown):

```
 for
    2
    to
    3
    minutes
  . 
```

All major browsers produce:

```
for 2 to 3 minutes . 
```

Nearly flawless, except for the space between the word `minutes` and the punctuation. The desired output is:

```
for 2 to 3 minutes. 
```

It might be possible to eliminate the space by removing the indentation and newlines within the XSL template, but that means having ugly XSL source code.

## Workaround

Initially the desired output was wrapped in a variable and then written out as follows:

```
<xsl:value-of select="normalize-space($step)" />. 
```

This worked until I tried to wrap `<span>` elements into the variable. The `<span>` elements never appeared within the generated HTML code. Nor is the following code correct:

```
<xsl:copy-of select="normalize-space($step)" />. 
```

## Technical Details

The stylesheet already uses:

```
<xsl:strip-space elements="*" />
<xsl:output indent="no" ... /> 
```

## Related

*   [Storing html tags within an xsl variable](https://stackoverflow.com/questions/9907302/storing-html-tags-within-an-xsl-varable)

## Question

How do you tell the XSLT processor to eliminate that space?

Thank you!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T02:58:28.283

Instead of using `copy-of` you can apply the identity template with an additional template that trims the spaces from the text nodes. You only create one variable like in your first workaround.

You call:

```
<li><xsl:apply-templates select="$step" mode="nospace" />.</li> 
```

The templates:

```
<xsl:template match="text()" mode="nospace" priority="1" >
    <xsl:value-of select="normalize-space(.)" />
</xsl:template>

<xsl:template match="node() | @*" mode="nospace">
    <xsl:copy>
        <xsl:apply-templates select="node() | @*" mode="nospace" />
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T03:46:54.780

**I. This transformation:**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="t[@max-time > @min-time]">
  <span>
    <xsl:value-of select=
      "concat('for ', @min-time, ' to ', @max-time, ' minutes')"/>
  </span>
  <xsl:apply-templates select="@setting"/>
  <xsl:text>.</xsl:text>
 </xsl:template>

 <xsl:template match="@setting">
  <span>
    <xsl:value-of select="concat(' on ', ., ' heat')"/>
  </span>
 </xsl:template>
</xsl:stylesheet> 
```

**when applied on the following XML document** (none has been presented!):

```
<t min-time="2" max-time="3" setting="moderate"/> 
```

**produces the wanted, correct result:**

```
<span>for 2 to 3 minutes</span>
<span> on moderate heat</span>. 
```

**and it is displayed by the browser as**:

for 2 to 3 minutes on moderate heat.

**When the same transformation is applied on this XML document**:

```
<t min-time="2" max-time="3"/> 
```

**again the correct, wanted result is produced**:

```
<span>for 2 to 3 minutes</span>. 
```

**and it is displayed by the browser as**:

for 2 to 3 minutes.

* * *

**II. Layout (visual) solution**:

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my" xmlns:gen="gen:gen" xmlns:gen-attr="gen:gen-attr"
 exclude-result-prefixes="my gen">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <my:layout>
  <span>for <gen-attr:min-time/> to <gen-attr:max-time/> minutes</span>
  <gen-attr:setting><span> on <gen:current/> heat</span></gen-attr:setting>
  <gen:literal>.</gen:literal>
 </my:layout>

 <xsl:variable name="vLayout" select="document('')/*/my:layout/*"/>
 <xsl:variable name="vDoc" select="/"/>

 <xsl:template match="node()|@*">
   <xsl:param name="pCurrent"/>
     <xsl:copy>
       <xsl:apply-templates select="node()|@*">
       <xsl:with-param name="pCurrent" select="$pCurrent"/>
       </xsl:apply-templates>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:apply-templates select="$vLayout">
   <xsl:with-param name="pCurrent" select="$vDoc/*"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="gen-attr:*">
  <xsl:param name="pCurrent"/>
  <xsl:value-of select="$pCurrent/@*[name() = local-name(current())]"/>
 </xsl:template>

 <xsl:template match="gen-attr:setting">
  <xsl:param name="pCurrent"/>
  <xsl:variable name="vnextCurrent" select=
   "$pCurrent/@*[name() = local-name(current())]"/>
  <xsl:apply-templates select="node()[$vnextCurrent]">
    <xsl:with-param name="pCurrent" select="$vnextCurrent"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="gen:current">
  <xsl:param name="pCurrent"/>
   <xsl:value-of select="$pCurrent"/>
 </xsl:template>

 <xsl:template match="gen:literal">
  <xsl:apply-templates/>
 </xsl:template>
</xsl:stylesheet> 
```

This transformation gives us an idea how to make a visual (skeletal) representation of the wanted output and use it to "populate" it with the wanted data from the source XML document.

The result is identical with that of the first solution. If this transformation is run "as-is" it will produce a lot of namespaces -- they are harmless and will not be produced if the layout is in a separate XML file.

# python - 似乎无法在 Python 3 中获取 POST 请求

> ID：10576449
> 
> 赞同：1
> 
> 时间：2012-05-14T00:54:20.867
> 
> 标签：python, http, post, python-3.x, urllib

我正在尝试编写一个脚本，允许我将图像上传到[BayImg](http://bayimg.com/)，但我似乎无法让它正常工作。据我所知，我没有得到任何结果。我不知道是不是提交数据还是什么，但是当我打印响应时，我得到的是主页的 URL，而不是你上传图片时得到的页面。如果我使用 Python 2.x，我会使用 Mechanize。但是，它不适用于 Py3k，所以我尝试使用 urllib。我正在使用 Python 3.2.3。这是代码：

```
 #!/usr/bin/python3

    from urllib.parse import urlencode
    from urllib.request import Request, urlopen

    image = "/test.png"
    removal = "remove"
    tags = "python script test image"
    url = "http://bayimg.com/"
    values = {"code" : removal,
              "tags" : tags,
              "file" : image}

    data = urlencode(values).encode("utf-8")
    req = Request(url, data)
    response = urlopen(req)
    the_page = response.read() 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:50:50.287

1.  你需要`POST`数据
2.  您需要知道正确的 url，检查 html 源代码，在这种情况下：`http://upload.bayimg.com/upload`
3.  您需要读取文件的内容，而不是只传递文件名

您可能希望使用[Requests](http://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)轻松完成此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-10T08:00:57.590

我遇到了这篇文章，并想用下面的解决方案来改进它。所以这是一个用 Python3 编写的示例类，它使用 urllib 实现了 POST 方法。

```
import urllib.request
import json

from urllib.parse import urljoin
from urllib.error import URLError
from urllib.error import HTTPError

class SampleLogin():

    def __init__(self, environment, username, password):
        self.environment = environment
        # Sample environment value can be: http://example.com
        self.username = username
        self.password = password

    def login(self):
        sessionUrl = urljoin(self.environment,'/path/to/resource/you/post/to')
        reqBody = {'username' : self.username, 'password' : self.password}
        # If you need encoding into JSON, as per http://stackoverflow.com/questions/25491541/python3-json-post-request-without-requests-library
        data = json.dumps(reqBody).encode('utf-8')

        headers = {}
        # Input all the needed headers below
        headers['User-Agent'] = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.101 Safari/537.36"
        headers['Accept'] = "application/json"
        headers['Content-type'] = "application/json"

        req = urllib.request.Request(sessionUrl, data, headers)

        try: 
            response = urllib.request.urlopen(req)
            return response
        # Then handle exceptions as you like.
        except HTTPError as httperror:
            return httperror
        except URLError as urlerror:
            return urlerror
        except:
            logging.error('Login Error') 
```

# javascript - 单击毯子时使 CSS 弹出窗口消失（例如：Facebook 照片）

> ID：10576452
> 
> 赞同：0
> 
> 时间：2012-05-14T00:54:33.503
> 
> 标签：javascript, html, css, popup

我有一个 css 弹出 div，当它通过 onClick 加载时，它还会带来一层透明度，就像 Facebook 在您查看照片时所做的那样

当我点击毯子时，如何让弹出的 div 关闭？

这是代码

'

```
<center><div id="blanket" style="display:none;">
</div>

<table width="1000" border="0">    
  <tr>

 <td>  
<div id="mainAdminCP">

<div class="editRecipe" >
<a href="#" onclick="popup('popUpAdminEditRecipe');return false;"><h2>Edit Recipe</h2></a> 
</div>
<div id="popUpAdminEditRecipe" style="display:none;" align="center"> 
<br />
<br />
<form id="editRecipe">
<fieldset id="inputs">
    <input id="username" type="text" placeholder="Please insert the name of the recipe" autofocus required>   
    <br />
    <br />
    <input id="add" type="text" placeholder="Recipe Name" required>
    <input id="add" type="text" placeholder="Recipe Ingredients" required>
    <input id="add" type="text" placeholder="Recipe Instructions" required>
    <input id="add" type="text" placeholder="Recipe Image" required>
</fieldset>
<fieldset id="actions">
    <input type="submit" id="submit" value="Save Changes">
    <input type="submit" id="submit" onClick="popup('popUpAdminEditRecipe')" value="Close">
</fieldset>
</form>
</div>   

<div class="editCoins"> 
<a href="#" onclick="popup('popUpAdminEditCoins');return false;"><h2>Edit Coins</h2></a> 
</div>
<div id="popUpAdminEditCoins" style="display:none;" align="center"> 
<br />
<br />
<form id="login">
<fieldset id="inputs">
    <input id="username" type="text" placeholder="Please insert the Username of the User" autofocus required>   
    <input id="add" type="text" placeholder="Add Coins" required>
    <input id="add" type="text" placeholder="Subtract Coins" required>
</fieldset>
<fieldset id="actions">
    <input type="submit" id="submit" value="Submit">
    <input type="submit" id="submit" onClick="popup('popUpAdminEditCoins')" value="Close">
</fieldset> 
```

'

下面是指向页面本身的链接，以获得我正在寻找的内容的清晰示例。

[http://teknologenie.com/fruitforest/admincp.php](http://teknologenie.com/fruitforest/admincp.php)

我试过把 `<a href="#" onClick="popup('popUpAdminEditUser')" > </a>` 毯子里的 div 放在里面，但什么也没有。只是把一切都搞砸了。

**编辑：** 另外，如果您访问链接并单击文本，则整个 div 不会直接位于屏幕中间，我需要它。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:07:48.380

与其在毯子 div 中放置链接，不如在毯子 div 本身上设置一个 onclick 函数：

```
<div id="blanket" onclick="closePopup()" style="height: 681px; display: block;"></div> 
```

然后函数 closePopup 应该将 display none 设置为弹出窗口和毯子：

```
function closePopup() { 
    document.getElementById('blanket').style.display = 'none';               
    document.getElementById('popUpAdminEditCoins').style.display = 'none';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T01:22:45.570

我在这里给你写了一个例子：http: [//jsfiddle.net/KXK6E/2/](http://jsfiddle.net/KXK6E/2/)

最好在 javascript 中而不是在 HTML 中绑定事件。

```
document.getElementById("blanket").onclick = function(e){
    document.getElementById("popup").style.display = "none";
    e.target.style.display = "none";
};

document.getElementById("trigger").onclick = function(){ 
    document.getElementById("blanket").style.display = "block";
    document.getElementById("popup").style.display = "block";
} 
```

​</p>

# c++ - 堆栈溢出与段错误

> ID：10576456
> 
> 赞同：1
> 
> 时间：2012-05-14T00:55:24.953
> 
> 标签：c++, gdb, segmentation-fault, stack-overflow

我遇到了一个非常奇怪的段错误，我今天最终修复了它。看来问题是我在堆栈上分配了一个非常大的数组，这导致了问题。

我的问题是，您是否总是在堆栈溢出时收到 SEGV 信号？是否有任何特殊信号可以提醒存在堆栈溢出问题？

我正在使用 g++ 和 gdb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:58:29.180

Unix信号意义上的“信号”显然是SEGV。:) 如果你的意思是像使用诊断工具这样的信号，它会告诉你什么时候发生了不好的事情，你可以尝试 valgrind，但实际上，你的系统只是告诉你。并且在编译时知道堆栈是否会溢出是不可能的，部分原因是堆栈大小限制是一个运行时参数，而且我想如果你知道它会是什么先验，你仍然会遇到类似的东西停机问题。

# r - 通过R中的循环乘积

> ID：10576463
> 
> 赞同：1
> 
> 时间：2012-05-14T00:57:32.777
> 
> 标签：r, math, product, multiplication

我想将`fact`向量中的所有元素相乘，即：

```
final_prod = 0.01 * 0.05 * 0.02 
```

这就是我循环执行的方式。

```
fact <- c(0.01,0.05,0.02)

final_prod <- 1;
for (i in 1:range(fact)){
   all_prod <- all_prod * fact[i];
}

print(final_prod) 
```

但它给出的最终产品是错误的。它应该是 0.00001 而不是 0.01。

我上面的方法有什么问题？

我知道有 R'ish 方式。但是我想循环执行它的原因是因为涉及更复杂的计算。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T01:03:09.613

1.  而不是`range`，你想要`1:length(fact)`。

2.  `final_prod`您正在变量和之间切换`all_prod`，这样`all_prod`一开始就没有定义。

3.  你为什么不想用 R 的方式来做这件事，这需要更少的代码？无论涉及的计算多么复杂，它都可能是可能的（您可以尝试在此处解释），但为此您只需使用以下函数`prod`：

    ```
    final_prod = prod(fact) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T02:29:32.890

该`range`函数返回一个二元向量，“:”二元运算符只取第一个。所以你得到 1:0.01 这只是 1，然后是一个单项产品事实 [1]。你可以用，

```
for (i in fact) {all_prod <- all_prod * i } 
```

...尽管大卫罗宾逊已经向您展示了如何`prod`更经济地使用：

# javascript - 加载当前网页后加载新网页

> ID：10576468
> 
> 赞同：0
> 
> 时间：2012-05-14T00:58:46.340
> 
> 标签：javascript

`目标：我有一个文本文件，其中包含由 '\n' 分隔的 URL 列表。我的目标是将它们传递到一个数组中，并在页面加载后按顺序加载它们。

我的代码：

```
 <html>
    <head> </head>
    <script type="text/javascript">
        var allText =[];
        var allTextLines = [];
    var Lines = [];
    var txtFile = new XMLHttpRequest();

    txtFile.open("GET", "URL.txt", true);
    var i=0;
    txtFile.onreadystatechange = function URL()
    {
        if (txtFile.readyState == 4)
        {
            allText = txtFile.responseText;
            allTextLines = allText.split(/\r\n|\n/);
            document.write(allText);
            window.location.href=allTextLines[i++];
            window.onload=setTimeout(URL,1000);
        }
    }
        txtFile.send(null);
  </script>
  </html> 
```

我试过for循环。但是，浏览器一直卡在处理中。
关于如何做到这一点的任何见解？
任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:46:44.330

一旦您使用`window.location.href`您编写的其余 javascript 更改位置，您将被忽略 - 并且新位置中的 javascript 将运行（如果有）。如果您想这样做，您需要使用 an`<iframe>`以便您可以控制位置而不会失去对窗口的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T01:51:34.587

如果新的 url 在同一个域中，您可以使用新的 html5 pushState 方法。[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#Example](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#Example)

# c - Visual Studio 2010 的多精度

> ID：10576470
> 
> 赞同：3
> 
> 时间：2012-05-14T01:00:02.930
> 
> 标签：c, visual-studio-2010, gmp, arbitrary-precision, floating-point-precision

任何人都可以建议一个预构建的 Windows 二进制文件附带的多精度库。我需要将它与现有的 Visual Studio 2010 项目一起使用（或者我可以获得用于 GMP 的 win7 64bit 的预构建二进制文件）。

我尝试过编译 GMP 和 MPIR 以及其他项目但都失败了，它们都没有处理各种令人沮丧和模棱两可的错误。不幸的是，时间压力越来越大，如果我可以构建/下载库，我需要实现的东西很简单。

我需要浮点支持，所以一个 bigint 库是不够的。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:13:00.067

你最好的选择是 MPIR。我已经使用 VS 2010 构建了 MPIR 和 MPFR，所以这是可能的。我的 Windows 系统目前已关闭，但这里有一些我做的笔记。

1.  下载 MPIR，解压缩并将目录重命名为“mpir” - 删除任何版本号。

2.  查找并遵循记录安装 VSYASM 的自述文件。

3.  使用 Python 3.x 运行“mpir_config.py”以创建项目文件。

4.  将并行构建的数量更改为 1。

5.  选择一个特定的目标（比如“lib_mpir_k8”），它应该构建。

MPIR 还包括几个批处理文件，因此您可以使用 configure.bat 和 make.bat 进行命令行构建。我发现它比 GUI 构建更容易。

IIRC，为了构建 MPFR，我不得不修改一些 Include 目录，但我的笔记有点太神秘了。

MPIR 邮件列表也很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T01:14:37.527

[http://www.cs.nyu.edu/exact/core/gmp/](http://www.cs.nyu.edu/exact/core/gmp/)有以下 dll 包：

Visual C++ 的动态 GMP 库和头文件：[gmp-dynamic-vc-4.1.2.zip](http://www.cs.nyu.edu/exact/core/gmp/gmp-dynamic-vc-4.1.2.zip)

如果您想在某个时候尝试使用不同的版本重新编译，它们也有源项目文件。

# windows - cuda nvcc 交叉编译器

> ID：10576475
> 
> 赞同：1
> 
> 时间：2012-05-14T01:00:45.903
> 
> 标签：windows, cuda, cross-compiling, nvcc

我想在 mac 上编译 CUDA 代码，但让它在 Windows 上可执行。

有没有办法设置 nvcc CUDA 交叉编译器？

问题是由于旅行，我的桌面窗口将有一段时间无法访问，但是我不想浪费时间等待我回来编译代码。如果我必须等待，那么调试代码并确保它编译正确等等都是浪费时间。不过，我的 mac 没有配备支持 cuda 的硬件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T11:27:30.047

简短的回答是，不，这是不可能的。

这是一个常见的误解，但`nvcc`实际上并不是编译器。它是一个*编译器驱动程序*，它严重依赖主机 C++ 编译器来引导主机和设备代码的编译。要为 Windows 编译 CUDA，您*必须*使用 Microsoft C++ 编译器。该编译器无法在 Linux 或 OS X 上运行，因此无法交叉编译到 Windows 目标，除非您在 Windows 主机上进行编译（例如，可以进行 32/64 位交叉编译）。

其他两个 CUDA 平台同样不兼容，尽管需要 gcc 进行编译，因为后端不同（Linux 是 elf 平台，OS X 是 mach 平台），所以即使 OS X 和 Linux 之间的交叉编译也是不可能的。

如果在 OS X 平台上编译是目标，您有两个选择

1.  安装 OS X 工具包。即使您的硬件没有兼容的 GPU，您仍然可以安装工具包并编译代码。
2.  在虚拟 Windows 安装（或物理训练营安装）中安装 Windows 工具包和 Visual Studio，并在 Mac 上的 Windows 中编译代码。同样，您不需要 NVIDIA 兼容的硬件来执行此操作。

如果您想在没有 CUDA GPU 的情况下运行代码，您可以研究非商业 ( [GPU Ocelot](http://code.google.com/p/gpuocelot/) ) 和商业 ( [PGI CUDA-x86](http://www.pgroup.com/resources/cuda-x86.htm) ) 选项。

# php - PhP - 用户名和密码验证有效，但是，清除其他行

> ID：10576480
> 
> 赞同：1
> 
> 时间：2012-05-14T01:02:04.260
> 
> 标签：php, password-protection

我有一个带有用户名和密码登录表单的html页面。当人们输入正确的密码时，它会将他们带到带有账单的 php 页面。如果密码不正确，将显示错误信息，然后退出程序。我让登录功能正常工作。但是，它也影响了我的其他程序。现在每次我尝试在项目/金额行中写一些东西时，它也会显示错误消息并退出程序。我知道这与 $numresult>0 条件有关。当我取消该条件时，我的金额/项目行有效，但登录页面还允许在用户名/密码中输入空白条目以登录。知道如何确保人们必须输入正确的密码（不是空白条目）同时登录，让我在第二页中的项目/金额行表现正常？我的代码如下。抱歉有点长。

```
</head>

<body style="font-family: Arial, Helvetica, sans-serif; color: black;" onload=>
<h1>My Bills</h1>
<form method=post>

<?php
//*************************************************
//Connect to Database
//*************************************************

//*************************************************
//Verify password and username
//*************************************************
$password = $_POST['password']; //retrieve variables for password and userId
$userid = $_POST['userid'];

$query  = "SELECT * FROM valid_logon WHERE userid = '$userid' AND
           password='$password'";  //get query from database

$result = mysql_query($query);

$numresults = mysql_num_rows($result); //get row number
$row = mysql_fetch_array($result); //get array into variable
$dbuserid = $row['userid'];
$dbpassword = $row['password'];

if ($numresults>0)
{
   if ($userid == $dbuserid && $password == $dbpassword)
   {
       process();
   }   
}else{
   err_msg();
}

//*************************************************
//Error message.
//*************************************************
function err_msg()
{
   print "The username and/or password you have entered are invalid.";
   print "</body>";
   print"</html>";
   exit;
}

//*************************************************
//Write out records with data if they exist.
//*************************************************
function process()
{
  print "<table>";
  print "<tr><th>Item</th><th>Amount</th></tr>";

  $action = $_POST['action'];

  if ($action == 'update')
  {
$write_ctr = 1;

// Delete all rows in the table

$query  = "DELETE FROM n1417_expenses ";

$result = mysql_query($query);

if (mysql_error()) {
    echo("<br>MySQL Error - Cannot delete from table: ".mysql_error());
    echo("<br>SQL Statement: ".$query);
}

// Loop through table and insert values into the database

while (true)
{
    $item_name = 'item'."$write_ctr";
    $item_value = $_POST[$item_name];

    $amount_name = 'amount'."$write_ctr";
    $amount_value = $_POST[$amount_name];

    if (empty($item_value)) 
    {
        break;
    }

    // Insert an item to the table
    if(!is_numeric($amount_value))
    { 
        print "<font color=red>I'm sorry, amount \"".$amount_value."\" is not a valid number.</font><br>\n";
    }else{

        $query  = "INSERT INTO n1417_expenses (item, amount) 
                  VALUES('".$item_value."','".$amount_value."') ";

        $result = mysql_query($query);
    }

    if (mysql_error()) 
    {
        echo("<br>MySQL Error - Cannot insert a row into table: ".mysql_error());
        echo("<br>SQL Statement: ".$query);
    }

    $write_ctr++;
}

 }

//*************************************************
//Now Select from table and Display
//*************************************************

$err_cnt = 0;
$read_ctr = 1;

$query  = "SELECT item, amount FROM n1417_expenses ";

$result = mysql_query($query);

if (mysql_error()) {
echo("<br>MySQL Error- Cannot select from table: ".mysql_error());
echo("<br>SQL Statement: ".$query);
}

if (!empty($result))
{
$rowresults = mysql_num_rows($result);

if ($rowresults > 0)
{
    for ($read_ctr=1; $read_ctr<=$rowresults; $read_ctr++)
    {
        $row = mysql_fetch_array($result);

        $item_value = $row['item'];
        $item_name = 'item'."$read_ctr";

        $amount_value = $row['amount'];
        $amount_name = 'amount'."$read_ctr";

        print "<tr>";
        print "<td><input type=text name=$item_name value='$item_value'></td>\n";
        print "<td><input type=text name=$amount_name value='$amount_value'></td>\n";
        print "<td>";
        print "</tr>";

        $total_amt = $total_amt + $amount_value;

    }
}
}

//*************************************************
//Now write the blank lines
//*************************************************

for ($i = $read_ctr; $i < $read_ctr + 2; $i++)
{

    $item_name = 'item'."$i";
$amount_name = 'amount'."$i";

print '<tr>';
print "<td><input type=text name=$item_name value=''></td>\n";
print "<td><input type=text name=$amount_name value=''></td>\n";
print '</tr>';
}

print "</table>";
print "<br>Total Bills: $total_amt";

}
?>

<br><input type=submit value=Submit>
<br<br>

<!--  Hidden Action Field -->
<input type=hidden name=action value=update>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:48:50.513

要回答发布的问题，您的问题似乎是当您的用户提交表单时再次检查用户名和密码。因为这些字段不存在，所以查询会找到零行，从而触发您的错误消息。

有很多方法可以解决您的问题，其中一种方法是使用[Session](http://www.php.net/manual/en/session.examples.basic.php)来记住用户已登录。这可以通过更改密码检查来实现，如下所示：

```
session_start();

if (!isset($_SESSION['logged_in']) || !$_SESSION['logged_in']) 
{

    $password = $_POST['password']; //retrieve variables for password and userId
    $userid = $_POST['userid'];

    $query  = "SELECT * FROM valid_logon WHERE userid = '".mysql_real_escape_string($userid)."' AND
               password='".mysql_real_escape_string($password)."'";  //get query from database

    $result = mysql_query($query);

    $numresults = mysql_num_rows($result); //get row number
    $row = mysql_fetch_array($result); //get array into variable
    $dbuserid = $row['userid'];
    $dbpassword = $row['password'];

    if ($numresults>0)
    {
       if ($userid == $dbuserid && $password == $dbpassword)
       {
           $_SESSION['logged_in'] = TRUE;
           process();
       }   
    }else{
       err_msg();
    }
} 
```

我使代码尽可能地与原始代码相似，但我将回应上面关于保护 SQL 调用的必要性的评论。如果可能的话，看看使用[PDO](http://www.php.net/pdo)，或者至少像上面那样开始使用[mysql_real_escape_string 。](http://php.net/manual/en/function.mysql-real-escape-string.php)

# firefox - 从标记字符串中将 XUL 元素附加到 DOM 中

> ID：10576481
> 
> 赞同：1
> 
> 时间：2012-05-14T01:02:42.753
> 
> 标签：firefox, dom, firefox-addon, xul

我正在使用 JavaScript 和 XUL 编写一个 Firefox 扩展。我的部分代码需要能够采用一些 XUL 标记并将其动态附加到现有容器元素中。所以基本上我需要 appendChild() 但使用文本字符串而不是 Node 对象。为此，我尝试了[此](https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro)问题中列出的方法。不幸的是，这似乎不起作用。似乎 div.childNodes 返回了一个空的 nodeList，我什至无法将其附加到容器中。错误是

```
Error: Could not convert JavaScript argument arg 0 [nsIDOMXULElement.appendChild] 
```

我不太确定我做错了什么。有没有办法让这个工作，或者一些替代方法来动态设置容器的标记？

注意：容器元素的类型是`richlistbox`.

```
 function updateContainerData(containerName){
      try{
        var resultsArray = DB.queryAsync("SELECT nodeData FROM waffleapps_privateurl");

        container = document.getElementById(containerName);

        for (var i = 0; i < resultsArray.length; i++) {

            /*
            // This works - appending an actual Node ( duplicate from a template)
            template = document.getElementById("list-item-template");
            dupNode = template.cloneNode(true);
            dupNode.setAttribute("hidden", false);
            container.appendChild(dupNode);
            */

            // This doesn't work
            div = document.createElement("div");
            //var s = '<li>text</li>';
var s = "<richlistitem id ='list-item-template'><hbox><checkbox label='' checked='true'/>  <description>DESCRIPTION</description><textbox>test</textbox><textbox></textbox></hbox></richlistitem>";

            div.innerHTML = s;
            var elements = div.childNodes;

            container.appendChild(elements); // error

        }
        }
        catch(err){
          alert( "Error: " + err.message);
        }
    } 
```

通过使用以下代码，我得到了更进一步的信息。现在我可以在容器中插入 HTML 元素，但似乎 XUL 元素没有正确解析 - 复选框和文本框没有出现。我不确定如何更改它以正确解析 HTML 和 XUL 标记。

```
 var s = "<richlistitem id ='list-item-template'><hbox><checkbox label='' checked='true'/>  <description>DESCRIPTION</description><textbox>test</textbox><textbox></textbox></hbox></richlistitem>";
    var dp = new DOMParser();
    container.appendChild(dp.parseFromString(s, "text/xml").documentElement); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:46:33.493

您需要为“元素”节点列表中的每个元素执行 appendChild（假设有多个）。

另请注意：列表元素应具有父 ol 或 ul 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:55:04.310

我终于想出了如何正确解析和附加 XUL 标记字符串。我能够`parseFromString`从新的`DOMParser()`. 我必须确保元素的标记指定了命名空间 ( `xmlns`)，以便解析器知道它是 XUL 标记。

下面的代码显示了一个完整的示例。

测试.js：

```
test = function(){
    alert("testing");

    container = document.getElementById("testing");
    var dp = new DOMParser();

    // must specify namespace
    var s = "<textbox xmlns='http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul' value='test' size='20'></textbox>";

    element = dp.parseFromString(s, "text/xml").documentElement;

    container.appendChild(element);

    document.getElementById("testing");
} 
```

测试.xul：

```
<?xml version="1.0"?>

<?xml-stylesheet type="text/css" href="chrome://global/skin/" ?>
<?xml-stylesheet type="text/css"
  href="chrome://testextensionname/skin/test.css" ?>

<!DOCTYPE window SYSTEM
  "chrome://testextensionname/locale/test.dtd">

<window xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" 
        id="testWindow"
        orient="vertical" title="TEST" statictitle="TEST"
        width="50" height="50;" screenX="10" screenY="10"
       >
<script type="application/x-javascript" src="chrome://testextensionname/content/test.js" />

<hbox id="testing">
<button label="Go" oncommand="test()"/>
<textbox value='test' size='20'></textbox>
</hbox>

</window> 
```

# css - 2 个 div，100% 减去 250px 宽度可能吗？

> ID：10576485
> 
> 赞同：3
> 
> 时间：2012-05-14T01:03:42.827
> 
> 标签：css

我有 2 个具有全高的 div，一个在左侧，一个在右侧，右侧的一个必须为 250px 宽度，左侧的一个必须填充剩余区域（流体）。

可以做到吗？如果只有宽度：100% - 250px；工作吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:12:27.863

只需将 250px 的一个浮动到右侧，然后将右边距扩展为 250px 的那个。

```
<div class="right">
    Some right content
</div>
<div class="main">
    Some main content
</div> 
```

```
.right {
    width: 250px;
    float: right;
}
.main {
    margin-right: 250px;
}​ 
```

[请参阅 jsFiddle。](http://jsfiddle.net/jAf9u/)

如果一个比另一个大，那不会将它们的高度扩大到相同，但我认为你已经涵盖了，不是吗？

# php - 在 PHP 中实现基于 DOM 的 Tree 数据结构。节点列表如何工作？

> ID：10576492
> 
> 赞同：1
> 
> 时间：2012-05-14T01:06:36.167
> 
> 标签：php, dom, tree, implementation, nodes

我目前正在尝试基于 DOM 在 PHP 中松散地实现树状数据结构。到目前为止，我已经定义了两个接口，Node 和 NodeList。以下是一些简化版本：

```
interface Node {

    public function hasChildNodes();

    public function childNodes();

    public function parentNode();

    public function hasParentNode();

    public function nodeValue();

    public function appendChild($name, Node $node);

    public function removeChild($name);
} 
```

和

```
interface NodeList {

    public function size();

    public function item(); 
} 
```

这是它如何工作的一个简单示例：

```
$node = new Node($someValue);
$node->appendChild(new Node($anotherValue));
$nodelist = $node->childNodes(); 
```

但是，有一个问题。我之所以想将接口基于 PHP 的 DOM 接口，是因为我想确保 NodeLists 具有简化的接口，以防止在节点本身不知情的情况下更改树结构。因此，所有子节点的添加或删除都在节点上执行，确保存储的数据结构不会因操作节点列表而出错。

那么当 Node::childNodes() 被调用时，它应该如何在它的实现中创建一个 NodeList 呢？我搜索了PHP文档以找出答案。

没有用于从 DOMNodeList 中添加/删除节点的公共接口。那么 DOMNode 如何将子节点附加/删除到它自己的 childNodes 属性？DOMNode 无法访问受保护的属性/方法，除非它扩展了 DOMNodeList。如果 DOMNode 实际上包含 DOMNodeList 简单引用的子节点数组，那么 DOMNodeList 是如何访问它的呢？没有添加对父 DOMNode 的引用的方法。即使存在此引用，也无法通过 DOMNode 的接口访问所述子节点数组。

所以我想这个问题可以总结如下：

**当似乎没有接口可以访问时，NodeLists 和 Nodes 如何访问彼此的内部存储/引用？**

我希望我刚刚错过了一些明显的东西，因为看起来这应该很容易弄清楚。如果有人可以将我指向某个我可以看到有效实现的地方，那也足以作为答案。

# html - 来自 bytearray 的图像在 IE8 中不完整

> ID：10576496
> 
> 赞同：1
> 
> 时间：2012-05-14T01:07:41.093
> 
> 标签：html, internet-explorer, jsp, data-uri

Java6，Struts2.2.3.1 - 我正在将字节数组转换为图像（jpg）。请参阅下面的链接，如果您在 IE 中打开此图像，则图像不完整，而在 Firefox 或 Chrome 中则可以正常打开

[http://jsbin.com/aheliy/2](http://jsbin.com/aheliy/2)

**Java**
我对字节数组进行编码并使用[MiGBase64](http://sourceforge.net/projects/migbase64/)转换为字符串- 其中 this.bean.imageByteArrayString 指的是表单 bean

```
this.bean.setImageByteArrayString(new Base64().encodeToString(imageInByteArr, false)); 
```

**JSP**

```
<img src="data:image/jpg;base64,<c:out value='${bean.imageByteArrayString}'/>" /> 
```

不知道为什么这在 IE8 中不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:35:41.697

IE8 对数据 URI 方案有 32KB 的限制。另请参阅[有关该主题的维基百科文章](http://en.wikipedia.org/wiki/Data_URI_scheme)。

我建议生成一个普通的 URL 并有一个 servlet 来提供图像，或者如果图像实际上已经位于 web 服务器的磁盘文件系统上，则创建另一个 webapp 上下文，以便您可以直接通过 URL 引用它。

# ruby-on-rails - 使用自定义 JSON 响应

> ID：10576498
> 
> 赞同：0
> 
> 时间：2012-05-14T01:08:03.060
> 
> 标签：ruby-on-rails, json

我有一个非常简单的任务，但很困惑。

我需要我的行动以非常简单的 JSON 响应：

```
{"valid": true} 
```

我需要在控制器中写什么？

```
render :json => ...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:13:47.667

```
render :json => { valid: true } 
```

Rails 应该`to_json`自动调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T01:11:49.527

你有没有尝试过：

```
render :json => {"valid" => true} 
```

# asp.net-mvc - 子表单上的 MVC3 验证

> ID：10576503
> 
> 赞同：1
> 
> 时间：2012-05-14T01:08:53.513
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation

我有一个页面，我想要一个包含一些详细信息的项目列表（标题项目）以及一个查看链接和一个编辑它们的链接。此外，在列表顶部，我想要一个表单来获取基本详细信息（开始和结束日期）并使用该数据创建一个新的标题项。

我做了什么：

*   创建了一个标头控制器
*   创建了一个索引视图（获取项目列表）
*   创建了一个 startHeader 视图（有一个带有开始、结束日期和一个按钮的表单，表单的 actionName 为“addHeader”）
*   为开始和结束日期添加了“ValidationMessageFor”
*   将 startHeader 视图作为部分视图添加到索引视图

除了一些验证外，一切似乎都正常工作。必填字段验证似乎按预期工作（即，如果您没有输入开始日期并单击显示“需要开始日期”的按钮）。

但是，我添加了一些似乎不起作用的额外验证：

*   将 IValidatableObject 接口添加到头类
*   添加了验证码

    if (this.StartDate > this.EndDate) { yield return new ValidationResult("开始日期必须早于结束日期。", new[] { "StartDate" }); }

*   当按下按钮时，此代码按预期运行
*   但是它不会停留在索引屏幕上并显示验证消息
*   而是通过 addHeader 视图
*   我曾期望这与所需的字段验证一样工作并显示验证消息

我在这里缺少什么吗？

*   为什么此验证正在运行，但不显示错误消息？
*   我是否需要添加一些内容才能使此验证运行并保留在页面上？
*   有没有更好的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:18:30.763

可能是您的必填字段验证正在通过[Unobtrusive Client Validation](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)显示（您的模型可能包含数据注释`[Required]`）。此验证通过 JavaScript 在客户端运行，因此根本不会回传到服务器。

相反，您编写的验证代码在表单回发到服务器之后运行。您需要在 addHeader() 方法中捕获它。这些方面的东西：

```
[HttpPost]
public ActionResult addHeader(addHeader model)
{
    if (!ModelState.IsValid)
    {
        return View();
    }
    else
    {
        //Do Work to add your header...
        return View("Index");
    }
} 
```

只要您`@Html.ValidationSummary(true)`在视图中，它就会自动显示 ValidationResult。[有关更多详细信息，请参阅此内容。](http://en.hugon.ws/articles/mvc-3/the-ivalidatableobject-interface/)

# spring - SPRING DATA-JPA + eclipseLink2.0 失败

> ID：10576505
> 
> 赞同：0
> 
> 时间：2012-05-14T01:08:57.983
> 
> 标签：spring, jpa, spring-data, eclipselink, spring-data-jpa

在我的测试项目中，由于以下错误，Spring 容器无法创建扩展 JpaRepository 的 bean。

> 原因：org.springframework.beans.factory.BeanCreationException：创建名为“srSvcInfoMtrRepository”的bean时出错：FactoryBean在对象创建时抛出异常；嵌套异常是 ***java.lang.NoSuchMethodError:*** ***javax.persistence.EntityManager.getMetamodel()Ljavax/persistence/metamodel/Metamodel;***

这可能是与 JPA 版本相关的问题。

我在persistence.xml 的ecipelink2.0(org.eclipse.persistence.jpa.PersistenceProvider) 中指定了某些persistenceProvider。

你对这个问题有什么想法吗？

***堆栈跟踪***

> 2012-05-14 09:11:08 错误在允许 TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@112da40] 准备测试实例时捕获异常 ***> [net.tjjang.learn.spring_jpa.test.SrSvcInfoMtrTest@ b6d6ab] java.lang.IllegalStateException：无法在 org.springframework.test.context.TestContext.getApplicationContext 加载 ApplicationContext（TestContext.java:157）** **在 org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75) 在 org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109) 在 org.springframework.test.context .TestContextManager.prepareTestInstance(TestContextManager.java:321) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner. java:288) 在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner 的 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)。methodBlock(SpringJUnit4ClassRunner.java:290) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49) at org.junit .runners.ParentRunner$3.run(ParentRunner.java:193) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks。在 org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks 评估（RunBeforeTestClassCallbacks.java:61）。在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174) 在 org.junit.runners.ParentRunner.run(ParentRunner.java:236) 在 org.eclipse 评估(RunAfterTestClassCallbacks.java:71) .jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt.internal .junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner .RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174) 在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java: 50) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org .eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt .internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174) 在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java: 50) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org .eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt .internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt。 internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit。 runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt。 internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit。 runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt。 internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt。 internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)* ****原因：org.springframework.beans.factory.BeanCreationException：创建名为“srSvcInfoMtrRepository”的bean时出错：FactoryBean在对象创建时抛出异常；嵌套异常是 java.lang.NoSuchMethodError: javax.persistence.EntityManager.getMetamodel()Ljavax/persistence/metamodel/Metamodel;** **在 org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149) 在 org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102) 在 org.springframework.beans.factory .support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1441) 在 org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:305) 在 org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory .java:193) 在 org.springframework.context.support.AbstractApplicationContext 的 org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)。finishBeanFactoryInitialization(AbstractApplicationContext.java:913) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464) at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103) at org .springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1) at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228) at org.springframework.test.context.TestContext .loadApplicationContext(TestContext.java:124) 在 org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148) ... 24 更多springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464) 在 org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103) 在 org.springframework.test.context.support.AbstractGenericContextLoader。 loadContext(AbstractGenericContextLoader.java:1) at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228) at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124) at org .springframework.test.context.TestContext.getApplicationContext(TestContext.java:148) ... 24 更多springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464) 在 org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103) 在 org.springframework.test.context.support.AbstractGenericContextLoader。 loadContext(AbstractGenericContextLoader.java:1) at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228) at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124) at org .springframework.test.context.TestContext.getApplicationContext(TestContext.java:148) ... 24 更多AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103) at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1) at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java: 228）在 org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124) 在 org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148) ... 24 更多AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103) at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1) at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java: 228）在 org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124) 在 org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148) ... 24 更多loadContext(DelegatingSmartContextLoader.java:228) at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124) at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148) ... 24更多的loadContext(DelegatingSmartContextLoader.java:228) at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124) at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148) ... 24更多的* ****> 引起：java.lang.NoSuchMethodError: javax.persistence.EntityManager.getMetamodel()Ljavax/persistence/metamodel/Metamodel;*** 在 org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getMetadata(JpaEntityInformationSupport.java:56) 在 org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:145) 在 org.springframework .data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:83) 在 org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:66) 在 org.springframework.data.repository .core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:146) 在 org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:120) 在 org.springframework.data.repository.core.support .RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:39) 在 org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)******

 *********JpaRepository 类（）***

```
package net.tjjang.learn.spring_jpa.repositories;
import net.tjjang.learn.spring_jpa.domain.SrSvcInfoMtr;

import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.transaction.annotation.Transactional;

@Transactional(readOnly = true)
public interface SrSvcInfoMtrRepository extends JpaRepository<SrSvcInfoMtr, String> {
    Page<SrSvcInfoMtr> findBySvc_nm(String svc_nm, Pageable pageable);
} 
```

***app-context.xml（不是 app-context.xml 的所有内容）***

```
 <!-- for data access -->
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" 
    p:driverClassName="cubrid.jdbc.driver.CUBRIDDriver" p:url="jdbc:cubrid:localhost:30000:test:test::" 
    p:username="test" p:password="*******" p:initialSize="5" p:maxActive="10"> 
    </bean -->
<bean
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    id="entityManagerFactory">
    <property name="dataSource" ref="dataSource" />
    <property name="loadTimeWeaver">
        <bean
            class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
    </property>
    <property name="persistenceUnitName" value="JpaPersistenceUnit" />
</bean>

<bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<jpa:repositories base-package="net.tjjang.learn.spring_jpa" />
<import resource="infrastructure.xml" /> 
```

***持久性.xml***

```
 <persistence-unit name="JpaPersistenceUnit"
    transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>net.tjjang.learn.spring_jpa.domain.Car</class>
    <class>net.tjjang.learn.spring_jpa.domain.SrSvcInfoMtr</class>
    <properties>
        <property name="eclipselink.logging.level" value="INFO" />
    </properties>
</persistence-unit> 
```

***图书馆***

*   \org\springframework\spring-aop\3.1.0.RELEASE\spring-aop-3.1.0.RELEASE.jar

*   \aopalliance\aopalliance\1.0\aopalliance-1.0.jar

*   \org\springframework\spring-asm\3.1.0.RELEASE\spring-asm-3.1.0.RELEASE.jar

*   \org\springframework\spring-core\3.1.0.RELEASE\spring-core-3.1.0.RELEASE.jar

*   \commons-logging\commons-logging\1.1.1\commons-logging-1.1.1.jar

*   \org\springframework\spring-orm\3.1.0.RELEASE\spring-orm-3.1.0.RELEASE.jar

*   \org\springframework\spring-jdbc\3.1.0.RELEASE\spring-jdbc-3.1.0.RELEASE.jar

*   \org\springframework\spring-tx\3.1.0.RELEASE\spring-tx-3.1.0.RELEASE.jar

*   \org\springframework\spring-aspects\3.1.0.RELEASE\spring-aspects-3.1.0.RELEASE.jar

*   \org\springframework\spring-context\3.1.0.RELEASE\spring-context-3.1.0.RELEASE.jar

*   \org\springframework\spring-expression\3.1.0.RELEASE\spring-expression-3.1.0.RELEASE.jar

*   \org\springframework\spring-context-support\3.1.0.RELEASE\spring-context-support-3.1.0.RELEASE.jar

*   \org\springframework\spring-beans\3.1.0.RELEASE\spring-beans-3.1.0.RELEASE.jar

*   \org\springframework\spring-test\3.1.0.RELEASE\spring-test-3.1.0.RELEASE.jar

*   \org\springframework\spring-instrument\3.1.0.RELEASE\spring-instrument-3.1.0.RELEASE.jar

*   \junit\junit\4.8.2\junit-4.8.2.jar

*   \org\slf4j\slf4j-api\1.6.0\slf4j-api-1.6.0.jar

*   \org\slf4j\jcl-over-slf4j\1.6.0\jcl-over-slf4j-1.6.0.jar

*   \org\slf4j\slf4j-log4j12\1.6.0\slf4j-log4j12-1.6.0.jar

*   \log4j\log4j\1.2.16\log4j-1.2.16.jar

*   \cubrid\cubrid-jdbc\8.4.1.2032\cubrid-jdbc-8.4.1.2032.jar

*   \org\eclipse\persistence\eclipselink\2.0.0\eclipselink-2.0.0.jar

*   \org\springframework\data\spring-data-jpa\1.0.3.RELEASE\spring-data-jpa-1.0.3.RELEASE.jar

*   \org\springframework\data\spring-data-commons-core\1.1.0.RELEASE\spring-data-commons-core-1.1.0.RELEASE.jar

*   \org\hibernate\ejb3-persistence\1.0.2.GA\ejb3-persistence-1.0.2.GA.jar

*   \org\aspectj\aspectjrt\1.6.8\aspectjrt-1.6.8.jar
*   \org\aspectj\aspectjweaver\1.6.11\aspectjweaver-1.6.11.jar
*   \commons-dbcp\commons-dbcp\1.2.2-p1\commons-dbcp-1.2.2-p1.jar
*   \commons-pool\commons-pool\1.4\commons-pool-1.4.jar
*   \mysql\mysql-connector-java\5.1.10\mysql-connector-java-5.1.10.jar

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T11:41:16.810

Spring Data JPA 需要 JPA 2.0。你已经把它的 1.0 版本拉到你的类路径中（`ejb3-persistence-1.0.2.GA.jar`不管用什么方式）。确保使用支持 JPA 2.0 的最新版本的 EclipseLink。版本 2.3.2 是当前的发布版本。******

# php - 在 html 中显示下拉列表中的值数据

> ID：10576508
> 
> 赞同：2
> 
> 时间：2012-05-14T01:09:28.627
> 
> 标签：php, javascript, jquery, html, dom

我创建了一个脚本，它从我的数据库中按产品数量获取运输状态和价格。

所以...我有 2 个下拉列表，一个用于数量，第二个用于状态。

这是我的主要 php 文件：[http](http://pastebin.com/U6dncsZ6)
://pastebin.com/U6dncsZ6 这是第二个 php 文件（用于数据库连接）- findcity.php：[http ://pastebin.com/AuEXrnpD](http://pastebin.com/AuEXrnpD)

如您所见，在我的第二个 php 文件中，我有这一行：

```
<option value=<?=$row['price']?>><?=$row['title']?></option> 
```

我想在页面上显示数据库中的运费（$row['price']。我指定在我的浏览器中使用“检查元素”，我可以看到作为状态值添加的价格，例如：

```
<option value="48.11">State</option> 
```

请帮忙 ：（

**Le：正如我在评论中所说，我终于发现像这里一样它正在工作：jsfiddle.net/Dkn4n/1/ 但是由于某些原因，它没有被检测到但它在我的页面中不起作用，可能是因为没有设置值html，我看不到源代码中的值，只能在“检查元素”中看到。该值按照我上面指定的方式设置，$row['price']**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:58:17.847

您的选择语句在页面上如下所示：

```
<select id="provincia">
    <option value="10.00">CA</option>
    <option value="20.00">NY</option>
</select> 
```

因此，使用 javascript/jQuery 您可以执行以下操作来获取所选选项的值。

```
$(document).ready(function(){
 $("#provincia").change(function(){
   alert(this.value);
   //do stuff here to set the value where you want it.
 });
}); 
```

这是一个演示：http: [//jsfiddle.net/Dkn4n/](http://jsfiddle.net/Dkn4n/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:13:27.863

添加到“追逐”的答案：

```
$(document).ready(function(){
 $("#provincia").change(function(){
   $("#selectedprice").html(this.value);
   //<div id=selectedprice></div> should show  your value
 });
}); 
```

并扩展它：

在这一行： document.getElementById('provinciadiv').innerHTML=req.responseText;

做

```
 $("#provincia").change(function(){
       $("#selectedprice").html(this.value);
       //<div id=selectedprice></div> should show  your value
     }); 
```

再次！因为一旦更换零件，“更改”绑定就消失了……

# windows - 杀死通过 Eclipse 远程系统功能启动的进程

> ID：10576510
> 
> 赞同：0
> 
> 时间：2012-05-14T01:09:43.997
> 
> 标签：windows, eclipse, process, dos

我正在尝试在 Eclipse 中使用远程系统。这就是我所做的：

1.  从 Eclipse 菜单栏中单击 Window > Show View > Other...。显示视图对话框出现。
2.  选择 Remote Systems 并按 OK 系统将在您的工作区中打开 Remote Shell 选项卡。
3.  丰富的单击本地外壳并选择启动外壳。
4.  在 shell 中启动了一个进程 --- 通常我可以在 DOS 提示符下用 CTRL-C 终止它。

没有办法在本地 Shell 中终止此进程。如果我终止 shell，进程将继续运行。我可以通过重新启动 Eclipse 来终止该过程，但这违背了目的。

我可以通过配置外部工具来运行 shell，但如果可以的话，我希望使用这个漂亮的远程系统功能。

有人有工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:55:54.537

这是在 Windows 上使用特定进程类型（如 NodeJS 或 Mongo）时的解决方案（可以适应其他操作系统）。

您可以使用命令行终止该进程：

taskkill /im node.exe /f

因此，通过在远程系统视图中右键单击并选择用户操作 > 使用用户操作，将其设置为远程系统用户操作（文件夹和文件）。然后，您可以随时在远程系统视图中右键单击并选择您的用户操作来终止该进程。我发现在设置之后需要重启 Eclipse。

# css - 将 iframe 放在“相框”后面，或如何“框”一个 iframe

> ID：10576513
> 
> 赞同：0
> 
> 时间：2012-05-14T01:10:01.303
> 
> 标签：css, iframe

我真的没有任何参考，也没有示例代码*（在 Google 和 SO 中搜索）*。
也许只是没有找到正确的关键字。

我相信这可以/必须用 CSS 解决，但我的技能很少......

也就是说：
我想“***裁剪”*** ***iframe***的多个像素。
一开始是顶部和底部，但是，嘿，如果我要问的话，左右也是 :o)

* * *

**[更新]**
我真正想要的是一个“概念证明”，或者至少是一个可以玩的起始代码......

* * *

**[根据大卫的回答，概念得到证明]**

```
<!DOCTYPE html>
<html>
<head><title>iframe cropping</title>
    <style type="text/css">
    <!-- 
    #iframeparent{width:700px;height:700px;}
    iframe{margin-top:-40px;width:700px;height:700px;overflow:hidden;border:0px;}
    #iframe-crop{position:absolute;top:0;left:0;border-top:55px solid white;width:710px;height:640px;pointer-events:none;}
    -->
    </style> 
</head>
<body>
    <div id="iframeparent">
        <iframe src="http://docs.google.com/viewer?url=http://www.startupgreece.gov.gr/sites/default/files/geek_agreement_v1.2.pdf"></iframe>
        <div id="iframe-crop"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:13:16.987

我会直接在 iframe 顶部放置一个带有白色（或任何网站背景颜色）边框的块，并根据您要裁剪的数量调整每个边框的大小。最简单的方法是将 iframe 放在相对定位的父元素中（或者不是静态的，无论如何），然后将带有裁剪边框的块也放在该父元素内，绝对定位在`top: 0`and `left: 0`。裁剪块必须与 iframe 的大小相同（您的 iframe 是否有专用的大小？）。

**编辑：**刚刚尝试过，我发现（呃！）这会禁用与 iframe 的所有交互性，因为裁剪覆盖“吸收”所有事件。如果这对你来说很好，那很好。如果没有，您可以尝试 CSS 属性`pointer-events:none;`，但这不适用于所有浏览器。它适用于最新版本的 Firefox、Chrome 和 IE，但并不是每个人都使用最新版本的一切。

**演示：** [http ://www.dstrout.net/pub/iframe-crop.htm](http://www.dstrout.net/pub/iframe-crop.htm)

# vb.net - VB.NET 我可以拥有哪些日历？

> ID：10576514
> 
> 赞同：1
> 
> 时间：2012-05-14T01:10:12.473
> 
> 标签：vb.net, schedule, appointment

在 VB.NET（不是 ASP.NET）中，我可以将什么用于日历。我进行了广泛的 DuckDuckGo 和 Google 搜索，但没有找到可行的选择。

日历的目的是创建一个有多个牙医的预约系统，因此预约也可以并行运行。但是不需要并行，因为我可能让最终用途选择预约的牙医（创建预约，因此必须选择日期/时间）。

该项目只是一个大学/学院项目，因此不需要完美（但我更喜欢它）。我会使用任何东西，否则我将不得不使用 ListView。

### 例子

*   [http://bit.ly/JsVhz1](http://bit.ly/JsVhz1)
*   [http://bit.ly/KkGZ5x](http://bit.ly/KkGZ5x)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:36:15.520

请记住，人们已经解决了这个问题......如果可能的话，不要重新发明轮子。如果您有一些预算，请尝试从[这里](http://www.componentsource.com/bestsellers/calendar-schedule/index.html)挑选一个。如果没有，有几个 WinForms 免费软件/开源控件，例如[这个](http://www.codeproject.com/Articles/38699/A-Professional-Calendar-Agenda-View-That-You-Will#xx3153670xx).

除非您花一些钱，否则您仍然必须编写实际的调度部分；这些只是显示控件。

# objective-c - 调用方法来查看控制器委托，不会关闭模式视图

> ID：10576517
> 
> 赞同：0
> 
> 时间：2012-05-14T01:11:30.957
> 
> 标签：objective-c, ios5, delegates, xcode4.3

我设置了以下简单的视图控制器类

```
@protocol ThermoFluidsSelectorViewControllerDelegate;

@interface ThermoFluidsSelectorViewController : UIViewController <UITextFieldDelegate>
@property (weak, nonatomic) id <ThermoFluidsSelectorViewControllerDelegate> delegate;
// user hits done button
- (IBAction)done:(id)sender;
@end

@protocol ThermoFluidsSelectorViewControllerDelegate <NSObject>
-(void) didFinishSelection:(ThermoFluidsSelectorViewController *)controller fluidID:    (NSString *)fluidID;
@end 
```

'didFinishSeletion: fluidID:' 方法在主视图控制器中定义，并且在调用时应该关闭选择器视图控制器。当按下完成按钮时，将调用以下方法：

```
- (IBAction)done:(id)sender
{
    [[self delegate] didFinishSelection:self fluidID:nil];
} 
```

'done:' 方法被调用（通过警报检查）但 'didFinishSelection...' 没有被调用，因此视图不会返回到主屏幕。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:18:42.523

听起来您还没有在主视图控制器中分配您的委托。

您应该在设置委托的主视图控制器中有类似的内容：

```
 ThermoFluidsSelectorViewController *view = [[ThermoFluidsSelectorViewController alloc] init];
    view.delegate = self; 
```

在这里你可以看到我创建了视图，然后将视图的委托设置回我自己。

如果您不是以编程方式创建 Thermo... 视图控制器，而是使用了故事板，那么您可以在主视图控制器的 prepareForSegue: 方法中设置委托：

```
// Do some customisation of our new view when a table item has been selected
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure we're referring to the correct segue
    if ([[segue identifier] isEqualToString:@"MySegueID"]) {

    // Get reference to the destination view controller
    ThermoFluidsSelectorViewController *cont = [segue destinationViewController];

    // set the delegate
    cont.delegate = self; 
```

希望这可以帮助。

# ios - iOS 应用程序 - 为什么同时包含 @2x 和低分辨率图像？

> ID：10576520
> 
> 赞同：14
> 
> 时间：2012-05-14T01:12:03.923
> 
> 标签：ios, image, retina-display

这一直困扰着我一段时间。我不明白为什么要包含低分辨率图像。例如，如果 3GS 无法找到低分辨率图像，它无论如何都会使用@2x 版本并以其原始分辨率显示它。那么为什么要通过包含所有半分辨率图像来增加应用程序的文件大小呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-14T02:00:02.880

哈雷说得对。系统不会自动将@2x 图像下采样到非视网膜尺寸，它不应该。3G 没有足够的内存来加载视网膜图像。它可能会阻塞您的应用程序并导致它因内存不足错误而退出。

iPad 1 的问题更加严重。相对于它的屏幕尺寸，iPad 1 的内存非常低，如果你试图让它加载视网膜大小的图像，它会很快窒息并死掉。

要缩放图像，系统必须以全尺寸加载它，并在每次绘制它时执行复杂的缩放操作。这是所有可能的世界中最糟糕的——速度较慢，内存是原来的 4 倍，而且图像看起来不太好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T01:16:26.410

在大多数情况下，您可以使以低分辨率创建的图标看起来*更好，而不是让系统对其进行缩放。*如果您不太关心缩放时图标的外观，那么仅使用@2x 版本可能就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:24:21.837

[其他海报提到了一些优秀的观点，但这里还有一个为后代：正如在http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#/](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1)中多次提到的那样[/apple_ref/doc/uid/TP40006556-CH14-SW1](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1)，2x 图像可能更详细。换句话说，低分辨率图像不仅仅是 2x 图像的缩小版本；2x 图像可能包含较小图像中不存在的细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T01:26:24.443

@2x 文件名适用于支持 Retina Display 的设备。

如果您打算将它们用于 iPhone 3GS 上的显示，请确保正确测试它们看起来是否与 Apple 希望您使用的低分辨率图像一样可接受。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-14T01:16:48.493

原因是，如果没有可用的@2x，则当放大图像时，它们会变得像素化和模糊，因此您可能会认为将原始图像放大两倍可以解决问题。

但不是，因为视网膜设备仍会按比例放大（根据我的经验），而非视网膜设备会错误地显示图像。

这与 Apple 对其应用商店中应用的质量标准有很大关系

# c# - 带有arraylist的gridview不显示数据

> ID：10576523
> 
> 赞同：1
> 
> 时间：2012-05-14T01:12:43.297
> 
> 标签：c#, asp.net, data-binding

我有一个 gridview，我用从 powershell 命令获得的值填充。例如，我的 powershell 命令是 get-command。我知道命令返回值。这是我的代码，但是我的 gridview 从不显示数据。

```
ArrayList boxesarray = new ArrayList();

foreach (PSObject ps in commandResults)
    boxesarray.Add(ps.Properties["Name"].Value.ToString());

boxes.DataSource = boxesarray;
boxes.DataBind(); 
```

我知道该值在那里，因为我用标签替换了最后两行并且能够看到该值。

```
boxlabel.text = boxesarray[4]; 
```

我肯定错过了什么。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:29:11.827

GridView 需要具有属性的类的集合或 IEnumerable，并且属性映射到列。

像您这样的数组具有没有绳索的值类型对象（字符串），因此您无法将属性绑定到列。

```
ArrayList boxesarray = new ArrayList(); 
```

你可以像这样创建一个简单的类：

```
public class PropertyContainer
{
    public string Value {get;set;}
}
// NOTE: you can override ToString(); to customize String.Format behaviour
// and to show it in the debugger (althought there's other way for this, using
// DebuggerDisplayAttribute) 
```

并创建并填充此类的数组，该数组将正确绑定到数据网格。

```
foreach (PSObject ps in commandResults)
    boxesarray.Add(
       new PropertyContainer { Value = ps.Properties["Name"].Value.ToString()});

boxes.DataSource = boxesarray;
boxes.DataBind(); 
```

其他选项是使用 LINQ 将数组转换为对象数组。如果数据网格列设置为自动创建，您甚至可以使用匿名对象。

```
// anonymous type
var dataForBinding = boxesArray.select(val => new {Value = val});

// array of the class
var dataForBinding = boxesArray.select(val => new PropertyContainer
   { Value = val }); 
```

您可以将此数据绑定到您的 gridview，它将完美地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T01:28:01.757

你可以试试

```
.DataSource = (from ps in commandResults 
               select { Name:ps.Properties["Name"].Value.ToString() }).ToList(); 
```

或者

```
.DataSource = (from name in yourarraylist
               select { Name:name.ToString() }).ToList(); 
```

# ruby-on-rails-3 - 即使存在外键，Rails 模型也无法访问 belongs_to 模型

> ID：10576524
> 
> 赞同：2
> 
> 时间：2012-05-14T01:12:52.453
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我有一个由用户创建的名为 Challenge 的模型。它也有一个与之相关的难度。当我创建挑战并将作者（用户）和难度交给它时，难度关联有效，但作者（用户）没有。最奇怪的部分是，当您查看 Challenge 对象时，它会显示与其关联的 Author 键。

```
challenge = Challenge.first
challenge.author (prints Nil) #Doesn't even run a Query 
```

当我使用以下代码创建挑战时，user_id 为 Nil。

```
user = User.find(1)
diff = Difficulty.find(1)
Challenge.create(:author => user, :difficulty => diff, :title => "My Challenge") 
```

当我使用此代码创建挑战时，用户获取与挑战的关系，挑战获取用户的 user_id。但是您只能从用户转到挑战。对用户的挑战返回 Nil。

```
user = User.find(1)
diff = Difficulty.find(1)
chall = Challenge.create(:difficulty => diff, :title => "My Challenge")
user.authored_challenges << chall 
```

这是我的模型和表格

```
# Models
class User < ActiveRecord::Base
  has_many :authored_challenges, :class_name => "Challenge"
  attr_accessible :display_name, :authored_challenges   
end

class Reward < ActiveRecord::Base
  has_many :challenges
  attr_accessible :name, :value, :challenges
end

class Challenge < ActiveRecord::Base
  belongs_to :reward
  belongs_to :author, :class_name => "User"
  attr_accessible :title, :description, :reward, :author
end

# Tables
create_table :users do |t|
  t.string :display_name
  t.timestamps
end

create_table :rewards do |t|
  t.string :name
  t.float :value
  t.timestamps
end

create_table :challenges do |t|
  t.integer :user_id
  t.integer :reward_id
  t.string :title
  t.string :description
  t.timestamps
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T02:13:11.270

根据：[http](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html) ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html外键应该是：

```
:foreign_key => :author_id 
```

不要忘记添加字段。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T01:33:04.320

你有没有尝试过：

```
belongs_to :author, :class_name => "User", :foreign_key => :user_id 
```

从 Rails 文档：

> 按照惯例，Rails 假定在这个模型上用于保存外键的列是关联名称加上后缀 _id。:foreign_key 选项可让您直接设置外键的名称

文档中给出的示例与您拥有的示例非常相似：

```
class Order < ActiveRecord::Base
  belongs_to :customer, :class_name => "Patron", :foreign_key => "patron_id"
end 
```

# twitter-bootstrap - 如何设置选项卡内容 div 的高度？

> ID：10576526
> 
> 赞同：0
> 
> 时间：2012-05-14T01:12:55.670
> 
> 标签：twitter-bootstrap, html

我将宽度设置为跨度 11（我正在使用 Twitter Bootstrap 的 12 列网格系统）：

```
 <div class="row">
   <div class="span11 offset1">
    <div class="tab-content"> 
```

如何设置高度以使其保持固定框？

# objective-c - UIImageView.isAnimating 返回错误？

> ID：10576534
> 
> 赞同：0
> 
> 时间：2012-05-14T01:14:26.137
> 
> 标签：objective-c, ios, xcode

我在使用该`isAnimating`功能时遇到问题。

我有一个名为 imgBecher 的 UIImageView。在`viewDidLoad`函数中我播放一个小动画：

```
 imgBecher.image = [UIImage imageNamed:@"diceholderAni.11.png"];
    AniArray = [NSArray arrayWithObjects:
                [UIImage imageNamed:@"diceholderAni.1.png"],
                [UIImage imageNamed:@"diceholderAni.2.png"],
                [UIImage imageNamed:@"diceholderAni.3.png"],
                [UIImage imageNamed:@"diceholderAni.4.png"],
                [UIImage imageNamed:@"diceholderAni.5.png"],
                [UIImage imageNamed:@"diceholderAni.6.png"],
                [UIImage imageNamed:@"diceholderAni.7.png"],
                [UIImage imageNamed:@"diceholderAni.8.png"],
                [UIImage imageNamed:@"diceholderAni.9.png"],
                [UIImage imageNamed:@"diceholderAni.10.png"],
                nil];
    imgBecher.animationImages = AniArray;
    [imgBecher setAnimationRepeatCount:1];
    imgBecher.animationDuration = 1;
    [imgBecher startAnimating]; 
```

到目前为止一切都很好。现在我调用一个循环：

```
[NSTimer scheduledTimerWithTimeInterval:1.0/60 target:self selector:@selector(gameLoop) userInfo:nil repeats:YES];

-(void)gameLoop {
    NSLog(@"%i",imgBecher.isAnimating);
} 
```

现在 gameLoop 一直触发 1，没有看到动画结束。

但是只要我在任何地方触摸屏幕，它就会触发 0，就像它应该的那样。

稍后我需要这个，我有 4 个动画，应该在没有任何用户操作的情况下一个接一个地播放。

提前致谢！;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:16:32.153

可能你必须使用`userInteractionEnabled`属性：

`imgBecher.userInteractionEnabled = NO;`或者`self.view.userInteractionEnabled = NO;`

# php - CURLOPT POSTFIELDS 未将数据附加到 HTTP 请求

> ID：10576541
> 
> 赞同：0
> 
> 时间：2012-05-14T01:15:07.167
> 
> 标签：php, curl, http-request

我一直在尝试通过 HTTP 请求发送一些东西，使用 CURLOPT POSTFIELDS 并且数据似乎没有传输。我错过了什么吗？

```
 function sendTestCase($caseArgs){
        try{
            $ch = curl_init();
            $sendData = http_build_query($caseArgs);
             curl_setopt($ch, CURLOPT_POSTFIELDS, $sendData);
            curl_setopt($ch, CURLOPT_URL, 'http://localhost:8888/testrail/index.php?/miniapi/add_case/');  
            curl_setopt($ch, CURLOPT_HEADER, false);
            curl_setopt($ch, CURLOPT_POST, 1);

            curl_setopt($ch, CURLOPT_HTTPHEADER,array("Expect:"));

            curl_exec($ch);
        }
        catch (HttpException $ex){
            echo $ex."<-Exception";
 }

 curl_close($ch);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:04:34.237

POSTFIELDS 完全能够接受一个数组，curl 会为你做 url-building。就目前而言，您正在将一个字符串传递给 curl（它恰好包含您的表单值），但没有传递一个字段名称，因此 curl 正在发送一个裸字符串。试试这个：

```
 curl_setopt($ch, CURLOPT_POSTFIELDS, $caseArgs); 
```

# objective-c - 在 Objective C 中搜索函数

> ID：10576544
> 
> 赞同：0
> 
> 时间：2012-05-14T01:15:47.910
> 
> 标签：objective-c, nskeyedarchiver, nscoding

我有一个奇怪的任务。我需要获取一个包含目标 c 对象中所有函数的数组。然后我需要能够判断每个函数是否是类方法。然后我需要获取每个参数的名称（最好是 NSString）以及每个参数采用的类型。有没有办法做到这一点？如果没有，有谁知道如何访问在 NSCoding 协议函数中编码的键和值 -(void)encodeWithCoder:(NSCoder*)aCoder; 不使用 NSKeyedArchiver？我在这里要做的是显示初始化对象所需的属性列表。我所有的对象都使用类方法来初始化自己。我正在制作一个关卡编辑器，它允许我编辑对象之间不同的属性，但我没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:26:05.457

> 我需要获取一个包含目标 c 对象中所有函数的数组。然后我需要能够判断每个函数是否是类方法。

很简单：你想要[`class_copyMethodList()`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH1g-SW4)，它只为你提供该类的实例方法。要获取类方法，请传递类对象，例如`class_copyMethodList(object_getClass([NSString class]), &count);`

> 然后我需要获取每个参数的名称（最好是一个`NSString`）以及每个参数采用的类型。

参数名称部分可能是不可能的。它们不包含在方法的元数据中，我很确定它们根本无法在编译后存活；如果它们在那里，将它们从可执行文件中挖掘出来肯定不容易。

但是，可以通过以下两个运行时函数之一轻松访问这些类型：要么[`method_getTypeEncoding()`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH1g-SW24)，它为您获取方法返回和参数的[签名字符串](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html%23//apple_ref/doc/uid/TP40008048-CH100-SW1)[`method_getArgumentType()`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH1g-SW53)，要么，它将让您循环参数类型（返回的字符串使用与完整的类型字符串）。

> 如果没有，有谁知道如何在不使用的情况下访问`NSCoding`协议函数中编码的键和值？`-(void)encodeWithCoder:(NSCoder*)aCoder``NSKeyedArchiver`

您是在谈论您所做的特定实现`encodeWithCoder:`吗？你想要隐含的 ivars 列表`[coder encodeObject:firstIvar forKey:@"firstIvar"]; [coder encodeObject:secondIvar forKey:@"secondIvar"];`吗？我不确定这与方法签名有什么关系，但如果是这样，你可以创建一个`NSCoder`子类，当你将它作为编码器传递并发送到你的对象时创建一个字典`encodeWithCoder:`（参见[我前几天发布的这个答案](https://stackoverflow.com/questions/10539668/how-do-i-take-advantage-of-nscoding-to-convert-an-object-into-a-nsdictionary/10540088#10540088)） .

> 我在这里要做的是显示初始化对象所需的属性列表。

一个类方法返回一个带有属性名称的数组呢？

```
+ (NSArray *)essentialPropertyNames {
    return [NSArray arrayWithObjects:@"firstIvar", @"secondIvar", nil];
} 
```

与挑选运行时/类元数据相比，这可能会更省力，而且不会更奇怪。

> 我所有的对象都使用类方法来初始化自己。

这听起来不寻常。在 Cocoa 中，实例应该使用某种形式的`-init`来进行初始化。

# jsp - 更改复选框的值

> ID：10576546
> 
> 赞同：1
> 
> 时间：2012-05-14T01:16:05.617
> 
> 标签：jsp, checkbox

我的jsp页面中有一个复选框

```
<input type="checkbox" name="checkbox1" value="1" id="checkbox1" onclick="changevalue(this)"/> 
```

然后在我的脚本中

```
function changevalue(checkbox)
{
    if(checkbox.value==1)
    {
        checkbox.value=0;
    }
    else if(checkbox.value==0)
    {
        checkbox.value=1;
    }
} 
```

但是当我提交表单时，复选框的值始终为 1。谁能告诉我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:46:53.023

我相信，当浏览器提交复选框时，如果未选中，它们甚至不会被返回。否则，返回与它们关联的 value 属性。因此，只需更改`value`复选框的属性即可获得不同的返回值。

# python - Python：可用的最大值和最小值

> ID：10576548
> 
> 赞同：31
> 
> 时间：2012-05-14T01:16:08.297
> 
> 标签：python, python-3.x

Python 2.x 允许比较异构类型。

一个有用的快捷方式（此处为 Python 2.7）是`None`比较小于任何整数或浮点值：

```
>>> None < float('-inf') < -sys.maxint * 2l < -sys.maxint
True 
```

在 Python 2.7 中，一个空元组`()`是一个无限值：

```
>>> () > float('inf') > sys.maxint
True 
```

当您可能对整数和浮点数的混合列表进行排序并希望有一个绝对最小值和最大值可供参考时，此快捷方式很有用。

但是，此快捷方式已在 Python 3000 中删除（这是 Python 3.2）：

```
>>> None < 0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: NoneType() < int() 
```

此外，Python3000[已经取消](http://docs.python.org/release/3.1.5/whatsnew/3.0.html#integers) `sys.maxint`了所有 int 都提升为 long 并且限制不再适用的理论。

[PEP 326](http://www.python.org/dev/peps/pep-0326/) , A Case for Top and Bottom Values, 在 Python 中提高了参考最小值和最大值。[记录](http://docs.python.org/release/3.1.5/whatsnew/3.0.html#ordering-comparisons)了新的排序行为。

由于 PEP 326 被拒绝，对于 Python 2X 和 Python 3000 上的整数、浮点数和长整数工作的最小值和最大值，有哪些有用、可用的定义？

**编辑**

有几个答案类似于“只使用 maxv=float('inf')”......我在想的原因，无论可能性多么遥远，是这样的：

```
>>> float(2**5000)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: long int too large to convert to float 
```

和：

```
>>> cmp(1.0**4999,10.0**5000)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: (34, 'Result too large') 
```

然而：

```
>>> () > 2**5000
True 
```

为了将 cmp 转换为浮点值，`float('inf')`需要将 long 值转换为浮点数，并且转换会导致`OverflowError`...

**结论**

谢谢大家的回答和评论。我选择了 TryPyPy 的[答案](https://stackoverflow.com/a/10577337/455276)，因为它似乎最符合我的要求：绝对最大和绝对最小值，如 Wikipedia [entry on infinity 中所述。](http://en.wikipedia.org/wiki/Infinity#Computing)

通过这个问题，我了解到 long 或 int 值不会转换为 float 以完成`float('inf') > 2**5000`. 我不知道。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-14T03:52:35.700

对于数值比较，`+- float("inf")`应该可以。

它并不总是有效（但涵盖了现实案例）：

```
print(list(sorted([float("nan"), float("inf"), float("-inf"), float("nan"), float("nan")])))
# NaNs sort above and below +-Inf
# However, sorting a container with NaNs makes little sense, so not a real issue. 
```

要让对象与任何其他任意对象（包括`inf`但不包括下面的其他作弊者）进行比较，您可以创建在其特殊比较方法中声明其最大/最小值的类：

```
class _max:
    def __lt__(self, other): return False
    def __gt__(self, other): return True

class _min:
    def __lt__(self, other): return True
    def __gt__(self, other): return False

MAX, MIN = _max(), _min()

print(list(sorted([float("nan"), MAX, float('inf'), MIN, float('-inf'), 0,float("nan")])))
# [<__main__._min object at 0xb756298c>, nan, -inf, 0, inf, nan, <__main__._max object at 0xb756296c>] 
```

当然，覆盖“或等于”变体需要更多的努力。并且它不会解决无法对包含`None`s 和`int`s 的列表进行排序的一般问题，但是通过一点包装和/或 decorate-sort-undecorate 魔法（例如，对 的元组列表进行排序`(typename, value)`）也应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-14T01:26:14.550

您的问题已经有了最明显的选择：`float('-inf')`和`float('inf')`.

另外，请注意，在 Py2 中并不能*保证*`None`小于一切和高于一切的空元组，例如，如果 Jython 和 PyPy 愿意，他们完全有权使用不同的排序。所保证的只是解释器的一个运行副本内的一致性——实际顺序是任意的。

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T04:43:52.550

在 cPython 中， cmp 不会隐式执行浮点转换。即，这有效：

```
>>> float('inf') > 2**5000
True 
```

虽然这显式执行了可怕的转换：

```
>>> float('inf') > float(2**5000)
Overflow... 
```

恕我直言，*正确*答案本身并不是逻辑变化的值：

```
def func_with_min():
   minval=None
   for loop in list_with_mins:
      if minval is None or minval<minseen:
          # do that min thing you wanna do... 
```

如果您想获得*一个价值*，那么`float('-inf')`for min 并且`float('inf')`非常安全。但是，请务必将其缓存在循环之外：

```
def func():
   minval=float('-inf')
   for loop in now_you_can_loop:
       # otherwise float('-inf') is kinda slow 
```*

# c++ - 第三方类型是否应该在我的 C++ 库的 API 中公开

> ID：10576550
> 
> 赞同：5
> 
> 时间：2012-05-14T01:16:33.093
> 
> 标签：c++, api

我正在开发一个 C++ 库，用户将在其中提供复杂的输入，例如矩阵和四元数。我不想重新实现这些类型，所以在内部，我将使用[Eigen](http://eigen.tuxfamily.org)库。

我正在尝试确定将这些类型公开给我的库客户端的最佳方式，并为我的 API 提供了一些选项。我以四元数类型为例，但这同样适用于矩阵等。此外，虽然我专门谈论公开 Eigen 的类型，但我想这个问题同样适用于正在使用的其他外部库。

**1) 只使用基本的 C++ 类型**

此选项将要求客户端通过基本类型传入数据。例如，要传入一个四元数（4 个元素），可以这样做：

```
void my_func(double my_quat[4]) 
```

**2) 暴露 Eigen 的类型**

Eigen 为数组和四元数提供了几种模板类型。例如，如果一个函数需要一个四元数，我可以使用 Eigen 的`Quaterniond` 类型（它实际上是 的 typedef `Quaternion<double>`）：

```
void my_func(const Eigen::Quaterniond& my_quat) 
```

**3）为客户的各种类型创建一个简单的包装器**

我可以创建一个非常简单的四元数类型（例如，某种简单的结构），客户端必须创建（可能通过某种工厂函数）才能传递给我的 API：

```
void my_func(const quaternion_t& my_quat) 
```

我的库会将`quaternion_t`类型转换为我的内部特征表示。

我不太喜欢选项 1，因为我希望在我的 API 中有更强的打字感。选项 2 将要求我的客户也使用 Eigen，更不用说如果他们使用不同版本的 Eigen 时可能存在的兼容性问题（顺便说一下，如果重要的话，Eigen 是一个仅限标头的库）。剩下的选项3。

人们怎么看？我基本上回答了我自己的问题吗？有什么例子吗？

**相关问题**

[此处](https://stackoverflow.com/questions/6527945/using-third-party-classes-in-a-c-header-file)提出了一个相关问题，但并未真正详细说明是否*应该*公开外部类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:45:03.603

暴露 3rd 方库在短期内是最容易的，但从长远来看很可能会在后面咬你一口。最简单，因为类型已经存在，你不需要自己想出。如果您将来想要使用不同的实现库，或者想要允许扩展客户端传递给您的数据，将会咬您一口。

只使用基本类型几乎就像想出你自己的一样，但它的级别要低得多，没有充分的理由。如果不经常参考有关内容的文档，您的用户将很难使用您的库。

如果您想要灵活性，使用您自己的类型是最好的选择。由于您需要重新创建所有已经存在的类型，这似乎需要大量的工作，但是如果您给它一些努力，您可能会发现如果您在库的接口中使用稍微不同的类型，它将有助于实现以后改得更好。

所以答案真的取决于你的目标和长期计划/预测：如果你没有看到自己从当前的实现中改变，你可以重新使用现有的类型，但是如果你预见/计划改变将来，您应该创建自己的独立界面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T01:20:24.257

包裹/封装。假设您想添加一些附加功能，例如缓存计算结果，例如四元数的范数，作为实现更改。如果您在不强制您的客户端代码更改其调用的情况下公开第 3 方类型，则无法做到这一点（很容易）。

# vb.net - 从 Visual Basic 连接到 Microsoft SQL Server

> ID：10576552
> 
> 赞同：2
> 
> 时间：2012-05-14T01:17:09.320
> 
> 标签：vb.net, visual-studio-2010

我正在尝试从 Microsoft Visual Studio 2010 中连接到 Microsoft SQL Server 2008 R2。我的连接字符串如下：

`connection = New SqlConnection("Server=localhost;Database=greenapplication;User ID=WindowsID;Password=WindowsPassword")`

我不断收到此异常： System.Data.SqlClient.SqlException：

`Login failed for user 'WindowsID'.`

我究竟做错了什么？我必须设置某些权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:22:49.497

如果您尝试使用集成安全性，您的连接字符串应该是：

```
"Server=localhost;Database=greenapplication;Trusted_Connection=True" 
```

然后，您可以通过角色和 Windows 组来管理权限。（您可以授予单个用户权限，但这不是管理数据库访问的推荐方式）。

**更新**：您在原始问题中忽略了这是一个 Web 应用程序。处理这个问题的常用方法是创建一个应用程序。池以已知身份（例如网络服务）运行，然后为该身份授予对数据库的必要权限。

*   [构建安全的 ASP.NET 应用程序：身份验证、授权和安全通信](http://msdn.microsoft.com/en-us/library/ff649357.aspx)

这是一个例子：

```
-- Create a SQL Server login for the Network Service account
sp_grantlogin 'NT AUTHORITY\Network Service'

-- Grant the login access to database
USE MyDB
GO
sp_grantdbaccess 'NT AUTHORITY\Network Service', 'Network Service'

-- Add user to read only database role
USE MyDB
GO
sp_addrolemember 'db_datareader', 'Network Service' 
```

如果您坚持使用在连接字符串中传递用户名和密码的不太安全的方法，请使用 SQL Server 登录：

*   [如何：在 ASP.NET 2.0 中使用 SQL 身份验证连接到 SQL Server](http://msdn.microsoft.com/en-us/library/ff648340.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T01:23:27.717

既然你说“WindowsPassword”，我想你可能应该使用这个连接字符串：

```
Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI; 
```

我还建议访问这个网站：

[http://www.connectionstrings.com](http://www.connectionstrings.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-21T14:29:04.810

你可以试试这个。

```
"Provider=SQLOLEDB;Data Source=" & SQLSERVER NAME & "; Initial Catalog=" & Dbname & ";Network=DBMSSOCN;" & _
            "User Id=" & UID & ";" & _
            "Password=" & Pwd & ";" 
```

# php - 如何将参数数组传递给方法

> ID：10576554
> 
> 赞同：1
> 
> 时间：2012-05-14T01:17:28.877
> 
> 标签：php, oop

我正在尝试将数组传递给一个方法，并且我希望该方法使用数组的值作为参数。

[我发布了一个关于如何将数组分配给函数参数](https://stackoverflow.com/questions/10576318/how-to-assign-arrays-to-functions-arguments)的类似问题 ？ 线程，但我实际上正在研究类方法。

```
if (method_exists($testInstance, $method)){
  $a=array {'1'=>'aru1', '2'=>'arg2'}   //could have more than 2\. it's dynamic
  call_user_func_array($testInstance->$method(), $a);  //this won't work.
} 
```

有什么想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:26:54.783

正如菲利克斯建议的那样，您需要传递一个可调用对象。对于一个类方法，它是一个`array`对象 inatance（或类名，如果它是一个静态方法）和方法名：

`call_user_func_array(array($obj,'myMethod'), $args)`

# django - django-socialregistration for facebook 不断要求模块 facebookapps

> ID：10576558
> 
> 赞同：1
> 
> 时间：2012-05-14T01:17:59.570
> 
> 标签：django, facebook, django-authentication

我正在尝试使用[`django-socialregistration`](https://github.com/flashingpumpkin/django-socialregistration)django-app 通过 Facebook 为我的网站提供身份验证。

我按照[设置指南](http://django-socialregistration.readthedocs.org/en/latest/installation.html)安装了依赖项：

```
$ yolk -l | grep "oauth2\|python-openid\|facebook-sdk\|django-socialregistration"
django-socialregistration - 0.5.4        - active 
facebook-sdk    - 0.3.0        - active development (/home/***/.virtualenvs/***/src/facebooksdk)
oauth2          - 1.5.211      - active 
python-openid   - 2.2.5        - active 
```

**设置.py**

```
#...
FACEBOOK_APP_ID = '*******'
FACEBOOK_SECRET_KEY = '********'
FACEBOOK_REQUEST_PERMISSIONS = '********'

INSTALLED_APPS = (
    #...

    'django.contrib.sites',
    'socialregistration',
    'socialregistration.contrib.facebook'
)

AUTHENTICATION_BACKENDS = (
    'django.contrib.auth.backends.ModelBackend',
    'socialregistration.contrib.facebook.auth.FacebookAuth',
) 
```

但是...当我运行`manage.py syncdb`或`manage.py runserver`出现以下错误时：

```
Error: No module named facebookapps.utils 
```

`facebookapps`但是在纯代码的任何部分都没有提及。据我所知， Even`django-socialregistration`没有任何参考资料。

奇怪的是`settings.pyc`。当我 grep 时`facebookapps`：

```
$ grep -R "facebookapps" .
Binary file ./settings.pyc matches 
```

我已经一遍又一遍地删除了这个文件，但它仍然是用这个参考生成的。

我正在使用 Django 1.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:30:29.337

如果您的 settings.py 文件意外构造了 facebookapps.utils 字符串怎么办？例如，字符串 facebook 和 apps.utils 是否在 INSTALLED_APPS 中彼此相邻定义，并且它们之间的逗号意外跳过了？（Python 连接相邻的字符串，例如“hello”“world”）。或者，是否会在您使用的某个应用程序中出现该错误？

# javascript - jPlayer没有正确循环？

> ID：10576562
> 
> 赞同：1
> 
> 时间：2012-05-14T01:19:20.917
> 
> 标签：javascript, jquery, html, jplayer

我正在尝试使用 jPlayer 创建一个音频播放列表，它将预加载列表中的下一首歌曲以实现无缝过渡，但我在循环功能方面遇到了一些问题。

我在这里设置了我的代码：http: [//jsfiddle.net/Mz74e/](http://jsfiddle.net/Mz74e/)

它使用 2 个不同的播放器来预加载剪辑。图形 UI 仅用于调试，因为我不打算在最终设置中使用它。

当前设置似乎在 Firefox 12 和 Flash 播放器中正确循环，但在 Google Chrome 18 中没有（它只是转到剪辑的开头并坐在那里）

如果有人可以看看我是如何使用它并找出更好的实现的解决方法，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T17:05:12.620

事实证明，问题不在于我最初的位置。

如果音频文件由 Web 服务器静态提供，则此完全相同的代码可以正常工作。

我在这里找到了 rangeDownload 函数的代码：

[http://mobiforge.com/developing/story/content-delivery-mobile-devices](http://mobiforge.com/developing/story/content-delivery-mobile-devices)

使用它，文件被正确分发以由 html5 播放。

# python - Python - Tkinter 图形用户界面

> ID：10576563
> 
> 赞同：0
> 
> 时间：2012-05-14T01:19:30.880
> 
> 标签：python, user-interface, interface, tkinter, frame

我在使用 Tkinter 时遇到问题。这是我第一次使用它，我想知道你是否可以帮助我。我已经写了我想要的图形用户界面，但我不能把它变成一个类，有人可以帮助我吗？

```
import datetime
from Tkinter import *
import tkMessageBox
import tkFileDialog

root = Tk()
menubar = Menu(root)
filemenu = Menu(menubar, tearoff=0)
filemenu.add_command(label="Open rooms file")
filemenu.add_command(label="Save rooms file")
filemenu.add_command(label="Exit")
menubar.add_cascade(label="File",menu = filemenu )
editmenu = Menu(menubar)
editmenu.add_command(label="Undo")

frame1 = Frame(root, bg="white", height=365)
frame1.pack(side=TOP, fill=BOTH, padx=2)

frame2 = Frame(root)
frame2.pack()

addguest = Button(frame2, text="Add Guest",)
addguest.pack(side=LEFT, padx=10, pady=10)

update = Button(frame2, text="Update Guest")
update.pack(side=LEFT, padx=10,pady=10)

remove = Button(frame2, text="Remove Guest")
remove.pack(side=LEFT, padx=10,pady=10)

root.title("Rooms manager")
root.geometry("800x410+75+75")
root.config(menu=menubar)
root.mainloop() 
```

我想把它变成类控制器。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:08:01.673

这是您作为类重新实现的代码。我冒昧地删除了“from Tkinter import *”并将其替换为“import Tkinter as tk”。IMO 这是导入 Tkinter 的一种更安全、更易于维护的方式。

```
import datetime
import Tkinter as tk
import tkMessageBox
import tkFileDialog

class ExampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        menubar = tk.Menu(self)
        filemenu = tk.Menu(menubar, tearoff=0)
        filemenu.add_command(label="Open rooms file")
        filemenu.add_command(label="Save rooms file")
        filemenu.add_command(label="Exit")
        menubar.add_cascade(label="File",menu = filemenu )
        editmenu = tk.Menu(menubar)
        editmenu.add_command(label="Undo")

        frame1 = tk.Frame(self, bg="white", height=365)
        frame1.pack(side=tk.TOP, fill=tk.BOTH, padx=2)

        frame2 = tk.Frame(self)
        frame2.pack()

        addguest = tk.Button(frame2, text="Add Guest",)
        addguest.pack(side=tk.LEFT, padx=10, pady=10)

        update = tk.Button(frame2, text="Update Guest")
        update.pack(side=tk.LEFT, padx=10,pady=10)

        remove = tk.Button(frame2, text="Remove Guest")
        remove.pack(side=tk.LEFT, padx=10,pady=10)

        self.title("Rooms manager")
        self.geometry("800x410+75+75")
        self.config(menu=menubar)

if __name__ == "__main__":
    app = ExampleApp()
    app.mainloop() 
```

# asp.net - CheckboxList 中的 ListItems 文本颜色变化

> ID：10576569
> 
> 赞同：1
> 
> 时间：2012-05-14T01:21:19.947
> 
> 标签：asp.net, checkboxlist

复选框列表中列表项中文本的颜色可以用选择/取消选择的颜色来回切换吗？

我试图用下面的代码这样做无济于事。ChartstoDisplay 是 checkboxlist 的 id

```
Protected Sub ChartstoDisplay_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles ChartstoDisplay.SelectedIndexChanged
    For i As Integer = 0 To ChartstoDisplay.Items.Count - 1
        If ChartstoDisplay.Items(i).Selected Then
            ChartstoDisplay.Items(i).Attributes.Add("style", "color:DarkGreen;")
        Else
            ChartstoDisplay.Items(i).Attributes.Add("style", """")
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:33:14.873

您的代码应该可以工作。我怀疑您只需要在 CheckBoxList 控件上添加**AutoPostBack="true" 。**这对我有用（使用您的代码隐藏）：

```
<asp:CheckBoxList AutoPostBack="true" runat="server" OnSelectedIndexChanged="ChartstoDisplay_SelectedIndexChanged" ID="ChartstoDisplay">
    <!-- Items here -->
</asp:CheckBoxList> 
```

# ios - iOS - UILocalNotification - 在给定时间最多只能安排 64 个插槽

> ID：10576570
> 
> 赞同：1
> 
> 时间：2012-05-14T01:21:26.653
> 
> 标签：ios, push-notification, uilocalnotification

**概述**

*   我有一个 iOS 应用程序，它在特定日期发送本地通知。
*   我刚刚了解到我只能在给定时间安排 64 条通知。
*   在某些情况下，由于 64 个插槽已满，我无法安排通知。
*   所以我将它们存储在数据库中，当用户响应通知时，我检查是否有任何可用的插槽并安排剩余的通知。

**问题**

*   当用户没有响应通知时，我的代码不会执行，因此我无法安排剩余的通知。

**问题**

1.  这个问题有解决方案吗？
2.  我可以在特定时间执行一段代码（看家）吗？
3.  有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:17:08.057

您可能不想向用户发出有问题的信号，而只是在后台进行。如果用户有 64 条通知针对某个应用程序并且尚未打开该应用程序，那么他们可能没有使用该应用程序。一旦通知被触发，它就不再在数组中了。因此，每次触发通知时，您都会有空间。但是，它们确实保留在通知中心，您必须自行清除。

通常最好不要向用户呈现可能的问题，而是以一种在内部有意义的方式处理它们，如果这是一个选项的话。查找 appDelegate 的委托方法，您很可能会找到可以处理您正在尝试做的事情的方法。

以为我会发帖以防您想接受答案。

祝你好运。

# bash - 如何使 echo 解释反斜杠转义而不打印尾随换行符？

> ID：10576571
> 
> 赞同：18
> 
> 时间：2012-05-14T01:21:32.157
> 
> 标签：bash, echo

我想`echo`在 bash 中使用打印出一串字符，后跟一个回车符。我查看了手册页，发现它`echo -e`会`echo`解释反斜杠转义字符。使用它我可以说它`echo -e 'hello\r'`会像这样打印

```
$>echo -e 'hello\r'
 hello
$> 
```

所以看起来它正确处理了回车。我还在`echo -n`手册页中发现将停止`echo`插入换行符，当我这样做时它看起来像它一样工作

```
$>echo -n 'hello\r'
 hello\r$> 
```

我遇到的问题是将两者结合`-e`起来`-n`. 我已经尝试了每一个`echo -e -n 'hello\r'`, `echo -n -e 'hello\r'`, `echo -en 'hello\r'`,`echo -ne 'hello\r'`并且没有像这样打印：

```
$>echo -ne 'hello\r'
$> 
```

我在这里遗漏了什么或者不能一起使用`-e`and选项吗？`-n`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-14T02:05:17.073

我认为它正在工作，你只是没有看到它。这是你的命令：

```
$> echo -ne 'hello\r' 
```

由于回车符 ( `\r`)，这会将光标留在终端上它写入的同一行的开头`hello`- 这意味着将写入下一个输出到终端的内容。因此，如果您的实际提示比`$>`您在此处显示的要长，它将`hello`完全覆盖。

此序列将让您了解实际发生的情况：

```
echo -ne 'hello\r'; sleep 5; echo 'good-bye' 
```

但是为了更好地移植到其他 shell，我会避免使用`echo`类似的选项。这些纯粹是 bashism，POSIX 标准不支持。但是，`printf`内置函数由 POSIX 指定。因此，如果您想显示没有换行符和反斜杠序列解析的字符串，您可以使用它：

```
printf '%s\r' 'hello' 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-14T02:09:38.417

该命令有许多不同的实现`echo`。大多数 shell 都内置了一个（每个 shell 具有不同的行为），并且`/bin/echo`从一个系统到另一个系统的行为差异很大。

而不是`echo`，使用`printf`. 它内置在 bash 中，也可以作为外部命令使用，并且它的行为在不同的实现中更加一致。（主要的变化是 GNU coreutils`printf`识别`--help`和`--version`选择。）

只需使用：

```
printf 'hello\r' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-14T02:41:12.760

我希望您向您介绍[printf](http://ss64.com/bash/printf.html)。

OP，见面`printf`。`printf`. 这是OP...

每当你试图对 BASH 中的输出做任何*不寻常*的事情时，你应该切换到`printf`. 事实上，我`printf`一直在使用，所以我的脚本将在 BASH 和 Kornshell 下运行。

尽管 BASH 和 Kornshell 99% 相同，但`echo`命令不同。在 Kornshell 中，它已被弃用，您应该使用内置的`print`. 但是，`print`BASH 中没有。Using`printf`解决了这个问题，因为它在两个 shell 中的工作方式（有点）相同。

由于`printf`不会自动以 a 结束每一行`\n`，因此您不必担心如何防止`\n`附加 。哎呀，如果你想要一个`\n`，你必须自己把它。在你的情况下：

```
printf `hello\r` 
```

但是，出于安全原因，您应该这样做：

```
printf '%s\r' 'hello' 
```

这是我在使用时养成的习惯`printf`。想象一下，如果我想打印出来`$FOO`，我会这样做：

```
printf "$FOO\n" 
```

这通常会起作用，但如果`$FOO`开头有破折号，或者有一个`%`标志怎么办。以上不会做我想做的事。但是，如果我这样做：

```
printf '%s\n' "$FOO" 
```

`$FOO`无论里面有什么，这都会打印出来`$FOO`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-28T15:33:46.800

POSIX 7[说这是不可能的](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/echo.html#tag_20_37_05)：

> 如果第一个操作数是 -n，或者任何操作数包含反斜杠字符，则结果是实现定义的。

例如在 Ubuntu 12.04 上：

*   Bash 的内置 echo会`echo -e '\n'`解释换行符，`echo '\n'`但不会。
*   `/bin/sh`的内置`echo`没有`-e`选项，即使没有它也会解释换行符。`Makefile`这可以在写入s时进行字节处理，`/bin/sh`默认情况下使用。

POSIX 7 解决方案：`printf`正如其他人提到的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T01:28:22.240

报价。这是未来的浪潮。总是引用。

```
echo -ne 'hello\r' 
```

如果您将要扩展的变量放入其中，请使用双引号。

# actionscript-3 - AS3：模拟点击带有坐标的DisplayObject并影响一个孩子

> ID：10576573
> 
> 赞同：0
> 
> 时间：2012-05-14T01:22:18.037
> 
> 标签：actionscript-3, mouseevent

所以我需要模拟点击某个 DisplayObject 上的特定位置。这很容易：

```
myObject.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_DOWN, true, true, 200, 200)); 
```

我遇到的问题是，如果某个按钮位于容器中单击的位置，我需要在某个按钮上调度 MouseEvent。但这不会发生到现在...

我的逻辑是，如果我直接在容器上分派事件，则无法在某个孩子上分派事件。但我不确定这是否正确。

那么我该怎么做呢？如果确实有孩子，我如何向 DisplayObject 发送一个偶数并影响它的孩子

有任何想法吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:38:06.470

所以我想通了。

我需要首先使用 getObjectsUnderPoint() 来了解坐标下的对象，然后找出哪个是顶部对象，然后在该对象上生成 MouseEvent。

# watin - 瓦廷上传

> ID：10576579
> 
> 赞同：0
> 
> 时间：2012-05-14T01:22:57.217
> 
> 标签：watin, uploadify

我正在使用 WatiN 进行浏览器自动化。但是今天我遇到了一个问题，我需要在我的 asp.net 页面中调用 flash 对象（上传按钮）。

此代码似乎工作正常，但没有显示任何操作

```
Element ele = window.Element(Find.ById("uploadifyUploader"));
ele.Click(); 
```

有没有办法在 WatiN. 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:35:59.293

Watin 无法访问 Flash 对象。你可以试试[AutoIt](http://www.autoitscript.com/)库。或者使用 javascript 库。例如：[http ://www.permadi.com/tutorial/flashjscommand/](http://www.permadi.com/tutorial/flashjscommand/)

# php - 无法在 symfony 2 中返回 json

> ID：10576580
> 
> 赞同：0
> 
> 时间：2012-05-14T01:23:05.273
> 
> 标签：php, json, rest, symfony

这是我的控制器

```
public function index2Action($name)
    {   
  $em = $this->getDoctrine()->getEntityManager();
  $test = $em->getRepository('RestWebServiceBundle:Test')->findall();
  return new Response(json_encode(array('locations' => $test)));

    } 
```

当我转到 URL 时，我得到：

```
{"locations":[{}]} 
```

但是，当我使用：

```
public function index2Action($name)
    {   
$name ="Adam";
  return new Response(json_encode(array('locations' => $name)));

    } 
```

我得到了 JSON。

我究竟做错了什么？我正在尝试在第一种情况下获取 JSON。

更新：我已经验证 $test 变量确实不为空，当我对其执行 print_r 时，它显示以下内容：

```
Array
(
    [0] => Rest\WebServiceBundle\Entity\Test Object
        (
            [id:protected] => 1
            [title:protected] => test title
            [author:protected] => test author
            [blog:protected] => this is the blog
            [tags:protected] => 
            [comments:protected] => 
            [created:protected] => DateTime Object
                (
                    [date] => 2012-05-13 00:00:00
                    [timezone_type] => 3
                    [timezone] => America/Chicago
                )

            [updated:protected] => DateTime Object
                (
                    [date] => 2012-05-13 00:00:00
                    [timezone_type] => 3
                    [timezone] => America/Chicago
                )

        )

)
null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:48:37.110

我强烈建议您将序列化程序用于返回实体。查看序列化程序组件或 jmsserializerbundle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T09:36:54.917

```
 $obj = $test;

        $serializer = new Serializer(
            array(new GetSetMethodNormalizer()),
            array('json' => new JsonEncoder())
        );
        $json = $serializer->serialize($obj, 'json');

        $response = new \Symfony\Component\HttpFoundation\Response($json);
        $response->headers->set('Content-Type', 'application/json');
        return $response; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T08:56:55.830

我已经通过在我的存储库类中使用 getArrayResult() 而不是 getResult() 进行了尝试，它可以工作

# android - 在 Renderscript Compute 中将数组传递给 rsForEach

> ID：10576583
> 
> 赞同：11
> 
> 时间：2012-05-14T01:23:16.297
> 
> 标签：android, image-processing, foreach, blur, renderscript

我发现 RenderScript 中缺少好的文档，据我所知，`forEach`在 RS 中是为分配中的每个单独项目执行 root()。

我正在尝试为进行图像处理的 Renderscript 创建一个库，作为起点，我得到了这个[很好的答案](https://stackoverflow.com/questions/10090583/how-to-write-a-convolution-multiplication-in-android-renderscript)。但问题是，模糊操作是在*每个*像素上进行的，每个像素都需要另一个计算循环（n 和模糊宽度）。虽然运行在多核上，但还是有点太慢了。

我正在尝试对其进行修改以允许（两次通过）框过滤器，但这需要在单行或单列而不是单元格上工作。那么，有没有办法让 foreach 向 root() 发送一个数组呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T11:00:32.710

rsForEach 只能对分配进行操作。

如果您想让 rsForEach 函数为每个图像行调用 root()，您必须传入一个大小与行数相同的分配，然后计算出您应该在里面操作的行root() （类似地对每一列进行操作）。RenderScript 然后应该划分工作以在可用资源上运行（在多核设备上同时处理多行）。

您可以做到这一点的一种方法是传入一个分配，该分配给出图像行的偏移量（在图像数据数组内）。root() 中的 v_in 参数将是行偏移量。由于 rsForEach 调用所基于的分配不是图像数据，因此您无法使用 v_out 参数将图像写出，您必须单独绑定输出图像。

这是一些显示这一点的 RenderScript：

```
#pragma version(1)
#pragma rs java_package_name(com.android.example.hellocompute)

rs_allocation gIn;
rs_allocation gOut;
rs_script gScript;

int mImageWidth;
const uchar4 *gInPixels;
uchar4 *gOutPixels;

void init() {
}

static const int kBlurWidth = 20;

//
// This is called per row.
// The row indices are passed in as v_in or you could also use the x argument and multiply it by image width.
//
void root(const int32_t *v_in, int32_t *v_out, const void *usrData, uint32_t x, uint32_t y) {
    float3 blur[kBlurWidth];
    float3 cur_colour = {0.0f, 0.0f, 0.0f};

    for ( int i = 0; i < kBlurWidth; i++) {
        float3 init_colour = {0.0f, 0.0f, 0.0f};
        blur[i] = init_colour;
    }

    int32_t row_index = *v_in;
    int blur_index = 0;

    for ( int i = 0; i < mImageWidth; i++) {
        float4 pixel_colour = rsUnpackColor8888(gInPixels[i + row_index]);

        cur_colour -= blur[blur_index];
        blur[blur_index] = pixel_colour.rgb;
        cur_colour += blur[blur_index];

        blur_index += 1;
        if ( blur_index >= kBlurWidth) {
            blur_index = 0;
        }

        gOutPixels[i + row_index] = rsPackColorTo8888(cur_colour/(float)kBlurWidth);
        //gOutPixels[i + row_index] = rsPackColorTo8888(pixel_colour);
    }
}

void filter() {
    rsDebug("Number of rows:", rsAllocationGetDimX(gIn));
    rsForEach(gScript, gIn, gOut, NULL);
} 
```

这将使用以下 Java 进行设置：

```
 mBlurRowScript = new ScriptC_blur_row(mRS, getResources(), R.raw.blur_row);

    int row_width = mBitmapIn.getWidth();

    //
    // Create an allocation that indexes each row.
    //
    int num_rows = mBitmapIn.getHeight();
    int[] row_indices = new int[num_rows];
    for ( int i = 0; i < num_rows; i++) {
        row_indices[i] = i * row_width;
    }
    Allocation row_indices_alloc = Allocation.createSized( mRS, Element.I32(mRS), num_rows, Allocation.USAGE_SCRIPT);
    row_indices_alloc.copyFrom(row_indices);

    //
    // The image data has to be bound to the pointers within the RenderScript so it can be accessed
    // from the root() function.
    //
    mBlurRowScript.bind_gInPixels(mInAllocation);
    mBlurRowScript.bind_gOutPixels(mOutAllocation);

    // Pass in the image width
    mBlurRowScript.set_mImageWidth(row_width);

    //
    // Pass in the row indices Allocation as the input. It is also passed in as the output though the output is not used.
    //
    mBlurRowScript.set_gIn(row_indices_alloc);
    mBlurRowScript.set_gOut(row_indices_alloc);
    mBlurRowScript.set_gScript(mBlurRowScript);
    mBlurRowScript.invoke_filter(); 
```

# ios - 如何调整 UIButton 的 imageSize？

> ID：10576593
> 
> 赞同：182
> 
> 时间：2012-05-14T01:25:22.297
> 
> 标签：ios, objective-c, xcode, uibutton

如何调整 UIButton 的图像大小？我正在设置这样的图像：

```
[myLikesButton setImage:[UIImage imageNamed:@"icon-heart.png"] forState:UIControlStateNormal]; 
```

但是，这会将图像填充到完整按钮，如何使图像变小？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-05-14T01:49:53.960

如果我正确理解您要执行的操作，则需要使用按钮图像边缘插图。就像是：

```
myLikesButton.imageEdgeInsets = UIEdgeInsets(top: 30, left: 30, bottom: 30, right: 30) 
```

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2014-11-21T19:57:12.017

蒂姆的回答是正确的，但是我想添加另一个建议，因为就我而言，完全有一个更简单的解决方案。

我正在寻找设置`UIButton`图像插图，因为我没有意识到我可以在按钮的 上设置内容模式`UIImageView`，这将避免完全使用 UIEdgeInsets 和硬编码值的需要。只需访问按钮上的底层图像视图并设置内容模式：

```
myButton.imageView.contentMode = UIViewContentModeScaleAspectFit; 
```

见[UIButton 不听内容模式设置？](https://stackoverflow.com/questions/2950613/uibutton-doesnt-listen-to-content-mode-setting)

**斯威夫特 3**

```
myButton.imageView?.contentMode = .scaleAspectFit 
```

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2017-05-05T18:39:50.240

斯威夫特 3：

```
button.setImage(UIImage(named: "checkmark_white"), for: .normal)
button.contentVerticalAlignment = .fill
button.contentHorizontalAlignment = .fill
button.imageEdgeInsets = UIEdgeInsetsMake(10, 10, 10, 10) 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2016-11-14T10:05:39.290

您也可以像这样从界面构建器中执行此操作。

[![在此处输入图像描述](../Images/65bc7c00b1117b8c616572e797f56253.png)](https://i.stack.imgur.com/Fue1h.png)

我认为这很有帮助。

* * *

## 回答 #5

> 赞同：40
> 
> 时间：2017-02-07T19:16:56.793

如果您的图像太大（并且您不能/不想将图像缩小），则前两个答案的组合效果很好。

```
addButton.imageView?.contentMode = .scaleAspectFit
addButton.imageEdgeInsets = UIEdgeInsetsMake(15.0, 15.0, 15.0, 5.0) 
```

除非您获得恰到好处的图像插图，否则图像将倾斜而不改变`contentMode`.

* * *

## 回答 #6

> 赞同：39
> 
> 时间：2019-07-16T07:38:09.020

这是缩放 UIButton 的 imageView 的另一种解决方案。

```
button.imageView?.layer.transform = CATransform3DMakeScale(0.8, 0.8, 0.8) 
```

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2013-08-16T19:18:38.363

您可以使用`imageEdgeInsets`属性按钮图像周围矩形的内边距或外边距。

```
 [self.btn setImageEdgeInsets:UIEdgeInsetsMake(6, 6, 6, 6)]; 
```

正值会缩小或插入该边缘——移动。负值扩展或开始该边缘。

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2015-11-07T08:25:43.717

这是 Swift 版本：

```
myButton.imageEdgeInsets = UIEdgeInsets(top: 10, left: 10, bottom: 10, right: 10) 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2018-03-13T17:51:57.813

**斯威夫特 4**

您将需要按此特定顺序使用这两行代码。您只需要更改边缘插图的顶部和底部值。

```
addButton.imageView?.contentMode = .scaleAspectFit
addButton.imageEdgeInsets = UIEdgeInsetsMake(10.0, 0.0, 10.0, 0.0) 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2015-12-09T04:35:45.473

[在Tim C 的回答](https://stackoverflow.com/a/10576708/2767207)的帮助下，我能够创建一个`UIButton`使用 Swift 的扩展，它允许您通过使用`.setImage()`带有额外`frame`参数的函数来指定图像帧

```
extension UIButton{

    func setImage(image: UIImage?, inFrame frame: CGRect?, forState state: UIControlState){
        self.setImage(image, forState: state)

        if let frame = frame{
            self.imageEdgeInsets = UIEdgeInsets(
                top: frame.minY - self.frame.minY,
                left: frame.minX - self.frame.minX,
                bottom: self.frame.maxY - frame.maxY,
                right: self.frame.maxX - frame.maxX
            )
        }
    }

} 
```

使用它，如果您想将 a 的框架设置`UIButton`为`CGRectMake(0, 0, 64, 64)`，并将其图像设置为`myImage`的框架`CGRectMake(8, 8, 48, 48)`，您可以使用

```
let button: UIButton = UIButton(frame: CGRectMake(0, 0, 64, 64))
button.setImage(
    myImage,
    inFrame: CGRectMake(8, 8, 48, 48),
    forState: UIControlState.Normal
) 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2018-05-04T22:28:51.547

使用 更改图标大小时 `UIEdgeInsetsMake(top, left, bottom, right)`，请记住按钮尺寸和 UIEdgeInsetsMake 处理负值的能力，就好像它们是正值一样。

示例：两个高度为 100 且纵横比为 1:1 的按钮。

```
left.imageEdgeInsets = UIEdgeInsetsMake(40, 0, 40, 0)
right.imageEdgeInsets = UIEdgeInsetsMake(40, 0, 40, 0) 
```

[![在此处输入图像描述](../Images/3d7f0c47b29cdebe7620b5925b803e85.png)](https://i.stack.imgur.com/zfllp.png)

```
left.imageEdgeInsets = UIEdgeInsetsMake(40, 0, 40, 0)
right.imageEdgeInsets = UIEdgeInsetsMake(45, 0, 45, 0) 
```

[![在此处输入图像描述](../Images/749a97fe73e1064a2ac44081bc13fb64.png)](https://i.stack.imgur.com/m99zr.png)

```
left.imageEdgeInsets = UIEdgeInsetsMake(40, 0, 40, 0)
right.imageEdgeInsets = UIEdgeInsetsMake(60, 0, 60, 0) 
```

[![在此处输入图像描述](../Images/bcd571a2b5233b090a3f00e6c525af11.png)](https://i.stack.imgur.com/7tQpZ.png)

示例 1 和示例 3 相同，因为 ABS(100 - (40 + 40)) = ABS(100 - (60 + 60))

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-03-08T07:55:49.140

**为 Swift > 5 更新**

设置大小：

```
button.frame = CGRect(x: 0, y: 0, width: 44, height: 44) 
```

* * *

设置边距：

```
button.imageEdgeInsets = UIEdgeInsets(top: 10, left: 10, bottom: 10, right: 10) 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-03-27T19:48:49.743

一种方法是在代码中调整 UIImage 的大小，如下所示。注意：此代码仅按高度缩放，但您也可以轻松调整函数以按宽度缩放。

```
let targetHeight = CGFloat(28)
let newImage = resizeImage(image: UIImage(named: "Image.png")!, targetHeight: targetHeight)
button.setImage(newImage, for: .normal)

fileprivate func resizeImage(image: UIImage, targetHeight: CGFloat) -> UIImage {
    // Get current image size
    let size = image.size

    // Compute scaled, new size
    let heightRatio = targetHeight / size.height
    let newSize = CGSize(width: size.width * heightRatio, height: size.height * heightRatio)
    let rect = CGRect(x: 0, y: 0, width: newSize.width, height: newSize.height)

    // Create new image
    UIGraphicsBeginImageContextWithOptions(newSize, false, 0)
    image.draw(in: rect)
    let newImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    // Return new image
    return newImage!
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-09-08T19:20:29.697

斯威夫特 3

我将 myButton 的宽度和高度设置为 40，EdgeInsetsMake 的边距设置为 15。我建议为您的按钮添加背景颜色以查看实际的填充。

```
myButton.backgroundColor = UIColor.gray // sample color to check padding
myButton.imageView?.contentMode = .scaleAspectFit
myButton.imageEdgeInsets = UIEdgeInsetsMake(15, 15, 15, 15) 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2021-10-13T11:13:58.187

如果您为按钮使用**符号图像**，则此解决方案更好：

```
button.setPreferredSymbolConfiguration(UIImage.SymbolConfiguration(pointSize: 48), forImageIn: .normal) 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-12-02T16:19:41.780

插入图像对我有用，但我还需要将按钮类型设置为自定义，并将按钮样式设置为默认值。Xcode 13 中添加的按钮的默认值是 System for Type 和 Plain for Style。

```
self.imageEdgeInsets = UIEdgeInsets(top: 3.0, left: 3.0, bottom: 3.0, right: 3.0) 
```

[![在此处输入图像描述](../Images/61becac4ff8253d5f7ccffbb035e8773.png)](https://i.stack.imgur.com/BMSm7.png)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-08-19T05:27:07.787

**为 Swift 3 更新**

```
yourButtonName.imageEdgeInsets = UIEdgeInsetsMake(10, 10, 10, 10) 
```

* * *

## 回答 #18

> 赞同：-6
> 
> 时间：2012-05-14T05:51:32.183

我认为，您的图像大小也与按钮大小相同，然后您将图像放在按钮的背景中，例如：

```
[myLikesButton setBackgroundImage:[UIImage imageNamed:@"icon-heart.png"] forState:UIControlStateNormal]; 
```

你桅杆有相同大小的图像和按钮。我希望你明白我的意思。

# asp.net-mvc-3 - MVC3 HTML 扩展方法使用两种绑定，而不是通常的一种

> ID：10576594
> 
> 赞同：2
> 
> 时间：2012-05-14T01:25:35.233
> 
> 标签：asp.net-mvc-3, extension-methods

我正在尝试改进我的 HTML 扩展方法，以便我可以绑定 ID 和 Value 组件以像这样工作：

```
@Html.AutoCompleteFor(model => model.Customer.ID, model => model.Customer.Name, "/Customer/Autocomplete") 
```

我目前这样做：

```
@Html.AutoCompleteFor(model => model.CustomerID, model => model.CustomerID_display, "/Customer/Autocomplete") 
```

我需要扩展模型以包含 CustomerID_display，这有点笨拙，并且需要非常具体的后期处理。

我需要绑定显示值（即实体的文本名称）的原因是，如果用户输入一个新项目，它可以被检测到并可能自动生成。

我上面预期的方法当然行不通，而且我可能离题了。但是你应该有效地知道我想要做什么。如果我预期的上述方法有效，那么我对 AutoCompleteFor 的实现将非常简单（这些天每个人都在使用“琐碎”这个词！）。我期待 lambda 可以更有用一点，也许：

```
@Html.AutoCompleteFor(model => new AutoCompleteBinding { ID = model.Customer.ID, Name = model => model.Customer.Name }, "/Customer/Autocomplete") 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:52:07.690

在您的 HTML "...For" 扩展中，您通常只有一个 Expression 参数。

```
 public static MvcHtmlString AutoCompleteFor<TModel, TValue>(
           this HtmlHelper<TModel> htmlHelper,
           Expression<Func<TModel, TValue>> expression,
           object postingTextBoxHtmlAttributes,
            string extraArguments,
            string sourceURL
           )
        {
              //...
        } 
```

只需扩展它，以包含另一个表达式。添加：

```
Expression<Func<TModel, TValue>> expression 
```

制作：

```
public static MvcHtmlString AutoCompleteFor<TModel, TValue>(
           this HtmlHelper<TModel> htmlHelper,
           Expression<Func<TModel, TValue>> expression,
           Expression<Func<TModel, TValue>> expression2,
           object postingTextBoxHtmlAttributes,
            string extraArguments,
            string sourceURL
           )
        {
            //...
        } 
```

您现在可以像通常使用表达式一样使用表达式 2。（当然，您应该将其命名为直观的名称）。

用法将如问题中所述：

```
@Html.AutoCompleteFor(model => model.Customer.ID, model => model.Customer.Name, "/Customer/Autocomplete") 
```

# windows-7 - 确定操作系统是否为 WIN 7 SP1 的 #if 预处理器指令是什么？

> ID：10576595
> 
> 赞同：1
> 
> 时间：2012-05-14T01:25:54.380
> 
> 标签：windows-7, c-preprocessor, preprocessor-directive

我想根据编译机是否运行 Windows 7 SP1 进行条件编译。

我们有[http://support.microsoft.com/kb/2517589](http://support.microsoft.com/kb/2517589)的解决方法，但我不想检查代码，除非它由 #ifdef _WIN7_SP1 保护，否则其他开发人员将无法编译它在他们的非 win7-sp1 机器上。

我有一点谷歌，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:50:03.090

你没有。构建机器环境中的东西通常不会像那样污染编译。（想象一下如果发生这种情况以及它会对构建的可重复性造成什么影响。）

如果你真的需要，我会让你的构建系统（make、Visual Studio 等）执行一个程序来检查当前的 Windows 版本并在必要时失败（或者你的构建系统可能已经确定了这一点）。基于此，您可以`WIN7_SP1`通过编译器的命令行参数有条件地进行自己的定义。

# android - 跨移动选项

> ID：10576602
> 
> 赞同：1
> 
> 时间：2012-05-14T01:26:26.093
> 
> 标签：android, c++, ios, mobile, code-generation

我创建了一个 Android 应用程序。虽然创建一个特定的应用程序是一个有趣的挑战，但我现在正在研究创建一组类似的应用程序。

我想创建一组类似的 Android 应用程序，然后继续在平板电脑和 iOS 上创建相同的应用程序......（任何移动设备）。

我考虑过使用名为 PhoneGap 的产品或基于 Web 的移动应用程序这样做。这两种选择似乎都不理想。做 Android 应用程序时，我对 Java 缺乏控制和低级结构感到沮丧。转向基于 Web 的应用程序之类的东西似乎是完全错误的方向。

C++ 是我选择的语言。它具有在低级别工作的能力，跨平台高度可移植，并且对通用编码具有重要支持，这对于生成一组类似的应用程序很有用。但是，Android 文档建议不要使用 C++，除非您的目标是移植现有代码或处理计算量大的任务。

无论如何，我倾向于使用 C++，但是还有其他我没有考虑过的选项吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:09:27.417

理论上你可以用 C++ 编写你的逻辑，然后在上面有 UI 层来使用它。如果您真的对 C++ 感到满意，那可能就是您要走的路。

几乎所有其他部分（网络、UI、动画等）最好用平台的本地语言完成。使用跨平台解决方案总是以某种方式限制您，并且通常会导致应用程序不如任何平台好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T01:56:35.090

好吧，我相信谷歌不使用 C++ 的建议是基于以下内容。C++ 是低级的，因此**如果您知道自己在做什么**，就可以从中获得额外的性能。谷歌做出了许多程序员没有做出的合理假设。对于没有经验的程序员来说，在 C++ 中做坏事然后获得性能提升更容易。

但是，如果您知道自己在做什么，它可以帮助您。iOS 和 Android 上的 UI 元素都是用它们的主要语言（分别为 obj-c 和 Java）实现的，所以没有很好的解决方法，但是你可以用 C++ 编写核心逻辑和其他函数，并且可以在它们之间移植（iOS 可以直接使用 C++，Android 可以通过 Native Development Kit 使用）。

还有一些其他选项可用。我最终使用的是[Appcelerator Titanium](http://www.appcelerator.com/)，但请远离它。如果您的项目变得复杂或庞大，您会像我一样讨厌自己选择它。另一个使用 C++ 而不是 Javascript 的有趣的是[Marmalade](http://www.madewithmarmalade.com/marmalade/benefits/richer-cross-platform-native-apps)。不过我没用过，所以不能评论。

[Xamarin](http://xamarin.com/)是我听说好的一个非免费解决方案，它已经将两种环境都移植到了 C# 和使用 Mono 的 .NET。但是，据我所知，您仍然需要为 UI 编写两个版本的代码。

# bash - 用文件中的多行替换一行

> ID：10576604
> 
> 赞同：9
> 
> 时间：2012-05-14T01:27:10.853
> 
> 标签：bash, unix, sed, ed

我想用多行替换文件中的单行，例如，我想替换特定的函数调用，例如，

```
foo(1,2) 
```

和

```
if (a > 1) {  
    foo(1,2)  
} else {  
    bar(1,2)  
} 
```

我怎样才能在 bash 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T02:26:14.180

这就是 sed`s`命令的用途：

```
shopt -s extglob

ORIG="foo(1,2)"
REP="if (a > 1) {  
      foo(1,2)  
} else {  
      bar(1,2)  
}"

REP="${REP//+(
)/\\n}"

sed "s/$ORIG/$REP/g" inputfile > outputfile 
```

请注意，仅当您想以我在第二行中所做的格式化方式`REP="${REP//\+( )/\\n}"`定义时才需要这些行。如果您刚开始`REP`使用它可能会更`\n`简单。`\t``REP`

编辑：注意！你需要逃跑`'`，`\`如果你有他们，你也需要在你的 REP 中逃跑。

***针对OP的问题进行编辑***

要更改原始文件而不创建新文件，请使用 sed 的`--in-place`标志，如下所示：

```
sed --in-place "s/$ORIG/$REP/g" inputfile 
```

请小心使用`--in-place`国旗。在运行之前进行备份，因为所有更改都是永久性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:12:16.183

这可能对您有用：

```
cat <<\! |
> a
> foo(1,2)
> b
> foo(1,2)
> c
> !
> sed '/foo(1,2)/c\
> if (a > 1) {\
>     foo(1,2)\
> } else {\
>     bar(1,2)\
> }' 
a
if (a > 1) {
    foo(1,2)
} else {
    bar(1,2)
}
b
if (a > 1) {
    foo(1,2)
} else {
    bar(1,2)
}
c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T17:56:33.420

要在文件中就地替换字符串，您可以使用 ed （在问题中方便地标记）。假设您的输入文件如下所示：

```
line before
foo(1,2)
line between
    foo(1,2)
line after 
```

您可以编写一个脚本来进行替换并将其存储在一个文件中，例如`script.ed`：

```
%s/\([[:blank:]]*\)foo(1,2)/\1if (a > 1) {\
\1    foo(1,2)\
\1} else {\
\1    bar(1,2)\
\1}/
w
q 
```

请注意，这考虑了缩进；在原始文件中的函数调用之前，每一行都带有任何空白，因此结果如下所示：

```
$ ed -s infile < script.ed
$ cat infile
line before
if (a > 1) {
    foo(1,2)
} else {
    bar(1,2)
}
line between
    if (a > 1) {
        foo(1,2)
    } else {
        bar(1,2)
    }
line after 
```

如果函数调用不是单独在一行上，而是可能由不应删除的其他字符前置，您可以将其用作替换的第一行：

```
%s/\([[:blank:]]*\)\(.*\)foo(1,2)/\1\2if (a > 1) {\ 
```

所以这

```
 } something; foo(1,2) 
```

会成为

```
 } something; if (a > 1) {
        foo(1,2)
    } else {
        bar(1,2)
    } 
```

缩进仍然得到适当的考虑。

# c# - razor 中此代码的正确语法

> ID：10576606
> 
> 赞同：2
> 
> 时间：2012-05-14T01:27:26.407
> 
> 标签：c#, asp.net-mvc-3, razor

我在尝试使此代码与剃须刀一起使用时遇到问题

```
@for (int i = 0; i < Model.Count(); i++)
{
    <ul>@createSubastaContainer(Model.ElementAt(i))
    if (i % 5 == 0)
    {
        </ul>
    }
} 
```

如果元素是 5 的乘积，我想要什么打印结束`</ul>`

我的代码有什么问题，因为它一直在打印`</ul>`以及表达式本身

**更新**

基于红色的@marteljn 在我进行更改时回答它会引发异常

`The for block is missing a closing "}" character. Make sure you have a matching "}" character for all the "{" characters within this block, and that none of the "}" characters are being interpreted as markup.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:31:01.613

您需要`@`在您的`if`语句之前放置一个，因此`@if (...`，作为旁注，这将是创建扩展 HtmlHelper 类的扩展方法的绝佳机会。

**编辑**

它正在拾取一个不匹配的标签。当涉及到不匹配的标签时，razor 视图引擎强制执行 HTML 合规性。所以你可以做的是用`@Html.Raw("<ul>")`and替换你的标签`@Html.Raw("</ul>")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:10:01.727

尝试这个：

```
@for (int i = 0; i < Model.Count(); i++)  
{
    <ul>@createSubastaContainer(Model.ElementAt(i))
    @if (i % 5 == 0)
    {
        <text></ul></text>
    }
} 
```

或这个：

```
@for (int i = 0; i < Model.Count(); i++)  
{
    <ul>@createSubastaContainer(Model.ElementAt(i))
    @if (i % 5 == 0)
    {
        @: </ul>
    }
} 
```

在这里，您有一篇关于这一切的精彩帖子：[http ://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-语法.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:23:14.847

这应该工作：

```
@for (int i = 0; i < Model.Count(); i++) 
{ 
    @:<ul>
    createSubastaContainer(Model.ElementAt(i)) 
    if (i % 5 == 0) 
    { 
        @:</ul> 
    } 
} 
```

# python - 在 Python 中获取多个元组列表的第二个元素的交集的简单有效的方法？

> ID：10576607
> 
> 赞同：3
> 
> 时间：2012-05-14T01:27:47.513
> 
> 标签：python, python-2.7

我是 Python 新手（在 2.7 中工作），我发现 SO 是一个非常有价值的资源！

假设我正在处理几个通常为 (ID, value) 形式的 2 元素元组列表，例如，

```
list1 = [(111, 222), (111, 333), (111, 444)]
list2 = [(555, 333), (555, 444), (555, 777)]
list3 = [(123, 444), (123, 888), (123, 999)] 
```

我真正想做的是找到一种简单（且计算效率高）的方法来获取这些元组的第二个元素的交集。我查看了[Python 文档](http://docs.python.org/library/sets.html)，发现集合可能会做我想做的事……[这篇文章](https://stackoverflow.com/questions/642763/python-intersection-of-two-lists)有助于我理解如何获得两个列表的交集。

我知道我可以通过像这样循环遍历元组来制作三个全新的“仅值”列表：

```
newList1 = []
for tuple in list1:
   newList1.append(tuple[1])
newList2 = []
for tuple in list2:
   newList2.append(tuple[1])
newList3 = []
for tuple in list3:
   newList3.append(tuple[1]) 
```

然后像这样得到每一对的交集：

```
i_of_1and2 = set(newList1).intersection(newList2)
i_of_1and3 = set(newList2).intersection(newList3)
i_of_2and3 = set(newList1).intersection(newList3) 
```

但是我的列表有点大——比如几十万（有时是几千万）的元组。这真的是获取这三个列表元组中第二个元素的交集的最佳方法吗？对我来说，这似乎……不优雅……。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:38:09.550

你一开始就表现出一个大问题`variable1`通常是一个不好的迹象 - 如果你想有多个值，请使用数据结构，而不是大量带有编号名称的变量。这可以防止您一遍又一遍地重复您的代码，并有助于阻止错误。

让我们使用列表列表来代替：

```
values = [
    [(111, 222), (111, 333), (111, 444)],
    [(555, 333), (555, 444), (555, 777)],
    [(123, 444), (123, 888), (123, 999)]
] 
```

现在我们只想获取子列表中每个元组的第二个元素。[使用列表](https://www.youtube.com/watch?v=t85uBptTDYY)推导很容易计算：

```
>>> [[item[1] for item in sublist] for sublist in values]
[[222, 333, 444], [333, 444, 777], [444, 888, 999]] 
```

然后，我们想要项目之间的交集，我们[`itertools.combinations()`](http://docs.python.org/library/itertools.html#itertools.combinations)用来获得两个可能的各种对：

```
>>> for values, more_values in itertools.combinations(new_values, 2):
...     set(values).intersection(more_values)
... 
{444, 333}
{444}
{444} 
```

所以，如果我们把它包装在一起：

```
import itertools

values = [
    [(111, 222), (111, 333), (111, 444)],
    [(555, 333), (555, 444), (555, 777)],
    [(123, 444), (123, 888), (123, 999)]
]

sets_of_first_items = ({item[1] for item in sublist} for sublist in values)
for values, more_values in itertools.combinations(sets_of_first_items, 2):
    print(values.intersection(more_values)) 
```

这给了我们：

```
{444, 333}
{444}
{444} 
```

我在这里所做的更改是使内部列表成为集合推导，以避免创建列表只是为了将其转换为集合，并使用生成器表达式而不是列表推导，因为它是惰性求值的。

最后一点，如果您想要我们用来生成交集的列表的索引，使用[内置`enumerate()`函数](http://docs.python.org/library/functions.html#enumerate)很简单：

```
sets_of_first_items = ({item[1] for item in sublist} for sublist in values)
for (first_number, first_values), (second_number, second_values) in itertools.combinations(enumerate(sets_of_first_items), 2):
    print("Intersection of {0} and {1}: {2}".format(first_number, second_number, first_values.intersection(second_values))) 
```

这给了我们：

```
Intersection of 0 and 1: {444, 333}
Intersection of 0 and 2: {444}
Intersection of 1 and 2: {444} 
```

编辑：

正如[tonyl7126](https://stackoverflow.com/a/10576685/722121)所指出的，这也是一个可以通过使用更好的数据结构得到很大帮助的问题。这里最好的选择是将用户 ID 的字典用于一组产品 ID。当您只需要一个集合并且稍后将其转换为集合时，没有理由将您的数据存储为列表，并且 dict 对于您尝试存储的数据类型是一个更好的解决方案。

请参见以下示例：

```
import itertools

values = {
    "111": {222, 333, 444},
    "555": {333, 444, 777},
    "123": {444, 888, 999}
}

for (first_user, first_values), (second_user, second_values) in itertools.combinations(values.items(), 2):
    print("Intersection of {0} and {1}: {2}".format(first_user, second_user, first_values.intersection(second_values))) 
```

给我们：

```
Intersection of 555 and 123: {444}
Intersection of 555 and 111: {444, 333}
Intersection of 123 and 111: {444} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T01:45:30.150

我不确定您是否已经阅读过有关 python 中的字典的信息，但这似乎适合您尝试结合列表做得更好。字典由键和值组成，就像您似乎用 2 元素元组模拟的一样。

例如，list1、list2 和 list3 可以表示为如下所示的字典（假设 111 是 id）： your_dict = {"111": [222, 333, 444], "555": [333 , 444, 777], "123":[444, 888, 999]}

因此，如果您想获取特定 id 的所有值，例如“111”，您可以编写： your_dict.get("111") 并返回列表。这里也是一些关于字典的文档的链接。 [http://docs.python.org/library/stdtypes.html#typesmapping](http://docs.python.org/library/stdtypes.html#typesmapping)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T01:36:20.080

您可以利用该[`set.intersection(...)`](http://docs.python.org/library/stdtypes.html#set.intersection)方法需要 2 组或更多组并找到它们的交集这一事实。此外，您可以使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)来减少代码膨胀。最后，您可以使用[参数列表解包](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)使其成为单线。例如：

```
>>> list1 = [(111, 222), (111, 333), (111, 444)]
>>> list2 = [(555, 333), (555, 444), (555, 777)]
>>> list3 = [(123, 444), (123, 888), (123, 999)]
>>>
>>> set.intersection(*[set(t[1] for t in l) for l in (list1, list2, list3)])
set([444]) 
```

为了帮助您了解发生了什么，对的调用`set.intersection(...)`等效于以下 python 代码：

```
>>> allsets = []
>>> for l in (list1, list2, list3):
...   n = set()
...   for t in l:
...     n.add(t[1])
...   allsets.append(n)
... 
>>> allsets
[set([444, 333, 222]), set([777, 444, 333]), set([888, 444, 999])]
>>> allsets[0].intersection(allsets[1]).intersection(allsets[2])
set([444]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T04:38:43.333

这是一个简单的方法。

```
>>> list1 = [(111, 222), (111, 333), (111, 444)]
>>> list2 = [(555, 333), (555, 444), (555, 777)]
>>> list3 = [(123, 444), (123, 888), (123, 999)]
>>> lists = [list1, list2, list3]
>>> set.intersection(*(set(zip(*list)[1]) for list in lists))
set([444]) 
```

1.  [zip *](http://docs.python.org/library/functions.html#zip)技巧用于解压缩元组并获取第二个元素的集合 。
2.  [set.intersection *](http://docs.python.org/library/stdtypes.html?highlight=intersection#set.intersection)用于将它们全部相交。

关于效率，我会先尝试简单的方法，看看是否足够快，然后再尝试优化。

# jekyll - 如何更改 Jekyll 网站的博客文章 URL？

> ID：10576614
> 
> 赞同：9
> 
> 时间：2012-05-14T01:29:29.137
> 
> 标签：jekyll

我正在使用 Jekyll 创建博客/网站。我进行了设置，以便它显示如下 URL：

```
http://example.com/blog/title-of-post 
```

我想修改它以更改 URL 的“博客”部分。例如：

```
http://example.com/writing/title-of-post 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-14T18:33:46.260

您可以通过在 *_config.yml* 文件中设置“永久链接”来做到这一点。例如：

```
permalink: /writing/:title 
```

*请注意，这假设 jekyll 正在构建您的整个站点，而不仅仅是为“博客”目录提供支持。如果 jekyll 只写入您的“博客”目录，那么您需要做的就是将其重命名为“写入”。*

# php - 在 PHP 中检查图像高度/宽度

> ID：10576615
> 
> 赞同：0
> 
> 时间：2012-05-14T01:29:30.070
> 
> 标签：php, mysql

我正在尝试检查 PHP 中的图像大小，但出现了几个错误。我可以保存图像并查看它，但是如果我添加一个函数来检查它的大小，我会得到一个错误。

```
Warning: imagesx() expects parameter 1 to be resource, array given in...

Warning: imagesy() expects parameter 1 to be resource, array given in... 
```

这是我用来检查大小/上传的

```
if(isset($_POST['submitImage'])){
  $image = new imageProcessing;
  $image->checkSize($_FILES["image"]);
} 
```

这是HTML

```
?>

<h2>Upload Profile Image</h2>
<form action="editinfo.php" method="post" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="image" id="file" /> <br />
<input type="submit" name="submitImage" value="Submit" />
</form> 
```

这是检查尺寸的功能

```
function checkSize($image){  
    if(imagesx($image) > 100 OR imagesy($image) > 100){
        echo "too large";
    }
} 
```

按照 DrAgonmoray 的建议使用 getimagesize，我收到以下错误

```
Warning: getimagesize() expects parameter 1 to be string, array given in... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:32:47.657

您可以使用 getimagesize() 函数来执行此操作。有关更多详细信息，请参阅 php 文档。

[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T01:39:46.573

几个小时前我实际上正在处理这个问题。这是我的解决方案：

```
$bannersize = getimagesize($image);
if ($bannersize[0] > 100 || $bannersize[1] > 100) {
    //error
} 
```

小心确保 $image 不为空。

您可以在此处阅读有关 getimagesize 的信息：http: [//php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T01:40:21.077

$_FILES 为您上传的每个文件提供一个数组信息。该数组包含 PHP 存储文件的临时文件的路径。这是您需要使用的临时文件名。同样， imagesx() 和 imagesy() 不接受文件名作为它们的参数。他们期望一个 GD 资源句柄。因此，您的代码在多个级别上都被破坏了。

```
if ($_FILES['image']['error'] !== UPLOAD_ERR_OK) {
   die("File upload failed with error code {$_FILES['image']['error']}");
}

$info = getimagesize($_FILES['image']['tmp_name']);
if ($info === FALSE) {
   die("Invalid file type");
}

if (($info[0] > 100) || ($info[1] > 100)) {
   die("Image must be at most 100x100");
} 
```

# php - pubnub PHP 订阅功能

> ID：10576618
> 
> 赞同：2
> 
> 时间：2012-05-14T01:30:15.233
> 
> 标签：php, html, subscribe, pubnub

我需要重大帮助！

我无法让 Pubnub 订阅功能与 PHP 一起使用！我可以让发布功能工作，但不能让订阅功能工作。我直接从 Pubnub 站点复制了一些代码，但我什么也没得到。有什么帮助吗？另外，我的 PHP 版本是 5.2.*。

代码：

```
<?
include("Pubnub.php");
$pubnub = new Pubnub(
    "not showing you",  // PUBLISH_KEY
    "not showing you",  // SUBSCRIBE_KEY
    "",      // SECRET_KEY
    false    // SSL_ON?
);
$pubnub->subscribe(array(
'channel' => 'Chat',
'callback' => create_function(
    '$message',
    'var_dump($message); return true;'
    )
));
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:50:03.737

> **⚠️ ALERT：SDK 已升级⚠️**
> 
> 新 SDK 网址：[https ://github.com/pubnub/php](https://github.com/pubnub/php)

您正在询问一种在使用 PHP 作为动态处理语言的 Web 服务器（如 Apache）中使用订阅方法的方法。请注意，这不是一个好的做法，通常没有必要这样做。您不会在请求/响应中 使用**Subscribe({...})方法。**

使用**$pubnub->subscribe(...)**方法的正确方法是在一个长期存在的 PHP 进程中，不涉及 Web 服务器请求-响应模型。以下是一些已确认有效的示例：

[https://github.com/pubnub/php](https://github.com/pubnub/php)

**请注意，当在 PHP 中使用订阅**API时，假定每个示例都位于 Web 服务器（如 Apache）**之外的一个单独的 PHP 进程中。**然而！**Publish()** API 可以在任何地方使用，包括 Apache Web 服务器 。

 ******使用 Apache PHP 阅读历史**

作为替代方案，您将很高兴利用我们的 HISTORY API。您可以使用此查询队列中的消息并接收消息。下面是一个 PHP History API 使用示例：

```
<?php

## Capture Publish and Subscribe Keys from Command Line
$publish_key   = "YOUR_PUBLISH_KEY";
$subscribe_key = "YOUR_SUBSCRIBE_KEY";

## Require Pubnub API
require('../Pubnub.php');

## -----------------------------------------
## Create Pubnub Client API (INITIALIZATION)
## -----------------------------------------
$pubnub = new Pubnub( $publish_key, $subscribe_key );

## Get History
echo("Requesting History...\n");
$messages = $pubnub->history(array(
    'channel' => 'hello_world', ## REQUIRED Channel to Send
    'limit'   => 100            ## OPTIONAL Limit Number of Messages
));
var_dump($messages);            ## Prints Published Messages.

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T00:33:14.170

php subscribe 功能已损坏，将在即将推出的新 api 中修复，我最近与支持人员讨论了这个问题，他们给了我这个信息。****

# zend-framework - Zend Framework 高级 WHERE IN 查询

> ID：10576626
> 
> 赞同：1
> 
> 时间：2012-05-14T01:32:21.147
> 
> 标签：zend-framework, zend-db-table

所以，我想出了这个查询，执行时效果很好。但是，由于我想使用 Zend 的分页，所以查询必须通过适配器。

这是必须转换的查询：（我已经删除了查询，所以只有重要的部分在这里。我知道你不能运行这个查询 LOL）

```
//snip
WHERE
    city IN (
        SELECT 
            Plaatsnaam
        FROM
            plaatsnamen
        WHERE
            Latitude 
                BETWEEN 
                    ?
                AND 
                    ?
        AND
            Longitude
                BETWEEN
                    ?
                AND
                    ?       
    )
//snip 
```

工作得很好！但是..如您所见，我使用的是“高级” WHERE IN case。不知何故，我无法得到这个转换，我被卡住了。

这是它必须转换为：

```
$db = Zend_Db_Table::getDefaultAdapter();                
$select = $db->select('gethousecity.id, city')
                                ->from('gethousecity')
                                    ->join('houses_props', 'houses_props.id = gethousecity.id')
                                ->where('city IN ()') // HOW TO CONVERT THE UPPER QUERY TO FIT IT HERE?
                                ->where('is_online = 1')
                                ->where('houses_props.prop_name = ?', 'something')
                                ->where('houses_props.prop_value BETWEEN ? AND ?', array(1,2)); 
```

我根本没有找到任何关于如何将查询转换为适合此处的格式的文档。有谁有想法吗？主要是因为我需要插入一些值，而 ZF 正在那里重写一些奇怪的东西。

我现在有点卡住了，任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T14:51:43.717

子查询工作得很好。

```
$select1->cols('id')->where('date > NOW()');
$select2->where('id IN (?)', $select1); 
```

如果问题出在复杂的位置，则可以使用命名参数。

```
$select1 = $db->select();
$select2 = $db->select();
$select1->from('plaatsnamen', array('Plaatsnaam'))
        ->where('Latitude BETWEEN :latmin AND :latmax')
        ->where('Longitude BETWEEN :longmin AND :longmax');
$select2->from('gethousecity')
        ->join('houses_props', 'houses_props.id = gethousecity.id')
        ->where('city IN ?', $select1) // HOW TO CONVERT THE UPPER QUERY TO FIT IT HERE?
        ->where('is_online = 1')
        ->where('houses_props.prop_name = ?', 'something')
        ->where('houses_props.prop_value BETWEEN :propsmin AND :propsmax');
die($select2); 
```

回报：

```
SELECT `gethousecity`.*, `houses_props`.*
FROM `gethousecity`
INNER JOIN `houses_props` ON houses_props.id = gethousecity.id
WHERE 
    (city IN (
        SELECT `plaatsnamen`.`Plaatsnaam`
        FROM `plaatsnamen`
        WHERE 
        (Latitude BETWEEN :latmin AND :latmax) AND
        (Longitude BETWEEN :longmin AND :longmax)
    )) AND
    (is_online = 1) AND
    (houses_props.prop_name = 'something') AND
    (houses_props.prop_value BETWEEN :propsmin AND :propsmax) 
```

哪个应该与命名参数一起使用，如[手册中所示](http://framework.zend.com/manual/en/zend.db.statement.html#zend.db.statement.executing)

```
$bind = array(
    ':latmin' => 10,
    ':latmax' => 3,
    '...' => '...',
);
$db->fetchAll($select2, $bind); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T01:42:32.373

据我所知，ZF DB 没有对子查询的原生支持。

你可以尝试这样做：

```
// snip
->where("city IN (
    SELECT Plaatsnaam
    FROM plaatsnamen
    WHERE Latitude BETWEEN $lowLat AND $highLat
      AND Longitude BETWEEN $lowLon AND $highLon
)")
// snip 
```

**编辑**：将值直接插入到条件字符串中，只有在变量受信任的情况下才安全（或者如果您从用户那里获得它们，请确保在执行此操作之前将它们转换为浮点数）。

或者，您可以尝试避免子查询，而是进行连接，但这可能会影响性能（可能是好是坏）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T01:58:18.080

最后，作为一种快速的解决方法，我想出了以下方法；$db->报价。

```
$select = $db->select('gethousecity.id, city')
                                    ->from('gethousecity')
                                        ->join('houses_props', 'houses_props.id = gethousecity.id')
                                    ->where('city IN (  
                                                    SELECT Plaatsnaam
                                                    FROM plaatsnamen
                                                    WHERE Latitude BETWEEN '.$latlon_search[0].' AND '.$latlon_search[1].'
                                                        AND Longitude BETWEEN '.$latlon_search[2].' AND '.$latlon_search[3].'
                                    )') 
                                    ->where('is_online = 1')
                                    ->where('houses_props.prop_name = ?', 'vraagprijs[vraagprijs]')
                                    ->where('houses_props.prop_value BETWEEN '.$db->quote($price_start).' AND '.$db->quote($price_end)); 
```

对我来说，这是完成这项工作的唯一方法。每次我这样做：

```
->where('statement ? AND ?', array($val1, $val2) 
```

结果是这样的：

```
statement val1,val2 AND val1,val2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:11:23.817

试试这个

```
 $db = Zend_Db_Table::getDefaultAdapter();  
    $selectInner = $db->select()->from('plaatsnamen','Plaatsnaam')
                   ->where("Lattitude BETWEEN $lowLat AND $highLat")
                   ->where("Longitude BETWEEN $lowLon AND $highLon")
                   ->__toString();

    $select = $db->select('gethousecity.id, city')
                                    ->from('gethousecity')
                                        ->join('houses_props', 'houses_props.id = gethousecity.id')
                                    ->where("city IN ($selectInner)"); 
```

# ruby-on-rails - 我收到错误消息：在“tr”中：运行时 UTF-8 中的无效字节序列（ArgumentError）：ruby dk.rb init

> ID：10576631
> 
> 赞同：2
> 
> 时间：2012-05-14T01:33:02.597
> 
> 标签：ruby-on-rails, ruby, json, utf-8, tr

我已经在我的电脑上安装了 Ruby 1.92，并且想安装 rails。

当我运行:`gem install rails`时，我收到如下错误消息：

```
*D:\Ruby192\Devkit>gem install rails
*ERROR:  Error installing rails:
        The 'json' native gem requires installed build tools.
Please update your PATH to include build tools or download the DevKit
from 'http://rubyinstaller.org/downloads' and follow the instructions
at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'** 
```

然后我下载 DevKit 4.5.2 或 DevKit 3.5 并尝试它们：

```
D:\Ruby192\Devkit>ruby dk.rb init 
```

我总是收到错误消息：

```
d:/Ruby192/lib/ruby/1.9.1/win32/registry.rb:175:in `tr': invalid byte sequence in UTF-8 (ArgumentError)
        from d:/Ruby192/lib/ruby/1.9.1/win32/registry.rb:175:in `initialize'
        from d:/Ruby192/lib/ruby/1.9.1/win32/registry.rb:233:in `exception'
        from d:/Ruby192/lib/ruby/1.9.1/win32/registry.rb:233:in `raise'
        from d:/Ruby192/lib/ruby/1.9.1/win32/registry.rb:233:in `check'
        from d:/Ruby192/lib/ruby/1.9.1/win32/registry.rb:256:in `OpenKey'
        from d:/Ruby192/lib/ruby/1.9.1/win32/registry.rb:387:in `open'
        from d:/Ruby192/lib/ruby/1.9.1/win32/registry.rb:498:in `open'
        from dk.rb:118:in `block in scan_for'
        from dk.rb:116:in `each'
        from dk.rb:116:in `scan_for'
        from dk.rb:138:in `block in installed_rubies'
        from dk.rb:138:in `collect'
        from dk.rb:138:in `installed_rubies'
        from dk.rb:146:in `init'
        from dk.rb:313:in `run'
        from dk.rb:332:in `<main>' 
```

大家对这个问题有什么建议吗？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:27:10.487

我也遇到过同样的情况。我认为您可能想要安装`json`库。您应该在此终端上使用`msys.bat`和安装。`json`

1.  `msys.bat`在 DevKit 目录中执行 -> 它调用一个新终端。
2.  `gem install json`在这个终端上。
3.  你可以继续`gem install rails`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T19:40:08.403

`LANG`通过首先清除环境变量为我解决了这个问题：

```
set LANG=
ruby dk.rb init 
```

这个想法来自[RubyInstaller Google Group 上的这个问题](https://groups.google.com/forum/#!msg/rubyinstaller/zCj6ttx_GdI/LPFdToNc4O0J)。

# apache-flex - 使用 actionscript 在 Spark Textarea 中应用自定义边框大小

> ID：10576633
> 
> 赞同：0
> 
> 时间：2012-05-14T01:33:05.850
> 
> 标签：apache-flex, actionscript

它可以使用 actionscript 在 spark textarea 上实现边框大小吗？如果是，这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:11:05.530

```
// assuming textArea is initialized Spark TextArea instance
var skin:TextAreaSkin = TextAreaSkin(textArea.skin);
skin.borderStroke.weight = 5;
skin.setElementIndex(skin.border, skin.numElements - 1); 
```

这个解决方案应该可以工作，但它不可靠 -[考虑编写自己的版本来`TextAreaSkin`代替](http://help.adobe.com/en_US/flex/using/WS53116913-F952-4b21-831F-9DE85B647C8A.html)。

# python - 给定圆上的 2 个点和它们之间的角度，如何找到中心（在 python 中）？

> ID：10576641
> 
> 赞同：-4
> 
> 时间：2012-05-14T01:35:47.627
> 
> 标签：python, trigonometry

我在一个圆上有 2 个点以及它们之间的角度，我想找到这样定义的圆的中心（嗯，最好是两个中心）。 ![在此处输入图像描述](../Images/c1b25fba4da014d7f5f06b11190b17f8.png)

```
def find_center(p1,p2,angle):
  # magic happens... What to do here?
  return (center_x, center_y) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:25:55.903

这是我的测试代码解决方案

```
from pylab import *
from numpy import *

def find_center(p1, p2, angle):
    # End points of the chord
    x1, y1 = p1 
    x2, y2 = p2 

    # Slope of the line through the chord
    slope = (y1-y2)/(x1-x2)

    # Slope of a line perpendicular to the chord
    new_slope = -1/slope

    # Point on the line perpendicular to the chord
    # Note that this line also passes through the center of the circle
    xm, ym = (x1+x2)/2, (y1+y2)/2

    # Distance between p1 and p2
    d_chord = sqrt((x1-x2)**2 + (y1-y2)**2)

    # Distance between xm, ym and center of the circle (xc, yc)
    d_perp = d_chord/(2*tan(angle))

    # Equation of line perpendicular to the chord: y-ym = new_slope(x-xm)
    # Distance between xm,ym and xc, yc: (yc-ym)^2 + (xc-xm)^2 = d_perp^2
    # Substituting from 1st to 2nd equation for y,
    #   we get: (new_slope^2+1)(xc-xm)^2 = d^2

    # Solve for xc:
    xc = (d_perp)/sqrt(new_slope**2+1) + xm

    # Solve for yc:
    yc = (new_slope)*(xc-xm) + ym

    return xc, yc

if __name__=='__main__':
    p1 = [1., 2.]
    p2 = [-3, 4.]
    angle = pi/6
    xc, yc = find_center(p1, p2,angle)

    # Calculate the radius and draw a circle
    r = sqrt((xc-p1[0])**2 + (yc-p1[1])**2)
    cir = Circle((xc,yc), radius=r,  fc='y')
    gca().add_patch(cir)

    # mark p1 and p2 and the center of the circle
    plot(p1[0], p1[1], 'ro')
    plot(p2[0], p2[1], 'ro')
    plot(xc, yc, 'go')

    show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T17:25:26.233

你必须解决三角形 p1 p2 c。你只有一个角度。其他两个角度是 (180 角)/2 计算边 p1 p2 (距离) 然后计算边 p1 c 这给你圆的半径 r。解是两个点，它们是圆心 p1 和圆心 p2 以及半径 r 的交点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T17:36:15.287

```
# Solve for xc:
xc = (d_perp)/sqrt(new_slope**2+1) +xm # looks like +xm got omitted!)

# Solve for yc:
yc = (new_slope)*(xc-xm)+ym 
```

您还需要检查 x1=x2

```
# Slope of the line through the chord
if x1==x2
    slope = 999999
else
    slope = (y1-y2)/(x1-x2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T00:08:37.723

我对这些东西真的很生疏，所以这可能有点不对劲，但它应该能让你开始。另外，我不知道python，所以这只是伪代码：

```
//check to ensure...
  //The two points aren't the same
  //The angle isn't zero
  //Other edge cases

//Get the distance between the points
x_dist = x2 - x1;
y_dist = y2 - y1;

//Find the length of the 'opposite' side of the right triangle
dist_opp = (sqrt((x_dist)^2 + (y_dist)^2)));
x_midpoint = (x1 - (x_dist / 2);
y_midpoint = (y1 - (y_dist / 2);
theta = the_angle / 2; //the right triangle's angle is half the starting angle
dist_adj = cotangent(theta) * dist_opp;//find the right triangle's length

epsilon = sqrt((-y_dist)^2 + x_dist^2);
segments = epsilon / dist_adj;

x_center = x_midpoint + (x_dist * segments);
y_center = y_midpoint + (y_dist * segments); 
```

# playframework - 在自定义系统中嵌入 Play 应用程序

> ID：10576645
> 
> 赞同：6
> 
> 时间：2012-05-14T01:36:19.677
> 
> 标签：playframework, embed, playframework-2.0

我想在我自己的系统中嵌入一个基于 Play 的应用程序，类似于我对 Jetty 所做的事情。为了简化 - 而不是运行`start`脚本，我宁愿有一个`start()`方法。

为了更具描述性，让我们假设我有这种情况：

*   我得到了一个基于我自己的代码的复杂系统，它负责消息传递、事件处理等。
*   该系统的一部分使用 Morphia 映射 (MongoDB ORM)，Play 应用程序可以重用该映射
*   此时应用程序由 Java Service Wrapper 启动并作为守护进程运行
*   我想通过添加 Play 应用程序来扩展这个系统，它是我自己的应用程序的所有依赖项，并调用一些方法来启动具有底层协议栈（Netty）的应用程序

这种情况有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T23:43:21.767

`NettyServer`您可以使用该类以编程方式启动 Play 服务器：
[https ://github.com/playframework/Play20/blob/2.0.4/framework/src/play/src/main/scala/play/core/server/NettyServer.scala](https://github.com/playframework/Play20/blob/2.0.4/framework/src/play/src/main/scala/play/core/server/NettyServer.scala)

像：

```
NettyServer.createServer(new File("/path/to/app")) 
```

# javascript - 使用 JavaScript 日期对象处理未来和过去的日期和时间

> ID：10576650
> 
> 赞同：1
> 
> 时间：2012-05-14T01:36:41.253
> 
> 标签：javascript, node.js, date

我正在尝试根据当前时间以编程方式获取未来和过去的日期。我不确定我只是愚蠢还是我真的做错了什么。所以我有2个问题

Node.js 或 V8 引擎中是否有 getMinutes、getMonth 等...？我问是因为当我尝试它们时，我得到了`has no method`关于 Date 对象的每个错误？

第二个问题是：我是否错过了关于如何处理 Node/V8 中我刚刚在某处错过的日期的资源？

在一天结束时，我试图获取一个从一个小时前到一个小时后的日期对象。也是 5 分钟前和未来 5 分钟。看起来它不应该那么难，但我已经旋转了几个小时了。

也可以在没有第 3 方 javascript 模块的情况下执行此操作。

这是许多尝试中的一个，但运气不佳：

```
var d1 = Date();
console.log(d1);
console.log(d1.getMonth()); 
```

错误：

```
TypeError: Object Sun May 13 2012 20:28:01 GMT-0500 (CDT) has no method 'getMonth' 
```

这次来自 REPL 的另一个例子：（这不应该是“2012 年 3 月 3 日 3:03:03”）吗？

```
d1 = new Date(2012,3,3,3,3,3)
> Tue, 03 Apr 2012 08:03:03 GMT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:41:14.267

当[Date 构造函数作为函数调用](http://es5.github.com/#x15.9.2)时，它返回一个字符串，而不是一个日期对象。将您的代码更改为：

```
var d1 = new Date(); 
```

# c++ - C++ - 向量初始化失败

> ID：10576652
> 
> 赞同：1
> 
> 时间：2012-05-14T01:37:04.333
> 
> 标签：c++, vector, initialization, infinity

我正在尝试使用以下方法初始化多维向量：

```
vector<double> v0(point_list.size(), numeric_limits<double>::max);
vector<vector<double> > v1(point_list.size(),v0); 
```

不幸的是，我收到了错误：

```
error: no matching function for call to ‘std::vector<double>::vector(std::vector<std::vector<int> >::size_type, double (&)()throw ())’ 
```

任何人都可以向我解释这个以及如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:38:25.743

`numeric_limits<double>::max`是一个函数。你想说：

```
vector<double> v0(point_list.size(), numeric_limits<double>::max()); 
```

# java - Ubuntu上的非法模式字符'Y'

> ID：10576655
> 
> 赞同：13
> 
> 时间：2012-05-14T01:37:35.213
> 
> 标签：java, windows-7, ubuntu-10.04, simpledateformat, playframework-1.x

我在 Windows 中使用这种模式`SimpleDateFormat format = new SimpleDateFormat("YYYY-MM-dd HH:mm:ss");`并且它可以工作，但是在 Ubuntu 10.04 上尝试时它显示异常`play.exceptions.JavaExecutionException: Illegal pattern character 'Y'`。

我为此寻找解决方案，发现年份模式必须更改为小写： `SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");`并且它有效。

**谁能告诉我为什么在 Windows 中可以工作但在 Ubuntu 中如果我使用“Y”而不是“y”则无法工作的原因？**

笔记：

1.  播放-1.2.3
2.  杰瑞：
    1.  视窗：`java version "1.7.0_03" Java(TM) SE Runtime Environment (build 1.7.0_03-b05) Java HotSpot(TM) Client VM (build 22.1-b02, mixed mode, sharing)`
    2.  Ubuntu：`java version "1.6.0_31" Java(TM) SE Runtime Environment (build 1.6.0_31-b04) Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01, mixed mode)`
3.  Windows 7的
4.  Ubuntu 10.04

**2012 年 5 月 24 日更新**

在我再次检查我的系统后，有 3 个 JRE，我的窗口默认使用 JRE1.7。但是对于 Play，我使用 JRE1.6 设置运行。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-24T04:39:14.877

我搜索 SimpleDateFormat 并从 oracle获取[文档。](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

在我的 Windows 中工作，因为我将默认 JRE 设置为 1.7，但仍然使用 JRE1.6 运行 Play Framework。

![在此处输入图像描述](../Images/036cf66fc05be47043d033ed9a195ec8.png)

正因为如此，在 Windows 上工作，JRE1.7 添加了“Y”模式，`Week year`而在 JRE1.6 中没有这种模式。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-14T01:48:20.030

`Y`不是有效的模式。`y`是。

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)：

```
Letter   Date or Time Component     Presentation    Examples
G        Era designator             Text            AD
y        Year                       Year            1996; 96
M        Month in year              Month           July; Jul; 07
w        Week in year               Number          27
... 
```

我不知道为什么`Y`会在 Windows 中工作，但它没有记录。`y`是正确的。而且最安全。

# redirect - 将特定页面重定向到 iis web.config 中的另一个特定页面

> ID：10576659
> 
> 赞同：2
> 
> 时间：2012-05-14T01:38:38.757
> 
> 标签：redirect, web-config

我们已经将我们的站点从一个 php apache 站点移动到一个 asp.net mvc 站点，我正在尝试让特定的重定向工作，但我被卡住了。

[基本上我希望对http://www.mysite.com/index.php?pr=about_us](http://www.mysite.com/index.php?pr=about_us)的任何请求都被重定向到[http://www.mysite.com/About-Us](http://www.mysite.com/About-Us)

我已经尝试过了，但它不起作用。有任何想法吗？

```
<rewrite>
  <rules>
    <rule name="About Us" stopProcessing="true">
      <match url="index.php?pr=About_Us" ignoreCase="false" />
      <action type="Redirect" redirectType="Permanent" url="http://www.mysite.com/About-Us" />
    </rule>
  </rules>
</rewrite> 
```

我也试过这个，但也没有用。

```
<httpRedirect enabled="true" exactDestination="true" httpResponseStatus="Permanent">
    <add wildcard="index.php?pr=About_Us" destination="/About-Us" />
</httpRedirect> 
```

我有大约十几个这样的特定重定向，我需要对不同的页面实施这些重定向。

任何帮助是极大的赞赏！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:53:10.910

试试这个：

```
<rule name="About Us" stopProcessing="true">
    <match url="^(.*)$">
        <conditions>
            <add input="{URL}" pattern="index.php?pr=About_Us" />
        </conditions>
    </match>
    <action type="Redirect" redirectType="Permanent" url="http://www.mysite.com/About-Us" />
</rule> 
```

**编辑**

这是条件的另一种可能性：

```
<conditions logicalGrouping="MatchAll">
    <add input="{QUERY_STRING}" pattern="?pr=About_Us" />
    <add input="{REQUEST_FILENAME}" pattern="index.php" />
</conditions> 
```

***编辑 - 工作解决方案***

```
<rule name="About Us" stopProcessing="true">
  <match url="^(.*)$" />
    <conditions logicalGrouping="MatchAll">
      <add input="{QUERY_STRING}" pattern="/?pr=About_Us$" />
      <add input="{REQUEST_FILENAME}" pattern="index.php" />
    </conditions>
    <action type="Redirect" redirectType="Permanent" url="http://www.mysite.com/About-Us" />
</rule> 
```

# css - CSS：在不拉伸的情况下将宽元素放入 div

> ID：10576662
> 
> 赞同：0
> 
> 时间：2012-05-14T01:39:37.787
> 
> 标签：css, layout, html, overflow

我正在尝试向`div`现有的非固定大小添加一个非常宽的`div`. 这是一个最小的示例（[jsfiddle](http://jsfiddle.net/JqxEL/1/)）：

```
<html>
    <head/>
    <body>
        <div style="float: right; border: 1px solid green;">
            Some content
            <div id="problematic-div" style="border: 1px solid red; overflow: auto;">
                This_is_a_very_long_unbreakable_string_but_I_don't_want_it_to_have_the_ability_to_stretch_the_div<br/>
                It_should_have_a_horizontal_scrollbar_instead
            </div>
            Some content here too
        </div>
        Main content goes here
    </body>
</html> 
```

发生的情况是，大的内部`div`使外部`div`拉伸以适应。我希望外部 div 不调整大小（而是保持内部`div`不存在时的大小），而是让内部`div`显示水平滚动条。

`div`如果可以知道外部应该有多大，并且将内部 div 限制在此范围内，这很容易做到`width`，但在这里我想将外部`div`的尺寸标准设为“**使用适合所有内部的任何宽度元素，除了那个宽内`div`**“。

为了做到这一点，我的猜测是内部`div`需要从外部的尺寸计算**中仅忽略宽度**，而不是高度，这就是我不知道该怎么做。我尝试了几件事：

*   将外部`div`的设置`position`为`relative`，然后将内部的设置为`absolute`。这适用于外部`div`不再被内部拉伸，但水平滚动条没有出现，它的位置在距离外部 div 的左上角 0,0 的范围内，并且它与一些重叠外部div的内容
*   制作内部`div`浮动，并将其包裹在两个`clear: both`元素之间，如下所示，这仍然会导致外部元素拉伸：

.

```
<div style="clear: both;"></div>
<div id="problematic-div" style="border: 1px solid red; float: left; overflow: auto;">
    This_is_a_very_long_unbreakable_string_but_I_don't_want_it_to_have_the_ability_to_stretch_the_div<br/>
    It_should_have_a_horizontal_scrollbar_instead
</div>
<div style="clear: both;"></div>
Some content here too 
```

*   `width`( `min-content`, `fit-content`, )的一些 Mozilla 供应商前缀`available`，但它们似乎都没有我想要的效果

简而言之，我想要一个很像上面这个页面上的 HTML 代码列表的效果，但是这个页面通过在问题容器上设置一个固定的宽度来实现它。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:18:07.363

在不设置固定宽度的情况下，我能想到的唯一方法是这样做：

[http://jsfiddle.net/pgRd5/](http://jsfiddle.net/pgRd5/)

将内部 div 宽度设置为 0，并强制溢出可见。然后在外层div上设置overflow为auto，滚动条就会出现在外层div上。如果你想要内部 div 上的滚动条，那么你就不走运了。

这不是世界上最好的解决方案，因此我建议您将侧边栏设置为具有 max-width 属性，例如在[本示例](http://jsfiddle.net/akdDM/)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:57:30.010

正如我在评论中所说，如果不实际指定该限制，就不可能限制宽度。您是否有任何关于页面上列大小的指南，例如百分比或设置主列宽？否则页面不知道为每列分配多少空间，并且页面的外观将无法预测。

我收集您不想设置宽度的原因是您可以使用屏幕的全部可用宽度。因此，我建议您使用百分比，例如右侧边栏的 30%。这提供了可预测的布局，并且还允许您在内部内容上实现所需的滚动条，因为您已经指定了外部 div 的限制。例如

```
<div style="float: right; width:50%">
    Some content
    <div id="problematic-div" style="overflow-x: scroll; width: 100%;">
        This_is_a_very_long_unbreakable_string_but_I_don't_want_it_to_have_the_ability_to_stretch_the_div<br/>
        It_should_have_a_horizontal_scrollbar_instead
    </div>
    Some content here too
</div> 
```

您将需要测试该跨浏览器，但它应该可以在大多数浏览器中使用）

# iphone - 我可以从沙盒 AppStore 中删除购买的非消耗品吗？

> ID：10576666
> 
> 赞同：3
> 
> 时间：2012-05-14T01:40:49.653
> 
> 标签：iphone, app-store, in-app-purchase

是否可以使用沙盒删除 AppStore 中购买的非消耗性产品？在购买第一个非消耗品后，对“restoreCompletedTransactions”的响应是不同的。出于测试目的，删除这些购买是非常有价值的，并查看购买发生后不同的函数如何返回不同的值。或者。 . 是我唯一的选择是添加越来越多的非消耗品进行测试，即使那样，'restoreCompletedTransactions' 的行为也不会完美？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:22:42.057

我对此进行了很多研究和谷歌搜索，但找不到重置的方法。但是我读了一篇文章，其中那个家伙说对于非消耗品 inApps，itunesConnect 经常重置/清除测试帐户的购买，但我还没有体验过。

因此，我认为剩下的唯一方法和我选择的方法（以及您也建议的方法）是制作新的非消耗性应用程序并注意产品标识符。

例如，当我测试时，我制作了一个带有标识符的非消耗性 inApps：

```
com.[CompanyName].[AppName].inapp.removeAds1
com.[CompanyName].[AppName].inapp.removeAds2
com.[CompanyName].[AppName].inapp.removeAds3 
```

等等

最后，当一切准备就绪。我删除了以前的并制作了一个：

```
com.[CompanyName].[AppName].inapp.removeAds 
```

只是一个警告：如果你删除了这些 inApps（用于测试），你不能使用相同的标识符（你删除的那个）来创建一个新的。不确定它是否有任何帮助，但我对命名约定非常着迷：P

# android - 当我在 Android 设备上运行 Facebook 应用程序时，它会生成错误代码“100”

> ID：10576667
> 
> 赞同：0
> 
> 时间：2012-05-14T01:40:53.800
> 
> 标签：android, facebook

我正在尝试在我的 android 设备上运行 facebook 应用程序。该应用程序是一个简单的发布按钮。在模拟器中运行正常，但在设备中，在调试模式（eclipse）中捕获了以下消息。

```
error message: {"error":{"message":"(#100) Missing message or attachment","type":"OAuthException","code":100}} 
```

有人知道出了什么问题吗？谢谢！

我的活动代码如下

```
package f.b;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.MalformedURLException;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

import com.facebook.android.AsyncFacebookRunner.RequestListener;
import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;
import com.facebook.android.AsyncFacebookRunner;

public class NewFaceAppActivity extends Activity {
        private final String id = "";//my id here
    private final String [] permissoes = {"publish_stream"};
    private SharedPreferences mPrefs;
    AsyncFacebookRunner mAsyncRunner;
    Facebook facebook = new Facebook(id);
    String access_token = "";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    login();
}

public void login(){

    /*
     * Get existing access_token if any
     */
    mPrefs = PreferenceManager.getDefaultSharedPreferences(this);
    access_token = mPrefs.getString("access_token", "x");
    long expires = mPrefs.getLong("access_expires", -1);
    if(access_token != null) {
        facebook.setAccessToken(access_token);
    }
    if(expires != 0) {
        facebook.setAccessExpires(expires);
    }
    /*
     * Only call authorize if the access_token has expired.
     */
    if(facebook.isSessionValid() == false) {

        facebook.authorize(this, permissoes, -1, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {
                SharedPreferences.Editor editor = mPrefs.edit();
                editor.putString("access_token", facebook.getAccessToken());
                editor.putLong("access_expires", facebook.getAccessExpires());
                editor.commit();
            }

            @Override
            public void onFacebookError(FacebookError error) {}

            @Override
            public void onError(DialogError e) {}

            @Override
            public void onCancel() {}
        });
    }

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);
}

@Override
public void onResume() {    
    super.onResume();
    facebook.extendAccessTokenIfNeeded(this, null);
}

public void logout(){
    mAsyncRunner.logout(getBaseContext(), new RequestListener() {
          @Override
          public void onComplete(String response, Object state) {}

          @Override
          public void onIOException(IOException e, Object state) {}

          @Override
          public void onFileNotFoundException(FileNotFoundException e,
                Object state) {}

          @Override
          public void onMalformedURLException(MalformedURLException e,
                Object state) {}

          @Override
          public void onFacebookError(FacebookError e, Object state) {}

        });
}

public void postar(View v){
    //if(facebook.isSessionValid()){
        EditText et = (EditText) findViewById(R.id.et);
        Bundle parameters = new Bundle();
        String msg = et.getText().toString();
        String r = "";
        parameters.putString(this.access_token, msg );
        try {
            r = facebook.request("me/feed", parameters, "POST");
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Toast.makeText(this, r, Toast.LENGTH_LONG);
        //}else{login();}
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:43:47.830

我看不出这在模拟器中是如何工作的，您只是没有将*消息*参数名称放入包中。

正如您在[Post object](http://developers.facebook.com/docs/reference/api/post/)的文档中看到的那样，参数的名称是*“message”*，并且您插入了带有访问令牌作为名称的消息参数。它应该是：

```
Bundle parameters = new Bundle();
String msg = et.getText().toString();
parameters.putString("message", msg); 
```

无需添加访问令牌，SDK 会为您完成。

# c++ - 带指针的分段错误

> ID：10576669
> 
> 赞同：2
> 
> 时间：2012-05-14T01:41:07.023
> 
> 标签：c++, segmentation-fault, parameter-passing

我的代码在这里遇到了一个非常奇怪的问题。当我使用手动打印语句输出 int *primesArr 的值时，它（看似）有效，但如果我尝试使用 for 循环这样做，它会失败。我通过 gdb 运行它，发现它在我将数组中的下一个单元格设置为值“k”的地方崩溃，这仅在数字为素数时发生。第一次迭代成功（即 2 设置为 primesArr[0]），然后在尝试增加数组时程序 Segfaults。但这仅在使用 for 循环时发生。当我创建单独的打印语句时，我的程序按预期工作。我不确定在使用 for 循环时如何/为什么要访问尚未分配的内存。我确定我在某个地方犯了一些业余错误，这可能与我传递指针的方式有关...... 但我无法确定它的确切根源。我将不胜感激，并提前感谢您。

```
#include<stdio.h>

int genPrimes(int seed, int *test){
    int inNumPrimes=0;
    for(int k=0; k<=seed; k++){//k is number being checked for primeness
        int cnt=0;
        for(int i=1; i<=k; i++){//'i' is num 'k' is divided by
            if(k%i == 0){
                cnt++;
                if(cnt > 2){
                    break;
                }
                }else{
            }

        }
        if(cnt == 2){
            printf("%i IS PRIME\n",k);
            *test=k;
            test++;//according to gdb, the problem is somewhere between here
            inNumPrimes++;//and here. I'd wager I messed up my pointer somehow
        }
        //printf("%i\n",k);
    }
    return inNumPrimes;
}

int main(){
    int outNumPrimes=0;
    int *primesArr;
    int n = 0;
    n=20;

    outNumPrimes=genPrimes(n, primesArr);
    printf("Congratulations!  There are %i Prime Numbers.\n",outNumPrimes);

    //If you print using this for loop, the SEGFAULT occurs.  Note that it does not matter how high the limit is; its been set to many values other than 5\. It will eventually be set to 'outNumPrimes'
    //for(int a=0; a<5; a++){
    //printf("%i\n",primesArr[a]);
    //}

    //If you print the array elements individually, the correct value--a prime number--is printed.  No SEGFAULT.
    printf("%i\n",primesArr[0]);
    printf("%i\n",primesArr[1]);
    printf("%i\n",primesArr[2]);
    printf("%i\n",primesArr[3]);
    printf("%i\n",primesArr[4]);
    printf("%i\n",primesArr[5]);
    printf("%i\n",primesArr[6]);
    printf("%i\n",primesArr[7]);
    //
    return 0;
} 
```

# 带有手动语句的输出：

```
$ ./a.out 
2 IS PRIME
3 IS PRIME
5 IS PRIME
7 IS PRIME
11 IS PRIME
13 IS PRIME
17 IS PRIME
19 IS PRIME
Congratulations!  There are 8 Prime Numbers.
2
3
5
7
11
13
17
19 
```

# 现在使用 for 循环：

```
$ ./a.out 
2 IS PRIME
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T01:44:59.760

您正在将未初始化的指针传递给您的素数函数。你得到的行为是不确定的，这就是为什么这看起来如此神秘。变量 primesArr 可能指向任何地方。

对于像这样的简单案例，最好使用`std::vector<int>`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T01:49:59.970

线

```
int *primesArr; 
```

声明`primesArr`为指针变量，但不为其分配任何内存。由于该`genPrimes()`函数希望将其视为将填充素数的空数组，因此您可以`main()`在调用之前分配内存`genPrimes()`：

```
int primesArr[MAX_PRIMES]; 
```

或者

```
int *primesArr = malloc(MAX_PRIMES * sizeof(int)); 
```

然而，在这两种情况下，您必须保证它`MAX_PRIMES`足够大以容纳所有`genPrimes()`找到的素数，否则代码将像现在一样产生错误。

* * *

**其他提示：**

**1：复杂性**

唯一`cnt`必要的原因是它可以被和`k`整除。如果你改变`1``k`

```
for (int i=1; i<=k; i++) {  // 'i' is the number 'k' is divided by 
```

至

```
for (int i=2; i<k; ++i) {  // 'i' is the number 'k' is divided by 
```

那么这两种情况都被消除了，一旦找到`i`for which的值，循环就可以退出`k%i == 0`。

**2：效率**

考试

```
for (int i=2; i<k; ++i) {  // 'i' is the number 'k' is divided by 
```

由于两个原因，仍然非常低效。首先，不需要测试每个偶数；如果`k > 2`和`(k % 2) == 0`，则`k`不能是素数。因此，您可以通过明确检查 2（素数）或可被 2（非素数）整除，然后使用

```
for (int i = 3;  i < k;  i += 2) {  // 'i' is the number 'k' is divided by 
```

但是你可以让这*更*有效，因为你可以在到达后停止`sqrt(k)`。为什么？如果`k`能被某个数整除，那么它也一定能被（因为= ）`i`整除。如果, then和循环已经退出。所以你只需要`k/i``i * k/i``k``i > sqrt(k)``k/i < sqrt(k)`

```
int r = (int) sqrt(k);
for (int i = 3;  i <= r;  i += 2) {  // 'i' is the number 'k' is divided by 
```

如果`sqrt()`不可用，您可以使用

```
for (int i = 3;  i*i <= k;  i += 2) {  // 'i' is the number 'k' is divided by 
```

**3：风格**

只是一件简单的事情，但不是

```
int n = 0;
n=20; 
```

你可以简单地写

```
int n = 20; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T01:52:59.740

您的 primesArr 变量未初始化。

将指针声明为

```
int *ptr; 
```

只需声明一个指向 int 的指针。但是，指针本身并不指向任何东西。很像声明

```
int val; 
```

不初始化 val。因此，您需要为 primesArr 指针分配内存以指向（`new`在堆栈上或堆栈上，例如`int primesArr[N]`where`N`是一些大数字。

但是，由于您不知道您将从 genPrimes 函数中获得多少素数，并且您没有说 STL 是不可能的，所以我会考虑使用 a`std::vector<int>`作为您的 genPrimes 函数的输入：

```
int genPrimes(int seed, std::vector<int>& test) 
```

而且，从函数内部，您可以执行以下操作：

```
test.push_back(k) 
```

# ios - UIPageViewController 在内存不足时翻转过快会崩溃

> ID：10576671
> 
> 赞同：19
> 
> 时间：2012-05-14T01:41:35.293
> 
> 标签：ios, automatic-ref-counting, uipageviewcontroller

由于 Xcode 的 UIPageViewController 模板缓存所有页面数据，我遇到了一些内存问题，所以我将其更改为动态加载页面，所以现在当我的应用程序收到内存不足警告时，它会释放页面不显示的内存，但是如果用户通过点击屏幕边缘快速翻阅页面，它仍然崩溃。我猜这是因为当 didReceiveMemoryWarning 被调用时它不能足够快地释放内存。如果用户翻转缓慢，它工作正常。我限制了用户翻页的速度，但它仍然会发生。我希望能够在每次翻页时释放内存，而不必等待内存不足警告。我正在使用ARC。有没有办法做到这一点？或者我还能做些什么来防止这种情况发生？谢谢。

编辑：

```
(UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
    NSUInteger index = [self indexOfViewController:(SinglePageViewControllerSuperclass *)viewController];
    if ((index == 0) || (index == NSNotFound)) {
        return nil;
    }

    index--;
    return [self viewControllerAtIndex:index];
} 

(UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger index = [self indexOfViewController:(SinglePageViewControllerSuperclass *)viewController];
    if (index == NSNotFound || index == MAX_PAGE_INDEX) {
        return nil;
    }

    return [self viewControllerAtIndex:++index];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:56:04.817

我认为你的假设是正确的，因为我也经历过类似的行为：当你翻到下一页时，也是为了很好地制作动画，新页面在旧页面被释放之前分配，并且需要一些时间旧的将被释放。因此，当您翻转得足够快时，分配对象的速度比释放对象的速度要快，最终（实际上，很快），您的应用程序由于内存使用而被终止。如果您遵循`Instruments`.

IMO，您有三种方法：

1.  实现“轻”`viewDidLoad`方法（实际上是整个初始化/初始显示序列）：在某些应用程序中，这是有意义的，例如，加载低分辨率图像而不是将显示的高分辨率图像；或者，稍微延迟分配您的页面所需的额外资源（数据库访问、声音等）；

2.  使用一个页面池，比如三个页面的数组（或 5 个，这取决于您的应用程序），您可以继续“重用”，以便您的应用程序的内存配置文件保持稳定并避免峰值；

3.  仔细检查你分配和释放内存的方式；从这个意义上说，你经常读到 autorelease 为释放/释放机制添加了一些“惯性”，这很容易理解：如果你有一个 autoreleased 对象，只有当你循环访问它时，它才会被它的释放池释放。主循环（主释放池也是如此）；因此，如果您在翻页时调用了一长串方法，这将使 release/dealloc 稍后发生。

在内存使用优化方面没有灵丹妙药，这是一项非常详细和艰苦的工作，但是如果您查看代码并应用这 3 条准则，则 IME 将能够减少应用程序的内存配置文件。特别是，检查 Instruments 中的内存分配峰值并尝试了解它们的相关性非常强大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T17:37:22.313

这是我所做的额外更改，可能有人会觉得有帮助：

基本上，如果前一页已经完成，我只允许开始新的翻页。

我使用苹果的默认 PageViewController 项目作为模板，所以我将使用该项目中定义的术语。

每当通过 viewControllerAtIndex: 请求页面 VC 时，我都会在 ModelController 上设置一个名为 ' `shouldDenyVC`'的布尔值`YES`。

在我的作为 UIPageViewController 委托的 EbookViewController 中，我捕获了手势识别器，并将 EbookViewController 分配为他们的委托：

```
self.view.gestureRecognizers = self.pageViewController.gestureRecognizers;
for (UIGestureRecognizer *gr in self.view.gestureRecognizers) {
    gr.delegate = self;
} 
```

然后，我可以通过拒绝手势识别器来拒绝翻页：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:    (UITouch *)touch
{
    if (_modelController.shouldDenyPageTurn == YES) {
        return FALSE;
    }
    return TRUE;
} 
```

最后，我`_modelController.shouldDenyPageTurn = NO`在 UIPageViewController 委托方法的末尾设置`pageViewController:didFinishAnimating:previousViewControllers:transitionCompleted:`

我还必须`_modelController.shouldDenyPageTurn = NO`在任何预加载结束时进行设置，以便允许翻页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T01:41:53.770

目前 iOS5 中有一个 bug 会导致滚动视图泄漏少量内存。

您是否尝试过在检查分配和内存泄漏的仪器中分析您的应用程序？

您可以在模拟器中模拟内存不足警告（硬件 -> 模拟内存不足警告）。或者你可以通过代码来完成，（只记得在调试后删除，因为这会让你的应用程序被拒绝！）

```
[[UIApplication sharedApplication] performSelector:@selector(_performMemoryWarning)]; 
```

如果您正在使用`strong`或`retain`属性，则`nil`在完成它们后将它们设置为，ARC 将释放它们在幕后指向的内存。

如果您正在创建大量临时对象（不是属性或未分配的对象），则插入一个自动释放池：

```
@autoreleasepool {

} 
```

最后，显示一些代码，我们可以更好地帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T16:45:10.807

由于您没有发布任何代码，因此很难猜测您的问题到底出在哪里。

1.  要强制卸载视图，您可以覆盖`viewDidDisappear:`出现在`UIPageViewController`.

    代码如下所示：

    ```
    - (void)viewDidDisappear:(BOOL)animated {
        [self didReceiveMemoryWarning];
    } 
    ```

    如果您还覆盖了 didReceiveMemoryWarning，请不要忘记从中调用`[super didReceiveMemoryWarning];`。

2.  方法的工作方式也可能存在一些混淆`UIPageViewControllerDataSource`——你可能有一些“混合线”。[在此处](https://stackoverflow.com/a/9779463/653513)检查接受的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T08:38:39.433

它可能是由渲染引起的。当flipper过快时，重绘“Page”占用的内存和CPU会迅速增加。如果你在 UIPageViewController 中使用的视图是基于 CALayer 的，并且页面太多，那么翻转太快肯定会导致 App 崩溃。

一种解决方案是自定义图层并缓存渲染结果。仅在必要时重新渲染内容。但是缓存可能会增加内存使用量。

# c# - 从给定字符串中提取 url 的 C# 正则表达式模式 - 不是完整的 html url，而是裸链接

> ID：10576686
> 
> 赞同：35
> 
> 时间：2012-05-14T01:45:30.680
> 
> 标签：c#, regex, url, hyperlink, extract

我需要一个正则表达式，它将执行以下操作

```
Extract all strings which starts with http://
Extract all strings which starts with www. 
```

所以我需要提取这两个。

例如下面有这个给定的字符串文本

```
house home go www.monstermmorpg.com nice hospital http://www.monstermmorpg.com this is incorrect url http://www.monstermmorpg.commerged continue 
```

所以从上面给出的字符串我会得到

```
 www.monstermmorpg.com
http://www.monstermmorpg.com
http://www.monstermmorpg.commerged 
```

寻找正则表达式或其他方式。谢谢你。

C# 4.0

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-14T02:00:13.330

您可以编写一些非常简单的正则表达式来处理这个问题，或者通过更传统的字符串拆分 + LINQ 方法。

### 正则表达式

```
var linkParser = new Regex(@"\b(?:https?://|www\.)\S+\b", RegexOptions.Compiled | RegexOptions.IgnoreCase);
var rawString = "house home go www.monstermmorpg.com nice hospital http://www.monstermmorpg.com this is incorrect url http://www.monstermmorpg.commerged continue";
foreach(Match m in linkParser.Matches(rawString))
    MessageBox.Show(m.Value); 
```

**解释** 模式：

```
\b       -matches a word boundary (spaces, periods..etc)
(?:      -define the beginning of a group, the ?: specifies not to capture the data within this group.
https?://  - Match http or https (the '?' after the "s" makes it optional)
|        -OR
www\.    -literal string, match www. (the \. means a literal ".")
)        -end group
\S+      -match a series of non-whitespace characters.
\b       -match the closing word boundary. 
```

基本上，该模式会查找以开头的字符串，`http:// OR https:// OR www. (?:https?://|www\.)`然后将所有字符匹配到下一个空格。

### 传统字符串选项

```
var rawString = "house home go www.monstermmorpg.com nice hospital http://www.monstermmorpg.com this is incorrect url http://www.monstermmorpg.commerged continue";
var links = rawString.Split("\t\n ".ToCharArray(), StringSplitOptions.RemoveEmptyEntries).Where(s => s.StartsWith("http://") || s.StartsWith("www.") || s.StartsWith("https://"));
foreach (string s in links)
    MessageBox.Show(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-13T15:43:45.203

使用[Nikita 的](https://stackoverflow.com/questions/10576686/c-sharp-regex-pattern-to-extract-urls-from-given-string-not-full-html-urls-but#comment35541317_10576770)回复，我很容易得到字符串中的 url：

```
using System.Text.RegularExpressions;

string myString = "test =) https://google.com/";

Match url = Regex.Match(myString, @"http(s)?://([\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)?");

string finalUrl = url.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-02T16:47:32.160

不适用于包含 URL 的 html

例如

```
<table><tr><td class="sub-img car-sm" rowspan ="1"><img src="https://{s3bucket}/abc/xyzxyzxyz/subject/jkljlk757cc617-a560-48f5-bea1-f7c066a24350_202008210836495252.jpg?X-Amz-Expires=1800&X-Amz-Algorithm=abcabcabc&X-Amz-Credential=AKIAVCAFR2PUOE4WV6ZX/20210107/ap-south-1/s3/aws4_request&X-Amz-Date=20210107T134049Z&X-Amz-SignedHeaders=host&X-Amz-Signature=3cc6301wrwersdf25fb13sdfcfe8c26d88ca1949e77d9e1d9af4bba126aa5fa91a308f7883e"></td><td class="icon"></td></tr></table> 
```

对于需要使用下面的正则表达式

```
Regex regx = new Regex("http://([\\w+?\\.\\w+])+([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?", RegexOptions.IgnoreCase); 
```

# asp.net - 使用 SQL Server 2012 从小处着手并逐渐扩大 - 代码和价格明智

> ID：10576690
> 
> 赞同：-1
> 
> 时间：2012-05-14T01:46:37.780
> 
> 标签：asp.net, sql-server, scalability, cluster-computing

我正在使用 ASP.NET 4.5 和 SQL Server 2012 开发我的新 Web/移动应用程序。我希望我的数据库非常大，并且可以达到 TB 的数据。我知道，为了适应我的应用程序的高写入和读取以及数据容量，我需要使用集群。我想知道是否有一种解决方案可以让我从一台服务器/一个数据库开始，当我需要更多容量空间时，我可以在不更改代码的情况下实施它。

我更喜欢使用 SQL Server 2012，而不是使用 NoSQL 解决方案。我有什么选择。是否有任何 DBaaS 解决方案允许您针对一个数据库进行查询，但在幕后实施可以扩展到 TB 级数据存储的集群环境。

为 SQL Server 2012 选择 Amazon RDS 是一个很好的开始方式，但是当我需要更多空间（大于 1TB）时会发生什么。此外，不建议使用大型数据库。SQL Azure 和联合是一种选择，但存储大型数据库似乎很昂贵，并且您需要对代码进行更改。也许有某种中间件可以解决这个问题？

我需要的：

1.  SQL Server 2012 部署，从小处着手，随着数据库容量的增长能够增长
2.  能够轻松备份和恢复数据
3.  从常规 SQL Server 2012 安装开始，然后转到更高级的体系结构，而无需更改我的应用程序的代码
4.  考虑 DBaaS 解决方案
5.  需要支持触发器的解决方案

只是想补充一点，SQL Azure 和 Federaion 的问题是我无法在数据损坏方面备份/恢复数据库。这对我来说是一个真正的交易破坏者。我想要一个可以让我轻松备份和恢复数据的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:26:22.493

“轻松备份和恢复”是什么意思？如果您正在处理 TB 级的信息，那么简单就不会发生。仅文件副本就需要数小时，并且需要大量空间来保存备份。而且，如果您确实保留了 TB 级的信息，我认为您不会对与这种过程相关的停机时间感到满意。

根据我的经验（无论如何都不是详尽无遗的），没有任何使用 SQL Server 自动扩展的好方法。老实说，我不确定在任何类型的数据库方案中它是否容易或自动，但对于 SQL Server 来说肯定没有那么简单。

我已经完成了一些与您有相同要求的应用程序，并且我已经完成了一些，我只是“分片”了数据库并使用代码来聚合需要跨服务器的数据。

你能稍微改进一下你的要求吗？

# constraints - 初学者合金问题

> ID：10576693
> 
> 赞同：1
> 
> 时间：2012-05-14T01:47:01.777
> 
> 标签：constraints, graph-theory, alloy

```
 module cafeMap
-- Hipsters spend their days traveling from one cafe to another.
-- They use various means of transportation: by car, by bus, and by foot.

sig Cafe {
    walk: set Cafe, -- there is a walking path between cafes
    car: set Cafe, -- there is a street between cafes
    bus: set Cafe -- there is a direct bus route between cafes
}

-- All Cafe pairs with a direct travel link (walk, car or bus)
fun travel[]: Cafe->Cafe {
    car+walk+bus
}

-- All Cafe pairs with direct "green" travel links (walk or bus)
fun greentravel[]: Cafe->Cafe {
    walk+bus
}

-- Does relation r contain every possible pair of Cafes?
pred complete[r: Cafe->Cafe] {
     --your code goes here
}

-- For every pair (c,d) in r, is the reverse pair (d,c) also in r?
pred symmetric[r: Cafe->Cafe] {
     r=~r
}

-- Does r contain no pairs of the form (c,c)?
pred irreflexive[r: Cafe->Cafe] {
    no r & iden -- Is the intersection of r and the identity relation empty?
}

fact {
    irreflexive[walk+car+bus] -- eliminate "self loops"
}

fact {
symmetric[walk]
}

pred show {}

run show for exactly 5 Cafe 
```

将以下约束添加到 cafe.als：

*   您可以从任何一家咖啡馆开车到任何其他咖啡馆（尽管可能没有直达路线）。
*   咖啡馆之间的步行道是双向的。
*   每家咖啡馆都可以从其他咖啡馆直接到达，只需一两步。
*   公共汽车在一条非分支路线上访问每家咖啡馆。（注意：您可能希望为此稍微更改总线关系的声明。）

我从未与 Alloy 合作过，我的教授也几乎没有接触过它。我真的迷路了，任何人都可以帮助解释发生了什么或帮助我解决任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:23:00.417

我已经对问题中的每个点进行了编号。您可以复制代码并将其粘贴到任何地方。不要忘记更改第 4 点中提到的“总线”关系的声明。

```
fact Solution{
    -- POINT 1 --
    //You can get from any cafe to any other cafe by car (though there may not be a direct route). 
    all c1, c2: Cafe | c2 in c1.^car

    -- POINT 2 --
    // Walking paths between cafes are bidirectional.
    symmetric[walk]   

    -- POINT 3 --
    //  Every cafe is directly reachable from every other cafe in one or two steps.
    //  Either there is a direct route from one cafe (s)  to another (e) or there is a middle cafe (m)
    all disj s, e: Cafe | let route = walk+car+bus | 
        s->e in route or some m:Cafe | (s->m + m->e) in route

    -- POINT 4 --
    // The bus visits every cafe, in a single nonbranching route. 
    //nonbranching means that every cafe has at most one image over the mapping "bus". Change  "bus: set Cafe" to "bus: lone Cafe"

    // The bus route can be circular like this
    all disj c1, c2: Cafe | c2 in c1.^bus

    // OR it can be linear like this. It starts with the head from which all other cafes are reachable and no loops exist.
    //one head: Cafe | all c: Cafe - head | c in head.^bus   and not c in c.^bus 
} 
```

# android - Android - 如何为所有页面添加标题？

> ID：10576695
> 
> 赞同：1
> 
> 时间：2012-05-14T01:47:10.953
> 
> 标签：android, android-layout

我想为应用程序上的所有页面添加相同的导航标题。

它应该看起来像这样：

```
----------------------------
  Button1 Button2 Button3
----------------------------

Content content content 
... 
```

我怎样才能做到这一点？

到目前为止，我在现有布局中发现了类似的东西：

```
<include android:id="@+id/header"
         layout="@layout/my_header"
         android:layout_height="wrap_content"
         android:layout_width="fill_parent"/> 
```

但我不确定如何将按钮放在标题顶部或如何构建该布局。

知道我能做什么吗？

另外，对于将出现在标题上的按钮，我应该为每个按钮的每个页面添加一个侦听器吗？

另外，我做了这个标题：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent" android:layout_height="fill_parent"
 android:padding="5dip">

 <Button android:id="@+id/home"
  android:layout_width="wrap_content" android:layout_height="wrap_content"
  android:text="Home"
  android:layout_centerHorizontal="true" />

 <Button android:id="@+id/questions"
  android:layout_width="wrap_content" android:layout_height="wrap_content"
  android:text="My Questions"
  android:layout_centerHorizontal="true" /> 

 <Button android:id="@+id/businesses"
  android:layout_width="wrap_content" android:layout_height="wrap_content"
  android:text="My Businesses"
  android:layout_centerHorizontal="true" />  

 <Button android:id="@+id/learn"
  android:layout_width="wrap_content" android:layout_height="wrap_content"
  android:text="Learning Center"
  android:layout_centerHorizontal="true" />  

 <Button android:id="@+id/extra_help"
  android:layout_width="wrap_content" android:layout_height="wrap_content"
  android:text="Extra Help"
  android:layout_centerHorizontal="true" />  
</RelativeLayout> 
```

但是所有按钮都显示在彼此之上，而不是彼此相邻。怎么可能解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:53:37.373

您想使用 XML`<include>`标记。[请参阅开发网站](http://developer.android.com/resources/articles/layout-tricks-reuse.html)上的以下内容。

示例代码：

标头 XML：（header.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/button1"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/button1"
        android:text="Button" />

</RelativeLayout>

</LinearLayout> 
```

使用标题的活动：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<include
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    layout="@layout/header" />  <<<(this is the layout file you want to include)

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10" >

        <requestFocus />

    </EditText>

</LinearLayout>

</LinearLayout> 
```

至于听众......是的，您需要将它们添加到使用标题的每个页面。您可能想要扩展活动类并放入您需要为每个页面重复的所有代码。然后只需为您的每个页面扩展您的活动类。

希望这可以帮助。（很抱歉延迟回到这个......工作一直忙得不可开交）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:16:09.123

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:padding="5dip">

<Button android:id="@+id/home"
 android:layout_width="wrap_content" android:layout_height="wrap_content"
 android:text="Home"
 />

<Button android:id="@+id/questions"
 android:layout_width="wrap_content" android:layout_height="wrap_content"
 android:text="My Questions"
android:layout_toRightOf="@+id/home"  /> 

<Button android:id="@+id/businesses"
 android:layout_width="wrap_content" android:layout_height="wrap_content"
 android:text="My Businesses"
 android:layout_toRightOf="@+id/questions" />  

 <Button android:id="@+id/learn"
  android:layout_width="wrap_content" android:layout_height="wrap_content"
 android:text="Learning Center"
 android:layout_toRightOf="@+id/businesses" />  

<Button android:id="@+id/extra_help"
 android:layout_width="wrap_content" android:layout_height="wrap_content"
 android:text="Extra Help"
android:layout_toRightOf="@+id/learn"/>  
</RelativeLayout> 
```

# c++ - 没有库的提升

> ID：10576697
> 
> 赞同：1
> 
> 时间：2012-05-14T01:47:37.707
> 
> 标签：c++, boost, cross-compiling

我想开始在嵌入式环境中使用 boost。我可以在没有需要编译很长一段时间的 boost 库的情况下生活。我想只需将 boost 目录移动到我们代码库中的适当位置就可以了

1.  我是对的还是它比这更复杂？
2.  如何摆脱未使用的库的头文件？
3.  boost库中是否有任何gcc版本依赖项。例如可以使用最新的gcc-4.1.1吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T02:07:11.893

> 我是对的还是它比这更复杂？

这样就可以了。

> 如何摆脱未使用的库的头文件？

何苦？它们不会被编译到程序中。当您部署您的发行版时，无论您是否删除它们，它们都不会有任何不同。

> boost库中是否有任何gcc版本依赖项。例如可以使用最新的gcc-4.1.1吗？

vOv - 这是一个非常旧的版本。Boost 比大多数人都走得更远，我认为他们大部分时间都应该这样做，以确保它适用于旧的和/或损坏的编译器。不过，你真的在​​推动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:12:01.157

我自己没有尝试过，但是如果您使用目录前缀编译 Boost，那么我想您可以稍后移动目录。我看不出有什么大问题，或者至少是一个无法快速修复的问题。

至于摆脱不使用的库的头文件，请查看您正在使用的版本的 bcp 实用程序：

[http://www.boost.org/doc/libs/1_49_0/tools/bcp/doc/html/index.html](http://www.boost.org/doc/libs/1_49_0/tools/bcp/doc/html/index.html)

它是“一种提取 Boost 子集的工具”——正是您正在寻找的。

至于你的最后一个问题，我认为这取决于你使用的是什么版本的 Boost。我从来没有遇到过 gcc 依赖的问题……看来他们的要求相当自由。我不认为你需要太担心它，除非你打算使用一个“远”旧的 gcc 版本（比你计划使用的 Boost）。我猜这里的“老”已经足够老了，你不必担心——我说的任何数字都只是一个猜测......

希望这可以帮助！

# java - Amazon S3 使用 Parts 上传多个文件

> ID：10576698
> 
> 赞同：2
> 
> 时间：2012-05-14T01:48:01.450
> 
> 标签：java, servlets, file-upload, amazon-s3

在花了很多时间阅读文档和在互联网上搜索一些技巧之后，我最终决定创建一个 Stack OverFlow 帐户；看起来很绝望？哈哈，我们走吧。

编辑（2012 年 5 月 16 日）：当我找到解决方案时（最终由我自己），我用正在运行的代码替换了旧代码。

我转到 /admin/lstimg (ListImage)，它从我的数据库中获取图像 (URL) 记录集合。然后将集合设置为允许我使用 jsp 文件中的数据的属性。

注意：公共类 ListImageServlet 扩展[HttpServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html)并使用[MultipartConfig](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/MultipartConfig.html)进行注释。

```
 @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException
    {
        try
        {
            Collection images = ImageFacade.getIjc().findImageEntities();
            request.setAttribute("images", images);
            request.getRequestDispatcher("/adm/img/lstimg.jsp").forward(request, response);
        }

        catch (Exception ex)
        {
            Logger.getLogger(ListImageServlet.class.getName()).log(Level.SEVERE, "Cannot retrieve the images.", ex);
        }
    } 
```

在我的 jsp 中，有一个很大的表单（就像我的“图像”集合一样）。在这里，我使用“图像”集合中的数据。对于每个图像，第一列中是缩略图，第二列中是文件输入。我正在尝试通过此（单个）表单执行多个更新。

```
<form method="post" action="../admin/lstimg" enctype="multipart/form-data">
<table>
    <thead>
        <tr>
            <th>Thumb</th>
            <th>to update</th>
        </tr>
    </thead>
    <tbody>
        <c:forEach items="${images}" var="image">
            <tr>
                <td>
                    <img src="myURL" height="100"/>
                </td>
                <td>
                    <input type="file" name="${image.thumb}"/>
                </td>
            </tr>
        </c:forEach>
    </tbody>
</table>
<input type="submit" value="Proceed" />
</form> 
```

我的第一个问题是：由于我需要新图像具有相同的“image.thumb”（这是密钥），我将文件输入名称设置为当前的“image.thumb”，但我想知道是否，我会在我的计算机上检索我的文件时遇到一些问题？因为我计算机上的文件有自己的路径/文件名，而我服务器上的文件有另一个路径/UUID（密钥）。

编辑（2012 年 5 月 16 日）：由于 AWS 不要求提供文件路径（手动设置），因此没有问题。

表单的外观（[Web 浏览器](https://i.stack.imgur.com/LdQNa.png)）

在我选择了我需要更新/更改的图像后，我单击提交按钮（继续）。

1.  我得到所有零件（文件输入）并将它们存储在集合“allParts”中。
2.  我检查“allParts”集合的每个部分，如果文件大小在 1b 和 10Mo 之间，则该部分被添加到“selectedParts”集合中。
3.  在这里，我不知道该怎么做我想做的事……我所有的图像都托管在我的 Amazon S3 服务器中。我使用 Jets3t 工具包。对于第一次上传，我调用 buildPostForm 方法（如下），它会做所有事情。

```
S3Service.buildPostForm(String bucketName, String key, ProviderCredentials credentials, Date expiration, String[] conditions, String[] inputFields, String textInput, boolean isSecureHttp);
```

```
 @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException
    {
        try
        {
            ImageCheck.initAS3(request);
            ImageCheck.update(request, response);
        } 

        catch (S3ServiceException ex) 
        {
            Logger.getLogger(ListImageServlet.class.getName()).log(Level.SEVERE, null, ex);
        } 

        catch (ServiceException ex) 
        {
            Logger.getLogger(ListImageServlet.class.getName()).log(Level.SEVERE, null, ex);
        } 

        catch (NoSuchAlgorithmException ex) 
        {
            Logger.getLogger(ListImageServlet.class.getName()).log(Level.SEVERE, null, ex);
        } 

        catch (IllegalStateException ex) 
        {
            Logger.getLogger(ListImageServlet.class.getName()).log(Level.SEVERE, null, ex);
        }

        response.sendRedirect("../admin/lstimg");
    } 
```

我的第二个问题是：要通过 servlet 上传/更改文件，因为我使用自己的表单，我需要将文件设置为我的 S3Object，但我不知道我可以用我的“selectedParts”做什么？有没有办法将零件更改为文件？我必须使用 Part 以外的其他东西吗？

编辑（05/16/2012）：[我的解决方案](https://stackoverflow.com/a/10604206/1391944)

对不起我的英语不好。提前感谢您的建议，意见，答案。如果您对代码有任何疑问或需要更多信息，请不要犹豫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:39:54.540

我非常专注于[S3Object#S3Object(java.io.File)](http://jets3t.s3.amazonaws.com/api/org/jets3t/service/model/S3Object.html#S3Object%28java.io.File%29)以至于我没有意识到我可以使用[StorageObject#setDataInputStream](http://jets3t.s3.amazonaws.com/api/org/jets3t/service/model/StorageObject.html#setDataInputStream%28java.io.InputStream%29)。

当我将旧图像密钥设置为新图像密钥时，我的新问题是 Web 浏览器将旧图像保存在缓存中。我在这上面花了很多时间，认为我的功能没有正确运行，即使我什至不知道我可能在哪里犯了错误；但我继续我的 AWS 并检查了已成功更新的“上次修改”值。我清除了缓存，从一开始我就发现一切都很好。

如果它可以帮助一些人，我提供了我所做的允许通过单个表单更改多个 S3Object 的功能。如果您有任何问题、建议或需要对该代码的任何评论，我在这里。

```
public static void upload(HttpServletRequest request, Part part, S3Service s3Service, S3Bucket s3Bucket) 
        throws S3ServiceException, NoSuchAlgorithmException, IOException
{
    S3Object s3Object = new S3Object();
    s3Object.setDataInputStream(part.getInputStream());
    s3Object.setKey(part.getName());
    s3Object.setContentLength(part.getSize());
    s3Object.setAcl(AccessControlList.REST_CANNED_PUBLIC_READ);
    s3Service.putObject(s3Bucket, s3Object);
}

        public static void update(HttpServletRequest request) 
        throws S3ServiceException, ServiceException, NoSuchAlgorithmException, IOException, IllegalStateException, ServletException
{
    AWSCredentials awsCredentials = (AWSCredentials) request.getSession().getAttribute("awsCredentials");
    S3Service s3Service = (S3Service) request.getSession().getAttribute("s3Service");
    S3Bucket s3Bucket = (S3Bucket) request.getSession().getAttribute("s3Bucket");
    String bucketName = (String) request.getSession().getAttribute("bucketName");

    String prefix = "uploads/";
    String delimiter = null;
    S3Object[] filteredObjects = s3Service.listObjects(bucketName, prefix, delimiter);

    Collection<Part> allParts = request.getParts();
    Collection<Part> selectedParts = new ArrayList<Part>();
    Collection<String> keys = new ArrayList<String>();

    for (Part part : allParts)
    {
        if (part.getSize()>1 && part.getSize()<10485760)
        {
            selectedParts.add(part);
        }
    }

    for (int o = 0; o < filteredObjects.length; o++)
    {
        String keyObject = filteredObjects[o].getName();
        keys.add(keyObject);
    }

    if (selectedParts.size() > 0)
    {
        for (Part part : selectedParts)
        {
            if (keys.contains(part.getName()))
            {
                s3Service.deleteObject(s3Bucket, part.getName());
                upload(request, part, s3Service, s3Bucket);
            }

            else
            {
                selectedParts.remove(part);
            }
        }
    }

    else
    {
        String ex = "No file to update.";
        exceptions.add(ex);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:34:48.673

这[是](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html)`Part`. _ 输入字段的名称由 提供[`Part#getName()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html#getName%28%29)。

```
String name = part.getName(); 
```

上传文件的内容由[`Part#getInputStream()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html#getInputStream%28%29).

```
InputStream content = part.getInputStream(); 
```

您可以读取它并将其写入任意`OutputStream` [通常的 Java I/O 方式](http://docs.oracle.com/javase/tutorial/essential/io/)。例如，一个`FileOutputStream`. 但是，我不确定您最终需要对`File`. 如果您的唯一目的是将其存储在数据库中，只需`InputStream`直接存储而不是先将其保存在磁盘上。

# scala - 为什么在主构造函数中非 val 或 var 参数可在代码中使用？

> ID：10576700
> 
> 赞同：1
> 
> 时间：2012-05-14T01:48:14.493
> 
> 标签：scala, constructor

我有这个代码。

```
class VBO (size: Int, usage: Int,
    private val vao: Int = GL30.glGenVertexArray(), 
    private val vbo: Int = GL15.glGenBuffers()) 
```

为什么我可以在类的其他方法中使用大小和用法？他们还被认为是什么（领域、方法等）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T02:25:17.477

它们之所以可用，是因为您可能出于某种原因需要它们，因为您将它们声明为参数。`private val`如果您在`def`或上使用它们，它们会很有效`lazy val`。如果您根本不使用它们，或者仅用于初始化`val`or `var`，则它们仅存在于构造函数中，而不是创建的实例的一部分。

# c - 为什么 Xcode 似乎跳过了第二个 scanf() 调用？

> ID：10576704
> 
> 赞同：2
> 
> 时间：2012-05-14T01:48:53.073
> 
> 标签：c, xcode, scanf

我是 Xcode 开发工具的新手。为了调试问题，我尝试了一个非常简单的代码：

```
int main()
{char N;
 char M;
 scanf("%c",&N);
 scanf("%c",&M);
 printf("%c",N);
 printf("%c",M);
} 
```

但问题是编译器似乎没有读取第二个scanf。所以我可以在控制台输入一个字符，然后程序就停止了。令人惊讶的是，当我用“int”代替“char”编写相同的代码时，它工作得很好。有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T01:50:30.047

在第一个 scanf 中输入字符后按 Enter 键，对吗？Enter 是第二个 scanf 读取的内容。并由第二个 printf 打印。

您还没有显示该程序的输出，但是如果您将 printf 格式更改为`%d\n`from `%c`，那么如果您键入“a”并按 Enter，它可能类似于以下内容：

```
97
10 
```

那 10 是 Enter 的字符代码（换行符或换行符）。

# pdf - 无法访问 pdf 文件？

> ID：10576705
> 
> 赞同：0
> 
> 时间：2012-05-14T01:48:56.813
> 
> 标签：pdf, pdf-generation

我有一个 PDF 格式的文件。但是当我打开它时，我收到以下错误消息：

> windows 无法访问指定的设备、路径或文件。您可能没有适当的权限来访问该项目。

可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:05:58.673

如果您的 PC 上存在以下任何一种情况，则可能会出现此问题。

您无权访问文件或文件位置 文件位于当前无法作为本地网络或未连接到 PC 的外部驱动器访问的位置 文件已被移动或删除 文件已损坏或快捷方式 文件可能被 Windows 阻止 防病毒软件可能阻止文件

# javascript - 如何获取触发功能的按钮的 id？

> ID：10576706
> 
> 赞同：2
> 
> 时间：2012-05-14T01:48:57.010
> 
> 标签：javascript, jquery

我有一个按钮

```
 <button onclick="DeletaItem('template','1234')" id="btn">Deletar_func</button> 
```

和功能

```
 function DeletaItem(tipo,id_cripto){
       alert(tipo+id_cripto);
       alert($(this).attr('id'));
   } 
```

为什么第二个警报未定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T02:57:09.217

第二个警报是未定义的，因为**这**不是指按钮，它实际上指的是**窗口**对象。

您需要将其发送**到**函数，将 onclick 更改为以下内容：

```
onclick="DeletaItem(this, 'template', '1234')" 
```

并更改功能如下：

```
function DeletaItem(button, tipo, id_cripto) {
    alert(tipo + id_cripto);
    alert(button.id);
} 
```

或将 onclick 保持原样并在函数中使用**event.target**而不是**this**。

```
function DeletaItem(tipo, id_cripto) {
    alert(tipo + id_cripto);
    alert(event.target.id);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T02:05:06.370

试试这个：

```
$('#btn').click(function(){
    alert(this.id);
}); 
```

或者

```
 <button onclick="DeletaItem(this,'template','1234')" id="btn">Deletar_func</button>

function DeletaItem(obj,tipo,id_cripto){

   alert(tipo+id_cripto);
   alert($(obj).attr('id'));
   alert(obj.id);
   // alert(this); if uncomment this, you will see it is eqaul window object

} 
```

当使用 onclick 属性调用函数时，它不会像第一个那样变成对象，所以你不能使用`this`; 这`this`是 window objectm 但在第一个中，将传递 jQuery 对象

# android - 在 Android 中将文档设为只读

> ID：10576709
> 
> 赞同：1
> 
> 时间：2012-05-14T01:49:55.653
> 
> 标签：android

我使用下面的代码通过调用其他应用程序来打开 .doc 文件。
但我不希望文件被修改。
所以我想将文件设置为只读。
或任何其他避免用户修改文件的方法。
文件格式可以是*.doc、*.docx、*.ppt、*.pptx、*.pdf、*.txt。

```
File file = new File(FilePath);
String mimetype = ".doc\tapplication/msword";
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file), mimetype);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:35:36.547

您无法阻止用户更改存储在外部存储设备上的数据，前提是他们找到愿意提供帮助的应用程序 - 例如现成的文件管理器应用程序。

只要安全模型保持不变，存储在应用程序私有存储区域中的数据就可以防止写入，或防止其他应用程序写入和读取。

但是，如果 Intent 指向的文件位于不同应用程序的私有存储区域中，则某些应用程序不愿意尝试访问该文件，即使已设置文件和目录权限位以便 Android 系统允许它们访问。（例如，至少某些版本的 GMail 拒绝附加不在外部存储上的文件，尽管如果文件是全球可读的，他们可以被诱骗这样做。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-24T04:36:48.253

Copy the document to a cloud storage site. **`named doc.docx`**

Then rename it to **`doc.docx1`**, this is your template. You can copy it and remove the docx1 and edit the copy at will, leaving the template in alone.

# javascript - 窗口之间如何通信？

> ID：10576711
> 
> 赞同：2
> 
> 时间：2012-05-14T01:50:13.583
> 
> 标签：javascript, jquery, websocket

编辑：这个问题可以总结如下：两个单独的 html 页面如何在不同的窗口中异步交换信息？

* * *

对于一个类项目，我必须构建一个基于 Web 的聊天客户端。教授提供了一个工作服务器。

我已经启动并运行了其中的一部分——任何连接的用户都可以向服务器发送消息，它将被转发给所有连接的用户并出现在他们的主聊天窗口中，类似于聊天室。

但是，客户端还需要具有发送/接收私人消息的选项。如果发送或接收私人消息，则会打开一个新窗口，显示*仅用于与该用户通信的聊天界面。*客户端向/从该用户发送/接收的任何未来私人消息都将显示在此窗口中，而不是主聊天室中。

我*完全*不知所措。收到私信后，如何打开一个新窗口，然后*继续与该窗口通信*？如果通过主窗口的 websocket 连接从该用户接收到更多私人消息，则必须将它们发送到该窗口，如果从该窗口向其他用户发送消息，则必须通过主窗口的 websocket 连接中继它们。

如果可以做到的话，如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T01:56:20.627

[`window.open`](https://developer.mozilla.org/en/DOM/window.open)返回`window`属于新打开的窗口的实例。如果在新窗口中打开的地址可以接受地属于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您可以修改它及其 DOM，就像您可以修改当前活动的窗口一样。

```
var w,
    someElement;
w = window.open('somepage.html', 'some window name', 'width=300,height=200');
someElement = w.document.getElementById('some-element-id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:17:54.103

我会这样处理它：

您的页面最初启动并使用 setTimeOut 类型函数对服务器进行 AJAX 调用，检查所有“公共”消息。当它想要发布消息时，它会执行另一个 AJAX 调用来发送公共消息。

我可能会向服务器添加另一个 AJAX 调用以询问“任何私人消息给我吗？” 服务器可以响应“是的，这是来自用户 ID 1234 的一个”。然后您可以使用 window.open 打开一个名为“FromUserID1234”或其他名称的窗口。存储该参考（使用一些 zzzzBow 的答案）。使用该参考，将来收到的任何私人消息，您都可以检查是否已经打开了私人消息窗口。如果是，请忽略它，如果不是，则创建一个。这也将允许您打开一个私人消息窗口，使用一段时间，关闭它，然后如果从同一用户收到另一个消息，它只会打开另一个窗口。

新窗口“FromUserID1234”然后使用 AJAX 与服务器通信，询问“您还有来自用户 ID 1234 的消息吗？”。服务器可以用新的响应，也可以发送消息。

抱歉，这本身不是确切的代码，但这是我开始定义问题的地方，然后只是构建通信接口以使这一切发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T02:32:20.117

使用 SignalR。它专注于你想做的事情。快乐编码！:)

请参阅此链接：[具有与 SignalR 的实时持久长期运行连接的异步可扩展 Web 应用程序](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

[http://www.youtube.com/watch?v=1wh33W-09bk](http://www.youtube.com/watch?v=1wh33W-09bk)

# qt - 简单的 QT 控制台 TCP 应用程序。我究竟做错了什么？

> ID：10576713
> 
> 赞同：1
> 
> 时间：2012-05-14T01:50:30.583
> 
> 标签：qt

```
#include <QtCore/QCoreApplication>
#include <QTCore>
#include <QtNetwork>
#include <QDebug>

#define CONNECT(sndr, sig, rcvr, slt) connect(sndr, SIGNAL(sig), rcvr, SLOT(slt))

class mynet : QObject
{
    Q_OBJECT

public:
    mynet()
    {}

    void start()
    {
        CONNECT(tcpServer,       newConnection(),                     this, acceptConnection());
        CONNECT(tcpClient,       connected(),                         this, startTransfer());
        CONNECT(tcpClient,       bytesWritten(qint64),                this, updateClientProgress(qint64));
        CONNECT(tcpClient,       error(QAbstractSocket::SocketError), this, displayError(QAbstractSocket::SocketError));

        // start server listening
        tcpServer->listen();
        while(!tcpServer->isListening());

        // make client connection
        tcpClient->connectToHost(QHostAddress::LocalHost, tcpServer->serverPort());
    }

public slots:
    void acceptConnection()
    {
        tcpServerConnection = tcpServer->nextPendingConnection();
        CONNECT(tcpServerConnection, readyRead(), this, updateServerProgress());
        CONNECT(tcpServerConnection, error(QAbstractSocket::SocketError), this, displayError(QAbstractSocket));
        tcpServer->close();
    }

    void startTransfer()
    {
        bytesToWrite = TotalBytes - (int)tcpClient->write(QByteArray(PayloadSize, '@'));
    }

    void updateServerProgress()
    {
        bytesReceived += (int)tcpServerConnection->bytesAvailable();
        tcpServerConnection->readAll();

        if (bytesReceived == TotalBytes)
        {
            qDebug() << "done";
            tcpServerConnection->close();
        }
    }

    void updateClientProgress(qint64 numBytes)
    {
        // callen when the TCP client has written some bytes
        bytesWritten += (int)numBytes;

        // only write more if not finished and when the Qt write buffer is below a certain size.
        if (bytesToWrite > 0 && tcpClient->bytesToWrite() <= 4*PayloadSize)
            bytesToWrite -= (int)tcpClient->write(QByteArray(qMin(bytesToWrite, PayloadSize), '@'));
    }

    void displayError(QAbstractSocket::SocketError socketError)
    {
        if (socketError == QTcpSocket::RemoteHostClosedError)
            return;

        qDebug() << tcpClient->errorString();

        tcpClient->close();
        tcpServer->close();
    }

private:
    QTcpServer* tcpServer;
    QTcpSocket* tcpClient;
    QTcpSocket* tcpServerConnection;
    int bytesToWrite;
    int bytesWritten;
    int bytesReceived;
    int TotalBytes;
    int PayloadSize;
};

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    mynet m1;
    m1.start();

    return a.exec();
} 
```

我得到一个

```
Undefined symbols for architecture x86_64:
"vtable for mynet", referenced from:
  mynet::mynet() in main.o
  mynet::~mynet()in main.o. 
```

请告知我做错了什么。由于某种原因，我不能在 Qt 中内联类中的方法定义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T06:53:19.377

确保将网络添加到您的 .pro 文件中。这将创建到网络库函数的正确链接。

```
QT       += core network 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:24:51.450

您需要将您的课程添加到 .pro 文件中

```
HEADERS += mynet.h
SOURCES += mynet.cpp 
```

所以元对象编译器可以扫描它们并计算出它们需要moc'ing并生成相关的存根。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T07:03:25.737

假设您的源文件已命名`foo.cpp`，您必须将以下行*放在最后*：

```
#include "foo.moc" 
```

这一行告诉 qmake 和 VS Qt 插件该文件应该通过 moc 运行，并且生成的 moc 文件应该命名为 foo.moc。

`#include`Qt 标头的行中也有问题。我发现以下工作：

```
#include <QtCore/QCoreApplication>
#include <QtNetwork/QTcpServer>
#include <QtNetwork/QTcpSocket> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T03:58:50.973

两件事情：

1）您应该公开从 QObject 派生。

2）你是在[moc'ing](http://doc.qt.nokia.com/4.7-snapshot/metaobjects.html)这个文件然后编译和链接输出吗？如果你包含 Q_OBJECT 宏并且不 moc，你会得到这样的错误。

# ruby-on-rails - Rails：从哈希动态分配字段类型

> ID：10576715
> 
> 赞同：1
> 
> 时间：2012-05-14T01:50:44.653
> 
> 标签：ruby-on-rails, forms, web, hash

我正在尝试使用哈希来显示表单：

```
PREFIX_STR = "Prefix"
FIRST_STR = "First Name"

NEW_USER_HASH = Hash.new
NEW_USER_HASH[ "prefix" ] = { "label" => PREFIX_STR, "type" => "text_field" }
NEW_USER_HASH[ "first" ] = { "label" => FIRST_STR, "type" => "text_field" } 
```

在 new.html.erb 中，我有：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <% NEW_USER_HASH.each do |column_name,field_info|  %>
    <div class="field">
      <%= f.label field_info["label"] %>
      <%= f.text_field column_name %>
    </div>
  <% end %> 
```

这很好用，但我希望它不是 f.text_field，而是 field_info [“type”] 中的内容。我试过的都没有用。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:05:45.763

你可以试试`f.send(field_into["type"], column_name)`。

（编辑删除“ `to_sym`”，评论者告诉我这是不必要的（我认为是`send`必需的符号。）

为什么这样有效： `some_object.send("hello")`只是另一种写作方式`some_object.hello`。在 Ruby 中，在对象上调用“方法”实际上是消息传递的一种形式——您正在向该对象发送消息，而对象将其解释为方法调用（或不解释）——使用 ruby​​ 元编程看起来不需要方法调用）。

在这种情况下，您有一个`f`表示对象的`form_helper`对象，因此当您调用 时`f.text_field`，您正在向该对象发送消息。通过使用`f.send`，您可以执行相同的操作，只是您可以动态生成该消息的内容。

# batch-file - OK = N 在 Windows 批处理文件中有什么作用？

> ID：10576717
> 
> 赞同：0
> 
> 时间：2012-05-14T01:50:52.150
> 
> 标签：batch-file

OK = N 在 Windows 批处理文件中有什么作用？例如，当您看到开头带有以下内容的文件时：

```
setlocal
OK=N 
```

提前致谢... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:08:58.577

这是设置本地的文档：

[http://www.computerhope.com/setlocal.htm](http://www.computerhope.com/setlocal.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:09:29.273

这对我来说根本无效。

假设你的意思是：

```
setlocal
set OK="N" 
```

那么这更多的是关于 setlocal 和 endlocal 而不是 set 命令。来自[这篇关于批处理文件的 technet 文章](http://technet.microsoft.com/en-us/library/cc750054.aspx)：

> SETLOCAL 和 ENDLOCAL
> 
> SETLOCAL 和 ENDLOCAL 命令一起使用。当您在批处理文件中使用 SETLOCAL 命令时，您在该点之后所做的任何环境更改都对批处理文件来说是本地的。例如，如果您使用 SETLOCAL 命令后跟：
> 
> SET TEMP=C:\TEMP 命令，批处理文件会将 TEMP 变量识别为包含字符串 C:\TEMP。但是，如果您要运行不同的批处理文件或打开不同的 MS-DOS 窗口，则 TEMP 变量将不包含此字符串。为了防止将来的环境变量更改是本地的，您可以使用 ENDLOCAL 命令。

这意味着您可以使用环境变量来存储您可能需要稍后在批处理文件中检查或更改的内容。例如，您可以创建一个名为 OK 的变量，将其设置为“N”，然后执行其他操作。根据某物的返回值，您可以将其设置为“Y”。在批处理文件的末尾，您可以再次检查以查看您是否成功。

这只是猜测，没有看到您正在谈论的一些工作代码，但我认为这就是您的意思。

# xml - 在 XCODE 中解析受保护的 XML

> ID：10576718
> 
> 赞同：0
> 
> 时间：2012-05-14T01:51:11.140
> 
> 标签：xml, xcode, nsurlconnection, nsconnection

我想知道是否有人可以帮助解析 XCODE 中受保护的 XML 文件。

这是我得到的，但我不知道如何混淆这些东西，因为我在 XCODE 中还很新。

**与认证的连接**

```
 -(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:    (NSURLAuthenticationChallenge *)challenge
{   
if ([challenge previousFailureCount] == 0) {
    NSURLCredential *newCredential;
    newCredential=[NSURLCredential credentialWithUser:@"myusername"
                                             password:@"mypassword"
                                          persistence:NSURLCredentialPersistenceNone];
    [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
} else {
    [[challenge sender] cancelAuthenticationChallenge:challenge];
    NSLog(@"Bad Username Or Password");

    UIAlertView* aler = [[UIAlertView alloc] initWithTitle:@"Authentication Error" message:@"Unable to connect to the server, Please Contact The WebMaster." delegate:nil cancelButtonTitle:@"Close" otherButtonTitles:nil];
    [aler show];
    [aler release]; 
}
    } 
```

解析代码

```
 -(void)doParse
{
[SongArray removeAllObjects];
//NEED TO GET XML DOCUMENT INTO NSData OBJECT!!!
NSURL *theURL = [[NSURL alloc] initWithString:@"myurl"];
// create and init NSXMLParser object

NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithContentsOfURL:theURL];
// create and init our delegate
XMLParser *parser = [[XMLParser alloc] initXMLParser];
//set delegate
[nsXmlParser setDelegate:parser];
//parsing...
BOOL success = [nsXmlParser parse];
// test the result
if (success) {
    NSLog(@"success");
    SongArray = [parser getPeople];
    [self.SongDescription reloadData];

} else {

    UIAlertView* aler = [[UIAlertView alloc] initWithTitle:@"Server Error" message:@"Unable To Read The Song Information, You May Keep Listening To The Radio Without Song Information" delegate:nil cancelButtonTitle:@"Close" otherButtonTitles:nil];
    [aler show];
    [aler release];

    NSLog(@"fail");
}

    } 
```

# python - Python文件练习问题

> ID：10576724
> 
> 赞同：2
> 
> 时间：2012-05-14T01:52:08.943
> 
> 标签：python, python-3.x

我正在学习教科书中的教程，“从 python 2nd edition 开始”，并且我在 IDLE 3.2 中得到了这个练习的回溯。我似乎无法弄清楚这个问题，它允许我输入销售数量，然后只有 1 个销售量，它会回显“写入 sales.txt 的数据”。然后显示第 2 天的提示，但输入的任何数量都会导致回溯：

第 118 行，在 main sales_file.write(str(sales) + '\n') ValueError: I/O operation on closed file。

代码：

```
def main():

     num_days = int(input('For how many days do ' + \
                          'you have sales? '))

     sales_file = open('sales.txt', 'w')

     for count in range(1, num_days + 1):
         sales = float(input('Enter the sales for day #' + \
                             str(count) + ': '))
         sales_file.write(str(sales) + '\n')
         sales_file.close()
         print('Data written to sales.txt.')

main() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T01:53:07.580

您正在关闭 for 循环内的文件。下次写入文件时通过循环，您正在尝试写入已关闭的文件，因此错误消息显示`I/O operation on closed file.`.

移动线

```
sales_file.close() 
```

to 在 for 循环底部的 print 语句之后，但在`for`. 这只会在循环后关闭文件*一次*（而不是重复），即当您在程序结束时完成它时。

像这样：

```
for count in range(1, num_days + 1):
   sales = float(input('Enter the sales for day #' + str(count) + ': '))
   sales_file.write(str(sales) + '\n')
   print('Data written to sales.txt.')

sales_file.close()   # close file once when done 
```

更好的方法是使用该`with`语句，因为它会在您完成后自动为您关闭文件。所以你可以说

```
with open('sales.txt', 'w') as sales_file:
   for count in range(1, num_days + 1)
      # rest of the code
      # but *no* close statement needed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:00:17.253

`with open('sales_file','w')` 如果您在离开块后使用这种方式，您可以以更简洁的方式执行此操作，`with`它将自动关闭文件。所以你会编辑你的函数来阅读：

```
def main():

    num_days = int(input('For how many days do ' + \
                        'you have sales? '))

    with open('sales.txt', 'w') as sales_file:
        for count in range(1, num_days + 1):
            sales = float(input('Enter the sales for day #' + \
                                str(count) + ': '))
            sales_file.write(str(sales) + '\n')
            print('Data written to sales.txt.')
    # once you leave the block (here) it automatically closes sales_file
main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T01:53:46.773

您在 1 个循环中关闭文件，然后在下一次迭代中写入它。将 close 放在循环之外

```
def main():

     num_days = int(input('For how many days do ' + \
                          'you have sales? '))

     sales_file = open('sales.txt', 'w')

     for count in range(1, num_days + 1):
         sales = float(input('Enter the sales for day #' + \
                             str(count) + ': '))
         sales_file.write(str(sales) + '\n')
         print('Data written to sales.txt.')

     sales_file.close()

main() 
```

更好的是，您可以使用`with`

```
def main():

     num_days = int(input('For how many days do you have sales? '))

     with open('sales.txt', 'w') as sales_file:

         for count in range(1, num_days + 1):
             sales = input('Enter the sales for day #%s: ' % count)
             sales_file.write('%s\n' % sales)
             print('Data written to sales.txt.')

main() 
```

# javascript - 为什么鼠标移出不起作用？

> ID：10576726
> 
> 赞同：0
> 
> 时间：2012-05-14T01:52:38.327
> 
> 标签：javascript

javascript代码：

```
<script type="text/javascript">
          window.onload=function(){
            var Div1 = document.getElementsByClassName("title");
            var Div2 = document.getElementsByClassName("sub-menu");
            var timer=null;
            Div1.onmouseover = function (){
                clearTimeout(timer);
                Div2.style.display='block';

            };
            Div1.onmouseout=function(){
                timer=setTimeout(function(){
                   Div2.style.display='none';
                },300);

            };

            Div2.onmouseover =function(){
                clearTimeout(timer);
            };

            Div2.onmouseout=function(){
                 timer=setTimeout(function(){

                        Div2.style.display='none';
                     },300);

            };
        }

    </script> 
```

html代码：

```
<div id="nav">
  <div class="left"></div>
  <div class="right"></div>
  <ul>
    <li><a href="/" class="current">Home</a></li>
    <li class="title"><a href="/cpanel.html" class="">cPanel</a>
      <div class="sub-menu">
      <div style="float:left">
          <h2>test</h2>
          <ul>
          <li>
              <a href="#">test</a>
          </li>
            <li>
              <a href="#">test</a>
          </li>
          </ul>
      </div>
  <div style="float:left">
          <h2>service</h2>
          <ul>
          <li>
              <a href="#">hello</a>
          </li>
            <li>
              <a href="#">hello</a>
          </li>
          </ul>
      </div>
</div>
    </li>

    <li class="title"><a href="/price.html" class="">Price</a>
    <div class="sub-menu">
        <ul>
          <li>
              <a href="#">hello</a>
          </li>
            <li>
              <a href="#">world</a>
          </li>
          </ul>
      </div>

    </li>

  </ul>
</div> 
```

CSS：

```
 #nav ul li{
    float: left;
    margin-right:50px;
    list-style: none;
    border-bottom: 1px solid red;
    position: relative;
    border: 1px solid red;
        }
#nav ul li .sub-menu{
    display: none;
    font-weight: normal;
    margin-top: 1px;
    padding: 0 10px 10px;
    position: absolute;
    text-align: left;
    width:auto;
    left: 10px;
    top:30px;
    border:1px solid #CCCCCC;
    width: 300px;
  } 
```

js代码不起作用。当我将鼠标放在文本上`cpanel`时，它不显示它下面的相应内容。我不知道它有什么问题如何纠正它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:01:36.490

`getElementsByClassName()`返回一个[HTMLCollection](https://developer.mozilla.org/En/DOM/HTMLCollection)。您需要通过将其视为数组来选择此集合的第一个元素：

```
var Div1 = document.getElementsByClassName("title")[0];
var Div2 = document.getElementsByClassName("sub-menu")[0]; 
```

# javascript - 覆盖本机 Javascript 函数

> ID：10576731
> 
> 赞同：2
> 
> 时间：2012-05-14T01:53:23.997
> 
> 标签：javascript

具体来说，我想覆盖`getElementsByClassName`除 IE 之外的每个浏览器中可用的功能。IE 使用 a`querySelectorAll`代替。

```
Element.prototype.getElementsByClassName = function(className) {
    if(document.getElementsByClassName) {
        return this.getElementsByClassName(className);
    } else if(document.querySelectorAll) {
        return this.querySelectorAll(className);
    }
}; 
```

但是在 Firefox 中运行代码时，它会使用原生函数。如果 getElementsByClassName 不可用，这仍然可以用作跨浏览器解决方案并使用我的原型，还是有办法覆盖本机函数以便每次都使用我的代码？我可以将原型命名为类似的名称，但为了便于阅读，id 更喜欢保持相同的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:23:33.257

我只是想将 Matt Ball 的答案添加为这个问题的真正公认答案。正如他所提到的，最好使用 polyfill 而不是我最初设置的方式。

```
if(!Element.prototype.getElementsByClassName) {
    Element.prototype.getElementsByClassName = function(className) {
        return this.querySelectorAll(className);
    }
} 
```

# mysql - sql union 不规则组合

> ID：10576737
> 
> 赞同：0
> 
> 时间：2012-05-14T01:54:48.817
> 
> 标签：mysql, sql

查询 3 个表，最后一个表有额外的行要查找。
试过这个：

```
(SELECT 't1' AS tn, navid, clicks AS cc, tags 
FROM t1 
WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
AND tags LIKE '%cars%' )

UNION DISTINCT

(SELECT 't2' AS tn, navid, clicks AS cc, tags 
FROM t2 
WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
AND tags LIKE '%cars%' )

UNION DISTINCT

(SELECT 't3' AS tn, navid, title, clicks AS cc, tags 
FROM t3 
WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
AND tags LIKE '%cars%' ) 
```

我想`title`在 t3中获得
任何帮助，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:57:10.243

只需将其添加到前两个子查询中，其值类似于 NULL：

```
(SELECT 't1' AS tn, navid, NULL as title, clicks AS cc, tags 
 FROM t1 
 WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
       AND tags LIKE '%cars%' )
UNION DISTINCT
(SELECT 't2' AS tn, navid, NULL as title, clicks AS cc, tags 
 FROM t2 
 WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
       AND tags LIKE '%cars%' )
UNION DISTINCT
(SELECT 't3' AS tn, navid, title, clicks AS cc, tags 
 FROM t3 
 WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
       AND tags LIKE '%cars%' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T01:59:00.660

[通过UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)组合的 SQL应该具有相同数量和类型的列。

这是因为您只有一个查询结果，即使它看起来像多个小查询。

所以你必须有一些`title`列的值。你没有它`t1`和`t2`。所以只需选择`null`：

`SELECT 't1' AS tn, navid, null as title, clicks AS cc, tags`...

```
(SELECT 't1' AS tn, navid, null as title, clicks AS cc, tags 
FROM t1 
WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
AND tags LIKE '%cars%' )

UNION DISTINCT

(SELECT 't2' AS tn, navid, null as title, clicks AS cc, tags 
FROM t2 
WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
AND tags LIKE '%cars%' )

UNION DISTINCT

(SELECT 't3' AS tn, navid, title, clicks AS cc, tags 
FROM t3 
WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
AND tags LIKE '%cars%' ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T01:59:00.693

UNION 的列数必须相同，列名也基于第一个查询，因此您不需要为 UNION 中的每个查询命名列

```
(SELECT 't1' AS tn, navid, '' As title, clicks AS cc, tags 
FROM t1 
WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
AND tags LIKE '%cars%' )

UNION DISTINCT

(SELECT 't2', navid, '', clicks, tags 
FROM t2 
WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
AND tags LIKE '%cars%' )

UNION DISTINCT

(SELECT 't3', navid, title, clicks, tags 
FROM t3 
WHERE DATE_ADD(d, INTERVAL '0 8' DAY_HOUR) <= NOW() 
AND tags LIKE '%cars%' ) 
```

# mysql - MySQL 无法启动

> ID：10576743
> 
> 赞同：3
> 
> 时间：2012-05-14T01:56:06.283
> 
> 标签：mysql

当我尝试启动 MySQL 时，我得到：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) 
```

当我使用 sudo 时，我得到：

```
Starting MySQL
. ERROR! The server quit without updating PID file (/usr/local/var/mysql/Victorias-MacBook-Pro.local.pid). 
```

我正在使用 Mac OS X 10.7。我通过自制软件安装了 MySQL，并安装了 MySQL 5.5.20。

这是我得到的 .err 文件：

```
120513 22:30:03 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120513 22:30:03 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
/usr/local/Cellar/mysql/5.5.20/bin/mysqld: Table 'mysql.plugin' doesn't exist
120513 22:30:03 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120513 22:30:03 InnoDB: The InnoDB memory heap is disabled
120513 22:30:03 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120513 22:30:03 InnoDB: Compressed tables use zlib 1.2.5
120513 22:30:03 InnoDB: Initializing buffer pool, size = 128.0M
120513 22:30:03 InnoDB: Completed initialization of buffer pool
120513 22:30:03 InnoDB: highest supported file format is Barracuda.
120513 22:30:03  InnoDB: Waiting for the background threads to start
120513 22:30:04 InnoDB: 1.1.8 started; log sequence number 1595675
120513 22:30:04 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.host' doesn't exist
120513 22:30:04 mysqld_safe mysqld from pid file /usr/local/var/mysql/Victorias-MacBook-Pro.local.pid ended
120513 22:30:13 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120513 22:30:13 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
/usr/local/Cellar/mysql/5.5.20/bin/mysqld: Table 'mysql.plugin' doesn't exist
120513 22:30:13 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120513 22:30:13 InnoDB: The InnoDB memory heap is disabled
120513 22:30:13 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120513 22:30:13 InnoDB: Compressed tables use zlib 1.2.5
120513 22:30:13 InnoDB: Initializing buffer pool, size = 128.0M
120513 22:30:13 InnoDB: Completed initialization of buffer pool
120513 22:30:13 InnoDB: highest supported file format is Barracuda.
120513 22:30:13  InnoDB: Waiting for the background threads to start
120513 22:30:14 InnoDB: 1.1.8 started; log sequence number 1595675
120513 22:30:14 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.host' doesn't exist
120513 22:30:14 mysqld_safe mysqld from pid file /usr/local/var/mysql/Victorias-MacBook-Pro.local.pid ended
120513 22:30:24 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120513 22:30:24 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
/usr/local/Cellar/mysql/5.5.20/bin/mysqld: Table 'mysql.plugin' doesn't exist
120513 22:30:24 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120513 22:30:24 InnoDB: The InnoDB memory heap is disabled
120513 22:30:24 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120513 22:30:24 InnoDB: Compressed tables use zlib 1.2.5
120513 22:30:24 InnoDB: Initializing buffer pool, size = 128.0M
120513 22:30:24 InnoDB: Completed initialization of buffer pool
120513 22:30:24 InnoDB: highest supported file format is Barracuda.
120513 22:30:24  InnoDB: Waiting for the background threads to start
120513 22:30:25 InnoDB: 1.1.8 started; log sequence number 1595675
120513 22:30:25 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.host' doesn't exist
120513 22:30:25 mysqld_safe mysqld from pid file /usr/local/var/mysql/Victorias-MacBook-Pro.local.pid ended
120513 22:30:34 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120513 22:30:34 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
/usr/local/Cellar/mysql/5.5.20/bin/mysqld: Table 'mysql.plugin' doesn't exist
120513 22:30:34 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120513 22:30:34 InnoDB: The InnoDB memory heap is disabled
120513 22:30:34 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120513 22:30:34 InnoDB: Compressed tables use zlib 1.2.5
120513 22:30:34 InnoDB: Initializing buffer pool, size = 128.0M
120513 22:30:34 InnoDB: Completed initialization of buffer pool
120513 22:30:34 InnoDB: highest supported file format is Barracuda.
120513 22:30:34  InnoDB: Waiting for the background threads to start
120513 22:30:35 InnoDB: 1.1.8 started; log sequence number 1595675
120513 22:30:35 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.host' doesn't exist
120513 22:30:35 mysqld_safe mysqld from pid file /usr/local/var/mysql/Victorias-MacBook-Pro.local.pid ended
120513 22:30:44 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120513 22:30:44 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
/usr/local/Cellar/mysql/5.5.20/bin/mysqld: Table 'mysql.plugin' doesn't exist
120513 22:30:44 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120513 22:30:44 InnoDB: The InnoDB memory heap is disabled
120513 22:30:44 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120513 22:30:44 InnoDB: Compressed tables use zlib 1.2.5
120513 22:30:44 InnoDB: Initializing buffer pool, size = 128.0M
120513 22:30:44 InnoDB: Completed initialization of buffer pool
120513 22:30:44 InnoDB: highest supported file format is Barracuda.
120513 22:30:44  InnoDB: Waiting for the background threads to start
120513 22:30:45 InnoDB: 1.1.8 started; log sequence number 1595675
120513 22:30:45 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.host' doesn't exist
120513 22:30:45 mysqld_safe mysqld from pid file /usr/local/var/mysql/Victorias-MacBook-Pro.local.pid ended
120513 22:30:54 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120513 22:30:54 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
/usr/local/Cellar/mysql/5.5.20/bin/mysqld: Table 'mysql.plugin' doesn't exist
120513 22:30:54 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120513 22:30:54 InnoDB: The InnoDB memory heap is disabled
120513 22:30:54 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120513 22:30:54 InnoDB: Compressed tables use zlib 1.2.5
120513 22:30:54 InnoDB: Initializing buffer pool, size = 128.0M
120513 22:30:54 InnoDB: Completed initialization of buffer pool
120513 22:30:54 InnoDB: highest supported file format is Barracuda.
120513 22:30:54  InnoDB: Waiting for the background threads to start
120513 22:30:55 InnoDB: 1.1.8 started; log sequence number 1595675
120513 22:30:55 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.host' doesn't exist
120513 22:30:55 mysqld_safe mysqld from pid file /usr/local/var/mysql/Victorias-MacBook-Pro.local.pid ended
120513 22:31:04 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120513 22:31:04 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
/usr/local/Cellar/mysql/5.5.20/bin/mysqld: Table 'mysql.plugin' doesn't exist
120513 22:31:04 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120513 22:31:04 InnoDB: The InnoDB memory heap is disabled
120513 22:31:04 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120513 22:31:04 InnoDB: Compressed tables use zlib 1.2.5
120513 22:31:04 InnoDB: Initializing buffer pool, size = 128.0M
120513 22:31:04 InnoDB: Completed initialization of buffer pool
120513 22:31:04 InnoDB: highest supported file format is Barracuda.
120513 22:31:04  InnoDB: Waiting for the background threads to start 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T02:11:53.520

删除这个 pid 文件，确保所有实例都已停止（杀死所有不会关闭的进程），检查没有正在监听 MySQL 端口 3306（netstat 应该有帮助）并尝试再次启动 MySQL。

# python - 如何在仍然显示的同时将 Python Stderr 重定向到字符串

> ID：10576745
> 
> 赞同：3
> 
> 时间：2012-05-14T01:56:17.990
> 
> 标签：python

我正在捕获脚本的标准错误，以便以后可以通过以下方式保存到数据库中：

```
ostderr = sys.stderr
sys.stderr = StringIO()

# do stuff

mymodel.errors = sys.stderr.getvalue()
mymodel.save()
print mymodel.errors
sys.stderr = ostderr 
```

不幸的是，这使临时调试变得更加困难，因为如果发生任何错误，我将在脚本终止之前看到它们。

就像我在上面所做的那样，如何在字符串中捕获 stderr，但仍将其实时显示到控制台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T02:03:40.337

使用类似文件的对象，该对象既可以保存又可以打印到常规 stderr。就像是：

```
class TeeFiles(object):
    def __init__(self, file):
        self.sio = StringIO()
        self.file = file

    def write(self, txt):
        self.sio.write(txt)
        self.file.write(txt)

sys.stderr = TeeFiles(sys.stderr)

# do stuff

mymodel.errors = sys.stderr.sio.getvalue()
mymodel.save()
sys.stderr = sys.stderr.file 
```

您可能还需要支持`closed`,`flush`等内容，具体取决于`#do stuff`. 如果您继承自`StringIO`.

# c# - 布尔到 System.Windows.Visibility（动态创建 DataGridColumnHeaders 时的绑定问题）

> ID：10576747
> 
> 赞同：2
> 
> 时间：2012-05-14T01:56:31.813
> 
> 标签：c#, xaml, binding, datagrid, visibility

我陷入了一个必须动态创建数据网格列并且必须在 C# 代码中创建列的场景中。对于每个生成的列，我在单独的代码区域中有一个复选框。该复选框确定特定列是隐藏还是可见。该复选框绑定到 GameAttributes.Visible 属性。但是，DataGrid Visibility 属性是不同的类型。我尝试使用 BooleanToVisibilityConverter，但仍然收到编译错误（如我所想）。有没有任何有效的解决方法来解决这个问题？

我遇到的错误：

```
Cannot implicitly convert type 'bool' to 'System.Windows.Visibility' 
```

**编辑：**编译器错误已解决，但绑定似乎不适用于可见性。

XAML：

```
<DataGrid ItemsSource="{Binding}" 
              DockPanel.Dock="Top" 
              AutoGenerateColumns="False" 
              HorizontalAlignment="Stretch" 
              Name="GameDataGrid" 
              VerticalAlignment="Stretch" 
              CanUserAddRows="False" 
              CanUserDeleteRows="False" 
              CanUserResizeRows="False"
              IsReadOnly="True"
              > 
```

看法：

```
GameAttributes.Add(new GameInfoAttributeViewModel() { Visible = true, Description = "Name", BindingName = "Name" });
GameAttributes.Add(new GameInfoAttributeViewModel() { Visible = false, Description = "Description", BindingName = "Description" });
GameAttributes.Add(new GameInfoAttributeViewModel() { Visible = false, Description = "Game Exists", BindingName = "GameExists" });
foreach (GameInfoAttributeViewModel attribute in GameAttributes)
{

    DataGridTextColumn column = new DataGridTextColumn
    {
        Header = attribute.Description,
        Binding = new Binding(attribute.BindingName),
    };

    Binding visibilityBinding = new Binding();
    visibilityBinding.Path = new PropertyPath("Visible");
    visibilityBinding.Source = attribute;
    visibilityBinding.Converter = new BooleanToVisibilityConverter();
    BindingOperations.SetBinding(column, VisibilityProperty, visibilityBinding);

    GameDataGrid.Columns.Add(column);

} 
```

视图模型：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Windows;

namespace DonsHyperspinListGenerator
{
    class GameInfoAttribute
    {
        public string Description { get; set; }
        public bool Visible { get; set; }
        public string BindingName { get; set; }
    }

    //todo: move to separate class
    class GameInfoAttributeViewModel : INotifyPropertyChanged
    {
        private GameInfoAttribute mGameInfo = new GameInfoAttribute();

        public string Description
        {
            get { return mGameInfo.Description; }
            set
            {
                if (mGameInfo.Description != value)
                {
                    mGameInfo.Description = value;
                    InvokePropertyChanged("Description");
                }
            }
        }

        public bool Visible
        {
            get { return mGameInfo.Visible; }
            set
            {
                if (mGameInfo.Visible != value)
                {
                    mGameInfo.Visible = value;
                    InvokePropertyChanged("Visible");
                }
            }
        }

        public string BindingName
        {
            get { return mGameInfo.BindingName; }
            set
            {
                if (mGameInfo.BindingName != value)
                {
                    mGameInfo.BindingName = value;
                    InvokePropertyChanged("BindingName");
                }
            }
        }
        public event PropertyChangedEventHandler PropertyChanged;

        private void InvokePropertyChanged(string propertyName)
        {
            var e = new PropertyChangedEventArgs(propertyName);
            PropertyChangedEventHandler changed = PropertyChanged;
            if (changed != null) changed(this, e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:24:51.860

与您的绑定或价值转换器没有任何关系。你正在做这个任务：

```
Visibility = attribute.Visible 
```

在视图中创建一个新列。

那是你的编译错误。Visibility 是 System.Windows.Visibility，attribute.Visible 是 bool。您不能将 Visibility 设置为布尔值。如果这个值是通过绑定设置的，那么你真的不需要手动设置它（实际上它会清除你的绑定）。

**编辑：**

这是一个如何在后面的代码中设置绑定以使用值转换器的示例：

```
var binding = new Binding();
binding.Source = attribute;
binding.Path = new PropertyPath("Visible");
binding.Converter = (BooleanToVisibilityConverter)Resources["BoolToVisibilityConverter"];

BindingOperations.SetBinding(column, DataGridTemplateColumn.VisibilityProperty, binding); 
```

**第二次编辑：** 我在上面的代码中看到了一些可能有问题的东西：

首先，当您设置绑定时，看起来您正在`VisibilityProperty`为您的 DependencyProperty 设置“”上的绑定。我不确定在您的观点中这是什么（可能`UserControl.VisibilityProperty`，或其他）。您要设置的特定 DependencyProperty 位于 DataGridTemplateColumn 类型上，因此我相信您希望将其设置为`DataGridTemplateColumn.VisibilityProperty`。

所以这一行：`BindingOperations.SetBinding(column, VisibilityProperty, visibilityBinding);`

变成这样：`BindingOperations.SetBinding(column, DataGridTemplateColumn.VisibilityProperty, visibilityBinding);`

另一件事是 DataGridTextColumn 的对象初始化程序中的这一行：

```
Binding = new Binding(attribute.BindingName), 
```

我不确定你在用那条线做什么，但它可能会导致列的整体 DataContext 出现问题（这反过来可能会导致 Visibility 绑定出现问题）。我不肯定这是一个问题，但绝对*不需要*设置可见性绑定。我在一个示例项目中使用了我在答案中提供的代码，并且我在上面提供的行中添加了所有代码（在取出导致编译错误的列初始化程序中的赋值之后。

# mysql - 允许用户在他们的个人资料上放置标签的数据库结构？

> ID：10576751
> 
> 赞同：0
> 
> 时间：2012-05-14T01:57:10.480
> 
> 标签：mysql, database, database-design

我有一个包含以下信息的用户表

```
users (id, username, password, email, location, about, sex, age, etc.) 
```

我想让用户在他们的个人资料中最多添加五个标签。

标签将存储他们的兴趣。并将用于根据相似的兴趣向其他用户推荐用户。

我应该在我的用户表中创建一个字段，他们可以在其中存储所有五个标签，还是应该为每个标签创建一个单独的标签表，其中每个标签对应于`user_id`它所属的人？

如果我选择选项 1，如何在 PHP 中存储以逗号分隔的标签？我将创建存储标签名称的变量，然后如何以正确的格式添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:02:18.593

在一个字段中记录多个标签可能会导致问题。

我个人会做一个新表：

```
tags (id, userid, tag) 
```

如您所见，它使用用户标识作为外键。计算它们等也会更容易。

# javascript - 下载属性覆盖 onClick

> ID：10576760
> 
> 赞同：0
> 
> 时间：2012-05-14T01:58:24.337
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:35:35.490

尝试使用`addEventListener`：

```
a.addEventListener("click", function (e) {
    var notification = webkitNotifications.createHTMLNotification(
        'notification2.html'
    );
}); 
```

# c++ - 使用文件流删除一行文本 (C++)

> ID：10576771
> 
> 赞同：3
> 
> 时间：2012-05-14T02:00:13.350
> 
> 标签：c++, c++11, filestream, fstream, getline

我有一个大文本文件。
每次我的程序运行时，它都需要读取第一行，将其删除，然后将该数据放回文件底部。

有没有办法完成这项任务而不必读取文件的每个部分？
遵循这个伪代码示例会很棒：

> ```
> 1\. Open file stream for reading/writing
> 2\.   data = first line of file
> 3\.   remove first line from file  <-- can I do this?
> 4\. Close file stream
> 
> 5\. Open file stream for appending
> 6\.   write data to file
> 7\. Close file stream 
> ```

我试图避免阅读所有内容的原因是因为程序每天在特定时间运行。我不希望每次文件变大时延迟都会变长。

我发现的所有解决方案都要求程序处理整个文件。如果 C++ 文件流无法实现这一点，我愿意为我的 C++ 程序执行任何快速有效的替代方案。
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T02:03:27.607

不幸的事实是，现代操作系统上的任何文件系统都没有设计用于执行此操作。从文件开头删除某些内容的唯一方法是将内容复制到新文件中，但第一位除外。根本没有办法精确地做你想做的事。

但希望你能做一些重新设计。也许每个条目都可以是数据库中的一条记录——然后重新排序可以非常有效地完成。或者该文件可能包含固定大小的记录，并且您可以使用第二个索引文件来指定记录顺序，以便重新排列文件只是更新索引的问题。

# json - 使用从 json 返回的数据从 foreach 循环创建 dijit 手风琴容器

> ID：10576772
> 
> 赞同：0
> 
> 时间：2012-05-14T02:00:13.677
> 
> 标签：json, dojo

如何使用 for each 循环为使用 ajax 从 json 文件返回的每个数据创建手风琴容器？

我试过这个！这是通往它的路吗？

```
dojo.xhrGet({
    url:"json/"file_Name".json",
    handleAs: "json",
    timeout: 10000,
    load: function(response,details){
        container(response)},
    error: function(error_msg,details){
        container(error_msg, details);
    }

    });

         //how do i use the json file to add data to the array arrFruit and then create dijit accordian container for every data in the array//
    container = function(array, domConstruct) {

      var arrFruit = ["apples", "kiwis", "pineapples"];
      array.forEach(arrFruit, function(item, i){
            domConstruct.create("li", {innerHTML: i+1+". "+item}, "properties");
      });

    };
     //the response data from my json file is:-
     [
{
    "itemId": 1234,
    "Name": "Name",
            }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:12:28.157

我建议您将其重写为利用 ItemFileReadStore。Store 是一个数据容器，您可以在其中通过 id 提取项目。这意味着您的 json 需要稍微更改一下，说明什么是标识符以及 - 如果有的话 - 这是子属性键。

JSON：

```
{
  identifier: 'itemId',
  // you dont seem to have child references any but these are defaults
  childrenAttrs: ['items', 'children'],
  items: [
    {
     itemId: 1234,
     name: 'Name'
    }, {
       ...
    }
  ]
} 
```

然后在您的代码中，而不是使用 .xhr 在商店中使用 .fetch ，如下所示：

```
// 1.7+ syntax, pulling in dependencies. 
// We want accordion and some other display widget like contentpane.
// Also we await domReady before calling our function
require(["dojo/data/ItemFileReadStore", "dijit/layout/AccordionContainer", "dijit/layout/ContentPane", "dojo/domReady!"], function(itemStore, accordion, contenpane) {

  // this section is called when loading of itemstore dependencies are done
  // create store
  var store = new itemStore({
    url:"json/"file_Name".json"
  });
  // create container
  var acc = new accordion({style:"height: 300px"}, 'someDomNodeId');

  // call XHR via .fetch and assign onComplete (opposed to 'load') callback
  store.fetch({ onComplete: function(items) {

    // items is an array of all the objects kept in jsonObject.items array
    items.forEach(function(item) {
       acc.addChild(new contentpane({
          title: "Name for id: " + store.getValue(item, 'itemId'),
          content: store.getValue(item, 'name')
       }));
    });
  console.log(acc.getChildren()); // << would print out an array of contentpane widgets
  });
}); 
```

这是howto :) 在任何给定时间，您都可以使用商店并获取一些项目，假设您想要过滤掉一些特定的项目，像这样调用 .query ：`store.fetch({query: { name: '*foo'/*all item.name ending with foo*/ }, onComplete: function(items) { /*cb func*/});`

请参阅 [http://livedocs.dojotoolkit.org/dijit/layout/AccordionContainer#programmatic-example](http://livedocs.dojotoolkit.org/dijit/layout/AccordionContainer#programmatic-example) 和 [http://livedocs.dojotoolkit.org/dojo/data/ItemFileReadStore](http://livedocs.dojotoolkit.org/dojo/data/ItemFileReadStore)

# sql - 如何从重复条目列表中选择最大值

> ID：10576775
> 
> 赞同：0
> 
> 时间：2012-05-14T02:01:11.757
> 
> 标签：sql

我正在尝试查询包含事务列表的数据库。我需要的交易必须是特定状态，如果存在重复的成本代码，查询应该只返回 ID 号最高的 ID

我的示例表如下，表名 = foo，我需要的状态是 3

```
ID       transaction date     status     cost code
1         20120101               3           5
2         20120101               3           5
3         20120101               4           7 
```

在这个例子中，我需要的是 ID 2

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T02:04:00.837

```
select * from foo where status = 3 order by id desc limit 1; 
```

您可以将 3 替换为您有兴趣检索的任何状态。

“order by id desc limit 1”短语将满足“具有最高 ID 号的 ID”约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:06:20.503

如果所选列相同，您可以使用 MAX 获取最高 ID 号

```
SELECT transaction_date, Status, cost_code, MAX(ID) As ID
FROM foo
GROUP BY transaction_date, Status, cost_code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T02:09:10.850

使用此查询：

```
SELECT MAX(ID) AS MaxID
FROM foo
WHERE status = 3 
```

# ios - 是否可以为ios应用程序开发转弯导航？

> ID：10576782
> 
> 赞同：0
> 
> 时间：2012-05-14T02:02:51.677
> 
> 标签：ios, navigation, gps

我正在尝试为 iphone 和 ipad 开发轮流导航应用程序。我整天都在搜索，但似乎没有地图数据 api 就无法构建它。（我认为谷歌地图不提供该 API）虽然我可以在我的应用程序中启动谷歌地图应用程序，但我想在不使用谷歌地图应用程序的情况下这样做。（不使用 [UIApplication sharedapplicaiton] openURl...等）

我只是想问一下是否有可能构建一个 ios 转弯导航应用程序。非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T02:15:57.927

很难想象制作一个没有地图数据源的导航应用程序。Google Map API 的替代方案是 OpenStreetMap API。这是一个[关于为 iOS 开发 OpenStreetMap 应用程序的页面](http://wiki.openstreetmap.org/wiki/Apple_iOS)，其中包括当前现有应用程序的列表。所以是的，这是可行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:37:41.480

拥有许多资源的大公司可以构建这种类型的应用程序。Apple 没有为此提供任何类型的 API。您将需要地图的数据源以及用于指示方向的数据源和算法。您不能直接在 IOS 中使用 Google Maps 方向。所以答案是肯定的，但由于初始投资大且竞争激烈，在应用商店中赚钱是可能的，但不太可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-07T08:43:13.183

现在 iOs 6.0 已经用内置地图取代了谷歌地图，这些地图非常容易实现，而且还内置了很多功能

# mysql - 学校网站 SQL 设计

> ID：10576784
> 
> 赞同：0
> 
> 时间：2012-05-14T02:03:06.097
> 
> 标签：mysql, algorithm

我刚刚接到了一个修改学校网站以进行班级注册的项目。当前的系统是为每个班级设计的，每周运行一次，但我需要进行更改，以便每周可以在一个或多个晚上上课。我正在努力寻找一种有效的方法来关联每个课程，并允许客户在注册该系列时查看和选择一个课程。

我的第一个想法是添加另一个可以保存唯一值的字段（groupid）以将相应的类联系在一起。查看对这种方法进行排序的查询很困难，因为如果我按星期几排序，然后是 groupid（用于显示、类选择等），那么类将被分开。按 groupid 然后按星期几排序会产生非时间顺序，这也不起作用。有没有办法在排序后将类一起移动 groupid ，但不影响排序日期？

我的第二个想法是修改表以支持每行多个类。这将是一种更简单的方法，但灵活性较差，如果课程不在一周的同一时间运行，问题会更加严重。

无论如何，我有点迷茫，如果有任何关于设计的反馈和/或有助于解决我的排序问题的查询，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T02:09:20.363

一个班级是一个单一的实体，无论它在给定的一周内遇到多少天。创建一个计划表。它将包括 FK_ClassID 和 ScheduleDate。如果它在一周中的三天内开会，它将有三个记录。这样，学生可以安排多个课程，但要检查以确保他们不会在一周的同一天重叠。

# ios - iOS 的字体配置

> ID：10576785
> 
> 赞同：0
> 
> 时间：2012-05-14T02:03:10.253
> 
> 标签：ios, fontconfig

我从这里下载 Fontconfig-2.9.0.tar.gz [http://freedesktop.org/software/fontconfig/release](http://freedesktop.org/software/fontconfig/release)

但我不知道如何为 iOS 交叉编译它。我需要一个用于 iOS 的 fontconfig.a，有人可以告诉我如何编译它或给我一个指南吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T01:38:01.780

./configure --host=arm-ios --prefix=$PREFIX --with-freetype-config=$PREFIX/bin/freetype-config --with-arch=arm make make install

# ruby - RSpec - 尝试在初始化属性上调用方法时规范失败

> ID：10576791
> 
> 赞同：0
> 
> 时间：2012-05-14T02:04:30.157
> 
> 标签：ruby, rspec, initialization

这是我的规格和课程的代码：

```
describe Game do

  before(:each) do
    @game = Factory.build(:game)
  end

  describe '#no_books?' do
    it 'should return true if books attribute is empty' do
      @game.stub(:books).and_return([])
      @game.no_books?.should be_true
    end

    it 'should return false if books attribute is present' do
      @game.no_books?.should be_false
    end
  end

end

class Game

  attr_reader :books

  def initialize
    @books = parse_books
  end

  def no_books?
    @books.empty?
  end

  protected

  def parse_books
    # return books
  end

end 
```

然后我收到一条友好的规范失败消息：

```
Game#no_books? should return true if books attribute is empty
     Failure/Error: @game.no_books?.should be_true
       expected false to be true 
```

就好像在使用值初始化属性书之前调用了该方法。有人可以向我解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:43:56.930

您的`no_books?`实现在其检查中直接使用实例变量，绕过您的存根。如果您更改`no_books?`为 return `books.empty?`，它将改为调用存根。

如果你真的，*真的*想继续使用实例变量，你可以像这样设置`@game`它`instance_variable_set`：

```
@game.instance_variable_set("@books", []) 
```

# php - phpMyadmin 错误

> ID：10576794
> 
> 赞同：0
> 
> 时间：2012-05-14T02:05:04.577
> 
> 标签：php, phpmyadmin

我在 MAC 10.7.4 网络服务器上运行，安装了最新版本的 apache、php 和 mysql。现在我运行了 phpadmin，但我在登录时收到此消息。

“phpMyAdmin配置存储未完全配置，部分扩展功能已停用。了解原因点击这里。”

过去一个小时我一直在谷歌搜索，因为我想启用这些功能。关于如何设置，我只提出了模糊的答案。我更像是一个初学者，所以我需要一些帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:08:32.920

要使用 phpMyAdmin 的一些扩展功能，它需要有自己的数据库来存储设置。

您是否阅读过文档的这一部分？
[http://www.phpmyadmin.net/documentation/#linked-tables](http://www.phpmyadmin.net/documentation/#linked-tables)

它讨论了`.SQL`您需要在服务器上运行的文件，该文件设置了必要的表。您可以在 phpMyAdmin 或 MySQL 命令行工具中运行此脚本。

# python - Django模型对象过滤关于日期范围以查找创建对象的初始日期？

> ID：10576797
> 
> 赞同：2
> 
> 时间：2012-05-14T02:05:23.430
> 
> 标签：python, django, datetime, django-models

我有一个简单的事件模型，它具有 start_date 和 end_date，关键部分是**日期范围必须是唯一的。**

出于这个原因，我编写了查询（Q）过滤器来检查日期范围是否唯一。无论如何，我的问题在于视图部分；当用户来到带有初始日期的事件添加页面时，我需要创建一个事件对象，（用户可以稍后根据日期范围的唯一性对其进行更改）

**如何决定（过滤）哪些天不包含在任何 Event 对象中？或者如果这个月有任何可用的日期？使用 django 过滤器或一些聪明的方法......**

```
#model:
class Event(models.Model):

    user = models.ForeignKey(User)
    start_date = models.DateTimeField()
    end_date = models.DateTimeField()
    status = models.IntegerField(default=0)

    def save(self, *args, **kwargs):
        try:
            Event.objects.get(
                Q(user=self.user, status=1),
                Q(start_date__range=(self.start_date, self.end_date))
                |Q(end_date__range=(self.start_date, self.end_date))
                |Q(start_date__lte=self.start_date, end_date__gte=self.end_date)
            )
            raise IntegrityError("Error message")
        except Event.DoesNotExist:
            super(Event,self).save(*args,**kwargs) 
```

在我看来：有一个函数用于创建具有**初始日期**的 Event 对象并重定向到 url，用于更新/编辑事件详细信息。

```
#view:
try:
    event = Event.objects.create(user=request.user,
                                 start_date=datetime.date.today(), 
                                 end_date=datetime.date.today())
except IntegrityError, e:
    return HttpResponse(e) 
```

ps：如果有更聪明的方法和一些不同的设计方法，我会很高兴听到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:36:01.073

不是你问题的核心，但请注意，你没有在`MultipleObjectsReturned`这里讨论这个案例：

```
 try:
        Event.objects.get(
            Q(user=self.user, status=1),
            Q(start_date__range=(self.start_date, self.end_date))
            |Q(end_date__range(self.start_date, self.end_date))
            |Q(start_date__lte=self.start_date, end_date__gte=self.end_date)
        )
        raise IntegrityError("Error message")
    except Event.DoesNotExist:
        super(Event,self).save(*args,**kwargs) 
```

我觉得会更好

```
 if Event.objects.filter(
        Q(user=self.user, status=1),
        Q(start_date__range=(self.start_date, self.end_date))
        | Q(end_date__range(self.start_date, self.end_date))
        | Q(start_date__lte=self.start_date, end_date__gte=self.end_date)
    ):
        raise IntegrityError("Error message")
    else:
        super(Event,self).save(*args,**kwargs) 
```

# ios - 使用带有非法字符的 URL 的 NSURLConnection

> ID：10576806
> 
> 赞同：0
> 
> 时间：2012-05-14T02:07:42.813
> 
> 标签：ios, url, nsurlconnection, nsurl, afnetworking

我必须调用第三方 Web 服务，它期望并且只接受其参数字符串中的非法字符（根据 RFC），如下所示。

```
http://example.com?param1={foo=bar} 
```

在这个例子中，大括号是非法字符，应该被编码，但是如果这些字符已经被编码，这个 web 服务将不接受参数。

NSURL 正确地不允许我`NSURL`使用该方法创建对象，`URLWithString`使用示例中的字符串返回 nil。

Web 服务由大型企业实体提供，因此更改它需要向他们提交错误报告，如果有的话，可能会或可能不会很快采取行动，特别是考虑到 API 照原样工作。

我的问题是这个问题有哪些可能的解决方案，我可以在不更改 Web 服务的情况下实施。

当前想法（缺点） 使用 CFStream 制作自定义 HTTP 请求（工作量非常大） 使用可以代表我的应用程序发送请求的基于 Web 的代理（额外的外部依赖项）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:17:49.407

你试图做的事情是不可能的。您需要对这些字符进行 URL 编码，然后服务器会自动对它们进行解码。

如果你能以某种方式破解 NSURL，那么整个过程中仍有许多部分会卡在格式错误的 URL 上。

# regex - 澄清正则表达式

> ID：10576807
> 
> 赞同：0
> 
> 时间：2012-05-14T02:08:25.683
> 
> 标签：regex

假设句子

> “现在时间是晚上 8 点 15 分。后面是一些其他的文字”

为什么以下正则表达式与该行不匹配？

```
egrep '\<[1-9]\s*:\s*[0-9]{2}\s*[Pp][Mm]\>' file 
```

我在 MAC 上，使用 GNU egrep

> $ egrep --version egrep (GNU grep) 2.5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:10:50.847

这是因为正则表达式中的前导和尾随符号：< 和 >。把它们拿出来，这是一场比赛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T02:27:40.463

完全无法重现。

Mac OS X 10.7：

```
(0)marks-mac-mini> cat file
The time is now 8:15pm. Followed by some other text
"The time is now 8:15pm. Followed by some other text"
(0)marks-mac-mini> egrep '\<[1-9]\s*:\s*[0-9]{2}\s*[Pp][Mm]\>' file
The time is now 8:15pm. Followed by some other text
"The time is now 8:15pm. Followed by some other text"
(0)marks-mac-mini> egrep --version
egrep (GNU grep) 2.5.1 
```

所以你在某个地方错了......

**编辑**啊，问题是空间。egrep 无法识别`\s`；这是一个Perlism。你的问题不包括那里的空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T02:23:19.290

在我的 OS X 机器上使用 GNU egrep，表达式工作得很好并且匹配你的行。它可能是您特定版本的 grep（它是非 GNU grep 吗？）

# java - Java：如何在不使用 paint() 的情况下从 Canvas 拍摄快照 (BufferedImage)？

> ID：10576820
> 
> 赞同：1
> 
> 时间：2012-05-14T02:09:55.873
> 
> 标签：java, canvas, bufferedimage

（Java）我有一个代表动画的画布。我想将画布的内容复制到 BufferedImage，以便可以将快照保存到文件中。我在网上找到的每个教程都说使用paint() 来复制内容；不幸的是，这会在我的画布中产生新的、不同的内容，就像我设置它的方式一样。例如，有一些随机绘制的线条，如果我调用paint()，它们会被重新计算。有没有办法在不调用paint() 的情况下将画布的内容保存到BufferedImage？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:54:10.340

> ..将画布的内容保存到 BufferedImage 而不调用paint()？

在`BufferedImage`将图像绘制到`Canvas`. 当需要保存时，只需使用缓存的图像。

并考虑在第三个千年加入我们并使用 Swing 组件。使用`JPanel`&`paintComponent(Graphics)`代替`Canvas`& `paint(Graphics)`。

# javascript - Ember JS：以编程方式呈现项目列表

> ID：10576824
> 
> 赞同：0
> 
> 时间：2012-05-14T02:10:30.053
> 
> 标签：javascript, ember.js

我们如何在 Ember JS 中以编程方式生成以下示例中的人员列表？

```
{{#each App.peopleController}}
  {{#view App.PersonView contentBinding="this"}}
    {{content.firstName}} {{content.lastName}}
  {{/view}}
{{/each}} 
```

我试过使用

```
App.peopleController.forEach(function(person) {
  App.PersonView.create({contentBinding: person}).render();
}) 
```

但我得到错误'data.buffer'未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:49:44.747

尝试 v.appendTo("#container") 代替。

# django - 将参数传递给 FileField 存储的保存方法

> ID：10576826
> 
> 赞同：3
> 
> 时间：2012-05-14T02:10:55.493
> 
> 标签：django, django-models, django-forms, django-storage

所以这是我的情况。我有一个要保存的模型，它包含以下文件：

```
file = models.FileField(storage=s3store, upload_to=custom_upload_to) 
```

S3Store 是我实现的自定义存储解决方案。在该自定义存储解决方案中，我有一个包含所有不同 Amazon S3 存储桶的字典 [包含所有 S3BotoStorage 连接的字典]。根据谁在上传文件，我需要将它发送到适当的 S3BotoStorage，即设置为适当的存储桶。我想知道是否可以从我的模型保存方法中将参数传递给我的 s3store.save() 方法？

我想过简单地将bucket_name附加到文件名，但是附加然后删除会花费太多的计算时间，不是吗？（和记忆）。

希望这是有道理的！

# php - 安全字符串比较功能

> ID：10576827
> 
> 赞同：24
> 
> 时间：2012-05-14T02:11:06.510
> 
> 标签：php, string, security, zend-framework, compare

我刚刚在 Zend 框架的 HTTP Auth 库中遇到了这段代码。它似乎使用了一个特殊的字符串比较函数来使其更安全。但是，我不太明白评论。谁能解释为什么这个功能比做更安全`$a == $b`？

```
/**
 * Securely compare two strings for equality while avoided C level memcmp()
 * optimisations capable of leaking timing information useful to an attacker
 * attempting to iteratively guess the unknown string (e.g. password) being
 * compared against.
 *
 * @param string $a
 * @param string $b
 * @return bool
 */
protected function _secureStringCompare($a, $b)
{
    if (strlen($a) !== strlen($b)) {
        return false;
    }
    $result = 0;
    for ($i = 0; $i < strlen($a); $i++) {
        $result |= ord($a[$i]) ^ ord($b[$i]);
    }
    return $result == 0;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-14T02:13:12.403

看起来他们正试图阻止[定时攻击](http://en.wikipedia.org/wiki/Timing_attack)。

> 在密码学中，定时攻击是一种旁道攻击，其中攻击者试图通过分析执行密码算法所花费的时间来破坏密码系统。计算机中的每个逻辑操作都需要时间来执行，并且时间可能因输入而异；通过精确测量每个操作的时间，攻击者可以回溯到输入。

基本上，如果比较正确密码和错误密码所需的时间不同，那么您可以使用时间来计算您猜对了密码的多少个字符。

考虑一个非常有缺陷的字符串比较（这基本上是正常的字符串相等函数，有一个明显的`wait`添加）：

```
function compare(a, b) {
    if(len(a) !== len(b)) { 
        return false;
    }
    for(i = 0; i < len(a); ++i) {
        if(a[i] !== b[i]) {
            return false;
        }
        wait(10); // wait 10 ms
    }
    return true;
} 
```

假设您提供了一个密码，并且（始终）一个密码需要一些时间，另一个密码大约需要 10 毫秒。这告诉你什么？这意味着第二个密码比第一个密码多一个正确的字符。

这使您可以进行电影黑客 - 您一次猜测一个字符的密码（这比猜测每个可能的密码要容易得多）。

在现实世界中，还涉及其他因素，因此您必须多次尝试密码以处理现实世界的随机性，但是您仍然可以尝试每个字符的密码，直到一个明显花费更长的时间，然后再从两个开始字符密码等。

这个函数在这里还有一个小问题：

```
if(strlen($a) !== strlen($b)) { 
    return false;
} 
```

它使您可以使用定时攻击来确定密码的正确长度，这样您就不必费心猜测任何较短或较长的密码。通常，[您首先要对密码进行哈希处理](http://en.wikipedia.org/wiki/Bcrypt)（这将创建等长的字符串），所以我猜他们认为这不是问题。

# opera - Spotify 播放按钮与 Opera 不兼容？

> ID：10576833
> 
> 赞同：0
> 
> 时间：2012-05-14T02:12:04.313
> 
> 标签：opera, spotify

当我访问 Opera 11.62 中的 Spotify 播放按钮演示页面 ( [https://developer.spotify.com/technologies/spotify-play-button/](https://developer.spotify.com/technologies/spotify-play-button/) ) 时，单击播放按钮会给我（大部分预期的）弹出窗口：

```
The application "Spotify" must be launched to open the link: 
spotify:

Do you want to proceed? 
```

如果我单击“是”，Spotify 应用程序就会启动（如果尚未运行）并获得焦点，但不会播放任何内容。我怀疑该链接以某种方式被 Opera 破坏（请注意它具有`spotify:`协议名称，但之后没有任何内容）。我自己网站上的播放按钮会产生相同的行为。在同一台机器上的 Firefox 中运行良好。

有没有其他人经历过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:57:47.610

是的，可悲的是，情况就是这样。Opera 的错误跟踪器中存在类似的问题。

我认为您的特定问题可能与 Opera 缺乏对跨域资源共享 (CORS) 的支持有关。[Opera Next](http://www.opera.com/browser/next/)中提供了 CORS 支持，但 Opera 11.62 中不提供。如果它在 Next 中不起作用，我鼓励您[提交错误报告](https://bugs.opera.com/wizard/)。

# javascript - 如何从 websocket 连接中挑选出特定的服务器消息？

> ID：10576834
> 
> 赞同：0
> 
> 时间：2012-05-14T02:12:12.047
> 
> 标签：javascript, jquery, websocket

我为基本的网络聊天服务器设置了 WebSocket 连接。

现在，无论何时收到一条消息，它都会被发送到一个函数，该函数将它输出到屏幕上。

```
socket.onmessage = function(msg){output(msg);} 
```

但是，用户可以通过连接向服务器发送某些技术命令，这些命令会引发技术响应，而不是在屏幕上输出。

如何获取紧随这些技术消息之一的服务器响应？

我是否在发送技术消息的代码块之后放置一个单独的 socket.onmessage？我想这将需要所有未来的消息。我只想要*下一个*。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:22:53.497

WebSockets 是异步的，因此尝试接收“下一条”消息不是正确的解决方案。可以同时在两个方向上发送多条消息。此外，Javascript 中的大多数操作都是由异步事件（超时触发或用户单击某物）触发的，这意味着您无法同步控制何时发送。此外，onmessage 处理程序是一个持久设置：一旦设置它，它就会接收所有消息，直到它被取消设置。您需要有某种方法来区分消息本身中的控制消息和数据消息。如果您需要将响应与发送的消息相关联，那么您还需要某种消息序列号（或其他形式的唯一消息 ID）。

例如，这会向服务器发送一条控制消息，并有一个消息处理程序可以区分控制和消息以及其他消息：

```
var nextSeqNum = 0;
...
msg = {id: nextSeqNum, mtype: "control", data: "some data"};
waitForMsg = nextSeqNum;
nextSeqNum += 1;
ws.send(JSON.stringify(msg));
...
ws.onmessage = function (e) {
    msg = JSON.parse(e.data);
    if (msg.mtype === "control") {
        if (msg.id === waitForMsg) {
            // We got a response to our message
        } else {
            // We got an async control message from the server
        }
    } else {
        output(msg.data);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:35:00.987

您可以将数据打包，我的意思是，通过特殊字符/s，形成如下字符串：

```
"DataNotToBeShown"+"$$"+"DataToBeShown"; //if $$ is separating character 
```

然后，您可以像这样在 javascript 中拆分字符串：

```
var recv=msg.data.split('$$'); 
```

因此，未显示的`recv[0]`数据在 中，要显示的数据在 中`recv[1]`。然后随心所欲地使用。

# php - 从邮件问题设置的phpgmailer

> ID：10576844
> 
> 赞同：0
> 
> 时间：2012-05-14T02:13:12.997
> 
> 标签：php

我正在尝试使用示例中所示的 php 邮件类。

[http://www.vulgarisoip.com/category/phpgmailer/](http://www.vulgarisoip.com/category/phpgmailer/)

我正在使用我网站的联系我们表格。我可以将“$mail->From”地址设置为填写表格的人吗？当我收到邮件时，它总是显示“发件人地址”作为我的 gmail 帐户。任何帮助都会非常有帮助。

```
<?php
require_once('phpgmailer/class.phpgmailer.php');
$mail = new PHPGMailer();
$mail->Username = 'username@gmail.com'; 
$mail->Password = 'gmailpassword';
$mail->From = 'from@hotmail.com'; // Like to set this address as the address of the person who filled the form
$mail->FromName = 'User Name';
$mail->Subject = 'Subject';
$mail->AddAddress('myname@mydomain.com'); // To which address the mail to be delivered
$mail->Body = 'Hey buddy, heres an email!';
$mail->Send();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:30:09.447

```
$mail->From = $_POST['from']; 
```

或者该字段的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:42:13.637

Gmail 使用经过身份验证的帐户作为发件人来减少地址欺骗和垃圾邮件。无论您将发件人地址设置为什么，Gmail 都会自动将其设置为您的 gmail 用户。

## 更新

你的评论：

> “我的意图其实是当我收到一封以实际发件人为‘发件人地址’的邮件时，我可以直接回复他。”

您可能想尝试：

```
$mail->AddReplyTo($email, $display_name); 
```

# windows - SetDefaultItem 的作用是什么？

> ID：10576848
> 
> 赞同：1
> 
> 时间：2012-05-14T02:14:33.777
> 
> 标签：windows, winapi, mfc

我只是想知道它的功能是`DefaultItem`什么，一般和它有什么区别`MenuItem`，除了粗体...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:30:25.790

查看[MSDN 菜单文档](http://msdn.microsoft.com/en-us/library/ms647553.aspx)会得到这个答案。

> 子菜单可以包含一个默认菜单项。当用户通过双击打开子菜单时，系统会向菜单的所有者窗口发送一条命令消息并关闭菜单，就像选择了默认命令项一样。如果没有默认命令项，则子菜单保持打开状态。要检索和设置子菜单的默认项，请使用 GetMenuDefaultItem 和 SetMenuDefaultItem 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:41:55.423

它主要是一种视觉可供性。Raymond Chen`SetDefaultItem`在他*的 The Old New Thing*网站上解释说：[菜单上的粗体字是什么意思？](http://blogs.msdn.com/b/oldnewthing/archive/2004/09/29/235737.aspx)

# java - java应用程序更新器

> ID：10576851
> 
> 赞同：2
> 
> 时间：2012-05-14T02:15:16.380
> 
> 标签：java, swing, installation, auto-update, intranet

我有一个 java 应用程序，它在我的办公网络中使用了许多计算机。这是一个 java swing 应用程序，当有更新时，大多数时候我必须更新每台计算机。目前有一种自动更新这些应用程序的机制，但它似乎无法正常工作，即我在数据库中有一个简单的表，其中包含已发布的版本号，并且当应用程序启动时，它会根据数据库检查其版本。如果不相符，它会从我们安装在网络中的 FTP 服务器下载整个应用程序。

最近想创建一个服务器来做这个任务。但是，我不知道这是否是一个好习惯。

我的想法是，有一个服务器可以获取 FTP 服务器中每个文件的 md5 哈希，并将该哈希列表和文件列表发送到其客户端。当客户端（我的 Swing 应用程序）获得此列表时，它将这些哈希与其文件进行比较，如果存在不匹配，客户端可以从 FTP 服务器下载该文件。

请告诉我这是更新java应用程序的好方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T02:18:43.410

您应该使用[Java Webstart](http://docs.oracle.com/javase/tutorial/deployment/webstart/)。

它专为这种情况而设计：从 Internet 和/或 Intranet 自动下载和更新应用程序。

它甚至可以做一些聪明的事情，比如应用程序版本控制，并确保只有在需要时才通过智能缓存下载新文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:23:24.187

另外一个选项：

因为这是在内部网络中。如果您不想使用 webstart（最佳选择）。

创建一个使用 URLClass 加载器的小型前端应用程序，并始终动态加载它。因为这是一个内部网络，除非应用程序很大。启动时间应该少于几秒钟。

# wpf - 为什么 Viewbox 会破坏 Grid 中等距行/列的布局？

> ID：10576854
> 
> 赞同：2
> 
> 时间：2012-05-14T02:16:14.913
> 
> 标签：wpf, grid, viewbox

简单地说，我有一个 Grid，它有三个同样高的行和两个按钮。我想在第一行有第一个按钮，然后第二行是空的，最后是第三行中的第二个按钮。这样我就得到了相对大小的按钮之间的间距。我需要这个而不是硬编码绝对边距值。所以这里是 XAML：

```
 <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Button Grid.Row="0">Button 1</Button>
                    <Button Grid.Row="2">Button 2</Button>
                </Grid> 
```

效果很好！现在我需要的附加功能是让所有东西都可扩展，所以我把它放在 Viewbox 中：

```
 <Viewbox>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Button Grid.Row="0">Button 1</Button>
                    <Button Grid.Row="2">Button 2</Button>
                </Grid>
            </Viewbox> 
```

突然布局被打破。我得到了 Viewbox 提供的缩放比例，但按钮之间没有空白。所以两个问题：

1.  为什么 Viewbox 会破坏这里的东西？
2.  我该如何解决这个问题？我需要灵活性，所以想象一下我可以有任意数量的按钮，这些按钮可以由网格中任意数量的空行/列分隔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:30:35.073

尝试这个...

```
 <Viewbox>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition 
                        MinHeight="{Binding Path=ActualHeight,
                                   ElementName=MyButton1}"
                        Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Button Grid.Row="0" x:Name="MyButton1">Button 1</Button>
            <Button Grid.Row="2">Button 2</Button>
        </Grid>
    </Viewbox> 
```

严格假设按钮的高度相同。

以及为什么会发生这种情况，请检查... [http://connect.microsoft.com/VisualStudio/feedback/details/403562/wpf-grid-layout-is-broken-when-put-in-viewbox](http://connect.microsoft.com/VisualStudio/feedback/details/403562/wpf-grid-layout-is-broken-when-put-in-viewbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-31T01:02:20.447

Viewbox 不适用于百分比。在我看来，我不推荐使用 Viewbox 来“分组”所有元素。您应该仅将 Viewbox 用于按钮文本：

```
<Window.Resources>
    <Style x:Key="DefaultButton" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="LightGray">
                        <Viewbox>
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Viewbox>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Grid>
    <Border>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="0.3*" />
                <RowDefinition Height="0.3*" />
                <RowDefinition Height="0.3*" />
            </Grid.RowDefinitions>
            <Button Grid.Row="0" Style="{DynamicResource DefaultButton}">Button 1</Button>
            <Button Grid.Row="2" Style="{DynamicResource DefaultButton}">Button 2</Button>
        </Grid>
    </Border>
</Grid> 
```

# perl - 如何委托给带有 Moose 句柄的对象的子对象？

> ID：10576855
> 
> 赞同：1
> 
> 时间：2012-05-14T02:16:19.487
> 
> 标签：perl, delegates, moose

[Moose](https://metacpan.org/module/Moose) [文档](https://metacpan.org/module/Moose%3a%3aManual%3a%3aDelegation)说我可以很容易地委托给对象`thing`。

```
has 'thing' => (
   ...
   handles => { set_foo => [ set => 'foo' ] },
);

# $self->set_foo(...) calls $self->thing->set('foo', ...) 
```

但我真的想委托给一个对象，特别是一个日期时间对象

```
has 'thing' => (
   ...
   handles => {
       get_month => { datetime ... },
   },
);

# $self->get_month calls $self->thing->datetime->month; 
```

我将如何构建句柄才能让它做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T02:59:05.900

```
has thing => (
   ...
   handles => {
      get_month => sub { $_[0]->thing->datetime->month },
   },
); 
```

除了添加`datetime_month`to`thing`之外，您还必须编写自己的委托人。

# c# - 从另一个类 C# 访问窗体的控件

> ID：10576856
> 
> 赞同：5
> 
> 时间：2012-05-14T02:16:25.040
> 
> 标签：c#

我是 C# 和 Visual Studio 的新手，但一般不会编程。我搜索了我的问题的答案 3 天，我发现了很多，但由于一些奇怪的原因（我确定我错过了一些非常明显的东西）我无法让它工作。我认为这是像我这样的新手问的最基本的问题。我有一个带有文本框和按钮的表单（Form3）（我设置它只是为了测试目的）。我想从另一个类中填充和阅读这个文本框。我知道最合适的方法是使用 GET 和 SET 访问器在 Form3.cs 中创建一个属性。我这样做了，但我无法让它工作。我没有收到任何错误消息，但我也无法设置文本框的值。它只是保持空白。这是我的示例代码：

```
namespace WindowsFormsApplication1
{
    public partial class Form3 : Form
    {
        public string setCodes
        {
            get { return test1.Text; }
            set { test1.Text = value; }
        }

        public Form3()
        {
            InitializeComponent();
        }

        private void Form3_Load(object sender, EventArgs e)
        {   }

        private void button1_Click(object sender, EventArgs e)
        {
            a.b();
        }
    }

    public class a
    {       
        public static void b()
        {
            Form3 v = new Form3();
            v.setCodes = "abc123";
        }
    }
} 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T02:21:48.900

问题是您将值设置为表单的新实例。尝试这样的事情：

```
public partial class Form3 : Form {
    public string setCodes
    {
        get { return test1.Text; }
        set { test1.Text = value; }
    }

    private A a;

    public Form3()
    {
        InitializeComponent();
        a = new A(this);
    } 

    private void button1_Click(object sender, EventArgs e)
    {            
        a.b();            
    }

    private void Form3_Load(object sender, EventArgs e)
    {

    }
}

public class A
{       
    private Form3 v;

    public a(Form3 v)
    {
        this.v = v;
    }

    public void b()
    {
        v.setCodes = "abc123";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T02:19:07.360

您正在创建一个品牌`new Form3()`实例。
这不会影响现有表格。

您需要将表单作为参数传递给方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T02:46:19.673

尝试这个：

```
public partial class Form3 : Form
{
    /* Code from question unchanged until `button1_Click` */

    private void button1_Click(object sender, EventArgs e)
    {
        a.b(this);
    }
}

public class a
{       
    public static void b(Form3 form3)
    {
        form3.setCodes = "abc123";
    }
} 
```

这会将表单的当前实例传递给另一个类，以便它可以更新`setCodes`属性。以前您是在创建一个新的表单实例，而不是更新当前的表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-23T06:09:38.540

将表单实例发送到其他其他类

```
Form1 objForm1=new Form1();
obj.Validate(objForm1); 
```

通过在 Form(Designer.cs) 中修改 Controls 来访问另一个类中的控件的简单`Private`方法`Public`

# sql-server - 具有 2 个详细信息的 SSRS 报告，不包括详细信息 1 中存在的行

> ID：10576859
> 
> 赞同：0
> 
> 时间：2012-05-14T02:16:44.200
> 
> 标签：sql-server, reporting-services, ssrs-2008

我正在使用 sql server 编写 SSRS 报告，并且遇到以下问题，我的报告中需要 2 个详细信息 详细信息 1 - 由从不同表中获取数据集的存储过程生成。

详细信息 2 - 我有一个不同的存储过程来获取此详细信息的数据，但我只需要显示详细信息 1 中没有的那些行。我尝试使用引用不同数据集的过滤器，但这不起作用...有人可以知道我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:23:22.363

@Eliana：在这里我对细节 1 和细节 2 有点困惑：

如果您有任何可以在 SQL 中完成的操作，请尝试仅在 SQL 存储过程中解析，因为查询处理速度很快。之后，您可以使用 SSRS 报告仅显示基于某些参数的记录。这是我提高报告性能的个人经验。

请分享一些您想要显示的示例输入/输出。

# php - 使用php强制下载pdf

> ID：10576861
> 
> 赞同：10
> 
> 时间：2012-05-14T02:17:44.457
> 
> 标签：php, html, download, http-headers

我试图让一个网站有一个强制下载 pdf 的按钮。

这是按钮的html：

```
 <a href=scripts/download.php>
    <input type="image" src="images/download.gif" alt="Submit button"/>
    </a> 
```

到目前为止的php脚本：

```
 <?php
    header('Content-Type: application/pdf');
    header('Content-disposition: attachment;filename=documents/ECM_IT_ResumeDownload.pdf');
    readfile('documents/ECM_IT_ResumeDownload.pdf');
    ?> 
```

这似乎可以很好地下载文件，但是当我打开它时出现此错误：

“Adobe Reader 无法打开 'documents_ECM_IT_ResumeDownload.pdf'，因为它不是受支持的文件类型或文件已损坏（例如，它作为电子邮件附件发送且未正确解码）。”

任何帮助将不胜感激。

**编辑** 在文本编辑器中打开 pdf 并收到以下消息：

“
**警告**：readfile(documents/ECM_IT_ResumeDownload.pdf) [function.readfile]: 无法打开流：第**4**行的**html/scripts/download.php**中没有这样的文件或目录 ”

 **该文件肯定在那里。在 html/documents/ECM_IT_ResumeDownload.pdf

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-28T11:01:32.243

```
$file_url = www.example.com/pdffolder/$pdfname;
header('Content-Type: application/pdf');
header("Content-Transfer-Encoding: Binary");
header("Content-disposition: attachment; filename=".$pdfname);
readfile($file_url); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T02:19:53.307

尝试删除文件的路径，并在内容中保留文件名：

```
header('Content-Type: application/pdf');
header('Content-disposition: attachment; filename=ECM_IT_ResumeDownload.pdf'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T02:35:26.957

您是否尝试过去掉最后的 PHP 结束标记（？>）？它将页面视为纯 PHP 页面，删除任何可能意外附加到输出末尾的新行。当我动态创建 excel 文件以供下载时，这对我有帮助，并且它们下载时已损坏。查看此页面了解更多信息：

[http://www.php.net/manual/en/language.basic-syntax.phptags.php](http://www.php.net/manual/en/language.basic-syntax.phptags.php)

从您编辑的问题来看，PHP 似乎无法找到该文件。尝试使用文件的绝对路径，如下所示：“c:\blah\de\blah\bloo.pdf”或“c:/blah/de/blah/bloo.pdf”。如果其中一个路径工作并正确下载，则您的相对路径在某种程度上是不正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T02:42:36.640

我一直使用 Gowon Patterson 的下载脚本，它也有防盗链：http: [//by.gowondesigns.com/getfile/](http://by.gowondesigns.com/getfile/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-09T20:23:42.467

顺便说一句，有点晚了，但要在这里正确识别问题：

您的下载脚本位于`scripts/download.php`，您要下载的文件位于`documents/[...].pdf`。

因此，您的`readfile()`函数应该遍历父目录（在 之外`scripts/`），例如`readfile('../documents/[...].pdf');`.**

# javascript - 实施 HighCharts

> ID：10576865
> 
> 赞同：0
> 
> 时间：2012-05-14T02:18:58.907
> 
> 标签：javascript, jquery, ajax, json, highcharts

[https://lh6.googleusercontent.com/-eTP5pEh4kFs/T7BoGRdwlmI/AAAAAAAAAHc/AQzgo6qkBkQ/w1257-h669-k/graph.JPG](https://lh6.googleusercontent.com/-eTP5pEh4kFs/T7BoGRdwlmI/AAAAAAAAAHc/AQzgo6qkBkQ/w1257-h669-k/graph.JPG)

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column',
            margin: [ 50, 50, 100, 80]
        },
        title: {
            text: 'World\'s largest cities per 2008'
        },
        xAxis: {
            categories: [
                'Tokyo',
                'Jakarta',
                'New York',
                'Seoul',
                'Manila',
                'Mumbai',
                'Sao Paulo',
                'Mexico City',
                'Dehli',
                'Osaka',
                'Cairo',
                'Kolkata',
                'Los Angeles',
                'Shanghai',
                'Moscow',
                'Beijing',
                'Buenos Aires',
                'Guangzhou',
                'Shenzhen',
                'Istanbul'
            ],
            labels: {
                rotation: -45,
                align: 'right',
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Population (millions)'
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.x +'</b><br/>'+
                    'Population in 2008: '+ Highcharts.numberFormat(this.y, 1) +
                    ' millions';
            }
        },
            series: [{
            name: 'Population',
            data: [34.4, 21.8, 20.1, 20, 19.6, 19.5, 19.1, 18.4, 18,
                17.3, 16.8, 15, 14.7, 14.5, 13.3, 12.8, 12.4, 11.8,
                11.7, 11.2],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                x: -3,
                y: 10,
                formatter: function() {
                    return this.y;
                },
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });
}); 
```

});

[Help] 如何使用 HighCharts 一个 js 插件来实现这个..？任何评论，建议将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:41:49.473

我猜你想要的是多个系列。因此，假设您想要“人口（总数）”、“人口（男性）”和“人口（女性）”，您只需将更多系列添加到数组中。

请忽略我的“男性 + 女性 = 总数”数字不加起来的事实。

生成的图表也很忙，但我会把它留给你。通常在创建具有多个系列的条形图时，您会希望条形的数量保持相当小。否则，最好使用折线图或面积图或适合您需要的任何一种（对不起，我不太懂日语）。

但这会指向你想要去的方向。

```
$(function () {
  var chart;
  $(document).ready(function() {
    chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'column',
        margin: [ 50, 50, 100, 80]
    },
    title: {
        text: 'World\'s largest cities per 2008'
    },
    xAxis: {
        categories: [
            'Tokyo',
            'Jakarta',
            'New York',
            'Seoul',
            'Manila',
            'Mumbai',
            'Sao Paulo',
            'Mexico City',
            'Dehli',
            'Osaka',
            'Cairo',
            'Kolkata',
            'Los Angeles',
            'Shanghai',
            'Moscow',
            'Beijing',
            'Buenos Aires',
            'Guangzhou',
            'Shenzhen',
            'Istanbul'
        ],
        labels: {
            rotation: -45,
            align: 'right',
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif'
            }
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Population (millions)'
        }
    },
    legend: {
        enabled: false
    },
    tooltip: {
        formatter: function() {
            return '<b>'+ this.x +'</b><br/>'+
                'Population in 2008: '+ Highcharts.numberFormat(this.y, 1) +
                ' millions';
        }
    },
        series: [{
        name: 'Population',
        data: [34.4, 21.8, 20.1, 20, 19.6, 19.5, 19.1, 18.4, 18,
            17.3, 16.8, 15, 14.7, 14.5, 13.3, 12.8, 12.4, 11.8,
            11.7, 11.2],
        dataLabels: {
            enabled: true,
            rotation: -90,
            color: '#FFFFFF',
            align: 'right',
            x: -3,
            y: 10,
            formatter: function() {
                return this.y;
            },
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif'
          }
        }
      },
      {
        name: 'Male',
        data: [34.4, 21.8, 20.1, 20, 19.6, 19.5, 19.1, 18.4, 18,
            17.3, 16.8, 15, 14.7, 14.5, 13.3, 12.8, 12.4, 11.8,
            11.7, 11.2],
        dataLabels: {
            enabled: true,
            rotation: -90,
            color: '#FFFFFF',
            align: 'right',
            x: -3,
            y: 10,
            formatter: function() {
                return this.y;
            },
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif'
          }
        }
      },
      {
        name: 'Female',
        data: [34.4, 21.8, 20.1, 20, 19.6, 19.5, 19.1, 18.4, 18,
            17.3, 16.8, 15, 14.7, 14.5, 13.3, 12.8, 12.4, 11.8,
            11.7, 11.2],
        dataLabels: {
            enabled: true,
            rotation: -90,
            color: '#FFFFFF',
            align: 'right',
            x: -3,
            y: 10,
            formatter: function() {
                return this.y;
            },
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif'
          }
        }
      }]
    });
  });
}); 
```

# haskell - 如何卸载 Cabal 软件包的某个版本？

> ID：10576868
> 
> 赞同：85
> 
> 时间：2012-05-14T02:19:41.387
> 
> 标签：haskell, ghc, cabal

Happstack Lite 打破了我，因为它正在获取 blaze-html 版本 0.5 并且它想要版本 0.4。Cabal 说安装了 0.4.3.4 和 0.5.0.0*两个版本。*我想删除 0.5.0.0 并只使用旧版本。但是 cabal 没有“卸载”命令，当我尝试时`ghc-pkg unregister --force blaze-html`，`ghc-pkg`说我的命令已被忽略。

我该怎么办？

**更新**：*不要相信*。尽管`ghc-pkg`声称忽略该命令，但该命令*并未*被忽略。并且使用唐斯图尔特接受的答案，您可以准确删除您希望消除的版本。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-05-14T17:06:49.987

您可以`ghc-pkg unregister`使用特定版本，如下所示：

```
$ ghc-pkg unregister --force regex-compat-0.95.1 
```

这应该足够了。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-06-18T12:22:04.080

如果您在沙盒之外：

```
ghc-pkg unregister --force regex-compat-0.95.1 
```

如果您在[cabal 沙箱](http://www.haskell.org/cabal/users-guide/installing-packages.html#developing-with-sandboxes)中：

```
cabal sandbox hc-pkg -- unregister attoparsec --force 
```

第一个`--`是 的参数分隔符`hc-pkg`。这`ghc-pkg`以沙盒感知方式运行。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-01-10T00:02:40.940

还有提供命令的[cabal-uninstall软件包。](http://hackage.haskell.org/package/cabal-uninstall)`cabal-uninstall`它取消注册包并删除文件夹。值得一提的是，它传递`--force`给`ghc-pkg unregister`它可以破坏其他包。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-05T20:34:02.340

这是我用来卸载软件包的 shell 脚本。它支持多个已安装的 GHC 版本，还可以擦除相关文件（但不提供保修，如果您安装了软管，请不要怪我！）

```
#!/bin/bash -eu
# Usage: ./uninstall.sh [--force | --no-unregister] pkgname-version

# if you set VER in the environment to e.g. "-7.0.1" you can use
# the ghc-pkg associated with a different GHC version
: ${VER:=}

if [ "$#" -lt 1 ]
then
        echo "Usage: $0 [--force | --no-unregister] pkgname-version"
        exit 1
fi

if [ "$1" == "--force" ]
then force=--force; shift; # passed to ghc-pkg unregister
else force=
fi

if [ "$1" == "--no-unregister" ]
then shift # skip unregistering and just delete files
else
        if [ "$(ghc-pkg$VER latest $1)" != "$1" ]
        then
                # full version not specified: list options and exit
                ghc-pkg$VER list $1; exit 1
        fi
        ghc-pkg$VER unregister $force $1
fi

# wipe library files
rm -rfv -- ~/.cabal/lib/$1/ghc-$(ghc$VER --numeric-version)/

# if the directory is left empty, i.e. not on any other GHC version
if rmdir -- ~/.cabal/lib/$1 
then rm -rfv -- ~/.cabal/share/{,doc/}$1 # then wipe the shared files as well
fi 
```

# xpath - selenium2.0 webelement无法获取html的属性

> ID：10576870
> 
> 赞同：0
> 
> 时间：2012-05-14T02:20:09.117
> 
> 标签：xpath, selenium, getattribute

我使用了 pagefactory 模式，在我的 bean 文件中，我使用 xpath 声明了 WebElement：

```
@FindBy(xpath ='//div[5]/div/div/dl/dd[4]')
def public WebElement nextPage //nextpage 
```

在我的工厂文件中（这个类扩展了 bean 类），我用

```
nextPage.getAttribute("class") 
```

但结果返回给我一个空值或空值。我不知道为什么...我只是想获取以下html的类，以判断这是可点击的链接还是普通文本。

这是html：

```
<a class="easyquery_paginglink" href='javascript:gotoPage("consumeRecord","consumeRecord",2)'>nextpage</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:02:46.167

您的 XPath 可能是 "//a[Text() = 'nextpage']" 然后使用 .getAttribute("class"); 所以：

```
IWebElement element = _driver.FindElement(By.XPath("//a[Text() = 'nextpage']"));
string className = element.GetAttribute("class"); 
```

# iphone - iCarousel 导入图片有困难

> ID：10576871
> 
> 赞同：3
> 
> 时间：2012-05-14T02:20:39.400
> 
> 标签：iphone, ios, xcode, icarousel

苹果初学者在这里。我目前正在学习并尝试 nickLockwood 的 iCarousel。我计划将图像放入 iCarousel。所以这是我的 .m 和 .h 代码：

// .m

```
@implementation ViewController

@synthesize images;
...

- (void)awakeFromNib
{    
    if (self) {

        //set up carousel data
        //wrap YES = infinite loop
        wrap = YES;

        self.images = [NSMutableArray arrayWithObjects:
                       @"apple.jpg",@"lemon.jpg",@"orange.jpg",@"melon.jpg",@"mango.jpg",nil];       
            }

}

- (UIView *)carousel:(iCarousel *)_carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{   
    if (view == nil)
{

        view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[images objectAtIndex:index]]];
}
    return view;

} 
```

// 。H

```
@interface ViewController : UIViewController <iCarouselDataSource, iCarouselDelegate>{

NSMutableArray *images;
...
}
@property (nonatomic,retain) NSMutableArray *images;
…
@end 
```

我计划添加 30 张图像，所以我希望代码是可维护的。我的问题是我希望能够通过 NSBundle 或从应用程序目录获取图像，我尝试了不同的代码，但图像没有出现在轮播中。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:22:19.310

嘿，这是我在 iCarousel 应用程序中使用的一些代码。您缺少一些方法。所以他们在这里。

```
#pragma mark iCarousel methods

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    return [items count];
}

- (NSUInteger)numberOfVisibleItemsInCarousel:(iCarousel *)carousel
{
    //limit the number of items views loaded concurrently (for performance reasons)
    //this also affects the appearance of circular-type carousels
    return 7;
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[items objectAtIndex:index]]];
    return view;

}

- (NSUInteger)numberOfPlaceholdersInCarousel:(iCarousel *)carousel
{
    //note: placeholder views are only displayed on some carousels if wrapping is disabled
    return  0;
}

- (UIView *)carousel:(iCarousel *)carousel placeholderViewAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[items objectAtIndex:index]]];
    return view;

}

- (CGFloat)carouselItemWidth:(iCarousel *)carousel
{
    //usually this should be slightly wider than the item views
    return ITEM_SPACING;
}

- (CGFloat)carousel:(iCarousel *)carousel itemAlphaForOffset:(CGFloat)offset
{
    //set opacity based on distance from camera
    return 1.0f - fminf(fmaxf(offset, 0.0f), 1.0f);
}

- (CATransform3D)carousel:(iCarousel *)_carousel itemTransformForOffset:(CGFloat)offset baseTransform:(CATransform3D)transform
{
    //implement 'flip3D' style carousel
    transform = CATransform3DRotate(transform, M_PI / 8.0f, 0.0f, 1.0f, 0.0f);
    return CATransform3DTranslate(transform, 0.0f, 0.0f, offset * carousel.itemWidth);
}

- (BOOL)carouselShouldWrap:(iCarousel *)carousel
{
    return wrap;
}
- (void)carouselDidEndScrollingAnimation:(iCarousel *)aCarousel
{    
    [labelDescription setText:[NSString stringWithFormat:@"%@", [descriptions objectAtIndex:aCarousel.currentItemIndex]]];
} 
```

希望这可以帮助。

# android - 如何重置列表视图？

> ID：10576874
> 
> 赞同：1
> 
> 时间：2012-05-14T02:21:48.327
> 
> 标签：android, listview

我在此活动中有一个列表视图

首先，我将用这个显示列表视图

```
adapter = new CustomAdapter_LatestNews(this, title, category, date,
            imagepath);     

lv.addFooterView(constant.AdMob());
lv.setAdapter(adapter); 
```

我正在使用扩展基本适配器的自定义适配器。

```
public View getView(int position, View convertView, ViewGroup parent) 
```

在此活动中，我有一个刷新按钮，用于更新数据并回调相同的活动。

```
startActivity(new Intent(Main_AllLatestNews.this, Main_AllLatestNews.class));
finish(); 
```

看起来 getview 正在重用数据？

在按下刷新按钮之前

> 结果>图像0 0 0 0 1 0 1 0 0 0 正确显示（无论我如何滚动）

按下刷新按钮后

> 结果 > 图像 1 1 1 1 1 1 1 1 1 1 显示不正确（滚动会导致这种情况）

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-22T05:30:11.713

你可以试试它对我有用：

**列表视图和适配器的初始化：**

```
listView = (ListView) findViewById(R.id.list_view);
adapter = new MessageAdapter(this);
listView.setAdapter(adapter); 
```

**重置列表和适配器数组：**

```
listView.removeAllViewsInLayout();
listMessages.clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:02:44.997

刷新列表视图的正确方法不是重新启动活动。

相反 - 在刷新逻辑列表/或适配器使用的数据后，您需要做的就是调用：

```
adapter.notifyDataSetChanged(); 
```

# javascript - Jquery从动态元素中获取id或类

> ID：10576876
> 
> 赞同：-1
> 
> 时间：2012-05-14T02:22:07.380
> 
> 标签：javascript, jquery, dynamic, element

假设我有来自*PHP 查询*的 5 个元素（所以它是动态的）如下图所示：

```
element 1 class=element id=id_1
element 2 class=element id=id_2
element 3 class=element id=id_3
element 4 class=element id=id_4
element 5 class=element id=id_5 
```

我们通过知道他们的*class*或*id来使用**jquery 事件*，但在这种情况下，我们并不确切知道他们的*id*。

 ***```
$("#id_3").click(function()
{ 
    //in this case we have known we want to add event when we click id_3
}); 
```

如何处理来自*PHP 查询*的动态元素？
例如，我们怎么知道我们点击了`element 3`with `id_3`？
我们必须填写`$(????).click();`什么？
当我使用类时，我怎么知道我从点击的类中引用了哪个*id*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T05:50:25.340

这是我让它工作的唯一方法。例如，如果您想获取属性 ID 或已单击元素的值...

```
$("containerElem").on("click", "someElemID", function(evt) {
    var getElemID = $(evt.target).attr("id");
    var getVal = $(evt.target).val();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:28:56.743

在您的示例中，元素都具有相同的类，因此您可以基于此设置事件处理程序：

```
$(".element").click(function() {
   // "this" refers to the clicked element
   // this.id will be the id of the clicked element
}); 
```

或者，如果这些元素是动态的，在初始页面加载后的某个时间点通过 Ajax 加载，则使用委托事件处理程序：

```
$("somecontainerelement").on("click", ".element", function() {
    // do something with this.id
}); 
```

理想情况下，“somecontainerelement”是添加动态元素的元素，但也可以是`document`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T02:24:14.280

如果它们都具有相同的类，那么您可以使用类选择器。然后用它`this`来找到你想要的任何属性。

```
$('.element').click(
     $(this).prop('id');
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T02:26:03.647

如果您只想添加单击，那么为什么不将其添加到服务器端生成的 html 中呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T02:26:18.693

您可以使用[`attribute starsWith`](http://api.jquery.com/attribute-starts-with-selector/)选择器 &[`on`](http://api.jquery.com/on/)在动态创建的元素上绑定事件。

```
$('body').on('click', '[id^=id]', function(e){

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-25T14:08:22.467

当我们处理带有 id 或 class 的未知元素时，这非常有用

```
$( document ).ready(function() {
  // user this if element is div 
  $('div[id^="id_"]').on('click', function() {  
    alert($(this).attr('id'));
  });
  // user this if element is input
  $('input[id^="id_"]').on('click', function() {  
    alert(this.id);
  });

}); 
```***

# vb.net - 文本字段解析器分隔符

> ID：10576895
> 
> 赞同：0
> 
> 时间：2012-05-14T02:26:26.480
> 
> 标签：vb.net, file-io, text-files, delimiter

我目前正忙于在 VB.NET 中编写一个刽子手游戏。作为一个单词表，我有一个包含 1520 个单词的文本文件，每个单词由一个新行分隔...

我能想到的最好的随机词是使用 Randomize() 函数。然后从随机生成的 # 行中获取单词。

刚才才发现，这个方法：

```
Using parser As New Microsoft.VisualBasic.FileIO.TextFieldParser_
("filepath")
        parser.TextFieldType = FileIO.FieldType.Delimited 
```

不允许我使用新行作为分隔符...

考虑到所有单词都有不同的长度/宽度，我也不能使用这个：

```
parser.TextFieldType = FileIO.FieldType.FixedWidth 
```

有没有更好的方法让我从该随机行中提取单词？

如果不是，我应该使用什么分隔符？如何在不使用 Office 的情况下快速将分隔线更改为新的分隔符？

另外，如何使用 textfieldparser 从资源中获取文件？当我尝试使用 *my.resources.filename* 而不是*"filepath"*时，由于“路径中的字符无效”，它给了我一个 ArgumentException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:35:23.393

更简单的方法是将文本文件加载到字符串集合中，然后获取集合的随机索引

```
Dim list As New List(Of String)
Dim Reader As New StreamReader("C:\WordList.txt")
Dim line As String

Do
    line = Reader.ReadLine()
    list.Add(line)
Loop Until line Is Nothing

Reader.Close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:53:19.937

[使用File.ReadAllLines](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)将所有单词读入字符串数组。一行代码：

```
Dim words() As String = File.ReadAllLines(path) 
```

要选择一个随机词，请使用[Rnd](http://msdn.microsoft.com/en-us/library/f7s023d2%28v=VS.90%29.aspx)

```
Randomize()
Dim randomWord As String = words(CInt(Math.Floor(Rnd * words.Length))) 
```

# http-headers - 如果缺少必需的标头，返回的最合适的 HTTP 状态代码是什么？

> ID：10576898
> 
> 赞同：49
> 
> 时间：2012-05-14T02:26:48.047
> 
> 标签：http-headers, http-status-codes, http-status-code-403, http-status-code-400

我阅读[了如果请求缺少必需的参数，我应该使用什么 HTTP 状态响应代码？](https://stackoverflow.com/questions/3050518/what-http-status-response-code-should-i-use-if-the-request-is-missing-a-required)但它没有具体询问标题，似乎也没有达成共识。

此问题的上下文假定身份验证成功。我目前偏爱 400（尽管这感觉不对，因为这不是“格式错误的语法”）或 403。鉴于 403 的描述：

> 服务器理解请求，但拒绝执行。授权将无济于事，并且不应重复请求。**如果请求方法不是 HEAD 并且服务器希望公开请求未完成的原因，它应该在实体中描述拒绝的原因。**

这对我来说最有意义。

有人可以启发我吗？谢谢。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-14T02:31:59.590

400 错误请求

这是请求中的用户错误。与 403 不同，*应该*允许客户端重复他们的请求，但只有在修改之后：

> ***10.4.1 400 Bad Request***由于语法错误，服务器无法理解请求。客户端不应该在没有修改的情况下重复请求。

***编辑***

正如 Mark Reed 在评论中指出的那样，403 表示：“您发送给我的内容没有任何问题。您有适当的授权并且语法是有效的。我只是不想做您要求的事情。”

粗体部分简单地说，如果服务器这样选择，它可以准确地告诉客户端它不想满足请求的原因。

# asp.net-mvc-3 - Moq、TDD 和多层

> ID：10576902
> 
> 赞同：1
> 
> 时间：2012-05-14T02:27:57.703
> 
> 标签：asp.net-mvc-3, tdd, ninject, moq

我有一个定义我的存储库的数据程序集。

然后我有一个定义我的服务的服务程序集，每个服务都有一个由 Ninject 注入到构造函数中的存储库。

当我对我的服务方法进行单元测试时，一切都很好：

```
[TestClass]
public class UserTests
{
    IQueryable<User> users;
    int userID;

    public UserTests()
    {
        users = new List<User>()
        {
            new User { EmailAddress = "known@user.com", Password = "password", ID = 1}
        }.AsQueryable();
    }

    [TestMethod]
    public void Known_User_Can_Login()
    {
        // Arrange
        var repository = new Mock<IUserRepository>();
        var service = new UserService(repository.Object);

        repository.Setup(r => r.GetAll())
           .Returns(users);

        // Act
        bool loggedIn = service.UserLogin("known@user.com", "password", out userID);

        // Assert
        Assert.IsTrue(loggedIn);
        Assert.AreEqual(1, userID);
    }

    [TestMethod]
    public void Unknown_User_Cannot_Login()
    {
        // Arrange
        var repository = new Mock<IUserRepository>();
        var service = new UserService(repository.Object);

        repository.Setup(r => r.GetAll())
            .Returns(users);

        // Act
        bool loggedIn = service.UserLogin("unknown@user.com", "password", out userID);

        //
        Assert.IsFalse(loggedIn);
    }
} 
```

但是，我在测试我的控制器时遇到了问题（另一个级别）。

我的控制器依赖于服务，而服务依赖于存储库。我似乎无法让我的控制器测试正常工作。这是我到目前为止所拥有的：

```
 [TestClass]
public class AccountTests
{
    IQueryable<User> users;

    public AccountTests()
    {
        users = new List<User>()
        {
            new User { CompanyId = 1, EmailAddress =  "known@user.com", Password = "password"},
            new User { CompanyId = 1, EmailAddress = "unknown@user.com", Password = "password"}
        }.AsQueryable();
    }

    [TestMethod]
    public void Known_User_Can_Login()
    {
        int userID = 0;

        var repo = new Mock<IUserRepository>();

        // Arrange
        var service = new Mock<UserService>(repo.Object);
        var controller = new AccountController(service.Object);

        // Act
        var result = controller.Login(new LoginModel { EmailAddress = "known@user.com", Password = "password" }) as RedirectToRouteResult;

        // Assert
        service.Verify(x => x.UserLogin("known@user.com", "password", out userID), Times.Once());
        Assert.AreEqual("Index", result.RouteValues["Action"]);
    }
} 
```

我不断收到有关实例化 UserService 的错误（我正在尝试将 UserRepository 的实例传递给它，但它不起作用）。

我一定是在做一些愚蠢的事情，但是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:50:41.960

确保 UserService 是一个接口。

此外，您*不得*在第二次测试中创建 IUserRepository 的实例，就像您在此处所做的那样：

```
var repo = new Mock<IUserRepository>();
// Arrange
var service = new Mock<UserService>(repo.Object); 
```

由于 UserService 是模拟的，它无论如何都不会调用 IUserRepository 并且您不必在创建模拟时提供它的依赖项。

您需要做的只是以这种方式为 UserService 创建模拟：

```
var service = new Mock<UserService>(); 
```

即使是严格的 UserService 通常也依赖于存储库，Moq 只会提供对方法的预设响应，因此不需要调用实际的存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:57:03.833

`UserService`我猜的类不是接口或抽象类，如果不是，那么它一定会失败，因为 Mock 无法创建`UserService`. 因此，要么为 UserService 创建一个接口，要么将其定义为抽象类，或者将其实例化，如下所示：

var service = new UserService(repo.Object);

或者您可以使用`Mock.Create<UserService>()`，但您需要使用`Mock.Provide<T>()`api 提供 UserService 所需的所有实现。

希望这可以帮助。

如果这不是问题，请使用 UserService 和您的存储库的类更新问题

# vim - 使用 snipmate 时插入空格； 作品

> ID：10576904
> 
> 赞同：1
> 
> 时间：2012-05-14T02:29:07.123
> 
> 标签：vim, vim-plugin, snipmate

我在 OSX Lion 上使用 vim 7.3。我从 github 上的 garbas/vim-snipmate 安装了 snipmate，但它似乎`<tab>`在某些地方`<c-n>`不起作用。

当我尝试对文件中的现有单词进行制表符补全，或者如果我想从我的 ctags 列表中对某些内容进行制表符补全时，我得到的只是添加了空格......但是`<c-n>`可以！

如果我自由输入 for `<tab>`，那确实有效。

为什么它在某些情况下没有完成，但在其他情况下却完成了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:59:03.417

你一头雾水，`<C-n>`和 Snipmate 的标签扩展系统没有任何关系。

`<C-n>`是一个用于omnicompletion 的内置快捷方式：它允许您使用当前打开的缓冲区和其他一些来源中的其他单词来完成您当前正在输入的内容。

Snipmate`<Tab>`将任意存根扩展为完整的代码片段：

```
for<Tab> 
```

会在 JS 文件中给你这个：

```
for (var i = 0; i < Things.length; i++) {

} 
```

这不是一个完成机制。如果您没有为刚刚输入的几个字母定义特定语言的片段，Snipmate 将不会做任何事情：

```
function farting(){
    return "prrt!";
}

far<Tab> 
```

不会扩展任何内容，因为您没有`far`片段，而omnicompletion 将以`ting`.

因为你希望你`<Tab>`做两件不相关的事情，你可能需要一个像[SuperTab](http://www.vim.org/scripts/script.php?script_id=1643)这样的插件。

# javascript - 如何将 javascript unicode 符号代码转换为 utf-8？

> ID：10576905
> 
> 赞同：15
> 
> 时间：2012-05-14T02:29:09.853
> 
> 标签：javascript, unicode, utf-8

是否有可以将 javascript unicode 符号代码转换为 utf-8 的命令行工具或在线服务？

例如，我得到了这个 json 代码，但是在普通的文本编辑器中很难编辑。

```
{"name":"leon zhang","city":"\u4e0a\u6d77"} 
```

我想将其转换为：

```
{"name":"leon zhang","city":"上海"} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T02:37:48.703

您使用以下 javascript 函数将 unicode 转换为 utf-8

```
function encode_utf8( s ){
    return unescape( encodeURIComponent( s ) );
}( '\u4e0a\u6d77' ) 
```

您也可以在 firebug 控制台中试用。有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T02:36:30.850

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
    <title>UTF-8 To Unicode</title>
    <style type="text/css">
    <!--
    td {
        height: 24px;
        line-height: 24px;
    }
    #content {
        margin-top: 2px;
    }
    -->
    </style>
    </head>
    <script type="text/javascript">
        function encodeGB2312(){
            var c = document.all.content.value;
            var re = /(%)+/g;
            var result =  escape(c);
            document.all.content.value =  result.replace(re, "\\");
            document.all.content.focus();
            document.all.content.select();
        }
        function clearContent(){
            document.all.content.value = "";
            document.all.content.focus();
        }
    </script>

    <body>
        <h3 align="center">UTF-8 To Unicode</h3>
        <table width="600" border="1" cellspacing="0" cellpadding="0" align="center"         style="text-align:center;">
          <tr>
            <td>Input what you want to convert：&lt;/td>
            <td><input type="text" name="content" id="content" size="50"/></td>
          </tr>
          <tr>
            <td colspan="2">
            <input type="button" name="encoding" value="Start Conversion"         onclick="encodeGB2312()"/>&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="button" name="clear" value=" Cancel" onclick="clearContent();"/></td>
          </tr>
        </table>
    </body>
    </html> 
```

**这是一个将utf-8转换为unicode的示例，依次进行。**

# php - 如何使用 Yii::app()->end() 方法，它与 exit() 有什么不同？

> ID：10576908
> 
> 赞同：15
> 
> 时间：2012-05-14T02:29:34.350
> 
> 标签：php, yii, exit

在表单验证中，我发现了这样的代码

```
if(isset($_POST['ajax']) && $_POST['ajax']==='login-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    } 
```

手册说 end() 方法将终止应用程序。为什么要终止应用程序？下面的代码不会执行？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-14T03:27:11.933

是的，这是一个 Ajax 请求，代码应该返回验证结果，然后停止代码执行。它与 Php die 函数的想法相同，但允许 Yii 运行 onApplicationEnd 清理代码（如果有）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-31T14:36:20.790

简单地说，它只是终止应用程序。它与 php 的不同之`exit()`处在于它`onEndRequest()`在退出之前调用了。

尽管文档说`status`参数 0 表示正常退出，而其他值表示异常退出，但并未如此实践。`status`参数只是传递给函数（当然是`exit()`输出它！）。

```
Yii::app()->end('saved', true); 
```

甚至对象可以输出如下：

```
Yii::app()->end(json_encode($data), true); 
```

*注意：（1）`onEndRequest()`在应用程序处理请求后立即提出。该功能可用于提示日志等有用的功能。*

[**Yii 文档`end()`**](http://www.yiiframework.com/doc/api/1.1/CApplication#end-detail)

```
/**
* Terminates the application.
* This method replaces PHP's exit() function by calling
* {@link onEndRequest} before exiting.
* @param integer $status exit status (value 0 means normal exit while other values mean abnormal exit).
* @param boolean $exit whether to exit the current request. This parameter has been available since version 1.1.5.
* It defaults to true, meaning the PHP's exit() function will be called at the end of this method.
*/

public function end($status=0,$exit=true)
{
if($this->hasEventHandler('onEndRequest'))
$this->onEndRequest(new CEvent($this));
if($exit)
exit($status);
} 
```

# python - Django：创建动态表单

> ID：10576909
> 
> 赞同：5
> 
> 时间：2012-05-14T02:29:49.300
> 
> 标签：python, django, forms, models

我有这些模型，我想根据数据构建表单：

```
class Location(models.Model):
    name=models.CharField(max_length=255)
    location_id=models.CharField(max_length=255)
    organization=models.CharField(max_length=255)

    def __unicode__(self):
        return self.name

class Beverage(models.Model):
    name=models.CharField(max_length=255)
    location=models.ForeignKey(Location)
    fill_to_standard=models.IntegerField(max_length=10)
    order_when_below=models.IntegerField(max_length=10)

    def __unicode__(self):
        return self.name

class Inventory(models.Model):
    location=models.ForeignKey(Location)
    beverage=models.ForeignKey(Beverage)
    units_reported=models.IntegerField(max_length=10)
    timestamp=models.DateTimeField(auto_now=True) 
```

这就是我想要发生的事情，当用户去更新特定位置的库存时，我希望他们获得一个表格，列出该位置的所有可能饮料（每个位置的饮料不同），然后`Inventory`为它将在`Inventory`表中为此`Beverage`创建一个新行`Location`。每个人都需要一个时间戳，这样我们就可以有一个历史记录。我想我知道我需要表单集，但我没有成功弄清楚如何为此实现它们。所以，这是一种两部分：

1.  我的模型设计是否适合这个问题？
2.  我如何制作依赖于自己构建的饮料数量的表格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:43:18.640

问题 1：模型设计 - 我会从 Inventory 模型中删除 location 字段，因为它已经在 Beverage 模型中，并且是多余的。否则，它们在我看来很好。

问题2：表单集...

表格.py

```
from django import forms
from my_project.my_app.models import Beverage

class InventoryForm(forms.ModelForm):
    units_reported = forms.IntegerField()
    class Meta:
        model = Beverage
        fields = ('name', 'id') 
```

视图.py

```
from django.forms.models import modelformset_factory
from my_project.my_app.models import Beverage, Inventory

def update_inventory(request, location_id):

    InventoryFormSet = modelformset_factory(Beverage, form=InventoryForm)
    qs = Beverage.objects.filter(location=location_id)
    formset = InventoryFormSet(queryset=qs)
    if request.method == 'POST':
        formset = InventoryFormSet(request.POST)
        if formset.is_valid():
            for form in formset:
                beverage = form.save(commit=False)
                units_reported = form.cleaned_data['units_reported']
                Inventory(beverage=beverage, units_reported=units_reported).save()
    ... 
```

modelformset_factory 将为查询集中的每个对象（饮料）创建一个表单，该表单按所需位置进行过滤，并在自定义的 ModelForm 中有一个额外的字段来报告单位。

# vb.net-2010 - VB2010 多维数组，思维障碍

> ID：10576911
> 
> 赞同：-1
> 
> 时间：2012-05-14T02:30:21.780
> 
> 标签：vb.net-2010

所以我试图在visual basic 2010中制作纸牌游戏WAR。我有以下代码，我知道下一步我需要做什么，但我无法进入下一步。

```
Public Class form1
'throws an error unless this is the first class in the file

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        'click the button currently labled "loop"
        Dim Cards() As String = {"Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack"} 'spades,hearts/diamonds,clubs
        Dim Values() As String = {"11", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11"} 'faces is a term meaning a card that depicts a person
        Dim suits() As String = {"H", "D", "C", "S"}
        Dim p1deck()() As String '
        'first (0) is the number of the array
        'second(0) is the string
        p1deck(0)(0) = "Ace"
        p1deck(0)(1) = "11"
        p1deck(0)(2) = "Hearts"

        TextBox1.Text = p1deck(0)(0) & " of " & p1deck(0)(2)

        'Cards.ToList().  add/removeAt
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:52:45.280

你没有[初始化](http://msdn.microsoft.com/en-us/library/0sxy840k)你的 p1deck 数组。

尝试这样的事情：

```
Dim p1deck(2, 3) As String 

p1deck(0, 0) = "Ace"
p1deck(0, 1) = "11"
p1deck(0, 2) = "Hearts"

TextBox1.Text = p1deck(0, 0) & " of " & p1deck(0, 2) 
```

# python - Python tcl 没有正确安装

> ID：10576913
> 
> 赞同：14
> 
> 时间：2012-05-14T02:30:51.817
> 
> 标签：python, graphics, tcl

我刚刚为 python 安装了 graphics.py。但是当我尝试运行以下代码时：

```
 from graphics import *

    def main():
        win = GraphWin("My Circle", 100, 100)
        c = Circle(Point(50,50), 10)
        c.draw(win)
        win.getMouse() # Pause to view result
        win.close()    # Close window when done

    main() 
```

我的翻译给了我这个奇怪的信息：

```
Traceback (most recent call last):
File "F:\CS 101\Python\projects\packer.py", line 8, in <module>
from graphics import *
File "F:\CS 101\Python\lib\site-packages\graphics.py", line 168, in <module>
_root = tk.Tk()
File "F:\CS 101\Python\lib\tkinter\__init__.py", line 1674, in __init__
self.tk = _tkinter.create(screenName, baseName, className, interactive, wantobjects,                            useTk, sync, use)
_tkinter.TclError: Can't find a usable init.tcl in the following directories: 
{F:\CS 101\Python\tcl\tcl8.5.9} {F:/CS 101/Python/tcl/tcl8.5} {F:/CS        101/Python/lib/tcl8.5} {F:/CS 101/lib/tcl8.5} F:/lib/tcl8.5 {F:/CS 101/library} F:/library     F:/tcl8.5.2/library F:/tcl8.5.2/library

F:/CS 101/Python/tcl/tcl8.5/init.tcl: version conflict for package "Tcl": have 8.5.2,            need exactly 8.5.9
version conflict for package "Tcl": have 8.5.2, need exactly 8.5.9
while executing
"package require -exact Tcl 8.5.9"
(file "F:/CS 101/Python/tcl/tcl8.5/init.tcl" line 20)
invoked from within
"source {F:/CS 101/Python/tcl/tcl8.5/init.tcl}"
("uplevel" body line 1)
invoked from within
"uplevel #0 [list source $tclfile]" 
```

这可能意味着 Tcl 没有正确安装。

这是什么意思？我能做些什么？

PS：我正在使用 Eclipse (PyDev) 进行编码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-10-28T08:15:30.440

我通过修改我的激活脚本来解决问题：

```
set "TCL_LIBRARY=D:\Program Files (x86)\Python3.5\tcl\tcl8.6"
set "TK_LIBRARY=D:\Program Files (x86)\Python3.5\tcl\tcl8.6" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T20:06:54.910

**关于您可以做什么**，您可以尝试编辑您的 init.tcl 文件以读取类似的内容`package require Tcl 8.5.0-8.6`，或者如果这不起作用，您可以尝试`package require -exact Tcl 8.5.2`。我还必须以相同的方式编辑我的 tcl\tk8.5\tk.tcl 文件，使用 Tk 而不是 Tcl。

**如果编辑文件对您不起作用**，您可以从以下位置下载并安装最新的 Tcl：

*   source 使用[sourceforge](http://sourceforge.net/projects/tcl/files/Tcl/)的最新版本。这将需要一个可接受的编译器。例如，请参阅*blog.victorjabur.com/2011/06/05/compiling-python-2-7-modules-on-windows-32-and-64-using-msvc-2008-express/*或*stackoverflow.com/questions /4218613/building-a-python-module-on-windows-using-ms-compiler*。
*   最新的[ActiveState 社区版本](http://www.activestate.com/activetcl/downloads)。如果您有安装权限，这可能是最简单的选择。看到这是针对 CS 101 的，您的实验室管理员可能不允许您获得该权限（无论是通过策略还是技术）。当然，这也可能意味着这个答案来得太晚，无法满足您的迫切需求。

**关于它的含义**，没有更多信息，我现在只能做出推测。我遇到了相反的问题；我会告诉你它，希望它能让你对它的含义有所了解。

我安装了 8.5.9，但 init.tcl 需要 8.5.2。我猜我的问题是由安装 ActiveState python、官方 python（2.7、64 位）和/或我后来安装的其他软件包引起的。[此下载页面](http://www.python.org/download/releases/2.7.3/)底部有一条 关于 MacOS 上的 Tcl/Tk 的注释，可以解释为 PC 上也存在问题空间。ActiveState Python 2.7 包括 Tcl/Tk 8.5.9，如此[处](http://docs.activestate.com/activepython/2.7/whatsincluded.html)所述。使用[7-zip](http://www.7-zip.org/)从 ActiveState 和 Python.org 打开 msi 文件，然后 grepping 搜索“tcl”然后“require”，我可以看到 ActiveState msi 中的 init.tcl 指定`package require -exact Tcl 8.5.9`.

我的猜测是 8.5.2 的要求来自常规的 python 安装（这显然不太好用），或者我后来安装的一些包。在修复模式下运行 ActiveState msi 不能解决问题，在修复模式下运行 Python msi 也不能解决问题。

PS如果这不及时，为什么我仍然回答？为您制定一个体面的答案有助于我更好地理解我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T06:55:53.243

我上次在 ubuntu 11.04 中安装 ns2.35 时遇到了同样的问题。安装ns2.35后，收到ns安装成功的消息。然后我在/.bashrc 中设置路径。然后我给了 ns 命令，它给了我同样的错误。

问题是因为 ns 可执行文件也在 /usr 中，这是冲突的。

解决方案：

1.  通过在终端 cd /usr/local/bin 中给出以下命令，转到位置 root-usr-local-bin
2.  在那里你会找到 ns 文件。我们只需要通过给出以下命令来删除它 rm ns
3.  就是这样，你完成了。现在您的 ns 开始成功运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T12:33:11.017

与另一个使用 TCL_Library 环境变量的程序可能存在兼容性问题。在附加的线程中，我更改了环境变量路径并解决了我的问题。它可能与您的问题有关：

[Python IDLE 无法启动](https://stackoverflow.com/questions/7509579/python-idle-wont-start/13990202#13990202)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-04T20:19:56.873

我正在使用 Python 2.7 运行 PyCharm IDE。里面 c:\Python27\tcl\tcl8.5\init.tcl "package require -exact Tcl 8.5\. **2** "改为

```
package require -exact Tcl 8.5.9 
```

在 c:\Python27\tcl\tk8.5\tk.tcl "package require -exact Tk 8.5\. **2** " 内更改为：

```
package require -exact Tcl 8.5.9 
```

这对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-30T06:32:03.980

PATH 解决方案对我不起作用。我正在使用 Win7 python 2.7。最后我编辑了2个文件： C:\Python27\tcl\tk8.5\tk.tcl `package require -exact Tk 8.5.2` 改成 `package require Tk 8.5.0-8.6`

C:\Python27\tcl\tcl8.5\init.tcl `package require -exact Tcl 8.5.2` 改成 `package require Tcl 8.5.0-8.6`

这行得通！以前我的 IDLE 永远不会弹出，但现在它也能正常工作了。很酷，谢谢@Jonathan Spooner 和@hlongmore

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-11T19:43:07.177

我想我在 windows8/python2.7 下遇到了同样的问题。这是安装和环境变量设置的地狱。都一文不值。今天我找到了一个解决方案：

在 D: 下载并安装 python (为了保留我的安装) 然后将文件夹 Tcl 复制到我的 C: 安装中相同的相对位置：C:\Python27

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-03T17:33:49.907

在 Windows 10 中使用 mayplotlib.pyplot 生成简单散点图时，我遇到了类似的问题。我通过在

> 控制面板>系统和安全>系统>高级系统设置>环境变量>用户名的用户变量：
> 
> 变量名：TCL_LIBRARY，变量值=C:\Python27\tcl\tcl8.5
> 
> 变量名：TK_LIBRARY，变量值=C:\Python27\tcl\tk8.5

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-08T01:09:18.700

为了提供更通用的解决方案，在错误回溯中，您应该具有以下内容：

> C:/Users/[perso path]/tcl/tcl8.6/init.tcl: 包“Tcl”的版本冲突：有 8.6.6，需要 8.6.8 包“Tcl”的版本冲突：有 8.6.6 , 正好需要 8.6.8

所以只需打开错误中描述的文件：`C:/Users/[perso path]/tcl/tcl8.6/init.tcl`并替换`package require -exact Tcl 8.6.8`为错误中所需的版本，对我来说是 8.6.6: `package require -exact Tcl 8.6.6`。

然后（使用另一个文件）会发生同样的问题`Tk`，我做了同样的操作并且它有效。也许你不会有相同的版本，只需更换它们。

# php - PHP 出现 413 错误

> ID：10576914
> 
> 赞同：0
> 
> 时间：2012-05-14T02:30:54.417
> 
> 标签：php, curl

我正在通过 cURL 发送 HTTP 请求，并且不断收到此 413 错误。我要发送的文件是 21kb，我检查了我的 php.ini 文件。有人可以告诉我有什么问题吗？

这是我直接影响 HTTP 请求的代码：

```
 <?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 * Class for creating test cases to be sent 
 * into TestRail
 * @author Banderson
 */
class testCase {

    /*Function to get the data for each individual test case*/
    function getTestCase($row, $highestColIndex, $PHPobjWorksheet){

            echo "<br />";
            for($col=0;$col<=$highestColIndex;++$col){
                $v=$PHPobjWorksheet->getCellByColumnAndRow($col,$row)->getValue();
                $cellValue[]=$v;

        }

    return $cellValue;

    }

    /*Function to set the data for each individual test case*/
    function setTestCase($cellValue){
                $case[]=array();
                $case['title'] = $cellValue[0];
                echo $case['title']. "<- Title"."<br/>";
                $case['type'] = $cellValue[1];
                echo $case['type']. "<- Type"."<br/>";
                $case['priority'] = $cellValue[2];
                echo $case['priority']. "<- Priority"."<br/>";

                /*$case['estimate'] = $cellValue[3];
                echo $case['estimate']. "<- Estimate"."<br/>";
                $case['milestone'] = $cellValue[4];
                echo $case['milestone']. "<- MileStone"."<br/>";
                $case['refs'] = $cellValue[5];
                echo $case['refs']. "<- Custom Refs"."<br/>";
                $case['precon'] = $cellValue[6];
                echo $case['precon']. "<- Custom Precondition"."<br/>";
                $case['steps'] = $cellValue[7];
                echo $case['steps']. "<- Custom Steps"."<br/>";
                $case['expectedresults'] = $cellValue[8];
                echo  $case['expectedresults']. "<- Expected Results"."<br/>";
                $case['testSuite'] = $cellValue[9];
                echo $case['testSuite']. "<- TestSuite"."<br/>";*/

                $caseData=array(

                    'Title'=> $case['title'],
                    'Type'=> $case['type'],
                    'Priority'=> $case['priority'],
                    'key'=> "246810",

                );

                return $caseData;

    }

    function sendTestCase($caseArgs){
        try{
            $ch = curl_init();
            //$sendData = http_build_query($caseArgs);

            $header=array();
            $header[]= "Accept: application/json";

            $header[]= "Host: localhost";
            $header[]= "Title=newTitle";
            $header[]= "key=2467810";

            curl_setopt($ch, CURLOPT_URL, 'http://localhost:8888/testrail/index.php?/miniapi/add_case/2');  
            curl_setopt($ch, CURLOPT_POSTFIELDS, $header);
            curl_setopt($ch, CURLOPT_POST, 1);

            curl_exec($ch);
            curl_close($ch);
        }
        catch (HttpException $ex){
            echo $ex."<-Exception";
 }

    }

}

?> 
```

我会包含我的 php.ini 文件，但这太大了。我愿意接受任何建议！先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:41:42.473

413 是“请求实体太大”。您尝试将 HTTP 标头填充到 POSTFIELDS 部分的任何原因？如果此服务不需要任何 post 字段（例如 body 应该是 0 字节），那么使用 POSTFIELDs 发送您的“标题”肯定会关闭它。对于标题，您应该`CURLOPT_HTTPHEADER`改用

# java - 单击列表项后显示图像

> ID：10576918
> 
> 赞同：1
> 
> 时间：2012-05-14T02:31:27.577
> 
> 标签：java, android, imageview, listactivity

所以我搜索和搜索，我没有找到任何像我正在寻找的东西。我有几个 ListActivities，我可以单击一个并转到下一个列表和下一个列表等...我想要的是当我单击相应的列表项时，我希望它显示 res 文件夹中的图像。我整个下午都被困在这个问题上，我找不到任何工作。任何帮助都会很棒。示例何时选择覆盖物，它检索封面_sheet.png。谢谢詹姆斯

应用程序的入口点：`Menu.java`

```
public class Menu extends ListActivity 
{ 
    public static final String EXTRA_PICTURE = "extra.picture.toshow"; 

    String classes[] = { "CoverSheet",// "TreatmentProtocols", "EMSProcedures",
           // "DrugList", "EMSPolicies", "EMSTriageAndDestinationPlan",  
           // "Appendices"
            }; 
    //in this array you store the drawable resource ids to show.  
    //you can change it to hold urls or other identifiers. 
    int images[] = { R.drawable.cover_sheet, }; 

    @Override 
    protected void onCreate(Bundle savedInstanceState) 
    { 
        super.onCreate(savedInstanceState); 
        setListAdapter(new ArrayAdapter<String>(Menu.this,  
                android.R.layout.simple_list_item_1, classes)); 
    } 

    protected void onCreate1(Bundle savedInstanceState) 
    { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.imageview); 
        final int imgResource = getIntent().getIntExtra(Menu.EXTRA_PICTURE, 0);
        final ImageView img = (ImageView)findViewById(R.id.img); 
        img.setImageResource(imgResource); }

    @Override 
    protected void onListItemClick(ListView l, View v, int position, long id) 
    { 
        super.onListItemClick(l, v, position, id); 
        String Menu = classes[position]; 
        try 
        { 
            Class firstClass = Class.forName("protocols.NashCounty." + Menu); 
            Intent firstIntent = new Intent(Menu.this, firstClass); 
            firstIntent.putExtra(EXTRA_PICTURE, images[position]); 
            startActivity(firstIntent); 
        } 
        catch (ClassNotFoundException e) 
        { 
            Log.e("SAMPLE", "ClassNotFoundException ", e); 
        } 
        catch (Exception e) 
        { 
            Log.e("SAMPLE", "Exception ", e); 
        } 
    } 
} 
```

这是我创建的班级

```
public class CoverSheet extends ListActivity
{
    public static final String EXTRA_PICTURE = "extra.picture.toshow";
    String classes[] = { "CoverSheet", };
    // in this array you store the drawable resource ids to show.
    // you can change it to hold urls or other identifiers.
    int images[] = { R.drawable.cover_sheet };

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.imageview);
        final int imgResource = getIntent().getIntExtra(
                CoverSheet.EXTRA_PICTURE, 0);
        final ImageView img = (ImageView) findViewById(R.id.img);
        img.setImageResource(imgResource);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id)
    {
        super.onListItemClick(l, v, position, id);
        String coversheet = classes[position];
        try
        {
            Class firstClass = Class.forName("protocols.NashCounty."+classes);
            Intent firstIntent = new Intent(CoverSheet.this, firstClass);
            firstIntent.putExtra(EXTRA_PICTURE, images[position]);
            startActivity(firstIntent);
        }
        catch (ClassNotFoundException e)
        {
            Log.e("SAMPLE", "ClassNotFoundException ", e);
        }
        catch (Exception e)
        {
            Log.e("SAMPLE", "Exception ", e);
        }
    }
} 
```

下面是我的 xml 布局 l 名为 imageview

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:orientation="vertical">
    <ImageView android:id="@+id/img"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:src="@drawable/cover_sheet" />
</LinearLayout> 
```

下面是我的minifest

```
<activity android:name=".activity.CoverSheet"  
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" /> 
</application>
</manifest> 
```

我误解了你之前说的内容，对此我深表歉意，我想我开始不理解它了……我想。

以下是我尝试运行代码时出现的 logcat 错误：

05-18 17:15:26.221：E/AndroidRuntime(618)：致命异常：主要 05-18 17:15:26.221：E/AndroidRuntime(618)：java.lang.ArrayIndexOutOfBoundsException：长度=1；index=3 05-18 17:15:26.221: E/AndroidRuntime(618): 在协议.NashCounty.Menu.onListItemClick(Menu.java:40) 05-18 17:15:26.221: E/AndroidRuntime(618):在 android.app.ListActivity$2.onItemClick(ListActivity.java:319) 05-18 17:15:26.221: E/AndroidRuntime(618): 在 android.widget.AdapterView.performItemClick(AdapterView.java:292) 05-18 17:15:26.221: E/AndroidRuntime(618): 在 android.widget.AbsListView.performItemClick(AbsListView.java:1058) 05-18 17:15:26.221: E/AndroidRuntime(618): 在 android.widget.AbsListView $PerformClick.run(AbsListView.java:2514) 05-18 17:15:26.221: E/AndroidRuntime(618): 在 android.widget.AbsListView$1.run(AbsListView.java:3168) 05-18 17:15: 26.221：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:29:28.613

`classes`我假设您在变量中列出名称的活动中显示图像。

确保列出的所有类也包含在`androidManifest.xml`正确的`<activity />`标记和正确的包声明中！

您对变量和包名称的使用具有误导性，但我认为您的应用程序包是`protocols.NashCountry`，因此在清单中应该有类似于以下的一行：

```
<activity android:name=".activity.CoverSheet" android:label="@string/app_name" /> 
```

对于您要调用的每个活动课程。

您还应该尝试更改

```
e.printStackTrace(); 
```

进入

```
Log.e("SAMPLE", "ClassNotFoundException ", e); 
```

**编辑**：要使您的后续活动全屏显示，您需要`android:theme`在清单中设置属性：

```
<activity android:name=".activity.CoverSheet" 
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" />
<activity android:name=".activity.TreatmentProtocols" 
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" /> 
```

下面的代码显示了如何处理`Intent`额外的：

```
public class Menu extends ListActivity
{
    public static final String EXTRA_PICTURE = "extra.picture.toshow";
    String classes[] = { "CoverSheet", "TreatmentProtocols", "EMSProcedures", 
            "DrugList", "EMSPolicies", "EMSTriageAndDestinationPlan", 
            "Appendices" };
    //in this array you store the drawable resource ids to show. 
    //you can change it to hold urls or other identifiers.
    int images[] = { R.drawable.coversheet, R.drawable.img2, R.drawable.img3, 
        R.drawable.img4, R.drawable.img5, R.drawable.img6, R.drawable.img7};

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Menu.this, 
                android.R.layout.simple_list_item_1, classes));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id)
    {
        super.onListItemClick(l, v, position, id);
        String Menu = classes[position];
        try
        {
            Class firstClass = Class.forName("protocols.NashCounty." + Menu);
            Intent firstIntent = new Intent(Menu.this, firstClass);
            firstIntent.putExtra(EXTRA_PICTURE, images[position]);
            startActivity(firstIntent);
        }
        catch (ClassNotFoundException e)
        {
            Log.e("SAMPLE", "ClassNotFoundException ", e);
        }
        catch (Exception e)
        {
            Log.e("SAMPLE", "Exception ", e);
        }
    }
} 
```

最后，`onCreate`您的类中的方法应该根据`extra`提供给它们的图像显示正确的图像：

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full_img);
    final int imgResource = getIntent().getIntExtra(Menu.EXTRA_PICTURE, 0);
    final ImageView img = (ImageView)findViewById(R.id.img);
    img.setImageResource(imgResource);
} 
```

请注意，如果您只需要根据列表项点击显示不同的图像，则不需要单独的活动，也不必通过名称访问它们：您应该使用单个活动，并传递 id启动意图时将图像作为额外参数。

**编辑：**您的`CoverSheet`活动课程应如下所示：

```
public class CoverSheet extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.imageview);
        final int imgResource = getIntent().getIntExtra(Menu.EXTRA_PICTURE, 0);
        final ImageView img = (ImageView)findViewById(R.id.img);
        img.setImageResource(imgResource);
    }
} 
```

很简单，不需要扩展`ListActivity`，因为你不想处理那里的任何列表，你只想显示一张图片。

其他变量对于这种情况也无用！

**编辑 2**：您的`onListItemClick`方法也应该变得更简单！不需要动态检索类，因此您也可以从活动中完全删除`classes`数组变量。`Menu`

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id)
{
    super.onListItemClick(l, v, position, id);
    try
    {
        Intent firstIntent = new Intent(Menu.this, CoverSheet.class);
        firstIntent.putExtra(EXTRA_PICTURE, images[position]);
        startActivity(firstIntent);
    }
    catch (Exception e)
    {
        Log.e("SAMPLE", "Exception ", e);
    }
} 
```

# iphone - 为什么从服务器请求的文件名以 Unicode 字符开头？

> ID：10576919
> 
> 赞同：2
> 
> 时间：2012-05-14T02:31:32.413
> 
> 标签：iphone, objective-c, unicode, ftp

我使用 FTP 列出服务器上的文件属性。我请求文件名并将它们放入一个数组中。我像这样直接打印数组：

```
NSLog(@"%@", array); 
```

我得到的是这样的：

```
\U6587\U4ef6\U540d\Uff1afilename.txt
\U6587\U4ef6\U540d\Uff1afilename1.txt
...... 
```

当我想打印 Unicode "\U6587\U4ef6\U540d\Uff1a" 以查看它是什么时，我得到了编译错误：“不完整的通用字符名称”。

但是，如果我打印名称而不是整个数组，我可以在没有 Unicode 的情况下正确获取名称。但我需要对数组中的名称做一些事情。我想知道为什么 Unicode 存在，并且只删除 Unicode 然后用真实文件名做一些事情是否合适？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T02:47:23.887

在 C99 中，因此也可能是 Objective C，有两种 Unicode 转义：

```
\uXXXX
\UXXXXXXXX 
```

小写`u`后跟 4 个十六进制数字；大写`U`后跟 8 个十六进制数字（其中，前两个应该是 0 才能成为有效的 Unicode（第三个应该是 0 或 1；最大 Unicode 代码点是 U+10FFFF）。

我相信如果你用`U`小写的替换大写`u`的，你应该得到编译的代码。

在我的 Mac OS 10.7.4 系统上，使用 GCC 4.7.0（自制）编译，我编译了以下代码：

```
#include <stdio.h>

int main(void)
{
    char array[] = "\u6587\u4ef6\u540d\uff1a";
    puts(array);
    return 0;
} 
```

并得到这个输出：

*   文件名：

我无法回答为什么会有这些字符，但结尾处类似冒号的字符表明该站点可能在实际文件名之前带有某种标签（类似于“文件：”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:58:06.657

除了乔纳森所说的之外，您可能必须使用`stringWithUTF8String:`，但我同意错误在于大写`U`而不是`u`.

# jquery - 运行从另一个函数调用的 jQuery 函数

> ID：10576921
> 
> 赞同：2
> 
> 时间：2012-05-14T02:31:53.363
> 
> 标签：jquery, function, external

我真的不知道如何表达这个问题。但我想要实现的是从另一个 JavaScript（非 jQuery）函数运行/调用 jQuery 函数。

我正在尝试向[JQ 轮播添加元素。](http://5509.github.com/jq.carousel/)

这就是它应该完成的方式：通过单击一个按钮。：

```
$('#carousel_add').on('click', function(ev) {
  $carousel.carousel('reset');
  $carousel.append('<div class="carousel_box"> Page '+(z)+' <br/><img src="http://place.to/my/picture/file'+dir+'/0'+z+'.png" width="100px" height="50px"> </div>');
  $carousel.carousel('refresh');
  document.getElementById('carousel_next').disabled = false;
  document.getElementById('carousel_prev').disabled = true;
}); 
```

我试图在没有添加按钮的情况下做到这一点。我想要一个触发 JavaScript 函数的按钮，然后触发轮播的 jQuery 添加函数。我遇到的问题是它说 carousel 变量是未定义的，我可以理解，因为它不在函数的范围内。

例子：

HTML ->

```
<input type="button" value="Load Pages" function="loadPages();"> 
```

JavaScript（不涉及 jQuery）

```
<script type="text/javascript">
function loadPages()
{
myImage = new Image();
myImage.src = "http://path.to/image/file.png";
//The image is loaded.
//Now I want to add this image to the JQ Carousel
addCarousel(myImage.src);
}
</script> 
```

JavaScript（基于 jQuery 的轮播 -> JQ 轮播）

```
<script type="text/javascript">

$(document).ready(function(e) {

    var $carousel = $('#carousel').carousel({
        group: 6,
        indicator: false
      }),
      $prev = $('#carousel_prev'),
      $next = $('#carousel_next'),
       set_state = function() {
        var state = $carousel.carousel('getMoveState');
        switch ( state ) {
        case 'min':
          $prev.prop('disabled', 'disabled');
          $next.prop('disabled', '');
          break;
        case 'max':
          $prev.prop('disabled', '');
          $next.prop('disabled', 'disabled');
          break;
        case true:
          $prev.prop('disabled', '');
          $next.prop('disabled', '');
          break;
        default:
          $prev.prop('disabled', 'disabled');
          $next.prop('disabled', 'disabled');
        }
      };
      num = 1;

    $('#carousel_prev').on('click', function(ev) {
      $carousel.carousel('prev');
    });
    $('#carousel_next').on('click', function(ev) {
      $carousel.carousel('next');
    });
    // ...
    $carousel.bind({
      'Carousel.next': function() {
        set_state();
      },
      'Carousel.prev': function() {
        set_state();
      }
    });

</script> 
```

现在应该添加它的功能

```
function addCarousel(image)
{
      $carousel.carousel('reset');
      $carousel.append('<div class="carousel_box"> Page '+(num++)+' <br/><img src="'+image+'" width="100px"> </div>');
      $carousel.carousel('refresh');
      document.getElementById('carousel_next').disabled = false;
      document.getElementById('carousel_prev').disabled = true;
    })

} 
```

轮播所在的 HTML：

```
<div class="carousel">
  <div id="carousel" class="carousel_inner">

    <div class="carousel_box"> Page 1 <br/><img src="http://path/to/image/file.png" width="100px"></div>
   </div>

   </div>
  <p class="btns">
    <input type="button" id="carousel_prev" value="prev" disabled>
    <input type="button" id="carousel_next" value="next" >
    <input type="button" id="carousel_add" value="add">
  </p>
</div> 
```

我得到 $carousel 是未定义的，尽管它以前在页面上声明过。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:38:05.397

只是把函数的`$carousel`外面。`document.ready`

像这样..

```
<script type="text/javascript">
var $carousel = null;
$(document).ready(function(e) {

    $carousel = $('#carousel').carousel({//notice i removed "var "
        group: 6,
        indicator: false
     }),
.... 
```

早些时候，变量`$carousel`只在`document.ready`事件的匿名处理程序中可见。将其移出，将使该变量具有全局可见性。因此，现在您可以在脚本中的任何位置使用该变量。

另外，请注意更新`$carousel`。因为相同的值将反映在您引用的所有其他地方`$carousel`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:39:04.390

`$carousel``document.ready`在范围之外不可见，`$carousel`请在您的`document.ready`.

```
var $carousel; 
$(document).ready(function() {
    $carousel = $('#carousel').carousel({... 
```

# ios - 我应该在我的应用程序包中存储 1500 张图像吗？

> ID：10576926
> 
> 赞同：2
> 
> 时间：2012-05-14T02:32:44.507
> 
> 标签：ios, data-storage

我的应用程序中使用了大约 1500 张图像，它们类似于剪贴画。我想知道存储这些的最佳方式是什么，以及循环遍历该文件夹以列出所有图像名称和路径的方式。

最好将所有图像存储在我的应用程序包中吗？如果是这样，我该如何列出该目录路径中的所有内容？

有没有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:51:36.680

只要您保持[在大小限制范围内](https://stackoverflow.com/a/4753253/335858)，将图像放入您的应用程序包听起来是一个有效的选择。

您可以使用`NSBundle`的`pathsForResourcesOfType:inDirectory:`API 列出捆绑包中具有特定扩展名的项目的路径。如果您采用一种命名方案，其中路径名称对您要在列表中提供图像的名称进行编码，您可以实现一个从资源路径名称中提取图像名称的简单方法。

# android - iOS 性能提示在 Android 上是否相同？

> ID：10576929
> 
> 赞同：0
> 
> 时间：2012-05-14T02:34:05.750
> 
> 标签：android, ios, opengl-es-2.0

我只是在浏览所有关于 OpenGL ES 2.0 绘图的[iOS 性能提示](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html#//apple_ref/doc/uid/TP40008793-CH107-SW10)，我只是想知道：“它们都同样适用于 Android 开发吗？”

无论 Android 还是 iOS，这些过程是否都相同，它们只是“纯”OpenGL 技巧吗？

具体来说，这个技巧是否也适用于 Android 开发？因为它会改变我当前创建属性数据的方式：

> 在设计顶点结构时，将每个属性的开头对齐到一个偏移量，该偏移量是其组件大小的倍数或 4 个字节，以较大者为准。当属性未对齐时，iOS 必须在将数据传递给图形硬件之前执行额外的处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:00:49.140

作为一条原则，相同的最佳实践适用于两个平台，因为其中一些是“常识”方法（即批处理是其中之一）。

另一方面，相同的黄金法则不一定适用于所有安卓设备，我想解释一下我的意思。

这一点主要是由于GPU架构。如果您阅读了 IOS 设备的最佳实践，那么肯定它们是指 PowerVR GPU（优秀的 GPU），它们具有某些特性，不一定尊重您在 Android 大量设备中发现的其他 GPU 之一。

例如，在 Android 市场中，您肯定会发现 GPU 属于 Adreno 系列、Mali 系列等。

这意味着，为了从所有这些设备中获得最大收益，您应该根据制造商的最佳实践编写代码。

这意味着您应该研究 SDK 对它们中的每一个的建议。

因此，长话短说，其中一些最佳实践也适用于 android，而另一些则可能与某些移动设备的 GPU 特性相冲突。

# java - 尝试检查内部存储中是否存在文件

> ID：10576930
> 
> 赞同：37
> 
> 时间：2012-05-14T02:34:12.667
> 
> 标签：java, android

以下代码是我尝试识别内部存储中是否存在文件的方式，`MODE_PRIVATE`.

```
public boolean isset(String filename){
    FileInputStream fos = null;
    try {
       fos = openFileInput(filename);
       //fos = openFileInput(getFilesDir()+"/"+filename);
       if (fos != null) {
         return true;
       }else{
         return false;
       }
    } catch (FileNotFoundException e) {
        return false;
    }

    //File file=new File(mContext.getFilesDir(),filename);

    //boolean exists = fos.exists();
    } 
```

但是，它进入异常并且不会继续执行代码。它不做回报。为什么？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-05-14T02:50:07.723

希望这个方法对你有帮助。

```
public boolean fileExist(String fname){
    File file = getBaseContext().getFileStreamPath(fname);
    return file.exists();
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-18T05:47:10.253

对于内部存储，这对我有用：

```
public boolean isFilePresent(String fileName) {
    String path = getContext().getFilesDir().getAbsolutePath() + "/" + fileName;
    File file = new File(path);
    return file.exists();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-17T11:06:46.597

**Kotlin：这对我有用！**

```
fun check(path: String?): Boolean
{
    val file = File(path)
    return file.exists()
} 
```

# objective-c - 手动分配 tableView.rowheight 如何影响给定表视图的子视图？

> ID：10576931
> 
> 赞同：0
> 
> 时间：2012-05-14T02:34:17.690
> 
> 标签：objective-c, ios, uitableview

我有一个自定义视图来显示应用程序状态消息，我会根据需要在表格视图上滑动。在我开始自定义表格视图单元格之前，这一直很好。

当我手动为*initWithSTyle*中的表格视图单元格分配行高时...

`self.TableView.rowHeight = 64.0;`

...自定义视图不再显示。

我用委托方法替换了上面的代码......

`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

 `{

```
return 64.0; 
```` 

`}`

...现在自定义视图像以前一样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:34:12.623

`rowHeight`在视图控制器中设置。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tableView.rowHeight = 64.0f;
} 
```

我认为`initWithStyle`设定高度还为时过早。无论哪种方式，由于您的高度是恒定的，因此设置一次高度 (in `viewDidLoad`) 比每次为每个创建的单元格设置高度 (in`initWithStyle`或`heightForRowAtIndexPath`) 更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:38:24.563

您是否创建了一个自定义单元格继承`UITableVIewCell`，如果是，则自定义单元格的高度与默认单元格的高度不同。因此您需要更改行的高度以匹配您的自定义单元格；为了使其正确显示，否则细胞会重叠。

根据您的customcell动态设置高度：-

```
YourCustomCell *cell = (YourCustomCell *)[tableView cellForRowAtIndexPath:indexPath];
return [cell.frame.size.height]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:39:03.030

```
 maintableView = [[UITableView alloc] init];
    maintableView.frame =  CGRectMake(0, 0, 320, 480);
    maintableView.rowHeight = 100.0;
    maintableView.delegate=self;
    maintableView.dataSource=self; 
```

它在我的 Xcode 中工作。试试喜欢。我认为它会起作用。

# r - 创建 R 的默认密码本并将其保存为 pdf

> ID：10576933
> 
> 赞同：14
> 
> 时间：2012-05-14T02:34:51.527
> 
> 标签：r, pdf, documentation

如果我加载`data(mtcars)`它，它会附带一个非常简洁的密码本，我可以使用`?mtcars`.

我有兴趣以同样的方式记录我的数据，此外，将那个整洁的密码本保存为 pdf。

是否可以保存“内容”`?mtcars`以及它是如何创建的？

谢谢，埃里克

PS我确实读过[这个帖子](https://stackoverflow.com/questions/5333280/what-is-the-official-way-of-creating-structuring-maintaining-and-updating-da)。

### 更新 2012-05-14 00:39:59 PDT

我正在寻找仅使用 R 的解决方案；不幸的是，我不能依赖其他软件（例如 Tex）

### 更新 2012-05-14 09:49:05 PDT

非常感谢大家的许多回答。

阅读这些答案后，我意识到我应该更清楚我的优先事项。因此，这里列出了我在这个问题上的优先事项。

1.  R，我正在寻找一个完全基于 R 的解决方案。
2.  重现性，即代码本可以是自动化脚本的一部分。
3.  可读性，文本应该易于阅读。
4.  可搜索性，可以用任何标准软件打开并搜索的文件（这就是为什么我认为 pdf 会是一个很好的解决方案，但这被 1 到 3 否决了）。

我目前正在使用 Hmisc 包中的变量标记我的变量，最终可能会使用同一个包中`label()`的 .txt 码本。`Label()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:21:17.200

（我不完全确定你在追求什么，但是）：

*   与其他软件包文档一样，该文件`mtcars`是一个 .Rd 文件。您可以将其转换为除 pdf 之外的其他格式 (ASCII)，但生成 pdf 的常用方法确实使用 pdflatex。

*   但是，此类 .Rd 文件中的大多数信息或多或少都是手工编写的（除非您使用另一个 R 包，如 roxygen/roxygen2 帮助您自动生成其中的一部分。

*   对于用户数据，通常 Noweb 更方便。
    .Rnw -Sweave-> -> .tex -pdflatex-> pdf 无疑是此类文件最常用的方式。但是，您可以将它与 Openoffice （如果已安装）一起使用，或者将它与纯 ASCII 文件一起使用而不是 TeX。

*   看看`knitr`使用纯 ASCII 文件可能更容易的包。（我不是专家，只是从 切换`Sweave`）

*   如果 html 是一个选项，则两者都`Sweave`可以`knitr`使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T02:58:33.423

我不知道如何获取单个数据集的 pdf，但您可以`datasets`使用以下方法从 LaTeX 版本构建整个包的 pdf：

```
path <- find.package('datasets')
system(paste(shQuote(file.path(R.home("bin"), "R")),"CMD", 
    "Rd2pdf",shQuote(path))) 
```

我不确定这一点，但只有拥有某种 LaTeX 程序（如 MikTex）才有意义。此外，我不确定这将如何在不同的操作系统上工作，因为我的是 windows，这对我有用。

PS这只是您问题的部分答案，因为您想为您的数据执行此操作，但如果没有别的，它可能会让球滚动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T12:24:44.830

输入时显示的帮助页面是`?mtcars`从 .Rd 文件生成的，该文件是一个类似 LaTeX 的文件，用于所有 R 的帮助页面。尽管 .Rd 文件与 LaTeX 类似，但您实际上并不需要知道 LaTeX 来读取或写入它们。实际的 mtcars.Rd 文件可在此处获得：[http](http://commondatastorage.googleapis.com/jthetzel-public/mtcars.Rd) ://commondatastorage.googleapis.com/jthetzel-public/mtcars.Rd ，可以使用任何文本编辑器查看。

安装包时，包的 ./man 目录中包含的 .Rd 文件会转换为 .html 文件。它们由“工具”包中的函数转换。如果您想要`?mtcars`数据集的功能，您需要为它们创建一个包。如果您以前从未创建过包，这听起来可能很复杂，但它很容易学习，并且会让您成为更好的 R 程序员。CRAN 上有许多仅数据集包的示例，例如 msProstate：[http](http://cran.r-project.org/web/packages/msProstate/index.html) ://cran.r-project.org/web/packages/msProstate/index.html 。考虑下载包源以查看它的组织方式。

有关创建自己的包、编写 .Rd 文件和构建包的更多信息： [http](http://cran.r-project.org/doc/manuals/R-exts.html) ://cran.r-project.org/doc/manuals/R-exts.html ，尤其是“1.1.5 包中的数据”。

**编辑**

如果您想将包中的 .Rd 文件转换为 .pdf，您可以在构建包时执行此操作，但您需要一个 LaTeX 编译器。如果您使用的是 Windows，请参见此处：[http](http://cran.r-project.org/bin/windows/Rtools/) ://cran.r-project.org/bin/windows/Rtools/ 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T16:55:22.830

您不能仅使用 R 创建 PDF；您需要使用其他创建 PDF 的软件。

您可以使用 、 和简单自定义函数的组合`utils::promptData`在`tools::Rd2HTML`用户浏览器中打开创建的 HTML 文件。

只制作一个包含您的数据集的包可能会更容易。以“数据集”包为例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T12:32:27.877

看起来，如果你想生成 pdf，总是需要像 LaTeX 这样的外部工具。我建议使用简单的 ASCII 文本格式来生成这样的文件。原则上 .Rd 文件也是 ASCII 文本，但我发现它们的可读性并不高。

相反，我建议使用纯文本 ASCII 格式，例如 Markdown（例如在 StackOverflow 上使用）来编写文本文件。这样的文件已经比 .Rd 格式的文件更具可读性，而且如果您以后选择这样做，它可以很容易地处理成 PDF。我认为该`knitr`软件包能够从 Markdown 源生成 PDF 文件。此外，`knitr`允许您在 Markdown 文本中混入 R 代码。可以评估此​​代码并将结果（偶数）添加到生成的 PDF 中。

在实践中，您可以使用`sprintf`生成可以通过管道传输到文件的字符向量，以便动态生成降价文本。只需编写一次模板，然后标记稍后要添加的文本的位置，如下所示：

```
base_text = "
First header
============

This document was generated on %s, by %s.
"
text_forfile = sprintf(text, some_date, some_name) 
```

只需将文本转储到`text_forfile`文件中即可`.md`完成，无需外部工具。有关如何将文本转储到文件的信息，请参阅[SO 上的这篇文章。](https://stackoverflow.com/questions/2470248/write-lines-of-text-to-a-file-in-r)

# php - 如何将 Zend Framework 插件迁移到 Zend Framework 2 应用程序框架

> ID：10576935
> 
> 赞同：2
> 
> 时间：2012-05-14T02:35:15.360
> 
> 标签：php, zend-framework, plugins, doctrine-orm, zend-framework2

我得到了 Akrabat 的教程使用教义 2 模块。

我试图弄清楚如何将插件、动作助手、视图助手等迁移到 Zend Framework 2。似乎没有关于此的教程或博客文章......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:49:47.323

您的许多代码可能会保持不变。它更像是重构而不是重写。

对于插件，使用新的事件系统。注册一个事件监听器以在您感兴趣的事件发生时触发并执行某些操作。有一个简单的侦听器示例，用于在骨架应用程序中设置视图。您可以收听许多事件 - 比 zf1 更灵活 - 您也可以添加自己的事件。

对于动作助手，编写执行操作的类并使用 DIC 将其注入控制器。网络上有很多注入示例。它真的比 zf1 简单得多。

对于视图助手，它与 zf1 几乎相同。AbstractHelper 的子类，然后在 DI 配置中注册该助手。您可以在 zf2 用户文档中找到说明。

我知道这些评论并不是一个详尽的教程，但它应该能让你朝着正确的方向开始。

# jena - 我应该如何在 Jena 中使用 getDatatypeProperty(String PropertyName)？

> ID：10576937
> 
> 赞同：0
> 
> 时间：2012-05-14T02:35:25.523
> 
> 标签：jena, ontology, owl

我有一个猫头鹰本体，其中有一个 DatatypeProperty “hasAge” 谁能告诉我为什么这段代码返回空值？

```
String URI = "http://owldl.com/ontologies/dl-safe.owl"
DatatypeProperty data = model.getDatatypeProperty(URI+"hasAge") 
```

数据为空！尽管此行存在于 owl 文件中：

```
<!-- http://owldl.com/ontologies/dl-safe.owl#hasAge -->
<owl:DatatypeProperty rdf:about="&dl-safe;hasAge"/> 
```

这个本体适用于 ObjectProperties。但是，它似乎不适用于 DatatypeProperties

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:52:06.857

你在`#`那里少了一个。

`URI+"hasAge"`将是：

```
http://owldl.com/ontologies/dl-safe.owlhasAge 
```

但正如评论所指出的，该属性的 URI 是：

```
http://owldl.com/ontologies/dl-safe.owl#hasAge 
```

所以改成：

```
String URI = "http://owldl.com/ontologies/dl-safe.owl#"; 
```

# java - Java 字符串哈希码缓存

> ID：10576939
> 
> 赞同：5
> 
> 时间：2012-05-14T02:35:34.463
> 
> 标签：java, string, hashcode

字符串不变性的优点之一是哈希码缓存以加快访问速度。

*   在这种情况下，如何为具有相同哈希码的字符串处理缓存？
*   在这种情况下，它真的能提高性能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T02:56:25.713

> 在这种情况下，如何为具有相同哈希码的字符串处理缓存？

缓存的是字符串的哈希码。它缓存在`int`字符串本身的私有字段中。不同的字符串可能具有相同的哈希码没有任何区别......因为哈希码存储在各自的字符串对象中。

（最重要的是具有相同字符序列（因此是`equal`）的两个字符串具有相同的哈希码值。这是可以保证的，因为 Java 字符串的哈希码算法是标准化的......并且具有此属性。）

> 在这种情况下，它真的能提高性能吗？

平均而言，是的，并且随着字符串长度变大而更多。

一个像样的字符串哈希码算法需要查看字符串中的每个字符......否则相似的字符串最终可能会系统地映射到相同的哈希码（这很糟糕）。避免多次查看这 N 个字符是一个巨大的胜利。

缓存无济于事的唯一重要情况是：

*   当大多数字符串哈希码只使用一次时，或者
*   当大多数字符串都很短时。

（还有一个非常模糊的情况。如果`String`哈希到`0`，那么缓存将无效。这是因为`String`该类`0`在缓存字段中使用表示哈希码尚未缓存。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T02:39:15.523

> 在这种情况下，如何为具有相同哈希码的字符串处理缓存？

我不明白你问题的第一部分。缓存对所有字符串的处理都是相同的，无论哈希码是否相同（因为理论上两个不同的字符串可以具有相同的哈希码，因此如果哈希码相等，并不意味着字符串相等）。但如果使用相同的 String*对象*，hashCode 不必重新计算，因为它已被缓存。

> 它真的能提高性能吗？

绝对***是的***

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T02:48:33.147

缓存只是 String 对象中的一个 int 字段。多个字符串可以毫无问题地具有相同的哈希码。

它显着提高了性能，因为：

*   计算哈希码比读取单个 int 字段要昂贵得多
*   如果你计算一个字符串的哈希码一次，很可能你会想要多次计算字符串的哈希码（例如它被用在一个哈希映射键中）

有兴趣的可以看看源码：

[http://www.docjar.com/html/api/java/lang/String.java.html](http://www.docjar.com/html/api/java/lang/String.java.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-10T22:02:26.413

在大多数情况下，在您尝试将字符串放入 HashMap 之前，不会计算 hashCode。然后地图将其缓存在 Map.Entry 中，以加快比较和重新散列。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-14T02:44:11.893

对于第一个，这取决于您的哈希策略。例如，如果将一个单词的所有字母的 ascii 代码加在一起作为该字母的哈希码（a 为 65，A 为 97），在这种情况下，单词“abc”和“bca”具有相同的哈希码。

对于第二个，它也取决于您的哈希策略，但在大多数情况下，答案是肯定的。

# c# - C# ArgumentOutOfRangeException 参数智能感知

> ID：10576946
> 
> 赞同：2
> 
> 时间：2012-05-14T02:37:11.697
> 
> 标签：c#, parameters, resharper, intellisense, outofrangeexception

当我写作时：

```
throw new ArgumentOutOfRangeException("") 
```

将插入符号放在引号之间，然后按 Ctrl+Space 打开智能感知实际上会有所作为！

让我眼花缭乱的奇怪而美丽的事情是，它实际上建议了方法中的参数名称：

![截屏](../Images/cd26d25af4e0afc9a107b35f257bffe5.png)

有人可以向我解释如何实现吗？

如何在这样的级别添加自定义智能感知？

**更新：** 正如一些人指出的那样——这种智能感知不会正常弹出。

我正在使用[ReSharper 6.1](http://www.jetbrains.com/resharper/)，我可以控制是否在 ReSharper > Options > Intellisense > Autopopup > [C#] In string literals 中弹出智能感知。

不过，我想知道如何自己创建这样的智能感知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:16:49.333

我想你应该看看[这篇文章](http://confluence.jetbrains.net/display/ReSharper/Code+Completion)。此外，还有另一个与您的问题非常相似的[Stack Overflow 问题](https://stackoverflow.com/questions/9133887/how-to-extend-intellisense-items)，它也可能会给您一些提示。

我不知道如何具体实现，但我认为您甚至不需要使用反射，因为 Visual Studio 的“正常”IntelliSense 无需先构建项目即可工作。例如，只需向您的项目添加一个新类即可使其可用于 IntelliSense。我认为 ReSharper 使用了相同的机制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T03:23:57.770

Resharper 添加了许多有用的功能，这些功能远远超出了 Visual Studio 通过 Intellisense 为您提供的本机功能。例如，在 ASP.NET MVC 中，Resharper 会自动建议控制器操作名称：

```
// Resharper will give suggestions based on controller action names
@Html.Action("Show 
```

在您的问题中，Resharper 已将`ArgumentOutOfRangeException`构造函数的参数标记为需要是当前方法的参数名称。因此，当您输入字符串时，它会建议当前方法的参数名称。

像这样编写自己的智能感知需要付出很多努力。你基本上是在复制 Jetbrains 的人们花费大量资源来制作 Resharper 的内容。

如果你想插入 Resharper 的 API 来[创建你自己的插件](http://devlicio.us/blogs/hadi_hariri/archive/2010/01/12/writing-plug-ins-for-resharper-part-1-of-undefined.aspx)，它会花费更少的精力，但它仍然很乏味。

但是，如果您只想编写自己的方法，该方法需要一个字符串参数作为调用方法的参数之一的名称，Jetbrains 允许您使用它们的[External Annotations](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__External_Annotations.html)注释您的方法参数。在这种情况下，您将使用`InvokerParameterNameAttribute`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T03:14:01.010

似乎它与[Resharper 智能感知选项有关](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Parameter_Info.html)

怎么做
1.[使用 Resharper 插件](https://stackoverflow.com/questions/9133887/how-to-extend-intellisense-items)
2.[使用 CSharpIntellisense 库](http://csharpintellisense.codeplex.com/)
3.[优秀的博](http://blog.robertgreyling.com/2010/05/sparksense-getting-started-wheres.html)文和[另一个](http://www.hill30.com/MikeFeingoldBlog/index.php/2009/09/05/django-editor-in-vs-2010-part-7-code-completion-source/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T02:48:56.837

我看不到 Reflector 中的 ArgumentOutOfRangeException 或 ArgumentException 类型有什么特别之处，所以我猜这是在 Visual Studio 中硬编码的东西。猜测一下，我会尝试使用一个名为 String paramName 的 Exception 参数，继承自 ArgumentException 或某种组合。

编辑：
在 VS 2010 SP1 中，我也没有得到这个智能提示。我会浏览你的扩展，也许会寻找关于它们的文档。如果它们是开源的，您可能能够了解它是如何实现的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-06T02:57:09.857

公开课形式1

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    connect()

End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    OpenFileDialog1.Filter = "image file(*.jpg *.bmp *.png)|*.jpg; *.bmp; *.png| all files (*.*)|*.*"
    If OpenFileDialog1.ShowDialog <> Windows.Forms.DialogResult.Cancel Then
        PictureBox1.Image = Image.FromFile(OpenFileDialog1.FileName)
    End If
End Sub

Private Sub OpenFileDialog1_FileOk(ByVal sender As System.Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles OpenFileDialog1.FileOk
    If OpenFileDialog1.FileName <> Nothing Or OpenFileDialog1.FileName <> "" Then
        txtname.Text = OpenFileDialog1.FileName.Substring( _
        OpenFileDialog1.FileName.LastIndexOf("\") + 1, _
        (OpenFileDialog1.FileName.LastIndexOf(".", 0) - (OpenFileDialog1.FileName.LastIndexOf("\") + 1)))

    End If
End Sub 
```

结束类

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-14T02:41:15.557

很明显，您正在查看您刚刚在决定抛出它的条件中使用的变量。

# ios - 使用自定义 UITableViewCells 子类 UITableView

> ID：10576950
> 
> 赞同：1
> 
> 时间：2012-05-14T02:38:01.037
> 
> 标签：ios, ios5, uitableview

**我所拥有的**`UITableView`： 10 多个使用自定义的视图控制器`UITableViewCell`。每个视图控制器加载不同的数据并转发到不同的子页面，因此它们不能组合在一起。

更改的目的是在单个自定义子类中集中管理表格视图的外观`UITableView`。但是由于每个视图控制器加载的数据是不同的，我认为`UITableViewDataSource`和`UITableViewDelegate`必须分配给它原来的视图控制器类。

如何进行更改？还是我想错了方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:58:25.463

tableview 的数据源可以独立于它的委托。所以，将你所有的外观配置放在一个 UITableView 子类中，该子类实现了自己的委托方法，然后为每个负责数据源实现的 tableview 创建一个单独的 NSObject 子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:53:10.373

您可以为收集所有常见逻辑的所有视图控制器创建一个超类。

# php - 如何将 Doctrine 结果集转换为数组？

> ID：10576953
> 
> 赞同：1
> 
> 时间：2012-05-14T02:38:28.827
> 
> 标签：php, doctrine, doctrine-orm

我正在使用以下内容获得结果集：

```
$em = $this->getDoctrine()->getEntityManager();
  $test = $em->getRepository('RestWebServiceBundle:Test')->findall(); 
```

如何将 $test 转换为数组？

toArray 似乎不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T02:43:59.957

我相信有一种 Hydration 模式会生成数组而不是对象：

所以你使用：`Query::HYDRATE_ARRAY`假设 findall 方法没有被覆盖。

```
$test = $em->getRepository('RestWebServiceBundle:Test')->findall(Query::HYDRATE_ARRAY); 
```

如果它被覆盖，您可以将其用作`getResult`调用的参数。

Doctrine2 手册中的示例：

```
$users = $query->getResult(Query::HYDRATE_ARRAY); 
```

见这里： [http ://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#array-hydration](http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#array-hydration)

# java - `语法错误，插入“AssignmentOperator Expression”以完成表达式`是什么意思？

> ID：10576961
> 
> 赞同：1
> 
> 时间：2012-05-14T02:40:13.073
> 
> 标签：java, eclipse

我正在自学 Java，当我在 Eclipse 的剪贴簿中运行代码时遇到此错误：

```
Syntax error, insert "AssignmentOperator Expression" to complete Expression 
```

这是我的剪贴簿：

```
Sorter sorter = new Sorter();
int[] nums = {5, 6, 7, 8, 1, 2, 3, 4};
sorter.selectionSort(nums);
nums; 
```

这是排序器类。

```
public class Sorter {
    public void selectionSort(int[] numbers) {
        for (int i = 0; i < numbers.length - 1; i++) {
            int leastPosition = i;
            for (int j = i + 1; j < numbers.length; j++) {
                if (numbers[j] < numbers[leastPosition])
                    leastPosition = j;
            }
            int temp = numbers[leastPosition];
            numbers[leastPosition] = numbers[i];
            numbers[i] = temp;
        }
    }
} 
```

什么是错？我在任何地方都找不到丢失的赋值运算符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T02:48:50.533

我认为问题出在代码的最后一行：

```
nums; 
```

这是一个表达式，但不是一个语句；因此投诉。如果要检查 的内容`nums`，可以执行以下操作：

```
System.out.println(Arrays.toString(nums)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T05:23:17.290

如果要从数组中打印数字，请使用代码

```
for(int (i=0; i<nums.length;i++){
System.out.println(num[i]);
} 
```

如果您想正确执行选择排序，请参考[选择排序](http://tutorialdata.com/example/Algorithm/SelectionSortExample.html)

# memory - 为什么内存地址在 MIPS 中增加 4？

> ID：10576963
> 
> 赞同：9
> 
> 时间：2012-05-14T02:40:59.170
> 
> 标签：memory, mips

如果某些内容存储在 0x1001 0000 下一个内容将存储在 0x1001 0004。如果我是正确的，则 32 位架构中的内存块每个都是 32 位。那么 0x1001 0002 会指向 32 位的后半部分吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T12:33:18.083

首先，MIPS 体系结构中的内存地址不会以 4 递增。MIPS 使用字节寻址，因此您可以从内存中寻址任何字节（参见例如读取单个字节`lb`和读取半字）。`lbu``lh``lhu`

事实是，如果您读取 32 位长度（4 个字节`lw`）的字，则两个连续字将彼此相距 4 个字节。在这种情况下，您将在第一个字的地址上加 4 以获得下一个字的地址。

除此之外，如果您阅读单词，则必须以 4 的倍数对齐它们，否则您将获得对齐异常。

在您的示例中，如果第一个单词存储在 0x10010000 中，那么下一个单词将存储在 0x10010004 中，当然前半部分/后半部分将存储在 0x1001000 和 0x1001002 中（排序将取决于架构的[字节序](http://en.wikipedia.org/wiki/Endianness)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:48:05.510

您似乎已经自己回答了这个问题！32 位构成 4 个字节，因此如果您要推入堆栈，其中所有元素都按相同大小推入，则每个下一项将比下一项提前（或之前）4 个字节。

# javascript - 从 iFrame 调用主页功能？

> ID：10576964
> 
> 赞同：1
> 
> 时间：2012-05-14T02:40:59.957
> 
> 标签：javascript, function, iframe

是的，我已经看到了这个问题，但我仍然感到困惑： [如何从主窗口调用 JavaScript](https://stackoverflow.com/questions/3370962/how-to-call-javascript-in-main-window-from-iframe)

我想调用一个函数，该函数在 iframe 的父框架上使用 jQuery 切换对象。具体怎么做？

window.parent.[...?]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:46:17.850

在主窗口中：

```
function toggleMe() {
    $('#myid').toggle();
} 
```

在子框架中：

```
window.parent.toggleMe(); 
```

# memory-management - 如何更改 Tomcat6（MacPorts 安装）的内存限制？（-Xmx 忽略？？？）

> ID：10576973
> 
> 赞同：0
> 
> 时间：2012-05-14T02:42:23.537
> 
> 标签：memory-management, tomcat6, macports, probe

我尝试使用 catalina.sh 中的 -Xmx 标志更改内存限制，就像我过去在 Linux 安装中使用的那样，但是当我访问 psi-probe（以前是 lambda 探针）时，它声称我有一个限制1.78Gb。我尝试将最大限制设置为 4096m 和 6144m，但没有任何效果。我运行它的机器有足够的内存来支持这些配置，但限制仍然报告为 1.78Gb。

我有一个特别繁重的应用程序，它在大约 1.6Gb 处出现堆空间错误。

关于为什么忽略此配置或可能在哪里覆盖它的任何建议？

**编辑：**

setenv.sh 的内容是：

```
#!/bin/sh
# 
# setenv.sh
#
# You may edit this script to set defaults for such variables as JAVA_HOME.
#
# For Apple Java, the $JAVA_HOME is not well respected by the JNI launching code
# in jsvc. On Apple Java systems, you are better off setting JAVA_JVM_VERSION
# to the proper java name, such as 1.4, 1.5, or CurrentJDK, and let JAVA_HOME
# be calculated from that.
#

# First source the conf/setenv.local file to allow user to configure environment
# in an even more minimal fashion.
if [ -r "$CATALINA_HOME/conf/setenv.local" ]; then
    . "$CATALINA_HOME/conf/setenv.local"
fi

# Attempt to set JAVA_HOME if it's not already set
if [ -z "$JAVA_HOME" ]; then

    # Set JAVA_JVM_VERSION and JAVA_HOME for Darwin
    if [ `uname -s` = "Darwin" ]; then

        # Look for a java version specified by JAVA_JVM_VERSION, falling back to current version
        # Set JAVA_HOME to reflect the version
        for jversion in $JAVA_JVM_VERSION CurrentJDK ; do
            jhome="/System/Library/Frameworks/JavaVM.framework/Versions/${jversion}/Home"
            if [ -z "$JAVA_HOME" -a -d "${jhome}" ]; then
                # Get the actual version that any symlink points to, since
                # jni doesn't like JAVA_JVM_VERSION set to CurrentJDK
                saved=`pwd`
                cd "/System/Library/Frameworks/JavaVM.framework/Versions/${jversion}"
                actualvers=$(basename $(pwd -P))
                cd $saved

                export JAVA_JVM_VERSION=${actualvers}
                export JAVA_HOME=${jhome}
            fi
        done

    fi

fi 
```

setenv.local：

```
#!/bin/sh 
#
# setenv.local
#
# This script, if present, is executed by tomcatctl through setenv.sh
# in order to set up any environment prior to executation of tomcat.
#

# For Apple Java, JAVA_JVM_VERSION may be used to specify a particular  
# java version to run. It should be something like 1.4, 1.5, or CurrentJDK.
#export JAVA_JVM_VERSION=1.5 
```

catalina.sh（部分，文件很长）：

```
#JAVA_OPTS="-Xmx4096m -Xms4096m -XX:PermSize=6144m -XX:MaxPermSize=6144m $JAVA_OPTS"
CATALINA_OPTS="-Xmx4096m -Xms4096m -XX:PermSize=6144m -XX:MaxPermSize=6144m $CATALINA_OPTS" 
```

# php - $_POST[] 产生未定义的索引：

> ID：10576974
> 
> 赞同：0
> 
> 时间：2012-05-14T02:42:35.373
> 
> 标签：php, forms, post, input

```
function checkInputs()
{
    $fname = $_POST["fname"];
    $lname = $_POST['lname'];
    $email = $_POST['email'];
        ...
}
<form method = 'POST' action = 'index.php'>
    First Name:<input type = 'text' name = 'fname'>
    Last Name:<input type = 'text'name = 'lname'>
    Email:<input type = 'text' name = 'email'>
</form> 
```

在单击按钮之前不会调用该函数。

不管我是否尝试在页面加载后放置 php 标签，并且无论它仍然会产生错误 'Undefined index : ... at Line

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:52:03.637

您需要先检查该值是否存在，然后再尝试使用它

如果有人将 fname 字段留空并提交了您的表单，那么它将不会在 $_POST var 中设置

```
$fname = isset($_POST["fname"]) ? $_POST["fname"] : NULL;

if ($fname == NULL) {
   echo "First name is required";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:45:38.930

如果您没有将该代码包装在适当的方法检查中，它将在每次加载页面时运行，无论是否已提交表单，例如

```
<?
function checkInputs() { blah blah blah }

checkInputs();
?>

<form ...>
...
</form> 
```

**将在表单加载和**提交时执行您的 checkInput 函数。当表单首次通过 get 加载时，$_POST 将为空（因为该页面是通过 GET 调用请求的），您将收到这些错误。

但如果你有：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    checkInputs();
} 
```

那么您的检查功能将仅在通过 POST 请求调用脚本时运行。

# php - 检索一系列 $_POST 键的值

> ID：10576976
> 
> 赞同：0
> 
> 时间：2012-05-14T02:42:39.163
> 
> 标签：php, arrays, post

假设我有一系列`$_POST`值，它们的结构都像`$_POST['shop_1']`, `$_POST['shop_2']`, `$_POST['shop_2']`(....)。

我需要将它们的所有值加入一个逗号分隔的字符串中，所以首先我必须识别它们。最好的方法是什么？

代码可能类似于：

```
foreach ( ??array_identify??("shop_*",$_POST) as $shop )
{
  $string .= $shop.",";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:53:58.127

尝试[preg_grep](http://php.net/preg_grep)：

```
$keys = preg_grep('/^shop_\d+$/', array_keys($_POST));
foreach($keys as $key) {
    $val = $_POST[$key];
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:43:48.710

用于`implode()`将数组值加入字符串：

```
$string = implode(',', $_POST); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T02:56:27.680

尝试这样的事情：

```
implode(',', array_keys($_POST)); 
```

希望能帮助到你。

# php - 写入文件 PHP

> ID：10576977
> 
> 赞同：-1
> 
> 时间：2012-05-14T02:43:17.457
> 
> 标签：php, file, buffer, chmod

我有以下代码：

```
$cachefile = "http://www.DOMAIN.com/users/{$user}.php"; 
$fp = fopen($cachefile, 'w'); // open the cache file "cache/home.html" for writing 
fwrite($fp, ob_get_contents()); // save the contents of output buffer to the file 
fclose($fp); // close the file 
ob_end_clean(); // Send the output to the browser

chmod($cachefile, 0644); 
```

文件路径无效，因为它会产生以下错误：`Warning: chmod() [function.chmod]: No such file or directory in ...`

但是，此代码确实：

```
$cachefile = "{$user}.php"; 
$fp = fopen($cachefile, 'w'); // open the cache file "cache/home.html" for writing 
fwrite($fp, ob_get_contents()); // save the contents of output buffer to the file 
fclose($fp); // close the file 
ob_end_clean(); // Send the output to the browser

chmod($cachefile, 0644); 
```

该文件（使用第二个代码块）创建在与创建它的脚本相同的文件夹中。但是，我想将它保存到第一个块的位置。我在 php.net 上查找`fopen`并没有看到我做错了什么，但显然我是。

编辑（评论回复）：

我也试`$cachefile = $_SERVER["DOCUMENT_ROOT"] . "/users/{$user}.php"`了也没用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:46:11.033

您不能使用`fwrite()`. 如果您要写入自己服务器上的文件，请使用相对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T02:45:58.863

您需要使用服务器上文件的完整路径，而不是网址：

```
$cachefile = "/var/www/path/to/users/{$user}.php"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T02:48:26.710

你不能打开远程文件，你只能编辑本地文件系统上的文件，如果文件在文件系统上，那么你必须使用相对路径，

也可以不使用 fopen，而只使用`file_get_contents()`and `file_put_contents()`。

# php - 使用 PHP 调整大小时继承图像属性

> ID：10576994
> 
> 赞同：0
> 
> 时间：2012-05-14T02:46:39.613
> 
> 标签：php, mysql

我正在尝试使用 PHP 调整图像的大小，但我不知道如何让它正确命名新图像。当我查看数据库中的图像表时，有一个带有 ID 但没有名称的条目。

如果您还有什么需要看的，请告诉我。截至目前，我假设我没有正确的 imagecopyresampled 输入。当我尝试回显 $formattedImage 的名称时，没有任何反应。如果我在使用 imagejpeg 之前将其备份一步并回显 $blankImage 的名称，那么也不会发生任何事情。

这是我的代码。

```
 function chgSize($image, $width, $height){
    $name = $image["name"]; //this is displaying the file name correctly
    $temp = $image["tmp_name"];
    $imgContents = imagecreatefromstring(file_get_contents($temp));
    $blankImage = imagecreatetruecolor(100,100);
       if(imagecopyresampled($blankImage, $imgContents, 0, 0, 0, 0, 100, 100, $width, $height)){ 
           $formattedImage = imagejpeg($blankImage, $name);
           $this->saveImage($formattedImage);
       }
 }

function saveImage($image){
        $newName = $image["name"];
        move_uploaded_file($image['tmp_name'], "/Applications/XAMPP/xamppfiles/htdocs/images/" . $newName);
        mysql_query("insert into images VALUES('null','$newName')");
        echo "Stored in: " . "/Applications/XAMPP/xamppfiles/htdocs/images/" . $newName;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:50:22.357

仅供参考：`'null'`不是**空**值。这是一个包含世界“null”的字符串。要插入实际的 sql null，必须在不带引号的情况下指定单词 null，例如裸`null`.

您的代码也容易受到 SQL 注入的影响，而且您的 move_uploaded_file 调用正在使用用户提供的数据作为目标文件名，因此您允许远程用户在服务器上的任何位置指定任何文件以进行涂鸦。

如果上传成功或失败，您显然也根本没有检查过，并且正在到处进行，就好像它已经完成了一样。不好。您的插入查询同上。假设查询成功是您可能做的最糟糕的事情。查询只有一种成功的方法，而失败的方法有无数种。

# javascript - News Ticker - 过早重启

> ID：10576995
> 
> 赞同：2
> 
> 时间：2012-05-14T02:46:40.783
> 
> 标签：javascript, jquery, html, marquee, ticker

我正试图让这个新闻自动收报机工作。出于某种原因，它会在第二个列表项之后重新启动，这不是我想要的 - 我希望它在列表项中旋转直到最后。这个脚本有什么问题？

这是一个[JSFiddle](http://jsfiddle.net/cbKHD/20/)

**HTML**

```
<h1>This runs differently than the ticker for some reason. It's highly annoying in my personal opinion.</h1>
<div id="ticker">    
    <div class="event">test1</div>
    <div class="event">test2</div>
    <div class="event">test3</div>
    <div class="event">test4</div>
</div>​ 
```

**CSS**

```
.event{float: left; width: 100px;}​ 
```

**Javascript/Jquery**

```
(function($) {
        $.fn.textWidth = function(){
             var calc = '<span style="display:none">' + $(this).text() + '</span>';
             $('body').append(calc);
             var width = $('body').find('span:last').width();
             $('body').find('span:last').remove();
            return width;
        };

        $.fn.marquee = function(args) {
            var that = $(this);
            var textWidth = that.textWidth(),
                offset = that.width(),
                width = offset,
                css = {
                    'text-indent' : that.css('text-indent'),
                    'overflow' : that.css('overflow'), 
                    'white-space' : that.css('white-space')
                },
                marqueeCss = {
                    'text-indent' : width,
                    'overflow' : 'hidden',
                    'white-space' : 'nowrap'
                },
                args = $.extend(true, { count: -1, speed: 1e1, leftToRight: false }, args),
                i = 0,
                stop = textWidth*-1,
                dfd = $.Deferred();

            function go() {
                if (that.data('isStopped') != 1)
                {
                if(!that.length) return dfd.reject();
                if(width == stop) {
                    i++;
                    if(i == args.count) {
                        that.css(css);
                        return dfd.resolve();
                    }
                    if(args.leftToRight) {
                        width = textWidth*-1;
                    } else {
                        width = offset;
                    }
                }
                that.css('text-indent', width + 'px');
                if(args.leftToRight) {
                    width++;
                } else {
                    width--;
                }
            }

                setTimeout(go, 10);
            };
            if(args.leftToRight) {
                width = textWidth*-1;
                width++;
                stop = offset;
            } else {
                width--;            
            }
            that.css(marqueeCss);
            that.data('isStopped', 0);
            that.bind('mouseover', function() { $(this).data('isStopped', 1); }).bind('mouseout', function() { $(this).data('isStopped', 0); });
            go();
            return dfd.promise();
        };        
    })(jQuery);
        $('h1').marquee();
        $('#ticker').marquee();​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:38:09.570

只需将其放入容器 div

```
<div id="ticker-container">
<h1>This runs differently than the ticker for some reason. It's highly annoying in my personal opinion.</h1> <div id="ticker">    
    <div class="event">test1</div>
    <div class="event">test2</div>
    <div class="event">test3</div>
    <div class="event">test4</div>
</div>
</div>

$('#ticker-container').marquee(); 
```

# opengl - 构建后如何运行 Android 模拟器？

> ID：10576996
> 
> 赞同：4
> 
> 时间：2012-05-14T02:46:53.090
> 
> 标签：opengl, android-emulator, ubuntu-10.04, android-build

所以我已经成功下载源代码，构建成功，并且可以成功运行模拟器。但是，它永远不会启动到实际图像中。相反，我查看终端，它给了我以下错误。

```
OpenGL Warning: XGetVisualInfo returned 0 visuals for 0x2deae10
OpenGL Warning: Retry with 0x105 returned 1 visuals
Failed to create Context 0x3005
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
destroyOpenGLSubwindow not implemented for separate renderer process !!!
createOpenGLSubwindow not implemented for separate renderer process !!!
repaintOpenGLDisplay not implemented for separate renderer process !!!
createOpenGLSubwindow not implemented for separate renderer process !!!
repaintOpenGLDisplay not implemented for separate renderer process !!! 
```

我在 Virtual Box 内运行 Ubuntu 10.04。启用 3D 加速并且至少 16GB 的内存专用于盒子。

基本上，模拟器只是在那里坐了一会儿，然后在模拟器窗口周围画了一个红色矩形。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T06:42:40.327

从[使用 Android 模拟器|配置 VM 加速](http://developer.android.com/guide/developing/devices/emulator.html#accel-vm)：

> 不在 VM 内 - 您不能在另一个虚拟机（例如 VirtualBox 或 VMWare 托管的虚拟机）内运行 VM 加速模拟器。您必须直接在系统硬件上运行模拟器。

所以禁用 3D 加速，它应该可以工作。

另一种可能的选择：[设置端口转发](https://stackoverflow.com/questions/2604727/how-can-i-connect-to-android-with-adb-over-tcp)。您应该能够在主机系统上运行 Android VM 并设置监听其 adb 服务器实例以监听 TCP 连接请求。在 Ubuntu 实例中，告诉 adb 连接到特定地址。您需要以某种方式设置从它到其主机的转发。如果可行，您可以使用加速的 Android VM 实例。

# vb.net - 自定义列表框项目

> ID：10576997
> 
> 赞同：0
> 
> 时间：2012-05-14T02:47:01.937
> 
> 标签：vb.net, windows-phone-7

我刚刚开始了我的 WP7 编程之旅。我需要将 2 个文本行作为一个项目添加到列表框中。

我有哪些选择？

我阅读了有关用户控制和其他一些内容的信息。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:41:38.830

最简单的方法是基于默认项目类型中的代码。

创建一个新的“DataBound”应用程序，您会看到它`DataTemplate`使用`ListBox.Item`.

**更新**
要检索选定的项目，请将其数据上下文转换为视图模型上的任何对象。

# c# - Image.Save 异常“GDI+ 中发生一般错误。” 保存到 MemoryStream 时

> ID：10576998
> 
> 赞同：3
> 
> 时间：2012-05-14T02:47:05.010
> 
> 标签：c#, image, gdi+

我有一个服务器-客户端应用程序，我想从服务器获取屏幕截图，但是在线上
`bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Png);`
我得到了这个异常：`A generic error occurred in GDI+.`

```
 private Socket ScreenSocket;
    private MemoryStream ms;
    public void ConnectScreenShot(IPEndPoint ep)
    {
        if (ScreenSocket != null)
        {
            ScreenSocket.Dispose();
            ScreenSocket = null;
        }
        if (ms != null)
        {
            ms.Dispose();
            ms = null;
        }
        ScreenSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        ScreenSocket.Connect(ep);
        ms = new MemoryStream();
        Rectangle bounds = Screen.GetBounds(Point.Empty);
        using (Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height))
        {
            using (Graphics g = Graphics.FromImage(bitmap))
            {
                g.CopyFromScreen(Point.Empty, Point.Empty, bitmap.Size);
            }
            bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        }
    } 
```

为什么会发生这种情况，我将如何解决？

**更新：**当我使用`ImageFormat.Jpeg`而不是时它可以工作`ImageFormat.Png`，但我仍然需要 PNG 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:28:18.907

你说：

> 我想从服务器获取屏幕截图

与 GDI+ 相关的错误表明运行此代码的上下文可能是服务上下文（例如 IIS），而不是桌面。那是对的吗？如果是这样，您希望在屏幕截图中返回什么？

作为记录，以下（最小）代码可以正常工作：

```
 var ms = new MemoryStream();
    Rectangle bounds = Screen.GetBounds(Point.Empty);
    using (Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height))
    {
        using (Graphics g = Graphics.FromImage(bitmap))
        {
            g.CopyFromScreen(Point.Empty, Point.Empty, bitmap.Size);
        }
        bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
    } 
```

两者都`bitmap`包含`ms`预期的数据。因此，我认为您需要提供有关此代码在何处以及以何种方式运行的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:34:10.763

它以这种方式与我一起工作：

*   当客户想要接收屏幕截图时，您需要在传输开始之前知道图像大小。
    调用`GetScreenShotSize()`以获取图像的大小。

*   获得尺寸后，调用`GetScreenShot()`以接收图像数据。

我用过`using (MemoryStream ms = new MemoryStream())`，所以现在 PNG 格式正在工作。

```
 private Image img = null;
    public long GetScreenShotSize()
    {
        Rectangle bounds = Screen.GetBounds(Point.Empty);
        using (Bitmap bmp = new Bitmap(bounds.Width, bounds.Height))
        {
            using (Graphics g = Graphics.FromImage(bmp))
            {
                g.CopyFromScreen(Point.Empty, Point.Empty, bounds.Size);
            }
            using (MemoryStream ms = new MemoryStream())
            {
                bmp.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
                img = Image.FromStream(ms);
                return ms.Length;
            }
        }
    }
    public void GetScreenShot(IPEndPoint ep)
    {
        using (Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp))
        {
            socket.Connect(ep);
            using (MemoryStream ms = new MemoryStream())
            {
                img.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
                socket.Send(ms.ToArray(), SocketFlags.None);
            }
            img.Dispose();
            img = null;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T06:53:58.323

对我来说，我使用的是`Image.Save(Stream, ImageCodecInfo, EncoderParameters)`，显然这导致了臭名昭著的`A generic error occurred in GDI+`错误。

我试图用`EncoderParameter`100% 的质量保存 jpeg。这在“我的机器”（doh！）上完美运行，而不是在生产上。

当我`Image.Save(Stream, ImageFormat)`改为使用时，错误消失了！所以像个白痴一样，我继续使用后者，尽管它将它们保存为默认质量，我认为它只有 50%。

希望此信息对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T14:00:12.583

我知道这是一篇旧帖子，但我也想添加此信息，以防像我这样的人将来遇到此问题。

我无法保存 .PNG 图像，因为 IIS 应用程序池帐户无权访问此密钥。

HKEY_CLASSES_ROOT\CLSID{FAE3D380-FEA4-4623-8C75-C6B61110B681}

当您使用 png 图形时，这是必需的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-03-17T21:23:54.867

```
abrirConexion();
cmd = new SqlCommand(" INSERT INTO [SICRE_BI].[Credito_CCSS].[bi_img](Descripcion,img) VALUES (@nom_img,@img)",cn);                                
cmd.Parameters.Add("@Descripcion", SqlDbType.NChar);
cmd.Parameters.Add("@img", SqlDbType.Image);

cmd.Parameters["@Descripcion"].Value = descripcion;

System.IO.MemoryStream ms = new System.IO.MemoryStream();

pbImagen.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);//Aqui se me cae.Aqui se me cae.Aqui .

cmd.Parameters["@img"].Value = ms.GetBuffer();    //ms.GetBuffer();

cmd.ExecuteNonQuery();
return true; 
```

# java - 如何使用 mapreduce 合并一些文件？

> ID：10576999
> 
> 赞同：1
> 
> 时间：2012-05-14T02:47:06.243
> 
> 标签：java, file-io, merge, hadoop, mapreduce

我将使用 map/reduce 合并一些在同一目录下的小文件。我看到有人说使用流式传输将非常简单，但现在我只能使用 JAVA map/reduce。现在我的解决方案是逐条读取文件并将它们写入同一个输出文件。但我认为它效率低下。我可以使用整个文件的内容作为映射器的值，这样我就可以提高 I/O 效率？感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:42:40.683

这样做的“低效”方法是只对文件进行分类并将其写回：

```
hadoop fs -cat /path/to/files/*.txt | hadoop fs -put - /output/path/blobbed.txt 
```

您可能会发现这适用于更大的数据集。