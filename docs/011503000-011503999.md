# StackOverflow 问答 11503000-11503999

# javascript - J-Query 打印机（jQuery.printElement）无法在 Opera 中打印多个页面

> ID：11503003
> 
> 赞同：4
> 
> 时间：2012-07-16T11:07:57.753
> 
> 标签：javascript, jquery, jquery-plugins, printing, opera

我正在使用 `jQuery.printElement`插件进行打印。

javascript如下：

```
<script type="text/javascript">
       $(document).ready(function() {
         $("#button").click(function() {
             printElement({ leaveOpen: true, printMode: 'popup' });
         });

     });
 function printElement(options){
     $('#printablediv').printElement(options);
 }

</script> 
```

* * *

html表单输入如下：

```
<input type="button" value="Print" id="button" /> 
```

* * *

html 可打印 div 如下：

```
<div id = "printablediv"> Some printable stuffs here </div> 
```

打印机在所有浏览器中都能正常工作，但 Opera 无法打印预定义的所有内容 `div`。它仅打印浏览器窗口覆盖/显示的第一页/顶部`div`的内容，尽管该“div”的所有内容都显示在其打印预览窗口中。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:33:33.513

学习者，据我所知，已经达到了预期的结果，不确定是新版本的 Opera 还是插件本身。

如果您仍有问题，我们都可以从所用版本的详细信息中获益。

# javascript - 用于 CSV 导出的 SlickGrid 函数？

> ID：11503007
> 
> 赞同：5
> 
> 时间：2012-07-16T11:08:23.103
> 
> 标签：javascript, csv, slickgrid

在 Django 应用程序中，我使用 SlickGrid 将一些 XHR 数据绑定到客户端电子表格：

```
 var grid;
 var review_url = '/api/reviews/?t=' + current_tcode;
 $.getJSON(review_url, function(data) {
   grid = new Slick.Grid("#myGrid", data, columns, options);
 }); 
```

我还想为用户提供将数据下载为 CSV 文件的选项。这样做的最佳方法是什么？

1.  只需链接到我自己渲染的 CSV 文件（使用 Piston，我已经将其用于 API）。
2.  使用 SlickGrid 巧妙地在客户端输出 CSV 数据。
3.  别的东西。

SlickGrid 感觉功能齐全，它可能有内置的东西来输出 CSV，但我在快速搜索中找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-15T05:43:55.150

要导出到 CSV，您可以使用此功能：

```
$("#exporticon").click(function() {
    var processRow = function (row) {
        var finalVal = '';
        for (var j = 0; j < row.length; j++) {
            var innerValue = row[j] === null ? '' : row[j].toString();
            if (row[j] instanceof Date) {
                innerValue = row[j].toLocaleString();
            };
            var result = innerValue.replace(/"/g, '""');
            if (result.search(/("|,|;|\n)/g) >= 0)
                result = '"' + result + '"';
            if (j > 0)
                finalVal += ',';
                finalVal += result;
        }
        return finalVal + '\n';
    };

    var csvFile = '';
    var rows = [];
    var colname = [];
    for (var j = 0, len = grid.getColumns().length; j < len; j++) {
        colname.push(grid.getColumns()[j].name);
    }
    rows.push(colname);
    var singlerow = [];
    for (var i = 0, l = dataView.getLength(); i < l; i++) {
        for (var j = 0, len = grid.getColumns().length; j < len; j++) {
            singlerow.push(grid.getDataItem(i)[grid.getColumns()[j].field]);
        }
        rows.push(singlerow);
        singlerow = [];
    }

    for (var i = 0; i < rows.length; i++) {
        csvFile += processRow(rows[i]);
    }

    var blob = new Blob([csvFile], { type: 'text/csv;charset=utf-8;' });
    if (navigator.msSaveBlob) { // IE 10+
        navigator.msSaveBlob(blob, "filename.csv");
    } else {
        var link = document.createElement("a");
        if (link.download !== undefined) { // feature detection
            // Browsers that support HTML5 download attribute
            var url = URL.createObjectURL(blob);
            link.setAttribute("href", url);
            link.setAttribute("download", "filename.csv");
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T02:19:18.207

你可能想看看这个：[CellExternalCopyManager 是一个 SlickGrid 插件，用于从 MS Excel 复制/粘贴数据（或兼容）](http://labs.nereo.fr/slick.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T12:05:36.320

SlickGrid 纯粹是一个可视化组件。向它提供数据，它会将其作为网格呈现给用户。哎呀，它甚至还不够聪明，无法对数据进行排序。

因此，它没有以任何方式转换数据的功能。因此，如果您想以 CSV 格式获取网格数据，您有两种选择：

`data`选项 1\. 通过直接从底层数组生成 CSV 客户端来呈现它。由于您已经以 json 格式返回数据，因此您应该可以使用类似的[东西轻松完成此](https://stackoverflow.com/questions/4130849/convert-json-format-to-csv-format-for-ms-excel)操作。

-或者-

选项 2\. 呈现 CSV 服务器端并使其可以通过 url 访问，可以通过将格式化参数添加到您的`review_url`.

我不知道网格中的任何功能可以帮助您，但也许有人会纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T11:33:47.100

在我看来，如果您只想要 CSV - 在服务器上呈现它。
此外，您可能会发现[这个 railscasts 插曲](http://railscasts.com/episodes/362-exporting-csv-and-excel)很有趣 - 只找到适合 Django 执行此操作的工具。

# ios - UiAlertView 和 UIProgressView 用于在本地复制文件

> ID：11503008
> 
> 赞同：1
> 
> 时间：2012-07-16T11:08:23.090
> 
> 标签：ios, uialertview, uiprogressview

我一直试图让这个工作一天，但我仍然失败。安装应用程序时，我想将一些文件从捆绑包中复制到我的应用程序的 Documents 文件夹中，但这会使用户等待很长时间，应用程序显示启动画面。

所以我想我会用 UIProgressView 作为一个子视图创建一个初始 UIAlertView，每次将文件复制到文档文件夹时都会更新它。但是，警报显示并且进度条永远不会更新。我的逻辑是：

*   将 UIProgressView 和 UIAlertView 设置为我的 ViewController 的实例变量。
*   在 ViewDidLoad 中，显示警报并设置委托
*   在`- (void)didPresentAlertView:(UIAlertView *)alertView`执行复制文件并更新 UI 的 for 循环中。代码是：

    ```
    - (void)didPresentAlertView:(UIAlertView *)alertView{
        NSString *src, *path;
        src = // path to the Bundle folder where the docs are stored //
        NSArray *docs = [[NSFileManager defaultManager]contentsOfDirectoryAtPath:src error:nil];

        float total = (float)[docs count];
        float index = 1;

        for (NSString *filename in docs){
            path = [src stringByAppendingPathComponent:filename];
            if ([[NSFileManager defaultManager]fileExistsAtPath:path]) {
                ... // Copy files into documents folder
                [self performSelectorOnMainThread:@selector(changeUI:) withObject:[NSNumber numberWithFloat:index/total] waitUntilDone:YES];                
                index++;
            }
        }
    [alertView dismissWithClickedButtonIndex:-1 animated:YES];
    } 
    ```

ChangeUI 的代码是

```
- (void) changeUI: (NSNumber*)value{
    NSLog(@"change ui %f", value.floatValue);
    [progressBar setProgress:value.floatValue];
} 
```

然而，这只是将 UI 从 0 更新到 1，尽管 NSLog 会打印所有中间值。这里有谁知道我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:23:22.770

问题是您的循环位于主线程上，因此 UI 直到最后都没有机会更新。尝试使用 GCD 在后台线程上进行工作：

```
dispatch_async(DISPATCH_QUEUE_PRIORITY_DEFAULT, ^
    {
        NSString *src, *path;
        src = // path to the Bundle folder where the docs are stored //
        NSArray *docs = [[NSFileManager defaultManager]contentsOfDirectoryAtPath:src error:nil];

        float total = (float)[docs count];
        float index = 1;

        for (NSString *filename in docs){
            path = [src stringByAppendingPathComponent:filename];
            if ([[NSFileManager defaultManager]fileExistsAtPath:path]) {
                ... // Copy files into documents folder
                dispatch_async(dispatch_get_main_queue(), ^{ [self changeUI:[NSNumber numberWithFloat:index/total]]; } );

                index++;
            }
        }
        dispatch_async(dispatch_get_main_queue(), ^{ [alertView dismissWithClickedButtonIndex:-1 animated:YES]; } );
    } ); 
```

# c# - 在 EF 中的 DBSet 中设置返回对象的条件

> ID：11503009
> 
> 赞同：2
> 
> 时间：2012-07-16T11:08:26.097
> 
> 标签：c#, entity-framework, ef-code-first

> **可能重复：**
> [DbContext 可以强制执行过滤策略吗？](https://stackoverflow.com/questions/5676280/can-a-dbcontext-enforce-a-filter-policy)

看看这段代码，这是我的实体之一：

```
class User
{
    ...
    ...
    ...
    public bool IsDeleted { get ; set; }

} 
```

当我想删除用户时，我将 IsDeleted 属性设置为 true 并更新它。这是我的 DbContext ：

```
class DataContext : DbContext
{
    ...
    ...
    ...
    public DbSet<User> Users { get; set; }

} 
```

现在问题来了：

**当我只使用 new DataContext().Users 时，如何更改我的 DbContext 以返回未删除的对象**

抱歉我的语法不好。我是英语新手。更多详情评论我

**UPDATE1**：我将 DBContext 更改为此代码，但出现错误

```
public DbSet<DT.DTO.User> Users
{
    get
    {
        return this.Set<User>().Where(rec => !rec.IsDeleted)
    }
    set;
 } 
```

错误：无法将类型“System.Linq.IQueryable”隐式转换为“System.Data.Entity.DbSet”。存在显式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:39:01.807

我建议使用某种服务类或存储库作为 DataContext 之上的层。在这里的另一个线程中解释了类似的东西：[https ://stackoverflow.com/a/5680618/40853](https://stackoverflow.com/a/5680618/40853)

该服务应该处理数据过滤或分页之类的东西 - 实现在很大程度上取决于您想要实现的目标。

这种实现的一个目标可能是将对数据库访问层（在您的情况下为 EF）的依赖减少到专门为数据库访问编写的代码之外的最低限度。

像下面这样的东西可以抽象出你如何处理数据库中的数据。

```
public class DatabaseService : IDatabaseService
{
    public IEnumerable<User>  GetUsers(someconditions)
    {
        // someconditions can be any kind of condition to include in the query
        using (var db = new DataContext())
        {
            return db.Users.Where(rec => !rec.IsDeleted
            && someconditions).ToList();
        }
    }

    [...] implement stuff like DeleteUser(guid), UpdateUser(User user))

} 
```

# javascript - 使用 jQuery 翻转图像

> ID：11503010
> 
> 赞同：1
> 
> 时间：2012-07-16T11:08:29.540
> 
> 标签：javascript, jquery, css, flip

在你把它标记为一个可怕的问题之前，请听我说，我知道有[很多](https://www.google.co.uk/search?q=jQuery%20rotating&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a#hl=en&client=firefox-a&rls=org.mozilla%3aen-US%3aofficial&sclient=psy-ab&q=jQuery%20flipping%20an%20image&oq=jQuery%20flipping%20an%20image&gs_l=serp.3..0i30.269775.273619.1.273750.24.13.0.10.10.0.290.1618.9j2j2.13.0...0.0...1c.mpvwQ7RKh9c&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=19e37c0ddddf3693&biw=1920&bih=950)jQuery 插件可以翻转图像/内容。然而，我的问题涉及一些更困难的事情。

我的问题是客户希望他们的徽标以缓慢的速度不断翻转（这不是什么大问题），但是当徽标翻转到一半时，他们希望徽标看起来有点“3D”，而不是宽度为 0 的图像“所以当你正面看它时，它实际上有一个宽度。

我用谷歌搜索了一下，但似乎真的找不到可以实现这一点的插件，这甚至可能吗？

如果您在想象我说翻转时的意思时遇到问题，请参阅此[演示](http://demo.tutorialzine.com/2010/03/sponsor-wall-flip-jquery-css/demo.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:52:11.857

最后我们放弃了 JavaScript 解决方案（几乎不可能有一个合理的跨浏览器解决方案）

所以我们最终使用[jquery reel](http://jquery.vostrel.cz/reel)来完成这个（为什么我们之前没有想到精灵，我永远不会知道！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:42:28.710

我找到了一些 3D 翻转图像示例，所以请尝试一下。

[http://jquery.vostrel.cz/reel](http://jquery.vostrel.cz/reel)

[http://www.360-javascriptviewer.com/learning-centre/code-examples/multiple-360-images-page.html](http://www.360-javascriptviewer.com/learning-centre/code-examples/multiple-360-images-page.html)

[http://blog.stableflow.com/jquery-plugins/360-degrees-product-view/](http://blog.stableflow.com/jquery-plugins/360-degrees-product-view/)

如果您想为其创建代码箱，请单击链接[http://codebins.com/](http://codebins.com/)

# android - 如何将.apk 文件转换为.exe？

> ID：11503011
> 
> 赞同：-5
> 
> 时间：2012-07-16T11:08:33.250
> 
> 标签：android, android-intent, android-emulator

我在 Eclipse 中创建了一个应用程序。我想将该应用程序转换为 .exe 文件 [意味着 .apk 文件到 .exe 文件] ...

或者

我希望该应用程序应该通过下载并单击它来运行。它应该在没有 Eclipse 或 AVD Manager 的帮助下运行...

如果有人可以帮助我......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:10:12.763

您不能创建 Android 应用程序的 .exe 文件。

> 我希望该应用程序应该通过下载并单击它来运行。应该在没有 Eclipse 或 AVD Manager 的帮助下运行...

您的 .apk（Android 应用程序）仅运行 Android 环境。如果它安装在您支持的 android 设备上，您只需单击 apk 文件即可实现它。

现在其他一些操作系统制造商支持 android .apk 文件在他们的环境中运行。但这需要一些基本的转换过程来支持该环境。

# css - 悬停在 ie9 中的嵌套 ul 上不起作用

> ID：11503013
> 
> 赞同：0
> 
> 时间：2012-07-16T11:08:40.320
> 
> 标签：css, internet-explorer, hover, internet-explorer-9, html-lists

我有[这个网站](http://alcappellorosso.it/)，在左侧菜单的“酒店”链接上有一个嵌套菜单。悬停在“hotel”上的子菜单在左侧有一个空隙，但由于在空隙中鼠标悬停在嵌套的“ul”元素上，因此在 Firefox 或 Google Chrome 中没有问题。但这在 IE9 中不起作用（不确定其他版本），事实上我无法到达子菜单，因为它消失了。

这是一个已知的错误？难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:37:04.047

尝试删除嵌套 UL 上的 20px 填充

然后给UL一个-5px的边距顶部

然后给嵌套的 LI 元素一个 20px 的 margin-left

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:36:18.980

IE9 将`<ul/>`padding-left 或`<li/>`margin-left 视为空内容，因此鼠标悬停直接穿过它。我不确定为什么要这样做，但一个简单的解决方法是添加重复的透明背景图像，或者，如果不需要旧版支持，添加`background-color: (255, 255, 255, 0.01)`

# perl - perl 打印变量

> ID：11503014
> 
> 赞同：0
> 
> 时间：2012-07-16T11:08:44.503
> 
> 标签：perl, printing

通用代码是：

```
use strict;
use warnings;

my $f = $ARGV[0];
use Bio::EnsEMBL::Registry;
use Bio::EnsEMBL::ApiVersion;

my $registry = 'Bio::EnsEMBL::Registry';
$registry->load_registry_from_db(
-host => 'ensembldb.ensembl.org',
-user => 'anonymous',
-port => '5306'
);

my $adaptor = $registry->get_adaptor( 'Homo sapiens', 'core', 'transcript' );

my $transcript =
$adaptor->fetch_by_translation_stable_id($f); 
```

最后一行

#

对于最后一行，我无法将两个值打印为同一行中的两列：

尝试 1 代码：打印 $f 。$transcript->display_id。"\n";

结果：api.test.pl ENSP00000418690

ENSP00000418690ENST00000488594

尝试 2 代码：打印 $f，$transcript->display_id。"\n";

结果：perl api.test.pl ENSP00000418690：

ENSP00000418690ENST00000488594

任何其他尝试都会影响访问 display_id。我想要的格式是：ENSP00000418690 ENST00000488594

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:32:56.107

如果要在值之间留一个空格，请在值之间打印一个空格。

```
print $f, " ", $transcript->display_id, "\n"; 
```

点将两个字符串连接成一个字符串，这里没有必要，因为它`print`接受逗号分隔的值列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:32:12.850

只是提到另一种可能性，您可以使用两个内置的 perl 变量。

```
{
    local $, = " ";   # Output field separator
    local $\ = "\n";  # Output record separator
    print $f, $transcript->display_id;
} 
```

输出字段分隔符会在传递给的列表中的每个参数之间自动打印`print`。输出记录分隔符打印在 的最后一个参数之后`print`。默认情况下两者都是未定义的，并解释为“不打印任何内容”。

我将它们声明为块的本地，作为将它们限制为单个`print`语句的最简单方法。

# .net - 如何将 WPF 样式基于已编译资源字典中的样式？

> ID：11503015
> 
> 赞同：3
> 
> 时间：2012-07-16T11:08:44.523
> 
> 标签：.net, wpf, resourcedictionary, basedon

我已经下载了 Reuxables 免费样式并将它们作为资源字典添加到我的 App.xaml 中。我还添加了我自己的包含验证器模板的资源字典。

问题是，当我在验证器模板中添加样式目标类型以定位一种对象时，该类型的对象会丢失 Reuxables 库中的样式。

这是我的 App.xaml：

```
<Application x:Class="App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/ReuxablesLegacy;component/edge.xaml" />
                <ResourceDictionary Source="Themes/Validator.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

这是我的验证器资源字典：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:conv="clr-namespace:WPFLibrary.Converters;assembly=WPFLibrary">
    <conv:ErrorListConverter x:Key="errorListConverter" />
    <Style x:Key="myValidatorTemplate" TargetType="Control">
    <!-- If return from converter is 'true' (where converter is handed a dictionary and property name) then set the border and tooltip accordingly -->
    <Style.Triggers>
        <DataTrigger Value="true">
        <DataTrigger.Binding>
            <MultiBinding Converter="{StaticResource errorListConverter}" ConverterParameter="EXISTS" >
            <Binding Path="ErrorList" />
            <Binding RelativeSource="{RelativeSource Self}" Path="Tag" />
            </MultiBinding>
        </DataTrigger.Binding>
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="BorderBrush" Value="Red" />
        <Setter Property="ToolTip" >
            <Setter.Value>
            <MultiBinding Converter="{StaticResource errorListConverter}" ConverterParameter="VALUE" >
                <Binding Path="ErrorList" />
                <Binding RelativeSource="{RelativeSource Self}" Path="Tag" />
            </MultiBinding>
            </Setter.Value>
        </Setter>
        </DataTrigger>
    </Style.Triggers>
    </Style>
    <!--List the control types that should be able to display validation errors-->
    <Style TargetType="TextBox" BasedOn="{StaticResource myValidatorTemplate}" />
    <Style TargetType="ComboBox" BasedOn="{StaticResource myValidatorTemplate}" />
    <Style TargetType="DatePicker" BasedOn="{StaticResource myValidatorTemplate}" />
    <Style TargetType="DataGrid" BasedOn="{StaticResource myValidatorTemplate}" />
    <Style TargetType="DataGridCell" BasedOn="{StaticResource myValidatorTemplate}" />
    <Style TargetType="GroupBox" BasedOn="{StaticResource myValidatorTemplate}" />
    <Style TargetType="TabItem" BasedOn="{StaticResource myValidatorTemplate}" />
</ResourceDictionary> 
```

因为我将验证器应用于文本框、组合框、日期选择器、数据网格、组框和 tabitems，所以所有这些都失去了它们的 Reuxables Edge 风格。

我感谢任何解决方案。谢谢！

# javascript - 带有页面转换的 JQuery Mobile 更改页面

> ID：11503018
> 
> 赞同：0
> 
> 时间：2012-07-16T11:08:57.643
> 
> 标签：javascript, jquery, jquery-mobile

我将 JQuery Mobile 用于一个简单的移动 Web 应用程序。

我正在使用单页解剖。

当我表演时`$.mobile.changePage("sample.html",{transition : pop});`

这似乎加载了没有 javascript 的页面。

有什么解决方法吗？或者是否有任何新的 API 来加载带有页面转换的外部页面，同时 DOM 也被正确加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:09:28.213

如果您使用 firebug 检查 DOM，您会看到该页面已添加到 DOM 中，但当您离开时它会被删除。如果您希望页面留在 DOM 中，您可以先使用[loadPage](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)方法加载页面

```
$.mobile.loadPage( "sample.html" ); 
```

然后像往常一样使用链接或`$.mobile.changePage`

如果您谈论的是未加载的 javascript 文件，那么这是[故意](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html) 的，这取决于页面的加载方式），我不认为这是特定于 JQM 1.1.1 版本的新行为。

# javascript - 使用替换功能替换 xml 标签不起作用

> ID：11503020
> 
> 赞同：0
> 
> 时间：2012-07-16T11:09:03.917
> 
> 标签：javascript, jquery, xml-parsing

```
<lb/>pis est) les oultragerent grandement les
          <lb/>appellans Trop diteulx, Breschedens,
          <lb/>Plaisans rousseaulx, Galliers, Chien- 
```

我想替换标签，
以便我可以轻松解析它，我应该使用 javascript 的简单替换功能或一些常规表达式！！！！

```
//open the document xml
$(document).ready(function()
{
  $.ajax({
    type: "GET",
    url: "GP.xml",
    dataType: "xml",
    success: parseXml
  });
});

//pasre the document
function parseXml(xml)
{
  //find head and its text in the line breaks 
  $(xml).find("div").each(function()
  {
    $("#output").append($(this).replace(/\n/g, "<br>");
  });
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:11:43.250

更改此行：

```
$("#output").append($(this).replace(/\n/g, "<br>"); 
```

对此：

```
$("#output").append($(this).html().replace(/\n/g, "<br />"); 
```

使用 $(this) 您可以获得对象，但不能获得对象的内容。为此，您需要 .html()。

**编辑：**

$(this) 指的是 $('#output') 而不是 div。

```
$(xml).find("div").each(function() {
    var thistext = $(this);
    $("#output").append(thistext.text().replace(/lb/g, "br")); 
}); 
```

**编辑2：**

```
$(document).ready(function() {
    $.ajax({ 
        type: "GET", 
        url: "lp.xml", 
        dataType: "xml", 
        success: parseXml 
    }); 
}); 

//parse the document 
function parseXml(xml) { 
    //find head and its text in the line breaks  
    $(xml).find("div").each(function() { 
        var thistext = $(this); 
        alert(thistext.text());
        $("#output").append(thistext.text().replace(/lb/g, "br"));  
    });
} 
```

# powershell - 在 powershell 中查找和替换

> ID：11503025
> 
> 赞同：1
> 
> 时间：2012-07-16T11:09:21.793
> 
> 标签：powershell, powershell-ise

我的文本文件如下所示：

```
-------------------
Set PRGVER="V1.0.12"
Set PRGDIR=C:\PRGSTD\oif_mes\OIFplus
Set PRGEXE=OIFplus.bat
Set PRGTXT=OIFplus

echo %PRGTXT%, %PRGVER%
start "%PRGTXT%" /D%PRGDIR%\%PRGVER%\ %PRGDIR%\%PRGVER%\%PRGEXE%
---------------------- 
```

我不想做的，编辑这个文件，只改变`Set PRGVER="V1.0.12"`一个新的数字，像这样`Set PRGVER=V1.0.13"`。
什么时候开始 PS 脚本，我不知道整个字符串，. 之间的数字`""`。
我只知道，找到字符串变量：`Set PRGVER=""`。

如何仅替换 之间的第一个值`""`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:36:50.720

像这样的东西；

```
$srt = <your text>
$r = $str -replace "PRGVER=`".*`"", "PRGVER=`"your_replace`"" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:31:28.867

以下应该做到这一点。它找到以 'Set PRGVER="V' 开头的 a 行，后跟任意位数，然后是一个点、任意位数、一个点、任意位数，并以 '"' 结尾。找到后，该行将替换为 'Set PRGVER="V1.0.13"' 并将结果保存回文件。

```
(Get-Content file.txt) -replace '^Set PRGVER="V\d+\.\d+.\d+"$','Set PRGVER="V1.0.13"' | Out-File file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:34:46.913

以下 PoSH 将替换`PRGVER`值：

```
$newValue = "v123.456.789"
gc D:\temp\text | % { $_ -ireplace '(Set PRGVER=)\"([^"]*)\"', ('$1"' + $newValue + '"') }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-09T04:21:30.743

您使用键：Ctrl + H

More information: [https://docs.microsoft.com/en-us/powershell/scripting/windows-powershell/ise/keyboard-shortcuts-for-the-windows-powershell-ise?view=powershell-7](https://docs.microsoft.com/en-us/powershell/scripting/windows-powershell/ise/keyboard-shortcuts-for-the-windows-powershell-ise?view=powershell-7)

# spring - Spring Security 自定义 LogoutSuccessHandler 获取奇怪的 Authentication 对象

> ID：11503027
> 
> 赞同：0
> 
> 时间：2012-07-16T11:09:40.617
> 
> 标签：spring, spring-mvc, spring-security, logout

我正在使用 Spring Security (3.1) 开发一个应用程序，并且遇到了以下问题。当用户注销时，我想重定向到某个自定义 URL，具体取决于他是否从安全页面注销。我编写了一个自定义 LogoutHandler，如下所示：

```
@Override
public void onLogoutSuccess(HttpServletRequest request,
        HttpServletResponse response, Authentication authentication)
        throws IOException, ServletException {

    String refererUrl = request.getHeader("Referer");
    if (requiredAuthentication(refererUrl, authentication)) {
        response.sendRedirect(request.getContextPath());
    } else {
        response.sendRedirect(refererUrl);
    }
}

private boolean requiredAuthentication(String url, Authentication authentication){
    return !getPrivilegeEvaluator().isAllowed(url, authentication);
} 
```

因此，当用户从非安全页面注销时，他会注销并重定向到相同的 URL，如果他从安全页面注销，他会转到索引页面。问题是，该方法的 Authentication 对象始终是经过身份验证的（即使根据规范，在用户注销后调用该方法）。我的安全上下文：

```
<http use-expressions="true" disable-url-rewriting="true" request-matcher-ref="requestMatcher" >

    <intercept-url pattern="/admin/**" access="hasRole('ROLE_ADMIN')" requires-channel="https" />
    <intercept-url pattern="/dashboard/**" access="hasRole('ROLE_OWNER')" requires-channel="https" />
    <intercept-url pattern="/**" access="permitAll"/>

    <form-login login-page="/login"
                authentication-success-handler-ref="successHandler"
                authentication-failure-url="/login"
                login-processing-url="/validate"  />

    <logout logout-url="/logout" invalidate-session="true" success-handler-ref="logoutSuccessHandler" />

    <remember-me services-ref="rememberMeServices" key="KEY"  use-secure-cookie="false" />

    <session-management session-fixation-protection="migrateSession">
        <concurrency-control max-sessions="1" />
    </session-management>

</http> 
```

你有什么想法，为什么收到的身份验证仍然有效，当 gettig 到 logoutSuccessHandler 时？我不能编辑这个对象，因为它的字段是最终的（除了 isAuthenticated，但它没有被 isAllowed() 方法检查..）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:01:35.507

查看 Spring Security 源代码，LogoutFilter 从 SecurityContextHolder 获取 Authentication 对象，将其保存在本地变量中，并通过 SecurityContextLogoutHandler 将其从持有者中删除。在调用所有 LogoutHandlers 之后，它会调用您的 LogoutSuccessHandler，并传递 Authentication 对象。

即使它说它是有效的，它也不再存在于 SecurityContextHolder 中，因此对于 Spring，用户已注销。

# scala - 模式匹配序列理解的惯用方式是什么？

> ID：11503033
> 
> 赞同：20
> 
> 时间：2012-07-16T11:10:04.550
> 
> 标签：scala, pattern-matching, for-comprehension

```
val x = for(i <- 1 to 3) yield i
x match {
    case 1 :: rest => ... // compile error
} 
```

> 构造函数无法实例化为预期类型；找到：collection.immutable.::[B] 需要：scala.collection.immutable.IndexedSeq[Int]

[当 match 收到 IndexedSeq 但不是 LinearSeq 时，](https://stackoverflow.com/questions/10199171/matcherror-when-match-receives-an-indexedseq-but-not-a-linearseq)这与MatchError 相同。

问题是，如何正确地做到这一点？到处添加`.toList`似乎不对。如果每个人都这样做，那么创建一个自己的提取器来处理每个`Seq`（如另一个问题的答案中所述）会导致一团糟......

我想问题是，为什么我不能影响序列理解的返回类型是什么，或者：为什么`Seq`标准库中没有这样一个通用提取器的一部分？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-16T11:20:09.690

好吧，您可以对任何序列进行模式匹配：

```
case Seq(a, b, rest @ _ *) => 
```

例如：

```
scala> def mtch(s: Seq[Int]) = s match { 
  |      case Seq(a, b, rest @ _ *) => println("Found " + a + " and " + b)
  |      case _ => println("Bah") 
  |    }
mtch: (s: Seq[Int])Unit 
```

然后这将匹配任何超过（或等于）2个元素的序列

```
scala> mtch(List(1, 2, 3, 4))
Found 1 and 2

scala> mtch(Seq(1, 2, 3))
Found 1 and 2

scala> mtch(Vector(1, 2))
Found 1 and 2

scala> mtch(Vector(1))
Bah 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T15:17:53.690

REPL 中 Vector 的另一种解决方案：

```
Vector() match {
    case a +: as => "head + tail"
    case _       => "empty"  
}
 res0: String = "empty"

Vector(1,2) match {
  case a +: as => s"$a + $as"
  case _      => "empty"  }
res1: String = 1 + Vector(2) 
```

# java - AndEngine 和 @override 错误

> ID：11503035
> 
> 赞同：1
> 
> 时间：2012-07-16T11:10:15.067
> 
> 标签：java, android, eclipse, andengine

我已经从 github 下载了 AndEngine 源代码并安装了带有 ADT 20.0 的新 Eclipse（如自述文件中所述）。现在我想编译AndEngine，但是每个`@override`代码都会导致错误。我想，我不应该只是删除所有`@override`，嘿？关于这个问题有什么建议吗？提前致谢。

**编辑：** 将编译器级别更改为 1.6 后，我遇到了这个问题：![在此处输入图像描述](../Images/431202de29b9cad57186e2daa2721c9d.png). android版本有很多错误（怎么办？）和openGL的一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T11:15:12.800

将您的 JAVA 编译器级别设置为`1.6`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-16T11:20:03.643

如果上面提到的魂灵不起作用，只需尝试删除“@Override”。它对我有用很多次。

# java - 在 Java 中使用 selenium 服务器拍摄网页快照

> ID：11503039
> 
> 赞同：0
> 
> 时间：2012-07-16T11:10:32.830
> 
> 标签：java, selenium, selenium-rc

我需要拍摄网页快照，为此我使用 selenium RC（这是一个不错的选择，对吧？）和 eclipse 的 java 语言。我将它用作 JUnit 测试用例。这是我的代码。

```
package com.example.tests;

import com.thoughtworks.selenium.*;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import java.util.regex.Pattern;

@SuppressWarnings("deprecation")
public class mainClassTest extends SeleneseTestCase {
    @Before
    public void setUp() throws Exception {
        selenium = new DefaultSelenium("localhost", 4444, "*firefox", "http://www.gmail.com/");
        //water= new DefaultSelenium("localhost", 4444, "*firefox", "http://www.gmail.com/");
        selenium.start();

    }

    @Test
    public void testFinalSelenium() throws Exception {

        selenium.windowMaximize(); 

        selenium.open("/");
        selenium.waitForPageToLoad("30000");

        System.out.println("laoded\n");
    //  selenium.wait();
         selenium.captureScreenshot("C:\\test\\simpleQuora.png");
         selenium.captureEntirePageScreenshot("C:\\test\\CompleteQuora.png", "");
    }

    @After
    public void tearDown() throws Exception {

        selenium.stop();

    }

} 
```

它工作正常，但如果我必须拍摄多个 URL 的快照，那么有什么方法可以做到这一点？我们可以不使用它作为 JUnit 测试用例并在 main 函数中使用 selenium 吗？

因为如果我尝试运行此代码：

```
package com.example.tests;

import com.thoughtworks.selenium.DefaultSelenium;
import com.thoughtworks.selenium.Selenium;

public class MainClass {

    void func(String url, String file)
    {
        Selenium selenium = new DefaultSelenium("localhost", 4444, "*firefox", url);
        selenium.start();

        selenium.windowMaximize(); 

        selenium.open("/");
        selenium.waitForPageToLoad("30000");

        System.out.println("laoded\n");
    //  selenium.wait();
        String file1= "C:\\test\\"+file+".png";
        String file2= "C:\\test\\"+file+"2.png";
        selenium.captureScreenshot(file1);
        selenium.captureEntirePageScreenshot(file2, "");

        selenium.stop();

    }

    public static void main(String[] args)
    {

        MainClass demo = new MainClass();

        demo.func("www.facebook.com","face"); 

        //demo.func("www.reddit.com","reddit"); 

    }
} 
```

我收到了[这个错误](http://imgur.com/YcoVw)。（虽然我已经从 cmd 启动了服务器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:20:54.733

```
 demo.func("www.facebook.com","face"); 
```

更改为

```
 demo.func("http://www.facebook.com","face"); 
```

# vim - 如何更改vim中的自动完成行为？

> ID：11503040
> 
> 赞同：5
> 
> 时间：2012-07-16T11:10:36.580
> 
> 标签：vim

举例说明。

我想拆分我的窗口并打开*file-x.txt*

在我工作的文件夹中，我还有一组文件：从*file-a.txt*到*file-z.txt*

如果我输入：

`:sp file``Tab`

而不是 `:sp file-` 像我通常在 bash 中获得的那样。

我得到： `:sp file-a.txt`

这不是很方便，因为我需要点击`Tab`荒谬的时间或输入很长的名字。

有没有办法为文件名设置 VIM 的自动完成行为？

感谢您的时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T11:18:09.010

该`'wildmode'`设置控制命令行中的完成。尝试

```
:set wildmode=longest:full,full 
```

这应该达到预期的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:35:59.923

您可以在此处使用通配符：

```
:sp *x<Tab> 
```

在您描述的场景中，点击单个`<Tab>`应该完成命令行以：

:sp 文件-x.txt

# java - 如何使用休眠映射自定义枚举整数序数？

> ID：11503046
> 
> 赞同：15
> 
> 时间：2012-07-16T11:11:32.843
> 
> 标签：java, hibernate, exception, enumeration

我有一个名为 Status 的枚举类，如下所示

```
public enum Status {
    PENDING(0), SUCCESS(1), FAILED(-1);

    private int st;

    private Status(int st){
        this.st = st;
    }
} 
```

从其他班级我尝试映射这个状态枚举

```
public void setStatus(Status status) {
        this.status = status;
    }

    @Enumerated(EnumType.ORDINAL)
    public Status getStatus() {
        return status;
    } 
```

当我运行这段代码时，我得到

> java.lang.IllegalArgumentException：枚举类数据的未知序数值。状态：在 org.hibernate.type.EnumType.nullSafeGet(EnumType.java:93) 在 org.hibernate.type.CustomType.nullSafeGet(CustomType.java: 124) 在 org.hibernate.type.AbstractType.hydrate(AbstractType.java:106) 在

但我在枚举定义中已经有了-1。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T11:31:49.523

您可以定义自己的`UserType`定义 Hibernate 应该如何映射这些枚举。

请注意，序数定义了枚举值的索引，因此`FAILED`将具有序数 2。要使用枚举的属性映射枚举，您需要一个`UserType`实现。

一些链接：

*   [https://community.jboss.org/wiki/UserTypeForPersistingAnEnumWithAVARCHARColumn](https://community.jboss.org/wiki/UserTypeForPersistingAnEnumWithAVARCHARColumn)
*   [http://javadata.blogspot.de/2011/07/hibernate-and-enum-handling.html](http://javadata.blogspot.de/2011/07/hibernate-and-enum-handling.html)（查看“休眠中的参数化枚举”部分）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-03T09:33:16.410

这是一个使用字符串标签而不是 int id 的解决方案，但它很容易适应。

```
public class User { 
    @Id
    private int id;

    @Type(type = "com.example.hibernate.LabeledEnumType")
    private Role role;
}

public enum Role implements LabeledEnum {
    ADMIN("admin"), USER("user"), ANONYMOUS("anon");

    private final String label;

    Role(String label) {
        this.label = label;
    }

    @Override
    public String getLabel() {
        return label;
    }
}

public interface LabeledEnum {
    String getLabel();
}

public final class LabeledEnumType implements DynamicParameterizedType, UserType {

    private Class<? extends Enum> enumClass;

    @Override
    public Object assemble(Serializable cached, Object owner)
            throws HibernateException {
        return cached;
    }

    @Override
    public Object deepCopy(Object value) throws HibernateException {
        return value;
    }

    @Override
    public Serializable disassemble(Object value) throws HibernateException {
        return (Serializable) value;
    }

    @Override
    public boolean equals(Object x, Object y) throws HibernateException {
        return x == y;
    }

    @Override
    public int hashCode(Object x) throws HibernateException {
        return x == null ? 0 : x.hashCode();
    }

    @Override
    public boolean isMutable() {
        return false;
    }

    @Override
    public Object nullSafeGet(ResultSet rs, String[] names, SessionImplementor session, Object owner)
            throws HibernateException, SQLException {
        String label = rs.getString(names[0]);
        if (rs.wasNull()) {
            return null;
        }
        for (Enum value : returnedClass().getEnumConstants()) {
            if (value instanceof LabeledEnum) {
                LabeledEnum labeledEnum = (LabeledEnum) value;
                if (labeledEnum.getLabel().equals(label)) {
                    return value;
                }
            }
        }
        throw new IllegalStateException("Unknown " + returnedClass().getSimpleName() + " label");
    }

    @Override
    public void nullSafeSet(PreparedStatement st, Object value, int index, SessionImplementor session)
            throws HibernateException, SQLException {
        if (value == null) {
            st.setNull(index, Types.VARCHAR);
        } else {
            st.setString(index, ((LabeledEnum) value).getLabel());
        }
    }

    @Override
    public Object replace(Object original, Object target, Object owner)
            throws HibernateException {
        return original;
    }

    @Override
    public Class<? extends Enum> returnedClass() {
        return enumClass;
    }

    @Override
    public int[] sqlTypes() {
        return new int[]{Types.VARCHAR};
    }

    @Override
    public void setParameterValues(Properties parameters) {
        ParameterType params = (ParameterType) parameters.get( PARAMETER_TYPE );
        enumClass = params.getReturnedClass();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-14T14:44:37.177

我想建议以下解决方法。起初我很惊讶它有效，但它真的很简单：对于枚举：

```
 public enum Status {
    PENDING(0), SUCCESS(1), FAILED(-1);

    private int status;

    private Status(int status){
        this.status = status;
    }

    public String getStatus() {
        return status;
    }

    public static Status parse(int id) {
        Status status = null; // Default
        for (Status item : Status.values()) {
            if (item.getStatus().equals(id)) {
                Status = item;
                break;
            }
        }
        return Status;
    }
} 
```

班级

```
class StatedObject{

    @Column("status")
    private int statusInt;

    public Status getStatus() {
        return Status.parse(statusInt);
    }

    public void setStatus(Status paymentStatus) {
        this.statusInt = paymentStatus.getStatus();
    }

    public String getStatusInt() {
        return statusInt;
    }

    public void setStatusInt(int statusInt) {
        this.statusInt = statusInt;
    }
} 
```

如果您在休眠 xml 文件中使用休眠，它将是：

```
 <property name="statusInt "    column="status" type="java.lang.Integer" /> 
```

这就对了

# node.js - Express mongo 会话存储

> ID：11503047
> 
> 赞同：1
> 
> 时间：2012-07-16T11:11:37.080
> 
> 标签：node.js, express

我正在尝试在我们的一个项目中使用 express-session-mongo 模块。[该代码与https://github.com/mikkel/express-session-mongo](https://github.com/mikkel/express-session-mongo)上的代码完全相同，但是当我启动应用程序时出现“无法读取未定义的属性 'BSON'”错误。有没有我忘记要求的模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:28:31.067

express-session-mongo 尝试对 mongodb 使用本机 bson 解析器，这需要单独编译。

在 express-session-mongo 目录中编译本机解析器为我解决了这个问题：

```
cd node_modules/express-session-mongo
npm install mongodb --mongodb:native 
```

# java - 统计和成就系统的数据结构

> ID：11503049
> 
> 赞同：0
> 
> 时间：2012-07-16T11:11:39.273
> 
> 标签：java, android

我正在实施一个统计+成就系统。基本上结构是：

*   一个成就有许多相关的统计数据，这种关系必须将每个成就与所需的统计数据（及其价值）相关联。例如，Achievement1 需要值为 50（或更大）的 Statistic1 和值为 100（或更大）的 Statistic2。
*   给定一个统计数据，我还需要知道相关的成就是什么（以便在统计数据发生变化时检查它们。

统计数据和成就都有一个唯一的 ID。

我的问题是我不知道代表它的最佳数据结构是什么。顺便说一句，我正在使用：

```
SparseArray<HashMap<Statistic, Integer>> statisticsForAnAchievement; 
```

对于第一个点，数组的索引是成就 ID，HashMap 包含 Statistic/TargetValue 对。还有一个：

```
SparseArray<Collection<Achievement>> achievementsRelatedToAStatistic; 
```

对于第二个点，索引是 StatisticID，项目是与成就相关的集合。

然后我需要处理两个对象来保持它的连贯性。

有没有更简单的表示方式？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:36:17.940

正如一个`Statistic`（或一组`Statistics`）描述的`Achievement`那样/那些`Statistic`/s不应该存储在`Achievement`类中吗？例如，一个改进的`Achievement`类：

```
public class Achievement {
    SparseArray<Statistic> mStatistics = new SparseArray<Statistic>();

    // to get a reference to the statisctics that make this achievement
    public SparseArray<Statistic> getStatics() {
        return mStatistics;
    }

    // add a new Statistic to these Achievement
    public void addStatistic(int statisticId, Statistic newStat) {
        // if we don't already have this particular statistic, add it
        // or maybe update the underlining Statistic?!?
        if (mStatistics.get(statisticId) == null) {
             mStatistic.add(newStat);
        }
    }

    // remove the Statistic
    public void removeStatistic(int statisticId) {
        mStatistic.delete(statisticId);
    }

    // check to see if this achievment has a statistic with this id
    public boolean hasStatistics(int statisticId) {
        return mStatistic.get(statisticId) == null ? false : true;
    }

    // rest of your code
} 
```

此外，`Statistic`该类应将其目标（Statistic1 的 50 值）值作为字段存储在其中。

> 一个成就有许多相关的统计数据，这种关系必须将每个成就与所需的统计数据（及其价值）相关联。例如，Achievement1 需要值为 50（或更大）的 Statistic1 和值为 100（或更大）的 Statistic2。

统计数据已经存储在成就中，因此您所要做的就是存储成就（或他们自己的成就）的 ID 的数组/列表，这样您就可以访问取得这些成就的统计数据。

> 给定一个统计数据，我还需要知道相关的成就是什么（以便在统计数据发生变化时检查它们。

您将使用上面的成就数组/列表，对其进行迭代并检查成就是否具有特定的`Statistic`：

```
ArrayList<Achievement> relatedAchievements = new ArrayList<Achievement>();
for (Achievement a : theListOfAchievments) {
     if (a.hasStatistics(targetStatistic)) {
          relatedAchievements.add(a); // at the end this will store the achievements related(that contain) the targetStatistic
     }
} 
```

另一种选择是在某个地方有一个静态映射，该映射存储哪些成就有一个`Statistic`, 映射，每次调用`addStatictic`or`removeStatistic`方法之一时都会更新该映射。

关于您的代码，**如果**您不需要该`Statistic`对象并且只对它的引用感到满意，`id`那么您可以改进`statisticsForAnAchievement`：

```
SparseArray<SparseIntArray> statisticsForAnAchievement;
// the index of the SparseArray is the Achievement's id
// the index of the SparseIntArray is the Statistic's id
// the value of the SparseIntArray is the Statistic's value 
```

# php - PHP Excel 日期字段值在 php mysql 中导入时给出一些整数值

> ID：11503051
> 
> 赞同：0
> 
> 时间：2012-07-16T11:11:40.200
> 
> 标签：php, mysql

使用 PHP 将 Excel 文件导入 MySQL 数据库时遇到问题。它为每个日期字段值显示一个整数值。

例如，假设我的 Excel 日期字段中有一个日期 16-06-2012。使用 PHP 导入时显示 41076。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:23:01.000

MS Excel 默认以 01-01-1900 为基础 您可以轻松地将 excel 整数日期值转换为 php 中的日期类型 请参阅

```
$intdatevalue=excel date value in integer

echo date('Y-m-d',strtotime('1899-12-31+'.($intdatevalue-1).' days')); 
```

1899-12-31 因为 1900 年算作闰年。

它将解决您的excel日期导入问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:26:50.223

```
function ExcelToPHP($dateValue = 0, $ExcelBaseDate=0) {
    if ($ExcelBaseDate == 0) {
        $myExcelBaseDate = 25569;
        //  Adjust for the spurious 29-Feb-1900 (Day 60)
        if ($dateValue < 60) {
            --$myExcelBaseDate;
        }
    } else {
        $myExcelBaseDate = 24107;
    }

    // Perform conversion
    if ($dateValue >= 1) {
        $utcDays = $dateValue - $myExcelBaseDate;
        $returnValue = round($utcDays * 86400);
        if (($returnValue <= PHP_INT_MAX) && ($returnValue >= -PHP_INT_MAX)) {
            $returnValue = (integer) $returnValue;
        }
    } else {
        $hours = round($dateValue * 24);
        $mins = round($dateValue * 1440) - round($hours * 60);
        $secs = round($dateValue * 86400) - round($hours * 3600) - round($mins * 60);
        $returnValue = (integer) gmmktime($hours, $mins, $secs);
    }

    // Return
    return $returnValue;
} 
```

传入：

```
your Excel date (e.g. 41076)
(optionally) a flag 0 or 4 to reflect the Excel base calendar.
    This is most likely to be 0 
```

输出是 PHP 时间戳值

```
$excelDate = 41076;
$timestamp = ExcelToPHP($excelDate);
$mysqlDate = date('Y-m-d', $timestamp);

echo $mysqlDate, PHP_EOL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T14:05:44.390

```
$intdatevalue=excel date value in integer

echo date('Y-m-d',strtotime('1899-12-31+'.($intdatevalue-1).' days')); 
```

这个答案是最好的。我什至不知道 Excel 的日期是 01-01-1900。所以我欠这个人很多。

我总是喜欢时间戳日期。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-16T11:16:59.760

Excel 中的日期使用自 Unix 纪元以来的天数存储。

您可能可以执行以下操作：

```
$excelDate = 41076;
$timestamp = $excelDate * 60 * 60 * 24;
$mysqlDate = date('Y-m-d', $timestamp); 
```

# jquery - jQuery菜单动画问题

> ID：11503052
> 
> 赞同：2
> 
> 时间：2012-07-16T11:11:42.053
> 
> 标签：jquery

我希望你能帮我解决我的问题。您可以在 [www.darshakspadia.com/demo/jQuery-Issue/index.html 查看菜单的当前工作](http://www.darshakspadia.com/demo/jQuery-Issue/index.html)

我的问题是我想要这个菜单

1.  单击而不是悬停时打开。
2.  当我单击另一个导航按钮时，关闭活动关闭。

这是我用于此效果的 jQuery

```
$(document).ready(function(){

    //Remove outline from links
    $(".home-nav a").click(function(){
        $(this).blur();
    });

    //When mouse rolls over
    $(".home-nav li").mouseover(function(){
        $(this).stop().animate({height:'260px'},{queue:false, duration:800, easing: 'easeOutBounce'})
    });

    //When mouse is removed
    $(".home-nav li").mouseout(function(){
        $(this).stop().animate({height:'80px'},{queue:false, duration:800, easing: 'easeOutBounce'})
    });

}); 
```

如果我将“.mouseover”更改为“.click”，问题就不是点击出现，但一旦我将鼠标悬停在当前框外，它就会消失。

如果我将“.mouseover”和“.mouseout”都更改为.click，则不会发生任何事情。

我的主要问题是我需要效果。

请有人帮忙，因为这对我来说真的很紧急。

如果您愿意，我什至可以共享所需的文件，以便您可以帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:21:08.607

你可以试试这个，删除你的鼠标悬停和鼠标悬停。

```
$(".home-nav li").click(function(){
     $(this).stop().animate({height:'260px'},{queue:false, duration:800, easing: 'easeOutBounce'});
    $(this).siblings().stop().animate({height:'80px'},{queue:false, duration:800, easing: 'easeOutBounce'});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:13:49.767

对于上述问题，我已经在[http://codebins.com/bin/4ldqpau/上完成了垃圾箱](http://codebins.com/bin/4ldqpau/)

因此，请尝试以下脚本：

```
function hideMenu() {
    $(".home-nav li").each(function() {
        $(this).stop().animate({
            height: '80px'
        }, {
            queue: false,
            duration: 800,
            easing: 'easeOutBounce'
        });
    });
}
$(function() {
    $(".home-nav li").click(function() {
        hideMenu();
        $(this).stop().animate({
            height: '260px'
        }, {
            queue: false,
            duration: 800,
            easing: 'easeOutBounce'
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:26:53.470

您可以使用[bind()](http://api.jquery.com/bind/)多事件方法和一些 css 技巧来保持高度不变：

css

```
.active { height:260px !important; } // to hold steady 
```

jQuery：

```
$(".home-nav li").bind({

    click: function(){
       $(".home-nav li").stop().animate({height:'80px'},{queue:false, duration:800, easing: 'easeOutBounce'});
       $(this).stop().animate({height:'260px'},{queue:false, duration:800, easing: 'easeOutBounce'},
       function(){//when animation complete
          $(".home-nav li").removeClass('active');//to remove class from all
          $(this).addClass('active');//adds class clicked one
       });
    },

    mouseover: function(){
       $(this).stop().animate({height:'260px'},{queue:false, duration:800, easing: 'easeOutBounce'});
    },

    mouseleave: function(){
       $(this).stop().animate({height:'80px'},{queue:false, duration:800, easing: 'easeOutBounce'});
    }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T11:23:04.860

您需要使用 click 事件而不是 mouseover 和 out。在 click 函数中，您需要关闭所有其他函数并打开单击的函数。

```
$(document).ready(function(){ 

    //Remove outline from links 
    $(".home-nav a").click(function(){ 
        $(this).blur(); 
    }); 

    $(".home-nav li").click(function(){ 
        //Close all others
        $(".home-nav li").stop().animate({height:'80px'},{queue:false, duration:800, easing: 'easeOutBounce'});
        //Open this one
        $(this).stop().animate({height:'260px'},{queue:false, duration:800, easing: 'easeOutBounce'}) 
    }); 

}); 
```

# c++ - 在运行时找出特定线程的 CPU 核心

> ID：11503054
> 
> 赞同：3
> 
> 时间：2012-07-16T11:11:44.973
> 
> 标签：c++, c, runtime, core, cc

我在 SUN/Solaris 上运行 CC 编译器，我有超过 64 个由操作系统分配给不同内核的线程。我很想知道是否有方法可以在运行时获取不同线程的核心 ID？

我没有为这些线程设置亲和力，我使用 psrset 创建处理器集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:28:16.903

我找到了答案：Solaris 上的 getcpuid() 返回核心 ID（即使对于超线程）：我已经对其进行了测试，并且效果很好。[http://www.unix.com/man-page/all/3c/getcpuid/](http://www.unix.com/man-page/all/3c/getcpuid/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:31:10.227

我不知道是否有特定于 Solaris 的系统调用，但您可以使用可移植的[hwloc](http://www.open-mpi.org/projects/hwloc/)库及其`hwloc_get_last_cpu_location`函数。

# iphone - 为什么我的设备前面的点在 xcode 的管理器中是橙色的？

> ID：11503056
> 
> 赞同：1
> 
> 时间：2012-07-16T11:11:51.410
> 
> 标签：iphone, xcode3.2, ios5.1, xcode-organizer, ios

我正在使用 Xcode 3.2.6。我的 Mac OS X 版本是 10.6.8。我在设备门户中添加了我的新 iPhone 4S 并安装了配置文件。我的手机上安装了 iOS 5.1.1。我在管理器中的设备前出现橙色点，当我尝试将设备添加到门户时出现此消息。“Xcode 找不到安装此版本的软件映像”。

如何将橙色点更改为绿色，以便我可以在新 iPhone 中安装和检查我的应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:22:42.990

我假设您的 4S 正在运行 iOS5？您应该将 Xcode 更新到最新版本（可在 mac 应用商店获得）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:23:44.317

你应该至少用 4.3 升级你的 Xcode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:55:40.153

还要确保您只在设备上的配置选项卡下安装了新配置文件，并且其中一个 Mac 副本会导致诸如此类的问题，尽管需要更新的 xcode 也可能是上述问题尝试去 Mac 应用商店和下载它，尽管如果您不在 Lion 上，它将无法使用 Apple 在这种事情上也非常擅长。

# php - 在 PHP 脚本 (CLI) 中访问 Apache 环境

> ID：11503060
> 
> 赞同：1
> 
> 时间：2012-07-16T11:12:00.730
> 
> 标签：php, apache, environment-variables

我目前有一个脚本，它将通过浏览器运行，并通过“php”命令行工具单独运行。

现在的问题是，我可以在从浏览器调用脚本时访问 Apache 环境变量，但在通过命令行调用脚本时无法访问它。

如何让命令行脚本也可以使用 Apache 环境？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:44:14.040

首先，您必须使用以下命令声明您的环境变量：

```
export APPLICATION_ENV=development 
```

然后你可以在你的应用程序 cli 中使用`getenv('APPLICATION_ENV');`.

# google-apps-script - 自定义域上的 Apps 脚本小工具显示“很抱歉，我们无法找到您请求的页面。”

> ID：11503063
> 
> 赞同：0
> 
> 时间：2012-07-16T11:12:11.807
> 
> 标签：google-apps-script

我在站点中创建了自己的应用程序脚本小工具并将其插入到页面中。[当我在http://sites.google.com/a/mydomain.com/www/sms-zprava](http://sites.google.com/a/mydomain.com/www/sms-zprava)打开网站时，它可以工作。当我使用我的自定义域[http://www.mydomain/sms-zprava](http://www.mydomain/sms-zprava)它没有。错误“很抱歉，我们无法找到您请求的页面。” 显示。该小工具使用 UI API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:21:47.583

这是一个[已知问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=546)，目前还没有解决方案。您应该为它加注*星*标以跟踪更新并为它投票。

# python - Python：扁平化包含另一个生成器的生成器的函数

> ID：11503065
> 
> 赞同：9
> 
> 时间：2012-07-16T11:12:28.390
> 
> 标签：python, python-3.x, generator

我想知道如何编写python函数，它可以使生成器变平，从而产生另一个生成器或可迭代对象（它也可以产生另一个生成器/可迭代对象......可能无限）。

这是示例：

`gen(gen(1,2,3), gen(4,5,6), [7,8,9], [gen(10,11,12), gen(13,14,15)])`

注意：`gen`- 表示生成器对象，括号之间的内容`gen`是生成器生成的数据`gen`。

“扁平化”后的预期结果： `gen(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15)`

flatten 函数也必须返回生成器！（因为否则，生成器的前面使用将毫无意义）。

请注意，我使用的是 python 3。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T11:21:39.913

最简单的方法是递归展平函数。假设您想深入到除字符串之外的每个可迭代对象，您可以这样做：

```
def flatten(it):
    for x in it:
        if (isinstance(x, collections.Iterable) and
            not isinstance(x, str)):
            for y in flatten(x):
                yield y
        else:
            yield x 
```

从 Python 3.3 开始，还可以编写

```
def flatten(it):
    for x in it:
        if (isinstance(x, collections.Iterable) and
            not isinstance(x, str)):
            yield from flatten(x)
        else:
            yield x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:20:45.587

非递归方法本质上是递归方法的展开，使用堆栈：

```
def flatten(it):
    stack = []
    it = iter(it)
    while True:
        try:
            x = next(it)
        except StopIteration:
            if stack:
                it = stack.pop()
                continue
            else:
                return
        if isinstance(x, collections.Iterable) and not isinstance(x, str):
            stack.append(it)
            it = iter(x)
        else:
            yield x 
```

# sql - 如何结合存储过程和选择查询结果？

> ID：11503067
> 
> 赞同：3
> 
> 时间：2012-07-16T11:12:30.060
> 
> 标签：sql, stored-procedures, sql-injection, xp-cmdshell

我正在尝试将结果`xp_cmdshell`与选择查询结合起来。我已经尝试过联合并阅读了有关创建临时表的信息，但我的结果将只有 1 列。更准确地说，我需要一个较小的查询来结合`xp_cmdshell`选择查询的结果，因为我试图在基于联合的 sql 注入中使用它

例如：

```
Select name from employee
union
exec xp_cmdshell 'whoami' 
```

我知道这行不通，但有点相似会很棒:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:22:04.627

您应该知道这个存储过程返回什么以及输出什么。然后，当您知道此过程返回的表架构时，您可以使用以下语法：

```
DECLARE @procedureOutput nvarchar(max)
SET @procedureOutput=Exec xp_cmdshell 'dir'
SELECT name FROM employee union @procedureOutput 
```

如果您需要转换两种不同的数据类型，`CAST`并且`CONVERT`命令适合您。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T11:24:26.153

创建一个临时表并插入 #temp EXEC.. 或使用 OPENROESET。请参阅此 [http://beyondrelational.com/modules/2/blogs/70/posts/10812/select-columns-from-exec-procedurename-is-this-possible.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10812/select-columns-from-exec-procedurename-is-this-possible.aspx)

# php - 如何按文档 ID 对 sphinx 结果进行排序

> ID：11503072
> 
> 赞同：0
> 
> 时间：2012-07-16T11:12:54.630
> 
> 标签：php, mysql, search, sorting, sphinx

我想用文档 ID 对我的狮身人面像结果进行排序。通过任何更改，我可以在特定的 sphinx 索引结果中设置任何默认排序模式。如果可能的话，我怎么能给出那个。请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T11:34:10.460

我不确定到目前为止尝试了什么。

但我认为下面的代码片段会给你想要的结果：

```
$cl->SetSortMode(SPH_SORT_EXTENDED, '@id asc'); 
```

希望这有帮助。

# php - Joomla：如何从其他模块获取组件（或模块）变量

> ID：11503073
> 
> 赞同：1
> 
> 时间：2012-07-16T11:12:56.157
> 
> 标签：php, joomla, joomla-component

我正在使用 Joomla 2.5.6、Apache 和 MySQL 开发一个网站。

我有一个页面在主要位置有一篇文章，我在侧面有另一个位置有自定义内容。

例如，我需要在侧面的模块中获取文章的标题。我怎样才能做到这一点？我可以从自定义模块中检索用于文章的视图或控制器的相同实例吗？

我需要知道这一点，以便我可以创建一个边箱，其中包含文章的标题、锚点以及与所显示文章相关的视频和 PDF 的特定链接。

# android - 无法读取解压缩的 classes.dex 文件？

> ID：11503075
> 
> 赞同：0
> 
> 时间：2012-07-16T11:13:01.583
> 
> 标签：android, reverse-engineering, apk

我从互联网上下载了一个 apk 并使用 dex2jarf 工具对其进行解压，因此它提供了已编译的 .classes 文件，我通过反编译器将这些文件转换为 .java 文件，但它为我提供了正确的类，就像它提供了 a.java、b.java c .java 这对我来说很难阅读。我可以通过 apk 文件获得正确的类名，就像它在 project.plz 帮助中使用的一样谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:33:39.977

您要实现的目标称为**deobfuscation**。

希望保护其知识产权的程序员会混淆他们的代码，以使那些可能想要窃取/复制/剽窃他们辛勤工作的人更难阅读。

> 混淆器用简短的机器生成的替代名称替换这些名称。攻击者不会看到对 dontAllow() 的调用，而是看到对 a() 的调用。这使得在不访问原始源代码的情况下更难以直观地了解这些函数的用途。

源：[http ://android-developers.blogspot.ie/2010/09/securing-android-lvl-applications.html](http://android-developers.blogspot.ie/2010/09/securing-android-lvl-applications.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T17:25:02.883

如果标识符已被剥离，则*无法恢复它们。*编译是一个*有损*过程，例如将`RAW`图像转换为低质量的`JPEG`. 没有办法从`JPEG`后面去`RAW`。

`jeb`但是，有一些工具`ida`可以让您自己重命名类。重命名时，对该类的所有引用也会重命名。此功能有时称为“重构”。这是最好的方法，但需要更多时间。

此外，还有一些插件可以`jeb`通过生成比“a”、“b”等更具描述性的新名称来帮助自动化重构。这是 jcase 的一个示例，您可以根据需要对其进行修改：[https://github。 com/CunningLogic/myJEBPlugins/blob/master/DeCluster.java](https://github.com/CunningLogic/myJEBPlugins/blob/master/DeCluster.java)

# javascript - SlickGrid：如何查看长单元格条目的全文？

> ID：11503076
> 
> 赞同：6
> 
> 时间：2012-07-16T11:13:05.447
> 
> 标签：javascript, slickgrid

我正在使用[SlickGrid 数据表](http://mleibman.github.com/SlickGrid/examples/example4-model.html)，并且我的一些单元格有很长的文本条目（1000 个字符或更多）。

默认情况下，SlickGrid 仅显示部分文本，并使用省略号缩写其余文本。

这很好用，除了我想在鼠标悬停时显示全文，或者有其他方法来扩展单元格以显示完整条目。

SlickGrid 可以做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T11:19:29.480

只需使用此插件：

[https://github.com/mleibman/SlickGrid/blob/master/plugins/slick.autotooltips.js](https://github.com/mleibman/SlickGrid/blob/master/plugins/slick.autotooltips.js)

像这样注册它，你就完成了！

```
mygrid.registerPlugin(new Slick.AutoTooltips()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T20:49:47.187

默认情况下，SlickGrid 禁用自动换行。鉴于您的单元格高度设置正确，您可以通过编辑[slick.grid.css](https://github.com/mleibman/SlickGrid/blob/gh-pages/slick.grid.css)来查看所有单元格的文本，如下所示：

```
.slick-cell, .slick-headerrow-column {
  position: absolute;
  border: 1px solid transparent;
  border-right: 1px dotted silver;
  border-bottom-color: silver;
  overflow: hidden;
  -o-text-overflow: ellipsis;
  text-overflow: ellipsis;
  vertical-align: middle;
  z-index: 1;
  padding: 1px 2px 2px 1px;
  margin: 0;
  /*white-space: nowrap;*/
  cursor: default;
} 
```

# iphone - 如何使 Monotouch 对话框收音机选择器导航回选择？

> ID：11503083
> 
> 赞同：1
> 
> 时间：2012-07-16T11:13:37.553
> 
> 标签：iphone, dialog, xamarin.ios, enumeration

我正在使用 MonoTouch Dialog (Reflection API) 来显示和编辑联系表单。

其中一个字段是联系人类型的枚举，单击时导航到具有枚举选项的屏幕。

它目前的工作方式如下：

```
1) click on field type
2) navigates to screen with type options
3) select the type
4) click back to navigate to the original form 
```

我希望它的行为方式是：

```
1) click on field type
2) navigates to screen with type options
3) select the type
4) <strike>click back to</strike> navigate to the original form 
```

（即只需删除点击后退步骤）

这可以实现吗？

# node.js - Windows Azure Node.js 良好工作者角色示例

> ID：11503084
> 
> 赞同：0
> 
> 时间：2012-07-16T11:13:42.787
> 
> 标签：node.js, azure

我一直在尝试使用 powershell、Azure Emulator 和 azure node.js sdk 创建一个工作角色，但是当我尝试通过工作进程开始添加模块时遇到了问题。

这些是我采取的步骤：

1) 运行 Powershell 2) 创建一个新的 azure node.js 项目

新天蓝色服务项目

3）添加一个webrole

添加-azurenodewebrole

4) 添加工作者角色

添加-azurenodeworkerrole

如果我在这个阶段运行项目

启动 azureemulator -launch

该站点运行良好，没有任何 IIS 错误。但是，当我开始将新模块安装到辅助角色中并尝试再次运行它时，我得到了诸如“Windows Azure Web 角色入口点已停止工作”之类的 Windows IIS 错误，而没有更多关于它为什么停止的信息。有没有其他人遇到过这些错误，更重要的是，有没有人有任何关于如何创建工作角色来运行 cron 作业并与我的 Windows azure 表存储对话的示例？我想做的就是每 5 秒运行一次 cron 作业来检查表存储是否有任何新更新并做一些事情。

有任何想法吗？

错误详情：

```
Problem Event Name: APPCRASH
Application Name:   iisexpress.exe
Application Version:    8.0.8298.0
Application Timestamp:  4f620349
Fault Module Name:  iiscore.dll
Fault Module Version:   8.0.8298.0
Fault Module Timestamp: 4f63b65c
Exception Code: c0000005
Exception Offset:   00021767
OS Version: 6.1.7601.2.1.0.256.28
Locale ID:  1033
Additional Information 1:   f66d
Additional Information 2:   f66d807b515d6b2dc6f28f66db769a01
Additional Information 3:   7b2f
Additional Information 4:   7b2f6797d07ebc2c23f2b227e779722e 
```

更新，如果我将 webrole 和 worker 角色的实例计数都降低到 1，那么它不会崩溃，也许是 azure 模拟器的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:23:02.257

这里有几个问题，所以让我们从第一个开始。可以在此处找到使用添加模块 (socket.io) 的工作角色的体面示例： [https ://www.windowsazure.com/en-us/develop/nodejs/tutorials/app-using-socketio/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/app-using-socketio/)

接下来当然是关于 Windows 上的模块的对话。一些具有二进制依赖关系的模块不能在 Windows 上运行。这已经是一个很小的数字，但仍然有可能。你应该看看你是否可以在模拟器之外运行你的工作角色代码来验证这一点。

接下来我们应该考虑这个过程。您通常会将需要操作的更改从您的 Web 角色推送到存储队列中，并从您的辅助角色中的 at 队列中提取。如果您有“cron 模块”，则在触发计时器事件时从队列中拉出顶部项目。你总是可以在这里睡觉，但这种阻塞在节点世界中是不受欢迎的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-04T05:51:50.770

这可能不相关，但我想我应该提一下。我遇到了问题，因为 NodeJS 的默认版本似乎太旧而无法与我正在使用的模块一起使用。您可能需要更改 NodeJS 的版本。要查看可用版本列表：

```
Get-AzureServiceProjectRoleRuntime 
```

然后，应用特定版本（示例）：

```
Set-AzureServiceProjectRole [Role_Name] Node 0.10.21 
```

# c# - 通过 SMO 获取 ForeignKey 的参考

> ID：11503086
> 
> 赞同：1
> 
> 时间：2012-07-16T11:13:52.177
> 
> 标签：c#, sql-server, c#-4.0, smo

我想收集有关特定表的信息，所以这是我的代码：

```
StringBuilder sb = new StringBuilder();
sb.AppendLine();
ServerConnection conn = new ServerConnection();
conn.ConnectionString = "";//MyConnection string
Server srv = new Server(conn);
Database db = srv.Databases["MyDataBase"];
Table tb = db.Tables["MyTable"];
foreach(Column c in tb.Columns) {

   sb.AppendLine(c.Name + " -> " + c.DataType.ToString());
   sb.AppendLine(c.ExtendedProperties["MS_Description"].Value.ToString());

  if(c.IsForeignKey){

    //Need to get reference here:
    //Sb.AppendLine("ReferenceColumn")
    //Sb.AppendLine("ReferenceTable")
    //Sb.AppendLine("ReferenceSchema")
  }
} 
```

我找到[了这个，](https://stackoverflow.com/questions/458913/how-to-get-the-table-a-foreign-key-refers-to)但是这个链接`Foreignkeys`首先得到了，有没有办法在这里找到参考（按`Column`类型）？在这种情况下你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:09:25.947

不确定这是否是您要找的东西！

```
foreach (ForeignKey FKey in currentTable.ForeignKeys)
{
    foreach (ForeignKeyColumn FKColumn in FKey.Columns)
    {
        //Hope this is what you are looking for!
        //Check the output of FKColumn.Name
        //Check the output of FKey.ReferencedTable
    }
} 
```

# php - 查询数据库后如何从下拉菜单中为 jQuery 滑块赋值

> ID：11503089
> 
> 赞同：0
> 
> 时间：2012-07-16T11:14:00.520
> 
> 标签：php, jquery

在我的应用程序中，我使用了 3 个 jQuery 滑动条来显示 3 个选项。这些选项是电视的对比度、音量和亮度，我用它们来改变电视各自的效果。我已经为每个客户端的这些属性创建了一个数据库，并创建了服务器和客户端之间的通信。设置其中 3 个值后，我在另一个操作文件中更新我的数据库。但是，我需要向服务器端的用户显示滑块的这 3 个属性的当前值。有一个用于选择客户端的下拉菜单，因此在选择客户端后，用户应该会看到服务器上的当前设置是什么。

我只是不知道该怎么做。任何帮助或想法都会非常有帮助。

```
<script>
    $(function() {
        $( "#slider-range-min" ).slider({
            range: "min",
            value: 0,
            min: 0,
            max: 63,
            slide: function( event, ui ) {          
                $("#amount").val("" + ui.value);    
            },
            change: function(event, ui) { 
                $('#volume').attr('value', ui.value);
        }});
        $( "#slider-range-max" ).slider({
            range: "min",
            value: 0,
            min: 0,
            max: 128,
            slide: function( event, ui ) {          
                $("#ali").val("" + ui.value);   
            },

            change: function(event, ui) { 
                $('#brightness').attr('value', ui.value);
        }});
        $( "#slider-color" ).slider({
            range: "min",
            value: 0,
            min: 0,
            max: 128,
            slide: function( event, ui ) {          
                $("#col").val("" + ui.value);   
            },
            change: function(event, ui) { 
                $('#color').attr('value', ui.value);
        }});
        $( "#amount" ).val( $( "#slider-range-min" ).slider( "value" ) );
        $( "#ali" ).val( $( "#slider-range-max" ).slider( "value" ) );
        $( "#col" ).val( $( "#slider-color" ).slider( "value" ) );
    });
</script>
<form id="form1" name="form1" method="post" action="dumb.php">
    Display Name :
    <select Name='layout' class="selector">
    <option value="">--- Select ---</option>
    <?php
        $con = mysql_connect ("localhost","username","password");
        if (!$con)
        {
            die('Could not connect: ' . mysql_error());
        }
        mysql_select_db ("mydatabase" , $con);
        $select="deneme";
        if (isset ($select)&&$select!=""){
            $select=$_POST ['NEW'];
        }
    ?>
    <?php
        $list=mysql_query("SELECT display,displayid FROM display");
        while($row_list=mysql_fetch_array($list)){
    ?>
    <option value="<?php echo $row_list['displayid']; ?>"><?php echo $row_list['display'] ?> 
    </option>
    <?php
        }
    ?>
    </select>
    <br/>
    <br/>
    Display Group Name :
    <select Name='displaygroup' >
    <option value=""> --- Select --- </option>
    <?php
        $temp = '0';
        $list_group=mysql_query("SELECT DisplayGroupID,DisplayGroup FROM displaygroup WHERE IsDisplaySpecific = '$temp'");
        while($row_group=mysql_fetch_array($list_group)){
    ?>
    <option value="<?php echo $row_group['DisplayGroupID']; ?>"><?php echo $row_group['DisplayGroup'] ?> 
    </option>
    <?php       
        }
    ?>
    </select>
    <div class="demo">
        <p>
            <label for="amount">Volume Level :</label>
            <input type="text" id="amount" class="size2" value="aduket" style="border:0; color:#f6931f; font-weight:bold;" />

        </p>
        <div id="slider-range-min"></div>
        <p>
            <label for="ali"> Brightness Level : </label>
            <input type ="text" id="ali" class="size1" name="dumb" style="border:0; color:#f6931f; font-weight:bold;"/>
        <div id="slider-range-max"></div>
        <p>
            <label for="col"> Color Level : </label>
            <input type ="text" id="col" class="size1" name="dumb" style="border:0; color:#f6931f; font-weight:bold;"/>

        <div id="slider-color"></div>
        <br/>
        <p>
            <label for="standbyon"> Standby On : </label>
            <input type="checkbox" id="standbyon" name="standbyon" />
            <label for="standbyoff"> Standby Off : </label>
            <input type="checkbox" id="standbyoff" name="standbyoff" />
        </p>
        <input type="submit" name="Submit" value="Submit" />
    </div><!-- End demo -->
    <input type="hidden" id="volume" name="volume"/>
    <input type="hidden" id="brightness" name="brightness"/>
    <input type="hidden" id="color" name="color"/>
</form> 
```

那是在服务器端运行的代码。我需要使用所选显示器的当前设置来设置这些属性值。但是，我找不到方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:58:18.640

{ echo $row_list['display'] ?>}

should be:

{ echo $row_list['display']; ?>}

You forgot ";"

Dont forget those ";" :)

**UPDATE**

echo $row_list['display'] ?> is missing ;

# php - 在正则表达式中需要帮助以检测谷歌转换 ID

> ID：11503091
> 
> 赞同：-2
> 
> 时间：2012-07-16T11:14:14.537
> 
> 标签：php, regex

我有一个抓取覆盖和再营销代码的脚本，但我需要帮助来检测转化 ID，例如：

```
<!-- Google Code for current client Remarketing List -->
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 1057577648; 
var google_conversion_language = "en";
var google_conversion_format = "3";
var google_conversion_color = "666666";
var google_conversion_label = "FJ8sCKCE9wEQsLWl-AM";
var google_conversion_value = 0;
/* ]]> */ 
```

需要这样的正则表达式：

```
$gaRegExp = "Regex Here";

preg_match( $gaRegExp , $str , $matches);

$conversion_id = $matches; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:18:53.040

尝试这个

```
$subject = 'var google_conversion_id = 1057577648; 
var google_conversion_language = "en";
var google_conversion_format = "3";
var google_conversion_color = "666666";
var google_conversion_label = "FJ8sCKCE9wEQsLWl-AM";
var google_conversion_value = 0;';
$pattern = '!(?<=google_conversion_id\s\=\s)\d+!';
preg_match($pattern, $subject, $matches);
print_r($matches); 
```

输出：

```
Array ( [0] => 1057577648 ) 
```

获取元素`$conversion_id=$matches[0];`

# xml - 在 Windows 中使用 XML::Simple 时出错

> ID：11503096
> 
> 赞同：0
> 
> 时间：2012-07-16T11:14:36.220
> 
> 标签：xml, perl, module

请找出我安装后遇到的错误`XML::Simple`。我已经安装了解析器，xam，但我仍然收到同样的错误。

错误：

```
XMLin() requires either XML::SAX or XML::Parser at XML_parser1.pl line 12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:15:27.317

删除到目前为止所做的更改，并按照推荐的方式安装软件包：

*   [如何将 CPAN 模块安装到 ActivePerl](http://www.activestate.com/blog/2010/10/how-install-cpan-modules-activeperl)
*   [XML-Simple PPM 信息](http://code.activestate.com/ppm/XML-Simple/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:39:47.073

Start by undoing the mangling of Perl's directories (deleting the files you copied into them), then install XML::Simple properly. The following will do with ActivePerl:

```
ppm install XML::Simple 
```

No idea what "xam" is, but it's not one of the parsers requested.

# c# - 一个 XSD、两个代码生成工具、两个命名空间

> ID：11503097
> 
> 赞同：0
> 
> 时间：2012-07-16T11:14:38.177
> 
> 标签：c#, java, xsd, jaxb, codegen

我有一个 XSD 文件，我也想从中生成 C# 和 Java 类。

我首先根据我的类所在的 C# 命名空间在 XSD 中设置命名空间。生成（使用 Microsoft 工具）运行良好，序列化也运行良好，我可以针对 XSD 验证它们 - 完美。

现在我想用 JAXB 创建 java 类。问题是要创建的类与 C# 中的类具有不同的包结构。所以当我将 XSD 命名空间设置为 java 的包结构时，它工作正常。我可以序列化和验证 XML。

现在我的问题是：有没有办法解决这个问题？（两个生成工具都有一个 XSD）我是否缺乏对命名空间实际需要什么的理解？

谢谢

*编辑：由于似乎存在误解，我添加了一个示例*

**XSD: targetNamespace = "http://foo.bar/mySubNs/model"**

*   C# 模型命名空间：com.foo.mySubNs.model（适合 XSD 命名空间）所有生成的类都将具有通过 MS 代码生成提供的相同命名空间
*   Java 模型命名空间：com.foo.myOtherSubNs.model（不同于 XSD 命名空间）生成的类将具有“C# 命名空间”。结果这些类将无法编译。

如果我要在 java 代码生成期间更改命名空间，我可以编译这些类。到现在为止还挺好。但是我将无法针对 XSD 验证该 java 类生成的 XML，因为名称空间不同。

为了在 Java 中编组我的对象，我像这样使用 JAXB：

```
 ValidationEventCollector validationCollector = new ValidationEventCollector();
  SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
  Schema schema = schemaFactory.newSchema(new File ("my/schema/location"));

  // JAXB_CONTEXT is just an instance of "JAXBContext"
  Marshaller marshaller = JAXB_CONTEXT.createMarshaller();    

  marshaller.setSchema(schema);

  marshaller.setEventHandler(validationCollector);

  marshaller.setProperty(Marshaller.JAXB_ENCODING, "UTF-8");
  marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

  JAXBElement<MyClass> root = new JAXBElement<MyClass> (  new QName(MyClass.class.getPackage().getName(),"MyClass"),MyClass.class, node);

  marshaller.marshal(root, new File("output/Path/obj.xml")); 
```

要从架构构建我的 java 类，我在 ant 构建脚本中使用 xjc-task：

```
<xjc destdir="${dir.src.gen}" removeOldOutput="no" extension="true">
    <schema dir="${dir.schema}" includes="${file.schema}"/>
    <binding dir="${dir.schema}" includes="*.xjb"/>
    <produces dir="${dir.src.gen}" includes="**/*.java"/>
</xjc> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:21:35.280

XSD 命名空间不必匹配包结构，至少在 Java 中不是。使用 JAXB 生成类时，只需提供要将类放入的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:18:42.610

您必须选择哪种模型是主要模型：XSD、C# 或 Java 代码。一旦你做出了选择，你必须让其他两个尽可能地变化。最好的选择是将您的 XSD 作为参考模型，使用各自的工具生成两种语言的代码，然后接受结果。

您也可以尝试选择 XML 名称空间，以使两端的代码都令人满意，但不要尝试将任何内容强制到最后一个字母。这不是它的工作方式。

# c# - 使用 .load() 防止滚动到顶部

> ID：11503100
> 
> 赞同：1
> 
> 时间：2012-07-16T11:14:46.093
> 
> 标签：c#, jquery

在使用 jQuery 的 .load 函数时，我试图阻止滚动到顶部。我在 SO 上读过，你可以使用`event.preventDefault(); event.stopPropagation();`. [这](https://stackoverflow.com/questions/7537777/prevent-scrolling-to-top-when-using-jquery-load)是这个问题的链接。但是当使用 beginform 时，这里没有事件。

我也尝试在提交按钮上放置一个点击事件，但这也没有用。

提前致谢！

这是视图的代码。当成功时，函数 closeFancyReservationCancel 被调用。

```
@using (
    Ajax.BeginForm("Cancel", 
                   "Reservation", 
                   new AjaxOptions { HttpMethod = "POST", 
                                     OnSuccess = "closeFancyReservationCancel"}, 
                   new { id = "cancelForm" }))
    {
        ...
    }
) 
```

这是jQuery函数

```
function closeFancyReservationCancel() {
    $.fancybox.close();
    $('#reservationList').load(ResolveUrl('~/Reservation/reservationList'));
}

function ResolveUrl(url) {
if (url.indexOf("~/") == 0) {
    url = baseUrl + url.substring(2);
}
    return url;
} 
```

这是我的 HTML 的一部分：

```
<div id="reservationList" class="tblContainer">
    @Html.Action("reservationList", "Reservation")
</div> 
```

动作reservationList 返回一个带有表的视图。只有表的主体有一个`overflow: auto;`.

**编辑：添加了更多信息**

我有一个包含我的预订表列表的 div。我正在使用 MVC3 来显示该列表。当按下取消按钮时，div 将通过 .load 函数重新加载。

**编辑**

这是我的带有表格的 HTML 视图： [Pastebin](http://pastebin.com/VnzLnUj3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:23:29.870

您可以在加载前简单地获取滚动量。并在加载完成后应用相同的滚动量

```
function closeFancyReservationCancel() {
    $.fancybox.close();
    var scroll_amount= $('#reservationList').scrollTop();
    $('#reservationList').load(ResolveUrl('~/Reservation/reservationList'),
                          function() {
                              $('#reservationList').scrollTop(scroll_amount);
                          });
} 
```

如果你愿意，你也可以使用[`.scrollLeft()`](http://api.jquery.com/scrollLeft/)数量。

# mysql - mysql在使用group by和where条件时忽略NULL

> ID：11503101
> 
> 赞同：2
> 
> 时间：2012-07-16T11:14:49.967
> 
> 标签：mysql, null, group-by

我可以用一个非常简单的案例来复制我的问题。
**解释**
我有一个非常简单的表`my_table`，只有一列`column1`。

```
create table my_table (column1 varchar(58)); 
```

我对这个专栏的价值观很少，`NULL`也是其中之一。

```
insert into my_table (column1) values ('value1'), ('value1'), ('value2'), (null), ('value2'); 
```

**问题**
当我尝试查询时， 它通过将所有s 组合在一起`group by column1`来给出预期的结果。`NULL`但是，如果我在类似的东西上添加一个`where`子句`column1`

```
select count(1) as value_count, column1 from my_table where column1 <> 'value1' group by column1; 
```

它忽略了两者`value1`以及`NULL`我期望忽略的地方`value1`。

在这个简单的案例中，我可以通过添加一个`OR`条件来解决这个问题，但是在我原来的案例中添加这个条件真的很痛苦。

有人可以更好地解释我为什么会出现这种行为以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:23:14.267

Null 的意思是“一个值，但我不知道它是什么”。

也是`column1 <> 'value1'`吗？如果column1为null，那么“是一个值，但我不知道它是什么，不等于'value1'”？

显然答案是“我不知道。我不知道价值是什么”。

where 子句包含的唯一行是通过`where`子句测试的行。我们不知道这一行是否通过了测试，所以它不会被包含在查询中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:24:45.707

这是因为任何与 NULL 的比较都不会产生真假结果，而是产生 NULL 结果。因此，条件`column1 <> 'value1'`评估为 NULL，其中`column1`为 NULL，因此不选择 NULL 值。

您可以通过使用诸如`coalesce`测试之类的功能来解决此问题`column1`- 如下所示：

```
select count(1) as value_count, column1 
from my_table 
where coalesce(column1,'') <> 'value1' 
group by column1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:20:31.757

您可以尝试在谓词中使用 MySQL [IFNULL](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_ifnull)：

```
select count(1) as value_count, column1 from my_table where ifnull(column1,'nullvalue') <> 'value1' group by column1; 
```

# listview - javafx listview不刷新？

> ID：11503105
> 
> 赞同：2
> 
> 时间：2012-07-16T11:15:06.437
> 
> 标签：listview, refresh, javafx-2

这是场景：

我有一个充满“Koe”对象的 listView，在 listView 中，“Koe”对象由它们的 LabID 属性列出。

```
public class Koe {
private final SimpleIntegerProperty koeID = new SimpleIntegerProperty();
private final SimpleStringProperty labID = new SimpleStringProperty("");
...

//GETTERS
public int getKoeID(){
    return koeID.get();
}

public String getLabID(){
    return labID.get();
}
...

//SETTERS
public void setKoeID(int iKoeID) {
    koeID.set(iKoeID);
}

public void setLabID(String sLabID){
    labID.set(sLabID);
}
...

@Override
public String toString(){
    return "" + labID.get();
} 
```

现在，一旦选择了 Koe，Koe 的数据就会加载到另一个窗格中，用户可以在其中编辑它并按下 Save 按钮。当按下 Save 按钮时，TextFields 中的值将保存到 Koe 对象中。

```
...
k.setLabID(txtLabID.getText());
... 
```

然而，问题是当用户编辑 Koe 对象的 LabID 时，ListView 不会在 ListView 中显示新的 LabID，直到 ListView 被刷新（作为测试，我尝试在用户点击 Save 按钮时添加一个虚拟 Koe 对象强制刷新，然后它似乎工作）。

我做了一些关于它的阅读，我知道 ListView 应该链接到 SimpleStringProperty 对象。但是，当用户点击 Save 按钮时，setLabID() 方法会更新 Koe 的 LabID（它是一个 SimpleStringProperty 对象）？这与 toString() 方法有关吗？因为这被用来在 listView 中显示 Koe 的 labID？但是话又说回来，这个 toString() 方法是链接到 labID SimpleStringProperty 的吗？

如您所见，我有点困惑。虽然，一切正常，但这只是刷新 ListView 的问题，我还没有解决。

# nginx - nginx 从 memcached 返回损坏的数据

> ID：11503111
> 
> 赞同：2
> 
> 时间：2012-07-16T11:15:16.450
> 
> 标签：nginx, memcached

在我的网站上，我使用 memcached 进行了数据缓存。它存储完全生成的 html 页面。下一步是从 nginx 的 memcached 中获取这些数据，并在没有启动 apache 进程的情况下发回给用户。首先，我尝试通过 php 后端从缓存中获取数据并且它有效。但是当我尝试用 nginx 做这个时 - 我几乎看不到损坏的数据。喜欢![在此处输入图像描述](../Images/14b9a7e5a0e6929e2c2b71a98b15a9e9.png)

我正在寻求解决这个问题的帮助。

ps这里是nginx配置的一部分，如果它可以帮助的话

```
location / {
    #add_header    Content-Type  "text/html";
    set $cachable 1;

    if ($request_method = POST){
        set $cachable 0;
        break;
    }
    if ($http_cookie ~ "beauty_logged") {
        set $cachable 0;
        break;
    }

    if ($cachable = 1) {
        set             $memcached_key   'nginx_$host$uri';
        memcached_pass  127.0.0.1:11211;
    }

    default_type    text/html;
    error_page      404 502 504 405 = @php;
    #proxy_pass http://front_cluster;
}

location @php {
    proxy_pass http://front_cluster;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:23:21.847

Nginx 不处理存储在 Memcached 中的内容，它只是获取它并按原样返回给浏览器。

真正的原因是您的应用程序使用的 Memcached 客户端库。大多数库都会压缩大值（通常是在值大小超过某个阈值时），因此您必须将其配置为不这样做，或者在启用[gunzip 模块](http://nginx.org/en/docs/http/ngx_http_gunzip_module.html)[`memcached_gzip_flag`](http://nginx.org/r/memcached_gzip_flag)的情况下设置（首次出现在 Nginx“不稳定”1.3.6 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:00:56.703

您发布的回复似乎是 gzip 压缩的。我的第一个猜测是返回存储到`Apache`的响应，但是当从through弹出并返回时，标头被省略，因此浏览器收到错误的响应。您可以轻松测试是否是在.`transfer-encoding=gzip``memcached``nginx``memcached``transfer-encoding``Apache`

如果是这种情况，您应该寻找一种解决方案来保留`transfer-encoding`标题......也许定义不同的规则 - 对于非压缩和压缩内容，并在后一种情况下始终返回标题。但看看这个：[http](http://wiki.nginx.org/HttpSRCacheModule) ://wiki.nginx.org/HttpSRCacheModule 。似乎它处理这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T09:39:21.597

所以，问题出在 Memcached CompressTreshold 中。当数据超过 20k 个符号时，memcached 会打开压缩，即使 congression = false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:43:48.190

问题出在特定的 memcached 行为中。即使您关闭数据压缩，如果您的数据超过 20k 个符号的限制，memcached 也会执行此操作。解决方法是 - （在我的情况下）缓存后端做 smth like`$this->_memcache->setCompressThreshold(20000, 1);`

ps 我使用 Zend_Cache_Backend_Memcached 作为后端的父类。所以上面的字符串必须在`__contstruct()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-24T06:58:25.880

如果您使用的是 PHP Memcached 库，请记住它只能存储带有[`zlib`](http://php.net/manual/fa/memcache.setcompressthreshold.php)编码的压缩数据。Nginx 无法扩展 zlib，即使[`memcached_gzip_flag`](http://nginx.org/r/memcached_gzip_flag)如 Alexander 建议的那样。因此，在这种情况下，您可能不应该在 Memcached 中压缩数据，除非您对压缩*所有内容*并使用`add_header Content-Encoding deflate`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-29T09:19:30.653

我遇到了同样的问题，但我最终发现 memcached 客户端使用 PHP[`Memcached`](https://www.php.net/manual/book.memcached.php)扩展来保存数据，而我们使用 PHP[`Memcache`](https://www.php.net/manual/book.memcache.php)扩展从 memcached 服务器读取数据。

更改为`Memcache`两者都使用后，问题解决了！

您可以通过使用`Memcache`PHP 扩展来保存数据来解决压缩问题。

# java - java 实用程序类

> ID：11503115
> 
> 赞同：3
> 
> 时间：2012-07-16T11:16:07.360
> 
> 标签：java

java中的util类可以通过两种方式制作

```
class Utils  
{   
  public static ReturnType someUtilMethod(  
 // ...   
} 
```

并执行 util 方法

```
Utils.someUtilMethod(...); 
```

或者我可以做

```
class Utils  
{  
  public Utils(){}     
  public ReturnType someUtilMethod(  
 // ...   
} 
```

并执行 util 方法

```
new Utils().someUtilMethod(...) 
```

什么方法更好？这些方式之间有一些区别吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T11:17:13.573

通常 Util 类包含 Utility 方法，这些方法不需要存储 Object 的状态来处理，因此`static`方法很适合那里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:19:35.547

效用函数应该始终是`static`，除非由于某种原因它依赖于其他一些变量的*状态*，并且在调用之间需要记住这些变量。

后者几乎不应该发生，尽管像伪随机数生成器这样的东西可能是一个很好的例子。

这些`Math`函数是效用函数的一个很好的例子。当您调用时`Math.sin()`，结果*仅*取决于提供的参数。不涉及“状态”，因此无需创建对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:20:28.343

**静态访问**将是一种更好的方法，因为在 Util 类中包含不关心对象属性的方法。

另一个例子是**Math Class**。

*   数学类**没有实例变量**。

*   并且有**私有构造函数**，所以不能创建对象。

*   因此，在 Math 类案例中，使用 Math.PI 之类的静态访问是合适的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T11:20:23.597

如果你使用一个只有静态方法的类，你就不需要在每次需要使用的时候实例化对象，节省了一行代码和一些内存。只要记住将默认构造函数设为私有，这样就不会有人无意中实例化它！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T11:20:34.953

实用程序类只是在 Java 中在语法上保存全局函数的地方。

您的第二个示例未包含在“实用程序类”一词中。该概念的定义包括类的不可实例化。

拥有实例方法的原因是动态方法分派（以实现多态性），或者可能持有一些非全局状态。但是，正如我所说，那么您将超出“实用程序类”一词的范围。

# android - 如何在 vs-android 构建中启用 c++0x

> ID：11503118
> 
> 赞同：1
> 
> 时间：2012-07-16T11:16:17.980
> 
> 标签：android, c++, c++11, android-ndk, vs-android

我正在使用 vs-android (http://code.google.com/p/vs-android) 为带有 ndk 的 android 平台编译 c++ 项目。

除了编译使用 c++0x/c++11 标准中的特性（如 std::function、nullptr ）的代码时，这一切都运行良好......我假设，或者至少希望，我可以解决这个问题通过添加编译器选项 -std=c++0x。

我尝试在“命令行”下的“附加选项”中添加它，一些错误似乎消失了，但不是全部。包括原因问题，types.h 抱怨 uint64_t 不存在和许多其他类似问题。

有谁知道如何解决这一问题？代码没有任何问题，因为它与针对 Windows 平台的 msvc10 完美编译。我正在使用视觉工作室 2010。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:13:16.370

vs-android 现在支持 gcc 4.6，它具有很好的 c++11 支持，并且如果使用`-std=gnu++0x`而不是定义`-std=c++0x`了`uint64_t`类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:00:45.377

即使 vs-android 使用 Visual Studio 作为 IDE，它仍然使用 gcc 4.4.3 作为编译器（这是 2.5 年前发布的）。例如，根据[http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)，`nullptr`仅从 gcc 4.6 开始支持，因此您不能使用它。

我不知道这个`uint64_t`问题。但是对于 NDK，您最好坚持使用 C++03（甚至 C）。

# linux - 在纯 C++ 项目中跳过 Qt Creator Linux 断点

> ID：11503122
> 
> 赞同：3
> 
> 时间：2012-07-16T11:16:31.303
> 
> 标签：linux, qt, qt4

好吧，标题几乎说明了一切。我启动 Qt Creator，创建一个新项目并单击普通 C++ 选项。它在 main.cpp 文件中创建以下代码：

```
#include <iostream>

using namespace std;

int main()
{
    cout << "Hello World!" << endl;
    return 0;
} 
```

`cout`我在以or开头的行上放了一个断点`return`。

我将项目模式设置为调试。

我单击带有错误的播放按钮。

它不会在断点处停止。

如果我做了完全相同的事情，但创建了一个 Qt GUI 应用程序，它就可以工作。

非常感谢您的帮助。

谢谢你。

哦，是的，如果有什么不同的话，我使用的是最新版本的 Linux Mint，据我所知，GCC 和 GDB 已安装。

编辑：这里是：

编译输出：

```
23:27:37: Running build steps for project untitled2...
23:27:37: Starting: "/usr/bin/qmake-qt4" '/home/jean-luc/Desktop/untitled folder/untitled2/untitled2.pro' -r -spec linux-g++ CONFIG+=debug CONFIG+=declarative_debug
23:27:37: The process "/usr/bin/qmake-qt4" exited normally.
23:27:37: Starting: "/usr/bin/make" -w
make: Entering directory `/home/jean-luc/Desktop/untitled folder/untitled2-build-desktop-Qt_4_8_1_in_PATH__System__Debug'
g++ -c -pipe -g -Wall -W -DQT_WEBKIT -I/usr/share/qt4/mkspecs/linux-g++ -I../untitled2 -I../untitled2 -I. -o main.o ../untitled2/main.cpp
g++  -o untitled2 main.o      
{ test -n "" && DESTDIR="" || DESTDIR=.; } && test $(gdb --version | sed -e 's,[^0-9]\+\([0-9]\)\.\([0-9]\).*,\1\2,;q') -gt 72 && gdb --nx --batch --quiet -ex 'set confirm off' -ex "save gdb-index $DESTDIR" -ex quit 'untitled2' && test -f untitled2.gdb-index && objcopy --add-section '.gdb_index=untitled2.gdb-index' --set-section-flags '.gdb_index=readonly' 'untitled2' 'untitled2' && rm -f untitled2.gdb-index || true
make: Leaving directory `/home/jean-luc/Desktop/untitled folder/untitled2-build-desktop-Qt_4_8_1_in_PATH__System__Debug'
23:27:38: The process "/usr/bin/make" exited normally. 
```

应用程序输出：

> > 调试开始 调试完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:19:23.290

即使这已经有几天了，我还是想添加这个解决方案，因为所描述的问题偶尔会发生在 Qt 和 Creator 中：Qt Creator 有一个讨厌的习惯，建议将发布和调试对象放在同一个文件夹中。因此，如果您编译发布版本，然后决定调试您的程序并进行调试版本，它将链接调试应用程序与发布对象。这些对象不能设置断点。您需要完全清理项目，调用 qmake 并在调试模式下进行所有操作。然后你应该能够正确设置断点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T13:43:03.573

你可以简单地给 cmake 命令**cmake -DCMAKE_BUILD_TYPE=Debug**

或者

**SET(CMAKE_BUILD_TYPE Debug)**将此行添加到 CMakeLists.txt 并立即调试。断点将被正确命中。

# ruby - 在其他模块中包含一个模块

> ID：11503123
> 
> 赞同：7
> 
> 时间：2012-07-16T11:16:41.150
> 
> 标签：ruby

```
module A; def a; end; end
module B; def b; end; end

class C; include A; end

module A; include B; end
class D; include A; end

C.new.b # undefined method error
D.new.b # nil

C.ancestors # [C, A, Object...]
D.ancestors # [D, A, B, Object...] 
```

如何在 A 中包含模块 B，以便已经包含模块 A 的类也可以从模块 B 中获取方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T14:17:56.417

如前所述，Ruby 不是这样工作的——当一个类包含一个模块时，它不会维护对该模块实例的任何引用，因此如果该模块包含其他模块，则已经包含它的类将获胜不知道变化。

您可以通过将包含该模块的类存储在模块本身中来解决此问题 - 这样您就可以在模块包含另一个模块时更新它们，例如：

```
module A

  class<<self
    attr_accessor :observers
  end

  self.observers = []

  def a
    "#{self} successfully called a"
  end

  def self.included(base)
    self.observers << base unless self.observers.include?(base)
  end

  def self.include(mod)
    observers.each {|o| o.send(:include,mod) }
    super
  end

end

module B
  def b
    "#{self} successfully called b"
  end
end

class C
  include A
end

module A
  include B
end

class D
  include A
end

module E
  def e
    "#{self} successfully called e"
  end
end

module A
  include E
end

puts C.new.b 
puts D.new.b 
puts C.new.e
puts D.new.e 
```

不确定这是您想要采取的方向，但表明原则上可以做到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:08:48.957

你不能。

当你`include`将 mixin`M`加入一个类`C`时，Ruby 会创建一个新类`⟦M′⟧`，它的方法表指向 mixin 的方法表，`M`并且它的超类是 的超类`C`，然后使这个类成为新的超类`C`。对于混入的每个 mixin 都会重复此操作`M`。

请注意，此算法仅运行一次，当您`M`混入`C`. 稍后获得 d 的模块`include`将不会被考虑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:37:15.827

您应该在 **C 类之前将 B 包含在 A 中；包括A；结束**。

```
module A; def a; end; end
module B; def b; end; end

module A; include B; end

class C; include A; end
class D; include A; end

p C.new.b # nil
p D.new.b # nil

p C.ancestors # [C, A, B, Object, Kernel, BasicObject]
p D.ancestors # [D, A, B, Object, Kernel, BasicObject] 
```

**编辑**

```
module A; def a; end; end
module B; def b; end; end

class C; include A; end

module A; include B; end
class D; include A; end

C.send(:include, A)

p C.new.b # nil
p D.new.b # nil

p  C.ancestors # [C, A, Object...]
p D.ancestors # [D, A, B, Object...] 
```

# android - 如何访问呼叫和管理呼叫

> ID：11503124
> 
> 赞同：0
> 
> 时间：2012-07-16T11:16:43.177
> 
> 标签：android

我正在考虑在我的应用程序中管理呼叫。说 1 分钟后有可能打电话给某人并断开连接吗？我想让某事像“经济的来电者”:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:54:17.540

对的，这是可能的。

搜索关于

-广播接收器

-Android 警报管理器

-然后输入谷歌：

*android如何拨打一个号码

*android接收来电/去电

但是在获得帮助之前你必须先搜索。

# javascript - 如何为 XmlHttpRequest 保留多组 cookie

> ID：11503134
> 
> 赞同：1
> 
> 时间：2012-07-16T11:17:42.480
> 
> 标签：javascript, cookies, web, xmlhttprequest

我想让多个 XmlHttpRequests 使用不同的 cookie 集，以保持多个用户在同一个站点上登录。实现这一目标的最佳方法是什么？

请注意，如果需要，我可以使用本地存储在请求之间保留额外的 cookie 集。但我仍然不知道如何将 XmlHttpRequest 与与网站浏览器范围的 cookie 不同的 cookie 一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:21:57.090

你就是不能。XmlHttpRequest 将始终使用该站点的浏览器范围的 cookie，您需要更改该设置（例如，从 localStorage 更改为一个）。

对于跨域请求，您只能告诉浏览器应该使用 cookie，如[如何在 JavaScript 中使用 XMLHttpRequest 设置 Cookie（标头）？](https://stackoverflow.com/questions/2320110/how-do-i-set-a-cookie-header-with-xmlhttprequest-in-javascript).

从[xhr 的规格](http://www.w3.org/TR/XMLHttpRequest/#the-send-method)：

> 如果用户代理支持 HTTP 状态管理，它应该坚持、丢弃和发送 cookie（在 Set-Cookie 响应头中接收，并在 Cookie 头中发送）。[[饼干](https://www.rfc-editor.org/rfc/rfc6265)]

...并且`cookie`标题不允许在[`setRequestHeader()`方法](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method)中被覆盖，您不能根据请求手动设置它们。

# php - 在 WAMP 环境中设置 Concerto 自适应测试平台时出错

> ID：11503135
> 
> 赞同：1
> 
> 时间：2012-07-16T11:17:55.617
> 
> 标签：php, mysql, r, xampp, wamp

我需要在 WAMP 环境中设置 Concerto 平台来开发自适应测试。Concerto 平台的链接在这里[http://code.google.com/p/concerto-platform](http://code.google.com/p/concerto-platform)

这就是我所做的：1）设置 WAMP 网络服务器 2）设置 R 语言 3）设置本地主机并检查 php、mysql 和 R 的工作。

现在我在安装 Concerto 的过程中遇到了问题，特别是在本安装指南的倒数第二步 ../concerto-platform/wiki/installation3 之后

Concerto 设置成功地执行了 php 和 mysql 数据库的创建。此后，Concerto 安装程序在运行安装脚本时无法识别 R 版本，如安装下载 ../concerto-platform/downloads/list（zip 文件 3.8 MB）中的建议

我已将 Concerto 源安装 zip 文件的内容提取到“C:/wampp/htdocs/concerto”目录，并且设置脚本 index.php 位于“C:/wampp/htdocs/concerto/setup/”子目录中.

当我从浏览器 (localhost/concerto/setup/index.php) 运行设置脚本时，我收到以下错误。“注意：第 97 行 C:\wampp\htdocs\concerto\setup\index.php 中未定义的偏移量 0。R 版本安装必须至少为 R >= v2.12。您的 R 版本为 :v”

它无法获取和显示安装的 R 版本，实际上是 R v2.14 当我检查 line97 和引用的 php 函数时，我注意到以下代码片段。

```
public static function rscript_check()
{
    $array = array();
    $return = 0;
    exec("'" . Ini::$path_r_script . "' -e 1+1", $array, $return);
    return ($return == 0);
}

public static function r_version_check($version)
{
    $elems = explode(".", $version);
    if($elems[0]>2) return true;
    if($elems[0]==2)
    {
        if($elems[1]>=12) return true;
    }
    return false;
}

public static function get_r_version()
{
    $output = array();
    $return = 0;
    exec("'" . Ini::$path_r_script . "' --version -e 1+1", $output, $return);
    $version = substr($output[0],10);
    $version = substr($version,0,  strpos($version, " "));
    echo $version;
    return $version;
} 
```

我的预感是 exec 函数无法正常工作，因为我在 start > run "Cmd /c G:/R/R-2.14.0/bin/Rscript.exe" --version -e 中执行了等效的 cmdline 调用1+1" 并且能够手动检查结果，但不能通过上述设置功能。我询问了 Concerto 管理员，最近才开设了一个新的讨论论坛[http://www.psychometrics.cam.ac。 uk/page/343/discussion-forum.htm](http://www.psychometrics.cam.ac.uk/page/343/discussion-forum.htm)

因此，我在这里向 SO 社区寻求帮助。非常感谢任何设置此安装的指针。PS：这里是我在 zip 文件中提供的 settings.php 文件中输入的设置

```
 >{phpstart

 >    //MySQL
->$db_host = "localhost";
->$db_port = "3306";
->$db_user = "root";
->$db_password = "";
->$db_name = "test";

 >//paths
->$path_external = "http://localhost/concerto"; //e.g. http://domain.com/concerto/
->$path_r_script = "G:/Program Files/R/R-2.14.0/bin/Rscript.exe"; //e.g. /usr/bin/Rscript
->$path_r_exe = "G:/Program Files/R/R-2.14.0/bin/R.exe"; //e.g. /usr/bin/R
->$path_php_exe = "C:/wampp/php"; //e.g. /usr/bin/php
->$path_mysql_home = "C:/wampp/mysql/bin"; //Home directory of MySQL server. It will be probably needed if you want to install Concerto on Windows platform. e.g. C:/Program Files/MySQL/MySQL Server 5.5
->$path_sock = "C:/wampp/htdocs/concerto/socks/"; //leave blank for default - /[concerto_installation_path]/socks/
->$path_temp = "C:/wampp/htdocs/concerto/temp/"; //leave blank for default - /[concerto_installation_path]/temp/

 >//R connection
->$r_instances_persistant = true; //true  - R instances are persistant and open throughout the whole test ( faster, but consumes more system resources, EXPERIMENTAL ), false - R instances are closed and restored when needed ( slower, but consumes less system resources )                           
->$r_instances_persistant_instance_timeout = 300; //after set period of instance inactivity in seconds the instance will be closed
->$r_instances_persistant_server_timeout = 420; //after set period of server inactivity in seconds the server will be closed ( new instances can restart it anytime )
->$r_max_execution_time = 120; //maximum R execution time ( prevents infinite loops in R on server )

 >//general
->$timezone = 'Europe/London';
 ->$public_registration = false;
 ->$public_registration_default_UserType_id = 4;

  >//remote client
  ->$remote_client_password = "pass";

  ->//ALWAYS RUN /setup AFTER CHANGING SETTINGS IN THIS FILE!
 ->?}phpend 
```

我将感谢您从您的个人经验或在您的 WAMP/LAMP 环境中运行快速协奏曲安装的任何想法和想法。我自己在 Win XP 上运行它。也许有人可以就这个主题提出一些解决方法（如果 exec 确实是罪魁祸首，则围绕 exec() ）。

十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T06:41:20.143

我有相同的配置，对我来说效果很好。首先，我建议你使用 R2.12 而不是 R2.14，你可以在这里获得它[http://cran.r-project.org/bin/windows/base/old/2.12.1/](http://cran.r-project.org/bin/windows/base/old/2.12.1/)

我还建议您通过更改“R 连接”部分来更改 SETTINGS.php 文件。添加以下行

```
//R connection
$server_socks_type = "TCP"; // UNIX or TCP, choose TCP for any other OS than Linux
$server_host = "127.0.0.1"; //is socket server set to TCP, choose host to connect to
$server_port = "80"; //if socket server set to TCP, choose port used for connection
$r_instances_persistant_instance_timeout = 300; //after set period of instance inactivity in seconds the instance will be closed
$r_instances_persistant_server_timeout = 420; //after set period of server inactivity in seconds the server will be closed ( new instances can restart it anytime )
$r_max_execution_time = 30; //maximum R execution time ( prevents infinite loops in R on server )
$unix_locale = ""; //Unix locale LANG variable. Must be installed on the system. Leave blank for none/default. 
```

当您使用 WAMP 时，您必须进行一些更改。

希望它会帮助你。

**鬼**

# iphone - 为什么我们在 aurioTouch 项目中只使用第一个缓冲区

> ID：11503139
> 
> 赞同：3
> 
> 时间：2012-07-16T11:18:17.763
> 
> 标签：iphone, ios, audio, fft, frequency

我正在研究[aurioTouch2](http://developer.apple.com/library/ios/#samplecode/aurioTouch2/Introduction/Intro.html)示例代码。
我注意到，当我们分析音频数据时，我们只使用该数据的第一个缓冲区，而不使用其他缓冲区。在`void FFTBufferManager::GrabAudioData(AudioBufferList *inBL)`功能上：

```
 UInt32 bytesToCopy = min(inBL->mBuffers[0].mDataByteSize, mAudioBufferSize - mAudioBufferCurrentIndex * sizeof(Float32));
    memcpy(mAudioBuffer+mAudioBufferCurrentIndex, inBL->mBuffers[0].mData, bytesToCopy); 
```

在功能上

```
static OSStatus PerformThru(
                            void                        *inRefCon, 
                            AudioUnitRenderActionFlags  *ioActionFlags, 
                            const AudioTimeStamp        *inTimeStamp, 
                            UInt32                      inBusNumber, 
                            UInt32                      inNumberFrames, 
                            AudioBufferList             *ioData)
if (THIS->displayMode == aurioTouchDisplayModeOscilloscopeWaveform)
{
        AudioConverterConvertComplexBuffer(THIS->audioConverter, inNumberFrames, ioData, THIS->drawABL);
        SInt8 *data_ptr = (SInt8 *)(THIS->drawABL->mBuffers[0].mData);
} 
```

问题是为什么我们忽略 inBL->mBuffers [1](http://developer.apple.com/library/ios/#samplecode/aurioTouch2/Introduction/Intro.html) .mData 中的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T22:25:42.823

由于您的 iPhone 上只有 1 个麦克风，因此 2 个立体声通道缓冲区（L 和 R）中的样本是相同的。由于第二个缓冲区只是多余的（或在某些配置中为空），因此不需要（再次）分析那里的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:00:29.430

可能是，我错了，但现在有区别，使用什么缓冲区。您只有 2 个缓冲区： mBuffers[0] 和 mBuffers [1](https://i.stack.imgur.com/WH6SC.jpg)。我尝试在频谱图中使用缓冲区 0 而不是缓冲区 1（发音相同）。使用缓冲区 0 完成了图像的左侧部分；右侧部分 - 使用缓冲区 1（在制作快照期间产生了右侧峰值）。

所以，你可以看到，没有区别。

![在此处输入图像描述](../Images/f800b91dd09d5928934ad9e2c846c2cb.png)

# php - 我可以在 AUTOINCREMENT 字段中插入数据吗？

> ID：11503141
> 
> 赞同：0
> 
> 时间：2012-07-16T11:18:20.290
> 
> 标签：php, mysql

像它本身一样简单。我想要一个自动增量字段，但有时我必须在某些必须手动设置的字段中重复 id。

使用 PHP 对 Mysql 中的 AUTOINCREMENT 字段执行此操作有什么问题吗？（一致性 ， ... ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:22:07.717

1.  您可以手动设置自动增量字段，索引将从该数字开始继续计数（除非 id 小于当前的 ai 索引）
2.  自动增量字段是唯一的，因此您在手动设置 ai 字段时必须非常小心
3.  通常不应手动设置自动增量字段。如果您发布您的用例，也许我们可以帮助您制定更好的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:29:36.043

根据您的 php 结构，您可以替换：

```
INSERT INTO table_name (name, incr)
VALUES ('hello', {$incr}) # using retrieved data 
```

和

```
INSERT INTO table_name (name, incr)
SELECT 'hello', incr
FROM (  SELECT (incr + 1) AS incr
        FROM table_name
        ORDER BY incr DESC
        UNION
        SELECT 1) AS h
LIMIT 1 
```

基本上，它只会检查`incr`表中的最高值，或者从 1 开始。这只需要一个 MySQL 调用，并且会加快速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:26:45.007

考虑使用复合主键（2 列或更多列来创建主键）。一列可能是自动增量，另一列是您的“重复 ID”。无论哪种方式，这都可以确保每一行都有一个唯一的键。

# java - Android：在 Android 应用程序中使用来自 Gottox 的 java socket.io 客户端

> ID：11503142
> 
> 赞同：4
> 
> 时间：2012-07-16T11:18:22.507
> 
> 标签：java, android, socket.io

好吧，我正在编写一个 android 应用程序，我想使用Gottox 编写的[Socket.IO-Client for Java](https://github.com/Gottox/socket.io-java-client)。github 中的文档专门说该库与 android 兼容。

现在我的问题有点基本。**如何在 android 应用程序中使用该库？**

到目前为止，我已经尝试了两种方法。

1.  我使用命令构建了该库的 jar 文件（如库的文档中所述）

    ```
    cd $PATH_TO_SOCKETIO_JAVA
    ant jar
    ls jar/socketio.jar 
    ```

    我在文件夹中有一个不错的 jar 库。我将那个 jar 添加到我的项目中使用

    ```
    RIGHT_CLICK->Properties->Java Build Path->Add External Jars 
    ```

    然后我连接使用

    ```
    SocketIO socket = new SocketIO("http://"+ip+":"+port+"/"); 
    ```

    我能够编译和构建我的应用程序而没有任何错误。但是当我运行时，我在上面发布的行中遇到了异常。

    ```
    java.lang.NoClassDefFoundError: io.socket.SocketIO
        at com.research.socketioresearch.LoginActivity.connectToSocketIO(LoginActivity.java:122)
        at com.research.socketioresearch.LoginActivity$1.handleMessage(LoginActivity.java:113) 
    ```

2.  作为第二次尝试，我在 Eclipse 中使用 socket.io 库源代码创建了一个 java 项目。然后我将该项目导出为 jar 文件，使用

    ```
    RIGHT_CLICK->export->java->Jar File 
    ```

    然后我使用我在方法 1（添加外部 jars）中尝试的相同方式将该 jar 文件添加到我的原始 android 项目中。这一次我也能够编译和构建，但在同一行代码中得到了相同的异常。

现在有人成功地在 android 中使用相同的库吗？它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:03:25.510

好吧，我自己搞定了..

1.  使用我在问题中提到的第一种方法，你会在路径中得到一个jar文件

    ```
    PATH_TO_SOCKETIO_JAVA/jar/socket.jar 
    ```

2.  现在在您的 android 项目中，创建一个名为“libs”的文件夹（如果它不存在）
3.  将该 jar 文件复制到“libs”文件夹。
4.  转到eclipse并刷新android项目。

我仍然不确定为什么使用项目属性中的“添加外部 Jars”按钮添加 jar 文件不起作用。两者都将库添加到项目中，对吗？

# android - 如何在跨平台（Windows、iOS、Android）C++ 应用程序中表示字符串？

> ID：11503145
> 
> 赞同：2
> 
> 时间：2012-07-16T11:18:38.677
> 
> 标签：android, c++, ios, windows, directx

我正在开发一个应用程序，其核心代码库将是 Windows、iOS 和 Android 的跨平台。

我的问题是：我应该如何在内部表示这个应用程序使用的字符串，以便能够在所有三个平台上有效地使用它们？

需要注意的是，我在 Windows 中大量使用 DirectWrite，其中 API 函数通常期望 wchar_t* 被传递（顺便说一句。API 文档指出“指向 Unicode 字符数组的指针。”，我没有知道这是否意味着它们采用 UTF-16 编码）

我看到了三种不同的方法（但是我发现很难掌握以跨平台方式使用 C++ 处理 Unicode 字符串的细节，所以我可能错过了一些重要的概念）：

*   在内部各处使用 std::string （并以 UTF-8 编码存储字符串？），并将它们转换为 DirectWrite API 所需的 wchar_t* （我不知道文本处理 API 需要什么Android 和 iOS 尚未）。
*   在内部到处使用 std::wstring 。如果我理解正确，从内存使用的角度来看，这不会有效，因为 wchar_t 在 iOS 和 Android 上是 4 个字节（这是否意味着我必须在 Windows 上以 UTF-16 和Android/iOS 上的 UTF-32？）
*   使用抽象基类为字符串创建抽象，并专门为不同平台实现内部存储。

最好的解决方案是什么？顺便说一句，是否有任何现有的跨平台库可以抽象字符串处理？（还有，读取和序列化 Unicode 字符串）

（更新：删除了关于 char* 和 std::string 区别的问题的部分。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T20:34:54.023

我的问题的一部分来自我的误解，或者不完全理解**string**和**wstring**类在 C++ 中是如何工作的（我来自 C# 背景）。这个很好的答案已经描述了两者的区别和利弊：[std::wstring VS std::string](https://stackoverflow.com/a/402918/974733)。

## string 和 wstring 的工作原理

对我来说，关于 string 和 wstring 类的*最*重要的发现是它们在语义上并不代表一段*编码文本*，而只是一个 char 或 wchar_t 的“字符串”。它们更像是一个*简单的数据数组*，带有一些特定于字符串的操作（如 append 和 substr），而不是表示文本。他们都不知道任何类型的字符串编码，他们将每个 char 或 wchar_t 元素单独处理为单独的字符。

## 编码

但是，在大多数系统上，如果您从带有特殊字符的字符串文字创建字符串，如下所示：

```
std::string s("ű"); 
```

**ű**字符将由内存中的一个以上字节表示，但这*与 std::string 类无关*，这是编译器的一个特性，因为它可以使用 UTF8 编码字符串文字（虽然不是每个编译器）。（并且以 L 为前缀的字符串文字将由 wchar_t-s 以 UTF16 或 UTF32 或其他方式表示，具体取决于编译器）。
因此字符串**“ű”**将在内存中用两个字节表示：**0xC5 0xB1**，并且 std::string 类不会知道这两个字节在语义上意味着 UTF8 中的一个字符（一个 Unicode 代码点），因此示例代码：

```
std::string s("ű");
std::cout << s.length() << std::endl;
std::cout << s.substr(0, 1); 
```

产生以下结果（取决于编译器，一些编译器不将字符串文字视为 UTF8，而一些编译器依赖于源文件的编码）：

```
2
� 
```

size() 函数返回 2，因为 std::string 唯一知道的是它存储了两个字节（两个字符）。并且 substr 也“原始地”工作，它返回一个包含单个字符**0xC5**的字符串，它显示为 �，因为它不是有效的 UTF8 字符（但这不会打扰 std::string）。

从中我们可以看出，处理编码的是平台的各种文本处理 API，比如简单的**cout**或**DirectWrite**。

## 我的方法

在我的应用程序中，DirectWrite 非常重要，它只接受以 UTF16 编码的字符串（以 wchar_t* 指针的形式）。所以我决定将字符串存储在内存和以 UTF16 编码的文件中。但是，我想要一个跨平台的实现，它可以在 Windows、Android 和 iOS 上处理 UTF16 字符串，而**std::wstring**无法做到这一点，因为它的数据大小（以及它适合使用的编码）是平台相关的。

为了创建一个跨平台、严格的 UTF16 字符串类，我将**basic_string**模板化为 2 字节长的*数据类型*。非常令人惊讶 - 至少对我来说 - 我几乎没有在网上找到关于此的信息，我的解决方案基于[这种](http://www.velocityreviews.com/forums/t457958-basic_string-with-unsigned-short.html)方法。这是代码：

```
// Define this on every platform to be 16 bytes!
typedef unsigned short char16;

struct char16_traits
{
    typedef char16 _E;
    typedef _E char_type;
    typedef int int_type;
    typedef std::streampos pos_type;
    typedef std::streamoff off_type;
    typedef std::mbstate_t state_type;
    static void assign(_E& _X, const _E& _Y)
    {_X = _Y; }
    static bool eq(const _E& _X, const _E& _Y)
    {return (_X == _Y); }
    static bool lt(const _E& _X, const _E& _Y)
    {return (_X < _Y); }
    static int compare(const _E *_U, const _E *_V, size_t _N)
    {return (memcmp(_U, _V, _N * 2)); }
    static size_t length(const _E *_U)
    {
        size_t count = 0;
        while(_U[count] != 0)
        {
            count++;
        }
        return count;
    }
    static _E * copy(_E *_U, const _E *_V, size_t _N)
    {return ((_E *)memcpy(_U, _V, _N * 2)); }
    static const _E * find(const _E *_U, size_t _N, const _E& _C)
    {
        for(int i = 0; i < _N; ++i) {
            if(_U[i] == _C) {
                return &_U[i];
            }
        }
        return 0;
    }
    static _E * move(_E *_U, const _E *_V, size_t _N)
    {return ((_E *)memmove(_U, _V, _N * 2)); }
    static _E * assign(_E *_U, size_t _N, const _E& _C)
    {
        for(size_t i = 0; i < _N; ++i) {
            assign(_U[i], _C);
        }
        return _U;
    }
    static _E to_char_type(const int_type& _C)
    {return ((_E)_C); }
    static int_type to_int_type(const _E& _C)
    {return ((int_type)(_C)); }
    static bool eq_int_type(const int_type& _X, const int_type& _Y)
    {return (_X == _Y); }
    static int_type eof()
    {return (EOF); }
    static int_type not_eof(const int_type& _C)
    {return (_C != eof() ? _C : !eof()); }
};

typedef std::basic_string<unsigned short, char16_traits> utf16string; 
```

字符串用上面的类存储，*原始的 UTF16 数据*被传递给各个平台的特定 API 函数，目前所有这些似乎都支持 UTF16 编码。
实现可能并不完美，但是 append、substr 和 size 函数似乎可以正常工作。我在 C++ 中的字符串处理方面仍然没有太多经验，所以如果我陈述不正确，请随时评论/编辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:38:01.957

std::strings 和 char* 之间的区别在于，std::string 类使用 C++ 特性而 char* 不使用。std::string 是 chars 的容器类，并定义了使用它的便捷方法， char* 是指向您可能使用的某些内存的指针。

如果您正在寻找一些独立于平台的基类，我会指向您[QString](http://qt-project.org/doc/qt-4.8/qstring.html)。这是 Qt 库的一部分，旨在实现 C++ 的平台独立实现。[它也是 OpenSource](http://qt.gitorious.org/qt/qt)，因此您可以使用它来了解其他人如何实现平台独立字符串。文档也很好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:08:01.733

在每个平台上实现一个抽象类以不同的方式表示似乎是个坏主意。额外的工作实现和测试（在每个平台上），并且会比仅仅使用 std::wstring 增加更多的开销（当然你可以通过不使用抽象类来抵消开销，而是使用 #ifdefs 来切换实现，但仍然是额外的工作）。

在任何地方使用 std::string 或 std::wstring 似乎都是可行的方法，实现一些实用函数将您选择的字符串转换为系统相关格式，您不会有问题。我正在开发一个已经在 iOS、Windows、Linux 和 Mac 上运行的多平台项目，在这个项目中我使用了多字节 std::string 并且没有太多问题，从未使用过 std::wstring 但我没有不明白为什么它不起作用。

# javascript - 在 d3 中，如何从 SVG 线中获取插值线数据？

> ID：11503151
> 
> 赞同：18
> 
> 时间：2012-07-16T11:19:18.107
> 
> 标签：javascript, graphics, svg, d3.js

我用 D3 显示一个折线图，大致如下代码（给定 scale 函数`x`和`y`float 数组`data`）：

```
 var line = d3.svg.line()
         .interpolate("basis")
         .x(function (d, i) { return x(i); })
         .y(function (d) { return y(d); });
 d3.select('.line').attr('d', line(data)); 
```

现在我想知道**在给定水平像素位置的线的垂直高度**。数组的`data`数据点比像素少，并且显示的线是**插值**的，因此仅从`data`数组中推断给定像素处的线的高度并不直接。

有什么提示吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-27T09:40:40.073

该解决方案比公认的答案更有效。它的执行时间是对数的（而接受的答案具有线性复杂性）。

```
var findYatXbyBisection = function(x, path, error){
  var length_end = path.getTotalLength()
    , length_start = 0
    , point = path.getPointAtLength((length_end + length_start) / 2) // get the middle point
    , bisection_iterations_max = 50
    , bisection_iterations = 0

  error = error || 0.01

  while (x < point.x - error || x > point.x + error) {
    // get the middle point
    point = path.getPointAtLength((length_end + length_start) / 2)

    if (x < point.x) {
      length_end = (length_start + length_end)/2
    } else {
      length_start = (length_start + length_end)/2
    }

    // Increase iteration
    if(bisection_iterations_max < ++ bisection_iterations)
      break;
  }
  return point.y
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-19T06:01:21.910

**2012 年 9 月 19 日根据评论编辑** *，非常感谢 nrabinowitz！*

您将需要对返回的数据进行某种搜索`getPointAtLength`。（参见[https://developer.mozilla.org/en-US/docs/DOM/SVGPathElement](https://developer.mozilla.org/en-US/docs/DOM/SVGPathElement)。）

```
// Line
var line = d3.svg.line()
     .interpolate("basis")
     .x(function (d) { return i; })
     .y(function(d, i) { return 100*Math.sin(i) + 100; });

// Append the path to the DOM
d3.select("svg#chart") //or whatever your SVG container is
     .append("svg:path")
     .attr("d", line([0,10,20,30,40,50,60,70,80,90,100]))
     .attr("id", "myline");

// Get the coordinates
function findYatX(x, linePath) {
     function getXY(len) {
          var point = linePath.getPointAtLength(len);
          return [point.x, point.y];
     }
     var curlen = 0;
     while (getXY(curlen)[0] < x) { curlen += 0.01; }
     return getXY(curlen);
}

console.log(findYatX(5, document.getElementById("myline"))); 
```

对我来说，这将返回 [5.000403881072998, 140.6229248046875]。

这个搜索函数 ,`findYatX`远非高效（在*O(n)*时间内运行），但说明了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T18:38:43.950

我已经尝试实现 findYatXbisection （正如 bumbu 所建议的那样），但我无法让它按原样工作。

我没有根据 length_end 和 length_start 修改长度，而是将长度减少了 50%（如果 x < point.x）或增加了 50%（如果 x> point.x），但总是相对于零的起始长度. 我还结合了 revXscale/revYscale 将像素转换为我的 d3.scale 函数设置的 x/y 值。

```
function findYatX(x,path,error){
    var length = apath.getTotalLength()
        , point = path.getPointAtLength(length)
        , bisection_iterations_max=50
        , bisection_iterations = 0
    error = error || 0.1
    while (x < revXscale(point.x) -error || x> revXscale(point.x + error) {
        point = path.getPointAtlength(length)
        if (x < revXscale(point.x)) {
             length = length/2
        } else {
             length = 3/2*length
        }
        if (bisection_iterations_max < ++ bisection_iterations) {
              break;
        }
    }
return revYscale(point.y)
} 
```

# java - 解密错误：“预期时没有设置 iv”

> ID：11503157
> 
> 赞同：11
> 
> 时间：2012-07-16T11:19:26.583
> 
> 标签：java, android, cryptography

我几乎是加密新手。

我正在尝试解密一个字节数组，当我提供 IV 时，我遇到了一个异常：InvalidAlgorithmParameterException（预期时没有设置 iv）。

这是我的代码（*iv*是一个 16 字节的数组，它不为空，并且具有加密时使用的值）：

```
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
cipher.init(Cipher.DECRYPT_MODE, encriptionKey,new IvParameterSpec(iv)); 
```

如果我没有指定 IV，则密码会被初始化：

```
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
cipher.init(Cipher.DECRYPT_MODE, encriptionKey); 
```

试图找到答案，我确实找到了 JCEStreamCipher 的实现（[此处](http://java2s.com/Open-Source/Java/Security/Bouncy-Castle/org/bouncycastle/jce/provider/JCEStreamCipher.java.htm)），它可能与我正在使用的版本不对应，但有一些代码让我觉得我没有正确理解它。

这是代码：

```
 if ((ivLength != 0) && !(param instanceof ParametersWithIV))
    {
        SecureRandom    ivRandom = random;

        if (ivRandom == null)
        {
            ivRandom = new SecureRandom();
        }

        if ((opmode == Cipher.ENCRYPT_MODE) || (opmode == Cipher.WRAP_MODE))
        {
            byte[]  iv = new byte[ivLength];

            ivRandom.nextBytes(iv);
            param = new ParametersWithIV(param, iv);
            ivParam = (ParametersWithIV)param;
        }
        else
        {
            throw new InvalidAlgorithmParameterException("no IV set when one expected");
        }
    } 
```

看起来我在解密时无法提供 IV，但这对我来说没有太大意义。

任何帮助将不胜感激。

非常感谢，理查德。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T14:22:06.770

解决了。

我使用了错误的 SecretKey，而不是您可以为 AES 创建的密钥。

以前我有：

```
KeySpec spec = new PBEKeySpec(password.toCharArray(), encryptionKeySalt, 12345,256);
SecretKey encriptionKey = factory.generateSecret(spec); 
```

它创建了一个 JCEPBEKey。

我失踪了：

```
Key encriptionKey = new SecretKeySpec(encriptionKey.getEncoded(), "AES"); 
```

它为 AES 创建了一个适当的密钥。

# interop - 在服务器上部署应用程序时，Microsoft Office Interop dll 失败

> ID：11503158
> 
> 赞同：1
> 
> 时间：2012-07-16T11:19:27.910
> 
> 标签：interop, office-interop

我在我的 Web 应用程序中使用了 Excel 和 Powerpoint 互操作 Dll，它们在本地计算机上运行良好。但是，当我在 IIS 上部署它时，应用程序会中断并出现以下错误

```
Retrieving the COM class factory for component with CLSID {00020820-0000-0000-C000-000000000046} failed due to the follo
wing error: 80040154. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:39:57.640

在处理使用服务器上部署的 MS Office Interop Dlls 的应用程序时，请确保遵循以下事项

1.  您的应用程序池需要在对 Interop Dlls 具有完全权限的用户帐户下运行
2.  在您的服务器上安装 MS Office 也很重要

# sql-server - 带有更新语句的存储过程不起作用

> ID：11503160
> 
> 赞同：0
> 
> 时间：2012-07-16T11:19:33.493
> 
> 标签：sql-server, tsql, stored-procedures

我创建了一个非常简单的存储过程，并验证了需要执行的查询是正确的/正在运行的查询。然而，一旦存储在 SP 中，它除了返回 '0' 之外什么都不做：

```
USE [test]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[GenerateVolume] 

AS
BEGIN

    SET NOCOUNT ON;

    UPDATE test.dbo.[c500 CP_Simulation]
set GeneratedVolume = AvgFillRatePerDayPerCP +[dbo].[fn_InvsNorm](RAND(convert(varbinary, newid()))) * StDevFillRatePerDayPerCP
where test.dbo.[c500 CP_Simulation].OrgVPnr = test.dbo.[c500 CP_Simulation].OrgVPnr

END 
```

没有给出错误...请给我一个提示:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:35:33.917

当您使用

```
SET NOCOUNT ON 
```

它将抑制“xx 行受影响”消息。

如果您的查询工作正常，您的行将得到更新。由于您已经告诉 sql server 不要计算更新了多少行，因此您不会被告知更新了多少行。

希望这能消除一些疑问。

# php - SQL php 选择优先级

> ID：11503163
> 
> 赞同：0
> 
> 时间：2012-07-16T11:19:42.060
> 
> 标签：php, sql

如果我在一个表中有两种类型的数据，即 ID1 或 ID2 为空，我如何选择 ID1 不为空的行并且首先是最新插入的行，然后是 ID2 不为空的数据？

例子：

```
 Data | ID1 | ID2

 1    | ok  | 

 2    |     |  ok

 3    | ok  | 
```

并返回：

```
Data | ID1 | ID2

 3   | ok  |

 1   | ok  | 

 2   |     |  ok 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:21:24.903

试试这个：

```
SELECT * 
FROM tablename
ORDERBY ID1 DESC, ID2 DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:31:43.967

```
SELECT * 
FROM tablename
ORDERBY ID1 DESC, ID2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:32:11.890

如果 ID1 和 ID2 为“ok”或为空，则 Mahmoud 的答案是正确的。如果没有，说它是另一个表的 ID，那么你可以这样做：-

```
SELECT * 
FROM tablename
ORDER BY ID1='' DESC, ID2='' DESC, Data DESC 
```

# visual-c++ - c++ 编译器问题 - MinGW 和 Visual Studio C

> ID：11503164
> 
> 赞同：1
> 
> 时间：2012-07-16T11:19:49.367
> 
> 标签：visual-c++, include, g++, mingw

两个编译器都有几个问题。

首先，我手动安装了 MinGW c++ 编译器 - 自动安装无法下载任何内容 - 完全按照 MinGW 网站上的说明，包括将 C:\MinGW\bin 添加到 PATH 系统范围内，然后重新启动。但是，只有当我先 cd 到 C:\MinGW\bin 时，g++ 才会启动。其次，当我这样做时，我得到一个错误“没有在其中搜索 iostream 的包含路径”，当我查看 c:\MinGW\bin\include （所有头文件似乎都在的地方）时，iostream.h不在这里。

最后，我尝试从 MS 的网站下载 Visual Studio C++，它为我提供了安装程序包 vc_web.exe - 但是当我运行它时，它无法下载任何东西。我的互联网连接很好，所以我想不出任何原因。

任何帮助将不胜感激，谢谢-confused

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:31:36.327

至于 Visual C++ Express，您可以尝试离线安装程序（不需要互联网连接）[http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express-iso](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express-iso)

关于 g++，您可以更轻松地下载包含 g++ 并为您设置所有内容的 IDE，我推荐[CodeLite](http://www.codelite.org)，但也有[Code::Blocks](http://www.codeblocks.org/downloads/26/)

# android - Eclipse 无法在果冻豆中正确显示日志

> ID：11503167
> 
> 赞同：1
> 
> 时间：2012-07-16T11:19:52.247
> 
> 标签：android, eclipse, android-4.2-jelly-bean

我刚刚在我的 Galaxy nexus 手机中安装了果冻豆并尝试调试我的应用程序。连接到我的电脑后，我注意到 Eclipse 无法正确读取 logcat 中的日志信息。文本列显示正确，但我看到一个？在标签，PID等其他列中标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:14:50.847

应该是过时的 ADT 工具的案例

# html - 根据提交按钮使用 GET 或 POST

> ID：11503168
> 
> 赞同：1
> 
> 时间：2012-07-16T11:19:53.083
> 
> 标签：html, forms

我有一个用于标记数据并按标签查看数据的 Web 应用程序，因此我的 UI 是每个标签的复选框列表、每个数据项的复选框列表、“标签”按钮，它将选中的标签添加到选中的数据，和一个“过滤器”按钮，它忽略检查的数据，只显示具有给定标签的数据项。

我的问题是前一个操作（标记数据）“显然”是 POST 操作，而后一个操作（根据标签查看数据）“显然”是 GET 操作。但是方法属性附加到表单，而不是提交按钮，所以我必须为两个按钮选择一个或另一个。

我不想制作两种形式，因为据我所知，这会迫使我复制整个标签列表。有什么方法可以根据提交按钮的选择来选择我的方法吗？

JavaScript 解决方案是允许的，但最好没有 JavaScript 解决方案。

（我将发布这个问题的答案，但我不是特别喜欢它，所以我欢迎其他选择）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:57:12.650

原则上，您可以`formmethod`根据 HTML5 在提交按钮中使用该属性。但是，IE 无法识别它，即使在 IE 9 中也是如此。HTML5 中该功能的存在间接证明了以前的 HTML 版本缺少此功能。

另一方面，POST 方法甚至可以用于不会对外界造成任何变化的简单查看，并且在许多情况下，由于技术原因（例如，数据过多）必须使用*它。*所以我认为方法问题不是很相关；只需使用 POST。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:24:34.117

老实说，我会使用javascript解决方案，在`onsubmit`表单中触发一个方法，该方法**a）**检查按下的提交按钮，**b）**基于此更改表单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:19:53.083

一种可能的解决方案是使用 POST，然后让服务器提供 303 See Other 标头以将其更改为 GET 请求。这涉及发出两个请求以达到一个目的，这是不幸的，但至少意味着 URL 将发生变化，因此人们可以链接到特定的标签选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T11:35:10.453

我同意`javascript`Jon Taylor 提出的解决方案，问题不在于表单的方法是 GET 还是 POST，而是如何过滤/验证/清理用户输入。如果您的担忧与用户可以操纵表单的方法有关，那么您应该在服务器端实现该问题的解决方案。

# vba - 如何使用 VBA 创建和写入 txt 文件

> ID：11503174
> 
> 赞同：131
> 
> 时间：2012-07-16T11:20:20.113
> 
> 标签：vba, text-files

我有一个根据输入手动添加或修改的文件。由于该文件中的大部分内容都是重复的，只有十六进制值在变化，我想把它变成一个工具生成的文件。

我想编写将要打印在该*.txt*文件中的 c 代码。

使用 VBA创建*.txt*文件的命令是什么，以及如何写入它

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-07-16T11:27:11.800

使用 FSO 创建文件并写入文件。

```
Dim fso as Object
Set fso = CreateObject("Scripting.FileSystemObject")
Dim oFile as Object
Set oFile = FSO.CreateTextFile(strPath)
oFile.WriteLine "test" 
oFile.Close
Set fso = Nothing
Set oFile = Nothing 
```

请参阅此处的文档：

*   [http://technet.microsoft.com/en-us/library/ee198742.aspx](http://technet.microsoft.com/en-us/library/ee198742.aspx)
*   [http://technet.microsoft.com/en-us/library/ee198716.aspx](http://technet.microsoft.com/en-us/library/ee198716.aspx)

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2017-10-26T20:25:26.287

```
Open ThisWorkbook.Path & "\template.txt" For Output As #1
Print #1, strContent
Close #1 
```

* * *

## 更多信息：

*   微软文档：[**`Open`声明**](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/open-statement)
*   微软文档：[**`Print #`声明**](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/printstatement)
*   微软文档：[**`Close`声明**](https://docs.microsoft.com/office/vba/language/reference/user-interface-help/close-statement)
*   wellsr.com：VBA使用[**语句**](https://wellsr.com/vba/2016/excel/vba-write-to-text-file-print-statement/)[**写入文本文件`Print`**](https://wellsr.com/vba/2016/excel/vba-write-to-text-file-print-statement/)
*   办公室支持：[**`Workbook.Path`物业**](https://docs.microsoft.com/office/vba/api/excel.workbook.path)

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2018-04-05T14:16:20.453

详细说明[本的回答](https://stackoverflow.com/a/11503299/2822719)：

`Microsoft Scripting Runtime`如果您添加对变量*f*的引用并正确键入，您就**可以利用自动完成**(Intellisense) 并发现`FileSystemObject`.

这是一个完整的示例模块：

```
Option Explicit

' Go to Tools -> References... and check "Microsoft Scripting Runtime" to be able to use
' the FileSystemObject which has many useful features for handling files and folders
Public Sub SaveTextToFile()

    Dim filePath As String
    filePath = "C:\temp\MyTestFile.txt"

    ' The advantage of correctly typing fso as FileSystemObject is to make autocompletion
    ' (Intellisense) work, which helps you avoid typos and lets you discover other useful
    ' methods of the FileSystemObject
    Dim fso As FileSystemObject
    Set fso = New FileSystemObject
    Dim fileStream As TextStream

    ' Here the actual file is created and opened for write access
    Set fileStream = fso.CreateTextFile(filePath)

    ' Write something to the file
    fileStream.WriteLine "something"

    ' Close it, so it is not locked anymore
    fileStream.Close

    ' Here is another great method of the FileSystemObject that checks if a file exists
    If fso.FileExists(filePath) Then
        MsgBox "Yay! The file was created! :D"
    End If

    ' Explicitly setting objects to Nothing should not be necessary in most cases, but if
    ' you're writing macros for Microsoft Access, you may want to uncomment the following
    ' two lines (see https://stackoverflow.com/a/517202/2822719 for details):
    'Set fileStream = Nothing
    'Set fso = Nothing

End Sub 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2016-02-23T17:01:11.537

一种没有太多冗余的简单方法。

```
 Dim fso As Object
    Set fso = CreateObject("Scripting.FileSystemObject")

    Dim Fileout As Object
    Set Fileout = fso.CreateTextFile("C:\your_path\vba.txt", True, True)
    Fileout.Write "your string goes here"
    Fileout.Close 
```

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2017-02-10T13:16:33.890

```
Dim SaveVar As Object

Sub Main()

    Console.WriteLine("Enter Text")

    Console.WriteLine("")

    SaveVar = Console.ReadLine

    My.Computer.FileSystem.WriteAllText("N:\A-Level Computing\2017!\PPE\SaveFile\SaveData.txt", "Text: " & SaveVar & ", ", True)

    Console.WriteLine("")

    Console.WriteLine("File Saved")

    Console.WriteLine("")

    Console.WriteLine(My.Computer.FileSystem.ReadAllText("N:\A-Level Computing\2017!\PPE\SaveFile\SaveData.txt"))
    Console.ReadLine()

End Sub() 
```

# javascript - jQuery：如何选择所有具有：before 或 :after 的伪元素元素？

> ID：11503184
> 
> 赞同：4
> 
> 时间：2012-07-16T11:20:45.020
> 
> 标签：javascript, jquery, html, css, pseudo-element

在 jQuery 或基本 javascript 中是否可以使用 :after 或 :before 伪元素获取所有元素？

我知道getcomputedstyle，但这会返回所有带有或不带:before 或:after 伪元素的元素。

谢谢

**编辑：**

就像是：

```
$("a:before").each(function () {
  console.log("element with :before pseudo-element")
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:28:30.163

没有。生成的内容元素实际上并不是 DOM 的一部分。您不能使用 JS 直接挂钩它们。它们仅用于演示。

您可以对可能是伪元素的父级或兄弟级等的实际元素执行操作，并以这种方式更改它们。

查看下面链接到的问题 BoltClock，也许您可​​以为所有伪元素设置一个公共属性，然后尝试根据此属性使用 jquery 选择它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:56:08.203

给你想要选择一个类的“a”标签，比如“has-before”并以这种方式连接它们？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:56:29.583

这是可能的，但以一种迂回的方式！

检查这个演示：http: [//jsfiddle.net/BE47z/1/](http://jsfiddle.net/BE47z/1/)

逻辑如下：

1.  枚举所有在 CSS 中具有`:before`或`:after`定义的类 - 这是通过遍历`document.styleSheets`对象来完成的（您可以根据*需要**将代码更改为仅捕获`:before`等`:after`*）
2.  获得类列表后，删除 : 它在 CSS 中的名称之后的部分，例如：`.a:before`变为`.a`
3.  现在您可以获得与这些类匹配的所有元素

**代码**

**HTML**

```
<div class="element classWithoutBefore">No :before</div>
<div class="element classWithBefore">Has :before</div>
<div class="element class2WithBefore">Has :before</div>
<div class="element class2WithoutBefore">No :before</div> 
```

**CSS**

```
.classWithoutBefore {

}

.class2WithoutBefore {

}

.classWithBefore:before {

}

.class2WithBefore:before {

}

.a:before, .b:before {

} 
```

**JS**

```
var sheets = document.styleSheets;
var pseudoClasses = [], i = 0, j = 0;
for (i=0; i<sheets.length; i++) {
    try {
        var rules = sheets[i].cssRules;
        for (j=0; j<rules.length; j++) {
            if(rules[j].selectorText.indexOf(':before') != -1 || rules[j].selectorText.indexOf(':after') != -1) {
                pseudoClasses.push(rules[j].selectorText);
            }
        }
    }
    catch(ex) { // will throw security exception for style sheets loaded from external domains
    }
}

var classes = [];
if(pseudoClasses.length > 0) {
    pseudoClasses = pseudoClasses.join(',').split(','); // quick & dirty way to seperate individual class names
    for (i=0; i<pseudoClasses.length; i++) { // remove all class names without a : in it
        var colonPos = pseudoClasses[i].indexOf(':');
        if(colonPos != -1) {
            classes.push(pseudoClasses[i].substring(0, colonPos));
        }
    }
}

// Elements with the classes in the 'classes' array have a :before or :after defined 
```

# android - Android：结合普通小部件和 SurfaceView

> ID：11503185
> 
> 赞同：0
> 
> 时间：2012-07-16T11:20:49.493
> 
> 标签：android, surfaceview

我创建了一个具有两种视图的屏幕：普通视图（接收向上/向下操作的按钮）和表面视图。SurfaceView 实现`SurfaceHolder.Callback`并在另一个线程上运行并具有方法名称`Tick()`。

当这些按钮收到操作时，它们将调用 method `Tick()`，我希望此方法与 SurfaceView 运行相同的线程（用于同步目的），但不知道如何。

请给我一些想法来解决我的问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:16:55.883

如果您真的想`Tick()`在单独的线程中运行方法，该线程也在表面上绘制，您可以使用[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)。因此，您将能够为其创建[Handler](http://developer.android.com/reference/android/os/Handler.html)并发布将在此线程中执行的可运行文件。但这也会对您的绘图程序施加一些限制——您需要防止它休眠或等待，因为线程需要处理消息队列。

但实际上我认为任何其他合理的同步方式都会比在同一线程上运行此方法更容易。

# html - 严格标准：从空值创建默认对象。这个错误信息是什么意思？

> ID：11503186
> 
> 赞同：0
> 
> 时间：2012-07-16T11:20:49.587
> 
> 标签：html, xml, soap

我收到此错误消息：

“严格标准：从第 76 行 /opt/lampp/htdocs/projects/nusoap/lib/nusoap.php 中的空值创建默认对象”

第 76 行的代码：

```
$GLOBALS['_transient']['static']['nusoap_base']->globalDebugLevel = 9; 
```

这是什么意思？我该如何解决它。

期待你的答复

问候

西尔BT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T16:29:52.320

您可以在包含 nusoap 库之前将 error_reporting 级别设置为严格：

```
ini_set('error_reporting', E_STRICT);
require 'nusoap.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:01:45.740

我通过用旧版本（特别是 nusoap.php 0.95）替换 nusoap.php 文件解决了这个问题。

我工作的PHP环境是：PHP 5.3.8，nusoap.php 0.95似乎兼容PHP 5.3.8。我的结论是：“严格标准：从第 76 行的 /opt/lampp/htdocs/projects/nusoap/lib/nusoap.php 中的空值创建默认对象”是一个兼容性问题。

# django - Django + Wordpress：集成用户登录

> ID：11503187
> 
> 赞同：4
> 
> 时间：2012-07-16T11:20:52.863
> 
> 标签：django, wordpress, django-users

我希望有一个用户系统（最好是 Django 的）来统治 Django 和 Wordpress。

用例是 Django 是嵌入在 wordpress 安装中的应用程序（通过 iframe 或类似的东西）。为了使用 Django，用户**必须**经过身份验证，WordPress 中的身份验证不是强制性的，但建议使用（用于发布评论和类似的东西）。

为了方便网站的使用，我希望使用相同的注册来申请 Django 应用程序和 WordPress 安装。注册可能通过 OAuth / FB 身份验证（为此有很多 Django 解决方案）或通过专用站点用户进行。虽然注册过程是最重要的，但如果某些用户字段在两个世界之间保持同步，那就太好了。

我对此事的看法：

*   也许有一个开箱即用的解决方案（找不到任何解决方案）
*   通过以下选项之一创建一个成熟的 django 应用程序，用于同步两个用户模型（wp_users 和 django 的用户）：
    *   一个 master(django)-slave(wp) 解决方案，其中 Django 中的每次更改都会更改 wp_users 和其他相关表中的信息，反之亦然（通过 Django 定期检查 DB 或创建 WP 插件）。可以通过将 django 和 wp 放在同一个（MySQL）数据库上，使用 XML-RPC 或我没有想到的其他命名来实现。
    *   与上面相同，但让 WP 成为主人而不是 Django（似乎更难）。
    *   一个管理两个模型的外部系统——也许强制 OAuth / 其他一些外部身份验证，并使用它以某种方式同步两个模型？

有没有人遇到过这种情况？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:32:50.550

您真的应该尝试制定一些方法，然后在遇到问题时修改您的工作。

尽管如此，imo Wordpress 还是有点边界的。我不建议对这两个框架进行更改，而是专注于 Django。例如，您可以创建一个 WordpressUser(User) 并创建一个 python 脚本、crobjob、celery 任务或同步数据库所需的任何内容。意思是说你应该严格分开，除非你有很好的理由不这样做（我想不出任何理由）。

# .htaccess - htaccess url 重定向到 www 任何前缀

> ID：11503190
> 
> 赞同：1
> 
> 时间：2012-07-16T11:21:05.093
> 
> 标签：.htaccess, redirect

我有一个网站，无论放置什么而不是“www”，该网站仍然有效：

IE。abc.example.com、w.example.com、www.example.com、ww.example.com 等

我需要做的是将所有这些重定向到“www”网址。

任何帮助都会有很大帮助

问候，

寿司

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:48:13.757

我想你正在寻找这样的东西：

```
重写引擎开启
RewriteCond %{HTTP_HOST} !^www\.example\.com$ [NC]
重写规则 ^(.*)$ http://www.example.com/$1 [R=301,L]

```

这应该将某人在“example.com”上访问的任何不是`www`以 www 开头的 URL 开头的 URL 重写。请注意，您可以选择`<IfModule mod_rewrite.c>`在 mod_rewrite 被禁用或卸载的情况下使用。

# windows - 如何在开发 windows phone 7 应用程序时处理不同的屏幕尺寸

> ID：11503193
> 
> 赞同：1
> 
> 时间：2012-07-16T11:21:14.513
> 
> 标签：windows, windows-phone-7, windows-7

**我是 Windows Phone 应用程序开发的新手。我想知道在 windows phone 7 中开发应用程序时处理不同屏幕尺寸的最佳方法是什么。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:31:18.990

正如评论中所说，WinPhone7 只有一种分辨率，但要为新设备（WinPhone8）做好准备，您应该编写如下代码：

```
using System.Windows;  
public void GetScreenResolution(out int w, out int h)  
{  

     w = Application.Current.Host.Content.ActualWidth;  
     h = Application.Current.Host.Content.ActualHeight;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:27:59.127

目前，只有一种屏幕分辨率可用：480x800（宽 x 高）

因此，您只针对一种分辨率进行开发，屏幕大小并不重要。

使用 Windows Phone 8，情况会有所改变，但目前还没有可用的公共 SDK，而且从技术上讲，Windows Phone 8 仍然不适合消费者，因此您应该继续为 WP7 和 480x800 进行开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T06:26:55.083

虽然我从未见过 480x640 的设备，但它说 Windows Phone 8 支持以下分辨率，`640x480(4:3), 800x480(5:3), 1280x720(16:9) and 1280x768(5:3).`

[这](http://www.silverlightshow.net/items/Windows-Phone-8-Multiple-Screen-Resolutions.aspx)是我发现的一篇关于 windows phone 8 屏幕尺寸的精彩博文。

# vim - .rvmrc 不适用于 vim NERDTree 'cd'

> ID：11503194
> 
> 赞同：1
> 
> 时间：2012-07-16T11:21:18.383
> 
> 标签：vim, rvm, nerdtree

我安装了 rvm 和几个 rubies，因为我正在处理基于不同项目的项目。然后在项目目录中创建 .rvmrc 文件，当我“cd”到终端中的项目文件夹时，它们可以正常工作：

```
~$ cd workspace/prox/
~/workspace/prox$ rvm current
ruby-1.9.3-p194@prox
~/workspace/prox$ cd ../cto/
~/workspace/cto$ rvm current
ruby-1.8.7-p358@openservice
~/workspace/cto$ 
```

现在我正在尝试使用 vim + NERDTree 作为我的新 ide 来提高性能，但我遇到了 .rvmrc 的问题：当我在 NERDTree 中 cd 到项目的文件夹并确认 CWD 已更改时，我最终得到默认的 ruby​​@宝石。Hance .rvmrc 尚未得到处理。有谁知道是否可以使 .rvmrc 文件与 vim NERDTree 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:30:04.587

我不是 ruby​​ist，因此对 RVM 没有实际经验。

但我似乎记得它是通过设置一堆环境变量来工作的，这些环境变量应该在启动时被 Vim 拾取。我对吗？

IMO 的问题在于，在 Vim 中更改目录和在 shell 中更改目录根本不相关。AFAIK，Vim 不关心你`.rvmrc`，也不会通知你的 shell 任何`:cd`.

请参阅以下命令序列：

```
$ cd
$ pwd
/home/username
$ vim
:pwd
/home/username
:cd Dropbox
:pwd
/home/username/Dropox
:q
$ pwd
/home/username 
```

当您在 Vim 中工作时更改到另一个目录时，您退出时又回到原点。因为你的 shell 没有注意到你的所有旅行，而且 Vim 没有拾取任何新的环境变量，所以你不知何故在同一个地方和同一个环境。

但我可能完全不在了。

Tim Pope 的[这个插件应该会有所帮助。](https://github.com/tpope/vim-rvm)

# xps - 以编程方式将 XPS 转换为 Excel

> ID：11503204
> 
> 赞同：0
> 
> 时间：2012-07-16T11:21:51.137
> 
> 标签：xps

我试图调整 xps 格式的文件以被我的工具识别。我的工具在 vba 代码（excel）上运行，因此试图将 xps 格式转换为 excel。

有没有人尝试过这样做？如果是这样，请你帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:47:00.837

XPS 文件与 PDF 非常相似，因为它是打印页面的表示形式，因此通常不保留任何语义信息，例如哪些数据构成表格以及它们之间的关系（如果有的话）。

我不熟悉 XPS 的内部结构，但如果有一个表示单元格网格的结构，那么它应该很容易提取信息，但如果它只是排列在网格中的一堆文本，那么你将不得不设计一个可以检测规则放置的文本模式（即网格布局）并从中提取文本的算法。

# visual-studio-2008 - 托管/非托管代码无法在某些机器上启动

> ID：11503208
> 
> 赞同：2
> 
> 时间：2012-07-16T11:22:02.257
> 
> 标签：visual-studio-2008, interop, c++-cli

我假设读者熟悉混合托管/非托管代码系统以及它们为什么是必要的。这个问题不会涉及这个问题，而是使用 Visual Studio 2008 编译器和链接器控件构建这样一个系统的机制。

## 的背景

首先，摆脱谷壳。我的调查总结如下：

*   初始 C++ 项目基于 MFC
*   共享 dll 中的 MFC
*   没有 clr
*   C++ 异常/EHa
*   多线程调试/MD

这一切都在 Visual Studio 2008 下的所有开发人员工作站上正确构建和运行。

我们现在将第三方 C# .NET3.5 SP1 库包含到项目中。该库是使用用于互操作的本机 C++ 桥构建的。原始 C++ 项目引用此新库的导入文件作为其链接器输入的一部分。所有非常标准的东西，并在论坛上得到很好的参考。

第三方库构建如下：

*   公共语言运行时支持 /clr
*   C++ 异常/EHa
*   多线程调试/MD

## 问题

在我们的八个开发人员工作站上，调试（和发布）构建所有构建和启动都正确。我们只有一个开发人员工作站在启动时出现以下错误：

> Windows 在 blah.exe 中触发了断点。
> 这可能是由于堆中的损坏，这表明 blah.exe 或其已加载的任何 DLL 中存在错误。

这一切都发生在应用程序启动之前，并且被证明难以追踪。我已经使用/尝试/消除了以下内容：

*   配置不正确的工作站。也就是说，没有两个工作站是完全相同的。是的，它们都具有相同的工具和操作系统 (Windows-7)，但除此之外，它们的配置会略有不同。
*   依赖步行者
*   过程分析工具 (ProcMon)
*   静态库的构建彼此不一致，导致堆不匹配。编译器开关 /MD 与两个代码库对齐。话虽如此，CLR 的堆总是与本机代码的堆不同。

## 解决方案

如果我现在只需打开C++ 构建的*/clr ，所有问题都会消失。*为什么？我怀疑两个代码空间现在将使用相同的堆。不同的运行时环境肯定是混合模式的全部内容吗？这不是优选的解决方案。

## 最新信息

Visual Studio 调试窗口报告以下内容：

> *** “blah.exe”中发生访问冲突：
> 
> 747220A3 处的指令尝试从无效地址 00000B90 读取
> 
> *   输入 .exr 00032690 作为异常记录
> *   输入 .cxr 000326AC 作为上下文
> *   然后 kb 获取故障堆栈
> 
> blah.exe 中 0x747220a3 (MSCTF.dll) 的第一次机会异常：0xC0000005：访问冲突读取位置 0x00000b90。

## 附录

C++ 项目编译器选项（调试构建）：

> /Od /D "WIN32" /D "_WINDOWS" /D "_D​​EBUG" /D "_VC80_UPGRADE=0x0710" /D "_AFXDLL" /D "_MBCS" /FD /EHa /MDd /Yu"stdafx.h" /Fp" Debug\blah.pch" /Fo"Debug\" /Fd"Debug\vc90.pdb" /W3 /WX /nologo /c /Zi /clr /TP /wd4793 /wd4996 /errorReport:prompt

C++ 项目链接器选项（调试构建）：

> /OUT:"..\Debug\blah.exe" /INCREMENTAL /NOLOGO /MANIFEST /MANIFESTFILE:"Debug\blah.exe.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /ASSEMBLYDEBUG /PDB:"blah.pdb" /SUBSYSTEM:WINDOWS /LARGEADDRESSAWARE /DYNAMICBASE:NO /FIXED:No /MACHINE:X86 /ERRORREPORT:PROMPT iphlpapi.lib UxTheme.lib ../Libraries/Bridge.lib

C# .NET 库编译器选项（调试构建）：

> /Od /D "WIN32" /D "_D​​EBUG" /D "_WINDLL" /D "_UNICODE" /D "UNICODE" /FD /EHa /MDd /Yu"stdafx.h" /Fp"Debug\Bridge.pch" / Fo"Debug\" /Fd"Debug\vc90.pdb" /W3 /nologo /c /Zi /clr /TP /errorReport:prompt /FU "c:\Windows\Microsoft.NET\Framework\v2.0.50727\System. dll" /FU "c:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Data.dll" /FU "c:\Windows\Microsoft.NET\Framework\v2.0.50727\System.XML.dll" /FU“库.dll”

C# .NET 库链接器选项（调试版本）：

> /OUT:"Bridge.dll" /INCREMENTAL /NOLOGO /DLL /MANIFEST /MANIFESTFILE:"Debug\Bridge.dll.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /ASSEMBLYDEBUG / PDB:"Bridge.pdb" /DYNAMICBASE /FIXED:No /NXCOMPAT /MACHINE:X86 /ERRORREPORT:PROMPT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:25:20.650

只需将 DELAY LOAD 应用于有问题的 DLL，即可解决该问题。我只能假设这将其从启动负载中删除，因此避免了启动冲突。

当首次使用该功能时，该 DLL 会在以后的任何时间加载。它在所有工作站上都​​能正常运行。

# php - 在 php 的 std 对象中添加方法

> ID：11503212
> 
> 赞同：21
> 
> 时间：2012-07-16T11:22:06.437
> 
> 标签：php, object, stdclass

是否可以以这种方式添加方法/功能，例如

```
$arr = array(
    "nid"=> 20,
    "title" => "Something",
    "value" => "Something else",
    "my_method" => function($arg){....}
); 
```

或者像这样

```
$node = (object) $arr;
$node->my_method=function($arg){...}; 
```

如果可能的话，我该如何使用该功能/方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2017-09-20T15:02:53.287

这现在可以在 PHP 7.1 中使用匿名类来实现

```
$node = new class {
    public $property;

    public function myMethod($arg) { 
        ...
    }
};

// and access them,
$node->property;
$node->myMethod('arg'); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-09T01:50:56.787

您不能动态地将方法添加到 stdClass 并以正常方式执行它。但是，您可以做一些事情。

在您的第一个示例中，您正在创建一个[闭包](http://php.net/manual/en/class.closure.php)。您可以通过发出以下命令来执行该闭包：

```
$arr['my_method']('Argument') 
```

您可以创建一个 stdClass 对象并为其属性之一分配一个闭包，但由于语法冲突，您不能直接执行它。相反，您必须执行以下操作：

```
$node = new stdClass();
$node->method = function($arg) { ... }
$func = $node->method;
$func('Argument'); 
```

尝试

```
$node->method('Argument') 
```

会产生错误，因为 stdClass 上不存在方法“方法”。

使用魔术方法[__call](http://www.php.net/manual/en/language.oop5.overloading.php#object.call) ，请参阅此[SO 答案](https://stackoverflow.com/questions/2938004/how-to-add-a-new-method-to-a-php-object-on-the-fly)，了解一些巧妙的黑客行为。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-07-13T15:36:44.750

从 PHP 7 开始，也可以直接调用匿名函数属性：

```
$obj = new stdClass;
$obj->printMessage = function($message) { echo $message . "\n"; };
echo ($obj->printMessage)('Hello World'); // Hello World 
```

这里的表达式`$obj->printMessage`产生匿名函数，然后直接使用参数执行`'Hello World'`。然而，在调用它之前必须将函数表达式放在括号中，这样以下操作仍然会失败：

```
echo $obj->printMessage('Hello World'); 
// Fatal error: Uncaught Error: Call to undefined method stdClass::printMessage() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-30T16:27:46.500

另一种解决方案是创建一个匿名类并通过魔术函数代理调用`__call`，使用箭头函数，您甚至可以保持对上下文变量的引用：

```
 new Class ((new ReflectionClass("MyClass"))->getProperty("myProperty")) {
            public function __construct(ReflectionProperty $ref)
            {
                $this->setAccessible = fn($o) => $ref->setAccessible($o);
                $this->isInitialized = fn($o) => $ref->isInitialized($o);
                $this->getValue = fn($o) => $ref->getValue($o);
            }

            public function __call($name, $arguments)
            {
                $fn = $this->$name;
                return $fn(...$arguments);
            }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-21T14:48:27.177

```
class myclass {
function __call($method, $args) {
if (isset($this->$method)) {
$func = $this->$method;
return call_user_func_array($func, $args);
}
}
}
$obj = new myclass();
 $obj->method = function($var) { echo $var; };

$obj->method('a'); 
```

或者您可以创建默认类并使用...

# c# - Glue vs Automapper vs Emit vs ValueInjecter 实体映射器

> ID：11503214
> 
> 赞同：4
> 
> 时间：2012-07-16T11:22:11.257
> 
> 标签：c#, asp.net, automapper, mapper, valueinjecter

我正在做一个 DDD 项目，其中正在进行大量的字段映射。我正在寻找一个快速而可靠的映射库，而不是手动编写所有映射，并且似乎有很多选择。

目前我更倾向于 Glue，因为它看起来提供了相当多的功能，并且在构建时也考虑到了单元测试，这对我正在从事的项目也很重要。不利的一面是它只被下载了 200 多次，这让我认为像 ValueInjecter 这样的东西可能是一个更好的选择，因为那里有更多的支持。

我的问题是，Glue 比其他任何映射器更好还是更差？还是上面提到的映射器在性能和可用性方面的差异可以忽略不计？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T11:58:56.070

就我个人而言，我会选择`AutoMapper`or `ValueInjector`。我以前都使用过，它们都非常快速和稳定。根据您的需要，ValueInjector 会做一些 AutoMapper 不会做的事情（比如从左到右和从右到左的映射），所以我怀疑 ValueInjector 可能是最合适的。

关于使用单元测试构建 Glue 的声明不会真正影响您的决定，因为您很可能会通过 NuGet 使用程序集，因此使用编译的程序集，而不是从源代码构建。

# spring-mvc - 在 Spring Portlet MVC 中设置模型错误的正确方法

> ID：11503215
> 
> 赞同：2
> 
> 时间：2012-07-16T11:22:11.897
> 
> 标签：spring-mvc, liferay, portlet

在我的 MVC 控制器中，我有一个带有签名的处理程序方法：

```
public void myAction(ActionRequest request, ActionResponse response, Model model) {...} 
```

在这种方法中，我检查一些提交的数据是否正常。如果它无效，我想设置一个错误。目前我这样做很简单：

```
model.addAttribute("operationStatus", "error");
model.addAttribute("operationMessage", "a lot of things went wrong"); 
```

在视图 JSP 中：

```
<c:if test="${requestScope.operationStatus == 'error'}">
    <div class="msg-error">${requestScope.operationMessage}</div>
</c:if> 
```

当然必须有更好的方法来处理 Spring Portlet MVC 中的错误。请注意，我需要在不同的地方显示错误消息，而不仅仅是在`<form>`标签中。

那么我应该如何处理错误呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:20:49.060

如果您只针对 Liferay，那么您可以使用 SessionErrors 类，以便您可以执行以下操作：

```
SessionErrors.add(actionRequest, "some-error"); 
```

然后在你的 JSP 上你有：

```
<%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui" %>
<liferay-ui:error key="some-error" message="Your error message goes here!" /> 
```

您也可以使用例外情况执行此操作。[在这里](https://stackoverflow.com/questions/11032229/how-to-show-error-message-in-liferay-portal/11034587#11034587)查看我的答案。

# javascript - CSS：从打印预览 Chrome 中禁用页眉和页脚

> ID：11503217
> 
> 赞同：10
> 
> 时间：2012-07-16T11:22:12.410
> 
> 标签：javascript, css, google-chrome, css-selectors, print-css

我的应用程序之一是基于网络的 POS（销售点）。所以在用 chrome 打印发票时。页眉和页脚由浏览器自动插入，我想通过页面抑制，无需用户干预..

我在印刷媒体中应用了一些**CSS ，**

```
@media print {
 #header, #footer { 
    visibility: hidden !important;
    display: none !important;
 }
} 
```

但它不适用，也许选择器不正确？

而且我也尝试减少边距，但是如果打印有多个页面，它会剪切/覆盖页面内容。还有一件事，我不想禁用 chrome 的打印预览选项。

有人对此有很好的解决方案吗？

此致..

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-12T08:22:13.917

利用

```
@page{margin:0px auto;} 
```

在你的 CSS 脚本中。这很可能会在打印时破坏您的页面布局，因此您可能需要添加一个具有正确填充的#container div，以使您的页面再次看起来不错。仅在谷歌浏览器上测试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T03:36:16.587

. . 我不确定您在开发中的知识水平，但 CSS 选择器必须匹配某些元素。[page] “header” 和 [page] “footer”，如“[printed] page”，而不是“[web] page”，不能像这样被 CSS 定位 - 特别是不能随意选择ID，以及可能与您自己的页面 ID 冲突且浏览器供应商永远不会接受实施的 ID。

. . 使用“margin: 0 auto;”的建议 在“@page”指令上实际上是正确的（因为浏览器没有足够的余量来显示它们，它只会隐藏它们）。问题是目前只有 Chrome 正确支持它。对于其他浏览器，除了创建 PDF 并打印它之外，您没有其他好的选择。不过，您可以创建一个可自行打印的 PDF，该 PDF 在加载时使用嵌入在其上的 JavaScript 立即显示打印对话框，但我认为这是您能做到的最远距离。

. . 祝你好运。

# c++ - LUT用于C ++中的不同通道，opencv2

> ID：11503219
> 
> 赞同：6
> 
> 时间：2012-07-16T11:22:24.347
> 
> 标签：c++, opencv, lookup-tables

几天来，我一直在玩用 C++ 实现的 opencv2，并注意到查找表是对图像应用更改的最快方法。但是，我在将它们用于我的目的时遇到了一些麻烦。

下面的代码显示了一个反转像素值的示例：

```
bool apply(Image& img) {
   int dim(256);
   Mat lut(1, &dim, CV_8U);
   for (int i=0; i<256; i++)
      lut.at<uchar>(i)= 255-i;
   LUT(img.final,lut,img.final);
   return true;
}

class Image {
public:
   const Mat& original;
   Mat final;
...
}; 
```

由于它非常高效，比逐个更改每个像素（通过我自己的测试验证）要高效得多，我想将此方法用于其他操作。但是要做到这一点，我必须分别访问每一层（每种颜色，图片在 BGR 中）。例如，我想将蓝色更改为 255-i，将绿色更改为 255-i/2，将红色更改为 255-i/3。

我已经在网上搜索了一段时间，但无法提出正确的解决方案。据我所知，这是可能的（[文档](http://opencv.willowgarage.com/documentation/cpp/operations_on_arrays.html#cv-lut)），但我找不到实现它的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T11:37:22.370

关键是文档中的这一段：

> 该表应具有单个通道（在这种情况下，所有通道都使用同一个表）或与源数组中的通道数相同

因此，您必须创建一个多通道 LUT：

```
bool apply(Image& img) {
   int dim(256);

   Mat lut(1, &dim, CV_8UC(img.final.channels()));

   if( img.final.channels() == 1)
   {
      for (int i=0; i<256; i++)
         lut.at<uchar>(i)= 255-i;
   }
   else // stupid idea that all the images are either mono either multichannel
   {
      for (int i=0; i<256; i++)
      {
         lut.at<Vec3b>(i)[0]= 255-i;   // first channel  (B)
         lut.at<Vec3b>(i)[1]= 255-i/2; // second channel (G)
         lut.at<Vec3b>(i)[2]= 255-i/3; // ...            (R)
      }
   }

   LUT(img.final,lut,img.final); // are you sure you are doing final->final? 
   // if yes, correct the LUT allocation part

   return true;
} 
```

# css - 蓝图 CSS：如果内容很长，页面将移至左侧

> ID：11503221
> 
> 赞同：1
> 
> 时间：2012-07-16T11:22:36.747
> 
> 标签：css, blueprint-css, blueprint

我正在使用 Blueprint CSS 框架，目前面临一个奇怪的问题。如果我的页面内容比显示器屏幕长并且页脚在下方，那么整个页面会向左侧移动一点，但是如果我缩短内容并使其适合屏幕以便页脚可见（无需向下滚动），然后页面再次移回右侧。

我不确定，但我猜测它的`clearfix`问题。你也这么认为吗？

你能告诉我如何解决这个问题，即使内容很长，页面也不会移动到左侧？

我的页面结构如下

```
<div class="container"> 

   <div id="header" class="span-24 "> Header </div>

   <div id="content" class="span-24" >My Main Content with two columns </div>

  <div id="header" class="span-24 "> Header </div>

</div> 
```

CSS

```
#header{
margin-top:5px;
background-color:#333333;
border: solid 1px #333333;
-moz-box-shadow: 1px 1px 5px #999;
-webkit-box-shadow: 1px 1px 5px #999;
box-shadow: 1px 1px 5px #999;
height:70px;
}

#content{
margin-top:2px;
min-height:500px;
font-size:12.5px;
line-height:30px;
background-color:#FFFFFF;
color:#404348;
font-family: 'Open Sans', sans-serif;
text-align:justify;
background-color:#FFFFFF; 
min-height:600px;
border: solid 1px #CCC;
-moz-box-shadow: 1px 1px 5px #999;
-webkit-box-shadow: 1px 1px 5px #999;
box-shadow: 1px 1px 5px #999;
}

#footer{
height: 4em;
background-color:#FFFFFF;
border: solid 1px #CCC;
-moz-box-shadow: 1px 1px 5px #999;
-webkit-box-shadow: 1px 1px 5px #999;
box-shadow: 1px 1px 5px #999;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:24:02.953

页面在移动，还是因为您的浏览器滚动条出现/消失？

研究将正文设置为始终具有滚动条，这应该可以解决。

例子

```
html {
    overflow-y: scroll;
} 
```

# ruby-on-rails - 在 factorygirl 上运行回调

> ID：11503222
> 
> 赞同：0
> 
> 时间：2012-07-16T11:22:41.193
> 
> 标签：ruby-on-rails, rspec, tdd, mongoid, factory-bot

我的`user.rb`模型中有一个回调，例如：

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps::Created
   .
   .
   .
   .
    #add a first board for user
    after_create :first_board
      def first_board
        board = self.boards.new(:title => self.username, :category_id => Category.find_or_create_by(slug: "other"))
        board.save!
      end
end 
```

创建用户时，应用程序会使用上述回调创建一个新版块。

在我的`spec/factories/users.rb`我有：

```
FactoryGirl.define do
  factory :user do
    name 'Test User'
    username 'test username'
    password 'please'
    password_confirmation 'please'
    # required if the Devise Confirmable module is used
    confirmed_at Time.now
  end
end 
```

在我的`spec/controllers/users_controller_spec.rb`我有：

```
require 'spec_helper'

describe UsersController do
  before :each do
    request.env['devise.mapping'] = Devise.mappings[:user]
  end
  include Devise::TestHelpers
  before (:each) do
    @user = FactoryGirl.create(:user)
    sign_in @user
  end

  describe "GET 'show'" do

    it "should be successful" do
      get :show, :id => @user.id
      response.should be_success
    end

    it "should find the right user" do
      get :show, :id => @user.slug
      assigns(:user).should == @user
    end

  end

end 
```

**如何使用 factorygirl 运行回调？**

**我收到 2 个错误：**

```
Failures:

  1) UsersController GET 'show' should be successful
     Failure/Error: @user = FactoryGirl.create(:user)
     Errno::ECONNREFUSED:
       Connection refused - connect(2)
     # (eval):2:in `post'
     # ./app/models/user.rb:190:in `first_board'
     # ./spec/controllers/users_controller_spec.rb:10:in `block (2 levels) in <top (required)>'

  2) UsersController GET 'show' should find the right user
     Failure/Error: @user = FactoryGirl.create(:user)
     Errno::ECONNREFUSED:
       Connection refused - connect(2)
     # (eval):2:in `post'
     # ./app/models/user.rb:190:in `first_board'
     # ./spec/controllers/users_controller_spec.rb:10:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:18:44.597

不能那样调用 find_or_create_by 方法，afaik。它使用 method_missing 并期望在最后添加一个 activerecord 属性。尝试：

`Category.find_or_create_by_slug("other")`

# publish-subscribe - 删除经过身份验证的用户的读取数据？

> ID：11503225
> 
> 赞同：2
> 
> 时间：2012-07-16T11:22:55.093
> 
> 标签：publish-subscribe, publisher, data-distribution-service

在 DDS 中我的要求是，我有很多订阅者，但发布者是单身。我的订阅者从 DDS 读取数据并检查该消息是针对该特定订阅者的。如果检查成功，那么它只需要数据并从 DDS 中删除。消息必须保存在 DDS 中，直到经过身份验证的订阅者获取它的数据。如何使用 DDS（在 java 环境中）实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:14:39.233

首先，您应该知道，使用`DDS`, a`Subscriber`永远无法从全局数据空间中删除数据。每个`Subscriber`人都有自己的分布式数据的缓存副本，并且只能对该副本进行操作。如果一个人`Subscriber`获取数据，那么其他`Subscribers`人`Topic`将不会受到任何方式的影响。只能`Publishers`为每个`Subscriber`. 从您的问题来看，尚不清楚您是否知道这一点。

与此无关，似乎在这里使用`ContentFilteredTopic`( `CFT`) 是合适的。根据描述，`Subscriber`知道它正在寻找的文件名。使用`CFT`，`Subscriber`可以表明它只对具有特定`file_name`属性值的样本感兴趣。基础设施将负责过滤过程，并确保`Subscriber`不会收到任何具有不同属性值的数据`file_name`。因此，对数据进行的任何`take()`操作都`DataReader`将包含相关信息，无需先检查数据再进行处理。

API 文档应包含有关如何使用`ContentFilteredTopic`.

# c# - C# XNA 鼠标位置投影到 3D 平面

> ID：11503226
> 
> 赞同：3
> 
> 时间：2012-07-16T11:22:56.497
> 
> 标签：c#, 3d, xna

我正在做一个 3D XNA 项目，我已经考虑这个问题 2 周了。所以我决定问问你。

基本上我有一个平面，我想将鼠标位置投影到那个平面，但是如何？我尝试了很多方法，计算角度......但我发现，距离必须影响 X 位置，也许需要一些我以前从未听说过的数学。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T12:43:26.870

几年前我做了一些代码，它在给定鼠标状态的情况下将位置返回为 Vector3(x,y,z)：

```
private Vector3 FindWhereClicked(MouseState ms)
{
    Vector3 nearScreenPoint = new Vector3(ms.X, ms.Y, 0);
    Vector3 farScreenPoint = new Vector3(ms.X, ms.Y, 1);
    Vector3 nearWorldPoint = device.Viewport.Unproject(nearScreenPoint, cam.projectionMatrix, cam.viewMatrix, Matrix.Identity);
    Vector3 farWorldPoint = device.Viewport.Unproject(farScreenPoint, cam.projectionMatrix, cam.viewMatrix, Matrix.Identity);

    Vector3 direction = farWorldPoint - nearWorldPoint;

    float zFactor = -nearWorldPoint.Y / direction.Y;
    Vector3 zeroWorldPoint = nearWorldPoint + direction * zFactor;

    return zeroWorldPoint;
} 
```

*   device 是 GraphicsDevice 的一个实例。

希望对你有效。

# javascript - 使用没有 ajax 的 post 发送数据

> ID：11503233
> 
> 赞同：0
> 
> 时间：2012-07-16T11:23:22.333
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

我想在不使用 ajax 的情况下以 post 方法发送数据，因为我想为 blackberry 版本 5 及以下版本开发此应用程序。而且黑莓不支持ajax。

我使用 post 发送数据：

```
 function handleLogin() {

    var form = $("#loginForm");
    var u = $("#username", form).val();
    var p = $("#password", form).val();
    var d = $("#dob", form).val();

    if (u != '' && p != '') {

        var finalStr = u + encodeURIComponent("|^") + p + encodeURIComponent("|^") + encodeURIComponent("|^") + "X" + encodeURIComponent("|^") + d + encodeURIComponent("|^") + "1.0" + encodeURIComponent("|^|$");
        var encodedURL = encodeURI(intranetUrl + "customer/Ri_logon5.asp?requestString=");
        var parameters = decodeURIComponent(finalStr);
        alert("param:" + parameters);
        post_to_url(intranetUrl + "customer/Ri_logon5.asp", finalStr);

    } else {

        alert("You must enter a username and password", function () {});
        $("#submitButton").removeAttr("disabled");
    }

}

function post_to_url(url, params) {
    var form = document.createElement('form');
    form.action = url;
    form.method = 'POST';

    alert("%%%%%%before" + params);
    var postParam = encodeURIComponent(params);
    postParam = decodeURIComponent(postParam);

    alert("%%%%%%" + postParam);
    var input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'requestString=';
    input.value = params;
    document.body.appendChild(input);
    form.appendChild(input);
    form.submit();

} 
```

在 post_to_url() 函数的两个警报中，我都可以读取参数。`manish|^info1234|^|^X|^11111985|^1.0|^|$`

但是在服务器端，他们接收参数`requestString%3D=manish%7C%5Einfo1234%7c%5E%7C%5EX%.....` 意味着特殊字符在服务器端没有正确接收。但在警报中，它们显示正确。为什么会这样？任何帮助将不胜感激。

如果我使用 ajax 作为；

```
$.post(encodedURL, parameters ,
            function(data) {
              alert("Data Loaded: " + data);
            }); 
```

那么为什么服务器端不需要解码字符串呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:27:23.380

您必须在服务器端解码 URL。就像在 Java 中一样，您可以使用

```
String result = URLDecoder.decode(url, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:41:48.413

CGI 参数总是作为`key1=value1&key2=value2...`键和值都可能是 URI 编码的，如果它们包含任何特殊字符。

当你这样做时：

```
input.name = 'requestString=';
input.value = params; 
```

您正在生成 的*单个*键`requestString`，并且已经在其中的任何特殊字符`params`都必须进行 URI 编码。这可能会导致您的值被*双重编码*。

# php - 插入时多个数据库触发器

> ID：11503234
> 
> 赞同：0
> 
> 时间：2012-07-16T11:23:28.497
> 
> 标签：php, mysql, triggers, phpmyadmin

在跨数据库创建触发器时遇到一些问题。

我正在通过 phpmyadmin 进行此查询。

如果我完成以下操作，我会收到一条错误消息，指出未选择数据库。

```
delimiter // 
DROP trigger if exists t1// 
CREATE trigger t1 AFTER INSERT ON db1.d1t
FOR EACH ROW BEGIN

INSERT INTO db2.d2t SET ID=NEW.ID;

END// 
delimiter ; 
```

如果我在 Phpmyadmin 中导航到 db1，然后执行以下操作：

```
delimiter // 
DROP trigger if exists t1// 
CREATE trigger t1 AFTER INSERT ON db1t
FOR EACH ROW BEGIN

INSERT INTO db2.db2t SET ID=NEW.ID;

END// 
delimiter ; 
```

创建了触发器，但它试图`db1.db2.db2t`在它触发时插入。

非常感谢任何帮助。

编辑：两个表都是 INNODB mysql server v. 5.1.61 phpmyadmin v. 3.4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:38:29.423

试试这个（**编辑**）：

```
USE db1;

DROP TRIGGER IF EXISTS t1;

DELIMITER //

CREATE TRIGGER t1 AFTER INSERT ON d1t
FOR EACH ROW BEGIN
  INSERT INTO db2.d2t
    (ID)
  VALUES
    (NEW.ID);
END//

DELIMITER ; 
```

这对我有用。

# java - 为什么 JAXB 说“xxx 是一个接口，而 JAXB 不能处理接口”。即使生成的类不是接口

> ID：11503237
> 
> 赞同：4
> 
> 时间：2012-07-16T11:23:41.553
> 
> 标签：java, binding, jaxb

我使用 JAXB 绑定我的 xsd，然后尝试创建 JAXBContext：

```
JAXBContext jaxbContext = JAXBContext.newInstance("my package name"); 
```

但是 JAXB 给出 180 IllegalAnnotationsException。

大多数异常都有以下消息：

1.  XXX是接口，JAXB不能处理接口
2.  XXX 没有无参数默认构造函数
3.  @XmlAttribute/@XmlValue 需要引用映射到 XML 中文本的 Java 类型。

当我查看生成的类时，它们都不是接口，我不明白为什么 JAXB 将它们解释为接口。

这是 JAXB 报告的错误之一的堆栈跟踪：

```
com.sc.md.datatypes.schemas.csemessage.EnvelopeType is an interface, and JAXB can't handle interfaces.
this problem is related to the following location:
    at com.sc.md.datatypes.schemas.csemessage.EnvelopeType
    at protected com.sc.md.datatypes.schemas.csemessage.EnvelopeType com.sc.md.datatypes.schemas.csemessage.cseMessage.envelope
    at com.sc.md.datatypes.schemas.csemessage.cseMessage
com.sc.md.datatypes.schemas.csemessage.EnvelopeType does not have a no-arg default constructor.
this problem is related to the following location:
    at com.sc.md.datatypes.schemas.csemessage.EnvelopeType
    at protected com.sc.md.datatypes.schemas.csemessage.EnvelopeType com.sc.md.datatypes.schemas.csemessage.cseMessage.envelope
    at com.sc.md.datatypes.schemas.csemessage.cseMessage 
```

这就是在 xsd 中定义类型的方式：

```
<xs:complexType name="EnvelopeType">
    <xs:sequence>
        <xs:element name="Sent" type="DateTimeType"/>
        <xs:element name="Identifier" type="String_1_14"/>
        <xs:element name="AcknowledgementCode" type="AcknowledgementCodeType"/>
    </xs:sequence> 
```

```
<xs:simpleType name="AcknowledgementCodeType">
    <xs:restriction base="xs:string">
        <xs:enumeration value="m"/>
        <xs:enumeration value="p"/>
    </xs:restriction>
</xs:simpleType> 
```

这是我用来生成绑定的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.cs</groupId>
<artifactId>cs-jaxb</artifactId>
<packaging>jar</packaging>
<dependencies>
    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.2.4-1</version>
    </dependency>
</dependencies>
<name>cs jaxb</name>
<version>1.0.0</version>
<parent>
    <artifactId>hip-jaxb-parent</artifactId>
    <groupId>com.cs</groupId>
    <version>0.0.1-SNAPSHOT</version>
</parent>
<build>
    <defaultGoal>install</defaultGoal>
    <plugins>
        <plugin>

            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>
            <version>0.8.0</version>
            <executions>
                <execution>

                    <id>CS</id>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <schemaDirectory>src/main/resources/</schemaDirectory>
                        <schemaIncludes>
                            <include>**/*.xsd</include>
                        </schemaIncludes>

                    </configuration>
                </execution>

            </executions>
        </plugin>
        <plugin>
            <inherited>true</inherited>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

自从我第一次在网上提问以来，请耐心等待我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:27:48.193

多亏了大家，这对我来说像往常一样是一个大错误，但无论如何我第一次喜欢使用stackoverflow，并且会在这里窥探一下。

问题出在我的类路径上。我指的是一个 xmlbeans 绑定项目，它的 java 源代码与 jaxb 生成的包和类相同，它们作为 jar 包含在我的类路径中。所以我有 2 个具有相同名称和包的类，但令我痛苦的是 JAXB 选择了 Xmlbeans 类，我两天没有意识到这一点。这是 Java 中最古老的错误之一，我为这个错误道歉。如果有人需要任何澄清，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:06:48.850

Have you annotated all root classes with the `@XmlRootElement` annotation?

See: [Unofficial JAXB Guide - Mapping interfaces - Java.net](http://jaxb.java.net/guide/Mapping_interfaces.html)

Second, I would recommend you not to create your JAXBContext via `JAXBContext.newInstance("my package name");`. It is better to specify the root classes explicitly. Therefore if you have two root classes named `ClassA` and `ClassB` use it this way:

```
JAXBContext.newInstance(new Class[] {ClassA.class, ClassB.class}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:05:39.887

我怀疑您正在尝试将 JAXB 1 ( [**JSR-31**](http://jcp.org/en/jsr/detail?id=031) ) 模型与 JAXB 2 ( [**JSR-222**](http://jcp.org/en/jsr/detail?id=222) ) 运行时一起使用。在 JAXB 1 实现中，生成由实现特定的 impl 类支持的规范定义的接口。在 JAXB 2 中，这成为规范定义的类，具有与所有实现兼容的标准注释。大多数 JAXB 2 实现都支持自己的 JAXB 1 模型，但可能需要一些额外的配置，如果您尝试使用具有不同 JAXB 2 提供程序的 JAXB 1 模型，您可能会看到这种类型的错误。

# javascript - Javascript 对象组合

> ID：11503238
> 
> 赞同：1
> 
> 时间：2012-07-16T11:23:43.393
> 
> 标签：javascript

我想知道有什么区别，或者如果有的话，下面的 JS 是用于构建一个对象。它是风格的东西/标准的东西吗？如果是这样，哪个最常见？

示例 1：

```
var MyNamspace = {
  选项：{测试：10}，
  someFunction: function() { alert("Hello"); }
}

```

示例 2：

```
var MyNamespace = {};
MyNamespace.options = { test: 10 };
MyNamespace.someFunction = function() { alert("Hello"); }

```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:28:32.580

两者之间没有显着差异（尽管第二个可能稍微慢一些）。

第一个例子更常见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:40:20.017

第一个`MyNamspace`是缺少“e”，否则没有功能差异。

第二种模式用于当已经有一个对象具有`someFunc.prototype`要扩展的属性（如 ），但您需要离开覆盖部分（`MyNamespace = {};`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:31:03.390

第二个选项修改现有类型，因此在相等时，第二个选项是修改现有类型的签名，就像您可以做的那样：`MyClass.prototype.someFunction = function() { }`

这就是 JavaScript 可以方便灵活的地方。

# c# - 如何在 C# 中为我的组合框选项添加价值？

> ID：11503240
> 
> 赞同：0
> 
> 时间：2012-07-16T11:23:46.687
> 
> 标签：c#, winforms

我的 Windows 窗体应用程序中有组合框，我希望它具有特定选项的值。

现在我只能选择一个选项，当我选择它时 - 我可以通过

```
combobox.text 
```

我的目标是在组合框中列出文件名，并在值中包含指向它们的路径。

示例：文本is=“option1”它包含的值是=“value1”，怎么办？

我看到了一些关于它的主题，但它们大约有 2 年的历史，也许有些改变，因为这些解决方案不是那么友好：]

**更新**

我对您的解决方案有一个问题，Mahmoud Gamal :)

我是这样做的：

```
 List<Foo> combo3data = new List<Foo>();

        categories = Directory.GetDirectories(@"C:\banners\categories\");

        // There are 3 different paths in categories[] array (category1, category2 and 3)

        Foo categoryInsert = new Foo();

        foreach (string s in categories)
        {
            categoryInsert.path = s;
            categoryInsert.name = s;
            combo3data.Add(categoryInsert);
        }

        comboBox3.DataSource = combo3data;
        comboBox3.ValueMember = "path";
        comboBox3.DisplayMember = "name"; 
```

之后，我的 comboBox3 有 3 个可用选项（正确），但它们都相同（与选项 #1 相同） - 为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:29:43.170

您正在寻找两个属性：

*   [`ValueMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx).
*   [`DisplayMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx).

在您的情况下，您必须将组合框的`ValueMember`属性设置为`value1`并将`DisplayMember`属性设置为`option1`。

**更新：**以下是如何从某个实体的列表中填充组合框项目的示例`Foo`：

```
public class Foo(){
    public string Id { get; set; }
    public string Name { get; set; }
}

 var ds = new List<Foo>(){
     new Foo { Id = "1", Name = "name1" },
     new Foo { Id = "2", Name = "name2" },
     new Foo { Id = "3", Name = "name3" },
     new Foo { Id = "4", Name = "name4" },
 };

 comboboxName.DataSource = ds;
 comboboxName.ValueMember = "Id";
 comboboxName.DisplayMember = "Name"; 
```

**Update2：**那是因为您每次都添加相同的对象。在以下代码块中：

```
Foo categoryInsert = new Foo();

foreach (string s in categories)
{
    categoryInsert.path = s;
    categoryInsert.name = s;
    combo3data.Add(categoryInsert);
} 
```

每次`foreach`迭代`categories`，它所做的一切都是改变同一个 object`categoryInsert`的值`path`，而`name`不是创建一个新的值。因此，您最终会在每次迭代中将相同的对象添加到`combo3data`. 您需要的是每次`Foo`在自身内部创建一个新对象，即：移动循环内部。就像是：`foreach``Foo categoryInsert = new Foo();``foreach`

```
foreach (string s in categories)
{
    Foo categoryInsert = new Foo();
    categoryInsert.path = s;
    categoryInsert.name = s;
    combo3data.Add(categoryInsert);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:30:05.167

用于`comboBox.Text`设置或获取与此组合框关联的文本。for Values`comboBox.ValueMember`用于 ListControl 中项目的实际值，或者您也可以将值存储在`comboBox.Tag`

# javascript - 检查不同的日期格式

> ID：11503241
> 
> 赞同：0
> 
> 时间：2012-07-16T11:23:57.873
> 
> 标签：javascript, jquery

我有功能：

```
sample(date){
  //operations, for example add one week (7 days) 

  return date;
}

var one = new Date('2012-07-16');
var two = new Date('07/16/2012');

var new = sample(one); // or sample(two)

var day = new.getDate();
var month = new.getMonth();
var year = new.gerYear();

alert(day + month + year); 
```

现在我想显示这个日期，但是我如何检查这个日期的格式？例如：

```
alert(sample(one)); 
```

应该显示格式为**2012-07-23**的日期 ，如果

```
alert(sample(one)); 
```

应该告诉我**2012 年 7 月 23 日**

但是我如何检查当前日期的格式？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:25:48.447

Date 对象不会“记住”创建它们的格式——它们只是标准 Javascript“自纪元以来的毫秒数”时间值的包装器。

您需要滚动自己的“日期到字符串”函数，或者使用流行的现有库之一（例如[Datejs](http://www.datejs.com/)）

# webgl - 在 Three.js 中打孔以渲染到纹理

> ID：11503244
> 
> 赞同：2
> 
> 时间：2012-07-16T11:24:04.753
> 
> 标签：webgl, three.js

我正在使用渲染到纹理进行后处理，然后将几个 2D 图层混合在一起。

目前我正在使用模板蒙版在渲染到纹理目标中制作“洞”，并使某些区域保持透明。但是，就我而言，这有点麻烦。我宁愿忽略模板掩码，然后只使用普通的 polyfill 操作来绘制孔。

存在什么样的方法来渲染场景中的“填充到 alpha 0.0”区域？即现有的rendet-to-texture 目标alpha 值将被忽略，而只是替换为0.0 值。我假设您可以设置 OpenGL 模式位，以便（如何？）这样做，而无需使用自定义片段着色器。

我已经知道如何将深度蒙版设置为忽略模式，因此我可以在现有多边形的顶部重绘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-30T02:58:06.033

您只需`THREE.NoBlending`在绘制的多边形中使用的材质中使用混合模式来制作孔。材质应该是 ShaderMaterial，以便您可以编写所需的 alpha，如下所示：

```
var r = 0.5;
var g = 0;
var b = 0;
var a = 0.8;
var material = new THREE.ShaderMaterial( {
    uniforms: {
        col: { type: "v4", value: new THREE.Vector4( r, g, b, a ) }
    },
    fragmentShader: "uniform vec4 col; void main() {\n\tgl_FragColor = col;\n}",
    side: THREE.DoubleSide
} );

material.transparent = true;
material.blending = THREE.NoBlending; 
```

（请注意，DoubleSide 参数与问题无关，但有时很有用。）

# github - 如何在 GitHub 上拥有一个带有公共问题跟踪器的私有存储库？

> ID：11503246
> 
> 赞同：21
> 
> 时间：2012-07-16T11:24:08.713
> 
> 标签：github, bug-tracking

我将向社区发布我的应用程序的一些测试版。项目存储在 GitHub 的私有存储库中。

我想允许这个社区报告错误并将它们直接放在 GitHub 问题选项卡上 - 它现在不是由 GitHub 提供的。你有什么想法，如何覆盖这个流程？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T09:33:44.707

[Bitbucket](http://bitbucket.org)提供了这一点。您可以将代码保密，但将跟踪器公开（任何人都可以查看、创建和评论问题）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-06-25T06:06:21.410

从 2019 年 9 月起不可能，如：[https](https://help.github.com/articles/issues-only-access-permissions/) ://help.github.com/articles/issues-only-access-permissions/ （[存档](https://web.archive.org/web/20190616101131/https://help.github.com/en/articles/creating-an-issues-only-repository)）：

> GitHub 不提供仅问题访问权限，但您可以使用仅包含问题的第二个存储库来完成此操作。

他们建议您为这些问题创建一个单独的公共存储库。

可能的相同请求：[类似 Github 的托管，具有私人资源，公共票务系统](https://stackoverflow.com/questions/1847875/github-like-hosting-with-private-source-public-ticketing-system)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-23T08:17:26.057

到目前为止，您可以使用[https://gitreports.com/](https://gitreports.com/)来托管私有和公共存储库的错误和问题跟踪器。另外，问题可以在没有 github 帐户的情况下发布。

# c - 文字字符串索引标准 C 吗？

> ID：11503248
> 
> 赞同：3
> 
> 时间：2012-07-16T11:24:17.640
> 
> 标签：c, string, indexing

我偶然发现了包含以下内容的代码：

```
char c = "abc"[1]; 
```

它可以使用 gcc 编译并运行良好！`c`将`'b'`在此表达式之后。

这个标准是索引文字字符串还是仅仅是运气好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T11:25:07.327

当然是，字符串文字是数组类型。它被转换为`char`表达式中的指针，类似于指向 的任何指针`char`。

```
char c = "abc"[1]; 
```

和

```
char *p = "abc";
char c = p[1]; 
```

是等价的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T11:33:45.700

这完全是标准的。字符串实际上是指向字符数组指针的语法糖，任何指针都可以使用下标表示法。

事实上，`a[b]`is 等价于which又`*(a + b)`等价于`*(b + a)`，这会导致你得到一个稍微令人惊讶的结果：`a[b]``b[a]`

```
char c = 1["abc"]; 
```

可以发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:26:48.123

这是标准的，因为由 "" 定义的字符串被转换为可以索引的 char*（char 指针）。该指针的目标始终是 1 char，在您的情况下是 b 。

# weblogic - 如何使用 oracle adf 中的表达式生成器设置当前日期？

> ID：11503249
> 
> 赞同：0
> 
> 时间：2012-07-16T11:24:23.893
> 
> 标签：weblogic, jdeveloper, oracle-adf

如何使用 oracle adf 中的表达式生成器设置当前日期？我正在使用 jdeveloper 11.1.1.3.0 并使用输入日期（ADF faces.common.component）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:15:48.350

表达式构建器用于构建引用方法或值属性的 EL 表达式。它的目的不是设置一个值，而是使其可用于编辑。一种选择是使用方法表达式来调用管理 bean 上的操作，然后设置值。但是，在 JSF 1.2 中，您不能将参数传递给 EL 方法，因此您需要解决方法来设置日期。解决方法是方法表达式（因此按下按钮）调用一个方法，然后创建当前日期（或您想要传递的任何日期）并将其直接设置在组件上（尽管将其设置在组件模型工作得更好IMO）。

坦率

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T22:29:29.110

另一种选择是让您的数据源字段在业务服务层中为其定义一个默认值。因此，例如，如果您使用的是 ADF BC，那么您的字段可以默认为 adf.currentDate。

# iphone - LinkedIn关注插件..如何创建？如何调用 OADataFetcher 以及如何处理回调方法？

> ID：11503252
> 
> 赞同：1
> 
> 时间：2012-07-16T11:24:28.433
> 
> 标签：iphone, objective-c, linkedin

LinkedIn关注插件..如何创建？如何调用`OADataFetcher`以及如何处理回调方法？这些是`LinkedIn`..的主要任务

请告诉我答复..请尽快。

# html - 将元素裁剪到其他元素的宽度

> ID：11503253
> 
> 赞同：0
> 
> 时间：2012-07-16T11:24:30.773
> 
> 标签：html, css

我有一个页面，该页面应该显示图像的缩略图及其文件名。这是我目前正在使用的：

**HTML**：

```
<a href="#" class="thumbContainer">
    <img class="thumbnail" src="preview4.jpg">
    <br>
    <span class="description">preview4.jpg</span>
</a> 
```

**CSS**：

```
.description{
    width: 100%;
    height: 18px;
    font-size: 16px;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    display: inline-block;
    color: black;
}.thumbnail{
    display: inline-block;
    border: 2px solid black;
    max-height: 150px;
}.thumbContainer{
    display: inline-block;
    margin-right: 8px;
} 
```

这工作得很好，除了长文件名扩展了它们的父容器，弄乱了页面布局。我希望较短的文件名保持现在的中心位置，但名称太长会被剪裁，因此它们不会比容器中的图像宽。图像宽度未知。有什么想法可以让我完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:21:27.880

这是工作小提琴：http: [//jsfiddle.net/adrz3/1/](http://jsfiddle.net/adrz3/1/)

**CSS：**

```
.thumbContainer{
    display: inline-block;
    margin-right: 8px;
    background:#333;
    max-width:154px;
    text-decoration:none;
}
.thumbnail{
    display:block;
    border: 2px solid black;
    max-height: 150px;

}
.description{
    height: 18px;
    font-size: 16px;
    text-align: center;
    overflow: hidden;
    display: block;
    color: #fff;
    padding:5px 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:39:26.107

给 .thumbContainer 一个与缩略图图像宽度相等的宽度。

还要给 .thumbContainer text-align:center

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:43:14.070

尝试将此设置为您的描述类..

```
position: relative; 
```

并将“溢出：隐藏或自动”设置为您的 thumbContainer 类！

如果这不起作用....您可以尝试给出 min-width 或 margin:0 auto; 去你的一门课……继续！

# javascript - 使用 JavaScript 访问 MySQL 数据库以在 Google Maps API V3 上添加标记

> ID：11503254
> 
> 赞同：1
> 
> 时间：2012-07-16T11:24:33.053
> 
> 标签：javascript, android, google-maps-api-3, google-maps-markers

我目前正在开发一个集成了谷歌地图的安卓应用程序。

我决定使用 webview 和 Google Maps API v3，因为我想配置地图并从中删除兴趣点。我也选择使用它，因为我想限制地图的缩放和平移功能。我已经成功地完成了这些事情。

现在，我想问任何人是否可以使用我的 MYSQL 数据库中的数据向地图添加标记。我的数据库包含以下内容：

1.  地点名称
2.  经度和纬度值
3.  以及对该地点的简要说明

我在这里读过一个问题，说明如何在点击标记时显示信息窗口，但我想知道是否可以在点击信息窗口时将用户定向到链接。

任何帮助都感激不尽。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:03:23.450

标题中的问题：要显示来自 MySQL 的标记，请参阅[文档文章部分中的](https://developers.google.com/maps/articles/)这篇文章： [使用 PHP/MySQL 和 Google 地图](https://developers.google.com/maps/articles/phpsqlajax_v3)

第二个问题

> 我想知道是否可以在点击信息窗口时将用户定向到链接。

如果您将链接放在信息窗口中，它将起作用。如果您在发布该代码或显示问题的地图链接时遇到问题。

# ruby-on-rails - 回形针中的文件名

> ID：11503256
> 
> 赞同：0
> 
> 时间：2012-07-16T11:24:38.543
> 
> 标签：ruby-on-rails, ruby, paperclip

嘿，所以我有一个名为 Asset 的类，每个 Asset 都有一个：附件。我想获取上传文件的 :basename.:extension 并将其存储在 :asset_file_name 中。我该怎么做呢？这是我的课：

```
 class Asset < ActiveRecord::Base
    attr_accessible :asset_file_name, :lesson_id, :attachment

    #allows us to use :lesson_id in :url
    Paperclip.interpolates :lesson_id do |attachment, style|
    attachment.instance.lesson_id
    end

    has_attached_file :attachment,
    :url => "/attachments/:lesson_id/:basename.:extension",
    :path => ":rails_root/public/attachments/:lesson_id/:basename.:extension"

    validates_presence_of :asset_file_name
    validates_attachment_presence :attachment

    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:32:58.130

不知道为什么你想要一个asset_file_name 属性

但你应该能够通过`attachment_file_name`

# c# - 如何检查内容文件是否存在？

> ID：11503257
> 
> 赞同：2
> 
> 时间：2012-07-16T11:24:40.087
> 
> 标签：c#, silverlight, windows-phone-7

在我的 Windows Phone 应用程序中，我有 .mp4 文件作为内容。如何检查我的应用程序中是否真的有它？

**更新** 例如在我的情况下我有来源：`/res/9a8be1550f818223edcfc5ab6d765cec.mp4`

```
if (File.Exists(localPath))
{
    myMediaElement.Source = new Uri(localPath, UriKind.Relative);
} 
```

如果我以这种方式检查，则会出现异常：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:51:07.663

```
System.Windows.Resources.StreamResourceInfo sr;  
sr = Application.GetResourceStream(new Uri("images/MenuIcon.png", UriKind.Relative)); // path should NOT begin with a slash  
if (sr == null)  
{  
    // doesn't exist  
}  
else  
{  
    // exists  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T08:56:19.007

**用户“revolutionkpi”的回答可能导致 System.IO.IOException，最好添加 try-catch 块：**

```
System.Windows.Resources.StreamResourceInfo sr; 
try {
    sr = Application.GetResourceStream(new Uri("/images/MenuIcon.png",UriKind.Relative));
    if (sr == null)  {  
        // doesn't exist  
    }
    else{  
        // exists  
    } 
}
catch (Exception e) {
    // doesn't exist
} 
```

Edit1：*更漂亮的解决方案*

```
var uri = new Uri("/images/MenuIcon.png", UriKind.Relative);
ImageSource image = null;

try
{
    if (Application.GetResourceStream(uri) != null)
    {
        image = new BitmapImage(uri); 
    } 
}
catch { }

if (image == null) {
    // doesn't exist  
} 
```

# mysql - MySQL 关于员工和员工以及使用连接的空值

> ID：11503259
> 
> 赞同：1
> 
> 时间：2012-07-16T11:24:44.703
> 
> 标签：mysql, join, null, inner-join

我有三张桌子

员工 empId int pk empname varchar

customersite empid int pk fk custid int pk fk startdate date pk enddate date

employeeassignment custid int pk 站点名称 varchar

我的问题是

如何使用今天在客户站点上的人员的站点名称显示我们所有员工的姓名。对于今天不在客户网站上的人，请显示他们的姓名和网站名称的“N/A”。

我到目前为止

```
SELECT
e.EmpName,
cs.SiteName
FROM
EmployeeAssignment ea
INNER JOIN
Employee e
ON
e.EmpId = ea.EmpId
INNER JOIN
CustomerSite cs
ON
cs.CustId = ea.CustId 
```

这给了我今天工作的所有员工，包括他们的姓名和地点。

非常感谢您的任何帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:27:34.283

您应该使用外连接而不是内连接：

```
SELECT e.EmpName, IFNULL(cs.SiteName, 'N/A') AS SiteName
FROM Employee e 
LEFT JOIN EmployeeAssignment ea ON e.EmpId = ea.EmpId 
LEFT JOIN CustomerSite cs ON cs.CustId = ea.CustId 
```

您可能还想添加其他条件，例如限制日期。

# php - 使用 php 中的会话防止对登录的攻击

> ID：11503261
> 
> 赞同：1
> 
> 时间：2012-07-16T11:24:47.847
> 
> 标签：php, mysql, security, session

我正在尝试使用会话来存储登录尝试的数量。当达到最大登录尝试次数时，我将客户端的 IP 地址存储在黑名单表中。

我已经考虑到的一些事情，您可能需要了解：

*   我在`session_regenerate_id();`设置会话值后使用。
*   除了会话之外，我没有使用任何 cookie，因为这不是必需的，也不是 2012 年：p
*   用户 ip 被列入黑名单，直到我从黑名单表中手动删除他的行。
*   是一个已定义的`SESSION_MAX_ATTEMPTS`常数并设置为 5。
*   该`index.php?module=login&task=blacklist`页面只是向用户显示它已被列入黑名单的消息。此页面没有任何功能。
*   我正在使用自定义构建 php 框架，所以我不得不将一些称为方法的 OOP 转换为简化的 php 代码。

在执行登录查询之前调用以下函数：

```
private function preventAttack()
{
    $blocked = getData("SELECT count(*) as blocked FROM blacklist WHERE ip = @Value0;", Array( $_SERVER['REMOTE_ADDR'] ));
    if($blocked[0]["blocked"] == "1")
    {
        redirect("index.php?module=login&task=blacklist");
    }
    $old = (int)$this->session->get("login_attempts");
    if(!empty($old))
    {           
        if($old > SESSION_MAX_ATTEMPTS)
        {
            setData("INSERT INTO blacklist SET ip = @Value0;", Array( $_SERVER['REMOTE_ADDR'] ));
            redirect("index.php?module=login&task=blacklist");
        }
        else
        {
            $old++;
            $this->session->set("login_attempts",$old);
        }
    }
    else
    {
        $this->session->set("login_attempts", 0);
    }
} 
```

第一个 if 语句有效，包括两个查询，但我被困在存储尝试次数的最佳方式是什么以及 ++ 它的最佳方式是什么？也许你们可以让我朝着正确的方向前进。

如果您对我的代码有任何疑问，请添加评论。我知道它有点不可读，因为它来自我的框架，我在发布之前已经翻译了一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:33:32.093

将失败尝试的次数存储在数据库中，而不是会话中。注意：您可能需要在其自己的记录中保留每个故障及其时间戳（并忽略/删除任何早于阈值的内容）。

顺便说一句，针对 deceze 的评论：

> 这种方法的巨大缺陷：会话依赖于客户端发送 cookie。真正的攻击者根本不会发回 cookie。*ziiiing*您必须通过 IP 进行所有操作。

对此的解决方案是，您不接受没有在其他地方设置的有效会话 cookie 的登录尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:45:17.187

非常感谢大家，我从你们的评论中学到了很多东西。对于有同样问题的用户，我将解释我学到了什么以及我如何使用这些知识。

到目前为止我学到了什么：

1.  真正的攻击者根本不会发回 cookie。因此，在这种情况下，使用 cookie 或会话没有任何意义。
2.  如果您想将攻击者列入黑名单，请使用自动为您执行此操作的防火墙。从您的脚本中执行此操作没有任何意义，会话太容易被规避，如果您检查 IP 地址，您可能会在同一外部 IP 上屏蔽整个办公室或学校。
3.  无论您做什么：仅将登录尝试数据存储在服务器上的数据库/平面文件/等中。用户或攻击者将无法如此轻松地编辑此数据。
4.  如果您确实将数据存储在 Web 服务器上以提高性能，请将其存储在文件中，而不是数据库中。

如果我忘记了什么，请发表评论，我会编辑这篇文章。

我咨询了我的托管服务提供商，他们已经使用上述防火墙等解决方案阻止了许多攻击者。所以我将停止尝试在我的脚本中也这样做。

我的脚本现在已修复，仅将猜测密码的用户和新手黑客列入黑名单：

```
private function preventAttack()
{
    $blocked = getData("SELECT count(*) as blocked FROM blacklist WHERE ip = @Value0;", Array( $_SERVER['REMOTE_ADDR'] ));
    if($blocked[0]["blocked"] == "1")
    {
        redirect("index.php?module=login&task=blacklist");
    }
    $old = (int)$this->session->get("login_attempts");
    if($old > 0)
    {           
        if(($old + 1) >= SESSION_MAX_ATTEMPTS)
        {
            setData("INSERT INTO blacklist SET ip = @Value0;", Array( $_SERVER['REMOTE_ADDR'] ));
            $this->session->set("login_attempts", 0);
            redirect("index.php?module=login&task=blacklist");
        }
        else
        {
            $old++;
            $this->session->set("login_attempts",$old);
        }
    }
    else
    {
        $this->session->set("login_attempts", 1);
    }
} 
```

由于我不太确定该平台将获得多少用户，并且我不希望 mysql 服务器负载可能很高，所以我决定不在数据库中存储登录尝试。也许在未来，谁知道呢。

# android - 不幸的是，应用程序停止了

> ID：11503269
> 
> 赞同：0
> 
> 时间：2012-07-16T11:25:20.693
> 
> 标签：android, android-emulator

> **可能重复：**
> [另一个屏幕中列表项的详细信息](https://stackoverflow.com/questions/11433303/detail-of-list-item-in-another-screen)

当我选择一个项目时，我希望应用程序导航到第二个活动并获取所选项目的值以及第二个活动中存在的 TextView 的相关链接。代码应该可以工作，但是当我运行它时，模拟器会给我一条消息，说“不幸的是应用程序停止了”。我不知道该怎么做才能让它工作？

```
public class LastActivity extends ListActivity {
    /** Called when the activity is first created. */

    static List<String> links;
    List<String> names;

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        String link=links.get(position);

        Intent intent = new Intent(getApplicationContext(),Details.class);
        intent.putExtra("name",names.get(position));
        intent.putExtra("url",link);
        Log.e("n",names.get(position)+"."+ link );
        startActivity(intent);

    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        links=new ArrayList<String>();
        names=new ArrayList<String>();
        try{
            URL url=new URL(webservice);
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();
            xpp.setInput(getInputStream(url), "UTF_8");
            boolean insideItem = false;

                    // Returns the type of current event: START_TAG, END_TAG, etc..

            int eventType = xpp.getEventType();

            while (eventType != XmlPullParser.END_DOCUMENT) {

                    if (eventType == XmlPullParser.START_TAG) {

                        if (xpp.getName().equalsIgnoreCase("item")) {

                            insideItem = true;

                        } else if (xpp.getName().equalsIgnoreCase("Name")) {

                            if (insideItem)

                                names.add(xpp.nextText()); //extract the headline

                        } else if (xpp.getName().equalsIgnoreCase("url")) {

                            if (insideItem)

                                links.add(xpp.nextText()); //extract the link of article

                        }
                    }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){

                        insideItem=false;

                    }

                    eventType = xpp.next(); //move to next element

                }

        }catch (MalformedURLException e) {

            e.printStackTrace();

        } catch (XmlPullParserException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();

        }
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, names);

                setListAdapter(adapter);

 }
    private InputStream getInputStream(URL url) {
        // TODO Auto-generated method stub
        try {
             return url.openConnection().getInputStream();
             } catch (IOException e) {
                   return null;
            }

    }

} 
```

//第二节课或活动

```
public class Details extends LastActivity{
    LastActivity last=new LastActivity();
    TextView tv;
    TextView url;
    String read;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.details);

        tv=(TextView) findViewById(R.id.text);
        url=(TextView) findViewById(R.id.link);
        Intent intent=getIntent();

            // receiving  data
            String name = intent.getStringExtra("name");
            String path=intent.getStringExtra("links");

            Log.e("Second Screen", name + "." + path);
            tv.setText(name);
            url.setText(path);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:27:58.537

我认为问题在于在意图中传递 putExtra 值。检查您的第一个活动，您已将密钥用作“url”，但在详细信息活动中您使用“链接”作为密钥。所以你得到空指针异常。适当地改变它。

```
 intent.putExtra("name",names.get(position));
    intent.putExtra("url",link); 
```

在详情活动中，

```
 String name = intent.getStringExtra("name");
        String path=intent.getStringExtra("url"); 
```

代替，

```
String path=intent.getStringExtra("links"); 
```

在您的第一个活动中，您扩展了 ListActivty，尝试将其替换为单独的活动。

或者在您的 xml 文件中将您的 ListView id 更改为 @android:list。

有关更多信息，请查看此问题，[“Stopped Unexpectedly”尝试了 10000 次以修复](https://stackoverflow.com/questions/11502484/stopped-unexpectedly-tried-10000-times-to-fix/11502568#11502568)

并检查这个以获得更多想法，

[您的内容必须有一个 id 属性为 'android.R.id.list 的 ListView](https://www.google.co.in/search?sourceid=chrome&client=ubuntu&channel=cs&ie=UTF-8&q=java.lang.RuntimeException:%20Your%20content%20must%20have%20a%20ListView%20whose%20id%20attribute%20is%20%27android.R.id.list)

# android - OpenGL 着色器。传递浮点数组

> ID：11503271
> 
> 赞同：3
> 
> 时间：2012-07-16T11:25:25.443
> 
> 标签：android, opengl-es, shader, uniform

在我的场景中，我有许多对象要同时旋转，但角度不同。

我有一个着色器，它计算每个对象的位置并绘制整个场景（将顶点数组传递到带有顶点数组的着色器中）。

```
 "uniform float uRotation;" +
    ...
    "   mat4 mz = mat4(1.0);" +
    "   mz[0][0] = cos(rotation);" +
    "   mz[0][1] = sin(rotation);" +
    "   mz[1][0] = -sin(rotation);" +
    "   mz[1][1] = cos(rotation);" +
    ...
    gl_Position = uMVPMatrix * (aPosition *mz); 
```

我在数组中有我所有的顶点、索引、颜色等（不是每个对象的 1 个数组，而是 1 个带有顶点偏移量的数组，一个用于颜色等）。

我想在一个 float[] 中传递一组浮点数（每个“对象”的角度），但没有什么是快乐的。

```
 public void setRotations(float[] rotations)
    {
        GLES20.glUniform3fv(muRotation, rotations.length, rotations, 0);    
    } 
```

如果通过并仅使用一个浮点数，一切正常。

我如何为每个对象传递特定的浮点数（例如，我想绘制 20 个矩形（我有一个 vetrex 数组：float[20*3*4]），因为我知道每个顶点必须有浮点数：旋转：float[20 *4])?

**更新：**

我尝试将数组作为纹理传递。

当我为场景创建资源时 - 我尝试创建我的数组（称为掩码）：

```
 mask = new float[512*512*4];
    for (int i = 0; i < mask.length; i++)
    {
        mask[i] = 2f;
    }

    GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, 1029384756);
    GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 1, GLES20.GL_RGBA, 512, 512, 0, GLES20.GL_RGBA, GLES20.GL_FLOAT, FloatBuffer.wrap(mask));
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0); 
```

然后，当我在场景上绘制新项目时，我使用着色器并尝试传递我的数组：

```
 setShaderProgram(ShaderProgram.getInstance());

    GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
    GLES20.glUniform1i(ShaderProgram.sUniformMask, GLES20.GL_TEXTURE1);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, 1029384756);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0); 
```

但是当我尝试检查数组中的任何值是否> 0.5时，每次计算都会给我**错误**

**更新**

片段着色器包含：

```
"uniform sampler2D " + ShaderProgramConstants.UNIFORM_TEXTURE_0 + ";\n" +
"uniform sampler2D " + ShaderProgramConstants.UNIFORM_TEXTURE_1 + ";\n" +
"varying mediump vec2 " + ShaderProgramConstants.VARYING_TEXTURECOORDINATES + ";\n" +

"void main() {\n" +
"vec4 color = texture2D(" + ShaderProgramConstants.UNIFORM_TEXTURE_0 + ", " + ShaderProgramConstants.VARYING_TEXTURECOORDINATES + ");\n" +
"vec4 mask = texture2D(" + ShaderProgramConstants.UNIFORM_TEXTURE_1 + ", " + ShaderProgramConstants.VARYING_TEXTURECOORDINATES + ");\n" +
"float maskVal = mask.r;\n" ... 
```

颜色和蒙版纹理具有相同的尺寸

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:59:54.980

`GLES20.glUniform1i(ShaderProgram.sUniformMask, GLES20.GL_TEXTURE1);`

如果这是你的采样器制服，它应该是：

`GLES20.glUniform1i(ShaderProgram.sUniformMask, 1);`（不是 GL_TEXTURE1）

sampler0 类似：

`GLES20.glUniform1i(ShaderProgram.sUniformMask, 0);`

# eclipse - Eclipse Juno 最大化分屏

> ID：11503272
> 
> 赞同：16
> 
> 时间：2012-07-16T11:25:26.080
> 
> 标签：eclipse, split, screen, maximize

昨天，我下载了 Eclipse Juno，它很不错。不知何故，我无法最大化显示两个 Java 文件的分屏。同时最大化两个 Java 文件中的一个。

当然，我可以手动关闭包资源管理器、大纲视图等，但这很乏味。如何在拆分视图中最大化两个文件？它曾经是`Ctrl + m`。谢谢你。

编辑：

显然，有两种不同的方式来分割屏幕。我在拆分屏幕时仍然没有弄清楚区别。

![最大化两个文件](../Images/946ee42416f4ff9eb66fed9b94f3baa8.png)

![最大化只有一个](../Images/ff4c36acb6b72673ea1062f97fb8bd5a.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T13:52:28.443

编辑器区域的分割方式取决于您拖动上方选项卡的距离，请注意以下屏幕截图中手形光标的位置：

如果将其拖动到一半，它将被拆分，因此您可以同时最大化两者。

![在此处输入图像描述](../Images/435809da63fa226d129d066b13e0cdda.png)

如果将其拖到右边缘一点，编辑器区域将被分割，因此您一次只能最大化一个。

![在此处输入图像描述](../Images/9c04c7cc84ca1d953fa8116aa4ca09a4.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T18:24:50.647

这种新行为激发了以下 Eclipse 错误报告：

[新的分屏拖动UI/最大化窗格选项一目了然](https://bugs.eclipse.org/bugs/show_bug.cgi?id=389833)

> 所以我很欣赏可能出于善意的 UI 开发，但显然我们中的许多人对现在编辑器拆分和最大化方式的变化感到困惑：
> 
> [Eclipse Juno 最大化分屏](https://stackoverflow.com/q/11503272/403455)
> 
> 对于这些变化，用户体验似乎并没有经过深思熟虑。
> 
> 我可以建议重新考虑这个界面吗？我将首先转储拖放定义窗格是否应单独最大化或与它们的邻居界面一起最大化。首先，用户将编辑器一分为二的情况是“询问”用户是否在某天决定最大化编辑器时是否维护这两个视图的错误时间。最重要的是，用户对此决定的视觉指示充其量是令人困惑的。
> 
> 相反，我建议您放弃变化的绿线界面，而是将决定转移到真正重要的时间 - 即当用户决定最大化编辑器时。也许以下会更好：
> 
> “完整”编辑器窗格的右上角应该有一个小的“编辑器最大化”按钮。这将始终最大化编辑器中的所有窗格。每个编辑器拆分也应该始终有一个最大化/最小化对，这将最大化/最小化该特定拆分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:45:00.837

我还没有使用 Juno，但在以前的版本中，您可以从 Window -> Preferences -> General -> Appearance 更改此行为并使用“当前演示文稿”，直到找到您喜欢的行为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-24T12:57:04.390

如果您使用[**HandySplit**](https://github.com/akikhtenko/HandySplit)插件中的快捷方式拆分编辑器，您应该可以同时最大化两个部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-13T12:23:38.393

使用 Eclipse Luna 4.4 M4+ 会更容易，正如[Lars Vogel在“](http://www.vogella.com/people/larsvogel.html)[在 Eclipse M4 Luna 中实现的拆分编辑器](http://blog.vogella.com/2013/12/12/split-editor-implemented-in-eclipse-m4-luna-solves-bug-8009-one-of-the-highest-voted-bug-in-eclipse-platform/)”中宣布的（2013 年 12 月）：

## 在 Eclipse M4 Luna 4.4 中实现的拆分编辑器

这解决了最古老和最受好评的 Eclipse 错误之一：[Bug 8009](https://bugs.eclipse.org/bugs/show_bug.cgi?id=8009)。

![https://bugs.eclipse.org/bugs/attachment.cgi?id=214959](../Images/818006d734bb6d16b702c9be1973263f.png)

这意味着您只需最大化*一个*Windows，即使该 Windows 是一个代码编辑器视图，并且其中有一个拆分。

> 拆分编辑器功能已在[Bug 378298](https://bugs.eclipse.org/bugs/show_bug.cgi?id=378298)中开发，并将从 Eclipse Luna M4 开始提供。Eclipse Luna M4 的 Note & Newsworthy 将包含该公告。
> 当前拆分的快捷方式是：
> 
> *   `Ctrl`+`_`用于**水平分割**，和
> *   `Ctrl`+`{`用于**垂直分割**。

# hide - TYPO3：如果没有新闻要显示并被内容元素替换，则完全隐藏 tt_news

> ID：11503273
> 
> 赞同：0
> 
> 时间：2012-07-16T11:25:28.097
> 
> 标签：hide, typo3, tt-news

我正在寻找一种方法来隐藏 tt_news 扩展，当没有新闻或只有一个类别的存档新闻文章时，然后在其位置显示一个固定的内容元素。我什至不知道这是否可能，但你永远不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:31:45.087

好吧，无论如何您都需要 tt_news 来检查可用的文章，但是您可以扩展它以在没有当前新闻的情况下显示内容元素。最好的起点可能是 tt_news 显示“没有要显示的新闻”消息的地方。也许有一个钩子，否则你将不得不 XCLASS。

或者，换一种说法：当然有可能，但据我所知，并非没有扩展 tt_news。

# java - Java 线程不共享静态数据

> ID：11503275
> 
> 赞同：0
> 
> 时间：2012-07-16T11:25:47.823
> 
> 标签：java, multithreading, sharing, static-members

我有两个线程应该共享静态变量数据（不是常量），它们必须相应地执行。但是这些线程中没有一个能够获取更新的静态变量数据，除了每个线程都为静态变量维护自己的状态。

我已将静态变量放在单例中并将其声明为 volatile，但结果仍然相同。

有人可以提出这种方法的问题，以及可以做些什么来解决这个问题。

谢谢，Aj

```
below is the code

following is the singleton class

***************************************************************************
public class ThreadFinder {

    public static String pageName;//HashMap threadInfo = new HashMap(); //new HashMap();

private static ThreadFinder singletonObject;
/** A private Constructor prevents any other class from instantiating. */
private ThreadFinder () {
    }
public static synchronized ThreadFinder getSingletonObject() {
    if (singletonObject == null) {
        singletonObject = new ThreadFinder();
    }
    return singletonObject;
}
public static synchronized void setPageName(String Name) {

    pageName = Name;
    //return;
}
public static synchronized String getPageName() {

    return pageName;
    //return;
}
public Object clone() throws CloneNotSupportedException {
    throw new CloneNotSupportedException();
}
//public static void main(String args[])
//{
    //ThreadFinder.getSingletonObject().setPageName("IDEN");
    //System.out.println("page name--------->"+ThreadFinder.getSingletonObject().getPageName());
    //ThreadFinder.getSingletonObject().setPageName("THER");
    //System.out.println("page name--------->"+ThreadFinder.getSingletonObject().getPageName());
//}
}

********************************************************************************

from page 1 below code executes and sets the singleton page variable value to "A" and first pollertimer thread uses the page value as A.

m_poller.setModbusMaster(this.m_connection.getModbusMaster());
m_poller.addListener(this);
ThreadFinder.getSingletonObject().setPageName("A");  //Setting the page name here
PollerTimer polerTimerThread = new PollerTimer(period,"A");  // this is thread

*********************************************************************************

from page2 below code executes and sets the singleton page variable value to "B" and second pollertimer thread uses the page value as B.

m_poller.setModbusMaster(this.m_connection.getModbusMaster());
m_poller.addListener(this);
ThreadFinder.getSingletonObject().setPageName("B");  //Setting the page name here
PollerTimer polerTimerThread = new PollerTimer(period,"B");  // this is thread

***********************************************************************************

Now when first pollertimer thread queries page value using getPageName() it is getting value A instead of B, though it was updated to B by the second thread. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:33:43.063

如果您打算改变它的状态，那么声明您**对单例 volatile 的引用将无济于事。**您需要使用由 volatile var 引用的**不可变单例，或者使该单例中的****每个单独 var**变为volatile。这只是在你没有原子性问题的情况下。第二种方法与根本没有单例几乎相同，只有一些`static volatile`全局变量。

# objective-c - 使用 ios5 和 storyboard 展示视图控制器

> ID：11503277
> 
> 赞同：1
> 
> 时间：2012-07-16T11:26:00.013
> 
> 标签：objective-c, ios, ipad, storyboard, viewcontroller

是否使用`[self presentModalViewController:videoViewController animated:YES];`堆叠多个视图？

在 videoViewController 上，我加载了几个 UIWebView，每个都加载到一个视频中。我在该视图上有一个按钮，可以更改类别。单击类别按钮时，它会显示一个弹出视图，并且该视图内有几个用于不同类别的按钮。当按下其中一个按钮时，我正在执行以下操作以返回 videoViewController：

```
VideoViewController *videoViewController= [self.storyboard instantiateViewControllerWithIdentifier:@"VideoVC"];
[self presentModalViewController:videoViewController animated:YES]; 
```

哪个有效，它会关闭类别弹出视图并返回到 videoViewController 加载不同的视频。但是，几次更改类别后，我的应用程序在收到“确实收到内存警告”消息后开始崩溃。

我有一个“全部”类别，它会在所有视频中加载，但没有收到此类消息，但随后多次更改类别（每个类别在过滤时当然加载较少的视频）我收到警告。所以我真正的问题是，当我更改类别并调用`[self presentModalViewController:videoViewController animated:YES];`时，每次我更改类别时都会显示视图吗？因此，例如，如果我更改类别 5 次，我是否会有 5 个 videoViewController 视图彼此重叠？如果是这样，避免这种情况的最佳方法是什么？

相反，我试图`[self presentModalViewController:videoViewController animated:YES];`看看这是否会有所作为，但 viewViewController 不会重新加载，并且类别弹出视图不会关闭。

这适用于 iPad 应用程序，如果有影响的话。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:45:22.363

每次使用此行时：

```
VideoViewController *videoViewController= [self.storyboard instantiateViewControllerWithIdentifier:@"VideoVC"]; 
```

您正在创建一个新的 VideoViewController 和所有 UIWebviews。您需要的是使用 Objective-C 的委托模式。当用户在弹出视图中选择一个按钮时，您需要对 VideoViewController 的原始瞬间进行回调，并传回用户选择的按钮（例如某种类型的数字）并从那里处理更改。

# jquery - 使用 jquery 单击单选按钮时将值放入 cookie

> ID：11503278
> 
> 赞同：0
> 
> 时间：2012-07-16T11:26:06.263
> 
> 标签：jquery, cookies, radio-button

我有一个生成 2 个单选按钮的 wordpress 插件。对于构象，我想显示在下一页上单击的最后一个单选按钮的值。

我想我会用 cookie 和 jquery 来做到这一点。我得到的是这个：

```
<script type='text/javascript'>
    var verzend = $.cookie("verzend")
    $('input:radio[value="OrderWeight-0]').click(function () {
        $.cookie('verzend', 'verzenden')
    });
    $('input:radio[value="OrderWeight-1]').click(function () {
        $.cookie('verzend', 'afhalen')
    });
</script> 
```

不幸的是，它不起作用。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:05:45.767

You should try with the *change* event, more adapted to radio input.

```
<script type='text/javascript'>
    var verzend = $.cookie("verzend")
    $('input:radio').on('change', function() {
        if ($(this).val() === "OrderWeight-0") {
            $.cookie('verzend', 'verzenden')
        } else {
            $.cookie('verzend', 'afhalen')
        }
    });
</script> 
```

# yii - YII 如何从另一个会话中获取数据？

> ID：11503281
> 
> 赞同：3
> 
> 时间：2012-07-16T11:26:17.260
> 
> 标签：yii

我需要一个 UI 来管理所有应用会话。我如何从国外会话中检索数据？我`m interested in getting data set by`在其他用户登录期间设置状态函数。

我正在使用 CDbHttpSession 在数据库中存储会话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:28:07.650

所以，我找到了答案，但它不是`t good in my opinion. But maybe it will be helpfull for others. Yii stores data in session table using php built in session serialization method (it isn`常规的序列化函数）。我发现使用它的唯一方法是在评论中的 php session_decode 手册[页](http://php.net/manual/ru/function.session-decode.php)上建议。

# asp.net - 64位编译的网站没有连接到sql server

> ID：11503282
> 
> 赞同：-1
> 
> 时间：2012-07-16T11:26:18.243
> 
> 标签：asp.net, sql-server-2008, iis-7.5

我有一个奇怪的问题。

我有同时使用`Oracle`和的 Web 应用程序`sql server 2008`。

我想使用 Oracle Data Provider for `.NET 64bit`version。为此，我将应用程序池设置为启用 32 位 = false，否则 ODT.NET 64 位无法正常工作。所以我也必须将程序集编译为 64 位。但是当我这样做时，我从 sql server 收到以下错误：

```
 A network-related or instance-specific error occurred while establishing a connection
 to SQL Server. The server was not found or was not accessible. Verify that the instance 
 name is correct and that SQL Server is configured to allow remote connections. 
```

当我编译回任何 cpu 时它工作正常，但只有当我将应用程序池设置为启用 32bit=true 时。

更奇怪的是，在我的测试和预生产服务器中，它在 sql server 和 oracle 的 64 位设置下运行良好。

但是在我的产品服务器中，我不断从 sql 中收到此错误。

所以也许这是我的产品机器中的 IIS 问题？

到目前为止，我所做的是比较 iis 中的所有设置在所有机器上都相同，但这并没有解决问题。

会是什么呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-16T12:18:32.257

问题解决了！

事实证明，在那台特定的机器上，我需要按名称而不是 ip 在连接字符串中调用 sql 服务器。

# java - Hibernate 和 Apache Tomcat 的问题

> ID：11503283
> 
> 赞同：2
> 
> 时间：2012-07-16T11:26:19.943
> 
> 标签：java, hibernate, exception, jdbc

我在我的项目中使用*Apache Tomcat*作为服务器和数据库的`Hibernate`实现。一段时间以来，我遇到了一个错误，并非每次都出现。拿到它后，如果我重新启动服务器，通常一切都很顺利。下面是堆栈跟踪：`JPA`*`PostgreSQL`*

 *```
 javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not execute query
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1389)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1317)
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:307)
    at com.netnfork.business.authentication.UserChecking.isValidUser(UserChecking.java:105)
    at com.netnfork.authentication.AuthLogin.doPost(AuthLogin.java:55)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: org.hibernate.exception.GenericJDBCException: could not execute query
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.doList(Loader.java:2545)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:316)
    at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1842)
    at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:157)
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:274)
    ... 20 more
Caused by: org.postgresql.util.PSQLException: FATAL: terminating connection due to administrator command
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2103)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1836)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:512)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:388)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:273)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
    at org.hibernate.loader.Loader.doQuery(Loader.java:802)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2542)
    ... 27 more 
```

**问题：**我不明白为什么会出现此错误。如果您认为您可以提出问题所在，请执行此操作。

（注意，如果您需要更多详细信息，请告诉我）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:24:12.827

PostgreSQL 日志应该能提供更多信息，但您可能已经用完了

*   连接。检查`max-connections`postgresql.conf。[链接到 9.1 的文档](http://www.postgresql.org/docs/9.1/static/runtime-config-connection.html#RUNTIME-CONFIG-CONNECTION-SETTINGS)

*   内存不足，oom-killer 会终止您的连接。[链接到 9.1 的文档](http://www.postgresql.org/docs/9.1/static/runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-MEMORY)和[一篇关于 PostgreSQL 内存管理和 linux的文章](http://blog.credativ.com/en/2010/03/postgresql-and-linux-memory-management.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:41:00.883

正如@BGR 建议的那样，我的问题与连接有关。有一个函数创建了一个连接（一个`EntityManager`在*hibernate*上）并忘记了`close()`它。一段时间后 - 因为该函数被相对频繁地调用 - 我的配置文件中指定的最大连接数被填满，并导致了这种行为。*

# asp.net-mvc-3 - MVC：有条件地调用重载的构造函数

> ID：11503285
> 
> 赞同：1
> 
> 时间：2012-07-16T11:26:30.820
> 
> 标签：asp.net-mvc-3, dependency-injection, unity-container, cqrs, constructor-injection

我有一个 MVC 应用程序，我在其中实现 CQRS，在其中我将保存数据与将数据读取到单独的接口中分开。我正在使用构造函数注入将这些接口的具体实例注入控制器。对于构造函数注入，我使用 Unity 容器。见下面的例子

```
//The Employee controller 
public class EmployeeController : Controller
{
    IEmployeeRepository _Writer;

    IEmployeeQuery _Reader;

    //constructor injection
    public EmployeeController(IEmployeeRepository writer, IEmployeeQuery reader)
    {
        this._Writer = writer;
   this._Reader = reader;   

    }

    //To Do: constructor injection for write operations only
    public EmployeeController(IEmployeeRepository writer)
    {
        this._Writer = writer;

    }

    //To Do: constructor injection for read operations only
    public EmployeeController(IEmployeeQuery reader)
    {
        this._Reader = reader;

    }
}

//Registration of the concrete types in the unity container.
public static class Bootstrapper
{
    public static void ConfigureUnityContainer()
    {
        IUnityContainer container = new UnityContainer();

        container.RegisterType<IEmployeeRepository, EmployeeRepository>(new HttpContextLifetimeManager<IEmployeeRepository>());
        container.RegisterType<IEmployeeQuery, EmployeeQueries>(new HttpContextLifetimeManager<IEmployeeQuery>());
        ControllerBuilder.Current.SetControllerFactory(new UnityControllerFactory(container));
    }
}

//The derived Controller Factory for injection dependencies in the Controller constructor
public class UnityControllerFactory : DefaultControllerFactory
{
    IUnityContainer container;

    public UnityControllerFactory(IUnityContainer container)
    {
        this.container = container;
    }
    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
    {

        try
        {
            if (controllerType == null)
            {
                throw new ArgumentNullException("controllerType");
            }

            if (!typeof(IController).IsAssignableFrom(controllerType))
            {
                throw new ArgumentException(String.Format("Type requested is not a controller: {0}", controllerType.Name), "controllerType");
            }

            return container.Resolve(controllerType) as IController;

        }
        catch (Exception)
        {

            return null;
        }
    }
} 
```

我发现对于任何操作，我要么获取数据，要么写入数据，但不能两者兼而有之。在这种情况下，我需要根据需要初始化的“_Writer”或“_Reader”有条件地调用控制器构造函数。

如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:29:19.570

延迟加载组件呢？您解决了两个依赖项，但只有一个真正使用的依赖项被初始化。

示例：http: [//pwlodek.blogspot.com/2010/05/lazy-and-ienumerable-support-comes-to.html](http://pwlodek.blogspot.com/2010/05/lazy-and-ienumerable-support-comes-to.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:54:05.793

看起来你有一个控制器，你应该使用两个？如果您永远不需要能够读写，我会考虑将该组件重构为单一职责。

如果您不想这样做，我会考虑注入 NullObject 而不是根本不注入该依赖项。看到[这个线程](https://stackoverflow.com/questions/11392670/register-null-as-instance-in-unity-container)。

TecX[项目](http://tecx.codeplex.com)包含一个模仿 NInject 的上下文绑定的扩展。这将允许您指定何时注入什么依赖项。该代码可以在*TecX.Unity*项目（文件夹*ContextualBinding*）中找到。展示如何使用它的测试在*TecX.Unity.ContextualBinding.Test*项目中）。

# css - FireFox 中不需要的 CSS 精灵边框

> ID：11503287
> 
> 赞同：1
> 
> 时间：2012-07-16T11:26:34.047
> 
> 标签：css, firefox, border, collapse, sprite

我正在尝试使用 css sprites 技术来重新创建良好的翻转效果。到现在为止，我能够获得这个结果[http://iltuttologo.com/index.php/abarabino](http://iltuttologo.com/index.php/abarabino) 当你用鼠标经过城市时，图像被替换为夜间版本，除了 Firefox 之外一切正常我有一个不需要的中央边界。

这是我用过的css：

```
 @charset "utf-8";
        /* CSS Document */

        #mondo   {
          border: none;
          border: hidden;
        }
        .tab {
          width: 840px;
          padding: 0px;
          margin: 0px;

        }
        .tab td {
          display: inline-block;
          padding: 0px;
          margin: 0px;
          width: 420px;
        }
        a.evento1 {
          display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px 0px no-repeat;
        float: left;
          border: none;
        }
        a.evento1:link {
          display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -780px no-repeat;
        float: left;
          border: none;
        }
        a.evento1:hover {
          display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px 0px no-repeat;
        float: left;
          border: none;
        }
        a.evento2 {
          display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) -420px 0px no-repeat;
        float: left;
          border: none;
        }

        a.evento2:link {
          display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) -420px -780px no-repeat;
        float: left;
          border: none;
        }

        a.evento2:hover {
        display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) -420px 0px no-repeat;
        float: left;
          border: none;
        }
        a.evento3 {
        display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -260px no-repeat;
        float: left;
          border: none;
        }
        a.evento3:link {
        display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -1040px no-repeat;
        float: left;
          border: none;
        }
        a.evento3:hover {
        display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -260px no-repeat;
        float: left;
          border: none;
        }
        a.evento4 {
        display: block;
          height: 520px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) -420px -260px no-repeat;
        float: left;
          border: none;
        }
        a.evento4:link {
        display: block;
          height: 520px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) -420px -1040px no-repeat;
        float: left;
          border: none;
        }
        a.evento4:hover {
        display: block;
          height: 520px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) -420px -260px no-repeat;
        float: left;
          border: none;
        }
        a.evento3_extra {
        display: block;
          height: 520px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -260px no-repeat;
        float: left;
          border: none;
        }
        a.evento3_extra:link {
        display: block;
          height: 520px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -1040px no-repeat;
        float: left;
          border: none;
        }
        a.evento3_extra:hover {
        display: block;
          height: 520px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -260px no-repeat;
        float: left;
          border: none;
        }
        a.evento5 {
        display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -520px no-repeat;
        float: left;
          border: none;
        }

        a.evento5:link {
        display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -1300px no-repeat;
        float: left;
          border: none;
        }
        a.evento5:hover {
        display: block;
          height: 260px;
          width: 420px;
        text-indent:-9999px;
        background:url(../images/sprite.png) 0px -520px no-repeat;
        float: left;
          border: none;
        } 
```

在主要的 htlm 页面中，我放置了一个加载上述 css 的表格。这里也是 html 页面：

```
 <table id="mondo" style="margin-left: auto; margin-right: auto; margin-top: 15px;">
        <tbody>
        <tr class="tab">
        <td><a class="evento1" href="#"><img src="images/trasparent_background_260.gif" border="0" alt="Tiziana 50th Birthday" /></a></td>
        <td><a class="evento2" href="#"><img src="images/trasparent_background_260.gif" border="0" alt="Tiziana &amp; Adriano Wedding" /></a></td>
        </tr>
        <tr class="tab">
        <td><a class="evento3" href="#"><img src="images/trasparent_background_260.gif" border="0" alt="Adriano 70th Birthday" style="float: left;" /></a><a class="evento5" href="#"><img src="images/trasparent_background_260.gif" border="0" alt="Adriano 60th Birthday" style="float: left;" /></a></td>
        <td><a class="evento4" href="index.php/abarabino/new-york"><img src="images/trasparent_background_520.gif" border="0" alt="Tiziana 60th Birthday" /></a></td>
        </tr>
        </tbody>
        </table> 
```

我可以在 Chrome、IE9、Safari 中获得良好的可视化效果，但在 Firefox 中我有多余的空间。

你能帮我理解为什么我在 Firefox 上有这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:31:09.910

嘿，现在删除`display: inline-block;`你的 td

像这样

```
.tab td {
    display: inline-block; //remove this line
    margin: 0;
    padding: 0;
    width: 420px;
} 
```

# jquery - Jquery，选择选项。创建图片链接

> ID：11503293
> 
> 赞同：0
> 
> 时间：2012-07-16T11:26:50.133
> 
> 标签：jquery, select, option

使用多项选择选项，我想创建一个图像。

[http://jsbin.com/itujiy](http://jsbin.com/itujiy)

我想创建一个图像。选择 a,b,c 或 d 时，将导演更改为 a,b,c 或 d

When select x,y,z or t, i want to change the second director to x,y,z or t

最后，当我选择 1,2,3.. 或 10 时，将图像数量更改为 1,2,3 .. 或 10

```
 <script type="text/javascript"> 
<!-- 
function showkit() { 
  var htmlStr=""; 
  var option = document.getElementById(event.srcElement.id); 
  for (i=0;i<option.options.length;i++) { 
    if (option.options[i].selected) { 
      htmlStr+=''; 
      htmlStr+=option.options[i].value; 
      htmlStr+=''; 
    } 
  } 
  document.getElementById('kitDisp').innerHTML = htmlStr; 
} 

function showrims() { 
  var htmlStr=""; 
  var option = document.getElementById(event.srcElement.id); 
  for (i=0;i<option.options.length;i++) { 
    if (option.options[i].selected) { 
      htmlStr+=''; 
      htmlStr+=option.options[i].value; 
      htmlStr+='-'; 
    } 
  } 
  document.getElementById('rimsDisp').innerHTML = htmlStr; 
} 

function showcolor() { 
  var htmlStr=""; 
  var option = document.getElementById(event.srcElement.id); 
  for (i=0;i<option.options.length;i++) { 
    if (option.options[i].selected) { 
      htmlStr+=''; 
      htmlStr+=option.options[i].value; 
      htmlStr+=''; 
    } 
  } 
  document.getElementById('colorDisp').innerHTML = htmlStr; 
} 

//--> 
</script> 
```

HTML 代码：

```
<select size="3" id="Final_Version" multiple onChange="showkit()"> 
<option value="1">a</option> 
<option value="2">b</option> 
<option value="3">c</option> 
<option value="4">d</option> 

</select>

<select size="3" id="Final_Version2" multiple onChange="showrims()"> 
<option value="1">x</option> 
<option value="2">y</option> 
<option value="3">z</option> 
<option value="4">t</option> 

</select>

<select size="3" id="Final_Version3" multiple onChange="showcolor()"> 
<option value="1">1</option> 
<option value="2">2</option> 
<option value="3">3</option> 
<option value="4">4</option>
<option value="5">5</option> 
<option value="6">6</option> 
<option value="7">7</option> 
<option value="8">8</option>
<option value="9">9</option> 
<option value="10">10</option> 

</select>

AND here i want to create the image :( <img src="director-a/director-b/image-5.jpg" /> 
```

请，任何想法！对不起我的英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:00:03.250

这可以工作：

```
 var $txt = {first:null,second:null,third:null};

  $('select').on('change', function(){

    switch($(this).attr('id')){

    case 'Final_Version' : $txt.first = 'directory-'+ $('#Final_Version').find(':selected').text();
    case 'Final_Version2' : $txt.second = 'subdir-'+$('#Final_Version2').find(':selected').text();
    case 'Final_Version3' : $txt.third = 'img-'+$('#Final_Version3').find(':selected').text();

        }

       alert('url = '+$txt.first+'/'+$txt.second+'/'+$txt.third);

 }); 
```

# php - 连接数据库出错，目标机器主动拒绝

> ID：11503297
> 
> 赞同：1
> 
> 时间：2012-07-16T11:27:00.227
> 
> 标签：php, mysql, database

我正在开发一个应用程序，其中连接了数据库的两个表，但没有连接第三个。（这是在服务器上。他们在我的本地机器上工作正常。）

```
 1\. Warning: mysql_connect() [function.mysql-connect]: [2002] No
    connection could be made because the target machine actively (trying
    to connect via tcp://localhost:3306) in D:\Hosting.. on line 5
 2\. Warning: mysql_connect() [function.mysql-connect]: No connection could be made because the target machine actively refused it. in D:\Hosting.. on line 5 
```

在前面的阶段，我成功连接到同一个数据库中的两个表，所以我检查了数据库每个表的物理位置。难怪所有人都在数据库中的同一位置物理上休息。

请帮助我理解问题。

**编辑 ：**

```
//Page1 has something like:
$conid=mysql_connect("dxxs.db.7xx7.hostedresource.com","dxxs","Kxx3") or die();
mysql_select_db("dxxs",$conid) or die();
mysql_query(“some basic 4-5 queries depending on user’s interaction with table1”);
mysql_close($conid);
//redirection to page2 from there to page3
$conid=mysql_connect("dxxs.db.7xx7.hostedresource.com","dxxs","Kxx3") or die();
mysql_select_db("dxxs",$conid) or die();
mysql_query(“some basic 4-5 queries depending on user’s interaction with table2”);
mysql_close($conid);
//some redirection to page4
$conid=mysql_connect("dxxs.db.7xx7.hostedresource.com","dxxs","Kxx3") or die();
mysql_select_db("dxxs",$conid) or die();
mysql_query(“some basic 4-5 queries depending on user’s interaction with table3”);
mysql_close($conid); 
```

现在我的问题是当连接到表 3 时，服务器抛出*如上所述的错误*

在第 5 行中，MySQL_connect 被写入。请帮助我理解为什么表 3 没有连接，而表 1 和表 2 能够连接。所有人都在服务器上的同一个数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-23T09:31:33.750

我找到了问题并解决了它。尝试使用我的代码使用端口后`hostname:PORT`：

```
$dbh=@mysql_connect('dbxxxxxx.db.1and1.com:3306','db-username','db-password');
if (!$dbh) {
    $err_msg='Cannot connect to the database because: '.mysql_error();  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:29:41.957

听起来您正在`mysql_connect()`为正在使用的每个表调用一次。您不需要这样做 - 您只需为正在使用的每台**服务器连接一次。**

服务器可能将您限制为 2 个并发连接，这就是它拒绝第三个的原因。

`mysql_connect()`尝试在脚本顶部调用一次。

# visual-studio-2010 - 需要 Visual C++ GUI 解释

> ID：11503302
> 
> 赞同：-2
> 
> 时间：2012-07-16T11:27:29.953
> 
> 标签：visual-studio-2010, winapi, visual-c++, user-interface

我是 C++ GUI 新手，想了解更多

```
#include <windows.h>
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
    LPSTR lpCmdLine, int nCmdShow)
{
    MessageBox(NULL, "Goodbye, cruel world!", "Note", MB_OK);
    return 0;
} 
```

有人会好心解释做什么`HINSTANCE hInstance, HINSTANCE hPrevInstance,PSTR lpCmdLine, int nCmdShow`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:40:46.940

在此处查找信息：
[theForger 的 Win32 API 编程教程 - 入门](http://www.winprog.org/tutorial/start.html)

# java - 使用打开选项保存文件

> ID：11503311
> 
> 赞同：1
> 
> 时间：2012-07-16T11:28:15.480
> 
> 标签：java, save, filedialog

我正在寻找一种将文件保存在 Java (Eclipse RCP) 应用程序中的解决方案，并可选择在保存文件后立即打开文件。类似的是，当浏览器保存允许打开的已下载文件时。一个简单的 FileDialog 没有这样的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:29:52.487

我认为，您需要在保存文件后自己打开文件。

执行以下操作（在 Windows 中）：

```
String cmd = "cmd.exe /c start ";
String file = "path\version.txt"; //TODO: your file path here
Runtime.getRuntime().exec(cmd + file); 
```

类似的方法可以应用于linux环境。自己搜索。

如果您需要 JFileChooser 中的选项（可能是复选框），您可以扩展 JFileChooser 并添加您的功能。

# qt - 在 QTableWidget 中分别处理单击和双击

> ID：11503313
> 
> 赞同：8
> 
> 时间：2012-07-16T11:28:22.357
> 
> 标签：qt

我的应用程序中有一个`QTableWidget`小部件。我必须在我的应用程序中分别处理单击和双击鼠标事件。现在，即使我双击一个单元格，也只会调用单击槽。我如何分别处理它们？

以下是信号槽连接的代码：

```
connect(ui.tableWidget, SIGNAL(cellClicked(int, int)), this, SLOT(myCellClicked(int, int)));
connect(ui.tableWidget, SIGNAL(itemDoubleClicked(QTableWidgetItem*)), this, SLOT(tableItemClicked(QTableWidgetItem*))); 
```

我在这里错过任何其他配置吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T11:59:42.960

好的，现在我明白了。几周前我遇到了类似的问题。问题出在您的 QTableWidgetItem 中。我不确切知道它是如何工作的，但有时您可能会错过您的项目并单击单元格。这就是你可以修复它的方法。以这种方式连接它：

```
connect(ui.tableWidget, SIGNAL(cellClicked(int, int)), this, SLOT(myCellClicked(int, int)));
connect(ui.tableWidget, SIGNAL(cellDoubleClicked(int,int)), this, SLOT(tableItemClicked(int,int))); 
```

在你的 tableItemClicked 插槽中这样做：

```
void MyWidget::tableItemClicked(int row, int column)
{
    QTableWidgetItem *item = new QTableWidgetItem;
    item = myTable->item(row,column)
    /* do some stuff with item */
} 
```

# c# - 将exe嵌入到c#中

> ID：11503314
> 
> 赞同：0
> 
> 时间：2012-07-16T11:28:27.990
> 
> 标签：c#

> **可能重复：**
> [在 C# 程序中嵌入外部可执行文件](https://stackoverflow.com/questions/798655/embedding-an-external-executable-inside-a-c-sharp-program)

我有 2 个项目，名称分别是 login 和 ado.net 项目，我有他们的 .exe

情景一

假设我只有登录项目的 .exe 文件而不是代码，如果我在 ado.net 项目中嵌入了 login.exe。

问题 1：当我按下按钮（在 login.exe 文件中）时，我想关闭该 login.exe 并打开我的 ado.net 项目表单......我该怎么做？

问题 2：如果我的 login.exe 屏幕中有 3 个按钮，我如何理解按下了哪个按钮？

场景二

问题 1：如果这次我有“ado.net.exe”（不是代码只有 exe），它从 sql server 获取数据，所以我将它嵌入到登录项目中。当我将 ado.net.exe 嵌入到我的登录项目中时，如何查看数据（运行 ado.net.exe 时显示的数据）？

（顺便说一句，我设法将 ado.net.exe 添加到我的登录项目中，但没有数据显示，但当我单独运行 ado.net.exe 文件时显示）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:41:39.453

由于您没有 login.exe 的来源，因此您的选择非常有限。

您可以尝试使用许多反编译工具之一来反编译原始文件，但是由于您松散了变量命名和注释，因此进行更改是一件痛苦的事情。

或者，您可以在 Windows 中使用 UI 远程控制 API 来尝试自动执行在 Windows 中单击的过程，但这是一个肮脏的 hack，实际上您最好尝试获取源代码的副本。执行此操作的方法包括操纵消息泵或使用[MAA](http://en.wikipedia.org/wiki/Microsoft_Active_Accessibility)

# git - 是否可以“着色” git log 消息？

> ID：11503315
> 
> 赞同：4
> 
> 时间：2012-07-16T11:28:29.413
> 
> 标签：git, shell, command-line

是否可以在 git 提交消息中添加某种指令（元符号？），以便它们在`git log`输出中显示为彩色？

**编辑：**我会更具体一点——是否可以在提交消息中用不同的颜色标记几个单词？我想将颜色标记嵌入到提交消息中并通过`git log`. 例如，我想让**Bug ID**显示为红色。有可能有这样的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:36:09.617

`git config`您可以通过将选项设置为`color.ui`来打开彩色输出`true`。以下应该工作。

```
git config --global color.ui true 
```

`--pretty=format:".."`然后，您可以使用该选项定义添加颜色的别名。但我认为没有任何类型的自定义匹配。我想这就是你需要为 bug ID 上色的东西。但是，您可以对提交元素进行着色，例如哈希、作者、分支等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T20:28:42.353

根据您的编辑，您似乎正在寻找一种将格式添加到提交日志消息本身的方法。我将通过说明提交消息[在 Git Objects 中存储为纯文本](http://git-scm.com/book/en/Git-Internals-Git-Objects#Commit-Objects)来回答这个问题。因此，理论上，您可以编写一个程序来使用富文本编辑读取和格式化 Git Commit 对象，允许格式化文本，而几乎所有现有程序都仅限于使用纯文本。

话虽如此，您可以将上述`--pretty`选项与提交的智能命名结合使用，以使错误 ID 脱颖而出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:39:03.977

`git log`可以接受参数`--pretty`，它允许您指定格式字符串，您还可以在其中指定参数的颜色。然后，您可以将其别名为新的 shell 命令。看`PRETTY FORMAT` [这里](http://www.kernel.org/pub/software/scm/git/docs/git-log.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-01T17:29:45.560

查看我的[.gitconfig](https://github.com/AJ-Acevedo/dotfiles/blob/master/gitconfig.erb#L20)的第 20 和 21 行，了解我如何使用颜色自定义 git log。

这是我最喜欢的两个 git 别名，它们为 git 日志着色。

`lg1 = log --graph --all --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(bold white)— %an%C(reset)%C(bold yellow)%d%C(reset)' --abbrev-commit --date=relative`

`lg = log --graph --all --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n'' %C(white)%s%C(reset) %C(bold white)— %an%C(reset)' --abbrev-commit`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T22:09:05.690

您可以手动进行，例如：

```
git log --color=always | grep --color=always -C1000 BUG- | less -R 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-17T22:24:06.307

我还没有在这里找到一个答案，为了让颜色代码正确出现在`git log`and中`git diff`，您可能还需要指定**默认** `core.pager`设置为使用`less`（就像在许多 disto 中一样。）但是，less 不会引导正确的颜色代码，除非您还*少*提供`-r`( **raw** ) 选项。所以你需要这样做：

```
git config --global color.ui true
git config --global core.pager 'less -r' 
```

# android - 自 void onclick 功能以来如何调用服务的 android 方法？

> ID：11503317
> 
> 赞同：0
> 
> 时间：2012-07-16T11:28:30.640
> 
> 标签：android

您好，我正在尝试调用服务的 android 方法，因为 public void onclick 并且我有一个错误，它告诉我需要插入“AssignemetOperator Expression”来完成表达式，但我看不出错误在哪里。我把代码放在这里错误是在布尔 ret=bindService(......... 它在 public void onClick idcamarero 的内部是如何创建一个全局变量谢谢

View.OnClickListener buttonhandler=new View.OnClickListener() {

```
 public void onClick(View v) {
        EditText id_camarero = (EditText) findViewById(R.id.id_camarero);
        String numero = id_camarero.getText().toString();
        idcamarero=Integer.parseInt(numero);
        //Register the actions we want to receive via broadcast
        //MyService.LocalBinder.
     boolean ret= bindService(new Intent(MainActivity.this, MyService.class), androidServiceConnection, BIND_AUTO_CREATE);          
         IntentFilter filter = new IntentFilter(MyService.DATA_RECEIVED_INTENT);
         registerReceiver(androidListener, filter);
     if((numero.trim().equals(""))||(existe==false)){
         AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);

                // set title
                alertDialogBuilder.setTitle("Fallo de id");

                // set dialog message
                alertDialogBuilder
                    //.setMessage("Click salir para finalizarprograma")
                    .setCancelable(false)
                    .setPositiveButton("Salir",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, close
                            // current activity
                            MainActivity.this.finish();
                        }
                      })
                    .setNegativeButton("Reintentar",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, just close
                            // the dialog box and do nothing
                            dialog.cancel();
                        }
                    });

                    // create alert dialog
                    AlertDialog alertDialog = alertDialogBuilder.create();

                    // show it
                    alertDialog.show();
                }

     else{
    // Intent intent= new Intent(GestorRestauranteActivity.this,MenuMesas.class);
    // intent.putExtra("id", numero);//enviamos el id de camarero a la actividad que invocamos
    // startActivity(intent);
     finish();
     }
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:59:21.260

代码的第 5 行：

```
idcamarero=Integer.parseInt(numero); 
```

不会解析，因为您尚未声明变量的类型`idcamarero`。您需要在该行前面加上前缀`int`或将其完全删除（看起来您不需要这个）。

# tinymce - 如何使用 PHP、Javascript 从 tinyMCE 编辑器获取 html 代码

> ID：11503320
> 
> 赞同：0
> 
> 时间：2012-07-16T11:28:37.043
> 
> 标签：tinymce

我是 tinyMCE 初学者...

我在浏览器中显示 tinyMCE editot，并能够将样式添加到 textarea 内容

如何使用 Php、Javascript 从 tinyMCE 编辑器获取 html 代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:40:05.863

您可以使用

```
tinymce.activeEditor.getContent() 
```

或者如果您知道您的编辑器 ID

```
tinymce.get('my_editor_id').getContent(); 
```

# php - 按平台选择和统计不同的活跃用户，并比较它们是否存在于其他表中

> ID：11503321
> 
> 赞同：3
> 
> 时间：2012-07-16T11:28:39.613
> 
> 标签：php, mysql, sql, database

我有大约六 (6) 个表，每个表都与用户 ID 相关联。其中一张表是用户信息。用户信息包含用户详细信息，包括他们的商店平台（例如 magento）

1.  Userinfo 包含活动用户和非活动用户（活动用户在其他 5 个表中至少创建了一个活动）。
2.  我想用magento平台计算用户信息中不同数量的用户，这些用户在任何其他表中都有记录。
3.  目前，我可以使用 ff 代码计算其他五个表中的不同用户数量，但希望将其与 userinfo 表结合起来，以便我可以选择具有平台 magento 的活动用户。
4.  不添加 userinfo 表意味着我无法按平台选择用户。
5.  仅在 userinfo 表中选择用户，使用 magento 平台会很容易，但这意味着我可以选择只注册但不继续在我的应用程序上创建活动的用户。

    ```
     $query3 = ("SELECT   COUNT(*)
         FROM     (
           SELECT userid FROM table1
           UNION SELECT userid FROM table2
           UNION SELECT userid FROM table3
           UNION SELECT userid FROM table4
           UNION SELECT userid FROM table5
           ) AS UserIDs");
           $result3 = mysql_query($query3) or die(mysql_error()); 
           $row3 = mysql_fetch_row($result3);
           echo "Number of distinct users in all tables  = ".$row3[0] ."<br />";

      **Table 1**
      Id    userid    name   adresss

      **Table 2**
      Id  Title   Sex   userid

      **Table 3**
      Id   userid   amount

      **Table 4**
      Id  price  promotion  userid   productid

      **Table  5**
      Id  userid   category   tax   weight

      **userinfo**
      Id  userid   username   password   platform 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:38:16.460

[从我的其他建议](https://stackoverflow.com/questions/11472663/counting-distinct-user-ids-from-multiple-tables)中扩展`UNION`子选择，您可以使用表格并获得不同的计数。`JOIN``UserInfo`

```
SELECT   COUNT (DISTINCT ui.UserID))
FROM     (
           SELECT UserID FROM Table1
           UNION SELECT UserID FROM Table2
           UNION SELECT UserID FROM Table3
           UNION SELECT UserID FROM Table4
           UNION SELECT UserID FROM Table5
         ) AS id
         INNER JOIN UserInfo ui ON ui.UserID = id.UserID
WHERE    ui.Platform = 'Magento' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:00:25.183

我想要这样：

```
SELECT COUNT(DISTINCT ui.userid) as number
FROM userinfo ui
INNER JOIN table1 t1 ON (t1.userid = ui.userid) 
INNER JOIN table2 t2 ON (t2.userid = ui.userid) 
INNER JOIN table3 t3 ON (t3.userid = ui.userid) 
INNER JOIN table4 t4 ON (t4.userid = ui.userid) 
INNER JOIN table5 t5 ON (t5.userid = ui.userid) 
WHERE ui.platform = 'magento' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:28:09.927

如果你这样做：

```
 SELECT COUNT(DISTINCT ui.userid) as number
    FROM userinfo ui, table1 t1, table2 t2, table3 t3, table4 t4, table5 t5
    WHERE ui.platform = 'magento'
    AND t1.userid = ui.userid
    AND t2.userid = ui.userid 
    AND t3.userid = ui.userid 
    AND t4.userid = ui.userid
    AND t5.userid = ui.userid 
```

如果它不起作用，请尝试`SELECT COUNT(DISTINCT ui.userid) as number`用 SELECT ui.* 替换以查看。

# php - 如何找到为什么 phpunit testsuite 使用 xdebug 太慢？

> ID：11503323
> 
> 赞同：5
> 
> 时间：2012-07-16T11:28:44.937
> 
> 标签：php, phpunit, xdebug, output-buffering

在[phpMyAdmin](http://www.phpmyadmin.net/)，我们遭受了一段时间奇怪的测试套件减速。当启用 xdebug（代码覆盖）并且 ob_start/ob_end_clean 块中存在错误时，我们已经能够将问题追溯到情况。删除其中任何一个确实会大大减少测试套件的时间。

```
 xdebug       enabled      disabled
ob_start failure tests
enabled                       20 min        15 s
disabled                      1 min         15 s 
```

这只是为了说明差异有多大以及我们为什么要摆脱它。

在较小的规模下，这可以通过单个测试显示`test/classes/PMA_Advisor_test.php`：

```
 xdebug       enabled      disabled
ob_start failure tests
enabled                       7.2 s         0.1 s
disabled                      2.6 s         0.1 s 
```

这里的区别是删除一个测试的单个数据集（如果您要查看源，它是最后一个数据集）并导致测试花费不到一半的时间！更新：在这种特殊情况下，可以使用来缓解问题`xdebug.default_enable=0`，但这对于整个测试套件并没有太大变化。

乍一看它确实像 xdebug 中的一些错误，但我们无法生成比上面更小的测试用例，这听起来很可疑。有什么想法可以进一步调试问题，以及如何找出实际导致速度变慢的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-05T08:52:57.590

由于探查器处于打开状态，我遇到了这个问题，这也将生成巨大的缓存研磨文件。

检查 xdebug.profiler_enable = 0

[> 文档](http://www.xdebug.org/docs/all_settings#profiler_enable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:30:39.467

我的测试很慢，因为我出于某种我现在不记得的原因启用了 show_local_vars。 [http://xdebug.org/docs/all_settings](http://xdebug.org/docs/all_settings) 希望这些信息会有所帮助。

# python - 如何在 Tkinter 中切换到不同的框架？

> ID：11503324
> 
> 赞同：1
> 
> 时间：2012-07-16T11:28:47.933
> 
> 标签：python, tkinter

我目前正在使用 Python 中的 Tkinter 模块开发一个项目。我正在使用菜单小部件，菜单上的每个命令都有另一个与之关联的命令。这些命令中的每一个都会打开一个新框架。我正在使用网格几何管理器。

我的问题是我希望用户能够从一个帧切换到另一个帧，但是当我尝试这样做时，这些帧彼此重叠而不是切换。如何让活动框架隐藏然后打开一个新框架？我不想遍历可能的帧列表并告诉它们全部隐藏。

这是我到目前为止编写的代码：

```
import Tkinter as tkinter
root = tkinter.Tk()
root.minsize(400,300)
welcome = tkinter.Frame(root).grid()
label = tkinter.Label(welcome, text="Welcome to my program").grid(row=0, column=3)
button = tkinter.Button(welcome,text="Exit",command=root.destroy).grid(row=3, column=1)
def newFrame():
        newFrame = tkinter.Frame(root).grid()
        newFrame_name = tkinter.Label(newFrame, text="This is another frame").grid()
menu = tkinter.Menu(root)
root.config(menu=menu)

main_menu = tkinter.Menu(menu)
menu.add_cascade(label="Main Menu", menu= main_menu)
main_menu.add_command(label="New Frame", command=newFrame)

#menu.add_command(label="Exit", command=root.destroy, menu= filemenu)

root.mainloop() 
```

当用户从菜单中选择新框架选项时，我希望新框架替换欢迎框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:02:03.430

如果您使用`place`或`grid`将框架堆叠在一起，您可以简单地使用该`lift`方法更改堆叠顺序。

# perl - 对具有无序整数列的文件进行排序

> ID：11503325
> 
> 赞同：2
> 
> 时间：2012-07-16T11:28:49.477
> 
> 标签：perl, bash, sorting

我有一个包含两列整数值的输入文件。我想以这种方式切割输入文件

```
 input file:
 ...
 ...
 12312 565456
 565456 12312
 ...
 ... 
```

#

```
 output file:
 ...
 ...
 12312 565456
 ...
 ... 
```

即，如果两个数字多次出现，则在输出文件中写入一个唯一的行，其中第一个数字（如果两者中较小的一个）。

如何使用 sort 或 perl 脚本来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:38:36.293

你可以试试：

```
perl -nale ' @F=reverse @F if($F[0]>$F[1]);                 
             $x=$F[0]." ".$F[1]; if(!$h{$x}){print $x;$h{$x}=1;}' 
```

[看见](http://ideone.com/v3NuA)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:08:48.660

你可以结合`perl`和`sort`：

```
perl -lne 'BEGIN { $, = " " } print sort split' infile | sort -u 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:13:50.080

```
awk -vOFS="\t" '$2<$1 {print $2,$1} $1<=$2 {print}'|sort -u 
```

也可以

# android - android中的EditText焦点

> ID：11503326
> 
> 赞同：0
> 
> 时间：2012-07-16T11:28:54.327
> 
> 标签：android, android-edittext

在我的应用程序中，当我单击 时`EditText`，我必须执行一些逻辑。我有代码。但它没有进入`click`方法。

我的代码：

```
 EditText des=(EditText)findViewById(R.id.desinc);

 des.setOnClickListener(new View.OnClickListener()
            {                         
                @Override
                public void onClick(View v)
                {
                    java.lang.System.out.println("Inside click");
                     EditText income=(EditText)findViewById(R.id.editText1);
                    // TODO Auto-generated method stub
                       String inc=income.getText().toString();                    
                    int indexOFdec =  inc.indexOf(".");
                    java.lang.System.out.println("index="+indexOFdec);
                    if(indexOFdec==0)
                    {
                        java.lang.System.out.println("inside index");
                        income.setText(inc+".00");
                    }

                }
            }); 
```

我究竟做错了什么？帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:32:37.463

尝试通过以与 onClickListener 相同的方式设置 onTouchListener 来覆盖 onTouch。将此代码用作参考。

```
EditText dateEdit = (EditText) findViewById(R.id.date);
date.setOnTouchListener(new OnTouchListener() {
@Override
public boolean onTouch(View v, MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_UP) {
       //anything you want to do if user touches/ taps on the edittext box
    }
    return false;
}
}); 
```

更新（为什么会出现这种行为）：第一个单击事件聚焦控件，而第二个单击事件实际上触发了 OnClickListener。如果您使用 android:focusableInTouchMode View 属性禁用触摸模式焦点，则 OnClickListener 应按预期触发。

您也可以试试这个：在 xml 中为您的 EditText 框设置 android:focusableInTouchMode="false"。看看它是否适用于现有代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:35:06.763

你应该使用`OnFocusChangeListener()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:34:02.343

尝试单击`EditText`两次，因为在第一个实例 EditText 获取`focus`之后 EditText 的`click`事件执行。因此，如果您希望代码在第一次单击时执行，请编写代码以更改`EditText`using的焦点`OnFocusChangeListener()`。

# qt - 用于视频渲染的 OpenRTSP Qt 集成

> ID：11503327
> 
> 赞同：1
> 
> 时间：2012-07-16T11:28:54.433
> 
> 标签：qt, phonon, live555

我试图使用 Qt 播放 Qt 为其提供声子类的实时视频。但是，这样做的限制是它不能在 windows 上解码 RTSP 数据包（因为 phonon 在 windows 平台上使用 Directshow）。

为了使它能够做到这一点，我现在计划将 openRTSP 与 Qt 集成。在 openRTSP 中，我可以在哪里找到指向视频缓冲区或帧缓冲区的指针/句柄，以便我可以将其传递给我的 Qt 小部件进行显示。

有没有人尝试过这个？任何有关执行此操作的正确方法的指针都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:42:02.183

看看 GStreamer 和 GStreamer Qt 绑定。他们提供 VideoWidget 等，因此它应该为您提供足够的代码示例，您应该如何做到这一点：http: [//gstreamer.freedesktop.org/modules/qt-gstreamer.html](http://gstreamer.freedesktop.org/modules/qt-gstreamer.html)

# sql - WiX 安装程序：从 SQL 读取值

> ID：11503328
> 
> 赞同：1
> 
> 时间：2012-07-16T11:28:55.377
> 
> 标签：sql, sql-server, wix

我是 WiX 安装程序的新手，但我需要解决一个问题。搜索了一段时间后，我没有找到任何解决方案。

我需要在运行 WiX 安装程序时从 SQL Server 读取一个值并保留它，但我不确定它是否可能。我发现的只是“更新”或“插入”查询示例，但没有“选择”。

有人做过这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:07:50.893

当您需要在安装过程中从某处读取某些内容时，您有几种选择：

*   如果它在注册表中有跟踪，那么[RegistrySearch](http://wix.sourceforge.net/manual-wix3/wix_xsd_registrysearch.htm)是正确的选择
*   如果它有一个文件安装到众所周知的位置，那么[DirectorySearch](http://wix.sourceforge.net/manual-wix3/wix_xsd_directorysearch.htm) / [FileSearch](http://wix.sourceforge.net/manual-wix3/wix_xsd_filesearch.htm)方法最适合
*   否则，您总是有最后的手段 -[自定义操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368066.aspx)

显然，如果您需要从 SQL Server 读取某些内容，自定义操作是您的唯一选择。因此，简而言之，您应该创建一个即时自定义操作，该操作将读取您需要的数据并将其放置到属性（或多个属性）中。您应该稍后在安装中使用此属性。

尽量避免自定义操作，但如果您别无选择，仍然尝试找到经过测试的操作。对于这种特殊情况，请查看[Community MSI extensions](https://github.com/dblock/msiext)。

尽管您可能会快速解决这个特定问题，但我仍然鼓励您深入研究该主题并了解 Windows Installer（WiX 工具集背后的底层技术）是如何工作的。从[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/cc185688.aspx)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:27:19.757

您可以使用[注册表扩展存储过程](http://codebetter.com/raymondlewallen/2005/09/12/manipulating-the-registry-using-t-sql/)将所需的值插入注册表，然后进行[注册表搜索](http://wix.sourceforge.net/manual-wix3/read_a_registry_entry.htm)以将值拉入安装程序。

正如博客文章所说，sp 没有记录，因此不受支持，但如果它对您有用，它将节省编写自定义操作。

# ios - 从 tableView 获取 indexPath.row 到单元格

> ID：11503329
> 
> 赞同：0
> 
> 时间：2012-07-16T11:28:58.270
> 
> 标签：ios, xcode

编辑：简短的问题：如何从 UICell 类访问单元格的索引？因为 atm 我只能从下面发布的 UITableView 类中的方法中获取它。 *编辑结束*

我有一个 iOS 应用程序并添加了一个 UITableView。我用自定义 UICells 填充它，在 UITableView 中我使用此方法删除一行并从数据源中删除对象

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我还在 UICell 中添加了一个修改按钮，所以我也必须访问数据源，但我不能，因为它是 UITableView 类，我无法从 UICell 类访问它。

什么是最好的解决方案？我是否必须为我的数据源创建一个类并且两个类（UITableView 和 UICell）都可以访问它？如果是这样，我该怎么做？对不起，我是 MVC 的新手，请帮助:)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:06:38.473

I think that the best way is to implement the Pattern [Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)

Regards.

```
#import "MySingleton.h"

@implementation MySingleton
+(MySingleton *) sharedInstance{
   static  MySingleton *inst = nil;

    @synchronized(self){
        if (!inst) {
            inst = [[self alloc] init];
        }
    }
   return inst;
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:36:02.533

当我需要做这样的事情时，我的方法是使用`NSNotification`. 单元格触发自定义通知并`self`作为通知对象附加。数据源侦听通知并自行处理操作或通过提取单元对象并将所需的任何内容发送回它来响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:33:22.080

您可能正在从数组中填充表格，如果是这种情况，您可以删除索引（选定索引）处的数组元素并重新加载 tableview。

# php - PHP 和 mySQL 的实时事件监听器

> ID：11503332
> 
> 赞同：1
> 
> 时间：2012-07-16T11:29:11.860
> 
> 标签：php, javascript, mysql, ajax, event-listener

我正在考虑为个人项目实现实时事件监听器。有没有办法说，如果已经发出`INSERT`,`UPDATE`和`DELETE`SQL 查询，那么 mySQL 将触发一个 PHP 文件，该文件将依次处理这个问题，比如如果找到新记录则自动刷新页面，或者说一条记录已经编辑或删除？

我一直在阅读 mySQL 触发器，但我不知道如何实现。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:12:45.820

如果你想做的是以适当的懒惰方式刷新页面，我建议你少看从 MySQL 触发并使用 AJAX 触发它。Waygood 为后者提供了一个很好的链接，但考虑使用前者来简单地更新数据。

您可以通过 更新您网站上的信息[`long polling`](http://en.wikipedia.org/wiki/Comet_%28programming%29)。这样，您就可以保持与服务器的持久连接打开，并且可以在服务器推送更新时更新数据。完成后，只需再次启动连接并等待另一次更新。最常用的 LP 技术可能是[AJAX](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)技术。或者，对于诸如跨域支持之类的事情，您可以使用[script tag long polling](http://carloscarrasco.com/blog/posts/read/implementing-script-tag-long-polling-for-comet-applications)更加奇特。

# c - 从 Linux 内核运行外部二进制文件

> ID：11503333
> 
> 赞同：2
> 
> 时间：2012-07-16T11:29:11.910
> 
> 标签：c, linux, binary, kernel

在我们的开发团队中，我们正在根据自己的需要修改驱动程序。我们需要它在 linux 文件系统中执行外部二进制文件（用户空间应用程序）。

这样做是否正确？从 linux 内核内部调用二进制文件的最佳方法是什么？系统（），弹出（）？

感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T06:57:05.017

好吧，我为我的问题找到了一个很好解释的解决方案。

```
char *argv[] = { "/usr/bin/logger", "help!", NULL };
static char *envp[] = {
    "HOME=/",
    "TERM=linux",
    "PATH=/sbin:/bin:/usr/sbin:/usr/bin", NULL };

return call_usermodehelper( argv[0], argv, envp, UMH_WAIT_PROC ); 
```

我需要使用 call_usermodehelper 系统调用。这个例子是不言自明的。来源：[http ://www.ibm.com/developerworks/linux/library/l-user-space-apps/index.html](http://www.ibm.com/developerworks/linux/library/l-user-space-apps/index.html)

# php - 预拆分正则表达式

> ID：11503334
> 
> 赞同：0
> 
> 时间：2012-07-16T11:29:12.750
> 
> 标签：php, regex, preg-split

我有输入字符串

> 美国科罗拉多州阿斯彭

我想通过使用 preg-split 来拆分它

我想要这个输出：

> 数组（ [0] => 阿斯彭 [1] => 科罗拉多 [2] => 美国）

我这样用过

```
$input=Aspen,Colorado-USA;
$out=preg_split( "%[^a-zA-Z\s]%",$input); 
```

这是对的吗？我想知道有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:34:03.577

假设您不想将阿斯彭变成拉斯维加斯，您可能想要拆分`,`和`-`：

```
$out= preg_split('/[,-]/', $input); 
```

但是，这假设您的城市/州名称中不会出现逗号或破折号。

# hibernate - 映射列表 在休眠中 - ClassCastException

> ID：11503335
> 
> 赞同：0
> 
> 时间：2012-07-16T11:29:26.477
> 
> 标签：hibernate, list, mapping, classcastexception, hibernate-generic-dao

我在休眠中映射列表时遇到困难。我想知道你对我的类、映射和数据库方案的看法。如果一切正常，我将不胜感激抛出异常的一些帮助。提前致谢 ！

我有以下课程：

```
public class AuditEntry {

    private long id;
    private String typeLigne;
    private String famille;
    private String user;
    private String libelle ;
    private String processName;
    private String caseId;
    private Date dateCreation = null;
    private List<AuditEntryStringMap> libelles;

    /* Getters and setters generated automatically... */
}

public class AuditEntryStringMap {

    private long id ;
    private String key ;
    private String value ;

    public AuditEntryStringMap(String key, String value) {
        this.key = key ;
        this.value = value ;
    }
        /* Getters and setters generated automatically... */
} 
```

我的 hbm 文件如下：

```
<class name="AuditEntryStringMap" table="AUDIT_I18N">

        <cache usage="read-write" include="all" />
        <id name="id" type="long">
            <column name="AUDIT_I18N_ID"></column>
            <generator class="sequence" >
            <param name="sequence">AUDIT_I18N_SEQ</param>
            </generator>
        </id>

        <property name="key" column="KEY_" />
        <property name="value" column="VALUE_"/>

</class>
<class name="AuditEntry" table="AUDIT">

        <cache usage="read-write" include="all" />
        <id name="id" type="long">
            <column name="AUDIT_ID"></column>
            <generator class="sequence" >
            <param name="sequence">AUDIT_SEQ</param>
            </generator>
        </id>

        <property name="typeLigne" column="TYPELIGNE" />

        <property name="libelle" column="LIBELLE" />

        <property name="user" column="USERNAME" />

        <property name="processName" column="PROCESSNAME" />

        <property name="caseId" column="CASE_ID" />

        <property name="dateCreation" insert="false" update="false">
            <column name="DCRE" sql-type="date" default="sysdate"></column>
        </property>

        <list name="libelles" table="AUDIT_I18N"> 
            <key> 
                <column name="FK_AUDIT_ID" sql-type="number(19,0)" /> 
            </key> 
            <index type="string" column="KEY_" /> 
            <element type="string" column="VALUE_" /> 
        </list>
    </class> 
```

最后，我的 sql 脚本如下：

```
create sequence AUDIT_SEQ;
create sequence AUDIT_I18N_SEQ;

create table AUDIT (
    AUDIT_ID     number(19,0) not null,  
    TYPELIGNE    varchar2(255 char), 
    LIBELLE      varchar2(255 char),
    USERNAME     varchar2(255 char), 
    CASE_ID      varchar2(255 char),
    PROCESSNAME  varchar2(255 char), 
    DCRE          date default sysdate, 
    primary key (AUDIT_ID));

create table AUDIT_I18N (
    AUDIT_I18N_ID     number(19,0) not null, 
    KEY_              varchar2(255 char), 
    VALUE_            varchar2(255 char), 
    FK_AUDIT_ID       number(19, 0), 
    primary key (AUDIT_I18N_ID)) 

ALTER TABLE AUDIT_I18N add constraint FK_AUDIT_I18N foreign key (FK_AUDIT_ID) references AUDIT; 
```

在提交异常之前，Hibernate 会生成以下查询：

```
Hibernate: select AUDIT_SEQ.nextval from dual
Hibernate: insert into AUDIT (TYPELIGNE, LIBELLE, USERNAME, PROCESSNAME, CASE_ID, AUDIT_ID) values (?, ?, ?, ?, ?, ?)
Hibernate: insert into AUDIT_I18N (FK_AUDIT_ID, KEY_, VALUE_) values (?, ?, ?) 
```

例外：

```
com.bpm.domain.AuditEntryStringMap cannot be cast to java.lang.String 
```

调用 GenericDaoHibernate.save(T entity) 时会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:18:09.987

使用集合而不是列表解决了问题......在映射中：

```
<set name="libelles" lazy="extra" cascade="all-delete-orphan">
             <cache usage="read-write" include="all" />
             <key column="FK_AUDIT_ID"/>
             <one-to-many class="AuditEntryStringMap" />
</set> 
```

此外，我的 AuditEntryStringMap 的 hbm 没有在 hibernate.cfg.xml 中引用。但仅此一项并不能解决列表标签的问题。

半个分辨率所以...如果有人知道为什么它不适用于列表，将不胜感激完整的分辨率。

# python - Python 用 Etree 替换 XML 内容

> ID：11503336
> 
> 赞同：0
> 
> 时间：2012-07-16T11:29:27.303
> 
> 标签：python, elementtree

我想用 Python Etree 解析器解析和比较 2 个 XML 文件，如下所示：

我有 2 个包含大量数据的 XML 文件。一种是英文（源文件），另一种是对应的法文翻译（目标文件）。例如：

源文件：

```
<AB>
  <CD/>
  <EF>

    <GH>
      <id>123</id>
      <IJ>xyz</IJ>
      <KL>DOG</KL>
      <MN>dogs/dog</MN>
      some more tags and info on same level
      <metadata>
        <entry>
           <cl>Translation</cl>
           <cl>English:dog/dogs</cl>
        </entry>
        <entry>
           <string>blabla</string>
           <string>blabla</string>
        </entry>
            some more strings and entries
      </metadata>
    </GH>

  </EF>
  <stuff/>
  <morestuff/>
  <otherstuff/>
  <stuffstuff/>
  <blubb/>
  <bla/>
  <blubbbla>8</blubbla>
</AB> 
```

目标文件看起来完全一样，但在某些地方没有文本：

```
<MN>chiens/chien</MN>
some more tags and info on same level
<metadata>
  <entry>
    <cl>Translation</cl>
    <cl></cl>
  </entry> 
```

法语目标文件有一个空的跨语言参考，只要 2 个宏具有相同的 ID，我想将来自英语源文件的信息放入其中。我已经编写了一些代码，其中我用唯一的标签名称替换了字符串标签名称，以便识别跨语言引用。现在我想比较这 2 个文件，如果 2 个宏具有相同的 ID，则将法语文件中的空引用与英语文件中的信息交换。我之前尝试过 minidom 解析器，但卡住了，现在想尝试 Etree。我对编程几乎一无所知，并且觉得这很难。这是我到目前为止的代码：

```
 macros = ElementTree.parse(english)

    for tag in macros.getchildren('macro'):
        id_ = tag.find('id')
        data = tag.find('cl')
        id_dict[id_.text] = data.text

    macros = ElementTree.parse(french)

    for tag in macros.getchildren('macro'):
        id_ = tag.find('id')
        target = tag.find('cl')
        if target.text.strip() == '':
        target.text = id_dict[id_.text]

    print (ElementTree.tostring(macros)) 
```

我不仅一无所知，而且阅读其他关于此的帖子让我更加困惑。如果有人能启发我，我将不胜感激:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:58:55.297

可能还有更多细节需要澄清。这是带有一些调试打印的示例，显示了这个想法。它假定两个文件具有完全相同的结构，并且您只想在根目录下一层：

```
import xml.etree.ElementTree as etree

english_tree = etree.parse('en.xml')
french_tree = etree.parse('fr.xml')

# Get the root elements, as they support iteration
# through their children (direct descendants)
english_root = english_tree.getroot()
french_root = french_tree.getroot()

# Iterate through the direct descendants of the root
# elements in both trees in parallel.
for en, fr in zip(english_root, french_root):
   assert en.tag == fr.tag # check for the same structure
   if en.tag == 'id':
       assert en.text == fr.text # check for the same id

   elif en.tag == 'string':
       if fr.text is None:
           fr.text = en.text
           print en.text      # displaying what was replaced

etree.dump(french_tree) 
```

对于更复杂的文件结构，可以通过遍历树的所有元素来替换通过节点的直接子节点的循环。如果文件的结构完全相同，则以下代码将起作用：

```
import xml.etree.ElementTree as etree

english_tree = etree.parse('en.xml')
french_tree = etree.parse('fr.xml')

for en, fr in zip(english_tree.iter(), french_tree.iter()):
   assert en.tag == fr.tag        # check if the structure is the same
   if en.tag == 'id':
       assert en.text == fr.text  # identification must be the same
   elif en.tag == 'string':
       if fr.text is None:
           fr.text = en.text
           print en.text          # display the inserted text

# Write the result to the output file.
with open('fr2.xml', 'w') as fout:
    fout.write(etree.tostring(french_tree.getroot())) 
```

但是，它仅适用于两个文件具有完全相同结构的情况。让我们遵循手动完成任务时将使用的算法。首先，我们需要找到空的法语翻译。然后它应该由具有相同标识的 GH 元素的英文翻译替换。在搜索元素时使用 XPath 表达式的子集：

```
import xml.etree.ElementTree as etree

def find_translation(tree, id_):
    # Search fot the GH element with the given identification, and return
    # its translation if found. Otherwise None is returned implicitly.
    for gh in tree.iter('GH'):
       id_elem = gh.find('./id')
       if id_ == id_elem.text:
           # The related GH element found.
           # Find metadata entry, extract the translation.
           # Warning! This is simplification for the fixed position 
           # of the Translation entry.
           me = gh.find('./metadata/entry')
           assert len(me) == 2     # metadata/entry has two elements
           cl1 = me[0]
           assert cl1.text == 'Translation'
           cl2 = me[1]

           return cl2.text

# Body of the program. --------------------------------------------------

english_tree = etree.parse('en.xml')
french_tree = etree.parse('fr.xml')

for gh in french_tree.iter('GH'): # iterate through the GH elements only 
   # Get the identification of the GH section
   id_elem = gh.find('./id')      
   id_ = id_elem.text

   # Find and check the metadata entry, extract the French translation.
   # Warning! This is simplification for the fixed position of the Translation 
   # entry.
   me = gh.find('./metadata/entry')
   assert len(me) == 2     # metadata/entry has two elements
   cl1 = me[0]
   assert cl1.text == 'Translation'
   cl2 = me[1]
   fr_translation = cl2.text

   # If the French translation is empty, put there the English translation
   # from the related element.
   if cl2.text is None:
       cl2.text = find_translation(english_tree, id_)

with open('fr2.xml', 'w') as fout:
   fout.write(etree.tostring(french_tree.getroot()).decode('utf-8')) 
```

# c++ - MFC树视图控件：寻找一种万无一失的数据处理方式

> ID：11503347
> 
> 赞同：1
> 
> 时间：2012-07-16T11:29:57.697
> 
> 标签：c++, user-interface, mfc, treeview

也许我在这里做错了什么。我正在使用一个树视图控件，我用数据填充它。为此，数据（主要是整数）被转换为 CStrings。当用户点击一个项目时，我可以读取 CString，但必须解析它才能获取数据。

几次我改变了数据在屏幕上的显示方式，然后一切都中断了，我需要重写解析函数。我想知道是否有更好的方法来做到这一点......

**编辑**：树视图正在填充来自 std::vector 的项目。如果我可以让树视图返回向量中的索引而不是 CString ，这将非常适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:03:32.173

您可以使用[`CTreeCtrl::SetItemData`](http://msdn.microsoft.com/en-us/library/xk6c77ff)将任意数据值与树项相关联，并[`CTreeCtrl::GetItemData`](http://msdn.microsoft.com/en-us/library/287styts)检索此值。通常，您用于`SetItemData`存储指向对象的指针，但在您的情况下，您可以使用它直接存储整数值。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:41:26.413

如果您更改在树中设置/获取数据的方式，那么您将不得不更改格式化和解析它的方式。

通常，你应该只有 2 个函数，setter 和 parser，所以这应该不是一个大问题

我认为没有办法让它变得更快或更清洁。

# jsf - 通过库控件添加 FileDownload 控件

> ID：11503348
> 
> 赞同：0
> 
> 时间：2012-07-16T11:29:59.300
> 
> 标签：jsf, xpages

我正在尝试根据 Keith Strickland 的示例为 XPages 构建 JSF 库控件。

[http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=82770C11FA7B9B21852579C100581766](http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=82770C11FA7B9B21852579C100581766)

我在构建 FileDownloadControl 时遇到了一些麻烦这是我构建的代码：

```
 public class Libcontrol extends UIComponentBase implements FacesComponent {

        private static final String RENDERER_TYPE = "de.chris.Libcontrol ";
        private static final String COMPONENT_FAMILY = "de.chris";

        public Libcontrol() {
                setRendererType(RENDERER_TYPE);
        }

        @Override
        public String getFamily() {
                return COMPONENT_FAMILY;
        }

        @SuppressWarnings("unchecked")
        public void initBeforeContents(FacesContext arg0) throws FacesException {

            FacesContext context;
            ExpressionEvaluatorImpl evaluator;

            context = FacesContext.getCurrentInstance();
            evaluator = new ExpressionEvaluatorImpl(context);

            XspFileDownload result = new XspFileDownload();
            String sourceId = "fileDownload1/@value";
            String valueExpr = "#{document1.FileField}";
            ValueBinding value = evaluator.createValueBinding(result, valueExpr, sourceId,Object.class);
            result.setValueBinding("value", value);
            result.setDisplayLastModified(true);
            result.setAllowDelete(true);
            result.setTitle("filedown");
            result.setRows(30);
            result.setId("fileDownload1");

            this.getChildren().add(result);

        }

        public void buildContents(FacesContext arg0, FacesComponentBuilder arg1) throws FacesException {
        // Do Nothing
        }

        public void initAfterContents(FacesContext arg0) throws FacesException {
        // Do nothing
        }
} 
```

为什么控件没有完全渲染？当我查看 HTML 代码时，我看到来自控件的 starttag，但没有要下载的文件，是的，我已将文件上传到相应的 NotesDocument。

这是我分别复制的渲染器：

```
public class MainLibcontrolRenderer extends Renderer {

@Override
public void encodeBegin(FacesContext context, UIComponent component) {
    try {
        super.encodeBegin(context, component);
        context =  FacesContext.getCurrentInstance();
        UIViewRootEx rootEx = (UIViewRootEx) context.getViewRoot();
        /*rootEx.setDojoParseOnLoad(true);
        rootEx.setDojoTheme(true);*/

        ResponseWriter writer = context.getResponseWriter();
        writer.startElement("fieldset", component);

    } catch (Exception e) {
        e.printStackTrace();
    }
}

@Override
public void encodeChildren(FacesContext context, UIComponent component) {
    try {

        super.encodeChildren(context, component);      
    } catch (Exception e) {
        e.printStackTrace();
    }
}

@Override
public void encodeEnd(FacesContext context, UIComponent component) {
    try {
        super.encodeEnd(context, component);
        ResponseWriter writer = context.getResponseWriter();
        writer.endElement("fieldset");
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:12:44.930

Stephan 是对的：内容不呈现的原因是您没有构建它们。在实现 FacesComponent 时，buildContents 方法通常应该指示 FacesComponentBuilder 启动构建过程；例如：

```
arg1.buildAll(arg0, this, true); 
```

注意：我使用的是您示例中的参数名称；理想情况下，您应该使用有意义的参数名称，例如“context”和“builder”。

上面提到的 buildAll 方法使组件树正确地反映在 init 方法期间对结构所做的任何更改。如果您跳过此步骤，后续的 JSF 阶段（包括 RENDER_RESPONSE）将不知道您注入的任何组件。

顺便说一句，Keith 也提出了一个有效的观点：硬编码值绑定和其他属性 - 至少在您提供的示例中 - 往往会破坏定义可重用控件的目的。我会回应 Keith 的建议，仔细研究您要完成的工作，以确定自定义组件是否真的是合适的实现。最后一个警告：以编程方式在注入的组件上设置 id 属性时要格外小心……您最终可能会遇到在编译期间无法检测到的名称冲突。换句话说，Designer 无法警告您……它只会在运行时中断，而失败的原因可能并不明显。

# mysql - Rails 按 facebook 喜欢排序

> ID：11503350
> 
> 赞同：0
> 
> 时间：2012-07-16T11:30:00.283
> 
> 标签：mysql, ruby-on-rails, ruby, facebook, facebook-graph-api

我需要按 facebook 喜欢对 activerecord 数据进行排序。我假设这意味着我需要在我的模型中添加一个喜欢字段，然后用对象相关页面的喜欢数量填充它。

只是想知道是否有更好的方法来做到这一点，以及我将如何用喜欢的数量填充数据库中的喜欢列。只是在寻找真正做到这一点的最佳方法。

我目前的想法是创建 likes 字段并尝试从 facebookgraph 返回的 json 对象填充它，以便我可以使用 activerecord order 方法进行排序。只是不确定这是否是将数据导入数据库的最佳方式和最佳方式。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:57:28.643

您的建议似乎没有任何问题，但您应该记住，在模型中存储喜欢的数量将需要您经常使用来自 Facebook Graph API 的喜欢数量来更新它（这是我假设你正在使用的）。

最好不要将喜欢的数量直接存储在您的应用程序中，而是在您的应用程序需要它们时简单地提取它们 - 这样您就会知道它们是最新的，并且从那以后没有喜欢/不喜欢的帖子你上次投票。

# asp.net - 使用报告查看器 10.0.0.0 打印 rdlc，打印按钮未显示

> ID：11503352
> 
> 赞同：3
> 
> 时间：2012-07-16T11:30:10.410
> 
> 标签：asp.net, .net, reporting, rdlc

我在 asp.net 项目中有一个 rdlc 报告。我正在使用报告查看器 10.0.0.0 来查看和打印报告。除 Internet Explorer 外，报表查看器的打印按钮不显示。

虽然在我的情况下，打印按钮确实显示在 IE 中，但在按下它时会出现错误“无法加载客户端打印控件”。我发现报告查看器 2008 报告了类似的问题，但安装 SP 1 之类的解决方案并没有解决我的问题。

有没有办法独立于浏览器启用打印？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T09:02:56.137

您可以添加自己的按钮并将其调整为报告标题，并且使用 jquery 和 javascript 您可以从 chrome 或 firefox 打印

**在页面加载时直接打印**：

```
$(window).load(function() {
var a = document.getElementById("ReportFrame" + reporviwername).contentWindow;    
    a[1].print();
}); 
```

**要在 PrintButton 上打印，请单击**：

```
$('.PrintButton').live('click', function() {
    var a = document.getElementById("ReportFrame" + reporviwername).contentWindow;
    a[1].print();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:45:42.070

报表查看器中的打印机控件实现为 ActiveX 控件。这些是 IE 特定的控件。因此，如果您使用 IE 以外的任何东西，您将无法获得该选项。

如果您想要独立于浏览器的版本，您可以将报告嵌入 pdf 格式。Pdfs 查看器有一个打印按钮。

根据我的经验，它适用于大多数现代浏览器。pdf 格式也是标准格式，因此无论使用哪种浏览器，您的报告都会以相同的方式打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-13T15:40:53.603

正如大家所建议的那样，报表查看器控件仅使用 ActiveX 控件呈现，而许多其他浏览器不支持这一点，所以不可能，但 IE。

因此，Microsoft 在 SQL Server Reporting Service 2016 和更高版本之后的最新版本中更新了他们的支持功能，他们更新了对 ActiveX 控件的依赖项。

因此，您可以将 Reporting Services 更新为最新。参考：[更新的报告查看器控件](https://blogs.msdn.microsoft.com/sqlrsteamblog/2017/07/27/updated-report-viewer-control-now-generally-available/)

# asp.net-mvc-3 - MVC3 和验证 Razor 和 jQuery 插件的混合

> ID：11503355
> 
> 赞同：0
> 
> 时间：2012-07-16T11:30:30.067
> 
> 标签：asp.net-mvc-3, jquery-tokeninput

我正在使用 MVC3，我的视图混合了剃刀和原始 html，例如

```
<div class="editor-field">
     @Html.EditorFor(model => model.PAGE)
     @Html.ValidationMessageFor(model => model.PAGE)
</div>

<div class="editor-label">
     @Html.LabelFor(model => model.PERIODICAL)
</div>
     div class="editor-field">
     <div class="editor-field">
          <input type="text" id="periodicallist" name="tiperiodical" />
     </div>
</div> 
```

我的 JavaScript 将 tokenInput 控件插件应用于文本框并且一切正常，但我想知道如何验证它（即对于空文本框/tokenInput），它需要填充至少 1 个令牌。目前，这两种创建视图的形式令人困惑，让 Razor 直接从模型构造元素，然后通过使用 jQuery 插件等添加更多复杂性/定制化。

谁能建议我如何在回发到控制器时验证 jQuery 插件？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:02:38.273

如果您使用不显眼的验证，那么您所要做的就是将必要的 HTML5 数据属性添加到来自 javascript 的输入元素，然后微软的不显眼的 javascript 库将负责其余的工作。

例如。如果您通过 javascript 将文本框动态注入到表单中，并且您需要执行所需的验证，那么您只需添加`data-val`和`data-val-required`属性，如下所示。

```
<input data-val="true" 
       data-val-required="No. of joinees is required" 
       name="NoOfJoinees" 
       type="text"  /> 
```

编辑：

要显示验证错误消息，您必须在`span`该字段附近注入一个，

```
<span class="field-validation-valid" 
      data-valmsg-for="NoOfJoinees" 
      data-valmsg-replace="true">
</span> 
```

# opera - 歌剧蜻蜓的断点

> ID：11503356
> 
> 赞同：0
> 
> 时间：2012-07-16T11:30:36.587
> 
> 标签：opera, breakpoints, opera-dragonfly

在歌剧蜻蜓中，我们有 2 个按钮：

1.  **Break on first statement of a new script** 每次加载新脚本并评估第一个语句时都会暂停执行。

2.  **Break on error**，但在dragonfly中称为“显示解析错误并在异常时中断” 描述：当解析错误发生时，可以让Opera Dragonfly停止执行。启用 Scripts 工具栏中的最后一个按钮将在发生解析错误的行停止 JavaScript 执行，并以与断点类似的方式在 gutter 中突出显示它。当抛出异常时，相同的按钮也会停止执行。

第二个中断“显示解析错误并中断异常”是什么？当我加载 gmail 页面时，它将停止执行。和所有异常都暂停一样吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:42:58.307

是的。错误中断只是在抛出异常或无法解析脚本时暂停执行，这非常方便。

但是无论如何，您已经回答了自己的问题。

# java - 检查同级类的实例

> ID：11503357
> 
> 赞同：0
> 
> 时间：2012-07-16T11:30:36.993
> 
> 标签：java, inheritance

我们知道我们可以使用`instanceof`运算符来检查对象 A 是否是类 A 的实例。同样，我想知道是否无论如何我们可以检查对象 A 是否是类 B 的实例，其中 A 类和 B 类扩展 X。即 A 类和 B 类是兄弟

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:34:02.393

也许我误解了你，但我在这里假设你不知道 X，或者你想找到任何 X 的答案。

好吧，所有的类都是兄弟，因为它们都有`Object`一个共同的祖先，所以你的方法总是会返回 true。

您可能想要做的是检查两个类的最近祖先是什么，您可以使用反射来获取所有父类，如下所示：

```
Class superClass = arg1.getClass();
Class superSuperClass = superClass.getSuperclass(); 
```

并将它们全部进行比较（如果您对代码有问题，请发布！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:50:27.077

好的，如果您使用`instanceof`运算符，它会检查第二个参数的类型。例如

```
Interface X{};
Class A implements X;
Class B implements X;

Object a=new A();
Object b=new B(); 
```

在上面的层次结构中 `a instanceof X`，`b instanceof X`将返回`true`. 但`a instanceof B`会是`false`一会儿。`a instanceof A``true`

因此，如果您只想查看 Object a 是否是 Class B 的实例，`a instanceof B`则无论这些类实现哪些接口都足够了。

# django - Django中的表单内的表单？

> ID：11503358
> 
> 赞同：2
> 
> 时间：2012-07-16T11:30:37.243
> 
> 标签：django

我一直在查看文档，并认为内联表单集可能是答案。但我并不完全确定。

通常，每当您创建 ModelForm 时，它只会绑定到相关的模型。但是，如果您想在一个表单中编辑两个模型怎么办？

简而言之，在编辑 class`conversation`并从下拉列表中选择一个`Deal`类时，我也希望能够更改所选交易类的状态（但不是 deal_name）。都在同一个表格内。Django允许吗？

```
class Deal(models.Model):    
    deal_name           = models.CharField()
    status              = models.ForeignKey(DealStatus)

class Conversation(models.Model):
    subject             = models.CharField()
    deal                = models.ForeignKey(Deal, blank=True, null=True) 
```

**更新**：

我不确定 inline-formssets 是否是答案的原因是以下行为：

**看法：**

```
call = get_object_or_404(contact.conversation_set.all(), pk=call_id)
ConversationFormSet = inlineformset_factory(Deal, Conversation)
fset = ConversationFormSet(instance=call)    
variables = RequestContext(request, {'formset':fset})
return render_to_response('conversation.html', variables) 
```

**模板**

```
{{ formset }} 
```

我得到的结果不是我所期望的。我得到了三种形式的会话类，其中第一种被填写（由于编辑和传递实例）。但是，`Deal`下拉菜单根本没有列出。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:35:48.027

我找到了解决方案，并希望这将有助于将来遇到同样问题的其他人。我最终重新设计了我的模型。

我只是将状态也添加到了我的对话模型中。

```
class Conversation(models.Model):
    subject             = models.CharField()
    deal                = models.ForeignKey(Deal, blank=True, null=True)
    status              = models.ForeignKey(DealStatus) 
```

在视图中，我添加了一个自定义保存，如下所示：

```
if form.is_valid():            
            call = form.save(commit=False)
            deal =  get_object_or_404(Deal.objects.all(), pk=call.deal.id)
            deal.status = call.status
            deal.save()
            call.save() 
```

这很好用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T02:55:11.633

另一种方法是使用这样的信号：

```
def update_deal_status(sender, instance, created, **kwargs):
    if created:
        deal = Deal.objects.get(id__exact=instance.deal_id)
        deal.status  = instance.status 
        deal.save()

signals.post_save.connect(update_deal_status, sender=Conversation) 
```

# ios - 支持在appstore中提交应用的url

> ID：11503360
> 
> 赞同：38
> 
> 时间：2012-07-16T11:30:46.870
> 
> 标签：ios, app-store

在 Appstore 中提交应用程序是否需要支持 url？我注册为个人开发者，我没有支持 url 的网页。我能做些什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-01-08T22:17:05.897

现在需要支持 url。您可以在以下网站创建免费帐户：

[http://www.wordpress.com/](http://www.wordpress.com/)

或类似的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-04T02:51:52.557

我会在[github pages](https://pages.github.com/)创建一个免费页面。简单直接。如果您需要简单的东西，它是完美的选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-05-22T11:57:52.617

Apple 在他们的帮助文档中提供了更多信息：

> 您计划为对应用程序有疑问的用户提供的支持网站。支持 URL 必须指向实际的联系信息，以便用户可以就应用问题、一般反馈和功能增强请求与您联系。指定整个 URL，包括协议，如[http://support.example.com](http://support.example.com)。
> 
> 只有购买该应用程序的客户才能在 App Store 上看到支持 URL。
> 
> 此属性是必需的，可以本地化。

[https://help.apple.com/app-store-connect/#/devf29afbb74](https://help.apple.com/app-store-connect/#/devf29afbb74)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T01:49:36.443

我想你会没事的，我也有同样的问题。我已经提交了没有链接的应用程序，它被接受了，之后我编辑了 URL。

# iphone - 将 zip 文件作为附件发送到 ios 中的 JSON 发布请求？

> ID：11503365
> 
> 赞同：0
> 
> 时间：2012-07-16T11:31:09.350
> 
> 标签：iphone, ios

我正在开发一个连接到基于 json 的 Web 服务的 iphone 应用程序。在其中一个请求中，我需要发送一个 zip 文件和 JSON 数据。我如何做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:32:55.557

考虑将 ZIP 文件的内容编码为 Base64 字段。您还可以发送您的 JSON 响应并包含一个链接以获取 ZIP 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:37:25.787

使用该`ASIHTTPRequest`库将使这变得非常容易。他们的[文档页面](http://allseeing-i.com/ASIHTTPRequest/How-to-use)上有一个示例，可以轻松地从图像文件改编为 zip 文件。

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request addData:zipData withFileName:@"mydata.zip" andContentType:@" application/zip" forKey:@"zipfile"]; 
```

# actionscript-3 - 使用post方法as2将数据从flash发送到php

> ID：11503368
> 
> 赞同：0
> 
> 时间：2012-07-16T11:31:25.323
> 
> 标签：actionscript-3, actionscript-2

我在 as3 中使用以下代码：

```
var Request:URLRequest = new URLRequest();
var xmlMain:XML=new XML();
var urlXmlLoader:Loader = new Loader();
var myVars:URLVariables = new URLVariables();

myVars.RequestXml = xmlMain;
Request.url = "http://www.xyz.php"; //some php url

Request.method = URLRequestMethod.POST;
Request.data = myVars;
urlXmlLoader.dataFormat = URLLoaderDataFormat.TEXT;
urlXmlLoader.addEventListener(Event.COMPLETE, getData);
urlXmlLoader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
urlXmlLoader.load(Request); 
```

现在我有一个 as2 项目，我需要做同样的事情。在as2中怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:04:43.700

这可能是关于 AS2 中 HTTP 请求的最佳教程：[http ://www.sephiroth.it/tutorials/flashPHP/loadVars/](http://www.sephiroth.it/tutorials/flashPHP/loadVars/)

# testng - TestNG 使用不同的参数

> ID：11503370
> 
> 赞同：0
> 
> 时间：2012-07-16T11:31:34.717
> 
> 标签：testng

我有 100 个测试方法分布在 14 个 Java 类中。（这些数字仅作为示例）现在，我想将第一类中的 3 个方法、第二类中的 4 个方法分组到一个 @group 中。

现在，这些测试方法接受参数并在它们的主体中，它们也在各自的类中使用全局变量

现在，在我的 xml 文件中，我想指定一个标签，它将多次运行组中的所有方法，每次都使用不同的全局和函数参数。

请注意，我将无法使用@Dataprovider，因为有了它，我只能指定我的方法所需的参数......我将无法更改数据提供者中的全局参数......

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:38:58.230

[您可以像这样](https://stackoverflow.com/a/6903037/1300626)将数据注入到超级构造函数中

---------编辑1------------

您可以通过[ITestContext检索数据](http://testng.org/javadoc/org/testng/ITestContext.html)

喜欢

```
@Test
public void test(ITestContext context){
    String para = context.getCurrentXmlTest().getParameter("para");
} 
```

但这仅适用于字符串。

也许您可以将描述的 DataProvider/Factory 设置与此 ITestContext 结合使用并注入一个包装类

如果您还有其他问题，我将编辑我的答案

# php - 如何为 PHP Mockery 配置 NetBeans 自动完成功能

> ID：11503372
> 
> 赞同：0
> 
> 时间：2012-07-16T11:31:39.663
> 
> 标签：php, netbeans, autocomplete

当我在 PHPUnit 测试中使用 Mockery 时，我会执行以下操作：

```
$mockedClass = \Mockery::mock('SomeClassName');
$mockedClass->... 
```

如何让 NetBeans 在之后自动完成`$mockedClass->`？`\Mockery::mock()`返回 a`MockeryInterface`但 NetBeans 无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:18:24.267

实际上，我在代码中犯了一个小错误。只要`use \Mockery as ...`您的文件中没有语句，上面的示例就可以工作。如果您输入该`use`语句，NetBeans 就会丢失。我认为这个问题已经解决，因为我找到了解决方法。

# http-status-code-403 - 第三方图像访问问题 403 错误

> ID：11503374
> 
> 赞同：1
> 
> 时间：2012-07-16T11:31:46.993
> 
> 标签：http-status-code-403, hotlinking

我面临一个问题。我正在访问我们网站的第三方图片，但它给了我 403 错误。但是，如果我直接在浏览器上点击该图像 url，我就可以访问它。

请提供其背后的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:36:00.207

此图像不可用于[盗链](http://en.wikipedia.org/wiki/Hotlink)。服务会检查[推荐人](http://en.wikipedia.org/wiki/Referer)，并且不允许将图像嵌入其他站点。出于这个原因，您可以尝试通过简短的服务器端脚本使用代理。

如果您使用的是 PHP ，请参阅[此线程。](https://stackoverflow.com/questions/857427/php-referer-redirect-script)

# c++ - main() 之前不需要的构造函数调用

> ID：11503382
> 
> 赞同：2
> 
> 时间：2012-07-16T11:32:26.543
> 
> 标签：c++

我正在使用*pthreads*处理一些多线程代码。当我发现一些内存泄漏（通过*valgrind*）时，我只是添加了一些

```
cout << " new [some name of class for me]" << endl; 
```

在部分构造函数中，因为我认为我已经删除了所有构造函数。这表明它们中的一部分是在***main() 之前启动的。***我已经从 main() 中删除了所有内容，所以它看起来像：

```
int main(){
    return 0;
} 
```

即使没有任何***#includes***，仍然会调用这些构造函数。我认为在这种情况下不应该调用前面代码中的任何内容。我在 Eclipse 中使用了*“项目清理”*选项并尝试删除二进制文件（*调试/发布*）。没有什么帮助..

这样做的目的是什么？我还能做什么？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T11:33:48.540

`global`和`static`变量之前初始化`main`。`static`函数内部声明的变量除外。它们在第一次调用时被初始化。所以我认为你应该看看静态和全局变量

# java - org.xmlpull.v1.XmlPullParser 类型无法解析。它是从所需的 .class 文件中间接引用的

> ID：11503391
> 
> 赞同：1
> 
> 时间：2012-07-16T11:32:57.150
> 
> 标签：java, android, annotations, xmlpullparser

您好我收到编译错误：

> org.xmlpull.v1.XmlPullParser 类型无法解析。它是从所需的 .class 文件中间接引用的

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-14T01:46:30.100

你只需要一个jar文件，像这样：xmlpull-1.1.3.1.jar，下面是下载链接：

> [http://www.java2s.com/Code/Jar/x/Downloadxmlpull1131jar.htm](http://www.java2s.com/Code/Jar/x/Downloadxmlpull1131jar.htm)。

希望这个答案可以帮助你。

# mysql - 按子字符串分组

> ID：11503393
> 
> 赞同：8
> 
> 时间：2012-07-16T11:32:58.227
> 
> 标签：mysql, group-by, substring

我有一个带有“ `/site/index?sid=18&sub=321333&tid=site.net&ukey=1234543254`”之类的文本的字段。

如何按字符串的一部分（' `sid`' url param eg）对它进行分组？
并且参数的顺序可能不同。（`sid`在行尾等）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T11:43:15.787

看一下 MySQL 字符串函数：

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

特别是这看起来很有帮助：

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)

**更新**

这正是您所要求的：

```
SELECT SUBSTRING_INDEX(SUBSTRING_INDEX("/site/index?sid=18&sub=321333&tid=site.net&ukey=1234543254", 'sid=', -1), '&', 1) AS this_will_be_grouped 
```

并`this_will_be_grouped`在`GROUP BY`查询的子句中使用

# matlab - 在 Matlab GUI 上锁定图像大小

> ID：11503394
> 
> 赞同：2
> 
> 时间：2012-07-16T11:33:01.737
> 
> 标签：matlab, user-interface, video, matlab-figure

我正在 MatLab 中制作一个 GUI，要求用户上传视频文件。接下来我想在具有固定窗口大小的轴上播放它。但是，如果上传的文件很大，Matlab 将扩展轴并接管我的大部分 GUI。有没有办法缩小图像以使其适合轴？

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:47:20.303

如果图像太大，通常 Matlab 轴不应该改变它们的位置。

我可以想到两个可能的问题：

1.  轴从一开始就很大，但如果图像足够小，则显示带有边距的小图像
2.  显示您正在使用的图像的命令是自定义的，它会更改轴大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T14:47:17.653

这个问题很老，但我偶然发现了这个（寻找别的东西）所以也许它会帮助别人看看我做了什么。

我想调整相当大的图像（1024x 100k-200k 像素）的大小，以便我的 GUI 可以在这些大型数据集的视图上快速演示各种颜色操作。我只是手动对我的数据进行了子采样，如下所示（函数如下）。

请注意，此示例是图像。为了对视频进行空间子采样，我循环播放了视频，并在过去对每一帧进行了类似的操作。

```
[plotWidthPixels, plotHeightPixels] = getPlotAreaPixels(handles.figure1, handles.axes1);

[nSamplesPerLine nLines] = size(iqData);
colInds = decimateToNumber(nLines,plotWidthPixels);
rowInds = decimateToNumber(nSamplesPerLine,plotHeightPixels);
iqDataToPlot = iqData(rowInds,colInds); 
```

首先，我得到了以像素为单位的轴大小：

```
function  [plotWidthPixels, plotHeightPixels] = getPlotAreaPixels(figHandle, axisHandle)
set(figHandle,'Units','pixels')
figSizePix = get(figHandle,'Position');

set(axisHandle,'Units','normalized')
axSizeNorm = get(axisHandle,'Position');

axisSizePix = figSizePix.*axSizeNorm;
plotWidthPixels = ceil(axisSizePix(3)-axisSizePix(1));
plotHeightPixels = ceil(axisSizePix(4)-axisSizePix(2)); 
```

然后我用它通过获取（粗略地）均匀分布的索引子集来抽取图像的宽度和高度：

```
function inds = decimateToNumber(lengthOfInitialVector, desiredVectorLength, initialIndex)
if nargin < 3
    initialIndex = 1;
end

if (lengthOfInitialVector-initialIndex+1) > desiredVectorLength*2
    inds = round(linspace(initialIndex,lengthOfInitialVector,desiredVectorLength));
else
    inds = initialIndex:lengthOfInitialVector;
end 
```

# iphone - Objective-C：实时更新

> ID：11503397
> 
> 赞同：0
> 
> 时间：2012-07-16T11:33:38.710
> 
> 标签：iphone, objective-c, ios, ipad

我的团队正计划构建一个具有实时更新或至少每天更新的应用程序，但我们发现在 itunescoonect 上更新应用程序需要数周时间才能获得批准。它就像一个更新其内容的新闻应用程序。

是否可以进行实时/每日更新？如何？有什么参考吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:03:20.520

由于我们不知道您对实时更新是什么意思，这里是一般的答案......

**仅实时更新内容**

大多数应用程序确实使用 JSON（[JSONKit](https://github.com/johnezang/JSONKit/)、[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)等）来处理服务器和应用程序之间的通信。因此，只需创建一些服务器端的东西来通过 HTTP[S] 和 JSON 与您的应用程序进行通信。

尽量避免使用 XML、REST ......因为它是可行的，但它需要更多的工作，它更慢，......

通过这种方式，您可以轻松更新应用程序的内容。

**应用程序二进制文件的实时更新**

这是不可能的，因为您需要将其发送给 Apple 进行审批，这需要一些时间。每天=没办法。

如果您想每天进行某种测试构建，您可以查看[TestFlight](https://testflightapp.com)或[HockeyApp](http://www.hockeyapp.net)。在这里，您可以为封闭的用户组（应用商店之外）提供每日、每小时、...的构建。但这仅用于测试等。首先，您仅限于 100 台设备，并且不适用于最终用户。TF 和 HA 都可以强制用户升级您的应用程序，可以通知用户新版本，...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:45:39.217

如果它是您想要更新的内容，那么这应该通过每个设备连接到以获取新数据的中央服务器来完成。最简单且可能最稳定的方法是为此使用网络服务器并发送 XML、JSON 或类似的。这很容易使用 NSURLRequest 或 ASIHttpRequest （虽然这似乎被放弃了）。

如果您想更改功能并真正向应用程序添加新内容，那么由于您所说的，这不能通过创建新的 iOS 应用程序来完成，需要时间来批准新的构建。然后您的解决方案将使用 webapp，它只是在应用程序中嵌入一个网页，每当您想要更改应用程序时，您只需更新网站。

# javascript - Chrome HTML 页面内存使用情况

> ID：11503399
> 
> 赞同：1
> 
> 时间：2012-07-16T11:33:41.333
> 
> 标签：javascript, google-chrome, browser, memory-leaks, garbage-collection

我有一个页面，我在 Chrome 中加载了时间轴，第 5 秒后，你可以看到三个尖峰。在第 7 秒页面加载并稳定后。看起来 chrome 已经分配了内存，但没有垃圾收集它们。

在将近 11 秒（图 1 上有黑色标记），我在时间轴上按垃圾收集，我看到所有内存释放到 3 MB。内存下降到 3MB 后，我的页面可以正常工作。

我的目标是找到内存泄漏（如果有的话）。但是在垃圾收集之后，内存下降了，它仍然可以正常运行。

1.  页面加载后是否有强制垃圾收集？这样移动设备上的内存会自动释放吗？
2.  在图 2 中，这些名称是什么？它们看起来不像我的库中使用的那样（我的库的名称是 WebAtoms），所以我可以忽略它们吗？
3.  我的库 WebAtoms 几乎没有以黄色显示的对象，这是什么意思（图 3）？
4.  是否有任何教程或深入分析如何理解这些配置文件/时间表以及它们的含义？
5.  有没有直接的方法来获取有关内存泄漏的信息？

**图 1**

![在此处输入图像描述](../Images/21c6378974142642ea8b0b99587aae22.png)

**图 2**

![在此处输入图像描述](../Images/2e1627a661ee1dabd43424f2ec499aab.png)

**图 3** ![在此处输入图像描述](../Images/294fe8c41a6045bc902ce26db6371306.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:04:44.543

您无法控制 javascript 中的垃圾收集，您可以删除 properties 或设置 null 值以提示 GC 。

垃圾收集从一个浏览器到另一个浏览器的处理方式不同，因为它们中的大多数都有自己的 javascript VM。因此，Chrome 可能适用的情况在本机移动浏览器上可能不适用。

至于如何优化代码，就看代码是什么了。

想要一些关于如何使用所有这些混乱的提示吗？

[https://developers.google.com/chrome-developer-tools/docs/heap-profiling](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)

# iphone - 故事板中 UITableView 的宽度不正确

> ID：11503407
> 
> 赞同：1
> 
> 时间：2012-07-16T11:33:51.250
> 
> 标签：iphone, ios, ipad, uitableview, storyboard

我现在正在使用情节提要开发一个应用程序。我配置一个视图控制器如下：

![在此处输入图像描述](../Images/e5323dfddad557554584ca7a7057f72d.png)

如您所见，我尝试使表格视图的宽度约为 100 像素。但下图是结果：

![在此处输入图像描述](../Images/6122dfed26c564d492f92afd1a457ccc.png)

我不知道为什么故事板帮助我将表格视图的大小调整到 320 像素左右。

谁能帮我？谢谢！！！

# android - null pointer findviewbyid

> ID：11503408
> 
> 赞同：1
> 
> 时间：2012-07-16T11:33:52.560
> 
> 标签：android, findviewbyid

i'm new in android programming, i'm trying make dynamic depended spinner by pass a spinner id from main activity and set id to be recalled, i got a trouble with null pointer findviewbyid when recall child spinner, sorry for my mess words and code. Thank you for any help

here is my code:

```
public class PickOne extends LinearLayout {
String tag = PickOne.class.getName();
TextView label;
ArrayAdapter<String> aa;
Spinner spinner;
LinearLayout ll;
String title;
Spinner spChild;

public PickOne(Context context,DataSource datasource,SQLiteDatabase db,String labelText,String options,String spinnerID,String parentID,String childID) {
    super(context);

    View spinnerLayout = View.inflate(context, R.layout.dummy, null);
    ll = (LinearLayout) spinnerLayout.findViewById(R.id.dummylayout);

    //ll = new LinearLayout(context);
    ll.setOrientation(LinearLayout.VERTICAL);

    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.FILL_PARENT);

    ll.setLayoutParams(params);
    ll.setPadding(4, 10, 4, 0);

    if(parentID.length() > 0){

        spinner = new Spinner(context);
        spinner = (Spinner) spinnerLayout.findViewById(Integer.valueOf(spinnerID)); //give me null
        spinnerInitialized(context,spinner);

        if(spinner == null){
            Log.i("!!!!!!!!!!!!!!","null.................");
        }

        label = new TextView(context);
        label.setText(labelText);
        label.setTextColor(getResources().getColor(R.color.label_color));

        title = label.getText().toString();
        spinner.setPrompt(title);

    }else{          
        System.out.println("in parentID....." + String.valueOf(parentID));

        label = new TextView(context);
        label.setText(labelText);
        label.setTextColor(getResources().getColor(R.color.label_color));

        spinner = new Spinner(context);

        options = "Select One|" + options;
        String []opts = options.split("\\|");

        aa = new ArrayAdapter<String>(context, android.R.layout.simple_spinner_item,opts);
        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        spinner.setAdapter(aa);

        title = label.getText().toString();
        spinner.setPrompt(title);

        ll.addView(label);
        ll.addView(spinner);

        if(childID.length()>0){
            spChild = new Spinner(context);
            spinnerInitialized(context,spChild);

            spChild.setId(Integer.valueOf(childID));//set id to be recalled
            spChild.setEnabled(false);
            ll.addView(spChild);

            spinnerOnItemSelectedListener(context,datasource,db,"assetbrand", "assettype", spinner, spChild);
        }       
        Log.i("childID........",String.valueOf(spChild.getId()));
        this.addView(spinnerLayout);
    }

} 
```

my main activity code :

```
int i;
        for (i=0;i<theForm.fields.size();i++) {
            theForm.fields.elementAt(i).obj = new PickOne(context,datasource,db,(" " + theForm.fields.elementAt(i).getLabel()),theForm.fields.elementAt(i).getOptions(),theForm.fields.elementAt(i).getSpinnerID(),theForm.fields.elementAt(i).getParentID(),theForm.fields.elementAt(i).getChildID());
                panel.addView((View) theForm.fields.elementAt(i).obj);                  
            }
        } 
```

my logcat

```
07-16 16:59:07.680: E/AndroidRuntime(1755): FATAL EXCEPTION: main
07-16 16:59:07.680: E/AndroidRuntime(1755): java.lang.NullPointerException: println needs a message
07-16 16:59:07.680: E/AndroidRuntime(1755):     at android.util.Log.println_native(Native Method)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at android.util.Log.e(Log.java:231)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at com.technotalkative.viewstubdemo.Activity_Prospect.DisplayForm(Activity_Prospect.java:490)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at com.technotalkative.viewstubdemo.Activity_Prospect.access$0(Activity_Prospect.java:388)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at com.technotalkative.viewstubdemo.Activity_Prospect$1.handleMessage(Activity_Prospect.java:222)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at android.os.Looper.loop(Looper.java:137)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at java.lang.reflect.Method.invokeNative(Native Method)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at java.lang.reflect.Method.invoke(Method.java:511)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-16 16:59:07.680: E/AndroidRuntime(1755):     at dalvik.system.NativeStart.main(Native Method) 
```

i feel enough struggling for this problem, i changed to read static xml to get depended spinner, weakness of this code is spinner can't less or added dynamically from database, here is my new code :

```
View spinnerLayout = View.inflate(context, R.layout.spinner, null);
        panel.addView(spinnerLayout);

        TextView tv1 = (TextView) spinnerLayout.findViewById(R.id.tv1);
        tv1.setText("Asset Type");

        final TextView tv2 = (TextView) spinnerLayout.findViewById(R.id.tv2);
        tv2.setText("Asset Brand");

        TextView tv3 = (TextView) spinnerLayout.findViewById(R.id.tv3);
        tv3.setText("Asset Detail");

        Spinner spinner1 = (Spinner) spinnerLayout.findViewById(R.id.spinner1);
        final Spinner spinner2 = (Spinner) spinnerLayout.findViewById(R.id.spinner2);
        final Spinner spinner3 = (Spinner) spinnerLayout.findViewById(R.id.spinner3);

        spinner1.setPrompt(tv1.getText());
        spinner2.setPrompt(tv2.getText());
        spinner3.setPrompt(tv3.getText());

        String sqlquery;
        sqlquery = "select distinct assettype from asset";

        spinnerInitialized(spinner1,sqlquery);
        spinnerInitialized(spinner2,"");
        spinnerInitialized(spinner3,"");

        spinnerOnItemSelectedListener("assetbrand", "assettype", spinner1, spinner2);
        spinnerOnItemSelectedListener("assetdetail", "assetbrand", spinner2, spinner3);

private void spinnerInitialized(Spinner resource, String sqlquery){
    ArrayAdapter<String> da;
    String options;
    options = "Select One|";
    String []opts = options.split("\\|");

    if(sqlquery.length()>0){
        List<String> lables = datasource.getAllLabels(db, sqlquery);            
        da = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, lables);          
    }else{
        resource.setEnabled(false);
        da = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, opts);            
    }

    da.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    resource.setAdapter(da);

}

private void spinnerOnItemSelectedListener(final String field, final String wherefield, final Spinner resource, final Spinner destination){

    resource.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

            String item = (String) parent.getItemAtPosition(pos);
            String sqlquery;

            sqlquery = "select distinct " + field + " from asset where " + wherefield + " = '" + item + "'";

            List<String> lables = datasource.getAllLabels(db, sqlquery);

            ArrayAdapter<String> aa = new ArrayAdapter<String>(context,
                    android.R.layout.simple_spinner_item, lables);
            aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            destination.setAdapter(aa);
            spinnerPosition = aa.getPosition("Select One");           
            destination.setSelection(spinnerPosition);

            aa.notifyDataSetChanged();

            if(!item.contains("Select One")){
                destination.setEnabled(true);
            }else{
                destination.setEnabled(false);
            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> parentView) {

        }

    });

} 
```

now my spinner work perfect :), thank you to all you guys who has response my question.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T11:37:11.950

Remove below code from it:

```
spinner = new Spinner(context); 
```

and pass id of spinner given in xml file instead of `Integer.valueOf(spinnerID)`

```
spinner = (Spinner) spinnerLayout.findViewById(R.id.SpinnerId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:38:37.970

This line seems to be the suspect

```
spinner = (Spinner) spinnerLayout.findViewById(Integer.valueOf(spinnerID)); //give me null 
```

give the id of the spinner from xml here

EDIT: after seeing your logcat output:

[http://code.google.com/p/android/issues/detail?id=9211](http://code.google.com/p/android/issues/detail?id=9211)

check your Log.e("", "") in Activity_Prospect.java:490

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:36:56.277

Try

```
context.findViewById(R.id.your_view) 
```

# asp-classic - ASP 表和 EOF - 获取错误“80020009”

> ID：11503414
> 
> 赞同：0
> 
> 时间：2012-07-16T11:34:16.263
> 
> 标签：asp-classic

考虑一个包含四行的记录集，如下所示

```
Team  NumDocs
OPS10 2
OPS4  1
OPS5  2
OPS7  3 
```

还要考虑表格中的以下行来显示这些。

```
<td>
<% If Trim(RS("Team")) = "OPS1" And not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext 
End If%>
</td>
<td>
<% If Trim(RS("Team")) = "OPS10" And not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext
End If%>
</td>
<td>
<% If Trim(RS("Team")) = "OPS2" And not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext 
End If%>
</td>
<td>
<% If Trim(RS("Team")) = "OPS3" And not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext 
End If%>
</td>
<td>
<% If Trim(RS("Team")) = "OPS4" And not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext 
End If%>
</td>
<td>
<% If Trim(RS("Team")) = "OPS5" And not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext 
End If%>
</td>
<td>
<% If Trim(RS("Team")) = "OPS6" And not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext 
End If%>
</td>
<td>
<% If Trim(RS("Team")) = "OPS7" And not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext 
End If%>
</td>
<td>
<% If Trim(RS("Team")) = "OPS8" And Not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext 
End If%>
</td>
<td>
<% If Trim(RS("Team")) = "OPS9" And Not RS.EOF Then
Response.Write(RS("NumDocs")) 
RS.MoveNext 
End If%>
</td> 
```

标题行包含 10 个硬编码标题，OPS1、OPS10、OPS2 等。

上面填充 OPS7 列的部分很好，“2”的值被写入单元格。然后我在 OPS8 的下一列中收到错误 - 显然没有返回值，因为它只上升到 OPS7。这就是我在 IF 语句中放置 Not EOF 的原因，但我仍然收到错误消息。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:40:30.733

您应该将 RS.EOF 移动到 IF 语句 EG 中的第一个检查，从此开始

```
If Trim(RS("Team")) = "OPS9" And Not RS.EOF Then 
```

对此

```
If Not RS.EOF Then
    If Trim(RS("Team")) = "OPS9" Then
        ... logic here ...
    End If
End If 
```

问题是这`And`不是经典asp中的短路操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:05:15.080

不幸的是，没有与此代码相关的错误消息。

80020009 = 访问 EOF 记录集的数据

# python - ImportError：导入 psycopg2 模块时权限被拒绝

> ID：11503416
> 
> 赞同：5
> 
> 时间：2012-07-16T11:34:21.643
> 
> 标签：python, cygwin, psycopg2

我正在尝试设置一个通过 psycopg2 使用 PostgreSQL 的 Python 应用程序，但是导入它时模块一直失败。

```
ImportError: Permission denied 
```

我已经在全局和 virtualenv 中使用 pip 安装了 psycopg2

环境如下：（Cygwin on XP x86）

```
Python 2.6.8 (unknown, Jun  9 2012, 11:30:32)
[GCC 4.5.3] on cygwin 
```

导入模块：

```
[12:49:45] /usr/lib/python2.6/site-packages/psycopg2 $ python -c "import psycopg2"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python2.6/site-packages/psycopg2/__init__.py", line 67, in <module>
    from psycopg2._psycopg import BINARY, NUMBER, STRING, DATETIME, ROWID
ImportError: Permission denied 
```

有问题的模块是_psycopg，_psycopg.dll，如果我重命名它，则无法按预期找到该模块。

```
[12:50:01] /usr/lib/python2.6/site-packages/psycopg2 $ mv _psycopg.dll X_psycopg.dll
[13:00:53] /usr/lib/python2.6/site-packages/psycopg2 $ python -c "import psycopg2"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python2.6/site-packages/psycopg2/__init__.py", line 67, in <module>
    from psycopg2._psycopg import BINARY,
ImportError: No module named _psycopg 
```

文件权限：

```
-rwxr-xr-x 1 L0009813 Ninguno 739979 jul 16 12:11 _psycopg.dll 
```

用户信息：

```
[13:01:40] /usr/lib/python2.6/site-packages/psycopg2 $ id
  uid=1008(L0009813) gid=513(Ninguno) grupos=513(Ninguno),0(root),544(Administradores),545(Usuarios) 
```

我已经正确安装了 PostgreSQL（9.1），我尝试了 pgAdmin 并设法创建和访问数据库，但我认为问题发生在尝试连接到 PGSQL 之前。

我可以移动、删除等 DLL 文件，并且 AFAIK，没有其他用户参与操作，我已经搜索并尝试了我找到的所有内容，但我无法找到解决方案，这非常令人沮丧，因为我'确定我在他的过程中遗漏了一个小细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-02T09:27:52.423

众所周知，使用 pip 安装会将 umask 设置为非常严格。尝试运行：

```
sudo chmod -R a+rX /usr/lib/python2.6/site-packages 
```

（注意大写的 X；它只会将执行权限应用于目录。）

# python - Python 多行表达式和堆栈跟踪

> ID：11503419
> 
> 赞同：0
> 
> 时间：2012-07-16T11:34:40.827
> 
> 标签：python, exception, exception-handling, traceback

我们的 python 项目中使用了一个简单的 AssertTrue 函数，我想修改它提供的输出以打印调用它的代码语句。代码看起来像这样：

```
1 import traceback
2
3 def AssertTrue(expr, reason=None):
4     print traceback.format_stack()[-2]
5
6 AssertTrue(1 == 2,
7         reason='One is not equal to two') 
```

输出：

```
File "/tmp/fisken.py", line 7, in <module>
  reason='One is not equal to two') 
```

我想知道为什么 traceback.format_stack 只给了我第 7 行的代码。语句从第 6 行开始，我想在输出中看到的表达式也在同一行。回溯不处理多行函数调用吗？

（不要介意有更好的方法来执行 AssertTrue(...)。我只是想知道为什么 traceback.format_stack （和 .extract_stack）的行为不像我预期的那样）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:19:22.093

> 回溯不处理多行函数调用吗？

许多函数长达数十甚至（恐怖）数百行。如果 traceback 确实打印了整个函数，那么堆栈跟踪将变得难以理解。所以我想你所看到的是试图保持清洁和最小化。

我收集了一些类似问题的答案：

*   [将当前函数转换为变量的 Python 代码？](https://stackoverflow.com/q/4492559/1395668)
*   [如何获取 Python 函数的源代码？](https://stackoverflow.com/q/427453/1395668)

考虑到它检查只能获取整个函数的源（如果源在路径上可用），我可以为您提供：

```
import traceback
import inspect
import gc

def giveupthefunc(frame):
    code  = frame.f_code
    globs = frame.f_globals
    functype = type(lambda: 0)
    funcs = []
    for func in gc.get_referrers(code):
        if type(func) is functype:
            if getattr(func, "func_code", None) is code:
                if getattr(func, "func_globals", None) is globs:
                    funcs.append(func)
                    if len(funcs) > 1:
                        return None
    return funcs[0] if funcs else None

def AssertTrue(expr, reason=None):
    print traceback.format_stack()[-2]
    frame = inspect.currentframe().f_back
    func = giveupthefunc(frame)
    if func:
        source = inspect.getsourcelines(func)
        i = source[1]
        for line in source[0]:
            print i, ":", line,
            i += 1

def my_fun():
    AssertTrue(1 == 2,
             reason='One is not equal to two')

my_fun() 
```

产生：

```
/Library/Frameworks/Python.framework/Versions/2.7/bin/python /Users/xxxx/Documents/PycharmProjects/scratchpad/test.py
  File "/Users/xxxx/Documents/PycharmProjects/scratchpad/test.py", line 35, in my_fun
    reason='One is not equal to two')

33 : def my_fun():
34 :     AssertTrue(1 == 2,
35 :              reason='One is not equal to two') 
```

# c# - 出现错误“无法加载由 xxxxxxxx.dll 导入的程序

> ID：11503421
> 
> 赞同：2
> 
> 时间：2012-07-16T11:34:47.433
> 
> 标签：c#, .net

我收到“无法加载由 xxxxxxx.dll 导入的程序，而我正在尝试从浏览器运行我的 .net 应用程序。以下是我得到的：

```
[FileLoadException: A procedure imported by 'xxxxxxx.DLL' could not be loaded.]
   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
   System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39
   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +144
   System.Reflection.Assembly.Load(String assemblyString) +28
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46

[ConfigurationErrorsException: A procedure imported by 'xxxxxxxxx.DLL' could not be loaded.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +618
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +209
   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +130
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178
   System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +94
   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +332
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +677

[HttpException (0x80004005): A procedure imported by 'xxxxxxxx.DLL' could not be loaded.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9088636
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +258 
```

有什么方法可以找出它无法加载的程序或解决问题的任何其他方法。我尝试了 Fusion 日志，Fusion 日志中似乎没有问题。

感谢您的帮助。

# jquery - jQuery div 动画在第一个实例上出现错误

> ID：11503423
> 
> 赞同：0
> 
> 时间：2012-07-16T11:34:49.523
> 
> 标签：jquery, animation

我在一个非常简单的滑块上遇到 jQuery 动画问题。第一次单击它们时，动画似乎有问题。动画使 div 打破容器。我在包含的 div 中添加了溢出：隐藏，但它只是使内容“闪烁”而不是在下面溢出。

在每个元素的第一次单击后，动画都很好。知道如何避免这种行为吗？

这是示例：http: [//jsbin.com/izuviv/edit#preview](http://jsbin.com/izuviv/edit#preview)

HTML

```
<div id="slider">
    <div class="slide expanded">
        <img />
        <a href="">
            <h3>Lorem</h3>
            <p>Ipsum</p>
        </a>
    </div>
    <div class="slide">
        <img />
        <a href="">
            <h3>Lorem</h3>
            <p>Ipsum</p>
        </a>
    </div>
    <div class="slide">
        <img />
        <a href="">
            <h3>Lorem</h3>
            <p>Ipsum</p>
        </a>
    </div>
    <div class="slide last">
        <img />
        <a href="">
            <h3>Lorem</h3>
            <p>Ipsum</p>
        </a>
    </div>
</div> 
```

CSS

```
#slider {width: 632px; height: 231px; margin: 100px; font-family: arial, helvetica, sans-serif;}
    #slider .slide {width: 71px; height: 231px; background: black; margin: 0 4px 0 0; float: left; display: inline; position: relative;}
        #slider .slide a {display: block; width: 71px; height: 72px; background: transparent url(../img/white.png) 0 0 repeat; text-decoration: none; color: #000; position: absolute; bottom: 0;}
        #slider .slide h3 {display: none;}
        #slider .slide p {display: none;}

    #slider .last {margin: 0;}
    #slider .expanded {width: 407px;}
        #slider .expanded a {width: 407px; background: transparent url(../img/white.png) 0 0 repeat;}
        #slider .expanded h3 {margin: 10px 10px 0px 10px; font-size: 14px; font-weight: bold; display: block;}
        #slider .expanded p {margin: 5px 10px; font-size: 12px; display: inline;} 
```

JS

```
function slider() { 

    var slide = $('#slider div');

    slide.click(function(){

        var expanded = $('#slider .expanded');

        if (!$(this).hasClass('expanded') ) {

            // 1: Shrink expanded div
            expanded.animate({
                width: '71px'
            }, 200, function() {
                console.log('contract');
                // 2: Remove expanded class
                $(this).removeClass('expanded');
            });

            // 3: Add expanded class to clicked
            $(this).addClass('expanded');

            // 4: Expand clicked div
            $(this).animate({
                width: '407px'
            }, 200, function() {
                console.log('expand');
            });

        }

    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:04:25.917

在功能滑块中，我将代码更改为：

```
$('.slide').click(function (){
    $this = $(this);
    if(!$this.hasClass('expanded')){
      $exp = $('.expanded');
      $exp.animate({width:'71px'},200,function (){$exp.removeClass('expanded');});
      $this.animate({width:'407px'},200).addClass('expanded');
    }
}); 
```

现在，它工作正常.. 我认为导致问题的原因是：$(this);.. 始终将其保存**到**变量中以防止错误和重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:50:10.823

正如我观察并尝试您的代码一样，这是第一次出现错误，因为所有 div 都没有其内联宽度，您正在设置滑块类中标签的宽度。但如果你为 div 设置宽度，那么它不会导致任何错误行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:58:03.023

修改您的 slide() 函数如下

```
function slider() { 

    var slide = $('#slider div');

    slide.click(function(){

        var expanded = $('#slider .expanded');

        if (!$(this).hasClass('expanded') ) {

            // 1: Shrink expanded div
            expanded.animate({
                width: '71px'
            }, 200, function() {
                console.log('contract');
                // 2: Remove expanded class
                $(this).removeClass('expanded');
            });

            // 3: Add expanded class to clicked
            //$(this).addClass('expanded');

            // 4: Expand clicked div
            $(this).animate({
                width: '407px'
            }, 200, function() {
                console.log('expand');
                $(this).addClass('expanded');
            });

        }

    });
} 
```

我刚刚添加了与在动画完成中添加类相关的代码

# javascript - 为什么新的 IE 弹出窗口最初是空的，但在 F5（刷新）后填充？

> ID：11503425
> 
> 赞同：1
> 
> 时间：2012-07-16T11:34:52.767
> 
> 标签：javascript, popup

我有一个网络应用程序，当单击链接时，它会打开一个新的浏览器窗口（使用 window.open）。第一次打开窗口时，它仍然是空的。该调用是对报告生成器的调用，这将返回一个 PDF 文档。

如果第二次单击链接或刷新新窗口，则会显示正确的内容。

这只发生在生产服务器上的 IE（我使用的是 IE8）中，而不是测试服务器上。

我使用 HttpAnalyser 来检查流量，但我无法发现不同场景之间的任何差异。

这是脚本

```
var url = "http://myserver/webapps/birt/run?__title=MMS Report&__report=Report/" + report + "&__lc=en&__format=pdf&__runtime=prod&";
var chk = document.getElementById('chkPageBreak');
if(chk && chk.checked) url += "PageBreak=true&";
if(params) {
    params = params.replace('%MMSFAIRID%', '25');
    params = params.replace('%LANGUAGE%', 'en');
}
url += params;
birturl = url;
birtwin = window.open(url,'MMSBIRT', 'menubar=0,location=0,toolbar=0,resizable=1,status=1,scrollbars=1'); 
```

为什么会发生这种情况？我能做些什么来防止它？

谢谢！

**更新**

这是请求

```
GET /webapps/birt/run
    ?__title=MMS%20Report
    &__report=Report/emosBuildStaffGrouped.rptdesign
    &__lc=en
    &__format=pdf
    &__runtime=prod
    &MmsFairId=25
    &Language=en
    &Inland=false 
```

这是回复

```
HTTP/1.1 200 OK
Date: Mon, 16 Jul 2012 12:30:31 GMT
Server: IBM_HTTP_Server
Content-Disposition: inline; filename="emosBuildStaffGrouped.pdf"
Set-Cookie: JSESSIONID=xxxxxxxxxxxxx:-1; Path=/
Expires: Thu, 01 Dec 1994 16:00:00 GMT
Cache-Control: no-cache="set-cookie, set-cookie2"
Keep-Alive: timeout=10, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: application/pdf
Content-Language: de-DE 
```

刚刚引起我注意的是奇怪的 Expires 值。1994？！？不知道那是从哪里来的。当我刷新页面时，没有收到 Set-Cookie 也没有收到 Expires....

# c# - 将 ListBox2 项存储在 SQL 表中

> ID：11503430
> 
> 赞同：0
> 
> 时间：2012-07-16T11:35:09.627
> 
> 标签：c#, asp.net, .net

在我的网页中，我有 2 个列表框，即 ListBox1、ListBox2。用户从 ListBox1 中选择项目列表并将其移动到 ListBox2。**我做到了这一点**，但是在我单击“保存”按钮后，它不会将 ListBox2 选定项保存在 SQL 表中，也不会引发任何错误！！怎么存放呢？

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
         lblPage1ID.Text=Server.UrlDecode(Request.QueryString["Parameter"].ToString());
         ListBoxWorksPackages();
        }
    }

    protected void ListBoxWorksPackages()
    {
        ListBox1.Items.Add("General Contractor");
        ListBox1.Items.Add("Architecture");
        ListBox1.Items.Add("Civil");
        ListBox1.Items.Add("Mechanical");
        ListBox1.Items.Add("Electrical");
    }

    protected void btnMoveRight1_Click(object sender, EventArgs e)
    {
        for (int i = ListBox1.Items.Count - 1; i >= 0; i--)
        {
            if (ListBox1.Items[i].Selected == true)
            {
                ListBox2.Items.Add(ListBox1.Items[i]);
                ListItem li = ListBox1.Items[i];
                ListBox1.Items.Remove(li);
            }
        }
    }

    protected void btnMoveLeft1_Click(object sender, EventArgs e)
    {
        for (int i = ListBox2.Items.Count - 1; i >= 0; i--)
        {
            if (ListBox2.Items[i].Selected == true)
            {
                ListBox1.Items.Add(ListBox2.Items[i]);
                ListItem li = ListBox2.Items[i];
                ListBox2.Items.Remove(li);
            }
        }
    }

    protected void BtnSave1_Click(object sender, EventArgs e)
    {
        SqlConnection SqlCon = new SqlConnection(GetConnectionString());

        string Packagevalues = string.Empty;
        foreach (ListItem item in ListBox2.Items)
        {
            if (item.Selected == true)
            {
               Packagevalues += "," + item.Text; 
            }
        }

        string query = "INSERT INTO Contractor_Info2 (Vendor_ID,WorksPackage) VALUES"
                           + "(@Vendor_ID,@WorksPackage )";

        try
        {
            SqlCommand cmd = new SqlCommand(query, SqlCon);
            cmd.CommandType = CommandType.Text;

            SqlCon.Open();

            cmd.Parameters.AddWithValue("@Vendor_ID", lblPage1ID.Text);
            cmd.Parameters.AddWithValue("@WorksPackage", Packagevalues);
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        }
        finally
        {
            SqlCon.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:37:42.747

您需要`cmd.ExecuteNonQuery()`在将参数添加到 sql 过程后调用。这将实际运行您的 sql 语句。

```
 try
    {
        SqlCommand cmd = new SqlCommand(query, SqlCon);
        cmd.CommandType = CommandType.Text;

        SqlCon.Open();

        cmd.Parameters.AddWithValue("@Vendor_ID", lblPage1ID.Text);
        cmd.Parameters.AddWithValue("@WorksPackage", Packagevalues);
        // add this
        cmd.ExecuteNonQuery();
    } 
```

# r - 根据条件修改列中的值？

> ID：11503434
> 
> 赞同：2
> 
> 时间：2012-07-16T11:35:13.610
> 
> 标签：r

我知道这是一个非常愚蠢的问题，但我不知道该怎么做。如果它们大于 299，我想从 trial1 列的每一行的值中减去 300。

我试过：

```
sums[sums$trial1 > 299, ][,"trial1"] -= 300 
```

但没有用。到目前为止，我设法让它工作的唯一方法是使用拆分 data.frame`subset`然后修改它：

```
sums$trial1 = sums$trial1 - 300 
```

然后使用`rbind()`. 我很确定使用子集和 rbind 是矫枉过正的，但我还没有找到直接的方法......

我使用 dput 来获取我的 data.frame 的样本。

```
structure(list(part_no = c(10L, 10L, 10L, 10L, 10L, 10L), trial1 = c(294L, 
296L, 298L, 300L, 302L, 304L), trial2 = c(295L, 297L, 299L, 301L, 
303L, 305L), id1 = c(1.5, 1.5, 1.5, 2, 2, 2), id2 = c(1.5, 1.5, 
1.5, 2, 2, 2), dist1 = c(141L, 141L, 115L, 126L, 177L, 141L), 
    width1 = c(77L, 77L, 63L, 42L, 59L, 47L), dist2 = c(143L, 
    135L, 146L, 255L, 327L, 369L), width2 = c(78L, 74L, 80L, 
    85L, 109L, 123L), ttime1 = c(1752L, 1681L, 1664L, 1798L, 
    1664L, 1697L), ttime2 = c(2563L, 1849L, 2067L, 1933L, 2118L, 
    2245L), no_clicks1 = c(8L, 8L, 8L, 8L, 8L, 8L), no_clicks2 = c(8L, 
    8L, 8L, 8L, 8L, 8L), no_ontarget1 = c(7L, 8L, 8L, 8L, 8L, 
    8L), no_ontarget2 = c(8L, 8L, 8L, 4L, 7L, 8L), e1 = c(1L, 
    0L, 0L, 0L, 0L, 0L), e2 = c(0L, 0L, 0L, 4L, 1L, 0L), rating = c(252, 
    252, 252, 252, 252, 252), prat = c(0.8, 0.8, 0.8, 0.8, 0.8, 
    0.8), ptim = c(-46.2899543378995, -9.9940511600238, -24.21875, 
    -7.5083426028921, -27.2836538461538, -32.2922804949912), 
    ptdiff = c(-47.0899543378995, -10.7940511600238, -25.01875, 
    -8.3083426028921, -28.0836538461538, -33.0922804949912), 
    pdist = c(-1.41843971631206, 4.25531914893617, -26.9565217391304, 
    -102.380952380952, -84.7457627118644, -161.702127659574), 
    pddiff = c(-2.21843971631206, 3.45531914893617, -27.7565217391304, 
    -103.180952380952, -85.5457627118644, -162.502127659574), 
    perr = c(100, NaN, NaN, -Inf, -Inf, NaN), pediff = c(99.2, 
    NaN, NaN, -Inf, -Inf, NaN)), .Names = c("part_no", "trial1", 
"trial2", "id1", "id2", "dist1", "width1", "dist2", "width2", 
"ttime1", "ttime2", "no_clicks1", "no_clicks2", "no_ontarget1", 
"no_ontarget2", "e1", "e2", "rating", "prat", "ptim", "ptdiff", 
"pdist", "pddiff", "perr", "pediff"), row.names = 148:153, class = "data.frame") 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:43:24.533

您的第一次尝试很接近，但基础 R 中没有`-=`运算符，因此您还需要在右侧提供子集。

```
sums[sums$trial1 > 299,"trial1"] <- sums[sums$trial1 > 299,"trial1"]-300 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:33:08.000

为什么不直接使用`mod(x,300)`？[charcountfiller]

* * *

# php - symfony2 - 访问 $_SESSION 的私有成员

> ID：11503438
> 
> 赞同：0
> 
> 时间：2012-07-16T11:35:28.400
> 
> 标签：php, symfony

我已经在谷歌上搜索了几个小时的答案，但找不到。由于我的网站有一个登录系统，我想使用 $_SESSION 中的数据，我似乎无法获取我需要的所有数据，它是私有的，我需要某种函数来获取它，但没有成功.

基本上，我有一个控制器：

```
$session = $this->getRequest()->getSession()->all() 
```

它给出了 $_SESSION 中的所有属性，但我似乎无法访问我需要的私有属性，因为 all() 返回数组。

我怎样才能获得这些属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:08:20.540

您必须通过[`Session`](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Session.html)班级编辑会话。

```
$session = $this->getRequest()->getSession();
$session->set('name', 'Adrien');
echo $session->get('name'); // Outputs "Adrien" 
```

# php - 在运行时整合两个站点的内容

> ID：11503441
> 
> 赞同：0
> 
> 时间：2012-07-16T11:35:35.387
> 
> 标签：php

计划使用基于 php 的 CMS 来管理多个站点的内容。

但是其中 2 个基于 Tomcat + JSP，而不是 php——我无法将它们直接集成到 CMS 中，所以我需要从 PHP 内部“注入”它们。JSP 站点实现了几种 Web 表单，使用 ajax 并过自己的生活，我需要用 CMS 包装它来管理横幅、新闻、文章和其他内容，放置在 jsp 表单周围。

我写了一个proxy.php，它接受所有请求（使用file_get_contents（...））外部站点的HTML，用DOMDocument对其进行解析以添加前缀到它的资源（是/js/js.js，变成/external_site/js /jw.js 等），直接用“echo”渲染html并配置nginx根据/external_site/获取静态内容。

但问题是外部站点的表单有按钮和链接，所有的帖子都应该由 servlet 处理。

这不是所有方面的理想解决方案，所有流量都应通过 CMS。

主要问题是否有一些框架或最佳实践形式来制作这些内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:44:42.227

不。创建和支持这样的框架/系统/无论什么都需要大量的时间/人员。您最好的选择是用您计划使用的 cms 替换 jsp 引擎。

Жесть какая。Мои соболезнования。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:50:49.237

认为还有另一个想法。

使用 cURL 之类的完整请求/响应代理来处理 JSP 请求。请推荐文章，或者可能是如何创建 http 代理以在不进行任何修改的情况下直接传递 POST 请求（使用 cookie）的解决方案。

这样，JSP 应用程序就不会期望谁是请求的来源。得到响应后，我可以为“echo”准备正确的 html。

# javascript - 显示或隐藏表单元素

> ID：11503444
> 
> 赞同：0
> 
> 时间：2012-07-16T11:36:07.457
> 
> 标签：javascript, jquery, ruby-on-rails

我有一个 html 表单 - 在那个文本字段上

```
<input type = "text" name = "age" value = "" id = "txt_age"> 
```

在年龄的值上，我必须显示这个元素，例如 -

```
<select name = "married">
  <option value = "Yes">Yes</option>
  <option value ="No">No</option>
</select> 
```

如果年龄>18 则已婚字段将显示为表格，否则将其隐藏。此年龄>18 条件存储在数据库中。随着年龄值的更改，已婚字段切换（显示/隐藏）。我怎么能用 javascript/jquery 做到这一点。请建议。

有关更多信息，所有这些字段都是动态生成的。所以我想添加 onchange = "somefction(condition);" 在创建时随着年龄的增长，然后在满足条件时显示查找字段，也在 DB 中。

或者

我可能认为一种解决方案 -
在这种情况下，已婚字段将寻找年龄变化的值。然后已婚将隐藏/显示自己。但问题是已婚如何观察年龄字段或调用 javascript 函数。
很抱歉没有解释完整的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:39:33.090

将 id="married" 添加到选择并使用类似的东西。

```
$("#txt_age").blur(function() {
    if(parseInt($(this).val() > 18) {
        $("#married").show();
    } else {
        $("#married").hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:42:16.597

试试这个并注意

*   避免 id = "txt_age" 之间的空格

休息这应该有帮助：

```
var $foo = $('select[name="married"]');
$foo.hide(); // in start always hide

$('#txt_age').on('blur', function() {
   if(parseInt(this.value)>18){
       $foo.hide();
   } else {
       $foo.show();
   }

}); 
```

# ajax - 动态更改 colModel、colData 和 colNames

> ID：11503445
> 
> 赞同：0
> 
> 时间：2012-07-16T11:36:14.980
> 
> 标签：ajax, json, dynamic

在用户单击“下个月”按钮或“前一个月”按钮后，我尝试更改 colModel、colNames 和 ColData。但它不起作用。

在这里，您可以看到用户单击“上个月”按钮后的更改。开头的 colNames 显示如下示例：
**'ID', 'Name', 01.07, 02.07, 03.07 ... 31.07** 和 colModel 是为**33 列**创建的，显示数据结构如下。

如果用户按下按钮“上个月”，则新的 colNames 必须显示为 **'ID'、'Name'、** 01.06、02.06、03.06、.... 30.06，现在 colModel 必须仅创建**32 列**

我首先在 PHP 中创建 colNames 和 colModel 动态，将显示实际月份。

**在这里你可以看到 html-part**

```
<div id="jqgrid">
    <div id="navigation-top">
        <input class="button-pos ui-corner-all ui-state-loading ui-state-default" type="submit" name="prevMonth" id="prevMonth" value="<< vorheriger Monat" onClick="showMonth('prevmonth', <?php echo $this->month; ?>, <?php echo $this->year; ?>);" />
        <input class="button-pos ui-corner-all ui-state-loading ui-state-default" type="submit" name="nextMonth" id="nextMonth" value="nächster Monat >>" onClick="showMonth('nextmonth', <?php echo $this->month; ?>, <?php echo $this->year; ?>);" />
    </div>

    <table id="grid"><tr><td></td></tr></table>
</div> 
```

**这是我使用的示例代码。**

```
var lastsel;

$(document).ready($(function(){ 
    $.ajax({
        url:'/get-jq-grid-json/',
        datatype: 'json',
        type: 'POST',
        success: function(result){
            var obj = $.parseJSON(result);
            var colD = obj.couponStripList;
            var colM = obj.colModelList;
            var colN = obj.columnNames;

            var lastSel;

            $("#grid").jqGrid({
                url:'/get-jq-grid-json/',
                jsonReader : {
                    root: "rows",
                    cell: "",
                    repeatitems: true,
                    id: "invid"
                }, 
                mytype: 'POST',
                datatype: 'local',
                data: colD.rows,
                colNames: colN,
                colModel: colM,
                height: 'auto',
                width: 'auto',
                onSelectRow: function(id) {
                    if(id && id!==lastSel){ 
                        $("#grid").restoreRow(lastSel); 
                        lastSel=id; 
                    } 
                    $("#grid").editRow(id, true); 
                },
                editurl:'/price-calendar/save-jq-grid/locationId/',
                loadComplete: function(data){
                    alert('loaded');
                },
                loadError: function(xhr,status,error){
                    alert('error ' + error );
                }
            });
        },
        error: function(x, e){
            alert(x.readyState + " "+ x.status +" "+ e.msg);
        }

    });
    setTimeout(function() {$("#grid").jqGrid('setGridParam',{datatype:'json'}); },500); 
```

**现在我试图改变 colNames 等等，但 ist 不起作用。使用 $("#grid").jqGrid('setGridParam', { data: obj.couponStripList.rows }); 正确更改了日期 但是 setLabel 不会更改 coNames，我如何更改 colModel？**

```
 function showMonth(param, month, year){
        if(param == 'prevmonth'){
            if(month > 1){
                month -= 1;
            }
        }

        if(param == 'nextmonth'){
            if(month < 12){
                month += 1;
            }
        }

        $.post('/price-calendar/get-jq-grid-json/locationId/<?php echo $this->locationId; ?>/serviceId/<?php echo $this->serviceId; ?>/' + param + '/' + month + '/year/' + year, 
        function(data){ 

            $("#grid").jqGrid('clearGridData');
             var obj = $.parseJSON(data);

             for($i = 0; $i <= obj.columnNames.length; $i++)
             {

                 var colNames = $("#grid").jqGrid('getGridParam', 'colNames');
                  $("#grid").jqGrid('setLabel', colNames[$i], obj.columnNames);
             }

            $("#grid").jqGrid('setGridParam', { data: obj.couponStripList.rows });
            $("#grid").trigger("reloadGrid");

        }); 
```

**这是两个 json-data 结构，第一个是开始 json-data 第二个是用户单击“上个月”按钮时的新 json-data**

```
{
   "colModelList":[
      {
         "name":"id",
         "index":"id",
         "width":100,
         "hidden":true,
         "key":true
      },
      {
         "name":"name",
         "index":"name",
         "width":200
      },
      {
         "name":"date01",
         "index":"date01",
         "width":45,
         "editable":true
      },
      {
         "name":"date02",
         "index":"date02",
         "width":45,
         "editable":true
      },
      {
         "name":"date03",
         "index":"date03",
         "width":45,
         "editable":true
      },
      {
         "name":"date04",
         "index":"date04",
         "width":45,
         "editable":true
      },
      {
         "name":"date05",
         "index":"date05",
         "width":45,
         "editable":true
      },
      {
         "name":"date06",
         "index":"date06",
         "width":45,
         "editable":true
      },
      {
         "name":"date07",
         "index":"date07",
         "width":45,
         "editable":true
      },
      {
         "name":"date08",
         "index":"date08",
         "width":45,
         "editable":true
      },
      {
         "name":"date09",
         "index":"date09",
         "width":45,
         "editable":true
      },
      {
         "name":"date10",
         "index":"date10",
         "width":45,
         "editable":true
      },
      {
         "name":"date11",
         "index":"date11",
         "width":45,
         "editable":true
      },
      {
         "name":"date12",
         "index":"date12",
         "width":45,
         "editable":true
      },
      {
         "name":"date13",
         "index":"date13",
         "width":45,
         "editable":true
      },
      {
         "name":"date14",
         "index":"date14",
         "width":45,
         "editable":true
      },
      {
         "name":"date15",
         "index":"date15",
         "width":45,
         "editable":true
      },
      {
         "name":"date16",
         "index":"date16",
         "width":45,
         "editable":true
      },
      {
         "name":"date17",
         "index":"date17",
         "width":45,
         "editable":true
      },
      {
         "name":"date18",
         "index":"date18",
         "width":45,
         "editable":true
      },
      {
         "name":"date19",
         "index":"date19",
         "width":45,
         "editable":true
      },
      {
         "name":"date20",
         "index":"date20",
         "width":45,
         "editable":true
      },
      {
         "name":"date21",
         "index":"date21",
         "width":45,
         "editable":true
      },
      {
         "name":"date22",
         "index":"date22",
         "width":45,
         "editable":true
      },
      {
         "name":"date23",
         "index":"date23",
         "width":45,
         "editable":true
      },
      {
         "name":"date24",
         "index":"date24",
         "width":45,
         "editable":true
      },
      {
         "name":"date25",
         "index":"date25",
         "width":45,
         "editable":true
      },
      {
         "name":"date26",
         "index":"date26",
         "width":45,
         "editable":true
      },
      {
         "name":"date27",
         "index":"date27",
         "width":45,
         "editable":true
      },
      {
         "name":"date28",
         "index":"date28",
         "width":45,
         "editable":true
      },
      {
         "name":"date29",
         "index":"date29",
         "width":45,
         "editable":true
      },
      {
         "name":"date30",
         "index":"date30",
         "width":45,
         "editable":true
      },
      {
         "name":"date31",
         "index":"date31",
         "width":45,
         "editable":true
      }
   ],
   "columnNames":[
      "Id",
      "Preis",
      "01.07",
      "02.07",
      "03.07",
      "04.07",
      "05.07",
      "06.07",
      "07.07",
      "08.07",
      "09.07",
      "10.07",
      "11.07",
      "12.07",
      "13.07",
      "14.07",
      "15.07",
      "16.07",
      "17.07",
      "18.07",
      "19.07",
      "20.07",
      "21.07",
      "22.07",
      "23.07",
      "24.07",
      "25.07",
      "26.07",
      "27.07",
      "28.07",
      "29.07",
      "30.07",
      "31.07"
   ],
   "couponStripList":{
      "rows":[
         {
            "invid":"1",
            "id":"1",
            "name":"Bild",
            "date01":"28.50",
            "date02":"28.50",
            "date03":"28.50",
            "date04":"28.50",
            "date05":"28.50",
            "date06":"28.50",
            "date07":"28.50",
            "date08":"28.50",
            "date09":"28.50",
            "date10":"28.50",
            "date11":"28.50",
            "date12":"30.95",
            "date13":"30.95",
            "date14":"30.95",
            "date15":"30.95",
            "date16":"30.95",
            "date17":"30.95",
            "date18":"30.95",
            "date19":"30.95",
            "date20":"30.95",
            "date21":"35.50",
            "date22":"35.50",
            "date23":"35.50",
            "date24":"35.50",
            "date25":"35.50",
            "date26":"35.50",
            "date27":"35.50",
            "date28":"35.50",
            "date29":"35.50",
            "date30":"35.50",
            "date31":"35.50",
            "0":0,
            "1":null,
            "2":false,
            "3":false
         }
      ]
   }
} 
```

**第二个json-数据**

```
{
   "colModelList":[
      {
         "name":"id",
         "index":"id",
         "width":100,
         "hidden":true,
         "key":true
      },
      {
         "name":"name",
         "index":"name",
         "width":200
      },
      {
         "name":"date01",
         "index":"date01",
         "width":45,
         "editable":true
      },
      {
         "name":"date02",
         "index":"date02",
         "width":45,
         "editable":true
      },
      {
         "name":"date03",
         "index":"date03",
         "width":45,
         "editable":true
      },
      {
         "name":"date04",
         "index":"date04",
         "width":45,
         "editable":true
      },
      {
         "name":"date05",
         "index":"date05",
         "width":45,
         "editable":true
      },
      {
         "name":"date06",
         "index":"date06",
         "width":45,
         "editable":true
      },
      {
         "name":"date07",
         "index":"date07",
         "width":45,
         "editable":true
      },
      {
         "name":"date08",
         "index":"date08",
         "width":45,
         "editable":true
      },
      {
         "name":"date09",
         "index":"date09",
         "width":45,
         "editable":true
      },
      {
         "name":"date10",
         "index":"date10",
         "width":45,
         "editable":true
      },
      {
         "name":"date11",
         "index":"date11",
         "width":45,
         "editable":true
      },
      {
         "name":"date12",
         "index":"date12",
         "width":45,
         "editable":true
      },
      {
         "name":"date13",
         "index":"date13",
         "width":45,
         "editable":true
      },
      {
         "name":"date14",
         "index":"date14",
         "width":45,
         "editable":true
      },
      {
         "name":"date15",
         "index":"date15",
         "width":45,
         "editable":true
      },
      {
         "name":"date16",
         "index":"date16",
         "width":45,
         "editable":true
      },
      {
         "name":"date17",
         "index":"date17",
         "width":45,
         "editable":true
      },
      {
         "name":"date18",
         "index":"date18",
         "width":45,
         "editable":true
      },
      {
         "name":"date19",
         "index":"date19",
         "width":45,
         "editable":true
      },
      {
         "name":"date20",
         "index":"date20",
         "width":45,
         "editable":true
      },
      {
         "name":"date21",
         "index":"date21",
         "width":45,
         "editable":true
      },
      {
         "name":"date22",
         "index":"date22",
         "width":45,
         "editable":true
      },
      {
         "name":"date23",
         "index":"date23",
         "width":45,
         "editable":true
      },
      {
         "name":"date24",
         "index":"date24",
         "width":45,
         "editable":true
      },
      {
         "name":"date25",
         "index":"date25",
         "width":45,
         "editable":true
      },
      {
         "name":"date26",
         "index":"date26",
         "width":45,
         "editable":true
      },
      {
         "name":"date27",
         "index":"date27",
         "width":45,
         "editable":true
      },
      {
         "name":"date28",
         "index":"date28",
         "width":45,
         "editable":true
      },
      {
         "name":"date29",
         "index":"date29",
         "width":45,
         "editable":true
      },
      {
         "name":"date30",
         "index":"date30",
         "width":45,
         "editable":true
      }
   ],
   "columnNames":[
      "Id",
      "Preis",
      "01.06",
      "02.06",
      "03.06",
      "04.06",
      "05.06",
      "06.06",
      "07.06",
      "08.06",
      "09.06",
      "10.06",
      "11.06",
      "12.06",
      "13.06",
      "14.06",
      "15.06",
      "16.06",
      "17.06",
      "18.06",
      "19.06",
      "20.06",
      "21.06",
      "22.06",
      "23.06",
      "24.06",
      "25.06",
      "26.06",
      "27.06",
      "28.06",
      "29.06",
      "30.06"
   ],
   "couponStripList":{
      "rows":[
         {
            "invid":"1",
            "id":"1",
            "name":"Bild",
            "date01":"28.50",
            "date02":"28.50",
            "date03":"28.50",
            "date04":"28.50",
            "date05":"28.50",
            "date06":"28.50",
            "date07":"28.50",
            "date08":"28.50",
            "date09":"28.50",
            "date10":"28.50",
            "date11":"28.50",
            "date12":"30.95",
            "date13":"30.95",
            "date14":"30.95",
            "date15":"30.95",
            "date16":"30.95",
            "date17":"30.95",
            "date18":"30.95",
            "date19":"30.95",
            "date20":"30.95",
            "date21":"35.50",
            "date22":"35.50",
            "date23":"35.50",
            "date24":"35.50",
            "date25":"35.50",
            "date26":"35.50",
            "date27":"35.50",
            "date28":"35.50",
            "date29":"35.50",
            "date30":"35.50"
            "0":0,
            "1":null,
            "2":false,
            "3":false
         }
      ]
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T15:40:30.333

（已在评论和编辑中回答。请参阅[没有答案的问题，但问题已在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> **我解决了这个问题。肯定是**

```
var colModel= $("#grid").jqGrid('getGridParam', 'colModel');
$("#grid").jqGrid('setLabel', colModel[i]['name'], obj.columnNames[i]); 
```

> **代替**

```
var colNames = $("#grid").jqGrid('getGridParam', 'colNames');
$("#grid").jqGrid('setLabel', colNames[$i], obj.columnNames); 
```

> **在这里你可以看到新的代码：**

```
function showMonth(param, month, year){

        console.log(month);
        if(param == 'prevmonth'){
            if(month > 1){
                month -= 1;
            }
        }

        if(param == 'nextmonth'){
            if(month < 12){
                month += 1;
            }
        }

        console.log(month);

        $.post('/price-calendar/get-jq-grid-json/locationId/<?php echo $this->locationId; ?>/serviceId/<?php echo $this->serviceId; ?>/' + param + '/' + month + '/year/' + year, 

        function(data){ 

            $("#grid").jqGrid('clearGridData');
            var obj = $.parseJSON(data);

             for(i = 0; i < obj.columnNames.length; i++)
             {
                 var colModel= $("#grid").jqGrid('getGridParam', 'colModel');
                 var colName = colModel[i]['name'];
                 $("#grid").jqGrid('setLabel', colName, obj.columnNames[i]);

             }

            $("#grid").jqGrid('setGridParam', { colModel: obj.colModelList});
            $("#grid").jqGrid('setGridParam', { data: obj.colData.rows});

            $("#grid").trigger("reloadGrid");
        });
    } 
```

# shell - 为什么 shell 'join' 命令丢失了一些正确的结果

> ID：11503446
> 
> 赞同：0
> 
> 时间：2012-07-16T11:36:33.420
> 
> 标签：shell, join

当我使用 'join' 合并两个排序文件时，结果出乎意料。这是示例：

//文件a.bat

```
12
123
456
13421
123456 
```

//文件b.bat

```
12
123
5432
123456 
```

执行命令：

```
$ join -1 1 -2 1 -o '1.1 2.1' a.dat b.dat  
12 12
123 123 
```

其中 123456 被忽略！事实上，我确实尝试了其他文件，其中一些也没有得到完整的结果。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:43:46.550

您的输入需要按词法排序才能`join`正常工作。您的输入是按数字排序的，这是错误的。所有以 1 开头的字符串都应该在所有以 2 开头的字符串之前，依此类推。

# android - 在其上添加布局后 9patch 背景中断

> ID：11503448
> 
> 赞同：0
> 
> 时间：2012-07-16T11:36:49.270
> 
> 标签：android, android-layout, background, nine-patch

我正在处理一个关卡场景，我将一个 9-patch 图像放到背景中。在我添加一些布局（例如 Viewpager ）之前，它似乎工作正常。它看起来像这样： ![在此处输入图像描述](../Images/a08b770af07b19f0da875f795db15c32.png)

因此，毯子的白色边缘所在的上部应该是静止的，其余部分应该适合屏幕。当我将 viewpager 和 viewpagertab 添加到屏幕时，它会破坏布局的背景！这是为什么？

编码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="10"
android:background="@drawable/background"
android:paddingTop="0dp"      
>

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="9"        
    android:layout_marginTop="66dp"        
   />

<core.world.ViewPagerTabs
    android:id="@+id/tabs"
    android:layout_width="40dp"
    android:layout_height="0dp"        
    android:layout_weight="1"
    android:layout_gravity="center_horizontal"               
    /> 
```

# css - Joomla 不显示文章

> ID：11503452
> 
> 赞同：2
> 
> 时间：2012-07-16T11:37:07.760
> 
> 标签：css, templates, joomla, joomla-article

作为参考，[这](http://i256.photobucket.com/albums/hh179/mechaFrieza/scr2.png)是网站的样子，

[这](http://pastebin.com/JenwJYvG)是 index.php 和

[这](http://pastebin.com/AQkPr34A)是当前使用的 template.css。

我的问题如下：

1.  以第一个菜单 [Quem Somos] 为例，我创建了一个类别，并在其下放置了一些文章。使用 default `mod_mainmenu`，我如何让它显示一个下拉菜单？

    即使将主菜单项创建为类别列表，或者当子菜单直接链接到文章然后这些子菜单链接到主菜单时，我也无法做到这一点，该模块仅显示显示的一级药丸菜单。我需要一个额外的模块还是什么？我正在干预 swmenufree，但我猜测一些基本的东西，因为由类别/部分提供的下拉菜单是应该内置的。

2.  在我寻求 3 列模板的过程中，我最明确地破坏了一些东西，现在每当我点击任何链接（所有链接都有文章支持它们）时，该网站只会显示相同的主页。在地址栏中单击并键入（实际上是 c&p）整个 URL 也让我无处可去。它显示的 URL 是正确的，但我一直看到的是登录页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:14:07.990

看起来您缺少以下内容：

```
<jdoc:include type="component" /> 
```

将此放置在您希望内容出现的位置（中间列）

# sql - 如何从 SQL 查询返回默认值

> ID：11503463
> 
> 赞同：47
> 
> 时间：2012-07-16T11:37:36.863
> 
> 标签：sql, sql-server, sql-server-2008-r2

如果查询不返回任何行，是否有任何简单的方法可以返回单个标量或默认值？

此刻我有这样的代码示例：

```
IF (EXISTS (SELECT * FROM Users WHERE Id = @UserId))  
    SELECT Name FROM Users WHERE Id = @UserId  
ELSE
    --default value
    SELECT 'John Doe' 
```

如何在不使用 IF-ELSE 的情况下以更好的方式做到这一点？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-16T11:49:47.127

假设名称不可为空并且`Id`是唯一的，因此最多可以匹配一行。

```
 SELECT 
    ISNULL(MAX(Name),'John Doe')
 FROM 
    Users 
 WHERE 
    Id = @UserId 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-16T11:40:09.590

尝试`ISNULL`或`COALESCE`：

```
SELECT ISNULL((SELECT TOP 1 Name FROM Users WHERE Id = @UserId), 'John Doe') 
```

如果不存在具有此 id 的用户，则内部选择将不返回任何内容，isnull 将解决这种情况。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-23T10:30:01.120

```
Try this 
`SELECT IFNULL(Name,'John Doe') FROM Users WHERE Id = @UserId)` 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-16T11:42:17.470

您可以使用以下构造删除 if 语句，但这并不一定意味着它更好。

```
SELECT Name FROM Users WHERE Id = @UserId UNION ALL 
SELECT 'John Doe' WHERE NOT EXISTS (SELECT Name FROM Users WHERE  Id = @UserId) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-16T11:43:17.670

试试 isnull

```
SELECT IsNULL(Name, 'John Doe')  FROM Users WHERE Id = @UserId 
```

编辑：

```
drop table users
go
create table users
(id int,name varchar(20))
go
insert into users select 1,'1'
 go
declare @userid int
set @userid = 1
select isnull(username.username, 'John Doe')
from (select @userid as userid) userid
outer apply (SELECT  name as username FROM Users WHERE Id = userid.userid ) username
--outer apply (SELECT  name as username FROM Users WHERE Id = @userid ) username 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-16T11:47:49.227

我想您可以使用 @@ROWCOUNT 来查看是否会返回任何内容。

```
SELECT Name FROM Users WHERE Id = @UserId  
if(@@ROWCOUNT = 0)
  SELECT 'John Doe' 
```

如果您期望一行，您也可以使用变量。

```
declare @name varchar(100)
set @name = (select top 1 name from users where id = @userId)
if(@name is null) set @name = 'John Doe'
select @name 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-16T13:41:04.683

我建议最好的方法是首先声明 @name 。然后根据用户 ID 设置此值，然后如果 @name 为空，则显示默认名称，否则显示名称...该方法将与任何其他方法一样有效，并且更具可读性。对于其他方法，任何其他用户都认为除非有很好的评论，否则很想知道发生了什么。

```
declare @userid int
set @userid = 1
select isnull(
               (select name from users where id = @userid),
               'John Doe'
               )
 go
--My preffered would be this one..
declare @name varchar(20),@userid int
set @userid = 1
select  @name =  name from users where id = @userid
select isnull(@name,'John Doe') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-09T16:59:12.053

如果查询应该最多返回一行，请使用具有默认值的联合，然后使用限制：

```
SELECT * FROM 
 (
  SELECT Name FROM Users WHERE Id = @UserId`
  UNION
  SELECT 'John Doe' AS Name --Default value
 ) AS subquery
LIMIT 1 
```

查询和默认值都可以有任意多的列，您不需要保证它们不为空。

# android - 在android中发送带有联系表格的邮件？

> ID：11503464
> 
> 赞同：1
> 
> 时间：2012-07-16T11:37:38.423
> 
> 标签：android, eclipse

有人可以帮我一个代码吗？我有一个联系表格，我希望您可以将表格连同联系表格的所有信息一起发送到 hotmail。如果您单击发送 (verzenden) 按钮，我想将表单发送到 serhildan_akdeniz@hotmail.com。

Java代码：

```
package com.MijnEersteApp;

import android.app.Activity;

import android.os.Bundle;

//import android.view.View;

import android.content.Intent;

//import android.widget.Button;

//import android.widget.AdapterView;

//import android.widget.AdapterView.OnItemSelectedListener;

//import android.widget.ArrayAdapter;

//import android.widget.Spinner;

//import android.widget.Toast;

import android.widget.EditText;

public class MijnEersteAppActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);    

        final EditText naamField = (EditText) findViewById(R.id.editTextNaam);
        //String naam = naamField.getText().toString();
        if(naamField.getText().toString().length()==0)  
        {           
         naamField.setError( "Vul uw naam in" );  
        }  

        final EditText mailField = (EditText) findViewById(R.id.editTextMail);
        //String mail = mailField.getText().toString();
        if(mailField.getText().toString().length()==0)  
        {           
         mailField.setError( "Vul uw email in" ); 

         final EditText mobielField = (EditText) findViewById(R.id.editTextMobiel);
         //String mobiel = mobielField.getText().toString();
         if(mobielField.getText().toString().length() != 10)  
         {           
          mobielField.setError( "Vul een geldig telefoonnummer in" );
          if(mobielField.getText().toString().length()==0)
          {
              mailField.setError("Vul uw telefoonnummer in");

        final EditText berichtField = (EditText) findViewById(R.id.editTextBericht);
        //String bericht = berichtField.getText().toString();
        if(berichtField.getText().toString().length()==0)  
        {           
         berichtField.setError( "Vul uw bericht in" );  
        }

       // final Spinner onderwerpSpinner = (Spinner) findViewById(R.id.SpinnerOnderwerpType);  
        //String onderwerpType = onderwerpSpinner.getSelectedItem().toString();

        Intent email = new Intent(Intent.ACTION_SEND); 
        email.putExtra(Intent.EXTRA_EMAIL, new String[]{"serhildan_akdeniz@hotmail.com"});           
        email.putExtra(Intent.EXTRA_SUBJECT, "Klacht"); 
        email.putExtra(Intent.EXTRA_TEXT, berichtField.getText()); 
        email.setType("message/rfc822");
        startActivity(Intent.createChooser(email, "Serhildan")); 

        }
}
  }
  }
} 
```

主要代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/contact" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/naam" />

    <EditText
        android:id="@+id/editTextNaam"
        android:layout_width="wrap_content"
        android:layout_height="26dp"
        android:ems="10"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/mobiel" />

    <EditText
        android:id="@+id/editTextMobiel"
        android:layout_width="wrap_content"
        android:layout_height="26dp"
        android:ems="10"
        android:inputType="phone" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/mail" />

    <EditText
        android:id="@+id/editTextMail"
        android:layout_width="wrap_content"
        android:layout_height="26dp"
        android:ems="10"
        android:inputType="textEmailAddress" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/onderwerp" />

    <Spinner
        android:id="@+id/spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:entries="@array/onderwerp_array"
        android:prompt="@string/onderwerp" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/bericht" />

    <EditText
        android:id="@+id/editTextBericht"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.25"
        android:ems="10"
        android:inputType="textMultiLine" />

    <Button
     android:id="@+id/buttonSend"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/verzenden"   
     />   

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:49:26.687

```
package com.MijnEersteApp;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.text.Html;  
import android.app.AlertDialog;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.Toast;

public class MijnEersteAppActivity  extends Activity implements OnClickListener, OnItemSelectedListener{
/** Called when the activity is first created. */
    EditText naamField,mailField ,mobielField,berichtField;
    Spinner subject;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);    

    naamField = (EditText) findViewById(R.id.editTextNaam);
    mailField = (EditText) findViewById(R.id.editTextMail);
    mobielField = (EditText) findViewById(R.id.editTextMobiel);       
    berichtField = (EditText)findViewById(R.id.editTextBericht);

    subject=(Spinner)findViewById(R.id.spinner);
    String subjects[]=new String[]{"Default","Klacht","Vraag","Opmerking","Applicatie"};
    subject.setOnItemSelectedListener(this);
    ArrayAdapter<String> sa = new ArrayAdapter<String>(getApplicationContext(),
        android.R.layout.simple_spinner_item, subjects);
    sa.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
    subject.setAdapter(sa);;        

    final Button buttonSend= (Button)findViewById(R.id.buttonSend);        
    buttonSend.setOnClickListener(this);
  }

public void onClick(View v) 
{
         if(naamField.getText().toString().length()==0)  
         {           
          naamField.setError( "Vul uw naam in" );  
         }  
         else if(mailField.getText().toString().length()==0)  
         {           
          mailField.setError( "Vul uw email in" ); 
         }
         else if(mobielField.getText().toString().length() != 10)  
         {           
           mobielField.setError( "Vul een geldig telefoonnummer in" );
         }
         else if(berichtField.getText().toString().length()==0)  
         {           
          berichtField.setError( "Vul uw bericht in" );  
         }
         else if(subject.getSelectedItemPosition()==0)  
         {           
          Toast.makeText(MijnEersteAppActivity.this,"Please select the Subject",Toast.LENGTH_SHORT).show(); 
         }
         else
         {  
            String body=
         "Name : "+naamField.getText().toString()+"<br>Mobile :"+mobielField.getText().toString()+
          "<br>Email :"+mailField.getText().toString()+"<br>Bericht :"+berichtField.getText().toString();  

            Intent email = new Intent(Intent.ACTION_SEND); 
            email.putExtra(Intent.EXTRA_EMAIL, new String[]{"serhildan_akdeniz@hotmail.com"});           
            email.putExtra(Intent.EXTRA_SUBJECT, subject.getSelectedItem().toString()); 
            email.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(body)); 
            email.setType("message/rfc822");
            startActivityForResult(Intent.createChooser(email, "Serhildan"),1); 
         }         
  }
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{

    new AlertDialog.Builder(MijnEersteAppActivity.this)
.setMessage("Your requested has been Accepted\nThank You")
.setCancelable(false)
.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int which) 
{
  dialog.cancel();
    }
})  
    .show();
}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}
} 
```

# iphone - 如何识别来自服务器的响应是 pdf 还是 url 或图像？

> ID：11503466
> 
> 赞同：0
> 
> 时间：2012-07-16T11:37:44.437
> 
> 标签：iphone, objective-c

在我的应用程序中，当我向服务器发送请求时，我将获得 url 或 pdf 或图像作为响应，并基于此显示结果（url-> webview、image-> imageview 等）。但我不知道如何确定响应是 url 还是 pdf 还是图像？

请问有谁知道我怎么能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:51:14.543

I would like to suggest you to use UIWebview for both case either it is PDF or image url from server.

```
[imgwebVw loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:strImgURL]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:50:04.030

我假设您确实使用 NSURLConnection 来下载您的文件。所以，实现这个委托方法......

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

... 将*响应*转换为*NSHTTPURLResponse并从**allHeaderFields*获取*Content-Type*值。

 *但这取决于您真正使用什么来下载文件。如果您确实使用了另一个类/框架/...，您就会明白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:14:11.653

如果你真的必须这样做，你可以阅读文件头，但我不建议这样做。[这](https://stackoverflow.com/questions/7164435/remote-image-size-without-downloading/10754296#10754296)是我编写的用于获取远程图像大小的类别，您可以对其进行调整以检测文件是否确实是图像。你可以做类似的流解析来搜索 PDF Header: %PDF-1.0 等。否则你会认为它是一个 url。*

# php - 如何将元素插入特定的数组位置？

> ID：11503467
> 
> 赞同：0
> 
> 时间：2012-07-16T11:37:50.863
> 
> 标签：php, arrays

我不能使用`array_splice`，因为我的元素是一个对象。它不是将其作为一个整体插入，而是逐个字段地插入。

**附言**

正如 Leigh 所说，我正在插入：

array_splice($original, 2, 0, $obj);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:44:00.630

如果您将对象直接传递给您，`array_splice`您将获得您描述的行为。

我认为你正在这样做：

```
$original = array(1, 2, 3, 4, 5);
$obj = new Object;

array_splice($original, 2, 0, $obj); 
```

当你应该这样做时：

```
array_splice($original, 2, 0, array($obj)); 
```

这样，您的对象将作为一个整体插入，而不是插入单个字段。

# shell - 这两个shell命令有什么区别？

> ID：11503468
> 
> 赞同：0
> 
> 时间：2012-07-16T11:37:54.573
> 
> 标签：shell, unix, scripting

有两个shell命令：

```
[[ ! -d $TRACEDIR/pattrace/rpt/.tracking ]] && mkdir $TRACEDIR/pattrace/rpt/.tracking  
[[ ! -d $TRACEDIR/pattrace/rpt/.tracking ]] && mkdir -p $TRACEDIR/pattrace/rpt/.tracking 
```

显然，这些命令之间的唯一区别是`-p`标志。但是这个标志在这种情况下做了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:39:44.797

从[mkdir 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?mkdir)：

```
-p, --parents
      no error if existing, make parent directories as needed 
```

换句话说，如果需要的目录不存在，它们将根据需要创建。如果目录已经存在，则不会导致错误。

这是查找[手册页](http://www.ma.utexas.edu/cgi-bin/man-cgi)的好地方（当然除了使用 google）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:39:12.567

`mkdir`使用该`-p`选项将创建指定路径的所有必要父目录，如果它们不存在（参见[手册页](http://pubs.opengroup.org/onlinepubs/7908799/xcu/mkdir.html)）。此外，`-p`如果目录本身已经存在，您将不会收到错误消息。

在您的特定情况下，第一个命令可能会失败，因为对完整路径的测试不够。如果仅存在，测试也将失败，`$TRACEDIR/`但随后`mkdir`将失败，因为它需要`$TRACEDIR/pattrace/rpt/`存在。

第二个命令将起作用，因为也会`mkdir -p`在“中间”创建所有缺少的目录。

# r - 设置多边形的背景颜色

> ID：11503472
> 
> 赞同：2
> 
> 时间：2012-07-16T11:38:07.130
> 
> 标签：r, plot

有没有办法设置多边形的背景颜色？我想得到这样的情节......

```
set.seed(1)
n <- 100
xx <- c(0:n, n:0)
yy <- c(c(0,cumsum(stats::rnorm(n))), rev(c(0,cumsum(stats::rnorm(n)))))

plot   (xx, yy, type="n", xlab="Time", ylab="Distance")
polygon(xx, yy, angle=45, density=10)
polygon(xx, yy+5, col="white")
polygon(xx, yy+5, angle=45, density=10, col="red") 
```

但理想情况下，没有倒数第二行来设置背景（我正在编写的函数中绘制多个多边形）。我可以在最后一行中使用一个论点来否定整个倒数第二行吗？干杯。

![丑陋](../Images/f15ad51310b9c53dc9aea43283203114.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:05:22.367

我的回答是“不” -`help(polygon)`让您`col`填充多边形，但如果使用`angle`and ，也可以将其用于线条着色颜色`density`。

这是您的笔式绘图仪一次只能拿起一支笔的旧时代的遗物......

做两次应该问题不大。编写您自己的函数，该函数接受一个多边形和两个颜色参数并调用`polygon`两次。

# python - 用于作为参数输入到我的 python 程序的端口号

> ID：11503476
> 
> 赞同：0
> 
> 时间：2012-07-16T11:38:19.237
> 
> 标签：python, eclipse, python-3.x, redmon

我的程序接受 3 个参数

脚本侦听的端口（默认值：9100） 保存到文件后将打印作业重定向到的 IP 地址 转发打印作业时使用的目标端口（默认值：9100）

需要从端口获取数据并使用其 IP 地址将其转发到目标打印机端口。我需要帮助来确定我应该输入的目标打印机的端口号。我知道打印机，它来自打印机属性的 IP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:52:45.440

Do you see Python listed when you select "Run As"?
Did you select the Python interpreter?

To configure your Eclipse follow these tips: [How to Configure Eclipse for Python](http://www.rose-hulman.edu/class/csse/resources/Eclipse/eclipse-python-configuration.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:02:43.317

为了在 Eclipse 中运行 python 代码，您需要安装 elcipse 的 pydev 插件，该插件可以在[pydev.org](http://pydev.org/)上找到，并且它的网站上有一个关于如何安装和配置它的好文档。

之后，您必须在 Eclipse 中创建一个 pydev 项目并使用 Python 解释器而不是 ant 构建来运行您的代码。ant build 是与 java 相关的东西。它与python代码无关。

# php - 生成具有不同选项的产品库存水平

> ID：11503478
> 
> 赞同：-1
> 
> 时间：2012-07-16T11:38:26.553
> 
> 标签：php, mysql, codeigniter, attributes, content-management-system

我正在为一家在线商店建立一个 cms，其中的产品最多可以有 5 种不同的选择，分别是尺寸、颜色、风味、材料和款式。我需要创建代码来为库存控制记录生成字段，它必须为每个可能的选项保留单独的记录，例如红色尺寸 8、蓝色尺寸 8、红色尺寸 9 条纹等。这是我当前的数据库结构：

> ## 产品
> 
> 产品编号
> 
> 价格、名称和描述等常用值
> 
> ## 产品属性
> 
> 属性 ID
> 
> 属性组 ID
> 
> 属性名称
> 
> ## 产品库存控制
> 
> 股票编号
> 
> 产品编号
> 
> 属性 1 ID
> 
> 属性 2 ID
> 
> 属性 3 ID
> 
> 属性 4 ID
> 
> 属性 5 ID
> 
> 库存水平

使用 codeigniter 和 php，编写此代码的最佳方法是什么？

**编辑**

这是我目前正在尝试的代码，但肯定有比1233行代码更好的方法吗？

```
public function genStockRecords($id)
{

    $this->db->select("ps_name");
    $query = $this->db->get("product_selects");
    $selectList = $query->result();

    foreach($selectList as $select)
    {

        $selectName = $select->ps_name;
        echo $selectName." - ";
        $$selectName = array();

    }
    unset($selectList);

    foreach($_SESSION['options'] as $option)
    {

        $option = explode("|", $option);
        ${$option[0]}[] = $option[1];

    }

    if(!empty($Size))
    {

        foreach($Size as $sizeValue)
        {

            $data['psc_opt_1'] = $sizeValue;

            if(!empty($Colour))
            {

                foreach($Colour as $colourValue)
                {

                    $data['psc_opt_2'] = $colourValue;

                    if(!empty($Flavour))
                    {

                        foreach($Flavour as $flavourValue)
                        {

                            $data['psc_opt_3'] = $flavourValue;

                            if(!empty($Material))
                            {

                                foreach($Material as $materialValue)
                                {

                                    $data['psc_opt_4'] = $materialValue;

                                    if(!empty($Style))
                                    {

                                        foreach($style as $styleValue)
                                        {

                                            $data['psc_opt_5'] = $styleValue;

                                            $this->db->select("psc_id");
                                            $this->db->where("psc_prod_id", $id);

                                            foreach($data as $field => $value)
                                            {

                                                $this->db->where($field, $value);

                                            }

                                            $query = $this->db->get("product_stock_control", 1);

                                            if($query->num_rows == 0)
                                            {

                                                $data["psc_prod_id"] = $id;
                                                $this->db->insert("product_stock_control", $data);

                                            }

                                        }

                                    }
                                    else
                                    {

                                        $data['psc_opt_5'] = null;

                                        $this->db->select("psc_id");
                                        $this->db->where("psc_prod_id", $id);

                                        foreach($data as $field => $value)
                                        {

                                            $this->db->where($field, $value);

                                        }

                                        $query = $this->db->get("product_stock_control", 1);

                                        if($query->num_rows == 0)
                                        {

                                            $data["psc_prod_id"] = $id;
                                            $this->db->insert("product_stock_control", $data);

                                        }                                               

                                    }

                                }

                            }
                            else
                            {

                                $data['psc_opt_4'] = null;

                                if(!empty($Style))
                                {

                                    foreach($style as $styleValue)
                                    {

                                        $data['psc_opt_5'] = $styleValue;

                                        $this->db->select("psc_id");
                                        $this->db->where("psc_prod_id", $id);

                                        foreach($data as $field => $value)
                                        {

                                            $this->db->where($field, $value);

                                        }

                                        $query = $this->db->get("product_stock_control", 1);

                                        if($query->num_rows == 0)
                                        {

                                            $data["psc_prod_id"] = $id;
                                            $this->db->insert("product_stock_control", $data);

                                        }

                                    }

                                }
                                else
                                {

                                    $data['psc_opt_5'] = null;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }                                               

                                }                                   

                            }

                        }

                    }
                    else
                    {

                        $data['psc_opt_3'] = null;

                        if(!empty($Material))
                        {

                            foreach($Material as $materialValue)
                            {

                                $data['psc_opt_4'] = $materialValue;

                                if(!empty($Style))
                                {

                                    foreach($style as $styleValue)
                                    {

                                        $data['psc_opt_5'] = $styleValue;

                                        $this->db->select("psc_id");
                                        $this->db->where("psc_prod_id", $id);

                                        foreach($data as $field => $value)
                                        {

                                            $this->db->where($field, $value);

                                        }

                                        $query = $this->db->get("product_stock_control", 1);

                                        if($query->num_rows == 0)
                                        {

                                            $data["psc_prod_id"] = $id;
                                            $this->db->insert("product_stock_control", $data);

                                        }

                                    }

                                }
                                else
                                {

                                    $data['psc_opt_5'] = null;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }                                               

                                }

                            }

                        }
                        else
                        {

                            $data['psc_opt_4'] = null;

                            if(!empty($Style))
                            {

                                foreach($style as $styleValue)
                                {

                                    $data['psc_opt_5'] = $styleValue;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }

                                }

                            }
                            else
                            {

                                $data['psc_opt_5'] = null;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }                                               

                            }                                   

                        }

                    }

                }

            }
            else
            {

                $data['psc_opt_2'] = null;

                if(!empty($Flavour))
                {

                    foreach($Flavour as $flavourValue)
                    {

                        $data['psc_opt_3'] = $flavourValue;

                        if(!empty($Material))
                        {

                            foreach($Material as $materialValue)
                            {

                                $data['psc_opt_4'] = $materialValue;

                                if(!empty($Style))
                                {

                                    foreach($style as $styleValue)
                                    {

                                        $data['psc_opt_5'] = $styleValue;

                                        $this->db->select("psc_id");
                                        $this->db->where("psc_prod_id", $id);

                                        foreach($data as $field => $value)
                                        {

                                            $this->db->where($field, $value);

                                        }

                                        $query = $this->db->get("product_stock_control", 1);

                                        if($query->num_rows == 0)
                                        {

                                            $data["psc_prod_id"] = $id;
                                            $this->db->insert("product_stock_control", $data);

                                        }

                                    }

                                }
                                else
                                {

                                    $data['psc_opt_5'] = null;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }                                               

                                }

                            }

                        }
                        else
                        {

                            $data['psc_opt_4'] = null;

                            if(!empty($Style))
                            {

                                foreach($style as $styleValue)
                                {

                                    $data['psc_opt_5'] = $styleValue;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }

                                }

                            }
                            else
                            {

                                $data['psc_opt_5'] = null;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }                                               

                            }                                   

                        }

                    }

                }
                else
                {

                    $data['psc_opt_3'] = null;

                    if(!empty($Material))
                    {

                        foreach($Material as $materialValue)
                        {

                            $data['psc_opt_4'] = $materialValue;

                            if(!empty($Style))
                            {

                                foreach($style as $styleValue)
                                {

                                    $data['psc_opt_5'] = $styleValue;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }

                                }

                            }
                            else
                            {

                                $data['psc_opt_5'] = null;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }                                               

                            }

                        }

                    }
                    else
                    {

                        $data['psc_opt_4'] = null;

                        if(!empty($Style))
                        {

                            foreach($style as $styleValue)
                            {

                                $data['psc_opt_5'] = $styleValue;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }

                            }

                        }
                        else
                        {

                            $data['psc_opt_5'] = null;

                            $this->db->select("psc_id");
                            $this->db->where("psc_prod_id", $id);

                            foreach($data as $field => $value)
                            {

                                $this->db->where($field, $value);

                            }

                            $query = $this->db->get("product_stock_control", 1);

                            if($query->num_rows == 0)
                            {

                                $data["psc_prod_id"] = $id;
                                $this->db->insert("product_stock_control", $data);

                            }                                               

                        }                                   

                    }

                }

            }

        }

    }
    else
    {

        $data['psc_opt_1'] = null;

        if(!empty($Colour))
        {

            foreach($Colour as $colourValue)
            {

                $data['psc_opt_2'] = $colourValue;

                if(!empty($Flavour))
                {

                    foreach($Flavour as $flavourValue)
                    {

                        $data['psc_opt_3'] = $flavourValue;

                        if(!empty($Material))
                        {

                            foreach($Material as $materialValue)
                            {

                                $data['psc_opt_4'] = $materialValue;

                                if(!empty($Style))
                                {

                                    foreach($style as $styleValue)
                                    {

                                        $data['psc_opt_5'] = $styleValue;

                                        $this->db->select("psc_id");
                                        $this->db->where("psc_prod_id", $id);

                                        foreach($data as $field => $value)
                                        {

                                            $this->db->where($field, $value);

                                        }

                                        $query = $this->db->get("product_stock_control", 1);

                                        if($query->num_rows == 0)
                                        {

                                            $data["psc_prod_id"] = $id;
                                            $this->db->insert("product_stock_control", $data);

                                        }

                                    }

                                }
                                else
                                {

                                    $data['psc_opt_5'] = null;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }                                               

                                }

                            }

                        }
                        else
                        {

                            $data['psc_opt_4'] = null;

                            if(!empty($Style))
                            {

                                foreach($style as $styleValue)
                                {

                                    $data['psc_opt_5'] = $styleValue;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }

                                }

                            }
                            else
                            {

                                $data['psc_opt_5'] = null;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }                                               

                            }                                   

                        }

                    }

                }
                else
                {

                    $data['psc_opt_3'] = null;

                    if(!empty($Material))
                    {

                        foreach($Material as $materialValue)
                        {

                            $data['psc_opt_4'] = $materialValue;

                            if(!empty($Style))
                            {

                                foreach($style as $styleValue)
                                {

                                    $data['psc_opt_5'] = $styleValue;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }

                                }

                            }
                            else
                            {

                                $data['psc_opt_5'] = null;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }                                               

                            }

                        }

                    }
                    else
                    {

                        $data['psc_opt_4'] = null;

                        if(!empty($Style))
                        {

                            foreach($style as $styleValue)
                            {

                                $data['psc_opt_5'] = $styleValue;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }

                            }

                        }
                        else
                        {

                            $data['psc_opt_5'] = null;

                            $this->db->select("psc_id");
                            $this->db->where("psc_prod_id", $id);

                            foreach($data as $field => $value)
                            {

                                $this->db->where($field, $value);

                            }

                            $query = $this->db->get("product_stock_control", 1);

                            if($query->num_rows == 0)
                            {

                                $data["psc_prod_id"] = $id;
                                $this->db->insert("product_stock_control", $data);

                            }                                               

                        }                                   

                    }

                }

            }

        }
        else
        {

            $data['psc_opt_2'] = null;

            if(!empty($Flavour))
            {

                foreach($Flavour as $flavourValue)
                {

                    $data['psc_opt_3'] = $flavourValue;

                    if(!empty($Material))
                    {

                        foreach($Material as $materialValue)
                        {

                            $data['psc_opt_4'] = $materialValue;

                            if(!empty($Style))
                            {

                                foreach($style as $styleValue)
                                {

                                    $data['psc_opt_5'] = $styleValue;

                                    $this->db->select("psc_id");
                                    $this->db->where("psc_prod_id", $id);

                                    foreach($data as $field => $value)
                                    {

                                        $this->db->where($field, $value);

                                    }

                                    $query = $this->db->get("product_stock_control", 1);

                                    if($query->num_rows == 0)
                                    {

                                        $data["psc_prod_id"] = $id;
                                        $this->db->insert("product_stock_control", $data);

                                    }

                                }

                            }
                            else
                            {

                                $data['psc_opt_5'] = null;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }                                               

                            }

                        }

                    }
                    else
                    {

                        $data['psc_opt_4'] = null;

                        if(!empty($Style))
                        {

                            foreach($style as $styleValue)
                            {

                                $data['psc_opt_5'] = $styleValue;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }

                            }

                        }
                        else
                        {

                            $data['psc_opt_5'] = null;

                            $this->db->select("psc_id");
                            $this->db->where("psc_prod_id", $id);

                            foreach($data as $field => $value)
                            {

                                $this->db->where($field, $value);

                            }

                            $query = $this->db->get("product_stock_control", 1);

                            if($query->num_rows == 0)
                            {

                                $data["psc_prod_id"] = $id;
                                $this->db->insert("product_stock_control", $data);

                            }                                               

                        }                                   

                    }

                }

            }
            else
            {

                $data['psc_opt_3'] = null;

                if(!empty($Material))
                {

                    foreach($Material as $materialValue)
                    {

                        $data['psc_opt_4'] = $materialValue;

                        if(!empty($Style))
                        {

                            foreach($style as $styleValue)
                            {

                                $data['psc_opt_5'] = $styleValue;

                                $this->db->select("psc_id");
                                $this->db->where("psc_prod_id", $id);

                                foreach($data as $field => $value)
                                {

                                    $this->db->where($field, $value);

                                }

                                $query = $this->db->get("product_stock_control", 1);

                                if($query->num_rows == 0)
                                {

                                    $data["psc_prod_id"] = $id;
                                    $this->db->insert("product_stock_control", $data);

                                }

                            }

                        }
                        else
                        {

                            $data['psc_opt_5'] = null;

                            $this->db->select("psc_id");
                            $this->db->where("psc_prod_id", $id);

                            foreach($data as $field => $value)
                            {

                                $this->db->where($field, $value);

                            }

                            $query = $this->db->get("product_stock_control", 1);

                            if($query->num_rows == 0)
                            {

                                $data["psc_prod_id"] = $id;
                                $this->db->insert("product_stock_control", $data);

                            }                                               

                        }

                    }

                }
                else
                {

                    $data['psc_opt_4'] = null;

                    if(!empty($Style))
                    {

                        foreach($style as $styleValue)
                        {

                            $data['psc_opt_5'] = $styleValue;

                            $this->db->select("psc_id");
                            $this->db->where("psc_prod_id", $id);

                            foreach($data as $field => $value)
                            {

                                $this->db->where($field, $value);

                            }

                            $query = $this->db->get("product_stock_control", 1);

                            if($query->num_rows == 0)
                            {

                                $data["psc_prod_id"] = $id;
                                $this->db->insert("product_stock_control", $data);

                            }

                        }

                    }
                    else
                    {

                        $data['psc_opt_5'] = null;

                        $this->db->select("psc_id");
                        $this->db->where("psc_prod_id", $id);

                        foreach($data as $field => $value)
                        {

                            $this->db->where($field, $value);

                        }

                        $query = $this->db->get("product_stock_control", 1);

                        if($query->num_rows == 0)
                        {

                            $data["psc_prod_id"] = $id;
                            $this->db->insert("product_stock_control", $data);

                        }                                               

                    }                                   

                }

            }   

        }   

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:10:49.343

这个问题比较笼统。您可以使用一些网站，如[formigniter.com](http://formigniter.org)或[thephpcode.com](http://thephpcode.com)来生成您的 CRUD 代码，然后从那里开始......

# javascript - 点击命令按钮后需要设置rich:simpleTogglePanel open=false

> ID：11503482
> 
> 赞同：0
> 
> 时间：2012-07-16T11:38:39.643
> 
> 标签：javascript, richfaces

需要设置rich:simpleTogglePanel open=false 单击命令按钮后下面是我的命令按钮编码，单击此命令按钮后我应该如何更改我的simpleTogglePanel open=false

```
<a4j:commandButton value="Search" status="waitSearchStatusSO" 
                    id="soSearchBtn"
                    reRender="soSearchResultsPanel,soErroMessages,searchSoKey"
                    action="#{soSearchAction.processAction}"
                    onmouseover="this.style.color='#d30100'"
                    onmouseout="this.style.color='#ffffff'"
                    onclick="javascript:validateSOsearch();"
                    oncomplete="javascript:Richfaces.hideModalPanel('processpanel');"
                    styleClass="btnBackground"
                    disabled="#{ viewScope.soform.waveSoExistFlag == 'false' ?false: !viewScope.soform.searchAccess}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T00:30:35.600

```
 if (SimpleTogglePanelManager.panels.get(panel.id).status == "true") {
    SimpleTogglePanelManager.toggleOnClient(event, panel.id);
  } 
```

有关更多详细信息，请参阅此处： [https ://community.jboss.org/thread/183160](https://community.jboss.org/thread/183160)

# javascript - Rails 应用程序的客户端数据加密/解密

> ID：11503484
> 
> 赞同：6
> 
> 时间：2012-07-16T11:38:44.627
> 
> 标签：javascript, ruby-on-rails, security, encryption

用户通过 Rails 应用互相发送消息并为其他用户发布私人信息。

目标是保护消息，因此系统管理员和数据库泄漏都无法破坏数据。使用接收方密钥的 Javascript 客户端加密，加密数据存储在数据库中并在接收方解密。密钥不存储在系统中。

有意义吗？有解决办法吗？非常感谢！

更新：我的意思是非对称密码学。每个用户有两个密钥：一个用于加密的公共密钥，一个用于解密的私有密钥。以及应用程序本身的密码。用户使用他的密码登录，创建一条消息，该消息使用收件人公钥（存储在系统中）加密客户端并保存在数据库中。收件人使用他的密码登录，然后输入他的私钥来解码消息。解密也是客户端，私钥不发送到服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T20:58:52.460

当然。使用这个[http://crypto.stanford.edu/sjcl/](http://crypto.stanford.edu/sjcl/)。特别看demo [http://bitwiseshiftleft.github.com/sjcl/demo/](http://bitwiseshiftleft.github.com/sjcl/demo/)

要记住的一件事是，您不存储密钥的唯一方法是让用户从密码中获取它们（这不应该是他们用于您网站的密码）。这很好，上面的库就是这样做的。但是，如果他们忘记了密码，就没有帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-02T01:21:16.643

在客户端，您可以使用[openpgp.js](https://github.com/openpgpjs/openpgpjs)。使用 lib 来创建密钥、签名、加密/解密等非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T21:26:14.347

可能是解决方案之一。 jsbn 库是在纯 JavaScript 中快速、可移植地实现大量数学，支持桌面和移动浏览器上的公钥加密和其他应用程序。

[http://www-cs-students.stanford.edu/~tjw/jsbn/](http://www-cs-students.stanford.edu/~tjw/jsbn/)

RSA 密码学演示[http://www-cs-students.stanford.edu/~tjw/jsbn/rsa2.html](http://www-cs-students.stanford.edu/~tjw/jsbn/rsa2.html)

# php - Setlocale 返回 false (WAMP)

> ID：11503485
> 
> 赞同：2
> 
> 时间：2012-07-16T11:38:45.913
> 
> 标签：php, localization, gettext, setlocale

我的项目中有本地化工作。工作意味着我的项目被翻译成`locale/sk`文件夹中的任何语言，`sk`因为斯洛伐克语是我的默认系统语言。

设置为任何其他语言都不起作用。我试过`$lang = 'cs'`, `'cz'`, `'en'`, `'en_UK'`,`'en_UK.utf8'`和其他的。尽管如此，仅获取`'sk'`文件夹中的翻译，并且该`setlocale()`函数仍然返回 false。我试图更改浏览器中的默认语言 - 没有效果。

这是我的代码：

```
putenv("LANG=$lang"); 
setlocale(LC_ALL, $lang); 
bindtextdomain("messages", realpath("../localem")); 
textdomain("messages");
...
_("Welcome!") 
```

我也试过这些：

```
putenv("LANGUAGE=$lang"); 
putenv('LC_ALL=$lang'); 
```

欢迎任何建议。

编辑：

```
$loc = array('nor');
if (setlocale(LC_ALL, $loc)==false) print ' false'; else print setlocale(LC_ALL, $loc); 
```

`'nor'`打印`Norwegian (Bokmĺl)_Norway.1252`,`'rus'`俄语，但`'svk'`打印 false 等等`'cze'`。

在列表中提到了所有这些：

[http://msdn.microsoft.com/en-us/library/cdax410z%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/cdax410z%28v=vs.80%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:57:11.227

Windows uses another format for the locale setting, see [MSDN: List of Country/Region Strings](http://msdn.microsoft.com/en-us/library/cdax410z%28v=vs.80%29.aspx).

You can send a list of locales to setlocale by sending in an array, such as to get Norwegian month names and time formats:

```
setlocale(LC_TIME, array('nb_NO.UTF-8', 'no_NO.UTF-8', 'nor')); 
```

Windows might however return strings in another encoding than UTF-8, so you might want to handle this manually (converting from cpXXXX to UTF-8).

# javascript - 使用 CSS3 PIE 设置输入 [type=submit] 样式时 IE8 崩溃

> ID：11503486
> 
> 赞同：1
> 
> 时间：2012-07-16T11:38:54.993
> 
> 标签：javascript, html, internet-explorer, css, css3pie

有时页面可以正常工作，您需要刷新页面才能看到它崩溃。

您可以在此处查看实时示例：[http](http://rcnhca.org.uk/sites/first_steps/account/) ://rcnhca.org.uk/sites/first_steps/account/（ie7 工作正常，我不支持 ie6）

我正在尝试使用以下值设置我的提交按钮的样式：

```
a.button, input.button {
    border: 2px solid #3A90A7;
    border-radius: 5px 5px 5px 5px;
    color: #202D32;
    display: block;
    float: left;
    height: 2.6em;
    line-height: 2.6em;
    margin: 0.667em 0.333em;
    padding: 0 1em;
    position: relative;
    text-decoration: none;
}

a.button:hover, input.button:hover{
    border: #202d32 solid 2px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
    -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
}

input[type=submit] {
    behavior: url(http://rcnhca.org.uk/sites/first_steps/PIE.htc);
    position: relative;
    -pie-poll:true;
}

a.button:hover, input.button:hover{
    -pie-box-shadow: none;
}

.button {
    -pie-background: linear-gradient(top, #ffffff 0%,#e5e5e5 100%);
}

.button.active {
    -pie-background: linear-gradient(top, #b7b7b7 0%,#b7b7b7 8%,#e5e5e5 8%,#ffffff 100%);
} 
```

最后，提交按钮的荣耀：

```
<input id="submitbtn" class="button omega" type="submit" value="Create your account" name="submit"> 
```

有谁知道可能导致这次崩溃的原因是什么？除了脚本导致页面运行缓慢之外，我没有得到任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T23:41:33.857

我遇到了同样的问题，我发现我的按钮在 IE8 中不起作用，因为我需要一个边框`none`，这使我的 CSS3PIE 崩溃了。我从`border-left: none;`to更改为`border-left-width: 0;`，它起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:40:41.507

我要检查和测试，但首先你需要了解一些关于 CSS3PIE 的知识

CSS3PIE 使用 VML -矢量标记语言 - 允许您使用 Javascript 绘制图形，它包括创建流行的 CSS3 类效果的功能，但有限。

因为它使用Javascript来绘制图形，它使用了大量的浏览器资源并导致它挂起并最终崩溃。

我以前使用 CSS3PIE，但在阅读[了 Paul Irish 的这个令人印象深刻的类比](http://paulirish.com/2011/tiered-adaptive-front-end-experiences/)后我放弃了它。您应该专注于调整您的设计以在 IE 上优雅地降级。如果您使用诸如[Modernizr](http://modernizr.com/)之类的东西来检查浏览器中缺少的功能并为其添加特定的样式会更好。

测试后会回来

**更新**

我在 IE8 中测试过，是的，它崩溃了。我认为你没有什么可以去的:(

我建议您使用纯浅灰色或使用背景渐变图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T07:53:43.503

通过更多的测试，我找到了这个问题的答案，它不是提交按钮，而是某种表单按钮，我给了它`font-size`。

如果我删除`font-size`元素上的属性，那么 IE8 将停止崩溃，我是一只快乐的兔子。

很抱歉，因为我没有包含具有字体大小的 CSS 部分（这是一个大文件，我对它感到震惊）。

# facebook - Iframe 中的 Facebook 身份验证请求

> ID：11503487
> 
> 赞同：0
> 
> 时间：2012-07-16T11:38:57.427
> 
> 标签：facebook, iframe, facebook-authentication

我想测试 Facebook 是否允许这种身份验证请求：

```
 <iframe src="  https://www.facebook.com/dialog/oauth?client_id=my_id&redirect_uri=my_uri&scope=email,publish_stream&type=web_server"></iframe> 
```

它对我有用。
为什么它有效？-**它应该工作吗？**- 点击劫持呢？
Facebook 何时会阻止与此类似的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:35:18.140

跨域 iframe 是官方的安全元素，你不能真正篡改它们。

您可以在其上浮动一个隐藏的 div 以拦截点击，但无法将其传递给 iframe 或“使”点击发生在 iframe 内。

# encoding - 使用 FFMPEG 对 HLS 进行编码会导致 DTS 降低

> ID：11503491
> 
> 赞同：2
> 
> 时间：2012-07-16T11:39:07.370
> 
> 标签：encoding, ffmpeg, h.264, video-encoding, http-live-streaming

我正在尝试为 HTS 实时流编码视频，但在使用 Apple Media Validator (mediastreamvalidator) 验证流时遇到问题。（我的测试文件：[http](http://dominicansinteractive.idoms.org/media/9536/playlist.m3u8) ://dominicansinteractive.idoms.org/media/9536/playlist.m3u8 ）

输出是：

```
--------------------------------------------------------------------------------
http://dominicansinteractive.idoms.org/media/9536/199/prog_index.m3u8
--------------------------------------------------------------------------------

Playlist Validation: 

    OK

Segments:

segment_00000.ts:

    ERROR: (-1) Decreasing DTS were detected in track 0
    ERROR: (-1) Decreasing DTS were detected in track 1

    Average segment duration: 8.07 seconds
    Average segment bitrate: 2155094.67 bps
    Average segment structural overhead: 206525.83 bps (9.58 %) 
```

* * *

第二段似乎没有问题：

```
[mpegts @ 0x1d78120] Format mpegts probed with size=2048 and score=100
[mpegts @ 0x1d78120] stream=0 stream_type=1b pid=100 prog_reg_desc=
[mpegts @ 0x1d78120] stream=1 stream_type=f pid=101 prog_reg_desc=
[mpegts @ 0x1d78120] File position before avformat_find_stream_info() is 0
[h264 @ 0x1d7c1c0] Current profile doesn't provide more RBSP data in PPS, skipping
[h264 @ 0x1d7c1c0] no picture 
[h264 @ 0x1d7c1c0] Current profile doesn't provide more RBSP data in PPS, skipping
   Last message repeated 3 times
[mpegts @ 0x1d78120] max_analyze_duration 5000000 reached at 5013333
[mpegts @ 0x1d78120] File position after avformat_find_stream_info() is 0 
```

* * *

对于 HLS 来说，这似乎是一个严重的问题，所以我正在寻找是否有办法解决这个问题。

在我得到的编码文件中查看 FFMPEG 时（电子邮件底部的编码器输出/命令）：

```
ffmpeg -loglevel 99 -i encoded.ts 
ffmpeg version N-37783-gdf3a96c Copyright (c) 2000-2012 the FFmpeg developers
 built on Jul  4 2012 07:44:52 with gcc 4.4.5
 configuration: --enable-gpl --enable-version3 --enable-nonfree --enable-libfaac --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libvpx --enable-libfaac --enable-nonfree
 libavutil      51\. 63.100 / 51\. 63.100
 libavcodec     54\. 32.100 / 54\. 32.100
 libavformat    54\. 14.100 / 54\. 14.100
 libavdevice    54\.  0.100 / 54\.  0.100
 libavfilter     3\.  0.101 /  3\.  0.101
 libswscale      2\.  1.100 /  2\.  1.100
 libswresample   0\. 15.100 /  0\. 15.100
 libpostproc    52\.  0.100 / 52\.  0.100
[mpegts @ 0x2023120] Format mpegts probed with size=2048 and score=100
[mpegts @ 0x2023120] stream=0 stream_type=1b pid=100 prog_reg_desc=
[mpegts @ 0x2023120] stream=1 stream_type=f pid=101 prog_reg_desc=
[mpegts @ 0x2023120] File position before avformat_find_stream_info() is 0
[h264 @ 0x20271c0] Current profile doesn't provide more RBSP data in PPS, skipping
[h264 @ 0x20271c0] no picture 
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 143280 in que
   Last message repeated 6 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 158640 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 175920 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 193200 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 210480 in que
   Last message repeated 7 times
[h264 @ 0x20271c0] Current profile doesn't provide more RBSP data in PPS, skipping
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 227760 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 245040 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 262320 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 279600 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 296880 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 314160 in que
   Last message repeated 7 times
[h264 @ 0x20271c0] Current profile doesn't provide more RBSP data in PPS, skipping
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 331440 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 348720 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 366000 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 383280 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 400560 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 417840 in que
   Last message repeated 6 times
[h264 @ 0x20271c0] Current profile doesn't provide more RBSP data in PPS, skipping
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 433200 in que
   Last message repeated 6 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 448560 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 465840 in que
   Last message repeated 6 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 481200 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 498480 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 515760 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 533040 in que
   Last message repeated 6 times
[h264 @ 0x20271c0] Current profile doesn't provide more RBSP data in PPS, skipping
[mpegts @ 0x2023120] first_dts 124080 not matching first dts 548400 in que
   Last message repeated 7 times
[mpegts @ 0x2023120] max_analyze_duration 5000000 reached at 5000000
[mpegts @ 0x2023120] File position after avformat_find_stream_info() is 0

And when at the first segmented file:
ffmpeg -loglevel 99 -i segment_00000.ts 
ffmpeg version N-37783-gdf3a96c Copyright (c) 2000-2012 the FFmpeg developers
 built on Jul  4 2012 07:44:52 with gcc 4.4.5
 configuration: --enable-gpl --enable-version3 --enable-nonfree --enable-libfaac --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libvpx --enable-libfaac --enable-nonfree
 libavutil      51\. 63.100 / 51\. 63.100
 libavcodec     54\. 32.100 / 54\. 32.100
 libavformat    54\. 14.100 / 54\. 14.100
 libavdevice    54\.  0.100 / 54\.  0.100
 libavfilter     3\.  0.101 /  3\.  0.101
 libswscale      2\.  1.100 /  2\.  1.100
 libswresample   0\. 15.100 /  0\. 15.100
 libpostproc    52\.  0.100 / 52\.  0.100
[mpegts @ 0x1a0b120] Format mpegts probed with size=2048 and score=100
[mpegts @ 0x1a0b120] stream=0 stream_type=1b pid=100 prog_reg_desc=
[mpegts @ 0x1a0b120] stream=1 stream_type=f pid=101 prog_reg_desc=
[mpegts @ 0x1a0b120] File position before avformat_find_stream_info() is 0
[mpegts @ 0x1a0b120] Invalid timestamps stream=0, pts=1920, dts=8589929312, size=2355
[mpegts @ 0x1a0b120] Invalid timestamps stream=0, pts=16320, dts=8589932912, size=3203
[h264 @ 0x1a0f1c0] Current profile doesn't provide more RBSP data in PPS, skipping
[h264 @ 0x1a0f1c0] no picture 
[h264 @ 0x1a0f1c0] Current profile doesn't provide more RBSP data in PPS, skipping
   Last message repeated 3 times
[mpegts @ 0x1a0b120] max_analyze_duration 5000000 reached at 5013333
[mpegts @ 0x1a0b120] File position after avformat_find_stream_info() is 0 
```

BASELINE 配置文件不会出现此问题，但 MAIN 会出现此问题。

我用于编码的命令是：

```
ffmpeg, -i, [path]/test.mov, -y, -f, mpegts, -acodec, aac, -strict, -2, -ar, 48000, -b:a, 128000, -s, 960x540, -vcodec, libx264, -b:v, 1200000, -aspect, 960:540, -r, 25, -level, 3.1, -vprofile, main, -flags, +loop, -cmp, +chroma, -partitions, +parti4x4+partp8x8+partb8x8, -subq, 5, -trellis, 1, -refs, 1, -coder, 0, -me_range, 16, -keyint_min, 25, -sc_threshold, 40, -i_qfactor, 0.71, -bt, 200k, -maxrate, 1200000, -bufsize, 1200000, -rc_eq, 'blurCplx^(1-qComp)', -qcomp, 0.6, -qmin, 10, -qmax, 51, -qdiff, 4, -level, 30, -g, 30, -async, 2, [path]/encoded.ts

08:40:29,843 DEBUG ~ FFMPEG(1):   libavutil      51\. 63.100 / 51\. 63.100
08:40:29,843 DEBUG ~ FFMPEG(1):   libavcodec     54\. 32.100 / 54\. 32.100
08:40:29,843 DEBUG ~ FFMPEG(1):   libavformat    54\. 14.100 / 54\. 14.100
08:40:29,843 DEBUG ~ FFMPEG(1):   libavdevice    54\.  0.100 / 54\.  0.100
08:40:29,843 DEBUG ~ FFMPEG(1):   libavfilter     3\.  0.101 /  3\.  0.101
08:40:29,844 DEBUG ~ FFMPEG(1):   libswscale      2\.  1.100 /  2\.  1.100
08:40:29,844 DEBUG ~ FFMPEG(1):   libswresample   0\. 15.100 /  0\. 15.100
08:40:29,844 DEBUG ~ FFMPEG(1):   libpostproc    52\.  0.100 / 52\.  0.100
08:40:30,033 DEBUG ~ FFMPEG(1): Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '[path]/test.mov':
08:40:30,033 DEBUG ~ FFMPEG(1):   Metadata:
08:40:30,033 DEBUG ~ FFMPEG(1):     major_brand     : qt  
08:40:30,033 DEBUG ~ FFMPEG(1):     minor_version   : 537199360
08:40:30,035 DEBUG ~ FFMPEG(1):     compatible_brands: qt  
08:40:30,035 DEBUG ~ FFMPEG(1):     creation_time   : 2011-12-05 10:54:24
08:40:30,036 DEBUG ~ FFMPEG(1):     timecode        : 00:00:00:00
08:40:30,036 DEBUG ~ FFMPEG(1):   Duration: 00:00:24.20, start: 0.000000, bitrate: 9912 kb/s
08:40:30,037 DEBUG ~ FFMPEG(1):     Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1920x1080, 9777 kb/s, 25 fps, 25 tbr, 25 tbn, 50 tbc
08:40:30,037 DEBUG ~ FFMPEG(1):     Metadata:
08:40:30,037 DEBUG ~ FFMPEG(1):       creation_time   : 2011-12-05 10:56:28
08:40:30,037 DEBUG ~ FFMPEG(1):       handler_name    : Apple Video Media Handler
08:40:30,038 DEBUG ~ FFMPEG(1):     Stream #0:1(eng): Audio: aac (mp4a / 0x6134706D), 48000 Hz, stereo, s16, 129 kb/s
08:40:30,038 DEBUG ~ FFMPEG(1):     Metadata:
08:40:30,038 DEBUG ~ FFMPEG(1):       creation_time   : 2011-12-05 10:56:28
08:40:30,038 DEBUG ~ FFMPEG(1):       handler_name    : Apple Sound Media Handler
08:40:30,038 DEBUG ~ FFMPEG(1):     Stream #0:2(eng): Data: none (tmcd / 0x64636D74)
08:40:30,038 DEBUG ~ FFMPEG(1):     Metadata:
08:40:30,038 DEBUG ~ FFMPEG(1):       creation_time   : 2011-12-05 10:56:28
08:40:30,039 DEBUG ~ FFMPEG(1):       handler_name    : Time Code Media Handler
08:40:30,039 DEBUG ~ FFMPEG(1):       timecode        : 00:00:00:00
08:40:30,092 DEBUG ~ FFMPEG(1): [graph 0 input from stream 0:0 @ 0x1c17180] w:1920 h:1080 pixfmt:yuv420p tb:1/25 fr:25/1 sar:0/1 sws_param:flags=2
08:40:30,092 DEBUG ~ FFMPEG(1): [output stream 0:0 @ 0x1c033a0] No opaque field provided
08:40:30,110 DEBUG ~ FFMPEG(1): [scaler for output stream 0:0 @ 0x1c18040] w:1920 h:1080 fmt:yuv420p sar:0/1 -> w:960 h:540 fmt:yuv420p sar:0/1 flags:0x4
08:40:30,110 DEBUG ~ FFMPEG(1): [graph 1 input from stream 0:1 @ 0x1c53440] tb:1/48000 samplefmt:s16 samplerate:48000 chlayout:0x3
08:40:30,110 DEBUG ~ FFMPEG(1): -async is forwarded to lavfi similarly to -af aresample=min_comp=0.001:min_hard_comp=0.100000:max_soft_comp=0.000042.
08:40:30,122 DEBUG ~ FFMPEG(1): [graph 1 aresample for input stream 0:1 @ 0x1c36880] chl:stereo fmt:s16 r:48000Hz -> chl:stereo fmt:flt r:48000Hz
08:40:30,142 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] using SAR=1/1
08:40:30,142 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] frame MB size (60x34) > level limit (1620)
08:40:30,142 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] DPB size (4 frames, 3133440 bytes) > level limit (3 frames, 3110400 bytes)
08:40:30,142 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] MB rate (51000) > level limit (40500)
08:40:30,170 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] using cpu capabilities: MMX2 SSE2Slow SlowCTZ
08:40:30,182 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] profile Main, level 3.0
08:40:30,235 DEBUG ~ FFMPEG(1): [mpegts @ 0x1be3540] muxrate VBR, pcr every 2 pkts, sdt every 200, pat/pmt every 40 pkts
08:40:30,235 DEBUG ~ FFMPEG(1): Output #0, mpegts, to '[path]/encoded.ts':
08:40:30,235 DEBUG ~ FFMPEG(1):   Metadata:
08:40:30,235 DEBUG ~ FFMPEG(1):     major_brand     : qt  
08:40:30,235 DEBUG ~ FFMPEG(1):     minor_version   : 537199360
08:40:30,235 DEBUG ~ FFMPEG(1):     compatible_brands: qt  
08:40:30,235 DEBUG ~ FFMPEG(1):     timecode        : 00:00:00:00
08:40:30,235 DEBUG ~ FFMPEG(1):     encoder         : Lavf54.14.100
08:40:30,235 DEBUG ~ FFMPEG(1):     Stream #0:0(eng): Video: h264, yuv420p, 960x540 [SAR 1:1 DAR 16:9], q=10-51, 1200 kb/s, 90k tbn, 25 tbc
08:40:30,235 DEBUG ~ FFMPEG(1):     Metadata:
08:40:30,235 DEBUG ~ FFMPEG(1):       creation_time   : 2011-12-05 10:56:28
08:40:30,235 DEBUG ~ FFMPEG(1):       handler_name    : Apple Video Media Handler
08:40:30,236 DEBUG ~ FFMPEG(1):     Stream #0:1(eng): Audio: aac, 48000 Hz, stereo, flt, 128 kb/s
08:40:30,236 DEBUG ~ FFMPEG(1):     Metadata:
08:40:30,236 DEBUG ~ FFMPEG(1):       creation_time   : 2011-12-05 10:56:28
08:40:30,236 DEBUG ~ FFMPEG(1):       handler_name    : Apple Sound Media Handler
08:40:30,236 DEBUG ~ FFMPEG(1): Stream mapping:
08:40:30,236 DEBUG ~ FFMPEG(1):   Stream #0:0 -> #0:0 (h264 -> libx264)
08:40:30,236 DEBUG ~ FFMPEG(1):   Stream #0:1 -> #0:1 (aac -> aac)

[...]

08:40:55,398 DEBUG ~ FFMPEG(1): video:3121kB audio:359kB subtitle:0 global headers:0kB muxing overhead 11.132085%
08:40:55,407 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] frame I:21    Avg QP:21.57  size: 88153
08:40:55,407 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] frame P:233   Avg QP:22.74  size:  5560
08:40:55,407 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] frame B:351   Avg QP:27.45  size:   141
08:40:55,407 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] consecutive B-frames: 21.7%  2.0%  3.0% 73.4%
08:40:55,407 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] mb I  I16..4: 54.5%  0.0% 45.5%
08:40:55,422 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] mb P  I16..4:  4.7%  0.0%  1.3%  P16..4: 24.6%  3.5%  0.8%  0.0%  0.0%    skip:65.1%
08:40:55,422 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] mb B  I16..4:  0.1%  0.0%  0.1%  B16..8:  0.5%  0.1%  0.0%  direct: 0.6%  skip:98.6%  L0:32.3% L1:47.1% BI:20.6%
08:40:55,422 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] coded y,uvDC,uvAC intra: 59.4% 5.8% 0.4% inter: 5.4% 3.0% 0.0%
08:40:55,422 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] i16 v,h,dc,p: 58% 16% 21%  4%
08:40:55,422 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 20% 21% 17%  5% 10%  7%  5%  5% 10%
08:40:55,422 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] i8c dc,h,v,p: 94%  3%  3%  0%
08:40:55,422 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] Weighted P-Frames: Y:13.7% UV:3.4%
08:40:55,422 DEBUG ~ FFMPEG(1): [libx264 @ 0x1be3cc0] kb/s:1056.61 
```

对于分段是：

```
ffmpeg, -i,[path]encoded.ts, -y, -c, copy, -flags, global_header, -map, 0, -f, segment, -segment_time, 10, -segment_list, [path]/fileList.txt, -segment_format, mpegts, [path]/segment_%05d.ts] 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:12:57.983

Apple Media Validator 报告的错误是合法的。其实TS文件是左右坏掉的。

问题文件 (segment_00000.ts) 在 PID 0x100 具有 H.264，在 0x0101 具有 AAC。PCR_PID 设置为 0x0100，即 AVC 流。

在文件偏移 564 处，它有以下 TS 数据包：

```
47 41 00 30 
07 50 FF FF F5 B0 7E 00 
00 00 01 E0 0D D8 80 C0 0A 31 00 01 0F 01 1F FF FF D6 C1 00 
```

第二行是适应字段，表示 PCR = 2576978793600。第三行是 PES 数据包，表示 PTS = 576000 和 DTS = 2576978793600，频率为 27Mhz。

由于 PTS 与 PCR 相距甚远，我们可以说这个 TS 数据包已损坏。

以下 PCR 在文件偏移 9212 处发出信号，PCR 为 576000，PTS 为 2736000，DTS 为 576000。现在，我们有了这些观察结果。

1.  PCR/PTS/DTS 现在有一些合理的值，但是......
2.  与之前的 DTS 相比，这个新的 DTS 更早，因此 Apple Media Validator 会报错。
3.  PCR 与 DTS 相同，表示 T-STD 下溢错误。

不幸的是，我不熟悉 ffmpeg，所以我不知道如何修复它。但是，仅通过查看此输出文件，我就感觉到使用中的 TS 多路复用器尚未达到最高质量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:04:11.427

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

推荐的所有视频质量的视频编解码器是 H.264 基线配置文件（这实际上很糟糕）所以可能是因为上述原因而建议的，或者更好地说，因为这些格式、内容等内部存在某种类型的不兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T15:22:08.057

对于 HLS，您应该使用 hls 多路复用器 (-f hls)，而不是通用段多路复用器。通用段复用器并不真正生成与 HLS 兼容的 TS 文件。

# magento - 在magento后端向客户视图添加新标签的问题

> ID：11503497
> 
> 赞同：1
> 
> 时间：2012-07-16T11:39:26.747
> 
> 标签：magento, adminhtml

我对 Magento 很陌生，我正在尝试向 Magento 后端的客户视图添加一个新选项卡。

我为它做了一个新的扩展/模块。以下是我的 etc/config.xml 的一些摘录：

```
<global>
    <blocks>
        <showidea>
            <class>Whatever_Extendcustomer_Block</class>
        </showidea>
    </blocks>
    <!-- ... -->
</global>
<adminhtml>
    <layout>
        <updates>
            <showidea>
                <file>whatever_extendcustomer.xml</file>
            </showidea>
        </updates>
    </layout>
</adminhtml> 
```

这里是whatever_extendcustomer.xml 文件的内容：

```
<adminhtml_customer_edit>
    <reference name="customer_edit_tabs">
        <action method="addTab">
            <name>extendcustomer_showidea</name>
            <block>extendcustomer/adminhtml_customer_showidea</block>
        </action>
    </reference>
</adminhtml_customer_edit> 
```

当然这个块是存在的，它扩展了**Mage_Adminhtml_Block_Template**并实现了**Mage_Adminhtml_Block_Widget_Tab_Interface**。

当我转到客户的详细信息时，我现在收到错误：错误的选项卡配置。在 Magento 的错误日志中：

> /var/www/vhosts/whatever/htdocs/app/Mage.php:594 中带有消息“无效块类型：Mage_Extendcustomer_Block_Adminhtml_Customer_Showidea”的异常“Mage_Core_Exception”

我认为这是问题所在，因为 Mage_Extendcustomer 是错误的。它应该是whatever_ ...但我不知道为什么它在前面加上Mage_ 而不是我的whatever_ 命名空间。

我希望有人能给我线索！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:03:53.963

您应该在布局文件中使用`showidea`，而不是：`extendcustomer`

```
<adminhtml_customer_edit>
    <reference name="customer_edit_tabs">
        <action method="addTab">
            <name>extendcustomer_showidea</name>
            <block>showidea/adminhtml_customer_showidea</block>
        </action>
    </reference>
</adminhtml_customer_edit> 
```

因为这是您在 blocks config 中定义的：

```
<blocks>
    <showidea>
        <class>Whatever_Extendcustomer_Block</class>
    </showidea>
</blocks> 
```

# php - Drupal：使用规则和自定义 php 代码编写分类参考字段

> ID：11503499
> 
> 赞同：2
> 
> 时间：2012-07-16T11:39:31.217
> 
> 标签：php, drupal-7, drupal-rules

我有一个像这样的分类词汇***类别***：

*   Kat01

    *   儿童01
    *   儿童02
*   卡特02

    *   儿童01
    *   儿童02

词汇表有一个自定义字段，其 ID 如下：957214d2-ce39-423d-aeb1-32f2e8b972f6，因此每个术语和父术语都有一个 ID（这不是 tid！）。

我有一个带有引用分类字段***kategorie***的内容类型。还有一个名为***kategorieTempId***的数组字段，其值与 kategorie-taxonomy 中的值相同。该数组中的 ID 数量表示术语和父术语的层次顺序。因此，如果节点应该位于 kategorie -Kat01 -> Child01 中，则 kategorieTempId 中将有两个 ID ***，***一个用于父项，一个用于子项。
现在我需要获取子术语的 ID，而不是从词汇表中获取分类术语并将其写入引用的术语字段。

到目前为止我所做的：
设置一个规则，在保存节点之前触发该规则，使用操作***Fetch entity by property***将分类术语从词汇表中获取到数组中。然后我添加一个动作***Execute custom PHP code***来查找子 tid 并将其写入一个名为***katReturn***的字段中。
这是我使用的代码（我是一个完全的 php 初学者，我不知道这是否是一种优雅的方式，但它有效）：

```
$anzahl = 0; //counter for hierarchy  
foreach ($kat_id_fetched as $kat_term) { // fill two arrays  
  $tid[$anzahl] = $kat_term->tid; // array with termID  
  $parentTerm_id[$anzahl] = db_query("SELECT {parent} FROM {taxonomy_term_hierarchy} WHERE tid = $kat_term->tid")->fetchField(); // array with parent-termID  
  ++$anzahl;  
};
foreach ($tid as $item) { // check if tid is parent  
  $anzahl = 0;  
  if (!in_array($item, $parentTerm_id)) {
    $kat_child = $item; // if not in parent-array, save tid
    $node->field_kat_return['und'][0]['value'] = $item;
    break;  
  };
  ++$anzahl;  
}; 
```

所以现在我知道子术语的 tid，我想把它写到参考分类领域，但我不明白。我尝试的代码是：

```
foreach ($kat_id_fetched as $kat) {
  if ($kat->tid == $returned_kat) {
    $node->field_kategorie[] = $kat;
    break;
  };
}; 
```

我希望，我说清楚了我想要什么。正如我之前所说，我的 php 技能是有限的，我感谢任何帮助，这为我指明了正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:36:08.443

解决方案比我想象的要简单。感谢@Clive，
我可以直接保存存储在 $item 中的术语 ID，而无需通过第三个 foreach 循环。

```
$node->field_kat_return['und'][0]['tid'] = $item; 
```

# c++ - c++算法模数

> ID：11503500
> 
> 赞同：-3
> 
> 时间：2012-07-16T11:39:32.567
> 
> 标签：c++, c, algorithm

我怎样才能轻松地检查`a <= b <= a+c`模数是否为 256（我们取的值`a`和`a+c`最接近的值`b`）？

基本上我的情况类似于 TCP 中的情况。TCP 期望接收的序列号 ( `b`) 不小于它上次接收到的 ( `a`)，但不大于它上次接收到的 + 偏移量 ( `c`)。问题是所有这些都发生在模数上（在 TCP 的情况下，它是 mod 32535，而在我的情况下，是 mod 256）。

抱歉，如果不清楚，请随时询问详细信息，我会更新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:23:03.487

一个简单的 C 函数可以做到这一点：

```
int is_valid (int old_val, int new_val, int offset, int width)
{
  if (new_val <= old_val)
    /* The only way this can happen is if there was wrap-around.
    OR if the `new_val' is invalid. If it is invalid, the next `if'
    will catch it.  */
    new_val += width;

  if (new_val > (old_val + offset))
    return 0;

  return 1;
} 
```

这很容易理解，我认为这才是真正重要的。

在你的情况下：`offset = 10`和`width = 256`。

**注意事项：**

1.  输入应该足够小`new_val + width`并且`old_val + offset`适合`int`.
2.  如果`old_val`和`new_val`相同，则认为输入无效。如果这不是您想要的，请更改`<=`为`<`.
3.  该函数假定`old_val`并且`new_val`已经是模宽度，即模256。它没有验证这一点。

当我使用以下输入运行它时：

```
int main (void)
{
  printf ("%d\n", is_valid (255, 9, 10, 256)); /* Pass.  */
  printf ("%d\n", is_valid (255, 10, 10, 256)); /* Fail.  */
  printf ("%d\n", is_valid (0, 10, 10, 256)); /* Pass.  */
  printf ("%d\n", is_valid (0, 11, 10, 256)); /* Fail.  */
  printf ("%d\n", is_valid (100, 109, 10, 256)); /* Pass.  */
  printf ("%d\n", is_valid (100, 110, 10, 256)); /* Pass.  */
  printf ("%d\n", is_valid (100, 111, 10, 256)); /* Fail.  */

  return 0;
} 
```

它提供以下输出：

```
1
0
1
0
1
1
0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:06:59.197

```
template <int N> bool moduloLess (int a, int b)
{
  // this is a group, even after modulo!
  int d=(b+N-a)%N;
  // use the representative in [-N/2-1, N/2] and check whether its greater
  // negative means that b was "smaller"
  // since we got the representative in [0, N-1], check whether we are greater than N/2 
  return d*2 <= N;  
} 
```

This should do it, if I got your question right...

For your updated question: it should work if you just use `moduloLess<256>(b-a, c)`, at least if c is smaller than 128.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:12:36.633

对于带有翻转的单调计数器或计时器，要确定是否`a`大于`b`256 模，您只需检查 if `a - b < 128 (mod 256)`。

a > b 的示例：

```
256 - 206 = 50 (mod 256)
  0 - 206 = 50 (mod 256)
 20 - 226 = 50 (mod 256) 
```

a < b 的示例：

```
206 - 256 = 206 (mod 256)
206 -   0 = 206 (mod 256)
226 -  20 = 206 (mod 256) 
```

唯一的技巧是`%`C 中的运算符可以给出否定的结果。更好的方法是转换为 1 字节类型（`unsigned char`或者`uint8_t`，也许）。

因此，对于您的情况，测试将是：

```
if ((unsigned char)(b - a) < 128 && (unsigned char)(a + c - b) < 128) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:27:50.330

定义一个宏，如：

```
#define COMPARE_MODULUS (a,b,c)  ((a)%256) <= ((b) % 256)? ((b) <= ((a)+(c))?true:false):false 
```

# java - JTable中的日期字段格式

> ID：11503506
> 
> 赞同：0
> 
> 时间：2012-07-16T11:39:53.057
> 
> 标签：java, swing

当我从访问数据库中检索一个日期字段并在 JTable 中显示它时，它是 yyyy-MM-dd 格式。我希望它是 dd-MM-yyyy。虽然我在 MS Access 中更改了格式，但它显示在面板中时，它仅在 yyyy-MM-dd 中。我怎样才能改变它？

日期字段是我通过查询检索到的众多字段之一。所以，我不明白将 SimpleDateFormatter 放在哪里并为每一行格式化。请帮帮我。提前致谢。

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import java.util.Locale;
import javax.swing.*;
import javax.swing.table.*;
import java.util.Date;
import java.sql.*;
import java.sql.ResultSetMetaData;
import java.text.*;

public class gc implements ActionListener
{
JComboBox cc=new JComboBox();
JFrame frame=new JFrame();
JTable table;
DefaultTableModel model;
String query;
int i;
JPanel panel=new JPanel();

public gc()
{
frame.setTitle("Composition Check");
frame.setSize(500,500);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setLayout(new BorderLayout());
JPanel p1=new JPanel();
p1.setLayout(new FlowLayout());

//Locale locale = Locale.getDefault();
//  System.out.println("Before setting, Locale is = " + locale); 
//Locale.setDefault(Locale.English);
//System.out.println("Before setting, Locale is = " + locale); 

try
{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection conn=DriverManager.getConnection("jdbc:odbc:vasantham","","");
Statement st=conn.createStatement();
ResultSet rs=st.executeQuery("select DISTINCT composition from try");

while(rs.next())
{
 cc.addItem(rs.getString("composition"));
}

conn.close();
}
catch(Exception e)
{
System.out.println(e);
}

p1.add(cc);
cc.addActionListener(this);
frame.add(p1,BorderLayout.NORTH);

frame.setVisible(true);
}

public class MyTableModel extends DefaultTableModel
{
public Class getColumnClass(int col) 
{
    if (col == 3) 
    {
        return java.util.Date.class;
    }
}
}

public void addTable(String query)
{
try
{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection conn=DriverManager.getConnection("jdbc:odbc:vasantham","","");
Statement st=conn.createStatement();
System.out.println(query);
ResultSet rs=st.executeQuery(query);
ResultSetMetaData md=rs.getMetaData();
int cols=md.getColumnCount();
//table=new JTable();
model=new DefaultTableModel();

model.addColumn("Purpose");
model.addColumn("Name");
model.addColumn("Manu");
model.addColumn("Expiry");
model.addColumn("Stock");
model.addColumn("Cost");
model.addColumn("Supplier");
model.addColumn("Supplier Number");
model.addColumn("Rack");

table=new JTable(new MyTableModel());

String[] tabledata=new String[cols];
int i=0;
SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");

while(rs.next())
{
for(i=0;i<cols;i++)
{
//if(i==3)
//{
 //System.out.println(rs.getObject(i+1).toString()); 
// tabledata[i]=formatter.format(rs.getObject(i+1).toString());
//}

 tabledata[i]=rs.getObject(i+1).toString();

}
model.addRow(tabledata);

}

panel.removeAll();
JScrollPane scroll = new JScrollPane(table); 
panel.setLayout(new BorderLayout());

panel.add(scroll,BorderLayout.CENTER);
frame.add(panel,BorderLayout.CENTER);
conn.close();
}
catch(Exception e)
{
System.out.println(e);
}
}

public void actionPerformed(ActionEvent evt)
{
String ac=(String)cc.getSelectedItem();
System.out.println(ac);

addTable("select * from try where composition='"+ac+"'");
frame.setVisible(true);
}

public static void main(String[] args)
{
new gc();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:52:04.927

You need to customize the table model to tell the JTable that the column is holding values of type Date:

```
@Override
public Class getColumnClass(int col) {
    if (col == 3) {
        return java.util.Date.class;
    }
    // return the appropriate class for every column
} 
```

This will make the JTable use a renderer formatting the date with the format associated to the current locale. If you need another format, you need to associate another renderer to the column, which formats the date as you want to.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:51:40.037

```
tabledata[i]=rs.getObject(i+1).toString(); 
```

This means you do not seem to care about the type of the column; everything is simply taken as a String.

2 ways to 'solve' your issue. Either read it as a date (when type == date) and then format appropriately or use a custom cell renderer on your table. E.g.: [http://www.exampledepot.com/egs/javax.swing.table/CustRend.html](http://www.exampledepot.com/egs/javax.swing.table/CustRend.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:54:13.300

以下代码有效！

```
while(rs.next())
{
for(i=0;i<cols;i++)
{
if(i==3)
{   
Date intr=(rs.getDate(i+1));
tabledata[i]=formatter.format(intr);
}
else
 tabledata[i]=rs.getObject(i+1).toString();
}
model.addRow(tabledata);
} 
```

感谢 JB Nizet 和 TheStijn，他们的想法提供了丰富的信息！

# jquery - 有没有更短/更有效的方式来编写这个表达式？

> ID：11503509
> 
> 赞同：0
> 
> 时间：2012-07-16T11:40:03.987
> 
> 标签：jquery

我有`nav`一些子`a`元素。我为这些元素添加了一个点击功能，并想知道点击了哪一个。因为可以有一个`span`内部（但不是必须）`a`-tag 以及我使用此代码来获取索引：

### HTML

```
<nav>
    <a href=""><span></span>Link text</a>
    <a href=""><span></span>Link text</a>
</nav> 
```

### JavaScript

```
var items = $('nav > a');

items.click( function(event) {

    var target  = ( $(event.target).is('span') ? $(event.target).parent() : $(event.target) ); 
    var key     = items.index( target );

    console.log( key );

    event.preventDefault();
}); 
```

所以我的问题是：有没有更好/更短/更快的方法来写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:43:53.213

由于点击将通过跨度传播到`<a/>`您应该能够使用`$(this).index()`：

```
var items = $('nav > a');

items.click( function(event) {
  var key = $(this).index();
  console.log(key);
}); 
```

# java - 如何将 EMF 模型保存到文件夹和文件的层次结构中

> ID：11503513
> 
> 赞同：0
> 
> 时间：2012-07-16T11:40:10.123
> 
> 标签：java, save, eclipse-emf, emf

我正在实现一个商业 RCP 应用程序，用户可以在其中创建这种格式的项目：

*   项目1
    *   子元素 1
    *   子元素2
        *   子子元素1
*   项目2
*   ……

等等

我正在使用 EMF 对数据域进行建模，并且我想保存数据。我希望为每个项目创建一个文件夹和文件的层次结构，例如文件夹 1 应该是 Project1，其中包含一个包含一些 xml 文件的文件夹 SubElement1。等等

我找到了保存 EMF 模型的示例，但我不知道如何将这个文件夹文件层次结构保存在一个 EMF 资源下......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:10:56.660

没有办法将单个资源分散到多个文件中。尽管如此，EMF 为您提供了一种通过 ResourceSet 处理模型的部分/多个实例的机制。更重要的是，您甚至可以在多个文件中的多个模型之间进行交叉引用。

给您的另一个建议是使用 Eclipse Resource API 来管理工作空间中文件夹和文件的创建，并让 EMF 处理所有模型内容。这就是我们在项目中的做法。

# java - 将 JPanel 保存为图像（不是文件，而是变量）

> ID：11503515
> 
> 赞同：1
> 
> 时间：2012-07-16T11:40:17.410
> 
> 标签：java, image, swing, save, jpanel

好的，我的问题很简单：我制作了 Paint 应用程序，并且我想提供某种“撤消”功能。我阅读了有关撤消管理器等的信息，但这种方法对我来说似乎很难理解，所以我决定自己设计。我的想法很简单：因为我在 JPanel 上绘图，所以我只会在进行任何绘图操作之前保存其当前内容。撤消按钮只会恢复上一个。

问题是：我无法“恢复”保存的图像并将其放在 JPanel 上。我很困惑，因为我已经在硬盘驱动器上“保存”了当前图像，并从硬盘驱动器“打开”了任意图像。两者都工作得很好。

不幸的是，为我的“撤消”系统尝试完全相同的方法不起作用。

查看代码：（为简化起见，我手动“保存”当前图片 -> 用于测试目的）

```
public class PictureEdit { //class for saving the current JPanel drawing for undo
    public BufferedImage saveBI;
    public Graphics2D saveG2D;
}

public void actionPerformed(ActionEvent e) { //action for "UNDO" button, not working
    //drawingField - instance of JPanel
    //pe - instance of PictureEdit class
    drawingField.setBufferedImg(drawingField.pe.saveBI);
    drawingField.updateArea(drawingField.getBufferedImg());            
}

public void actionPerformed(ActionEvent e) { //action for manual "save" (for undo)
    drawingField.pe.saveBI=drawingField.getBufferedImg();
    drawingField.pe.saveG2D=(Graphics2D)drawingField.getBufferedImg().getGraphics();

} 
```

现在是我的工作解决方案的示例，但与 HDD 上的 wok witk 文件有关：

```
public void actionPerformed(ActionEvent e){ //Opening file from harddrive - works fine
    JFileChooser jfc = new JFileChooser();
    int selection = jfc.showOpenDialog(PaintUndo.this);
    if (selection == JFileChooser.APPROVE_OPTION){                
        try {
           drawingField.setBufferedImg(ImageIO.read(jfc.getSelectedFile()));
           drawingField.updateArea(drawingField.getBufferedImg());

        } catch (IOException ex) {
           Logger.getLogger(PaintUndo.class.getName()).log(Level.SEVERE, null, ex);
           JOptionPane.showMessageDialog(PaintUndo.this, "Could not open file");
        }
    }                 
}

public void actionPerformed(ActionEvent e) { //Saving to harddrive - works fine
     int n = JOptionPane.showConfirmDialog(PaintUndo.this, "Are you sure you want to save?", "Saving image...", JOptionPane.OK_CANCEL_OPTION);
     if (n == JOptionPane.YES_OPTION){
        JFileChooser jfc = new JFileChooser();
        int nn = jfc.showSaveDialog(PaintUndo.this);
        if (nn == JFileChooser.APPROVE_OPTION){                       
           File saveFile = new File(jfc.getSelectedFile()+".bmp");
           try {
              ImageIO.write(drawingField.getBufferedImg(), "bmp", saveFile);
           } catch (IOException ex) {
              Logger.getLogger(PaintUndo.class.getName()).log(Level.SEVERE, null, ex);
              JOptionPane.showMessageDialog(PaintUndo.this, "Error while saving file");
           }                       
        }
     }
 } 
```

以防万一有人好奇：`updateArea`函数（表示提到的扩展 JPanel 类的成员`drawingField`）：

```
public void updateArea(BufferedImage img){ //it is just resizing the current picture (if necessary) and then assigns the new Graphics.
    area.height=img.getHeight();
    area.width=img.getWidth();
    this.setPreferredSize(area);
    g2d = (Graphics2D)this.getGraphics();
} 
```

基本上程序是完全相同的，处理文件是可以的，而当我对变量进行操作时，我无法保存和恢复图像......可能有什么问题？有任何想法吗？`drawingField`当我使用 Undo/UndoSave 按钮时，我的 JPanel ( )中绝对没有任何变化

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:00:29.330

在您显示的代码中，您正在复制对图像的引用，但两个引用仍然指向同一个图像对象 - 如果您执行任何不重新分配引用 ( `=`) 的操作，它将反映在*两个*引用中！为了保存旧版本的图像，您需要复制实际对象，而不仅仅是引用。

我确实建议使用 Java 已建立的撤消管理方法，但如果您想继续使用自己的方法，您应该查看以下方法：

```
//BufferedImage image;
Raster raster = image.getData(); // save
image.setData(raster); // restore 
```

# android - 在 Android 中的应用内捆绑文件

> ID：11503519
> 
> 赞同：0
> 
> 时间：2012-07-16T11:40:26.467
> 
> 标签：android, file, bundle, apk

我想要做的是让用户按下某种按钮，并在该按钮的方法内我希望系统在文件查看器中打开一个文件（在本例中为 .docx 文件），这必须是通过意图完成，但应该如何编码以及我将 .docx 文件放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:47:14.893

Android 没有用于查看**.docx**文件的内置功能。

为了那个原因，

您的 android 设备应安装**.docx**查看器（第三方，如 Documents To Go、Smart Office、Quickoffice）应用程序，然后您可以使用 .docx 查看器打开该文件`Intent`。

就像是，

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
String type = "application/msword";
intent.setDataAndType(Uri.fromFile(docx file), type);
startActivity(intent); 
```

但是如果没有安装任何**.docx**查看器，那么您可以指导用户首先使用 Android Market 安装该应用程序，然后在下载该应用程序后，您可以在其中打开您的**.docx**文件。

或者您可以使用第三方库将**.docx查看器功能集成到应用程序中。**我认为**Apache 的 docx4j**在 java 中。

# c# - 如何使用 C# 将“不规则”Excel 数据导入 MySQL

> ID：11503522
> 
> 赞同：1
> 
> 时间：2012-07-16T11:40:33.813
> 
> 标签：c#

我有一个项目，我必须将文档中的多个 Excel 工作表中的数据导入 MySQL 数据库。我所看到的教程假设采用一种简单的方法，将每个单元格插入到数据库中的单独列中。我的情况有点不同，因为每个单元格都有不同的数据需要进入数据库中的单独列。一个例子如下所示：

```
 GST 111             GST 112              GST 114    
                 2                     2                   2

03/ED/SE        54                     52                 53            Bio111
                                                                         54 
```

如上所示，“GST 111”的标题代表课程名称，而“03/ED/SE”的​​值代表注册号。54,52 和 53 的值代表注册号为“03/ED/SE”的​​学生在代码为“GST 111”、“GST 112”和“GST 114”的课程中的分数。当值时事情变得有点棘手

```
 "Bi0111"
                        54 
```

到达了。这是因为在这种情况下，该列包含课程代码的值，即“Bio111”和分数，即“54”......这发生在每个学生有结转课程的情况下。挑战在于能够将“Bio111”插入课程代码列和课程分数 54 列，两者都在同一列的同一单元格中。我的代码是这样的：

```
 protected void insertdata_Click(object sender, EventArgs e)
{
    OleDbConnection oconn = new OleDbConnection
    (@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + 
    Server.MapPath("example.xls") + ";
    Extended Properties=Excel 8.0");//OledbConnection and 
            // connectionstring to connect to the Excel Sheet
    try
    {
        //After connecting to the Excel sheet here we are selecting the data 
   //using select statement from the Excel sheet
   OleDbCommand ocmd = new OleDbCommand("select * from [Sheet1$]", oconn);
            oconn.Open();  //Here [Sheet1$] is the name of the sheet 
            //in the Excel file where the data is present
        OleDbDataReader odr = ocmd.ExecuteReader();
        string fname = "";
        string lname = "";
        string mobnum = "";
        string city = "";
        string state = "";
        string zip = "";
        while (odr.Read())
        {
            fname = valid(odr, 0);//Here we are calling the valid method
            lname = valid(odr, 1);
            mobnum = valid(odr, 2);
            city = valid(odr, 3);
            state = valid(odr, 4);
            zip = valid(odr, 5);
            //Here using this method we are inserting the data into the database
       insertdataintosql(fname, lname, mobnum, city, state, zip);
        }
        oconn.Close();
    }
    catch (DataException ee)
    {
        lblmsg.Text = ee.Message;
        lblmsg.ForeColor = System.Drawing.Color.Red;
    }
    finally
    {
        lblmsg.Text = "Data Inserted Sucessfully";
        lblmsg.ForeColor = System.Drawing.Color.Green;
    } 
```

此代码适用于具有正确结构化数据的单张纸，但我所展示的情况并非如此。（我在某些单元格中有多张纸和多个数据）。我该如何解决这个问题？谢谢。

# css - jqGrid 编辑表单对话框模态背景移动页面的其余部分

> ID：11503523
> 
> 赞同：1
> 
> 时间：2012-07-16T11:40:35.677
> 
> 标签：css, jqgrid, internet-explorer-9

我正在使用 jqGrid 1.7.3。对于操作行，我使用 jqGrid 的表单编辑功能（模式对话框）。在 Firefox 和 Chrome 中一切正常，但如果涉及到 Internet Explorer……我该说什么。

实际上，编辑窗口显示得很好，但对话框后面的背景并没有定位在页面的其余部分上，而是向下移动了一切！

我实际上为此更改了css，但没有任何反应。因此，背景似乎是通过 jqgrid 而不是任何 css decleration 获取其 css 信息。

有人知道如何正确设置css吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:23:01.847

我不确定你是否已经解决了这个问题，但我建议检查浏览器的呈现模式，看看它是否在“怪癖”模式下呈现 HTML。我遇到了同样的问题，结果证明我的 DOCTYPE 声明是错误的，导致 Internet Explorer 采用了“怪癖”渲染模式。

可能有更简单的方法可以做到这一点，但我通过使用安装了 DebugBar 工具栏的 IETester 程序加载页面来确定呈现模式。然后通过查看 DebugBar 上的 info 选项卡，指定了呈现模式。

一旦我确认它在怪异模式下运行，我查看了不同的 DOCTYPE 声明选项。一旦我将 DOCTYPE 设置为

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

页面加载正常，JQgrid 表单编辑对话框也正常工作。IETester 中指定的渲染模式显示“标准模式 IE8”。

# sql - 如何创建条件唯一约束

> ID：11503524
> 
> 赞同：0
> 
> 时间：2012-07-16T11:40:35.533
> 
> 标签：sql, sql-server, sql-server-2005

有一个表：`Table1`其中一列`Code`接受可为空值我们如何确保值对于不可为空的值是唯一的，除了开头的代码`'A'`最多可以重复两次？

**表格1**

```
Id |  Code
---------- 
1  |  NULL   --[ok]
2  |  A123   --[ok]
3  |  A123   --[ok]
4  |  B100   --[ok] 
5  |  C200   --[ok]
6  |  B100   --[not ok already used]
7  |  NULL   --[ok] 
```

我尝试的是创建一个索引视图，该解决方案适用于`NULL`值但不适用于我提到的第二种情况（实际上跳过）

```
Create view v_Table_unq with schemabinding as( 
         select code from 
         dbo.Table1 
         where code is not null and code not like 'A%'
)
go
create unique clustered index unq_code on v_Table_unq(code) 
```

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:54:07.103

## 表创建

```
CREATE TABLE CheckConstraint
(
  Name VARCHAR(50),
)
GO 
```

* * *

## 函数创建

```
create FUNCTION CheckDuplicateWithA() RETURNS INT AS BEGIN

  DECLARE @ret INT  =0 ;
  SELECT @ret = IsNull(COUNT(Name), 0) FROM CheckConstraint WHERE Name like '[A]%' group by Name having COUNT(name) >= 1;
  RETURN IsNUll(@ret, 0);
END;

GO

create FUNCTION CheckDuplicateOtherThenA() RETURNS INT AS BEGIN

  DECLARE @ret INT  =0 ;
  SELECT @ret = IsNull(COUNT(Name), 0) FROM CheckConstraint WHERE Name not like '[A]%' group by Name having COUNT(name) >= 1;
  RETURN IsNUll(@ret, 0);
END; 
```

* * *

```
GO 
```

## 约束

```
alter TABLE CheckConstraint
  add CONSTRAINT CheckDuplicateContraintWithA CHECK (NOT (dbo.CheckDuplicateWithA() > 2));
go

alter TABLE CheckConstraint
  add CONSTRAINT CheckDuplicateConmstraintOtherThenA CHECK (NOT (dbo.CheckDuplicateOtherThenA() > 1));
go 
```

* * *

## 结果集

```
insert into CheckConstraint(Name)Values('b')  -- Passed
insert into CheckConstraint(Name)Values('b')  -- Failed

insert into CheckConstraint(Name)Values('a')  -- Passed
insert into CheckConstraint(Name)Values('a')  -- Passed
insert into CheckConstraint(Name)Values('a')  -- Failed 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T11:52:15.493

为什么你想要一个独特的约束？为什么不能在将数据插入表中的过程中添加此逻辑？如果您没有单点插入/更新等？为什么不能将其放入触发器中或之后？那会更好，因为您可以处理它很好并且可以返回正确的错误消息。这将比拥有会增加开销的索引视图具有更少的开销。如果您需要对不以“A”开头的记录进行唯一约束，那么您可以拥有一个持久列并拥有一个对此的唯一约束。

当然，您将有使用索引持久化计算列的开销。但是如果您只需要唯一的约束，您可以使用它。对于以“A”开头的值，这可能是一个空值。

# c# - Mono - DownloadProgressChanged - 错误？

> ID：11503525
> 
> 赞同：0
> 
> 时间：2012-07-16T11:40:38.400
> 
> 标签：c#, mono, webclient

我对 Mono 中的 WebClient 的 DownloadProgressChaned 事件有疑问。BytesReceived 属性似乎不起作用。它总是返回一个对我来说似乎是随机的数字，并且与接收到的字节的实际计数无关。

此代码在 .NET 中运行良好，但在 Mono（2.10.8，Windows）中，每当 DownloadProgressChanged 被触发时，BytesReceived 都是“随机的”...

ProgressPercentage 也不起作用。

```
using (WebClient wc = new WebClient())
{
            AutoResetEvent r = new AutoResetEvent(false);
            wc.DownloadProgressChanged += (sender, e) =>
            {
                Console.WriteLine(string.Format("Received: {0} of {1} ({2} %)", e.BytesReceived, e.TotalBytesToReceive, e.ProgressPercentage));
            };
            wc.DownloadDataCompleted += (sender, e) =>
            {
                if (e.Error != null)
                {
                    Console.WriteLine(string.Format("Error: {0}", e.Error.Message));
                }
                else
                {
                    Console.WriteLine("OK");
                }
                r.Set();
            };
            string url = @"http://someurl/somefile.pdf";
            wc.DownloadDataAsync(new Uri(url));
            r.WaitOne();
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T23:30:35.160

这看起来像是一个已经修复的错误：[https](https://bugzilla.xamarin.com/show_bug.cgi?id=2482) ://bugzilla.xamarin.com/show_bug.cgi?id=2482 。

我相信最新的 Mono (2.10.9) 包含此修复程序。

# wordpress - Wordpress 更新错误

> ID：11503527
> 
> 赞同：-1
> 
> 时间：2012-07-16T11:40:46.990
> 
> 标签：wordpress, content-management-system, wordpress-theming

我刚去更新我的一个 wordpress 网站。这是我第一次更新 wordpress 网站。

当我去更新时，更新屏幕挂了 20 分钟，说“正在安装”。网站主页仍然显示维护通知。我查了一下，共识似乎是 ftp 到该站点并删除“维护”文件。我这样做了，现在主页显示：

`Fatal error: Call to undefined function get_front_page_template()......`

当我访问 mysite/wp-admin 时，它说“wordpress 已经安装，你现在需要更新你的数据库”。所以我按下了“更新数据库”按钮，出现错误：

`Fatal error: Class 'WP_Theme' not found in.....`

我有一种感觉，我做了一件非常愚蠢的事情。谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:12:58.583

通过 FTP 备份您当前的错误设置。

[然后从Release Archive](http://wordpress.org/download/release-archive/)下载您正在使用的 wordpress 版本，并使用 FTP替换您`wp-admin`和文件夹的文件。`wp-include`

这应该使您的 wordpress 安装再次工作。

数据库的问题可能是因为更新没有完成。

# c# - c#.net中onstart方法所需的逻辑

> ID：11503528
> 
> 赞同：-3
> 
> 时间：2012-07-16T11:40:50.183
> 
> 标签：c#

在使用 c# 的窗口服务时，我想根据我的配置标签运行服务，实际上我将在 app.config 中设置值的三个标签，如下所述

```
<add key ="FIREHOST_TIME" value ="5" ></add>
<add key ="SETDAYS" value ="3" ></add>
<add key ="RUN_NOW" value ="1" ></add> <!-- 0=no, 1=yes--> 
```

如果假设 RUN_NOW 值为 1，

当服务启动时，它现在必须工作，下一个实例应该基于 SETDAYS 标签运行。

如果假设 RUN_NOW 值为 0，

当服务启动时，它不应该做它应该等待 SETDAYS 到来的工作，然后下一个实例应该为每个设置的天标签运行。

下面我通过代码粘贴：

```
 protected override void OnStart(string[] args)
    {
     DateTime tenAM = DateTime.Today.AddHours(FIREHOST_TIME);

            if (DateTime.Now > tenAM)
                tenAM = tenAM.AddDays(SETDAYS);

            // calculate milliseconds until the next 10:00 AM.  
            int timeToFirstExecution = (int)tenAM.Subtract(DateTime.Now).TotalMilliseconds;

            // calculate the number of milliseconds in 24 hours.   
            int timeBetweenCalls = (int)new TimeSpan(24, 0, 0).TotalMilliseconds;

            TimerCallback methodToExecute = kickstart;

            // start the timer.  The timer will execute "ProcessFile" when the number of seconds between now and   
            // the next 10:00 AM elapse.  After that, it will execute every 24 hours.   
            System.Threading.Timer timer = new System.Threading.Timer(methodToExecute, null, timeToFirstExecution, timeBetweenCalls);

         } 
```

所以现在我必须使用标签帮助 RUN_NOW 并实现逻辑，请建议如何执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:43:11.010

试试这样。检查[AppSettings的文档](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)

```
var yourAppKey = ConfigurationManager.AppSettings.Get("RUN_NOW"); 
                      or 
var yourAppKey = ConfigurationManager.AppSettings["RUN_NOW"]; 
 // do something with yourAppKey 
```

# java - 具有常量乘法/除法的 Java 双精度

> ID：11503531
> 
> 赞同：5
> 
> 时间：2012-07-16T11:41:04.853
> 
> 标签：java, double, bytecode

> **可能的重复：**
> [在 java 中使用 Doubles 保持精度](https://stackoverflow.com/questions/322749/retain-precision-with-doubles-in-java)

你知道Java中这两种操作的区别吗？

```
final double m1 = 11d / 1e9; // gives 1.1e-8
final double m2 = 11d * 1e-9; // gives 1.1000000000000001e-8 
```

我在生成的字节码中看到 m2 的预编译结果已经不是我所期望的。
在`javap -verbose -c`我的输出中可以看到以下值：

```
const #3 = double   1.1E-8d;
[...]
const #6 = double   1.1000000000000001E-8d; 
```

当我在其他表达式中使用 m1 或 m2 时，我没有相同的结果。

当我在 C 中尝试同样的事情时，m1 和 m2 严格来说是 1.1e-8

我认为我的问题在于 java 处理双精度计算的方式，但我无法解释自己错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:43:45.647

Java 和 C 没有区别，都尊重 IEEE 浮点标准。唯一的区别可能是您打印它的方式。确切的数字 1.1e-8 不能表示为`double`. 输出的差异可能归因于有关表示误差如何累积的细节，以及用于打印结果的舍入方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:02:37.163

您所拥有的区别在于 1e9 是完全可表示的，而 1e-9 是不完全可表示的。一个小的表示错误会导致您可以看到的算术错误。

```
System.out.println(new BigDecimal(1e9));
System.out.println(new BigDecimal(1e-9)); 
```

印刷

```
1000000000
1.0000000000000000622815914577798564188970686927859787829220294952392578125E-9 
```

区别不在于您是否使用过，`*`或者`/`您在一种情况下使用了整数，而在另一种情况下使用了分数。

```
System.out.println(11 * 1e9);
System.out.println(11 * 1e-9); 
```

印刷

```
1.1E10
1.1000000000000001E-8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:01:11.590

如果您使用 BigDecimal 如下：

```
BigDecimal a=new BigDecimal(1e-9);
BigDecimal b=new BigDecimal(11);
System.out.println(a.multiply(b).toString()); 
```

你会看到你的号码是

```
1.10000000000000006850975060355784206078677556206457666121423244476318359375E-8 
```

JVM 将您的数字四舍五入并将其更改为：

```
1.1000000000000001e-8 
```

# c++ - c++ NULL 终止的数组段错误

> ID：11503533
> 
> 赞同：-1
> 
> 时间：2012-07-16T11:41:27.610
> 
> 标签：c++, arrays

我正在编写一个分割图的程序，我有一个类 Graph 和一个算法类。我在我的 Algorithm 类中计算分区，并根据分区使用 Graph 类中的方法拆分图。

我的代码如下所示： 在我的 GraphClass 中：

```
void bisectGraph(int *iPartitioning, Graph **Subgraphs, Edge **Separator){
...
    // Store separators in an array
Separator = new Edge*[Separators.size()+1]; //Separators is a vector containing the separating edges
if(Separator == NULL)
    writeErrorMsg("Error assigning memory.", "Graph::bisectGraph");
for(i=0, SepIter = Separators.begin(); SepIter != Separators.end(); i++, SepIter++)
    Separator[i] = *SepIter;
Separator[Separators.size()] = NULL;

} 
```

在我的算法类中，我这样称呼它：

```
Edge** separators;
Graph** subgraphs;
int somePartitioning;

g->bisectGraph(somePartitioning, subgraphs, separators); 
```

到目前为止工作正常，但是当我想像这样处理我的分隔符数组时：

```
for(int i=0; separators[i]!=NULL, i++){
    ...
} 
```

我总是遇到分段错误。ddd 告诉我，在 bisectGraph 分隔符的末尾包含一些内容。由于我找不到任何其他错误，我认为我有一些概念错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:02:16.027

的新值`Separator`不会传播到`separators`函数调用之外的变量。即使它具有`Edge **`您在函数内部分配给它的类型，但这仅分配给函数的变量副本。请记住，除非另有说明，否则 C++ 是按值传递的。

您可以将签名更改为`Edge **&`，但使用向量并采用 type 参数会更明智`vector<Edge *> &`。

# javascript - jQuery 与 document.querySelectorAll

> ID：11503534
> 
> 赞同：171
> 
> 时间：2012-07-16T11:41:33.707
> 
> 标签：javascript, jquery, html, css-selectors, jquery-selectors

我多次听说 jQuery 最强大的资产是它在 DOM 中查询和操作元素的方式：您可以使用 CSS 查询来创建在常规 javascript 中很难做到的复杂查询。但是，据我所知，您可以使用`document.querySelector`或获得相同的结果`document.querySelectorAll`，Internet Explorer 8 及更高版本均支持该结果。

所以问题是这样的：如果 jQuery 最强大的资产可以用纯 JavaScript 实现，为什么要“冒险”承担 jQuery 的开销？

我知道 jQuery 不仅仅是 CSS 选择器，例如跨浏览器 AJAX、漂亮的事件附加等。但它的查询部分是 jQuery 强大的一个非常重要的部分！

有什么想法吗？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-07-16T11:44:26.877

`document.querySelectorAll()` ~~跨浏览器有几个不一致的地方，并且在旧浏览器中不受支持~~^(现在这可能不会再造成任何麻烦了)。它有一个非常不直观的[作用域机制](http://jsfiddle.net/QdMc5/)和其他一些[不太好的特性](http://ejohn.org/blog/thoughts-on-queryselectorall/)。同样，使用 javascript，您会更难处理这些查询的结果集，而在许多情况下，您可能想要这样做。jQuery 提供了处理它们的函数，例如：`filter()`、`find()`、`children()`、`parent()`、`map()`等等`not()`。更不用说 jQuery 使用伪类选择器的能力了。

但是，我不会认为这些东西是 jQuery 最强大的功能，而是其他东西，比如以**跨浏览器兼容**的方式或 ajax 界面在 dom（事件、样式、动画和操作）上“工作”。

如果您只想要 jQuery 的选择器引擎，您可以使用 jQuery 本身正在使用的一个：**[Sizzle](http://sizzlejs.com/)**这样您就拥有了 jQuerys 选择器引擎的强大功能，而不会产生讨厌的开销。

编辑：为了记录，我是一个巨大的香草 JavaScript 粉丝。尽管如此，您有时需要 10 行 JavaScript 来编写 1 行 jQuery，这是一个事实。

当然，你必须自律，不要这样写 jQuery：

```
$('ul.first').find('.foo').css('background-color', 'red').end().find('.bar').css('background-color', 'green').end(); 
```

这很难阅读，而后者非常清楚：

```
$('ul.first')
   .find('.foo')
      .css('background-color', 'red')
.end()
   .find('.bar')
      .css('background-color', 'green')
.end(); 
```

上面的伪代码说明了等效的 JavaScript 会复杂得多：

1）找到元素，考虑取所有元素或只取第一个。

```
// $('ul.first')
// taking querySelectorAll has to be considered
var e = document.querySelector("ul.first"); 
```

2）通过一些（可能是嵌套或递归的）循环遍历子节点数组并检查类（类列表并非在所有浏览器中都可用！）

```
//.find('.foo')
for (var i = 0;i<e.length;i++){
     // older browser don't have element.classList -> even more complex
     e[i].children.classList.contains('foo');
     // do some more magic stuff here
} 
```

3）应用css样式

```
// .css('background-color', 'green')
// note different notation
element.style.backgroundColor = "green" // or
element.style["background-color"] = "green" 
```

这段代码至少是你用 jQuery 编写的代码行数的两倍。此外，您还必须考虑跨浏览器问题，这将损害本机代码的[严重速度优势](http://jsperf.com/jquery-vs-native-selector-and-element-style)（除了可靠性之外）。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-02-03T22:24:17.030

如果您正在为 IE8 或更高版本优化您的页面，您应该真正考虑是否需要 jquery。现代浏览器本身有许多 jquery 提供的资产。

如果您关心性能，则可以使用本机 javascript 获得令人难以置信的性能优势***（快 2-10 倍）*** [：http: //jsperf.com/jquery-vs-native-selector-and-element-style/2](http://jsperf.com/jquery-vs-native-selector-and-element-style/2)

我将 div-tagcloud 从*jquery*转换为*原生 javascript*（兼容 IE8+），结果令人印象深刻。只需一点开销，速度提高 4 倍。

```
 Number of lines       Execution Time                       
Jquery version :        340                    155ms
Native version :        370                    27ms 
```

You Might Not Need Jquery 提供了一个非常好的概述，哪些本地方法替换了哪个浏览器版本。

[http://youmightnotneedjquery.com/](http://youmightnotneedjquery.com/)

* * *

附录：进一步的速度比较原生方法如何与 jquery 竞争

*   [数组：$.inArray 与 Array.indexOf：Jquery 慢 24%](http://jsperf.com/in-array-vs-inarray-vs-indexof)

*   [DOM：$.empty 与 Node.innerHtml：Jquery 慢 97%](http://jsperf.com/innerhtml-vs-removechild/147)

*   [DOM：$.on 与 Node.addEventListener：Jquery 慢 90%](http://jsperf.com/click-vs-addeventlistener/15)

*   [DOM：$.find 与 Node.queryselectorall：Jquery 慢 90%](http://jsperf.com/jquery-vs-native-selector-and-element-style/2)

*   [Array: $.grep vs Array.filter: Native 慢 70%](http://jsperf.com/jquery-grep-vs-for-loop/6)

*   [DOM: $.show/hide vs display none: Jquery 慢 85%](http://jsperf.com/jquery-css-display-none-vs-hide/17)

*   [AJAX：$.ajax 与 XMLHttpRequest：Jquery 慢 89%](http://jsperf.com/native-xhr-vs-jquery-ajax)

*   [高度：$.outerHeight 与 offsetHeight：Jquery 慢 87%](http://jsperf.com/outerheight-vs-offsetheight)

*   [Attr：$.attr 与 setAttribute：Jquery 慢 86%](http://jsperf.com/jquery-attr-vs-native-setattribute/21)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-03-29T20:59:41.060

要了解为什么 jQuery 如此受欢迎，重要的是要了解我们来自哪里！

大约十年前，顶级浏览器是 IE6、Netscape 8 和 Firefox 1.5。在那个时候，除了[**`Document.getElementById()`**](https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById).

所以，当 jQuery[**在 2006 年发布**](http://ejohn.org/blog/barcampnyc-wrap-up/)时，它是相当具有革命性的。那时，jQuery 为如何轻松选择/更改 HTML 元素和触发事件设定了标准，因为它的灵活性和对浏览器的支持是前所未有的。

现在，十多年后，许多让 jQuery 如此流行的特性已经包含在 javaScript 标准中：

*   代替 jQuery 的[**`$()`**](http://api.jquery.com/jquery/#jQuery1)，你现在可以使用[**`Document.querySelectorAll()`**](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)
*   代替 jQuery 的[**`$el.on()`**](http://api.jquery.com/on/)，你现在可以使用[**`EventTarget.addEventListener()`**](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)
*   代替 jQuery 的[**`$el.toggleClass()`**](http://api.jquery.com/toggleclass/)，你现在可以使用[**`Element.classList.toggle()`**](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList)
*   ...

这些在 2005 年并不普遍可用。它们今天的事实显然引出了我们为什么应该使用 jQuery 的问题。事实上，人们越来越[**想知道我们是否应该使用 jQuery**](http://www.sitepoint.com/do-you-really-need-jquery/)。

所以，如果你认为你对 JavaScript 的理解足够好，可以不用 jQuery，请这样做！不要因为很多其他人都在使用 jQuery 而感到被迫使用 jQuery！

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-16T11:42:58.917

那是因为 jQuery 可以做的远不止`querySelectorAll`.

首先，jQuery（尤其是 Sizzle）适用于不支持 CSS2.1-3 选择器的旧浏览器，例如 IE7-8。

此外，Sizzle（jQuery 背后的选择器引擎）为您提供了许多更高级的选择器工具，如`:selected`伪类、高级`:not()`选择器、更复杂的语法（如 in`$("> .children")`等）。

它可以完美地跨浏览器，提供 jQuery 可以提供的所有东西（插件和 API）。

是的，如果你认为你可以依赖简单的类和 id 选择器，那么 jQuery 对你来说太过分了，你会付出夸大的回报。但如果你不这样做，并且想利用所有 jQuery 的优点，那么就使用它。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-07-16T12:00:13.960

`querySelectorAll`如果可用，可以使用 jQuery 的 Sizzle 选择器引擎。它还消除了浏览器之间的不一致，以实现统一的结果。如果你不想使用所有的 jQuery，你可以单独使用 Sizzle。这是一个非常基本的发明轮子。

这里有一些从源代码中挑选出来的东西，展示了 jQuery(w/Sizzle) 为你整理的东西：

Safari 怪癖模式：

```
if ( document.querySelectorAll ) {
  (function(){
    var oldSizzle = Sizzle,
      div = document.createElement("div"),
      id = "__sizzle__";

    div.innerHTML = "<p class='TEST'></p>";

    // Safari can't handle uppercase or unicode characters when
    // in quirks mode.
    if ( div.querySelectorAll && div.querySelectorAll(".TEST").length === 0 ) {
      return;
    } 
```

如果该守卫失败，它将使用它的 Sizzle 版本，该版本未使用`querySelectorAll`. 再往下，有针对 IE、Opera 和 Blackberry 浏览器中的不一致的特定处理。

```
 // Check parentNode to catch when Blackberry 4.6 returns
  // nodes that are no longer in the document #6963
  if ( elem && elem.parentNode ) {
    // Handle the case where IE and Opera return items
    // by name instead of ID
    if ( elem.id === match[3] ) {
      return makeArray( [ elem ], extra );
    }

  } else {
    return makeArray( [], extra );
  } 
```

如果一切都失败了，它将返回`oldSizzle(query, context, extra, seed)`.

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-07-16T15:32:11.190

在代码可维护性方面，坚持使用广泛使用的库有几个原因。

其中一个主要的原因是它们有很好的文档记录，并且拥有诸如 ... 说 ... stackexchange 之类的社区，可以在其中找到有关图书馆的帮助。使用自定义编码库，您可以获得源代码，可能还有操作指南文档，除非编码人员花费更多时间记录代码而不是编写代码，这非常罕见。

编写自己的库可能对*你*有用，但坐在隔壁的实习生可能更容易掌握 jQuery 之类的东西。

如果你愿意，可以称之为网络效应。这并不是说代码在 jQuery 中会更好；只是代码的简洁性使得所有技能水平的程序员都更容易掌握整体结构，如果只是因为在您正在查看的文件中一次可见更多的功能代码。从这个意义上说，5 行代码优于 10 行。

总而言之，我认为 jQuery 的主要优点是代码简洁且无处不在。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-10-18T05:46:29.930

如果我想应用相同的属性，这是一个比较，例如隐藏类“my-class”的所有元素。这是使用 jQuery 的原因之一。

jQuery：

```
$('.my-class').hide(); 
```

JavaScript：

```
var cls = document.querySelectorAll('.my-class');
for (var i = 0; i < cls.length; i++) {
    cls[i].style.display = 'none';
} 
```

由于 jQuery 已经如此流行，他们应该让 document.querySelector() 的行为类似于 $()。相反， document.querySelector() 只选择第一个匹配的元素，这使得它只有一半有用。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-03-06T05:45:35.620

老问题，但五年后，值得重温。这里我只讨论 jQuery 的选择器方面。

`document.querySelector[All]`*所有*当前浏览器都支持，直到 IE8，因此兼容性不再是问题。我也没有发现性能问题（它应该比 慢`document.getElementById`，但我自己的测试表明它稍微快一点）。

因此，当涉及到直接操作元素时，它比 jQuery 更受欢迎。

例如：

```
var element=document.querySelector('h1');
element.innerHTML='Hello'; 
```

*大大*优于：

```
var $element=$('h1');
$element.html('hello'); 
```

为了做任何事情，jQuery 必须运行一百行代码（我曾经通过类似上面的代码来查看 jQuery 实际在用它做什么）。这显然是在浪费大家的时间。

jQuery 的另一个重要成本是它将所有内容包装在一个新的 jQuery 对象中。如果您需要再次展开对象或使用其中一种对象方法来处理已在原始元素上公开的属性，则此开销特别浪费。

然而，jQuery 的优势在于它处理集合的方式。如果需要*设置*多个元素的属性，jQuery 有一个内置`each`方法，它允许这样的事情：

```
var $elements=$('h2');  //  multiple elements
$elements.html('hello'); 
```

要使用 Vanilla JavaScript 做到这一点，需要这样的东西：

```
var elements=document.querySelectorAll('h2');
elements.forEach(function(e) {
    e.innerHTML='Hello';
}); 
```

有些人觉得令人生畏。

jQuery 选择器也略有不同，但现代浏览器（不包括 IE8）不会获得太多好处。

作为一项规则，我警告不要在*新*项目中使用 jQuery：

*   jQuery 是一个外部库，增加了项目的开销，并增加了您对第三方的依赖。
*   jQuery 函数在处理方面*非常*昂贵。
*   jQuery 强加了一种需要学习的方法，并且可能会与代码的其他方面竞争。
*   jQuery 在 JavaScript 中公开新特性的速度很慢。

如果以上都不重要，那就做你想做的。然而，jQuery 对跨平台开发不再像以前那样重要，因为现代 JavaScript 和 CSS 比过去走得更远。

这没有提及 jQuery 的其他特性。但是，我认为他们也需要仔细研究。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-07-16T11:56:23.290

正如官方网站所说：“jQuery: The Write Less, Do More, JavaScript Library”

尝试在没有任何库的情况下翻译以下 jQuery 代码

```
$("p.neat").addClass("ohmy").show("slow"); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-07-16T14:31:02.247

我认为真正的答案是 jQuery 早`querySelector/querySelectorAll`在所有主流浏览器都可用之前就已经开发出来了。

[jQuery 的](http://en.wikipedia.org/wiki/JQuery)初始版本是在 2006 年。事实上，即使 jQuery[也不是第一个实现 CSS 选择器的](http://www.paulirish.com/2008/javascript-css-selector-engine-timeline/)。

[IE 是最后一个](http://caniuse.com/queryselector)实现`querySelector/querySelectorAll`. 其第 8 版[于 2009 年发布](http://en.wikipedia.org/wiki/Internet_Explorer#Internet_Explorer_8)。

所以现在，DOM 元素选择器不再是 jQuery 的强项了。然而，它仍然有很多好东西，比如更改元素的 css 和 html 内容的快捷方式、动画、事件绑定、ajax。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-18T19:00:27.900

只是对此的评论，当使用 Material Design lite 时，jquery 选择器由于某种原因不返回材料设计的属性。

为了：

```
<div class="logonfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <input class="mdl-textfield__input" type="text" id="myinputfield" required>
        <label class="mdl-textfield__label" for="myinputfield">Enter something..</label>
      </div> 
```

这有效：

```
document.querySelector('#myinputfield').parentNode.MaterialTextfield.change(); 
```

这不会：

```
$('#myinputfield').parentNode.MaterialTextfield.change(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-29T15:19:58.363

```
$("#id") 与 document.querySelectorAll("#id")
```

处理的是 $() 函数，它创建一个数组，然后为您分解它，但使用 document.querySelectorAll() 它创建一个数组，您必须分解它。

# c# - 找出是一个泛型类型实现一个接口

> ID：11503536
> 
> 赞同：1
> 
> 时间：2012-07-16T11:41:42.257
> 
> 标签：c#, generics

在下面的方法中有一种方法可以知道该类型是否`T`实现了特定的接口`IMyInterface2`

```
public IList<T> MyMethod<T>() where T : class, IMyInterface1
{

   return myResult;
} 
```

**更新 ：**

然后我像这样使用

```
MyMethod<MyClass>(); 
```

Myclass 实现`IMyInterface1`和`IMyInterface2`

```
MyMethod<MyClassB>(); 
```

Myclass 实现`IMyInterface1`而**不是** `IMyInterface2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:44:35.020

当然有：

```
public IList<T> MyMethod<T>() where T : class, IMyInterface1
{
    if (typeof(IMyInterface2).IsAssignableFrom(typeof(T)))
    {
        // code here
    }

    return myResult;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:44:56.063

就像任何其他对象一样，除了你必须使用`typeof`而不是`.GetType()`：

```
var implements = typeof(IMyInterface2).IsAssignableFrom(typeof(T)); 
```

# c - 在父子之间发送消息 - 为什么没有死锁？

> ID：11503537
> 
> 赞同：3
> 
> 时间：2012-07-16T11:41:42.517
> 
> 标签：c, linux, pipe

鉴于此代码：

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>

int main(void)
{
        int     fd[2], nbytes;
        pid_t   childpid;
        char    string[] = "Hello, world! I'm the son and this my message!\n";
        char    readbuffer[80];

        pipe(fd);   // piping fd[0] & fd[1]

        if((childpid = fork()) == -1)   // here we create a SON process
        {
                perror("fork");
                exit(1);
        }

        if(childpid == 0)    // child process
        {
                /* Child process closes up input side of pipe */
                close(fd[0]);       // closing the READ end from reading , after that the SON would write into fd[1]

                /* Send "string" through the output side of pipe */
                write(fd[1], string, (strlen(string)+1));
                printf("Verification : Message was sent successfully by the SON!\n");
                exit(0);
        }
        else    // father process
        {
                /* Parent process closes up output side of pipe */
                close(fd[1]);

                /* Read in a string from the pipe */
                nbytes = read(fd[0], readbuffer, sizeof(readbuffer));
                printf("I'm the father and I received that string: %s", readbuffer);
        }

        return(0);
} 
```

输出是：

```
I'm the father and I received that string: Hello, world! I'm the son and this my message!
Verification : Message was sent successfully by the SON! 
```

我正在尝试理解管道，但我不清楚一些事情：

1.  如果儿子在那一行发送他的消息，`write(fd[1], string, (strlen(string)+1));`然后我们有`printf`验证消息已发送，为什么我在父亲收到儿子的消息**后**`Verification : Message was sent successfully by the SON!` 得到验证（例如） ？不是应该**先是**儿子的**验证**，然后才是字符串吗？

*******   如果父亲试图从管道中读取而儿子想要写入管道，那么这里的某个地方隐藏了（我认为）一个死锁，不是吗？为什么我没有陷入僵局？****** 

 ******谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:22:48.810

你的第一个问题：

`1\. wasn't it suppose to be first the verification from the son and only then the string ?`

答：当您有多个进程在运行时，这些进程的指令执行顺序是不确定的。这取决于调度程序何时调度哪个进程。所以从你程序的输出中，我们可以知道指令执行顺序如下：

`CHILD-PROCESS:` 写（fd[1]，字符串，（strlen（字符串）+1））；\\在这条指令之后，这个过程被暂停

`PARENT-PROCESS:`nbytes = read(fd[0], readbuffer, sizeof(readbuffer));

`PARENT-PROCESS:`printf("我是父亲，我收到了那个字符串：%s", readbuffer);

`CHILD-PROCESS:` printf("验证：SON成功发送消息！\n");

这个顺序在其他时候也可以不同。

你的第二个问题：

`2\. Why am I not getting a deadlock ?`

答：在这种情况下，父进程只是阻塞等待管道上的某些输入。但是孩子可以写，它不必等待。所以没有死锁的机会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:51:15.390

Because of I/O buffering, there is no guarantee that the output will be displayed in the order it was printed.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T11:46:27.110

1）来自子进程的消息稍后出现的原因是因为写入管道可能会阻塞，直到缓冲区中有足够的空间（从[这里开始](http://www.kernel.org/doc/man-pages/online/pages/man7/pipe.7.html)）：

> 如果一个进程试图写入一个完整的管道（见下文），那么 write(2) 会阻塞，直到从管道中读取足够的数据以允许写入完成。

所以换句话说，子进程等待父进程读取调用中的消息`write()`。

2）如果子进程无法向管道写入任何内容，那么是的，父进程将阻塞（它不会这样死锁）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T11:53:23.413

When the child writes to the pipe, kernel changes the parent to running state. Seems that scheduler switch the parent to running, before the child prints the text (probably before child returns from `write` call).

So the line

```
printf("I'm the father and I received that string: %s", readbuffer); 
```

is executed before line:

```
printf("Verification : Message was sent successfully by the SON!\n"); 
```

You can verify this by using `strace -f` command.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T12:13:30.330

```
 if(childpid == 0)    // child process
    {
            write(fd[1], string, (strlen(string)+1)); #C1
            printf("Verification : Message was sent successfully by the SON!\n"); #C2
            exit(0);
    }
    else    // father process
    {
            /* Read in a string from the pipe */
            nbytes = read(fd[0], readbuffer, sizeof(readbuffer)); #F1
            printf("I'm the father and I received that string: %s", readbuffer); F2
    } 
```

在上述情况下，我们无法确定是先出现**C1 还是 F1**。它取决于内核调度，不应依赖。但是如果管道处于块模式，**C1 和 F1都是相关的。**Related=**两者都必须发生，否则会出现死锁**。以下情况会导致死锁。

1.  子进程不执行 C1，但执行其他操作，例如等待输入等并且不返回，则父进程将死锁在 F1 中。
2.  父级不执行 F1，但执行其他操作（例如等待输入等）且不返回，则子级将死锁在 C1 中。

如果任何一个孩子/父母退出，那么我认为你会得到一个破管/信号管。******

# c# - 在一个查询sql过程中检索两个单独的表c#

> ID：11503544
> 
> 赞同：0
> 
> 时间：2012-07-16T11:42:27.580
> 
> 标签：c#, sql, procedure

这是我的 sql 查询：

```
ALTER PROCEDURE GET_SAMEDATE ( @FileName nvarchar(max) )   AS
SELECT TOP 1 WITH TIES Hash 
FROM   Beamer.PackageDetailFile DF(NOLOCK)
INNER JOIN Beamer.PackageDetail D (NOLOCK) ON DF.PackageDetailId = D.Id
INNER JOIN Beamer.Package P (NOLOCK) ON D.PackageId = P.Id 
WHERE  FileName = @FileName AND P.EnvRelationId=3 AND P.IsPublished=1
ORDER  BY Date DESC 
```

我想要做的是，我也想从该表中选择日期，但是当我这样做时，我不能在另一个类中调用它们（单独阅读它们）。

```
try
    {
        myConnection.Open();
       SqlDataReader sdr = myCommand.ExecuteReader();

          while (sdr.Read())       
            {                   

              string h = (string)sdr.GetString(0);                     

              if (hash != h)
            {

                exists = true;
                Class2 bala = new Class2();
                bala.dbconnection3(FileName);

            }

                 sdr.Read();
        } 
```

我的意思是我想单独阅读这些表格，但要在一个过程中获得它们。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-16T12:49:34.147

1.  创建一个返回 twee 结果的存储过程。

2.  告诉您的 sqldatareader 通过以下方式打开第二个结果：

> sdr.NextResult();

# iphone - Xcode如何用超链接替换文本

> ID：11503546
> 
> 赞同：0
> 
> 时间：2012-07-16T11:42:44.617
> 
> 标签：iphone, objective-c, xcode, hyperlink

我是 Xcode 的新手，所以请多多包涵。

我有一个要求，我的视图上有一些从 API 调用加载到服务器的文本。（简而言之，动态文本填充运行时）。

现在我需要将所有@blabla 和#blablabla 替换为可点击的链接/按钮或其他任何内容。它应该是可点击的，点击它，应该打开另一个视图。

请建议我是否应该对此进行详细说明。

这是更具体的用例

1.  基于视图的应用程序已启动
2.  应用程序调用网络服务器 (API) 并接收文本段落。
3.  它应该在屏幕上显示段落，但应该用链接替换@bla 和@blabla，点击它应该打开另一个视图（不是网页）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:01:58.570

作弊方法是使用开源组件。我没有使用它，但[SMFancyText](https://github.com/simonmaddox/SMFancyText)可能会成功。

# php - wordpress中的付款方式

> ID：11503549
> 
> 赞同：0
> 
> 时间：2012-07-16T11:42:57.113
> 
> 标签：php, wordpress, plugins, woocommerce, payment

嗨，我打算为 OKpay 的付款方式开发一个 wordpress 插件，但是当我使用它时，我收到以下错误：- 致命错误：调用 /home/sixtydev/public_html/ 中未定义的方法 woocommerce_okpay::get_return_url() woo/wp-content/plugins/woocommerce-okpay/gateway-okpay.php 在线 193

这是我的代码

```
<?php
/**
 * OKPAY Payment Gateway
 * 
 * Provides a OKPAY Standard Payment Gateway.
 *
 * @class       woocommerce_okpay
 * @package     WooCommerce
 * @category    Payment Gateways
 * @author      WooThemes
 */
class woocommerce_okpay extends woocommerce_payment_gateway {

    public function __construct() { 
        global $woocommerce;

        $this->id           = 'okpay';
        $this->icon         = apply_filters('woocommerce_okpay_icon', $this->plugin_url() . '/okpay.png');
        $this->has_fields   = false;
        $this->liveurl      = 'https://www.okpay.com/process.html';
        $this->testurl      = 'https://www.okpay.com/process.html';

        // Load the form fields.
        $this->init_form_fields();

        // Load the settings.
        $this->init_settings();

        // Define user set variables
        $this->title        = $this->settings['title'];
        $this->description  = $this->settings['description'];
        $this->email        = $this->settings['email'];
        $this->testmode     = 'no';//$this->settings['testmode'];
        $this->debug        = $this->settings['debug']; 
        $this->payfee   = ($this->settings['payfee'] == 'yes') ? 0 : 1;

        // Logs
        if ($this->debug=='yes') $this->log = $woocommerce->logger();

        // Actions
        add_action( 'init', array(&$this, 'check_ipn_response') );
        add_action('valid-okpay-standard-ipn-request', array(&$this, 'successful_request') );
        add_action('woocommerce_receipt_okpay', array(&$this, 'receipt_page'));
        add_action('woocommerce_update_options_payment_gateways', array(&$this, 'process_admin_options'));

        if ( !$this->is_valid_for_use() ) $this->enabled = false;
    } 

     /**
     * return plugin url
     * @return string
     */
    function plugin_url() {

            if (is_ssl()) :

                return str_replace('http://', 'https://', WP_PLUGIN_URL) . "/" . plugin_basename( dirname(dirname(__FILE__)));

            else :

                return WP_PLUGIN_URL . "/" . plugin_basename(dirname(__FILE__));

            endif;

    }

     /**
     * Check if this gateway is enabled and available in the user's country
     */
    function is_valid_for_use() {
        if (!in_array(get_option('woocommerce_currency'), array('AUD', 'BRL', 'CAD', 'MXN', 'NZD', 'HKD', 'SGD', 'USD', 'EUR', 'JPY', 'TRY', 'NOK', 'CZK', 'DKK', 'HUF', 'ILS', 'MYR', 'PHP', 'PLN', 'SEK', 'CHF', 'TWD', 'THB', 'GBP'))) return false;

        return true;
    }

    /**
     * Admin Panel Options 
     * - Options for bits like 'title' and availability on a country-by-country basis
     *
     * @since 1.0.0
     */
    public function admin_options() {

        ?>
        <h3><?php _e('OKPAY', 'woothemes'); ?></h3>
        <p><?php _e('OKPAY works by sending the user to OKPAY to enter their payment information.', 'woothemes'); ?></p>
        <table class="form-table">
        <?php
            if ( $this->is_valid_for_use() ) :

                // Generate the HTML For the settings form.
                $this->generate_settings_html();

            else :

                ?>
                    <div class="inline error"><p><strong><?php _e( 'Gateway Disabled', 'woothemes' ); ?></strong>: <?php _e( 'OKPAY does not support your store currency.', 'woothemes' ); ?></p></div>
                <?php

            endif;
        ?>
        </table><!--/.form-table-->
        <?php
    } // End admin_options()

    /**
     * Initialise Gateway Settings Form Fields
     */
    function init_form_fields() {

        $this->form_fields = array(
            'enabled' => array(
                            'title' => __( 'Enable/Disable', 'woothemes' ), 
                            'type' => 'checkbox', 
                            'label' => __( 'Enable OKPAY', 'woothemes' ), 
                            'default' => 'yes'
                        ), 
            'title' => array(
                            'title' => __( 'Title', 'woothemes' ), 
                            'type' => 'text', 
                            'description' => __( 'This controls the title which the user sees during checkout.', 'woothemes' ), 
                            'default' => __( 'OKPAY', 'woothemes' )
                        ),
            'description' => array(
                            'title' => __( 'Description', 'woothemes' ), 
                            'type' => 'textarea', 
                            'description' => __( 'This controls the description which the user sees during checkout.', 'woothemes' ), 
                            'default' => __("Pay via OKPAY; you can pay with your credit card if you don't have a okpay account", 'woothemes')
                        ),
            'email' => array(
                            'title' => __( 'OKPAY Email', 'woothemes' ), 
                            'type' => 'text', 
                            'description' => __( 'Please enter your OKPAY email address; this is needed in order to take payment.', 'woothemes' ), 
                            'default' => ''
                        ),
            'payfee' => array(
                            'title' => __( 'OKPAY fee', 'woothemes' ),
                            'type' => 'checkbox',
                            'description' => __( 'Check if you pay the fee for orders or uncheck if client pay it.', 'woothemes' ),
                            'default' => 'yes'
                        ),
             /*
            'testmode' => array(
                            'title' => __( 'OKPAY sandbox', 'woothemes' ),
                            'type' => 'checkbox',
                            'label' => __( 'Enable OKPAY sandbox', 'woothemes' ),
                            'default' => 'yes'),  */
            'debug' => array(
                            'title' => __( 'Debug', 'woothemes' ), 
                            'type' => 'checkbox', 
                            'label' => __( 'Enable logging (<code>woocommerce/logs/okpay.txt</code>)', 'woothemes' ), 
                            'default' => 'no'
                        )
            );

    } // End init_form_fields()

    /**
     * There are no payment fields for okpay, but we want to show the description if set.
     **/
    function payment_fields() {
        if ($this->description) echo wpautop(wptexturize($this->description));
    }

    /**
     * Generate the okpay button link
     **/
    public function generate_okpay_form( $order_id ) {
        global $woocommerce;

        $order = &new woocommerce_order( $order_id );

        if ( $this->testmode == 'yes' ):
            $okpay_adr = $this->testurl . '?';
        else :
            $okpay_adr = $this->liveurl . '?';      
        endif;

        if ($this->debug=='yes') $this->log->add( 'okpay', 'Generating payment form for order #' . $order_id ." | ".$order->order_key. '. Notify URL: ' . $this->get_return_url( $order ));

        $okpay_args = 
            array(
                'ok_fees'               => $this->payfee,
                'ok_receiver'           => $this->email,

                'ok_currency'           => get_option('woocommerce_currency'),
                /*'ap_itemname'             => sprintf(__('Order #%s' , 'woothemes'), $order->id),
                'ap_quantity'           => 1,
                'ap_amount'             => number_format($order->order_total, 2, '.', ''),
                'ap_description'        => "Order from curiousuniversity",  */
                'ok_return_success'             => $this->get_return_url( $order ),
                'ok_return_fail'            => $order->get_cancel_order_url(),

                // IPN
                'ok_ipn'            => trailingslashit(home_url()).'?okpayListener=okpay_standard_IPN',

                // Address info
                'ok_payer_first_name'               => $order->billing_first_name,
                'ok_payer_last_name'                => $order->billing_last_name,
                'ok_payer_business_name'                => $order->billing_company,
                'ok_payer_street'       => $order->billing_address_1,
                //'ap_addressline2'     => $order->billing_address_2,
                'ok_payer_city'             => $order->billing_city,
                'ok_payer_state'        => $order->billing_state,
                'ok_payer_zip'      => $order->billing_postcode,
                'ok_payer_country'          => $order->billing_country,
                'ok_payer_email'        => $order->billing_email,
                'ok_payer_phone'        => $order->billing_phone,

                // Payment Info
                'ok_invoice'            => $order->order_key."|".$order_id,
                //'apc_2'               => $order_id,
                //'ap_discountamount'   => $order->get_order_discount()
        );

        if ($order->get_order_discount()>0) :

            // Don't pass items - paypal borks tax due to prices including tax. PayPal has no option for tax inclusive pricing sadly. Pass 1 item for the order items overall
            $okpay_args['ok_item_1_name']   = sprintf(__('Order #%s' , 'woothemes'), $order->id);
            $okpay_args['ok_item_1_quantity']       = 1;
            $okpay_args['ok_item_1_price']      = number_format($order->order_total - $order->order_shipping - $order->get_order_discount(), 2, '.', '');

            // Shipping Cost
            if ($order->order_shipping>0) :
                $okpay_args['ok_item_2_name'] = __('Shipping cost', 'woothemes');
                $okpay_args['ok_item_2_quantity']   = 1;
                $okpay_args['ok_item_2_price']  = number_format($order->order_shipping, 2);
            endif;

        else :

            // Tax
            //$okpay_args['ap_taxamount'] = $order->get_total_tax();

            // Cart Contents
            $item_loop = 0;
            if (sizeof($order->items)>0) : foreach ($order->items as $item) :
                if ($item['qty']) :

                    $item_loop++;

                    $item_name = $item['name'];

                    $item_meta = &new order_item_meta( $item['item_meta'] );
                    if ($meta = $item_meta->display( true, true )) :
                        $item_name .= ' ('.$meta.')';
                    endif;

                    $okpay_args['ok_item_'.$item_loop.'_name'] = $item_name;
                    $okpay_args['ok_item_'.$item_loop.'_quantity'] = $item['qty'];
                    $okpay_args['ok_item_'.$item_loop.'_price'] = number_format($item['cost'], 2, '.', '');

                endif;
            endforeach; endif;

            // Shipping Cost
            if ($order->order_shipping>0) :
                $item_loop++;
                $okpay_args['ok_item_'.$item_loop.'_name'] = __('Shipping cost', 'woothemes');
                $okpay_args['ok_item_'.$item_loop.'_quantity'] = '1';
                $okpay_args['ok_item_'.$item_loop.'_price']  = number_format($order->order_shipping, 2);
            endif;

        endif;

        $okpay_args_array = array();

        foreach ($okpay_args as $key => $value) {
            $okpay_args_array[] = '<input type="hidden" name="'.esc_attr( $key ).'" value="'.esc_attr( $value ).'" />';
        }

        $woocommerce->add_inline_js('
            jQuery("body").block({ 
                    message: "<img src=\"'.esc_url( $woocommerce->plugin_url() ).'/assets/images/ajax-loader.gif\" alt=\"Redirecting...\" style=\"float:left; margin-right: 10px;\" />'.__('Thank you for your order. We are now redirecting you to OKPAY to make payment.', 'woothemes').'",
                    overlayCSS: 
                    { 
                        background: "#fff", 
                        opacity: 0.6 
                    },
                    css: { 
                        padding:        20, 
                        textAlign:      "center", 
                        color:          "#555", 
                        border:         "3px solid #aaa", 
                        backgroundColor:"#fff", 
                        cursor:         "wait",
                        lineHeight:     "32px"
                    } 
                });
            jQuery("#submit_okpay_payment_form").click();
        ');

        return '<form action="'.esc_url( $okpay_adr ).'" method="post" id="okpay_payment_form">
                ' . implode('', $okpay_args_array) . '
                <input type="submit" class="button-alt" id="submit_okpay_payment_form" value="'.__('Pay via okpay', 'woothemes').'" /> <a class="button cancel" href="'.esc_url( $order->get_cancel_order_url() ).'">'.__('Cancel order &amp; restore cart', 'woothemes').'</a>
            </form>';

    }

    /**
     * Process the payment and return the result
     **/
    function process_payment( $order_id ) {

        $order = &new woocommerce_order( $order_id );

        return array(
            'result'    => 'success',
            'redirect'  => add_query_arg('order', $order->id, add_query_arg('key', $order->order_key, get_permalink(get_option('woocommerce_pay_page_id'))))
        );

    }

    /**
     * receipt_page
     **/
    function receipt_page( $order ) {

        echo '<p>'.__('Thank you for your order, please click the button below to pay with okpay.', 'woothemes').'</p>';

        echo $this->generate_okpay_form( $order );

    }

    /**
     * Check okpay IPN validity
     **/
    function check_ipn_request_is_valid() {
        global $woocommerce;

        if ($this->debug=='yes') $this->log->add( 'okpay', 'Checking IPN response is valid...' );
        return true;
    }

    /**
     * Check for okpay IPN Response
     **/
    function check_ipn_response() {

        if (isset($_GET['okpayListener']) && $_GET['okpayListener'] == 'okpay_standard_IPN'):

            $_POST = stripslashes_deep($_POST);

            if ($this->check_ipn_request_is_valid()) :

                do_action("valid-okpay-standard-ipn-request", $_POST);

            endif;

        endif;

    }

    /**
     * Successful Payment!
     **/
    function successful_request( $posted ) {
        if ($this->debug=='yes') $this->log->add( 'okpay', print_r($posted, true));

        $order_info = explode("|", $posted['ok_invoice']);
        $invoice_id = $order_info['0'];
        $order_id = $order_info['1'];

        if ( !empty($invoice_id) && !empty($order_id) ) {

            $order = new woocommerce_order( (int) $order_id );
            if ($this->debug=='yes') $this->log->add( 'okpay', "Check order key " . $order->order_key ." = ".$invoice_id);
            if ($order->order_key!=$invoice_id) exit;

            // Sandbox fix
            //if ($posted['ap_test']==1 && $posted['ok_txn_status']=='Pending') $posted['ok_txn_status'] = 'completed';

            // We are here so lets check status and do actions
            if ($this->debug=='yes') $this->log->add( 'okpay', "Check status");
            switch (strtolower($posted['ok_txn_status'])) :
                case 'completed' :
                    if ($this->debug=='yes') $this->log->add( 'okpay', "Success");
                    // Check order not already completed
                    if ($order->status == 'completed') exit;

                    // Payment completed
                    $order->add_order_note( __('IPN payment completed', 'woothemes') );
                    $order->payment_complete();

                    // Store PP Details
                    update_post_meta( (int) $order_id, 'Payer okpay address', $posted['ok_payer_email']);
                    update_post_meta( (int) $order_id, 'Transaction ID', $posted['ok_txn_id']);
                    update_post_meta( (int) $order_id, 'Payer first name', $posted['ok_payer_first_name']);
                    update_post_meta( (int) $order_id, 'Payer last name', $posted['ok_payer_last_name']);
                    update_post_meta( (int) $order_id, 'Payment type', $posted['ok_txn_payment_type']);

                break;
                case 'pending' :

                    // Mark order as refunded
                    $order->update_status('pending', sprintf(__('Payment %s via IPN.', 'woothemes'), strtolower($posted['ok_txn_status']) ) );

                    $message = woocommerce_mail_template(
                        __('Order refunded/reversed', 'woothemes'),
                        sprintf(__('Order #%s has been marked as pending - OKPAY reason code: %s', 'woothemes'), $order->id, $posted['ok_txn_pending_reason'] )
                    );

                    // Send the mail
                    woocommerce_mail( get_option('woocommerce_new_order_email_recipient'), sprintf(__('Payment for order #%s pending', 'woothemes'), $order->id), $message );

                break;
                case 'reversed' :

                    // Mark order as refunded
                    $order->update_status('refunded', sprintf(__('Payment %s via IPN.', 'woothemes'), strtolower($posted['ok_txn_status']) ) );

                    $message = woocommerce_mail_template(
                        __('Order refunded/reversed', 'woothemes'),
                        sprintf(__('Order #%s has been marked as refunded - OKPAY reason code: %s', 'woothemes'), $order->id, $posted['ok_txn_reversal_reason'] )
                    );

                    // Send the mail
                    woocommerce_mail( get_option('woocommerce_new_order_email_recipient'), sprintf(__('Payment for order #%s refunded/reversed', 'woothemes'), $order->id), $message );

                break;
                default:
                    // Order failed
                    $order->update_status('failed', sprintf(__('Payment %s via IPN.', 'woothemes'), strtolower($posted['ok_txn_status']) ) );
                break;
            endswitch;

            exit;

        }

    }

}

/**
 * Add the gateway to WooCommerce
 **/
function add_okpay_gateway( $methods ) {
    $methods[] = 'woocommerce_okpay'; return $methods;
}

add_filter('woocommerce_payment_gateways', 'add_okpay_gateway' ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:31:28.300

错误是因为该函数不存在。

我假设您从 PayPal 复制了此代码，对吗？

**编辑：**

你应该为它构建一个插件。

[http://wcdocs.woothemes.com/codex/extending/payment-gateway-api/](http://wcdocs.woothemes.com/codex/extending/payment-gateway-api/)

# jquery - JQuery Ajax 调用返回非 json 数据，但我得到一个 SyntaxError？

> ID：11503553
> 
> 赞同：0
> 
> 时间：2012-07-16T11:43:08.220
> 
> 标签：jquery, ajax, json, text

这是来自页面的代码片段：

```
$("#add_new").button().click(function (ui,event) {
    var postdata = {
        "action":"new",
        field_kind_id:2,
        collection_id:null,
        parent_id:null,
        app_struct_id:null,
        member_id:1033,
        app_id:1003,
    };
    $.ajax({
        url: "?",
        type: "POST",
        data: postdata,
        error: function(jqXHR, textStatus, errorThrown) {
            $().toastmessage("showErrorToast",
                "AJAX call failed: "+textStatus+" "+errorThrown);
        },
        success: function(data) {
            edit_record(data);
            return false;
        }
    });
}); 
```

实际上 POST 编辑的数据类似于：

```
action  new
app_id  1003
app_struct_id   null
collection_id   null
field_kind_id   2
member_id   1033
parent_id   null 
```

响应是这个字符串：

```
{\x22app_id\x22:1003,\x22member_id\x22:1033,\x22collection_id\x22:\x22-6885\x22,\x22field_kind_id\x22:2,\x22sample_id\x22:\x22\x22,\x22parent_id\x22:\x22\x22} 
```

响应不是有效的 json 数据。它有一个特殊的格式。我的问题是上面的 ajax 调用显示了这个 toast 消息：

“AJAX 调用失败：parsererror SyntaxError：非法字符”

所以看起来AJAX调用失败了。但我不明白什么是检查语法？什么样的语法？JQuery Ajax 调用没有指定“dataType:json”。所以不应该检查任何语法。我错过了什么？

JQuery 文档说“dataType”的默认值是“intelligent”

“智能猜测（xml、json、脚本或 html）”

如果响应不能被解释为 JSON 值，那么它就不是 JSON 值，对吧？要么它不是一个有效的 JSON 值（在这种情况下，它不应该被转换）要么它是（但它不应该抛出异常？）这是否意味着 jQuery 不够智能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:17:28.860

我建议你明确设置`dataType`为`"text"`（参见[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)），这样 jQuery 就不需要猜测响应的内容类型：

```
$.ajax({
    url: "?",
    type: "POST",
    data: postdata,
    dataType: "text", // the type of data that you're expecting back from the server
    error: function(jqXHR, textStatus, errorThrown) {
        $().toastmessage("showErrorToast",
            "AJAX call failed: "+textStatus+" "+errorThrown);
    },
    success: function(data) {
        edit_record(data);
        return false;
    }
}); 
```

您遇到错误的原因可能如下： jQuery 假定您的服务器的响应是 JSON 格式并尝试解析它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:47:16.797

服务器响应中的 Content-Type 标头的值是多少？我希望任何关于内容格式的猜测都基于此。

# ruby - 如何在 Ruby 中取消定义类？

> ID：11503558
> 
> 赞同：60
> 
> 时间：2012-07-16T11:43:22.177
> 
> 标签：ruby, ruby-on-rails-3, activerecord

在 Ruby 中取消定义方法非常简单，我可以使用`undef METHOD_NAME`.

有没有类似的类？我在`MRI 1.9.2`。

我必须取消定义 ActiveRecord 模型，运行两行代码，然后将模型恢复为原始形式。

问题是，我有一个模型`Contact`并且我正在使用公司的 API，并且碰巧他们有一些名为 的类`Contact`，更改我的模型名称对我来说是很多工作。

在这种情况下我能做什么？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-07-16T11:47:51.163

```
class Foo; end
# => nil
Object.constants.include?(:Foo)
# => true
Object.send(:remove_const, :Foo)
# => Foo
Object.constants.include?(:Foo)
# => false
Foo
# NameError: uninitialized constant Foo 
```

**编辑**刚刚注意到您的编辑，删除常量可能不是实现您正在寻找的最佳方式。为什么不将其中一个`Contact`类移到单独的命名空间中。

**EDIT2**你也可以像这样临时重命名你的类：

```
class Foo
  def bar
    'here'
  end
end

TemporaryFoo = Foo
Object.send(:remove_const, :Foo)
# do some stuff
Foo = TemporaryFoo
Foo.new.bar #=> "here" 
```

同样，这样做的问题是您仍然拥有较新的`Contact`课程，因此您必须再次删除它。我真的会建议为您的课程命名空间。这也将帮助您避免任何加载问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-25T14:11:44.170

在类似的情况下 - 模拟我正在尝试测试的另一个类在内部使用的类 - 我发现这是一个可行的解决方案：

```
describe TilesAuth::Communicator do
  class FakeTCPSocket
    def initialize(*_); end
    def puts(*_); end
  end

  context "when the response is SUCCESS" do
    before do
      class TilesAuth::Communicator::TCPSocket < FakeTCPSocket
        def gets; 'SUCCESS'; end
      end
    end
    after { TilesAuth::Communicator.send :remove_const, :TCPSocket }

    it "returns success" do
      communicator = TilesAuth::Communicator.new host: nil, port: nil, timeout: 0.2
      response = communicator.call({})
      expect(response["success"]).to eq(true)
      expect(response).not_to have_key("error")
      expect(response).not_to have_key("invalid_response")
    end
  end
end 
```

我原以为会有更好的方法来做到这一点 - 即我看不到传递所需返回值以供重用的方法 - 但现在这似乎已经足够好了。我是模拟/工厂的新手，我很想听听任何替代方法。

编辑：

好吧，毕竟不是那么相似。

[由于RSpec Google Group 中的出色解释，](https://groups.google.com/d/msg/rspec/0GiBxedf3Nk/OhKxHcN3Z28J)我找到了使用 RSpec 模拟的更好方法：

```
context "with socket response mocked" do
  let(:response) do
    tcp_socket_object = instance_double("TCPSocket", puts: nil, gets: socket_response)
    class_double("TCPSocket", new: tcp_socket_object).as_stubbed_const
    communicator = TilesAuth::Communicator.new host: nil, port: nil, timeout: 0.2
    communicator.call({})
  end

  context "as invalid JSON" do
    let(:socket_response) { 'test invalid json' }

    it "returns an error response including the invalid socket response" do
      expect(response["success"]).to eq(false)
      expect(response).to have_key("error")
      expect(response["invalid_response"]).to eq(socket_response)
    end
  end

  context "as SUCCESS" do
    let(:socket_response) { 'SUCCESS' }

    it "returns success" do
      expect(response["success"]).to eq(true)
      expect(response).not_to have_key("error")
      expect(response).not_to have_key("invalid_response")
    end
  end
end 
```

# iphone - 文本视图不会自动滚动

> ID：11503561
> 
> 赞同：1
> 
> 时间：2012-07-16T11:43:26.767
> 
> 标签：iphone, xcode, uitextview

我正在将调试文本打印到我的应用程序文本视图中

```
- (void) updateDebugWindow:(NSString *)text {
[dbgText setText:[NSString stringWithFormat:@"%@%@\r\n",dbgText.text,text]];
} 
```

如您所见，下一行将附加到上一行，以便我可以看到上一步中发生的情况。这工作正常

```
[self updateDebugWindow:@"Debug info"]; 
```

但是当它到达底部时，它不会自动向下滚动以显示下一行文本，我必须用手指手动滚动它。

xcode中是否有一些选项可以让文本视图自动跟随文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:57:25.507

Here is your routine re-written:

```
- (void) updateDebugWindow:(NSString *)text {  
    [dbgText setText:[NSString stringWithFormat:@"%@%@\r\n",dbgText.text,text]];  
    [dbgText scrollRangeToVisible:NSMakeRange([dbgText .text length], 0)];
} 
```

This adds your text, then scrolls to the last "character" in the overall string.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:49:18.877

尝试这个

```
NSRange selectedRange = dbgText.selectedRange;
[self updateDebugWindow:@"Debug info"];
dbgText.selectedRange = selectedRange;
dbgText.scrollEnabled = YES; 
```

希望它会奏效。

# c# - c# LINQ 获取包含列表中所有元素的字符串

> ID：11503562
> 
> 赞同：0
> 
> 时间：2012-07-16T11:43:34.960
> 
> 标签：c#, linq

我在想出一个 LINQ 来执行以下操作时遇到了麻烦……假设我在下面有一个字符串列表：

```
List<string> strings = new List<string>();
strings.add("one");
strings.add("two");
strings.add("three"); 
```

我希望能够获得如下所示的字符串：

```
string correctString = "onetwothree"; 
```

但在选择任何其他字符串时返回 null，例如

```
string wrongString1 = "onethree"; // returns null
string wrongString2 = "one"; // returns null
string wrongString3 = "onetwo"; // returns null
string wrongString4 = "five"; // returns null 
```

我认为 LINQ 是最好的方法，但不幸的是，选择和许多语句没有太多运气......

有什么建议么？

谢谢。

[编辑] 好的，为混乱道歉......

我并没有尝试连接字符串。我试图使用 LINQ 查询将正确字符串与字符串列表匹配，例如

```
aRandomStringList.FirstOrDefault<string>(st => st.contains(<all the values in the "strings" list>); 
```

鉴于字符串 List 中的值可以更改......例如“一”和“三”可以交换位置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:49:06.797

要连接字符串，请使用该`contact`方法

```
var correctString = string.Concat(strings) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:24:35.077

对不起，如果我没有正确理解你需要什么。我认为你不需要 Linq

```
 List<string> strings = new List<string>();

        private string TestString(string word)
        {
            return strings.IndexOf(word) >= 0 ? strings[strings.IndexOf(word)] : null;
        }
        private void Main()
        {
            strings.AddRange(new string[] { "one", "two", "three", "onetwothree" });
            string[] words = { "onethree", "one", "onetwo", "five", "onetwothree" };
            Console.WriteLine(TestString(words[0]));
            Console.WriteLine(TestString(words[1]));
            Console.WriteLine(TestString(words[2]));
            Console.WriteLine(TestString(words[3]));
            Console.WriteLine(TestString(words[4]));
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:12:46.183

贝拉辛，

根据页面上的其他答案，这是我的转折：

```
var strings = new List<string> 
{
    "one", 
    "two", 
    "three"
};

// concatenate the list to single string
var correctString = string.Concat(strings);

string wrongString1 = "onethree"; // returns null
string wrongString2 = "one";      // returns null
string wrongString3 = "onetwo";   // returns null
string wrongString4 = "five";     // returns null
string correctStringTest = "onetwothree"; // returns "onetwothree"

// will return the value of correctString or null
var result = TestResult(correctString, wrongString1); 
```

和“测试”方法：

```
public string TestResult(string sourceTest, string targetTest)
{
    return (sourceTest == targetTest) ? sourceTest : null;
} 
```

这应该够了吧。不是特别优雅，但基于问题可能满足条件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T11:48:44.700

```
string [] sArr = new string [10];

        for (int i = initVal; i < initVal + 10; i++)
            sArr[i - initVal] = String.Format("{0,-3}", i * multVal);

        return String.Join(sep, sArr); 
```

像上面一样

```
 string correctString =   string.Join("",strings.ToArray()); 
```

# c# - 从 C# WinForm 访问 PHP 页面

> ID：11503568
> 
> 赞同：0
> 
> 时间：2012-07-16T11:44:03.993
> 
> 标签：c#, php, winforms

我有一个启用 IIS 的服务器 (LAN)，但**不**支持 PHP。我需要访问服务器上现有的 PHP 页面。在不对服务器进行任何更改的情况下，如何在我的 Windows 窗体项目中使用 C# 访问 PHP 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:06:34.807

so basically you want to execute the PHP script using C# right? I guess you can use the [Phalanger](http://phalanger.codeplex.com/) for this. phalanger allows you to calling functions written in PHP and working with PHP objects in the legacy mode.

The problem however is that these functions will get called to cater your needs but not flush the HTML from PHP Script to meet your needs;

The thing you are looking for is that you want the script to be generated using some server software (IIS or LAMP) but you don't have that tool right?

I guess this will not be possible

# java - PDF到XML-XSL的转换-Java？

> ID：11503569
> 
> 赞同：2
> 
> 时间：2012-07-16T11:44:05.130
> 
> 标签：java, xml, jakarta-ee, xslt

如何将 PDF 转换为 XML 并在 XSL 中捕获其结构/样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:04:12.893

我曾经将 PDF 到 XML 的转换描述为试图将汉堡包变成奶牛。这是逆向工程的练习。PDF 在表示文本的方式上变化很大。在更糟糕的情况下，您所拥有的只是一张扫描图像（在这种情况下，您实际上是在进行 OCR）。如果幸运的话，您有一组文本字符串，其中包含它们在页面上出现位置的坐标，但没有其他结构指示。

如果 PDF 是他们理解的格式，那么有些工具可以完成合理的工作（通常生成 Microsoft Word）。谷歌“PDF 到 Word 转换”。尝试一下（我已经有一段时间没有这样做了）；不要尝试自己编写。当然，从 Word 到 XML 是“相对”简单的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:44:20.797

[PDFTextStream](http://www.snowtide.com)可以轻松地将 PDF 文档中的文本提取为 XML。PDFTextStream 包含一种特殊的 PDF->XML 方法 — <a href="http://downloads.snowtide.com/javadoc/PDFTextStream/latest/pdfts/examples/XMLOutputTarget.html" rel="nofollow">XMLOutputTarget — PDFTextStream 中包含的源代码，因此您可以轻松调整它以满足您的要求。

[代码示例](http://snowtide.com)可供入门，或者您可以更深入地阅读有关[使用 PDFTextStream 提取 PDF 文本的工作原理](http://www.snowtide.com/help/extracting-text-from-pdf-documents)。

（披露：我受雇于 PDFTextStream 的制造商 Snowtide。我希望这个指针在任何情况下都有帮助。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T18:50:55.440

我认为 Michael Kay 将 PDF -> XML 转换描述为“*试图将汉堡包转换为奶牛*”时，他做到了这一点。

过去我做过很多 PDF 到 XML 的转换。我很幸运，我可以转换不需要 OCR 的不错的 PDF。我的大部分问题都与表格和图形有关。像迈克尔建议的那样首先转换为 Word 可能会有所帮助。

我所做的是使用 Xpdf 将 PDF`pdftotext`转换[为](http://www.foolabs.com/xpdf/download.html)文本，然后将文本转换为 XML。（我使用 Omnimark 进行文本 -> XML 转换，但您可能使用 Java 或 Python 进行转换。转换为基本结构然后使用 XSLT（2.0！）进行微调可能是最简单的。

# c# - 从 VS.2010 到 Linux ubuntu 的 Mono 调试

> ID：11503573
> 
> 赞同：1
> 
> 时间：2012-07-16T11:44:19.843
> 
> 标签：c#, visual-studio-2010, debugging, mono

我们正在研究单声道的 VS 工具，但在文档下我找不到任何相关信息如何安装单声道服务器以在 linux 服务器上进行远程调试。

它也没有说这是一个 gui 或命令行应用程序......我们没有在任何 linux 机器上运行 GUI ......

Linux 是 Ubuntu 12.04 LTS 拥有最新的单声道发行版...

那么是否有可能实现在仅控制台系统上安装单声道调试服务器以及如何实现？

谢谢您最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:02:51.703

过去，可以使用 Mono Tools for Visual Studio 进行设置

[http://visualstudiogallery.msdn.microsoft.com/7fbae0bb-7ddf-498d-8a2a-73f96b72d749/](http://visualstudiogallery.msdn.microsoft.com/7fbae0bb-7ddf-498d-8a2a-73f96b72d749/)

[http://www.mono-project.com/GettingStartedWithMonoVS](http://www.mono-project.com/GettingStartedWithMonoVS)

但是，在从 Novell 到 Xamarin 的过渡之后，此扩展似乎有一段时间处于非活动状态。

在任何 Mono 开发人员发表评论之前，您可能不得不求助于 MonoDevelop。

# jquery - 减少显示的加载时间：响应式网页设计中的无元素

> ID：11503575
> 
> 赞同：3
> 
> 时间：2012-07-16T11:44:23.630
> 
> 标签：jquery, html, css, media-queries

我使用 Display:none 移动设备方法创建了响应式设计。但是当我们使用这种方法时，元素会加载，并且会导致加载时间过长。那么有什么简单的方法可以减少加载时间。我更喜欢一些 External JS 来解决这些问题。

有谁能够帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:52:10.683

I'm assuming the load time is being increased by large images? One solution would be to use the Lazyload jQuery plugin which only loads images when they are within the viewport.

[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

I'm not sure if it will still load images that are not visible. However, you could instead use a class on elements which should not be visible, and then use this to position them outside of the viewport.

EDIT: Lazyload will skip hidden images by default. (See the bottom of the page linked above)

# android - android服务需要在一段时间后停止

> ID：11503577
> 
> 赞同：3
> 
> 时间：2012-07-16T11:44:31.700
> 
> 标签：android, service

我正在运行`Service`using `AlarmManager`. 运行正常，`Service`我正在`Service`手动停止（单击 a `Button`），但我需要`Service`在某个时间后停止（可能是 10 秒）。我可以使用，但是 在给定时间后`this.stopSelf();`如何调用？`this.stopSelf();`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-08T14:38:38.730

这可以很容易地使用`timer`和`timerTask`一起完成。

我仍然不知道为什么没有建议这个答案，而是提供的答案没有提供直接和简单的解决方案。

在服务子类中，全局创建它们（您可以不全局创建它们，但您可能会遇到问题）

```
//TimerTask that will cause the run() runnable to happen.
TimerTask myTask = new TimerTask()
{
    public void run()
    {
        stopSelf();
    }
};

//Timer that will make the runnable run.
Timer myTimer = new Timer();

//the amount of time after which you want to stop the service
private final long INTERVAL = 5000; // I choose 5 seconds 
```

现在在您`onCreate()`的服务中，执行以下操作：

`myTimer.schedule(myTask, INTERVAL);`

这应该会在 5 秒后停止服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:58:02.670

使用服务内的**postDelayed**方法`Handler`来完成它。例如：

```
new Handler().postDelayed(new Runnable() {
@Override
    public void run() {
        stopSelf();
    }
}, 10000);    //will stop service after 10 seconds 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T12:04:52.903

可能您应该考虑使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)吗？当它没有工作时它会停止，所以你不需要自己管理它的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:02:54.263

1.  创建一个`Intent`以启动`Service`. 将 设置`action`为自定义操作，例如`"com.yourapp.action.stopservice"`。
2.  使用`AlarmManager`，启动`Intent`以启动`Service`（无论您现在正在做什么）。如果它已经在运行，`onStartCommand()`这将被传递给。`Service`
3.  在`onStartCommand()`，检查`action`传入的`Intent`。如果`action.equals("com.yourapp.action.stopservice")`，停止`Service`使用`this.stopSelf()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-18T17:11:16.303

在**Kotlin中，您可以使用此代码在****onStartCommand()**方法中停止服务：

```
 Handler(Looper.getMainLooper()).postDelayed({ stopSelf() }, 10000) 
```

# uml - 三类之间的关联

> ID：11503580
> 
> 赞同：2
> 
> 时间：2012-07-16T11:44:37.357
> 
> 标签：uml, magic-draw

我有以下情况/模型：

![在此处输入图像描述](../Images/2c06f5448b848c8d09f0c3412c451797.png)

我有一个**Player**类，它有一个**Color**和一个**Figure**。非常简单。但现在我想给**Figure**一个关联到**Color**：

![在此处输入图像描述](../Images/57f17eb42bc7c148795abbe90bd37391.png)

现在我正在寻找一种方法来强制 Figure 具有与 Player 相同的颜色。也许我错过了一些非常明显的东西，但我不知道该怎么做。有OCL表达式吗？

我正在使用魔术抽奖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:43:00.710

您可以使用*三元关联*。UML 支持 N 元关联。见这里：[http ://www.uml-diagrams.org/association.html](http://www.uml-diagrams.org/association.html)

另外，这里有一段关于在 MagicDraw 中绘制三元关联的 YouTube 视频：[http ://www.youtube.com/watch?v=eOIQ4hOnneU](http://www.youtube.com/watch?v=eOIQ4hOnneU)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-18T03:02:36.117

让 Color 成为其他之间的关联类，这样对于它们的每两个实例，就有一个颜色实例，这就是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:09:44.363

“人物具有与播放器相同的颜色”

这通常不作为直接关联处理，而是由 Player 类及其关联间接处理。

在“图”中具有“颜色”属性并添加限制是有效的，该限制被建模为 OCL 注释/注释。

# windows-phone-7 - 设计 Windows 手机应用程序 UI 的最佳实践

> ID：11503587
> 
> 赞同：0
> 
> 时间：2012-07-16T11:45:00.433
> 
> 标签：windows-phone-7, user-interface

我是 Windows Phone 应用程序开发的新手。我想知道在 Windows Phone 应用程序中实现 UI 的最佳实践或最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:57:27.450

很难对您的问题给出通用答案。只能推荐一些链接、书籍、教程等。

您可以从此处阅读 Microsoft 的指南开始：

[Windows Phone 用户体验设计指南](http://msdn.microsoft.com/en-us/library/hh202915%28v=VS.92%29.aspx)

然后你可以阅读设计师的教程，比如这个，在我看来很棒：

[地铁设计原则](http://ux.artu.tv/?p=179)

然后你也许可以阅读这篇很棒的文章：

[Windows Phone 7 和 Metro 设计简介](http://uxdesign.smashingmagazine.com/2011/12/20/introduction-designing-windows-phone-7-metro/)

如果你想再次直接从 Microsoft 获得一些教程，你可以在这里找到它们，它们很棒：

[WP 混合和设计教程](http://www.microsoft.com/design/toolbox/school/tutorials.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:53:04.703

Your qn covers a Vast area of the Windows phone development and there is no specific answer for this because it all depends on the kind of application you are developing and your application needs.

For an general overview, [Check this link](http://msdn.microsoft.com/en-us/library/hh202915%28v=VS.92%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:56:02.143

**微软的 windows phone 7 ui 指南，包括有关该主题的视频：**

[Metro Design Language of Windows Phone 7 Windows Phone](http://www.microsoft.com/design/toolbox/tutorials/windows-phone-7/metro/)
[设计资源](http://msdn.microsoft.com/en-us/library/ff637515%28v=vs.92%29.aspx)

# math - 对于 SurfaceFormat.Rgba64 等 16 位浮点纹理格式，浮点后的范围是多少？

> ID：11503588
> 
> 赞同：0
> 
> 时间：2012-07-16T11:45:02.627
> 
> 标签：math, floating-point

当使用 SurfaceFormat.Rgba64 在 HLSL 中渲染时，我只有 [0, 1] 的范围。为了解决这个问题，我希望在浮点数之后使用整个数字范围（不确定术语是否正确？）。

我可以通过使用两个常量将数字向左（16BIT_MULTIPLIER）和向右（16BIT_INVMULTIPLIER）移动来做到这一点

```
16BIT_MULTIPLIER = 1000
16BIT_INVMULTIPLIER = 1 / 16BIT_MULTIPLIER 
```

我可以将数字向右移动并保持正确精度的最大量是多少？换句话说，16BIT_MULTIPLIER 的最大值是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:18:09.863

在标准的 32 位 IEEE 754 浮点值中，数字中最高有效位与其最低有效位之间的最大比率为 2 ^(23)。这是因为浮点编码有 24 位（包括一个“隐式位”）作为有效位（或小数）。例如，最高位可能是 2 ^(23)而最低位是 2 ⁰ (1)，或者最高位可能是 2 ^(12)而最低位是 2 ^(-11)。在您的情况下，您可能希望使用最高位 2 ^(-1)和最低位 2 ^(-24)。您告诉我们您要映射到的范围 ([0, 1]) 但不是您要映射的范围，因此我们无法告诉您要使用的比例因子。

如果您从无符号 16 位数字映射，范围为 [0, 65536)，则可以使用 1/65536 的比例因子。（在许多语言中，您会编写`1./65536`以获得浮点常量；`1/65536`将是一个计算结果为零的整数表达式。）这种缩放会将您的所有数字映射到目标范围，其可用精度“低于”数字，但它会不要为添加数字或其他增加幅度的操作留下任何余量。如果您想在将结果保持在区间 [0, 1] 的同时为更多算术留出空间，那么您需要更大的比率（更小的比例因子）。

您应该使用 2 的幂作为比例因子。乘以 2 的幂在二进制浮点中没有舍入误差。乘以十次方或其倒数（这必然是近似的，因为十次方的倒数不能用二进制浮点数精确表示）通常会导致舍入误差。

在标准的 64 位 IEEE 浮点值中，最大比率为 2 ^(52)。

你问最大值 16BIT_MULTIPLIER 可以是多少，但这不太可能是你真正想要的。您可以使 16BIT_MULTIPLIER 尽可能大，直到数字的低位达到 2 ^(-149)。此时，您到达指数范围的末尾（高位为 2 ^(-126)），并且无法表示具有较小值的位（在 32 位浮点中）。

# assembly - objdump 使用的反汇编库

> ID：11503590
> 
> 赞同：6
> 
> 时间：2012-07-16T11:45:20.387
> 
> 标签：assembly, disassembly, objdump

我正在寻找一个执行二进制代码反汇编的库。

我发现 libdisasm 执行的任务与我想要的完全相同。但是，我发现一些链接表明 libdisasm 不适用于 64 位可执行文件。这是对的吗 ？

但是 objdump 对 64 位可执行文件的输出是可靠的（据我所知）。那么，objdump 是否也使用类似的库进行反汇编？最初，我认为 objdump 使用 libdisasm。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T12:20:53.843

`objdump`使用[`libopcodes`](http://www.toothycat.net/wiki/wiki.pl?Binutils/libopcodes)从`binutils`. 然而，它非常基础，因为它只提供文本表示，没有关于指令的结构化信息。其他选项：

*   [http://mkfs.github.com/content/opdis/](http://mkfs.github.com/content/opdis/)
*   [http://www.beaengine.org/](http://www.beaengine.org/)
*   [http://bastard.sourceforge.net/libdisasm.html](http://bastard.sourceforge.net/libdisasm.html)
*   [http://code.google.com/p/libdasm/](http://code.google.com/p/libdasm/)（有更多链接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T03:37:26.553

这只是为了澄清原始发布者在评论中提出的问题（我没有足够的评论点数）。

libdisasm 项目多年没有得到积极维护。它不支持 x86-64（64 位）指令集，或 SSE3 之后的任何 x86（32 位）扩展。

opdis 项目是 libdisasm 的替代品。libdisasm 的作者编写 opdis 是为了避免支持 Intel 和 AMD 不断变化的指令集所需的频繁更新。opdis 中的实际操作码反汇编由来自 GNU binutils（objdump 使用的反汇编程序）的 libopcodes 处理，其中 opdis 提供指令元数据和更高级别的反汇编函数。

# ruby-on-rails-3 - varnish rails 设计注销配置

> ID：11503598
> 
> 赞同：1
> 
> 时间：2012-07-16T11:45:47.673
> 
> 标签：ruby-on-rails-3, devise, passenger, varnish, varnish-vcl

我在前端使用清漆作为缓存服务器，并且带有乘客的 apache2 在我的 rails3 应用程序的后端运行。我正在使用设计 gem 进行身份验证，但我无法退出。

我认为清漆有一个选项可以清除登录的用户会话或 cookie。我想知道清漆配置，以便我可以注销。

这是我的清漆配置：

```
backend default {
.host = "127.0.0.1";
.port = "8080";
}

sub vcl_recv { 
 if(req.url ~ "my" || req.request == "POST" || req.request == "PUT" || req.request ==     "DELETE") {
return (pass);
 }
return (lookup);
}
sub vcl_fetch {

if(req.url ~ "logout" || req.url ~ "sign_out"){
 unset beresp.http.Set-Cookie;
}
if (req.request == "GET") {
           unset beresp.http.Set-Cookie;
           set beresp.cacheable = true;
           set beresp.ttl = 360m;
   }

   if (req.url ~ "images/" || req.url ~ "javascripts" || req.url ~ "stylesheets"){
           set beresp.ttl = 360m;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:06:35.157

I suppose that you have to include the logout urls in tou recv function because otherwise you are not telling rails to kill the session.

i would try with something like:

```
sub vcl_recv { 
    if(req.url ~ "logout" ||req.url ~ "my" || req.request == "POST" || req.request == "PUT" || req.request == "DELETE") {
        return (pass);
    }
    return (lookup);
} 
```

# c# - OpenFileDialog 路径问题

> ID：11503600
> 
> 赞同：3
> 
> 时间：2012-07-16T11:46:19.763
> 
> 标签：c#, .net, winforms, mmc

我有一个 OpenFileDialog，当用户第一次使用应用程序时单击“浏览”时，它应该打开一个特定的路径，比如 %ProgramData%。对于所有连续的术语，它应该打开最后使用的文件夹。

我试过：

```
 OpenFileDialog ofd = new OpenFileDialog();
        ofd.InitialDirectory = "C:\ProgramData";
        ofd.RestoreDirectory = true;
        ofd.FileName = "";
        DialogResult dr = ofd.ShowDialog(); 
```

这里的问题是，它每次都会打开“C:\ProgramData”，即使我在查找所需文件时更改了路径。是否有我应该设置的特定属性，或者我必须以编程方式跟踪 OpenFileDialog 的使用情况并相应地设置路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:57:16.900

做这样的事情：

```
// save your current directory  
string currentDirectory = Environment.CurrentDirectory;  

// create an OpenFileDialog and set RestoreCurrentDirectory to false.   
OpenFileDialog ofd = new OpenFileDialog();  
ofd.RestoreCurrentDirectory = false;  
ofd.ShowDialog();  

// save the selected directory locally.   
string selectedDirectory = Environment.CurrentDirectory;  // OpenFileDialog changed this value.   
Environment.CurrentDirectory = currentDirectory; // reset the property with the first value.   

// next time you open an OpenFileDialog, set the InitialDirectory property  
OpenFileDialog ofd2 = new OpenFileDialog();  
ofd.InitialDirectory = selectedDirectory; // set the InitialDirectory to what it was last time an OpenFileDialog was opened.   
ofd.ShowDialog(); 
```

RestoreDirectory 属性确保 Environment.CurrentDirectory 中的值将在 OpenFileDialog 关闭之前重置。如果 RestoreDirectory 设置为 false，则 Environment.CurrentDirectory 将设置为 OpenFileDialog 上次打开的目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:01:53.297

试试这个：

您正在单击按钮时将初始目录重置为 C:\ProgramData

```
public partial class Form1 : Form
    {
           OpenFileDialog ofd = new OpenFileDialog();

        public Form1()
        {
            InitializeComponent();
            ofd.InitialDirectory = "C:\\ProgramData";
        }    
        private void button1_Click(object sender, EventArgs e)
        {                     
          DialogResult dr = ofd.ShowDialog();
          ofd.InitialDirectory = null;   
        }    
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:55:43.820

我认为你读`RestoreDirectory`错了财产。实际上，它会在对话框关闭后将目录恢复为默认值。与您想要做的正好相反。

另请查看：[OpenFileDialog RestoreDirectory as no effect if Multiselect is set to true](https://stackoverflow.com/questions/2553731/openfiledialog-restoredirectory-as-no-effect-if-multiselect-is-set-to-true)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T11:51:04.863

简单地，

设置`FileDialog.RestoreDirectory`属性`true`。重新打开文件对话框时，它会找到最后一个目录。

**例子 ：**

```
ofd . RestoreDirectory = true; 
```

# php - 通过服务器端和客户端设置 cookie 的区别

> ID：11503601
> 
> 赞同：1
> 
> 时间：2012-07-16T11:46:25.253
> 
> 标签：php, javascript, jquery, zend-framework

```
function setCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}
function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

$(document).ready(function(){
alert(getCookie('foo'));
setCookie('foo','test'); //just setting a cookie on page load

$('#bing').click(function(){
$('#frm1').submit();

});
});

HTML side(foo.phtml)

<a href="javascript:void(0);" id="bing">Go</a>

<form id="frm1" method="POST" action="/somecontroller/someaction">
<input type="hidden" name="foo_post" value="this is from post" />
</form> 
```

//服务器端

```
public function someactionAction(){

$_COOKIE['foo'] = $this->_request->getPost('foo_post');
$this->_redirect('/somecontroller/foo');
} 
```

我的问题是在第一次加载页面时`alert`返回 null，因为未设置 cookie，如果我再次刷新，将获得`alert`“测试”，但如果我单击锚标记，则会发生表单提交并重写 cookie 值因为“这是来自帖子”，所以很明显在操作返回页面后会收到“这是来自帖子”的警报，但我仍然收到警报“测试”，cookie 值没有被重写

在我的 mozilla cookie 控制台中，有两个名为 foo 的 cookie，其值为“test”和“this is from post”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:49:37.030

“有两个名为 foo 的 cookie”

如果名称相同，则域必须不同。使用相同的域设置两个 cookie。请注意`example.net`与`www.example.net`或不同`.example.net`。

# jquery-mobile - 如何在页脚中居中水平控制组 - 在 jqm 1.1.1 中更改？

> ID：11503603
> 
> 赞同：7
> 
> 时间：2012-07-16T11:46:26.183
> 
> 标签：jquery-mobile, center, footer

这曾经在 1.1.0 中使控制组居中，但现在它似乎不在 1.1.1 中。

```
<div data-theme="a" data-role="footer" style="text-align:center;">
   <div data-role="controlgroup" data-type="horizontal" data-mini="true">
      <a href="foo" data-role="button">link1</a>
      <a href="boo" data-role="button">link2</a>
   </div>
   <div class="copy">&copy; 2012 bigco</div>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T07:38:38.957

**data-role="controlgroup"** div的**align="center"**属性可能适用于此。

 **```
<div data-theme="a" data-role="footer" align="center">
   <div data-role="controlgroup" data-type="horizontal" data-mini="true">
      <a href="foo" data-role="button">link1</a>
      <a href="boo" data-role="button">link2</a>
   </div>
   <div class="copy">&copy; 2012 bigco</div>
</div> 
```

[http://jsfiddle.net/sGFTy/1/](http://jsfiddle.net/sGFTy/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T08:03:27.957

我在这个网站上找到了解决方案：http: [//forum.jquery.com/topic/how-to-horizo​​ntally-center-a-set-of-grouped-buttons](http://forum.jquery.com/topic/how-to-horizontally-center-a-set-of-grouped-buttons)

CSS：

```
#navgroup {text-align:center;}
#navgroup div {display:inline-block;} 
```

的HTML：

```
<div id="navgroup">
    <div data-role="controlgroup" data-type="horizontal">
      <a href="index.htm" data-role="button" data-theme="e" data-mini="true" class="active menu">Menu</a>
      <a href="specials.htm" data-role="button" data-theme="e" data-mini="true" class="specials">Specials</a>
      <a href="howitworks.htm" data-role="button" data-theme="e" data-mini="true" class="howitworks">FAQ</a>
      <a href="http://www.facebook.com" data-rel="external" data-role="button" data-theme="e" data-mini="true"  class="feedback">Facebook</a>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:41:10.820

现在我在 JQM 1.2 上，这对我有用......

CSS

```
.center-controlgroup { text-align: center; } 
```

HTML

```
<div data-role="controlgroup" data-type="horizontal" class="center-controlgroup">...</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T18:08:27.847

如果使用 $("selector").show(); 问题仍然存在 显示元素，因为它应用了“显示：块”。

代替使用 .show()，现在使用 $("selector").css('display', 'inline-block');**

# json - 如何在 JsonNode 中创建插入新节点？

> ID：11503604
> 
> 赞同：73
> 
> 时间：2012-07-16T11:46:37.670
> 
> 标签：json, jackson

我创建了一个新的 JsonNode

```
JsonNode jNode = new ObjectCodec().createObjectNode(); 
```

使用此节点，然后如何在其中添加键值对，以便可以使用新值构造此新节点？我在[http://www.cowtowncoder.com/blog/archives/2011/08/entry_460.html](http://www.cowtowncoder.com/blog/archives/2011/08/entry_460.html)中读到的关于使用的内容

```
jNode.with("newNode").put("key1","value1"); 
```

但是查看 Jackson 的 JsonNode (v1.8) 的 API 并没有显示任何这样的方法。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-07-16T17:39:33.290

These methods are in `ObjectNode`: the division is such that most read operations are included in `JsonNode`, but mutations in `ObjectNode` and `ArrayNode`.

Note that you can just change first line to be:

```
ObjectNode jNode = mapper.createObjectNode();
// version ObjectMapper has should return ObjectNode type 
```

or

```
ObjectNode jNode = (ObjectNode) objectCodec.createObjectNode();
// ObjectCodec is in core part, must be of type JsonNode so need cast 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2014-02-26T14:24:46.943

我最近发现了更有趣的方法来创建任何`ValueNode`或`ContainerNode`（Jackson v2.3）。

```
ObjectNode node = JsonNodeFactory.instance.objectNode(); 
```

# python - 从文件搜索中排除除单个子目录之外的所有子目录

> ID：11503606
> 
> 赞同：0
> 
> 时间：2012-07-16T11:46:51.417
> 
> 标签：python

我有一个类似于以下的目录结构：

```
Dir1
Dir2
Dir3
Dir4
    L SubDir4.1
    L SubDir4.2
    L SubDir4.3 
```

我想生成一个文件列表（带有完整路径），其中包含 的所有内容`Dirs1-3`，但仅限`SubDir4.2`于`Dir4`. 我到目前为止的代码是

```
import fnmatch
import os

for root, dirs, files in os.walk( '.' )
    if 'Dir4' in dirs:
        if not 'SubDir4.2' in 'Dir4':
            dirs.remove( 'Dir4' )
    for file in files
        print os.path.join( root, file ) 
```

我的问题是，我尝试排除`SubDir4.2`路径中没有的任何文件的部分是排除 中的所有内容`Dir4`，包括我想保留的内容。我应该如何修改上面的内容来做我想做的事？

**更新 1**：我应该补充一点，下面有很多目录，`Dir4`因此手动将它们列在排除列表中并不是一个实际的选择。我希望能够指定为要读取`SubDur4.2`的唯一子目录。`Dir4`

**更新 2**：由于我无法控制的原因，我只能访问 Python 2.4.3 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:07:54.607

您的代码段中有一些错别字。我提出这个：

```
import os

def any_p(iterable):
    for element in iterable:
        if element:
            return True
    return False

include_dirs = ['Dir4/SubDir4.2', 'Dir1/SubDir4.2', 'Dir3', 'Dir2'] # List all your included folder names in that

for root, dirs, files in os.walk( '.' ):
    dirs[:] = [d for d in dirs if any_p(d in os.path.join(root, q_inc) for q_inc in include_dirs)]

    for file in files:
        print file 
```

编辑：根据评论，我已经改变了，所以这是包含列表，而不是排除列表。

EDIT2：添加了一个 any_p（python 版本 < 2.5 的 any() 等效函数）

EDIT3bis：如果您在其他文件夹中有其他具有相同名称“SubDir4.2”的子文件夹，您可以使用以下命令指定位置：

```
include_dirs = ['Dir4/SubDir4.2', 'Dir1/SubDir4.2'] 
```

假设你有一个 Dir1/SubDir4.2。

如果它们很多，那么您可能希望使用 fnmatch 或正则表达式查询来改进这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:42:39.240

我更改了 mstud 的解决方案，为您提供所需的内容：

```
import os;

for root, dirs, files in os.walk('.'):
    # Split the root into its path parts
    tmp = root.split(os.path.sep)
    # If the lenth of the path is long enough to be your path AND
    # The second to last part of the path is Dir4 AND
    # The last part of the path is SubDir4.2 THEN
    # Stop processing this pass.
    if (len(tmp) > 2) and (tmp[-2] == 'Dir4') and (tmp[-1] != 'SubDir4.2'):
        continue
    # If we aren't in Dir4, print the file paths.
    if tmp[-1] != 'Dir4':
        for file in files:
            print os.path.join(root, file) 
```

简而言之，第一个“if”跳过了 Dir4 下不是 SubDir4.2 的任何目录内容的打印。第二个“if”跳过 Dir4 目录内容的打印。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T11:59:39.517

```
for root, dirs, files in os.walk('.'):
    tmp = root.split(os.path.sep)
    if len(tmp)>2 and tmp[-2]=="Dir4" and tmp[-1]=="SubDir4.2":
        continue

    for file in files:
        print os.path.join(root, file) 
```

# windows-phone - Windows Phone 7中Expanderview项目的水平对齐

> ID：11503609
> 
> 赞同：0
> 
> 时间：2012-07-16T11:46:52.657
> 
> 标签：windows-phone

我想在水平布局而不是垂直布局中对齐 ExpanderView 的内容或项目。ExpanderHeader 是动态设置的，其内容也是动态添加的。app.xaml 中的 xaml 部分和 CustomeItemTemplate 如下

```
 <toolkit:ExpanderView 
         Width="470" 
         Header="{Binding TaskName, Mode=TwoWay}"
          x:Name="taskNameExpander"
          Margin="5,10,5,10"
          Foreground="#FF677389" FontSize="24"   VerticalAlignment="Top"
          HorizontalAlignment="Left"
          ItemsSource="{Binding dateTime}" 
          ItemTemplate="{StaticResource CustomItemTemplate}"
          HorizontalContentAlignment="Left">
   </toolkit:ExpanderView>

<DataTemplate x:Key="CustomItemTemplate">

       <StackPanel Orientation="Horizontal" Height="60" >
            <TextBlock FontSize="16" Text="{Binding Date, Mode=OneWay}"  
            TextWrapping="Wrap" Foreground="#FF677389" Margin="0,6,0,0" Height="30" Width="100"/>
            <TextBox BorderBrush="Goldenrod" BorderThickness="1" FontSize="16" Text="{Binding Time, Mode=TwoWay}" TextWrapping="Wrap" Foreground="#FF677389" Margin="0" Height="60" Width="150"/>
        </StackPanel>

  </DataTemplate> 
```

我仍然让内容垂直对齐。有人可以指出我在这里做错了什么吗？

* * *

这是您要求的示例代码

```
 <Border BorderBrush="White" BorderThickness="1" Margin="5">
                            <ScrollViewer Width="Auto" HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Disabled">
                            <toolkit:ExpanderView 
                                Width="1600" 
                                Header="{Binding TaskName, Mode=TwoWay}"
                                x:Name="taskNameExpander" Margin="5,10,5,10" Foreground="#FF677389" FontSize="24" VerticalAlignment="Top" HorizontalAlignment="Left"
                                ItemsSource="{Binding dateTime}" 
                                ItemTemplate="{StaticResource CustomItemTemplate}"
                                ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                HorizontalContentAlignment="Left">
                                <toolkit:ExpanderView.ItemsPanel>
                                    <ItemsPanelTemplate >
                                        <StackPanel Orientation="Horizontal" Width="Auto" ScrollViewer.HorizontalScrollBarVisibility="Visible"/>

                                    </ItemsPanelTemplate>
                                </toolkit:ExpanderView.ItemsPanel>

                            </toolkit:ExpanderView>
                            </ScrollViewer>

                        </Border> 
```

我的 app.xaml 有 CustomItemTemplate 定义如下

```
 <DataTemplate x:Key="CustomItemTemplate">
        <StackPanel Orientation="Vertical" Height="100" >
            <TextBlock FontSize="16" Text="{Binding Date, Mode=OneWay}" TextWrapping="Wrap" Foreground="#FF677389" Margin="0,6,0,0" Height="30" Width="100"/>
            <TextBox BorderBrush="Goldenrod" BorderThickness="1" FontSize="16" Text="{Binding Time, Mode=TwoWay}" TextWrapping="Wrap" Foreground="#FF677389" Margin="0" Height="60" Width="150">
            <TextBox.InputScope>

                <InputScope >
                    <InputScopeName NameValue="Number"></InputScopeName>

                </InputScope>

            </TextBox.InputScope>
            </TextBox>
        </StackPanel>
    </DataTemplate> 
```

我只想水平滚动 ExpanderView 项目。现在它正在滚动，但整个 ExpanderView 正在滚动，包括它的标题。标题必须完好无损，只有项目必须滚动。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:07:38.197

您应该为 ExpanderView 控件设置 ItemsPanel。

```
<toolkit:ExpanderView 
                     Width="470" Height="100"
                      x:Name="taskNameExpander"
                      Margin="5,10,5,10"
                      FontSize="24" Background="White"
                      HorizontalAlignment="Left"
                      ItemsSource="1 2 3 4" 
                      ItemTemplate="{StaticResource CustomItemTemplate}"
                      HorizontalContentAlignment="Left">
                    <toolkit:ExpanderView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </toolkit:ExpanderView.ItemsPanel>
            </toolkit:ExpanderView> 
```

# f# - 使用 F# 搜索元素，然后添加兄弟节点

> ID：11503610
> 
> 赞同：0
> 
> 时间：2012-07-16T11:46:54.013
> 
> 标签：f#, xml-parsing, linq-to-xml

我正在尝试将 F# 用于我需要运行的实用程序作业之一。

从包含 xml 配置文件的目录中，我想识别包含特定节点的所有文件，并且在找到匹配项时，我想在同一个文件中插入一个兄弟节点。我已经编写了代码片段来识别所有文件，现在我有一个文件序列，我想对其进行迭代并搜索属性并在必要时附加。

```
open System.Xml.Linq

let byElementName elementToSearch = XName.Get(elementToSearch)

let xmlDoc = XDocument.Load(@"C:\\Some.xml")
xmlDoc.Descendants <| byElementName "Elem"
|> Seq.collect(fun(riskElem) -> riskElem.Attributes <| byElementName "type" )
|> Seq.filter(fun(pvAttrib) -> pvAttrib.Value = "abc")
|> Seq.map(fun(pvAttrib) -> pvAttrib.Parent)
|> Seq.iter(printfn "%A") 
```

**我想要做的是代替最后一个 printf，添加另一个类型`"Elem"`的节点`type = "abc2"`**

```
 <Product name="Node" inheritsfrom="Base">
      <SupportedElems>
        <Elem type="abc" methodology="abcmeth" />
        <Elem type="def" methodology="defmeth" />
</SupportedElems>
</Product> 
```

结果 XML：

```
<Product name="Node" inheritsfrom="Base">
  <SupportedElems>
    <Elem type="abc" methodology="abcmeth" />
    <Elem type="abc2" methodology="abcmeth" /> <!-- NEW ROW TO BE ADDED HERE -->
    <Elem type="def" methodology="defmeth" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:49:53.080

在我看来，复杂的 LINQ to XML 查询很笨拙，最好使用 XPath：

```
open System.Xml.Linq
open System.Xml.XPath

xmlDoc.XPathEvaluate("//Elem[@type='abc']") :?> _
|> Seq.cast<XElement>
|> Seq.iter (fun el -> 
  el.AddAfterSelf(XElement.Parse(@"<Elem type=""abc2"" methodology=""abcmeth""/>"))) 
```

之后的 XML 文档：

```
<Product name="Node" inheritsfrom="Base">
  <SupportedElems>
    <Elem type="abc" methodology="abcmeth" />
    <Elem type="abc2" methodology="abcmeth" />
    <Elem type="def" methodology="defmeth" />
  </SupportedElems>
</Product> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:56:21.810

您的函数正确地`Elem`从文件中找到元素，但它不打印任何内容。您正在打印的`elem.Value`属性是指元素的*主体*，在您的情况下为空。如果您使用以下输入，则它会打印“一”和“二”：

```
<Product name="Node" inheritsfrom="Base"> 
  <SupportedElems> 
    <Elem type="abc" methodology="abcmeth">one</Elem>
    <Elem type="def" methodology="defmeth">two</Elem>
  </SupportedElems> 
</Product> 
```

您可以像这样打印整个元素（而不仅仅是正文）：

```
let pvElement (configFile : string) =  
  let xmlDoc = XDocument.Parse configFile 
  xmlDoc.Descendants(byElementName "Elem")
  |> Seq.iter (printfn "%A") 
```

如果您想选择一个特定元素（具有某些指定属性），然后在找到该元素时执行某些操作，您可能可以使用该`Seq.tryPick`函数，但这将是一个单独的问题。

# iphone - 初始化期间存储的值永远不会被读取

> ID：11503616
> 
> 赞同：1
> 
> 时间：2012-07-16T11:47:16.627
> 
> 标签：iphone, ios4

我正在尝试解析 google api，以便我可以检索地址及其数据。我在注释行中收到两个错误。为什么我会收到这些错误。我分配了dit，所以我必须正确释放它。这是我检索数据的代码

```
 NSURL *url=[NSURL URLWithString:str];
    NSData *data=[[NSData alloc]initWithContentsOfURL:url];
    NSString *str1=[[[NSString alloc]initWithData:data  encoding:NSUTF8StringEncoding]autorelease];
    NSDictionary *dit=[[[NSDictionary alloc]init]autorelease];//value stored to dit during initialization is never read
    dit=[str1 JSONValue];
    NSArray *dit1=(NSArray *) [dit objectForKey:@"results"];
    NSDictionary *dit3=[[dit1 objectAtIndex:0]objectForKey:@"geometry"];
    NSDictionary *dit4=[dit3 objectForKey:@"bounds"];
    NSDictionary *northeast=[dit4 objectForKey:@"northeast"];
    NSDictionary *lt=[northeast objectForKey:@"lat"];
    NSDictionary *southwest=[dit4 objectForKey:@"southwest"];
    NSDictionary *lng=[southwest objectForKey:@"lng"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:10:53.813

问题大概是这样的：

```
NSDictionary *dit=[[[NSDictionary alloc]init]autorelease];
dit=[str1 JSONValue]; 
```

您创建一个空字典，然后从不使用它，而是用从 JSONValue 返回的值覆盖该值。这段代码应该是：

```
NSDictionary *dit=[str1 JSONValue]; 
```

# javascript - 页面加载时触发 Facebook 点赞按钮

> ID：11503619
> 
> 赞同：-6
> 
> 时间：2012-07-16T11:47:26.437
> 
> 标签：javascript, jquery, facebook

我想在页面加载后立即触发 Facebook like 按钮。

这是使用 Facebook like 按钮所需的脚本：

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
  FB.init({
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true  // parse XFBML
  });
</script> 
```

Facebook 喜欢按钮：

```
<fb:like href="http://ecommercedeveloper.com" layout="standard" show_faces="true" width="400" action="like" font="segoe ui" colorscheme="light" id="facebook" /> 
```

我的脚本，在页面底部：

```
<script>
  (function($){
    $('fb:like').trigger('click');
  })(jQuery);
</script> 
```

不幸的是，当脚本运行时，似乎没有按下类似按钮。有没有办法非手动触发like按钮？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T02:53:37.183

你不能。单击`<fb:like>`元素没有任何效果，因为它只是一个容器。实际可点击的“喜欢”按钮加载在`<iframe>`其中。由于此 iframe 是从 加载的`facebook.com`，[因此同源策略](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)会阻止您访问其内容（包括您想要的链接），除非您也在`facebook.com`.

如果此安全限制不存在，您将能够使用以下 jQuery：

```
$(".fb_ltr").contents().find(".connect_widget_like_button").click() 
```

如果这是可能的，那将代表网络安全模型中的一个巨大缺陷。如果您找到某种方法来做到这一点，您会发现将漏洞利用程序出售给某些犯罪组织比使用它产生欺诈性“喜欢”更有利可图。

# database - 调用 WCF 服务来获取用于初始化控件（如下拉列表和网格）的数据的好方法吗

> ID：11503626
> 
> 赞同：0
> 
> 时间：2012-07-16T11:47:51.597
> 
> 标签：database, wcf

我是 WCF 的新手，正在尝试创建一个示例应用程序。我只是想知道调用 Service 方法来频繁获取数据是否是最佳实践。例如，在页面加载时，要使用数据库中的数据初始化下拉菜单、网格和文本框等控件，最好的方法是调用 WCF 服务或使用 ADO.net。

请解释。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:52:30.023

WCF and ADO.NET are complete different technologies. You will use them for different scenarios. WCF is used when creating scalable, distributed applications. ADO.NET is used as a database technology. They can be used together but they are certainly not interchangeable. 

If your Web Server which is running your ASP.NET code has direct access to the database server, you can use ADO.NET to query your database and initialize some values when loading the page. You don't WCF for this scenario.

WCF is a technology that is used for communication between servers. Normally, you would use WCF to setup a web service that can be called from other applications. The WCF service would then execute some code (for example, it could use ADO.NET to access a database that's accessible from the WCF Server) and then return the results to the client. Using WCF will have a performance penalty. You should only use it when you are creating a distributed application or if you want to divide your workload over multiple servers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:50:31.930

您考虑使用 WCF 服务检索这些值的原因是什么？

数据是来自外部方，还是您的数据库中有数据？如果您的数据库中有它，为什么要考虑进行 WCF 调用（额外的复杂性，性能损失）来检索这些数据？

# iphone - 如何将应用程序联系人的差异与 phoneBook 或 2 个 ABAdressBookRef 的差异？

> ID：11503627
> 
> 赞同：2
> 
> 时间：2012-07-16T11:47:58.980
> 
> 标签：iphone, cocoa-touch, contacts, abaddressbook

我的应用程序上有一个通讯录，需要定期将这些联系人与服务器兼电话簿同步。

我正在考虑更改联系人的差异，而不是使用总电话簿来更新应用程序的联系人，而我在`ABAddessBook`API 中没有找到其功能。问题是应用程序中的联系人对象与我通过 function 从 phoneBook 获得的联系人对象的类型不同`ABAddressBookCopyArrayOfAllPeople()`。

如果我有效地获得更改联系人的差异，那么我只能同步这些联系人。这可能吗？

嘿！我发现我们可以注册到 ABAdressBook change by `ABAddressBookRegisterExternalChangeCallback`，但是有没有办法获得更改联系人的差异？

谢谢。

# c#-4.0 - 获取序列化为json的参数列表

> ID：11503629
> 
> 赞同：0
> 
> 时间：2012-07-16T11:48:09.553
> 
> 标签：c#-4.0, json

我有一个名为的 C# 方法

```
Void getCompanyAddresses(int iCompanyId, int iPersonId, string PersonName) 
```

我要创建的是当前方法参数及其值的 JSON 数据，例如上面的 JSON 对象就像

```
{"iCompanyId":1214,"iPersonId":51,"PersonName":"Chetan"} 
```

我还需要检查参数的总大小，其值不大于 1 MB。

谢谢。

# xslt-2.0 - 使用 XSLT 2.0 分析字符串消除换行符

> ID：11503636
> 
> 赞同：0
> 
> 时间：2012-07-16T11:48:23.600
> 
> 标签：xslt-2.0

我在将 XML 转换为 HTML 的样式表中使用 XSLT 2.0 元素分析字符串；具体来说，我用它来将化学公式中下标的字符串编码转换为 HTML 下标。因此，结果是一个字符串，进入 ap 或 td 元素，带有嵌入的标记。

转换应该产生像 H [2] O 这样的输出，但实际上在 HTML 中插入了一个换行符：

```
H
<sub>2</sub>O 
```

并且这个中断（正确地）被浏览器解释为一个空格：

H [2] O

这是丑陋的。

有没有办法删除换行符？我尝试将整个分析字符串元素放在一行上，但这不起作用。

输入将类似于

```
<OrdinaryStructralFormula>H$_2$O</OrdinaryStructuralFormula> 
```

对于一个简单的案例和

```
<OrdinaryStructralFormula>C$_2$OH$_5$$^-</OrdinaryStructuralFormula> 
```

对于一个更复杂的。请注意，在一般情况下，下标模式可以匹配多次，并且可以位于字符串的中间或末尾。该模式还必须匹配并消除任何收费符号：第二个示例末尾的 $^- 位。

XSLT 处理器是 Saxon 9.4，XSLT 模板如下。

```
<xsl:template name="formula">
  <xsl:param name="formula"/>
  <xsl:if test="$formula">
    <xsl:variable name="f" select="translate($formula, '$', '')"/>
    <xsl:analyze-string select="$f" regex="(_)(\d+)|(\^)\d*\+|(\^)\d*\-">
      <xsl:matching-substring>
        <xsl:if test="regex-group(1)='_'">
          <sub><xsl:value-of select="regex-group(2)"/></sub>
        </xsl:if>
      </xsl:matching-substring>
      <xsl:non-matching-substring>
        <xsl:value-of select="."/>
      </xsl:non-matching-substring>
    </xsl:analyze-string>
  </xsl:if>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:39:15.163

**我无法重现报告的结果**。

**这个转换**（这是你应该给我们的，但你只提供了一个模板）：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="/">
     <xsl:call-template name="formula">
       <xsl:with-param name="formula" select="/*"/>
     </xsl:call-template>
    </xsl:template>

    <xsl:template name="formula">
      <xsl:param name="formula"/>

      <xsl:if test="$formula">
        <xsl:variable name="f" select="translate($formula, '$', '')"/>
        <xsl:analyze-string select="$f" regex="(_)(\d+)|(\^)\d*\+|(\^)\d*\-">
          <xsl:matching-substring>
            <xsl:if test="regex-group(1)='_'">
              <sub><xsl:value-of select="regex-group(2)"/></sub>
            </xsl:if>
          </xsl:matching-substring>
          <xsl:non-matching-substring>
            <xsl:value-of select="."/>
          </xsl:non-matching-substring>
        </xsl:analyze-string>
      </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

**当使用 Saxon 9.1.05 应用于以下 XML 文档时：**

```
<formula>H$_2$O</formula> 
```

**产生想要的正确结果**：

```
H<sub>2</sub>O 
```

**当对第二个 XML 文档应用相同的转换时**：

```
<OrdinaryStructuralFormula>C$_2$OH$_5$$^-</OrdinaryStructuralFormula> 
```

**再次产生想要的正确结果：**

```
C<sub>2</sub>OH<sub>5</sub> 
```

**请注意**：我用另外两个 XSLT 2.0 处理器运行了相同的转换：XQSharp (XMLPrime) 和 AltovaXML (XML-SPY)，得到了完全相同的正确结果。

# python - Python CSV：读取以逗号结尾的行会导致空结果

> ID：11503637
> 
> 赞同：1
> 
> 时间：2012-07-16T11:48:31.993
> 
> 标签：python, csv

如果这是一个愚蠢的问题，请随时骚扰我，因为我自己没有找到正确的答案。我正在尝试读取包含每一行数据的 CSV 格式文件，并且每一行都以逗号结尾。像这样：

```
-1,
-1,
1,
1, 
```

当我尝试使用 Python 的 CSV 函数时，我使用以下代码：

```
with open(waveform, 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
        print row 
```

输出以下内容：

```
['-1', '']
['-1', '']
['1', '']
['1', ''] 
```

我希望它忽略每一行的空字符。你有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T11:49:17.343

忽略每一行的最后一个元素：

```
with open(waveform, 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
        print row[:-1] 
```

或将每一行转换为字典：

```
columns = ['value']
with open(waveform, 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
        rec = dict(zip(columns, row))
        print rec 
```

印刷

```
{'value': '-1'}
{'value': '-1'}
{'value': '1'}
{'value': '1'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:58:25.783

我会选择@eumiro 的回答。

有一个`lineterminator=`选项，`csv.reader`但显然目前被忽略了......，所以是不行的。

如果您*必须* `csv.reader`没有看到尾随字段分隔符，请编写一个过滤器：

```
def remove_last_char(fileobj):
    for line in fileobj:
        yield line.strip()[:-1]

with open(waveform, 'rb') as f:
    reader = csv.reader( remove_last_char(f) )
    for row in reader:
        print row[:-1] 
```

# javascript - 是否可以在 Ajax 中使用代理？

> ID：11503641
> 
> 赞同：0
> 
> 时间：2012-07-16T11:48:51.690
> 
> 标签：javascript, jquery, ajax

我想知道我是否可以使用带有 javascript ajax 调用的代理，无论是使用 jQuery 还是使用标准 javascript。

也许是这样的：

```
var ajax = new Ajax({
    proxy:'123.123.123.1:8080',
    proxyUsername:'myUsername',
    proxyPassword:'myPassword',
    ...etc
}); 
```

目的是在伪造用户 IP 地址的同时从第三方下载文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:50:41.913

不可以。浏览器不允许您为 XHR 请求设置不同的代理服务器。

# javascript - 使用画布的倒数计时器

> ID：11503642
> 
> 赞同：1
> 
> 时间：2012-07-16T11:48:55.030
> 
> 标签：javascript, canvas

我正在尝试创建一个倒计时计时器，从 60 秒倒计时到 0。我不确定 A.如何将重复次数限制为 60 和 0。如何减少倒计时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:09:20.483

我承认您的问题与画布无关，但这是倒计时的代码:)

```
(function(){     
    var sec = 60;  
    var id = window.setInterval(function() {
        sec--;
        if (sec < - 1) {
            clearInterval(id);
            alert("Time complete");
            return;
        }        
    }, 1000/60)
})(); 
```

# xml - 在 xslt 中查找和替换实体

> ID：11503644
> 
> 赞同：0
> 
> 时间：2012-07-16T11:49:01.510
> 
> 标签：xml, xpath, xslt-1.0

我需要在 xslt 中查找并替换一个实体。我需要在不使用模板匹配的情况下执行此操作。

假设我的xml是这样的，

```
<root>
  <p>Master&apos;s</p>
  <p><blockFixed type="quotation"><p>let&apos;s</p></blockFixed></p>
   <p>student&apos;s<featureFixed id=1/></p>
   <p><blockFixed type="quotation"><p>nurse&apos;s</p></blockFixed></p>
   <p>Master&apos;s</p>
</root> 
```

我需要改变`&apos;`成`&rsquo;`所以输出应该是这样的，

```
<root>
  <p>Master<apos>&rsquo;</apos>s</p>
  <p><blockFixed type="quotation"><p>let<apos>&rsquo;</apos>s</p></blockFixed></p>
   <p>student<apos>&rsquo;</apos>s<featureFixed id=1/><\p>
   <p><blockFixed type="quotation"><p>nurse<apos>&rsquo;</apos>s</p></blockFixed></p>
   <p>Master&apos;s</p>
</root> 
```

我通过使用模板匹配使用了替换方法，`p`但之后我无法对其他标签`blockfixed`等进行任何操作。所以请建议使用简单的 xslt 来执行此操作。

我使用了以下 xslt，

```
 <xsl:template match="p">
    <xsl:copy>
   <xsl:apply-templates select="current()/node()" mode="replace"/>
    </xsl:copy>
  </xsl:template>
     <xsl:template match="text()" mode="replace">
<xsl:call-template name="replace-string">
  <xsl:with-param name="text" select="."/>
  <xsl:with-param name="from">&apos;</xsl:with-param>
  <xsl:with-param name="to" select="'&rsquo;'"/>
</xsl:call-template>
</xsl:template>
<xsl:template name="replace-string">
<xsl:param name="text"/>
<xsl:param name="from"/>
<xsl:param name="to"/>
<xsl:choose>
    <xsl:when test="contains($text, $from)">
    <xsl:variable name="before" select="substring-before($text, $from)"/>
    <xsl:variable name="after" select="substring-after($text, $from)"/>
    <xsl:variable name="prefix" select="concat($before, $to)"/>
    <xsl:copy-of select="$before"/>
    <Apos>
      <xsl:copy-of select="$to"/>
    </Apos>
    <xsl:call-template name="replace-string">
      <xsl:with-param name="text" select="$after"/>
      <xsl:with-param name="from" select="$from"/>
      <xsl:with-param name="to" select="$to"/>
    </xsl:call-template>
   </xsl:when>
  <xsl:otherwise>
    <xsl:copy-of select="$text"/>
  </xsl:otherwise>
  </xsl:choose>
 </xsl:template> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:42:37.723

问题在于您的模板与**p**元素匹配

```
<xsl:template match="p">
  <xsl:copy>
    <xsl:apply-templates select="current()/node()" mode="replace"/>
  </xsl:copy>
</xsl:template> 
```

特别是，您使用**mode**。尽管您选择了**p**元素的所有子节点，但您只为 text() 节点提供了一个匹配模板，其模式为**replace**。这意味着所有其他元素都不会被挑选出来，因此**blockFixed**被忽略。

**相反，从您的 XSLT 中删除与p**匹配的上述模板，并替换以下行：

```
<xsl:template match="text()" mode="replace"> 
```

有了这个

```
<xsl:template match="p/text()"> 
```

这假设您在 XSLT 中建立身份转换。这是 XSLT 的精简版

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@*|node()">
      <xsl:copy>
          <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
  </xsl:template>

  <xsl:template match="p/text()">
      <xsl:call-template name="replace-string">
          <xsl:with-param name="text" select="."/>
          <xsl:with-param name="from">'</xsl:with-param>
          <xsl:with-param name="to" select="'&amp;rsquo;'"/>
      </xsl:call-template>
  </xsl:template>

  <xsl:template name="replace-string">
      <xsl:param name="text"/>
      <xsl:param name="from"/>
      <xsl:param name="to"/>
      <xsl:choose>
          <xsl:when test="contains($text, $from)">
            <xsl:variable name="before" select="substring-before($text, $from)"/>
            <xsl:variable name="after" select="substring-after($text, $from)"/>
            <xsl:variable name="prefix" select="concat($before, $to)"/>
            <xsl:copy-of select="$before"/>
            <Apos>
                <xsl:value-of select="$to" disable-output-escaping="yes"/>
            </Apos>
            <xsl:call-template name="replace-string">
                <xsl:with-param name="text" select="$after"/>
                <xsl:with-param name="from" select="$from"/>
                <xsl:with-param name="to" select="$to"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:copy-of select="$text"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:06:15.033

# php - WooCommerce：通过代码创建产品

> ID：11503646
> 
> 赞同：15
> 
> 时间：2012-07-16T11:49:10.053
> 
> 标签：php, wordpress, woocommerce

我的商店出售乙烯基贴纸。每个产品（贴纸）有 144 种变化（24 种颜色、3 种尺寸和 2 种方向）。每个变体都是分配唯一 SKU 所必需的。

手动填充目录是不现实的。我将制作一个表单，用户可以在其中指定产品的名称、描述和主图像，以及可能的尺寸和颜色。在处理表单时，我需要创建一个产品及其所有变体。

如何创建产品及其变体？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T11:46:23.280

我有类似的情况，这是我发现的。

产品实际上是一种[自定义帖子类型](http://codex.wordpress.org/Post_Types)（很明显！：P），因此您可以使用它`wp_insert_post`来插入新产品。插入后，您将获得新产品帖子类型的 id，用于`update_post_meta`将元键和元值分别设置为`_visibility`和`visible`。如果您不设置可见性，您新添加的产品将永远不会在您的商店中可见。或者，您也可以从后端设置可见性。对于产品的各种尺寸，请使用该产品的变体。您可以为每个变体设置不同的类型、价格、SKU 等。所有这些都是后元，因此您可以使用 php 代码添加变体和东西。研究`postmeta`表格以查看键名。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-10-19T13:42:04.730

正如 Jason 在[他的评论](https://stackoverflow.com/questions/11503646/woocommerce-create-product-by-code#comment45852318_11503646)中所写，REST API 是这里的必经之路。这甚至可以在没有 HTTP REST 请求的情况下完成，即使在禁用 REST 接口的 Wordpress 安装上也能正常工作。

这是我为此目的制作的一个简单函数：

```
$products_controler = new WC_REST_Products_Controller();
function create_item($rest_request) {
    global $products_controler;
    if (!isset($rest_request['status']))
        $rest_request['status'] = 'publish';
    $wp_rest_request = new WP_REST_Request('POST');
    $wp_rest_request->set_body_params($rest_request);
    return $products_controler->create_item($wp_rest_request);
} 
```

在这里，`$rest_request`您通常会通过 REST 发送一个数组（请参阅[此处](https://woocommerce.github.io/woocommerce-rest-api-docs/#create-a-product)的文档）。

该`$products_controler`变量是全局变量，因为我需要多次调用此函数，并且我不想每次都重新创建该对象。随意将其本地化。

这适用于所有类型的产品（简单的、分组的、可变的……），并且它应该比通过手动添加产品更能抵抗 WooCommerce 的内部更改`wp_insert_post`和`update_post_meta`。

**编辑：**鉴于这个答案仍然偶尔会得到支持，这里是**WooCommerce 3.0+**更新。变化是不再自动添加变化，所以我们必须自己做。

这是该函数的当前版本：

```
protected function create_item( $rest_request ) {
    if ( ! isset( $rest_request['status'] ) ) {
        $rest_request['status'] = $this->plugin->get_option( 'default_published_status' );
    }
    if ( ! isset( $this->products_controler ) ) {
        $this->products_controler = new WC_REST_Products_Controller();
    }
    $wp_rest_request = new WP_REST_Request( 'POST' );
    $wp_rest_request->set_body_params( $rest_request );
    $res = $this->products_controler->create_item( $wp_rest_request );
    $res = $res->data;
    // The created product must have variations
    // If it doesn't, it's the new WC3+ API which forces us to build those manually
    if ( ! isset( $res['variations'] ) )
        $res['variations'] = array();
    if ( count( $res['variations'] ) == 0 && count( $rest_request['variations'] ) > 0 ) {
        if ( ! isset( $this->variations_controler ) ) {
            $this->variations_controler = new WC_REST_Product_Variations_Controller();
        }
        foreach ( $rest_request['variations'] as $variation ) {
            $wp_rest_request = new WP_REST_Request( 'POST' );
            $variation_rest = array(
                'product_id' => $res['id'],
                'regular_price' => $variation['regular_price'],
                'image' => array( 'id' => $variation['image'][0]['id'], ),
                'attributes' => $variation['attributes'],
            );
            $wp_rest_request->set_body_params( $variation_rest );
            $new_variation = $this->variations_controler->create_item( $wp_rest_request );
            $res['variations'][] = $new_variation->data;
        }
    }
    return $res;
} 
```

这用于[Kite Print 和 Dropshipping on Demand](https://en-gb.wordpress.org/plugins/kite-print-and-dropshipping-on-demand/)插件，从（即将发布）版本 1.1 开始，在文件`api/publish_products.php`.

还有一个更长的“快速”版本，称为`create_products_fast`直接写入数据库，使其对未来 WP/WC 更改的弹性可能降低，但它更快（在我的测试中，我们的 34 种产品范围为几秒而不是几分钟计算机）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-10-09T23:53:10.287

这是最合乎逻辑和最简单的方法。简单产品使用以下代码：

```
$objProduct = new WC_Product(); 
```

并用于代码行下方的可变产品。

```
$objProduct = new WC_Product_Variable(); 
```

下一步是设置元属性，如名称、价格等和变体数据（在可变产品的情况下）。

```
$objProduct->set_name("Product Title");
$objProduct->set_status("publish");  // can be publish,draft or any wordpress post status
$objProduct->set_catalog_visibility('visible'); // add the product visibility status
$objProduct->set_description("Product Description");
$objProduct->set_sku("product-sku"); //can be blank in case you don't have sku, but You can't add duplicate sku's
$objProduct->set_price(10.55); // set product price
$objProduct->set_regular_price(10.55); // set product regular price
$objProduct->set_manage_stock(true); // true or false
$objProduct->set_stock_quantity(10);
$objProduct->set_stock_status('instock'); // in stock or out of stock value
$objProduct->set_backorders('no');
$objProduct->set_reviews_allowed(true);
$objProduct->set_sold_individually(false);
$objProduct->set_category_ids(array(1,2,3)); // array of category ids, You can get category id from WooCommerce Product Category Section of Wordpress Admin 
```

如果您要上传产品图片，请使用以下代码

```
function uploadMedia($image_url){
    require_once('wp-admin/includes/image.php');
    require_once('wp-admin/includes/file.php');
    require_once('wp-admin/includes/media.php');
    $media = media_sideload_image($image_url,0);
    $attachments = get_posts(array(
        'post_type' => 'attachment',
        'post_status' => null,
        'post_parent' => 0,
        'orderby' => 'post_date',
        'order' => 'DESC'
    ));
    return $attachments[0]->ID;
}
// above function uploadMedia, I have written which takes an image url as an argument and upload image to wordpress and returns the media id, later we will use this id to assign the image to product.
$productImagesIDs = array(); // define an array to store the media ids.
$images = array("image1 url","image2 url","image3 url"); // images url array of product
foreach($images as $image){
    $mediaID = uploadMedia($image); // calling the uploadMedia function and passing image url to get the uploaded media id
    if($mediaID) $productImagesIDs[] = $mediaID; // storing media ids in a array.
}
if($productImagesIDs){
    $objProduct->set_image_id($productImagesIDs[0]); // set the first image as primary image of the product

        //in case we have more than 1 image, then add them to product gallery. 
    if(count($productImagesIDs) > 1){
        $objProduct->set_gallery_image_ids($productImagesIDs);
    }
} 
```

保存产品以获取 WooCommerce 产品 ID

```
$product_id = $objProduct->save(); // it will save the product and return the generated product id 
```

注意：对于简单的产品，以上步骤就足够了，以下步骤适用于可变产品或具有属性的产品。

下面的代码用于添加产品属性。

```
$attributes = array(
    array("name"=>"Size","options"=>array("S","L","XL","XXL"),"position"=>1,"visible"=>1,"variation"=>1),
    array("name"=>"Color","options"=>array("Red","Blue","Black","White"),"position"=>2,"visible"=>1,"variation"=>1)
);
if($attributes){
    $productAttributes=array();
    foreach($attributes as $attribute){
        $attr = wc_sanitize_taxonomy_name(stripslashes($attribute["name"])); // remove any unwanted chars and return the valid string for taxonomy name
        $attr = 'pa_'.$attr; // woocommerce prepend pa_ to each attribute name
        if($attribute["options"]){
            foreach($attribute["options"] as $option){
                wp_set_object_terms($product_id,$option,$attr,true); // save the possible option value for the attribute which will be used for variation later
            }
        }
        $productAttributes[sanitize_title($attr)] = array(
            'name' => sanitize_title($attr),
            'value' => $attribute["options"],
            'position' => $attribute["position"],
            'is_visible' => $attribute["visible"],
            'is_variation' => $attribute["variation"],
            'is_taxonomy' => '1'
        );
    }
    update_post_meta($product_id,'_product_attributes',$productAttributes); // save the meta entry for product attributes
} 
```

下面的代码用于添加产品变体。

```
$variations = array(
    array("regular_price"=>10.11,"price"=>10.11,"sku"=>"ABC1","attributes"=>array(array("name"=>"Size","option"=>"L"),array("name"=>"Color","option"=>"Red")),"manage_stock"=>1,"stock_quantity"=>10),
    array("regular_price"=>10.11,"price"=>10.11,"sku"=>"ABC2","attributes"=>array(array("name"=>"Size","option"=>"XL"),array("name"=>"Color","option"=>"Red")),"manage_stock"=>1,"stock_quantity"=>10)

);
if($variations){
    try{
        foreach($variations as $variation){
            $objVariation = new WC_Product_Variation();
            $objVariation->set_price($variation["price"]);
            $objVariation->set_regular_price($variation["regular_price"]);
            $objVariation->set_parent_id($product_id);
            if(isset($variation["sku"]) && $variation["sku"]){
                $objVariation->set_sku($variation["sku"]);
            }
            $objVariation->set_manage_stock($variation["manage_stock"]);
            $objVariation->set_stock_quantity($variation["stock_quantity"]);
            $objVariation->set_stock_status('instock'); // in stock or out of stock value
            $var_attributes = array();
            foreach($variation["attributes"] as $vattribute){
                $taxonomy = "pa_".wc_sanitize_taxonomy_name(stripslashes($vattribute["name"])); // name of variant attribute should be same as the name used for creating product attributes
                $attr_val_slug =  wc_sanitize_taxonomy_name(stripslashes($vattribute["option"]));
                $var_attributes[$taxonomy]=$attr_val_slug;
            }
            $objVariation->set_attributes($var_attributes);
            $objVariation->save();
        }
    }
    catch(Exception $e){
        // handle exception here
    }
} 
```

就是这样上面的代码足以添加带有图像、属性和变体的简单或可变 WooCommerce 产品。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-07-28T02:37:44.313

根据[Vedran 的回答](https://stackoverflow.com/questions/11503646/woocommerce-create-product-by-code/40133117#40133117)，这是通过 PHP 发布 WooCommerce 产品的最少代码：

```
$data = [
    'name' => 'Test product',
    'description' => 'Lorem ipsum',
];
$request = new WP_REST_Request( 'POST' );
$request->set_body_params( $data );
$products_controller = new WC_REST_Products_Controller;
$response = $products_controller->create_item( $request ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-04T10:13:43.167

请参阅[woocommerce-with-php-code](https://wordpress.stackexchange.com/questions/137501/how-to-add-product-in-woocommerce-with-php-code)，其中给出了完整代码。

正如前卫所说，产品在后期添加：

`post_type = "product"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-12T10:30:41.823

我使用这个代码：

```
$sku = 21333;
$size = 'S';
$stock = 2;
$price_a = 60;
$price_b = 30;

$product_parent = get_product_by_sku($sku);
$product = new WC_Product_Variable($product_parent->id);
$variations = $product->get_available_variations();

// First off all delete all variations
foreach($variations as $prod_variation) {
  $metaid=mysql_query("SELECT meta_id FROM wp_postmeta WHERE post_id = ".$prod_variation['variation_id']);
  while ($row = mysql_fetch_assoc($metaid)) {
    mysql_query("DELETE FROM wp_postmeta WHERE meta_id = ".$row['meta_id']);
  }
  mysql_query("DELETE FROM wp_posts WHERE ID = ".$prod_variation['variation_id']);
}

// Now add new variation
$thevariation = array(
  'post_title'=> '',
  'post_name' => 'product-' . $product_parent->id . '-variation',
  'post_status' => 'publish',
  'post_parent' => $product_parent->id,
  'post_type' => 'product_variation',
  'guid'=>home_url() . '/?product_variation=product-' . $product_parent->id . '-variation'
);
$variation_id = wp_insert_post( $thevariation );
update_post_meta($variation_id, 'post_title', 'Variation #' . $variation_id . ' of '. $product_parent->id);

wp_set_object_terms( $variation_id, $size, 'pa_size' );
update_post_meta($variation_id, 'attribute_pa_size', $size);

update_post_meta($variation_id, '_regular_price', $price_a);
update_post_meta($variation_id, '_downloadable_files', '');
update_post_meta($variation_id, '_download_expiry', '');
update_post_meta($variation_id, '_download_limit', '');
update_post_meta($variation_id, '_sale_price_dates_to', '');
update_post_meta($variation_id, '_sale_price_dates_from', '');
update_post_meta($variation_id, '_backorders', 'no');
update_post_meta($variation_id, '_stock_status', 'instock');
update_post_meta($variation_id, '_height', '');
update_post_meta($variation_id, '_manage_stock', 'yes');
update_post_meta($variation_id, '_width', '');
update_post_meta($variation_id, '_sale_price_dates_from', '');
update_post_meta($variation_id, '_backorders', 'no');
update_post_meta($variation_id, '_stock_status', 'instock');
update_post_meta($variation_id, '_manage_stock', 'yes');
update_post_meta($variation_id, '_height', '');
update_post_meta($variation_id, '_width', '');
update_post_meta($variation_id, '_length', '');
update_post_meta($variation_id, '_weight', '');
update_post_meta($variation_id, '_downloadable', 'no');
update_post_meta($variation_id, '_virtual', 'no');
update_post_meta($variation_id, '_thumbnail_id', '0');
update_post_meta($variation_id, '_sku', '');

update_post_meta($variation_id, '_sale_price', $price_b);
update_post_meta($variation_id, '_price', $price_b);
update_post_meta($product_parent->id, '_min_variation_price', $price_b);
update_post_meta($product_parent->id, '_max_variation_price', $price_b);
update_post_meta($product_parent->id, '_min_price_variation_id', $variation_id);
update_post_meta($product_parent->id, '_max_price_variation_id', $variation_id);
update_post_meta($product_parent->id, '_min_variation_regular_price', $price_a);
update_post_meta($product_parent->id, '_max_variation_regular_price', $price_a);
update_post_meta($product_parent->id, '_min_regular_price_variation_id', $variation_id);
update_post_meta($product_parent->id, '_max_regular_price_variation_id', $variation_id);
update_post_meta($product_parent->id, '_min_variation_sale_price', $price_b);
update_post_meta($product_parent->id, '_max_variation_sale_price', $price_b);
update_post_meta($product_parent->id, '_min_sale_price_variation_id', $variation_id);
update_post_meta($product_parent->id, '_max_sale_price_variation_id', $variation_id);
update_post_meta($product_parent->id, '_price', $price_b);

update_post_meta( $variation_id, '_stock', $stock );
update_post_meta($product_parent->id, 'post_status', 'publish'); 
```

# java - 如何在 Java 中为 TIFF 文件创建缩略图？

> ID：11503648
> 
> 赞同：0
> 
> 时间：2012-07-16T11:49:12.383
> 
> 标签：java

有人可以帮忙用一些代码来为 Java 中的 TIFF 创建缩略图。

使用这篇[文章](https://stackoverflow.com/questions/1069095/how-do-you-create-a-thumbnail-image-out-of-a-jpeg-in-java)，我为 JPEG 和 PNG 创建了缩略图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:22:27.280

```
 BufferedImage image = ImageIO.read(aFile);
    BufferedImage thumbnNailImage = new BufferedImage(width, height,
            BufferedImage.TYPE_INT_RGB);

    Graphics2D g2 = thumbnNailImage.createGraphics();
    g2.fillRect(0, 0, width, height);

    double xScale = (double) width / image.getWidth();
    double yScale = (double) height / image.getHeight();
    double scale = Math.min(xScale, yScale);

    double x = (width - image.getWidth() * scale) / 2;
    double y = (height - image.getHeight() * scale) / 2;
    AffineTransform at = AffineTransform.getScaleInstance(x, y);
    at.scale(scale, scale);
    g2.drawRenderedImage(image, at);
    g2.dispose();
    return thumbnNailImage; 
```

读取 ImageIO.read(aFile); 时 总是返回 null。

# android - 创建本地 Android 服务

> ID：11503650
> 
> 赞同：0
> 
> 时间：2012-07-16T11:49:16.517
> 
> 标签：android

我创建了一个本地 android 服务。当用户选择开始按钮时，会启动一个服务，并创建一个从 Activity 扩展并实现可运行和 SensorEventListener 的内部类。

我想在设备锁定之前和之后获取移动设备的 x、y、z 坐标（屏幕监视器关闭并变黑并且设备被锁定）。我该怎么做这个任务？

谢谢， 伊尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:53:16.650

There are System Broadcasts for the display turning on & off. So you should register for them and try to save them in different data structures.

There are these Intents you could register for:

```
<action android:name="android.intent.action.SCREEN_ON" />
<action android:name="android.intent.action.SCREEN_OFF" /> 
```

They may need special permissions (check logcat for that).

# jquery - 仅在手风琴打开期间调用 ajax

> ID：11503654
> 
> 赞同：0
> 
> 时间：2012-07-16T11:49:34.457
> 
> 标签：jquery, html, ajax, accordion

我的系统中有一个手风琴，它通过 ajax 填充内容。在当前系统中，它在 onClick 事件中被提及。所以函数调用发生在打开和关闭时间。

我只需要将它限制在手风琴的开放时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:45:34.963

我看不到你的具体代码，但我可以告诉我我是怎么做的并大致解释一下......

```
$('.va-slice').bind("expand", function(evt) {
if (typeof $(evt.target).data('state') === 'undefined') {
     url = $(evt.target).find('.va-content').data("url");
    $(evt.target).find('.va-content').load(url);
    $(evt.target).data('state', 'expanded');    
} else {}
}).bind("collapse", function(evt) {$(evt.target).data('state', 'collapsed');                    
    }).toggle(function() { // toggle between 
        $(this).trigger("expand");
    }, function() {
        $(this).trigger("collapse");
}); 
```

每个“va-slice”基本上包含一个内容区域“va-content”，我定义了两个事件；展开和折叠。在扩展时，我检查数据“状态”是否已设置，如果没有，则这是第一次单击此区域，因此我加载内容，然后将其“状态”数据设置为“扩展”，如果已设置完全设置然后我什么都不做，因为关闭与否，数据已经加载到内容区域之前。

这有帮助吗？

# image-processing - intel ipp 函数等价于 for 循环

> ID：11503658
> 
> 赞同：1
> 
> 时间：2012-07-16T11:49:52.953
> 
> 标签：image-processing, intel-ipp

我是图像处理的新手，我正在尝试在英特尔 IPP 上做点什么。我需要一个 ipp 函数，它按 FOR LOOP 顺序扫描矩阵，但比 FOR 更快。

谢谢你。

# ios - 在 iOS 中本地化浮点数并指定小数位数

> ID：11503659
> 
> 赞同：6
> 
> 时间：2012-07-16T11:49:59.200
> 
> 标签：ios, cocoa-touch, floating-point, nsstring, nslocalizedstring

我有一个浮点数，我想显示到小数点后一位。例如 104.8135674... 在英文中显示为 104.8。通常我会使用：

`myString = [NSString stringWithFormat:@"%.1f",myFloat];`

但是，我想本地化号码，所以我尝试了：

`myString = [NSString localizedStringWithFormat:@"%.1f",myFloat];`

这可以分配正确的十进制符号（例如

英语：104.8

德语：104,8

但是，对于使用不使用[阿拉伯数字](http://en.wikipedia.org/wiki/Arabic_numerals)(0123456789) 的语言，将使用正确的十进制符号，但数字仍为阿拉伯数字。例如

巴林-阿拉伯语：104,8（数字应使用不同的符号）

所以我尝试了：

`myString = [NSNumberFormatter localizedStringFromNumber:[NSNumber numberWithFloat:myFloat] numberStyle:kCFNumberFormatterDecimalStyle];`

但是，我似乎无法指定小数位数。它给出了例如

英语：104.813

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T12:16:22.653

NSNumberFormatter`-setMaximumFractionDigits:`用于此目的，您可以重用非常好的格式化程序：

```
NSNumberFormatter * formatter =  [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:kCFNumberFormatterDecimalStyle];
[formatter setMaximumFractionDigits:1];
[formatter setLocale:[NSLocale currentLocale]];
NSString * myString = [formatter stringFromNumber:[NSNumber numberWithFloat:123.456]]; 
```

# knockout.js - 表单的 knockout.js 空白模型

> ID：11503662
> 
> 赞同：0
> 
> 时间：2012-07-16T11:50:12.220
> 
> 标签：knockout.js

如此令人沮丧

我有一个带有数据行的 jQuery jqGrid。

具有可观察的 rowSelected(false) 的 knockout.js viewModel。

网格具有 onSelectRow 处理程序来更新 veiwModel 属性 rowSelected。更新后，它会启用一个“编辑”按钮，单击该按钮会调用 viewModel 方法 - 编辑 - 从所选行填充 viewModel 中的数据，并显示一个正确填充所有数据绑定输入元素的表单。

我在模型上有 Save 方法 - 工作正常。

模型上的取消表单方法可以正常工作。

我有一个 Add 方法，如果我之前没有选择表格行并单击编辑，它只会给出一个空白表格 - 太棒了！

如果我之前选择了一行，viewModel 将包含该行中的数据，当我单击“添加”时，表单会显示该行中的数据。

我希望 Add 为表单创建一个没有数据的 viewModel。

我想使用 jsFiddle 来展示这一点，但该网站至少在过去 2 小时内一直失败。

有什么想法吗？

我想要的是打开一个带有空白输入的表单。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:55:09.963

我已经使用 ko.mapping.fromJS(ko.toJS(),{},model);

不管怎么说，还是要谢谢你

# android - 顶部固定更改子标题的 ListView

> ID：11503665
> 
> 赞同：1
> 
> 时间：2012-07-16T11:50:18.000
> 
> 标签：android, listview

我正在尝试实现一个带有子标题的列表，当您向下移动列表时，这些子标题会固定在列表顶部。阅读电子邮件线程时与 GMAIL 应用程序的实现相同。当用户向下移动列表时，正在阅读的电子邮件的标题会粘在屏幕顶部，并且只会被另一个相同类型的子标题移开。

知道如何开始实施这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:27:58.423

这就是我要找的东西： [http ://code.google.com/p/romannurik-code/source/browse/misc/scrolltricks](http://code.google.com/p/romannurik-code/source/browse/misc/scrolltricks)

谢谢！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T10:47:55.730

我没有明确的解决方案给你，因为我不是安卓专家，但为什么不使用 HTML 功能，比如[http://www.quackit.com/css/codes/css_floating_menu.cfm](http://www.quackit.com/css/codes/css_floating_menu.cfm) ？

# javascript - 在读取之前设置未定义的 javascript 属性

> ID：11503666
> 
> 赞同：8
> 
> 时间：2012-07-16T11:50:24.050
> 
> 标签：javascript, object, getter

```
var tr={};
tr.SomeThing='SomeThingElse';
console.log(tr.SomeThing); // SomeThingElse
console.log(tr.Other); // undefined

tr.get=function(what){
    if (tr.hasOwnProperty(what)) return tr[what];
    else return what;
};
tr.get('SomeThing') // SomeThingElse
tr.get('Other') // Other 
```

有没有办法让 tr.Other 或 tr['Other'] 以及对象的所有其他未定义属性返回其名称而不是未定义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T13:34:56.227

三种解决方案：

*   将您的对象实现为 a [`Proxy`](http://wiki.ecmascript.org/doku.php?id=harmony:proxies)，它旨在完全按照您的意愿行事。~~然而，它只是一个草稿，目前仅[在 Firefox 的 Javascript 1.8.5 中支持。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Proxy)~~它是用 ES6 标准化的，但可能尚未在所有环境中可用。

*   始终用一整套消息填充您的翻译对象。创建该“字典”（服务器端或客户端）时，始终包含所有需要的键。如果不存在翻译，您可以使用备用语言、消息名称或`undefined`- 您选择的字符串表示形式。

    但是一个不存在的属性应该总是意味着“没有这样的消息”而不是“没有可用的翻译”。

*   使用带有字符串参数而不是对象属性的 getter 函数。该函数可以在内部字典对象中查找消息，并以编程方式处理未命中。

    我会推荐一个不同于字典的地图对象，以允许“get”和 co 作为消息名称：

```
var translate = (function(){
    var dict = {
        something: "somethingelse",
        ...
    };
    return {
        exists: function(name) { return name in dict; },
        get: function(name) { return this.exists(name) ? dict[name] : "undefined"; },
        set: function(name, msg) { dict[name] = msg; }
    };
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:52:10.247

您可以使用对象初始值设定项为您的属性[定义一个 getter ：](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects#defining_getters_and_setters)

```
var o = {
  a: 7,
  get b() {
    return this.a + 1;
  },
  set c(x) {
    this.a = x / 2;
  }
};

console.log(o.a); // 7
console.log(o.b); // 8 <-- At this point the get b() method is initiated.
o.c = 50;         //   <-- At this point the set c(x) method is initiated
console.log(o.a); // 25 
```

或使用`Object.defineProperties()`：

```
var o = { a: 0 };

Object.defineProperties(o, {
    'b': { get: function() { return this.a + 1; } },
    'c': { set: function(x) { this.a = x / 2; } }
});

o.c = 10; // Runs the setter, which assigns 10 / 2 (5) to the 'a' property
console.log(o.b); // Runs the getter, which yields a + 1 or 6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-18T00:32:51.543

虽然此解决方案并不*完全*符合您的要求，但 python 的 collections.defaultdict 类的 JavaScript 实现可能会有所帮助：

```
var collections = require('pycollections');
var dd = new collections.DefaultDict([].constructor);
console.log(dd.get('missing'));  // []
dd.get(123).push('yay!');
console.log(dd.items()); // [['missing', []], [123, ['yay!']]] 
```

# php - 更新 Yii 模型的 (DRY) 函数应该存储在哪里？

> ID：11503668
> 
> 赞同：0
> 
> 时间：2012-07-16T11:50:28.887
> 
> 标签：php, yii, dry, yii-cmodel

我有一个 Yii 应用程序，它有两个单独的模型*Domain*和*Page*。*域*`'domain', 'unique'`有一个唯一的字段，所以我设置了一个规则（

```
$domain_model=new Domain();
$domain_model->domain=$domain;
if(!$domain_model->save()){
    $atts = array('domain'=>$domain);
    $domain_model=Domain::model()->findByAttributes($atts);
}
return $domain_model->id; 
```

这很好用，但是在*页面*控制器中，我想在页面插入操作期间调用相同的函数。我想不出用 Yii 做到这一点的最佳 DRY 方法。我无法访问其他模型控制器，所以我不知道将这个函数放在哪里以使其在*Domain* MVC 内部和外部都可以访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:20:51.913

定义执行此操作的行为，并附加到您要使用它的任何类。

**组件行为的使用**

一个组件支持[mixin](http://en.wikipedia.org/wiki/Mixin)模式并且可以附加一个或多个行为。行为是一个对象，其方法可以通过收集功能而不是专门化（即普通类继承）的方式由其附加组件“继承”。一个组件可以附加多个行为，从而实现“多重继承”。

行为类必须实现`IBehavior`接口。大多数行为都可以从`CBehavior`基类扩展。如果需要将行为附加到模型，它也可以从[CModelBehavior](http://www.yiiframework.com/doc/api/1.1/CModelBehavior)或[CActiveRecordBehavior](http://www.yiiframework.com/doc/api/1.1/CActiveRecordBehavior)扩展，后者实现了特定于模型的附加功能。

要使用行为，必须首先通过调用行为的`attach()`方法将其附加到组件。然后我们可以通过组件调用行为方法：

```
// $name uniquely identifies the behavior in the component
$component->attachBehavior($name,$behavior);
// test() is a method of $behavior
$component->test(); 
```

可以像组件的普通属性一样访问附加的行为。例如，如果一个名为 tree 的行为附加到一个组件，我们可以使用以下方法获取对该行为对象的引用：

```
$behavior=$component->tree;
// equivalent to the following:
// $behavior=$component->asa('tree'); 
```

可以暂时禁用行为，使其方法无法通过组件使用。例如，

```
$component->disableBehavior($name);
// the following statement will throw an exception
$component->test();
$component->enableBehavior($name);
// it works now
$component->test(); 
```

附加到同一组件的两个行为可能具有相同名称的方法。在这种情况下，第一个附加行为的方法将优先。

当与[事件](http://www.yiiframework.com/doc/guide/1.1/en/basics.component#component-event)一起使用时，行为更加强大。一个行为，当被附加到一个组件时，可以将它的一些方法附加到组件的一些事件上。通过这样做，行为有机会观察或改变组件的正常执行流程。

行为的属性也可以通过它所附加的组件来访问。属性包括公共成员变量和通过行为的 getter 和/或 setter 定义的属性。例如，如果行为具有名为 xyz 的属性，并且该行为附加到组件 $a。然后我们可以使用表达式`$a->xyz`来访问行为的属性。

更多阅读：
[http ://www.yiiframework.com/wiki/44/behaviors-events](http://www.yiiframework.com/wiki/44/behaviors-events)
[http://www.ramirezcobos.com/2010/11/19/how-to-create-a-yii-behavior/](http://www.ramirezcobos.com/2010/11/19/how-to-create-a-yii-behavior/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:32:29.130

我不记得确切的 Yii，但我相信有一个“beforeSave”回调可以用于你的`Domain`模型。这样无论如何，当你保存一个领域模型时，它总是会调用“在保存模型之前检查这个id是否已经存在”。

然后，您只需执行`$domain->save();`，然后执行`$domain->id`，无论它以前是否存在。

# android - 操作栏 Sherlock 下拉微调器分隔线

> ID：11503669
> 
> 赞同：3
> 
> 时间：2012-07-16T11:50:29.537
> 
> 标签：android, android-actionbar

如何在操作栏下拉菜单导航中隐藏分隔线？这是我想隐藏的分隔符：

[http://s10.postimage.org/4sjqjxltl/4nk4k.png](http://s10.postimage.org/4sjqjxltl/4nk4k.png)

我尝试了以下样式：

```
<style name="MyActionBar" parent="Widget.Sherlock.Light.ActionBar">
    <item name="android:background">@drawable/actionbar_bg_shape</item>
    <item name="background">@drawable/actionbar_bg_shape</item>

    <item name="android:showDividers">none</item>
    <item name="android:divider">#00000000</item>
    <item name="android:cacheColorHint">#00000000</item>
    <item name="android:dividerHeight">0px</item>

</style>

<style name="MyDropDownNav" parent="Widget.Sherlock.Light.Spinner.DropDown.ActionBar">
    <item name="android:textColor">#FFFFFF</item>
    <item name="android:background">@drawable/actionbar_bg_shape</item>
    <item name="android:popupBackground">@drawable/actionbar_dropdown_bg_shape</item>
    <item name="android:dropDownSelector">@drawable/dropdown_nav_selector</item>

    <item name="android:dropDownWidth">175dp</item>
    <item name="android:dropDownHeight">50dp</item>
    <item name="android:showDividers">none</item>
    <item name="android:divider">@null</item>
    <item name="android:cacheColorHint">#00000000</item>
    <item name="android:dividerHeight">0px</item>

    <item name="background">@drawable/actionbar_bg_shape</item>
</style>

<style name="Theme.Test.ICS" parent="Theme.Sherlock.Light">
   <item name="android:actionDropDownStyle">@style/MyDropDownNav</item>
   <item name="actionDropDownStyle">@style/MyDropDownNav</item>
   <item name="android:actionBarStyle">@style/MyActionBar</item>
   <item name="actionBarStyle">@style/MyActionBar</item>

    <item name="actionBarDivider">@drawable/icon</item>
    <item name="android:actionBarDivider">@drawable/icon</item>

</style> 
```

我也尝试过将分隔符属性更改为颜色或可绘制。但是下拉菜单导航中仍然存在分隔符，完全没有效果。任何想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T15:55:21.760

您需要像这样扩展 Widget.Sherlock.ListView.DropDown 样式：

```
<style name="Theme.YourTheme" parent="Theme.Sherlock">
    <item name="dropDownListViewStyle">@style/YourThemeDropDownListView</item>
    <item name="android:dropDownListViewStyle">@style/YourThemeDropDownListView</item>
</style>

<style name="YourThemeDropDownListView" parent="Widget.Sherlock.ListView.DropDown">
    <item name="android:divider">@null</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T10:24:10.137

值得注意的是，必须指定分隔线高度才能编辑分隔线的颜色。

```
<style name="YourThemeDropDownListView" parent="Widget.Sherlock.ListView.DropDown">
    <item name="android:divider">@color/White</item
    <item name="android:dividerHeight">5dp</item>
</style> 
```

# mysql - SELECT 结果与列的表名

> ID：11503670
> 
> 赞同：0
> 
> 时间：2012-07-16T11:50:31.067
> 
> 标签：mysql, select, join

一个快速的问题：

使用时是否可以获得 MySQL 结果，表名在列前面，而不仅仅是列名`*`？

代替：

`column1, column2,`ETC

我会需要：

`table_name.column1, table_name.column2,`ETC

我的问题是，我将多个表连接在一起，这些表具有相同名称的列（例如，`key`），但结果`SELECT`只会显示一个。并且在每个连接表中键入每一列，这比简单地使用`*`并稍后使用 Tablenames 获得结果要多得多。

有什么解决办法吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:23:49.440

我找到了另一个实际按预期工作的解决方案！

显然，这是可能的 - 至少对于 PHP：

$PDO->setAttribute(PDO::ATTR_FETCH_TABLE_NAMES, true);

有了这个，我得到了完全限定的列名的结果。我真的很想知道这在 SQL 中的样子，但至少它解决了这个问题。

之前找不到它，感谢@RobinCastlin 提供了进一步的链接（这让我找到了解决方案） - 以及其他人的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:54:39.780

使用 * 选择器是不可能的。[大约 4 年前在stackoverflow](https://stackoverflow.com/questions/329931/sql-select-join-is-it-possible-to-prefix-all-columns-as-prefix)上已经有人问过这个问题。您将需要键入每一列并使用别名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:02:34.730

即使您不喜欢定义所有这些值，也不一定很难做到：

```
$arr_keys = array('table_name' => array('column1', 'column2', 'column3'),
                  'table_name2' => array('column1', 'column2', 'column3'));

$arr_values = array();
foreach(array_keys($arr_keys) as $h)
    foreach($arr_keys[$h] as $h2)
        $arr_values[] = "{$h}.{$h2} AS '{$h}.{$h2}'";

$str_values = implode(', ', $arr_values);
# Insert $str_values after your SELECT ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:18:09.730

没有简单的方法可以得到这个。

您可以使用动态 SQL（或 PHP）来创建这种类型的查询：

```
SELECT
    table_name.column1 AS `table_name.column1`,
    table_name.column2 AS `table_name.column1`,
... 
```

但这值得麻烦吗？

* * *

另一种解决方案，**仅当**您的表在列中没有通用名称时才有效，除了用于连接的键列之外，将使用`NATURAL JOIN`：

```
SELECT
    table_a.a_id
    table_a.column1, 
    table_a.b_id, 
    table_b.b_column2
    table_b.b_column3
    table_b.b_column4
FROM
    table_a JOIN table_b
              ON table_b . b_id = table_a . b_id ; 
```

会成为：

```
SELECT
    *
FROM
    table_a NATURAL JOIN table_b ; 
```

具有相同名称的列将用于连接，并且不会在结果中复制。

缺点是您应该格外小心，不要有任何列（除了加入时使用的键）和（您和任何其他开发人员）不要错误地添加任何列 - 因为这会破坏查询，产生意想不到的结果。

# java - 如何清除eclipse中的错误错误？

> ID：11503675
> 
> 赞同：8
> 
> 时间：2012-07-16T11:50:46.853
> 
> 标签：java, android, eclipse, adt

有时在使用 ADT 的 eclipse 中，即使删除了有问题的代码，我也会遇到仍然存在的错误；事实上，即使我删除了文件的全部内容，它们也会保留下来，如下图所示：

![在此处输入图像描述](../Images/fd54e7e8606657c0f172ae84b3538ff1.png)

错误是`Syntax error on token "}", delete this token`

可以说，没有这样的令牌。

显然这是一个错误，但我该怎么办？结果我的代码无法编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T12:15:55.443

给出的大多数答案都没有帮助或不是问题（`Clean`尽管在 Ran 的评论中有效......）。最简单的修复是 CTRL+1，然后是“清除所有 Lint 标记”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:54:00.813

保存文件：Ctrl + S

在 Eclipse 菜单中：项目 -> 清洁

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T12:09:02.130

对我来说，只需剪切整条线并将其粘贴回来就可以解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-15T16:24:12.293

[您可以在“问题”视图窗口](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/cprbview.htm)中删除所谓的错误编译器错误，例如，![删除所谓的错误编译器错误（屏幕抓取）](../Images/7fd47b4103292b0212df28bc863d8dde.png)

确认删除，即使`javac`可能重新创建它们：

![确认删除，即使 javac 可能会重新创建它们（屏幕抓取）](../Images/1c347a9a3194374df88f813e96ac6448.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T11:55:03.453

1.  尝试清理您的项目并重新构建它。它应该去。
2.  尝试通过转到 DDMS>devices>单击小向下箭头>选择“reset adb”来重新启动 adt
3.  尝试重新启动eclipse。

上述任何解决方案都可能适合您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T11:58:31.807

您正在删除更大的内容。但是在“}”包的结束关闭的某个地方，错误地你没有删除它。**所以只需删除那个 "}"**。然后清理你的项目。

# asp.net - Bing 或 Google MAPS 绘制路线

> ID：11503677
> 
> 赞同：1
> 
> 时间：2012-07-16T11:50:54.567
> 
> 标签：asp.net, google-maps, bing-maps

我在数据库中有纬度和经度，我想在 ASP.NET 中使用 Bing 或 Google 地图绘制路线。任何人都可以引导我参考一些示例或网络链接以了解如何操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:36:52.157

使用纬度和经度绘制路线的最简单示例可以在[http://www.shabdar.org/asp-net/70-google-maps-control-for-aspnet-part-1.html找到](http://www.shabdar.org/asp-net/70-google-maps-control-for-aspnet-part-1.html)

这是相同的示例，但已更新

[http://www.codeproject.com/Articles/24468/Google-Maps-Control-for-ASP-NET-Part-1](http://www.codeproject.com/Articles/24468/Google-Maps-Control-for-ASP-NET-Part-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:36:38.037

要绘制折线（连接由纬度和经度定义的几个点的简单线），请参阅折线对象上的参考： [https ://developers.google.com/maps/documentation/javascript/reference#Polyline](https://developers.google.com/maps/documentation/javascript/reference#Polyline)

在[文档](https://developers.google.com/maps/documentation/javascript/overlays#Polylines)中，还有一个[例子](https://google-developers.appspot.com/maps/documentation/javascript/examples/polyline-simple)

# c++ - 向 twitter API 发出经过身份验证的 GET 请求

> ID：11503679
> 
> 赞同：0
> 
> 时间：2012-07-16T11:51:00.643
> 
> 标签：c++, oauth, twitter

我设法获得了令牌/令牌秘密，以便向 twitter API 发出已识别的请求。尽管如此，我还是无法使用 QOAuth 在 C++ 中执行此类请求

我正在尝试访问“http://api.twitter.com/1/followers/ids.json”

我使用此代码

```
_oauthInterface = new QOAuth::Interface(this);
_manager = new QNetworkAccessManager(this);

_oauthInterface->setConsumerKey(CONSUMER_KEY);
_oauthInterface->setConsumerSecret(CONSUMER_SECRET_KEY);

QOAuth::ParamMap params;
    params.insert("user_id", QString::number(id).toAscii());
    params.insert("cursor", cursor.toAscii());

QString url("http://api.twitter.com/1/friends/ids.json");

QByteArray header = _oauthInterface->createParametersString(url,
                                                            QOAuth::GET,
                                                            token.toUtf8(),
                                                            tokenSecret.toUtf8(),
                                                            QOAuth::HMAC_SHA1,
                                                            params,
                                                            QOAuth::ParseForHeaderArguments);

QNetworkRequest request;
if(!params.isEmpty())
    url.append(_oauthInterface->inlineParameters(params, QOAuth::ParseForInlineQuery));

request.setUrl(url);
request.setRawHeader("Authorization", header);

_manager->get(request);

QObject::connect(_manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(replyHandler(QNetworkReply*))); 
```

150个请求后我得到

```
"{"error":"Rate limit exceeded. Clients may not make more than 150 requests per hour.","request":"\/1\/followers\/ids.json?cursor=-1&user_id=xxxxxxxxx"}" 
```

作为答案。我怎么没有身份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:55:30.710

我是多么愚蠢。这段代码很好，我只是用错误的参数（令牌/令牌）而不是（令牌/令牌秘密）调用了这个函数

请注意，如果访问令牌无效，Twitter 不会通知您

# blackberry - Unable To Start Opera Mini With The Given URL

> ID：11503685
> 
> 赞同：3
> 
> 时间：2012-07-16T11:51:28.620
> 
> 标签：blackberry, opera, applicationmanager

I am using the following code to start the Opera Mini web browser with the given URL;

```
try {
    ApplicationManager.getApplicationManager().launch("operette$2dhifi?" + url);
} catch (ApplicationManagerException e) {
    updateInfo(e.toString());
} 
```

But its throwing

> ApplicationManagerException: module not found.

When I try without the URL

```
ApplicationManager.getApplicationManager().launch("operette$2dhifi"); 
```

, Opera starts fine. But I don't want to start the blank browser, I want to start it with my URL.

Looked at the BlackBerry forum and googled it also but unable to find the solution. Please guide me in the right direction.

I am developing on

*   BlackBerry Eclipse JDE 1.5.0
*   BlackBerry Bold 9900

# java - REST 和 JSON - 将字符串转换为 JSON 数组

> ID：11503688
> 
> 赞同：5
> 
> 时间：2012-07-16T11:51:34.330
> 
> 标签：java, json, rest

我是 JSON 和 REST 的新手。我正在使用返回如下字符串的服务器：

```
[{"username":"Hello","email":"hello@email.com","credits":"100","twitter_username":""},{"username":"Goodbye","email":"goodbye@email.com","credits":"0","twitter_username":""}] 
```

我已经设法在控制台上将它们打印为字符串，但现在我想将它们转换为 JSON 数组。到目前为止，我的代码没有返回任何错误，但我不知道在新 JSON 数组的构造函数中放入什么。我一直在参考一位同事发给我的一段代码，其中构造函数是 new JSONArray(response) 但他从未告诉我“响应”是什么。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;

import sun.misc.BASE64Encoder;

public class NetClientGet {

    public static void main(String[] args) {

      try {

        URL url = new URL("http://username:password@mobile.crowdedmedia.co.uk/index.php/api/users/get_users/");
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("GET");

        BASE64Encoder enc = new sun.misc.BASE64Encoder();
        String userpassword = "username:password";
        String encoded = enc.encode(userpassword.getBytes());
        conn.setRequestProperty("Authorization", "Basic " + encoded);

        if (conn.getResponseCode() != 200) {
            throw new RuntimeException("Failed : HTTP error code : "
                    + conn.getResponseCode());
        }

        BufferedReader br = new BufferedReader(new InputStreamReader(
            (conn.getInputStream())));

        String output;
        System.out.println("Output from Server .... \n");
        while ((output = br.readLine()) != null) {
            System.out.println(output);
        }

        JSONArray array = new JSONArray(output);

        for (int i =0; i < array.size(); i++) {
            JSONObject row = array.getJSONObject(i);
            String user = row.getString("username");
            System.out.println(user);
        }

        conn.disconnect();

      } catch (MalformedURLException e) {

        e.printStackTrace();

      } catch (IOException e) {

        e.printStackTrace();

      }

    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T13:41:07.960

*   使用[GSON](http://code.google.com/p/google-gson/)将字符串格式化为 JsonArray
*   然后遍历 JsonArray 获取值

代码示例

```
String json = "[{\"username\":\"Hello\",\"email\":\"hello@email.com\",\"credits\":\"100\",\"twitter_username\":\"\"},{\"username\":\"Goodbye\",\"email\":\"goodbye@email.com\",\"credits\":\"0\",\"twitter_username\":\"\"}]";
JsonArray jArray = new JsonParser().parse(json).getAsJsonArray();
for (int i=0;i<jArray.size();i++) {
    JsonObject jsonObject = jArray.get(i).getAsJsonObject();
    System.out.println(jsonObject.get("username"));
    System.out.println(jsonObject.get("email"));
    System.out.println(jsonObject.get("credits"));
    System.out.println(jsonObject.get("twitter_username"));
    System.out.println("*********");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:04:37.897

我正在使用 gson 库来操作 json。[您可以从这里](http://code.google.com/p/google-gson/downloads/list)下载 gson 。这是一个非常好的处理 json 的库。首先创建json解析器，它会解析json字符串：

```
JsonParser parser = new JsonParser(); 
```

现在初始化一个空的json数组

```
JsonArray jArray = new JsonArray(); 
```

现在使用解析器创建 json 数组

```
jArray = parser.parse(outputString).getAsJsonArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:48:44.163

我使用了 org.json.simple.JSONObject 和 org.json.simple.JSONArray，我希望 net.sf.json.JSONArray 也能正常工作。

您应该将以下字符串格式用于**输出**（JSONArray array = new JSONArray( **output** ); ）

```
 {"YOUR_ARRAY_NAME": [{"username":"Hello","email":"hello@email.com","credits":"100","twitter_username":""},{"username":"Goodbye","email":"goodbye@email.com","credits":"0","twitter_username":""}]} 
```

现在这是 JSONArray 的字符串表示。

# iphone - Admob Mediation

> ID：11503689
> 
> 赞同：2
> 
> 时间：2012-07-16T11:51:35.113
> 
> 标签：iphone, admob, xcode4.3

In one of my application i need to show custom interstitial ad through admob mediation. I am using AdMarvel for getting my custom event interstitial ad. I have a class which creates admarvel interstitial ad and sends it to admob mediation.

In my custom class, i get these delegates called:

```
- (void)getInterstitialAdSucceeded
{
  [self.delegate customEventInterstitial:self didReceiveAd:adMarvelView];
} 
```

After this, i get below delegate method called. In this i am trying to display the interstitial ad like below:

```
- (void)presentFromRootViewController:(UIViewController *)rootViewController
{
   [adMarvelView displayInterstitial];
} 
```

But app is not showing any interstitial ad. Am i missing anything? Kindly let me know.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T11:06:13.880

是的，您需要将 self 添加为 adMarvelView 的 rootViewController。然后这将起作用。

# algorithm - 用于计算会话 id 随机性的 python 代码

> ID：11503694
> 
> 赞同：0
> 
> 时间：2012-07-16T11:52:00.337
> 
> 标签：algorithm, session, random, python-2.7, security

我有一个包含 1000 个会话 ID 的列表。每个会话 ID 长度为 32 个字符。我可以用来确定每个字符级别的随机性或变化的最有效算法是什么？我是python新手，有人可以帮我开发一个python代码片段吗？仅供参考，如果令牌长度为 10 个字符，Burpsuite 中的 Sequencer 工具会为每 10 个字符位置提供一个随机图。（算法我不知道）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:01:17.497

我不知道 Burp 是如何做到的，但确定每个字符级别的变化的一种方法是对会话 ID 中的每个位置进行字符频率分析。

前提是您希望所有字符都同样可能出现在所有会话 id 的某个位置（字符的分布是统一的）。假设您收集/生成了 100 个数字会话 ID（因此每个位置的可能字符为 0-9），您希望每个数字在每个位置出现 100/10=10 次。

现在，为序列中的每个位置构建一个直方图，其中包含一个字符在所有会话 id 中实际出现在该位置的次数。

考虑到您希望它们均匀分布，要弄清楚您在每个位置观察到的字符分布的可能性有多大，您可以使用像[卡方检验这样的统计检验](http://en.wikipedia.org/wiki/Pearson%27s_chi-square_test)。

我在这里使用卡方测试编写了一个简单的 Python 字符计数测试器：[https](https://github.com/decbis/salr) ://github.com/decbis/salr 。将来我会添加更多测试。

# php - 防止重复条目

> ID：11503697
> 
> 赞同：0
> 
> 时间：2012-07-16T11:52:07.983
> 
> 标签：php, mysql, database

基本上它会查看文件夹中的 mp3 文件，如果不存在则`insert`进入 mysql 数据库。`number`

问题是`INSERT`(mysql) 已插入超过 1 次，但不同`member_id`的 's 相同`number`。这不应该发生。

4 名员工正在执行此脚本。是什么原因造成的以及如何解决？

```
if ($handle = opendir($audioPath)) {
    while (false !== ($entry = readdir($handle))) {
        $file = pathinfo($entry);
        if ($entry != "." && $entry != ".." && !is_dir($audioPath . "/" . $entry) && $file['extension'] == 'mp3') {
            $number = $file['filename'];
            $SQL = "SELECT mobile, status, member_id, count(*) as Total from result WHERE number = :number";
            $query = $this->db->prepare($SQL);
            $query->bindValue(":number", $number);
            $query->execute();

            $row = $query->fetch(PDO::FETCH_ASSOC);

            // Check if number is exist in the table
            if ($row['Total'] == 0) {
                $SQL = "INSERT INTO result (number, status, status_date, member_id) VALUES ('$number', 'pending', now(), '$memberId')";
                $queryInsert = $this->db->prepare($SQL);
                $queryInsert->execute();
                break;
            } 
        }
    }
} 
```

在`break`它通过媒体播放器插件播放 mp3 之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:57:03.080

您可能遇到了两个人同时执行脚本的竞争条件。执行选择时，该条目不存在。

解决这个问题的最好方法是在 MySQL 中的 number 字段上添加一个 UNIQUE 约束。这将确保条件在插入时匹配。查询将失败，因此您需要处理错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:56:34.970

您的第一个选择查询也应该过滤成员 ID...

```
$SQL = "SELECT mobile, status, member_id, count(*) as Total from result WHERE number = :number AND member_id = :memberid"; 
```

# c - ptr = &a 和 *ptr = a 意思一样吗？

> ID：11503700
> 
> 赞同：0
> 
> 时间：2012-07-16T11:52:14.923
> 
> 标签：c, pointers

书中解释道：

```
ptr = &a /* set ptr to point to a */

*ptr = a /* '*' on left:set what ptr points to */ 
```

他们在我看来是一样的，不是吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T11:54:08.680

不，第一个更改指针（它现在指向`a`）。第二个改变了指针指向的东西。

考虑：

```
int a = 5;
int b = 6;

int *ptr = &b;

if (first_version) {
    ptr = &a;
    // The value of a and b haven't changed.
    // ptr now points at a instead of b
}
else {
    *ptr = a;
    // The value of b is now 5
    // ptr still points at b
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:01:12.813

不， `ptr = &a`您将变量“a”的地址存储在变量“ptr”中，即类似`ptr=0xef1f23`.

在`*ptr = a`您将变量 'a' 的值存储在指针变量 '*ptr' 中，即类似`*ptr=5`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:03:20.903

嗯，不。但是为了解释类似的行为，添加到 Oli Charlesworth 的回答中：

考虑：

```
int a = 5;
int* ptr = new int;

if(first_version) {
  ptr = &a;
  //ptr points to 5 (using a accesses the same memory location)
} else {
  *ptr = a;
  //ptr points to 5 at a different memory location
  //if you change a now, *ptr does not change 
} 
```

编辑：很抱歉使用`new`（c++ not c），但指针的东西没有改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:10:21.360

两者都不相同。

**如果你修改 a = 10 的值。然后再次打印 *ptr。它只会打印 5 个，而不是 10 个。**

```
*ptr = a; //Just copies the value of a to the location where ptr is pointing.
ptr = &a; //Making the ptr to point the a 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-09T04:56:02.510

`*ptr=&a`C++ 编译器会产生错误，因为你要将地址分配给 adres `ptr=&a`，这是真的，这里 ptr 像变量一样工作，&a 是 a 的地址，其中包含一些值

检查并尝试

```
int *ptr,a=10;
ptr=&a;output=10; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-06T19:11:11.807

*ptr=&a 表示我们的指针指向变量 a 的地址，而 *ptr=a 表示我们的指针指向值 a

# python - python结构获取公共IP地址

> ID：11503703
> 
> 赞同：1
> 
> 时间：2012-07-16T11:52:29.283
> 
> 标签：python, fabric

尝试使用python结构获取主机的公共IP地址

```
def publicip():
        ip = local("curl -s 'http://checkip.dyndns.org' | sed 's/.*Current IP Address: \([0-9\.]*\).*/\'\1/g\'")
        print (red(ip)) 
```

错误：

```
Fatal error: local() encountered an error (return code 2) while executing 'curl -s 'http://checkip.dyndns.org' | sed 's/.*Current IP Address: \([0-9\.]*\).*/'/g'' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:17:04.903

您正在运行的主机上可能未安装 Curl。无论如何你都不需要它，因为你可以像这样在 Python 中轻松地做到这一点：

```
import urllib2

u = urllib2.urlopen('http://checkip.dyndns.org')
line = u.next()
print line.split("<")[6].split().pop() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:16:28.610

我不确定`local()`（执行外部命令？）是什么，但使用`requests`库，`re.search`这相当简单：

```
import requests, re

r = requests.get('http://checkip.dyndns.org')
myip = re.search(r'\d+\.\d+\.\d+\.\d+', r.text).group() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:23:01.020

它似乎`local()`不支持执行多个命令。但是，您可以将执行拆分为：

```
def publicip():
    ip = local("curl -s 'http://checkip.dyndns.org'", capture=True) 
```

然后 ip 将包含所需的 html：

```
'<html><head><title>Current IP Check</title></head><body>Current IP Address: 1.2.3.4</body></html>' 
```

您可以使用正则表达式解析，例如：

```
r = re.compile(r'.*\<body>Current IP Address:\s(.*)\</body>.*')
final_ip = r.match(ip).group(1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-25T17:33:22.313

一个纯python实现是

```
import requests
r = requests.get('http://ipof.in/txt')
myip = r.text 
```

就是这样。如果您需要 IP 地址以外的更多信息，请查看[http://ipof.in](http://ipof.in)

# jquery - jQuery datepicker doesn't work properly due to the presence of a text input

> ID：11503706
> 
> 赞同：0
> 
> 时间：2012-07-16T11:52:44.607
> 
> 标签：jquery, jquery-ui, datepicker

I am using the following code to select a date range using 2 inline datepickers. There are two date fields (**div**, with class **dateheader**). When a date is selected, that datepicker slides up. Basically when the date **div** is **clicked**, first it is checked whether the corresponding datepicker is already viewable (through the **fromclicked** and **toclicked** variables), if present, then slide it up, else slide it down, changing the corresponding **clicked** attribute accordingly, and before doing either, sliding the other datepicker up and setting its corresponding **clicked** attribute to 0\. Now there is a text input at the bottom of the code. When it is excluded, the code works fine, as expected. However if it is included, the code breaks, i.e if you click one date **div**, then select a date from the datepicker, it will slide up correctly. Then if you click the other date **div**, the datepicker will slide down alright, but selecting a date won't slide it up. I am at my wit's end. Where is the bug? The complete code is at [http://jsfiddle.net/Cupidvogel/2ppYb/](http://jsfiddle.net/Cupidvogel/2ppYb/) (I couldn't include the UI-CSS files, but even the unstyled version is enough!).

```
 <!DOCTYPE html>
<html>

    <head>
        <style>
            .dateheaders {
                background: black;
                width: 120px;
                height: 28px;
                position: absolute;
                top: 0px;
                left: 33px;
                border-radius: 5px;
                cursor: pointer;
                display: inline-block;
                z-index: 55;
            }
            .toheader {
                left: 216px
            }
            .spandate {
                color: white;
            }

            div#diva1 {
                width: 190px;
                position: absolute;
                display: none;
                z-index: 10;
                outline: none;
            }
            div#diva2 {
                width: 190px;
                position: absolute;
                display: none;
                z-index: 10;
                outline: none;
            }
            #datecontainer {
                position: relative;
                width: 400px;
                height: 30px;
                background: red;
                top: 60px;
                left: 40px;
            }
        </style>
        <link type="text/css" href="ui-darkness/ui.css" rel="stylesheet"
        />
        <script src="jquery.js"></script>
        <script type="text/javascript" src="ui.minified.all.js"></script>
        <script>
            $(function () {

                fromclicked = 0;
                toclicked = 0;

                $("#diva1").datepicker({
                    changeMonth: true,
                    changeYear: true,
                    dateFormat: 'dd/mm/yy',
                    maxDate: "+0D",
                    onSelect: function (selectedDate) {
                        fromclicked = 0;
                        $("#diva2").datepicker("option", "minDate", selectedDate);
                        $("div.fromheader").css({
                            borderRadius: '5px'
                        }).find('span').text(selectedDate)
                        });
                        $("#diva1").slideUp(300);
                    }
                });
                $("#diva2").datepicker({
                    changeMonth: true,
                    changeYear: true,
                    dateFormat: 'dd/mm/yy',
                    maxDate: "+0D",
                    onSelect: function (selectedDate) {
                        toclicked = 0;
                        $("#diva1").datepicker("option", "maxDate", selectedDate);
                        $("div.toheader").css({
                            borderRadius: '5px'
                        }).find('span').text(selectedDate).end()
                        });
                        $("#diva2").slideUp(300);
                    }
                });
                $("body").css({
                    fontSize: '16px'
                });
                $("div.ui-datepicker-inline").css({
                    fontSize: '62.5%',
                    left: '-50px',
                    borderRadius: '0px 10px 10px 10px'
                });

                $(".dateheaders").click(function () {
                    $top = $(this).offset().top + $(this).height() - 1;
                    $left = $(this).offset().left;
                    if ($(this).hasClass('fromheader')) {
                        $("div#diva2").slideUp(300, function () {
                            toclicked = 0;
                        });
                        $(".toheader").css({
                            borderRadius: '5px'
                        })
                        });
                        if (!fromclicked) {
                            fromclicked = 1;
                            $("div#diva1").appendTo("body").css({
                                display: 'block',
                                top: $top,
                                left: $left
                            }).slideUp(0).slideDown(300, function () {
                                $(this).focus();
                            });

                            $("div.fromheader").css({
                                borderRadius: '5px 5px 0px 0px'
                            })
                            });
                        } else {
                            $("div#diva1").slideUp(300);
                            $("div.fromheader").css({
                                borderRadius: '5px'
                            })
                            });
                            fromclicked = 0;
                        }
                    } else {
                        $("div#diva1").slideUp(300, function () {
                            fromclicked = 0;
                        });
                        $(".fromheader").css({
                            borderRadius: '5px'
                        })
                        });
                        if (!toclicked) {
                            toclicked = 1;
                            $("div#diva2").appendTo("body").css({
                                display: 'block',
                                top: $top,
                                left: $left
                            }).slideUp(0).slideDown(300, function () {
                                $(this).focus();
                            });

                            $("div.toheader").css({
                                borderRadius: '5px 5px 0px 0px'
                            })
                            });
                        } else {
                            $("div#diva2").slideUp(300);
                            $("div.toheader").css({
                                borderRadius: '5px'
                            })
                            });
                            toclicked = 0;
                        }
                    }
                });

            });
        </script>
    </head>

    <body>
        <div id='datecontainer'>
            <div class='dateheaders fromheader'>
                <span class='spandate'>Select a date</span>
            </div>
            <div class='dateheaders toheader'>
                <span class='spandate'>Select a date</span>
            </div>
            <div id='diva1'></div>
            <div id='diva2'></div>
        </div>
        <input id='boombada' type="text" size="23" value="" />
    </body>

</html> 
```

Please include the core jQuery UI file (which includes everything, around 202 KB size) and the UI-darkness theme folder to see the results!

Further updation, the error persists only with text or password input, if you change the input type to radio or checkbox, it works fine. Console shows an error statement **a is undefined**, and points out to the first line of the datepicker js part in the minified UI file.

# html - style attribute issue with Internet Explorer

> ID：11503709
> 
> 赞同：1
> 
> 时间：2012-07-16T11:53:02.050
> 
> 标签：html, internet-explorer, dom

In the following example, how to get the value of the *style* attribute using DOM api:

```
<!DOCTYPE html>
...
<div id="myid" style="foo"></div>
... 
```

`document.getElementById('myid').getAttribute('style')` returns "foo" on firefox and google chrome but returns null on IE(9)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:13:31.140

IE 解析样式表并丢弃语法错误的部分。如果您使用 eg 进行测试，`<div id="myid" style="color: #003; foo; line-height: 1.3">`则 IE 9 标准模式将返回`color: rgb(0, 0, 51); line-height: 1.3;`。所以它已经转换了颜色符号，并丢弃了格式错误的部分。在您的情况下，CSS 代码在删除坏部分后变为空。

旧版本的 IE 行为不同，IE 9 的 Quirks 模式也是如此。通常，避免读取`style`HTML 属性，而改为读取`style`DOM 属性。关于差异，请参阅问题[使用 javascript 访问属性值的不同方式](https://stackoverflow.com/questions/10258259/different-ways-of-accessing-attribute-values-using-javascript)。

# c# - WebBrowser DisconnectedContext was detected

> ID：11503715
> 
> 赞同：0
> 
> 时间：2012-07-16T11:53:26.357
> 
> 标签：c#, .net, exception, browser, disconnected

I am using a webbrowser to crawl through a website and sometimes I get this DisconnectedContext was detected exception...

It seems that it happens when I call the Webbrowser.InvokeScript method.

Has anyone encounterd this error before?

It does not happen all the time.

# c# - How to fix errors in switch operator

> ID：11503716
> 
> 赞同：1
> 
> 时间：2012-07-16T11:53:53.417
> 
> 标签：c#, .net

I have a class named config with two string fields named key paramValue and parameterPath.

When I apply the ChooseType method of the class, the method has to return one variable paramValue in different types (Int or bool or String).

I implemented it as follow:

```
class ConfigValue
{
    public string parameterPath;
    private string paramValue;

    public ConfigValue(string ParameterPath="empty",string ParamValue="empty")
    {
        this.parameterPath = ParameterPath;
        this.paramValue = ParameterPath;
    }

    public enum RetType { RetInt=1, RetBool, RetString };

    public  T ChooseType<T>(RetType how)
    {

        {

            switch(how)
             {
                case RetType.RetInt:

                     return int.Parse(string this.paramValue);
                        break;

                case RetType.RetBool:

                    return  Boolean.Parse(string this.paramValue);
                        break;

                case RetType.RetString:

                       return this.paramValue;
                      break;
             }

         }
    }

} 
```

But,I get error in switch operator in the next rows:

```
 return int.Parse(string this.paramValue); 
```

Error:

> Only assignment, call, increment, decrement, and new object expressions can be used as a statement.

```
 return  Boolean.Parse(string this.paramValue); 
```

Error:

> Invalid expression term 'string'.

```
 return this.paramValue; 
```

Error:

> Cannot implicitly convert type 'string' to 'T'.

Any idea why do I get these errors and how can I fix the code?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T11:57:47.727

> 知道为什么我会收到这些错误吗？

编译器不知道会是什么，`T`也不知道如何隐式转换 from`string`或to 。`bool``int``T`

> 以及如何修复代码？

您可以先显式转换为`object`，然后再转换为`T`：

```
return (T) (object) int.Parse(string this.paramValue); 
```

“通过”的要求`object`有点奇怪 - Eric Lippert 有一篇[博客文章更详细地介绍了这一点](http://blogs.msdn.com/b/ericlippert/archive/2012/07/10/when-is-a-cast-not-a-cast.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:11:47.053

问题是您声明函数的返回类型将是 T。由于 T 可以是任何类型，因此您不能明确返回 int、string 或任何特定类型。您可能想尝试使用一个返回指令，例如

```
public  T ChooseType<T>() 
{
    return (T)this.paramValue;
} 
```

然后，在调用函数时，指定 T，如下所示：

```
int a = ChooseType<int>(); 
```

或者

```
string a = ChooseType<string>(); 
```

请记住，如果 paramValue 无法转换为 T，则会引发错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:57:30.497

```
public T ChooseType<T>(RetType how)
{
    switch (how)
    {
        case RetType.RetInt:
            return (dynamic)int.Parse(paramValue);
        case RetType.RetBool:
            return (dynamic)Boolean.Parse(paramValue);
        case RetType.RetString:
            return (dynamic)paramValue;
        default:
            throw new ArgumentException("RetType not supported", "how");
    }
} 
```

调用某些方法时不应指定参数类型。仅方法声明所需的参数类型。因此只需传递参数：

```
int.Parse(this.paramValue) // you can use class members without this keyword
int.Parse(paramValue) 
```

此外，您应该`default`为您的 switch 块添加分支（如果将不正确的参数值传递给您的方法，则必须返回一些内容）。

此外，`break`如果您已经使用过`return`.

并且为了将某些类型转换为通用值，您应该使用`dynamic`，或通过对象进行双重转换：

```
return (dynamic)int.Parse(paramValue);
return (T)(object)int.Parse(paramValue); 
```

# jquery - 当数据仍在加载时防止第二次点击

> ID：11503719
> 
> 赞同：0
> 
> 时间：2012-07-16T11:53:57.683
> 
> 标签：jquery

我的页面中有一个链接，当用户单击此链接时，我将加载一些数据，`$.getJSON`如果服务器繁忙或互联网速度连接速度低，此响应将需要大约 10 秒，因此用户可能再次单击此链接链接，如何更改我的代码以防止第二次点击？我的意思是，我如何定义用户是否第二次点击链接，什么都不做？

这是点击事件：

```
$('#showResult').click(function () {
     $.getJSON (url, data, function updateForm() {

        .... MY CODE ....

     });
}); 
```

对不起，我的英语不好 ：-（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:58:45.020

你可以做这样的事情：

```
$('#showResult').click(function () {
     var _this = this;
     if (this.inprogress) {
         alert('please wait');
         return;
     }
     this.inprogress = true;
     $.getJSON (url, data, function updateForm() {

        .... MY CODE ....
        _this.inprogress= false;
     });
}); 
```

但是通常我更喜欢显示进度微调器，并且当我进行长时间加载时整个窗口变灰，以便用户知道他必须等待：

```
loading = {
    count: 0
};

loading.finish = function() {
    this.count--;
    if (this.count==0) this.$div.hide();
};

loading.start = function() {
    this.count++;
    if (!this.$div) {
        var html = '<div style="position: fixed;z-index:100;left:0;top:0;right:0;bottom:0;background: black;opacity: 0.6;">'; // this class covers and greys the whole page
        html += '<table width=100% height=100%>';
        html += '<tr><td align=center valign=middle>';
        html += '<img src=img/loading.gif>';
        html += '</td></tr>';
        html += '</table></div>';
        this.$div=$(html);
        this.$div.prependTo('body');
    }
    setTimeout(function(){
        if (loading.count>0) loading.$div.show();
    }, 500);
};

$('#showResult').click(function () {
     loading.start();
     $.getJSON (url, data, function updateForm() {

        .... MY CODE ....

        loading.finish();
     });
}); 
```

（使用此代码，仅当 ajax 调用时间超过 500 毫秒时才会显示微调器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:58:43.383

您可以尝试取消绑定点击，例如

```
$('#showResult').click(function () {
     $(this).unbind("click");
     $.getJSON (url, data, function updateForm() {

        .... MY CODE ....
        //after response data you can rebind it

     });
}); 
```

或者您可以添加一些属性并对其进行检查，例如单击后将“clicked”添加为数据

```
$('#showResult').click(function () {
     if($(this).data("clicked") {
         return false;
     }
     else {
       $.getJSON (url, data, function updateForm() {

        .... MY CODE ....
        $('#showResult').data("clicked", true);
       });
     }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:58:50.380

此代码应**捕获对元素的双击**并防止该事件冒泡。

```
$("#showResult").on('dblclick',function(e){
  e.preventDefault();
}); 
```

如果您只是想防止在发生其他操作时再次单击该元素，则可以使用布尔标志。类似的东西`isWorking`。

```
var isWorking = false;

$("#showResult").on('click',function(){
  if (!isWorking){
    //execute code here!
    isWorking = true;
  }else{
    // wait! something is still working!
  }
}); 
```

动作完成后，别忘了将旗帜放回原来的位置。

`isWorking = false;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:00:54.217

```
var doJson = function(doCallback) {
     $('#showResult').unbind('click');
     $.getJSON (url, data, function updateForm() {
        .... MY CODE ....
        doCallback();
     });
}

$('#showResult').click(function () {
    doJson(function() {
        $('#showResult').bind('click', this));
    });
}); 
```

回调绑定函数，函数解除绑定:)

# javascript - 以格式显示日期

> ID：11503728
> 
> 赞同：2
> 
> 时间：2012-07-16T11:54:23.140
> 
> 标签：javascript, jquery, datetime, date

我有：

```
var date = new Date(); 
```

我有很多格式：

```
var one = 'yy-mm-dd';
var two = 'dd.mm.yy';
var three = 'dd/mm/yy';
var four = 'mm/dd/yy'; 
```

可以用这四种格式显示当前日期吗？我知道 - 我可以使用子句 IF 或 SWITCH 并设置它，但也许在没有外部库的 JavaScript 或 jQuery 中我可以使用这种格式作为选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:55:43.623

如果您也已经在使用 jQuery UI [，](http://docs.jquery.com/UI/Datepicker/formatDate)那么`DatePicker`.

如果没有，请使用[Datejs](http://www.datejs.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:59:33.903

您必须自己使用 getFullYear()、getMonth() 和 getDate() 并按照您认为合适的方式组合它们（不需要 jquery/jquery UI）。

如果您正在使用或可以使用 JQuery UI，您可以利用[$.datepicker.formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)方法（这是我们采用的方法）。

[你的问题已经被问过](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)（以某种不同的形式）

# android - 在 Dialog 元素中显示 Fragment 元素

> ID：11503729
> 
> 赞同：0
> 
> 时间：2012-07-16T11:54:23.160
> 
> 标签：android, android-layout

在我的应用程序中，应该在不同的面向设备的布局之间共享相同的功能。对于手机，我有一个执行一些交易的活动——同时我必须在平板电脑版本的弹出窗口中实现相同的功能。

到目前为止，我已经尝试两种方式将片段放入对话框：静态和动态。当我静态地这样做时，它会抱怨重复的 ID，我猜这意味着 Fragment 已经创建。另一方面，当我尝试动态实现它时，它说片段没有视图。我这样做：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(_layoutResID);

}

@Override
    public void show() {
        super.show();
        FragmentManager fragmentManager = ((FragmentActivity) _context).getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

        TabletLoginFragment loginFragment = new TabletLoginFragment();

        fragmentTransaction.add(R.id.login_fragment_holder, loginFragment);
        fragmentTransaction.commit();
    } 
```

两种方式我都无法让它工作 - 你会建议将片段放在 Dialog 元素内吗？

# ruby - 在 Selenium WebDriver 中按 Ctrl + A

> ID：11503736
> 
> 赞同：49
> 
> 时间：2012-07-16T11:54:49.507
> 
> 标签：ruby, selenium, selenium-webdriver, keypress

有没有办法使用 Selenium WebDriver按`Ctrl`+键？`A`

我检查了 Selenium 库，发现 Selenium 只允许按下特殊键和[功能键](https://en.wikipedia.org/wiki/Function_key#MS-DOS/Windows)。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-16T17:52:47.370

另一种解决方案（在 Java 中，因为您没有告诉我们您的语言 - 但它在所有具有`Keys`类的语言中都以相同的方式工作）：

```
String selectAll = Keys.chord(Keys.CONTROL, "a");
driver.findElement(By.whatever("anything")).sendKeys(selectAll); 
```

您可以使用它来选择`<input>`或整个页面上的整个文本（只需找到`html`元素并将其发送给它）。

* * *

使用 Selenium Ruby 绑定：

Ruby 绑定中的[类](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Keys.html)中没有`chord()`方法。因此，正如 Hari Reddy 所建议的，您必须使用 Selenium Advanced 用户交互 API，请参阅：[`Keys`](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Keys.html)[`ActionBuilder`](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/ActionBuilder.html)

```
 driver.action.key_down(:control)
                 .send_keys("a")
                 .key_up(:control)
                 .perform 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-16T15:52:35.893

要单击`Ctrl`+ `A`，您可以使用 Actions 来完成

```
 Actions action = new Actions(); 
  action.keyDown(Keys.CONTROL).sendKeys(String.valueOf('\u0061')).perform(); 
```

\u0061 代表字符'a'

\u0041 代表字符'A'

要按其他字符，请参阅 unicode 字符表 - [http://unicode.org/charts/PDF/U0000.pdf](http://unicode.org/charts/PDF/U0000.pdf)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-01-16T19:21:21.347

在 C# 的 Selenium 中，发送`Keys.Control`只是切换**Control**键的状态：如果它启动，则它变为关闭；如果它下降，那么它就会上升。所以要模拟按下**Control+A**，发送`Keys.Control`两次，一次在发送“a”之前，然后在之后。

例如，如果**我们**是一个输入 IWebElement，下面的语句将选择它的所有内容：

`we.SendKeys(Keys.Control + "a" + Keys.Control);`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-09-30T07:42:25.123

你可以试试这个：

```
driver.findElement(By.xpath(id("anything")).sendKeys(Keys.CONTROL + "a"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-16T14:31:05.223

因为`Ctrl`+`A`映射到 ASCII 码值 1（`Ctrl`+`B`到 2，最多，`Ctrl`+`Z`到 26）。

尝试：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using OpenQA.Selenium;
using OpenQA.Selenium.IE;
using OpenQA.Selenium.Support.UI;
using OpenQA.Selenium.Interactions;
using OpenQA.Selenium.Internal;
using OpenQA.Selenium.Remote;

namespace SeleniumHqTest
{
    class Test
    {
            IWebDriver driver = new InternetExplorerDriver();
            driver.Navigate().GoToUrl("http://localhost");
            IWebElement el = driver.FindElement(By.Id("an_element_id"));
            char c = '\u0001'; // ASCII code 1 for Ctrl-A
            el.SendKeys(Convert.ToString(c));
            driver.Quit();
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-02T09:39:50.990

**对于 Python：**

```
ActionChains(driver).key_down(Keys.CONTROL).send_keys("a").key_up(Keys.CONTROL).perform(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-16T14:12:48.940

C# 中最简单的答案（如果您倾向于 C#）。

```
Actions action = new Actions(); 
action.KeyDown(OpenQA.Selenium.Keys.Control).SendKeys("a").KeyUp(OpenQA.Selenium.Keys.Control).perform(); 
```

这个答案几乎是[由 Hari Reddy](https://stackoverflow.com/questions/11503736/pressing-ctrl-a-in-selenium-webdriver/11507909#11507909)给出的，但我已经修复了他在某些关键字上弄错了的情况，添加了 KeyUp 或者你把控制键弄得一团糟。

我还在*OpenQA.Selenium.Keys*上添加了说明，因为您可能还需要在与我相同的类上使用 Windows.Forms 需要这种说明。

最后，我输入“a”，因为我发现这是最简单的方法，而且我看不到 OP 的任何建议，即他们不想要最简单的答案。

非常感谢 Hari Reddy，因为我是 Actions 类用法的新手，并且我正在编写许多不同的命令。以他展示的方式将它们链接在一起更快:-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-07T20:26:05.873

```
WebDriver driver = new FirefoxDriver();

Actions action = new Actions(driver); 

action.keyDown(Keys.CONTROL).sendKeys("a").keyUp(Keys.CONTROL).perform(); 
```

此方法删除了将 unicode 转换为字符串的额外调用（ String.ValueOf() ）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-02T19:20:01.747

我发现在 Ruby 中，您可以将两个参数传递给`send_keys`

像这样：

```
element.send_keys(:control, 'A') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-07T16:22:42.767

这个对我有用：

```
OpenQA.Selenium.Interactions.Actions action 
    = new OpenQA.Selenium.Interactions.Actions(browser);
action.KeyDown(OpenQA.Selenium.Keys.Control)
    .SendKeys("a").KeyUp(OpenQA.Selenium.Keys.Control).Perform(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-25T15:20:49.957

通过使用 Java 中的*Robot*类：

```
import java.awt.Robot;
import java.awt.event.KeyEvent;

public class Test1
{
    public static void main(String[] args) throws Exception
    {
        WebDriver d1 = new FirefoxDriver();
        d1.navigate().to("https://www.youtube.com/");
        Thread.sleep(3000);
        Robot rb = new Robot();
        rb.keyPress(KeyEvent.VK_TAB);
        rb.keyRelease(KeyEvent.VK_TAB);
        rb.keyPress(KeyEvent.VK_TAB);
        rb.keyRelease(KeyEvent.VK_TAB);

        // Perform [Ctrl+A] Operation - it works
        rb.keyPress(KeyEvent.VK_CONTROL);
        rb.keyPress(KeyEvent.VK_A);

        // It needs to release key after pressing
        rb.keyRelease(KeyEvent.VK_A);
        rb.keyRelease(KeyEvent.VK_CONTROL);
        Thread.sleep(3000);
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-29T13:05:43.037

这对我使用 C# (Visual Studio 2015) 和 Selenium 有用：

```
new Actions(driver).SendKeys(Keys.Control + "A").Perform(); 
```

您可以在中间使用 (+) 添加任意数量的键。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-07T12:35:16.687

### 爪哇

*Robot*类将比通过Selenium sendkeys 发送密钥更有效。请试试：

例子：

```
Robot rb = new Robot();
rb.keyPress(KeyEvent.VK_CONTROL);
rb.keyPress(KeyEvent.VK_A); 
```

要使用上述*Robot*类，您需要`import java.awt.Robot;`'.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-02-22T12:22:26.917

```
Actions act = new Actions(driver);
act.keyDown(Keys.CONTROL).sendKeys("a").keyUp(Keys.CONTROL).build().perform(); 
```

# c# - log4net 每分钟创建一个新日志

> ID：11503737
> 
> 赞同：3
> 
> 时间：2012-07-16T11:54:51.273
> 
> 标签：c#, log4net

`log4net`在我的项目中每分钟创建新的日志文件。我希望我的应用程序的每个实例只有一个文件，但是每个运行的实例都应该创建新的日志文件。

这是来自我的`app.config`文件：

```
<appender name="file" type="log4net.Appender.RollingFileAppender">
  <file value="C:\\Logs\\log2_"/>
  <rollingStyle value="Date"/>
  <datePattern value="MMdd_HHmmss.\tx\t"/>
  <staticLogFileName value="false"/>
  <appendToFile value="true"/>
  <maximumFileSize value="500MB"/>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date %-5level %message%newline"/>
  </layout>
</appender> 
```

这里有什么错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:02:58.070

您的滚动样式设置为日期，这意味着它将按时间间隔旋转。datePattern 元素似乎被滥用，但它设置为每分钟滚动一次（./tx/t）似乎无关紧要。

以下是每个应用实例一次的示例（硬限制为 50G）：

```
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
    <file value="logfile.txt" />
    <appendToFile value="false" />
    <rollingStyle value="Size" />
    <maxSizeRollBackups value="-1" />
    <maximumFileSize value="50GB" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
    </layout>
</appender> 
```

[有关文档，请参见此处](http://logging.apache.org/log4net/release/config-examples.html#rollingfileappender)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:02:36.390

从文件布局中排除 dateTime 分钟

# php - 为什么上传的文件 Zip 文件是空的？

> ID：11503741
> 
> 赞同：0
> 
> 时间：2012-07-16T11:55:05.240
> 
> 标签：php, jquery, file-upload, zip

我正在使用 jQuery[表单插件](http://malsup.com/jquery/form/#code-samples)和 PHP 上传文件。我将 Zip 文件上传到服务器，使用`move_uploaded_file()`. 它返回 true，然后我将文件解压缩到服务器中的另一个文件夹，将现有文件和文件夹复制到该目录。但是，我看不到文件夹中的文件。只有文件夹存在。然后我下载了上传的文件，当我尝试在本地解压缩时，我得到了`The archive is either in unknown format or damaged`. 原始 Zip 文件可以正常打开。我只是不明白档案发生了什么。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:59:26.447

Zip 实现因系统而异。在 Windows 上创建的存档在 linux 上可能无法读取。存档可能实际上是有效的。

请提供详细信息：您如何创建存档，如何提取它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:04:05.307

无论如何，您需要`enctype="multipart/form-data"`在 HTML 表单中指定 a 。否则，您的文件将无法正确上传（或根本无法上传）：

```
<form id="myForm" action="upload.php" method="post" enctype="multipart/form-data"> 
    File: <input type="file" name="file" /> 
    <input type="submit" value="Submit" /> 
</form> 
```

根据 W3C 关于 enctype 的规范：“*此属性指定用于向服务器提交表单的内容类型（当 method 的值为“post”时）。此属性的默认值为“application/x-www-form- urlencoded”。值“multipart/form-data”应与 INPUT 元素 type="file" 结合使用。* "

# methods - 在TestNG中一个接一个地运行测试方法

> ID：11503743
> 
> 赞同：2
> 
> 时间：2012-07-16T11:55:13.803
> 
> 标签：methods, selenium-webdriver, parallel-processing, testng

我正在使用 Eclipse + Selenium WebDriver + TestNG

这是我的班级结构：

```
class1
{
@test (invocation count =4)
method1()

@test (invocation count =4)
method2()

} 
```

我的 testing.xml 文件：

```
<classes>
<class name="tests.class1">
<methods>
<include name="method1" />
<include name="method2" />
</methods>
</class>
</classes> 
```

通过我当前的testing.xml运行时，测试的顺序是：method1 method1 method1 method1 method2 method2 method2 method2

但我希望测试按以下顺序运行：方法1 方法2 方法1 方法2 方法1 方法2 方法1 方法2

请指导我达到预期的结果。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T02:28:45.730

`dependsOnGroups`在[文档](http://testng.org)中查找“ ” 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T09:37:39.460

You can also use "priority" of TestNG as:

```
@Test(priority = -19)
public void testMethod1(){
//some code
}
@Test(priority = -20)
public void testMethod2(){
//some code
} 
```

[Note: The priority for this test method. Lower priorities will be scheduled first]

So, in the above example testMethod2 will be executed first as -20 less than -19

You can visit for more details: [http://testng.org/doc/documentation-main.html#annotations](http://testng.org/doc/documentation-main.html#annotations)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-20T13:28:12.333

当然，制作的方法有很多。一个例子：

```
import java.lang.reflect.Method;

import org.testng.annotations.AfterMethod;
import org.testng.annotations.Test;

public class ABC {

    @Test(invocationCount=12)
    public void uno(){
        System.out.println("UNO");
    }
    @AfterMethod()
    public void sec(Method m){
        if(m.getName().equals("uno"))
        System.out.println("SEC");
    }
} 
```

和套件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suite name="Suite" parallel="none">
  <test name="Test" parallel="none" >
    <classes>
      <class name="aaa.ABC">
          <methods>
              <include name="uno">
          </methods>
      </class>
    </classes>
  </test> <!-- Test -->
</suite> 
```

记住，如果你使用`dependsOnMethod`then thes 方法将在所有调用后执行。例如：

```
@Test(invocationCount=3)
public void uno(){
    System.out.println("UNO");
}
@Test(dependsOnMethods={"uno"})
public void sec(){

    System.out.println("SEC");
} 
```

和：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suite name="Suite" parallel="none">
  <test name="Test" parallel="none" >
    <classes>
      <class name="aaa.ABC">
          <methods>
              <include name="uno"/>
                 <include name="sec"/>
          </methods>
      </class>
    </classes>
  </test> <!-- Test -->
</suite> 
```

会给：

```
UNO
UNO
UNO
SEC

===============================================
Suite
Total tests run: 4, Failures: 0, Skips: 0
=============================================== 
```

如果您测试您的测试，请`verbose ="3"`在套件 conf 中使用。例子：

```
<suite name="Suite" parallel="none" verbose="3"> 
```

因为这是打开完整的日志。

# regex - 支持特殊字符的电子邮件正则表达式有哪些？

> ID：11503745
> 
> 赞同：-3
> 
> 时间：2012-07-16T11:55:17.613
> 
> 标签：regex, email

> **可能重复：**
> [使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

我希望有一个用于电子邮件验证的 reg ex，它应该支持以下内容 -

*   大写和小写英文字母（a-z、A-Z）
    *   数字 0 到 9
    *   字符 !#$%&'*+-/=?^_`{|}~
    *   特点 。（点、句号、句号），前提是它不是第一个或最后一个字符，并且它不连续出现两次或多次（例如 abhi..shekk@example.com）。
    *   允许使用特殊字符，但有以下限制：
        *   空格和 "(),:;<>@[]

我需要在提交表单时使用 javascript 方法验证电子邮件 ID 吗？

谢谢，

阿布舍克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:07:04.550

First, I don't understand the last item of the list of requirements of Regular Expression:

*   Special characters are allowed with restrictions including:
    *   Space and "(),:;<>@[]

The second, you should **ALWAYS** validate regular expression on server side. Because unless you are doing so, validating has no sense - client may use his own tool to send request to server. client validation will be good for warning user about mistakes prior to submission of the form. And yes, you should validate all fields on form submission. You could run any JavaScript function. `<form>` tag has event `onSubmit()` for that.

# sql-server-2008 - SQL Server 2008 RC2 中缺少节点（）方法

> ID：11503750
> 
> 赞同：6
> 
> 时间：2012-07-16T11:55:45.907
> 
> 标签：sql-server-2008, xpath, sql-server-2008-r2

我正在尝试使用 XPath 表达式进行查询。我的 Microsoft SQL Server 2008 RC2 知道这些功能`value()`，`query()`但缺少`nodes()`方法。

例子：

```
SELECT Data.nodes('/root/ids/id') As id FROM myTable 
```

数据是表中的一个 XML 列`myTable`。

是否需要以`nodes()`某种方式安装该方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T12:50:48.967

`nodes`可以返回多于一行，因此您不会像返回标量一样调用它

```
with myTable as
(
SELECT CAST('<root><ids><id>1</id><id>2</id></ids></root>' AS XML) AS Data
)

SELECT x.value('.', 'int')
FROM   myTable
       CROSS APPLY Data.nodes('/root/ids/id') x(x) 
```

# ios - 苹果推送通知沙箱

> ID：11503755
> 
> 赞同：0
> 
> 时间：2012-07-16T11:56:09.577
> 
> 标签：ios, push-notification, apple-push-notifications

我在苹果官方[页面上](https://web.archive.org/web/20130424034516/https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html)读到：

> 沙盒环境还充当虚拟设备，支持模拟端到端测试

但在许多博客中，我读到您仍然需要 iPhone、iPad 或 iPod touch 来测试我的推送通知应用程序。

我真的需要 Apple 设备进行测试吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T11:33:20.363

沙盒环境仅适用于开发证书。此外，您需要使用开发证书构建应用程序。接下来需要做的事情是使用将安装应用程序的设备的 UDID 配置移动设备。安装后，该应用程序将为您提供设备令牌（没有其他方法可以获得有效的设备令牌）即是的，如果您想查看推送或获取设备令牌，您需要一个设备。

此外，设备令牌是由应用程序和设备组合生成的，因此除了在设备上安装应用程序之外别无他法。

有关更多安装和教程，我找到了一个不错的网站，您可以在这里查看：[http ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

请务必查看一下。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:59:25.817

`deviceTokenBinary`是每个设备生成的变量，不能使用模拟器创建

检查[此](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/BinaryProviderAPI.html)二进制接口和**通知格式**

# iphone - 在 iPhone 中显示透明视图

> ID：11503756
> 
> 赞同：0
> 
> 时间：2012-07-16T11:56:11.287
> 
> 标签：iphone, ios, xcode, cocoa-touch, xib

我有一个 ViewController，在按下按钮时，我正在使用 [self presentModalViewController:_regViewController animated:YES] 加载另一个视图控制器；

在这个视图控制器中，我只有一个文本字段和两个按钮。

我想在这里显示透明视图。我的意思是，我只想显示 TextField 和两个按钮，其余的应该透明地显示它以前的视图控制器（有点模糊）。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:42:07.807

这个怎么样：

```
self.backgroundView = [[UIView alloc] initWithFrame:CGRectMake(0.0f,0.0f,1024.0f,768.0f)];
self.backgroundView.backgroundColor = [UIColor colorWithRed:255 green:255 blue:255 alpha:0.5];
[self.view addSubview:self.backgroundView]; 
```

但一定要实例化视图，然后合成属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:02:38.173

当您在另一个视图控制器上模态显示视图控制器时，当前视图控制器后面的视图控制器被隐藏尝试添加 UIView 或视图控制器的视图：-

```
[self.view addSubivew:viewController.view]; 
```

否则我会建议创建 UIView 并添加为子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:10:51.140

不要使用视图控制器尝试仅使用视图并使其透明。
将其添加到您的超级视图中，例如不要尝试呈现它..

```
[self.view addSubview:your_transparent_view]; 
```

# javascript - javascript：通过循环内联加速 10 倍？

> ID：11503757
> 
> 赞同：21
> 
> 时间：2012-07-16T11:56:17.977
> 
> 标签：javascript, performance, memory

我在我的 Firefox (13.0.1) 中遇到了一个奇怪的 javascript 行为的性能问题。最新的 Chrome 显示相同的行为。

当我执行类似于下面代码片段的 javascript 代码时，结果非常慢。但是，如果我简单地将外循环的内容内联到“j”上，我将获得大约 10 倍的加速。对于我的示例应用程序，这意味着我只是分别为'j = 0'和'j = 1'的固定值写了两次，因为'm'等于2。当然，我不想要'm ' 是硬编码的，所以我问自己在使用真正的循环时究竟是什么导致了这种减速？

有人有想法吗？

我正在网络工作者中运行代码。奇怪的是，如果我在主 javascript 上下文中执行相同的内联，而不是在工作人员的上下文中执行内联，则不会出现内联的积极影响。尽管如此，只为一个 'j' 值执行循环内容在所有情况下都会带来巨大的加速帮助。这是否也与内存管理有关？

提前非常感谢！

```
//m: very small, 1-2
for (j = 0; j < m; ++j) {
  var attrib = attributes[j];

  //n: very large, ~3*10^6 elements
  for (i = 0; i < n; ++i) {

    var data = largeBuffer[i];

    //nc: very small, 2-3
    for (c = 0; c < nc; ++c) {
      var component;
      //compute 'component
      //..
      attrib.typedArray[baseIdx + c] |= component;
    }

    baseIdx += nc;
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T18:45:02.253

这只是一个假设。我不太了解 JS 解释器的内部结构。

也许当您内联外部循环时，解释器会看到 4 次相同的代码，从而触发 JIT。相反，当您使用常规循环时，JIT 只能看到一次代码。

再一次，这只是一个假设。

# ios - iOS 上的默认加载屏幕

> ID：11503761
> 
> 赞同：1
> 
> 时间：2012-07-16T11:56:40.437
> 
> 标签：ios

我正在为 iPhone 和 iPad 制作一个通用应用程序，包括视网膜和非视网膜显示器。

我在网上寻找答案并找到了相互矛盾的答案，我不确定为什么有些人说 ipad 的默认图像必须是 2008 (h) 而不是 2048。

无论如何，我想知道我需要在我的应用程序中包含哪些 Default.pngs 以用于加载屏幕。以及是否每一个都是必不可少的？还有每个人应该叫什么名字？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:00:46.677

[App Store 所需资源 - 应用启动（默认）图像（最后更新：2012-03-07）](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)

在搜索标准时，首先尝试搜索 developer.apple.com。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:02:25.107

这是您应该需要的所有信息。

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)

至于iPad图像因状态栏而缩短的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:01:25.823

iOS 图像和设计指南的[启动图像部分](http://bit.ly/LLEHK1)详细解释了这一点。

> 对于**iPhone 和 iPod touch 启动图像**，包括状态栏区域。创建这些尺寸的启动图像：
> 
> 320 x 480 像素 640 x 960 像素（高分辨率）
> 
> **对于 iPad 启动图像**，不包括状态栏区域。创建这些尺寸的启动图像：
> 
> *   对于肖像：
>     
>     
>     *   768 x 1004 像素
>     *   1536 x 2008 像素（高分辨率）
> *   对于风景：
>     
>     
>     *   1024 x 748 像素
>     *   2048 x 1496 像素（高分辨率）

我最近也不得不[在ux.stackexchange.com上问这个问题](https://ux.stackexchange.com/questions/22974/designing-an-app-for-ipad-iphone-retina-display)，但后来找到了上面的链接。

* * *

[编辑：这里](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)描述了这些文件的命名。正文中的重要部分如下：

> 每个应用程序必须提供至少一个启动图像。此图像通常位于名为**Default.png**的文件中，该文件以纵向显示应用程序的初始屏幕。但是，您也可以提供其他启动图像以在不同的启动条件下使用。所有启动图像都必须是 PNG 文件，并且必须位于应用程序包目录的顶层。每个启动映像的名称表示何时使用，启动映像文件名的基本格式如下：
> 
> **`<basename><usage_specific_modifiers><scale_modifier><device_modifier>.png`**

# addthis - 如何使用 AddThis 小部件喜欢粉丝页面而不是当前域/URL

> ID：11503763
> 
> 赞同：2
> 
> 时间：2012-07-16T11:56:44.173
> 
> 标签：addthis

默认情况下，当用户按下 AddThis 小部件上的 Facebook Like 按钮时，当前域被喜欢。是否可以使用 AddThis 而不是当前域/URL 来喜欢粉丝页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:16:25.943

您可以指定 url 属性来自定义 url，如下所示：

```
 <div class="addthis_toolbox addthis_default_style"
             addthis:url="<You Domain URL>"
             addthis:title="Your Site Title"
             addthis:description="">
                <a class="addthis_button_facebook_like" fb:like:layout="button_count"
                   addthis:url="<Facebook Fan Page>"></a>
                <a class="addthis_button_tweet"></a>
                <a class="addthis_button_pinterest_pinit"
                   addthis:url="<Pinterest Profile Page>"></a>
 </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T14:17:08.680

This worked for me - remember to exchange %YOUR_ADDTHIS_PROFILE_ID%.

```
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count" fb:like:href="http://www.facebook.com/<Your_Page>"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=%YOUR_ADDTHIS_PROFILE_ID%"></script>
<!-- AddThis Button END --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T19:51:22.937

您也可以试试这个，只需更改 url :)

```
<a class="addthis_button_facebook_like" fb:like:layout="box_count" fb:like:href="http://www.stihovi.net"></a> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T12:00:09.767

如果您在 facebook 上手动启动粉丝页面，您可以获得 facebook 提供的小部件。对于我拥有的网站，我有一个最小的站点，它看起来就像是对总点赞竖起大拇指，但如果需要，您可以得到一个更详细的站点。

简而言之：必须手动创建 Facebook 页面，然后获取该页面的小部件以在您的网站上弹出。

# iphone - UIImagePickerController 保存文件路径 iOS/iPhone

> ID：11503764
> 
> 赞同：1
> 
> 时间：2012-07-16T11:56:45.390
> 
> 标签：iphone, objective-c, ios, xcode, uiimagepickercontroller

使用下面的代码我试图只保存视频文件路径（不想运行它或打开媒体播放器视图）。

问题是当我单击选择器控制器中的视频缩略图时，它会自动在媒体播放器视图中打开视频。虽然我只想保存它的路径，然后我想在用户按下播放按钮时使用它。

让我再解释一下，我有 2 个视图，在 MainView 我有 2 个按钮，1 个按钮 OPEN 用于打开`UIImagePickerController`和选择视频，1 个按钮 PLAY 用于播放相同的选定视频。我在这里要做的是，当用户点击打开按钮时`UIImagePickerController`应该打开并且用户应该能够选择视频，当用户点击视频缩略图时`UIImagePickerController`应该被关闭并且`MainView`（打开和播放按钮所在的位置）应该打开. 然后如果用户想播放电影，他会点击播放按钮并观看电影。

但是在这段代码中，当我单击 中的电影缩略图时`UIImagePickerController`，它会导航到媒体查看器。

```
- (IBAction)openPicker:(id)sender {

    mediaPickerController = [[UIImagePickerController alloc] init];
    NSArray *types = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerQualityTypeHigh];
    mediaPickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    mediaPickerController.delegate = self;
    mediaPickerController.mediaTypes = types;
    mediaPickerController.videoQuality = UIImagePickerControllerQualityTypeHigh;
    mediaPickerController.delegate = nil; 

   [self presentModalViewController:mediaPickerController animated:YES]; 

}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

    videoPath = [info objectForKey:UIImagePickerControllerMediaURL];
    NSLog(@"videoPath: %@", videoPath);
    [[picker parentViewController] dismissModalViewControllerAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:48:53.323

有两种方法...

1.  将*allowEditing*设置为*NO*。这不应该显示媒体查看器，但由于我不是每天都使用 UIImagePickerController，所以我不能 100% 确定，你需要对其进行测试。但是即使可以，如果视频超过 10 分钟，编辑界面仍然存在，因为视频必须修剪（查看 UIImagePickerController 的文档）。但是正如我写的那样，测试它，因为我不使用它可能会出错。

2.  看看[ALAssetsLibrary](http://developer.apple.com/library/ios/#DOCUMENTATION/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)。通过本课程（和朋友），您可以在几分钟内编写自定义选择器。然后你可以做任何你想做的事情。但是这种方法有一个小*问题*——用户必须同意你的应用程序可以访问位置信息，这对用户来说是相当误导的。那是因为资产可以包含位置信息。当用户禁用对您的应用程序的位置信息的访问时，您的自定义选择器将不起作用。

* * *

更新，评论中要求的一些代码。

获取组列表（此代码获取所有组并过滤掉没有视频的组）：

```
if ( ! __assetsLibrary ) {
  __assetsLibrary = [[ALAssetsLibrary alloc] init];
}
[__assetsLibrary enumerateGroupsWithTypes:__assetsGroupType
                               usingBlock:^( ALAssetsGroup *group, BOOL *stop ) {
                                 /*
                                  * If group is nil => end of iteration, no more groups will arrive.
                                  */
                                 if ( group ) {
                                   /*
                                    * We do only want groups with videos, so, set filter to allVideos. Following
                                    * numberOfAssets method respects filter settings, so, only number of videos
                                    * is returned.
                                    */
                                   [group setAssetsFilter:[ALAssetsFilter allVideos]];
                                    if ( [group numberOfAssets] > 0 ) {
                                      TMDCONDLOG( DEBUG_PICKER, @"Asset group added: %@", [group valueForProperty:ALAssetsGroupPropertyName ]);
                                      [__assetsGroups addObject:group];
                                    } else {
                                      TMDCONDLOG( DEBUG_PICKER, @"Skipping %@, no videos inside", [group valueForProperty:ALAssetsGroupPropertyName] );
                                    }
                                 } else {
                                   // group is nil, no more groups will arrive, reload table
                                   TMDCONDLOG( DEBUG_PICKER, @"Asset groups count: %d", (int)[__assetsGroups count]);
                                   dispatch_async( dispatch_get_main_queue(), ^{
                                     [self reloadDataFinished];
                                   } );
                                 }
                               }
                             failureBlock:^( NSError *error) {
                               TMDCONDLOG( DEBUG_PICKER, @"Failed: %@", error );
                               dispatch_async(dispatch_get_main_queue(), ^{
                                 [self reloadDataFinished];
                                 [self showAccessFailedError];
                               });
                             }]; 
```

这是一些要枚举的代码`ALAssetsGroup`：

```
[__assetsGroup enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stopEnumeratingAssets ) {
  TMDCONDLOG( DEBUG_ASSETS, @"Asset: %@ Index: %d", result, ( int ) index );
  if ( result  ) {
    [__assets addObject:result];
  }

  /*
   * Enumeration ends? If yes, reload table.
   */
  if ( ! result || index == NSNotFound ) {
    *stopEnumeratingAssets = YES;
    TMDCONDLOG( DEBUG_ASSETS, @"Going to reload table view" );
    [self performSelectorOnMainThread:@selector(reloadTableData) withObject:nil waitUntilDone:NO];
  }
}]; 
```

这是一个如何获取组的资产数量、海报图像等的示例：

```
__groupAssetsCountLabel.text = [NSString stringWithFormat:@"(%d)", (int) [__assetsGroup numberOfAssets]];    
__groupTitleLabel.text = ( NSString * )[__assetsGroup valueForProperty:ALAssetsGroupPropertyName];
__groupImageView.image = [UIImage imageWithCGImage:[__assetsGroup posterImage]]; 
```

在您的自定义`UITableViewCell`组中使用它。这是一个如何获取资产缩略图和持续时间的示例：

```
dispatch_async( dispatch_get_main_queue(), ^{
  __assetView.image = [UIImage imageWithCGImage:[__asset thumbnail]];
} );
id property = [__asset valueForProperty:ALAssetPropertyDuration];
if ( ! [property isEqual:ALErrorInvalidProperty] ) {
  NSInteger duration = ( ( NSNumber * )property ).integerValue;
  __durationLabel.text = [NSString stringWithFormat:@"%d:%02d", ( int ) ( duration / 60 ), ( int ) ( duration % 60 ) ];
} else {
  __durationLabel.text = nil;
} 
```

您可以在自定义中使用此代码`UITableViewCell`连续显示 4 个资产以模拟 Apple 的选取器 UI。

* * *

宏观例子...

```
#define TMLOG( __xx, ... ) NSLog( @"%s(%d): " __xx, __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__ )

#ifdef DEBUG
#define TMDLOG( __xx, ... ) TMLOG( __xx, ##__VA_ARGS__ )
#else
#define TMDLOG( __xx, ... ) ((void)0)
#endif

#ifdef DEBUG
#define TMDCONDLOG( __cond, __xx, ... ) { \
if ( ( __cond ) )  { \
TMDLOG( __xx, ##__VA_ARGS__ ); \
} \
} ((void)0)
#else
#define TMDCONDLOG( __cond, __xx, ... ) ((void)0)
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:12:34.443

将此添加到您的

```
openPicker: method.

mediaPickerController.mediaTypes =
    [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil]; 
```

**更新**

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo{

[picker dismissModalViewControllerAnimated:YES];

} 
```

# c# - NamedPipeBinding 不起作用

> ID：11503767
> 
> 赞同：0
> 
> 时间：2012-07-16T11:57:05.013
> 
> 标签：c#, wcf

我尝试在我的 WCF 服务中使用 namedPipeBinding，但出现以下错误。

不支持协议“net.pipe”。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：不支持协议“net.pipe”。

我的 web.config 文件

服务>

```
 <endpoint address="soap" binding="basicHttpBinding" contract="PipeTest.ICalculatorService" >

              <identity>
                  <dns value="localhost"/>
              </identity>
          </endpoint>
          <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />

          <endpoint address="net.pipe://localhost" binding="netNamedPipeBinding" contract="PipeTest.ICalculatorService"  />

      </service>
  </services> 
```

我还在 IIS 的绑定部分添加了“net.pipe”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:01:22.473

你输了添加windows激活服务非http协议

> 控制面板 -> 应用程序 -> Windows 组件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T23:09:07.833

您需要使用完整的 iis。不能使用 cassini（Visual Studio 开发服务器）或 IIS Express。他们不支持管道。

如果您使用的是完整的 IIS，您是否启用了 net.pipe 协议？右键单击您的站点，管理，高级设置，启用协议。应以逗号分隔，无空格小写。

比如，“http,net.pipe”

# winforms - 构建解决方案

> ID：11503773
> 
> 赞同：1
> 
> 时间：2012-07-16T11:57:28.563
> 
> 标签：winforms, unit-testing, c#-4.0

我试图根据这篇博客文章[Code Rant 中建议的布局来构建我的 winforms 项目。](http://mikehadlow.blogspot.co.uk/2007/07/how-to-structure-visual-studio.html)

最初，我设法拥有多个解决方案文件，不知道我是如何管理它的。无论如何，我听说应该只有一个。还被告知每个文件有一个类（我有时在一个类文件中有 2 或 3 个。）

我有问题的理解是这些应该是什么。在链接中，他有 3 个针对该解决方案的项目。

**[问题]**我应该这样做：解决方案（右键单击）->添加->新建项目->Winform应用程序，然后删除form1.cs和Program.cs？

我试过解决方案（右键单击）-> 添加-> 解决方案文件夹，但这并没有提供与他相同的布局。

**[问题]**我什么时候应该在他的例子中使用类库？最初，我将所有课程都存储在类库的文件夹中。

**[问题]**我的单元测试代码应该去哪里？

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:16:44.700

我认为他所有的项目都有`ClassLibrary`类型，因为没有引用`System.Windows.Form.dll`. 要创建相同的解决方案结构，只需将三个`ClassLibrary`项目添加到您的解决方案中。您的单元测试应该转到单独的项目（也是 type `ClassLibrary`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:32:58.043

请注意，如果您坚持使用 MSTest 单元测试框架，则必须使用特殊的项目类型。我不记得确切的名称，比如单元测试项目。NUnit、mbUnit 等其他框架适用于普通类库项目。

# c# - 从 Azure Blob 存储提供视频内容

> ID：11503776
> 
> 赞同：12
> 
> 时间：2012-07-16T11:57:46.380
> 
> 标签：c#, azure, html5-video, azure-blob-storage

我正在尝试从 Azure Blob 存储提供 MP4 视频内容。通过确保将 Blob 的内容类型设置为；我可以让视频在现代浏览器中播放`video/mp4`；但是我无法向后寻求。

将相同的视频放入 S3 存储桶会产生所需的结果，因此我排除了内容的问题。

我是否需要以特定方式配置存储角色来提供视频内容？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T20:43:12.953

从@smarx 的回答中我不清楚如何为我的 blob 容器设置它 - 但经过一番谷歌搜索后，我找到了下面的代码。只需在 LINQPad 中执行它，视频就会开始流式传输：

```
var storageAccount = CloudStorageAccount.Parse("AccountName=<accountName>;AccountKey=<accountKeyBase64>;DefaultEndpointsProtocol=http");
var blobClient = storageAccount.CreateCloudBlobClient();

// Get the current service properties
var serviceProperties = blobClient.GetServiceProperties();

// Set the default service version to 2011-08-18 (or a higher version like 2012-03-01)
serviceProperties.DefaultServiceVersion = "2011-08-18";

// Save the updated service properties
blobClient.SetServiceProperties(serviceProperties); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T20:13:29.293

You may try setting the default version for your storage account to 2011-08-18: [http://blogs.msdn.com/b/windowsazurestorage/archive/2011/09/15/windows-azure-blobs-improved-http-headers-for-resume-on-download-and-a-change-in-if-match-conditions.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/09/15/windows-azure-blobs-improved-http-headers-for-resume-on-download-and-a-change-in-if-match-conditions.aspx). It improves a couple things around range requests (probably what progressive download in your browser is doing). I haven't heard anything specific about video playback, but it can't hurt to try. :-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-26T18:48:51.640

对于从谷歌来到这里的任何人：

Azure 有两种类型的存储帐户：[StorageV1/V2（创建新帐户时选择的默认选项）和 BlobStorage](https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview#types-of-storage-accounts)。

虽然 StorageV2 选项可能具有更多功能，但它**不**支持`partial content requests`，这意味着 Chrome 将不允许视频搜索。

您可以通过导航到存储帐户 > 属性 > 帐户类型来识别 Azure 门户中的存储类型

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-10-13T00:02:41.360

对于想要使用 Azure CLI 的任何人：

```
az storage account blob-service-properties update --account-name [account_name] --default-service-version '2020-10-02' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T19:25:08.153

我尝试直接从启用了控件的 HTML5 视频元素播放一个非常小的 MP4 编码 blob，我可以使用控件来回滚动我的视频。

您的视频内容的大小是多少？您还可以使用 Fiddler 检查 HTTP 标头以验证它们是否是预期的，或者当您使用 S3 存储桶中的相同 blob 时它们是否完全匹配？

如果您可以共享您的 blob 链接，我可以快速尝试一下，看看可能是什么问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-21T13:22:46.533

您可以通过 Powershell 来完成。这是 Azures ARM 的示例（不是经典的，但您可以轻松转换它）。

```
Select-AzureRmSubscription -SubscriptionName "subscription" $Name = 'storageaccountname' $resourcegroup = 'resourcegroup'

$sp = New-Object -TypeName Microsoft.WindowsAzure.Storage.Shared.Protocol.ServiceProperties 

$sp.DefaultServiceVersion = "2017-04-17" $key = (Get-AzureRMStorageAccountKey -StorageAccountName $Name
-ResourceGroupName $resourcegroup).Value[1]

$context = New-AzureStorageContext -StorageAccountName $Name
-StorageAccountKey $key

$blobClient = $context.StorageAccount.Create 
```

# mysql - 加载 csv 的各个列

> ID：11503780
> 
> 赞同：0
> 
> 时间：2012-07-16T11:57:53.540
> 
> 标签：mysql, load-data-infile

我正在使用加载数据 infile，我必须做些什么才能将 CSV 文件中的某个元素仅导入到我们表中的某个列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:14:20.767

来自[mysql手册的加载数据页面](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

```
LOAD DATA INFILE 'file.txt'
  INTO TABLE t1
  (column1, @dummy, column2, @dummy, column3); 
```

# log4net - 达到 maximumFileSize 时的 log4net 滚动文件附加程序文件名格式

> ID：11503784
> 
> 赞同：11
> 
> 时间：2012-07-16T11:58:16.683
> 
> 标签：log4net, rollingfileappender

我们正在使用 log4net 滚动文件附加程序，并且对我们的日志文件有以下要求：

*   每天开始时的新日志文件，文件名中包含日期
*   最大日志文件大小为 500KB

我们遇到的问题是文件达到 500KB 时的文件命名策略：它们被重命名为`.1`后缀。这是有问题的，因为它会破坏 Windows 中的文件关联，因此打开文件（稍微）比较麻烦。

我们使用的配置是：

```
<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="c:\log\path" />
  <staticLogFileName value="false" />
  <appendToFile value="true" />
  <rollingStyle value="Composite" />
  <datePattern value=".yyyy-MM-dd.lo\g" />
  <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
  <maxSizeRollBackups value="50" />
  <maximumFileSize value="500KB" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level %message%newline" />
  </layout>
</appender> 
```

是否支持指定文件命中时使用的命名策略`maximumFileSize`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T05:34:22.577

Version 1.2.11 of log4net includes the [PreserveLogFileNameExtension](https://logging.apache.org/log4net/release/sdk/?topic=html/P_log4net_Appender_RollingFileAppender_PreserveLogFileNameExtension.htm) property on the `RollingFileAppender`. Setting the property to true will allow files to be rolled in the format logName.roll#.fileExt, keeping your file associations intact.

The entry inside the appender block would look like:
`<param name="PreserveLogFileNameExtension" value="true" />`

# javascript - 在javascript中声明数组的最简单方法是什么，有元素，1,2,3....n

> ID：11503785
> 
> 赞同：0
> 
> 时间：2012-07-16T11:58:19.383
> 
> 标签：javascript, arrays

我想声明一个具有整数元素 1 到 n 的数组，其中 n 可以是 100 或更大。因此，很明显我不想手动添加所有整数（1 到 100）。

有人可以建议我在 javascript 中执行此操作的最简单方法吗？我认为应该有这样的东西：[1..n]，但它不起作用。

编辑：

要求的更多说明：

我需要这个：`var arr = [1,2,3,4,5,6,7,8,9,10,11,....,100]`但我不想像这样声明我必须手动编写每个元素。我需要更好的选择来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T12:02:14.870

你可以这样做：

```
var i = new Array(10);
for ( var j = 0; j < i.length; j++) {
    i[j] = j + 1;
} 
```

只需创建一个数组并用 for 循环填充它们。您不必`var`在开始时声明。

[**检查这个例子。**](http://jsfiddle.net/heera/cUKhm/) `See the result in the console`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:03:53.670

你要求最简单的方法，所以它可能是许多方法中的一些

```
var arr=[1,2,3];
alert(arr[0]); // 1 
```

或者

```
var arr=[];
arr[0]=1;
alert(arr[0]); // 1 
```

请参阅[Taz 的](https://stackoverflow.com/questions/11503785/what-is-the-simplest-way-to-declare-an-array-in-javascript-having-elements-1/11503862#11503862)答案，他已经回答了您的需求，您可以使用它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-16T12:00:55.770

如果您使用 underscore.js，我建议使用这个有用的功能：[http ://underscorejs.org/#range](http://underscorejs.org/#range)

```
_.range(10);
=> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

如果您在应用程序中使用数组，您可以找到 underscore.js 的其他有用用法。

# iphone - UIButton : CATransition 不可预知的行为

> ID：11503788
> 
> 赞同：1
> 
> 时间：2012-07-16T11:58:31.310
> 
> 标签：iphone, ios, ios5, cocos2d-iphone

我正在使用 cocos2D 开发游戏，并且正在从作为 viewController 类的主视图转移到 gameScene。我在主屏幕中使用 UIButtons，并且`CATransition`在视图出现时使用动画来显示按钮。加载游戏场景时，我没有释放主页视图。主视图出现在游戏场景的后面。当游戏场景结束时，我隐藏游戏场景并显示家庭场景。

这是创建按钮的代码：

```
// Play Button
btnPlay = [[UIButton alloc]init];
btnPlay.frame = CGRectMake(65,95,124,50);
[btnPlay addTarget:self action:@selector(btnPlayAction) forControlEvents:UIControlEventTouchUpInside];
[btnPlay setBackgroundColor:[UIColor clearColor]];
[btnPlay setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[btnPlay setHidden:YES];
btnPlay.titleLabel.font = [UIFont fontWithName:@"NoteWorthy" size:25.0f];
[btnPlay setBackgroundImage:[UIImage imageNamed:@"play.png"] forState:UIControlStateNormal];
[self.view addSubview:btnPlay];
[btnPlay setShowsTouchWhenHighlighted:YES]; 
```

这`CATransition`是按钮的代码：

```
CATransition *animation3 = [CATransition animation];
[animation3 setDuration:3.0f];
[animation3 setType:kCATransitionReveal];
[animation3 setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
[[btnPlay layer] addAnimation:animation3 forKey:@"SwitchToView"];

[btnPlay setHidden:NO]; 
```

对于很少的重播，过渡进展顺利。但经过几次重播后，有时`kCATransitionReveal`会发生，有时会发生 kCATransitionFromLeft。但我没有`kCATransitionFromLeft`在我的代码中使用过。它是如何发生的？

谢谢您的帮助。

# informatica-powercenter - 带有 Netezza 数据库的 Informatica 8.6.0

> ID：11503790
> 
> 赞同：1
> 
> 时间：2012-07-16T11:58:33.683
> 
> 标签：informatica-powercenter

我们的目标是一个[Netezza](http://www-01.ibm.com/software/data/netezza/)数据库。我们的源是一个 .csv 文件。我们正在使用 Informatica 8.6.0。

在工作流管理器的关系连接浏览器中，我无法将 Netezza 作为数据库。

是否需要添加任何驱动程序？我如何让它显示出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:29:38.680

您需要在 Informatica 的 ODBC 目录中定义 Netezza 服务器属性，如下所示

```
[NZ_CONNECTION_NAME]
Driver                = /opt/informatica/nz/lib/libnzsqlodbc3.so
Description           = NetezzaSQL ODBC
Servername            = nz_host_name_or_ip_address
Port                  = 5480
Database              = group_generic_dims
Username              = nz_db_username
Password              = nz_db_password
CancelAsFreeStmt      = false
CommLog               = false
Ksqo                  = false
Lie                   = false
Optimizer             = false
Parse                 = false
PreFetch              = 256
Protocol              = 7.0
ReadOnly              = false
ShowSystemTables      = false
Socket                = 16384
DateFormat            = 1
TranslationDLL        = 
```

确保您指向正确的 libnzsqlodbc.so 文件（驱动程序）。

# android - 进度条完成百分比（下载）在 Android 中显示

> ID：11503791
> 
> 赞同：2
> 
> 时间：2012-07-16T11:58:39.553
> 
> 标签：android, service, android-asynctask, progress-bar

我的进度条显示下载完成百分比有问题。我有一个进行下载的服务类。我可以从这个类得到下载的开始时间和结束时间。在单击按钮的主要活动中，我必须显示进度％。我听说它可以通过 AsyncTask 实现，但我不知道它是如何工作的。请帮助我提供一些与此相关的示例代码示例。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:11:28.673

我更喜欢 AsyncTask 。

这是一个例子

```
ProgressDialog mProgressDialog;
// instantiate it within the onCreate method
mProgressDialog = new ProgressDialog(YourActivity.this);
mProgressDialog.setMessage("A message");
mProgressDialog.setIndeterminate(false);
mProgressDialog.setMax(100);
mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

// execute this when the downloader must be fired
DownloadFile downloadFile = new DownloadFile();
downloadFile.execute("the url to the file you want to download"); 
```

这是异步任务

```
private class DownloadFile extends AsyncTask<String, Integer, String> {
@Override
protected String doInBackground(String... sUrl) {
    try {
        URL url = new URL(sUrl[0]);
        URLConnection connection = url.openConnection();
        connection.connect();
        // this will be useful so that you can show a typical 0-100% progress bar
        int fileLength = connection.getContentLength();

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/sdcard/file_name.extension");

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            // publishing the progress....
            publishProgress((int) (total * 100 / fileLength));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
    }
    return null;
} 
```

这可以使用从服务下载以及下载管理器类来完成。[有关详细信息](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog.)，请参阅此问题 。

**编辑**

完成的百分比是您在进度对话框中实际发布的内容。如果你想显示百分比，你可以使用这个（total * 100 / fileLength）。

```
int percentage =  (total * 100 / fileLength);
TextView tv = (TextView)findViewById(R.id.textview);
tv.setText("" + percentage); 
```

使用此代码在所需的文本视图中显示百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:21:20.583

试试这样

这是一堂课

```
public class XYZ extends Activity {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private Button startBtn;
private ProgressDialog mProgressDialog;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    startBtn = (Button)findViewById(R.id.startBtn);
    startBtn.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            startDownload();
        }
    });
}

private void startDownload() {
    String url = "http://.jpg";
    new DownloadFileAsync().execute(url);
}
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_DOWNLOAD_PROGRESS:
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("Downloading file..");
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
        return mProgressDialog;
    default:
        return null;
    }
} 
```

类 DownloadFileAsync 扩展 AsyncTask {

```
@Override
protected void onPreExecute() {
    super.onPreExecute();
    showDialog(DIALOG_DOWNLOAD_PROGRESS);
}

@Override
protected String doInBackground(String... aurl) {
    int count;

try {

URL url = new URL(aurl[0]);
URLConnection conexion = url.openConnection();
conexion.connect();

int lenghtOfFile = conexion.getContentLength();
Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

InputStream input = new BufferedInputStream(url.openStream());
OutputStream output = new FileOutputStream("/sdcard/some_photo_from_gdansk_poland.jpg");

byte data[] = new byte[1024];

long total = 0;

    while ((count = input.read(data)) != -1) {
        total += count;
        publishProgress(""+(int)((total*100)/lenghtOfFile));
        output.write(data, 0, count);
    }

    output.flush();
    output.close();
    input.close();
} catch (Exception e) {}
return null;

}
protected void onProgressUpdate(String... progress) {
     Log.d("ANDRO_ASYNC",progress[0]);
     mProgressDialog.setProgress(Integer.parseInt(progress[0]));
}

@Override
protected void onPostExecute(String unused) {
    dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
} 
```

} }

这是一个xml文件

[http://pastie.org/4265745](http://pastie.org/4265745)

祝阿米尔汗一世好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-11T10:41:12.010

# 带有计数百分比的进度条

## //您可以在 Firebase Storage 上传任务后使用这些方法

```
 final ProgressDialog progressDialog = new ProgressDialog(this);
   progressDialog.setTitle("Uploading...");
   progressDialog.show();
   progressDialog.setCanceledOnTouchOutside(false);
   StorageReference reference = storageReference
                                  .child("images/" + UUID.randomUUID().toString());

  reference.putFile(filePath).addOnProgressListener(new 
                                OnProgressListener<UploadTask.TaskSnapshot>() {
                                @Override
                                public void onProgress(@NonNull UploadTask.TaskSnapshot 
                                      taskSnapshot) {
                                    double progress =                  
             (100.0*taskSnapshot.getBytesTransferred()/taskSnapshot.getTotalByteCount());
                                    progressDialog.setMessage("Uploaded "+ 
                                 (int)progress+"%");

                                }
                            }); 
```

# 结果

[![在此处输入图像描述](../Images/172d9bac542bc190f2e6d9352a73370d.png)](https://i.stack.imgur.com/276zW.png)

# entity-framework - 实体框架更新检查记录是否已更改

> ID：11503797
> 
> 赞同：8
> 
> 时间：2012-07-16T11:58:51.677
> 
> 标签：entity-framework

我正在使用 EF 更新数据库表。

它是连接模式下的一个简单场景。

我得到了我想更新的行

```
var order = from o in Orders
        where o.ID = 1
        select o; 
```

然后我将记录更新为：

```
order.FirstName = "First";
order.LastName = "Last";
context.SaveChanges(); 
```

它工作正常。EF 检查该字段是否已更改，并且仅在该字段为新值时才更新该字段。我已经在我的 SQL 服务器上启用了 CDC，以检查如果值没有更改，EF 是否不会重写数据库。

现在我想将此检查放入我的代码中以获得额外的逻辑，即我希望 EF 告诉我记录何时更新，何时没有更新（因为值没有改变）。谁能告诉我有没有办法？

我不想手动检查每个字段，因为我有很多字段要比较。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T09:56:47.440

如果有人感兴趣，这就是我所做的。我创建了以下方法来检查是否有任何字段在保存更改之前发生了更改。

```
private Dictionary<Type, bool> IsEntityModified()
{
    Dictionary<Type, bool> entity = new Dictionary<Type, bool>();
    var items = _bentities.ObjectStateManager.GetObjectStateEntries(EntityState.Modified);
    foreach (ObjectStateEntry entry in items)
    {
        foreach (string propName in entry.GetModifiedProperties())
        {
            string oldsetterValue, newsetterValue = null;
            // Get orginal value 
            oldsetterValue = entry.OriginalValues[propName].ToString();
            // Get new value 
            newsetterValue = entry.CurrentValues[propName].ToString();

            if (oldsetterValue != newsetterValue)
            {
                entity.Add(entry.Entity.GetType(), true);
            }
        }
    }
    return entity;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-01-27T21:49:59.557

当我在寻找类似的东西（如果不是相同的东西）时，我遇到了这个问题/答案。我最终使用了这种方法，这对我来说似乎没问题。

```
var order = from o in context.Orders
        where o.ID = 1
        select o;

order.FirstName = "First";
order.LastName = "Last";

if (context.Entry(order).State != EntityState.Unchanged)
{
    // order has changed ...
} 
```

因此，发布对我有用的东西，以防它可能对来这里寻找类似东西的其他人有所帮助。

# javascript - 使用 jquery 改写模式

> ID：11503798
> 
> 赞同：2
> 
> 时间：2012-07-16T11:58:54.433
> 
> 标签：javascript, jquery

我怎样才能让我的输入字段就像键盘处于改写模式一样？

当用户输入值但没有任何反应时，我尝试使用键码中的删除按钮触发按键事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:19:36.233

就像是：

```
<input onkeydown="this.oldSize = this.value.length;" 
  onkeypress="var n = this; setTimeout(function() {
      if(n.value.length > n.oldSize) {
        var s = n.selectionStart;
        n.value = n.value.substr(0, s) + n.value.substr(s + 1);
        n.selectionStart = n.selectionEnd = s;
      }
    },10);"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:11:33.357

好吧，我不知道你想做什么。也许这会对你有所帮助。

Keymaster 是一个简单的（100 LoC 左右）微型库，用于定义和调度键盘快捷键。它没有依赖关系。

[https://github.com/madrobby/keymaster#readme](https://github.com/madrobby/keymaster#readme)

# php - 适用于 PHP 的 Amazon AWS Server 持久存储

> ID：11503800
> 
> 赞同：2
> 
> 时间：2012-07-16T11:58:56.290
> 
> 标签：php, amazon-web-services, amazon-elastic-beanstalk

我使用 ElasticBeanstalk 在 Amazon AWS 上部署了一个新的 PHP 应用程序。我面临的问题是，每当 EC2 实例终止时，我在上传文件夹中的数据都会被删除。即使 EC2 实例被终止或创建了新实例，我还能做些什么来保留数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:08:26.780

您将需要创建一个 S3 存储桶并在其中存储任何持久文件 - 因为您发现 EC2 实例没有任何自己的持久存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:55:41.363

S3 是 Bulk 建议的存储持久文件的方法。此外，您可以使用 Azamon CloudFront (CDN) 来提供静态内容。我发现以下[示例](http://blog.ianbeyer.com/2012/01/19/php-direct-upload-s3/)可以使用 PHP 上传到 S3。这是另一个将文件上传到 S3的[PHP 类。](https://github.com/tpyo/amazon-s3-php-class)

# ruby - MongoMapper 奇怪的结果

> ID：11503804
> 
> 赞同：0
> 
> 时间：2012-07-16T11:59:20.293
> 
> 标签：ruby, mongodb, mongomapper

我刚开始使用 MongoMapper，即使我遵循了 mongomapper.com 上的“指南”，在查询数据库时仍然会得到意想不到的结果。结果如下：

```
#<User:0x000000028d5070>
#<User:0x000000028d45a8>
#<User:0x000000029ec148>
#<User:0x000000029eb928> 
```

我的代码：

```
require "mongo_mapper"
MongoMapper.connection = Mongo::Connection.new('localhost', 27017)
MongoMapper.database = "mydb"

class User
  include MongoMapper::Document

  key :name, String
  key :age,  Integer

  many :hobbies
end

class Hobby
  include MongoMapper::EmbeddedDocument

  key :name,    String
  key :started, Time
end

user = User.new(:name => 'Brandon')
user.hobbies.build(:name => 'Programming',
  :started => 10.years.ago)

user.save!

puts User.where(:name => 'Brandon').all 
```

我尝试在 .where 部分之后使用 .first 等各种东西，但我仍然得到相同的结果，或者 Plucky::Query 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:40:28.170

该行应该是：

```
puts User.where(:name => 'Brandon').first.name 
```

# php - 尝试使用 PHP cURL 会话运行查询并在 PHP 中添加循环

> ID：11503807
> 
> 赞同：0
> 
> 时间：2012-07-16T11:59:24.233
> 
> 标签：php, javascript, ajax

来自 JavaScript 文件的 AJAX 请求将两个值传递给 PHP 文件。

PHP 文件应使用 cURL 会话运行查询。我试图解决这个问题的方法是：

```
var queryData={"data":{"data_string":{"data":"oil","default_field":"Content"}}};
var testArgument=0;

$.ajax({
url:"/www/test/php/queryManipulate.php",
type: 'POST',
data: 'dataString',
datatype: 'json',
data: {field : queryData, start : testArgument},
success:function(jsonQuery)
{
    alert(jsonQuery);
}
}); 
```

现在，我要对 PHP 文件执行的操作是将 的值添加`from`到查询部分，使其看起来像：

```
{"from": value of testArgument, "data":{"data_string":{"data":"oil","default_field":"Content"}}} 
```

并且`testArgument`应该有 4 个值，0、10、20 和 30，每个值都应该运行请求。

我的 PHP 文件如下所示：

```
<?php
$ch = curl_init("http://localhost/testIndex");
$from=$_POST["start"];
$object=json_decode($_POST["field"]); 
$object->from=$_POST["start"]; 
curl_exec($ch);
curl_close($ch);
?> 
```

我不确定我是否以正确的方式使用 cURL。我收到错误“调用未定义的函数 curl_init()”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:03:41.080

“调用未定义函数 curl_init()”表示您的 php.ini 文件中没有 curl 扩展名。

检查[jquery 文档](http://api.jquery.com/jQuery.ajax/)，您将看到您提供的数据是使用 GET 发送的。尝试以下操作：

```
$object = json_decode($_GET["field"]); 
```

它也不起作用，因为您至少没有为 curl 设置请求目标。Curl 是一个用于查询远程服务器的库/实用程序......你究竟想用你的 curl 请求得到什么？

# c# - C#中的VB脚本

> ID：11503809
> 
> 赞同：0
> 
> 时间：2012-07-16T11:59:28.023
> 
> 标签：c#, vbscript

我想禁用或启用操作系统和 ADAM 中的用户。为此，我使用以下脚本在操作系统级别启用用户。我想在 C# 代码中运行这个脚本，我不想从 C# 代码调用这个 vb 脚本文件。有没有办法将此 vbscript 嵌入到 c# 代码中？

```
strComputer = "."

' Specify local user name.
strUser = "new"

' Bind to local user account on the computer.
Set objUser = GetObject("WinNT://" & strComputer & "/" & strUser & ",user")

' Enable the user.
objUser.AccountDisabled = True
objUser.SetInfo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:13:07.380

如果您使用的是 C# 4（或更高版本），您可以轻松地将调用转换为 C#

```
void EnableUser(string computer, string user)
{
    var objectName = "WinNT://" + computer + "/" + user + ",user";
    dynamic objUser = Activator.CreateInstance(Type.GetTypeFromProgID(objectName));
    // Enable the user.
    objUser.AccountDisabled = true;
    objUser.SetInfo();
} 
```

应该管用

# c++ - Qt 插件应该如何通过添加的 Qt 文件来修复？

> ID：11503810
> 
> 赞同：0
> 
> 时间：2012-07-16T11:59:27.937
> 
> 标签：c++, visual-studio-2010, qt, visual-studio-addins

我使用 MS Visual Studio 2010、Qt 4.7.3、Qt 插件 1.1.11。我从 Qt Designer 添加了 ui、cpp 和 h 文件。但插件不会为它们添加自定义构建步骤。较旧的 gui 表单在该项目中运行良好。我遇到了有关手动添加自定义构建步骤的答案 - UIC'ing 和 MOC'ing。但我想修复插件行为。将某些 Qt 小部件的 ui、h、cpp 文件添加到某些现有 Qt 项目的正确步骤是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:02:17.373

尝试使用 qtcreator。你会喜欢的。

# javascript - 如何拉伸背景图像以填充窗口并使其动画化？

> ID：11503818
> 
> 赞同：0
> 
> 时间：2012-07-16T12:00:00.303
> 
> 标签：javascript, jquery

对于我正在处理的项目，我需要拉伸背景图像以填充浏览器窗口*并*能够通过滑动使它们过渡，例如。假设您在主页上，我希望用户能够单击“关于”的导航链接，然后将背景图像滑入不同的图像。

通常我会使用[backstretch](http://srobbin.com/jquery-plugins/backstretch/)来拉伸图像以填充浏览器窗口，但我需要能够滑动到新图像。

我可以使用 backstretch 来填充窗口，*如果*我使用固定尺寸的 div，我可以让滑动工作..但是可以将两者结合起来吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:02:25.060

根据浏览器支持，您可以使用多个背景图像。

而且您始终可以为背景位置设置动画。

# ape - Ajax 推送引擎分块数据

> ID：11503821
> 
> 赞同：1
> 
> 时间：2012-07-16T12:00:09.280
> 
> 标签：ape

我使用 ajax 推送引擎（APE），我想将数据分块发布到服务器。是否可以在管道中发送分块数据。

# android - Android：如何通过单击一个按钮从右到左和左右移动选取框文本

> ID：11503830
> 
> 赞同：4
> 
> 时间：2012-07-16T12:00:41.533
> 
> 标签：android, marquee

如何通过单击一个按钮将选取框文本从右向左和向左和向右移动，我该如何做到这一点，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T10:37:31.893

尝试这个;

```
Animation animationToLeft = new TranslateAnimation(400, -400, 0, 0);
animationToLeft.setDuration(12000); 
animationToLeft.setRepeatMode(Animation.RESTART);
animationToLeft.setRepeatCount(Animation.INFINITE);

Animation animationToRight = new TranslateAnimation(-400,400, 0, 0);
animationToRight.setDuration(12000); 
animationToRight.setRepeatMode(Animation.RESTART);
animationToRight.setRepeatCount(Animation.INFINITE);

TextView textViewMarqToLeft = (TextView) findViewById(R.id.textViewMarqToLeft);
TextView textViewMarqToRight = (TextView) findViewById(R.id.textViewMarqToRight);

textViewMarqToLeft.setAnimation(animationToLeft);
textViewMarqToRight.setAnimation(animationToRight);
String textLeft = "Left marquue"
String textRight = "Right marquue"
textViewMarqToLeft.setText(textLeft);
textViewMarqToRight.setText(textRight); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-11T09:42:41.573

使用此代码它将 100% 工作。

```
 <LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:layout_toRightOf="@+id/btnbk"
  android:orientation="vertical" >

  <TextView
      android:id="@+id/scrollTxt"
      android:layout_width="210dp"
      android:layout_height="wrap_content"
      android:layout_marginLeft="15dp"
      android:layout_marginTop="8dp"
      android:ellipsize="marquee"
      android:focusable="true"
      android:focusableInTouchMode="true"
      android:freezesText="true"
      android:gravity="center"
      android:marqueeRepeatLimit="marquee_forever"
      android:paddingLeft="5dp"
      android:paddingRight="5dp"
      android:scrollHorizontally="true"
      android:singleLine="true"
      android:text="Broad way Solution... www.BroadWaySolution.com"
      android:textColor="#FFFFFF"
      android:textSize="15dp" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T12:05:52.893

Here the example

```
<RelativeLayout

xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TextView
    android:id="@+id/mywidget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:lines="1"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:textColor="#ff4500"
    android:text="Simple application that shows how to use marquee, with a long text" /> 
```

Call that into the Activity Button

```
tv = (TextView) this.findViewById(R.id.tv);  
tv.setSelected(true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:05:15.560

看一下这个：

```
<ScrollView
        android:id="@+id/sc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/mark"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/btn"
            android:layout_below="@+id/txt"
            android:ellipsize="marquee"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="Thanks Christian but I am trying to get my text to scroll downwards automatically I am able to scroll horizontally fine."
            android:textSize="50dp" />
    </ScrollView>

<Button
android:id="@+id/button"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
android:text="Scroll"/> 
```

在活动中写：

```
ScrollView scrollView=(ScrollView) findViewById(R.id.sc);
Button button=(Button) findViewById(R.id.button);
button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            scrollView.post(new Runnable() {

        public void run() {
            scrollView.smoothScrollTo(0, scrollView.getBottom());
        }
    });
        }
    }); 
```

# ruby-on-rails - Rails Geocoder 说“无法将字符串转换为整数”

> ID：11503831
> 
> 赞同：1
> 
> 时间：2012-07-16T12:00:44.123
> 
> 标签：ruby-on-rails, mongoid, rails-geocoder

我的索引控制器我有@usergeo = Geocoder.search("83.215.14.101")

结果是：

```
Geocoder::Result::Freegeoip:0x007ff3ced35eb8 @data={
"city"=>"Salzburg", 
"region_code"=>"05", 
"region_name"=>"Salzburg", 
"metrocode"=>"", 
"zipcode"=>"",
"longitude"=>"13.0333", 
"latitude"=>"47.8", 
"country_code"=>"AT", 
"ip"=>"83.215.14.101", 
"country_name"=>"Austria"},

 @cache_hit=nil>] 
```

.class 表示它是一个数组！

在视图中，我尝试了这个：

```
<%= @usergeo["city"] %> 
```

结果是

```
can't convert String into Integer 
```

@usergeo[:city] 也不起作用

任何评论都会对我很有帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:45:35.957

尝试`@usergeo.first.city`或`@usergeo[0].city`在这种情况下引用 @data 示例。

您收到该错误的原因是因为您基本上是在尝试对结果调用 Array["city"] ，但数组显然需要一个整数，而不是字符串。通过这种方式，您可以引用该对象，它是一个散列，并在其上调用 ["city"]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:21:25.537

它没有数组，而是`Geocoder::Result::Freegeoip`尝试`@usergeo.city``@usergeo["city"]`

此类的文档：

[http://rubydoc.info/github/alexreisner/geocoder/master/Geocoder/Result/Freegeoip](http://rubydoc.info/github/alexreisner/geocoder/master/Geocoder/Result/Freegeoip)

希望这对你有帮助，...

# php - 使用 PHP 选择 MySQL raw 时出错

> ID：11503833
> 
> 赞同：1
> 
> 时间：2012-07-16T12:00:49.537
> 
> 标签：php, mysql, sql, random

当我运行以下 MySQL 查询时

```
$result = mysql_query("SELECT * FROM credentials ORDER BY RAND() LIMIT 1");
$result =mysql_fetch_row($result);
$username=$result["username"];
$password=$result["password"];
$gateway=$result["gateway"]; 
```

我收到以下错误：

> 注意：未定义索引：第 78 行 C:\xampp\htdocs\switch\switch\index.php 中的用户名
> 
> 注意：未定义索引：第 79 行 C:\xampp\htdocs\switch\switch\index.php 中的密码
> 
> 注意：未定义索引：第 80 行 C:\xampp\htdocs\switch\switch\index.php 中的网关

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:06:01.163

```
$result = mysql_query("SELECT * FROM credentials ORDER BY RAND() LIMIT 1");
$result = $result->fetchRow();
$username=$result["username"];
$password=$result["password"];
$gateway=$result["gateway"]; 
```

You missed a ; after $result = $result->fetchRow()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:05:27.340

我不知道你的第 78 行是什么。但你应该看看你的分号。

```
$result = $result->fetchRow() 
```

这里缺少一个。首先，您应该自己查看并找到解决方案，然后再写到这里。

**编辑：**

$result 不是一个对象。利用

```
$result = mysql_fetch_row($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:41:31.393

如果查询出现错误，则`mysql_query`返回布尔值 .. 所以引入一个检查：

```
$result = mysql_query("SELECT * FROM credentials ORDER BY RAND() LIMIT 1");

if (!$result) {
    die('Invalid query: ' . mysql_error());
}

$result = mysql_fetch_array($result);
$username=$result["username"];
$password=$result["password"];
$gateway=$result["gateway"]; 
```

另请注意，`mysql_fetch_row`返回一个数字数组 .. 以返回一个关联数组使用[`mysql_fetch_array()`](http://www.php.net/manual/en/function.mysql-fetch-array.php)（默认情况下返回两者）或[`mysql_fetch_assoc()`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:37:48.780

尝试 mysql_fetch_assoc 而不是 mysql_fetch_row

Fetch_row 返回一个枚举数组，例如 $result[0] 而不是 result['password']

# php - php标签不工作/字符串不显示

> ID：11503837
> 
> 赞同：1
> 
> 时间：2012-07-16T12:01:02.760
> 
> 标签：php, html

我正在尝试用 PHP 编程，但 php 标签不起作用：我相信下面的代码没有错误：

```
<html>
    <head>
        <?php 
            $test = "Gumagana ako :P";
            echo "$test";
        ?>
        <title>My First PHP</title>
    </head>
    <body>
        My Test String is <?php echo $test; ">
    </body>
</html> 
```

你认为是什么问题？仅供参考，我正在使用 xampp。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:06:56.483

确保您的文件扩展名是 .php 并且它位于 Xampp 文件夹的 htdocs 文件夹中。还要确保 Apache 服务运行良好。

还要确保你正在浏览这个`http://localhost/yourfile.php`

```
<html>
    <head>
        <?php 
            $test = "Gumagana ako :P";
            echo "$test";
        ?>
        <title>My First PHP</title>
    </head>
    <body>
        My Test String is <?php echo $test; ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T12:03:28.693

您在关闭 php.ini 时打错了字。

```
My Test String is <?php echo $test; "> 
```

像这样关闭你的php：

```
My Test String is <?php echo $test; ?> 
```

否则 php 会尝试将以下内容解释为 php，这会给出错误：

```
"> </body> </html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:03:43.653

缺少 PHP 结束标记或问题已替换为双引号：

```
 My Test String is <?php echo $test; ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T12:04:37.960

`My Test String is <?php echo $test; ?>`//标签没有关闭

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T12:04:50.120

```
 <body>

       My Test String is <?php echo $test; ">

  </body> 
```

有误会

```
My Test String is <?php echo $test; ?> 
```

请检查一下

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T12:05:01.967

就这样写：-

```
My Test String is <?php echo $test;?> 
```

# ios5 - CoreData：过滤 FetchRequest 结果为零

> ID：11503838
> 
> 赞同：0
> 
> 时间：2012-07-16T12:01:03.967
> 
> 标签：ios5, core-data

我正在尝试过滤对 CD 的提取请求，最初它可以工作，但现在它返回一个空数组。我检查了实体（提供者）并且我尝试过滤的键名是正确的（提供者名称）。我已经检查了 SQLite 数据库，并且名称与我正在搜索的 providerName 匹配的记录在那里。（见下面的附图）。有人可以查看我的代码，看看我是否做错了什么？谢谢：

```
- (NSArray* ) filterItemsFromCoreData : (NSArray* ) filters { 

//create a managed object context
NSManagedObjectContext* context = [self managedObjectContext];

//create error container and fetch request
NSError* errMsg;
NSFetchRequest* fetchRequest = [[NSFetchRequest alloc] init];

//get our filters from passed array
NSString* filterProviderName = [filters objectAtIndex:0];
NSString* filterProviderZip = [filters objectAtIndex:1];
NSString* filterProviderPhone = [filters objectAtIndex:2];

//create predicate
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"providerName == %@", filterProviderName];

//create entity description
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Provider" inManagedObjectContext:context];

//add entity and predicate to fetch request
[fetchRequest setEntity:entity];
[fetchRequest setPredicate:predicate];

//get the objects
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&errMsg];
NSLog(@"%@", fetchedObjects);
return fetchedObjects;
} 
```

实体屏幕截图 ![实体屏幕帽](../Images/c1bd48964fba308c552c6b754087d246.png)

SQLite 数据库 ![SQLite 数据库](../Images/3e29450f9863dbf84905e729ceb61a4e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:55:39.513

将谓词格式中的格式说明符更改为`%@`用单引号括起来`'%@'`。

`NSPredicate *predicate = [NSPredicate predicateWithFormat:@"providerName == '%@'", filterProviderName];`

这应该再次返回结果。

# iphone - SudzC 在 Mac OSX 应用程序上生成代码

> ID：11503843
> 
> 赞同：1
> 
> 时间：2012-07-16T12:01:15.407
> 
> 标签：iphone, xcode, macos, sudzc

我是 xcode 和 SudzC 的新手。我正在尝试为 Mac OSX 做一个可以与 SOAP Web 服务对话的应用程序。

经过一番研究，我遇到了 SudzC。看起来很不错，但在网站上我找不到生成文件的直接 xcode（不是 iPhone）objective-c 选项。我可以“轻松”地将 iPhone 文件转换为在 Mac OSX 应用程序上工作吗？需要一些建议，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:14:00.647

是的，您可以在 Mac OSX 应用程序上使用 SudzC 代码。我在第一次尝试使用 iPhone 应用程序时遇到了很多警告，我认为在 Mac 应用程序上使用该代码并不容易......

谢谢 0x8badf00d，你是对的。代码经过一些小的修改后编译。

# java - Java中的非阻塞串行IO调用

> ID：11503845
> 
> 赞同：1
> 
> 时间：2012-07-16T12:01:18.990
> 
> 标签：java, android

> **可能重复：**
> [Android Android 的非阻塞 IO](https://stackoverflow.com/questions/4293448/non-blocking-io-for-android)
> [：无缓冲 IO](https://stackoverflow.com/questions/3693758/android-unbuffered-io)

谁能告诉我如何用 Java 编写一个非阻塞串行 IO 读/写？

需要发生的是内核 ioctl 调用以将设备文件置于非阻塞模式。问题是如何让 java 做到这一点。

# javascript - 在 Javascript 中从生成的 HTML 表中搜索特定行

> ID：11503850
> 
> 赞同：0
> 
> 时间：2012-07-16T12:01:31.470
> 
> 标签：javascript, asp.net, html

我有这个 JS 函数：

```
 $("#ctl00_ContentPlaceHolder1_Table3 td").click(function () {

            var varTemp;
            var tr = $(this).parent();
            var temp = "";
            for (var i = 0; i < tr.children().length; i++) {
                if (tr.children().get(i) == this) {
                    var leColumn = i;
                    break;
                }
            }
            var tbody = tr.parent();
            for (var j = 0; j < tbody.children().length; j++) {
                if (tbody.children().get(j) == tr.get(0)) {
                    var leRow = j;
                    break;
                }
            }
            if (leColumn == 13) {
                var temp = $(this).text()
                var hwID = temp.split(" ");
                var hwIDFinal = parseInt(hwID[1]);
                PageMethods.getDetailHardware(HardwareID, hwIDFinal, CallSuccessUpdateHardware, CallFailedUpdateHardware);
                __doPostBack('#tblEquipementDetail', '')
            }
        }); 
```

它允许我在生成的表格上获取单击单元格的坐标。

多亏了这一点，我可以在之后调用 PageMethod 。

在此功能结束之前，我想做的是在单击单元格的当前行中查找任何选中的复选框。

我尝试了一些东西，但到目前为止没有成功。事实上，我能做的最好的事情就是从整个表格中选择所有选中的复选框。

我只想从当前行中选择那些。

这是生成表的代码。

```
<table id="ctl00_ContentPlaceHolder1_Table3" width="100%" style="font-family: 'Microsoft Sans Serif'; color: #000000">
            <tr>
                <td bgcolor="#000066" width="100%" style="color:white;">ID - Hardware</td>
                <td bgcolor="#000066" width="100%" style="color:white;">Label</td>
                <td bgcolor="#000066" width="100%" style="color:white;">Status</td>
                <td bgcolor="#000066" width="100%" style="color:white;">Comment</td>
                <td bgcolor="#000066" width="100%" style="color:white;">Loan Start Date</td>
                <td bgcolor="#000066" width="100%" style="color:white;">Loan End Date</td>
                <td bgcolor="#000066" width="100%" style="color:white;">Assigned by</td>
                <td bgcolor="#000066" width="100%" style="color:white;">Assignment Date</td>
                <td bgcolor="#000066" width="100%" style="color:white;">Revocation Date</td>
                <td bgcolor="#000066" width="100%" style="color:white;">Package</td>
                <td bgcolor="#000066" width="100%" style="color:white;">USBPhone</td>
                <td bgcolor="#000066" width="100%" style="color:white;">USBKeypad</td>
                <td bgcolor="#000066" width="100%" style="color:white;">ScreenPrivacy</td>
            </tr>
            <tr>
                <td>4477</td>
                <td>HH1234</td>
                <td>Affected</td>
                <td></td>
                <td></td>
                <td></td>
                <td>XXXXXXX</td>
                <td>19/08/2008</td>
                <td> / </td>
                <td><input name="ctl00$ContentPlaceHolder1$ctl184" type="checkbox" /></td>
                <td><input name="ctl00$ContentPlaceHolder1$ctl186" type="checkbox" /></td>
                <td><input name="ctl00$ContentPlaceHolder1$ctl188" type="checkbox" /></td>
                <td><input name="ctl00$ContentPlaceHolder1$ctl190" type="checkbox" /></td>
                <td><a onclick="DetailHardware(1234);return false;" href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$ctl192','')" style="font-size:9pt;">Detail 5014</a></td>
            </tr>
            <tr>
                <td>3209</td>
                <td>XS548</td>
                <td>Ready</td> 
```

ETC...

欢迎任何提示，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:04:13.387

您已经抓住了`tr`clicked 的父级`td`，所以只需在此搜索：

```
var row_checkboxes = tr.find('input[type=checkbox]'); 
```

此外，就效率而言，与其绑定多个事件，每个事件一个`td`，不如将事件委托给表。效果将是相同的。

```
 $("#ctl00_ContentPlaceHolder1_Table3").on('click', 'td', function () {... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:05:56.540

由于您已找到表的根，因此您可以搜索表中的所有复选框。就个人而言，如果您使用复选框，它们将具有意义并且同时是动态的。考虑到这一点，某些复选框集应该有一个特定的名称。

```
var root = "some string";
var chkBoxes = $(root).find("input:checkbox")
... do whatever you want with chkBoxes being your reference. 
```

# actionscript-3 - 具有拖放功能的 Flash 磁贴列表

> ID：11503853
> 
> 赞同：0
> 
> 时间：2012-07-16T12:01:52.453
> 
> 标签：actionscript-3, flash, flex4, flash-cs5, tilelist

我可以使用 DragManager 类在 FLEX 中轻松完成拖放功能，但可以在 Flash CS-5 中执行相同操作。在图像出现在 tileList 之前，我还想在 tileList 的每个图块中显示预加载器。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:01:08.993

是的，在 google 代码上查看[这个](http://code.google.com/p/as3-drag-and-drop-tilelist/)，它从 Flash UI 组件扩展了 TileList。

关于预加载器，TileList 应该已经使用了包含[UILoader的](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/containers/UILoader.html)[ImageCell](http://www.adobe.com/livedocs/flash/9.0/ActionScriptLangRefV3/fl/controls/listClasses/ImageCell.html)（因此您可以访问 bytesLoaded/bytesTotal），并且它还继承自[LabelButton](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/LabelButton.html#propertySummary) UIComponent（因此您有一个可用的标签属性/文本字段）。由您决定如何实现预加载器（遵循组件如何更改标签文本以在加载磁贴时使用它来显示基于百分比（%）的文本，或使用自定义预加载器剪辑）。

您可能会发现这些较旧的答案很有帮助：

*   [更改数据提供程序时如何处理来自 Flash tilelist 的 Unhandled #2044 错误？](https://stackoverflow.com/questions/3214414/how-to-handle-unhandled-2044-errors-from-flash-tilelist-when-changing-dataprovi/3216348#3216348)（为了安全起见）
*   [如何为 Flash 中的图块列表创建自定义单元格渲染器](https://stackoverflow.com/questions/3127329/how-to-create-a-custom-cell-renderer-for-a-tile-list-in-flash)- 尤其是这篇文章和其中[链接的 imageCaching 文章](http://www.darklump.co.uk/blog/?p=3)。

# ruby-on-rails - Spork 导致 ActiveRecord 使用嵌套事务

> ID：11503860
> 
> 赞同：0
> 
> 时间：2012-07-16T12:02:10.670
> 
> 标签：ruby-on-rails, testing, activerecord, spork, minitest

我正在使用 Minitest 和 Spork 测试我的 Rails 应用程序。没有 spork 一切正常，每个测试都使用保存点在数据库中回滚。当我激活 spork 时，这种行为会发生变化，它开始使用嵌套事务（sqlite 不支持），一切都崩溃了。为什么 spork 会这样做，我该如何阻止它？

**更新：**使用 spork 时，有两层嵌套事务。一个来自 activerecord（在我的应用程序中），另一个是由 minitest / spork / 围绕整个测试用例添加的。当我在没有 spork 的情况下运行它时，只添加外部事务，内部事务使用保存点完成。

# html - 如何使用具有多条件的 xpath 选择 HTML 链接元素

> ID：11503861
> 
> 赞同：1
> 
> 时间：2012-07-16T12:02:12.670
> 
> 标签：html, xpath

在一个页面 HTML 中，有几个 HTML 链接，其名称包含一些子节点。

我只想检索其中一个；以下：

```
<a href='foo'>
   <b>Bar</b>
   <div style="height: 18px;">Garbo</div>
</a> 
```

为了定位它，我想用 xpath 精确：“**给我带来包含“Bar”和“Garbo”的链接，不管它们是否在单独的子节点中**“。

我试试这个，但是在阅读了一些关于`contains`函数的文章之后，这条线永远行不通：

```
//a[contains(text(),"Bar") and contains(text(),"Garbo")] 
```

我可以做些什么来满足我的要求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:13:01.733

您需要使用的选择器是

```
//a[./*[contains(text(),"Bar")] and ./*[contains(text(),"Garbo")]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:30:35.040

**使用**：

```
//a[descendant::text()[contains(., 'Bar')] 
  and 
    descendant::text()[contains(., 'Garbo')]
    ] 
```

`a`这将选择具有包含字符串“Bar”的后代（不仅是子）文本节点和包含字符串“Garbo”的后代文本节点的任何元素。

**这会选择想要的`a`元素，即使它是以下元素**：

```
<a href='foo'>
   <b><i>Bar</i></b>
   <div style="height: 18px;"><span>Garbo</span></div>
</a> 
```

# mongodb - MongoDB增加部分对象

> ID：11503864
> 
> 赞同：1
> 
> 时间：2012-07-16T12:02:17.400
> 
> 标签：mongodb, mongodb-query

我在更新记录时遇到问题。我的文档结构是这样的：

```
"_id" : "1141825507009",
    "person" : [
        {
            "amount" : 25,
            "id" : "1141825507009"
        }
] 
```

我想将 person.amount 增加 3，其中 person.id 是 1141825507009。这很容易。关于什么：

```
Increment person.amount  by 3 if person.id exist.
Add to person list with amount 3 and id 239something845 if person.id does not exist in list. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:17:14.853

我认为您想要的是[https://jira.mongodb.org/browse/SERVER-340](https://jira.mongodb.org/browse/SERVER-340)。您可能想观看/投票。

如果您不需要以原子方式执行此操作，则可以执行以下操作：

```
db.foo.update({"person.id" : {$exists : false}, /* other criteria */}, 
    {$inc : {"person.amount":3}});
var result = db.runCommand({getLastError:1})
if (result.n == 0) { // nothing updated, person.id must exist
    db.foo.update({/* criteria */}, 
        {$addToSet : {person : {amount:3, id:"239something845"}}});
} 
```

# javascript - Rails：在 Rails 视图中使用 javascript 函数的正确语法

> ID：11503867
> 
> 赞同：0
> 
> 时间：2012-07-16T12:02:29.353
> 
> 标签：javascript, ruby-on-rails, syntax, views

我正在尝试在表单中使用一些 javascript 从选择下拉框中获取值，并在表单的另一部分使用它。我无法弄清楚语法。

首先是 javascript 函数（我将其放在视图的末尾）：

```
<script type="text/javascript">
  function return_event_id()
  {
    var event_id = document.getElementById("event_id");
    return event_id.value;
  }
</script> 
```

在视图内部，我有以下内容：

```
<%= select("discount_code", :event_id, events_ids_titles_hash, { :include_blank => true }) %> 
```

如果我添加以下语句：

```
return_event_id 
```

然后我选择的下拉项显示在表单上（尽管我也看到了 return_event_id 这个词）。

如果我做这样的事情：

```
<% selected_event_id =  return_event_id %> 
```

我收到以下错误消息：未定义的局部变量或方法 `return_event_id'

我正在寻找的是能够将 event_id 值存储在变量中。什么是正确的语法？

# 有关答案的其他详细信息和评论：

1：是的，Ruby 代码 = 服务器，javascript 代码 = 客户端

2：将代码放在 application.js 之类的东西中会将其移出 view.erb 模块，但据我所知，它不会改变结果。

我知道 <% selected_event_id = return_event_id %> 将不起作用，但我确实需要达到一个点，我可以以某种方式将 return_event_id 的输出传递回服务器，然后将其捕获到 Ruby 变量中，或者，如果有是一种使用 javascript 函数输出来设置表单中另一个元素的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:19:44.793

对于初学者，最好将您的 javascript 与您的视图分开：

将你的js写在一个单独的文件中，根据你的rails版本将它放在公共或你的资产目录中。然后如果你在raila 3.1+中，它将自动加载你的资产，如果低于3.1将以下内容添加到你的视图中（在顶部 ）

```
<%= javascript_include_tag "my_javascript_filename" %> 
```

从那里您可以创建一个 ajax 请求返回到您的 rails 应用程序（这意味着编写控制器代码和处理此问题的路由）以获取您想要的项目列表：

[http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)
我建议使用上述 URL 中的 getJSON 方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:02:42.300

要让您的 JavaScript 函数被调用，您有两种选择：

1）直截了当：

让 select_tag 生成一个 html 属性“onchange”

```
select("discount_code", :event_id, events_ids_titles_hash, { 
    :include_blank => true, 
    :onchange => "fill_my_event_data();"
    } 
```

然后编写一个使用您的 return_event_id() 的 JavaScript 函数“fill_my_event_data”，然后将您需要的数据放入您想要的表单元素中。

2) 在 jQuery 中使用“不显眼的 JavaScript”。然后你不需要在 Rails 中做太多事情（除了提供正确的 id 和数据属性）。您在底部的 JavaScript 部分中执行所有操作。您将选择标记与再次调用您的函数的事件处理程序连接起来。当然，您需要学习 jQuery 的基础知识。如果你需要经常做这样的事情，jQuery 知识很有用。

# php - 按值分组php数组

> ID：11503868
> 
> 赞同：0
> 
> 时间：2012-07-16T12:02:31.957
> 
> 标签：php, arrays

我从数据库中提取了一个数组，该数组按`([0]=>'',[1]=>''...etc)`每个元素中的数字排序，有各种关联值（标题、日期、区域...等）。我需要对数组进行重新排序，以便所有具有相同“面积”变量的元素一起出现。所以有效地我们仍然有一个`([0]=>'',[1]=>''...etc)`数组，但前 5 个左右将具有相同的“面积”，然后下一个但许多将具有相同的“面积”，依此类推。

为方便起见，“区域”字段有 4 个可能的值（北、西、中、布莱斯谷）。

我不想要的是一个由 4 个区域分组的多维数组，我需要它作为一个长数组，只是按照将所有“喜欢”区域放在一起的顺序。

不确定我是否已经尽可能地解释了这一点，但任何帮助表示赞赏。如果您需要我清除任何内容，请回复，我会适当添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:40:06.920

如果您无法在 SQL 中按字段排序，只需使用带有 usort 的自定义排序函数对数组进行排序。无论如何都不应该对性能造成太大影响，具体取决于数组中的条目数。

```
usort($posts, function ($a, $b) { return strcmp($a['area'], $b['area']); }); 
```

如果您需要预先确定的排序顺序，请添加不同区域及其优先级的列表：

```
$sortOrder = array(
    'north' => 100,
    'west' => 200,
    'central' => 300,
    'blyth valley' => 400,
);

usort($posts, function ($a, $b) use ($sortOrder) {
    if (isset($sortOrder[$a['area']], $sortOrder[$b['area']]))
    {
        return $b['area'] - $a['area'];
    }

    if (isset($sortOrder[$a['area']]))
    {
        return -1;
    }

    if (isset($sortOrder[$b['area']]))
    {
        return 1;
    }

    return 0;
}); 
```

如果您为“区域”字段的所有可能值定义了优先级，则可以删除测试，尽管我建议您保留它，因为您将来可能会更改可能的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:41:17.217

这是一个解决方案...

```
$arr = array(
    '0' => array( 'area' => 'west' ),
    '2' => array( 'area' => 'north' ),
    '3' => array( 'area' => 'west' ),
    '4' => array( 'area' => 'central' ),
    '5' => array( 'area' => 'west' ),
    '6' => array( 'area' => 'north' )
);

$new = array();

// Get a list of possible areas
$areas = array();
foreach ($arr as $key => $value) {
    if ( ! in_array( $value['area'] , $areas ) ) {
        array_push( $areas, $value['area'] );
    }
}

// For each area...
foreach ($areas as $key => $area) {
    // Find a area that matches...
    foreach ($arr as $key => $value) {
        if ( $value['area'] == $area ) {
            array_push( $new, $value );
        }
    }
} 
```

如果只有一定数量的区域，您可能还需要删除第一个循环。只需按照您想要的顺序用可能的区域列表填充区域数组。

# c# - 一次写入，多次读取锁

> ID：11503874
> 
> 赞同：0
> 
> 时间：2012-07-16T12:02:40.930
> 
> 标签：c#, locking

我知道这个话题已经被猛烈抨击了，因为我已经阅读了关于 SO 以及其他地方的数以百万计的帖子，但是我还没有找到一个明确的答案，所以如果你对这种看似冗余的内容感到冒犯，我深表歉意。

我有一种情况，即一次写入，读取数百万的资源。创建资源非常昂贵，并且写锁的争用也可能非常高。此外，我无法预测它将在哪个处理器上运行，因此我不知道下面的内存模型是什么。我正在编译 .NET 3.5、.NET 4.0 和 Mono 2.10 中内置的 3 个版本的程序集。

由于资源的高度争用，我需要使其尽可能高效，并且希望使用无锁模式，至少对于读取而言。我了解创建资源的双重锁定检查模式，但由于 _resource 在内存屏障之外的访问，它是否工作（在所有处理器上）一直存在分歧。我需要在 _resource 字段上使用 volatile 吗？ReaderWriterLockSlim 是否更适合这种情况？我还应该问什么其他问题？

```
if(_resource == null)
{
    lock(_locker)
    {
        if(_resource == null)
        {
            //create resource here...
        }      
    }
} 
```

此外，还会有一些：

```
if(_resource == null)
{
    return _resourceDefault;
}

return _resource.GetSomething(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:12:37.887

决定将我的评论推广到答案。

在创建单例阅读时， http: [//msdn.microsoft.com/en-us/library/ff650316.aspx](http://msdn.microsoft.com/en-us/library/ff650316.aspx)。它交叉链接了一篇深入解释与双重检查锁定相关的一些问题的论文。为了完全安全，微软的文章确实推荐了 volatile。

如果您真正想要的只是创建一个单例，那么读写器锁并不会真正为您买任何东西（一次性......没有锁升级或任何必要的东西。您真的只需要保护资源的创建）。创建资源后，您将根本不会触摸锁。

我会设计访问你的单身人士总是通过一个静态属性/方法，所以你总是可以做双重检查。

关于资源默认值，我认为我对您的情况了解不足，无法正确回答。您是否期望主要资源永远为空（创建之前除外）？根据您的用例，您可能可以使用非阻塞的 Moniter.TryEnter 并返回一个值，让您知道您是否收到了锁。如果你不能立即获得锁来创建单例，你可以返回你的默认值。

# qt - Qt：无法读取框架的符号

> ID：11503876
> 
> 赞同：1
> 
> 时间：2012-07-16T12:02:44.493
> 
> 标签：qt, linker

从 Qt Creator 开始调试时，我在应用程序输出窗格中遇到此错误消息。短暂的停顿后，应用程序无法启动

```
Unable to read symbols for QtXml.framework/Versions/4/QtXml (file not found).
Unable to read symbols from "QtXml" (not yet mapped into memory). 
```

在我的 .pro 中，我有

```
QT += xml 
```

Qt Creator > Projects > Build Environment 已`PATH`设置为

```
/usr/bin:/Users/me/QtSDK/Desktop/Qt/474/gcc/bin:/usr/bin:/bin:/usr/sbin:/sbin 
```

并`/Users/me/QtSDK/Desktop/Qt/474/gcc/lib/QtXml.framework/Versions/4`具有动态库。我哪里错了？

我在 OS X Lion 上使用 Qt Creator、SDK 4.7.4

# reporting-services - SSRS 过滤 TOP N 与其他人

> ID：11503878
> 
> 赞同：1
> 
> 时间：2012-07-16T12:02:46.213
> 
> 标签：reporting-services, ssrs-2008, ssrs-grouping

我有一个包含人行和几个组/子组的数据集。子组可以有很多记录，我只需要先显示 5 个，其他的必须在“其他”行。
我设法像这样过滤组：

```
Expression: Product
Operator: Top N
Value: 5 
```

但现在其他行不可见。也许有人有同样的问题，或者只是知道如何解决它？我的矩阵如下所示：

```
+--------------------+-------------------------+
|                    | Date                    |
+                    +----------+--------------+
|                    | Quantity | All Quantity |
+----------+---------+----------+--------------+
| Employee | Total   |          |              |
+          +---------+----------+--------------+
|          | Product |          |              |
+----------+---------+----------+--------------+ 
```

员工是一个组，产品是子组。日期是列组。

编辑：

我想创建第二个相同的组并使用如下过滤器对其进行过滤：

```
Expression: Product
Operator: Bottom N
Value: =Count(Fields!Product.Value) - 5 
```

但它不能正常工作。它总是显示一种产品，并且该产品来自前 5 名的列表。

# android - Horizo ntalScrollView 在模拟器上不起作用

> ID：11503882
> 
> 赞同：0
> 
> 时间：2012-07-16T12:02:56.150
> 
> 标签：android, horizontalscrollview

我对 android 开发相当陌生，我完全被一个可能非常简单的过程难住了。

我已经设置了一个水平滚动视图，其中包含一系列`ImageViews`（作为按钮）在`linearlayout`. 但是，当我在模拟器上运行项目时，只有第一个`imageview`是可见的，我无法水平滚动其他图像视图

我已经在网上广泛搜索以找到解决方案，但没有运气。

```
 <LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
>

   <HorizontalScrollView 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    >

        <ImageView
            android:id="@+id/cookanegg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:src="@drawable/cookanegg"
            android:text="@string/button_1"
            android:textSize="25dp"
            android:textStyle="bold" />

  <ImageView
      android:id="@+id/cheffytips"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_gravity="center"
      android:text="@string/button_2"
      android:textSize="25dp"
      android:textStyle="@drawable/chefstips" />

  <ImageView
      android:id="@+id/settings"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_gravity="center"
      android:text="@string/button_3"
      android:textSize="25dp"
      android:textStyle="@drawable/settings" /> 
    </LinearLayout>
    </HorizontalScrollView> 
```

我到底错过了什么？

任何帮助将不胜感激！

非常感谢，

哈里森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:08:31.827

这在您的水平滚动视图中对我有用 给定宽度：match_parent & hieght wrap_content

和内部滚动视图使用这个

```
 <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/imv_new"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/newfile" />

        <ImageView
            android:id="@+id/imv_open"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/open" />

        <ImageView
            android:id="@+id/imv_save"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/save" />

        <ImageView
            android:id="@+id/imv_saveas"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/save_as" />

        <ImageView
            android:id="@+id/imv_delete"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/delete" />

        <ImageView
            android:id="@+id/imv_undo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/undo" />

        <ImageView
            android:id="@+id/imv_redo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/redo" />

        <ImageView
            android:id="@+id/imv_bold"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/bold" />

        <ImageView
            android:id="@+id/imv_italic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/italic" />

        <ImageView
            android:id="@+id/imv_underline"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/underline" />

        <ImageView
            android:id="@+id/imv_l_margin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/left" />

        <ImageView
            android:id="@+id/imv_m_margin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/center" />

        <ImageView
            android:id="@+id/imv_r_margin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/right" />

        <ImageView
            android:id="@+id/imv_exit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_weight="11.90"
            android:onClick="onClick"
            android:src="@drawable/close" />
    </LinearLayout> 
```

在 Horizo​​ntall ScrollView 我拍了一些图片

祝你好运 Aamirkhan I。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:12:01.467

做一些这样的改变：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <HorizontalScrollView
        android:id="@+id/ho"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/cookanegg"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher"
                android:gravity="center"
                android:text="button_1"
                android:textSize="25dp"
                android:textStyle="bold" />

            <ImageView
                android:id="@+id/cheffytips"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/ic_launcher"
                android:text="button_2"
                android:textSize="25dp" />

            <ImageView
                android:id="@+id/settings"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/ic_launcher"
                android:text="button_3"
                android:textSize="25dp" />

            <ImageView
                android:id="@+id/settings"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/ic_launcher"
                android:text="button_3"
                android:textSize="25dp" />

            <ImageView
                android:id="@+id/settings"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/ic_launcher"
                android:text="button_3"
                android:textSize="25dp" />

            <ImageView
                android:id="@+id/settings"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/ic_launcher"
                android:text="button_3"
                android:textSize="25dp" />

            <ImageView
                android:id="@+id/settings"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/ic_launcher"
                android:text="button_3"
                android:textSize="25dp" />
        </LinearLayout>
    </HorizontalScrollView>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:42:09.120

我认为您需要将**LinearLayout 方向**更改为**vertical**。

# c# - 如何添加一个简单的命名空间？

> ID：11503884
> 
> 赞同：1
> 
> 时间：2012-07-16T12:02:58.943
> 
> 标签：c#, xml, xml-namespaces, linq-to-xml

如何在我的 xml 中创建这一行？（问题是命名空间）

我来的结局是这样的：

```
XDocument doc = new XDocument();
XElement root = new XElement("root", 
    new XAttribute("name", Name),
    new XAttribute(XNamespace.Xmlns, Namespace)//<-- XNamespace.Xmlns is not good
); 
```

我也尝试过 new XAttribute("xmlns", Namespace) ，但我就是不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:08:44.400

我找到了这个。它工作得很好。

```
XDocument doc = new XDocument();
XElement root = new XElement("root", 
    new XAttribute("name", Name)
    );
doc.Add(root);
XNamespace xmlns = Namespace;
doc.Root.Name = xmlns + root.Name.LocalName; 
```

# java - 引用 JAR 中的文件

> ID：11503885
> 
> 赞同：0
> 
> 时间：2012-07-16T12:03:07.633
> 
> 标签：java, eclipse, file, jar, structure

我正在为一些串行端口通信创建一个 Java 应用程序，并且在应用程序的文件夹中，我有两个资源需要在运行时存在。第一个是用作启动屏幕的图像，另一个是需要在程序启动时读取的配置文件。

这是 Linux 中“tree”命令输出的精简版本，我需要引用的两个文件是“commandSet.config”和“splash-screen2.png”

```
.
├── bin
│   ├──...
├── commandSet.config
├── app-manifest.txt
├── splash-screen2.png
└── src
    ├── events
    │   └── InterfaceEvents.java
    ├── models
    │   ├── Command.java
    │   └── Phone.java
    ├── operations
    │   ├── Application.java
    │   ├── ...
    └── views
        ├── CallDialog.java
        ├── SplashScreen.java
        └── Window.java 
```

我目前在以下几行中引用：

```
BufferedReader in = new BufferedReader(new FileReader("commandSet.config")); 
```

和

```
JLabel image = new JLabel(new ImageIcon("splash-screen2.png")); 
```

当我从 Eclipse 运行它时，这可以正常工作，但是一旦我导出到可运行的 JAR，文件就不会移动，因此不会被正确引用。我尝试将它们移动到“src”文件夹中，这导致它们被存档在 JAR 中，但我仍然无法引用它们。

我对导出 Java 项目的概念还很陌生，所以也许我错过了一些明显的东西。如果有人可以向我展示执行此操作的最佳方法以及未来项目文件系统的最佳方法，我将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:09:57.667

```
 InputStream in = this.getClass().getClassLoader().getResourceAsStream("splash-screen2.png");  
byte[] buffer = new byte[in.available()];
in.read(buffer);  
ImageIcon icon = new ImageIcon(buffer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:04:57.647

您无法像在文件系统中那样访问该文件。

从您的上下文中使用`getResourceAsStream()`类加载器从 CLASSPATH 中读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:49:05.337

好的，我设法解决了这个问题，并认为我将来会为其他人提供答案。我基本上遵循“duffymo”的指导方针，这就是我所做的：

*   用我的资源创建了一个 JAR。
*   将该 JAR 放在项目的**根目录**中。
*   使用 Eclipse 将该 JAR 添加到构建路径。
*   使用 getResourceAsStream(" */nameOfFile.ext* ") 获取我的资源的流。

干杯!

# python - zc.buildout 版本

> ID：11503886
> 
> 赞同：4
> 
> 时间：2012-07-16T12:03:08.210
> 
> 标签：python, buildout

我对 python egg 版本有疑问。在我的开发机器上我有**2.3.13**`python-ldap`版本，而他们机器上的大学有**2.3.10**版本。两个库都安装在操作系统级别。****`python-ldap`****

 ****是否可以告诉*buildout*不要寻找最新`python-ldap`版本？

我正在寻找这样的东西：

```
# using buildout-versions extension
[versions]
python-ldap = any
or
python-ldap => 2.1 
```

我不想使用`buildout -N`，因为我想获得其他 egg 最新版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:39:41.790

Buildout 只允许您通过使用一个`versions`部分来固定（精确）版本：

```
[buildout]
versions = myversions

[versions]
python-ldap = 2.3.13 
```

其中部分中的`versions`键`[buildout]`命名用于引脚的部分（大多数也只是调用该部分`[versions]`）。

如果您需要将其固定到不同机器的版本，则必须使用基于外部参数生成版本的配方。

在以下示例中，我使用[`mr.scripty`配方](https://pypi.python.org/pypi/mr.scripty)运行一些 python 来为我获取版本引脚：

```
[buildout]
versions = versions

[versions]
python-ldap = ${dynamic:python-ldap}

[dynamic]
recipe = mr.scripty
python-ldap =
    ... import subprocess
    ... return subprocess.check_output(
    ...    'dpkg-query', '-W', '-f', '${Version}', 'python-ldap').rsplit('-')[0] 
```

上面的示例使用该`dpkg-query`实用程序来确定 Debian 或 Ubuntu 上的 python-ldap 包的版本；根据您自己平台的需要进行调整。****

# c# - 以委托为值的字典

> ID：11503887
> 
> 赞同：10
> 
> 时间：2012-07-16T12:03:11.533
> 
> 标签：c#, .net

我有以下课程

```
public class CVisitor : IVisitor
    {
        public int Visit(Heartbeat element)
        {
            Trace.WriteLine("Heartbeat"); 
            return 1;
        }
        public int Visit(Information element)
        {
            Trace.WriteLine("Information"); 
             return 1;
        }

    } 
```

我想要一个带有映射的字典，每个参数类型都将映射到它的实现函数：心跳将被映射到`public int Visit(Heartbeat element)`

我想做类似以下的事情：

```
 _messageMapper = new Dictionary<Type, "what should be here ?" >();
    _messageMapper.Add(typeof(Heartbeat), "and how I put it here?" ); 
```

我应该用什么代替“这里应该有什么？” 和“我是怎么把它放在这里的？”

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T12:09:19.723

```
new Dictionary<Type, Func<object, int>>();

var cVisitor = new CVisitor();
_messageMapper.Add(typeof(Heartbeat), 
   new Func<object, int>(heartbeat => cVisitor.Visit((Heartbeat)heartbeat)) 
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T12:08:00.063

你知道[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx "MSDN")和[Func](http://msdn.microsoft.com/en-us/library/bb549151.aspx "MSDN")对象吗？看起来像你在找什么。

```
var d = new Dictionary<Type, Action>();
d.Add(typeof(HeartBeat), ()=>Trace.WriteLine("todum todum")); 
```

PS：谢谢YAG

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:25:01.820

您最好的选择是使用反射。
1\. 使用 typeof(Visitor).GetMethods() 获取访问者类的所有方法（或所有称为“访问”的方法？）。
2\. GetMethods 返回 MethodInfo 的 IEnumerable。GetParameters 将为您提供每个方法的参数。
3\. 所以现在你可以建立你的 (Type, MethodInfo) 的字典
4\. 使用 Invoke 来调用方法。

Rq ：使用反射的一个优点是，如果您添加新方法，字典仍然是最新的。没有忘记添加方法的风险。

# c# - 是否可以将相同的 DLL 添加到 AppDomain 中两次，或者最好重新使用加载的 DLLC？

> ID：11503890
> 
> 赞同：2
> 
> 时间：2012-07-16T12:03:22.157
> 
> 标签：c#, .net

我的应用程序在应用程序执行期间多次加载相同的 DLL。

```
AssemblyName assemblyName = AssemblyName.GetAssemblyName(plugin.FullPathToDLLFile);
loadedPlugin.LoadedAssembly = System.Reflection.Assembly.Load(assemblyName); 
```

我是否使用 AppDomain 重新使用它们或如何？

关于它应该如何正常完成的任何线索？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:05:49.940

Assembly in one concrete version is only loaded once regardless of Assembly.Load calls count.

# wpf - 如何在代码后面的 WPF 中同时为高度和宽度设置动画？

> ID：11503894
> 
> 赞同：1
> 
> 时间：2012-07-16T12:03:31.917
> 
> 标签：wpf, vb.net, forms

我正在尝试同时为表单 (MainWnd) 设置动画，`Width`但`Height`我无法获得所需的输出。

```
 Dim aniHeight As New DoubleAnimation
    Dim aniWidth As New DoubleAnimation
    'story board to handle 2 animations
    Dim sb As New Storyboard()
    aniWidth.From = Me.Width
    aniHeight.From = Me.Height
    aniHeight.To = 470
    aniWidth.To = 500
    aniHeight.Duration = TimeSpan.FromSeconds(1)
    aniWidth.Duration = TimeSpan.FromSeconds(1)
    sb.Children.Add(aniHeight)
    sb.Children.Add(aniWidth)
    Storyboard.SetTarget(aniHeight, MainWnd)
    Storyboard.SetTarget(aniWidth, MainWnd)
    Storyboard.SetTargetProperty(aniWidth, New PropertyPath("(Width)"))
    Storyboard.SetTargetProperty(aniHeight, New PropertyPath("(Height)"))
    sb.Begin() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:16:47.407

在这里，您可以使用下面的代码进行引用。

```
<Style x:Key="InvViewBoxStyle" TargetType="Viewbox">    
    <Setter Property="RenderTransform">    
        <Setter.Value>    
            <ScaleTransform />    
        </Setter.Value>    
    </Setter>    
    <Style.Triggers>    
        <DataTrigger Binding="{Binding IsChecked, ElementName=myCheckBox}" Value="True">    
            <DataTrigger.EnterActions>    
                <BeginStoryboard>    
                    <Storyboard>    
                        <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" To="2" Duration="0:0:0.5" />    
                        <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" To="2" Duration="0:0:0.5" />    
                    </Storyboard>    
                </BeginStoryboard>    
            </DataTrigger.EnterActions>    
        </DataTrigger>    
    </Style.Triggers>    
</Style> 
```

# r - 用k-means集群为ggplot的plotmatrix着色？

> ID：11503902
> 
> 赞同：5
> 
> 时间：2012-07-16T12:04:08.443
> 
> 标签：r, ggplot2, k-means

我正在尝试使用 ggplot2 创建 6 个数据变量的配对图，并根据它们所属的 k-means 聚类对点进行着色。我阅读了令人印象深刻的“GGally”包的文档以及 Adam Laiacano 的非正式修复 [http://adamlaiacano.tumblr.com/post/13501402316/colored-plotmatrix-in-ggplot2]。不幸的是，我找不到任何方法来获得所需的输出。

这是一个示例代码：-

```
#The Swiss fertility dataset has been used here

data_ <- read.csv("/home/tejaskale/Ubuntu\ One/IUCAA/Datasets/swiss.csv", header=TRUE)
data_ <- na.omit(data_)

u <- c(2, 3, 4, 5, 6, 7)
x <- data_[,u]
k <- 3
maxIterations <- 100
noOfStarts <- 100
filename <- 'swiss.csv'

library(ggplot2)
library(gridExtra)
library(GGally)

kmeansOutput <- kmeans(x, k, maxIterations, noOfStarts)

xNew <- cbind(x[,1:6], as.factor(kmeansOutput$cluster))
names(xNew)[7] <- 'cluster'
kmeansPlot <- ggpairs(xNew[,1:6], color=xNew$cluster)

OR

kmeansPlot <- plotmatrix(xNew[,1:6], mapping=aes(colour=xNew$cluster)) 
```

两个图都已创建，但未根据集群着色。

希望我没有错过论坛上这个问题的答案，如果确实如此，我深表歉意。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T16:01:43.517

以下轻微修改`plotmatrix2`对我来说很好：

```
plotmatrix2 <- function (data, mapping = aes())
{
    grid <- expand.grid(x = 1:ncol(data), y = 1:ncol(data))
    grid <- subset(grid, x != y)
    all <- do.call("rbind", lapply(1:nrow(grid), function(i) {
        xcol <- grid[i, "x"]
        ycol <- grid[i, "y"]
        data.frame(xvar = names(data)[ycol], yvar = names(data)[xcol], 
            x = data[, xcol], y = data[, ycol], data)
    }))
    all$xvar <- factor(all$xvar, levels = names(data))
    all$yvar <- factor(all$yvar, levels = names(data))
    densities <- do.call("rbind", lapply(1:ncol(data), function(i) {
        data.frame(xvar = names(data)[i], yvar = names(data)[i], 
            x = data[, i])
    }))
    densities$xvar <- factor(densities$xvar, levels = names(data))
    densities$yvar <- factor(densities$yvar, levels = names(data))
    mapping <- defaults(mapping, aes_string(x = "x", y = "y"))
    class(mapping) <- "uneval"
    ggplot(all) + facet_grid(xvar ~ yvar, scales = "free") + 
        geom_point(mapping, na.rm = TRUE) + stat_density(aes(x = x, 
        y = ..scaled.. * diff(range(x)) + min(x)), data = densities, 
        position = "identity", colour = "grey20", geom = "line")
}

plotmatrix2(mtcars[,1:3],aes(colour = factor(cyl))) 
```

![在此处输入图像描述](../Images/1cc599b53362c9458dbbe4613c3cb237.png)

这可能是**ggplot2**版本问题，但我不得不强制`densities`数据框中的分面变量成为因素（即使在**GGally**版本中，这对我来说似乎也很糟糕）。此外，通常不将向量传递给`aes()`，而只是传递列名。

# python - Django-Compress with debug=false 在设置中给出错误

> ID：11503906
> 
> 赞同：2
> 
> 时间：2012-07-16T12:04:25.543
> 
> 标签：python, django, django-templates, django-compressor

我在 django 中遇到了一个奇怪的问题。我正在使用 django-compress 应用程序。直到调试为真，一切顺利。当我执行 debug=False 时，如果是 404，我会遇到内部服务器错误问题，如果没有 404，我会遇到没有 js 和 css 的页面。最糟糕的是，在控制台上我收到以下错误

> UncompressableFileError: 'css/default.css' 不能通过 COMPRESS_URL ('/static/') 访问并且不能被压缩 [16/Jul/2012 17:17:05] "GET /static/img/favicon.ico HTTP/1.1" 500 59

像这样，它为每个 GET 请求显示 500，可通过 /static/ 访问

所以现在没有得到 js 和 css 的原因很清楚了。但是在 404 页面上出现错误的原因尚不清楚。

即使我尝试禁用和启用 django-compress，但在启用正常页面时也会显示 404 错误

请让我知道是什么导致所有 /static/ 事物出现 500 错误，以及为什么 404 页面会出现内部服务器错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T12:31:09.063

当`DEBUG = True`Django 提供静态文件时。`/static/`这意味着它可以在每个 Django 应用程序的目录中找到静态文件。反过来，这意味着 django-compressor 可以找到它需要压缩的每个静态文件。

当`DEBUG = False`Django 不再提供静态文件但它们应该由 Web 服务器提供时。它通过提供`STATIC_ROOT`目录中的所有静态文件（通常`/static/`）来做到这一点。这意味着来自 Django 应用程序的所有静态文件都需要放在那里。

这可以通过`collectstatic`命令完成（请参阅Django 文档中[的静态文件应用程序](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)）。运行该命令后，所有静态文件都应该位于其中，`STATIC_ROOT`并且 django-compressor 应该能够再次找到这些文件。这解决了您在使用静态文件时遇到的 404 错误，并且当 django-compressor 工作时，您将不再遇到 500 错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-13T14:48:42.593

对于 Django >= 1.5，如果您遇到此问题，请确保您正确设置了[`ALLOWED_HOSTS`](https://docs.djangoproject.com/en/dev/ref/settings/#allowed-hosts)设置。没有该设置会使 Django Compressor 陷入`UncompressableFileError`.

我知道我们是在 2014 年，这个问题有点老了 ;) 但我就在今天遇到了这个问题，我的特殊情况的解决方案就是这样，而且没有任何解释。

希望它可以帮助别人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-28T03:04:15.507

您可以打开 django 的电子邮件功能。只需修改setting.py，如下所示：

```
DEBUG = False
ADMINS = (
    ('username', 'username@example.com'),
)
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = ''
EMAIL_HOST_PASSWORD = ''
EMAIL_PORT = 587
EMAIL_USE_TLS = True 
```

如果发生 500，您将收到一封来自 django 的电子邮件。我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-05T15:23:54.403

这个问题也困扰着我。大多数解决方案都是关于设置的`ALLOWED_HOST`。这些答案都不起作用。由于没有仔细阅读文档，我遇到了这个问题。

所以，我们首先要明白这一点。为每个请求编译所有资产是不现实的，对吧？因此，当您将应用程序部署到生产服务器以及关闭调试模式时。你应该记住不要让这种情况发生。

根据文档，我通过将代码放在下面来解决此问题

```
COMPRESS_OFFLINE = True 
```

每次部署我的应用程序时，我都会运行此命令

```
python manage.py compress 
```

对于弹性豆茎，您可以使用以下命令：

```
container_commands:
  ...
  03_compress:
    command: "source /opt/python/run/venv/bin/activate && python manage.py compress" 
```

这可以让您进行离线预编译，而无需在每个请求上编译所有资产。

参考：[https ://django-compressor.readthedocs.io/en/latest/scenarios/](https://django-compressor.readthedocs.io/en/latest/scenarios/)

# linker-errors - 错误 LNK 未解析的外部符号是什么意思？

> ID：11503913
> 
> 赞同：1
> 
> 时间：2012-07-16T12:04:43.573
> 
> 标签：linker-errors

任何人都可以帮助我理解这个链接器错误吗？我如何通过阅读此链接器错误找到确切的错误位置？

```
error LNK2019: unresolved external symbol "__declspec(dllimport) const Serialization::Serialization::IBufferWriter::`vftable'" (__imp_??_7IBufferWriter@Serialization@1@6B@) referenced in function "public: __thiscall Serialization::Serialization::IBufferWriter::IBufferWriter(class Utils::IBuffer &)" (??0IBufferWriter@Serialization@1@QAE@AAVIBuffer@Utils@@@Z) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-31T10:30:08.403

我确定您正在通过 Visual Studio 制作 DLL。更改`__declspec(dllimport)`为`__declspec(dllexport)`将修复它。如果通过宏定义定义，请自行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:08:56.857

这意味着您缺少依赖项。假设 Visual Studio，右键单击您的项目文件 -> 属性 -> 链接器 -> 输入 -> 附加依赖项 -> 添加您需要的 .lib 文件。确保对 Debug 和 Release 版本都这样做。

当您使用某个库时，首先您需要包含必要的头文件以便编译器工作，然后您需要添加必要的 .lib 文件以便链接器工作。

# jquery - jquery 保持弹出窗口并能够在弹出窗口中触发 ajax 请求

> ID：11503923
> 
> 赞同：0
> 
> 时间：2012-07-16T12:05:20.953
> 
> 标签：jquery, html, ajax, events, click

我有一个 div 容器，它是哪个类`popup`，当我点击它时，它不会关闭，这是我想要它做的

但在里面我也有一些 ajax 请求的锚标签，因为我在父容器上返回 false

```
$(".popup").click(function(e){
   return false;
}); 
```

我怎样才能使 ajax 请求工作并仍然保持弹出可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:17:02.640

你的问题不太清楚，但你的意思是这样的：

```
$(".popup").click(function(e) {
    alert("Parent");
    e.preventDEfault();
});
$("#test").click(function(e) {
    e.preventDefault();
    e.stopPropagation();
    alert("Clicked"); //run ajax request
}); 
```

参见：[jsFiddle](http://jsfiddle.net/bvrTk/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:07:24.040

将您的`return`声明放在回调的末尾。它之后的任何东西都不会运行。

或者，如果目的是阻止事件的默认操作，请`e.preventDefault()`改用。

# javascript - 无法将通过 Javascript 创建的画布指定为放置区域

> ID：11503926
> 
> 赞同：0
> 
> 时间：2012-07-16T12:05:34.853
> 
> 标签：javascript, html, html5-canvas, dom-events

我使用 Javascript 在 div 中创建了两个画布。我有另一个带有图像的 div。我想将该图像拖放到画布中。但是我在向画布添加事件时遇到错误。我正在尝试设置事件“ondragover”和“ondrop”。但是我收到了未定义事件的错误。

这是我的代码：

```
<html>
    <head> 
    <script type="text/javascript">

    function dragIt(theEvent) {
theEvent.dataTransfer.setData("Text", theEvent.target.id);   
}

function dropIt(theEvent) {
var theData = theEvent.dataTransfer.getData("Text");
dt = document.getElementById(theData);
theEvent.preventDefault();  
}    

window.onload = function() {     
  var c2 = document.createElement('canvas');
  c2.width = 140;
  c2.height = 140;
  c2.style.cssText = 'position:relative;top:70px;left:498px;border:2px  solid black;';
  var ctx2 = c2.getContext('2d');    
  document.body.appendChild(c2);
  c2.ondragover=event.preventDefault();
  c2.ondrop=dropIt(event);

  var c3 = document.createElement('canvas');
  c3.width = 140;
  c3.height = 140;
  c3.style.cssText = 'position:relative;top:70px;left:502px; border:2px  solid black;';
  var ctx3 = c3.getContext('2d');
  document.body.appendChild(c3);     

  };  
</script>

</head>
    <body>
    <div class="pics">
    <div id="place1">
    <img src="images/211.jpg" width="80" height="80" draggable="true" ondragstart="dragIt(event);" id="pic1" />
    </div>   
    <div style = "position:absolute;top:150px;width:300;height:400;left:500px; border:2px  solid black;"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:13:44.493

```
c2.ondragover=event.preventDefault();
c2.ondrop=dropIt(event); 
```

这些行将执行一些函数，并将其结果分配为事件侦听器。这不是您想要的，您需要分配函数对象本身。此外，执行将失败，因为当时没有`event`对象 - 它将在将来的某个时间，当拖动真正发生时创建，并作为参数传递给函数。

```
c2.ondragover = function(event) {
  event.preventDefault();
};
c2.ondrop = dropIt; 
```

# mysql - MySQL 修改全文搜索

> ID：11503927
> 
> 赞同：0
> 
> 时间：2012-07-16T12:05:35.087
> 
> 标签：mysql

我正在做mysql的全文搜索。所以，这是我的桌子：

```
id   title
1    iphone 4
2    iphone
3    4 iphone 3g
4    iphone 3gs 
```

..还有很多

我正在尝试使用全文搜索在标题字段中获取具有特定关键字的行。让我们想象一下我正在搜索“iphone 4”。默认情况下，全文搜索的最小字长为 4。所以数字 4 将被忽略。

有可能将全文索引的最小长度设置为 1，但这并不高效。

如何做到这一点？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:11:22.423

全文搜索开箱即用，效果很好，但很难进行这样的调整。将最小长度设置为 1 是一种选择。它可能会稍微减慢搜索速度，但在您的网站很大和/或负载过重之前，这种性能损失可能可以忽略不计。

如果您需要更高的性能但仍然需要这种自由，您可以考虑使用像 Sphinx 这样的搜索引擎。

另一个“解决方案”是先进行全文搜索，然后通过搜索那些较短的关键字自己过滤结果。但这对于 Sphinx 可以或多或少地开箱即用解决的问题来说是很多工作。

# c# - Get the client Task Folder (Outlook)

> ID：11503930
> 
> 赞同：1
> 
> 时间：2012-07-16T12:05:40.167
> 
> 标签：c#, outlook

I'm currently on an application which permits you to open a Outlook task.

For getting the folder I use :

```
ApplicationClass _app;
NameSpace _nameSpace;
MAPIFolder folder;

app = new ApplicationClass();
nameSpace = app.GetNamespace("MAPI");
folder = nameSpace.GetDefaultFolder(OlDefaultFolders.olFolderTasks); 
```

It works in the server side, but when I use the application from a client, it doesn't work.

How can I access to the client Outlook folder?

PS : It's for Exchange Accounts

# c++ - Windows 上代理对（BMP 中的 Unicode 字符）的 wchar_t* 大小

> ID：11503931
> 
> 赞同：5
> 
> 时间：2012-07-16T12:05:40.977
> 
> 标签：c++, windows, unicode, utf-16

我在 Windows 8 上遇到了一个有趣的问题。我测试了我可以用 wchar_t* 字符串表示 BMP 之外的 Unicode 字符。以下测试代码为我产生了意想不到的结果：

```
const wchar_t* s1 = L"a";
const wchar_t* s2 = L"\U0002008A"; // The "Han" character

int i1 = sizeof(wchar_t); // i1 == 2, the size of wchar_t on Windows.

int i2 = sizeof(s1); // i2 == 4, because of the terminating '\0' (I guess).
int i3 = sizeof(s2); // i3 == 4, why? 
```

U+2008A 是[Han 字符](http://www.fileformat.info/info/unicode/char/2008a/index.htm "汉字")，它不在 Binary Multilingual Pane 中，因此它应该由 UTF-16 中的代理对表示。这意味着 - 如果我理解正确的话 - 它应该由两个 wchar_t 字符表示。所以我预计 sizeof(s2) 为 6（代理对的两个 wchar_t-s 为 4，终止 \0 为 2）。

那么为什么 sizeof(s2) == 4 呢？我测试了s2字符串构造正确，因为我用DirectWrite渲染过，汉字符显示正确。

更新：正如 Naveen 指出的，我试图错误地确定数组的大小。以下代码产生正确的结果：

```
const wchar_t* s1 = L"a";
const wchar_t* s2 = L"\U0002008A"; // The "Han" character

int i1 = sizeof(wchar_t); // i1 == 2, the size of wchar_t on Windows.

std::wstring str1 (s1);
std::wstring str2 (s2);

int i2 = str1.size(); // i2 == 1.
int i3 = str2.size(); // i3 == 2, because two wchar_t characters needed for the surrogate pair. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T12:07:54.153

`sizeof(s2)`返回存储指针`s2`或任何其他指针所需的字节数，在您的系统上为 4 个字节。~~它与存储在~~指向的字符无关`s2`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T01:57:35.117

`sizeof(wchar_t*)`与 相同`sizeof(void*)`，即指针本身的大小。在 32 位系统上总是 4，在 64 位系统上总是 8。您需要使用`wcslen()`or`lstrlenW()`代替`sizeof()`：

```
const wchar_t* s1 = L"a"; 
const wchar_t* s2 = L"\U0002008A"; // The "Han" character 

int i1 = sizeof(wchar_t); // i1 == 2
int i2 = wcslen(s1); // i2 == 1
int i3 = wcslen(s2); // i3 == 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T18:24:38.263

答案的附录。
RE: 解开问题更新中使用的不同单位`i1`和`i2`, `i3`。

`i1`值 2 是以**字节**
`i2`为单位的大小值 1 是以**wchar_t**为单位的大小，IOW 4 字节（假设`sizeof(wchar_t)`为 4）。
`i3`值 2 是**wchar_t**中的大小，IOW 8 字节

# c# - Map between enums with ValueInjecter

> ID：11503941
> 
> 赞同：4
> 
> 时间：2012-07-16T12:06:09.427
> 
> 标签：c#, enums, valueinjecter

Is it possible to map between 2 different enums?

That is, I want to take one enum value and map it to a corresponding value in a different enum type.

I know how to do this with AutoMapper:

```
// Here's how to configure...
Mapper.CreateMap<EnumSourceType, EnumTargetType>();

// ...and here's how to map
Mapper.Map<EnumTargetType>(enumSourceValue) 
```

But I'm new to ValueInjecter and can't figure it out.

** **UPDATE** **

The source and target enum types look something like:

```
public enum EnumSourceType
{
    Val1 = 0,
    Val2 = 1,
    Val3 = 2,
    Val4 = 4,
}

public enum EnumTargetType
{
    Val1,
    Val2,
    Val3,
    Val4,
} 
```

So, the constants have the same names, but different values.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T20:27:04.487

好的，解决方案很简单，我使用约定注入来按名称匹配属性，并且在我使用 Enum.Parse 从字符串转换为 Enum 之后它们都是枚举的事实

```
public class EnumsByStringName : ConventionInjection
{
    protected override bool Match(ConventionInfo c)
    {
        return c.SourceProp.Name == c.TargetProp.Name 
            && c.SourceProp.Type.IsEnum 
            && c.TargetProp.Type.IsEnum;
    }

    protected override object SetValue(ConventionInfo c)
    {
        return Enum.Parse(c.TargetProp.Type, c.SourceProp.Value.ToString());
    }
}

public class F1
{
    public EnumTargetType P1 { get; set; }
}

[Test]
public void Tests()
{
    var s = new { P1 = EnumSourceType.Val3 };
    var t = new F1();
    t.InjectFrom<EnumsByStringName>(s);

    Assert.AreEqual(t.P1, EnumTargetType.Val3);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T08:46:11.287

```
 enum EnumSourceType
    {
        Val1 = 0,
        Val2 = 1,
        Val3 = 2,
        Val4 = 4,
    }

    enum EnumTargetType
    {
        Targ1,
        Targ2,
        Targ3,
        Targ4,
    }

    Dictionary<EnumSourceType, EnumTargetType> SourceToTargetMap = new Dictionary<EnumSourceType, EnumTargetType>
    {
        {EnumSourceType.Val1, EnumTargetType.Targ1},
        {EnumSourceType.Val2, EnumTargetType.Targ2},
        {EnumSourceType.Val3, EnumTargetType.Targ3},
        {EnumSourceType.Val4, EnumTargetType.Targ4},
    };

    Console.WriteLine( SourceToTargetMap[EnumSourceType.Val1] ) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-09T22:59:16.240

这是使用 LoopInjection 基类的版本：

```
public class EnumsByStringName : LoopInjection
    {

        protected override bool MatchTypes(Type source, Type target)
        {
            return ((target.IsSubclassOf(typeof(Enum))
                        || Nullable.GetUnderlyingType(target) != null && Nullable.GetUnderlyingType(target).IsEnum)
                    && (source.IsSubclassOf(typeof(Enum))
                        || Nullable.GetUnderlyingType(source) != null && Nullable.GetUnderlyingType(source).IsEnum)
                    );
        }

        protected override void SetValue(object source, object target, PropertyInfo sp, PropertyInfo tp)
        {
            tp.SetValue(target, Enum.Parse(tp.PropertyType, sp.GetValue(source).ToString()));
        }
    } 
```

# php - Recommended products based on recently viewed

> ID：11503944
> 
> 赞同：1
> 
> 时间：2012-07-16T12:06:17.640
> 
> 标签：php

I have a PHP script on a product page that shows the user's last 5 viewed products inside a box, and a PHP script on the same product page that shows 10 random products from all of the categories that are similar in name to the main product.

What I would like to do is have the random products based on the recently viewed products instead of the product title name and limited to all the products inside the subcategorys of the parent category of the product they are viewing.

Here is the last viewed product code [http://pastebin.com/3LrLKHFT](http://pastebin.com/3LrLKHFT), and here is the random products code [http://pastebin.com/16zy411R](http://pastebin.com/16zy411R)

Can anyone help me achieve this?

Recently Viewed:

```
 <?php
define('MAX_COLS_FOOTER', 1);
define('MAX_ROWS_FOOTER', 4);

  if (strlen($recently_viewed_footer>1)) {
    $info_box_contents = array();
    $info_box_contents[] = array('align' => 'left',
                                 'text'  => 'RECENTLY VIEWED'
                                );
    new infoBoxHeading($info_box_contents, false, false);

   $counter = 0;
    $info_box_contents = array();
    $recent_products = split(';',$recently_viewed_footer);

   $rows=0;
   $cols=0;
   foreach ($recent_products as $recent) {  if ((strlen($recent) >0) && ($counter < (MAX_ROWS_FOOTER*MAX_COLS_FOOTER)) && ($rows<MAX_ROWS_FOOTER)) {
      $recent_info = tep_db_query("select  p.products_image from " . TABLE_PRODUCTS . " p where p.products_id = '" . $recent. "'");
      $recent_info_values = tep_db_fetch_array($recent_info);
      $counter++;
      if (strlen($counter) < 2) {
        $counter = '0' . $counter;
      }
      $info_box_contents[$rows][$cols] = array('align' => 'left',
                            'params' =>'',                                
                                                        'text'  => '             
   <!-- Begin Wrapper -->
   <div id="wrapperrightinnner">         
                 <!-- Begin Left Column -->
                 <div id="leftcolumnrightinnner">                
                      <a href="' . tep_href_link(FILENAME_PRODUCT_INFO, 'products_id=' . $recent, 'NONSSL') . '">' . tep_image(DIR_WS_IMAGES . $recent_info_values['products_image'], tep_get_products_name($recent), '60px', '55px') . '
                 </div>
                 <!-- End Left Column -->        
                 <!-- Begin Right Column -->
                 <div id="rightcolumnrightinnner">             
             ' . tep_get_products_name($recent) . '</div></a>

                 <!-- End Right Column -->               
   </div>
   <!-- End Wrapper -->
                         '
                           );
      $cols++;
      if ($cols >= MAX_COLS) {
        $cols = 0;
        $rows++;
      }
     }
   }   new tableBox($info_box_contents,true);
  }?> 
```

Random products:

```
 <?php
$i=0;
$pieces = explode(" ", $products_name);
$productname=$pieces[1]." ".$pieces[2];
$productname1="%".$productname."%";
$productname2="%".$pieces[1]."%";
$productname3="%".$pieces[0]."%";
$query="select * from products_description where products_name LIKE '$productname3' OR '$productname1' OR '$products_name' limit 0,$popular_at_shop";
//$query="select * from products_description where products_name like '$productname1' or '$productname2' or '$productname3' limit 0,$popular_at_shop";
$qry=mysql_query($query);
$qry1=mysql_num_rows($qry);
if($qry1>0)
{
?>
<?php
while($result=mysql_fetch_array($qry))
{
 if($i==0 ||  $i%3==0)
 {
echo '<tr valign="top">';
}
echo '<td align="center" width="300px;" style="padding-left:20px; padding-top:10px; padding-bottom:10px;">';
?>

<a href="<?php echo tep_href_link(FILENAME_PRODUCT_INFO, 'products_id=' . $result['products_id']); ?>"><div class="popularatshop"><?php echo substr($result['products_name'],0,28); ?>...</div></a>

<?php

if (($i+1)%3==0)
{
echo '</td></tr>';
}
$i++;

}

}

echo '</table></td></tr><tr>';
?></div>
<div>

   </div>
   <!-- End Wrapper -->
<?php
  if (isset($HTTP_GET_VARS['products_id'])) {
  $i=0;
  $id=$HTTP_GET_VARS['products_id'];

/*
   $orders_query = mysql_query("select p.products_id, p.products_image from orders_products opa, orders_products opb, orders o, products  p where opa.products_id = '$id' and opa.orders_id = opb.orders_id and opb.products_id != '$id' and opb.products_id = p.products_id and opb.orders_id = o.orders_id and p.products_status = '1' group by p.products_id order by o.date_purchased desc limit 0,$also_purchase_limit");
*/

  $orders_query = mysql_query("select p.products_id, p.products_image from products p, categories c, products_to_categories ptc where p.products_id = ptc.products_id and c.categories_id = ptc.categories_id and c.categories_id in (select categories_id from products_to_categories where products_id = '$id') order by rand() limit 0, 21");

 $also1=mysql_num_rows($orders_query);
 if($also1>0)
 {
 ?> 
```

# android - ListView 在 Android 中不可见

> ID：11503950
> 
> 赞同：1
> 
> 时间：2012-07-16T12:06:38.903
> 
> 标签：android, android-layout

我是 android 应用程序开发的新手。

这是我的 xml 布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >
<Button 
    android:layout_weight="0.5"
    android:id="@+id/back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/cancel"/>

<Button 
    android:layout_weight="0.5"
    android:layout_gravity="right"
    android:id="@+id/editall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/editall"/>
</LinearLayout>
<ListView 
    android:id="@android:id/list"
    android:cacheColorHint="#00000000"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:fadingEdge="none"/>
</LinearLayout> 
```

在此我可以看到按钮，但未显示列表视图。任何人都可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:08:41.100

只需替换`wrap_content`按钮`fill_parent`线性布局即可。

改成

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >
<Button 
    android:layout_weight="0.5"
    android:id="@+id/back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/cancel"/>

<Button 
    android:layout_weight="0.5"
    android:layout_gravity="right"
    android:id="@+id/editall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/editall"/>
</LinearLayout>
<ListView 
    android:id="@android:id/list"
    android:cacheColorHint="#00000000"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:fadingEdge="none"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:16:00.467

将内部线性布局的高度从 fill_parent 更改为 wrap_content。

因为给定高度 fill_parent 将覆盖将隐藏列表视图的父级的整个高度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:40:20.860

您是否也`Adapter`为您`ListView`的设置了一个`onCreate()`？如果它是空的，则屏幕上不会显示任何内容，因为您还使用容器设置了透明背景`cacheColorHint`并将其应用`wrap_content`高度。

# php - 使用 POST 方法在 HTML 中提交 2 个不同的表单

> ID：11503961
> 
> 赞同：0
> 
> 时间：2012-07-16T12:07:09.370
> 
> 标签：php

我在一个 HTML 页面中有 2 个表单。一个表单发布到数据库，另一个表单发送一封电子邮件，其中包含表单中的详细信息。当我想到它时，这很简单，但尝试了很长时间没有成功。

HTML：

```
 <ul class="slides">
        <li>
            <div id="contactFormContainer" class="container">
                <div class="left">
                    <h1 class="uppercase">do you  have project inquiry??</h1>

                    <form id="contactForm" method="POST" name="contactForm" action="">
                        <fieldset>
                            <p> 
                                <label for="fullname">Fullname</label> 
                                <input name="fullname" id="fullname" type="text">
                            </p>
                            <p> 
                                <label for="email">Email</label> 
                                <input name="email" id="contact_email" type="text">
                            </p>
                            <p> 
                                <label for="fullname">Subject</label> 
                                <input name="fullname" id="fullname" type="text">
                            </p>
                            <p> 
                                <label for="fullname">Project Description</label> 
                                <textarea name="message" id="message" rows="2" cols="20"></textarea>
                            </p>
                            <p> 
                                <input class="btn" id="contactSubmit" type="submit" value="Submit">
                            </p>
                        </fieldset>
                    </form>     
                </div> <!-- end left -->

                <div class="right">
                    <span class="head">Twitter Feeds</span>
                    <div class="twitter">
                        <!-- twitter feed will be generated -->
                    </div>
                </div> <!-- end right -->
            </div> <!-- end contact form container -->
        </li>

        <li>
            <div class="head container">
                <h2>coming soon...</h2>
            </div>

            <div class="body container">
                <h1 class="uppercase">Subash.com is coming with new face.</h1>
                Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Donec id elit non mi porta gravida at eget metus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Cum sociis natoque penatibus et magnis dis parturient.
            </div>

            <div class="footer container">
                <p class="signup"><span class="cursive">sign up</span> ..be the first to be notified</p>

                <div class="inputbox">
                    <form accept-charset="UTF-8" action="" name="subscribeForm" id="subscribeForm" method="post">

                        <input class="email_field" id="email" name="email" placeholder="Type your email address..." type="email">
                        <input class="submit_button" type="submit">

                    </form>  
                    <div class="status">
                        <?php 
                            if(isset($status)){
                                echo '<p>' . $status . '</p>';
                            } else {
                                echo '<p class="spam">We will never spam you.</p>';
                            }
                        ?>
                    </div>
                 </div>
            </div>
        </li>
    </ul> 
```

PHP

```
 <?php
require_once('includes/db.php');
require_once('includes/functions.php');
require_once('includes/validate.php');

if($_SERVER['REQUEST_METHOD'] == 'POST'){
// subscribe form
$email = trim($_POST['email']);

if(empty($email) || !valid_email($email)){
    $status = 'Please provide valid email address.';
} else {
    if(email_exist($email)){
        $status = 'You are already subscribed.';
    } else {
        add_email($email);
        $status = 'Thank you for subscribing.';
    }
}   
 }

require 'index.tmpl.php';
?> 
```

这段代码完全符合预期。但现在我需要提交另一个表格。我尝试在 REQUEST_METHOD 检查以下添加此代码但没有成功：

```
 $fullname = $_POST['fullname'];

if(!empty($fullname)){
    $status = 'sucess';
    echo $status;
} else {
    echo $fullname;
} 
```

我也尝试过：

```
if (!empty($_POST['contactForm'])) {
   //do something here;
}

if (!empty($_POST['subscribeForm'])) {
   //do something here;
} 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:12:38.143

`fullname`您为和字段使用了相同的 id 和名称`subject`，这可能会导致一些问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:11:39.583

为提交按钮使用名称属性，如果单击了按钮，请检查 php。

```
<input class="btn" id="contactSubmit" name ="contactSubmit"
type="submit" value="Submit">

<input class="submit_button" name="submitEmail" id="submitEmail" type="submit"> 
```

然后在 php

```
if(isset($_REQUEST['contactSubmit']))
{
       // contact submit clicked do action based on that
} 
if(isset($_REQUEST['submitEmail']))
{
    // Send email
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:13:39.863

仅发送表单（以及与其关联的值）。所以你不能用正常的方式来做。

您可能需要一些 JavaScript 来“单击”另一个提交按钮。

还要检查这个问题：[提交多个表格](https://stackoverflow.com/questions/4255528/submit-multiple-forms)

# objective-c - MBProgressHUD 阻塞界面直到操作完成

> ID：11503964
> 
> 赞同：6
> 
> 时间：2012-07-16T12:07:16.693
> 
> 标签：objective-c, iphone, ios5, ios4, mbprogresshud

我需要阻塞接口，直到`MBProgressHUD`操作完成。我确实参考了这个线程，

[阻塞接口直到操作完成](https://stackoverflow.com/questions/8628981/block-interface-untill-operation-is-done)

根据它，我们应该禁用对我不起作用的每个单独的项目。我的情况是我需要禁止用户点击后退按钮。我确实尝试`HUD.userInteractionEnabled = YES`过禁用除后退按钮之外的每个控制器。有没有办法阻止用户从该控制器中弹出？

问候，
迪尔山

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T12:30:38.620

如果你没有找到合适的方法来做到这一点，你可以忽略整个用户交互

```
[[UIApplication sharedApplication] beginIgnoringInteractionEvents]; 
```

.U 可以通过

```
[[UIApplication sharedApplication] endIgnoringInteractionEvents]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-03T18:47:54.290

您可以将 MBProgressHUD 添加到导航控制器的视图中，这样它还可以防止与后退按钮的交互：

```
[MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T12:54:11.030

如果您希望在显示 HUD 时启用特定控件，您可以简单地`[self.view bringSubviewToFront:yourControl];` 在您的`showHUD`方法中添加该行作为

```
-(void) showHUD:(UIView *)view
{

    if (self.HUDdisplayed == NO)
    {
        self.HUDdisplayed = YES;
        HUD = [[MBProgressHUD showHUDAddedTo:self.view animated:YES] retain];
    }
//    HUD.delegate = self;
    [self.view bringSubviewToFront:HUD];
     [self.view bringSubviewToFront:yourControl];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:12:57.973

这就是我将它添加`MBProgressHUD`到我的视图中的方式，它会阻止所有输入，直到它被删除：

```
MBProgressHUD HUD = [[MBProgressHUD alloc] initWithView:self.view];
HUD.opacity = 0.7f;

[self.view addSubview:HUD];

HUD.delegate = self;
[HUD show:YES]; 
```

**注意：** `self`是添加 HUD 的视图控制器吗

# java - « If » becomming crazy

> ID：11503968
> 
> 赞同：0
> 
> 时间：2012-07-16T12:07:33.933
> 
> 标签：java, android, eclipse

I try to program a calculator in order to learn the very begining in android dev, but I'm facing to an issue that an human can't understand. I hope you're not human.

Take a look at my If condition :

```
 if (result != "")
    {
        textView.append("0");

    } 
```

(You may notice that I used « result != "" » instead of isEmpty() method because isEmpty() isn't supported in API7).

Well. Now take a look at my two "result" variable

```
result  "" (id=830012674816)    
count   0   
hashCode    0   
offset  0   
value    (id=830012674848)  

result  "" (id=830022154000)    
count   0   
hashCode    0   
offset  0   
value    (id=830022154032) 
```

(I copied that two results from Eclipse Debugger)

The first result is OK : that's the one I get when I start the program : the if does its job and pass over. The second one seems to be exactly the same, but for a unknown reason, it gets inside the if and appends the zero. I get this issue after pushing the "plus" button.

Any idea ?

If you find there is a lack of information or you don't understand the issue, you can find here the whole workspace (in progress) : [http://www.sendspace.com/file/udp5d3](http://www.sendspace.com/file/udp5d3) . To reproduce the issue, push "zero" button when programs launchs and note that it normally does not appear. Then enter any number such as "104", "7" or "73", push "Plus" button, then "zero". Zero should not appear here.

Thank you :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:11:18.397

不要用 . 比较字符串（或任何对象）`!=`。使用`equals()`喜欢`!("".equals(result))`或`!(result.equals(""))`

`==`用于检查引用是否包含相同的对象，而不是对象是否包含相同的值，

例如

```
Integer i1=new Integer(1);
Integer i2=new Integer(1);
Integer i3=i1;
//checking references
System.out.println(i1==i2);//false
System.out.println(i1==i3);//true

//checking values
System.out.println(i1.equals(i2));//true
System.out.println(i1.equals(i3));//true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:12:12.330

改变：

```
if (result != "") 
```

至：

```
if (!result.equals("")) 
```

或更优选地，也使用`TextUtils`which 检查`null`：

```
if(!TextUtils.isEmpty(result)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:13:29.503

您的`if`子句中的表达式检查变量中的引用（而不是值）`result`是否不等于对象`""`，这就是您始终为真的原因。而不是`result != ""`使用`!result.equals("")`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T12:13:49.563

你需要调用这个方法`!result.equals("")`，

`result == " "`将比较对象实例而不是字符串对象的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T12:10:28.690

尝试`contentEquals`改用。例如

```
if (!result.contentEquals("")) 
```

[http://developer.android.com/reference/java/lang/String.html#contentEquals(java.lang.CharSequence](http://developer.android.com/reference/java/lang/String.html#contentEquals(java.lang.CharSequence) )

原因是，在 Java 中，`==`如果两个对象引用指向同一个实例，则返回 true，而您想比较两个字符串以检查它们是否以相同的顺序包含相同的字符，这不是一回事。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T12:24:02.830

**1.**对象`.equals()`在Java中比较，String在Java中是一个Object。

**2.**所以 String 必须遵循同样的规则。

例子：

```
 if (!(result.equals("")))
    {
        textView.append("0");

    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T12:56:24.367

正如其他答案所说，应该使用`String.equals()`比较两个的实际内容`Strings`（参见[`equals`](http://developer.android.com/reference/java/lang/Object.html#equals%28java.lang.Object%29)javadocs 中的描述），而不是通过`==`.

但是，正如您在问题中指出的那样，`==`当您的应用程序第一次运行比较时，使用评估为 true 的两个字符串。这是因为[String interning](http://en.wikipedia.org/wiki/String_interning)发生的。最有可能的是，在变量的初始化过程中，您已将 分配`result`给与稍后比较的相同值的常量 - `""`. 然后，由于 JVM 使用实习来仅保留`String`给定值的单个常量实例，因此`result`变量包含的引用实际上与比较中对常量的引用相同，并且相等性测试评估为真。

因此，存在（相当特殊的）情况，适合`==`用于比较字符串。请参阅[此问题](https://stackoverflow.com/questions/3885753/string-comparison-and-string-interning-in-java)，这是列表和进一步讨论的最佳答案。

# compilation - Getting ATLAS 3.10.0 compiled on Windows 7 64

> ID：11503970
> 
> 赞同：8
> 
> 时间：2012-07-16T12:07:50.050
> 
> 标签：compilation, mingw, windows-7-x64, atlas

I'm having some difficulty compiling ATLAS on Windows 7 64-bit and any help would be appreciated! I'm trying to link it to lapack-3.4.1.

The command I'm using in Cygwin is:

```
../ATLAS/configure -D c -DWALL --with-netlib-lapack-tarfile=../lapack-3.4.1.tgz -b 64 -Si archdef 0 -Ss ADdir ../ATLAS/WINAD 
```

The output I get is:

```
make: `xconfig' is up to date.
./xconfig -d s /f/Coursework/Code/python/compile/built/../ATLAS/ -d b /f/Coursework/Code/python/compile/built  -D c -DWALL -Si lapackref 1 -b 64 -Si archdef 0 -Ss ADdir ../ATLAS/WINAD
gcc.exe: error: /f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/src/probe_asm.c: No such file or directory
gcc.exe: fatal error: no input files
compilation terminated.
make: *** [probe_asm.o] Error 1
gcc.exe: error: /f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/src/probe_vec.c: No such file or directory
gcc.exe: fatal error: no input files
compilation terminated.
make: *** [probe_vec.o] Error 1
gcc.exe: error: /f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/src/probe_arch.c: No such file or directory
gcc.exe: fatal error: no input files
compilation terminated.
make: *** [probe_arch.o] Error 1
gcc.exe: error: /f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/src/probe_arch.c: No such file or directory
gcc.exe: fatal error: no input files
compilation terminated.
make: *** [probe_arch.o] Error 1
gcc.exe: error: /f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/src/probe_arch.c: No such file or directory
gcc.exe: fatal error: no input files
compilation terminated.
make: *** [probe_arch.o] Error 1
gcc.exe: error: /f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/src/probe_arch.c: No such file or directory
gcc.exe: fatal error: no input files
compilation terminated.
make: *** [probe_arch.o] Error 1
gcc -I/f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/include  -g -w -o xisgcc /f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/src/IsGcc.c atlconf_misc.o
gcc.exe: error: /f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/src/IsGcc.c: No such file or directory
Makefile:39: recipe for target `xisgcc' failed
make: *** [xisgcc] Error 1

OS configured as Win64 (9)

Bad ASM value=0, res='NULL'

Assembly configured as  (0)

Bad VECFLAG value=0, res='NULL'

Vector ISA Extension configured as   (0,0)

Bad MACHTYPE value=0, res='NULL'

Architecture configured as  UNKNOWN (0)

Bad CPU MHZ value=0, res='NULL'

Clock rate configured as 0Mhz

Bad NCPU value=0, res='NULL'

Maximum number of threads configured as  0
Cannot detect CPU throttling.
ERROR 2 IN SYSCMND: 'make IRun_comp args="-v 0 -o atlconf.txt -O 9 -A 0 -Si nof77 0 -V 0   -b 64"'
xconfig exited with 2 
```

Trying the same in the msys shell gives me:

```
make: `xconfig' is up to date.
./xconfig -d s /f/Coursework/Code/python/compile/built/../ATLAS/ -d b /f/Coursew
ork/Code/python/compile/built  -D c -DWALL -Si lapackref 1 -b 64 -Si archdef 0 -
Ss ADdir ../ATLAS/WINAD

Bad OS value=0, res='NULL'

OS configured as UNKNOWN (0)
Assertion failed: iret, file f:/Coursework/Code/python/compile/built/../ATLAS//C
ONFIG/src/config.c, line 602

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information.
xconfig exited with 3 
```

The output of msysinfo is:

```
msysinfo-1.3: Send this to the MSYS support list:

MSYS 1.0.17(0.48/3/2) 2011-04-24 23:39 i686 unknown; targ=MINGW3
GNU bash, version 3.1.17(1)-release (i686-pc-msys); ENV=.profile
GNU Make 3.81This program built for i686-pc-msys; MAKE_MODE=unix
gcc.exe (GCC) 4.7.0; targ=MINGW32
GNU ld (GNU Binutils) 2.22
224 2011-04-25 00:42:29.000000000 +0100 /bin/msys-1.0.dll
659 2010-04-14 15:15:29.000000000 +0100 /bin/msys-archive-2.dll
048 2011-09-10 07:40:32.000000000 +0100 /bin/msys-bz2-1.dll
240 2010-01-29 01:32:57.000000000 +0000 /bin/msys-crypt-0.dll
448 2010-04-14 23:32:54.000000000 +0100 /bin/msys-crypto-1.0.0.d
840 2010-01-29 02:06:29.000000000 +0000 /bin/msys-expat-1.dll
992 2010-01-29 01:49:36.000000000 +0000 /bin/msys-gdbm-3.dll
264 2010-01-29 01:49:36.000000000 +0000 /bin/msys-gdbm_compat-3.
548 2010-05-04 03:04:46.000000000 +0100 /bin/msys-gmp-10.dll
424 2010-05-08 20:26:27.000000000 +0100 /bin/msys-guile-17.dll
112 2010-05-08 20:26:27.000000000 +0100 /bin/msys-guile-srfi-srf
680 2010-05-08 20:26:27.000000000 +0100 /bin/msys-guile-srfi-srf
l
680 2010-05-08 20:26:27.000000000 +0100 /bin/msys-guile-srfi-srf
752 2010-05-08 20:26:27.000000000 +0100 /bin/msys-guile-srfi-srf
680 2010-05-08 20:26:27.000000000 +0100 /bin/msys-guilereadline-
904 2011-10-29 19:18:01.000000000 +0100 /bin/msys-iconv-2.dll
128 2011-10-29 12:22:30.000000000 +0100 /bin/msys-intl-8.dll
246 2010-09-26 06:04:09.000000000 +0100 /bin/msys-ltdl-7.dll
288 2011-09-10 08:01:59.000000000 +0100 /bin/msys-lzma-5.dll
248 2010-04-16 05:50:34.000000000 +0100 /bin/msys-magic-1.dll
064 2010-02-01 22:22:06.000000000 +0000 /bin/msys-minires.dll
544 2010-05-09 01:41:04.000000000 +0100 /bin/msys-opts-25.dll
608 2011-04-27 05:23:31.000000000 +0100 /bin/msys-perl5_8.dll
327 2010-04-28 00:40:27.000000000 +0100 /bin/msys-popt-0.dll
192 2010-02-01 22:29:13.000000000 +0000 /bin/msys-regex-1.dll
544 2010-04-14 23:32:54.000000000 +0100 /bin/msys-ssl-1.0.0.dll
864 2010-02-01 01:44:06.000000000 +0000 /bin/msys-termcap-0.dll
888 2010-02-01 21:40:02.000000000 +0000 /bin/msys-xml2-2.dll
920 2012-05-14 05:29:50.000000000 +0100 /bin/msys-z.dll
88 2010-04-29 19:18:53.000000000 +0100 /bin/make.exe
798 2012-03-31 18:24:11.000000000 +0100 /mingw/bin/gcc.exe
502 2011-11-30 15:20:43.000000000 +0000 /mingw/bin/ld.exe
HOME=/c/Users/Folcon
Sysname=MINGW32_NT-6.1  OSTYPE=msys  TERM=cygwin
PATH=.:/usr/local/bin:/mingw/bin:/bin:/c/Program Files (x86)/MiK
TeX 2.9/miktex/bin:/c/Windows/system32:/c/Windows:/c/Windows/Sys
tem32/Wbem:/c/Windows/System32/WindowsPowerShell/v1.0/:/c/Progra
m Files (x86)/ATI Technologies/ATI.ACE/Core-Static:/c/Program Fi
les (x86)/Git/cmd:/c/Program Files (x86)/Aspell/bin:/c/Program F
iles (x86)/gs/gs9.00/bin:/c/msys/gnuwin32/bin:/mingw/bin:/c/Prog
ram Files (x86)/Java/jdk1.6.0_21/bin:/c/Program Files (x86)/Emac
s/emacs/bin:/c/Python25/:/c/Program Files (x86)/TortoiseHg/:/c/P
rogram Files (x86)/Calibre2/:/c/lein:/c/mvn/bin:/c/Program Files
/TortoiseGit/bin:/c/Users/Folcon/.lein/bin:/c/Windows/System32:/
c/Program Files (x86)/Haskell/bin:/c/ghc/ghc-6.12.3/bin:/c/Progr
am Files (x86)/Google/google_appengine/:/c/Python26:/c/Python26/
DLLs:/c/Python26/Scripts:/c/Python26/Lib/site-packages/PyQt4:/c/
Python26/gnuplot/bin:/c/Python26/Lib/site-packages/vtk:/f/Progra
m Files (x86)/pythonxy/console:/f/Program Files (x86)/pythonxy/S
ciTE-2.21:/f/Program Files (x86)/pythonxy/mingw/bin:/c/Users/Fol
con/.lein/bin:/f/C/Program Files (x86)/Git/bin:/cygdrive/c/Progr
am Files (x86)/Java/jdk1.6.0_21/bin:/cygdrive/c/lein:/c/mvn/bin:
/cygdrive/c/Users/Folcon/.lein/bin:/cygdrive/c/Program Files (x8
6)/Haskell/bin:/cygdrive/c/ghc/ghc-6.12.3/bin:/cygdrive/c/Python
26:/cygdrive/c/Python26/DLLs:/cygdrive/c/Python26/Scripts:/cygdr
ive/c/Python26/Lib/site-packages/PyQt4:/cygdrive/c/Python26/gnup
lot/bin:/cygdrive/c/Python26/Lib/site-packages/vtk:/cygdrive/c/U
sers/Folcon/.lein/bin:/cygdrive/f/C/Program Files (x86)/Git/bin
$ ls -tx /f/Coursework/Code/python/compile/built
config1.out   atlcomp.txt     Makefile    xprobe_OS.exe*
xconfig.exe*  atlconf_misc.o  probe_OS.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-17T15:27:40.000

*   “Bad OS value”是由 ATLAS 使用`tmpnam`函数生成临时文件名（并尝试从 temp 之后读取命令结果）引起的，在某些 MinGW 实现中，它返回根目录中文件的路径（您可以看到“访问被拒绝”和“cat：\ XXXX：没有这样的文件或目录”，如果你添加`-v 2`到`.../configure`args）。

您可以尝试通过更改 ATL_tmpnam 函数以用于`tempnam` 在当前目录（您应该具有写入权限）中返回临时文件来缓解此问题，而不是：

（当然，以下是一个肮脏的黑客，可以做得更好）

```
--- -   2016-08-17 18:06:53.413941900 +0300
+++ ATLAS/CONFIG/include/atlas_sys.h    2016-08-17 16:54:37.583946600 +0300
@@ -218,10 +218,14 @@ static char *ATL_tmpnam(void)
 {
    static char tnam[L_tmpnam];
    static char FirstTime=1;
+   char* temptnam;
    if (FirstTime)
    {
       FirstTime = 0;
-      assert(tmpnam(tnam));
+      temptnam = tempnam(".",tnam);
+      assert(temptnam);
+      strcpy(tnam,temptnam);
+      free(temptnam);
    }
    return(tnam);
 } 
```

*   `gcc: /f/Coursework/Code/python/compile/built/../ATLAS//CONFIG/src/probe_asm.c: No such file or directory gcc.exe: fatal error: no input files`完全有效的（对于 Cygwin）文件路径是由运行错误的 gcc 引起的：如果你运行`which gcc`，你会发现它不是来自 Cygwin 的`/usr/bin/`，而是来自系统中的其他地方（可能`%PATH%`由 MinGW 添加）。由于没有“意识到” Cygwin，它认为这些路径不存在。解决方案：添加`--cc=/usr/bin/gcc`或类似的参数到`.../configure`.

# html - 如何设置多选的宽度？

> ID：11503972
> 
> 赞同：5
> 
> 时间：2012-07-16T12:07:50.347
> 
> 标签：html

我想设置多个选择元素的默认宽度：

![在此处输入图像描述](../Images/5f82c17eb7f0e3361c5af1b178433d29.png)

怎么做 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T12:13:30.123

试试这个，

```
<select multiple="multiple" style="width: 200px;"> 
```

或者

```
<select multiple="multiple" style="width: 10em;"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T12:11:33.793

与任何其他元素一样。您编写一个匹配元素的选择器（例如，具有多个属性的选择元素），然后使用 width 属性。

默认情况下，宽度适用于替换的内联元素（例如选择）。

```
select[multiple] {
    width: 7em;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:11:29.767

在 css 中试试这个

```
select[multiple=multiple] {width: <default width you want>px ;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-22T03:02:00.293

看看上的`max-width`属性`style`。

前任：

```
<select name=countries  style="max-width:90%;">
 <option value=af>Afghanistan</option>
 <option value=ax>Åland Islands</option>
 ...
 <option value=gs>South Georgia and the South Sandwich Islands</option>
 ...
</select> 
```

更多信息：[如何控制选择标签的宽度？](https://stackoverflow.com/questions/10671614/how-to-control-the-width-of-select-tag)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-08T14:03:30.633

您可以使用“大小”属性，如下所示：

```
<!DOCTYPE html>
<html>
<body>

<select size="3">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select>

</body>
</html>
```

# javascript - 使用 gtk3 在 seed-3.2 javascript 中使用 cairo 绘图

> ID：11503978
> 
> 赞同：0
> 
> 时间：2012-07-16T12:08:14.183
> 
> 标签：javascript, linux, cairo, seed, gtk3

我试图找出如何在种子 3.2 中制作一个简单的 cairo 绘图。我知道gtk3已经将事件方法从expose-event更改为draw。
回调在我的小测试样本中运行良好，但我不知道如何获取 cairo 对象。
我可以看到回调函数参数是：
[object GtkDrawingArea]
[object seed_struct]

我不知道 seed_stuct 是否是 cairo 处理程序并访问它。

笔记。种子示例中的 cairo.js 是 gtk+2.0。

代码示例。

```
#!/usr/bin/env seed

cairo = imports.cairo;
Gtk = imports.gi.Gtk;
Gdk = imports.gi.Gdk;

const WINDOW_WIDTH=300;
const WINDOW_HEIGHT=300;

function MIN(x,y) {
    if (x<y) return x;
    return y;
}

function draw_cb(drea, cr, data){
//    var cr = new cairo.Context.from_drawable(drawing_area.window);
    Seed.print(drea);
    Seed.print(cr);
    Seed.print(data);

    var width=drea.get_allocated_width();
    var height=drea.get_allocated_height();
    Seed.print("width="+width+" height="+height);
 //   var cr = Gdk.cairo_create(drea.window);
 //   Seed.print(cr);
    var context=drea.get_style_context();
    Seed.print(context);
    var PAD=50;
    var extent=MIN(width-2*PAD, height-2*PAD);
    var x=PAD;
    var y=PAD;
// From here I don't know what to do

//    Seed.printf(Seed.stringify(context));

//    context.render_arrow(cr, Math.PI/2.0,x,y,extent);
//    cr.arc( width/2.0, height/2.0,
//      MIN(width,height)/2.0, 
//      0, 2.0*Math.PI );
   /* Set color for background */
    cr.storke();
    cairo.set_line_width(cr, 2);
    cairo.set_source_rgb(cr, 1, 1, 1);
//    cr.operator=cairo.Operator.CLEAR;
    /* fill in the background color*/
//    Seed.print("Before paint");
 //   cr.paint();
 //   Seed.print("After paint");
 //   cr.operator=cairo.Operator.OVER;

   /* set color for rectangle */
//   cr.set_source_rgb(0.42, 0.65, 0.80);
   /* set the line width */
//   cr.set_line_width(6);
   /* draw the rectangle's path beginning at 3,3 */
 //  cr.rectangle (3, 3, 100, 100);
   /* stroke the rectangle's path with the chosen color so it's actually visible */
 //  cr.stroke();

   /* draw circle */
/*
   cr.set_source_rgb(0.17, 0.63, 0.12);
   cr.set_line_width(cr,2);
   cr.arc(150, 210, 20, 0, 2*G_PI);
   cr.stroke();
*/
   /* draw horizontal line */
/*
   cr.set_source_rgb(0.77, 0.16, 0.13);
   cr.set_line_width(6);
   cr.move_to(80,160);
   cr.line_to(200, 160);
   cr.stroke();
*/
   /* free cr and all associated resources */
/*
   cr.destroy(cr);
*/
   return false;
}

Gtk.init(Seed.argv);

var w = new Gtk.Window();
w.signal["destroy"].connect(Gtk.main_quit);
var da = new Gtk.DrawingArea();
da.set_size_request(WINDOW_WIDTH, WINDOW_HEIGHT);
da.signal["draw"].connect(draw_cb);
w.add(da);
//da.show();
//w.show();

w.show_all();
Gtk.main(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:07:24.610

I have poked a little around.
You can get a cairo contex for the window widget by using the the function:

```
var cr = new cairo.Context.from_window(drea.get_window()); 
```

I don't know if this is the correct way in gtk3 but it works.

I don't know what the second parameter (in the callback function draw_cb) is used for. I think is should be the cairo context according to equivalent function in C.

But anyway this code sample seems to work

```
#!/usr/bin/env seed
/* Simple cairo example using gtk3 */

cairo = imports.cairo;
Gtk = imports.gi.Gtk;
Gdk = imports.gi.Gdk;

const WINDOW_WIDTH=300;
const WINDOW_HEIGHT=300;

function MIN(x,y) {
    if (x<y) return x;
    return y;
}

function draw_cb(drea, crx, data){
    var cr = new cairo.Context.from_window(drea.get_window());
    Seed.print("drea="+drea);
    Seed.print("cr="+cr);
    Seed.print("data="+data);
    for(prop in cr) {
    Seed.print("cr.prop="+prop);
    }
    /* Get the size of the window */
    var width=drea.get_allocated_width();
    var height=drea.get_allocated_height();
    Seed.print("width="+width+" height="+height);

    var context=drea.get_style_context();
    Seed.print(context);
    var PAD=50;
    var extent=MIN(width-2*PAD, height-2*PAD);
    var x=PAD;
    var y=PAD;
    // Cairo drawing from here
    cr.set_source_rgba(0.88, 0.20, 0.40, 0.6);
    cr.arc( width/2.0, height/2.0,
        MIN(width,height)/2.0, 
        0, 2.0*Math.PI );
    cr.stroke();
   /* set color for rectangle */
    cr.set_source_rgba(0.42, 0.65, 0.80, 1.0);
    cr.rectangle (width*0.1, height*0.1, width*0.8, height*0.8);
    cr.stroke();
   /* draw line */
    cr.set_source_rgba(0.00, 0.88, 0.13,0.6);
    //  cr.set_line_width(6);
    cr.move_to(width*0.9,height*0.1);
    cr.line_to(width*0.1,height*0.9);
    cr.stroke();
   /* free cr and all associated resources */
    cr.destroy();
   return false;
}

Gtk.init(Seed.argv);

var w = new Gtk.Window();
w.signal["destroy"].connect(Gtk.main_quit);
var da = new Gtk.DrawingArea();
da.set_size_request(WINDOW_WIDTH, WINDOW_HEIGHT);
da.signal["draw"].connect(draw_cb);
w.add(da);

//da.show();
//w.show();

w.show_all();
Gtk.main(); 
```

Note. You can see that the window is redrawn when you resizes the window.

# java - 打包/解包自定义对象的 HashMap 的最佳方法是什么？

> ID：11503980
> 
> 赞同：2
> 
> 时间：2012-07-16T12:08:20.873
> 
> 标签：java, android, ipc, classloader, parcelable

我有一个`Event`类定义了`HashMap`这样的私有：

```
private Map<String, Object> data = new HashMap<String, Object>(); 
```

该类`Event`是任何类型的“事件”的包装。这`HashMap`可以包含键引用的任何对象实例。接收`Event`实例的类知道与每个键相关的类，因此它可以安全地将其`Object`转换为相应的子类。

当我尝试`Event`在 2 个进程之间传递一个实例时，就会出现问题。`Event`实现`Parcelable`，因此它可以通过 a 发送`Message`：

```
Bundle bundle = new Bundle();
bundle.putParcelable(Event.BUNDLE_KEY, event);

// Make the message with the bundle
Message message = new Message();
message.setData(bundle); 
```

解组时：

```
public void readFromParcel(Parcel in) {

    idEvent = in.readInt();
    priority = in.readInt();
    idSource = in.readInt();
    idDestination = in.readInt();
    action = in.readInt();

    Bundle mapBundle = in.readBundle();

    if (mapBundle.getSerializable(MAP_KEY) instanceof HashMap) {
        data = (Map<String, Object>) mapBundle.getSerializable(MAP_KEY);
    } else {
        Log.e(TAG, "Parcel reading error: not a HashMap");
    }
} 
```

问题是这不起作用，因为我需要指定使用`mapBundle`哪个`ClassLoader`，例如`mapBundle.setClassLoader(Entity.class.getClassLoader());`. **但**我不知道会有哪些`Object`子类`HashMap`......

这就是我的想法：

*   编写一个`ClassLoader`加载这些类中的任何一个。问题是我无法获得`byte[]`表示对象的方法，因为它位于`HashMap`. 而且我不能用`mapBundle.getSerializable()`它来获取它，因为它恰好抛出`ClassNotFound`异常。

*   传递一些额外的信息，这样我就可以知道`HashMap`. 除了这看起来是冗余信息之外，仍然不行，因为如果我在 Bundle 上设置一个类加载器，它仍然会`ClassNotFound`在其他类上抛出异常......

我真的很感激在这个问题上的一些帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:36:34.037

其实[这](https://stackoverflow.com/questions/11505675/understanding-classloaders-in-java)回答了我的问题。我必须获得对我的 ClassLoader 的引用，然后将其设置为反序列化，我认为这是通过另一个线程完成的，可能是系统线程，因此它不知道我的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:15:36.353

我认为最好的解决方案是重新考虑您的计划，以拥有对象的哈希图并根据哈希图中的键将它们转换为真实对象。

通过这样做，您将不会真正利用 java 为您提供的类型安全性，并且您还将从 HashMap 中获得额外的开销。

相反，我建议将事件实现为接口，并让每种类型的事件都实现该接口。

这样，类中的“数据”变量可以用描述性名称重命名（这使代码更易于阅读），并且您不必存储任何冗余数据。

# c# - 单元测试 Sitecore LicenseManager

> ID：11503985
> 
> 赞同：2
> 
> 时间：2012-07-16T12:08:35.510
> 
> 标签：c#, unit-testing, sitecore

我正在尝试使用 Sitecore api 进行单元测试。我在 Visual Studio 的解决方案中获得了一个单元测试项目 (MSTest)。我将 configSections、connectionStrings、appSettings、sitecore、log4net 元素从我的 web.config 复制到我的 app.config。

我要运行的测试是：

```
Sitecore.Context.Database = Factory.GetDatabase("master");
Item a = Sitecore.Context.Database.GetItem("/sitecore/content/Home");
Assert.IsFalse(a.HasChildren); 
```

我在 app.config 文件中定义了我的数据文件夹，并且我的核心、主数据库和 Web 数据库的连接字符串也在 app.config 中设置。

抛出的异常是：

```
System.TypeInitializationException: The type initializer for 'Sitecore.SecurityModel.License.LicenseManager' threw an exception. ---> System.IO.FileNotFoundException: Could not load file or assembly 'file:///c:\inetpub\bin\Sitecore.Nexus.dll' or one of its dependencies. The system cannot find the file specified.=== Pre-bind state information ===
LOG: User = NT AUTHORITY\SYSTEM
LOG: Where-ref bind. Location = c:\inetpub\bin\Sitecore.Nexus.dll
LOG: Appbase = file:///C:/BuildAgent/temp/buildTmp/SYSTEM_E1259 2012-07-16 14_42_19/Out
LOG: Initial PrivatePath = NULL
Calling assembly : (Unknown).
===
LOG: This bind starts in LoadFrom load context.
WRN: Native image will not be probed in LoadFrom context. Native image will only be probed in default load context, like with Assembly.Load().
LOG: Using application configuration file: C:\BuildAgent\temp\buildTmp\SYSTEM_E1259 2012-07-16 14_42_19\Out\foo.bar.Framework.Tests.Core.DLL.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Attempting download of new URL file:///c:/inetpub/bin/Sitecore.Nexus.dll. 
```

奇怪的是，当我使用“在当前上下文中运行测试”运行它时，我没有得到异常。当我在 TeamCity 或使用“在解决方案中运行所有测试”运行它时，我得到了异常。显然该文件不在 c:/inetpub/bin/Sitecore.Nexus.dll

谁能告诉我我做错了什么？

**编辑**

当我添加一个 HttpSimulator 时，错误消失了。发生另一个错误：

```
Test method foo.Bar.Framework.Tests.Core.UnitTest1.TestMethod1 threw exception: 
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.TypeInitializationException: The type initializer for 'Sitecore.Services.Heartbeat' threw an exception. ---> System.InvalidOperationException: Could not read Sitecore configuration. 
```

正在读取的设置是“HeartbeatInterval”，这个设置在我的 app.config 中。当我将 Settings.GetSetting("HeartbeatInterval") 添加到我的快速手表时，它会返回正确的值。就像 sitecore.kernel 无法访问 app.config 一样？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:52:23.580

正如您在“编辑”下方看到的那样：我没有使用 HttpContext，我可以在其中设置 webroot 的本地路径。在我这样做之后，我解决了最初的问题

# windows - 使用 ffmpeg 在现有视频上放置黑盒图像

> ID：11503997
> 
> 赞同：0
> 
> 时间：2012-07-16T12:09:03.713
> 
> 标签：windows, opencv, ffmpeg, blob

我正在使用 blob 跟踪器，但在视频文件上有时间码。我想在它上面覆盖一个黑框，从而防止时间码干扰跟踪器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T20:54:21.290

通过[FFmpeg docs for overlay](http://ffmpeg.org/ffmpeg.html#overlay-1)，你会想要类似的东西：

```
ffmpeg.exe -i in -vf "color=black:20x10 [over]; [in][over] overlay=5:5 [out]" out 
```

必要时用盒子的宽度 x 高度和时间戳的位置替换`20x10`和。`5:5`

# python - Python中的MATLAB interp2函数

> ID：11503998
> 
> 赞同：2
> 
> 时间：2012-07-16T12:09:05.010
> 
> 标签：python, matlab, scipy, linear-algebra, interpolation

我需要一个等效于**interp2** MATLAB 函数的 Python。我试图让这个[MATLAB 示例](http://www.mathworks.it/help/techdoc/ref/interp2.html)在 Python 中工作，但我做不到。

```
import numpy as np

from scipy.interpolate import interp2d
from scipy.interpolate import RectBivariateSpline

service = np.array(range(10, 31, 10))
years = np.array(range(1950, 1991, 10))

wage = np.array([[150.6970,199.5920,187.6250],
    [179.3230, 195.0720, 250.2870],
    [203.2120, 179.0920, 322.7670],
    [226.5050, 153.7060, 426.7300],
    [249.6330, 120.2810, 598.2430]])

ip = RectBivariateSpline(years, service, wage)

print(ip(15, 1975)) 
```

但是我得到了这个我无法解决的错误（在 RectBivariateSpline 中）：

```
 Traceback (most recent call last):
  File "/Users/andrea/Documents/workspace/PythonProjects/pyArmBot/src/foo.py", line 15, in <module>
    ip = RectBivariateSpline(years, service, wage)
  File "/Library/Python/2.7/site-packages/scipy-0.10.1-py2.7-macosx-10.7-intel.egg/scipy/interpolate/fitpack2.py", line 728, in __init__
    kx,ky,s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:34:05.503

我相信您需要通过使用以下行而不是您的打印行来调用 ip 来返回一个值。

`print(ip.ev(15, 1975))`

更新：

很容易调整。并盯着我的脸。您可以设置 kx 和 ky 的值，它们是二元样条的度数[请参阅此处的文档](http://gaezipserver.appspot.com/python/sci/scipy/generated/scipy.interpolate.RectBivariateSpline.html)

无论如何，只需将行调整为：

`ip = RectBivariateSpline(years, service, wage, kx=2, ky=2)`

如果你不想，你不需要调整 kx。如果您将 kx 保留为 3，我怀疑它会大大改变插值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T10:51:07.100

blueSurfer，我认为您设置插值的方式将获得正确的结果，`ip(1975, 15)`而不是相反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T14:30:34.877

我遇到了同样的问题，并发现`scipy.ndimage.map_coordinates`它与`Vq = interp2(V,Xq,Yq)`. 请阅读这些命令的文档以找出适合您情况的解决方案。

试试这个 Matlab 的`Vq = interp2(V,Xq,Yq)`：

```
Vq = scipy.ndimage.map_coordinates(V, [Xq.ravel(), Yq.ravel()], order=3, mode='nearest').reshape(V.shape) 
```