# StackOverflow 问答 10640000-10640999

# telephony - Dialogic - 如何为拨出电话设置我的 BTN（计费电话号码）

> ID：10640001
> 
> 赞同：0
> 
> 时间：2012-05-17T16:50:32.243
> 
> 标签：telephony

我有一个使用带有 PRI 电话线的 Dialogic 语音板的应用程序。我们代表学校拨打电话并欺骗来电显示以获取学校的电话号码以显示。在拨打外线电话时，我们在 gc_makecallblk.isdn.origination_phone_number 中设置了学校的电话号码。这很好用。

问题是我们的电话供应商在确定计费费率时使用来电显示号码，因此我们的大多数电话都按州内电话计费，费用更高。供应商告诉我，我需要设置 BTN（计费电话号码，他也称之为 ANI，但我认为这是一个更通用的术语）以获得正确的州外计费费率。

我搜索了 Dialogic 的 API 文档，但找不到任何有关设置 BTN 的信息。那里有知道如何设置它的对话/电话专家吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:46:47.390

您在谈论什么协议，这是在 TDM 还是 VoIP 上？我是 Aculab 专家，我们有与 Dialogic 类似的产品，所以也许我可以提供帮助。

您可能只需要设置“国内/国际”呼叫参数或编辑 ANI（也称为 CLI）。您可以分享的信息越多越好。

*   ChrisL@Aculab

# jsf-2 - 在 p:printer 中定位 ap:tabView 的特定选项卡

> ID：10640004
> 
> 赞同：2
> 
> 时间：2012-05-17T16:50:35.027
> 
> 标签：jsf-2, primefaces

我正在尝试打印多个选项卡，但想排除一些。

我尝试了以下方法：

```
<p:printer target="tabs:tab0,tabs:tab2" /> 
```

和

```
<p:printer target="tabs:tab0" />
<p:printer target="tabs:tab2" /> 
```

都没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:30:21.190

*我玩了一些它，如果选项卡可见*，它仅适用于特定选项卡。因此，您绝对不能指定多个选项卡。您可能想向 PrimeFaces 发布有关该问题的[问题报告](http://code.google.com/p/primefaces/issues/)，尽管解决该问题相对困难。

到目前为止，要使其适用于特定选项卡，您需要在`onclick`执行打印操作之前切换按钮处理程序中可见的所需选项卡。您可以为此使用小部件的`select()`功能，`<p:tabView>`其中您传递从零开始的选项卡索引。

这是一个启动示例。

```
<h:form id="form">
    <p:tabView id="tabs" widgetVar="tabs">
        <p:tab id="tab1" title="tab1">tab1</p:tab>
        <p:tab id="tab2" title="tab2">tab2</p:tab>
        <p:tab id="tab3" title="tab3">tab3</p:tab>
    </p:tabView>
    <p:commandButton type="button" icon="ui-icon-print" value="Print tab2" onclick="tabs.select(1)">
        <p:printer target="tabs:tab2" />
    </p:commandButton>
</h:form> 
```

# php - preg_match 杀死页 面

> ID：10640007
> 
> 赞同：1
> 
> 时间：2012-05-17T16:50:40.637
> 
> 标签：php, regex, preg-match, pcre

我正在使用 preg_match 在文件中查找和删除经过评估的 base64 编码病毒。

下面的正则表达式：

```
/\s*eval\s*\(\s*base64_decode\s*\(\s*('[a-zA-Z0-9\+\/]*={0,2}'|"[a-zA-Z0-9\+\/]*={0,2}")\s*\)\s*\s*\)\s*(;)?\s*/ 
```

匹配以下代码：

```
eval(base64_decode("BASE64+ENCODED+VIRUS+HERE")); 
```

上面的正则表达式工作正常。

我想匹配通过连接换行的 base64 字符串。所以它也应该匹配以下内容 "BASE64+EN" 。“编码+病毒+这里”。

所以我将正则表达式更改为：

```
/\s*eval\s*\(\s*base64_decode\s*\(\s*\'([a-zA-Z0-9\+\/]*(\'\s*\.\s*\')?[a-zA-Z0-9\+\/]*)*={0,2}\'|"([a-zA-Z0-9\+\/]*("\s*\.\s*")?[a-zA-Z0-9\+\/]*)*={0,2}"\s*\)\s*\s*\)\s*(;)?\s*/ 
```

找到部分匹配项：

```
"BASE64+ENCODED+VIRUS+HERE")); 
```

但是当我尝试在整个文件上应用匹配时：http: [//pastebin.com/ED8sFUP0](http://pastebin.com/ED8sFUP0)页面因浏览器消息“在页面加载时与服务器的连接已重置。”而死掉。

我已激活错误报告：

```
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('scream.enabled', TRUE); 
```

但是这里没有任何显示，也没有出现在 apache 的错误日志中。

在不包含违规字符串的文件上使用相同的正则表达式按预期工作；preg_match 不返回布尔值 false 它返回 0 表示没有正则表达式错误并且它没有找到任何匹配项。

我担心的不一定是为什么正则表达式只能找到部分匹配。这可能是我犯的一些错字，碰巧起作用了。

我想知道正则表达式编译器何时以及如何失败破坏整个进程链

```
apache > php > regex_compiler 
```

我知道这很可能是“因为”我的正则表达式恰好编译正确但不正确匹配。它可能会导致一些不好的事情发生。但我的兴趣是为什么正则表达式编译器失败且没有错误，以及如何获得应该产生的错误消息。

此处讨论了类似但未解决的问题：[php preg_match_all kills page for unknown reason](https://stackoverflow.com/questions/9447837/php-preg-match-all-kills-page-for-unknown-reason)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:57:57.233

**编辑：**

```
 \s*
 eval \s*
 \( \s*
    base64_decode \s* 
    \( \s* 
        (?:
            (?>
               '
                 [a-zA-Z0-9+/]*
                 (?:
                    '
                      \s* \. \s*
                    '
                    [a-zA-Z0-9+/]*
                 )*
                 ={0,2}
               '
            )
          |
            (?>
               "
                 [a-zA-Z0-9+/]*
                 (?:
                    "
                      \s* \. \s*
                    "
                    [a-zA-Z0-9+/]*
                 )*
                 ={0,2}
               "
            )
        )
        \s*

    \)\s*

 \)\s* ;? \s* 
```

**如何处理 "".'' 连接**

你没有试图解析语言（你不能这样做），所以你可以 用这个非常快速的正则表达式
处理连接条件......`"".''`

```
~
 \s*
 eval \s*
 \( \s*
    base64_decode
    \s* 
    \(
       \s* 
        ["']
        (?> [a-zA-Z0-9+/]* (?: ["']\s*\.\s*["'] [a-zA-Z0-9+/]* )* )
        ={0,2}
        ["']
       \s*
    \)
    \s*
 \)
 \s* ;? \s*

~x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:45:18.160

我认为您的正则表达式有很多可能性来匹配 ==> [Catastrophic Backtracking](http://www.regular-expressions.info/catastrophic.html)。

```
/\s*eval\s*\(\s*base64_decode\s*\(\s*\'([a-zA-Z0-9\+\/]*(\'\s*\.\s*\')?[a-zA-Z0-9\+\/]*)*={0,2}\'|"([a-zA-Z0-9\+\/]*("\s*\.\s*")?[a-zA-Z0-9\+\/]*)*={0,2}"\s*\)\s*\s*\)\s*(;)?\s*/
                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

正则表达式需要很多步骤来匹配我标记的部分**==> 你有性能问题，正则表达式没有及时完成！**

由于`(\'\s*\.\s*\')?`是可选的，因此您需要很多步骤，直到正则表达式找出与`[a-zA-Z0-9\+\/]*`可选部分之前和之后的相同内容匹配的内容。

您可以做的是使用[**所有格量词**](http://www.regular-expressions.info/possessive.html)（通过在量词之后添加 a 来使量词具有所有格`+`）。它们防止回溯，并且所有格量词不会返回匹配的字符。所以，试试这个

```
/\s*eval\s*\(\s*base64_decode\s*\(\s*\'([a-zA-Z0-9\+\/]*+(\'\s*\.\s*\')?[a-zA-Z0-9\+\/]*+)*={0,2}\'|"([a-zA-Z0-9\+\/]*+("\s*\.\s*")?[a-zA-Z0-9\+\/]*+)*={0,2}"\s*\)\s*\s*\)\s*(;)?\s*/
                                                       ^^                               ^^                           ^^                            ^^ 
```

# ajax - 如何在模板 xhtml 页面中重新呈现 div

> ID：10640018
> 
> 赞同：1
> 
> 时间：2012-05-17T16:51:08.957
> 
> 标签：ajax, jsf, richfaces

我在使用用户数据呈现页面时遇到问题。

有一个模板 .xhtml 看起来像这样：

```
<h:body>
    <div id="page">

        <div id="content">
            <ui:insert name="content">Content</ui:insert>
        </div>          
        <div id="right_area">
            <ui:insert name="right_area">
                <ui:include src="../../user/showUser.xhtml" />
            </ui:insert>
        </div>
    </div>
</h:body> 
```

showUser.xhtml 显示了一些我想更新的用户数据

在内容 div 中，我有一个带有命令按钮的表单来更新数据

```
<h:commandButton type="submit"
id="update" 
action="#{Bean.updateData}"
reRender="right_area">
</h:commandButton> 
```

在我单击按钮后，数据库会更新，但“right_area”不会重新呈现。我也试过：

```
<h:commandButton type="submit"
id="update" 
action="#{Bean.updateData}">
<a4j:ajax execute="update" render="right_area"/>
</h:commandButton> 
```

我没有收到错误消息任何指向正确方向的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:59:34.633

如果你想通过 JSF 重新渲染它，你需要使用一个完整的 JSF 组件而不是一个普通的 HTML 元素。你可以`<h:panelGroup layout="block">`用来渲染一个`<div>`.

此外，您的客户端 ID 是相对于当前命名容器（`<h:form>`在您的情况下）进行解释的。它正在寻找`id="right_area"`在 的上下文中的组件`<h:form>`，但它不存在。您需要指定一个绝对 ID，以默认命名容器分隔符开头`:`，因此`render=":right_area"`.

最后，`<h:commandButton>`没有`reRender`属性，您对旧的 RichFaces 3.x 感到困惑`<a4j:commandButton>`。您应该使用`<a4j:commandButton render>`, or `<f:ajax render>`or`<a4j:ajax render>`代替。

所以，总结

```
<h:panelGroup id="right_area" layout="block">
    <ui:insert name="right_area">
        <ui:include src="../../user/showUser.xhtml" />
    </ui:insert>
</h:panelGroup> 
```

和

```
<h:commandButton ...>
    <a4j:ajax execute="update" render=":right_area"/>
</h:commandButton> 
```

应该做。

# javascript - 在 Rails 3.2 中使用 Twitter Bootstrap 的“bootstrap-popover.js”启用弹出框

> ID：10640021
> 
> 赞同：2
> 
> 时间：2012-05-17T16:51:17.057
> 
> 标签：javascript, twitter-bootstrap, ruby-on-rails-3.2

Ruby on Rails 和 Twitter Bootstrap 的新手：P

尝试向图像添加弹出框，当您滚动它时，会出现带有较大版本图像的弹出框。

图片：

```
<ul class="thumbnails">
  <div class="span1">
    <ul>
     <li>
      <a href="#" class="thumbnail"><img src="http://placehold.it/125x100" alt=""></a>
     </li>
  </div>
    </ul> 
```

我正在尝试通过将“bootstrap-popover.js”和“bootstrap-tooltip.js”（它扩展）添加到我的资产目录中的适当文件夹（使用 Rails 3.2）来使用 Twitter Bootstrap 的“Popovers”。

如果我想激活它，以便在我滚动图像时弹出窗口起作用，我该怎么做？

我真的只是不确定如何调用弹出框的特定元素来处理。

![我正在努力实现的目标:)](../Images/ecdd353ce708a93d0dd2fce650f5a9f0.png)

非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:28:07.487

将此 javascript 语句放在您链接 javascript 文件的任何位置之后。这将激活所有“a”元素（页面中的链接）的弹出框。

```
$('a').popover(placement:'top'); 
```

试试这个代码来测试一下。在链接标签中设置 rel、title 和 data-content 属性将激活该元素上的弹出框。

```
<ul class="thumbnails">
  <div class="span1">
    <ul>
     <li>
      <a href="#" rel="popover" title="A Title" data-content="<img src='http://placehold.it/125x100'/>">Hover over me for image.</a>
     </li>
  </div>
</ul> 
```

# wpf - 使用拆分器后如何重置网格行高？

> ID：10640023
> 
> 赞同：6
> 
> 时间：2012-05-17T16:51:20.650
> 
> 标签：wpf

使用以下 XAML，当您取消选中该复选框时，底行将隐藏。一切都很好，直到你用 gridsplitter 调整它的大小。然后选中/取消选中复选框不会做任何事情。鉴于转换器将高度设置为 0，我希望该行隐藏。这是怎么回事？移动分离器后如何重置高度？

```
<Grid>
    <Grid.Resources>
        <m:CheckedToLengthConverter x:Key="checkedToLengthConverter" />
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition Height="3*" />
        <RowDefinition Height="{Binding Mode=OneWay, ElementName=ShowBottomCheckBox, Path=IsChecked, Converter={StaticResource checkedToLengthConverter}, ConverterParameter=2}" />
    </Grid.RowDefinitions>
    <Border Background="Blue" />
    <CheckBox Name="ShowBottomCheckBox" IsChecked="True" />
    <GridSplitter HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Height="5" />
    <Border Background="Red" Grid.Row="1" />
</Grid> 
```

转换器：

```
public class CheckedToLengthConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if ((bool)value)
            return new GridLength(int.Parse(parameter.ToString()), GridUnitType.Star);

        return new GridLength(0, GridUnitType.Pixel);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T17:10:21.350

问题是，一旦您移动拆分器，第一行将具有明确的宽度，因此将最后一行设置回 * 不会有任何效果。经过一些实验，我想出了下面的代码。请注意，您需要指定 TwoWay 绑定，否则它将不起作用。

```
public class CheckedToLengthConverter : MarkupExtension, IValueConverter
{
    public GridLength TrueValue { get; set; }
    public GridLength FalseValue { get; set; }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return System.Convert.ToBoolean(value) ? TrueValue : FalseValue;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return Binding.DoNothing;
    }

    #region Overrides of MarkupExtension

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }

    #endregion
}

<Grid>
    <Grid.Resources>
        <m:CheckedToLengthConverter TrueValue="2*" FalseValue="*" x:Key="c1" />
        <m:CheckedToLengthConverter TrueValue="3*" FalseValue="0" x:Key="c2" />
    </Grid.Resources>

    <Grid.RowDefinitions>
        <RowDefinition Height="{Binding Mode=TwoWay, Path=IsChecked, 
                       ElementName=ShowBottomCheckBox, 
                       Converter={StaticResource c1}}"/>
        <RowDefinition Height="auto"/>
        <RowDefinition Height="{Binding Mode=TwoWay, Path=IsChecked, 
                       ElementName=ShowBottomCheckBox, 
                       Converter={StaticResource c2}}"/>
    </Grid.RowDefinitions>
    <Border Background="Blue" />
    <CheckBox Name="ShowBottomCheckBox" IsChecked="True" />
    <GridSplitter HorizontalAlignment="Stretch" 
                  Grid.Row="1" VerticalAlignment="Bottom" Height="5" 
                  ResizeBehavior="PreviousAndNext" />
    <Border Background="Red" Grid.Row="2" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T04:50:06.587

这是 UX 问题的家伙，而不是代码。您尝试做的事情毫无意义，您是否尝试过使用视觉状态？

# java - 写入数据库表

> ID：10640028
> 
> 赞同：3
> 
> 时间：2012-05-17T16:51:32.140
> 
> 标签：java, sql, database, file-io

我正在尝试将新记录写入两个名为**item**和**supplier**的数据库表。

我有一个处理数据库连接和 SQL 语句的类。我在一个名为 ItemEntryScreen 的类中使用了一个大型表单，其中我使用了以下内容：

```
private void writeItemRecord()
{
     if ( DataBaseHandler.makeConnectionTofireplaceDB() == -1)
       {
           JOptionPane.showMessageDialog (frame, "Unable to connect to database table (Item)");
       }
     else  // Ok, so first read data from the text fields
       {
           // Read data from form and store data     
           String suppliercode = suppliercodeTxtField.getText();
           String suppliername = suppliernameTxtField.getText();
           String address = addressTxtField.getText();

           // Create a Item oject
           Item item = new Item();

           // Set the attributes for the Item object
           item.setSuppliercode(suppliercode);
           item.setSuppliername(suppliername);
           item.setAddress(address);

           // Write Item record.  Method writeToItemTable() returns
           // 0 of OK writing record, -1 if there is a problem.  I store
           // the returned value in a variable called error.
           int error = DataBaseHandler.writeTosupplierTable(item.getSuppliercode(),item.getSuppliername(),item.getAddress());

           // Check if there is a problem writing the record, in 
           // which case error will contain -1                                         
           if (error == -1)
             {
                 JOptionPane.showMessageDialog (frame, "Problem writing record to Item Table");
             }

          // Clear the form - actual method is coded below
          clearForm();

          // Close database connection.  Report an error message
          // if there is a problem.
          if ( DataBaseHandler.closeConnection() == -1 )
             {
                 JOptionPane.showMessageDialog (frame, "Problem closing data base conection");
             }
        }
    }                    

/**
 *  Method to write a Item record
*/
private void writesupplierRecord()
{
     // Check to see if we can connect to database table
     if ( DataBaseHandler.makeConnectionTofireplaceDB() == -1)
       {
           JOptionPane.showMessageDialog (frame, "Unable to connect to database table (Item)");
       }
     else  // Ok, so first read data from the text fields
       {
           // Read data from form and store data     

           String itemname = itemnameTxtField.getText();
           String itemcode = itemcodeTxtField.getText();
           String description = descriptionTxtField.getText();
           String unitprice = unitpriceTxtField.getText();
           String style = styleTxtField.getText();
           String finish = finishTxtField.getText();
           String stock = stockTxtField.getText();

           // Convert priceStr to a float
           Float fvar = Float.valueOf(unitprice);
           float newprice = fvar.floatValue();

           Float svar = Float.valueOf(stock);
           float newstock = svar.floatValue();

           // Create a Item oject
           Item item = new Item();

           // Set the attributes for the Item object
           item.setItemname (itemname);
           item.setItemcode (itemcode);
           item.setDescription (description);
           item.setUnitprice (newprice);
           item.setStock(newstock);
           item.setStyle(style);
           item.setFinish(finish);

           // Write Item record.  Method writeToItemTable() returns
           // 0 of OK writing record, -1 if there is a problem.  I store
           // the returned value in a variable called error.
           int error = DataBaseHandler.writeToitemTable(item.getItemname(),
                                                        item.getItemcode(),
                                                        item.getDescription(),
                                                        item.getUnitprice(), 
                                                        item.getStock(),
                                                        item.getStyle(),
                                                        item.getFinish()
                                                        );

           // Check if there is a problem writing the record, in 
           // which case error will contain -1                                         
           if (error == -1)
             {
                 JOptionPane.showMessageDialog (frame, "Problem writing record to Item Table");
             }

          // Clear the form - actual method is coded below
          clearForm();

          // Close database connection.  Report an error message
          // if there is a problem.
          if ( DataBaseHandler.closeConnection() == -1 )
             {
                 JOptionPane.showMessageDialog (frame, "Problem closing data base conection");
             }
        }

 }  // End 
```

上面的代码编译！

```
static public int writeToitemTable(String itemnameIn, String itemcodeIn, String descriptionIn,
                                        float unitpriceIn, float stockIn, String styleIn, String finishIn)
    {
          // Variable to hold the SQL query
          String SQLString;

          // Build a string containing the SQL INSERT instruction to be used later
          SQLString = "INSERT INTO item VALUES ('" + itemcodeIn + "','" + itemnameIn + "','" + descriptionIn + "','" + unitpriceIn + "','" 
                                            + stockIn + "','" + styleIn + "','" + finishIn + "')";

           try
              {
                    // The createStatement() method creates a Statement object.  Object will be
                    // attached to my reference variable (statement) defined at the top of class.
                    statement = connectionTofireplaceDB.createStatement();

                    // The executeUpdate() statement can be used here to execute an 
                    // SQL INSERT instruction.
                    statement.executeUpdate (SQLString);

              }
            catch (SQLException exception)
              {
                   return (-1);     // Return -1 if problem writing record to file

              }

            return (0);   // Return with 0 if record successfully written 

      } // End

  static public int writeTosupplierTable(String suppliernameIn, String suppliercodeIn, String addressIn)
    {
          // Variable to hold the SQL query
          String SQLString;

          // Build a string containing the SQL INSERT instruction to be used later
          SQLString = "INSERT INTO supplier VALUES ('" + suppliernameIn + "','" + suppliercodeIn + "','" + addressIn + "')";

           try
              {
                    // The createStatement() method creates a Statement object.  Object will be
                    // attached to my reference variable (statement) defined at the top of class.
                    statement = connectionTofireplaceDB.createStatement();

                    // The executeUpdate() statement can be used here to execute an 
                    // SQL INSERT instruction.
                    statement.executeUpdate (SQLString);

              }
            catch (SQLException exception)
              {
                   return (-1);     // Return -1 if problem writing record to file

              }

            return (0);   // Return with 0 if record successfully written 

      } // End 
```

当我在表单中输入详细信息并点击提交按钮时，我得到的返回值为 -1，这会导致显示一个消息框，指出写入数据库时​​出现问题。为什么？

**更新**

这些是我可以获得的错误消息：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at ItemEntryScreen.writeItemRecord(ItemEntryScreen.java:392)
    at ItemEntryScreen.actionPerformed(ItemEntryScreen.java:348)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at   javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6038)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3265)
    at java.awt.Component.processEvent(Component.java:5803)
    at java.awt.Container.processEvent(Container.java:2058)
    at java.awt.Component.dispatchEventImpl(Component.java:4410)
    at java.awt.Container.dispatchEventImpl(Container.java:2116)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4322)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3986)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3916)
    at java.awt.Container.dispatchEventImpl(Container.java:2102)
    at java.awt.Window.dispatchEventImpl(Window.java:2429)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:273)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:183)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:173)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:168)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:160)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:121) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:01:11.190

首先，打印堆栈跟踪以查找错误。

其次，我看到人们因为“声明”而遇到这些麻烦。在值即将更改的地方使用“PreparedStatement”。如果您执行第二个建议，您的问题很可能会得到解决

三、使用 finally() 块之类的关闭连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:45:58.057

看看我下面的代码，并尝试在此处实现它....我希望它会运行顺利..一旦您开始获得所需的查询结果，请将其修改为您的心脏内容以进行进一步的研发。

```
import java.sql.Connection;

import java.sql.DriverManager;

import java.sql.PreparedStatement;

import java.sql.ResultSet;

import java.sql.ResultSetMetaData;

import java.sql.SQLException;

import java.sql.Statement;

import java.util.Vector;

import javax.swing.JTable;

import com.my.views.*;

public class DBDiary {

    Connection conn;
    EntryDisplay entryD;

    public DBDiary(){

        this.getConn();

    }

    public Connection getConn(){

        try {
            conn = getConnection();

        } catch (SQLException e) {

            System.out.println("Connection Couldnt be Obtained");
        }
           return conn;
    }

    public static Connection getConnection() throws SQLException {

        String drivers = "com.mysql.jdbc.Driver";
        String url = "jdbc:mysql://localhost:3306/test";
        String username = "root";
        String password = "root";

        System.setProperty(drivers,"");

        return DriverManager.getConnection(url,username,password);

    }

    public void createTable() {

        Statement stat = null;
        String sql = "create table items(item varchar(30), cost DOUBLE(12,3),day integer,month varchar(15), year integer);";
        if (conn != null){

            try {

                 stat = conn.createStatement();

            } catch (SQLException e) {

                System.out.println("Connection Couldnt be Obtained");
            }

            if (stat != null){

                try {
                    stat.executeUpdate(sql);
                } catch (SQLException e) {
                    //System.out.println("Table already Exists");
                }       
            }

        }
    }

    public void addItems(String item, double cost,int day, String month, int year) {

        PreparedStatement pstat = null;

        String sql = "INSERT INTO ITEMS Values(?,?,?,?,?);";

        if (conn != null){

            try {

                 pstat = conn.prepareStatement(sql);

            } catch (SQLException e) {

                System.out.println("Connection Couldnt be Obtained");
            }

        }

        if (pstat != null) {

            try {

                 pstat.setString(1, item);
                 pstat.setDouble(2, cost);
                 pstat.setInt(3, day);
                 pstat.setString(4, month);
                 pstat.setInt(5,year);
                 pstat.executeUpdate();

            } catch (SQLException e) {

                e.printStackTrace();
                System.out.println("Insertion of the entry was unsuccessful");
            }
        }

    }

    public static void main(String[] args) {

    DBDiary db = new DBDiary();
    db.createTable();
    db.addItems("Cards", 40.00,29, "Mar", 2012);

    } 
```

# java - Java escpos 字符集编码

> ID：10640030
> 
> 赞同：2
> 
> 时间：2012-05-17T16:51:39.557
> 
> 标签：java, encoding, character-encoding

我必须打印一个原始文本打印机，我必须在其中设置代码页字符集。我发现最适合我的应用程序的字符集是 IBM858。现在的问题是将字符串编码到此代码页。

我试过这个：

```
test = new String("#$@°\\è^ùàòèì\n".getBytes(),"Cp858");
file.write(test.getBytes()); 
```

但字符不匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-23T08:38:18.310

使用处理国际字符集的 ESC/POS 打印机，您必须：

*   **设置打印机的代码页**：例如`ESC t 40`会选择代码页`ISO8859-15`。即在Java中`outputStream.write( new byte[]{ 0x1B, 0x74, 40 } );`
*   **使用相同的代码页对要打印**的字符串进行编码：**`outputStream.write(theStringToPrint.getBytes("ISO8859-15"));`**

 **您必须使用您的特定打印机检查可用的代码页和要在`ESC t n`命令中使用的编号。[EPSON ESC/POS 文档](https://reference.epson-biz.com/modules/ref_escpos/index.php?content_id=32)`ESC t`列出了可用于 EPSON 打印机的代码页。

对于 EPSON 打印机，有用的文档可在[TM 打印机的字符代码表](https://reference.epson-biz.com/modules/ref_charcode_en/index.php?content_id=1)页面中找到。检查`Single-byte Characters/Code Pages`部分。

**不要使用国际字符集**和`ESC r n`命令：它将替换一些 ASCII 字符以便能够用 ASCII 代码页打印一些国际字符，它已经过时了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:58:34.587

这会将 UTF-16 字符串编码为 Cp858：

```
file.write("#$@°\\è^ùàòèì\n".getBytes("Cp858")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:36:15.857

使用原始文本打印机打印我完全解决了这个问题：

```
new PrintStream(stream,true,"Cp858") 
```

然而随着

```
file.write("#$@°\\è^ùàòèì\n".getBytes("Cp858")); 
```

打印机遗漏了一些字符，我不知道是打印机还是 java 问题。**

# javascript - 如何配置 Firefox 以允许 Javascript 拦截从剪贴板粘贴的值？

> ID：10640036
> 
> 赞同：15
> 
> 时间：2012-05-17T16:51:59.597
> 
> 标签：javascript, firefox, windows-vista, configuration-files, onpaste

当用户从剪贴板粘贴时，我需要过滤掉某些字符。（我实际上并不想修改剪贴板中的内容。）我已经在 IE 中使用它。*叹息*...

**tl;dr：** **user.js**`capability.policy`中的项目使其进入**prefs.js**但未生效。

 ****仅供参考，我可以合理地让所有用户安装**user.js**。但是我们都没有对我们机器的管理员访问权限，所以这就是我在配置方面所能做的所有事情。

谢谢你的帮助！

**笔记：**

1.  出于这个问题的目的，我不想“绕过”访问剪贴板——
    例如，我不想在粘贴发生 *后对 DOM 元素的值进行操作*
2.  我不想要一个需要[框架/库](https://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks)的解决方案（如 jQuery、Dojo、Prototype、YUI，...）

**遵循的步骤**

1.  通过转到 URL **about:support** => Profile Directory =>确定我的**个人资料文件夹的位置****`Open Containing Folder`** 
2.  ***尝试*通过使用以下行 创建**user.js**[在 Firefox](https://developer.mozilla.org/en/Midas/Security_preferences)中启用剪贴板： **```
    user_pref("just.mike", "测试 user.js 是否有效。");
    user_pref("capability.policy.policynames", "allowclipboard");
    user_pref("capability.policy.allowclipboard.sites", "https://my-site.com");
    user_pref("capability.policy.allowclipboard.Clipboard.cutcopy", "allAccess");
    user_pref("capability.policy.allowclipboard.Clipboard.paste", "allAccess");

    ```

    *注意：https://my-site.com 不是真实站点。***** 
3.  ****事实证明，使用**about:config看***不到*`capability.policy`这些项目——由于[Bugzilla 错误 284673——about:config 隐藏了“capability.policy”首选项](https://bugzilla.mozilla.org/show_bug.cgi?id=284673)。但是，我确实认为这些**user.js**项目“有效”并且该文件位于正确的文件夹中，因为之后： ******   **about:config**显示`just.mike`条目
    *   **prefs.js**包含所有新行*，但顺序不同*——按字母顺序排列：

        ```
        user_pref("capability.policy.allowclipboard.Clipboard.cutcopy", "allAccess");
        user_pref("capability.policy.allowclipboard.Clipboard.paste", "allAccess");
        user_pref("capability.policy.allowclipboard.sites", "https://my-site.com");
        user_pref("capability.policy.policynames", "allowclipboard");
        *...*
        user_pref("just.mike", "测试 user.js 是否有效。");

        ```

    （仅供参考，我也尝试`Zallowclipboard`了所有地方，以便该`policynames`行由于字母顺序排在第一位，但这也不起作用。）********* 
4.  ******在发生以下事件后*尝试*在 Firefox中[**读取**剪贴板](https://developer.mozilla.org/en/Using_the_Clipboard#Pasting_Clipboard_Contents)`onpaste`：

    ```
    var 剪贴板 = Components.classes["@mozilla.org/widget/clipboard;1"].getService(Components.interfaces.nsIClipboard);
    如果（！剪贴板）{
        throw new Error('内部错误 -- 无法创建剪贴板对象');
    }

    var transferable = Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);
    如果（！可转让）{
        throw new Error('内部错误——无法创建可转移对象');
    }

    transferable.addDataFlavor("text/unicode");
    clipboard.getData（可转移，clipboard.kGlobalClipboard）；

    var clipboard_data = new Object();
    var clipboard_length = new Object();

    transferable.getTransferData("text/unicode", clipboard_data, clipboard_length);

    var 剪贴板文本 = '';
    如果（！！剪贴板数据）{
        var clipboard_nsISupportsString = clipboard_data.value.QueryInterface(Components.interfaces.nsISupportsString);
        clipboard_text = clipboard_nsISupportsString.data.substring(0, clipboard_length.value / 2);
    }

    返回（剪贴板文本）；

    ```****** 
5.  *******代码在第一*行失败，在 Firebug 控制台中返回此错误：

    ```
    <https://my-site.com> 获取属性 XPCComponents.classes 的权限被拒绝

    ```

    *注意：我实际上是在真实的 URL 上运行它，它确实显示在错误消息中——我只是在这里将它更改为一个虚拟名称。******* 
6.  ******我还看到了[一些](https://stackoverflow.com/questions/7713182/copy-to-clipboard-for-all-browsers-using-javascript)其他示例，`createInstance`在第一行而不是`getService`，但*第一*行仍然生成相同的错误文本：

    ```
    var clipboard = Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);
    // *...*

    ```****** 

 ********环境** *（这是我无法控制的）*

*   没有管理员访问计算机的权限
*   视窗
*   火狐浏览器 10

**参考**

*   [在 Firefox 中启用剪贴板](https://developer.mozilla.org/en/Midas/Security_preferences)
*   [Bugzilla 错误 284673 - about:config 隐藏“capability.policy”首选项](https://bugzilla.mozilla.org/show_bug.cgi?id=284673)
*   [在 Firefox 中访问剪贴板](https://developer.mozilla.org/en/Using_the_Clipboard#Pasting_Clipboard_Contents)
*   [*以稍微*不同的方式访问 Firefox 中的剪贴板](https://stackoverflow.com/questions/7713182/copy-to-clipboard-for-all-browsers-using-javascript)
*   [谷歌：“权限被拒绝”“获取属性 XPCComponents.classes”](http://www.google.com/search?q=%22Permission+denied+for%22+%22to+get+property+XPCComponents.classes%22)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:59:24.713

简而言之，我认为不可能按照自己的意愿去做自己想做的事。Mozilla（和大多数现代浏览器）出于安全原因限制剪贴板访问。您似乎很容易绕过 IE 中的这个限制，这*并不是*一个令人欣慰的想法。

话虽如此，插件与网页有不同的限制，您可以通过编写一个（或者甚至利用闪存）来绕过这个限制。但是，即使使用插件，我怀疑您阻止某人将某些内容粘贴到 Web 表单（或其他）的唯一方法是抢先清理他们的剪贴板。

如果您只想阻止某些字符串被输入到文本框中，最好的办法是监视文本框本身的事件。

但是，如果我没看错的话，听起来您想强迫用户在表单中输入（并且只输入）某些内容，而我想不出一种简单的方法。几个重要的选择：

1.  将文本框设置为`readonly`，并弹出一个虚拟键盘以强制用户使用鼠标在框中“键入”。（您必须自己使用 HTML 和 JavaScript 构建键盘，或者在某个地方找到合适的解决方案。）
2.  监控`oninput`事件；如果文本框更改的速度比人们合理预期的要快，则拒绝更改。

这些都不是很漂亮，但是如果您想使用开放的 Web 技术创建解决方案，那么您必须接受您正在构建的系统的*局限性*，以及它的*好处*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:55:40.430

我们可以说，您想要的是检测剪贴板粘贴吗？自从你知道那里以前是什么时，你就知道发生了什么变化。

那么为什么不简单地挂钩 onchange 呢？不粘贴内容开头和结尾的所有相同字符。如果您想将此与简单的击键区分开来，请同时听 keydown/keypress，然后您就会知道，哪些更改来自“其他地方”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:10:22.210

Grubby 但跨浏览器的方法是将当前输入的值与之前的 onchange 事件进行比较。

如果它的长度增加或值差异太大（不仅减少而且有很多新字符） - 可能是从剪贴板粘贴了一些东西。像这样的东西：

```
$('input, textarea').change(function(){
  var prev = $(this).data('prev-val'), 
      current = $(this).val();
  if (is_big_changes(prev,current)) {
    $(this).val(my_filter_func(current));
  }
  if (!prev) {
     $(this).data('prev-val', current);
  } 
}) 
```

（这只是概念证明，所以我使用 jQuery 来避免大量编码）

在哪里 is_big_changes 和 my_filter_func - 您需要实现的功能。

*警告*使用这种方法可能会出现很多邪恶的错误，我知道，它看起来非常难看。我的交易是提出建议。**********

# jquery - Google Maps API - （使用 OverlayView）一次只打开一个地图标记？

> ID：10640038
> 
> 赞同：0
> 
> 时间：2012-05-17T16:52:01.143
> 
> 标签：jquery, ajax, google-maps, google-maps-api-3, google-api

我正在尝试使用 OverlayView for Google Maps API 弄清楚如果您已经打开了一个地图标记，并且您尝试打开另一个标记，它会自动关闭打开的标记，因此实际上只有一个标记打开一次，等等。这是我目前已经拥有的js代码：

```
var GMap = (function() {
  var that = {};
  that.map = null;
  that.center = new google.maps.LatLng(33.7856030000,-84.4090570000);
  that.map_type = google.maps.MapTypeId.ROADMAP;
  that.markers = {};
  that.windows = {};
  that.bounds = new google.maps.LatLngBounds();
  that.use_bounds = false;
  that.watch_click = false;
  that.zoom = 10;
  that.addCityMarker = function(opts) {
    that.markers[opts.id] = that.standardMarker(opts);
    var myLatlng = that.markers[opts.id].getPosition();
    google.maps.event.addListener(that.markers[opts.id], "click", function(e) {
      that.windows[opts.id] = new InfoBox({
        data: opts,
        latlng: myLatlng,
        map: that.map,
        type: 'city'
      });
    });
    google.maps.event.trigger(that.markers[opts.id], "click");
    if(that.use_bounds == true) {
      that.bounds.extend(myLatlng);
    }
  };
  that.addCityMarkers = function(data) {
    for(var i in data) {
      if(data[i]) {
        that.addCityMarker(data[i]);
      }
    }
  };
  that.addCommunityMarker = function(opts) {
    if(!that.markers[opts.data.id]) {
      that.markers[opts.data.id] = that.standardMarker(opts);
      var myLatlng = that.markers[opts.data.id].getPosition();
      google.maps.event.addListener(that.markers[opts.data.id], "click", function(e) {
        that.windows[opts.data.id] = new InfoBox({
          data: opts.data,
          latlng: myLatlng,
          map: that.map,
          type: 'community'
        });
      });
      google.maps.event.trigger(that.markers[opts.data.id], "click");
      if(that.use_bounds == true) {
        that.bounds.extend(myLatlng);
      }
    } else {
      console.log('skipped adding duplicate community window to map');
    }
  };
  that.addCommunityMarkers = function(data) {
    for(var i in data) {
      if(data[i]) {
        GMap.addCommunityMarker(data[i]);
      }
    }
  };
  that.finish = function() {
    if(that.use_bounds == true) {
     that.map.fitBounds(that.bounds); 
    }
  };
  that.standardMarker = function(opts) {
    var icon = new google.maps.MarkerImage(
      '/images/map/trans.png',
      new google.maps.Size(1,1),
      new google.maps.Point(0,0),
      new google.maps.Point(0,0)
    );
    var shadow = new google.maps.MarkerImage(
      '/images/map/trans.png',
      new google.maps.Size(1,1),
      new google.maps.Point(0,0),
      new google.maps.Point(0,0)
    );
    var marker = new google.maps.Marker({
      icon: icon,
      position: new google.maps.LatLng(opts.lat,opts.lng),
      map: that.map,
      shadow: shadow
    });
    return marker;
  }
  that.triggerMarker = function(id) {
    if(that.windows[id]) {
      that.map.setCenter(that.markers[id].getPosition());
      if(!$('#info_window_'+id).hasClass('open')) {
        $('#info_window_'+id+' a.expand').trigger('click'); 
      }
    } else {
      console.log('no marker for: '+id);
    }
  };
  that.resize = function() {
    google.maps.event.trigger(that.map, 'resize');
    if(that.use_bounds == true) {
      that.map.fitBounds(that.bounds);
    } else {
      that.map.setCenter(that.center); 
    }
  };
  that.initialize = function() {
      var latlng = that.center;
    var myOptions = {
      center: latlng,
      navigationControl: true,
      mapTypeControl: false,
      navigationControlOptions: {
        style: google.maps.NavigationControlStyle.LARGE
      },
      mapTypeId: that.map_type,
      panControlOptions: {
        position: google.maps.ControlPosition.LEFT_BOTTOM
      },
      scrollwheel: false,
      zoom: that.zoom,
      zoomControlOptions: {
        style: google.maps.ZoomControlStyle.LARGE,
        position: google.maps.ControlPosition.LEFT_BOTTOM
      }
    };
    that.map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  };
  return that;
})();

function InfoBox(opts) {
  google.maps.OverlayView.call(this);
  this.data_ = opts.data;
  this.type_ = opts.type;
  this.latlng_ = opts.latlng;
  this.map_ = opts.map;
  var me = this;
  this.setMap(this.map_);
}

InfoBox.prototype = new google.maps.OverlayView();

InfoBox.prototype.draw = function() {
  // Creates the element if it doesn't exist already.
  if(this.type_ == 'community') {
    this.createElement();
    if (!this.div_) return;

    var pixPosition = this.getProjection().fromLatLngToDivPixel(this.latlng_);
    if (!pixPosition) return;

    // Now position our DIV based on the DIV coordinates of our bounds
    if(this.div_.hasClass('open')) {
      this.div_.css('left', (pixPosition.x + -36) + "px");
      this.div_.css('top', (pixPosition.y + -158) + "px");
    } else {
      this.div_.css('left', (pixPosition.x + -36) + "px");
      this.div_.css('top', (pixPosition.y + -85) + "px");
    }
    this.div_.css('display', 'block'); 
  } else if(this.type_ == 'city') {
    this.createCityElement();
    if (!this.div_) return;

    var pixPosition = this.getProjection().fromLatLngToDivPixel(this.latlng_);
    if (!pixPosition) return;

    // Now position our DIV based on the DIV coordinates of our bounds
    this.div_.css('left', (pixPosition.x + -38) + "px");
    this.div_.css('top', (pixPosition.y + -38) + "px");
    this.div_.css('display', 'block'); 
  }
};

InfoBox.prototype.createElement = function() {
  var me = this;
  var panes = this.getPanes();
  var div = this.div_;
  var data = this.data_;
  if (!div) {
    div = this.div_ = $('<div class="map_info_window" id="info_window_'+data.id+'">'
      +'<a href="#" class="expand">Expand</a>'
      +'<div class="info_window_content">'
        +'<div class="thumb"><img src="'+data.image+'" title="'+data.title+'" /></div>'
        +'<div class="info_window_data">'
          +'<p class="title">'+data.title+'</p>'
          +'<p class="desc">'+data.propInfo+'</p>'
          +'<a href="http://'+data.link+'" target="_blank" class="view">View Community</a>'
        +'</div>'
      +'</div>'
    +'</div>');
    $('a.expand, .thumb', div).click(function(e) {
      e.preventDefault();
      var pixPosition = me.getProjection().fromLatLngToDivPixel(me.latlng_);
      div.toggleClass('open');
      if(div.hasClass('open')) {
        div.css('top', (pixPosition.y + -158) + "px");
        div.css('z-index', 20);
        setTimeout(function() {
          $('.info_window_data', div).show('slide', {direction: 'left'}, 300);
        }, 100);
      } else {
        div.css('top', (pixPosition.y + -85) + "px");
        div.css('z-index', 10);
        $('.info_window_data', div).hide();
      }
    });

    div.css('display', 'none');
    $(panes.floatPane).append(div);
  }
}

InfoBox.prototype.createCityElement = function() {
  var me = this;
  var panes = this.getPanes();
  var div = this.div_;
  var data = this.data_;
  if (!div) {
    div = this.div_ = $('<div class="map_city_window">'
      +'<a href="/find/where?query='+data.name+'">'+data.name+'</a>'
      +'<div class="arrow">arrow</div>'
    +'</div>');
    div.css('display', 'none');
    $(panes.floatPane).append(div);
  }
}; 
```

我不确定如何将该功能集成到此代码中，但如果有人能给我一些指示，我将不胜感激。我正在使用的地图的一个非常相似的例子是这样的，如果它可以作为参考点：

[http://gables.com/find/where?query=Washington%20DC](http://gables.com/find/where?query=Washington%20DC)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:33:06.770

标准的设计模式是：

1.  将对窗口的单个引用放置在范围内更高的位置（而不是像现在这样在每个标记处）并将窗口视为 Singleton。
2.  当收到标记单击事件时，关闭窗口并清空其内容。
3.  在窗口中放置任何合适的新内容并将其移动到适合当前标记单击的位置。
4.  显示窗口，然后在收到另一个标记单击事件时等待重复这些步骤。

检查此问题以获取有关将此模式与以下内容一起使用的更多详细信息`InfoWindow`：[在 Google Maps API v3 中仅打开一个 InfoWindow](https://stackoverflow.com/q/1875596/1314132)。

# ruby-on-rails - mongo 和 rails 的分组查询

> ID：10640041
> 
> 赞同：1
> 
> 时间：2012-05-17T16:52:29.173
> 
> 标签：ruby-on-rails, mongodb, mongomapper, database

我有一个具有以下结构的跟踪表
`id | country_iso | object_id | created_at`
每个对象可以有一个或多个国家的许多条目。我需要弄清楚每个国家/地区现在有多少物品。
我不能只按 country_iso 对它进行分组，因为在这种情况下，我将获得每个国家/地区的条目数，而不是对象数。
我不能按 country_iso 和 object_id 对其进行分组，因为此时我将获得每个国家/地区每个对象的条目数。

所以，似乎我必须为每个对象获取最后一个条目，然后按国家/地区对它们进行分组并获取数量。我还需要避免最后一个条目的 country_iso 等于 null 的情况。因此，如果 object 的最后一个条目为 null，我们必须在 last 之前获取条目等一个（因此，最新的不为 null country_iso ）。

例子：

```
1 | US   | 1 | 25.02.02  
2 | null | 1 | 26.02.02  
3 | UK   | 2 | 25.02.02  
4 | UK   | 3 | 25.02.02  
5 | UK   | 4 | 25.02.02  
6 | US   | 4 | 26.02.02  ` 
```

结果将是

```
US | 2  
UK | 2 
```

提前感谢您的任何想法。
PS：请注意，有很多数据（超过 100 000 个对象，每个对象超过 10 个条目）并且位于远程服务器上。因此，我无法获取数据并以某种方式在主服务器上使用 ruby​​ 重新计算它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:07:30.233

您将需要一个 map-reduce 或更短的组版本。

[http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)

[http://api.mongodb.org/ruby/current/Mongo/Collection.html#group-instance_method](http://api.mongodb.org/ruby/current/Mongo/Collection.html#group-instance_method)

[https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection.rb](https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/collection.rb)

这是代码的一个镜头：

```
MyModel.collection.group(
  :key      => :country_iso
  :initial  => { :object_id_set => {} },
  :reduce   => 'function (obj,prev) { prev.object_id_set[obj.object_id] = 1; }',
  :finalize => 'function (final)    { final.object_count = keys(final.object_id_set).length }'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:06:35.057

```
MyCollection.where(country_iso: "US").count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T03:15:00.013

一个不太聪明的方法是滥用`distinct`......

```
counts = MyModel.distinct(:country_iso).map do |country_iso|
  count = MyModel.where(:country_iso => country_iso).distinct(:object_id).count
  [country_iso, count]
end 
```

...虽然这是每个国家/地区的 1 个查询。每次查询 1 毫秒可能并不可怕。

# python - 在 App Engine 处理程序上接收来自 Firefox 12.0 的多个 HTTP 请求

> ID：10640044
> 
> 赞同：2
> 
> 时间：2012-05-17T16:52:38.010
> 
> 标签：python, google-app-engine, firefox, webapp2

我在使用 Firefox 12.0 和 GAE 上的 Python 处理程序时遇到了一些奇怪的行为。

当我在 Firefox 中请求此处理程序时，它会运行 3 次——但仅在它返回 GIF 时。

我目前正在通过基于处理程序的查询字符串设置一个内存缓存条目来解决它。我希望这将防止相同信息的重复 db.put()s。

这是一个有效的 URL：[http](http://test-o-tron.appspot.com) ://test-o-tron.appspot.com——注意您可以更改这些查询字符串参数：

*   格式（“gif”或“html”）
*   hack（“真”或“假”）
*   mkey_suffix（用于轻松重置计数器的内存缓存键中的字符串）

这是代码：

```
from google.appengine.api import urlfetch, memcache
from google.appengine.ext import db
import webapp2, random

class MainHandler(webapp2.RequestHandler):
    def get(self):

        #If user doesn't have an mkey_suffix, make one
        if self.request.get("mkey_suffix") == "":
            self.redirect("/?format=gif&hack=false&mkey_suffix=" + 
                          self.request.remote_addr + 
                          "." + str(random.randint(0, 1000)))

        OUTPUT_GIF = self.request.get("format") == "gif"
        USE_HACK = self.request.get("hack") == "true"

        #Memcache keys
        mkey_suffix = self.request.get("mkey_suffix")
        mkey_log = "log" + mkey_suffix
        mkey_hack = "hack" + mkey_suffix

        #Count the number of requests using memcache
        if memcache.get(mkey_log) is None:
            memcache.set(mkey_log, 0, 60)
        counter = memcache.get(mkey_log)

        #Hack!! Only handle a given request ONCE every second
        if not USE_HACK or memcache.get(mkey_hack) is None:
            memcache.set(mkey_hack, True, time=1)

            #Show I'm not crazy
            counter += 1
            memcache.set(mkey_log, counter, 60)

        #Return counter value 
        if OUTPUT_GIF:

            self.response.headers["Content-Type"] = "image/gif"
            img_url = "http://placehold.it/{counter}x{counter}"
            img_url = img_url.format(counter=str(400 + counter))
            img_data = urlfetch.Fetch(img_url).content
            content = db.Blob(img_data)

        else:

            #Output HTML 
            self.response.headers["Content-Type"] = "text/html"
            content = "Counter == " + str(counter)

        self.response.out.write(content)

app = webapp2.WSGIApplication([('/', MainHandler)], debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:13:29.657

您可以从您的请求日志中获取等效信息，而无需使用这种黑客手段。

您是否打算让您的应用服务动态 GIF？如果您的 GIF 是静态的，并且您在 中声明它们`app.yaml`，则处理程序将被完全绕过。可能仍然存在某种 Firefox 打嗝，但您的应用程序上的负载不会反映它。

请参阅[https://developers.google.com/appengine/docs/python/gettingstarted/staticfiles](https://developers.google.com/appengine/docs/python/gettingstarted/staticfiles)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T16:43:02.193

AppEngine 团队报告了以下错误：

> **调查关于 2013 年 6 月 13 日多次执行请求的 Google App Engine 问题的报告**
> 
> 我们正在调查有关 Google App Engine 问题的报告，在该问题中，请求可能会被多次执行。这在管理控制台日志中显示为对运行时间超过一分钟的前端的请求。我们将很快提供更多信息。

6 月 14 日，他们发布了以下更新：

> 我们已经确定了根本原因，并实施了修复，该修复将在接下来的几天内推出。您应该期望对正在运行的应用程序几乎没有持续影响。完成内部调查后，我们将对此问题进行更详细的分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:47:15.150

你有什么问题？我敢打赌，这是某种 Firefox 行为，它正在请求一个网站图标或试图向前看或其他什么。

# php - PHP shell_exec 仅适用于某些命令

> ID：10640045
> 
> 赞同：3
> 
> 时间：2012-05-17T16:52:45.037
> 
> 标签：php, mamp

我是一个完整的 PHP (LAMP/WAMP/MAMP) 菜鸟，在尝试从 Web 服务器运行 shell 命令的菜鸟中，我遇到了一个常见的问题。我在 Mac mini 上有一个 MAMP 设置，我想收集 Android 命令的输出，

```
adb devices 
```

所以我可以显示连接到我的 mac mini 的设备列表。每当我在我的 PHP 脚本中将命令传递给 shell_exec 时，我都会返回一个空字符串。经过几次网络搜索后，我无法弄清楚如何解决该问题。我试着跑步

```
shell_exec("who am i") 
```

它返回“Clifton”，即启动 MAMP 的用户帐户的名称。我验证了这个相同的用户帐户可以执行“adb devices”命令。Android 工具安装在该用户帐户的主文件夹中。我也尝试过将绝对路径传递给命令。在这一点上，我确定这是一个配置问题，但我不知道要配置什么或在哪里配置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T16:57:37.573

试试这个：

```
shell_exec("adb devices  2>&1") 
```

来源：[http ://www.php.net/manual/en/function.shell-exec.php#106250](http://www.php.net/manual/en/function.shell-exec.php#106250)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T01:26:25.937

您应该尝试打开文件 /Applications/MAMP/Library/bin/envvars 然后注释 if 和 else 的四行。这看起来像这样：

```
#if test "x$DYLD_LIBRARY_PATH" != "x" ; then
#  DYLD_LIBRARY_PATH="/Applications/MAMP/Library/lib:$DYLD_LIBRARY_PATH"
#else
#  DYLD_LIBRARY_PATH="/Applications/MAMP/Library/lib" 
```

这对我来说可以！我希望你能享受它。祝你好运！

# c# - C# Thread Sleep or Wait until there is work MUTEX or MONITOR

> ID：10640059
> 
> 赞同：1
> 
> 时间：2012-05-17T16:53:26.557
> 
> 标签：c#

I have a worker thread in my socket server. When I set to the lowest priority, everything works find but it is slow. When I set the priority to Normal, it is much faster but when there is not work and it is in a while loop checking for an item to be added to the queue list, it still hogs up the cpu usuage and my VM slows down. I an new at thread management. How do I use a Mutex or Monitor to make the thread sleep or wait until there is work in the queue.

```
m_workerThread = new Thread(new ThreadStart(ProcessQueueLogs));
m_workerThread.Priority = ThreadPriority.Lowest;
m_workerThread.Start();

private void ProcessQueueLogs()
{
    try
    {
        while (!m_stopServer)
        {
            if (m_socketListenersList.Count > 0)
            {
                //Logger.WiteLog("ltsserver getting socketlistener from queue");
                // get the first socket in the list
                LTSSocketListener workerSocket = RequestQueue(null, false);
                //LTSSocketListener workerSocket = (LTSSocketListener)m_socketListenersList[0];

                if (workerSocket != null)
                {
                    // start the socket to process the request
                    workerSocket.StartProcessingRequest();

                    // close the socket
                    workerSocket.CloseSocketListener();

                    //Logger.WriteLog("ltsserver closing socketlistener");

                    // remove of the socket queue list
                    RequestQueue(workerSocket, false);
                    //m_socketListenersList.Remove(workerSocket);
                }
            }
        }
    }
    catch (SocketException e)
    {
        EventLog.WriteEntry(m_eventSource, e.Message.ToString());
        EventLog.WriteEntry(m_eventSource, e.Message.ToString(),               EventLogEntryType.Error, 234);
    }
} 
```

Any help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:58:04.847

最简单的解决方案是使用[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)C# 4.0：对方法的调用`Take()`将阻塞，直到将某些内容添加到队列中，让您完全避免使用同步原语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:57:50.073

Use `Monitor.Wait()` where you want to wait.

```
while (!ThereIsWork)
    Monitor.Wait(_lockerObject); 
```

Use `Monitor.Pulse()` or `Monitor.PulseAll()` elsewhere (on another thread) to wake up the Monitor.Wait, and check the `ThereIsWork` condition again:

```
Monitor.Pulse(_lockerObject); 
```

See here for a complete example: [https://stackoverflow.com/a/530228/102937](https://stackoverflow.com/a/530228/102937)

# xcode - 编译器不跟踪更新的方法声明

> ID：10640061
> 
> 赞同：0
> 
> 时间：2012-05-17T16:53:32.770
> 
> 标签：xcode

我有我正在调用的这个方法，一切都很好：

数据处理器：

```
.h:    
-(void)saveNumberOfTries:(NSString*)numberOfTries toWord:(NSString *)indexOfWord;
.m:
-(void)saveNumberOfTries:(NSString*)numberOfTries toWord:(NSString *)indexOfWord {...} 
```

视图控制器.m

```
DataHandler *dataHandler = [[DataHandler alloc] init];
[dataHandler performSelector:@selector(saveNumberOfTries:toWord:) withObject:numberOfTries withObject:wordId]; 
```

..然后我对其进行了更新以再提出一个论点：

数据处理器：

```
.h:    
-(void)saveNumberOfTries:(NSString*)numberOfTries toWord:(NSString *)indexOfWord currentLevel:(NSString*)userSelectedLevel;

.m:
-(void)saveNumberOfTries:(NSString*)numberOfTries toWord:(NSString *)indexOfWord currentLevel:(NSString*)userSelectedLevel {...} 
```

视图控制器.m：

```
DataHandler *dataHandler = [[DataHandler alloc] init];

[dataHandler performSelector:@selector(saveNumberOfTries:toWord:currentLevel:) withObject:numberOfTries withObject:wordId withObject:selectedLevel]; 
```

但是编译器现在给了我“接收器类型'DataHandler'，例如消息没有声明带有选择器'performSelector:withObject:withObject:withObject:'的方法”。

如果我放入原始方法调用（不更改 DataHandler 中的任何内容），尽管该方法不再存在，但它不会给我任何警告。Xcode 似乎跟不上我的变化。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:55:30.240

因为没有类似的方法`performSelector:withObject:withObject:withObject:`

您可以压缩成`NSArray`or`NSDictionary`然后使用`performSelector:withObject:withObject:`

就像你的情况一样-

```
-(void)saveNumberOfTries:(NSString*)numberOfTries toWordWithCurrentLevel:(NSDictionary *)wordAndLevel; 
```

其他方式，如果您不想更改方法的定义，您可以尝试如下所示，它会正常工作 -

```
[dataHandler saveNumberOfTries:numberOfTries toWord:wordId currentLevel:selectedLevel]; 
```

# unix - grep 用于在 unix 中使用分号的行

> ID：10640062
> 
> 赞同：3
> 
> 时间：2012-05-17T16:53:38.953
> 
> 标签：unix

我正在尝试从`fdisk -l`linux 上的输出中获取磁盘信息。

```
fdisk -l | grep -E 'Disk /dev/sd.\:' 
```

我得到以下输出。

```
Disk /dev/sde doesn't contain a valid partition table
Disk /dev/sda: 1000.2 GB, 1000204886016 bytes
Disk /dev/sdb: 1000.2 GB, 1000204886016 bytes 
```

但我想得到的是

```
Disk /dev/sda: 1000.2 GB, 1000204886016 bytes
Disk /dev/sdb: 1000.2 GB, 1000204886016 bytes 
```

我试着这样做

```
fdisk -l | grep -E 'Disk /dev/sd.\:' | grep -v "contain" 
```

但我不知道为什么 grep 不忽略包含“包含”的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:57:11.293

试试这个命令：

```
fdisk -l 2>/dev/null | grep -E 'Disk /dev/sd.\:' 
```

或者简单地说：

```
fdisk -l 2>/dev/null 
```

问题是该行`Disk /dev/sde doesn't contain a valid partition table`被生成为错误并被写入`stderr`而不是`stdout`.

在 unix 中，管道仅使用管道`stdout`RHS 上的命令从上一个命令写入的输出管道，因此您的 grep 命令仅在第 2 行和第 3 行工作，而终端上的第 1 行来自`stderr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:57:01.403

您原来的 grep 不起作用，因为有关“无有效分区”的错误消息被写入`stderr`. 解决方案是*重定向* `stderr`到`stdout`然后*grep*它。根据 shell，命令会有所不同。

例如，csh/tcsh：

```
 fdisk -l |& grep -E 'Disk /dev/sd.\:' | grep -v "contain" 
```

sh/bash：

```
 fdisk -l 2>&1 | grep -E 'Disk /dev/sd.\:' | grep -v "contain" 
```

**注意**：重定向/抑制所有`stderr`to`/dev/null`是危险的，因为*所有*错误消息（预期的和*不是*的）都会去那里。有选择地组合和处理该流要安全`stderr`得多`stdout`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:58:53.417

所有的 unix 命令都有两个输出；标准错误和标准输出。错误在 stderr 上打印，在 stdout 上正常输出。在您的示例中，您可以将 stderr 发送到 /dev/null 以摆脱多余的行。像这样：

`fdisk -l 2>/dev/null`

# android - Android MediaPlayer unable to play media file from local storage

> ID：10640063
> 
> 赞同：1
> 
> 时间：2012-05-17T16:53:42.180
> 
> 标签：android, video, media-player

I am trying to make a media player play a media file stored in the local/external storage.

The media file is downloaded using a separate activity and stored in the local/external storage.See below for the sample code for storing.

```
 FileOutputStream fos = openFileOutput("myfile.mp4" , Context.MODE_WORLD_WRITEABLE);
    fos.write(byteArrayBuf.toByteArray());
    fos.close(); 
```

For playing the same file, I use.

```
 mMediaPlayer = new MediaPlayer();
    ParcelFileDescriptor parcel = ParcelFileDescriptor.open(new File( URI.create("file:///data/data/com.mypackage/files/myfile.mp4")),ParcelFileDescriptor.MODE_READ_WRITE);
mMediaPlayer.setDataSource(parcel.getFileDescriptor());
    mMediaPlayer.setDisplay(mHolder);
    mMediaPlayer.prepare();
    mMediaPlayer.setOnPreparedListener(this);

    /** On Prepared Implementation **/
    public void onPrepared(MediaPlayer mp) {
       mMediaPlayer.start();
    } 
```

However, the media player refuses to play the file and always fails with an error(1, ). I am really at my wits end to make this media player running as I seem to have done everything which is inline with the code samples to make it read a file from local/external storage.

Note: when i substitute a local file with a file from the res/raw folder this seems to play fine. is this specifically related to the file not being readable by the application or the media player. Help would be really appreciated to make this piece work.

# **Update 1**

@Chris : I have temporarily made the file WORLD_WRITEABLE and once I get the media player to work would in fact write files as WORLD_READABLE. Hard-coding the paths is deliberate as of now as I just want to initially ensure that the file gets read without any ambiguity. In fact I have checked that the file does exist by going through adb shell and DDMS.Once i get the file read, in fact I will probably use something more sensible like getFilesDir(). Logcat output as below.

```
 surfaceCreated
    I/AwesomePlayer(   34): reset
    I/AwesomePlayer(   34): cancel player events
    I/AwesomePlayer(   34): cancel player events
    I/SampleTable(   34): There are reordered frames present.
    D/MyPlayerActivity(  460): surfaceChanged
    I/ActivityManager(   82): Displayed com.mypackage/.MyPlayerActivity: +1s997ms
    D/MyPlayerActivity(  460): Video Prepared
    D/AudioSink(   34): bufferCount (4) is too small and increased to 12
    E/MediaPlayer(  460): error (1, -2147483648)
    E/MediaPlayer(  460): Error (1,-2147483648) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:27:06.787

正如 Chris Stratton 评论的那样，不要对内部或外部存储的路径进行硬编码。它们可能适用于某些系统，但不能保证适用于每个系统。

用于`getFilesDir()`查找目录的路径。从文档...

> 公共文件 getFilesDir ()
> 
> 返回文件系统上存储使用 openFileOutput(String, int) 创建的文件的目录的绝对路径。
> 
> 返回包含应用程序文件的目录的路径。

您可以调用`getAbsolutePath()`返回的`File`并附`/myfile.mp4`加到它，然后`setDataSource(...)`在`Mediaplayer`.

# python - check/log network utilization(shown in task manager) for remote systems

> ID：10640069
> 
> 赞同：0
> 
> 时间：2012-05-17T16:54:20.287
> 
> 标签：python, networking, lan, taskmanager

I have created a python script which runs a LanPort test on a group of systems for a specified number of hours.

Now for me the problem is that I need to log the Network Utilization % which can be seen by clicking on networkork tab of Task manager for all these systems. Is there any way of getting this done in python? If not , is there any other tool which allows me to open the task manager of remote systems such that I can monitor the performance from my management station.

Any kind of hep is really appreciated.

Thank You!!

Ashu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:00:55.453

阿舒，试试看[psutil](http://code.google.com/p/psutil/)

从他们的页面，

> **简介**：
> psutil 是一个提供接口的模块，用于通过使用 Python 以可移植的方式检索有关所有正在运行的进程和系统利用率（CPU、磁盘、内存、网络）的信息，实现了命令行工具提供的许多功能。

# ios - Is it possible to save a video to the videos application rather than the photos application?

> ID：10640075
> 
> 赞同：3
> 
> 时间：2012-05-17T16:54:31.203
> 
> 标签：ios

The method writeVideoAtPathToSavedPhotosAlbum: seems a bit daft to me, both as a developer and as a user.

If an application offers the user the ability to save a video, then the only option available for the developer to use to implement that functionality is ALAssetsLibrary:writeVideoAtPathToSavedPhotosAlbum AFAIK.

But then when the user goes to look for it, naturally they will assume its in the Videos app on their desktop, but its not, instead it has to be accessed by the Photos app.

This is totally unintuitive for the user.

Is there anyway an app can save a video so the user can find it when they launch the video app?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:50:33.277

不，它已经被沙盒化了。我不同意您关于用户倾向于查看视频应用的假设。当他们在 iOS 设备上录制视频时，它不会转到视频应用程序。每个人都习惯于去他们的照片应用程序寻找类似的东西。此外，这也是手机一直以来的工作方式，因此它是最直观的放置位置。

# eclipse - how do i subclipse plugin in eclispe to revise files then run in tomcat

> ID：10640080
> 
> 赞同：0
> 
> 时间：2012-05-17T16:55:32.153
> 
> 标签：eclipse, jsp, tomcat, subclipse

I haven't used eclipse in a while and I need someone to help me with a problem I'm having. There's a project in a Subversion repository and I need to update a few JSPs. I have installed eclipse, subclipse plugin and running tomcat within the eclipse IDE. What is the best way to get the project (in subversion) into eclipse, edit the files, save & run them in tomcat (localhost - so that I can see my changes in the browser), all within Eclipse?

I tried:

*   within my workspace using eclipse, create a new project and import the project from svn into the newly created project
*   directly importing the project by selecting FILE -->"import" --> "Create a new project by checking out an existing project from a SVN repository"

Neither of these methods will show the project in the "Add and Remove Projects" dialog box for tomcat to run it. I'm obviously doing something wrong, but I don't know what.

Thanks. I appreciate your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:14:01.453

经过三天尝试在不同的论坛和谷歌上回答这个问题后，我终于找到了我正在寻找的答案。您可以在 [Using Subclipse (the Subversion Plug-in for Eclipse) for Configuration Management](http://agile.csc.ncsu.edu/SEMaterials/tutorials/subclipse/)中查看它 希望这对感兴趣的人有所帮助。

# fann - libfann 未定义符号

> ID：10640083
> 
> 赞同：1
> 
> 时间：2012-05-17T16:55:49.937
> 
> 标签：fann

我在我的 Ubuntu 11.10 上安装 libfunn，当我从“示例”目录运行示例时出现错误。

编译：

gcc simple_train.c -o simple_train -lfann -lm

执行时：

./simple_train

最大时期 500000。期望的错误：0.0010000000。

./simple_train：符号查找错误：/usr/local/lib/libfann.so.2：未定义符号：exp

如何修复？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:24:10.173

尝试重新安装库。您是从 Ubuntu 存储库还是从源代码安装的？

# video - 为什么 ffmpeg 报告不同的持续时间？

> ID：10640088
> 
> 赞同：6
> 
> 时间：2012-05-17T16:56:20.433
> 
> 标签：video, ffmpeg

源视频：[http ://www.artworknotavailable.com/tmp/ffmpegtest](http://www.artworknotavailable.com/tmp/ffmpegtest)

Quicktime Pro 7.7.1 Inspector (Win 7) 为文件 2398.mov 报告以下内容

> 4.19MB
> H.264
> 电影 FPS：23.98
> 数据速率：2.35
> Mbps 持续时间 14:97

ffmpeg 报告以下内容（请参阅帖子底部的完整 ffmpeg 版本信息）

> ffmpeg -i 2398.mov
> 
> 似乎流 1 编解码器帧速率与容器帧速率不同：47952.00 (47952/1) -> >23.98 (2997/125)
> 输入 #0，mov，mp4，m4a，3gp，3g2，mj2，来自“2398.mov”：
> 元数据：
> major_brand：qt
> 
> > 次要版本：537199360
> > compatible_brands：qt
> > 持续时间：00:00:15.97，开始：0.-963005，比特率：2210 kb/s
> > 流 #0.0（eng）：音频：aac，48000 Hz，立体声，s16，152 kb/s
> > 流#0.1（英文）：视频：h264、yuv420p、848x480、2060 kb/s、23.98 fps、23.98 tbr、23976 tbn、47952 tbc

比 Quicktime 报告的时间长一秒钟。

作为一个实验，我使用以下设置从 Quicktime Pro 导出了这个文件：

> 帧速率：当前
> 关键帧：每 24 帧
> 帧重新排序
> 质量：高
> 编码最佳
> 数据速率：自动
> 优化下载
> 输出文件：qtime-export-2398.mov

Quicktime 检查员报告：

> 5.62 MB
> H.264
> 电影 FPS：23.98
> 数据速率：3.15
> Mbps 持续时间 14:97

ffmpeg 现在报告：

> ffmpeg -i qtime-export-2398.mov
> 
> 似乎流 1 编解码器帧速率与容器帧速率不同：1200.00 (1200/1) -> 23.98 (24000/1001)
> 输入 #0，mov，mp4，m4a，3gp，3g2，mj2，来自 'qtime-export-2398。 mov'：
> 元数据：
> major_brand：qt
> minor_version：537199360
> compatible_brands：qt
> 持续时间：00:00:14.96，开始：0.000000，比特率：3153 kb/s
> 流#0.0（eng）：音频：pcm_s16le，44100 Hz，2 个通道，s16 , 1411 kb/s
> Stream #0.1(eng): Video: h264, yuv420p, 678x384, 1738 kb/s, 23.98 fps, 23.98 tbr, 600 tbn, 1200 tbc

ffmpeg 的持续时间报告从 15.97 变为 14.96（我可以忍受 .1）

这个持续时间是根据比特率计算的吗？

我需要准确报告上传视频的持续时间并将它们转换为 FLV。有人可以告诉我这里发生了什么以及如何解决这个问题吗？

ffmpeg 信息如下。我已经在 2 个完全不同的 ffmpeg 安装/版本上进行了尝试。结果相同。

> FFmpeg 版本 0.6.5，版权所有 (c) 2000-2010 FFmpeg 开发人员于 2012 年 1 月 29 日 23:55:02 使用 gcc 4.1.2 20080704 (Red Hat 4.1.2-51) 配置构建：--prefix=/usr - -libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags='-O2 -g -管道 -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC' --enable-avfilter --enable-avfilter-lavf -- enable-libdirac --enable-libfaac --enable-libfaad --enable-libfaadbin --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libx264 --enable -gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab libavutil 50.15。1 / 50.15。1 libavcodec 52.72。2 / 52.72。2 库格式 52.64。2 / 52.64。2 libavdevice 52\. 2\. 0 / 52\. 2\. 0 libavfilter 1.19\. 0 / 1.19。0 libswscale 0.11。0 / 0.11。0 libpostproc 51\. 2\. 0 / 51\. 2\. 0 FFmpeg 0.6.5 libavutil 50.15\. 1 / 50.15。1 libavcodec 52.72。2 / 52.72。2 库格式 52.64。2 / 52.64。2 libavdevice 52\. 2\. 0 / 52\. 2\. 0 libavfilter 1.19\. 0 / 1.19。0 libswscale 0.11。0 / 0.11。0 libpostproc 51\. 2\. 0 / 51\. 2\. 0 0 / 52\. 2\. 0 libavfilter 1.19\. 0 / 1.19。0 libswscale 0.11。0 / 0.11。0 libpostproc 51\. 2\. 0 / 51\. 2\. 0 0 / 52\. 2\. 0 libavfilter 1.19\. 0 / 1.19。0 libswscale 0.11。0 / 0.11。0 libpostproc 51\. 2\. 0 / 51\. 2\. 0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:56:39.773

我刚刚查看了第一个文件，这就是他们报告不同持续时间的原因。

Quicktime 正在从“电影标题”中收集持续时间值。这里的值是 8981 / 600 = 14.97 秒。

FFmpeg 正在从“媒体标头”中收集持续时间值，视频为 383000 / 23976 = 15.97 秒，音频为 719872 / 48000 = 15.00 秒。

编辑：......并回答你的另一个问题：*有人可以告诉我如何解决这个问题吗？*我想您正在使用 ffmpeg 将文件转换为 .FLV？如果是这样，我会坚持 ffmpeg 报告的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T05:55:59.420

FFmpeg 在这里显示“Duration: 00:00:14.96”，请理解您的 FFmpeg 版本很古老（并且有许多已知的错误和回归），请参阅[http://ffmpeg.org/download.html](http://ffmpeg.org/download.html)了解如何获取当前的 git head，总是推荐的。

# php - 邮件脚本不起作用

> ID：10640092
> 
> 赞同：3
> 
> 时间：2012-05-17T16:56:28.777
> 
> 标签：php, email, sendmail

我被困住了，无法弄清楚为什么这不起作用。它以前工作过。出于安全原因，我已更改以下电子邮件地址。

```
$to = "email@domainname.com";
$subject = "Submission";
$body = "Test Body";
$header = "From: email@domainname.com";                
if (mail($to, $subject, $body, $header)) {
    echo "message was successfully sent.";
    echo "$to $subject <br/> $body <br/> $header";
} else {
    echo "There was a Problem.";
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:07:15.803

**首先**：您必须确保您的环境配置正确。您的脚本也不会显示错误消息。

**提示**：用户**PHPMailer**。(http://phpmailer.worxware.com/) 此类显示特定消息，您可以通过它们修复错误。

**重要提示**：如果您不确定错误出在哪里，您会在没有方向的情况下尝试和尝试感到沮丧。电子邮件无法发送的原因可能有很多。

使用PHPMail，找出错误在哪里，之后你可以在这里再次询问，好处是你有错误的描述。

我遇到了类似的问题，PHPMail 帮了我很多！

所以，试试看，告诉我们错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:22:51.467

我查看了我们的邮件服务器并更改了垃圾邮件过滤器设置，只是为了看看会发生什么。低，现在一切正常。奇怪的是，它甚至没有显示电子邮件已经收到。但不管问题解决了。感谢大家的帮助，不胜感激。

# java - 与 Firefox 和其他浏览器相比，Jsoup 获得不同的 html

> ID：10640093
> 
> 赞同：3
> 
> 时间：2012-05-17T16:56:59.733
> 
> 标签：java, web-scraping, jsoup

我遇到了来自名为 Kabum 的网上商店的一些网址。

网址是[http://www.kabum.com.br/cgi-local/kabum3/produtos/descricao.cgi?id=01:02:23:55:159](http://www.kabum.com.br/cgi-local/kabum3/produtos/descricao.cgi?id=01:02:23:55:159)

如果我在地址栏中输入站点，或者单击链接，我会得到一个包含产品的页面，但如果我使用 Jsoup，我会得到一个页面，只有元刷新到相同的地址。

尝试设置用户代理、引荐来源网址并点击 meta 中的链接，但我得到了相同的页面。

我的代码在这里：

```
Document doc;
String url = "http://www.kabum.com.br/cgi-local/kabum3/produtos/descricao.cgi?id=01:02:23:55:159";
try {
    String ua = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0";
    String referrer = "http://www.google.com";
    doc = Jsoup.connect(url).timeout(20000).userAgent(ua).referrer(referrer).get();
    Elements meta = doc.select("html head meta");
    for (Iterator<Element> it = meta.iterator(); it.hasNext();) {
        Element element = it.next();
        if (element.attr("http-equiv").matches("refresh")) {
            String novaUrl = element.attr("content").replaceFirst("\\d?;url=", "");
            System.out.printf("redirecting to %s%n", novaUrl);
            doc = Jsoup.connect(novaUrl).userAgent(ua).referrer(referrer).get();
            break;
        }
    }
} catch (IOException ex) {
    Logger.getLogger(Teste1.class.getName()).log(Level.SEVERE, null, ex);
    return;
}
System.out.println(doc); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:44:32.773

很有意思。

是的，下面这行：`<meta http-equiv="refresh" content="0;url=kabum.com.br/cgi-local/kabum3/produtos/…; />`告诉浏览器刷新当前的 url。

所以看起来页面告诉浏览器不断刷新页面，直到服务器满足它正在寻找的任何标准。

您必须弄清楚服务器正在寻找什么标准。首先要检查的可能是 (1) jsoup 设置的重定向限制（如果它具有“跟随重​​定向”功能并且可以理解该`meta`标签），以及 (2) cookie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:57:41.220

您需要使用 cookie 重新发送请求。该站点正在返回一个它希望在下一个请求中看到的会话 cookie。

```
String url = "http://www.kabum.com.br/cgi-local/kabum3/produtos/descricao.cgi?id=01:02:23:55:159";
Map<String, String> cookies = Jsoup.connect(url).execute().cookies();
Document document = Jsoup.connect(url).cookies(cookies).get();
System.out.println(document.html()); 
```

请注意，您应该对要在同一会话中触发的每个后续请求使用相同的 cookie。

# ios - 无法删除被拒绝的 IAP

> ID：10640094
> 
> 赞同：0
> 
> 时间：2012-05-17T16:57:01.143
> 
> 标签：ios, app-store-connect

自动更新订阅 IAP 存在问题，Apple 拒绝了它。现在，在提交请求的不可续订订阅类型之前，我**必须**删除旧的 IAP。但 ITC 就是不让我（删除按钮被禁用）。为什么？

![在此处输入图像描述](../Images/5fdc7e31c92036c0e3b1c6770cfb182d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:20:25.047

似乎您不能完全删除可更新订阅，只是添加了一个带有一些随机产品 ID 的新持续时间，并删除了状态为“需要开发人员操作”的旧持续时间。现在 IAP 将永久处于“准备提交”状态，但我想我可以忍受。

# java - 使用静态字符串变量的 Java 类

> ID：10640098
> 
> 赞同：0
> 
> 时间：2012-05-17T16:57:15.440
> 
> 标签：java, class, static

我在这里有点困惑，构建一个具有标签表的 Web 应用程序。在选项卡表类中，我使用数据成员 - 静态字符串变量来存储用户选择的选项卡。我这样做是为了在用户返回选项卡表时显示用户最后选择的选项卡。我得到了理想的结果。但是，如果我注销并登录（在删除浏览器上的缓存之后），选项卡表仍在选择用户上次选择的选项卡，而不是选择默认选项卡。选项卡表正在由另一个组件初始化。我不明白的是，类定义不是垃圾收集吗？为什么要选择旧数据？如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:00:12.010

您似乎假设使变量静态以某种方式对应于将其隔离到用户会话。它没有。

如果你想要任何类型的会话处理，你实际上*必须有一个 session*。（您需要考虑服务器重启、多台服务器等发生的情况）

当您有一个静态变量时，它就是该类加载器中该类的*一个*变量。它与用户没有*任何*关系。*如果所有*用户访问同一台服务器，他们将看到相同的变量。

你没有告诉我们你使用什么技术来构建你的网络应用程序，但基本上你应该看看在服务器端用户会话方面为你提供了什么——或者使用隐藏字段或类似的东西传播信息，所以*服务器*根本不需要跟踪它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:00:10.963

静态成员是按类存储的，而不是按对象存储的，因此静态成员的值在所有类实例（对象）中是相同的，并且在实例超出范围时不会“重置”。以这种方式使用静态成员是一个坏主意，因为您的应用程序的所有用户都会看到相同的值，如果其中一个导致它发生更改，则更改后的值将对所有人可见（即，如果用户 1 更改选项卡，所有其他用户的选项卡也会更改）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:00:39.847

仅仅因为您清除了浏览器缓存，它不会影响服务器上存储静态变量的对象。如果用户注销（或登录，您的选择），您需要明确重新设置它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:02:57.910

It's not static if the value is constantly changing. I think you should look at using a different mechanism to store these kinds of variables.

# java - Efficient method to check for matching files in Java

> ID：10640099
> 
> 赞同：0
> 
> 时间：2012-05-17T16:57:17.270
> 
> 标签：java, file, filenames, processing-efficiency

I'm no Java expert but the program I'm making is going to be dealing with high throughput. So I thought I'd do a little crowd sourcing for opinions. Here's the situation.

A java process will be watching a directory for files to process, these files will be paired (data file to be stored and xml file with meta information to be cataloged). So I need to get the list of current files, check for the required twins, and then process.

Files will always have matching filenames and only differ by file extension e.g. filename1.jpg filename1.xml filename2.jpg filename2.xml

I have three options I've thought of so far.

1.  Use FilenameFilter with File.List(FileNamefilter) call to check if the total files with a filename is greater than 1.

2.  Use two filenamefilters to generate a list of files with .xml and without .xml, convert the non XML file list to an ArrayList and call Collections.binarySearch().

3.  Generate a list of all files without .xml extension, use this list as the keys for a hashmap of key/value pairs that assumes the .xml file based on the filename. Then run through the hash list and check for the existence of the .xml twin before processing.

Any thoughts?

EDITS/COMMENTS

After looking at the suggestions and tinkering I'm for now going with using two FilenameFilters, one that lists XML files and one that does not. The list of XML files is stripped of the xml extension and dumped into a hash. Then the list of data files is iterated through, calling hashlist.contains() to see if a match exists in the hashset before proceeding.

There is the concern as mentioned below of processing incomplete files. As I said in comments, I assume that a newly written file is not visible to non-writing processes until that write is complete (new files, not open for edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:14:35.557

获取所有文件，对它们进行**排序**，然后对文件名进行线性传递，并查看哪些同意前缀。显然，它们应该在排序列表中彼此相邻。

这应该比过滤器和哈希图更简单、更快！

要监视目录，您可能需要使用通知基础 API，例如可用时的 inotify。然后操作系统将在文件夹内容发生更改时发出信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:23:46.253

这有点偏离主题，但鉴于所陈述的意图，我希望与此处发布足够相关。

该问题没有说明文件如何到达目录。如果它们通过网络或互联网进入，或从另一个进程流式传输，则交付可​​能不是即时的，从而导致选择和处理尚未完全交付的文件（例如 jpeg 文件的一半）的风险。

如果你有高吞吐量，那么如果你允许它，这是会发生的情况。即使您在处理之前短暂延迟，它也可能迟早会以某种方式发生。

处理此问题的常用策略是传递到中间文件名（或者更好的是，相邻文件夹）。交付完成后，交付过程会将文件重命名或移动到正确的名称和位置。这一举动实际上是即时的（原子的）。在 ftp 的情况下，至少一个众所周知的工具会自动执行这些步骤。

如果您的部分交付的文件位于同一个文件夹中，并且仅使用备用文件扩展名进行了重命名，那么这可能是一个话题，这可能与该问题中提到的一些选项有关。

# windows-phone-7 - 拉伸堆栈面板

> ID：10640104
> 
> 赞同：0
> 
> 时间：2012-05-17T16:58:00.743
> 
> 标签：windows-phone-7, xaml

我想使用列表框创建歌曲列表，但布局有问题。

目前我使用以下xaml：

```
<ListBox x:Name="lstHistory" HorizontalAlignment="Stretch" Margin="12,284,0,90" Width="460">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                        <StackPanel Orientation="Horizontal">
                            <Image Margin="5" VerticalAlignment="top" Source="{Binding Image}" />
                        </StackPanel>
                        <StackPanel Orientation="Vertical" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                            <TextBlock Margin="8"
                                  TextWrapping="Wrap"
                                  VerticalAlignment="Top"
                                  HorizontalAlignment="Left"
                                  Text="{Binding Name}" />
                            <TextBlock Margin="8"
                                  VerticalAlignment="Top"
                                  HorizontalAlignment="Left"
                                  Text="{Binding Artist}" />
                            <TextBlock Margin="8,0,8,8"
                                  VerticalAlignment="Bottom"
                                  HorizontalAlignment="Right" Text="{Binding Time}" Opacity="0.25" />
                        </StackPanel>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

我想把时间放在列表项的最右下角，但每次它都会出现在屏幕中间。

这是我得到的一个例子： ![在此处输入图像描述](../Images/91af2d55b2c71d215f6407994eb34637.png)

谁能告诉我怎么去那里的时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:24:03.770

默认情况下，ListBoxItem 占用尽可能少的空间。StackPanel 也是如此。为了让它跨越，您必须将 ListBox 的 Horizo​​ntalContentAlignment 设置为 Stretch，并将 StackPanel 的 Horizo​​ntalAlignment 设置为 Stretch（您已经在这样做）。您还需要为 ListBox 设置 ItemContainerStyle

```
<ListBox x:Name="lstHistory" HorizontalContentAlignment="Stretch" Margin="12,284,0,90">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                    <Image Margin="5" VerticalAlignment="top" Source="{Binding Image}" />
                    <StackPanel Orientation="Vertical" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                        <TextBlock Margin="8"
                              TextWrapping="Wrap"
                              VerticalAlignment="Top"
                              HorizontalAlignment="Left"
                              Text="{Binding Name}" />
                        <TextBlock Margin="8"
                              VerticalAlignment="Top"
                              HorizontalAlignment="Left"
                              Text="{Binding Artist}" />
                        <TextBlock Margin="8,0,8,8"
                              VerticalAlignment="Bottom"
                              HorizontalAlignment="Right" Text="{Binding Time}" Opacity="0.25" />
                    </StackPanel>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
        <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            </Style>
        </ListBox.ItemContainerStyle>
    </ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:57:25.017

`HorizontalAlignment="Stretch"`不适用于 StackPanel。您应该设置一个明确的宽度（可能是 432）。

此外，图像不需要单独位于 StackPanel 中。

# c++ - 针对 Web 浏览器应用程序的 C++ 前景如何？

> ID：10640106
> 
> 赞同：1
> 
> 时间：2012-05-17T16:58:03.930
> 
> 标签：c++, c

我们拥有可移植的 C++ 源代码，可用于在各种不同的硬件（10 多个平台）上部署游戏和应用程序。我们现在对部署到 Web 浏览器感兴趣。

Chrome 有其 Native Client 架构。但是，作为一个平台，我们仅限于 Chrome 用户。是否有任何其他新兴标准允许编译 C/C++ 源并将其定位到 Web 浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:30:26.270

在这个话题上，短期内没有 100% 的答案。

原因是没有一个主要的 Web 浏览器实际上支持运行完全安全的本机编译代码，就像 C++ 一样。ActiveX 从来没有完全安全，也不是 100% 知道 chrome 的适用性，但是 chrome 在用户空间中做了很多事情。诸如已编译机器代码之类的东西只能从操作系统内核制作的适当沙箱中真正得到信任。

即将发布的 Windows 8 版本采用新的沙盒技术，与新的 Windows RT 编译器一起将允许在浏览器中使用 C++，并且此新代码得到了适当的保护。

使用 Linux 的人正在那里研究不同类型的沙箱，内核也支持这些沙箱。您可能会在遥远的将来将它们视为 linux 浏览器的沙箱以及用于 VMS 托管解决方案等的沙箱......

所以现在，C++ 代码的解决方案是......

1) Google chrome 应用程序 2) Windows 8 IE 10 与新的 Windows 8 Metro 应用程序等...

您必须为所有系统构建您的应用程序，并使用服务器 cookie 来识别要发送到浏览器的构建。很像以前有 ActiveX 和 Mozilla Netscape 插件的时候。换句话说，新的和即将推出的插件场景将比 ActiveX 和 Netscape 插件更安全（因为它会被适当地沙盒化），但它可能会更昂贵和技术性更高，因为......

1）将有更多的浏览器自定义机器代码插件供应商。2）每个操作系统中的沙箱会略有不同，甚至非常不同。3) 每个操作系统的构建项目会有所不同。4）您通常很可能必须将应用程序放在应用程序商店中。5）您必须让应用程序商店验证该应用程序。6) 如果您想在所有地方提供支持，您可能需要向不同的应用商店付费。

如果供应商让沙盒技术正常工作，那么很多人会出于明显的原因使用它，但如果客户端沙盒出现某种类型的标准化，可能还需要很多年，这对每个人来说都是一件非常可悲的事情. 但我认为，如果浏览器制造商实施了操作系统支持的适当沙盒，它将是完全安全的，因此许多网络公司将不再能够控制你所做的一切。

否则我可能会过度猜测，但这就是我现在对 C++ 和浏览器的看法。我的建议，等待一段时间，做其他事情。如果沙盒来了，那就这样吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:45:19.410

[Emscripten](https://github.com/kripken/emscripten/wiki)可以将 LLVM 位码（例如由 Clang 从 C++ 生成）编译为 JavaScript。

# ada - Ada 中断处理程序

> ID：10640108
> 
> 赞同：5
> 
> 时间：2012-05-17T16:58:05.097
> 
> 标签：ada, interrupt-handling

在使用 Ada 中断处理程序时，到目前为止，我已经隔离了一些需要在代码中才能使它们工作的特定内容。

使用 Ada.Interrupts：

```
protected Int_Handler is --a protected object to handle interrupts
    procedure Handler_1; --A procedure which handles interrupts from your first device (with a body, of course)
    pragma Interrupt_Handler (Handler_1); --To tell the compiler this is an interrupt handler
    --Later in the program:
begin
    Attach_Handler (Int_Handler.Handler_1'access, Serial_1); 
```

假设这一切都是正确的并且我已经在寄存器中启用了中断，我还需要添加其他与中断相关的代码吗？特别是，我是否需要直接与寄存器交互以以某种方式“链接”我的处理程序代码，或者我可以只设置寄存器的记录表示，直接向它们输出必要的设置，然后让 rip？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T17:50:32.333

我认为你走在正确的轨道上，但如果你以前没有这样做过，如果我是你，我会回顾一些已经发表的关于 Ada 中断处理的文章。例如：

*   [在 Ada 中捕获和处理中断](http://wiki.ada-dk.org/catching_and_handling_interrupts_in_ada)
*   [宝石 #13：中断处理习语（第 1 部分）](http://www.adacore.com/adaanswers/gems/ada-gem-13/)
*   [宝石 #14：中断处理习语（第 2 部分）](http://www.adacore.com/adaanswers/gems/ada-gem-14/)

# asp.net - 只能访问服务器上的asp.net app

> ID：10640109
> 
> 赞同：1
> 
> 时间：2012-05-17T16:58:07.517
> 
> 标签：asp.net, iis

我正在尝试在 Windows Server 2008 机器上的 IIS 上设置 asp.net 应用程序。我可以从本地主机点击应用程序，没问题。我可以在服务器本地使用服务器的域名访问该应用程序，但不能从网络上的另一台机器访问。

当试图通过网络从另一台 PC 访问应用程序时，它只是超时并说

“x.xxx.x.xxx 的服务器响应时间过长”

```
http://xxx.xxx.x.xxx:[some port number]/MyApplicationWebAppName 
```

查看事件日志我收到以下错误？我已经看过这些以及它谈论安装在服务器上的共享点，但这不应该阻止我能够通过网络访问应用程序

> WebHost 未能处理请求。发件人信息：System.ServiceModel.ServiceHostingEnvironment+HostingManager/33711845 异常：System.ServiceModel.ServiceActivationException：服务“/SecurityTokenServiceApplication/securitytoken.svc”由于编译过程中的异常而无法激活。异常消息是：调用目标已引发异常。 ---> System.Reflection.TargetInvocationException：调用目标已引发异常。---> System.InvalidOperationException：农场不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:36:18.223

听起来像是防火墙问题。您知道您的网络是否允许 HTTP 流量在其中流动吗？

# algorithm - 如何同步信号接收器时钟？

> ID：10640110
> 
> 赞同：3
> 
> 时间：2012-05-17T16:58:07.767
> 
> 标签：algorithm, signal-processing

假设我正在以数字方式接收二进制信号，其中逻辑“1”表示信号的存在，而传输的逻辑“0”表示信号不存在。

逻辑“1”的持续时间与逻辑“0”相同，但发送器时钟可能会漂移，1 或 0 的持续时间略有不同。可以传输的连续 1 或 0 的最大数量。

在计算机编程代码中，执行此操作的一般算法是什么？如何同步接收器时钟以适应漂移？信号的最小采样率应该是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:55:44.360

大多数通信系统使用 (up down) 和 (down up) 表示 0 和 1。即从 0 到 t/2 信号向上，从 t/2 到 t 信号向下表示 0（反之亦然 1）其中 t 是信号的周期。使用此策略应该可以解决您的问题。

编辑：参见这篇 wiki 文章[http://en.wikipedia.org/wiki/Self-clocking_signal](http://en.wikipedia.org/wiki/Self-clocking_signal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:41:42.067

通常，时序是通过一个锁相环 (PLL) 从一个行程长度受限的 NRZ 编码信号中恢复的，该锁相环 (PLL) 被馈入所有转换的时序。

如果您对信号进行采样而不是使用转换时间，那么采样率越高，PLL 频率中的抖动就越少。但无论如何，采样率需要明显快于比特时间倒数的 2 倍。

您可能还想在[信号处理站点](https://dsp.stackexchange.com/tour)中提出这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T19:59:25.653

您正在描述的东西似乎与[RS-232](http://en.wikipedia.org/wiki/RS-232)非常相似。

时钟同步的方式是首先确保两端以相同的频率（波特率）运行，然后为每个设定的位数定义一个开始和停止序列。因此，例如，您将发送一个 0 作为起始位，发送一个 1 作为停止位，然后在其间发送一大堆位（比如说一个字节）。由于您的两个时钟几乎相同，因此同步信号所需要做的就是查看停止/开始位是否有 1 到零的转换，这将表示一个新单词的开始。

这样，您可以将时钟之间的误差每隔这么多位重置为零，确保它不会累积并导致问题。[关于异步串行通信](http://en.wikipedia.org/wiki/Asynchronous_start-stop)的维基百科页面更详细地讨论了我刚才所说的内容。

# php - 通过 php 和 seo 重定向外部广告链接

> ID：10640113
> 
> 赞同：0
> 
> 时间：2012-05-17T16:58:17.830
> 
> 标签：php, redirect, seo, pagerank, ads

大约我已经阅读了 SO 提出的所有问题，但没有得到我的答案！我需要知道使用 PHP 使搜索引擎友好重定向成为外部广告链接的最佳方法是什么？例如，对于一个站点的链接，我们的站点中有一个 url： `http://www.oursite.com/ads.php?ad=1` 并且必须重定向到这个： `httP://www.somesite.com` 我们如何在不丢失 PR 或搜索引擎信任的情况下重定向它？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:00:02.287

1.  使用`rel="nofollow"`. 事实上，谷歌要求付费链接。
2.  `x-robots`使用 robots.txt 或HTTP 标头标记阻止重定向脚本

# python - 在 Python 中叠加两个相同大小的图像

> ID：10640114
> 
> 赞同：26
> 
> 时间：2012-05-17T16:58:18.173
> 
> 标签：python, python-imaging-library

我有两张尺寸完全相同的图像，我要做的就是拍摄一张，使其透明 50%，然后将其直接放在另一张的顶部，如下所示：

```
import Image

background = Image.open("bg.png")
overlay = Image.open("over.png")

background = background.convert("RGBA")
overlay = overlay.convert("RGBA")

background_pixels = background.load()
overlay_pixels = overlay.load()

for y in xrange(overlay.size[1]):
    for x in xrange(overlay.size[0]):
         background_pixels[x,y] = (background_pixels[x,y][0], background_pixels[x,y][1], background_pixels[x,y][2], 255)

for y in xrange(overlay.size[1]):
    for x in xrange(overlay.size[0]):
         overlay_pixels[x,y] = (overlay_pixels[x,y][0], overlay_pixels[x,y][1], overlay_pixels[x,y][2], 128)

background.paste(overlay)
background.save("new.png","PNG") 
```

但我得到的只是 50% 的透明覆盖层（所以到了一半！）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-17T17:01:25.280

尝试使用[blend()](http://www.pythonware.com/library/pil/handbook/image.htm)而不是 paste() - 似乎 paste() 只是用您粘贴的内容替换原始图像。

```
try:
    from PIL import Image
except ImportError:
    import Image

background = Image.open("bg.png")
overlay = Image.open("ol.jpg")

background = background.convert("RGBA")
overlay = overlay.convert("RGBA")

new_img = Image.blend(background, overlay, 0.5)
new_img.save("new.png","PNG") 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-06-25T19:31:01.437

也许太老的问题，可以轻松使用`opencv`

```
cv2.addWeighted(img1, alpha, img2, beta, gamma)
#setting alpha=1, beta=1, gamma=0 gives direct overlay of two images 
```

[文档链接](http://docs.opencv.org/trunk/d0/d86/tutorial_py_image_arithmetics.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T21:48:53.123

提供覆盖 alpha 掩码参数，看看这是否会产生您预期的结果：

```
background.paste(overlay, overlay.size, overlay) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-29T23:37:47.613

如果您想将它们调整为相同的形状：

```
b_h, b_w, b_ch = background.shape
W = 800
imgScale = W/b_w
new_b_h,new_b_w = int(b_h*imgScale), int(b_w*imgScale)
new_background = cv2.resize(background,(new_b_w, new_b_h)) 
```

然后你可以填充适合背景和前景的形状。

```
square= np.zeros((new_b_h, new_b_w, b_ch), np.uint8)
square.fill(255)
x= new_b_w
y= new_b_h
offset =0
square[int(y - new_b_h) - offset:int(y)- offset, int(x-new_b_w)- offset:int(x)- offset] = new_background 
```

现在您可以叠加：

```
OPACITY = 0.7
added_image = cv2.addWeighted(new_background,OPACITY,square, 1-OPACITY, 0) 
```

详情在[github上](https://github.com/pydemo/overlay)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-16T06:11:49.667

[此处](https://pythontic.com/image-processing/pillow/blend)的脚本也将使用混合来完成任务，它还具有调整图像大小的功能，以便在它们当前不具有相同大小的情况下使它们具有相同的大小。

# linux - 优化嵌入式 linux 系统的根文件系统大小

> ID：10640116
> 
> 赞同：2
> 
> 时间：2012-05-17T16:58:30.793
> 
> 标签：linux, filesystems, embedded

我正在开发一个在 linux 上运行的嵌入式系统。为了减少产品的启动时间（它是一个 IP 网络摄像机），我想**减少根文件系统的大小**。我已经有一个功能性的根文件系统，目前正在手动删除部分并查看根文件系统是否会挂载。是否有一种更合乎逻辑的方法来减少文件系统大小而不是当前的试错方法 **更新了更多细节**：目标上使用的原始文件系统是我们组织中跨多个嵌入式产品使用的通用文件系统。我想将文件系统精简到运行我的特定产品 .ie IPNetCam 所需的最低限度。我想知道是否有任何分析方法可以确定启动和运行特定应用程序所需的确切文件集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:04:03.553

如果您还没有这样做，您应该使用压缩文件系统，例如[SquashFS](http://squashfs.sourceforge.net/)。这将大大减少启动映像的占用空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T08:56:22.493

列出操作系统及其应用程序使用的文件的一种方法是：

*   打开文件系统上的 atime 标志（如果尚未设置）
*   重启
*   在您的应用程序运行足够长的时间后，使用 atime 找出上次启动后访问了哪些文件：

* * *

```
# last reboot | head -1
reboot   system boot  2.6.35-30-generi Sun May 20 10:08 - 10:48  (00:40)
# touch -d "2012-05-20 10:07" /tmp/ref
# find / -xdev -anewer /tmp/ref > /tmp/usedFiles 
```

当然，此方法会忽略在您的示例运行中未访问但在不常见或特殊情况下仍然需要的文件。当以只读模式访问文件系统时，您还需要在早期阶段添加引导加载程序或操作系统直接读取的文件。

# macos - 制作特定于应用程序的私钥链

> ID：10640119
> 
> 赞同：0
> 
> 时间：2012-05-17T16:58:39.817
> 
> 标签：macos, keychain

在 Mac OS X 上，是否可以创建受密码保护的私有钥匙串，使其只能由特定应用程序访问，而该机器中的其他应用程序不能访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T01:05:06.863

经过大量研究，我发现仅仅因为钥匙链应该工作的方式，这实际上是不可能的。

# google-app-engine - 如何在 App Engine 上实现服务器关联或粘性会话？

> ID：10640120
> 
> 赞同：9
> 
> 时间：2012-05-17T16:58:51.280
> 
> 标签：google-app-engine, session-state, sticky

我的应用程序希望：

1.  自动可扩展性

    *   我希望 App Engine 在流量增加时启动我的应用的新实例
    *   当实例空闲时，我希望 App Engine 将它们关闭
2.  客户端/服务器亲和性

    *   在一个初始的client->server HTTP请求之后，我希望clients能够连接到同一个appserver，这样appserver就可以维护一堆client状态
    *   状态可能会频繁更新（为了支持实时交互），因此基于 memcache+datastore 的持久性是不可取的。
    *   服务器可能需要根据多个客户端的状态做出决策，例如实时多人游戏

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T17:47:13.063

您可以使用 App Engine 后端（长期运行、可配置、可寻址、持久的服务器）实现这些目标：

*   [https://developers.google.com/appengine/docs/python/backends/](https://developers.google.com/appengine/docs/python/backends/)
*   [https://developers.google.com/appengine/docs/java/backends/](https://developers.google.com/appengine/docs/java/backends/)

### Python 实现

1.  将后端配置为*公共*和*动态的*

    ```
    # backends.yaml

    backends:
    - name: foo
      instances: 20
      options: public, dynamic 
    ```

2.  除了以通常的方式部署您的应用程序之外：

    ```
    appcfg.py update . 
    ```

    记得部署你的后端：

    ```
    appcfg.py backends . update 
    ```

3.  对于初始连接，让您的客户端使用非实例特定的后端主机名，例如：

    ```
    foo.your_app_id.appspot.com 
    ```

    App Engine 将在可选地启动新的后端实例后将您的请求路由到可用的后端实例。

4.  在服务器上的请求处理代码中，使用后端 API 来确定哪个实例正在处理请求，并向客户端返回一个实例特定的 URL。

    ```
    from google.appengine.api import backends

    import webapp2

    class GetPersistentUrlHandler(webapp2.RequestHandler):

      def get(self):
        """Return the current backend's instance-specific URL."""

        my_url = backends.get_url(instance=backends.get_instance())
        self.response.write(my_url)

    app = webapp2.WSGIApplication([
      ('/get_peristent_url', GetPersistentUrlHandler),
    ], debug=True) 
    ```

5.  客户端与实例特定的后端 URL 建立后续连接：

    ```
    http://3.foo.your_app_id.appspot.com 
    ```

    *注意：使用 https 时，请务必将子域点替换`-dot-` 为以避免 SSL 证书问题。*

    ```
    https://3-dot-foo.your_app_id.appspot.com 
    ```

### 限制

1.  后端不会永远存在，可能会意外关闭，恕不另行通知
2.  您的应用程序可以拥有的后端数量目前是有限的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T17:16:50.820

为了补充 Adam 的好答案：您不需要 GAE 中的服务器亲和性，因为存储在 HTTP 会话中的数据不是保存在内存中，而是保存在持久数据存储中。因此，任何服务器都会找到之前存储在会话中的任何其他服务器。请参阅[文档](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessions)：

> App Engine 包括使用 servlet 会话接口的会话实现。该实现将会话数据存储在 App Engine 数据存储中以实现持久性，并且还使用 memcache 来提高速度。与大多数其他 servlet 容器一样，`session.setAttribute()`在请求期间设置的会话属性在请求结束时保留。
> 
> 此功能默认关闭。要打开它，请将以下内容添加到 appengine-web.xml：
> 
> ```
> <sessions-enabled>true</sessions-enabled> 
> ```
> 
> `_ah_SESSION`该实现使用前缀为 的键创建类型的数据存储实体和内存缓存条目`_ahs`。
> 
> 注意：因为 App Engine 将会话数据存储在数据存储区和内存缓存中，所以存储在会话中的所有值都必须实现该 `java.io.Serializable`接口。
> 
> 通过将应用程序配置为将 HTTP 会话数据异步写入数据存储区，可以减少请求延迟：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:11:46.703

自动可扩展性是 AppEngine 最擅长的，也是它与其他云托管提供商的最大区别。无需您做任何额外工作即可满足您的两个要求。

AppEngine 没有单独服务器的概念。在创建一个好的、可扩展的 AppEngine 应用程序时，您不能以这样的方式思考。但是，您可以在 Memcache 或 Datastore 中的请求之间存储客户端状态，这些请求在应用程序代码的所有实例之间共享。

# objective-c - 我可以在 Objective-C 中为成员指定自定义属性吗？

> ID：10640124
> 
> 赞同：11
> 
> 时间：2012-05-17T16:58:58.623
> 
> 标签：objective-c

当我声明一个属性时，我可以在声明中放入各种属性，这对于编译器会有特殊的意义：

```
@property (nonatomic, retain) NSNumber *consumption; 
```

这里，`nonatomic`和`retain`是属性。是否可以添加自定义属性，并能够在运行时检查该属性是否存在？例如：

```
@property (nonatomic, retain, test) NSNumber* consumption; 
```

我基本上使用的构造可以替换我从 C#/.NET 知道的属性的使用 - 所以也欢迎其他建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:36:43.647

您不能在`@property()`不修改编译器的情况下添加属性。

请注意，一般来说，`@property`完全不鼓励在运行时抓取声明的现有属性。运行时确实提供了一个 API，您可以通过它执行此操作，但它不适合通用用途，并且将来可能会发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:44:29.607

您始终可以将属性名称的 NSDictionary 添加到属性的 NSArray。这可以通过 objc_setAssociatedObjects 和 objc_getAssociatedObjects API 存储在与原始对象关联的基类或单独类中。

有关这些 API 的信息，请参见[此处](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html)。由于您需要更改编译器，因此这并不完全是您要查找的内容，而是一种将元数据添加到任何对象的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:08:20.127

向属性添加自定义属性并不常见，但我认为是可取的。此功能可用于自定义遍历类的属性。我在处理 SQL 时需要这个功能：如果我们有类似的属性：`EXCLUDE_FROM_SELECT`, `INCLUDE_BY_INSERT`, `EXCLUDE_FROM_UPDATE`... 那么它会非常好。

实际上，我不确定是否有办法为 @property 指令启用它。但是，我们也许可以做类似的事情：

如果你看一下 objc/runtime.h 你会发现一个函数：`class_replaceProperty`，它没有记录在官方网站上。记录了一个类似的函数`class_addProperty`，可以帮助您理解前一个的论点。实际上，我认为@property 利用这个函数来进行属性设置（但我无法证明它确实如此）。

您可能还需要以下功能：

```
void class_copyPropertyList(...);
void property_copyAttributeList(...);
void class_getProperty(...); 
```

通过使用这些函数，您可以执行@property 实际执行的操作。

我对前面的 SQL 问题所做的是定义 3 个函数来注册自定义属性：

```
void prepareClass(...);
void registerAttributes(...);
void endRegister(...); 
```

然后我们可以在`+initialize`您的 tagart 类的函数中进行注册。

但是，使用代码（与简单的@interface + @property 声明相比）可能不是您的最佳解决方案，因为我们可能希望直接从声明中查看属性设置。`__attribute__((constructor))`实际上我们可以通过使用and 宏来做得更好：

@interface @end 实际上允许您这样做：

```
@interface MyVO : NSObject
__attribute__((constructor))
void prepareForMyVO(){ prepareClass(MyVO);}
@property (strong) id p1;
__attribute__((constructor))
static void registerAttrForP1(){ registerAttributes("p1", EXCLUDE_FROM_SELECT);}
@property (strong) id p2;
__attribute__((constructor))
static void registerAttrForP2(){ registerAttributes("p2", INCLUDE_BY_INSERT);}
@end
__attribute__((constructor))
static void endRegisterForMyOV(){ endRegister();}; 
```

因此，您可以定义宏来处理此硬代码：

```
#define $p(clazz, zuper) class : zuper \
__attribute__((constructor)) static void prepareFor ## clazz(){ prepareClass(#MyVO);}
#define $r(p, attr) p; \
__attribute__((constructor)) static void registerAttrFor ## p(){ registerAttributes(#p, attr);}
#define $e(clazz) __attribute__((constructor)) static void endRegister ## clazz(){ endRegister();};

@interface $p(MyVO, NSObject)
@property (strong) id $r(p1, EXCLUDE_FROM_SELECT);
@property (strong) id $r(p1, INCLUDE_BY_INSERT);

@end $e(MyVO) 
```

PS：上面的编码不是确切的编码，它只是一个例子。而且我不确定最后一个宏解决方案是否有效，希望这会有所帮助。

# java - 为什么枚举对象存在时getEnum返回null？

> ID：10640130
> 
> 赞同：0
> 
> 时间：2012-05-17T16:59:28.013
> 
> 标签：java, jakarta-ee, enums, apache-commons

我正在看一门类似于下面的课程。我更改了类名和变量名以避免将实际的公司名称放在这里（对不起）。

```
import org.apache.commons.lang.enums.Enum;

public class Animal extends Enum {

    public static final Animal DOG = new Animal("Dog");
    public static final Animal CAT = new Animal("Cat");

    private Animal(String name) {
        super(name);
    }

    public static Animal getAnimal(String code) {
        return (Animal) getEnum(Animal.class, code);
    }
} 
```

当 getAnimal 作为参数传递“狗”时，它返回一个动物。但是，当将“Cat”作为参数传递时，它返回 null。为什么会发生这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:20:42.110

在现代 Java 中，你会写：

```
enum Animal {
    Dog, Cat;
} 
```

并使用

```
Animal.valueOf(name) 
```

从其名称中获取枚举值。（在 7 年多前发布的 Java 5 中添加了枚举类型。）

如果您仍然停留在不支持枚举的 Java 版本上，一种方法是调试`org.apache.commons.lang.enums.Enum.getValue`. 实施几乎不会是火箭科学;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:10:49.243

我认为您需要扩展`ValuedEnum`而不是（请参阅[文档](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/enum/ValuedEnum.html)`Enum`中的示例）

# php - PHP/ARRAY/TABLE - 我的桌子太多了

> ID：10640135
> 
> 赞同：0
> 
> 时间：2012-05-17T16:59:40.697
> 
> 标签：php, arrays, api

我需要一点帮助，我将数组转换为表格的循环效果很好，只是它为我的结果增加了很多额外的东西。

这是创建表格以显示来自 Facebook Graph API 的朋友的循环。

```
<? 

sort($friends_data['data']);
    echo "<tr>"; 
    foreach ($friends_data['data'] as $friend)
    {
    $names = substr($friend['name'],0,1);

        if ($names == 'M') {
             echo "<td><ul><a href='https://www.facebook.com/".$friend['id']."' target='_blank'>".$friend['name']."</a></ul></td>"; 
            }

      if (($current_col++)%$cols == 0){
        echo "</tr><tr>";
      }
    }
   while (($current_col++)%$cols !=0){
   echo "<td>&nbsp;</td>";
   }
   echo "</tr>"; 
?> 
```

这是它吐出来的（朋友删除）：

```
<table border="0" cellpadding="4" cellspacing="10" width="100%" ><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr><td>&nbsp;</td></tr></table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:09:36.613

你没有对待任何情况`<td/>`，当`($names != 'M')`它会给你空`<tr>`，没有`td` 你只是有的`<td>`时候`($names == 'M')`

尝试这个

```
<? 

sort($friends_data['data']);
    echo "<tr>"; 
    foreach ($friends_data['data'] as $friend)
    {
    $names = substr($friend['name'],0,1);

        if ($names == 'M') {
             echo "<td><ul><a href='https://www.facebook.com/".$friend['id']."' target='_blank'>".$friend['name']."</a></ul></td>"; 
            }
        else
        {
             //this of $name is not 'M'
             //assume empty if $name is not 'M'
             echo "<td>&nbsp;</td>";
         }

      if (($current_col++)%$cols == 0){
        echo "</tr><tr>";
      }
    }
   while (($current_col++)%$cols !=0){
   echo "<td>&nbsp;</td>";
   }
   echo "</tr>"; 
?> 
```

或者假设您是否只想显示`$names == 'M'`

```
<? 

sort($friends_data['data']);
    echo "<tr>"; 
    foreach ($friends_data['data'] as $friend)
    {
    $names = substr($friend['name'],0,1);

        if ($names == 'M') {
             echo "<td><ul><a href='https://www.facebook.com/".$friend['id']."' target='_blank'>".$friend['name']."</a></ul></td>"; 
            if (($current_col++)%$cols == 0){
                echo "</tr><tr>";
            }
        }              
    }
   while (($current_col++)%$cols !=0){
   echo "<td>&nbsp;</td>";
   }
   echo "</tr>"; 
?> 
```

# ios - 如何创建在地图上多个位置显示标记的 MapView？

> ID：10640139
> 
> 赞同：-1
> 
> 时间：2012-05-17T16:59:43.027
> 
> 标签：ios, mkmapview

如何创建在地图上多个位置显示标记的 MapView，并且每个标记应具有缩略图、标题和副标题。如果这是可能的，请让我知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:23:50.687

我相信您正在寻找的是添加注释。为此，您可能需要创建一个符合 MKAnnotation 协议的对象（或使用现有对象）。

有关更多详细信息，请参阅[此链接](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/doc/uid/TP40008205-CH3-SW26)。

# android - Android：对选项卡和指示符状态使用不同的视图

> ID：10640140
> 
> 赞同：0
> 
> 时间：2012-05-17T16:59:46.713
> 
> 标签：android, view, tabs, state

当我将视图用作 tabSpec 指示器时，无论是否选择选项卡，视图都是相同的。

有什么方法可以使用不同的视图，比如当我们为选定的选项卡使用不同的可绘制（选择器）时？

我已经尝试过使用选择器，但它只允许更改图标。我想要的是使用自定义视图，并且仍然能够为不同的选项卡状态使用不同的视图。

这是我的代码：

```
View profilInd = getLayoutInflater().inflate(R.layout.tabs_profil_layout, null);
Intent profilIntent = new Intent(this, MyProfilActivity.class);
tabHost.addTab(tabHost.newTabSpec("profil").setIndicator(profilInd).setContent(profilIntent)); 
```

tabs_profil_layout 布局是一个带有 ImageView 和 TextView 的简单 LinearLayout。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:11:28.357

您想要做的是在您的视图/drawable 中使用一个选择器，它将在选定状态和未选定状态之间变化。

这个问题涵盖了一些类似的主题：[Android : Customizing tabs on state : How do I make a selector a drawable](https://stackoverflow.com/questions/773690/android-customizing-tabs-on-state-how-do-i-make-a-selector-a-drawable)

本质上，您将制作一个看起来像这样的可绘制资源：

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_pressed="true"
           android:drawable="@drawable/button_pressed" /> <!-- pressed -->
     <item android:state_focused="true"
           android:drawable="@drawable/button_focused" /> <!-- focused -->
     <item android:drawable="@drawable/button_normal" /> <!-- default -->
 </selector> 
```

然后您将其分配给选项卡。

您可以在此处了解有关选择器和 Drawable的更多信息[。](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

# html - 如何使用 PDFbox 创建固定宽度的段落？

> ID：10640152
> 
> 赞同：16
> 
> 时间：2012-05-17T17:00:28.380
> 
> 标签：html, pdfbox, paragraph

我可以像这样插入简单的文本：

```
document = new PDDocument();
page = new PDPage(PDPage.PAGE_SIZE_A4);
document.addPage(page);
PDPageContentStream content = new PDPageContentStream(document, page);
content.beginText();
content.moveTextPositionByAmount (10 , 10);
content.drawString ("test text");
content.endText();
content.close(); 
```

但是如何使用 width 属性创建类似于 HTML 的段落？

```
<p style="width:200px;">test text</p> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-01T01:21:49.117

> **警告**：此答案适用于旧版本的 PDFBox，并且依赖于已弃用的功能。有关更多详细信息，请参阅下面的评论。

根据[这个答案](https://stackoverflow.com/a/7598157/520779)，不可能在某些文本中插入换行符并让 PDF 正确显示（无论是使用 PDFBox 还是其他东西），所以我相信自动换行一些文本以适应某个宽度也可能是它不能自动做。（此外，有很多方法可以包装文本 - 仅整个单词，将它们分成较小的部分等）

[This answer](https://stackoverflow.com/a/6531362/520779) to another question (about centering a string) 提供了一些关于如何自己执行此操作的指示。假设您编写了一个函数`possibleWrapPoints(String):int[]`来列出文本中可能发生自动换行的所有点（不包括“零”，包括“文本长度”），一种可能的解决方案可能是：

```
PDFont font = PDType1Font.HELVETICA_BOLD; // Or whatever font you want.
int fontSize = 16; // Or whatever font size you want.
int paragraphWidth = 200;
String text = "test text";

int start = 0;
int end = 0;
int height = 10;
for ( int i : possibleWrapPoints(text) ) {
    float width = font.getStringWidth(text.substring(start,i)) / 1000 * fontSize;
    if ( start < end && width > paragraphWidth ) {
        // Draw partial text and increase height
        content.moveTextPositionByAmount(10 , height);
        content.drawString(text.substring(start,end));
        height += font.getFontDescriptor().getFontBoundingBox().getHeight() / 1000 * fontSize;
        start = end;
    }
    end = i;
}
// Last piece of text
content.moveTextPositionByAmount(10 , height);
content.drawString(text.substring(start)); 
```

的一个示例`possibleWrapPoints`，它允许在不属于单词（[reference](https://stackoverflow.com/a/2206432/520779)）的任何点进行换行，可能是：

```
int[] possibleWrapPoints(String text) {
    String[] split = text.split("(?<=\\W)");
    int[] ret = new int[split.length];
    ret[0] = split[0].length();
    for ( int i = 1 ; i < split.length ; i++ )
        ret[i] = ret[i-1] + split[i].length();
    return ret;
} 
```

**更新：**一些附加信息：

*   PDF 文件格式旨在在不同情况下看起来相同，您要求的功能在 PDF 编辑器/创建器中是有意义的，但在 PDF 文件*本身*中则不然。出于这个原因，大多数“低级”工具倾向于专注于处理文件格式本身，而放弃类似的东西。

*   更高级别的工具OTOH通常有办法进行这种转换。一个例子是[Platypus](http://www.reportlab.com/apis/reportlab/dev/platypus.html#)（不过对于 Python），它**确实**有创建段落的简单方法，并且依赖于较低级别的[ReportLab](http://www.reportlab.com/)函数来进行实际的 PDF 渲染。我不知道用于 PDFBox 的类似工具，但[这篇文章](https://blogs.oracle.com/chrisf/entry/converting_html_to_pdf_using)提供了一些关于如何在 Java 环境中使用免费提供的工具将 HTML 内容转换为 PDF 的提示。我自己没有尝试过，但我在这里发帖，因为它可能有用（以防我上面的手工尝试还不够）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-21T10:11:34.000

我一直在努力将 Lukas 的答案与 mgibsonbr 结合起来，并达到了这一点。我认为对寻找开箱即用解决方案的人更有帮助。

```
private void write(Paragraph paragraph) throws IOException {
    out.beginText();
    out.appendRawCommands(paragraph.getFontHeight() + " TL\n");
    out.setFont(paragraph.getFont(), paragraph.getFontSize());
    out.moveTextPositionByAmount(paragraph.getX(), paragraph.getY());
    out.setStrokingColor(paragraph.getColor());

    List<String> lines = paragraph.getLines();
    for (Iterator<String> i = lines.iterator(); i.hasNext(); ) {
        out.drawString(i.next().trim());
        if (i.hasNext()) {
            out.appendRawCommands("T*\n");
        }
    }
    out.endText();

}

public class Paragraph {

    /** position X */
    private float x;

    /** position Y */
    private float y;

    /** width of this paragraph */
    private int width = 500;

    /** text to write */
    private String text;

    /** font to use */
    private PDType1Font font = PDType1Font.HELVETICA;

    /** font size to use */
    private int fontSize = 10;

    private int color = 0;

    public Paragraph(float x, float y, String text) {
        this.x = x;
        this.y = y;
        this.text = text;
    }

    /**
     * Break the text in lines
     * @return
     */
    public List<String> getLines() throws IOException {
        List<String> result = Lists.newArrayList();

        String[] split = text.split("(?<=\\W)");
        int[] possibleWrapPoints = new int[split.length];
        possibleWrapPoints[0] = split[0].length();
        for ( int i = 1 ; i < split.length ; i++ ) {
            possibleWrapPoints[i] = possibleWrapPoints[i-1] + split[i].length();
        }

        int start = 0;
        int end = 0;
        for ( int i : possibleWrapPoints ) {
            float width = font.getStringWidth(text.substring(start,i)) / 1000 * fontSize;
            if ( start < end && width > this.width ) {
                result.add(text.substring(start,end));
                start = end;
            }
            end = i;
        }
        // Last piece of text
        result.add(text.substring(start));
        return result;
    }

    public float getFontHeight() {
        return font.getFontDescriptor().getFontBoundingBox().getHeight() / 1000 * fontSize;
    }

    public Paragraph withWidth(int width) {
        this.width = width;
        return this;
    }

    public Paragraph withFont(PDType1Font font, int fontSize) {
        this.font = font;
        this.fontSize = fontSize;
        return this;
    }

    public Paragraph withColor(int color) {
        this.color = color;
        return this;
    }

    public int getColor() {
        return color;
    }

    public float getX() {
        return x;
    }

    public float getY() {
        return y;
    }

    public int getWidth() {
        return width;
    }

    public String getText() {
        return text;
    }

    public PDType1Font getFont() {
        return font;
    }

    public int getFontSize() {
        return fontSize;
    }

} 
```

# cmd - 批处理脚本从 cmd 捕获输出

> ID：10640153
> 
> 赞同：2
> 
> 时间：2012-05-17T17:00:31.200
> 
> 标签：cmd, batch-file

我正在尝试从“调用 ppm 查询断言”捕获 stoutput，如果它等于“ *** no packages installed matching 'assert' **** ”或更好但包含字符串“no packages”做“something”..正在安装包裹。任何建议都会很棒..我一直在为此挠头。提前致谢。

```
:datetime
echo Installing datetime package
call ppm query assert
IF "%OUT%" == "*** no packages installed matching 'assert' ***" (
    echo testtest
::ppm install datetime
pause
) ELSE (
GOTO :win32::api
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:29:48.900

```
call ppm query assert | findstr /c:"no packages" >nul && (
  echo package not found
) || (
  echo package found
) 
```

# sql-server-2008 - 拒绝访问（SQL 编辑器）

> ID：10640156
> 
> 赞同：0
> 
> 时间：2012-05-17T17:00:42.500
> 
> 标签：sql-server-2008

我在 SQL Server 2008 中有一个员工数据库。当我右键单击任何表并选择**编辑前 200 行时**，它会显示以下错误框： ![访问被拒绝错误](../Images/71177f6c74f55c0b4ede41e472bbb348.png)

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-18T22:01:12.727

转到SqlServer配置管理器，右键单击您的服务器，在内置服务上，从网络服务更改为本地服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-28T15:58:38.683

我认为您的数据库需要连接互联网

1.  以管理员身份打开你的 sql server management studio
2.  将您的 PC 连接到互联网，然后选择编辑

# javascript - javascript字典的键不存储为值，而是作为变量名

> ID：10640159
> 
> 赞同：92
> 
> 时间：2012-05-17T17:00:56.220
> 
> 标签：javascript

我正在尝试像这样创建一个字典对象

```
var obj = { varName : varValue }; 
```

我期待的是，如果`varName='foo'`，obj 应该是`{'foo', 'some value' }`但是我看到的是`{varName, 'some value'}`变量的值没有被使用，而是变量名作为键。如何使变量值用作键？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-05-17T17:02:42.853

试试这样：

```
var obj = {};
obj[varName] = varValue; 
```

您不能在旧 Javascript 中使用“动态”键初始化对象。`var obj = { varName : varValue };`相当于`var obj = { "varName" : varValue };`。这就是 Javascript 的解释方式。

然而，新的 ECMAScript 支持[*计算属性名称*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names)，您可以这样做：

```
var obj = { [varName]: varValue }; 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2016-08-24T13:28:15.117

从去年获得更好的浏览器支持的 ECMAScript 2015 开始，您可以使用变量索引表示法：

```
const obj = { [varName] : varValue }; 
```

这在语法上与

```
var obj = {};
obj[varName] = varValue; 
```

您还可以使用表达式或符号作为属性键：

```
const contact = {
    company: companyName,
};
const companiesWithContacts = {
    [contact.company.toLowerCase()]: true
}; 
```

```
const myList = {
    [Symbol.iterator]: createIteratorForList
};
function createIteratorForList() { ... } 
```

# java - 表达式的类型必须是数组类型，但它解析为对象

> ID：10640161
> 
> 赞同：2
> 
> 时间：2012-05-17T17:01:01.000
> 
> 标签：java, arraylist

我不断收到这个错误，我不知道如何解决它，我有一个`ArrayList`对象数组，我可以存储元素，但我不确定如何将元素取出，这里有什么明显错误的吗？

```
ArrayList<Object[]> pA = processArray(statii);
        for(Object pAs: pA){
            Toast.makeText(TweetstagramActivity.this, pAs[0], //error occurs here
                    Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:01:49.093

这就是问题：

```
for(Object pAs: pA) { 
```

你要：

```
 for (Object[] pAs : pA) { 
```

第一个是*合法*的，因为任何`Object[]`引用也是有效的`Object`引用 - 但是你不能`pAs[0]`像你试图在循环中那样使用。

（顺便说一句，我还鼓励您使用更具描述性的变量名称。）

# sql - 这种数据库设计是否适合存储调查结果？

> ID：10640163
> 
> 赞同：0
> 
> 时间：2012-05-17T17:01:03.383
> 
> 标签：sql, database, database-design

在我公司，我们要求所有部门的所有员工都参加了一项调查。本次调查的结构如下：分为四类；一、二、三、四。三个类别有几个问题，而最后一个类别有从 A 到 L 的子类别。每个子类别都有很多问题。这些问题中的大多数都有子问题。

有两种问题；具有不同选择数（有时是 2 或 4 或 5 或 6 个选择）和书面问题的多项选择题（例如请对以下内容发表评论......）。包含子问题的问题示例：您如何看待以下服务？服务 1
服务 2 服务 3

顺便说一句，这个问题是一个选择题，其中每个子问题（例如 service1）有 5 个选择。

**现在的问题**只是创建一个存储用户信息、问题和用户答案的​​数据库。该数据库的目的是稍后根据问题提出统计数据。例如，我必须编写一个查询来显示有多少员工对问题 #3 表示（同意或非常不同意）并显示子问题。

我想出了以下不完整的数据库设计，但它似乎很复杂：

```
Employee Table: Username, Name, DepartmentID
Department Table: DepartmentID, DepartmentName
Category Table: CategoryID, CategoryName
SubCategory Table: SubCategoryID, SubCategoryName, CategoryID
Question Table: QuestionID, Question
SubQuestion Table: SubQuestionID, SubQuestion, QuestionID
Answer Table: AnswerID, Answer, QuestionID, SubQuestionID 
```

那么，可以存储所有这些信息并为我提供所需的一般统计数据的最佳数据库设计是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:38:19.137

我的建议是这样的：

```
Employee Table: UserId, Username, Name, DepartmentId
Department Table: DepartmentId, DepartmentName
Category Table: CategoryId, CategoryName, ParentId

Question Table: QuestionId, Question, CategoryId
QuestionChoices Table: ChoiceId, QuestionId, Choice, Sequence

Answer Table: AnswerId, QuestionId, UserId, Text
AnswerChoices Table: AnswerId, QuestionId, UserId, ChoiceId, [Value] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:12:28.903

您的 Employee & Department 表看起来不错。我有以下建议：

-- 在各自的表格中包括子、类别、子和问题编号（即：I、II、III、IV 用于类别，A、B、C 等用于问题等等，假设 Question/CategoryName 是完整的-长度问题/类别）

-- QuestionID 表应该包含一个 SubCategoryID FK。

- 我也会有一个评论中建议的员工ID（用户名可以在人们离开后重用）。

-- 然后我会设计以下表格：

```
Answer Table:

AnswerID
SubquestionID
AnswerType (choose between 'Multiple', 'Long')
AnswerName (NULL if AnswerType is 'Long', a, b, c, etc if 'Multiple')

SurveyResults Table: 

EmpID (FK from Employee table),
SubQuestionID (a, b, c, ...; again if no subquestion, then put in a)
Answer (varchar(4000), so you can accommodate both types of answers) 
```

请注意，您应该保留一个答案表来保存多项选择题的选项。

# c# - C# - 从输出中获取特定文本

> ID：10640164
> 
> 赞同：0
> 
> 时间：2012-05-17T17:01:04.543
> 
> 标签：c#, listbox, split, minecraft

我有一个服务器包装器，它基本上从控制台获取输出并为我的世界提供额外的功能。

旁边有一个播放器列表，我希望列表显示连接的播放器。

```
Here is the output for a player Joining:
2012-05-17 17:56:32 [INFO] name [/192.168.0.16:50719] logged in with entity id 1873 at ([world] -34.8881557254211, 63.0, 271.69999998807907)

Output for player leaving:
2012-05-17 17:58:03 [INFO] name lost connection: disconnect.quitting 
```

如何在加入时将播放器添加到列表中，并在退出时删除？

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:15:22.180

您最好将玩家存储在字典（地图）中，然后您可以按名称添加和删除它们。

要捕获名称，您可以使用正则表达式，或者看起来您可以从名称位置开始获取子字符串，因为这看起来是一致的。

`string name = outputString.Substring(27)`

然后你可以分割一个空间并在位置 0 处获取结果。

`name = name.Split(' ')[0];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:08:07.137

有点hacky，但这应该可行：

```
var input = "2012-05-17 17:56:32 [INFO] name [/192.168.0.16:50719] logged in with entity id 1873 at ([world] -34.8881557254211, 63.0, 271.69999998807907)";

var name = Regex.Matches(input, @"\]\s(.+?)\s")[0].Groups[1].Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:10:05.783

更多的部分答案：

假设您只是解析控制台输出并相应地响应消息 - 您是否可以不只解析字符串以查看它是否包含某个短语，例如“登录”和“断开连接”？您可以使用正则表达式从字符串中获取所需的标记，以从消息中构建对象。我假设'name'是玩家的名字——在这种情况下你甚至可能不需要使用正则表达式——玩家可以在我的世界服务器上拥有重复的名字吗？

如果没有，那么您应该能够将此令牌用作字典的键，例如

```
Dictionary<string, playerObject> 
```

这样您就可以将消息与列表中的对象相关联，例如

伪代码：

```
private void OnNewMessage(string message) 
{
   if(message.Contains("logged in")) 
   {
      // Build player object
      // some code here ... to parse the string

      // Add to player dictionary
      PlayerDict.Add(playerName, newPlayerObject);
   }
   else if(message.Contains("disconnect")) 
   {
      // Find the player object by parsing the string
      PlayerDict.Remove(playerName);
   }
} 
```

你能提供更多关于你到目前为止所获得的信息以及你正在写这篇文章的技术吗？还有一些注意事项（因为您在标签中有列表框，我假设它是 winforms），例如绑定，并且根据使用的技术，方法可能略有不同

# vb.net - 仅当数据库中存在（非 Null）时才在中继器中显示容器项

> ID：10640171
> 
> 赞同：1
> 
> 时间：2012-05-17T17:01:52.733
> 
> 标签：vb.net, repeater, visibility

目前，如果 Address2（来自数据库）为 Null，则以下代码显示一个空行。如何以 <%#Container.DataItem("Address2")%> 的值为条件，以便在数据库中不存在（或为 Null）Address2 时摆脱空行？如果需要代码隐藏中的代码，请在 VB 中提供。

```
<asp:repeater id="rptLabels" runat="server">
    <HeaderTemplate></HeaderTemplate>
        <ItemTemplate>
             <span style="text-align:left;">         
                 <%#Container.DataItem("Address")%><br />             
                 <%#Container.DataItem("Address2")%><br />
             </span>
        </ItemTemplate>
    <FooterTemplate></FooterTemplate>
</asp:repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:43:56.680

我最终在比 aspx 页面更舒服的代码中做更多的事情来解决这个问题。

# asp.net - 调用 GetRequestStream 在 ASP.Net 中有效，但不适用于控制台应用程序

> ID：10640173
> 
> 赞同：1
> 
> 时间：2012-05-17T17:02:09.420
> 
> 标签：asp.net, .net, api, console, webrequest

我已经在基于 Web 的应用程序上使用了两年多的 ASP.Net 类中的一些代码。我希望在命令行工具中执行一些类似的业务功能。我在两个应用程序中使用相同的代码，但命令行应用程序在代码底部附近调用“GetRequestStream”时超时。

如果我在处理完 req 和 req2 后关闭它们，我就可以调用 GetRequestStream 了。但是，为了让 req3 进行身份验证，它需要 req 和 req2 保持打开状态。所以，如果我让 req 和 req2 保持打开状态，GetRequestStream 就会超时。如果我关闭 req 和 req2，则对 GetRequestStream 的调用有效，但 req3 无法进行身份验证。

正如我所提到的，完全相同的代码作为基于 Web 的 ASP.Net 应用程序运行良好。只有当我使用此类将其构建为基于控制台的应用程序时，我才会遇到这些问题。

我认为这一定是有联系的东西，但我对从.Net构建命令行应用程序还很陌生。

任何帮助，将不胜感激。

```
 string uri = baseUri + "auth/authrequired";
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
            req.Timeout = 1000000;
            req.Proxy = null;
            req.CookieContainer = cc;
            var MyWebResponse = (WebResponse)req.GetResponse();

            uri = baseUri + "authenticated/identity";
            HttpWebRequest req2 = (HttpWebRequest)WebRequest.Create(uri);
            req2.Timeout = 1000000;
            req2.Proxy = null;
            req2.CookieContainer = cc;
            MyWebResponse = req2.GetResponse();

            uri = baseUri + "j_security_check";
            string reqParams = "j_username=" + "jmclaughlin" + "&j_password=" + "jmclaughlin";  
            byte[] reqData = Encoding.UTF8.GetBytes(reqParams);

            HttpWebRequest req3 = (HttpWebRequest)WebRequest.Create(uri);
            req3.Timeout = 1000000;
            req3.Proxy = null;
            req3.CookieContainer = cc;
            req3.Method = "POST";
            req3.ContentType = "application/x-www-form-urlencoded";
            req3.AllowAutoRedirect = true;
            req3.ContentLength = reqData.Length;
            using (var s = req3.GetRequestStream())
                s.Write(reqData, 0, reqData.Length);
            MyWebResponse = req3.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:03:58.047

你在打电话`GetResponse`，但从不处理它。这使连接保持活动状态，直到响应完成。基本上，您应该使用一个`using`语句来响应：

```
using (var response = req.GetResponse())
{
    // Do whatever with the response
} 
```

因为您永远不会释放连接，所以当您用完与任何一台主机的并发连接限制时，您基本上是在等待旧连接被释放。如果您正确处理您的回复，那将不是问题。

它可能只在 ASP.NET 中工作，因为其他工作正在导致垃圾收集（并因此导致最终确定） - 但及时处理响应仍然会更好。

# sql - 我可以制作带参数的 Derby sql 脚本吗？

> ID：10640181
> 
> 赞同：0
> 
> 时间：2012-05-17T17:02:42.627
> 
> 标签：sql, derby, javadb

我想将 Derby 添加到我的 glassfish 应用程序中，以存储一条信息。

**但是，如果可以的话**，我不想通过应用程序进行插入/更新。

我可以使用脚本运行 ij 来创建数据库和表，但要进行插入和更新信息需要由用户提供，我找不到使用 ij 或任何其他工具的方法。我知道如何处理其他数据库，但我在 Derby 文档中迷失了方向。有没有办法使用参数运行 SQL 脚本？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:37:16.870

想到两个想法：

1.  编写一个程序，从用户那里获取信息，并根据需要生成包含该信息的 ij 脚本，然后运行您生成的 ij 脚本，
2.  从用户那里获取信息并将其写入 CSV 文件等形式，然后使用导入程序 (http://db.apache.org/derby/docs/10.8/ref/rrefimportproc.html) 读取CSV 文件中的数据并将其加载到数据库中。

但老实说，我总是从我的应用程序中进行插入和更新。它简单，易于编码，我可以完全按照我想要的方式获取数据，而且速度足够快。

# c# - 网页的电子邮件内容

> ID：10640183
> 
> 赞同：2
> 
> 时间：2012-05-17T17:02:49.217
> 
> 标签：c#, javascript, .net, web

我有一个 .Net 4.0 Web 应用程序，其中包含一些动态 jquery 图表和图形我希望能够将页面的当前内容通过电子邮件发送给登录用户，而无需任何功能，例如他们可以使用的打印页面参考。

基本上我想复制 javascript window.print() 函数但通过电子邮件发送内容。

我想以编程方式发送呈现的网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:32:51.907

这可能会做到。

将整个页面转换为 PDF

然后将 PDF 作为附件发送

[http://www.codeproject.com/Articles/7089/Generate-PDF-documents-from-a-HTML-page-using-ASP](http://www.codeproject.com/Articles/7089/Generate-PDF-documents-from-a-HTML-page-using-ASP)

[http://www.codeproject.com/Articles/5567/Create-and-manipulate-PDF-documents-100-NET](http://www.codeproject.com/Articles/5567/Create-and-manipulate-PDF-documents-100-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:28:36.433

PHP中有一个解决方案，所以我不知道这是否有用。您可以在模板中使用名为 Smarty 的模板库和您的普通 HTML 和 Jquery/Javascript，并将数据分配给模板中的变量。然后您可以使用 $smarty->fetch 命令将输出到浏览器的内容检索到变量中，然后在电子邮件中发送变量的内容。

这就是我为一些需要允许用户修改样式或通过 ajax 帖子添加评论的网络应用程序所做的。

# c# - 网络驱动程序。如何使用 C# 在多个浏览器中运行测试？

> ID：10640188
> 
> 赞同：0
> 
> 时间：2012-05-17T17:03:16.577
> 
> 标签：c#, webdriver, selenium-rc

请帮我，

我使用 selenium WebDriver 进行自动 Web 测试。如何使用 C# 使其在多个浏览器中并行运行？

如果有办法用配置文件做到这一点？将是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:24:03.663

您可以使用[Selenium Grid](http://selenium-grid.seleniumhq.org/)。

请参阅[描述该方法的博客文章](http://slmoloch.blogspot.co.uk/2009/12/design-of-selenium-tests-for-aspnet_19.html)

# drupal-6 - 如何覆盖默认的 drupal6 块模板？

> ID：10640191
> 
> 赞同：0
> 
> 时间：2012-05-17T17:03:30.483
> 
> 标签：drupal-6

我想自定义drupal 6的默认块，这样我就有自己的不同块模板..我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:51:05.830

自定义 block.tpl.php 的步骤

1.  从您当前启用的主题中复制 block.tpl.php 文件。
2.  粘贴它。
3.  将其命名为：块-{您的块的机器可读名称（或块ID）}.tpl.php 注意：“不要使用大括号{}。它只是为了分隔”
4.  转到您网站的管理部分并刷新所有缓存。
5.  而已。转到您决定显示块的位置并在您的自定义块-{您的块名称}.tpl.php 文件中进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T06:12:55.157

1) 转到主题文件夹 2) 将 block.tpl.php 的内容复制到一个新文件 block-div-id.tpl.php，其中 block-div-id 是您要自定义的块的 div id。3) 现在这个模板将被用来渲染那个块。

# haskell - 需要haskell中的示例函数 - function :: Num b => b -> a -> [a]

> ID：10640195
> 
> 赞同：-2
> 
> 时间：2012-05-17T17:04:01.470
> 
> 标签：haskell

有人可以给我一个使用这种数据类型的函数的例子：

```
function :: Num b => b -> a -> [a]
function a b = ... 
```

理想情况下， a 也是一个字符串。

不，这不是家庭作业 xD 我只需要一个项目示例。

我试过 take b (repeat a) 但我得到了错误

```
Could not deduce (b ~ Int)
from the context (Num b) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:07:01.130

您可以重复给定元素（类型`a`）`b`次以创建列表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:25:16.227

这会起作用（这是一个适合类型描述的函数）：

```
function :: Num b => b -> a -> [a]
function arg1 arg2 = [arg2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:17:57.867

Prelude 提供了许多不必要的单态函数（如`take`、`drop`、`!!`、`splitAt`等）：它们要求给定的数字是`Int`. 该模块`Data.List`导出了这些函数的更多多态版本，它们接受类中任何类型的参数`Integral`；它们具有相同的名称，但以 . 为前缀`generic`。所以，而不是`take a (repeat b)`，你可以尝试

```
function a b = genericTake a (repeat b) 
```

# javascript - 处理来自 SoundCloud 小部件的 JS 事件

> ID：10640197
> 
> 赞同：0
> 
> 时间：2012-05-17T17:04:09.877
> 
> 标签：javascript, events, event-handling, widget, soundcloud

我是一个尝试使用 SoundCloud 的新 HTML5 小部件的 javascript 新手。我还不完全了解事件。文档页面只是说

```
SC.Widget.Events.[something] — fired when [thing happens]. 
```

（通过[http://developers.soundcloud.com/docs/html5-widget](http://developers.soundcloud.com/docs/html5-widget)）。

一个代码示例会很棒，也许是对事件如何工作的基本解释。现在我让元素与

```
element.setAttribute("on[Something]", [function]()); 
```

我知道这不是最好的方法，并且表明对javascript事件缺乏了解。无论如何，即使是正确方向的链接也会很好；我一直在徒劳地寻找超越 onclick 等的 javascript 事件处理的清晰解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:04:09.487

看看操场：[http ://w.soundcloud.com/player/api_playground.html](http://w.soundcloud.com/player/api_playground.html)

[这](https://stackoverflow.com/questions/10288253/play-event-not-firing-on-start-on-html5-widget/10308295#10308295)是事件的工作示例`play`。

# c# - 在同一控制器操作的视图中显示不同的结果

> ID：10640200
> 
> 赞同：0
> 
> 时间：2012-05-17T17:04:34.827
> 
> 标签：c#, html, asp.net-mvc

我有一个控制器，它根据我提供的 StudentID 在视图中显示 CourseID 列表。这是控制器动作：

```
public ActionResult ShowCourseId(int StudentId)
{
    ViewData.Model = from c in course.vwCourse.Where(s => s.StudentID == StudentId)
                     group c by c.CourseID into g
                     select g.FirstOrDefault();

    return View();
} 
```

上述控制器可能会显示一个或多个 CourseID，具体取决于学生在他或她的购物车中可用的课程数量。现在，如果学生的购物车中没有可用的课程，我想显示所有课程。我可以在同一个控制器动作中实现这一点吗？还是我需要一个额外的控制器动作来显示所有课程？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:08:39.680

当然，你可能只需要给模型不同的数据，只要每个集合的类型相同。如果空购物车/显示所有课程具有不同的类型，您还可以告诉框架显示与“所有课程”模型相对应的不同视图。

我不知道您的对象模型是如何设置的，但是如果两个集合都是 Course 对象的集合，这是一个 hack 想法：

```
public ActionResult ShowCourseId(int StudentId)
{
    var studentCourses = (from c in course.vwCourse
                          where c.StudentID == StudentId
                          group c by c.CourseID into g
                          select g.FirstOrDefault()).ToList();

    if(studentCourses  == null || !studentCourses .Any())
    {
        studentCourses  = (from c in course.vwCourse
                           group c by c.CourseID into g
                           select g.FirstOrDefault()).ToList();
    }

    ViewData.Model = studentCourses;
    return View();
} 
```

第一个查询返回的类型是什么？它是课程的集合吗？

# javascript - 如何在 ie8 中检测参数对象？

> ID：10640202
> 
> 赞同：4
> 
> 时间：2012-05-17T17:04:37.880
> 
> 标签：javascript, internet-explorer, internet-explorer-8

跟进[如何检查对象是否是 JavaScript 中的参数对象？](https://stackoverflow.com/questions/7656280/how-do-i-check-whether-an-object-is-an-arguments-object-in-javascript)

给出的解决方案都不能在 IE8 中工作。有什么方法可以检测对象是否是 IE8 中的参数对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T01:52:05.710

@Rocket 和 @cliffs_of_insanity 是正确的，我最初一定是测试错了。

总之，我到达了：

```
var isArguments = function(obj) {
    return (obj != null) && // since undefined == null
        ((Object.prototype.toString.call(obj) == '[object Arguments]') ||
            (!!obj.callee)); // fixes for ie8 non-strict-mode
}; 
```

有关参数对象历史及其工作原理的更多信息：[https ://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments/callee](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments/callee)

# authentication - Joomla PHPmaker 身份验证

> ID：10640203
> 
> 赞同：0
> 
> 时间：2012-05-17T17:04:56.513
> 
> 标签：authentication, joomla2.5

我已经用 PHPmaker 创建了我的网页。现在我已经为我的主页安装了 Joomla。现在我的客户有两个用户名和密码来登录这个 PHPmaker 和 Joomla 创建的网页。

我想为 joomla 创建一个插件，因为当我的用户登录 joomla 时，它也会自动登录 PHHmaker 网页。这样我的客户就可以使用一个登录页面登录两个网站。

请指导我。

注意：- PHPmaker 网页的 Joomla 身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:23:55.503

如果您真的想这样做，您可以在此处获取有关如何构建远程 Joomla 登录部分的详细信息 -

[使用外部表单登录到 Joomla 1.5（不在 joomla 文件夹内，但在同一服务器上）](https://stackoverflow.com/questions/5176142/logging-in-to-joomla-1-5-using-external-form-not-within-joomla-folder-but-on-s/5207806#5207806)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T07:26:04.460

您需要通过脚本将登录凭据传递给 PHPMaker，这将创建您也可以在 Joomla 中使用的会话，否则如果您使用了 UserTrack 设置，那么您的用户会话数据将存储在用户表中的 Usertrack 字段中，您可以验证您的用户详细信息并使用 Usertrack 字段并使用它。

请让我知道这是否对您有用。

# android - Android合并图片

> ID：10640204
> 
> 赞同：0
> 
> 时间：2012-05-17T17:05:00.177
> 
> 标签：android, eclipse, image

嗨，我试图搜索这个但不是很幸运最相似的是这个 [http://ketankantilal.blogspot.com/2011/03/how-to-combine-images-and-store-to.html](http://ketankantilal.blogspot.com/2011/03/how-to-combine-images-and-store-to.html) 无论如何，我正在为安卓开发。问题是我有 png 格式的图像（或 jpg，因为 bmp 对于我的应用程序来说非常大）。如何从上到下组合三个图像。我不需要将它们保存在 sd 上只是为了显示它们。谢谢，如果存在类似的问题和答案，对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:21:12.217

您可以使用画布，然后使用适当的顶部和左侧偏移量绘制每个位图（假设每个图像都加载到位图对象中）。

您将通过先前绘制的位图的总大小来增加下一个位图的顶部偏移量。

查看[http://developer.android.com/reference/android/graphics/Canvas.html](http://developer.android.com/reference/android/graphics/Canvas.html)

例子：

```
public void stackImages(Context ctx)
{
    // base image, if new images have transparency or don't fill all pixels
    // whatever is drawn here will show.
    Bitmap result = Bitmap.createBitmap(400, 400, Bitmap.Config.ARGB_8888);

    // b1 will be on top
    Bitmap b1 = Bitmap.createBitmap(400, 200, Bitmap.Config.ARGB_8888);

    // b2 will be below b1
    Bitmap b2 = Bitmap.createBitmap(400, 200, Bitmap.Config.ARGB_8888);

    Canvas c = new Canvas(result);

    c.drawBitmap(b1, 0f, 0f, null);

    // notice the top offset
    c.drawBitmap(b2, 0f, 200f, null);

    // result can now be used in any ImageView
    ImageView iv = new ImageView(ctx);
    iv.setImageBitmap(result);

    // or save to file as png
    // note: this may not be the best way to accomplish the save
    try {
           FileOutputStream out = new FileOutputStream(new File("some/file/name.png"));
           result.compress(Bitmap.CompressFormat.PNG, 90, out);
    } catch (Exception e) {
           e.printStackTrace();
    }
} 
```

# apache - 与 mod_rewrite 的会话

> ID：10640208
> 
> 赞同：1
> 
> 时间：2012-05-17T17:05:09.743
> 
> 标签：apache, mod-rewrite

我使用 mod-rewrite 来创建人类可读的 url。（POST：[Mod 重写 - 使链接可读](https://stackoverflow.com/questions/10631829/mod-rewrite-make-link-readable)）

现在我有一个问题。我正在使用会话。我怎样才能转发会话ID？

我的 .htaccess

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example\.de$ [NC]
RewriteRule ^(.*)$ http://www.example.de$1 [R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/([^/]*)/([^/]*)\.html$ /?lang=$1&subid=$2&id=$3 [L] 
```

我的想法是这样改变它：

```
RewriteRule ^([^/]*)/([^/]*)/([^/]*)\.html?+(.*)+$ /?lang=$1&subid=$2&id=$3&$4 [L] 
```

但这不起作用。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:38:13.670

删除包含任何会话 ID的`RewriteRule`查询字符串。您需要添加`QSA`标志（查询字符串追加）：

```
RewriteRule ^([^/]*)/([^/]*)/([^/]*)\.html$ /?lang=$1&subid=$2&id=$3 [L,QSA] 
```

这将保留您的会话 ID。

# asp.net - 无法更改 div 的高度。

> ID：10640210
> 
> 赞同：0
> 
> 时间：2012-05-17T17:05:19.787
> 
> 标签：asp.net, css, html, height, ssi

我无法使用 CSS 更改 div 的高度。它似乎没有受到影响。代码如下。我正在使用 Javascipt 和 CSS 在 C# ASP.NET 中进行编码。以下代码包含在使用 SSI 的其他文件中。无论 的值如何，的高度`.navdiv`都不会改变`height:50px`。

ASPX

```
<link rel="Stylesheet" href="CSS/SSI/header.css" />
<div id="header">
    <div id="logo">
        <img id="imglogo" src="Images/logo.gif" />
    </div>
    <div id="nav">
        <a class="navlink" href="default.aspx">
            <div class="navdiv" id="navhome">
                Home
            </div>
        </a>
        <a class="navlink" href="import.aspx">
            <div class="navdiv" id="navimport">
                Import
            </div>
        </a>
    </div>
</div> 
```

CSS

```
/*
* header.css
* Created By: Steven T. Norris   Created On: 5/12/2012
* Update By:    Update On:
*
* Stylesheet for header SSI
*/

/*Main header style*/
#header
{

    background-color:#2875ff;
    border-color:Black;
    border-style:solid;
    border-width:2px;
    padding:0px;
    margin:0px;
}
#logo
{
    margin-bottom:10px;
}

#navhome
{
    height:100px;
}

/*Navigation styles*/
.navdiv
{
    height:50px;
    background-color:#000999;
    display:inline;
    margin-left:10px;
    padding-right:5px;
    padding-left:5px;
    font-size:large;
    text-align:center;
    color:#c24900;
    font-weight:bold;
    text-decoration:none;
}
.navdiv:hover
{
    color:White;
}
#nav
{
    padding:0px;
    margin:0px;
    height:auto;
    width:100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:09:32.503

height 属性对带有`display: inline`. 它必须是`block`或`inline-block`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:47:40.820

使用`display: inline-block;`将解决高度问题，但如果您希望 div 仍然并排，请务必添加`float: left;`到两个元素。

# java - 在 Web 服务服务器端 java 中设置 Header

> ID：10640211
> 
> 赞同：0
> 
> 时间：2012-05-17T17:05:22.283
> 
> 标签：java, web-services, soap, soapheader

我有一个 Web 服务客户端，它在请求消息中添加了一个肥皂头。

在 Web 服务服务器端，我访问此标头并验证消息，但我需要在响应消息的 soap 标头中发送参数。我怎样才能在 Java 中做到这一点？

# c# - 我可以在实体框架中合并来自多个数据库的对象吗？

> ID：10640212
> 
> 赞同：-1
> 
> 时间：2012-05-17T17:05:23.973
> 
> 标签：c#, .net, entity-framework

我试图找出解决这个问题的最佳方法是什么。我在两个不同的数据库中有一个 Customer 表（我知道这并不理想，但它不能被修改，我必须使用我得到的东西）。记录保持同步并共享多个字段（例如 CustomerId、CustomerName 等）。但他们也都有自己独特的领域......例如：

**数据库1 客户**

*   客户ID
*   顾客姓名
*   字段1
*   字段2

**Database2 客户**

*   客户ID
*   顾客姓名
*   不同场1
*   不同字段2

每个数据库都有自己的 dbContext，我可以独立地从中提取每个 Customer 对象。但我真正想要的是一个统一的客户对象，其中包括两个数据库中所有字段的联合。

完成此操作以便我可以公开单个统一对象的最佳方法是什么？

编辑：我正在使用 DbSet 并为我的上下文对象中的每个实体指定一个映射，如下所示：

```
public DbSet<Customer> Customers { get; set; } 
```

然后我的映射类具有典型的映射信息：

```
this.ToTable("Customer");
this.HasKey(t => t.CustomerId);
this.Property(t => t.CustomerName); 
```

等等，所以我正在寻找一种方法来使用多个表/数据库扩展这个逻辑，并且不仅能够执行查询，而且能够执行所有必要的 CRUD 操作

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:41:58.880

您需要做的就是声明一个代表统一对象的类：

```
public class UnifiedCustomer
{
    public int CustomerId {get; set;}
    public string Name {get; set;}
    public int Field1 {get; set;}
    public int Field2 {get; set;}
    public int DifferentField1 {get; set;}
    public int DifferentField2 {get; set;}
} 
```

此类型将用于表示来自两个数据库的数据：

```
var customers1 = dataContext1.Customers.Select(c => new UnifiedCustomer
{
    CustomerId = c.CustomerId,
    Name = c.CustomerName,
    Field1 = c.Field1,
    Field2 = c.Field2
});
var cusomers2 = dataContext2.Customers.Select(c => new UnifiedCustomer
{
    CustomerId = c.CustomerId,
    Name = c.CustomerName,
    DifferentField1 = c.DifferentField1,
    DifferentField2 = c.DifferentField2
}); 
```

拥有相同类型的两个集合，您可以执行联合：

```
var all = customers1.Union(customers2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:11:36.313

> 完成此操作以便我可以公开单个统一对象的最佳方法是什么？

您可能需要从每个上下文中提取适当的结果，然后使用 LINQ to Objects 对内存中的结果集执行“联合”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:31:59.080

如果两个数据库映射到同一个类，您可以简单地执行以下操作：

```
 using (var cx1 = new customerEntities(firstDbConnectionString))
        {
            using (var cx2 = new customerEntities(secondDbConnectionString))
            {
                return cx1.tCustomer.ToList().AddRange(cx2.tCustomer.ToList());
            }
        } 
```

# sql - 在脚本任务中连接到数据源

> ID：10640214
> 
> 赞同：1
> 
> 时间：2012-05-17T17:05:32.893
> 
> 标签：sql, sql-server-2005, ssis

我在使用 SSIS 中的脚本任务中的连接管理器时遇到了一些问题。该程序将完美编译，直到我尝试使用环境中设置的连接。

```
Private Sub InsertLog(ByRef log() As String)
        Dim conn As SqlClient.SqlConnection
        conn = _
            DirectCast(Dts.Connections("ConfigDB").AcquireConnection(Dts.Transaction),  _
            SqlClient.SqlConnection)
        MsgBox(log(0) & "  " & log(1) & "  " & log(2) & "  " & log(3) & Dts.Connections("ConfigDB").ConnectionString.ToString())
End Sub 
```

如果我注释掉 Dim 和 DirectCast 包将成功执行，我可以成功地在消息框中获取连接字符串。

```
Data Source=PathToServer;Initial Catalog=DB;Provider=...;Integrated Security=...;Application Name=...;Auto Translate=False; 
```

这事发生在别人身上过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:05:43.520

我有一个解决方案。它失败的原因是因为提供者和自动翻译，所以我的解决方案是去掉不需要的东西。

```
Dim strConnection As String = Dts.Connections("Automation").ConnectionString.ToString()
        Dim regProvider As New Regex("Provider=([^;]*);")
        Dim regTranslate As New Regex("Auto Translate=([^;]*);")
        strConnection = regProvider.Replace(strConnection, "")
        strConnection = regTranslate.Replace(strConnection, "")
        Dim conn As New SqlClient.SqlConnection(strConnection) 
```

# ruby-on-rails - 如何在 Rails 中编写多个 COUNT(*) 子查询？

> ID：10640215
> 
> 赞同：0
> 
> 时间：2012-05-17T17:05:40.027
> 
> 标签：ruby-on-rails, count, subquery

如何像这样在 Rails 中编写子查询？：

```
select
    m.field1,
    m.field2,
    (select count(*) from details1 d1 where d1.id=m.field3) as count1,
    (select count(*) from details2 d2 where d2.id=m.field4) as count2,
    (select count(*) from details3 d3 where d3.id=m.field5) as count3
from
    master m 
```

数据库服务器是 PostgreSQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:16:51.617

```
class Master < ActiveRecord::Base
  set_table_name "master"
end
masters = Master.select(%Q"master.field1, master.field2,
(select count(*) from details1 d1 where d1.id=m.field3) as count1,
(select count(*) from details2 d2 where d2.id=m.field4) as count2,
(select count(*) from details3 d3 where d3.id=m.field5) as count3").all 
```

# ruby-on-rails - :on => :create 对于 Rails 3.2.3 中的 before_save 回调是否有效

> ID：10640221
> 
> 赞同：10
> 
> 时间：2012-05-17T17:06:07.793
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2, before-save

如您所知，`before_save`回调在回调之前执行`before_create`。

因此，有人建议最好使用 in`before_save :method, :on => :create`而不是`before_create`这样，回调方法相对于其他回调（例如自动保存回调）在正确的时间执行。例如，请参阅此[Pivotal Labs 博客文章](http://blog.pivotal.io/labs/labs/activerecord-callbacks-autosave-before-this-and-that-etc)和[此 StackOverflow 答案](https://stackoverflow.com/a/6967362/1121817)。

但是，据我所知，该选项对回调`:on => :create`没有达到预期的效果。`before_save`换句话说，无论是否创建，每次保存都会执行回调。

不过，该`:on => :create`选项*似乎*对`before_validation`回调有效。

有人可以确认是否`:on => :create`应该为 a 工作`before_save`？它是否在以前的 Rails 版本中工作并且现在已损坏，或者上述链接只是错误的？

假设`:on => :create`无效，以下是否可以接受，和/或有更好的方法吗？

```
before_save :callback_method, :if => :new_record? 
```

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-17T17:56:20.140

你是对的，没有回调`:on`选项。`before_save`但是，我不明白，为什么要使用`before_save`而不是`before_create`. `before_create`回调将在之后被调用`before_save`。

当然，您可以使用`before_save :callback_method, :if => :new_record?`. 但我个人不喜欢这个解决方案——如果我需要在`:if`选项中添加条件怎么办？

`before_save`如果一个和回调之间有依赖关系`before_create`，我建议将两个回调结合起来。例如（伪代码）：

```
class MyModel < ActiveRecord::Base
  before_create :prepare_x
  before_save :do_something_with_x

  def prepare_x
    @x = 10
  end

  # will not work, because `prepare_x` called after `do_something_with_x`
  def do_something_with_x
    @a = 100 / @x
  end
end

# ||
# ||
# \/

class MyModel < ActiveRecord::Base

  before_save :do_something_with_x

  def do_something_with_x
    @x = 10 if new_record?
    @a = 100 / @x
  end
end 
```

# php - PHP OOP 设计模式

> ID：10640222
> 
> 赞同：1
> 
> 时间：2012-05-17T17:06:09.433
> 
> 标签：php, oop, class, design-patterns

我最近在 Wikipedia 上阅读了一篇关于[设计模式的文章](http://en.wikipedia.org/wiki/Design_pattern_%28computer_science%29)

到目前为止，我已经这样做了，但它返回了`Fatal error: Maximum function nesting level of '100' reached, aborting!`

逻辑上我知道，它会返回嵌套错误，但是，我不明白最好的步骤是什么。

```
class Main {
    $this->Aa = new Aa;
    $this->Bb = new Bb;
    $this->Cc = new Cc;
    }
class Aa extends Main {
    function blahA() {
        // blah blah
        }
    function testA() {
        $ret[] = $this->blahA(); // Call inside class
        $ret[] = $this->Bb->blahB(); // Call outside class
        $ret[] = $this->Cc->blahC(); // Call outside class
        return $ret;
        }
    }
class Bb extends Main {
    function blahB() {
        // blah blah
        }
    function testB() {
        $ret[] = $this->blahB(); // Call inside class
        $ret[] = $this->Aa->blahA(); // Call outside class
        $ret[] = $this->Cc->blahC(); // Call outside class
        return $ret;
        }
    }
class Cc extends Main {
    function blahC() {
        // blah blah
        }
    function testC() {
        $ret[] = $this->blahC(); // Call inside class
        $ret[] = $this->Aa->blahA(); // Call outside class
        $ret[] = $this->Bb->blahB(); // Call outside class
        return $ret;
        }
    } 
```

基本上我想管理我的类设计，以便类中的方法`Aa`也可以在类中重用，`Bb`反之亦然。我很好奇，如何像上面的类一样建立关系，如何让`extends`类获得上述模式？这种模式的名称是什么？也请给我一个链接，我可以从中学习。

非常感谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:11:41.820

考虑分别创建 Aa 和 Bb 并使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，这样每个类都可以引用另一个类。不过，您应该确保这两个类不是太紧耦合。

评论中提到的四人组 (GoF) 设计模式书是一本不错的书，但[Head First Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0596007124)对初学者来说更容易一些（也很有趣）。

这是一个例子。请注意，在 PHP 中有更好的方法来设置属性，我放置了一个 setter 函数只是为了明确。有关更多信息，请参阅[此问题](https://stackoverflow.com/q/10616866/1158895)。

```
class Main {
    $this->Aa = new Aa;
    $this->Bb = new Bb;
    $this->Cc = new Cc;

    // Can use properties instead of setters
    $this->Aa->setB(Bb);
    $this->Aa->setC(Cc);

    $this->Bb->setA(Aa);
    $this->Bb->setC(Cc);

    $this->Bb->setA(Aa);
    $this->Bb->setC(Bb);
    }

class Aa {                // No need to extend Main, right?
    function blahA() {
        // blah blah
        }
    // Dependency injection, Bb is now a member of this class
    // Consider doing this with PHP properties instead
    // Using setter function to be more explicit
    function setB(Bb b) {
        this->Bb = b;
        }
    // Dependency injection, Cc is now a member of this class
    // Consider doing this with PHP properties instead
    // Using setter function to be more explicit
    function setC(Cc c) {
        this->Cc = c;
        }
    function testA() {
        $ret[] = $this->blahA(); // Call inside class
        $ret[] = $this->Bb->blahB(); // Call outside class
        $ret[] = $this->Cc->blahC(); // Call outside class
        return $ret;
        }
    }
// Class Bb ...
// Class Cc ... 
```

# c++ - 默认容器参数

> ID：10640227
> 
> 赞同：0
> 
> 时间：2012-05-17T17:06:28.480
> 
> 标签：c++, stl

当我调用不带参数的函数 bat 时，以下标头可以按预期与注释部分一起使用：

```
class Test
{
 public:

  void bat(std::vector<int> k = std::vector<int>()) {}
  //void cat(std::map<int, std::vector<int> > k = std::map<int, std::vector<int> >()) {}

}; 
```

但是当我尝试在标题中使用 cat 函数时：

```
class Test
{
 public:

  void bat(std::vector<int> k = std::vector<int>()) {}
  void cat(std::map<int, std::vector<int> > k = std::map<int, std::vector<int> >()) {}

}; 
```

我得到：

```
test.h:14: error: expected ',' or '...' before '>' token
test.h:14: error: wrong number of template arguments (1, should be 4)
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_map.h:92: error: provided for 'template<class _Key, class _Tp, class _Compare,\
 class _Alloc> class std::map'
test.h:14: error: default argument missing for parameter 2 of 'void Test::cat(std::map<int, std::vector<int, std::allocator<int> >, std::less<int>, std::all\
ocator<std::pair<const int, std::vector<int, std::allocator<int> > > > >, std::vector<int, std::allocator<int> >)' 
```

怎么来的？有没有简单的解决方法？希望不需要在接口中更改指针类型？

这是我的完整标题：

```
#ifndef TEST_H
#define TEST_H

#include <map>
#include <vector>
#include <sstream>
#include <iostream>

class Test
{
 public:

  //void bat(std::vector<int> k = std::vector<int>()) {}
  void cat(std::map<int, std::vector<int> > k = std::map<int, std::vector<int> >()) {}

};

#endif 
```

所以所有的权利都在那里。我的 GCC 版本非常过时（不是在家里，我也在家里试试）——但在工作中它是 4.1.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:16:58.040

代码看起来不错，但在 gcc 4.3.4 上失败，请参见[此处](http://ideone.com/nC8sj)，但从 4.6 开始编译良好（我尚未测试 4.4 或 4.5）。所以看起来解决方法是使用更新的 gcc。

```
#include <map>
#include <vector>

class Test
{
 public:

  void bat(std::vector<int> k = std::vector<int>()) {}
  void cat(std::map<int, std::vector<int> > k = std::map<int, std::vector<int> >
()) {}

};

int main() {

} 
```

关于默认参数，完全放弃它们可能是一个想法：

```
class Test {
 public:

  void bat(std::vector<int> k) {}
  void bat() {}
  void cat(std::map<int, std::vector<int> > k) {}
  void cat() {}
}; 
```

否则，您将默认参数耦合到接口，这意味着您无法在不重新编译所有客户端代码的情况下更改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:02:12.083

从这里的其他帖子看来，这可能是编译器问题，在这种情况下，您可以通过`typedef`直接使用 a 而不是 map 类型来解决它。

```
#include <vector>
#include <map>

class Test
{
 public:
  typedef std::map<int, std::vector<int> > MyMap;

  void bat(std::vector<int> k = std::vector<int>()) {}
  void cat(MyMap k = MyMap()) {}

};

int main()
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:12:26.170

您发布的代码看起来不错，所以我将打开我的 Psychic Debugger 模块。

你是否：

```
#include <vector> 
```

...在您的标题中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T16:22:53.010

这是 C++ 核心缺陷报告 325 [http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#325](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#325)

GCC 4.4 实现了 DR 的建议（但尚未正式）解决方案，请参阅[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=57#c36](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=57#c36)

# iphone - glBindRenderbufferOES 和 glBindRenderbuffer 有什么区别？

> ID：10640234
> 
> 赞同：1
> 
> 时间：2012-05-17T17:07:21.083
> 
> 标签：iphone, ios, opengl-es

OES 代表什么？它指的是OpenGL ES 1吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:44:38.890

OpenGL ES 1 中没有 glBindRenderbuffer 函数。

要使用渲染缓冲区，您必须使用提供 glBindRenderbufferOS 功能的帧缓冲区扩展。

在 OpenGL ES 2 中，帧缓冲区属于核心规范，因此您没有扩展，但具有核心功能 glBindRenderbuffer。

# macos - 直接从我的 OSX 应用程序发送电子邮件

> ID：10640235
> 
> 赞同：2
> 
> 时间：2012-05-17T17:07:57.703
> 
> 标签：macos, cocoa, email, frameworks

我正在开发一个 OSX 应用程序，它将处理一个选择加入的邮件列表。我有一个包含选择加入电子邮件地址的数据库，目标是让用户单击一个按钮并让应用程序构建自定义电子邮件更新，然后向邮件列表的所有成员发送电子邮件更新。这将用于诸如向粉丝更新乐队表演等事情。

我找到了很多关于 iOS mailComposer 的信息，但在 OSX 中没有类似的东西。我确实找到了对消息框架的引用，但由于某种原因在库中找不到它的文档（我确定它一定在某处......）我发现的唯一其他信息建议使用 mailto：URL ，这在某种程度上破坏了我希望实现的自动化过程。

谁能指出我正确的方向？有没有我可以研究的特定框架来确定如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T00:15:52.580

如果您想创建和邮寄自己的消息，而不是通过 Apple Mail（或用户的邮件客户端），[也许 EdMessage 框架会为您工作](http://www.mulle-kybernetik.com/software/EDFrameworks/)？（<--我已经为你链接了它）

# java - 我的 if 语句不起作用。

> ID：10640237
> 
> 赞同：-4
> 
> 时间：2012-05-17T17:08:05.703
> 
> 标签：java

我有以下代码并且无法检查条件...我该如何解决？

```
@Override
    protected void onPostExecute(Void result) {
        if (null != pDialog && pDialog.isShowing()); {
            pDialog.dismiss();
        }

        if (null == arrayList || arrayList.size() == 0) {
            showToast("No data found from web!!!");
            MainActivity.this.finish();
        } else {
            Collections.sort(arrayList);
            setAdapterToListview(arrayList);
        }

        super.onPostExecute(result);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T17:08:47.780

删除`;`第一个 if 条件的结尾

它应该是 `if (null != pDialog && pDialog.isShowing());` <<< 删除`;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:26:41.993

`;`只需从第一行删除分号。
代替

```
if (null != pDialog && pDialog.isShowing()); 
```

它应该是

```
if (null != pDialog && pDialog.isShowing()) 
```

最后没有分号:)

# c# - Nuget 忽略默认项目

> ID：10640240
> 
> 赞同：0
> 
> 时间：2012-05-17T17:08:18.200
> 
> 标签：c#, asp.net, visual-studio-2010, nuget

出于某种原因，Nuget 会忽略我从下拉列表中选择的默认项目，并始终将包安装到我的启动 Web 项目中。我有一个实用程序项目，专门用于库依赖项之类的东西，并希望 Nuget 在那里安装包，但它总是适用于 Web 项目。

编辑：

我最终想通了。事实证明，解决方案文件位于一个特定的项目目录下。这不是我通常创建解决方案的方式，但我最初并没有创建它，所以我没有想到这是原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:50:03.653

尝试使用带有项目名称的命令

```
PM> Install-Package EntityFramework -ProjectName DataProvider 
```

或者只需右键单击解决方案并选择管理 NuGet 包。当你安装它时，它允许选择一组项目来安装包。

# ember.js - ember 数据：手动将模型发送到更新状态

> ID：10640242
> 
> 赞同：4
> 
> 时间：2012-05-17T17:08:28.060
> 
> 标签：ember.js, ember-data

我有一个 ember-data 模型（父），它有几个嵌入式模型作为属性。当我更新嵌入式模型 hasMany 数组时，父级不会进入更新/脏状态。如何手动将父级发送到脏状态？

我没有运气就尝试了以下方法：

```
parent.set('isDirty', true);
parent.get('stateManager').goToState('dirty')
parent.get('stateManager').goToState('updated.uncommitted') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T11:59:48.383

终于找到了我自己的解决方案：

```
parent.get('stateManager').goToState('updated') 
```

我还应该提到，当向子级添加 belongsTo 关联时，如果更改了 hasMany 关联，则父级将被弄脏。但是对于孩子的正常属性发生变化的情况，我仍然需要手动弄脏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T00:34:35.550

如果您使用的是`Ember data`(v1.0.0 > x)。

```
parent.get('stateManager').goToState('updated') 
```

不再工作了。**现在你应该使用**：

```
parent.transitionTo('updated'); 
```

* * *

这些是随 ember 数据一起提供的有效状态的层次结构：

```
* root
  * deleted
    * saved
    * uncommitted
    * inFlight
  * empty
  * loaded
    * created
      * uncommitted
      * inFlight
    * saved
    * updated
      * uncommitted
      * inFlight
  * loading 
```

[各州的来源](http://emberjs.com/api/data/classes/DS.RootState.html)

# c - 无法打开要附加的特定文件名

> ID：10640245
> 
> 赞同：0
> 
> 时间：2012-05-17T17:08:39.543
> 
> 标签：c, file-io, printf

我有一些代码迭代地将数据附加到文件中，看起来类似于：

```
for(int i=0; i<number; i++){
  FILE *log_file;
  char name[50];
  sprintf(name,"something_%d.log",i);
  log_file=fopen(name,"a");
  if(log_file == NULL){
    printf("ERROR cannot open file %s",name);
    abort();
  }
  /* Write stuff to file */
  fclose(log_file);
} 
```

看起来很简单吧？如果文件存在并且我有权写入它，它会正常进行；如果文件不存在并且我有权在目录中写入文件，它会正常创建文件。错误的！不知何故，当我遇到特定的文件名 ( `MINI_3f_1_0.log`) 时，程序无法创建/打开文件并产生`log_file = NULL`. 显然这不是我的全部代码，最糟糕的是我无法用如图所示的简单程序重现这个问题。

我已经花了几个小时试图追踪正在发生的事情，到目前为止，我 100% 确定以下几点：

1.  文件在同一范围内声明、打开和关闭
2.  同名文件未在任何其他功能/整个程序中打开
3.  我有权在目录中读/写
4.  尝试以迭代顺序打开文件在同一例程中完成时会产生相同的错误

你们可以给我的任何指导将不胜感激。如果你在你的经历中遇到过这样的事情，你是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:45:04.440

正如 Mat 在评论中所建议的那样，在不同的目录中运行代码不会产生错误。文件系统可能有问题，需要由系统管理员检查。

# android - 如何从我的应用程序中获取系统信息？

> ID：10640255
> 
> 赞同：0
> 
> 时间：2012-05-17T17:09:35.547
> 
> 标签：android

我正在为我的网站制作应用程序，我需要知道安装我的应用程序的人的系统信息，

我有一个 email.java Activity 类，我想知道是否可以将系统信息添加为附件或任何类型的底部，

我也有一个 text.java 活动，如果可能的话，我喜欢做同样的事情（不是附件）

或者当他们通过电子邮件或短信与我联系时，我以某种方式“查看”系统信息。

冗长的问题，但任何指针都会非常有帮助。

我每天都在学习 android，因为我想进入编程领域。回答时要注意这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:13:01.480

查看构建类：

[http://developer.android.com/reference/android/os/Build.html](http://developer.android.com/reference/android/os/Build.html)

`Build.DEVICE`或者`Build.MODEL`可能是您正在寻找的东西。您可以将其附加到您在电子邮件活动中创建的文本的末尾。

# java - 如何强制用户输入带有符号的密码？

> ID：10640260
> 
> 赞同：0
> 
> 时间：2012-05-17T17:10:09.603
> 
> 标签：java, android, design-patterns, matcher

```
 if (password1.length() >= 15){          
                    final String PasswordPattern = "^(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])[0-9A-Za-z]{15,}$";

                    Pattern pattern = Pattern.compile(PasswordPattern);
                    Matcher matcher = pattern.matcher(password1);   

                    if(matcher.matches() == true){                      

                        if (password1.equals(password2)){
                            SavePreferences(password1.toString());
                            //Intent intent = new Intent(LockAppActivity.this, ScreenLockActivity.class);
                            Intent intent = new Intent(LockAppActivity.this, PhoneNumActivity.class);
                            startActivity(intent);
                        }
                        else{
                            pass1.setText("");
                            pass2.setText("");
                            Toast.makeText(LockAppActivity.this,"Both passwords are not equal!",Toast.LENGTH_SHORT).show();
                        }
                    } 
```

我希望用户输入至少 15 个字符的密码，必须由大写和小写字母、数字和符号组成。但我只知道如何用大写字母和小写字母和数字创建图案...如何在图案中包含所有符号...请检查我的图案代码部分...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:15:13.893

您可以添加该部分`(?=.*(\W|_))`来检查除字母数字（AZ、az、0-9）符号之外的任何内容。或者，您可以指定一组符号字符，例如`(?=.*[\.\*])`. 如果这样做，请将 的内容替换为`[]`您想要允许的所有字符，在每个具有正则表达式函数的字符之前使用反斜杠。（该示例显示了允许两个字符`.`和. 的部分`*`。）

然后，您需要顶部更新计算出现次数的部分。由于我们现在正在处理*所有字符*，因此我们可以将 替换为`[0-9A-Za-z]`，`.`留下我们：`^(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])(?=.*(\W|_)).{15,}$`。将单个替换为`\`两个，`\\`因为您将其放置在 Java 字符串中。

请记住，Android 键盘可能会有所不同，因此不能保证所有键盘都具有相同的符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:48:15.390

它只是你想要的例子。我在我的项目中使用 struts 完成了这项工作。它满足您的需求。您还可以添加更多条件。也看到这个...... [http://www.asciitable.com/](http://www.asciitable.com/)

```
 if (getNewpassword() != null) {
                    int s;
                    for (int i = 0; i < getNewpassword().length(); i++) {
                        s = (int) getNewpassword().charAt(i);
                        if ((s>=33 && s<=64 )&&(s>=127&&s<=65)) {
                        }
    else
    {
                            errors.add("newpassword1", new ActionMessage("errors.notpwd", "must contains A-Z,a-z and any symbol"));
    }
                    }
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:17:21.567

您可能会发现[这个](https://stackoverflow.com/a/3721953/339428)对另一个问题的回答很有用。我不确定这个密码约束是否与您的完全相同，但它似乎足够相似，可能会有所帮助。

[https://stackoverflow.com/a/372​​1953/339428](https://stackoverflow.com/a/3721953/339428)

# sql-server - 周比较的 TSQL 查询

> ID：10640265
> 
> 赞同：0
> 
> 时间：2012-05-17T17:10:25.523
> 
> 标签：sql-server, tsql

我有一个表，其中包含日期时间类型的 TASK_START_DATE 和 TASK_FINISH_DATE 列

我需要一个查询的帮助，该查询在任务时返回所有任务：（日期 = 只是日期 - 我想我可以从 SQL 2008R2 上的日期时间转换为日期，它工作正常）

- 在当前的 2 周内日期或当前日期后两周。

同样，我还需要 TaskEnd 值在前两周或前两周内的记录

我一直在尝试诸如开始日期在前两周内的任务，但我必须为 TASK_FINISH_DATE 做同样的事情，我认为我的和或的都混乱了，感谢任何帮助。

```
Convert(Date, TASK_START_DATE) <=  Convert(Date, DateAdd(ww, -2, GetDate())) 
```

简短版：如何正确编写一个查询，将所有记录与未来或过去两周内的 TASK_START_DATE **OR TASK_END_DATE 结合起来，即**

```
Select Task_ID, TASK_NAME, TASK_START_DATE, TASK_END_DATE
where 
??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:13:44.300

您可以在日期中添加天数以进行比较：

```
Select * from Table
Where column between getdate()-14 and getdate()+14 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:21:17.047

您不需要使用“转换”功能。“GetDate”函数返回日期时间值，您的列的类型是日期时间。您可以像这样直接添加天数：

```
Select * from Table
Where (TASK_START_DATE between getdate() - 14 and getdate() + 14)
or (TASK_FINISH_DATE between getdate() - 14 and getdate() + 14) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:37:22.497

您可以在 where 子句中声明变量或设置比较日期。我现在使用 GETDATE() 来获取日期/时间，因为它返回一个 DATETIME 对象。然后我使用 DATEADD 将其调整为天、月、年等，然后您必须将其转换为 DATE，然后再将其粘贴到 DATE 类型的变量中。请注意，在[DATEADD](http://msdn.microsoft.com/en-us/library/ms186819.aspx)方法中，我传入了调整类型（D = 天），然后调整它 + 或 - 14 天。

或者，如果您不进行 DATE 转换，您可以只使用 14 天前到现在……您必须从变量声明以及 where 子句中删除转换。取决于你想要的结果。

```
DECLARE @twoWeeksAgo DATE = CONVERT(DATE, DATEADD(D, -14, GETDATE()));
DECLARE @twoWeeksAhead DATE = CONVERT(DATE, DATEADD(D, 14, GETDATE()));

SELECT 
    Task_ID, 
    TASK_NAME, 
    TASK_START_DATE, 
    TASK_END_DATE
FROM
    TABLE
WHERE 
    CONVERT(DATE, TASK_START_DATE) BETWEEN @twoWeeksAgo AND @twoWeeksAhead
    OR CONVERT(DATE, TASK_END_DATE) BETWEEN @twoWeeksAgo AND @twoWeeksAhead 
```

另请注意，WHERE 子句中的 BETWEEN 运算符是包容性的，这意味着它将包括 TASK_START_DATE 等于变量保存的日期的记录。例如，如果您想排除与@twoWeeksAhead 具有相同值的记录，则必须使用类似

```
WHERE 
    (CONVERT(DATE, TASK_START_DATE) >= @twoWeeksAgo 
        AND CONVERT(DATE, TASK_START_DATE) < @twoWeeksAhead)
    OR (CONVERT(DATE, TASK_END_DATE) >= @twoWeeksAgo 
        AND CONVERT(DATE, TASK_END_DATE) < @twoWeeksAhead) 
```

# forms - Symfony2：如何通过创建多个子实体来创建实体表单？

> ID：10640267
> 
> 赞同：9
> 
> 时间：2012-05-17T17:10:33.183
> 
> 标签：forms, symfony

这可能是在 Symfony2 中解决的一个简单任务，但我真的被困在这里：

我正在建立一个非常简单的商店。共有三个实体：`Products`、`Customers`和`Orders`。最后一个包含三列：`customer_id`、`product_id`和`quantity`。该商店仅包含一个列出所有产品的页面，其中每个产品都有一个选择字段以选择数量，然后是一个用于输入客户数据的表格。

我为客户数据创建表单或列出产品本身（没有选择字段）都没有问题。

**但是如何创建一个包含产品选择字段的表单，然后这些字段应该成为订单实体？**

我玩弄了表单集合，并且我确实了解所有给定的示例，包括向实体添加标签等。但我无法掌握如何根据我的情况调整它。

我的想法是这样的：

```
// Create new customer
$customer = new Customer();

// At this point, create form and validate it.
// Having trouble here, need a hint to get it right.
...

// If form is ok, loop thru all the products.
// Since I do not know yet how to define the form,
// I don't know yet what to loop over, too.
foreach( ..... ){
    if($quantity > 0){
        $order = new Order();
        $order->setQuantity($quantity);
        $order->setProduct($product);
        $customer->addOrder($order);
    }
}

// then persist $customer, cascading its orders.
... 
```

我一直在这上面花了几个小时。任何帮助是极大的赞赏。谢谢！

**更新：** 最终我得到了它的工作。我创建了一个`OrderFactory`和一个`OrderFormType`，并且不得不对整个设置进行一些更改。下面的回复中提到的 AcmePizzaBundle 实际上对正确处理缺失的部分很有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T17:19:15.590

看一个例子：[AcmePizzaBundle](https://github.com/beberlei/AcmePizzaBundle)。它有您需要的 4 个实体：Pizza、Order、OrderItem、Customer。

# c# - 如何检查字符串的整数值是否小于 LINQ 中的某个值？

> ID：10640270
> 
> 赞同：0
> 
> 时间：2012-05-17T17:11:02.010
> 
> 标签：c#, linq

我有以下内容：

```
 var topRole = 25;

        var menuItems = _contentRepository.GetPk()
            .Where(m => m.Status <= topRole)
            .OrderBy(m => m.Order)
            .Select(m => new MenuItem 
```

状态的值为“00”、“05”或“10”

有什么方法可以将 m.Status 转换为整数，然后比较它是否小于或等于 topRole？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:12:18.200

利用`int.Parse(m.Status)`

```
var menuItems = _contentRepository.GetPk()
            .Where(m => int.Parse(m.Status) <= topRole)
            .OrderBy(m => m.Order)
            .Select(m => new MenuItem) 
```

编辑：将“解析”更改为“解析”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T17:12:22.477

```
var menuItems = _contentRepository.GetPk()
        .Where(m => int.Parse(m.Status) <= topRole)
        .OrderBy(m => m.Order)
        .Select(m => new MenuItem); 
```

如果此查询用于 LINQ to SQL，您可能需要`Convert.ToInt32`改用：

```
var menuItems = _contentRepository.GetPk()
        .Where(m => Convert.ToInt32(m.Status) <= topRole)
        .OrderBy(m => m.Order)
        .Select(m => new MenuItem); 
```

# java - 什么时候在 servlet 中调用 doPut()？

> ID：10640273
> 
> 赞同：3
> 
> 时间：2012-05-17T17:11:16.220
> 
> 标签：java, http, servlets

嗨，我只是好奇什么时候调用 servlet 中的 doPut() 方法。我知道如果 jsp/html 页面上的表单具有“post”方法，则调用 doPost()，否则如果它具有“GET”则调用 doGet()。doPut() 何时调用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T17:12:14.770

当收到[HTTP PUT](http://en.wikipedia.org/wiki/HTTP_PUT#Request_methods)请求时，自然而然。

> 页面可以通过代码执行 PUT 请求吗？

[根据 HTML5 规范](http://www.w3.org/TR/html5/forms.html#form-submission)， a的唯一有效`method`属性值为and 。我想这就是你要问的。`<form>``get``post`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T17:43:53.683

doPut() 方法处理使用 HTTP PUT 方法发送的请求。PUT 方法允许客户端在服务器上存储信息。例如，您可以使用它将图像文件发布到服务器。正如上面的答案所说， goGet() 和 doPost() 大部分都在使用中。就我而言，我只使用这两个，而且我只收到 get 请求，所以我只需将 get 请求转移到 doPost() 并轻松完成我的工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-17T18:58:06.500

如果您想通过表单在 url 中发送一些机密值，则必须使用 post 方法，如果您将对表单使用 get 方法（如登录），则用户 ID 和密码等值参数将在 url 中可见，任何人都可以破解那个东西。所以最好在表单中使用 post 方法。默认情况下，它将调用 get 方法。

```
in get the url is like http://url?method=methodname&userid=123&password=123

so if you use post method the url will be like this http://url/methodname.do 
```

# c - 从数组中获取数字并分配给一个 int

> ID：10640288
> 
> 赞同：0
> 
> 时间：2012-05-17T17:11:55.487
> 
> 标签：c, logic

我正在做作业并尝试从数组中获取两个数字字符`ABC10DEF`

我想获取`10`它并将其存储在一个`int`类型中。

```
 number_holder_1 = back[3] - '0';
            number_holder_2 = back[4] - '0';

            number = number_holder_1 * 10 + number_holder_2; 
```

这不起作用我不知道为什么。

当我打印出它的值时`number_holder_1`会显示`1`，当我显示`number_holder_2`它时会显示，`0`但是当我打印`number`它时只会显示`0`

我不知道怎么做。

更新：

,`number`和`number_holder_1`被`number_holder_2`定义为`int`类型。

`back`名为该持有的数组`ABC10DEF`是从主传递的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:28:11.760

这似乎是一个实现错误，因为使用您给出的内容，以及一些更好的变量名称，它确实有效。

```
#include <stdio.h>
#include <ctype.h>

int letter2int(char c) {
    int n;
    if (isdigit(c)) {
        n = c - '0';
    } else {
        n = -1; /* error */
    }

    /* for debugging */
    printf("For character '%c' we get number '%d'.\n", c, n);

    return n;
}

int main(int argc, char** argv) {
    const char str[] = "ABC10DEF";
    int tens, ones;
    int result;

    tens = letter2int(str[3]);
    ones = letter2int(str[4]);

    result = tens * 10 + ones;

    printf("Result: %d\n", result);

    return 0;
} 
```

这可以概括为形成一个 atoi 函数（ASCII 到整数）或通过使用循环和`char`指向字符串索引的指针来提取字符串中出现的第一个数字（由任何非数字字符终止） `str`。

用作从零开始`i`的索引，`result += number * (int)pow(10, i);`.

# javascript - Backbone.Js - el 和 $el 有什么区别？

> ID：10640289
> 
> 赞同：14
> 
> 时间：2012-05-17T17:11:58.497
> 
> 标签：javascript, backbone.js

所以我整个下午都被困在[这个](https://stackoverflow.com/questions/10638802/backbone-js-and-jqueryui-dialog-events-not-binding/10640233#10640233)我最终解决的问题上。原来我分配的是 el 而不是 $el。

两者有什么区别，我应该什么时候使用它们？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T17:14:02.837

直接来自[文档](http://documentcloud.github.com/backbone/#View-%24el)，`$el`是：

> 视图元素的缓存 jQuery（或 Zepto）对象。一个方便的参考，而不是一直重新包装 DOM 元素。

所以，`$el`是一个缓存的 jQuery（或 Zepto）版本的`el`. 如果您需要在 上使用任何 jQuery 或 Zepto 方法`el`，您可以简单地使用而不是每次都`$el`包装`el`。`$()`

# bison - Lexx 和 Yacc 在 C 中使用 c 语法解析到符号表中

> ID：10640290
> 
> 赞同：4
> 
> 时间：2012-05-17T17:12:04.917
> 
> 标签：bison, yacc, lex

我正在尝试使用 bison 和 lex 创建 ac 类型解析器。是的，这是为了学校作业，但我很迷茫，我在网上上学，所以我没有得到太多帮助。我需要这个来将信息解析到一个表中，但我很确定我的 parse.y 文件中有错误，因为它没有将信息加载到它说没有代码的表中。我知道我的 .y 文件缺少一些语法，但我认为其中一些应该按原样加载到符号表中。

运行make文件时的输出是：

```
default:
    clear
    yacc -d -v --debug parse.y
    lex -l scan.l
    gcc -o cfc symtab.c lex.yy.c y.tab.c
clean:
    $(RM) cfc *.o lex.yy.c parse.tab.c y.tab.h y.output dump.symtab 
```

输出到屏幕：

```
> yacc -d -v --debug parse.y parse.y:39 parser name defined to default
> :"parse" conflicts:  2 reduce/reduce lex -l scan.l gcc -o cfc symtab.c
> lex.yy.c y.tab.c 
```

通过解析器传递 60.cf：

```
> semantic error cnt: 0     lines of code: -1 
```

解析器的结果是符号表为空，输出如下：

```
> Starting parse 
> Entering state 0 
> Reading a token: Next token is 292 (INT)
> parse error: line 0: Shifting error token, Entering state 1
> Reducing via rule 3 (line 57), error  -> block 
```

加载 60.cf 的示例代码：

```
int foo()
{
    while ( i >= 0 )  {
       i = i * 1;
       c = c + 1;
    } 
    if ( c >= 0 )  
    { ; }
    else
    { i = 7; 
      c = i;
    }
    return 0;
} 
```

这是 scan.l 文件：

```
%option yylineno

%{
#ifndef TRUE
#define TRUE 1 
#endif

#ifndef FALSE 
#define FALSE 0 
#endif

#include <stdio.h>
#include <ctype.h>
#include <string.h>
#include "symtab.h"
#include "y.tab.h"

int badtoken_cnt = 0;
int token_cnt = 0;
int col_cnt = 0;
int lineno = 0;

%}

comment     \/\*([^*]|\n)*\*\/
digit       [0-9]
ichar       [A-Z_a-z]
integer     {digit}+
newline     \n
strchar     ([ ~]|\\n)
identifier  {ichar}([0-9]|{ichar})*
whitespace  [ \t]+
float       ([+-]?{digit}+)?\.{digit}*(e?[+-]?{digit}+)?
chrliteral  '([!*]|\\n)'
nullstring  \"\"
escquote    [^"]*\\\"[^"]*
strliteral  \"[^"]*{escquote}*\"
%%

"if"            { return IF;}
"then"          { return THEN;}
"else"          { return ELSE;}
"while"         { return WHILE;}
"return"        { return RETURN;}
"break"         { return GOTO;}
"goto"          { return GOTO;}
"read"          { return READ;}
"write"         { return WRITE;}
"float"         { return REAL;}
"int"           { return INT;}
"void"          { return VOID;}
"char"          { return CHAR;}

"="             { return ASSIGN;}
"!="            { return NE;}
"=="            { return EQ;}
"<"             { return LT;}
"<="            { return LE;}
">"             { return GT;}
">="            { return GE;}
"&&"            { return AND;}
"||"            { return OR;}

"+"             { return PLUS;}
"-"             { return MINUS;}
"*"             { return TIMES;}
"/"             { return OVER;}
"%"             { return MOD;}

"{"             { return LBRACE;}
"}"             { return RBRACE;}
"["             { return LBRACK;}
"]"             { return RBRACK;}
"("             { return LPAREN;}
")"             { return RPAREN;}
";"             { return SEMI;}
","             { return COMMA;}

{float}         { 
                  yylval.tokname = malloc(sizeof(yytext));
                  strncpy(yylval.tokname,yytext,yyleng);
                  printf("yylval: %s\n",yylval.tokname);
                  insert(yytext, yyleng, REAL_TYPE, lineno);
                  printf("yytext: %s\n",yytext);
                  return FLOAT;
                }
{integer}       { 
                  yylval.tokname = malloc(sizeof(yytext));
                  printf("yylval: %s\n",yylval.tokname);
                  strncpy(yylval.tokname,yytext,yyleng);
                  insert(yytext, yyleng, INT_TYPE, lineno);
                  printf("yytext: %s\n",yytext); 
                  return INTEGER;
                }

{chrliteral}    { 
                  yylval.tokname = malloc(sizeof(yytext));
                  strncpy(yylval.tokname,yytext,yyleng);
                  printf("yylval: %s\n",yylval.tokname);
                  insert(yytext, yyleng, -1, lineno);
                  printf("yytext: %s\n",yytext);
                  return CHRLIT;
                }

{nullstring}    { 
                  yylval.tokname = malloc(sizeof(yytext));
                  strncpy(yylval.tokname,yytext,yyleng);
                  printf("yylval: %s\n",yylval.tokname);
                  insert(yytext, yyleng, -1, lineno);
                  printf("yytext: %s\n",yytext);
                  return STRLIT;
                }

{strliteral}    { 
                  yylval.tokname = malloc(sizeof(yytext));
                  strncpy(yylval.tokname,yytext,yyleng);
                  printf("yylval: %s\n",yylval.tokname);
                  insert(yytext, yyleng, STR_TYPE, lineno);
                  printf("yytext: %s\n",yytext);
                  return STRLIT;
                }

{identifier}    { 

                  return IDENT;
                }
{newline}       { col_cnt = 1; }

{whitespace}    { col_cnt+=yyleng; }

{comment}       { col_cnt = 0; }

"//"            { /* handle C++ style comments */
                    char c;
                    do { c = input();
                    } while (c != '\n');
                    lineno++;
                }

.               { return ERROR;}

%% 
```

这是 parse.y 文件，我认为这是错误所在：

```
%{

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "symtab.h"

#define DEBUG 0
#define TRUE 1
#define FALSE 0
#define MAX_MSG_LEN 50
#define YYDEBUG 1

int errcnt = 0;
char errmsg[40];
extern char *yytext;
extern FILE *yyin;
extern FILE *yyout;
extern int yyparse();
extern int lineno;
int yydebug = 1;
int t;
%}

/* no warning for fewer than 1 shift/reduce conflicts and 0 reduce/reduce */ 
%expect 1 
%union { int tokid;
         char *tokname;
       }

%token <tokname> IDENT NUMBER
%token <tokid> ASSIGN PLUS LBRACE RBRACE LPAREN RPAREN SEMI ERROR FLOAT INTEGER 
/* ADDED */
%token <tokid> IF THEN ELSE WHILE RETURN GOTO READ WRITE VOID CHAR
/* ADDED */
%token <tokid> NE EQ LT LE GT GE AND OR MINUS TIMES OVER MOD INT REAL
/* ADDED */
%token <tokid> LBRACK RBRACK COMMA CHRLIT STRLIT
%type <tokid> block stmt_seq stmt decl expr term assignmnt decltype error

%start block

%% 

block       : LBRACE stmt_seq RBRACE  
            | LPAREN stmt_seq RPAREN  
            | error { yyerrok; return 0; } 
            ;

stmt_seq    : stmt_seq stmt SEMI
            | stmt SEMI
            | error  { yyerrok; return 0;} 
            ;

stmt        : expr
            | decl
            | assignmnt { $$ = $1; }
            | error  { yyerrok; return 0;} 
            ;

decl        : decltype IDENT { 
                setType($2,$1);
                fprintf(stdout,"set decltype to: %d for %s\n",$$,$2);  
            }
            ;

expr        : expr PLUS term 
              { /* add constraint here */ }

            | term { $$ = $1; } 
            | error    { yyerrok; return 0;} 
            ;

assignmnt   : IDENT ASSIGN expr  
              { /* add constraint here */ }
            ;

term        : NUMBER { $$ = lookupType($1); }

            | IDENT  { $$ = lookupType($1); }
            ;

decltype    : INTEGER  { $$ = INT_TYPE; }
            | FLOAT { $$ = REAL_TYPE; }
            ;

%%

int main( int argc,char *argv[] )
{
   strcpy(errmsg,"type error\n");
   int i;
   if(argc < 2) {
      printf("Usage: ./cfc <source filename>\n");
      exit(0);
   }
   FILE *fp = fopen(argv[1],"r");
   if(!fp) {
     printf("Unable to open file for reading\n");
     exit(0);
   }
   yyin = fp;

   fp = fopen("dump.symtab","w");
   if(!fp) {
     printf("Unable to open file for writing\n");
     exit(0);
   }

   int flag = yyparse();

   /* dump symtab for debugging if necessary  */
   symtab_dump(fp);  
   lineno--;  /* don't count the last newline */ 
   printf("\nsemantic error cnt: %d \tlines of code: %d\n",errcnt,lineno);

   /* cleanup */
   fclose(fp);
   fclose(yyin);

   return flag;
}

yywrap()
{
   return(1);
}

int yyerror(char * msg)
{ fprintf(stderr,"%s: line %d: \n",msg,lineno);
  return 0;
} 
```

如果你需要它，这里是我正在使用的符号表：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "symtab.h"

/* maximum size of hash table */
#define SIZE 200 
#define MAXTOKENLEN 40

/* power of two multiplier in hash function */
#define SHIFT 4

/* the hash function */
static int hash ( char * key )
{ int temp = 0;
  int i = 0;
  while (key[i] != '\0')
  { temp = ((temp << SHIFT) + key[i]) % SIZE;
    ++i;
  }
  return temp;
}

/* a linked list of references (line nos) for each variable */
typedef struct RefListRec { 
     int lineno;
     struct RefListRec * next;
     /* ADDED */
     int type;
} * RefList;

/* hash entry holds variable name and its reference list */
typedef struct HashRec { 
     char st_name[MAXTOKENLEN];
     int st_size;
     RefList lines;
     int st_value;
     /* ADDED */
     int st_type;
     struct HashRec * next;
} * Node;

/* the hash table */
static Node hashTable[SIZE];

 /* insert an entry with its line number - if entry
  *  already exists just add its reference line no.  
  */
void insert( char * name, int len, int type, int lineno )
{ 
  /* ADDED */
  /*int len = strlen(name);*/
  int h = hash(name);
  Node l =  hashTable[h];
  while ((l != NULL) && (strcmp(name,l->st_name) != 0))
    l = l->next;
  if (l == NULL) /* variable not yet in table */
  { l = (Node) malloc(sizeof(struct HashRec));
    strncpy(l->st_name, name, len);  
    /* ADDED */
    l->st_type = type;
    l->lines = (RefList) malloc(sizeof(struct RefListRec));
    l->lines->lineno = lineno;
    l->lines->next = NULL;
    l->next = hashTable[h];
    hashTable[h] = l; }
  else /* found in table, so just add line number */
  { RefList t = l->lines;
    while (t->next != NULL) t = t->next;
    t->next = (RefList) malloc(sizeof(struct RefListRec));
    t->next->lineno = lineno;
    t->next->next = NULL;
  }
} 

/* return value (address) of symbol if found or -1 if not found */
int lookup ( char * name )
{ int h = hash(name);
  Node l =  hashTable[h];
  while ((l != NULL) && (strcmp(name,l->st_name) != 0))
    l = l->next;
  if (l == NULL) return -1;
  else return l->st_value;
}

/* return type value of symbol or -1 if symbol not found */
int lookupType( char * name )
{
  int h = hash(name);
  Node l =  hashTable[h];
  while ((l != NULL) && (strcmp(name,l->st_name) != 0))
    l = l->next;
  if (l == NULL) return -1;
  else return l->st_type;
}

/* set datatype of symbol returns 0 if symbol not found */
int setType( char * name, int t )
{
   int h = hash(name);
   Node l =  hashTable[h];
   while ((l != NULL) && (strcmp(name,l->st_name) != 0))
     l = l->next;
   if (l == NULL) return -1;
   else {
     l->st_type = t;
     return 0;
   }
}

/* print to stdout by default */ 
void symtab_dump(FILE * of) {  
  int i;
  fprintf(of,"------------ ------ ------------\n");
  fprintf(of,"Name         Type   Line Numbers\n");
  fprintf(of,"------------ ------ -------------\n");
  for (i=0; i < SIZE; ++i)
  { if (hashTable[i] != NULL)
    { Node l = hashTable[i];
      while (l != NULL)
      { RefList t = l->lines;
        fprintf(of,"%-12s ",l->st_name);

        if (l->st_type == INT_TYPE)
           fprintf(of,"%-7s","int ");
        if (l->st_type == REAL_TYPE)
           fprintf(of,"%-7s","real");
        if (l->st_type == STR_TYPE)
           fprintf(of,"%-7s","string");

        while (t != NULL)
        { fprintf(of,"%4d ",t->lineno);
          t = t->next;
        }
        fprintf(of,"\n");
        l = l->next;
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:57:00.170

冲突是由于竞争`error`产品而发生的。你的`stmt`派生`error`。还`stmt`衍生`expr`出哪个衍生`error`。把里面的一丢`expr`。

看看产生的`y.output`文件`yacc`（因为你通过了`-v`）。

您的语法可能无法匹配输入程序，因为您的开始符号派生了一个大括号或括号括起来的语句块，而不是一系列外部函数定义。您需要添加将处理函数定义的语法片段：`decltype IDENT arglist body`等等。

一件小事立即脱颖而出：

```
comment     \/\*([^*]|\n)*\*\/ 
```

您是说评论不能包含星号。

匹配真实 C 注释的正则表达式是：（`[/][*]([^*]|[*]*[^*/])*[*]+[/]`但请注意，这没有考虑 Lex 的换行约定）。

您不需要为单字符标记提供标记名称。这只会在语法中增加措辞，您必须在其中编写 LBRACE 之类的东西，而不仅仅是“{”。

# javascript - 关于 node.js 的问题

> ID：10640296
> 
> 赞同：0
> 
> 时间：2012-05-17T17:12:37.403
> 
> 标签：javascript, node.js, mongodb, web

我一直在尝试对 node.js 和 Mongodb 进行一些研究，并且有一些需要澄清的事情。

我正在尝试从 Web 查询 Mongodb 并想使用 JavaScript，因为我熟悉该语言，而且这很有意义，因为这是 Mongodb 在命令行界面中使用的。

看来我必须使用 node.js 从 web 查询 mongo，但我找不到信息是一种从 web 告诉我的 node.js 服务器我想查询什么的方法。

如果有人能指出我正确的方向（阅读材料、操作方法、示例），那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:15:41.173

这是我使用的一些文章...

[http://css.dzone.com/articles/nodejs-and-mongodb-beginner%E2%80%99s-0](http://css.dzone.com/articles/nodejs-and-mongodb-beginner%E2%80%99s-0)
[http://srirangan.net/2012-02-node-js-and-mongodb-getting-started -with-mongojs](http://srirangan.net/2012-02-node-js-and-mongodb-getting-started-with-mongojs)
[http://mattkopala.com/blog/2012/02/12/getting-started-with-nodejs/](http://mattkopala.com/blog/2012/02/12/getting-started-with-nodejs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:42:43.890

我发现[Mongoose](http://mongoosejs.com/)是最好的 Node.js MongoDB 库（Mongoose 的创建者实际上现在为 MongoDB 背后的公司 10gen 工作）。

除了 Mongoose 官方网站上有很多很好的示例外，您还可以找到很多其他资源：

*   [http://pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/](http://pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/)
*   [http://backbonetutorials.com/nodejs-restify-mongodb-mongoose/](http://backbonetutorials.com/nodejs-restify-mongodb-mongoose/)
*   [http://dailyjs.com/web-app.html](http://dailyjs.com/web-app.html)（如何从一开始就构建一个应用程序，多节课）

我喜欢 Node.js 和 MongoDB（在我的例子中是 Mongoose）的最重要的一点是，您编写查询命令有时与在 MongoDB shell 中编写它们的方式完全一样。

PS 最后但同样重要的是，查看 10gen 中与 Node.js 和 MongoDB 相关的视频，其中有很多（以及在生产中使用 Node 和 Mongo 的人）：[http ://www.10gen.com/presentations#programming_lang__javascript_nodejs](http://www.10gen.com/presentations#programming_lang__javascript_nodejs)

# coffeescript - 在咖啡脚本类中包装meteor.js 车把模板

> ID：10640298
> 
> 赞同：6
> 
> 时间：2012-05-17T17:12:41.477
> 
> 标签：coffeescript, meteor, handlebars.js

我完全在研究流星，但我一直试图减少示例的全局性并添加一些 OOP。

目前，我的代码如下所示：

```
# View for Search Form
form = Template.SearchForm  
form.events =
  'submit #search_form' : query_submitted
  'click #load_more' : -> Songs.get_next_page()
  'focus #query' : clear_query_field

form.page = -> Songs.page
form.total_pages = -> Songs.total_pages 
```

但是，一个脊椎或脊椎，我真正想要的是这样的：

```
class SearchForm extends Template.SearchForm
  events:
    'submit #search_form' : query_submitted
    'click #load_more' : -> Songs.get_next_page()
    'focus #query' : clear_query_field

  page : -> Songs.page
  total_pages : -> Songs.page

  # etc etc

form = new SearchForm 
```

在流星中包装车把模板的正确方法是什么？

我已经设法包装 Meteor.Collection，但是因为把手以模板命名对象，我不确定为模板执行此操作的正确方法。

**更新**

@greg 指出您可以使用 _.extend 添加属性。那行得通，但是如果我想将事件处理程序方法“query_submitted”和“clear_query_field”折叠到类中怎么办？像这样的东西：

```
_.extend Template.SearchForm,
  events :
    'submit #search_form' : @query_submitted
    'click #load_more' : -> Songs.get_next_page()
    'focus #query' : @clear_query_field

  page : -> Songs.page
  total_pages : -> Songs.total_pages

  clear_query_field : (event) ->
    console.log 'focus'

  query_submitted : (event) ->
    event.preventDefault()
    Songs.clear()
    Songs.query = $('#query')[0].value 
    Songs.search() 
```

不太行。事件处理程序没有被正确调用，我在控制台中收到错误，例如：

> 未捕获的类型错误：对象 [object Window] 没有方法“query_submitted”

相似地，

```
events :
    'submit #search_form' : (e) -> @query_submitted(e) 
```

给出：

> 未捕获的类型错误：无法调用未定义的方法“调用”

那么缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:56:35.897

Meteor 带有下划线，因此您可以：

```
_.extend Template.SearchForm,
  events:
    'submit #search_form' : query_submitted
    'click #load_more' : -> Songs.get_next_page()
    'focus #query' : clear_query_field

  page: -> Songs.page

  total_pages: -> Songs.page 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:32:19.747

您是否尝试过用 Template.Searchform 替换 @。在您的事件绑定中？

# sql-server - 尝试在查询中使用列别名时出现“无效列”

> ID：10640299
> 
> 赞同：0
> 
> 时间：2012-05-17T17:12:45.290
> 
> 标签：sql-server

我正在尝试使用我在查询中创建的列别名，在同一查询中的公式内用于不同的列。我在这里做错了什么，我该如何解决？这里的代码可以更好地解释自己：

```
SELECT TestTabI.Month, TestTabI.Year, AccessEntityList.Region, 
AccessEntityList.[Audit Tier], AccessEntityList.[Parent Group],
case 
when AccessEntityList.[Jurisdiction]='U.S.' 
then [NF PTI] 
else 0 
end AS [US Pretax Income], 

case 
when AccessEntityList.[Jurisdiction]='Non-U.S.' 
then [NF PTI] 
else 0 
end AS [FN Pretax Income],

[US Pretax Income]+[FN Pretax Income] AS [Total Pretax Income] FROM AccessEntityList
INNER JOIN TestTabI ON AccessEntityList.[Entity Number] = 
TestTabI.[Entity Number] WHERE (((TestTabI.Month)=12) AND ((TestTabI.Year)=2010) 
```

“ [US Pretax Income]+[FN Pretax Income] AS [Total Pretax Income] ”给了我错误：

```
Msg 207, Level 16, State 1, Line 7
Invalid column name 'US Pretax Income'.
Msg 207, Level 16, State 1, Line 7
Invalid column name 'FN Pretax Income'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:23:57.573

如果您将 case 语句放在 a中，`cross apply`则可以使用别名。

```
select TestTabI.Month,
       TestTabI.Year,
       AccessEntityList.Region, 
       AccessEntityList.[Audit Tier], 
       AccessEntityList.[Parent Group],
       C.[US Pretax Income], 
       C.[FN Pretax Income],
       C.[US Pretax Income]+C.[FN Pretax Income] AS [Total Pretax Income] 
from AccessEntityList
  inner join TestTabI 
    on AccessEntityList.[Entity Number] = TestTabI.[Entity Number] 
  cross apply
    (
     select case 
              when AccessEntityList.[Jurisdiction]='U.S.' 
              then [NF PTI] 
              else 0 
            end as [US Pretax Income], 
            case 
              when AccessEntityList.[Jurisdiction]='Non-U.S.' 
              then [NF PTI] 
              else 0 
            end as [FN Pretax Income]
    ) as C
where TestTabI.Month=12 and TestTabI.Year=2010 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:25:15.493

您不能`SELECT`在同一`SELECT`. 为此使用 CTE 或派生表：

```
SELECT A.*, [US Pretax Income]+[FN Pretax Income] AS [Total Pretax Income] 
FROM (
SELECT  TestTabI.Month, TestTabI.Year, AccessEntityList.Region, 
        AccessEntityList.[Audit Tier], AccessEntityList.[Parent Group],
        case when AccessEntityList.[Jurisdiction]='U.S.' then [NF PTI] 
        else 0 end AS [US Pretax Income], 
        case when AccessEntityList.[Jurisdiction]='Non-U.S.' 
        then [NF PTI] else 0 end AS [FN Pretax Income]
FROM AccessEntityList
INNER JOIN TestTabI 
ON AccessEntityList.[Entity Number] = TestTabI.[Entity Number]
WHERE (((TestTabI.Month)=12) AND ((TestTabI.Year)=2010)) A 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:17:44.363

我通常在列名中不使用空格，因此不熟悉这种括号语法。你确定它适用于别名声明吗？

对于您的别名，请尝试用反引号替换括号，以便：

```
end AS `US Pretax Income`, 
```

# r - 如何绘制每第二个时间步长？[r]

> ID：10640306
> 
> 赞同：1
> 
> 时间：2012-05-17T17:13:25.087
> 
> 标签：r

必须有一个非常简单的方法来做到这一点，但我不知道它是什么......

正如标题所说，我想知道如何在 R 中绘制时间序列的每一秒时间步？例如，我有半小时的数据，但我只想按小时绘制数据，例如我有

```
10:00 0
10:30 1
11:00 2
11:30 3
12:00 4 
```

我只想作图

```
10:00 0
11:00 2
12:00 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:15:10.697

就像是

```
plot(x[seq_along(x)%%2==0]) 
```

?

**编辑**：我不知道您是如何在上面绘制数据集的，但是无论您在做什么，都可以按如下方式对数据进行子集化

```
halfhourdata <- fulldata[seq(nrow(fulldata)) %%2 == 1,] 
```

如果您提供更多详细信息，有人可能会告诉您如何确定哪些时间值是每小时的，而不是依赖（如这里）它们是奇数行的事实......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:46:52.927

稍微不那么冗长，也没有 Ben 的解决方案那么清晰，但是您可以使用向量回收和使用布尔值进行索引来实现这一点（只要您只对其他所有观察感兴趣）。

```
# Extract the data you want (assuming you want to keep
# the first observation and skip the second, ...
newdat <- x[c(T,F)]
plot(newdat) 
```

# html - IE 9 标题定位问题

> ID：10640309
> 
> 赞同：0
> 
> 时间：2012-05-17T17:13:36.563
> 
> 标签：html, css, internet-explorer-9

我将下表用于 caroufredsel 图像库。我在 IE9 中的表头遇到了一些问题。我想让文本和图像在行内居中。

我究竟做错了什么？

这是CSS：

```
<style type="text/css">
table.thumbstable {
    margin: 20px auto;
    width:940px;
    position: relative;
    overflow-x: hidden;
    z-index: 10;
    border: 2px solid #939598;
}
table.thumbstable tr.gallery {
    height: 160px;
    width: 860px;
}
table.thumbstable thead tr{
    height:40px;
     background-color:#e6e7e8;
}
table.thumbstable thead th span.player-wrapper a img {margin:0; padding:0;}
table.thumbstable thead th span.player-wrapper a {margin:0; padding:0;}
table.thumbstable thead th span.player-wrapper {margin:0 10px 0 0; padding:0; float:right; display:inline;}
table.thumbstable tbody {
    background-color:#f7f7f7;
    height:160px;
    border: 2px solid #000;
}
table.thumbstable th {
    text-align:left;
    padding-left:20px;
    color:#568935;
    border-bottom:2px solid #939598;
}
table.thumbstable th a.play{
    float:right;
    margin-right:10px;
}
table.thumbstable td.scroll {
    width: 60px;
    valign:center;
    text-align: center;
}
table.thumbstable td.scroll img {
    margin:0;
    padding:0;
}
#thumbs2-wrapper {
    padding: 20px 40px;
    position: relative;
    overflow-x: hidden;
    height: 160px;
    width: 860px;
    background-image: url("../images/carousel_thumb_bg.png");
    background-size: 100% 100%;
    background-repeat: no-repeat;
    z-index: 10;
}

span.thumbsheadline { font-size:16px; font-family: 'Texel', sans-serif;} 
</style> 
```

这是HTML：

```
<table class="thumbstable" cellpadding="0" cellspacing="0">
        <thead>
              <tr><th colspan="3"><span class="thumbsheadline">My Carousel</span><span class="player-wrapper"><a href="#" id="player"><img src="images/home/play.png" alt="play" /></a></span></th></tr>
      </thead>
        <tbody>
             <tr>
                 <td class="scroll"><a id="prev2" class="" href="#"><img src="http://placehold.it/20x20" alt="Previous Image" /></a></td>
                 <td><div class="caroufredsel_wrapper">
                     <div id="thumbs2">
                       <a href="#item1"><img src="http://placehold.it/100x100" /><span>Item 1</span></a>
                     </div>
                    </div></td>
                 <td class="scroll"><a id="next2" class="" href="#"><img src="http://placehold.it/20x20" alt="Next Image" /></a></td>
                    </tr>
                </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:13:06.197

尝试使用 HTML 重置？

```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline; } 
```

这基本上重置了所有值，因此浏览器可以很好地协同工作并从所有元素的同一点开始......

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-17T17:18:53.770

我不会有丝毫的想法，但我认为 IE9 不是很擅长处理一些 HTML。我不太会用IE9，所以只能推测，但希望对大家有所帮助。

# java - Nvidia Eclipse-Nsight 中的 Java 开发

> ID：10640311
> 
> 赞同：3
> 
> 时间：2012-05-17T17:13:42.950
> 
> 标签：java, eclipse, cuda, nsight

我刚刚为 Linux 安装了 Cuda 工具包 5.0，我想知道是否可以在 Nsight 中进行 Java 开发。我有一个带有 Java 前端的 Cuda 项目，这将使管理它变得容易得多。

毕竟 Nsight 是基于 Eclipse 的，保持两个几乎相同的 IDE 几乎没有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:29:10.577

这是在 Nsight 中安装 Eclipse Java Developer Tools 的方法：

1.  转到“帮助->安装新软件...”
2.  将“http://download.eclipse.org/releases/indigo/”设置为“使用”输入字段。这是托管开源 Eclipse 插件的 Eclipse.org 更新站点。
3.  检查“编程语言”/“Eclipse Java 开发工具”
4.  完成向导。等待 JDT 安装完成（可能需要一段时间才能完成，具体取决于您的连接和镜像状态）。
5.  重新启动 IDE。

您现在可以使用所有 Eclipse Java 开发功能。

# php - 处理包含 '\n' 转义序列的数据库结果

> ID：10640316
> 
> 赞同：0
> 
> 时间：2012-05-17T17:13:49.683
> 
> 标签：php, mysql, textarea

我将它从文本区域插入到数据库中：

```
Hello

How 

Are 

You 
```

它是这样保存的：

```
Hello\n\nHow \n\nAre \n\nYou 
```

但是当我通过它后在文本区域中显示它时，`nl2br`它仍然显示为`Hello\n\nHow \n\nAre \n\nYou`. 如何使它显示与将其插入数据库相同的方式？

这是我用来获取值的 jQuery 代码：

```
 var getURL = WEBROOT + "index.php/Connection/getConfig/" + rowID;
                    var editConfig = $("<div>");
                    editConfig.load(getURL, function(){
                        var configValue = $(this).html();
                        console.log(configValue);
                        var button = $("<button>", {
                                html: "submit"
                            }),
                            textArea = $("<textarea>",{
                                width: "350px", height: "600px"
                            }).val(nl2br(configValue));
                        $(this).text("").append(
                            textArea,
                            $("<br/>"),
                            button
                        ).dialog({
                            title: "Editing Config for id " + rowID,
                            modal: true,
                            width: 405
                        });
                  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:25:52.120

（*升级到答案*）

听起来您将字符序列存储`\n`在数据库中，而不是由该转义码表示的实际换行符。在这种情况下[`nl2br`](http://php.net/manual/en/function.nl2br.php)不会有任何区别（它用 HTML`<br/>`标记替换实际的换行符，这甚至不是您想要在 a 中显示换行符的内容`<textarea>`） - 您需要[`stripcslashes`](http://php.net/manual/en/function.stripcslashes.php)改用。

但是，我建议修复数据库中的数据，以免其内容被转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:15:45.167

您不能格式化文本区域中的文本。您可以使用 div 代替。使用[str_replace()](http://php.net/manual/en/function.str-replace.php)替换“\n”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:19:03.487

这可能不是正确的做事方式，但您总是可以在将其存储到表中之前将其替换`\n`为`<br>`using 。`str_replace`然后，您只需输出消息，所有内容都将正确格式化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:19:04.753

nl2br 将换行符转换为 br html 标记，并且您不能仅在 div 中呈现 textarea 中的 html。如果你想显示带有换行符的文本，你最好使用 Tiny-Mce [http://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php)它让这样的事情变得简单

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T17:19:53.253

我不认为你曾经`echo nl2br($var)`在 textarea 中显示。原因是，如果你这样做了，那么`\r\n`就会变成`<br/>`你会看到

```
Hello<br/>How <br/>Are <br/>You 
```

使用以下代码在 textarea 中显示：

```
echo $var 
```

使用以下代码显示文本区域外部，即在表格单元格或 DIV 等内部。

```
echo nl2br($var) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T17:21:06.173

我只是把它放在一个新的 HTML 文件中：

```
<form>
<textarea>
abc
def
123
</textarea>
</form> 
```

要将换行符放入文本区域，`<br>`不应使用 - 而是硬返回。让你的 PHP 脚本输出`"\n"`到浏览器，看看会发生什么。

# c# - 尝试创建开始最小化的表单时出现 StackOverflowException

> ID：10640319
> 
> 赞同：3
> 
> 时间：2012-05-17T17:14:00.130
> 
> 标签：c#, winforms

我的问题很简单。我有这个新表格，我只是编码：

```
 public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.Resize += new EventHandler(Form1_Resize);

        this.WindowState = FormWindowState.Minimized;
    }

    private void Form1_Resize(object sender, EventArgs e)
    {
        if (WindowState == FormWindowState.Minimized)
        {
            ShowInTaskbar = false;
        }
        else if (WindowState == FormWindowState.Normal)
        {
            ShowInTaskbar = true;
        }
    }
} 
```

我希望此表单开始最小化，并且仅在表单未最小化时才显示任务栏图标。但是当我运行它时，我收到一个`StackOverflowException`. 我认为`ShowInTaskbar = false`正在调用 resize 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:48:58.333

将您的自动最小化放在“加载”事件中，而不是构造函数中。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.Resize += new EventHandler(Form1_Resize);
        this.Load += new EventHandler(Form1_Load);

    }

    void Form1_Load(object sender, EventArgs e)
    {
        WindowState = FormWindowState.Minimized;
    }

    private void Form1_Resize(object sender, EventArgs e)
    {
        if (WindowState == FormWindowState.Minimized)
        {
            ShowInTaskbar = false;
        }
        else if (WindowState == FormWindowState.Normal)
        {
            ShowInTaskbar = true;
        }
    }
} 
```

我不完全确定为什么这会防止堆栈溢出，但一旦我发现，我会更新答案。我在重现问题后对其进行了测试，并且可以确认它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:43:12.587

你说的对。您可以通过仅在最小化表单后添加事件处理程序来修复此实例。

其他方法（将在任何时候阻止此问题的发生）是事件处理程序在它启动时将自己从事件中删除，并在它退出之前重新添加自己（因此它不会在它产生时被调用size 改变自身），或者在我们执行事件处理程序时使用设置为 true 的 bool 成员变量，以便它知道忽略它自己触发的任何事件。

# delphi - 重用 TSQLQuery 缺失的参数

> ID：10640325
> 
> 赞同：2
> 
> 时间：2012-05-17T17:14:21.023
> 
> 标签：delphi, parsing, parameters, delphi-xe2

我正在使用 Delphi XE2 和 TSQLQuery 对象。我第一次使用它就可以工作。如果我立即重用它，那么它不会解析新 SQL 的参数并重建`qry.Params`列表：

```
var
  qry: TSQLQuery;
begin
  qry := TSQLQuery.Create(nil);
  try
    qry.MaxBlobSize := -1;
    qry.SQLConnectin := AnExistingConnection;

    qry.CommandText := 'select field1 from table1 where fieldX = @valueX';
    qry.ParamByName('valueX').Value := 1;
    qry.Open;

    // ... use data ...

    qry.Close;
    qry.Params.Clear; // <- works the same with or without this
    qry.CommandText := 'select field2 from table2 where fieldY = @valueY';
    qry.ParamByName('valueY').Value := 2; // <- Error: 'valueY' Param not found
    qry.Open;
  finally
    FreeAndNil(qry);
  end;
end; 
```

我做什么都没关系，它不会解析第二条 SQL 语句的参数，所以我不能按名称绑定“valueY”参数。

我可以想到两种解决方法：

1.  自己手动构建`qry.Params`列表。
2.  `qry`在两个命令之间销毁并重新创建对象。

我不应该做这两件事。也许对象上有一个属性或某些东西`qry`会导致它在每次将新的 SQL 语句分配给它的`CommandText`属性时重新解析参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:44:50.107

原来是语法问题。参数必须以 a `:`not a开头`@`。在真正的第一个查询中，我有本地 SQL 变量，因此整个 SQL 中混合了变量`@param`和`:param`变量。通过使用`:param`所有绑定参数的语法，每次都会正确解析参数，就像它应该做的那样`TSQLQuery` **。**

```
var
  qry: TSQLQuery;
begin
  qry := TSQLQuery.Create(nil);
  try
    qry.MaxBlobSize := -1;
    qry.SQLConnectin := AnExistingConnection;

    qry.CommandText := 'select field1 from table1 where fieldX = :valueX';
    qry.ParamByName('valueX').Value := 1;
    qry.Open;

    // ... use data ...

    qry.Close;
    qry.CommandText := 'select field2 from table2 where fieldY = :valueY';
    qry.ParamByName('valueY').Value := 2;
    qry.Open;
  finally
    FreeAndNil(qry);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:33:21.433

使用`TSQLQuery.SQL`属性而不是`TSQLQuery.CommandText`属性：

```
qry.SQL.Text := 'select field1 from table1 where fieldX = @valueX'; 
...
qry.SQL.Text := 'select field2 from table2 where fieldY = @valueY'; 
```

无需`Params.Clear`中间打电话，`SQL`酒店会为您处理。

# c++ - 无法理解如何修复此内存泄漏

> ID：10640326
> 
> 赞同：2
> 
> 时间：2012-05-17T17:14:31.727
> 
> 标签：c++, memory-leaks, valgrind

我正在创建一个需要三个参数的小型求解器：小时数、当前时间和真实时间。

该程序本身运行良好，但存在我无法修复的内存泄漏。

代码：

在我的主要内容中：

`vector<ClockState> moves = sol.solve(curClock);`

`solve`方法：

```
std::vector<Game> Solver<Game>::solve(Game curCfg){
    std::vector<Game> result;
    std::vector<Game> seen;
    std::queue<Game> q;

    q.push(curCfg);
    seen.push_back(curCfg);

    std::vector<Game> moves;

    Game cfg = q.front();
    Game * newCfg = NULL;

    while (q.size() > 0) {

        if (q.front().isEndState()) {
            break;
        }

        cfg = q.front();
        q.pop();

        cfg.getMoves(moves);
        for (unsigned int i = 0; i < moves.size(); i++) {
            if (find(seen.begin(), seen.end(), moves[i]) == seen.end()) {
                newCfg = new Game(cfg);
                moves[i].setPrev(newCfg);
                q.push(moves[i]);
                seen.push_back(moves[i]);
            }
        }
    }

    delete newCfg;

    if(q.empty()){
        return result;
    }

    Game temp(q.front());

    while (true) {
        result.push_back(temp);
        if (temp == curCfg) {
            break;
        }
        temp = temp.prev();
    }
    reverse(result.begin(), result.end());
    return result;
} 
```

还有我的 setPrev 方法（在 ClockState 中）

```
void ClockState::setPrev(ClockState *prev) {
    previous = prev;
} 
```

`previous`是 ClockState 类中的一个指针。

据我了解，我需要删除`newCfg`，即使我尝试这样做，它仍然会导致内存泄漏。

这是来自的输出`valgrind --leak-check=full ./clock 12 10 3`

```
==16856==
==16856== HEAP SUMMARY:
==16856==     in use at exit: 64 bytes in 4 blocks
==16856==   total heap usage: 28 allocs, 24 frees, 2,095 bytes allocated
==16856==
==16856== 64 (16 direct, 48 indirect) bytes in 1 blocks are definitely lost in loss record 2 of 2
==16856==    at 0x402569A: operator new(unsigned int) (vg_replace_malloc.c:255)
==16856==    by 0x8049AB1: Solver<ClockState>::solve(ClockState) (Solver.h:102)
==16856==    by 0x804964B: main (clock.cpp:106)
==16856==
==16856== LEAK SUMMARY:
==16856==    definitely lost: 16 bytes in 1 blocks
==16856==    indirectly lost: 48 bytes in 3 blocks
==16856==      possibly lost: 0 bytes in 0 blocks
==16856==    still reachable: 0 bytes in 0 blocks
==16856==         suppressed: 0 bytes in 0 blocks
==16856==
==16856== For counts of detected and suppressed errors, rerun with: -v
==16856== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 17 from 6) 
```

第 102 行是`newCfg = new Game(cfg);`

当 Solver 返回该向量时，我最终打印结果，然后直接删除每个先前的内容，如下所示：

```
for(int j = 0; j < moves.size(); j++){
    moves[j].deletePrev();
} 
```

deletePrev() 只是说`delete previous;`

欣赏它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:18:24.973

您在循环中创建新对象，但只删除一个，这会导致内存泄漏。

您需要遍历每个移动并删除指针指向的元素`previous`指针

或者，只创建一个`Game`对象并在完成后将其删除（因为您正在多次重新创建相同的对象）

如果您不想在许多其他对象之间共享对象，另一种选择是`Game`按值复制对象（因此不需要`new`或不需要）`delete`

另一种方法是使用某种智能指针（例如来自 BOOST 或使用 C++11）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:19:49.300

这段代码：

```
Game * newCfg = NULL;
while (q.size() > 0) {

    if (q.front().isEndState()) {
        break;
    }

    cfg = q.front();
    q.pop();
    std::vector<Game> moves;
    cfg.getMoves(moves);
    for (int i = 0; i < moves.size(); i++) {
        if (find(seen.begin(), seen.end(), moves[i]) == seen.end()) {
            newCfg = new Game(cfg);
            moves[i].setPrev(newCfg);
            q.push(moves[i]);
            seen.push_back(moves[i]);
        }
    }
}

delete newCfg; 
```

声明一个名为 newCfg 的变量，它是一个指向 Game 的指针。但是，在循环之外，您需要保留 Game 类的新实例并将它们添加到移动容器中。您需要“删除”您添加到移动容器中的每个 Game* 实例。

您上面的代码基本上与此代码执行相同的操作：

```
int* myInts = NULL;
myInts = new Int[2];
myInts = new Int[5];
delete myInts; // <-- only deletes memory for Int[5],
               // Int[2] memory is dangling in no-mans-land 
```

# android - 应用程序中的 Android GPS 侦听器

> ID：10640327
> 
> 赞同：0
> 
> 时间：2012-05-17T17:14:32.290
> 
> 标签：android, gps

我想在我的 Android 项目的 Application 类级别实现我的 GPS 侦听器，因为该项目包括一些使用 GPS 数据的不同活动（以及构建这些活动的不同开发人员......）

问题是，应用程序类没有与其 onCreate() 方法相反的内容（它确实有 onTerminate()，但这完全是假的），所以我无法实现我的代码来停止侦听器（locSvc.removeUpdates (gpsReader);) -- 退出应用程序后，GPS 愉快地沿着吃电运行...

有没有人对 GPS 侦听器接口提出建议，该接口可以检测其“父”侦听器何时离开并自杀？我在屏幕上或 logcat 中没有看到 NullPointerException 的通知，但这可能有效吗？

谢谢，R。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:17:03.990

您应该从`Service`每个都`Activity`可以绑定到的 if 运行。

# macos - 当“端口”不起作用时卸载 macports

> ID：10640329
> 
> 赞同：4
> 
> 时间：2012-05-17T17:14:42.843
> 
> 标签：macos, macports, osx-tiger

我一直在尝试为我正在运行的应用程序安装一些依赖项，我担心我可能会破坏开发环境。我在 MacBook 上运行这个程序（OSX Tiger，我无法访问更新的程序）。MacPorts 已正式损坏，当我尝试运行任何命令时返回此错误：

```
 sqlite error: near "ADD": syntax error (1) while executing query: ALTER TABLE registry.files ADD COLUMN binary bool
    while executing 
"registry::open $db_path"
    (procedure "mportinit" line 633)
    invoked from within
"mportinit ui_options global_options global_variations" 
```

看到这发生在任何端口*_*命令上，我不能使用卸载 MacPorts 的标准方法。然而，考虑到我是第一个在这种情况下得到它的人，我宁愿在不知道自己在做什么的情况下不围绕自己扎根。

1.  这个问题可以解决吗？就我自己的知识而言，有没有人知道究竟是什么导致了这个错误，或者它对 macport 的运行意味着什么？

2.  我怎样才能（假设这是必要的/一个好主意）彻底卸载 macports？我宁愿以后不必费心重新安装所有端口，但这比我现在拥有的要好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:46:22.707

MacPorts 通常仍可在旧版本的 Mac OS X 上运行，因为开发人员不会故意破坏兼容性。MacPorts 官方仅支持最新版本的 Mac OS X 和之前的版本（在撰写本文时，这是 10.7 Lion 和 10.6 Snow Leopard）。

但是，根据您在此处的报告，最新的 MacPorts 2.1.0 升级似乎与 Mac OS X 10.4 Tiger 存在兼容性问题。如上面的错误消息所示，较旧的 SQLite 库版本似乎不理解`ALTER TABLE ... ADD COLUMN`用于更新端口注册表的语法。

对于这种情况，我假设只有升级过程本身受到影响并且正常操作会起作用。此过程应该将您的 MacPorts 注册表带到此版本中添加的新功能所需的较新版本。创建一个新的空注册表可能仍然有效。但是，这需要完全重新安装 MacPorts 和所有端口。

请按照[卸载说明](http://guide.macports.org/chunked/installing.macports.uninstalling.html)进行操作，但跳过第一个命令，因为`port`无法再执行。这可能会留下一些端口安装到系统位置的痕迹，但在大多数情况下，这可以正常工作。[然后，使用指南中的安装说明](http://guide.macports.org/chunked/installing.macports.html#installing.macports.source)从源代码安装 MacPorts 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:26:47.443

这是[MacPorts 2.1.0 中的一个错误](https://trac.macports.org/ticket/34463)中的一个错误，仅影响 Tiger，在 2.1.1 中已修复。如果你还在运行 2.0.4，你可以“sudo port selfupdate”到 2.1.1 没有问题。如果您在 2.1.0 发布时已经运行了 selfupdate，因此无法使用任何端口命令，您可以重新运行[Tiger 的最后一个磁盘映像安装程序](https://distfiles.macports.org/MacPorts/)，然后运行 ​​selfupdate 以获取 2.1.1。

# objective-c - #define 指令说明

> ID：10640333
> 
> 赞同：1
> 
> 时间：2012-05-17T17:15:02.430
> 
> 标签：objective-c, ios, cocoa-touch

对不起，如果这是一个不好的问题，但是。. .

我想为我的 UIColor 创建一个看起来像这样的快捷方式

```
[UIColor colorWithRed:(88.0f/255.0f) green:(201.0f/255.0f) blue:(234.0f/255.0f) alpha:1] 
```

我可以以某种方式使用#define，以便我可以输入一些快捷方式吗？我试过了，但我认为我的符号可能是 off 。. .

如果 #define 仅用于常量或由于某种原因不适用于这种情况，是否有其他方法可以简化该方法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:20:27.073

#define 只是一个美化的文本替换系统。如果你定义这样的东西：

```
#define key value 
```

那么即使在编译器可以做任何事情之前，预处理器也会`key`替换每次出现的 。`value`所以你定义什么并不重要。你可以使用任何东西作为你的价值，所以你可以做类似的事情

```
#define kMyColor [UIColor colorWithRed:(88.0f/255.0f) green:(201.0f/255.0f) blue:(234.0f/255.0f) alpha:1] 
```

但在这种情况下，您可能应该使用静态常量变量：

```
static const UIColor *myColor = [UIColor colorWithRed:(88.0f/255.0f) green:(201.0f/255.0f) blue:(234.0f/255.0f) alpha:1]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T17:20:37.983

```
#define RGBA(r,g,b,a) [UIColor colorWithRed:(r) green:(g) blue:(b) alpha:(a)] 
```

使用：

```
[UIColor colorWithRed:(88.0f/255.0f) green:(201.0f/255.0f) blue:(234.0f/255.0f) alpha:1] 
```

用这个：

```
RGBA(0.35,0.79,0.92,1) 
```

看看这个教程： [UIColor Shortcuts](http://imadjine.com/blog/2011/09/26/uicolor-shortcuts/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T17:34:56.540

通过您的问题的文字，您想要快捷方式并不是很清楚 - 一种颜色，创建带有值的 RGBA 颜色`[0..255]`？

DrummerB 第一个回答，Justin Boo 第二个回答。

我想提出一个适合两者的解决方案：

创建一个可以涵盖两者的类别

*   `[UIColor colorWith255ValuesWithRed: 128 green: 35 blue: 40 alpha:255]`，包装方法，您现在正在使用
*   创建一个 UIColor 类方法，将 UIColor 对象存储在静态 NSMutableDictionary 及其名称和对应部分中，您可以这样调用`[UIColor registeredColorWithName:@"activeForegroundColor"]`

我为颜色寄存器的想法写了一个示例代码：

**UIColor+Register.h**

```
#import <UIKit/UIKit.h>

@interface UIColor (Register)
+(void)registerColor:(UIColor *)color 
             forName:(NSString *)name;

+(UIColor *)registeredColorForName:(NSString *)name;

+(void)unregisterColorForName:(NSString *)name;
@end 
```

**UIColor+Register.m**

```
#import "UIColor+Register.h"

@interface UIColor (RegisterPrivate)
+(NSMutableDictionary *)colorRegister;
@end

@implementation UIColor (RegisterPrivate)
+(NSMutableDictionary *)colorRegister
{
    static dispatch_once_t once;
    static NSMutableDictionary *register_;
    dispatch_once(&once, ^{
        register_ = [NSMutableDictionary dictionary];
    });
    return register_;
}
@end

@implementation UIColor (Register)

+(void)registerColor:(UIColor *)color 
             forName:(NSString *)name
{
    [[self colorRegister] setObject:color forKey:name];
}

+(UIColor *)registeredColorForName:(NSString *)name
{
    return [[self colorRegister] objectForKey:name];
}

+(void)unregisterColorForName:(NSString *)name
{
    [[self colorRegister] removeObjectForKey:name];
}

@end 
```

**用法：**
*注册*

```
[UIColor registerColor:[UIColor redColor] forName:@"activeColor"];
[UIColor registerColor:[UIColor grayColor] forName:@"passiveColor"]; 
```

*使用权*

```
[view1 setBackgroundColor:[UIColor registeredColorForName:@"passiveColor"]];
[view2 setBackgroundColor:[UIColor registeredColorForName:@"activeColor"]]; 
```

*注销*

```
[UIColor unregisterColorForName:@"activeColor"]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T17:31:07.737

在 UIColor 上创建一个类别并定义一个新的类方法（如 blackColor、whiteColor 等）。这样你的代码至少适合现有的风格。

```
+(UIColor*)myColor
{
    return [UIColor colorWithRed:(88.0f/255.0f) green:(201.0f/255.0f) blue:(234.0f/255.0f) alpha:1];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T17:40:07.303

如果您愿意，这里是 HEX RGB 的定义：

```
#define UIColorFromRGB(rgbValue) [UIColor \
colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 \
green:((float)((rgbValue & 0xFF00) >> 8))/255.0 \
blue:((float)(rgbValue & 0xFF))/255.0 alpha:1.0] 
```

用法：

```
UIColor *color = UIColorFromRGB(0xe8e600); //0xe8e600 hex representation... 
```

# php - 电子商务模板

> ID：10640334
> 
> 赞同：0
> 
> 时间：2012-05-17T17:15:02.547
> 
> 标签：php, e-commerce

我目前正在为客户使用[电子商务](http://www.ecommercetemplates.com/)网站，但为了使事情井井有条，我想将一些页面分组到子文件夹中。但是，由于电子商务的性质，它依赖于其基本文件夹中的几个页面（search.php、products.php 等）来生成一些内容页面，因此我不能真正拥有任何子文件夹，除非我复制所有内容必要的页面进入每个单独的子目录，然后它使一切变得更加复杂，更不用说产生自己的问题了。

我希望我的问题足够清楚，我想知道在这种情况下有哪些选择？

有没有办法可以为子目录中的每个公共页面设置一个重定向页面以重定向到基本文件但保留任何 POST 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:20:07.490

您可以尝试将过滤后的帖子值存储到会话（首选）、缓存、数据库，或者只是将一个 php 脚本包含到您发布表单数据的脚本中。

# c# - HttpModule ATL 服务器服务 InputStream 失败

> ID：10640339
> 
> 赞同：1
> 
> 时间：2012-05-17T17:15:17.313
> 
> 标签：c#, asp.net, soap, atl, httpmodule

我正在尝试将一些 SOAP 消息记录功能添加到一个旧的、旧的 ATL Server Web 服务，该服务在 Windows Server 2008 机器上的 IIS 7.5 中以集成模式运行，但遇到了一个奇怪的问题。对于进一步的背景知识，我已将包含 HttpModule 的程序集添加到 ATL Server Web 服务的 web.config 的 modules 元素中。

我一直在关注 [此处](https://stackoverflow.com/questions/2624621/capturing-soap-requests-to-an-asp-net-asmx-web-service)提供的答案，并且日志记录本身效果很好。

但是，每当我使用此日志记录功能时，服务都会以“SOAP 无效请求”进行响应，而日志文件中包含预期的 SOAP 消息。我已经对它进行了很多摆弄，并发现只有当我在 BeginRequest 事件的处理程序中访问请求对象的 InputStream 属性时才会发生这种情况。如果我什至像这样简单地将变量设置为 InputStream 的长度，它将失败：

```
private void OnBegin(object sender, EventArgs e)
   {
   var request = _application.Request;
   //this will blow up
   var foo = request.InputStream.Position;
   } 
```

如果我不触摸我的处理程序中的 InputStream（显然，当我这样做是为了记录请求的内容时，这并没有多大用处），请求就会完美地通过。

我可以访问 Request 对象中的标头值以及所涉及的 HttpApplication 的各种其他属性，但访问 InputStream 会导致服务阻塞。

ATL Server 是否有一些内在的东西会阻止我执行此日志记录？我是否需要在 BeginRequest 处理程序中添加某种锁定或其他保护措施以确保其正常运行？我的处理程序是否以某种方式占用 InputStream 导致它无法用于服务？

解决这个问题的另一种方法是询问是否有办法在请求到达我的服务时查看请求（即在此 HttpModule 执行之后）？

值得注意的是，我正在使用 SoapUI 来测试服务。

编辑：我现在在 IIS 中完成了一些失败的请求跟踪，并收到以下错误消息：

```
ModuleName IsapiModule 
Notification 128 
HttpStatus 500 
HttpReason Internal Server Error 
HttpSubStatus 0 
ErrorCode 0 
ConfigExceptionInfo  
Notification EXECUTE_REQUEST_HANDLER 
ErrorCode The operation completed successfully. (0x0) 
```

这来自 ATL Server Web 服务的处理程序（即服务的 DLL）。在这之前是“GENERAL_READ_ENTITY_START”和“GENERAL_READ_ENTITY_END”消息，“END”有这个消息：

```
BytesReceived 0 
ErrorCode 2147942438 
ErrorCode Reached the end of the file. (0x80070026) 
```

这是否意味着我认为的意思？处理程序没有获取任何数据？这是指向我的 HttpModule 与请求的 InputStream 混淆的更多证据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T00:26:48.063

您确定您的请求对象有效吗？您在此处所做的事情与您引用的示例略有不同。他们正在从 sender 参数中提取流，而您显然依赖于成员变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:11:33.653

所以我最终确定这不是一个可行的方法：我根本无法在 IIS 6 中触发 HttpModule（我需要让它成为一个可接受的解决方案）。我尝试在 Request 对象上设置 Filter 属性和各种其他疯狂的想法，但没有一个能让我能够在 HttpModule 中记录请求正文并让服务仍然工作。

所以我做了更多的挖掘，并在[codeproject](http://www.codeproject.com/Articles/1122/SOAPing-without-a-Web-Server)上找到了这篇关于ATL Server 内部工作的文章，特别是 atlsoap.h 中的 HandleRequest 方法。我在那里闲逛了一段时间，想出了一种方法来获取那里的请求正文，从那里手动将其写入文件非常简单。

对于那些好奇的人，这是我添加到 HandleRequest() 的最终代码：

```
//****************************************REQUEST LOGGING**********************************************************
        BYTE* bytes = pRequestInfo->pServerContext->GetAvailableData();
        FILE* pFile;
        pFile = fopen("C:\\IISLog\\ATL.txt", "a");
        fwrite(bytes, 1, pRequestInfo->pServerContext->GetAvailableBytes(), pFile);
        fclose(pFile);
//****************************************REQUEST LOGGING********************************************************** 
```

我仍然会多玩一点，但我有一个似乎可行的解决方案。

# r - 如何比较 R 中部分匹配的字符向量

> ID：10640341
> 
> 赞同：8
> 
> 时间：2012-05-17T17:15:25.017
> 
> 标签：r

这一定是一个简单的问题，但作为一个 R 新手，我一直无法弄清楚。

我有两个字符向量，List1 和 List2，我想知道 List1 中有多少样本也在 List2 中找到。但是 List2 经常有多个名字放在一起，这似乎把事情搞砸了。以下是假设列表：

```
List1 <- c("SampleX", "SampleY", "SampleZ", "SampleQ")

List2 <- c("SampleX", "SampleY", "Alias1,Alias2,SampleZ") 
```

我可以得到一个识别 SampleX 和 SampleY，但不是 SampleZ 的输出。

有什么建议么？？

谢谢！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T17:21:43.410

怎么样：

```
List1[sapply(List1,function(x) any(grepl(x,List2)))]
[1] "SampleX" "SampleY" "SampleZ" 
```

?

# javascript - 为什么我不应该更“直接”地访问元素 (elemId.innerHTML)

> ID：10640342
> 
> 赞同：4
> 
> 时间：2012-05-17T17:15:26.360
> 
> 标签：javascript, html, dom

我见过一些 JavaScript 代码来访问这样的 HTML 元素：`elementID.innerHTML`，它可以工作，尽管几乎我搜索的每个教程都使用`document.getElementById()`. 我什至不知道是否有短地址的术语。

起初我简单地认为每个 id'ed HTML 元素都直接在下面，`window`但使用`getParent()`显示树结构在那里，所以我想要的元素是否嵌套并不重要。我写了一个简短的测试用例：

[http://jsfiddle.net/hYzLu/](http://jsfiddle.net/hYzLu/)

```
<div id="fruit">Mango<div id="color">red</div></div>
<div id="car">Chevy</div>
<div id="result" style="color: #A33"></div>

result.innerHTML = "I like my " + color.innerHTML + " " + car.innerHTML; 
```

“短”方法看起来像是一个不错的捷径，但我觉得它有问题，因为它实际上没有出现在教程中。

为什么是`document.getElementById()`首选，或者在某些情况下甚至可能需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:39:12.260

此外，我还要补充一点，并非所有 ID 都可以具有不能用作变量名的值。例如，如果您的 ID 是“nav-menu”。

虽然我想你可以写 window["nav-menu"].innerHTML

这让我想到，如果您创建一个与 ID 同名的窗口级别变量会发生什么？签出这个 jsfiddle（在 chrome 中测试）：http: [//jsfiddle.net/8yH5y/](http://jsfiddle.net/8yH5y/)

这似乎完全是个坏主意。如果您将多次使用引用，只需使用 document.getElementById("id") 并将结果存储到变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:23:14.677

> 为什么我不应该更“直接”地访问元素 (elemId.innerHTML)

因为，根据该线程中的其他人的说法，**不完全支持通过 id name 任意引用**。

所以，我认为你应该做的是将他们的选择存储到一个var中，然后引用这个var。

试试吧

```
var color = document.getElementById('color');
color.innerHTML = 'something'; 
```

这样做是一件好事的原因是在 DOM 中执行查找是一个昂贵的过程，内存方面。因此，如果将元素的引用存储到变量中，它就会变成静态的。因此，您不会每次都执行查找`.doSomething()`。

请注意，javascript 库倾向于添加 shim 函数以增加跨浏览器的通用函数支持。例如，使用 jquery 的选择器而不是纯 javascript，这将是一个好处。不过，如果您实际上担心内存/性能，原生 JS 通常会赢得速度测试。（jsperf.com 是衡量速度和进行比较的好工具。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:19:00.570

我想这*更安全。*如果您有一个`result`在与您正在做的相同上下文中命名的变量，`result.HTML`我很确定浏览器会抛出一个摆动器。以本例中的方式执行`document.getElementById()`此操作显然会为您提供关联的 DOM 元素。

此外，如果您将 HTML 动态添加到页面中，我可能是错的，但您也可能会遇到意外行为`result`：)

# llvm - 使用 llvm 后端（Mips、Sparc 等）

> ID：10640346
> 
> 赞同：2
> 
> 时间：2012-05-17T17:15:32.290
> 
> 标签：llvm

我正在尝试找到一些代码示例，这些示例允许我连接 llvm 后端以生成代码。例如，将 IR 连接到 Mips 或 Sparc 后端。但是，我还没有找到任何这样的例子。我能找到的唯一最接近的是使用 AMD IL 和 GPU 后端，目前在台面树中，但尚未合并到 llvm 后端。我已经阅读了编写 LLVM 后端教程，但对于如何连接后端对我来说并不是很明显。我确定我在示例中遗漏了一些东西，所以有人可以为我指出一些示例吗？我已经有了生成 IR 的代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:08:18.037

llc 命令会将 LLVM IR 编译为目标机器程序集。使用参数“march=[your target]”，您可以获取不同目标的程序集，例如 Mips 的“march=mips”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:18:24.597

您可能想查看 LLVM llc 命令。它读取位码 IR 文件并调用其上的任何后端。

# ios - 每隔 n 分钟将 GPS 坐标发送到 Ios 后台的 Web 服务

> ID：10640347
> 
> 赞同：2
> 
> 时间：2012-05-17T17:15:35.573
> 
> 标签：ios, gps, core-location

我还在**n 分钟内开发连续 GPS 更新**。当我还需要**将 GPS 坐标发送到我的 Web 服务**时，问题就变得复杂了。可能吗？我在某处读到，**在后台模式下无法使用互联网服务**。我从这里得到了一些想法：[如何在我的 iOS 应用程序中每 n 分钟更新一次后台位置？](https://stackoverflow.com/questions/6347503/how-do-i-get-a-background-location-update-every-n-minutes-in-my-ios-application)

问候

# android - Android 库使用自己的资源调用 setContentView，但因“无法解析静态字段”而失败

> ID：10640350
> 
> 赞同：3
> 
> 时间：2012-05-17T17:16:09.193
> 
> 标签：android, android-layout, resources

我已经编写 + 导入了我自己的包含 OAuth 登录功能的库。它需要在自己的布局资源上调用**“setContentView(R.layout.authorize)” ，** **authorize.xml**定义在库的*res/layout*文件夹中。如果我将库作为常规项目运行（使用测试活动），一切正常。但是，如果我在另一个项目中使用该库，则会收到以下错误，表明找不到我的**authorize.xml布局。**

```
05-17 16:56:10.436: W/dalvikvm(212): VFY: unable to resolve static field 29 (twitter_authorize_webview) in Lcom/skworks/twitter/R$layout;
05-17 16:56:10.436: W/dalvikvm(212): VFY:  rejecting opcode 0x60 at 0x0003
05-17 16:56:10.436: W/dalvikvm(212): VFY:  rejected Lcom/skworks/twitter/AuthorizeActivity;.onCreate (Landroid/os/Bundle;)V
05-17 16:56:10.436: W/dalvikvm(212): Verifier rejected class Lcom/skworks/twitter/AuthorizeActivity;
05-17 16:56:10.436: W/dalvikvm(212): Class init failed in newInstance call (Lcom/skworks/twitter/AuthorizeActivity;) 
```

这是我的主要活动中的代码

```
Intent i = new Intent(this, AuthorizeActivity.class);
i.putExtra("URL", mRequestToken.getAuthenticationURL());
this.startActivityForResult(i, TWITTER_AUTH); 
```

显然这是在库中找到的我的 AuthorizeActivity 类的*onCreate中。*

```
setContentView(R.layout.authorize); 
```

我确定某些东西没有正确设置以公开我的库中定义的资源。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:20:54.420

您可能需要检查库的构建设置。可能是它没有将布局文件打包到您的 jar/apk 中。也可能是使用该库的项目没有将文件捆绑到可交付的 apk 中。那就是我开始寻找的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:32:29.077

检查导入，您没有导入 android.R。否则，正如 mtmurdock 所说，检查您的项目是否正在构建，尝试清理它。您可能遇到 xml 错误。

# jquery - 如何“丢弃”表单更改？

> ID：10640355
> 
> 赞同：4
> 
> 时间：2012-05-17T17:16:40.410
> 
> 标签：jquery

**设置：**

我有一个表格和一个“提交”按钮。理想情况下，用户应该填写表格，单击“提交”，然后离开选项卡。如果他试图离开选项卡而不保存更改，我需要用 3 个选项提醒他：

1.  节省
2.  丢弃：丢弃表单数据更改，并离开选项卡，就好像数据从未修改过一样。如果用户回到同一个选项卡，他应该会看到“未修改”的数据。
3.  取消：只需关闭对话框，将用户保持在同一选项卡上。用户可以进一步修改数据，点击保存等。

**问题：**

实现保存和取消很容易。问题在于“丢弃”。如果用户点击“放弃”，表单数据应该恢复到修改前的状态。

有没有办法做到这一点？如果我没有正确解释问题，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T17:19:47.573

您可以将表单的初始状态保存在 jQuery[`.data()`](http://api.jquery.com/data/)函数中。也许做类似的事情

```
$(function(){
    $('form').find(':input').each(function(i, elem) {
         var input = $(elem);
         input.data('initialState', input.val());
    });
}); 
```

然后一旦你点击丢弃，你可以调用一个方法，比如：

```
function restore() {
    $('form').find(':input').each(function(i, elem) {
         var input = $(elem);
         input.val(input.data('initialState'));
    });
} 
```

**注意**：如果您想在不让用户离开页面的情况下将表单恢复到页面上的数据，这很有用。如果您不想保存数据，请不要...保存数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:20:01.517

只要使用 value="" 填写表单的值，就可以[重置表单](http://www.javascript-coder.com/javascript-form/javascript-reset-form.phtml)

```
<input type="button" name="reset_form" value="Reset Form" onclick="this.form.reset();"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:28:32.667

var 首字母 = [];

```
// Call this function to store all initialvalues
function gettter() {
  $('input,select', 'form').each(function() {
      initials.push({
         type: $(this).attr('type'),
         name: $(this).attr('name'),
         value: $(this).val()
      });
  });
}

// Call this function to restore all values
function setter() {
   initials.each(function(index, record) {
     $('input[type="'+ record.type+'"][name="'+ record.name +'"]', 'form').val(record.val);
   });
} 
```

但是，如果您只想在没有任何先前值的情况下重置表单；

```
$('form').reset(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:34:18.910

检查离开页面的用户可以做的最好的事情可能是 use `onbeforeunload`。但是，此确认框不可自定义。看看这个[问题](https://stackoverflow.com/questions/147636/best-way-to-detect-when-user-leaves-a-web-page)和这篇[文章](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)和这篇[文章](http://www.4guysfromrolla.com/webtech/100604-1.shtml)。基础是这样的：

```
var needToConfirm = true;

  window.onbeforeunload = confirmExit;
  function confirmExit()
  {
    if (needToConfirm)
      return "this is required but doesn't actually show";
  } 
```

重置表单可以很容易地用一个按钮来完成

```
<input type="reset"> 
```

# svn - 不使用 SVN 合并指定修订安全吗？

> ID：10640356
> 
> 赞同：0
> 
> 时间：2012-05-17T17:16:46.980
> 
> 标签：svn

和有什么区别

```
cd trunk
svn merge -r<revision where branch was cut>:<revision of trunk> svn://path/to/branch/branchName 
```

和

```
cd trunk
svn merge svn://path/to/branch/branchName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:23:02.810

完全没有。

由于 SVN 1.5 svn 将根据其合并跟踪功能检索修订。因此，如果您不提供修订，它会确定您从哪个修订创建分支，并将从该修订开始直到当前的 HEAD 修订。

注意：如果您发出此命令两次，第二次将不会再次合并，因为每个修订都已被跟踪为合并。

# c++ - C++ 将字符串转换为 typedef 或 istream 重载

> ID：10640358
> 
> 赞同：1
> 
> 时间：2012-05-17T17:16:53.970
> 
> 标签：c++, class, templates, typedef, operator-keyword

我有一个类模板，除其他外，它应该重载 istream，以便它接受用户的输入并将其添加（推送）到一个包含 T 类型元素的向量中。

```
 friend istream &operator>> (istream &in, Set<T> &s)
    {
        int ctr = 0;
        string tmp;
        T val;
        while (true) {
            cout << "\tElement #" << ctr + 1 << ": ";
            getline (in, tmp);
            if (tmp == "\0") break;
            // MISSING CODE HERE: "Convert" tmp into val
            s.add(val);
            ctr = s.size();
        }
        return in;
    } 
```

这适用于`Set<string>`，但我需要找到一种方法使其也适用于任何原始数据类型，`Set<integer>`例如 。

我试着做

```
stringstream(tmp) >> val 
```

但这不适用于`Set<string>`.

我猜输入需要作为字符串读入；那么，如何将输入字符串转换为 T 类型以将其传递给 .add() 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:31:06.503

如果它不是字符串，您可以使用一个`stringstream`对象（从创建）来提取正确的值。请注意，如果您需要的不仅仅是内置类型（例如） ，则`tmp`必须覆盖`operator>>``ostream``int`

`convert()`或者，您可以为遇到的每个函数定义一个函数的重载，`T`以提供从字符串`tmp`到所需类型的正确转换。将根据您的模板参数选择适当的重载（如果存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:34:05.377

您可以使用`boost::lexical_cast`按字典顺序将字符串转换为其他类型。

```
template<class T>
friend istream &operator>> (istream &in, Set<T> &s) {
    int ctr = 0;
    string tmp;
    T val;
    while (true) {
        cout << "\tElement #" << ctr + 1 << ": ";
        getline (in, tmp);
        if (tmp == "\0") break;
        val = boost::lexical_cast<T>(tmp);
        s.add(val);
        ctr = s.size();
    }
    return in;
} 
```

或者，您可以使用`std::istringstream`.

```
std::istringstream sstream(tmp);
sstream >> val; 
```

* * *

请注意，`boost::lexical_cast`如果转换不成功，则会抛出异常，并且`std::istringstream` **不会**（您需要手动检查）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:41:52.610

您可能希望解决代码中的一些问题：

```
getline (in, tmp); 
```

即需要检查返回值：

```
if(!getline (in, tmp))
    // handle end-of-file or read failure
// read okay, tmp contains the read line 
```

下一个：

```
if (tmp == "\0") break; 
```

在文本文件中嵌入零并不常见。可能是这块试图检测文件结束条件，应该通过检查`getline`or`if(in)`语句的返回值来处理。

```
stringstream(tmp) >> val; 
```

这会创建一个临时字符串流并尝试对其进行调用`operator>>`。好吧，有两种`operator>>`for `std::istream`：

*   `std::istream`接受临时（右值）和左值`std::istream`对象的成员函数
*   独立的那些`std::istream`通过引用非常量，不接受 r 值。（在 C++11 中，它也可以接受它作为`std::istream&&`允许 r 值）。

`operator>>`因此，上述语句只能流式传输到具有 in 成员的内置类型`std::istream`。

因此，该语句可以替换为：

```
std::istringstream ss(tmp);
ss >> val; 
```

那将需要再次进行错误处理以检查是否将整个`str`解析为`val`，因此，正如其他人在这里所说的那样，为您进行错误检查更容易使用`boost::lexical_cast<>`：

```
val = boost::lexical_cast<T>(tmp); 
```

如果您不坚持阅读整行，而是阅读空格分隔的标记，则循环可能如下所示：

```
template<class T>
friend std::istream &operator>>(std::istream &in, Set<T> &s) {
    int ctr;
    T val;
    while(in >> val) {
        ctr = s.size();
        std::cout << "\tElement #" << ctr + 1 << ": ";
        s.add(val);
    }
    // end-of-file or parsing failure
    if(!in.eof()) {
        // handle failuer to parse or read error
    }
} 
```

# java - 是否需要刷新 PrintWriter / PrintStream？

> ID：10640360
> 
> 赞同：2
> 
> 时间：2012-05-17T17:16:59.433
> 
> 标签：java, printstream

我想使用 PrintWriter 或 PrintStream 将格式化的字符串写入输出流（我无法控制其创建）。然而，刷新底层的 OutputStream 会对性能造成很大影响。

是否需要刷新 PrintWriter / PrintStream。

如果我需要刷新 PrintStream / PrintWriter；我可以在不刷新底层 OutputStream 的情况下这样做，还是需要创建一个“刷新保护器”OutputStream 来包装底层流？

为了更清楚一点，我想实现

```
 public void writeSomeString(OutputStream foo); 
```

但是对于同一个OutputStream(foo)，这个方法可能会被多次调用。每个调用都必须构造自己的 PrintWriter。我知道这样做很难看，但我无法控制界面或`foo`.

我试图避免每个方法都必须刷新`foo`才能刷新自己的 PrintWriter / PrintStream。

所以我想：

```
public void writeSomeString(OutputStream foo) {
    PrintStream s = new PrintStream(foo);
    s.println("bar");
    // other code
} 
```

**我想完全避免这种方法冲洗`foo`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:13:25.627

PrintWriter 需要在以下情况下刷新：

```
ServerSocket s = new ServerSocket(4444);

Socket incoming = s.accept();

OutputStream output = s.getOutputStream();

PrintWriter pw = new PrintWriter(output,true);

System.out.println(pw.write(new Scanner(System.in).nextLine())); 
```

PrintWriter 构造函数中的第二个参数是flush，它接受布尔数据类型，我们需要刷新数据，因此即使缓冲区未满，它也会在控制台上抛出。

# java - 即使正在释放许可证，信号量类也可以进入死锁吗？

> ID：10640362
> 
> 赞同：2
> 
> 时间：2012-05-17T17:17:02.513
> 
> 标签：java, multithreading, concurrency, deadlock, semaphore

以下使用 Java 的 Semaphore 类编写的并发代码进入了死锁，甚至很棘手，根据控制台输出，许可证正在被释放。

```
package ThreadTraining;

import java.util.concurrent.Semaphore;

public class ThreadTraining {

    public static class Value {

        private static int value = 0;
        private static final Semaphore SEMAPHORE = new Semaphore(1);

        public static synchronized void acquire() throws InterruptedException {
            SEMAPHORE.acquire();
            System.out.println("A thread has aquired a permit!");
        }

        public static synchronized void release() {
            SEMAPHORE.release();
        }

        public static int get() {
            return value;
        }

        public static void add() {
            value++;
        }

        public static void subtract() {
            value--;
        }
    }

    public static class Adder extends Thread {

        public Adder(String name) {
            this.setName(name);
        }

        @Override
        public void run() {
            System.out.println(this.getName() + " has been created.");
            boolean keepRunning = true;
            while (keepRunning) {
                try {
                    Value.acquire();
                    System.out.print(this.getName() + " has aquired Value's permit. --- ");
                    if (Value.get() > 99) {
                        System.out.print(this.getName() + " has finished it's job. --- ");
                        keepRunning = false;
                    } else {
                        System.out.print(this.getName() + " has modified value from " + Value.get() + "  to ");
                        Value.add();
                        System.out.println(Value.get() + ".");
                    }
                } catch (InterruptedException ie) {
                    System.err.println("This thread was interrupted.");
                } finally {
                    System.out.println(this.getName() + " is releasing Value's permit.");
                    Value.release();
                }
            }
        }
    }

    public static void main(String[] args) {
        Thread threads[] = new Thread[3];
        for (int i = 0; i < threads.length; i++) {
            threads[i] = new Adder("[Adder]Thread #" + i);
        }
        for (Thread t : threads) {
            t.start();
        }
    }
} 
```

代码的控制台输出：（这是一次“幸运”的运行，它通常只打印到指定的点）

```
[Adder]Thread #0 has been created.
[Adder]Thread #1 has been created.
[Adder]Thread #2 has been created.
A thread has aquired a permit!
[Adder]Thread #0 has aquired Value's permit. --- [Adder]Thread #0 has modified value from 0  to 1.
[Adder]Thread #0 is releasing Value's permit. /*NOTE: It usually prints only up to this line, hanging after the first permit-release.*/
A thread has aquired a permit!
[Adder]Thread #0 has aquired Value's permit. --- [Adder]Thread #0 has modified value from 1  to 2.
[Adder]Thread #0 is releasing Value's permit.
A thread has aquired a permit!
[Adder]Thread #0 has aquired Value's permit. --- [Adder]Thread #0 has modified value from 2  to 3.
[Adder]Thread #0 is releasing Value's permit.
A thread has aquired a permit!
[Adder]Thread #0 has aquired Value's permit. --- [Adder]Thread #0 has modified value from 3  to 4.
[Adder]Thread #0 is releasing Value's permit.
A thread has aquired a permit!
[Adder]Thread #0 has aquired Value's permit. --- [Adder]Thread #0 has modified value from 4  to 5.
[Adder]Thread #0 is releasing Value's permit.
A thread has aquired a permit!
[Adder]Thread #0 has aquired Value's permit. --- [Adder]Thread #0 has modified value from 5  to 6.
[Adder]Thread #0 is releasing Value's permit.
A thread has aquired a permit!
[Adder]Thread #0 has aquired Value's permit. --- [Adder]Thread #0 has modified value from 6  to 7.
[Adder]Thread #0 is releasing Value's permit.
A thread has aquired a permit!
[Adder]Thread #0 has aquired Value's permit. --- [Adder]Thread #0 has modified value from 7  to 8.
[Adder]Thread #0 is releasing Value's permit. 
```

背后的原因是什么？并且，如果可能的话，如何解决它？

* * *

附加信息：

这个问题是[我之前的并发问题](https://stackoverflow.com/questions/10606063/in-java-can-the-use-of-synchronized-methods-be-unreliable)的“延续” 。

新代码非常基于[这个信号量教程](http://tutorials.jenkov.com/java-concurrency/semaphores.html)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:25:09.080

问题是您自己的方法的同步。`Value.acquire`和都是`Value.release`同步的，所以一个线程进入你的`acquire`-method 将阻止另一个线程调用`release`，因为`release`调用将等待`Value`-class 的监视器被释放，而内部的一个线程`acquire`将等待内部信号量被获取。从您的方法中删除`synchronized`-keywords，您将摆脱死锁问题。相反，您可能打算同步您的`get`-、`add`- 和 -`subtract`方法。

# linux - 等价于 exec 3<>/dev/tcp/anyaddress.com/80 in ash

> ID：10640369
> 
> 赞同：2
> 
> 时间：2012-05-17T17:17:35.267
> 
> 标签：linux, bash, sockets, ash

在 bash 中，以下命令打开一个套接字

```
exec 3<>/dev/tcp/192.168.1.200/8080 
```

在灰烬中，此命令不起作用。灰烬是否有与此命令等效的命令？

在ash中的命令输出错误之后：

```
-ash: can't create /dev/tcp/192.168.1.200/8080: nonexistent directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:21:20.773

不，那里没有。标准 POSIX bourne shell 不提供此功能。

您可以使用[socat](http://www.dest-unreach.org/socat/)或[nc](http://linux.die.net/man/1/nc)完成您需要的工作。

顺便说一句，这个 bash 功能很奇怪，因为它假装有一个名为`/dev/tcp`但实际上并不存在的目录。

# qt - 如何在 QCommandLinkBut ton 中显示我自己的设计按钮

> ID：10640372
> 
> 赞同：1
> 
> 时间：2012-05-17T17:17:57.297
> 
> 标签：qt

我正在尝试使用这种按钮制作 UI。我为我的按钮做了一个设计，我想让我所有的按钮看起来像那样。目前，我发现这样做的唯一方法是将我的设计加载到按钮的图标中，并将其大小设置为与按钮相同。它可以工作...但并不完美...我的图像不在按钮的中心...如您所见

![m 按钮示例](../Images/05a37a05360b5ee6c2d5f088a7b8c6cf.png)

蓝色是我自己设计的，向上看的灰色是真正的按钮。所以我的问题是我不能将我的设计集中在按钮上。我试图寻找选项，但我没有找到任何选项。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:21:40.050

你应该看看这种类型的[Qt Stylesheets](http://qt-project.org/doc/qt-4.8/stylesheet.html)。查看[示例](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html)，它们在那里显示简单的按钮样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:27:20.873

当然，您可以使用样式表。尝试使用`QToolButton`而不是`QPushButton`. `QToolButton`有几个选项可以使按钮更具视觉吸引力，例如：使用 QToolButton 可以更轻松地完成您所说的事情。它具有一些内置功能，例如弹出模式和工具按钮样式[完成您的任务]，至少可以说是现成的。

# macports - 为什么macports“--set ipython ipython32”会失败？

> ID：10640374
> 
> 赞同：1
> 
> 时间：2012-05-17T17:18:00.877
> 
> 标签：macports, ipython

当我运行`sudo port select --set ipython ipython32`- 在成功安装 python32 和 ipython32 之后 - 我会收到以下错误吗？

```
Selecting 'ipython32' for 'ipython' failed: could not create new link \
"/opt/local/share/man/man1/ipcluster.1.gz": \
target "/opt/local/Library/Frameworks/Python.framework/Versions/3.2\
/share/man/man1/ipcluster.1.gz" doesn't exist 
```

好的，所以错误描述得很清楚......问题是：如何解决它？doc 文件不应该是 (successfully installed_ipython32 包的一部分吗？事情似乎有效....或者我应该说：在使用 ipython 时，我还没有遇到此失败消息的后果*。*

# c# - 如何在一条线上做到这一点？

> ID：10640380
> 
> 赞同：3
> 
> 时间：2012-05-17T17:18:47.797
> 
> 标签：c#

我正在考虑整理一下，但我对 C# 有点陌生

```
ResponseList responsesList = new ResponseList();
PagedResponseList pagedResponsesList = new PagedResponseList();
responsesList = responseService.ListSurveyResponses(1000);
pagedResponsesList = responsesList.ResultData; 
```

这可能是一个简单的问题，但是单行所需的语法让我无法理解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T17:20:55.277

首先，您实际上并不需要`new`前两行中的两个语句，因为这些`new`实例将被您在最后两行中分配的任何内容覆盖。

如果您是 C# 新手，我建议您至少坚持*两行*，以便您至少了解步骤中发生的情况。特别是最后两行：

```
ResponseList responsesList = responseService.ListSurveyResponses(1000);
PagedResponseList pagedResponsesList = responsesList.ResultData; 
```

然后，如果您以后不会`responsesList`在代码中使用，您可以将这两行压缩为以下行，*并且*您认为它很容易理解（基本上，只需将`.ResultData`属性链接到后面`responseService.ListSurveyResponses()`）：

```
PagedResponseList pagedResponsesList = responseService.ListSurveyResponses(1000).ResultData; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T17:20:28.380

```
var pagedResponsesList = responseService.ListSurveyResponses(1000).ResultData; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:24:15.070

正如其他人所建议的那样，您可以将它们全部放在一行中，如下所示：

```
var pagedResponsesList = responseService.ListSurveyResponses(1000).ResultData; 
```

但我认为，鉴于您正在调用另一个服务，您真的很想进行一些异常处理，在引用之前检查您的结果是否为 null`.ResultData`等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:21:48.170

```
PagedResponseList pagedResponsesList=responseService.ListSurveyResponses(1000).ResultData 
```

# c - 在 C/C++ 中只获取一个简单的数字

> ID：10640381
> 
> 赞同：3
> 
> 时间：2012-05-17T17:18:53.097
> 
> 标签：c, stdio

我有这样的功能`stoi`：

```
static int *stoi(const char *c) {
    int *r = new int[2];
    r[1] = sscanf(c, "%d", &r[0]);
    return r;
} 
```

例如，当我给出`c = "a5"`时，它不起作用。

当我给`c = "543336535"`时，它起作用了。

但是当我给`c = "45sdfff-sdbsdf esg5sq4f"`它时，它会返回`r[0] = 45`，我不希望那样，因为`45`...之后有一些非数字字符

我只希望我的函数读取纯数字字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T17:23:13.930

为了对您已有的代码进行最小的更改，您可以使用以下`%n`功能`sscanf`：

```
int chars_read;
r[1] = sscanf(c, "%d%n", &r[0], &chars_read); 
```

如果`chars_read`小于字符串的长度，`sscanf`则不消耗所有字符，因此字符串不完全由单个整数组成。

[Linux 文档`scanf`](http://linux.die.net/man/3/scanf)指出，[技术勘误 1](http://www.open-std.org/jtc1/sc22/wg14/www/docs/tc1.htm)引入的附加示例与标准相矛盾，但与此同时，标准已更新以解决冲突。`sscanf`面对您可能遇到的不确定的实现行为，您可以如何解释结果：

```
switch (r[1]) {
  case EOF: // empty string
    break;
  case 0: // doesn't start with numeric characters
    break;
  case 1: // starts with number; sscanf follows standards
  case 2: // starts with number; sscanf follows TC1
    if (c[chars_read] == '\0')
      r[1] = 1; // we read entire string
    else
      r[1] = 0; // didn't read entire string; pretend we read nothing
    break;
  default: // shouldn't happen
    assert(FALSE);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T17:24:06.107

如果您使用的是 C，您可以使用 C`strtol`来执行您可能称之为暂定转换的操作。它会给你一个指向它可以转换的数据结尾的指针。如果那不是字符串的结尾，那么在它可以转换的任何内容之后至少有一些垃圾。

如果您使用 C++，您可能想要使用 Boost `lexical_cast`，如果整个输入转换为目标类型，它将成功，但如果其中任何一个没有转换，则抛出异常。

# mysql - MySQL / 如何将几行合并为一

> ID：10640383
> 
> 赞同：0
> 
> 时间：2012-05-17T17:18:53.857
> 
> 标签：mysql

表1

```
+----+-----+
| 编号 | 关键 |
+----+-----+
| 1 | 一个 |
| 2 | 乙 |
| 3 | c |
+----+-----+

```

表2

```
+----+----------+--------+
| 编号 | tbl1_id | 价值 |
+----+----------+--------+
| 1 | 1 | d |
| 2 | 2 | 电子|
| 3 | 2 | f |
| 4 | 3 | 克 |
| 5 | 3 | h |
| 6 | 3 | 我 |
+----+----------+--------+

```

我怎样才能得到这个结果？

```
+----+--------+------+------+------+
| 编号 | 关键 | val0 | val1 | val2 |
+----+--------+------+------+------+
| 1 | 一个 | d | 空 | 空 |
| 2 | 乙 | 电子| f | 空 |
| 3 | c | 克 | h | 我 |
+----+--------+------+------+------+

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:25:26.317

```
SELECT a.id, a.key as title, b.value as val0, c.value as val1, d.value as val2
FROM tbl1 as a LEFT JOIN tbl2 as b ON a.id = b.tbl1_id 
               LEFT JOIN tbl2 as c ON a.id = c.tbl1_id 
               LEFT JOIN tbl2 as d ON a.id = d.tbl1_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:23:21.937

使用表和列别名：

```
SELECT a.id, a.title, t0.value val0, t1.value val1, t2.value val2
FROM tbl1 a
LEFT JOIN tbl2 t0
ON a.id = t0.tbl1_id
LEFT JOIN tbl2 t1
ON a.id = t1.tbl1_id
LEFT JOIN tbl2 t2
ON a.id = t2.tbl1_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T16:41:15.870

请试试这个，很好检查，

```
select distinct(t1.id) as id, t1.key as keyValue, 
(select t2.value from tbl2 t2 where t1.id=t2.tbl1_id and t2.id=(select min(t3.id)
from tbl2 t3 where t3.tbl1_id=t1.id) ) as val0,
(select t2.value from tbl2 t2 where t1.id=t2.tbl1_id and
t2.id=(select t3.id from tbl2 t3 where t3.tbl1_id=t1.id order by t3.id limit 1, 1) ) as val1,
(select t2.value from tbl2 t2 where t1.id=t2.tbl1_id and
t2.id=(select t3.id from tbl2 t3 where t3.tbl1_id=t1.id order by t3.id limit 2, 1) ) as val2
from tbl1 t1 
```

![在此处输入图像描述](../Images/c04e4cb17e6a499a562b53cc783958ff.png)

# mysql - MySQL为每个不同的列b从a列中选择所有不同的值，其中count distinct a >1

> ID：10640386
> 
> 赞同：2
> 
> 时间：2012-05-17T17:18:58.620
> 
> 标签：mysql, join, subquery

我有一张表用于存储半径服务器的所有访问请求，如下所示：

```
describe radius.loginattempts;
+------------------+------------------+------+-----+---------+----------------+
| Field            | Type             | Null | Key | Default | Extra          |
+------------------+------------------+------+-----+---------+----------------+
| loginattempt_key | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| log_date         | int(10) unsigned | NO   |     | NULL    |                |
| result           | tinyint(1)       | YES  |     | NULL    |                |
| username         | text             | YES  |     | NULL    |                |
| mac              | text             | YES  |     | NULL    |                |
+------------------+------------------+------+-----+---------+----------------+ 
```

每次有人尝试登录时，无论它是否有效，都会在此表中创建一个日志条目。

我想要做的是获取有两个或多个用户尝试登录的所有设备的列表，以及每个设备的所有不同用户名。

所以，如果我有一些看起来像这样的数据：

```
select * from loginattempts limit 8;
+------------------+------------+--------+----------+-------------------+
| loginattempt_key | log_date   | result | username | mac               |
+------------------+------------+--------+----------+-------------------+
|                1 | 1337035334 |      1 | kclark   | 11:11:11:11:11:11 |
|                2 | 1337035620 |      1 | kclark   | 22:22:22:22:22:22 |
|                3 | 1337035681 |      0 | guest    | 33:33:33:33:33:33 |
|                4 | 1337035740 |      1 | guest    | 22:22:22:22:22:22 |
|                5 | 1337037782 |      1 | rfogarty | 44:44:44:44:44:44 |
|                6 | 1337037789 |      1 | jsmith   | 44:44:44:44:44:44 |
|                7 | 1337037790 |      1 | jsmith   | 44:44:44:44:44:44 |
|                8 | 1337037791 |      1 | jsmith   | 44:44:44:44:44:44 |
+------------------+------------+--------+----------+-------------------+ 
```

我想要一个返回如下内容的魔术查询：

```
+-------------------+----------+
| mac               | username |
+-------------------+----------+
| 22:22:22:22:22:22 | kclark   |
| 22:22:22:22:22:22 | guest    |
| 44:44:44:44:44:44 | rfogarty |
| 44:44:44:44:44:44 | jsmith   |
+-------------------+----------+ 
```

这最终将在 PHP 中，我可以通过两个查询和一个 for 循环轻松完成，但作为一个思想实验，我一直在尝试考虑如何使用单个查询和一些花哨的连接（甚至是子查询）来完成）但就是无法绕开我的头......

```
mysql -V
mysql  Ver 14.14 Distrib 5.1.52, for unknown-linux-gnu (x86_64) using readline 5.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:28:02.340

好的，我想你的意思是...... [http://sqlfiddle.com/#!3/b6100/6](http://sqlfiddle.com/#!3/b6100/6)

给定

```
create table loginattempts  
(
  login_key int,
  mac varchar(12) null,
  username varchar(12) null
)

insert into loginattempts values (1, 111, 'peter')
insert into loginattempts values (2, 111, 'bob')
insert into loginattempts values (3, 222, 'geoff')
insert into loginattempts values (4, 222, 'lisa')
insert into loginattempts values (1, 333, 'peter') 
```

你需要这个查询

```
 select mac, username
   from loginattempts
   where
    mac in
    (
      select mac
      from loginattempts
      group by mac
      having count(*) > 1
     ) 
```

给你

```
MAC USERNAME
111 peter
111 bob
222 geoff
222 lisa 
```

# ios5 - 将 Touch Up Inside 事件连接到文件的所有者

> ID：10640392
> 
> 赞同：1
> 
> 时间：2012-05-17T17:19:15.747
> 
> 标签：ios5

我正在阅读 Apress 的 iOS5 开发初期的多视图应用程序章节，并遇到了从其中一个视图上的按钮连接到文件所有者的问题。程序的一般前提是使用一个根控制器 BIDSwitchViewController 在 BIDBlueViewController 和 BIDYellowViewController 两个内容视图之间切换。每个内容视图都有一个按钮，将 Touch Up Inside 事件连接到文件的所有者。我在 BIDBlueViewController 中建立连接没有问题，但是当我尝试在 BIDYellowViewController 中建立连接时，我无法在 Touch Up Inside 事件和文件所有者图标之间建立连接。

书中的说明

> 将一个圆形矩形按钮从库中拖到视图中，使用指南将按钮在视图中垂直和水平居中。双击该按钮，并将其标题更改为 Press Me。接下来，在按钮仍处于选中状态的情况下，切换到连接检查器，从 Touch Up Inside 事件拖动到文件所有者图标，然后连接到 blueButtonPressed 操作方法

我可以毫无问题地做到这一点，但是当我尝试为黄色视图完成此说明时

> 将一个圆形矩形按钮从库中拖到视图中，使用指南将按钮在视图中垂直和水平居中。双击该按钮，并将其标题更改为 Press Me。接下来，在按钮仍处于选中状态的情况下，切换到连接检查器，从 Touch Up Inside 事件拖动到 File's Owner 图标，然后连接到 yellowButtonPressed 操作方法

文件所有者图标不允许我建立连接，因为我从 Touch Up Inside 事件拖动到文件所有者图标文件所有者从不突出显示并且我无法建立连接。

这是我的代码

根控制器接口

```
//
//  BIDSwitchViewController.h
//  ViewSwitcher
//
//  

#import <UIKit/UIKit.h>

@class BIDYellowViewController;
@class BIDBlueViewController;

@interface BIDSwitchViewController : UIViewController

@property (strong, nonatomic) BIDYellowViewController *yellowViewController;
@property (strong, nonatomic) BIDBlueViewController *blueViewController;

- (IBAction)switchViews:(id)sender;

@end 
```

根控制器实现

```
//
//  BIDSwitchViewController.m
//  ViewSwitcher
//

#import "BIDSwitchViewController.h"
#import "BIDYellowViewController.h"
#import "BIDBlueViewController.h"

@implementation BIDSwitchViewController
@synthesize yellowViewController;
@synthesize blueViewController;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    self.blueViewController = [[BIDBlueViewController alloc]
                               initWithNibName:@"BlueView" bundle:nil];
    [self.view insertSubview:self.blueViewController.view atIndex:0];
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)switchViews:(id)sender{
    if (self.yellowViewController.view.superview == nil){
        if (self.yellowViewController == nil) {
        self.yellowViewController = 
    [[BIDYellowViewController alloc] initWithNibName: @"YellowView" 
                                              bundle:nil];
    }
    [blueViewController.view removeFromSuperview];
    [self.view insertSubview:self.yellowViewController.view atIndex:0];
} else {
    if (self.blueViewController == nil){
        self.blueViewController = [[BIDBlueViewController alloc] initWithNibName:@"BlueView" 
                                                                          bundle:nil];
    }
    [yellowViewController.view removeFromSuperview];
    [self.view insertSubview:self.blueViewController.view atIndex: 0];
    }
}

- (void) didReceiveMemoryWarning {
    // Release the view if it doesn't have a super view
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc, that aren't in use
    if (self.blueViewController.view.superview == nil){
        self.blueViewController = nil;
    } else {
        self.yellowViewController = nil;
    }
}

@end 
```

蓝色内容视图控制器界面

```
//
//  BIDSwitchViewController.h
//  ViewSwitcher
//

#import <UIKit/UIKit.h>

@class BIDYellowViewController;
@class BIDBlueViewController;

@interface BIDSwitchViewController : UIViewController

@property (strong, nonatomic) BIDYellowViewController *yellowViewController;
@property (strong, nonatomic) BIDBlueViewController *blueViewController;

- (IBAction)switchViews:(id)sender;

@end 
```

蓝色内容视图控制器实现

```
//
//  BIDBlueViewController.m
//  ViewSwitcher
//
//  

#import "BIDBlueViewController.h"

@interface BIDBlueViewController ()

@end

@implementation BIDBlueViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

黄色内容视图控制器界面

```
//
//  BIDYellowViewController.h
//  ViewSwitcher
//

#import <UIKit/UIKit.h>

@interface BIDYellowViewController : UIViewController

- (IBAction)yellowButtonPressed;

@end 
```

黄色内容视图控制器实现

```
//
//  BIDYellowViewController.m
//  ViewSwitcher
//
//  

#import "BIDYellowViewController.h"

@interface BIDYellowViewController ()

@end

@implementation BIDYellowViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

# java - Java displaytag - 隐藏特定记录的复选框

> ID：10640396
> 
> 赞同：0
> 
> 时间：2012-05-17T17:19:26.180
> 
> 标签：java, jsp, displaytag

我在 JSP 中使用[displaytag](http://www.displaytag.org/)来显示记录列表。第一列包含所有记录的复选框。但是，我不希望为所有记录显示复选框。

我尝试了以下方法，但它继续显示所有记录的复选框。有任何想法吗？

```
<display:table id="registered_learners" name="sessionScope.enrolledLearners" decorator="checkboxDecorator" form="displ"
  excludedParams="_chk" pagesize="999">
  <%
  String val = ((LearnerSessionVO) pageContext.getAttribute("registered_learners")).getEmailAddress();
  if (val != null && val.trim() != ""){
  %>
  <display:column style="text-align:center;"  property="checkbox" title="Select for Email" href="javascript:changeSelection('${learners.learnerId}')"/>
  <% } else { %>
  <display:column style="text-align:center;"  title="Select for Email" />
  <% } %>
  <display:column property="lastName" sortable="true"
        title="Last Name" maxLength="25" ></display:column>
 <display:column property="firstName" sortable="true"
        title="First Name"></display:column>
</display:table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:25:53.343

我的错。只需使用 value 属性。例如，使用上面的 else 语句： `<display:column style="text-align:center;" title="Select for Email" value="" />`

# excel - 运行时错误“1004”：对象“_Global”的方法“相交”失败

> ID：10640397
> 
> 赞同：3
> 
> 时间：2012-05-17T17:19:30.550
> 
> 标签：excel, vba

如果我不在脚本要运行的同一页面上，我会收到运行时错误 1004，我想知道为什么...

这是代码。

```
Option Explicit

Sub PO_Tracking()

Dim wsPOD As Worksheet
Dim wsPOT As Worksheet
Dim wsPOA As Worksheet
Dim cel As Range
Dim lastrow As Long, i As Long, Er As Long

Set wsPOD = Sheets("PO Data")
Set wsPOT = Sheets("PO Tracking")
Set wsPOA = Sheets("PO Archive")

With Application
    .ScreenUpdating = False
    .DisplayAlerts = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
End With

With wsPOD
    'first bring columns F:G up to match their line
    For Each cel In Intersect(.UsedRange, .UsedRange.Offset(5), .Columns(6))

        If cel = vbNullString And cel.Offset(, -2) <> vbNullString Then
            .Range(cel.Offset(1), cel.Offset(1, 1)).Copy cel
            cel.Offset(1).EntireRow.Delete
        End If

    Next

    'now fil columns A:D to match PO Date and PO#
    For Each cel In Intersect(.UsedRange, .UsedRange.Offset(5), .Columns(1))

        If cel = vbNullString And cel.Offset(, 5) <> vbNullString Then
            .Range(cel.Offset(-1), cel.Offset(-1, 3)).Copy cel
        End If
    Next

'Blow away rows that are useless
    lastrow = wsPOD.Range("A6").End(xlDown).Row
    wsPOD.Range("M5:P5").Copy wsPOD.Range("M6:P" & lastrow)
    Calculate

    With Intersect(wsPOD.UsedRange, ActiveSheet.Columns("N"))
        .AutoFilter 1, "<>Different"
        .SpecialCells(xlCellTypeVisible).EntireRow.Delete
    End With

    With Intersect(wsPOD.UsedRange, ActiveSheet.Columns("P"))
        .AutoFilter 1, "<>Full"
        .SpecialCells(xlCellTypeVisible).EntireRow.Delete
    End With
    wsPOD.UsedRange.Copy Sheets.Add.Range("A1")

'Final Adjustments before transfering over to new sheet.
    With ActiveSheet
        .AutoFilterMode = False
        Intersect(.UsedRange, .Columns("A")).Cut .Range("Q1")
        Intersect(.UsedRange, .Columns("D")).Cut .Range("R1")
        Intersect(.UsedRange, .Columns("C")).Cut .Range("S1")
        Intersect(.UsedRange, .Columns("B")).Cut .Range("T1")
        Intersect(.UsedRange, .Columns("G")).Cut .Range("U1")
        Intersect(.UsedRange, .Columns("F")).Cut .Range("V1")
        Intersect(.UsedRange, .Range("Q:V")).Copy wsPOT.Cells(Rows.Count, "B").End(xlUp).Offset(1)
        .Delete
    End With

    lastrow = wsPOD.Cells(Rows.Count, "B").End(xlUp).Row
    wsPOT.Range("R1:X1").Copy
    wsPOT.Range("B3:H" & lastrow).PasteSpecial xlPasteFormats
    wsPOT.Range("N2:O2").Copy wsPOT.Range("N3:O" & lastrow)
    wsPOT.Range("P1:Q1").Copy wsPOT.Range("I3:J" & lastrow)
    wsPOT.Range("K3:K" & lastrow).Borders.Weight = xlThin
End With

Application.CutCopyMode = False

End Sub 
```

错误在这里：

```
**With Intersect(wsPOD.UsedRange, ActiveSheet.Columns("N"))**
    .AutoFilter 1, "<>Different"
    .SpecialCells(xlCellTypeVisible).EntireRow.Delete
End With 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T17:26:46.290

你不能在两张纸上有一个范围的交集，所以如果 ActiveSheet 不是 wsPOD，那么

`With Intersect(wsPOD.UsedRange, ActiveSheet.Columns("N"))`

根据定义必须失败。

编辑...并查看@SiddharthRout 的修复评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-08T11:20:41.670

有关**错误原因**，请参阅 Doug Glancy 的回答。

另外，对于**如何避免它**，使用类似的东西

```
Dim rng1 As Range, rng2 As Range
Set rng1 = wsPOD.UsedRange
Set rng2 = ActiveSheet.Columns("N")
If (rng1.Parent.Name = rng2.Parent.Name) Then
    Dim ints As Range
    Set ints = Intersect(rng1, rng2)
    If (Not (ints Is Nothing)) Then
        With ints
            ' Do your job
        End With
    End If
End If 
```

`Intersect`在使用离子之前验证离子通常是一种很好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-25T08:20:59.967

1.  为了避免错误，必须像这样检查工作表( )**的相等性**`myRange.Parent`：

    ```
    if rng1.Parent is rng2.Parent then if Not Intersect( rng1, rng2 ) Is Nothing then _
        '... your conditional code here ... 
    ```

    *   提示：这里要注意的重要一点是，您不能将这两个条件连接起来，`... And ...`因为 VBA 评估所有条件并且在评估第一个条件后不会停止，即使它是`False`：-/
2.  **或确保范围的工作表相同**（例如`ws1`），这意味着明确指定/创建/相交您的`Range`对象，类似于此）：

    ```
    if Not Intersect( ws1.Range("A1:A2"), ws1.Range("A2:B2") ) Is Nothing then _
       '... your conditional code here ... 
    ```

# c++ - g++ 编译单独预处理的文件会根据架构产生错误

> ID：10640398
> 
> 赞同：1
> 
> 时间：2012-05-17T17:19:37.240
> 
> 标签：c++, architecture, compiler-errors, g++, standard-library

我在 x64_86 GNU linux 架构上使用 g++ 版本 4.1.2。代码库非常庞大，我对项目中使用的 makefile 没有足够的了解。代码按原样编译得很好。

出于某种调试目的，我需要`g++ -E`单独预处理 () 几个源文件，然后重新编译它。我正在使用`-I`. 理想情况下，编译应该没问题。

但是我在标准标题中几乎没有差异，例如：

1.  `typedef unsigned long size_t;`导致`operator new()` 编译器生成的声明错误（如果我更改为`unsigned int` 手动，则此错误消失）
2.  在像这样的库函数`unsigned long numeric_limits<>::max()`中，编译器会抱怨大数字，例如`922...807L`；它生成编译器错误为`integer constant is too large for long type`
3.  不匹配的声明`__errorno_location()`给出编译器错误

我很难找出问题所在。为什么当我在未更改的文件上进行编译时编译会很好，为什么当我`g++ -I <> -E`在单个文件上提供选项时标准标题开始乱写？

（请注意，我们编写的代码没有问题，它只是来自标准库方面。我尝试将`stddef.h`其定位`unsigned int`为 typedef，但这只是解决了第一个问题。）

任何解决此错误的想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:54:30.483

不要单独预处理和编译，或者如果您必须使用一致的编译器选项和一致的环境。

听起来您是在 32 位机器上运行预处理器（或使用该`-m32`选项），然后在 64 位机器上编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:04:47.423

编译预处理器的输出时，请确保使用`-fpreprocessed`编译器选项，以便预处理器不会再次运行。

如果您不传入该选项，则某些生成看起来像宏的标识符的构造可能会再次扩展为不应扩展的内容。我很难想出一个显示不同的案例（我相信我可以，但这需要一些令人费解的东西并且会非常做作）。但是，实现标头可能会使用一些可能对此选项敏感的神秘宏技术。

# android - 在 Achartengine 中隐藏/显示系列

> ID：10640405
> 
> 赞同：1
> 
> 时间：2012-05-17T17:20:10.450
> 
> 标签：android, achartengine

我在折线图中有一个包含 10 个系列的数据集。

当用户单击一个按钮时，我需要隐藏一个系列，并在用户再次单击时显示它。

使用 Achartengine 可以做到这一点吗？

谢谢。

代码示例：

```
XYSeriesRenderer r01 = new XYSeriesRenderer(); 
r01.setColor(Color.YELLOW); 
r01.setPointStyle(PointStyle.CIRCLE); 
r01.setFillBelowLine(true);
r01.setFillBelowLineColor(Color.YELLOW);
r01.setFillPoints(true);
r01.setLineWidth(4);
mRenderer.addSeriesRenderer(r01); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:26:24.077

一种简单的方法是您可以将渲染器系列颜色设置为“Color.TRANSPARENT”，这是一种“伪”隐藏。但是，如果您有一些极端数字，您可能需要调整比例。

一种更复杂的方法是使用 removeSeries() 删除所有当前系列并再次添加必要的系列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:33:14.147

当您想要隐藏它并且想要显示它时，只需删除该系列及其渲染器，将其添加回来并且不要再次忘记渲染器。在每次这样的操作之后，您可能必须在视图上调用 repaint()。

# asp.net-mvc - MVC 动作过滤器 - 是什么导致控制器代码不执行？

> ID：10640409
> 
> 赞同：1
> 
> 时间：2012-05-17T17:20:30.880
> 
> 标签：asp.net-mvc, asp.net-mvc-3, action-filter

如果我定义一个`IActionFilter`像这样实现的动作过滤器：

```
public class FooAttribute : FilterAttribute, IActionFilter
{
    public void OnActionExecuted(ActionExecutedContext filterContext)
    { }

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.Result = new ContentResult 
        { 
            Content = "Test", 
            ContentEncoding = Encoding.UTF8, 
            ContentType = "text" 
        };
    }
} 
```

并将其应用于以下操作方法：

```
[Foo]
public ActionResult Index()
{
    return View();
} 
```

当我这样做时，索引操作代码不会运行，OnResultExecuted 方法也不会运行。这是因为我在方法中设置了`Result`属性吗？`OnActionExecuting`是否还有其他原因会导致正常流程中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:11:24.863

我认为它只是具有这种效果的 Result 属性。请参见此处： http: [//books.google.be/books ?id=gzfFQrs_qQAC&lpg=PA442&ots=EXCefpt5-O&dq=iactionfilter%20onactionexecuting&pg=PA442#v=onepage&q=iactionfilter% 20onactionexecuting&f=false](http://books.google.be/books?id=gzfFQrs_qQAC&lpg=PA442&ots=EXCefpt5-O&dq=iactionfilter%20onactionexecuting&pg=PA442#v=onepage&q=iactionfilter%20onactionexecuting&f=false)

用户可以通过将 Result 设置为非空值来取消操作

# jquery - jQueryUI Sortable - 使两个可排序同时移动

> ID：10640413
> 
> 赞同：4
> 
> 时间：2012-05-17T17:20:38.107
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在使用来自 Google 的 CDN 的 jQuery 1.7 和 jQuery UI 1.8（所以我有最新版本）。

我的页面上有两个元素，一个标题导航和一个内容区域，其中包含对应于每个标题列表项的容器。目前，我将 Sortable 附加到两者，允许我重新排列导航元素和内容容器（单独）的视觉顺序。我试图实现的行为是，当我拖动导航元素时，内容容器会随之移动，当我将导航元素放在列表中的新位置时，内容容器会粘在内容中的新位置区域也是如此。我正在处理的网站是一个 Intranet 页面，所以我无法提供链接，但我在下面提供了一个图表：

```
Navigation:
NavOne...NavTwo...NavThree
Content:
ContentOne...ContentTwo...ContentThree 
```

在 NavOne 和 NavTwo 之间拖动 NavThree 后，整个排列应该是这样的：

```
Navigation:
NavOne...NavThree...NavTwo
Content:
ContentOne...ContentThree...ContentTwo 
```

有没有一种简单的方法可以链接两个 Sortables，以便它们以这种方式运行？它并不真的**必须**是平滑的或“活的”（尽管如果可以的话，我真的很喜欢它）。在第一个列表中的重新排序完成（删除）之前，我可以不刷新第二个可排序列表。

我已经在 jQuery UI 论坛上问过这个问题，并等待了一周的回复：[[LINK]](http://forum.jquery.com/topic/jqueryui-sortable-items-make-two-sortables-move-simultaneously)

这是我在将其移至实际项目之前对其进行测试的骨架示例：

```
<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<style>
/* This is my CSS */
/* Basic reset -- outline for debugging */
* {padding: 0px; margin: 0px; outline: 1px solid rgba(0,0,0,0.1);}
html {width: 100%; height: 100%;}
body {width: 100%; height: 100%;}
/* Main styles */
.containerDiv {
  overflow-x: scroll;
  overflow-y: hidden;
  width: 800px;
  height: 600px;
  white-space: nowrap;
  float: left;
}
.itemDiv {
  width: 200px;
  height: 500px;
  display: inline-block;
}
.navBar ul, .navBar li {
  display: inline;
}
</style>
</head>
<body>
<!-- This is my HTML -->
<div class="navBar">
  <ul>
    <li id="nav1">Navigation 1</li>
    <li id="nav2">Navigation 2</li>
    <li id="nav3">Navigation 3</li>
  </ul>
</div>
<div class="containerDiv">
  <div class="itemDiv" id="item1">Item 1</div>
  <div class="itemDiv" id="item2">Item 2</div>
  <div class="itemDiv" id="item3">Item 3</div>
</div>
</body>
<script>
/* This is my JavaScript */
// Make containerDiv children sortable on X-axis
$(".containerDiv").sortable({
  axis: "x"
});
// Make nav children sortable on x-axis
$(".navBar").sortable({
  axis: "x",
  items: "li"
});
// Bind sorting of each (.navBar li) to its corresponding (.containerDiv .itemDiv):
$(".navBar li").bind("mouseup", function(event,ui){
// If I use "sortupdate" I get little to no response. If I use "mouseup",
// I can at least get an alert to return the value of thisId.
// Note: I am sad that console.log is blocked in Firefox,
// because its DOM inspector is better than Chrome's
  // the (.navBar li) have ids of "nav1, nav2" and so on,
  // and the (.containerDiv .itemDiv) have corresponding ids of "item1, item2"
  // which is my way of attempting to make it easier to link them.
  // This line is my attempt to target the (.containerDiv .itemDiv) which directly
  // corresponds to the (.navBar li) which is currently being sorted:
  var tempId = "#" + $(this).attr('id').replace("nav","item");
  // When this (.navBar li) is updated after a sort drag,
  // trigger the "sortupdate" event on the corresponding (.containerDiv .itemDiv):
  $(tempId).trigger("sortupdate");
});
</script>
</html> 
```

在那一周，我尝试了许多不同的可能解决方案，但没有一个能达到我想要的效果。我觉得这应该相对简单，但是在一周的工作中（断断续续地），我没有得到任何有用的地方。

在寻找一些见解时，我已经阅读了以下相关主题：

*   [同时拖动多个列表项](https://stackoverflow.com/questions/3104961/dragging-multiple-list-items-simultaneously)
*   [JQuery Draggable + Sortable：如何判断项目是否实际添加到我的可排序列表中？](https://stackoverflow.com/questions/3257925/jquery-draggable-sortable-how-to-tell-if-item-was-actually-added-to-my-sortab)
*   [使用 jQuery UI 同时对多个项目进行排序](https://stackoverflow.com/questions/1094156/sorting-multiple-items-at-the-same-time-using-jquery-ui)
*   [jQuery UI 可排序：多项目选择](https://stackoverflow.com/questions/1718851/jquery-ui-sortable-multi-item-select)
*   [是否可以将两个 jquery.ui 可拖动链接在一起？](https://stackoverflow.com/questions/1997454/is-it-possible-to-link-two-jquery-ui-draggables-together)

我认为，如果一切都失败了，我应该至少可以序列化可排序的，将其 ajax 到服务器，然后根据序列化数据更新第二个列表，但我想将其保留在本地浏览器上减少对服务器的调用（直到用户选择将新安排保存到他们的帐户）。

那么，StackOverflow ......这是我正在努力完成的合理/可实现的任务，还是我只是在这里用头撞砖？我应该寻找不同的方法吗？如果可能，我想避免修改 Sortable 插件，但如果必须，我会这样做。

我以前从未使用过 jsFiddle，但我意识到它可能会有所帮助，所以这里是：http: [//jsfiddle.net/34u7n/1/](http://jsfiddle.net/34u7n/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-08T14:16:35.330

AFAIK 没有可用于 jQuery UI Sortable 的内置方法或模块，因此我编写了自己的 jQuery 代码来模拟此类功能。

仅当您要基于一个主列表同步多个可排序列表并且所有列表具有相同数量的项目时，此解决方案才有效。也许它也可以使它以两种方式同步/移动，但我没有尝试过。

```
<ul class="MasterList">
    <li>one</li>
    <li>two</li>
    <li>three</li>
</ul>

<ul class="SecondList">
    <li>one</li>
    <li>two</li>
    <li>three</li>
</ul>

<ul class="ThirdList">
    <li>one</li>
    <li>two</li>
    <li>three</li>
</ul>

$( '.MasterList' ).sortable
({
    start: function( event, ui )
    {
        // Store start order of the sorting element
        ui.item.OrderStart = ui.item.index();
    },
    stop: function( event, ui )
    {
        // Total number of sorting element
        var OrderTotal = $( '#ObjectiveListSortable li' ).length - 1;
        // Store drop order of the sorting element
        ui.item.OrderStop = ui.item.index();

        // Only do the element sync if there is any change of order. If you simply drag and drop the element back to same position then this prevent such cases.
        if ( ui.item.OrderStart != ui.item.OrderStop )
        {
            // Sorting element dropped to top
            if ( ui.item.OrderStop == 0 )
            {
                $( '.SecondList' ).eq( 0 ).before( $( '.SecondList' ).eq( ui.item.OrderStart ) );
                $( '.ThirdList' ).eq( 0 ).before( $( '.ThirdList' ).eq( ui.item.OrderStart ) );
            }
            // Sorting element dragged from top or dropped to bottom
            else if ( ui.item.OrderStart == 0 || ui.item.OrderStop == OrderTotal )
            {
                $( '.SecondList' ).eq( ui.item.OrderStop ).after( $( '.SecondList' ).eq( ui.item.OrderStart ) );
                $( '.ThirdList' ).eq( ui.item.OrderStop ).after( $( '.ThirdList' ).eq( ui.item.OrderStart ) );
            }
            else
            {
                $( '.SecondList' ).eq( ui.item.OrderStop - 1 ).after( $( '.SecondList' ).eq( ui.item.OrderStart ) );
                $( '.ThirdList' ).eq( ui.item.OrderStop - 1 ).after( $( '.ThirdList' ).eq( ui.item.OrderStart ) );
            }
        }
    }
}); 
```

同步完成后，您还可以在辅助列表上触发事件`$( '.SecondList' ).trigger( 'refresh' );`，以便可排序小部件识别以编程方式完成的项目顺序的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T02:41:07.990

排序更新不起作用的原因是您试图将`sortupdate`事件附加到列表中的每个项目。 `sortupdate`不会在列表中的每个项目上触发，而是在列表本身上触发，您可以将事件作为一个整体附加到列表并获取移动的项目，如下所示。

```
$(".navBar").sortable({
  axis: "x",
  items: "li",
  update: function(event, ui) { onSort(event, ui); }
});

//this should now at least be firing when you move an item 
function onSort(event, ui)
{
    var tempId = $(ui.item).attr('id').replace("nav","item");
    alert(tempId);
} 
```

# java - 当我使用 AJAX 时，单击行表不起作用

> ID：10640417
> 
> 赞同：0
> 
> 时间：2012-05-17T17:20:52.607
> 
> 标签：java, javascript, jsf, jsf-2

当我尝试使用 AJAX 实现单击表格行时，我遇到了一个非常奇怪的问题。这是我用于单击行的 JS 代码：

```
//for tabs
$(document).ready(function () { 
    $("#tabs").tabs();
});

$(window).load(function() {
    jsf.ajax.addOnEvent(function (data) {
        if (data.status === "success") {
            $("#tabs").tabs();
        }
    });
});

$("tr").not(':first').hover(
    function () {
        $(this).toggleClass('highlited');
    //                $(this).css("background","#707070");
    }, 
    function () {
        $(this).toggleClass('highlited');
    //                $(this).css("background","");
    }
    );              

function highlight(param) {  
    var row = jQuery(param).parent().parent().children();
    row.toggleClass('highlited');
//                row.css("background","#707070");
}        

var inputs = document.getElementsByTagName("INPUT");
for (var i in inputs) {
    if (inputs[i].checked) {
        highlight(inputs[i]);
    }
}

//for clicking on a row and opening new page
function addOnclickToDatatableRows() {
    //gets all the generated rows in the html table
    var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0]
    .getElementsByTagName('tr');
    //on every row, add onclick function (this is what you're looking for)
    for (var i = 0; trs.length > i; i++) {
        var cells = trs[i].cells;                    
        for(var j=1; j < cells.length; j++){
            cells[j].onclick = new Function("rowOnclick(this.parentElement)");
        }                    
    }
}

function rowOnclick(tr) {
    var elements = tr.cells[0].childNodes;
    for(var i = 0; elements.length > i; i++) {                           
        if ((typeof elements[i].id != "undefined") && (elements[i].id.indexOf("lnkHidden") > -1)) {
            //opne in a new window//  window.open(elements[i].href);
            location.href=elements[i].href
            break;
        }
    }                
    return false;
} 
```

这是 JSF 页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>test</title>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <link rel="shortcut icon" type="image/x-icon" href="resources/css/themes/nvidia.com/images/favicon.ico" />
            <link href="resources/css/helper.css" media="screen" rel="stylesheet" type="text/css" />
            <link href="resources/css/dropdown.css" media="screen" rel="stylesheet" type="text/css" />
            <link href="resources/css/default.advanced.css" media="screen" rel="stylesheet" type="text/css" />

            <script type="text/javascript" src="resources/js/jquery-1.7.2.min.js"></script>
            <script type="text/javascript" src="resources/js/jquery-ui-1.8.18.custom.min.js"></script>
            <link href="resources/css/jquery-ui-1.8.18.custom.css" media="screen" rel="stylesheet" type="text/css" />
            <script type="text/javascript" src="resources/js/tabs.js"></script>          
    </h:head>
    <h:body onload="addOnclickToDatatableRows();">

        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">
                        <!-- The sortable data table -->

                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" binding="#{table}" var="item">
                            <!-- Check box -->
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Select" />
                                </f:facet>
                                <h:selectBooleanCheckbox onclick="highlight(this)" value="#{SessionsController.selectedIds[item.aSessionID]}" />
                                <!-- Click on table code -->  
                                <h:outputLink id="lnkHidden" value="HistoryLink.xhtml" style="display:none">
                                    <f:param name="id" value="#{item.aSessionID}" />
                                </h:outputLink>
                            </h:column>
                            <!-- Row number -->
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="№" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="№" value="№" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{table.rowIndex + SessionsController.firstRow + 1}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>    

                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>   
                            </h:commandLink>
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                        <h:commandButton value="Delete" action="#{SessionsController.deleteSelectedIDs}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <!--                        <a href="#" id="dialog_link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>Open Dialog</a>
                        -->
                        <script type="text/javascript" src="resources/js/tabs.js"></script> 

                    </h:form>                  

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

    </h:body>
</html> 
```

当我删除 AJAX 代码时，我可以成功单击数据表行并打开一个新页面。但是，当我在第一页上加载表格时添加 AJAX 代码时它可以工作，但是当我打开第二页时，JS 代码不起作用。可能是什么问题？我还两次调用 JS 代码 - 在表头和表单末尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:59:11.327

使用`onmouseover`.

```
<h:dataTable onmouseover="addOnclickToDatatableRows();"> 
```

# javascript - D3 中 jQuery 的 $(".cell:first") 的等价物是什么？

> ID：10640430
> 
> 赞同：11
> 
> 时间：2012-05-17T17:21:27.270
> 
> 标签：javascript, jquery, dom, d3.js

我试过了

```
d3.select(".cell:first")
d3.selectAll(".cell").filter(":first")
d3.selectAll(".cell").select(":first") 
```

但两者都不起作用

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-17T17:24:41.140

`d3.select(".cell")`已经选择了第一个匹配的元素：

> 选择与指定选择器字符串匹配的第一个元素，返回单元素选择。如果当前文档中没有元素匹配指定的选择器，则返回空选择。如果多个元素与选择器匹配，则仅选择第一个匹配的元素（按文档遍历顺序）。

来源：[https ://github.com/mbostock/d3/wiki/Selections#wiki-d3_select](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_select)

### *“我怎么才能拿到最后一件？* ”

D3 似乎返回`d3.selectAll()`集合中的结果，定位在数组中。例如，请求[d3 主页](http://d3js.org/)上的所有段落会导致：

```
[ Array[32] ] // An array with a single array child. Child has 32 paragraphs. 
```

因此，如果我们想从该集合中获取最后一段，我们可以执行以下操作：

```
var paragraphs = d3.selectAll("p");
var lastParag  = paragraphs[0].pop(); 
```

或更简洁地说：

```
var obj = d3.select( d3.selectAll("p")[0].pop() ); 
```

### *“那最后一个孩子呢？”*

选择`:last-child`器与获取页面上的最后一个元素不同。此选择器将为您提供作为其父容器的最后一个子元素的元素。考虑以下标记：

```
<div id="foo">
  <p>Hello</p>
  <p>World</p>
  <div>English</div>
</div>
<div id="bar">
  <p>Oie</p>
  <p>Mundo</p>
  <div>Portuguese</div>
</div> 
```

在此示例中，运行`d3.select("p:last-child")`不会返回任何段落。甚至`d3.selectAll("p:last-child")`不会。这些容器都没有作为段落的最后一个子项（它们是`<div>`元素：`<div>English</div>`和`<div>Portuguese</div>`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-29T11:27:51.267

如果要从 D3 的选择中获取第一个 DOM 元素，请使用`.node()`方法：

```
var sel = d3.selectAll('p'); // all <P>, wrapped with D3.selection
var el = sel.node(); // the first <P> element 
```

# php - 获取 PHP 如何打印 MySQL 数据库中的评论数

> ID：10640433
> 
> 赞同：1
> 
> 时间：2012-05-17T17:21:32.773
> 
> 标签：php, mysql

我有以下问题。我有三个表：消息、评论和用户。我希望 PHP 将 MySQL 数据库中以下字段的数据打印为我的网页上的表格：message.subject、user.username 和评论数。其他一切正常，但我还没有设法让 PHP 打印评论的数量。

到目前为止，这是我尝试做的：

```
<?php
 include("info.php");
 $connect;
 $sql="SELECT * FROM message, user
       WHERE message.userID = user.userID AND 
       ORDER BY message.messageID DESC";
 $result=mysql_query($sql) or die(mysql_error());

 $sql2="SELECT message.messageID, COUNT(*) as comments FROM comment 
        INNER JOIN
        message ON comment.messageID = message.messageID 
        GROUP BY comment.messageID";
 $result2=mysql_query($sql2) or die(mysql_error());

<table>
 <thead>
  <tr>
   <th>Subject</th>   
   <th>Sender</th>
   <th>Number of comments</th>
  </tr>
 </thead>
 <tbody>
  <?php
   while($rows=mysql_fetch_array($result)){
  ?>
  <tr>
   <td>
    <a href="php/message.php?id=<?php echo $rows['messageID']; ?>">
    <?php echo $rows['subject']; ?>
   </td>
   <td>
    <?php echo $rows['username']; ?>
   </td>                        
   <td>
    <?php while($rows2=mysql_fetch_array($result2)){ echo $rows2['comments'];}?>
   </td>
  </tr>
 <?php
 } mysql_close(); ?>
 </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:26:55.913

难道你不能通过一个查询来获得所有这些信息吗？

```
SELECT
    m.messageID,
    m.subject,
    u.username,
    c.numOfComments
FROM
    message m
    INNER JOIN user u ON m.userID = u.userID
    LEFT JOIN (SELECT COUNT(1) AS numOfComments, messageID FROM comments GROUP BY messageID) c ON m.messageID = c.messageID
ORDER BY
    m.messageID DESC 
```

* * *

试试这个脚本：

```
<?php
    include("info.php");
    connect();
    $sql = "
        SELECT
            m.messageID,
            m.subject,
            u.username,
            c.numOfComments
        FROM
            message m
            INNER JOIN user u ON m.userID = u.userID
            LEFT JOIN (SELECT COUNT(1) AS numOfComments, messageID FROM comments GROUP BY messageID) c ON m.messageID = c.messageID
        ORDER BY
            m.messageID DESC
    ";
    $result = mysql_query($sql) or die(mysql_error());

    echo "<table>
    <thead>
        <tr>
            <th>Subject</th>
            <th>Sender</th>
            <th>Number of comments</th>
        </tr>
    </thead>
    <tbody>\n";
    while ($row = mysql_fetch_assoc($result))
    {
        $row = array_map("htmlspecialchars", $row); // sanitize to prevent XSS

        echo "      <tr>
            <td><a href=\"php/message.php?id={$row["messageID"]}\">{$row["subject"]}</a></td>
            <td>{$row["username"]}</td>
            <td>{$row["numOfComments"]}</td>
        </tr>\n";
    }
    echo "  </tbody>
</table>";
?> 
```

还有一些其他的更正。例如，您的链接没有结束`</a>`标签，您的脚本可能容易受到 XSS 攻击。然后是嵌套的 while 循环，这会导致不必要的复杂性和错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:27:17.003

我看到的问题是您正在嵌套您的 while 循环。请参阅：[http ://www.php.net/manual/en/control-structures.while.php#52733](http://www.php.net/manual/en/control-structures.while.php#52733)

使用一条 sql 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:27:34.370

[http://www.w3schools.com/sql/sql_func_count.asp](http://www.w3schools.com/sql/sql_func_count.asp)

```
$result3=mysql_query("COUNT(*) FROM comment") or die(mysql_error());
$row=mysql_fetch_array($result3);
$numcomments = $row[0];
echo $numcomments; 
```

我在几个站点上使用它（使用不同的表名）。

### 答案 2

假设您想要对特定帖子的评论，请尝试以下操作：

```
$result3=mysql_query("SELECT DISTINCT message.messageID FROM comment ") or die(mysql_error());
$row=mysql_fetch_array($result3);
$numcomments = count($row);
echo $numcomments; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:28:08.133

这是最好的方法（我认为）：

```
$sql = "
SELECT message.*, user.*, commentsCounter.comments FROM message

INNER JOIN user
ON user.userID = message.userID

INNER JOIN ( SELECT COUNT( 1 ) as comments, comment.messageID FROM comment GROUP BY comment.messageID ) commentsCounter
ON commentsCounter.messageID = message.messageID

ORDER BY message.messageID DESC
"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T17:28:13.950

为什么不做类似下面的事情呢？

```
$query = "SELECT comment FROM message where userId = $userId";

$result = mysql_query($query);

$numberOfComments = mysql_num_rows($result);

echo "$numberOfComments"; 
```

至少我相信这就是你要找的东西？

手册是这样说的[mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php)：

> mysql_num_rows — 获取结果中的行数

# mysql - mysql 性能与 select not in

> ID：10640441
> 
> 赞同：0
> 
> 时间：2012-05-17T17:21:51.250
> 
> 标签：mysql, performance

我想查找在日期 2012-05-17 之后添加到计划表中的新市场。此选择有效，但 16k 记录时性能较慢。当我删除第二个不同的关键字时，性能会大大提高并且我得到相同的结果，但我仍然需要这个选择更快。大约需要 25 秒。一定有更快的方法吗？

```
select distinct(market) 
from plan
where date_added > '2012-05-17'
and market not in (select distinct(market) from plan where date_added < '2012-05-17') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:37:13.583

不确定这会提高你的表现，但这是另一种方法：

```
select market
  from (select market,
               min(date_added) min_date
          from plan
         group by market) as sub_plan
 where sub_plan.min_date > '2012-05-17'; 
```

另外，让我警告一下，我是 Oracle 人，所以请原谅小的语法差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:27:43.107

你不能把这整行都删掉吗？

```
and market not in (select distinct(market) from plan where date_added < '2012-05-17' 
```

这是多余的，因为您已经指定 date_added 是 > 2012-05-17。

# c# - 重新打包xps解压到zip

> ID：10640449
> 
> 赞同：0
> 
> 时间：2012-05-17T17:23:26.373
> 
> 标签：c#, zip, xps, xpsdocument

我将 xps 提取到一个文件夹，编辑了一些图像，我想重新压缩它以保持它可以使用 XPS 查看器打开，但是有问题！.. 如果我不更改任何内容，我无法重新压缩它并打开它使用 XPS 查看器。

我正在使用 Windows“发送到压缩文件夹”和带有“无压缩 | 超快 | Enh. Deflate”和 ICSharpCode.SharpZipLib.dll 的 WinZip。但没有成功。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T15:51:12.867

您需要使用 Visual Studio 的 VSTO 电动工具来编辑和重新打包 XPS 文件。使用任何 ZIP 程序都不起作用，因为 Microsoft 在 ZIP 标头中做了一些非标准的操作，如果您自己对 XPS 进行 ZIP，则会导致 XPS 查看器无法识别 XPS。

[VSTO电动工具](http://blogs.msdn.com/b/vsto/archive/2010/06/22/open-xml-package-editor-power-tool-for-visual-studio-2010.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T02:37:41.587

这通常意味着您最终压缩了封闭文件夹。

导航到包含“[Content Types].xml”的文件夹，按 Ctrl+A 选择所有项目，右键单击并选择“发送到压缩文件夹”，然后将生成的 .zip 重命名为 .xps。

# java - 如何将 JADE 添加到 Eclipse 并使用 JADE 制作程序？

> ID：10640451
> 
> 赞同：0
> 
> 时间：2012-05-17T17:23:29.233
> 
> 标签：java, agents-jade

我想第一次在jade中编程。如何在eclipse中添加JADE并使用它？我想将 JADE 添加到 Eclipse，但我无法将它添加到 Eclipse 中的库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:31:58.950

我想你的意思是 Eclipse，所以有几个 Jade 插件，例如：

*   [杰德剪辑](http://sourceforge.net/projects/jadclipse/)
*   [翡翠](http://selab.fbk.eu/dnguyen/ejade/index.html)
*   [玉-fw](http://code.google.com/p/jade-fw/)

# perl - 在 Perl 中将月份日期时间年份格式转换为 MM-DD-YYYY 格式

> ID：10640452
> 
> 赞同：-2
> 
> 时间：2012-05-17T17:23:32.953
> 
> 标签：perl

我想将以下日期转换为`MM-DD-YYYY`格式。

`Sep 12 00:00:00 2012`在 Perl 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:08:16.753

对于同时提供`strptime()``strftime()' 功能的核心模块，您可以使用[Time::Piece](http://search.cpan.org/~msergeant/Time-Piece-1.20/Piece.pm)。

```
use Time::Piece;
my $date = q(Sep 12 01:02:03 2012);
my $t = Time::Piece->strptime($date, "%b %d %H:%M:%S %Y");
print $t->strftime("%m-%d-%Y\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:15:56.280

有几个模块可以做到这一点，但`Time::Piece`可能是最好的选择，因为它自 v5.9 以来一直是核心 Perl 发行版的一部分。

这段代码可以满足您的要求。请注意，`%e`格式中`strptime`预计从`1`到的天数`31`。如果日期被零填充到两位数，则`%d`必须使用它来代替`01`to `31`。

```
use strict;
use warnings;

use Time::Piece;

my $dt = Time::Piece->strptime('Sep 12 00:00:00 2012', '%b %e %T %Y');
print $dt->strftime('%d-%m-%Y'); 
```

**输出**

```
12-09-2012 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:53:21.983

使用[DateTime::Format::Strptime](http://search.cpan.org/perldoc?DateTime%3a%3aFormat%3a%3aStrptime)：

```
use DateTime::Format::Strptime qw( );

my $input_format = DateTime::Format::Strptime->new(
   pattern   => '%b %d %H:%M:%S %Y',
   locale    => 'en_US',
   time_zone => 'local',
   on_error  => 'croak',
);

my $dt = $input_format->parse_datetime('Sep 12 00:00:00 2012');
say $dt->strftime('%m-%d-%Y'); 
```

# vba - 使用宏将标题添加到列数据

> ID：10640453
> 
> 赞同：0
> 
> 时间：2012-05-17T17:23:33.000
> 
> 标签：vba, excel, excel-2007

我需要一个简单的宏，它将列标题值添加到电子表格列中的内容（最好是指定的值）。

因此，如果可能的话，我想在 VBA (Col1="Location") 中指定列名，以便宏仅应用于特定列。

示例：如果我已将“位置”指定为宏应查找的列标题，并且 A1 将“位置”作为标题，那么 A 中的所有内容都需要，“位置：”添加到它的前面。基本上，无论标题是+“：”。

所以这：

```
Location
A04B25
A05B89
B58C23 
```

会是这样的：

```
Location
Location: A04B25
Location: A05B89
Location: B58C23 
```

该宏需要循环遍历每一列并将列标题值添加到列中的值（*如果*它在列表中）。

这是我尝试使用但不起作用的代码：

```
Sub AppendHeader()
    Dim i, LastCol

    LastCol = Range("IV1").End(xlToLeft).Column

    For i = 1 To LastCol
        If UCase(Cells(1, i).Value) = "Local SKU" Then
            Cells(1, i).EntireColumn.Append = UCase(Cells(1, i).Value) + ": "
        End If

        If UCase(Cells(1, i).Value) = "Supplier's SKU" Then
            Cells(1, i).EntireColumn.Append = UCase(Cells(1, i).Value) + ": "
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:59:37.927

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim preString As String
    Dim lastRow As Long, LastCol As Long, i As Long, j As Long

    Set ws = Sheets("Sheet1")

    With ws
        LastCol = .Cells(1, Columns.Count).End(xlToLeft).Column

        For i = 1 To LastCol
            Select Case Trim(UCase(Cells(1, i).Value))
            Case "LOCAL SKU", "SUPPLIER'S SKU"
                lastRow = .Range(Split(Cells(, i).Address, "$")(1) & Rows.Count).End(xlUp).Row

                preString = .Cells(1, i).Value & ": "

                For j = 2 To lastRow
                    .Cells(j, i).Value = preString & .Cells(j, i).Value
                Next j
            End Select
        Next i
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:23:59.887

SO上有一个[类似的问题](https://stackoverflow.com/questions/2703431/add-common-prefix-to-all-cells-in-excel)，但我想出了一个不同的VBA解决方案。它将根据该列的标题更改列的数字格式（标题行除外）。

要手动执行此操作，您可以为单元格格式选择“自定义”类别并输入

```
"Location: "General;"Location: "@ 
```

这将使“位置：”显示在数字、文本、日期等之前。应用于这些单元格的任何公式都将考虑前缀 ( `Location:`)，但假设您只想使用这些值。使用此方法，您可以轻松删除格式，而不是创建第二个子例程来删除前缀。

代码修改了 Siddharth 的——谢谢，先生——（我没有像他那样明确声明所有变量，但这是最佳实践）。

```
Sub Sample2()

Set ws = Sheets("Sheet1")

    With ws
        LastCol = .Cells(1, Columns.Count).End(xlToLeft).Column

        For i = 1 To LastCol

            lastRow = .Range(Split(Cells(, i).Address, "$")(1) & Rows.Count).End(xlUp).Row

            preString = .Cells(1, i).Value & ": "

            Range(Cells(2, i), Cells(lastRow, i)).NumberFormat = _
                Chr(34) & preString & Chr(34) & "General;" & _
                Chr(34) & preString & Chr(34) & "@"

        Next i
    End With

End Sub 
```

# triggers - MDR 说明

> ID：10640454
> 
> 赞同：2
> 
> 时间：2012-05-17T17:23:33.413
> 
> 标签：triggers, relational-database, salesforce, apex-code

**设置**：

我有一个 MDR 关系，如下所示：

活动--<参加者>-- 联系方式

EVENT 上有一个触发器，它在插入之前和更新之前触发，计算参加者的数量（通过在参加者对象中搜索事件 ID 的出现次数。

**问题：**

当我向 ATTENDEE 添加记录时，为什么我的触发器会在 EVENT 对象上触发？！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:15:45.120

当对详细记录的更改（在主从关系中）导致主记录上的汇总汇总发生更改时，可能会导致主记录上的触发器执行。

* * *

[Salesforce 帮助中的汇总字段技术概述](https://help.salesforce.com/apex/HTViewSolution?id=000004281&language=en_US)知识文章很好地解释了这一点：

> **增量更新**
> 当汇总记录发生更改时，我们确定该更改是否会导致 RSF 值发生更改。如果是这样，我们计算一个增量值，然后将其应用于同一事务中汇总记录中的 RSF。我们在内存中执行此操作。不需要额外的数据库调用。仅对具有实际更改的 RSF 的行执行更新。如果汇总行本身被汇总，则该过程继续到祖父母。汇总行的所有验证、触发器、工作流等都必须在更改时执行。所有增量更新都执行到 38 位精度。

此外，有关更多详细信息，请参阅[Spring '09 发行说明的第 79 页。](http://wiki.developerforce.com/page/Spring_09)

> **工作流规则和汇总汇总字段评估**
> Spring '09 工作流规则和汇总汇总字段评估更新会影响 Salesforce 评估具有 Apex 触发器的对象上的工作流规则和汇总汇总字段的方式。此更新提高了数据的准确性，并防止在发生递归时重新评估工作流规则。递归是您的自定义逻辑的一部分（例如汇总汇总字段或 Apex 触发器）导致 Salesforce 在保存记录时执行逻辑两次的情况，通常会导致不良行为。有关详细信息，请参阅“什么是 Spring '09 工作流程规则和汇总汇总字段评估更新？” 在 Salesforce 在线帮助中。

# grails - 如果它们为空，如何在 Groovy 中简化在对象上设置属性的代码？

> ID：10640457
> 
> 赞同：3
> 
> 时间：2012-05-17T17:23:47.237
> 
> 标签：grails, groovy

如果属性不为空，我正在使用 Grails 在域类上设置属性。目前，代码如下所示：

```
def product = Product.getById(5);

if (!product.Name) {
    product.Name = "Default Product"
}
if (!product.Price) {
    product.Price = 5;
}
if (!product.Type) {
    product.Type = "Shampoo"
} 
```

在 Groovy 中实现此代码块的更好方法是什么？我设法将其简化为：

```
product.Name = product.Name ?: "Default Product"
product.Price = product.Price ?: 5
product.Type = product.Type = "Shampoo" 
```

但我希望能够做这样的事情（无效代码）：

```
product {
    Name = product.Name ?: "Default Product",
    Price = product.Price ?: 5,
    Type = product.Type ?: "Shampoo"
} 
```

你们会建议我做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T17:54:32.207

在上一个示例中使用`with`方法调用：

```
product.with {
    Name = Name ?: "Default Produce"
    Price = Price ?: 5
    Type = Type ?: "Shampoo"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:49:34.280

不确定是否更简单，但可能更可重用：

```
def setDefaults(obj, Map defaults) {
    defaults.each { k, v -> obj[k] = obj[k] ?: v }
}

setDefaults(product, [Name: 'Default Product', Price: 5, Type: 'Shampoo']) 
```

# javascript - Vaadin Widgetset 未在所有网络上显示

> ID：10640467
> 
> 赞同：0
> 
> 时间：2012-05-17T17:24:26.723
> 
> 标签：javascript, vaadin

我正在经历一些非常棘手的事情。我有两个网络，一个可以访问互联网，另一个没有。当我在这些网络上加载我的 vaadin Web 应用程序项目时，它在具有 Internet 访问权限的网络上运行良好，并且不会在第二个网络中加载小部件。萤火虫报告：

```
<div class="pie chart"></div>. 
```

我无法弄清楚出了什么问题。小部件集是否有可能自己从互联网上挑选一些东西来显示饼图？还是与网络安全有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:10:53.007

Vaadin 小部件集通常不需要 Internet 连接，它们也应该在封闭的 Intranet 中工作，但某些附加小部件可能有特殊限制。

听起来您正在使用基于 Google Chart API 的“Vaadin 可视化”插件。这确实需要互联网连接。

另请参阅：[Google Chart API - 互联网连接要求？](https://stackoverflow.com/questions/3316445/google-chart-api-internet-connection-requirement)

# visual-studio - Visual Studio 2008 和商业智能开发工作室

> ID：10640470
> 
> 赞同：0
> 
> 时间：2012-05-17T17:24:48.483
> 
> 标签：visual-studio, bids

我安装了 SQL Server 2008 R2，现在我安装了带有商业智能工具（我需要）的 Visual Studio。

但现在我需要其他 Visual Studio 工具，如 C++、C# 等...

在我必须使用 BIDS 工具之前，我安装了 Visual Studio 2008 Professional。（我从 DreamSpark 中免费获得了它）。

我可以像以前一样简单地安装它还是需要做一个不同的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:28:01.623

是的，它位于 BIDS 旁边，您可以并排安装

# php - 如何使 wordpress 插件与帖子和页面交互

> ID：10640476
> 
> 赞同：0
> 
> 时间：2012-05-17T17:25:20.610
> 
> 标签：php, wordpress

大约一周前，我开始真正坐下来学习 PHP，所以我对此有点陌生。无论如何，我试图弄清楚如何让我的 WordPress 插件与帖子和页面交互。

本质上，我是在定义一个关键字，然后将该关键字设为超链接。我知道已经有其他插件可以做到这一点，但我不确定它们实际上是如何从 PHP 文件中获取内容来编辑帖子和页面的。

任何有关如何做到这一点的帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:33:45.253

你需要确定你需要什么[WP 钩子](http://codex.wordpress.org/Plugin_API/Hooks)，这取决于你想做什么以及什么时候做。然后附加一个可以满足您需要的功能。

# javascript - 如何在 JavaScript 中以编程方式命名对象“键”？

> ID：10640479
> 
> 赞同：7
> 
> 时间：2012-05-17T17:25:32.253
> 
> 标签：javascript, python, json

我想要的是我每天用 Python 做的事情。在 JS 中它不起作用，很可能是因为我在 JS 中很烂。

这是可以做我想要的Python代码：

```
>key = 'just_a_key'
>value = 5
>dict = {key: value}
>dict
{'just_a_key':5}
>dict['just_a_key'}
5 
```

这在 JS 中不起作用，那里的密钥将被命名为“密钥”。我知道这是因为我并没有真正在这里创建字典，而是在编写相同代码时使用 json 创建对象。所以我现在的问题是：如何在 JS 中以编程方式命名对象“键”（或属性？）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-17T17:26:28.430

像这样：

```
dict = {};

dict[key] = value; 
```

JavaScript 不会在其对象字面表示法中评估属性名称的表达式，但如果您使用对象成员运算符的方括号形式，它会这样做。

[MDN 会员运营商](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-17T17:26:48.267

*更新*：这个答案最初是在 2012 年编写的，但现在有更好的方法使用 ES2015/ES6 [Computed Property Names](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names)。前面的例子（见下文）现在可以写成如下：

```
const key = 'just_a_key';

const obj = { [key]: 5 }; 
```

如果您不熟悉 JavaScript 中的对象文字语法，请注意这里的重要方面是动态键名（即`[key]`）周围的括号。括号表示`key`（或任何其他内容）应被解释为表达式，而不是用作文字值。

* * *

原始答案/ ES6之前的解决方案：

```
var obj = {},
    key = 'just_a_key';

obj[key] = 5; 
```

# grails - Groovy/src 中的 Grails 2.x 服务注入

> ID：10640480
> 
> 赞同：12
> 
> 时间：2012-05-17T17:25:32.717
> 
> 标签：grails, grails-2.0

我想在 Groovy/src 类中注入我的服务。normaln 依赖注入不起作用：

```
...
def myService
... 
```

我可以使用它（它有效）：

```
def appCtx = ApplicationHolder.application.getMainContext()
def myService = appCtx.getBean("myService"); 
```

但 ApplicationHolder 已被弃用。有没有更好的解决方案？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-01-09T01:25:42.680

ApplicationHolder 的替换可以是[Holders](http://grails.org/doc/2.1.0/api/grails/util/Holders.html)，也可以在静态范围内使用：

```
import grails.util.Holders
...

def myService = Holders.grailsApplication.mainContext.getBean 'myService' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-18T19:17:41.713

检查以下 Grails FAQ 以从 src/groovy 中的源访问应用程序上下文 - [http://grails.org/FAQ#Q](http://grails.org/FAQ#Q)：如何从 src/groovy 中的源访问应用程序上下文？

没有等效于 ApplicationHolder 的 ApplicationContextHolder 类。要从 src/groovy 中的 Groovy 类访问名为 EmailService 的服务类，请使用以下命令访问 Spring bean：

```
import org.codehaus.groovy.grails.web.context.ServletContextHolder as SCH
import org.codehaus.groovy.grails.web.servlet.GrailsApplicationAttributes as GA
def ctx = SCH.servletContext.getAttribute(GA.APPLICATION_CONTEXT)
def emailService = ctx.emailService 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T08:38:07.903

您可以通过以下方式轻松注册新的（或覆盖现有的）bean `grails-app/conf/spring/resources.groovy`：

```
// src/groovy/com/example/MyClass.groovy
class MyClass {
    def myService
    ...
}

// resources.groovy
beans = {
    myclass(com.example.MyClass) {
        myService = ref('myService')
    }
} 
```

您还可以查看有关[如何在 Grails 2.0 中访问 Grails 配置的问题？](https://stackoverflow.com/q/7133580/462015)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-20T07:25:41.880

哟可以从`resources.groovy`：

```
// src/groovy/com/example/MyClass.groovy
class MyClass {
    def myService
    ...
}

// resources.groovy
beans = {
    myclass(com.example.MyClass) {
        myService = ref('myService')
    }
} 
```

或仅使用自动连线注释：

```
// src/groovy/com/example/MyClass.groovy

import org.springframework.beans.factory.annotation.Autowired

class MyClass {
    @Autowired 
    def myService
    ...
}

// resources.groovy
beans = {
    myclass(com.example.MyClass) {}
} 
```

# android - 开始活动时某些设备上的 ANR

> ID：10640485
> 
> 赞同：0
> 
> 时间：2012-05-17T17:25:52.323
> 
> 标签：android, android-intent, surfaceview, android-anr-dialog

我在某些设备上遇到了一个错误，有时在开始新活动时会出现 ANR。我的设备（Samsung Galaxy S2）有一点延迟，但我从来没有收到 ANR。有时会出现 ANR 的其他设备是：HTC Desire HD 和 Xperia（据我所知）。我认为这可能是我做的某种 cpu 密集型的事情，这使得旧手机比新手机滞后，但我不知道。我使用 Asynctask 来加载所有繁重的东西，而 ui 线程并没有真正做太多事情。

这是代码

我在这里创建一个单独的线程来访问共享首选项。

```
 @Override
    protected void onResume() {
        super.onResume();
        sound = false;
        Thread prefThread = new Thread(new Runnable(){
            public void run(){
                SharedPreferences prefs = getSharedPreferences(SharedPrefValues.OPTION_PREF, Context.MODE_PRIVATE);
                sound = prefs.getBoolean("sound", true);
                String difficulty = prefs.getString(SharedPrefValues.DIFFICULTY, SharedPrefValues.DIF_MEDIUM);
                prefs = getSharedPreferences(SharedPrefValues.HIGHSCORE_PREF, Context.MODE_PRIVATE);
                for(int i = 0; i < mapPnl.buttons.size(); i++)
                    mapPnl.SetRank(mapPnl.buttons.get(i), prefs.getString(SharedPrefValues.HIGHSCORE_RANK_NAME + difficulty + mapPnl.buttons.get(i).getName(), SharedPrefValues.RANK_NOT_OK));

            }
        });
        prefThread.start();
        mapPnl.speedX = 0;
    } 
```

bgTask 是一个 AsyncTask。

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                WindowManager.LayoutParams.FLAG_FULLSCREEN); 

        Display display = getWindowManager().getDefaultDisplay();
        screenSize = new Point();
        screenSize.x = display.getWidth();
        screenSize.y = display.getHeight();

        mapPnl = new MapPnl(this);

        LoadBitmapsStuff bgTask = new LoadBitmapsStuff(this);
        bgTask.execute();

        addContentView(mapPnl, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    } 
```

这是绘制所有内容并处理 onTouchEvents 的 Surfaceview

```
private class MapPnl extends SurfaceView implements SurfaceHolder.Callback{
...
public MapPnl(Context context) {
            super(context);
            getHolder().addCallback(this);

            buttons = new ArrayList<ButtonMap>();

            posX = 0;
            speedX = 0;
            maxX = 0;

            drawThread = new DrawThread(getHolder());
            drawThread.setRunning(true);
        }
....
} 
```

我在surfaceCreated中启动drawThread

```
 public void surfaceCreated(SurfaceHolder arg0) {
        if(drawThread.getState() == Thread.State.NEW)
            drawThread.start();
        else if(drawThread.getState() == Thread.State.TERMINATED){
            drawThread = new DrawThread(getHolder());
            drawThread.setRunning(true);
            drawThread.start();
        }
    } 
```

Surfacedestroyed from guide on the web

```
 public void surfaceDestroyed(SurfaceHolder arg0) {
        boolean retry = true;
        drawThread.setRunning(false);
        while (retry) {
            try {
                drawThread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }

    } 
```

我认为这是重要的代码。据我所知，UIthread 仅通过我显示的这些部分运行（可能不是 ondestroy，但我读到有人在另一个线程中遇到了问题。）。这应该在大多数系统上运行得相当快。

在 asyncTask 完成运行之前，drawthread 仅显示“正在加载”的文本。因此，当所有内容都被加载和绘制时，用户开始触摸屏幕，这就是 ANR 出现的时候。有小费吗？

**更新**(12-05-18)：我设法从模拟器中获得了一个 logcat。我使用了慢速计算机，当我使用快速计算机时，A​​NR 没有出现。

PID 860 是活动

```
03-31 01:41:03.453: I/Process(71): Sending signal. PID: 860 SIG: 3
03-31 01:41:03.453: I/dalvikvm(860): threadid=3: reacting to signal 3
03-31 01:41:03.672: I/dalvikvm(860): Wrote stack traces to '/data/anr/traces.txt'
03-31 01:41:03.672: I/Process(71): Sending signal. PID: 71 SIG: 3
03-31 01:41:03.682: I/dalvikvm(71): threadid=3: reacting to signal 3
03-31 01:41:03.992: I/dalvikvm(71): Wrote stack traces to '/data/anr/traces.txt'
03-31 01:41:03.992: I/Process(71): Sending signal. PID: 381 SIG: 3
03-31 01:41:03.992: I/dalvikvm(381): threadid=3: reacting to signal 3
03-31 01:41:04.212: I/Process(71): Sending signal. PID: 349 SIG: 3
03-31 01:41:04.212: I/dalvikvm(349): threadid=3: reacting to signal 3
03-31 01:41:04.322: I/dalvikvm(349): Wrote stack traces to '/data/anr/traces.txt'
03-31 01:41:04.332: I/Process(71): Sending signal. PID: 664 SIG: 3
03-31 01:41:04.364: I/dalvikvm(664): threadid=3: reacting to signal 3
03-31 01:41:04.542: I/Process(71): Sending signal. PID: 364 SIG: 3
03-31 01:41:04.612: I/dalvikvm(364): threadid=3: reacting to signal 3
03-31 01:41:04.744: I/Process(71): Sending signal. PID: 371 SIG: 3
03-31 01:41:04.953: I/Process(71): Sending signal. PID: 822 SIG: 3
03-31 01:41:05.162: I/Process(71): Sending signal. PID: 139 SIG: 3
03-31 01:41:05.162: I/dalvikvm(139): threadid=3: reacting to signal 3
03-31 01:41:05.221: I/dalvikvm(822): threadid=3: reacting to signal 3
03-31 01:41:05.292: I/dalvikvm(371): threadid=3: reacting to signal 3
03-31 01:41:05.312: I/dalvikvm(139): Wrote stack traces to '/data/anr/traces.txt'
03-31 01:41:05.402: E/ActivityManager(71): ANR in se.blogspot.developingjsa.view (se.blogspot.developingjsa.view/.FirstMenu)
03-31 01:41:05.402: E/ActivityManager(71): Reason: keyDispatchingTimedOut
03-31 01:41:05.402: E/ActivityManager(71): Load: 1.79 / 1.63 / 1.31
03-31 01:41:05.402: E/ActivityManager(71): CPU usage from 5383ms to 64ms ago:
03-31 01:41:05.402: E/ActivityManager(71):   elopingjsa.view: 51% = 49% user + 1% kernel / faults: 36 minor 7 major
03-31 01:41:05.402: E/ActivityManager(71):   system_server: 44% = 41% user + 3% kernel / faults: 133 minor 1 major
03-31 01:41:05.402: E/ActivityManager(71):   adbd: 1% = 0% user + 0% kernel
03-31 01:41:05.402: E/ActivityManager(71):   m.android.phone: 1% = 0% user + 0% kernel / faults: 112 minor
03-31 01:41:05.402: E/ActivityManager(71):   ronsoft.openwnn: 0% = 0% user + 0% kernel / faults: 22 minor
03-31 01:41:05.402: E/ActivityManager(71):   com.svox.pico: 0% = 0% user + 0% kernel / faults: 7 minor
03-31 01:41:05.402: E/ActivityManager(71):   logcat: 0% = 0% user + 0% kernel
03-31 01:41:05.402: E/ActivityManager(71):   qemud: 0% = 0% user + 0% kernel
03-31 01:41:05.402: E/ActivityManager(71):   id.defcontainer: 0% = 0% user + 0% kernel / faults: 6 minor
03-31 01:41:05.402: E/ActivityManager(71):   ackageinstaller: 0% = 0% user + 0% kernel / faults: 5 minor
03-31 01:41:05.402: E/ActivityManager(71): TOTAL: 100% = 91% user + 8% kernel + 0% irq + 0% softirq 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:07:53.637

现在解决了。

我能够使用 google play 从这些设备获取堆栈跟踪。事实证明，我在那里发布的代码没有任何问题。

我正在使用教程中的代码（[http://www.droidnova.com/playing-with-graphics-in-android-part-i,147.html](http://www.droidnova.com/playing-with-graphics-in-android-part-i,147.html)）。每次发生 onTouchEvent 时，该代码都试图从 drawThread 获取 surfaceHolder。

我猜想有时drawThread在它的循环内并且当UiTread试图抓住它时无法释放surfaceHolder，导致ANR。

# android - Layout 作为 Android 上 SlidingDrawer 的句柄

> ID：10640488
> 
> 赞同：0
> 
> 时间：2012-05-17T17:26:27.223
> 
> 标签：android, slidingdrawer

我的应用程序中有一个典型的 SlidingDrawer，但我不知道如何将布局（相对或线性）作为我的 Slidingdrawer 的句柄！ImageViews 和 Buttons 工作正常，但不是布局！你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:31:01.513

在滑动抽屉 xml 中，您只需将句柄 id 设置为所需的新 RelativeLayout/LinearLayout 的 id。就像您使用 ImageView/Button 等一样。

```
<SlidingDrawer
    android:id="@+id/slidingDrawer"
    android:handle="@+id/drawerHandle"
    android:content="@+id/contentLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <LinearLayout
        android:id="@+id/drawerHandle"
        android:gravity="center"
        android:layout_width="75dp"
        android:layout_height="wrap_content"
        android:background="@drawable/bg">
        <ImageView
            android:src="@drawable/icon"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center">
        </ImageView>
    </LinearLayout>
    <LinearLayout
        android:id="@+id/contentLayout"
        android:gravity="center"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/bg">
        <ImageView
            android:src="@drawable/icon"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center">
        </ImageView>
    </LinearLayout>
</SlidingDrawer> 
```

# javascript - 如何为此 jquery 代码使用函数参数，还是有更好的解决方案？

> ID：10640491
> 
> 赞同：0
> 
> 时间：2012-05-17T17:26:37.963
> 
> 标签：javascript, jquery

我有大约 50 个 p 标签，在这些标签旁边又是 50 个 div。单击每个 p 标签时，应显示其 div 并隐藏其余部分。我如何实现这一点。我可以使用以下内容：

```
$(function() {
  $('.p1').click(function(){
  $('.div1').show();
  $('.div2','.div3','.div4','.div5','.div6',.........,'.div50').hide()
})
$('.p2').click(function(){
  $('.div2').show();
  $('.div1','.div3','.div4','.div5','.div6',.........,'.div50').hide()
})
//////////////
//////
}) 
```

但正如您所见，这不是一个有效的解决方案。我也不确定如何在`each`此处利用 jquery 或如何使用数组来完成此实现。有人可以指出我正确的方向。我认为我们应该使用一个函数并传递那个不。作为参数，但我不知道如何在 jquery 中使用自定义函数。

**更新：**

这就是我所做的

```
$(function() {
        $('.p1').click(function() {
            $('.div').hide();
            $('.d1').show();
        })
    }) 
```

我已将类 div 添加到我所有的 50 个 div 中，并且在单击 p1 时显示 d1。现在我如何为每个实例替换 1 直到 50。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:31:48.763

我会对所有人都有一个通用的类`div`，`p`这样处理程序和绑定就`hide`可以很简单。对于 div，我会将一个数据标签关联到每个标签以`p`将每个`p`标签链接到`div`

```
<p class="p1 pclass" data-showdiv="div1">
 ...
</p>
<p class="p2 pclass" data-showdiv="div2">
..

<div class="mydiv div1" ..>
..
</div>
<div class="mydiv div2" ..>
..
</div> 
```

剧本是，

```
$(function() {
  $('.pclass').click(function(){
     $('.mydiv').hide();
     $('.' + $(this).data('showdiv')).show();
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:40:51.130

正如杰森所说，

用这个

```
$('p').click(function() {
    $('div').hide();
    $(this).next('div').show();
}); 
```

如果在`div`每个段落旁边。

但是，如果`p`and之间有一个元素`div`，它将不起作用。

对于你的问题，你可以这样做，

```
$('p').click(function() {
        $('div').hide();
        var divClass = $(this).attr("class").replace('p','div');
        $('.' + divClass).show();
    }); 
```

前提是你只有`p1`, `p2`.... 在 paragrah 类;)

**更新**

[看到这个小提琴](http://jsfiddle.net/MA6Ak/1/)

请注意，我们在和之间有您想要的`<br>`标签。`<p>``<div>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:29:08.520

假设您的 HTML 结构是

```
<p>Some text</p>
<div>More text to hide and show</div>
<p>Some text</p>
<div>More text to hide and show</div>
<p>Some text</p>
<div>More text to hide and show</div>
.... 
```

`$(function(){});`在您的方法中使用以下内容：

```
$('p').click(function() {
    $('div').hide();
    $(this).next('div').show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:35:43.957

```
var dvs = ['.div1','.div2','.div3','.div4','.div5','.div6',.........,'.div50'];

$('p').click(function() {
    var index = parseInt(this.className.replace('p','')) - 1;
    $(dvs[index]).show();
    $(dvs.join(', ')).not(dvs[index]).hide();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T17:54:39.893

jQuery`click`事件将自动注册到与选择器匹配的所有元素上，因此您不必使用该`each()`方法。我建议使用两个 CSS 类来区分具有这种*切换*行为的元素和主要的元素（即在单击其父元素时应显示）。

标记：

```
<body>
  <p class="togglable">
    <div class="primary">
      This is the primary div that will be shown when our parent is clicked.
    </div>
    <div>Regular div child</div>
    <p>Nested paragraph</p>
    <ul>
      <li>A list perhaps</li>
    </ul>
  </p>

  <p class="togglable">
    <div class="primary">
      This is the primary div that will be shown when our parent is clicked.
    </div>
    <div>Regular div child</div>
    <p>Nested paragraph</p>
    <ul>
      <li>A list perhaps</li>
    </ul>
  </p>

  <p>This is a normal paragraph</p>
</body> 
```

编码：

```
$(function () {
  $('.togglable').click(function () {
    // hide all our children
    $(this).children().hide();
    // now only show our primary chlid
    // NOTE: we pass 'this' as the second argument
    // so that the selector will only apply to the
    // children of the element that was clicked
    // (i.e. we are providing a custom context for the selector).
    $('.primary', this).show();     

    // You could even use the position of the child as well:
    // $(this).children().first().show();   
    // This will show the first child element.
  });
}); 
```

在此示例中，所有具有该类`togglable`的元素将在单击时显示其主要子元素并隐藏所有其他子元素。

# python - 读写文件python

> ID：10640493
> 
> 赞同：2
> 
> 时间：2012-05-17T17:26:40.843
> 
> 标签：python, file

我正在尝试根据从对话窗口获得的输入在文本文档中编写三个单独的行。我确信这是一个简单的修复，但我似乎无法将三行写为单独的行。有人介意告诉我这段代码有什么问题吗？

```
file = open('file.txt', 'wb') 
file.write('input1')
file.write('input2')
file.write('input3') 
```

输入应该在不同的行上，但它们的输出为：

```
input1input2input3 
```

代替：

```
input1
input2
input3 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T17:27:55.273

尝试这个：

```
file = open('file.txt', 'wb')
file.write('input1\n')
file.write('input2\n')
file.write('input3\n') 
```

您正在附加换行符`'\n'`以前进到下一行。

如果您使用该`with`构造，它将自动为您关闭文件：

```
with open('file.txt', 'wb') as file:
   file.write('input1\n')
   file.write('input2\n')
   file.write('input3\n') 
```

此外，请考虑使用不同的变量名代替`file`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:31:48.550

您的问题是您没有包含换行符。请记住，Python 的输出就像打字机一样——你不告诉它换行，它不会。写换行符的方法是`\n`.

所以，

```
file.write('\n'.join([input1, input2, input3])) 
```

会做的。

# iphone - 'sharedDispatcher' 已弃用

> ID：10640502
> 
> 赞同：16
> 
> 时间：2012-05-17T17:27:09.320
> 
> 标签：iphone

我已经添加了这个功能。

```
- (void) registerWithTouchDispatcher {
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];
} 
```

错误：`sharedDispatcher`已弃用

这是什么意思，我该怎么办？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-17T18:48:08.103

看一下`ccDeprecated.h`，它说要使用：

`[[CCDirector sharedDirector] touchDispatcher]`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-14T09:26:12.427

更改：[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0swallowsTouches:YES];

To: [[[CCDirector sharedDirector] touchDispatcher] addTargetedDelegate:self priority:0swallowsTouches:YES];

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T12:53:26.767

您可以通过按“Shift+Command”键并将鼠标悬停在方法上来检查任何 Cocos (CC) 方法背后的 Cocos2D 代码。对任何不推荐使用的方法执行此操作会将您带到 CCDeprecated.m，这也将为您提供新方法。

# jquery - 带有 CloudZoom 的 Jquery 加载缩略图

> ID：10640504
> 
> 赞同：1
> 
> 时间：2012-05-17T17:27:18.383
> 
> 标签：jquery, zooming

我在将缩略图加载到 div 然后对其使用云缩放时遇到问题，基本上 html 是这样的：

就像这样：

```
<!-- The Original Image -->
<p class="product-image product-image-zoom replace">
<a class="cloud-zoom" id="zoom1" href="src/to/img.jpg" rel="adjustX: 10, adjustY:-4">
<img id="" src="src/to/img.jpg" />
</a>
</p>

<div class="more-views">
   <ul>
    <li>
        <a href=""><img class="image-rollover" src="source/to/img.jpg" width="67" height="67"/></a>
    </li>
     <li>
        <a href=""><img class="image-rollover" src="source/to/img.jpg" width="67" height="67"/></a>
    </li>
     <li>
        <a href=""><img class="image-rollover" src="source/to/img.jpg" width="67" height="67"/></a>
    </li>
</ul> 
```

这是我用来将每个缩略图加载到主 img 标签中的 jquery：

```
jQuery('.image-rollover').hover(function() {
jQuery('.replace img').attr("src", this.src);
jQuery('.zoom').attr("href", this.src);
}); 
```

我还在主图像上使用云缩放：

```
<script type="text/JavaScript" src="<?php echo $this->getSkinUrl('js/cloud-zoom.1.0.2.min.js') ?>"></script> 
```

所以这是我的问题：缩略图可以加载到 div 中，但是每次我将鼠标悬停在新加载的缩略图上时，都会出现云缩放，但仍然显示初始图像，有没有办法让云缩放显示当前加载的图像？

一只忙碌的猫：
[http](http://beta2.stocksale.ca/picture.png) ://beta2.stocksale.ca/picture.png （需要在那里登录）

请帮忙！！！啊啊啊！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:25:22.697

我有一个类似的问题。再次尝试调用 .CloudZoom...

```
jQuery('.image-rollover').hover(function() {
jQuery('.replace img').attr("src", this.src);
jQuery('.zoom').attr("href", this.src);
jQuery('.cloud-zoom').CloudZoom();
}); 
```

# email - 如何在 AWS 上配置电子邮件帐户，例如 support@xyz.com 或 feedback@xyz.com

> ID：10640507
> 
> 赞同：6
> 
> 时间：2012-05-17T17:27:40.607
> 
> 标签：email, amazon-web-services, amazon-ses

我在 godaddy.com 注册了我的域名。想使用 EC2 和 SES 在亚马逊网络服务上托管我的网站。

在我的网站上，很少有电子邮件帐户，例如 support@xyz.com 或 feedback@xyz.com。如何在我的 SES 服务器（或我的 ec2 服务器）上配置这些电子邮件帐户；这样我就可以收到发送到这些电子邮件地址的任何电子邮件（通过 Outlook、Thunderbird 等邮件客户端）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T01:28:33.170

这是我通过 AWS 论坛从 AWS 团队收到的答复：

> 你好，
> 
> 很抱歉，SES 今天不处理入站电子邮件。我们仅提供出站电子邮件递送服务。但是，您可以（通过一些努力）在 EC2 实例上设置后缀服务器和 POP3 服务器，获取绑定到该 EC2 实例的静态 IP，并将其列在您的 MX 记录中。例如，这比使用 gmail.com 更具挑战性，但它会为您提供所需的内容。
> 
> 谢谢，如果我能提供进一步的帮助，请告诉我。
> 
> 保罗

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T13:10:57.787

您可以免费注册您的域的 Google Apps。在设置过程中，Google 会指导您在 Godaddy 中修改域的 MX 记录，以便接收邮件。然后，您可以使用 AWS SES 发送邮件，您的域的 Gmail 用户将收到邮件。

# html - CakePHP 2 中的 AJAX 加载

> ID：10640514
> 
> 赞同：0
> 
> 时间：2012-05-17T17:27:58.503
> 
> 标签：html, ajax, cakephp, jquery, cakephp-2.0

在 CakePHP 2.x 中，我使用此路径向访问者显示结果 **example.com/my/showResults** * *getSomeResults* * 函数发出一些 Twitter API 请求，通常持续 5-25 秒。

我需要在我的视图中添加一个“加载 div”。但我无法决定结构。

我在 google 上找到的示例显示，当用户单击按钮时，会发出 AJAX 请求，结果会显示在该 div 中。

但在我的情况下，当页面加载时，该请求将异步完成，当结果可用时，它们将显示在另一个 div 中。

关于我下面的文件结构，我应该把 AJAX 请求放在哪里？当 AJAX 请求成功时，我应该删除**showResults方法中的行并运行另一个操作吗？**

如果您可以推荐一个结构，我会很高兴，当 AJAX 请求以 CakePHP 2 方式成功时显示结果。谢谢

```
// appcontroller.php
class AppController extends Controller {
  function getSomeResults() {
        // make some http requests to twitter API
  }
}

// mycontroller.php
class MyController extends AppController {
  public function showResults() {
    $data=$this->getSomeResults();
    $this->set('data', $data);
    $this->render('myelement');
  }
}

// myelement.ctp
<div id="before">
  Please wait loading..
</div>

<div id="results" style="display: none">
  <?php echo $data ?>
</div>

// myscript.js
$(document).ready(function() {
    $("#results").hide();
    setTimeout('$("#results").show();',8000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:25:59.473

在我看来，就像您正在获取 Web 服务，然后通过 cakephp 传递数据。这意味着它看起来根本不像在使用 ajax。

由于您似乎已经在使用 jquery，我建议您使用 jquery 的 ajax 方法 [http://api.jquery.com/jQuery.ajax/] 连接到 twitter。因此，您不仅要删除 showResults()，而且还要删除 getSomeResults()。如果您需要刷新此信息，您可以将此 ajax 调用设置为一个函数并定期调用它。

除非您在页面顶部有用于加载的 div，否则您可以使用 jquery 将结果 div 从现在加载更改为数据。

只是我的2美分。

# java - 带有“无法解析 SupportActivity”的操作栏库 4.0.2

> ID：10640522
> 
> 赞同：2
> 
> 时间：2012-05-17T17:28:23.010
> 
> 标签：java, android, eclipse, actionbarsherlock

提前感谢您查看此内容。我对这个有点过头了。

我有一个使用 Action Bar Sherlock 兼容性库的 android 项目。我能够使用旧版本 ~3.5 正常运行它，其中包含自己的 android.support.v4 库和名为“SupportActivity”的附加类。

我不小心将 Sherlock 库更新到了最新版本（4.0.2），它去掉了 android.support.v4 源文件，只使用了一个 jar 文件。但是，这个 jar 文件没有引用“SupportActivity.class”，由于某种原因，我的项目现在有这个错误：

```
 The type android.support.v4.app.SupportActivity cannot be resolved.
   It is indirectly referenced from required .class files
   LoadMapTask.java     /ncas/src/viiad/task    line 65 Java Problem 
```

有趣的是，这个错误落在了注释行上。“LoadMapTask.java”的代码可以在[这里](http://codepaste.net/1zruke)查看。

因为它是“间接引用的”，所以我在项目中的任何地方都找不到任何引用的 SupportActivity 实例。

我目前正在使用 Eclipse Indigo，使用 Google API 版本 15 (4.0.3) 进行编译，并使用 sdk/extras/android/support/v4/ jar。我的构建路径也将 Action Bar Sherlock（编译得很好）作为必需的项目。

如果您需要更多信息，请告诉我。任何形式的评论或帮助都深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:38:22.347

由于 ABS 更新到 v4，`SupportActivity`已经消失，只需使用`android.app.Activity`.

并使用`SherlockActivity`和`SherlockFragmentActivity`替换 android 之一。

如果需要，您最好查看更多来自罗伯托的[笔记。](https://plus.google.com/108284392618554783657/posts/cUSpT1tHRHk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:07:36.500

ActionBarSherlock v4 使用`SherlockActivity`和`SherlockFragmentActivity`. [您可以在网站上](http://actionbarsherlock.com/usage.html)找到有关使用它的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:51:46.503

我通过恢复到旧版本的 Action Bar Sherlock (3.5) 解决了这个问题。如果我想使用 4.0 或更高版本，我可能不得不在我的代码中使用来自 SherlockActivity 或 SherlockFragmentActivity 的方法。目前，这超出了我的范围。

# java - 使用 startActivityForResult() 调用时从相机返回

> ID：10640525
> 
> 赞同：1
> 
> 时间：2012-05-17T17:28:36.253
> 
> 标签：java, android, eclipse

我通过创建意图来使用相机：

```
Intent cameraI = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
```

然后开始：

```
startActivityForResult(cameraI, request); 
```

其中 request 是一个预定义的常量整数。

然后我有onActivityResult（）：

```
public void onActivityResult(int req, int res, Intent data) throws NullPointerException
{
    try{

    super.onActivityResult(req, res, data);
    if(req == request)
    {
        Bitmap picture = (Bitmap) data.getExtras().get("data");
        ImageView image = (ImageView) findViewById(R.id.imageView1);
        image.setImageBitmap(picture);
    }//if
    else
    {
        Toast.makeText(getApplicationContext(), "No picture taken", 4);
    }//else
    }catch (NullPointerException e){
        String error = "null pointer exception";
        Toast.makeText(getApplicationContext(), error, 4);
    }
}//onActivityResult 
```

我的困境是这台电脑上没有摄像头。我得到了 eclipse 的默认棋盘格和移动方形动画。这真的起作用吗？我一直在单击“拍照”按钮，但没有任何反应。我想要发生的是拍摄一张照片，然后将其返回给调用 i 的活动。这是默认操作还是我必须指定我希望它在拍摄一张照片后返回？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:00:25.847

是的，较新的模拟器（2.3.3）应该可以进行测试。

一些设备存在以不同格式返回数据的问题。相反，您可以做的是，将一个位置（您可以选择）传递给相机应用程序，它将新图像保存到该位置，您可以盲目地使用您指定的位置。

例如

```
文件 tempFolder = 新文件（Environment.getExternalStorageDirectory().getAbsolutePath()
                + "/我的文件夹");
        tempFolder.mkdir();
        文件 = 新文件（Environment.getExternalStorageDirectory().getAbsolutePath() + "/myfolder",
                String.valueOf(System.currentTimeMillis()) + ".jpg");
        意图意图 = 新意图（MediaStore.ACTION_IMAGE_CAPTURE）；
        intent.putExtra（MediaStore.EXTRA_OUTPUT，Uri.fromFile（文件））；
        startActivityForResult（意图，TAKE_PICTURE）；

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:33:08.517

我不确定模拟器及其功能，但这里有一个教程，您可能会觉得有帮助：

[http://achorniy.wordpress.com/2010/04/26/howto-launch-android-camera-using-intents/](http://achorniy.wordpress.com/2010/04/26/howto-launch-android-camera-using-intents/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:30:02.687

有问题的代码最终起作用了。在设备上进行测试后，图片按要求返回。Eclipse 的模拟相机根本不起作用。如果我没记错的话，您可以启用相机，但这完全是一个不同的讨论。

# google-chrome-extension - Chrome 扩展和内容安全策略以及 GWT RPC

> ID：10640526
> 
> 赞同：0
> 
> 时间：2012-05-17T17:28:40.390
> 
> 标签：google-chrome-extension, gwt-rpc, content-security-policy

我有 chrome 扩展，因为我正在尝试使用 GWT RPC。不能让它工作。我在我的模块 xml 文件中使用 <add-linker name="xsiframe" /> 编译我的 GWT 代码。我仍然在 js chrome 控制台中遇到以下异常，没有任何行号：

**由于 Content-Security-Policy 拒绝执行 JavaScript URL。**

我的 manifest.json，ver.2 是这样的：

```
 "permissions": [
        "http://*/"
      ],

  "content_security_policy": "default-src * 'unsafe-inline'; script-src 'self'; object-        src 'self'; frame-src about:",

  "web_accessible_resources": [
    "js-lib/",
    "js-code/",
    "compiled_gwt_code_from_gwt-war/"
  ] 
```

此部署是否有已知的解决方案？或者什么可能是错的？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:16:17.967

新的 CSP 是胡说八道。它故意切断功能，并且不允许覆盖，即使开发人员非常清楚他们在做什么。

现在，在扩展清单中恢复到清单 v.1。

```
 ...
 manifest_version: 1,
 ... 
```

该规范将来可能会变得不那么共产主义。

# c# - 如何将参数传递给在 JQuery 对话框（）打开事件上调用的操作

> ID：10640527
> 
> 赞同：2
> 
> 时间：2012-05-17T17:28:54.600
> 
> 标签：c#, javascript, jquery, ajax, dialog

早上好。

我有一个模态 JQuery 对话框，它在打开时调用并加载部分视图。很好的例子可以在这里看到[https://stackoverflow.com/a/4802423/1193841](https://stackoverflow.com/a/4802423/1193841)但我会重新粘贴：

```
<script type="text/javascript">
$(function () {
    $('#dialog').dialog({
        autoOpen: false,
        width: 400,
        resizable: false,
        title: 'hi there',
        modal: true,
        open: function(event, ui) {
            //Load the CreateAlbumPartial action which will return 
            // the partial view _CreateAlbumPartial
            $(this).load("@Url.Action("CreateAlbumPartial")");
        },
        buttons: {
            "Close": function () {
                $(this).dialog("close");
            }
        }
    });

    $('#my-button').click(function () {
        $('#dialog').dialog('open');
    });
}); 
```

在我的例子中，ActionMethod "CreateAlbumPartial" 采用一个 ID 参数，该参数是从另一个页面传递的 onclick="" 事件。

如上所示，如何使该 Id 在被调用时传递给 ActionMethod？就像是

```
$('#dialog').dialog('open',Id) 
```

会很棒，但我不认为这就是它的工作原理。

PS 现在我通过 $.post() 将 .html(data) 加载到 div 然后在 .show().dialog('open') 中显示该 DIV 来显示我的弹出窗口。但是，与其分别调用我的 Action 方法和 Dialog 相关的东西，我真的很想按照我要求将所有逻辑保存在一个地方的方式重新执行它。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:36:44.183

为什么不创建一个隐藏控件并将值分配给它并在对话框中使用它

# python - 不使用 Django 的 Python 数据库（用于 Heroku）

> ID：10640532
> 
> 赞同：14
> 
> 时间：2012-05-17T17:29:17.800
> 
> 标签：python, database, django, heroku

令我惊讶的是，我还没有在其他地方发现这个问题。简短版，我正在编写一个我计划部署到云的应用程序（可能使用 Heroku），它将进行各种网络抓取和数据收集。它将位于云中的原因是，我可以将其设置为每天独立运行，并将数据拉到其数据库中，而无需打开我的计算机，并且团队的其他成员也可以访问数据。

我曾经使用过 AWS 的 SimpleDB 和 DynamoDB，但是我发现 SDB 的存储限制太小而且 DDB 的查询能力差是个问题，所以我正在寻找可以存储任意长度值的数据库系统（SQL 或 NoSQL） （理想情况下是任意数据结构）并且可以在任何字段上查询。

我为 Heroku 找到了许多数据库解决方案，例如 ClearDB，但我看到的所有信息都显示了如何设置 Django 来访问数据库。因为这是一个脚本而不是一个站点，所以如果我不需要的话，我真的不想深入研究 Django。

是否有任何类型的数据库可以在不使用 Django 的情况下使用 Python 在 Heroku 中连接？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-17T21:59:50.680

您可以从 Heroku 获取数据库，而无需您的应用程序使用 Django。为此：

```
heroku addons:add heroku-postgresql:dev 
```

如果您需要更大更专用的数据库，您可以在[Heroku Postgres查看计划](http://postgres.heroku.com/)

在您的 requirements.txt 中，您需要添加：

```
psycopg2 
```

然后您可以与它进行连接/交互，类似于以下内容：

```
import psycopg2
import os
import urlparse

urlparse.uses_netloc.append('postgres')
url = urlparse.urlparse(os.environ['DATABASE_URL'])

conn = psycopg2.connect("dbname=%s user=%s password=%s host=%s " % (url.path[1:], url.username, url.password, url.hostname))
cur = conn.cursor()

query = "SELECT ...."
cur.execute(query) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:44:43.410

我最近用 Flask 做了这个。（https://github.com/HexIce/flask-heroku-sqlalchemy）。

有几个问题：

1\. 如果您不使用 Django，您可能必须自己设置数据库，方法是：

```
heroku addons:add shared-database 
```

（或者无论您想使用哪个数据库，其他数据库都需要花钱。）

2\. 数据库 URL 存储在 Heroku 中的“DATABASE_URL”环境变量中。在python中，你可以通过做得到它。

```
dburl = os.environ['DATABASE_URL'] 
```

从那里连接到数据库的操作取决于您，一种选择是 SQLAlchemy。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T18:53:35.530

我会使用 MongoDB。Heroku 支持它，所以我认为它很容易启动和扩展：[https ://addons.heroku.com/mongohq](https://addons.heroku.com/mongohq)

关于 Python：MongoDB 是一个非常简单的数据库。该模式非常灵活，非常适合 Python 字典。这真是一件好事。

您可以使用[PyMongo](http://api.mongodb.org/python/current/)

```
from pymongo import Connection
connection = Connection()

# Get your DB
db = connection.my_database

# Get your collection
cars = db.cars

# Create some objects
import datetime
car = {"brand": "Ford",
       "model": "Mustang",
       "date": datetime.datetime.utcnow()}

# Insert it
cars.insert(car) 
```

很简单吧？

希望能帮助到你。

**编辑：**

正如 Endophage 所提到的，与 Mongo 交互的另一个不错的选择是[mongoengine](http://mongoengine.org/)。如果你有很多数据要存储，你应该看看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:37:05.957

创建一个独立的 Heroku Postgres 数据库。[http://postgres.heroku.com](http://postgres.heroku.com)

# sql - 为什么我的 SQL 查询返回带有 NULL 的行？它永远不应该返回带有 NULL 的行

> ID：10640533
> 
> 赞同：1
> 
> 时间：2012-05-17T17:29:17.940
> 
> 标签：sql

假设我有一个名为 AT_Devices 的 SQL 表，其中每条记录代表一个硬件。我有一个名为 AT_Event_History 的第二个表，它描述了硬件发生的“事件”。事件可以包括设备丢失、销毁、退役等。每个事件都有相应的状态码。

我编写了一些 SQL 来返回 AT_Devices 中每条记录的最新事件的代码。我有一个业务规则，如果设备没有记录事件，则状态码应为 0。

在这种情况下，我编写了我的 SQL 查询以返回 0，但由于某种原因，它返回 NULL。为什么？

```
SELECT atDeviceHistory.StatusCodeNotNull AS StatusCode0  
 FROM dbo.AT_Devices atd LEFT OUTER JOIN 
(
    SELECT DeviceID,
     ParentCode,
     (CASE WHEN (StatusCode IS NOT NULL) THEN StatusCode ELSE 0 END) AS  
     StatusCodeNotNull,  
     WhenEntered AS StatusDate
FROM AT_Event_History as A
WHERE A.ParentCode=0 
AND A.WhenEntered >= (SELECT MAX(WhenEntered) 
                      FROM AT_Event_History AS B 
                      WHERE A.DeviceID=B.DeviceID AND ParentCode=0)
 ) atDeviceHistory ON atd.DeviceID=atDeviceHistory.DeviceID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:33:48.390

由于您正在执行`left join`，如果没有匹配的记录，则将为引用`atDeviceHistory`列的任何内容返回空值。如果您不想返回不匹配的记录，请将其更改为`inner join`. 我还建议将您的案例陈述更改为`COALESCE`：

```
SELECT DeviceID,
     ParentCode,
     COALESCE(StatusCode ,0) AS StatusCodeNotNull,   
     WhenEntered AS StatusDate
FROM AT_Event_History as A 
```

更新：

尝试这个：

```
SELECT COALESCE(atDeviceHistory.StatusCode,0)  AS StatusCode0  
 FROM dbo.AT_Devices atd LEFT OUTER JOIN 
(
    SELECT DeviceID,
     ParentCode,
     StatusCode  
     WhenEntered AS StatusDate
FROM AT_Event_History as A
WHERE A.ParentCode=0 
AND A.WhenEntered >= (SELECT MAX(WhenEntered) 
                      FROM AT_Event_History AS B 
                      WHERE A.DeviceID=B.DeviceID AND ParentCode=0)
 ) atDeviceHistory ON atd.DeviceID=atDeviceHistory.DeviceID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:24:18.117

既然[@Abe Miessler 已经指出了](https://stackoverflow.com/a/10640608/297408)查询中放错位置的 NULL 检查，您实际上可以摆脱子选择并像这样重写整个查询：

```
SELECT
  COALESCE(h.StatusCode, 0) AS StatusCode0,
  … /* whatever other columns you might need */
FROM dbo.AT_Devices atd
  LEFT OUTER JOIN AT_Event_History h ON atd.DeviceID = h.DeviceID
    AND h.ParentCode = 0
    AND h.WhenEntered = (SELECT MAX(WhenEntered)
                         FROM AT_Event_history
                         WHERE DeviceID = a.DeviceID AND ParentCode = 0) 
```

# mips - 使用 mips 指令

> ID：10640534
> 
> 赞同：1
> 
> 时间：2012-05-17T17:29:20.530
> 
> 标签：mips

如果一个三十二位字可以表示一条 MIPS 指令。我们如何判断该指令的类型是 R、J 还是 I？

我很难理解这些概念，我认为操作码可能不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:30:35.130

基本上 MIPS 指令有一个存储在最高有效 6 位中的操作码，它指定以下位的格式。特别是，R 型指令的操作码始终为 000000（指令功能则由 6 个最低有效位进一步指定。

[MIPS指令编码](http://www.d.umn.edu/~gshute/spimsal/talref.html)

# ruby-on-rails - 如何从 Heroku 错误中获取 Rails Heroku 日志回溯

> ID：10640539
> 
> 赞同：5
> 
> 时间：2012-05-17T17:29:35.933
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, rubygems

我在 Heroku Bamboo 堆栈上使用 rails 3.2.3。我昨晚从我的日志中得到了这个错误，但无法准确诊断它发生的位置和原因。如何从我的 heroku 日志中获取错误的整个回溯？

```
app[web.2]: !! Unexpected error while processing request: can't modify frozen array
heroku[router]: Error H13 (Connection closed without response) -> GET 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:34:36.830

这不是您问题的直接答案，因为据我所知，您无法从日志文件中获得回溯。你得到你得到的。

但是，对于这种类型的错误捕获，我不能推荐足够的[空气制动。](http://airbrakeapp.com/pages/home)

# batch-file - 如何使用批处理从文件中的每一行中提取第一个字母？

> ID：10640540
> 
> 赞同：0
> 
> 时间：2012-05-17T17:29:38.173
> 
> 标签：batch-file

到目前为止，这是我的代码：

```
FOR /f %%G IN (temp.file) DO (
    echo %%G > temp
    first_char.exe temp > letter
    set /p myLetter =<letter
    echo %myLetter%
) 
```

`first_char.exe`将输入文件中的第一个字符打印到标准输出。

它打印：

```
ECHO is off.
ECHO is off.
ECHO is off.
ECHO is off.
ECHO is off.
ECHO is off. 
```

（因为我有 6 行文本`temp.file`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T17:45:12.970

我不明白为什么你需要一个`first_char`exe 文件来提取单个字符，一个简单的`var:~0,1`也应该可以工作。

你`ECHO is off.`的问题是扩展时间的问题`%myLetter%`。
它在解析完整的括号块时被扩展，此时`myLetter%`为空，因此你只有空行。

```
setlocal EnableDelayedExpansion
FOR /f %%G IN (temp.file) DO (
    set "var=%%G"
    set "myLetter=!var:~0,1!"
    echo !myLetter!
) 
```

# asp.net-mvc-3 - 更新记录时实体框架抛出错误

> ID：10640541
> 
> 赞同：0
> 
> 时间：2012-05-17T17:29:41.513
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

`Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries.`

我收到此错误，但我是唯一使用数据库的人。我正在使用带有 DBContext 的实体框架 4.1。

我正在更新我的记录，并且 SQL Profiler 显示正在发送一个队列。此问题的原因可能是什么？

帖子：

```
 [HttpPost]
  public ActionResult EditUser(User user)
  {                 
       uow.UserRepository.Update(user);
       uow.Save();
       return RedirectToAction("Index", "User");

  } 
```

在此通话中：

```
 public void Save()
  {
        _context.SaveChanges();
  } 
```

这是它的连接方式

```
 public virtual void Update(TEntity entityToUpdate)
  {
         dbSet.Attach(entityToUpdate);
        context.Entry(entityToUpdate).State = EntityState.Modified;
  } 
```

更新：

```
public class UnitOfWork : IDisposable
{
    private StudentSchedulingEntities _context = new StudentSchedulingEntities();
    private GenericRepository<User> userRepository;
    private GenericRepository<UserRole> userRoleRepository;
    private bool disposed = false;

    public GenericRepository<User> UserRepository
    {
        get
        {

            if (this.userRepository == null)
            {
                this.userRepository = new GenericRepository<User>(_context);
            }
            return userRepository;
        }
    }
    public GenericRepository<UserRole> UserRoleRepository
    {
        get
        {

            if (this.userRoleRepository == null)
            {
                this.userRoleRepository = new GenericRepository<UserRole>(_context);
            }
            return userRoleRepository;
        }
    }

    public void Save()
    {
        _context.SaveChanges();
    }
    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                _context.Dispose();
            }
        }
        this.disposed = true;
    }
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:30:38.067

必须有 ID 字段才能正确更新信息。否则，它将被抛出一个空值。（我忘了把ID的隐藏字段放进去）

# python - python中的这个ssl错误是什么意思？

> ID：10640546
> 
> 赞同：1
> 
> 时间：2012-05-17T17:30:29.177
> 
> 标签：python, ssl, ssl-certificate

我有以下简单的 python 代码，旨在执行 ssl 握手并验证客户端和服务器之间的证书：

**ssl_test.py：**

```
import ssl
import socket

s = socket.socket()
print "connecting..."
#logging.debug("Connecting")
# Connect with SSL mutual authentication
# We only trust our server's CA, and it only trusts user certificates signed by it
c = ssl.wrap_socket(s, cert_reqs=ssl.CERT_REQUIRED,
                    ssl_version=ssl.PROTOCOL_SSLv3, ca_certs='ca.crt',
                    certfile='user.crt', keyfile='user.key')
c.connect((constants.server_addr, constants.port)) 
```

当我执行此操作时，我收到以下错误。

```
>python ssl_test.py
Traceback (most recent call last):
  File "ssl_test.py", line 12, in <module>
    c.connect(('192.168.1.82', 7070))
  File "C:\Python27\lib\ssl.py", line 331, in connect
    self._real_connect(addr, False)
  File "C:\Python27\lib\ssl.py", line 314, in _real_connect
    self.ca_certs, self.ciphers)
ssl.SSLError: [Errno 0] _ssl.c:340: error:00000000:lib(0):func(0):reason(0) 
```

这个错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:37:31.850

这看起来像[http://bugs.python.org/issue2687](http://bugs.python.org/issue2687)，其中给出了以下答案：

> 不，问题出在客户端的“ca_certs”参数上。您不能使用目录。您必须使用包含多个级联证书的文件。我将加强文档以使其更清晰。

我看到你`ca_certs`是一个文件，而不是一个目录，但也许这仍然有一些启发。ca.crt 文件的格式是否正确且位置正确？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T00:39:54.157

我是 Python 新手，在搜索了原始的 ssl.SSLError 后，我最终走上了这条路。我知道这对原始海报没有帮助，但它可能会帮助其他人解决这个错误。大多数 Python 示例使用：

```
 ca_certs="/etc/ca_certs_file" 
```

由于此文件不存在，因此您会收到此错误。要在最新版本的 Linux 上使用系统 CA 证书，请使用：

```
 ca_certs="/etc/ssl/certs/ca-certificates.crt" 
```

# ruby - 在 Ruby 中，什么是 AboutClasses 类？

> ID：10640549
> 
> 赞同：1
> 
> 时间：2012-05-17T17:30:37.207
> 
> 标签：ruby

在 SO 和 Google 中搜索“ruby AboutClasses”都没有成功。

```
class Dog
end

fido = Dog.new
puts Dog.inspect
puts fido.inspect 
```

结果是

```
AboutClasses::Dog
#<AboutClasses::Dog:0x6255f0> 
```

你能解释一下吗：

*   术语`AboutClasses`是什么？
*   第二个结果中的符号`#<xxxxx>`。我知道这是一个实例，但为什么要放在它`#<>`周围呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T17:42:03.710

[搜索 GitHub](https://github.com/search?langOverride=&language=Ruby&q=aboutclasses&repo=&start_value=2&type=Code)会产生一堆包含 的 Ruby 源文件`require 'about_classes'`，它们都位于 ruby​​_koans 的分支中。

事实上，文件[about_classes.rb](https://github.com/edgecase/ruby_koans/blob/master/src/about_classes.rb)文件包含一个名为 fido 的 Dog 类，位于名为`AboutClasses`. 我猜你已经加载了这个类或正在执行它。

要回答您关于以下方面的具体问题`#<AboutClasses::Dog:0x6255f0>`：

1.  术语“AboutClasses”只是一个类或模块名。您可以嵌套它们，以便外部类或模块充当命名空间。这样，您的 Dog 类就不会与您加载的其他 gem 中的 Dog 类发生冲突。嵌套它们时，名称由 . 分隔`::`。

2.  符号`#<ClassName:MemoryAddress>`只是一个符号。井号和尖括号只是为了将它与其他所有内容区分开来。

# php - PHP Loop 为每个 10、20、30 等执行操作

> ID：10640551
> 
> 赞同：6
> 
> 时间：2012-05-17T17:30:40.767
> 
> 标签：php, loops, conditional-statements

在php中我有循环例如

```
for ($i = 0; $i <= 1000; $i++) {
   if ($i = 10 || $i == 20 || $i == 30 || $i == 40 || $i == 50 || $i == 60) {
      echo $i;
   }
} 
```

想象一下，我需要回显 $i 每`10,20,30,40,50,60,..970,980,990`应该有办法不在`if`语句中写 100 个条件。是否有一些合乎逻辑的方法来查看是否`$i`增加了 10 然后执行以下操作：

```
if ($i == $i+10) {
   ...
} 
```

PS如果可能的话我不想引入另一个变量来计算我需要找到解决方案只使用`$i`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-17T17:31:48.923

尝试：

```
if ($i % 10 == 0) 
```

只要您的索引完全可以被 10 整除，就会触发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T17:32:51.977

将你的 for 循环重写为：

```
for ($i = 0; $i <= 1000; $i+=10) { 
```

而且我不知道这样的逗号是否对您有用（如您最初的帖子中所示）：

```
for ($i = 0, $i <= 1000, $i++) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:33:41.573

跳过额外的循环：

```
for ($i = 10; $i <= 1000; $i=$i+10) {
  echo $i;
} 
```

或者，如果您仍想在以下之间循环每个数字：

```
for ($i = 0; $i <= 1000; $i++) {   
  if( $i % 10 === 0 ) {
      echo $i;
  }  
} 
```

[在这里测试](http://codepad.org/PD8IzoYV)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:33:35.830

把它放在你的主循环中。'%' 或 'mod' 给你 $i / 10 的余数。如果余数是 '0'，那么你想打印。

```
if(0 === ($i % 10)) {
   echo $i;
} 
```

# php - mysql-db 请求：如何获取 db-name 和 db-type 作为请求的输出

> ID：10640552
> 
> 赞同：-1
> 
> 时间：2012-05-17T17:30:45.440
> 
> 标签：php, mysql, linux, joomla, request

我有一个包含 60 多个表的 mysql 数据库。这是在我将 joomla 2.5.3 版从本地灯移植到网络服务器时构建的。

我运行一个 mysql-db：

移植过来后，我看到我无法登录 amdin 区域。好吧，这里可能发生了一些事情。我现在的问题是 - 我怎样才能提出要求 db-type 的 db-request...

```
Tabelle aufsteigend     Aktion  Zeilen  Typ     Kollation   Größe   Überhang
    oqlgu_assets    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     47  InnoDB  utf8_general_ci     64,0 KiB    -
    oqlgu_associations  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     32,0 KiB    -
    oqlgu_banners   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     96,0 KiB    -
    oqlgu_banner_clients    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_banner_tracks     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     64,0 KiB    -
    oqlgu_booklibrary   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     6   MyISAM  utf8_general_ci     15,3 KiB    -
    oqlgu_booklibrary_categories    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     10  MyISAM  utf8_general_ci     4,1 KiB     -
    oqlgu_booklibrary_lend  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   MyISAM  utf8_general_ci     1,0 KiB     -
    oqlgu_booklibrary_lend_request  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   MyISAM  utf8_general_ci     1,0 KiB     -
    oqlgu_booklibrary_main_categories   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     6   MyISAM  utf8_general_ci     5,5 KiB     -
    oqlgu_booklibrary_review    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     2   MyISAM  utf8_general_ci     4,1 KiB     -
    oqlgu_booklibrary_suggestion    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   MyISAM  utf8_general_ci     1,0 KiB     -
    oqlgu_booklibrary_version   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     1   MyISAM  utf8_general_ci     2,0 KiB     -
    oqlgu_categories    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     7   InnoDB  utf8_general_ci     128,0 KiB   -
    oqlgu_contact_details   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     144,0 KiB   -
    oqlgu_content   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     144,0 KiB   -
    oqlgu_content_frontpage     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_content_rating    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_core_log_searches     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_extensions    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     136     InnoDB  utf8_general_ci     176,0 KiB   -
    oqlgu_finder_filters    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_finder_links  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     112,0 KiB   -
    oqlgu_finder_links_terms0   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_terms1   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_terms2   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_terms3   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_terms4   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_terms5   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_terms6   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_terms7   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_terms8   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_terms9   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_termsa   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_termsb   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_termsc   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_termsd   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_termse   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_links_termsf   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_taxonomy   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     1   InnoDB  utf8_general_ci     96,0 KiB    -
    oqlgu_finder_taxonomy_map   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_terms  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     80,0 KiB    -
    oqlgu_finder_terms_common   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     115     InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_finder_tokens     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   MEMORY  utf8_general_ci     0 Bytes     -
    oqlgu_finder_tokens_aggregate   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   MEMORY  utf8_general_ci     0 Bytes     -
    oqlgu_finder_types  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     32,0 KiB    -
    oqlgu_jaem_log  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   MyISAM  utf8_general_ci     1,0 KiB     -
    oqlgu_jaem_services     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     2   MyISAM  utf8_general_ci     2,1 KiB     -
    oqlgu_languages     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     1   InnoDB  utf8_general_ci     80,0 KiB    -
    oqlgu_menu  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     38  InnoDB  utf8_general_ci     128,0 KiB   -
    oqlgu_menu_types    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     1   InnoDB  utf8_general_ci     32,0 KiB    -
    oqlgu_messages  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     32,0 KiB    -
    oqlgu_messages_cfg  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_modules   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     22  InnoDB  utf8_general_ci     64,0 KiB    -
    oqlgu_modules_menu  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     21  InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_newsfeeds     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     128,0 KiB   -
    oqlgu_overrider     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_redirect_links    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_schemas   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     1   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_session   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     2   InnoDB  utf8_general_ci     64,0 KiB    -
    oqlgu_template_styles   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     6   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_updates   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_update_categories     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_update_sites  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     3   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_update_sites_extensions   Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     4   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_usergroups    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     8   InnoDB  utf8_general_ci     80,0 KiB    -
    oqlgu_users     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     1   InnoDB  utf8_general_ci     96,0 KiB    -
    oqlgu_user_notes    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     48,0 KiB    -
    oqlgu_user_profiles     Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_user_usergroup_map    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     1   InnoDB  utf8_general_ci     16,0 KiB    -
    oqlgu_viewlevels    Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     3   InnoDB  utf8_general_ci     32,0 KiB    -
    oqlgu_weblinks  Anzeigen Anzeigen   Struktur Struktur   Suche Suche     Einfügen Einfügen   Leeren Leeren   Löschen Löschen     0   InnoDB  utf8_general_ci     144,0 KiB   - 
```

对于mysql-db：我想要以下输出-表名和db-type ...

这可行吗！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:41:30.627

试试这个查询：

```
SELECT TABLE_NAME, TABLE_TYPE, ENGINE FROM information_schema.tables WHERE TABLE_SCHEMA = 'yourDbName'; 
```

您必须使用您的数据库的真实名称更改**yourDbName**。

伟大的。

# sql - 引用 VB 项目中的解决方案项

> ID：10640553
> 
> 赞同：0
> 
> 时间：2012-05-17T17:30:48.440
> 
> 标签：sql, vb.net, visual-studio

我正在尝试做一些非常简单的事情。我已将一个项目添加到我的 Visual Studio VB .net 项目的“解决方案项目”文件夹中。该项目称为“ValidationQuery.sql”，我需要在我的代码中引用它。但是，我似乎无法弄清楚如何实际引用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:34:11.047

Sql 脚本不用于参考目的。sql 脚本在 sql server 中执行，它们在 sql server 中创建对象。

您只能在项目中引用 dll。

现在使用 ado.net 从 .net 代码访问数据库中的那些对象，即表、视图、sp。

# ios - 如何将文件夹中的图像列表上传到我的 xcode 项目中？

> ID：10640562
> 
> 赞同：0
> 
> 时间：2012-05-17T17:31:26.927
> 
> 标签：ios, xcode, image-processing, image-uploading

不确定是否可行，但听起来很合理。

我的桌面文件夹中有一个图像列表，我希望我的 Xcode 项目上传/导入。我可以动态地执行此操作，因为我将在不久的将来持续添加图像，而不必单独上传每张图像？谁能告诉我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:34:43.030

我会做一点不同：

1.  在 Xcode 中创建物理文件夹引用。这个文件夹应该是蓝色而不是黄色。
2.  从上面的文件夹创建一个别名并将其放在您的桌面上。
3.  当您将 imnages 文件放入桌面上的别名时，这些文件将自动显示在 Xcode 项目中。

# list - prolog - 提取信息

> ID：10640563
> 
> 赞同：1
> 
> 时间：2012-05-17T17:31:32.563
> 
> 标签：list, prolog

目前正在做一些 PROLOG 练习——对这一切都很陌生，所以请多多包涵。我有以下知识库：

```
/* The structure of a subject teaching team takes the form:
team(Subject, Leader, Non_management_staff, Deputy).
Non_management_staff is a (possibly empty) list of teacher
structures and excludes the teacher structures for Leader and
Deputy.
teacher structures take the form:
teacher(Surname, Initial,
profile(Years_teaching,Second_subject,Club_supervision)).
Assume that each teacher has his or her team's Subject as their
main subject. */

team(computer_science,teacher(may,j,profile(20,ict,model_railways)),
[teacher(clarke,j,profile(32,ict,car_maintenance))],
teacher(hamm,p,profile(11,ict,science_club))).

team(maths,teacher(vorderly,c,profile(25,computer_science,chess)),
[teacher(o_connell,d,profile(10,music,orchestra)),
teacher(brankin,p,profile(20,home_economics,cookery_club))],
teacher(lynas,d,profile(10,pe,football))).

team(english,teacher(brewster,f,profile(30,french,french_society)),
[ ],
teacher(flaxman,j,profile(35,drama,debating_society))).

team(art,teacher(lawless,m,profile(20,english,film_club)),
[teacher(walker,k,profile(25,english,debating_society)),
teacher(brankin,i,profile(20,home_economics,writing)),
teacher(boyson,r,profile(30,english,writing))],
teacher(carthy,m,profile(20,music,orchestra))).

subject(X):- team(X,_,_,_).
leader(X) :- team(_,X,_,_).
deputy(X) :- team(_,_,_,X).

non_management(X) :-
    team(_,_,Non_management,_),
    member(X,Non_management).

exists(X) :-
    subject(X);  
    leader(X);
    deputy(X);
    non_management(X). 
```

我现在要写一条规则，(q) 老师 A 和老师 B 的首字母，其中老师 A 和老师 B 在不同的学科组，每个人都以家政学作为第二个学科，每个人都姓 Brankin。

我被困在如何比较知识库中的所有实体上。在此之前，我只从单个实体（在本例中为单个教师）提取值。例如：

```
question1(Initial,Surname) :-
    exists(teacher(Surname,Initial,profile(_,english,_))). 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:57:38.687

您不需要显式比较知识库中的所有实体 - 这在 Prolog 回答查询的方式中是隐含的，无论它们是简单的还是复杂的。对于前几个标准，你可以说

```
team(W,X,Y,Z), team(J,K,L,I), W \= J. 
```

这将通过回溯为您提供不同团队的所有可能组合。您可以使用类似的东西扩展查询

```
member(A,Y), member(B,L), A=teacher(...), B=teacher(...) 
```

处理其他标准。

# python - Python ConfigParser 名称

> ID：10640564
> 
> 赞同：0
> 
> 时间：2012-05-17T17:31:32.713
> 
> 标签：python

> **可能重复：**
> [Python ConfigParser 问题](https://stackoverflow.com/questions/10654461/python-configparser-question)

ConfigParser 的配置文件是否必须命名为“Config.ini”才能工作？

我希望名称为“1Config.ini”，以便它出现在文件夹目录的顶部。

这是我目前拥有的

```
config = ConfigParser.ConfigParser()
config.read(Revision[0:Revision.rfind('\\')] + "\1Config.ini")
Type = config.get("myvars", "Type") 
```

但是，当文件和代码命名为“1Config.ini”时，我收到此错误

```
<class 'ConfigParser.NoSectionError'>: No section: 'myvars' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:33:35.963

您需要转义反斜杠：`"\\1Config.ini"`

发生的事情是解析器将 \1 解释为字符代码为 1 的字符的八进制常量。

另一种选择是将其设为原始字符串：`r"\1Config.ini"`

# python - 模型属性django中的简单乘法？

> ID：10640565
> 
> 赞同：1
> 
> 时间：2012-05-17T17:31:44.087
> 
> 标签：python, django

我正在尝试在此代码中设置属性阈值的默认值，阈值应为当前级别*50，这是模型

```
class Level (models.Model):
    name = models.CharField(max_length=20,null=True, blank=True)
    description = models.CharField(max_length=20, null=True, blank=True)
    number = models.IntegerField(null=True, blank=True)
    threshold = models.IntegerField(null=True, blank=True,default=50*number,editable=False) 
```

我收到一个错误`unsupported operand types for * : 'int' and 'IntegerField'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:35:02.980

你最好的办法是在保存对象的同时进行这样的计算。所以覆盖`Model.save`

或者更好的通用方法是编写自定义字段并覆盖[pre_save](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.pre_save)

```
class DependentIntegerField(models.IntegerField):

    def pre_save(self, model_instance, add):
        if not add: # set the default only while adding model
            return super(self, DependentIntegerField).pre_save(model_instance, add)

        return model_instance.number*50 
```

您可以进一步增强它并使其`DependentIntegerField`通用，以便您可以将 callable 传递给它并进行任何计算，并且您可以进行进一步的增强，例如在使用默认值之前检查用户是否设置了该值，并使其更通用以便您可以通过将字段类传递给工厂函数来将任何字段设为依赖字段。例如

```
from django.db import models

class_map = {}

def depends_field_pre_save(self, model_instance, add):
    """
    if default is not callable or it is not a model add, lets skip our hook
    """
    if not add or not callable(self.default):
        super(self.__class__, self).__init__(self,*args, **kwargs)
    value = self.default(model_instance)
    setattr(model_instance, self.attname, value)
    return value

def FieldDepends(field_class):
    """
    return a dervied class from field_class which supports dependent default
    """
    if field_class in class_map:
        # we already created this class so return that
        return class_map[field_class]

    new_class = type('Depends'+field_class.__name__, (field_class,), {'pre_save':depends_field_pre_save })

    class_map[field_class] = new_class

    return new_class 
```

并像这样使用它

```
class DependentModel(models.Model):

    def threshold_default(model_instance=None):
        if model_instance is None:
            return 10
        return model_instance.number*10

    number = models.IntegerField(null=True, blank=True, default=10)
    threshold = FieldDepends(models.IntegerField)(null=True, blank=True, default=threshold_default,editable=False) 
```

我创建了一个小型 django 项目[djangodepends](https://bitbucket.org/anuraguniyal/djangodepends/src) on bitbucket 和测试用例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:35:20.947

您可以覆盖保存方法来计算。

[https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-predefined-model-methods](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-predefined-model-methods)

```
class Level (models.Model):
    name = models.CharField(max_length=20,null=True, blank=True)
    description = models.CharField(max_length=20, null=True, blank=True)
    number = models.IntegerField(null=True, blank=True)
    threshold = models.IntegerField(null=True, blank=True ,editable=False)

    def save(self, *args, **kwargs):
        try:
          self.threshold = self.number * 50
        except TypeError:
          pass
        super(Level, self).save(*args, **kwargs) # Call the "real" save() method. 
```

# xml - 动作脚本选择标记名称上带有“:”符号的 XML 元素

> ID：10640569
> 
> 赞同：0
> 
> 时间：2012-05-17T17:31:49.003
> 
> 标签：xml, actionscript-3, flash

我正在使用 Livestream API，我需要获取一些带有所需频道信息的 XML，因此在使用 XML 对象读取 XML 值时遇到问题，因为标签中有“：”符号标签名称，如下所示：

```
<ls:isLive>true</ls:isLive> 
```

当我尝试像这样选择时，它显然会返回一个解析错误：

```
xmlData.ls:isLive 
```

然后我尝试了这种方式，但它返回了空值：

```
xmlData["ls:isLive"] 
```

如何通过标签名称选择此元素的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:54:35.243

您正在处理一个 xml 命名空间。在 xml 标头中应该是这样的定义

```
xmlns:ls='http://someuri/schema' 
```

您需要定义一个命名空间并使用该命名空间访问节点

我认为这篇文章会有所帮助： [xml 和命名空间](http://lab.revoke.ca/2009/05/as3-xml-namespace/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:12:04.127

假设您的 xml 如下所示：

```
var xml:XML = <root xmlns:ls="http://blabla.com">
                 <ls:isLive>true</ls:isLive>
              </root> 
```

要访问`isLive`标签，您需要声明[Namespace](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Namespace.html)：

```
var ls:Namespace = new Namespace("ls","http://blabla.com") ;
var isLiveTag:* = xml.ls::isLive; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:00:18.693

你确定是你要访问的内容吗？我尝试使用该标签，但 as3 给了我一个错误。

我认为您正在访问错误的元素名称。

名称应该短而简单，像这样：不是这样：。

避免使用“-”字符。如果您将某些东西命名为“名字”，某些软件可能会认为您想从名字中减去名字。

避免 ”。” 人物。如果您将某个东西命名为“first.name”，某些软件可能会认为“name”是对象“first”的属性。

避免使用“：”字符。冒号保留用于称为名称空间的东西（稍后会详细介绍）。

# paperclip - 如果密码有 attr_accessor，回形针不会保存附件

> ID：10640571
> 
> 赞同：0
> 
> 时间：2012-05-17T17:31:51.513
> 
> 标签：paperclip, attachment

我的项目：

```
 class User < ActiveRecord::Base
         attr_accessor :password 
         attr_accessible :email,
           :password, 
           :password_confirmation, 
           :first_name, 
           :last_name, 
           :birth_date, 
           :residence, 
           :user_role, 
           :show_email,
           :avatar

         as_attached_file :avatar, 
         :default_url => '/images/system/user_avatars/default/default_avatar.png',
         :url => "/public/images/system/user_avatars/:id_:style.:extension",
         :path => "/public/system/user_avatars/:id_:style.:extension"

         def update_profile(user_id, params) #params has :category and :user params
            @user = User.find(user_id)
            @user.update_attributes(params[:user])
            return params[:category]
         end
    end 
```

所以，从我的控制器我调用这个方法，我没有收到错误。回形针显示已保存的附件。数据库已更新，但图像文件未保存。我有一个从头开始的注册，所以我有“attr_accessor：password”

我检查了：

*   有 :multipart => true 的形式
*   在用户模型中有 attr_accessible :avatar

谁能给我一些线索，因为我想不通，为什么回形针不保存文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:07:04.550

设置`attr_accessible :avatar_file_name`为好，你还需要一个**paperclip.rb 初始化器**：

```
require "paperclip"  
Paperclip.options[:command_path] = "/ImageMagick" 
```

当然，还要安装 ImageMagick。

# php - 使用 cookie 进行语言切换，但仅在手动页面刷新后可见

> ID：10640572
> 
> 赞同：0
> 
> 时间：2012-05-17T17:31:51.743
> 
> 标签：php, codeigniter, cookies, codeigniter-2, multilingual

所以我使用语言检测/cookie方法来设置用户语言：

1.  用户到达页面
2.  检查用户是否设置了 cookie user_lang
3.  如果设置，使用该语言
4.  如果没有设置使用语言检测功能并设置cookie

语言切换：

1.  用户转到 /change/language/[languageshortcode]

2.  验证语言简码是否有效，删除/更改以前的 cookie 并使用新语言更新

3.  加载页面

问题是我可以看到 user_lang cookie 确实已经从例如 EN 更改为 FR 但实际的语言切换只有在我手动刷新页面时才会发生。

在我的本地设置上，更改是立即的，在我的远程服务器上，我必须刷新。

认为我已经改变了我认为导致此的原因：

*   禁用所有形式的页面缓存
*   使用 htaccess 禁用 Varnish Cache 服务器端
*   实际上删除 cookie 并设置一个新的，而不是仅仅更改 cookie

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:46:20.693

由于没有发布代码，我将仅提供一些想法。一种解决方案是添加 JS 页面重新加载，但前提是某些条件为真。然而，更好的解决方案是确保如果用户对语言进行了更改，则不要读取 cookie 来检测该页面加载的语言（因为在脚本完成之前它不会完全设置）。如果用户进行了更改，则使用用于设置 cookie 的值并忽略 cookie，如果未进行任何更改，则只需检测 cookie。那有意义吗？

# actionscript-3 - Citrus Engine Flash 游戏无法正确编译

> ID：10640580
> 
> 赞同：0
> 
> 时间：2012-05-17T17:32:26.737
> 
> 标签：actionscript-3, flash, flash-builder, box2d

我正在为一个 uni 项目开发基于 citrus 引擎的 flash 游戏。

所有这些都已完成并提交，但我试图将整个项目编译成 web 版本。

在flahs builder ive got file --> export --> release build 并编译了游戏。

.swf 文件可以正常打开并启动精灵菜单，但是当单击开始游戏按钮时，它开始启动游戏状态，但随后以纯色挂起，在 Flash 调试器中我收到这些错误

SecurityError：错误 #2000：没有活动的安全上下文。

开始类型错误：错误 #1009：无法访问空对象引用的属性或方法。在 com.citrusengine.utils::ObjectMaker$/FromMovieClip() 在 GameState/initialize() 在 com.citrusengine.core::CitrusEngine/handleEnterFrame() SecurityError: Error #2000: No active security context.

开始类型错误：错误 #1009：无法访问空对象引用的属性或方法。在 com.citrusengine.utils::ObjectMaker$/FromMovieClip() 在 GameState/initialize() 在 com.citrusengine.core::CitrusEngine/handleEnterFrame()

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:02:03.463

也许以下将解决您的问题：

将所有初始化代码包装到一个自定义函数中（比如说：initFunctionOfApplication）。在调用此初始化函数之前设置一个延迟计时器。这是我以前遇到过的一个问题，并且稍有延迟就解决了...也许这会解决您的问题。

```
setTimeout(function():void{initFunctionOfApplication();}, 3000); 
```

随时通知我们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:51:11.913

**错误 #2000**通常是文件未找到错误。您可以通过运行 IOErrorEvent 获得更多信息，如下所示：

```
myLoader.addEventListener(IOErrorEvent.IO_ERROR, IOError)

function IOError(e:IOErrorEvent):void {
    trace(e.text);
} 
```

可能是指向正确文件的路径问题。

**错误 #1009**可能是由于 IOError 而无法处理尚未加载的资产的多米诺骨牌效应。如果您将其他 SWF 加载到舞台并且这些子 SWF 尝试在舞台准备好之前使用它，这也可能是一个问题，在这种情况下，您只想在[`addedToStage`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#event%3aaddedToStage)事件触发之后才启动脚本。你可以这样设置：

```
if (this.parent is Stage) {
    stageReady();
} else {
    addEventListener("addedToStage", stageReady);
}

function stageReady(e:Event = null):void {
    // begin your setup code here.
} 
```

这里的逻辑是，如果您的 swf 没有封装在加载器中，则父对象应该是舞台，否则，您可以安全地向加载的 swf 的时间线添加一个侦听器来侦听[`addedToStage`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#event%3aaddedToStage)事件。

# xml - 映射/xslt 挑战 - 分组、键

> ID：10640584
> 
> 赞同：0
> 
> 时间：2012-05-17T17:32:37.973
> 
> 标签：xml, xslt, map, biztalk

我们有一些棘手的映射要求。我正在使用 BizTalk 映射器在 BizTalk 应用程序中将传入的 xml 从一种形式转换为另一种形式。该解决方案可以使用 XSLT 或内置 BizTalk functoids 来完成。

源架构看起来像这样：

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns="http://BizTalkTestProject.SourceSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://BizTalkTestProject.SourceSchema">
    <xs:element name="Coverages">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Coverage" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="Category" type="xs:string"/>
                            <xs:element name="BillingChargeType" type="xs:string"/>
                            <xs:element name="ASLCode" type="xs:string"/>
                            <xs:element name="EffectiveDate" type="xs:string"/>
                            <xs:element name="DeltaAmount" type="xs:string"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

目标架构如下所示：

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns="http://BizTalkTestProject.DestinationSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://BizTalkTestProject.DestinationSchema">
    <xs:element name="Categories" type="CategoriesType"/>
    <xs:complexType name="CategoriesType">
        <xs:sequence>
            <xs:element name="Premium" type="CommonElementsType" maxOccurs="unbounded"/>
            <xs:element name="Tax" type="CommonElementsType" maxOccurs="unbounded"/>
            <xs:element name="Fee" type="CommonElementsType" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="CommonElementsType">
        <xs:sequence>
            <xs:element name="CategoryDetail" type="CategoryDetailType" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="CategoryDetailType">
        <xs:sequence>
            <xs:element name="Type" type="xs:string"/>
            <xs:element name="AnnualStatementLine" type="xs:string"/>
            <xs:element name="Amount" type="xs:string"/>
            <xs:element name="ChangeEffectiveDate" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

传入的 xml 数据示例：

```
 <ns0:Coverages xmlns:ns0="http://BizTalkTestProject.SourceSchema">
    <Coverage>
        <Category>premium</Category>
        <BillingChargeType>premium BillingChargeType 2</BillingChargeType>
        <ASLCode>premium ASLCode 2</ASLCode>
        <EffectiveDate>2002-02-02</EffectiveDate>
        <DeltaAmount>22.00</DeltaAmount>
    </Coverage>
    <Coverage>
        <Category>premium</Category>
        <BillingChargeType>premium BillingChargeType 1</BillingChargeType>
        <ASLCode>premium ASLCode 1</ASLCode>
        <EffectiveDate>2001-01-01</EffectiveDate>
        <DeltaAmount>11.00</DeltaAmount>
    </Coverage>
    <Coverage>
        <Category>premium</Category>
        <BillingChargeType>premium BillingChargeType 1</BillingChargeType>
        <ASLCode>premium ASLCode 2</ASLCode>
        <EffectiveDate>2001-01-01</EffectiveDate>
        <DeltaAmount>121.00</DeltaAmount>
    </Coverage>
    <Coverage>
        <Category>premium</Category>
        <BillingChargeType>premium BillingChargeType 1</BillingChargeType>
        <ASLCode>premium ASLCode 1</ASLCode>
        <EffectiveDate>2002-02-02</EffectiveDate>
        <DeltaAmount>112.00</DeltaAmount>
    </Coverage>
    <Coverage>
        <Category>premium</Category>
        <BillingChargeType>premium BillingChargeType 3</BillingChargeType>
        <ASLCode>premium ASLCode 3</ASLCode>
        <EffectiveDate>2003-03-03</EffectiveDate>
        <DeltaAmount>33.00</DeltaAmount>
    </Coverage>
    <Coverage>
        <Category>premium</Category>
        <BillingChargeType>premium BillingChargeType 1</BillingChargeType>
        <ASLCode>premium ASLCode 1</ASLCode>
        <EffectiveDate>2001-01-01</EffectiveDate>
        <DeltaAmount>5.00</DeltaAmount>
    </Coverage>
    <Coverage>
        <Category>tax</Category>
        <BillingChargeType>tax BillingChargeType 4</BillingChargeType>
        <ASLCode>tax ASLCode 4</ASLCode>
        <EffectiveDate>2004-04-04</EffectiveDate>
        <DeltaAmount>44.00</DeltaAmount>
    </Coverage>
    <Coverage>
        <Category>tax</Category>
        <BillingChargeType>tax BillingChargeType 5</BillingChargeType>
        <ASLCode>tax ASLCode 5</ASLCode>
        <EffectiveDate>2005-05-05</EffectiveDate>
        <DeltaAmount>55.00</DeltaAmount>
    </Coverage>
    <Coverage>
        <Category>fee</Category>
        <BillingChargeType>fee BillingChargeType 6</BillingChargeType>
        <ASLCode>fee ASLCode 6</ASLCode>
        <EffectiveDate>2006-06-06</EffectiveDate>
        <DeltaAmount>66.00</DeltaAmount>
    </Coverage>
</ns0:Coverages> 
```

预期的输出 xml 应如下所示：

```
 <ns0:Categories xmlns:ns0="http://BizTalkTestProject.DestinationSchema">
    <Premium>
        <CategoryDetail>
            <Type>premium BillingChargeType 2</Type>
            <AnnualStatementLine>premium ASLCode 2</AnnualStatementLine>
            <Amount>22.00</Amount>
            <ChangeEffectiveDate>2002-02-02</ChangeEffectiveDate>
        </CategoryDetail>
        <CategoryDetail>
            <Type>premium BillingChargeType 1</Type>
            <AnnualStatementLine>premium ASLCode 1</AnnualStatementLine>
            <Amount>16.00</Amount>
            <ChangeEffectiveDate>2001-01-01</ChangeEffectiveDate>
        </CategoryDetail>
        <CategoryDetail>
            <Type>premium BillingChargeType 1</Type>
            <AnnualStatementLine>premium ASLCode 2</AnnualStatementLine>
            <Amount>121.11</Amount>
            <ChangeEffectiveDate>2001-01-01</ChangeEffectiveDate>
        </CategoryDetail>
        <CategoryDetail>
            <Type>premium BillingChargeType 1</Type>
            <AnnualStatementLine>premium ASLCode 1</AnnualStatementLine>
            <Amount>112.22</Amount>
            <ChangeEffectiveDate>2002-02-02</ChangeEffectiveDate>
        </CategoryDetail>
        <CategoryDetail>
            <Type>premium BillingChargeType 3</Type>
            <AnnualStatementLine>premium ASLCode 3</AnnualStatementLine>
            <Amount>33.00</Amount>
            <ChangeEffectiveDate>2003-03-03</ChangeEffectiveDate>
        </CategoryDetail>
    </Premium>
    <Tax>
        <CategoryDetail>
            <Type>tax BillingChargeType 4</Type>
            <AnnualStatementLine>tax ASLCode 4</AnnualStatementLine>
            <Amount>44.00</Amount>
            <ChangeEffectiveDate>2004-04-04</ChangeEffectiveDate>
        </CategoryDetail>
        <CategoryDetail>
            <Type>tax BillingChargeType 5</Type>
            <AnnualStatementLine>tax ASLCode 5</AnnualStatementLine>
            <Amount>55.00</Amount>
            <ChangeEffectiveDate>2005-05-05</ChangeEffectiveDate>
        </CategoryDetail>
    </Tax>
    <Fee>
        <CategoryDetail>
            <Type>fee BillingChargeType 6</Type>
            <AnnualStatementLine>fee ASLCode 6</AnnualStatementLine>
            <Amount>66.00</Amount>
            <ChangeEffectiveDate>2006-06-06</ChangeEffectiveDate>
        </CategoryDetail>
    </Fee>
</ns0:Categories> 
```

映射要求是： 1\. 如果源 xml 中的 Category 元素具有值“Premium”，那么它应该映射到 Categories/Premium 下的目标。2\. 如果源 xml 中的 Category 元素具有值“Tax”，那么它应该映射到 Categories/Tax 下的目标。3\. 如果源 xml 中的 Category 元素具有值“Fee”，那么它应该映射到 Categories/Fee 下的目标。4\. 输出应仅具有按类别、BillingChargeType、ALSCode 和 EffectiveDate 不同的记录集。5\. 输出应具有目标节点“Amount”中源节点“DeltaAmount”按类别、BillingChargeType、ALSCode 和 EffectiveDate 的聚合值

在示例 xml 中，我包含了“Premium”节点的聚合示例，例如。

```
<BillingChargeType>premium BillingChargeType 1</BillingChargeType>
<ASLCode>premium ASLCode 1</ASLCode>
<EffectiveDate>2001-01-01</EffectiveDate> 
```

以上 3 个节点有两个 Coverage 记录集。这两者的区别是

```
<DeltaAmount>11.00</DeltaAmount> and <DeltaAmount>5.00</DeltaAmount> 
```

在预期的输出中，您将看到只有一个被映射为 DeltaAmount 节点 = 16。

我尝试在 xslt 中使用 key、distinct 和 generate-id 以及 apply-templates 和 for-each 循环进行映射，但没有得到我们想要的结果。所以我在这里寻求你的帮助。如果您需要更多信息，请告诉我。

感谢您查看此内容，感谢您的所有帮助！穆昆德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:30:29.633

如果有人感兴趣，下面是答案的副本，我是从其他线程上的某个人那里得到的。

```
<?xml version="1.0" encoding="utf-8"?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
 xmlns:ns0="http://BizTalkTestProject.SourceSchema">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="group" match="/ns0:Coverages/Coverage" use="concat(BillingChargeType,Category,ASLCode,EffectiveDate)"/>  
   <xsl:template match="/ns0:Coverages">
     <ns0:Categories xmlns:ns0="http://BizTalkTestProject.DestinationSchema">      
       <xsl:for-each select="Coverage[count(. | key('group', concat(BillingChargeType, Category,ASLCode,EffectiveDate))[1]) = 1]">
         <xsl:choose>
           <xsl:when test="./Category ='premium'">
               <ns0:Premium>
                 <ns0:CategoryDetail>
                   <Type>
                     <xsl:value-of select="./BillingChargeType"/>
                   </Type>
                   <AnnualStatementLine>
                     <xsl:value-of select="./ASLCode"/>
                   </AnnualStatementLine>
                   <Amount>
                     <xsl:value-of select="format-number(sum(key('group', concat(BillingChargeType, Category,ASLCode,EffectiveDate))/DeltaAmount),'#,###.00')"/>
                   </Amount>
                   <ChangeEffectiveDate>
                     <xsl:value-of select="./EffectiveDate"/>
                   </ChangeEffectiveDate>

                </ns0:CategoryDetail>
               </ns0:Premium>            
           </xsl:when>
           <xsl:when test="./Category ='tax'">            
               <Tax>
                 <CategoryDetail>

                  <Type>
                     <xsl:value-of select="./BillingChargeType"/>
                   </Type>
                   <AnnualStatementLine>
                     <xsl:value-of select="./ASLCode"/>
                   </AnnualStatementLine>
                   <Amount>
                     <xsl:value-of select="format-number(sum(key('group', concat(BillingChargeType, Category,ASLCode,EffectiveDate))/DeltaAmount),'#,###.00')"/>
                   </Amount>
                   <ChangeEffectiveDate>
                     <xsl:value-of select="./EffectiveDate"/>
                   </ChangeEffectiveDate>

                </CategoryDetail>
               </Tax>

          </xsl:when>
           <xsl:when test="./Category ='fee'">            
               <fee>
                 <CategoryDetail>

                  <Type>
                     <xsl:value-of select="./BillingChargeType"/>
                   </Type>
                   <AnnualStatementLine>
                     <xsl:value-of select="./ASLCode"/>
                   </AnnualStatementLine>
                   <Amount>
                     <xsl:value-of select="format-number(sum(key('group', concat(BillingChargeType, Category,ASLCode,EffectiveDate))/DeltaAmount),'#,###.00')"/>
                   </Amount>
                   <ChangeEffectiveDate>
                     <xsl:value-of select="./EffectiveDate"/>
                   </ChangeEffectiveDate>
                 </CategoryDetail>
               </fee>            
           </xsl:when>
         </xsl:choose>
       </xsl:for-each>
     </ns0:Categories>
   </xsl:template>
 </xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:11:29.207

您可以在映射中使用全局变量，在方法上方的脚本 functoid 中声明列表或数组。您可以使用它来跟踪您已经映射的类别。

该方法将返回一个布尔值，您可以将其连接到输出节点溢价和税金。它接受类别，检查集合，如果找到返回false，否则添加它并返回true。

```
System.Collections.Generic.List<string> categories;

public string AddToArray(string cat)
{
    if (categories == null)
    {
        categories = new System.Collections.Generic.List<string>();
    }

    if(!categories.Contains(cat))
    {
        categories.Add(cat);
        return true;
    }

    return false;
 } 
```

# javascript - 带有 php 网站的“iPad app lookAndFeel”

> ID：10640587
> 
> 赞同：0
> 
> 时间：2012-05-17T17:32:41.683
> 
> 标签：javascript

我正在用 php 构建一个可以用作 ipad 应用程序的网站。当您将网站放入 ipad 的启动窗口时，您会收到一种“假”应用程序。我使用此脚本在同一窗口中打开链接，因为当您不使用此脚本时，Safari 将打开一个新选项卡。

```
<script type="application/javascript">
$(document).ready(function() {
    $('a').click(function(event) {
        event.preventDefault();
        window.location.assign($(this).attr('href'));
    });
});
</script> 
```

这适用于我在 html 中生成的所有 a href，例如`<a href="....">...</a>`. 但是对于我在 php 中的链接`echo "<a href='....'>" . "'....'" . "</a>"`，它不起作用。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T01:10:04.020

（原始海报的答案从他的问题移到了这里的答案。）

> 通过在脚本段落上方添加以下代码解决了问题：
> 
> ```
> <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
> ```

# jquery - 如何用另一个 div 包装一个 div - jQuery Wrap

> ID：10640592
> 
> 赞同：1
> 
> 时间：2012-05-17T17:32:58.653
> 
> 标签：jquery, html, css, css-position

完整编辑：

如何用另一个 div 包装一个 jquery div？

示例：有

```
 this.vpath = $('<div/>', {
        'class': 'rollbar-path-vertical'
    }); 
```

在一个 jquery 脚本中...

现在我尝试使用它：

```
$('.rollbar-path-vertical').wrapAll('<div class="path-fix" />'); 
```

使 .rollbar-path-vertical 在另一个名为 .path-fix 的 div 内...我做错了什么？我快疯了...感谢您的紧张和时间。

CSS：

```
 .path-fix {
    position: absolute;
    width: 15px;
}

.rollbar-path-vertical {
    right: 5px;
    top: 0px;
    height: 100%;
    width: 15px;
    position: fixed;
    margin: 8px -5px;
    border-radius: 0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:31:19.743

编辑：

尝试从**.path-fix**中删除绝对位置，看看这是否能让你更接近。

```
.path-fix {
    width:15px;
} 
```

# javascript - JavaScript 变量赋值？

> ID：10640595
> 
> 赞同：2
> 
> 时间：2012-05-17T17:33:13.850
> 
> 标签：javascript, pointers, reference

看看下面的代码，有人能解释一下值是如何在 JavaScript 中传递的吗？

```
function loadImages() {
  for(var sec in images) {
    theme = images[sec];
      for(var tsec in theme) {
        theme[tsec].img = new Image();
        theme[tsec].img.src = 'images/'+theme[tsec].src+'.png';
      }
  }
} 
```

然后在另一个函数中：

```
function definitionToSpriteDataMapping() {
  var result = {};
  for(var definition in blocks) {
    var sprite = blocks[definition].sprite;
    for(var secnm in images) {
      section = images[secnm];
      for(var spritenm in section) {
        if(sprite == spritenm) {
          result[definition] = {};
          result[definition].img = section.img;
        }
      }
    }
  }
  return result;
} 
```

为了简单起见，我删掉了一些代码，但它仍然很复杂。基本上有 2 个对象（图像和块）是嵌套的键：值对。在第一块代码中

```
theme = images[sec]; 
theme[tsec].img.src = 'images/'+theme[tsec].src+'.png'; 
```

在第二行代码中有

```
section = images[secnm];
result[definition] = {};
result[definition].img = section.img; 
```

在将 .img 添加到“主题”的第一个代码块之前，“图像”中没有 .img。但这似乎反映在第二个代码块中的“图像”中。所有对象都像 JavaScript 中的指针吗？“结果”与“块”的关系是否与“主题”与“图像”的关系相同？如果我从“主题”中删除一个元素，那会反映在“图像”中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:44:56.640

使用`theme = images[sec]`你确实会在内存中创建一个指向该对象的指针。因此，添加`img`到`theme`对象也将添加`img`到该图像，因为它们是同一个对象。所以是的，同样适用于`result`.
更改、添加或删除以这种方式引用的对象的属性将影响实际对象。数组也是如此。

如果您不喜欢这种行为，则应该克隆该对象。您可以通过复制所有属性来克隆一个简单的对象：

```
var original = { name: "James", age: 73, male: true };
var clone = { };
for( var k in original )
    clone[ k ] = original[ k ]; 
```

但是，如果它的任何属性`original`是数组或对象本身，它将是一个引用。如果您没有任何对象或数组作为属性，那么上面的代码片段就可以了。否则，您应该编写一个克隆函数并递归地克隆原始的每个成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:37:00.330

> 所有对象都像 JavaScript 中的指针吗？

实际上，是的，尽管我相信更普遍的说法是，在 JavaScript 中，对象是一种“引用类型”。

如果`var a`引用一个对象，并`a`分配给`var b`，`b`将获得一个引用的副本`a`，因此`a`和`b`都将引用内存中的相同对象数据。

从参考中做出的更改可以从`a`参考中观察到`b`。

请注意，这仍然是“按值”赋值，但复制的值是引用的值，而不是对象本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:39:13.020

您遇到这种情况的原因是对象是通过引用传递的。有很多方法可以克隆对象。看看其他 SO 帖子[如何正确克隆 JavaScript 对象？](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T17:40:02.753

你`images[sec][tsec]`在这两种情况下都在改变，它指的是内存中的同一个对象。只是做`theme = images[sec]`不会复制对象。

这种行为的一个更简单的例子是：

```
var obj = {};
var obj2 = obj;

obj.a = 123;
obj2.a; // 123 
```

# .htaccess - .htaccess 中的标头集 Access-Control-Allow-Origin 不起作用

> ID：10640596
> 
> 赞同：93
> 
> 时间：2012-05-17T17:33:17.333
> 
> 标签：.htaccess, mod-rewrite, rewrite, cors

我无法弄清楚为什么我的`.htaccess`标题设置不起作用。

我的`.htaccess`文件内容：

```
Header set Access-Control-Allow-Origin *
Header always set Access-Control-Allow-Methods "POST, GET, OPTIONS, DELETE, PUT"
Header always set Access-Control-Allow-Headers "*"
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L] 
```

但是当我删除`Header`并添加它们时，`index.php`一切正常。

```
header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Methods: PUT, GET, POST, DELETE, OPTIONS");
header("Access-Control-Allow-Headers: *"); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-07-27T16:19:45.147

这应该有效：

```
Header add Access-Control-Allow-Origin "*"
Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS" 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-01-10T04:36:25.240

只是为了记录，我遇到了完全相同的问题，但没有一个答案有效。

我使用了标题检查器工具：[http ://www.webconfs.com/http-header-check.php](http://www.webconfs.com/http-header-check.php)

我正在使用我的 IP ( `http://192.0.2.1/upload`) 进行测试，结果如下：

```
HTTP/1.1 301 Moved Permanently => 
Date => Sat, 10 Jan 2015 04:03:35 GMT
Server => Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1
Location => http://192.0.2.1/upload/
Content-Length => 380
Connection => close
Content-Type => text/html; charset=iso-8859-1 
```

发生了重定向，并且 AJAX 请求不支持/遵循重定向。

**原来是域末尾缺少的**斜杠（[http://192.0.2.1/upload/](http://192.0.2.1/upload) **）**

我最后用斜线再次测试，我在下面得到了这个。在脚本中也添加了一个斜杠，它现在可以工作了。

```
HTTP/1.1 200 OK => 
Date => Sat, 10 Jan 2015 04:03:53 GMT
Server => Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1
X-Powered-By => PHP/5.3.8
Access-Control-Allow-Origin => *
Access-Control-Allow-Methods => PUT, GET, POST, DELETE, OPTIONS
Access-Control-Allow-Headers => *
Content-Length => 1435
Connection => close
Content-Type => text/html 
```

使用此工具测试您的标头是否良好并排除正在发生的问题。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-05-02T15:54:21.237

我在 GoDaddy 上有一个共享主机。我也需要这个问题的答案，经过四处搜索后，我发现这是可能的。

我编写了一个 .htaccess 文件，将它放在与我的操作页面相同的文件夹中。以下是 .htaccess 文件的内容：

```
Header add Access-Control-Allow-Origin "*"
Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS" 
```

这是我的ajax调用：

```
 $.ajax({
        url: 'http://www.mydomain.com/myactionpagefolder/gbactionpage.php',  //server script to process data
        type: 'POST',
        xhr: function() {  // custom xhr
            myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // check if upload property exists
                myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
            }
            return myXhr;
        },
        //Ajax events
        beforeSend: beforeSendHandler,
        success: completeHandler,
        error: errorHandler,
        // Form data
        data: formData,
        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false,
        processData: false
    }); 
```

请参阅这篇文章以供参考：

[.htaccess 中的标头集 Access-Control-Allow-Origin 不起作用](https://stackoverflow.com/questions/10640596/header-set-access-control-allow-origin-in-htaccess-doesnt-work)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-10-07T08:55:24.590

小心：

```
 Header add Access-Control-Allow-Origin "*" 
```

授予所有人访问权限根本不明智。最好只允许一个已知受信任主机的列表...

```
Header add Access-Control-Allow-Origin "http://aaa.example"
Header add Access-Control-Allow-Origin "http://bbb.example"
Header add Access-Control-Allow-Origin "http://ccc.example" 
```

问候，

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-12-10T04:32:49.287

我激活了 Apache 模块头 a2enmod 头，问题已经解决。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-11-03T08:18:08.103

在外部根文件夹的 .htaccess 中试试这个

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule> 
```

这样做时要小心`Header add Access-Control-Allow-Origin "*"`授予所有人访问权限根本不明智。我认为你应该用户：

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "http://example.com"
</IfModule> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-12-14T00:32:01.650

我 +1 了 Miro 对标头检查器网站[http://www.webconfs.com/http-header-check.php](http://www.webconfs.com/http-header-check.php)的链接的回答。每次使用时它都会弹出一个令人讨厌的广告，但它对于验证 Access-Control-Allow-Origin 标头的存在非常有用。

我正在从我的网页上的 javascript 读取 .json 文件。我发现在 .htaccess 文件中添加以下内容可以解决在 IE 11（版本 11.447.14393.0）中查看我的网页时出现的问题：

```
<FilesMatch "\.(json)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

我还在 /etc/httpd.conf（Apache 的配置文件）中添加了以下内容：

```
AllowOverride All 
```

标头检查器站点验证现在正在发送 Access-Control-Allow-Origin 标头（感谢 Miro！）。

但是，Firefox 50.0.2、Opera 41.0.2353.69 和 Edge 38.14393.0.0 无论如何都会获取文件，即使**没有**Access-Control-Allow-Origin 标头。（注意：他们可能正在检查 IP 地址，因为我使用的两个域都托管在同一个服务器上，位于同一个 IPv4 地址。）

但是，Chrome 54.0.2840.99 m（64 位）忽略 Access-Control-Allow-Origin 标头并且无论如何都会失败，错误地报告：

> 请求的资源上不存在“Access-Control-Allow-Origin”标头。因此不允许访问源“ *{mydomain} ”。*

我认为这必须是某种“第一”。IE 工作正常；Chrome、Firefox、Opera 和 Edge 都有 bug；而 Chrome 是**最差**的。这不是与通常情况完全相反吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-06T17:56:21.067

花了半天没有工作后。尽管一切正常，但使用标头检查服务。工作中的防火墙正在剥离它们

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-10T05:18:57.010

尝试这个：

```
<IfModule mod_headers.c>
     Header set Access-Control-Allow-Credentials true
     Header set Access-Control-Allow-Origin "your domain"
     Header set Access-Control-Allow-Headers "X-Requested-With"
</IfModule> 
```

最好允许一个已知受信任主机的列表。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-26T18:44:45.227

如果其他人正在尝试这个，那么最受好评的答案应该有效。但是，如果您遇到问题，则可能是浏览器缓存了请求。确认附加查询字符串。

# grails - 在 Grails 中，我如何判断一个对象是否是瞬态的？

> ID：10640597
> 
> 赞同：3
> 
> 时间：2012-05-17T17:33:19.733
> 
> 标签：grails, groovy

我在 Grails 中有一段代码：

```
def product = Product.get(5) ?: new Product()
product.isDiscounted = product.isDiscounted ?: true 
```

问题是，如果`isDiscounted`已经为现有产品设置了属性并且它是假的，我最终会将其更改为真。是否可以检查对象是否是瞬态的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:57:55.467

在这种情况下，使用属性`Boolean`代替`boolean`，那么初始值将是`null`而不是默认为`false`。这也将有助于验证，因为您可以验证选择`false`是有意的，而不仅仅是允许默认值。

一般来说，尽管您可以使用该`isAttached()`方法（或属性样式变体`attached`），例如

```
def product = Product.get(5) ?: new Product()
product.isDiscounted = product.attached ? product.isDiscounted ? true 
```

这种情况实际上可以使用构造函数中的默认值更紧凑地完成：

```
def product = Product.get(5) ?: new Product(discounted: true) 
```

# silverlight - 为 Windows 8/Windows Phone 8 (Apollo)/Windows Phone 7 开发 - WinRT (JavaScript) 与 Silverlight (C#)

> ID：10640599
> 
> 赞同：-2
> 
> 时间：2012-05-17T17:33:26.550
> 
> 标签：silverlight, windows-phone-7, windows-8, windows-runtime

我正在寻找合适的技术来启动适用于平板电脑的**Metro Windows 8应用程序。**问题是应用程序也应该在**WP7**上运行，并且将来在**WP8** (Apollo) 上运行。

我的假设是：

• Silverlight 可能已死（甚至在 Windows 8 中仍受支持）

• 我认为 WP8 (Apollo) 不支持 Silverlight

• 即使 WP8 仍然支持 Silverlight，我只是不想使用过时的技术……</p>

• WP7 将不允许升级到 WP8

对于 Windows 8 Metro 风格的应用程序，唯一相关的选择似乎是 HTML/JavaScript，甚至有可能在 WinRT 之上使用 C#/C++。

我认为这是未来的选择，即使这意味着在 Windows 8 和 Apollo 中使用 HTML 开发应用程序两次，在 WP7 中使用 C#/Silverlight 开发应用程序一次。

还有其他提示和建议吗？

非常感谢斯滕

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:09:03.880

仅仅因为 SL5 是计划中的最后一个版本，并不意味着它会很快消亡。你仍然可以用它完成很多工作，它应该被视为你战略的一部分。

C#/XAML（具有许多类似 WPF 的功能，如 Binding、MVVM 等）是 Windows 8 Metro 应用程序支持的平台：[使用 C# 创建您的第一个 Metro 风格应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)

使用 C# 可以跨平台进行更加统一的工作。由于您已经在构建 Metro 应用程序，并且在 Windows Phone 7 / 8 上使用相同（或相似）的应用程序，您将不得不在项目中保持一些差异；如果您决定使用 HTML5 / Javascript，这不会改变 - 除非您计划让该应用程序不利用任何 Metro App 功能，并希望通过 WinRT 对整个事物进行调整。

# jquery - 如何将 jQuery 滑块拉伸到其内容

> ID：10640600
> 
> 赞同：0
> 
> 时间：2012-05-17T17:33:27.577
> 
> 标签：jquery, html, css

我想将 jQuery 滑块拉伸到其内容。

```
<div id="slider">1 2 3 4 5 6 7 8 9 10 </div>​ 
```

.

```
$("#slider").slider({ max:10,});​ 
```

.

```
#slider
{
margin:20px;
max-width:400px; 
}​​​​​​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/U2e77/](http://jsfiddle.net/U2e77/)

只有当我添加 display:table-cell; 对于滑块类，我得到了所需的行为，但它在 Firefox 中不起作用，并且看起来不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:37:50.030

`display:inline`做了和 一样的结果`display:table-cell`，这是你想要的吗？

编辑

如果您需要它表现得像块元素，请使用`display: inline-block`

# java - 删除 Java ArrayList 中的重复对象会导致并发修改错误

> ID：10640604
> 
> 赞同：2
> 
> 时间：2012-05-17T17:33:43.823
> 
> 标签：java, android, listview, arraylist

> **可能重复：**
> [并发修改异常：添加到 ArrayList](https://stackoverflow.com/questions/6866238/concurrent-modification-exception-adding-to-an-arraylist)

我正在尝试使用此方法从数组列表中删除重复值：

```
 public void hasDuplicates(List<Artifact> p_cars) {
    final List<String> usedNames = new ArrayList<String>();
    for (Artifact car : p_cars) {
        final String name = car.getObjectId();

        if (usedNames.contains(name)) {
            p_cars.remove(car);

        }

        usedNames.add(name);
    }

} 
```

如何在不同时修改数组列表的情况下删除这些重复值？

如果这有助于上下文，我正在填充列表视图的数组列表上执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T17:39:54.017

迭代集合时不能修改集合。唯一的例外是使用迭代器的 remove 方法：

```
 public void hasDuplicates(List<Artifact> p_cars) {
    final List<String> usedNames = new ArrayList<String>();
    Iterator<Artifact> it = p_cars.iterator();
    while (it.hasNext()) {
        Artifact car = it.next();
        final String name = car.getObjectId();

        if (usedNames.contains(name)) {
            it.remove();

        } else {
            usedNames.add(name);
        }
    }

} 
```

# jquery - 当重复选中/取消选中复选框时，如何使用 jQuery 触发事件？

> ID：10640607
> 
> 赞同：0
> 
> 时间：2012-05-17T17:33:45.790
> 
> 标签：jquery

> **可能重复：**
> [如何防止默认复选框事件覆盖我的 jQuery 选中/取消选中函数？](https://stackoverflow.com/questions/10663432/how-do-i-prevent-default-checkbox-event-from-overriding-my-jquery-check-uncheck)

我已经知道如何在用户选中复选框时触发事件。但是，如果他们取消选中同一个复选框，我想触发一个事件。基本上，我希望能够选中复选框，触发一个事件，然后如果我取消选中同一个复选框，它应该触发另一个事件。我希望能够检查它，然后立即取消选中它并让它触发另一个事件。这是我的代码：

```
$('#myID').click(function() {

    var isChecked = $('#myID').is(':checked');

    if(isChecked)
    {
        $('#myField').replaceWith('Something');
    }
    else
    {
        $('#myField').replaceWith('Something Else');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:37:30.757

```
$('#myID').click(function() {
  var isChecked = this.checked; // this.checked is enough or $(this).is(':checked')
  if(isChecked) {
        $('#myField').replaceWith('Something');
    } else {
        $('#myField').replaceWith('Something Else');
    }
}); 
```

**注意：**一个想法应该记住，当一个 use `$('#myField').replaceWith()`， then`#myField`将从 DOM 中删除，所以下一次你不能抓住它， next`replaceWith()`会失败。

**[演示](http://jsfiddle.net/thecodeparadox/urnkt/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:04:11.353

我认为您正在寻找 jquery 的触发事件，因此请使用

```
<script>
        $('#btn1').trigger('click');

        $('#btn1').click(function(){
            // do something
        });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:37:43.743

您可以使用类将检查事件标记回复选框

```
$('#myID').click(function() {

    var isChecked = $(this).is(':checked');
    var alreadyChecked = $(this).has('checked');

    if(alreadyChecked)
    {
       //fire appropriate event
    }

    if(isChecked)
    {
        $('#myField').replaceWith('Something');
        $(this).addClass('checked');
    }
    else
    {
        $('#myField').replaceWith('Something Else');
    }

}); 
```

如果在开始时选中第一次单击将取消选中，第二次将检查，第三次将触发事件 如果在开始时未选中第一次单击将检查，第二次将触发事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:47:33.940

```
$('#myID').on('change', function() {
    var something = this.checked ? 'Something' : 'Something Else';
    $('#myField').replaceWith(something);
});​ 
```

问题是您要替换整个`#myField`元素，因此下次函数运行时没有元素`#myfield`，并且它不起作用。尝试只替换内容，`html()`,`append()`或`prepend()`任何其他不删除整个`#myField`元素的内容都可以：

```
<div id="myField">Something</div> 
```

-

```
$('#myID').on('change', function() {
    var something = this.checked ? 'Something' : 'Something Else';
    $('#myField').text(something);
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/CmcJE/)

# c++ - 在嵌入式 Boost::Python 终端中打印输出

> ID：10640615
> 
> 赞同：0
> 
> 时间：2012-05-17T17:34:13.427
> 
> 标签：c++, python, qt4, pyqt, boost-python

我正在使用 Qt、boost::python 和具有嵌入式 Python 终端的 PyQt 构建一个 C++ 程序。一切都很好。我们已经暴露了 C++，我们可以运行东西，来回传递数据等等。除了有人问为什么要打字：

```
>> 1+1 
```

不像交互式 Python 终端那样在终端上打印“2”。现在，我已经看到[了这个问题](https://stackoverflow.com/questions/9541353/printing-a-variable-in-an-embedded-python-interpreter)，但是由于我使用的是 boost::python，所以我认为我没有答案建议的选项。

有任何想法吗？

# javascript - JQuery wrapInner 触发 jQuery(document).ready 两次

> ID：10640620
> 
> 赞同：2
> 
> 时间：2012-05-17T17:34:37.843
> 
> 标签：javascript, jquery

我正在使用该功能，但这些再次`wrapInner`触发了我的事件。`jQuery(document).ready`

这是正常的行为吗？如何避免这种情况？

更新：

```
miscellaneous : function(){
            $('#nav .active a').bind('click',function(){ return false });
            $('.type-a, .type-b, .type-c, .type-d, .type-e').append('<div class="type"></div>');
            //$('body').wrapInner('<div id="root"></div>');
            $('#content').wrap('<div id="content-wrapper"></div>');

            $('#filter .time > li').append('<span class="arrow"></span>');
            $('#filter .category li a').wrapInner('<span></span>');                 
            $('#filter .time > li > ul').hide();    
            $('#filter .time > li').live('mouseenter',function(){
                if($(this).children('ul').css('display') != 'block'){
                    $(this).children('ul').fadeIn('fast',function(){
                        $(this).css({'display':'block'});
                    });
                }
            }).live('mouseleave',function(){
                if($(this).children('ul').css('display') != 'none'){
                    $(this).children('ul').fadeOut('fast',function(){
                        $(this).css({'display':'none'});
                    });
                }
            });
        } 
```

如果我取消注释第 4 行，则会显示两次以下警报。带有注释的行仅显示一次警报。

```
jQuery(document).ready(function($) {
    alert('in ready');              
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:04:33.797

由于您的代码在主体的子元素中，一旦您用另一个 div 包装主体的内容，主体中的脚本将被重新执行。只需在使用 wrapInner 之前删除这些脚本。除了不会导致警报发生两次之外，删除脚本不会影响页面的功能。

```
$("body").find("script").remove().end().wrapInner("<div id='root' />"); 
```

# javascript - javascript中将字节转换为可读格式的最优雅方法是什么

> ID：10640621
> 
> 赞同：4
> 
> 时间：2012-05-17T17:34:40.470
> 
> 标签：javascript

我在 stackoverflow 上找到了一个非常优雅的 Java 的“人性化”转换器，它没有使用任何循环。

是否可以用 javascript 做同样的事情？（例如 1024 字节 => 1 kb）？

听起来很简单，我已经做了很多搜索

如果您想知道：[Java 版本](https://stackoverflow.com/questions/3758606/how-to-convert-byte-size-into-human-readable-format-in-java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:41:53.650

```
function byteCount (bytes, unit) {
  if (bytes < (unit = unit || 1000)) 
    return bytes + " B";
  var exp = Math.floor (Math.log (bytes) / Math.log (unit));
  var pre = ' ' +(unit === 1000 ? "kMGTPE" : "KMGTPE").charAt (exp - 1) + (unit === 1000 ? "" : "i") + 'B';
    return (bytes / Math.pow (unit, exp)).toFixed (1) + pre;
}

[ 0, 27, 999, 1000, 1023, 1024, 1728, 110592, 7077888, 
  452984832, 28991029248, 1855425871872, 9223372036854775807].forEach (
    function (v) { console.log (v, byteCount (v), byteCount (v, 1024)); });

/* Displays :    
0 "0 B" "0 B"
27 "27 B" "27 B"
999 "999 B" "999 B"
1000 "1.0 kB" "1000 B"
1023 "1.0 kB" "1023 B"
1024 "1.0 kB" "1.0 KiB"
1728 "1.7 kB" "1.7 KiB"
110592 "110.6 kB" "108.0 KiB"
7077888 "7.1 MB" "6.8 MiB"
452984832 "453.0 MB" "432.0 MiB"
28991029248 "29.0 GB" "27.0 GiB"
1855425871872 "1.9 TB" "1.7 TiB"
9223372036854776000 "9.2 EB" "8.0 EiB" */ 
```

请注意，Java 版本结果表显示 7.1 KB 而不是 7.1 MB 时出现错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T02:08:12.963

现在有几个非常不错的用于 JS 的 Humanize 库，我建议你看看：

### [HubSpot/人性化加](https://github.com/HubSpot/humanize)

如果你想看看，还有[https://github.com/taijinlee/humanize 。](https://github.com/taijinlee/humanize)

# python - 使用 Python gtk3 在 X 上进行全局键绑定

> ID：10640623
> 
> 赞同：2
> 
> 时间：2012-05-17T17:34:46.873
> 
> 标签：python, linux, xlib, gtk3

我正在寻找一些可以与 gtk3 一起使用的 python xlib 全局键绑定示例，就像在[http://www.siafoo.net/snippet/239](http://www.siafoo.net/snippet/239)上为 gtk2 所做的那样。这里的代码非常相似：

```
from Xlib.display import Display
from Xlib import X
import gtk.gdk
import threading
import gobject

class GlobalKeyBinding (gobject.GObject, threading.Thread):
    __gsignals__ = {
            'activate': (gobject.SIGNAL_RUN_LAST, gobject.TYPE_NONE, ()),
        }

    def __init__ (self):
        gobject.GObject.__init__ (self)
        threading.Thread.__init__ (self)
        self.setDaemon (True)

        self.keymap = gtk.gdk.keymap_get_default ()
        self.display = Display ()
        self.screen = self.display.screen ()
        self.root = self.screen.root

        self.map_modifiers ()
        self.keybindings={}
        self.current_signal=None

    def map_modifiers (self):
        gdk_modifiers = (gtk.gdk.CONTROL_MASK, gtk.gdk.SHIFT_MASK, gtk.gdk.MOD1_MASK,
                         gtk.gdk.MOD3_MASK, gtk.gdk.MOD4_MASK, gtk.gdk.MOD5_MASK,
                         gtk.gdk.SUPER_MASK, gtk.gdk.HYPER_MASK)
        self.known_modifiers_mask = 0
        for modifier in gdk_modifiers:
            self.known_modifiers_mask |= modifier

    def add_grab_key(self,accelerator,signal):
        if not accelerator:
            return
        keyval,modifiers=gtk.accelerator_parse(accelerator)
        if not keyval or not modifiers:
            return
        keycode=self.keymap.get_entries_for_keyval(keyval)[0][0]
        self.keybindings[signal]=[accelerator,
            keycode,
            int (modifiers)]
                #grab_key operation forces X to exclusivelly send given keycode (like apostrophe char) to current X client (unless other X client grabbed it before).
                #`X.AnyModifier' parameter tells to register the keycode for all modifiers, thus Ctrl-', Alt-', Shift-', ' will all be sent to this X client.
                # given keyval is grabbed by current X client until `ungrab_key' is called.
        return self.root.grab_key (keycode, X.AnyModifier, True, X.GrabModeAsync, X.GrabModeSync)

    def ungrab (self):
        for signal in self.keybindings:
                    # ungrab_key ungrabs given keycode, that was grabbed by `grab_key'.
            self.root.ungrab_key (self.keybindings[signal][1],X.AnyModifier, self.root)
        self.keybindings={}

    def idle (self):
        if self.current_signal:
            gtk.gdk.threads_enter ()
            self.emit (self.current_signal)
            self.current_signal=None
            gtk.gdk.threads_leave ()
        return False

        #threading.Thread.start() method invokes this method.
    def run (self):
        self.running = True
        wait_for_release = False
        while self.running:
            event = self.display.next_event () # registered keycode(or probably rather event) has been received.
            if self.current_signal:
                self.display.allow_events (X.ReplayKeyboard, event.time)
                continue

            try:
                if not wait_for_release and event.type == X.KeyPress:
                    modifiers = event.state & self.known_modifiers_mask
                                        print modifiers, event.detail
                    for signal in self.keybindings:
                        if self.keybindings[signal][1] == event.detail and self.keybindings[signal][2] == modifiers:
                            self.this_signal=signal
                            this_keycode = self.keybindings[signal][1]
                            wait_for_release=True
                            break
                    if wait_for_release:
                        self.display.allow_events (X.AsyncKeyboard, event.time)
                    else:
                        self.display.allow_events (X.ReplayKeyboard, event.time)
                    continue
                elif wait_for_release and event.detail == this_keycode and event.type == X.KeyRelease:
                    wait_for_release = False
                    self.current_signal=self.this_signal
                    self.event_window=event.window
                    gobject.idle_add (self.idle)
                    self.display.allow_events (X.AsyncKeyboard, event.time)
                else:
                    self.display.allow_events (X.ReplayKeyboard, event.time)
            except:
                self.display.allow_events (X.ReplayKeyboard, event.time)
    def stop (self):
        print "stopping keybindings thread..."
        self.running = False
        self.ungrab ()
        self.display.close ()

# SAMPLE USAGE
def callback (keybinding):
    print 'Callback!'
    keybinding.stop()
    gtk.main_quit ()

def main():
    print "starting..."
    gtk.gdk.threads_init ()
    keybindings=GlobalKeyBinding()
    keybindings.add_grab_key('<Control>apostrophe','activate')
    keybindings.connect('activate',callback)
    keybindings.start () # let's thart the thread
    gtk.main ()

main() 
```

不幸的是我没有找到，因此我决定重新实现它以使用 gtk3 (ubuntu 12.04)。下面是结果。它没有运行时错误，但不幸的是它没有获取任何输入。

```
from Xlib.display import Display
from Xlib import X
from gi.repository import Gtk, Gdk, GObject
import threading

class GlobalKeyBinding (GObject.GObject, threading.Thread):
    __gsignals__ = {
            'activate': (GObject.SignalFlags.RUN_LAST, None, ()),
        }

    def __init__ (self):
        GObject.GObject.__init__ (self)
        threading.Thread.__init__ (self)
        self.setDaemon (True)

        self.keymap = Gdk.Keymap.get_default()
        self.display = Display ()
        self.screen = self.display.screen ()
        self.root = self.screen.root

        self.map_modifiers ()
        self.keybindings={}
        self.current_signal=None

    def map_modifiers (self):
        gdk_modifiers = (Gdk.ModifierType.CONTROL_MASK, Gdk.ModifierType.SHIFT_MASK, Gdk.ModifierType.MOD1_MASK,
                         Gdk.ModifierType.MOD3_MASK, Gdk.ModifierType.MOD4_MASK, Gdk.ModifierType.MOD5_MASK,
                         Gdk.ModifierType.SUPER_MASK, Gdk.ModifierType.HYPER_MASK)
        self.known_modifiers_mask = 0
        for modifier in gdk_modifiers:
            #print modifier,modifier+0
            self.known_modifiers_mask |= modifier

    def add_grab_key(self,accelerator,signal):
        if not accelerator:
            return
        keyval,modifiers=Gtk.accelerator_parse(accelerator)
        if not keyval or not modifiers:
            return
        #keycode=self.keymap.get_entries_for_keyval(keyval)[0][0]
                success, entries = self.keymap.get_entries_for_keyval(keyval)
                entry = [(int(i.keycode), i.group, i.level) for i in entries]
                if not entry:
                    raise TypeError("Invalid key name")

                keycode=entry[0][0]
        self.keybindings[signal]=[accelerator,
            keycode,
            int (modifiers)]
        return self.root.grab_key (keycode, X.AnyModifier, True, X.GrabModeAsync, X.GrabModeSync)

    def ungrab (self):
        for signal in self.keybindings:
            self.root.ungrab_key (self.keybindings[signal][1],X.AnyModifier, self.root)
        self.keybindings={}

    def idle (self):
        if self.current_signal:
            Gdk.threads_enter ()
            self.emit (self.current_signal)
            self.current_signal=None
            Gdk.threads_leave ()
        return False

    def run (self):
        self.running = True
        wait_for_release = False
        while self.running:
            event = self.display.next_event ()
            if self.current_signal:
                self.display.allow_events (X.ReplayKeyboard, event.time)
                continue

            try:
                if not wait_for_release and event.type == X.KeyPress:
                    modifiers = event.get_state() & self.known_modifiers_mask
                    print modifiers,event.get_state()
                    for signal in self.keybindings:
                        if self.keybindings[signal][1] == event.detail and self.keybindings[signal][2] == modifiers:
                            self.this_signal=signal
                            this_keycode = self.keybindings[signal][1]
                            wait_for_release=True
                            break
                    if wait_for_release:
                        self.display.allow_events (X.AsyncKeyboard, event.time)
                    else:
                        self.display.allow_events (X.ReplayKeyboard, event.time)
                    continue
                elif wait_for_release and event.detail == this_keycode and event.type == X.KeyRelease:
                    wait_for_release = False
                    self.current_signal=self.this_signal
                    self.event_window=event.window
                    GObject.idle_add (self.idle)
                    self.display.allow_events (X.AsyncKeyboard, event.time)
                else:
                    self.display.allow_events (X.ReplayKeyboard, event.time)
            except:
                self.display.allow_events (X.ReplayKeyboard, event.time)
    def stop (self):
        self.running = False
        self.ungrab ()
        self.display.close ()

# SAMPLE USAGE
def callback (keybinding):
    print 'Callback!'
    keybinding.stop()
    Gtk.main_quit ()

def main():
    print "starting..."
    Gdk.threads_init ()
    keybindings=GlobalKeyBinding()
    keybindings.add_grab_key('<Control>apostrophe','activate')
    keybindings.connect('activate',callback)
    print "keybindings go"
    keybindings.start () # let's thart the thread
    print "gtk go"
    Gtk.main ()

main() 
```

也许你有一些想法如何让它发挥作用？

最好的问候，保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T06:47:05.710

嘿，我实现了相同的代码并且工作得很好，你可以试试这个。但没有保修。如果您发现缺少的部分，请告诉我。

```
# -*- coding: utf-8; -*-
# Copyright (C) 2013  Özcan Esen <ozcanesen@gmail.com>
# Copyright (C) 2008  Luca Bruno <lethalman88@gmail.com>
#
# This a slightly modified version of the globalkeybinding.py file which is part of FreeSpeak.
#   
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell   
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#   
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#   
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,  
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER    
# DEALINGS IN THE SOFTWARE.

from Xlib.display import Display
from Xlib import X, error
#import GObject
#import gtk.gdk
from gi.repository import Gtk, Gdk, GObject, GLib
import threading
from config import ConfigManager

class GlobalKeyBinding(GObject.GObject, threading.Thread):
    __gsignals__ = {
        'activate':(GObject.SIGNAL_RUN_LAST, None,()),
        }

    def __init__(self):
        GObject.GObject.__init__(self)
        threading.Thread.__init__(self)
        self.setDaemon(True)

        self.keymap = Gdk.Keymap.get_default()
        self.display = Display()
        self.screen = self.display.screen()
        self.root = self.screen.root
        self.ignored_masks = self.get_mask_combinations(X.LockMask | X.Mod2Mask | X.Mod5Mask)
        self.map_modifiers()

    def map_modifiers(self):
        gdk_modifiers =(Gdk.ModifierType.CONTROL_MASK, Gdk.ModifierType.SHIFT_MASK, Gdk.ModifierType.MOD1_MASK,
                         Gdk.ModifierType.MOD2_MASK, Gdk.ModifierType.MOD3_MASK, Gdk.ModifierType.MOD4_MASK, Gdk.ModifierType.MOD5_MASK,
                         Gdk.ModifierType.SUPER_MASK, Gdk.ModifierType.HYPER_MASK)
        self.known_modifiers_mask = 0
        for modifier in gdk_modifiers:
            if "Mod" not in Gtk.accelerator_name(0, modifier):
                self.known_modifiers_mask |= modifier

    def grab(self):
        Gdk.threads_enter()
        accelerator = ConfigManager.get_conf('global-key')
        Gdk.threads_leave()
        keyval, modifiers = Gtk.accelerator_parse(accelerator)
        if not accelerator or(not keyval and not modifiers):
            self.keycode = None
            self.modifiers = None
            return

        self.keycode= self.keymap.get_entries_for_keyval(keyval)[1][0].keycode
        self.modifiers = int(modifiers)

        catch = error.CatchError(error.BadAccess)
        for ignored_mask in self.ignored_masks:
            mod = modifiers | ignored_mask
            result = self.root.grab_key(self.keycode, mod, True, X.GrabModeAsync, X.GrabModeSync, onerror=catch)
        self.display.sync()
        if catch.get_error():
            return False
        return True

    def ungrab(self):
        if self.keycode:
            self.root.ungrab_key(self.keycode, X.AnyModifier, self.root)

    def get_mask_combinations(self, mask):
        return [x for x in xrange(mask+1) if not (x & ~mask)]

    def idle(self):
        Gdk.threads_enter()
        self.emit("activate")
        Gdk.threads_leave()
        return False

    def run(self):
        self.running = True
        wait_for_release = False
        while self.running:
            event = self.display.next_event()
            self.current_event_time = event.time
            if event.detail == self.keycode and event.type == X.KeyPress and not wait_for_release:
                modifiers = event.state & self.known_modifiers_mask
                if modifiers == self.modifiers:
                    wait_for_release = True
                    self.display.allow_events(X.AsyncKeyboard, event.time)
                else:
                    self.display.allow_events(X.ReplayKeyboard, event.time)
            elif event.detail == self.keycode and wait_for_release:
                if event.type == X.KeyRelease:
                    wait_for_release = False
                    GLib.idle_add(self.idle)
                self.display.allow_events(X.AsyncKeyboard, event.time)
            else:
                self.display.allow_events(X.ReplayKeyboard, event.time)

    def stop(self):
        self.running = False
        self.ungrab()
        self.display.close() 
```

# maven - 为需要身份验证的代理存储库创建 Nexus 私有存储库组的最佳实践是什么

> ID：10640624
> 
> 赞同：3
> 
> 时间：2012-05-17T17:34:47.427
> 
> 标签：maven, nexus

我想通过我的 Nexus 存储库代理的 Maven 存储库之一是私有的，*即*，它需要用户名/密码才能访问。因此，我以通常的方式设置了一个代理存储库，并在身份验证设置下输入了我的凭据。到现在为止还挺好。

现在，通常我会将新存储库添加到公共存储库组。但是，据我了解，这将允许任何有权访问我的存储库的人通过我的存储库访问这个私有存储库，而无需身份验证。它是否正确？

我可以通过创建包含新存储库的私有存储库组来解决此问题吗？然后我必须创建一个新的存储库目标权限才能限制对新私有组的访问，对吗？

我认为下一步将是在我`<profile>`的. 最后，我需要从我的默认设置中排除新的存储库 URL 模式（*例如*, ）。`<repository>``settings.xml``<mirror>``<mirror>`*`<mirrorOf>*,!thirdparty,!private</mirror>`*

 *我在正确的轨道上吗？让这比需要的更难？还是错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:34:14.080

如果您不限制对您设置并添加到公共组的代理存储库的访问，您的怀疑是正确的。

但是，如果您使用用户名和密码限制对代理存储库的访问，则其工件将在公共组中可用。但仅限于使用对您的代理存储库具有足够访问权限的凭据连接到它的用户。公共组不仅聚合内容，还考虑它聚合的存储库的安全设置。

如果您遵循这种方法，您需要做的就是让应该被允许访问代理 repo 内容的用户使用您提供的凭据连接到 Nexus 并控制访问权限。当匿名用户连接到公共组时，匿名用户将无权访问工件。

您的方法也可以，但是对于所有用户来说，它的工作量要大得多，因为您在 Nexus 之外而不是在那里控制它。*

# c# - 自定义类型和使用设置设计器与持久用户设置一起使用

> ID：10640626
> 
> 赞同：1
> 
> 时间：2012-05-17T17:34:55.517
> 
> 标签：c#, .net, visual-studio, visual-studio-2010, configuration

我使用自定义配置设计器 (http://csd.codeplex.com/) 创建了一个自定义配置类型。通过声明 in 正常使用时，这可以正常工作。但是，如果我想存储自定义类型来存储用户设置并在 Visual Studio 中使用设置设计器，那么在设置类型之后，我似乎无法设置有效值。我四处寻找答案，但在谷歌上找不到类似的东西。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:01:31.687

不建议在标准 Visual Studio 设计器中使用自定义配置部分（例如，由 CSD 创建）。您只能手动更改 XML 视图中的配置文件。

# php - 存储数据库 (PDO) 连接

> ID：10640630
> 
> 赞同：2
> 
> 时间：2012-05-17T17:35:17.910
> 
> 标签：php, pdo

我目前正在编写一个 PHP 应用程序，我注意到我的页面加载速度有点慢。我大约需要 2 秒（准确地说是 2.0515811443329）。

我已经找到了瓶颈是什么，这是我创建与 MySQL 数据库的 PDO 连接的部分。

我的 'connect()' 方法没有做任何奇异的事情。它看起来像这样：

```
public function connect ( $database, $host, $username, $password )
{
    try
    {
        $this->db = new \PDO("mysql:dbname=".$database.";host=".$host, $username, $password);
        if ( !$this->db )
        {
            throw new \Exception('Failed to connect to the database!');
        }

        $this->db->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION);
    }
    catch ( \Exception $e )
    {
        echo '<strong>Exception: </strong>'.$e->getMessage();
        return false;
    }

    return true;
} 
```

因此，当我注释掉对“connect()”方法的调用时，我的页面会加载：0.035506010055542

这是一个巨大的差异。我可以想象创建与数据库的连接确实需要一些时间，但需要超过 1.5 秒......我不确定这是否正常？

如果它是正常的，它占用了这么多时间，那么有没有办法存储数据库连接？就像把它放在一个会话中？实际上，据我所知，将其存储在会话中是不可能的。但这将是理想的解决方案。将连接存储在某处，直到用户关闭他的浏览器。

无论如何，我的 PDO / MySQL 有问题吗？我可以以某种方式简单地存储连接资源吗？这样我就不必每次为每个新页面都重新连接到我的数据库？

PS。我在本地主机（Windows）上做这一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:03:19.410

您可能正在使用“localhost”作为地址进行连接。尝试将其更改为“127.0.0.1”。那应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:42:12.333

您可以使用`PDO`. 从[手册](http://php.net/manual/en/pdo.connections.php)

> 许多 Web 应用程序将受益于与数据库服务器建立持久连接。持久连接不会在脚本结束时关闭，但会在另一个脚本使用相同凭据请求连接时被缓存并重新使用。持久连接缓存允许您避免每次脚本需要与数据库通信时建立新连接的开销，从而提高 Web 应用程序的速度。

和例子：

```
<?php
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass, array(
    PDO::ATTR_PERSISTENT => true
));
?> 
```

# php - 启用 suhosin 时如何在两个站点之间共享会话？

> ID：10640631
> 
> 赞同：2
> 
> 时间：2012-05-17T17:35:20.353
> 
> 标签：php, wordpress, session, suhosin

最近我们的客户端迁移到启用了 suhosin 的服务器。在那之前，我们使用会话共享在 wp 和我们的自定义 cms 之间切换。现在会话详细信息在加密后保存在数据库中。拔了一天的头发后，我们发现Suhosin是新服务器中的罪魁祸首。有没有办法从 suhosin 值中读取会话数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:59:22.633

### You can use [memcached to save sessions in persistent memory cache](http://www.dotdeb.org/2008/08/25/storing-your-php-sessions-using-memcached/) between servers or sites without having to save to a file or DB.

You can also change the [suhosin transparent encryption options](http://www.hardened-php.net/suhosin/configuration.html#transparent_encryption_options). For example this might solve your problem:

```
suhosin.session.cryptdocroot

Type: Boolean
Default: On
Flag that decides if the transparent session encryption key depends on the Documentroot field. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:42:18.930

您无法解密 suhosin 会话详细信息。最好更改身份验证方法。禁用 suhosin 是对安全性的妥协。

# cocoa - NotificationCenter : -[NSRunLoop ]: 无法识别的选择器发送到实例

> ID：10640634
> 
> 赞同：0
> 
> 时间：2012-05-17T17:35:29.107
> 
> 标签：cocoa, selector, nsnotificationcenter

我是 Cocoa 的新手，我在编写一个示例应用程序时遇到了一些问题：

```
@implementation DeviceDetection    
- (id) init {
    self = [super init];
    if (self) {

        notCenter = [[NSWorkspace sharedWorkspace] notificationCenter];
        [notCenter addObserver:self
                      selector:@selector(discMounted:)
                          name:@"NSWorkspaceDidMountNotification" 
                        object:[NSWorkspace sharedWorkspace]]; // Register for all notifications
    }

    return self;
}

- (void)discMounted:(NSNotification *)notification
{
    NSLog(@"COUCOU");
}    
@end

#import <Foundation/Foundation.h>

@interface DeviceDetection : NSObject {

    NSNotificationCenter *notCenter;

}

- (void) discMounted:(NSNotification *)notification;

@end

@implementation AppDelegate
@synthesize window = _window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    DeviceDetection* d = [[DeviceDetection alloc] init];

    [d value];
} 
@end 
```

使用那段代码插入 USB 驱动器时出现以下错误：

```
[NSRunLoop discMounted:]: unrecognized selector sent to instance 0x10054c5a0 
```

有什么理由吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:55:00.490

您需要定义`dealloc`-`DeviceDetection`

```
-(void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

编辑 1 -

```
DrivesOnDock[5207:707] -[DeviceDetection value]: unrecognized selector sent to instance 0x100475b40 when the app starts. 
```

发生上述错误是因为您尚未`value`在`DeviceDetection`类中定义。

# mysql - npm 包构建失败，如何最好地调试？

> ID：10640636
> 
> 赞同：1
> 
> 时间：2012-05-17T17:35:44.003
> 
> 标签：mysql, node.js

我正在尝试在 Mac OS X 上安装 mysql 节点包。我正在尝试在本地运行客户端项目。

我已经安装了 node 和 npm，它们工作正常，其他软件包也安装得很好。我还编译/安装了完整的 LAMP 堆栈。

当下面的构建失败时，我没有看到任何有用的错误消息 - 只是有关未找到库的信息。不知道它找不到什么，我无法修复它。

有什么建议吗？MySQL 已经以标准方式安装 - 下载包、./configure'd、make/install。

```
$ npm install mysql-libmysqlclient
npm http GET https://registry.npmjs.org/mysql-libmysqlclient
npm http 304 https://registry.npmjs.org/mysql-libmysqlclient

> mysql-libmysqlclient@1.3.3 install /Users/botskonet/node_modules/mysql-libmysqlclient
> node-gyp rebuild

info it worked if it ends with ok 
spawn python [ '/Users/botskonet/.node-gyp/0.6.12/tools/gyp_addon',
  'binding.gyp',
  '-I/Users/botskonet/node_modules/mysql-libmysqlclient/build/config.gypi',
  '-f',
  'make' ]
spawn make [ 'BUILDTYPE=Release', '-C', 'build' ]
  CXX(target) Release/obj.target/mysql_bindings/src/mysql_bindings.o
  CXX(target) Release/obj.target/mysql_bindings/src/mysql_bindings_connection.o
  CXX(target) Release/obj.target/mysql_bindings/src/mysql_bindings_result.o
  CXX(target) Release/obj.target/mysql_bindings/src/mysql_bindings_statement.o
  SOLINK_MODULE(target) Release/mysql_bindings.node
ld: library not found for -lmysqlclient_r
collect2: ld returned 1 exit status
make: *** [Release/mysql_bindings.node] Error 1
ERR! Error: `make` failed with exit code: 2
    at Array.0 (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:176:25)
    at EventEmitter._tickCallback (node.js:192:40)
ERR! not ok

npm ERR! mysql-libmysqlclient@1.3.3 install: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR! 
npm ERR! Failed at the mysql-libmysqlclient@1.3.3 install script.
npm ERR! This is most likely a problem with the mysql-libmysqlclient package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls mysql-libmysqlclient
npm ERR! There is likely additional logging output above.
npm ERR! 
npm ERR! System Darwin 11.3.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "mysql-libmysqlclient"
npm ERR! cwd /Users/botskonet/Sites/SportsBuddies
npm ERR! node -v v0.6.12
npm ERR! npm -v 1.1.15
npm ERR! code ELIFECYCLE
npm ERR! message mysql-libmysqlclient@1.3.3 install: `node-gyp rebuild`
npm ERR! message `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR! errno {}
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/botskonet/Sites/SportsBuddies/npm-debug.log
npm not ok 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:11:40.807

查看 README 和问题 #107 中的依赖项部分。要构建 mysql-libmysqlclient，您应该为其安装 libmysqlclient 和开发头文件，将 MySQL bin 目录的路径添加到 $PATH 并将 MySQL lib 目录的路径添加到 $DYLD_LIBRARY_PATH。

# java - PMD Eclipse 插件未突出显示自定义 PMD 规则

> ID：10640637
> 
> 赞同：0
> 
> 时间：2012-05-17T17:35:53.833
> 
> 标签：java, eclipse, xpath, pmd

我正在尝试创建一个自定义规则来标记在 void 方法中使用 return 语句，例如：

```
public class MyClass
{
    public void myMethod(Object someObj)
    {
        if (someObj == null)
        {
            return;
        }
        ...
    }
} 
```

我使用以下 XPath 创建了一个自定义 XPath 规则：

```
//MethodDeclaration[not(ResultType/Type) and (count(//ReturnStatement) > 0)] 
```

它返回 RuleDesigner 中的 ASTMethodDeclaration 元素，但是当我将此规则导入 Eclipse 并针对代码运行 PMD 时，它不会标记我期望的方法，即与上述描述匹配的方法（包含返回的无效方法） .

有人知道这里可能出现什么问题吗？我的 XPath 有问题还是有其他问题？

我正在使用插件的 v3.2.6，其中包含 pmd14-4.2.5.jar。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T02:39:38.483

那是您使用的确切 XPath 吗？它没有很好地形成。（它缺少一个紧密的括号。）我建议编写一个测试工具来测试独立于 PMD 的 xpath。您可以在 Eclipse（或者我认为是独立的）中为一个类生成 AST，这样您就可以使用 XML 来运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:03:47.910

好的，解决了问题。XPath 逻辑是错误的，我在运行 Ant 任务后意识到它返回了超过 2000 条违反此规则的行为！主要是在根本没有 return 语句的 void 方法上。

这个 XPath 有效，比原来的更简单，并突出了 return 语句本身，而不是方法，这可能比我最初突出方法的意图更好：

```
//MethodDeclaration[not(ResultType/Type)]//ReturnStatement 
```

# java - iText - 第二次尝试生成 PDF 失败

> ID：10640638
> 
> 赞同：2
> 
> 时间：2012-05-17T17:35:55.930
> 
> 标签：java, pdf, itext

我有一个 Java 桌面应用程序，它使用 iText 从结果集中生成 PDF。第一次生成 PDF 时，它工作正常。当您尝试生成第二个时，问题就来了。它抛出一个 DocumentException ，说明文档已关闭。我试图找到其他人遇到这个问题的例子，但我想出的很少，这让我相信我犯了一个非常简单的错误，我找不到它。

下面的代码是调用报告类的事件处理程序的片段：

```
RptPotReport report = new RptPotReport();
try {
    report.rptPot();
} catch (DocumentException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

这是报告类本身的代码。通过此代码第二次运行时发生错误：

```
public class RptPotReport {

    public static void main(String[] args) throws IOException, DocumentException, SQLException {
        new RptPotReport().rptPot();
    }

    String fileOutput = "Potting Report.pdf";

    public void rptPot() throws DocumentException, IOException {
        File f = new File("Potting Report.pdf");
        if (f.exists()) {
            f.delete();
        }

        Document document = new Document();
        document = pdfSizes.getPdfLetter();
        PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(fileOutput));
        document.open();

        Phrase title = new Phrase();
        title.add(new Chunk("Potting Report"));

        document.add(title); // ******* DocumentException here: "The document has been closed. You can't add any Elements."
        document.close();

        try {
            File pdfFile = new File(fileOutput);
            if (pdfFile.exists()) {
                if (Desktop.isDesktopSupported()) {
                    Desktop.getDesktop().open(pdfFile);
                } else {
                    System.out.println("Awt Desktop is not supported!");
                }
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

编辑：根据某人的建议，我尝试从第二个线程调用 RptPotReport，但这并没有改变任何东西。进一步研究，iText 的 Document 类在实例化时会创建一个新线程。所以我回到了我开始的地方，仍然卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:23:52.463

这条线在您的应用程序中究竟做了什么：

`document = pdfSizes.getPdfLetter();`

如果没有代码和您的解释，该行似乎将变量的引用设置为`document`您从中收到的变量的引用，该变量`pdfSizes.getPdfLetter()`在运行之间被重用，因此您不再拥有该`new Document()`语句的引用。

我倾向于认为该`pdfSizes.getPdfLetter()`方法是错误的。

# oop - 正确使用私有构造函数

> ID：10640639
> 
> 赞同：0
> 
> 时间：2012-05-17T17:36:05.313
> 
> 标签：oop, constructor, private-members

我正在阅读有关私有构造函数的内容，并发现了一些我无法理解的观点。它说，如果您将构造函数声明为私有：

1.  该类不能从另一个类显式实例化
2.  该类不能被继承
3.  应该在只包含静态实用方法的类中使用

**我的第一个问题：** Point`2`说这个类不能被继承。好吧，如果你声明一个私有类，那么它仍然会满足这个属性。是因为，如果一个类是私有的，它仍然可以被另一个类从外部显式实例化吗？

**我的第二个问题：**我不明白这一点`3`。如果我有一个充满静态方法的辅助类，我将永远不必实例化该类来使用这些方法。那么，你永远不会实例化的类中构造函数的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:41:11.470

我以[java](/questions/tagged/java "显示标记为“java”的问题")和[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")为例（不是已知的最好的 OO 语言，但非常流行）——因为你没有定义你的意思是哪种语言。

广告 2。在这些语言中，您必须显式调用超类构造函数，或者为您隐式调用它。从子类中你不能调用私有方法（只有公共和受保护的）——这条规则也适用于构造函数。这意味着如果类只有私有构造函数，则无法在子类构造函数中调用一个。所以你不能继承这样的类。

广告。3\. 只是为了避免混淆——因为这个类只是实用方法的容器，实例化它没有意义。这样，您可以在编译时强制执行此规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:40:32.343

Java的答案

**问题 1**您将私有类与具有私有构造函数的类混淆了。私有构造函数主要用于不打算实例化的静态类（即它们只是有一堆静态方法）。

**问题 2**确实不需要构造函数，因此您必须显式创建一个私有构造函数，这样它就不会获得 JVM 将提供的默认构造函数，如果没有定义

默认情况下，没有定义方法的空类将始终由 JVM 提供无参数构造函数

# php - 超出 IP 连接限制

> ID：10640640
> 
> 赞同：1
> 
> 时间：2012-05-17T17:36:08.980
> 
> 标签：php, javascript, ajax

我使用 php 脚本解析远程 xml 文件并将网页上的输出打印到 div 中。由于我需要输出必须与当前播放的曲目同步，我使用 Javascript 每 20 秒重新加载 div 内容。在测试页面时，我遇到了托管问题，并收到消息“超出 IP 连接限制”，站点无法访问。我已经更改了 IP 来解决这个问题。是否有一种解决方法来解析元数据而不会碰到服务器并遇到网络托管问题？

```
<script>
setInterval(function() {
    $('#reload').load('current.php');
}, 20000);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:48:24.903

由于网页是基于客户端的实体，因此它本质上无法接收任何未请求的数据。话虽如此，您可以考虑一些选择。

首先，我不知道您使用的是哪个虚拟主机，但他们应该让您每 20 秒刷新一次页面（或像您一样发出请求）不止一次，所以我会就此与他们联系。拒绝服务攻击应该更像是每个连接每秒 2 或 3 次。可能有一个更好的答案，我只是没有看到，但乍一看，这是我的看法。

您可能要考虑的一个选项是使用[Web Socket](http://www.websocket.org/)，这是 HTML 5 的一项新功能，使 Web 服务器能够在访问者的浏览器之间保持开放连接并来回发送数据包。这可以避免浏览器每 20 秒不断地轮询服务器。当然，这些都是新的，我相信它们只适用于 Safari 和 Chrome。我还没有尝试过它们，但计划在未来。

总之，我不知道比经常轮询服务器以检查更改更好的方法。根据我浏览器的 XMLHttpRequest 选项卡，这就是 gmail 查找新消息的方式。如果您的主机不允许您在每个时间间隔内发出更多请求，则可能会降低您轮询服务器的频率或切换到不同的主机。

# python - 有没有一种在python中创建复制构造函数的好方法？

> ID：10640642
> 
> 赞同：14
> 
> 时间：2012-05-17T17:36:13.270
> 
> 标签：python, copy-constructor, deep-copy

我意识到已经提出了与此非常相似的问题，尽管不完全是这样。

我想为我的类的构造函数有一个可选参数，如果它是我的类的实例，将被复制。例如，类似（*我知道这段代码不起作用！*）：

```
class Foo(object):
    def __init__(self, foo=None):
        self.x = None
        self.y = None
        self.z = None

        if foo is not None and isinstance(foo, Foo):
            self = copy.deepcopy(foo)

a = Foo()
a.x = 1
a.y = 2
a.z = 3

b = Foo(a)
print b.x
print b.y
print b.z 
```

我知道有一些实用的解决方案。我可以根据 foo 对应属性的值来设置 self 的每个属性，但这真的很烦人，因为我的类有很多很多属性。或者我可以简单地使用 do：

```
b = copy.deepcopy(a) 
```

...但如果可能的话，我宁愿不这样做。我也希望避免压倒一切`__new__`。

python中真的没有像样的方法来创建复制构造函数吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T17:52:38.287

我认为这是最 Pythonic 的方式 - 复制工厂方法。

```
import copy

class Foo(object):
    def __init__(self):
        self.x = None
        self.y = None
        self.z = None
    def copy(self):
        return copy.deepcopy(self)

a = Foo()
a.x = 1
a.y = 2
a.z = 3

b = a.copy()
print b.x
print b.y
print b.z 
```

`dict.copy`这在 python 基本类型（例如）中相当普遍。它不是一个复制构造函数，但我不认为这是一个非常 Pythonic 的概念！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:54:07.927

这是*可能*的，因为您可以遍历传递给的源对象上的所有属性`__init__`，然后遍历`setattr()`您关心的那些`self`。但目前还不清楚这是否是解决问题的好方法。不是很Pythonic，和所有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-10T06:21:35.740

做到这一点的一种好方法是制作实例名称空间的顶级副本。

```
class Tst:
    def __init__(self, somearg):
        if isinstance(somearg, self.__class__):
            self.__dict__ = somearg.__dict__.copy()
        else:
            self.var = somearg
    def echo(self):
        print(self.var)

a = Tst(123)
b = Tst(456)
a.echo()        # gives 123
b.echo()        # gives 456
c = Tst(a)
c.echo()        # gives 123
c.var is a.var  # gives False -> different objects 
```

但是，如果您的课程处理 ，请小心`__slots__`，因为在这种情况下`__dict__`可能不存在，因此您可能需要依赖更中性的属性获取机制，例如`getattr()`

# javascript - 如何使用下划线的链式方法返回多维数组中的第一项？

> ID：10640646
> 
> 赞同：10
> 
> 时间：2012-05-17T17:36:19.597
> 
> 标签：javascript, underscore.js, chaining, chain

假设我有一个数组数组，我想返回数组中每个数组的第一个元素：

```
array = [[["028A","028B","028C","028D","028E"],
          ["028F","0290","0291","0292","0293"],
          ["0294","0295","0296","0297","0298"],
          ["0299","029A","029B","029C","029D"],
          ["029E","029F","02A0","02A1","02A2"]],
         [["02A3","02A4"],
          ["02A5", "02A6"]]; 
```

我知道我可以做这样的事情：

```
var firsts = [];
_.each(array, function(item){
  _.each(item, function(thisitem){
    firsts.push(_.first(thisitem));
  });
}); 
```

但是如果我想用下划线的`_.chain()`方法来做呢？只是学习下划线，到目前为止似乎很有用。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-17T18:06:56.257

你可以这样做，[`flatten`](http://underscorejs.org/#flatten)因此[`map`](http://underscorejs.org/#map)：

```
var firsts = _.chain(array)
              .flatten(true) // This true is important.
              .map(function(a) { return a[0] })
              .value(); 
```

演示：http: [//jsfiddle.net/ambiguous/cm3CJ/](http://jsfiddle.net/ambiguous/cm3CJ/)

您使用`flatten(true)`将您的数组数组转换为数组数组，然后`map`剥离每个内部数组的第一个元素。

如果你想要比 更短的东西`map`，你可以[`pluck`](http://underscorejs.org/#pluck)用来拉出内部数组的第一个元素：

```
var firsts = _.chain(array)
              .flatten(true) // This true is important.
              .pluck(0)
              .value(); 
```

演示：http: [//jsfiddle.net/ambiguous/pM9Hq/](http://jsfiddle.net/ambiguous/pM9Hq/)

[`_.pluck`](https://github.com/jashkenas/underscore/blob/1.5.2/underscore.js#L233)`map`无论如何只是一个电话：

```
// Convenience version of a common use case of `map`: fetching a property.
_.pluck = function(obj, key) {
  return _.map(obj, function(value){ return value[key]; });
}; 
```

这个看起来更像`.map(&:first)`你在 Ruby 中使用的那个，所以它可能对某些人来说更熟悉，一旦你习惯了它就会更简洁`pluck`。如果你真的想要一些 Rubyish 的东西，你可以使用一个非匿名函数`map`：

```
var first  = function(a) { return a[0] };
var firsts = _.chain(array)
              .flatten(true) // This true is important.
              .map(first)
              .value(); 
```

# sysadmin - 排除qmail投递失败

> ID：10640647
> 
> 赞同：0
> 
> 时间：2012-05-17T17:36:21.063
> 
> 标签：sysadmin, mail-server, qmail

我有一个令人费解的 qmail 情况（至少对我来说，但我不是 qmail 专家，这是我默认查看的与工作相关的问题......）

在我们邮件服务器的 qmail 队列中，大约有 12 封电子邮件发送到特定地址，这些邮件已经存在 2 天。在日志中，我看到每次交付尝试都以

> 交货 NNNN: 延期: Connected_to_XXX.XXX.X.XX_but_connection_dieed._Possible_duplicate!_(#4.4.2)/

一直以来，数以千计的其他电子邮件都被成功发送到完全相同的地址。我看不到十几个失败的消息有什么不同，尽管这是我能想到的唯一合乎逻辑的解释。

目标主机（XXX.XXX.X.XX）是我们自己内部网络上的一台机器。

关于我可以检查的任何建议？有什么方法可以获取有关导致“连接失效”的原因的更多详细信息？例如，目的地的电子邮件服务器可能由于某些特定内容而拒绝了邮件？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:28:59.793

邮件可能正在循环。如果邮件标题包含“Delivered To:”行，那么 qmail-local 通常会延迟。

还要检查目标服务器是否有任何日志，如果同一邮件的多个副本因任何随机原因在那里被击中。

# php - 为什么我的 PDO 不工作？

> ID：10640648
> 
> 赞同：2
> 
> 时间：2012-05-17T17:36:21.163
> 
> 标签：php, mysql, pdo

我开始使用 PDO，并使用 PDO 成功连接到 MySQL。但是，当我尝试从我的数据库中选择内容时，什么也没有发生。没有任何回应。（即使我在该表中有记录，并且列 username 存在）我的 PHP 日志中没有错误。

我正在使用 MAMP 并且所有 PDO 组件似乎都在 phpinfo() 中工作（因为我首先能够连接到 db）

请让我知道可能出了什么问题。非常感谢

```
 <?php
    try 
    {
        $connection = new PDO('mysql:host=localhost;dbname:my_db','my_username',
                              'xxxxxxx');   

            $stmt=$connection->prepare("SELECT * FROM users");
            $stmt->execute();

            while ($row=$stmt->fetch(PDO::FETCH_OBJ)){

                echo $row->username;
            }

    }

    catch(Exception $e)
    {
        echo "There was an error connecting to the database";
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T17:40:05.967

您需要告诉 PDO 您希望它抛出异常：

```
$connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

根据您在下面的评论，很明显您的 DSN 不正确。它应该是：

```
$connection = new PDO('mysql:host=localhost;dbname=my_db','my_username','xxxxxxx'); 
```

请注意，语法是`dbname=`而不是`dbname:`（您最初拥有的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T17:45:53.033

首先，从您的 PDO 连接段中获取您的查询...

```
<?php
try 
{
    $connection = new PDO('mysql:host=localhost;dbname:my_db','my_username',
                          'xxxxxxx');
}

catch(Exception $e)
{
    echo "There was an error connecting to the database";
}
?> 
```

然后，去做。

```
<?php
$SQL = 'SELECT * FROM users';
foreach($connection->query($SQL) as $row){
    print $row['username'] . "\n".'<br />';
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:44:21.833

看起来您要么在该表中没有数据，要么有错误：

尝试在之后添加此代码`$stmt->execute();`：

```
$arr = $sth->errorInfo();
print_r($arr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:39:24.267

为什么不问PHP？

```
catch(Exception $e)
{
    die($e);
} 
```

# hibernate - hibernate中group by子句中的多个列

> ID：10640655
> 
> 赞同：7
> 
> 时间：2012-05-17T17:36:44.707
> 
> 标签：hibernate, group-by

如何在休眠中按查询分组（例如 Select column1,column2,min(value) from Foo_Bar where value> 100 **group by (Column1,Column2)**）？我想按部分**分组多个列。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T17:51:46.470

```
select f.column1, f.column2, min(f.value)
from FooBar f
where f.value > 100
group by f.column1, f.column2 
```

# google-search - 超过 2048 个字符限制的 Google 查询

> ID：10640656
> 
> 赞同：1
> 
> 时间：2012-05-17T17:36:52.380
> 
> 标签：google-search

有什么方法可以触发大型 Google 查询（例如：多个搜索词，或分隔多个站点或其他关键字），正常限制似乎是 2048 个字符。Google CSE API 或任何其他 API 是否允许我进行超出该限制的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-11T07:46:37.663

您可以发布请求而不是获取。然后您将获得 10k 限制。 [https://support.google.com/gsa/answer/4411411#requests](https://support.google.com/gsa/answer/4411411#requests)

# javascript - td 元素内的 100% 高度 div

> ID：10640660
> 
> 赞同：2
> 
> 时间：2012-05-17T17:37:11.367
> 
> 标签：javascript, jquery, html, css

我正在使用 ASP，有一个非常简单的模板，在我的语言中，想将 div 放在 td 单元格中，它应该是 100% 的高度......使用内部 DIV 很重要，而不是设置 TD 本身，因为会有是与此相同的母版页，有时内容会有背景，有时没有...

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="admin_login.aspx.cs" Inherits="admin_login" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" > <!-- "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">-->

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Admin Section</title>
    <link href="~/css/admin.css" type="text/css" rel="stylesheet"/>
    <script type="text/javascript" language="javascript" src="js/height.js"></script>
    <script type="text/javascript" language="javascript">
        function onLoad() {
            makeInnerOneHundredPercentage("outterMainDivElement", "innerMainDivElement");
        }

        $(document).ready(onLoad());
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div class="main-div">
        <table class="main-table">
            <tr>
                <td class="pg-hdr">
                    ورود<br />
                    <br />
                    <div class="main-link-div">
                        <asp:HyperLink ID="HyperLink1" runat="server">خانه</asp:HyperLink>
                    </div>
                    <div class="main-link-div-alt">
                        &nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;
                        </div>
                </td>
            </tr>
            <tr>
                <td id="outterMainDivElement">
                    <div id="innerMainDivElement" class="big-background">
                        <div align="center">
                            <asp:Login ID="Login1" runat="server" BackColor="#EFF3FB" BorderColor="#B5C7DE" 
                                BorderPadding="4" BorderStyle="Solid" BorderWidth="1px" Font-Names="tahoma" 
                                Font-Size="0.8em" ForeColor="#333333" 
                                FailureText="تلاش برای ورود موفقیت آمیز نبود، لطفا مجددا تلاش کنید." 
                                LoginButtonText="ورود" PasswordLabelText="کلمه عبور:" 
                                PasswordRequiredErrorMessage="کلمه عبور ضروری می باشد." 
                                RememberMeText="من را به خاطر بسپار" TitleText="ورود" 
                                UserNameLabelText="نام کاربری:" 
                                UserNameRequiredErrorMessage="نام کاربری ضروری می باشد." RememberMeSet="False" CheckBoxStyle-Wrap="True">
                                <InstructionTextStyle Font-Italic="True" ForeColor="Black" />
                                <LoginButtonStyle BackColor="White" BorderColor="#507CD1" BorderStyle="Solid" 
                                    BorderWidth="1px" Font-Names="Verdana" Font-Size="1em" 
                                    ForeColor="#284E98" />
                                <TextBoxStyle Font-Size="0.8em" />
                                <TitleTextStyle BackColor="#507CD1" Font-Bold="True" Font-Size="1.5em" 
                                    ForeColor="White" />
                            </asp:Login>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="pg-ftr">
                    <p dir="rtl" style="padding: 0px; margin: 0px;">
                        تمامي حقوق مطالب اين وب سايت براي حسن فقیهی محفوظ است.
                    </p>
                    <p dir="ltr" style="padding: 0px; margin: 0px; font-family: Times new roman;">
                        © 2011 by Hassan Faghihi.</p>
                </td>
            </tr>
        </table>
    </div>
    </form>
</body>
</html> 
```

我也试过写JS……但是好像不行，请看一下……

```
function makeInnerOneHundredPercentage(outterId, innerId){
    var h= Document.getElementById(outterId).height;
    document.getElementById(innerId).height=h;
} 
```

这是我的 CSS 文件

```
body,html {
    direction: rtl;
    height: 100%;
    margin: 0;
    min-height: 100%;
    padding: 0;
}

body > form{
    height: 100%;
    min-height: 100%;
}

* {
    font-family: tahoma;
}

.big-background{
    height: 100%;
    min-height: 100%;
    margin: auto;
    padding: 0;
    background-image: url("../img/style/10.jpg");
    background-repeat: repeat;
}

.main-div {
    min-height: 100%;
    height: 100%;
    padding: 0px;
    margin: 0px;
}

.main-table {
    width: 100%;
    min-height: 100%;
    height: 100%;
    padding: 0px;
    margin: 0px;
}

.pg-hdr{
    height: 100pt;
    text-align: center;
    vertical-align: top;
    font-family: tahoma,arial;
    font-size: 36px;
    font-style: normal;
    font-weight: bold;
    color: #f9f6ff;
    background-color: #a694ff;
}

.pg-ftr{
    height: 50pt;
    text-align: center;
    font-family: tahoma,arial;
    font-size: 14px;
    font-style: normal;
    color: #f9f6ff;
    background-color: #a694ff;
}

.main-link-div ,
.main-link-div-alt{
    font-size: 16px;
}
.main-link-div {
    width: 100px;
    float: left;
}
.main-link-div-alt{
    width: auto;
    float: right;
}

.main-link-div > a:hover,
.main-link-div-alt > a:hover {
    color: red;
}

.main-link-div > a:active,
.main-link-div-alt > a:active {
    color: #ffd700;
}

.content-place-holder-td {
    text-align: center;
    vertical-align: top;
}

.content-place-holder-td > * {
    margin: 0 auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:17:56.860

将此样式添加到您的 css 文件中（背景颜色仅用于测试，您可以稍后将其删除）

```
.big-background{
    height: 100%; background-color: #ccc} 
```

# javascript - javascript中前置加号的含义

> ID：10640662
> 
> 赞同：9
> 
> 时间：2012-05-17T17:37:30.447
> 
> 标签：javascript, operators

下面的“+”有什么作用？

```
var result = jQuery.trim(this.html2val(this.getValueJelement()[0].innerHTML));
    result = +result.replace(/[^\d\.-]/g, ''); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-17T17:38:21.560

这基本上是一种将右手操作数强制转换为数值的偷偷摸摸的方式。例如，

```
> +"42"
42 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:38:14.303

它将操作数转换为数字。换句话说，它与说的基本相同`result = parseFloat(result)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:44:52.297

`+a`是转换为数字的[最快方法。](http://jibbering.com/faq/notes/type-conversion/#tcNumber)`a`

# android - Android：使用按钮单击意图启动活动

> ID：10640666
> 
> 赞同：0
> 
> 时间：2012-05-17T17:37:35.453
> 
> 标签：android, onclick, runtimeexception

我正在尝试使用意图开始活动：

```
 public class Bez_provjere_739 extends Activity { 
Button Tbutun;
 public void onCreate(Bundle savedInstanceState) {

    Tbutun.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent otvoriIn = new Intent("com.riteh.HL.IN");

            startActivity(otvoriIn);
        }
    }); 
```

我以相同的方式在我的应用程序中多次使用它，但仅在这种情况下我得到错误：

05-17 00:44:43.694: E/AndroidRuntime(3533): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.riteh.HL/com.riteh.HL.Bez_provjere_739}: java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:42:12.083

初始化你的按钮，试试这个

```
 public class Bez_provjere_739 extends Activity { 
    Button Tbutun;
     public void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.main);

    Tbutun=(Button)findViewById(R.id.button1) //change the id as per yours

        Tbutun.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent otvoriIn = new Intent("com.riteh.HL.IN");

                startActivity(otvoriIn);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:39:37.967

你从来没有初始化你的按钮，也没有分配给它，所以它是空的。

此外，您的代码中缺少一些基础知识：

```
// naming conventions - variable names start with lower case letter
private Button tbutun; 

@Override
public void onCreate(Bundle savedInstanceState) {
    // always call super.onCreate
    super.onCreate(savedInstanceState);
    // if you have a layout XML, use it
    setContentView(R.layout.lay_xml_name);
    // if the button declared in the layout, refer to it
    tbutun = (Button)findViewById(R.id.the_button_name);
    // the rest
} 
```

# javascript - Firefox 插件如何访问用户的书签文件夹

> ID：10640667
> 
> 赞同：4
> 
> 时间：2012-05-17T17:37:36.997
> 
> 标签：javascript, firefox, firefox-addon

我正在编写一些操纵用户书签的 Firefox 附加代码。

我从[https://developer.mozilla.org/En/Places_Developer_Guide](https://developer.mozilla.org/En/Places_Developer_Guide)的“搜索书签”代码开始，最后编写了以下代码，它可以工作......

```
var folders = [bookmarksService.bookmarksMenuFolder, bookmarksService.toolbarFolder, bookmarksService.unfiledBookmarksFolder];
var bookmarks = [];
for (var i = 0; i < 3; i++) {
    query.setFolders([folders[i]], 1);
    var result = historyService.executeQuery(query, options);
    var rootNode = result.root;
    rootNode.containerOpen = true;
    getNode(rootNode, bookmarks);
    rootNode.containerOpen = false;
} 
```

此代码的问题在于它对 3 个默认书签文件夹进行了硬编码。我想要代码来处理用户创建自己的书签文件夹的情况。

如何更改此代码以使其遍历所有书签文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:43:14.277

我认为您对这里的“文件夹”术语感到困惑。您在代码块中拥有的三个硬编码项就是您所需要的。用户创建的任何书签都将位于这三个位置之一。您可以通过在 Firefox (Ctrl + Shift + B) 中打开书签编辑器来查看此操作。在左侧的树窗格中，选择**All Bookmarks**项，注意它下面只有 3 个（可能是 4 个）项：

1.  书签工具栏
2.  书签菜单
3.  未分类的书签

如果您右键单击“所有书签”顶级项目，您会注意到此级别没有“创建文件夹”选项。任何用户创建的书签都位于此级别列出的子项之下。

[Places Developer Guide](https://developer.mozilla.org/En/Places_Developer_Guide#Identifying_Items_in_the_Bookmark_System)列出了一个额外的顶级文件夹（**tagsFolder**），但我认为您不必担心那个。我无法想象一个书签存在于那里，而不是其他三个位置之一。

# android - Android：自定义视图的默认属性

> ID：10640668
> 
> 赞同：9
> 
> 时间：2012-05-17T17:37:42.310
> 
> 标签：android, attributes, custom-controls, attr

我有一个扩展框架类之一的自定义视图。Android 中的大多数`View`s 都为它们定义了一些默认属性（例如`Button`可点击，由 设置`android:clickable="true"`）。

如何为我的自定义视图提供应用程序范围的默认值？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-22T17:49:03.073

我就这样解决了自己的问题：

**res/values/attrs.xml**：

```
<resources>
    <attr name="customViewStyle" type="reference" />
</resources> 
```

**res/values/styles.xml**：

```
<resources>
    <style name="AppTheme" parent="@android:style/Theme.Light">
        <item name="android:background">@drawable/bg_light</item>
        <item name="customViewStyle">@style/CustomView</item>
    </style>

    <style name="CustomView">
        <item name="android:clickable">true</item>
        <item name="android:focusable">true</item>
        <item name="android:focusableInTouchMode">true</item>
    </style>
</resources> 
```

然后，您只需将清单中的主题设置为 AppTheme。这也适用于在 AppTheme 定义中使用的标准小`android:[widget]Style`部件`customViewStyle`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:52:48.490

您还可以为此布局创建样式并设置您使用视图的样式。

来源：http: [//developer.android.com/guide/topics/resources/style-resource.html](http://developer.android.com/guide/topics/resources/style-resource.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T02:50:13.467

我认为您将需要覆盖带有[AttributeSet](http://developer.android.com/reference/android/util/AttributeSet.html)参数的 View 构造函数，并构建您自己的修改后的 AttributeSet 以传递给超类构造函数。

编辑：更轻松，只需调用 View 子类构造函数`setClickable`等即可将默认值更改为您想要的。

# c++ - 如何判断我的 ActiveMQ 消息是否已传递到最终目的地？

> ID：10640672
> 
> 赞同：0
> 
> 时间：2012-05-17T17:38:05.343
> 
> 标签：c++, activemq

这是我的情况：

1.  我的主应用程序通过 ActiveMQ 向从属应用程序发送消息。
2.  当 Slave 收到消息时，它会向 Master 发送一个确认。

但是，对于 Slave 未运行的情况，我希望 Master 收到消息无法传递的警报。

对于 OpenAMQ，有一个“强制”标志，如果代理无法立即将消息传递到目的地，它会导致代理将消息返回给发送者。

ActiveMQ中是否有类似的东西可以让Master确定Slave不可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:23:04.660

最终的目的地？什么是部署拓扑？您是否在每个主/从应用程序上有一个 ActiveMQ 代理或两个集群代理？

我认为在任何一种情况下，最简单的方法是从主机向从机发出请求/回复 ping。如果在 XX 秒内没有出现响应，则认为从节点离线。

# php - 有没有一种工具可以在一台机器上管理多个 PHP 安装（例如，支持不同的版本）？

> ID：10640677
> 
> 赞同：7
> 
> 时间：2012-05-17T17:38:27.480
> 
> 标签：php

[perlbrew](http://perlbrew.pl/)是一个管理系统上多个 Perl 安装的工具，可以轻松地，例如，针对许多不同版本的 Perl 快速运行一套测试脚本。

PHP有类似的东西吗？现在，当我想更改系统使用的 PHP 版本时，我将进入所需版本的构建目录并运行`make install`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:28:54.910

这是一个： http: [//www.navicopa.com](http://www.navicopa.com) - 它允许您一键在不同版本的 php 之间切换（只需将它们安装到不同的目录中）

这是一个免费的：[https ://github.com/c9s/phpbrew](https://github.com/c9s/phpbrew)

另外 - 如果您不想使用辅助软件，您可能会喜欢此解决方案：[https ://stackoverflow.com/a/5299385/1337343](https://stackoverflow.com/a/5299385/1337343)

也错过了你使用linux环境，所以你真的很喜欢这个：[https ://github.com/tobiasgies/php-switch](https://github.com/tobiasgies/php-switch)

安装您需要的所有 php 版本，并使用这个小小的 bash 脚本在它们之间切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:30:02.347

也许[phpfarm](http://cweiske.de/tagebuch/Introducing%20phpfarm.htm)可以帮助你......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T03:43:26.087

运行时`./configure`，添加`--prefix=/usr/local/php-{version}`（将 {version} 替换为 php 版本）。然后运行某个版本的脚本：

```
/usr/local/php-{version}/bin/php script.php 
```

## 在 CGI 环境下运行

当您想要切换 php 版本时，从`/usr/local/bin/php-cgi`to制作符号链接，然后重新制作符号链接并重新启动服务器。`/usr/local/php-{version}/bin/php-cgi`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:42:53.153

也许有点题外话，但对于 windows 下的本地开发，一些 WAMP 堆栈提供了出色的一键切换 php 版本。我在以下方面有过积极的经历：

*   [http://www.wampserver.com](http://www.wampserver.com)
*   [http://www.uniformserver.com](http://www.uniformserver.com)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T09:12:26.727

不确定这对你来说是否清楚，但如果不是，请告诉我:)

**cli**

对于简单的`cli`测试，您可以将每个版本安装到它们自己的文件夹中，例如`/usr/local/php-5.4/bin`,`/usr/local/php-5.3.10/bin`等。

**快速cgi**

有一段时间你可以在 FastCGI 模式下运行 PHP。您可以让几个版本同时运行并将它们绑定到不同的端口，例如`:9000`, `:9001`,`:9002`等。

下一步是在 Apache、Nginx、Lighttpd 或 Node.js 中设置多个基于名称的虚拟主机。每个虚拟主机绑定到另一个 FastCGI 进程，因此使用不同版本的 PHP。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T13:24:57.787

也许这对于您需要的东西来说太过分了，但是如果您不介意使用虚拟机[Vagrant](http://vagrantup.com/)可能会有所帮助。

# linq - 为什么我得到重复的行插入？

> ID：10640678
> 
> 赞同：0
> 
> 时间：2012-05-17T17:38:38.760
> 
> 标签：linq, windows-phone-7, sql-server-ce

我有用于数据库映射的 windows phone 7 应用程序和类。Poll 类如下所示：

```
 [Table]
public class Poll // :BaseModel
{
    //private int _pid;
    //private string _pdesc;
    //private bool _pisopen;
    //private string _pname;
    //private bool _prandom;
    //private string _qlastupdticks;
    //private string _ticks;

    [Column(DbType = "INT NOT NULL IDENTITY(1,1)", IsPrimaryKey = true, IsDbGenerated = true)]
    public int id { get; set; }

    [Column(DbType = "INT")]
    public int pid { get; set; }
    //{
    //    get { return _pid; }
    //    set { SetValue(ref _pid, value, GetPropertyName(MethodBase.GetCurrentMethod())); }
    //}

    [Column]
    public string pdesc { get; set; }
    //{
    //    get { return _pdesc; }
    //    set { SetValue(ref _pdesc, value, GetPropertyName(MethodBase.GetCurrentMethod())); }
    //}

    [Column]
    public bool pisopen { get; set; }
    //{
    //    get { return _pisopen; }
    //    set { SetValue(ref _pisopen, value, GetPropertyName(MethodBase.GetCurrentMethod())); }
    //}

    [Column]
    public string pname { get; set; }
    //{
    //    get { return _pname; }
    //    set { SetValue(ref _pname, value, GetPropertyName(MethodBase.GetCurrentMethod())); }
    //}

    [Column]
    public bool prandom { get; set; }
    //{
    //    get { return _prandom; }
    //    set { SetValue(ref _prandom, value, GetPropertyName(MethodBase.GetCurrentMethod())); }
    //}

    [Column(DbType = "NVARCHAR(255)")]
    public string qlastupdticks { get; set; }
    //{
    //    get { return _qlastupdticks; }
    //    set { SetValue(ref _qlastupdticks, value, GetPropertyName(MethodBase.GetCurrentMethod())); }
    //}

    [Column(DbType = "NVARCHAR(255)")]
    public string ticks { get; set; }
    //{
    //    get { return _ticks; }
    //    set { SetValue(ref _ticks, value, GetPropertyName(MethodBase.GetCurrentMethod())); }
    //}

    public override bool Equals(object obj)
    {
        var item = obj as Poll;
        if (item != null)
        {
            Equals(item);
        }
        return false;
    }

    public bool Equals(Poll other)
    {
        if (ReferenceEquals(null, other)) return false;
        return (other.pid == pid);
    }

    public override string ToString()
    {
        return string.Format("{0}_{1}", GetType().Name, pid);
    }

    public override int GetHashCode()
    {
        return ToString().ToUpper().GetHashCode();
    }
} 
```

保存方法如下所示：

```
 public bool RowsSave<T>(IEnumerable<T> entities, out string error)
    {
        error = string.Empty;
        bool res;
        var type = typeof (T);

        using (var ctx = new PpaDataContext(_connectionString))
        {
            try
            {

                var entitesInDb = ctx.GetTable(type).Cast<T>().ToList();

                var entitesForSave = new List<T>();

                foreach (var entity in entities)
                {
                    if (!entitesInDb.Contains(entity))
                    {
                        entitesForSave.Add(entity);
                    }
                    else
                    {
                        var index = entitesInDb.IndexOf(entity);
                        foreach (var prop in PropertiesGet(entity))
                        {
                            prop.SetValue(entitesInDb[index], prop.GetValue(entity, null), null);
                        }
                    }
                }
                if(entitesForSave.Count > 0)
                {
                    ctx.GetTable(type).InsertAllOnSubmit(entitesForSave);
                }
                ctx.SubmitChanges();
                res = true;
            }
            catch (Exception ex)
            {
                error = string.Format("{0}", ex.Message);
                res = false;
            }
        }
        return res;
    } 
```

当我尝试插入时，每个对象插入两次。这段代码有什么不正确的？RowsSave 方法仅调用一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T21:52:15.713

这是事后的一点，但我遇到了完全相同的问题。这与重写的相等运算符中的错误有关。在这种特定情况下，出现问题是因为代码没有返回 Equals 函数的值：

```
public override bool Equals(object obj)
{
    var item = obj as Poll;
    if (item != null)
    {
        Equals(item);
    }
    return false;
} 
```

该代码将始终返回 false。更正后的代码应该是：

```
public override bool Equals(object obj)
{
    var item = obj as Poll;
    if (item != null)
    {
        return Equals(item);
    }
    return false;
} 
```

LINQ-to-SQL 在插入后使用对象等于比较。我不确定在什么情况下发生这种情况以及发生这种情况的原因，但如果比较返回 false，它会再次运行插入。如果您遇到相同的行为，请检查您的实体的任何重写的相等方法是否正确。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T20:28:44.450

我认为你不需要这条线：

```
ctx.SubmitChanges(); 
```

由于正在在线上进行插入：

```
ctx.GetTable(type).InsertAllOnSubmit(entitesForSave); 
```

# javascript - 我怎样才能正则表达式这个数组/字符串？

> ID：10640679
> 
> 赞同：0
> 
> 时间：2012-05-17T17:38:44.610
> 
> 标签：javascript, regex

```
array = ['item1', 'item2', 'item3', 'item4']
output = array.toString() 
```

这让我明白了`"item1,item2,item3,item4"`，但我需要`"item1, item2, item3, and item4"`用空格和“和”把它变成

我如何构建一个正则表达式过程来执行此操作，而不是子字符串和查找/替换？

这是最好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:42:09.380

试试这个：

```
var array = ['item1', 'item2', 'item3', 'item4'];
array.push('and ' + array.pop());
var output = array.join(', ');
// output = 'item1, item2, item3, and item4' 
```

* * *

编辑：如果你真的想要一个基于正则表达式的解决方案：

```
var output = array.join(',')
    .replace(/([^,]+),/g, '$1, ').replace(/, ([^,]+)$/, ' and $1'); 
```

* * *

另一个编辑：

这是另一种不会与原始`array`变量混淆的非正则表达式方法：

```
var output = array.slice(0,-1).concat('and ' + array.slice(-1)).join(', '); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:21:57.240

这个版本处理了我能想到的所有变化：

```
function makeList (a) {
  if (a.length < 2)
    return a[0] || '';

  if (a.length === 2)
    return a[0] + ' and ' + a[1];

  return a.slice (0, -1).join (', ') + ', and '  + a.slice (-1);
}    

console.log ([makeList ([]), 
              makeList (['One']), 
              makeList (['One', 'Two']), 
              makeList(['One', 'Two', 'Three']),
              makeList(['One', 'Two', 'Three', 'Four'])]);

// Displays : ["", "One", "One and Two", "One, Two, and Three", "One, Two, Three, and Four"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:39:50.400

```
var output = array.join(", ");
output = outsput.substr(0, output.lastIndexOf(", ") + " and " + output.substr(output.lastIndexOf(" and ")); 
```

# java - NamespaceHandler for XML 的配置错误

> ID：10640680
> 
> 赞同：1
> 
> 时间：2012-05-17T17:38:54.773
> 
> 标签：java, spring, google-app-engine, spring-mvc

为什么我会收到此错误（对于我的 Appengine Web 应用程序）：

```
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/oxm]
Offending resource: ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml] 
```

servlet-context.xml 文件何时存在？

# javascript - Javascript通配符？

> ID：10640685
> 
> 赞同：-1
> 
> 时间：2012-05-17T17:39:09.587
> 
> 标签：javascript, jquery, wildcard

我有一些与插件一起使用的 Javascript，以便静态文本链接对应于 jquery 滑块中的特定幻灯片。它看起来像这样：

```
$("a.gibbs").click(function(){
  $('#anyslider').anythingSlider('.gibbs');
  });
}); 
```

所以基本上，任何带有 .gibbs 类的链接都会将滑块移动到带有 .gibbs 类的 li。

我想知道的是，因为我有近 50 张幻灯片，有什么办法可以说“任何带有类 .x 的链接都会将滑块移动到具有相同类 .x 的 li”——而无需编写新的所有 50 个类的 javascript？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:50:10.463

如果我理解你，那么是的。

假设元素上只有一个类获取处理程序，

```
$("a[class]").click(function(){
  $('#anyslider').anythingSlider('li.' + this.className);
}); 
```

这会将处理程序应用于具有至少一个类的*任何元素。* `a`您可能希望缩小范围，但如果没有您提供的更多信息，我不知道该怎么做。

此外，可能会有更好的解决方案，但同样，我们需要更多信息。

* * *

即使有多个类，只要其中一个类与目标匹配，您就可以使其工作。

```
$("a[class]").click(function(){
  $('#anyslider').anythingSlider('li.' + this.className.split(/\s+/).join(',li.');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:48:56.253

任何给定元素都可以有多个类名。

所以：`<a class='slideme' id='gibbs'>Slideable stuff...</a>`

这取决于`anythingSlider()`方法期望作为参数的内容，但如果它接受 ID 而不是类，您可以这样做：

```
$("a.slideme").click(function(){
  $('#anyslider').anythingSlider('#'.this.id);
}); 
```

如果它接受 DOM 对象或 jQuery 对象，则分别使用`this`or `$(this)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:45:02.223

不，你不能。您的脚本如何知道哪些类的含义？当然你可以把它放在一个循环中：

```
var $slider = $('#anyslider');
["gibbs", "gobbs", "gabbs", ...].forEach(function(className) {
     $("a."+className).click(function(){
         $slider.anythingSlider('.'+className);
     });
}); 
```

或者，如果每个链接上只有一个类：

```
$("a.gibbs, a.gobbs, a.gabbs, ...").click(function moveToMyClass() {
     $('#anyslider').anythingSlider('.'+this.className);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:51:11.583

查看 API，您似乎可以执行类似的操作

```
$("a.gibbs").click(function(){
  var slide = $('#anyslider ' + this.className));
  $('#anyslider').anythingSlider(slide.index());
}); 
```

# c - 将视频流式传输到 PCIE 插槽

> ID：10640690
> 
> 赞同：2
> 
> 时间：2012-05-17T17:39:20.470
> 
> 标签：c, linux, video-streaming, fpga, pci

我希望能够将视频从连接到我的计算机的相机直接传输到我通过 PCIE 连接到我的计算机的 FPGA。

我不介意使用 javascript 或 C# 之类的高级语言来执行此操作（因为我知道这些语言具有视频流功能），但我认识到为了达到该级别的硬件，我可能必须使用C（我很清楚）。

我只是想知道是否有某种路线我必须走才能完成此任务，例如安装 Linux（它是 Windows 7 计算机），或使用特定语言，或者是否有一个库已经这样做了.

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:54:44.060

我可能是错的，但在我看来你需要为你的硬件编写一个内核驱动程序。

这意味着您需要学习内核开发。对于 Windows，您需要 WDK、Windows 驱动程序工具包。

我不熟悉Linux内核开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:24:34.643

这样做的“正确”方法可能是通过 DMA 通道来完成，但如果它只是一个标准视频流，你应该能够处理更简单的编程 I/O (PIO)，这应该给你如果操作正确，在通过 PCIe x1 链路写入时高达 30MB/s - 尽管这将在您的 PC 上使用比 DMA 更多的处理器资源。

在我的硕士论文预项目期间，我致力于通过 PCI Express 将 FPGA 连接到 PC - 可以在此处找到 pdf 版本：[http](http://loejer.dk/files/FORK,%20pdf.zip) ://loejer.dk/files/FORK,%20pdf.zip（journal2-5 pdf可能是最感兴趣的）

它涵盖了 FPGA 方面（使用 Xilinx Spartan3，但与 Spartan6T 基本相同），以及 Windows (XP) 和 Linux 驱动程序。

# c++ - novtable 接口中的虚拟析构函数可以吗？

> ID：10640693
> 
> 赞同：3
> 
> 时间：2012-05-17T17:39:27.923
> 
> 标签：c++

我有一个 Visual Studio 2008 C++03 项目，其中我有一个声明为`_declspec( novtable )`. 例如：

```
class _declspec( novtable ) IFoo
{
public:
    virtual void FooDo() const = 0;
};

class Foo : public IFoo
{
public:
    ~Foo() { printf( "~Foo()\r\n" ); };
    void FooDo() const { printf( "FooDo()\r\n" ); };
};

int main( int argc, char* argv[] )
{
    IFoo* foo = new Foo();
    foo->FooDo();
    delete foo;
    return 0;
} 
```

因为`IFoo`没有虚拟析构函数，所以`Foo`从不调用具体析构函数。

输出：

```
FooDo() 
```

期望的输出：

```
FooDo()
~Foo() 
```

但是，在[MSDN](http://msdn.microsoft.com/en-us/library/k13k85ky%28v=vs.71%29.aspx)中，对在声明的接口类中调用函数有一个可怕的警告`novtable`。“*如果你试图实例化一个标有 novtable 的类，然后访问一个类成员，你将收到访问冲突 (AV)*。” 所以添加一个`virtual ~IFoo() { };`成员听起来可能是一件坏事。（虽然在我的测试中，它似乎工作正常。）

如何正确地从中获得所需的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T17:46:16.523

在接口类中包含一个虚拟析构函数应该没问题。您已经包含了另一个虚拟方法并调用了它，因此析构函数应该没有什么不同。

的效果`novtable`是*vtable`IFoo`*没有被初始化。不过没关系，因为您从不直接实例化`IFoo`. 相反，您实例化该类的后代。后代有一个 vtable，并且*该*vtable 使用指向方法的指针正确初始化`Foo`（并且`IFoo`，如果`IFoo`有任何`Foo`不覆盖的非纯虚拟方法）。`~IFoo`从内部调用`Foo`是非虚拟调度，因此`IFoo`仍然不需要 vtable。

# jquery - 简单的 JQuery UI 变量传递问题（语法）

> ID：10640696
> 
> 赞同：0
> 
> 时间：2012-05-17T17:39:41.037
> 
> 标签：jquery, jquery-ui, variables

[http://jsfiddle.net/danesoul/tSCus/2/](http://jsfiddle.net/danesoul/tSCus/2/) - 这是简单的 JQuery UI 选项卡界面的工作示例。

定义curent_tab 的注释字符串不起作用 - 导致选项卡崩溃。

请帮助我正确编写此语法。

**代码的一般概念：**我需要在我的函数 MySelect()

1.  ***保持当前选定选项卡索引的***变量

**   变量保留在 OnSelect 事件发生时***选择的选项卡的索引。**** 

 *有一部分更复杂的解决方案，强烈需要这两个值以供将来比较。

***jsfiddle JS代码的副本在这里：***

```
function MySelect(event, ui){
    var clicked_tab = ui.index //new clicked tab 0-1-2 indexes
    alert(clicked_tab); 
    alert(curent_tab +' / '+ clicked_tab);     
}

$(function() {
    $('#tabs').tabs({
        //var curent_tab = ui.index; //befor new one clicked 0-1-2
        select: function(event, ui) {
            MySelect(event, ui);
        }
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:49:53.030

如果我理解正确，您想获取当前选项卡并单击选项卡。试试下面的代码，

[**演示**](http://jsfiddle.net/skram/tSCus/4/)

```
$(function() {
    var current_tab;
    var clicked_tab;

    $('#tabs').tabs({
        show: function(event, ui) {
            current_tab = ui.index;
        },
        select: function(event, ui) {
            clicked_tab = ui.index; //befor new one clicked
            MySelect(event, ui);
        }
    });

    function MySelect(event, ui) {
        //clicked_tab = ui.index //new clicked tab
        alert(current_tab + ' / ' + clicked_tab);
    }
}); 
```*

# asp.net - ViewModel 在 Add [HttpPost] 方法上为空

> ID：10640697
> 
> 赞同：0
> 
> 时间：2012-05-17T17:39:44.703
> 
> 标签：asp.net, asp.net-mvc-3, viewmodel

我有以下内容`ViewModel`：

```
public class CategoryViewModel
{
    public Category Category { get; set; }
    public IList<Category> Categories { get; set; }
    public IList<Product> Products { get; set; }

    public IEnumerable<SelectListItem> CategorySelectItems
    {
        get { var ret = new List<SelectListItem>();
        if(Categories==null)
            return ret;

            ret.AddRange(Categories.Where(x => (Category == null || x.Id != 
                        Category.Id)).Select(category => new SelectListItem 
                                     { Text = category.Name, Value = 
                                        category.Id.ToString()}));
            return ret;
        }
    }

    public CategoryViewModel(){}
} 
```

以下是控制器：

```
namespace mysite.com.Controllers{
    public class CategoryController : Controller{
        private IRepository<Category> _repository;
        private IRepository<Product> _productRepo;
        private CategoryViewModel _categoryViewModel;

        public CategoryController(){
            _repository = new CategoryRepository();
            _productRepo = new ProductRepository();
        }

        [HttpGet]
        public ActionResult Index(){
           return View(new CategoryViewModel{Categories=_repository.GetAll()});
        }

        [HttpGet]
        public ActionResult Add(){
            return View(new CategoryViewModel{
           Category = new Category(), Categories= _repository.GetAll()});
        }

        [HttpPost]
        public ActionResult Add(CategoryViewModel category){
            if (ModelState.IsValid){
                _repository.Save(category.Category);
                return RedirectToAction("Index");
            }
            return View(category);
        }
    }
} 
```

这是我认为的代码：

```
@model mysite.com.ViewModels.CategoryViewModel

@using (Html.BeginForm("Add", "Category", FormMethod.Post))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Add Category</legend>
        @Html.HiddenFor(x => x.Category.Id)
        <div class="editor-label">
            @Html.LabelFor(x => x.Category.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(x => x.Category.Name)
            @Html.ValidationMessageFor(x => x.Category.Name)
        </div>
        <div class="editor-label">
            @Html.LabelFor(x => x.Category.ParentCategory)
        </div>
        <div class="editor-field">
            @Html.DropDownList("ParentCategory", 
                     Model.CategorySelectItems,"--select parent category--")
            @Html.ValidationMessageFor(x => x.Category.Name)
        </div>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

但是在我的控制器的`[HttpPost] Add`方法中，`category`对象（类型`CategoryViewModel`）是空的:(

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:59:37.153

您的模型不可反序列化。你的模型只能反序列化原始属性和原始属性的集合，没有太多帮助，而且这些帮助通常是不值得的。

您的模型应如下所示：

```
public class CategoryAddModel
{
    //these values are used to populate the view, but will not deserialize
    public IList<Category> AvailableCategories { get; set; }

    //these values are deserializable
    public int CategoryId {get;set;}
    public string CategoryName {get;set;}
    public int ParentCategory {get;set;}
}

public class CategoryIndexModel
{
    public IList<Category> Categories { get; set; }
} 
```

您的`Add.cshtml`视图看起来像这样：

```
@model mysite.com.ViewModels.CategoryAddModel

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Add Category</legend>
        @Html.HiddenFor(x => x.CategoryId)
        <div class="editor-label">
            @Html.LabelFor(x => x.CategoryName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(x => x.CategoryName)
            @Html.ValidationMessageFor(x => x.CategoryName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(x => x.Category.ParentCategory)
        </div>
        <div class="editor-field">
            @Html.DropDownList("ParentCategory", 
                new SelectList(Model.AvailableCategories, "Id", "Name"),
                "--select parent category--")
            @Html.ValidationMessageFor(x => x.ParentCategory)
        </div>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

您的`Index.cshtml`视图应如下所示：

```
@model mysite.com.ViewModels.CategoryIndexModel
@Html.ActionLink("Add Category", "Add")
<ul>
@foreach(var item in Model.Categories)
{
    <li> @{ // List your categories, hyperlinks to editing pages } </li>
}
</ul> 
```

你`CategoryController.cs`应该是这样的：

```
namespace mysite.com.Controllers{
    public class CategoryController : Controller
    {
        private IRepository<Category> _repository = new CategoryRepository();
        private IRepository<Product> _productRepo = new ProductRepository();

        public ActionResult Index()
        {
            var model = new CategoryIndexModel
            {
                Categories=_repository.GetAll()
            };

            return View(model);
        }

        public ActionResult Add()
        {
            var model = new CategoryAddModel()
            {
                AvailableCategories = _repository.GetAll()
            };
            return View(model);
        }

        [HttpPost]
        public ActionResult Add(CategoryAddModel model){
            if (ModelState.IsValid)
            {
                //TODO: (varies based on your repository model)
                //create a Category object from the model and persist it here.

                return RedirectToAction("Index");
            }
            //the complex collection does not return with the model; repopulate it here.
            model.AvailableCategories = _repository.GetAll()
            return View(model);
        }
    }
} 
```

这应该让您进入您正在寻找的一般区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:42:38.240

我认为您返回值太快了：

```
if(Categories==null)
        **return ret;**

        ret.AddRange(Categories.Where(x => (Category == null || x.Id != 
                    Category.Id)).Select(category => new SelectListItem 
                                 { Text = category.Name, Value = 
                                    category.Id.ToString()}));
        return ret;
    } 
```

# c++ - 将纹理应用到线框

> ID：10640704
> 
> 赞同：-2
> 
> 时间：2012-05-17T17:40:15.967
> 
> 标签：c++, opengl

我用 Opengl 画了一个wireSphere。然后我给它添加了纹理。它显示在这台机器上。但我没有在另一台机器上显示纹理。它只显示没有纹理的线球。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:29:55.943

检查它不工作的机器是否具有 OpenGL 扩展 GL_ARB_texture_non_power_of_two，并检查您的纹理是否具有非两倍宽度或高度的幂。较旧的硬件不支持尺寸不是 2 次方的纹理。

# api - 如何向 REST API 添加分页？

> ID：10640705
> 
> 赞同：3
> 
> 时间：2012-05-17T17:40:17.010
> 
> 标签：api, rest, servlets, twitter, pagination

我正在制作自己的推特语料库。我已经将 twitter 语料库的查询公开为使用 Java Servlet 的 REST API。但是，当我使用 REST API 进行搜索时，所有结果 (>1000) 都会在一个 HTTP 响应中返回，并且需要一段时间才能下载。

我计划像 Twitter API 一样为搜索添加分页。例如，

[http://search.twitter.com/search.json?q=blue%20angels&page=1&rpp=50](http://search.twitter.com/search.json?q=blue%20angels&page=1&rpp=50)

[http://search.twitter.com/search.json?q=blue%20angels&page=2&rpp=50](http://search.twitter.com/search.json?q=blue%20angels&page=2&rpp=50)

这里 rpp 是每页的结果。因此，在请求 1 中，您可以获取前 50 个结果，请求获取具有 50 个结果的下一页。

关于如何在 Java servlet 中完成此操作的任何建议？现在它非常慢，因为 HTTP 响应变得巨大..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:51:47.507

显然制作 page 和 rpp 参数，并在您的 servlet 中接收它们。

然后您需要使用这些值来有效地查询底层数据库。分页 SQL 语法可能因数据库而异。

对于 MySQL，例如，[这里](http://www.xarg.org/2011/10/optimized-pagination-using-mysql/)解释了如何进行有效的分页。

# symfony1 - symfony 中没有对类“stuff”对象的描述

> ID：10640706
> 
> 赞同：0
> 
> 时间：2012-05-17T17:40:17.013
> 
> 标签：symfony1, max, doctrine-query

我正在尝试执行此操作：

```
 $q = Doctrine_Query::create()
      ->select('MAX(s.ID) AS max')
      ->from('stuff s')
      ->execute(); 
```

我得到：没有描述类“东西”的对象。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:05:18.530

我只是找到它。它是 fetchOne() 而不是 execute()。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T16:47:24.397

***用户1038382：***

转到你的类的定义，在 lib\model\doctrine ，并在类中添加以下函数：

```
public function __toString() {
   parent::__toString();
   return $this->getNameOfTheFieldYouWantToDisplay();
} 
```

# extjs - Sencha2 - 如何从 Panel 获取数据到子字段集组件？

> ID：10640707
> 
> 赞同：3
> 
> 时间：2012-05-17T17:40:29.783
> 
> 标签：extjs, sencha-touch-2

如何从面板获取数据到子项？我在面板的记录属性中有数据，但我想用它来设置字段集中文本字段的值。

```
Ext.define('My.view.MyDetail', {
extend: 'Ext.Panel',
xtype: 'mydetail',
requires: [        
],

config: {
    refs: {
    },

    title: 'Details',
    styleHtmlContent: true,
    scrollable: 'vertical',

{
    xtype: 'fieldset',
    title: 'About You',
    instructions: 'Tell us all about yourself',
    items: [
        {
            xtype: 'textfield',
            name : 'firstName',
            label: 'First Name',
                            data?, record? how do I get something from this Panel's record?
        },
...
The data is here in this.getData().firstName
    listeners: {
    show: function(list, opts){
        console.log(this.getData().firstName);
    }
}   
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:10:45.907

向您的文本字段添加一个 id 使用：`Ext.getCmp('yourID').getValue()`//获取值 `Ext.getCmp('yourID').setValue(this.getData().firstName)`//设置值

# c++ - 如何在模板化基类中命名嵌套模板？

> ID：10640709
> 
> 赞同：4
> 
> 时间：2012-05-17T17:40:31.807
> 
> 标签：c++, templates, base-class, name-lookup

在以下设置中，我怎样才能使我可以引用`Bar`派生类中的名称`Derived<T>`？

```
template <typename T> struct Foo
{
    template <typename U> struct Bar { };
};

template <typename T> struct Derived : Foo<T>
{
    // what goes here?

    Bar<int> x;  // Error: 'Bar' does not name a type
}; 
```

我试过`using Foo<T>::Bar;`了，但这没有帮助。是否有任何类型的`using`声明可以使派生类知道嵌套基模板的名称，以便我可以保留简单的声明`Bar<int> x`？

我知道我可以这么说`typename Foo<T>::template Bar<int> x;`，但我有很多这样的情况，我不想用这么多冗长不必要地给代码增加负担。我也有很多不同的“ `int`s”，所以`typedef`每个嵌套模板实例的一个也不可行。

另外，此时我不能使用 GCC 4.7 也不能使用 C++11，因此我想要一个没有模板别名的“传统”解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T18:02:41.463

在 C++11 中，您可以使用别名模板：

```
template <typename T> struct Derived : Foo<T>
{
  template<typename X> using Bar = typename Foo<T>::template Bar<X>;
  Bar<int> x;
}; 
```

**编辑**

传统的解决方案是您已经说过的`typename Foo<T>:template Bar<int>`，或者模拟“模板类型定义”

```
template <typename T> struct Derived : Foo<T>
{
  template<typename X>
    struct Bar
    { typedef typename Foo<T>::template Bar<X> type; };
  typename Bar<int>::type x;
}; 
```

在语言中添加别名模板的原因之一是它们支持在 C++03*中不*容易表达的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:50:36.510

声明`x`为`Foo<T>::Bar<int> x;`对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:07:23.650

这有效：

```
template <typename T> struct Foo
{
    template <typename U> struct Bar { };
};

template <typename T> struct Derived : Foo<T>
{
    template<class W>
    struct Bar : public Foo<T>::template Bar<W> {

    };

    Bar<int> x;  
}; 
```

IDK 如果那是您正在寻找的东西，但它确实可以编译。

# blackberry - 无法在黑莓上创建具有透明背景的位图

> ID：10640719
> 
> 赞同：1
> 
> 时间：2012-05-17T17:40:57.667
> 
> 标签：blackberry

我正在尝试使用以下代码在黑莓上创建具有透明背景的位图。

```
 Bitmap bmp2 = new Bitmap(Bitmap.ROWWISE_16BIT_COLOR,w, h);
       bmp2.createAlpha(Bitmap.ALPHA_BITDEPTH_8BPP);
       bmp2.setARGB(new int[w*h], 0, w, 0, 0, w, h);
       Graphics g3 = Graphics.create(bmp2); 
       int orig = g3.getGlobalAlpha();
       g3.setGlobalAlpha(0);
       g3.setBackgroundColor(0x00ffffff);
       g3.clear();
       g3.setGlobalAlpha(orig);
       g3.setColor(Color.BLACK);
       g3.setFont(myFont);
       g3.drawText(sig.getText(),0,0); 
```

但我的图像总是有白色填充背景？关于我做错了什么的任何指示？谢谢

**编辑** 我刚刚意识到上面的代码适用于 os6+ 模拟器，但不适用于 OS5 模拟器。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:50:50.207

这是我用来创建 alpha 通道设置为完全透明的位图的实用程序函数：

```
public static Bitmap createTransparentAlphaedBitmap(int width, int height) 
{
    Bitmap bitmap = new Bitmap(width, height);
    bitmap.createAlpha(Bitmap.ALPHA_BITDEPTH_8BPP);

    int[] data = new int[width * height];
    Arrays.fill(data, 0);
    bitmap.setARGB(data, 0, width, 0, 0, width, height);

    return bitmap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:10:01.233

在互联网上搜寻解决方案后，我终于发现 BB OS5 SDK 中存在一个错误，该错误会在编码[http://supportforums.blackberry.com/t5/Java-Development/Bug-in-PNG-时从 png 图像中删除透明度- Encoding-Bitmap-to-PNG-with-transparency/td-p/208614](http://supportforums.blackberry.com/t5/Java-Development/Bug-in-PNG-Encoding-Bitmap-to-PNG-with-transparency/td-p/208614)，所以我不得不寻找适合我的 png 编码器。搜索后我发现了这个[http://code.google.com/p/qrcoder/source/browse/blackberry/src/th/co/yellowpages/javame/PNGEncoder.java?r=ae0257b8aa​​d8c231d80cf34a244e402b3fecee22](http://code.google.com/p/qrcoder/source/browse/blackberry/src/th/co/yellowpages/javame/PNGEncoder.java?r=ae0257b8aad8c231d80cf34a244e402b3fecee22)它对我来说完美无缺。我是这样用的。

```
 Bitmap bmp2 = new Bitmap(Bitmap.ROWWISE_16BIT_COLOR,w, h);
       bmp2.createAlpha(Bitmap.ALPHA_BITDEPTH_8BPP);
       int[] d = new int[w*h];
       Graphics g3 = Graphics.create(bmp2);
       g3.setGlobalAlpha(0);
       g3.setBackgroundColor(16777215); g3.clear();   
       g3.setGlobalAlpha(255);
       g3.setFont(myFont);
       g3.drawText(sig.getText(),0,0);     
       bmp2.getARGB(d, 0, w, 0, 0, w, h);
       encBytes = PNGEncoder.toPNG(w, h, d, true); 
```

我刚刚将**encBytes**写入一个文件，我得到了完美的透明 PNG！

# python - 本地主机服务器拒绝连接

> ID：10640720
> 
> 赞同：6
> 
> 时间：2012-05-17T17:41:00.950
> 
> 标签：python, django, localhost, port

我刚刚在 Dreamhost 服务器上设置了 Django。浏览所有内容，但似乎无法获得欢迎页面。我到了它说“开发服务器在 127.0.0.1:8002 运行（尝试使用 8000 但得到”该端口已在使用错误）的地步。当我尝试在 Chrome 浏览器中访问该地址时，出现错误 102 (net::ERR_CONNECTION_REFUSED)：服务器拒绝连接。

知道为什么会这样吗？我陷入了一个循环，我不知道发生了什么。真诚感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T18:36:03.810

您需要知道您的服务器的 IP 或域地址。如果你使用 example.com 来访问你的服务器 SSH，那么启动 Django

> ./manage.py 运行服务器 0.0.0.0:8002

并使用它访问它`http://example.com:8002`应该可以工作。但是，如果您只知道 IP，那么使用该 IP 启动 Django，而不是

> 0.0.0.0

并使用`http://YOUR-IP:8002`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-17T17:45:29.503

问题是 django 正在监听`localhost`这意味着您将无法直接通过互联网访问服务器。要更改它，您可以为 django 指定端口/主机名：

```
./manage.py runserver 0.0.0.0:8002 
```

如果您不想通过 Internet 直接访问服务器，您可以使用 ssh 进行端口转发：

```
ssh -L8002:localhost:8002 server 
```

这将通过 ssh 将您的本地端口 8002 转发到远程服务器。

# directshow - directshow 媒体类型在哪里记录？

> ID：10640724
> 
> 赞同：0
> 
> 时间：2012-05-17T17:41:46.413
> 
> 标签：directshow

MSDN 文档类型和子类型 GUID，但不是媒体样本有效负载的实际字节格式。某些类型在其他标准中定义，例如 MPEG2 类型。对于大多数类型，您必须猜测和测试。Windows SDK 中是否有带有定义的标头？

# c# - 删除特定节点的复选框

> ID：10640732
> 
> 赞同：1
> 
> 时间：2012-05-17T17:42:17.420
> 
> 标签：c#, treeview, nodes

我最近一直在玩treenodes，我希望能够在创建特定节点后从特定节点中删除一个复选框，具体取决于我的控件是1还是0。我完成了大部分代码，只是这部分我不太确定如何实现。

```
private void ListDirectory(TreeView treeView, string path) 
        {     
            treeView.Nodes.Clear();   
            var rootDirectoryInfo = new DirectoryInfo(path);    
            treeView.Nodes.Add(CreateDirectoryNode(rootDirectoryInfo)); 
        }     
    private static TreeNode CreateDirectoryNode(DirectoryInfo directoryInfo) 
    {

        var directoryNode = new TreeNode(directoryInfo.Name);

        foreach (var directory in directoryInfo.GetDirectories())
            directoryNode.Nodes.Add(CreateDirectoryNode(directory));

        foreach (var file in directoryInfo.GetFiles())
        {
            int check =0;                  
            try
            {
                string s = "";
                s = directoryInfo.FullName + "\\" + file.Name;
                List<string> row, row2 = new List<string>();

                using (StreamReader readFile = new StreamReader(s))
                {
                    row = (readFile.ReadLine().Split(',').ToList());
                    try 
                    {
                        row2 = (readFile.ReadLine().Split(',').ToList());
                        check = 1;
                    }
                    catch { }
                }

                TreeNode[] headerNodes = new TreeNode[row.Count];

                for (int i = 0; i < row.Count; i++)
                {
                    if (check == 0)
                    {
                        //IN HERE SOMEWHERE//
                        headerNodes[i].BackColor = Color.Red;
                        headerNodes[i].ForeColor = Color.White;
                    }
                    headerNodes[i] = new TreeNode(row[i]);

                }
                directoryNode.Nodes.Add(new TreeNode(file.Name, headerNodes));
            }
            catch 
            {
                directoryNode.Nodes.Add(new TreeNode(file.Name));
            }
        }         
        return directoryNode; 
    } 
```

我确信必须有一些简单的方法来从单个节点中删除一个复选框，而不是一次删除所有的复选框，我似乎无法在任何地方找到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:50:24.497

有一段时间没有这样做了，但以前从来没有可能删除单个复选框。一种解决方法是关闭复选框并使用图形而不是使用单击事件在选中和未选中之间切换。甚至可以扩展到更复杂的状态。

# java - 使用 hql 表达式而不是 Criteria 的动态 HQL 查询？

> ID：10640736
> 
> 赞同：5
> 
> 时间：2012-05-17T17:43:04.767
> 
> 标签：java, hibernate, hql

由于各种原因，我正在尝试编写部分动态的 HQL 查询而不求助于 Criteria API。我想知道是否有一种简单的方法可以使用 HQL 表达式短路 where 限制。例如，这是可以正常工作的原始查询：

```
SELECT customer 
FROM Customer as customer 
INNER JOIN customer.profile as profile 
WHERE profile.status IN :statusCodes
AND   profile.orgId IN :orgIds 
```

StatusCodes 是字符串列表，orgIds 是整数列表。但是，任何一个都是可选的，如果传递 null 而不是集合，则不应限制。我试图这样做：

```
SELECT customer 
FROM Customer as customer 
INNER JOIN customer.profile as profile 
WHERE (:statusCodes IS NULL OR profile.status IN :statusCodes)
AND   (:orgIds IS NULL OR profile.orgId IN :orgIds) 
```

不幸的是，这不起作用，但是是否有任何其他方法可能起作用，无论是使用不同的表达式还是传入默认值？

编辑：为了清楚起见，我正在寻找一种使用 NamedQuery 的方法，而不是以任何方式动态构建查询。

解决方案：我使用额外的查询参数来完成它。我创建了两个辅助方法：

```
private void setRequiredParameter(TypedQuery<?> query, String name, Object value) {
    query.setParameter(name, value);
}

private void setOptionalParameter(TypedQuery<?> query, String name, Object value) {
    query.setParameter(name, value);
    query.setParameter(name + "Optional", value == null ? 1 : 0);
} 
```

像这样的查询：

```
SELECT customer 
        FROM Customer as customer 
        INNER JOIN  customer.profile as profile 
        WHERE (:statusCodesOptional = 1 OR profile.status IN :statusCodes)
        AND (:orgIdsOptional = 1 OR profile.orgId  IN :orgIds) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T18:23:10.513

我的建议是将所有参数放在地图中并动态构建查询，在执行之前构建查询所需的所有参数，然后从地图中获取值：

```
Map<String, Object> pars = new HashMap<String,Object>();
pars.put("statusCodes", statusCodes);
pars.put("orgIds", orgIds);

StringBuilder b = "SELECT customer FROM Customer as customer INNER JOIN customer.profile as profile where 1 = 1";
if (statusCodes != null) {
  b.append(" and profile.status in :statusCodes");
}
if (orgIds != null) {
  b.append(" and profile.orgId in :statusCodes");
}

...

Query q = session.createQuery(b.toString());

...

for (String p : q.getNamedParameters()) {
  q.setParameter(p, pars.get(p));
} 
```

当然需要一些改进，例如在未设置参数时抛出异常，如果复杂度大于几个简单参数则使用类型化参数等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:31:56.137

如果你绝对必须避免动态查询，你可以这样做，但要牺牲两个额外的参数：

```
SELECT customer 
  FROM Customer AS customer 
  JOIN customer.profile AS profile 
 WHERE (profile.status IN :statusCodes OR :statusCodeCount = 0)
   AND (profile.orgId IN :orgIds OR :orgIdCount = 0) 
```

在您的 Java 代码中，您将执行以下操作：

```
session.getNamedQuery("your.query.name")
       .setParameterList("statusCodes", statusCodes)
       .setParameter("statusCodeCount", statusCodes.length)
       .setParameterList("orgIds", orgIds)
       .setParameter("orgIdCount", orgIds.length); 
```

您需要确保数组长度为零，而不是`null`提供额外的 if 检查来处理`null`场景。

尽管如此，HQL 确实更适合定义明确的（例如静态）查询。您可以解决动态参数，您将无法解决动态排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:11:18.763

您必须动态生成查询：

```
StringBuilder hql = 
    new StringBuilder("SELECT customer FROM Customer as customer INNER JOIN customer.profile as profile where 1 = 1")
if (statusCodes != null) {
    hql.append(" and profile.status IN :statusCodes");
}
if (orgIds != null) {
    hql.append(" and profile.orgId IN :orgIds");
} 
```

当然，您还必须将参数设置为查询，前提是它们不为空。

# java - 追加空白字符串的快速方法。

> ID：10640740
> 
> 赞同：1
> 
> 时间：2012-05-17T17:43:13.247
> 
> 标签：java, optimization, stringbuilder

我必须生成一个包含类的所有数据成员的字符串。例如，如果一个类定义是

```
class A    
 {
   private String field1;
   private String field2;
   private String field3;
   ...
   ...
 } 
```

然后我想生成一个按该顺序包含 field1、field2 和 field3 的字符串。但是，我想做的另一件事是确保以下规则 -

```
 field1 is of length 20\. If it is less than 20, pad it with blank spaces.
  field2 is of length 10\. If it is less than 10, pad it with blank spaces.
  field1 is of length 15\. If it is less than 15, pad it with blank spaces.
  ...
  ... 
```

我计划使用一个帮助类来构建这个字符串。我想使用 StringBuilder 来获取最终的字符串。所以我有类似的东西 -

```
 StringBuilder builder = new StringBuilder();

  Helper.addString(field1,20,builder); 
```

现在这个 addString 函数的实现是我关心的。对于不同的类，这个函数将被调用数千次。所以我想让它尽可能高效。问题是，**最有效的方法是什么**？目前，我有以下实现 -

```
 public static void addString(String field, int totalLengthOfField, StringBuilder builder)
 {
    int lengthOfField = field.length();
    int numberOfBlankSpacesToPutAfterString = totalLengthOfField - lengthOfField;

    if(numberOfBlankSpacesToPutAfterString >=0)
      {
        builder.append(field);
        for(int i=1; i<= numberOfBlankSpacesToPutAfterString; i++)
          {
            builder.append(" "); // append a blank space
          }
      }
    else
      {
        // throw exception - field is longer than the maximum allowed length.
      }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:50:10.783

Java 有一个[`Formatter`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)类，它支持为特定字段创建具有宽度定义的字符串，就像[`sprintf()`](http://linux.die.net/man/3/sprintf)在 C 中一样。在内部[`String.format()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)也使用一个`Formatter`对象。

也就是说，`Formatter`并不是那么快。您最好手动将字符串附加到 a`StringBuilder`并使用具有不同数量空格的字符串的小缓存，以避免总是附加单个空格......

例如，如果您知道填充大小将始终小于 20 个空格，则可以只创建一个`String[]`包含 0、1、2... 空格的字符串的表并完全跳过循环。如果没有这样的限制，您仍然可以一次附加 20 个空格的块，直到达到必要的填充大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:59:10.327

考虑检查 apache commons (StringUtils) 是如何实现的，他们已经遇到了和你一样的问题，并且他们已经优化了方法：

```
public static String rightPad(String str, int size, char padChar) {
    if (str == null) {
        return null;
    }
    int pads = size - str.length();
    if (pads <= 0) {
        return str; // returns original String when possible
    }
    if (pads > PAD_LIMIT) {
        return rightPad(str, size, String.valueOf(padChar));
    }
    return str.concat(repeat(padChar, pads));
}

public static String repeat(String str, int repeat) {
    // Performance tuned for 2.0 (JDK1.4)

    if (str == null) {
        return null;
    }
    if (repeat <= 0) {
        return EMPTY;
    }
    int inputLength = str.length();
    if (repeat == 1 || inputLength == 0) {
        return str;
    }
    if (inputLength == 1 && repeat <= PAD_LIMIT) {
        return repeat(str.charAt(0), repeat);
    }

    int outputLength = inputLength * repeat;
    switch (inputLength) {
        case 1 :
            return repeat(str.charAt(0), repeat);
        case 2 :
            char ch0 = str.charAt(0);
            char ch1 = str.charAt(1);
            char[] output2 = new char[outputLength];
            for (int i = repeat * 2 - 2; i >= 0; i--, i--) {
                output2[i] = ch0;
                output2[i + 1] = ch1;
            }
            return new String(output2);
        default :
            StringBuilder buf = new StringBuilder(outputLength);
            for (int i = 0; i < repeat; i++) {
                buf.append(str);
            }
            return buf.toString();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:02:22.573

只要您知道所需的最大填充（20），它就相当简单。

```
private static String spaces = "                    "; // Whatever you need max!

// your code to compute numberOfBlankSpacesToPutAfterString

if(numberOfBlankSpacesToPutAfterString >= 0) {
    builder.append(field);
    builder.append(spaces, 0, numberOfBlankSpacesToPutAfterString);
} else {
    // Report error
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:49:32.050

有什么理由不使用`String.format`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T17:49:36.280

使用静态方法

```
String.format("%"+numberOfBlankSpacesToPutAfterString+"s",string)' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T17:51:09.620

我可以看到至少一项优化。改变：

```
 if(numberOfBlankSpacesToPutAfterString >=0) 
```

至：

```
 if(numberOfBlankSpacesToPutAfterString >0) 
```

这样，如果你有 0 个空格要添加，你就永远不会进入 for 循环。没什么大不了的，但听起来每一点都很重要。

第二件事：需要构建器对象吗？你可能正在使用

```
 if(numberOfBlankSpacesToPutAfterString >0)
  {
    for(int i=1; i<= numberOfBlankSpacesToPutAfterString; i++)
      {
        field +=(" "); // append a blank space
      }
  } 
```

阅读其他人提到的内容，您可以通过添加 2 的幂的间距来进一步加快速度。

```
 if(numberspaces > 16)
      {field +="16spaceshere"
      numberspaces -= 16;
      }
 if(numberspaces > 8)...
 if(numberspaces > 4)... 
```

这将把它变成最多 4 个字段操作和 4 个 numberspacestoadd 操作，总共 8 个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-01T16:45:54.443

```
import  com.google.common.base.Strings

foo = Strings.repeat(" ", 10) 
```

# sql - SQL查询，连接多表，Oracle

> ID：10640743
> 
> 赞同：1
> 
> 时间：2012-05-17T17:43:36.093
> 
> 标签：sql, join

我有一个任务，我需要编写一个 SQL 查询，该查询将检索球员号码和为队长支付的罚金总额，这些球员的罚金总额超过 80 英镑。

我有三张桌子

球员（球员**编号**、姓名、姓名首字母、街道、城镇、邮政编码）

团队（**teamNo**， playerNo ，部门）

处罚（**paymentNo**，playerNo，penDate，金额）

粗体字表示主键。Teams 表中的 playerNo 表示球队队长。

我不知道如何加入三个表。但我的尝试是：

```
SELECT p1.playerNo, SUM(p2.amount)
FROM Players p1 INNER JOIN Teams t
   ON p1.playerNo = t.playerNo 
JOIN penalties p2
   ON p2.playerNo = p1.playerNo
GROUP BY playerNo
HAVING SUM(p2.amount) > 80; 
```

这是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:18:00.187

```
SELECT a.playerNo, a.playerName, SUM(c.amount) as amount, b.teamNo as Team
FROM players a, teams b, penalties c
WHERE a.playerNo = b.playerNo and a.playerNo = c.playerNo
Group By a.playerNo, c.teamNo
Having sum.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:54:41.410

Your query appears to be correct to return what you want. It does open the question of what to do if the same player is captain of more than one team, but that probably does not happen.

Do you want comments on the database structure?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:25:46.800

如果一名球员不能担任多个球队的队长，是的，您的查询是正确的。它只需要您替换`GROUP BY playerNo`为`GROUP BY p1.playerNo`.

但如果一名球员可以担任多支球队的队长，则会返回错误的结果。无论如何，这将为您提供正确的答案：

```
SELECT p1.playerNo, SUM(p2.amount)
FROM Players p1 
  JOIN penalties p2
    ON p2.playerNo = p1.playerNo
WHERE EXISTS
      ( SELECT *
        FROM Teams t
        WHERE p1.playerNo = t.playerNo
      ) 
GROUP BY p1.playerNo
HAVING SUM(p2.amount) > 80; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:15:55.837

```
select captaion_number , sum (amount) total_amount 
from (select t.playes.no   captaion_number , p.amount   amount 
from teams t ,  Penalties p
 where t.player_no = p.player_no ) 
group by captaion_number 
having total_amount > 80 ; 
```

# php - PHP中的延迟加载公共类数据成员

> ID：10640744
> 
> 赞同：2
> 
> 时间：2012-05-17T17:43:38.763
> 
> 标签：php, lazy-loading, public-members

我想在 PHP 中延迟加载类的公共数据成员。假设我们有以下类：

```
<?php
class Dummy
{
    public $name;
    public $age;
    public $status_indicator;
}
?> 
```

如果`$name`, `$age`and`$status_indicator`是私有数据成员，我会通过他们的 getter 方法延迟加载它们，但由于它们是公共的 - 我不清楚如何延迟加载它们。这可能吗？

**编辑**：有人评论说有一种方法`__get`可能有助于解决这个问题，但我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:51:49.960

您可以[`__get`](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)用来模拟在首次访问时真正动态加载的公共成员。当您尝试访问对象的未定义成员时，PHP 将调用`__get`并将您尝试访问的成员的名称传递给它。例如，如果类已经定义了一个方法，访问`$x->my_variable`将调用。`__get("my_variable")``__get_`

在此示例中，`$dummy->name`间接调用 getter 方法`getName`，该方法初始化一个名为`$_name`on first access 的私有成员：

```
<?php
class Dummy
{
  private $_name;

  public function __get($var) {
    if ($var == 'name') {
      return $this->getName();
    } else if ($var == 'age') {
      // ...
    } else {
      throw "Undefined variable $var";
    }
  }

  public function getName() {
    if (is_null($this->_name)) {
      // Initialize and cache the value for $name
      $this->_name = expensive_function();
    }
    return $this->_name;
  }
}

$dummy = new Dummy();
echo $dummy->name; 
```

您可以类似地定义和调用其他访问器，例如`getAge`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:51:54.737

这是我在最近的一个项目中使用的一些代码：

```
class EnhancedObject {
    #Store cached properties here
    private $lazyProperties = array();

    #Allow $object->prop to alias to $object->getProperty().
    #Also, allow caching of $object->loadProp() to $object->prop
    public function __get($property) {
        $getter = "get".ucfirst($property);
        $loader = "load".ucfirst($property);

        if(method_exists($this, $getter)) {
            return $this->$getter();
        }
        elseif(method_exists($this, $loader)) {
            if(!isset($this->lazyProperties[$property])) {
                $this->lazyProperties[$property] = $this->$loader();
            }
            return $this->lazyProperties[$property];
        }
    }

    #Allow $object->prop = $value to alias to $object->setProperty($value).
    public function __set($property, $value) {
        $setter = "set".ucfirst($property);
        $loader = "load".ucfirst($property);

        if (method_exists($this, $setter)) {
            return $this->$setter($value);
        }
        elseif(method_exists($this, $loader)) {
            $this->lazyProperties[$property] = $value;
        }
        return $this;
    }
} 
```

这意味着您只需将魔法弄乱一次，`__get`然后`set`简单地为您的方法命名正确的东西将使它们表现为 getter、setter 和惰性初始化器。

## 用法

```
class Dummy extends EnhancedObject {
    public $name;
    public $age;

    #Complex getters
    public function getSummary() {
        return "{$this->name}, aged {$this->age}";
    }

    #Cached getters for expensive operations
    public function loadStatusCount($id) {
        doExpensiveStuff();
        return 42;
    }
}

$d = new Dummy();
$d->name = "John Doe"
$d->age = 35

#getters
echo $d->summary; # echos "John Doe, aged 35"

#Lazy-initialized properties
echo $d->statusCount; # runs `doExpensiveStuff()`, echoing 42
echo $d->statusCount; # echos 42
echo $d->statusCount; # echos 42 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:54:00.617

我认为拥有这样的“延迟加载属性”并不是很好的编码风格。如果您需要一些延迟加载值，只需使用没有任何公共属性的 get 方法。

但是我喜欢这个问题:) 我也喜欢大多数解决方案，但我也想在这里添加我的通用解决方案：

```
class Dummy
{
    private $_name;
    private $_age;
    private $_number_of_status;

    public function __get($name) {
        $var = "_".$name;
        $lazyLoadingMethod = "_load_".$name;
        if (!method_exists($this, $lazyLoadingMethod )) {
            trigger_error("Cannot access private property Dummy::$$name", E_USER_ERROR);
            return;
        }
        if (!isset($this->$var)) {
            $this->$var = $this->$lazyLoadingMethod();
        }
        return $this->$var;
    }

    public function __set($name, $value) {
        $var = "_".$name;
        $settingMethod = "_set_".$name;
        if (!method_exists($this, $settingMethod )) {
            trigger_error("Cannot access private property Dummy::$$name", E_USER_ERROR);
        } else {
            $this->$settingMethod($value);
        }
    }

    public function _load_age() {
        // lazy load here
        return 42;
    }

    public function _set_name($name) {
        echo "my new name is $name";
        $this->_name = $name;
    }
} 
```

使用这个类，您甚至可以为您的属性提供读/写机制，因此“年龄”可以读取但不能设置，“姓名”可以设置但不能读取：

```
$d = new Dummy();
echo $d->age; //=> 42
$d->name = "Jon"; //my new name is Jon
echo $d->name; //=> Fatal error: Cannot access private property Dummy::$name in ...
$d->age = 100; //=> Fatal error: Cannot access private property Dummy::$age in ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:54:20.680

使用`__get()` [http://us.php.net/manual/en/language.oop5.overloading.php](http://us.php.net/manual/en/language.oop5.overloading.php)

```
public function __get($name)
{
    if ($name == "age" and $this->age == null)) {
        // lazy load $this->age
        return $this->age;
    }

    return $this->$name;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T17:54:27.707

首先：这正是您应该使用 getter/setter 方法的原因。这样，您可以在检索数据的过程中添加额外的逻辑。

下面是一个如何使用 __get() 实现类公共成员访问的示例：

```
class Dummy {
    private $lazyMembers = array(
        'name' => 'NameOfTheClass'
    );

    public function __get($key) {
        if (isset($this->lazyMembers[$key])) {
            $obj = new $this->lazyMembers[$key]();
            $this->$key = $obj;
            return $obj;
        }

        // ..throw exception or whatever
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T17:52:03.023

为了扩展评论，您可以使用一个字段数组和一个小魔术方法来处理加载操作：

```
<?php
class Dummy
{
    protected $fields = array(
        'name' => null, 
        'age' => null,
        'etc' => null
    );

    public function __get ($key) {
        if (array_key_exists($key, $this->fields)) {
            if ($this->fields[$key] === null) {
                // do some kind of loading operation to set $value
                $this->fields[$key] = $value;
            }
            return $this->fields[$key];
        }
        return null;
    }
}
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T17:53:17.773

您可以简单地删除它们并使用魔术方法[__get()](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)

就像是：

```
class Dummy 
{ 
   public function __get($var_name) 
   {
      switch ($var_name) 
      {
        case 'name':
            // lazy load here
            return $val;
            break;

        case 'age':
            // lazy load here
            return $val;
            break;

        case 'number_of_status':
            // lazy load here
            return $val;
            break;
      }
   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-17T17:57:47.590

使用与 OP 相同的示例，您不能像保护/私有那样延迟加载公共成员。有几种解决方法，就像提到的 OP，使用 getter 方法来执行延迟加载逻辑。`__get()`不适用于同一类的公共成员，因为`__get()`永远不会调用对成员的直接访问。将它们隐藏在数组中将使方法`__get`或`getter`方法起作用，但这与将它们从公共可见性中删除基本相同，这显然是您要避免的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-17T18:21:12.027

据我了解您的问题，您想知道是否可以重载*公共*变量。

您已经知道 __get($name) 魔术方法，对吧？或者，也许您在谈论*getName()*、*getAge()*和 *getStatus_Indicator()*。

在任何情况下，作为公共属性，您都无法使用魔术方法。

我将仅列出它们以进行概念验证。

## 示例 1

```
<?php

class Dummy {
    public $name;
    public $age;
    public $status_indicator;

    public function __construct() {
        foreach($this AS $name => $value) {
            $this->$name = new LazyLoader($this, $name);
        }
    }
}

class LazyLoader {
    protected $object;
    protected $name;

    public function __construct($object, $name) {
        $this->object = $object;
        $this->name = $name;
    }
    public function load() {
        /* find the necessary $data somehow */
        $name = $this->name;
        $this->object->$name = $data;
        /*
           after the first call to LazyLoader::load
           the property no longer points to a LazyLoad
           object, but to the intended value
        */
    }
    public function __toString() {
        return($this->load());
    }
}

?> 
```

## 示例 2

```
<?php

class LazyCollectionWrapper extends ArrayObject {
    public function __construct($objects = array()) {
        parent::__construct($objects);
    }

    public function offsetGet($offset) {
        $this->collection[$offset]->lazyLoad();
        return($this->collection[$offset]);
    }
}

class Dummy {
    public $name;
    public $age;
    public $status_indicator;

    public function lazyLoad() {
        /* load stuff here */
    }
}

?> 
```

## 示例 3

```
<?php

class Dummy {
    public function __get() {
        /*
          load stuff here because undefined
          properties are caught by __get too
        */
    }
}

?> 
```

示例 3 关于结构的信息最少，但就内存而言，这是最好的方法。我们在谈论延迟加载的东西......即不将无用的东西加载到内存中，对吗？

我这样说是因为：

```
class x { protected $var1 = array(); protected $var2 = 0.0; } 
```

比吃掉更多的内存

```
class x { protected $var1; protected $var2; } 
```

甚至超过

```
class x { } 
```

我通过构建数百万个对象并比较峰值内存使用情况对其进行了测试。

# node.js - 访问 Mongoose.js 架构中 Enum 字段的有效值列表

> ID：10640749
> 
> 赞同：4
> 
> 时间：2012-05-17T17:43:59.120
> 
> 标签：node.js, mongoose

前几天，我在网上某处看到一条评论，告诉人们如何访问为 Mongoose.js 模式中的 Enum 字段定义的值列表。可悲的是，我没有将那个花絮或它的 URL 提交到内存中，现在我需要它！

有谁知道如何做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-18T15:30:02.530

这是你要找的吗？

```
var mongoose = require('./index')
, TempSchema = new mongoose.Schema({
salutation: {type: String, enum: ['Mr.', 'Mrs.', 'Ms.']}
});

var Temp = mongoose.model('Temp', TempSchema);

console.log(Temp.schema.path('salutation').enumValues);
var temp = new Temp();
console.log(temp.schema.path('salutation').enumValues); 
```

*来源：[https ://gist.github.com/953059](https://gist.github.com/953059)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-01T23:01:29.030

万一有人像我一样偶然发现这一点，在猫鼬 5.x 中对我有用的是：

```
Temp.schema.path('salutation').options.enums; 
```

# php - WordPress 中的 SWF 文件库

> ID：10640751
> 
> 赞同：0
> 
> 时间：2012-05-17T17:44:12.807
> 
> 标签：php, wordpress, plugins, flash, gallery

有没有办法在 Wordpress 帖子中显示 swf 文件库而不是图片？我需要在每个帖子中创建一个 Flash 动画库，但我不知道如何去做。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:44:06.950

如果您必须使用 Flash，那么我会使用[Slideshow Pro Director。WordPress](http://slideshowpro.net/news/archive/2010/12/slideshowpro-director-plugin-for-wordpress-now-available.php/)插件是免费的，但您需要一个 Slideshow Pro 许可证，价格仅为 30 美元。我喜欢它，因为它可以通过 xml 从文件夹中动态拉取图像。

# machine-learning - 如何利用 Hebbian 学习？

> ID：10640755
> 
> 赞同：26
> 
> 时间：2012-05-17T17:44:18.273
> 
> 标签：machine-learning, artificial-intelligence, neural-network, evolutionary-algorithm

我想升级我的进化模拟器以使用 Hebb 学习，就像[这个](http://www.youtube.com/watch?v=_m97_kL4ox0)。我基本上希望小动物能够学习如何寻找食物。我通过基本的前馈网络实现了这一点，但我一直坚持理解如何通过 Hebb 学习来做到这一点。Hebb 学习的基本原理是，如果两个神经元一起激发，它们就会连接在一起。

因此，权重更新如下：

```
weight_change = learning_rate * input * output 
```

我发现的关于这如何有用的信息非常稀缺，我不明白。

在我当前版本的模拟器中，当一个生物吃一块食物时，动作和输入（运动、眼睛）之间的权重会增加，我看不出这如何转化为这个新模型。这里根本没有空间判断它是否做对了，因为唯一的参数是输入和输出！基本上，如果一个输入激活了一个方向的运动，那么无论该生物是否在吃东西，重量都会继续增加！

我是否以错误的方式应用 Hebb 学习？仅供参考，我使用的是 Python。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-20T19:51:37.090

`Hebbs law`是一个绝妙的洞察力`associative learning`，但它只是图片的一部分。你是对的，按照你的做法实施，如果不加以控制，重量只会继续增加。关键是添加某种形式的规范化或限制过程。[Oja's rule](http://en.wikipedia.org/wiki/Oja%27s_rule)的 wiki 页面很好地说明了这一点。我建议你做的是在一个`post-synaptic divisive normalisation`步骤中添加，这意味着你将一个权重除以收敛在同一个突触后神经元上的所有权重的总和（即收敛在一个神经元上的所有权重的总和固定为`1`）。

您想做的事情可以通过构建一个使用`Hebbian learning`. 我不太确定您将什么作为输入传递到系统中，或者您是如何设置的。但是您可以查看[`LISSOM`](http://homepages.inf.ed.ac.uk/jbednar/research.html)哪个是[SOM 的 Hebbian 扩展（自组织图）](http://en.wikipedia.org/wiki/Self-organizing_map)。

在这种类型的层中，通常所有的神经元都可以相互连接。您传入输入向量，并允许网络中的活动稳定下来，这是一些稳定步骤。然后你更新权重。您在训练阶段执行此操作，在训练阶段结束时，输入空间中的关联项目将倾向于在输出映射中形成分组的活动补丁。

还值得注意的是，大脑是高度互连的，并且是高度递归的（即存在前馈、反馈、横向互连、微电路以及许多其他东西......）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T21:27:26.510

虽然 Hebbian 学习作为一个通用概念构成了许多学习算法（包括反向传播）的基础，但您使用的简单线性公式非常有限。不仅权重无限上升，即使网络已经学习了所有模式，而且网络只能完美地学习正交（线性独立）模式。

线性 Hebbian 学习甚至在生物学上都不合理。生物神经网络比你的大得多，而且神经元和它们之间的突触都是高度非线性的。在大型非线性网络中，您的模式接近正交的可能性更高。

所以，如果你坚持使用神经网络，我建议在权重中添加隐藏层神经元并引入非线性，例如 fraxel 提出的，以及在神经元的激发中——在这里你可以使用 sigmoid 函数，像`tanh`（是的，对“非触发”使用负值是好的，因为它可以导致减轻重量）。在其广义形式中，赫布规则可以表示为

```
weight_change = learning_rate * f1(input, weight) * f2(output, target_output) 
```

where`f1`和`f2`是一些函数。在您的情况下，没有`target_output`，因此`f2`可以随意忽略它。

为了让隐藏层中的神经元触发，从而在输入和输出之间建立连接，您可以将权重初始化为随机值。

但是神经网络真的有必要吗，甚至适合你的问题吗？您是否考虑过简单的相关性？我的意思是，赫布推导出他的规则来解释学习如何在生物系统中发挥作用，而不是作为最好的机器学习算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T01:51:05.803

我对这种类型的神经网络不是很熟悉，但看起来你希望它在不受监督的情况下像监督更新方法一样工作。这意味着你不能教它什么是正确的，它只会通过联想学习不同的东西。也就是说，它最终会将动作与特定的输入集群相关联。在您希望它通过反馈改进其决策的情况下，我认为仅 Hebbian 更新就足够了。不过，您可以将它与某种反向传播结合起来。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-16T07:38:30.210

你可以试试我的代码。

```
/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package modelhebb;

/**
 *
 * @author Raka
 */
public class ModelHebb {
    public static void main(String[] args) {
        Integer xinput[][]  = new Integer[][]{
            {1, 1},
            {1, -1},
            {-1, 1},
            {-1, -1}
        };
        Integer xtarget[]   = new Integer[]{
            1,
            -1,
            -1,
            -1
        };
        Integer xweight[]   = new Integer[xinput[0].length];
        System.out.println("\t Iterasi \t");
        Integer bayes   = 0;
        for (int i = 0; i < xtarget.length; i++) {
            for (int j = 0; j < xinput[i].length; j++) {
                int temp    = xweight[j]==null?0:xweight[j];
                xweight[j]  = temp + (xinput[i][j] * xtarget[i]);
                System.out.print("W"+j+": "+xweight[j]+"\t");
            }
            bayes   = bayes + xtarget[i];
            System.out.println("Bobot : " + bayes);
        }
    }
}
```

# python - 如何用 NumPy 获得累积分布函数？

> ID：10640759
> 
> 赞同：41
> 
> 时间：2012-05-17T17:44:34.247
> 
> 标签：python, numpy, histogram

我想用 NumPy 创建一个 CDF，我的代码是下一个：

```
histo = np.zeros(4096, dtype = np.int32)
for x in range(0, width):
   for y in range(0, height):
      histo[data[x][y]] += 1
      q = 0 
   cdf = list()
   for i in histo:
      q = q + i
      cdf.append(q) 
```

我在阵列旁行走，但程序执行需要很长时间。有一个具有此功能的内置功能，不是吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2015-05-26T13:33:11.933

使用直方图是一种解决方案，但它涉及对数据进行分箱。这对于绘制经验数据的 CDF 不是必需的。让我们`F(x)`计算有多少条目少于`x`然后它增加一，这正是我们看到的测量值。因此，如果我们对样本进行排序，那么在每一点我们将计数增加一（或分数增加 1/N）并绘制一个对另一个的图，我们将看到“精确”（即未分箱）经验 CDF。

以下代码示例演示了该方法

```
import numpy as np
import matplotlib.pyplot as plt

N = 100
Z = np.random.normal(size = N)
# method 1
H,X1 = np.histogram( Z, bins = 10, normed = True )
dx = X1[1] - X1[0]
F1 = np.cumsum(H)*dx
#method 2
X2 = np.sort(Z)
F2 = np.array(range(N))/float(N)

plt.plot(X1[1:], F1)
plt.plot(X2, F2)
plt.show() 
```

它输出以下内容

![在此处输入图像描述](../Images/34fd5f1ace613014676e42b6fb5506bd.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-17T19:15:18.177

我不太确定您的代码在做什么，但如果您有`hist`和`bin_edges`返回的数组，`numpy.histogram`您可以使用它`numpy.cumsum`来生成直方图内容的累积总和。

```
>>> import numpy as np
>>> hist, bin_edges = np.histogram(np.random.randint(0,10,100), normed=True)
>>> bin_edges
array([ 0\. ,  0.9,  1.8,  2.7,  3.6,  4.5,  5.4,  6.3,  7.2,  8.1,  9\. ])
>>> hist
array([ 0.14444444,  0.11111111,  0.11111111,  0.1       ,  0.1       ,
        0.14444444,  0.14444444,  0.08888889,  0.03333333,  0.13333333])
>>> np.cumsum(hist)
array([ 0.14444444,  0.25555556,  0.36666667,  0.46666667,  0.56666667,
        0.71111111,  0.85555556,  0.94444444,  0.97777778,  1.11111111]) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-21T18:48:23.067

numpy 版本 1.9.0 的更新。user545424 的回答在 1.9.0 中不起作用。这有效：

```
>>> import numpy as np
>>> arr = np.random.randint(0,10,100)
>>> hist, bin_edges = np.histogram(arr, density=True)
>>> hist = array([ 0.16666667,  0.15555556,  0.15555556,  0.05555556,  0.08888889,
    0.08888889,  0.07777778,  0.04444444,  0.18888889,  0.08888889])
>>> hist
array([ 0.1       ,  0.11111111,  0.11111111,  0.08888889,  0.08888889,
    0.15555556,  0.11111111,  0.13333333,  0.1       ,  0.11111111])
>>> bin_edges
array([ 0\. ,  0.9,  1.8,  2.7,  3.6,  4.5,  5.4,  6.3,  7.2,  8.1,  9\. ])
>>> np.diff(bin_edges)
array([ 0.9,  0.9,  0.9,  0.9,  0.9,  0.9,  0.9,  0.9,  0.9,  0.9])
>>> np.diff(bin_edges)*hist
array([ 0.09,  0.1 ,  0.1 ,  0.08,  0.08,  0.14,  0.1 ,  0.12,  0.09,  0.1 ])
>>> cdf = np.cumsum(hist*np.diff(bin_edges))
>>> cdf
array([ 0.15,  0.29,  0.43,  0.48,  0.56,  0.64,  0.71,  0.75,  0.92,  1\.  ])
>>> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-26T15:08:53.217

补充丹的解决方案。如果您的样本中有多个相同的值，您可以使用 numpy.unique ：

```
Z = np.array([1,1,1,2,2,4,5,6,6,6,7,8,8])
X, F = np.unique(Z, return_index=True)
F=F/X.size

plt.plot(X, F) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-09-21T16:55:41.720

我不确定是否有现成的答案，确切的做法是定义一个函数，如：

```
def _cdf(x,data):
    return(sum(x>data)) 
```

这将非常快。

# android - 在另一个应用程序中使用创建的 .so 文件 - Android NDK

> ID：10640762
> 
> 赞同：0
> 
> 时间：2012-05-17T17:44:44.167
> 
> 标签：android, android-ndk

我使用了 android - ndk - r8 并按照[LINK](http://trivedihardik.wordpress.com/2011/06/16/hello-world-example-using-ndk-in-android/)创建了一个 .so 库。现在我的目标是在另一个项目中使用这个库。我不想在那里复制完整的源代码，而是只想使用该库。我试图将整个 libs/armeabi/libAddition.so 库复制并粘贴到另一个应用程序的项目根目录，但是当我在其他应用程序中使用这些库时，应用程序崩溃了。该库由两个数字逻辑的简单添加组成。

**注意**它们在应用程序或 .so 文件中没有错误，并且错误日志中的错误是 unsatisfiedlinkerror。此外，我不想创建库项目或其他任何我只需要在我的另一个项目中使用这些 .so 文件的东西。

那么最好的方法是什么？我正在使用 Eclipse。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:21:21.813

您的 .so 有两个部分。有您要使用的实际 C 库，然后有 JNI 胶水代码。我敢打赌，您的应用程序崩溃的原因是因为 JNI 引用了您以前的应用程序中的包名称。如果要创建一个可以反复使用的库，则需要分别创建该库和 JNI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:36:53.570

[这篇](https://stackoverflow.com/questions/6165813/using-my-own-prebuilt-shared-library-in-an-android-ndk-project)文章可能有用。我试过了，它对我有用，但前提是我从相同的包名调用 System.loadLibrary。否则它会抛出一个 UnsatisfiedLinkError 但我没有深入了解什么是错的。

# sql-server - Symfony2 + Doctrine2 + SQL Server - 事务支持

> ID：10640763
> 
> 赞同：3
> 
> 时间：2012-05-17T17:44:49.927
> 
> 标签：sql-server, transactions, symfony, doctrine-orm

我正在 Symfony2 中开发一个连接到 SQL Server 实例的私有企业应用程序。我在处理 SQL Server 时遇到了很多问题，但到目前为止我已经解决了它，直到现在。我正在使用 FreeTDS + DBLib 连接到 SQL Server 实例，并且此驱动程序不支持事务。这导致我遇到以下问题：

每次我尝试持久化一个对象时，Symfony（或 Doctrine）都会抱怨：

```
request.CRITICAL: 
    PDOException: 
        This driver doesn't support transactions (uncaught exception) at /.../Doctrine/DBAL/Connection.php line 858 
```

我的第一个想法是禁用事务，因为我通过应用程序进行的数据修改很少。我已经通过 Doctrine's Documentation 搜索了该主题，但找不到任何相关信息。

所以，我的问题是：对于这种缺乏事务支持（一些配置选项，甚至编辑 Doctrine 的 DBAL 源）是否有任何解决方法。

并且：切换到 Propel 会更顺畅吗？我在他们的网站上读到他们支持 SQL Server 并且有关于如何配置 Propel 以便正确使用它的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:43:26.170

This is a PDO exception that's thrown whenever you try to start a transaction on a non-transactional database via PDO::beginTransaction().

Doctrine will typically handle transactions by queuing them up internally in a unit of work, and then writing them as a single optimised query upon flush().

Unfortunaly when a unit of work is commited (via flush) it appears to begin a transaction for you.

```
//UnitOfWork::commit($entity = null);
$conn->beginTransaction(); 
```

Which as far as I can tell suspends auto-commit mode on whatever DB driver you're using and triggers the error your getting whenever you attempt to persist something.

In short it doesn't appear that doctrine supports non-transactional database interactions.

It appears some have tried to tinker with the Annotation driver to allow them to specify the engine type to be non-transactional. Not sure how well this would work with the underlying ORM though.

[http://www.doctrine-project.org/jira/browse/DDC-972](http://www.doctrine-project.org/jira/browse/DDC-972)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:55:02.450

我发现我遇到的问题是因为我使用的驱动程序的日期时间格式。为了克服这个问题，我必须删除日期的 Timezone 部分，并覆盖捆绑引导代码中的 DateTimeType：

```
\Doctrine\DBAL\Types\Type::overrideType(
    "datetime", 
    "Doctrine\DBAL\Types\VarDateTimeType"
);

\Doctrine\DBAL\Types\Type::overrideType(
    "date", 
    "Doctrine\DBAL\Types\VarDateTimeType"
); 
```

我还分叉了学说的 dbal github 项目，以包含一个使用 dblib 作为连接代理的自定义驱动程序。根据我的项目的依赖关系，将教义-dbal 锁定到版本 2.1.6，我创建了[2.1.6](https://github.com/tiagoblackcode/doctrine-dbal/tree/2.1.6-dblib) -dblib 版本，您可以在任何时候使用 dblib 的驱动程序。

我在我的 fork 中使用[了 PDODblibBundle的代码库。](https://github.com/trooney/PDODblibBundle)在它的`Connection`类中，执行了一个`BEGIN TRANSACTION`命令，但我相信回滚是不可能的。

# wpf - WPF 扩展样式

> ID：10640767
> 
> 赞同：0
> 
> 时间：2012-05-17T17:44:57.380
> 
> 标签：wpf, listbox, styles

我有一个使用以下代码创建的列表框：

```
 <ListBox x:Name="listBox" ItemsSource="{Binding}" ItemContainerStyle="{StaticResource Office2010SilverListBoxItemStyle}"
         SelectionChanged="listBox_SelectionChanged">
</ListBox> 
```

现在我想为每个项目应用一个上下文菜单。我怎样才能使用我当前的风格，但有一个上下文菜单。我可以做一些类似这种风格的派生吗？如果您知道解决该问题的方法，那就太好了... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:10:06.193

如果您`Office2010SilverListBoxItemStyle`自己编写样式，您应该能够添加类似添加另一个 setter 的内容：

```
<Setter Property="ContextMenu">
    <Setter.Value>
        <ContextMenu>
            ...
        </ContextMenu>
    </Setter.Value>
</Setter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:28:37.047

要从样式派生，您可以使用 basedon 属性，例如：

```
<Style TargetType="{x:Type Button}" BasedOn="{StaticResource ButtonStyle1}">
  <Setter Property="Foreground" Value="Green"/>
</Style> 
```

# c# - 如何加载静态字段？

> ID：10640770
> 
> 赞同：2
> 
> 时间：2012-05-17T17:45:04.557
> 
> 标签：c#, .net, reflection.emit, il, ilasm

我正在通过 Reflection.Emit 生成具有静态字段 num1、num2 等的类型。

现在我不知道如何发出代码，将生成类型中的静态字段的内容加载到静态方法的评估堆栈上。到目前为止，我尝试过的是：

```
generator.Emit(Opcodes.Ldarg, 0);
generator.Emit(Opcodes.Ldfld, "num1"); 
```

但显然这不起作用，因为它试图在“this”上加载一个实例字段，而该字段并未提供给静态方法。

**我应该使用哪个操作码来访问静态字段？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T17:49:45.463

[`Opcodes.Ldsfld`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldsfld.aspx)

因此，假设您像`FieldBuilder num1 = ...`以前一样在某个地方创建了 num1 ，您可以通过以下方式将其加载到堆栈中`generator.Emit(Opcodes.ldsfld, num1);`

# xml - 国际化 XML 和 XSL 样式

> ID：10640774
> 
> 赞同：0
> 
> 时间：2012-05-17T17:45:19.523
> 
> 标签：xml, xslt

我有以下示例 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type='text/xsl' href='test.xsl'?>
<words>
<word xml:lang="en">English</word>
<word xml:lang="pl">Polish</word>
<word xml:lang="pl">Polish2</word>
<word xml:lang="en">English2</word>
</words> 
```

我正在尝试对其进行样式设置，以便仅显示英文单词。但是，当我尝试这样的事情时：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <xsl:template match="/">
        <html>
            <body>
                <xsl:for-each select="words/word">
                    <b><xsl:value-of select=".[lang('en')]" /></b><br />
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

什么都没有回来。我认为我在正确的轨道上，因为如果我有

```
<b><xsl:value-of select="." /></b><br /> 
```

他们都回来了，但我不确定如何对特定语言进行选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:06:28.873

尝试：

```
<xsl:for-each select="words/word[@xml:lang = 'en']">
  <b><xsl:value-of select="./text()" /></b><nr/>
</xsl:for-each> 
```

# entity-framework - 实体框架代码优先 - 没有真正的关系

> ID：10640778
> 
> 赞同：0
> 
> 时间：2012-05-17T17:45:39.950
> 
> 标签：entity-framework, ef-code-first

我必须创建一个允许在多个实体（表）之间创建连接的应用程序。例如：
- 人与房间之间的联系。
- 人与人之间的联系。
- 活动与人之间的联系。
等等等等等等

我计划创建一个没有真正数据库外键的连接表。该表具有以下字段： Connection1、Connection1Type、Connection2、Connection2Type
Type 字段定义实体类型。我认为这是最灵活的解决方案。

如何使用 Code First 方法解决它？？？我想，然后我定义我的实体，EF 模型构建器将尝试在表和连接表之间创建外键。在我的实体中，我想要一个名为“Connections”的属性。此属性包含此实体的所有连接。

可能吗？

提前致谢。

# iphone - 在 UITextview 中禁用放大镜

> ID：10640781
> 
> 赞同：12
> 
> 时间：2012-05-17T17:45:47.107
> 
> 标签：iphone, uiscrollview, uitextview

在`UITextview`长按触摸时，放大镜会出现。我怎样才能禁用它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-17T18:11:35.737

最后这个问题也解决了

这是供任何人需要的参考代码

在子类 UITextview 的 m 文件中添加了代码

```
-(void)addGestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
{
    //Prevent zooming but not panning
    if ([gestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]]) 
    {
        gestureRecognizer.enabled = NO;
    }
    [super addGestureRecognizer:gestureRecognizer];
    return;
} 
```

有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-03T09:27:24.277

这对我有用

```
@implementation CustomTextView 

- (NSArray *)selectionRectsForRange:(UITextRange *)range
{
    self.selectedTextRange = nil;
    return nil;
}

- (void)addGestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
{
    gestureRecognizer.delegate = self;

    [super addGestureRecognizer:gestureRecognizer];
    return;
}

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    return NO;
}

- (CGRect)caretRectForPosition:(UITextPosition *)position
{
    return [super caretRectForPosition:self.endOfDocument];
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if (([gestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]] && !gestureRecognizer.delaysTouchesEnded))
    {
        return NO;
    }
    else
        return YES;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-09T10:42:44.190

Swift 4 版本的@user1120133 的回答：

```
 override func addGestureRecognizer(_ gestureRecognizer: UIGestureRecognizer) {
      //Prevent long press to show the magnifying glass
      if gestureRecognizer is UILongPressGestureRecognizer {
        gestureRecognizer.isEnabled = false
      }

      super.addGestureRecognizer(gestureRecognizer)
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-30T11:51:15.743

Xamarin.iOS：

1.  创建自定义 UITextView
2.  覆盖`GestureRecognizerShouldBegin`您的方法`UITextView`

```
public override bool GestureRecognizerShouldBegin(UIGestureRecognizer gestureRecognizer)
{
    if (gestureRecognizer is UILongPressGestureRecognizer ||
        gestureRecognizer.Name != "UITextInteractionNameLinkTap")
    {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-25T14:39:18.670

@Irina 的答案部分适用于 iOS 9.x（尝试轻按，然后长按，您将获得放大覆盖），并在 iOS 10 上崩溃，原因如下：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“您无法更改 UIViewControllerPreviewing 失败关系手势识别器的委托”

以下代码适用于 iOS 9.x 和 10.x，适用于我能想到的每种点击和/或长手势组合。

> 请注意**，我不保证它会被 Apple 的审核接受**。

```
@implementation CustomTextView

- (void)addGestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
{
    NSArray *allowedGestures = @[ @"UILongPressGestureRecognizer", @"UIScrollViewDelayedTouchesBeganGestureRecognizer", @"UIScrollViewPanGestureRecognizer" ];

    if (![allowedGestures containsObject:NSStringFromClass([gestureRecognizer class])])
    {
        return;
    }

    if (([gestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]] && !gestureRecognizer.delaysTouchesEnded))
    {
        return;
    }

    [super addGestureRecognizer:gestureRecognizer];
}

@end 
```

我们需要`UIScrollViewDelayedTouchesBeganGestureRecognizer`并且`UIScrollViewPanGestureRecognizer`为了保持`UITextView`滚动的能力。这两个类都是私有 API 的一部分，**因此使用它需要您自担风险。**

# c# - 字符串数组属性返回表单上文本框的文本属性

> ID：10640782
> 
> 赞同：0
> 
> 时间：2012-05-17T17:45:48.003
> 
> 标签：c#, arrays, winforms

所以我有一个由脚本动态生成的表单，为每个作为参数提取的字符串都有一个标签和一个文本框。我希望用户填写每个文本框，然后选择 OK 按钮。之后我想处理每个文本框的每个项目。之前只有一项的时候，我写了一个很简单的属性来获取文本框的值。

```
Public string Text { get { return textbox1.Text; } } 
```

我希望我可以用动态数量的文本框做同样优雅的事情。

```
Public string [] Text { get { return **Each text box text as an array**; } } 
```

我已经考虑了一段时间，但我想不出一种优雅的方式来设置它，这是文本框添加到表单的方式......

```
string[] keywords = Environment.GetCommandLineArgs();
int placement = 10;
foreach (string keyword in keywords)
{
    if (keyword == keywords[0])
        continue;
    Label lbl = new Label();
    lbl.Text = keyword;
    lbl.Top = placement;
    this.Controls.Add(lbl);
    TextBox txt = new TextBox();
    txt.Top = placement;
    txt.Left = 100;
    this.Controls.Add(txt);

    placement += 20;
} 
```

我可以在表单关闭时遍历每个文本框的文本并用值填充公共数组，但我宁愿想出一些更优雅的东西，并摆脱强迫做事的习惯。有人对如何做到这一点有任何很酷的想法吗？我想我可以将所有文本框添加到一个数组中，然后让字符串属性以某种方式获取指定文本框的文本，或者只是将文本框数组设为公共属性。有没有办法写出这样的东西......

```
Public string [] Text { get { return TextBoxArray[**value trying to be gotten**].Text; } } 
```

或者这对于一个属性来说太多了，需要成为一个方法？任何人有任何其他想法？我意识到这是一个微不足道的问题，可以通过多种方式解决，我只是希望通过一些很酷的方式来拓宽我的视野来完成这样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:01:29.037

其他选项可能更好，但这可能是最直接和简洁的：（使用 LINQ，添加`using System.Linq;`，需要 .NET 3.5 或更高版本）

```
public string[] Text { get { return Controls.OfType<TextBox>().Select(x => x.Text).ToArray(); } } 
```

这与 AlejoBrz 的解决方案非常相似，但使用 LINQ 更加清晰简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:51:48.010

从技术上讲，属性只是 getter/setter 方法的语法糖 - 所以属性可以做任何方法可以做的事情（但大多数时候它应该！）

假设您的命令行参数不能重复，我只需将所有文本框添加到 Dictionary 对象。

基本上在启动时：

创建一个：

```
Dictionary<string, TextBox> boxes; 
```

使用命令参数作为键在启动代码中添加文本框

```
boxes.Add(commandName, newTextBox); 
```

然后在你的吸气剂中，你可以使用访问字典

```
boxes[commandName] 
```

这将返回您可以操作的文本框。当然，这都是强类型的:)

这是一些示例代码：

```
string[] keywords = Environment.GetCommandLineArgs(); 
Dictionary<string, TextBox> boxes = new Dictionary<string, TextBox>();
int placement = 10; 

foreach (string keyword in keywords) 
{ 
    if (keyword == keywords[0]) 
        continue; 
    Label lbl = new Label(); 
    lbl.Text = keyword; 
    lbl.Top = placement; 
    this.Controls.Add(lbl); 
    TextBox txt = new TextBox(); 
    txt.Top = placement; 
    txt.Left = 100; 
    this.Controls.Add(txt); 
    placement += 20; 
    boxes.Add(keyword, txt);
} 
```

然后我想你不需要吸气剂 - 只需让盒子字典可见

```
public Dictionary<string, TextBox> Boxes { get { return boxes; } } 
```

如果您对文本框不感兴趣并且只想要这些值：

```
public Dictionary<string, string> Arguments 
{
  get 
  {
     Dictionary<string, string> vals = new Dictionary<string, string>();

     foreach(KeyValuePair<string, TextBox> kvp in boxes) 
     {
       vals.Add(kvp.Key, kvp.Value.Text);
     }

     return vals;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:56:27.457

这是一个想法：

```
Public System.Collections.Generic.List<string> Text { 
    get {
        System.Collections.Generic.List<string> returnValue = new string[textBoxCount];
        foreach (Control ctrl in this.Controls)
            if (ctrl.GetType() == typeof(TextBox))
                returnValue.Add(((TextBox)ctrl).Text);
        return returnValue;
   }
} 
```

当然，它会遍历您的所有控件，但至少您不必将它们保存在内存中的某种变量中，例如 System.Collections.Generic.List。或者你可以这样做，并在这个 foreach 上删除 if。

# java - 从 html 调用小程序

> ID：10640783
> 
> 赞同：2
> 
> 时间：2012-05-17T17:45:48.320
> 
> 标签：java, html, netbeans, applet

我正在做一个项目，需要从 HTML 调用一个小程序，我这样做：

```
<applet code="AppletClient.class" width="350" height="200" </applet> 
```

它给了我一个`AppletClient.class`无法找到的错误。如果我复制该文件并将其粘贴到 HTML 文件的相同位置，它就可以工作。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:52:21.533

> “但是，如果我复制该文件并将其粘贴到 html 文件的同一位置，它就没有问题”

你已经注意到了这个问题。改正路径，它会工作的。现在，您正在导航到 classess 文件夹。但是，请尝试删除第一个“/”。

```
<applet code="AppletClient.class" codebase="/classes"

            width="350" height="200"> 
```

将位置放在代码库标签内。代码标签用于类名。我第一次错过了，对不起:(

# python - 将模型超类转换为子类的 Django 工作流

> ID：10640789
> 
> 赞同：3
> 
> 时间：2012-05-17T17:46:21.473
> 
> 标签：python, django, django-models

我有一个 Django 项目，它有两个模型：申请人和客户，其中客户是申请人的子类。我想要一些允许用户将现有的申请人实例添加为客户端的方法。我已经有一个申请人实例的视图，所以我认为在该页面上有一个客户端模型表单可以做到这一点，但从[文档](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)来看，它看起来不像你可以用超类的实例初始化模型表单。我知道我可以通过让代码直接进入数据库并向子类表添加一个字段来做到这一点，但是有没有更多的 Django-y 方法呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T18:18:37.293

您可以使用以下代码`Client`从现有实例创建实例：`Applicant`

```
client = Client(applicant_ptr=applicant)
client.save_base(raw=True) 
```

# clojure - 如何使用 unicode 和 enlive 进行网页抓取

> ID：10640792
> 
> 赞同：1
> 
> 时间：2012-05-17T17:46:31.243
> 
> 标签：clojure, enlive

我正在尝试抓取一些需要 unicode 支持的网站。例如，我正在尝试获取这本书的标题，但它返回的字符混乱：

```
(-> "http://www.brill.nl/publications/evliya-celebis-book-travels" 
      java.net.URL. enlive/html-resource
 (enlive/select [:h1#page-title]) first :content) 
```

并试图抓取一个阿拉伯语网站返回 ?????? 到处都是。

```
(enlive/html-resource (java.net.URL. "http://www.aljazeera.net/portal")) 
```

我不确定我应该如何激活 unicode 支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:13:03.537

Enlive 确实支持 unicode，因为它使用 Java 字符串。我在我的计算机上运行了您的第一个示例并得到了以下结果：

```
(Evliyā Çelebi's Book of Travels) 
```

也许您使用的字体没有您要显示的点代码的字形？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T11:00:34.290

enlive 的作者 Christophe Grand[在 Enlive 电子邮件群中回复了](https://groups.google.com/forum/?fromgroups#!topic/enlive-clj/kl-xVdGRkGQ)。他的建议非常有用。我已经复制了下面的电子邮件：

> 你好，
> 
> Enlive 不是（也不包括）功能齐全的 HTTP 代理。当您将 java.net.URL 传递给它调用 .getContent 的 html 资源时，获取一个 InputStream 然后假定为 UTF-8。但是，如果您知道实际编码，您可以执行以下操作：

```
(-> "http://www.brill.nl/publications/evliya-celebis-book-travels" java.net.URL.
  .getContent (java.io.InputStreamReader. "ENCODING GOES HERE")
enlive/html-resource
 (en/select [:h1#page-title]) first :content) 
```

> 或者使用代理库来检测正确的编码并将生成的 Reader 传递给 html-resource。
> 
> h,
> 
> 克里斯托夫

# php - PHP数组按第二键排序

> ID：10640795
> 
> 赞同：0
> 
> 时间：2012-05-17T17:46:40.073
> 
> 标签：php, sorting

我有一个需要按“是”和“否”键排序的数组 - 如何在 PHP 中完成？具体来说，我希望所有是的都成为第一个索引（永远只有 1 个是，很多不是）

```
Array (
[0] => Array
    (
        [no] => Array
            (
                [0] => 379
            )

        [yes] => Array
            (
                [1] => 370
            )

    )

[1] => Array
    (
        [yes] => Array
            (
                [0] => 372
            )

    )

[2] => Array
    (
        [no] => Array
            (
                [0] => 377
            )

        [yes] => Array
            (
                [1] => 374
            )

    )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:59:10.803

您可以使用`uksort`自定义比较函数根据其键对数组进行排序：

```
<?php
 function yesfirst($a, $b) {
  if ($a === 'yes') {
    return -1;
  } elseif ($b === 'yes') {
    return 1;
  } else {
    return 0;
  }
}

function uksort_yesfirst($ary) {
    uksort($ary, 'yesfirst');
    return $ary;
}

$array = array(
  0 => array( no => array(0 => 379), yes => array(1 => 370)),

  1 => array( yes => array( 0 => 372) ),

  2 => array( no => array( 0 => 377), yes => array( 1 => 374))
);

$array = array_map('uksort_yesfirst', $array);
print_r($array);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:04:18.377

```
$ar = array(
    array(
        'no'  => array(0 => 379),
        'yes' => array(1 => 370)
    ),
    array(
        'yes' => array(0 => 372)
    ),
    array(
        'no'  => array(0 => 377),
        'yes' => array(1 => 374)
    )
);

usort($ar, function($a, $b){
    $v_a = array_values($a['yes']);
    $v_b = array_values($b['yes']);
    if($v_a[0] == $v_b[0]){
        return 0;
    }
    return $v_a[0] < $v_b[0] ? -1 : 1;
});

print_r($ar); 
```

结果：

```
Array
(
    [0] => Array
        (
            [no] => Array
                (
                    [0] => 379
                )

            [yes] => Array
                (
                    [1] => 370
                )

        )

    [1] => Array
        (
            [yes] => Array
                (
                    [0] => 372
                )

        )

    [2] => Array
        (
            [no] => Array
                (
                    [0] => 377
                )

            [yes] => Array
                (
                    [1] => 374
                )

        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:16:02.133

如果您的建议只是先显示“是”键，然后再显示“否”键，那么试试这个

```
function deep_krsort(&$arr) { 
    krsort($arr); 
    foreach ($arr as &$a) { 
        if (is_array($a) && !empty($a)) { 
            deep_krsort($a); 
        } 
    } 
} 
```

这将如何以相反的顺序改变你的内部深度元素

# ruby-on-rails - 如何在开发人员之间共享代码版本化的 Ruby 模块

> ID：10640796
> 
> 赞同：1
> 
> 时间：2012-05-17T17:46:46.500
> 
> 标签：ruby-on-rails, ruby, module

我与一个开发团队合作，他们正在为一些 Web 开发项目过渡到 Ruby on Rails。我们期望在开发过程中我们会开发共享代码。我知道 Gems 是一种共享代码的方法，但在某些情况下，从开发的角度来看，Module 对我们来说可能是更好的方法。

我的问题是，如果程序员 A 开发了程序员 B 想在他/她的项目中使用的模块，那么当模块位于 Git 存储库中时，最好的方法是什么？例如，程序员 A 可能维护模块，而程序员 B 可能想要利用模块中的新功能，因此程序员 B 只是将模块文件复制到他/她的应用程序中不是一个选项。

假设`SharedModules`存在一个存储库，该存储库在 Modules 文件夹中保存各种模块（例如`module1.rb`、`module2.rb`等）。程序员 B 可以克隆`SharedModules`存储库，但可能只对`module1.rb`在他/她的应用程序中使用一个模块 ( ) 感兴趣。程序员 B 如何做到这一点，并且仍然确保拉取`SharedModules`存储库将`module1.rb`在他/她的应用程序中更新？是否有某种基于符号链接的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:55:46.807

您可以为每个模块设置一个 repo，然后使用 git **Submodules** ：http : [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

> 子模块允许您将 Git 存储库保留为另一个 Git 存储库的子目录。这使您可以将另一个存储库克隆到您的项目中并保持您的提交分开。

# c# - 如何使用 DragAndDrop 在屏幕上移动图像

> ID：10640798
> 
> 赞同：0
> 
> 时间：2012-05-17T17:46:58.913
> 
> 标签：c#, wpf

我正在尝试为 WPF 中的 ImageControl 实现 DragAndDrop。我使用 C# 代码隐藏将图像添加到网格。

```
System.Windows.Controls.Image OldMan = new System.Windows.Controls.Image();
OldMan.Height=30;
OldMan.Width=30;
OldMan.Name="OldMan";
OldMan.Margin=new Thickness(100,100,0,0);
OldMan.HorizontalAlignment=System.Windows.HorizontalAlignment.Left;
OldMan.Stretch = Stretch.Fill;
OldMan.VerticalAlignment = System.Windows.VerticalAlignment.Top;
OldMan.Source= ConvertBitmap(Properties.Resources.Old1);
OldMan.MouseDown += new MouseButtonEventHandler(OldMan_MouseDown);
//PW is the name of my Grid
PW.Children.Add(OldMan);
PW.RegisterName(OldMan.Name, OldMan); 
```

这会将 Image 添加到网格中，并挂钩到 MouseDown 事件

在 MouseDown 事件中

```
void OldMan_MouseDown(object sender, MouseButtonEventArgs e)
{
    System.Windows.Controls.Image img = (System.Windows.Controls.Image)sender;
    DoDragDrop(....   //this doesn't exist so obviously I am missing something
} 
```

所以我没有 DoDragDrop 选项，所以我有什么选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:55:43.313

有一篇关于 WPF 教程的文章可能有用：

[http://wpftutorial.net/DragAndDrop.html](http://wpftutorial.net/DragAndDrop.html)

它的基本原理是当他们按下鼠标时，您记录起点。当他们然后移动鼠标（没有释放鼠标按钮）时，您移动对象的量与他们移动鼠标的量相同。

# ruby-on-rails - 在尝试保存之前，Rails 模型的验证方法是否会在验证过程中检查当前数据？

> ID：10640799
> 
> 赞同：2
> 
> 时间：2012-05-17T17:47:04.840
> 
> 标签：ruby-on-rails

我正在查看 Michael Hartl 的 [Rail Tutorial] 第 6 章中的一些 RSpec 代码：[http](http://ruby.railstutorial.org/chapters/modeling-users#code:validates_uniqueness_of_email_test) ://ruby.railstutorial.org/chapters/modeling-users#code:validates_uniqueness_of_email_test 。它是为了测试用户模型的电子邮件属性的唯一性验证方法而编写的。它看起来像这样：

清单 6.18。拒绝重复电子邮件地址的测试。(*spec/models/user_spec.rb*)

```
require 'spec_helper'

describe User do

  before do
    @user = User.new(name: "Example User", email: "user@example.com")
  end
  subject { @user }
  .
  .
  .
  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.save
    end

    it { should_not be_valid }
  end
end 
```

这是用户模型验证代码：

```
validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: true 
```

**我的问题是：验证实际上是如何工作的？** 有一个具有相同电子邮件地址的用户已经保存到数据库中，并且在我什至尝试保存之前，@user 实例上的 Rails 验证返回为无效？Rails 验证器是否使用当前数据来验证用户实例，即使它们只是存储在内存中并且当前没有尝试添加到数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:41:05.227

`be_valid`呼吁。`valid?`_ `@user`这就是 rspec 的工作原理。并`valid?`调用`run_validations!`反过来调用`run_callbacks :validate`. 您可以通过源代码跟踪方法链：`valid?`在[activerecord / lib / active_record / validations.rb](https://github.com/rails/rails/blob/v3.2.3/activerecord/lib/active_record/validations.rb)`super` `valid?`中定义并在[activemodel / lib / active_model / validations.rb](https://github.com/rails/rails/blob/v3.2.3/activemodel/lib/active_model/validations.rb)中调用

这就是它的工作原理。即使模型未保存，模型也可能有效或无效。如果它从未像您的情况那样保存（`new_record?`返回`true`），`:create`则调用验证。基本上，如果模型有效，则可以保存。如果它已保存（`new_record?`返回`false`但它可以包含未保存的更改），`:update`则调用验证。

# python - 如何使用python向现有文件添加行

> ID：10640804
> 
> 赞同：65
> 
> 时间：2012-05-17T17:47:24.413
> 
> 标签：python, file

我已经使用 python 创建了一个带有几行文本的 txt 文件，这些文本将由一个简单的程序读取。但是，我在重新打开文件并在程序的后面部分在文件中写入其他行时遇到了一些麻烦。（这些行将根据稍后获得的用户输入写入。）

```
with open('file.txt', 'w') as file:
    file.write('input') 
```

这是假设之前已经打开并写入了“file.txt”。但是，在第二次打开它时，使用我目前拥有的代码，我必须删除之前编写的所有内容并重写新行。有没有办法防止这种情况发生（并可能减少再次打开文件的过多代码）？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-17T17:49:06.247

如果要附加到文件，请使用`'a'`. 如果要在文件中查找应该插入行的位置，请使用`'r+'`. （[文档](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)）

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-05-17T17:50:19.480

打开文件以“追加”而不是“写入”。

```
with open('file.txt', 'a') as file:
    file.write('input') 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-17T17:50:59.490

使用`'a'`，`'a'`手段`append`。写入使用属性打开的文件的任何内容`'a'`都写入文件末尾。

```
with open('file.txt', 'a') as file:
    file.write('input') 
```

# database - ASP.NET MVC。显示来自数据库的 html 字符串

> ID：10640808
> 
> 赞同：4
> 
> 时间：2012-05-17T17:47:40.207
> 
> 标签：database, asp.net-mvc, string, razor

我需要显示来自数据库的数据，其中包含 & 之类的字符串 或“。当我尝试通过*Html.Raw*或*Html.Encode*显示它们时，我得到了像 & 这样的重复值。对于*Html.Raw*以及 Html.Encode 的错误*输出*。

我应该尝试什么？我使用 Razor 语法。

示例字符串：**你好，我的名字是 Junior & 我讨厌 «虫子»** .

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T18:25:01.180

根据顶部的评论：

`@Html.Raw(string)`应该是正确的语法。您确定数据库中的字符串数据尚未转义吗？

# ruby-on-rails-3 - Twitter gem - 如何获取新推文的 ID？

> ID：10640811
> 
> 赞同：2
> 
> 时间：2012-05-17T17:47:59.677
> 
> 标签：ruby-on-rails-3, twitter-gem

我正在使用 twitter gem 来更新用户状态。但是，我还需要知道最近创建的状态的 ID，以便稍后将其删除。这里有什么指导吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T04:09:41.483

假设您已经正确[配置](https://github.com/sferik/twitter/wiki/Configuration)了 Twitter 客户端，它应该很简单：

```
# Create a tweet
tweet = Twitter.update("I'm tweeting with @gem!")

# Delete that tweet
Twitter.status_destroy(tweet.id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:19:30.200

您应该能够通过简单地将“.id”附加到返回的推文来引用该 ID。例如`Twitter.status(27558893223).id`

# java - 反转链表

> ID：10640812
> 
> 赞同：-2
> 
> 时间：2012-05-17T17:48:00.363
> 
> 标签：java, linked-list

在不使用递归的情况下反转链表的问题。

我使用了这种方法，但是当我尝试在家里运行它时，即使该功能看起来不错，我也无法打印链表的反向它继续以与之前相同的方式打印链表。

有人可以帮我理解这里有什么问题吗？

```
class link {
    int data;
    public link nextlink;

    link(int d1) {
        data = d1;
    }
}

class List{

    link head;
    link revhead;

    List(){
        head = null;
    }

    boolean isEmpty(link head) {
       return head==null;
    }

    void insert(int d1) {
        link templink = new link(d1);
        templink.nextlink = head;
        head = templink;
    }

    void printlist(){
        link head1 = head;
        while(!isEmpty(head1)) {
            System.out.print(head1.data + " ");
            head1 = head1.nextlink;
        }
        System.out.println();
    }

    void reverse() {
        link previous=null,temp=null;
        while(isEmpty(head)) {
            temp = head.nextlink;
            head.nextlink = previous;
            previous = head;
            head = temp;
        }
    }

}

public class LinkedList {

    public static void main(String[] args) {

        List list1 = new List();

        list1.insert(10);
        list1.insert(20);
        list1.insert(30);
        list1.insert(40);
        list1.insert(50);
        list1.printlist();
        list1.reverse();
        list1.printlist();
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:58:53.557

您的代码中有两个问题。一：你检查 isEmpty(head)，你应该检查 !isEmpty(head)。第二：当你解决第一个问题时，循环终止时'head'变为空。

修复上述两个问题的正确代码：

```
void reverse() {
    link previous = null, temp = null;
    while (!isEmpty(head)) {
        temp = head.nextlink;
        head.nextlink = previous;
        previous = head;
        if (temp == null) {
           break;
        }
        head = temp;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:56:30.657

检查您的情况：while (isEmpty(head))

您忘记添加“！” 你的意思是虽然不是空的......做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:58:00.530

考虑打印链接时递归方法的作用。它实际上没有做任何事情，直到它拥有所有它们（即，它将每个调用放在堆栈上，然后当达到基本情况时，它从堆栈中弹出元素）。

您有哪些现成的非堆栈结构可用于存储列表的反向，然后让您将其打印出来？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T06:47:29.253

用于在不递归的情况下反转链接列表的更正代码。

```
class Link {

    int data;
    public Link nextLink;

    Link(int d1) {
        data = d1;
    }
}

class List {

    Link head;
    Link revhead;

    List() {
        head = null;
    }

    boolean isEmpty(Link head) {
        return head == null;
    }

    void insert(int d1) {
        Link tempLink = new Link(d1);
        tempLink.nextLink = head;
        head = tempLink;
    }

    void printlist() {
        Link head1 = head;
        while (!isEmpty(head1)) {
            System.out.print(head1.data + " ");
            head1 = head1.nextLink;
        }
        System.out.println();
    }

    void reverse() {
        Link previous = null, temp = null;
        while (!isEmpty(head)) {
            temp = head.nextLink;
            head.nextLink = previous;
            previous = head;
            head = temp;
        }

        head = previous;
    }
}

public class Main {

    public static void main(String[] args) {

        List list1 = new List();

        list1.insert(10);
        list1.insert(20);
        list1.insert(30);
        list1.insert(40);
        list1.insert(50);
        list1.printlist();
        list1.reverse();
        list1.printlist();
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-21T14:10:21.407

```
class Node {
    Node next;
    int value;

    public Node() {
    }

    public Node(Node next, int value) {
        super();
        this.next = next;
        this.value = value;
    }

    public Node getNext() {
        return next;
    }

    public void setNext(Node next) {
        this.next = next;
    }

    public int getValue() {
        return value;
    }

    public void setValue(int value) {
        this.value = value;
    }

}

public class Linkedlist {
    private Node head = null;

    public Linkedlist(Node head) {
        this.head = head;
    }

    public void iterate() {
        Node current = head;
        while (current != null) {
            System.out.println(current.getValue());
            current = current.getNext();
        }
    }

    public void reverse() {
        Node current = head;
        Node prev = null;
        while (current != null) {
            Node temp = current.next;
            current.next = prev;
            prev = current;
            current = temp;
        }
        head = prev;
    }

    public static void main(String[] args) {
        Node n = new Node(null, 10);
        Node n1 = new Node(n, 20);
        Node n2 = new Node(n1, 30);
        Node n3 = new Node(n2, 40);
        Node n4 = new Node(n3, 50);
        Node n5 = new Node(n4, 60);
        Linkedlist linkedlist = new Linkedlist(n5);
        linkedlist.iterate();
        linkedlist.reverse();
        System.out.println("------------------REVERSED---------------------");
        linkedlist.iterate();

    }
} 
```

# image - OpenCart - 显示子类别图像 - 在父类别中。

> ID：10640815
> 
> 赞同：1
> 
> 时间：2012-05-17T17:48:16.110
> 
> 标签：image, opencart

如果你看看： [http ://www.gilliesaudio.co.uk/index.php?route=product/category&path=62](http://www.gilliesaudio.co.uk/index.php?route=product/category&path=62)

您将看到产品“传单”和“海报”没有类别图像。

这是我在主题/默认/模板/产品/category.tpl中所能得到的：

```
 <div>
      <?php if ($product['thumb']) { ?>
      <div class="image">
      <a href="<?php echo $category['href']; ?>">
      <img src="<?php echo $category['thumb']; ?>" title="<?php echo $product['name']; ?>" alt="<?php echo $product['name']; ?>" />
      </a>
      </div>

      <?php } ?>
          <a href="<?php echo $category['href']; ?>">
              <?php echo $category['name']; ?>
          </a>
  </div> 
```

无论我怎么努力，我都无法显示图像？我究竟做错了什么？

提前致谢！汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:02:17.460

`controller/product/category.php`在文件中找到这一行：

```
 $this->data['categories'][] = array(
                'name'  => $result['name'] . ($this->config->get('config_product_count') ? ' (' . $product_total . ')' : ''),
                'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '_' . $result['category_id'] . $url) 
```

并将它们替换为：

```
 $image = $this->model_tool_image->resize($result['image'], $this->config->get('config_image_category_width'), $this->config->get('config_image_category_height'));
            $thumb = $this->model_tool_image->resize($result['image'], 100, 100); // you can use your own size
            $this->data['categories'][] = array(
                'image' => $image,
                'thumb' => $thumb,
                'name'  => $result['name'] . ($this->config->get('config_product_count') ? ' (' . $product_total . ')' : ''),
                'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '_' . $result['category_id'] . $url) 
```

并在循环中使用`$catgory['image']`或`$catgory['thumb']`

```
foreach ($categories as $category) { 
```

tpl 文件`view/product/category.php`

# tfs - TFS“获取最新”并没有真正得到最新

> ID：10640818
> 
> 赞同：1
> 
> 时间：2012-05-17T17:48:26.667
> 
> 标签：tfs

我签入了一个变更集，向我的 TFS 分支添加了大约 10 个媒体文件。然而，在分支中的其他人连续调用“获取最新”时，他们都无法真正获取文件，直到他们从源代码管理资源管理器中选择“获取特定版本”，并选中了这两个框。

需要注意的是，这些媒体文件与它们所属的项目位于同一文件夹中；但是它们*不是*项目/解决方案的一部分（您无法从 Visual Studio 的解决方案资源管理器中看到它们）。

以下是我对（可能）问题的两个想法：

*   他们选择从解决方案资源管理器而不是源代码管理资源管理器中“获取最新”；更新他们的工作区版本，但不实际下载文件。

*   以某种方式添加这些文件不算作更改。

我意识到很难尝试用如此有限的信息回答问题，但我很好奇他们为什么无法获得新的媒体文件。

此外，将来如何避免此类问题（最佳实践）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:09:58.527

添加文件将始终算作更改。

我会假设你的第一个想法是正在发生的事情。从解决方案资源管理器获取最新仅更新解决方案树中的那些文件。如果文件是解决方案的一部分，您可能需要考虑将它们添加为内容项，以便适当地更新它们。

# vim - VIM：带参数的函数名自动完成

> ID：10640819
> 
> 赞同：3
> 
> 时间：2012-05-17T17:48:37.497
> 
> 标签：vim, autocomplete

我是 VIM 的新手，我刚刚发现`CTRL + N`可以为我自动完成函数名称。

但是，我怎样才能让它也显示参数？我正在使用**Cscope**和**ctags**。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:49:14.630

你确定吗？`<C-]>`通常会跳转到光标下标签的定义。*在插入*模式下使用完成函数名称的快捷方式`tags`是`<C-x><C-]>`.

对于某些语言，例如 PHP，omnicompletion 函数会打开一个带有您刚刚完成的函数签名的小预览窗口。不过，大多数全补全函数不使用这个技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:50:41.263

我假设您在谈论 C 编程语言。如果是这样，请查看[Clang Complete](http://www.vim.org/scripts/script.php?script_id=3302)。另一种选择是[Eclim for C/C++](http://eclim.org/vim/c/project.html)，它目前是 alpha 并且可能不是你想要的。另一种选择是将 Eclipse 与[Vrapper](http://vrapper.sourceforge.net/home/)一起使用。

# php - 如何使 php 与 postgresql 一起工作？

> ID：10640821
> 
> 赞同：50
> 
> 时间：2012-05-17T17:48:58.897
> 
> 标签：php, windows, postgresql, pdo

```
<?php

try {
   $dbh = new PDO('pgsql:host=localhost;port=5432;dbname=###;user=###;password=##');
   echo "PDO connection object created";
}
catch(PDOException $e)
{
      echo $e->getMessage();
}

?> 
```

我收到错误消息“无法加载驱动程序”

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-17T17:51:57.650

您需要为 php 安装 pgsql 模块。在 debian/ubuntu 中是这样的：

```
sudo apt-get install php5-pgsql 
```

或者如果安装了包，需要在 php.ini 中开启 de 模块

```
extension=php_pgsql.dll (windows)
extension=php_pgsql.so (linux) 
```

伟大的。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-05-17T18:00:01.357

尝试这个：

通过删除“;”取消注释 php.ini 中的以下内容

```
;extension=php_pgsql.dll 
```

使用以下代码连接到 postgresql 数据库服务器：

```
pg_connect("host=localhost dbname=dbname user=username password=password")
    or die("Can't connect to database".pg_last_error()); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-12-08T10:21:35.863

对于 debian/ubuntu 安装

```
sudo apt-get install php-pgsql 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-12-07T01:07:20.963

*   所以：Windows/Linux
*   HTTP 网络服务器：阿帕奇
*   编程语言：PHP

## 使 PHP 在 Apache 中与 PostgreSQL 一起工作

在 Apache 中，我编辑以下配置文件：`C:\xampp\php.ini`

我确保未注释以下行：

```
extension=php_pgsql.dll 
extension=php_pdo_pgsql.dll 
```

**最后在尝试与数据库引擎建立新连接之前重新启动 Apache。**

* * *

另外，我留下了确保连接唯一的代码：

```
private static $pdo = null;

public static function provideDataBaseInstance() {
    if (self::$pdo == null) {
        $dsn = "pgsql:host=" . HOST .
               ";port=5432;dbname=" . DATABASE .
               ";user=" . POSTGRESQL_USER .
               ";password=" . POSTGRESQL_PASSWORD;
        try {
            self::$pdo = new PDO($dsn);
        } catch (PDOException $exception) {
            $msg = $exception->getMessage();
            echo $msg . 
                 ". Do not forget to enable in the web server the database 
                  manager for php and in the database instance authorize the 
                  ip of the server instance if they not in the same 
                  instance.";
        }
    }
    return self::$pdo;
} 
```

总帐

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-09-28T10:37:55.153

我必须在 httpd.conf 中添加这一行（Windows）：

```
LoadFile "C:/Program Files (x86)/PostgreSQL/8.3/bin/libpq.dll" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-01T13:15:11.883

我使用 Windows Platform Installer (WPΙ) 在 Windows IIS 上安装了 PHP。WPΙ 在“Internet 信息服务（IIS）管理器”控制台中创建了一个“PHP 管理器”工具。我正在使用这个工具配置 PHP。

在[http://php.net/manual/en/pdo.installation.php](http://php.net/manual/en/pdo.installation.php)中说：

*PDO 和所有主要驱动程序都将 PHP 作为共享扩展提供，只需编辑 php.ini 文件即可激活：extension=php_pdo.dll*

所以我使用 PHP Manager 激活了扩展，现在 PDO 工作正常

PHP manager simple 在我的 php.ini 中添加了以下两行，您可以手动添加。当然，您必须重新启动 Web 服务器。

```
[PHP_PDO_PGSQL]
extension=php_pdo_pgsql.dll 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-18T19:39:36.053

只需安装数据库驱动程序：

> apt-get install php5-pgsql php5-mysql php5-sqlite ...等等...

而且要快乐！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-17T17:51:53.927

您需要安装 pdo_pgsql 包

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-19T20:43:48.230

我和许多其他人在这方面花了太长时间——这需要一个巨大的改进。花了几个小时后，我终于将 php_pgsql.dll 从 php 的 ext 目录复制到了 Apache24 的根目录（无论你安装它的位置），最后 Apache 能够加载 php/pg 模块和 dll。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-14T08:21:40.967

```
$dbh = new PDO('pgsql:host=localhost;port=5432;dbname=###;user=###;password=##'); 
```

对于 PDO 类型连接取消注释

`extension=php_pdo_pgsql.dll`并评论

`;extension=php_pgsql.dll`

```
$dbh = pg_connect("host=localhost dbname=### user=### password=####"); 
```

对于 pgconnect 类型的连接注释

`;extension=php_pdo_pgsql.dll`并取消注释

`extension=php_pgsql.dll`

两个连接都应该工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-26T11:39:28.413

在我的情况下，有**2 个 php.ini**，我不得不在两个 php.ini 中取消注释扩展 pdo_pgsql

1.  在**php**文件夹中
2.  在**apache**文件夹中

都在**wamp**文件夹中

# objective-c - NSSound setVolume：方法（Cocoa / ObjC）的最小输出值？

> ID：10640822
> 
> 赞同：1
> 
> 时间：2012-05-17T17:49:05.217
> 
> 标签：objective-c, macos, cocoa

新成员（长期潜伏者）和这里的第一个问题......

目前我正在构建一个可可应用程序，允许用户使用滑块设置 NSSound 的音量。

```
-(IBAction)setVolume:(id)sender{

    //sender is the slider
    [mySound setVolume:[sender floatValue]];

} 
```

我注意到，在声音不再从扬声器/耳机输出之前，[sender floatValue] 可以返回的浮点数似乎有一个截止值。具体来说，该值为 1e-3。

滑块值从 9e-4 变为 1e-3 会产生明显的“爆音”，并且可以听到声音。颠倒顺序，声音就听不见了。

我曾尝试挖掘 NSSound 和 NSSound.h 的文档，但无济于事。有没有其他人注意到这个问题编辑：并且知道如何增加 setVolume 的灵敏度？

注意：播放的声音是纯正弦波，这种行为在 63 - 10 kHz 频谱上是一致的。

使用：
PowerBook G4
OSX 10.5.8
XCode 3.1.3

# javascript - 使用 javascript 控制文本框

> ID：10640824
> 
> 赞同：1
> 
> 时间：2012-05-17T17:49:07.673
> 
> 标签：javascript, jquery, asp.net, textbox

我正在尝试使用javascript禁用页面上的控件..我正在执行以下操作但无法成功执行..我遗漏的任何内容，请指出..

```
 if (some condition) {        
        var textBoxTemp = document.getElementById('_ctl21_m_txtTemp');
        textBoxTemp.disabled = true;
        } 
```

我通过查看页面的来源获得了元素 id。在源代码中显示

> _ctl21:m_txtTemp

我尝试同时使用

> _ctl21:m_txtTemp 和 _ctl21_m_txtTemp

在上面的第二行代码中..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:50:55.923

您可以使用 jquery [prop()](http://api.jquery.com/prop/)禁用文本框。

```
$("[id$=txtTemp]").prop("disabled", true); 
```

注意：prop() 仅在 jquery 1.6 之后可用。如果您使用的是早期版本，则可以使用[attr()](http://api.jquery.com/attr/)代替：

```
$("[id$=txtTemp]").attr("disabled", "disabled"); 
```

**编辑**：

由于 ASP.NET 倾向于破坏控件的 ID，因此您可以通过多种不同的方式在页面上找到控件，例如：

```
$('[id$=txtTemp]')
$('#<%= txtTemp.ClientID %>') 
```

**编辑**：

由于您似乎认为您的控件可能位于 iframe 中，因此我从以下 stackoverflow 问题中找到了此解决方案：[how-can-i-access-iframe-elements-with-javascript](https://stackoverflow.com/questions/1452871/how-can-i-access-iframe-elements-with-javascript)

```
function iframeRef( frameRef ) {
    return frameRef.contentWindow ? frameRef.contentWindow.document : frameRef.contentDocument
}

var iframe = iframeRef( document.getElementById('iframeID') ) 
```

您现在可以通过以下方式搜索 iframe 内容，就好像它是文档一样：

```
iframe.getElementByID('<%= txtTemp.ClientID %>').disabled = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:50:59.260

您标记了 Jquery，所以我想我可以提供一个 jquery 解决方案：

```
if (some_condition)
{
  $('#_ctl21_m_txtTemp').attr('disabled','disabled');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:55:12.527

我不知道你是想在 jQuery 中还是在普通的旧 Javascript 中使用它，但它在两者中都有：

**Javascript**

（您可能正在寻找只读属性而不是禁用）

```
var textBoxTemp = document.getElementById('_ctl21_m_txtTemp');
textBoxTemp.readonly = true; 
```

**jQuery**

```
$('#_ctl21_m_txtTemp').attr('readonly',true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:54:50.460

根据[http://www.w3schools.com/tags/att_input_disabled.asp](http://www.w3schools.com/tags/att_input_disabled.asp)

语法应该是

```
textBoxTemp.disabled="disabled" 
```

你可以试试看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T17:52:17.663

如果你使用 jQuery，你可以这样做

`$('#<%= txtTemp.ClientID %>').attr("disabled", "disabled");`

这样可以确保您在移动文本框时获得正确的客户端 ID。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T17:52:39.847

使用 jQuery，我不会使用 document.getElementById，这完全不是重点

```
textBoxTemp = $('#_ctl21_m_txtTemp'); // weird name, by the way
textBoxTemp.attr('disabled','disabled'); 
```

# r - R中向量的最大长度

> ID：10640836
> 
> 赞同：33
> 
> 时间：2012-05-17T17:50:09.620
> 
> 标签：r

根据 R 'Memory-limits' 文档，不可能分配长度超过 2^31-1 的向量。这是因为用作索引的整数只能使用 31 位（符号位）。但在 64 位系统上，我应该能够分配更长的向量。为什么 R 在 64 位系统上施加相同的最大长度？有没有办法绕过限制？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-17T18:14:11.200

如果你愿意使用 R 的开发版本，你可以得到这个特性的**实验性**支持。来自[http://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html](http://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html)：

> 长向量
> 
> 在 64 位平台上开始支持超过 2^31 - 1 个元素的向量。这适用于原始、逻辑、整数、双精度、复数和字符向量以及列表。（字符向量的元素仍然限制为 2^31 - 1 个字节。）
> 
> 所有方面目前都是实验性的。
> 
> 目前可以对此类向量执行的操作有些有限，并且大多数操作将返回错误“尚不支持长向量”。它们可以被序列化和非序列化、强制、相同() 和 object.size() 工作，并且可以计算手段。它们的长度可以通过 xlength() 获取和设置：在长向量上调用 length() 将引发错误。
> 
> 索引的大多数方面都是可用的。通常双值索引可用于访问超过 2^31 - 1 的元素。

请参阅链接查看更多细节。我自己根本没有尝试过这个，所以我不能评论它是否真的有用。

如果您访问[http://developer.r-project.org/R_svnlog_2011](http://developer.r-project.org/R_svnlog_2011)（和[http://developer.r-project.org/R_svnlog_2012](http://developer.r-project.org/R_svnlog_2012)）并搜索“长向量”，您可以了解所做的工作继续。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-17T18:26:49.813

这里有更多细节可以补充 Ben 的答案。这些限制似乎是从用于构建 R 的较低级别的编程语言继承而来的，尤其是（显然）FORTRAN 代码。因此，显然，将 R 转换为能够充分利用 64 位寻址系统将是一个重大项目。

从[R-admin 手册](http://cran.r-project.org/doc/manuals/R-admin.html#Choosing-between-32_002d-and-64_002dbit-builds)：

> 即使在 R 的 64 位版本上，R 对象的大小也有限制（请参阅帮助（“内存限制”），其中一些源于使用 32 位整数（尤其是在 FORTRAN 代码中）。在所有版本中在 R 中，向量的最大长度（元素数）是 2^31-1，大约 20 亿，并且在 64 位构建上，分配的内存块的大小限制为 2^34-1 字节（8GB ). 预计这些最终将被提出*，但对 8GB 对象的需求是（当这是在 2011 年编写时）例外。

（手册中还有一个奇怪的脚注，我在其中放了一个`*`，并指出“此评论自 2005 年以来一直在手册中”。:)

# javascript - esri 地图显示信息窗口而不点击地图

> ID：10640843
> 
> 赞同：1
> 
> 时间：2012-05-17T17:50:30.737
> 
> 标签：javascript, infowindow, esri, arcgis-js-api

我正在使用 esri map javascipts API。我想在地图上显示一个信息窗口。但是，在 esri 给出的示例中，用户必须单击地图才能显示信息窗口。因为在例子中，其中一个参数是screenPoint，必须通过点击地图获得。我可以单击一个按钮以在特定位置显示信息窗口吗？谢谢！

```
dojo.connect(map.graphics, "onClick", function(evt) {
      var g = evt.graphic;
      map.infoWindow.setContent(g.getContent());
      map.infoWindow.setTitle(g.getTitle());
      map.infoWindow.show(evt.screenPoint,map.getInfoWindowAnchor(evt.screenPoint));
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:11:45.853

是的，map.infoWindow.show() 方法的第一个参数只是一个屏幕点位置。这是指向 Point 对象文档的链接：http: [//help.arcgis.com/en/webapi/javascript/arcgis/help/jsapi/point.htm](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jsapi/point.htm)，这是您为该参数传递的内容。例如：`new esri.geometry.Point(-118.15, 33.80, map.spatialReference);`

# php - Mysql - 如果找不到特定记录，则获取默认记录

> ID：10640850
> 
> 赞同：3
> 
> 时间：2012-05-17T17:50:56.700
> 
> 标签：php, mysql

使用 MySQL 和 php，我将如何在单个查询中获取与某个查询匹配的所有结果，但如果未找到任何结果，则找到所有默认结果？例如我有这个查询：

```
SELECT * FROM table1 WHERE typeid = 5 
```

如果从下面的查询中没有找到结果，那么我想从 table1 中找到 typeid 为 1 的所有结果：

```
SELECT * FROM table1 WHERE typeid = 1 
```

如何在单个查询中做到这一点？如果我尝试以下查询，我会得到 5 和 1：

```
SELECT * FROM table1 WHERE typeid = 5 OR typeid = 1 
```

我只想查询 table1 以查找分配给 typeid 5 的所有记录，如果没有找到结果，则在单个查询中获取分配给 typeid = 1 的所有结果。我怎样才能做到这一点？还是我必须有 2 个查询？

**编辑**

对于返回的多条记录，我需要这个，而不是一条记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T17:53:44.980

这个怎么样？

```
SELECT * FROM table1
WHERE CASE WHEN (SELECT COUNT(1) FROM table1 WHERE typeid = 5) > 0 THEN
    typeid = 5
ELSE
    typeid = 1
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:07:38.187

```
SELECT *
FROM   table1
WHERE  typeid = IF((SELECT COUNT(*) FROM table1 WHERE typeid = 5), 1, 5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:09:49.513

```
 SELECT * 
    FROM table1 
    WHERE typeid = 5
  UNION ALL
    SELECT * 
    FROM table1 
    WHERE typeid = 1
      AND NOT EXISTS
          ( SELECT * 
            FROM table1 
            WHERE typeid = 5
          ) ; 
```

# reporting-services - 在报告服务中动态更改标题大小

> ID：10640854
> 
> 赞同：3
> 
> 时间：2012-05-17T17:50:59.440
> 
> 标签：reporting-services, reportingservices-2005

我正在使用报告服务中的报告。我需要显示用户在标题中选择的参数。当用户选择“全选”时，我必须在标题中显示所有选定的值。我能够很好地完成所有这些事情。

My main issue is when the select list is too long the header cuts off my list.

有没有办法或设置通过哪个标题大小可以根据标题内动态增长的文本框的大小动态改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:45:08.633

我遇到了这个问题。我不相信有办法让它再扩大。

我的解决方法是以下两种选择之一：

1）显示“全部”而不是全部列出

2) 将该信息移动到报告正文中报告数据上方的文本框。

希望这可以帮助。

# mysql - 为什么我无法连接到 Django 中的外部数据库？

> ID：10640862
> 
> 赞同：0
> 
> 时间：2012-05-17T17:51:30.363
> 
> 标签：mysql, django

我的 Django 应用程序中有以下设置。

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'mydatabasename',                      # Or path to database file if using sqlite3.
        'USER': 'davidfaux',                      # Not used with sqlite3.
        'PASSWORD': 'mySecretPassword',                  # Not used with sqlite3.
        'HOST': 'sql.externalhost.com',        # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                  # Set to empty string for default. Not used with sqlite3.
    }
} 
```

但是，当我`manage.py`用来运行我的应用程序时，我得到了以下回溯。

```
super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (1045, "Access denied for user 'davidfaux'@'75.156.124.202' (using password: YES)") 
```

`75.156.124.202`是托管我的 Django 应用程序的专用服务器的 IP 地址。但是，我的数据库位于我在 settings.py 中指定的外部服务器上。

为什么 Django 在专用服务器上寻找这个数据库，而不是我指定的外部位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:59:16.730

Django 不在专用服务器上寻找数据库。返回的 MySQL 错误消息意味着您正在连接，`75.156.124.202`因为您只能允许来自特定主机的 MySQL 连接。

这意味着可能存在某种身份验证问题，请尝试使用 mysql 客户端从您的服务器连接到`sql.externalhost.com`并确保您可以连接到数据库。

# python - 如何在 python 中通过 SSLsocket 执行 https 请求

> ID：10640863
> 
> 赞同：2
> 
> 时间：2012-05-17T17:51:32.130
> 
> 标签：python, ssl, https

我正在使用以下代码与 ssl 服务器执行 ssl 握手和证书验证。

```
import ssl
import socket

s = socket.socket()
print "connecting..."
#logging.debug("Connecting")
# Connect with SSL mutual authentication
# We only trust our server's CA, and it only trusts user certificates signed by it
c = ssl.wrap_socket(s, cert_reqs=ssl.CERT_REQUIRED,
                    ssl_version=ssl.PROTOCOL_SSLv3, ca_certs='ca.crt',
                    certfile='user.crt', keyfile='user.key')
c.connect((constants.server_addr, constants.port)) 
```

我能够连接到服务器并且证书得到正确验证，但是，我不确定从这里做什么。我需要通过套接字执行 https 操作，包括将 XML 发布到 REST API。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:10:15.147

您可以使用您的`wrap_socket`代码进行扩展`httplib.HTTPConnection`，如[本答案](https://stackoverflow.com/a/3551700/372643)中所述。

（我仍然会考虑使用 PycURL 之类的东西，正如我在[你之前的问题](https://stackoverflow.com/a/10508130/372643)中已经回答的那样。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:59:04.213

您可能想从以下位置开始`urllib2.urlopen`：[http ://docs.python.org/library/urllib2.html#urllib2.urlopen](http://docs.python.org/library/urllib2.html#urllib2.urlopen)

这可以处理 https URL、获取、发布等。您不需要直接在低级别`socket`或`ssl`对象上工作。但是，如果您使用的是 Python 2.x，HTTPS 连接不会对服务器端证书进行任何验证，这看起来像是您需要的（这很好）。不过， Python 3`urllib`确实做到了这一点。

如果您使用的是 Python 2，那么您有几个选择。一种是子类`urllib2.HTTPSHandler`化，以便对其套接字进行适当的验证。另一种是自己实现需要的HTTP协议位（不推荐）。您也可以正常实例化各种对象，`urllib2`然后`httplib`简单地分配您已经过身份验证的 ssl 套接字来代替它们正在使用的那些，尽管您需要非常小心，以免它们的状态被弄乱。不过，标准库中的源代码非常易读，以防您需要像这样进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:42:11.800

这正是我在项目中所做的。这是我在项目中使用的 REST 客户端模块。它已根据我的需要进行了修改，但我认为您可能会发现它也很有用。它需要 httplib2： http: [//pypi.python.org/pypi/httplib2](http://pypi.python.org/pypi/httplib2)

```
"""
    client.py
    ---------

    Modified to allow validation server's certificate with external cacert list.
    -- Arif Widi Nugroho <arif@sainsmograf.com>

    Copyright (C) 2008 Benjamin O'Steen

    This file is part of python-fedoracommons.

    python-fedoracommons is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    python-fedoracommons is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with python-fedoracommons.  If not, see <http://www.gnu.org/licenses/>.
"""

__license__ = 'GPL http://www.gnu.org/licenses/gpl.txt'
__author__ = "Benjamin O'Steen <bosteen@gmail.com>, Arif Widi Nugroho <arif@sainsmograf.com>"
__version__ = '0.1'

import httplib2
import urlparse
import urllib
import base64
from base64 import encodestring

from mime_types import *

import mimetypes

from cStringIO import StringIO

class Connection(object):
    def __init__(self, base_url, username=None, password=None, cache=None, ca_certs=None, user_agent_name=None):
        self.base_url = base_url
        self.username = username
        m = MimeTypes()
        self.mimetypes = m.get_dictionary()

        self.url = urlparse.urlparse(base_url)

        (scheme, netloc, path, query, fragment) = urlparse.urlsplit(base_url)

        self.scheme = scheme
        self.host = netloc
        self.path = path

        if user_agent_name is None:
            self.user_agent_name = 'Basic Agent'
        else:
            self.user_agent_name = user_agent_name

        # Create Http class with support for Digest HTTP Authentication, if necessary
        # self.h = httplib2.Http(".cache")
        self.h = httplib2.Http(cache=cache, ca_certs=ca_certs)
        self.h.follow_all_redirects = True
        if username and password:
            self.h.add_credentials(username, password)

    def request_get(self, resource, args = None, headers={}):
        return self.request(resource, "get", args, headers=headers)

    def request_delete(self, resource, args = None, headers={}):
        return self.request(resource, "delete", args, headers=headers)

    def request_head(self, resource, args = None, headers={}):
        return self.request(resource, "head", args, headers=headers)

    def request_post(self, resource, args = None, body = None, filename=None, headers={}):
        return self.request(resource, "post", args , body = body, filename=filename, headers=headers)

    def request_put(self, resource, args = None, body = None, filename=None, headers={}):
        return self.request(resource, "put", args , body = body, filename=filename, headers=headers)

    def get_content_type(self, filename):
        extension = filename.split('.')[-1]
        guessed_mimetype = self.mimetypes.get(extension, mimetypes.guess_type(filename)[0])
        return guessed_mimetype or 'application/octet-stream'

    def request(self, resource, method = "get", args = None, body = None, filename=None, headers={}):
        params = None
        path = resource
        headers['User-Agent'] = self.user_agent_name

        BOUNDARY = u'00hoYUXOnLD5RQ8SKGYVgLLt64jejnMwtO7q8XE1'
        CRLF = u'\r\n'

        if filename and body:
            #fn = open(filename ,'r')
            #chunks = fn.read()
            #fn.close()

            # Attempt to find the Mimetype
            content_type = self.get_content_type(filename)
            headers['Content-Type']='multipart/form-data; boundary='+BOUNDARY
            encode_string = StringIO()
            encode_string.write(CRLF)
            encode_string.write(u'--' + BOUNDARY + CRLF)
            encode_string.write(u'Content-Disposition: form-data; name="file"; filename="%s"' % filename)
            encode_string.write(CRLF)
            encode_string.write(u'Content-Type: %s' % content_type + CRLF)
            encode_string.write(CRLF)
            encode_string.write(body)
            encode_string.write(CRLF)
            encode_string.write(u'--' + BOUNDARY + u'--' + CRLF)

            body = encode_string.getvalue()
            headers['Content-Length'] = str(len(body))
        elif body:
            if not headers.get('Content-Type', None):
                headers['Content-Type']='text/xml'
            headers['Content-Length'] = str(len(body))        
        else: 
            headers['Content-Type']='text/xml'

        if method.upper() == 'POST':
            headers['Content-Type']='application/x-www-form-urlencoded'

        if args:
            path += u"?" + urllib.urlencode(args)

        request_path = []
        if self.path != "/":
            if self.path.endswith('/'):
                request_path.append(self.path[:-1])
            else:
                request_path.append(self.path)
            if path.startswith('/'):
                request_path.append(path[1:])
            else:
                request_path.append(path)

        resp, content = self.h.request(u"%s://%s%s" % (self.scheme, self.host, u'/'.join(request_path)), method.upper(), body=body, headers=headers )

        return {u'headers':resp, u'body':content.decode('UTF-8')} 
```

示例用法（如果服务器证书未由指定的 ca 签名，则连接将失败）：

```
c = client.Connection('https://localhost:8000', certs='/path/to/cacert.pem')
# now post some data to the server
response = c.request_post('rest/path/', body=some_urlencoded_data)
if response['headers']['status'] == '200':
    # do something... 
```

# c# - 打开方式“程序”为空

> ID：10640864
> 
> 赞同：0
> 
> 时间：2012-05-17T17:51:36.323
> 
> 标签：c#, windows, visual-studio

当我尝试通过右键单击文件打开文件扩展名并使用...打开时，我的程序不显示其名称，并且只是一个空字符串以及图标。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:54:22.153

`Properties`设置,中的所有字段`Assembly Information...`。（也见于`AssemblyInfo.cs`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:58:31.443

[有一篇关于“如何将文件扩展名与您的应用程序关联](http://support.microsoft.com/kb/185453/EN-US)”的 Microsoft 知识库文章。

虽然这适用于 Win32 应用程序，但在我看来，您可以很简单地将它用作 C# 实现的基础。这是我一段时间前写[的代码片段。](http://www.koders.com/csharp/fid694A842E0DFE8CFB00BF8E70DC4AA1F2CBFCAE3B.aspx)

您需要的基本想法是以下注册表层次结构（引自知识库文章）：

```
.bar = MyApp
     MyApp = My Application
       |
        -- Shell
             |
              -- open
                   |
                    -- command = c:\mydir\my.exe %1 
```

# php - 在 symfony 2 中访问 AppKernel 环境变量

> ID：10640866
> 
> 赞同：29
> 
> 时间：2012-05-17T17:51:37.977
> 
> 标签：php, symfony, configuration

我正在使用 symfony 2，我们有 2 个配置，dev 和 prod。我需要知道我是否可以找出我在实体或模型中使用的是哪一个。

我正在寻找与 AppKernel.php 中的此代码类似的内容：

```
$this->getEnvironment() 
```

如果我可以加载内核来调用它，那就太好了，但我找不到这样做的方法。在调查之后，似乎 symfony 事件可能会返回内核，但我不知道如何或在哪里捕获这些事件，以便我可以在它们上调用 getKernel()。[http://symfony.com/doc/current/book/internals.html](http://symfony.com/doc/current/book/internals.html)

例如，他们列出了这个例子：

使用 Symfony\Component\HttpKernel\Event\FilterControllerEvent；

```
public function onKernelController(FilterControllerEvent $event)
{
    $controller = $event->getController();
    // ...

    // the controller can be changed to any PHP callable
    $event->setController($controller);
} 
```

我不清楚将这段代码放在哪里。在我看来，它应该放在内核中，如果我有内核，我就不会遇到这个问题。

我的问题是，有没有一种简单的方法可以让我从服务或模型中确定我是在内核中设置的“开发”还是“产品”。谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-17T19:00:45.447

控制台生成的默认实体类不继承任何东西。这意味着它们无论如何都不是“ContainerAware”。

一般来说，我认为他们不应该。我想这取决于你在做什么，但你可以通过一些基本的依赖注入来处理这个

在控制器中：

```
$entity = new \Your\Bundle\Entity\Foo(
  $this->container->get( 'kernel' )->getEnvironment()
); 
```

然后在**src/Your/Bundle/Entity/Foo.php**

```
private $env;

public function __construct( $env=null )
{
  $this->env = $env;
} 
```

这对你有用吗？

*PS您发布的事件侦听器适用于控制器 - 不适用于任意类。*

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-04-24T11:26:33.140

也可以将其作为参数获取。如果你看一下这个`\Symfony\Component\HttpKernel\Kernel`类，你会发现一个`getKernelParameters()`公开所有内核参数的方法。

```
/**
 * Returns the kernel parameters.
 *
 * @return array An array of kernel parameters
 */
protected function getKernelParameters()
{
    $bundles = array();
    foreach ($this->bundles as $name => $bundle) {
        $bundles[$name] = get_class($bundle);
    }

    return array_merge(
        array(
            'kernel.root_dir' => realpath($this->rootDir) ?: $this->rootDir,
            'kernel.environment' => $this->environment,
            'kernel.debug' => $this->debug,
            'kernel.name' => $this->name,
            'kernel.cache_dir' => realpath($this->getCacheDir()) ?: $this->getCacheDir(),
            'kernel.logs_dir' => realpath($this->getLogDir()) ?: $this->getLogDir(),
            'kernel.bundles' => $bundles,
            'kernel.charset' => $this->getCharset(),
            'kernel.container_class' => $this->getContainerClass(),
        ),
        $this->getEnvParameters()
    );
} 
```

因此，在一个`services.yml`文件中，您可以`%kernel.environment%`在容器感知类中获得环境，您可以通过以下方式获得它：

```
$this->getContainer()->getParameter('kernel.environment'); 
```

[参见 github 上的 Kernel.php 类](https://github.com/symfony/HttpKernel/blob/b90d2ca1027243c266ece6a8be208bae080712e5/Kernel.php#L538)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-04T09:42:22.263

当然有全局变量的快速而肮脏的方式......

```
function quickAndDirty() {
   global $kernel;

   if ($kernel->getEnvironment() == 'dev') {
      // we're in dev mode
   }
} 
```

它既坏又邪恶，你应该在使用它后洗干净自己，但在你可能继承的大型现有代码库的情况下，它可以避免潜在的重构噩梦。

当然，使用这种方法后是否可以自己生活，取决于您；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-04T21:58:13.577

*（注意：这适用于 Symfony 3.x，不确定 4.x）*

您可以`%kernel.environment%`直接注入您的服务：

```
 my_service:
        class: My\Foo
        properties:
            env: '%kernel.environment%' 
```

然后在您的服务类中：

```
 class Foo {

    $env;
    ...
    function someFunction()
    {
        if($this->env === 'dev') {
            // do some dev stuff
        }
        else {
            // do some prod stuff
        }
    }
} 
```

这样做的好处是，如果您进行单元测试，则不需要容器。

如果你不喜欢属性注入，可以使用构造函数或 setter 注入。

# ios - TDD iOS 教程

> ID：10640878
> 
> 赞同：5
> 
> 时间：2012-05-17T17:52:10.353
> 
> 标签：ios, ios5, tdd

嗨，我正在寻找非常好的 iOS TDD 教程，请您帮帮我！

什么是最好的 iOS TDD 书籍、博客 --> 教程（我对 google 进行了不同的研究，但由于我对“iOS TDD”没有足够的了解，所以我不知道哪个是最好的）

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T13:37:07.780

网上有很多关于 iOS 上 TDD 的资料。

如果您选择使用 GHUnit，我建议您使用此处提供的 XCode 模板：[https ://github.com/zenkimoto/ghunit-ocmock-xcode4-template](https://github.com/zenkimoto/ghunit-ocmock-xcode4-template)

如果你使用 ARC，我建议你用这个来改变你的 GHUnitTestMain.m：

[http://hataewon.tumblr.com/post/17502311021/continuous-integration-for-cocoa](http://hataewon.tumblr.com/post/17502311021/continuous-integration-for-cocoa)

最后，我推荐 Graham Lee 的书 Test Driven iOS Development [http://www.amazon.com/Test-Driven-iOS-Development-Developers-Library/dp/0321774183](https://rads.stackoverflow.com/amzn/click/com/0321774183)

（对不起，作为一个新用户，我不能发布两个以上的链接）

# objective-c - 视频后未显示的持续时间

> ID：10640879
> 
> 赞同：0
> 
> 时间：2012-05-17T17:52:11.603
> 
> 标签：objective-c, ios, avfoundation, avcapturesession, avassetwriter

我已经使用相机录制了实时视频`AVCaptureVideoDataOuput`，`AVAssetWriter`但生成的视频没有持续时间。任何人都可以给出一个简短的想法或大致方向的观点以使持续时间有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:36:10.317

需要做的是定义一个初始的`CMTime`.

```
self.time = CMMakeTime( 0, 30 /* some frame time */ ); 
```

然后

```
[instanceAVAssetWriter setSessionAtSourceTime:self.time]; 
```

在`captureOutput:didOutputSampleBuffer:fromConnection:`

```
CMSampleBufferRef sb;
CMSampleTimingInfo sampleTimingInfo;

sampleTimingInfo.duration = CMTimeMake(1,30);
sampleTimingInfo.presentationTimeStamp = self.time;
sampleTimingInfo.decodeTimeStamp = kCMTimeInvalid;

CMSampleBufferCreateCopyWithNewTiming(kCFAllocatorDefault, sampleBuffer, 1, &sampleTimingInfo, &sb); 
```

和结束

```
CFRelease( sb );
self.time.value += 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:38:36.180

这就是我所做的，类似于 NebulaFox 的回答。此代码在用于捕获视频数据的回调中。编写器已经初始化和设置。

```
switch (writer.status) {
        case AVAssetWriterStatusUnknown:

            startTime = CMSampleBufferGetPresentationTimeStamp(sample);

            [writer startWriting];
            [writer startSessionAtSourceTime:startTime];

            if (writer.status != AVAssetWriterStatusWriting) {
                break ;
            }  
.... 
```

# javascript - 关闭所有css3

> ID：10640882
> 
> 赞同：0
> 
> 时间：2012-05-17T17:52:22.810
> 
> 标签：javascript, css

我使用了很多 CSS3，我想要 2 个 css 版本：一个包含所有 css3，一个没有。我知道我可以简单地删除声明，但我想知道是否有另一种方法来禁用它们。具体来说，我想禁用 text-shadow、box-shadow 和border-radius。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T18:02:44.407

您可以使用一个名为**[deCSS3的小书签](http://davatron5000.github.com/deCSS3/)**

它会关闭你所有的 css3 功能（好吧不是“全部”，[这里记录了支持的 CSS3 功能的白名单](https://github.com/davatron5000/deCSS3#readme)。如果你喜欢，你也可以重新打开 CSS3。

作为奖励：如果您使用的是 Modernizr，它也会关闭这些值，因此您的`.no-boxshadow`课程会被选中。

对于想知道您为什么要这样做的人。这个工作流程非常好，因此您可以完全在 Chrome 中进行开发，但快速查看您的 lo-fi 版本（您将服务于 IE7、IE8）会是什么样子.

这是使用 deCSS3 的前后对比：

![](../Images/fc256a87d820c0ea70aa6714bdcb3205.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:55:23.200

你不能禁用它们，你所能做的就是使用 CSS 覆盖样式：

```
body * {
   text-shadow:none;
   ...etc...
} 
```

（嘿，我从来没有说过这样做是个好主意，但它会起作用）

***编辑：这个答案让我走上了正轨；谢谢。这是解决方案：***

创建一个名为 NoCSS3 的类，定义如下：

```
.NoCSS3 * {
    text-shadow: none !important;
    box-shadow: none !important;
    border-radius: 0px !important;} 
```

然后在 javascript 中，添加这一行：

```
$('body').addClass('NoCSS3'); 
```

你完成了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:00:15.993

您还可以查看[HeadJS提供的](http://headjs.com/)**CSS 现代化**功能。

也可用于许多其他功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:56:36.273

您是否尝试过看看[modernizr](http://modernizr.com/)？这是一个 javascript 库，用于检测客户端可用的内容并采取相应的行为。看起来像你在找什么。你可以在[这里找到一个很好的介绍](http://www.webdesignerdepot.com/2012/04/an-introduction-to-modernizr-for-designers/)

# android - 如何将手机模拟收音机中的音频捕获为 mp3 格式？

> ID：10640883
> 
> 赞同：2
> 
> 时间：2012-05-17T17:52:25.260
> 
> 标签：android, audio-recording, radio, bada

我有一部bada手机。它通过 FM（调频）天线接收无线电。它可以本地记录（不知道公开可用的 API）。[http://www.technostarry.com/mobiles/fm-radio-record-samsung-wave-bada-phone/](http://www.technostarry.com/mobiles/fm-radio-record-samsung-wave-bada-phone/)

我有一个安卓设备。它通过 FM 天线接收无线电。它无法记录这一点。

为什么会这样？我查看了其他站点，这些站点表明原因是 FM 无线电信号从未被数字化，但如果它被数字化，至少在理论上，数据是可以访问的。

抱歉，如果这像讨论一样。我只是认为这个网站可以用一个线程来做这件事。我发现的答案不正确，表明接受它的人已将 FM 与互联网收音机混为一谈，[如何在 android 中录制 FM 音频？](https://stackoverflow.com/questions/5500925/how-to-record-an-fm-audio-in-android).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:09:23.023

AFAIK 模拟收音机不是 Android 的标准组件，这意味着库存 android 不提供 API 来利用模拟收音机。任何包含此功能的手机都已由 OEM 添加了此功能。然后由 OEM 为开发人员提供 API 以利用这种非标准功能。

如果 OEM 不提供 API，您始终可以尝试反编译手机随附的无线电应用程序以找出适当的函数调用。

# jquery - 使用 jQuery 应用 CSS 样式的最有效方法是什么？

> ID：10640885
> 
> 赞同：0
> 
> 时间：2012-05-17T17:52:36.617
> 
> 标签：jquery, css, performance

以下是使用我们都熟悉的 jQuery 将 CSS 样式应用于元素的几种方法：

```
$('.box').css({'background':'#fff', 'color':'#000'}); 
```

或者，我们可以使用 jQuery 和外部 CSS 的组合来获得相同的效果：

```
.box.deco { background:#fff; color:#000; }

...

$('.box').addClass('deco'); 
```

忽略在 JS 代码中存在 CSS 样式是邪恶的事实（恕我直言），我一直在想：多年来我一直在这样做：**哪种方法更有效**？我现在正在处理的任务是跨多个 DOM 元素进行相对大量的此类样式操作，在这种情况下，性能值得考虑。

我确实在 SO 上查看了其他类似的问题，但没有找到答案。关心称重吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:53:44.073

在 CSS 中拥有现有类名并交换类名的最有效方法。

请参阅：[重排和重绘：CSS 性能让您的 JavaScript 变慢？](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:01:30.757

在 jsperf.com 上运行基准测试并自己找出最有效的方法。您也可以在这里分享您的发现以供后代参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:05:36.660

在普通的 javascript 中，更改 className 通常比更改 element.style 更快，至少根据[quirksmode](http://www.quirksmode.org/dom/classchange.html)所做的测试。

jQuery 在同一个测试中的表现是不确定的，因为在 jQ 中更改样式和类时都有很多额外的检查，但我倾向于认为它的结果大致相同。

总而言之，如果在一个元素上更改多个样式，类通常会更快，或者与样式的速度大致相同，并且由于类更干净，更容易使用，我会这样做，除非你'只需更改一两个简单的 CSS 规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:44:16.067

你已经是对的兄弟！，我们可以使用 jQuery 和外部 CSS 的组合来获得相同的效果。比第一个更有效，但这也取决于情况......

# c# - 从 Asp.Net MVC 4 Web API 返回视图

> ID：10640889
> 
> 赞同：2
> 
> 时间：2012-05-17T17:52:41.133
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

在我工作时，我还需要*在特定条件下*`Asp.Net MVC 4 Web API`返回一个视图。我的流程如下：

 *1.  第三方应用程序将调用我的 Web API 方法。（例如用户认证）
2.  如果有有效的凭据，我需要将 HTTP 状态返回为 SUCCESS (200)
3.  如果用户无效，我需要从同一个 MVC 应用程序返回一个 VIEW（登录视图）来请求凭据。（在视图中会有一个“注册”链接）

所以关键是，这是否可以*通过相同的 WEB API 方法*在不同的条件下同时返回 the`LOGIN View (html)`和 a ？`WebResponse Status (200)`

 *提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:26:10.783

你可以做两件事：

1.  `AuthorizeAttribute`在 Jon Galloway 的教程中使用：WebAPI[入门](http://www.asp.net/web-api/videos/getting-started/authorization)
2.  如果需要，将您的响应数据包装起来`HttpResponseMessage`并重定向用户。例如：

    ```
    var responseMessage = new HttpResponseMessage<Stock>(null, HttpStatusCode.RedirectMethod);
    responseMessage.Headers.Location = new Uri("http://www.mysite.com/login");

    return responseMessage; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:13:32.193

你应该可以，只要你的方法的返回类型是`ActionResult`. 毕竟，Web API 只是从 Controller 派生的。但更大的问题是：您的客户能否处理同一个问题的不同答案？也许您应该在成功时返回 200 而在“去询问其他方法以获得视图”时返回非 200。**

# php - PHP 变量进入 mySQL 表：不工作？

> ID：10640891
> 
> 赞同：0
> 
> 时间：2012-05-17T17:52:48.577
> 
> 标签：php, mysql, database, variables

这类似于我前一段时间提出的问题，但是这似乎没有吸引任何答案，所以我会再试一次。

我有一个您登录的预订系统，您的用户名存储在一个名为 的 cookie 中`$_COOKIE['ID_my_site']`。我有一个脚本，在用户预订了他们的航班后运行，它将所有详细信息存储到一个`OABS_customers`表`username`（`$_COOKIE['ID_my_site']`名为

该表的结构如下：

```
名称 类型（长度） 空 默认

name varchar(60) 没有 noname
address1 varchar(60) 没有 noaddress
address2 varchar(60) 无 noaddress2
县 varchar(60) 无县
邮政编码 varchar(32) 无邮政编码
客户 tinyint(4) 否       
席位 varchar(11) 否 0
数字 tinyint(4) 否 0
类 varchar(11) 没有 noclass
用户名 varchar(60) 没有 nousername

```

所以就像我说的，一切正常，但`username`列，它只是提供了默认值`nousername`. 这是我正在使用的代码；

`$query = "INSERT INTO OABS_customers (username) VALUES ('$user')";`

where `$user = $_COOKIE['ID_my_site']`（在上述脚本之前定义）。

如果有人可以帮助解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:45:18.330

*永远不要*将未转义的、用户生成的字符串放入 SQL 查询中。cookie 可能会被一些邪恶的用户更改，这会导致 SQL 注入。用于`mysql_real_escape_string($user)`转义字符串。

确保`$_COOKIE['ID_my_site']`不为空

```
mysql_query("INSERT INTO OABS_customers (username) VALUES ('". mysql_real_escape_string($user) ."')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:38:58.287

MySQL查询一切都很好......

```
mysql> INSERT INTO data (username) VALUES ('random');
Query OK, 1 row affected (0.08 sec)

mysql> select * from data;
+----+----------+
| id | username |
+----+----------+
|  1 | random   |
+----+----------+
1 row in set (0.00 sec) 
```

看起来`$COOKIE`值是空的，当您执行查询时，PHP 会将空字符串分配给`username`值。MySQL 看到传递了空值并将默认值写入`username`列

# java - 三页导航问题

> ID：10640892
> 
> 赞同：0
> 
> 时间：2012-05-17T17:52:55.900
> 
> 标签：java, jsp, jsf

我有一个关键的场景。

考虑 3 页。**第**1 页，第**2 页**，**第 3 页**。

从**第 1 页**。QueryString 中有一个参数，名为“note”。它有两个值“CreateNote”或“UpdateNote”。基于这些值，我在**Page2**上隐藏并显示很少的内容。

到这里没问题。

现在从**Page2**我需要导航到**Page3**。在**Page3**上有一个后退按钮。我试图在 Back 上设置**note**属性，但仍然没有设置这些信息，因此在**Page2**上出现空指针访问。

* * *

**一些代码如下**

**第 1 页**URL 喜欢

```
http://localhost:9095/Oscer/pages/UpdateNote.jsf?modified=NO&note=UpdateNote&docid=206&callFrom=prescribe 
```

在**第 2 页**

它使用像...这样的脚本来处理

在 backingbean 构造函数调用上设置注释对象。

```
<%
    String note = request.getParameter("note");
    if(note == null || note.equals("")){
        note = (String)request.getAttribute("note");
    }
    request.setAttribute("note",note);
%> 
```

在第 3**页**

试图处理 BackButton 之类的，

```
if(note == null){
            FacesContext facesContext = FacesContext.getCurrentInstance();
            Map<String,String> requestObj = facesContext.getExternalContext().getRequestParameterMap();
            if(requestObj != null){
                note = requestObj.get("note"); //Either of CreateNote or UpdateNote
            }
        }

        request.setAttribute("note", note); 
```

**现在，当我们从第**3 页导航到第**2 页**时，虽然我设置`request.setAttribute("note", note);` 了它给出了 NULL 指针异常原因，说明第**2 页**尚未设置:(

我不明白如何导航，以防查询字符串处理 jsp 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:41:20.993

我做的... ：）

我所做的是...

在其中一个 backingBean 上从**Page1**转到**Page2**时，假设**sampleBackingBean**设置一个变量。**通过从SampleBackingBean**的默认构造函数中的 request Scope获取**注释**来初始化它的值。

 **在 jsp **Page2**上，无论显示和隐藏内容，都使用**`{sampleBackingBean.note}`**

现在一切正常...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:43:08.523

`note`在从 Page1 导航到 Page2 时，您可以将其保留在 Session 范围内，而不是将属性保留在请求范围内。在 Page2 上，从会话而不是查询字符串（或请求范围）中检索此属性。所以在第 3 页上，即使按下后退按钮，您的代码也应该可以正常工作。**

# c++ - 以整数形式访问 unsigned char 数组的元素

> ID：10640893
> 
> 赞同：2
> 
> 时间：2012-05-17T17:53:02.753
> 
> 标签：c++

我必须使用只接受`*unsigned char`作为输入的阅读功能，

```
typedef unsigned char byte;
byte * rx_data;
rx_data = new byte [RX_PACKET_LEN*packets]; 
```

如何`rx_data`以简单的方式读取整数数组（4字节）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:55:07.247

你可以投射它：

```
int* pInt = reinterpret_cast<int*>( rx_data); 
```

或者

```
int* pInt = (int*) rx_data; 
```

或者，如果您想保留名称，请在需要读取时进行转换：

```
((int*)rx_data)[0]; 
```

请注意，只有在您完全确定自己在做什么时才应该这样做，否则不安全。（嗯，这适用于任何地方，我知道，但这需要特别注意）。想到的东西 -`RX_PACKET_LEN*packets`应该是`sizeof(int)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:59:47.347

由于这是 C++，您应该使用 reinterpret_cast 将 unsigned char 指针转换为 int 指针：

```
int * data = reinterpret_cast<int*>(rx_data); 
```

但是，这假设数据以特定的字节序格式存储，因此如果字符数组来自具有不同字节序的不同平台，则此代码将不起作用。如果您假设相同的平台，那么您可能会没事的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:00:29.643

一般设置中唯一安全的方法是制作副本：

```
std::vector<int32_t> target(RX_PACKET_LET * packets / sizeof(int32_t));

std::copy(rx_data, rx_data + RX_PACKET_LET * packets,
          reinterpret_cast<unsigned char *>(target.data())); 
```

`target[0]`现在您可以将, `target[1]`, ... 作为整数读取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T19:32:30.347

您可以为此使用 memcpy。

```
byte *rx_data = ...
size_t rx_data_size = ...

std::array<int, rx_data_size/sizeof(int)> data;

std::memcpy(data.get(), rx_data, data.size() * sizeof(int));

// read and modify data

// if you need to write it back out to rx_data then copy data back when you're done

std::memcpy(rx_data, data.get(), data.size() * sizeof(int)); 
```

这有一个优点，它不涉及强制转换，处理未对齐的内存，并且不依赖于神秘的别名规则。

一个缺点可能是复制数据可能会导致性能下降。但是，这不能保证。现代编译器通常将 memcpy 实现为编译器内在函数，优化器可以推断其行为。

我刚刚试用了 LLVM，发现这些：

```
void increment(char *buf) {
    int i;
    memcpy(&i,buf,sizeof(int));
    ++i;
    memcpy(buf,&i,sizeof(int));
}

void increment(int &i) {
    ++i;
} 
```

产生几乎相同的 IR 表示（clang tmp.cpp -emit-llvm -o - | opt -S -O2）和完全相同的 x86_64 程序集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T18:00:06.613

当您将指针类型从 byte* 更改为 int* 时，您将自动读取 4 个字节或在您递增指针 (p++) 时跳转 4 个字节。只要确保字节数组大小是模块 4，就不会出现分段错误。

# linux - 如何知道nc连接目标使用的源ip地址

> ID：10640896
> 
> 赞同：1
> 
> 时间：2012-05-17T17:53:10.057
> 
> 标签：linux, sockets, netcat

我使用 nc 来检查与我的服务器的连接：

```
echo -e -n "" | nc 192.168.15.200 8080 
```

并且想知道nc连接服务器使用的源ip地址。

如果无法使用 nc 命令提取源 IP 地址，是否有其他替代方法可以检索连接到我的服务器时使用的源 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:16:59.673

以下脚本检索 nc 在连接到您的目标时使用的源 IP 地址。

```
#!/bin/sh

dest=192.168.15.200 # You can put an ip address or a name address
port=8080

isIP=`echo "$dest"|grep -v -e [a-zA-Z]`

echo -e -n "" | nc $dest $port

if [ "_$isIP" != "_" ];then
    ip=`netstat -t -n|grep $dest:$port|sed 's/ \+/ /g'|cut -f4 -d " "|cut -f1 -d:`
else
    for addr in `nslookup $dest|grep -v \#|grep Address|cut -f2 -d:|sed 's/\ //g'`;do
        ip=`netstat -t -n|grep $addr:$port|sed 's/ \+/ /g'|cut -f4 -d " "|cut -f1 -d:`
        if [ "_$ip" != "_" ];then
            break
        fi
    done
fi
echo $ip 
```

# c# - 为什么这段代码不会死锁？

> ID：10640903
> 
> 赞同：5
> 
> 时间：2012-05-17T17:53:33.533
> 
> 标签：c#, locking, thread-safety, deadlock

当 Clear 尝试锁定 Build 已经锁定的同一个对象时，我希望以下代码会死锁：

```
void Main()
{
    (new SiteMap()).Build();
}

class SiteMap
{
    private readonly object _lock = new object();

    public void Build()
    {
        lock (_lock)
        {
            Clear();

            Console.WriteLine("Build");
        }
    }

    public void Clear()
    {
        lock (_lock)
        {
            Console.WriteLine("Clear");
        }
    }
} 
```

输出：

清除

建造

**编辑 1**

谢谢大家的答案。

如果我在 Clear 的锁内添加对 Build 的调用（保持其余代码相同）：

```
public void Clear()
{
    lock (_lock)
    {
        Build();

        Console.WriteLine("Clear");
    }
} 
```

确实会发生死锁（或者至少我是这么认为的，LINQ Pad 崩溃）。

根据您的回答，这不应该发生，因为它仍然是同一个线程。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T17:55:11.303

在 C# 中，持有锁的线程可以进入同一个锁而不会阻塞。

该`lock`语句以及构建它的[Monitor 类](http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx)在 .NET 中是[可重入的。](http://en.wikipedia.org/wiki/Reentrant_%28subroutine%29)

* * *

编辑以响应您的编辑：

当您将调用添加到`Build`内部清除时，代码不会死锁 - 它会递归调用自身。它不是*阻塞*，而是永远运行（直到最终，您遇到[StackOverflowException](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)），因为`Build`调用`Clear`哪个调用`Build`再次调用哪个调用`Clear`等等......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T17:58:13.417

的文档[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)说：

> 如果另一个线程试图输入一个锁定的代码，它将等待（阻塞）直到对象被释放。

关键词是“另一个”。线程不会阻塞自己，只会阻塞其他线程。如果另一个线程拥有该锁，`lock`则将阻塞。

这样可以省去很多麻烦。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T17:54:58.090

我不会，因为 clear 是在已经应用锁的同一个线程中调用的。

# python - ValueError：定义字典中不支持的格式字符“{”（0x7b）

> ID：10640904
> 
> 赞同：7
> 
> 时间：2012-05-17T17:53:37.710
> 
> 标签：python

我正在使用 Google Python Appengine 编写一些用于 Web 开发的代码。在我的代码中，我必须使用 % 和字典连接字符串 这是我编写的代码。

```
def print_form(self, unameError='', passwdError='', verpasswdError='', emailError='', unameValue='', emailValue='' ):
    self.response.out.write( form3 % {  "unameError"    : unameError, 
                                        "passwdError"   : passwdError, 
                                        "verpasswdError": verpasswdError, 
                                        "emailError"    : emailError, 
                                        "unameValue"    : unameValue,  
                                        "emailValue"    : emailValue
                                     }  
                            ) 
```

对于此代码，我从服务器收到此错误：

> web-app-local-directory-path/main.py"，第 139 行，在 print_form "emailValue" 中：emailValue ValueError：索引 218 处不支持的格式字符 '{' (0x7b)

我似乎无法弄清楚这段代码有什么问题。我已经定义了一个有效的字典，据我说它似乎没有问题。

有人请帮我解决这个问题。

问候 Vaid，阿布舍克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T17:56:36.477

听起来您的值中可能有序列“%{” `form3`。

# android - 在真正的 Android 设备上使用 Tcp 套接字

> ID：10640905
> 
> 赞同：3
> 
> 时间：2012-05-17T17:53:41.070
> 
> 标签：android, sockets, system-calls, ports

我可以使用 Tcp 套接字连接两个 Android 设备（不是模拟器），并提供 WIFI 网络采用的正确 IP 地址吗？我应该通过特定端口进行端口转发吗？是否可以使用系统调用以编程方式打开端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:16:07.447

**我可以使用 Tcp 套接字连接两个 Android 设备（不是模拟器），并提供 WIFI 网络采用的正确 IP 地址吗？** 阅读此内容：http: [//developer.android.com/guide/topics/wireless/wifip2p.html](http://developer.android.com/guide/topics/wireless/wifip2p.html)

**我应该通过特定端口进行端口转发吗？** 从该站点的快速高峰开始，您似乎必须这样做，但是我建议您阅读链接并亲自查看。

**是否可以使用系统调用以编程方式打开端口？** 无论如何，我知道是否必须登录您的路由器并打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:19:09.880

问：是的，绝对

这是一个很好的链接（其中之一，包括 Android 文档）：

[http://android-er.blogspot.com/2011/01/simple-communication-using.html](http://android-er.blogspot.com/2011/01/simple-communication-using.html)

基本上，“套接字就是套接字”。没问题。

# google-maps - 谷歌地图互动

> ID：10640906
> 
> 赞同：3
> 
> 时间：2012-05-17T17:53:42.970
> 
> 标签：google-maps, google-maps-api-3

描述我正在尝试做的事情的快速场景：

例如，假设您是一家航空公司，并且您想显示您提供服务的城市的地图。因此，用户调出显示的谷歌地图，它显示您在迈阿密有一个标记，在纽约有一个标记。我希望用户能够单击迈阿密标记，它会导致线条动画并绘制连接到纽约标记甚至与迈阿密相关联的多个城市的拱形箭头。

任何人都知道，除了在 Flash 中完成此操作之外，或者以某种非 Google Maps API 原生的方式完成此操作之外，是否有可能进行类似的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:53:55.127

看看这个：

[http://maps.forum.nu/v3/gm_flight_path_animated.html](http://maps.forum.nu/v3/gm_flight_path_animated.html)

它绘制了 3 条动画路线：迈阿密 - 华沙​​、迈阿密 - 开罗和迈阿密 - 悉尼。

为有些杂乱无章的代码道歉，但这是我手受伤后写的第一篇文章，所以我尽量少打字。

# php - xdebug: var_dump 不打印我的对象？

> ID：10640911
> 
> 赞同：0
> 
> 时间：2012-05-17T17:53:49.163
> 
> 标签：php, xdebug

我正在尝试在 PHP5 中编写三元树，但是当我想用 var_dump 打印我的对象时，我的对象并没有完全打印出来：

```
 class TernaryTree#1 (2) {
      public $head =>
      class Node#2 (7) {
        public $payload => NULL
        public $key => string(0) ""
        public $is_leaf => bool(false)
        public $left => class Node#7 (7) {
           public $payload => NULL
           public $key => string(0) ""
           public $is_leaf => bool(false)
           public $left => class Node#6 (7) {
            ...
           }
           public $mid => class Node#8 (7) {
           ...
           }
           public $right => NULL
           public $wordEnd => bool(false)
          }
          public $mid => string(1) "0"
          public $right => NULL
          public $wordEnd => bool(false)
       }
      public $payload => NULL 
```

在 xdebug 中，我的对象看起来不像这样？我的 var_dump() 中的这些点“...”是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:40:15.400

来自[php-manual](http://php.net/manual/en/function.var-dump.php)的 var_dump-section 的[评论之一](http://www.php.net/manual/en/function.var-dump.php#82419)：

> 请记住，如果您安装了 xdebug，它会将数组元素和对象属性的 var_dump() 输出限制为 3 级深度。
> 
> 要更改默认值，请编辑您的 xdebug.ini 文件并添加以下行：xdebug.var_display_max_depth=n
> 
> 更多信息在这里： [http ://www.xdebug.org/docs/display](http://www.xdebug.org/docs/display)

# asp.net - Site.Master 页面上的 ASP.NET MVC 2 数据收集

> ID：10640912
> 
> 赞同：0
> 
> 时间：2012-05-17T17:53:54.643
> 
> 标签：asp.net, asp.net-mvc-2

我有一个 site.master 页面，我需要在其中收集时事通讯注册，所以我希望我可以在用户注册时立即向他们提供反馈，并且不会干扰任何其他页面活动。它是一个简单的文本框和按钮。

然后数据被写入远程 WCF Web 服务，所以我可以使用 AJAX 调用，尽管那将是跨域的，这可能是一个问题。服务返回成功消息或失败原因。

所以，我的问题是，这种实现的最佳方法是什么，我可以使用该服务吗？

谢谢！布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:47:26.657

为了避免跨域问题，我会使用“双跳”解决方案。首先，在您的项目中添加对 WCF 服务的引用。然后在您的控制器中创建一个返回 a 的方法`JsonResult`，在该方法中您可以调用 WCF 服务并将结果作为 JSON 返回。

然后在客户端应用程序中，您可以使用标准`.ajax()`方法进行注册。它与跳数的数量有点复杂，但它可以让您控制过程的每个步骤并避免跨域问题。

# version-control - Perforce：我可以在文件上放置“监视”，以便在文件更改时通知我吗？

> ID：10640916
> 
> 赞同：8
> 
> 时间：2012-05-17T17:54:13.597
> 
> 标签：version-control, perforce

我想在 Perforce 中对文件进行新更改时收到通知。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T18:04:44.940

如果您正在运行[p4 review daemon](https://community.perforce.com/s/article/2920)，您只需将文件添加到您的 p4 用户的“reviews”中。

```
# A Perforce User Specification.
#
#  User:        The user's user name.
#  Email:       The user's email address; for email review.
#  Update:      The date this specification was last modified.
#  Access:      The date this user was last active.  Read only.
#  FullName:    The user's real name.
#  JobView:     Selects jobs for inclusion during changelist creation.
#  Password:    If set, user must have matching $P4PASSWD on client.
#  Reviews:     Listing of depot files to be reviewed by user.

User:   you

Email:  you@yourcompany.com

Update: 2012/05/01 11:08:18

Access: 2012/05/17 11:02:27

FullName:   Your Name

Password:   ******

Reviews:
    //depot/directory/...
    //depot2/dir2/file_to_review.cpp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-23T17:01:50.107

主菜单 => 工具 => 管理 => 在用户组窗口中选择您的用户行 => 编辑 [如果选择了行，则选择的名称应该是一个选项] => 表单选项卡 => 将文件或分支添加到评论文本字段（使用仓库路径)，请确保您的电子邮件在电子邮件字段中正确无误

根据 docs => “输入您要查看的文件的仓库路径是否有任何更改。每当您在评论字段中订阅的任何文件被修改时，您都会收到一封电子邮件通知以提醒您。” 请参阅：[https ://www.perforce.com/manuals/p4v/Content/P4V/configuring.user.html](https://www.perforce.com/manuals/p4v/Content/P4V/configuring.user.html)

# android - Android：创建一个无失真缩放的正方形网格

> ID：10640917
> 
> 赞同：1
> 
> 时间：2012-05-17T17:54:13.770
> 
> 标签：android, android-layout, android-canvas

我是 Android 编程的绝对初学者，所以请多多包涵 :) 对于我的简单游戏，我在开始时绘制了一个由正方形组成的 20 x 10 网格。在游戏中，我需要在一些正方形的中心绘制一个精灵。（类似于棋盘格，每个正方形的中心都有一个筹码）。我希望这款游戏能够在各种屏幕尺寸和密度下运行。我的方法是在游戏开始时获取画布宽度和高度，计算正方形的边，然后绘制网格并将其保存为位图，然后在游戏中使用该位图。这样我的网格就可以完美地跨屏幕缩放。

1）有更好的方法吗？我可以使用网格图像作为位图吗？我担心的是，当图像针对不同的屏幕进行缩放时，正方形可能会变形为矩形。另外，很难计算每个缩放正方形的中心在哪里（放置精灵）。

2) 我还需要在屏幕上的某个位置显示标题、分数、级别等。是在位图上为它留出空间然后在位图上写分数，还是为网格创建一个带有 SurfaceView 的布局和另一个我写分数、级别等的视图？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:31:07.717

使用九个补丁 .png 图像并首先创建一个代表一个正方形的图像或创建一个代表您的 20x10 网格的图像 - 您的选择。这样做是为了让它在 mdpi（每英寸中点数）屏幕上看起来正确。

然后，您需要为您打算支持的其他屏幕密度创建预缩放图像。ldpi 的大小是原始的 0.75，hdpi 是原始大小的 1.5 倍，xhdpi 是原始大小的 2 倍。

然后将图像放在项目的相关可绘制资源目录中 - 例如 /res/drawable-mdpi 和 /res/drawable-hdpi 等。

为每个密度的图像赋予完全相同的名称，例如 square.png 或 grid.png。只要这些可绘制目录包含同名的图像，Android 就会找到合适的密度并使用它。

这是一个很长的文档，但你真的需要阅读......

[支持多屏](http://developer.android.com/guide/practices/screens_support.html)

...特别是 Alternative Drawables 的部分。

# php - Wordpress PHP：意外的 $End 错误

> ID：10640922
> 
> 赞同：0
> 
> 时间：2012-05-17T17:54:27.180
> 
> 标签：php, syntax

这是我第一次使用 Wordpress 模板，也是我第一次使用 PHP（除了偶尔包含的服务器）。也就是说，我对PHP一无所知，只是对语法一无所知。

我正在尝试创建一些自定义循环，一旦我开始工作，我只需复制粘贴工作代码，更改 ID，并期望它可以工作。可能是傻？无论如何，我在第 203 行得到了一个意想不到的 $end 。

有谁愿意告诉我是什么原因造成的？提前致谢！

```
<!-- FEATURED LOOP -->
<div class="featured">
<?php $my_query = new WP_Query('category_name=featured&showposts=1'); ?>
<?php if ( have_posts() ) : ?>
    <?php while ($my_query->have_posts()) : $my_query->the_post(); ?>

        <?php do_atomic( 'before_entry' ); // origin_before_entry ?>

        <div id="post-<?php the_ID(); ?>" class="<?php hybrid_entry_class(); ?>">
            <?php do_atomic( 'open_entry' ); // origin_open_entry ?>

            <?php
            if ( current_theme_supports( 'get-the-image' ) ) {                              
                if ( is_sticky ( $post->ID ) ) {
                    get_the_image( array( 'meta_key' => 'Thumbnail', 'size' => 'single-thumbnail', 'image_class' => 'featured' ) );
                } else {
                    get_the_image( array( 'meta_key' => 'Thumbnail', 'size' => 'thumbnail', 'image_class' => 'featured' ) );
                }
            }
            ?>

            <div class="sticky-header">
                <?php echo apply_atomic_shortcode( 'entry_title', '[entry-title]' ); ?>
                <?php echo apply_atomic_shortcode( 'byline', '<div class="byline">' . __( '[entry-published] &middot; by [entry-author] &middot; in [entry-terms taxonomy="category" before=""] [entry-edit-link before=" &middot; "]', 'origin' ) . '</div>' ); ?>                 
            </div><!-- .sticky-header -->

            <div class="entry-summary">
                <?php the_excerpt(); ?>
                <?php wp_link_pages( array( 'before' => '<p class="page-links">' . __( 'Pages:', 'origin' ), 'after' => '</p>' ) ); ?>
            </div><!-- .entry-summary -->

            <?php do_atomic( 'close_entry' ); // origin_close_entry ?>
        </div><!-- .hentry -->

        <?php do_atomic( 'after_entry' ); // origin_after_entry ?>

    <?php endwhile; ?>
    <?php wp_reset_postdata(); // reset the query ?>
<?php else : ?>
<!--END FEATURED LOOP-->    

<!-- SUBFEATURED LOOP -->
<div class="subfeatured">
<?php $my_query = new WP_Query('category_name=subfeatured&showposts=1'); ?>
<?php if ( have_posts() ) : ?>
    <?php while ($my_query->have_posts()) : $my_query->the_post(); ?>

        <?php do_atomic( 'before_entry' ); // origin_before_entry ?>

        <div id="post-<?php the_ID(); ?>" class="<?php hybrid_entry_class(); ?>">
            <?php do_atomic( 'open_entry' ); // origin_open_entry ?>

            <?php
                if ( current_theme_supports( 'get-the-image' ) ) {
                    if ( is_sticky ( $post->ID ) ) {
                        get_the_image( array( 'meta_key' => 'Thumbnail', 'size' => 'single-thumbnail', 'image_class' => 'featured' ) );
                    } else {
                        get_the_image( array( 'meta_key' => 'Thumbnail', 'size' => 'thumbnail', 'image_class' => 'featured' ) );
                    }
                }
            ?>

            <div class="sticky-header">
                <?php echo apply_atomic_shortcode( 'entry_title', '[entry-title]' ); ?>
                <?php echo apply_atomic_shortcode( 'byline', '<div class="byline">' . __( '[entry-published] &middot; by [entry-author] &middot; in [entry-terms taxonomy="category" before=""] [entry-edit-link before=" &middot; "]', 'origin' ) . '</div>' ); ?>
            </div><!-- .sticky-header -->

            <div class="entry-summary">
                <?php the_excerpt(); ?>
                <?php wp_link_pages( array( 'before' => '<p class="page-links">' . __( 'Pages:', 'origin' ), 'after' => '</p>' ) ); ?>
            </div><!-- .entry-summary -->

            <?php do_atomic( 'close_entry' ); // origin_close_entry ?>
        </div><!-- .hentry -->

        <?php do_atomic( 'after_entry' ); // origin_after_entry ?>

    <?php endwhile; ?>  
    <?php wp_reset_postdata(); // reset the query ?>
<?php else : ?>         
<!--END SUBFEATURED LOOP--> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:04:30.230

您拥有的最后一行 php 代码是：

```
 <?php else : ?> 
```

你需要完成那个[控制结构](http://php.net/manual/en/control-structures.alternative-syntax.php)。您缺少以下内容：

```
 <?php endif; ?> 
```

# c# - 在 Metro 中查找和读取任意文件数据

> ID：10640930
> 
> 赞同：2
> 
> 时间：2012-05-17T17:54:50.707
> 
> 标签：c#, windows-8, windows-runtime, file-access

我在做一些非常简单的事情时遇到了很多麻烦：从 C# Win8 Metro 风格应用程序中的文件中获取任意数据。

给定一个引用现有文件的 StorageFile 对象，我需要能够查找任意位置，然后读取任意值（各种大小的整数、字符串、字节、字节数组等）。我试过的都没有用。

例如，我获得了一个`IRandomAccessStream`using `StorageFile.OpenAsync`，用它构造了一个`DataReader`，并用于`DataReader.ReadByte`读取文件的第一个字节。但`ReadByte`抛出异常（“该操作试图访问有效范围之外的数据”）。

我对 C# 和 .NET 都比较陌生，这可能无济于事。

有人可以概述如何做到这一点吗？

* * *

我被要求提供一个代码示例。这是我上面描述的，许多不同的尝试之一。这些甚至可能不是正确的类型。`f`是一个`StorageFile`引用现有文件的有效文件，由用户选择（因此没有权限问题）。

```
public async void Read(StorageFile f)
{
  IRandomAccessStream s = await f.OpenAsynch(FileAccessMode.Read);
  DataReader r = new DataReader(s);
  Byte b = r.ReadByte();
} 
```

该`ReadByte`调用是引发异常的调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:46:22.827

这是我用来将整个文件作为字符串读取的内容：

```
 using (var fs = await file.OpenAsync(FileAccessMode.Read))
        {
            using (var inStream = fs.GetInputStreamAt(0))
            {
                using (var reader = new DataReader(inStream))
                {
                    await reader.LoadAsync((uint)fs.Size);
                    string data = reader.ReadString((uint)fs.Size);
                    reader.DetachStream();
                    return data;
                }
            }
        } 
```

寻找某个位置的一个明显选择是将另一个值传递给 GetInputStreamAt()。要读取字节 - 您只需调用 reader.ReadBytes()。如果在这种情况下某些东西不起作用 - 它可能是由 WinRT 中的错误/不完整实现引起的。我推测读取文件应该比使用 4 个不同的代理类更简单，所以这可能会改变。

# hibernate - 集群环境中的 Hibernate PooledOptimizer 主键违规

> ID：10640931
> 
> 赞同：0
> 
> 时间：2012-05-17T17:54:54.050
> 
> 标签：hibernate, caching, jakarta-ee, cluster-computing

在我们有 8 个集群成员并使用 Hibernate 3.2.5 的生产环境中，我遇到了 Primary Key Violation 问题 [由于 Hibernate PooledOptimizer 实现中的缺陷而导致的著名问题]，之后，我们将 Hibernate 版本更改为 3.6.10。但是，在高负载处理期间，某些实例仍然存在主键违规问题。我重新检查了 PooledOptimiser，现在看起来很好，没有多个 nextrVal() 调用。

供您参考，我们正在使用 eHcache。

有人可以通过一些了解它吗？问题出在哪里？或问题的可能原因。

# vim - MacVim：跨窗口共享命名寄存器？

> ID：10640932
> 
> 赞同：3
> 
> 时间：2012-05-17T17:54:56.880
> 
> 标签：vim, window, buffer

我想跨 MacVim 窗口共享命名寄存器缓冲区（就像我在单个实例中跨缓冲区一样）。换句话说，假设我标记了一个位置 m，然后去其他地方：

我将一些文本拉到寄存器 a 中，从当前点到 'm：“a'm

然后我转到另一个窗口（不，我不是指同一窗口中的另一个拆分视图......）并想粘贴：“ap

在所有实例之间共享命名寄存器的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:45:28.233

MacVim 的不同顶级窗口是具有自己状态的不同 Vim 实例，这使得这很难。据我所知，您有两种选择：

1.  使用`"+`or`"*`寄存器，它们都使用 Mac 系统剪贴板。（顺便说一句：在 X11 中它们是不同的，但所有其他 GUI 都以相同的方式对待它们）。MacVim有标准的`Cmd`+ `X`//绑定使用。不幸的是，这只给你一个共享缓冲区。`C``V``"+`

2.  保留一个包含寄存器的文本文件，正如 Max 在[Make vim yankings global via a shared text file](https://superuser.com/questions/266547/make-vim-yankings-global-via-a-shared-text-file)中所解释的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:26:42.063

你应该看看[YankRing](https://github.com/vim-scripts/YankRing.vim)插件。它“保留了以前的 yanks、更改和删除的历史记录”。我认为它会做你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-27T10:23:18.883

顶级窗口使用不同的 vim 实例，因此它们不共享相同的寄存器，但不同的选项卡确实共享相同的寄存器。

因此，作为一种快速而简单的解决方案，在同一窗口的不同选项卡中打开文件以共享它们的命名寄存器。

# c# - 来自 URI 的 REST WCF 服务 - ArrayOf - 空元素

> ID：10640937
> 
> 赞同：0
> 
> 时间：2012-05-17T17:55:01.030
> 
> 标签：c#, xml, wcf, rest

当我如下调用我的服务时，XML 元素 TruckName 和 Website 是否为空？显然，这些元素是在网页上的 XML 中填充的（请参阅下面的 xml）。我相信它与首先是 ArrayOf 元素有关吗？下面也是我的控制台应用程序调用 GetInfo() 方法的代码。我需要摆脱 ArrayOfFoodTruck 元素吗？如果是这样，最简单的方法是什么。提前谢谢大家..

```
- <ArrayOfFoodTruck xmlns="http://schemas.datacontract.org/2004/07/WCFServiceLibrary" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
- <FoodTruck>
 <Company i:nil="true" /> 
 <DayOfWeek i:nil="true" /> 
 <Location i:nil="true" /> 
 <TimeOfDay i:nil="true" /> 
 <TruckID>0</TruckID> 
 <TruckName>Truck 87</TruckName> 
 <Website>http://www.test.com</Website> 
 </FoodTruck>
- <FoodTruck>
<Company i:nil="true" /> 
<DayOfWeek i:nil="true" /> 
<Location i:nil="true" /> 
<TimeOfDay i:nil="true" /> 
<TruckID>0</TruckID> 
<TruckName>Bon Me</TruckName> 
<Website>http://www.test.com</Website> 
</FoodTruck>
</ArrayOfFoodTruck> 
```

这是来自我的控制台应用程序的呼叫..

```
 static void GetInfo()
    {

        XElement rootXml = XElement.Load("http://localhost:5150/getnames");

         var FoodTruck = from C in rootXml.Elements()
         select new { TruckName = (string)C.Element("TruckName"), WebSite = (string)C.Element("Website") };
         foreach (var x in FoodTruck)

         Console.WriteLine("{0}\r\n{1}", x.TruckName, x.WebSite);
         Console.ReadKey();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:17:13.633

我猜你的命名空间有问题

```
XDocument xDoc = XDocument.Load(.....);
XNamespace ns = XNamespace.Get("http://schemas.datacontract.org/2004/07/WCFServiceLibrary");

var result = xDoc.Descendants(ns+"FoodTruck")
    .Select(n => new 
    { 
        TruckName=n.Element(ns+"TruckName").Value,
        WebSite = n.Element(ns+"Website").Value
    })
    .ToArray(); 
```

**--编辑--** **或**

```
XmlSerializer ser = new XmlSerializer(typeof(FoodTruck[]), "http://schemas.datacontract.org/2004/07/WCFServiceLibrary");
var foodTrucks = (FoodTruck[])ser.Deserialize(new StringReader(xml));

public class FoodTruck
{
    public string Website;
    public string TruckName;
} 
```

# java - 如何使方法接受任何对象并检查它是否包含方法？

> ID：10640939
> 
> 赞同：1
> 
> 时间：2012-05-17T17:55:07.187
> 
> 标签：java, generic-programming

我正在为许多元素设置可见性。现在我想创建一个将接收 的方法`Object`，假设每个类的顶级父级都是`Object`，这就足够了吗？如果那是我应该做的，我应该如何施放它们？我想检查接收到的对象是否包含`setVisibility`方法以及它是否确实执行了一些操作。

我应该尝试运行该方法并捕获异常吗？听起来很愚蠢。那我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:01:46.037

您可以使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)或实现[接口](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:05:03.247

请参阅此处的第一个示例，[http://java.sun.com/developer/technicalArticles/ALT/Reflection/](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

```
 import java.lang.reflect.*;

   public class DumpMethods {
      public static void main(String args[])
      {
         try {
            Class c = Class.forName(args[0]);
            Method m[] = c.getDeclaredMethods();
            for (int i = 0; i < m.length; i++)
            System.out.println(m[i].toString());
         }
         catch (Throwable e) {
            System.err.println(e);
         }
      }
   } 
```

你基本上得到你正在查看的对象的类变量，调用`getDeclaredMethods()`来获取方法名称的数组。然后，您可以检查类中是否存在方法名称。

在页面的下方还有一个调用该方法的示例。

```
 import java.lang.reflect.*;

   public class method2 {
      public int add(int a, int b)
      {
         return a + b;
      }

      public static void main(String args[])
      {
         try {
           Class cls = Class.forName("method2");
           Class partypes[] = new Class[2];
            partypes[0] = Integer.TYPE;
            partypes[1] = Integer.TYPE;
            Method meth = cls.getMethod(
              "add", partypes);
            method2 methobj = new method2();
            Object arglist[] = new Object[2];
            arglist[0] = new Integer(37);
            arglist[1] = new Integer(47);
            Object retobj 
              = meth.invoke(methobj, arglist);
            Integer retval = (Integer)retobj;
            System.out.println(retval.intValue());
         }
         catch (Throwable e) {
            System.err.println(e);
         }
      }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:02:44.133

与其使用 Object 接收/处理，不如尝试定义自己的接口甚至抽象类更合适。在您的接口或抽象类中定义您的可见性方法并处理它

# ruby-on-rails - 两个表上的 Rails 自定义外键名称

> ID：10640941
> 
> 赞同：8
> 
> 时间：2012-05-17T17:55:08.087
> 
> 标签：ruby-on-rails, foreign-keys, associations

我有两个模型，例如 User 和 Club 及其属性：

```
User:
  id
  uid
  email
  etc. 
```

和

```
Club:
  id
  player_id
  address
  supporter
  etc. 
```

出于某种原因，join 属性`clubs.player_id`与`users.uid`NOT`clubs.player_id`与`users.id`. 是否可以使用和将这两个模型与`one-to-one`关联联系起来？谢谢`has_one``belongs_to`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-17T18:09:33.210

我敢打赌这会奏效：

```
class User < ActiveRecord::Base
  has_one :club, :foreign_key => :player_id, :primary_key => :uid
end

class Club < ActiveRecord::Base
  belongs_to :user, :foreign_key => :player_id, :primary_key => :uid
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:11:58.373

俱乐部可以有很多用户并且用户属于许多俱乐部吗？如果是这样，您可能需要查看[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)页面中的 has_and_belongs_to_many 关系关联方法。如果使用这种关联方法，则需要创建一个单独的迁移表来关联 user_id 和 club_id。

# ios - iOS 推送通知不适用于带有 Test Flight 的临时分发

> ID：10640942
> 
> 赞同：9
> 
> 时间：2012-05-17T17:55:09.413
> 
> 标签：ios, xcode, push-notification, apple-push-notifications, testflight

有点奇怪的问题...

在我的 AppDelegate.m 我有以下内容：

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:NO];
    // Override point for customization after application launch.

    // Enable test flight reporting; https://testflightapp.com/sdk/doc/0.8.3/
    [TestFlight takeOff:@"myTestFlightToken"];

    // Let the device know we want to receive push notifications
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:
     (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

    return YES;
}

-(void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    NSString *tokenAsString = [[deviceToken description] 
                                 stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];

    NSLog(@"Device token: %@", deviceToken);
    User.currentUserPushNotificationToken = tokenAsString;
    [TestFlight passCheckpoint: [NSString stringWithFormat: @"Registered for remote notifications %@", deviceToken]];
}

-(void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{
    NSLog(@"Failed to get token, error: %@", error);
    [TestFlight passCheckpoint: [NSString stringWithFormat: @"Failed to register for remote notifications %@", error]];    
} 
```

我的团队正在使用[Test Flight](http://testflightapp.com)在开发人员和利益相关者之间分发临时构建。

当我在自己的 iPhone 4 上构建应用程序时，应用程序会询问我是否希望允许推送通知，并且该应用程序也会出现在设置 > 通知 > 在通知中心中

到目前为止，一切都很好...

当我创建开发 ipa 并将其分发给团队时，不会询问其他用户是否希望允许推送通知，并且这不会出现在设置 > 通知中...

有人能想到为什么会这样吗？

## 更新

对于分发，我正在使用 Team Provisioning Profile 构建应用程序，该配置文件的捆绑 ID 为“*”而不是应用程序名称 - 这可能是问题吗？这是 Apple 自动生成的 Team Provisioning Profile。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T02:39:29.787

是的，这就是问题所在。推送通知的应用标识符中不能有通配符（否则它将推送到所有应用！）。

# c - 指针与整数C的比较与赋值

> ID：10640943
> 
> 赞同：5
> 
> 时间：2012-05-17T17:55:11.203
> 
> 标签：c, pointers

我对这两个陈述有一个理论问题：

假设`p`一个指向 Integer 和`a`Integer 的指针：

一）`if(p==a){.....}`或`if(p>a)`..

b) `p=a`;

它们都是非法的并且`b`特别危险，但是标准 C 是如何看待它们的呢？

阅读标准，我没有发现它们是否是错误、未定义的行为、未指定的行为、违反约束，其中一个是否合法。

查看无数类似的问题，我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:23:06.537

都是非法的。为了进行比较，双方都可以转换为通用类型，对于赋值，右侧必须可以转换为左侧的类型，并且：

> 涉及指针的转换，除了 6.5.16.1 的约束允许的情况外，应通过显式转换来指定。

( **6.5.4** , 3; 6.5.16.1 描述了空指针常量、`void`指针和`_Bool`赋值情况下的一些例外情况。)

当您添加显式强制转换以将指针转换为整数时，程序再次变为有效，您将从比较中获得布尔值。结果取决于实现。一定要`uintptr_t`在以整数形式存储指针时使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T18:38:06.583

C11 (n1570) §6.5.8 [关系运算符] / 2：

> ### 约束
> 
> 应满足下列条件之一：
> 
> *   两个操作数都有*实型*；或者
> *   两个操作数都是*指向*兼容对象类型的合格或不合格版本的指针。

（实数类型是指整数类型、枚举、实数浮点类型和`char`（§6.2.5/17））

§6.5.9 [等式运算符]

> ### 约束
> 
> 应满足下列条件之一：
> 
> *   两个操作数都有*算术类型*；
> *   两个操作数都是*指向*兼容类型的合格或不合格版本的指针；
> *   一个操作数是*指向*对象类型的指针，另一个是*指向*合格或不合格版本的指针`void`；或者
> *   一个操作数是*指针*，另一个是*空*指针常量。

§6.5.16.1 [简单赋值] / 1：

> ### 约束
> 
> 应满足下列条件之一：
> 
> *   左操作数具有原子、合格或不合格*算术类型*，右操作数具有*算术类型*；
> *   *左操作数具有与右操作数兼容的结构*或联合类型的原子、限定或非限定版本；
> *   左操作数具有原子、限定或非限定*指针类型*，并且（考虑到左操作数在左值转换后将具有的类型）两个操作数都是 *指向*兼容类型的限定或非限定版本的指针，并且左侧指向的类型具有所有右边指向的类型的限定符；
> *   左操作数具有原子、限定或非限定*指针类型*，并且（考虑到左操作数在左值转换后将具有的类型）一个操作数是指向对象类型的指针，另一个是*指向*限定或非限定版本的 指针`void`, left 指向的类型具有 right 指向的类型的所有限定符；
> *   左边的操作数是一个原子的、合格的或不合格的*指针*，右边是一个*空* 指针常量；或者左操作数的类型为 atomic、qualified 或 unqualified `_Bool`，而右操作数是 *指针*。

基本上，所有 3 个表达式都**违反了**表达式中设置的约束。

* * *

违反约束是什么意思？错误？但是没有地方说违反约束会导致翻译失败。C 标准似乎不是很清楚，但最接近的解释是：

§4 [一致性] / 2：

> 如果违反了出现在约束或运行时约束之外的“应”或“不应”要求，则行为未定义。

但这谈到了限制*之外*；和§5.1.1.3 [诊断] / 1：

> *如果预处理翻译单元或翻译单元包含违反任何语法规则或约束*的行为，则符合的实现应产生至少一个诊断消息（以实现定义的方式标识），即使该行为也明确指定为未定义或实现-定义。在其他情况下不需要生成诊断消息。

所以编译器至少需要产生一条消息（正如我们在 gcc 中看到的那样），但没有说他们在那之后应该做什么。

本段后面的例子提到

> ### 例子
> 
> 实现应为翻译单元发出诊断：
> 
> ```
>  char i;
>    int i; 
> ```
> 
> 因为在本国际标准中的措辞将构造的行为描述为约束错误和*导致未定义行为*的情况下，应诊断约束错误。

和 §6.7 [Declarations] / 3 没有明确提到违反约束将导致未定义的行为。

因此，我推断您的 3 个表达式都是**未定义的行为，并伴有诊断消息**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:35:14.397

a) 和 b) 都是违反约束的。 [C99](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)、第 6.5.8 节、第 6.5.9 节和第 6.5.16.1 节。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T18:32:37.753

我不知道我是否真的在回答你的问题，但这里是。关于a），你有一个比较，所以你基本上说的是“指针是否具有内存地址a？”。在 b) 中，您将值 a 分配给指针，这意味着您说它将指向内存地址“a”。这里有一些提示：

```
p=&a 
```

您的指针现在指向整数 a 的内存地址。

```
*p=a 
```

指针指向的值取 a 的值。

```
p=a 
```

您的指针现在指向内存值 a。

希望它有所帮助！

# php - PHP使用今天的日期生成一个随机数

> ID：10640947
> 
> 赞同：2
> 
> 时间：2012-05-17T17:55:23.620
> 
> 标签：php, date, random, time

我正在尝试为一个内容块（在网页上）分配一个随机生成的数字，该数字基于今天的日期（无论是什么）和一个固定的数字。由于某种原因，输出的数字种类存在巨大差异。例如，当我在本地测试我的代码时，生成的数字对我来说足够好（积极的），但在实际的实时服务器上，它们通常是相反的并且是负数。

这是我的一个班轮：

```
<?php $today=date('YmdHi'); echo rand(201203140906, $today); ?> 
```

基本上“201203140906”是年、月、日、小时。

这是好事还是坏事？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:00:47.260

在 32 位系统上，可以在 INT 中保存的最大值是 2147483647。

[http://php.net/manual/en/language.types.integer.php](http://php.net/manual/en/language.types.integer.php)

如果你的本地机器是 64 位的，而你的服务器是 32 位的，它们会有不同的大小限制。服务器将无法处理像 201203140906 这样大的整数。

您可以随机生成一个较小的数字，然后将其添加到 201203140906。

或许像这样：

```
$today = date('YmdHi');
$startDate = date('YmdHi', strtotime('2012-03-14 09:06:00'));
$range = $today - $startDate;
$rand = rand(0, $range);
echo "$rand and " . ($startDate + $rand); 
```

或者您可以这样做以在过去十天内生成随机日期：

```
$today = date('YmdHi');
$startDate = date('YmdHi', strtotime('-10 days'));
$range = $today - $startDate;
$rand = rand(0, $range);
echo "$rand and " . ($startDate + $rand); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:12:20.633

```
<?php 
$then = strtotime('2012-03-14 09:06:00'); 
$now = time();
for($i=0; $i<100; $i++) echo date('YmdHi', rand($then, $now)), '<br>'; 
?> 
```

顺便说一句......你也可以使用“uniqid()”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:09:27.147

鉴于您在评论中的解释，您可能可以使用[shuffle()](http://www.php.net/manual/en/function.shuffle.php)函数解决您的问题。您可以有两个数组，一个是日期列表，另一个是您希望随机分布的数据，然后简单地从打乱的数据中读取。由于没有代码示例，我将把细节留给你。

# node.js - Node.js：模块导出，仅对象

> ID：10640951
> 
> 赞同：3
> 
> 时间：2012-05-17T17:55:39.517
> 
> 标签：node.js

我不明白为什么只有对象可以很好地导出。看那个：

**第一个文件**

```
var a = exports.a = {};
var b = exports.b = 0;

exports.xxxxx = function(){

    a.hello = 'help';
    b = 104;

}; 
```

**第二个文件**

```
var a = require('firstfile').a;
var b = require('firstfile').b;

module.exports = function(){

    console.log(a); // {hello:'help'}
    console.log(b); // 0

}; 
```

为什么 ？

出口 b 的解决方案是这样做的：

**第一个文件：**

```
...
a.hello = 'help';
exports.b = 104; // (add exports)
... 
```

**第二个文件：**

```
...
var b = require('firstfile');
...
console.log(b.b); // 104 
```

为什么？

**编辑**

我想我明白了。

变量 a 仅供参考！我会向不明白的人解释：

*   读取第一个文件时，`a = {}, b = 0`
*   当我们更改 b 时，b 已更改，但不是模块（导出）！
*   这是正常的`exports.b = 104`// 我们改变了模块的值！谁是必需的。

现在，为什么对象不同？

*   因为当文件 2 被执行时。（执行一次），a = {} 的值。
*   但它显示 {xxx:xxx}
*   这是因为文件执行时a的值不是{}，而是这个对象的引用。
*   因此，当我们需要获取这个对象时，我们会搜索所有引用。

*重要的是要记住两件事：*

*   函数所需的模块被读取一次！需要在函数中要求查看更改。
*   对象库存参考。

再见！希望这有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:46:19.133

当您分配`0`给 时`exports.b`，它本质上被分配为一个常数值。您可以更新变量指向的`b`值，但不会重新导出。

例如，我通过添加一个`getB`函数稍微修改了您发布的内容：

```
var a = exports.a = {};
var b = exports.b = 0;

exports.xxxxx = function(){

    a.hello = 'help';
    b = 104;

};

exports.getB = function() { return b; }; 
```

然后，您可以通过在 REPL 中使用此文件来了解我的意思：

```
> var example = require('./example.js');
undefined
> example
{ a: {},
  b: 0,
  xxxxx: [Function],
  getB: [Function] }
> example.xxxxx()
undefined
> example.getB()
104
> example.b
0
> 
```

编辑：您对参考的评论有些正确。当你最初说

```
var b = exports.b = 0; 
```

您是说两个变量指向相同的值。这不同于指向同一个引用的两个变量（一个对象，正如您对 所做的那样`a`）。当您修改一个值时，不会修改另一个值。换句话说，当您将 0 的值更改为 1 时，您不希望`0`代码中的每个实例也都是`1`. 那可不妙。

如果您想`b`成为一个值并在每次修改该值时更新，您应该重新分配`exports.b`. 这就是为什么您会看到大多数代码被导出为一个对象的部分原因......然后，您的导出被视为引用，并且您的所有`b`' 都按预期更新。

# java - 如何在 JFrame 上的 java 中绘制 1024 个交叉 1024 个网格单元？

> ID：10640953
> 
> 赞同：0
> 
> 时间：2012-05-17T17:55:45.717
> 
> 标签：java, swing, java-2d

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.JComponent;
import javax.swing.JPanel;

public class Grid extends JComponent
{

    public void paint(Graphics g){

        super.paintComponent(g);
        Graphics2D graphics = (Graphics2D) g;
        int w = 1024*2;
        int h = 1024*2;

        for(int i=0; i<1024; i++)
        {
            graphics.drawLine(i, 0, i, 1024);
            //graphics.setColor(Color.red);

        }

        for(int j=0; j<1024; j++)
        {
            graphics.drawLine(0, j, 1024, j);
        }

    }

} 
```

我需要绘制 1024 个跨 1024 个单元格并为少数单元格着色。单元格应显示在 JFrame 上。在java中最好的方法是什么？请贴一些代码...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:03:46.457

您可以使用一些[JTable](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)功能：

```
class CellCoords{
    public int x, y;
    public CellCoords(x, y){
        this.x = x; this.y = y;
    }
}
TableModel dataModel = new AbstractTableModel() {
    public int getColumnCount() { return 1024; }
    public int getRowCount() { return 1024;}
    public Object getValueAt(int row, int col) { return new CellCoords(row, col); }
};
JTable table = new JTable(dataModel); 
```

[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)中的更多示例

```
public class ColorRenderer extends JLabel
                           implements TableCellRenderer {
    ...
    public ColorRenderer(boolean isBordered) {
        this.isBordered = isBordered;
        setOpaque(true); //MUST do this for background to show up.
    }

    public Component getTableCellRendererComponent(
                            JTable table, Object color,
                            boolean isSelected, boolean hasFocus,
                            int row, int column) {
        // Do things based on row and column to decide color
        Color newColor = (Color)color;
        setBackground(newColor);

        return this;
    }
} 
```

通常，如何使用表格文档会提供很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:18:51.597

我建议开发一个自定义摆动组件。然后将此组件添加到 JFrame。

[创建自定义组件](http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html)比听起来容易得多。只需创建一个扩展 JComponent 或 Component 的新类并覆盖`paint(Graphics)`方法。

而在paint方法中，只需使用for循环使用[Graphics](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html)方法等来绘制网格`drawLine`，`fillRect`非常简单灵活。

这为您提供了一个良好的开端，然后您可以根据需要调整大小、滚动等。

# node.js - nodeunit 的生产环境是什么？

> ID：10640957
> 
> 赞同：0
> 
> 时间：2012-05-17T17:56:02.217
> 
> 标签：node.js, nodeunit

我使用 sublime text 来创作 node.js 项目。我也使用 nodeunit 来运行测试。到目前为止，我使用了它的控制台模式，它不会产生视觉上吸引人的结果。然后我使用了 html 模式，它引入了切换到另一个窗口（浏览器）的需要。我的窗户太多了...

您如何建议以最高效的方式使用 nodeunit？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:08:20.833

对于开发，我永远不会使用 html 报告器来运行单元测试。我使用 html 报告器的唯一原因是向其他人报告结果。我检查了 nodeunit，如果您不喜欢默认的，可以使用一些报告器。更糟糕的情况下，您可以按照文档中的说明编写自己的记者。

# filesystems - 开发一个简单的过滤文件系统从什么开始是件好事？

> ID：10640958
> 
> 赞同：1
> 
> 时间：2012-05-17T17:56:03.907
> 
> 标签：filesystems, linux-kernel

我想为 linux 编写一个简单的过滤传递文件系统。它应该正确处理权限和所有者，所以 FUSE 是不可能的。什么是好的开始？阅读文档并从头开始编写这个东西可能会很累，有什么我可以重复使用的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:04:54.183

我发现[http://wrapfs.filesystems.org/](http://wrapfs.filesystems.org/) - 到目前为止看起来很棒。

# html - 为具有某些参数的元素添加选择器

> ID：10640962
> 
> 赞同：0
> 
> 时间：2012-05-17T17:56:26.460
> 
> 标签：html, css

我不确定这是否可能，但如果是我不知道如何解决它。

例如：

**HTML**

```
<div class="class1">
    Lorem ipsum
</div>
<div class="class2">
    Lorem ipsum
</div> 
```

**CSS**

```
.class1 {
    float:left;
}

.class2 {
    color: #fff;
} 
```

我的问题是：是否可以添加一些选择器，为每个具有`float: left;`参数集的元素提供一些样式？

我只对 CSS 解决方案感兴趣。

谢谢！

# javascript - 使用 scrollTop 方法时左右移动 div

> ID：10640968
> 
> 赞同：0
> 
> 时间：2012-05-17T17:56:37.853
> 
> 标签：javascript, jquery, html, scroll, scrolltop

Ciao, io voglio muovere il div a destra ea sinistra in base alla posizione dello 滚动条 Potete aiutarmi？

您好，我想根据滚动条的位置将 div 向右或向左移动你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:35:44.090

```
$(window).scroll(function() {
    if($(window).scrollTop() > 100) {
        $("div#mydiv").css({
            "left": ($(window).scrollTop() - 100) + "px"
        }).text("hello:" + $(window).scrollTop());
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:29:04.100

呵呵 。你需要多一点......乐于助人;-)

但这就是我认为您的意思：

[http://jsfiddle.net/pWUDJ/3/](http://jsfiddle.net/pWUDJ/3/)

# html - 在css中，如果我将背景图像设置为重复，它会被下载一次吗？

> ID：10640975
> 
> 赞同：1
> 
> 时间：2012-05-17T17:56:57.820
> 
> 标签：html, css, download, bandwidth

我有一个 div 是 ex。500 像素 x 500 像素，我有一个 10 像素 x 10 像素的图像（纹理图像）。我已将此图像设置为水平和垂直重复。我这样做是为了节省带宽，但问题是：这会节省带宽还是与我制作 500 x 500 像素的背景图像相同？（所以这个图像将被下载一次到客户端，或者它会被重复下载多少次？？）

对于 html 中具有相同 src 但大小不同的两个 img 标签的相同问题。

感谢您的建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T17:58:42.000

是的，它只会下载一次。即使您在页面上单独加载图像（可能在`img`标签中），它也只会下​​载一次（无论如何，通过任何好的浏览器）。

如何处理背景图像的下载完全取决于浏览器。浏览器必须在 CSS 规则中看到图像 url，主动下载图像（无论它想要多少次，希望一次）并根据它想要使用您的规则的方式呈现它。

# types - 什么时候在 F# 中支持无类型引用而不是类型引用？

> ID：10640978
> 
> 赞同：9
> 
> 时间：2012-05-17T17:57:10.007
> 
> 标签：types, f#, programming-languages, metaprogramming, quotations

F# 有类型化和非类型化的代码引用，我想知道在哪些用例中可以选择一个而不是另一个？

区别只是方便，无类型和类型的引用在所有情况下都可以转换为每个，或者是类型的引用，例如无类型引用可能的子集？

是否有任何示例仅适用于类型化的引用，但不适用于非类型化的引用 - 或相反？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T18:22:54.760

一般来说，我建议尽可能使用输入引号。像往常一样，这些类型将允许您静态地强制执行一些可能导致运行时失败的正确性条件。考虑：

```
let one = <@@ "one" @@>
// exception at runtime
let two = <@@ 1 + %%one @@> 
```

与

```
let one = <@ "one" @>
// compile time error: the type 'string' does not match the type 'int'
let two = <@ 1 + %one @> 
```

此外，有时在类型引用不需要的情况下，非类型引用需要额外的类型注释：

```
// ok
let l = <@ [1] @>
let l2 = <@ List.map id %l @>

// fails at runtime (obj list assumed instead of int list)
let l = <@@ [1] @@>
let l2 = <@@ List.map id %%l @@>

// ok
let l = <@@ [1] @@>
let l2 = <@@ List.map (id:int->int) %%l @@> 
```

但是，如果您正在使用引号构建一些非常通用的东西，则可能无法使用类型化的引号（例如，因为类型不是静态已知的）。从这个意义上说，未键入的引用为您提供了更大的灵活性。

另请注意，根据需要在类型化和非类型化引号之间转换非常容易（向上`Expr<_>`转换 to`Expr`以从类型化到非类型化；使用`Expr.Cast`to 去另一种方式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:26:27.287

通常，报价处理库的*使用者*将使用键入的报价。而报价处理*作者*需要处理未输入的报价。

也就是说，您通常不会使用`(<@@ @@>)`运算符直接创建无类型引用。但是，为了使用各种 F# 核心库活动模式（例如[Quotations.Patterns](http://msdn.microsoft.com/en-us/library/ee370259.aspx)模块）递归处理引用，您可以使用非类型化形式的引用。

请注意，`Expr<'T>`扩展`Expr`并没有真正添加太多信息。也就是说，键入的引用实际上只是一种错觉，所有捕获的元数据都在`Expr`对象中并且仅在运行时可用。

# iphone - 使用 didSelectRowAtIndexPath 处理 UITableViewController

> ID：10640980
> 
> 赞同：1
> 
> 时间：2012-05-17T17:57:31.953
> 
> 标签：iphone, uiviewcontroller, uitableview

我有问题`tableView:didSelectRowAtIndexPath:`。

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    /*if (!self.detailViewController) {
        self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    }
    NSObject *object = [_objects objectAtIndex:indexPath.row];
    self.detailViewController.detailItem = 对象；
    [self.navigationController pushViewController:self.detailViewController 动画：YES];*/

`if (!self.travelViewController) {
    self.travelViewController = [[TravelViewController alloc] initWithNibName:@"TravelViewController" bundle:nil];
}

[self.navigationController pushViewController:self.travelViewController animated:YES];
}` 

`pushViewController`使用 in`UIViewController`但`travelViewController`继承自`UITableViewController`.

            回答 #1

赞同：1

时间：2012-05-17T18:40:52.420

好吧，尽管没有问题，我还是试一试。我假设您使用的是被注释掉的通用代码，并将其更改为第二个版本。  

如果是这样，它看起来很好，除了你没有给 travelViewController 任何关于显示哪个“旅行”的信息。通常，当用户点击一行时会调用 didSelectRow，表示他们想要与该特定行进行交互。

```

# javascript - DOM修改后有什么方法可以重新运行jQuery插件？

> ID：10640981
> 
> 赞同：0
> 
> 时间：2012-05-17T17:57:34.150
> 
> 标签：javascript, jquery, dom

我有一个带有文件上传框的表单，我正在使用 jQuery Filestyle 插件 (http://www.appelsiini.net/projects/filestyle) 来设置输入的样式。我还有一个简单的 JavaScript 函数，允许用户上传多个文件而无需提交表单。我的初始文件上传输入看起来很完美，但是当用户单击上传附加文件按钮并创建一个新输入时，它根本没有样式。我假设这是因为插件已经在页面加载时运行并且修改 DOM 意味着任何新的都不会应用样式。

所以假设这是问题所在，我的问题是是否有办法在新创建的文件输入上调用 Filestyle jQuery？

这是我的 Filestyle jQuery 代码：

```
 <script src="/scripts/jquery.filestyle.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(function() {
        $("input.file").filestyle({
            image: "/images/btn_select_file.gif",
            imageheight : 24,
            imagewidth : 115,
            width : 275,
        });
    });
    </script> 
```

还有我的 JavaScript DOM 操作：

```
<script type="text/javascript">
var fileCounter = 1;
function addFile() {
  fileCounter++;
  var newdiv = document.createElement('div');
  newdiv.id = 'file' + fileCounter;
  newdiv.innerHTML = '<div class="form-item"><label for="file_' + inputCounter + '">Upload Additional File ' + (inputCounter) + '</label>\r<input type="file" name="file_' + inputCounter + '" id="file_' + inputCounter + '" class="file"><span class="space"><a href="javascript:removeFile(' + inputCounter + ');">Remove</a></span>';
  document.getElementById("files").appendChild(newdiv);
  document.getElementById("filecount").value = inputCounter;
}
</script> 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:03:34.137

您必须在`function addFile()`函数处调用插件方法以让插件知道设置样式，以便您的新`function addFile()`函数可以类似于

```
function addFile() {
  fileCounter++;
  var newdiv = document.createElement('div');
  newdiv.id = 'file' + fileCounter;
  newdiv.innerHTML = '<div class="form-item"><label for="file_' + inputCounter + '">Upload Additional File ' + (inputCounter) + '</label>\r<input type="file" name="file_' + inputCounter + '" id="file_' + inputCounter + '" class="file"><span class="space"><a href="javascript:removeFile(' + inputCounter + ');">Remove</a></span>';
  document.getElementById("files").appendChild(newdiv);
  document.getElementById("filecount").value = inputCounter;
  $("input.file").last().filestyle({
            image: "/images/btn_select_file.gif",
            imageheight : 24,
            imagewidth : 115,
            width : 275,
        });
} 
```

`$("input.file").last()`正在选择新添加的文件输入并通过为其初始化插件来为其添加样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:06:23.333

我会尝试这样的事情（虽然我还没有实际测试过）

```
<script type="text/javascript">
var inputCounter = 1;
function addFile() {
  inputCounter++;
  var newdiv = document.createElement('div');
  newdiv.id = 'file' + inputCounter;
  newdiv.innerHTML = '<div class="form-item"><label for="file_' + inputCounter + '">Upload Additional File ' + (inputCounter) + '</label>\r<input type="file" name="file_' + inputCounter + '" id="file_' + inputCounter + '" class="file"><span class="space"><a href="javascript:removeFile(' + inputCounter + ');">Remove</a></span>';
  document.getElementById("files").appendChild(newdiv);
  document.getElementById("filecount").value = inputCounter;
  $('#'+file_'+inputCounter).filestyle({
        image: "/images/btn_select_file.gif",
        imageheight : 24,
        imagewidth : 115,
        width : 275,
    });
}
</script> 
```

此外，您的变量“fileCounter”似乎已为“inputCounter”切换，这可能会导致您出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:00:13.480

当然，只需在创建后添加`newdiv`：

```
$(newdiv).filestyle({
    image: "/images/btn_select_file.gif",
    imageheight : 24,
    imagewidth : 115,
    width : 275,
}); 
```

# arrays - 如何将一个数组和一个字符串作为参数传递给函数？

> ID：10640982
> 
> 赞同：4
> 
> 时间：2012-05-17T17:57:36.370
> 
> 标签：arrays, string, perl, function, parameters

因为我找不到一种方便的方法来检查是否`$str`在 中`@array`，所以我正在尝试自己制作一个，但它不起作用。

我猜这是因为数组和字符串的混淆。它不断地`0`给予`$str`. 请让我知道如何解决它。

```
use 5.010;
use strict;
use warnings;

sub ifin {
    my (@array, $str) = @_;
    for my $i (@array) {
        if ($i eq $str) {
            return 1;
        }
    }
    return 0;
}

my @f = (1, 2, 3, 4);
my $k = 1;
print ifin(@f, $k); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T18:03:28.390

您不能将数组传递给 subs，只能传递标量列表。

```
ifin(@f, $k); 
```

是相同的

```
ifin($f[0], $f[1], $f[2], $f[3], $k); 
```

因为`@f`计算为其元素的列表。

将数组传递给 sub 的一种方法是传递引用。

```
sub ifin {
   my ($array, $str) = @_;
   for my $e (@$array) {
      return 1 if $e eq $str;
   }

   return 0;
}

my @f = (1,2,3,4);
my $k = 1;
print(ifin(\@f, $k), "\n"); 
```

顺便说一句，这也可以写成：

```
my @f = (1,2,3,4);
my $k = 1;
print(( grep { $_ eq $k } @f ) ? 1 : 0, "\n"); 
```

您可以使用[`pop`](http://perldoc.perl.org/functions/pop.html).

```
sub ifin {
   my $str = pop(@_);
   for my $e (@_) {
      return 1 if $e eq $str;
   }

   return 0;
}

my @f = (1,2,3,4);
my $k = 1;
print(ifin(@f, $k), "\n"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:10:16.203

您可能想检查 List::MoreUtils 包中的任何内容，您只需像这样使用它：

```
use List::MoreUtils 'any';

my @f= qw(1 2 3 4);
my $k=10;

print "yes\n" if( any { $_ == $k } @f ); 
```

检查文档：

```
perldoc List::MoreUtils. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T04:23:01.793

在智能匹配中怎么`$str ~~ @arr`样？这在 Perl 5.10 中可用。

```
use 5.010;
use strict;
use warnings;

my $str = 'three';
my @arr = qw(zero one two three four);
my @badarr = qw(zero one two four eight);

say '$str ', $str ~~ @arr? 'is' : 'is not', ' in $arr.';
say '$str ', $str ~~ @badarr? 'is' : 'is not', ' in $badarr.'; 
```

输出，如预期：

```
$str is in $arr.
$str is not in $badarr. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T18:17:10.213

您可以以相反的顺序 ( `print ifin($k, @f);`) 传递参数，因此数组排在最后。当您现在从子例程中捕获它们时，字符串首先出现，然后数组将填充任何列表项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T18:03:37.070

你可以使用原型，但它们有点脆弱。我会传入一个引用`@f`作为第一个参数，如下所示：

```
use 5.010;
use strict;
use warnings;

sub ifin
{
my ($array,$str)=@_;
 for my $i (@$array)
 {
  if ($i eq $str)
  {
   return True
  }
 }
 return False
}

my @f= (1,2,3,4);
my $k=1;
print ifin(\@f,$k); 
```

对于长列表，您也避免复制每个列表元素。

# algorithm - SPOJ FISHER 的想法

> ID：10640983
> 
> 赞同：2
> 
> 时间：2012-05-17T17:57:46.293
> 
> 标签：algorithm

我试图在 SPOJ 上解决这个问题：

```
 http://www.spoj.pl/problems/FISHER/ 
```

我想不出一个解决方案。我在 topcoder 上发现了一些线程，但我只能推断要使用 DP。如果有人可以指导我这将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:32:11.227

如果你使用动态规划来解决正常的最短路径问题，你会得到[http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm). 当然，这忽略了时间限制。您总是可以通过扩展状态空间来使动态规划算法更加灵活 - 但要付出一定的代价。在这种情况下，不是在每个节点上跟踪迄今为止找到的到该节点的最便宜路径的成本，您可以跟踪，因为 i = 1,2,3,4.. 最便宜路径的成本到该节点的时间最多为 i 的那个节点。您应该能够使用用于计算单个成本的递归变体来更新此成本数组 - 每个边松弛都采用给定时间的最便宜成本向量，并考虑在每个偏移量处添加该边的时间和成本以查看是否由此产生的扩展路径比迄今为止以该边缘结束的最知名路径更好。

我想知道您是否可以通过以类似方式转换 Dijkstra 算法来节省时间？至少，您可以先运行 Dijkstra 算法，然后丢弃所有节点的最短时间路径超过您的时间限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-24T17:31:59.190

解决问题的另一种方法是使用 Dijkstra 算法[http://www.geeksforgeeks.org/greedy-algorithms-set-6-dijkstras-shortest-path-algorithm/](http://www.geeksforgeeks.org/greedy-algorithms-set-6-dijkstras-shortest-path-algorithm/)。约束是`n<=50`和`time<=1000`。设给定时间 = T。因此，我们将每个节点扩展为 T 个节点，其中`dist[node][i]`表示给定时间 i 到节点的最短路径。因此，我们将在具有边缘的`n * T`节点上运行算法，`n * n * T`这些边缘将在给定的时间约束内，复杂度为`O((n * T + n * n *T) * log( N * T) )`. 我接受的解决方案：http: [//ideone.com/H8UUMf](http://ideone.com/H8UUMf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T22:39:07.250

使用动态规划。

如果所有花费时间少于该时间的路径都具有较高的成本，则您仅跟踪到节点的路径。当您看到一条新路径时，您可以使用二分搜索找到时间相同或更短的最长路径，然后仅在成本小于该路径且未超过时间限制时添加新路径。添加时，请删除所有需要更长时间且不便宜的现有路径。

您最终将获得按时间排列的最终节点的路径数组。选择适合时间限制的最便宜的。

请注意，您可能需要考虑一个节点的待办事项列表，并且一个节点可以多次出现在该待办事项列表上（每次找到一个新的廉价路径时，它都会返回它。）

# java - 将列表映射的所有组合生成列表列表

> ID：10640990
> 
> 赞同：1
> 
> 时间：2012-05-17T17:58:05.480
> 
> 标签：java, list, dictionary, combinations, permutation

我有一个`Map<Integer, List<Float>>`代表有一些分数的位置，我想生成每个位置的所有可能的分数组合（基本上是原始地图中每个列表的叉积）到`List<List<Float>>`. 所以假设我有以下地图：

```
{ 1 => [0.1f, 0.2f], 2 => [0.3f, 0.4f] } 
```

我会得到以下浮动列表列表：

```
[[0.1f, 0.3f], [0.1f, 0.4f], [0.2f, 0.3f], [0.2f, 0.4f]] 
```

我很确定我必须使用递归，只是不知道如何继续它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:17:05.683

任何时候你有一个递归算法来编码，你都需要一个归纳定义来帮助设计它。

基本情况：{} ↦ []
归纳步骤： M ↦ L ⇒ ( M ∪ { n ↦ S } ) ↦ L × S

对于 S 中的每个元素，将其添加到 L 中每个列表的末尾，并将结果列表添加到输出中。

```
List<List<Float>> llfNext = new LinkedList<List<Float>>();
for (float f : entEach.getValue())
    for (List<Float> lfEach : llfInductive)
        llfNext.add(copyAndAddToEnd(lfEach, f));
return llfNext; 
```

从这里开始应该很容易，然后你可以使它成为非递归的并减少一些复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-19T20:42:23.443

使用*Java 9*，您可以将列表映射的所有组合生成为映射*列表**，*如下所示。

[在线尝试！](https://tio.run/##nVRNb9swDL3nV/AoD6napNsOaRpgGDZs2IYeMuwy7KA4dKJEtjyJThEU@e0pJecT@UQFFE6p98hHiuREzdTNZDhdLnVeWkcwYYOsSBv57qFxYPPkUOXhqpEa5T38Rk/w0gA@ZTUwOgVPivgzs3oIudKF6JPTxejvP1Bu5JMVOJxfqux@LwhH6JrwU3vqfjVWUa/HvPIpCxYPj1DgM98WUxx@U34cSD2RPGy8bLGyrEi0alfSZuJOtrIm3Ml2lpzGt3fx9xH//hz@fhf/IeI/RvyGEDPZy22dluGbp4yvQlo7frEgN@8jiWRVYJFsvK3P7S304133wP/Kfe@AIzmGiM7hpgfxhxwh/VGmwnOxdmI6LB16pkbxgAZz/seD8nAo4aSjWkjNDVKYGgq4UfQD5yJprr0nZxWl1hhMCVStyGahkv506BVefK6/1nlJNtRQJMnRMmvOyeU41IoQbEX86oeVLRGnoj/3hLlkTKdTcpOTKY56dDisUmTFdcWDZhObm2ww8nQYjJZj5MEcPP6vuC5aGTOHvDKkSzNnFtC45kGptDusgawDCxEwPBjh007CA0TDVQ2Q2nygCx5pW/ggfN0BzXMkLVHGZ2lC5mwO9GzrjE8/U2YUcVsIZrXWCtuXFe51GP@1A/flInylc2J1EedCY0wu6DzbTbvnyIgHMjxexV6fC9vt3OFgYSV9MiZW7U2s9pUsh1S5IpAv4xfXDTDPy6X2f@MQS@u@GI@iqIzZ3cwcvJ7n/eUBs7AQt4@@XdOb/ovtxZZOp8YmMuMYKh0f3QF1iRaNxXL5Cg "Java (JDK) – 在线试用")

```
Map<Integer, List<Float>> mapOfLists = new LinkedHashMap<>();
mapOfLists.put(1, List.of(0.1f, 0.2f));
mapOfLists.put(2, List.of(0.3f, 0.4f));
mapOfLists.put(3, List.of(0.5f, 0.6f)); 
```

```
List<Map<Integer, Float>> listOfMaps = mapOfLists.entrySet().stream()
        // Stream<List<Map<Integer,Float>>>
        .map(entry -> entry.getValue().stream()
                // represent list elements as Map<Integer,Float>
                .map(element -> Map.of(entry.getKey(), element))
                // collect a list of maps
                .collect(Collectors.toList()))
        // intermediate output
        //[{1=0.1}, {1=0.2}]
        //[{2=0.3}, {2=0.4}]
        //[{3=0.5}, {3=0.6}]
        .peek(System.out::println)
        // reduce a stream of lists to a single list
        // by sequentially multiplying the list pairs
        .reduce((list1, list2) -> list1.stream()
                // combinations of elements,
                // i.e. maps, from two lists
                .flatMap(map1 -> list2.stream()
                        .map(map2 -> {
                            // join entries of two maps
                            Map<Integer, Float> map =
                                    new LinkedHashMap<>();
                            map.putAll(map1);
                            map.putAll(map2);
                            return map;
                        }))
                // collect into a single list
                .collect(Collectors.toList()))
        .orElse(null); 
```

```
// output a list of map values
listOfMaps.stream().map(Map::values).forEach(System.out::println);
//[0.1, 0.3, 0.5]
//[0.1, 0.3, 0.6]
//[0.1, 0.4, 0.5]
//[0.1, 0.4, 0.6]
//[0.2, 0.3, 0.5]
//[0.2, 0.3, 0.6]
//[0.2, 0.4, 0.5]
//[0.2, 0.4, 0.6] 
```

* * *

^(另请参阅：[将列表映射转换为映射列表](https://stackoverflow.com/a/66700962/15402945))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:25:04.200

```
List<List<Float>> finalList = new ArrayList<List<Float>>();
int pointsCounter = 0;
for (Integer key : map.keys()) {
    List<Float> scoresList = map.get(key);
    boolean firstValue = true;
    for (Float score : scoresList) {
        if (firstValue) {
            finalList.add(new ArrayList<Float>());
            firstValue = false;
        }
        finalList.get(pointsCounter).add(score);
    }
    pointsCounter++;
} 
```

# image-processing - 颜色检测算法

> ID：10640995
> 
> 赞同：2
> 
> 时间：2012-05-17T17:58:24.773
> 
> 标签：image-processing, colors

我正在开发一个使用 kinect 进行图像处理的系统。系统需要根据颜色（来自 kinect 图像）检测某些对象。

我目前的解决方案是使用一个窗口（固定大小）并将其滑过整个图像。然后我计算（在窗口中）绿色像素的数量并将其与某个阈值进行比较。要检查像素是否为绿色，我使用参考颜色（0x00FF00），然后计算当前像素到参考颜色的距离。

算法是这样的：

```
referenceColor = 0x00FF00;
window_width = 10;
window_height = 10;
colorSum = 0;

COLOR_TRESHOLD = 20;
WINDOW_COLOR_TRESHOLD = 70;

foreach (pixel in image)
{
   colorSum = 0;
   for(i = 0; i < window_width; i++)
   { 
      for(j = 0; j < window_height; j++)
      { 
        //get the current pixel that is processed by the window
        curPixel = image.getPixelAt(i+pixel.indexX,j+pixel.indexY);
        // calculate the distance
        distance = sqrt((curPixel.r - referenceColor.r) ^ 2 + (curPixel.g - referenceColor.g) ^ 2 + (curPixel.b - referenceColor.b) ^ 2); 

        // check if distance smaller than the treshold
        if(distance <= COLOR_TRESHOLD) 
        {
           // pixel is green
           colorSum++;
        }
      }
   }
   // check if there are enough green pixels in the image
   if(colorSum > WINDOW_COLOR_TRESHOLD)
   {
       // green object detected
   }
} 
```

该算法的问题在于，如果颜色太暗/太亮（由于阳光/反射），它会失败（我必须更改阈值才能获得良好的检测）。理想情况下，我想存档每个绿色像素/对象都会被检测到（无论它有多亮/多暗）。有没有人知道任何好的（健壮的）算法来存档这个？会欣赏正确方向的一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:04:24.397

您可能需要使用其他颜色空间。转换为 HSV，并使用色调。看看[这篇文章](http://www.aishack.in/tutorials/tracking-colored-objects-in-opencv/)，它提供了一个例子。这是用openCV，但适应起来应该不会太难。

# java - JSoup Post 为工作站点抛出 404

> ID：10640997
> 
> 赞同：0
> 
> 时间：2012-05-17T17:58:25.523
> 
> 标签：java, post, jsoup, minecraft

我正在尝试为我的世界制作一些东西，使某人能够登录到他们的 mojang 帐户。我正在尝试用 jsoup 做到这一点。但是有一个问题，当它重定向到[https://account.mojang.com/me](https://account.mojang.com/me)这是正常的登录页面时，它会引发 404 错误？

```
public String connect() {
    try {
        final Response response = 
                Jsoup.connect("https://account.mojang.com/login").execute();
        final Document doc = response.parse();
        final Element authToken = doc.select("input[name^=authenticityToken]").get(0);
        final Map<String, String> cookies = response.cookies();
        final Connection connection = 
                Jsoup.connect("https://account.mojang.com/login")
                .data("authenticityToken", authToken.val())
                .data("username", "email")
                .data("password", "password")
                .method(Method.POST)
                .followRedirects(true);
        connection.timeout(10000);
        for (final Entry<String, String> cookie : cookies.entrySet()) {
            connection.cookie(cookie.getKey(), cookie.getValue());
        }
        final Response postResponse = connection.execute();
        return postResponse.body().toLowerCase();
    } catch (Exception e) { e.printStackTrace(); return "try again"; }
} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:00:19.750

您应该使用整个 cookies Map 变量

```
.cookies(cookies); 
```

我从来没有玩过 Minecraft，但在我看来，你应该用

```
postResponse.parse(); 
```

并查看是否没有 Javascript 重定向。由于 Jsoup 不是为执行 Javascript 而构建的，因此它不会将您重定向到您想要的位置。还..

```
.followRedirects(false); 
```

您是否尝试过使其变为真，看看会发生什么？（我会尝试打印它得到的页面，看看 Jsoup 是否正在重定向）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:02:57.580

网站是否有 SSL 加密？这可能是个问题

# python - python - 如何使用正则表达式将字符串与python中的数字匹配？

> ID：10640998
> 
> 赞同：2
> 
> 时间：2012-05-17T17:58:28.960
> 
> 标签：python, regex

我是正则表达式的新手，但我想匹配一个字符串，直到数字开始。

所以就说我有：

`EEEE1234`

然后我只想提取：

`EEEE`

我尝试搜索，但我发现正则表达式令人困惑，我认为最好的方法是通过示例。有什么想法吗？另外，对任何正则表达式代码生成器或关于此的好的教程有任何见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:00:00.113

使用 \D 表示“不是数字”：

```
r"^\D+" 
```

例子：

```
import re

s = "EEEE1234"
print re.match(r"^\D+",s).group(0) 
```

在线查看它：[ideone](http://ideone.com/3fg1k)

您已经获得了一些关于教程的建议，但我还想补充一点，如果您还没有看过该[模块的](http://docs.python.org/library/re.html)[文档`re`](http://docs.python.org/library/re.html)，您应该在阅读完更基本的教程后将其加入书签并阅读。该文档不是初学者级别的，但它有一些非常有用的技巧，专门用于在 Python 中使用正则表达式，并且在结尾处还有一些示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:10:03.690

*   `\d`             = 一位数（数字 0 到 9）
*   `\D`             = 一位非数字
*   `\D+`           = 一个或多个非数字
*   `\D+\d`       = 一个或多个非数字后跟一个数字
*   `(\D+)\d`   = 一组中捕获的一个或多个非数字，后跟一个数字

所以，如果你有一个字符串

```
str = 'EEEE1234' 
```

然后你可以[`import re`](http://docs.python.org/library/re.html)和使用[`re.match`](http://docs.python.org/library/re.html#re.match)来匹配字符串上的正则表达式：

```
re.match(r'(\D+)\d', str) 
```

这将为您提供一个匹配对象，您可以从中提取组的内容：

```
re.match(r'(\D+)\d', str).group(1) 
```

这将包含`EEEE`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:00:06.900

也许有一点可能会有所帮助，那就是将正则表达式视为首先执行**匹配**操作的工具。搜索、替换和字符串拆分都是这种能力的结果。一个例子，取决于你想如何提取所需的部分：

```
r"^(\D+)\d*" 
```

此正则表达式使用您以后可以引用的*捕获组。*

如前所述，出于学习目的，有许多资源。如果您对正则表达式的工作原理感兴趣，或者想更好地理解它们，您可能需要阅读一些关于[正则语言](http://en.wikipedia.org/wiki/Regular_language)的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:43:52.367

如果我们专门寻找字母何时遇到数字，我会做类似的事情：

```
re.search(r'[a-zA-Z]+(?=\d+)') 
```

只有当它后面跟着数字时才会匹配它，但不会返回数字本身。这样你也可以避免团体，这可能是混乱的。