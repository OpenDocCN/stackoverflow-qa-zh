# StackOverflow 问答 11213000-11213999

# sql - SQL 关键字搜索以返回任何结果

> ID：11213004
> 
> 赞同：-1
> 
> 时间：2012-06-26T17:42:42.020
> 
> 标签：sql, search, loops, keyword, temp-tables

我在 SQL 中创建了一个关键字搜索，它获取关键字列表并检查产品数据库中的各个列。因此，您可以搜索标题、描述等。

我希望它返回所有结果并跳过没有返回任何结果的结果。

它在所有关键字都匹配时有效，但在一个或多个关键字没有返回结果时无效。我认为需要检查零结果或更好的方法来匹配临时表和产品表。

在下面的示例中，如果我搜索“braun,washer”，我会得到两个结果。

```
ProductId      ProductName
23             Large Braun Washer
45             Small Washer by Braun 
```

但是，如果我搜索“braun,washer,washing”，我没有得到任何结果，因为没有任何产品包含“washing”这个词。我仍然想获得前两个命中的两个结果。

```
--temp table for keyword values
create table #delimitedKeywords
(
    [keywordID] int identity(1,1),
    keywords varchar(100)
)   
declare @keywordValues varchar(50);
declare @arrayLength int;
declare @position int;
declare @nextDelim int;
declare @prevDelim int;
declare @delimValue varchar(10);
set @keywordValues = 'braun,washer,washing,';
set @arrayLength = LEN(@keywordValues);
set @position = 1;
set @nextDelim = 0;
set @prevDelim = 0;

--loop through position
while @position <= @arrayLength 
    begin
        --substring comma delimeter
        set @nextDelim = CHARINDEX(',', @keywordValues, @position);
        set @delimValue = (SUBSTRING(@keywordValues, @position, @nextDelim - @prevDelim -1));

        --stop loop if at end   
        if LEN(@delimValue) > 0
        BEGIN
            insert into #delimitedKeywords
                (keywords)
            values
                (@delimValue);
        END
        set @prevDelim = @nextDelim;
        set @position= @nextDelim+1;
    end

begin

--select the keywords from the temp table to search on
declare @Keyword varchar(100)

select @Keyword =  [keywords] from #delimitedKeywords

--search product table
SELECT [ProductId]
      ,[ProductName]
      ,[ProductDescription]
      ,[ProductBrief]
      ,[ProductSpecification]

  FROM [Product]

  WHERE 
  [ProductName] like '%' + @Keyword + '%'
  OR [ProductDescription] like '%' + @Keyword + '%'
  OR [ProductSpecification] like '%' + @Keyword + '%'
  OR [ProductBrief] like '%' + @Keyword + '%'

--drop temp
drop table #delimitedKeywords;
end 
```

客户端将单个 SQL 参数传递给 MS SQL 中的存储过程。SQL 然后在逗号分隔符上拆分参数，然后创建一个临时表进行搜索。

最终我计划对结果进行加权，以便标题的结果比其他地方的结果更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:51:00.973

这不是会返回一个值吗：

```
select @Keyword =  [keywords] from #delimitedKeywords 
```

...也许是这样的：

```
SELECT DISTINCT [ProductId]
  ,[ProductName]
  ,[ProductDescription]
  ,[ProductBrief]
  ,[ProductSpecification]
FROM [Product]
INNER JOIN #delimitedKeywords
ON [ProductName] like '%' + Keywords + '%'
OR [ProductDescription] like '%' + Keywords + '%'
OR [ProductSpecification] like '%' + Keywords + '%'
OR [ProductBrief] like '%' + Keywords + '%' 
```

# sql - 如何在 SQL Plus 中使用 ROWID 获取派生表结果集的 ORDERED 结果？

> ID：11213006
> 
> 赞同：0
> 
> 时间：2012-06-26T17:42:57.480
> 
> 标签：sql, oracle

我有一张`emp`如下表

```
empnum deptno salary
----- ------ ------
1      null    null
null   2       null
null   null    null
null   null    3
5      null    4
null   6       1 
```

我希望结果集应该像

```
result
------
1
2
0
3
5
4
6
1 
```

如果有`3 nulls`它应该显示`0`，
如果有`only one null`它应该以插入它们的相同顺序显示其他两个值，
如果有“2个空值”那么它应该在结果集中显示一个值。

我试过了

```
select rs from  
((select decode(empno||deptno||sal,null,0,substr(empno||deptno||sal,1,1)as rs,rowid as ri from emp)
union  
((select decode(empno||deptno||sal,null,0,substr(empno||deptno||sal,2,1)as rs,rowid as ri from emp)  
minus  
(select decode(empno||deptno||sal,null,0,substr(empno||deptno||sal,1,1)as rs,rowid as ri from emp)))  
where rs is not null  
order by ri,rs; 
```

上面的查询给出的结果为

```
rs
--
1
2
0
3
4
5
1
6 
```

任何人都可以帮助我获得如上所述的确切结果集。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:29:56.300

这个答案很大程度上取决于您的表是如何创建的。它需要使用 ROWDEPENDENCIES 创建，并且每次插入后需要有一个 COMMIT 以确保保持顺序。

这对于现实世界的数据可能没有用。如果您没有在表中存储记录插入时间的时间戳，则无法确定列的顺序。

带有样本表和数据：

```
create table emp
(empnum int, deptno int, salary int) ROWDEPENDENCIES;
insert into emp (empnum, deptno, salary) values
(1,      null,    null); 
commit;
insert into emp (empnum, deptno, salary) values
(null,   2,       null);
commit;
insert into emp (empnum, deptno, salary) values
(null,   null  ,  null); 
commit;
insert into emp (empnum, deptno, salary) values
(null ,  null ,   3); 
commit;
insert into emp (empnum, deptno, salary) values
(5     , null,    4);
commit;
insert into emp (empnum, deptno, salary) values
(null   ,6 ,      1  ); 
commit;

create table emp2
(empnum int, deptno int, salary int, rowscn int) ROWDEPENDENCIES;
insert into emp2
select empnum, deptno, salary, ora_rowscn from emp; 
```

然后，您可以使用`ORA_ROWSCN`伪列来确定插入日期：

```
with countqry as
(select empnum, deptno, salary, 
        rowscn,
        decode(empnum, null, 0, 1) e,
        decode(deptno, null, 0, 1) d,
        decode(salary, null, 0, 1) s    
from emp2)
select 0 as val, rowscn 
from countqry where e+d+s = 0
union  all
select coalesce(empnum, deptno, salary) as val, 
       rowscn
from countqry where e+d+s = 1
union all 
select val, rowscn from
(
select * from 
  (select empnum, deptno, salary, rowscn 
    from countqry where e+d+s >= 2)
unpivot (val for x in (empnum as '1', deptno as '2', salary as '3'))
order by rowscn, val
)
order by rowscn 
```

[这是一个关于 SQLFiddle 的工作示例。](http://sqlfiddle.com/#!4/427cc/10)

# ruby-on-rails - 即时更换导轨

> ID：11213007
> 
> 赞同：1
> 
> 时间：2012-06-26T17:43:00.053
> 
> 标签：ruby-on-rails, ruby, nosql, metaprogramming

我对 ruby​​ 和 rails 都很陌生，但对 java、javascript 和一点 python 有经验。

我正在考虑创建一个 Web 应用程序，在该应用程序中应该可以创建具有各种属性和它们之间的连接（关系）的不同事物（模型）。Ruby on Rails 似乎支持一些无模式后端（mongodb、neo4j 等），所以它引起了我的兴趣。是否可以构建一个 Web 界面来创建新的 RoR 模型，向它们添加属性和关系？我希望 Web 界面中的用户操作能够转换为具有 RoR 服务器上指定属性的新模型。这些模型当然应该以某种方式持久化（也许它们可以作为 ruby​​ 文件持久化？）。我想您可以在某些方面将其视为 CMS。

我应该搜索哪些工具或概念？

问候奥斯卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:24:21.250

当然可以按照您的要求进行操作，并且有几种不同的方法，但我建议您更深入地了解您的要求。

在 Ruby 以外的语言中，我帮助其他人构建和构建了类似的元建模 CMS 框架。第一个是在 1999 年完成的：完整的 Web GUI，用于直接从浏览器创建模型和模型之间的关系。当时我们必须这样做的原因是我们使用的底层平台使得创建模型和执行 MVC 变得相当困难，因此我们必须帮助开发人员使用框架代码和 GUI 工具。

Ruby 作为一种语言非常适合内部[特定领域的语言](http://martinfowler.com/bliki/DomainSpecificLanguage.html)。Rails 大量使用内部 DSL，尤其是在`ActiveModel`. 因此，为 Rails 模型编写基本代码通常比使用其他（更高）抽象级别要容易得多。尤其是 GUI 工具，在构建良好模型时非常难以处理，因为双向：需要能够允许手动更改代码并将该更改反映在 GUI 中。这是一个棘手的问题。

尽管如此，如果您仍想使用基于 GUI 的元建模方法，您可以选择两种主要路径：

1.  构建参数化的 RoR 元模型
2.  生成特定的 RoR 模型

从您问题的措辞看来，您似乎对 (2) 感兴趣。在这种情况下，有两种标准方法可以解决这个问题：解释或编译。如果您进行解释，那么您将创建一个用于描述模型的 DSL，并且它的执行会在 Rails 环境中实例化模型。（在 Ruby 中，类是通过执行定义它们的代码来定义的，所以这一切都很正常。）如果您进行编译，您将使用您最喜欢的持久性框架代码生成标准 RoR 模型。那么问题就变成了您将代码保存在哪里。您可以将其写入磁盘并加载。例如，您也可以将其存储在数据库中。在这两种情况下，您可能都希望查看诸如[sourcify 之](https://github.com/ngty/sourcify)类的宝石。

附带说明一下，如果您选择构建这种类型的系统，我强烈建议您使用 NoSql 面向文档的持久性机制，例如，使用 Mongoid 之类的 MongoDB。原因是 Rails 对 SQL 模式管理的支持有限，甚至更少的工作流自动化（除了基本的迁移）。给人们一个 GUI，他们可能会更频繁地混淆模式。因此，您必须处理架构迁移问题。文档数据库使这变得更简单（部分是通过将问题留给代码以懒惰的方式处理问题）。关系数据库通常不允许您这样做。它们需要预先进行模式迁移工作，这会给您的系统增加许多要求，并给整个开发人员工作流程带来摩擦。

祝你好运！

# visual-studio-2010 - vs2010中限制变量信息预处理

> ID：11213008
> 
> 赞同：0
> 
> 时间：2012-06-26T17:43:01.417
> 
> 标签：visual-studio-2010, debugging, graph

我有一个我正在研究的项目，它涉及一个 Vertex-Vertex 数据结构，它对于所有目的都只是一个图形。每个节点都有指向它的每个邻居的指针，这会导致很多循环，因为我用它来表示一个网格。

我遇到的问题是，在调试时，如果我想查看节点的信息，VS 2010 将在接下来的 5-10 分钟内为变量生成信息。我非常有信心这与大量周期有关。有没有办法只按需生成信息。如-仅显示/生成所需的即时信息？

因此，如果我单击一个节点，我不希望 Visual Studio 在接下来的 5-10 分钟内使整个图形结构跟随每个指针，这样我就可以看到节点的直接邻居是谁。然后，当我单击另一个节点时，显示那些直接邻居。

谢谢亚当。

# operating-system - 最小页框

> ID：11213013
> 
> 赞同：7
> 
> 时间：2012-06-26T17:43:22.160
> 
> 标签：operating-system, paging, virtual-memory

什么决定了必须分配给虚拟内存环境中正在运行的进程的最小页框数。

我发现上述问题的答案是`instruction set architecture`但无法理解其背后的原因。

请解释。

**编辑：** 问题在以下链接[http://www.geeksforgeeks.org/archives/4036](http://www.geeksforgeeks.org/archives/4036)（见问题3）上，我无法理解答案背后的逻辑。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T21:23:26.307

是的，ISA 确实发挥了作用。
想象一下这种假设条件，如果 ISA 支持一条指令（如 x86 中的 mov），该指令可以在 3 级间接后获取操作数（回忆 x86 的间接寻址模式）。让我们将此系统称为 A。
在另一个系统上，您最多可以有 2 个间接级别，称为 B。

在 A 和 B 上，如果我们给出 4 作为最小帧数，看看会发生什么。B 运行良好而不是 A 这就是原因：
当将操作数中具有 3 级间接性的指令加载到 cpu 中执行时，请记住我们只有 4 帧用于此进程，假设此场景
第 1 帧将用于指令本身.
框架 2 将用于第一级间接操作数位于另一个页面
框架 3 将用于第二级间接可能这不在先前分配的帧的地址范围内。
第 4 帧同样发生在下一级别的间接中。
现在回想一下管道，只有在操作数获取完成后我们才能进入下一个执行阶段，但是我们没有最终的操作数，我们只有第 4 帧中的地址，现在你得到一个页面错误，所以您删除了先前分配的帧之一以处理并重新启动导致故障的指令，但同样的事情再次发生。B系统没有这个问题。

据我记得，这是 ISA 在决定进程的最小帧数方面发挥作用的方式。参考 galvin 我认为这本书在虚拟内存部分涵盖了这一点。
但这是理论上的，我不知道这个过程在像linux这样的真实系统中是怎样的。

干杯:)

编辑：-正如您指出的链接中给出的指令可能会跨越页面边界

# iphone - FaceTime 号码有空格

> ID：11213016
> 
> 赞同：0
> 
> 时间：2012-06-26T17:43:29.710
> 
> 标签：iphone, facetime

我在拨打 Facetime 电话时遇到了这种奇怪的行为。该号码只是一个测试号码`(123-456-7890)`，但它在 Facetime 中的读取方式是`+12 3 456 7890`

有没有办法在代码中改变它，还是我坚持在每个数字上都放一个前导 1？

我在电话上收到的错误是：

```
FaceTime Failed
+12 3 456 7890 is not aviailable for FaceTime 
```

我知道这行不通，但空间稍后会弄乱实数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:58:47.590

将国家代码添加到号码 1-123-456-7890

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T16:17:15.037

在进行 facetime 通话之前，您必须删除字符串中的所有空格。例如：facetime://+1234567890

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:48:05.130

尝试使用不以 1 开头的测试编号——例如，555-555-5555 是有效的（并且没有意义）。NANP（美国/加拿大）电话号码从不以 1 开头，因此前导 1 被视为国家/地区呼叫代码的一部分。

# jquery-cookie - jquery cookie 设置

> ID：11213018
> 
> 赞同：0
> 
> 时间：2012-06-26T17:43:45.257
> 
> 标签：jquery-cookie

我是 jquery 的新手。我一直在研究如何使用 cookie 插件为 jquery 函数设置 cookie。

我有一个简单的 div 隐藏和显示功能，但希望类状态在链接到其他页面并刷新后保持不变。

**JS看起来像这样**

```
<script type="text/javascript">

$(document).ready(function(){

    $("div.toggle_search").hide();
    $("h2.trigger_up").click(function() {
    $(this).toggleClass("active").prev().slideToggle(250);
      if ($.cookie('more_search','1')) {
        $("#criteria").attr('class', $.cookie('more_search'));
    } else {
        $("#criteria").attr('class', 'active');
    }
    $.cookie('more_search', $(".trigger_up").attr('class'));
            return false;
    });

});

</script> 
```

**HTML**

```
<div id="criteria">
    <div class="toggle_search">    
        <div class='left'>
            Stuff goes here
        </div>
    </div>
    <h2 class="trigger_up"><a href="#">See More Search Criteria</a></h2>

    <div class="clear"></div>
</div> 
```

任何帮助将不胜感激。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:00:09.133

在显示或隐藏 div 之前检查 cookie。在此代码段中，id="moreButton"（不是实际按钮）的 div 具有显示和隐藏 id="moreOptions" 的 div 的文字“更多”或“Less”：

```
$(document).ready(function() {                                                  
    if ($.cookie("show") == "show") {                                       
        $("#moreButton").html("Less «");                                
        $("#moreButton").attr("title", "Hide the extra search parameters.");
        $("#moreOptions").show();                                       
    }                                                                       
    else {                                                                  
        $("#moreButton").html("More »");                                
        $("#moreButton").attr("title", "See more search options.");     
    }                                                                       

    $("#moreButton").click(function() {                                     
        $("#moreOptions").animate({ "height": "toggle" }, { duration: 60 });
        if ($("#moreButton").html() == "More »") {                      
            $("#moreButton").html("Less «");                        
            $("#moreButton").attr("title", "Hide the extra search parameters.");
            $.cookie("show", "show", { path: '/' })                 
        }                                                               
        else {                                                          
            $("#moreButton").html("More »");                        
            $("#moreButton").attr("title", "See more search options.");
            $.cookie("show", "", { path: '/' })                     
        };                                                              
    });                                                                     

}                                                                               
                  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:00:49.167

您是否包含了对 jQuery-cookie 库的引用？

请参阅您正在使用或尝试使用的插件页面上的文档，[https://github.com/carhartl/jquery-cookie/](https://github.com/carhartl/jquery-cookie/)

通过将 cookie 设置为将来过期，它应该会一直持续到过期日期。

例如：`$.cookie('more_search', $(".trigger_up").attr('class'), { expires: 7 });` //将在一周内到期。

另请注意，当您获得`$(".trigger_up").attr('class')`trigger_up 和 active 时（第一次单击链接时），您有两个类，您可能希望解析 cookie 值设置为“active”

# jquery - 使用 jQuery 动画表体变化

> ID：11213019
> 
> 赞同：1
> 
> 时间：2012-06-26T17:43:49.657
> 
> 标签：jquery, jquery-animate

我想用 jQuery 为表体 TBody 更改设置动画。

我有一张桌子：

```
<table id="filterTable">
  <tbody>
    <td>name</td>
    <td>surname</td>
  </tbody>
</table> 
```

TBody 改用 AJAX，所以我有一个加载器：

```
$('#filterTable tbody')
  .ajaxStart(function() {
     $(this).html('<tr class="filter-loading"><td colspan="5">&nbsp;</td></tr>');
                })
  .ajaxStop(function() {

                }); 
```

Loader 仅更改 TBody 的内容，没有动画（仅更改具有单个 loader 行的表行）。这是一个“**过滤器加载**”类，它包含背景图像（是加载器图像）。

```
.filter-loading {
    height: 300px;
}
.filter-loading td {
    background: url(../images/loading-small.gif) #ffffff no-repeat 18px 18px; 
    background-position: center;
} 
```

我想在所有表格行上实现简单的淡出效果并在加载器行上淡入。加载程序行的高度调整为 300px。

问题是我无法更改内容...我已经尝试过“完整”功能，但即使在 AJAX 响应之后加载程序行仍然存在。没有动画加载器行被 AJAX 响应内容替换。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:02:01.353

试试看

CSS：

```
#filterTable {
    display:block; // for animation - important(tables not animated)
} 
```

js：

```
var table  = '#filterTable tbody';
var loader = '#filterTable tbody .filter-loading';    

$("your_selector").your_event(function() {    

    $(table).animate({"opacity": 0}, function() {
        $(this).html('<tr class="filter-loading"><td colspan="5">&nbsp;</td></tr>')
               .find(".filter-loading")
               .css("opacity", 0)
               .animate({"opacity": 1});  
    });                                  

    $.ajax({
        url: your_url,

        success: function(data) {   
            $(loader).animate({"opacity": 0}, function() {
                $(this).remove();
                $(table).html("your data rows");  
            });                                      
        },
        error: function(xhr, status, errorThrown) {
            $(loader).animate({"opacity": 0}, function() {
                $(this).remove();
            });                             

            alert("sorry");
        }
    });

}); 
```

# perl - 数据量和代码量如何影响 Perl 中的 fork() 性能？

> ID：11213026
> 
> 赞同：4
> 
> 时间：2012-06-26T17:44:22.093
> 
> 标签：perl, fork

`fork()`关于 Perl 自己的数据结构，Perl 的开销是多少？1）代码大小（语法树）和 2）变量/引用中的数据量会影响分叉所花费的时间吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:05:46.903

不是 Perl 问题，因为`fork`是系统调用。这个过程是否是 Perl 并不重要，它总是做同样的事情。它不关心进程的部分内部结构，只有总内存大小有影响。

现代操作系统（如 Linux）实现了[COW](http://enwp.org/Copy-on-write)，因此`fork`通常返回非常快，每个进程几乎相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T18:22:38.247

`fork()`正如其他人所说，简短的回答是，代码/数据的数量与系统实现通常暗示的性能无关。

[但是，根据文档](http://perldoc.perl.org/functions/fork.html)，perl 本身会在调用 fork 之前刷新打开的文件句柄。所以，是的，打开的 perl 文件句柄的数量对 fork() 性能有一些影响。

（线程化的 perl 构建也会抛出一个内部互斥锁来保护内存分配，至少在我的系统上低于 5.16。像这样的小型内部同步可能会因系统和 perl 版本而异。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T18:01:19.557

分叉创建整个过程的单独副本——代码和数据——除了 I/O 句柄之外的所有内容。因此，任何增加程序内存占用的事情都会（在边际上）使 fork 操作花费更长的时间。

对于处理大量数据和多个子进程的程序，要考虑的一件事是保持父进程的占用空间尽可能小，并在子进程启动后加载数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T18:21:33.137

`fork`本身不使用内存。父进程的内存页面与子进程共享，直到子进程尝试写入共享页面，此时会制作该页面的副本，以便每个进程都有自己的页面副本。

如果将代码和只读数据与可写数据分开，则会导致许多页面始终被共享。

但是，Perl 中没有代码和数据的分离。不仅操作码与数据在同一个内存池中创建，操作码还具有可写组件！我想，这意味着分叉的孩子最终通常最终会被大部分人共享。

要确定，您必须`ps`在进程运行时进行挖掘。

# google-maps - Google Map API V3：MarkerClusterer 不会分解为标记

> ID：11213030
> 
> 赞同：1
> 
> 时间：2012-06-26T17:44:35.553
> 
> 标签：google-maps, google-maps-api-3

我有一个应用程序，我在其中使用 Google Map API 来显示用户使用他们的纬度/经度发表的帖子的标记。我使用了 MarkerClusterer 功能来更好地组织标记，该功能有效，但存在各种错误。

本质上，我一直在家里测试这个，所以所有测试帖子的纬度/经度都是一样的。在使用 MarkerClusterer 之前，放大地图最终会显示所有标记。不幸的是，使用 MarkerClusterer，例如，如果列出“5”表示非常接近的标记数量（例如这些测试帖子），则单击集群不会显示任何内容。当它们非常靠近时，不会出现任何标记。重申一下，这些标记确实在没有 MarkerClusterer 的情况下出现。

我根据另一篇描述 MarkerClusterer 的其他问题的帖子升级到 MarkerClustererPlus v2.0.9，但这并没有解决问题。

对此问题的任何见解将不胜感激。

编辑：geocodezip 建议使用overlappingmarkerspidifier，这听起来不错，但我的代码相当复杂，我不知道如何合并它。任何见解都非常感谢。代码如下：

```
function mainGeo()
{
     if (navigator.geolocation) 
        {
          navigator.geolocation.getCurrentPosition( mainMap, error, {maximumAge: 30000, timeout: 10000, enableHighAccuracy: true} );
    }
    else
    {
          alert("Sorry, but it looks like your browser does not support geolocation.");
    }
}

var stories = {{storyJson|safe}};
var geocoder;
var map;
var markers = [];

function loadMarkers(stories){

    for (i=0;i<stories.length;i++) {
        var story = stories[i];    
        if (story.copy.length > 120) {
                story.copy = story.copy.substring(0, 120) + "...";
            }

        (function(story) {      
            var pinColor = "69f2ff";
                var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=S|" + pinColor,
                    new google.maps.Size(21, 34),
                    new google.maps.Point(0,0),
                    new google.maps.Point(10, 34));
          var point = new google.maps.LatLng(story.latitude, story.longitude);
          var marker = new google.maps.Marker({position: point, map: map, icon: pinImage});
          var infowindow = new google.maps.InfoWindow({
            content: '<div >'+
                '<div >'+
                '</div>'+
                '<h2 class="firstHeading">'+story.headline+'</h2>'+
                '<div>'+
                '<span>'+story.author+'</span><br />'+
                '<span>'+story.city+'</span><br />'+
                '<span>'+story.topic+'</span><br />'+
                '<p>'+story.date+'</p>'+
                '<p>'+story.copy+'</p>'+
                '<p><a href='+story.url+'>Click to read story</a></p>'+
                '</div>'+
                '</div>'

          });

          google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map,this);

          });
            markers.push(marker);

        })(story);

    }

}

 function mainMap(position)
 {
       geocoder = new google.maps.Geocoder();
       // Define the coordinates as a Google Maps LatLng Object
       var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
       var width = window.innerWidth - 80;
       size = width;

       // Prepare the map options
       var mapOptions =
      {
                  zoom: 15,
                  center: coords,
                  mapTypeControl: false,
                  navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                  mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Create the map, and place it in the map_canvas div
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        // Place the initial marker
        var marker = new google.maps.Marker({
                  position: coords,
                  map: map,
                  title: "Your current location!"
        });

        loadMarkers(stories);
        var markerCluster = new MarkerClusterer(map, markers);

    }

  function codeAddress() {
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }

function error() {
    alert("You have refused to display your location. You will not be able to submit stories.");
    }

mainGeo(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:36:20.430

也许[v3 组中的这篇文章：在您的 Google 地图上重叠标记？认识 OverlappingMarkerSpiderfier](http://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/f53eb613af7dbec0#)可能会有所帮助：

听起来[OverlapingMarkerSpiderifier](https://github.com/jawj/OverlappingMarkerSpiderfier)可以解决您的问题。

# c - write 或 printf，哪个更快？

> ID：11213031
> 
> 赞同：13
> 
> 时间：2012-06-26T17:44:35.760
> 
> 标签：c, performance, unix, io, system-calls

进行以下测试后：

```
for( i = 0; i < 3000000; i++ ) {
    printf( "Test string\n" );
}

for( i = 0; i < 3000000; i++ ) {
    write( STDOUT_FILENO, "Test string\n", strlen( "Test string\n" ) );
} 
```

事实证明，调用 printf 总共需要 3 秒，而调用 write 需要 46 秒。凭借所有花哨的格式化魔法，以及它本身调用`printf`的事实，这可能吗？有什么我想念的吗？`printf``write`

任何和所有的想法和意见表示赞赏。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-26T18:34:37.430

> 怎么，随着... printf 本身调用 write 的事实，这可能吗？有什么我想念的吗？

是的，你缺少一些东西。`printf`不一定`write` *每次都*打电话。相反，`printf`缓冲其输出。也就是说，它通常将其结果存储在内存缓冲区中，仅`write`在缓冲区已满时或在某些其他条件下调用。

`write`是一个相当昂贵的调用，比将数据复制到`printf`'s 缓冲区要昂贵得多，因此减少`write`调用次数可以带来净性能提升。

如果您的标准输出被定向到终端设备，那么每次它看到一个- 在您的情况下，每次调用它时都会调用`printf`。如果您的 stdout 被定向到文件（或），则仅在其内部缓冲区已满时才调用 write。`write``\n``/dev/null``printf`

假设您正在重定向输出，并且`printf`内部缓冲区为 4Kbytes，那么第一个循环调用`write`3000000 / (4096 / 12) == 8780 次。但是，您的第二个循环调用了`write`3000000 次。

除了调用次数减少的影响之外，调用次数`write`的*大小*也是如此`write`。硬盘中的存储量是一个扇区——通常是 512 字节。要写入比扇区更少的数据量，可能需要读取扇区中的原始数据，对其进行修改，然后将结果写回。但是，使用完整扇区调用`write`可能会更快，因为您不必读取原始数据。 `printf`的缓冲区大小选择为典型扇区大小的倍数。这样系统可以最有效地将数据写入磁盘。

我希望您的第一个循环比第二个循环快得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T17:48:54.947

您没有将苹果与苹果进行比较，因为带有`write`运行`strlen` `3000000`时间的循环，而`printf`不会做任何事情；它也不进行任何格式化，因此“花式格式化魔法”几乎不适用。

```
size_t len = strlen( "Test string\n" );
for( i = 0; i < 3000000; i++ ) {
    write( STDOUT_FILENO, "Test string\n", len );
} 
```

另一个重要的区别是`printf`每次通过时都会刷新`\n`，而`write`不会。您应该`\n`从两个字符串中删除，以使您的基准更加公平。

# azure - 如何让 Windows azure 给我更多有用的错误信息

> ID：11213033
> 
> 赞同：0
> 
> 时间：2012-06-26T17:44:42.713
> 
> 标签：azure

我一直在尝试新的 Windows azure 网站功能，并且我收到 http 500 内部服务器错误，但日志给了我非常通用的消息，我“认为”这是数据库连接的问题，因为一切都在本地运行良好。有什么方法可以从 azure 获取更多有用的错误消息？

我使用 C# .net 4.0 和 mvc 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:06:30.773

您可以调整 web.config 中的自定义错误部分以始终为您提供详细的错误吗？

# android - 对于配备 Retina 显示屏的 Mac Book Pro，Android 模拟器无法缩放到 100%

> ID：11213037
> 
> 赞同：32
> 
> 时间：2012-06-26T17:44:47.613
> 
> 标签：android, macos, android-emulator, retina-display

对 SO 或谷歌没有太多帮助。在 Macbook Pro Retina 上，我的模拟器是实际大小的 1/4，并且点击无法正常工作。请帮助设置我的模拟器以进行视网膜显示。

为澄清起见，模拟器的图像被缩小到可用模拟器窗口的 1/4，但点击记录在整个窗口中。例如，要解锁设备，您需要猜测解锁按钮在窗口空白部分的位置，然后从那里单击并拖动。

这是一个说明这一点的图像（帽子提示 Corey D）：

![点击/单击区域与显示区域](../Images/b4d1b9df5c17f64301a8fa8e2799aee2.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T23:43:30.580

这已在[ADT21 预览版中修复](http://tools.android.com/download/adt-21-preview)

您可以通过执行以下操作在 Eclipse 中启用预览工具：

1.  启动 Android SDK 管理器
2.  选择工具->选项
3.  点击“启用预览工具”
4.  使用 SDK Manager 卸载现有版本的 ADT 并安装预览工具

确认它可以在 MacBook Pro Retina 15" 上运行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T21:30:01.153

这是一个已知的问题。我们正在努力修复。

编辑：

[链接到问题](http://code.google.com/p/android/issues/detail?id=33383)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T23:56:16.687

从 SDK 管理器的第 22 版开始，“启用预览工具”已移至首选项：

1.  启动 Android SDK 管理器
2.  选择 Android SDK 管理器->首选项
3.  点击“启用预览工具”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T20:07:33.660

在 Eclipse 中的 SDK Manager 中，转到菜单栏，选择 Tools、Options。启用预览频道并安装 SDK 版本 21。我现在在配备 Retina Display 的 Macbook Pro 上使用它。

# python-3.x - 在 pywin32 中创建一个新的 Excel 文件

> ID：11213045
> 
> 赞同：5
> 
> 时间：2012-06-26T17:45:21.443
> 
> 标签：python-3.x, export-to-excel, pywin32

我正在编写一个程序，概括地说，它采用记事本文件并将其保存为 excel 文件。

现在我的程序打开了一个我创建的空白 excel 文件，只是“Book1.xls”：

```
xlApp = Dispatch("Excel.Application")
xlApp.Visible=0
xlWb = xlApp.Workbooks.Open(file_path+"/Book1.xls")
workBook = xlApp.ActiveWorkbook
sheet = xlApp.ActiveSheet 
```

它用于`Book1.xls`根据需要写入和格式化，然后使用将其另存为另一个文件名

```
workBook.SaveAs(new_file_path+'/UpdatedSheet.xls') 
```

我想知道如何简单地创建一个要写入的新 excel 文件，然后另存为文件。无需`Book1.xls`已经在特定目录中创建。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T16:56:20.460

您可以使用 Workbooks 对象的 Add 方法创建一个新工作簿：

```
>>> import win32com.client as win32
>>> excel = win32.Dispatch("Excel.Application")
>>> workbook = excel.Workbooks.Add()
>>> workbook.SaveAs(new_file_path+'/UpdatedSheet.xls') 
```

# bugzilla - Bugzilla 中不显示图形报告；“图像损坏或截断”

> ID：11213049
> 
> 赞同：1
> 
> 时间：2012-06-26T17:45:47.457
> 
> 标签：bugzilla

当我在 Bugzilla（版本 4.0.2）的**报告**部分下选择**图形报告**时，报告正在生成但不显示，而是显示十字标记（X）缺少图像符号，当我使用 firebug 调试它时，它给出以下错误“**图像损坏或截断**”。

 ****我已经安装了生成图形报告所需的以下模块：

1.  广东
2.  图表
3.  模板-GD
4.  GDTextUtil
5.  GDGraph

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:49:17.090

尝试安装`mod_perl`模块。我做到了并且工作了！****

# c# - 转换为 double 到小数点后两位

> ID：11213052
> 
> 赞同：11
> 
> 时间：2012-06-26T17:46:00.670
> 
> 标签：c#, decimal, rounding

嗨，我是 ac# 新手，有人会礼貌地告诉我如何将这段代码的值转换为双精度/四舍五入的十进制数。在此先感谢

```
DataTable dtValues = new DataTable("GetValues");

strValueNumber = ValueNumber[0].ToString();
dtGetValues = SQLMethods.GetValues(strValueNumber);

total = 0;

for (int i = 0; i < dtValues.Rows.Count; i++)
{
    total1 = total1 + Convert.ToInt32(dtGetValues.Rows[i]["total_1"]);                  
    total2 = total2 + Convert.ToDouble(dtGetValues.Rows[i]["total_2l"]) * .45; 

    tbtotal1.Text = total1.ToString();
    tbtotal2.Text = total2.ToString(); 
}
}               
catch (Exception ex)
{
    MessageBox.Show("Error in returning selected Values. " +
                    "Processed with error:" + ex.Message);
}
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T17:47:01.777

采用[`Math.Round`](http://msdn.microsoft.com/en-us/library/75ks3aby)

```
Math.Round(mydoublevalue, 2); 
```

在您的代码中

```
tbtotal2.Text = Math.Round(total2, 2).ToString(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-11T10:18:27.953

我的回答已经很晚了，但是对于像我这样想要的人来说：

转换为双精度/十进制并且***还希望该值始终显示为小数点后 2 位 (.00* )** `String`

```
tbtotal2.Text = Math.Round(total2, 2).ToString("#.00"); 
```

以下表示始终保留两位小数。

```
"#.00" 
```

如果有值，以下表示两位小数。

```
"#.##" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-26T17:54:02.143

如果您只想将值四舍五入以显示为字符串，您也可以使用[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)。

```
tbtotal1.Text = String.Format("{0:0.##}", total1); 
```

文本“{0:0.##}”描述了您希望它的格式。# 表示不应包含结束零（例如 1.2 保留字符串“1.2”），如果您改为使用“{0:0.00}”，则无论如何都会包含两位小数，因此双 1.2 将变为“1.20 ”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T17:49:25.877

像这样做。

```
 tbtotal1.Text = Math.Round(double.Parse(total1.ToString()), 2).ToString();
 tbtotal2.Text = Math.Round(double.Parse(total2.ToString()), 2).ToString(); 
```

# ruby-on-rails - 设置默认数据库连接 Rails

> ID：11213057
> 
> 赞同：24
> 
> 时间：2012-06-26T17:46:22.527
> 
> 标签：ruby-on-rails, database, activerecord, mongoid

我的 rails 应用程序有自己的 MySql 数据库（并且需要 mysql2 gem），但还需要为一个特定模型连接外部 MongoDB 数据库（因此我在 Gemfile 中包含了 mongoid 和 bson_ext）。现在，当我尝试为新模型生成迁移时，它告诉我

```
$ rails g migration CreateLocations
       error  mongoid [not found] 
```

当我生成 Location 模型时，它包含 Mongoid::Document，因此 Rails 显然认为它使用外部数据库作为我的主要数据存储。

数据库.yml：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: associalize_development
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock 
```

mongoid.yml：

```
development:
  host: pearl.mongohq.com
  port: 27019
  username: asfasdf
  password: sadfasdf
  database: app4574678

test:
  host: pearl.mongohq.com
  port: 27019
  username: asdfadhasdfa
  password: hadsadfas
  database: app4574678

production:
  host: pearl.mongohq.com
  port: 27019
  username: asdfdfsasda
  password: afdasdfdasdf
  database: app4574678 
```

**使用 Mongo 的**更新模型****

 **```
class ExternalMongoModel
  include Mongoid::Document

  field :title
  field :long_title
  field :deal_type
  field :merchandise_type
  field :market_id
  field :market_name
  field :market_location, type: Array
  field :featureType
  field :country_code
  field :subtitle
  field :offer_ends_at
  field :price
  field :value
  field :merchant_type
  field :content
  field :merchant

  index(
    [[:division_latlon, Mongo::GEO2D]], background: true
  )

end 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-14T04:44:07.137

将此添加到应用程序块中`config/application.rb`：

```
config.generators do |g|
  g.orm :active_record
end 
```

（在[这里](https://groups.google.com/forum/?fromgroups=#!topic/mongoid/3yeKEduk0zE)找到）

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-04-29T06:21:16.060

如果您不想更改 config/application.rb 您可以在生成模型时使用它：

```
rails generate active_record:migration 
```

如果您更改 application.rb 文件，以调用 mongoid 生成器，例如模型“联系人”，则可以使用：

```
rails g mongoid:model contacts 
```

（[解决方案链接](https://stackoverflow.com/questions/6372626/using-active-record-generators-after-mongoid-installation)）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-08T17:51:37.800

首先检查以下块是否存在于您的 rails 应用程序的 config/application.rb 文件中

```
config.generators do |g|
  g.orm :active_record
end 
```

如果不添加则，否则您可以运行

```
rails g active_record:migration 
```**

# wordpress - Joomla 的模块就像在 wordpress 中一样？

> ID：11213060
> 
> 赞同：-1
> 
> 时间：2012-06-26T17:46:31.053
> 
> 标签：wordpress, joomla

我通常为自己设计 joomla 模板，但这次我想为 wordpress 设计一个“主题”。问题是我找不到比“小部件”更接近“模块”的东西，显然你不能安装一个新的，对吧？

那么他们是怎么做到的呢？如果我想在某个位置放置幻灯片（使用 joomla），我只需安装一个新的并将其放置在该位置。

我假设 wordpress 中的“侧边栏”类似于 joomla 中的“位置”，您可以在其中添加任意数量的侧边栏。但是如果现有的小部件不能满足我的需要，我该如何得到它？！

还有一件事，WP中的“插件”与Jommla中的“插件”完全一样吗？

我的问题可能很愚蠢，但实际上这是我使用 wordpress 的第一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:16:27.040

[小部件](http://codex.wordpress.org/WordPress_Widgets)是最接近模块的东西，尽管它们并不完全相同。您可以放置​​小部件的位置 100% 取决于主题。根据您的技能水平以及您对 WordPress 和 PHP 的熟悉程度，添加小部件区域非常容易。要添加新的小部件区域，您可以在主题中使用[register_sidebar()](http://codex.wordpress.org/Function_Reference/register_sidebar)函数和[dynamic_sidebar](http://codex.wordpress.org/Function_Reference/dynamic_sidebar)。如需更深入（允许稍旧）的解释，请查看Justin Tadlock 的[这篇](http://justintadlock.com/archives/2010/11/08/sidebars-in-wordpress)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:49:57.487

如果您对 joomla 感到满意，那么在 wordpress 中进行调整不会有什么大不了的。在wordpress中

Wordpress 小部件与 Joomla 模块相同，并且 wordpress 插件的行为类似于 joomla 插件。[您可以在任何 wordpress 页面或帖子中轻松使用 wordpress 插件。您可以在http://codex.wordpress.org/WordPress_Widgets](http://codex.wordpress.org/WordPress_Widgets)了解小部件

# c - 运行 GCC 编译的命令？

> ID：11213071
> 
> 赞同：0
> 
> 时间：2012-06-26T17:47:23.173
> 
> 标签：c, compiler-construction

我正在使用 GCC 编译器，但我希望在编译后对实际运行的代码进行编码。有没有我可以用来做这个的标志？现在我只是在做

```
 gcc code.c 
```

没有生成code.exe...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:50:37.180

默认创建的文件名为 a.out。如果要将其命名为 code.exe，正确的行应该是`gcc -o code.exe code.c`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:48:36.830

GCC 生成的可执行文件默认称为“a.out”，除非您使用该`-o`选项为输出文件指定名称。

# python - 使用 ctypes 将 python 对象作为参数传递给 C/C++ 函数

> ID：11213072
> 
> 赞同：0
> 
> 时间：2012-06-26T17:47:24.383
> 
> 标签：python, ctypes, python-c-api

我有一个带有将 PyObject 作为参数的函数的 dll，例如

```
void MyFunction(PyObject* obj)
{
    PyObject *func, *res, *test;

    //function getAddress of python object
    func = PyObject_GetAttrString(obj, "getAddress");

    res = PyObject_CallFunction(func, NULL);
    cout << "Address: " << PyString_AsString( PyObject_Str(res) ) << endl;
} 
```

我想使用 ctypes 在 python 的 dll 中调用这个函数

我的python代码看起来像

```
import ctypes as c

path = "h:\libTest"
libTest = c.cdll.LoadLibrary( path )

class MyClass:
    @classmethod
    def getAddress(cls):
        return "Some Address"

prototype = c.CFUNCTYPE(    
    c.c_char_p,                
    c.py_object
)

func = prototype(('MyFunction', libTest))

pyobj = c.py_object(MyClass)
func( c.byref(pyobj) ) 
```

当我运行此代码时，我的 Python 代码中存在一些问题，我收到了如下消息

WindowsError：异常：访问冲突读取 0x00000020

任何改进python代码的建议都会被采纳。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T01:41:12.180

我对您的代码进行了以下更改，它对我有用，但我不确定这是 100% 正确的方法：

1.  使用 PYFUNCTYPE。
2.  只需传递 python 类对象。

例如：

```
prototype = c.PYFUNCTYPE(    
    c.c_char_p,                
    c.py_object
)

func = prototype(('MyFunction', libTest))

func( MyClass ) 
```

# java - 为基于 Socket 的 Android 应用程序创建非冻结 UI 的理想方法

> ID：11213073
> 
> 赞同：2
> 
> 时间：2012-06-26T17:47:29.797
> 
> 标签：java, android, sockets, asynchronous, freeze

我正在开发一个用于`Socket`与我的应用服务器通信的 Android 应用（也使用 Java 编写`ServerSocket`）。

在我用来为客户端套接字制作的控制台程序中，我有一个循环继续运行并处理来自服务器的所有消息（一系列`writeObject()`和`readObject()`往返的套接字对象流），直到某个消息出现（例如; `bye`) 终止循环。

由于控制台程序不涉及任何冻结问题，因此它在那里运行良好。但是我的应用程序有一个 Activity，它将根据来自服务器的消息更新 UI，如果我采用相同的方法，这显然会冻结。

那么，在不挂起游戏 UI 的情况下，处理这种不断处理从服务器接收到的消息的无限循环的理想方法是什么？

PS：我知道这无关紧要，但是我在 Android 应用程序和服务器之间以**JSON**格式交换数据。此外，将不胜感激解释该建议的示例。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:58:00.943

您可能希望在其自己的线程上为此使用[服务](http://developer.android.com/reference/android/app/Service.html)，纯粹用于网络和数据处理。

然后，您可以将此服务绑定到您的主应用程序并从/向它发送接收消息。这是关于该主题的相当不错的教程：[服务教程](http://www.vogella.com/articles/AndroidServices/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:49:10.353

推荐使用 of `AsyncTask`。`AsyncTask`主要用于进行此类服务器交互。此外，您可能希望使用`Service`它与服务器进行持续交互。

相关链接：

对于 AsyncTask - [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

对于服务 - [http://developer.android.com/reference/android/app/Service.html#LocalServiceSample](http://developer.android.com/reference/android/app/Service.html#LocalServiceSample)

# java - Java JTable 展开折叠行为

> ID：11213074
> 
> 赞同：0
> 
> 时间：2012-06-26T17:47:33.323
> 
> 标签：java, swing, jtable, accordion, jtreetable

谁能指出我的方向，我如何使用JTable实现以下行为？

[http://www.jankoatwarpspeed.com/examples/expandable-rows/](http://www.jankoatwarpspeed.com/examples/expandable-rows/)

我需要一些示例代码来使单元格中的图像可点击（更改展开/折叠图像）。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:09:14.000

> 为我指明方向，如何使用 JTable 实现以下行为？

看看（死掉的项目）[JTreeTable](http://java.sun.com/products/jfc/tsc/articles/treetable1/)，优秀的解决方法

*   [由 aephyr 定制](https://stackoverflow.com/a/9517974/714968)

*   [摆动X](http://swingx.java.net/)

*   [NetBeans 的大纲](https://codereview.stackexchange.com/questions/4446/file-browser-gui#6182305)

*   [非免费由Jide](http://www.jidesoft.com/products/grids.htm)

# eclipse - Eclipse Indigo Service Release 2 的 Hiberclipse

> ID：11213075
> 
> 赞同：0
> 
> 时间：2012-06-26T17:47:35.187
> 
> 标签：eclipse, hibernate, eclipse-plugin

我只需要帮助我为我的 eclipse indigo 版本配置 hiberclipse。

安装新软件-->在休眠插件的 URL 下添加，我看不到更新，它说没有选择站点...

[http://hiberclipse.sourceforge.net/siteupdate](http://hiberclipse.sourceforge.net/siteupdate)。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:22:07.263

得到它的工作......手动下载源代码并放置在eclipse插件下......

谢谢

# java - 字符串比较 Java

> ID：11213077
> 
> 赞同：2
> 
> 时间：2012-06-26T17:47:50.080
> 
> 标签：java, string, multidimensional-array, comparison

我有一组正在输出的锁组合。我想确保没有重复组合。这些组合不仅仅是整数。为了格式简单，我将它们全部转换为字符串。允许我循环和比较每个字符串以便没有重复的代码行是什么？有任何想法吗？例如二维数组

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:54:32.887

将锁组合存储在一组中可能更容易。这将更容易确保它们是独一无二的。

这也会快得多，因为您不需要将每个字符串与数据集中的所有其他字符串进行比较......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:21:03.397

[通过Arrays.asList(T... a)](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)将每个组合封装为 List以保持它们的顺序并将它们存储在[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)中，以确保[contains(Object o)](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#contains%28java.lang.Object%29)上的唯一性和恒定时间性能，以确定它是否已经存在。

```
import java.util.Arrays;
import java.util.List;
import java.util.HashSet;

public class UniqueLocks {
    public static void main (String[] args) {
        List lock1 = Arrays.asList("1", "22", "333");
        List lock2 = Arrays.asList("a", "bb", "ccc");
        List lock3 = Arrays.asList("eee", "bbb", "ccc");

        HashSet uniqueLocks = new HashSet(Arrays.asList(lock1, lock2, lock3));

        List duplicateLock = Arrays.asList("1", "22", "333");

        if (uniqueLocks.contains(duplicateLock)) {
            System.out.println("Lock [" + duplicateLock + "] already present.");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:53:43.787

不确定您打算使用哪种语言执行此操作，但您可以检查两个字符串在 C# 中是否具有相同的值，如下所示

```
String myString = "Hello World!"; 
String myString2 = "Hello World!"; 

if(myString.equals(myString2)) {
    //do something cause we have a match

} 
```

如果你有一个字符串数组，你可以遍历它们。

它在其他语言（如 java、vb.net）中非常相似。

编辑：在我开始写答案后添加了 java 标签.. 抱歉

希望这可以帮助，

# php - AJAX 有我的数据时在 403 上运行错误回调？

> ID：11213078
> 
> 赞同：0
> 
> 时间：2012-06-26T17:47:51.090
> 
> 标签：php, ajax, wamp

这是对先前问题的重大修订，因为我觉得我误解了问题的性质。我通过 AJAX 发送到我自己的 WAMP 服务器上的独立 PHP 脚本的 GET 请求正在登陆我 403 Forbidden... 但我得到了我想要的输出。让我解释：

我有...

1.  全面设置`Full Control`权限。他们全部。
2.  我使用了相对路径和绝对路径，以及使用 127.0.0.1 和 localhost 的完整 URL。
3.  独立有`header('Access-Control-Allow-Origin: *');`
4.  使用.htaccess 和 httpd.conf 中的冗余`<Directory ...>`和指令重新启动 Apache。`Allow from all`
5.  [浏览了](https://www.google.com/search?q=403+forbidden+causes)8页
6.  阅读我在 StackOverflow 上可以找到的所有内容。
7.  牺牲了一只山羊，把一个处女扔进了火山。

我可以通过在浏览器中输入文件地址直接访问该文件并查看我想要的输出。当我运行这个：

```
$.ajax({
  type: 'GET',
  url: 'lib/GetNextTags.php',
  data: {
    context_code : context_code
  },
  cache: false,
  success: function (data, textStatus, jqXHR) {
        //...
    },
    error: function( event, jqxhr, ajaxSettings, thrownError ) {
        alert(event.responseText);
    },
    dataType: "json"
}); 
```

不调用成功回调，但调用错误回调。作为参数传递的事件对象包含我一直试图进入的输出`event.responseText`。`event.readyState`是 4。我使用`json_encode()`并将所有内容编码为 UTF-8，所以我认为 jQuery 在解码方面没有问题。

那么......为什么是403？为什么错误回调？

# java - JavaFX 2 BorderPane 使用完整空间

> ID：11213079
> 
> 赞同：7
> 
> 时间：2012-06-26T17:48:00.030
> 
> 标签：java, user-interface, javafx, html-editor

我只是面临一个我自己无法解决的小问题。我尝试在我的 BorderPane 中放置一个包含 TextField 和 HTML 编辑器的 vBox，但未使用完整空间。另一个问题是，如果我缩小窗口，html 编辑器会与我的左侧选项窗口重叠。

![在此处输入图像描述](../Images/0c04f186a90751c7c072a721efa1319b.png)

```
private void initEditor()
{
editor = new HTMLEditor();
editor.setId("editor");
editor.lookup(".top-toolbar").setDisable(true);
editor.lookup(".top-toolbar").setManaged(false);
((ToolBar) editor.lookup(".bottom-toolbar")).getItems().addAll(FXCollections.observableArrayList(((ToolBar)editor.lookup(".top-toolbar")).getItems()));

editorBox = new VBox();
TextField field = new TextField();
field.setPrefHeight(36);
field.setId("editor-title");
editorBox.setFillWidth(true);
editorBox.getChildren().addAll(field, editor);
    root.setCenter(editorBox);
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-26T22:26:03.707

好的，所以这里出了一些问题，我会尝试解决它们，提供一些建议和示例解决方案。

> 我尝试在我的 BorderPane 中放置一个包含 TextField 和 HTML 编辑器的 vBox，但未使用完整空间。

您需要使用[VBox.setVgrow(editor, Priority.ALWAYS)](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/VBox.html#setVgrow%28javafx.scene.Node,%20javafx.scene.layout.Priority%29)方法让 HTMLEditor 占用 VBox 中的任何额外空间。此外，请确保 HTMLeditor 具有无限的最大高度，以便它可以增长以适应可用区域，例如`editor.setMaxSize(Double.MAX_VALUE, Double.MAX_VALUE)`. 调用`editorBox.setFillWidth(true)`是多余的，因为该`fillWidth`属性的默认值为`true`.

但即使你做了所有这些，（从 2.2b13 开始）WebPane 大小调整中存在一个错误，这会给你带来问题。在内部，WebPane 实现为包含工具栏和可编辑 WebView 的 GridPane。默认情况下，WebView 的首选大小为 800x600。HtmlEditor 控件不会为 WebView 设置 GridPane 约束，以使其大小超过其首选大小。

要解决此问题，您可以在将 WebView添加到活动场景*后通过 css 查找来查找 WebView，并手动调整 GridPane 约束。*这里有一些代码可以做到这一点：

```
stage.show();
...
WebView webview = (WebView) editor.lookup("WebView");
GridPane.setHgrow(webview, Priority.ALWAYS);
GridPane.setVgrow(webview, Priority.ALWAYS); 
```

> 我缩小窗口，html 编辑器与我的左侧选项窗口重叠。

在 BorderPane 中显式设置中心窗格的最小宽度设置，使其不会溢出外边缘窗格。

```
editorBox.setMinSize(0, 0); 
```

您需要这样做，因为[BorderPane 文档](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/BorderPane.html)指出：

> 默认情况下，BorderPane 不会剪切其内容，因此如果子项的最小尺寸使其无法适应其空间，则子项的边界可能会超出其自身的边界。

* * *

顺便说一句，您的代码中的查找调用是可疑的。通常，在节点被添加到显示舞台上的活动场景并且 JavaFX 系统有机会在节点上运行 CSS 布局传递之前，您无法通过 css ID 查找节点 - 否则查找只会返回 null。

* * *

对于调试 JavaFX 布局问题，[ScenicView](http://fxexperience.com/scenic-view/)应用程序非常宝贵。

* * *

这是一个完整的示例，用于生成类似于您问题中链接的图像的布局，但没有您提到的问题。

```
import com.javafx.experiments.scenicview.ScenicView;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.web.*;
import javafx.stage.*;

public class HtmlEditorInBorderPane extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(final Stage stage) throws IOException {
    // option pane.
    VBox optionPane = new VBox(10);
    MenuBar menuBar = new MenuBar();
    menuBar.getMenus().addAll(new Menu("School"), new Menu("Social"), new Menu("Network"));
    TreeItem<String> root = new TreeItem<>("Private Notes");
    root.setExpanded(false);
    root.getChildren().addAll(new TreeItem<>("Layout"), new TreeItem<>("is not"), new TreeItem<>("easy"));
    TreeView<String> notes = new TreeView<>(root);
    optionPane.getChildren().addAll(menuBar, new Label("Kaiser Notes"), notes);
    optionPane.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");

    // editor pane.
    HTMLEditor editor = new HTMLEditor();
    VBox editorBox = new VBox(10);
    TextField textField = new TextField();
    editorBox.getChildren().addAll(textField, editor);
    editorBox.setStyle("-fx-background-color: mistyrose; -fx-padding: 10;");
    editor.setHtmlText(getSampleText());

    // option layout constraints
    VBox.setVgrow(notes, Priority.ALWAYS);

    // editor layout constraints
    textField.setMinHeight(Control.USE_PREF_SIZE); // stop the textfield from getting squashed when the scene is sized small.
    VBox.setVgrow(editor, Priority.ALWAYS);        // tells the editor to fill available vertical space.
    editorBox.setMinSize(0, 0);                    // stops the editor from overflowing it's bounds in a BorderPane.

    // layout the scene.
    BorderPane layout = new BorderPane();
    layout.setLeft(optionPane);
    layout.setCenter(editorBox);
    stage.setScene(new Scene(layout));
    stage.show();

    // addition of static layout grow constraints for the htmleditor embedded webview.
    WebView webview = (WebView) editor.lookup("WebView");
    GridPane.setHgrow(webview, Priority.ALWAYS);  // allow the webview to grow beyond it's preferred width of 800.
    GridPane.setVgrow(webview, Priority.ALWAYS);  // allow the webview to grow beyond it's preferred height of 600.
  }

  // get some dummy lorem ipsum sample text.
  private String getSampleText() throws IOException {
    StringBuilder builder = new StringBuilder();
    try (BufferedReader in = new BufferedReader(new InputStreamReader(new URL("http://www.lorem-ipsum-text.com/").openStream()))) {
      String string;
      while ((string = in.readLine()) != null) {
        builder.append(string);
      }
    }
    return builder.toString();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T15:56:13.643

```
 GridPane gridPane = (GridPane) editor.getChildrenUnmodifiable().get(0);
    RowConstraints row1 = new RowConstraints();
    row1.setVgrow(Priority.NEVER);
    RowConstraints row2 = new RowConstraints();
    row2.setVgrow(Priority.NEVER);
    RowConstraints row3 = new RowConstraints();
    row3.setVgrow(Priority.ALWAYS);
    gridPane.getRowConstraints().addAll(row1, row2, row3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-26T09:17:15.483

如何使用 FXML 设置和调整 ScrollPane 的大小：

```
package anchorscroll;

import java.io.IOException;
import java.net.URL;
import java.util.ResourceBundle;
import java.util.logging.Level;
import java.util.logging.Logger;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.fxml.Initializable;
import javafx.scene.Node;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ScrollPane;
import javafx.scene.layout.Pane;
import javafx.scene.layout.VBox;

public class FXMLDocumentController implements Initializable {

    private Label label;
    @FXML
    private VBox vp;
    @FXML
    private ScrollPane sp;
    @FXML

    private Pane panel;
    @FXML
    private double Width;
    @FXML
    private double Height;

    private void handleButtonAction(ActionEvent event) {
        System.out.println("You clicked me!");
        label.setText("Hello World!");
    }

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        // TODO
        Width = panel.getWidth();
        Height = panel.getHeight();
        sp.setPrefWidth(Width - 60);
        sp.setPrefHeight(Height - 60);

        panel.widthProperty().addListener(p -> {
            Width = panel.getWidth();
            Height = panel.getHeight();
            System.out.println("Width " + Width + " Height " + Height);
            sp.setPrefWidth(Width - 60);
            sp.setPrefHeight(Height - 60);
        });

        panel.heightProperty().addListener(p -> {
            Width = panel.getWidth();
            Height = panel.getHeight();
            System.out.println("Width " + Width + " Height " + Height);
            sp.setPrefWidth(Width - 60);
            sp.setPrefHeight(Height - 60);
        });

        VBox v = new VBox();
        for (int i = 0; i < 100; i++) {
            v.getChildren().add(new Button("Hello " + i));
        }
        sp.setContent(v);

        VBox p = new VBox();
        try {
            p = FXMLLoader.load(getClass().getResource("NewMessage.fxml")); // "/fxml/Register.fxml"
            sp.setContent(p);
        } catch (IOException ex) {
            Logger.getLogger(FXMLDocumentController.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

} 
```

**！！！NewMessage.fxml 需要从 VBox 面板开始！！！**

如果您不需要加载 FXML，请评论或删除这 2 行：

```
p = FXMLLoader.load(getClass().getResource("NewMessage.fxml"));
sp.setContent(p); 
```

和布局：

```
<?xml version="1.0" encoding="UTF-8"?>
<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<Pane fx:id="panel" prefHeight="400.0" prefWidth="600.0" stylesheets="@Styles.css" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="anchorscroll.FXMLDocumentController">
    <children>
        <HBox prefHeight="60.0" prefWidth="600.0">
            <children>
                <Label text="Label" />
            </children>
        </HBox>
        <VBox fx:id="vp" layoutY="60.0" prefHeight="540.0" prefWidth="60.0">
            <children>
                <Button mnemonicParsing="false" prefWidth="50.0" text="Button" />
            </children>
        </VBox>
        <ScrollPane fx:id="sp" fitToHeight="true" fitToWidth="true" layoutX="60.0" layoutY="60.0" prefHeight="340.0" prefWidth="540.0" vbarPolicy="ALWAYS" />
    </children>
</Pane> 
```

[布局图像（topBar、leftBar、scrollContentPane）](https://i.stack.imgur.com/9ovrU.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-01T12:34:57.407

我也面临着同样的问题。我在borderPane 内的anchorPane 没有填满。为 prefSize 设置一个大数字对我有用。因此，当边框窗格增长时，它会尝试为其子项提供尽可能多的大小

```
anchorPane.setMinSize(25, 25);
anchorPane.setPrefSize(25000, 25000); 
```

# javascript - 如何使用 javascript 单击 Flash 对象？

> ID：11213082
> 
> 赞同：0
> 
> 时间：2012-06-26T17:48:10.217
> 
> 标签：javascript

我想使用 JavaScript 单击此页面上的视频，`http://37.128.191.200/?640`但不知道如何

```
document.getElementById('container').click() 
```

不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:54:39.763

由于手动单击该视频会使其播放视频，我猜你想这样做。

您可以在页面上运行它来做到这一点：

```
jwplayer().play() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:55:53.327

您可以使用您的 JwPlayer 对象。

```
jwplayer('container').play() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:49:26.227

改为使用`element.dispatchEvent`。所以你的代码可能是：

```
var evt = document.createEvent("MouseEvents");
evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);

document.getElementById('container').dispatchEvent(evt) 
```

[在https://developer.mozilla.org/en/DOM/element.dispatchEvent](https://developer.mozilla.org/en/DOM/element.dispatchEvent)中查看更多详细信息

# clojure - clojure-xml/parse 是否返回惰性序列？

> ID：11213083
> 
> 赞同：0
> 
> 时间：2012-06-26T17:48:10.683
> 
> 标签：clojure, lazy-evaluation

clojure-xml/parse 返回一个 xml 文件的映射。

```
(ns xml-lib.core
  ^{:author "Charles M. Norton",
    :doc "xml-lib is an xml parsing library built on clojure-xml.
        Created on June 26, 2012"} 
  (:require [clojure.string :as cstr])
  (:require [util.core :as utl])
  (:require [clojure.xml :as cjxml]))

(defn ret-xml-data
    "Returns a map of the supplied xml file."
    [xml-fnam]

    (let [test-file-nam (utl/open xml-fnam)]
    (cjxml/parse xml-fnam)) 
```

返回的地图是惰性的，还是应该将解析调用传递给惰性序列函数？

谢谢。

```
(ret-xml-data "test.xml") 
```

返回（结果被截断）。

```
{:tag :TamperExport, :attrs {:xmlns "http:// 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:29:11.883

简短的回答是不，clojure-xml 可能不会做你想做的事。

data.xml 是 clojure-xml 的惰性继承者

[https://github.com/clojure/data.xml](https://github.com/clojure/data.xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:16:32.480

它在底层使用了一个 SAX 解析器，它将消耗整个 xml 文档，所以我假设它将创建完全实现的数据结构。

# shell - 编写 Node Shell 脚本时找不到命令

> ID：11213085
> 
> 赞同：1
> 
> 时间：2012-06-26T17:48:16.440
> 
> 标签：shell, node.js, command-line

我正在尝试使用类似于[express](https://github.com/visionmedia/express/blob/master/bin/express)和[mocha](https://github.com/visionmedia/mocha/blob/master/bin/mocha)等包的 Node.js 创建一个 shell 脚本。我的初始测试报告未找到命令，因此我将脚本支持为以下内容：

```
#!/usr/bin/env node

console.log("printing stuff"); 
```

以上内容在运行时应该只输出“打印内容”；但是，这也行不通。

我试图通过`./script`在文件目录中执行脚本，以确保它不是路径问题。尝试在特权状态（即 sudo）下执行会产生相同的结果/错误消息。

知道我需要做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:06:46.373

当你 shebang ( `#!`)`/usr/bin/env node`时，你说的是“在我的 PATH 上寻找一个名为 node 的程序”。如果`node -v`像@Ryan 所说的那样做有效，那么shebang 应该可以正常工作。你有没有机会命名为 shell 别名或 shell 函数`node`？这可能会给您一种错觉，即您的 PATH 是正确的，即使它不是正确的。但本质上，只需确保`node`二进制文件所在的目录（`bin`节点安装下的目录）在您的 PATH 环境变量中，此时一切都应该正常工作。

```
export PATH=/usr/local/node/bin:$PATH 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:10:29.833

想通了我的问题。我制作了 shell 脚本，但忘记为文件设置执行权限。做一个`chmod a+x script`解决了这个问题。

# .net - 从网页中提取价值的更有效方法是什么

> ID：11213086
> 
> 赞同：2
> 
> 时间：2012-06-26T17:48:26.140
> 
> 标签：.net, performance, web-scraping

我需要从网站检索一个值（可能会有所不同，我无法控制该网站）。我目前有一些有效的代码......但需要很长时间才能运行。我知道有一种大大改进的方法可以做到这一点，我只是不知道那是什么。

我已经考虑过几种替代方法，例如 Regex 和 HTMLAgilityPack（看起来很复杂，而且可能有点矫枉过正？），但如果没有尝试每种方法，我不确定哪种方法最有效。我相信还有更多的可能性。

问题甚至可能与我如何检索页面而不是我如何处理它有关。

```
 Dim GETURL As WebRequest
    GETURL = WebRequest.Create("http://www.example.com")
    Dim objStream As Stream = GETURL.GetResponse.GetResponseStream()

    Dim objReader As New StreamReader(objStream)
    Dim sLine As String = ""
    Dim a As Integer = 0
    Dim result As String = ""
    Do While Not sLine Is Nothing
        a += 1
        sLine = objReader.ReadLine
        If Not sLine Is Nothing Then
            result += sLine
        End If
    Loop

    Dim startTag as string ="<some html tag>"
    Dim endTag as string ="<closing tag>"
    Dim firstIndex As Integer = result.IndexOf(startTag) + startTag.Length
    result = result.Substring(firstIndex, result.Length - firstIndex)
    Dim RequiredVal As String = result.Substring(0, result.IndexOf(endTag)) 
```

请注意，我确实意识到这段代码是多么低效，但与其尝试加载不同的排列（并且可能仍然有相当低效的代码），我想我会先征求一些专家的建议 :-)

**更新：**

由于我没有得到任何回应（也许我的问题有点太模糊了？）我一直在努力提高自己的效率。通过使用 WebCient.DownloadString()，我设法将运行时间减少了约 50%。这很好，但我怀疑我可以改进从页面中提取数据。请参阅下面的更新代码：

```
 Dim client As New WebClient()
    Dim result As String = client.DownloadString("http://www.example.com")

    Dim startTag as string ="<some html tag>"
    Dim endTag as string ="<closing tag>"
    Dim firstIndex As Integer = result.IndexOf(startTag) + startTag.Length
    result = result.Substring(firstIndex, result.Length - firstIndex)
    Dim RequiredVal As String = result.Substring(0, result.IndexOf(endTag)) 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:29:34.637

如果您的问题是等待来自 Web 请求的响应，那么您用来解析它的实际引擎或技术可能与性能的关系要小得多，而不是简单地同步等待来自 Web 的每个响应。如果您要抓取的页面列表很长，那么您可以通过异步运行同时请求来做得更好。目前尚不清楚这是怎么回事。

试试[CsQuery——](https://github.com/jamietre/CsQuery)也在[NuGet](http://www.nuget.org/packages/CsQuery)上——一个新的 C# jQuery 端口，它应该可以满足你的需求。它具有同步和异步抓取数据的方法，因此如果您确实想启动并行 Web 请求，它可以开箱即用。不过，在最基本的层面上，代码将是这样同步执行的：

```
CQ doc = CQ.CreateFromUrl("http://www.jquery.com");

string allStuffInsideTag = doc["sometag"].Contents().RenderSelection(); 
```

它像 jquery 一样工作。“CQ”对象与 jQuery 对象相同。`Contents`是返回元素所有子元素的 jQuery 方法；`RenderSelection`是一个 CsQuery 方法，它呈现选择集中每个元素的完整 HTML。`sometag`所以这将返回每个块内所有内容的全文和 html 。

它还为所有常见的选择器类型索引每个文档，并且比 HTML Agility Pack 快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:12:16.497

使用[WatiN](http://watin.org)或更好的[HTML Agility Pack](http://htmlagilitypack.codeplex.com)。

# java - Java .class 文件名与源文件名不匹配

> ID：11213089
> 
> 赞同：0
> 
> 时间：2012-06-26T17:48:37.013
> 
> 标签：java

我刚刚在运行 Windows 7 的 PC 上设置了 JDK 7，并创建了一个名为`HelloWorldApp.java`.

当我尝试运行它时，它说它找不到该文件。我查看了目录并找到了该`.class`文件，但它被命名`HelloWoldApp.class`了（注意缺少`r`）。

为什么会这样，我应该担心吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T17:49:52.260

检查您的源文件。我打赌你给里面的班级命名`HelloWoldApp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:53:45.517

它对我来说很好用。

当且仅当您有双重、三重、四重、...和 ​​n 元组检查您没有拼写错误的类名时，您可能应该担心。

您可能有理由担心您的拼写。

# c# - 使用参数从C#中的文本框插入数据库

> ID：11213091
> 
> 赞同：0
> 
> 时间：2012-06-26T17:48:42.643
> 
> 标签：c#, sql

我是 c# 的新手。我正在尝试将文本框中的值插入数据库中的表中。

表名：地址

字段：姓名（varchar（50）），年龄（int），城市（nchar（10））

当我尝试从数据库中检索值时，它工作得很好。这是我的代码。请帮我纠正它。

```
 string s = @"Data      Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database1.mdf;Integrated  Security=True;User Instance=True";
            SqlConnection a = new SqlConnection(s);

            a.Open();
            SqlCommand comm = new SqlCommand("INSERT INTO [address](name,age,city)  VALUES(@na,@ag,@ci)");
            string na = textBox1.Text;
            int ag = int.Parse(textBox2.Text);
            string ci = textBox3.Text;

            comm.Parameters.Add("@na", System.Data.SqlDbType.VarChar,50).Value = na;
            comm.Parameters.Add("@ag", System.Data.SqlDbType.Int).Value = ag;
            comm.Parameters.Add("@ci", System.Data.SqlDbType.NChar,10).Value = ci;
            comm.Connection = a;
            comm.ExecuteNonQuery();
            MessageBox.Show("okay");
            a.Close(); 
```

这些值不会反映在数据库中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:56:46.207

尝试使用此代码：

```
string connectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database1.mdf;Integrated  Security=True;User Instance=True";

using (SqlConnection connection = new SqlConnection(connectionString))
{

    using (SqlCommand insertCommand = connection.CreateCommand())

        {
            insertCommand.CommandText = "INSERT INTO address(name,age,city) VALUES (@na,@ag,@ci)";
            insertCommand.Parameters.Add("@na", na);
            insertCommand.Parameters.Add("@ag", ag);
            insertCommand.Parameters.Add("@ci", ci);

            insertCommand.Connection.Open();
            insertCommand.ExecuteNonQuery();

        }
} 
```

# javascript - Crafty.js 教程

> ID：11213094
> 
> 赞同：20
> 
> 时间：2012-06-26T17:48:51.230
> 
> 标签：javascript, html, game-engine, craftyjs

这个问题以前可能有人问过，但我在搜索时没有找到。

任何人都可以向我指出一个关于 Crafty.js 的最新教程吗？我似乎找不到一个，而且我很难理解它。如果没有好的教程，那么有没有其他的有好的教程的 HTML5 游戏引擎库呢？

**编辑：**我曾尝试阅读“starmelts”教程，但它们对我来说似乎有点令人困惑。

**编辑 2：** HTML5 游戏引擎只需要在桌面浏览器上工作，尤其是 chrome。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T22:31:50.867

我知道，这个问题已经很老了，但由于它在谷歌上的排名很高，而且可用的知名教程很少，我还是要发布这个链接。

[http://buildnewgames.com/introduction-to-crafty/](http://buildnewgames.com/introduction-to-crafty/)

这是一个非常好的、快速且最新的 craftyjs 教程。它通过开发一个小游戏来教授使用这个框架的关键概念。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-24T11:41:24.510

我已经测试过狡猾的一段时间，但还没有机会使用它。

但是当我测试它时，我发现这些链接很有用。

[http://cykod.github.com/Presentations/HTML5/Crafty/](http://cykod.github.com/Presentations/HTML5/Crafty/) 和你已经知道的 starmelt 教程 [https://github.com/starmelt/craftyjstut/wiki](https://github.com/starmelt/craftyjstut/wiki)

Craftyjs 还没有强大的文档，但是散布着一些你可能会觉得有用的好文章。如果您真的想，请给我留言，我会尽力帮助您理解它，因为这也会对我有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T04:34:26.073

创建您的第一个狡猾游戏教程已移至[此处](http://craftyjs.github.com/tutorial/bananabomber/create-a-game)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-26T17:52:56.693

我将从[官方教程](http://craftyjs.com/tutorials.php)开始。乍一看，它看起来相当彻底。

# python - 理解python代码片段

> ID：11213098
> 
> 赞同：1
> 
> 时间：2012-06-26T17:49:13.423
> 
> 标签：python, code-snippets

请帮助我理解以下代码片段：-

```
def any(l):
"whether any number is known from list l"
    s = set(list(l)[0])
    for x in l:
        s.intersection_update(set(x))
    return len(s) > 0 
```

这里 l 是一个包含三元组*列表*的列表，例如 [(17,14,13),(19,17,2),(22,11,7),(22,13,1),(23,10 ,5),(23,11,2),(25,5,2)] 等。特别是我在理解第 3 行时遇到困难

```
s=set(list(l)[0]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:54:24.280

```
set(list(l)[0]) 
```

`list(l)`创建一个新列表`l`，然后`[0]`是获取它的第一个项目，即`(17,14,13)`. 然后`set((17,14,13))`返回一组这个元组。set 是一个数据结构，它只包含唯一的可散列元素。即`set((10,12,10))`等于`{10,12}`

```
>>> l=[(17,14,13),(19,17,2),(22,11,7),(22,13,1),(23,10,5),(23,11,2),(25,5,2)]
>>> list(l)[0]
(17, 14, 13)
>>> set(list(l)[0])
{17, 13, 14} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:57:15.590

在`s=set(list(l)[0])`中，您正在从列表的第一个元素创建一个集合。在你的情况下，你可以使用`set(l[0])`它并且它会做同样的事情。本质上，您正在基于列表的第一个元组创建一个集合。总体而言，您的函数正在尝试查找所有元组之间是否有任何共同的元素（数字）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:55:46.173

A`set`是一个 hashable-types 的 python 集合，具有集合中的任何实体都不能重复的特殊功能（从它的`__hash__`魔法方法返回的哈希，因此从该方法返回的布尔值`__eq__`也不能等于列表中的任何其他实体) 它用于需要集合且不能有重复实体的地方。

在不知道其使用上下文的情况下，很难完全说出片段的意图，特别是因为您拥有的 l 值都是容器列表中的元组。这`intersection_update`是一个集合的方法，它从原始返回一个集合，只保留在作为参数传递的那个中找到的元素。零索引键正在从列表中获取第一个元组。

[http://docs.python.org/library/sets.html](http://docs.python.org/library/sets.html)

# c# - formatnumber 每次怎么加逗号？

> ID：11213103
> 
> 赞同：0
> 
> 时间：2012-06-26T17:49:26.270
> 
> 标签：c#, vb.net

如何强制 FormatNumber 使用“-”分隔每个“000”

根据我计算机上的用户文化，结果看起来像“123 456 789.1235”或“123,456,789.1235”

我该如何强制

```
Dim A As Decimal = "123456789.123456" 

Dim B As String = FormatNumber(A, 4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:12:53.830

请参阅 .ToString 的文档，例如[http://msdn.microsoft.com/en-us/library/1ce53cfb%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/1ce53cfb%28v=vs.100%29.aspx)

因此：

```
Dim a As Decimal = 123456789.123456D
Dim b As String = a.ToString("###,##0.####") 
```

请查看如何设置**Option Strict On**，因为您尝试将字符串分配给十进制值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:35:08.260

好吧，有很多方法可以做到这一点。如果您想插入空格，那么@Andrew 方式将不起作用，但它很简单。如果您尝试这样做，这是一种激励您编写自己的编码的方式。

```
 Dim a As Decimal = 123456789.123456D
    Dim i As Integer = a.IndexOf(".")
    Dim b As String = a.Substring(i)    
    Dim sep As String = " "   
    For j As Integer = i - 3 To 0 Step -3
        If j > 0 Then
            b = sep + a.Substring(j, 3) + b
        End If
        If j < 3 Then
            If j = 0 Then
                b = a.Substring(0, 3) + b
            Else
                b = a.Substring(0, j) + b
            End If
        End If
    Next
    If i < 3 Then
        b = a.Substring(0, i) + b
    End If 
```

注意： `sep=","`or `" "`or`anything you want` 和最后一个`if`语句处理的情况是`i-3 < 0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:45:27.523

正如@Andrew 所说，但如果你想要空格（或破折号），你可以插入它们来代替逗号。

```
Dim a As Decimal = 123456789.123456D
Dim b As String = If(a < 0,"-","") & a.ToString("### ### ### ### ##0.####").Trim(" ")
'Dim b As String = If(a < 0,"-","") & a.ToString("###-###-###-###-##0.####").Trim("-") 
```

注意修剪声明。它会删除由于 a 的长度而可能出现的任何前导字符。不过，我确实喜欢@Subs 例程，因为它可以处理任何长度。这个你必须放入足够的占位符 (#) 来处理它。

# asp.net - 在 html 元标记中添加属性的运行时错误

> ID：11213104
> 
> 赞同：1
> 
> 时间：2012-06-26T17:49:51.330
> 
> 标签：asp.net, html, html-parsing

这是我的代码：

```
 public partial class Image : System.Web.UI.Page {
     protected void Page_Load(object sender, EventArgs e)
     {
         HtmlMeta tag = new HtmlMeta();
         tag.Attributes.Add("property", "og:type");
         Header.Controls.Add(tag);
     }
} 
```

这是我的错误：

> “/Kidzania”应用程序中的服务器错误。你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。
> 
> 源错误：

```
Line 18:         HtmlMeta tag = new HtmlMeta(); 
Line 19:         tag.Attributes.Add("property", "og:type"); 
Line 20:         Header.Controls.Add(tag); 
```

> 源文件：d:\Kidzania\Image.aspx.cs 行：20
> 
> 堆栈跟踪：
> 
> [NullReferenceException：对象引用未设置为对象的实例。] Image.Page_Load(Object sender, EventArgs e) in d:\Kidzania\Image.aspx.cs:20
> System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp , 对象 o, 对象 t, EventArgs e) +14
> System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35 System.Web.UI.Control.OnLoad(EventArgs e) +99
> System.Web.UI .Control.LoadRecursive() +50
> System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint) +627

我参考了所有**stackoverflow** 的答案，但没有解决这个问题，请帮助我。提前感谢您的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:14:57.517

这就是我认为它会起作用的方式。

```
HtmlMeta htmmeta = new HtmlMeta();
htmmeta.Attributes.Add("property", "og:type");
this.Header.Controls.Add(htmmeta); 
```

此外，您需要确保在您的标记标头标签中有 runat server。

```
<head runat="server"> 
```

# android - Android First Application 教程

> ID：11213109
> 
> 赞同：0
> 
> 时间：2012-06-26T17:50:13.463
> 
> 标签：android, android-intent, android-emulator

我创建了一个基于 android 教程的应用程序：http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

除了应用程序名称外，代码完全相同，但应用程序是强制关闭的。

```

 `06-24 16:19:22.279: E/Zygote(33): setreuid() failed. errno: 2
    06-24 16:19:33.028: E/Zygote(33): setreuid() failed. errno: 17
    06-24 16:19:34.568: E/BatteryService(62): usbOnlinePath not found
    06-24 16:19:34.568: E/BatteryService(62): batteryVoltagePath not found
    06-24 16:19:34.568: E/BatteryService(62): batteryTemperaturePath not found
    06-24 16:19:34.588: E/SurfaceFlinger(62): Couldn't open /sys/power/wait_for_fb_sleep or         /sys/power/wait_for_fb_wake
    06-24 16:19:34.698: E/SensorService(62): couldn't open device for module sensors (Invalid argument)
    06-24 16:19:39.449: E/System(62): Failure starting core service
06-24 16:19:39.449: E/System(62): java.lang.SecurityException
06-24 16:19:39.449: E/System(62):   at android.os.BinderProxy.transact(Native Method)
06-24 16:19:39.449: E/System(62):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
06-24 16:19:39.449: E/System(62):   at android.os.ServiceManager.addService(ServiceManager.java:72)
06-24 16:19:39.449: E/System(62):   at com.android.server.ServerThread.run(SystemServer.java:206)
06-24 16:19:39.479: E/EventHub(62): could not get driver version for /dev/input/mouse0, Not a typewriter
06-24 16:19:39.479: E/EventHub(62): could not get driver version for /dev/input/mice, Not a typewriter
06-24 16:19:39.808: E/SoundPool(62): error loading /system/media/audio/ui/Effect_Tick.ogg
06-24 16:19:39.808: E/SoundPool(62): error loading /system/media/audio/ui/KeypressStandard.ogg
06-24 16:19:39.808: E/SoundPool(62): error loading /system/media/audio/ui/KeypressSpacebar.ogg
06-24 16:19:39.808: E/SoundPool(62): error loading /system/media/audio/ui/KeypressDelete.ogg
06-24 16:19:39.808: E/SoundPool(62): error loading /system/media/audio/ui/KeypressReturn.ogg
06-24 16:19:39.828: E/UsbObserver(62): java.lang.NullPointerException
06-24 16:19:39.828: E/UsbObserver(62):  at com.android.server.UsbObserver.init(UsbObserver.java:131)
06-24 16:19:39.828: E/UsbObserver(62):  at com.android.server.UsbObserver.<init>(UsbObserver.java:65)
06-24 16:19:39.828: E/UsbObserver(62):  at com.android.server.ServerThread.run(SystemServer.java:402)
06-24 16:19:40.429: E/ThrottleService(62): Could not open GPS configuration file /etc/gps.conf
06-24 16:19:40.958: E/logwrapper(137): executing /system/bin/tc failed: No such file or directory
06-24 16:19:41.069: E/logwrapper(139): executing /system/bin/tc failed: No such file or directory
06-24 16:19:41.129: E/logwrapper(144): executing /system/bin/tc failed: No such file or directory
06-24 16:37:58.420: E/AndroidRuntime(345): FATAL EXCEPTION: main
06-24 16:37:58.420: E/AndroidRuntime(345): java.lang.IllegalStateException: Could not execute method of the activity
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.view.View$1.onClick(View.java:2144)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.view.View.performClick(View.java:2485)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.view.View$PerformClick.run(View.java:9080)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.os.Handler.handleCallback(Handler.java:587)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.os.Looper.loop(Looper.java:123)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-24 16:37:58.420: E/AndroidRuntime(345):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 16:37:58.420: E/AndroidRuntime(345):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 16:37:58.420: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-24 16:37:58.420: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-24 16:37:58.420: E/AndroidRuntime(345):  at dalvik.system.NativeStart.main(Native Method)
06-24 16:37:58.420: E/AndroidRuntime(345): Caused by: java.lang.reflect.InvocationTargetException
06-24 16:37:58.420: E/AndroidRuntime(345):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 16:37:58.420: E/AndroidRuntime(345):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.view.View$1.onClick(View.java:2139)
06-24 16:37:58.420: E/AndroidRuntime(345):  ... 11 more
06-24 16:37:58.420: E/AndroidRuntime(345): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.myfirstapp/DisplayMessageActivity.java.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml?
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.app.Activity.startActivityForResult(Activity.java:2827)
06-24 16:37:58.420: E/AndroidRuntime(345):  at android.app.Activity.startActivity(Activity.java:2933)
06-24 16:37:58.420: E/AndroidRuntime(345):  at com.myfirstapp.MyFirstActivity.sendMessage(MyFirstActivity.java:26)
06-24 16:37:58.420: E/AndroidRuntime(345):  ... 14 more
06-24 16:38:47.529: E/AndroidRuntime(357): FATAL EXCEPTION: main
06-24 16:38:47.529: E/AndroidRuntime(357): java.lang.IllegalStateException: Could not execute method of the activity
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.view.View$1.onClick(View.java:2144)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.view.View.performClick(View.java:2485)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.view.View$PerformClick.run(View.java:9080)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.os.Handler.handleCallback(Handler.java:587)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.os.Looper.loop(Looper.java:123)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-24 16:38:47.529: E/AndroidRuntime(357):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 16:38:47.529: E/AndroidRuntime(357):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 16:38:47.529: E/AndroidRuntime(357):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-24 16:38:47.529: E/AndroidRuntime(357):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-24 16:38:47.529: E/AndroidRuntime(357):  at dalvik.system.NativeStart.main(Native Method)
06-24 16:38:47.529: E/AndroidRuntime(357): Caused by: java.lang.reflect.InvocationTargetException
06-24 16:38:47.529: E/AndroidRuntime(357):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 16:38:47.529: E/AndroidRuntime(357):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.view.View$1.onClick(View.java:2139)
06-24 16:38:47.529: E/AndroidRuntime(357):  ... 11 more
06-24 16:38:47.529: E/AndroidRuntime(357): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.myfirstapp/DisplayMessageActivity.java.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml?
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.app.Activity.startActivityForResult(Activity.java:2827)
06-24 16:38:47.529: E/AndroidRuntime(357):  at android.app.Activity.startActivity(Activity.java:2933)
06-24 16:38:47.529: E/AndroidRuntime(357):  at com.myfirstapp.MyFirstActivity.sendMessage(MyFirstActivity.java:26)
06-24 16:38:47.529: E/AndroidRuntime(357):  ... 14 more
06-24 16:43:20.070: E/AndroidRuntime(385): FATAL EXCEPTION: main
06-24 16:43:20.070: E/AndroidRuntime(385): java.lang.IllegalStateException: Could not execute method of the activity
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.view.View$1.onClick(View.java:2144)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.view.View.performClick(View.java:2485)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.view.View$PerformClick.run(View.java:9080)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.os.Handler.handleCallback(Handler.java:587)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.os.Looper.loop(Looper.java:123)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-24 16:43:20.070: E/AndroidRuntime(385):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 16:43:20.070: E/AndroidRuntime(385):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 16:43:20.070: E/AndroidRuntime(385):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-24 16:43:20.070: E/AndroidRuntime(385):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-24 16:43:20.070: E/AndroidRuntime(385):  at dalvik.system.NativeStart.main(Native Method)
06-24 16:43:20.070: E/AndroidRuntime(385): Caused by: java.lang.reflect.InvocationTargetException
06-24 16:43:20.070: E/AndroidRuntime(385):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 16:43:20.070: E/AndroidRuntime(385):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.view.View$1.onClick(View.java:2139)
06-24 16:43:20.070: E/AndroidRuntime(385):  ... 11 more
06-24 16:43:20.070: E/AndroidRuntime(385): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.myfirstapp/DisplayMessageActivity.java.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml?
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.app.Activity.startActivityForResult(Activity.java:2827)
06-24 16:43:20.070: E/AndroidRuntime(385):  at android.app.Activity.startActivity(Activity.java:2933)
06-24 16:43:20.070: E/AndroidRuntime(385):  at com.myfirstapp.MyFirstActivity.sendMessage(MyFirstActivity.java:26)
06-24 16:43:20.070: E/AndroidRuntime(385):  ... 14 more
06-24 16:45:09.099: E/AndroidRuntime(425): FATAL EXCEPTION: main
06-24 16:45:09.099: E/AndroidRuntime(425): java.lang.IllegalStateException: Could not execute method of the activity
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.view.View$1.onClick(View.java:2144)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.view.View.performClick(View.java:2485)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.view.View$PerformClick.run(View.java:9080)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.os.Handler.handleCallback(Handler.java:587)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.os.Looper.loop(Looper.java:123)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-24 16:45:09.099: E/AndroidRuntime(425):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 16:45:09.099: E/AndroidRuntime(425):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 16:45:09.099: E/AndroidRuntime(425):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-24 16:45:09.099: E/AndroidRuntime(425):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-24 16:45:09.099: E/AndroidRuntime(425):  at dalvik.system.NativeStart.main(Native Method)
06-24 16:45:09.099: E/AndroidRuntime(425): Caused by: java.lang.reflect.InvocationTargetException
06-24 16:45:09.099: E/AndroidRuntime(425):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 16:45:09.099: E/AndroidRuntime(425):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.view.View$1.onClick(View.java:2139)
06-24 16:45:09.099: E/AndroidRuntime(425):  ... 11 more
06-24 16:45:09.099: E/AndroidRuntime(425): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.myfirstapp/DisplayMessageActivity.java.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml?
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.app.Activity.startActivityForResult(Activity.java:2827)
06-24 16:45:09.099: E/AndroidRuntime(425):  at android.app.Activity.startActivity(Activity.java:2933)
06-24 16:45:09.099: E/AndroidRuntime(425):  at com.myfirstapp.MyFirstActivity.sendMessage(MyFirstActivity.java:26)
06-24 16:45:09.099: E/AndroidRuntime(425):  ... 14 more
06-24 18:20:31.070: E/AndroidRuntime(464): FATAL EXCEPTION: main
06-24 18:20:31.070: E/AndroidRuntime(464): java.lang.IllegalStateException: Could not execute method of the activity
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.view.View$1.onClick(View.java:2144)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.view.View.performClick(View.java:2485)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.view.View$PerformClick.run(View.java:9080)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.os.Handler.handleCallback(Handler.java:587)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.os.Looper.loop(Looper.java:123)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-24 18:20:31.070: E/AndroidRuntime(464):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 18:20:31.070: E/AndroidRuntime(464):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 18:20:31.070: E/AndroidRuntime(464):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-24 18:20:31.070: E/AndroidRuntime(464):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-24 18:20:31.070: E/AndroidRuntime(464):  at dalvik.system.NativeStart.main(Native Method)
06-24 18:20:31.070: E/AndroidRuntime(464): Caused by: java.lang.reflect.InvocationTargetException
06-24 18:20:31.070: E/AndroidRuntime(464):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 18:20:31.070: E/AndroidRuntime(464):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.view.View$1.onClick(View.java:2139)
06-24 18:20:31.070: E/AndroidRuntime(464):  ... 11 more
06-24 18:20:31.070: E/AndroidRuntime(464): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.myfirstapp/DisplayMessageActivity.java.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml?
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.app.Activity.startActivityForResult(Activity.java:2827)
06-24 18:20:31.070: E/AndroidRuntime(464):  at android.app.Activity.startActivity(Activity.java:2933)
06-24 18:20:31.070: E/AndroidRuntime(464):  at com.myfirstapp.MyFirstActivity.sendMessage(MyFirstActivity.java:26)
06-24 18:20:31.070: E/AndroidRuntime(464):  ... 14 more
06-24 18:25:12.590: E/AndroidRuntime(477): FATAL EXCEPTION: main
06-24 18:25:12.590: E/AndroidRuntime(477): java.lang.IllegalStateException: Could not execute method of the activity
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.view.View$1.onClick(View.java:2144)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.view.View.performClick(View.java:2485)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.view.View$PerformClick.run(View.java:9080)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.os.Handler.handleCallback(Handler.java:587)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.os.Looper.loop(Looper.java:123)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-24 18:25:12.590: E/AndroidRuntime(477):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 18:25:12.590: E/AndroidRuntime(477):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 18:25:12.590: E/AndroidRuntime(477):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-24 18:25:12.590: E/AndroidRuntime(477):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-24 18:25:12.590: E/AndroidRuntime(477):  at dalvik.system.NativeStart.main(Native Method)
06-24 18:25:12.590: E/AndroidRuntime(477): Caused by: java.lang.reflect.InvocationTargetException
06-24 18:25:12.590: E/AndroidRuntime(477):  at java.lang.reflect.Method.invokeNative(Native Method)
06-24 18:25:12.590: E/AndroidRuntime(477):  at java.lang.reflect.Method.invoke(Method.java:507)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.view.View$1.onClick(View.java:2139)
06-24 18:25:12.590: E/AndroidRuntime(477):  ... 11 more
06-24 18:25:12.590: E/AndroidRuntime(477): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.myfirstapp/DisplayMessageActivity.java.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml?
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.app.Activity.startActivityForResult(Activity.java:2827)
06-24 18:25:12.590: E/AndroidRuntime(477):  at android.app.Activity.startActivity(Activity.java:2933)
06-24 18:25:12.590: E/AndroidRuntime(477):  at com.myfirstapp.MyFirstActivity.sendMessage(MyFirstActivity.java:26)
06-24 18:25:12.590: E/AndroidRuntime(477):  ... 14 more

<code>` 

不知道如何调试这个应用程序。请指教

谢谢

萨米尔

            回答 #1

赞同：1

时间：2012-06-26T17:53:08.333

*   找不到显式活动类 {com.myfirstapp/DisplayMessageActivity.java.DisplayMessageActivity}；您是否在 AndroidManifest.xml 中声明了此活动？

将 DisplayMessageActivity 的条目放在清单中......

它 DisplayMessageActivity 是第一个 Activity 使用意图过滤器，其他删除它。

```
<activity android:name=".DisplayMessageActivity" android:label="Demo App">
  <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
</activity> 
```

            回答 #2

赞同：1

时间：2012-06-26T17:53:31.780

答案在 logcat 中：

```
Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.myfirstapp/DisplayMessageActivity.java.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml? 
```

[像这样在清单中声明活动](http://developer.android.com/training/basics/firstapp/starting-activity.html#AddToManifest)（即在`<application>`and`</application>`标记之间的某处插入它）：

```
<activity android:name=".DisplayMessageActivity" /> 
```

这是一个常见的初学者错误......在你习惯它之前，至少要多看几次这个错误。:)

            回答 #3

赞同：1

时间：2012-06-26T17:55:23.967

将其添加到 DisplayMessageActivity 清单中

```
<application ... >
    <activity android:name=".DisplayMessageActivity" />
    ...
</application> 
```

            回答 #4

赞同：0

时间：2012-06-26T17:54:08.910

确保将项目中的其他活动添加到 AndroidManifest.xml

            回答 #5

赞同：0

时间：2012-06-26T17:54:50.177

您必须在清单中包含您的活动，例如：

```
<activity android:name=".MyFirstActivity"
            android:theme="@android:style/Theme.NoTitleBar">

        </activity> 
```

```

# sql - 条件排序

> ID：11213112
> 
> 赞同：0
> 
> 时间：2012-06-26T17:50:24.880
> 
> 标签：sql, sql-server, tsql

我有以下样本数据。

```
AID    Date        Title
-----  ----------  ------
1      2011-12-12  test1
2      2011-12-12  test2
2      2011-12-12  test2
4      2011-12-12  test4
5      2011-12-12  test5
6      2011-12-13  test11
7      2011-12-13  test12
8      2011-12-13  test13
9      2011-12-13  test14
10     2011-12-13  test15
11     2011-12-14  test15
12     2011-12-14  test15 
```

我需要像下面这样输出，意味着我想把 AID(5,10) 放在首位`order by date,aid`。

```
AID    Date        Title
-----  ----------  ------
5      2011-12-12  test5
1      2011-12-12  test1
2      2011-12-12  test2
2      2011-12-12  test2
4      2011-12-12  test4
10     2011-12-13  test15
6      2011-12-13  test11
7      2011-12-13  test12
8      2011-12-13  test13
9      2011-12-13  test14
11     2011-12-14  test15
12     2011-12-14  test15 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:52:21.937

```
ORDER BY [Date], CASE WHEN AID IN (5,10) THEN 1 ELSE 2 END, AID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:56:15.100

```
ORDER BY CASE WHEN (AID % 5) = 0 THEN (AID / 5 -1) * 5 ELSE  AID END 
```

# cakephp - Cakephp：如何验证字段以接受特定条目的一系列值

> ID：11213113
> 
> 赞同：0
> 
> 时间：2012-06-26T17:50:24.910
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1

我有一张接受等级（例如 A、B、C...）的表格，另一个接受标记（0-100）。我希望每个等级接受指定范围的标记。例如 A 必须接受范围 75-100。

如果用户输入一个等级，它应该只接受该等级范围内的标记。我的两个字段如下。

```
$mygrade =array('A'=>'A','B'=>'B','C'=>'C','D'=>'D','E'=>'E','U'=>'U');
        echo $this->Form->label('Grade: ');

echo $this->Form->label('Mark(%): ');
echo $this->Form->input("ApplicantOlevelQualification.mark.$s",array('label'=>'')); 
```

请帮助我被困住的人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T22:29:43.497

如果我理解您的问题是正确的，那么您正在尝试使用所选成绩来验证您的分数。

我假设，ApplicantOlevelQualification 是你的模型。创建一个模型并包含验证：

```
<?php
class ApplicantOlevelQualification extends AppModel {
    public $validate = array(
        'grade' => array(
            'notempty' => array(
                'rule' => array('inList', array('A', 'B')),
                'message' => 'Not in range.',
            )
        ),
        'marks' => array(
            'notempty' => array(
                'rule' => array('validMarks'),
                'message' => 'Marks does not meet the criteria.',
            ),
        )
    );

    function validMarks($check) {
        //Access $this->data and $check to compare your marks and grade..
    }
}
?> 
```

希望有帮助。

# jquery - Fancybox 冲突 lavalamp

> ID：11213115
> 
> 赞同：0
> 
> 时间：2012-06-26T17:50:35.527
> 
> 标签：jquery, fancybox, lavalamp

我在这个页面上有 jQuery LavaLamp 2 和 FancyBox 2。我花了几个小时才发现 FancyBox 与 LavaLamp 冲突。当我拿出这两个包括

```
<script type="text/javascript" src="menu/easing.js"></script>
<script type="text/javascript" src="menu/jquery.js"></script> 
```

FancyBox 有效，但 LavaLamp 无效。试图切换 Jqueries （ FancyBox 将采用 LavaLamp ），没有奏效。

有什么建议么？

这是fancybox包括：

```
<!-- Add jQuery library -->
<!-- <script type="text/javascript" src="/Include/FancyBox/lib/jquery-1.7.2.min.js"></script> -->

<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="/Include/FancyBox/lib/jquery.mousewheel-3.0.6.pack.js"></script>

<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="/Include/FancyBox/source/jquery.fancybox.js?v=2.0.6"></script>
<link rel="stylesheet" type="text/css" href="/Include/FancyBox/source/jquery.fancybox.css?v=2.0.6" media="screen" />

<!-- Add Button helper (this is optional) -->
<link rel="stylesheet" type="text/css" href="/Include/FancyBox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" />
<script type="text/javascript" src="/Include/FancyBox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>

<!-- Add Thumbnail helper (this is optional) -->
<link rel="stylesheet" type="text/css" href="/Include/FancyBox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.2" />
<script type="text/javascript" src="/Include/FancyBox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.2"></script>

<!-- Add Media helper (this is optional) -->
<script type="text/javascript" src="/Include/FancyBox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script> 
```

编辑：我已经升级了缓动版本，并且 FancyBox 可以工作。但是，LavaLamp 不是。

另一个编辑：设法解决问题。刚刚下载了最新的 easing.js 和 easing.compatibility

# android - 带有POST方法的Android DownloadManager？

> ID：11213116
> 
> 赞同：6
> 
> 时间：2012-06-26T17:50:36.760
> 
> 标签：android, download-manager

我开始使用 android.app.DownloadManager 并遇到了一个问题。
默认情况下，DM 发送 HTTP GET 请求下载文件：

GET [http://www.example.com/getfile](http://www.example.com/getfile) HTTP/1.1
Cookie：id=sdfsdf;Max-Age=10800000;Path=/
主机：___
连接：Keep-Alive
用户代理：AndroidDownloadManager Paros/3.2.13 内容
-长度：0

但我需要在请求中发送一些数据（例如 json 字符串）
有什么方法可以在 DownloadManager中发送**HTTP POST请求**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:26:44.070

在等待另一个更准确的答案时：

我认为您不能向此请求添加数据，因为正如您所说，这是一个`GET`请求，而不是`POST`.

`Download-Manager`如果不是绝对需要，也许这个线程可以为您提供另一种实现您想要的方法的提示：[如何使用 HttpURLConnection 登录并下载文件](https://stackoverflow.com/questions/6439296/how-do-download-a-file-with-login-using-httpurlconnection)

# php - 是否可以将成员动态添加到 PHP 对象？

> ID：11213118
> 
> 赞同：2
> 
> 时间：2012-06-26T17:50:38.250
> 
> 标签：php

是否可以即时添加到 PHP 对象？说我有这个代码：

```
$foo = stdObject();
$foo->bar = 1337; 
```

这是有效的 PHP 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:52:30.763

从技术上讲，这不是有效的代码。尝试类似：

```
$foo = new stdClass();
$foo->bar = 1337;
var_dump($foo); 
```

[http://php.net/manual/en/language.types.object.php](http://php.net/manual/en/language.types.object.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T17:52:55.190

只要您使用有效的类，**例如**`stdClass`而不是`stdObject`：

```
$foo = new stdClass();
$foo->bar = 1337;
echo $foo->bar; // outputs 1337 
```

**你有这些问题：**

*   使用`stdObject`代替`stdClass`
*   `new`不使用关键字实例化您的对象

**更多信息：**

*   [http://php.net/manual/en/language.types.object.php](http://php.net/manual/en/language.types.object.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:51:49.857

是的。您的代码中唯一的问题是它缺少 a `new`before call `stdClass`，而您正在使用`stdObject`，但您的意思是`stdClass`

```
<?php
class A {
    public $foo = 1;
}  

$a = new A;
$b = $a;     // $a and $b are copies of the same identifier
             // ($a) = ($b) = <id>
$b->newProp = 2;
echo $a->newProp."\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:53:48.933

你很近。

```
$foo = stdObject(); 
```

这需要是：

```
$foo = new stdClass(); 
```

然后它将起作用。

# ios - iOS cocos2d在设备上的低帧率

> ID：11213121
> 
> 赞同：0
> 
> 时间：2012-06-26T17:50:41.330
> 
> 标签：ios, cocos2d-iphone, frame-rate

我正在开发一个 cocos2d 游戏（使用 iOS 6 SDK 和 cocos2d 2.0rc2）并且在设备上遇到了较低帧速率的问题。这会导致碰撞检测出现问题，因为其中大部分都与用户绘制线条有关。较低的帧速率会导致点被拉得更远，并且对象可以通过线，因为它永远不会碰到这些点。当我收到通知时，帧速率问题似乎最常发生。当通知消失时，帧速率并没有恢复正常，而是保持较低并且永远不会恢复到 60fps。任何想法可能导致此问题或解决方案以较低的 fps 更好地处理线条？

这是绘图代码，如果您想查看其他内容，请告诉我。

```
-(void) draw {
    glLineWidth(lineScale);

for (int i = 0; i < touchesArray.count; i += 2) {
    CGPoint start = CGPointFromString([touchesArray objectAtIndex:i]);
    CGPoint end = CGPointFromString([touchesArray objectAtIndex:i + 1]);

    ccDrawLine(start, end);
}
} 
```

# php - 检查“不为空”或空字符串的 PHP 语法是什么？

> ID：11213125
> 
> 赞同：63
> 
> 时间：2012-06-26T17:51:01.073
> 
> 标签：php, variables, null, conditional-statements

> **可能重复：**
> [检查变量是否为空](https://stackoverflow.com/questions/2659837/check-if-a-variable-is-empty)

简单的PHP问题：

我有这个词根：

```
if (isset($_POST["password"]) && ($_POST["password"]=="$password")) {
...//IF PASSWORD IS CORRECT STUFF WILL HAPPEN HERE
} 
```

在此语句上方的某处，我在我的 JavaScript 中使用以下行将用户名设置为我的 JavaScript 和 PHP 中的变量：

```
uservariable = <?php $user = $_POST['user']; print ("\"" . $user . "\"")?>; 
```

我想要做的是添加一个条件以确保 $user 不是 null 或空字符串（它不必是任何特定的值，我只是不希望它为空。什么是正确的方法做这个？

我知道这是一个愚蠢的问题，但我没有使用 PHP 的经验。请指教，谢谢！

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-26T17:53:49.520

空或空字符串？

```
if (!empty($user)) {} 
```

使用空（）。

* * *

在意识到 $user ~= $_POST['user'] 之后（感谢马特）：

```
var uservariable='<?php 
    echo ((array_key_exists('user',$_POST)) || (!empty($_POST['user']))) ? $_POST['user'] : 'Empty Username Input';
?>'; 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-26T17:52:32.937

使用[`empty()`](http://php.net/manual/en/function.empty.php). 它检查空字符串和空字符串。

```
if (!empty($_POST['user'])) {
  // do stuff
} 
```

从手册：

> 以下内容被认为是空的：

```
"" (an empty string)  
0 (0 as an integer)  
0.0 (0 as a float)  
"0" (0 as a string)    
NULL  
FALSE  
array() (an empty array)  
var $var; (a variable declared, but without a value in a class) 
```

# three.js - 为什么照明在 Three.js 中不起作用？

> ID：11213127
> 
> 赞同：15
> 
> 时间：2012-06-26T17:51:04.457
> 
> 标签：three.js

我不明白为什么照明在我的代码中不起作用。我下载了一个简单的OBJ。文件来测试 OBJLoader 但模型不受影响。在我更多地编辑照明之前，至少环境照明可以工作。也许是OBJ。模型需要纹理吗？

```
 var container, stats;

        var camera, scene, renderer, controls;

        init();
        animate();

        function init() {

            container = document.createElement( 'div' );
            document.body.appendChild( container );

            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
            camera.position.z = 2.5;
            scene.add( camera );

            controls = new THREE.TrackballControls( camera );

            controls.rotateSpeed = 2.0;
            controls.zoomSpeed = 1.2;
            controls.panSpeed = 0.0;

            controls.noZoom = false;
            controls.noPan = true;

            controls.staticMoving = true;
            controls.dynamicDampingFactor = 0.3;

            controls.keys = [ 65, 83, 68 ];

            controls.addEventListener( 'change', render );

            var ambient = new THREE.AmbientLight( 0x020202 );
            scene.add( ambient );

            directionalLight = new THREE.DirectionalLight( 0xffffff );
            directionalLight.position.set( 1, 1, 0.5 ).normalize();
            scene.add( directionalLight );

            pointLight = new THREE.PointLight( 0xffaa00 );
            pointLight.position.set( 0, 0, 0 );
            scene.add( pointLight );

            sphere = new THREE.SphereGeometry( 100, 16, 8 );
            lightMesh = new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0xffaa00 } ) );
            lightMesh.scale.set( 0.05, 0.05, 0.05 );
            lightMesh.position = pointLight.position;
            scene.add( lightMesh );

            var loader = new THREE.OBJLoader();
            loader.load( "originalMeanModel.obj", function ( object ) {
                scene.add( object );
            } );

            renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            container.appendChild( renderer.domElement );

        }

        function animate() {

            requestAnimationFrame( animate );
            controls.update();

        }

        function render() {

            camera.lookAt( scene.position );

            renderer.render( scene, camera );

        } 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-05-18T13:20:18.987

MeshBasicMaterial in THREE.js is like a toon shader (good for silouhette, shadow drawing or wireframe) and and is not affected by lights.

Try MeshLambertMaterial or MeshPhongMaterial

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T19:52:02.393

在为 Blender 使用 Three.js 导出器时，我遇到了类似的问题，即使在原始搅拌机模型中设置了漫反射颜色，并且在 Three.js 代码中添加了环境光到场景中，一切都显得很暗。事实证明，修复是编辑转换后的模型文件的一部分，有一行的效果是：

```
"colorAmbient" : [0, 0, 0] 
```

我手动更改为

```
"colorAmbient" : [0.75, 0.75, 0.75] 
```

它出现在任何地方，这解决了问题。我提出这个问题是因为我最好的猜测是您遇到了类似的问题。如果没有看到 *.obj 文件，很难准确诊断问题，但也许在您的模型设置中，您可以尝试更改环境颜色值而不是漫反射颜色值，这是我们在分配颜色时通常想到的到一个模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T23:13:30.197

如果您在几天前遇到与我一样的问题，如果您的 obj 中没有法线，那么[这](https://stackoverflow.com/questions/11032145/three-js-custom-objloader-geometry-lighting)可能会对您有所帮助，这绝对是可以查看的地方。

您也可以尝试从 a 开始，`MeshBasicMaterial`以检查顶点/面是否正常：`new THREE.MeshBasicMaterial({ color: 0x999999, wireframe: true, transparent: true, opacity: 0.85 } )`

另外，正如 doob 先生所说，请考虑共享您正在加载的 obj。

# regex - 如何使用正则表达式识别有效的条形码？

> ID：11213129
> 
> 赞同：2
> 
> 时间：2012-06-26T17:51:12.770
> 
> 标签：regex

我有格式的条形码`123456########`。也就是说，前 6 位数字始终相同，后跟 8 位数字。我将如何检查变量是否与该格式匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:53:55.560

`123456\d{8}`

```
123456  # Literals
\d      # Match a digit
  {8}   # 8 times 
```

您可以将 更改`{8}`为任意位数，具体取决于静态位数之后的位数。

[Regexr 将让您试用正则表达式。](http://regexr.com?31c7e)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T17:54:42.283

您没有指定语言，而是指定了正则表达式。语法在实现中是相对统一的，所以应该像下面这样工作：`123456\d{8}`

*   `\d`表示数字字符，通常等同于 set `[0-9]`。
*   `{8}`表示前面的字符集精确重复八次。

根据输入的输入方式，您可能需要锚定正则表达式。因此：

```
^123456\d{8}$ 
```

where`^`匹配行或字符串的开头并`$`匹配结尾。或者，您可能希望使用单词边界，以确保您的条形码字符串正确分隔：

```
\b123456\d{8}\b 
```

where`\b`匹配空字符串，但仅在单词的边缘（通常定义为仅由字母数字字符和下划线组成的序列，但这可能取决于区域设置）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T17:54:12.890

```
123456\d{8} 
```

应该这样做。这分解为：

*   123456 - 固定位，显然用这个代替你的固定位，记住在这里转义和正则表达式特殊字符，虽然只有数字你应该没问题
*   \d - 一个数字
*   {8} - 前一个元素必须重复的次数，在本例中为 8。

`{8}`如果您在该范围内有最小或最大数字，则可以取 2 位数字，因此如果前一个元素必须重复 6 到 8 次，您可以这样做`{6,8}`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T17:54:45.340

你描述它的方式，它只是

```
^123456[0-9]{8}$ 
```

...您将替换`123456`为 6 个已知数字。我使用`[0-9]`而不是`\d`因为我不知道您使用的是什么风格的正则表达式，并且`\d`允许某些风格的非阿拉伯数字（如果这与您有关）。

# c++ - 在 C++ 中处理大型数字数组的最佳方法是什么？

> ID：11213131
> 
> 赞同：0
> 
> 时间：2012-06-26T17:51:28.680
> 
> 标签：c++, stack-overflow

我需要处理大量浮点数（>200,000 个数字）并使用这些数组执行一些数学运算。

您建议如何处理这些数组，以免出现任何堆栈溢出问题？

**更新**：我想做简单和复杂的数学（总和、乘积、sin、cos、arctan）运算。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T18:24:38.413

您需要按顺序操作的纯数字数据？

```
std::valarray<double> 
```

如果分析显示这会减慢您的速度，请寻找使其更快的方法

```
std::valarray<double>::resize() 
```

（是的，不幸的是没有`reserve()`。

为什么`std::valarray<double>`要使用数值数据？如果要对每个元素执行操作，只需调用

```
std::valarray<double>::apply(somefunction) 
```

有关更多信息，请参阅：[C++ 参考](http://en.cppreference.com/w/cpp/numeric/valarray)。

如果您希望能够`reserve()`，您将需要`std::vector`，这也很好，但没有您可能想要使用的数学函数的重载。

* * *

编辑：这当然是假设您有足够的内存来将所有数组放入`std::valarray`s. 如果没有，您应该将 200,000 行拆分，以便同时只有这么多的浮点数在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:05:48.867

如果您的数据稀疏，您可以使用 boost 的`sparse_matrix` [http://www.boost.org/doc/libs/1_41_0/libs/numeric/ublas/doc/matrix_sparse.htm](http://www.boost.org/doc/libs/1_41_0/libs/numeric/ublas/doc/matrix_sparse.htm)来表示您的数据结构并显着降低内存需求。

否则，我建议研究将数据拆​​分为块并在内存中处理一个块的方法，然后将该状态存储到文件中并重复。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-26T17:53:46.730

我建议您将它们视为每 10.000 中的 10.000，然后将所有内容相加？这取决于你在做什么操作。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-26T17:55:48.610

取决于你想用它们做什么。

此外，正如克里斯在评论中所说，为您的数组动态分配内存（从堆中获取内存）并避免将其用作局部变量（在堆栈中分配）。

# c++ - 两次删除同一个对象

> ID：11213133
> 
> 赞同：1
> 
> 时间：2012-06-26T17:51:35.813
> 
> 标签：c++, object, delete-operator

> **可能重复：**
> [未定义、未指定和实现定义的行为](https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior)

我知道在同一个对象上调用 delete 是灾难性的。但只要在第二次调用删除之前没有为其他对象重新分配内存，情况就是如此。但是，即使执行以下操作也是错误的？如果我删除 cout，代码不会转储核心。

```
int main()
{
    A *a1 = new A();
    delete a1;
    cout<<a1<<endl;
    delete a1;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T17:53:51.197

请参阅[双重删除会发生什么？](https://stackoverflow.com/questions/9169774/what-happens-in-a-double-delete)：

是的，这是非常错误的。

最大的问题是行为未定义。因此，在一种情况下，您可能会在一个编译器上侥幸逃脱，但通常它往往会导致崩溃。

# c++ - OO 设计——放置非成员函数的位置

> ID：11213140
> 
> 赞同：2
> 
> 时间：2012-06-26T17:52:01.323
> 
> 标签：c++, python, oop

我有一个具有许多参数的复杂构造过程的类。多个客户端共享该类的对象，这些客户端参数的并集用于实例化该类。因此我有一个工厂类来存储这些需求，检查各种客户请求的一致性，并实例化该类。

此外，还有一组通用的使用模型（或参数集）可供多个客户用于多个工厂。

例如，考虑一个例子。（请注意，实际代码是 C++，但我的经验是 Python，所以我将在 Python 中编写伪代码。是的，我知道这个示例实际上不会按原样工作。）

```
class Classroom:
    def __init__(self, room_size=None, n_desks=None, n_boards=None, 
                       n_books=None, has_globe=False, ... ):
        ...

class ClassroomFactory:
    def __init__(self):
        self._requirements = dict()

    def addRequirement(self, name, value):
        if name.startswith("n_"):
            self._requirements[name] = max(value, self._requirements.get(name, 0))
        ...

    def createClassroom(self):
        return Classroom(**self._requirements)

# instantiate the factory
factory = ClassroomFactory()

# "client 1" is a geography teaacher
factory.addRequirement("n_desks", 10)
factory.addRequirement("n_boards", 1)
factory.addRequirement("has_globe", True)

# "client 2" is a math teacher
factory.addRequirement("n_desks", 10)
factory.addRequirement("n_boards", 1)

# "client 3" is a after-school day-care
factory.addRequirement("room_size",  (20,20))
factory.addRequirement("has_carpet", True)

room = factory.createClassroom() 
```

常见的使用模式是作为老师，我们需要 10 张课桌和一块板子。我认为这最好由非成员函数/装饰器提供，例如：

```
def makeTeacherRoom(factory):
    factory.addRequirement("n_desks", 10)
    factory.addRequirement("n_boards", 1)        
    return factory 
```

这似乎是“喜欢非会员/非朋友而不是会员”范式的一个很好的例子。

我正在努力解决的问题是，在更大的 OO 代码框架内，这些类型的非成员函数/装饰器应该在哪里存在，无论是就命名空间还是就实际文件而言？

1.  他们应该住在工厂的文件/命名空间中吗？它们与工厂密切相关，但仅限于一般工厂，不需要使用工厂。

2.  他们应该存在于客户的文件/命名空间中吗？客户端了解这些使用模型，但这会限制多个客户端之间的重用。

3.  他们是否应该使用客户端的公共基类（例如，可以想象一个“教师”类/命名空间，它还将提供非成员函数 makeTeacherRoom()，该函数将由 MathTeacher 和 GeographyTeacher 继承。

4.  他们应该完全住在其他地方，在“utils”文件中吗？如果是这样，在哪个命名空间中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:14:20.463

这主要是个人决定。您的大多数选择没有技术上的负面影响。例如：

1.  由于使用地点的原因，它们可以，但这不是必需的。
2.  由于数据的局部性，他们可以，但又一次......
3.  他们可以，尽管这似乎确实会让事情变得更混乱。制作实用程序类，您最终可能不得不继承它们，或者将部分虚拟化以稍后覆盖，这将很快变得丑陋。
4.  这是我个人最喜欢的，或者是这个的变体。

我通常会创建一个具有相关名称的 util 文件（或具有静态方法的类）并将其放在与它使用的类相同的命名空间中（更有用的 mutate 版本）。对于一个`Education::Teacher`类，您可以拥有一个`Education::TeacherUtils`文件或类，其中包含对`Teacher`. 这保持了一个非常明显的命名搭配，但也将 util 函数放在它们自己的区域中，因此可以将它们包含在任何需要它们的地方（在`Teacher.cpp`或类似的地方会阻止这种情况）。在类的情况下，您可以将 util 类和基类作为朋友，这偶尔会有所帮助（但很少使用，因为它可能是一种气味）。

我已经看到了一个命名变化，`Education::Utils::Teacher`但是这有点难以转换为文件（除非你把东西放到一个`utils`目录中）并且还可能导致名称解析奇怪（在某些情况下，编译器可能会尝试使用`Education::Utils::Teacher`而不是`Education::Teacher`当你没有'意思是）。因此，我更喜欢保留`utils`作为后缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:27:54.857

我个人会让他们成为班级的静态成员。

```
class File
{
    public:

    static bool load( File & file, std::string const & fileName );

    private:

    std::vector< char > data;
};

int main( void )
{
    std::string fileName = "foo.txt";
    File myFile;

    File::load( myFile, fileName );
} 
```

使用静态方法，它们可以访问类的私有数据，但不属于该类的特定实例。这也意味着这些方法不会与它们所作用的数据分开，如果您将它们放在某个实用程序标头中就会出现这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T23:30:09.687

您可能希望在应用程序的单例类中处理非成员函数。工厂可以从程序或其他对象中执行。

C++ 支持全局函数（非成员函数），但是，为应用程序使用单个对象，“就行了”。

此外，由于“教室”对象可能使用许多可选参数进行实例化，因此您可能希望在调用构造函数（python 中的“ **init ”）之后对其进行分配。**

```
// filename: "classrooms.cpp"

class ClassroomClass
{
  protected:
    int _Room_Size;
    int _N_Desks;
    int _N_Boards;
    int _N_Books;
    bool _Has_Globe;

  public:
    // constructor without parameters,
    // but, can be declared with them
    ClassroomClass()
    {
      _Room_Size = 0;
      _N_Desks = 0;
      _N_Boards = 0;
      _N_Books = 0;
      _Has_Globe = false;
    } // ClassroomClass()

    public int get_Room_Size()
    {
      return _Room_Size;
    }

    public void set_Room_Size(int Value)
    {
      _Room_Size = Value;
    }

    // other "getters" & "setters" functions
    // ...

} // class ClassroomClass

class ClassroomFactoryClass
{
  public:
    void addRequirement(char[] AKey, char[] AValue);
} // class ClassroomFactoryClass    

class MyProgramClass
{
  public:
    ClassroomFactoryClass Factory;
  public:
    void makeTeacherRoom();

    void doSomething();
} // class MyProgramClass

void MyProgramClass::addRequirement(char[] AKey, char[] AValue)
{
  ...
}  // void MyProgramClass::addRequirement(...)

void MyProgramClass::makeTeacherRoom()
{
  Factory.addRequirement("n_desks", "10")
  Factory.addRequirement("n_boards", "1")   
}  // void MyProgramClass::makeTeacherRoom(...)

void MyProgramClass::doSomething()
{
  ...
}  // void MyProgramClass::doSomething(...)

int main(char[][] args)
{
   MyProgramClass MyProgram = new MyProgramClass();

   MyProgram->doSomething();

   delete MyProgram();

  return 0;
}  // main(...) 
```

干杯

# c# - 空白行在数据绑定 DataGrid 中不可见

> ID：11213144
> 
> 赞同：1
> 
> 时间：2012-06-26T17:52:28.100
> 
> 标签：c#, wpf, data-binding, datagrid, observablecollection

我有一个绑定到 DataGrid 的 ObservableCollection，我希望能够在运行时使用实际行在其中添加行。但是，空白行不可见，因此用户无法添加行。我已经对此进行了研究，我添加了 CanUserAddRows=true 和 IsReadOnly=false。我还为 CostCenter 对象添加了一个空白构造函数，但它仍然无法正常工作。下面的代码是我到目前为止所拥有的：

在 XAML 中：

```
<Window.Resources>
    <CollectionViewSource x:Key="jobItemViewSource1" d:DesignSource="{d:DesignInstance my:JobItem, CreateList=True}" />
    <CollectionViewSource x:Key="CostCenterListViewSource" Source="{Binding Path=CostCenterList, Source={StaticResource jobItemViewSource1}}" />
</Window.Resources>

<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Source={StaticResource CostCenterListViewSource}}" Name="costCenterListDataGrid" CanUserResizeRows="False" CanUserAddRows="True" CanUserDeleteRows="True" Background="LightGray" IsReadOnly="False">
    <DataGrid.Columns>
        <DataGridTextColumn x:Name="nameColumn" Binding="{Binding Path=Name, Mode=TwoWay}" Header="Cost Center" />
        <DataGridTextColumn x:Name="glCodeColumn" Binding="{Binding Path=GlCode, Mode=TwoWay}" Header="Gl Code"/>
        <DataGridTextColumn x:Name="costCenterPercentageColumn" Binding="{Binding Path=CostCenterPercentage, Mode=TwoWay}" Header="%"/>
    </DataGrid.Columns>
</DataGrid> 
```

在后面的代码中，我设置了数据上下文：

```
costCenterListDataGrid.DataContext = item.CostCenterList; 
```

在 JobItem 类中：

```
private ObservableCollection<CostCenter> costCenterList;
public JobItem()
{
    costCenterList = new ObservableCollection<CostCenter>();         
}

public ObservableCollection<CostCenter> CostCenterList
{
    get { return costCenterList; }
    set
    {
        costCenterList = value;
    }

} 
```

在 CostCenter 课程中，我有：

```
public CostCenter()
{
    afes = new ObservableCollection<Afe>();
}

public CostCenter(ObservableCollection<Afe> afes, string glCode)
{
    this.afes = afes;
    this.glCode = glCode;
}

public string Name
{
    get { return name; }
    set
    {
        if (String.IsNullOrEmpty(Name) || !Name.Equals(value))
        {
            name = value;
            OnPropertyChanged("Name");
        }
    }
}

public ObservableCollection<Afe> Afes
{
    get { return afes; }
    set { afes = value; }
}

public string GlCode
{
    get { return glCode; }
    set 
    {
        if (String.IsNullOrEmpty(GlCode) || !GlCode.Equals(value))
        {
            glCode = value;
            OnPropertyChanged("GlCode");
        }
    }
}
public double TotalPercentage
{
    get { return totalPercentage; }
    set
    {
       if (totalPercentage + value <= 100)
       {
           totalPercentage += value;
       }

    }
}

    public double CostCenterPercentage
    {
        get { return cPercentage; }
        set
        {
            if (CostCenterPercentage != value)
            {
                cPercentage = value;
                OnPropertyChanged("CostCenterPercentage");
            }
        }

    } 
```

我试图省略不相关的代码，OnPropertyChanged 方法正在工作，因为我在其他代码中使用过它，否则，希望这是足够的代码来帮助我解决问题。JobItem 的数据上下文也在工作，我也没有在这个片段中添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:14:53.497

如果您希望显示添加、删除和可编辑行，则您`CollectionViewSource`没有创建所需的类型集合视图。`IEditableCollectionView``DataGrid`

[http://blogs.msdn.com/b/vinsibal/archive/2008/10/01/overview-of-the-editing-features-in-the-wpf-datagrid.aspx](http://blogs.msdn.com/b/vinsibal/archive/2008/10/01/overview-of-the-editing-features-in-the-wpf-datagrid.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:01:12.470

这可能被忽略了，但是您在添加空白对象后是否对 dataGrid 进行了数据绑定？

```
costCenterListDataGrid.DataContext = item.CostCenterList;
costCenterListDataGrid.DataBind() 
```

# asp.net - IIS 7.5 ARR/URL ReWrite2 ReversProxy 到虚拟机上的 Apache

> ID：11213151
> 
> 赞同：0
> 
> 时间：2012-06-26T17:52:37.953
> 
> 标签：asp.net, iis, url-rewriting, iis-7, arr

这是场景。

服务器是 Win2k8，运行 IIS 7.5。我安装了 ARR 和 URL Rewrite2。

我有一个运行最新 Ubuntu Server 的虚拟机。Apache、mySQL、PHP 都安装好了。

我已将 IIS 配置为反向代理，并设置了 URL ReWrite，如下所示：

```
 <rewrite>
        <rules>
            <rule name="ReverseProxyInboundRule1" stopProcessing="false">
                <match url="(.*)" />
                <action type="Rewrite" url="http://192.168.1.17/{R:1}" />
            </rule>
        </rules>
    </rewrite> 
```

我已经验证[http://dev.o7t.in](http://dev.o7t.in)正确地被路由到虚拟机上 apache 中的配置站点，但是，[http:](http://wp.o7t.in) //wp.o7t.in 被定向到同一个确切的位置。这是apache中两个站点的配置：

开发：

```
# NameVirtualHost *:80

<VirtualHost *>
    ServerName devo7tin
    ServerAlias dev.o7t.in
    ServerAdmin support@o7t.in
    DocumentRoot /var/www/dev/
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/dev/>
            Options -Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

</VirtualHost> 
```

wp:

```
# NameVirtualHost *:80

<VirtualHost *>
    ServerName wpo7tin
    ServerAlias wp.o7t.in
    ServerAdmin support@o7t.in
    DocumentRoot /var/www/wordpress/
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/wordpress/>
            Options -Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

</VirtualHost> 
```

并且 NameVirtualHost 已在 ports.conf 中配置

我注意到的是主机标头，总是恢复为虚拟机的 IP 地址（在本例中为 192.168.1.17），并完全忽略了请求的主机。

所以....我怎样才能解决这个问题，并将正确的 HTTP_HOST 标头传递给我的虚拟机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:49:55.903

我是对的。这是一个 IIS 不发送 HTTP_HOST 标头的事情。当然，他们为什么要在任何地方发布它，但显然 ARR 默认禁用，但是，它可以通过以下方式启用：

```
appcmd.exe set config -section:system.webServer/proxy /preserveHostHeader:"True" /commit:apphost 
```

配置了这个，它现在可以工作了！

# php - 将 JSON 对象从一个控制器传递到不同项目中的不同控制器

> ID：11213156
> 
> 赞同：0
> 
> 时间：2012-06-26T17:53:02.913
> 
> 标签：php, json, codeigniter

我一直在尝试在两个 CodeIgniter 项目之间进行通信。

我有 2 个项目，比如 A 和 B。每当从 A 调用视图时，它应该击中项目 B 而不是 A 的控制器。

我想只允许数据库访问项目 B 而不是 A。所以所有数据库查询都应该由我的 B 执行，所有显示都应该由 A 完成

有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:07:31.443

您需要`CI_Loader`像这样扩展类：

```
class ClassNameYouWant extends CI_Loader {
    public function construct(){ 
            parent::__construct(); 
    }

    public  function ExtendedView($view, $vars = array(), $return = FALSE){
        parent::view($view, $vars, $return);

        // run your code here
        // call projet B using cURL or whatever you want
    }
} 
```

如果要在加载视图之前运行代码，请调用`parent::view($view, $vars, $return);`函数末尾的行。

您必须在控制器中加载类，然后使用类似的东西

`$this->ClassNameYouWant->ExtendedView();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:02:21.600

如果 CodeIgniter 的 MVC 类似于 CakePHP 的，你需要接受控制器 A 中的数据，然后使用 HTTP 套接字连接到服务器 B，并将控制器 A 中收到的数据传输到控制器 B。然后控制器 B 可以运行它的业务逻辑并将更多 JSON 数据（作为 HTTP 响应）返回给您的控制器。

# java - 在 HTTP 标头中发送 UTF-8 值会导致 Mojibake

> ID：11213160
> 
> 赞同：10
> 
> 时间：2012-06-26T17:53:11.923
> 
> 标签：java, http, servlets, utf-8, header

我想从 servlet`HTTPServletResponse`向客户端发送阿拉伯语数据

我正在尝试这个

```
response.setCharacterEncoding("UTF-8");
response.setHeader("Info", arabicWord); 
```

我收到这样的词

```
String arabicWord = response.getHeader("Info"); 
```

在客户端（接收）也试过这个

```
byte[]d = response.getHeader("Info").getBytes("UTF-8");
arabicWord = new String(d); 
```

但似乎没有 unicode，因为我收到奇怪的英文单词，所以请问我如何发送和接收阿拉伯 utf8 单词？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-26T18:00:11.720

HTTP 标头不支持 UTF-8。它们仅正式支持 ISO-8859-1。另请参阅[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html) [第 2 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html)：

> 仅当根据 RFC 2047 [14] 的规则编码时，*TEXT 的字可能包含来自 ISO-8859-1 [22] 以外的字符集的字符。

最好的办法是对它们进行 URL 编码和解码。

```
response.setHeader("Info", URLEncoder.encode(arabicWord, "UTF-8")); 
```

和

```
String arabicWord = URLDecoder.decode(response.getHeader("Info"), "UTF-8"); 
```

URL 编码会将它们转换为完全有效的 ISO-8859-1[`%nn`格式。](http://en.wikipedia.org/wiki/Percent-encoding)请注意，在标头中发送的数据可能有大小限制。而是在响应正文中以纯文本、JSON、CSV 或 XML 格式发送它。以这种方式使用自定义 HTTP 标头是一种设计气味。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:56:20.553

我不知道`word`变量来自哪里，但试试这个：

```
arabicWord = new String(d, "UTF-8"); 
```

更新：看起来问题出在 HTTP*标头*中的 UTF-8 编码数据上，有关详细讨论，请参阅：[Java 中的 HTTP 标头编码/解码。](https://stackoverflow.com/questions/324470)

# sql - 按生日排序，不考虑年份

> ID：11213161
> 
> 赞同：5
> 
> 时间：2012-06-26T17:53:13.960
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005

您如何在完全不考虑年份的情况下查询您按生日排序的位置。我需要从今天的日期以 ASC 或 DESC 删除/忽略年份和 ORDER BY 生日月份和生日日期。

下面的方法不起作用，因为生日的年份开始起作用。以下示例显示了考虑年份时会发生什么：

```
John   01/02/1974
Billy  11/15/2000
Ally   06/25/2008

SELECT * FROM users ORDER BY birthdate 
```

按生日订购时的预期结果：

```
John   01/02/1974
Ally   06/25/2008
Billy  11/15/2000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T17:55:12.210

编辑：@AaronBertrand 的评论是正确的，闰年[的年份](http://msdn.microsoft.com/en-us/library/ms174420.aspx)不成立。你可以使用他的解决方案。另一种方法是按月和天订购，例如：

```
SELECT * FROM users ORDER BY month(birthdate), day(birthdate) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T18:02:04.440

这会将所有日期标准化为 2000 年：

```
ORDER BY DATEADD(YEAR, 2000-YEAR(birthday), birthday); 
```

这将正确处理闰年婴儿。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:56:16.167

尝试

```
SELECT * FROM users ORDER BY SUBSTRING(birthdate, 1, 5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-04T11:09:42.330

试试这个查询

它按升序排列生日

```
SELECT `id`, `teacher_name`, `phn_num`, `date_of_birth`, `date_of_birth` + INTERVAL(YEAR(CURRENT_DATE()) - YEAR(`date_of_birth`)) + 0 YEAR AS currbirthday, `date_of_birth` + INTERVAL(YEAR(CURRENT_DATE()) - YEAR(`date_of_birth`)) + 1 YEAR AS nextbirthday FROM `teacher_details` ORDER BY CASE WHEN currbirthday >= CURRENT_DATE() THEN currbirthday ELSE nextbirthday END 
```

# macos - Unicode 格式

> ID：11213172
> 
> 赞同：2
> 
> 时间：2012-06-26T17:53:50.997
> 
> 标签：macos, cocoa, unicode, emoji

我想将一堆表情符号图标添加到数组中。从[我之前的问题](https://stackoverflow.com/questions/11211551/display-emoji-icons-in-mac-app)中，我发现了如何在`NSString`. 现在我想制作一个循环并将这些图标添加到一个数组中。这应该相当容易，因为 unicode 在特定范围内，因此应该执行以下操作：

```
for (int i = 0; i < 10; i++)
    [someArray addObject:[NSString stringWithFormat:@"\U0001F43%i", i]]; 
```

问题是，这样做时我收到一条错误消息：

> 不完整的通用字符名称。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T19:47:48.133

这是因为转义序列`\Uxxxxxxxx` **由编译器评估，编译器**将其替换为相应的 Unicode 代码点。然后 when 方法`stringWithFormat:`将格式说明符替换`%i`为`i`. 最后的字符串是对应`\Uxxxxxxxx`的字符和表示的字符的串联`i`。`stringWithFormat:`用其他字符替换字符；它不会改变现有的字符。

但问题是，这里编译器看到一个不完整的转义序列，因为**你只写了 7 个十六进制数字**。所以它无法生成字符串并引发错误。

解决方案是在运行时生成字符（一个简单的整数值）并使用它创建一个字符串`+[NSString stringWithCharacters:length]`。

但是，如果您查看标头，您会看到`NSString`将其字符存储`unichar`为定义为`unsigned short`，即 16 位长的值，而 Unicode 代码点`U+1F430`() 至少需要 17 位。

因此，您不能使用单个`unichar`字符来表示该代码点。不过不用担心：您可以使用**两个字符**来表示它。

你迷路了？这里解释！Unicode 没有定义字符，它定义了代码点，它们是范围内的任意整数值`U+0000`– `U+10FFFF`。然后，实现决定如何使用字符来表示这些代码点。只要它设法表示所有有效的代码点，实现就可以使用它想要的任何数据类型作为字符。最简单的解决方案是使用 32 位长的整数，但这需要太多内存，因为您使用的大多数代码点都在第一个 Unicode 计划 ( `U+0000`- `U+FFFF`) 中。因此，使用 16 位长字符的[UTF-16 编码](http://en.wikipedia.org/wiki/UTF-16)`NSString`存储代码点。

在 UTF-16 中，超出`U+FFFF`的每个代码点都使用范围内的一对字符（称为代理对）存储`0xD800`- `0xDFFF`（相应的代码点在 Unicode 标准中明确保留）。

总之，任何有效的 Unicode 代码点都可以用一个或两个`unichar`字符来表示。[那里](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)描述了这样做的方法。这是一个简单的实现：

```
static NSString *stringWithCodePoint(uint32_t codePoint)
{
    // NOTE: As I edited the answer, you'll find a simpler implementation of
    // this function below

    unichar characters[2];
    NSUInteger length;

    if ( codePoint <= 0xD7FF || (codePoint >= 0xE000 && codePoint <= 0xFFFF) ) {
        characters[0] = codePoint;
        length = 1;
    }
    if ( codePoint >= 0x10000 && codePoint <= 0x10ffff ) {
        codePoint -= 0x10000;
        characters[0] = 0xD800 + (codePoint >> 10);
        characters[1] = 0xDC00 + (codePoint & 0x3ff);
        length = 2;
    }
    else {
        length = 0; // invalid code point
    }

    return [NSString stringWithCharacters:characters length:length];
} 
```

现在我们可以从任何有效的代码点生成一个字符串，我们只需要更新代码以使用我们之前编写的函数：

```
for (int i = 0; i < 10; i++)
    [someArray addObject:stringWithCodePoint(0x0001F430 + i)]; 
```

**编辑：**我只是想出了一种更简单的方法来`NSString`从代码点获取 a 。它通过使用`-[NSString initWithBytes:length:encoding:]`和`NSUTF32StringEncoding`编码工作：

```
static NSString *stringWithCodePoint(uint32_t codePoint)
{
    NSString *string = [[NSString alloc] initWithBytes:&codePoint length:4 encoding:NSUTF32StringEncoding];
    // You may remove the next 3 lines if you use ARC
#if ! __has_feature(objc_arc)
    [string autorelease];
#endif
    return string;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:04:25.783

使用`%C`代替`%i`

所以：

```
[someArray addObject:[NSString stringWithFormat:@"\U0001F43%C", i]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T19:48:50.093

注意[这个类似的问题](https://stackoverflow.com/q/1163373/957768)。正如[其答案之一所](https://stackoverflow.com/a/1165796/957768)解释的那样，字符串文字中的反斜杠转义是*在 compile time*评估的。如果您想使用`\Uxxxx`转义来制作 Unicode 字符，则`xxxx`all 必须是*字符串文字中的*数字。

[根据另一个答案](https://stackoverflow.com/a/1163400/957768)，您可以做的是使用格式说明符`%C`- 不与`\Uxxxx`转义符一起使用，而是单独使用 - 并将完整的字符代码作为整数传递。（实际上， a `wchar_t`，它现在是 Mac OS X 上的 32 位整数，您需要它，因为您要查找的字符代码超过 16 位长。）要将它与基数放在一起，您可以只需添加整数：

```
wchar_t base = 0x0001F430; // unfamiliar? we start with 0x for hexadecimal integers
for (int i = 0; i < 10; i++)
    [someArray addObject:[NSString stringWithFormat:@"%C", base + i]]; 
```

There's also `stringWithCharacters:` but that explicitly takes a (16-bit) `unichar`, so you'd need to use a character sequence to encode your emoji in UTF-16.

# .net - 连接已超时。### 的服务器响应时间过长

> ID：11213174
> 
> 赞同：1
> 
> 时间：2012-06-26T17:53:51.377
> 
> 标签：.net, iis-7

我知道这一定很简单，但它让我发疯。我有一个网站在我几天前刚刚工作的本地机器上的 iis 上运行。据我所知，我没有改变任何东西。但是，当我现在尝试导航到它以便我可以做更多的工作时，我收到了上述错误。我已经重新启动了站点、应用程序池和计算机。到底是什么导致了这个错误？

这台机器上 iis 中的默认站点运行良好。这只是我用端口号设置的站点。当站点首次打开时，除了典型的连接字符串检查外，不应加载任何数据库数据。

* * *

有趣...我更改了绑定，现在可以正常工作了。如果有人向我指出一些有助于向我解释这一点的文档，我将不胜感激并乐于将其标记为答案。当然，我会谷歌它，但我想你们中的一个人可能已经知道一个很好的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:56:01.167

任何数量的事情都可能导致这种情况。

1.  连接/命令管理不佳
2.  查询索引不佳
3.  检索太多数据
4.  执行时间跨度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:59:01.337

检查您的防病毒软件。特别检查它是否有称为“链接扫描器”的东西（或沿着这些线）。尝试将 localhost（或您通过其访问 IIS 的任何 dns 名称）列入白名单，或完全禁用它。它帮助了我。我正在运行 AVG-Free。

# c# - 计算目录大小

> ID：11213177
> 
> 赞同：7
> 
> 时间：2012-06-26T17:54:00.683
> 
> 标签：c#, .net, windows, filesystems

我试图以一种划分负载的方式计算目录大小，以便用户可以看到计数进度。我认为这样做的合乎逻辑的方法是首先创建目录树，然后执行计算所有文件长度的操作。

出乎我意料的是，大部分时间（磁盘 I/O）来自创建目录树，然后`FileInfo[]`几乎立即完成，几乎没有磁盘 I/O。

我已经尝试过两种方法`Directory.GetDirectories()`，只需创建目录名称的字符串树，并使用一个`DirectoryInfo`对象，与遍历所有`FileInfo.Length`for每个目录中的文件。

我想没有办法显着减少 I/O 来制作树，我想我只是想知道为什么这个操作比遍历更多的文件需要更多的时间？

此外，如果有人可以推荐一种非递归的方式来计算事物（因为似乎我需要拆分枚举并平衡它以使大小计算更具响应性）。为每个子目录创建一个线程并让调度程序竞争平衡事情可能不是很好，不是吗？

编辑： [此代码的存储库](https://github.com/jihyq9/DirectorySizeBrowser)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:59:32.593

您可以利用[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/dd460720.aspx)以并行方式运行目录大小计算。您可以获取 GetDirectories 并在每个节点上运行 Parallel.ForEach。您可以使用变量来跟踪大小并将其显示给用户。每个并行计算将在同一变量上递增。如果需要，请使用 lock() 在并行执行之间进行同步。

# ravendb - 查询左侧的 RavenDB StartsWith 变量

> ID：11213182
> 
> 赞同：2
> 
> 时间：2012-06-26T17:54:16.290
> 
> 标签：ravendb

我有一组带有 Url 属性的文档，如下所示：

```
{ Url: www.test.com }  
{ Url: www.test.com/abc }  
{ Url: www.test.com/abc/xyz } 
```

我想使用**www.test.com/abc查询文档，以便返回与所有内容****（包括**查询 url）上的 url 匹配的所有文档。即结果将返回：

```
{ Url: www.test.com }  
{ Url: www.test.com/abc } 
```

以下是我为完成此任务而编写的查询。如您所见，它依赖于在 queryTerm 上执行“Starts With”，而不是在文档的属性（查询的左侧）上执行。

```
var queryTerm = "www.test.com/abc";
pages = session.Query<MyDocument>()
               .Where(x => queryTerm.StartsWith(x.Url)); 
```

这在 Raven 中不起作用；我收到“不支持表达式类型”错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:16:15.940

Raven 的表达方式似乎并不支持这一点。有趣的是，查询`x => queryTerm.StartsWith(x.Url)`可以分解为以下内容：

```
x => x.Url == queryTerm ||
     x.Url == queryTerm.Remove(queryTerm.Length - 1) ||
     x.Url == queryTerm.Remove(queryTerm.Length - 2) ||
     x.Url == queryTerm.Remove(queryTerm.Length - 3) ||
     x.Url == queryTerm.Remove(queryTerm.Length - 4) ||
     etc. 
```

可以编码为：

```
var terms = Enumerable.Range(0, queryTerm.Length)
                      .Skip(1)
                      .Select(i => queryTerm.Remove(i));

pages = session.Query<MyDocument>()
               .Where(x => terms.Contains(x.Url)); 
```

**除了**Raven 也不支持`Contains()`那样。所以我把这个编码：

```
using System.Collections.Generic;
using System.Linq;
using NUnit.Framework;
using Raven.Client;
using Raven.Client.Embedded;
using Raven.Client.Linq;

namespace RavenTest
{
    [TestFixture]
    public class HowToDoBackwardsStartsWithInRaven
    {
        private readonly string[] _testUrls = new[]
            {
                "www.bad.com",
                "www.test.com",
                "www.test.com/abc",
                "www.test.com/abc/xyz"
            };

        private readonly string _queryTerm = "www.test.com/abc";

        private readonly string[] _expectedResults = new[]
            {
                "www.test.com",
                "www.test.com/abc"
            };

        [Test]
        public void FailsWithContains()
        {
            List<MyDocument> results;

            using (var store = InitStore())
            {
                LoadTestData(store);

                using (var session = store.OpenSession())
                {
                    var terms = GetAllStartingSubstrings(_queryTerm);

                    results = session.Query<MyDocument>()
                        .Where(x => terms.Contains(x.Url))
                        .ToList();
                }
            }

            Assert.That(results.Select(p => p.Url), Is.EquivalentTo(_expectedResults));
        }

        [Test]
        public void SucceedsWithSuperWhere()
        {
            List<MyDocument> results;

            using (var store = InitStore())
            {
                LoadTestData(store);

                using (var session = store.OpenSession())
                {
                    var terms = GetAllStartingSubstrings(_queryTerm);

                    var query = session.Query<MyDocument>()
                        .Where(x => x.Url.Length <= _queryTerm.Length);

                    foreach (var term in terms)
                        query = query.Where(x => x.Url == term ||
                                                 x.Url.Length != term.Length);

                    results = query.ToList();
                }
            }

            Assert.That(results.Select(p => p.Url), Is.EquivalentTo(_expectedResults));
        }

        private static IDocumentStore InitStore()
        {
            var store = new EmbeddableDocumentStore
                {
                    RunInMemory = true,
                };

            return store.Initialize();
        }

        private static string[] GetAllStartingSubstrings(string queryTerm)
        {
            return Enumerable.Range(0, queryTerm.Length)
                .Skip(1)
                .Select(i => queryTerm.Remove(i))
                .ToArray();
        }

        private void LoadTestData(IDocumentStore store)
        {
            using (var session = store.OpenSession())
            {
                foreach (var testUrl in _testUrls)
                    session.Store(new MyDocument {Url = testUrl});

                session.SaveChanges();
            }
        }

        public class MyDocument
        {
            public string Id { get; set; }
            public string Url { get; set; }
        }
    }
} 
```

现在......我不知道索引的效率如何，但测试确实通过了。

# java - JSTL遍历arrayList，似乎删除数据

> ID：11213188
> 
> 赞同：0
> 
> 时间：2012-06-26T17:54:45.473
> 
> 标签：java, jsp, collections, jstl

好的，所以我正在开发一个显示所选年份的事件的 JSP。It works fine for 2012, but when 2013 is selected it doesn't work. 可能是因为那里没有数据，但仍应显示月份。

请记住，我是 CS 大二的实习生

这是填充月份数组列表的方法。

```
public List getMonths() {
    List months = new ArrayList();

    Map tempMap = new HashMap();
    tempMap.put("month", "January"); 
    tempMap.put("value", 1); 
    months.add(tempMap); 

    tempMap  = new HashMap();
    tempMap.put("month", "February"); 
    tempMap.put("value", 2); 
    months.add(tempMap); 

    tempMap   = new HashMap();
    tempMap.put("month", "March"); 
    tempMap.put("value", 3); 
    months.add(tempMap); 

    tempMap = new HashMap();
    tempMap.put("month", "April"); 
    tempMap.put("value", 4); 
    months.add(tempMap); 

    tempMap = new HashMap();
    tempMap.put("month", "May");
    tempMap.put("value", 5);
    months.add(tempMap);

    tempMap = new HashMap();
    tempMap.put("month", "June");
    tempMap.put("value", 6);
    months.add(tempMap);

    tempMap = new HashMap();
    tempMap.put("month", "July");
    tempMap.put("value", 7);
    months.add(tempMap);

    tempMap = new HashMap();
    tempMap.put("month", "August");
    tempMap.put("value", 8);
    months.add(tempMap);

    tempMap = new HashMap();
    tempMap.put("month", "September");
    tempMap.put("value", 9);
    months.add(tempMap);

    tempMap = new HashMap();
    tempMap.put("month", "October");
    tempMap.put("value", 10);
    months.add(tempMap);

    tempMap = new HashMap();
    tempMap.put("month", "November");
    tempMap.put("value", 11);
    months.add(tempMap);

    tempMap = new HashMap();
    tempMap.put("month", "December");
    tempMap.put("value", 12);
    months.add(tempMap);

    tempMap = new HashMap();
    return months;
} 
```

然后我使用这段代码来设置属性：

```
request.setAttribute("months", getMonths());    
request.setAttribute("parkEvents", parkEventsList);
request.setAttribute("parkYears", parkYearsList);
request.setAttribute("currentYear", year); 
```

这是应该显示月份的 JSTL 代码，但似乎循环 "c:forEach var="months" items="${months}" 在 2013 年没有迭代。有什么想法吗？

```
<div>
    <form>
        <select onchange="javascript:window.open(this.value,'_self')">
        <c:forEach var="years" items="${parkYears}">
        <option value=/events.html?display_year=${years}<c:if test="${currentYear == years}"> selected="selected"</c:if>>${years}</option>
        </c:forEach>
        </select>

    </form>
    </div>

<c:set var="years" value="${currentYear}"/>
<div class="generaltext">
  <!-- begin accordion -->
<div class="accordion" id="${years}" style="margin-top: 20px; display: none;"><!-- begin fas section -->

    <c:forEach var="months" items="${months}">
        <div class="section">
        ${years}
            <div class="sectionHeader inactiveHeader" id="${months.value}${years}SectionHeader">
            <a onclick="_showSectionContentContainer('${months.value}${years}Section'); return false;" href="#">
            <img id="${months.value}${years}SectionArrow_down" alt=""  src="/export/resources/images/arrows/grayRightSmall.gif" />
            <img id="${months.value}${years}SectionArrow_right" alt="" style="display: none;" src="/export/resources/images/arrows/grayDownSmall.gif" />${months.month} ${years}</a>
            </div>

            <div class="sectionContent" id="${months.value}${years}Section" style="display: none;"><br/>
        <c:set var="counter" value="0" />
            <c:forEach var="event" items="${parkEvents}">
                <c:if test="${event.eventYear == years && event.eventMonth == months.value && event.eventDay != counter}">
                    </br><b> ${event.eventMonth}/${event.eventDay}/${event.eventYear}</b></br>
                <c:set var="counter" value="${event.intEventDay}" />
                </c:if>
                <c:if test="${event.eventYear == years && event.eventMonth == months.value && event.eventDay == counter}">
                    - <a target="_blank" href="http://fwp.mt.gov/eCalendar/ViewItem.html?cal_item_id=${event.id}&dtwhen=${event.intStartingDate}">${event.description} </a><br/>
                </c:if>
            </c:forEach> 
            </div>

        </div>  
        </c:forEach>

</div>        <!-- end accordion -->
</div> 
```

# visual-studio-2010 - VS2010 部署项目 - 如何从 AssemblyInfo 中提取版本？

> ID：11213193
> 
> 赞同：1
> 
> 时间：2012-06-26T17:54:57.807
> 
> 标签：visual-studio-2010, versioning, setup-deployment

我正在使用单个 SharedAssemblyInfo.cs 文件为解决方案中的所有项目共享 AssemblyVersion。

有没有办法提取该信息并使用相同的值更新部署项目的 Version 属性？

# android - Android SQLite query: "queryNumEntries .. is not applicable for the arguments"?

> ID：11213195
> 
> 赞同：2
> 
> 时间：2012-06-26T17:55:02.923
> 
> 标签：android, sqlite

I have a database named `contacts.db` with a table named `TABLE_NAME` that has one column named `Contactname`. I want to format a query to check if a contact name that I have as a value in the String variable name is already saved as a record in the table and if it isn't then I want to add it, or else do nothing. The code that I wrote is as follows:

```
SQLiteDatabase db = events.getReadableDatabase();
int rawNum = DatabaseUtils.queryNumEntries(db, TABLE_NAME, 
                        "Contactname=?", new String[] {contactName}); 
    if(rawNum==0){
        addRecord(contactName);
        addedCounter+=1;
    }
    else{
        savedCounter+=1;
    } 
```

But the app is forced to close. Can you see anything wrong with the query? What I do is to see whether there are any rows and if the number of rows is 0 then to add the contact.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:18:22.310

Perhaps it's time to update your development kit.

The method with the signature used in the code was introduced with API Level 11:

```
public static long queryNumEntries (SQLiteDatabase db, String table, String selection, String[] selectionArgs) 
```

API Level 1 had only the two-argument method:

```
public static long queryNumEntries (SQLiteDatabase db, String table) 
```

# mysql - mysql跳过某些月份

> ID：11213199
> 
> 赞同：0
> 
> 时间：2012-06-26T17:55:29.227
> 
> 标签：mysql

一段时间以来一直在尝试解决这个问题。我真的很感激任何帮助。

我有这张表，其中我得到了 2 列，分别带有日期和 int 值。问题是 mysql 在 int 值为空的地方跳过日期值。

这里是sql语句

```
SELECT DATE_FORMAT(sales_date_sold, '%b \'%y')
    AS sale_date, sales_amount_sold 
    AS sale_amt 
    FROM yearly_sales 
    WHERE sales_date_sold BETWEEN DATE_SUB(SYSDATE(), INTERVAL 2 YEAR) AND SYSDATE() 
    GROUP BY YEAR(sales_date_sold), MONTH(sales_date_sold) 
    ORDER BY YEAR(sales_date_sold), MONTH(sales_date_sold) ASC; 
```

2011 年 2 月没有任何值，因此会跳过该月以及其他一些月。合并和 if_null 也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:00:45.750

您需要一个为维度中所有月份提供值的行源，然后将您的 yearly_sales 表加入其中。

您正在执行 GROUP BY，您很可能想要对您的度量进行聚合 (sales_amount_sold)，或者您不想要 GROUP BY。（您问题中的查询将在给定月份中仅针对一行从 sales_amount_sold 返回一个值。这可能是您想要的，但返回的结果集非常奇怪。）

* * *

一种方法是创建一个“calendar_month”表，其中包含您想要返回的所有月份的 DATE 值。（还有其他方法可以生成这个，stackoverflow 上其他地方的问题的现有答案）

```
SELECT m.month                            AS sale_date
     , IFNULL(SUM(s.sales_amount_sold),0) AS sale_amt
  FROM calendar_months m
  LEFT
  JOIN yearly_sales s
    ON s.sales_date_sold >= m.month 
   AND s.sales_date_sold < DATE_ADD(m.month,INTERVAL 1 MONTH)
 WHERE m.month BETWEEN DATE_SUB(SYSDATE(), INTERVAL 2 YEAR) AND SYSDATE()
 GROUP BY m.month
 ORDER BY m.month 
```

此查询返回的结果略有不同，您只会获取“整月”组中的行，而不是像原始查询中那样包括部分月份，因为 sale_date 上的 WHERE 子句引用当前日期和时间前两年，而不是两年前的“月初”。

不一定需要 calendar_months 表；这可以替换为返回行源的查询。在这种情况下，可以将月份值的谓词从外部查询移动到子查询中。

* * *

附录：如果您使用 calendar_month 表作为行源，则需要使用您想要返回的每个可能的“月”值填充它。

```
CREATE TABLE calendar_month
(`month` DATE NOT NULL PRIMARY KEY COMMENT 'one row for first day of each month');

INSERT INTO calendar_month(`month`) VALUES ('2011-01-01'),('2011-02-01'),('2011-03-01') 
```

* * *

作为替代方案，您可以将动态生成的行源指定为内联视图，而不是表引用。（您可以使用类似的查询来快速填充 calendar_months 表。）

您可以将此查询包装在括号中，并将其粘贴`FROM`在`calendar_months`我提供的上一个查询之间。

```
SELECT DATE_ADD('1990-01-01',INTERVAL 1000*thousands.digit + 100*hundreds.digit + 10*tens.digit + ones.digit MONTH) AS `month`
  FROM ( SELECT 0 AS digit UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9 ) ones
  JOIN ( SELECT 0 AS digit UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9 ) tens
  JOIN ( SELECT 0 AS digit UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9 ) hundreds
  JOIN ( SELECT 0 AS digit UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9 ) thousands 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:01:14.307

问题不在于该值为 NULL，而在于您正在从数据库中选择数据。如果您没有特定月份的数据，MySQL 将无法选择不存在的数据。

在 MySQL 中完全解决这个问题的唯一方法[已经在一个非常相似的问题中得到了回答](https://stackoverflow.com/questions/3538858/mysql-how-to-fill-missing-dates-in-range)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:00:24.980

我以前遇到过时间戳问题。我使用的解决方案是创建一个包含所有月份的参考表。这可能是一张只有数字 1-12（12 行）的表格，或者您可以更进一步并输入月份名称。然后你就可以离开加入你`yearly_sales`的`1_through_12`表来获取每个月的表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T18:02:40.420

为什么不直接使用 0 而不是 NULL？

# php - 计算自然排序值以存储在数据库中以进行字符串排序

> ID：11213201
> 
> 赞同：3
> 
> 时间：2012-06-26T17:55:44.910
> 
> 标签：php, algorithm, sorting

以下是字符串的一些示例（主要是地址）：

```
12
20
43-B
43-C
123
2500 
```

现在我把它们放在我认为“正确”的顺序中。如果我将这些值放在数据库表的列中并在 MySQL 搜索中返回这些值，我会得到：

```
12
123
20
2500
43-B
43-C 
```

显然这是不正确的——`20`不大于`123`。

如果我可以保证该值由纯整数组成，则很容易弄清楚这一点，但是当您输入`43-B`and `43-C`（或什`12A`至或其他）时，我们就会开始遇到问题。但是，我不能简单地去掉数字！我不完全确定它在这一点上代表什么，但我确实有诸如`40W1`.

就个人而言，我会将其排序在 40 而不是 4000 之下，但这是一种非常罕见的极端情况，所以我不太担心这个特定的例子。不过，我**确实**需要记住这些字母，因为`40B`会在之前出现`40C`——但我也希望`40-B`在之前出现`40C`。很棘手，对吧？我知道。

不过，我愿意假设只有字母数字字符（即`-`从字符串中删除）。

我想要做的是将该字符串转换为一系列绝对可排序的数字。

例如，`43-B`可能会变成`10000031205`（填充）之类的东西，并与行的其余部分一起存储在数据库中。当我搜索我的地址时，我现在可以按排序列进行排序，一切都井井有条！

我不能做的事情：

*   在运行时直接比较它们
*   在 MySQL 中进行此搜索（该值需要逐行计算）
*   在 PHP 中使用 sort/asort/ksort 或任何排序函数

我需要一个可以存储在我的数据库或搜索索引中的值，以便以后进行排序！

不幸的是，到目前为止，我的所有尝试都未能产生我想要的结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:09:35.203

我会使用 2 个排序列，如果您使用 PHP，则在 sql 中`sortNumber int, sortText varchar`存储在第一列中，在另一列中存储*不带*任何符号的字母（一次运行的结果（我不知道 SQL 方式..），并且.如果您需要考虑浮点数，它会变得更加复杂，但不会太多。`intval($string);``CAST(column as UNSIGNED)`*`preg_replace(array('/^-?[0-9]+/','/[^A-Z0-9]/i'),'',$input)``SORT BY sortNumber, sortText`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:14:14.327

我不认为它是最有效的格式，但它会起作用。我假设没有负数。

我填充到 5 位，但填充需要大于数字序列中的最大位数。

```
$input = '43-B1';
$nat = preg_replace_callback('#\d+#', function($m) {
    return str_pad($m[0], 5, '0', STR_PAD_LEFT);
}, $input);
echo $nat; 
```

演示 [http://codepad.viper-7.com/kefb4L](http://codepad.viper-7.com/kefb4L)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:11:53.110

怎么样：

```
preg_match('(\d*)[^a-zA-Z0-9]*(.*)', $houseNumber, $matches);
$sortable = sprintf("%08d%s", $matches[1], $matches[2]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T18:20:15.803

```
创建表 cmp (a varchar(255));

插入 cmp 值 ('12'), ('123'), ('20'), ('2500'), ('43-B'), ('43-C'),
('4000'), ('40w1');

select a, lpad(cast(a as unsigned), 20, 0) from cmp
按 lpad(cast(a as unsigned), 20, 0) 排序；

+------+----------------------------------+
| 一个 | lpad(cast(a as unsigned), 20, 0) |
+------+----------------------------------+
| 12 | 00000000000000000012 |
| 20 | 00000000000000000020 |
| 40w1 | 00000000000000000040 |
| 43-B | 00000000000000000043 |
| 43-C | 00000000000000000043 |
| 123 | 00000000000000000123 |
| 2500 | 00000000000000002500 |
| 4000 | 00000000000000004000 |
+------+----------------------------------+
8 行，6 个警告（0.00 秒）

```

您可以使用这样的示例来删除任何非数字，
并自然排序。

该警告并不是真正的阻碍，
考虑到您正在尝试从字符串列中进行数字排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T18:09:13.423

您是否考虑过将数值保存在单独的列中？如果这些是地址，那可能是合理的。并且性能会比散列或处理字符串更好。*

# android - 为不同的屏幕尺寸使用不同的布局 Android

> ID：11213203
> 
> 赞同：0
> 
> 时间：2012-06-26T17:55:47.243
> 
> 标签：android, screen

我一直在为 Android 开发一款记忆游戏，但我的布局有点问题。

对于每种类型的游戏（简单、中等和困难）我都有 3 种不同的布局，我在屏幕上需要匹配 4x4、5x5 或 6x6 图像。

我正在使用 ImageAdapter 来获取图像并填充用于在屏幕上显示图像的 GridView。

这是 Easy 游戏的 XML 文件（4x4 图像）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <RelativeLayout 
        android:id="@+id/mainBar"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:gravity="center">
         <TextView 
           android:id="@+id/player1"
           android:layout_alignParentLeft="true"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Player1 - "
           />

        <TextView 
           android:id="@+id/player1Score"
           android:layout_toRightOf="@+id/player1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="00 "
           />

          <TextView 
           android:id="@+id/player2Score"
           android:layout_alignParentRight="true"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="00"
           />

        <TextView 
           android:id="@+id/player2"
           android:layout_toLeftOf="@+id/player2Score"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Player2 - "
           />

    <Chronometer
        android:id="@+id/time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="02:00" />

    </RelativeLayout>

   <GridView
       android:id="@+id/gridview"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:layout_alignParentBottom="true"
       android:layout_below="@id/mainBar"
       android:gravity="center_vertical|center_horizontal"
       android:numColumns="4">
</GridView>

</RelativeLayout> 
```

唯一的问题是，当我在具有小屏幕尺寸的模拟器上运行应用程序时，图像看起来会被拉伸......（参见 IMG#1）......当我真的想要看起来像这样的东西时......（见 IMG#2)，在每个屏幕上，无论大小！

![图片#1](../Images/f4084d441a82e2c0d24a641594e01cf5.png)

![图#2](../Images/914554c4d4c51215b0beef9b9616d9ca.png)

我正在使用不同的资源（ldpi、mdpi、hdpi 的不同图像）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:40:19.173

使用它来找到正确的物理屏幕尺寸：

```
if ((getResources().getConfiguration().screenLayout & 
    Configuration.SCREENLAYOUT_SIZE_MASK) == 
        Configuration.SCREENLAYOUT_SIZE_LARGE) {
    // on a large screen device ...

} 
```

资料来源：[如何使用代码确定设备屏幕尺寸类别（小、普通、大、xlarge）？](https://stackoverflow.com/questions/5015094/determine-device-screen-category-small-normal-large-xlarge-using-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T02:13:58.037

您遇到的问题是，当您支持多种屏幕密度时，您不支持多种物理屏幕尺寸。这就是为什么在较小的屏幕上您的图像看起来更大并开始扭曲的原因。

要解决这个问题，您可以为每种手机尺寸分别设置布局：小号、普通号、大号和超大号。

然而，由于这非常乏味，我倾向于使用线性布局和权重，以便布局 xml 可以在所有手机尺寸上进行缩放。

在这种情况下，您需要制作一个垂直线性布局，其中包含 4 个水平线性布局。

# javascript - 对选定的滤镜应用特殊效果

> ID：11213215
> 
> 赞同：0
> 
> 时间：2012-06-26T17:56:23.413
> 
> 标签：javascript, jquery

好的，所以我正在使用流沙 jquery 过滤器。现在我想在选择任何过滤器时为所有图像添加特定效果（我在 javascript 中输入）。过滤器列表如下：-

```
<ul class="filter"> 
   <li class="current all"><a href="#">Fred</a></li> 
   <li class="daisy"><a href="#">daisy</a></li> 
   <li class="richard"><a href="#">richard</a></li> 
   <li class="ama"><a href="#">ama</a></li> 
   <li class="santy"><a href="#">santy</a></li> 
   <li class="washington"><a href="#">washington</a></li> 
   <li class="deuces"><a href="#">deuces</a></li> 
</ul> 
```

所以我使用以下语法来确定选定的过滤器并从那里处理一些 jquery 'magic'。

```
 $(".filter a").click(function(e){

    $(".filter li").removeClass("current"); 

    // Get the class attribute value of the clicked link
    var $filterClass = $(this).parent().attr("class");

    if ( $filterClass == "all" ) {
        var $filteredPortfolio = $portfolioClone.find("li");
    } else {
        var $filteredPortfolio = $portfolioClone.find("li[data-type~=" + $filterClass + "]");
        $filteredPortfolio.addClass("row3");
    } 
```

现在要将特殊效果添加到所选过滤器的所有图像（例如摄影），我添加了您在最后一行看到的这段代码，基本上是因为当我在浏览器中调试它时，`$("$filteredPortfolio").addClass("row3")`该效果适用于该类的所有元素`row3`，它无法工作。我究竟做错了什么？我仍然认为自己是 jquery 新手，所以如果答案很明显，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:03:57.747

你的最后一行应该是：

```
$filteredPortfolio.addClass("row3"); 
```

.find() 已经生成了一个 jQuery 对象，所以不需要额外的 $()

您正在过滤`[data-type=..]`，如果在 HTML 中定义了 data-type 属性，这很好，但如果您通过 .data('type', val) jQuery api 设置它，它将不起作用。要让过滤器找到它，您必须使用 .attr('data-type', val)。较新版本的 jQuery 更好地区分数据和属性，它们实际上是分开的东西。jQuery 曾经将它们混为一谈并交替使用它们可能在旧版本中有效。

# c++ - 通过迭代器浏览模板类的映射

> ID：11213223
> 
> 赞同：0
> 
> 时间：2012-06-26T17:56:51.757
> 
> 标签：c++, templates, iterator

我正在使用 c++，我遇到的问题是，从以下代码中每次调用方法“getItem()”都会返回 0，尽管这不是写在地图中的整数，而且地图也不是空的。使用“typename ...”语句作为类属性有什么问题吗？

```
 template <class t>
    class P {
    public:
        P(); 
        int getItem();

    private:
        std::map<int, P<t>* > m;
        typename std::map<int, P<t>* >::iterator it;
        bool visited;
    };

    template <class t>
    P<t>::P() {
      visited=false;
    }

    template <class t>
    int P<t>::getItem()
    {
        if(!visited) 
            it=m.begin();
        int i=it->first;
        it++;
        return i;
    } 
```

方法“getItem()”仅在地图不再更改后调用。所以不应该有迭代器无效的原因。我通过调用 m[i]=p 将项目添加到地图中。

谢谢你的帮助 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:23:45.973

您没有设置“已访问”布尔值，因此如果您运行一个生成“getItem”的循环，您总是重新初始化迭代器“it”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:03:03.193

由于您在任何时候都没有设置`visited`为，因此您*总是*返回其中第一项的整数，大概是. 你的意思可能是这样的：`true`*`map``0`*

 *```
if(!visited)
{
    visited = true;
    it=m.begin();
} 
```*

# eclipse - 如何通过 Eclipse 使用 Xperia Ray 进行 Android 编程？

> ID：11213226
> 
> 赞同：0
> 
> 时间：2012-06-26T17:56:59.390
> 
> 标签：eclipse, usb, drivers

我下载了手机套件、Google USB 驱动程序和手机的连接驱动程序。到目前为止，这款手机在 PC 上运行良好，但 Eclipse 仍然拒绝查看手机，并且设备管理器让我相信我没有与 Google USB 驱动程序兼容的硬件。因此，Google USB 驱动程序已下载但未安装或分配给任何设备。到目前为止，我遵循了关于 stackoverflow 的所有答案，但没有一个能够解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:19:36.077

*   首先，将您的设备设置为 USB / 调试模式。
*   其次，在您将设备连接到 USB 后，请确保您的驱动程序已正确安装。
*   最后验证 adb.exe 是否可以从 cmd 检测到您的设备（如果在 Windows 中运行）..（您的 SDK 的路径）\platform-tools\adb device

*   如果最后一步失败，则重新安装您的设备驱动程序，它应该由索尼 pc-companion 为您的 xperia 手机自动处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:45:27.550

您还必须`USB-Debugging`在`Settings->Developer Options`手机上启用。

# javascript - 使用 jQuery/Javascript 的发光图像

> ID：11213228
> 
> 赞同：3
> 
> 时间：2012-06-26T17:57:02.750
> 
> 标签：javascript, jquery, glow

我有两张图片。一个是正​​常的，另一个是更彩色的。我想让这个图像显示在另一个图像之上并具有“发光”效果，它每秒左右在透明和不透明之间切换。当用户按下特定按钮时，我还需要停止这种效果。我将如何使用 jQuery 或 Javascript 执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:13:55.187

*[jsBin 演示](http://jsbin.com/atofif/250/edit)*

[html](/questions/tagged/html "显示标记为“html”的问题")：

```
<button id="stop">STOP IT!</button>

<div class="images">
     <img src="img1.jpg" />
     <img src="img2.jpg" class="glowed"/>
</div> 
```

[jQuery](/questions/tagged/jquery "显示标记为“jquery”的问题")：

```
var playing = true;

function loop(){
  if(playing){
    $('.images img:eq(1)').fadeIn(700, function(){
      $(this).fadeOut(700,loop);
    });
  }
}

loop(); // start loop

$('#stop').click(function(){
  playing=0;
}); 
```

只需将两个图像绝对定位：

```
 .images img{
    position:absolute;
  }

  .glowed{
    box-shadow: 0px 0px 30px 2px #cf5
  } 
```

我使用了[css3](/questions/tagged/css3 "显示标记为“css3”的问题")盒子阴影，但您可以使用*发光*的.png 图像。

# javascript - 并排获得两个 Slickgrid 表

> ID：11213229
> 
> 赞同：1
> 
> 时间：2012-06-26T17:57:05.147
> 
> 标签：javascript, css, slickgrid

我将如何将两个 slickgrid 表并排放置？现在，我只是使用 grid = new Slick.Grid... 创建两个网格，但我必须在 CSS 中使用硬编码的尺寸，例如：

```
#dynamic1 { /*this is grid one*/
  position: absolute;
  top: 120px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  height:500px;
}

#dynamic2 { /*grid two*/
  position: absolute;
  top: 120px;
  left: 750px;
  right: 0px;
  bottom: 0px;
  height:500px;
} 
```

这不好玩。而且它不是动态的。如果可能的话，如果我可以将它们并排放置，并且组合宽度可以扩展以填充整个浏览器窗口，那就太好了。

编辑：它是固定的！这是新代码：

```
#dynamic1 {
float: left;
width: 49%;
position: absolute;
  top: 120px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  height:500px;
}

#dynamic2 { /*grid two*/
  float: right;
  width: 50%;
  position: absolute;

  top: 120px;

  right: 0px;
  bottom: 0px;
  height:500px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:02:56.483

```
position: absolute;
  **float: left;**
  top: 120px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  height:500px;
}

#dynamic2 { /*grid two*/
   **float: right;**
  position: absolute;
  top: 120px;
  left: 750px;
  right: 0px;
  bottom: 0px;
  height:500px;
} 
```

您只需要添加一个向左浮动和向右浮动。您可以为它们分配等于 100% 的任何宽度组合。例子：

```
position: absolute;
  **float: left;**
  **width: 45%;**
  top: 120px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  height:500px;
}

#dynamic2 { /*grid two*/
   **float: right;**
  **width: 55%;**
  position: absolute;
  top: 120px;
  left: 750px;
  right: 0px;
  bottom: 0px;
  height:500px;
} 
```

# mysql - SELECT with JOIN 受限

> ID：11213234
> 
> 赞同：0
> 
> 时间：2012-06-26T17:57:33.623
> 
> 标签：mysql, join, sql

我有以下查询：

```
SELECT pro.* 
  FROM tb_AutProposta pro, tb_AutParcelamento par 
 WHERE pro.id = par.id 
```

但是，想将每个限制`tb_AutParcelamento`为 1。尝试了“Subselect”，但没有成功。

table pro 是一个合约，par 是这个合约的包裹。对于每份合同，生成 n 个包裹，并且为每个包裹生成一个到期日，我需要知道每份合同的最后到期日。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:09:02.800

在不真正了解您的数据架构以及您正在尝试做什么的情况下，您可以尝试限制返回的 par 记录数。

```
SELECT pro.*, FIRST(par.Id) as FirstParcel
FROM tb_AutProposta pro, tb_AutParcelamento par 
WHERE pro.id = par.id
GROUP BY pro.* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:06:12.497

这是一个涉及检索一组记录的分组最大值/最小值的问题。我喜欢使用的方法如下：

```
SELECT
    a.*,
    b.due_date
FROM
    tb_AutProposta a
INNER JOIN
    tb_AutParcelamento b ON a.id = b.id
INNER JOIN
    (
        SELECT id, MAX(due_date) AS last_due_date
        FROM tb_AutParcelamento
        GROUP BY id
    ) c ON b.id = c.id AND b.due_date = c.last_due_date 
```

替换`due_date`为 中日期字段的实际名称`tb_AutParcelamento`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T19:12:49.877

我只是编造了一些字段名称，因为我们不知道您的确切表结构。

此查询在以下假设下工作：

*   您想要每个相关合同的最新（“最高”）包裹到期日
*   您的包裹表中`due_date`有字段。`pro_id`（`tb_AutParcelamento.pro_id`作为外键`tb_AutProposta.id`）
*   我弥补了，`pro_id`因为我假设条件`pro.id = par.id`是错误的，当`id`两个表中的字段都是自动递增值和每个表中的主键时。

```
SELECT pro.*, MAX(par.due_date) as latest_due_date
FROM tb_AutProposta pro
LEFT JOIN tb_AutParcelamento par
    ON pro.id = par.pro_id
GROUP BY pro.id 
```

# sql - SQL 选择多行到一个显示的行

> ID：11213235
> 
> 赞同：0
> 
> 时间：2012-06-26T17:57:36.220
> 
> 标签：sql, sql-server, tsql, row

我的情况是我有两张桌子。我想将它们连接在一起并让重复的记录出现在同一行。下面给出的模拟表结构

MainTbl 列：MKey1、MKey2、MData1、MData2、MData3

SuppTbl 列：SPrimaryKey、SKey1、SKey2、SData1、SData2

我想 LEFT JOIN MainTbl 到 SuppTbl。但是，SuppTbl 包含重复的 SKey1 和 SKey2 组合键。

我想要的结果如下，其中“-#”表示重复数。

MKey1,MKey2,MData1,MData2,MData3,SData1-1,SData2-1,SData1-2,SData2-2

本质上，连接中的所有字段都应包含在基于 Key1 和 Key2 的一行上。

**Sean W 尝试的答案**

```
SELECT
    MainTbl.MKey1,
     MainTbl.MKey2,
    tcd.SData1 AS SData11,  
    tcd.SData2 AS SData22,
    tcr.SData1 AS SData12,  
    tcr.SData2 AS SData22
FROM MainTbl
LEFT JOIN SuppTbl tcd
ON MainTbl.MKey1=tcd.SKey1 AND MainTbl.MKey2=tcd.SKey2
LEFT JOIN SuppTbl tcr
ON MainTbl.MKey1=tcr.SKey1 AND MainTbl.MKey2=tcr.SKey2
WHERE tcd.SData1 < tcr.SData1 
```

*结果*没有成功。没有拉任何记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:21:46.810

修改后（评论后）：

```
CREATE TABLE MainTbl (MKey1 int,MKey2 int,MData1 varchar(10),MData2 varchar(10),MData3 varchar(10))
CREATE TABLE SuppTbl (SPrimaryKey int,SKey1 int,SKey2 int,SData1 varchar(10),SData2 varchar(10))

INSERT INTO MainTbl VALUES (1, 1, '1MData1', '1MData2', '1MData3')
INSERT INTO SuppTbl VALUES (1, 1, 1, '1SData1-1', '1SData2-1')
INSERT INTO SuppTbl VALUES (2, 1, 1, '1SData1-2', '1SData2-2')

INSERT INTO MainTbl VALUES (1, 2, '2MData1', '2MData2', '2MData3')
INSERT INTO SuppTbl VALUES (3, 1, 2, '2SData1-1', '2SData2-1')

SELECT
    MainTbl.MKey1,
    MainTbl.MKey2,
    tcd.SData1 AS SData11,  
    tcd.SData2 AS SData22,
    tcr.SData1 AS SData12,  
    tcr.SData2 AS SData22
FROM MainTbl
INNER JOIN SuppTbl tcd
ON MainTbl.MKey1=tcd.SKey1 AND MainTbl.MKey2=tcd.SKey2
LEFT JOIN SuppTbl tcr
ON MainTbl.MKey1=tcr.SKey1 AND MainTbl.MKey2=tcr.SKey2
AND tcd.SPrimaryKey < tcr.SPrimaryKey 
```

现在，对于那些在 SuppTbl 中有 2 行的实例，这不会 100% 起作用：它将给出两个结果行 - 一个很好，另一个你想排除。要排除它，您必须提供一些有关如何识别将具有 >1 SuppTbl 行的实例的更多信息。您在上面的评论“WHERE Data1 = 4”中提到过。所以这需要成为 WHERE 子句的一部分。它会是这样的：

```
 WHERE tcd.SData1 = 4 
```

这可能会排除单个 SuppTbl 行。因此，您需要提供有关如何不过滤掉该行的信息。也许：

```
 WHERE tcd.SData1 IN (4, 22) 
```

（这不适用于上面表格中的数据）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T19:09:49.313

找到了答案。为简单起见，我将其缩减了一点，但只要有可以应用的 WHERE 条件，它就可以很好地工作，就像我的情况一样。

```
SELECT 
    MainTbl.MKey1,
    MainTbl.MKey2,
    tcd.stat AS SData11,
    tcr.stat AS SData12
FROM MainTbl
LEFT JOIN(
    SELECT * FROM SuppTbl WHERE SData1 <> 22
) tcd
ON MainTbl.MKey1=tcd.SKey1 AND MainTbl.MKey2=tcd.SKey2
LEFT JOIN(
    SELECT * FROM SuppTbl WHERE SData1 = 22
) tcr
ON MainTbl.MKey1=tcr.SKey1 AND MainTbl.MKey2=tcr.SKey2 
```

# visual-studio-2010 - 如何禁用 fxcop

> ID：11213238
> 
> 赞同：4
> 
> 时间：2012-06-26T17:57:44.840
> 
> 标签：visual-studio-2010

我有一个在visual studios 2010 pro中创建的项目，现在打开它最终我得到了100个我相信的错误，因为fx cop。

我该如何简单地关闭它。

我已经右键单击并转到代码分析，我的网站在什么设置上？

编辑：

我需要关闭它的原因是因为我收到了这个主要错误：

```
Error   1   CA0060 : The indirectly-referenced assembly 'Newtonsoft.Json, Version=4.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed' could not be found. This assembly is not required for analysis, however, analysis results could be incomplete. This assembly was referenced by: C:\CMS\packages\DataTablePager\DataTablePager.dll.     Application 
```

![在此处输入图像描述](../Images/0bb27bad9fc5934f9a1f615a28fb0df4.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T18:18:51.677

在解决方案资源管理器中右键单击您的项目节点，选择属性。

底部附近有一个代码分析选项卡。单击它并取消选中“在构建时启用代码分析”。

或者，您可以右键单击该错误，然后选择“抑制”。这将允许您抑制生成该错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-10T14:39:54.780

添加`<RunCodeAnalysis>false</RunCodeAnalysis>`到您的 .csproj 文件（我在第一次`<PropertyGroup>`找到它时就打了它）并停止使用`Analyze > Run Code Analysis`，因为它仍然运行旧的 FxCop。

如果您使用旧的 ASP.NET（不是 Core），请右键单击项目并单击`Unload project`，然后才能编辑 .csproj。

资料来源：[https ://docs.microsoft.com/en-us/visualstudio/code-quality/fxcop-analyzers-faq?view=vs-2019](https://docs.microsoft.com/en-us/visualstudio/code-quality/fxcop-analyzers-faq?view=vs-2019)

# openlayers - 如何独立于缩放级别移动弹出位置？

> ID：11213239
> 
> 赞同：3
> 
> 时间：2012-06-26T17:57:45.150
> 
> 标签：openlayers

假设您有一个带有标记的图层和一个事件侦听器，在鼠标悬停时会显示一个弹出窗口，例如

```
var hints = new OpenLayers.Control.SelectFeature(wplayer, {
  hover: true,
  eventListeners: {
    featurehighlighted: function(event) {
      var feature = event.feature;
      popup = new OpenLayers.Popup(null,
        feature.geometry.getBounds().getCenterLonLat().add(3000, 3000),
        new OpenLayers.Size(200,10),
        feature.attributes.name, false, null);
      ... 
```

到目前为止，这很有效-并且`add(3000, 3000)`可以很好地转移位置。但我想独立于当前缩放级别将其移动相同数量的像素。这样实际标记不会被弹出窗口阻止。

这意味着我必须将 (+15px, +15px) 之类的平移转换为当前显示的 openlayers 坐标系。在伪代码中：

```
feature.geometry.getBounds().getCenterLonLat().add(Pixels(15,15).toMap()) 
```

任何想法如何使用 openlayers 方法完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:20:13.533

有：

*   [getViewPortPxFromLonLat()](http://dev.openlayers.org/docs/files/OpenLayers/Layer-js.html#OpenLayers.Layer.getViewPortPxFromLonLat)
*   [getLonLatFromViewPortPx()](http://dev.openlayers.org/docs/files/OpenLayers/Layer-js.html#OpenLayers.Layer.getLonLatFromViewPortPx)

使用这些函数，可以像这样计算翻译：

```
var ll = feature.geometry.getBounds().getCenterLonLat();
var px = map.getViewPortPxFromLonLat(ll, 72);
px = px.add(15, -15);
ll = map.getLonLatFromViewPortPx(px);
...
popup = new OpenLayers.Popup(null, ll, ...); 
```

可能还有一种查询当前视口/屏幕分辨率的方法（上面我只用72）。

# firebase - Firebase 条目可以在其名称中包含逗号吗？

> ID：11213241
> 
> 赞同：0
> 
> 时间：2012-06-26T17:58:12.623
> 
> 标签：firebase

```
var ref1 = new Firebase("http://gamma.firebase.com/myuser/123,456");
ref1.set("123,456");
var on1 = ref1.on("value", function(snapshot) {
    console.log(snapshot.val());
});
// console logs 123,456 
```

所以用逗号命名可以正常工作。但是，假设您想将 url 传递给 ref。

```
var url1 = ref1.toString();
console.log(url1);
// console logs http://gamma.firebase.com/myuser/123%2C456 
```

toString() 函数返回一个版本的 url，其中逗号替换为“%2C”。如果 URL 仍然可用，这将很好。

```
var ref2 = new Firebase(url1);
var on2 = ref2.on("value", function(snapshot) {
    console.log(snapshot.val());
});
// console logs null 
```

这是一个错误，还是有充分的理由让用户必须做类似的事情

```
var url1 = ref1.toString().replace(/%2C/g,","); 
```

为了获得可用的 Firebase URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:33:32.143

Firebase 键中允许使用逗号。我们的网站上有一个受限字符列表，但供将来[在我们的文档中](http://www.firebase.com/docs/creating-references.html)参考。

这里的问题是 toString() 方法是对 url 进行 URL 编码。我们的意图是，这将使将该 URL 粘贴到浏览器中并使用我们的实时调试器查看它变得更加容易。如果您调用 toString 然后尝试使用该字符串创建新的 Firebase 引用，我可以看到这是如何产生问题的。

我们不认为有人这样做是正常的用例。您能否详细说明为什么要使用另一个参考的 toString 方法构建新的 Firebase 参考？我们有“child()”和“parent()”函数来帮助你遍历你的数据。

我们将在内部讨论是否要更改 URL 在 toString 中的编码方式，并可能在未来的版本中解决此问题。

# java - 多线程连接处理

> ID：11213245
> 
> 赞同：0
> 
> 时间：2012-06-26T17:58:31.007
> 
> 标签：java, multithreading, sockets

我想编写一个服务器，它在给定端口上侦听连接并将套接字放入`BlockingLinkedQueue`其中，消费者线程将从中读取消息。我以这种方式接受传入连接：

```
 ServerSocket serverSocket = new ServerSocket(port);
   while (true)
   {
        Socket socket = null;
        socket = serverSocket.accept();
        queue.put(socket);
   } 
```

当我尝试从两个单独的主机并行连接时，在建立第二个连接后，对第一个主机的响应会发送到第二个主机。当我将代码更改为下面列出的代码时，第二个连接仅被拒绝：

```
 while (true)
   {
        ServerSocket serverSocket = new ServerSocket(port);
        Socket socket = serverSocket.accept();
        queue.put(socket);
   } 
```

我的问题是：

1.  这两种情况有什么区别？为什么在第一种情况下消息被发送到第二台主机？
2.  我应该如何重构我的代码以便在我的服务器和两个主机之间创建单独的连接并并行处理它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:03:26.953

> 这两种情况有什么区别？

在第一种情况下，您将同一端口用于多个连接。在第二种情况下，您将丢弃服务器端口，因此拒绝任何等待的连接。

> 为什么在第一种情况下消息被发送到第二台主机？

由于代码中的错误，此处未显示。

> 我应该如何重构我的代码以便在我的服务器和两个主机之间创建单独的连接并并行处理它们？

为每个连接创建一个线程。

# magento - 从 Magento Onepage Checkout 中删除第 2 步“运输信息”

> ID：11213246
> 
> 赞同：0
> 
> 时间：2012-06-26T17:58:37.993
> 
> 标签：magento

我目前正在使用 magento 1.5.1。我还使用一个模块来允许本地商店取货。但是，我想从结帐过程中删除“运输信息”步骤。我不想删除“运输方式”部分，因为它是我的店内取货模块所必需的。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:40:28.743

您必须在文件中删除指向它的链接：magento/app/design/frontend/base/default/template/checkout/onepage.phtml

然后很可能编辑 magento/app/design/frontend/base/default/template/checkout/onepage/shipping.phtml 或 shipping-method/phtml

这可能有点困难。让我知道这是怎么回事！

# ms-access - MS 访问语法错误

> ID：11213248
> 
> 赞同：-1
> 
> 时间：2012-06-26T17:58:51.937
> 
> 标签：ms-access, vba

这是我的代码：

```
Text22 = DLookup("[Program_No]", "1_Supportive_Housing", "[Program_Name] = '" & Replace([Me.Program_Name], "'", "''") & "' And [BudgetYear] = " & [Me.BudgetYear]) 
```

我不确定它有什么问题，但它不断给我以下错误：

> 找不到字段 | 在你的表达中

我一直试图摆脱这个错误，但没有任何效果。

OnKeyPress，此事件触发。正如用户所写，它应该能够在表中查找值并将其分配给 text22。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:08:22.083

看起来您想要引用表单字段 [Me.Program_Name] 和 [Me.BudgetYear]，但 Access 会尝试查找与此名称完全相同的字段，包括“我”。字首。尝试完全删除括号，或改用 Me.[Program_Name] 和 Me.[BudgetYear]。

# unity3d - 无法在 Unity Xbox 中获得正确的关节位置高度

> ID：11213251
> 
> 赞同：0
> 
> 时间：2012-06-26T17:59:06.077
> 
> 标签：unity3d, kinect

我正在使用 Xbox-Unity 并尝试制作 Kinect 游戏。我需要能够知道球员的脚何时在空中，何时又回到地面。我认为这就像跟踪关节位置一样简单，但是脚的 Y 值会根据与 Kinect 相机的接近程度而变化（从 Kinect 获取脚关节位置）。如果我将左脚抬离相机很远，那么 Y 会很高（比如说 10）。如果它靠近相机着陆，Y 会很低（比如说 -20）。我所希望的是我可以说 0 是地板，并且很容易知道什么时候脚在空中，什么时候在地面上。有人对我如何正确判断脚何时接地有任何想法吗？（到目前为止，我能想到的所有事情都至少有一个例外情况会破坏游戏玩法）

编辑：使用点到平面方程，但无论我做什么，到地板的距离总是根据我与相机的接近程度而不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:18:30.127

一种可能性是将它与另一只脚进行比较。如果一只脚比另一只脚高，那么他们很可能站在另一只脚上。如果您想检测跳跃，您应该能够发现双脚 y 位置的突然变化。

还有Floor Clipping Plane，但这涉及到我所看到的一些更复杂的数学。查看[Kinect 编程指南](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&ved=0CFQQFjAF&url=http%3A%2F%2Fclass.nus-hci.com%2Fcourses%2Fwp-content%2Fuploads%2F2011%2F08%2Fprogrammingguide_kinectsdk.docx&ei=hfrpT-vJIqqY6QH-xYCKDQ&usg=AFQjCNFg-I9-36FfhYloq7iN8euSUJDPdQ&sig2=SdArR0GCpx7edhVGHRCgIw)，它非常古老，但我认为在这里仍然应该是相关的。“地板确定”部分是您所追求的。

# ajax - 使用 Post 写入会话 - CakePHP

> ID：11213253
> 
> 赞同：0
> 
> 时间：2012-06-26T17:59:11.600
> 
> 标签：ajax, session, cakephp, post, edit

我正在尝试将一组复选框 ID 发布到我的控制器中的操作。这是我的 index.ctp 中的脚本：

```
<script type="text/javascript">
$('.editSel_dialog').click(function()
{
    var selected = [];
    alert('Edit Selected Has Been Clicked');

    $("#[id*=LocalClocks]").each(function()
        {
        if(false != $(this).is(':checked'))
        {
            selected.push($(this).attr('id').replace('LocalClocks', ''));
        }
    });
    alert(selected);
    /*$.ajax(
    {
        type: 'POST',
        url: "/LocalClocks/editSelected/",
        data: selected,
        traditional: true,
        //contentType: "application/json",
        dataType: "text",
        success: function(data){ alert(data); alert('Edit Success');}
    });*/
    $.post('/LocalClocks/editSelected', { "Session" : selected }, function(data){
                   alert(data);
    });
});
</script> 
```

我有一个 ajax 请求和一个 post 请求。我一直在使用 ajax，直到我看到帖子实际上可以修改 php 变量。大括号中的代码`{ "Session" : selected }`应使用选定的数组修改 Session 变量。

我尝试在`$this->data`, and `$this->request->data`, and上使用调试`$_POST`，但它们都是空的。

我需要帮助将选定的数组写入变量或其他东西。我正在考虑尝试写信给，`$this->Session`但我不确定我将如何去做。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:33:49.780

使用 Cake，要在 中获取发布的值`$this->request->data`，它们的名称必须带有前缀`data`：

**Javascript：**

```
$.post('/LocalClocks/editSelected', { "data[Session][selected]" : selected }, function(data){
               alert(data);
}); 
```

**控制器：**

```
function editSelected()
{
  if($this->request->is('post'))
  {
    if(isset($this->request->data['Session']['selected']))
    {
      $this->Session->write('selected', $this->request->data['Session']['selected']);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:00:59.987

也许我错了，但我认为你不能直接从客户端使用 ajax 做到这一点。你能分享你关于你可以修改 php 变量的声明的来源吗？我在谷歌上搜索，但没有运气，我能修改 PHP 会话会很奇怪.. 这真的很不安全，说你可以使用会话固定/注入或其他恶意技术

已编辑

要在您需要的现有变量上分配值

进行ajax调用

```
$.post('/LocalClocks/editSelected', { "selected" : selected }, function(data){
                   alert(data);
    }); 
```

在您的控制器上，您将拥有这样的功能

```
function editSelected($selected){
$_SESSION["selected"] = $selected;
} 
```

瞧

# sql - 使用 SQL 识别表中不存在的值的最有效方法

> ID：11213257
> 
> 赞同：1
> 
> 时间：2012-06-26T17:59:58.323
> 
> 标签：sql, performance, sql-server-2008

我目前需要搜索项目表以验证用户输入的项目列表。
项目表包含每个项目的唯一主键，称为 ItemId（对应于用户输入的值）。
给定一个有 10000（万）行的表，搜索 ItemId 列并确定表中是否不存在用户输入的任何项目的最有效方法是什么？

例如，给定表格：

```
ItemId       Color      Price
 1000         Blue       3.00  
 1001          Red       4.00  
 1003        Green       1.25 
```

用户输入以下内容：
1000 1001 1002

我想抛出一个错误来提醒用户其中一项（1002）无效。我不需要专门识别无效的项目，只是表中不存在一个或多个项目。我尝试过使用 IF NOT EXISTS 和 EXCEPT，但我对效率方面的“最佳实践”没有感觉。通常，我会检查执行计划，但我真的不知道从哪里开始。我将不胜感激任何和所有的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:15:26.313

就个人而言，我会在我的存储过程中使用一个表值参数，然后简单地 LEFT JOIN 到表中并查找 NULL。

```
CREATE TYPE ItemTableType AS TABLE 
( ItemId INT);
GO

CREATE PROCEDURE dbo.usp_GetItems
    @Items ItemTableType READONLY
AS 

SET XACT_ABORT ON;
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
SET NOCOUNT ON;

IF EXISTS (SELECT * 
           FROM dbo.MyItemTable i1 
           LEFT JOIN @Items i2 ON i1.ItemId = @i2.ItemId 
           WHERE i2.ItemId IS NULL)

    RAISERROR('Item does not exist', 16, 1)
ELSE
    SELECT i1.*
    FROM dbo.MyItemTable i1
    JOIN @Items i2 on i1.ItemId = @i2.ItemId

GO 
```

我能想到的另一种可能性是对最终结果进行计数。

要执行计数：

```
DECLARE @CommaCount INT

SET @CommaCount = (select len(@ItemIds)-len(replace(@ItemIds,',',''))) 
```

然后，当您执行 SELECT 时，只需将结果与计数进行比较：

```
SELECT * 
FROM dbo.MyItemTable
WHERE ItemId IN (@ItemIds)

IF(@@ROWCOUNT != @CommaCount)
    RAISERROR('Item does not exist', 16, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:48:16.200

我同意 Chris 的回答，因为使用 TVP 是传入用户提供的值的好方法，但会进行以下更改。

用主键声明 TVP

```
CREATE TYPE ItemTableType AS TABLE 
( ItemId INT PRIMARY KEY); 
```

使用`NOT EXISTS`而不是`OUTER JOIN ... NULL`. 这是作为有效的反半连接实现的。`OPTION (RECOMPILE)`提示应该为优化器提供足够的`PRIMARY KEY`信息，以便为两个表的大小选择最佳连接策略。

```
SELECT CASE
         WHEN EXISTS (SELECT *
                      FROM   @Items i
                      WHERE  NOT EXISTS (SELECT *
                                         FROM   dbo.MyItemTable it
                                         WHERE  i1.ItemId = it.ItemId)) THEN 0
         ELSE 1
       END
OPTION (RECOMPILE) 
```

`OUTER JOIN ... NULL`最终可以外部连接所有行，然后使用过滤器消除那些效率较低的行（[本文](http://bradsruminations.blogspot.co.uk/2011/10/t-sql-tuesday-023-flip-side-of-join.html)`NOT NULL`底部的示例），另请参见[左外连接与不存在](http://sqlinthewild.co.za/index.php/2010/03/23/left-outer-join-vs-not-exists/)

# python - 将 curl 与 --data-urlencode 一起使用并在 django 中获取内容

> ID：11213258
> 
> 赞同：0
> 
> 时间：2012-06-26T18:00:02.857
> 
> 标签：python, django, unix, curl

我有一个文件，我需要将其内容发送到一个函数。我目前正在做的事情如下：

```
$ curl --data-urlencode "$( cat my_file.xml)" MyIP

# in function
def receiver(request):
    print request.POST 
```

这会返回类似：

```
<QueryDict: {u'\ufeff<?xml version ': [u' "1.0" encoding = "UTF-8"?>\n<Orders>\n ...</Orders>']}> 
```

换句话说，该`curl`命令正确地将数据发送到 django 函数；但是，由于 POST 数据在 request.POST 键（`u'\ufeff

另外 xml 文件**没有**正确的 url 编码，所以我不认为我可以使用`curl -d @file`.

它似乎被`'\ufeff<?xml version '`当作 QueryDict 键。我将如何在此处传递文件内容并将其作为单个字符串检索，以便我可以解析 xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:34:30.680

有一个非常简单（hack）的解决方案，在`request.POST`dict上使用字符串连接来重新组合信息：

```
contents = request.POST.keys()[0] + "=" + request.POST.values()[0] 
```

# javascript - JavaScript 动画

> ID：11213259
> 
> 赞同：13
> 
> 时间：2012-06-26T18:00:06.233
> 
> 标签：javascript, animation

我正在尝试在 JavaScript 中为水平`div`移动设置动画。`200px`

下面的代码使它跳跃像素，但是有没有办法让它看起来动画而不使用jQuery？

```
function () {
    var div = document.getElementById('challengeOneImageJavascript');
    div.style.left = "200px";
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-26T18:07:32.087

这是一个基本的动画设置：

```
function animate(elem,style,unit,from,to,time) {
    if( !elem) return;
    var start = new Date().getTime(),
        timer = setInterval(function() {
            var step = Math.min(1,(new Date().getTime()-start)/time);
            elem.style[style] = (from+step*(to-from))+unit;
            if( step == 1) clearInterval(timer);
        },25);
    elem.style[style] = from+unit;
} 
```

要使用：

```
animate(
    document.getElementById('challengeOneImageJavascript'),
    "left","px",0,200,1000
); 
```

此示例将动画给定元素以在 1 秒（1000 毫秒）的时间内从 0px 线性滑动到 200px。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-26T18:02:40.553

[您可以通过CSS3-Transition](http://www.w3schools.com/css3/css3_transitions.asp)轻松做到这一点：

```
#challengeOneImageJavascript {
    -webkit-transition: left .2s;
       -moz-transition: left .2s;
         -o-transition: left .2s;
            transition: left .2s;
} 
```

但是，IE9 和更早的浏览器版本不支持它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-29T18:54:53.313

我做了大量的研究，我终于学会了如何做得很好。

我喜欢将我的程序放在 window.onload 函数中，这样在页面完成加载之前它不会运行代码。

要制作动画，请创建一个函数（我将其称为绘图函数）并调用它除了保留字之外的任何你想要的，然后在绘图函数的最后调用 requestAnimationFrame 函数并给它函数的名称被称为下一帧。

在 requestAnimationFrame 函数可以使用之前，它必须被声明。

请看下面的代码：

```
window.onload = function() {
  function draw() { //  declare animation function
    context.fillStyle = "white";
    context.fillRect(0, 0, 400, 400);
    requestAnimationFrame(draw); // make another frame
  }
  var requestAnimationFrame = // declare the 
    window.requestAnimationFrame || // requestAnimationFrame
    window.mozRequestAnimationFrame || // function
    window.webkitRequestAnimationFrame ||
    window.msRequestAnimationFrame;
  draw(); // call draw function
}
```

**注意：**调用draw函数的那行之后什么都不会运行，所以你需要把你想运行的所有东西都放在调用draw函数的那一行之前。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T18:10:56.373

您将不得不使用 javascript 超时功能，并一次更改一点 css 值。最简单的方法是每次增加一个设定的量，直到达到阈值，这会给你一个线性动画，与 jQuery 的默认`swing`动画相比，它看起来很笨拙和业余，它遵循一个近似像 s 曲线的贝塞尔曲线。

未经测试的代码应该做线性动画

```
var lefty = 0;
var animate = function(){
    lefty += 20;
    var div = document.getElementById('challengeOneImageJavascript');
    div.style.left = lefty +"px";
    if(lefty < 200)
      setTimeout(animate(),100);
}

animate() 
```

nb 对该代码块有很多改进，但它应该让你继续......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T18:03:14.920

使用 JavaScript，您将不得不使用`setInterval`函数，或者这是在 jQuery 中完成的方式：

```
$('#challengeOneImageJavascript').animate({left: '=-5'}); 
```

Adust 值 ( `5`) 根据您的需要和方向通过`=-`或`=+`

**使用香草 JavaScript：**

```
var interval;
var animate = function(id, direction, value, end, speed){
    var div = document.getElementById(id);
    interval = setInterval(function() {
       if (+(div.style) === end) {
          clearInterval(interval);
          return false;
       }
       div.style[direction] += value; // or -= as per your needs
    }, speed);
} 
```

你可以像这样使用它：

```
animate('challengeOneImageJavascript', 'left', 5, 500, 200); 
```

要随时停止动画，您可以：

```
clearInterval(interval); 
```

**注意：** *这只是一个非常快速的方法来给你一个想法。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-16T06:32:20.927

[CustomAnimation](https://github.com/SamantaChinmoy/CustomAnimation)是一个用于动画 html 元素的小库，它是用纯 js 编写的。你可以使用这个库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-10T13:00:11.807

通过css最简单的方法。

[https://jsfiddle.net/pablodarde/5hc6x3r4/](https://jsfiddle.net/pablodarde/5hc6x3r4/)

translate3d 使用在 GPU 上运行的硬件加速。 [http://blog.teamtreehouse.com/increase-your-sites-performance-with-hardware-accelerated-css](http://blog.teamtreehouse.com/increase-your-sites-performance-with-hardware-accelerated-css)

**HTML**

```
<div class="movingBox"></div> 
```

**CSS**

```
.movingBox {
  width: 100px;
  height: 40px;
  background: #999;
  transform: translate3d(0,0,0);
  transition: all 0.5s;
}

.moving {
  transform: translate3d(200px,0,0);
  background: #f00;
} 
```

**JavaScript**

```
const box = document.getElementsByClassName('movingBox')[0];

setTimeout(() => {
    box.className += ' moving';
}, 1000); 
```

# c++ - 在 C++ 中返回局部变量的引用

> ID：11213270
> 
> 赞同：-2
> 
> 时间：2012-06-26T18:00:58.150
> 
> 标签：c++, reference

> **可能重复：**
> [C++ 返回对局部变量的引用](https://stackoverflow.com/questions/4643713/c-returning-reference-to-local-variable)
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

在下面的代码中

```
int& h() {

int o=100;
return o; 
}

int main() {
int t=h();     //line 1
cout<<t;     //line 2
return 0;
} 
```

为什么输出为 100，即函数的局部变量的值，以及为什么第 1 行没有错误，因为函数的返回类型是 int& 但我们将其返回值返回到 int。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T18:15:39.427

1.  您永远不应该返回指向局部变量的引用或指针。当函数返回时，它将被销毁。在某些情况下它可能会起作用，因为堆栈可能尚未被覆盖。但它最终会意外失败。

2.  将对某事物的引用分配给相同类型的值是合法的。因此，在您的作业中制作了一份副本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T18:33:33.280

该值为 100，因为包含它的内存刚刚被释放并且没有人向其写入任何内容。这是另一个例子：

```
int& h() {

    int o=100;
    return o; 
}

int& h2() 
{
    int o = 10;
    return o;
}

int main() {
    int t=h() + h2();     //line 1
    cout << t;
    return 0;
} 
```

如果您在 Visual Studio 上不进行优化编译，结果将是 20，会发生以下情况：

1.  h() 被调用，将 100 写入内存，释放它并返回一个引用。
2.  h2() 被调用并将 10 写入**内存中的同一位置**（之前已被释放）
3.  main() 计算内存中同一位置的 2 个值的总和。因此，它是 10+10。

从**int &**设置**int**不是错误。这是一个有效的操作，意味着“将此引用引用到某个对象并将那里的任何内容复制到我的局部变量中”。

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T09:53:20.390

返回引用局部变量 - 对于单线程应用程序 /example by Ivan/ 没有问题。对于多线程应用程序是问题 - 当不同的线程使用函数时，例如 h()。在这种情况下，可能是线程交叉使用未分配内存的时刻。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T18:03:22.100

编译器不一定能防止不良和/或未定义的行为。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-26T18:14:42.843

检查您传递给编译器的选项。

在 codepad.org 编译代码会产生警告：[http ://codepad.org/ParI4AOG](http://codepad.org/ParI4AOG)

```
In function 'int& h()':
Line 6: warning: reference to local variable 'o' returned 
```**

# nhibernate - Fluent NHibernate 一对多关系将外键设置为空

> ID：11213274
> 
> 赞同：5
> 
> 时间：2012-06-26T18:01:27.170
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有一个简单的 Fluent NHibernate 模型，其中包含两个相关的类：

```
public class Applicant
    {
        public Applicant()
        {
            Tags = new List<Tag>();
        }

        public virtual int Id { get; set; }

        //other fields removed for sake of example

        public virtual IList<Tag> Tags { get; protected set; }

        public virtual void AddTag(Tag tag)
        {
            tag.Applicant = this;
            Tags.Add(tag);
        }
    }

public class Tag
{
    public virtual int Id { get; protected set; }
    public virtual string TagName { get; set; }

    public virtual Applicant Applicant { get; set; }
} 
```

我的流利映射如下：

```
public class ApplicantMap : ClassMap<Applicant>
    {
        public ApplicantMap()
        {
            Id(x => x.Id);

            HasMany(x => x.Tags).Cascade.All();
        }
    }

    public class TagMap : ClassMap<Tag>
    {
        public TagMap()
        {
            Id(x => x.Id);
            Map(x => x.TagName);

            References(x => x.Applicant).Not.Nullable();
        }
    } 
```

每当我尝试**更新**申请人（插入一个新的可以正常工作）时，它都会失败，并且我在日志中看到以下 SQL 异常：

```
11:50:52.695 [6] DEBUG NHibernate.SQL - UPDATE [Tag] SET Applicant_id = null WHERE Applicant_id = @p0;@p0 = 37 [Type: Int32 (0)] 
11:50:52.699 [6] ERROR NHibernate.AdoNet.AbstractBatcher - Could not execute command: UPDATE [Tag] SET Applicant_id = null WHERE Applicant_id = @p0 System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Applicant_id', table 'RecruitmentApp.dbo.Tag'; column does not allow nulls. UPDATE fails. 
```

为什么 NHibernate 试图更新标签表并将申请人 ID 设置为空？我对此一无所知。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T18:15:44.137

设置`Applicant.Tags`为`Inverse`将指示 NHibernate`Tags`在`Applicant`.

```
public class ApplicantMap : ClassMap<Applicant>
{
    public ApplicantMap()
    {
        Id(x => x.Id);

        HasMany(x => x.Tags).Cascade.All().Inverse();
    }
} 
```

更多详情：

`Inverse`（相对于`.Not.Inverse()`）表示关系的另一方（在这种情况下，每个`Tag`）负责维持关系。因此，NHibernate 知道`Applicant`必须先保存 ，这样才能`Tag`有一个有效的外键`Applicant`。

经验法则：包含外键的实体通常是所有者，所以另一个表应该有`Inverse`

# winforms - 从winforms中的db字段自动创建输入UI？

> ID：11213275
> 
> 赞同：0
> 
> 时间：2012-06-26T18:01:29.913
> 
> 标签：winforms, entity-framework, data-binding, datagridview, datasource

我正在尝试在 winforms 中创建一个表单以将记录添加到数据库，例如新客户。我正在使用实体框架。

直到今天我所做的是从实体框架生成的类中创建一个新的空“客户”对象。然后我将此空对象添加到列表中，并将列表设置为 datagridview 的数据源。

这样我就自动在网格中输入了所有必需的字段来输入数据库。一切正常。

但是现在，客户想要更好的 UI 设计——看起来像网页中的联系表单，而不是网格行。

如何自动制作类似的东西，就像我使用 datagridview 所做的那样，根据 db 结构自动创建所有输入字段，而无需手动创建标签和文本框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:38:03.073

我最终迭代了网格并在每次迭代中创建了文本框和标签。

```
void Generate_TextBoxes()
{
  // top of textboxes
  int current_top=150;
  int current_left = 1000;

  // index used to match between each textbox and the properate column in grid
  int my_index = -1;

  // iterate the grid and create textbox for each column
  foreach (DataGridViewColumn col in dataGridView_add_customer.Columns)
  {
    my_index++;

    // generate textboxes only for visible columns
    if (col.Visible == true)
    {
      // increase the top each time for space between textboxes
      current_top += 40;

      // create a second column of textboxes (not all of them in 1 long column)
      if (my_index == 6) { current_top = 190; current_left = 450; }

      TextBox t = new TextBox();
      t.Top = current_top;
      t.Left = current_left;
      t.Width = 170;
      t.TextChanged +=new EventHandler(t_TextChanged);
      // give an 'id' for each textbox with the corresponding index of the grid
      t.Name = my_index.ToString();

      Label l = new Label();
      l.Text = col.HeaderCell.Value.ToString();
      l.Top = current_top;
      l.Left = current_left + 190;

      this.Controls.Add(l);
      this.Controls.Add(t);
} 
```

以及将文本框绑定到网格的函数：

```
void t_TextChanged(object sender, EventArgs e)
{
  // create a reference in order to be able to access grid properties such as rows..
  TextBox tt = (TextBox)sender;

  // access the correct cell in the grid using the Name property you gave to the textbox (it was name=current_index..)
  dataGridView_add_customer.Rows[0].Cells[int.Parse(tt.Name)].Value = tt.Text; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:48:05.903

您最好的选择是保留 DataGridView 但覆盖样式，使其看起来远离网格，更像您的老板所期望的。

实现这一目标的一些建议：

*   删除每行之间的线。
*   删除标题和网格边框。
*   为每一行和每一列添加大量填充，以便每个条目被隔开。对于更高级的东西，您可能需要覆盖网格某些控件的 Paint 方法。

# visual-studio - Visual Studio：为什么条件断点不接受 F# 运算符？

> ID：11213276
> 
> 赞同：2
> 
> 时间：2012-06-26T18:01:30.650
> 
> 标签：visual-studio, f#, conditional-breakpoint

在我的代码中放置条件断点时，失败：

```
"Sophie Dee" <> myString 
```

但是，这很好用：

```
"Sophie Dee" != myString 
```

这在VS2012中修复了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:03:44.800

断点谓词和监视表达式等都使用 C#（以及可能的 VB，用于 VB 解决方案 - 不知道）。有人很懒，我们必须忍受。

# android - 单击 tabBar 时显示上下文菜单

> ID：11213278
> 
> 赞同：1
> 
> 时间：2012-06-26T18:01:44.300
> 
> 标签：android, android-activity, tabs

我有一个奇怪的要求要完成。假设我有一个带有 3 个标签的 tabHost。假设第二个选项卡当前显示。我需要做的是 - 单击第三个选项卡以显示上下文菜单时。上下文菜单需要显示在选项卡 2 的活动中。

**重要**因此，当我单击第三个选项卡时，我不能转到另一个活动，我必须留在当前活动（来自选项卡 2）并还显示上下文菜单。

希望我说清楚了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:34:27.593

如下所示的简单演示示例，检查它根据您的要求进行一些更改

```
import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.View;
import android.view.ContextMenu.ContextMenuInfo;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;

public class Tab_exActivity extends TabActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Resources res = getResources(); // Resource object to get Drawables
    // this.myhost = (TabHost)this.findViewById(R.);

    // this.myhost.setup();
     final TabHost tabHost=getTabHost(); 
     // The activity TabHost
     TabHost.TabSpec spec;  // Resusable TabSpec for each tab
     Intent intent;  // Reusable Intent for each tab

     // Create an Intent to launch an Activity for the tab (to be reused)
     intent = new Intent().setClass(this, tabactivity1.class);

     // Initialize a TabSpec for each tab and add it to the TabHost
     spec = tabHost.newTabSpec("artists").setIndicator("Home",
                       res.getDrawable(R.drawable.act1))
                   .setContent(intent);
     tabHost.addTab(spec);

     // Do the same for the other tabs
     intent = new Intent().setClass(this, tabactivity2.class);
     spec = tabHost.newTabSpec("albums").setIndicator("Refresh",
                       res.getDrawable(R.drawable.act2))
                   .setContent(intent);
     tabHost.addTab(spec);

    // intent = new Intent().setClass(this, tabactivity3.class);
     spec = tabHost.newTabSpec("songs").setIndicator("Search",
                       res.getDrawable(R.drawable.act3))
                   .setContent(intent);

     tabHost.addTab(spec);
     tabHost.setOnTabChangedListener(new OnTabChangeListener(){

         public void onTabChanged(String tabId) {

         if (tabId.equals("songs")){
             System.out.println("44444");
             View v = tabHost.getCurrentView();
             registerForContextMenu(v);
             v.showContextMenu();
         }

         }});

    // openContextMenu(spec);
    // tabHost.setCurrentTab(2);
}
@Override  
   public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {  
super.onCreateContextMenu(menu, v, menuInfo);  
    menu.setHeaderTitle("Context Menu");  
    menu.add(0, v.getId(), 0, "Action 1");  
    menu.add(0, v.getId(), 0, "Action 2");  
} 
} 
```

# android - 处理 AsyncTask 的屏幕方向

> ID：11213279
> 
> 赞同：1
> 
> 时间：2012-06-26T18:01:46.310
> 
> 标签：android

我在我的应用程序中使用 AsyncTask。

即使方向改变，我怎样才能让我的任务恢复工作。

这是任务：-

```
package com.android.grad;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.provider.MediaStore;

public class LoginTask extends AsyncTask<Void, Void, Boolean> {

    private Activity activity;
    private ProgressDialog pd;
    private Uri fileUri;
    private final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;

    public LoginTask(Activity activity, Uri fileUri) {
        this.activity = activity;
        this.fileUri = fileUri;
    }

    @Override
    protected void onPreExecute() {
        pd = ProgressDialog.show(activity, "Signing in",
                "Please wait while we are signing you in..");
    }

    @Override
    protected Boolean doInBackground(Void... arg0) {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
        }
        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        pd.dismiss();
        pd = null;

        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
        activity.startActivityForResult(intent,
                CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
    }
}    

public class LoginActivity extends Activity {

private final int MEDIA_TYPE_IMAGE = 1;
private CheckBox rememberMe;
private EditText userName, passWord;
private Button loginBtn;
private final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
private String path;
private Uri fileUri;

private OnClickListener loginOnClick = new OnClickListener() {
    public void onClick(View v) {
        new LoginTask(LoginActivity.this, fileUri).execute();
    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
    path = fileUri.getPath();

    loginBtn = (Button) findViewById(R.id.signInBtn);
    loginBtn.setOnClickListener(loginOnClick);

    rememberMe = (CheckBox) findViewById(R.id.keepMe);

    userName = (EditText) findViewById(R.id.userNameID);
    passWord = (EditText) findViewById(R.id.passwordID);
}

@Override
protected void onResume() {
    super.onResume();
    SharedPreferences sp = getSharedPreferences("user", MODE_PRIVATE);
    try {
        userName.setText(sp.getString("username", ""));
        passWord.setText(sp.getString("password", ""));
        rememberMe.setChecked(sp.getBoolean("rememberMe", false));
    } catch (ClassCastException ex) {
    }
}

@Override
protected void onPause() {
    super.onPause();

    SharedPreferences sp = getSharedPreferences("user", MODE_PRIVATE);
    Editor editor = sp.edit();
    if (rememberMe.isChecked()) {
        editor.putString("username", userName.getText().toString());
        editor.putString("password", passWord.getText().toString());
    } else {
        editor.putString("username", "");
        editor.putString("password", "");
    }
    editor.putBoolean("rememberMe", rememberMe.isChecked());
    editor.commit();
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {

            Intent intent = new Intent(LoginActivity.this,
                    PreviewActivity.class);
            intent.putExtra("path", path);
            startActivity(intent);

        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
            Toast.makeText(getApplicationContext(),
                    "User cancelled the image capture", Toast.LENGTH_LONG)
                    .show();
        } else {
            // Image capture failed, advise user
        }
    }
} 
```

我如何在 LoginActivity 中处理它。如何保存进度条的状态以在屏幕定向后继续。

清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.Camera"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <uses-configuration android:configChanges="orientation|keyboardHidden|navigation"/>    
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:debuggable="true">
        <activity
            android:name="com.android.grad.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.android.grad.CameraActivity" >
        </activity>
        <activity
            android:name="com.android.grad.LoginActivity"
            android:configChanges="orientation|keyboardHidden" >
        </activity>
        <activity
            android:name="com.android.grad.PreviewActivity"
             >
        </activity>
        <activity android:name="com.android.grad.BuiltInCamera"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:09:01.693

请放

> android:configChanges="方向|keyboardHidden"

在您想要为方向更改提供支持的活动中。

# java - 谷歌网站管理员工具 API 能否用于自动修复 URL 页面未找到错误？

> ID：11213280
> 
> 赞同：4
> 
> 时间：2012-06-26T18:01:52.507
> 
> 标签：java, api, google-search-console

如果我进入 Google 网站管理员工具，然后单击`Health->Crawl Errors`，我注意到我们的网站有大约 1,045 个未找到错误。

这些错误中的每一个都可以通过以下方式手动修复：

1.  过滤列表以找到需要修复的指定错误，然后单击它。
2.  在结果对话框中单击`Fetch as Google`链接，
3.  点击`Fetch`
4.  最后，单击`submit the index`（前提是还有足够的 fetches 来执行此操作），然后将其标记为`fixed`.

由于要修复大约 1,000 个错误，因此手动执行此操作似乎有点不可能。
*（**注意：**我与它没有任何关系，但该网站在导致错误的内容之前被迁移。）*

我知道可以[检索站点错误列表](https://developers.google.com/webmaster-tools/docs/2.0/developers_guide_java#Crawl_Retrieving)，但这实际上只是成功的一半。我查看了 API，并没有真正找到使用 Webmaster Tools API 将错误标记为已修复的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-27T13:55:52.887

使用此 API 调用完全可以将错误标记为“已修复”：

[https://developers.google.com/webmaster-tools/search-console-api-original/v3/urlcrawlerrorssamples/markAsFixed](https://developers.google.com/webmaster-tools/search-console-api-original/v3/urlcrawlerrorssamples/markAsFixed)

因此，您可以通过以下方式轻松实现自动化……</p>

*   获取抓取错误样本（最多 1000 个）
*   检查给定的 URL
*   通过 API 将工作 URL 标记为已修复

请记住：抓取错误信息大约每天更新一次。因此，如果有超过 1000 个错误并且其中一半被标记为已修复，那么之前不在样本中的新数据可能会在一天过去后出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T20:01:15.007

我不确定您的问题是什么，因为我刚刚成功测试了删除所有错误（在我的情况下为 4 个），只需单击几下即可。如果错误再次出现，您可能需要查看无效 URL 的链接来源：如果是内部链接，则应修复这些链接，如果是外部链接，则应将重定向添加到更新/移动的页面，或者要求外部网站更新其指向您网站的链接。

# c++ - static_cast 之间的区别 (foo) 和primitive_type(foo)

> ID：11213285
> 
> 赞同：11
> 
> 时间：2012-06-26T18:02:10.537
> 
> 标签：c++

> **可能重复：**
> [常规强制转换 vs. static_cast vs. dynamic_cast](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast)
> [在 C++ 中，为什么使用 static_cast<int>(x) 而不是 (int)x？](https://stackoverflow.com/questions/103512/in-c-why-use-static-castintx-instead-of-intx)

`static_cast<float>(foo)`和 和有什么不一样`float(foo)`？我经常`static_cast<float>`在模板代码中看到或类似的从任何整数类型到某些特定的整数类型。例如，假设我想要一个函数来对任何整数类型执行浮点除法。我通常会看到这样的事情：

```
template <typename T>
float float_div(T lhs, T rhs)
{
    // I normally see this
    return static_cast<float>(lhs) / static_cast<float>(rhs);

    // But I could do this
    // return float(lhs) / float(rhs); // But I could do this
} 
```

使用`float(lhs)`or有什么好处`static_cast<float>(lhs)`吗？`float(lhs)`初始化/转换的名称是什么？

# c# - 在linux上用c代码调用c#代码的最佳方法是什么

> ID：11213288
> 
> 赞同：0
> 
> 时间：2012-06-26T18:02:23.740
> 
> 标签：c#, c, linux

我正在做一个项目并且有一个 C# 库，但我需要在 Linux 上用 C 代码调用它。最有效的方法是什么？性能是首要考虑因素。

当然，我可以做一个 C# 服务并使用 TCP 进行通信。但我想知道这是否是最好的方法......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-13T08:14:51.987

[您还可以使用 CoreRT 从 C# 代码创建本机库并从 C 中调用它们。您可以在此处](https://github.com/dotnet/runtimelab/tree/feature/NativeAOT/samples/NativeLibrary)找到示例

编辑：CoreRT 已移至 runtimelab 功能 NativeAOT。更新链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:53:21.520

我认为最标准的解决方案是让您的 C# 服务导出一个“Web 服务”远程 API，然后 C 代码可以通过标准的 Linux Web 服务包访问该 API。实际上，它们支持一种 RPC 形式，但网页对请求和回复进行编码。使用 Web 服务的优点是通用性；您的解决方案将移植到任何平台，并且可以使用任何语言，而不仅仅是 C。

另一种方法是使用来自 Google、Facebook、Twitter 等的新开源软件包之一。许多云供应商正在开源他们的 RPC 基础设施，因为许多客户提出了您的确切问题并需要这些解决方案。这些肯定会在其他方面更快、更强大：它们包括强大的性能可视化工具和各种调试器。微软也有远程方法调用技术。所以这些是一种选择，可能不太通用，但肯定更快。所以你必须问速度对于这条特定的路径有多重要......

底线是您可能可以使用五个软件包。不知道哪个获胜或最好！

# java - 使用 Spring Batch 编写多个文件

> ID：11213294
> 
> 赞同：4
> 
> 时间：2012-06-26T18:02:54.047
> 
> 标签：java, spring, spring-batch

我是 Spring Batch 的新手，我希望能得到一些帮助来解决这种情况：我用 MultiResourceItemReader 读取了一些文件，进行了一些编组工作，在 ItemProcessor 中我收到一个 String 并返回 a `Map<String, List<String>>`，所以我的问题是ItemWriter 我应该迭代 Map 的键，并为它们中的每一个生成一个包含与该键关联的值的新文件，有人可以指出我正确的方向以创建文件吗？
我也在使用 MultiResourceItemWriter 因为我需要生成最多行的文件。
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:39:23.737

好吧，终于找到了解决方案，我对此并不感到兴奋，但它正在工作，我没有更多时间，所以我扩展了 MultiResourceItemWriter 并重新定义了“write”方法，处理地图的元素并编写我自己的文件。万一有人需要它，就在这里。

```
 @Override
    public void write(List items) throws Exception {

        for (Object o : items) {
                 //do some processing here

                 writeFile(anotherObject);
        }

    private void writeFile (AnotherObject anotherObject) throws IOException {
        File file = new File("name.xml");
        boolean restarted = file.exists();
        FileUtils.setUpOutputFile(file, restarted, true, true);

        StringBuffer sb = new StringBuffer();
        sb.append(xStream.toXML(anotherObject));

        FileOutputStream os = new FileOutputStream(file, true);

        BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(os, Charset.forName("UTF-8")));
        bufferedWriter.write(sb.toString());
        bufferedWriter.close();
    } 
```

就是这样，我想相信有一个我不知道的更好的选择，但目前这是我的解决方案。如果有人知道如何增强我的实施，我想知道。

# ios - 如何获取地图叠加层的编程屏幕截图，这是 iOS 中的图像

> ID：11213295
> 
> 赞同：1
> 
> 时间：2012-06-26T18:02:54.930
> 
> 标签：ios, mapkit, mkoverlay

目标：获取带有叠加层（MKOverlayView）以及注释的地图屏幕截图。

我做了什么 ：

我有一个地图视图、叠加视图以及一个注释视图。这一切都由一个控制器处理。

我正在使用 Apple 提供的代码截取屏幕截图

> // 创建一个具有目标大小的图形上下文

```
// On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration

// On iOS prior to 4, fall back to use UIGraphicsBeginImageContext

CGSize imageSize = [[UIScreen mainScreen] bounds].size;

if (NULL != UIGraphicsBeginImageContextWithOptions)
    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
else
    UIGraphicsBeginImageContext(imageSize);

CGContextRef context = UIGraphicsGetCurrentContext();

// Iterate over every window from back to front
for (UIWindow *window in [[UIApplication sharedApplication] windows]) 
{
    if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
    {
        // -renderInContext: renders in the coordinate space of the layer,
        // so we must first apply the layer's geometry to the graphics context
        CGContextSaveGState(context);
        // Center the context around the window's anchor point
        CGContextTranslateCTM(context, [window center].x, [window center].y);
        // Apply the window's transform about the anchor point
        CGContextConcatCTM(context, [window transform]);
        // Offset by the portion of the bounds left of and above the anchor point
        CGContextTranslateCTM(context,
                              -[window bounds].size.width * [[window layer] anchorPoint].x,
                              -[window bounds].size.height * [[window layer] anchorPoint].y);

        // Render the layer hierarchy to the current context
        [[window layer] renderInContext:context];
        //for(self.mapView.overlayView.layer.)
        //[self.mapView.overlayView.layer renderInContext:context];    
        // Restore the context
        CGContextRestoreGState(context);
    }
}

// Retrieve the screenshot image
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

问题是上面这行代码只获取了地图视图和注释视图的截图。覆盖视图不存在。

另外，为了澄清我的叠加视图（MKOverlayView）是一个图像。这不会显示在屏幕截图中。我没有使用过OpenGL。我可以看到作为默认图钉的注释视图，但屏幕截图无法捕获图块。我已经为此工作了很长时间。任何帮助将非常感激！谢谢！

这是我的控制器的样子

->> MY控制器

```
 ->> MKMapViewOBject
         ->> MKMapViewOverlayView
         ->> MKMapOverlay
         ->> MKAnnotation
         ->> MKAnnotationView 
```

那么我的 renderInContext:context 有问题吗？

更多信息 ：

在我的叠加视图中绘制瓷砖的以下代码

```
 UIGraphicsPushContext(context);
NSData* data = //get data

if(data)
{
    UIImage* img = [[UIImage alloc] initWithData:data];
    [img drawInRect:drawRect blendMode:kCGBlendModeNormal alpha:0.4 ];
    [img release];

}

UIGraphicsPopContext(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:26:08.557

问题出在drawMapRect中。当不同线程覆盖地图时，使用不同的 MKMapRect 值调用 drawMapRect。因此，苹果希望您的代码是线程安全的，并且能够与多个不同的可见 MapRect 一起运行。

我现在正在根据给定的 MapRect 创建叠加层，即它的可见部分。

# iphone - 从 UIViewController 访问情节提要

> ID：11213307
> 
> 赞同：0
> 
> 时间：2012-06-26T18:03:28.447
> 
> 标签：iphone, objective-c, ios, ipad, uiviewcontroller

我有一个 UINavigationController 将视图控制器向下推 3 级。我正在尝试从第三个 UIViewController 访问情节提要，但我不能。是否有一种全局方式可以让我从任何 UIViewController 访问情节提要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:05:15.280

您应该能够通过`storyboard`任何视图控制器的属性访问当前情节提要。前任。：

```
self.storyboard; 
```

**编辑**

如果由于`self.storyboard`某种原因未设置，您始终可以通过调用获取情节提要

```
+ (UIStoryboard *)storyboardWithName:(NSString *)name bundle:(NSBundle *)storyboardBundleOrNil 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:35:37.470

怎么样`thirdViewController.navigationController.storyboard`？

# json - 如何获取 JSON 文件以从给定值或参数中获取行位置

> ID：11213308
> 
> 赞同：0
> 
> 时间：2012-06-26T18:03:40.303
> 
> 标签：json, indexing, position, row, indexof

我每天使用 wget 获取几十个 JSON 文件，如下所示：

```
 {
 "results":  [
     {
      "id": "ABC789",
      "title": "Apple",
     },
     {
      "id": "XYZ123",
      "title": "Orange",
     }]
 } 
```

我的目标是在给定一个值或一组值的每个 JSON 文件上找到行的位置（即“XYZ123 位于哪一行？”）。在前面的示例中，ABC789 在第 1 行，XYZ123 在第 2 行，依此类推。

至于现在，我使用 Google Regine 来“快速”可视化（使用文本过滤器选项）XYZ123 所在的位置（第 2 行）。

但是由于为每个文件手动执行此操作需要一段时间，我想知道是否有一种快速有效的方法。

我能做什么以及如何获取和执行请求？提前致谢！FOF0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:08:49.083

在蟒蛇中：

```
import json
#assume json_string = your loaded data
data = json.loads(json_string)
mapped_vals = []
for ent in data:
  mapped_vals.append(ent['id']) 
```

列表中项目的顺序将根据 json 数据进行索引，因为列表是一个有序集合。

在 PHP 中：

```
$data = json_decode($json_string);
$output = array();
foreach($data as $values){
  $output[] = $values->id;
} 
```

同样，PHP 数组的有序特性确保输出将按照索引按原样排序。

如果需要，可以修改任一示例以使用映射字典 (python) 或关联数组 (php)。

您可以将它们调整为将`id`值作为参数的函数，跟踪它们在数组中的距离，并在找到时突破并返回当前索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:36:06.540

哇。我在 10 个月前发布了最初的问题，当时我对 Python 和计算机编程一无所知！

**回答** 但是我去年 12 月学习了基本的 Python，并提出了一个解决方案，不仅可以获取排名，还可以将结果插入 MySQL 数据库：

```
import urllib.request
import json

# Make connection and get the content
response = urllib.request.urlopen(http://whatever.com/search?=ids=1212,125,54,454)
content = response.read()

# Decode Json search results to type dict
json_search = json.loads(content.decode("utf8"))

# Get 'results' key-value pairs to a list
search_data_all = []

for i in json_search['results']:
    search_data_all.append(i)

# Prepare MySQL list with ranking order for each id item

ranks_list_to_mysql = []

for i in range(len(search_data_all)):
    d = {}
    d['id'] = search_data_all[i]['id']
    d['rank'] = i + 1
    ranks_list_to_mysql.append(d) 
```

# c# - 从 C# 以编程方式创建 Excel VBA 代码和按钮

> ID：11213319
> 
> 赞同：5
> 
> 时间：2012-06-26T18:04:17.793
> 
> 标签：c#, excel, export, vba

我正在使用简单的方法，它将我的 DataGridView 保存到 Excel 文档（仅 1 张）中，还添加了 VBA 代码和一个按钮来运行 VBA 代码。

```
public void SaveFile(string filePath)
    {

        Microsoft.Office.Interop.Excel.ApplicationClass ExcelApp = new Microsoft.Office.Interop.Excel.ApplicationClass();
        ExcelApp.Application.Workbooks.Add(Type.Missing);

        //Change  Workbook-properties.
        ExcelApp.Columns.ColumnWidth = 20;

        // Storing header part in Excel.
        for (int i = 1; i < gridData.Columns.Count + 1; i++)
        {
            ExcelApp.Cells[1, i] = gridData.Columns[i - 1].HeaderText;
        }

        //Storing Each row and column value to excel sheet
        for (int row = 0; row < gridData.Rows.Count; row++)
        {
            gridData.Rows[row].Cells[0].Value = "Makro";
            for (int column = 0; column < gridData.Columns.Count; column++)
            {
                ExcelApp.Cells[row + 2, column + 1] = gridData.Rows[row].Cells[column].Value.ToString();
            }
        }

        ExcelApp.ActiveWorkbook.SaveCopyAs(filePath);
        ExcelApp.ActiveWorkbook.Saved = true;
        ExcelApp.Quit();
    } 
```

我只实现了 DataGridView 导出。

**编辑：**感谢乔尔，我可以用适当的语言再次搜索解决方案。我认为[这可能会有所帮助](http://support.microsoft.com/default.aspx?scid=kb;en-us;303872&Product=vcSne)。你会纠正我还是给我一两个关于我应该寻找什么的提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T21:30:05.443

我刚刚写了一个小例子，它向现有工作簿**添加了一个新按钮，然后****添加了一个宏，该宏将在单击该按钮时被调用**。

```
using Excel = Microsoft.Office.Interop.Excel;
using VBIDE = Microsoft.Vbe.Interop;
...

private static void excelAddButtonWithVBA()
{
    Excel.Application xlApp = new Excel.Application();
    Excel.Workbook xlBook = xlApp.Workbooks.Open(@"PATH_TO_EXCEL_FILE");
    Excel.Worksheet wrkSheet = xlBook.Worksheets[1];
    Excel.Range range;

    try
    {
        //set range for insert cell
        range = wrkSheet.get_Range("A1:A1");

        //insert the dropdown into the cell
        Excel.Buttons xlButtons = wrkSheet.Buttons();
        Excel.Button xlButton = xlButtons.Add((double)range.Left, (double)range.Top, (double)range.Width, (double)range.Height);

        //set the name of the new button
        xlButton.Name = "btnDoSomething";
        xlButton.Text = "Click me!";
        xlButton.OnAction = "btnDoSomething_Click";

        buttonMacro(xlButton.Name, xlApp, xlBook, wrkSheet);
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.Message);
    }
    xlApp.Visible = true;
} 
```

在这里我们得到了`buttonMacro(..)`方法

```
private static void buttonMacro(string buttonName, Excel.Application xlApp, Excel.Workbook wrkBook, Excel.Worksheet wrkSheet)
{
    StringBuilder sb;
    VBIDE.VBComponent xlModule;
    VBIDE.VBProject prj;

    prj = wrkBook.VBProject;
    sb = new StringBuilder();

    // build string with module code
    sb.Append("Sub " + buttonName + "_Click()" + "\n");
    sb.Append("\t" + "msgbox \"" + buttonName + "\"\n"); // add your custom vba code here
    sb.Append("End Sub");

    // set an object for the new module to create
    xlModule = wrkBook.VBProject.VBComponents.Add(VBIDE.vbext_ComponentType.vbext_ct_StdModule);

    // add the macro to the spreadsheet
    xlModule.CodeModule.AddFromString(sb.ToString());
} 
```

Found this information within an KB article [**How To Create an Excel Macro by Using Automation from Visual C# .NET**](http://support.microsoft.com/kb/303872/en)

# javascript - 使用 javascript 获取所有文化的列表

> ID：11213320
> 
> 赞同：0
> 
> 时间：2012-06-26T18:04:18.137
> 
> 标签：javascript, html, web

我的应用程序中有一个字段，用户必须在其中输入语言的文化（例如 en-US 或 es-MX）。我想通过使用 jquery 插件添加自动完成来帮助用户选择正确的格式。我需要所有文化名称的列表来完成它。

有没有办法只使用 javascript 来获取所有文化名称的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:13:48.430

将文化代码列表保存在服务器某处的平面文件中（这样您就可以使用 ajax 而无需任何 XSS 问题）。然后用[`$.ajax`](http://api.jquery.com/jQuery.ajax/)或类似的东西加载文件的内容，解析并添加到自动完成插件中。

这是来自快速谷歌搜索[的代码列表的链接](http://msdn.microsoft.com/en-us/library/ms533052%28v=vs.85%29.aspx)

# php - 查询以根据特定日期从数据库中选择数据并计算有多少行？

> ID：11213325
> 
> 赞同：0
> 
> 时间：2012-06-26T18:04:33.273
> 
> 标签：php, mysql, sql

我有 Db 有一年的数据......所以我需要一个查询来根据日期（特别是昨天的）选择数据并计算其中有多少......

请帮忙！

它有一个名称为“created”的列，其中存在所有日期和时间。

使用的代码：

```
//$thirty_reg = mysql_query("SELECT column FROM user WHERE user.date BETWEEN DATE_SUB(NOW(), INTERVAL 30 DAY) AND NOW()");
//$num_thirty=mysql_num_rows($thirty_reg);

//echo $num_thirty; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:06:09.803

```
select  *
from    YourTable
where   date_sub(curdate(), interval 1 day) < DateColumn
        and DateColumn < curdate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:06:22.867

获取结果集：

```
SELECT * FROM table WHERE data_date = DATE_SUB(NOW(), INTERVAL 1 DAY) 
```

要获取行数：

```
SELECT COUNT(*) FROM table WHERE data_date = DATE_SUB(NOW(), INTERVAL 1 DAY) 
```

# c++ - 如何将包含时间的字符串变量转换为 c++ 中的 time_t 类型？

> ID：11213326
> 
> 赞同：45
> 
> 时间：2012-06-26T18:04:47.250
> 
> 标签：c++, time

我有一个字符串变量，其中包含***hh:mm:ss 格式***的时间。如何将其转换为 time_t 类型？例如：字符串 time_details = "16:35:12"

另外，如何比较两个包含时间的变量，以确定哪个是最早的？例如：字符串 curr_time = "18:35:21" 字符串 user_time = "22:45:31"

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-07-30T12:37:57.963

使用 C++11，您现在可以做到

```
struct std::tm tm;
std::istringstream ss("16:35:12");
ss >> std::get_time(&tm, "%H:%M:%S"); // or just %T in this case
std::time_t time = mktime(&tm); 
```

请参阅[std::get_time](http://www.cplusplus.com/reference/iomanip/get_time/)和[strftime](http://www.cplusplus.com/reference/ctime/strftime/)以供参考

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-06-26T18:22:52.263

您可以使用[`strptime(3)`](http://linux.die.net/man/3/strptime)来解析时间，然后[`mktime(3)`](http://linux.die.net/man/3/mktime)将其转换为`time_t`：

```
const char *time_details = "16:35:12";
struct tm tm;
strptime(time_details, "%H:%M:%S", &tm);
time_t t = mktime(&tm);  // t is now your desired time_t 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-26T18:12:52.283

这应该有效：

```
int hh, mm, ss;
struct tm when = {0};

sscanf_s(date, "%d:%d:%d", &hh, &mm, &ss);

when.tm_hour = hh;
when.tm_min = mm;
when.tm_sec = ss;

time_t converted;
converted = mktime(&when); 
```

根据需要进行修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-23T19:20:43.850

这是带有日期和时间的完整 C 实现。

```
 enum DateTimeFormat {
            YearMonthDayDash, // "YYYY-MM-DD hh:mm::ss"
            MonthDayYearDash, // "MM-DD-YYYY hh:mm::ss"
            DayMonthYearDash  // "DD-MM-YYYY hh:mm::ss"
        };

        //Uses specific datetime format and returns the Linux epoch time.
        //Returns 0 on error
        static time_t ParseUnixTimeFromDateTimeString(const std::wstring& date, DateTimeFormat dateTimeFormat)
        {
            int YY, MM, DD, hh, mm, ss;
            struct tm when = { 0 };
            int res;

            if (dateTimeFormat == DateTimeFormat::YearMonthDayDash) {
                res = swscanf_s(date.c_str(), L"%d-%d-%d %d:%d:%d", &YY, &MM, &DD, &hh, &mm, &ss);
            }
            else if (dateTimeFormat == DateTimeFormat::MonthDayYearDash) {
                res = swscanf_s(date.c_str(), L"%d-%d-%d %d:%d:%d", &MM, &DD, &YY, &hh, &mm, &ss);
            }
            else if (dateTimeFormat == DateTimeFormat::DayMonthYearDash) {
                res = swscanf_s(date.c_str(), L"%d-%d-%d %d:%d:%d", &DD, &MM, &YY, &hh, &mm, &ss);
            }
            //In case datetime was in bad format, returns 0.
            if (res == EOF || res == 0) {
                return 0;
            }

            when.tm_year = YY - 1900; //Years from 1900
            when.tm_mon = MM - 1; //0-based
            when.tm_mday = DD; //1 based

            when.tm_hour = hh;
            when.tm_min = mm;
            when.tm_sec = ss;

            //Make sure the daylight savings is same as current timezone.
            time_t now = time(0);
            when.tm_isdst = std::localtime(&now)->tm_isdst;

            //Convert the tm struct to the Linux epoch
            time_t converted;
            converted = mktime(&when);

            return converted;
        } 
```

# javascript - 以编程方式启动 UIWebView 键盘

> ID：11213327
> 
> 赞同：2
> 
> 时间：2012-06-26T18:04:58.293
> 
> 标签：javascript, objective-c, ios, uiwebview, ios5.1

Javascript n00b here，这个问题之前已经被问过，但没有给出直接的答案。

我试图在视图加载时为可编辑的 UIWebView 启动键盘。

到目前为止，我有以下代码

在 index.html 中：

```
 <html>
    <head>
         <script Language="text/javascript">
         function showKeyBoard(){
            document.forms['myform'].elements['mytextfield'].focus();
         }
    </script> 
    </head>

    <body OnLoad="document.myform.mytextfield.focus();">
        <form name="myform">
           <textarea type="text" name="mytextfield" cols="40">Tap here to enter text</textarea>
        </form>
    </body>    
    </html> 
```

在我的视图控制器中，我有：

```
 -(void)viewDidLoad
    {
       [super viewDidLoad];
       [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"]isDirectory:NO]]];
    } 
```

同一个视图控制器也是 webView 的委托，代码如下：

```
 -(void)webViewDidFinishLoad:(UIWebView *)aWebView 
      {
           [aWebView stringByEvaluatingJavaScriptFromString:@"showKeyBoard()"];
      } 
```

我的 java 脚本或 iOS 有什么问题吗？

textarea 对于应用程序来说不是必需的，我只包含它以具有可聚焦的表单元素。

我愿意接受任何可以在视图加载时启动 UIWebView 键盘的解决方案。几周来我一直在努力寻找解决方案，但我无处可去。

编辑：当我使用网络浏览器打开 index.html 时，焦点有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T09:57:59.237

从 iOS 6 开始，您可以设置 [aWebView setKeyboardDisplayRequiresUserAction:NO]。

# java - 在编译时添加/生成方法

> ID：11213328
> 
> 赞同：4
> 
> 时间：2012-06-26T18:05:06.377
> 
> 标签：java, dynamic-code

我目前正在构建一个 API，我将要求许多开发人员使用它。其中大部分都很简单，但有几个 API 调用本质上很复杂，但应该以几乎样板的方式使用。

我想做的是在类中生成样板代码，可能通过标记一些注释，但这些生成的方法在 Eclipse/IntelliJ 中可供开发人员查看。我查看了 Javassist，但不确定运行时性质是否是一件好事。我宁愿采用编译时方法。

如果可能的话，我希望隐藏实现的代码（即我不希望开发人员尝试更改生成方法的代码，因为它们将在重新编译时被覆盖）。

整个过程是为了向开发人员和维护人员隐藏处理的复杂性，并将其仅保留在核心框架代码中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:35:24.347

这个问题有两个部分。首先，您希望在不编写/公开样板实现的情况下使*API*可供开发人员使用。其次，您希望自动生成样板代码。

如果您愿意承认正在使用某些框架，则可以在不生成代码/字节码的情况下执行此操作：

*   对于每个重要的概念，编写一个完全定义 API 的接口。
*   现在编写**不**实现接口但匹配非样板 API 的方法签名的相应类。您可能希望使用命名约定来配对它们。
*   编写一个使用 Java 代理生成接口实现的工厂。代理将尽可能委托给实现。样板代码将直接在实现处理程序中实现。
*   您可能需要各种类型的调用处理程序，在这种情况下，请考虑为这些处理程序制定命名约定
*   如果您不喜欢逻辑和接口之间未经检查的耦合，请提取一个不包含样板 API 的超级接口。
*   使用这些构造的逻辑将通过接口名称请求实例；工厂将知道如何实例化底层逻辑实例和调用处理程序。

另一方面，如果您不希望您的开发人员记住框架的存在，或者您需要样板实现来访问逻辑的内部，那么您需要进行代码生成/字节码操作。

操作本身可以使用自定义类加载器完成，或者在初始类加载期间使用[Java Agents](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/instrument/package-summary.html)完成。但是，您如何使 API 可供开发人员使用？这里有一些想法：

*   使实现类抽象，并声明将生成样板代码的抽象方法。

*   编写样板方法的存根实现（即在方法中什么都不做`void`；在所有其他方法中抛出`RuntimeException`。）用一些注释标记这些方法。

*   做类似于 Google Web Toolkit 所做的事情，并将样板方法声明为`native`. 这类似于标记方法`abstract`，但允许您执行诸如创建类之类的操作`final`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:20:37.083

Java 编译器支持[注释处理](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#processing)。您可以编写[自己的处理器](http://docs.oracle.com/javase/1.5.0/docs/guide/apt/GettingStarted.html#AnnotationProcessor)来生成注释所需的代码。

# objective-c - 从 xcode 中删除“格式化字符串不是字符串文字”警告

> ID：11213331
> 
> 赞同：2
> 
> 时间：2012-06-26T18:05:16.347
> 
> 标签：objective-c, ios, xcode, lldb

当我使用 XCode 时，我（显然）放入了一堆 NSLog 语句来跟踪一些变量和方法执行等。但是，我不断收到这个警告： `Format String is not a string literal (potentially insecure)`. 我明白为什么会出现这种情况，但我也明白这让我心烦意乱，尤其是当我有 20 或 30 条这样的警告时，更难追踪*真正的*错误。特别是因为字符串中的所有内容都是由系统定义的，而不是用户定义的。有什么方法可以禁用此警告吗？这是导致警告的行的示例。

```
NSLog([@"writeInfo " stringByAppendingString:[self saveFilePath:temp]]); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T18:08:07.760

`NSLog`自己接受格式字符串，您不需要内联创建字符串。换句话说，你只需要写：

```
NSLog(@"writeInfo %@", [self saveFilePath:temp]); 
```

# ruby - 如何在 Padrino 中为我的主应用程序使用管理布局？

> ID：11213333
> 
> 赞同：5
> 
> 时间：2012-06-26T18:05:31.743
> 
> 标签：ruby, sinatra, padrino

我有控制器

```
app/controllers/posts.rb 
```

我如何使用管理布局

```
admin/views/layouts/application.haml 
```

?

# javascript - 使用 jQuery 获取表格行值

> ID：11213335
> 
> 赞同：8
> 
> 时间：2012-06-26T18:05:33.333
> 
> 标签：javascript, jquery, html

我正在尝试从 HTML 表格行中获取值。当我单击表行删除按钮时，我想将这些值放在变量上以发送到服务器。我从[这里](http://jsbin.com/ihaqe6)找到了一些看起来像我需要的东西，但是当我为我的场景将它放在一起时，它不起作用。

这是表格 HTML：

```
 <table id='thisTable' class='disptable' style='margin-left:auto;margin-right:auto;'  >
    <tr>

   <th>Fund</th>
   <th>Organization</th>
   <th>Access</th>
   <th>Delete</th>
   </tr>
    <tr>
   <td class='fund'>100000</td><td class='org'>10110</td><td>OWNED</td><td><a  class='delbtn'ref='#'>X</a></td></tr>
   <tr><td class='fund'>100000</td><td class='org'>67130</td><td>OWNED</td><td><a class='delbtn' href='#'>X</a></td></tr>
   <tr><td class='fund'>170252</td><td class='org'>67130</td><td>OWNED</td><td><a class='delbtn' href='#'>X</a></td></tr>
   <tr><td class='fund'>100000</td><td class='org'>67150</td><td>PENDING ACCESS</td><td><a  class='delbtn' href='#'>X</a></td></tr>
   <tr><td class='fund'>100000</td><td class='org'>67120</td><td>PENDING ACCESS</td><td><a class='delbtn' href='#'>X</a>
   </td>
  </tr> 
```

这是jQuery：

```
 var tr = $('#thisTable').find('tr');
        tr.bind('click', function(event) {
            //var values = '';
           // tr.removeClass('row-highlight');
            var tds = $(this).addClass('row-highlight').find('td');

            $.each(tds, function(index, item) {
                values = values + 'td' + (index + 1) + ':' + item.innerHTML + '<br/>';
                alert(values);
            });
            alert(values);

        }); 
```

我究竟做错了什么？我一直在看例子，但我似乎无法完成这项工作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-26T18:14:47.170

尝试这个：

```
jQuery('.delbtn').on('click', function() {
    var $row = jQuery(this).closest('tr');
    var $columns = $row.find('td');

    $columns.addClass('row-highlight');
    var values = "";

    jQuery.each($columns, function(i, item) {
        values = values + 'td' + (i + 1) + ':' + item.innerHTML + '<br/>';
        alert(values);
    });
    console.log(values);
}); 
```

[**演示**](https://jsfiddle.net/beME9/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T18:11:41.317

试试这样的东西：

```
$(document).ready(function(){
    $("#thisTable tr").click(function(){
        $(this).find("td").each(function(){
            alert($(this).html());
        });
    });
});​ 
```

这是一个正在运行的代码：[https ://jsfiddle.net/YhZsW/](https://jsfiddle.net/YhZsW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:16:52.910

[这是一个工作示例](https://jsfiddle.net/hbpDm/1/)。我将代码更改为输出到 div 而不是警报框。你的问题是`item.innerHTML`我相信。我改用 jQuery`html`函数，这似乎解决了这个问题。

```
<table id='thisTable' class='disptable' style='margin-left:auto;margin-right:auto;'  >
    <tr>

   <th>Fund</th>
   <th>Organization</th>
   <th>Access</th>
   <th>Delete</th>
   </tr>
    <tr>
   <td class='fund'>100000</td><td class='org'>10110</td><td>OWNED</td><td><a  class='delbtn'ref='#'>X</a></td></tr>
   <tr><td class='fund'>100000</td><td class='org'>67130</td><td>OWNED</td><td><a class='delbtn' href='#'>X</a></td></tr>
   <tr><td class='fund'>170252</td><td class='org'>67130</td><td>OWNED</td><td><a class='delbtn' href='#'>X</a></td></tr>
   <tr><td class='fund'>100000</td><td class='org'>67150</td><td>PENDING ACCESS</td><td><a  class='delbtn' href='#'>X</a></td></tr>
   <tr><td class='fund'>100000</td><td class='org'>67120</td><td>PENDING ACCESS</td><td><a class='delbtn' href='#'>X</a>
   </td>
  </tr>
</table>
<div id="output"></div>​ 
```

的JavaScript：

```
$('#thisTable tr').on('click', function(event) {    
    var tds = $(this).addClass('row-highlight').find('td');
    var values = '';
    tds.each(function(index, item) {           
        values = values + 'td' + (index + 1) + ':' + $(item).html() + '<br/>';
    });
    $("#output").html(values);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T05:58:57.823

所有元素

```
$('#tabla > tbody  > tr').each(function() {
    $(this).find("td:gt(0)").each(function(){
       alert($(this).html());
       });
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-20T09:29:05.753

```
$(document).ready(function () {
        $("#tbl_Customer tbody tr .companyname").click(function () {

            var comapnyname = $(this).closest(".trclass").find(".companyname").text();
            var CompanyAddress = $(this).closest(".trclass").find(".CompanyAddress").text();
            var CompanyEmail = $(this).closest(".trclass").find(".CompanyEmail").text();
            var CompanyContactNumber = $(this).closest(".trclass").find(".CompanyContactNumber").text();
            var CompanyContactPerson = $(this).closest(".trclass").find(".CompanyContactPerson").text();
           // var clickedCell = $(this);
            alert(comapnyname);
            alert(CompanyAddress);
            alert(CompanyEmail);
            alert(CompanyContactNumber);
            alert(CompanyContactPerson);

            //alert(clickedCell.text());
        });
    }); 
```

# android - Android 应用与 4.0.4 不兼容

> ID：11213339
> 
> 赞同：0
> 
> 时间：2012-06-26T18:05:42.783
> 
> 标签：android, manifest, target

我有一个运行 Cyanogen 9 (4.0.4 ICS) 的三星 Galaxy SII（Sprint 版本 Epic 4G Touch）。屏幕密度为默认值。在市场上，它说我的应用程序与 API 8-16+ 兼容，并支持从小到超大的屏幕。由于某种原因，它仍然与我的手机不兼容。这和我的自定义rom有关吗？或者可能是我正在运行 4.0.4 的事实？所有无法安装的用户似乎也在运行自定义 rom。

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="org.pwnsro.dayz"
android:versionCode="5"
android:versionName="1.0.4" >

<uses-sdk android:minSdkVersion="8"

    android:targetSdkVersion="15" />
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true" >
</supports-screens>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".DayZActivity"
        android:label="@string/app_name"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

还有我的project.properties：

```
target=android-15 
```

*编辑：似乎只有 ICS 上的 AOSP Roms 用户存在兼容性问题。我切换到三星 4.0.4 rom，并且能够从市场上安装它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:30:18.723

您是否碰巧在 android 开发者控制台中将复制保护设置为 ON？看看[这个](http://developer.android.com/guide/google/play/filters.html)页面。

> 要复制保护应用程序，请在为应用程序配置发布选项时将复制保护设置为“开”。Google Play 不会在开发者设备或未发布的设备上显示受版权保护的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:01:43.927

既然你这么说：

> 我切换到三星 4.0.4 rom，并且能够从市场上安装它。

我想问题是/是您的自定义 ROM。您是否尝试过其他自定义 ROM？也许这是特定 ROM 的问题，或者 Google Play 无法将其识别为兼容的 SO。

# asp.net - ASP.net 页面在 IIS 7.5/Server 2008 中崩溃，但在 IIS6/Server 2003 中工作

> ID：11213343
> 
> 赞同：1
> 
> 时间：2012-06-26T18:05:49.693
> 
> 标签：asp.net, .net, iis, iis-7, windows-server-2008

我们最近将我们的服务器从 windows 2003 升级到了 Windows 2008，从 SQL Server 2005 升级到了 SQL Server 2008。该站点正常运行，但有些页面不断崩溃。似乎页面比通常的崩溃花费了更长的时间。

我明白了

```
This webpage is not available
The connection to www.YourSite.com was interrupted. 
```

我在本地机器上有该网站的副本，一切正常。

我从哪说起呢？

托管管道模式设置为经典。我应该将其更改为集成吗？（我的本地机器已将其设置为集成）。

事件查看器每隔几分钟发生一次

来自 WAS 的警告

```
A process serving application pool '186_NewSite' suffered a fatal communication error with the Windows Process Activation Service. The process id was '3832'. The data field contains the error number. 
```

应用程序错误

```
Faulting application name: w3wp.exe, version: 7.5.7600.16385, time stamp: 0x4a5bd0eb
Faulting module name: mscorwks.dll, version: 2.0.50727.4961, time stamp: 0x4d8c149e
Exception code: 0xc0000005
Fault offset: 0x00000000006c2689
Faulting process id: 0x%9
Faulting application start time: 0x%10
Faulting application path: %11
Faulting module path: %12 
```

.Net 运行时错误

```
.NET Runtime version 2.0.50727.4961 - Fatal Execution Engine Error (000007FEF8BD249A) (80131506) 
```

这也经常发生 MSSQLSERVER 错误

```
The client was unable to reuse a session with SPID 52, which had been reset for connection pooling. The failure ID is 29\. This error may have been caused by an earlier operation failing. Check the error logs for failed operations immediately before this error message. 
```

# excel - 基于行号计算的通用公式

> ID：11213346
> 
> 赞同：0
> 
> 时间：2012-06-26T18:05:58.997
> 
> 标签：excel, excel-formula

出于某种原因，我正在计算 (A1/B1)*60....(A./B.)*60.. 到 (An/Bn)*60 的结果 此计算从 A1 B1 位置开始到 An Bn 和结果我想存储在 C1 到 Cn 中。

目前我在coloum C中添加我的公式。由于数字n很大，我想通过快速破解来减少我的工作量。

任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:10:30.873

1）将公式添加到C1

2）用鼠标选中C1并复制

3）不点击电子表格单元格，向下滚动工作表，直到到达您想要公式的最后一行。

4) 按住 shift 并单击 Cn 单元格

5）粘贴

# jquery - 如何解析 JQuery 中“GET”请求返回的 XML 数据

> ID：11213348
> 
> 赞同：2
> 
> 时间：2012-06-26T18:06:08.837
> 
> 标签：jquery, xml, get, xml-parsing

所以我正在为一家小型媒体公司制作“追随者计数器”。我设置了一个获取请求以返回包含关注者数量的 Twitter API XML 文件。我知道获取请求设置正确，因为当我对成功函数进行硬编码时它可以工作。我遇到的问题是无法使用返回的 xml 数据。我需要解析 xml 以获取所需的标签，然后更新我的 $('#followCounter').html。那么我该怎么做。

这是我当前的 jQuery：

```
var url = 'http://api.twitter.com/1/users/show.xml?screen_name=nightoutinc';    
$.get(url, {
dataType: 'xml',
success: function (twitterAPI){ 

var twitter = $(twitterAPI 'follower_count').html();
$('#followCounter').html(twitter);

alert('success');

} 
```

我没有收到任何控制台错误。XML 可以在这里找到：[http ://api.twitter.com/1/users/show.xml?screen_name=nightoutinc](http://api.twitter.com/1/users/show.xml?screen_name=nightoutinc)

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:11:43.750

您需要使用 JSONP 数据类型来进行跨域请求。

`http://api.twitter.com/1/users/show.json?screen_name=nightoutinc&callback=??`

```
var url = 'http://api.twitter.com/1/users/show.json?screen_name=nightoutinc&callback=??';
$.getJSON(url,  function(twitterAPI) {
        console.log(twitterAPI)
        var twitter = twitterAPI.followers_count;
        $('#followCounter').html(twitter);

        alert(twitter);

});​ 
```

**[演示](http://jsfiddle.net/JsyFV/)**

# asp-classic - 如何使用 ASP Classic 进行离线开发检查用户/页面是否连接到 Internet？

> ID：11213351
> 
> 赞同：0
> 
> 时间：2012-06-26T18:06:10.287
> 
> 标签：asp-classic, vbscript

我对这种语言相当熟悉，但这个概念对我来说是个谜。我想检查运行脚本的服务器是否可以访问互联网进行开发，所以假设我是否只是在我自己的服务器上离线工作，除了互联网访问之外我需要的一切。赶上我的漂移？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:58:50.433

您可以尝试像这样 ping 一个站点：（未测试）

```
url = "www.google.com"
Set objWShell = CreateObject("WScript.Shell")
Set objCmd = objWShell.Exec("ping " & url)
strPingResult = objCmd.StdOut.Readall()
set objCmd = nothing 
set objWShell = nothing

strStatus = "offline"

if InStr(strPingResult,"TTL=") > 0 then strStatus = "online"

response.write url & " is " & strStatus

response.write ".<br>" & replace(strPingResult,vbCrLf,"<br>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:55:51.487

不确定我是否理解正确，但您可以使用[Session](http://www.w3schools.com/asp/asp_sessions.asp)对象[/Global.asa](http://www.w3schools.com/asp/asp_globalasa.asp)文件 >`Session_OnStart`并`Session_OnEnd`为此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:13:07.527

查看我在这个非常相似的问题上发布的答案：

[如何在经典asp中检查互联网的可用性？](https://stackoverflow.com/questions/14730440/how-to-check-the-availability-of-internet-in-classic-asp/14766009#14766009)

# ocaml - 绘制自动机的工具

> ID：11213355
> 
> 赞同：2
> 
> 时间：2012-06-26T18:06:20.493
> 
> 标签：ocaml, visualization, graphviz, dot, automaton

我正在做两个自动机的组合（实际上它是一个换能器）。因此，我想直观地表示它来分析它。

哪个是最好的工具/库？

人们建议我使用 dot 和 graphviz。哪个更好？我正在用 OCaml 编写代码。那有什么图书馆可以画吗？

这是我要绘制的示例换能器？

![在此处输入图像描述](../Images/30c34a6e97eb7dc148e494ad641756cb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T19:05:00.403

> 人们建议我使用 dot 和 graphviz。哪个更好？

没有比这*更好*的了- [graphviz](http://www.graphviz.org/)使用[点语言](http://www.graphviz.org/content/dot-language)中的图作为输入（和输出等），并有一个名为的布局命令，用于对有`dot`向图进行布局。

> 我正在用 OCaml 编写代码。那有什么图书馆可以画吗？

我不知道 OCaml，但看起来有[ocamlgraph](http://ocamlgraph.lri.fr/)能够创建点图 - 另请参阅这个[类似的问题](https://stackoverflow.com/q/8999557/63733)。看起来也有适用于某些平台的[graphviz ocaml 扩展。](http://www.graphviz.org/Download_linux_rhel.php)

> 这是我要绘制的示例换能器？

不确定问题是什么，但这张图看起来像是用 graphviz 制作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T19:14:38.837

如果您想要高质量的渲染，我建议生成[点文件](http://en.wikipedia.org/wiki/DOT_language)，然后尝试[dot2tex](http://www.fauskes.net/code/dot2tex/)（虽然从未使用过）生成 PGF/TikZ 以与[LaTeX](http://www.latex-project.org/)一起使用。这里有[几个](http://www.fauskes.net/code/dot2tex/gallery/)TikZ 自动机渲染的例子。

# javascript - jQuery星级评分导致页面滚动

> ID：11213368
> 
> 赞同：0
> 
> 时间：2012-06-26T18:07:03.703
> 
> 标签：javascript, jquery

在我的星级评分上添加按钮后，我遇到了问题。每次当我点击星星时，我的页面都会跳动并滚动到顶部。如何防止这种行为？

我的代码：

```
$(document).ready(function(){
        var rate=null;
        $(".one-star, .two-stars, .three-stars, .four-stars, .five-stars").click(function() {
             rate = $(this).html();
             $("#submit_rating").fadeIn("slow");
             $("#current_rating").width(rate*30);
        });
        $('#submit_rating').click(function(){
                $.ajax({data: ({ action: 'save_rating', rating: rate, listing_id: <?php echo $id; ?>}), success: function() { window.location.href = '<?php echo $this->escape(URL); ?>'; }});
                return false;
        });
    }); 
```

你可以在这里看到我的问题：http: [//duniakita.org/starrating/](http://duniakita.org/starrating/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:11:56.557

您可能需要`e.preventDefault`在`*-stars`点击时使用。

```
$(".one-star, .two-stars, .three-stars, .four-stars, .five-stars").click(function(e) {
    rate = $(this).html();
    $("#submit_rating").fadeIn("slow");
    $("#current_rating").width(rate*30);
    e.preventDefault();
}); 
```

# php - php empty() 或 isset() 检查超过 1 个变量

> ID：11213369
> 
> 赞同：-1
> 
> 时间：2012-06-26T18:07:06.657
> 
> 标签：php

我用

```
if(!empty($_POST['login'])){
} 
```

用于检查登录是否已填充，当我检查 1 个变量时它工作，但当我使用时它不工作

```
if(!empty($_POST['login'],$_POST['password'] )){
} 
```

如何检查 2 个变量，我看到 isset() 也只支持 1 个变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:08:17.350

使用逻辑和操作 ( `&&`) 以及对 的两次调用`empty()`，如下所示：

```
if( !empty( $_POST['login']) && !empty( $_POST['password'])) {
    // $_POST['login'] and $_POST['password'] are both not empty
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:25:56.957

尝试使用这个：

```
function isempty(){ // Function checks if all of the given arguments are empty
    $empty = true;
    $numargs = func_num_args(); // get the number of given Arguments
    $arg_list = func_get_args(); // get the given Arguments

    for ($i = 0; $i < $numargs; $i++) {
        $empty = $empty && empty($arg_list[$i]);                      
    }
    return $empty;
} 
```

你可以这样称呼它：`!isempty($_POST['login'], $_POST['password'])`

我没有测试代码，但它应该没问题

# android - 在 Twitter (Android/Java) 中添加换行符

> ID：11213370
> 
> 赞同：0
> 
> 时间：2012-06-26T18:07:11.057
> 
> 标签：android, twitter, line

我想使用换行符在 Twitter 上发布一些文本。

我在下面的代码中尝试过`\n`或`\r`喜欢，但 Twitter 忽略了这些。

`tweet.setText(" Text1 " + "\n" + "Text2");`

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:11:02.513

尝试`<br />`或`[br /]`。

`<br />`是标准的 html 标签，有时网站和论坛使用`[br /]`.

# wpf - Microsoft Ribbon 的 RibbonWindow 禁用视觉样式

> ID：11213372
> 
> 赞同：1
> 
> 时间：2012-06-26T18:07:23.630
> 
> 标签：wpf, ribbon, ribboncontrolslibrary

我只是尝试使用“RibbonWindow”将我的功能区菜单集成到窗口中。但是现在，如果我启动该程序，它看起来就像是被一种有问题的经典风格所打。

这就是它的样子：http: [//imageshack.us/photo/my-images/594/pfgok.png/](http://imageshack.us/photo/my-images/594/pfgok.png/)

这就是它的样子：http: [//imageshack.us/photo/my-images/840/pfgfail.png/](http://imageshack.us/photo/my-images/840/pfgfail.png/)

为什么会这样？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T11:19:55.050

找到了原因。这是 .Net 4.5 之前的版本中的一个已知缺陷。可在 connect.microsoft.com 上找到详细信息：

[.NET 4.5 WPF RibbonWindow 在 VS2012 中损坏](https://web.archive.org/web/20130621080517/http://connect.microsoft.com:80/VisualStudio/feedback/details/747820/net-4-5-wpf-ribbonwindow-broken-in-vs2012)

这应该在最终版本中修复。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T08:43:29.477

尝试将 Window Class 设置为 RibbonWindow，如示例

# javascript - .NET 商店中的 JavaScript 命名约定

> ID：11213378
> 
> 赞同：0
> 
> 时间：2012-06-26T18:07:36.797
> 
> 标签：javascript, .net, naming, conventions

我对项目架构师的请求有疑问。此人希望我以与 .NET 命名约定相同的方式命名我的所有属性。

我应该努力将 JavaScript 保留为 JavaScript，还是因为我们在 .NET 商店中而让 .NET 命名约定在我们的 JS 上蔓延？

```
//ALL THE RETURN PROPERTY NAMES SHOULD START WITH A CAPITALIZED LETTER - like     MaxItemsPerPage.
return {
    MaxItemsPerPage: _dataModel.pageSize,
    data: _data,
    searchTerm: _searchTerm,
    filterViewModel: _filterModel,
    dataGridViewModel: _dataModel,
    sortOptions: _sortOptions,
    selectedSortOption: _selectedSortOption,
    selectedSortOrder: _selectedSortOrder,
    sortOrders: _sortOrders,
    loading: _loading,
    update: updateData,
    searchResults: _searchResults,
    pageTitle: _pageTitle,
    showSortOpts: _showSortOpts,
    enableSortOpts: _enableSortOpts,
    disableSortOpts: _disableSortOpts,
    showA: _showAscendingOptions,
    showD: _showDescendingOptions,
    selectedSearchTemplate: _selectedSearchTemplate,
    searchListTemplateOptions: _searchListTemplates
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:11:25.357

Javascript 代码应遵循 Javascript 约定，包括命名约定。

如果您尝试像编写 C# 或 VB 代码一样编写 Javascript，那么您最终会得到糟糕的 Javascript。编写好的代码意味着为您使用的每种语言编写好的*惯用*代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:20:45.717

就个人而言，我更喜欢纯 JavaScript 代码中的骆驼大小写和纯 C# 属性的帕斯卡大小写。

但是，当您通过 JSON 将 C# 类序列化为 JavaScript，或模型绑定最初作为 JavaScript 对象的发布值时，界限会变得模糊。建筑师说“我们应该始终如一地做一个或另一个”是一个完全正确的担忧。走哪条路取决于很多事情。当物体越过边界并且你必须选择时，问问自己：

外部各方是否依赖于您发布的合约/JavaScript 对象，还是纯粹是内部的？

JavaScript 是用于轻量级的 jQuery 行为还是用于重要的业务问题？你对你的 JavaScript 进行单元测试吗？

你在 C# 中经常使用序列化的类吗？贯穿许多业务层，还是单元测试？

对于存在于 C#/JS 合约两端的对象，C# 中的 % 代码和 JS 中的 % 是什么？

# backbone.js - 如何使用backbonejs在单个视图中处理多个视图

> ID：11213380
> 
> 赞同：4
> 
> 时间：2012-06-26T18:07:37.077
> 
> 标签：backbone.js

我是 Backbone 的新手，我还没有完全理解它，而且我遇到了一种我找不到任何文档的情况。如果我有一个包含多个视图的视图怎么办？例如，我有一个名为`StackView`. 此视图的目的是整齐地布置一组卡片。它管理在堆栈中添加、移除和调整卡片的动画。每张卡都是一个`CardView`。我将如何处理？我见过人们通过简单地在视图中创建一个变量并将 View 实例分配给该变量来谈论视图中的视图。我应该只是`CardView`在 a 的变量中添加一个 s数组`StackView`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:30:35.800

这就是我所做的，而且效果很好。这是我在应用程序中使用的视图片段。我已经从我的咖啡脚本将它重新写回了常规的 javascript，所以我对任何错别字表示歉意：

```
render: function() {
  var _this = this;
  this.$el.html(this.template());

  this.listItemViews = [];

  // for each model in the collection, create a new sub-view and add
  // it to the parent view
  this.collection.each(function(model){
    var view = new App.Views.Projects.ListItem({model:model}); // create the new sub-view
    _this.listItemViews.push(view); // add it to the array
    _this.$('#project-table tbody').append(view.render().$el); // append its rendered element to the parent view's DOM
  });
  return this;
} 
```

这让我的表视图保持对所有视图的引用`listItemView`。

当然，如果你这样做，你应该确保正确移除这些子视图，并在移除父视图时取消绑定任何事件。

# android - 来自不同项目的异常投射

> ID：11213384
> 
> 赞同：0
> 
> 时间：2012-06-26T18:07:48.543
> 
> 标签：android, eclipse

嘿，这是我遇到过的最奇怪的问题，我有 2 个项目在不同的项目中完全相同，每个项目具有不同的包名称。

现在我正在尝试运行第二个项目并且我得到一个 NullPointerException 并且当我按下错误以将我发送到代码行时，它会加载相同的活动但在不同的项目中。

知道为什么会这样吗？

这是我的清单：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="shibby.koteret"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8"  android:targetSdkVersion="8" />
     <uses-permission android:name="android.permission.CAMERA"></uses-permission>
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
     <uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        <activity
            android:name=".TenKoteretActivity"
            android:label="@string/app_name" 
            android:configChanges="keyboardHidden|orientation"
            >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:label="@string/chosen_image" android:name="selectedImageActivity"
             android:configChanges="keyboardHidden|orientation"
             android:screenOrientation="portrait"
             />
         <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

         </application>

</manifest> 
```

除了包名称和主要活动名称之外，这在两个项目中完全相同。

这是日志猫：

```
 06-26 21:02:38.324: E/AndroidRuntime(5237): FATAL EXCEPTION: main
06-26 21:02:38.324: E/AndroidRuntime(5237): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1886, result=-1, data=Intent { dat=content://media/external/images/media/45 }} to activity {shibby.koteret/shibby.koteret.selectedImageActivity}: java.lang.NullPointerException
06-26 21:02:38.324: E/AndroidRuntime(5237):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at android.app.ActivityThread.access$2000(ActivityThread.java:117)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at android.os.Looper.loop(Looper.java:123)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at android.app.ActivityThread.main(ActivityThread.java:3687)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at java.lang.reflect.Method.invokeNative(Native Method)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at java.lang.reflect.Method.invoke(Method.java:507)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at dalvik.system.NativeStart.main(Native Method)
06-26 21:02:38.324: E/AndroidRuntime(5237): Caused by: java.lang.NullPointerException
06-26 21:02:38.324: E/AndroidRuntime(5237):     at shibby.koteret.selectedImageActivity.onActivityResult(selectedImageActivity.java:196)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at android.app.Activity.dispatchActivityResult(Activity.java:3908)
06-26 21:02:38.324: E/AndroidRuntime(5237):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
06-26 21:02:38.324: E/AndroidRuntime(5237):     ... 11 more 
```

我不认为这是相关的，但正如所问的那样，这是相关的 Java 代码（setContentView 上的错误）：

```
 setContentView(R.layout.chosen_image);
    ImageView imageView = (ImageView)this.findViewById(R.id.chosenImage2);
    imageView.setImageBitmap(bitmap); 
```

我检查过的内容：

*   第二个项目将活动打包到写项目
*   我没有从第一个项目包中导入任何东西

这可能只是一个 Eclipse 错误吗？有人见过这样的问题吗？

我在想，由于错误在 XML 文件上，它可能与 R 有某种关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:20:44.493

好吧，对我有用的是我关闭了第一个项目，然后 Eclipse 将我发送到正确的 NullPointerException。

仍然不知道为什么会发生这种情况，但这对我有用。

# clojure - 在 clojure-xml/parse 的上下文中，什么是 InputStream？

> ID：11213387
> 
> 赞同：1
> 
> 时间：2012-06-26T18:08:10.827
> 
> 标签：clojure, xml-parsing, inputstream

在 clojure-xml 文档的上下文中，我无法弄清楚 InputStream 是什么。[clojure-xml 文档](http://clojure.github.com/clojure/clojure.xml-api.html)将clojure-xml/parse 的输入列为“文件、输入流或字符串命名 URL”。

我试过：

```
(defn open-file
    "Attempts to open a file and complains if the file is not present."

    [file-name]
        (let [file-data (try 
                            (slurp file-name)
                            (catch Exception e))]
            file-data))

(clojure-xml/parse (utl/open-file "test.xml")) 
```

并收到此错误：

```
FileNotFoundException /home/cnorton/projects/clojure/xml-lib/< 
(No such file or directory)  java.io.FileInputStream.open 
(FileInputStream.java:-2) 
```

但这有效：

```
(clojure-xml/parse "test.xml") 
```

为什么不将 InputStream 视为打开文件的结果？因此，在这种情况下，什么是 InputStream？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:50:20.463

InputStream 指的是[java.io.InputStream](http://www.google.at/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CGYQFjAB&url=http%3A%2F%2Fdocs.oracle.com%2Fjavase%2F6%2Fdocs%2Fapi%2Fjava%2Fio%2FInputStream.html&ei=zQPqT5yuJ8j64QTM94X2Dw&usg=AFQjCNE9HjFCvmnjBtfXtqdhUuS6GrIGig&sig2=GMNwG-5bFFedFVV3wrhS5g)。在 Clojure 中获得一个的最简单方法是使用 [clojure.java.io/input-stream](http://clojure.github.com/clojure/clojure.java.io-api.html#clojure.java.io/input-stream)。

clojure.xml/parse 应该接受 clojure.java.io/input-stream 可以接受的任何内容。例子：

```
(require '[clojure.xml :as xml])
(require '[clojure.java.io :as io])

(xml/parse "/Users/bsmith/.m2/settings.xml")
(xml/parse (io/input-stream "/Users/bsmith/.m2/settings.xml")) 
```

* * *

“/Users/bsmith/.m2/settings.xml”和“文件名”的区别：

“/Users/bsmith/.m2/settings.xml”是一个字符串，它（发生）指定我的文件系统上文件的（绝对）路径。然而，在 Java 世界中，类 java.io.File 是表示文件路径的惯用方式。clojure.java.io 不在乎，它会接受 String 命名文件或 java.io.File 命名文件。

您在最初的帖子中收到的错误消息是因为您首先使用 slurp 将 XML 加载到字符串中。（这不是一个好主意，因为 XML 带有它自己的编码，而 slurp 无法解释。）无论如何，您随后传递了字符串，clojure.java.io 最终尝试将XML的*实际内容*解释为一个文件路径，这显然是行不通的。

# php - PHP分页：is_dir在循环readdir时截断图像

> ID：11213388
> 
> 赞同：1
> 
> 时间：2012-06-26T18:08:17.313
> 
> 标签：php

我刚刚在我的网站上进行了分页，但我想使用一个接受路径而不是资源的缩略图脚本。这与我的分页方式冲突 - 使用 readdir 扫描资源。

现在我正在实现一个我在网上找到的跳过模式来跟踪图像及其相应的页码：

```
while ( $count <= $skip && ($file = readdir($handle)) !== false ) {
            if ( !is_dir($file))
                $count++;
        }

        $count = 0; 
```

所以，

问题 1) 此方法在运行后设置 $count = 0，所以我看不出它对脚本的其余部分有何用处。

问题2）这部分实际上根据页码在页面上显示正确的图像。我设置了 $imagesPerPage = 4，所以 4 应该显示在所有页面上。但是，由于我正在执行 !is_dir 检查，它会截断前两项（即目录 . 和 ..），但不会用实际图像重新填充这些位置（因为除了最后一页之外的所有页面都应该有 4 个图像他们...）

```
while ( $count++ < $imagesPerPage && ($file = readdir($handle)) !== false ) {
            if(!is_dir($file)) {
            $image = $imagePath . $file;
        ?>
            <a href="../templates/viewComic.php?image=<?php echo $image ?>"><img src="../scripts/thumbnailer2.php?img=<?php echo $image ?>" /></a>  

        <?php
            }   
        } 
```

![在此处输入图像描述](../Images/880a82fc975155e934378e432be71bef.png)

问题 3) 如何让页面从 1 而不是 0 开始？

任何有助于理解的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:43:11.407

1) 当 While 完成时，这会将 $count 重置为 0。

2）如果它不是目录，您只想增加 $count 。您应该将它放在 if(!is_dir($file)) 部分中。

3) 将 $count 初始化为 1 而不是 0。

# javascript - 检查sencha中的项目图标

> ID：11213392
> 
> 赞同：1
> 
> 时间：2012-06-26T18:08:32.600
> 
> 标签：javascript, extjs

我是 Extjs 和 Sencha 的新手。我开始设计我的 UI，我可以成功地添加一个带有按钮的 iconCls。现在我需要将图标添加到检查项菜单[http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.menu.CheckItem](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/api/Ext.menu.CheckItem)

但我不能！即使我使用 iconCls 属性。以前有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:27:19.703

如果您只想要文本旁边的图标，则可以在呈现菜单项后插入图像

```
Ext.create('Ext.menu.Menu', {
    width: 100,
    height: 200,
    floating: false, 
    renderTo: Ext.getBody(), 
    items: [{
        xtype: 'menucheckitem',
        text: 'select all',
        listeners: {
            render: function(comp) {
                Ext.DomHelper.insertAfter(comp.getEl().down(".x-menu-item-icon"), {
                    tag: 'img', 
                    src: "http://flyosity.com/images/_blogentries/networkicon/stepfinal2.png",
                    width: 16,
                    height: 16
                });
            }            
        }
    }]
}); 
```

理想情况下，您会创建一个插件或子类，以便可以重用此功能。上面的代码没有重新对齐分隔符，它是整个菜单的单个分隔符，但它应该给你一个良好的开端

# vim - 如何阅读 Vim “keybinding”（键盘快捷键？），“ "？如何阅读其他 Vim 文档？

> ID：11213393
> 
> 赞同：-2
> 
> 时间：2012-06-26T18:08:38.917
> 
> 标签：vim

如何阅读以下 Vim 键绑定：

`<C-f>`
`ZZ`
`dd`
`:wq`

如何阅读其他 Vim 文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:12:58.210

带有 <C-letter> 的东西是 control+letter。

ZZ 只是两个大写的 Z；dd 两个小写的 d。

:wq 是一个冒号，后跟（你猜对了）w 和 q。

键入 :help 或在 vim 中按 F1 以查找您的文档，或在线查看[vim 文档](http://www.vim.org/docs.php)。

你最好的选择是首先进入 vim 并禁用你的箭头键。看看实现一个 .vimrc ......你可以有很多。有时元编程比编程本身更有趣！

# php - 使用 PHP，分块加载优惠券交易

> ID：11213401
> 
> 赞同：1
> 
> 时间：2012-06-26T18:09:05.157
> 
> 标签：php, loops

我正在处理的一个站点获取表格数据，计算该表格数据并使用标准循环来显示它。这是一些代码：

```
<?php
  $output='';   
  $count=count($deal_datas);
  $face_value="";
  $deal_price="";
  //var_dump(400*20/100);
  $save_value='';       
  $save_value_present='';   
  $category_name='';    
  $cat_ids=array();
  $deal_link='';
  $address_array=array();
  $address='';
  $website_name=''; 
  $website_data=array();

  if($count!=0) {
    for($i=0;$i<$count;$i++) {
      $website_data=get_single_row("web_sites",array("id"=>$deal_datas[$i]->site_id));

      if(count($website_data)!=0) {
        $website_name=$website_data[0]->name;
      }

      $address_array=array();
      $cat_ids=explode(",",$deal_datas[$i]->sub_category_ids);

      if(count($cat_ids)!=0) {
        $where_class=array("id"=>$cat_ids[0]);
        $category_names=get_single_row("sub_category",$where_class);

        if(count($category_names)!=0) {
          $category_name=$category_names[0]->name;
        } else {
          $category_name="All";
        }
      } else {
        $category_name="All";
      }

      $face_value=str_replace("USD","",$deal_datas[$i]->deal_face_value);
      $face_value=str_replace("$","",$face_value);
      $face_value=(int)str_replace(",","",$face_value);
      $save_value_present=(int)str_replace("%","",$deal_datas[$i]->deal_save_percent);

      if($deal_datas[$i]->deal_price!="") {
        $deal_price=str_replace("USD","",$deal_datas[$i]->deal_price);
        $deal_price=(int)str_replace("$","",$deal_price);
        $save_value=$deal_price;
      } else {
        $save_value=$face_value*$save_value_present/100;
      }

      $time_zone_utc=$deal_datas[$i]->deal_oe_end_date;
      $end_date=$time_zone_utc;

      if($website_name!="kgbdeals") {
        $deal_link=base_url()."deals/iframe/".$deal_datas[$i]->slug;
      } else {
        $deal_link=$deal_datas[$i]->deal_link;
      }

      if($deal_datas[$i]->deal_address==0 or $deal_datas[$i]->deal_zip_code==0) {
        $deal_datas[$i]->deal_address="";
        $deal_datas[$i]->deal_zip_code="";
      }

      if($deal_datas[$i]->deal_zip_code!="") {
        $address_array[]=$deal_datas[$i]->deal_zip_code;
  }

      if($deal_datas[$i]->deal_address!="") {
        $address_array[]=$deal_datas[$i]->deal_address;
      }

      $address=implode(" ",$address_array);

      if($deal_datas[$i]->deal_city!="") {
        if(empty($address_array)) {
          $address.=$deal_datas[$i]->deal_city;
        } else {    
          $address.=" - ".$deal_datas[$i]->deal_city;   
        }

        //Check for valid image
        $deal_image=base_url().'uploads/deals/'.$deal_datas[$i]->slug.'.jpg';

        if(getimagesize($deal_image)) {
          $valid_image=1;
        } else {
          $valid_image=0;
        }

        if($i%2==0) {
          $output.='<div class="clsDeal_Whole_Cont clearfix"> 
```

然后它输出数据列表等。问题是，有时数据有时是 120 个条目，它们放置在屏幕上并且加载需要很长时间。

我想要做的是一次显示数据 4 或 8 个条目。然后，随着用户滚动，添加更多内容。

或者 - 加载 4\. 显示它们。然后再加载4个，显示它们。依此类推，这样用户实际上可以查看内容，而不是等待整个列表（如果这更简单的话）。那可能吗？

我没有为此使用 jquery，尽管我知道我需要整个向下滚动位。那么，有没有办法重写上面的 php 以显示 4 块，直到达到最终结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:33:47.167

您在这里有几个问题，首先是您如何提出问题。请务必包含*所有*相关*代码*。你有一个截断的代码清单，它不能解决手头的问题；如何将一长串数据分解为人类可读的格式。您没有描述如何获取初始数据`$deals_data`。如何格式化输出的实现细节与这个问题无关。此外，您的代码有点混乱，不遵循[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

您应该将数据选择和显示功能放入单个函数中：

```
//returns n through z rows of data. If '0' is provided for finish, returns all rows
function getData($start=0, $finish=0 {
  $data = array();
  if ($finish == 0) {
    //get all data
  } else {
    //get limited amount of data
  }
  return $data;      
}

//returns first $limit rows of data as an html-encoded output string
function displayDeals($deal_data, $limit) {
  ...
} 
```

该函数应该为每一行调用一个单独的函数：

```
//Returns a string of html-encoded data for one row
function displayRow($row_data) {
  ...
} 
```

此`displayRow`函数将被调用`$limit`次数`displayDeals`。一旦你开始工作，使用 AJAX 进行无限滚动就会变得更加简单。您只需创建一个 php 函数：

```
function getMoreRows($start, $numberOfRows) {
  $data = getData($start, $start+$numberOfRows);
  $output = displayDeals($data, $numberOfRows);
  return $ouput;
} 
```

这会将输出返回到调用 php 代码的 AJAX 函数。因为它被编码为 HTML，所以您只需将任何可用的 div 替换为该新字符串。

请注意，JQuery 将使此 AJAX 变得简单，但您将需要*一些*javascript 才能使其正常工作，否则每次都要对新的 php 页面进行长时间的往返调用。后者很简单，但避免了使用户界面平滑和像你想要的那样延迟加载。方法如下：

```
$.ajax({ url: '/my/site',
         data: {action: 'getMoreData'},
         type: 'post',
         success: function(output) {
                      //replace your div with new data
                  }
}); 
```

在服务器端，您需要一个 php 页面来处理请求：

```
if(isset($_POST['action']) && !empty($_POST['action'])) {
    $action = $_POST['action'];
    switch($action) {
        case 'getMoreData' : getMoreRows($_POST['lastDataIndex'], $_POST['numberOfRowsToFetch']);break;
        // ...etc...
    }
} 
```

作为一个关于风格的小后记：关于括号，你应该谨慎混合 if 和 if-else 风格。通常，您希望您的代码紧凑且快速可读，并且您希望永远不要怀疑代码是否在一个块中。就个人而言，我总是在 if 和 if-else 中使用方括号，但你应该避免在 if 语句中使用方括号，至少不要在 else 情况下使用方括号。注意人类的可读性，否则你会发现随机出现的错误会让你感到沮丧，因为你假设一个东西在或不在一个块中，而事实恰恰相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:20:31.000

在我看来，表面上，您想对数据进行分页。这很容易做到。只需在页面上有下一个和上一个按钮，它们是动态生成的，以链接到列表中的偏移量（即 page?offset = 4，page?offset = 8）。然后只需在每个页面上加载四个项目（offset+1、offset+2、offset+3 和 offset+4）。

# cassandra - 在查询多个索引列时，cassandra 可以使用多个本机二级索引吗？

> ID：11213403
> 
> 赞同：1
> 
> 时间：2012-06-26T18:09:06.217
> 
> 标签：cassandra

在查询多个索引列时，cassandra 可以使用多个本机二级索引吗？

[使用来自http://www.datastax.com/dev/blog/whats-new-cassandra-07-secondary-indexes](http://www.datastax.com/dev/blog/whats-new-cassandra-07-secondary-indexes)的规范示例

假设 users 列族在出生日期和状态上都有索引：

```
create column family users with comparator=UTF8Type
  and column_metadata=[{column_name: full_name, validation_class: UTF8Type},
  {column_name: birth_date, validation_class: LongType, index_type: KEYS},
  {column_name: state, validation_class: UTF8Type, index_type: KEYS}]; 
```

当我查询时：

```
get users where state = 'UT' and birth_date = 1970; 
```

cassandra 是否使用两个索引来获取行？

基于[Apache Cassandra 中的复合索引，](https://stackoverflow.com/questions/4558269/compound-indexes-in-apache-cassandra)答案似乎是否定的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:05:58.053

您提供的链接是正确的；Cassandra 将选择最具选择性的索引并使用嵌套循环来评估其他谓词。

# ruby-on-rails-3 - 循环内的一个按钮 (mass_assignt)

> ID：11213407
> 
> 赞同：0
> 
> 时间：2012-06-26T18:09:14.110
> 
> 标签：ruby-on-rails-3

我有一个表格，它有循环，如下所示。

我的目标：

```
text   | checkbox |
text2  | checkbox |
text3  | checkbox |
text4  | checkbox |
______
button
------ 
```

如果我点击按钮，如果我当然选择复选框，我的表格就会改变。所以它的一种形式的一个按钮有一个循环。

问题：

只有最后一个粘贴成功，（不知道为什么）例如，如果我更改了最后一项，这没关系，但是当我更改第一个、第二个和最后一个时，我只在最后一个中得到更改:(

我认为没有看到我的循环:(

我的节目视图

```
<%= form_for :task, :url => { :controller => :tasks, :action => :update } do |f| %>

  <% @tasks.each_with_index do |task, index| %>

    <%= f.fields_for task do |task_form| %>

      <%= task_form.text_field :task %>  | <%= task_form.check_box :is_active %>  <%= task_form.hidden_field :id %>

    <% end %>

  <% end %>

  <br/><br/>

  <%= f.submit 'Update' %>

<% end %> 
```

我的控制器：

```
 def show

    @tasks=Task.find(:all)

  end

  def update

    tasks=Task.find(:all, :conditions => ["id=?", params[:task][:id]])

    tasks.each do |task|

    task.task=params[:task][:task]
    task.save

    end
 end 
```

那就是我得到的错误：

```
{"utf8"=>"✓",
 "authenticity_token"=>"vn0DUQhRa2zBguCFRf/fY/cYnzKYAkio0MwDUd4/mC8=",
 "task"=>{"task"=>{"task"=>"dlaj testa!",
 "is_active"=>"1",
 "id"=>"11"}},
 "commit"=>"Update"}

undefined method `each' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:31:16.650

我相信这是说这`tasks.each do |task|`就是原因。`tasks`是 nil，你在上面定义的。

代替

```
tasks=Task.find(:all, :conditions => ["id=?", params[:task][:id]]) 
```

我可能会把它写成：

```
tasks = Task.where(id: params[:task][:id]) 
```

这将返回所有任务的数组，即使它是一个空数组。

然后调用`.each`不应该失败，因为它是空的。

# prototypejs - Prototype 中先前和当前选定的选项

> ID：11213410
> 
> 赞同：1
> 
> 时间：2012-06-26T18:09:24.687
> 
> 标签：prototypejs, option

如何从`<select>`原型中获取先前选择的选项，以便在脚本中出现任何故障时“回滚”选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:17:48.727

您不能直接使用原型执行此操作，但这是一个处理“可回滚”选择的类：

```
var UndoableSelect = Class.create({
    _$select: null,
    _selectedValue : null,
    _lastSelectedValue: null,
    initialize: function(elementOrId)
    {
        this._$select = $(elementOrId);
        this._lastSelectedIndex = this._$select.selectedIndex;
        this._selectedIndex = this._lastSelectedIndex;
        this._$select.observe('change', this._changeHandler.bind(this));
    },
    undoLastSelection: function()
    {
        this._$select.selectedIndex = this._lastSlectedIndex;
        this._selectedIndex = this._lastSelectedIndex;
    },
    _changeHandler: function(event)
    {
        this._lastSelectedIndex = this._selectedIndex;
        this._selectedIndex = this._$select.selectIndex;
    }
}); 
```

你可以这样使用：

```
// this one line under has to be called only once per page load (where there is the select of course):
var theSelect = new UndoableSelect('id_of_the_select');
$('id_of_the_select').observe('change', function(event)
{
    // your code, if you need to rollback, do this:
    theSelect.undoSelection();
}); 
```

抱歉没有太多解释，但我现在没有太多时间。我只是在没有测试的情况下编写了代码，所以如果有任何问题让我知道，我会花更多时间来修复它;-)

# serialization - 如何使用实体管理器管理反序列化实体？

> ID：11213411
> 
> 赞同：2
> 
> 时间：2012-06-26T18:09:25.920
> 
> 标签：serialization, symfony, doctrine-orm, deserialization

我正在使用 JMSSerializerBundle 将我的实体序列化为 json 并将 json 反序列化为实体，但我认为这个问题适用于任何反序列化技术。

例如，此架构：

```
class Order
{
    private $id;

    /**
     * @Serializer\Type("ArrayCollection<MyBundle\Entity\Order\Item>")
     * @ORM\OneToMany(targetEntity="\MyBundle\Entity\Order\Item", mappedBy="order", cascade={"persist"})
     */
    private $items;
}

class Item
{

    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="\MyBundle\Entity\Order", inversedBy="items")
     */
    private $order;

    /**
     * @var integer $amount
     * @Serializer\Type("integer")
     * @ORM\Column(name="amount", type="integer")
     */
    private $amount;

} 
```

映射到这个 json:`{"id":1,"items":[{"id":1,"amount":100}, {"id":2,"amount":200}]}`并且相同的 json 被正确反序列化为**MyBundle:Order**类型的对象，该对象具有两个**MyBundle:Order/Item**对象的集合。

问题是，当我尝试持久化此对象时，会在数据库中创建新条目，而不是更新现有条目，而忽略 id。我如何告诉实体管理器这些对象应该更新，而不是创建？

**更新**。通常 EntityManager::merge 解决方案（如 DaveM 建议的那样）很好。但您只能合并现有对象。例如，如果您有一个 json 表示一个新的 Order 实体，该实体连接到现有的 Order\Item 实体

> {"id":null,"items":[{"id":1,"amount":100}, {"id":2,"amount":200}]}

在这种情况下，您不能像这样合并 Order 对象： `$em->merge($order)`因为 order 是一个新实体，并且实体管理器将尝试查找 id = null 的 Order 对象，您最终将得到一个新的 Order 和空 items 数组。所以解决方案是循环 Order::$items 数组并单独合并每个项目。然后将创建一个新订单并将其与现有项目连接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T19:11:11.650

您需要使用as 合并实体`merge()`上的方法`EntityManager`是指将实体合并到 EntityManager 的上下文中，以便它们可以再次被管理。为了将实体的状态合并到 EntityManager 中，请使用 EntityManager#merge($entity) 方法。传递的实体的状态将被合并到该实体的托管副本中，该副本随后将被返回。

```
$detachedEntity = unserialize($serializedEntity); 
$entity = $em->merge($detachedEntity); 
```

另外请务必注意，当您想要序列化/反序列化实体时，您必须保护所有实体属性，而不是私有的。这样做的原因是，如果你序列化一个之前是代理实例的类，私有变量将不会被序列化，并且会抛出 PHP 通知。

更多信息可以在此处的学说文档中找到：

[http://doctrine-orm.readthedocs.org/en/2.0.x/reference/working-with-objects.html#merging-entities](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/working-with-objects.html#merging-entities)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-23T21:22:29.207

我知道这个问题已经存在三年了，但它误导我认为唯一的答案是使用合并操作。我想加两分钱：

JMSSerializerBundle 包含一个用于 Doctrine 实体的对象构造函数。当您启用此构造函数时，反序列化的实体是可以持久化的托管实体（使用`$em->persist($entity)`）。

请查看[此评论](https://stackoverflow.com/a/16531025/1608179)以了解其他好处。[以下](http://jmsyst.com/bundles/JMSSerializerBundle/master/configuration#changing-the-object-constructor)是启用它的方法。

# jquery - 如何将 jQuery UI 对话框包装在 div 容器中？

> ID：11213412
> 
> 赞同：1
> 
> 时间：2012-06-26T18:09:33.550
> 
> 标签：jquery, jquery-ui

我的 web portlet 正在部署到 liferay 环境，这意味着有多个 jQuery css 主题。我一直在解决多主题问题的方法是用我自己的类包装我的 portlet，并将该类作为容器添加到 jquery-ui css（例如，使用`.my-portlet .ui-dialog {}`）。

但是，当我使用 jQuery UI 创建对话框时，对话框容器被赋予了 class `.ui-dialog`，因此主题变成了 liferay 使用的任何主题。我的解决方案是在我自己的 div 中使用“my-portlet”类包装对话框，这应该会导致它使用我自己的 ui 主题。

我该怎么做呢？Using`$(#item).dialog()`自动将`ui-dialog`类应用为头容器。我真的不想修改 jQuery 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-28T09:10:41.830

如果您没有需要移动到不同包装器的不同对话框，那么您可以简单地使用

```
$('.ui-dialog').appendTo('#wrapper'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T12:07:44.403

您可以使用**appendTo**但您必须拥有 jquery-ui 1.10.0 或更高版本

```
$( ".selector" ).dialog({ appendTo: "#someElem" }); 
```

检查 jquery-ui 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:11:49.680

在 jQueryUI 1.10 之前，所有对话框都自动包装在一个`<div>`容器中，然后移动到 DOM*主体*元素中。

如果您希望它位于 DOM 中的其他位置，则必须在另一个元素中重新设置它的父级。为了使事情进一步复杂化，您还必须重置其`draggable`属性：

```
var dlg = $('#item').data('dialog').uiDialog;
$(dlg).appendTo('#newparent');
$(dlg).draggable('option', 'containment', 'parent'); 
```

我怀疑这种方法对您没有帮助，但如果您的意图是在 jQuery UI 提供的容器周围包装一个额外的容器 div。

或者，您*可以*在创建对话框时使用该[`dialogClass`](http://jqueryui.com/demos/dialog/#option-dialogClass)选项向对话框容器添加额外的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T18:15:24.683

如果你尝试这样的事情怎么办？

```
$('#item').dialog().wrapAll('<div class="my-portlet"></div>'); 
```

# r - R中的时间数据值

> ID：11213414
> 
> 赞同：1
> 
> 时间：2012-06-26T17:47:30.537
> 
> 标签：r

如何在 R 中有一个只有时间间隔（无日期）的数据集，如下所示：

`TREATMENT_A TREATMENT_B`

`1:01:12 0:05:00`

`0:34:56 1:08:09`

并计算平均时间等，并在 y 轴上绘制具有时间间隔的箱线图？

我是 R 新手，我搜索了这个，但在网上没有找到示例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:14:00.100

chron-package 有一个支持算术的 'times' 类。您还可以使用 POSIXct 对象完成所有这些操作，并将日期时间输出格式化为不包含日期。我认为`axis.POSIXct`函数有一个`format`参数应该让你有时间输出。但是，它似乎没有被正确调度，所以我需要“手动”构建轴。

```
dft <- data.frame(x= factor( sample(1:2, 100, repl=TRUE)), 
                  y= Sys.time()+rnorm(100)*4000 )
boxplot(y~x, data=dft, yaxt='n')
axis(2, at=seq(from=range(dft$y)[1], to =range(dft$y)[2], by=3000) , 
         labels=format.POSIXct(seq(from=range(dft$y)[1], to =range(dft$y)[2], by=3000), 
                                 format ="%H:%M:%S") ) 
```

![在此处输入图像描述](../Images/e7aa22e58c046c8fd0556b8e83743971.png)

确实有一个合适的方法，`Axis.POSIXt`（我认为`boxplot`应该转向绘图，但它似乎没有识别'y'参数的类）：

```
boxplot(y~x, data=dft, yaxt='n')
Axis(side=2, x=range(dft$y), format ="%H:%M:%S") 
```

![在此处输入图像描述](../Images/bef7e836c5004b5cd72cdac2e71d7c06.png)

关于您对“更简单”的要求，请查看基于 ggplot2 的解决方案，使用上面定义的 dft 数据帧和 POSIXct 时间。（我确实尝试了 chron-times 对象，但收到一条消息说 ggplot 不支持该类）：

```
require(ggplot2); p <- ggplot(dft, aes(x,y))
p + geom_boxplot() 
```

![在此处输入图像描述](../Images/8cfeb02baa951fee546279647bcd453c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:07:30.887

查看“lubridate”包和其中的“hms”功能。

# c# - C# 和 Visual Studio 中的变量服务引用端点

> ID：11213423
> 
> 赞同：0
> 
> 时间：2012-06-26T18:09:58.040
> 
> 标签：c#, wcf, console-application, service-reference, svc

如果这是基本的东西，请原谅我的无知，我对使用 Web 服务参考 (WCF) 的整个 C# 控制台应用程序有点陌生。

我正在创建一个应用程序，它将作为可执行文件放置在许多不同的机器上，并充当 Web 服务的客户端。但是，Web 服务也安装在客户端的本地 Intranet 中，因此每个位置的端点都会发生变化。

在 Visual Studio 中添加时，我看到 web 参考端点位于 app.config 文件中，但是有没有一种简单的方法可以在运行时更改端点，验证端点是否正确且存在，并且能够使用这些方法？

另外，如果可能的话，我是否仍需要在我的解决方案中将 SVC 添加为服务引用，还是动态调用它？

我正在使用 C# 和 .Net 4

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:12:02.177

您可以将地址作为 AppSetting 并在创建代理类后设置它：

```
Proxy.Endpoint.Address = new EndpointAddress("myconfigvaluehere"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:28:05.113

首先 - Juval Lowy 有一本关于 WCF 服务的优秀书籍：[Programming WCF Services: Mastering WCF and the Azure AppFabric Service Bus](http://books.google.co.il/books?id=PvNrurEhmiEC&pg=PA74&lpg=PA74&dq=wcfwrapper%20juval&source=bl&ots=ChAnMwJ-Ox&sig=ZF9gUUfnqXe1gbjg27edS7OISmE&hl=iw&sa=X&ei=iijqT7XOM8fZ8gPb9ZRu&ved=0CKoBEOgBMAA#v=onepage&q&f=false)。他在书中解释了使用 动态连接到 WCF 服务的 WCF 包装器类`Endpoint`，`Binding`以及所有这些爵士乐。但是你需要了解 WCF 背景才能继续使用它 <- 你可以从书中做到:)

# c#-4.0 - 我的自定义 Windows 服务未写入自定义事件日志

> ID：11213424
> 
> 赞同：3
> 
> 时间：2012-06-26T18:10:10.740
> 
> 标签：c#-4.0, windows-services, custom-eventlog

我编写了一个自定义 Windows 服务，它将数据写入自定义事件日志（在 Windows 事件查看器中）。

为了开发服务使用的商务逻辑，我创建了一个模拟 Windows 服务的启动/停止方法的 Windows 窗体。

通过 Windows 窗体执行 biz 逻辑时，信息已成功写入我的自定义事件日志。但是，当我从自定义 Windows 服务运行相同的 biz 逻辑时，信息无法写入事件日志。

需要明确的是，我已经编写了一个库 (.dll)，它可以完成我希望我的自定义服务执行的所有工作 - 包括创建/写入自定义事件日志。我的表单应用程序和我的 Windows 服务一样引用了这个库。

认为问题是安全问题，我手动将自定义 Windows 服务设置为“登录”为“管理员”，但该服务仍然没有写入事件日志。

我被困在如何解决这个问题上，因为我在运行服务时无法调试和单步执行代码（如果有调试服务的方法，请分享）。

您对可能导致我的服务无法写入事件日志的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:26:17.283

我像这样使用它。可能有一些错别字。写在我的手机浏览器上...

```
public class MyClass
{
   private EventLog eventLog = new EventLog();

   public void MyClass()
   {
      if (!System.Diagnostics.EventLog.SourceExists("MyLogSource"))
          System.Diagnostics.EventLog.CreateEventSource("MyLogSource", "MyLogSource_Log");
      eventLog.Source = "MyLogSource";
      eventLog.Log = "MyLogSource_Log";
   }

   private void MyLogWrite()
   {
       eventLog.WriteEntry(ex.ToString(), EventLogEntryType.Error);
   } 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:13:22.393

要调试正在运行的服务，您需要附加到该进程。[有关步骤，请参见此处。](http://msdn.microsoft.com/en-us/library/7a50syb3.aspx)

您还可以将参数检查添加到 Main 入口点，并拥有一个组合服务和控制台应用程序，该应用程序将基于某些标志启动。请参阅[此 SO 帖子以获得一个很好的示例](https://stackoverflow.com/questions/809082/create-a-combo-command-line-windows-service-app)，但这里有一个片段：

```
using System;
using System.ServiceProcess;

namespace WindowsService1
{
    static class Program
    {
        static void Main(string[] args)
        {
            if (args == null)
            {
                Console.WriteLine("Starting service...");
                ServiceBase.Run(new ServiceBase[] { new Service1() });
            }
            else
            {
                Console.WriteLine("Hi, not from service: " + args[0]);
            }
        }
    }
} 
```

如果存在任何参数，则上述以控制台模式启动应用程序，如果不存在任何参数，则以服务模式启动应用程序。当然，它可以更漂亮，但这就是开关的要点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T19:22:13.053

我发现了为什么我的服务没有写入事件日志。

该问题与尝试写入 EL 的代码/安全/等的任何部分无关。问题是我的服务没有成功收集写入 EL 的信息 - 因此，该服务甚至没有尝试写入日志。

现在我修复了收集数据的代码，数据已成功写入事件日志。

我愿意关闭这个问题，因为这个问题与真正的问题不符。

# ios - 从 NSConcreteValue / NSValue 中获取 int

> ID：11213428
> 
> 赞同：0
> 
> 时间：2012-06-26T18:10:34.067
> 
> 标签：ios, ios5, core-foundation, nsvalue

我正在尝试在`NSValue`/`NSConcreteValue`实例中提取一个 int 。我试图以这种方式投射它们，但没有奏效：

```
 NSValue *toValue = (NSValue *)someValue;
    NSNumber *toNumber = (NSNumber*)toValue;
    int final = [toNumber intValue]; 
```

我也尝试过使用`getValue`，但这对我也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:24:06.740

您确定将 int 保存到其中吗？如果是，您可能会得到它：

```
int final = 0;
[someValue getValue:&final]; 
```

你知道你可以问一个 NSValue 它的类型

```
[value objCType] 
```

它返回一个 const char *

干杯，约尔格

# android - 使用异步任务停止登录过程

> ID：11213430
> 
> 赞同：0
> 
> 时间：2012-06-26T18:10:49.673
> 
> 标签：android, android-asynctask

我按下登录按钮登录到我的应用程序，我正在使用`asyncTask`这个过程。当我按下取消按钮时，它应该停止登录过程，但是当我按下取消按钮时会发生什么情况，对话框会出现，但登录过程并没有停止，并且最终用户已登录:)。

我曾经`asyncTaskObject.cancel(true)`停止该过程，但没有任何反应。我该如何纠正这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:16:51.583

该`AsyncTask`文档指出该方法取消（）：

> 尝试取消此任务的执行。如果任务已完成、已被取消或由于其他原因无法取消，则此尝试将失败。

文档中还提供了该解决方案，其中说：

> 调用此方法将导致在 doInBackground(Object[]) 返回后在 UI 线程上调用 onCancelled(Object)。调用此方法可确保永远不会调用 onPostExecute(Object)。调用此方法后，应定期从 doInBackground(Object[]) 中检查 isCancelled() 返回的值，以尽早完成任务。

检查此链接：

[http://developer.android.com/reference/android/os/AsyncTask.html#cancel(boolean](http://developer.android.com/reference/android/os/AsyncTask.html#cancel(boolean) )

# sql - 从 Oracle 调用 SSRS 存储过程

> ID：11213431
> 
> 赞同：0
> 
> 时间：2012-06-26T18:10:51.973
> 
> 标签：sql, oracle, reporting-services

我在 SSRS 中有一个报告，每当更新 Oracle 数据库中的表时，我都需要提供该报告。

我的计划是在 Oracle 数据库中创建一个触发器，在更新时会告诉 SSRS 中的报告交付。触发器将调用 SSRS 中的存储过程，然后使用“FireEvent SOAP API”运行报告。

我似乎找不到任何关于从 Oracle 调用 SSRS 中的 SP 的信息。

任何帮助将不胜感激，因为我对这些东西很陌生。（使用 SQL 大约 2 周：/）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:42:40.550

通常我在包内使用存储过程，为了调用该 SP，我执行以下操作：

*   在 RDL 文件中单击 Data 选项卡以创建新的 Dataset 。
*   选择新数据集，选择数据源并重命名数据集。
*   在命令类型中，选择过程而不是文本。
*   在查询字符串框中，输入过程的名称，然后单击“确定”。

    *包中的过程名称可以是 PKG_EXAMPLE.SP_NAME
    *没有包的过程名称可以是 SP_NAME

希望这可以帮助

谢谢，苏菲安。

# iphone - 如何将值添加到 fb 帖子 xcode

> ID：11213433
> 
> 赞同：0
> 
> 时间：2012-06-26T18:11:01.817
> 
> 标签：iphone, ios, xcode, facebook, facebook-graph-api

我正在创建一个游戏，希望能够在那里添加分数，所以当他们在 fb 上发布它时，它会向他们显示高分，（添加更多的社交方面）

这是我要起诉的代码，但它似乎无法正常工作并使应用程序崩溃，

```
- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
    [self postwall];

}
- (void)postwall
{
    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   //kAppId, @"app_id",
                                   @"https://developers.facebook.com/docs/reference/dialogs/", @"link",
                                   @"http://fbrell.com/f8.jpg", @"picture",
                                   @"Watch Ma Balls", @"name",
                                   @"How long can you keep out of the way of ma balls for", @"caption",
                                   @"I reached a score of i% can you beat me!.",highscore, @"description",
                                   nil];

    [facebook dialog:@"feed" andParams:params andDelegate:self];
} 
```

代码可以正常工作

> 高分

那里

有没有办法可以将它添加到字符串中以便显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:40:03.247

试试这个（假设`highscore`是一个`int`）：

```
NSString *string = @"I reached a score of ";
string = [string stringByAppendingString:[NSString stringWithFormat:@"%d", highscore]];
string = [string stringByAppendingString:@" can you beat me?"];

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   //kAppId, @"app_id",
                                   @"https://developers.facebook.com/docs/reference/dialogs/", @"link",
                                   @"http://fbrell.com/f8.jpg", @"picture",
                                   @"Watch Ma Balls", @"name",
                                   @"How long can you keep out of the way of ma balls for", @"caption",
                                   string, @"description",
                                   nil]; 
```

# android - 数据库锁定异常

> ID：11213436
> 
> 赞同：1
> 
> 时间：2012-06-26T18:11:19.397
> 
> 标签：android

我在我的应用程序中创建了一个包含 5 个表的数据库。我的数据库正在从不同的线程更新。当我看到日志时，如果数据库已经打开，我可以看到在打开数据库时存在数据库锁定异常。

我的一位朋友建议我始终使用内容提供程序来避免这个问题。根据他的说法，内容提供商自己管理并发问题？

如果我们不想将数据共享给其他应用程序，那么使用内容提供程序是一种好习惯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:54:11.303

我认为在大多数情况下使用读写锁就足够了。

假设您编写了以下内容，

```
import java.util.concurrent.locks.ReadWriteLock;
import java.util.concurrent.locks.ReentrantReadWriteLock;

public class MyDatabase extends SQLiteOpenHelper
{
    private static final ReadWriteLock rwLock = new ReentrantReadWriteLock(true);

    private static void beginReadLock()
    {
        rwLock.readLock().lock();
    }

    private static void endReadLock()
    {
        rwLock.readLock().unlock();
    }

    private static void beginWriteLock()
    {
        rwLock.writeLock().lock();
    }

    private static void endWriteLock()
    {
        rwLock.writeLock().unlock();
    } 
```

那么你可以像下面这样完成你的任务。

```
 public static void doSomething()
    {
        SQLiteDatabase sldb = null;

        try
        {
            beginReadLock();

            MyDatabase mydb = new MyDatabase();
            sldb = mldb.getReadableDatabase();
            ......
        }
        catch (Exception e)
        {
            ......
        }
        finally
        {
            if (sldb != null)
            {
                try
                {
                    sldb.close();
                }
                catch (Exception e) {}
            }

            endReadLock();
        }
    } 
```

**用beginReadLock()**和**endReadLock()**附上读取操作。**同样，用beginWriteLock()**和**endWriteLock()**附上写操作。

几个月前，通过上述解决方案，我可以解决我自己的数据库锁定问题，即多个线程同时尝试读/写打开数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:30:59.100

问题是您使用多个数据库连接到您的数据库。因此，多个线程尝试同时更新您的表，并且所有这些线程都与您的数据库有不同的连接。

为避免在所有线程中出现此问题，您需要使用与数据库的相同连接，即所有线程应使用与数据库的相同连接（由 SQLiteDabase 对象表示）。

此外，由于 sqlite 文件上有一个文件块，因此使用多个线程不会提高数据库升级的性能（最好只使用一个线程来处理数据库）。如果你想使用多个线程，你应该使用同一个数据库连接，在这种情况下，Android 将管理锁。

您可以在此处找到有关此问题的讨论：http: [//touchlabblog.tumblr.com/post/24474398246/android-sqlite-locking](http://touchlabblog.tumblr.com/post/24474398246/android-sqlite-locking)和此处：[Android 上 SQLite 的最佳实践是什么？](https://stackoverflow.com/questions/2493331/what-are-the-best-practices-for-sqlite-on-android)

# wcf - 带有 ws-address 的 WCF：创建裸参数

> ID：11213438
> 
> 赞同：0
> 
> 时间：2012-06-26T18:11:26.030
> 
> 标签：wcf, soap, ws-addressing

我正在尝试创建一个 WCF SOAP 服务，该服务具有一个接受正文中的裸参数的服务方法，但我无法实现。目前，方法名称元素正在主体下创建。我正在尝试使用 ws-addressing，以便方法名称是标头的一部分，而参数是正文的直接子代。

这是我的服务实现：

```
[SoapDocumentService(Use = SoapBindingUse.Literal, ParameterStyle = SoapParameterStyle.Bare)]
public class Service1 : IService1
{        
    [SoapDocumentMethod(Use=SoapBindingUse.Literal, ParameterStyle = SoapParameterStyle.Bare)]
    public void DoWork([XmlElement(Namespace = "http://www.contoso.com",
                IsNullable = true)] MyClass wrapper)
    {
    }
}

[XmlRoot(Namespace = "http://www.contoso.com")]
public class MyClass
{
    public int Value { get; set; }
    public string MyProperty { get; set; }
}

[ServiceContract]
public interface IService1
{
    [OperationContract]
    void DoWork(MyClass wrapper);
} 
```

上面的实现生成了下面的soap客户端。但我试图将包装元素作为身体上的直接子元素（试图删除 DoWork）。根据我的阅读，装饰 svc 方法以使用裸参数应该删除服务方法名称（DoWork）并使用 ws-addressing。

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:tem="http://tempuri.org/" xmlns:web="http://schemas.datacontract.org/2004/07/WebApplication2">
   <soap:Header/>
   <soap:Body>
      <tem:DoWork> <!-- I want to remove this svc method name element  -- >
         <tem:wrapper>  <!-- I want this to be under the body -->
            <!--Optional:-->
            <web:MyProperty>?</web:MyProperty>
            <!--Optional:-->
            <web:Value>?</web:Value>
         </tem:wrapper>
      </tem:DoWork>
   </soap:Body>
</soap:Envelope> 
```

我已经按照 msdn 的指南来装饰服务方法。[MSDN 链接](http://msdn.microsoft.com/en-us/library/dkwy2d72%28v=vs.71%29.aspx#cpconcustomizingsoapinaspnetwebserviceswebserviceclientsanchor2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:34:22.243

我必须为 MyClass 创建消息合同包装器并指定消息正文。

```
[MessageContract]
    public class MyWrapper
    {
        [MessageBodyMember]
        public int Value { get; set; }
        [MessageBodyMember]
        public string MyProperty { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:01:41.857

我认为你应该放弃包装。在 .net 2 中这会起作用，wcf 应该是类似的：

```
[WebMethod]
[SoapDocumentMethod(ParameterStyle=SoapParameterStyle.Bare)]
public String EchoString(String s, String s1) 
{
    return s;
} 
```

# javascript - 克隆和附加唯一 ID 后找不到 DOM 元素

> ID：11213439
> 
> 赞同：3
> 
> 时间：2012-06-26T18:11:36.073
> 
> 标签：javascript, jquery

所以我正在创建一个随机字符串值：

```
var randomString = function(stringLength) {
    var i = 0;
    stringLength = stringLength || 10;
    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';
    var randomString = '';
    for (i = 0; i < stringLength; i += 1) {
        var rNum = Math.floor(Math.random() * chars.length);
        randomString += chars.substring(rNum, rNum + 1);
    }
    return randomString;
}; 
```

并将其与一个窗格上的列表元素相关联：

```
var addUniqueId = function($thumbnail) {
    var random = randomString(10);
    $thumbnail.attr('id', 'rand-' + random);
}; 
```

然后克隆它并将该列表元素移动到右侧：

```
 var cloneImage = function($thumbnail) {
        addUniqueId($thumbnail);
        var $lastImgAdded = $('.js-gallery-edit-pane li').last();
        var span = $('<span />');
        span.addClass('x').text('x');
        var $clone = $thumbnail.clone(true, true).appendTo($('.js-gallery-edit-pane')).prepend(span).hide().fadeIn(200).unbind('click');
        bindRemoveHandler($clone);
    }; 
```

然后我在左侧的列表元素中添加一个叠加层以将其“变灰”。此时一切正常。

从那里，用户可以通过单击图像上的“X”来删除右侧最近克隆的项目。这可以正常工作并删除最近克隆的图像，但是找不到原始叠加层。它应该与随机字符串值相关联，所以我只是在寻找它，`$('.js-gallery-select-pane').find('#rand-' + string).find('.overlay').remove();`但由于某种原因它没有找到它......

知道为什么吗？

[JSFiddle 演示](http://jsfiddle.net/CSM8d/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:20:43.157

如果您`alert(string)`在代码中添加一个，您将看到该字符串已经包含`rand-`在您的选择器中，只需执行以下操作：

```
$('.js-gallery-select-pane').find('#' + string).find('.overlay').remove(); 
```

这是工作的[JSFiddle](http://jsfiddle.net/CSM8d/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:49:16.790

您有两个元素集合，其中包含 ID 对。

不过有三个问题。前两个问题问题在这里..

您正在获取克隆“rand-etctcetc”的完整ID，然后再次将rand-添加到它“rand-rand-etcetc”，然后将其用作选择器。$('rand-rand-etcetc'). 相反，我将其更改为仅将必要的 # 添加到 id 中。您还需要删除 js-gallery-editing 类，以便让您将内容添加回右侧的列表中。

```
 var bindRemoveHandler = function($thumbnail) {
      $thumbnail.on('click', function() {
        $(this).fadeOut(200, function() {
          var string = $(this).attr('id');
          $('.js-gallery-select-pane').find('#' + string).removeClass('js-gallery-editing').find('.overlay').remove();
          $(this).remove();
          updatePictureCount();
        });
      });
    }; 
```

你可以在这里停下来，但是，你也有一个不同的问题。ID 属性旨在是唯一的。尝试使用自定义属性和 Jquery 属性等于选择器。你想要的查询看起来像这样..

```
 $('.js-gallery-select-pane').find('[pairid="' + string +'"]'); 
```

在这里，有一个小提琴：http: [//jsfiddle.net/s3dCB/](http://jsfiddle.net/s3dCB/)

# joomla2.5 - Joomla！2.5 菜单

> ID：11213441
> 
> 赞同：0
> 
> 时间：2012-06-26T18:11:37.057
> 
> 标签：joomla2.5, joomla-template

我刚刚将我的网站从 Joomla 1.5 迁移到 2.5，但是，我在菜单上苦苦挣扎。这可能是因为我选择了模板。

该网站使用 bizglobal 1.7 模板。问题是顶部菜单：我可以设置各种菜单和子菜单，但我希望所有菜单项都可用。例如，如果我选择第一个顶级项目，那么下面的所有项目都会立即可用。但是，除非我单击父菜单项，否则其余的顶级项目不会显示它们的子项 - 因此原始子项不会下拉。图片胜于文字，因此请查看带有绿色顶部菜单的[http://www.simsig.co.uk （目前为 SimSig 和论坛）。](http://www.simsig.co.uk)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:21:06.570

在模块管理器中查找显示主菜单的模块，它应该是类型菜单。

显示子项目是否标记为是？

# python - 这种转义特殊字符的奇怪行为是如何解释的？

> ID：11213442
> 
> 赞同：0
> 
> 时间：2012-06-26T18:11:39.460
> 
> 标签：python

只是为了好玩，我写了这个简单的函数来在 Python 中反转一个字符串：

```
def reverseString(s):
    ret = ""
    for c in s:
        ret = c + ret
    return ret 
```

现在，如果我传入以下两个字符串，我会得到有趣的结果。

```
print reverseString("Pla\net")
print reverseString("Plan\et") 
```

这个的输出是

```
te
alP
te\nalP 
```

我的问题是：为什么特殊字符`\n`在传递给函数时会转换为新行，而当函数通过反转将其解析在一起时却不会`n\`？另外，我怎样才能停止函数解析`\n`并返回`n\`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:18:43.587

您应该查看各个字符序列以了解会发生什么：

```
>>> list("Pla\net")
['P', 'l', 'a', '\n', 'e', 't']
>>> list("Plan\et")
['P', 'l', 'a', 'n', '\\', 'e', 't'] 
```

如您所见，`\n`是单个字符，`\e`而是两个字符，因为它不是有效的转义序列。

为防止这种情况发生，请转义反斜杠本身，或使用原始字符串：

```
>>> list("Pla\\net")
['P', 'l', 'a', '\\', 'n', 'e', 't']
>>> list(r"Pla\net")
['P', 'l', 'a', '\\', 'n', 'e', 't'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:15:14.357

原因是 '\n' 是字符串中的*单个*字符。我猜 \e 不是一个有效的转义，所以它被视为两个字符。

查看你想要的原始字符串，或者在你真正想要文字 '\' 的地方使用 '\\'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:15:29.483

翻译是python语法的一个函数，所以它只发生在python对python本身的输入解析期间（即python解析代码时）。它不会在其他时间发生。

在您的程序的情况下，您有一个字符串，当它被构造为对象时，它包含由 表示的单个字符`'\n'`，以及一个在构造时包含子字符串的字符串`'\e'`。反转它们后，python 不会重新解析它们。

# excel - 将多组列移动到单组列中

> ID：11213446
> 
> 赞同：0
> 
> 时间：2012-06-26T18:11:51.863
> 
> 标签：excel, vba

我有一个电子表格，其中包含单个人员数据的 ABCDE 数据列。然后，相同的标题在 FGHiJ 列中重复，用于第二个人的数据然后，相同的标题在接下来的 5 列中再次重复，这会持续到 25 组列（所以我有 25 个人的数据） . 这些数据大约有 50 行。

数据头如下：

> A-Name
> B-DOB
> C-Level
> D-Acct#
> E-Tshirt 尺码
> 
> F-Name
> G-DOB
> H-Level
> I-Acct#
> E-Tshirt 尺码

重复25组

我想移动所有数据，以便仅在 ABCDE 列中。我希望所有名称都出现在 A 列中，所有 DOB 都出现在 B 列中，等等。

我在这里看到了与此类似的内容，但我不明白如何重新编写代码以适应我的具体情况。

我已经为这个问题苦苦挣扎了 3 年，并且手工复制/粘贴了所有内容，这需要花费数小时。我真的很感激任何关于如何自动化的信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:11:23.330

它需要摆弄，但这是一个开始：

```
Sub CopySomeCells()

    With Excel.ThisWorkbook.Sheets("myExample")

         lastcellincolumnA = .Cells(.Rows.Count, 1).End(Excel.xlUp).Row
         lastcellincolumnL = .Cells(.Rows.Count, 12).End(Excel.xlUp).Row

        .Range("G1:L" & lastcellincolumnL).Copy
        .Range("A" & (lastcellincolumnA + 1)).PasteSpecial Excel.xlValues

    End With

End Sub 
```

# r - ggplot2：箱线图是否仅用于计算位于 y 轴范围内的值？

> ID：11213455
> 
> 赞同：3
> 
> 时间：2012-06-26T18:12:11.070
> 
> 标签：r, ggplot2, median, boxplot

我注意到箱线图的中位数（由受限制的 ylim 参数构造）可能与没有调整 y 轴的中位数（）函数或箱线图获得的中位数不同。

这是否意味着箱线图仅用于计算位于 y 轴定义区间内的值？如果是这样，我怎么能得到正确的箱线图（基于所有值），但在 y.axis 的特定间隔上绘制它？

非常感谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T18:21:40.337

使用`ylim`限制`y`. 在 ggplot 中，超出比例范围的数据将被丢弃，并且不包含在任何统计计算中（例如箱线图）。要仅缩放轴而不更改包含的数据，请使用`coord_cartesian(ylim=...)`.

# jquery - 单击链接时显示和隐藏多个 div

> ID：11213457
> 
> 赞同：0
> 
> 时间：2012-06-26T18:12:48.057
> 
> 标签：jquery

所以情况是这样的：

我有几个链接，每个链接都有一个隐藏的 div，需要在用户单击特定链接时显示。当然，来自另一个链接的已经可见的 div 需要在同一操作中隐藏。默认情况下，所有 div 都是隐藏的。我在想最简单的方法是为单击的链接的子 div 分配一个活动 ID，然后显示（）#active，之后每次单击另一个 div 我会隐藏 #active id，再次将其分配给另一个 div然后显示id。有可能吗？代码会是什么样子？是的，我是一个 Jquery 新手。html 代码如下所示：

```
<div class="nav">
    <ul>
        <li><a href="#" title="show phone #(403) 454-5526">Call us</a>
            <div class="navLinks"> (403) 454-5526 </div>
        </li>
        <li><a href="#">Visit our website</a>
               <div class="navLinks"> Content Here </div>
        </li>
        <li><a href="#"Email us</a>
               <div class="navLinks"> Content Here </div>
        </li>
        <li><a href="#">Send to a friend</a>
               <div class="navLinks"> Content Here </div>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:15:22.120

那样的事情怎么样？

```
$(".nav a").on("click", function(e) {
    var div = $(this).siblings(".navLinks").toggle();
    $(".navLinks").not(div).hide();
    e.preventDefault();
});​ 
```

**演示：http:** [//jsfiddle.net/4ncew/1/](http://jsfiddle.net/4ncew/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:16:21.350

试试这个，[演示](http://jsfiddle.net/rajaadil/zd4k8/1/)

```
$('.nav li a').click(function (){     
  $('.navLinks').css('display', 'none');
  $(this).next().css('display', 'block');
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:16:22.983

这应该做你需要的：

```
​$​(document).ready(function(){
    $('.nav ul li a').click(function(){
        $('.navLinks').css('display','none');
        $(this).siblings('.navLinks').css('display','block');   
    });    
});​​​​ 
```

这是一个 jsfiddle 供您测试：http: [//jsfiddle.net/2H4zD/3/](http://jsfiddle.net/2H4zD/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T18:21:41.030

我贴在这里，自己试试：http: [//jsfiddle.net/Y97F8/](http://jsfiddle.net/Y97F8/)

这是执行此操作的代码：

```
jQuery(function(){

   //hide all first
   jQuery(".navLinks").hide(); //hide others

   jQuery(".nav ul li a").each(function(i) {
      jQuery(".nav ul li a").eq(i).click(function() {
         jQuery(".navLinks").hide(); //hide others
         jQuery(".nav ul li a").eq(i).next().show(); //show the div at the specified index
      });
   });

});​ 
```

# c# - 如何删除指定字符之间的单词？

> ID：11213458
> 
> 赞同：2
> 
> 时间：2012-06-26T18:12:51.337
> 
> 标签：c#, .net

我想创建一个从文件中读取每一行的方法。接下来，它必须检查管道之间并确定是否存在长度超过三个字符的单词，并且只是数字。在文件中是这样组织的字符串：

**发生了什么事{noway|那很酷|1293328|为什么|不知道|看}**

有了这句话，软件应该去掉1293328。

结果句子将是：

**发生了什么事{noway|那很酷|不知道}**

到目前为止，我正在读取文件中的每一行，并制作了确定 | 之间的单词的函数。| 必须删除或不删除（检查一个像 noway 这样的字符串，这很酷等）

我不知道如何让管道之间的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:20:16.090

您可以使用 Split 方法按字符拆分字符串。

```
string YourStringVariable = "{noway|that's cool|1293328|why|don't know|see}";

YourStringVariable.Split('|');  //Returns an array of the strings between the brackets 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:30:35.173

这是关于什么的：

```
string RemoveValues(string sentence, string[] values){

   foreach(string s in values){
      while(sentence.IndexOf("|" + s) != -1 && sentence.IndexOf("|" + s) != 0){
         sentence = sentence.Remove(sentence.IndexOf("|" + s), s.Lenght + 1);
      }
   }

   return sentence;
} 
```

在你的情况下：

```
string[] values = new string[3]{ "1293328", "why", "see" };
string sentence = RemoveValues("noway|that's cool|1293328|why|don't know|see", values);
//result: noway|that's cool|don't know 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:21:11.107

```
 string YourStringVariable = "{noway|that's cool|1293328|why|don't know|see}";
        string[] SplitValue=g.Split('|');
        string FinalValue = string.Empty;
        for (int i = 0; i < SplitValue.Length; i++)
        {
            if (!SplitValue[i].ToString().Any(char.IsDigit))
            {
                FinalValue += SplitValue[i]+"|";    

            }

        } 
```

# javascript - HTML5 文件上传块/切片导致 CPU 使用率高

> ID：11213460
> 
> 赞同：3
> 
> 时间：2012-06-26T18:12:52.847
> 
> 标签：javascript, html, file-upload, html5-filesystem

所以，我正在使用 HTML5 为大文件实现文件上传器。我正在使用新的切片/块将文件切成更小的块，目的是暂停/恢复以供以后实施。但是，每次我尝试上传（它有效）但它需要大量的内存和 CPU 使用（它可能会上升到 100% 的 cpu 使用）。我尝试不同大小的块文件，但没有帮助。

有谁知道出了什么问题？以及如何解决？该应用程序据称能够支持高达 4GB/文件，当然还有多个文件因此可能会达到 20GB 等。

注意：请不要在解决方案中包含 java 或 flash。因为我已经有了java版本。我只是想用 HTML5 重写它。下面是代码

```
 function sendRequest() {       
            var file = document.getElementById('fileToUpload');   

            for(var i = 0; i < file.files.length; i++) {      
                var blob = file.files[i];         
                var originalFileName = blob.name;
                var filePart = 0

                const BYTES_PER_CHUNK = 5 * 1024 * 1024; // 10MB chunk sizes.
                const SIZE = blob.size;

                var start = 0;
                var end = BYTES_PER_CHUNK;

                totalChunks = Math.ceil(SIZE / BYTES_PER_CHUNK);

                while( start < SIZE ) {                    
                    if (blob.webkitSlice) {
                        //for Google Chrome
                        var chunk = blob.webkitSlice(start, end); 
                    } else if (blob.mozSlice) {
                        //for Mozilla Firefox
                        var chunk = blob.mozSlice(start, end);
                        //pausecomp(5000);
                    }       

                    uploadFile(chunk, originalFileName, filePart, totalChunks, i);
                    filePart++;
                    start = end;
                    end = start + BYTES_PER_CHUNK;
                }
            }                
        }

        function uploadFile(blobFile, fileName, filePart, totalChunks, divBarsSelector) {
            if(filePart == 0) {
                bars = document.querySelector('#bars' + divBarsSelector);  
            }

            var progress = document.createElement('progress');
            progress.min = 0;
            progress.max = 100;
            progress.value = 0;
            bars.appendChild(progress);   

            var fd = new FormData();
            fd.append("fileToUpload", blobFile);

            var xhr = new XMLHttpRequest();                
            xhr.open("POST", "upload.php"+"?"+"file="+fileName + filePart, true);

            xhr.onload = function(e) {
                //make sure if finish progress bar at 100%
                progress.value = 100;

                //counter if everything is done using stack(pop) / queue(shift)????
                uploaders.shift();

                if (!uploaders.length) {
                    bars.appendChild(document.createElement('br'));
                    bars.appendChild(document.createTextNode('DONE :)'));
                    //mergeFile(fileName, totalChunks);
                }                  
            };

            // Listen to the upload progress for each upload.   
            xhr.upload.onprogress = function(e) {;
                if (e.lengthComputable) {
                    progress.value = (e.loaded / e.total) * 100;
                }
            };                 

            uploaders.push(xhr);
            xhr.send(fd);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:45:59.333

为了避免这个问题，我们需要使用 webworkers 上传文件，通过使用 webworkers 我们可以减少 cpu 的使用。

您可以使用 chrome taskmanager 在 chrome 中测试有无 webworkers 的区别。

# python - 无法通过scrapy的表单

> ID：11213467
> 
> 赞同：5
> 
> 时间：2012-06-26T18:13:02.610
> 
> 标签：python, forms, web-crawler, scrapy

我是使用scrapy的新手，我正在尝试从房地产网站获取一些信息。该站点有一个带有搜索表单的主页（方法 GET）。我正在尝试转到我的 start_requests (recherche.php) 中的结果页面，并在 formdata 参数中设置我在地址栏中看到的所有获取参数。我还设置了我拥有的 cookie，但他也没有工作..

这是我的蜘蛛：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http import FormRequest, Request

from robots_immo.items import AnnonceItem

class ElyseAvenueSpider(BaseSpider):
    name = "elyse_avenue"
    allowed_domains = ["http://www.elyseavenue.com/"]

    def start_requests(self):
        return [FormRequest(url="http://www.elyseavenue.com/recherche.php",
                            formdata={'recherche':'recherche',
                                      'compteurLigne':'2',
                                      'numLigneCourante':'0',
                                      'inseeVille_0':'',
                                      'num_rubrique':'',
                                      'rechercheOK':'recherche',
                                      'recherche_budget_max':'',
                                      'recherche_budget_min':'',
                                      'recherche_surface_max':'',
                                      'recherche_surface_min':'',
                                      'recherche_distance_km_0':'20',
                                      'recherche_reference_bien':'',
                                      'recherche_type_logement':'9',
                                      'recherche_ville_0':''
                                     },
                            cookies={'PHPSESSID':'4e1d729f68d3163bb110ad3e4cb8ffc3',
                                     '__utma':'150766562.159027263.1340725224.1340725224.1340727680.2',
                                     '__utmc':'150766562',
                                     '__utmz':'150766562.1340725224.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)',
                                     '__utmb':'150766562.14.10.1340727680'
                                    },
                            callback=self.parseAnnonces
                           )]

    def parseAnnonces(self, response):
        hxs = HtmlXPathSelector(response)
        annonces = hxs.select('//div[@id="contenuCentre"]/div[@class="blocVignetteBien"]')
        items = []
        for annonce in annonces:
            item = AnnonceItem()
            item['nom'] = annonce.select('span[contains(@class,"nomBienImmo")]/a/text()').extract()
            item['superficie'] = annonce.select('table//tr[2]/td[2]/span/text()').extract()
            item['prix'] = annonce.select('span[@class="prixVignette"]/span[1]/text()').extract()
            items.append(item)
        return items

SPIDER = ElyseAvenueSpider() 
```

当我运行蜘蛛时，没有问题，但加载的页面不是好的页面（它说“请指定您的搜索”，我没有得到任何结果..）

```
2012-06-26 20:04:54+0200 [elyse_avenue] INFO: Spider opened
2012-06-26 20:04:54+0200 [elyse_avenue] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2012-06-26 20:04:54+0200 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2012-06-26 20:04:54+0200 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2012-06-26 20:04:54+0200 [elyse_avenue] DEBUG: Crawled (200) <POST http://www.elyseavenue.com/recherche.php> (referer: None)
2012-06-26 20:04:54+0200 [elyse_avenue] INFO: Closing spider (finished)
2012-06-26 20:04:54+0200 [elyse_avenue] INFO: Dumping spider stats:
    {'downloader/request_bytes': 808,
     'downloader/request_count': 1,
     'downloader/request_method_count/POST': 1,
     'downloader/response_bytes': 7590,
     'downloader/response_count': 1,
     'downloader/response_status_count/200': 1,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2012, 6, 26, 18, 4, 54, 924624),
     'scheduler/memory_enqueued': 1,
     'start_time': datetime.datetime(2012, 6, 26, 18, 4, 54, 559230)}
2012-06-26 20:04:54+0200 [elyse_avenue] INFO: Spider closed (finished)
2012-06-26 20:04:54+0200 [scrapy] INFO: Dumping global stats:
    {'memusage/max': 27410432, 'memusage/startup': 27410432} 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T04:53:32.983

我会使用[`FormRequest.from_response()`](http://doc.scrapy.org/en/latest/topics/request-response.html#scrapy.http.FormRequest.from_response)which 为您完成所有工作，因为您仍然可能会错过一些字段：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http import FormRequest, Request

from robots_immo.items import AnnonceItem

class ElyseAvenueSpider(BaseSpider):

    name = "elyse_avenue"
    allowed_domains = ["elyseavenue.com"] # i fixed this
    start_urls = ["http://www.elyseavenue.com/"] # i added this

    def parse(self, response):
        yield FormRequest.from_response(response, formname='moteurRecherche', formdata={'recherche_distance_km_0':'20', 'recherche_type_logement':'9'}, callback=self.parseAnnonces)

    def parseAnnonces(self, response):
        hxs = HtmlXPathSelector(response)
        annonces = hxs.select('//div[@id="contenuCentre"]/div[@class="blocVignetteBien"]')
        items = []
        for annonce in annonces:
            item = AnnonceItem()
            item['nom'] = annonce.select('span[contains(@class,"nomBienImmo")]/a/text()').extract()
            item['superficie'] = annonce.select('table//tr[2]/td[2]/span/text()').extract()
            item['prix'] = annonce.select('span[@class="prixVignette"]/span[1]/text()').extract()
            items.append(item)
        return items 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:45:26.780

在您的日志输出中，它说蜘蛛向 发出了 POST 请求`http://www.elyseavenue.com/recherche.php`，但您说该表单使用 GET。

如果您向 URL 发出 POST 请求并搜索“请指定您的搜索”，就可以了：

```
➜ curl -d "" http://www.elyseavenue.com/recherche.php | grep "Merci de préciser votre recherche."
% Total    % Received % Xferd  Average Speed   Time    Time     Time   Dload  Upload   Total   Spent    Left  Speed
100 37494    0 37494    0     0  54582      0 --:--:-- --:--:-- --:--:-- 60866
    <span class="Nbannonces">Merci de préciser votre recherche.</span> 
```

`FormRequest`是 的子类`Request`，它允许您指定请求类型。您应该指定`GET`，例如：

```
FormRequest(url="http://www.elyseavenue.com/recherche.php",
                        formdata={'recherche':'recherche',
                                  'compteurLigne':'2',
                                  'numLigneCourante':'0',
                                  'inseeVille_0':'',
                                  'num_rubrique':'',
                                  'rechercheOK':'recherche',
                                  'recherche_budget_max':'',
                                  'recherche_budget_min':'',
                                  'recherche_surface_max':'',
                                  'recherche_surface_min':'',
                                  'recherche_distance_km_0':'20',
                                  'recherche_reference_bien':'',
                                  'recherche_type_logement':'9',
                                  'recherche_ville_0':''
                                 },
                        cookies={'PHPSESSID':'4e1d729f68d3163bb110ad3e4cb8ffc3',
                                 '__utma':'150766562.159027263.1340725224.1340725224.1340727680.2',
                                 '__utmc':'150766562',
                                 '__utmz':'150766562.1340725224.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)',
                                 '__utmb':'150766562.14.10.1340727680'
                                },
                        callback=self.parseAnnonces,
                        method="GET"
                       ) 
```

# android - Android ListView AdapterView 空指针异常

> ID：11213470
> 
> 赞同：0
> 
> 时间：2012-06-26T18:13:13.157
> 
> 标签：android, android-listview, nullpointerexception, android-adapterview

我有以下方法，当在 ListView 中选择值“编辑类...”时调用该方法：

```
public void editClassOptionPressed(AdapterView<?> parent,int position,ArrayList<Class>classesArrayList){
    //The line below throws the null pointer exception
    parent.getChildAt(position).setBackgroundColor(Color.BLUE);
    Toast.makeText(getApplicationContext(), "Please Select Class To Edit...",Toast.LENGTH_LONG).show();
    setEditListener(classesArrayList, adapter);
} 
```

此方法由以下方法调用，而该方法又在我的 OnCreate 方法中调用：

```
public void setDefaultListener(final ArrayList<Class>classesArrayList){
    ListView lv = getListView();
    lv.setTextFilterEnabled(true);
    lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        if(position==(classesArrayList.size()-3)){
            Intent intent = new Intent(ClassView.this, AddNewClassView.class);
            startActivity(intent);
        }
        else if(position==(classesArrayList.size()-1)){
            deleteClassOptionPressed(parent,position);
        }
        else if(position==(classesArrayList.size()-2)){
            **editClassOptionPressed(parent, position, classesArrayList);** 
        }
        else{
            Intent intent = new Intent(ClassView.this, GradeView.class);
            intent.putExtra("selectedClassName",((TwoLineListItem)view).getText1().getText());
            startActivity(intent);
        }
      }
    });
} 
```

从我到目前为止调试的内容来看，尽管父级本身是非空的，但父级似乎没有在该位置注册子级。我还应该指出，只有当我在 ListView 中有超过一定数量的项目时才会发生这种情况。有人有想法么？这是 logcat 输出：

```
06-26 18:31:23.373: E/AndroidRuntime(1243): FATAL EXCEPTION: main
06-26 18:31:23.373: E/AndroidRuntime(1243): java.lang.NullPointerException
06-26 18:31:23.373: E/AndroidRuntime(1243): athellolistview.com.ClassView.editClassOptionPressed(ClassView.java:112)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at hellolistview.com.ClassView$4.onItemClick(ClassView.java:266)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at android.widget.AbsListView$1.run(AbsListView.java:3168)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at android.os.Handler.handleCallback(Handler.java:605)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at android.os.Looper.loop(Looper.java:137)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at java.lang.reflect.Method.invokeNative(Native Method)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at java.lang.reflect.Method.invoke(Method.java:511)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-26 18:31:23.373: E/AndroidRuntime(1243):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:50:03.173

位置！= childPosition

也许您应该考虑使用 ExpandableListView，这有助于解决这个问题：

```
int childPosition = ExpandableListView.getPackedPositionChild(position); 
```

# regex - powershell 和正则表达式

> ID：11213471
> 
> 赞同：0
> 
> 时间：2012-06-26T18:13:13.813
> 
> 标签：regex, powershell

有任何想法吗？？

我在数百页中有此代码，我需要从所有这些页面中将其删除，但由于“var s”，其中每个页面都是不同的 4 位数字，我不能只进行查找和替换替换。如何在这四位数字上使用正则表达式创建 powershell 命令。

```
<script language="javascript" type="text/javascript"> 
var d = '<%=joindomain%>';
var s = '9244';
var a = '<%=Request.QueryString("aff") %>';
var c = '<%=Request.QueryString("camp") %>';
var r = '<%=referer %>';
</script> 
```

谢谢你，里科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:53:37.173

不知道你在这里能有多一般......下面的代码可能比你要求的更多，如果是这样的话 - 只需添加更多的东西来消除歧义。无论如何，它为我完成了工作......;）

```
@'
foo
<script language="javascript" type="text/javascript"> 
var d = '<%=joindomain%>';
var s = '9244';
var a = '<%=Request.QueryString("aff") %>';
var c = '<%=Request.QueryString("camp") %>';
var r = '<%=referer %>';
</script>
bar
'@ -replace '<script language[\s\S]*?var s = ''\d{4}''[\s\S]*?</script>' 
```

它将删除“”之间包含字符串“var s = '####'”（4位数字）的任何文本。请注意，我必须对正则表达式和单引号进行转义才能使其正常工作。在某些时候，如果您想非常具体，您可能会考虑方便地使用 [Regex]::Escape 方法......

# jquery - 获取同一级别的 td 元素（按其类）

> ID：11213472
> 
> 赞同：0
> 
> 时间：2012-06-26T18:13:14.893
> 
> 标签：jquery, html, children

我有一张桌子，每行包含 3 `<td>`。现在，我为 分配了一个类名`<tr>`，并为所述的第一个`<td>`分配了另一个类名`<tr>`。我为整个创建了一个单击事件`<tr>`，然后它应该获取第一个`<td>`（具有类名的那个）的 html 值。我使用了 children，因为它似乎确实选择了 right `<td>`，但我不知道如何读取它的 html 值（innerHTML）。

HTML：

```
<tr class="dataset">
    <td class="changeid">2</td>
    <td>Someone's name</td>
    <td>Some other info</td>
</tr> 
```

JS：

```
$(".dataset").click(function() {
    temp = $(this).children(".changeid"); // It only returns 1 result

    // How to get it's HTML value?
} 
```

我不知道这是否是解决它的最佳方法，如果我可以对所有行使用唯一 id，对我来说会更容易，但不幸的是，生成了 HTML，并且不允许给每个行提供不同的 id `<tr>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:24:01.450

你甚至不需要类来识别第一个元素：

```
$(".dataset").click(function() {
 var temp = $(this).children(":first").html();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:17:46.227

要获取元素的`innerHTML`，请使用 jQuery 的[`.html()`](http://api.jquery.com/html/)方法。

```
$(".dataset").click(function() {
    var temp = $(this).children(".changeid").html();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:21:20.063

```
$(".dataset").click(function() {
   var id = $(this).find("td").eq(0).html();
   var name = $(this).find("td").eq(1).html();
   var info = $(this).find("td").eq(2).html();
} 
```

# python - Django DB事务和死锁

> ID：11213481
> 
> 赞同：1
> 
> 时间：2012-06-26T18:13:46.500
> 
> 标签：python, mysql, django, mysql-python, django-orm

当使用 Gunicorn 与多个进程/工作人员一起运行 Django 时，我的一些手动 MySQL 数据库事务遇到了死锁问题。

```
DatabaseError(1205, 'Lock wait timeout exceeded; try restarting transaction') 
```

我的设置使用多个数据库，并且我的函数需要在调用时传递给数据库才能使用。出于这个原因，我不能使用标准的[Django 事务装饰器](https://docs.djangoproject.com/en/1.4/topics/db/transactions/)，因为 db 需要硬编码为参数。我检查了装饰器代码以了解事务是如何管理的，我的函数如下所示：

```
from django.db import connections

def process(self, db, data):

    # Takeover transaction management
    connections[db].enter_transaction_management(True)
    connections[db].managed(True)

    # Process
    try:
        # do things with my_objects...
        for obj in my_objects:
            obj.save(using=db)
        connections[db].commit()
    except Exception as e:
        connections[db].rollback()
    finally:
        connections[db].leave_transaction_management() 
```

谁能发现这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:10:58.053

请注意，您可能希望使用更清晰的`with`-style 语法。以下应该与您上面的代码相同，但更 pytonic。

```
from django.db import transaction
from __future__ import with_statement

def process(self, db, data):

    with transaction.commit_on_success(using=db):
        # do things with my_objects...
        for obj in my_objects:
            obj.save(using=db) 
```

或与装饰师

```
from django.db import transaction

@transaction.commit_on_success(using=db)
def process(self, db, data):    

    # do things with my_objects...
    for obj in my_objects:
        obj.save(using=db) 
```

但是，这并不能解决您的死锁问题..

您可能会成功降低事务隔离级别。mysql 上的默认设置`REPEATABLE READ`对于大多数用途来说太严格了。(oracle 默认为`READ COMMITTED`')

您可以通过将其添加到您的`settings.py`

```
MYSQL_DATABASE_OPTIONS = {'init_command': 'SET storage_engine=INNODB; SET 
                 SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;'}

DATABASES = {
  'default': {  # repeat for each db
       'ENGINE':  ... etc
       ...
       ...
       'OPTIONS': MYSQL_DATABASE_OPTIONS
      }
  } 
```

# python - 选择字符串的一部分进行计算（python）

> ID：11213487
> 
> 赞同：0
> 
> 时间：2012-06-26T18:13:57.793
> 
> 标签：python

我正在做一个有趣的项目，我将进行一些计算，我需要一些帮助。

我的程序中的一个模块：

```
def ARK(rawArk):
    refArk = rawArk/200
    arkTrit = refArk*300
    arkMeg = refArk*333
    arkZyd = refArk*166
    print "Totals from your Arkonor:"
    print "Tritanium=", arkTrit
    print "Megacyte=", arkMeg
    print "Zydrine=", arkZyd
    return arkTrit, arkMeg, arkZyd 
```

现在它只是做简单的除法和乘法。我想要做的是能够用余数做到这一点。

因此，如果 'refArk = rawArk/200' 总共给出 16.3，我希望能够将 16.0 和 0.3 分开并将它们用作单独的变量以进行单独的计算。

至今：

```
def ARK(rawArk):
    refArk = float(rawArk/200)
    arkTrit = refArk*300
    arkMeg = refArk*333
    arkZyd = refArk*166
    print "Totals from your Arkonor:"
    print "Tritanium=", arkTrit
    print "Megacyte=", arkMeg
    print "Zydrine=", arkZyd
    strval = str(refArk)
    head,tail = strval.split(".")
    whole = float(head)
    frac = float("."+tail)
    print whole
    print frac
    return arkTrit, arkMeg, arkZyd

def main():
    rawArk=input("How much Arkonor?")
    ARK(rawArk)
    return

main() 
```

使用“450”作为我的输入值

返回

```
How much Arkonor?450
Totals from your Arkonor:
Tritanium= 600.0
Megacyte= 666.0
Zydrine= 332.0
2.0
0.0 
```

2.0 是对的，但 0.0 应该是 0.25

从 'rawArk/200' 中删除 float() 会产生一个错误：

```
How much Arkonor?450
Totals from your Arkonor:
Tritanium= 600
Megacyte= 666
Zydrine= 332

Traceback (most recent call last):
  File "E:\eve stuff\Calculator\test.py", line 23, in <module>
    main()
  File "E:\eve stuff\Calculator\test.py", line 20, in main
    ARK(rawArk)
  File "E:\eve stuff\Calculator\test.py", line 11, in ARK
    head,tail = strval.split(".")
ValueError: need more than 1 value to unpack 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:17:15.357

可能是先使用轮函数，然后使用拆分

```
refArk = refArk.split(".") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:17:42.450

数值上

```
val1 = 22.0
val2 = 7.0
whole,frac = divmod(val1,val2)
frac = frac/val1 
```

有点黑客，但有字符串

```
val = 22.0/7.0
strval = str(val)
head,tail = strval.split(".")
whole = float(head)
frac = float("."+tail) 
```

无论哪种方式

```
>>> frac
0.14285714286000001
>>> whole
3.0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:24:14.143

为什么不这样做：

```
intpart=int(variable)
decimalpart=variable-intpart 
```

I would **guess** this to be more efficient than casting to a string and then splitting.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T18:16:50.723

IDLE 的以下会议将展示如何解决您的问题。

```
>>> lis=str(refArk).split('.')
>>> lis[-1]='.'+lis[-1]
>>> map(float,lis)
[16.0, 0.3] 
```

# fortran - Fortran Compaq 编译器 6.5 不能接受大于 1.5MB 的数据文件

> ID：11213488
> 
> 赞同：0
> 
> 时间：2012-06-26T18:13:58.820
> 
> 标签：fortran

Fortran 用户，

我需要一种实用的解决方案来解决无聊的问题。假设我有大数据文件，我必须在 fortran 编译器中复制/粘贴。但问题是 fortran 可以接受不大于 1.5 MB 的文件。有没有更好的解决方案不分割文件手册？

示例向量的形式为

V(1)=691627.009959795 - 3428.41117804251*x(1)*x(2) - #156.91392014999*x(2)**2 + 428391.21915942*x(1)*x(3) - 953.4687530 #88931*x(2) *x(3) + 66317.7918091961*x(3)**2 + 159956.172489745*x(1)

V(2)=691627.009959795 - 3428.41117804251*x(1)*x(2) - #156.91392014999*x(2)**2 + 428391.21915942*x(1)*x(3) - 953.4687530 #88931*x(2) *x(3) + 66317.7918091961*x(3)**2 + 159956.172489745*x(1) ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:34:38.043

我没有再安装 CVF，查看 Intel Fortran 的手册，对源文件大小的限制似乎让我难以理解，但一般来说，应该尽量避免将这么多的数据放入源代码文件中。或任何金额。

当然，这并不总是可能的*（嗯，实际上是这样，但现在不要介意......）*，虽然 1.5Mb 不是大量数据，但它可能比源文件中的预期要多。20Mb 肯定太多了。

由于此类文件是计算机生成的（我猜测来自 Mathematica、Octave 或类似系统），因此最简单的方法是生成一个独立的数据文件，从中可以将数据读入适当的数组并在之后进行操作。

*但我们需要更多地了解您是如何获得相关文件的（它是如何生成的）以及您打算如何处理以提供进一步的帮助。

# java - 如何使用 FFmpeg 调整 yuv420sp 的大小

> ID：11213491
> 
> 赞同：0
> 
> 时间：2012-06-26T18:14:11.010
> 
> 标签：java, android, c, ffmpeg

如何将 yuv420sp 数据调整为其他分辨率。我尝试使用 ffmpeg sws_scale 但没有成功。我尝试将 yuv420sp 转换为 yuv420p，然后尝试通过 sws_scale 将 yuv420p 调整为 RGB24，但是当 src 和目标宽度和高度都是相同，但对于不同的分辨率没有得到正确的 rgb24。任何人都可以指导我使用 c 或如果可能的话通过 Java 本身的示例代码。最终调整大小的数据必须在 yuv420p 中。在我的情况下，我正在尝试将 yuv420sp 缩小为例如 640*480 到 320*240 或 176*144。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:21:18.017

做你想做的事情的标准方法是

```
ffmpeg -i input_file -s 320x240 -pix_fmt yuv420p output_file 
```

这对你不起作用吗？

# sql-server - 需要加速使用系统元数据的 SQL Server SP

> ID：11213493
> 
> 赞同：1
> 
> 时间：2012-06-26T18:14:14.380
> 
> 标签：sql-server, query-optimization

让我提前为这个问题的长度道歉。如果不给出所有定义，我看不出如何问它。

我继承了一个 SQL Server 2005 数据库，其中包括一个自主开发的更改跟踪实现。通过触发器，对数据库中几乎每个字段的更改都存储在一组三个表中。在这个数据库的应用中，用户可以请求各种item的历史，返回的不仅仅是item本身的变化，还有相关表的变化。问题在于，在某些情况下，它的速度非常缓慢，并且在某些情况下，请求最终会使应用程序崩溃。当有人请求历史记录时，客户端还报告了其他用户遇到问题。

存储变更数据的表如下：

```
CREATE TABLE [dbo].[tblSYSChangeHistory](
    [id] [bigint] IDENTITY(1,1) NOT NULL,
    [date] [datetime] NULL,
    [obj_id] [int] NULL,
    [uid] [varchar](50) NULL 
```

此表跟踪已更改的表。Obj_id 是 Object_ID() 返回的值。

```
CREATE TABLE [dbo].[tblSYSChangeHistory_Items](
    [id] [bigint] IDENTITY(1,1) NOT NULL,
    [h_id] [bigint] NOT NULL,
    [item_id] [int] NULL,
    [action] [tinyint] NULL 
```

此表跟踪已更改的项目。h_id 是 tblSYSChangeHistory 的外键。item_id 是指定表中更改项的 PK。action 表示插入、删除或更改。

```
CREATE TABLE [dbo].[tblSYSChangeHistory_Details](
    [id] [bigint] IDENTITY(1,1) NOT NULL,
    [i_id] [bigint] NOT NULL,
    [col_id] [int] NOT NULL,
    [prev_val] [varchar](max) NULL,
    [new_val] [varchar](max) NULL 
```

此表跟踪各个更改。i_id 是 tblSYSChangeHistory_Items 的外键。col_id 表示更改了哪一列，prev_val 和 new_val 表示该字段的原始值和新值。

实际上有第四个表支持这种架构。tblSYSChangeHistory_Objects 将简单的英语操作描述映射到数据库中的特定表。

查找项目历史记录的代码非常复杂。这是一个很长的 SP 的一个分支。相关参数如下：

```
@action varchar(50),
@obj_id bigint = 0,
@uid varchar(50) = '',
@prev_val varchar(MAX) = '',
@new_val varchar(MAX) = '',
@start_date datetime = '',
@end_date datetime = '' 
```

我立即将它们存储到局部变量中（因为这样做可以显着加快另一个 SP）：

```
declare @iObj_id bigint,
        @cUID varchar(50),
        @cPrev_val varchar(max),
        @cNew_val varchar(max),
        @tStart_date datetime,
        @tEnd_date datetime

set @iObj_id = @obj_id
set @cUID = @uid
set @cPrev_val = @prev_val
set @cNew_val = @new_val
set @tStart_date = @start_date
set @tEnd_date = @end_date 
```

这是 SP 的那个分支的代码：

```
 create table #r (obj_id int, item_id int, l tinyint)
    create clustered index #ri on #r (obj_id, item_id)
    insert into #r 
        select object_id(obj_name), @iObj_id, 0  
            from dbo.tblSYSChangeHistory_Objects 
            where obj_type = 'U' and descr = cast(@cPrev_val AS varchar(150))
    declare @i tinyint, @cnt int
    set @i = 1
    while @i <= 4
    begin
        insert into #r 
            select obj_id, item_id, @i 
                from dbo.vSYSChangeHistoryFK a with (nolock) 
                where exists (select null from #r where obj_id = a.rel_obj_id and item_id = a.rel_item_id and l = @i - 1)
                and not exists (select null from #r where obj_id = a.obj_id and item_id = a.item_id)
        set @cnt = @@rowcount
        insert into #r 
            select rel_obj_id, rel_item_id, @i 
                from dbo.vSYSChangeHistoryFK a with (nolock) 
                where object_name(obj_id) not in (<this is a list of particular tables in the database>) 
                and exists (select null from #r where obj_id = a.obj_id and item_id = a.item_id and l between @i - 1 and @i)
                and not exists (select null from #r where obj_id = a.rel_obj_id and item_id = a.rel_item_id)
        set @i = case @cnt + @@rowcount when 0 then 100 else @i + 1 end
    end
    select date, obj_name, item, [uid], [action], 
        pkey, item_id, id, key_obj_id into #tCH_R 
        from dbo.vSYSChangeHistory a with (nolock) 
        where exists (select null from #r where obj_id = a.obj_id and item_id = a.item_id) 
        and (@cUID = '' or uid = @cUID) 
        and (@cNew_val = '' or [action] = @cNew_val)
    declare ch_item_cursor cursor for 
        select distinct pkey, key_obj_id, item_id 
            from #tCH_R 
            where item = '' and pkey <> ''
    open ch_item_cursor
    fetch next from ch_item_cursor 
        into @cPrev_val, @iObj_id, @iCol_id
    while @@fetch_status = 0
    begin
        set @SQLStr = 'select @val = ' + @cPrev_val + 
            ' from ' + object_name(@iObj_id) + ' with (nolock)' + 
            ' where id = @id'
        exec sp_executesql @SQLStr, 
            N'@val varchar(max) output, @id int', 
            @cNew_val output, @iCol_id
        update #tCH_R 
            set item = @cNew_val 
            where key_obj_id = @iObj_id 
            and item_id = @iCol_id
        fetch next from ch_item_cursor 
            into @cPrev_val, @iObj_id, @iCol_id
    end
    close ch_item_cursor
    deallocate ch_item_cursor
    select date, obj_name, 
        cast(item AS varchar(254)) AS item, 
        uid, [action], 
        cast(id AS int) AS id 
        from #tCH_R 
        order by id
    return 
```

如您所见，代码使用视图。这是该定义：

```
ALTER VIEW [dbo].[vSYSChangeHistoryFK]
AS
SELECT     i.obj_id, i.item_id, c1.parent_object_id AS rel_obj_id, i2.item_id AS rel_item_id
FROM         dbo.vSYSChangeHistoryItemsD AS i INNER JOIN
                      sys.foreign_key_columns AS c1 ON c1.referenced_object_id = i.obj_id AND c1.constraint_column_id = 1 INNER JOIN
                      dbo.vSYSChangeHistoryItemsD AS i2 ON c1.parent_object_id = i2.obj_id INNER JOIN
                      dbo.tblSYSChangeHistory_Details AS d1 ON d1.i_id = i.min_id AND d1.col_id = c1.referenced_column_id INNER JOIN
                      dbo.tblSYSChangeHistory_Details AS d1k ON d1k.i_id = i2.min_id AND d1k.col_id = c1.parent_column_id AND ISNULL(d1.new_val, 
                      ISNULL(d1.prev_val, '')) = ISNULL(d1k.new_val, ISNULL(d1k.prev_val, '')) --LEFT OUTER JOIN
UNION ALL
SELECT     i0.obj_id, i0.item_id, c01.parent_object_id AS rel_obj_id, i02.item_id AS rel_item_id
FROM         dbo.vSYSChangeHistoryItemsD AS i0 INNER JOIN
                      sys.foreign_key_columns AS c01 ON c01.referenced_object_id = i0.obj_id AND c01.constraint_column_id = 1 AND col_name(c01.referenced_object_id, 
                      c01.referenced_column_id) = 'ID' INNER JOIN
                      dbo.vSYSChangeHistoryItemsD AS i02 ON c01.parent_object_id = i02.obj_id INNER JOIN
                      dbo.tblSYSChangeHistory_Details AS d01k ON i02.min_id = d01k.i_id AND d01k.col_id = c01.parent_column_id AND ISNULL(d01k.new_val, 
                      d01k.prev_val) = CAST(i0.item_id AS varchar(max)) 
```

最后，该视图使用了另一种视图：

```
ALTER VIEW [dbo].[vSYSChangeHistoryItemsD]
AS
SELECT     h.obj_id, m.item_id, MIN(m.id) AS min_id
FROM         dbo.tblSYSChangeHistory AS h INNER JOIN
                      dbo.tblSYSChangeHistory_Items AS m ON h.id = m.h_id
GROUP BY h.obj_id, m.item_id 
```

使用 Profiler 时，视图 vSYSChangeHistoryFK 似乎是罪魁祸首，我的测试表明，特定问题在于 vSYSChangeHistoryItemsD 的两个副本和 foreign_key_columns 表之间的连接。

我正在寻找有关如何在这里提供可接受的性能的任何想法。客户报告有时会等待长达 15 分钟而没有得到结果。我已经测试了将近 10 分钟，至少有一个案例没有结果。

如果 2008 年或以后有新的语言元素可以解决这个问题，我认为客户愿意升级。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:43:04.430

哇，真是一团糟。您的最大收获应该是删除光标。我看到“存在的地方”——这是很好且高效的 b/c，只要它找到一个匹配它就会中止。而且我看到“不存在的地方”——根据定义，必须扫描所有内容。找到前四了吗？使用 ROW_NUMBER() OVER (PARTITON BY [whatever makes it unique] ORDER BY [whatever your id is] 可以做得更好。很难说。select object_id(obj_name), @iObj_id, 0 使它看起来像只有 @ i=1 循环实际上做任何事情（？）

如果这就是它正在做的事情，你可以把它写成

```
SELECT * from
(
select ROW_NUMBER() OVER (PARTITION BY obj_id ORDER BY item_id desc) as Row, 
     obj_id, item_id
FROM bo.vSYSChangeHistoryFK a with (nolock) 
where obj_type = 'U' and descr = cast(@cPrev_val AS varchar(150))
   ) paged
where Row between 1 and 4 
ORDER BY Row 
```

可能会有所帮助的 DBA 级别更改是设置基于日期的分区方案。每隔一段时间滚动到一个新分区。将旧分区放在不同的磁盘上。大多数查询可能只需要访问最近的分区，这将是它以前大小的 1/5，在不更改任何其他内容的情况下使其速度更快。

没有完整的答案，抱歉。那个烂摊子需要几个小时才能解析

# java - 单击菜单项按钮时打开新活动不起作用

> ID：11213499
> 
> 赞同：0
> 
> 时间：2012-06-26T18:14:44.857
> 
> 标签：java, android, android-intent, android-activity

所以我有 2 个活动，在第一个活动中，我有一个菜单项，一旦点击应该打开第二个活动。在我用这个激活的第二个活动中，变化的部分有效，但它没有改变它应该做的事情：

```
 Intent intent = new Intent(this, EditView.class);
            startActivity(intent);
            break; 
```

在第一个活动 onOptionsItemSelected 中，我从菜单中单击一个按钮，在第二个活动中，我有一个不同的布局，我这样做 setContentView(R.layout.second); 要更改布局，我有一个功能性 xml 文件，因为我在另一个项目中尝试过，在清单文件中我有这个：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ro.merca.ionel"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FileList"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".EditView"
            android:label="@string/app_name" />

    </application>

</manifest> 
```

问题是，当我从菜单中单击该选项时，它会加载一个简单的布局，而没有我放入 second.xml 的所有内容......我不知道问题是......

```
public class EditView extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
    Intent intent = getIntent();
    TextView tv = new TextView(this);
    final TextView name = (TextView) findViewById(R.id.name);
    final TextView text = (TextView) findViewById(R.id.text);

    setContentView(tv);

}   
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(1,1,1,"Salveaza Nota").setIcon(android.R.drawable.btn_default);
    menu.add(1,2,2,"Anuleaza Modificari").setIcon(android.R.drawable.btn_default);
    menu.add(1,3,3,"Sterge Nota").setIcon(android.R.drawable.btn_default);
    menu.add(1,4,4,"Share").setIcon(android.R.drawable.btn_default);

    return super.onCreateOptionsMenu(menu);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()){
        case 1 : 
            Intent intent = new Intent(this, EditView.class);
            this.startActivity(intent);
            break;
        case 2 :
            break;
        case 3 :
            break;
        case 4 : 
            break;
        default:
            break;
    }
    return super.onOptionsItemSelected(item);
} 
```

}

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="Nume" />
    <EditText  
        android:id="@+id/name"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" />
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="Text" />
    <EditText
        android:id = "@+id/text"
        android:inputType="text|textMultiLine"
        android:minLines="5"
        android:gravity="top"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 

        />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:27:43.087

你打`setContentView`了两次电话`onCreate()`。删除第二个，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:30:51.737

我在这里有点困惑。如果您只是从第一个活动移动到第二个活动而不传递任何值，那么使用`getIntent()`等有什么用？

写这么多，你就会找到你想要的活动：

```
public class EditView extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
    TextView tv = new TextView(this);
    final TextView name = (TextView) findViewById(R.id.name);
    final TextView text = (TextView) findViewById(R.id.text);
  }   
} 
```

# javascript - JavaScript 中未识别 var（语法错误）

> ID：11213503
> 
> 赞同：-3
> 
> 时间：2012-06-26T18:15:02.040
> 
> 标签：javascript, syntax-error

我一直在努力寻找解决问题的方法。Firebug 说语法错误，而 JSHint 说**“期望一个标识符，而不是看到 'var'。”** 在第 4 行（*var test1 = [*）你能告诉我为什么会发生这个错误吗？谢谢！

```
function name() {
    if (
    var test1 = ['selected': -1, 'AF': 0.02];
    var selectedTest1 = $('#test1').val();
    var rate = rates(selectedTest1);
    var callMinutes = document.calc.minutes.val();
    document.calc.pay.value = selectedTest1 * callMinutes;)
    else(
    (document.calc.test1.value == null) || (document.calc.minutes.value == null || document.calc.minutes.value.length == 0)) {
        document.calc.pay.value = "Incomplete data";
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T18:16:22.870

`var`将语句放在`if`条件中是无效的。除此之外，您的代码可以归结为：

```
if( define some variables here)
else (something that makes no sense) {
    show an error
} 
```

代码完全无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:17:34.133

```
if (var x = 0) 
```

您不能在 if 条件中定义 var

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:17:06.103

您的 if 语句中缺少一个条件。它应该是这样的：

```
if( /* some condition goes here */ ){
    var test1 = [
             'selected': -1,
             'AF': 0.02 
            ];
    var selectedTest1 = $('#test1').val();
    var rate = rates(selectedTest1);
    var callMinutes  = document.calc.minutes.val();
    document.calc.pay.value = selectedTest1 *  callMinutes;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T18:17:14.710

除了你的 if 语句的问题（你没有条件..如果你这样做了，它看起来像：

```
if(condition){
   var...
else {
  (document... 
```

最重要的是，您使用方括号来定义一个对象；javascript 中的对象文字必须在大括号中：

```
var test1 = { 'selected': -1, 'AF': 0.02 }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T18:19:21.203

test1 应该是对象还是数组？您正在混合这两种语法。如果是对象，请使用花括号 { } 而不是方括号 [ ]：

```
var test1 = {
    'selected': -1,
    'AF': 0.02 
}; 
```

# drop-down-menu - 如何使用 Selenium IDE 从下拉列表中选择值

> ID：11213506
> 
> 赞同：14
> 
> 时间：2012-06-26T18:15:20.960
> 
> 标签：drop-down-menu, selenium, ide

我首先使用 Selenium IDE，并且不了解自动化脚本。到目前为止，我能够使用 IDE 进行管理，但一个问题是我无法从下拉列表中随机选择一个值，而是每次都手动输入索引或标签值。

谁能帮我解决这个问题。

谢谢你

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-12T02:48:31.210

我尝试了以下方法并且有效

命令：选择

目标：元素定位器例如：id = card

值：索引=1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:03:59.797

使用 command `select(selectLocator, optionLocator)`，“selectLocator”是从中选择值的下拉列表的 ID，“optionLocator”是正在选择的值。

例如：说一个下拉菜单，`Id="//select[@id='type'"`其中包含“TypeA、TypeB、TypeC、...”之类的值。如果您从下拉列表中选择“TypeA”，您的命令应如下所示：

```
selenium.select("//select[@id='type']", "label=TypeA"); 
```

我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T13:11:49.710

一般的做法是首先点击元素，然后从元素中选择值。

**对于单击：** 1.Command ：单击 2.target ：元素定位器，例如元素的 xpath/id/class。xpath=元素的xpath

**对于选择值：** 1.Command ：选择 2.target ：用于单击的相同元素定位器 3.Value ：要选择/索引的可见文本（您将通过检查该元素来获得它）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:29:58.177

首先获取下拉列表中的项目总数。使用 getSelectOptions 获取选择框的选项数组。然后生成一个介于 0（含）和数组长度（不含）之间的随机整数。然后使用带有索引定位器的 select 来选择随机选择的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-27T13:20:52.510

一个快速而肮脏的 javascript 起点：

```
<form>
  <select id="mySelect" onchange="myFunction()">
    <option>Apple</option>
    <option>Orange</option>
    <option>Pineapple</option>
    <option>Banana</option>
  </select>
</form>

<p id="demo" onclick="myFunction()" >click me</p>

<script>
function myFunction() {

   document.getElementById("mySelect").selectedIndex = Math.floor((Math.random() * document.getElementById("mySelect").options.length));

}
</script> 
```

和（有点）相应的 seleniumIDE runScript 命令：

命令

```
runScript 
```

目标：

```
document.getElementById("myDropdown").selectedIndex = Math.floor(Math.random() * (document.getElementById("myDropdown").options.length-1))+1); 
```

最后的 +1 完全是可选的：我已经包含它以防止 seleniumIDE 选择第一个

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-16T12:25:37.413

使用命令：KeyDown 目标：css=input.comboboxname 值：\40

\40 是向下箭头 Ascii 值

然后使用 \13 在值中进行选择。（将值用于命令和目标相同。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-03T00:07:49.910

在下面尝试过，它奏效了。

```
command: waitForNotVisible
target: class=sub-menu
value : index=3 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-19T22:21:26.093

**命令：**选择

**目标：**搜索网站应用程序的元素。（姓名，身份证）

**价值：**你想看到什么价值/结果？

示例：作为用户，我想选择下拉列表的颜色列表（橙色、蓝色、红色），我想选择*蓝色*。这是一个脚本。

**命令：**选择

**目标：**名称=颜色

**值：**蓝色

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-11-23T16:08:07.177

它将与 WaitForVisible 命令一起使用

# cakephp - Cakephp 限制分页计数器

> ID：11213507
> 
> 赞同：1
> 
> 时间：2012-06-26T18:15:21.947
> 
> 标签：cakephp

我想限制在 cakephp 分页中可见的计数器？我应该怎么办...？目前其默认显示为 1-9 作为页面链接。我尝试了限制，但因为它限制了我每页的帖子。我想限制计数器不每页发布。请帮我。

修改...我根据答案尝试了模数..

我希望我的分页应该是这样的。如果它在第一页，那么。

```
1 2 3 ... Last 
```

如果它在页面中间，那么..

```
First ... 6 7 8 ... Last 
```

如果它在最后那么。

```
First ... 11 12 13 
```

我尝试过的代码是。

```
<?php echo $this->Paginator->numbers(array('modulus' => '2', 'tag' => 'span','first'=>'First','ellipsis'=>'...', 'separator' => ' ', 'last'=>'Last' )); ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T23:37:30.683

查看分页助手的文档：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html)

我认为您想要的是“模数 - 当前页面两侧要包含多少个数字，默认为 8。”

所以在你的视图中，你会有类似的东西：

```
// Limit numbers to 4 either side of current page
echo $this->Paginator->numbers(array('modulus' => 4)); 
```

希望有帮助。

# sql-server - 长存储过程的执行计划中断。如何在 SSMS 中查看？

> ID：11213516
> 
> 赞同：0
> 
> 时间：2012-06-26T18:15:39.803
> 
> 标签：sql-server, sql-server-2005, sql-execution-plan, sql-server-2008

我正在尝试查看具有大量语句、循环等的存储过程的执行计划......正如您可以想象的那样，执行计划真的很长。事实上，SSMS 在我尝试查看的有趣部分之前会感到困惑。

![在此处输入图像描述](../Images/984b22db82dd8d1546caefecc920e6a6.png)

反正有没有看到整个执行计划？

顺便说一句，使用 SSMS 2008 来访问 SQL Server 2005。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:18:55.700

试试免费的[SQL Sentry Plan Explorer](http://sqlsentry.net/plan-explorer/sql-server-query-view.asp)。我们对图形视图进行了许多增强，虽然您不能总是为一个令人讨厌的大计划完善布局，但还有几个其他选项卡可以让您收集有价值的信息，而无需在图形显示上找到它，也无需解析 XML。

（免责声明：我为 SQL Sentry 工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:17:00.623

此外，查看免费的 SSMS 工具，它能够拍摄整个计划的快照。

www.ssmstoolspack.com

# python-3.x - Yum 因键盘中断错误而崩溃

> ID：11213520
> 
> 赞同：73
> 
> 时间：2012-06-26T18:16:08.523
> 
> 标签：python-3.x, redhat, yum, fedora16

我安装了比 Fedora16 (python2.7) 中可用的更新版本的 python (3.2.3)

现在`yum`停止工作。它显示以下错误。

```
[root@localhost yum-3.4.3]# yum
  File "/usr/bin/yum", line 30
   except KeyboardInterrupt, e:
                           ^
SyntaxError: invalid syntax 
```

请建议如何解决错误。这会很有帮助，因为我无法更新或安装任何软件包。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2015-05-09T06:56:41.870

因为`yum`不支持`Python3`。
您可以运行 command `vi /usr/bin/yum`，更改`/usr/bin/python`为`/usr/bin/python2`在第一行。
因此，您可以运行命令`yum`而`Python2`不是`Python3`.

但是请注意，**这将使您的设置不受支持，因此无法维护（就像您所做的那样）。将来您可能会在使用其他系统软件包时遇到其他类似的问题。**
如果您想使用替代 Python 安装，请考虑将其安装`/usr/local`到.`/opt`[`pyenv`](https://github.com/pyenv/pyenv)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2018-01-02T03:01:34.557

当用户升级到 python3 时会出现此问题，只需简单地编辑文件 --> /usr/bin/yum 并将第一行更改为 --> "#!/usr/bin/python2"

上述解决方案并不能解决所有 yum 依赖问题，最好运行以下命令。

sudo ln -s /usr/local/bin/python3 /usr/bin/python3 （将最新的python标记为python3）

sudo ln -sf /usr/bin/python2.7 /usr/bin/python （nake 2.7 作为默认 python）

谢谢，达曼

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-27T06:04:50.683

我猜你是从源代码安装 Python 3.2.3 并使用“make install”作为最后一个命令。该命令具有将系统安装版本命令“python”替换为新版本的不幸副作用。使用“make altinstall”不会取代“python”。

命令“python”只是“python2”的符号链接，而“python2”又是“python2.7”的符号链接。您应该能够通过执行以下命令来恢复“python”：

```
cd /usr/bin
sudo ln -s python2 python 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-10-20T17:41:02.760

谢谢达曼维尔！更改 /usr/bin/yum 中的行有效！

这有点离题，可能会被删除，但它可能会对某人有所帮助。

这些是我用来在 Centos 上安装 Python 3.7 并修复 yum 错误的步骤。

从[https://www.python.org/下载](https://www.python.org/)

```
tar -xvf
./configure --enable-optimizations

make
make install 
```

或者

```
make altinstall 
```

*make altinstall 用于防止替换默认的 python 二进制文件 /usr/bin/python。*

```
cd /usr/bin 
```

# 删除当前符号链接到以前的版本

```
rm python 
```

输出：rm：删除符号链接'python'？是的

# 找到新版本的位置

```
whereis python3.7
 OUTPUT: python3: /usr/local/bin/python3.7 
```

# 验证这是正确的

```
 /usr/local/bin/python3.7 --version
  OUTPUT: Python 3.7.0 
```

# 创建指向新版本位置的符号链接

```
ln -s /usr/local/bin/python3.7 python

python --version 
```

输出：Python 3.7.0

# yum 命令将显示以下错误：

```
 File "/bin/yum", line 30
      except KeyboardInterrupt, e:

  SyntaxError: invalid syntax 
```

# 将此文件的第一行从 using python 更改为 python2

```
 vi /usr/bin/yum 
    #!/usr/bin/python2 
```

参考：[https ://tecadmin.net/install-python-3-7-on-centos/](https://tecadmin.net/install-python-3-7-on-centos/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-29T12:44:55.740

真正的答案 - 确保您回到可支持的 python 版本（如果您正在查看此问题以解决 RHEL 7 的问题）。

```
cd /usr/bin
sudo unlink python
sudo ln -s python2 python 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-27T02:48:03.190

你的 yum 寻找 python2。让我们使用 'alternatives'在*pythons2*和*python3***之间切换** 。

 ***   运行 --> sudo 替代 --config python
*   Enter 以保留当前选择[+]，或输入选择编号：

如果你不配置它。怎么做？

*   sudo 替代品 --install /usr/bin/python python /usr/local/bin/python3.8 60

*   sudo 替代品 --install /usr/bin/python python /usr/bin/python2 50

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-10T05:51:02.343

这只是一个二进制链接问题。您可以`/usr/bin/python2`从任何系统复制工作并复制到当前系统位置`/usr/bin/python2`

```
#cd /usr/bin

#ln -s python2 python 
```**

# jquery - 延迟加载失败？

> ID：11213522
> 
> 赞同：0
> 
> 时间：2012-06-26T18:16:11.393
> 
> 标签：jquery, jquery-plugins

我有多个带有 class="strip" 的 div，并且在每个 div 中有许多延迟加载样式的图像。（该类设置为 overflow='hidden' 以便浏览器只看到一部分图像，这些是lazyload 将加载的图像）

然后我调用lazyload：

```
$(function(){
  $("img.lazy").lazyload({  
    container: $(".strip")
  });
}); 
```

它在第一个水平图像条上完美地工作，在接下来的“.strip”类中它失败了。它只在 1 个类上运行并退出，就好像我调用了一个 ID 而不是一个类。关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:49:21.923

您遇到的问题是 div 类与 div ID 的类不同。您需要使用 # 作为 ID 和 . 对于类，请参见下面的代码示例。

```
<script>
$(function(){
    $("img.lazy").lazyload({  
        container: $('.strip', '#strip')
    });
});
</script> 
```

# c - 有没有办法在 Busy Box 或 Tiny Core Linux 中更快地 ping？

> ID：11213525
> 
> 赞同：0
> 
> 时间：2012-06-26T18:16:14.857
> 
> 标签：c, linux, ping, busybox, tiny-core-linux

本文末尾的解决方案。

默认情况下，时间设置为一秒，在通常的 iputils 版本的 ping 下，有一个选项可以使用 -i 开关减少这个数字。我需要更快地 ping，因为在需要多次运行的某个测试中我有 120 个 ping。

我尝试从busybox源修改ping.c的源，但我对编译不太了解，我收到错误“找不到libbb.h”，我在busybox上找不到其他有类似错误的人.

有谁知道我的 ping 速度超过每秒 1 秒的方法，我希望尽可能降低到 0.1 或 0.05 秒。

提前致谢

**解决方案**

如果有人来寻找答案，我想出的解决方案要好得多。如果您编写一个带有 -c 1 标志的 ping 脚本，并自己计算失败次数，您可以更快地 ping。

例子：

```
fails=0
for i in `seq 1 20`
do
  x=`ping -c 1 192.168.1.1 | grep received | cut -d' ' -f4`
  if [ x -eq 0 ]
  then
    fails=$(($fails+1))
  fi
done
echo $fails fails 
```

完毕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:50:20.073

您是正确的，因为您必须修改 ping.c 文件。正如您所确定的，BusyBox ping 不支持 -i 开关。

你为什么平台构建这个？PC，嵌入式系统？

**选项 1：** 从 BusyBox 修改 ping.c 并重新编译 BusyBox。为此，您将在 BusyBox 项目的根目录中使用“make”。

> user@linux:~/busybox-1.19.2$ make

**选项 2：不理会 BusyBox 并从另一个存档（例如**[iputils](http://www.skbuff.net/iputils/) ）获取 ping.c 可能更容易和更简单。这支持 -i 开关并低至 0.2 秒。编译 ping.c：

> user@linux:~/iputils-s20101006$ 进行ping

# ios - 验证 iCloud 容器上的文档是否存在

> ID：11213532
> 
> 赞同：0
> 
> 时间：2012-06-26T18:16:29.583
> 
> 标签：ios, icloud, nsmetadataquery, nsfilecoordinator

我正在使用 NSMetadataQuery 来检测我的应用程序 iCloud 容器中是否存在文档，即使该文件尚未在本地下载也是如此。

带有 NSFilePresenter 的 NSFileCoordinator 可以做同样的事情吗？验证文件是否存在，即使它在本地仍然不可用？

更新：我已经使用了一段时间 NSMetadataQuery 来检测文件是否存在于我的 ubiquity 容器中。但至少在 10.8.2 上测试，它并不总是有效。对于文件的存在，我收到了很多误报。

我知道其他人一直在使用我相信文件协调员。有没有人对此有任何意见，或者更好地指出我如何使用它们的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:09:12.917

如果您已经在 iCloud 中拥有您一直在尝试的项目的有效 URL，则向`NSFileCoordinator`' 的方法发送消息并使用它在块`coordinateReadingItemAtURL:options:error:byAccessor:`中执行您想要的操作（并通过查看错误检查错误结果）应该可以工作查询使用。`byAccessor``urlToUse``NSMetadataQuery`

并且您可以创建`NSFileCoordinator`using `initWithPresenter:nil`，它将适用于所有文件演示者。

因此，您是否已经知道要搜索的项目的 URL 似乎有点问题。using`NSMetadataQuery`显然会更方便地创建一个`NSPredicate`，当您还不知道它们的 URL 时，它将为您返回 iCloud 普遍存在容器中的项目的枚举。

（我无法帮助解释您的误报，尽管我倾向于检查`NSPredicate`您正在为您要查询的文件创建的内容，或者我会查看您是否为`NSMetadataQueryDidUpdateNotification`&`NSMetadataQueryDidFinishGatheringNotification`和那个设置了通知你还没有取消它们。）

# android - 错误：OSCOKIRQ 未能断言

> ID：11213536
> 
> 赞同：1
> 
> 时间：2012-06-26T18:16:40.393
> 
> 标签：android, c, arduino, adk

我正在尝试从我的 Arduino Mega ADK 开始连接到我的 Android，但每当我尝试 acc.powerOn()

错误：OSCOKIRQ 未能断言

这是我正在尝试运行的固件：

```
#include <Wire.h>
#include <Servo.h>

#include <Max3421e.h>
#include <Usb.h>
#include <AndroidAccessory.h>

int led = 13;

int EnableMotors = 22;

int Motor1FW = 24;
int Motor1RW = 26;

int Motor2FW = 28;
int Motor2RW = 30;

AndroidAccessory acc("FRBB",
             "UgvBr",
             "DemoKit Arduino Board",
             "1.0",
             "http://www.android.com",
             "0000000012345678");

// the setup routine runs once when you press reset:
void setup() {

  // Setting Serial at 115200 bps
  Serial.begin(115200);

  // initialize the digital pin as an output.
  pinMode(led, OUTPUT);

  // Set up motor configs
  pinMode(EnableMotors, OUTPUT);
  pinMode(Motor1FW, OUTPUT);
  pinMode(Motor1RW, OUTPUT);
  pinMode(Motor2FW, OUTPUT);
  pinMode(Motor2RW, OUTPUT);

  // Powering the accessory
  acc.powerOn();             ///// <<<<<<<<<<< ERROR

}

// the loop routine runs over and over again forever:
void loop() {

  if(acc.isConnected()){

    digitalWrite(led, HIGH);   // turn the LED on (HIGH is the voltage level)
    digitalWrite(EnableMotors, HIGH);
    digitalWrite(Motor1FW, HIGH);
    digitalWrite(Motor2FW, HIGH);

    delay(2000);

    digitalWrite(led, LOW);   // turn the LED on (HIGH is the voltage level)
    digitalWrite(EnableMotors, LOW);
    digitalWrite(Motor1FW, LOW);
    digitalWrite(Motor2FW, LOW);

    delay(2000);
  }

} 
```

我一直在到处寻找，但我还没有找到解决这个问题的方法。我还在 1.0.1 上尝试了带有 Arduino.app 的 DemoKit，但仍然是同样的问题。我正在使用 Mac 开发它，但我认为这不是问题。

出于测试目的，我上传了一个让 LED 闪烁的代码，它工作得很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T07:13:53.163

花了 8 个小时来解决完全相同的问题。好像 Max3421e.cpp 有问题。尝试更换：

```
boolean MAX3421E::reset()
{
  byte tmp = 0;
    regWr( rUSBCTL, bmCHIPRES );                        //Chip reset. This stops the oscillator
    regWr( rUSBCTL, 0x00 );                             //Remove the reset
    while(!(regRd( rUSBIRQ ) & bmOSCOKIRQ )) {          //wait until the PLL is stable
        tmp++;                                          //timeout after 256 attempts
        if( tmp == 0 ) {
            return( false );
        }
    }
    return( true );
} 
```

和

```
boolean MAX3421E::reset()
{
    regWr( rUSBCTL, bmCHIPRES );                        //Chip reset. This stops the   oscillator
    regWr( rUSBCTL, 0x00 );                             //Remove the reset
    while(!(regRd(rUSBIRQ) & bmOSCOKIRQ)) ;
} 
```

在位于 USB_Host_Shield 库（在您的 Arduino IDE 库文件夹中）的 Max3421e.cpp 中。基本上，在 PLL 真正稳定之前，该更改不允许退出。

至少为我工作，祝你好运（原始提示和更多关于修复的信息：http: //arduino.cc/forum/index.php?topic= [68205.0](http://arduino.cc/forum/index.php?topic=68205.0)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T16:42:16.450

将 USB_Host_Shield_2.0 库与 Arduino Mega ADK 一起使用。

[https://github.com/felis/USB_Host_Shield_2.0](https://github.com/felis/USB_Host_Shield_2.0)

重要的！！！

要将此库与官方 Arduino ADK 一起使用，请取消注释 avrpins.h 中的以下行：

```
#define BOARD_MEGA_ADK 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T05:45:13.627

“OSCOKIRQ 无法断言”通常发生在板子内部的 Max IC 工作不正常时。这可能在两种情况下发生

*   Maxim IC 没有获得足够的功率。（在这种情况下，请尝试将外部电源连接到您的电路板）
*   Maxim IC周围的电路存在一些问题。如果是这种情况，那么您可能需要更换电路板。

所以首先尝试连接外部电源，看看是否可以解决问题。否则你可能不得不更换电路板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T03:57:35.527

对我来说超级简单（有同样的问题），只需在之前添加一个延迟`acc.powerOn()`

我看到的示例增加了 100，但我认为启动速度足够快 500。即

```
void setup()
{
  // set communiation speed
  Serial.begin(9600);
  pinMode(LED_PIN, OUTPUT);
  delay(500);
  acc.powerOn();
} 
```

# eclipse - 在 Aptana Studio 3 上使用 Eclipse Marketplace

> ID：11213542
> 
> 赞同：3
> 
> 时间：2012-06-26T18:17:01.727
> 
> 标签：eclipse, svn, eclipse-plugin, aptana

我目前正在试用 Aptana Studio 3 进行 PHP 开发（我对所有这些都很陌生），我偶然发现了一个问题。我注意到 Eclipse 有一个托管各种插件的 Marketplace，我想安装一个可以帮助我进行版本控制的插件。

但是，我在 Aptana 下找不到 Eclipse Marketplace 对话框。有没有人以前做过这个（在 Aptana 中安装 Eclipse Marketplace 的东西）？

此外，这有点离题，但我想使用 Java.net 作为我将存储我的存储库的地方。据我所知，NetBeans 内置了对 Java.net 的支持。Eclipse/Aptana Studio 有类似的东西吗？

**编辑：**如果有帮助，我将 Aptana Studio 安装为独立版本，而不是 Eclipse 上的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:21:29.787

尝试帮助/安装新软件，然后单击可用软件站点链接。您可能会在列表中找到 eclipse Helios 发布目录，只需选中它即可激活它。许多第三方包都有自己的发布站点，您可以在同一个对话框中添加它们。

# windows-phone-7 - 如何在 Windows phone 7 上使用屏幕方向显示文本？

> ID：11213548
> 
> 赞同：0
> 
> 时间：2012-06-26T18:17:21.333
> 
> 标签：windows-phone-7, windows-phone-7.1, screen-orientation

我正在学习如何使用支持的方向来更改文本块中的值或文本。我想要的是当设备倾斜到横向模式时，文本块应该显示“再见”，当它倾斜到纵向模式时，它应该说“欢迎”

我想知道 if() 语句中应该使用哪些关系运算符，以便它给出正确的输出。

我应该在里面使用`if()`什么？

1.  `if(Orientation.Equals(SupportedOrientation.Portrait)) { // display "Welcome"}`
2.  `if(SupportedOrientation.Equals(SupportedPageOrientation.Portrait)) {// display "Welcome"}`

如何使用方向来更改我想要的任何值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:30:07.650

您可以使用 PhoneApplicationPage 类的 OrientationChanged 事件，或者如果您在页面类中编写代码，则覆盖 OnOrientationChanged 方法。

```
this.OrientationChanged += new EventHandler<OrientationChangedEventArgs>(MainPage_Orientationchanged)

void MainPage_OrientationChanged(object sender, OrientationChangedEventArgs e)

  {
     if (orientation == PageOrientation.LandscapeLeft ||
     orientation == PageOrientation.LandscapeRight)

  {

    textblock.text = bye;

  }

if (orientation == PageOrientation.PortraitLeft ||
     orientation == PageOrientation.PortraitRight)

{

    textblock.text = welcome;
}

 } 
```

# powershell - 如何制作一个空运行的powershell脚本

> ID：11213549
> 
> 赞同：0
> 
> 时间：2012-06-26T18:17:21.767
> 
> 标签：powershell

我写了一个 text.psl 并想试运行它，我还需要写什么？它需要文件中的其他参数吗？或者我需要创建什么样的参数？

我创建了一个 $WhatIf，但它没有用......

# facebook - 用户离线时访问令牌会起作用吗？

> ID：11213550
> 
> 赞同：1
> 
> 时间：2012-06-26T18:17:26.510
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-access-token

我已经阅读了[offline-access-removal](http://developers.facebook.com/roadmap/offline-access-removal/)，[如何处理过期的令牌](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)以及[如何在 offline_access 弃用后延长访问令牌的有效性](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation/9035036#9035036)。

他们讲述了离线 access_token 的弃用以及获得 60 天令牌的方法。

但我有一个非常基本的问题。

**即使他/她不在线，我也可以代表用户发帖吗？** （当然有 60 天的扩展令牌）

*在我的下一个项目中，我需要在用户交互之前自动从 rss 提要发布到用户的页面和墙上。我可以这样做 60 天吗？*

如果您的回答是肯定的，那么[场景 4：用户退出 Facebook](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:19:21.320

是的，它会起作用。虽然，这是 TIAS 问题（试试看）。

针对编辑后的问题，“如果用户注销”——您的访问令牌将保持有效。这仍然是同一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:17:16.180

# 是的

**您可以**在用户墙上发布，甚至用户从 facebook 注销（这也是我的个人经验，我使用 60 天 access_token 代表我发布并从数据库中获取发布数据）一切正常

我想你仍然感到困惑所以什么是**注销** 意味着我猜这里是注销意味着用户停用他/她的帐户

想想这里的注销意味着注销/注销是否比 60 天 access_token 的好处

**这是注销意味着从帐户中完全注销**

希望这能解决你的困惑

# c# - 模拟私有字段

> ID：11213553
> 
> 赞同：3
> 
> 时间：2012-06-26T18:17:38.340
> 
> 标签：c#, unit-testing, moq, rhino-mocks, nmock

我知道有人问过类似的问题，但我还没有找到明确的解决方案。我试图从一个大班模拟一个私人领域。私有字段在一些较早的方法中被实例化，我正在尝试对引用该字段的后一种方法进行单元测试。

所以我在课堂上有一个较早的方法：

```
public bool validateAll(ref DataEntry[] oEntries, string sMediaPlanId, ITemplateGenerator oTempGen)
{
  ...
  // private field that I am trying to mock
  this._sMediaPlanObjective = (MPWrapper.Instance).getMediaPlanObjective(sMediaPlanId);
  ...
} 
```

我正在尝试对引用私有字段的方法进行单元测试：

```
public bool validateFlightObjective(ref MPDataEntry oEntry)
{
  ...
  string entryFlightObjective = oEntry.getFlightObjective();
  string mediaPlanObjective = this._sMediaPlanObjective;

  if (entryFlightObjective != mediaPlanObjective)
  {
    return false;
  }
  ...

  return true;      
} 
```

鉴于我有一个大班，这只是我想测试的一种方法，有没有可能的方法来模拟这个私有字段？我错过了一些基本的东西还是应该考虑其他方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:19:23.543

您不能模拟*任何*私有的、静态的或本质上不可覆盖的东西（这是免费的模拟库[限制](https://stackoverflow.com/a/9065036/343266)）。

在这种情况下（当看起来必须测试成员时）您通常会做的*是*`private`将您的成员提取到单独的类中并将其作为依赖项[*注入到测试类中。*](http://en.wikipedia.org/wiki/Dependency_injection)*`private`[](http://en.wikipedia.org/wiki/Dependency_injection)*

 **在您的情况下，您实际上需要提取创建的代码`_sMediaPlanObjective`，即这一行：

```
this._sMediaPlanObjective =
    (MPWrapper.Instance).getMediaPlanObjective(sMediaPlanId); 
```

提供`getMediaPlanObjective`方法的对象应该注入到您测试的类中。如果这样做，您可以简单地模拟该对象并告诉它返回模拟版本的`_sMediaPlanObjective`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:52:30.483

没有理由对`private`字段进行任何类型的测试。

使用对象，您可以将`public`方法作为对象 API 引用。对象本身可以根据您对其执行的操作来改变状态 - 但它会反映在其他`public`方法/对 DAL 的访问中（数据库/注册表/文件/任何其他不在内存中的资源）

因此，在您的情况下，您可以进行这样的单元测试：

按照您的期望调用初始化私有字段的方法，然后 -

*   `validateFlightObjective`使用您知道必须根据“想要成为状态”返回 false 的参数调用`_sMediaPlanObjective`，并验证结果是否为 false。

*   `validateFlightObjective`使用您知道必须根据“想要成为状态”返回 true 的参数调用`_sMediaPlanObjective`，并验证结果是否为 true。

如果你发现很难测试这个对象，那么这可能是一种“气味”——也许你在那里有不止一个责任，你应该开始重构并将类拆分为更容易测试的更小的类

它有点长，但我希望它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T16:29:49.893

您可以使用 JustMock 框架。例如：

```
double value = 0;
var fakeFilterSetHelper = Mock.Create<FilterSetHelper>(Behavior.CallOriginal);
Mock.NonPublic.Arrange<double>(fakeFilterSetHelper, memberName: "GetPriceRangeFromSession").Returns(value); 
```**

# c# - Response.WriteFile 两次写入内容

> ID：11213560
> 
> 赞同：4
> 
> 时间：2012-06-26T18:17:52.227
> 
> 标签：c#, asp.net, download, response, response.write

这是我的代码..

```
 string attachment = "attachment; filename=Call-Details-Report-" + startDate.SelectedDate.Value.ToString("MM-dd-yyyy") + ".csv";
        Response.Clear();
        Response.ClearHeaders();
        Response.ClearContent();
        Response.AddHeader("Content-Disposition", attachment);
        Response.ContentType = "text/csv";
        Response.AddHeader("Pragma", "public");
        Response.WriteFile(downloadLocation+"\\"+fileName);
        Response.End(); 
```

我正在使用上面的代码从一个位置下载一个 csv 文件。但令人惊讶的是，内容被两次或三次写入我下载的文件中，尽管实际上服务器上的文件并非如此。我正在写我在 c# 中的代码。上面的代码在本地机器上运行良好，但问题出在生产服务器上。

这是我的完整方法

```
 private void DownloadReport(string query)
{
    string downloadFolderPath = "";
    string filePath = "";
    string dbAndApplicationServerStatus = ConfigurationManager.AppSettings["SameDBAndApplicationServer"] != null ? ConfigurationManager.AppSettings["SameDBAndApplicationServer"] : "1";
    if (dbAndApplicationServerStatus == "0")
    {
        Log.Write("So the DB And Application are on differrent servers,hence trying to read Download folder path on DB Server....");
        downloadFolderPath = ConfigurationManager.AppSettings["ReportDownloadLocation"] != null ? ConfigurationManager.AppSettings["ReportDownloadLocation"] : "-1";
        Log.Write("Download Path is " + downloadFolderPath);
    }
    else
    {
        Log.Write("So the DB and Application and Db are on same server......");
        downloadFolderPath = Server.MapPath("Download");
        downloadFolderPath = downloadFolderPath.Replace("\\", "//");
        if (!Directory.Exists(downloadFolderPath))
        {
            Directory.CreateDirectory(downloadFolderPath);
        }
        Log.Write("Download Path is " + downloadFolderPath);
    }
    string status="";
    StringBuilder headerQuery = new StringBuilder();
    StringBuilder rowQuery = new StringBuilder();
    StringBuilder sqlQuery = new StringBuilder();
    filePath = downloadFolderPath;
    string folderName = DateTime.Now.ToString("MM-dd-yyyy");

    string timeStamp = DateTime.Now.ToString("MM-dd-yy-HH-mm-ss");
    string fileName = "Call-Details-Report-" + startDate.SelectedDate.Value.ToString("MM-dd-yyyy") + "_" + timeStamp + ".csv";
    filePath = filePath + "/" + fileName;

    bool commaRequired = false;

    sqlQuery.Append("SELECT * INTO OUTFILE '");
    sqlQuery.Append(filePath);
    sqlQuery.Append("' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\n' FROM (");
    headerQuery.Append("Select ");
    rowQuery.Append("(Select ");

    #region Creating Query
    /*Sql Query is Created  in this region*/
    #endregion

    if (!CdrSearch.WriteReportToFile(sqlQuery.ToString(),out status))
    {
        Log.Write("Failed to generate the file to download......");
        WebPagesHelper.ShowMessage(ref lblMessage, WebPagesHelper.MessageType.Message, status);
    }
    else
    {
        Log.Write("Succesfully generated file to Download");
        string downloadLocation = Server.MapPath("Download");
        if (dbAndApplicationServerStatus == "0")
        {
            WebClient webClient = new WebClient();
            string path = ConfigurationManager.AppSettings["DownloadURL"] != null ? ConfigurationManager.AppSettings["DownloadURL"].ToString() : "";

            if (!Directory.Exists(downloadLocation))
            {
                Directory.CreateDirectory(downloadLocation);
            }
            if (File.Exists(downloadLocation + "\\" + fileName))
            {
                File.Delete(downloadLocation + "\\" + fileName);
            }
            webClient.DownloadFile(path + fileName, downloadLocation + "\\" + fileName);

        }
        Log.Write("Configured Download Location on Application" + downloadLocation);
        string attachment = "attachment; filename=Call-Details-Report-" + startDate.SelectedDate.Value.ToString("MM-dd-yyyy") + ".csv";
        Response.Clear();
        Response.ClearHeaders();
        Response.ClearContent();
        Response.AddHeader("Content-Disposition", attachment);
        Response.ContentType = "text/csv";
        Response.AddHeader("Pragma", "public");

        Log.Write(downloadLocation + "\\" + fileName);

        Response.WriteFile(downloadLocation+"\\"+fileName);
        Response.SetCookie(new HttpCookie("DStatus", "Completed"));
        Response.End();
    }
} 
```

并且上面的方法只在单击按钮时立即调用一次，所以这里没有任何循环的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:41:26.140

显然发生了一些奇怪的事情。您已经说过它在开发中有效但在生产中无效 - 您在两个环境中使用相同的服务器配置（即您在开发中使用 1 个服务器但在生产中使用 2 个服务器？）

假设我已经理解了您的代码，您可能有 3 个步骤...

*   从 SQL 生成报告并将其写入文件
*   如果文件存储在不同的服务器上，请将其下载到 Web 服务器
*   服务它

所以，在更复杂的场景中（我假设 Production 是），在流程的哪个步骤，您开始看到重复输入？在服务器上生成报告，在 Web 服务器的副本上，还是在从 Web 服务器获取报告后仅在客户端中？

我看不出有任何理由说明您将文件提供给客户端的代码会复制数据，因此只能假设它在某个时间点之前发生过。

如果您可以使用 Firebug/Fiddler/ 会很有帮助？发布从网络服务器到客户端的传输的确切内容

（顺便说一句，您可能想查看`System.IO.Path`用于操作路径的类，它使您的代码更具可读性和健壮性 - 不再担心尾部斜杠！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:52:23.280

您可以检查以下几行的含义：

```
webClient.DownloadFile(path + fileName, downloadLocation + "\\" + fileName); 

Response.WriteFile(downloadLocation+"\\"+fileName); 
```

如果他们真的在做同样的事情，请通过评论其中一个来尝试。作为安全措施，请在下载完成之前禁用该按钮。

当我尝试以下代码（甚至在 IIS 上发布）时，它只是按预期下载一次。

```
 protected void Button1_Click(object sender, EventArgs e)
        {
            string attachment = "attachment; filename=Call-Details-Report-" + DateTime.Now.ToString("MM-dd-yyyy") + ".txt";
            Response.ContentType = "text/html";
            Response.AddHeader("Content-Disposition", attachment); 
            Response.AddHeader("Pragma", "public");

            Response.WriteFile(@"C:\test.txt");
            Response.SetCookie(new HttpCookie("DStatus", "Completed")); 

            Response.End();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:48:34.300

好的，所以真正的罪魁祸首是 Response.WriteFile 在这种情况下。在我的情况下，我猜是因为数据的大小非常大使用 Response.TransmitFile.Left 没有其他选项我更改了我的代码并使用了 Response.TransmitFile 和尤里卡！问题已解决。下载文件中不再有重复记录。虽然原因仍然未知，但 Response.TransmitFile 解决了问题.....

# c++ - 我如何找到进程正在运行的物理套接字 ID/编号？

> ID：11213561
> 
> 赞同：2
> 
> 时间：2012-06-26T18:18:03.340
> 
> 标签：c++, c, windows

我想知道是否有任何方法可以找到当前进程正在运行的实际物理处理器/套接字编号，或者提供逻辑处理器编号的相同映射。

我有一个 8 插槽系统，总共有 128 个（0-127）逻辑处理器。根据我在 msdn 中阅读的内容，它们将分为 2 个处理器组，每组 64 个逻辑处理器。 [http://msdn.microsoft.com/en-us/library/dd405503](http://msdn.microsoft.com/en-us/library/dd405503)

我尝试从 cpuid 查看 cpuid 和 GetNumaProcessorNodeEx，APIC id 有助于识别逻辑处理器 ID，从 GetNumaProcessorNodeEx 中，我得到了 numa 节点（如果有 64 个或更少的逻辑处理器，我发现这很有用）是不是也如果逻辑处理器是超线程，可能吗？

我正在尝试创建这样的工具。

处理器编号 - 插槽/核心 ID/HT

处理器 0 - 0/0/0

处理器 1 - 0/1/1

处理器 2 - 0/2/0

...

处理器 8 - 1/0/0

处理器 9 - 1/1/1

...

任何帮助或解决这个问题的链接都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:00:49.510

套接字/核心/线程层次结构位于 APIC ID 的位中。
N 个低位是线程，M 个低位是核心，其余高位是套接字。
要找到 N 和 M，您需要使用一些 CPUID 代码：
代码 1 为您提供每个套接字的线程数（在 EBX 中的某个位置）。
代码 4 为您提供每个插槽的核心数（在 EAX 中）。
例如，如果每个插槽有 12 个线程和 6 个核心，那么最低位是线程 ID，接下来的 3 个是核心，其余的是插槽。

# apache-pig - 使用 Apache Pig 的数据透视表

> ID：11213567
> 
> 赞同：5
> 
> 时间：2012-06-26T18:18:42.640
> 
> 标签：apache-pig, hadoop-streaming

我想知道是否可以在 Apache Pig 中一次性旋转表格。

输入：

```
Id    Column1 Column2 Column3
1      Row11    Row12   Row13
2      Row21    Row22   Row23 
```

输出：

```
Id    Name     Value
1     Column1  Row11
1     Column2  Row12
1     Column3  Row13
2     Column1  Row21
2     Column2  Row22
2     Column3  Row23 
```

真实数据有几十列。

我可以用 awk 一次性完成，然后用 Hadoop Streaming 运行它。但是我的大部分代码是 Apache Pig，所以我想知道是否可以在 Pig 中有效地完成它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T14:27:59.480

您可以通过两种方式做到这一点： 1\. 编写一个返回一袋元组的 UDF。这将是最灵活的解决方案，但需要 Java 代码；2\. 像这样写一个死板的脚本：

```
inpt = load '/pig_fun/input/pivot.txt' as (Id, Column1, Column2, Column3);
bagged = foreach inpt generate Id, TOBAG(TOTUPLE('Column1', Column1), TOTUPLE('Column2', Column2), TOTUPLE('Column3', Column3)) as toPivot;
pivoted_1 = foreach bagged generate Id, FLATTEN(toPivot) as t_value;
pivoted = foreach pivoted_1 generate Id, FLATTEN(t_value);
dump pivoted; 
```

运行这个脚本让我得到以下结果：

```
(1,Column1,11)
(1,Column2,12)
(1,Column3,13)
(2,Column1,21)
(2,Column2,22)
(2,Column3,23)
(3,Column1,31)
(3,Column2,32)
(3,Column3,33) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T20:40:38.237

我从 id 1 中删除 col3 以显示如何处理可选（NULL）数据

Id 名称 值 1 Column1 Row11 1 Column2 Row12 2 Column1 Row21 2 Column2 Row22 2 Column3 Row23

--pigscript.pig

```
data1       = load 'data.txt' using PigStorage() as (id:int, key:chararray, value:chararray);
grped       = group data1 by id;
pvt         = foreach grped {
    col1        = filter data1 by key =='Column1';
    col2        =filter data1  by key =='Column2';
    col3        =filter data1  by key =='Column3';
    generate flatten(group) as id,
        flatten(col1.value) as col1, 
        flatten(col2.value) as col2, 
        flatten((IsEmpty(col3.value) ? {('NULL')} : col3.value)) as col3; --HANDLE NULL
};
dump pvt; 
```

结果：

(1,Row11,Row12,NULL)

(2,Row21,Row22,Row23)

# delphi - Indy TCP 服务器在停用时冻结

> ID：11213571
> 
> 赞同：3
> 
> 时间：2012-06-26T18:18:54.703
> 
> 标签：delphi, delphi-xe2, deadlock, indy, indy10

我有一个 Indy 服务器`TIdTCPServer`，它有 3 个用于不同端口的绑定。如果我将客户端连接到这 3 个端口，然后停用服务器，它就会陷入似乎是死锁的状态。无论我做什么，它都不会响应我的点击，甚至不会向 Windows 报告“不响应”。如果我在停用服务器之前断开客户端，一切都会完美。我的意思是“停用”，如`Server.Active:= False;`.

有没有其他人经历过这个？可能是什么原因造成的？我在这里没有发生任何跨越线程的事情，这可能会导致死锁（例如 GUI 更新）。我尝试了防冻组件`TIdAntiFreeze`，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T19:31:25.993

`TIdTCPServer`是一个多线程组件。服务器停用期间的死锁意味着其一个或多个客户端线程未正确终止。这通常意味着您的服务器事件处理程序正在做他们不应该做的事情，通常要么捕获并丢弃 Indy 的内部异常，要么与忙于终止服务器的线程上下文同步，或者在 Indy 之外的其他事情上死锁。如果没有看到您的实际代码，就无法确定究竟是哪种情况，但导致这种死锁的总是用户错误。

`TIdAntiFreeze`仅影响在主线程上下文中运行的 Indy 组件。TIdTCPServer 没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T18:51:22.583

我在 Form.OnClose 上添加了这段代码效果很好！

```
过程 TformSFTP.FormClose（发件人：TObject；var Action：TCloseAction）；
变量
  iA：整数；
  上下文：TidContext；
开始
 如果 sftpServidorFTP.Active 那么
     用 sftpServidorFTP.Contexts.LockList 做
        尝试
           对于 iA := Count - 1 down to 0 do
           开始
              上下文：=项目[iA]；
              如果 Context = nil 则
                 继续;
              Context.Connection.IOHandler.WriteBufferClear；
              Context.Connection.IOHandler.InputBuffer.Clear；
              Context.Connection.IOHandler.Close；
              如果 Context.Connection.Connected 那么
                 上下文.连接.断开；
           结尾;
        最后
           sftpServidorFTP.Contexts.UnlockList；
        结尾;如果 sftpServidorFTP.Active 那么

 sftpServidorFTP.Active := False; 
```

结尾;

# haskell - Haskell Monad 绑定柯里化

> ID：11213574
> 
> 赞同：2
> 
> 时间：2012-06-26T18:19:07.163
> 
> 标签：haskell, monads

我目前需要一些大脑训练，我在[Haskell 和 Monads上找到了这篇文章](http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html)

我在练习 7 时遇到问题。随机函数绑定。

为了使问题更易于实验，我将`StdGen`类型替换为未指定的类型。所以，而不是...

```
bind :: (a -> StdGen -> (b,StdGen)) -> (StdGen -> (a,StdGen)) -> (StdGen -> (b,StdGen)) 
```

我用了...

```
bind :: (a -> c -> (b,c)) -> (c -> (a,c)) -> (c -> (b,c)) 
```

以及实际的功能实现（直接来自练习）

```
bind f x seed = let (x',seed') = x seed 
                 in f x' seed' 
```

还有 2 个随机函数可供试用：

```
rndf1 :: (Num a, Num b) => a -> b -> (a,b)
rndf1 a s = (a+1,s+1)

rndf2 :: (Num a, Num b) => a -> b -> (a,b)
rndf2 a s = (a+8,s+2) 
```

因此，在 Haskell 编译器（ghci）中，我得到...

```
:t bind rndf2
bind rndf2 :: (Num a, Num c) => (c -> (a, c)) -> c -> (a, c) 
```

这与`rndf2`作为第一个参数的绑定 curried 匹配。

但我不明白的是如何...

```
:t bind rndf2 . rndf1 
```

突然给

```
bind rndf2 . rndf1 :: (Num a, Num c) => a -> c -> (a, c) 
```

这是我们正在尝试制作的正确类型的作品，因为

```
bind rndf2 . rndf1 
```

是一个函数：

1.  采用相同的参数类型`rndf1`
2.  AND 接受 return from`rndf1`并将其作为输入`rndf2`以返回相同的类型`rndf2`

`rndf1`可以采用 2 个参数`a -> c`并`rndf2`返回`(a, c)`，因此它匹配这些函数的组合应具有的类型：

```
bind rndf2 . rndf1 :: (Num a, Num c) => a -> c -> (a, c) 
```

这与我最初为 bind 提出的幼稚类型不匹配

```
bind f :: (a -> b -> (c, d)) -> (c, d) -> (e, f) 
```

这里`bind`神话般地接受一个接受两个参数的函数并产生一个接受一个元组的函数，以便可以将输出`rndf1`输入`rndf2`

1.  为什么绑定函数需要按原样编码
2.  为什么绑定函数没有天真的类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:08:24.540

`bind`应该有两个功能。您的“初始”类型签名采用一个函数和一个元组并生成一个元组。这并不真正适用于这个问题：`rndf1`它不是一个元组，它是一个函数。一旦参数被应用到它，只有这样才会`rndf1 a s`变成一个元组。所以`bind`需要一个具有两个功能的功能。

将元组通过管道传递到接受两个参数的函数中的神秘力量在于`bind`.

```
bind :: (a -> c -> (b,c)) -> (c -> (a,c)) -> (c -> (b,c))
bind f x seed = let (x',seed') = x seed 
                 in f x' seed' 
```

在这个定义中，`f`和都是函数（如果你重命名为 ，`x`这可能会更清楚。）`x``g`

拿`let (x',seed') = x seed`。`x seed`产生一个元组。在等号的左侧，该元组的各个元素被赋予了新名称，然后在下一行将这些名称传递给函数`f`。

因此，分解表达式可能会有所帮助`bind rndf2 . rndf1`。

请记住，所有函数实际上都只有一个参数。的类型`rndf1`可以最准确地写为`(Num a , Num b) => a -> (b -> (a,b))`。这对于理解接下来的内容非常有帮助。

另一件有帮助的事情是考虑如何将这个表达式与参数一起使用。如：`(bind rndf2 . rndf1) a s`。

由于所有函数都有一个参数，因此它们被一一发送到括号内。第一：`((bind rndf2 . rndf1) a) s`。

现在，您可以在没有运算符的情况下重写表达式`.`：`(bind rndf2 (rndf1 a)) s`。`a`被传递给，`rndf1`因为它是这样`.`工作的：点右侧的函数接受输入，然后将其输出传递给左侧的函数。

您会看到 的类型签名`rndf1 a`与 的第二个参数匹配`bind`。`rndf2`然后将参数应用`(rndf1 a)`到`bind`：

```
bind rndf2 (rndf1 a) seed = let (x', seed') = (rndf1 a) seed
                             in rndf2 x' seed' 
```

现在你在括号内有了一个函数，它只接受一个`seed`参数。所以你可以把`s`它应用到函数中：

```
bind rndf2 (rndf1 a) s = let (x', seed') = (rndf1 a) s
                          in rndf2 x' seed' 
```

# c# - 在 EF 对象中查找版本更改

> ID：11213575
> 
> 赞同：1
> 
> 时间：2012-06-26T18:19:07.787
> 
> 标签：c#, asp.net-mvc, entity-framework, version-control

我有一个令人尴尬的失控问题。

我正在使用 MVC 和 EF，并且有一个用户可以编辑的模型。我刚刚有一个新的要求，如果它被编辑，被编辑的属性应该在视图中显示为红色，以供其他用户查看。

我的模型有很多属性，但是主键是a `GUID`，模型可以有多个`parentID`s。因此，对于一个给定的`GUID`，`ParentID`我想找出哪些属性已更改。

到目前为止，感觉不对，我认为我有一些 jquery 可以执行以下操作

```
$("[name*='Request.']")
        .not(":hidden")
        .each(function () {
            var $this = $(this);
            $.ajax({
                url: '@Url.Action("IsChanged", "Shared")',
                data: { fieldName: $this.attr("name"), parentID: @Model.Request.ID },
                success: function (data) {
                    if (data) {
                        if ($this.is(":radio")) {
                            $this.parent().addClass("isChanged");
                        } else
                            $this.addClass("isChanged");
                    }
                }
            });
        }); 
```

如果我尝试简单地从我的 ajax 函数返回 true，则此脚本工作正常。但是，问题出在 ajax 函数上。如何找到更改？到目前为止，我得到的是：

```
public ActionResult IsChanged(string fieldName, int parentID)
    {
        using (MyEntities _db = new MyEntities())
        {
            string[] aName = fieldName.Split('.');

            // Count the number of version
            int versionCount = _db.SubRequests.Count(r => r.ParentID == parentID);
            // Get the first version
            SubRequest sr = _db.SubRequests.FirstOrDefault(r => r.ParentID == parentID);
            // Check if the count is the same for the specific value
            int changeCount = _db.ExecuteStoreQuery<int>("select count(parentID) from "+aName[0]+" where parentID = " + parentID + " and " + aName[1] +"='{0}'", THEVALUEINORIGINAL);

            bool isChanged = changeCount == versionCount;

            return Json(isChanged, JsonRequestBehavior.AllowGet);
        }
    } 
```

到目前为止我所做的感觉不对，显然这不起作用，但我迷路了。

让我知道这是否可以理解，或者您是否需要更多信息。我应该放弃这个想法并构建一些完全不同的东西（可能），还是有办法拯救我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:00:34.840

看起来您可能想看看如何正确处理并发冲突。看看[这篇](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:52:13.430

我确信这不是最漂亮的方法，但我想我最终会分享我最终决定的解决方案，以防其他人想要做类似的事情。

我的 jQuery ajax 函数保持不变，但在控制器中我有以下内容：

```
public ActionResult IsChanged(string fieldName, int parentID)
{
    using (MyEntities _db = new MyEntities())
    {
        bool isChanged = false; 

            string[] aName = fieldName.Split('.');

            string strTableName = aName[0];
            string strFieldName = aName[1];

            string strQuery = String.Format("select distinct {0} from {1} where parentID = {2}", strFieldName, strTableName, parentID);

            isChanged = _db.ExecuteStoreQuery<dynamic>(strQuery).Count() > 1;

            return Json(isChanged, JsonRequestBehavior.AllowGet);
    }
} 
```

对我来说很好。但是，它是一个非常繁重的加载页面，包含所有这些 ajax 调用。

# actionscript-3 - 在另一个对象上检测对象 as3

> ID：11213577
> 
> 赞同：0
> 
> 时间：2012-06-26T18:19:09.713
> 
> 标签：actionscript-3, flash, collision-detection

假设我有两个形状包裹在 Movieclip 容器中。如何检测一种形状是否超过另一种形状？更准确地说，一个形状是否覆盖了其他形状的一部分/全部？

到目前为止，我已经设法通过比较两个形状的坐标来做到这一点，但我想知道是否有一些内置函数或更简单的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:22:56.403

DisplayObject.hitTestObject(obj:DisplayObject):布尔值

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject) ()

如果您需要更精细的命中测试并愿意使用 BitmapData 对象（您可以使用 BitmapData.draw(dispObj) 将 DisplayObject 绘制到 BitmapData）；

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#hitTest](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#hitTest) ()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:24:08.507

这里有几种方法可以做到这一点：

[flash.display.DisplayObject.hitTest()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject%28%29)

或者

[flash.display.DisplayObject.getRect()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject%28%29)

例如： sprite1.getRect(stage).intersects(sprite2.getRect(stage));

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:26:05.567

您可以使用 hitTestObject [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject%28%29)

```
trace(shape1.hitTestObject(shape2)); 
```

但请记住，如果只是对象的边界重叠，这是一个简单的测试。如果您想要像素完美的碰撞测试，您将不得不使用一些第三方库，例如[http://www.freeactionscript.com/2011/08/as3-pixel-perfect-collision-detection/](http://www.freeactionscript.com/2011/08/as3-pixel-perfect-collision-detection/)

# python - Python sendall() 与 C write()

> ID：11213579
> 
> 赞同：1
> 
> 时间：2012-06-26T18:19:15.977
> 
> 标签：python, apache, networking

前几天我在看一些 Python 代码，发现了这个：

```
 s.sendall(req % (len(body), body)) 
```

其中 len(body) 解析为超过 500K 字节。这被发送到 Apache 服务器，该服务器的上限应为 8190 字节（当我尝试使用 C 的 write() 函数发出类似请求时，我发现它确实如此）。那么 Python 中的 sendall() 有什么特别之处呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:21:30.997

将数据发送到 Apache 或其他任何东西都没有关系。我们正在谈论的套接字远程端的软件对 和 之间的行为差​​异基本上没有直接`write(2)`影响`socket.sendall`。

不同之处在于`write(2)`写入尽可能多的字节，然后返回一个整数，指示它写入了多少。当然，它不能写超过你通过它。但它可能会写得更少。内核发送缓冲区中可能没有空间用于传递给它的所有字节。

`socket.sendall`将此与写入您传递给它的所有字节进行对比。如有必要，它会通过`write(2)`多次调用来做到这一点。

# php - for 循环中的 mysql_query 给出了 mysql_fetch_assoc 相关的错误/警告

> ID：11213587
> 
> 赞同：1
> 
> 时间：2012-06-26T18:19:32.043
> 
> 标签：php, mysql, database

我试图获取特定用户回答或询问的问题的 id，而不是尝试使用这些 id 并获取 id 与从第一个查询中检索到的 id 不同的问题。在尝试实现这一目标时，我得到了一个 mysql_fetch_assoc () 相关的错误/警告，因此我的程序崩溃。

以下是我的 DB_Functions.php 文件中的代码，我在其中执行数据库查询。

```
public function getQuestions($username){
$result = mysql_query("SELECT question_id FROM answered WHERE asked_by =  '$username' OR answered_by =  '$username'");
if($result){
$data = array();
    while($row = mysql_fetch_assoc($result)) {
        $data[] = array(
        $r=$row["question_id"]);}
        for($i=0; $i<sizeof($data); $i++){
            $result2 = mysql_query("SELECT * FROM answers EXCEPT WHERE question_id='$data[i]'") or die(mysql_error());
            return ($result2);
            }
    }else{
        return false;}
} 
```

遵循 index.php 中的代码，我试图从 DB_Functions.php 接收结果

```
if($tag == 'getQuestions'){
                $username = $_POST['username'];
                    $getAllQuestions = $db->getQuestions($username);
            $data = array();
            while($row = mysql_fetch_assoc($getAllQuestions)) { //I'm getting ERROR on this line
            $data[] = array(
            $response["getAllQuestions"]["id"] = $row["id"],
            $response["getAllQuestions"]["username"] = $row["username"],
            $response["getAllQuestions"]["question_id"] = $row["question_id"],
            $response["getAllQuestions"]["question"] = $row["question"],
            $response["getAllQuestions"]["tag1"] = $row["tag1"],
            $response["getAllQuestions"]["tag2"] = $row["tag2"],
            $response["getAllQuestions"]["tag3"] = $row["tag3"],
            $response["getAllQuestions"]["question_time"] = $row["question_time"]);}
            echo json_encode($data);
                    } 
```

以下是 logcat 消息：

```
06-26 21:08:13.920: D/JSON(478): <b>Warning</b>:  mysql_fetch_assoc() expects parameter 1 to be resource, null given in <b>C:\xampp\htdocs\android_php_1\index.php</b> on line <b>178</b><br /> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:31:38.683

MySQL 不支持该`EXCEPT`关键字，因此查询返回`null`到，`$result2`因为没有形成结果集，这就是您收到该错误的原因。相反，您实际上可以将这两个查询合并为一个，如下所示：

```
SELECT
    a.*
FROM
    answers a
LEFT JOIN
    (
        SELECT DISTINCT question_id
        FROM answered
        WHERE ? IN (asked_by, answered_by)
    ) b ON a.question_id = b.question_id
WHERE 
    b.question_id IS NULL 
```

在您的`getQuestions()`函数中，您可以将整个内容替换为：

```
public function getQuestions($username) {
    $filtered_username = mysql_real_escape_string($username);
    $sql = "
        SELECT a.*
        FROM answers a
        LEFT JOIN
        (
            SELECT DISTINCT question_id
            FROM answered
            WHERE '$filtered_username' IN (asked_by, answered_by)
        ) b ON a.question_id = b.question_id
        WHERE b.question_id IS NULL";

    return mysql_query($sql) ?: false;
} 
```

另请注意，您之前的代码容易受到 SQL 注入的影响。在我的解决方案中，我首先通过 username 变量`mysql_real_escape_string()`来防止这种情况（不如准备好的语句，但总比没有好）。***切勿***将用户输入直接传递到查询中。

# java - 将套接字用于分块数据

> ID：11213588
> 
> 赞同：1
> 
> 时间：2012-06-26T18:19:33.940
> 
> 标签：java, sockets, inputstream, chunked

我正在尝试创建一个程序，该程序将直接从套接字获取数据，而不是使用 HttpURLConnection 或 HttpClient。使用套接字将给我更多的自由来操作数据以匹配需求。我希望使用套接字，我可以保留与每个块一起发送的块头。以下是我的代码来实现这一点。不幸的是，即使代码运行没有任何错误，它也至少运行了 40 秒才停止。此外，即使我检查了程序已连接到服务器，我也没有从服务器获得任何 InputStream。

```
 Socket socket = new Socket(hostAddr, port);
    InputStream in = socket.getInputStream();
    InputStreamReader isr = new InputStreamReader(in);
    char[] streamBuff = new char[8192];
    StringBuilder receivedData = new StringBuilder();
    int count = 0;
    while((count = isr.read(streamBuff)) > 0)
    {
        receivedData.append(streamBuff, 0, count);
    }
    System.out.println(receivedData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:24:38.680

[HTTP/1.1](https://www.rfc-editor.org/rfc/rfc2616)具有[持久连接](http://en.wikipedia.org/wiki/Http#Persistent_connections)。您正在读取该循环中的所有响应块，然后阻塞直到服务器超时并关闭您的 TCP 连接。

### 编辑0：

顺便说一句，您没有向服务器发送*请求*，这就是您没有得到任何回报的原因。如果您想自己实现它，请研究该协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:45:16.977

您首先需要发出请求，GET 或 POST。这是一个示例来展示如何使用`openStream()`然后阅读`InputStream`：

```
public class DateWala {

    public static void main(String[] args){

        try {
            URL url = new URL("http://www.google.com");
            InputStream is = url.openStream();
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);

            String s = null;

            while ((s=br.readLine())!=null){
                System.out.println(s);
            }

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

# java - 如何在Android中发出http get请求

> ID：11213594
> 
> 赞同：7
> 
> 时间：2012-06-26T18:20:02.317
> 
> 标签：java, android, http, oauth

我是android的新手。所以我可以告诉我如何发出http get请求，例如

```
GET /photos?size=original&file=vacation.jpg HTTP/1.1
Host: photos.example.net:80
Authorization: OAuth realm="http://photos.example.net/photos",
    oauth_consumer_key="dpf43f3p2l4k3l03",
    oauth_token="nnch734d00sl2jdk",
    oauth_nonce="kllo9940pd9333jh",
    oauth_timestamp="1191242096",
    oauth_signature_method="HMAC-SHA1",
    oauth_version="1.0",
    oauth_signature="tR3%2BTy81lMeYAr%2FFid0kMTYa%2FWM%3D" 
```

在安卓（java）中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T19:43:12.010

你会想要熟悉 Android 中的 InputStreams 和 OutputStreams，如果你之前在常规 java 中做过这件事，那么它本质上是一样的。您需要打开请求属性为“GET”的连接，然后将参数写入输出流并通过输入流读取响应。您可以在下面的代码中看到这一点：

```
 try {
        URL url = null;
        String response = null;
        String parameters = "param1=value1&param2=value2";
        url = new URL("http://www.somedomain.com/sendGetData.php");
        //create the connection
        connection = (HttpURLConnection) url.openConnection();
        connection.setDoOutput(true);
        connection.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded");
        //set the request method to GET
        connection.setRequestMethod("GET");
        //get the output stream from the connection you created
        request = new OutputStreamWriter(connection.getOutputStream());
        //write your data to the ouputstream
        request.write(parameters);
        request.flush();
        request.close();
        String line = "";
        //create your inputsream
        InputStreamReader isr = new InputStreamReader(
                connection.getInputStream());
        //read in the data from input stream, this can be done a variety of ways
        BufferedReader reader = new BufferedReader(isr);
        StringBuilder sb = new StringBuilder();
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        //get the string version of the response data
        response = sb.toString();
        //do what you want with the data now

        //always remember to close your input and output streams 
        isr.close();
        reader.close();
    } catch (IOException e) {
        Log.e("HTTP GET:", e.toString());
    } 
```

# iphone - GHUnit 错误 _OBJC_CLASS_$_SenTestCase"，引用

> ID：11213604
> 
> 赞同：0
> 
> 时间：2012-06-26T18:20:39.757
> 
> 标签：iphone, cocoa-touch, ipad, gh-unit

> **可能重复：**
> [GHUnit 错误文件 _OBJC_CLASS_$_SenTestCase”，引用](https://stackoverflow.com/questions/10651662/ghunit-error-file-objc-class-sentestcase-referenced)

我想在我的项目中使用 GHUnit，但我收到了这个错误

> 架构 i386 的未定义符号：“_OBJC_CLASS_$_SenTestCase”，引用自：LogicTests.o 中的 _OBJC_CLASS_$_LogicTests “_OBJC_METACLASS_$_SenTestCase”，引用自：LogicTests.o 中的 _OBJC_METACLASS_$_LogicTests ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:22:18.290

确保您`SenTestingKit.framework`与您的项目相关联（尽管使用 GHUnit 确实没有必要）。

# jquery - jquery点击事件后IE9崩溃

> ID：11213615
> 
> 赞同：2
> 
> 时间：2012-06-26T18:21:28.120
> 
> 标签：jquery, html, internet-explorer-9

每当发生单击事件时，我都会遇到 IE9 崩溃的奇怪问题。我认为这是克隆功能可能是它的一个错误，所以尝试删除它但同样的问题。它适用于所有浏览器，甚至 IE7 和 8，但 9 只是不断崩溃并且不确定。

```
 <div class="icons">
        <span class="attMessage"></span>
        <span class="successMessage"></span>
        <span class="errorMessage"></span>
    </div>

    <div class="newSection">
        <h3>Add/Update Adjuster License</h3>
        <p>(this is where i am appending an icon from above)</p>
        <p><a title="Add license to queue" class="addLicense"></a></p>  
    </div> 
```

_

```
 $('.addLicense').click(function () {
      var parent = $(this).parent();
      var license = $('.licenseOverview');
      var dropdown = $('#MainContent_ddlLicenseStates').val();
      var number = $('#MainContent_txtLicenseNumber').val();
      if (number != '') {            
        notifier(parent, "License Added To Queue", "Success");
        $('#MainContent_txtLicenseNumber').val('');
      }
      else {
        notifier(parent, "Must Enter A License Number", "Failure");
      }
    });

    function notifier(oAppend, oMessage, oMessageType) {
      var iconDiv = $('.icons');
      if (oMessageType == 'Success') {
      $('.icons > .successMessage').clone().html(oMessage).appendTo(oAppend).delay(100).fadeIn('slow').delay(500).fadeOut();
      //tried a different way since i thought clone was crashing ie9        
      //$('.icons > .successMessage').html(oMessage).appendTo(oAppend).delay(100).fadeIn('slow').delay(500).fadeOut();
      setTimeout(function () {    oAppend.find('.successMessage').remove().appendTo(iconDiv); }, 2500);
      }
      else if (oMessageType == 'Failure') {
      $('.icons > .errorMessage').clone().html(oMessage).appendTo(oAppend).delay(100).fadeIn('slow').delay(500).fadeOut();
      setTimeout(function () { oAppend.find('.errorMessage').remove() }, 2500);

      }
      else if (oMessageType == 'Warning') {
      $('.icons > .attMessage').clone().html(oMessage).appendTo(oAppend).delay(100).fadeIn('slow').delay(500).fadeOut();
      setTimeout(function () { oAppend.find('.attMessage').remove() }, 2500);

      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:04:56.690

看起来是 fadeIn().delay(500).fadeOut() 是罪魁祸首。一旦fadeOut 发生，IE9 就崩溃了。我删除了 fadeOut 并且没有发生崩溃。我没有使用延迟，而是使用超时功能来处理淡出，不再崩溃。

```
 $('.icons > .successMessage').clone().html(oMessage).appendTo(oAppend).delay(100).fadeIn('slow');
    setTimeout(function () { oAppend.find('.successMessage').fadeOut().remove(); }, 2500); 
```

# visual-studio-2010 - 在 Visual Studio 内部和外部运行的结果不同

> ID：11213618
> 
> 赞同：0
> 
> 时间：2012-06-26T18:21:38.487
> 
> 标签：visual-studio-2010

我在 Visual Studio 中编写了一个快速的 C++ DLL，其中有一个名为 ReportVersion() 的函数返回 1。

```
int _stdcall ReportVersion() {
    return 1;
} 
```

然后我创建了一个 VB.net EXE 来调用这个 DLL。

```
Public Class Form1

    Private Declare Function ReportVersion Lib "Test_DLL.dll" () As Long

    Private Sub btnVersion_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnVersion.Click
        Call MsgBox(ReportVersion())
    End Sub
End Class 
```

如果我按 F5 并在任一 Release/Debug 模式下运行，ReportVersion 的返回值为 6824607285638070273。

如果我构建解决方案并手动运行 .EXE，则返回值为 1（如预期的那样）。

它到底是从哪里得到 6824607285638070273 的？

作为参考，我使用这 2 篇文章作为创建它们的示例

[http://edais.mvps.org/Tutorials/CDLL/CDLLch1b.html](http://edais.mvps.org/Tutorials/CDLL/CDLLch1b.html)

[http://edais.mvps.org/Tutorials/CDLL/CDLLch2.html](http://edais.mvps.org/Tutorials/CDLL/CDLLch2.html)

因为我从未在用不同语言编写的 DLL/应用程序之间进行过调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:37:39.430

给链接文章的原作者发了电子邮件后，我很惊喜地收到了关于这样一篇旧文章的回复。这有助于我理解问题。

> 在 VB6 中，“Integer”类型是有符号的 16 位整数，“Long”类型是有符号的 32 位整数。
> 
> 在 VB.NET 中，“Integer”类型是一个有符号的 32 位整数，“Long”类型是一个 64 位有符号整数。还添加了“短”类型来填充 16 位有符号整数角色。
> 
> 实际上，如果您将上面的 ReportVersion() 提供给您的值转换为 0x5EB5E02B00000001。正如您所看到的，低 8 位数字 (0x00000001) 具有正确的值，而高位数字恰好包含当时恰好在内存中的任何数据。
> 
> 至于作为可执行文件运行与在 IDE 中运行之间的差异，我只能想象，也许该内存区域在应用程序运行之前被清除，因此它实际上返回 0x0000000000000001，它被正确评估为 1。

# c# - 通过 File.ReadAllBytes() 方法的同步操作异常

> ID：11213622
> 
> 赞同：0
> 
> 时间：2012-06-26T18:21:41.223
> 
> 标签：c#, .net, file-io, asynchronous

我创建了一个简短的代码，我得到了这个异常：

*句柄不支持**同步操作**。FileStream 构造函数的参数可能需要更改以指示句柄是异步打开的（即，它是为重叠 I/O 显式打开的）。*

代码是这样的：

```
byte[] filebytes = File.ReadAllBytes(filepath);
List<byte> codedbytes = new List<byte>();
byte constbyte = 240;
int blocksize = 67108864;
int counter = 0;
List<int> tempindex = new List<int>();
int index = 0;

private void DoTheJob()
{

        [...]

        for (int i = 0; i < filebytes.Length; i++,counter++)
        {
            codedbytes.AddRange(BitConverter.GetBytes(Convert.ToChar((filebytes[i] * constbyte))));
            if (counter == blocksize)
            {
                FileStream tempwriter = File.Create(startdir + "\\temp" + index.ToString() + ".file");

                for (int x = 0; x < codedbytes.Count; x++)
                {
                    tempwriter.WriteByte(codedbytes[x]);
                }

                tempwriter.Close();
                codedbytes.Clear();
                counter = 0; tempindex.Add(index); index++;
            }
        }

        [...]

        for (int x = 0; x < tempindex.Count; x++)
        {
            ▉Exception at this line▉▶ codedbytes = new List<byte>(File.ReadAllBytes(startdir + "\\temp" + tempindex[x].ToString() + ".file"));

            [...]
        }
} 
```

我不知道是什么问题，因为 FileStrem 类没有重载的构造函数，并且我关闭了每个对象。

请告诉我正确的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:50:00.473

我认为问题在于您只是关闭了 FileStream 而没有处理 FileStream。我在想可能有一个与关闭时未释放但可能与 Dispose 相关的文件的资源。异常提到的构造函数可能是在尝试执行 File.ReadAllBytes 时创建的 FileStream。

尝试这个：

```
private void DoTheJob()
{

        [...]

        for (int i = 0; i < filebytes.Length; i++,counter++)
        {
            codedbytes.AddRange(BitConverter.GetBytes(Convert.ToChar((filebytes[i] * constbyte))));
            if (counter == blocksize)
            {
                using (FileStream tempwriter = File.Create(startdir + "\\temp" + index.ToString() + ".file"))
                {
                    for (int x = 0; x < codedbytes.Count; x++)
                    {
                        tempwriter.WriteByte(codedbytes[x]);
                    }               
                }

                codedbytes.Clear();
                counter = 0; tempindex.Add(index); index++;
            }
        }

        [...]

        for (int x = 0; x < tempindex.Count; x++)
        {
            codedbytes = new List<byte>(File.ReadAllBytes(startdir + "\\temp" + tempindex[x].ToString() + ".file"));

            [...]
        }
} 
```

# ios - 在 iOS 上的两个视图之间翻转动画

> ID：11213623
> 
> 赞同：1
> 
> 时间：2012-06-26T18:21:41.427
> 
> 标签：ios

我有一个使用内置翻转动画在各种视图之间切换的应用程序。一切正常，除了当我翻回一个滚动视图并且它不在第一页上时。意义：

*   我的滚动视图有三页
*   用户滑动到第三页
*   用户点击第三页上的按钮进入下一个视图
*   当用户尝试返回滚动视图时，翻转动画会在翻转过程中显示第一页，然后在翻转完成后捕捉到正确的页面。

我正在使用 [scrollView setContentOffset] 在翻转动画之前设置正确的页面，但这似乎还不够。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:27:40.997

您可以检查的一种可能性是使用`setContentOffset`：

```
[scrollView setContentOffset:CGPointMake(pageWidth * pageNumber, 0)]; 
```

移动 scrollView 原点，使其显示页码`pageNumber`（从 0 到 N）。或者你可以尝试：

```
- (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated 
```

但是由于您没有指定如何制作翻转动画，所以我不知道哪一个适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:42:41.713

采用

```
[scrollView setContentOffset:theOffset animated:NO]; 
```

您想抑制动画，因为您自己正在执行动画。您还需要确保在开始指定翻转动画之前设置内容偏移量，因为动画会将所有内容从当前状态转换为您在动画块中提供的任何新值。

调用它`viewDidLoad`或`viewWillAppear:`应该工作。

# c# - vb6 到 C#。打开文件作为输出，freefile

> ID：11213625
> 
> 赞同：0
> 
> 时间：2012-06-26T18:21:47.740
> 
> 标签：c#, vb6, vb6-migration

我在 vb6 中有以下代码 -

```
dim iFreeFile as integer

iFreeFile = FreeFile
Open tSendFileName For Output As #iFreeFile 
```

我需要将其转换为 C#，但我遇到了困难。我试图使用 StreamWriter 但遇到了不知道在哪里写入或如何插入文件的问题，因为它不在我的计算机上。

关于如何将此代码转换为 C# 的任何想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T22:41:20.603

使用 streamwriter 写入文本文件非常简单：

```
using (StreamWriter sw = new StreamWriter(tSendFileName)) {
    sw.WriteLine("Some text"); //write text followed by line terminator
    sw.Write("Foo...bar...foo...bar"); //write text without terminator
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:26:17.697

```
MemoryStream ms = new MemoryStream(); 
TextWriter tw = new StreamWriter(ms);

tw.WriteLine("Creating file in memory.");
tw.WriteLine("Adding extra line.");

// just use savedialog to save file on disk
File.WriteAllBytes(SaveFileDialog1.FileName, ms.GetBuffer()); 
```

# c# - .NET 有哪些好的持久性库？

> ID：11213626
> 
> 赞同：0
> 
> 时间：2012-06-26T18:21:56.013
> 
> 标签：c#, .net, hibernate, ibatis

我来自 Java 背景，并且越来越喜欢 .NET，在我的 DAO 层中可以使用哪些好的库？我习惯使用 MyBatis（这似乎存在，但不是在真正的完整版本中）。我使用过 Hibernate，它显然存在于 .NET 中，但我宁愿避免使用完整的 POJO 样式对象映射器。我真的很想要一个像 MyBatis 这样基于查询的库。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:24:37.690

使用 StackOverflow 正在使用的那个。[Dapper.NET](http://code.google.com/p/dapper-dot-net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:47:10.847

我真的很喜欢微软最新的实体框架：http: [//msdn.microsoft.com/en-us/data/ef.aspx](http://msdn.microsoft.com/en-us/data/ef.aspx)。他们在这方面取得了很大进展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:24:17.410

.Net 中的 NHibernate 与 Linq to NHibernate 一起使用非常好。虽然设置可能很乏味，但我仍然认为我更喜欢 NHibernate 而不是 Hibernate。（是因为 C# vs Java 是一场辩论）

# java - 在java中解决无符号变量

> ID：11213628
> 
> 赞同：0
> 
> 时间：2012-06-26T18:22:07.653
> 
> 标签：java, boolean, bit-manipulation, unsigned, signed

我正在为我无法控制的特定文件格式编写文件保存和加载函数，并且格式指定在特定字节位置我必须写入 4 个字节的数据来表示 32 位无符号值......在我的测试文件中这个值是 16052，或 0x00003EB4... 所以我将数据写入字节数组，以这种方式保存：

```
data[index] = 0xB4;
data[index+1] = 0x3E;
data[index+2] = 0x00;
data[index+3] = 0x00; 
```

您可以看到数据是 little-endian 格式，这是正确的......问题是当我尝试使用我的文件加载函数加载这些数据时，java 会看到这样的数据：

-76, 62, 0, 0

0xB4 值被解释为 -76，因为字节是在 java 中签名的...当我尝试使用以下代码将这 4 个字节重新组合为单个 32 位值时，值最终为 -76...

```
value = data[index+3];
value <<= 8;
value |= data[index+2];
value <<= 8;
value |= data[index+1];
value <<= 8;
value |= data[index]; 
```

这应该执行以下操作：将值设置为 0x00（高位字节），左移 8 位，或 0x00 到低 8 位，左移 8 位，或 0x3E 到低 8 位，左移 8 位，或0xB4（低位字节）到低 8 位。

这应该会产生值 0x00003EB4 ......这是我开始的......但是由于某种原因，我无法弄清楚它在该操作之后给了我 -76 的值。

我确信这是由于 java 将 0xB4 字节解释为值 -76 搞砸了按位或运算...

我的问题是我必须做些什么来解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:27:24.300

当您加载字节时，它们会被签名。当它们被强制转换为整数时，它们是符号扩展的。为了解决这个问题，您可以对 0xFF 进行按位与运算，只取带符号整数的 8 个 LSb。

在您的情况下`value |= (data[index+i])`应该成为`value |= (data[index+i] & 0xFF)`（其中`i`替换为您拥有的索引偏移量）。

# android - 在 Android 中绘制锦标赛支架的最佳方法

> ID：11213629
> 
> 赞同：1
> 
> 时间：2012-06-26T18:22:07.717
> 
> 标签：android, tablelayout, tournament

我需要在 Android 中绘制一个锦标赛支架。我已经计算了所有游戏的位置（即一个 (x,y) 元组，它定义了在类似电子表格的结构中放置团队的位置）。但是，我不知道绘制支架的首选方式。我找到了一个显示我需要的示例：[示例](http://cdn1.staztic.com/screenshots/comredsulfurpickmybracketfree-7-1.jpg)

我的第一个想法是以编程方式创建和填充`TableLayout`. 但是，实际上并不支持边框，并且需要大量的`TextView`s 来填充游戏之间的空间。所以我不确定这是否是最好的方法。

有没有人有更好的建议，或者甚至是类似的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:47:01.657

我建议使用自定义绘图[`Canvas`](http://developer.android.com/reference/android/graphics/Canvas.html)。这样你就可以在任何有意义的地方画画，甚至可能支持缩放而不需要太多的工作。

# iis-7 - IIS 7.0 - IIS 将“私有”添加到缓存控制，它来自哪里

> ID：11213637
> 
> 赞同：5
> 
> 时间：2012-06-26T18:22:42.347
> 
> 标签：iis-7, web-config, http-headers, browser-cache

因为我们保护 .PDF 文件免受匿名用户的攻击，所以我们有一个自定义处理程序，所以我们有一个条目

我们还对 http 标头进行了更改，以通过 IIS 7 管理添加“缓存控制：无缓存，无存储”，该管理在 system.webserver 元素下创建 web.config 条目，如下所示：

```
<httpProtocol>

  <customHeaders>
    <clear />
    <add name="cache-control" value="no-cache,no-store" />
  </customHeaders>

</httpProtocol> 
```

当我在 burpsuite 会话中查看响应标头时，我看到 .aspx 页面：cache-control: no-store,no-cache,no-store

但对于 PDF 页面：

缓存控制：**私有**，无缓存，无存储

我的目标是让一切都“无缓存，无存储”。我不确定我错过了什么。web.config 中没有其他缓存设置。请告知如何从 PDF 页面中删除“private”以及从其他所有页面中删除额外的 no-store。其他通过 System.Web.StaticFileHandler 的静态页面，它们也有“no-store,no-cache,no-store”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-05T15:54:28.837

Although this post is now a few years old, I thought I would share my solution that may save someone hours of head-scratching.

I have an MVC 4 site setup using IIS, and my aim was to have IIS add headers to certain files (defined by location), by using the `<customHeaders>` section. The 'cache-control' values I had in the `<customHeaders>` section were being appended to the end of 'cache-control: private', magically being added by IIS.

This was because of the **runAllManagedModulesForAllRequests** setting in my web.config being set to true

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
    </modules>
</system.webServer> 
```

This setting was causing one of the IIS Modules (I don't know which) to append the 'cache-control' header to every file being requested from IIS.

So the solution is to set this to false, and manage each of your modules seperatley using the `preCondition` attribute on each.

The **runAllManagedModulesForAllRequests** setting was required by earlier versions of MVC because extensionless routing would not work without it. This has since been fixed, more details here

[http://blogs.msdn.com/b/tmarq/archive/2010/04/01/asp-net-4-0-enables-routing-of-extensionless-urls-without-impacting-static-requests.aspx](http://blogs.msdn.com/b/tmarq/archive/2010/04/01/asp-net-4-0-enables-routing-of-extensionless-urls-without-impacting-static-requests.aspx)

Useful reading on the use of **runAllManagedModulesForAllRequests**

[http://weblog.west-wind.com/posts/2012/Oct/25/Caveats-with-the-runAllManagedModulesForAllRequests-in-IIS-78](http://weblog.west-wind.com/posts/2012/Oct/25/Caveats-with-the-runAllManagedModulesForAllRequests-in-IIS-78)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:33:29.387

我无法告诉您为什么 IIS 7 将“私有”添加到缓存控件中，但我可以向您展示我如何在我自己的基于 ASHX 的直通代理中摆脱它（请参阅原始帖子下方的第 1 条评论） .

```
public class proxy : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        HttpResponse response = context.Response;

        // Remove the 'private' string value from the response.CacheControl member
        if (response.CacheControl == "private")
        {
            response.CacheControl = String.Empty;
        }

        // Do other stuff
    }
} 
```

如果您在 Visual Studio 中使用内置的 Cassini Web 开发服务器，这将不起作用。要弄乱标头，您需要在开发环境中切换到成熟的 IIS Web 服务器。

# html - 将单元格表拆分为几行而不格式化表

> ID：11213638
> 
> 赞同：2
> 
> 时间：2012-06-26T18:22:49.157
> 
> 标签：html, css

我正在尝试构建这样的屏幕：

![在此处输入图像描述](../Images/bf501a0b6bbe3a97d3c6b8c5d2e28741.png)

如何在不破坏其他表格组件的情况下将单元格拆分为几行和一列？

我已经开始了，但是当我拆分单元格时，我的表格变形了。 [http://jsfiddle.net/KMjm6/](http://jsfiddle.net/KMjm6/)

再举个例子，不使用html表：http: [//jsfiddle.net/Gh6mB/8/](http://jsfiddle.net/Gh6mB/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:16:03.557

如果能理解你的问题

演示：http: [//jsfiddle.net/KMjm6/4/](http://jsfiddle.net/KMjm6/4/)

在中间的单元格内放一张桌子并创造你的影响

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T18:33:55.640

尝试使用无表布局概念。只有没有表格的 div 元素。

看到这个网站

[http://www.w3.org/2002/03/csslayout-howto](http://www.w3.org/2002/03/csslayout-howto)

http://girlswhogeek.com/tutorials/2006/create-a-tableless-css-layout

* * *

现在我明白了

参见示例[http://jsfiddle.net/7SGDW/](http://jsfiddle.net/7SGDW/)

# .net - System.Reflection.PropertyInfo getPropertyInfo(System.Type type, string NavigationPath)

> ID：11213639
> 
> 赞同：0
> 
> 时间：2012-06-26T18:22:52.013
> 
> 标签：.net, data-binding, reflection

我需要一个具有以下签名的函数：

```
System.Reflection.PropertyInfo getPropertyInfo(System.Type type, string NavigationPath) 
```

或在 VB 中：

```
Function GetPropertyInfo(Type As System.Type, NavigationPath As String) As System.Reflection.PropertyInfo 
```

用法：

```
Dim MyPropertyInfo As PropertyInfo = GetPropertyInfo(GetType(Order),"Customer.Address.State.Code")
Dim DisplayName As String = MyStringFunctions.FriendlyName(MyPropertyInfo.Name) 
```

它使用句点分隔的路径导航。我不知道如何利用数据绑定框架来做到这一点。第一个障碍是它似乎只想使用对象（而不是类型），第二个障碍是我什至无法让它与控件之外的对象一起使用。我会认为数据绑定在某些地方处理类型和属性类型。它必须！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:22:31.343

对于数据绑定，您需要属性的值而不是属性本身（即 return`object`而不是`PropertyInfo`）。

[这个类似的问题](https://stackoverflow.com/q/1954746/389966)提供了这样的实现，如果您实际上希望该方法返回属性而不是它的值，也可以轻松修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:01:32.617

这是我想出的，不使用绑定基础设施。我仍然认为绑定会做得更好。

```
 Function GetPropertyInfo(Type As System.Type, NavigationPath As String) As System.Reflection.PropertyInfo
    For Each Part As String In NavigationPath.Split(".")
      GetPropertyInfo = Type.GetProperty(Part)
      If GetPropertyInfo IsNot Nothing Then
        Type = GetPropertyInfo.PropertyType
      End If
    Next
  End Function 
```

# php - php ini 使用 parse_ini_file 创建数组

> ID：11213641
> 
> 赞同：12
> 
> 时间：2012-06-26T18:22:55.783
> 
> 标签：php, ini

是否可以使用设置文件创建数组？

在`index.php`文件中它读取`.ini`文件：

```
// Parse config file
$settings = parse_ini_file("settings"); 
```

例如设置文件如下所示：

```
[States]
east = "Michigan, New York, Minnesota" 
```

希望像这样创建一个数组：

```
array('Michigan', 'New York', 'Minnesota') 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-15T05:27:34.730

在 ini 文件中创建数组的正确方法是使用括号：

```
[States]
east[] = Michigan
east[] = New York
east[] = Minnesota 
```

[您可以在文档中`parse_ini_file()`](http://php.net/manual/en/function.parse-ini-file.php)看到一个示例：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T18:27:13.963

它返回一个关联数组。然后，要将东部各州解析为一个数组，您可以这样做： `$eastStates = explode(', ', $ini['States']['east']);`如果您的数据确实是您描述的格式。请注意，您可以以 ini 格式创建真正的数组，请参阅[文档](http://mx.php.net/parse_ini_file)。

# jquery - 将 jquery fullcalendar 集成到 emberjs 中的问题

> ID：11213642
> 
> 赞同：0
> 
> 时间：2012-06-26T18:22:55.943
> 
> 标签：jquery, fullcalendar, ember.js

有没有可能得到这个小提琴的帮助：http: [//jsfiddle.net/aLCfb/](http://jsfiddle.net/aLCfb/)。我正在尝试将 jquery fullcalendar 集成到 emberjs 中，但日历不会显示。如果没有 emberjs，相同的代码会显示日历：http: [//jsfiddle.net/CH4qa/](http://jsfiddle.net/CH4qa/)。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:36:46.883

你有一个错误。我变了：

```
App.EventView.appendTo('mycalendar'); 
```

到

```
App.EventView.create().appendTo('mycalendar'); 
```

您需要先创建一个实例。检查以下jsfiddle：http: [//jsfiddle.net/aLCfb/4/](http://jsfiddle.net/aLCfb/4/)

# wpf - asp.net 中的 ViewModel 是否与 WPF 中的 ViewModel 可比

> ID：11213644
> 
> 赞同：2
> 
> 时间：2012-06-26T18:23:06.757
> 
> 标签：wpf, asp.net-mvc, viewmodel

如果您知道 WPF 的 MVVM 模式，那么您就会知道 Josh smith msdn 文章，其中 CustomerViewModel 不包含如下简单属性：

```
public string FirstName {get;set;} 
```

而是一个 ViewModel 包装一个模型并像这样委托属性访问：

```
public string FirstName
{
    get { return _customer.FirstName; }
    set
    {
        if (value == _customer.FirstName)
            return;
        _customer.FirstName = value;
        base.OnPropertyChanged("FirstName");
    }
} 
```

我在 asp.net mvc 中没有看到这个。这是因为缺少 INotifyPropertyChanged 接口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:24:52.917

> 我在 asp.net mvc 中没有看到这个

这很正常。你不应该看到它。MVC 是一种不同于 MVVM 的模式。在 MVC 中，视图没有人通知任何更改。MVVM 模式不适应 Web 的无状态特性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:35:39.353

MVVM 中的`ViewModel`和`Model`片段与在 MVC 中使用时的定义不同

在 MVVM 中，`ViewModel`就是你的应用程序，而`View`只是为它提供了一个用户友好的界面。在 MVC 中，`View`是您的应用程序，`ViewModel`为它提供数据，并`Controller`处理应用程序流程和逻辑。

两种模式之间的模型也不同。在 MVC 中，`M`代表数据模型和视图模型，而在 MVVM 中，`M`仅代表数据模型。

总而言之，MVC`M+C`等于 MVVM `VM`，并且 MVC`M`包含 MVVM`M`和`VM`片段的混合

作为旁注，`INotifyPropertyChanged`WPF 使用该接口在属性更改时自动更新 UI。这种东西在 MVC 中没有使用，所以不需要。

# python - 使用 pylab 绘制从 Scipy 返回的图像

> ID：11213646
> 
> 赞同：9
> 
> 时间：2012-06-26T18:23:10.587
> 
> 标签：python, matplotlib

我正在努力从 MatLab 迁移到 Sage 中的 python。所以我使用这些命令，我​​在 Sage 中遇到了这个错误：

```
from scipy import misc

l = misc.lena();

import pylab as pl

pl.imshow(l) 
```

错误或消息（我不知道）是：

```
matplotlib.image.AxesImage object at 0xb80198c 
```

而且它没有显示任何图像

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-24T12:45:37.423

这不是错误，只需打印该方法返回的对象。

有两种显示图形的方法：

1.  在调用**pl.imshow(l)**后添加**pl.show( )**

***   使用**ipython --pylab**打开你的 python shell，** 

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:26:53.447

这是使用“imshow”命令后从 pylab 返回的对象。那是 Axes 图像对象的位置。

文档： http: [//matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.imshow](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.imshow)

看起来它说它将对象显示到当前轴。如果你还没有创建一个情节，我想你不会看到任何东西

简单的谷歌搜索表明这可能是您正在寻找的

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.misc.lena.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.misc.lena.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T12:55:12.790

```
from scipy import misc
l = misc.lena();
import pylab as pl
pl.imshow(l)

####use this
pl.show() 
```**

# javascript - 灯箱 Jquery 插件不起作用？

> ID：11213648
> 
> 赞同：0
> 
> 时间：2012-06-26T18:23:15.740
> 
> 标签：javascript, jquery, lightbox

我一直在我的网站上工作，但似乎我无法让灯箱插件工作。我按照网站上写的步骤，它仍然没有工作。任何帮助，将不胜感激。你可以在这里找到这个页面， http: [//fuse.orgfree.com/Portfolio%202012/portfolio.html](http://fuse.orgfree.com/Portfolio%202012/portfolio.html)，当你点击图片时，它应该启动灯箱，但我不知道为什么它不起作用。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:26:24.017

您的灯箱库的路径不正确

```
<script type="text/javascript" src="lb/js/jquery.lightbox-0.4.js"></script> 
```

我尝试浏览该网址，但它返回`404 not found`。

这同样适用于

```
<link rel="stylesheet" type="text/css" href="lb/css/jquery.lightbox-0.4.css" 
   media="screen" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:29:03.910

你脑子里有这个

```
<script src="lb/js/jquery.lightbox-0.4.js" type="text/javascript"> 
```

我认为它应该是你的灯箱脚本，但它不是 JS，它是 HTML。所以你的灯箱电话失败了

```
$("#gallery a").lightBox is not a function 
```

# matlab - 在 MATLAB 中调用自己的匿名函数

> ID：11213649
> 
> 赞同：6
> 
> 时间：2012-06-26T18:23:26.083
> 
> 标签：matlab, anonymous-function

作为一个实验（并且因为我正在从用户数据中生成匿名函数），我运行了以下 MATLAB 代码：

```
h = @(x) x * x
    h = @(x) x * x
h(3)
    ans = 9
h = @(x) h(x) + 1
    h = @(x)h(x)+1
h(3)
    ans = 10 
```

基本上，我自己做了一个匿名函数调用。MATLAB 没有递归地执行操作，而是记住了旧的函数定义。但是，工作区并未将其显示为变量之一，并且句柄似乎也不知道它。

只要我保留新功能，旧功能是否会在后台存储？这种结构有什么“陷阱”吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T18:48:07.500

匿名函数在定义时会记住工作区的相关部分，并对其进行复制。因此，如果您在匿名函数的定义中包含一个变量，并且稍后更改该变量，它将保留匿名函数中的旧值。

```
>> a=1;
>> h=@(x)x+a %# define an anonymous function
h = 
    @(x)x+a
>> h(1)
ans =
     2
>> a=2 %# change the variable
a =
     2
>> h(1)
ans =
     2 %# the anonymous function does not change
>> g = @()length(whos)
g = 
    @()length(whos)
>> g()
ans =
     0 %# the workspace copy of the anonymous function is empty
>> g = @()length(whos)+a
g = 
    @()length(whos)+a
>> g()
ans =
     3 %# now, there is something in the workspace (a is 2)
>> g = @()length(whos)+a*0
g = 
    @()length(whos)+a*0
>> g()
ans =
     1 %# matlab doesn't care whether it is necessary to remember the variable
>> 
```

# c# - ajax 不断发布过时的值

> ID：11213652
> 
> 赞同：0
> 
> 时间：2012-06-26T18:23:47.667
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我有一个自动提交和更新同一页面的表单。我有一个更改按钮值的 java 脚本函数，但 AJAX 不断发布旧值。

AJAX

```
$.ajax({
            type: 'POST',
            url: this.action,
            data: $('form').serialize()
}); 
```

查询

```
function changevalue()
{
 $('#button').attr('value', 'grapes');
} 
```

形式

```
form...
<input type="submit"  name="button" id="button" value="apple" onclick="changevalue();" />
... 
```

按钮将显示新更改的单词，但后面的代码（控制器）显示旧变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:27:54.197

`.val()`使用 jQuery 的方法更改值。

```
function changevalue() {
    $('#button').val('grapes');
} 
```

从 jQuery 1.6.0 开始，该`.attr()`方法正确地停止访问和更改属性值，它只更改属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:33:37.483

您没有取消单击该按钮的提交按钮的默认操作，它正在刷新页面，这意味着默认值将重新出现。

使用代码添加事件处理程序，而不是内联标记。

```
<input type="submit"  name="button" id="button" value="apple" />

<script>
    $( function() {  
        $("#button").on("click", changevalue); //assign the click for 1.7+
        //$("#button").click( changevalue); //assign the click for 1.6.x and below
    });

    function changevalue(evt) {
        evt.preventDefault(); //cancel the click action
        $(this).val("grapes");  //set the value with val, do not use attr
    }
</script> 
```

并从有关[序列化的文档中](http://api.jquery.com/serialize/)

> 注意：只有“成功的控件”被序列化为字符串。**由于未使用按钮提交表单，因此没有序列化提交按钮值**。对于要包含在序列化字符串中的表单元素的值，该元素必须具有 name 属性。来自复选框和单选按钮（“单选”或“复选框”类型的输入）的值仅在它们被选中时才被包括在内。来自文件选择元素的数据未序列化。

# python - 从会话中取消绑定对象

> ID：11213665
> 
> 赞同：31
> 
> 时间：2012-06-26T18:24:33.533
> 
> 标签：python, sqlalchemy

是否可以从 SQLAlchemy 会话中取消绑定对象？

我已经习惯了`deepcopy`，但是由于在使用关联代理时这[似乎是不可能的](https://stackoverflow.com/q/11155106/145013)，所以我正在寻找另一种解决方案来从会话中删除对象以将其添加到另一个。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-26T18:31:22.023

Expunge 从 Session 中删除一个对象，将持久实例发送到分离状态，并将挂起的实例发送到瞬态：

```
session.expunge(obj1) 
```

更新：分离的对象可以通过使用附加到相同或另一个会话

```
session2.add(obj1) 
```

或合并

```
session2.merge(obj1) 
```

使用 merge()，给定的实例不会放在会话中，并且可以与不同的会话关联或分离。merge() 对于获取任何类型的对象结构的状态而不考虑其来源或当前会话关联并将该状态置于会话中非常有用。

# iphone - UItableView plist 数据排序

> ID：11213671
> 
> 赞同：1
> 
> 时间：2012-06-26T18:24:54.903
> 
> 标签：iphone, objective-c, ios, xcode, ipad

嗨，我创建了一个填充了 plist 数据的表格视图，我需要重新排序单元格，我的意思是不要显示这样的数据：

```
1
2
3
4
5 
```

应该是这样的：

```
5
4
3
2
1 
```

我正在使用这段代码：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:NO];
    titles =  [[titles sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]] retain]; 
```

在这种方法中：

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

但结果是这样的

```
1
5
2
4
3 
```

我该如何解决？

编辑：

我的清单：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>1</string>
    <string>2</string>
    <string>3</string>
    <string>4</string>
    <string>5</string>
</array>
</plist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:47:29.873

创建排序描述符时更改`ascending:NO`为。`ascending:YES`

要提供更多建议，您可能需要发布更多代码。您应该发布实际如何填充充当数据源的数据结构，以及如何在`cellForRowAtIndexPath`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:52:28.707

像这样格式化您的数据（请注意，您可以通过创建一个包含数组的 .plist 来做到这一点）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Title of Array</key>
    <array>
        <string>1</string>
        <string>2</string>
        <string>3</string>
        <string>4</string>
        <string>5</string>
    </array>
</dict>
</plist> 
```

然后使用此代码获取它

```
NSDictionary *data = [[NSDictionary alloc] initWithContentsOfFile:DataPath];
NSArray *array = [[names allKeys] sortedArrayUsingSelector:@selector(compare:)]; 
```

# visual-studio - Visual Studio 监视窗口图标代表什么？

> ID：11213672
> 
> 赞同：7
> 
> 时间：2012-06-26T18:24:56.947
> 
> 标签：visual-studio, debugging

Visual Studio 中的每个监视窗口图标和叠加层代表什么？某处的 MSDN 页面上是否有图例？

![一些图标的例子](../Images/63f26c6886ce0d8a7ef2720b0462707d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T18:31:29.183

图标标识被监视实体的类型；IntelliSense、类视图和对象浏览器（以及 Visual Studio 2012 中增强的解决方案资源管理器）中也使用了相同的图标。

MSDN 上有图标的概述： [类视图和对象浏览器图标](http://msdn.microsoft.com/en-us/library/y47ychfe(v=vs.100))（[Visual Studio 2012 中的图标相似](http://msdn.microsoft.com/en-us/library/y47ychfe(v=vs.110))，但样式不同）。

**添加**

如果你用谷歌搜索类和对象浏览器图标，那么你应该看到最新的，例如 VS 2019 的这个 [https://docs.microsoft.com/en-us/visualstudio/ide/class-view-and-object-browser-icons ?view=vs-2019](https://docs.microsoft.com/en-us/visualstudio/ide/class-view-and-object-browser-icons?view=vs-2019)

这张图片中显示的一些来自该页面

[![在此处输入图像描述](../Images/d3dc2751d382abdd95aba1089885e998.png)](https://i.stack.imgur.com/QluLk.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-14T23:49:41.503

对于 VS2013，这里是图标参考：

[http://msdn.microsoft.com/en-us/library/y47ychfe.aspx](http://msdn.microsoft.com/en-us/library/y47ychfe.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-17T11:50:24.430

对于**Visual Studio 2015**和**2017**：

[https://docs.microsoft.com/en-us/visualstudio/ide/class-view-and-object-browser-icons](https://docs.microsoft.com/en-us/visualstudio/ide/class-view-and-object-browser-icons)

# actionscript-3 - 在已经具有某种形状的影片剪辑中使用 lineTo

> ID：11213673
> 
> 赞同：0
> 
> 时间：2012-06-26T18:24:59.450
> 
> 标签：actionscript-3, flash, apache-flex

这很愚蠢，但我仍然对此摸不着头脑：

```
mc.graphics.lineStyle(2,0xff0000)
mc.graphics.lineTo(100,100);

mc.setChildIndex((mc.getChildAt(0)),0) 
```

上面的 mc 是一个实心矩形。但是当我使用 lineTo 时，它会在形状的背面画线。我尝试使用 setChildIndex 方法，但没有用。

有什么建议么 ？谢谢 V。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:27:24.687

graphics 是组件内所有子元素下方的绘图层，相反，您可以创建另一个精灵，然后按您喜欢的任何顺序将其添加到显示树并在其图形上绘制。

如果这没有帮助或不清楚，请告诉我。

肖恩

# c# - 水晶报告（无来源）

> ID：11213675
> 
> 赞同：0
> 
> 时间：2012-06-26T18:25:04.203
> 
> 标签：c#, crystal-reports-2010

我使用 C# 和水晶报告制作了一个 Windows 应用程序，这是我的代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        CrystalReport1 objRpt = new CrystalReport1();
        string connStr = "Data Source=.;Initial Catalog=Reg;Integrated Security=TRUE";
        SqlConnection cn = new SqlConnection(connStr);
        string query1 = "Select name,phone,mobile from Register";
        SqlDataAdapter da = new SqlDataAdapter(query1, connStr);
        DataSet ds = new DataSet();
        da.Fill(ds, "my_dt");
        if (ds.Tables[0].Rows.Count==0)
        {
            MessageBox.Show("mafeesh");
            return;
        }

        objRpt.SetDataSource(ds);
        crystalReportViewer1.ReportSource = objRpt;
    } 
```

当我运行程序时，会出现以下错误：

> 无法加载文件或程序集 'file:///C:\Program Files\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Common\SAP BusinessObjects Enterprise XI 4.0\win32_x86\dotnet1\crdb_adoplus.dll' 或其依赖项之一. 该系统找不到指定的文件。

你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:33:08.227

把它放在你的 app.config 文件中

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0"/>
 </startup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:30:56.730

从 Bin 文件夹中删除 dll 文件，然后重新构建您的解决方案....我希望到目前为止这会对您有所帮助

# android - 获取图像输入流的大小

> ID：11213676
> 
> 赞同：4
> 
> 时间：2012-06-26T18:25:05.413
> 
> 标签：android, bitmap, inputstream, bitmapfactory

我需要获取在输入流中找到的图像的高度和宽度。这是我所做的：

```
private Boolean testSize(InputStream inputStream){
        BitmapFactory.Options Bitmp_Options = new BitmapFactory.Options();
        Bitmp_Options.inJustDecodeBounds = true;
        BitmapFactory.decodeResourceStream(getResources(), new TypedValue(), inputStream, new Rect(), Bitmp_Options);
        int currentImageHeight = Bitmp_Options.outHeight;
        int currentImageWidth = Bitmp_Options.outWidth;
        Bitmp_Options.inJustDecodeBounds = false;
    if(currentImageHeight < 200 || currentImageWidth < 200){
        Object obj = map.remove(pageCounter);
        Log.i("Page recycled", obj.toString());
        return true;
    }
    return false;} 
```

跳到问题点：

即使我在下面的第二种方法计算后强制它为假，它也会改变 BitmapFactory.Options。

```
private Bitmap getBitmap(InputStream InpStream){
    Bitmap originalBitmap = BitmapFactory.decodeStream(InpStream);//Null.
    return originalBitmap;
} 
```

现在我的问题是有另一种从输入流中获取图像大小和宽度的方法吗？我真的需要帮助，非常感谢任何帮助。

```
 ZipInputStream zip = null;
                zip = new ZipInputStream(new FileInputStream(getFileLocation()));
                for(ZipEntry zip_e = zip.getNextEntry(); zip_e != null ; zip_e = zip.getNextEntry()){
                    if(zip_e.isDirectory()) {
                        continue;
                    }
                    String file_zip = zip_e.getName();
                    String comparison = map.get(pageCounter).getHref();
                    if(file_zip.endsWith(comparison)){
                        SpannableString Spanable_String = new SpannableString("abc");
                        if(testSize(zip)){
                            map.remove(pageCounter);
                            return false;
                        }
                        Bitmap bitmap = getBitmap(zip);
                        if(bitmap == null){
                            map.remove(pageCounter);
                            return false;
                        }
                        image_page.put(zip_e.getName(), zip);
                        Drawable drawable_image = new FastBitmapDrawable(bitmap);
                        drawable_image.setBounds(0,0,drawable_image.getIntrinsicWidth(), drawable_image.getIntrinsicHeight());
                        ImageSpan imageSpan = new ImageSpan(drawable_image, ImageSpan.ALIGN_BASELINE);
                        Spanable_String.setSpan(imageSpan, 0, 3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                        tv.setText(Spanable_String);
                        return false;
                    }
                } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T19:16:39.647

主要问题不在于`BitmapFactory.Options`，而在于`InputStream`。流是顺序的，因此当您读取流以仅解码图像大小时，流中的指针正在移动。接下来，当您`decode`再次调用以实际解码位图时，流指针不再位于位图的开头，并且您会`null`因为部分流无法解码而得到。

您需要重置流。根据该流是什么，您可能可以使用`.mark`它`.reset`。本质上，你会做这样的事情：

```
private Boolean testSize(InputStream inputStream) {
    BitmapFactory.Options Bitmp_Options = new BitmapFactory.Options();
    Bitmp_Options.inJustDecodeBounds = true;

    inputStream.mark(inputSteram.available());

    BitmapFactory.decodeResourceStream(getResources(), new TypedValue(), inputStream, new Rect(), Bitmp_Options);

    inputSteram.reset();

    int currentImageHeight = Bitmp_Options.outHeight;
    int currentImageWidth = Bitmp_Options.outWidth;
    Bitmp_Options.inJustDecodeBounds = false;

    if(currentImageHeight < 200 || currentImageWidth < 200){
        Object obj = map.remove(pageCounter);
        Log.i("Page recycled", obj.toString());
        return true;
    }

    return false;
} 
```

您可以`InputStream`通过调用它来检查您是否支持此`markSupported`功能。如果返回，`true`那么您可以使用上述技术。如果返回`false`，则上述方法将不起作用，您实际上需要在解码完整位图之前再次关闭并重新打开流。

# c# - 通过名单 通过参考

> ID：11213679
> 
> 赞同：3
> 
> 时间：2012-06-26T18:25:24.047
> 
> 标签：c#, ref

> **可能重复：**
> [通过 ref 传入对象](https://stackoverflow.com/questions/729526/passing-in-object-by-ref)

使用下面的代码，输出将是：

```
Without:
With:1 
```

代码：

```
 static void Main(string[] args)
    {
        var listWithoutRef = new List<int>();
        WithoutRef(listWithoutRef);
        Console.WriteLine("Without:" + string.Join(" ", listWithoutRef));

        var listWithRef = new List<int>();
        WithRef(ref listWithRef);
        Console.WriteLine("With:" + string.Join(" ", listWithRef));
    }

    static void WithoutRef(List<int> inList)
    {
        inList = new List<int>(new int[] { 1 });
    }

    static void WithRef(ref List<int> inList)
    {
        inList = new List<int>(new int[] { 1 });
    } 
```

只看这个，我会说一个 List 在堆上，所以无论如何都是由 ref 传递的，所以它们应该是一样的？我误解了 ref 关键字吗？还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T18:28:08.253

> 我误解了 ref 关键字吗？还是我错过了其他东西？

是的。您不是将列表本身传递给方法，而是通过*引用传递对列表*的引用。这使您可以更改方法中的引用（`List<int>`实际`listWithRef`引用的），并使其反映。

如果不使用`ref`关键字，您的方法就无法更改对列表的引用 - 在任何一种情况下，实际的列表存储机制都不会改变。

请注意，如果您只想*使用*列表，则不需要这样做。例如，您可以`List<int>.Add`在任一方法中调用，列表将添加新项目。只有引用类型需要 Ref 才能更改引用本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T18:28:06.503

是的，所有`List`对象都存储在堆上。但是，没有`ref`关键字，您无法重新分配`inList`参数并使其影响调用者的范围。当您创建一个新`List`对象时，它会作为一个新对象进入堆中，但调用者范围内的原始**引用**不受影响，除非您使用**ref**关键字。

在`WithoutRef`中，如果您在现有的上调用方法`List`而不重新定义它，您将看到它已被修改：

```
inList.Clear();
inList.Add(1); 
```

# iis - ColdFusion 的 JWildCardHandler 在 IIS 中有什么作用？

> ID：11213683
> 
> 赞同：2
> 
> 时间：2012-06-26T18:25:41.607
> 
> 标签：iis, coldfusion, iis-7.5

我试图禁用上传文件夹的脚本权限，并意识到如果我不删除`JWildCardHandler`，我会得到，

> HTTP 错误 403.1 - 禁止
> 
> 您试图从不允许运行可执行文件的目录运行 CGI、ISAPI 或其他可执行程序。

有人可以解释一下是做什么的`JWildCardHandler`吗？它是为了处理一些对 SEO 友好的 URL 吗？为什么默认启用？这是否意味着请求静态文件也会调用这个不必要的处理程序？

我能想到的唯一合理的用例是：

> [http://mydomain.com/index.cfm/something](http://mydomain.com/index.cfm/something)

这是`JWildCardHandler`要处理的事情吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:41:01.157

> 有人可以解释一下 JWildCardHandler 是做什么的吗？

这是 ColdFusion 的包罗万象的处理程序，用于解释对 ColdFusion 页面的请求。

> 它是为了处理一些对 SEO 友好的 URL 吗？为什么默认启用？

如果您安装了 ColdFusion 并将您的站点配置为使用 ColdFusion，则将安装此处理程序来捕获这些请求。它与SEO无关。

> 这是否意味着请求静态文件也会调用这个不必要的处理程序？

考虑到它是一个包罗万象并被定义为 ISAPI 过滤器的东西，所有请求都将通过它。

# real-time - 我可以将 Google Fusion 表与公共 Dropbox 文档同步吗？

> ID：11213684
> 
> 赞同：0
> 
> 时间：2012-06-26T18:25:43.977
> 
> 标签：real-time, sync, dropbox, google-fusion-tables

有一个公共保管箱文档，每天左右更新。我在 Google Fusion 表中使用这些数据来进行不同类型的可视化和分析。

我可以将融合表设置为自动更新以从保管箱中提取数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:22:14.640

不是我知道的。您需要编写一个脚本来执行此操作。存在 PHP、Python 和 Java FT 客户端库，可让您执行此操作。

# android - Android FileWriter 无法在索尼爱立信 Arc 上运行，但可以在另一部手机上运行

> ID：11213686
> 
> 赞同：0
> 
> 时间：2012-06-26T18:25:44.937
> 
> 标签：android, file-io

我遇到的问题可能与硬件有关。无论如何，我很难过。

我已经编写了一些代码（我从中获取并修改了：[将文本文件写入 SD 卡失败](https://stackoverflow.com/questions/4580683/android-java-writing-text-file-to-sd-card)）我将代码放在下面。它在我的索尼爱立信 X8 上运行良好。但是，在索尼爱立信 Arc 上，我在手机上查找时找不到文件！我逐行浏览代码，没有失败。就好像它在电话里，而我只是瞎了眼。我什至可以在调试器中看到 gpxfile 的值是：

/mnt/sdcard/MyCompany/MyLog 但是当我使用 windows 资源管理器查找文件时，我当然看不到 MyCompany 目录。手机上是否有一些设置（静默）阻止写入 SD 卡？

这是代码：

```
public static boolean generateNoteOnSD(String sFileName, String sBody) {
    try {
        String auxSDCardStatus = Environment.getExternalStorageState() ;
        if (!auxSDCardStatus.equals(Environment.MEDIA_MOUNTED)) {
            Log.i(TAG, "generateNoteOnSD auxSDCardSTatus: " + auxSDCardStatus);
        }

        if (auxSDCardStatus.equals(Environment.MEDIA_MOUNTED)) {
            File root = new File(Environment.getExternalStorageDirectory(), "Dexcom");
            if (!root.exists()) {
                root.mkdirs();
            }
            File gpxfile = new File(root, sFileName);
            FileWriter writer = new FileWriter(gpxfile, true);
            String currentTimeString = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS").format(new Date());

            writer.append(currentTimeString + ", " + sBody +System.getProperty("line.separator") );

           //writer.newLine();
            writer.flush();
            writer.close();
            Log.d(TAG,"generateNoteOnSD: Saved to file: " + sBody);
            return true;
        } else {
            return false;
        }
    } catch(IOException e) {
         e.printStackTrace();
         return false;
         //importError = e.getMessage();
         //iError();
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:48:23.763

就我而言，问题是我使用 USB 电缆将 Xperia ARC 连接到笔记本电脑。显然，如果你这样做，事情就不会完全正确。X8 没问题，所以我猜它是特定于手机的。计算机可能会锁定文件，从而阻止 Android 更新文件。不知道为什么我没有收到错误。未来读者的底线：尝试断开手机与计算机的连接。

# setattribute - 使用js将属性添加到具有特定类的所有元素

> ID：11213689
> 
> 赞同：0
> 
> 时间：2012-06-26T18:26:02.217
> 
> 标签：setattribute, getelementsbyclassname

```
*JS*
document.getElementsByClassName('abc')[0].setAttribute('id', 'abe');

*html*
<div class="abc"></div>
<div class="abc"></div> 
```

如何使此脚本与多个元素一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:31:30.693

像这样的东西

```
var divs = document.getElementsByClassName('abc');
for (i = 0; i < divs.length; i++) {
  divs[i].setAttribute('id', 'abe');
} 
```

# php - php 表单验证问题 - 无法打印到标题

> ID：11213695
> 
> 赞同：0
> 
> 时间：2012-06-26T18:26:22.970
> 
> 标签：php, forms, validation

我有一个 php 表单，可以将信息保存到我的数据库并在完成后发送电子邮件。但是它不会验证字段以查看它们是否为空，而是打印设置和未设置选项。关于为什么会发生这种情况的任何想法？在我向其添加表单字段验证之前，它运行良好。

作为旁注，由于需要 html 5 aria，它在 FF 和 Chrome 中有效，但在 IE 中无效

html

```
<form id="contact" name="contact" action="register1.php" method="post">
 <label for='Cname'>Camper Name</label>
 <input type="text" name="Cname" maxlength="50" value="" required aria-required=true />
 <input type="hidden" id="action" name="action" value="submitform" />
 <input type="submit" id="submit" name="submit" value="Continue to Camp Selction"/>
</form> 
```

php

```
<?php
 //include the connection file

 require_once('connection.php');

 //save the data on the DB and send the email

 if(isset($_POST['action']) && $_POST['action'] == 'submitform')
 {

   //recieve the variables
$Cname = $_POST['Cname'];

//form validation (this is where it all breaks)
if (isset($Cname)) {
    echo "This var is set so I will print.";
}
else {
  echo '<script type="text/javascript">alert("please enter the required fields");</script>'; 
}
//save the data on the DB (this part works fine) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:34:15.130

```
<?php

    $Cname = isset($_POST['Cname']) ? $_POST['Cname'] : null;
    if (isset($Cname)) {
        echo "This var is set so I will print.";
    }

    // OR

    if (isset($_POST['Cname'])) {
        // Perform your database action here...
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:33:01.880

考虑使用 PHP 的空函数

[PHP.Net 手册 Empty()](http://us2.php.net/manual/en/function.empty.php)

您可以将代码更新为以下内容：

```
if(!empty($Cname)) {
    echo "This var is set so I will print.";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:33:32.407

你只需要一个“exit()”吗？

# linq-to-sql - 当我将表拖到 dbml 文件中时，停止 LINQ to SQL dbml 更新连接字符串

> ID：11213697
> 
> 赞同：12
> 
> 时间：2012-06-26T18:26:24.170
> 
> 标签：linq-to-sql, connection, connection-string

每次我将修改后的表拖到我的 dbml 中时，VS2010 都希望我更新连接字符串，即使我已经创建了一个具有完全相同信息的数据连接。每次发生这种情况时，它都会将我的连接字符串更改为“DataSourceConnectionString”，我必须从 5 个不同的文件中删除它，并将其替换为我之前使用的连接字符串的名称，这样它就不会通过源头控制。有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T12:18:40.343

在修补了一些相关问题的答案后，我想出了另一个办法。

为了解决我遇到的问题，我需要从 VS2010 的服务器资源管理器窗口中删除为连接到我的数据库而创建的数据连接。然后您需要打开 .dbml 设计器并右键单击空白区域并选择属性。将打开一个属性窗口，其中将有一个“连接”部分，单击小箭头将其打开。如果单击连接字符串行，则会出现一个带有点（...）的按钮。当您单击此按钮时，它将打开一个连接属性窗口。此窗口将已经拥有您的 .dbml 已经拥有的所有相同连接属性。您所要做的就是单击“确定”，它会在服务器资源管理器中自动为您创建一个数据连接，当您将新对象拖到 .dbml 时，它不会导致您向它添加新的连接字符串！

耶！每次更新时不再删除额外的连接字符串！:D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T00:33:47.620

实例化 DataContext 时，使用允许您指定连接字符串的重载。这将覆盖设计师放置在那里的任何值。例如，不仅仅是：

```
DataClasses1DataContext db = new DataClasses1DataContext(); 
```

采用：

```
DataClasses1DataContext db = new DataClasses1DataContext("..connection string.."); 
```

或者

```
DataClasses1DataContext db = new DataClasses1DataContext(ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString); 
```

希望这是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-06T12:38:59.247

使用文本编辑器`.dbml`手动打开并删除连接字符串。连接将类似于

```
<Connection Mode="" > 
```

然后，您可以使用自己的部分类，如下所示

```
public partial class MyDataContext : DataContext
{
    public MyDataContext() : base(ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString)
    {
        OnCreated();
    }
} 
```

# android - 是否可以使复选框/单选按钮无法选中？

> ID：11213699
> 
> 赞同：33
> 
> 时间：2012-06-26T18:26:28.547
> 
> 标签：android

我正在制作的程序有几个视图，用户试图在其中基本上找出很多布尔值。听起来很奇怪，但我的意思是我的设备将通过蓝牙连接到另一台设备，然后读取该设备的状态。我基本上显示了该设备当前状态的清单。因此，根据该设备正在执行的操作，会选中不同的复选框。有没有办法让所有的复选框都无法选择？

更好的是，有没有办法将它硬编码到 XML 文件中？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-26T18:30:36.427

您是否考虑[`android:clickable`](http://developer.android.com/reference/android/view/View.html#attr_android:clickable)过为您的复选框使用 xml 属性？

从文档中：

> 定义此视图是否响应点击事件。

如果它不能对点击事件做出反应，那么它实际上变得不可检查。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-26T18:30:11.953

```
<CheckBox
        android:id="@+id/blahblah"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:enabled="false" /> 
```

**在你的代码中你可以调用`cbox.setChecked(boolean)`**

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-24T13:14:44.253

扩展 crocboy 和 nicholas.hauschild 所说的内容。

在你的 XML 中设置它

```
 android:enabled="false" 
```

将使按钮/复选框变灰，以显示它已禁用

另一种方法是将其设置为：

```
 android:clickable="false" 
```

这是制作红色 RadioButton 的代码，选中时会变为绿色（在您的代码中），但用户无法检查。

```
 android:checked="false"
    android:textColor="#d1d2d4"
    android:buttonTint="#d1202d"
    android:textColorHighlight="#248d51"
    android:clickable="false" 
```

这是检查它的代码（这是使用JSON：所以它正在检查english=="yes"）

```
 String yes = "yes";
    if(yourObject.english.equals(yes)) {
        if (m_english.isChecked()) {/*do nothing */}
        else m_english.toggle();
    } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-26T18:33:17.280

看看这个：http: [//developer.android.com/reference/android/widget/CheckBox.html](http://developer.android.com/reference/android/widget/CheckBox.html)

您可以使用`checkbox.setEnabled(false)`使其无法选择。

在你的 XML 中试试这个：`android:enabled="false"`

据说它已被弃用，但可能会根据您的 traget SDK 工作。

希望有帮助！

# symfony - 带有名称和图像的 Symfony2 实体类型表单

> ID：11213701
> 
> 赞同：4
> 
> 时间：2012-06-26T18:26:35.273
> 
> 标签：symfony

我有一个具有名称（字符串）和文件（也是表示文件名的字符串）的实体。这是“图标”实体。我有另一个名为“Category”的实体，它有一个名称（字符串）和一个与图标（OneToMany）的关系。我希望表单允许用户为类别选择图标。

所以我可以将其显示为：

```
$builder->add('icon', 'entity', array(
    'class' => 'CroltsMainBundle:Icon',
    'expanded' => true,
    'multiple' => false
)); 
```

但我真正想要的是在 twig 中为每个单选按钮显示类似的内容：

```
<div>
<label for="something"><img src="/icons/{{icon.file }}" />{{icon.name}}</label>
<input type="radio" name="something" value="{{ icon.id }}" />
</div> 
```

有没有一种用 Symfony 表单制作这种类型的广播表单的好方法？就像我想要的自定义类型一样吗？我真的没有对自定义类型做太多的事情来知道这有多少是可能的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T11:30:30.130

不确定这是最好的方法，但这是我处理这种情况的方法：

1.  创建一个新的表单类型，`entityType`例如`IconCheckType`：( [http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html](http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html) )

    ```
    namespace .....\Form\Type;

    use Symfony\Component\Form\AbstractType;
    use Symfony\Component\Form\FormBuilder;
    use Symfony\Component\Form\FormView;
    use Symfony\Component\Form\FormInterface;

    class IconCheckType extends AbstractType
    {
       /**
         * {@inheritdoc}
         */
      public function buildForm(FormBuilder $builder, array $options) {

        $builder -> setAttribute('dataType', $options['dataType']);
      }

       /**
         * {@inheritdoc}
         */
      public function buildView(FormView $view, FormInterface $form) {
        $view -> set('dataType', $form -> getAttribute('dataType'));
      }

       /**
         * {@inheritdoc}
         */
      public function getDefaultOptions(array $options) {
        return array('required' => false,'dataType'=>'entity');
      }

      /**
         * Returns the allowed option values for each option (if any).
         *
         * @param array $options
         *
         * @return array The allowed option values
         */
        public function getAllowedOptionValues(array $options)
        {
            return array('required' => array(false));
        }

       /**
         * {@inheritdoc}
         */
      public function getParent(array $options) {
        return 'entity';
      }

       /**
         * {@inheritdoc}
         */
      public function getName() {
        return 'iconcheck';
      }

    } 
    ```

2.  在您的表格中

    ```
    ...
    ->add('icon', 'iconcheck', array(
            'class' => 'CroltsMainBundle:Icon',
            'property'=>'formField',
            'multiple'=>false,
            'expanded'=>true
          ))
    ... 
    ```

    请注意`property=>'formField'`，这意味着`__toString`它不会返回 as 标签，而是从实体类的函数 getFormField 返回您想要的任何内容

3.  因此，在您的实体类中：

    ```
    class Icon {

    ....
        public function getFormField() {  
           return $this;   /* or an array with only the needed attributes */ 
        }

    ....
    } 
    ```

4.  然后你可以呈现你的自定义字段

    ```
    {% block iconcheck_widget %}
       {% for child in form %}
          {% set obj=child.vars.label %}
            <div>
                <label for="something"><img src="/icons/{{obj.file }}" />{{obj.name}}</label>
                {{ form_widget(child) }} {# the radio/checkbox #}
              </div>
          {{ form_widget(child) }}#}
        {% endfor %}

    {% endblock %} 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:32:41.770

你能不能让你的`__toString()`方法：

```
<?php
// Icon entity
public function __toString()
{
  return '<img src="/icons/'. $this->file .'" />' . $this->name';
} 
```

如果没有，那么您将不得不创建一个自定义类型。然而这真的很容易

```
<?php

namespace Your\NameSpace;

use Symfony\Bridge\Doctrine\Form\Type\EntityType;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\FormViewInterface;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\OptionsResolver\Options;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class MyCustomType extends AbstractType
{
  public function getParent()
  {
    // By calling get parent here your custom type will
    // automatically inherit all the properties/functionality 
    // of the type you extend
    return 'radio';
  }
} 
```

然后，您可以为您的类型制作自定义小部件。如果我是你，我会阅读[食谱条目](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html)，因为它很好地解释了这个过程。您可以查看表单的默认 Twig 小部件，以了解如何编写自己的小部件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:29:25.937

我今天不得不在选择文件按钮前添加一个缩略图来上传图片。我最终这样做了。抱歉，我没有时间为您的案例创建一个完整的示例。

*   我只是访问父级以使实体传递给 vich_uploadable_asset() 助手。

/src/AcmeBundle/Form/Type/AcmeFormType.php

```
<?php
    namespace Acme\AcmeBundle\Form\Type;

    use Symfony\Component\Form\AbstractType;
    use Symfony\Component\Form\FormBuilderInterface;

    class AcmeFormType extends AbstractType
    {
        public function buildForm(FormBuilderInterface $builder, array $options)
        {
            parent::buildForm($builder, $options);

            $builder
                ->add('icon', 'vich_uploadable')
            ... 
```

配置.yml

```
twig:
    form:
        resources:
            - 'AcmeBundle:Form:fields.html.twig'

services:
    acme.type.vich_uploadable:
        class: Acme\AcmeBundle\Form\Type\VichUploadableFieldType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type, alias: vich_uploadable } 
```

/src/Acme/AcmeBundle/Form/fields.html.twig

```
{% block vich_uploadable_widget %}
{% spaceless %}
    {% if attribute(form.parent.vars.value, form.name) is not empty %}
    <img src="{{ vich_uploader_asset(form.parent.vars.value, form.name) | imagine_filter('thumb_square') }}" />
    {% endif %}
    {{ form_widget(form) }} {# If you're extending the radio button, it would show here #}
{% endspaceless %}
{% endblock %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T19:05:45.777

这就是我最终要做的。它需要大量的试验和错误，并深入研究 EntityType 类层次结构并了解 Form 类型是如何真正工作的。最难的部分是查看源代码并弄清楚如何从 PHP 类到 Twig 模板（哪些变量可用）。

这就是我所做的。这不是一个完美的解决方案（感觉有点老套），但它适用于我的目的。这个想法是将底层实体暴露给我的视图，以便我可以获得它的属性。

最大的问题是`file`保存文件路径的属性在视图中是硬编码的。无论如何，我发布了整个解决方案，因为它可能对其他人有帮助。如果有人能找到更好的解决方案，我也愿意批评。

*（省略命名空间）*

## 扩展实体类型

```
<?php
class ExtendedEntityType extends EntityType
{
    public function getParent()
    {
        return 'extended_choice';
    }

    public function getName()
    {
        return 'extended_entity';
    }
} 
```

## 扩展选择类型（只需更改 addSubForms 但它是私有的）

```
<?php
class ExtendedChoiceType extends ChoiceType
{

    /**
     * {@inheritdoc}
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        if (!$options['choice_list'] && !is_array($options['choices']) && !$options['choices'] instanceof \Traversable) {
            throw new FormException('Either the option "choices" or "choice_list" must be set.');
        }

        if ($options['expanded']) {
            $this->addSubForms($builder, $options['choice_list']->getPreferredViews(), $options);
            $this->addSubForms($builder, $options['choice_list']->getRemainingViews(), $options);

            if ($options['multiple']) {
                $builder
                    ->addViewTransformer(new ChoicesToBooleanArrayTransformer($options['choice_list']))
                    ->addEventSubscriber(new FixCheckboxInputListener($options['choice_list']), 10)
                ;
            } else {
                $builder
                    ->addViewTransformer(new ChoiceToBooleanArrayTransformer($options['choice_list']))
                    ->addEventSubscriber(new FixRadioInputListener($options['choice_list']), 10)
                ;
            }
        } else {
            if ($options['multiple']) {
                $builder->addViewTransformer(new ChoicesToValuesTransformer($options['choice_list']));
            } else {
                $builder->addViewTransformer(new ChoiceToValueTransformer($options['choice_list']));
            }
        }

        if ($options['multiple'] && $options['by_reference']) {
            // Make sure the collection created during the client->norm
            // transformation is merged back into the original collection
            $builder->addEventSubscriber(new MergeCollectionListener(true, true));
        }
    }

    /**
     * {@inheritdoc}
     */
    public function getParent()
    {
        return 'choice';
    }

    /**
     * {@inheritdoc}
     */
    public function getName()
    {
        return 'extended_choice';
    }

    /**
     * Adds the sub fields for an expanded choice field.
     *
     * @param FormBuilderInterface $builder     The form builder.
     * @param array                $choiceViews The choice view objects.
     * @param array                $options     The build options.
     */
    private function addSubForms(FormBuilderInterface $builder, array $choiceViews, array $options)
    {
        foreach ($choiceViews as $i => $choiceView) {
            if (is_array($choiceView)) {
                // Flatten groups
                $this->addSubForms($builder, $choiceView, $options);
            } else {
                $choiceOpts = array(
                    'value' => $choiceView->value,
                    // Expose more data
                    'label' => array(
                        'data' => $choiceView->data,
                        'label' => $choiceView->label,
                    ),
                    'translation_domain' => $options['translation_domain'],
                );

                if ($options['multiple']) {
                    $choiceType = 'checkbox';
                    // The user can check 0 or more checkboxes. If required
                    // is true, he is required to check all of them.
                    $choiceOpts['required'] = false;
                } else {
                    $choiceType = 'radio';
                }

                $builder->add((string) $i, $choiceType, $choiceOpts);
            }
        }
    }
} 
```

## 服务

```
 <service id="crolts_main.type.extended_choice" class="My\MainBundle\Form\Type\ExtendedChoiceType">
        <tag name="form.type" alias="extended_choice" />
    </service>

    <service id="crolts_main.type.extended_entity" class="My\MainBundle\Form\Type\ExtendedEntityType">
        <tag name="form.type" alias="extended_entity" />
        <argument type="service" id="doctrine" />
    </service> 
```

## form_layout.html.twig

（这是基于 MopaBootStrapBundle 但想法是一样的。不同之处在于 MopaBootstrap 包裹`<label>`了`<radio>`）

```
{% block extended_choice_widget %}
{% spaceless %}
    {% if expanded %}
        {{ block('extended_choice_widget_expanded') }}
    {% else %}
        {# not being used, just default #}
        {{ block('choice_widget_collapsed') }}
    {% endif %}
{% endspaceless %}
{% endblock extended_choice_widget %}

{% block extended_choice_widget_expanded %}
{% spaceless %}
    <div {{ block('widget_container_attributes') }}>
    {% for child in form %}
        <label class="{{ (multiple ? 'checkbox' : 'radio') ~ (widget_type ? ' ' ~ widget_type : '') ~ (inline is defined and inline ? ' inline' : '') }}">
            {{ form_widget(child, {'attr': {'class': attr.widget_class|default('')}}) }}
            {% if child.vars.label.data.file is defined %}
                <img src="{{ vich_uploader_asset(child.vars.label.data, 'file')}}" alt="">
            {% endif %}
            {{ child.vars.label.label|trans({}, translation_domain) }}
        </label>
    {% endfor %}
    </div>
{% endspaceless %}
{% endblock extended_choice_widget_expanded %} 
```

## 用法

```
<?php 
$builder->add('icon', 'extended_entity', array(
        'class' => 'MyMainBundle:MenuIcon',
        'property' => 'name', // this is still used in label.label
        'expanded' => true,
        'multiple' => false
    )); 
```

# netty - CookieDecoder 中允许的字符

> ID：11213704
> 
> 赞同：0
> 
> 时间：2012-06-26T18:27:08.947
> 
> 标签：netty

我的公司使用了许多在 cookie 值中包含 '=' 和 ',' 的旧 cookie。一个例子是： A=v=1&lg=en-US,it-IT,it&intl=it&np=1;T=z=E 。现在不可能摆脱这些 cookie，我们需要 Netty 在验证这些 cookie 时不要抛出 IllegalArgumentException。有什么建议吗？是否可以向 CookieDecoder 提交补丁，也许可以读取一些 env 变量，从而相应地选择正确的正则表达式？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:40:06.213

Netty 3.5.1.Final 解码你提到的cookie没有问题：

```
@Test
public void testDecodingValuesWithCommasAndEquals() {
    String src = "A=v=1&lg=en-US,it-IT,it&intl=it&np=1;T=z=E";
    Set<Cookie> cookies = new CookieDecoder().decode(src);
    Iterator<Cookie> i = cookies.iterator();
    Cookie c = i.next();
    assertEquals("A", c.getName());
    assertEquals("v=1&lg=en-US,it-IT,it&intl=it&np=1", c.getValue());
    c = i.next();
    assertEquals("T", c.getName());
    assertEquals("z=E", c.getValue());
} 
```

# border - 在顶部复制底部的盒子阴影

> ID：11213705
> 
> 赞同：0
> 
> 时间：2012-06-26T18:27:12.117
> 
> 标签：border, wrapper, css

我在让 CSS3 box-shadow 看起来正确时遇到问题。

我目前在我的内容包装器上有一个盒子阴影，如下所示：

边框：1px 实心#D5D5D5；
边框半径：3px 3px 3px 3px；
盒子阴影：0 0 2px #DADADA，0 -3px 0 #E6E6E6 插图；

我希望盒子阴影出现在内容框的顶部，就像它出现在盒子底部一样。我似乎无法做到正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:38:11.690

不确定我是否清楚您要做什么，但是如果第二个在底部正常工作，如何为顶部添加第三个阴影：

```
box-shadow: 0 0 2px #000, 0 -3px 0 #E6E6E6 inset, 0 3px 0 #E6E6E6 inset; 
```

或者用第三个阴影替换第二个阴影，如果你想在顶部而不是底部插入阴影：

```
box-shadow: 0 0 2px #000, 0 3px 0 #E6E6E6 inset; 
```

# mysql - 如何在 Derby 中删除此表？

> ID：11213709
> 
> 赞同：0
> 
> 时间：2012-06-26T18:27:21.207
> 
> 标签：mysql, derby, myeclipse

我有一张名为 Rating 的表。它通过外键链接到另一个名为 Movie 的表，我删除了该表。我使用了这个查询：“drop table movie_site.rating;”。它给了我这个错误：操作 'DROP CONSTRAINT 不能在对象 ##### 上执行，因为 CONSTRAINT 'RATING_ID' 依赖于该对象。这是在 myEclipse 中。谢谢。

# excel - Excel VBA 传入二维数组的数组

> ID：11213712
> 
> 赞同：1
> 
> 时间：2012-06-26T18:27:27.877
> 
> 标签：excel, argument-passing, multidimensional-array, vba

我正在使用 Excel VBA 中的一组二维数组。我有一个功能...

```
Public Function constructStack(vbr() As Variant, hr As Integer) As stack 
```

stack 是我创建的一个类。我有另一个函数，我从中调用constructStack。这是电话：

```
Set stacks(i) = stack(i).constructStack(vbr(i), i) 
```

vbr 恰好是一个二维数组。看到 vbr(i) 将引用类型变体的单个二维数组，我很困惑为什么我得到“类型不匹配：预期的数组或用户定义的类型”编译错误。

就好像编译器没有意识到 vbr() 将被 24 个二维数组填充，这就是它给我编译错误的原因。这是我如何调暗 vbr：

```
Dim vbr(1 To 24) As Variant 
```

在声明 vbr 之后，我最终运行了这个 for 循环，它为 vbr 的每个元素分配了一个 2D 数组......

```
vb = GetVBRSorted
For j = 1 To 24
    For i = 2 To 2000
        If (vb(i, 1)(j) <> "") Then
          lastFilleds(j) = i
        End If
    Next
Next
For j = 1 To 24
    ReDim vbrTemp(1 To lastFilleds(j) - 1, 1 To 5)
    For i = 2 To lastFilleds(j)
        For k = 1 To 5
            vbrTemp(i - 1, k) = vb(i, k)(j)
        Next
    Next
    vbr(j) = vbrTemp
Next 
```

GetVBRSorted 返回与 vbr 完全相同的类型 - 二维数组的数组。如果有人对此问题有任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:56:46.290

您的调用`.constructStack(vbr(i), i)`是传递数组的单个元素。如果你想传递整个数组，那么你会使用`.constructStack(vbr, i)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:57:59.737

因为每个人`vbr(i)`都是一个`Variant`，所以这是您必须声明为参数类型的内容。没有神奇的编译时嗅探来实现`Variant`包含数组。

采用

```
Public Function constructStack(vbr As Variant, hr As Integer) As stack 
```

另请参阅[如何在 VBA 过程中使用可选数组参数？](https://stackoverflow.com/questions/2265349/how-can-i-use-an-optional-array-argument-in-a-vba-procedure).

# xml - 电子表格标记语言

> ID：11213713
> 
> 赞同：1
> 
> 时间：2012-06-26T18:27:30.400
> 
> 标签：xml, xls, xlsx, odf

是否有**电子表格标记语言**的完整参考或文档？哪个用于在 MS-Excel、Openoffice Calc 等中创建类似于 XML 的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:31:29.967

Excel2007 及更高版本用于 .xlsx 文件的[OfficeOpenXML 格式在 ECMA 站点上有详细说明。](http://www.ecma-international.org/news/TC45_current_work/TC45_available_docs.htm)

自 Excel2003 由 Microsoft 发布以来，SpreadsheetML 格式作为一个选项提供[。](http://msdn.microsoft.com/en-us/library/aa140066%28office.10%29.aspx)

OpenOffice Calc (OASIS) 使用的[开放文档格式](https://www.oasis-open.org/standards)

作为参考，旧的 MS BIFF 格式（Excel 的 .xls）由 Microsoft[在线发布](http://msdn.microsoft.com/en-us/library/cc313118%28v=office.12%29)

# xamarin.ios - 如何在不使用 RootElement 的情况下在元素之间的 Monotouch Dialog 中插入分隔符

> ID：11213714
> 
> 赞同：0
> 
> 时间：2012-06-26T18:27:33.397
> 
> 标签：xamarin.ios, monotouch.dialog

在 monotuch 对话框 github 页面上，它显示了由 monotouch 对话框示例上的空格分隔的部分。当我尝试使用最新的 Monotouch Dialog 执行此操作时，它说该部分正在用作元素。

有人可以告诉我我做错了什么或将分隔符添加到单点触控对话框屏幕的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:35:21.567

实际上，我找到了解决方案。Monotouch Dialog 用空格分隔部分的解决方案是为一个部分提供一个空的“”页眉和页脚。不直观，但它有效。谢谢

# algorithm - 有没有什么好的技术可以保持几乎排序的数据接近排序？

> ID：11213716
> 
> 赞同：3
> 
> 时间：2012-06-26T18:27:38.047
> 
> 标签：algorithm, sorting, opengl, data-structures, 3d

## 简洁版本：

尽管值略有变化，但我正在寻找一种技术，以随着时间的推移将几乎排序的数据保持在几乎排序的顺序中。

## 这是场景：

在 3D 图形的世界中，在绘制之前从前到后对对象进行排序通常是有益的。随着您的场景发生变化或您对场景的看法发生变化，这些数据可能需要重新排序，但是它通常会非常接近排序顺序（即，它不会在帧之间发生太大变化）。**数据是否完全**按排序顺序也不重要。将发生的最糟糕的事情是多边形将被渲染然后完全隐藏。这是一个小的性能打击，但不是世界末日。

考虑到这一点，是否可以提前对数据进行一次排序，然后每帧对数据应用一次最小**补丁**以确保数据**大部分**保持排序？在这种情况下，如果大多数对象按升序排列，则认为数据大部分已排序。也就是说，距离正确位置 10 步的1 个对象比距离正确位置 1 步的 10 个对象**要好得多**（好 10 倍）。

还值得注意的是，数据可以继续半定期修补，因为数据通常每秒渲染 30 次（左右）。只要计算是有效的，它就可以随着时间的推移继续进行，直到更改停止并且列表完全排序。

## 现有理念：

我对这个问题的下意识反应是：

1.  `n log n`在加载数据时对数据进行排序，并对大的更改（我可以很容易地跟踪）进行排序。

2.  当数据开始缓慢变化时（例如，当场景旋转时），对数据应用某种类型的单个（线性）传递以向后交换邻居并尝试保持排序顺序（我认为这基本上是 shell 排序 - 也许有用于单次通过的更好算法）。

3.  继续对每一帧进行一次部分排序，直到更改停止并且数据完全排序

4.  返回第 2 步并等待更多更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T19:39:03.710

如果输入大部分已排序，则有多种排序在 O(n) 时间内运行，如果数据未排序，则在 O(n log n) 时间内运行。听起来你可以很容易地使用它。Timsort 就是这样一种排序，我相信它现在是 python 和 java 中的默认排序。Smoothsort 是另一种很容易自己实现的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T18:43:58.730

根据您的描述，听起来排序顺序会发生变化，而无需您更改数据本身。例如，您更改了相机，因此排序顺序应该更改，即使您没有修改任何多边形。

如果是这样，您无法在发生排序顺序更改时直接检测到它们。如果可以的话，我会为多边形列表创建存储桶，并在该存储桶中的“足够”多边形被触及时使用存储桶。

但我敢打赌你的系统不会那样工作。排序由视口确定。在这种情况下，排序前面的多边形比最后的多边形重要得多。

所以我会将多边形列表分成五分之一或类似的东西。从前到后，所以前五分之一是最靠近相机的部分。我会对每一帧的第一段进行完全排序。我将第二段划分为子段 - 再次说 5 - 并在每一帧对每个子段进行排序，这样每 5 帧第二个第五个被完全排序。将第三到第五段分割成 15 个子段，每 5 帧执行一次，这样其余的每 75 帧就完全排序。在 60 fps 时，您将每秒完全使用一次以上的显示列表。

优先考虑列表前面的好处是 1\. 前面的多边形在屏幕上往往会更大，并且会更频繁地通过深度测试。列表末尾的错误订单通常并不重要。2\. 列表的前面更容易因相机变化而发生排序变化。

还选择了那些有一点重叠的段范围，以便多边形可以以两种方式迁移到正确的段。

@OP：再想一想。您可能更关心排序成本保持有限 - 而不是场景复杂性爆炸。特别是因为一个非常复杂的场景应该 - 令人惊讶的是 - 不太容易受到不良排序的影响（因为通常多边形会变小）。

您可以定义您愿意每帧执行的固定数量的排序。将预算的 50% 用于尽可能多的列表前面的区域，将预算的 25% 用于对下一个区域进行排序，将 25% 的预算用于其余区域。

假设您预算每帧排序 1000 个多边形，并且场景中有 10000 个多边形。每帧对前 500 个多边形进行排序。为下一个区域每十帧排序 250 个多边形。因此，第 1 帧为 501-750，第 2 帧为 751-1000，等等。然后将列表的其余部分划分为 250 个帧段，并根据您需要的帧数对它们进行循环排序。

这使排序成本保持不变，场景变得越来越复杂，并且很容易调整，您只需将排序预算调整到您能承受的范围内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T23:08:54.563

我将在这里提出一个借鉴其他许多人的解决方案。当然，我们从初始化时的完整对象开始。

我会做的是总是对每一帧的对象执行 10 次线性时间运行（如果你发现你的对象已经完全排序，则提前终止）。例如，每次运行都可以是一次[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)，在整个数组上具有[shell 排序](http://en.wikipedia.org/wiki/Shellsort)式间隙：对于从 0 到 n-gap-1 的所有 i，比较 A[i] 和 A[i+gap]，并且如果它们没有排序，请交换它们。您可以使用固定的间隙序列，或者更好的是，让它在帧之间变化；无论哪种方式，如果您在对象不变的情况下制作了足够多的帧，那么您将拥有一个完全排序的序列。您甚至可以混合不同类型的子算法来运行，只要每次迭代都能提高“排序性”。

您可以添加 Rafael Baptista 的想法，即通过在前段多跑一次，或者选择将前半部分的间隙除以 2，或类似的方式，轻松地优先考虑场景的前部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T19:28:56.417

它并没有像您想象的那样巧妙地解决问题，因为您所要做的就是将相机旋转 90 度，并且排序的基础完全在不同的轴上。（X和Y轴是独立的，例如——向下看X轴会导致排序顺序不依赖X轴，向下看Y轴会导致排序顺序不依赖Y轴。）即使是 5 度的转弯也可能导致远处的“关闭”（就 Z 顺序而言）事物突然“远离”。

老实说 - 为对象生成绘制调用通常比对它们进行排序要花费更多的时间，特别是如果您有针对您的场景优化的排序算法并且您的游戏具有现代视觉复杂性。

排序实际上可以是 O(n)，尤其是对于基于直方图的算法或基数风格的算法。（是的，基数排序适用于整数，所以你必须将你的世界坐标缩放为整数，但通常这已经足够了，除非你有一个巨大的世界。）

话虽这么说，由于您已经对绘制的所有内容进行了 O(n) 操作，因此每帧都不会成为一个大问题，尤其是在高级和低级优化的情况下。

解决此问题的另一种常见方法是使用[场景图](http://en.wikipedia.org/wiki/Scene_graph)，但出于您的目的，它最终基本上是每帧重新排序。但是，您可以将平截头体剔除、阴影剔除和细节级别计算构建到场景图遍历中。

如果您正在寻找近似值，而不是进行 z 距离排序，请执行真正的距离排序并更频繁地更新排序顺序以用于靠近的对象，而不是更频繁地用于更远的对象（取决于相机行进的距离）。这可以起作用，因为如果您离对象较远，移动不会导致观察者的角度经常改变，这反过来意味着旧的排序数据更有可能是有效的。我不喜欢这个，因为我喜欢允许我的游戏在地图上传送而没有任何问题的算法。（请注意，从磁盘流式传输资产成为传送的真正问题。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T20:12:28.850

[Shell 排序](http://en.wikipedia.org/wiki/Shellsort)适用于唯一值很少的列表和一些“需要短代码且不使用调用堆栈”的场景。

在您的情况下，您需要一种称为[Adaptive sort](http://en.wikipedia.org/wiki/Adaptive_sort)的东西，这意味着算法“利用其输入中的现有顺序”。

如果你的空间很紧，你可以只使用直插排序，它是自适应的和就地的。

否则，您可以按照@RunningWild 的建议尝试 Timsort 和 Smoothsort，它们都是自适应排序算法。

# php - 在本地机器上使用 S3 类遇到 cURL 错误，但在主机上运行良好

> ID：11213719
> 
> 赞同：2
> 
> 时间：2012-06-26T18:27:45.460
> 
> 标签：php, apache, curl, amazon-s3, localhost

我对此完全迷失了，我不确定是什么导致了这个错误：

致命错误：未捕获的异常 'cURL_Exception' 带有消息'cURL 资源：资源 id #17; cURL 错误：SSL 证书问题，验证 CA 证书是否正常。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败（cURL 错误代码 60）。见[http://curl.haxx.se/libcurl/c/libcurl-errors.html](http://curl.haxx.se/libcurl/c/libcurl-errors.html)有关错误代码的说明。在 C:\Inetpub\wwwroot\htdocs\TestSite\src_ama\lib\requestcore\requestcore.class.php:824 堆栈跟踪：#0 C:\Inetpub\wwwroot\htdocs\TestSite\src_ama\services\s3.class.php (903): RequestCore->send_request() #1 C:\Inetpub\wwwroot\htdocs\TestSite\src_ama\services\s3.class.php(1625): AmazonS3->authenticate('mybucket', Array) #2 C :\Inetpub\wwwroot\htdocs\TestSite\class_SysFunc.php(794): AmazonS3->list_objects('mybucket', Array) #3 C:\Inetpub\wwwroot\htdocs\TestSite\sub_dashOverview.php(26): SysFunc- >getCartonSize('1.41c388ab584f1...') #4 {main} 在第 824 行的 C:\Inetpub\wwwroot\htdocs\TestSite\src_ama\lib\requestcore\requestcore.class.php 中抛出

我在我的网站中进行此设置的方式是，我有一个用于连接到 S3 的类，它在我的主机帐户上运行良好。

**类.php**

```
 if(!class_exists('SysFunc')){
        class SysFunc{
            var $s3;
            var $bucket = 'mybucket';

            function __construct() {
                require_once ('amazon/sdk.class.php');
                $this->s3 = new AmazonS3();
            }

            ...More functions
        }
    } 
```

我想知道它是否与我的 php.ini 文件或可能与 Apache 配置文件有关。

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T18:35:32.210

您的本地 CA 文件可能已损坏。如果您有权访问实际的 curl 句柄，请尝试以下操作：curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);。

编辑：在 AWS 中，尝试 $s3->disable_ssl_verification();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:41:09.357

打开 Amazon SDK 的配置文件

这是您填写访问密钥和秘密密钥的地方，它被称为 config.inc.php

靠近底部的是一个选项'certificate_authority'，默认情况下设置为false。只需将其设置为true，你就可以开始了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:05:55.733

我遇到了同样的问题，当我更改上传文件的本地文件夹的权限时，这一切都神奇地起作用了。将权限更改为 777。

# c# - 如何在正则表达式中使用带有“或”字符的非捕获组

> ID：11213727
> 
> 赞同：0
> 
> 时间：2012-06-26T18:28:20.310
> 
> 标签：c#, regex, parsing

所以基本上我有这个巨大的正则表达式模式，它中间的某个地方是表达式`(?:\s(\d\d\d)|(\d\d\d\d))`。在解析的这一部分，我想捕获空格后面的 3 位数字或 4 位数字，但我不希望通过在整个事物周围使用括号来捕获（不会`?:`使某些东西无法捕获） ）。我必须使用括号，以便“或”逻辑起作用（我认为）。

因此，潜在的示例输入将类似于...

*   input1= Giantexpression 后面还有 123 个字符
*   输入2=巨人表达式1234blahblahblah

我试过`(?:\s(\d\d\d)|(\d\d\d\d))`了，至少在我有 4 位数字的情况下，它提供了额外的捕获。那么我这样做是对的还是我在某个地方搞砸了？

编辑：

更详细地说……这是我正在使用的当前正则表达式。

```
pattern = @".?(\d{1,2})\s*(\w{2}).?.?.?(?:\s(\d\d\d)|(\d\d\d\d)).*" 
```

一开始我需要做一些解析。我认为肖恩约翰逊的答案仍然有效，因为我不需要使用“或”。但是有没有办法使用“或”来做到这一点？我认为最终我会需要这种能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:30:27.743

这应该有效：

```
(?:\s(\d{3,4})) 
```

如果您没有对该子模式执行任何逻辑，那么如果您只想捕获数字，那么您甚至不需要围绕它的括号。以下模式：

```
\s(\d{3,4}) 
```

将捕获紧跟在空格字符之后的三或四位数字。

# computer-science - 如何模拟非确定性有限传感器？

> ID：11213728
> 
> 赞同：4
> 
> 时间：2012-06-26T18:28:21.587
> 
> 标签：computer-science, state-machine, automata-theory, transducer

只需跟踪自动机所处的状态以及它在输入字符串中的距离，就可以轻松地在输入字符串上模拟非确定性自动机。但是如何模拟非确定性转换器（当然，转换器可以将输入符号转换为输出符号，并给出一个字符串作为输出，而不仅仅是一个布尔值）？这似乎更复杂，因为我们需要以某种方式跟踪输出字符串，由于不确定性，输出字符串可能很多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-25T08:05:01.980

首先，一些理论。以下是不同的代数结构：

*   发电机（过渡系统）

*   接受者（自动机）

*   传感器（机器）

括号中的术语在文献中很常见，可惜它们经常被错误地使用。众所周知，这些代数结构彼此非常相似，并且可以通过许多小的变化从一个变为另一个或混合。但这不应分散他们根本不同的事实：

*   生成器是一种语言的*建设性*表示，即一组（有限或无限）单词。您不确定地遍历生成器，并在这样做时生成该语言的所有单词。

*   接受器同样是用于定义一组单词（语言）的构造，但每个都代表所有可能单词（有限或无限）的*指示函数。*因此，他们将每个单词映射到一个布尔值（可以适当地将其扩展到有限或无限的输出单词，以尝试与传感器进行比较——尽管存在明显的代数差异）。

*   一个转换器表示一个*函数，将每个可接受的有限输入字映射到一个有限输出字*。

在有限语言的上下文中，接受者和转换器之间的区别变得不那么明显，因为接受者可以接受或不接受任何有限词，而不管其长度如何，因此它为每个这样的词生成一个输出词。通过连接来自接受器的布尔输出，可以为每个有限输入字创建一个有限输出字（即，通过连接来自给定输入字的每个前缀的输出）。这种试图弥合这两个概念的尝试虽然在机械上是正确的，但仍然扭曲了所涉及的概念。

在无限字语言的上下文中，区别更加清晰。[无限字自动机](https://en.wikipedia.org/wiki/%CE%A9-automaton) 不能*为*给定（无限）输入字的有限前缀产生输出。这种限制是在整个（无限）词上定义无限词接受的结果。因此，接受者将每个输入词映射到一个布尔值，或者如果这种观点是首选的，则输出词。相反，转换器（机器）将任何输入字的每个有限前缀映射到等长的有限输出字。出于这个原因，它们被称为*顺序*机，因为它们是逐步反应的。

有两种不同类型的传感器：

*   [磨粉机](https://archive.org/details/bstj34-5-1045)
*   [摩尔机](https://web.archive.org/web/20120216141113/http://people.mokk.bme.hu/%7Ekornai/termeszetes/moore_1956.pdf)

摩尔机可以用 Mealy 机来表示。并不是每台 Mealy 机器都可以用 Moore 机器来表示。文献在定义和比较这两种类型的传感器时通常是错误的，请参阅原始出版物以获得正确的定义。

所以这两个定义都是确定性的。这种对确定性的限制是有原因的：传感器用于控制系统，所以我们想确定性地知道下一个要应用的控制动作应该是什么。这导致确定性传感器成为文献中的标准。

然而，非确定性转换器也可以是有用的，例如，作为多种策略的紧凑表示。然而，当它们被执行时，只遵循一条路径并产生一个输出词是有意义的，而不是同时产生多个（就像在它们执行期间产生的非确定性接受器的副本的情况一样）。

因此很明显，换能器的非确定性模拟不符合其预期用途。它代表了一组替代策略（如果在每场比赛中没有以固定方式确定，也可以混合使用）。

因此，您确实必须创建一个（不断扩展的）可能输出单词的树，这些单词会迅速爆炸。这棵树本质上是生成器（转换系统）的展开，您可以通过剥离传感器的输入注释来获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:06:44.903

基本上，您对 NFA 执行相同操作，但这次不是返回 true 或 false，而是将输出添加到输出集。这是一些伪代码：

```
function rec(in, current_state, pos, out)
 if(current_state.isFinal && pos == in.length) out_set += out

 for(t <- lambda transition going out from current_state)
  rec(in, t.destination, pos, out + t.output_symbol)

 for(t <- transition going out from current_state for symbol in(pos)
  rec(in, t.destination, pos+1, out + t.output_symbol) 
```

# php - 如何最好地修改带有表前缀的 sql 查询

> ID：11213729
> 
> 赞同：0
> 
> 时间：2012-06-26T18:28:23.223
> 
> 标签：php, mysql, prefix

我正在创建一个具有安装程序的新 CMS。

我允许表名以自定义字符串为前缀。

用前缀表名修改 sql 的推荐方法是什么？

我是否必须将 DB_PREFIX 添加到每个查询中，或者以后有什么方法可以通过修改 sql 在我的数据库类中完成？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:55:23.827

一种技术是使用用大括号括起来的表编写所有 SQL 查询，并使用将这些大括号替换为所需数据库前缀的函数。

不要编写标准的 SQL 查询，而是使用花括号来包含表名，例如：

```
//SQL query in your code
$query=prefixQuery("SELECT name FROM {customers} WHERE id=$id"); 
```

并定义简单的函数，将左 { 替换为前缀，并删除右 }：

```
define(DB_PREFIX,'myprefix_');

function prefixQuery($query)
{
   return str_replace('}','',str_replace('{',DB_PREFIX,$query));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:31:07.057

您可以为每个查询添加前缀，是的。

您还可以使用 str_replace 函数解析每个查询，如下所示：

```
str_replace('mytable', 'prefix_mytable', $Query); 
```

我会选择 1 号选项，减少负载。

提示：如果您创建一个新的 CMS，请提供一个 DB 类并自动添加前缀。

# c# - 在 STA 线程中使用对象后如何使用它？

> ID：11213730
> 
> 赞同：1
> 
> 时间：2012-06-26T18:28:36.880
> 
> 标签：c#, multithreading, visual-studio-2010, vsto, sta

我正在做一个带有 VSTO 的 Microsft PowerPoint 插件解决方案，它从硬件读取信息，硬件开发人员给了我他们的 SDK 来控制这个硬件，但我在尝试控制它时遇到了问题。

我有这个图书馆 `ARS`

有一堂课 `ARS.BaseConnection`

我有这个变量 `ARS.BaseConnection BaseConn;`

问题是当我创建一个类型的新对象时`BaseConnection`

```
BaseConn = new ARS.BaseConnection(); 
```

调试器没有显示任何异常，POWERPNT.exe 只是崩溃并停止。

我试图调试 POWERPNT，它说**访问冲突写入位置 0x00d20f78。**但我不是在编程 PowerPoint。

我发现SDK中的演示程序（实际工作）在main之前有一个[STAThread]，所以我认为它必须作为STA运行所以我创建了一个新线程：

```
 ARS.BaseConnection BaseConn;`

    public form1()
    {
        InitializeComponent();

        System.Threading.Thread thread = new System.Threading.Thread(createBase);
        thread.SetApartmentState(System.Threading.ApartmentState.STA);
        thread.Start();
        thread.Join();

        BaseConn.Open(); // There is the problem, when I'm trying to use open() BaseConn debuger says: COM object that has been separated from its underlying RCW cannot be used.
    }

    private void createBase()
    {
        BaseConn = new ARS.BaseConnection(); //If it runs in a STA tread doesn't crash.
    } 
```

我得到的**COM 对象已与其底层 RCW 分离，无法使用。**

我怎样才能使它起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:51:38.010

该对象只能从其创建线程访问。

如果您需要从另一个线程访问该对象，您可以使用[调度](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)程序切换到它的线程。

考虑在主线程上创建它（首先将主线程设置为 STA）。

# c# - 程序集中的类顺序

> ID：11213732
> 
> 赞同：4
> 
> 时间：2012-06-26T18:28:58.863
> 
> 标签：c#, class, compiler-construction, .net-assembly

什么决定了程序集中类的顺序？

而且..有没有办法改变它？

* * *

附加信息：您可以自己通过反射检查排序，也可以使用 ILDASM 之类的工具，禁用字母排序，然后您也将获得订单。

顺序似乎以一种奇怪的方式由编译器确定。

我已经尝试了一些事情......比如重命名类（顺序保持不变），还编辑 .csproj 文件以更改 .cs 文件的顺序。

我的主要关注点是 VS2008、C#、.net 3.5。

* * *

更新：我确实有一个订单很重要的场景（外部程序通过反射通过我的程序集） - 我需要特殊的订单。除此之外 - 你是完全正确的 - 顺序真的不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:32:01.303

我要在这里伸出我的脖子说这是一个**实现细节**，很可能由任何特定的编译器决定。

由于这是一个实现细节，您不应该或不必担心。当然，如果这真的很重要（不明白为什么），您总是可以编写自己的 IL。

[我将Eric 博客](http://blogs.msdn.com/b/ericlippert/archive/2012/05/31/past-performance-is-no-guarantee-of-future-results.aspx)中的以下引述留给您：

> 两次编译相同的 C# 程序是否保证产生相同的二进制输出？
> 
> 不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:31:12.477

> 什么决定了程序集中类的顺序？

编译器。

> 而且..有没有办法改变它？

直接写自己的IL。

* * *

话虽如此，程序集中类型的顺序实际上并不重要。您可以使用这些类型而不考虑它们的顺序。

# internet-explorer - 为什么这个页面在ie中会触发兼容模式？

> ID：11213734
> 
> 赞同：0
> 
> 时间：2012-06-26T18:29:17.517
> 
> 标签：internet-explorer, ie8-compatibility-mode

标记是有效的，我已经尝试了几个小时，但我仍然处于兼容模式，在 IE8 和 IE9 上。任何提示都会很棒。

[这是页面的链接](http://www.dmdcode.it/lavori/fabriziosmania/progetti.php)

PS我已经尝试添加

```
<meta http-equiv=“X-UA-Compatible” content=“IE=8” /> 
```

等等等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:23:38.783

经过其他一些测试，我发现有一个 CSS 属性触发了兼容性视图。正好是最大宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:30:59.637

我的 IE9 处于*IE9 标准*模式。检查您是否已关闭*兼容性视图*。当您手动单击它时，即使重新启动，IE 也会记住这一点。

您必须声明`content="IE=9"`以强制*IE9 标准*模式。

# javascript - 你如何提取与某些模式不匹配的数字？

> ID：11213738
> 
> 赞同：2
> 
> 时间：2012-06-26T18:29:32.600
> 
> 标签：javascript, regex

我需要提取长度超过 3 位的数字，并且不包括给定范围内的年份（例如，在`19xx`和之间`2020`，其中`XX`始终位于字符串的末尾）。

我目前正在使用以下模式：

```
/(?!19[0-9]{2}|200[0-9]|201[0-9]|202[0-9])\d{3,}$/i 
```

*当我用"something 2012"*测试表达式时，我总是得到结果`012`。我需要得到`null`.

```
var s = "moose high performance drive belt 2012";
s.match(/(?!19[0-9]{2}|200[0-9]|201[0-9]|202[0-9])\d{3,}$/i); 
```

为什么这个表达式不正确地匹配日期的结尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:33:21.957

它丢弃`something` ，然后尝试匹配`2012`但由于您的否定前瞻断言而失败，然后尝试匹配`012`，它*成功*了，因为确实`012`与您的否定前瞻断言不匹配。

**更新：**

这并不漂亮，但它是一种解决方案。也许你可以简化它。

```
 (?!(?:19[0-9]{2}|200[0-9]|201[0-9]|202[0-9])\D)(?<!\d)\d{3,} 
```

在此处查看演示：[http](http://rubular.com/r/FLiehrUEp8) ://rubular.com/r/FLiehrUEp8 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:38:24.720

*对于**1900** - **2029 年**，它应该是正则表达式* `\b(\d+)\b(?<!(?:19\d{2}|20[0-2]\d))`

# .net - 什么时候适合使用不变文化？

> ID：11213740
> 
> 赞同：5
> 
> 时间：2012-06-26T18:29:37.270
> 
> 标签：.net, cultureinfo

使用不合适[`InvariantCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)吗？而且，如果使用，它会影响任何全局设置吗？

```
Dim hh As Decimal = 123456789.123456

' Is this an appropriate usage?
Dim ll As String = hh.ToString("N4", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T18:32:43.177

> 使用 CultureInfo.InvariantCulture 不好吗？

这完全取决于您要达到的目标。如果您尝试将值格式化为*机器*可读，那么这几乎总是正确的做法。如果您尝试为*users*格式化它们，那很可能是不合适的。

> 它会影响全球文化吗？

如果您担心的话，在方法调用中指定不变的文化不会改变当前线程的当前文化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T18:32:42.073

> 使用 CultureInfo.InvariantCulture 不好吗？

不，它的存在是有原因的。无论当前的系统文化是什么，它都允许您以一致、可靠的方式解析文本。

但是，它不应该（通常）用于解析*用户输入*，而是解析文本，您知道它是以 InvariantCulture 期望的相同方式编写的。

# mysql - mysql 如何处理现实世界中的海量连接？

> ID：11213743
> 
> 赞同：0
> 
> 时间：2012-06-26T18:29:43.567
> 
> 标签：mysql, connection, scalability

我已经研究了一段时间，但没有得到令人信服的答案。

在mysql教程中，默认连接数小于200，它说只要你有足够的资源，在Linux机器中max_connection_num可以设置为2000。我认为这个数字在实际部署中还远远不够，因为可能有数百万人同时访问您的网站。

有几篇文章讨论了如何优化以减少每个查询的时间成本。但是他们都没有告诉我这个问题是如何引起的。我认为必须有一些像队列这样的机制来防止同时发生大量连接。否则你最终会得到“太连接”的异常。

有人在这方面有一些专业知识吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:44:39.783

有几种选择。

1.  [连接池](http://en.wikipedia.org/wiki/Connection_pool)
2.  正如你提到的：排队。如果同时连接的客户端太多，那么应用层应该处理这个异常，让请求休眠一小段时间，然后再试一次。在如此高流量的环境中，通常应该禁止持续超过几秒钟的请求。
3.  [通过复制](http://dev.mysql.com/doc/refman/5.5/en/replication.html)和/或[集群](http://www.mysql.com/products/cluster/features.html)实现负载平衡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:38:13.893

通常，您的应用程序应该重用已建立的连接。但是，您选择用于实现应用程序的语言会带来一些限制。如果您使用 Java 或 .Net，您可以拥有连接池。对于 PHP，情况并非如此，您可以查看 [此讨论](https://stackoverflow.com/q/39753/1456500)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:39:30.900

如果超过 max_connection_num，则会出现连接过多错误。但是，如果您的 Web 服务器上确实同时有 100 万用户，那么无论如何您都无法使用一台服务器来处理，100 万并发连接确实需要一个非常大的农场来处理。

但是，您的数据库的客户端是一个 webapp，该 webapp 通常通过称为连接池的抽象连接到数据库，只要所有数据库连接都通过相同的[连接池](http://en.wikipedia.org/wiki/Connection_pool)，它就会限制客户端与数据库的连接数水池。

# jquery-ui - JQuery Multiple datepickers from and to booking form

> ID：11213751
> 
> 赞同：1
> 
> 时间：2012-06-26T18:30:13.380
> 
> 标签：jquery-ui, jquery-ui-datepicker

嗨，我从这个页面找到了以下代码[JQuery UI DatePicker 使用 2 个日期字段试图获取日期差异](https://stackoverflow.com/questions/1263482/jquery-ui-datepicker-using-2-date-fields-trying-to-get-date-difference)

但是，我对 datepicker ui 的了解不足以阻止第一个 datepicker 让您只从今天的日期中进行选择。我确定它很简单，但有人可以帮忙！

```
<script type="text/javascript">
    var DatePicked = function() {
            var departure = $("#CheckIn");
            var arrival = $("#CheckOut");
            var nights = $("#Nights");

            var triggeringElement = $(this);

            var minArrivalDate = new Date();

            var departureDate = departure.datepicker("getDate");

            if (departureDate != null) {
                    minArrivalDate.setDate(departureDate.getDate() + 1);
            } else {
                    minArrivalDate.setDate(minArrivalDate.getDate() + 1);
            }
            arrival.datepicker('option', 'minDate', minArrivalDate);

            var arrivalDate = arrival.datepicker("getDate");

            if (departureDate != null && arrivalDate != null && triggeringElement.attr("id") != "Nights") {
                    var oneDay = 1000*60*60*24;
                    var difference = Math.ceil((arrivalDate.getTime() - departureDate.getTime()) / oneDay);
                    nights.val(difference);
            } else if (departureDate != null && triggeringElement.attr("id") == "Nights") {
                    var nightsEntered = parseInt(nights.val());
                    if (nightsEntered >= 1) {
                            var newArrivalDate = new Date();
                            newArrivalDate.setDate(departureDate.getDate() + nightsEntered);
                            arrival.datepicker("setDate", newArrivalDate);
                    } else {
                            alert("Nights must be greater than 1.");
                    }
            }
    }
    $(function() {
            $("#CheckIn, #CheckOut").datepicker({
                    onSelect: DatePicked
            });
            $("#Nights").change(DatePicked);
            DatePicked();
    });
</script> 
```

形式：

```
<form class="enquiry" action="assets/scripts/booking.php" method="get" name="Booking">
<div class="Widget_Form_Spacer">
<label for="CheckIn">Check-In</label>
<input id="CheckIn" name="CheckIn" type="text" class="tF bL" value="<?php echo date("m/d/Y"); ?>" />
</div>
<div class="Widget_Form_Spacer Right">
<label for="CheckOut">Check-Out</label>
<input id="CheckOut" name="CheckOut" type="text" class="tF bL" value="" />
</div>
<div class="Widget_Form_Spacer Short">
<label for="Nights">Nights</label>
<input id="Nights" name="Nights" type="text" class="tF nL" value="1" onclick="clickclear(this, '1')" onblur="clickrecall(this,'1')" />
</div>
<div class="Widget_Form_Spacer Short">
<label for="Adults">Adults</label>
<input name="Adults" type="text" class="tF nL" value="1" onclick="clickclear(this, '1')" onblur="clickrecall(this,'1')" />
</div>
<div class="Widget_Form_Spacer Long">
<input name="Check" type="submit" value="Check Availability" />
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:34:02.867

您可以使用[minDate](http://jqueryui.com/demos/datepicker/#option-minDate) jquery UI datepicker 选项：

```
$("#date").datepicker({ minDate: new Date() }); 
```

[现场演示](http://jsfiddle.net/yvZLt/)

# sitecore - 在 Sitecore 6 中获取图像 src 和 alt 属性？

> ID：11213760
> 
> 赞同：7
> 
> 时间：2012-06-26T18:30:38.640
> 
> 标签：sitecore

例如，我使用以下内容获取当前页面的标题；

```
Header = Sitecore.Context.Item["Header"] 
```

但是我将如何获取图像字段的 src url？

```
PictureSrc = Sitecore.Context.Item["MyImage"] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T18:35:35.137

您将希望了解如何利用 Sitecore.Resources.Media.MediaManager 获取媒体库项目的 URL。

在到达那里之前，从项目中获取字段并将其转换为 FileField。拥有 FileField 后，您就可以访问 MediaItem。

```
Item item = Sitecore.Context.Item;
Sitecore.Data.Fields.ImageField imgField = ((Sitecore.Data.Fields.ImageField)item.Fields["MyImage"]);

string url = Sitecore.Resources.Media.MediaManager.GetMediaUrl(imgField.MediaItem);
string altText = imgField.Alt; 
```

[链接到 Sitecore 媒体项目](https://stackoverflow.com/questions/11036843/link-to-sitecore-media-item)

# sql - 查询具有相同字段标题的查询 - MS Access

> ID：11213761
> 
> 赞同：0
> 
> 时间：2012-06-26T18:30:43.227
> 
> 标签：sql, ms-access, join

我有几个查询（20+），它们都返回以下三列：

```
Building | Room | Other 
```

所有这些都是文本字段。我想接受所有这些查询并将它们组合起来；所以我想看看查询整体返回了什么。

例如，如果我有一个查询`SELECT Building, Room, Other FROM tblOne WHERE Room=10`和`SELECT Building, Room, Other FROM tblOne WHERE Building=20`，我如何将这两者合二为一？显然，这是一个非常简单的示例，而我的实际查询要复杂得多，因此将它们写为 1 个查询是不可行的。

我希望上面的示例输出：

```
Building | Room | Other
```````````````````````
20       |  1   | Some Stuff
20       | 10   | Some More
5        | 10   | Some Other
15       | 10   | Some Extra
20       |  5   | Some Text 
```

我尝试过的所有方法都出现了“建筑物、房间和其他可能引用不止一张桌子”的错误（也就是它不想将它们组合在一个标题下）。解决此问题的 SQL 语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:31:50.120

```
 SELECT Building, Room, Other FROM tblOne WHERE Room=10 
  UNION ALL
  SELECT Building, Room, Other FROM tblOne WHERE Building=20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:36:12.730

像这样在 UNION ALL && UNION 的帮助下组合这两个查询

> 查询 1

```
SELECT Building, Room, Other FROM tblOne WHERE Room=10 
UNION ALL
SELECT Building, Room, Other FROM tblOne WHERE Building=20 
```

> 查询 2

```
SELECT Building, Room, Other FROM tblOne WHERE Room=10 
UNION
SELECT Building, Room, Other FROM tblOne WHERE Building=20 
```

注意

UNION 运算符用于组合两个或多个 SELECT 语句的结果集。

UNION 中的每个 SELECT 语句必须具有相同数量的列。这些列还必须具有相似的数据类型。此外，每个 SELECT 语句中的列的顺序必须相同。

默认情况下，UNION 运算符仅选择不同的值。要允许重复值，请使用 UNION ALL。

# java - 用于清理上传文件名的 Java 正则表达式

> ID：11213763
> 
> 赞同：2
> 
> 时间：2012-06-26T18:30:52.750
> 
> 标签：java, regex

我正在尝试清理包含上传文件名的字符串。我这样做是因为文件将从网上下载，另外，我想规范化名称。这是我到目前为止所拥有的：

```
private String pattern = "[^0-9_a-zA-Z\\(\\)\\%\\-\\.]";

//Class methods & stuff

private String sanitizeFileName(String badFileName) {
    StringBuffer cleanFileName = new StringBuffer();
    Pattern filePattern = Pattern.compile(pattern);
    Matcher fileMatcher = filePattern.matcher(badFileName);
    boolean match = fileMatcher.find();
    while(match) {
        fileMatcher.appendReplacement(cleanFileName, "");
        match = fileMatcher.find();
    }
    return cleanFileName.substring(0, cleanFileName.length() > 250 ? 250 : cleanFileName.length());         
} 
```

这工作正常，但由于一个奇怪的原因，文件的扩展名被删除了。即“p%Z_-...#!$()=¡¿&+.jpg”最终成为“p%Z_-...()”。

关于我应该如何调整我的正则表达式的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:39:25.313

您需要在循环结束时使用 Matcher#appendTail。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-28T09:35:34.807

一线解决方案：

```
return badFileName.replaceAll("[^0-9_a-zA-Z\\(\\)\\%\\-\\.]", ""); 
```

如果要将其限制为仅字母数字和空格：

```
return badFileName.replaceAll("[^a-zA-Z0-9 ]", ""); 
```

干杯:)

# css - 使用 wget 抓取整个 tumblr？

> ID：11213769
> 
> 赞同：1
> 
> 时间：2012-06-26T18:31:05.170
> 
> 标签：css, http, recursion, wget, tumblr

如果这违反任何规则等，我提前道歉。我正在尝试使用 wget 在本地克隆我的 tumblr 博客，效果很好，减去了一个问题。它完全克隆了页面，但我使用的主题中有一个无限滚动脚本，因此在用户向下滚动到最后一个帖子之前，不会加载其他帖子。这是一个问题，因为 wget 只会捕获第一页，仅此而已。

目前，我正在使用：*wget --random-wait -r -p -e robots=off -U mozilla http://.tumblr.com*

有什么方法可以单独使用 wget 完成这项任务吗？感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T03:01:28.743

您是否尝试过从 开始`/archive`？

在任何情况下，我发现以下内容对于获取具有主题但没有无限滚动的博客的完整副本很有用：

```
wget --user-agent="Mozilla/5.0 XXX" \
--recursive --level=0 --convert-links --backup-converted --page-requisites \
--domains="xkcd.tumblr.com,media.tumblr.com" --exclude-domains="." --span-hosts \
http://xkcd.tumblr.com/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:35:33.467

`wget`不会这样做，因为它不处理页面中的 javascript。你最好的选择是使用[tumblr API](http://www.tumblr.com/docs/en/api/v2)。它提供了一种抓取和发布博客数据的机制。

# ios - 使用 iOS 应用程序以编程方式杀死进程？（应用商店中的示例）

> ID：11213771
> 
> 赞同：0
> 
> 时间：2012-06-26T18:31:07.243
> 
> 标签：ios, memory, process

我对 iOS 沙盒如何实现这一点感到相当困惑，但 App Store 中似乎有一个应用程序可以做到这一点：[iPhone 4S 的双核系统活动监视器](http://itunes.apple.com/us/app/dual-core-system-activity/id490435730?mt=8)

根据[开发者网站](http://recessionapps.com/System2.html)，该应用程序可以：

> 停止应用程序：
> 使用停止应用程序按钮快速释放内存。点击按钮并多次关闭对话框以每次释放额外的内存。您实际上不需要双击主页按钮来终止应用程序。

我能够获得使用其 pid 运行的进程列表。我怎么能通过杀死进程或其他应用程序来“释放内存”？

注意：虽然我打算为 App Store 提交这个特定的项目，但如果这是你的专长，我仍然想知道这是如何在越狱手机上完成的。另外，我确信阅读本文的其他程序员也可以从这些知识中受益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:37:51.140

我认为这是一个骗局应用程序。如果您需要更多内存，iOS 有责任终止进程。

您可以阅读进程列表，然后虚拟地终止它们（从表视图或其他东西中删除它们），但实际上并不终止进程本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:37:40.040

也许它正在占用大量内存（仍低于阈值），以便 iOS 杀死其他正在运行的应用程序。而在释放内存后不久。

# java - Selenium，Java，PageObject 模式，层次结构破坏

> ID：11213775
> 
> 赞同：2
> 
> 时间：2012-06-26T18:31:12.690
> 
> 标签：java, inheritance, selenium-webdriver, aggregation, pageobjects

我正在使用页面对象模式对我的 Web 应用程序交互进行建模。应用程序中的大多数页面都有一些标准选项，如“登录”、“注销”、“主页”等。此外，它们都有受保护的 WebDriver 引用。

所以我创建了一个*所有*页面都会继承的超超类**——GrandpaClass**。这将只包含一个受保护的 WebDriver 引用和一个用于初始化驱动程序的构造函数。

*然后我创建了一个大多数*页面都会继承的超类**——PapaClass**。它继承了**GrandpaClass**并添加了我上面列出的标准菜单功能（登录等）

当相同的菜单操作可能导致显示不同的页面时，就会出现问题。例如，当您注销时，您可以转到登录页面，也可以返回错误页面。但是由于登录功能在**PapaClass**中，这个类必须返回*从他继承的*不同页面。这使得超类依赖于它的子类。

我正在考虑使用诸如*Strategy*之类的东西来分解常见的菜单功能。所以**PapaClass**不会维护功能，只会维护对**Menu**对象的引用。

这是一个好主意，还是有更优雅（或更简单）的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T01:49:17.503

我认为您的 Menu 对象是个好主意，但您不需要**PapaClass**。您可以让所有页面都从**GrandpaClass**继承，并在有共同元素的地方使用[Composition 。](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)通过继承，您说的是“带有菜单的页面”，这表明该页面应该只有一个菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:45:27.010

是的，我认为这没关系，如果您需要基于某些内容返回页面的不同策略。您对问题的描述往往使我相信您使问题过于复杂。

# backbone.js - Backbone.js 重新实例化集合不会更新相应的视图

> ID：11213776
> 
> 赞同：1
> 
> 时间：2012-06-26T18:31:13.863
> 
> 标签：backbone.js, backbone-views

这是我的模型视图和集合：

```
window.Report = Backbone.Model.extend({});
window.ReportCollection = Backbone.Collection.extend({
   model: Report,     

   initialize: function(properties){
       this.url = properties.url;
   }
});

window.ReportCollectionView = Backbone.View.extend({
     initialize: function(){                   
        this.collection.reset();
        this.render();            
    },

    render: function(){
        var self = this;

        this.collection.fetch({

            success: function(){
                    self.collection.each(function(model){
                    //pass model to subview  
                    });
                }
            }
        });    

    }
}); 
```

在代码的另一部分我使用实例化上述对象

```
 var reportCollection = new ReportCollection({url:someURL});
   var reportCollectionView = new ReportCollectionView({collection:reportCollection}); 
```

'someURL' 是一个基于 REST 的 URL，它返回 JSON 对象列表

到目前为止，一切看起来都不错。我想要实现的是：我必须能够通过更改 url 来刷新“reportCollection”，这应该会触发更新的“reportCollectionView”。感谢您的任何指点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:00:57.667

我想你可以在你的集合中添加一个方法来改变`url`并强制一个`fetch`：

```
window.ReportCollection = Backbone.Collection.extend({
    //...
    changeUrl: function(url) {
        this.url = url;
        this.fetch();
    }
}); 
```

然后绑定到`"reset"`您视图中的事件：

```
window.ReportCollectionView = Backbone.View.extend({
    initialize: function() {
        _.bindAll(this, 'render');
        this.collection.on('reset', this.render);
        this.collection.reset();
    },
    //...
}); 
```

然后，如果你这样做：

```
c = new ReportCollection(...);
v = new ReportCollectionView({ collection: c, ... }); 
```

您将获得渲染视图，然后您可以：

```
c.changeUrl(...); 
```

设置新的 URL，这将触发`render`对`v`.

# mongodb - Doctrine2 ODM QueryBuilder - 使用两个字段的总和更新字段

> ID：11213777
> 
> 赞同：0
> 
> 时间：2012-06-26T18:31:14.793
> 
> 标签：mongodb, doctrine-orm, query-builder, doctrine-odm

基本上尝试做同样的事情：

```
UPDATE table SET column3 = column1 + column2; 
```

在 Doctrine2 的 ODM QueryBuilder 中 - 如果没有 MapReduce，这样的事情可能吗？我有一个分片集合，所以我需要使用 QueryBuilder 来按我的复合分片键进行搜索。

简化示例：

```
$visit = $this->dm->createQueryBuilder('Visit')
   ->findAndUpdate()
   ->field('site')->equals( $site )
   ->field('timeStamp')->equals( $ts )
   ->field('_id')->equals( $id )
   ->update()
   ->field('column3')->set( 'column1 + column2' ); 
```

不幸的是，这将设置`column3`为字符串“column1 + column2”。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:47:34.603

不幸的是，这里也`$inc`没有`$set`帮助，因为他们期望文字值。我也不认为[findAndModify](http://www.mongodb.org/display/DOCS/findAndModify+Command)会有所帮助，因为它使用与`update()`.

我也不认为 map/reduce 是合适的，因为这不是为了修改被映射的文档。

如果您不在分片基础架构中，则可以使用[db.eval()](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Sharding)以原子方式获取和更新对象；但是，这不是一个选择。

我建议将其分成两个查询。首先，通过`site`和`timestamp`找到对象`_id`。您可以将返回的字段限制为`column1`和`column2`。然后，发出具有相同条件的更新*以及*`column1`对and的匹配`column2`，并设置`column3`为它们的总和。如果在查找和更新查询之间更改了这些字段，则向更新条件添加`column1`和添加`column2`将确保您不会无意中存储无效。并且有效地，您的更新查询变得[idempotent](http://en.wikipedia.org/wiki/Idempotence)。

# c# - IIS 文件锁定 - 进程无法访问该文件，因为它正被另一个进程使用

> ID：11213781
> 
> 赞同：4
> 
> 时间：2012-06-26T18:31:23.767
> 
> 标签：c#, asp.net, iis

我有一个文本文件，其中包含 JSON 格式的缓存数据。我正在尝试更新文件，但我的 IIS 工作进程正在锁定文件，当我尝试写入文件时，我收到错误消息“进程无法访问文件，因为它正被另一个进程使用”。我在 Google 和 Stack 上搜索了答案，但似乎找不到与 IIS 锁定文件相关的任何内容。该文本文件包含在我的 Visual Studio 解决方案中，我在本地计算机上使用 IIS 来托管我的网站。对于我的第一个问题，我想知道如何让 IIS 释放文件或根本不锁定它。对于第二个问题，我想知道是否有不同的方法来防止 IIS 锁定我的文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T18:32:53.487

IIS 没有锁定您的文件。IIS 不知道您的文件是否存在。某些应用程序（可能是您自己的）正在锁定文件。

尝试使用[SysInternals中的](http://technet.microsoft.com/en-US/sysinternals/)[procmon](http://technet.microsoft.com/en-us/sysinternals/bb896645)之类的程序来找出锁定文件的进程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T19:58:50.730

午休后，我意识到工作进程挂在文本文件上，因为它正在从中读取一行，然后尝试写入。我将文件包装在 using 语句中，并在读取后移动写入，现在它正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-25T16:59:41.270

尝试发布 .NET Core API 应用程序时，我遇到了类似的问题（文件被 IIS 工作进程锁定）。

如果它对任何人有帮助，我的问题是由调用 API 的相关应用程序引起的，在尝试发布 API 时处于调试模式。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-06-28T20:40:58.827

我能够通过在每次请求后回收应用程序池来解决问题。转到应用程序池的高级设置。在回收下，将请求限制设置为 1。

# php - 使用 php curl、fsockopen 或 fopen 保存 http://maps.googleapis.com/maps/api/streetview?vars 图像

> ID：11213784
> 
> 赞同：0
> 
> 时间：2012-06-26T18:31:32.767
> 
> 标签：php, api, curl, google-street-view

对于我正在构建的应用程序，我想使用来自[http://maps.googleapis.com/maps/api/streetview?location=](http://maps.googleapis.com/maps/api/streetview?location=) *myaddressvariable* &size= *mysizes* &key= *myapikey* & *restofvars 的街景图像...*

当通过正常的浏览器请求获取此图像时，这可以正常工作。

但我真的很想使用 php -> cUrl 或 fsockopen 或 fopen 保存此图像。奇怪的是，无论我使用什么 php 函数，请求都会超时，我从谷歌收到 400 错误。

这是权限问题还是我做错了什么？

那么使用带有php的服务器端请求从谷歌街景保存图像的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:32:38.620

我就是这样做的。做任何你想做的事，你可能需要编辑它。我也使用缓存。

```
public  function Flat($Coors='', $Zoom=15, $Size='250x200'){
    #   Ok, on doit avoir des coordonnées valides
    $Coors = array_map('trim', explode(',', $Coors));

    $CoorsName = array();
    foreach($Coors as $X){
        if(!is_numeric($X)){
            $Error = 1;
        } else {
            if($X[0] == '-'){
                $CoorsName[] = substr($X, 0, 6);
            } else {
                $CoorsName[] = substr($X, 0, 5);
            }
        }
    }
    $Coors = implode(',', $Coors);
    $CoorsName = implode('_', $CoorsName);

    #   Le zoom doit aussi être valide
    if(!is_numeric($Zoom) OR !is_int($Zoom)){
        $Error = 1;
    }

    #   Maintenant on doit s'assurer de la grandeur
    $Size = array_map('trim', explode('x', $Size));

    foreach($Size as $X){
        if(!is_numeric($X)){
            $Error = 1;
        }
    }
    $Size = implode('x', $Size);

    #   Ok, avant d'aller chercher l'image, on doit vérifier le cache
    $ImageExist = false;

    #   Est-ce que les dossiers existes ?
    $CachePath = '/home/.../cache/maps/flat/';
    $PathLevel = array( $CachePath.$Zoom.'/',
                        $CachePath.$Zoom.'/'.$Size.'/',
                        $CachePath.$Zoom.'/'.$Size.'/'.$CoorsName.'/');

    foreach($PathLevel as $Path){
        if(!file_exists($Path)){
            mkdir($Path, 0777);
        }
    }

    #   Chemin complet de l'image
    $ImagePath = $PathLevel[2].$Coors.'.png';
    $GoogleURL = 'http://maps.googleapis.com/maps/api/staticmap?';
    $Args = array(  'center'    => $Coors,
                    'zoom'      => $Zoom,
                    'size'      => $Size,
                    'markers'   => 'icon:http://www.domain.com/pin.png|'.$Coors,
                    'sensor'    => 'false');

    $URL_GET = '';
    foreach($Args as $Arg => $Value){
        $URL_GET.= ($URL_GET != '' ? '&' : '') . $Arg.'='.$Value.'&';
    }
    $GoogleURL.= ($URL_GET != '' ? '?'.$URL_GET : '');

    #   On va vérifier si l'image existe maintenant
    if(!file_exists($ImagePath)){
        $Content = file_get_contents($GoogleURL);

        $fHandle = fopen($ImagePath, 'a');
        fwrite($fHandle, $Content);
        fclose($fHandle);

    //  file_put_contents($ImagePath, $Content);
    } else {
        $ImageExist = true;
    }

    #   Header requis
    header('Pragma: public'); // Requis
    header('Expires: 0'); 
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0'); 
    header('Cache-Control: private', false); // Requis
    header('Content-Type: image/png'); 
    header('Content-Transfer-Encoding: binary'); 

    #   On va afficher l'image maintenant
    if($ImageExist === true){
        header('Content-Length: '.filesize($ImagePath));
        readfile($ImagePath); 
    } else {
        header('Content-Length: '.strlen($Content));
        echo $Content;
    }
} 
```

# javascript - jQuery Star Rating 选定值

> ID：11213785
> 
> 赞同：0
> 
> 时间：2012-06-26T18:31:33.033
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

我正在使用 jQuery Star Rating 系统将下拉框转换为五颗星等。它工作正常，但我无法让它在页面加载时保持预选值。它总是在没有选择任何内容的情况下加载。

这是我在 test.html 中的选择：

```
<select name="rating" class="rating">
     <option value="1">Very poor</option>
     <option selected value="2">Not Bad</option>
     <option value="3">Average</option>
     <option value="4">Good</option>
     <option value="5">Perfect</option>
</select> 
```

还有我在 test.html 中的 jQuery：

```
$(document).ready(function(){
$(".rating").rating();
}); 
```

还有一个应该从 jquery.rating.js 做我需要的部分

```
(function ($) {

$.fn.rating = function(options)
{

    var settings =
    {
       showCancel: true,
       cancelValue: null,
       cancelTitle: "Cancel",
       startValue: null,
       disabled: false
    }; 
```

现在根据文档，如果 startValue 为 NULL，我应该能够在我的下拉菜单中使用 selected="selected" 选项，但这不起作用，所以我将 startValue 设置为 2，然后当我没有尝试“还不错”，但仍然一无所获。但是，如果我将 .js 文件中的 disabled 更改为 false，它会按原样锁定星级。我被难住了，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:33:22.070

你可以试试：

```
$('.rating > option[value=2]').attr('selected', true); 
```

上面将设置带有`2`要选择的值的选项。您需要在`2`上面调整您想要在下拉列表中选择的任何选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T16:19:27.420

我知道这对游戏来说已经很晚了，但是以防万一您仍然遇到此问题，或者其他人遇到此问题并需要答案……这应该可以。

在这之后：

```
$(document).ready(function(){
    $(".rating").rating();
    ... 
```

尝试这个：

```
 ...
    $(".rating").val(2).change(); 
```

根据文档，如果要手动设置值，则必须专门调用“.change()”。我在自己的网站之一中执行此操作。老实说，我对这个插件的评价并不高，但有时你别无选择 :-/

# c# - 有没有一种直接的方法来组合代表 15 分钟时间块的连续字符串值？

> ID：11213789
> 
> 赞同：0
> 
> 时间：2012-06-26T18:31:52.487
> 
> 标签：c#, string, algorithm, time, string-formatting

目前，我正在以这种形式向用户返回反馈：

```
"<UserName> removed 07:00, 07:15, 07:30, 07:45, 08:00, 08:15, 08:30, 09:00, 09:15, 09:30, 09:45, 10:00, 10:15, 10:30, 11:15, (etc.)" 
```

...可以理解的是，他们希望它更加用户友好，例如：

```
<UserName> removed 07:00 - 8:30, 9:00 - 10:30, 11:15 - (etc.) 
```

我不想重新设计将这些值连接到 StringBuilder 的整个方法，而是将第一个输出转换为第二个输出；就像是：

```
sbQuarterHoursRemoved = CombineSucceedingQuarterHours(sbQuarterHoursRemoved); 
```

这在我看来是否很乏味，还是有人知道一种相对轻松的方式来完成它？

## 更新

我将下面的代码调整为：

```
String QuarterHoursRemovedPrettified = PrettifyQuarterHoursRemoved(sbQuarterHoursRemoved);
. . .

private static string PrettifyQuarterHoursRemoved(StringBuilder sbQuarterHoursRemoved)
{
    string[] times = sbQuarterHoursRemoved.ToString().Split(',');
    DateTime prevDt = new DateTime(1);
    string prevString = "";

    StringBuilder output = new StringBuilder();
    foreach (string time in times) {
        DateTime dt = DateTime.ParseExact(time, "HH:mm", CultureInfo.InvariantCulture);
        if (dt.Subtract(prevDt).TotalMinutes > 15) {
            if (prevString != "")
                output.Append(" " + prevString + ",");
            output.Append(" " + time + " -");
        }
        prevString = time;
        prevDt = dt;
    }
    output.Remove(output.Length - 1, 1);
    return output.ToString(); 
} 
```

在这样的时间使用值（在调用 Split() 之后）：

```
00:45
01:00
01:15
22:45
23:00 
```

它总是在第二次通过循环时崩溃。第一次很好，但第二次，无论价值如何，都会崩溃。例如，第一次通过，dt 变为：

```
dt = 6/26/2012 12:45 am 
```

...在调用 ParseExact() 之后

...但是第二次调用 ParseExact() - 例如，“01:00”作为“时间”中的值失败。

一些错误细节是：

*System.FormatException 未处理 Message=String 未被识别为有效的 DateTime。Source=mscorlib StackTrace：在 System.DateTimeParse.ParseExact(String s, String format, DateTimeFormatInfo dtfi, DateTimeStyles style) at System.DateTime.ParseExact(String s, String format, IFormatProvider provider) at TitanNextGen_Platypi.PlatypiMainForm.PrettifyQuarterHoursRemoved(StringBuilder sbQuarterHoursRemoved)在...*

## 再次更新

它现在有效 - 未修剪的 val 是问题所在。例如，当值是“01:15”而不是“01:15”时，所有达拉斯都松散了（我在调用 ParseExact() 时将“hh:mm”更改为“HH:mm”以占 24 -小时时间）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:42:46.993

好吧，您将需要编写自己的函数，因为您正在操作一个字符串，而不是原始数据。也就是说，您将能够在线性时间内完成（您只需解析一次字符串）。

步骤包括：

1.  标记字符串（使用逗号作为分隔符）
2.  循环遍历这些标记，为每个连续的 15 分钟间隔增加响应变量。

    ```
    7:00, 7:15, 7:30, 7:45, 8:30
    7:00 - 7:30, 7:45, 8:30
    7:00 - 7:45, 8:30 
    ```

只是该过程的一般概述。您需要查看一个字符串标记器（我自己是一个 java 人，但我知道有一个内置的）您*应该*能够索引标记以引用小时和几十分钟的数字并使用一个 switch 语句来相应地响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:13:37.890

在处理字符串时，您需要跟踪您所在的位置以及是否需要开始一个新序列：

```
 string[] times = { "07:00", "07:15", "07:30", "07:45", "08:00", "08:15", "08:30", "09:00", "09:15", "09:30", "09:45", "10:00", "10:15", "10:30", "11:15" };

    private void Form1_Load(object sender, EventArgs e)
    {
        DateTime prevDt = new DateTime(1);
        string prevString = "";

        StringBuilder output = new StringBuilder("UserXyz Deleted ");
        foreach (string time in times)
        {

            DateTime dt = DateTime.ParseExact(time,"hh:mm", CultureInfo.InvariantCulture);
            if (dt.Subtract(prevDt).TotalMinutes > 15)
            {
                if (prevString != "")
                    output.Append(" " + prevString + ",");
                output.Append(" " + time + " -");
            }
            prevString = time;
            prevDt = dt;
        }
        output.Remove(output.Length - 1, 1);
        MessageBox.Show(output.ToString());
    } 
```

# header - 多个标题

> ID：11213790
> 
> 赞同：0
> 
> 时间：2012-06-26T18:31:59.117
> 
> 标签：header

我通过 web 服务调用将哈希标识符传递给服务器。哈希值在标头中传递。如果有多个哈希值，建议采用以下哪种实现方式：

1) 多个标头 - 每个散列标识符一个 2) 单个标头 - 将散列值与分隔符组合

哪一个更好？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:44:32.907

只要（散列的长度 * 要发送的散列数）是合理的（<4K），那么单个标头值就可以了……如果您使用倍数，您可能希望在标头中对它们进行编号，如“APP_HASH_1”、“APP_HASH_2”等。

# jquery - 使用 on 而不是 live 在链接单击时隐藏具有特定 id 的 div

> ID：11213791
> 
> 赞同：1
> 
> 时间：2012-06-26T18:32:00.777
> 
> 标签：jquery

`#op-four`我正在尝试使用`on`而不是隐藏带有 id 的 div`live`

```
$("#one").on("click", function() {
    $("#op-four").hide();
});​ 
```

小提琴[http://jsfiddle.net/ythSA/](http://jsfiddle.net/ythSA/)但它不会工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:33:02.583

尝试：

```
$('.links-holder').on('click','#one',function() {
   $("#op-four").hide();
}); 
```

该`.on`方法的这种使用取代了现在已弃用的`.live()`.

```
$( document /or/ 'parent_el').on( 'some_event' , 'delegated_element', function(){ 
```

阅读更多：[http ://api.jquery.com/on](http://api.jquery.com/on)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:35:15.700

您已将代码放在`ready`处理程序之外。把它移到里面，它工作正常。

[http://jsfiddle.net/ythSA/2/](http://jsfiddle.net/ythSA/2/)

您试图在处理程序`#one`实际存在之前将其附加到它。

# sql - 如何连接两个表，以便一个表的所有行都与另一个表的所有行重复？

> ID：11213793
> 
> 赞同：0
> 
> 时间：2012-06-26T18:32:01.677
> 
> 标签：sql, database, join

例如，假设我有以下两个表：

表格1：

```
Id
----
1
2 
```

表2：

```
Month
------
Jan
Feb 
```

我想使用 SQL 查询将它们组合起来以形成以下输出：

```
Id        Month
----      -------
1         Jan
1         Feb
2         Jan
2         Feb 
```

有没有办法使用单个查询来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:33:17.903

它被称为笛卡尔积，如果您不指定连接条件，就会发生这种情况。不过要小心！

```
SELECT ids.Id, months.Month
FROM ids, months 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:37:51.453

正确答案是“交叉连接”：

```
select *
from t1 cross join j2 
```

交叉连接没有“on”子句。您可以只使用逗号来做同样的事情，但这是一种古老的（希望有一天会被弃用）的 SQL 语法。交叉连接是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:34:22.127

您必须在这两个表之间进行外部连接

# ios - UIPinchGestureRecognizer 不在回调函数中输入

> ID：11213795
> 
> 赞同：0
> 
> 时间：2012-06-26T18:32:22.203
> 
> 标签：ios, ios5, uigesturerecognizer

我需要设置显示的一些图像的宽度。波纹管显示我需要一些组件（我是新的，我不知道哪个）可以获取**UIPinchGestureRecognizer**所以基于该事件我需要使宽度更大或更小。我的问题是我需要将哪个组件放在可以获取 **UIPinchGestureRecognizer**的屏幕底部？这可以在模拟器中测试吗？

我添加到控制器

```
@property (weak, nonatomic) IBOutlet UIView *gestureView; 
```

我也有 .xib 文件 UIView。在**viewDidLoad**的底部我添加了代码

```
UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handlePinch:)];
[gestureView addGestureRecognizer:pinchGesture]; 
```

我在那个文件中也有**handlePinch**功能，但它没有进入。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:15:00.817

您的gestureView 是否在界面生成器中正确连接？我假设您正在使用界面生成器，因为它被标记为 IBOutlet。

另外，确保你的 handlePinch 是这样的......

```
- (void)handlePinch:(UIPinchGestureRecognizer *)recognizer
{

} 
```

而不是这样

```
- (void)handlePinch
{

} 
```

第二个在您当前的实现中不起作用。

# apache - 您如何使用在本地计算机上模拟真实的文件上传时间?

> ID：11213801
> 
> 赞同：6
> 
> 时间：2012-06-26T18:32:45.123
> 
> 标签：apache, file-upload, localhost, mamp

我正在处理一个带有文件上传表单的网页，该表单通过 ajax 上传文件（使用 jquery.form 插件和更新`<progress>`栏）。我正在使用 MAMP，由于我上传的文件只是从我的计算机上的一个位置复制到另一个位置，因此即使文件很大，上传时间也太快而无法看到进度条。

我记得看到一个截屏视频，其中演示者对他的本地环境进行了一些更改，这减慢了上传过程，但特定的截屏视频让我无法理解......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:38:30.090

你需要安装[libapache2-mod-bw](http://ivn.cl/2010/01/06/downloads-for-bandwidth-mod/)

然后在您的虚拟主机配置集中：

```
<virtualhost *:80>
    ...
    BandWidthModule On 
    ForceBandWidthModule On
    BandWidth all 80000
</virtualhost> 
```

这将对上传设置 80 KB/s 的限制。

# asp.net-mvc - MvcRoutingShim 插件没有效果

> ID：11213802
> 
> 赞同：1
> 
> 时间：2012-06-26T18:32:49.273
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, imageresizer

我在 ASP.NET MVC 4 项目中使用[ImageResizer模块，以及插件 SqlReader 和 MvcRoutingShim。](http://imageresizing.net "图像调整器")

当我尝试访问 URL `~/databaseimages/123.jpg`（例如）时，我只是得到标准错误`404 - The resource cannot be found.`

我的期望是 ImageResizer 会处理该请求并尝试从数据库中读取图像，但它甚至不尝试连接（我使用 SQL Profiler 来验证这一点）。

有什么问题？

这是 /resizer.debug 的输出：

```
Image resizer diagnostic sheet      26-06-2012 20:42:57

1 Issues detected:

(Warning):  To potentially see additional errors here, perform an image resize request.

You are using paid bundles: Cloud Bundle, Performance Bundle

Registered plugins:

ImageResizer.Plugins.Basic.DefaultEncoder
ImageResizer.Plugins.Basic.NoCache
ImageResizer.Plugins.Basic.ClientCache
ImageResizer.Plugins.Basic.Diagnostic
ImageResizer.Plugins.Basic.SizeLimiting
ImageResizer.Plugins.MvcRoutingShim.MvcRoutingShimPlugin
ImageResizer.Plugins.SqlReader.SqlReaderPlugin
ImageResizer.Plugins.DiskCache.DiskCache

Configuration:

<resizer>
<plugins>
<add name="MvcRoutingShim" />
<add name="SqlReader" prefix="~/databaseimages/" connectionString="database" idType="UniqueIdentifier" blobQuery="SELECT Content FROM Images WHERE ImageID=@id" modifiedQuery="Select ModifiedDate, CreatedDate From Images WHERE ImageID=@id" existsQuery="Select COUNT(ImageID) From Images WHERE ImageID=@id" requireImageExtension="false" cacheUnmodifiedFiles="true" extensionPartOfId="false" vpp="true" untrustedData="false" />
<add name="DiskCache" />
</plugins>
</resizer> 
```

(...)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:33:12.300

在您的 Web.config 文件中，您声明图像 ID 都是 GUID: `idType="UniqueIdentifier"`，但在 url: 中使用了一个整数`localhost:50272/databaseimages/123.jpg`。

```
<add name="SqlReader" prefix="~/databaseimages/" connectionString="database" 
 idType="UniqueIdentifier" requireImageExtension="false" 
 cacheUnmodifiedFiles="true" extensionPartOfId="false"
 vpp="true" untrustedData="false" /> 
```

如果您未在 URL 中指定 GUID，则该请求将被忽略。将 idType 更改为不同的数据类型，如 Int，或在 URL 中使用正确的数据类型。

来源：http: [//imageresizing.net/plugins/sqlreader](http://imageresizing.net/plugins/sqlreader)

# ios - 为地区本地化 iPhone 应用程序

> ID：11213808
> 
> 赞同：0
> 
> 时间：2012-06-26T18:33:07.307
> 
> 标签：ios, localization, plist, nslocale

我有一个应用程序，它包含所有内容，无论以英语显示内容的语言如何。在应用程序的产品部分中，产品内容基于 plist 显示。可供购买的产品取决于位置，并非所有产品都在每个市场都有售。

在我的模拟器设置中，我的语言设置为**English**，我的 Region Format 设置为**Singapore**。

在加载已本地化的 plist 之前，我首先做一个日志以检查我是否确实将 SG（新加坡）视为我的区域。

```
NSString *locale = [[NSLocale currentLocale] objectForKey: NSLocaleCountryCode];
NSLog(@"LOCALE: %@", locale);
if([locale isEqualToString:@"SG"]){
    NSLog(@"singapore do something?");
    productCategory = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] 
                                    pathForResource:@"Products" ofType:@"plist"]];  
} 
```

当前结果显示我的日志语句记录 LOCALE: SG 这是预期的，但是我的新加坡特定内容没有加载。

我已经尝试过清理项目并从模拟器中删除应用程序。

这就是我的 plist 文件出现在我的项目导航器中的方式 ![Products.plist 图片](../Images/784e95e0370aafbbdf818ff6ec1e5fcf.png)

我做错了什么导致我的本地化 plist 无法显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T21:42:12.340

本地化（从应用程序包中的相关语言文件夹加载翻译资源的过程）完全基于语言设置。所以 pathForResource 只关心语言设置，忽略区域格式设置。

区域格式设置会影响字符串和依赖于语言环境的数据类型之间的转换（双向：解析输入和格式化输出）。例如，如果您将 NSDate 转换为字符串以进行显示，根据区域格式设置，您可能会得到前一个月（如在美国）或相反的月份（如在英国）。

[NSLocale currentLocale] 指的是区域格式，因此您只是在调试中查看了错误的内容。

这里有更多关于此的信息：[https ://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPInternational/BPInternational.html#//apple_ref/doc/uid/10000171i](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPInternational/BPInternational.html#//apple_ref/doc/uid/10000171i)

**编辑** 见下面的评论，这似乎更复杂。当语言设置为中性语言（例如“en”而不是“en-US”）时，Region 似乎确实会影响本地化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:08:54.227

我曾经遇到过同样的问题，不知何故找到了一个非本地化文件。对我有用的是使用：

```
[[NSBundle mainBundle] pathForResource:@"Products" ofType:@"plist" inDirectory:nil] 
```

这将始终搜索所有本地化文件并根据用户设置返回正确的文件

# ruby-on-rails - Spree 作为多语言/双语网站

> ID：11213810
> 
> 赞同：13
> 
> 时间：2012-06-26T18:33:11.667
> 
> 标签：ruby-on-rails, ruby, e-commerce, spree

spree 适合多/双语电子商务网站吗？

默认情况下，它支持国际化（i18n - [http://guides.spreecommerce.com/i18n.html](http://guides.spreecommerce.com/i18n.html)）。它给人的印象是 spree 是双语友好的，但我错过了一个难题。产品名称、描述、属性、类别的翻译。

在翻译产品和类别（包括元数据）时，您有什么好的做法？

宝石版本：狂欢 1.1.1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T00:41:14.533

我作为社区经理在 Spree 工作。

我们目前实际上正在[讨论](https://github.com/spree/spree/issues/1378)使用 I18n 在 Spree 中翻译事物。大多数内容都已翻译，但您仍可能会遇到一些尖锐的边缘。我们希望让人们更容易做到这一点。

现在关于产品的属性，可以使用社区中的一个人 Tomasz Stachewicz 构建的插件，称为[spree_globalize](https://github.com/tomash/spree_globalize)。试一试。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T17:57:22.350

对于我们的双语狂欢商店[http://www.artdesanimaux.com](http://www.artdesanimaux.com)，我们使用[spree_multi_lingual](https://github.com/jipiboily/spree_multi_lingual)和 Spree 1.1.2，它工作正常。不知道你为什么说它过时了？

[我们对我们的分叉](https://github.com/hooktstudios/spree_multi_lingual)上的运输方式进行了一些修复并添加了翻译

# asp.net-mvc-3 - 我的 MVC/MEF 应用程序中是否需要 DependencyResolver？

> ID：11213822
> 
> 赞同：0
> 
> 时间：2012-06-26T18:33:44.300
> 
> 标签：asp.net-mvc-3, mef

我在网上看到过有关如何实现它们的文章，但我仍然不明白它们的确切作用，以及我的应用程序中是否需要一个。我的应用程序将有一个`HostApp`包含许多带有控制器和视图的插件。我的应用需要自定义`DepedencyResolver`吗？

**如果您有任何问题，请告诉我！谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:36:46.473

不，你不需要一个。如果你想使用依赖注入，MVC 允许你连接一个解析器，这样你就可以在不同的点注入依赖，最典型的是将一些依赖注入你的控制器。

```
 public class CustomerController
{
 public CustomerController(ICustomerRepository repository)
 {
 }
} 
```

如果您的应用程序需要它，是否使用它取决于您。这取决于您如何设置层和依赖项，但您并不“需要”它，但它在许多情况下会有所帮助。

查看 Mark Seeman 在 .Net 中的 Dependency Injection 以获得关于该主题的最佳参考。可能会询问有关您的实现的许多问题，因为您可能有插件和可选依赖项，这有点超出了问题的范围，但请随时发布更多内容：)

[http://manning.com/seemann/](http://manning.com/seemann/)

# facebook - 如何将照片作为单独的故事发布到 Facebook 页面

> ID：11213823
> 
> 赞同：1
> 
> 时间：2012-06-26T18:33:44.310
> 
> 标签：facebook, api

如果我使用 Facebook API 将照片发布到页面，它们会显示为单个故事。

```
$args = array(
        'message' => '',
);
$args["picture"] = '@' . realpath($file);
$ch = curl_init();

$url = 'https://graph.facebook.com/me/photos?access_token='.$token;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
$data = curl_exec($ch); 
```

如果我从 Facebook 发布，它们会正确显示为每张图片的单个故事。如何以编程方式执行此操作？

# php - 将日期参数绑定到准备好的语句时出错 - 将 PHP PDO/ODBC 与 SQL Server 结合使用

> ID：11213831
> 
> 赞同：5
> 
> 时间：2012-06-26T18:34:14.310
> 
> 标签：php, sql-server, odbc

我有一个与 ODBC (v2000.86.359.00) 连接到 SQL Server (v8.00.2039 SP4 标准版) 数据库的 pdo 连接。

这有效：

```
$id = 486;
$duedate = 'June 27, 2012';
$query ="INSERT into AssetHistory (AssetID, DateDue) Values($id, $duedate);";                   
$noParams = $db->exec($query);
$db->query($query); 
```

但是，如果我尝试使用这样的准备好的语句：

```
$sql = 'INSERT into AssetHistory 
    (AssetID, DateDue)
    Values(:id, :duedate);';                

$input = array(':id'=>486, ':duedate'=>'June 27, 2012');
$smt = $db->prepare($sql);
$smt->execute($input); 
```

我收到此错误（来自 $smt->errorInfo()）：

```
 "[Microsoft][ODBC Driver Manager] Function sequence error (SQLExecute[0] at ext\pdo_odbc\odbc_stmt.c:254)" 
```

我试过：1）用单引号括起来：duedate 2）将日期绑定到unix时间戳整数3）绑定：duedate到php DateTime对象4）在准备之前将$duedate插入到sql语句中

在这一点上，我可能会卡住使用 $db->query 方法并尽我所能清理输入，但我非常感谢任何建议。

在 Windows Server 2003 机器上使用 PHP 5.38。

*更新：* 我已经从这个问题的先前版本中删除了一些变量。错误消息已更改，但最终结果是相同的。

我也尝试过手动绑定参数，如下所示：

```
$smt->bindValue(':id', 486, PDO::PARAM_INT);
$smt->bindValue(':duedate', 'June 27, 2012', PDO::PARAM_STR); 
```

除了将转换函数添加到 sql 中，如下所示：

```
$sql = 'INSERT into AssetHistory 
   (AssetID, DateDue)
Values(:id, convert(datetime,:duedate, 100));'; 
```

返回：“COUNT 字段不正确或语法错误”

而且我注意到 SQL Server 并不能[很好](http://mysql.databases.aspfaq.com/how-do-i-convert-a-sql-server-datetime-value-to-a-unix-timestamp.html)地处理 unix 时间戳......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:37:05.230

最后通过下载并安装[sqlsrv php 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=20098)（我使用 2.0 版）和[SQL Server 2008 Native Client](http://www.microsoft.com/en-us/download/details.aspx?id=16177#SNAC)解决了这个问题。

对 $dsn 参数稍作调整，其余代码就像魔术一样工作——不需要绑定、转换或强制转换。

我最终只使用了`php_pdo_sqlsrv_53_ts_vc9.dll`，但请确保您选择了正确的线程安全/非线程安全版本的驱动程序，因为 php.ini 中的错误 dll 会使您的服务器崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:16:02.857

你试过[strtotime](http://php.net/manual/en/function.strtotime.php)吗？

```
 $phpdate = strtotime( $duedate); 
```

您也可以尝试在语句中使用[SQL`CONVERT`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

```
 convert(datetime, :duedate, 100) 
```

SQL 中的数据类型是日期时间，对吗？

或尝试：

```
array(':id'=>486, ':borrower'=> 'name', ':loaner'=>'KOPERW', ':duedate'=>strtotime($duedate),

array(':id'=>486, ':borrower'=> 'name', ':loaner'=>'KOPERW', ':duedate"=>$duedate),"0000-00-00 00:00:00" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:33:32.767

如果您设置参数化查询但未能在参数列表中传递所需数量的参数，则可能会出现“COUNT 字段不正确或语法错误”。

但是，您的代码在这方面看起来还不错。

# python - 在 Scrapy >= 0.14 中以编程方式启动爬虫的最简单方法是什么

> ID：11213835
> 
> 赞同：9
> 
> 时间：2012-06-26T18:34:24.423
> 
> 标签：python, web-scraping, scrapy

我想从 Python 模块在 Scrapy 中启动爬虫。我想从本质上模仿`$ scrapy crawl my_crawler -a some_arg=value -L DEBUG`

我有以下几点：

*   项目的 settings.py 文件
*   项目和管道
*   扩展 BaseSpider 并在初始化时需要参数的爬虫类。

我可以使用上面指定的命令非常愉快地运行我的项目`scrapy`，但是我正在编写集成测试并且我想以编程方式：

*   使用中的设置`settings.py`和具有`my_crawler`name 属性的爬虫启动爬虫（我可以从我的测试模块轻松实例化这个类。
*   我希望所有管道和中间件都按照`settings.py`.
*   我很高兴在爬虫完成之前阻止该过程。管道将内容转储到数据库中，这是我将在爬网完成后检查的数据库内容以满足我的测试。

那么，任何人都可以帮助我吗？我在网上看到了一些例子，但它们要么是针对多个蜘蛛的黑客攻击，要么是绕过`Twisted's`阻塞自然，或者不适用于 Scrapy 0.14 或更高版本。我只需要一些真正简单的东西。:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-10T16:57:07.180

```
from twisted.internet import reactor
from scrapy.crawler import Crawler
from scrapy.settings import Settings
from scrapy import log, signals
from testspiders.spiders.followall import FollowAllSpider

spider = FollowAllSpider(domain='scrapinghub.com')
crawler = Crawler(Settings())
crawler.signals.connect(reactor.stop, signal=signals.spider_closed)
crawler.configure()
crawler.crawl(spider)
crawler.start()
log.start()
reactor.run() # the script will block here until the spider_closed signal was sent 
```

请参阅[文档的这一部分](https://scrapy.readthedocs.org/en/latest/topics/practices.html#run-scrapy-from-a-script)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-01T17:43:02.567

来自官方文档的@wilfred 的回答工作正常，除了日志记录部分，这是我的：

```
from twisted.internet import reactor
from scrapy.crawler import Crawler
from scrapy import log, signals
from testspiders.spiders.followall import FollowAllSpider
from scrapy.utils.project import get_project_settings

spider = FollowAllSpider()
crawler = crawler = Crawler(get_project_settings())
crawler.signals.connect(reactor.stop, signal=signals.spider_closed)
crawler.configure()
crawler.crawl(spider)
crawler.start()
log.start_from_settings(get_project_settings())
reactor.run() 
```

# object - xna 3d 水物体和水滴

> ID：11213838
> 
> 赞同：0
> 
> 时间：2012-06-26T18:34:40.280
> 
> 标签：object, 3d, xna, splash-screen

我正在 xna 中制作 3d 游戏。我想制作一个会溅起一点水花的立方体（生物的一部分），但我想不出一种方法来渲染这种立方体或具有这种效果的着色器，有什么建议吗？*顺便说一句，抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:54:21.003

看看这个帖子：

[http://forums.create.msdn.com/forums/p/31417/180167.aspx#180167](http://forums.create.msdn.com/forums/p/31417/180167.aspx#180167)

希望对你有帮助！

# actionscript-3 - SWFObject 嵌入式 Flash 全屏在 PC 上不起作用

> ID：11213839
> 
> 赞同：0
> 
> 时间：2012-06-26T18:34:45.090
> 
> 标签：actionscript-3, google-chrome, fullscreen, swfobject

[我在http://dominggus.nl/school/afstuderen/expo/](http://dominggus.nl/school/afstuderen/expo/)上创建了一个全屏 Flash 应用程序

我使用 SWFObject 生成器来创建嵌入代码。此外，我需要将 screen.width/screen.height （使用 JavaScript）作为 flashVars 放入 SWF ...

这一切都可以在 Chrome/FF 上的 MAC 上完美运行，但是在 Windows 上它只能在 IE 中运行......chrome 和 Firefox 拒绝全屏显示......

怎么可能？

编辑：我已经尝试过使用 SWFObject 进行静态/动态发布，结果相同（请参阅[http://dominggus.nl/school/afstuderen/expo/index2.html](http://dominggus.nl/school/afstuderen/expo/index2.html)了解动态）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:45:07.837

啊，看起来您遇到了 Flash 运行时错误，但在 Chrome 或 FF 中没有看到它，因为没有安装调试播放器，这对 FF 来说很容易，只需安装与 netscape 兼容的调试播放器即可查看错误（对于 Chrome 安装更复杂，因为它在内部管理 Flash 播放器更新）。

在 FF 我得到这个错误：

SecurityError：错误 #2152：不允许全屏模式。在 flash.display::Stage/set displayState() at nl.dominggus.infographic.ui::NoFullScreenPage/startButtonClickHandler()[/Users/dominggus/Documents/dpdk/eclipse_workspace/cmd_afstuderen_infographic/src/as/nl/dominggus/infographic /ui/NoFullScreenPage.as:54]

我相信这意味着插件的 allowFullscreen 参数设置不正确。

在此处验证 Flash 播放器版本（页面底部显示调试是/否）： [http ://helpx.adobe.com/flash-player/kb/find-version-flash-player.html](http://helpx.adobe.com/flash-player/kb/find-version-flash-player.html)

为给定平台获取适当的调试播放器：http: [//www.adobe.com/support/flashplayer/downloads.html](http://www.adobe.com/support/flashplayer/downloads.html)

**从文档中粘贴的**编辑****

 **FULL_SCREEN_INTERACTIVE 常量
public static const FULL_SCREEN_INTERACTIVE:String = "fullScreenInteractive" 语言版本：ActionScript 3.0 运行时版本：Flash Player 11.3、AIR 1.0、Flash Lite 4**

# cocoa - 直接在 ASIFormDataRequest 中的多部分 POST 请求

> ID：11213841
> 
> 赞同：1
> 
> 时间：2012-06-26T18:34:45.533
> 
> 标签：cocoa, post, asiformdatarequest

所以你认为很容易找到 POST 信息到 ASIFormDataRequest 的直接示例，但我还没有找到这些格式的 1:1。这是我要发送的 POST 请求：

```
POST /fileXfer HTTP/1.1
Content-Type: multipart/form-data; boundary=AaB03x
Content-Length: 200
AppID:myID
TransferID:abcd1234

-- AaB03x
Content-Disposition: form-data; name="data"; filename="xxx"
Content-Type: application/octet-stream
Content-Length: 100

... contents of file ...

--AaB03x-- 
```

编辑：

原来我的问题更多是服务器接收数据。但这就是我最终的结果！

```
NSURL *url = [NSURL URLWithString:@"http://IP:PORT/fileXfer"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostFormat:ASIMultipartFormDataPostFormat];

//Sets headers of POST
[request addRequestHeader:@"X-Application-Id" value:@"myID"];
[request addRequestHeader:@"X-Transfer-Id" value:@"abcd1234"];

//Sets data
NSData *fileData = [NSData dataWithContentsOfFile:kEncryptedFilePath];
[request setData:fileData withFileName:@"xxx" andContentType:@"application/octet-stream" forKey:@"data"];

[request setDelegate:self];
[request startAsynchronous]; 
```

我还在 ASIFormDataRequest 的 buildMultipartFormDataPostBody 中添加了以下行，其中设置了 Content-Disposition 和 Content-Type：

```
[self appendPostString:[NSString stringWithFormat:@"Content-Length: %lu\r\n\r\n", [data length]]];` 
```

我不确定是否有一种更简单的方法可以直接从请求中添加该行，但是在我尝试过的事情中，这似乎是可行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:43:52.540

与其手动构建可能导致错误的 HTTP 正文，不如使用`ASIFormDataRequest`.

```
NSURL *url = [NSURL URLWithString:@"http://IP:PORT/fileXfer"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

[请求 addRequestHeader:@"X-Application-Id" value:@"myID"];
[请求 addRequestHeader:@"X-Transfer-Id" value:@"abcd1234"];

[request setData:[self fileData] withFileName:@"xxx" andContentType:@"application/octet-stream" forKey:@"data"];

[请求 setDelegate:self];
[请求启动异步];
```

# c# - 删除 ZedGraph 边缘的图形刻度线

> ID：11213842
> 
> 赞同：2
> 
> 时间：2012-06-26T18:34:52.057
> 
> 标签：c#, winforms, zedgraph

是否可以在 ZedGraph 中删除图形边缘上的顶部和右侧主要和次要刻度线，同时保留底部和左侧刻度线？ ![在此处输入图像描述](../Images/a2989c37ab005629fa2f65bf03317163.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T21:13:48.697

轴的和组件中有一个`bool`属性。如果将属性设置为 tic 标记将不会显示在右侧和顶部边框上。`IsOpposite``MinorTic``MajorTic``false`

这是一个例子：

```
var pane = zedGraphControl1.GraphPane;

pane.YAxisList[0].MajorTic.IsOpposite = false;
pane.YAxisList[0].MinorTic.IsOpposite = false;
pane.XAxis.MajorTic.IsOpposite = false;
pane.XAxis.MinorTic.IsOpposite = false;

pane.AddCurve(null, new[] { 0.1, 0.5, 0.9 }, new[] { 0.8, 0.3, 0.1 }, Color.Blue); 
```

这将产生以下图表：

![上下边框上没有刻度线](../Images/fb7f285314b13229d89d42c42c0fcc18.png)

# grails - 处理 grails 中的服务错误

> ID：11213843
> 
> 赞同：4
> 
> 时间：2012-06-26T18:34:52.740
> 
> 标签：grails, grails-validation

我的代码有问题。如何处理从服务到我的 gsp 的错误？我尝试使用来自服务或控制器的渲染，但类似**​​[{1}] 类的属性 [{0}] 的值 [{2}] 不是有效的电子邮件地址]**并得到**错误 500：**带有完整异常跟踪的**内部服务器错误。**我的消息来源：

**用户控制器.groovy**

```
def saveUser() {

    def salt = new SecureRandomNumberGenerator().nextBytes().getBytes()
    def user

    try {
        user = userService.registerMethod(params.username, params.passwordHash, params.passwordHash2,
            salt, params.firstName, params.lastName, params.sex, params.email, params.mobile, params.userType)

        session.user = user
        flash.message = "User ${user.profile.firstName} ${user.profile.lastName} was successfuly created!"
        redirect(uri:"/")
    } catch (UserRegistrationException ure) {
        user = ure.user
        if (user) {
            render(view:"registration",model:[user:user])
        } else {
            flash.message = ure.message
            redirect(action:"registration")
        }
    }

} 
```

**用户服务.groovy**

```
class UserRegistrationException extends RuntimeException {
String message
User user
}

class UserService {

boolean transactional = true

User registerMethod(String username, String password1, String password2, Object salt, String firstName, String lastName,
        String sex, String email, String mobile, String userType) {

    def user = User.findByUsername(username)
    if(user) {
        //flash.message = "User already exists with login ${username}"
        throw new UserRegistrationException(message:"User already exists with login ${username}")
        redirect(uri:"/")
    } else {
        if (password1 != password2) {
            //flash.message = "Passwords don't match"
            throw new UserRegistrationException(message:"Passwords don't match")
        } else {
            def profile = Profile.findByEmail(email)
            if (profile && (email == profile.email)) {
                //flash.message = "User with this email is already exists!"
                throw new UserRegistrationException(message:"User with this email is already exists!")
            } else {
                user = new User(
                    username:username,
                    passwordHash: new Sha512Hash(password1, salt, 1024).toHex(),
                    passwordSalt:salt,
                    profile: new Profile(
                        firstName:firstName,
                        lastName:lastName,
                        sex:sex,
                        email:email,
                        mobile:mobile,
                        userType:userType
                        )
                    )

                if (!user.hasErrors() && user.save(flush:true,failOnError:true)) {
                    def authToken = new UsernamePasswordToken(username, password1)
                    SecurityUtils.subject.login(authToken)
                    return user
                } else {
                    throw new UserRegistrationException(message:"Can't create user");
                }
            }
        }
    }
} 
```

}

**注册.gsp**

```
<body>
    <h1>Registration Page</h1>

    <g:if test="${ flash.message }">
        ${ flash.message }
    </g:if>
    <g:hasErrors bean="${ user }">
        <g:renderErrors bean="${ user }" as="list"/>
    </g:hasErrors>

    <div id="registration">
        <g:form action="saveUser">
        <table>
            <tr>
                <td><label for="username">Login: </label></td>
                <td><g:textField name="username" id="username" /></td>
            </tr>
            <tr>
                <td><label for="firstName">First Name: </label></td>
                <td><g:textField name="firstName" id="firstName"/></td>
            </tr>
            <tr>
                <td><label for="lastName">Last Name: </label></td>
                <td><g:textField name="lastName" id="lastName"/></td>
            </tr>
            <tr>
                <td><label for="sex">Sex: </label></td>
                <td><g:radioGroup values="['M','F']" name="sex" labels="['Male','Female']">
                <p>${ it.radio } ${ it.label }</p>
                </g:radioGroup></td>
            </tr>
            <tr>
                <td><label for="email">Email: </label></td>
                <td><g:textField name="email" id="email"/></td>
            </tr>
            <tr>
                <td><label for="mobile">Mobile: </label></td>
                <td><g:textField name="mobile" id="mobile"/></td>
            </tr>
            <tr>
                <td><label for="passwordHash">Password: </label></td>
                <td><g:passwordField name="passwordHash" id="passwordHash"/></td>
            </tr>
            <tr>
                <td><label for="passwordHash2">Confirm password: </label></td>
                <td><g:passwordField name="passwordHash2" name="passwordHash2" id="passwordHash2" /></td>
            </tr>
            <tr>
                <td><label for="userType">User Type: </label></td>
                <td>
                    <g:radioGroup values="['F','H']" name="userType" labels="['Freelancer','Client']">
                        <p>${ it.radio } ${ it.label }</p>
                    </g:radioGroup>
                </td>
            </tr>
            <tr>
                <td><g:submitButton name="saveUser" value="Register"/> </td>
            </tr>
        </table>
        </g:form>
    </div>

</body> 
```

也许我的代码有问题？

我只想向用户显示错误，而不是完整的异常跟踪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:41:07.070

您正在使用`save(failOnError:true)`which 将在保存失败时引发异常。由于您只捕获`UserRegistrationException`，因此来自的异常`save()`会产生 500 内部服务器错误。您可以删除`failOnError`并且您的服务方法应该落入您的`throw new UserRegistrationException`块并按照您的预期运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T12:22:29.090

我只想补充一点，将异常用于控制流并不是好的程序设计，而且非常昂贵。我建议删除`UserRegistrationException`并只返回一个布尔值`false`并在控制器中检查它。请记住，groovy 方法是动态输入的，你可以返回任何你想要的。

# python - 需要将四个文件的信息合并在一起

> ID：11213844
> 
> 赞同：-2
> 
> 时间：2012-06-26T18:34:55.980
> 
> 标签：python, python-2.7, parsing, merge

我有 2 个大文件，都包含我想要的信息段，我已将信息提取到输出文件中，现在我有 4 个文件包含我需要的信息。

我想要做的是将四个文件中的信息合并到一个文件中，格式简洁，只要它是逐行格式，包括 4 列并用逗号分隔，我希望能够在文件顶部打开时让用户知道列中的信息。这在python>中可能吗？

这是我要合并的信息：

```
'/usr/share/doc/HTML/es/kioslave/index.docbook' 

Redhat 7.3' 

Linux' 

D84270022E57F1850C8464FA432ADFF99588157B' 
```

每一行都是我拥有的文件的 1 行，它们有很多行，所以我不能发布整个内容，但这是信息的一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:51:09.300

Python[`zip`](http://docs.python.org/library/functions.html#zip)函数用于将多个源组合成一个元组。

```
for row in zip(file1, file2, file3, file4):
    # output the 4 column values in row 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:38:03.703

完全有可能——查看[csv](http://docs.python.org/library/csv.html)模块，这很可能是您需要的。它很容易使用。

您将创建一个逗号分隔值文件 (.csv)，其中第一行将是指示每行内容的标题，即

```
path,distro,os,serial
'/usr/share/doc/HTML/es/kioslave/index.docbook' ,'Redhat 7.3', 'Linux', D84270022E57F1850C8464FA432ADFF99588157B' 
```

# php - PHP/在子目录中正确使用包含

> ID：11213848
> 
> 赞同：3
> 
> 时间：2012-06-26T18:35:08.283
> 
> 标签：php, hyperlink, subdirectory

我有一个站点范围的包含文件，我包含在主目录的页面中。但是，我在子目录中放置了一堆具有共同主题的页面。这些页面需要引用相同的包含文件。我现在遇到了包含文件中的相对链接的问题，例如图像，因为它们根据主文件是在主目录中还是在子目录中调用不同的路径。例如，`"images/pic.jpg"`如果从主目录调用包含，则链接将起作用，但如果从子目录调用包含，则链接将尝试转到`"sub/images/pic.jpg"`。

我已经通过使用回到根目录的硬链接解决了这个问题，如`/images/pic.jpg`. 但是，我宁愿不使用硬链接，因为如果将站点移动到另一个目录等，它们可能会中断。

您调用给定包含的所有页面都必须位于同一目录中吗？或者是否有一些技术可以使包含中的相对链接起作用，即使从子目录中调用包含？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:40:18.170

对于 HTML 内容，请使用这个 meta ：

```
<head>
    <base href="http://www.domain.ca/base/website/" target="_blank" />
</head> 
```

此元将适用于每个链接。因此，如果链接是`img/blabla`并且您位于子子子文件夹中，则加载的图像将是 base_href + src ...

在 PHP 中，在脚本的开头设置一个变量并将其放在每个包含之前。您也可以在每次图像加载和填充之前编写此变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T18:44:27.633

没有硬性规定 - 您可以根据需要处理包含的内容，但您应该努力保持一致。

我管理的最大站点有数千个包含文件，分散在数百个子目录中。我们始终使用绝对路径，使用一个变量来表示根目录，然后根据需要连接路径的其余部分。当我们需要移动文件时，我们需要更改一个变量，然后整个站点都移动了。

您可以使用相对链接，但是当您试图找出从哪里调用哪些文件时，我发现它们更加令人困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T22:53:01.607

在较小的项目中，一个简单的常量就可以很好地完成这项工作：假设您有 2 个文件，`/homepage.php`并且`/contact/form.php`，这两个文件都包含第三个文件`layout.php`- 主文件（主页 + 表单）应该传播它们相对于根目录的位置通过常量访问网络服务器：

主页.php

```
<?php
define('WEB_ROOT', './');  // relative path to /
include('layout.php'); 
```

联系人/form.php

```
<?php
define('WEB_ROOT', '../');  // relative path to /
include('layout.php'); 
```

布局.php

```
<img src="<?php echo WEB_ROOT; ?>images/pic.jpg"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T18:41:06.343

如果我是你，我会尝试创建一个（各种）函数来检查你当前的工作目录，然后相应地添加适当的路径尺寸

```
<?php

// current directory
echo getcwd() . "\n"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T18:54:19.877

在我看来，您正在寻找的是`..`目录命令。这将说“上一个目录”。

从 /：

`include('includes/inc.php');`

来自/子：

`include('../includes/inc.php');`

* * *

这也适用于浏览器端。您可以在 HTML、CSS 和 JavaScript 中使用 ..。地狱，你可以在任何地方使用它。在你的命令行中，尤其是。

不过老实说，我会使用绝对路径并设置一个常量来引用站点的路径。这样您就可以将您想要的路径附加到该常量的末尾以获得绝对路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T18:41:35.557

您可以在（或在 PHP 5.3+ 上）使用魔术常量`__FILE__` [来](http://php.net/manual/en/language.constants.predefined.php)构建相对于包含文件的路径。[`dirname`](http://php.net/manual/en/function.dirname.php)`__DIR__`

```
$image = dirname(__FILE__) . '/images/pic.jpg'; 
```

或者

```
$image = __DIR__ . '/images/pic.jpg'; 
```

# macos - 如何在 osx 上使用 ls --ignore

> ID：11213849
> 
> 赞同：13
> 
> 时间：2012-06-26T18:35:14.410
> 
> 标签：macos, bash, ls

我正在尝试在 OSX 上执行以下操作：

`ls -lR --ignore *.app`

这样我就可以递归搜索*除*.app 文件夹之外的所有文件夹。

然而，达尔文似乎没有`--ignore`或没有`--hide`选择。

`ls -lR`也许是一个脚本，可以递归地搜索一个文件夹深处的给定集合，但由于输出的格式，我不确定我不能通过任何管道：

```
./ROOT/Applications/Some_app:
drwxr-xr-x   3 admin  root  102 26 Jun 11:03 app-bundle.app  #<- WANT THIS
drwxr-xr-x@ 24 admin  root  816 26 Jun 11:24 folder          #<- WANT THIS

./ROOT/Applications/Some_app/app-bundle.app:                 #<- DON'T WANT
drwxr-xr-x  7 admin  root  238 26 Jun 11:03 Contents         #<- DON'T WANT
... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T18:38:37.810

使用`find`：

```
find . -ls -name '*.app' -prune 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T18:42:23.863

在 bash 中，您可以使用扩展通配符来排除模式。

```
shopt -s extglob # this must be on its own line
echo !(*.app) # match everything except for the given pattern 
```

如果您有 bash 版本 4 或更高版本，则可以使用 globstar 递归地执行此操作。

```
shopt -s globstar
shopt -s extglob 
echo **/!(*.app) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-09T08:47:53.193

另一种方法是通过管道连接到 grep：

ls | grep -v

# ruby-on-rails - SublimeText 2 Ruby 格式化

> ID：11213853
> 
> 赞同：19
> 
> 时间：2012-06-26T18:35:24.680
> 
> 标签：ruby-on-rails, ruby, formatting, sublimetext2

有没有人找到一个好的 Ruby/Rails 格式化程序？有 BeautifyRuby，但它把字符串`Q%[]`写错了，因为它把所有东西都对齐了，而且把所有东西都`[]`弄乱了。

从一个由 beautifyruby 自动格式化的函数来看，它基本上看起来像这样：

```
 %x[#{cat_command} &]
    %x[#{join_command} &]
       return newintroname
       end 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T04:26:23.390

当前版本的[beautifyRuby](https://github.com/CraigWilliams/BeautifyRuby)实际上解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-10T13:10:43.510

我建议您使用[RuboCop](https://github.com/bbatsov/rubocop)来查找 Ruby 中的所有问题/建议/替代方案/良好实践。它也可以作为 Sublime Text 插件使用。

Ruby 良好实践：[https ://github.com/bbatsov/ruby-style-guide](https://github.com/bbatsov/ruby-style-guide)

# iphone - iPhone iOS UITapGestureRecognizer 是否可以使用某个触摸点初始化识别器？

> ID：11213858
> 
> 赞同：0
> 
> 时间：2012-06-26T18:35:36.247
> 
> 标签：iphone, ios, uiview, cgpoint, uitapgesturerecognizer

我正在使用点击手势识别器在另一个 UIView 中放置一个带有标签的小子视图。当用户点击视图时，标签会填充用户点击的组件的标题，并且子视图以点击位置为中心。

我需要确保我的手势识别器的初始位置与情节提要中定义的子视图的中心相匹配（在用户点击视图之前），但似乎我无法找到通过这一点的方法转到手势识别器。 **有没有办法用视图中的某个点初始化我的点击手势识别器？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:50:22.253

我不太确定你在问什么。手势识别没有“起点”。它们接收给定视图内的各种触摸类型，并允许您唯一地处理每一个。

如果您想模拟加载时的触摸（听起来可能是您想要做的），请将您的代码重新组织为如下所示：

```
- (void)viewDidLoad
{
     //simulate touch here
     [self touchedAtLocation:CGPointMake(100, 100)];
}

//Your delegate method
- (void)handleTap:(UITapGestureRecogizer *)recognizer
{
    [self touchedAtLocation:[recognizer locationInView:self.view]];
}

- (void)touchedAtLocation:(CGPoint)location
{
    //perform action based on location of touch
} 
```

在此示例中，您可以根据触摸 100,100 时的位置/数据来启动子视图的位置/数据。

注意：我省略了配置您的手势识别器的代码，因为听起来您已经控制了该部分。如果没有，我可以发布更多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:13:19.113

几件事可能会有所帮助：

手势识别器可以附加到视图层次结构中的任何视图。因此，如果您想要一些小的子子视图来识别点击，您可以将GestureRecognizer 添加到该视图。

当手势被识别时，您可以在决定对其执行任何操作之前测试手势的位置（以及其状态的其他方面）。例如，假设您只希望手势在用户点击视图内非常小的空间时起作用......

```
- (void)handleTap:(UITapGestureRecogizer *)recognizer {

    // get the location relative to the subview to which this recognizer is attached
    CGPoint location = [recognizer locationInView:recognizer.view];

    // tiny rect to test, also in the recognizer's view's coordinates
    CGRect someSmallerRect = CGRectInset(recognizer.view.bounds, 10, 10);

    if (CGRectContainsPoint(someSmallerRect, location)) {
        // do whatever the touch should do
    }
    // otherwise, it's like it never happened
} 
```

# objective-c - 更改 UItableViewCell 中的 UILabel 文本颜色

> ID：11213861
> 
> 赞同：0
> 
> 时间：2012-06-26T18:35:47.000
> 
> 标签：objective-c, cocoa-touch, uitableview, uilabel

我在每一行都有一个很大的自定义`UITableView`，`UILabels`我想以黑色或绿色显示某些文本。

`NSString's`我用from a喂细胞`NSArray`。假设我只想以黑色显示`NSString`from index `30`。

我正在尝试这样的事情，但它不起作用：

```
NSIndexPath *indexPathWithBlackText = [NSIndexPath indexPathForRow:30 inSection:[indexPath section]];

    if (indexPath.row == indexPathWithBlackText.row) {  
        //Label with text in black 
        topLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
        topLabel.highlightedTextColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.9 alpha:1.0];
    } else {
        //Label with text in green 
        topLabel.textColor = [UIColor colorWithRed:0.122 green:0.467 blue:0.255 alpha:1.00];
    } 
```

任何有关正确方向的提示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:39:14.037

在这个 UITableViewDataSource 委托方法中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

写这个：

```
if ([self isBlackRow:indexPath.row]) {
    // Your label reference, change color to black here.
} else {
    // Your label reference, change color to green here. 
} 
```

制作一种方法来确定该行是否为黑色

```
- (BOOL)isBlackRow:(NSInteger)row {
    NSArray* blackRows = [NSArray arrayWithObjects:[NSNumber numberWithInt:30], [NSNumber numberWithInt:11], nil];

    for (NSNumber* number in blackRows) {
        if (number.intValue == row) {
            return YES;
        }
    }

    return NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:44:03.747

```
 if (indexPath.row > 29) {  
    //Label with text in black 
    topLabel.textColor = [UIColor colorWithRed:0.25 green:0.0 blue:0.0 alpha:1.0];
    topLabel.highlightedTextColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.9 alpha:1.0];
} else {
    //Label with text in green 
    topLabel.textColor = [UIColor colorWithRed:0.122 green:0.467 blue:0.255 alpha:1.00];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:39:03.157

您如何将标签添加到表格视图中？

可能是您没有引用正确的对象。

# sql - 连接多个表并从其中一个获取多个属性

> ID：11213862
> 
> 赞同：0
> 
> 时间：2012-06-26T18:35:55.480
> 
> 标签：sql, sql-server, database, sql-server-2008

我正在尝试将多个表连接在一起以构建报告。该报告列出了课程、对其进行的修订以及谁请求、制定和批准了修订。

根据请求，已批准，这些值是员工编号。我正在尝试将上面的内部连接表与 Employee 表连接起来，这样我就可以列出请求、制定和批准修订的人的姓名（不仅仅是员工编号）。

这就是我所拥有的，我知道这是完全错误的。

```
SELECT *
FROM Courses 
INNER JOIN CourseRevisions ON CourseRevisions.PELID = Courses.PELID
INNER JOIN CourseGroups ON CourseGroups.CourseGroupID = Courses.CourseGroupID
INNER JOIN [dbo].[OPG_Employees] ON OPG_Employees.EmployeeID = CourseRevisions.UpdatedBy
AND OPG_Employees.EmployeeID = CourseRevisions.ApprovedBy
AND OPG_Employees.EmployeeID = CourseRevisions.RequestedBy 
```

这只返回一个结果，恰好为所有 3 个（请求、批准和更新）列出了相同的员工 ID

我将如何获得它，以便我可以获得每个员工的表格结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:40:53.263

您必须为每个字段加入 OPG_Employees 表一次，即上面示例中的 3 次。一个 INNER JOIN 用于 UpdatedBy，一个 INNER JOIN 用于 ApprovedBy，一个 INNER JOIN 用于 RequestedBy。

像这样：

```
SELECT *
FROM Courses 
INNER JOIN CourseRevisions ON CourseRevisions.PELID = Courses.PELID
INNER JOIN CourseGroups ON CourseGroups.CourseGroupID = Courses.CourseGroupID
INNER JOIN [dbo].[OPG_Employees] empUpdatedBy ON empUpdatedBy.EmployeeID = CourseRevisions.UpdatedBy
INNER JOIN [dbo].[OPG_Employees] empApprovedBy ON empApprovedBy.EmployeeID = CourseRevisions.ApprovedBy
INNER JOIN [dbo].[OPG_Employees] empRequestedBy ON empRequestedBy.EmployeeID = CourseRevisions.RequestedBy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:42:40.030

您需要为每个被引用的员工单独加入：

```
SELECT *
FROM Courses INNER JOIN
     CourseRevisions
     ON CourseRevisions.PELID = Courses.PELID INNER JOIN
     CourseGroups
     ON CourseGroups.CourseGroupID = Courses.CourseGroupID INNER JOIN
     [dbo].[OPG_Employees] UpdateEmp 
     ON UpdateEmp.EmployeeID = CourseRevisions.UpdatedBy INNER JOIN
     [dbo].[OPG_Employees] ApprovedEmp
     on OPG_ApprovedEmp.EmployeeID = CourseRevisions.ApprovedBy INNER JOIN
     [dbo].[OPG_Employees] RequestedEmp
     on RequestedEmp.EmployeeID = CourseRevisions.RequestedBy 
```

您的原始公式要求所有三个 id 完全相同。

# android - ToggleButton 在方向改变时改变状态

> ID：11213864
> 
> 赞同：1
> 
> 时间：2012-06-26T18:36:13.870
> 
> 标签：android, orientation, togglebutton

我有一个`CustomButton`类 (extends `LinearLayout`)，在其中我膨胀了一个包含 a 的布局`ToggleButton`(实际上这更复杂，但我在这里简化了问题)。

```
public class CustomButton extends LinearLayout {

    private ToggleButton toggleOnOffButton;

    public CustomButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        LayoutInflater.from(context).inflate(R.layout.custom_button_layout, this);
    }

    @Override
    protected void onFinishInflate() {
        toggleOnOffButton = (ToggleButton) findViewById(R.id.toggle_on_off_button);
        super.onFinishInflate();
    }

    public ToggleButton getToggleOnOffButton() {
        return toggleOnOffButton;
    }
} 
```

custom_button_layout.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

    <ToggleButton android:id="@+id/toggle_on_off_button"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:textOff="Off"
                  android:textOn="On"
                  android:layout_alignParentRight="true"
            />
</RelativeLayout> 
```

我有一个活动，我用 2 `CustomButton`-s 为布局充气。第一个 toggleButton 的开/关状态保存在共享首选项中，我在`onCreate`方法中从那里加载值。

```
public class FirstActivity extends Activity
{
    private CustomButton customButton;
    private ToggleButton toggleBut;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        customButton = (CustomButton)findViewById(R.id.toggleButton);
        toggleBut = customButton.getToggleOnOffButton();

        boolean saved = loadPreferences("toggleBut");
        toggleBut.setChecked(saved);
        toggleBut.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                boolean checked = toggleBut.isChecked();
                savePreferences("toggleBut", checked);
            }
        });
    }

    private void savePreferences(String key, boolean value){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putBoolean(key, value);
        editor.commit();
    }

    private boolean loadPreferences(String key){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        return sharedPreferences.getBoolean(key, true);
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"> 
    <com.example.example.cs.ssd.custom.CustomButton
            android:id="@+id/toggleButton"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            />

    <com.example.example.cs.ssd.custom.CustomButton
            android:id="@+id/toggleButton2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            />
</LinearLayout> 
```

当我启动应用程序时，第一个 toggleButton 为 ON。当我更改屏幕的方向时，第一个 toggleButton 自动变为 Off，甚至`saved`具有值`true`并被调用`toggleBut.setChecked(saved);`，我认为这与`CutomButton`我创建的有关，因为如果`main.xml`布局仅包含 1 `CustomButton`，则此问题不会重现。我不确定我做错了什么......这是带有上述代码的存档（作为一个项目）：[存档](http://minus.com/lbk3q4IKQfJPEB)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T18:47:13.477

如果您希望 CustomButton 在方向更改后保持其当前状态，只需覆盖 onSaveInstanceState() 和 onRestoreInstanceState()。

**一个办法**

我浏览了您的代码并注意到`toggleBut`在 onActivityCreated() 之后但在 onStart() 之前的状态正在更改。为了避免这些方法中的任何一个覆盖您的切换设置，我只是将这些行从 onViewCreated() 中移出：

```
boolean saved = loadPreferences("toggleBut");
toggleBut.setChecked(saved); 
```

并将它们放入 onResume() 中。希望有帮助！

**更好的解决方案**

当系统尝试恢复默认值时，您的 ToggleButton 设置将被覆盖`saveInstanceState`，可能在 Fragment.onActivityCreated() 中。

在 CustomButton 中，像这样覆盖这些函数：

```
@Override
protected Parcelable onSaveInstanceState() {
    Bundle state = new Bundle();
    state.putParcelable("default", super.onSaveInstanceState());
    state.putParcelable("toggle", toggleOnOffButton.onSaveInstanceState());
    return state;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    Bundle bundle = (Bundle) state;
    super.onRestoreInstanceState(bundle.getParcelable("default"));
    toggleOnOffButton.onRestoreInstanceState(bundle.getParcelable("toggle"));
}; 
```

了解系统仍会更改 ToggleButton 状态，而无需多做一件事。但让我试着解释一下发生了什么：

*   `onActivityCreated(Bundle savedInstanceState)``savedInstanceState`通过调用“onRestoreInstanceState(Bundle savedInstanceState)”将它传递给每个布局元素。
*   onRestoreInstanceState() 首先从布局的根元素开始并向上遍历布局的层次结构（在这种情况下，它最后设置每个 ToggleButton 的选中状态）。
*   由于默认方法显然不起作用，我们需要为 ToggleButtons 定义我们自己的保存/恢复方法。否则我们在系统调用 onRestoreInstanceState() 之前所做的任何更改都将被系统再次更改...

因此，最后我们将通过在 CustomButton.onFinishInflate() 中添加以下行来从默认行为中排除 ToggleButtons：

```
toggleOnOffButton.setSaveEnabled(false); 
```

瞧，您的 CustomButtons 会自动保留它们的状态。

# linux - 需要重新插入才能建立 USB 设备链接

> ID：11213865
> 
> 赞同：0
> 
> 时间：2012-06-26T18:36:15.310
> 
> 标签：linux, linux-kernel, usb, kernel

我在我的微型计算机上运行了一个 builddroot 组装的busybox 发行版。到目前为止一切都很好，但我意识到了一件事。当我启动我的盒子并执行 lsusb 时，我看到了这个：

```
# lsusb
Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 002: ID 0409:005a NEC Corp. HighSpeed Hub
Bus 001 Device 003: ID 12d1:14ac Huawei Technologies Co., Ltd. 
Bus 001 Device 004: ID 10c4:ea60 Cygnal Integrated Products, Inc. CP210x 
```

复合设备和我有以下链接：

```
ttyUSB0  ttyUSB1  ttyUSB2  ttyUSB3 
```

购买这些链接似乎都没有转到设备 0004，但如果我重新插入 CP210x 设备，我会得到：

```
# lsusb
Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 002: ID 0409:005a NEC Corp. HighSpeed Hub
Bus 001 Device 003: ID 12d1:14ac Huawei Technologies Co., Ltd. 
Bus 001 Device 005: ID 10c4:ea60 Cygnal Integrated Products, Inc. CP210x 
```

复合设备和这些链接：

```
ttyUSB0  ttyUSB1  ttyUSB2  ttyUSB3  ttyUSB4 
```

现在 ttyUSB4 正在链接到我的设备 005 为什么我需要重新插入设备才能获得有效的符号链接？这不是我想要的吗？:( 我该如何解决这个问题？cp210x 模块被编译到内核中（不作为单独的模块附加） - 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:01:17.347

由于某种原因，这可能只是由于我们现在只使用一个 USB 设备而停止发生。Inodes 本来是一种解决方案，但从未在我们的系统中实现。

# javascript - 带有垂直调整大小的 jQuery dotdot 插件

> ID：11213868
> 
> 赞同：1
> 
> 时间：2012-06-26T18:36:29.153
> 
> 标签：javascript, jquery, html

我正在尝试让文本块垂直调整大小并使用 dotdotdot jQuery ellipsis-support 插件。dotdotdot 插件具有设置高度参数，我想知道是否有一种方法可以动态更新该设置高度。我想考虑相邻 div 的总高度并调整文本块的大小以适应特定 div 的整个高度。

我把这个 jsFiddle 作为我想要完成的一个松散的模型：http: [//jsfiddle.net/smittles/8psvZ/](http://jsfiddle.net/smittles/8psvZ/)

理想情况下，当红线向下移动时，概要文本将展开以下降到红线。

因为我使用的是设定高度，所以这个模型现在不起作用。我不知道要进行哪些调整才能使其正常工作。

如果可能的话，我确实想保持对 dotdotdot.js 的使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:55:54.070

使用`toggle`函数的回调重新调用 dotdotdot 代码。

请参阅[此更新的小提琴](http://jsfiddle.net/F5w4u/)或下面的代码片段：

```
$('.share').click(function(){
    $('.social_options').toggle('fast', function(){

      // height will be height of image frame + share button
      var new_height = $('.image_frame').height() + $('.share').height();

      // if the social options are visible, add that to height as well
      if ($('.social_options').is(':visible'))
          new_height += $('.social_options').height();

      $('.synopsis').dotdotdot({
            ellipsis    : '... ',
            wrap        : 'word',
            after       : null,
            watch       : true,
            height      : new_height
      });

    });        
}); 
```

您也可以通过创建一个执行 dotdotdot-ing 的函数来防止冗余代码。在页面加载时调用它，然后在随后的每个切换调用中调用它。

# scala - 是否可以在行为功能之外接收或响应消息？

> ID：11213869
> 
> 赞同：1
> 
> 时间：2012-06-26T18:36:33.693
> 
> 标签：scala, actor

我正在使用 RXTX 库将一些数据发送到串口。发送数据后，我必须等待 1 秒才能收到 ACK。我使用 ArrayBlockingQueue 实现了这个功能：

例如。

```
val queue = ArrayBlockingQueue(1)

def send(data2Send : Array[Byte]) : Array[Byte]{
   out.write(data2Send)
   queue.poll(1000)
}

def receive(receivedData : Array[Byte]){
  queue.add(receivedData)
} 
```

这工作得很好，但是因为我正在学习 Scala，所以我想使用插入线程和锁定结构的 Actor。

我的第一次尝试如下：

```
class Serial {

sender = new Sender(...)
new Receiver(...).start

class Sender {
      def send(data2Send : Array[Byte]) : Array[Byte]{
       out.write(data2Send)
         receiveWithin(WAIT_TIMEOUT_MILLIS) {
          case response => response
          case TIMEOUT => null
        }
      }
    }

    class Receiver extends Actor{
      def act{
        loop{
           sender ! read()
        }
      }
    }
} 
```

但是这段代码抛出了 java.lang.AssertionError: assertion failed: 从属于其他参与者的通道接收。我认为问题在于我不能在行为定义之外使用接收或反应。我遵循的方法是正确的吗？

第二次尝试：

```
class Serial {

    new Sender(...).start
    new Receiver(...).start

    def send() = (sender ?! data2Send).asInstanceOf(Array[Byte])

    class Sender {
          def act() {
          loop{
          receive{
           out.write(data2Send)
             receiveWithin(WAIT_TIMEOUT_MILLIS) {
              case response => response
              case TIMEOUT => null
            }
          }
        }
       }
      }

        class Receiver extends Actor{
          def act{
            loop{
               sender ! read()
            }
          }
        }
    } 
```

在第二次尝试中，我得到 java.util.NoSuchElementException: head of empty list when sender ！read() 行被执行。它看起来要复杂得多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T22:20:38.780

除非你使用 NIO，否则在这种情况下你无法避免阻塞。最终，您的消息来自您需要来自的套接字`read()`（即*某个线程，某处，必须阻塞*）。

查看您的 3 个示例（即使假设它们都有效），如果您在六个月后的凌晨 2 点发现了一个错误，*您*认为您更愿意查看哪个代码片段？我知道我会选择哪一个！

Actor 非常适合在事件驱动系统周围发送异步消息。在你点击一些使用套接字的外部 API 的地方，你可以在它们周围包裹一个类似 actor 的*外观*，以便它们可以与系统的其他部分交互（这样系统的其余部分就不会知道实现细节）。几点建议：

*   对于必须处理读取/写入套接字的实际参与者，**请保持简单**。

*   尝试并组织系统，使与该参与者的通信是*异步*的（即其他参与者不会阻塞并等待回复）

*   鉴于 scala 演员库即将被弃用，我将开始使用**akka**

# html - 具有 display:table 样式的嵌套 div 在 IE 中不会拉伸到 100% 高度

> ID：11213870
> 
> 赞同：4
> 
> 时间：2012-06-26T18:36:37.193
> 
> 标签：html, internet-explorer, nested, css-tables

我有一个响应式布局，它在 FireFox、Chrome 和 Opera 中完美运行，但在 IE 中却不行。它在这 3 个现代浏览器中垂直和水平延伸，但在 IE 中没有。它基于`display:table`css技术。

这是我的代码：

```
<div id="container">
    <div id="header"> header header header header header </div>
    <div id="contentWraper">
        <div id="content">
            <div id="columnsWraper">
                <div id="leftPanel">left panel <br /> left panel <br /> left</div>
                <div id="rightPanel">right panel</div>
            </div>
        </div>
    </div>
    <div id="footer">footer</div>    
</div> 
```

CSS：

```
html, body { height: 100%; background: gray; margin: 0; padding: 0; }
#container { display: table; height: 100%; width: 100%;}
#header { height: 0%; display: table-row;}
#contentWraper  {height: 100%; background: lightgray; display: table-row;}
#content {height: 100%; background: lightgray; display: table; width: 100%;}
#columnsWraper    {height: 100%;  display: table-row;}
#footer { height: 0%; display: table-row;}
#leftPanel { background: wheat; width: 100px;  display: table-cell; }
#rightPanel { background:yellowgreen; display: table-cell; } 
```

[http://jsfiddle.net/wftHq/6/](http://jsfiddle.net/wftHq/6/)

在我使用带有“display:table”样式的嵌套 div 之前，它也可以在 IE 中使用。我不得不使用它，否则“header”只有 100px 宽（“leftPanel”的宽度）。仅在 IE 中“leftPanel”和“rightPanel”不会填充 100% 的高度。有没有办法在 IE 中修复它？有谁知道如何更改我的代码以在 IE 中工作。我试图避免使用 javaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T12:49:58.523

不使用“表格样式”并在 IE 上工作：

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
<title>Title of the document</title>
<link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
<div id="container">
    <div id="header"> header header header header header </div>
    <div id="contentWraper">
        <div id="content">
            <div id="columnsWraper">
                <div id="leftPanel">left panel <br /> left panel <br /> left</div>
                <div id="rightPanel">right panel</div>
            </div>
        </div>
    </div> 
    <div id="footer">footer</div>    
</div> 

</body>

</html> 
```

**CSS：**

```
html,body {
    background:gray;
    margin:0;
    padding:0;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}

#container {
    height:100%;
    position:absolute;
    width:100%;
}

#header {
    background:#FF1493;
    top:0;
}

#footer {
    background:#87CEEB;
    bottom:0;
}
#header, #footer {
    position:absolute;
    width: 100%;
    height: 1.5em;
}

#contentWraper {
    position: absolute;
    background: black;
    width: 100%;
    top: 1.5em;
    bottom: 1.5em;
}

#content {
    background:lightgray;
    height:100%;
    width:100%;
}

#leftPanel {
    vertical-align: top;
    background:#F5DEB3;
    width:100px;
    display: inline-block;
    height: 100%;
    min-height: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
}

#rightPanel {
    background:#9ACD32;
    display: inline-block;
    height: 100%;
    left: 100px;
    right: 0;
    position: absolute;
} 
```

# java - 如何使用 Eclipse 创建 Java 库？

> ID：11213871
> 
> 赞同：38
> 
> 时间：2012-06-26T18:36:37.773
> 
> 标签：java, android, eclipse

一般来说，我对 Java 和 Android 编程相当陌生，但我想创建一个小型 Java 库，用于在普通（非 Android）Java 应用程序和 Android 应用程序之间共享一些代码；所以我的问题是用 Eclipse 创建普通 Java 库的最佳方法是什么？

我在任何地方都找不到从 Eclipse 创建新 Java 库项目的选项；这是否意味着我必须使用一个普通的 Java 应用程序作为我的起点？由于这也将用于普通的 Java 应用程序，因此我不能使用 Android 库。

另外，我必须设置哪些选项？

最后，由于这个库将与应用程序项目在同一个工作区中，如果我可以建立到库项目的直接链接，是否仍然必须创建一个 JAR 文件？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-26T19:05:52.467

如果您使用相同的工作区，则不得创建任何库。

**选项1：只使用源**

在具有依赖项的项目的属性中，您可以添加另一个源文件夹：

*属性 > Java 构建路径 > 选项卡：源 > 添加文件夹...*

在项目选项卡中，您也可以将整个项目“添加”到另一个项目。有很多方法可以实现你的目标。

**选项 2：创建库并将其添加到 Build-Path**

添加一个现有的 Jar（你自己的库）：

如果它在工作区中：

*属性 > Java 构建路径 > 选项卡：库 > 添加 JAR...*

如果它在驱动器上的某个地方：

*属性 > Java 构建路径 > 选项卡：库 > 添加外部 JAR...*

**将源文件夹导出为库：**

*源文件夹的上下文菜单 > 导出 > Jar 文件*

有两种类型：可执行罐和“普通”罐。您不需要可执行的 Jar。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T18:42:22.960

Java 库基本上是一组 JAR 文件。因此，您可以做的是根据您的源代码生成一个 JAR，并将其作为外部 JAR 添加到您的 Android 和非 Android 项目的 Java 构建路径中。

# java - 将 xml 表示为 java 类

> ID：11213872
> 
> 赞同：3
> 
> 时间：2012-06-26T18:36:39.710
> 
> 标签：java, xml

可能有人问过这个问题。我是 xml 到 java 类转换的新手。我有一个这样的xml：

```
<Root>
    <Book name="harel" price="5" />
    <Book name="xml" price="9" />
</Root> 
```

有没有办法为这样的结构动态生成java类？一个小的更正，我没有用于 xml 的 xsd

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T18:45:25.563

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

> 有没有办法为这样的结构动态生成java类？

JAXB 实现提供了从 XML 模式生成 Java 模型的能力。从 Java SE 6 开始包含在 JDK 中的参考实现可在以下位置获得：

```
<JAVA_HOME>/bin/xjc 
```

可以在此处找到从 XML 模式生成对象模型的示例：

*   [http://blog.bdoughan.com/2010/09/processing-atom-feeds-with-jaxb.html](http://blog.bdoughan.com/2010/09/processing-atom-feeds-with-jaxb.html)

> 一个小的更正，我没有用于 xml 的 xsd

如果您没有 XML 模式，您可以找到一个实用程序来从 XML 文档生成 XML 模式：

*   [有什么工具可以从 XML 实例文档生成 XSD 模式？](https://stackoverflow.com/questions/74879/any-tools-to-generate-an-xsd-schema-from-an-xml-instance-document)

或者从代码开始。

* * *

**从代码开始**

您还可以从代码开始并注释您的模型以映射到现有的 XML 结构。

**根**

```
package forum11213872;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="Root")
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlElement(name="Book")
    private List<Book> books;

} 
```

**书**

```
package forum11213872;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Book {

    @XmlAttribute
    private String name;

    @XmlAttribute
    private int price;

} 
```

**演示**

```
package forum11213872;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11213872/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输入.xml/输出**

```
<Root>
    <Book name="harel" price="5" />
    <Book name="xml" price="9" />
</Root> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T18:38:48.700

是的，请参阅 castor 框架 (http://www.castor.org/) 或 jaxb (http://www.oracle.com/technetwork/articles/javase/index-140168.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T18:39:27.607

试试 Java Castor。您可以指定 xsd 并将其转换为对象。还有一个 Eclipse 插件。

[http://www.castor.org/](http://www.castor.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T18:40:35.097

看看[XStream](http://xstream.codehaus.org/)。

它在 XML 和 Java 之间以及 Java 和 XML 之间进行转换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T18:48:43.550

使用[JAXB](http://jaxb.java.net)，它现在包含在 JavaSE 中，您可以使用 XJC 从 XSD 生成类。但是，如果您真正的意思是动态的，因为直到运行时才知道 XML 的结构，您将需要使用[JDOM](http://www.jdom.org/)之类的东西。

# browser - 用于在浏览器中设计的网格覆盖

> ID：11213873
> 
> 赞同：-3
> 
> 时间：2012-06-26T18:36:43.977
> 
> 标签：browser, overlay

有谁知道用于在浏览器中设计和排列元素的网格覆盖？最好是您可以从 1140 像素调整到包装器大小的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:21:51.303

假设您的意思是在浏览器中叠加，我刚刚看到 Firefox 的[Web Developer 扩展](http://chrispederick.com/work/web-developer/)能够显示网格叠加。在扩展程序的`Miscellaneous`菜单下，有一个`Show Ruler`选项。这似乎是测量像素大小的一种非常有用的方法。

# android - android.database.sqlite.SQLiteException：靠近“mimetype”

> ID：11213876
> 
> 赞同：0
> 
> 时间：2012-06-26T18:36:49.200
> 
> 标签：android, exception, syntax-error, android-contacts

大家好。

当我尝试过滤 autocompleteTextView 的名称时出现错误。我不知道出了什么问题。出现的警告是

**android.database.sqlite.SQLiteException：靠近“mimetype”：语法错误：，编译时：SELECT display_name，_id FROM view_data_restricted data WHERE (1) AND (data1 =? mimetype='vnd.android.cursor.item/group_membership' AND display_name like '%rui%') ORDER BY display_name**

这是我的代码：

```
cursorContactosGrupos = getContentResolver().query(ContactsContract.Data.CONTENT_URI,
   new String[]{ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME,    ContactsContract.CommonDataKinds.GroupMembership._ID},
   ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID + " =? " + Data.MIMETYPE + "='" + ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE + "' AND " + ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME + " like '%" + filter + "%'" ,
new String[]{String.valueOf(tempCurs.getLong(0))},
ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME
); 
```

有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:40:56.733

看起来您`AND`在 MIME 类型参数之前需要另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:41:03.723

之前没有`AND`mimetype。

# android - Android Paypal 与 MECL 问题的集成

> ID：11213878
> 
> 赞同：0
> 
> 时间：2012-06-26T18:37:37.733
> 
> 标签：android, paypal, webserver, payment-gateway

我正在尝试通过 PayPal 在 Android 应用程序上执行付款。

为此，我认为最实用的解决方案是 MECL。但是，文档声称我必须拥有自己的网络服务器，并且我必须从我的移动应用程序向我的网络服务器发送一个请求，然后将该请求从我的网络服务器转发到 PayPal 网络服务器。

我的两个问题是：1）有没有办法使用 MECL 在移动设备上存储凭据并从设备向 PayPal 发送直接请求？2) 是否有另一个 PayPal 库允许直接从移动设备发送 PayPal 请求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:21:46.950

您可能已经知道...使用 setExpressCheckout 方法将凭据发送到 PayPal 以处理支付操作并返回响应作为密钥并在您的 Web 服务器页面中符合（批准）交易，您必须使用 getExpressCheckout 方法来符合交易并基于在您的返回 URL 上，它返回到您的 Web 服务器页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:25:11.820

如果您不想为 PayPal 应用内交易使用额外的网络服务器，您可以使用 MPL

[https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_MPL_Developer_Guide_and_Reference_Android.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_MPL_Developer_Guide_and_Reference_Android.pdf)

# ios - 后台应用程序/双击主页按钮时音频崩溃

> ID：11213887
> 
> 赞同：2
> 
> 时间：2012-06-26T18:38:09.257
> 
> 标签：ios, ios5, avfoundation, avplayer

我有一个使用 AVPlayer 播放音频的应用程序。我通过将音频类别设置为启用背景音频`AVAudioSessionCategoryPlayback`并将所需的`UIBackgroundModes`设置添加到`audio`info.plist 中。

在 iOS 5 上，当您按下主页按钮时，应用程序会进入后台，并且音频仍会播放一段时间，但是当我双击主页按钮时，整个设备会锁定 10 秒左右，并且音频最终会停止。

但是，该应用程序仍在运行，因为我可以启动它并查看应用程序的状态。不幸的是，音频系统似乎很糟糕，因为任何后续操作通常都会导致崩溃。

当音频停止时，我在设备的控制台中看到以下内容：

```
Jun 26 12:39:28 unknown SpringBoard[15] <Warning>: Unable to deliver SBApplicationNotificationStateChanged notification to port com.apple.springboard.appstatechanged: (ipc/send) timed out
Jun 26 12:39:53 unknown mediaserverd[25406] <Error>: <<<< FIGSERVER >>>> FigPlayerRemoteServer_KillAndForceCrashReport: RPCTimeout message received to terminate [25406] with reason 'fig rpc timeout -- FigSharedRemote_VolumeCategoryForAudioCategory'
Jun 26 12:39:53 unknown ReportCrash[25468] <Notice>: Saved crashreport to /Library/Logs/CrashReporter/mediaserverd-2012-06-26-123953.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0
Jun 26 12:39:53 unknown mediaserverd[25406] <Error>: <<<< FIGSERVER >>>> FigPlayerRemoteServer_KillAndForceCrashReport: RPCTimeout message received; stackshot generated
Jun 26 12:39:53 unknown mediaserverd[25406] <Error>: <<<< FIGSERVER >>>> FigPlayerRemoteServer_KillAndForceCrashReport: TERMINATING our process [25406]
Jun 26 12:39:53 unknown com.apple.launchd[1] <Notice>: (com.apple.mediaserverd) Exited: Killed: 9
Jun 26 12:39:54 unknown com.apple.mediaserverd[25469] <Notice>: 2012-06-26 12:39:54.083477 PM [AirTunes] HAL plugin started
Jun 26 12:39:54 unknown kernel[0] <Debug>: launchd[25469] Builtin profile: mediaserverd (sandbox)
Jun 26 12:39:54 unknown mediaserverd[25469] <Error>: 12:39:54.317795 com.apple.AVConference: /SourceCache/GameKitServices/GameKitServices-344.21/AVConference.subproj/Sources/AVConferenceServer.m:1867: AVConferenceServerStart 
```

这似乎只影响 iOS 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:51:39.317

事实证明这是我的代码中的一个问题，因为它共享多个`AVPlayer`实例，导致音频系统有时崩溃。移除第二个玩家修复了这个错误。 */叹*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:39:23.697

我遇到了同样的问题，尽管我只需要使用 2 个 AVPlayer，因为我必须进行淡入淡出。在监控 Instruments 中的分配后，发现 AVPlayer 没有被正确释放（它们仍然“活着”）。我不恰当地释放它们。在我修复它并且它们被正确释放之后，问题就消失了。

# cakephp - CakePHP 附加到 Containable/Contain

> ID：11213890
> 
> 赞同：0
> 
> 时间：2012-06-26T18:38:14.160
> 
> 标签：cakephp, cakephp-1.2

**已经声明时如何附加到包含？**

1.  我称之为常规包含/查找：

    ```
    // A controller
    $this->Site->contain(array('User'));
    $site = $this->Site->find(); 
    ```

2.  我想自动添加要包含的内容。我正在考虑通过添加到 find 函数来在模型中执行此操作......如下所示：

    ```
    // Site.php Model
    function find($conditions = null, $fields = array(), $order = null, $recursive = null) {
        if(!isset($this->containVariable) || !in_array('Box', $this->containVariable)) {
            $this->containVariable[] = 'Box';
        }
        parent::find($conditions, $fields, $order, $recursive);
    } 
    ```

为了使这项工作（自动添加模型*框*以包含），我只需要`$this->containVariable`通过一个函数或变量进行更改，该函数或变量具有一个包含已包含内容的数组。在这种情况下，这将返回`array('User')`. 已经声明时如何附加到包含？是否存在包含包含的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:02:15.673

除非有人能找到另一种解决方案，否则我得出的结论是：

不幸的是，我试图做的似乎不可能如何设计可包含性。我必须手动将我的模型添加到每个`->contain()`调用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:26:16.943

我修复了可能与多个查找调用的持久包含类似的问题（使用 cakephp 1.3）。在为某个模型声明包含后，将为该模型设置：

```
$this->Behaviors->Containable->runtime 
```

-其中 $this 是一些模型对象。'runtime' 是一个数组，它本质上包含包含信息。所以我相信你很接近，但不是：

```
$this->containVariable[] = 'Box' 
```

你将会拥有：

```
$this->Behaviors->Containable->runtime['someModel']['contain'][] = 'Box' 
```

但是，为了能够指定的不仅仅是模型，您必须设置为如下处理（可能相应地构建一个方法）：

```
$this->Behaviors->Containable->runtime['someModel']['contain'][] = $model_contain_array 
```

$model_contain_array 只是我刚刚为数组选择的任意名称，该数组包含您要为特定模型添加的包含信息。$model_contain_array 的一个例子可能是：

```
array('modelName' => array(
    'fields' => array('id', 'other'),
    'otherModelName' => array(
        'fields' => array('id', 'otherfield', 'etc')
    )
) 
```

# regex - 在 sed 中使用正则表达式模式转换文件

> ID：11213891
> 
> 赞同：1
> 
> 时间：2012-06-26T18:38:15.620
> 
> 标签：regex, sed

我想把这个（Mitarbeiter.csv）：

```
Max;Mustermann;02.03.1964;501;GL;Prokurist
Monika;Mueller;02.02.1972;500;Sek;Chefsekretaerin
Michael;Maier;06.07.1985;617;Aquise;- 
```

进入这个（header-content.html）：

```
<tr><td>Max</td><td>Mustermann</td><td>501</td></tr>
<tr><td>Monika</td><td>Mueller</td><td>500</td></tr>
<tr><td>Michael</td><td>Maier</td><td>617</td></tr> 
```

通过使用 sed

我试过了：

```
sed 's#^\([^\]+\);\([^\]+\);[^\]+;\([^\]+\);.*$#<tr><td>\2</td><td>\1</td><td>\3</td></tr>\n#g' <Mitarbeiter.csv >header-content.html 
```

但这无济于事。输出与 Mitarbeiter.csv 相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:44:50.293

`awk`可能更适合您正在尝试做的事情：

```
awk -F\; '{printf "<tr><td>%s</td><td>%s</td><td>%s</td></tr>\n",$1,$2,$4}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T19:03:29.177

```
sed -r -ne 's:^([^;]+);([^;]+);[^;]+;([^;]+);.*:<tr><td>\1</td><td>\2</td><td>\3</td></tr>:p' 
```

或者，如果您使用的是 OSX 或旧版本的 FreeBSD 或 NetBSD，请将`-r`with替换`-E`为使用扩展的正则表达式。

如果您想跳过使用 ERE 以实现可移植性（即您使用的是 Solaris 或 HP/UX 等），则正则表达式可能是：

```
^\([^;][^;]*\);\([^;][^;]*\);[^;]*;\([^;][^;]*\);.* 
```

请注意，这些都需要每个字段至少 1 个字符。如果允许字段为空......好吧，在我们花更多时间在可能不必要的事情上之前更新您的问题。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:44:48.723

为什么要使用 sed？

```
awk '{print "<tr><td>"$1"</td><td>"$2"</td><td>"$4"</td></tr>}
    ' IFS=';' Mitarbeiter.csv > header-content.html 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T19:01:31.843

几点，

1.  您需要`-r`扩展正则表达式模式的开关
2.  sed是贪心的，甚至`-r`不支持非贪心匹配
3.  `g`flag 是一个特殊的[get flag](http://www.grymoire.com/Unix/Sed.html#uh-57)，你可能不想要这个

所以你的命令应该是：

```
sed -r 's#^([^\;]+);([^\;]+);[^\;]+;([^\;]+);.*$#<tr><td>\1</td><td>\2</td><td>\3</td></tr>#' < Mitarbeiter.csv > header-content.html 
```

请注意，您的项目中不能有分号，因为这是字段分隔符。如果你是一个真正的 csv 文件，这将不起作用，因为它**不会忽略**转义的分号，无论是用引号还是转义字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T19:05:42.327

如果你坚持使用sed，你可以试试：

```
$ p='\([^;]*\);'
$ sed "s@$p$p$p$p.*@<tr><td>\1</td><td>\2</td><td>\4</td></tr>@" \
         Mitarbeiter.csv > header-content.html 
```

# sql - DoCmd.SetWarnings 和 CurrentDB.Execute 有什么区别

> ID：11213892
> 
> 赞同：14
> 
> 时间：2012-06-26T18:38:19.447
> 
> 标签：sql, ms-access, error-handling, vba

在[对此答案](https://stackoverflow.com/a/11210977/190829)的评论中，Remou 写道

`CurrentDB.Execute "insert sql here"`

好于

`DoCmd.SetWarnings = 0
DoCmd.RunSQL "insert sql here"`

由于 Access 产生的内置警告。我试图理解其中的区别。

如果它们都掩盖了错误，为什么第一个比第二个更可取？这里有什么最佳实践吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T18:41:44.077

它们不会同时掩盖错误。DoCmd.SetWarnings 掩盖错误并且是系统范围的，不限于您正在使用的单个应用程序。`DoCmd.SetWarnings False`没有相应的 `DoCmd.SetWarnings True`将意味着操作查询将在 PC 上的任何 Access 应用程序中运行而没有任何提示。

Execute 确实会抛出警告，即您需要的警告，例如查询未能执行，但不会给出您可能不需要的警告，例如“您确定要运行此查询吗”。

[在这个线程](http://bytes.com/topic/access/answers/198156-check-status-setwarnings)中，Access MVP Allen Browne 说他不使用设置警告。

顺便说一句，我通常建议使用 CurrentDB 的实例，因为这将允许您返回记录计数，除其他外，因此：

```
Set db = CurrentDB
db.Execute sSQL, dbFailOnError 
```

# iphone - 从地址簿获取 twitter 用户

> ID：11213898
> 
> 赞同：0
> 
> 时间：2012-06-26T18:38:43.047
> 
> 标签：iphone, objective-c, twitter, abaddressbook

我正在尝试从通讯录中的联系人获取 Twitter 用户名，但我无法做到

我正在使用我发现“谷歌搜索”的这段代码：

```
- (NSString*)getTwitterUsernameFromRecord:(ABRecordRef)record {
    NSString * twitterUsername = nil;

    ABMultiValueRef socials = ABRecordCopyValue(record, kABPersonSocialProfileProperty);

    if (!socials) {
        return nil;
    }

    CFIndex socialsCount = ABMultiValueGetCount(socials);

    for (int k=0 ; k<socialsCount ; k++) {
        CFDictionaryRef socialValue = ABMultiValueCopyValueAtIndex(socials, k);
        if(CFStringCompare( CFDictionaryGetValue(socialValue, kABPersonSocialProfileServiceKey), kABPersonSocialProfileServiceTwitter, 0)==kCFCompareEqualTo) {
            twitterUsername = (NSString*) CFDictionaryGetValue(socialValue, kABPersonSocialProfileUsernameKey);
        }
        CFRelease(socialValue);

        if(twitterUsername)
            break;
    }
    CFRelease(socials);

    return twitterUsername;
} 
```

我已经使用 if 来验证“socials”数组是否为零，因为在尝试获取“socials”数组计数时出现异常。

我已经在模拟器和带有联系人的真实设备中尝试了此代码，其中填充了 twitter 信息，但我得到的“社交”数组始终为零。我从记录中得到了错误的财产？有什么帮助吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:14:26.653

除了需要桥接 twitter 用户名（这只是 ARC 的事情）之外，您的功能几乎按原样对我有用。你是如何访问通讯录的？

当我使用此代码调用您的函数时：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);

CFIndex contactCount = ABAddressBookGetPersonCount(addressBook);

for( int i = 0; i<contactCount; i++ )
{
    ABRecordRef ref = CFArrayGetValueAtIndex(people, i);
    NSString *twitterHandle = [self getTwitterUsernameFromRecord:ref];
    if (twitterHandle) {
        NSLog(@"record %d has twitter name %@", i, twitterHandle);
    }
} 
```

我得到这个控制台输出：

```
2012-06-26 12:09:40.864 AddressBookTest[2246:707] record 57 has twitter name alexshepard 
```

# oop - 高内聚如何帮助我们减少耦合？

> ID：11213899
> 
> 赞同：0
> 
> 时间：2012-06-26T18:38:48.190
> 
> 标签：oop, coupling, design-principles, cohesion

承担方法`M1`并`M2` 具有密切相关的职责

*第一个例子：*

**如果**

•`M1`和`M2`在类中定义`A`（因此类`A`是高度内聚的）

• 类`B`用途`A.M1`和类`C`用途`A.M2`

**然后**

•`A`与`B`和`C`类耦合

• 更改 will 的签名 `M1`只需要更改 in `B`，而不需要更改`C`

*第二个例子：*

**如果**

•`M1`在类中定义`A1`（因此`B`与 耦合`A1`）

•与`M2`类一起定义`A2`（因此`C`与 耦合`A2`）

**然后**

• 更改 will 的签名`M1`只需要更改 in `B`，而不需要更改`C`

a）据我了解，上一个示例中的类并不比第一个示例中的类更耦合！还是我错过了什么？

b）据我所知，第一个示例中的类比第二个示例中的类更松散耦合，前提是：

*   我们假设更改 的签名`M1`也需要我们更改 的签名`M2`，但我不认为这种情况经常发生？！

*   或者如果两者都`M1`对`M2`相同类型的数据 T1 进行操作，那么将 T1 替换为 T2 将需要同时更改`M1`和`M2`？！

*   或者，如果我们假设由于`M1`并且具有密切相关的责任，那么改变通常需要`M2`改变的机会要大得多（即使不直接或间接调用）？！`M1``M2``M1``M2`

*   或者，如果我们假设由于`M1`并且具有密切相关的职责，那么某些类需要两者的`M2`可能性要大得多（因此在单个类中具有and会减少耦合）？！`M1``M2``M1``M2`

`M1`c) 定义and `M2`within `A`（而不是定义`M1`within`A1`和`M2`within ）是否有任何其他原因`A2`会减少耦合？

注意 - 我知道我们应该拥有高度内聚的模块，因为它更易于维护和可重用

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:14:10.250

是的，它确实。您缺少的是，如果 ClassA 具有内聚性，则更改 M1 将导致 ClassB 访问 ClassA 中的某些其他方法。它增加了维护，因为您不必修改 ClassA 本身中的其他模块（方法和变量）。

当我们将一个类称为内聚类（比如 ClassA）时，我们的意思是我们可以轻松地使用该类的目的，而不必根据 ClassA 的要求创建我们的调用者类（ClassB）。因此，ClassB 不依赖于 ClassA，从而降低了内聚性。

不要从方法的角度考虑凝聚力。方法不称为内聚，类是。

# git - 签出旧提交后如何查看新提交

> ID：11213903
> 
> 赞同：0
> 
> 时间：2012-06-26T18:39:14.340
> 
> 标签：git

我想知道在结帐后如何查看较旧的提交。通过eclipse git插件我发现没有问题。但是当我尝试'git whatchanged'时通过命令它只是给了我当前结帐的所有先前提交。我无法查看较新的提交。谁能告诉我即使我们签出一些较旧的提交，获取所有提交的命令是什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:44:05.900

```
git log --all 
```

将向您展示所有参考资料。

```
git log HEAD@{1} 
```

将向您显示您在 1 次结帐前结帐的所有内容（请参阅参考日志）

```
git log some-branch-name 
```

将显示从特定分支提示的提交开始的每个提交。

这些参数对`gitk`.

# rest - 在 ASP.Net Web API 中，如何伪造 PUT 和 DELETE？

> ID：11213905
> 
> 赞同：4
> 
> 时间：2012-06-26T18:39:15.807
> 
> 标签：rest, asp.net-web-api, http-delete, http-put

我正在试验 ASP.Net Web API，按照惯例，它将控制器方法拆分为 Restful 风格的 Get()、Put、Post 和 Delete。我的问题是如何处理可能来自非 Ajax 浏览器请求的 PUT 和 DELETE 请求。

所以，假设我有 id = 123 的 foobar。正常的获取请求是

```
/foobars/123 
```

要删除该项目，Restful 方法是发出：

```
DELETE /foobars/123 
```

但是，如果您的请求来自非 Ajax 浏览器请求`PUT`，`DELETE`则它们不是浏览器标准，并且没有足够的主要浏览器支持值得信任。所以一个普遍接受的解决方法是：

```
POST /foobars/123?_method=DELETE (source: Restful Web Services) 
```

对于新的 ASP.Net Web API，是否有解决此问题的最佳实践/通用方法？我想要的是任何带有 a 的东西都`_method=DELETE`被路由到`DELETE()`控制器中的方法并被`_method=PUT`路由到控制器的 PUT() 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:37:59.207

您可以使用`DelegatingHandler`.

所以你会编码：

```
public class HttpMethodHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var queryString = HttpUtility.ParseQueryString(request.RequestUri.Query);
        if(!string.IsNullOrEmpty(queryString["_method"]))
        {
            request.Method = new HttpMethod(queryString["_method"]);
        }
        return base.SendAsync(request, cancellationToken);
    }
} 
```

然后将处理程序添加到管道中。我有一个[博客](http://byterot.blogspot.co.uk/2012/05/aspnet-web-api-series-messagehandler.html)。

# python - 子模板中的第二个样式表/覆盖样式表

> ID：11213910
> 
> 赞同：1
> 
> 时间：2012-06-26T18:39:36.287
> 
> 标签：python, css, django, django-templates

我有一个网站，我正在与 python 和 django 放在一起。我有一个模板 html 页面，`Speakers.html`扩展`Base.html`. `Base.html`有样式表`base.css`。

`Speakers.html`正在显示`base.css`应有的样式，我的问题是我想`Speakers.html`从另一个样式表中获得额外的样式，`speakers.css`.

我一直试图弄清楚但`speaker.css`似乎没有应用，*事实上我刚刚在 cmd 输出中注意到文件 speaker.css 根本没有被加载。*

我尝试将它放在一个块中，这是您现在在下面看到的代码。我不得不重复`{% load static %}`以消除有关它期望 endblock 的错误，但它似乎没有产生任何影响。

**Base.html**

```
<!DOCTYPE HTML>
<html lang="en">

<head>
    <title>Base.Html</title>
    {% load static %}
    <link rel="stylesheet"  type="text/css" href="{% static "CSS/base.css" %}" />
    {% block additionalcss %}{% endblock %}
</head>

<body>

...ect 
```

**演讲者.html**

```
<!-- extending works -->
{% extends "Base.html" %} 

 <!-- Now i'm trying to load an additional stylesheet -->
{% block additionalcss %}
{% load static %}
<link rel="stylesheet"  type="text/css" href="{% static "CSS/speakers.css" %}" />
{% endblock %}

{% block currentpage_content %}
<h2>Guest speakers at the event</h2>

<p> This text would be red if speakers.css was applying properly </p>
...ect 
```

出于测试目的，我在 Speakers.css 中添加了以下规则：

```
*
{
color: red;
} 
```

因此，我认为 Speakers.html 上的文本如果正常工作，应该都是红色的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:53:49.070

尝试`blocks`在模板中使用。

就像是：

**Base.html**

```
<!DOCTYPE HTML>
<html lang="en">

<head>
    <title>Base.Html</title>
    {% load static %}

    {% block css %}{% endblock %}
    <link rel="stylesheet"  type="text/css" href="{% static "CSS/base.css" %}" />
</head>

<body>

...ect 
```

**演讲者.html**

```
<!-- extending works -->
{% extends "Base.html" %} 

{% block css %}
{% load static %}
<link rel="stylesheet"  type="text/css" href="{% static "CSS/speakers.css" %}" />
{% endblock %}

{% block currentpage_content %}
<h2>Guest speakers at the event</h2>

<p> This text would be red if speakers.css was applying properly </p>
...ect 
```

通过在父级中定义块然后在子级中指定它们，css 文件将被插入到您的模板中。

# svg - Raphael - 序列化后的变换

> ID：11213912
> 
> 赞同：1
> 
> 时间：2012-06-26T18:39:46.277
> 
> 标签：svg, raphael, transform

我正在使用 Raphael 绘制一些路径。每条路径都有一个关联的矩形 [容器] 的大小和边界框的位置。我正在使用容器来拖动两个形状。

在移动回调中，我更新了两个位置，使它们一起移动。

在我序列化之前，这一切都很好。我只是序列化路径，然后在反序列化后动态创建容器。

立即转换为 json 并返回后，一切看起来都很好。我可以打印出路径的当前变换，它看起来是正确的。在此之后对路径进行任何变换会导致路径被重置并移动到 0,0。

这是一个显示问题 [的小提琴。](http://jsfiddle.net/acabler/nX8BS/25/)

如果移动矩形，您可以看到两个对象一起移动。

如果单击“保存/加载”，一切看起来都很好，并且路径打印相同。

如果现在拖动，路径将重置为 0,0。打印显示变换已从 0,0 重置。

我试图找出如何使路径像序列化之前那样移动。在此过程中是否丢失了某些东西？或者是否有需要更新的内部状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:55:48.750

您需要在拖动开始时捕获元素的初始变换偏移，并将其用作拖动-移动变换的基础。考虑以下：

```
var start_x, start_y;
cont.drag(function(x, y, e)
    {
        p.transform('t' + ( start_x + x ) + ',' + ( start_y + y ) );
        cont.transform('t' + ( start_x + x ) + ',' + ( start_y + y ) );
    },
    function( x, y )
    {
        var start_bbox = p.getBBox();
        start_x = start_bbox.x;
        start_y = start_bbox.y;
        console.log("Drag start at %s,%s", start_x, start_y );
    } ); 
```

我已经在[位于此处的小提琴](http://jsfiddle.net/kevindivdbyzero/rgNbC/)中上演了这个。

不幸的是，路径仍然存在问题 - 每次使用拖动时，它的偏移量都会增加它的边界框 y 值和 y 轴之间的差异（准确地说是 12 的差异）。我不确定这到底是从哪里来的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T00:40:23.107

Raphael.JSON 序列化存储在元素中的数据。它不保留存储在纸质对象中的临时数据，因此在调用`R.clear()`. 例如，绑定到元素的拖动事件不会被保留。

然而这里的主要问题是你的拖动功能，注意第二次拖动方块是如何从纸的左上角应用转换的。我建议使用 Raphael.FreeTransform（你已经包含在 Fiddle 中）来处理这个问题。

我编写了 Raphael.JSON 和 Raphael.FreeTransform 插件并且一直在努力解决同样的问题。我目前正在开发一个应用程序，它可以让您保存并恢复纸张的状态（类似于您正在做的事情）并且它工作正常。如果您需要任何帮助，请随时[在 Github 上打开问题](https://github.com/ElbertF/Raphael.FreeTransform/issues)。

# javascript - 在 Javascript MVC 框架中提交用户数据

> ID：11213913
> 
> 赞同：1
> 
> 时间：2012-06-26T18:39:53.953
> 
> 标签：javascript, flask, sammy.js

这是我第一次尝试使用 JavaScript MVC 框架制作 web 应用程序，我需要一些关于完成以下任务的正确方法的指示。

我正在 Flask（服务器端）和客户端上的 Sammy.js 中制作投票应用程序。我已经完美地实现了路由和视图，但我对如何将数据发送回服务器感到困惑，因为在我的案例中，“表单”被拆分为不同的视图。[这是屏幕截图](http://i.imgur.com/GtKPf.png)。您可以看到代表每个职位的候选人显示在`http://127.0.0.1:5000/#/post_id`我以 json 格式获取数据并使用 sammy 的模板呈现它的位置。

我的问题是关于存储用户投票。屏幕截图中的每个图块都有一个单选按钮，我想以某种方式获得所有用户的投票（在所有帖子中）并将它们作为查询字符串（我不确定这是否正确）发送到服务器进行记录票。

前端开发中是否有一定的方法来解决此类问题？我对这种开发模式一无所知，因为我只开发了更传统的（服务器端繁重的）应用程序。任何指针将不胜感激。非常感谢！

PS：为误导性标题道歉。我发现很难找到更具描述性的东西。

# pyqt4 - PyQt4 - “RuntimeError：底层 C/C 对象已被删除”

> ID：11213914
> 
> 赞同：4
> 
> 时间：2012-06-26T18:40:00.667
> 
> 标签：pyqt4

我不断收到这个 RuntimeError ，我不确定如何修复。这就是我想要完成的事情。当我单击 QTreeView 中的不同项目时，我想用值动态更新这个 QTableWidget。在大多数情况下，我的代码可以正常工作，除非我单击第二个项目并且我需要更新我的 QTableWidgt，即当我遇到此“RuntimeError：底层 C/C 对象已被删除”时。这是我的代码片段：

```
def BuildTable( self ):
    ...
    for label in listOfLabels :
        attr = self.refAttr[label]
        self.table.setItem(row, 0, QtGui.QTableWidgetItem( label ) )

        tableItem = QtGui.QTableWidgetItem( str(attr.GetValue()) )
        self.table.setItem(row, 1, tableItem )
        someFunc = functools.partial( self.UpdateValues, tableItem, label )                     

        QtCore.QObject.connect(self.table, QtCore.SIGNAL('itemChanged(QTableWidgetItem*)'), someFunc)   

def UpdateValues(self, tableItem, label):
    print '--------------------------------'
    print 'UPDATING TEXT PROPERTY VALUE!!!'
    print tableItem.text()
    print label 
```

编译器在“print tableItem.text()”这一行抱怨错误

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:30:00.203

我认为问题在于您正在将回调与 QTableWidget 项目绑定并建立许多连接（坏）。项目可以改变。因此，它们可以被删除，使你的回调死掉。

你想要的只是让`itemChanged`信号告诉你什么项目发生了变化，它发生的那一刻。

```
self.table = QtGui.QTableWidget()
...
# only do this once...ever...on the init of the table object
QtCore.QObject.connect(
    self.table, 
    QtCore.SIGNAL('itemChanged(QTableWidgetItem*)'), 
    self.UpdateValues
) 
```

然后在您的 SLOT 中，它将收到该项目：

```
def UpdateValues(self, tableItem):
    print '--------------------------------'
    print 'UPDATING TEXT PROPERTY VALUE!!!'
    print tableItem.text() 
```

# haskell - 行动中的懒惰？（哈斯克尔）

> ID：11213919
> 
> 赞同：3
> 
> 时间：2012-06-26T18:40:19.350
> 
> 标签：haskell, scheme, lazy-evaluation, higher-order-functions, partial-application

在*Learn You a Haskell*的第6章中，介绍了以下功能：

```
zipWith' :: (a -> b -> c) -> [a] -> [b] -> [c]
zipWith' _ [] _ = []
zipWith' _ _ [] = []
zipWith' f (x:xs) (y:ys) = f x y : zipWith' f xs ys 
```

作者给出了几个我觉得很容易理解的例子。然后这个：

```
ghci> zipWith' (zipWith' (*)) [[1,2,3],[3,5,6],[2,3,4]] [[3,2,2],[3,4,5],[5,4,3]] 
```

哪个输出`[[3,4,6],[9,20,30],[10,12,12]]`

这是懒惰评估的例子吗？我试图将 zipWith' 翻译成 Scheme（见下文）。我用“简单”的例子来工作，但不是最后一个，这让我认为 Haskell 的懒惰可能会有所作为。

```
(define zipWith
  (lambda (f listA listB)
    (cond
      ((null? listA) (quote ()))
      ((null? listB) (quote ()))
      (else (cons (f (car listA) (car listB)) (zipWith f (cdr listA) (cdr listB))))))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:45:47.583

不，虽然这个例子会被延迟评估（就像 Haskell 中的任何其他函数一样），但行为并不依赖于此。在有限列表上，它的行为与急切评估相同。当然，在无限列表上，它永远不会因急切求值而终止，但惰性求值允许您只求值所需数量的列表元素。

如果您发布用于调用最后一个示例的 Scheme zipWith 的代码，也许我们可以帮助您了解为什么它的行为不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:48:05.227

`zipWith' (*) [1,2,3] [1..]` 会（使用）懒惰地评估

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T21:11:12.793

jberryman 对我的原始帖子的评论中的[链接](http://www.phyast.pitt.edu/~micheles/scheme/scheme14.html) 提供了最全面的答案。感谢所有回复的人。

（***编辑：***正如@newacct 在评论中提到的那样，通过显式`lambda`构造可以轻松实现部分应用，`(lambda (x y) (zipWith * x y))`. Lambda 在 Scheme 中是非常*基本*的，我们*不需要*宏。）

# iphone - AudioUnit 输入示例

> ID：11213920
> 
> 赞同：4
> 
> 时间：2012-06-26T18:40:23.190
> 
> 标签：iphone, objective-c, ios, audio, audiounit

因此，我的 AudioUnit 从 iOS 中的麦克风/线路输入中获取数据时遇到了一些麻烦。我能够将所有内容设置为我认为可以的，并且它正在调用我的 recordingCallback，但是我从缓冲区中获取的数据不正确。它总是返回完全相同的东西，主要是零和随机大数。有谁知道这可能是什么原因造成的。我的代码如下。

**设置音频单元**

```
OSStatus status;

// Describe audio component
AudioComponentDescription desc;
desc.componentType = kAudioUnitType_Output;
desc.componentSubType = kAudioUnitSubType_RemoteIO;
desc.componentFlags = 0;
desc.componentFlagsMask = 0;
desc.componentManufacturer = kAudioUnitManufacturer_Apple;

// Get component
AudioComponent inputComponent = AudioComponentFindNext(NULL, &desc);
status = AudioComponentInstanceNew(inputComponent, &audioUnit);

// Enable IO for recording
UInt32 flag = 1;
status = AudioUnitSetProperty(audioUnit, 
                              kAudioOutputUnitProperty_EnableIO, 
                              kAudioUnitScope_Input, 
                              kInputBusNumber,
                              &flag, 
                              sizeof(flag));
// Disable playback IO
flag = 0;
status = AudioUnitSetProperty(audioUnit, 
                              kAudioOutputUnitProperty_EnableIO, 
                              kAudioUnitScope_Output, 
                              kOutputBusNumber,
                              &flag, 
                              sizeof(flag));

// Describe format
AudioStreamBasicDescription audioFormat;
audioFormat.mSampleRate         = 44100.00;
audioFormat.mFormatID           = kAudioFormatLinearPCM;
audioFormat.mFormatFlags        = kAudioFormatFlagsNativeFloatPacked |kAudioFormatFlagIsNonInterleaved;
audioFormat.mFramesPerPacket    = 1;
audioFormat.mChannelsPerFrame   = 1;
audioFormat.mBitsPerChannel     = 32;
audioFormat.mBytesPerPacket     = 4;
audioFormat.mBytesPerFrame      = 4;

// Apply format
status = AudioUnitSetProperty(audioUnit, 
                              kAudioUnitProperty_StreamFormat, 
                              kAudioUnitScope_Output, 
                              kInputBusNumber, 
                              &audioFormat, 
                              sizeof(audioFormat));

// Set input callback
AURenderCallbackStruct callbackStruct;
callbackStruct.inputProc = recordingCallback;
callbackStruct.inputProcRefCon = (__bridge void*)self;
status = AudioUnitSetProperty(audioUnit, 
                              kAudioOutputUnitProperty_SetInputCallback, 
                              kAudioUnitScope_Global, 
                              kInputBusNumber, 
                              &callbackStruct, 
                              sizeof(callbackStruct));
status = AudioUnitInitialize(audioUnit); 
```

**输入回调**

```
static OSStatus recordingCallback(void *inRefCon, 
                                  AudioUnitRenderActionFlags *ioActionFlags, 
                                  const AudioTimeStamp *inTimeStamp, 
                                  UInt32 inBusNumber, 
                                  UInt32 inNumberFrames, 
                                  AudioBufferList *ioData) {

    AudioBufferList bufferList;
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0].mDataByteSize = 4;
    bufferList.mBuffers[0].mNumberChannels = 1;
    bufferList.mBuffers[0].mData = malloc(sizeof(float)*inNumberFrames); //
    InputAudio *input = (__bridge InputAudio*)inRefCon;

    OSStatus status;

    status = AudioUnitRender([input audioUnit], 
                             ioActionFlags, 
                             inTimeStamp, 
                             inBusNumber, 
                             inNumberFrames, 
                             &bufferList);

    float* result = (float*)&bufferList.mBuffers[0].mData;

    if (input->counter == 5) {
        for (int i = 0;i<inNumberFrames;i++) {
            printf("%f ",result[i]);
        }
    }
    input->counter++;
    return noErr;
} 
```

任何人都曾遇到过类似的问题或在我的代码中看到明显错误的地方。提前感谢您的帮助！

我将所有这些都基于[Michael Tysons Core Audio RemoteIO 代码](http://atastypixel.com/blog/using-remoteio-audio-unit/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:25:06.983

如果我没记错的话，您从回调中的音频缓冲区获得的样本不是浮点数，它们是 SInt16。尝试像这样铸造样本：

```
SInt16 *sn16AudioData= (SInt16 *)(bufferList.mBuffers[0].mData); 
```

这些应该是最大值和最小值：

```
#define sn16_MAX_SAMPLE_VALUE 32767
#define sn16_MIN_SAMPLE_VALUE -32768 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:23:21.443

我基本上试图用非常相似的代码做同样的事情，但使用`AudioGraph()`. 我遇到了同样的问题，麦克风的输出数据为零，直到我添加了行才能让它工作

```
Status = AUGraphConnectNodeInput(graph, ioNode, 1, ioNode, 0); 
```

由于您没有使用图表，因此您需要`AudioUnitSetProperty()`使用`kAudioUnitProperty_MakeConnectio`n 调用并传递并传递完整的 AudioUnitConnection 结构

# c# - 我可以从另一个 AppDomain 将类型实例化为“动态”吗？

> ID：11213922
> 
> 赞同：13
> 
> 时间：2012-06-26T18:40:26.257
> 
> 标签：c#, dynamic, appdomain

我正在尝试将来自不同程序集（在构建时未知）的类型加载为“动态”并在该类型上执行方法。我的目标是完全断开“插件”与父应用程序的连接，这样就不需要任何共享代码或通用接口类型。该接口通过加载类型上的预期方法签名来暗示。

这有效：

```
dynamic myObj = Assembly.Load("MyAssembly").CreateInstance("MyType");
myObj.Execute(); 
```

但是，这会将类型及其所有相关程序集加载到当前 AppDomain 中。我想修改它以允许我在单独的 AppDomain 中做同样的事情。

这有效，但不使用 dynamic 关键字，我需要知道我正在实例化的显式类型才能调用 Execute 方法：

```
var appDomain = AppDomain.CreateDomain(domainName, evidence, setup);
var myObj = appDomain.CreateInstanceAndUnwrap(assembly, type);
typeof(IMyInterface).InvokeMember("Execute",  BindingFlags.InvokeMethod, null, myObj); 
```

这基本上是我的目标案例，我一直试图让这样的事情起作用：

```
dynamic myObj = ad.CreateInstanceAndUnwrap(assembly, type);
myObj.Execute(); 
```

我一直以带有消息“'System.MarshalByRefObject'不包含'Execute'的定义”的RuntimeBinderException结束。这条消息是有道理的，确保它不包含“执行”的定义，但我知道我正在实例化的类型确实包含一个“执行”方法。我想透明代理在这里发生了一些事情，阻止了它的工作，但我不确定是什么。

我试图实例化的实际类如下所示：

```
[Serializable]
public class MyClass : MarshalByRefObject {
  public void Execute() {
    // do something
  }
} 
```

我也尝试过使用共享界面（不是我的主要目标，但我试图先解决这个问题），所以它看起来像：

```
[Serializable]
public class MyClass : MarshalByRefObject, IPlugin {
  public void Execute() {
    // do something
  }
} 
```

其中 IPlugin 是父应用程序中的已知类型，并且插件在构建时具有适当的引用，但这似乎也不起作用。

我猜在这一点上，不可能在 AppDomain 边界上将类型加载为动态。

有没有办法让它真正发挥作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T20:34:14.473

正如[leppie 指出](https://stackoverflow.com/questions/11213922/can-i-instantiate-a-type-as-dynamic-from-another-appdomain#comment14725171_11213922)的那样，您必须实现[`IDynamicMetaObjectProvider`接口](http://msdn.microsoft.com/en-us/library/system.dynamic.idynamicmetaobjectprovider.aspx)来包装返回给您的代理，然后您可以在其上使用*make*`dynamic`调用。

 *在您的实现中，您希望采用包装的代理并将所有调用转发到[class](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.remotingservices.aspx)上的静态[`ExecuteMessage`方法](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.remotingservices.executemessage)，这将采用您的代理以及[接口](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.imethodcallmessage)实现。[`RemotingServices`](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.remotingservices.aspx)[`IMethodCallMessage`](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.imethodcallmessage)

请注意，实现`IMethodCallMessage`接口并非易事。此外，您必须正确解释[`IMethodReturnMessage`接口](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.imethodreturnmessage%28v=vs.100%29.aspx)实现以正确获取返回值`ref`和`out`参数（如果有）。

也就是说，提供一个*只*包含一个供客户端和服务器假设的接口的程序集通常是一个更好的主意。如果在服务器端以任何方式更改方法，即使客户端使用`dynamic`，您*仍然*必须更改调用站点以适应更改。至少使用该接口，您可以获得*某种*类型的编译时检查，这总是比运行时错误更受欢迎。*

# c# - ReportViewer 使用的数据集不使用 App.Config 中 ConnectionString 的凭据

> ID：11213923
> 
> 赞同：0
> 
> 时间：2012-06-26T18:40:27.030
> 
> 标签：c#, sql-server, reportviewer, rdlc

我有一个用 C# 编写的 Windows 窗体应用程序，该应用程序的一部分有一个使用 RDLC 报告和 ReportViewer 控件的报告表单。

为了创建报表，我首先为每个报表创建了一个 DataSet 并向 DataSet 添加了一个 TableAdapter。我使用 TableAdapter 向导为报表指定查询，并选择了一个已在 App.Config 中定义并在应用程序其他地方使用的 ConnectionString。

在我的开发盒上一切正常，但是当我将应用程序移动到数据库密码与我的开发盒不同的生产环境时，除了“sa”密码无效之外，报告都无法运行。

现在，密码已在生产中 app.config 的 ConnectionString 中正确设置。我在应用程序的其他任何地方都使用相同的 ConnectionString，包括登录，所以我知道 sa 密码设置正确。

在我看来，当我使用向导将 TableAdapter 添加到 DataSet 时，它要求我选择一个连接（我选择了 app.config 中已经存在并在应用程序其他地方使用的现有连接），它必须将它存储在某个地方，而不是总是从 app.config 中读取它。还是我误解了什么？

我只希望每个带有 TableAdapter 的 DataSet 能够使用来自 app.config 的连接字符串，其中包括用户名和密码。

有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:56:01.143

在调用 TableAdapter 上的 Fill 方法之前，我通过执行以下操作解决了这个问题......

```
this.EMPLOYEETableAdapter.Connection.ConnectionString =
  ConfigurationManager.ConnectionStrings["MCLabor"].ToString(); 
```

这行得通。不过这有点蹩脚，它确实证明了当您使用向导创建 TableAdapter 并从 App.Config 中选择现有连接（从向导中的 Connections 下拉框中）时，它实际上并没有加载该连接运行时来自 app.config 的字符串。有谁知道为什么，或者处理这个问题的真正方法是什么？我不喜欢为每个报表的每个 DataSet 手动设置每个 TableAdapter 的连接字符串。

# java - 依赖 JAR 和源 JAR？

> ID：11213925
> 
> 赞同：0
> 
> 时间：2012-06-26T18:40:38.023
> 
> 标签：java, jar, terminology

什么是依赖 JAR，什么是源 JAR？为什么需要它们？我在这句话中看到了：依赖的jars可以在libs文件夹中找到，对应的源jars可以在libs-sources文件夹中找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:46:29.837

这将取决于确切的上下文。最有可能的：

Dependent JAR - 是应用程序所依赖的 java 库文件，常见的例子是第三方库。它包含 .class 文件。对应的源jars - 使用jar实用程序打包的依赖jar的java源代码。它包含 .java 文件。

# php - 如何在 CI 中的两个应用程序之间共享控制器和模型？

> ID：11213935
> 
> 赞同：0
> 
> 时间：2012-06-26T18:41:15.400
> 
> 标签：php, codeigniter, codeigniter-2, codeigniter-url

我正在使用 CodeIgniter 2.1.1 并使用两个环境（生产和测试）构建网站。本质上，一开始，两种环境都具有相同的程序逻辑。但现在有一些修改要做。

这个想法是共享生产环境和测试环境的控制器和模型，但对两个环境有不同的视图。

我已经设置了 WAMP，在 WWW 目录中有两个单独的文件夹：一个用于测试，另一个用于生产。每个文件夹下都有控制器、模型、视图等。CI 被适当地指向并设置了基本 URL。

我的问题是，当我在 Web 浏览器中键入 URL 以调用测试环境的控制器时，它应该重定向并调用生产环境的控制器。那可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:16:04.757

不要让它重定向。让它包含文件。

假设你有这个文件结构：

```
www-root
 |-production
 |   |-application
 |   |   |-controllers
 |   |   |-etc.
 |   |-etc.
 |
 |-test
 |   |-application
 |   |   |-controllers
 |   |   |-etc.
 |   |-etc.
 | 
```

在两个环境中创建具有完全相同名称的文件。我们会说`controller.php`我们的例子。在生产环境中，进行编码。在您的测试环境中，包括这一行并且仅包括这一行：

```
<?php include '../../../production/application/controllers/controller.php'; 
```

这应该将文件从您的生产环境拉到您的测试环境中。只要确保您是否对任何链接进行硬编码以使它们相对而不是绝对。这样，当它被拉入您的测试环境时，它将参考您的测试资产，而不是您的生产资产。

这是未经测试的，因为我现在无法访问我的 CI 安装。让我知道结果如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:43:03.510

我建议您最终设置某种类型的版本控制，例如 Git。您可以编辑测试环境并将更改推送到生产环境。

要回答您的问题，您可以通过设置符号链接在两个不同的应用程序之间共享模型和控制器。我在linux中做过，但在windows中应该是一样的。因此，假设您希望实际文件位于测试应用程序中。将所有 php 文件放在测试应用的控制器和模型目录中。无需在生产应用程序中创建控制器和模型目录，只需创建指向测试应用程序各自目录的符号链接。

# jquery - JQuery 每个函数返回重复的文本

> ID：11213936
> 
> 赞同：0
> 
> 时间：2012-06-26T18:41:18.490
> 
> 标签：jquery, jquery-ui

附加的 jQuery 非常接近工作。它返回（或附加）文本两次。

我正在遍历无序列表并将查询字符串参数附加到 hrefs。

被`?InitialTabId=Ribbon.Document`追加两次，如下所示：

```
http://www.google.com?InitialTabId=Ribbon.Document?InitialTabId=Ribbon.Document

```

代码：

```
$(document).ready(function() {          
//foreach item in the quick launch, add a parameter to ensure the Ribbon is set to the Document tab
    $('#zz18_V4QuickLaunchMenu ul li').each(function() {    
        $(this).find('a').attr('href', function (i, val) {          
            return val + '?InitialTabId=Ribbon.Document';
        });
    });
}); 
```

有谁知道如何使文本只附加一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:45:26.477

不需要`each()`。

```
$('#zz18_V4QuickLaunchMenu ul li a').attr('href', function (i, val) {          
  return val + '?InitialTabId=Ribbon.Document';
}); 
```

不应使用此代码两次附加字符串。（FWIW，也不应该在您的代码中附加两次字符串。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:46:20.303

它必须运行两次，因为您选择了两个`<li>`元素。`.each()`是迭代的并且运行两次，每个元素一次。

# php - PHP取消链接在Cron中失败

> ID：11213937
> 
> 赞同：0
> 
> 时间：2012-06-26T18:41:18.887
> 
> 标签：php, cron

我有一个备份数据库并将其发送到远程服务器的 cronjob。文件发送成功后，应该删除本地副本。我遇到的问题是它没有删除本地副本。当我从命令行运行它时，它可以正常工作，但不能从 cron 运行。

```
// After uploading.
// $path is the absolute path to the file.
if(file_exists($path))
{
  unlink($path);
} 
```

我也试过了`rm $path`。它也不适用于cron。我做错了什么？谢谢你。

# php - 使用 php 分隔字符串

> ID：11213938
> 
> 赞同：-4
> 
> 时间：2012-06-26T18:41:21.987
> 
> 标签：php, string, variables, explode

我有类似的刺痛

```
$_POST["ids"]='ABC,DEF,GHI' 
```

我想分离三个变量中的每一个，然后通过 while 循环运行分离的结果。

```
foreach( explode( ',', $_POST["ids"]) as $Client_ID)
{
  $sql_qry="select *
            from   ca_client_statement
            where  client_id='".$Client_ID."' and trading_period_month like '".$TP_Month."'";
  $sql_err_no=sql_select($sql_qry,$sql_res,$sql_row_count,$sql_err,$sql_uerr);

  $row = mysql_fetch_assoc($sql_res);
  $bytes = $row['pdf_statement'];
  header("Content-type: application/pdf");
  header('Content-disposition: attachment; filename="'.$Client_ID.'statement'.$TP_format.'.pdf"');
  print $bytes;
} 
```

这只会为 ABC 生成一个语句。不是三个

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:42:36.347

是的，但我建议您在调用后使用`foreach`循环而不是循环，如下所示：`while``explode()`

```
foreach( explode( ',', $string) as $value)
    echo $value . ' '; 
```

这将打印`ABC DEF GHI`.

要将其应用于您的示例代码，您不能`header()`在输出某些内容后调用，除非您启用了输出缓冲。

试试这个：

```
header("Content-type: application/pdf");
header('Content-disposition: attachment; filename="'.$Client_ID.'statement'.$TP_format.'.pdf"');
foreach( explode( ',', $_POST["ids"]) as $Client_ID)
{
  $sql_qry="select *
            from   ca_client_statement
            where  client_id='".$Client_ID."' and trading_period_month like '".$TP_Month."'";
  $sql_err_no=sql_select($sql_qry,$sql_res,$sql_row_count,$sql_err,$sql_uerr);

  $row = mysql_fetch_assoc($sql_res);
  $bytes = $row['pdf_statement'];
  print $bytes;
} 
```

# c++ - 促进进程间竞争条件预防

> ID：11213940
> 
> 赞同：1
> 
> 时间：2012-06-26T18:41:33.247
> 
> 标签：c++, boost, locking, race-condition, interprocess

我遇到了一些偶尔会偶尔抛出以下异常的代码的问题：

```
boost interprocess: no such file or directory 
```

有多个代码访问同一组文件，但有些代码会实时将文件移动到不同的目录。处理和移动文件的代码使用文件锁，例如

```
boost::interprocess::file_lock 
```

代码中发生的过程如下： 1) 程序 1 检查它要锁定的文件是否存在 2) 如果上述检查通过，则使用 file_lock 锁定文件

我认为问题在于，在第 1 步和第 2 步之间，程序 2 可以在程序 1 正在处理的文件上使用 boost::filesystem::rename 并移动它。

如果两个程序同时运行，有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:41:27.327

锁定前不要检查文件是否存在。相反，只需尝试锁定它；如果文件不存在，Boost 会发出`interprocess_exception`警告，提示您文件已被锁定。

# php - PHP表单未发布到数据库

> ID：11213942
> 
> 赞同：1
> 
> 时间：2012-06-26T18:41:42.670
> 
> 标签：php

它验证并正确显示我的数组中的错误，但它不会 POST 到我的数据库。表单上所有字段的命名都是正确的（大小写也正确），PHP和MYSQL，dbconnect.php都是正确和正确的。我认为问题出在数组函数的某个地方。现在我这个月才开始学习 PHP，所以请放轻松。谢谢您的帮助！

```
<?php
include ('scripts/dbconnect.php');
$Name = mysql_real_escape_string($Name);
$Email = mysql_real_escape_string($Email);

if (isset($_POST['formsubmitted'])) {
$error = array();//Declare An Array to store any error message  

if (empty($_POST['Name'])) {//if no name has been supplied 
    $error[] = 'Please Enter Your Name ';//add to array "error"
    } else {
        $Name = $_POST['Name'];//else assign it a variable
    }

if (preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/", $_POST['Email'])) { //regular expression for email validation
    $Email = $_POST['Email'];
    } else {
         $error[] = 'Your EMail Address is Invalid  ';
    }
}
if (empty($error)) //Send to database if no errors
    mysql_query("INSERT INTO InviteRequestDB ( 'Name', 'Email' ) VALUES ( '$Name', '$Email' )");
    mysql_close($connect); //Close connection to database

  foreach ($error as $key => $values) {
  echo "<li style=color:#FFF> $values </li>";
  } 
```

?>

现在我知道我不应该使用 mysql。但是我遇到了太多 mysqli 的问题，这只是一个简单的联系表格。

我也应该像现在一样对每个变量执行 mysql_real_escape_string 吗？还是程序的顺序不正确？

```
<form action="applyforinvite.php" method="post">
    <input class="textbox" type="text" name="Name" />
    <input class="textbox" type="text" name="Email" />
  <input type="hidden" name="formsubmitted" value="TRUE" />
  <input type="submit" value="Register" />
</form> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:43:20.040

改变

```
mysql_query("INSERT INTO InviteRequestDB ( 'Name', 'Email' ) VALUES ( '$Name', '$Email' )"); 
```

到

```
mysql_query('INSERT INTO InviteRequestDB ( Name, Email ) VALUES ( "'.$Name.'", "'.$Email.'" )') or die(mysql_error()); 
```

**编辑**

```
<?php
include ('scripts/dbconnect.php');

if(isset($_POST['formsubmitted'])){
    #   Will contain errors
    $Error = array(); 

    #   Email
    $Email = (isset($_POST['Email']) ? $_POST['Email'] : '');
    if($Email == '' OR !preg_match('/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/', $Email)){
        $Error[] = 'Email address is invalid.';
    }

    #   Name
    $Name = (isset($_POST['Name']) ? $_POST['Name'] : '');
    if($Name == ''){
        $Error[] = 'Please enter your name.';
    }

    if(count($Error)){
        echo '<ul>';
        foreach($Error as $Value){
            echo '<li style="color: #FFF;">'.$Value.'</li>';
        }
        echo '</ul>';
    } else {
        // Query
        mysql_query('INSERT INTO InviteRequestDB ( Name, Email ) VALUES ( "'.$Name.'", "'.$Email.'" )') or die(mysql_error());
    }

    //Close connection to database
    mysql_close($connect);
}

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T18:44:38.800

您不应该在 INSERT 查询中引用列名。('name, 'email') 应该是 (name, email)。

此外，不要将 php_mysql 扩展用于新应用程序，它已被弃用。试试 MySQLi 或 PDO。

最后编辑（大声笑），试试这个——修复了代码的多个问题：

```
 if (isset($_POST['formsubmitted'])) {
        $error = array(); //Declare An Array to store any error message  

        if (empty($_POST['Name'])) { //if no name has been supplied 
            $error[] = 'Please Enter Your Name '; //add to array "error"
        } else {
            $Name = mysql_real_escape_string($_POST['Name']); //else assign it a variable
        }

        if (preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/", $_POST['Email'])) { //regular expression for email validation
            $Email = mysql_real_escape_string($_POST['Email']);
        } else {
            $error[] = 'Your EMail Address is Invalid  ';
        }
        if (empty($error)) //Send to database if no errors
            {
            mysql_query("INSERT INTO InviteRequestDB (Name, Email) VALUES ( '$Name', '$Email' )");
        }
    }

    mysql_close($connect); //Close connection to database

    foreach ($error as $key => $values) {
        echo "<li style=color:#FFF> $values </li>";
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:50:37.563

```
<?PHP
require_once('scripts/dbconnect.php');

if (!$link) { //Change $link to be your connection variable
    die("Not connected : " . mysql_error());
}

if (!$db_selected) { //Change $db_selected to be the variable you set mysql_select_db on
    die ("Can't use database : " . mysql_error());
}

if (isset($_POST['formsubmitted'])) {
    $error = array();//Declare An Array to store any error message  

    if (empty($_POST['Name'])) {//if no name has been supplied 
      $error[] = 'Please Enter Your Name ';//add to array "error"
    } else {
      $Name = mysql_real_escape_string($_POST['Name']);//else assign it a variable
    }

    if (preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/", $_POST['Email'])) { //regular expression for email validation
      $Email = mysql_real_escape_string($_POST['Email']);
    } else {
      $error[] = 'Your EMail Address is Invalid  ';
    }

    if (count($error) == 0){ //Send to database if no errors
        mysql_query("INSERT INTO `InviteRequestDB` (`Name`, `Email`) VALUES('$Name', '$Email')")or die(mysql_error());
    } else {
      foreach ($error as $key => $values) {
        echo "<li style=color:#FFF> $values </li>";
      }
    }
    mysql_close($connect); //Close connection to database
} 
```

# c++ - C++访问冲突写入位置

> ID：11213944
> 
> 赞同：-1
> 
> 时间：2012-06-26T18:41:51.067
> 
> 标签：c++, linked-list

我正在尝试创建一个链接列表，您可以在其中将项目输入列表。我可以将第一项输入到列表中，但我无法在第一项之后添加项目而不会导致程序崩溃。有谁知道出了什么问题？

```
#include <string>
#include <iostream>

using namespace std;
struct node {
  string s;
  node *next;
};
  node *root;
  string ans;
  node *conductor;
void displayNodes() {
  conductor = root;
  while ( conductor != NULL ) {
  cout<< conductor->s << endl;
  conductor = conductor->next;
  }
}
void addNode(string str) {
    if (root == NULL) {
         root = new node; 
        root->next = NULL;
        root->s = str;
        conductor = root->next;
        return;
    }
    conductor->next = new node;
  conductor = conductor->next;
  conductor->next = NULL;
  conductor->s = str;
}
void deleteNode(string str) {
    while (conductor != NULL) {
        if (conductor->s == str) {
            conductor->next = conductor;
        } else {
            conductor = conductor->next;
        }
    }
}
int main() {
    while (true) {
        system("cls");
        cout << "Enter a string: ";
        cin >> ans;
        addNode(ans);
        system("cls");
        displayNodes();
        system("pause");
    }
  system("pause");
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:44:49.573

因为你第一次设置

```
conductor = root->next; 
```

现在`NULL`和下一次尝试

```
conductor->next = new node; 
```

这是**未定义的行为**。

你应该做的是设置

```
conductor = root; 
```

在第一次迭代中。`conductor`应该指向最后创建的节点，而不是`NULL`.

# lwjgl - 升级到 PlayN 1.3.1 后 Java 出现黑屏

> ID：11213945
> 
> 赞同：0
> 
> 时间：2012-06-26T18:42:00.970
> 
> 标签：lwjgl, playn

我已经研究了一两天了。我在[这个线程](https://groups.google.com/forum/?fromgroups#!topic/playn/OfkJjYxxaCc)中发现了其他有类似问题的人。根据这个[minecraft wiki](http://www.minecraftwiki.net/wiki/Tutorials/Update_LWJGL)的“在哪里下载”部分，自 v2.8.1 以来，使用 LWJGL 的 64 位机器上存在一个已知的黑屏问题。我尝试过使用旧版本的 LWJGL，但没有成功；我还是会黑屏。有没有人有解决方案让它在 64 位机器上工作？

# ms-access - 将 Excel 文件链接到 MS Access 表单

> ID：11213948
> 
> 赞同：2
> 
> 时间：2012-06-26T18:42:13.327
> 
> 标签：ms-access

我有一个特定的 Excel 工作表，用于我正在分析的化合物中的许多不同区域，需要将每个区域分别链接到 MS Access 2007 中表单上的特定按钮。电子表格的设置方式不允许我简单地导入它所以我想要一个按钮，我可以点击数据库，打开实际的 excel 文件。到目前为止，我发现没有任何东西能够解决这个问题，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:53:05.043

您可以通过 API 调用在 VBA 中打开任何文件或应用程序`ShellExecute`。

把它放在一个模块中：

```
Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" (ByVal hwnd As Long, _
ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, _
ByVal lpDirectory As String, ByVal lpnShowCmd As Long) As Long

Public Sub OpenFile(ByVal File As String)
    ShellExecute 0, "open", File, "", "", 1
End Sub 
```

现在您可以使用该`OpenFile`方法打开您的 Excel 文件：

```
OpenFile "C:\YourExcelFile.xls" 
```

它将使用默认应用程序（希望是您机器上的 Excel）打开，就像您在 Windows 资源管理器中单击它一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:54:18.240

在大多数情况下，您可以将 FollowHyperlink 与应用程序一起使用：

```
 FollowHyperlink "c:\docs\myexcel.xls" 
```

# python - Python与lotus quickr数据库交互

> ID：11213950
> 
> 赞同：0
> 
> 时间：2012-06-26T18:42:22.600
> 
> 标签：python, lotus

我想编写一个 python 脚本来将整个 Lotus quickr 数据库复制到我的本地硬盘驱动器。

对我来说，我可以通过 Intranet 站点访问 quickr，也可以通过 quickr 连接器，该程序允许我通过 Windows 资源管理器访问数据库内容。这两个选项都非常慢，我宁愿将整个文件夹结构复制到我的本地磁盘

¿ 如何从 Python 或任何脚本语言访问 quickr 数据库来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:13:32.517

QuickR 有一个不错的[API](http://www.lotus.com/ldd/lqwiki.nsf/xpViewCategories.xsp?lookupName=API%20Documentation)，但如果服务器或您的网络很慢，我怀疑这可能对您没有帮助。与您的管理员交谈，也许他们可以提供帮助。

# c#-4.0 - 通过 System.Diagnostics.Process 启动进程时没有接收到输出 - c#

> ID：11213951
> 
> 赞同：1
> 
> 时间：2012-06-26T18:42:22.780
> 
> 标签：c#-4.0, process, system.diagnostics

我正在使用 C# 中的 System.DIagnostics.Process 创建一个进程
我创建了一个从该类`CCProcess`继承的`Process`类
问题是 ErrorDataRecieved OR OutputDataReceived 没有被解雇..这是我的代码

```
public CCProcess(string executablePath, string[] parameters, CCProcessInfo processInfo)
        {
            this.ProcessInfo = processInfo;
            this.OutputMessages = new List<ProcessOutputMessage>();
            this.ProcessId = Guid.NewGuid().ToString();

            base.EnableRaisingEvents = true;
            this.StartInfo = new ProcessStartInfo(executablePath)
            {
                Arguments = string.Join(" ", parameters.Select(s => string.Format("\"{0}\"", s))),
                CreateNoWindow = true,
                ErrorDialog = false,
                RedirectStandardError = true,
                RedirectStandardInput = true,
                RedirectStandardOutput = true,
                StandardErrorEncoding = Encoding.UTF8,
                StandardOutputEncoding = Encoding.UTF8,
                WindowStyle = ProcessWindowStyle.Hidden,
                UseShellExecute = false
            };

            this.ErrorDataReceived += (sender, e) =>
            {
                this.OutputMessages.Add(new ProcessOutputMessage() { Message = e.Data, Type = OutputType.Error });
                if (this.ErrorData_Recieved != null&&!string.IsNullOrEmpty(e.Data))
                {
                    this.ProcessInfo.LastResponseFromProcess = DateTime.Now;
                    this.ErrorData_Recieved(e.Data);
                }
            };

            this.OutputDataReceived += (sender, e) =>
            {
                this.OutputMessages.Add(new ProcessOutputMessage() { Message = e.Data, Type = OutputType.Output });
                if (OutputData_Recieved != null && !string.IsNullOrEmpty(e.Data))
                {
                    this.ProcessInfo.LastResponseFromProcess = DateTime.Now;
                    OutputData_Recieved(e.Data);
                }
            };
        } 
```

我究竟做错了什么？
提供的代码是类的构造函数`CCProcess`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:37:18.760

哦，我讨厌这个..在这里发布问题然后回答他们..无论如何
我错过了一个基本的东西
`Process.BeginOutputReadLine()`
浪费了2个小时，因为这里有更多关于这个
[http://msdn.microsoft.com/en-us/library/system .diagnostics.process.beginoutputreadline](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline)

# delphi - 为什么只有 FILE_NOTIFY_CHANGE_LAST_WRITE 过滤器的 ReadDirectoryChangesW 会在文件编辑时发出多个事件？

> ID：11213961
> 
> 赞同：5
> 
> 时间：2012-06-26T18:42:51.807
> 
> 标签：delphi, readdirectorychangesw

我在单独的线程应用程序配置文件中进行监控，在某些情况下，它可能是另一个 XML 或另一个 XML 中的 INI。线程监控目录的代码（在Delphi中）是这样的：

```
procedure TWatcherThread.Execute;
type
  PFileNotifyInformation = ^TFileNotifyInformation;
  TFileNotifyInformation = record
    NextEntryOffset: DWORD;
    Action: DWORD;
    FileNameLength: DWORD;
    FileName: WideChar;
  end;
const
  BufferLength = 65536;
var
  Filter, BytesRead: DWORD;
  InfoPointer: PFileNotifyInformation;
  Offset, NextOffset: DWORD;
  Buffer: array[0..BufferLength - 1] of byte;
  Overlap: TOverlapped;
  Events: array[0..1] of THandle;
  WaitResult: DWORD;
  FileName, s: string;
begin
  if fDirHandle <> INVALID_HANDLE_VALUE then begin
    Filter := FILE_NOTIFY_CHANGE_LAST_WRITE;

    FillChar(Overlap, SizeOf(TOverlapped), 0);
    Overlap.hEvent := fChangeHandle;

    Events[0] := fChangeHandle;
    Events[1] := fShutdownHandle;

    while not Terminated do begin
      FillChar(Buffer,SizeOf(Buffer),0);
      if ReadDirectoryChangesW (fDirHandle, @Buffer[0], BufferLength, TRUE,
        Filter, @BytesRead, @Overlap, nil)
      then begin
        WaitResult := WaitForMultipleObjects(2, @Events[0], FALSE, INFINITE);
        if WaitResult = WAIT_OBJECT_0 then begin
          InfoPointer := @Buffer[0];
          Offset := 0;
          repeat
            NextOffset := InfoPointer.NextEntryOffset;
            FileName := WideCharToString(@InfoPointer.FileName);

            if (InfoPointer.Action = FILE_ACTION_MODIFIED) and (CompareText(FileName, 'MyConfig.ini') = 0) then begin //read changes in config or INI file
              // Do Action.. refresh runtime flags
            end;
            PByte(InfoPointer) := PByte(DWORD(InfoPointer) + NextOffset);
            Offset := Offset + NextOffset;
          until NextOffset = 0;
        end;
      end;
    end;
  end;
end; 
```

为什么它至少发出 2 次信号以及当配置文件中的某些标志被更改并保存时如何获得正确的信号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-25T07:59:44.363

Raymond Chen 在他的博客上很好地解释了这一点：http: [//blogs.msdn.com/b/oldnewthing/archive/2014/05/07/10523172.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2014/05/07/10523172.aspx)

简而言之，“因为修改了多项内容。”

# vba - vba列表框多列添加

> ID：11213962
> 
> 赞同：11
> 
> 时间：2012-06-26T18:42:54.737
> 
> 标签：vba

> **可能重复：**
> [在具有多列的列表框中添加项目](https://stackoverflow.com/questions/6973287/adding-items-in-a-listbox-with-multiple-columns)

使用 MFC VC++ 有两个控件，`ListBox`和`ListCtrl`. 但是对于 VBA，我们似乎只有`ListBox`.

我想创建一个包含 2 列（Company_ID、Company_Name）的列表框。

这是我尝试过的：

1.  我创建了 lstbox（控件类型 ListBox）
2.  行源类型 = 值列表
3.  我从两个编辑框中获取用户的价值，当用户单击“添加”时，它应该被添加到具有 2 列的列表框中。

在 VBA 代码例程中，我添加了以下几行：

```
lstbox.ColumnCount = 2
lstbox.AddItem (Company_ID) 
```

以下代码不起作用，这似乎与添加列值有关：

```
lstbox.Column(1,lstbox.ListCount - 1) = Company_name 
```

这给出了错误：

> 需要运行时错误“424”对象。

任何人都可以帮助使用 vba 代码添加到多列列表框。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-27T08:43:01.677

简化示例（带计数器）：

```
With Me.lstbox
    .ColumnCount = 2
    .ColumnWidths = "60;60"
    .AddItem
    .List(i, 0) = Company_ID
    .List(i, 1) = Company_name 
    i = i + 1

end with 
```

确保以*0*开始计数器，而不是 1 来填充列表框。

# regex - 正则表达式 HTML 嵌套引号替换

> ID：11213963
> 
> 赞同：0
> 
> 时间：2012-06-26T18:42:55.527
> 
> 标签：regex

我在 HTML 中有多个嵌套引号，如下所示：

```
<div class="quote-container">
   <div class="quote-block">
      <div class="quote-container">
         <div class="quote-block">
         </div>
      </div>
      <div class="quote-container">
         <div class="quote-block">
         </div>
      </div>
      <div class="quote-container">
         <div class="quote-block">
         </div>
      </div>
   </div>
</div> 
```

我需要搜索和删除引号。我使用表达式：

```
<div class="quote-container">.*<div class="quote-block">.*</div>.*</div> 
```

这适用于单引号。但是，多嵌套引号存在问题（上面的示例）。

我的任务是搜索：

```
<div class="quote-container">.*<div class="quote-block"> 
```

加上任何不包含的字符串

```
<div 
```

并以

```
.*</div>.*</div> 
```

我尝试了像这样的lookbehind和lookahead断言：

```
<div class="quote-container">.*<div class="quote-block">.*(?!<div).*</div>.*</div> 
```

但他们不工作。

有没有办法完成我的任务？我需要一个可以在 TextPipe 中使用的 perl 表达式（我将它用于论坛解析，然后我进行文本到语音的转换）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:31:08.927

正则表达式是操作嵌套结构的糟糕选择。我会为这个问题编写一个特定的解析器（一个简单的基于堆栈的解析器就足够了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:50:47.350

我认为您的问题是您正在使用[贪婪](http://www.regular-expressions.info/repeat.html)的表达式`.*`。

尝试用`.*`非贪婪替换所有`.*?`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:55:23.560

我个人会通过替换引号来解决这个问题，直到不再有任何引号可以替换为止。真的没有办法在一个正则表达式替换中处理这个问题，你需要做的是：

伪代码：

```
html="... from your post ...";
do{
 newhtml=html
 newhtml=replace(
        '/<div class="quote-container">.*<div class="quote-block">.*</div>.*</div>/s',
        '',
        newhtml
    )
} while(newhtml!=html)
html=newhtml 
```

这将处理各种嵌套引号。

# xml - 简单类型的 id

> ID：11213964
> 
> 赞同：1
> 
> 时间：2012-06-26T18:42:59.333
> 
> 标签：xml, xsd

我是 xml 新手。

我想在 XML 文档中存储关键字列表。我还需要一个 ID 来将关键字分配给将存储在 XML 中的文章。然后我将使用 IDREF

到目前为止，我有以下 XSD：

```
<complexType name="keywordList">
    <sequence>
        <element name="keyword" 
              type="tns:tag" 
              minOccurs="0" 
              maxOccurs="unbounded"/>
    </sequence>
</complexType>

<simpleType id="ID" name="tag">
    <restriction base="string">
        <minLength value="1"/>
    </restriction>
</simpleType>

  <element name="keywords" type="tns:keywordList"></element> 
```

以及以下测试 XML：

```
<dss:keywords xmlns="http://dss.in.tum.de/" xmlns:dss="http://dummy"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://dummy dummy.xsd >
    <dss:keyword id="K1">testing</dss:keyword>
    <dss:keyword id="k2">requirements</dss:keyword>
    <dss:keyword id="k3">modelling</dss:keyword>
    <dss:keyword id="k4">implementation</dss:keyword>
</dss:keywords> 
```

不幸的是，我有以下验证错误`id-values`：

> cvc-type.3.1.1：元素 'dss:keyword' 是一个简单类型，所以它不能有属性，除了那些命名空间名称与 'http://www.w3.org/2001/XMLSchema-instance' 相同的属性并且其 [local name] 是“type”、“nil”、“schemaLocation”或“noNamespaceSchemaLocation”之一。但是，找到了属性“id”。dummy.xml /HelloWorld

这种错误的原因可能是什么？

# c# - 如何从 Windows 服务读取文本文件？

> ID：11213966
> 
> 赞同：9
> 
> 时间：2012-06-26T18:43:05.080
> 
> 标签：c#, windows-services

我制作了一个安装在`c:\Program Files\My Service`目录中的 Windows 服务。除了可执行文件，我还有一个安装在同一目录中的 XML 文件。服务使用此 XML 文件来获取用户定义的信息。

在服务的代码中，我读取文件，就好像它是可执行文件的本地文件一样。例如：

```
DataSet ds = new DataSet();
ds.ReadXml("Foo.xml"); 
```

但是，当我运行该服务时，该服务会抛出一个异常说：

> 找不到文件“C:\Windows\system32\Foo.xml”

由于可执行文件存在于`c:\Program Files\My Service`我希望 Windows 服务在`c:\Program Files\My Service\Foo.xml`. 显然，事实并非如此。

如何强制服务在服务可执行文件所在的同一位置（相对）查找 Foo.xml 文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T18:46:16.410

用这个：

```
System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Foo.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:44:01.360

这将为您提供所需的

```
 DataSet ds = new DataSet();
 ds.ReadXml(System.IO.Path.Combine(System.Reflection.Assembly.GetExecutingAssembly().Location,"Foo.xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:47:13.520

由于 windows 服务工作目录是 C:\Windows\System32。

为了按预期读取您的 xml 文件，您必须执行以下操作

```
DataSet ds = new DataSet(); 
ds.ReadXml(Path.Combine(System.Reflection.Assembly.GetExecutingAssembly().Location, "Foo.xml")); 
```

# java - 如何在 db4o 中正确索引 java.util.uuid？

> ID：11213969
> 
> 赞同：0
> 
> 时间：2012-06-26T18:43:12.013
> 
> 标签：java, database, db4o

我正在尝试将包含 UUID 的对象索引到 db4o 中，但我不希望它在对象本身上进行索引，而是在 UUID 上进行索引。但是，在表中，我看到该对象已分为三个字段，MostSigBits、LeastSigBits 和 SerialVersionUID。我如何以某种方式使用所有这三个列创建 1 个字段以进行正确的索引？

我找到了 UUIDTypeHandler 并且正在使用它，但是当我在构建数据库时观察查询时间（查询数据库中是否已经存在 UUID）时，查询的时间在不断增长。如果它在 UUID 上正确索引它应该是一个恒定时间操作，但它不是。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T02:41:42.840

结果发现默认情况下未启用 UUID 支持，但可以通过以下方式启用：

```
configuration.common().add(new UuidSupport()); 
```

# javascript - 使用 MySQL 数据更新 Google Maps API 标记位置

> ID：11213973
> 
> 赞同：2
> 
> 时间：2012-06-26T18:43:37.443
> 
> 标签：javascript, php, google-maps, google-maps-markers

我正在处理一个 ACARS 页面，该页面应该显示带有飞机标记的地图，并且它们应该根据它们在模拟器中的实际位置移动。他们的实际位置每分钟都会使用不同的 Java GUI 输入到 MySQL 表中，该 GUI 使用 telnet 连接 sim。

现在，为此，我基本上是使用这个：

```
setInterval(function(){
    $("#tracking").load("atc.php #tracking");
    $("#mapcode").load("update_map.php");
}, 30000); 
```

其中#tracking Division 用于ACARS 表，其中包含飞机上的数据，#mapcode Division 用于更新标记的代码。顺便说一句，ACARS 表工作和更新正常，只是地图有问题。

这是**update_map.php中的代码**

```
 <?php

echo '<script type="text/javascript">

        function updateMap() {
';

mysql_connect("localhost", "<hidden here>", "<hidden here>");
mysql_select_db("virtua6_flightdeck");

$sql = mysql_query(" SELECT * FROM `flightdeck_acars` ");

echo 'map.clearOverlays();';

    while($result = mysql_fetch_assoc($sql)) {

        echo 'aircraftPos = new google.maps.LatLng(' . $result['lat'] . ', ' . $result['lon'] . ');
        ';

    $code = substr($result['flightnum'], 0, 3); 

    if ($result['pilotid'] > 999) {

        $pilotid = $code . $result['pilotid'];

    } elseif ($result['pilotid'] > 99) {

        $pilotid = $code . '0' . $result['pilotid'];

    } elseif ($result['pilotid'] > 9) {

        $pilotid = $code . '00' . $result['pilotid'];

    } else {

        $pilotid = $code . '000' . $result['pilotid'];

    }

    $hdgInt = $result['hdg'];           

    echo    'new google.maps.Marker({
            position: aircraftPos,
            map: map,
            title: "' . $result['flightnum'] . ' [' . $result['depicao'] . '-' . $result['arricao'] . ']",
            icon: "plane/' . $hdgInt . '.png"
        });';

    }

    echo '}

    </script>
    ';

?> 
```

但这似乎并没有更新地图。顺便说一句，在获取地图代码分区中显示的文本后添加一些文本，唯一的问题是地图没有更新。这就是我如何称呼地图。顺便说一句，地图有效，只是没有更新。

```
<div id="map" style="width:100%; height: 400px;"></div>

  <script type="text/javascript"> 

   var map = new google.maps.Map(document.getElementById('map'), { 
     mapTypeId: google.maps.MapTypeId.TERRAIN
   });

   var markerBounds = new google.maps.LatLngBounds();

   var aircraftPos;

    <?php

    # PHPScript to create markers for flights

    mysql_connect("localhost", "virtua6_omega", "Dogsrock99");
    mysql_select_db("virtua6_flightdeck");

    $sql = mysql_query(" SELECT * FROM `flightdeck_acars` ");

    while($result = mysql_fetch_assoc($sql)) {

        echo 'aircraftPos = new google.maps.LatLng(' . $result['lat'] . ', ' . $result['lon'] . ');';

    $code = substr($result['flightnum'], 0, 3); 

    if ($result['pilotid'] > 999) {

        $pilotid = $code . $result['pilotid'];

    } elseif ($result['pilotid'] > 99) {

        $pilotid = $code . '0' . $result['pilotid'];

    } elseif ($result['pilotid'] > 9) {

        $pilotid = $code . '00' . $result['pilotid'];

    } else {

        $pilotid = $code . '000' . $result['pilotid'];

    }

    $hdgInt = $result['hdg'];           

?>

        new google.maps.Marker({
            position: aircraftPos,
            map: map,
            title: "<?php echo $result['flightnum'] . ' [' . $result['depicao'] . '-' . $result['arricao'] . ']'; ?>",
            icon: "<?php echo 'plane/' . $hdgInt . '.png'; ?>"
            // labelContent: "<?php echo $result['flightnum']; ?>",
            // labelAnchor: new google.maps.Point(22, 0),
            // labelClass: "labels", // the CSS class for the label
            // labelStyle: {opacity: 0.5}
        });

        markerBounds.extend(aircraftPos);

<?php

    }

?>

    // At the end markerBounds will be the smallest bounding box to contain
    // our 10 random points

    // Finally we can call the Map.fitBounds() method to set the map to fit
    // our markerBounds
   map.fitBounds(markerBounds)

; 
```

# html - 如何通过单击图像打开 iframe

> ID：11213974
> 
> 赞同：1
> 
> 时间：2012-06-26T18:43:45.493
> 
> 标签：html, iframe

我想知道是否有人可以帮助我。我希望我可以通过单击图片在我的网页中心打开一个 iFrame。所以实际上 iframe 将被隐藏，直到点击图片。我在另一个页面上有一个非常小而简单的上传表单，当用户需要上传并单击图片时，我希望它出现。我在这个网站和谷歌上浏览了一遍，但没有找到我要找的东西，或者没有包括基础知识，因为它是这里大多数人的常识。上传完成后是否还有一种方法可以关闭它？表单当前在完成后会转到主页，因此在最后（成功上传后）有一个关闭选项会很方便，iframe 内容将与其显示的页面相同。

我遇到的最好/最简单的方法是在 w3schools 上，但我读过使用 html for iFrames 并没有被广泛接受，或者它不是跨浏览器的最佳选择。

我一直在查看和尝试不同的代码，但即使没有基本知识，我也无法理解它。

如果有人能够提供帮助，请假设我 5 岁。我并不愚蠢，但就代码而言，我实际上才刚刚开始。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:22:52.523

您需要在 img 标记中添加一个 javascript onclick 函数，单击该函数会打开一个新窗口。您可以将要显示的 html 文件的名称传递给 window.open 函数。像这样的东西：

```
<img src="image.jpg" onclick="window.open('welcome.html')"> 
```

# jquery - 如何更改下拉字段的标签？

> ID：11213978
> 
> 赞同：0
> 
> 时间：2012-06-26T18:43:58.927
> 
> 标签：jquery, html

我知道这是非常基本的。我想使用 jQuery 来更改由 Django 生成的下拉字段的标签。

这是HTML代码：

```
<div class="form-fields">
<table>
<tr><th><label for="id_Ap_m">Application method 1:</label></th><td><select name="Ap_m" id="id_Ap_m">
<option value="" selected="selected">Select an application method</option>
<option value="1">Aerial</option>
<option value="2">Ground Sprayer</option>
</select></td></tr>
</table>
</div> 
```

jQuery代码：

```
$(document).ready(function(){
    $('#id_Ap_m').html('New application');
}); 
```

我的目标是将“应用程序方法 1”更改为“新应用程序”。我的方法是根据其 id 选择此标签，然后更改文本。但是，我的代码不起作用。这可能是因为标签和下拉列表具有相同的 id ( `id_Ap_m`)，这是由 Django 生成的。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T18:45:53.733

您的标签**没有 id**，您尝试过吗？

```
$("label[for='id_Ap_m']").html('New application'); 
```

# c# - 如何将 const int 从托管 C++ DLL 传递到 C# 以用作属性中的字段值

> ID：11213983
> 
> 赞同：1
> 
> 时间：2012-06-26T18:44:09.957
> 
> 标签：c#, c++, dll, unmanaged, managed

我在我的托管 C++ DLL 中有一个在编译时计算的 const int。我需要在调用它的 C# 程序中的属性中使用这个值。最初，我创建了一个返回 const int 值的静态方法，但 C# 不将其视为编译时 const。我还尝试在 DLL 命名空间中将其声明为 const int

```
// C++
namespace MyNameSpace {
    const int AttributeConstValue = 15 + sizeof(int);
 . . .
} 
```

尝试从 C# 访问 MyNameSpace.AttributeConstValue 返回“命名空间 MyNameSpace 中不存在”

有没有办法将 const 传递给 C# 并将其视为 const 表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:31:24.423

您必须使用 C++/CLI**文字**关键字来声明对其他托管编译器可见的公共常量。它必须出现在 ref 类中。像这样：

```
namespace Example {
    public ref class Constants {
    public:
        literal int AttributeConstValue = 15 + sizeof(int);
    };
} 
```

示例 C# 用法：

```
[MyAttribute(Example.Constants.AttributeConstValue)]
// etc.. 
```

请注意，这是相当危险的。文字值被编译到 C# 程序集的元数据中，而不引用您的 C++/CLI 程序集。因此，如果您更改此声明但*不*重新编译 C# 项目，那么您将遇到严重的不匹配。但是只要您需要在属性声明中使用它，那么就没有解决办法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:19:03.120

`Const`与其他声明不同。当代码开始编译时——编译器只是用它的值替换你使用的所有地方`const`——因为`const`值无法改变。它解决了一次 - 在编译时并保持这种状态。我真的不记得了，但我认为优化标志甚至`const`从代码中删除声明。所以情况是这样的：当你完成编译时，你不能改变它——所以你首先尝试——在某个函数中返回它，或者 getter/setter 是正确的。显然你不能将它返回给`const`变量，因为返回它你必须编译程序，当你编译程序时......你明白了:)

PS 不了解 C++，但在 C# 中 const 是`class`成员，无法在其中声明`namespace`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T21:20:33.577

[在这里](https://stackoverflow.com/questions/3146017/how-do-i-share-a-constant-between-c-sharp-and-c-code)找到答案

```
// C++ Const declaration
namespace MyNameSpace {
public ref class ConstClass {
public:
     literal int AttributeConstValue = 15 + sizeof(int);
. . .
}

// C# Usage
[MarshalAs(UnmanagedType.ByValArray, SizeConst=MyNameSpace.ConstClass.AttributeConstValue)]
public byte [] results; 
```

使用此技术将 MyNameSpace.ConstClass.AttributeConstValue 引用为 C# 属性的字段值可以正常工作。该值被视为编译时常量表达式。