# StackOverflow 问答 11241000-11241999

# c# - Changing page width and height using RegisterStartupScript method in asp.net

> ID：11241001
> 
> 赞同：0
> 
> 时间：2012-06-28T08:43:40.437
> 
> 标签：c#, asp.net

I want to change page width and height using RegisterStartupScpript method:

I tried

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "default2", "<script height:350; width:200 type=text/javascript> </script>", true); 
```

but it doesn't work. Can you help me? How can I do?

I find solution thanks for everone

```
 ScriptManager.RegisterStartupScript(this, typeof(string), "OPEN_WINDOW", "window.open( 'Default2.aspx?adi=" + adi + "&soyadi=" + soyadi + "&ogrenci_no="+ogrenci_no+"&tel_no="+tel_no+"&sinifi="+sinifi+"', 'height=650,width=850,status=no,toolbar=no,menubar=no,location=no, scrollbars=yes' );", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:16:33.137

使用 window.open 打开新窗口并设置新打开窗口的大小，您可能需要取消阻止弹出窗口。

**[现场演示](http://jsbin.com/ifiquy/2/edit)**，**按渲染按钮弹出**

```
window.open ("http://www.javascript-coder.com","mywindow","menubar=1,resizable=1,width=350,height=250"); 
```

# javascript - Check that no option was explicitly selected in a select box without using jquery?

> ID：11241012
> 
> 赞同：1
> 
> 时间：2012-06-28T08:44:26.363
> 
> 标签：javascript

// How to check if no option was explicitly selected in a select box? I use the following code and it works but is there a more elegant way to check if no option was explicitly selected in a select box without using jquery?

```
 // This function is called onclick or onchange a select in the submitting form
    function getplano(aaaooo){
     var esepen = document.getElementById('esEpendysi');
     var exepen=document.getElementById('exEpendysi');
    // (esEpendysi and  exEpendysi are two other selects in the submitting form)
     try{
     var esepval = esepen.options[esepen.selectedIndex].innerHTML;
    // or  ////~ var esepval = esepen.options[esepen.selectedIndex].text;   
    }
    catch(e){
    // alert(e.name + "\n" + e.message)
     //When there is not a selected value the error thrown is:
     // NS_ERROR_DOM_INDEX_SIZE_ERR
    //Index or size is negative or greater than the allowed amount
    }
    try{
      var exepval = exepen.options[exepen.selectedIndex].innerHTML; 
    }
    catch(e){
    // alert(e.name + "\n" + e.message)
    }
    if(esepval && exepval) {
    alert(aaaooo +'&esepen='+esepval+'&exepen='+exepval);
//example: handling.php?tzapan=panel&esepen=aluminium&exepen=wood
    }
     else
        alert('Please select Outside or/and Inside surface finish');
    } 
```

the form html is:  

```
 <BODY >
    <form name="" action="" method="post">
    <table >
    <tr><td align=left>Outside finish:<br><SELECT size='2'  name=exEpendysi  id='exEpendysi'  ><OPTION>aluminium</OPTION><OPTION>wood</OPTION></SELECT></td><td align=left>Interior finish:<br><SELECT size='2'  name=esEpendysi  id='esEpendysi' ><OPTION>aluminium</OPTION><OPTION>wood</OPTION></SELECT></td></tr>
    <tr><td style='font-size:16px;font-weight:bold;'>fixed side<br><select  size='2' id='selectplainou' name='selectplainou' onChange="getplano('handling.php?tzapan='+this.options[this.selectedIndex].innerHTML)" > <OPTION>panel</OPTION><OPTION>glass</OPTION> </select ></td>
    <td><input type="submit" value="Submit" /></td></tr>
    </table>
    </form>
    </BODY></HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:55:04.540

```
function getplano( aaaooo ) {
    var esepen = document.getElementById( 'esEpendysi' );
    var exepen = document.getElementById( 'exEpendysi' );

    // These two will return true if it's the default value
    // Else, it returns false.
    var esepenSelected = esepen.options[ esepen.selectedIndex ].value === "default option";
    var exepenSelected = exepen.options[ exepen.selectedIndex ].value === "default option";

    // Since we have these two variables, we can elegantly use:
    if ( !esepenSelected && !exepenSelected ) {
        // do something
    }
} 
```

够优雅吗？

# c - malloc 还是普通数组定义？

> ID：11241014
> 
> 赞同：6
> 
> 时间：2012-06-28T08:44:34.760
> 
> 标签：c, arrays, malloc

我什么时候应该在 C 中使用 malloc 而不是普通的数组定义？

我无法理解以下之间的区别：

```
int a[3]={1,2,3}
int array[sizeof(a)/sizeof(int)] 
```

和：

```
array=(int *)malloc(sizeof(int)*sizeof(a)); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T08:50:38.073

一般来说，在以下情况下使用`malloc()`：

*   数组太大而无法放入堆栈
*   数组的生命周期必须超过创建它的范围

否则，使用堆栈分配的数组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T10:21:40.337

```
int a[3]={1,2,3}
int array[sizeof(a)/sizeof(int)] 
```

如果用作局部变量，则两者都`a`将`array`在堆栈上分配。堆栈分配有其优点和缺点：

*   亲：它非常快 - 只需要一次寄存器减法操作来创建堆栈空间和一次寄存器加法操作来回收它
*   缺点：堆栈大小通常是有限的（并且在 Windows 上的链接时也固定）

在这两种情况下，每个数组中的元素数量都是编译时常量：`3`显然是一个常量，而`sizeof(a)/sizeof(int)`可以在编译时计算，因为在声明时，大小`a`和大小`int`都是已知的`array`。

当元素的数量仅在运行时已知或数组的大小太大而无法安全地放入堆栈空间时，则使用堆分配：

```
array=(int *)malloc(sizeof(int)*sizeof(a)); 
```

正如已经指出的那样，这应该是`malloc(sizeof(a))`因为 的大小`a`已经是它占用的字节数而不是元素的数量，因此`sizeof(int)`不需要额外的乘法。

堆分配和释放是相对昂贵的操作（与堆栈分配相比），这应该仔细权衡它提供的好处，例如在紧密循环中被多次调用的代码中。

现代 C 编译器支持 C 标准的 C99 版本，该版本引入了所谓的可变长度数组（或 VLA），它类似于其他语言中可用的类似功能。VLA 的大小是在运行时指定的，如下例所示：

```
void func(int n)
{
   int array[n];
   ...
} 
```

`array`仍然在堆栈上分配，就好像数组的内存已通过调用`alloca(3)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T09:08:20.003

如果您不希望数组具有固定大小，则肯定必须使用**malloc() 。**根据您要执行的操作，您可能事先不知道给定任务需要多少内存，或者您可能需要在运行时动态调整数组大小，例如，如果有更多数据，您可能会扩大它进来。后者可以使用**realloc()**来完成而不会丢失数据。

而不是像在原始帖子中那样初始化数组，您应该只初始化一个指向整数的指针。

```
int* array; // this variable will just contain the addresse of an integer sized block in memory
int length = 5; // how long do you want your array to be;

array = malloc(sizeof(int) * length); // this allocates the memory needed for your array and sets the pointer created above to first block of that region;

int newLength = 10;
array = realloc(array, sizeof(int) * newLength); // increase the size of the array while leaving its contents intact; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T08:47:38.363

你的代码很奇怪。

标题中问题的答案可能类似于“当您需要相当少量的短期数据时使用自动分配的数组，堆分配`malloc()`用于其他任何事情”。但是很难确定一个确切的答案，这在很大程度上取决于情况。

不知道为什么首先显示一个数组，然后是另一个尝试从第一个数组计算其长度的数组，最后是一个`malloc()`尝试执行相同操作的调用。

通常，您知道所需元素的数量，而不是要模拟其大小的现有数组。

第二行更好：

```
int array[sizeof a / sizeof *a]; 
```

无需重复对 的类型的依赖`a`，上面将定义`array`为与数组`int`具有相同数量元素的数组`a`。请注意，这仅在`a`确实是数组时才有效。

此外，第三行应该是：

```
array = malloc(sizeof a); 
```

不需要对参数太聪明（尤其是因为你弄错了）`sizeof`，[也不需要强制转换`malloc()`的返回值](https://stackoverflow.com/a/605858/28169)。

# iphone - 如何在 iOS 上设计正确的 MVC？

> ID：11241015
> 
> 赞同：0
> 
> 时间：2012-06-28T08:44:36.067
> 
> 标签：iphone, ios, model-view-controller

我有一个项目，我想在其中显示叠加层以在地图上定位人员。我很难遵循 MVC 模式，因为我从未实践过它。

在数据库中，我将保存一个位置（在地图坐标中）和用于识别一个人的图像（叠加层的图像）。

如果 2 个或更多在同一位置，它们将被分组在另一个“组”覆盖下。触摸覆盖时，我想根据其类型（“组”或“单个”）显示不同的信息。

这是我的问题：我显然需要继承一个`Overlay`具有位置和图像属性的超类来重新定义该`overlayTouched:`方法。但这段代码通常是 MVC 模式的视图代码，但覆盖是一个模型对象，因为它将被保存，所以我很困惑。

我应该如何设计这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:47:02.943

您不应子类化`Overlay`以向其添加触摸事件，而是创建一个新的`UIView`,`YourNewView`

这`YourNewView`将“具有”的实例`Overlay`，并将模型所需的所有方法委托给`Overlay`

例如。如果你有一个并且`touchesEnded`你`YourNewView`希望它将覆盖保存到数据库中，你会做

```
//in touchesEnded
[self.overlay saveToDb]; 
```

以此类推，所有的来电都会转给`Overlay`Class

# java - 从 Eclipse 中的多个包中导出多个 JAR

> ID：11241022
> 
> 赞同：0
> 
> 时间：2012-06-28T08:45:11.997
> 
> 标签：java, eclipse, eclipse-plugin

我目前有一个项目，目前包含多个包。**这些包组成了一个 Eclipse 插件（我觉得这很重要，可以加粗）**。

我想做的是导出，例如：“package1”为“package1.jar”，“package2”为“package2.jar”。

我应该提一下，我可以使用“Eclipse 产品导出向导”成功导出“package1”，但它只会生成“package1.jar”。如何在此处指定第二个包以导出为单独的 jar？

谢谢

PS。我可以右键单击包并点击“Export - Java - Runnable Jar File”，这会创建“package2”的完美工作版本，但我希望这成为导出/构建过程的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:51:35.173

导出时，在其中一个屏幕中，它会要求您选择要导出的文件/包。正是在屏幕上显示“**选择要导出的资源”的位置**

通过选择和取消选择适当的包来重复每个包的导出过程

例如

如果要将 package3 导出为 package3.jar，请取消选择所有其他包。

您甚至可以选择单个文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:21:11.720

如果你希望你的构建自动化，你最好使用像[Maven](http://maven.apache.org/)这样的工具。

还有一个名为[m2eclipse](http://www.sonatype.org/m2eclipse)的 Eclipse maven 插件，它可以让您的生活更轻松。

# ios - 对于我的任务，您应该如何通过 3G 网络在 iphone 设备之间进行通信？

> ID：11241026
> 
> 赞同：0
> 
> 时间：2012-06-28T08:45:38.440
> 
> 标签：ios, iphone, device, communication, 3g

我有一种情况，我想通过 3G 网络在 2-4 台设备之间进行通信（它也应该在 WLAN 上工作，但 3G 解决方案很关键）。

每个设备（除了一个）每 5 秒请求一次 GPS 位置，但是当该过程被该设备的用户取消时，需要通知一个设备该事件。

我在想一个设备可以充当服务器，其余的作为应该连接到服务器的客户端。这可以通过 3G 网络实现吗？

我还阅读了有关推送通知的信息，这与这里有关吗？您可以在不通过弹出窗口等干扰用户的情况下接收通知吗？

还有其他方法吗？

基本上我想在潜入最终的套接字编程或任何类似的东西之前使用苹果的“标准”解决方案（如果有的话）......

我想避免的是拥有一个网络服务器或一些类似的“3rd-party”解决方案，因为我不希望许多用户在最终解决方案中同时连接和“拉”同一个外部服务器......

**更新：**

基本上，我的应用程序将有成千上万的用户，如果发生偶数，需要通知他们。这也同时发生〜5秒，减少负载和避免垃圾邮件的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:51:28.403

> 我在想一个设备可以充当服务器，其余的作为应该连接到服务器的客户端。这可以通过 3G 网络实现吗？

它可以工作，但拥有专用服务器将是更好的选择

> 我还阅读了有关推送通知的信息，这与这里有关吗？您可以在不通过弹出窗口等干扰用户的情况下接收通知吗？

在你的情况下没有，因为你需要一个服务器来与苹果通信

> 基本上我想在潜入最终的套接字编程或任何类似的东西之前使用苹果的“标准”解决方案（如果有的话）......

没有标准的解决方案，除了您可能应该重新考虑为此使用专用的远程服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:12:10.750

您可以尝试使用 GameCenter。Game Center 中的网络游戏机制允许最多连接四个玩家，无需第三方解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T08:56:24.127

iPhones can't communicate directly with each other using 3G. You can access the internet through the 3G, but you can't do peer-to-peer as you are suggesting. If you were close enough, you could use bluetooth, but I expect you are too far away.

You would have no way of detecting the one device that acts as a server from the other devices. The IP address could (and probably would) change every time the device connects to a mobile data network. You would need a central server to co-ordinate all of the clients.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T09:04:27.787

您有多个问题，但我会尽可能多地解决它们：

> 我在想一个设备可以充当服务器，其余的作为应该连接到服务器的客户端。这可以通过 3G 网络实现吗？

不，如果没有外部网站作为中介，您无法在可通过 3G 访问的 iPhone/iPad 上运行服务器。（您可以运行一个可通过 Wi-Fi 访问的设备，但这并不能解决您所说的问题。）

> 我还阅读了有关推送通知的信息，这与这里有关吗？您可以在不通过弹出窗口等干扰用户的情况下接收通知吗？

Push 要求您（或与您签约的第三方）拥有 Web 服务器，因此如果您想要一个无服务器的解决方案，则此处不相关。

> 还有其他方法吗？

超过 3G，在当前 Apple 限制下，您总是需要外部服务器。

> 基本上我想在潜入最终的套接字编程或任何类似的东西之前使用苹果的“标准”解决方案（如果有的话）......

潜水在这里帮不了你。即使使用低级套接字编程，如果没有外部网站帮助建立连接，您也无法在可通过 3G 访问的 iPhone 上运行服务器。

# php - Android：将图像上传到 mysql

> ID：11241027
> 
> 赞同：0
> 
> 时间：2012-06-28T08:45:44.463
> 
> 标签：php, android, mysql, database, file-upload

我想在 Android Mobile Programming 上将图像文件上传到 mysql 数据库，但我遇到了一些问题。这是我的代码：

我在 Eclipse 上的代码：

```
private void uploadFile() {
    // TODO Auto-generated method stub
    String nama = getIntent().getStringExtra("user");
    Bundle fieldresults = this.getIntent().getExtras();
    Filepath = fieldresults.getString("bitmap");

    Bitmap bitmapOrg= BitmapFactory.decodeFile(Filepath);
    ByteArrayOutputStream bao = new ByteArrayOutputStream();
    bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
    byte [] ba = bao.toByteArray();
    String ba1=Base64.encodeBytes(ba);
    ArrayList nameValuePairs = new
    ArrayList();
    nameValuePairs.add(new BasicNameValuePair("image",ba1));
    nameValuePairs.add(new BasicNameValuePair("filename",Filepath));
    nameValuePairs.add(new BasicNameValuePair("username_user",nama));
    try{
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new
    HttpPost("http://10.0.2.2/BloodGlucose/uploadImage.php");
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
    }catch(Exception e){
    Log.e("log_tag", "Error in http connection "+e.toString());
    }
} 
```

和我的 PHP 代码：

```
 <?php
include_once("koneksi.php");

$username = $_REQUEST['username_user'];

$hasil = mysql_query("select * from login"); 

$base = $_REQUEST['image'];
$filename = $_ReQUEST['filename']
$buffer=base64_decode($base);
$path = "img/".$filename.".jpg";
$handle = fopen($path, 'wb');
$numbytes = fwrite($handle, $buffer);
fclose($handle);
$conn=mysql_connect("localhost","root","");
mysql_select_db("db_bloodglucose");

$sql = "UPDATE login SET file = '" . $path . "' Where username_user = $username;
$r=mysql_query($sql);

?> 
```

问题是文件没有显示在我的数据库（mysql）中，任何人都可以帮助我吗？谢谢之前

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:59:44.763

你的 $sql 看起来不对，试试：

```
$sql = "UPDATE login SET file = '$path' WHERE username_user = '$username'";
$r = mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:56:38.940

这条线

```
$sql = "UPDATE login SET file = '" . $path . "' Where username_user = $username; $r=mysql_query($sql); 
```

应该读

```
$sql = "UPDATE login SET file = '" . $path . "' Where username_user = " . $username; $r=mysql_query($sql); 
```

# c# - C# 中的编组 - 将指针传递给结构的引用（“双引用”？）

> ID：11241030
> 
> 赞同：3
> 
> 时间：2012-06-28T08:46:00.127
> 
> 标签：c#, struct, embedded, pinvoke, marshalling

我正在使用本机函数，并且在 c# 中编组结构存在小问题。我在另一个结构中有指向结构的指针 - 例如 C# 声明：

```
 [StructLayout(LayoutKind.Sequential, Pack=1, CharSet = CharSet.Auto)]
    public struct PARENT
    {
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
        public string Name;
        [MarshalAs(UnmanagedType.Struct, SizeConst=8)]
        public CHILD pChild;
    }

    [StructLayout(LayoutKind.Sequential, Pack=1, CharSet = CharSet.Auto)]
    public struct CHILD
    {
        public UInt32 val1;
        public UInt32 val2;
    } 
```

在 PARENT 结构中，我应该有一个指向 CHILD 结构的指针。我需要传递一个“指向引用的指针”（PARENT 结构）作为 API 函数的参数。

单引用（“ref PARENT”作为导入的 dll 函数的参数）没有问题，但是如何传递“ref ref”？是否可以不使用不安全代码（使用 C 指针）？

问候亚瑟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:52:08.560

如果您不想使用不安全的代码，则需要将 Child 定义为 IntPtr 并添加一个属性，该属性可以访问 Child IntPtr 中的值。

```
 [StructLayout(LayoutKind.Sequential, Pack=1, CharSet = CharSet.Auto)]
public struct PARENT
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
    public string Name;
    public IntPtr pChild;
    public CHILD Child{
      get {
       return (CHILD)Marshal.PtrToStructure(pChild, typeof(CHILD));
      }
    }
}

[StructLayout(LayoutKind.Sequential, Pack=1, CharSet = CharSet.Auto)]
public struct CHILD
{
    public UInt32 val1;
    public UInt32 val2;
} 
```

我认为使用不安全的代码/指针会更容易、更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:53:08.793

这是安全和不安全的结合，我认为这里是合理的。

```
fixed (void* pt = new byte[Marshal.SizeOf(myStructInstance)])
{
    var intPtr = new IntPtr(pt);
    Marshal.StructureToPtr(myStructInstance, intPtr, true);

    // now "pt" is a pointer to your struct instance
    // and "intPtr" is the same, but wrapped with managed code
} 
```

# plone - 裁剪图像而不是使用 Plone 和 Archetypes 缩放

> ID：11241031
> 
> 赞同：1
> 
> 时间：2012-06-28T08:46:00.530
> 
> 标签：plone, archetypes

我们想裁剪图像而不是缩放（Archetypes ImageField），以便左上角（或任何角）会以给定的比例自动显示。

我在 Plone 中有哪些选项/附加组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:12:10.247

您可能对新插件[plone.app.imagecropping](https://github.com/collective/plone.app.imagecropping)感兴趣。它基于 ggozad 的 plone.app.imaging 分支，并且由于 plone FTW 决定而被排除在外（参见 plip [#10174](http://dev.plone.org/plone/ticket/10174)）。目前没有可用的版本，但这将在不久的将来改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:49:16.697

我不知道有任何插件可以实现这一点；所以我会回答：你必须开发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:50:52.310

在服务器端裁剪图像然后维护图像的 blob 副本太痛苦了。

相反，只需使用 Archetypes 验证器设置文件上传限制，以保持文件合理小：

[http://collective-docs.readthedocs.org/en/latest/content/archetypes/files.html#setting-max-file-size-to-filefield-and-imagefield](http://collective-docs.readthedocs.org/en/latest/content/archetypes/files.html#setting-max-file-size-to-filefield-and-imagefield)

然后使用 CSS 裁剪图像。

左上角裁剪的相关css：

```
.product-listing .info-box .main-image-wrapper {
    display: block;
    background: white;
    border: 1px solid #eee;
    width: 280;
    height: 205px;
    padding: 10px;

    margin-bottom: 30px;
    box-shadow: 0 0 3px #aaa, 0 5px 3px #aaa;

    transition: background 0.5s, box-shadow 0.5s;
    -moz-transition: background 0.5s, box-shadow 0.5s; /* Firefox 4 */
    -webkit-transition: background 0.5s, box-shadow 0.5s; /* Safari and Chrome */
    -o-transition: background 0.5s, box-shadow 0.5s; /* Opera */
}

.product-listing .info-box .main-image-container {
    display: block;
    width: 280px;
    height: 205px;
    background: transparent no-repeat top left;
}

.product-listing .info-box .main-image-wrapper:hover {
    background: #eee;
    box-shadow: 0 0 3px #aaa, 0 6px 5px #666;
} 
```

相关TAL：

```
<a class="main-image-wrapper" tal:attributes="href python:view.getTargetLink(context)" tal:condition="python:getattr(product.aq_base, 'image', None) != None">
    <div class="main-image-container"
         tal:attributes="style string:background-image:url(${context/absolute_url}/@@images/image)"
         class="main-image">

         <!-- -->

    </div>

</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T11:02:14.157

不久前，我作为 paimaging 的一个分支开始为客户做这件事。它从未集成，但希望您几乎可以按原样使用它：

[https://github.com/plone/plone.app.imaging/tree/ggozad-cropping](https://github.com/plone/plone.app.imaging/tree/ggozad-cropping)

# wcf - 带有抽象类的 WCF 序列化

> ID：11241033
> 
> 赞同：0
> 
> 时间：2012-06-28T08:46:15.727
> 
> 标签：wcf, inheritance, serialization, abstract-class

我有这样定义的合同：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
 [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
 public class CommandWebService : ICommandWebService
 {
     public ExecuteResponse Execute(CommandBase command)
     {
     ...
     }
 } 
```

Command base 是一个抽象类：

```
[Serializable]
[KnownType("GetKnownTypes")]
public abstract class CommandBase : Message, ICommand
{
     public static Type[] GetKnownTypes()
     {
         var types = from asm in AppDomain.CurrentDomain.GetAssemblies()
                     from type in asm.GetTypes()
                     where typeof(CommandBase).IsAssignableFrom(type) && !type.IsAbstract
                     select type;

         return types.ToArray();
     }
} 
```

这些我在另一个项目中用于实例化我的 WCF 服务：

```
var bus = RabbitHutch.CreateBus("host=localhost"); ;
var commandHandler = new CommandHandlerService();
var projectionHandler = new ProjectionHandlerService();
var commandWebService = new CommandWebService(bus, commandHandler, projectionHandler);

using (var commandServiceHost = new ServiceHost(commandWebService))
{
     commandServiceHost.Open();
     Console.WriteLine("service started");
     var quitFlag = false;
     while (!quitFlag)
     {
         var keyInfo = Console.ReadKey();
         quitFlag = keyInfo.Key == ConsoleKey.C
                    && keyInfo.Modifiers == ConsoleModifiers.Control;
      }
} 
```

使用以下服务模型：

```
 <system.serviceModel>
        <bindings/>
        <services>
            <service name="CommandService.CommandWebService" >
                <host>
                    <baseAddresses>
                        <add baseAddress="http://localhost:1338/MyApp"/>
                    </baseAddresses>
                </host>
                <endpoint address=""
                          binding="basicHttpBinding"
                          contract="CommandService.ICommandWebService"/>
                <endpoint address="mex"
                    binding="mexHttpBinding"
                    contract="IMetadataExchange" />
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior>
                    <serviceMetadata httpGetEnabled="True"/>
                    <serviceDebug includeExceptionDetailInFaults="true" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
    </system.serviceModel> 
```

*我已经添加并删除了以下内容，但它并没有改变问题。*

```
<system.runtime.serialization>
  <dataContractSerializer>
     <declaredTypes>
       <add type="CommonDomain.CommandBase, CommonDomain, Version=1.4.0.0, Culture=neutral">
           <knownType type="MyNamespace.Cmd1, MyNamespace, Version=1.0.0.0, Culture=neutral"/>
           <knownType type="MyNamespace.Cmd2, MyNamespace, Version=1.0.0.0, Culture=neutral"/>
           <knownType type="MyNamespace.Cmd3, MyNamespace, Version=1.0.0.0, Culture=neutral"/>

       </add>
    </declaredTypes>
  </dataContractSerializer>
</system.runtime.serialization> 
```

这样做效果很好。服务启动，然后我可以在我的控制台应用程序中引用它，这给了我以下参考：

```
 [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]     
 [System.ServiceModel.ServiceContractAttribute(ConfigurationName="Contabilita.ICommandWebService")]
 public interface ICommandWebService 
 {
        [System.ServiceModel.OperationContractAttribute(Action="http://tempuri.org/ICommandWebService/Execute", ReplyAction="http://tempuri.org/ICommandWebService/ExecuteResponse")]
        [System.ServiceModel.ServiceKnownTypeAttribute(typeof(MyNamespace.Cmd1))]
        [System.ServiceModel.ServiceKnownTypeAttribute(typeof(MyNamespace.Cmd2))]
        [System.ServiceModel.ServiceKnownTypeAttribute(typeof(MyNamespace.Cmd3))]
        MyConsole.Ref1.ExecuteResponse Execute(Common.CommandBase command);
    } 
```

对我的网络服务的调用在此处详细说明：

```
var id = Guid.NewGuid();
var cmdCreate = Build.Cmd1
                     .ForCreationDate(DateTime.Now)
                     .ForDescription("test")
                     .Build(id);

var client = new Ref1.CommandWebServiceClient();

client.Execute(cmdCreate); 
```

生成的消息具有正确的 id，因为此信息是抽象类 CommandBase 的一部分，但创建日期和描述不是 xml 的一部分。

有什么我遗漏的吗？

[编辑] 我没有说的一件重要的事情。我不希望我的命令类有任何属性。[/编辑]

感谢您的阅读，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:13:53.290

就像评论中所说的那样，我的命令 Cmd1 有用于描述和创建日期的私人设置器。和使用 WCF 一样，我使用的是 xmlserializer，有两件事需要了解：

必须有一个裸体 ctor 该属性必须有一个公共设置器才能被序列化。

如果我可以从 xml 序列化程序更改为不同的东西来绕过这两个障碍，我现在会很高兴地改变。

# php - 使用 PHP 的参考编号系统

> ID：11241034
> 
> 赞同：0
> 
> 时间：2012-06-28T08:46:16.767
> 
> 标签：php, reference, numbers, system

我想为我的客户创建一个页面，他们在其中输入一个数字（参考号）并单击提交。然后他们被转移到另一个文件夹（迷你网页），这是他们的项目区域。

换句话说，假设您是客户。我需要一个地方向你展示我所做的事情以及它的外观。我使用我的网站来做到这一点，但我想要一个你只能看到自己的东西而不是其他客户的东西（安全问题）的地方。

我不想要链接，我想要一个参考编号系统。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:53:22.023

您可以从 中读取参考编号`get string`，因此每个 url 都可以指向[http://yoursite.com/?ref=AbCdEf](http://yoursite.com/?ref=AbCdEf)或[http://yoursite.com/a-page/?this=that&ref=AbCdEf](http://yoursite.com/a-page/?this=that&ref=AbCdEf)

然后在 PHP 中：

```
<?php
  if($ref = $_GET['ref']){
    // do something with $ref to load the user content
  } else {
    // no ref
  }
?> 
```

# c - Mastermind 的 Donald Knuth 算法

> ID：11241040
> 
> 赞同：2
> 
> 时间：2012-06-28T08:46:48.047
> 
> 标签：c, algorithm, knuth

我正在研究用于 Mastermind 的 Donald Knuth 1977 算法（[此处](http://en.wikipedia.org/wiki/Mastermind_%28board_game%29#Five-guess_algorithm)）。我已经实施了一些步骤，但我不知道如何计算每个可能的分数将被消除的可能性数量。

```
Integer Bulls <- 0
WHILE Bulls <= 4
    Integer Cows <- 0
    WHILE Cows <= 4
        Integer CurrentSetSize <- 0
        WHILE CurrentSetSize <= Set.size
           // Now, I should know if this possibility can be eliminated. But how ?
        END WHILE
    END WHILE
END WHILE 
```

你有什么办法吗？

谢谢。

编辑：我是用 C 做的。它不是现实中的 Mastermind，而是 Bulls & Cows，但它是一样的。

```
// ASCII-compatible

#define POSSIBILITIES           6720

struct Guess {
    int i[5];
};

struct Answer {
    int bulls;
    int cows;
};

static struct Set {
    struct Guess value;
    int    score;
} *CurrentSet;

void
initSet(void)
{
    for (int i = 'a'; i <= 'h'; ++i) {
        for (int j = 'a'; j <= 'h'; ++j) {
            if (j == i) continue;
            for (int k = 'a'; k <= 'h'; ++k) {
                if (k == j || k == i) continue;
                for (int l = 'a'; l <= 'h'; ++l) {
                    if (l == k || l == j || l == i) continue;
                    for (int m = 'a'; m <= 'h'; ++m) {
                        if (m == l || m == k || m == j || m == i) continue;
                        CurrentSet->value.i[0] = i;
                        CurrentSet->value.i[1] = j;
                        CurrentSet->value.i[2] = k;
                        CurrentSet->value.i[3] = l;
                        CurrentSet->value.i[4] = m;
                        CurrentSet->score    = 0;
                    }
                }
            }
        }
    }
}

void
computeScore(int index)
{
    struct answer p;

    for (p.bulls = 0; p.bulls <= 4; ++p.bulls) {
        for (p.cows = 0; p.cows <= 4; ++p.cows) {
            for (int i = 0; i < POSSIBILITIES; ++i) {

            }
        }
    }
}

void
updateSet(void)
{
    for (int i = 0; i < POSSIBILITIES; ++i)
        computeScore(i);
} 
```

# php - 堆栈溢出和递归 - 如何防止函数完成后返回到原始函数？

> ID：11241042
> 
> 赞同：1
> 
> 时间：2012-06-28T08:46:57.020
> 
> 标签：php, function, recursion, stack-overflow

例如，如果我有这样的代码（php）：

```
<?php
  somefunc(1);

  function somefunc($a) {
    for($i=1;$i<11;$i++) {
      if ($i==5&&$a) {
        $a--;
        somefunc($a);
      }
      echo "$i <br>";
    }
  }
?> 
```

输出是

1 2 3 4 **1 2 3 4 5 6 7 8 9 10** *5 6 7 8 9 10*

我想要输出为

1 2 3 4 **1 2 3 4 5 6 7 8 9 10**

（斜体部分去掉）

我不希望它返回主功能。可以做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:55:34.017

只需从函数返回。

```
<?php
somefunc(1);

function somefunc($a) {
  for($i=1;$i<11;$i++) {
    if ($i==5&&$a) {
      $a--;
      return somefunc($a);
    }
    echo "$i <br>";
  }
}
?> 
```

# garbage-collection - 删除不需要的子视图并在 Monotouch 中处理它的正确方法

> ID：11241045
> 
> 赞同：1
> 
> 时间：2012-06-28T08:47:05.347
> 
> 标签：garbage-collection, xamarin.ios, dispose, subview

我有一个从 UIControl 派生的名为 MyObject 的类，我还有一个包含多个 MyObject 类型对象的 List。

在调用 base.ViewDidLoad() 之前，所有这些对象都作为子视图添加到 UIViewController 的 ViewDidLoad 重写方法中；（我不知道这是否重要）。

问题是在某些时期我想删除几个对象，因为我不再需要它们了。以下是我采取的步骤： - 首先，我从我的通用列表集合中删除该对象 - 然后我使用 RemoveFromSuperview() 方法将其从视图中删除。此时一切正常，但我也想从内存中删除它，因为我不再需要它而且我还需要添加更多对象，所以我必须释放一些内存。所以我在那个对象上调用 Dispose() 方法。

一旦我这样做，我就会得到一个令人讨厌的例外：

```
Stacktrace:

at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging.void_objc_msgSendSuper_RectangleF (intptr,intptr,System.Drawing.RectangleF) <IL 0x00025, 0xffffffff>
at MonoTouch.UIKit.UIView.set_Frame (System.Drawing.RectangleF) [0x00021] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIView.g.cs:1179
at BubbleBuster.Lib.UI.Gameplay.Bubble.Update (System.Drawing.RectangleF) [0x001a2] in /Development/Helix/iOS/BubbleBuster/BubbleBusterSolution/BubbleBusterApp/Lib/UI/Gameplay/Bubble.cs:141
at BubbleBuster.Lib.UI.Gameplay.BubbleCollection/<Update>c__AnonStorey2.<>m__4 (BubbleBuster.Lib.UI.Gameplay.Bubble) [0x00014] in /Development/Helix/iOS/BubbleBuster/BubbleBusterSolution/BubbleBusterApp/Lib/UI/Gameplay/BubbleCollection.cs:21
at System.Collections.Generic.List`1.ForEach (System.Action`1<T>) [0x00018] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Collections.Generic/List.cs:360
at BubbleBuster.Lib.UI.Gameplay.BubbleCollection.Update (System.Drawing.RectangleF) [0x00014] in /Development/Helix/iOS/BubbleBuster/BubbleBusterSolution/BubbleBusterApp/Lib/UI/Gameplay/BubbleCollection.cs:19
at BubbleBuster.Lib.UI.Screens.WelcomeScreen.<UpdateTime_Elapsed>m__1 () [0x00000] in /Development/Helix/iOS/BubbleBuster/BubbleBusterSolution/BubbleBusterApp/Lib/UI/Screens/WelcomeScreen.cs:44
at MonoTouch.Foundation.NSActionDispatcher.Apply () [0x00000] in /Developer/MonoTouch/Source/monotouch/src/shared/Foundation/NSAction.cs:48
at (wrapper runtime-invoke) object.runtime_invoke_void__this__ (object,intptr,intptr,intptr) <IL 0x0004e, 0xffffffff>
at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x0009f, 0xffffffff>

Thread started: 
at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29
at BubbleBuster.Application.Main (string[]) [0x00000] in /Development/Helix/iOS/BubbleBuster/BubbleBusterSolution/BubbleBusterApp/Main.cs:17
at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00050, 0xffffffff>

Native stacktrace:

0   BubbleBusterApp                     0x0009094c mono_handle_native_sigsegv + 284
1   BubbleBusterApp                     0x00005cd8 mono_sigsegv_signal_handler + 248
2   libsystem_c.dylib                   0x9923959b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   ???                                 0x0e2662b8 0x0 + 237396664
5   ???                                 0x0e2661dc 0x0 + 237396444
6   ???                                 0x0e2651c6 0x0 + 237392326
7   ???                                 0x0e269920 0x0 + 237410592
8   ???                                 0x0e24f8e2 0x0 + 237304034
9   ???                                 0x0e2697e4 0x0 + 237410276
10  ???                                 0x0e269678 0x0 + 237409912
11  ???                                 0x0e2695e0 0x0 + 237409760
12  ???                                 0x09fe9a90 0x0 + 167680656
13  BubbleBusterApp                     0x0000a042 mono_jit_runtime_invoke + 722
14  BubbleBusterApp                     0x00169f4e mono_runtime_invoke + 126
15  BubbleBusterApp                     0x00206748 monotouch_trampoline + 3416
16  CoreFoundation                      0x011d6e42 -[NSObject performSelector:withObject:] + 66
17  Foundation                          0x017509df __NSThreadPerformPerform + 254
18  CoreFoundation                      0x011a994f __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
19  CoreFoundation                      0x0110cb43 __CFRunLoopDoSources0 + 243
20  CoreFoundation                      0x0110c424 __CFRunLoopRun + 1012
21  CoreFoundation                      0x0110bd84 CFRunLoopRunSpecific + 212
22  CoreFoundation                      0x0110bc9b CFRunLoopRunInMode + 123
23  GraphicsServices                    0x047c47d8 GSEventRunModal + 190
24  GraphicsServices                    0x047c488a GSEventRun + 103
25  UIKit                               0x02258626 UIApplicationMain + 1163
26  ???                                 0x0d7c4a05 0x0 + 226249221
27  ???                                 0x0d53cf18 0x0 + 223596312
28  ???                                 0x0d53cc10 0x0 + 223595536
29  ???                                 0x0d53cd66 0x0 + 223595878
30  BubbleBusterApp                     0x0000a042 mono_jit_runtime_invoke + 722
31  BubbleBusterApp                     0x00169f4e mono_runtime_invoke + 126
32  BubbleBusterApp                     0x0016e034 mono_runtime_exec_main + 420
33  BubbleBusterApp                     0x00173455 mono_runtime_run_main + 725
34  BubbleBusterApp                     0x00067245 mono_jit_exec + 149
35  BubbleBusterApp                     0x002116a5 main + 2837
36  BubbleBusterApp                     0x00003095 start + 53

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:02:12.170

从这里：

```
at MonoTouch.UIKit.UIView.set_Frame (System.Drawing.RectangleF) [0x00021] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIView.g.cs:1179 
```

看起来您正在将 Frame 设置在已被释放的视图上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:37:26.703

创建视图时，将其标记设置为 333 即处置视图： MyCreatedView.ViewWithTag(333).RemoveFromSuperview();

其中 -MyCreatedView- 是您要删除的视图的父视图。

# objective-c - 将像素点转换为纬度和经度

> ID：11241049
> 
> 赞同：1
> 
> 时间：2012-06-28T08:47:16.043
> 
> 标签：objective-c, ios

我正在尝试为 iOS 创建自定义地图。目前我正在为自定义地图应用程序使用 Openstreetmap 图像。

现在我想要的是在特定缩放级别将像素点转换为纬度和经度值。我正在找出我单击的图块（像素点）。我需要找出那个特定点的纬度和经度。这如何计算？是否有任何通用公式可以从像素点找到纬度和经度。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:00:46.303

你知道 route-me (https://github.com/route-me/route-me) 吗？它是一个开源的 iOS 地图库。[我使用在https://github.com/Alpstein/route-me](https://github.com/Alpstein/route-me)找到的这个库的一个分支。这些库提供您正在寻找的投影，甚至可能提供您必须自己实现的其他功能。

# html - 在多个页面中重复相同的 HTML 代码

> ID：11241056
> 
> 赞同：9
> 
> 时间：2012-06-28T08:47:56.627
> 
> 标签：html, static, editor, repeat

我很难找到这个，因为我不知道如何调用它。

我将尝试描述我想要的过程，看看你们中是否有人知道这样的编辑器。我有一个网站，其中重复了相同的 html 组件，例如菜单。我可以用 css 定义菜单的外观，但我不能（据我所知）用简单的一行将同一段 html 添加到每个 html 页面。我所做的是将菜单复制到每个地方。如果我改变菜单，我需要再做一遍。我知道这可以通过使用动态服务器来实现，例如 php 或 jsp，但我不需要它是动态的。

我想知道是否有办法做到这一点。我想可能有一个编辑器，我可以在其中使用包含编辑 html，然后在修改后“编译”html，以生成我将在我的服务器上替换的 html。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:57:50.817

看看[服务器端包含](http://en.wikipedia.org/wiki/Server_Side_Includes)...创建一个`menu.shtml`页面，然后像这样包含它：

```
<!--#include virtual="/menu.shtml" --> 
```

大多数开箱即用的 Web 服务器都支持它（包括 IIS、Apache 和 lighttpd）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T08:55:23.597

您听说过[MasterPage 概念吗](http://www.codeproject.com/Articles/114458/Master-Pages-using-HTML-and-JavaScript)

以下链接将为您提供快速入门

母版页是将充当所有其他页面的框架的页面。你只需要写一个。并且在此之下的每个页面都必须包含母版页。就这样！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-11T16:19:41.837

你可以用jquery做到这一点

假设您有 page1.html page2.html 等。

您希望在每个页面中都有您的联系信息。您可以创建一个名为“info.txt”的文件。在您想要此联系信息的地方，放置一个 div。如本例所示

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <!-- page content -->
    <div id="contact"></div>
  </body>
</html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

<script>
$(document).ready(function(){
        $("#contact").load("info.txt");
    ;
});
</script> 
```

无论您在“info.txt”中放置什么，都将放在您放置的位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T08:54:13.407

您可以在外部文件中编写一些简单的js，然后在每个页面中调用它以动态加载菜单。然后，您可以通过编辑 JS 文件来简单地编辑菜单。然后你需要做的就是在 html 中包含并使用 document.getElementById("menu").innerHTML = menuHTML; 其中 menuHTML 是一个包含菜单的纯 HTML 代码的变量。然后您可以包含 JS 文件并在正文 onload 中调用它

# qt - 设置 QDockWidget::title 样式表

> ID：11241058
> 
> 赞同：1
> 
> 时间：2012-06-28T08:48:04.880
> 
> 标签：qt, qdockwidget, qtstylesheets

我最初的问题是使 QDockWidget 标题加粗。我试过了，它奏效了：

```
myDock->setStyleSheet("QDockWidget { font: bold }"); 
```

但我不明白为什么以下代码不起作用：

```
myDock->setStyleSheet("QDockWidget::title { font: bold }"; 
```

即使我使用更复杂的样式表，它的每个参数都有效果，除了`font: bold`：

```
myDock->setStyleSheet("QDockWidget::title { font: bold;
                                            text-align: left; 
                                            background: red; 
                                            padding-left: 30px; }"); 
```

QDockWidget::title 字体有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T08:24:28.590

首先，我不知道为什么字体不起作用，我只能问。我有一种感觉，默认标题栏类似于几乎不可能设置样式的窗口标题栏。我正在搜索用于标题栏的小部件的源代码，但一无所获。[这](https://qt.gitorious.org/qt/qt/source/gui/widgets/qdockwidget.cpp)是一些代码，祝你好运。

我认为样式表不支持字体更改。默认情况下，对于从 QWidget 派生的所有内容，背景等参数都将始终有效。字体之类的其他东西可能会也可能不会实现。

但是你为什么不制作自定义标题栏呢？它可以是任何捆绑在 QWidget 中的东西。

```
QLabel *label = new QLabel("Header Text", myDock);
label->setStyleSheet("color: orange; font-size: 14pt; font-weight: bold;");
myDock->setWidget(bodyWidget);
myDock->setTitleBarWidget(label); 
```

我已经用 Qt 5.3 进行了测试，它可以工作，尽管缺少关闭或取消停靠等按钮：-/

我认为您可以创建它们（使用按钮左右）并将所有内容捆绑在一个小部件中，然后使用 setTitleBarWidget 设置它并连接一些信号。关闭按钮至少有 hide() 插槽，您可能必须使用 setFloat 为浮动编码插槽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T11:35:01.097

`QDockWidget *dock = new QDockWidget(); QFont curFont = dock->font(); curFont.setBold(true); dock->setFont(curFont);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:33:00.420

像这样指定它

```
MyDock->setStyleSheet("QDockWidget::title { font: 75 11pt "Ubuntu";}"); 
```

其中 75 是粗体参数，11pt 是字体大小，“Ubuntu”是字体类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-14T13:17:52.777

您缺少分号（和右括号？）。

```
myDock->setStyleSheet("QDockWidget::title { font: bold; }"); 
```

# c# - LINQ to MySQL 查询不返回结果

> ID：11241061
> 
> 赞同：2
> 
> 时间：2012-06-28T08:48:11.947
> 
> 标签：c#, .net, mysql, linq, linq-to-sql

我正在尝试使用 LINQ 来查询 MySQL 数据库。

首先，我已经安装了 MySQL .NET 连接器。然后在 Visual Studio 中创建一个新的控制台应用程序。

然后我单击`Data`工具栏中的 并单击`Add New Data Source`。

在我选择的数据源配置向导`Database => Dataset => New Connection`中，我配置我的连接参数，然后我选择我的相关表、视图等并点击完成。

我的数据源是命名`Foo`的，我要查询的表是命名的`Bar`。

然后我尝试使用 LINQ 查询我的数据表，如下所示：

```
fooDataSet.barDataTable foobar = new fooDataSet.barDataTable();
var results = from data in foobar
              select data;

foreach (var result in results)
{
    Console.WriteLine(result);
}; 
```

我假设这相当于下面的 MySQL

```
SELECT * FROM BAR; 
```

即使我的表（栏）中有大量数据，我也没有得到任何数据。当我适当地断点，并深入到我的结果变量的结果视图中时，它只是说Ж

> 枚举没有结果

![在此处输入图像描述](../Images/b76abe9107039a5116397fb4f7dff05b.png)

我在哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T08:55:56.593

您正在创建一个新表，然后尝试从中读取数据（其中没有任何内容，它是新的！）

在 LINQ to SQL 中，您可以这样做：

```
var results = from data in fooDataset.bar 
              select data; 

foreach (var result in results) 
{ 
    Console.WriteLine(result); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:22:11.700

我通过在 Windows 窗体上重复初始步骤，将要查询的表从服务器资源管理器拖到 Windows 窗体上，然后分析代码来解决这个问题。

事实证明，我首先需要创建我的数据集 (Foo) 的一个实例，然后为我的表 (Bar) 创建一个 TableAdapter 实例。

完成此操作后，我调用`Fill`表适配器的方法，使用点表示法传入数据集中的表名。

然后我运行表适配器的 GetData() 的 AsEnumerable() 扩展方法来获取 EnumerableRowCollection，然后我可以使用 LINQ 运行查询。我的代码如下：

```
static void Main(string[] args)
{
    fooDataSet fooDataSet = new fooDataSet();
    fooDataSetTableAdapters.barTableAdapter barTableAdapter = new fooDataSetTableAdapters.barTableAdapter();

    barTableAdapter.Fill(fooDataSet.bar);

    var myDataTable = barTableAdapter.GetData().AsEnumerable();

    var bnl = from results in myDataTable
              select results;

    Console.ReadLine();
} 
```

旁注，在 Visual Studio 创建的 XSD 文件中，如果您尝试将条件应用于具有任何空值的列，则默认情况下，每个表中的每个字段都设置为引发异常。您需要将 XSD 中字段的 NullValue 属性更改为 (Empty) 或 (Null) 以避免这种情况。

# jquery - 自定义帖子类型 Ajax 帖子问题

> ID：11241063
> 
> 赞同：0
> 
> 时间：2012-06-28T08:48:15.630
> 
> 标签：jquery, ajax, wordpress, pagination, custom-post-type

我创建了一个名为“人物”的自定义帖子类型。我创建了一个页面模板来显示来自帖子类型的帖子，并分为两个类别，名为“大使”和“学生”。问题是我在此页面上启用了 ajax 帖子。当您单击下面的任何拇指时，它会更改两个类别块中的帖子。

这是页面的链接：[http ://rjmultimedia.in/relais/?page_id=37](http://rjmultimedia.in/relais/?page_id=37)

下面是ajax导航的jQuery代码

```
// Ajaxed navigation people slider
jQuery(document).ready(function(){
    jQuery('.peoplecarousel a').live('click', function(e)  {
    e.preventDefault();
    var link = jQuery(this).attr('href');
    jQuery('.people_full').fadeOut(500).load(link + ' .people_full', function() {
    jQuery('.people_full').fadeIn(500);
    jQuery('.nano').nanoScroller({
        preventPageScrolling: true
    });
    jQuery(".people_full_desc_content").nanoScroller();
     });
    });
}); 
```

请让我知道如何解决这个问题，因为我也无法为自定义帖子类型创建两个不同的 single.php 文件。

如上所述，我有两个自定义帖子类型的类别。我需要的是，如果有人点击学生的缩略图，只有“学生”的完整帖子应该改变，而不是“大使”的帖子。它认为这应该通过针对不同分类法（自定义帖子类型类别）的不同 single.php 来实现，但不知道如何做到这一点，因为 wordpress 没有任何此类定制功能。

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:55:20.120

改变

```
jQuery('.people_full') 
```

到

```
 jQuery('.people_full', jQuery(this).parent('.peoplecarousel')) 
```

这将仅在单击的链接的父 .peoplecarousel 内搜索 .people_full 元素。

# smtp - 使用 SMTP 的最大电子邮件附件大小？

> ID：11241066
> 
> 赞同：9
> 
> 时间：2012-06-28T08:48:33.210
> 
> 标签：smtp, mime

我有一个将发送大量输出的程序。我只是想知道最大电子邮件附件大小是多少？根据[RFC 1870](https://www.rfc-editor.org/rfc/rfc1870)，邮件服务器可以拒绝邮件，因为它们太大了，但是使用 SMTP/MIME 时有最大大小吗？我在这方面找不到任何东西！我听说人们发送的最大容量是 25mb。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T17:32:34.677

相关的 RFC 是 RFC 2821 (SMTP)。[在http://www.ietf.org/rfc/rfc2821.txt](http://www.ietf.org/rfc/rfc2821.txt)找到它。

请参阅“4.5.3.1 尺寸限制和最小值”部分

它在那里说（目标受众是 SMTP 协议的实施者）：

> 应尽可能避免消息大小限制

这并不意味着在实践中，由于实施选择或通过邮件服务器的配置故意限制，这些限制不存在。

另请注意，附件（按协议）只是消息的一部分。这些是由电子邮件客户端编码的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:27:07.053

我有客户发送 100 兆封 GIS 图像电子邮件。唯一的限制是 SMTP 服务器的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T19:10:58.320

许多邮件服务器对它们接受的邮件大小施加了限制，但这是针对每个服务器的设置。如果服务器实现 ESMTP SIZE 扩展（大多数都这样做），您可以找到限制。这在您所指的 RFC 中有详细记录。

# delphi - 如何在 Delphi 选项对话框中添加我自己的项目

> ID：11241068
> 
> 赞同：2
> 
> 时间：2012-06-28T08:48:33.917
> 
> 标签：delphi, delphi-xe2

如何将我自己的项目添加到 Delphi 选项对话框（工具\选项）？例如，请参阅[Project JEDI](http://sourceforge.net/projects/jvcl/ "SourceForge 的 JEDI VCL")选项。

![Delphi 选项对话框中项目 JEDI 项目的屏幕截图](../Images/49effa865f1963837a9311408edb3e0b.png)

例如，对我来说，有必要有我的书签，其中包含我的组件和新项目的编译选项。例如，我有一个新项目，在它的面板和上面的 3 个复选框中如何添加？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:20:04.040

关键是`INTAEnvironmentOptionsServices`和`INTAAddInOptions`接口。XE 中的工具 API 添加了对[自定义选项对话框](http://docwiki.embarcadero.com/RADStudio/en/Tools_API_Changes_for_XE)的加载项的支持。您的加载项需要提供`INTAAddInOptions`. 您可以通过调用来注册加载项选项`INTAEnvironmentOptionsServices.RegisterAddInOptions`。

如果您无法从工具 API 源代码中弄清楚如何执行此操作，那么我建议您下载 JCL 源代码以用作您的模板。

[Uwe Schuster](http://www.bitcommander.de/blog/index.php/2010/09/16/xe-ota-1/)关于该主题的博客文章给出了一般概述，但我找不到任何其他涵盖该主题的文章。

# objective-c - 使用 Cocoa 流式传输实时音频数据（来自线路输入）

> ID：11241069
> 
> 赞同：3
> 
> 时间：2012-06-28T08:48:36.563
> 
> 标签：objective-c, macos, cocoa, http, streaming

我想通过来自 Mac 线路的 HTTP 流传输实时录制的音频。在搜索这个问题时，我发现了很多关于如何接收流的教程，但没有关于发送流的教程。

有没有关于发送不基于静态本地文件的流的教程？我在 CocoaHTTPServer 上找到了一些资料，但我相信这个服务器只能流式传输静态文件。我是对的？

# java - 如果不是多态，我如何为这些类建模

> ID：11241073
> 
> 赞同：2
> 
> 时间：2012-06-28T08:49:05.080
> 
> 标签：java, oop, google-app-engine, google-cloud-datastore, objectify

好吧，假设我正在为以下足球俱乐部建模：所有人都是个人。玩家是一个人，因此扩展了个人。会员是一个人，因此扩展了个人。

超类：

```
Individual {name, eyeColour} 
```

子类：

```
Player extends Individual {position}
Member extends Individual {subscription} 
```

汤姆是足球俱乐部的老板：

```
Individual i = new Individual("Tom", "Blue") 
```

鲍勃和托尼是球员：

```
Player p1 = new Player("Bob", "Green", "Goalkeeper")
Player p2 = new Player("Tony", "Blue", "Striker") 
```

史蒂夫是会员：

```
Member m = new Member("Steve", "Brown", 5.00) 
```

个人、玩家和会员都使用 Objectify 持久化到 GAE 数据存储中的相同种类（个人）。

```
    姓名 eyeColor 位置订阅 ^d
    汤姆·布鲁[失踪][失踪]个人
    鲍勃格林守门员[失踪]球员
    托尼·蓝前锋 [失踪] 球员
    史蒂夫布朗 [失踪] 5.00 会员

```

例如，如果 Bob 决定成为会员和玩家怎么办？我要存储的是订阅。我不能将 Bob 上调给个人，然后再下调给会员。Java 不允许这样做。我无法创建新成员并复制 Bob 的 Player 对象的所有属性并使用相同的 id 将其存储回来 - 我将失去他的 Position 属性。我需要 Bob 在 datstore 中既是成员又是玩家，但不是对象形式（我不是在多重继承之后）我仍然想获取（Player.class，“Bob”）并拥有一个玩家对象(Member.class,"Bob") 并拥有一个 Member 对象。我不需要同时具有位置和订阅属性的对象。

我也想避免这是数据存储：

```
    姓名 eyeColor 位置订阅 ^d
    汤姆·布鲁[失踪][失踪]个人
    鲍勃格林守门员[失踪]球员
    鲍勃格林 [失踪] 10.00 会员
    托尼·蓝前锋 [失踪] 球员
    史蒂夫布朗 [失踪] 5.00 会员

```

因为 Bob 现在在 name 和 eyeColour 上有数据重复，这可能导致数据不一致。

关于如何建模的任何想法？

另外，如果汤姆成为球员，或者史蒂夫成为会员怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:57:02.613

```
Individual {name, eyeColour}
MemberRole {individual, position}
PlayerRole {individual, subscription} 
```

很明显，继承不适合您的任务。例如，某人可能在两支不同的球队踢球或成为两支不同俱乐部的成员（而您的原始结构根本不允许拥有一个以上的足球俱乐部）。

个人是什么，他们有什么角色，是不同的事情。例如，您不希望某个全局数据库将您的姓名、stackoverflow 积分、婚姻状况和职业都存储在同`Individual`一张表中。

如果 Bob 决定成为会员，Bob 本身不会改变；它的作用。决定成为会员的鲍勃还是老鲍勃一样的好，只是他现在可以做一些他之前被禁止做的事情。

PS：您在答案中使用了*订阅一词。*这就是你的*Player* ——一个*Subscription*。`Subscription`s 显然不是 s 的某个特定子集`Individual`，`Subscription`是一个完全不同的实体。当然，它应该知道`Individual`它属于什么，但它不是一个`Individual`自身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T09:01:53.640

一开始我会把每个人都看成是一个`Individual`，但你想让某些人成为一个`Player`或一个`Member`或`both`。您需要使用`Interfaces`. 因为我不喜欢 Java，我建议做一些类似于这段代码的事情：

```
interface IPlayable {void MakePlayable (string position)};
interface IMembership {void AddMembership (double subscription)};

class Individual implements IPlayable, IMembership{name, eyeColour, IPlayable.MakePlayable(string position), IMembership.AddMembership(double subscription)};

//Usage to make Tom a Player
Individual tom = new Individual("Tom", "Blue");
tom.MakePlayable("GoalKeeper");

//Usage to make Steve a Member
Individual steve = new Individual("Steve", "Brown");
steve.AddMembership(5.00);

//Usage to make Jim both a Player and a Member
Individual jim = new Individual("Jim", "Black");
jim.MakePlayable("Forward");
jim.AddMembership(4.00); 
```

> 除了实现多接口场景之外，这里还需要使用接口，因为使用 Member 类会使个人成为某个俱乐部的永久成员，使用 IMembership 接口可以添加一个`RemoveMembership()`方法，该方法有助于`Individual`在需要时删除成员资格在未来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:27:54.907

```
public class Individual {
    Role role;
    int    position;     //empty for MEMBER,filled for PLAYER_MEMBER and PLAYER
    int    subscription; //empty for PLAYER,filled for PLAYER_MEMBER and MEMBER }

public enum Role {  MEMBER,PLAYER,PLAYER_MEMBER; } 
```

因此，完成切换后，您只需更改角色并填写缺失的字段。应该进行验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T09:10:19.940

请参阅GAE 文档中的[JDO 中的实体关系：](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships)

> 您可以使用对象类型的字段对持久对象之间的关系进行建模。持久对象之间的关系可以描述为拥有，其中一个对象不能没有另一个而存在，或者是无主的，其中两个对象可以独立于它们彼此的关系而存在。JDO 接口的 App Engine 实现可以对拥有和无主的一对一关系和一对多关系进行建模，包括单向和双向。

我会说你有两个“拥有”的关系。`Player`并且`Member`都“拥有”一个`Individual`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T09:04:13.563

尝试这个...

个人是***SuperClass*。**

播放器和成员作为***接口*。**

假设 Bob 既是玩家又是成员。

现在..

Bob 是一个 Individual （即**扩展 Individual**）

Bob**实现**了Player 和 Member**接口**（即 Bob 扮演 Player 和 Member 的角色）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T10:35:17.750

创建一个个人类（名称、眼睛颜色）并创建所有者、玩家和成员的接口。您将拥有独特的个体，并且不断向他们添加功能。因此，您将拥有一个您想要的表格，最后一列将列出不同的实现。

使用接口比实现多重继承要好得多，java就是这样做的。所以最好用这个

# javascript - 文本区域中的换行符增加 C# 中的文本长度

> ID：11241076
> 
> 赞同：9
> 
> 时间：2012-06-28T08:49:24.567
> 
> 标签：javascript, asp.net-mvc, validation, textarea, newline

我在我的 asp.net mvc 应用程序中遇到了这个问题。

在我的一个模型中，有一个“描述”字段。此字段的数据库列设置为`NVarchar(300)`。

在我看来，我正在创建一个文本区域，如下所示。

```
@Html.TextAreaFor(m => m.Description, new { maxlength = "300" }) 
```

我正在使用“jquery.validate.unobtrusive.min.js”进行客户端验证。因此，当用户在文本区域中键入并且内容长度超过 300 个字符时，它会显示消息“请输入不超过 300 个字符”。

一切正常，直到出现以下场景。用户在文本区域输入以下数据。

```
f
f
f
f
f
f
f
f
sdfa 
```

（此内容有 8 个新行）

根据“不显眼”验证，此内容的长度为 300 **（将每个新行“\n”计为单个字符）**，因此验证通过并且页面回发。

在我的 C# 代码中，由于编码，相同的内容变为长度为 308 **（将每个新行“\r\n”计为 2 个字符）**，这实际上使数据库操作失败，因为它只允许 300 个字符。

如果有人说我应该`StringLength`在这个特定属性上具有属性，我有以下原因没有它。

如果我放置此属性，则此特定属性不会发生客户端验证，它会转到服务器，并且由于模型无效，它会返回页面并显示错误消息。

请告诉我可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T05:01:20.730

在仔细查看@Chris 的解决方案后，我发现这将导致除 textarea`@maxlength`属性之外的任何控件的无限循环。
此外，我发现使用`value`（=传递给验证器的文本区域的值）已经切断了前导和尾随换行符，这意味着数据库操作在尝试保存包含这些换行符的文本时仍然失败。
所以这是我的解决方案：

```
(function ($) {
    if ($.validator) {
        //get the reference to the original function into a local variable
        var _getLength = $.validator.prototype.getLength;

        //overwrite existing getLength of validator
        $.validator.prototype.getLength = function (value, element) {

            //double count line breaks for textareas only
            if (element.nodeName.toLowerCase() === 'textarea') {

                //Counts all the newline characters (\r = return for macs, \r\n for Windows, \n for Linux/unix)
                var newLineCharacterRegexMatch = /\r?\n|\r/g;

                //use [element.value] rather than [value] since I found that the value passed in does cut off leading and trailing line breaks.
                if (element.value) {

                    //count newline characters
                    var regexResult = element.value.match(newLineCharacterRegexMatch);
                    var newLineCount = regexResult ? regexResult.length : 0;

                    //replace newline characters with nothing
                    var replacedValue = element.value.replace(newLineCharacterRegexMatch, "");

                    //return the length of text without newline characters + doubled newline character count
                    return replacedValue.length + (newLineCount * 2);
                } else {
                    return 0;
                }
            }
            //call the original function reference with apply
            return _getLength.apply(this, arguments);
        };
    }
})(jQuery); 
```

我在 Chrome 和几个 IE 版本中对此进行了测试，对我来说效果很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T13:32:56.883

在包含 jquery.validate.js 之后，您可以通过将以下内容添加到您的 javascript 中来更改客户端验证中 getLength 的行为以重复计算换行符。这将导致服务器端和客户端长度方法匹配，让您使用 StringLength 属性（我假设您对 StringLength 的问题是服务器和客户端验证方法不同）。

```
$.validator.prototype._getLength = $.validator.prototype.getLength;
$.validator.prototype.getLength = function (value, element) {
// Double count newlines in a textarea because they'll be turned into \r\n by the server. 
    if (element.nodeName.toLowerCase() === 'textarea')
        return value.length + value.split('\n').length - 1;
    return this._getLength(value, element);
}; 
```

# php - 从数据库中获取数据并使用鼠标悬停在表格中显示它而不刷新页面

> ID：11241077
> 
> 赞同：-1
> 
> 时间：2012-06-28T08:49:26.253
> 
> 标签：php, jquery, ajax, jsp, plugins

我正在开发饼图的应用程序（从[这里](http://www.elated.com/res/File/articles/development/javascript/snazzy-animated-pie-chart-html5-jquery/ "这里")获取帮助）。现在我在鼠标悬停/悬停到该表时构建它，它将显示另一个表，其中包含另一个列值[假设 tablename:widgetsold; column:Widget,Sales,Profit,Purchase,..] 无需刷新页面（因为我正在使用 jsp）。

这是jquery：函数init（）{

```
// Get the canvas element in the page
canvas = document.getElementById('chart');

// Exit if the browser isn't canvas-capable
if ( typeof canvas.getContext === 'undefined' ) return;

// Initialise some properties of the canvas and chart
canvasWidth = canvas.width;
canvasHeight = canvas.height;
centreX = canvasWidth / 2;
centreY = canvasHeight / 2;
chartRadius = Math.min( canvasWidth, canvasHeight ) / 2 * ( chartSizePercent / 100 );

// Grab the data from the table,
// and assign click handlers to the table data cells

var currentRow = -1;
var currentCell = 0;

$('#chartData td').each( function() {
  currentCell++;
  if ( currentCell % 2 != 0 ) {
    currentRow++;
    chartData[currentRow] = [];
    chartData[currentRow]['label'] = $(this).text();
  } else {
   var value = parseFloat($(this).text());
   totalValue += value;
   value = value.toFixed(2);
   chartData[currentRow]['value'] = value;
  }

  // Store the slice index in this cell, and attach a click handler to it
  $(this).data( 'slice', currentRow );
  $(this).hover( handleTableClick );
  $(this).click( handleTableClick );

  // Extract and store the cell colour
  if ( rgb = $(this).css('color').match( /rgb\((\d+), (\d+), (\d+)/) ) {
    chartColours[currentRow] = [ rgb[1], rgb[2], rgb[3] ];
  } else if ( hex = $(this).css('color').match(/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/) ) {
    chartColours[currentRow] = [ parseInt(hex[1],16) ,parseInt(hex[2],16), parseInt(hex[3], 16) ];
  } else {
    alert( "Error: Colour could not be determined! Please specify table colours using the format '#xxxxxx'" );
    return;
  }

} );

// Now compute and store the start and end angles of each slice in the chart data

var currentPos = 0; // The current position of the slice in the pie (from 0 to 1)

for ( var slice in chartData ) {
  chartData[slice]['startAngle'] = 2 * Math.PI * currentPos;
  chartData[slice]['endAngle'] = 2 * Math.PI * ( currentPos + ( chartData[slice]['value'] / totalValue ) );
  currentPos += chartData[slice]['value'] / totalValue;
}

// All ready! Now draw the pie chart, and add the click handler to it
drawChart();
$('#chart').click ( handleChartClick ); 
```

}

和我的jsp页面：

```
<body>
<% 
String s1= "A";
String s2= "B";

Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost/apps","root","root");
Statement stmt = con.createStatement();
String sql1="select count(case when device='"+s1+"' then 1 end) as A,count(case when device='"+s2+"' then 1 end) as B from user_management;";

ResultSet rs1 = stmt.executeQuery(sql1);

System.out.println(sql1);
%>

<div id="container">

<div class="wideBox">
<h1>Chart</h1>
</div>

<canvas id="chart" width="500" height="440"></canvas>

<table id="chartData">

<% while(rs1.next()){ %>
<tr>
  <th>Team</th><th>Players</th>
 </tr>

<tr style="color: #0DA068">
  <td>A</td><td><%= rs1.getString(1)%></td>
</tr>

<tr style="color: #194E9C">
  <td>B</td><td><%= rs1.getString(2)%></td>
</tr>       
 <% } 

%>

</table>
</div>
</body> 
```

我已经浏览了许多站点并了解到在 AJAX 的帮助下，PHP 可以完成，但我正在使用 JSP。我想实现在鼠标悬停时显示另一个表以显示每一行的相关详细信息。

所以任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:58:18.913

把你的问题分解成小部分。鼠标悬停部分可以使用 JavaScript 完成。写这个，让它显示一些数据（你在 JS 中定义的）。完成该部分后，您可以使用 AJAX 更新包含测试数据的 JavaScript 部分以实际获取实时数据。

AJAX 是一种可以使用的技术，而不是必须在您的服务器端语言中定义的技术。任何以机器可读格式（提示：[JSON](http://code.google.com/p/json-simple/wiki/JSPAndAJAXExamples)）返回数据的 servlet 都可以被一段 JavaScript 调用，瞧：AJAX。

# django - Django 中的 django.contrib.auth.logout

> ID：11241080
> 
> 赞同：18
> 
> 时间：2012-06-28T08:49:32.930
> 
> 标签：django

我想使用 Django 的注销功能，但不知道如何正确使用它。我一直在参考这个 Django 用户身份验证：[https](https://docs.djangoproject.com/en/dev/topics/auth/) ://docs.djangoproject.com/en/dev/topics/auth/它读取

```
from django.contrib.auth import logout

def logout_view(request):
    logout(request)
    # Redirect to a success page. 
```

对我来说令人困惑的部分是 # 重定向到成功页面。我如何将其重定向到另一个页面。我应该使用 HttpResponseRedirect 还是向注销（请求）添加其他参数。我不知道该怎么做..需要一些指导。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T20:16:12.737

Django 有一个快捷方法，称为`redirect`. 您可以使用它来重定向，如下所示：

```
from django.contrib.auth import logout
from django.shortcuts import redirect

def logout_view(request):
    logout(request)
    return redirect('home') 
```

`home`您定义的 url 模式的名称在哪里，`urls.py`如下所示：

```
urlpatterns = patterns('',
    url(r'^$', 'blah.views.index', name='home'))
) 
```

在`redirect`调用中，您也可以使用路径，例如`/`重定向到站点根目录，但使用命名视图更简洁。

PS：@Hedde 发布的代码来自`django.contrib.auth.views`模块，`logout`方法。如果这是您想要使用的，您可以像这样导入它：

```
from django.contrib.auth.views import logout 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-19T11:48:06.423

您不必为此编写视图，只需执行以下操作：

```
(r'^accounts/logout/$', 'django.contrib.auth.views.logout',{'next_page': '/accounts/login'}) 
```

更多信息：[https ://docs.djangoproject.com/en/dev/topics/auth/default/#django.contrib.auth.views.logout](https://docs.djangoproject.com/en/dev/topics/auth/default/#django.contrib.auth.views.logout)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-28T08:54:08.137

查看 logout 方法的来源，它应该可以让您清楚地了解发生了什么。您可以向 logout 方法添加额外的参数来处理重定向，但您也可以在方法之后附加自定义行为

```
def logout(request, next_page=None,
           template_name='registration/logged_out.html',
           redirect_field_name=REDIRECT_FIELD_NAME,
           current_app=None, extra_context=None):
    """
    Logs out the user and displays 'You are logged out' message.
    """
    auth_logout(request)
    redirect_to = request.REQUEST.get(redirect_field_name, '')
    if redirect_to:
        netloc = urlparse.urlparse(redirect_to)[1]
        # Security check -- don't allow redirection to a different host.
        if not (netloc and netloc != request.get_host()):
            return HttpResponseRedirect(redirect_to)
    #etc... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-17T06:38:42.297

```
urlpatterns =[
path('accounts/logout/', views.LogoutView.as_view(template_name="post_list.html"), name='logout'),
] 
```

在里面写一个模板名称对我有用。希望它可能有用。谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-17T11:55:25.027

```
def logout(request):
    # Log out the user.
    logout(request)
    # Return to homepage.
    return HttpResponseRedirect(reverse('registeration:index')) 
```

# javascript - Javascript 中的匿名函数和传统函数之间在内存使用方面有什么区别吗？如果是这样，如何？

> ID：11241082
> 
> 赞同：3
> 
> 时间：2012-06-28T08:49:39.210
> 
> 标签：javascript, closures, anonymous-function

Javascript 中的匿名函数和普通函数之间是否存在内存使用差异？

如果是这样，怎么做？你能解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:53:14.033

如果“普通函数”是指`function a(){`在脚本的根级别声明的函数，即附加到窗口对象的函数，是的，存在差异：

*   附加到窗口对象的函数不会被垃圾，而匿名函数一旦不再使用它们就会被垃圾。
*   它们*可能会*减慢对窗口对象的其他变量的访问（在根级别附加函数有时会被限定为[“混乱的全局命名空间”](http://www.javascripttoolbox.com/bestpractices/#namespace)，但避免它的原因主要是为了拥有更简洁的代码并避免名称冲突）。
*   匿名函数是[闭包](http://jibbering.com/faq/notes/closures/)：它们保留一个指向其封闭范围的指针，这使得可以使用在此范围中定义的变量。一个副作用是这个范围不能在函数之前被垃圾，所以这个函数可能比你想象的要重，比“普通函数”还要重（你可以添加一个空的范围来包含匿名声明，如果你不这样做，可以防止这种影响需要范围的变量，但由于我不知道 javascript 引擎是否还可以优化封闭范围的一部分，所以如果您没有检测到循环引用，我建议您不要这样做）。

但是这些差异通常很小，您通常不必注意这一点。在您的大多数页面中，您的匿名函数无论如何都不会被垃圾，因为您没有删除事件处理程序（通常是匿名函数的第一个根本原因）。

在全球范围内（*过早优化是根源等*），只要您没有垃圾问题，我建议您偏爱可读性。Javascript 引擎和它们的 GC 变化很大，所以你的努力可能毫无用处。

谷歌有[一个关于闭包和内存的有趣通知](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Closures)。

# c++ - 使用 CImg 库找出多页 tiff 的页数

> ID：11241086
> 
> 赞同：0
> 
> 时间：2012-06-28T08:50:02.670
> 
> 标签：c++, cimg

[有没有人尝试过使用CImg](http://cimg.sourceforge.net/)库找出多页 TIFF 文件的页数？

我正在尝试计算文件中每一页的直方图。

这是我加载 TIFF 文件并创建 Image 对象的代码：

```
#define cimg_use_tiff
#include <CImg.h>
using namespace cimg_library;

void reader::read_tiff(char * filename){
  CImg<short> img(filename);
} 
```

我可以适当地尝试使用

```
CImg<T>::load_tiff (const char *const filename, const unsigned int first_frame=0, const unsigned   int last_frame=~0U, const unsigned int step_frame=1)` 
```

函数并检查返回的图像是否为空/抛出异常。这似乎不是我想要的一种干净的方式。任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:51:51.470

看起来 CImgList::load_tiff() 函数将成为您的朋友。一个多页 tiff 文件可能包含多个大小不同的图像，因此最好使用 CImgList 来获取结果，因为列表中的任何图像都可以有不同的大小（对于每个 z-slice一个CImg）。

# extjs - Extjs superboxselect keyup 事件未触发

> ID：11241089
> 
> 赞同：1
> 
> 时间：2012-06-28T08:50:09.183
> 
> 标签：extjs, keyup

我正在为我的一个项目使用 superboxselect。我需要执行一些额外的过滤。因此我需要能够在 keyup 事件中做到这一点。但我无法让它工作。

```
 var test = new Ext.ux.form.SuperBoxSelect( {
    applyTo : 'testId',
    id : 'test',
    allowBlank : true,
    msgTarget : 'title',
    xtype : 'superboxselect',
    resizable : true,
    hiddenName : 'statesHidden[]',
    width : 300,
    store : somestore,
    mode : 'local',
    displayField : 'name',
    valueField : 'code',
    classField : 'cls',
    styleField : 'style',
    extraItemCls : 'x-flag',
    extraItemStyle : 'border-width:2px',
    stackItems : true,
    listeners : {'keyup' : testFunction}
});

  function testFunction(){
       alert("hola");
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:22:45.313

将 enableKeyEvents 属性设置为 true。

启用键事件：真

# php - htmlentities、htmlspecialchars 和“无效的多字节序列”

> ID：11241091
> 
> 赞同：1
> 
> 时间：2012-06-28T08:50:26.173
> 
> 标签：php, html, character-encoding

[这个问题](https://stackoverflow.com/questions/46483/htmlentities-vs-htmlspecialchars)告诉我

> htmlentities 在所有方面都与 htmlspecialchars() 相同，除了 htmlentities()，所有具有 HTML 字符实体等价物的字符都被翻译成这些实体。

听起来 htmlentities 是我想要的。

然后[这个问题](https://stackoverflow.com/questions/3803951/htmlspecialchars-invalid-multibyte-sequence-in-argument)告诉我我需要“UTF-8”参数来摆脱这个错误：

```
Invalid multibyte sequence in argument 
```

所以，这是我的编码包装函数（标准化不同 PHP 版本的行为）

```
function html_entities ($s)
{
    return htmlentities ($s, ENT_COMPAT /* ENT_HTML401 */, "UTF-8");
} 
```

我仍然收到“参数中的多字节序列”错误。

这是一个触发错误的示例字符串，它是十六进制编码：

> Jigue à Baptiste

```
4a 69 67 75 65 20 e0 20 - 42 61 70 74 69 73 74 65 
```

我注意到 à 被编码为 0xe0，但编码为高于 0x80的**单个字节。**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:54:17.467

Your string is encoded in ISO-8859-1, not UTF-8\. Plain and simple.

```
function html_entities ($s)
{
    return htmlentities ($s, ENT_COMPAT /* ENT_HTML401 */, "ISO-8859-1");
                                                           ^^^^^^^^^^^^
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:55:54.780

If `à` is encoded as `0xE0` then you didn't save the file in UTF-8 encoding. `0xE0` is invalid UTF-8\. It should be `0xC3 0xA0`

Save your file in UTF-8 encoding. Also see [UTF-8 all the way through](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

If you saved it correctly in utf-8, the hex should look like so:

```
4A 69 67 75 65 20 C3 A0 20 42 61 70 64 69 73 74 65
J  i  g  u  e     à        B  a  p  t  i  s  t  e 
```

# iphone - iOS UITableviewCell 子视图中滚动视图的触摸事件

> ID：11241098
> 
> 赞同：0
> 
> 时间：2012-06-28T08:50:53.847
> 
> 标签：iphone, ios, xcode, uitableview, uiscrollview

我曾尝试在互联网上搜索有关此问题的信息，但无法提出解决我问题的解决方案。

我已经创建了一个子类，`UITableViewCell`我在其中添加`UIScrollView`了一个子视图，现在我希望scrollView 可以收听滚动手势，并且单击手势可以收听`UItableView`。
**同样使用这种布局是违背苹果的HIG的**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-11T15:17:44.213

这是一个古老的问题，但由于我并没有真正找到一个好的答案，我想我会提供一个。这种方法直接捕获 UIScrollView（包含在表格单元格内）和 UITableView 单元格上的点击事件，并将它们传递给 UITableViewDelegate。它还允许您滚动 UIScrollView 内容，而无需传递滚动事件。不需要任何子类化。

1.  在 ViewDidLoad 中，在 UITableView 上实例化一个 UITapGestureRecognizer

> ```
> // Capture taps on scrollView fields and pass along to tableView
> let tap = UITapGestureRecognizer(target: self, action: "tapIntercept:")
> tableView.addGestureRecognizer(tap) 
> ```

2.  为上面的选择器创建一个回调函数

> ```
> // Get the location of the table cell beneath the scrollView and pass the event off to the tableView
> func tapIntercept(recognizer: UIGestureRecognizer) { 
>     let point = recognizer.locationInView(tableView)
>     if let indexPath = tableView.indexPathForRowAtPoint(point) {
>         tableView(tableView, didSelectRowAtIndexPath: indexPath)
>     }  
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:08:51.140

如果滚动视图是表格视图的子视图，您可以捕获手势并将其发送到其父视图，如下所示：

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
        [self.nextResponder touchesBegan:touches withEvent:event];
    } 
```

# opencv - cvCalcOpticalFlowLK 的头文件

> ID：11241100
> 
> 赞同：1
> 
> 时间：2012-06-28T08:51:12.550
> 
> 标签：opencv

我`cvCalcOpticalFlowLK`在我的代码中使用函数（OpenCV 2.4.1 和 Ubuntu 12.04）。我缺少头文件并收到此错误：

```
opticalflowLK.c: In function ‘int main(int, char**)’:
opticalflowLK.c:33:67: error: ‘cvCalcOpticalFlowLK’ was not declared in this scope 
```

谁能告诉我的头文件`cvCalcOpticalFlowLK`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:07:28.747

此功能已[弃用](http://opencv.itseez.com/modules/legacy/doc/motion_analysis.html)，这就是您不能使用它的原因。

*   如果您在`c`（不是`c++`）上编码，则必须改为调用[cvCalcOpticalFlowPyrLK](http://opencv.willowgarage.com/documentation/c/video_motion_analysis_and_object_tracking.html#calcopticalflowpyrlk)。
*   如果您编写代码，`c++`最好使用新的 OpenCV 接口并调用[calcOpticalFlowPyrLK](http://opencv.itseez.com/modules/video/doc/motion_analysis_and_object_tracking.html#calcopticalflowpyrlk)。

他们的标题是`opencv2/video/tracking.hpp`.

# wpf - 如何在 WPF ListView 中切换滚动锁定？

> ID：11241102
> 
> 赞同：0
> 
> 时间：2012-06-28T08:51:15.753
> 
> 标签：wpf, listview, scroll

如何在 WPF ListView 中切换滚动锁定？

当更多的项目被添加到 a`ListView`时，根据滚动锁定状态，应该会发生以下情况。

1.  **启用**滚动锁定后，添加更多项目时`ListView`不应滚动（这是默认行为）。

2.  当滚动锁定被**禁用**时，`ListView`应该自动滚动到底部，以便用户可以看到新添加的项目。

滚动锁定状态应由典型键盘上的（很少使用）“滚动锁定”按钮控制。

**编辑：**一些代码......

```
<ListView x:Name="logMessagesListView" ItemsSource="{Binding ElementName=self, Path=LogMessages}">
    <ListView.View>
        <GridView>
            <GridView.Columns>
                <GridViewColumn Header="Created" Width="100" DisplayMemberBinding="{Binding Created}"/>
                <GridViewColumn Header="Level" Width="80" DisplayMemberBinding="{Binding LogLevel}"/>
                <GridViewColumn Header="Message" Width="350" DisplayMemberBinding="{Binding Message}"/>
            </GridView.Columns>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:13:43.793

我会将日志消息保存在 ObservableCollection 中，用于自动 UI 通知和 CollectionChanged 事件。添加新项目后，检查是否单击了按钮。如果是，请移至最后一项（或者您可以使用事件参数的索引/项属性）。

您需要将 System.Windows.Forms 添加到项目引用中，以便检查按钮状态。

```
public partial class MainWindow : Window
{
    private ObservableCollection<LogMessage> logMessages;

    public MainWindow()
    {
        this.logMessages = new ObservableCollection<LogMessage>();

        /* add/load some data */

        this.logMessages.CollectionChanged += new NotifyCollectionChangedEventHandler(this.LogMessages_CollectionChanged);

        this.LogMessages = CollectionViewSource.GetDefaultView(this.logMessages);

        InitializeComponent();
    }

    public ICollectionView LogMessages
    {
        get;
        set;
    }

    private void LogMessages_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Add)
        {
            if (System.Windows.Forms.Control.IsKeyLocked(System.Windows.Forms.Keys.Scroll))
            {
                this.LogMessages.MoveCurrentToLast();
            }
        }
    }
}

public class LogMessage
{
    public string Created
    { get; set; }

    public string LogLevel
    { get; set; }

    public string Message
    { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:18:42.497

放入`ScrollViewer.CanContentScroll="False"`您的 XAML，这应该可以工作！

# delphi - 使用“form.showmodal”方法访问冲突

> ID：11241106
> 
> 赞同：3
> 
> 时间：2012-06-28T08:51:30.840
> 
> 标签：delphi

我试图通过仅在启动时创建主表单并通过创建表单对象动态创建每个新的附加表单来创建多表单应用程序，将其用作模式，一旦该表单的目的完成，它就会从关闭后的内存。只有我的主表单是“自动创建的”，所有其他表单在项目选项中都设置为“可用”。

这是示例代码。

结果表单被声明为 TResultForm 的全局变量。

```
procedure TMainForm.Button1Click(Sender: TObject);
begin
  ResultsForm := TResultForm.Create(self);
  try
    ResultsForm.ShowModal;
  finally
    ResultsForm.Free;
  end;
end; 
```

当我通过单击按钮调用此方法时，结果表单将按原样打开并显示，但我收到访问冲突错误：

'模块'MyApp.exe'中地址005B0291的访问冲突。读取地址 00000000'。

在该表单上，我将数据库链接到该表单并显示。代码有效，没有问题。由于尝试了源自 Embarcadero 帮助工具的新示例代码，因此仅加载了新表单 (ResultForm) 上的控件，没有启动该表单上显式添加的代码。

# cmake - 避免使用 Cmake 的多个 include_directories 指令

> ID：11241108
> 
> 赞同：0
> 
> 时间：2012-06-28T08:51:33.537
> 
> 标签：cmake

我被分配使用 CMake 完全运行一个项目。

基本上，该项目有 20 多个模块，我为每个模块创建了一个 CMake 文件，例如：

```
# Module: CFS
file(
    GLOB_RECURSE
    files
    *.c
    *.cpp
)

include_directories("${PROJECT_SOURCE_DIR}/include/PEM/cfs")
include_directories("${PROJECT_SOURCE_DIR}/include/PEM/kernel2")
SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib)
add_library(cfs ${files}) 
```

kernel2 是另一个模块，有自己的 CMakeFile。

现在的问题是第三个模块：m3 需要来自 cfs 的标头（也需要来自 kernel2 的标头）

所以我基本上选择：

```
# Module: m3
file( ... )
include_directories("${PROJECT_SOURCE_DIR}/include/PEM/cfs")
add_library(m3 ${files})
target_link_library(m3 cfs) 
```

不幸的是，这还不够，除非我添加，否则在编译时将找不到 kernel2 包含的文件：

```
include_directories("${PROJECT_SOURCE_DIR}/include/PEM/kernel2") 
```

我做错了吗？也许我还应该使用 add_library 指令添加包含文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:42:40.843

如果您`#include`在 cfs 的标头中有指令，那么您应该使用

```
include_directories("${PROJECT_SOURCE_DIR}/include/PEM/kernel2") 
```

这不是 CMake 的问题，而是 C/C++ 编译器的工作原理。

例如，您在 cfs 中有以下标头：

```
#include "kernel2/someclass.h"

class SomeCfsClass
{
private:
    SomeKernelClass kernelObject;
} 
```

现在如果你想`SomeCfsClass`在你的**m3**模块中实例化，编译器应该知道它的大小。`SomeKernelClass`但是如果不知道kernel2/someclass.h 的定义，就不可能知道它的大小。

这种情况可以通过不存储对象而是指向它的指针来解决`SomeCfsClass`：

```
class SomeKernelClass; // forward declare SomeKernelClass

class SomeCfsClass
{
private:
    SomeKernelClass * kernelObject;
} 
```

但是，当然，在某些情况下，根本无法避免包括在内。

作为替代方案，我可以建议在`#include`指令中使用相对路径，但这种解决方案有点骇人听闻。

# ios - 请参阅 POST 参数

> ID：11241116
> 
> 赞同：0
> 
> 时间：2012-06-28T08:52:06.390
> 
> 标签：ios, xcode

我发送（使用 ASIFormDataRequest）一个带有 4 个参数的 POST 请求。当此请求到达时，服务器会启动 NullPointerException。当我调试应用程序时，我不知道如何真正查看手机完成的请求中的参数内的内容。有什么办法可以做到这一点？也许我在 XCode 中缺少一些选项？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:54:24.657

要查看帖子参数，您需要查看内部`yourFormRequest.postBody`，但请注意数据是这样的，`NSMutableData`因此您必须将其转换为`NSString`或`NSDictionary`

喜欢以下

```
NSString *str = [[NSString alloc] initWithData:[yourFormRequest.postBody] encoding:NSUTF8StringEncoding]; 
```

# matlab - 在频域分析时间序列

> ID：11241125
> 
> 赞同：3
> 
> 时间：2012-06-28T08:52:50.267
> 
> 标签：matlab, spectral

我正在尝试使用频谱分析来分析时间序列。我试图检测我的数据中的任何周期性，这些周期性由记录一周的每小时测量值组成（24 * 7 = 168 次测量值），我的目标是显示温度变化的昼夜分量。到目前为止，我有（例如）：

```
clear all
StartDate = '2011-07-01 00:00';
EndDate = '2011-07-07 23:00';
DateTime=datestr(datenum(StartDate,'yyyy-mm-dd HH:MM'):60/(60*24):...
    datenum(EndDate,'yyyy-mm-dd HH:MM'),...
    'yyyy-mm-dd HH:MM');
DateTime=cellstr(DateTime);
DecDay = datenum(DateTime)-datenum(2011,0,0);
t = 0:25/length(DecDay):(25-0.1488);
x = sin(2*pi*50*t) + sin(2*pi*120*t);
y = x + 2*randn(size(t));
Y = fft(y,length(y)); 
```

我会从这里去哪里？任何建议将不胜感激。

更改：

```
clear all
    StartDate = '2011-07-01 00:00';
    EndDate = '2011-07-07 23:00';
    DateTime=datestr(datenum(StartDate,'yyyy-mm-dd HH:MM'):60/(60*24):...
        datenum(EndDate,'yyyy-mm-dd HH:MM'),...
        'yyyy-mm-dd HH:MM');
    DateTime=cellstr(DateTime);
    DecDay = datenum(DateTime)-datenum(2011,0,0);
 x = cos((2*pi)/12*DecDay)+randn(size(DecDay));
 % if you have the signal processing toolbox
 [Pxx,F] = periodogram(x,rectwin(length(x)),length(x),1);
 plot(F,10*log10(Pxx)); xlabel('Cycles/hour');
 ylabel('dB/(Cycles/hour'); 
```

谁能建议我如何将 x 轴转换为小时而不是每小时的周期？我试过了

```
plot(1./F,10*log10(Pxx)); xlabel('hours'); 
```

但这弄乱了周期图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:56:08.613

您可能会发现开始使用 MATLAB 的[周期图](http://www.mathworks.co.uk/help/toolbox/signal/ref/periodogram.html)函数比尝试直接使用 FFT 更容易。这负责为您和各种其他实现细节窗口化数据。

# zend-framework - Lucene Zend 对短语而不是单个单词进行模糊匹配

> ID：11241126
> 
> 赞同：0
> 
> 时间：2012-06-28T08:52:51.437
> 
> 标签：zend-framework, lucene, zend-search-lucene, zend-lucene

我正在尝试使用 Zend Lucene 来匹配查询短语，但我想要一个模糊匹配。

目前，如果我使用 PhraseQuery 并搜索“valentin rossi”，（在 DB 中有“valentino rossi”）我没有结果，因为 PhraseQuery 准确搜索字符串“valentin rossi”，没有模糊匹配或相似性字。

请给我一个提示，我必须在哪里寻找可行的解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T15:12:19.473

Zend Lucene 似乎支持模糊搜索。文档在[这里](http://framework.zend.com/manual/1.12/en/zend.search.lucene.query-language.html#zend.search.lucene.query-language.fuzzy)。

你只需要做这样的事情：

```
$queryString = 'search terms here';
//add the '~' to make it fuzzy if there is a query string
$queryString = $queryString ? $queryString . '~' : $queryString;
$index = Zend_Search_Lucene::open('/path/to/index');
$results = $this->_index->find(queryString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:17:14.193

如果您使用 Zend Lucene，您需要准备要搜索的文本，因此：

```
$texttosearch = 'valentin rossi';
$query = Zend_Search_Lucene_Search_QueryParser::parse($texttosearch);

//you can echo $query to see result
echo $query; 
```

等等 ...

看看这本[Zend_Search_Lucene的好书](http://lars.schokokeks.org/ZEND/trunk/documentation/en/html/zend.search.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T22:45:48.440

Lucene PhraseQuery 不支持通配符和模糊查询。我对 Zend Lucene 了解不多。在 lucene 中，您可以使用 ComplexPhraseQueryParser 执行带有模糊或通配符的短语搜索。它在内部使用 SpanQueries。如果您可以将 ComplexPhraseQueryParser 或 SpanQueries 与 Zend 一起使用，那么您应该会很好。

# android - 下载大图（size > 300K）时inputstream.read没有响应

> ID：11241137
> 
> 赞同：0
> 
> 时间：2012-06-28T08:53:44.783
> 
> 标签：android, bufferedinputstream, imagedownload

嗨，大家好。下载大尺寸图片时出现问题。很奇怪，从流中读取字节总是没有响应。我的代码如下，欢迎提出任何建议。

```
public class ImageTestActivity extends Activity {

    public static final int IMAGE_BUFFER_SIZE = 8*1024;
    public static final int MAX_REQUEST_WIDTH = 480;
    public static final int MAX_REQUEST_HEIGHT = 480;
    private static final String TAG = ImageTestActivity.class.getSimpleName();
    private static final int HTTP_CONNECT_TIMEOUT = 10000;

    private static final int CONTENT_IMAGE_OFFSET = 80;
    private Display mDisplay = null;

    private ImageView mContentPic = null;

    private Bitmap mContentPicBitmap = null;

    private RefreshAsyncTask mRefreshTask = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        
        mContentPic = (ImageView)findViewById(R.id.wimessage_content_picture);
        mDisplay = getWindowManager().getDefaultDisplay();
        mRefreshTask = new RefreshAsyncTask();
        mRefreshTask.execute("http://218.240.46.38/img/201206/28/-980416187.jpeg");
    }    

    private void initImageSetting(Bitmap bm) {
        if (bm == null) {
            return;
        }
        int scrWidth = mDisplay.getWidth();
        int scrHeight = mDisplay.getHeight();
        int imageHeight = bm.getHeight();
        int imageWidth = bm.getWidth();
        /*if (imageHeight*3 < imageWidth*2) {
             * It is very strange, when the picture aspect ratio less than 3:2, 
             * execute the following code will cause the picture is not displayed
             *
            return;
        }*/

        mContentPic.setAdjustViewBounds(true);
        mContentPic.setMaxWidth(scrWidth - CONTENT_IMAGE_OFFSET);
        if ((imageWidth <= scrWidth - CONTENT_IMAGE_OFFSET) || (imageHeight < scrHeight)) {
            mContentPic.setMaxHeight(imageHeight);
        } else {
            mContentPic.setMaxHeight((int)((float)imageHeight * (scrWidth - CONTENT_IMAGE_OFFSET) / imageWidth));       
        }
    }

    public static byte[] getBytes(BufferedInputStream inStream) throws IOException {
        ByteArrayOutputStream outStream = new ByteArrayOutputStream();
        BufferedOutputStream out = new BufferedOutputStream(outStream, IMAGE_BUFFER_SIZE);
        byte[] buffer = new byte[IMAGE_BUFFER_SIZE];

        int len = inStream.read(buffer);
        Log.i(TAG, "---start---");
        while (len != -1) {
            Log.i(TAG, ((Integer)len).toString());
            try {
                out.write(buffer, 0, len);
            } catch (IndexOutOfBoundsException e) {
                e.printStackTrace();
            }
            len = inStream.read(buffer);
        }

        Log.i(TAG, "---end---");
        out.flush();
        out.close();
        inStream.close();

        return outStream.toByteArray();
    }

    public static int calculateInSampleSize(BitmapFactory.Options options,
            int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {
            if (width > height) {
                inSampleSize = Math.round((float) height / (float) reqHeight);
            } else {
                inSampleSize = Math.round((float) width / (float) reqWidth);
            }

            // This offers some additional logic in case the image has a strange
            // aspect ratio. For example, a panorama may have a much larger
            // width than height. In these cases the total pixels might still
            // end up being too large to fit comfortably in memory, so we should
            // be more aggressive with sample down the image (=larger
            // inSampleSize).

            final float totalPixels = width * height;

            // Anything more than 2x the requested pixels we'll sample down
            // further.
            final float totalReqPixelsCap = reqWidth * reqHeight * 2;

            while (totalPixels / (inSampleSize * inSampleSize) > totalReqPixelsCap) {
                inSampleSize++;
            }
        }
        return inSampleSize;
    }    

    public static Bitmap loadImageFromURL(String urlPath) {
        try {
            URL url = new URL(urlPath);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("GET");
            connection.setConnectTimeout(HTTP_CONNECT_TIMEOUT);
            int rspCode = connection.getResponseCode();
            if (rspCode == HttpStatus.SC_OK) {
                //InputStream in = connection.getInputStream();
                Bitmap bitmap = null;
                BufferedInputStream in = new BufferedInputStream(url.openStream(), IMAGE_BUFFER_SIZE);
                byte[] data = getBytes(in);
                in.close();
                if (data != null) {
                    try {
                        BitmapFactory.Options options = new BitmapFactory.Options();
                        options.inJustDecodeBounds = true;
                        options.inSampleSize = calculateInSampleSize(options, MAX_REQUEST_WIDTH, MAX_REQUEST_HEIGHT);
                        options.inJustDecodeBounds = false;
                        bitmap = BitmapFactory.decodeByteArray(data, 0, data.length, options);
                    } catch (OutOfMemoryError e) {
                        e.printStackTrace();
                    }
                } else {
                    Log.i(TAG, "data == null");
                }

                connection.disconnect();                
                return bitmap;
            } else {
                connection.disconnect();
                Log.i(TAG, "rspCode = " + rspCode);
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return null;
    }

    private class RefreshAsyncTask extends AsyncTask<String, Boolean, Boolean> {
        @Override
        protected Boolean doInBackground(String... arg0) {
            mContentPicBitmap = loadImageFromURL(arg0[0]);
            return true;
        }

        @Override
        protected void onPostExecute(Boolean result) {
            super.onPostExecute(result);
            if (mContentPicBitmap != null) {
                initImageSetting(mContentPicBitmap);
                mContentPic.setImageBitmap(mContentPicBitmap);
            }
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:05:46.783

**更新：**

使用`connection.getInputStream()`替换`url.openStream()`：

```
BufferedInputStream in = new BufferedInputStream(connection.getInputStream(), IMAGE_BUFFER_SIZE); 
```

你的`getBytes`方法试试这个：

```
 public static byte[] getBytes(BufferedInputStream inStream) throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream(IMAGE_BUFFER_SIZE);
    byte[] buffer = new byte[IMAGE_BUFFER_SIZE];

    int len = 0;
    Log.i(TAG, "---start---");
    while ((len = inStream.read(buffer)) != -1) {
        out.write(buffer, 0, len);
        Log.i(TAG, "readed:" + len);
    }
    Log.i(TAG, "---end---");
    out.flush();
    inStream.close();

    return out.toByteArray();
} 
```

最后不要忘记添加权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:26:10.477

试试这个我尝试了你的链接它在imageview中显示了一个图像

```
BitmapFactory.Options bmOptions;
bmOptions = new BitmapFactory.Options();
bmOptions.inSampleSize = 1;
bm = LoadImage("http://218.240.46.38/img/201206/28/-980416187.jpeg", bmOptions);
imageview.setImageBitmap(bm); 
```

其中方法**LoadImage**如下所示

```
private Bitmap LoadImage(String URL, BitmapFactory.Options options){      
    Bitmap bitmap = null;
    InputStream in = null;      
    try {
        in = OpenHttpConnection(URL);
        bitmap = BitmapFactory.decodeStream(in, null, options);
        in.close();
    } catch (IOException e1) {

    }
   return bitmap;              
}

private InputStream OpenHttpConnection(String strURL) throws IOException {
     InputStream inputStream = null;
     URL url = new URL(strURL);
     URLConnection conn = url.openConnection();

     try{
        HttpURLConnection httpConn = (HttpURLConnection)conn;
        httpConn.setRequestMethod("GET");
        httpConn.connect();
        if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
            inputStream = httpConn.getInputStream();
        }
     } catch (Exception ex){

     }
     return inputStream;
} 
```

# iphone - 如何为iCarousel iphone中不同位置的图像实现删除功能

> ID：11241139
> 
> 赞同：0
> 
> 时间：2012-06-28T08:53:59.663
> 
> 标签：iphone, ios, icarousel

[我在这里](http://github.com/nicklockwood/iCarousel)使用 iCarousel 和轮播类型 Liner Carousel 并实现了删除功能。我能够删除轮播中的图像，当我尝试删除可见屏幕中的任何其他 iImage 时，它​​被移动到轮播框架并被删除。
我需要从原始位置删除图像。

```
- (void)loadView {

    [super loadView];

    self.view.backgroundColor = [UIColor blackColor];

    carousel = [[iCarousel alloc] initWithFrame:CGRectMake(-130,300, 320, 100)];
    carousel.dataSource = self;
    carousel.delegate=self;
    carousel.type = iCarouselTypeLinear;
    carousel.scrollEnabled=YES;

    imageView=[[UIImageView alloc]initWithFrame:CGRectMake(60, 50, 200, 200)];
    [self.view addSubview:imageView];

}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
    { 

    UIImage *image = [imagesArray objectAtIndex:index];

    UIButton *button =[UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(0,0, 60, 60); 
    [button setBackgroundImage:image forState:UIControlStateNormal];
    [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    button.titleLabel.font = [button.titleLabel.font fontWithSize:50];
    [button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
    button.tag=index;
    NSLog(@"tag is %d",button.tag);

    UIButton *deleteButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    deleteButton.frame= CGRectMake(50, -5, 20 ,20);
    UIImage *img = [UIImage imageNamed:@"close.png"];
    [deleteButton setImage:img forState:UIControlStateNormal];
    [deleteButton addTarget:self action:@selector(deleteButtonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [button addSubview:deleteButton];

    return button;
}

-(void)deleteButtonClicked:(int )sender
{
    NSInteger currentIndex = carousel.currentItemIndex;
    [carousel removeItemAtIndex:currentIndex animated:YES];

} 
```

请帮帮我。

![在此处输入图像描述](../Images/5b4229fe4a13940690572ed40a67e49b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:47:23.423

您不应该删除 carousel.currentItemIndex 处的项目，因为这不是与您单击的按钮相对应的项目，它只是轮播中当前居中的项目。

要为您单击的按钮获取正确的项目索引，请执行以下操作：

```
-(void)deleteButtonClicked:(id)sender
{
    //get the index of the item view containing the button that was clicked
    NSInteger index = [carousel indexOfItemViewOrSubview:sender];

    //update the data model (always do this first)
    [imagesArray removeObjectAtIndex:index];

    //remove item from carousel
    [carousel removeItemAtIndex:index animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:16:10.987

试试这个：

```
 NSInteger index = carousel.currentItemIndex;
    [carousel removeItemAtIndex:index animated:YES];
    [imagesArray removeObjectAtIndex:index]; 
```

也添加这个：

```
- (void)awakeFromNib
{    
    if (self) {
        //set up carousel data
         wrap = NO;
    }
} 
```

或者让你的

`carousel.type = iCarouselTypeCustom;`

到

`carousel.type = iCarouselTypeLinear;`

然后实现这个：`[carousel reloadData];`

# javascript - How to check WCAG in php?

> ID：11241151
> 
> 赞同：0
> 
> 时间：2012-06-28T08:54:21.037
> 
> 标签：javascript, php, session, accessibility, wcag

We have WCAG standard means site should run without javascript.

[http://www.w3.org/TR/WCAG/](http://www.w3.org/TR/WCAG/)

Is it possible to check WCAG is enabled or not in PHP?

```
When javascript is disabled :- I have set some php session variables 
When javascript is enabled  :- I want to reset those php session variables 
```

How can i do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T21:32:31.897

WCAG 是一套指南，而不仅仅是一个开/关开关。它强调了最佳实践，以确保您的网站可供残障人士使用。从高层次来看，JavaScript 的要求是标准的，因为在过去，没有多少辅助技术设备或程序可以与 JS 交互。因此，如果禁用 JavaScript，用户将体验该网站。这就是为什么`<noscript>`为脚本元素使用好的标签而不是粗鲁的评论很重要。

今天流行的辅助技术可以很好地与 JavaScript 交互。这一切都取决于您使用 JavaScript 所做的事情以及您如何编写动作脚本。

W3C 提供了[37 种技术用于客户端脚本](http://www.w3.org/TR/WCAG20-TECHS/client-side-script.html)。WebAIM 的[JavaScript Accessibility 文章](http://webaim.org/techniques/javascript/)中有很多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:37:33.603

如果您询问是否可以在服务器端检测是否启用了 Javascript，那么答案是：技术上没有。

由于服务器进程不在浏览器进程中，因此服务器无法检查浏览器中的功能或设置是否启用/存在。

但是，您可以尝试模仿它。例如，如果禁用 javascript（通常），则不会从服务器端加载脚本。您还可以插入 javascript，这些 javascript 将对您的服务器执行特制的请求，以便您知道某些内容已被禁用。

```
<noscript><img src="http://example.com/session-trigger-js-disabled.php?.gif" width="0" height="0"></noscript>
<script src="http://example.com/session-trigger-js-enabled.php?.js"></script> 
```

* * *

*注意：* `$_SESSION`在 PHP 中可以是阻塞的。该`<script src="url">`标签也会被阻止，因此请注意不要造成“死锁”，这会降低用户对您网站的体验。

* * *

更轻量级的方法可能是设置 cookie 并在启用 javascript 时更改它。cookie 可以被 PHP 读取，它们的性质是不阻塞的，你不需要为此浪费会话。

# php - How to get all Blogger post properties with Zend GData

> ID：11241152
> 
> 赞同：0
> 
> 时间：2012-06-28T08:54:21.727
> 
> 标签：php, zend-framework, gdata

I have code like this:

```
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_Query');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');

$user = 'usser';
$pass = 'pass';
$service = 'blogger';

$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service, null,
        Zend_Gdata_ClientLogin::DEFAULT_SOURCE, null, null,
        Zend_Gdata_ClientLogin::CLIENTLOGIN_URI, 'GOOGLE');
$gdClient = new Zend_Gdata($client);

$blogID='someID';
$query = new Zend_Gdata_Query('http://www.blogger.com/feeds/' . $this->blogID . '/posts/default');

  $feed = $gdClient->getFeed($query);
  print $entry->title->text; 
```

Problem is that i can print only few properties, like title and description. Any idea how to print other properties like id, url, author name, replies?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:57:57.597

我正在寻找相同的解决方案。原来所有的属性都存放在$object->property->text

因此，例如，如果您想获取消息 id，则必须这样做：

```
<?php
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_Query');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');

$user = 'usser';
$pass = 'pass';
$service = 'blogger';

$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service, null,
        Zend_Gdata_ClientLogin::DEFAULT_SOURCE, null, null,
        Zend_Gdata_ClientLogin::CLIENTLOGIN_URI, 'GOOGLE');
$gdClient = new Zend_Gdata($client);

$blogID='someID';
$query = new Zend_Gdata_Query('http://www.blogger.com/feeds/' . $this->blogID . '/posts/default');

  $feed = $gdClient->getFeed($query);
// for all array witch properties print object $feed;
//print_r($feed);
  foreach ($feed as $feeds => $f){
  $idText = explode('-', $f->id->text);
  $postID = $idText[2];
  $title = $ou->title->text;

  } 
```

# java - 使用 setScale() 方法舍入 BigDecimal：意外结果

> ID：11241155
> 
> 赞同：0
> 
> 时间：2012-06-28T08:54:24.847
> 
> 标签：java, rounding, bigdecimal

要舍入一个数字，我使用以下代码：

```
public static roundBd(BigDecimal bd){
  BigDecimal result1 = bd.setScale(0, RoundingMode.HALF_UP);
  return result1;
} 
```

*   输入 1.50 --> 输出 2
*   输入 1.499 --> 输出 1

第一个结果对我来说还可以，但第二个结果不是我所期望的。即使对于 1.499，我也希望在输出 2 中包含。（详细说明：首先我想将 1.499 舍入到 1.50，然后舍入到 1.5，最后舍入到 2）

但....

```
BigDecimal bd = new BigDecimal("1.499");  // I'd like to round it to 2
BigDecimal result1 = bd.setScale(2, RoundingMode.HALF_UP); // result1 == 1.50
BigDecimal result2 = bd.setScale(1, RoundingMode.HALF_UP); // result2 == 1.5
BigDecimal result3 = bd.setScale(0, RoundingMode.HALF_UP); // result3 == 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:59:03.167

这不是四舍五入的工作方式。HALF_UP 表示如果一个数字恰好在两个最接近的可用值之间（取决于比例），它将被四舍五入。其他任何值都四舍五入到最接近的值。

[从javadoc 中](http://docs.oracle.com/javase/7/docs/api/java/math/RoundingMode.html#HALF_UP)提取：

> 舍入模式向“最近的邻居”舍入，除非两个邻居是等距的

为了达到你需要的行为，你可以连续四舍五入，虽然我不确定你**为什么**想要这样的行为：

```
BigDecimal bd = new BigDecimal("1.499");  // I'd like to round it to 2
BigDecimal result1 = bd.setScale(2, RoundingMode.HALF_UP); // result1 == 1.50
BigDecimal result2 = result1.setScale(0, RoundingMode.HALF_UP); // result2 == 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:00:54.650

这个结果正是你*应该*得到的；舍入每个中间值会牺牲精度，因此它直接舍入到正确的位数。

如果你真的想要其他行为，你将不得不做类似的事情

```
while(number.scale() > 0) {
  number.setScale(number.scale() - 1, RoundingMode.HALF_UP);
} 
```

# android - 如何在android中将按钮对齐到正确的位置

> ID：11241156
> 
> 赞同：2
> 
> 时间：2012-06-28T08:54:27.480
> 
> 标签：android, android-layout, android-widget

我想对齐按钮，如下图所示， ![在此处输入图像描述](../Images/65d5f2df504c6675cf637df621e1e1cc.png)

为此，我使用了相对布局。但是由于按钮与其他按钮的关系，按钮不适合正确的位置。我不知道其他可能的方法。如果有其他适合这种按钮排列的方法，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:10:09.710

你可以随心所欲地设计

首先做一个

大尺寸相对布局

在布局的每个短号处向该布局添加四个按钮。

然后将按钮添加到两个角按钮的正中间

![在此处输入图像描述](../Images/9b7f855bb3473168980321fb6ed672f7.png) 试试这个![在此处输入图像描述](../Images/3087bc7a817280aa6988d44e0bcf61c6.png)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<RelativeLayout
    android:layout_width="300dp"
    android:layout_height="300dp"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="#00F" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="180dp"
        android:layout_height="180dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="#FFF" >

        <Button
            android:id="@+id/button1"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Button" />

        <Button
            android:id="@+id/button3"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="Button" />

        <Button
            android:id="@+id/button4"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:text="Button" />

        <Button
            android:id="@+id/button5"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:text="Button" />

        <Button
            android:id="@+id/button6"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:text="Button" />

        <Button
            android:id="@+id/button7"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="Button" />

        <Button
            android:id="@+id/button8"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@+id/button7"
            android:text="Button" />
    </RelativeLayout>

    <Button
        android:id="@+id/button9"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <Button
        android:id="@+id/button10"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <Button
        android:id="@+id/button11"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="Button" />

    <Button
        android:id="@+id/button12"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="Button" />

    <Button
        android:id="@+id/button13"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Button" />

    <Button
        android:id="@+id/button14"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:text="Button" />

    <Button
        android:id="@+id/button15"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/button14"
        android:layout_alignParentRight="true"
        android:text="Button" />

    <Button
        android:id="@+id/button16"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Button" />

</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T09:22:32.387

我研究了您的解决方案并制作了类似的布局。但我无法得到您正在寻找的确切内容，因为您的图像样本是方形的，而设备屏幕是矩形的。

无论如何试试这个，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content">

<RelativeLayout  android:id="@+id/first_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

     <Button  android:id="@+id/button1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text=" 1"/>

     <Button  android:id="@+id/button2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text=" 2"
         android:layout_alignParentRight="true"/>

     <Button  android:id="@+id/button3"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:text=" 3"/>

     <Button  android:id="@+id/button4"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:layout_alignParentRight="true"
         android:text=" 4"/>

     <Button  android:id="@+id/button5"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerVertical="true"
         android:text=" 5"/>

        <Button  android:id="@+id/button6"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerVertical="true"
         android:layout_alignParentRight="true"
         android:text=" 6"/>

           <Button  android:id="@+id/button7"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:text=" 7"/>

           <Button  android:id="@+id/button8"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:layout_alignParentBottom="true"
         android:text=" 8"/>

              <RelativeLayout  android:id="@+id/first_layout"
                  android:paddingTop="50dip"
                  android:paddingBottom="50dip"
                  android:paddingLeft="40dip"
                  android:paddingRight="40dip"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content">

     <Button  android:id="@+id/button1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text=" 1"/>

     <Button  android:id="@+id/button2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text=" 2"
         android:layout_alignParentRight="true"/>

     <Button  android:id="@+id/button3"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:text=" 3"/>

     <Button  android:id="@+id/button4"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:layout_alignParentRight="true"
         android:text=" 4"/>

     <Button  android:id="@+id/button5"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerVertical="true"
         android:text=" 5"/>

        <Button  android:id="@+id/button6"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerVertical="true"
         android:layout_alignParentRight="true"
         android:text=" 6"/>

           <Button  android:id="@+id/button7"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:text=" 7"/>

           <Button  android:id="@+id/button8"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:layout_alignParentBottom="true"
         android:text=" 8"/>

              <RelativeLayout  android:id="@+id/first_layout"
                  android:paddingTop="50dip"
                  android:paddingBottom="50dip"
                  android:paddingLeft="40dip"
                  android:paddingRight="40dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

     <Button  android:id="@+id/button1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text=" 1"/>

     <Button  android:id="@+id/button2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text=" 2"
         android:layout_alignParentRight="true"/>

     <Button  android:id="@+id/button3"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:text=" 3"/>

     <Button  android:id="@+id/button4"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:layout_alignParentRight="true"
         android:text=" 4"/>

     <Button  android:id="@+id/button5"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerVertical="true"
         android:text=" 5"/>

        <Button  android:id="@+id/button6"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerVertical="true"
         android:layout_alignParentRight="true"
         android:text=" 6"/>

           <Button  android:id="@+id/button7"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:text=" 7"/>

           <Button  android:id="@+id/button8"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:layout_alignParentBottom="true"
         android:text=" 8"/>

</RelativeLayout>

</RelativeLayout>

</RelativeLayout> 
```

**截屏，**

![在此处输入图像描述](../Images/e9b28e84dd40edf997fbf5917ec0e209.png)

# android - How to use Google Analytics track referrer install from Google Play?

> ID：11241158
> 
> 赞同：10
> 
> 时间：2012-06-28T08:54:40.677
> 
> 标签：android, google-analytics, installation, referrer, google-play

1.  Add libGoogleAnalytics.jar to your project's /libs directory.

2.  Add the following permissions to your project's AndroidManifest.xml manifest file:

    ```
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    ```

3.  Add the following code snippet to your project's AndroidManifest.xml manifest file:

    ```
    <!-- Used for install referrer tracking -->
    <receiver android:name="com.google.android.apps.analytics.AnalyticsReceiver"  android:exported="true">
      <intent-filter>
          <action android:name="com.android.vending.INSTALL_REFERRER" >
      </intent-filter>
    </receiver> 
    ```

But I never entered my UA-xxxxx-yy ID. The ID entered for Pageviews and Events tracking like this:

```
tracker.startNewSession("UA-xxxxx-yy", this); 
```

Google Analytics for Android SDK ReadMe says: (NOTE: do not start the GoogleAnalyticsTracker in your Application onCreate() method if using referral tracking).
With referrer tracking where do i put my ID or not? If need, how? If not, why?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T07:40:25.903

起初，谷歌会要求那些只需要安装引荐来源网址跟踪的人将两个可能不需要的权限以及一个库合并到他们的应用程序中，这对我来说似乎很奇怪，因为跟踪引荐来源网址所需的信息已经可用在 Google Play 服务器上，并且大概可以通过基于 Web 的界面从那里访问，类似于用于跟踪 Chrome Web Store 上的购买的界面。当您考虑到基于应用程序的分析界面甚至不包括通过 GP 网页进行的购买时，这样做的理由似乎更有说服力。

在跟踪任意引荐来源的一般情况下，这种遗漏似乎仍然很奇怪，但我最近发现，在您尝试跟踪的引荐来源来自 Adwords 广告的特定情况下，似乎有一种更简单的方法来跟踪 Google Play不需要对您的应用进行任何修改的应用安装。所有这些都是通过 Adwords 界面设置的，而不是通过 Google Play，也不是通过修改您的应用程序。

您没有说明您的推荐人是来自 Adwords 还是来自其他来源，所以我会提供这些信息，以防有用。

这一页

[http://support.google.com/adwords/bin/answer.py?hl=en&answer=1722054](http://support.google.com/adwords/bin/answer.py?hl=en&answer=1722054)

介绍如何通过 Adwords 设置 Google Play 应用销售的转化跟踪。从该页面：

跟踪从 Google Play 下载的移动应用程序不需要添加代码段。无需更改您的应用程序代码即可完成此操作。只需按照以下步骤操作。

在[http://adwords.google.com上登录您的 AdWords 帐户](http://adwords.google.com)

单击“工具和分析”选项卡，然后单击“转换”选项卡。

单击“+ 新转换”按钮。为您的转化命名，选择“移动应用下载”，然后点击“保存并继续”。输入包名称。（您可以通过在 Google Play 中查找您的应用程序来找到您的包名称。它是标识您的应用程序的基本 URL 的一部分：“https://play.google.com/store/apps/details?id="

单击“保存并继续”。

在下一个屏幕上，单击“完成”。

现在，您的移动应用下载转化数据将在 24 小时内与其他转化数据一起显示。

注意：仅当您在点击下载或移动应用扩展广告中的链接直接指向 Google Play 商店时，Android 的移动应用程序下载跟踪才会起作用。目前不支持第三方跟踪 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-26T07:00:08.027

检查 GA SDK 实施 - 测量解释得非常清楚。[https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#google-play-implement](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#google-play-implement)

# mysql - best storage solution for data samples

> ID：11241161
> 
> 赞同：0
> 
> 时间：2012-06-28T08:55:00.087
> 
> 标签：mysql, mongodb, storage

i'm developing a system that will collect user activities samples (opened a window, scrolls, enter page, leave page, etc.) and i'm looking for the best way to store these samples and query it.

i prefer something smart where i can execute sql-like group by queries (for example give me all the window open events grouped by date and hour), and of course something flexible enough in case i'll need to add columns in the future.

i'm trying to avoid thinking about all the queries i might need and just save an aggregated version of the data by time, since i'd like to do drill-downs. (for example, count all the window open events by date and time, and then see all event in each time-frame, or change it to be by unique userId).

thanks.

PS - i currently use MySql for this task, but the data is expected to grow rapidly. I've experimented with mongoDB as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:07:29.633

我相信 mongoDB 可以是一个很好的解决方案。首先，它旨在保存大数据，并且非常易于使用和扩展（副本集或分片）。表达语言也很扎实。我的意思是它不如 SQL 强大，但仍然足够好。这是一个关于将 SQL 命令映射到 MongoDB的好[链接。](http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart)

还有其他替代方案，但我认为要么它们太复杂，要么它们的表达语言不够强大。

也请查看此[链接](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis/)，它可以帮助您找到适合您的解决方案。

# php - 更新一个字段，使订单值连续

> ID：11241162
> 
> 赞同：0
> 
> 时间：2012-06-28T08:55:07.433
> 
> 标签：php, mysql

在我的表中，一个字段“ord”包含特定组的值的顺序。

tbl_test 和字段是 Group,time,ord,name

示例条目

```
id       Group time                      ord          name
----------------------------------------------------------------
1        1     1340865990                1            john
2        1     1340865880                2            jos
3        1     1340867830                3            mery
4        1     1340867830                4            bill
5        1     1340867830                5            stiev
6        1     1340867830                6            tom
7        2     1340867830                1            test
8        3     1340867830                2            john 
```

如果我从组 1 中删除一组值，例如我删除了“mery”和“tom”，那么“ord”字段必须具有剩余项目的更新订单值

```
id       Group time                      ord          name
----------------------------------------------------------------
1        1     1340865990                1            john
2        1     1340865880                2            jos
4        1     1340867830                3            bill
5        1     1340867830                4            stiev 
```

删除的项目可以是任何顺序。要删除该项目，用户将给出一个 id 和组的列表。

我怎样才能在mysql中实现这个？

笔记 ：

要在删除单个条目时更新排序，我使用以下查询：

```
SET @a = 3;
UPDATE tbl_test 
SET ord = 5,time = 1337690755 
WHERE Group = 1 AND id = 6; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:44:55.430

如果订单与`time`（或`id`）相关，这可能会起作用。

```
SET @order:=0;
UPDATE tbl_test
SET ord=@order:=@order+1
WHERE group=1
ORDER BY time, id 
```

上面的答案是借自：[update columns with a sequence number mysql](https://stackoverflow.com/questions/6617056/updating-columns-with-a-sequence-number-mysql)

替代方法来自：[Mysql Insert Order Number By VARCHAR Field](https://stackoverflow.com/questions/8702539/mysql-insert-order-number-by-varchar-field?lq=1)

```
SET @order:=0;
UPDATE 
SET ord=@order:=@order + 1
FROM tbl_test
ORDER BY time, id 
```

如果没有未使用的列，则重置`AUTO_INCREMENT` `id`也可能是一种选择。`ord`

# android - make the picture next to each other gridView

> ID：11241163
> 
> 赞同：1
> 
> 时间：2012-06-28T08:55:07.717
> 
> 标签：android, android-layout, android-gridview

im using grid view and the picture seems to have spaces between each other. what should i do to make the picture next to each other?

```
<GridView 

            android:id="@+id/gridview"
            android:layout_width="30px" 
            android:layout_height="fill_parent"
            android:columnWidth="0dp"
            android:numColumns="3"
            android:verticalSpacing="0dp"
            android:horizontalSpacing="0dp"
            android:stretchMode="columnWidth"
            android:gravity=""
            /> 
```

# php - PHP中数据类型的实现

> ID：11241167
> 
> 赞同：0
> 
> 时间：2012-06-28T08:55:28.073
> 
> 标签：php, types, store, implementation

我想了解 PHP 中的数据类型**实现**，所以我需要一些资源（书籍网站和......）。我想要的不是 PHP 支持什么数据类型或如何使用它们，而是实现以及所有这些事情是如何由 PHP 完成的。我想知道它们是如何存储在内存中的以及关于它的非常详细的事情（我已经非常了解 PHP）。如果你能引导我在哪里可以找到这些信息，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:03:16.417

像[IRC Maxwell 的博客](http://blog.ircmaxell.com/2012/03/phps-source-code-for-php-developers_21.html)这样的地方将是一个很好的起点，以及[nikic 的博客](http://nikic.github.com/2012/03/28/Understanding-PHPs-internal-array-implementation.html)文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:04:49.037

[这是来自PHP Rocks](http://www.php-rocks.com/types_in_php.php) and [dummies](http://www.dummies.com/how-to/content/understanding-php-data-types.html)的几篇关于 PHP 数据类型的文章。当涉及到 PHP 中的数据类型时，一个有趣的地方是[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)，它将强制将数据类型用于函数参数。

# php - How to manipulate diverse meta-informations of image files in PHP

> ID：11241174
> 
> 赞同：2
> 
> 时间：2012-06-28T08:56:00.303
> 
> 标签：php, exif, xmp, iptc

There are diverse formats to add meta-Information to image (and video) files. nearly every digitalcamera add them to fotos. And sometimes people don't want them to be published.

The standards I found so far are:

1.  Exif
2.  IPTC-NAA
3.  XMP

**Are there more?** (e.g. not image specific, but general meta standard, that can be attached to the end of every file)

Reading the information that is saved, using PHP seems to be possible for the three named formats.

*   For XMP: [How can I read XMP data from a JPG with PHP?](https://stackoverflow.com/questions/1578169/)

*   For Exif PHP provides functions: [http://de2.php.net/manual/de/function.exif-read-data.php](http://de2.php.net/manual/de/function.exif-read-data.php) (but only For JPEG and TIFF, or **can Exif data be only attached to those image formats?**)

*   Also for IPTC: [http://de2.php.net/manual/de/function.iptcparse.php](http://de2.php.net/manual/de/function.iptcparse.php)

**But how can the data be manipulated (changed, added)**

**How can I delete all possible meta-data using PHP?** (i.e. all infomation that does not belong to the image itself)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:10:04.073

[使用 GD 打开并保存图像](http://php.net/manual/en/book.image.php)。这应该删除所有元数据，因为 GD lib 无法处理它。

如果这不能解决问题，请尝试任何

*   [http://lsolesen.github.com/pel/](http://lsolesen.github.com/pel/)
*   [http://ozhiker.com/electronics/pjmt/](http://ozhiker.com/electronics/pjmt/)
*   [http://php.net/iptcembed](http://php.net/iptcembed)

# java - Find best matching writeMethod with Java reflection

> ID：11241178
> 
> 赞同：4
> 
> 时间：2012-06-28T08:56:15.273
> 
> 标签：java, reflection

Commons BeanUtils getMatchingAccessibleMethod finds a match, but not the best possible match.

Consider this simple example:

```
public class TestReflection extends TestCase {

  public static class BeanA {
    private DataX data;
    public BeanA setData(DataX x) {
      System.out.println("setData x");
      return this;
    }
    public BeanA setData(DataY y) {
      System.out.println("setData y");
      return this;
    }
  }

  static class DataX {
  }
  static class DataY extends DataX {
  }
  static class DataZ extends DataY {
  }

  public void testPropertyUtils() {
    try {
      BeanA a = new BeanA();
      System.out.println("--- setters:");
      a.setData(new DataX());
      a.setData(new DataY());
      a.setData(new DataZ());
      System.out.println("--- invokeMethod");
      MethodUtils.invokeMethod(a, "setData", new DataZ());
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
} 
```

(Hint: invokeMethod uses getMatchingAccessibleMethod)

The above code outputs

```
--- setters:
setData x
setData y
setData y
--- invokeMethod
setData x 
```

The last line shoud say "setData y" because the best match for calling "setData" with a DataZ object should be the one with DataY in the interface (just like setData(new DataZ()) does).

Is there a way to find the best possible match or do I have to code that myself?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:40:57.763

我只是好奇它在 MethodUtils.java 中是如何工作的，所以我看了看里面。为了确定应该使用哪种方法作为最佳匹配，每种方法都将获得成本。要计算成本，有一种方法（带有一些额外的 dbg 输出）：

```
/**
 * Gets the number of steps required needed to turn the source class into the 
 * destination class. This represents the number of steps in the object hierarchy 
 * graph.
 * @param srcClass The source class
 * @param destClass The destination class
 * @return The cost of transforming an object
 */
private static float getObjectTransformationCost(Class srcClass, Class destClass) {
    System.out.println("----------- start calculate cost from " + srcClass + " to " + destClass + "------------");

    float cost = 0.0f;
    while (destClass != null && !destClass.equals(srcClass)) {
        System.out.println(srcClass + " and " + destClass + " are " + (destClass.equals(srcClass)? " equal" : " not equal"));
        if (destClass.isInterface() && isAssignmentCompatible(destClass,srcClass)) {
            // slight penalty for interface match. 
            // we still want an exact match to override an interface match, but  
            // an interface match should override anything where we have to get a 
            // superclass.
            cost += 0.25f;
            break;
        }
        cost++;

        destClass = destClass.getSuperclass();
    }

    /*
     * If the destination class is null, we've travelled all the way up to 
     * an Object match. We'll penalize this by adding 1.5 to the cost.
     */
    if (destClass == null) {
        cost += 1.5f;
    }
    System.out.println("COST IS " + cost);

    return cost;
} 
```

所以输出是

```
--- setters:
setData x
setData y
setData y
--- invokeMethod
----------- start calculate cost from class Lolka$DataZ to class Lolka$DataX------------
class Lolka$DataZ and class Lolka$DataX are  not equal
class Lolka$DataZ and class java.lang.Object are  not equal
COST IS 3.5
----------- start calculate cost from class Lolka$DataZ to class Lolka$DataY------------
class Lolka$DataZ and class Lolka$DataY are  not equal
class Lolka$DataZ and class Lolka$DataX are  not equal
class Lolka$DataZ and class java.lang.Object are  not equal
COST IS 4.5
setData x 
```

所以invokeMethode假设转换DataX只是一个继承级别的form Object，而DataY是2。所以DataX-method“更便宜”。这就是背后的逻辑。

**UPD：** 将 dest 更改为 src 工作正常，所以如果我使用

```
private static float getObjectTransformationCost(Class srcClass, Class destClass) {
    float cost = 0.0f;
    while (srcClass != null && !destClass.equals(srcClass)) {
        if (destClass.isInterface() && isAssignmentCompatible(destClass,srcClass)) {
            cost += 0.25f;
            break;
        }
        cost++;

        srcClass = srcClass.getSuperclass();
    }

    if (srcClass == null) {
        cost += 1.5f;
    }

    return cost;
} 
```

输出是

```
--- setters:
setData x
setData y
setData y
--- invokeMethod
setData y 
```

# java - 无法重命名文件

> ID：11241184
> 
> 赞同：0
> 
> 时间：2012-06-28T08:56:33.953
> 
> 标签：java, file, file-rename

我正在尝试从不以特定字符串开头的文件中删除行。想法是将所需的行复制到临时文件中，删除原始文件并将临时文件重命名为原始文件。

我的问题是我无法重命名文件！

```
tempFile.renameTo(new File(file)) 
```

或者

```
tempFile.renameTo(inputFile) 
```

不工作。

谁能告诉我出了什么问题？这是代码：

```
/**
 * The intention is to have a method which would delete (or create
 * a new file) by deleting lines starting with a particular string. *
 */
package com.dr.sort;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

public class RemoveLinesFromFile {

    public void removeLinesStartsWith(String file, String startsWith, Boolean keepOrigFile) {
        String line = null;
        BufferedReader rd = null;
        PrintWriter wt = null;
        File tempFile = null;

        try {
            // Open input file
            File inputFile = new File(file);

            if (!inputFile.isFile()) {
                System.out.println("ERROR: " + file + " is not a valid file.");
                return;
            }

            // Create temporary file

            tempFile = new File(file + "_OUTPUT");

            //Read input file and Write to tempFile

            rd = new BufferedReader(new FileReader(inputFile));
            wt = new PrintWriter(new FileWriter(tempFile));
            while ((line = rd.readLine()) != null) {
                if (line.substring(0, startsWith.length()).equals(startsWith)) {
                    wt.println(line);
                    wt.flush();
                }

            }
            rd.close();

            if (!keepOrigFile) {

                inputFile.delete();

                if (tempFile.renameTo(new File(file))) {
                    System.out.println("OK");
                } else {
                    System.out.println("NOT OK");
                }
            }

        }

        catch (FileNotFoundException ex) {
            ex.printStackTrace();
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        finally {
            if (tempFile != null && tempFile.isFile()) {
                wt.close();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T09:03:54.107

我猜你需要在重命名*之前*关闭你的 PrintWriter 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:11:47.037

```
if (line.substring(0, startsWith.length()).equals(startsWith)) 
```

应该相反，因为我们不希望包含指定的行。所以：

```
if (!line.substring(0, startsWith.length()).equals(startsWith)) 
```

# objective-c - Getting the bounding box of each glyph in pdf - iOS

> ID：11241188
> 
> 赞同：3
> 
> 时间：2012-06-28T08:56:45.403
> 
> 标签：objective-c, ios, pdf, bounding-box, glyph

I've been trying to highlight text in a pdf. After a lot of research and experiments, it seems like I have to find the bounding box of each glyphs, create an overlay where the actual drawing is happening, and highlight the text by filling the CGRect with the info from bounding box and fill it with color. Now, I am stumped with the bounding box.

I've been using the `PDFKitten` to search and highlight the text. Now I want to use it to select and highlight the text. What I don't understand is how does it use the bounding box ( as well as other information like ascent, descent, capHeight, etc.) to fill highlight the searched word. When I tried to access the `FontDescriptor` class to get the info, it displays this:

```
2012-06-28 16:32:20.626 er[2408:15203] x:-665, y:-325, width:2000, height:1006
2012-06-28 16:32:20.627 er[2408:15203] x:-157, y:-250, width:1126, height:952
2012-06-28 16:32:20.628 er[2408:15203] x:-628, y:-376, width:2000, height:1010 
```

It is very confusing so if anyone can clarify this, it will be very much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-22T09:57:43.843

您不能使用字体描述符信息来获取字形的边界框。

PDFKitten 负责使用 RenderingState 模型查找每个字形的宽度和高度。

您可以在扫描 PDF 时使用它来查找单词的位置。

字体字典提供字形的宽度。您可以使用 cid 获得字形的正确宽度。

尝试查看 PDFKitten 的突出显示代码。

# c# - Serialization of dotnumerics matrix in c#

> ID：11241191
> 
> 赞同：0
> 
> 时间：2012-06-28T08:56:52.737
> 
> 标签：c#, sql-server, serialization, matrix

I have a class which contains multiple dotnumeric matrices. The matrices contains doubles with a known maximum precision. Each matrix must be saved to a single field in a mssql database.

What is the best practice for doing this?

Since the matrices are dotnumerics classes I do not have control over these, ie. i can't make them implement ISerializable for instance so I guess I have to manually convert the matrices to a string which can be saved, or is there any better solution?

It is more crucial that the conversion is fast than memory efficient.

I'm using EntityFramework as ORM.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:03:56.120

您可以通过扩展方法向点数值添加行为，也可以创建具有附加功能的派生类（如果点数值矩阵未密封）。
您很可能需要通过`Binary serializer/protobuf.net`或使用自己的实现将其序列化为字节数组。

# python - url开放编码

> ID：11241192
> 
> 赞同：4
> 
> 时间：2012-06-28T08:56:53.097
> 
> 标签：python, beautifulsoup, python-unicode

我有以下用于 urllib 和 BeautifulSoup 的代码：

```
getSite = urllib.urlopen(pageName) # open current site   
getSitesoup = BeautifulSoup(getSite.read()) # reading the site content 
print getSitesoup.originalEncoding
for value in getSitesoup.find_all('link'): # extract all <a> tags 
    defLinks.append(value.get('href')) 
```

结果：

```
/usr/lib/python2.6/site-packages/bs4/dammit.py:231: UnicodeWarning: Some characters could not be decoded, and were replaced with REPLACEMENT CHARACTER.
  "Some characters could not be decoded, and were " 
```

当我尝试阅读该网站时，我得到：

```
�7�e����0*"I߷�G�H����F������9-������;��E�YÞBs���������㔶?�4i���)�����^W�����`w�Ke��%��*9�.'OQB���V��@�����]���(P��^��q�$�S5���tT*�Z 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:01:15.727

BeautifulSoup 在内部使用 Unicode；默认情况下，它将尝试解码来自 UTF-8 的非 unicode 响应。

您尝试加载的网站似乎使用了不同的编码；例如，它*可能*是 UTF-16：

```
>>> print u"""�7�e����0*"I߷�G�H����F������9-������;��E�YÞBs���������㔶?�4i���)�����^W�����`w�Ke��%��*9�.'OQB���V��@�����]���(P��^��q�$�S5���tT*�Z""".encode('utf-8').decode('utf-16-le')
뿯㞽뿯施뿯붿뿯붿⨰䤢럟뿯䞽뿯䢽뿯붿뿯붿붿뿯붿뿯붿뿯㦽붿뿯붿뿯붿뿯㮽뿯붿붿썙䊞붿뿯붿뿯붿뿯붿뿯붿铣㾶뿯㒽붿뿯붿붿뿯붿뿯붿坞뿯붿뿯붿뿯悽붿敋뿯붿붿뿯⪽붿✮兏붿뿯붿붿뿯䂽뿯붿뿯붿뿯嶽뿯붿뿯⢽붿뿯庽뿯붿붿붿㕓뿯붿뿯璽⩔뿯媽 
```

也可能是`mac_cyrillic`：

```
>>> print u"""�7�e����0*"I߷�G�H����F������9-������;��E�YÞBs���������㔶?�4i���)�����^W�����`w�Ke��%��*9�.'OQB���V��@�����]���(P��^��q�$�S5���tT*�Z""".encode('utf-8').decode('mac_cyrillic')
пњљ7пњљeпњљпњљпњљпњљ0*"IяЈпњљGпњљHпњљпњљпњљпњљFпњљпњљпњљпњљпњљпњљ9-пњљпњљпњљпњљпњљпњљ;пњљпњљEпњљY√ЮBsпњљпњљпњљпњљпњљпњљпњљпњљпњљгФґ?пњљ4iпњљпњљпњљ)пњљпњљпњљпњљпњљ^Wпњљпњљпњљпњљпњљ`wпњљKeпњљпњљ%пњљпњљ*9пњљ.'OQBпњљпњљпњљVпњљпњљ@пњљпњљпњљпњљпњљ]пњљпњљпњљ(Pпњљпњљ^пњљпњљqпњљ$пњљS5пњљпњљпњљtT*пњљZ 
```

但是我对您要加载的站点类型的信息太少，也无法读取任何一种编码的输出。:-)

`getSite()`在将结果传递给 BeautifulSoup 之前，您需要对其进行解码：

```
getSite = urllib.urlopen(pageName).decode('utf-16') 
```

通常，网站会以标头的形式`Content-Type`（可能`text/html; charset=utf-16`或类似）返回标头中使用的编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:26:46.287

该页面采用 UTF-8 格式，但服务器以压缩格式将其发送给您：

```
>>> print getSite.headers['content-encoding']
gzip 
```

在通过 Beautiful Soup 运行数据之前，您需要解压缩数据。我在数据上使用 zlib.decompress() 时出错，但是将数据写入文件并使用 gzip.open() 从中读取工作正常——我不知道为什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:39:20.500

我遇到了同样的问题，正如 Leonard 所说，这是由于压缩格式造成的。

[该](http://love-python.blogspot.be/2008/07/accept-encoding-gzip-to-make-your.html)链接为我解决了它，它说要添加`('Accept-Encoding', 'gzip,deflate')`请求标头。例如：

```
opener = urllib2.build_opener()
opener.addheaders = [('Referer', referer),
('User-Agent', uagent),
('Accept-Encoding', 'gzip,deflate')]
usock = opener.open(url)
url = usock.geturl()
data = decode(usock)
usock.close() 
return data 
```

其中`decode()`函数定义为：

```
def decode (page):
    encoding = page.info().get("Content-Encoding")    
    if encoding in ('gzip', 'x-gzip', 'deflate'):
        content = page.read()
        if encoding == 'deflate':
            data = StringIO.StringIO(zlib.decompress(content))
        else:
            data = gzip.GzipFile('', 'rb', 9, StringIO.StringIO(content))
        page = data.read()

    return page 
```

# c# - C#: Start process as the "real" administrator with hard coded privileges

> ID：11241196
> 
> 赞同：0
> 
> 时间：2012-06-28T08:57:05.780
> 
> 标签：c#, .net, impersonation, runas

I need to install different setups silently with administrator privileges. I have to hard code the privileges because the users don´t know username and password to install the setups themselfes.

I have tried two different approaches.

1.  ProcessStartInfo with UserName, Password and UseShellExecute = false.
2.  User Impersonation with

    ```
    [DllImport("advapi32.dll", SetLastError = true)]
    private static extern bool LogonUser(...); 
    ```

In both scenarios `windowsPrincipal.IsInRole(WindowsBuiltInRole.Administrator)` returns false and my setups do not run because of insufficient rights.

Strange behavior: LogonUser always returns true, even with invalid credentials.

Here is the impersonation class:

```
namespace BlackBlade.Utilities
{
    /// <summary>
    /// Quelle: http://www.blackbladeinc.com/en-us/community/blogs/archive/2009/08/10/runas-in-c.aspx
    /// </summary>
    public class SecurityUtilities
    {
        [DllImport("advapi32.dll", SetLastError = true)]
        private static extern bool LogonUser(string lpszUserName, string lpszDomain, string lpszPassword, int dwLogonType, int dwLogonProvider, out IntPtr phToken);

        public delegate void RunAsDelegate();

        public static void RunAs(RunAsDelegate methodToRunAs, string username, string password)
        {
            string userName;

            string domain;
            if (username.IndexOf('\\') > 0)
            {
                //a domain name was supplied
                string[] usernameArray = username.Split('\\');
                userName = usernameArray[1];
                domain = usernameArray[0];
            }
            else
            {
                //there was no domain name supplied
                userName = username;
                domain = ".";
            }
            RunAs(methodToRunAs, userName, password, domain);
        }

        public static void RunAs(RunAsDelegate methodToRunAs, string username, string password, string domain)
        {
            IntPtr userToken;
            WindowsIdentity adminIdentity = null;
            WindowsImpersonationContext adminImpersonationContext = null;

            try
            {
                if (LogonUser(username, string.IsNullOrEmpty(domain) ? "." : domain, password, 9, 0, out userToken))
                {
                    //the impersonation suceeded
                    adminIdentity = new WindowsIdentity(userToken);
                    adminImpersonationContext = adminIdentity.Impersonate();

                    // todo: Entfernen.
                    WindowsPrincipal p = new WindowsPrincipal(adminIdentity);
                    MessageBox.Show(p.IsInRole(WindowsBuiltInRole.Administrator).ToString());

                    //run the delegate method
                    //methodToRunAs();
                }
                else
                    throw new Exception(string.Format("Could not impersonate user {0} in domain {1} with the specified password.", username, domain));
            }
            catch (Exception se)
            {
                int ret = Marshal.GetLastWin32Error();
                if (adminImpersonationContext != null)
                    adminImpersonationContext.Undo();
                throw new Exception("Error code: " + ret.ToString(), se);
            }
            finally
            {
                //revert to self
                if (adminImpersonationContext != null)
                    adminImpersonationContext.Undo();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:26:26.460

~~[Add a manifest](https://stackoverflow.com/questions/2818179/how-to-force-c-sharp-app-to-run-as-administrator-on-windows-7) to the process you are starting with RunAs to request elevation.~~

**Edit:** First, start a process using your known administrator credentials, either with LogonUser/CreateProcessAsUser or with CreateProcessWithLogon. Then check for real admin rights (maybe UAC is turned off) and if necessary, have this process (running as non-elevated administrator) start another copy of itself with [ShellExecuteEx using the runas verb](http://www.codeproject.com/Articles/16796/Riding-the-Vista-UAC-elevator-up-and-down). This is [the only way](http://social.msdn.microsoft.com/Forums/uk/vcmfcatl/thread/8b2bb15c-a95f-44f7-b8e9-8e21d34fdbec). UAC was explicitly designed to prohibit elevation without user confirmation.

Users will have to confirm the elevation, unless UAC is turned off. For better user experience (less scary message box) get a code signing certificate and sign this executable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:04:18.663

Use Group Policy to roll out the MSI or EXE installer.

Alternatively use Task Scheduler to run the installer as the Local System account.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:03:22.507

Have you tried setting dwLogonType to 2 instead of 9?

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb540756(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb540756(v=vs.85).aspx)

Here's a code sample which works for me:

```
 public const int LOGON32_LOGON_INTERACTIVE = 2;
    public const int LOGON32_PROVIDER_DEFAULT = 0;

    WindowsImpersonationContext impersonationContext;

    [DllImport("advapi32.dll")]
    public static extern int LogonUserA(String lpszUserName,
        String lpszDomain,
        String lpszPassword,
        int dwLogonType,
        int dwLogonProvider,
        ref IntPtr phToken);
    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern int DuplicateToken(IntPtr hToken,
        int impersonationLevel,
        ref IntPtr hNewToken);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern bool RevertToSelf();

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    public static extern bool CloseHandle(IntPtr handle);

        WindowsIdentity tempWindowsIdentity;
        IntPtr token = IntPtr.Zero;
        IntPtr tokenDuplicate = IntPtr.Zero;

        if (RevertToSelf())
        {
            if (LogonUserA(userName, domain, password, LOGON32_LOGON_INTERACTIVE,
                LOGON32_PROVIDER_DEFAULT, ref token) != 0)
            {
                if (DuplicateToken(token, 2, ref tokenDuplicate) != 0)
                {
                    tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
                    impersonationContext = tempWindowsIdentity.Impersonate();
                    if (impersonationContext != null)
                    {
                        CloseHandle(token);
                        CloseHandle(tokenDuplicate);
                        return true;
                    }
                }
            }
        }
        if (token != IntPtr.Zero)
            CloseHandle(token);
        if (tokenDuplicate != IntPtr.Zero)
            CloseHandle(tokenDuplicate); 
```

# axapta - 如何在 Axapta 中将查询“绑定”到网格？

> ID：11241198
> 
> 赞同：2
> 
> 时间：2012-06-28T08:57:16.263
> 
> 标签：axapta, dynamics-ax-2009

如何将“复杂”查询与例如 3 个连接表绑定到 Axapta 中的网格？对于“绑定”，我打算：在网格中显示结果查询中的字段列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:14:09.560

如果复杂，则进行查询，然后将查询拖放到`Data Sources`节点上。

连接表（可能是排他性存在的连接表）会自动为您创建。然后您可以更改节点。

任何网格都应处理第一个数据源。`Fields`您从创建的数据源列表中拖动网格字段。

`LinkType` `InnerJoin`如果定义了正确的关系并且您使用`JoinSource`第一个数据源，您可以在不使用多个数据源的情况下执行相同的操作。

请参阅[基于复合查询创建表单](http://msdn.microsoft.com/en-us/library/cc566883%28v=ax.50%29.aspx)。

# javascript - jquery倒计时插件：没有倒计时，只有零

> ID：11241200
> 
> 赞同：0
> 
> 时间：2012-06-28T08:57:21.023
> 
> 标签：javascript, jquery, jquery-plugins, countdown

我想为每个 div 创建 200 个 div 和计时器。这是我的代码：

```
$(document).ready(function() {

    for(var i=0; i<200; i++)
    {
        var tag = '<div id="' + i +'" style="width:150px"></div><br/>';
        $('#rsr').append(tag);
    }

    for(var i=0;i<200; i++)
    {
    var date = randomDate(new Date(2012, 0, 1), new Date())

        $("#"+i).countdown({until: date});
    }
    });

    function randomDate(start, end) {
        return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()))
    } 
```

哪里有错误？
谢谢。 [提琴手](http://jsfiddle.net/SDFLn/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:29:21.850

**问题很简单，您要在 2012 年 1 月 1日**和今天之间创建一个日期，所以它总是在过去。如果目标日期已经过去，则插件在零处停止。

选择例如 2013 代替：

```
var date = randomDate(new Date(2013, 0, 1), new Date()) 
```

您*应该*解决 id 问题（它们不应该以数字开头），但大多数浏览器可以轻松应对它，因此这不是实际原因。

小提琴：http: [//jsfiddle.net/SDFLn/17/](http://jsfiddle.net/SDFLn/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:59:55.637

**id**不能以数字开头试试这个：

```
for(var i=0; i<200; i++)
{
    var tag = '<div id="cnt_' + i +'" style="width:150px"></div><br/>';
    $('#rsr').append(tag);
}

for(var i=0;i<200; i++)
{
var date = randomDate(new Date(2012, 0, 1), new Date())

    $("#cnt_"+i).countdown({until: date});
}
}) 
```

而不是`id="'+i+'"`做`id="cnt_'+i+'"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:02:05.480

请替换这部分代码：

```
for(var i=0;i<200; i++)
{
    var date = randomDate(new Date(2012, 0, 1), new Date());
    $("#s"+i).countdown({until: date});
} 
```

您不能将`id`数字作为起始字符。并且不要忘记以分号结束行`;`。

# ios - 带字幕的表格单元格不会触发转场？

> ID：11241207
> 
> 赞同：0
> 
> 时间：2012-06-28T08:58:26.043
> 
> 标签：ios

我对 tableview 有一个非常奇怪的问题：我有一个表格单元格，我在其中创建了一个到另一个 tableview 的 segue 我使用下面的代码以样式“UITableViewCellStyleSubtitle”启动表格单元格：

我遇到的问题是表格单元格的触摸没有触发segue（没有调用prepareForSegue），但是如果我将表格单元格样式更改为默认值，那么它就可以工作。

有谁知道，有什么问题吗？非常感谢！

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{ 静态 NSString * const kPlacesCellIdentifier = @"Cell99";

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kPlacesCellIdentifier];

cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:kPlacesCellIdentifier];

//cell.editingAccessoryType = UITableViewCellAccessoryDetailDisclosureButton;
CountryCustomers *aCountryCustomer = [_countryCustomersList objectAtIndex:indexPath.row];
cell.textLabel.text = aCountryCustomer.countryName;
NSString *detailTextLable = [@"Users:" stringByAppendingString:[NSString stringWithFormat:@"%d", aCountryCustomer.userNumbers]];
cell.detailTextLabel.text = detailTextLable;
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

//add the national flag
NSString *imageName = [NSString stringWithFormat:@"%@.png",aCountryCustomer.countryName];
cell.imageView.image = [UIImage imageNamed:imageName];

return cell; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:06:20.410

发生这种情况是因为您正在创建另一个单元格，您不应该调用

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:kPlacesCellIdentifier]; 
```

后

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kPlacesCellIdentifier]; 
```

因为`dequeueReusableCellWithIdentifier`已经创建了单元格

要更改单元格类型，请转到故事板并更改，选择单元格，然后将样式更改为字幕

![在此处输入图像描述](../Images/9fdd3cd0e79a62523c3923eb8eb974ed.png)

# android - 在android中使用加速度计计算步数

> ID：11241208
> 
> 赞同：1
> 
> 时间：2012-06-28T08:58:26.497
> 
> 标签：android, signal-processing, accelerometer, sensors

> **可能重复：**
> [如何使用加速度计](https://stackoverflow.com/questions/2122333/how-to-count-the-number-of-steps-using-the-accelerometer)
> [计算步数是否有任何众所周知的算法来计算基于加速度计的步数？](https://stackoverflow.com/questions/6375381/are-there-any-well-known-algorithms-to-count-steps-based-on-the-accelerometer)

嗨，我已经开发了 android 应用程序。在一个模块中，我必须创建一个[计步器](https://en.wikipedia.org/wiki/Pedometer)。现在在这个阶段，我必须计算用户使用加速度计走过的步数。我在互联网上搜索并找到了不同的方法，但没有一个有效。我试过[这个](https://stackoverflow.com/questions/10050035/android-accelerometer-setup-can-i-get-it-to-run-only-when-button-it-pressed)

有谁知道如何实现我的目标？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:13:55.933

最简单的解决方案是有一个时间窗口和多个阈值。信号得到一种双波形式，您可以将一个步骤分成几个部分。您可能需要多个窗口和相应的阈值来识别一个步骤。但请记住，如果有人在楼上/楼下行走或跑步或只是以不同的速度行走，此信号会发生变化。如果您真的要与几个参与者一起尝试，您将获得很大的可变性。

设备之间的阈值会有很大差异。测量频率也会产生影响。允许人们以正常速度检测步行的标准频率约为 10Hz，某些设备使用 20Hz，如果您超过此频率，您将获得大量数据和少量信息。制造商确实使用不同版本的加速度计，因此如果您的软件可以在一部手机上运行，​​那么即使是同一型号，也不能保证它可以在另一部设备上运行。

我会先从绘制你的信号开始。也不要忘记手机可以放在口袋里的不同位置（除非你以某种方式修复它），所以阈值会浮动。所有临床计步器通常都固定在腿部的某个位置。

考虑使用单轴加速度计而不是 3 轴加速度计，信号分析会更容易开始。也看看[傅里叶变换](http://www.mathworks.co.uk/help/techdoc/ref/fft.html)和[小波分析](http://www.mathworks.co.uk/products/wavelet/description1.html)。

请参阅下图，了解使用 3 轴加速度计行走的基本概念。我在做类似任务的时候做到了（走路有点吵）。

![使用 3 轴加速度计进行行走观察](../Images/367bccde59b4d08624be05e4f40310c6.png)

这就是使用单轴加速度计走路的样子（同样是嘈杂的位）

![用单轴加速度计行走](../Images/02773edaaea9d00c0c7894a9aa5d7510.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:43:12.740

这似乎是相当合理和准确的：

[使用单个加速度计提高计步器的性能](http://www.analog.com/static/imported-files/application_notes/47076299220991AN_900.pdf)

无论如何，我也有兴趣找到一个好的算法。

# c# - 排除包含另一个列表中的值的列表项

> ID：11241210
> 
> 赞同：28
> 
> 时间：2012-06-28T08:58:31.160
> 
> 标签：c#, .net, linq, filtering

有两个列表：

```
List<string> excluded = new List<string>() { ".pdf", ".jpg" };
List<string> dataset = new List<string>() {"valid string", "invalid string.pdf", "invalid string2.jpg","valid string 2.xml" }; 
```

如何从“数据集”列表中过滤掉包含“排除”列表中的任何关键字的值？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-28T09:01:24.017

```
var results = dataset.Where(i => !excluded.Any(e => i.Contains(e))); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-07-20T09:57:16.290

```
// Contains four values.
int[] values1 = { 1, 2, 3, 4 };

// Contains three values (1 and 2 also found in values1).
int[] values2 = { 1, 2, 5 };

// Remove all values2 from values1.
var result = values1.Except(values2); 
```

[https://www.dotnetperls.com/except](https://www.dotnetperls.com/except)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-28T09:03:50.253

尝试：

```
var result = from s in dataset
             from e in excluded 
             where !s.Contains(e)
             select e; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T12:16:14.843

```
var result=dataset.Where(x=>!excluded.Exists(y=>x.Contains(y))); 
```

这在排除列表为空时也有效。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-08-01T17:52:46.603

var result = dataset.Where(x => !excluded.Contains(x));

# android - 如何获取对其他正在运行的应用程序活动的引用？

> ID：11241212
> 
> 赞同：0
> 
> 时间：2012-06-28T08:58:43.097
> 
> 标签：android

甚至可能吗？如果需要root就好了。问题背后的原因是我想截取其他应用程序的屏幕截图，只发现这种需要活动的方式：[https ://stackoverflow.com/a/10296881/634821](https://stackoverflow.com/a/10296881/634821)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:50:09.830

> 甚至可能吗？

不，它们在与您的进程不同的进程中运行——您无法从自己的进程中引用这些对象。

> 问题背后的原因是我想截取其他应用程序的屏幕截图

出于明显的隐私和安全原因，设备不支持此功能。欢迎您使用开发人员工具截取屏幕截图，正如您对问题的一些评论所表明的那样。

# jquery - 用于使用文本框中输入的值更新标签值的 Jquery

> ID：11241213
> 
> 赞同：1
> 
> 时间：2012-06-28T08:58:44.890
> 
> 标签：jquery, jquery-ui

这是我的 jquery，用于在单击锚标记时显示文本框

```
$("a").click(function () {

var textbox = $('<input id="txt1" type="text" />')

var oldText = $(this).text();

 $(this).replaceWith(textbox);

           textbox.val(oldText);

     $(this).html($('<input id="txt1" type="text" />').val())

     }); 
```

我的锚标签

```
 <a>hello</a> 
```

当文本框显示文本时使用它我想更改文本框中的文本并显示锚标签的新文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:24:31.960

我不确切知道您要获得什么，但以下代码可以进行动态锚文本编辑。我认为没有必要更换`<a>`元素，我们可以隐藏它：

```
$("a").click(function() {
    $("<input />").val($(this).hide().text()).on("blur", function() {
        $(this).prev("a").text(this.value).show();
        $(this).remove();
    }).insertAfter(this).trigger("focus");
});​ 
```

**演示：http:** [//jsfiddle.net/8dpyG/](http://jsfiddle.net/8dpyG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:28:56.447

试试这个 ：

```
jQuery(document).ready(function(){

$('html').click(function(e){
        if(e.target.id == 'txt1' || e.target.id == 'link1') {
                var textbox = $('<input id="txt1" type="text" />')
                var oldText = $(jQuery("#link1")).text();
                $(jQuery("#link1")).replaceWith(textbox);
                textbox.val(oldText);
                $(jQuery("#link1")).html($('<input id="txt1" type="text" />').val())
       } else {
          var newText =  jQuery('#txt1').val()
          var link = jQuery("<a id='link1'></a>");
          jQuery('#txt1').replaceWith(link);
          jQuery('#link1').text(newText);
      }
    });
});
</script>
<html>
<body>
<a id="link1">hello</a></body>
</html> 
```

这是[演示](http://jsfiddle.net/4YYrP/)

# php - 不确定，是否连接 mongo

> ID：11241214
> 
> 赞同：0
> 
> 时间：2012-06-28T08:58:49.320
> 
> 标签：php, mongodb

我的 php 代码有问题。我尝试在我的服务器中连接 mongodb。但是网页没有显示正确的文字，也没有错误消息。所以我很困惑，它是连接吗？

这是我的代码。请看一下。我很高兴得到所有的帮助

```
$username = "serveruser";
$password = "serverpass";

try
{
    echo "Class connectMongo<br>";
    $m = new Mongo("mongodb://$username:$password@192.168.7.8");
    $db = $m->selectDB('databasename');

    echo "pass connect<br>";

    $list = $db->listCollections();
    foreach ($list as $collection) 
    {
       echo "this is -> $collection... ";
    }
}
catch (MongoConnectionException $e) 
{ 
    die('Error connecting to MongoDB server'); 
} 
catch (MongoException $e) 
{ 
    die('Error: ' . $e->getMessage()); 
} 
```

这是网络节目。

```
Class connectMongo 
```

我尝试`var_dump($m)`，`var_dump($db)`但`var_dump($list)`没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:02:46.863

把这个改成`$m = new Mongo('mongodb://$username:$password@192.168.7.8');`这个`$m = new Mongo("mongodb://$username:$password@192.168.7.8");`

您需要双引号来告诉 PHP 它应该解析字符串并用它们的值替换所有变量。

另请参阅[http://www.php.net/manual/de/language.types.string.php#language.types.string.syntax.double](http://www.php.net/manual/de/language.types.string.php#language.types.string.syntax.double)

# java - 使用哈希映射 作为我的 HashMap 中的关键对象

> ID：11241215
> 
> 赞同：0
> 
> 时间：2012-06-28T08:58:58.510
> 
> 标签：java, hashmap

我问了一个关于[在多个独立 hashMap 对象中搜索特定键](https://stackoverflow.com/questions/11115628/searching-for-specific-keys-in-multiple-independent-hashmap-objects)的先前问题，关于如何实现这一点，或者我是否应该为我的键实现一个特定的新类。

最终，在进一步阅读文档后，注意到 HashMap 确实已经实现了 equals() 和 hashcode() 方法，我决定最好在代码中使用 HashMap 作为键。

我来测试了，我已经构建了以下类型的对象 HashMap< HashMap, Object> 它实际上是从数据库中的信息构建的。

对象本身包含一个 HashMap 类型的成员

所以我遍历我的 Object 成员，并打印结果......

```
for (HashMap<String, String> keVal: Object.getMember().keySet())
    {
        System.out.println("the key of: " + keVal.toString() +"has a hash code of " + keVal.hashCode() +
                "here is the data for this key:\n" +
                Object.getMember().get(keVal).getColData().toString() );

    } 
```

您会注意到，我已打印出 keVal 有关内容及其哈希码的信息，为了更好地衡量，然后在下一行中，我打印出与指定 keVal 信息相关的成员中的信息。然而，问题是我总是从我的地图中得到同一行信息的返回。

这是输出的一小段

```
the key of: {OBS=002018}has a hash code of 1420118533 here is the data for this key:
{OBS=002035, CHIMIO1=null, CHIMIO2=null, DTHEMO=2011-11-09 00:00:00, PNN=7.4, ATCDND=0, HEMA=4.21, ALAT=23.0, LYMP=1.6, CHIMIOT1=0, CHIMIOT2=0, PNE=0.1, PNB=0.0, TAILLE=168, NBCY1=null, RXANT=0, NBCY2=null, CHIMIOX2=null, CONTRAC=1, CHIMIOX1=null, DTFCHIMIO1=null, DTFCHIMIO2=null, ASAT=21.0, ECRIT11=0, ECRIT10=0, SCORPO=1.81, MONO=0.5, HEMATO=38.2, CHIMIOANT=0, ID_VISIT=0, DTDCHIMIO2=null, DTDCHIMIO1=null, ECRIT25=0, ECRIT24=0, ECRIT23=0, LEUCO=9.6, ECRIT7=0, ECRIT8=0, ECRIT9=0, HB=13.2, ECRIT20=0, ECRIT21=0, ECRIT22=0, ECRIT1=0, ICRIT1=1, ECRIT2=0, ECRIT3=0, ECRIT4=0, ECRIT5=0, ECRIT6=0, PLQ=214.0, MENO=0, DTBIOCH=2011-11-09 00:00:00, ECRIT13=0, ECRIT12=0, ECRIT15=0, ECRIT14=0, ECRIT17=0, ECRIT16=0, ECRIT19=0, ECRIT18=0}
the key of: {OBS=002017}has a hash code of 1420118532 here is the data for this key:
{OBS=002035, CHIMIO1=null, CHIMIO2=null, DTHEMO=2011-11-09 00:00:00, PNN=7.4, ATCDND=0, HEMA=4.21, ALAT=23.0, LYMP=1.6, CHIMIOT1=0, CHIMIOT2=0, PNE=0.1, PNB=0.0, TAILLE=168, NBCY1=null, RXANT=0, NBCY2=null, CHIMIOX2=null, CONTRAC=1, CHIMIOX1=null, DTFCHIMIO1=null, DTFCHIMIO2=null, ASAT=21.0, ECRIT11=0, ECRIT10=0, SCORPO=1.81, MONO=0.5, HEMATO=38.2, CHIMIOANT=0, ID_VISIT=0, DTDCHIMIO2=null, DTDCHIMIO1=null, ECRIT25=0, ECRIT24=0, ECRIT23=0, LEUCO=9.6, ECRIT7=0, ECRIT8=0, ECRIT9=0, HB=13.2, ECRIT20=0, ECRIT21=0, ECRIT22=0, ECRIT1=0, ICRIT1=1, ECRIT2=0, ECRIT3=0, ECRIT4=0, ECRIT5=0, ECRIT6=0, PLQ=214.0, MENO=0, DTBIOCH=2011-11-09 00:00:00, ECRIT13=0, ECRIT12=0, ECRIT15=0, ECRIT14=0, ECRIT17=0, ECRIT16=0, ECRIT19=0, ECRIT18=0}
the key of: {OBS=002019}has a hash code of 1420118534 here is the data for this key:
{OBS=002035, CHIMIO1=null, CHIMIO2=null, DTHEMO=2011-11-09 00:00:00, PNN=7.4, ATCDND=0, HEMA=4.21, ALAT=23.0, LYMP=1.6, CHIMIOT1=0, CHIMIOT2=0, PNE=0.1, PNB=0.0, TAILLE=168, NBCY1=null, RXANT=0, NBCY2=null, CHIMIOX2=null, CONTRAC=1, CHIMIOX1=null, DTFCHIMIO1=null, DTFCHIMIO2=null, ASAT=21.0, ECRIT11=0, ECRIT10=0, SCORPO=1.81, MONO=0.5, HEMATO=38.2, CHIMIOANT=0, ID_VISIT=0, DTDCHIMIO2=null, DTDCHIMIO1=null, ECRIT25=0, ECRIT24=0, ECRIT23=0, LEUCO=9.6, ECRIT7=0, ECRIT8=0, ECRIT9=0, HB=13.2, ECRIT20=0, ECRIT21=0, ECRIT22=0, ECRIT1=0, ICRIT1=1, ECRIT2=0, ECRIT3=0, ECRIT4=0, ECRIT5=0, ECRIT6=0, PLQ=214.0, MENO=0, DTBIOCH=2011-11-09 00:00:00, ECRIT13=0, ECRIT12=0, ECRIT15=0, ECRIT14=0, ECRIT17=0, ECRIT16=0, ECRIT19=0, ECRIT18=0}
the key of: {OBS=002014}has a hash code of 1420118529 here is the data for this key:
{OBS=002035, CHIMIO1=null, CHIMIO2=null, DTHEMO=2011-11-09 00:00:00, PNN=7.4, ATCDND=0, HEMA=4.21, ALAT=23.0, LYMP=1.6, CHIMIOT1=0, CHIMIOT2=0, PNE=0.1, PNB=0.0, TAILLE=168, NBCY1=null, RXANT=0, NBCY2=null, CHIMIOX2=null, CONTRAC=1, CHIMIOX1=null, DTFCHIMIO1=null, DTFCHIMIO2=null, ASAT=21.0, ECRIT11=0, ECRIT10=0, SCORPO=1.81, MONO=0.5, HEMATO=38.2, CHIMIOANT=0, ID_VISIT=0, DTDCHIMIO2=null, DTDCHIMIO1=null, ECRIT25=0, ECRIT24=0, ECRIT23=0, LEUCO=9.6, ECRIT7=0, ECRIT8=0, ECRIT9=0, HB=13.2, ECRIT20=0, ECRIT21=0, ECRIT22=0, ECRIT1=0, ICRIT1=1, ECRIT2=0, ECRIT3=0, ECRIT4=0, ECRIT5=0, ECRIT6=0, PLQ=214.0, MENO=0, DTBIOCH=2011-11-09 00:00:00, ECRIT13=0, ECRIT12=0, ECRIT15=0, ECRIT14=0, ECRIT17=0, ECRIT16=0, ECRIT19=0, ECRIT18=0}
the key of: {OBS=002013}has a hash code of 1420118528 here is the data for this key:
{OBS=002035, CHIMIO1=null, CHIMIO2=null, DTHEMO=2011-11-09 00:00:00, PNN=7.4, ATCDND=0, HEMA=4.21, ALAT=23.0, LYMP=1.6, CHIMIOT1=0, CHIMIOT2=0, PNE=0.1, PNB=0.0, TAILLE=168, NBCY1=null, RXANT=0, NBCY2=null, CHIMIOX2=null, CONTRAC=1, CHIMIOX1=null, DTFCHIMIO1=null, DTFCHIMIO2=null, ASAT=21.0, ECRIT11=0, ECRIT10=0, SCORPO=1.81, MONO=0.5, HEMATO=38.2, CHIMIOANT=0, ID_VISIT=0, DTDCHIMIO2=null, DTDCHIMIO1=null, ECRIT25=0, ECRIT24=0, ECRIT23=0, LEUCO=9.6, ECRIT7=0, ECRIT8=0, ECRIT9=0, HB=13.2, ECRIT20=0, ECRIT21=0, ECRIT22=0, ECRIT1=0, ICRIT1=1, ECRIT2=0, ECRIT3=0, ECRIT4=0, ECRIT5=0, ECRIT6=0, PLQ=214.0, MENO=0, DTBIOCH=2011-11-09 00:00:00, ECRIT13=0, ECRIT12=0, ECRIT15=0, ECRIT14=0, ECRIT17=0, ECRIT16=0, ECRIT19=0, ECRIT18=0} 
```

如您所见，检索到的值始终与 OBS=002035 相关，有趣的是，这是映射中的最后一个值（如果我通过检索成员数组对其进行迭代）但在上面的打印输出中没有？需要注意的是，无论我运行多少次代码，我总是会得到一个 OBS=002035 的副本作为我为指定键返回的值！

我有点迷茫，这是HashMap ^中的错误吗？或者我如何检索 keVal 成员的问题。还是 for 循环的第一行实际上是一个潜在的 classCastException，我需要以某种方式处理？

如果我实现我自己的个人 keyObject，然后有一个 HashMap 成员，并且针对 HashMap 成员中的值实现 equals() 和 hashCode()，我还会遇到同样的问题吗？（这可能是一个有趣的问题，因为我将要如何做这件事并测试结果）。

编辑1：我可能在其他地方使用了我的代码，请参阅下面我对 Louis 的回复。一旦我确认这是问题所在，我会要求模组删除这个问题，因为这是一个“愚蠢的程序员”问题，而不是真正的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:12:19.600

好的，我发现了问题...

在阅读我要发布的代码并添加一些额外的评论时，我发现了问题和解决方案。

程序流程如下：

在结果集上使用“select * from [tableName]”循环获取数据，将每一行放入一个临时对象中。

问题方案

在发出 while(resultSet.next()) 循环之前，我创建了临时对象来保存数据。在这个循环中，我将信息添加到上述临时对象中。

在移动到结果集中的下一行之前（即下一个 while 迭代），我将临时对象传递到其他地方。

然而，虽然在首次亮相时临时对象中的信息报告是正确的，但使用它的过程似乎使用的是原始版本而不是与当前循环的当前迭代相关的版本？

将我的临时对象的创建移动到我的 while 循环内部解决了这个问题。这是伪代码...

```
//bad code
ResultSet rs =  getDataFromDBMS("Select * from [tableName];");

Object temp = new objectToHoldInfoFromResultSet();

//loop over the result set
while (rs.next)//for each row in the result set
        {
        for(int i=1; i<=rs.getNumberColums; i++)
                {
                temp.add(infoAboutColumn);
                }
        temp.printInfo();//prints correct info
        anotherObject(makeUseOf(temp));//use info from first iteration.

        }

//Seemingly each loop into the while the temp.doSomethingToData(); uses the temp object created in the first iteration

//good code
ResultSet rs =  getDataFromDBMS("Select * from [tableName];");

//loop over the result set
while (rs.next)//for each row in the result set
        {
         Object temp = new objectToHoldInfoFromResultSet();//moving declaration of temp into the while loop solves the problem.
        for(int i=1; i<=rs.getNumberColums; i++)
                {
                temp.add(infoAboutColumn);
                }
        temp.printInfo();//prints current info

        anotherObject(makeUseOf(temp));//uses the current info.

        } 
```

因此，虽然上述解决了问题，但它引发了另一个问题。

temp.printInfo(); call 始终打印在 while 循环中获得的正确“当前”信息。anotherObject(makeUseOf(temp) 但是从 while 循环外部调用 temp 对象（如果那是我创建它的地方） - 即它似乎没有引用与 temp.printInfo() 调用相同的 temp 对象.

我会在另一个问题中提出这个问题，并输入一个链接......[这是新问题](https://stackoverflow.com/questions/11242488/where-to-initiate-object-in-java)

# xslt-1.0 - 使用 XPath 选择包含撇号的字符串

> ID：11241219
> 
> 赞同：2
> 
> 时间：2012-06-28T08:59:05.233
> 
> 标签：xslt-1.0, xpath-1.0

为了通过 XSLT 生成 CSS，我使用了以下表达式：

```
<xsl:param name="default-font-family" select="'Times New Roman'" /> 
```

这会产生字符串`Times New Roman`，而不是`'Times New Roman'`我需要在 CSS 中使用的字符串。尝试将字体名称包含在其中`&apos;`或`&#x27;`不起作用：

```
<xsl:param name="default-font-family" select="'&apos;Times New Roman&apos;'" />
<xsl:param name="default-font-family" select="'&#x27;Times New Roman&#x27;'" /> 
```

有人可以帮我找到一个合适的表达方式吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:22:05.703

要么声明一个包含变量并用撇号使用它，要么在开始和结束参数标记之间输入文本。示例如下：

```
<xsl:variable name="apostrophe">
  <xsl:text>'</xsl:text>
</xsl:variable>

<xsl:param name="default-font-family" select="concat($apostrophe, 'Times New Roman', $apostrophe)" /> 
```

或者简单地说：

```
<xsl:param name="default-font-family">
  <xsl:text>'Times New Roman'</xsl:text>
</xsl:param> 
```

两者在选择时都会给出您需要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:37:15.550

**使用**：

```
 <xsl:param name="default-font-family" select='"&apos;Times New Roman&apos;"' /> 
```

**这个简单的转换输出了如此定义的参数**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:param name="default-font-family" select='"&apos;Times New Roman&apos;"' />

 <xsl:template match="/">
     <xsl:value-of select="$default-font-family"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）时，会产生所需的正确结果**：

```
'Times New Roman' 
```

# html - 将 HTML 转换为 .eps 格式以供插画家使用

> ID：11241222
> 
> 赞同：1
> 
> 时间：2012-06-28T08:59:21.380
> 
> 标签：html, printing, submit, adobe-illustrator, eps

我有一个用 HTML 制作的公司的信头，用户填写他的公司详细信息和其余信息。当用户单击 SUMBMIT 按钮时，该特定表单应将其转换为 .eps 格式，然后打印。

有没有人知道它是如何完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:13:00.597

我不知道如何将 html 表单转换为 .eps 格式以供插画家使用。但是由于您还提到您想将该表格打印到打印机，您可以执行以下操作 -

1.  当用户单击打印按钮时，调用一个 js 函数`createHTML()`，该函数读取所有表单数据并创建一个 html。例如。

    `var html = "<h1>"+$('#nameField').val()+"</h1>" +`
                          `"<p>"+$('#msgField').val()+"</p>";`

2.  现在在 js 中创建一个新窗口，如下所示 -

    `win = window.open(", ", 'popup', 'toolbar = no, status = no');` `win.document.write("" + html + "");`

3.  然后打电话`win.print()`

检查这个小提琴 - [http://jsfiddle.net/ashwyn/WrTwW/](http://jsfiddle.net/ashwyn/WrTwW/)

# java - 使用哪个版本的 Hadoop API

> ID：11241223
> 
> 赞同：1
> 
> 时间：2012-06-28T08:59:26.620
> 
> 标签：java, hadoop, mapreduce, hdfs

Cloudera 和 Yahoo 发行版中提供了多个 Hadoop API 版本。此外，对于 Cloudera，还有 cdh3u1 到 cdh3u4 版本。

我看到 API 方法的命名方式和接受的参数也发生了变化。

哪个版本的 Hadoop API 以及从哪里可以使用最新且稳定的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:15:04.060

> 哪个版本的 Hadoop API 以及从哪里可以使用最新且稳定的版本？

**首先要注意的是，最新和稳定的 API 不能同时使用。最新的 API 需要一些时间才能变得坚如磐​​石，所有的错误都被发现并修复。**

如果您对打包软件感兴趣，请前往[Cloudera](https://ccp.cloudera.com/display/SUPPORT/CDH+Downloads#CDHDownloads-CDH4PackagesandDownloads)并下载稳定版或 alpha 版并试用。对于[HortonWorks](http://hortonworks.com/download/)，您可以下载 HDP 1.0，这是唯一可用的版本。Cloudera 定期发布 CDH 已经接近 4 年，因此相比 HortonWorks 的 HDP 更加成熟。CDH 包含了下一代 MapReduce，而 HDP 包含了传统的 MapReduce 架构。

上面提到的包（CDH 和 HDP）有一组很好的集成和测试的框架。因此，学习如何使用这些框架很重要。无需担心跨不同框架的互操作性问题。

如果您想真正了解 Hadoop，我建议您从[Apache Hadoop](http://hadoop.apache.org/common/releases.html)下载该软件，然后继续安装和配置。这同样适用于 Pig、Hive 和其他软件。您可能会发现一些兼容性问题，这些问题必须在您继续进行时加以解决。

在[Apache Hadoop](http://hadoop.apache.org/common/releases.html)空间中，有 1x track 具有稳定的传统 MR 架构，然后是 2x track 具有[下一代 MapReduce 架构](http://developer.yahoo.com/blogs/hadoop/posts/2011/02/mapreduce-nextgen/)。

# ruby-on-rails - Facebook 网址 AJAX

> ID：11241225
> 
> 赞同：0
> 
> 时间：2012-06-28T08:59:39.397
> 
> 标签：ruby-on-rails, ajax, facebook, ruby-on-rails-3

> **可能重复：**
> [如何创建像 Facebook 这样的静态（非刷新）菜单栏？](https://stackoverflow.com/questions/11106786/how-to-create-a-static-non-refreshing-menu-bar-like-facebook)

Facebook ajax 是如何工作的技术？你能告诉我如何在不刷新页面和rails中的静态标题的情况下更改URL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:42:32.277

使用 history.pushState() 更改浏览器 URL 而无需重新加载页面。 [http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

然后，您可以将事件侦听器添加到 popstate 事件，并在使用后退按钮时做出相应的反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:09:15.503

[阅读我的答案](https://stackoverflow.com/questions/11106786/how-to-create-a-static-non-refreshing-menu-bar-like-facebook/11107906#11107906)

**[PJAX](https://github.com/rails/pjax_rails)**将 html 从您的服务器加载到当前页面，而无需加载整个页面。它是带有真正永久链接、页面标题和完全降级的工作返回按钮的 ajax。

# c++ - 多个静态类成员函数都具有相同的参数并返回

> ID：11241230
> 
> 赞同：0
> 
> 时间：2012-06-28T08:59:50.317
> 
> 标签：c++, member-function-pointers

在 C++ 中，假设我有以下头文件：

```
class Foo {
  static int func0 (int, int);
  static int func1 (int, int);
  static int func2 (int, int);
  static int func3 (int, int);
}; 
```

反正有没有通过typedefs做到这一点？

我试过了：

```
class Foo {
  typedef int(*func)(int, int);
  static func func1;
  static func func2;
  static func func3;
  static func func4;
}; 
```

然后在一个cpp文件中

```
int Foo::func1(int a, int b) { return a + b; } 
```

但我得到了错误：

> 将 func1 重新定义为不同类型的符号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:16:13.027

你不能用 typedef 做你想做的事，但如果你真的，真的想这样做，你可以使用预处理器。

```
#define MAKE_MY_FUNC(funcname) static int funcname(int, int)

class Foo {
  MAKE_MY_FUNC(func0);
  MAKE_MY_FUNC(func1);
  MAKE_MY_FUNC(func2);
  MAKE_MY_FUNC(func3);
};

#undef MAKE_MY_FUNC  // To make sure that you don't get preprocessor misery afterwards. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:04:06.823

`func1`已被声明为函数指针，而不是您试图将其定义为的函数。

函数指针的使用示例：

```
typedef int (*func_t)(int, int);

int func1(int a, int b) { return a + b; }
int func2(int a, int b) { return a * b; }

funct_t op = func1;
assert(9 == op(4, 5));

op = func2;
assert(20 == op(4, 5)); 
```

话虽如此，我不确定你的确切意图是什么。

# database - 导出特定行，包括没有 DDL 的 CLOB

> ID：11241231
> 
> 赞同：1
> 
> 时间：2012-06-28T08:59:52.140
> 
> 标签：database, oracle, export

我正在寻找合适的工具来导出某些 oracle 数据库表的特定行（WHERE 条件）。有一列 CLOB 数据可以大于 4000 个字符，因此导出为“INSERT INTO”语句不起作用。

使用`exp`工作但也会导出 DDL，这在使用时会出错，`imp`因为表已经存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:15:03.620

`IGNORE=Y`导入转储文件时使用该参数。这告诉导入忽略创建错误。 [了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14215/exp_imp.htm#sthref2448)。

# html - 使用 html 4.01 标记此表格布局，使用表格元素

> ID：11241232
> 
> 赞同：-1
> 
> 时间：2012-06-28T08:59:52.920
> 
> 标签：html, html-table

![在此处输入图像描述](../Images/ea6cd73af1bedc5a399067d5c21c7701.png)

谁能教我如何只使用表格而不使用外部 CSS 在 HTML 中标记此表格，只需使用表格元素的最简单属性

*   仅使用纯 HTML

*   尺寸已注明

*   可以忽略边框、单元格间距和填充

*   总宽度=800 高度=600

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:36:08.287

我认为，您应该使用两张桌子，但我认为这不是一个好主意。尝试这样的事情：

```
<TABLE border="1" Width="800" Height="200" Align="Center">
<TR>
    <TD Width="400" Height="200">1 
    <TD Width="400" Height="200">2
</TR>
</TABLE>

<TABLE border="1" Width="800" Height="400" Align="Center">
<TR>
    <TD colspan="3" Width="800" Height="200">3
</TR>
<TR>
    <TD Width="250" Height="200">4 
    <TD Width="300" Height="200">5 
    <TD Width="250" Height="200">6
</TR>
</TABLE> 
```

# c++ - 在 Netbeans (Windows 7) 中使用 C++ 连接 MySQL 时出错

> ID：11241236
> 
> 赞同：1
> 
> 时间：2012-06-28T09:00:05.607
> 
> 标签：c++, mysql

我在 Windows 7 中安装了 Netbeans 7.1.2，

我想在 Netbeans 中使用 C++ 连接到 MySQL

事实上，我使用网站上的示例

[http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-examples-complete-example-1.html](http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-examples-complete-example-1.html)

运行此示例时，我收到此错误：

> 构建/调试/Cygwin-Windows/main.o：在函数`main': /cygdrive/c/CPP/MySQLConnect/main.cpp:33: undefined reference to`_get_driver_instance'

我尝试修复此错误，但没有。

有没有人遇到过这个问题，请给我一些建议来解决这个问题。

提前致谢。

# spring-mvc - 记录你的 Spring MVC api？

> ID：11241240
> 
> 赞同：2
> 
> 时间：2012-06-28T09:00:19.820
> 
> 标签：spring-mvc, documentation

我正在寻找一种工具，它可以在 Spring MVC 控制器上记录 @RequestMapping 和 @RequestParam 注释以构建某种 api，然后我可以将其提供给使用我的服务的人。有谁知道这样的工具是否可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:38:46.220

另一个工具是 spring-doclet

[https://github.com/scottfrederick/springdoclet](https://github.com/scottfrederick/springdoclet)

它已有几年的历史，但从您的 javadoc 注释文件中产生了很好的输出。

# html - 屏幕外的 html 元素仍然被浏览器渲染

> ID：11241245
> 
> 赞同：0
> 
> 时间：2012-06-28T09:00:36.277
> 
> 标签：html, browser, rendering

我的 body 标签填充了浏览器窗口，它有一组 div 元素，我将其称为屏幕。一次只显示一个屏幕，填充 body 标签，其他屏幕位于浏览器视图端口的边缘。我想知道我是否应该将它们设置`display:none;`为保存浏览器进行渲染它们的任何工作。或者浏览器是否已经知道他们不在屏幕上并让他们独自一人直到他们回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T21:19:05.623

[链接](http://taligarsiel.com/Projects/howbrowserswork1.htm#The_render_tree_relation_to_the_DOM_tree)显示`display:none`元素不会插入到渲染树中，因此可以通过将屏幕元素设置为`display:none`.

# javascript - 是否有类似于 Chrome 的检查元素功能的 HTML 编辑器？

> ID：11241248
> 
> 赞同：1
> 
> 时间：2012-06-28T09:00:46.523
> 
> 标签：javascript, html, css

抱歉，如果这是在本网站上提出的错误类型的问题，但是否有一个 HTML 编辑器的功能类似于 Google Chrome 的检查元素功能？

现在我使用 TextEdit 来编辑我的 HTML 文档，这还可以，但有点费力，我绝对不想使用 WYSIWYG 编辑器，但我真的很喜欢检查元素功能显示带有展开/折叠按钮的 HTML 代码的方式以及如何每个元素的所有 CSS 属性都清楚地列出。我认为这是编辑 HTML 最简单和最有效的方法，比原始文本和所见即所得更好。

我知道检查元素功能不允许保存，那么是否有一个程序以类似的方式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:06:08.540

通常我会建议 sublime 但是我现在肯定会推荐 Brackets [http://blog.brackets.io/2012/06/25/brackets-open-source-code-editor/](http://blog.brackets.io/2012/06/25/brackets-open-source-code-editor/) 观看视频，我几乎可以肯定你会立即被卖掉.

最大的优势是完全实时编辑，即修改颜色并在您键入时更新，而不必刷新页面。

此外，实时环境没有内置在程序中，它是您的网络浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:03:21.623

[Notepad++](http://notepad-plus-plus.org/)是最简单的，它具有您描述的所有功能（可能除了 CSS 位之外）......但是如果您想要更实质性的东西，那么[Netbeans](http://netbeans.org/)或[Eclipse](http://www.eclipse.org/) 工作得很好

周围有很多开源代码编辑器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:47:29.797

Netbeans 和 Eclipse 将最适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T09:09:56.790

你也可以试试这个编辑器： [Sublime Text](http://www.sublimetext.com/2)、[coda](http://panic.com/coda/)、（仅适用于 Mac OS）或[textmate](http://macromates.com/)（仅适用于 Mac OS）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T09:09:59.833

但不确定你到底想要什么，但除了 Adob​​e Dreamweaver 之外，还有[Sublime](http://www.sublimetext.com/)，我认为它是 Web 开发人员最好的编辑器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T09:24:43.560

您也可以使用[Komodo Edit](http://www.activestate.com/komodo-edit)。环境不错，也支持 HTML5...您还可以为编辑器窗口选择不同的主题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T09:32:19.927

如果你想要实时预览，Mozilla Thimble 看起来很有趣：[https ://webmaker.org/en-US/tools/#thimble](https://webmaker.org/en-US/tools/#thimble)

# c# - 动态 DataGrid 标题文本

> ID：11241249
> 
> 赞同：0
> 
> 时间：2012-06-28T09:00:52.890
> 
> 标签：c#, sql, wpf, datagrid, wpfdatagrid

有一个我正在编码的应用程序，它使用 DataGrid 的。我想要做的是将标题文本替换为 sql 数据库中的列中的标题文本。有没有人尝试过这个或对如何实现它有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:05:44.937

你应该做什么。

使用 sql 查询填充数据表（在 Google 和 Stackoverflow 上易于搜索）。

说你的查询是

```
Select id, Emp_Name from emp; 
```

将该 Datatable 作为 ItemSource 提供给 DataGrid。

现在您的网格列将与您的 sql 查询的列相同。IE。数据网格将有 2 列（id 和 Emp_Name）

# listbox - Google App Script ListBox - 阅读项目

> ID：11241252
> 
> 赞同：0
> 
> 时间：2012-06-28T09:00:55.013
> 
> 标签：listbox, google-apps-script

我找不到读取 UI ListBox 对象中项目的方法。我在 Google Web Toolkit 中搜索并找到了一些方法，例如 getItemCount() 和 getItemText()，但是在 javascript 中使用对象时它们不可用.....

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:04:48.393

您必须通过服务器端调用传递列表框小部件才能从中获取所选数据：

```
function doGet(){
  var app = UiApp.createApplication();
  var lb = app.createListBox();
  lb.setName("calName") //name used to fetch selected result
  .addItem("Text Option One", "1")//options for selection
  .addItem("Text Option Two","");//first peram display text and second peram value
  app.add(lb); // adds listbox to display
  app.add(app.createButton("Click Me")//create button
         .addClickHandler(app.createServerHandler("showResult") // Create server side execution to handel click
                          .addCallbackElement(lb))); // add list-boxas element to be passed to server as parameter
 return app;
}

function showResult(e){
  var app = UiApp.getActiveApplication();
  var res = e.parameter.calName;//parameter name same as list-box name given 
  app.add(app.createLabel("Selected option is " + res));//displays selected option
  return app;
} 
```

只需创建测试应用程序并保存一个版本，将此代码用于应用程序并在部署后查看最新代码。

# autohotkey - Autohotkey 无法识别分辨率更改下的图像

> ID：11241258
> 
> 赞同：1
> 
> 时间：2012-06-28T09:01:04.733
> 
> 标签：autohotkey, image-recognition

我创建了一个自动热键脚本，它通过启动应用程序并单击提到的脚本图标来自动执行手动过程。该脚本在具有更高分辨率的一台计算机上运行良好，但无法在具有不同分辨率的另一台计算机上执行。您对其他方式的锻炼有什么建议吗？这个应用程序没有任何键盘快捷键，只能在鼠标点击时执行。我希望会有一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:09:01.183

大多数应用程序都有 Alt 快捷方式，你试过了吗？您也可以尝试根据分辨率重新调整鼠标单击 x,y

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:49:38.330

这是我曾经解决的方法。一开始我要求用户捕获每个图标的鼠标位置，并存储这些坐标以供以后使用。

```
Hotkey, LButton, off ; Make sure that the Left Mouse button inactivator is turned Off

Lbutton:: ; Disable the Left Mouse Button

SplashImage , %A_ScriptDir%/Images/YourScreenShot.jpg,,, Screen shot, Icons     ;   Show Screenshot of what the user needs to do
SoundBeep 1000, 300 ; wake up user

SplashTextOn, 200, 100, Script Preparations, Please Click on Icon1\. ; Show new instructions to the user
WinMove, Script Preparations,, (A_ScreenWidth/2)-150, (A_ScreenHeight/2)-200 ; Move the text instructions window with the name "Script Preparations" 150 pixels right of the center of the screen and 200 pixels up
SoundBeep 600, 300 ; Wake up user
; Here the left mouse button will temporarily be disabled (to prevent actions)
Hotkey, LButton, on ; Turn Left Mouse Button OFF, to capture the Mouse click
KeyWait, LButton, D ; Wait for LeftMouseButton click Down
MouseGetPos, xpos1 ,ypos1 ; Store the position where the mouse was clicked (Icon1) 
```

对所有使用的图标重复此操作。

然后，如果你想点击 icon1 使用：

```
MouseClick, left, %xpos1% ,%ypos1% ; Perform the mouse click on the captured mouse location 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:17:09.113

**::: 解释问题 :::**请阅读以了解问题。

让我们从简单的开始，您在 COMPUTER_A 上创建自动热键脚本，打印屏幕/捕获所有图像并在 COMPUTER_A 上调整它们的大小，但是当您将文件传输到 COMPUTER_B 时，image_search 也找不到匹配项或根本找不到匹配项，这是为什么呢？

那么 COMPUTER_A 和 COMPUTER_B 是两台完全不同的计算机，如果您将颜色模板从 COMPUTER_A 复制到 COMPUTER_B 或任何计算机上，则问题出在两台不同的计算机上，每台计算机上都安装了不同的颜色模板。总体问题是不同的颜色模板不允许 image_search 逐个像素地找到匹配项，导致两台不同计算机之间的差异不同。这就是为什么最好将颜色模板从计算机_A 复制到另一台计算机以使图像搜索正常工作。

**::: 找到颜色模板 :::**

在 Win7 --> 控制面板 --> 颜色管理 --> 我的很容易找到，因为它是我的电脑显示器附带的颜色模板，但是你的可能需要更多的工作才能找到。ICC 配置文件通常是打印机，ICM 配置文件是您计算机屏幕的显示驱动程序/颜色模板。一旦您在 COMPUTER_A 上找到当前正在使用的显示配置文件，请在您的计算机存储中找到它并将其复制到您的自动热键方向以便将来轻松访问，以便以后可以使用您的自动热键脚本将其复制到 computer_B 或 computer_Z。右键单击复制到计算机_B 后的 ICM，然后单击安装，您可能需要重新启动计算机才能使所有更改生效。

**：：： 结果 ：：：**

一旦计算机_A 的颜色模板安装在另一台计算机上，image_search 应该完全可以在计算机_A 上工作，我已经在 XP、Vista 和 Win7 的 6 台不同计算机上亲自测试了结果，我相信始终有 100% 的成功率这是对其他计算机的 image_search 问题的通用解决方案/修复。

我确实提醒那些对此有困难的少数人要有耐心，并且您是否对“Windows 颜色配置文件”进行了相当多的研究以使该解决方案适合您，我只是预见到有人意外发现/复制了错误的 ICM/ICC 配置文件。如果有人安装像 adobe photoshop/多媒体/开发软件这样的摄影软件/开发软件，有时他们会附带自己的 ICM/ICC 配置文件，并且可能会覆盖现有的配置文件，从而导致 image_search 再次成为问题。只需重新安装默认的 ICC/ICM 配置文件即可解决该问题。

**：：： 结论 ：：：**

我希望这对某人有所帮助，对所有的写作感到抱歉，但我认为最好与大家分享我的完整发现，因为它可能会变得复杂。

# c# - 如何使用 mvc 3 aspx 引擎创建动态网格？

> ID：11241259
> 
> 赞同：0
> 
> 时间：2012-06-28T09:01:08.243
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, gridview

我是 asp.net mvc 3 的新手。我正在尝试使用 mvc3 生成动态网格视图，但我无法生成网格。我的代码如下：

**模型：**

```
 public class Employee
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public double Salary { get; set; }
        public static List<Employee> GetList()
        {
            List<Employee> employees = new List<Employee>{
          new Employee   { FirstName="Rahul", LastName="Kumar", Salary=45000},
          new Employee   { FirstName="Jose", LastName="Mathews", Salary=25000},
          new Employee   { FirstName="Ajith", LastName="Kumar", Salary=25000},
          new Employee   { FirstName="Scott", LastName="Allen", Salary=35000},
            new Employee   { FirstName="Abhishek", LastName="Nair", Salary=125000}
            };
            return employees;
        }
    } 
```

**控制器**

```
 public class EmployeeController : Controller
    {
        //
        // GET: /Employee/

        public ActionResult Index()
        {
            var empoyees = Employee.GetList();
            return View(empoyees);
        }

    } 
```

**看法：**

```
 <%
    var grid = new WebGrid(source: Model, defaultSort: "FirstName", rowsPerPage: 3);
    using (Html.BeginForm())
    {
        %>
        <div id="grid">
        <%:grid.GetHtml(tableStyle:"grid", 
        headerStyle:"head", 
        alternatingRowStyle:"alt",
        columns:grid.Columns(
        grid.Column("FirstName"),
        grid.Column("LastName"),
        grid.Column("Salary"))) %>
        </div>
        <%} %> 
```

我想创建

```
 grid.Column("FirstName"),
        grid.Column("LastName"),
        grid.Column("Salary")) 
```

动态返回控制器动作。如何返回动态列或动态网格视图或扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:41:48.227

@programmerist，**这是你的答案；）**

```
@{
    var properties = typeof(MyModelClassName).GetProperties();
    var webGridColumns = properties.Select(prop => new WebGridColumn()
        {
            ColumnName = prop.Name, Header = prop.Name, Style = "my-style"
        }).ToList();

    var grid = new WebGrid(source: Model, rowsPerPage: 3);
    @grid.GetHtml(tableStyle: "grid",
                  headerStyle: "head",
                  alternatingRowStyle: "alt",
                  columns: webGridColumns)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:39:13.887

尝试这个。通过这种方式，您可以创建一个网格：

```
<table>
 <tr>
     <th>
         Item1
     </th>
     <th>
         Item2
     </th>
     <th>
         Item2
     </th>
 </tr>

<% foreach (var item in Model) { %>
    <tr>
        <td>
            <%: item.item1 %>
        </td>
        <td>
            <%: item.item2 %>
        </td>
        <td>
            <%: item.item3 %>
        </td>           
    </tr>
<% } %>
</table> 
```

# html - 具有部分页面加载的 HTML5 History API 后退按钮

> ID：11241263
> 
> 赞同：10
> 
> 时间：2012-06-28T09:01:26.303
> 
> 标签：html, http-headers, browser-cache, pushstate, popstate

为了提高我网站的性能/响应能力，我使用 AJAX、replaceState、pushState 和 popstate 侦听器实现了部分页面加载。

我基本上将页面的中心部分 (HTML) 作为我的状态对象存储在历史记录中。单击链接时，我仅从服务器请求页面的中心位（使用不同的 Accept 标头标识这些请求）并将其替换为 javascript。在 popstate 上，我抓住前一个中心部分并将其推回 dom。

这大部分工作正常，但是我发现了一个我坚持的特定问题。解释起来有点复杂，所以如果不是很清楚，我很抱歉。

我们的大多数页面上都有一个搜索表单。通过 ajax 加载的部分页面仅适用于 GET 请求，并且表单执行 POST 导致整个页面加载。

如果我浏览以下一组页面，我最终会看到一个格式错误的部分页面，该页面**仅**包含中心内容，没有任何周围的 dom：

从主页开始（通过整页加载）- 执行搜索（post-redirect-get） 带
您到搜索结果（通过整页加载）- 然后单击主页
返回主页（通过动态获取）- 单击browser back
Search Results (from popstate listener) - 点击浏览器返回
Malformed home page。

当出现格式错误的主页时，我的 popstate 侦听器根本不存在。

我*认为*正在发生的是，浏览器正在缓存主页的第二次加载（动态，部分），然后当整个页面返回时，浏览器仅显示缓存的部分响应而不是整个页面.

为了解决这个问题，我在响应中添加了一个 Vary: Accept 标头，让浏览器知道内容可能会根据接受标头发生变化。我还在部分加载的内容中添加了 Cache-Control max-age=0、pragma no-cache 和过去的到期日期，以试图强制浏览器不缓存它，但这都不能解决它。

不幸的是，我的公司不允许外部流量到我们的开发服务器，所以我无法向您展示这个问题。我在这里查看了各种类似的问题，但它们似乎都不完全相同，建议的解决方案似乎也不起作用。

如果我在我的动态 GET 请求中添加一个无意义的参数 (blah=blah)，这可以解决问题。然而，这是一个丑陋的黑客，我宁愿不这样做。这似乎应该可以通过标头解决，因为我认为这是一个缓存问题。谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T10:31:17.303

这是一个缓存问题。将响应标头 Cache-Control 设置为`no-cache`or`max-age=0`时，FF 中不会出现问题（如您所说），但它在 Chrome 中仍然存在。

对我有用的标题是 Cache-Control: `no-store`。并非所有浏览器都始终如一地实现了这一点（您可以找到询问无缓存和无存储之间有什么区别的问题），但在 Chrome 中也有您期望的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:10:30.613

我有一个类似的问题。我正在构建一个基于 Web 的向导并使用 jquery ajax 来加载每个步骤（后端的 ASP.NET MVC）。

初始路径类似于 /Questions/Show - 加载整个页面并显示第一个问题（问题 0）。当用户单击下一个图像时，它会执行一个带有 url /Questions/Save/0 的 jquery .load() 。这将保存答案并返回包含下一个问题的部分视图。下一次保存使用 /Questions/Save/1 执行 jquery .load() ...

我实现了 History.js，以便用户可以来回前进（前进？）。它将问题编号存储在状态数据中。当它检测到状态变化（并且状态的问题编号与页面上的不同）时，它会执行 jquery .load() 来加载正确的问题。

起初，我使用与加载初始页面时相同的路线（/Questions/Show/X，其中 X 是问题编号）。在后端，我检测它是否是 ajax 请求，如果是，则返回部分视图而不是完整视图。这就是与您的问题类似的问题：假设我在第 3 个问题上，返回，然后前进，然后访问 www.google.com，然后单击返回按钮。它显示了问题 3，但它是部分视图 - 因为浏览器缓存了该路由的部分视图。

我的解决方案是为 ajax 调用创建一个单独的路由：/Questions/Load/X（它在后端使用通用代码）。现在有两个不同的路由（/Questions/Show 用于非 ajax 和 /Questions/Load 用于 ajax），浏览器在上述情况下正确显示整个页面。

所以也许一个类似的解决方案会为你工作......即你的主页有两种不同的路线 - 一种用于完整页面，一种用于部分页面。希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T19:15:45.067

> 单击链接时，我仅从服务器请求页面的中心位（**使用不同的 Accept 标头标识这些请求**）并将其替换为 javascript。

惊人的。这就是 RESTful 的方式。但是要让它发挥作用，还需要做一件事：`Vary`在响应中添加一个标头。

```
Vary: Accept 
```

这告诉浏览器具有不同 Accept 标头的请求可能会得到不同的响应。因为这两个请求使用不同的 Accept 标头，所以浏览器（以及任何缓存代理）将分别缓存响应。

与设置不同`Cache-Control: no-store`，这仍然允许您使用缓存。

# c#-4.0 - mdicontainer 与 childcontrol 重叠

> ID：11241264
> 
> 赞同：0
> 
> 时间：2012-06-28T09:01:31.953
> 
> 标签：c#-4.0

在我的应用程序中，我有一个带有菜单条的主页，用于导航到其他表单因为我希望它始终打开，所以我将其设置为 MDICONTAINER。现在我需要在 menustripclick 事件上打开一个表单，因为我设置了这样的表单

```
 public partial class MainForm : Form
    {
        public MainForm()
        {

            InitializeComponent();
            this.IsMdiContainer = true;
            loginmain();

            intialsetupform();

        }

        private void companyToolStripMenuItem_Click(object sender, EventArgs e)
        {
            Master.CompanyMasterForm cmpnymasterform = new Master.CompanyMasterForm();
          cmpnymasterform.MdiParent= this ;

            cmpnymasterform.Show();
        }} 
```

一切正常，我让子窗口正常工作，但现在我需要在主窗体中添加两个面板 << 一个用于显示状态消息，另一个用于显示其他控件

我已经添加了面板并锚定了它们，问题是现在当子窗口打开时，父窗体（主窗体）的所有面板和控件都在子窗口控件之上，这使得它不可读 请提供任何想法来克服这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:46:14.967

我已经使用控件的锚属性设置了所有面板的位置，现在控件知道那里的位置
并使用停靠属性将消息框设置为底部

# backbone.js - 骨干关系模型和collection.length

> ID：11241270
> 
> 赞同：1
> 
> 时间：2012-06-28T09:02:06.120
> 
> 标签：backbone.js, backbone-relational

假设我有以下模型（model1）和集合（collection1）

```
model1.attributes = {
   name: 'bar'
};

collection1.models = [{}, {}, {}]; 
```

可以通过使用主干关系来`model1`了解`collection1`?

```
model1.attributes = {
   name: 'bar',
   collection1Length = 3 // collection1.models.length
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:14:55.970

根据您的评论，最好在模型中简单地创建对集合本身的引用：

```
ModelName = Backbone.Model.extend({
    ...
    linked_collection: null // don't call this 'collection', as model.collection already exists
    ...
}

var model1 = new ModelName();
model1.set('linked_collection',collection1); 
```

现在您可以随时执行此操作以获取链接集合的长度。

```
model1.get('linked_collection').length 
```

# javascript - 在循环中使用 JS 和 CSS 更改对象的旋转

> ID：11241273
> 
> 赞同：1
> 
> 时间：2012-06-28T09:02:12.003
> 
> 标签：javascript, loops, css, rotation

我正在尝试使图像在无限循环中的 2 个位置之间更改其旋转。这些是我的两个职位：

```
logo.style.webkitTransform = "rotate(3deg)"
logo.style.webkitTransform = "rotate(-3deg)" 
```

有人可以帮助我创建延迟并将其放入循环中。到目前为止，我所有的努力都没有奏效。（我正在尝试使用 while 循环 + setTimeout）

或者有更好的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:08:31.060

试试这个，看看是否有效

```
var dir = false;

setInterval(function(){
    (dir == false) ? logo.style.webkitTransform = "rotate(3deg)" : logo.style.webkitTransform = "rotate(-3deg)";
    dir = !dir;
}, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:13:37.040

您可以将它们放入 setInterval() JavaScript 函数中：

```
var currentDeg = 3;

function changeRotation(deg){
    logo.style.webkitTransform = "rotate("+deg+"deg)";
    currentDeg = deg;
}

function setDeg(){
  if(currentDeg == 3){
    changeRotation(-3);
  } else {
    changeRotation(3);
  }
}

setInterval(setDeg(), 500); 
```

高温高压

# c# - 为什么从 c# 邮件要在正文中发送图片（签名）？

> ID：11241275
> 
> 赞同：-3
> 
> 时间：2012-06-28T09:02:15.357
> 
> 标签：c#, sendmail, image

我想在电子邮件正文中发送带有图片的邮件。在我的第一次尝试中，图片看起来像一个附件：它是可见的，但在最后。我需要图片位于电子邮件正文的中心。

我使用的教程是[链接](http://blog.devexperience.net/en/12/Send_an_Email_in_CSharp_with_Inline_attachments.aspx)。

我的代码如下所示：

```
 mail.Body = "string htmlBody = \"<html><body><h1><center><img src=\"C:\\picture.png\"/></h1></html>";
    string contentID = "image1";
    Attachment inline = new Attachment("C:\\picture.png");
    inline.ContentDisposition.Inline = true;
    inline.ContentDisposition.DispositionType = DispositionTypeNames.Inline;
    inline.ContentId = contentID;
    inline.ContentType.MediaType = "image/png";
    inline.ContentType.Name = "C:\\picture.png";
    mail.Attachments.Add(inline);
    mail.IsBodyHtml = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:07:11.673

如果您真的按照教程进行操作，您会看到以下代码：

```
email.Body = "[...]<img src=\"@@IMAGE@@\" alt=\"\">";

// generate the contentID string using the datetime
string contentID = Path.GetFileName(attachmentPath).Replace(".", "");

Attachment inline
[...]
inline.ContentId = contentID;
[...]
email.Attachments.Add(inline);

// replace the tag with the correct content ID
email.Body = email.Body.Replace("@@IMAGE@@", "cid:" + contentID); 
```

当然使用`<img src="C:\picture.png">`是行不通的，因为收到邮件的用户很可能在他们的 PC 上的那个路径中没有那个图像，更不用说当他们使用 webmail 时了。

# javascript - 海上交通地图 - 纬度/经度 Javascript

> ID：11241278
> 
> 赞同：1
> 
> 时间：2012-06-28T09:02:19.663
> 
> 标签：javascript, html, gps, latitude-longitude

我从我的网页创建了一张地图，显示了某个位置的 ais-ships：

```
<!DOCTYPE html>
  <html>
  <body>

  <script type="text/javascript">

  width='40%';          //the width of the embedded map in pixels or percentage
  height=430;           //the height of the embedded map in pixels or percentage
  border=1;            //the width of border around the map. Zero means no border
  notation=false;      //true or false to display or not the vessel icons and 
                       //options at the left
  shownames=false;     //true or false to dispaly ship names on the map
  latitude=59.01;      //the latitude of the center of the map in decimal degrees
  longitude=5.78;      //the longitude of the center of the map in decimal degrees
  zoom=10;             //the zoom level of the map. Use values between 2 and 17
  maptype=3;                                                    
  trackvessel=0;       //the MMSI of the vessel to track, if within the range 
  fleet='';            //the registered email address of a user-defined fleet 
  remember=false;     
  scale=2;

  </script>
  <script type="text/javascript" src="http://www.marinetraffic.com/ais/embed.js">
  </script>

  </body>
  </html> 
```

我不想在代码中手动输入经度和纬度，而是希望将从例如 iPhone 检索到的 GPS 位置放在这些字段中。我已经尝试了几种解决方案，但我似乎没有得到正确的解决方案。有没有人有一个很好的解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:07:05.230

您可以使用 HTML5 Geolocation 来获取 Lat、Long，但这会要求用户许可，如果用户拒绝，您的代码将失败。就是这样

```
if (navigator.geolocation) 
{
    navigator.geolocation.getCurrentPosition(function(position) 
    {  
        lat = position.coords.latitude;
        lon = position.coords.longitude; 
    }); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:06:43.640

一些浏览器，包括 iPhone 浏览器，支持（草案）[W3C `navigator.geolocation`API](http://dev.w3.org/geo/api/spec-source.html)。

# android - Android 共享内部存储

> ID：11241282
> 
> 赞同：5
> 
> 时间：2012-06-28T09:02:45.060
> 
> 标签：android, storage, shared, internal

在任何基于 Android 的设备上是否有共享内部存储之类的东西？我知道您可以将 SDCard 用作应用程序之间的共享文件位置，但对于我正在处理的项目，我们不希望 SD 卡丢失（敏感材料）的能力。

问题如下。App1 允许用户浏览（例如）一些 word 文档并将它们下载到建议的共享存储中，然后用户可以将此文件传递给 Documents 2 去编辑它们并保存更改。然后，应用 1 允许上传更改的文件。

我不喜欢将文档编辑器 word/excel 直接构建到应用程序中，除非那很容易？

编辑：

第二个应用是“Documents 2 Go”，我将无法编辑它的 AndroidManifest

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-24T08:11:39.997

我现在面对 txt 文件的类似情况并这样做了。

```
File downloadedFile= new File( context.getFilesDir(), "simple.txt" );
downloadedFile.setReadable( true, false );
downloadedFile.setWritable( true, false ); //set read/write for others
Uri downloadFileUri = Uri.fromFile( downloadedFile );
Intent intentToEditFile = new Intent( Intent.ACTION_EDIT );
intentToEditFile.setDataAndType( downloadFileUri, "text/plain" );
context.startActivity( intentToEditFile ); 
```

现在将启动“Document 2 Go”编辑器来编辑文件，并且能够编辑 simple.txt

注意 1：Uri 应该从使用 `setReadable()/setWritable`.
注意 2：其他用户的读/写权限可能不会反映在文件系统中。有时我在 adb shell 中看不到 rw-rw-rw-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:09:20.630

我相信[ContentProviders](http://developer.android.com/guide/topics/providers/content-providers.html)是您的解决方案。它是 Android 推荐的在不同应用程序之间共享应用程序数据的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:10:16.400

[https://stackoverflow.com/a/6708681/804447](https://stackoverflow.com/a/6708681/804447)

在应用程序之间共享数据是 ContentProviders 的用途。假设您知道如何编写 ContentProvider 并对其进行访问，您可以通过 ParcelFileDescriptor 访问文件，其中包括用于创建文件的模式的常量。

您现在需要的是限制访问，以便不是每个人都可以通过内容提供者读取文件，而您可以通过 android 权限来做到这一点。在您的应用程序的清单中，将托管文件和内容提供程序的应用程序，编写如下内容：

```
<permission android:name="com.example.android.provider.ACCESS" android:protectionLevel="signature"/> 
```

并在两个应用程序中添加：

```
<uses-permission android:name="com.example.android.provider.ACCESS" /> 
```

通过使用 protectionLevel="signature"，只有您签名的应用程序才能访问您的内容提供商，从而访问您的文件。

# facebook - 用于阅读推荐的 Facebook Graph Api

> ID：11241286
> 
> 赞同：2
> 
> 时间：2012-06-28T09:02:59.940
> 
> 标签：facebook, facebook-graph-api, fb-graph

虽然我可以使用 fbgraph api 访问多个数据，但我找不到读取“推荐”数据的方法。

例如：对于facebook页面 www.facebook.com/cozycaterers ，其推荐内容出现在封面照片下方的右侧。

有人可以帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:52:52.267

不要认为这是目前可能的。

我已经检查了 FQL 和 Graph API 的文档，但没有运气......

希望facebook迟早会允许访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T10:16:23.000

[我用FQL Explorer](https://developers.facebook.com/tools/explorer)尝试了这个查询：

```
SELECT review_id, rating, message, reviewer_id FROM review where reviewee_id='492378670299' 
```

它返回了结果，但没有我预期的那么多。

如果有人有更好的答案，我很高兴知道......

# visual-studio-2010 - 解决方案资源管理器中的 csproj 文件

> ID：11241288
> 
> 赞同：1
> 
> 时间：2012-06-28T09:03:13.220
> 
> 标签：visual-studio-2010

可以在解决方案资源管理器中设置 *.csproj 文件吗？
现在我在项目中的文件上使用选项“打开包含文件夹”并搜索 *.csproj。我如何在 SE 中显示它？
我使用 Visual Studio 2010 高级版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:13:24.393

您的 *.csproj*是*显示在解决方案根目录下方的项目图标。您编辑 .csproj 右键单击​​解决方案资源管理器中的项目图标并选择属性。你还想要什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:49:28.957

您需要从解决方案中卸载项目。之后，您可以右键单击并选择编辑。应该有一个扩展来做这个。试试 PowerCommands。我相信它添加了方便的按钮“编辑项目”。

# php - 在具有 777 权限的目录中查找所有 .php 文件

> ID：11241289
> 
> 赞同：2
> 
> 时间：2012-06-28T09:03:15.107
> 
> 标签：php, linux, permissions, chmod, 777

我最近有一个 linux 服务器因 bot 上传 .php 脚本和冒充图像而受到损害。我目前正在解决这个问题。

因为我的服务器有很多网站，所以我正在寻找一个 linux 命令来扫描服务器上的所有 777 目录并显示其中包含 .php 文件的目录。

您可以使用以下命令返回所有 777 目录，但这不是

`find httpdocs/ -type d -perm 777`

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T09:06:38.170

尝试这样的事情：

```
find httpdocs/ -type d -perm 777 -exec find {} -name "*.php" \; 
```

这将向您显示具有 777 权限的目录中的所有 .php 文件。可能并不理想，但会让你开始。

# spring - org.springframework.web.servlet.DispatcherServlet noHandlerFound（未找到映射）

> ID：11241292
> 
> 赞同：3
> 
> 时间：2012-06-28T09:03:22.373
> 
> 标签：spring, jsp, spring-mvc

我的 jsps 在 WEB-INF/jsp/ 下，下面是我的 web.xml：

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
  <display-name>Checkout</display-name>

  <servlet>
    <servlet-name>myservlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>myservlet</servlet-name>
    <url-pattern>*.action</url-pattern>
  </servlet-mapping>

</web-app> 
```

这是我试图访问的页面 product.jsp 的映射：

```
@Controller
@RequestMapping("/product.action")
public class ProductController {

    /**
     * Show the product selection form
     * 
     * @return
     */
    @RequestMapping(method=RequestMethod.GET)
    public String get() {
        return "products.jsp";
    }

} 
```

尝试从以下链接访问页面时：

```
http://localhost:8080/myapp/product.action 
```

我进入`404`浏览器，并在控制台中收到以下警告：

```
Jun 28, 2012 10:55:23 AM org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/myapp/product.action] in DispatcherServlet with name 'myservlet' 
```

我在配置中遗漏了什么吗？请指教，谢谢。

**编辑**：我尝试将 viewResolver bean 添加到 applicationContext 没有运气：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="com.myapp"/>

    <bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/"/>
    <property name="suffix" value=".jsp"/>
   </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-10T14:54:31.260

遵循**Sunil**提到的任何规则。我在你的 spring 配置 xml 中看到一个你没有的问题

```
<mvc:annotation-driven /> 
```

你需要这个来`Controller`注册

`<context:component-scan base-package="com.myapp"/>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:56:30.923

指定 RequestMapping 时，URI 不应有扩展名。Dispatcher servlet 将在搜索 URI 映射时从请求 URI 中省略它。

使用`@RequestMapping("/product")` 它应该可以工作。

使用视图解析器时的第二件事只是返回 JSP 文件的名称。不要附加 .jsp 扩展名，InternalViewResolver 会为您完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:53:48.960

问题是没有检测到控制器。我将 base-package 从 更改`com.myapp`为`com.myapp.controller`，现在可以正常工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T09:31:37.183

使用这个 **class="org.springframework.web.servlet.view.UrlBasedViewResolver"** 而不是 **class="org.springframework.web.servlet.view.InternalResourceViewResolver"**

在您的应用程序上下文 bean 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-22T09:48:19.077

如果您在上下文 xml 中使用 viewResolver，则应将 get 方法返回状态更改为“产品”并确保文件夹层次结构正确

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-13T15:43:06.460

1.  将此更改`<url-pattern>*.action</url-pattern>`为`<url-pattern>/*.action</url-pattern>`

2.  学习其他教程时检查 .xml 文件中的基本包名称

希望它应该工作正常

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-18T17:21:11.707

**这个错误的解决方法：** org.springframework.web.servlet.DispatcherServlet noHandlerFound (No mapping found)

只需按照以下步骤操作：

右键单击项目>构建路径>配置构建路径>部署程序集>添加（右侧）>文件夹>添加您的视图文件夹>应用并关闭

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-09-18T06:10:49.473

检查包名 spring-servlet.xml 是否拼写正确。这可能是问题所在。我在启动 Spring MVC 时遇到了

# javascript - 更新可排序的“项目”选项

> ID：11241294
> 
> 赞同：0
> 
> 时间：2012-06-28T09:03:34.243
> 
> 标签：javascript, jquery, jquery-ui-sortable

我使用如下可排序：

```
 $('.column').sortable({
        connectWith: "#column1",
        revert: 100,
        items: ".myItems:not(.excluded)",
}).disableSelection(); 
```

是否可以即时更新`items:`回调？

因此，如果发生特定情况，`items:`则变为 items:`.myItems`而不是`.myItems:not(.excluded)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:13:34.420

您可以通过再次调用 sortable() 来设置新选项：

```
$('.column').sortable('option', 'items', '.myItems') 
```

[http://docs.jquery.com/UI/Sortable#method-option](http://docs.jquery.com/UI/Sortable#method-option)

# android - 停止应用程序后，IntentService 将被终止

> ID：11241302
> 
> 赞同：16
> 
> 时间：2012-06-28T09:04:23.483
> 
> 标签：android

我指的是[android设计注意事项：AsyncTask vs Service (IntentService?)](https://stackoverflow.com/questions/3817272/android-design-considerations-asynctask-vs-service-intentservice)

根据讨论，***AsyncTask 不适合，因为它与您的 Activity 紧密“绑定”***

因此，我启动了一个`Thread`（我假设 AsyncTask 和 Thread 属于同一类别），其中有一个无限运行循环并进行了以下测试。

*   我**退出**了我的应用程序，按住返回软键，直到我看到主屏幕。线程仍在运行。
*   我通过转到***Manage apps -> App -> Force stop*****来杀死**我的应用程序。线程已停止。

 *所以，我希望在我从 更改`Thread`为之后，即使我**退出**或**杀死**我的应用程序`Service`，我也会保持活力。`Service`

 ***** * *

```
Intent intent = new Intent(this, SyncWithCloudService.class);
startService(intent); 
```

* * *

```
public class SyncWithCloudService extends IntentService {
    public SyncWithCloudService() {
        super("SyncWithCloudService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        int i = 0;
        while (true) {
            Log.i("CHEOK", "Service i is " + (i++));
            try {
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
                Log.i("CHEOK", "", ex);
            }
        }
    }
} 
```

* * *

```
 // Doesn't matter whether I use "android:process" or not.
    <service 
        android:name="com.xxx.xml.SyncWithCloudService" 
        android:process=".my_process" >
    </service> 
```

* * *

然而，我的发现是，

*   我**退出**了我的应用程序，按住返回软键，直到我看到主屏幕。服务仍在运行。
*   我通过转到***Manage apps -> App -> Force stop*****来杀死**我的应用程序。服务已停止。

 *似乎 和 的行为`Service`是`Thread`相同的。那么，为什么我应该使用`Service`而不是`Thread`？有什么我错过的吗？我以为我的`Service`假设会继续运行，即使我杀死了我的应用程序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T09:29:01.633

没有。当您终止应用程序时，服务将停止运行。当你杀死你的应用程序时，它的所有组件都会被杀死（活动、服务等）。

一般来说，Thread 和 Service 的行为是相似的。但是，如果您从 Activity 启动 Thread 然后关闭 Activity（即：退出您的应用程序），最终 Android 会注意到您的进程中没有活动组件（因为 Android 不会将您的 Thread 识别为活动组件）它只会杀死你的进程，从而杀死线程。

但是，如果您有一个服务正在运行，那么 Android 会注意到您有一个正在运行的服务并且不会那么轻易地终止它。但是，如果它不是“正在使用”，Android 仍然有可能会终止您的服务进程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-14T07:20:46.217

实际上，您可以实现不同种类的服务。使用 a`Service`而不是`IntentService`. 您需要查看`START_STICKY`，即使您的活动终止，您也可以让您的服务在后台运行`START_NOT_STICKY`。[安卓服务](http://developer.android.com/guide/components/services.html)`START_REDELIVER_INTENT`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T09:25:41.117

您正在使用`startService()`. 将`Service`一直运行，直到它的代码完成，或者直到 Android 决定它应该被杀死。查找[绑定服务](http://developer.android.com/guide/components/bound-services.html)。你`Activity.onDestroy()`应该打电话给你`unbindService()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-26T18:32:45.123

在您的 IntentService 中，您可以覆盖 onStartCommand() 返回 START_REDELIVER_INTENT

然后，如果被杀死，您的服务将在一段时间后以相同的 Intent 由系统自动重新启动。

请务必像这样在 onStartCommand() 上调用超级实现：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(intent,flags,startId);
    return START_REDELIVER_INTENT;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-15T10:03:38.747

您可以在的构造函数中调用[setIntentRedelivery(true)](https://developer.android.com/reference/android/app/IntentService.html#setIntentRedelivery(boolean))`IntentService`******

# macos - 自动化简单的终端命令

> ID：11241303
> 
> 赞同：0
> 
> 时间：2012-06-28T09:04:23.897
> 
> 标签：macos, shell, automator

因此，对于所有有才华的人来说，这是一个简单的方法。:) 我想做的是创建一个 Automator 应用程序，当您在其上放置一个 .command 文件时，它会执行以下简单的终端命令，其文件名以“abc-123”开头，重要的是它会抛出错误，如果不满足这些条件并且不会尝试运行脚本。

```
chmod 777 file.command
./file.command 
```

而已！我在这方面没有太多经验，并且已经尝试用谷歌的方式回答 2 个小时，我想我只是问一下，因为它可能很简单......我希望。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:44:45.950

像这样在 bash shell 中：

```
for f in "$@"
do
    name=${f##*/}; 
    if [[ "$name" = abc-123*.command ]];then
        chmod 777 "$f"
        "$f"
    else
        exit 1;
    fi
done 
```

# php - 贝宝自定义金额变量BMUpdate？

> ID：11241304
> 
> 赞同：1
> 
> 时间：2012-06-28T09:04:25.290
> 
> 标签：php, paypal, sandbox

这是我的沙盒立即购买按钮生成的代码。我添加了另一个隐藏输入`amount`，它将包含一个变量，其中包含要发送到贝宝的总金额（我的网站上没有设定价格）。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" id="paypal-container-2" method="post">
            <input type="hidden" name="cmd" value="_s-xclick">
            <input type="hidden" name="hosted_button_id" value="EJWG97W7YUN4G">
            <input type="hidden" name="amount" value="<?php echo $total; ?>" />
            <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
            <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
            </form> 
```

通过阅读类似的问题[can't POST item price in paypal sandbox](https://stackoverflow.com/questions/9438868/cant-post-item-price-in-paypal-sandbox)，这种方式使隐藏的输入`amount`对用户开放？答案是使用 BMUpdateButton API 来更新按钮数量。我不知道如何在 PHP 中实现 BMUpdateButton API。我如何用 PHP 完成这个？有教程吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:20:16.213

这是基础知识，哈哈，还需要其他功能解码

```
function updateItemPP($buttoncode, $amount, $item_name)

{

$API_USERNAME ="yourname";

$API_PASSWORD = "yourpassY";

$API_SIGNATURE = "yoursig";

$API_ENDPOINT = 'https://api-3t.paypal.com/nvp';

$VERSION = '60.0';

$ch=curl_init();

curl_setopt($ch, CURLOPT_URL,$API_ENDPOINT);

curl_setopt($ch, CURLOPT_VERBOSE, 1);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);

curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);

curl_setopt($ch, CURLOPT_POST, 1);

$nvpreq="USER=".urlencode($API_USERNAME)."&PWD=".urlencode($API_PASSWORD)."&SIGNATURE=".urlencode($API_SIGNATURE)."&VERSION=".urlencode($VERSION)."&METHOD=BMCreateButton&HOSTEDBUTTONID=".urlencode($buttoncode)."&BUTTONTYPE=BUYNOW&L_BUTTONVAR1=amount=".urlencode($amount)."&L_BUTTONVAR2=item_name=".urlencode($item_name);

echo "here is the request string:\n".$nvpreq;

curl_setopt($ch,CURLOPT_POSTFIELDS,$nvpreq);

$response = curl_exec($ch);

$response = urldecode($response);

echo "this is update response".$response;

$nvpResArray=$this->deformat($response);

$ack = ($nvpResArray["ACK"]);

$HostedButtonID=($nvpResArray["HOSTED_BUTTON_ID"]);

if ($ack=="FAILOR")

return "failor";

else 

return $HostedButtonID;

} 
```

这个函数不是我写的，而是另一个用户写的

```
static function deformat( $str )
    {
        $result = array();

        while ( strlen( $str ) ) {
            // postion of key

            $keyPos = strpos( $str, '=' );

            // position of value
            $valPos = strpos( $str, '&' ) ? strpos( $str, '&' ): strlen( $str );

            /*getting the Key and Value values and storing in a Associative Array*/
            $key = substr( $str, 0, $keyPos );
            $val = substr( $str, $keyPos + 1, $valPos - $keyPos - 1 );

            //decoding the respose
            $result[ strtoupper( urldecode( $key ) ) ] = urldecode( $val );
            $str = substr( $str, $valPos + 1, strlen( $str ) );
            //echo  substr( $str, $valPos + 1, strlen( $str ) );
        }

        return $result;
    } 
```

这应该会有所帮助，但它也会返回一个新的按钮代码，因此请务必将其包含在页面上的按钮调用中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:46:25.347

以这种方式将付款金额作为输入（即使作为隐藏字段）是不安全的，并且可能导致黑客支付 0.1 英镑购买一件本应花费 +100 英镑的物品......并全额收到货物！

我防止这种情况的方法是将您的“立即购买”付款按钮发布到处理页面。当用户同意购买商品时，应计算总数并将其存储在链接到唯一标识符的数据库中。处理页面将使用标识符从数据库中提取总金额并使用该值进行支付。验证付款数据（例如 business_email 和金额）后，用户将被重定向到 PayPal 以完成付款 - 使用未触及的金额进行支付。

我希望这有帮助！

# javascript - 一起定义多个数组

> ID：11241305
> 
> 赞同：0
> 
> 时间：2012-06-28T09:04:27.650
> 
> 标签：javascript, arrays

我想在 Javascript 中定义以下内容：

```
var tileXml = new Array();
var tileTextAttribute = new Array();
var tileImageAttribute = new Array();
var tileNotification = new Array(); 
```

作为：

```
 var tileXml,tileTextAttribute,tileImageAttribute,tileNotification = new Array(); 
```

我应该是对的。由于某种原因，它在第二种情况下失败了，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:09:21.453

不，你不能那样做，而是这样做

```
var tileXml = [],tileTextAttribute = [],tileImageAttribute = [],tileNotification = []; 
```

# c# - 在不刷新会话的情况下使用 ASP.Net Timer

> ID：11241307
> 
> 赞同：1
> 
> 时间：2012-06-28T09:04:39.663
> 
> 标签：c#, asp.net, .net, ajax

我有一个网页，我希望输入的数据自动保存。为此，我使用 ASP.NET 计时器。但我的问题是我仍然希望我的会话由于不活动而超时，所以我可以让计时器调用滴答声而不刷新会话时间吗？

这是代码，抱歉，我还不能上传图片：=

```
<form runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<asp:Timer ID="SaveTimer" runat="server" Interval="150000"
    ontick="SaveTimer_Tick">
</asp:Timer>
<asp:UpdatePanel runat="server"  updatemode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger controlid="SaveTimer"
            eventname="Tick"  />
    </Triggers>
    <ContentTemplate>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:38:06.323

我认为您想要的是只要用户在该页面上工作，就可以保持会话处于活动状态。当您不触发自动保存选项时，如果没有更改，您将不会返回服务器，因此不会更新会话。在这种情况下，当用户停止在该页面上工作时，会话最终会超时。

同样，只有在实际需要保存更改时才回调服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:24:16.673

不，asp.net 无法检测到您的用户处于非活动状态。只要您的浏览器发出请求，服务器用户就处于活动状态。

您必须使用 javascript 自己跟踪不活动，并在用户不活动 10 分钟时发布到注销 url。

您可以检测用户是否处于活动状态，我的跟踪模糊输入、按钮单击和鼠标活动。设置一个 javascript 变量以指示用户实际上在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:24:21.713

要做到这一点，在不影响会话的情况下进行自动保存，唯一的方法是使用具有 的页面`EnableSessionState="false"`或没有会话的处理程序来执行此操作。

在这种情况下，您必须传递一些从 url 编码的参数，以便处理程序（或没有会话的页面）知道将数据保存在数据库中的哪个位置（而不是在会话中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T09:26:27.263

我通过这样做做了类似的事情：

```
Response.Cookies.Remove(FormsAuthentication.FormsCookieName); 
```

它并不能完全阻止会话超时，但是如果不在客户端更新 cookie，它最终会忘记它正在使用哪个会话。现在，如果您不使用表单身份验证，我想您将不得不删除其他一些 cookie。

# php - MAGENTO：如果产品属于 A 类或 B 类或 C 类，则执行此操作

> ID：11241309
> 
> 赞同：1
> 
> 时间：2012-06-28T09:04:48.427
> 
> 标签：php, zend-framework, magento, if-statement, magento-1.6

我正在使用magento 1.6。当当前显示的产品属于特定类别时，我正在尝试在产品页面视图上显示图片。如果产品属于 A 类、B 类或 C 类……则回显图像。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:46:30.213

您的问题的措辞使我认为即使在查看不在您列表中的类别中的产品时，您也需要显示此图像。`catalog/product`使用该模型有几个可用的选项。我认为最理想的是`getAvailableInCategories()`，所以：

```
$yourCatIds = array(1,2,3...);
$productCats = $_product->getAvailableInCategories();

if (count(array_intersect($yourCatIds,$productCats))) {
    //show the image
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:37:00.973

这样的事情应该这样做：

```
$currentCategory = Mage::registry('current_category');
$curID = $currentCategory->getId();
$showOn = array(4, 12, 88, 99); // array of category ids to show image on

foreach($showOn as $show){
    if($show == $curId){
        echo '<img src="yourimage" alt="" />';
    }
} 
```

未经测试，但应该可以工作。

# html - Sharepoint Branding：页面布局和 MP 的 Sharepoint 特定属性

> ID：11241312
> 
> 赞同：0
> 
> 时间：2012-06-28T09:04:53.123
> 
> 标签：html, css, sharepoint

我无法找到一个 url/文档或一本书，它广泛地描述了我们可以在页面布局和母版页 ( **Sharepoint 2010** ) 中使用的所有标签和属性，以更改 HTML 的呈现方式。例如：我知道有一个属性可以将开箱即用的左侧导航从表格更改为无序列表。

我正在做前端开发，我希望尽可能多地控制我的 html（当然还有 css）。

另一件事是例如从 Web 部件区域和 Web 部件中删除表格。同样，是否有这样做的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:57:06.297

要删除 Web 部件区域和 Web 部件周围的表格，您需要使用 Web 部件区域类的控制适配器。有一个可用。搜索 AKS_WebPartZone_Adapter

我们对我们的 MOSS 2007 站点进行了修改。我们必须进行额外的更改以支持 SP 2010/

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T13:27:03.887

也许不是这个问题的正确论坛，但根据您的问题，我猜您刚刚开始使用 SharePoint 品牌。我建议您从 Kathy Hughes 所著的 Microsoft SharePoint Designer Unleashed 之类的书开始 - 它很好地概述了您可以为网站打造品牌的各种事情。即使它是为 SharePoint 设计器编写的，您也绝对可以从 Visual Studio 进行品牌塑造。

要开始使用，请查看内容查询 Web 部件 - 我们使用此 Web 部件创建了自己的自定义“快速链接”视图。

# c++ - 允许“？”转义的理由是什么？

> ID：11241313
> 
> 赞同：14
> 
> 时间：2012-06-28T09:05:01.690
> 
> 标签：c++, language-design, language-lawyer

从**2.13.2/3**

> 双引号`"`和问号`?`可以表示为它们本身，也可以表示为转义序列`\"`和`\?`[...]。

简单地说，如下：

```
char x = '\?'; //or '\"'
char y = '?';  //or '"' 
```

代表同一个字符。为什么要区别对待这两个（尤其是`?`）与其他字符？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-28T09:07:49.440

`\"`提供单引号字符文字和双引号字符串文字之间的一致性（它们被定义为使用相同的转义序列，因此`\'`可以`\"`在两者中使用）。我有点猜测，但我认为委员会只是认为在每个中定义不同的转义序列太麻烦了，没有任何好处，而且可以说是轻微的损害。

`\?`是为了避免三字母：`??=`是三字母，`?\?=`不是。

# mysql - MySQL 行到列

> ID：11241314
> 
> 赞同：9
> 
> 时间：2012-06-28T09:05:02.433
> 
> 标签：mysql, row

任何人都可以帮助我如何使用源表上的行数据作为输出的标题来创建查询输出。请参阅下面的说明。

例如

行数据：

```
+-----------+----------+
| colHeader | value    |
+-----------+----------+
| Header1   | value 1  |
+-----------+----------+
| Header2   | value 2  |
+-----------+----------+
| Header3   | value 3  |
+-----------+----------+ 
```

输出：

```
+-----------+-----------+-----------+
| Header1   | header2   | Header3   |
+-----------+-----------+-----------+
| Value 1   | value 2   | Value 3   |
+-----------+-----------+-----------+ 
```

可能吗？？

这是我的 MySQL 脚本。我不认为这是正确的方法。对我如何获得上述输出有任何想法吗？

```
SELECT t1.value AS `Header1`,
       t2.value AS `Header2`,
       t3.value AS `Header3`
  FROM (SELECT * FROM table1 WHERE colHeader='Header1') t1
  JOIN (SELECT * FROM table1 WHERE colHeader='Header2'3) t2
  JOIN (SELECT * FROM table1 WHERE colHeader='Header3') t3; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T09:47:22.233

这个怎么样？？

```
SELECT  
  GROUP_CONCAT(if(colHeader = 'Header 1', value, NULL)) AS 'Header 1', 
  GROUP_CONCAT(if(colHeader = 'Header 2', value, NULL)) AS 'Header 2', 
  GROUP_CONCAT(if(colHeader = 'Header 3', value, NULL)) AS 'Header 3' 
FROM myTable; 
```

## [演示](http://sqlfiddle.com/#!2/dc9b5/1)

注意，当 ids 的数据较多时，您需要`GROUP BY`声明如下**Demo 2**所示。

## [演示 2](http://sqlfiddle.com/#!2/6be48/1)

# android - 仅在将字母字符串放入编辑文本时强制关闭

> ID：11241317
> 
> 赞同：0
> 
> 时间：2012-06-28T09:05:14.543
> 
> 标签：android, android-edittext

所以，如果数据库中是否存在 id，我会进行检查，id 是数字字符串，但数据库中的类型是 char(6)。

所以这是我的代码

```
public class input extends Activity{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.input);

        final EditText edittext = (EditText)findViewById(R.id.editText1);
        Button button = (Button)findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                String nopel = edittext.getText().toString();               

                if(nopel.length() == 0){
                    Toast.makeText(getApplicationContext(), "error", Toast.LENGTH_SHORT).show();
                }else{
                    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
                    pairs.add(new BasicNameValuePair("nopel", nopel));

                    JSON json_dp = new JSON();
                    JSONObject jobj_dp = json_dp.getJSON("http://10.0.2.2/KP/pdam/nopel.php", pairs);

                    try {
                        if(jobj_dp.getInt("row") == 0){
                            Toast.makeText(getApplicationContext(), "error", Toast.LENGTH_SHORT).show();
                        }else{
                            String snopel = jobj_dp.getString("nopel");
                            String snama = jobj_dp.getString("nama");
                            String salamat = jobj_dp.getString("alamat");
                            String sgolongan = jobj_dp.getString("golongan");

                            Intent i = new Intent(input.this, list.class);
                            i.putExtra("nopel", snopel);
                            i.putExtra("nama", snama);
                            i.putExtra("alamat", salamat);
                            i.putExtra("golongan", sgolongan);
                            startActivity(i);
                        }
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }                   
                }
            }           
        });
    }
} 
```

第一个检查是检查输入是否为空，它现在是正确的，第二个检查是检查数据库中是否有一个 id，这就是问题所在。当我尝试一些像“0001”或“02013”​​这样的数值ID时，它很好，并且可以运行。但是当我刚要放“abushd”时，它就被迫关闭了。有谁知道我为什么得到这个？

这是 list.class

```
public class list extends Activity{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list);

        Intent i = getIntent();
        String nopel = i.getStringExtra("nopel");
        String nama = i.getStringExtra("nama");
        String alamat = i.getStringExtra("alamat");
        String golongan = i.getStringExtra("golongan");

        TextView t1 = (TextView)findViewById(R.id.textView1);
        TextView t2= (TextView)findViewById(R.id.textView2);
        TextView t3 = (TextView)findViewById(R.id.textView3);
        TextView t4 = (TextView)findViewById(R.id.textView4);

        t1.setText(nopel);
        t2.setText(nama);
        t3.setText(alamat);
        t4.setText(golongan);
    }
} 
```

这就是 logcat 上的内容

```
06-28 16:14:18.244: W/KeyCharacterMap(253): No keyboard for id 0
06-28 16:14:18.254: W/KeyCharacterMap(253): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-28 16:14:22.394: D/AndroidRuntime(253): Shutting down VM
06-28 16:14:22.404: W/dalvikvm(253): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-28 16:14:22.404: E/AndroidRuntime(253): Uncaught handler: thread main exiting due to uncaught exception
06-28 16:14:22.414: E/AndroidRuntime(253): java.lang.NullPointerException
06-28 16:14:22.414: E/AndroidRuntime(253):  at pdam.tirta.raharja.input$1.onClick(input.java:47)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.view.View.performClick(View.java:2364)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.view.View.onTouchEvent(View.java:4179)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.view.View.dispatchTouchEvent(View.java:3709)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
06-28 16:14:22.414: E/AndroidRuntime(253):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
06-28 16:14:22.414: E/AndroidRuntime(253):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
06-28 16:14:22.414: E/AndroidRuntime(253):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.os.Looper.loop(Looper.java:123)
06-28 16:14:22.414: E/AndroidRuntime(253):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-28 16:14:22.414: E/AndroidRuntime(253):  at java.lang.reflect.Method.invokeNative(Native Method)
06-28 16:14:22.414: E/AndroidRuntime(253):  at java.lang.reflect.Method.invoke(Method.java:521)
06-28 16:14:22.414: E/AndroidRuntime(253):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-28 16:14:22.414: E/AndroidRuntime(253):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-28 16:14:22.414: E/AndroidRuntime(253):  at dalvik.system.NativeStart.main(Native Method)
06-28 16:14:22.424: I/dalvikvm(253): threadid=7: reacting to signal 3
06-28 16:14:22.424: E/dalvikvm(253): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:14:38.610

你正在使用`jobj_dp.getInt("row")`. 当然，如果“row”中包含的值不是整数，它会崩溃。

改为使用`getString()`。

# centos - 我可以 ping 我的 centOS 虚拟机，但我无法访问它的共享文件夹

> ID：11241318
> 
> 赞同：0
> 
> 时间：2012-06-28T09:05:15.183
> 
> 标签：centos, virtual-machine, virtualization, virtualbox, samba

所以这是设置：

我安装了 Windows XP、VirtualBox 和 centOS 6.2 虚拟机。我安装了 Samba，目前，我的 VM 和主机 Windows 在同一个子网中。我可以从 Windows ping 我的虚拟机，反之亦然。我通过 Samba 创建了一个共享文件夹，如下所示：

```
[Share]
   path = /home/share
   writable = yes
   guest ok = yes
   guest only = yes
   create mode = 0777
   directory mode = 0777
   share modes = yes 
```

*我*[在这里](http://www.server-world.info/en/note?os=CentOS_6&p=samba&f=1)**遵循了完整的教程*

我现在的问题是，当我尝试从 Windows“运行”访问这样的文件夹时，Windows找不到。

PS 我已经关闭了我的 Windows 防火墙（虽然趋势科技个人防火墙仍然打开）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:43:13.410

找到了解决方案，我更改了 iptables 和 smb.conf 以允许我的主机 IP 地址访问我的访客。不管怎么说，还是要谢谢你 ：）

# c# - 使用 c# 将值分配给 Datatable 中的特定列

> ID：11241320
> 
> 赞同：4
> 
> 时间：2012-06-28T09:05:24.870
> 
> 标签：c#

我创建了一个数据表并向其中添加了许多列。

当数据表为空时，我想为特定列分配一个值。

就像在数据表中找到列名并为其赋值......有可能吗？谢谢

```
 dt_FAQ.Columns.Add("FQ_Question_1", typeof(string));
        dt_FAQ.Columns.Add("FQ_Answer_1", typeof(string));
        dt_FAQ.Columns.Add("FQ_Question_2", typeof(string));
        dt_FAQ.Columns.Add("FQ_Answer_2", typeof(string));
        dt_FAQ.Columns.Add("FQ_Question_3", typeof(string));
        dt_FAQ.Columns.Add("FQ_Answer_3", typeof(string));
        dt_FAQ.Columns.Add("FQ_Question_4", typeof(string));
        dt_FAQ.Columns.Add("FQ_Answer_4", typeof(string));
        dt_FAQ.Columns.Add("FQ_Question_5", typeof(string));
        dt_FAQ.Columns.Add("FQ_Answer_5", typeof(string)); 
```

有一种情况，我只会得到必须分配给上述数据表中“FQ_Answer_1”列的值。在这种情况下，我想单独为该列分配值并将空字符串“”传递给其他列。可能的 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T09:16:49.577

如果您现有的数据表内部包含数据，则必须遍历数据表行并为每一列设置值

```
foreach(DataRow dr in dt_FAQ.Rows)
{
     dr["FQ_Answer_1"] = "your value";
     dr["FQ_Question_1"] = string.Empty;
     dr["FQ_Question_2"] = string.Empty;
     //.... for all the columns
} 
```

要查找特定列，您可以执行以下操作：

```
 DataColumn dc = dt.Columns.Cast<DataColumn>().Where(r => r.ColumnName == "yourname").FirstOrDefault();
   //Or simpler 
    DataColumn dc2 = dt.Columns["yourcol"]; 
```

编辑：对于新行：

```
DataRow dr = dt_FAQ.NewRow();
dr["FQ_Answer_1"] = "some value";
dt_FAQ.Rows.Add(dr); 
```

这将为 column 创建一个带有“某个值”的新行`FQ_Answer1`，所有其他剩余的列都将具有`string.Empty`默认值。

您可以检查其他列，例如：

```
string test = dt_FAQ.Rows[0]["FQ_Question_1"].ToString(); 
```

这里 test 将包含一个空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:08:30.350

怎么样

```
 DataRow dr = mydatatable.NewRow();

 dr[0] = 1;                // Assuming that first column is int type
 dr[0] = "someothervalue"; //Assuming that second column is string type
 ..
 ..
 ..
 .. // Repeat for other columns.
 mydatatable.AddRow(dr); 
```

# wordpress - 在 Wordpress 小部件中获取 wp_list_pages

> ID：11241321
> 
> 赞同：0
> 
> 时间：2012-06-28T09:05:26.243
> 
> 标签：wordpress

我正在创建自己的小部件站点地图以放入页脚。这是我的代码：

```
function widget($args, $instance)
{
extract( $args );
$title = apply_filters('widget_title', $instance['title']);
echo $before_widget;
if ( $title ) { echo $before_title . $title . $after_title; }

// WIDGET CODE GOES HERE
    // ?> THIS IS A TEST! <?php

?><ul><?php
    wp_list_pages('title_li=<h2>MAP OF THE SITE</h2>&sort_column=menu_order&depth=0&include=57,55,59,61,63,65,192'); 
?></ul><?php

echo $after_widget;     
} 
```

但看起来`wp_list_pages`没有返回任何东西。连标题都没有。事实上，如果我取消注释“这是一个测试”，那么它就会显示出来。奇怪的是，在获取菜单`wp_list_page`中也实现了相同的功能。`header.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:26:09.963

创建`Wordpress`自定义函数时的第一条规则是检查是否已经存在同名的函数。

```
<?php if (!function_exists("function_name")) {...} ?> 
```

第二条规则是用真正唯一的名称命名您的函数，以避免冲突。在您的情况下，此功能已经存在，这就是您无法按预期提取数据的原因...

还有一件事，我假设您会将整个功能代码放入主题`functions.php`文件中。

# json - 对象中的 Json 数据

> ID：11241324
> 
> 赞同：0
> 
> 时间：2012-06-28T09:05:34.857
> 
> 标签：json, opa

我想将 json 数据放在 opa 中的一个对象中。

我看到了一条评论（[在 OPA 中解析 webclient.Result 内容](https://stackoverflow.com/questions/8776647/parsing-a-webclient-result-content-in-opa)），它描述了如何做到这一点，但我尝试了这种方法，但无法使其适用于我的应用程序。

这是我的代码：

```
type service = {
  string name,
  string kind,
  string vendor 
}
contentResult = WebClient.Get.try_get(url);
match(contentResult)
    {
    case { failure : _ }: "Error, could not connect";   
    case ~{success}:
        match (Json.deserialize(success.content)){          
                case {none}: "Error the string doesn't respect json specification";
            case {some:jsast}: match (OpaSerialize.Json.unserialize_unsorted(jsast)){
                  case {none}: "The type 'result' doesn't match jsast";
                  case {some =(value:service)}: value.name;
                  }                     
            }
    } 
```

我想用 json 文件中的数据创建一个服务类型的对象。

最后一场比赛似乎是个问题，因为它显示在输出中

> “结果”类型与 jsast 不匹配

事实上，我的 json 文件中的密钥比上面的 3 个要多，这里是我的日志：

```
X Data: [
{
    "name": "redis-d80d7",
    "type": "key-value",
    "vendor": "redis",
    "version": "2.2",
    "tier": "free",
    "properties": {},
    "meta": {
        "created": 1310772000,
        "updated": 1310772000,
        "tags": [
            "redis",
            "redis-2.2",
            "key-value",
            "nosql"
        ],
        "version": 1
    }
},
JsAST: {List = [{Record = [{f1 = name; f2 = {String = redis-d80d7}}, 
{f1 = type; f2 = {String = key-value}}, {f1 = vendor; f2 = {String = redis}}, 
{f1 = version; f2 = {String = 2.2}}, {f1 = tier; f2 = {String = free}}, 
{f1 = properties; f2 = {Record = []}}, {f1 = meta; f2 = {Record = 
[{f1 = created; f2 = {Int = 1310772000}}, {f1 = updated; 
f2 = {Int = 1310772000}}, {f1 = tags; f2 = {List = [{String = redis}, 
{String = redis-2.2}, {String = key-value}, {String = nosql}]}}, 
{f1 = version; f2 = {Int = 1}}]}}]} 
```

# iphone - 谁动了我的视线？

> ID：11241329
> 
> 赞同：2
> 
> 时间：2012-06-28T09:05:58.290
> 
> 标签：iphone, ios5, storyboard

使用故事板，我创建了一个项目。

在里面`viewDidLoad`，我做了：

```
NSLog(@"%@",self.view.description); 
```

我有 ：

```
<UIView: 0x8789cb0; frame = (0 20; 320 460); autoresize = RM+BM; layer = <CALayer: 0x8789d50>> 
```

但是在另一个 XXControllerDelegate 方法中，我得到了：

```
<UIView: 0x8789cb0; frame = (0 0; 320 416); autoresize = RM+BM; layer = <CALayer: 0x8789d50>> 
```

如果我不选择，我发现了事实`Resize View From NIB` ![NIB 的上升视图](../Images/66c76390c26bd37b5d22826f6c3c2f81.png)

我总是得到： `frame = (0 0; 320 416)`

但是我找不到任何地方从NIB调整视图大小。谁移动了我的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:11:26.193

您的视图具有`RM+BM`这些锚点将能够将视图的 y 和 x 位置移动到父视图，当`viewDidLoad`被调用时从文件中`superview`获取其大小，当被调用时，视图将调整为`xib``viewWillAppear``superview`

如果您希望视图不调整大小，则应删除`RM+BM`，检查屏幕截图

去掉下图右中部红色横竖线

![在此处输入图像描述](../Images/02daecd4ae0986d0c47e49fa0a8bde25.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:11:30.233

an 的框架`UIView`是相对于它所包含的父视图的。

an 的边界`UIView`是相对于它自己的坐标系的。

所以你需要确定你在哪里添加你的视图。

# java - Maven 程序集中是否有程序集 id 属性？

> ID：11241334
> 
> 赞同：5
> 
> 时间：2012-06-28T09:06:33.257
> 
> 标签：java, maven, maven-2, maven-3, maven-assembly-plugin

我想使用程序集 id 作为组件 xml 文件中的属性，而不是跨多个程序集复制一部分。查看 maven-assembly-plugin 文档，我看不到对程序集 ID 的任何引用。如果可用，有什么想法吗？

这是我想添加到组件 xml 文件的示例。

```
<files>
    <file>
        <source>src/main/config/${assembly.id}.properties</source>
        <destName>/conf/config.properties</destName>
    </file>
</files> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:53:49.527

您可能可以为此使用 Maven 过滤：

1.  `${assembly.id}`在 POM 中定义属性
2.  将包含程序集描述符的文件夹配置为资源文件夹并在此文件夹上启用过滤
3.  在您的程序集描述符和组件描述符中使用`${assembly.id}`as`<id>`
4.  配置 maven-assembly-plugin 以使用`target`目录中的（过滤的）程序集描述符。

# javascript - swfupload 选项 button_cursor 不起作用

> ID：11241336
> 
> 赞同：0
> 
> 时间：2012-06-28T09:06:38.177
> 
> 标签：javascript, flash, swfobject

我正在使用 swfupload 插件（http://demo.swfupload.org/Documentation/）上传多个文件。我定义了以下 swfupload 设置对象。一切正常，除了光标没有变成“手”形。这是代码：

```
var initialize_swfupload_for_image = function () {

if ($('#image-attach').length == 0){
  return;
}
var url = $('#image-attach').data('url');
var params = $('#image-attach').data('params');
var buttonStyle = '.image-link {color: #FFF' +
                ';text-align: center'+
                ';} ' +
                '.image-link:hover {color: #0FF' +
                ';} ';
var settings = {
  upload_url:url,
  flash_url: "<%= asset_path('swfupload/swfupload.swf') %>",
  flash9_url: "<%= asset_path('swfupload/swfupload_fp9.swf') %>",
  http_success:[ 200, 201, 204 ],
  file_post_name:"file",
  file_types: "*.jpg; *.gif; *.png; *.jpeg",
  file_upload_limit:1,
  file_queue_limit:0,
  file_size_limit:"10 MB",
  prevent_swf_caching:false,
  custom_settings:{
    progressTarget:"divImageProgressContainer",
    cancelButtonId:"btnImageCancel"
  },
  button_placeholder_id:"image-attach",
  button_text: "<span class='image-link'>Edit Photo</span>",
  button_text_style: buttonStyle,

  button_width: 90,
  button_height: 20,
  button_cursor:SWFUpload.CURSOR.HAND,
  button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,
  button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,

  file_queued_handler:fileQueued,
  file_queue_error_handler:fileQueueError,
  file_dialog_complete_handler:fileDialogComplete,

  upload_start_handler:uploadStartImage,
  upload_error_handler:uploadError,
  upload_progress_handler:uploadProgressImage,
  upload_success_handler:uploadSuccessImage,
  upload_complete_handler:uploadCompleteImage,
  queue_complete_handler:uploadCompleteImage,

  post_params:params
};
if (FlashDetect.versionAtLeast(9)) {
  swf_image = new SWFUpload(settings);
} else {
  //intentionally left blank
  //TODO: javascript fallback when swfupload doesn't work
} 
```

任何关于为什么光标在悬停在对象上时没有改变的见解都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:38:11.253

我也遇到过同样的问题。就我而言，罪魁祸首是我不小心添加到`button_width`and`button_height`属性中的“px”：`button_width: "20px"`.

您的问题显然不是同一个问题，但可能与您向 SWFUpload 传递了无效值有关。

我复制了您的代码，在从自定义内容中清除它之后，我毫不费力地展示了手（甚至没有改变任何东西）。这是使用 swfupload.swf 2.2.0.1 和 swfupload.js 2.2.0 2009-03-25 测试的代码（请注意，swfupload.swf 和 swfupload.js 与 html 文件位于同一文件夹中）：

```
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>index</title>
    <script type="text/javascript" src="swfupload.js"></script>
    <script type="text/javascript" charset="utf-8">
    var init = function () {

    var settings = {
      upload_url:'url',
      flash_url: "swfupload.swf",
      http_success:[ 200, 201, 204 ],
      file_post_name:"file",
      file_types: "*.jpg; *.gif; *.png; *.jpeg",
      file_upload_limit:1,
      file_queue_limit:0,
      file_size_limit:"10 MB",
      prevent_swf_caching:false,
      custom_settings:{
        progressTarget:"divImageProgressContainer",
        cancelButtonId:"btnImageCancel"
      },
      button_placeholder_id:"image-attach",
      button_text: "<span class='image-link'>Edit Photo</span>",

      button_width: 90,
      button_height: 20,
      button_cursor:SWFUpload.CURSOR.HAND,
      button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,
      button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,

    };
      swf_image = new SWFUpload(settings);
  }
    </script>

</head>
<body id="index" onload="init()">
    <div style="width:100px;height:100px;background-color:blue">
    <div id="image-attach"></div>
    </div>
</body>
</html> 
```

我的猜测仍然是 SWFUpload 可能不喜欢其中一个参数（例如`<%asset`东西）。无论如何，希望这会有所帮助。

# ipv6 - getaddrinfo() 会先返回 IPv6 地址吗？

> ID：11241339
> 
> 赞同：1
> 
> 时间：2012-06-28T09:06:46.367
> 
> 标签：ipv6, getaddrinfo

我想使用 getaddrinfo() 读取所有地址（IPv4 和 IPv6）。我的问题是 getaddrinfo() 是否在列表中返回 IPv6 地址，后跟 IPv4。假设我将 AF_UNSPEC 传递给 getaddrinfo() 并使用双堆栈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:11:47.513

As already commented by Celada, RFC 3484 gives a suggested ordering for the returned results.

Specifically for GNU libc, the order can be controlled by `/etc/gai.conf` and customised as local policy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T09:50:21.727

答案在这里：

[https://www.rfc-editor.org/rfc/rfc6724](https://www.rfc-editor.org/rfc/rfc6724)

操作系统应该（并且大多数情况下）遵循这个标准或它的先前版本。在`getaddrinfo()`选择目标地址时，如果应用程序没有绑定到特定地址，内核会选择源地址。

默认情况下，全局本地 IPv6 地址优先于所有 IPv4 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T09:17:17.263

这实际上取决于名称服务器和操作系统。getaddrinfo() 从名称服务器获取 dns 解析信息。如果您的名称服务器在 IPv4 地址之前排序 IPv6 地址，它将在 IPv4 地址之前返回 IPv6 地址。

默认情况下，IPv6 地址的优先级高于 IPv4 地址。@Pavel Simerda 写道-“默认情况下，全球本地 IPv6 地址优先于所有 IPv4 地址。”

# asp.net - MVC，Entity Framework 从多个模型中选择数据

> ID：11241341
> 
> 赞同：2
> 
> 时间：2012-06-28T09:06:53.403
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, razor

在 ASP.NET MVC3 Razor 项目中，我有 2 个模型

```
public class Post
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public string Contents { get; set; }
        public int Author { get; set; }
    }

 public class Author
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Email { get; set; }
    } 
```

*`Post.Author``Author.Id`字段的字段链接*

在一个视图中，我需要显示列表

```
Post.Title
Post.Contents
Author.Name 
```

如何显示加入（来自）两个模型的信息？

***注意：**我想我需要使用 a`ViewModel`并将视图与`IEnumerable`List 绑定，但我不知道如何从两个模型中选择数据*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:10:02.747

您可以创建一个视图模型，该模型仅具有您希望在视图上显示的属性

```
public class PostViewModel
{
        public int Id { get; set; }
        public string Title { get; set; }
        public string Contents { get; set; }
        public string AuthorName { get; set; }

} 
```

您在控制器操作中使用您的数据填充此视图模型，并进行必要的连接

```
public ActionResult GetAuthorInfor()
{
   var query = //context.Post join with context.Author
               Select new  PostViewModel()
               {
                  Id = post.id,
                  Title = post.title,
                  Contents = post.contents,
                  AuthorName = author.authorname
               }
   return view(query.Single());
} 
```

并创建一个类型化的视图来渲染这个模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:38:16.977

模型**Post.cs**：

```
public class Post
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public string Contents { get; set; }
        public int AuthorID { get; set; }

        public virtual Author Author { get; set; }
    } 
```

模型**作者.cs**：

```
public class Author
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Email { get; set; }
        public virtual ICollection<Post> Posts { get; set; }
    } 
```

**DBContext**类：

```
public class SampleDB : DbContext
    {
        public DbSet<Author> Authors{ get; set; }
        public DbSet<Post> Posts{ get; set; }
    } 
```

*I.Way（使用直接视图）*

你可以像这样在 View 上使用：

```
 Samp.Models.SampleDB dbPosts = new Samp.Models.SampleDB();
 foreach (var post in dbPosts.Posts.ToList())
 {
   string post_Title = post.title;
   string post_Contents = post.Contents;
   string author_Name = post.Author.Name;
 } 
```

*二、方式（通过控制器使用）-推荐-*

你可以像这样在控制器上使用：

```
Samp.Models.SampleDB db = new Samp.Models.SampleDB();

 public ActionResult Index()
 {
   return View(db.Posts.ToList());
 } 
```

**在View**上使用它：

```
@model IEnumerable<Samp.Models.Post>

foreach (var post in Model.Posts.ToList())
     {
       string post_Title = post.title;
       string post_Contents = post.Contents;
       string author_Name = post.Author.Name;
     } 
```

# objective-c - NSOutlineView / PXSourceList：防止隐藏/显示文本重叠

> ID：11241345
> 
> 赞同：1
> 
> 时间：2012-06-28T09:07:04.187
> 
> 标签：objective-c, cocoa, sidebar, nsoutlineview, pxsourcelist

我们用[PXSourceList](https://github.com/Perspx/PXSourceList)（NSOutlineView 的子类）做了一个侧边栏。在 Lion 上，当您将鼠标悬停在群组项目上时，会有文本“显示”或“隐藏”。但不幸的是，当侧边栏尺寸太小时，此文本与我们自己的项目标题重叠。在当前的 iTunes 实现中也出现了同样的问题。

作为示例，请参见： ![自己的侧边栏](../Images/b64d5ef690682db170e9f3da1de6713e.png)

但其他 macOS 应用程序（如 Finder 或 Mail）隐藏了自己的部分文本并添加“...”以防止重叠： ![查找器侧边栏](../Images/5eec1336d794cdb2adb0c14732861926.png)

他们有什么方法可以在自己的应用程序中实现相同的结果吗？

# jqgrid - 使用右键单击上下文菜单的 JqGrid 列选择器

> ID：11241348
> 
> 赞同：1
> 
> 时间：2012-06-28T09:07:09.070
> 
> 标签：jqgrid

我想知道是否可以创建一个右键单击上下文菜单，该菜单在 jqGrid 的标题行上被激活，并且能够将列添加到右侧或左侧或有问题的列或隐藏当前列（不使用 ui-multiselect）。

在这方面的任何代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:59:33.720

我建议您使用在jqGrid`contextmenu`中可以找到的插件。`plugins/jquery.contextmenu.js`在[答案](https://stackoverflow.com/a/6608787/315935)和[这个](https://stackoverflow.com/a/8452242/315935)例子中，描述了如何在 jqGrid 主体内部使用它。使用以下代码，您也可以在列标题中使用它：

```
var cm = $grid.jqGrid("getGridParam", "colModel");
$("th.ui-th-column").contextMenu('myMenu1', {
    bindings: {
        columns: function(trigger) {
            var $th = $(trigger).closest("th");
            if ($th.length > 0) {
                alert("the header of the column '" + cm[$th[0].cellIndex].name +
                    "' was clicked");
            }
        }
    },
    // next settings
    menuStyle: {
        backgroundColor: '#fcfdfd',
        border: '1px solid #a6c9e2',
        maxWidth: '600px', // to be sure
        width: '100%' // to have good width of the menu
    },
    itemHoverStyle: {
        border: '1px solid #79b7e7',
        color: '#1d5987',
        backgroundColor: '#d0e5f5'
    }
}); 
```

其中菜单`myMenu1`定义为

```
<div class="contextMenu" id="myMenu1" style="display:none">
    <ul style="width: 200px">
        <li id="columns">
            <span class="ui-icon ui-icon-calculator" style="float:left"></span>
            <span style="font-size:11px; font-family:Verdana">Choose columns</span>
        </li>
    </ul>
</div> 
```

[该演示](http://www.ok-soft-gmbh.com/jqGrid/RightClickOnColumnHeader.htm)演示了如何使用它：

![在此处输入图像描述](../Images/a0f5baee733224524242dffc309ff792.png)

# makefile - 预处理器指令无效

> ID：11241352
> 
> 赞同：1
> 
> 时间：2012-06-28T09:07:19.983
> 
> 标签：makefile, g++, c-preprocessor, conditional-compilation, preprocessor-directive

我遇到了预处理器指令的技术困难：

```
#ifdef, #define 
```

我有一个由 Makefile 构建的程序，我有 2 个选项来构建它：独立或嵌入式。
我做了类似的事情：

```
#ifdef _mdimode_
   //code for embedded
#else
   //code for standalone (default)
#endif 
```

在我的主文件中，当我以嵌入式目的编译时，我写了一个：

```
#define _mdimode_ 
```

但是好像g++不认识也不理解。它总是在 else 中，从不编译嵌入式版本的代码。

*信息：*
GNU Make 3.82
g++ (GCC) 4.6.1 20110908 (Red Hat 4.6.1-9)
文件后缀：.C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:57:41.073

这是一个没有更多信息的猜测。我假设代码与主文件位于不同的文件中。如果是这样，则`#define`不会传播到项目的该部分。您必须将其设置在包含代码的文件中，或者在其中包含`#include`d 的标头中。

也可以选择`#define`在编译命令的选项中设置：

```
g++ -c -D_mdimode_ mycode.C 
```

# drupal - 具有追随者、团体和商业的社交网站 - drupal？

> ID：11241355
> 
> 赞同：0
> 
> 时间：2012-06-28T09:07:30.577
> 
> 标签：drupal, e-commerce, social-networking

我想创建一个社交网络风格的网站，我拥有：

*   组织（组）
*   部门（子组）
*   成员
*   产品
*   和：用户

组织、部门、成员、产品只能由管理员或邀请输入。用户可以自行注册。

*   组织有部门，部门有成员，成员可以
    进入产品
*   用户可以关注组织、部门和成员，并接收他们的活动更新
*   用户可以给会员打分
*   产品列在目录中（后来：带购物车）

对我来说，这看起来很像 drupal 7、有机组和 drupalcommerce 的任务。除了“自己动手”之外，您还有其他可以推荐的起点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:25:15.783

您可以查看此[页面](http://drupal.org/node/206724)以了解社交网络模块。对我来说，有机团体和 drupal 商业是满足您需求的不错选择。

# php - PHP strpos 在@和上检查邮件

> ID：11241357
> 
> 赞同：-2
> 
> 时间：2012-06-28T09:07:41.330
> 
> 标签：php, function, strpos

我制作了一个小的 PHP 脚本来检查电子邮件是否有效。唯一的问题是它不检查点是否在“@”后面。它接受这样的电子邮件： Hi.Hello@hotmailcom 当它应该只接受像 HiHello@hotmail.com 这样的电子邮件时

这是我的脚本：

```
<?php
$mail = $_POST['mail'];

    function checkmail($mail)
        {
            if ((strpos ($mail, '@') !== false) && (strpos ($mail, ".") !==false))
            {                   
                return true;
            }
            else
            {
                return false;
            }
        }

if(checkmail($mail))    
{
echo"Goed"; 
}   
else    
{       
echo"Fout";     
}

?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:10:08.567

不要重新发明轮子，使用`filter_var('bob@example.com', FILTER_VALIDATE_EMAIL)`，或者在你的情况下更好`filter_input(INPUT_POST, 'mail', FILTER_VALIDATE_EMAIL)`。

[http://php.net/filter_var](http://php.net/filter_var)
[http://php.net/filter_input](http://php.net/filter_input)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:19:08.640

如上述帖子所述，您可以使用`filter_var`PHP 函数，但前提是您的 PHP 版本大于**5.2.0**。如果您想要一些更通用的电子邮件验证，您还可以使用正则表达式，请参阅[此处](https://stackoverflow.com/questions/201323/how-to-use-a-regular-expression-to-validate-an-email-addresses)和[此处](http://www.regular-expressions.info/email.html)了解详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-14T12:35:25.793

```
if (
(strpos ($mail, '@') !== false) && 
(strpos ($mail, '@') == strrchr($mail, '@')) && 
(strripos($mail, ".") > strpos ($mail, '@'))
)
{return true;}

// explication:
//
// (strpos ($mail, '@') !== false) => '@' character is in the string
// (strpos ($mail, '@') == strrchr($mail, '@')) => '@' character is unique
// (strripos($mail, ".") > strpos ($mail, '@')) => last position of '.' character is      
// greater than '@' character position 
```

# vba - WBasic + SPSS，重命名值标签的脚本

> ID：11241361
> 
> 赞同：0
> 
> 时间：2012-06-28T09:07:56.807
> 
> 标签：vba, spss, basic, winwrap

在开始之前，我想指出我将这个问题标记为 VBA，因为我实际上无法为 Winwrap 创建新标签，而且有人告诉我 Winwrap 与 VBA 几乎相同。

我正在研究 SPSS V19.0，我正在尝试编写一个代码来帮助我识别和分配值标签给在指定变量（或所有变量）中没有标签的所有值。
下面的伪代码适用于它是单个变量的版本（可能由文本框输入，或者可能通过 SPSS Stats 程序中的自定义对话框发送（从给定变量名称的语法中调用 .sbs 文件）。

*这是伪代码：*

```
Sub Main(variable As String)

On Error GoTo bye

'Variable Declaration:
Dim i As Integer, intCount As Integer
Dim strValName As String, strVar As String, strCom As String
Dim varLabels As Variant 'This should be an array of all the value labels in the selected record
Dim objSpssApp As 'No idea what to put here, but I want to select the spss main window.

'Original Idea was to use two loops
'The first loop would fill an array with the value lables and use the index as the value and 
'The second loop would check to see which values already had labels and then
'Would ask the user for a value label to apply to each value that didn't.
'loop 1
'For i = 0 To -1 
'current = GetObject(variable.valuelist(i)) 'would use this to get the value
'Set varLabels(i) = current
'Next

'Loop for each number in the Value list.
strValName = InputBox("Please specify the variable.")
'Loop for each number in the Value list.
 For i = 0 To varLabels-1
 If IsEmpty (varLabels(i)) Then
 'Find value and ask for the current value label
 strVar = InputBox("Please insert Label for value "; varLabels(i);" :","Insert Value Label")
 'Apply the response to the required number
 strCom = "ADD VALUE LABELS " & strVar & Chr$(39) & intCount & Chr$(39) & Chr$(39) & strValName & Chr$(39) &" ."
 'Then the piece of code to execute the Syntax
 objSpssApp.ExecuteCommands(strCom, False)

 End If
 'intCount = intCount + 1 'increase the count so that it shows the correct number
 'it's out of the loop so that even filled value labels are counted
 'Perhaps this method would be better?
 Next

Bye:
End Sub 
```

这绝不是功能代码，它基本上只是我想要实现的过程的伪代码我只是在寻找一些帮助，如果你可以的话，那将是神奇的。

非常感谢提前
马夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:54:05.583

Winwrap 和 VBA 与您可以在这篇文章中找到的差异几乎相同：http: [//www.winwrap.com/web/basic/reference/?](http://www.winwrap.com/web/basic/reference/?p=doc_tn0143_technote.htm) p=doc_tn0143_technote.htm 我没有使用过 winwrap，但我会尝试用我从 VBA 获得的知识来回答。

*   将 varLabels 调暗为变体

您可以通过说例如 dim varLabels() as variant '动态声明数组 dim varLabels(10) 作为变量 '静态声明数组 dim varLabels(1 到 10) 作为变量 '从 1 开始的数组 - 我多使用 dim varLabels(1 to 10, 1 to 3) '多维数组

*   将 objSpssApp 调暗为 ?

“理论上”，您可以将其保留为变体类型，甚至可以这样做

```
Dim objSpssApp 
```

没有进一步的声明，这基本上是相同的 - 它会起作用，因为变体可以是任何东西并且不会产生错误。尽管根据显式数据类型声明对象是一个很好的习惯，因为变体类型在内存方面很昂贵。您实际上应该了解对象类名称，但我不能给您这个。我想你应该这样做：

```
set objSpssApp = new <Spss Window> 
set objSpssApp = nothing 'In the end to release the object 
```

*   代码：

    'loop 1
    For i = 0 To -1
    current = GetObject(variable.valuelist(i)) '会用这个来获取值
    Set varLabels(i) = current
    Next

我不完全知道您为什么要从 0 数到 -1，但也许这无关紧要。要填充数组，您可以这样做： varLabels(i) = i SET 语句用于设置对象，您无需创建对象即可创建数组。另请注意，您没有声明此处使用的一半变量。

*   代码：

    strVar = InputBox("请为值插入标签"; varLabels(i);" :","插入值标签")

请注意，连接运算符的语法是 &。这在 WinWrap 中似乎是相同的：http: [//www.winwrap.com/web/basic/language/](http://www.winwrap.com/web/basic/language/?p=doc_operators_oper.htm) ?p=doc_operators_oper.htm 但是您知道这一点，因为您在代码中使用了它。

*   代码：

    'intCount = intCount + 1 '增加计数，使其显示正确的数字
    '它不在循环中，因此即使填充的值标签也被计数
    '也许这种方法会更好？

我不确定我是否理解这个问题，但理论上所有循环在任何情况下都是有效的，这取决于您的偏好。For ... Next，Do ... Loop，While ... Wend，最后它们基本上都做同样的事情。intCount = intCount + 1 在循环中使用时似乎有效。

*   使用下一个（对于...下一个）

使用计数器时，请始终使用 Next **iCounter**，因为它会递增计数器。

我希望这个回复可能对你有用！

# javascript - 引用中的 JavaScript 解析变量

> ID：11241362
> 
> 赞同：3
> 
> 时间：2012-06-28T09:07:59.990
> 
> 标签：javascript

> **可能重复：**
> [字符串中的 JavaScript 变量没有连接 - 像 PHP](https://stackoverflow.com/questions/3304014/javascript-variable-inside-string-without-concatenation-like-php)

在 PHP 中，双引号具有读取变量的能力，例如

```
"$foo" 
```

但是在 JavaScript 中，您必须始终使用 a`+`来读取变量，以便在读取时变量不会在引号内，例如

```
var foo='bar';
alert("The name's "+foo); 
```

那么，是否有任何解决方法或方法可以做到这一点？一直使用`+`很麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:09:59.800

不，这在 JavaScript 中是不可能的。

在 JavaScript 中，变量放在单引号或双引号中时会变成字符串，无法解析。在 JavaScript**中，引号内的所有内容都被视为字符串**。

即使您编写**自定义解析器**，您也无法确定引号中的内容是真正的变量还是字符串，因为命名的变量`name`也可能出现在字符串中的某个地方，这会产生命名冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:10:11.810

不，没有解决方法，就是这样。

Javascript 不提供“字符串插值”。

我个人喜欢 Ildar Shaimordanov 的[`String.js`](http://code.google.com/p/jsxt/source/browse/trunk/js/String.js)模块，它`sprintf`为字符串对象添加了一个方法。

# objective-c - 为图像添加色调

> ID：11241363
> 
> 赞同：5
> 
> 时间：2012-06-28T09:08:00.767
> 
> 标签：objective-c, ios, uiimageview, uiimagepickercontroller

我正在创建一个应用程序，该应用程序使用`UIImagePickerController`自定义叠加层向用户展示相机，其中包括相机“视图”本身的两个网格/图案之一。

网格本身`UIImageView`是添加到叠加层中的 .png 文件，它们非常复杂，所以我真的很想避免在代码中绘制网格，即使这会给我的问题提供干净而简单的答案.

我希望能够提供各种颜色的网格。显而易见的解决方案是创建更多不同颜色的 .png 图像，但是对于每种颜色，必须有四个单独的图像（每个网格的常规图像和视网膜图像），这样很快就会增加很多资源。

我认为理想的解决方案是我只创建白色/灰色的网格，然后对其应用色调以适当地着色。

那可能吗？还是我需要寻找替代解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T08:35:19.757

感谢 Ananth 将我指向[iPhone - 你如何为图像着色？](https://stackoverflow.com/questions/1223340/iphone-how-do-you-color-an-image)

我已按照问题中的建议将此方法添加到我的代码中，并在 willc2 的答案中进行了修改：

```
-(UIImage *)colorizeImage:(UIImage *)baseImage color:(UIColor *)theColor {
    UIGraphicsBeginImageContext(baseImage.size);

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGRect area = CGRectMake(0, 0, baseImage.size.width, baseImage.size.height);

    CGContextScaleCTM(ctx, 1, -1);
    CGContextTranslateCTM(ctx, 0, -area.size.height);
    CGContextSaveGState(ctx);
    CGContextClipToMask(ctx, area, baseImage.CGImage);
    [theColor set];
    CGContextFillRect(ctx, area);
    CGContextRestoreGState(ctx);
    CGContextSetBlendMode(ctx, kCGBlendModeMultiply);
    CGContextDrawImage(ctx, area, baseImage.CGImage);
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

...而且我得到的正是我所追求的。

# css - 我如何使用纯 css 创建动态有序列表项

> ID：11241364
> 
> 赞同：2
> 
> 时间：2012-06-28T09:08:02.780
> 
> 标签：css

我想制作如下图所示的有序列表。

那么我如何用纯 CSS 制作这个有序列表.....

因为我会增加列表项框的数量，所以应该随着列表项框的增加而动态增加。

![在此处输入图像描述](../Images/3071741dd2190b9d823514ce698eb446.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T09:24:53.957

试试这个例子小提琴：http: [//jsfiddle.net/AENt7/](http://jsfiddle.net/AENt7/)

相关CSS代码

```
ul {
  counter-reset: item;
  height : auto;
  overflow : hidden;
}

li {
  float : left;
  width : 80px;
  height: 80px;
  margin: 0 0 10px 10px;
  background : #d8d8d8;
  counter-increment: item   
}

ul li:nth-child(5n + 1) {
  clear : left;
}

li:before {
  content : counter(item);
} 
```

每个块上的数字将通过为`<ul>`element 定义的计数器自动插入，并在 each 中递增`<li>`。它作为伪元素的内容插入`before`。

关于兼容性的说明： `nth-child`伪类至少需要 IE9，`before`至少需要 IE8。

基本的浮动清除适用`<ul>`于`overflow: hidden`和`height: auto`。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:27:54.117

帕拉佐先生有一个好主意。但是，由于并非所有人都可以使用 PHP，因此这里有一个纯 JavaScript 解决方案。

```
document.write("<ol>");
var i;
var endLimit = 11; //you can make this anything that makes you happy

for (i = 1; i <= endLimit; i++) {
       document.write('<li>' + i + '</li>');
}

document.write("</ol>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:25:19.450

嘿 Shailender Arora 现在您可以使用 Counter 属性并使用纯 css 执行此操作

像这样

**HTML**

```
<ul>
  <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>

</ul> 
```

**CSS**

```
li {
float:left;
background:#e6e6e6;
  width:100px;
  height:100px;
  list-style-type:none;
  margin:10px;
}

li {
counter-increment:shail;
}

li:after {
  content:counter(shail);
} 
```

**现场演示** [http://tinkerbin.com/xq0uATYn](http://tinkerbin.com/xq0uATYn)

# java - Netbeans Restfull 教程测试运行但结果不同，无法正确测试

> ID：11241370
> 
> 赞同：0
> 
> 时间：2012-06-28T09:08:18.943
> 
> 标签：java, web-services, rest, netbeans, jax-rs

我阅读了 RESTfull 服务的 nebeans 教程（[http://netbeans.org/kb/docs/websvc/rest.html](http://netbeans.org/kb/docs/websvc/rest.html)）并尝试实现它。但是当我运行测试时，我没有得到他们所说的屏幕。我发现有些人说这是 netbeans 上的错误，而有些人说这是浏览器上的错误。我在这个网站上阅读了一些相关问题，但没有得到太多帮助

![在此处输入图像描述](../Images/d74ef9062ed5fb3318ebb582ae8a34f5.png)

假设显示为前一个

但显示为以下一个....

![在此处输入图像描述](../Images/0dc20a10c08ed32fb9afccbfed9b3f74.png)

请注意，导航不会出现。我无法进一步测试它。我正在使用 netbeans 7.1 捆绑包任何人都可以帮助我。谢谢你。

ps : 该页面以读取文件的形式打开(file:///home/xxx/xxx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:51:13.550

在该链接中，您可以注意到警告

注意：对于更高版本的 Firefox，您需要在服务项目之外的另一个 Java Web 应用程序中生成测试客户端。

我在 firefox 和 chrome 中遇到了同样的错误，然后我在 IE 中尝试了 test-resbeans.html 并且如上所述它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T01:25:25.360

该教程不能以这种方式工作。当我们测试 restfull 测试时，我们需要浏览并提供 restfull 服务。然后它可以在任何浏览器上运行。（我想测试它需要一个服务）。

# jsf-2 - 如何将值注入 bean 的子属性（没有注释）？

> ID：11241376
> 
> 赞同：0
> 
> 时间：2012-06-28T09:08:39.497
> 
> 标签：jsf-2

我想问你是否可以将值注入到 bean 的子属性中。

这是我想做的，但 Eclipse IDE 抱怨：

*在父类 paq.paq.BeanA 上找不到 Bean 属性 beanB.subprop*

```
<managed-bean>
    <managed-bean-name>beanA</managed-bean-name>
    <managed-bean-class>paq.paq.BeanA</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>beanB.subprop</property-name>
            <value>Hello!</value>
        </managed-property>        
</managed-bean>

public class BeanA implements Serializable {

    public BeanB beanB = null;      

    public Skin getBeanB() {
        if (this.beanB == null) {
            this.beanB = new BeanB();
        }
        return this.beanB;
    }       

    public void setBeanB(BeanB beanB) {     
        this.beanB = beanB;
    }

}

public class BeanB implements Serializable {

    public String subprop = null;       

    public String getSubprop() {
        return this.subprop;
    }       

    public void setSubprop(String subprop) {        
        this.subprop = subprop;
    }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:17:33.847

每个嵌套 bean 也需要声明为托管 bean。您需要将其注入嵌套 bean，然后将嵌套 bean 本身注入主 bean。

```
<managed-bean>
    <managed-bean-name>beanA</managed-bean-name>
    <managed-bean-class>paq.paq.BeanA</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    <managed-property>
        <property-name>beanB</property-name>
        <value>#{beanB}</value>
    </managed-property>        
</managed-bean>
<managed-bean>
    <managed-bean-name>beanB</managed-bean-name>
    <managed-bean-class>paq.paq.BeanB</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    <managed-property>
        <property-name>subprop</property-name>
        <value>Hello!</value>
    </managed-property>        
</managed-bean> 
```

# apache - 属性 cmis:parentId 仅为文件夹定义

> ID：11241378
> 
> 赞同：4
> 
> 时间：2012-06-28T09:08:49.903
> 
> 标签：apache, repository, cmis

我正在为我的应用程序编写一个 CMIS 接口。此接口返回一个`cmis:document`对象作为对象的子`cmis:folder`对象。这是[xml 输出的一部分](http://pastebin.com/Ta6QEHLN)。

`cmis:document`对象有一个`cmis:parentId`属性。现在我想用[Apache Chemistry Workbench](http://chemistry.apache.org/java/download.html)`cmis:document`验证对象。工作台工具告诉我：

> 属性`cmis:parentId`仅为文件夹定义。

为什么文档不允许此属性？文档如何引用其父级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:07:08.533

`cmis:parentId`没有为[对象](http://docs.oasis-open.org/cmis/CMIS/v1.0/cs01/cmis-spec-v1.0.html#_Toc243905396)[定义`cmis:document`](http://docs.oasis-open.org/cmis/CMIS/v1.0/cs01/cmis-spec-v1.0.html#_Toc243905396)该属性，因为文档可以没有、一个或多个父级。

要得到一个文件[你必须打电话给`getObjectParents()`](http://docs.oasis-open.org/cmis/CMIS/v1.0/cs01/cmis-spec-v1.0.html#_Toc243905446)父母。

当然，您可以在另一个不使用保留命名空间的属性中提供父 ID `cmis:`，但这将是特定于存储库的，通用 CMIS 客户端会忽略它。

# cocoa - Cocoa 查看自动缩放内容

> ID：11241380
> 
> 赞同：1
> 
> 时间：2012-06-28T09:08:54.497
> 
> 标签：cocoa, view, scale

我正在尝试使用 Xcode 4.2 构建一个可可应用程序，但我没有设法找到如何使视图的内容在调整大小时自动缩放。我在视图中有一个图像视图，我希望它在我调整应用程序大小时重新缩放图像视图，以便它始终位于整个窗口上。触发调整大小事件时，谁能告诉我如何做到这一点，而无需自己制作？提前致谢，

斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:18:34.340

如果您使用手动布局，请使用以下内容：

![在此处输入图像描述](../Images/ec6934693f4bd869a9832b75e618ce5d.png)

如果您使用自动布局，请将图像井的边缘与窗口边缘对齐，并将内容拥抱优先级设置为低于窗口调整大小的优先级。

![在此处输入图像描述](../Images/c9e5a35b454bc19ceb4bc3e10621cfbc.png)

# asp.net - 有没有办法监视 ActiveX 控件和服务器之间的通信？

> ID：11241381
> 
> 赞同：0
> 
> 时间：2012-06-28T09:08:56.773
> 
> 标签：asp.net, internet-explorer, networking, activex

如果我理解正确的话，ActiveX 控件是一个由 IE 调用的 COM 组件。在我的情况下，ActiveX 控件正在服务器上调用一些 *.asmx 服务。

那么有没有什么工具可以监控这种通信呢？我知道 HttpWatch 可以在线监控一切，还有其他更**用户友好的**选项吗？喜欢 HttpWatch？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:35:08.117

你的意思是程序化的吗？如果没有，也许提琴手可以提供帮助： http: [//fiddler2.com/fiddler2/](http://fiddler2.com/fiddler2/)

# android - 使用 vb.net 运行 ant 版本，它将编译我的 android 应用程序

> ID：11241383
> 
> 赞同：0
> 
> 时间：2012-06-28T09:09:07.913
> 
> 标签：android, vb.net, ant

目前我正在尝试从 vb.net 项目运行“ant release”。我尝试过使用 Process.start，我尝试过使用 Shell。但不幸的是，这两个似乎都没有执行 ant 或者没有给它足够的时间来完成构建。如果我在命令提示符下运行它，它工作正常。

# asp.net-mvc - 数据注释验证

> ID：11241384
> 
> 赞同：0
> 
> 时间：2012-06-28T09:09:12.157
> 
> 标签：asp.net-mvc

我正在将服务用作视图中的模型。我在服务中有连接字符串对象。在视图中我将它绑定为

```
@Html.TextBox("IPAddress", Model != null ? Model.ConnectionString.Split(';')[0] : "", new { @id = "IPAddress", @class = "KCMSdropdownList" })

 @Html.TextBox("Port", Model != null ? Model.ConnectionString.Split(';')[1] : "", new { @id = "Port", @class = "KCMSdropdownList" }) 
```

我正在使用 DataAnnotation 验证模型。对于连接字符串，我无法验证文本框。有人可以帮忙吗？？？提前致谢。

编辑

到目前为止，我已经尝试过：

```
 [MetadataType(typeof(ConnectionStringMetadata))] 
   public partial class ConnectionString { public class ConnectionStringMetadata   {      
   [Required(ErrorMessage = "Enter ConnectionString.")] 
   public int ConnectionString; } } 
```

然后我尝试一些东西

```
 [RegularExpression("/^([0-9]{1,3}).([0-9]{1,3}).([0-9]{1,3}).([0-9]{1,3});([0-9]‌​{1,5})$/",ErrorMessag="enter IPAddress"] 
   public string ConnectionString.Split(';')[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:28:39.070

在进入视图之前，您真的应该拆分连接字符串，即您的模型应该是

```
public class ConnectionString{
    [RegularExpression("")]
    public string IPAddress {get; set;}
    public int Port {get; set;}
} 
```

这将使添加验证变得更加容易

# ruby-on-rails - 为什么 jQuery 验证插件在 Heroku 上不起作用？

> ID：11241390
> 
> 赞同：1
> 
> 时间：2012-06-28T09:09:27.683
> 
> 标签：ruby-on-rails, heroku, jquery-validate

jQuery 验证在本地工作，但不在 Heroku 上。

控制台中没有关于它的错误。我该怎么办 ？

**已编辑**

```
 den@DENYS /D/myapp (master)
     $ RAILS_ENV=production bundle exec rake assets:precompile
     c:/Ruby192/bin/ruby.exe c:/Ruby192/bin/rake assets:precompile:all RAIL
     uction RAILS_GROUPS=assets
     rake aborted!
     Access denied for user 'root'@'localhost' (using password: NO)

     Tasks: TOP => environment
     (See full trace by running task with --trace)
     rake aborted!
     Command failed with status (1): [c:/Ruby192/bin/ruby.exe c:/Ruby192/bi

     Tasks: TOP => assets:precompile
     (See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:48:53.917

在推送到 heroku 之前，您是否预编译了您的资产？

```
 RAILS_ENV=production bundle exec rake assets:precompile 
```

[您可以在此处](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar/)找到更多信息。

如果它不能解决您的问题，请`heroku logs`在您的问题中提供。

# hibernate - 对象内的 Hibernate 联结表 POJO 外键

> ID：11241403
> 
> 赞同：0
> 
> 时间：2012-06-28T09:10:04.497
> 
> 标签：hibernate, object, foreign-keys, pojo, junction-table

例如，我有 3 个表：

人：int pk_id

连接点：int fk_m_id、int fk_w_id、String some_info Object Man、Object Woman

女人：int pk_id

联结表有 Man 和 Woman 的外键作为属性，但它里面也有 Man 和 Woman 对象以及一些额外的信息，因此不需要 m_id 和 w_id 外键属性，因为 id 已经在对象内。如何删除 id 属性并只在其中包含对象并使休眠知道外键在对象内部？联结表也存在于 db 中并且有一些额外的属性（String some_info），所以不能用多对多来做......或者我可以吗？

希望这是有道理的。

# jquery - 为什么我的 jquery 帖子结果消失了？

> ID：11241407
> 
> 赞同：0
> 
> 时间：2012-06-28T09:10:12.840
> 
> 标签：jquery, post

我有一个基本表单，我想使用 ajax 提交，而不必实际重新加载页面。这是代码的要点：

```
<cfif cgi.request_method EQ "post">
    <cfdump var="#form#" />
    <cfabort />
</cfif>

<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

        <script type="text/javascript">
            $(function(){
                $('#qsSearch').click(function(){
                    $.post(
                        '<cfoutput>#cgi.script_name#</cfoutput>',
                        $('#qsUserForm').serialize(),
                        function(data){
                            $('#results').html(data);
                        }
                    );
                });
            });
        </script>
    </head>
    <body>
        <form id="qsUserForm">
            <table>
                <tr>
                    <th>First Name:</th><td><input id="qsFirstName" name="qsFirstName" type="text" /></td>
                    <th>Last Name:</th><td><input id="qsLastName" name="qsLastName" type="text" /></td>
                    <th>Username:</th><td><input id="qsUserName" name="qsUserName" type="text" /></td>
                    <th>Email:</th><td><input id="qsEmail" name="qsEmail" type="text" /></td>
                    <th>User ID:</th><td><input id="qsUserID" name="qsUserID" type="text" /></td>
                    <td><input id="qsSearch" name="qsSearch" type="submit" value="Search" /></td>
                </tr>
            </table>
        </form>
        <div id="results"></div>
    </body>
</html> 
```

表单转储应该显示在“结果”div 中。然而，事实并非如此。

在使用 Firebug 进行调试后，我注意到代码实际上*正在*正确执行，并且结果被插入到结果 div 中 - 但是，一旦发布代码退出，它就会消失。如果我在 post call 的右括号处放置一个断点，我可以在结果 div 中看到正确的结果——只要代码继续，它就会消失。

我以前经常使用这样的代码 - 这个简单的 ajax 帖子有什么问题？

（我尝试用表单提交处理程序替换搜索按钮单击处理程序，但它没有改变任何东西。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:30:35.547

显然，您的表单正在重新加载

您应该使用以下命令停止提交表单：

```
 $('#qsSearch').click(function(event) {
    event.preventDefault();
    $.post('<cfoutput>#cgi.script_name#</cfoutput>', $('#qsUserForm').serialize(), function(data) {
        $('#results').html(data);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:51:48.907

之后添加`return false;`单击处理程序，以在您执行完函数后`$.post()`停止默认`onclick`行为。

# java - MYSQL LIMIT 未按预期工作-Java

> ID：11241410
> 
> 赞同：0
> 
> 时间：2012-06-28T09:10:18.093
> 
> 标签：java, mysql, limit

尝试使用查询中的限制函数从 MYSql 数据库中获取记录时，我在 java 中遇到了这个奇怪的问题。不知道出了什么问题或做错了什么，这个查询让我很难过。

问题 - 当我通过我的 java 程序运行此查询时，它会返回所有记录，而不是将记录限制为 10，如限制中给出的那样。

在 MYSql 命令行中运行相同的查询时，它执行得非常好并且只获取了 10 个记录。

下面是java代码和查询。任何帮助或支持表示赞赏。！

Java 代码 -

```
public UserVO getApplUserDetailsList(UserVO userVO) throws CAPDAOException {

     List<UserVO> returnList = null;
     String methodName = "getApplUserDetails()";
     Session session = null;
     String queryString = null;
     Transaction transaction = null;
     PreparedStatement ps = null;
     ResultSet rs = null;

     if(userVO == null)
     {
         logger.writeToTivoliAlertLog(className, CAPConstants.ERROR, methodName, null, "userVO returned null. Busines validation error.!", null);
         throw new CAPDAOException("userVO returned null. Busines validation error.!",CAPException.BUSINESS_VALIDATION_ERROR_SECURITY);
     }

      try {

         returnList = new ArrayList<UserVO>();

         System.out.println("");
         String appusr = userVO.getAppUsrNm(); 
         session = getSession();
         transaction = session.beginTransaction();

          if(userVO.getAppUsrRoleCd()!=null && !userVO.getAppUsrRoleCd().trim().equalsIgnoreCase(CAPConstants.DEFAULT_DROPDOWN_VALUE)){

              queryString = "SELECT " +
                                "APPL_USR_ID,APPL_USR_NM,APPL_USR_FRST_NM, " +
                                "APPL_USR_LST_NM,ACCESS_ROLE_CD " +
                                "FROM APPL_USR " +
                                "WHERE " +
                                "APPL_USR_NM LIKE ?"+
                                " AND APPL_USR_FRST_NM LIKE ?"+
                                " AND APPL_USR_LST_NM LIKE ?"+
                                " AND ACCESS_ROLE_CD = ?"+
                                " AND APPL_USR_ID != ?";

                ps = session.connection().prepareStatement(queryString);

                ps.setString(1,userVO.getAppUsrNm()+CAPConstants.PERCENTILE_SYMBOL);
                ps.setString(2,userVO.getAppUsrFirstNm()+CAPConstants.PERCENTILE_SYMBOL);
                ps.setString(3,userVO.getAppUsrLastNm()+CAPConstants.PERCENTILE_SYMBOL);
                ps.setString(4,userVO.getAppUsrRoleCd());
                ps.setInt(5, 1);

          }
          else
          {
              queryString = "SELECT " +
                        "APPL_USR_ID,APPL_USR_NM,APPL_USR_FRST_NM, " +
                        "APPL_USR_LST_NM,ACCESS_ROLE_CD " +
                        "FROM APPL_USR " +
                        "WHERE " +
                        "APPL_USR_NM LIKE ?"+
                        " AND APPL_USR_FRST_NM LIKE ?"+
                        " AND APPL_USR_LST_NM LIKE ?"+
                        " AND APPL_USR_ID != ?";

        ps = session.connection().prepareStatement(queryString);

        ps.setString(1,userVO.getAppUsrNm()+CAPConstants.PERCENTILE_SYMBOL);
        ps.setString(2,userVO.getAppUsrFirstNm()+CAPConstants.PERCENTILE_SYMBOL);
        ps.setString(3,userVO.getAppUsrLastNm()+CAPConstants.PERCENTILE_SYMBOL);
        ps.setInt(4, 1);

          }

          if(userVO.getQueryAction()!=null && userVO.getQueryAction().equals(CAPConstants.GET_DATA))
          queryString += " ORDER BY APPL_USR_ID LIMIT " + userVO.getPAGE_MIN_LIMIT() + ", " + userVO.getPAGE_MAX_LIMIT();
          else
              queryString += " ORDER BY APPL_USR_ID";

         rs = ps.executeQuery();

         if(userVO.getQueryAction()!=null &&         userVO.getQueryAction().equals(CAPConstants.GET_DATA))
         {

            int tempCOunt = 0;

             while(rs!=null && rs.next())
             {
                 tempCOunt ++;

                 UserVO returnVO = new UserVO();

                 returnVO.setAppUsrId(rs.getInt("APPL_USR_ID"));
                 returnVO.setAppUsrNm(rs.getString("APPL_USR_NM"));
                 returnVO.setAppUsrFirstNm(rs.getString("APPL_USR_FRST_NM"));
                 returnVO.setAppUsrLastNm(rs.getString("APPL_USR_LST_NM"));

                 if (rs.getString("ACCESS_ROLE_CD")!=null && rs.getString("ACCESS_ROLE_CD").trim().equalsIgnoreCase(CAPConstants.ADMINISTRATOR_ROLE_CD))
                         returnVO.setApplicationLevelRole("Administrator");
                 else if (rs.getString("ACCESS_ROLE_CD")!=null && rs.getString("ACCESS_ROLE_CD").trim().equalsIgnoreCase(CAPConstants.MAINTAINER_ROLE_CD))
                     returnVO.setApplicationLevelRole("Maintainer");
                 else if (rs.getString("ACCESS_ROLE_CD")!=null && rs.getString("ACCESS_ROLE_CD").trim().equalsIgnoreCase(CAPConstants.VIEWER_ROLE_CD))
                     returnVO.setApplicationLevelRole("Viewer");
                 else
                     returnVO.setApplicationLevelRole("None");

                 returnList.add(returnVO);

             }

             System.out.println("Count >>>>>>>>>>>>>>>>>>> "+tempCOunt);

             userVO.setReturnListFromDB(returnList);
         }
         else
         {

            int rowcount = 0;
            if (rs.last()) {
              rowcount = rs.getRow();
              rs.beforeFirst(); // not rs.first() because the rs.next() below will move on, missing the first element
            }

            userVO.setTotalRecordCount(rowcount);

            System.out.println("Total count of the records to be used for pagination >> "+rowcount);

            rowcount = 0;

             while(rs!=null && rs.next())
             {
                 rowcount ++;
                 UserVO returnVO = new UserVO();

                 returnVO.setAppUsrId(rs.getInt("APPL_USR_ID"));
                 returnVO.setAppUsrNm(rs.getString("APPL_USR_NM"));
                 returnVO.setAppUsrFirstNm(rs.getString("APPL_USR_FRST_NM"));
                 returnVO.setAppUsrLastNm(rs.getString("APPL_USR_LST_NM"));

                 if (rs.getString("ACCESS_ROLE_CD")!=null && rs.getString("ACCESS_ROLE_CD").trim().equalsIgnoreCase(CAPConstants.ADMINISTRATOR_ROLE_CD))
                         returnVO.setApplicationLevelRole("Administrator");
                 else if (rs.getString("ACCESS_ROLE_CD")!=null && rs.getString("ACCESS_ROLE_CD").trim().equalsIgnoreCase(CAPConstants.MAINTAINER_ROLE_CD))
                     returnVO.setApplicationLevelRole("Maintainer");
                 else if (rs.getString("ACCESS_ROLE_CD")!=null && rs.getString("ACCESS_ROLE_CD").trim().equalsIgnoreCase(CAPConstants.VIEWER_ROLE_CD))
                     returnVO.setApplicationLevelRole("Viewer");
                 else
                     returnVO.setApplicationLevelRole("None");

                 returnList.add(returnVO);

                 System.out.println("Row count >>"+rowcount);

                 if(rowcount == CAPConstants.PAGINATION_MAX_VALUE)
                     break;

             }

             rowcount = 0;

             userVO.setReturnListFromDB(returnList);

         }

         System.out.println("returnList >>"+returnList);

         return userVO;

       } catch (Throwable e) {
           e.printStackTrace();
            logger.writeToTivoliAlertLog(className, CAPConstants.ERROR, methodName, userVO.getAppUsrNm(), "Error occured while trying to fetch application user details. Printing stack trace to the log for analysis..", e);
            throw new CAPDAOException("Error occured while trying to fetch application user details.",CAPException.SPEXECUTION_ERROR_CODE);

       }
      finally{

          closeTransactionAndSession(session,transaction);

      }

} 
```

MYSQL 查询 -

```
SELECT APPL_USR_ID,APPL_USR_NM,APPL_USR_FRST_NM, APPL_USR_LST_NM,ACCESS_ROLE_CD 
FROM APPL_USR WHERE APPL_USR_NM LIKE '%' 
       AND APPL_USR_FRST_NM LIKE '%' 
       AND APPL_USR_LST_NM LIKE '%' 
       AND APPL_USR_ID != 1 
ORDER BY APPL_USR_ID 
LIMIT 10, 10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:13:54.400

你在之后添加你的 LIMIT

```
ps = session.connection().prepareStatement(queryString); 
```

所以打电话的时候

```
rs = ps.executeQuery(); 
```

LIMIT 不在那里。

因此，当*queryString*构造完成时调用*prepareStatement 。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:17:36.820

在准备好带有字符串的语句后，您正在更改查询字符串。*

# asp-classic - windows server 2008上安装IIS5.0

> ID：11241412
> 
> 赞同：0
> 
> 时间：2012-06-28T09:10:20.173
> 
> 标签：asp-classic

是否可以在 Windows server 2008 RT 中安装 IIS5.0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:16:34.480

不，IIS的版本固定为windows server的版本

*   IIS5 视窗服务器 2000
*   IIS6 视窗服务器 2003
*   IIS7 视窗服务器 2008
*   IIS7.5 Windows Server 2008 R2

# php - 没有 PHP 扩展的 Apache 请求页面

> ID：11241413
> 
> 赞同：0
> 
> 时间：2012-06-28T09:10:25.097
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

是否可以请求带有 .php 扩展名的文件，例如，`http://example.com/about.php`用户无需访问，只需键入.php 即可`http://example.com/about`。

我已经尝试了以下但只是得到一个 404 页面，

`RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php [L,QSA]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:16:10.203

您需要从 url 中排除 .php，否则您可能会陷入无限循环，并导致类似 .php.php.php.php 的 url。但这个想法很好，而且很有效。

1.  [如何从 URL 中删除“.php”扩展名？](https://stackoverflow.com/questions/11042874/how-do-i-remove-the-php-extension-from-urls/11042978#11042978)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:46:12.330

如果请求的文件（重写后）存在，您的规则应该有效。例如页面`/phpinfo`被请求并且文件`/phpinfo.php`存在。但是如果文件（重写后）不存在，相同的规则将创建一个无限循环，例如：

*   `/phpinfo`匹配 RewriteRule 并且 RewriteCond 都满足，结果将是`/phpinfo.php`
*   `L`标志停止当前迭代，但由于文件名已更改，需要另一个迭代
*   `/phpinfo.php`匹配 RewriteRule 并且 RewriteCond 都满足，结果将是`/phpinfo.php.php`
*   重复直到 mod_rewrite 放弃

解决方法很少，最简单的一种是调整您的`RewriteCond`：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*) $1.php [QSA,L] 
```

如果即使对于简单的重写规则，您也不断收到 404 错误，则很可能您的重写规则没有被 Apache 处理。一个可能的原因是它在服务器配置文件 ( )`AllowOverride`中设置为。将其更改为并重新启动 Apache。`None``httpd.conf``AllowOverride FileInfo`

# javascript - 如何通过javascript查找图像的属性

> ID：11241415
> 
> 赞同：0
> 
> 时间：2012-06-28T09:10:38.457
> 
> 标签：javascript

我有一个带有名称、宽度等属性的图像。

现在我正在尝试获取 Image 不存在的属性值。

```
var title = imgTemp.attributes("Title").value; 
```

它给出了错误，因为参数`Title`不存在。我如何在分配之前检查这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:17:10.927

您可以使用`getAttribute`：

```
var title = imgTemp.getAttribute('title'); 
```

如果没有 title 属性，它将返回`null`.

您还可以直接将属性作为属性访问：

```
var title = imgTemp.title; 
```

如果不存在 title 属性，它将返回一个空字符串，这意味着如果 title 属性存在但为空，您将具有相同的返回值，f.ex：`<img title="">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:13:03.910

[`element.hasAttribute()`](https://developer.mozilla.org/en/DOM/element.hasAttribute)像这样使用

```
if (imgTemp.hasAttribute('title')) {
  // get it
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:14:51.050

不要使用`attributes` [http://reference.sitepoint.com/javascript/Node/attributes](http://reference.sitepoint.com/javascript/Node/attributes)。

```
var title = domElement.title 
```

# puppet - Puppet：禁用通知命令的回显

> ID：11241418
> 
> 赞同：2
> 
> 时间：2012-06-28T09:11:05.257
> 
> 标签：puppet

我想在应用我的配置时打印一些消息和变量值。我还想直观地分离不同配置块的输出。所以我用

```
notify {"\n\nINSTALL TOMCAT TO $target_folder":} 
```

如木偶[教程](http://www.puppetcookbook.com/posts/simple-debug-messages.html)和[文档](http://docs.puppetlabs.com/references/2.6.8/type.html#notify)中所述。

不幸的是，输出并没有真正增加整个日志的可读性：

```
notice: 

INSTALL TOMCAT TO /opt/example/uiserver
notice: /Stage[main]//Node[dev-xyz.example.com]/Tomcat[uiserver_tomcat]/Notify[

INSTALL TOMCAT TO /opt/example/uiserver]

INSTALL TOMCAT TO /opt/example/uiserver' 
```

问题 - 不仅仅是打印消息，puppet 还输出一个烦人的 echo `/message: defined 'message' as '`。有什么办法可以消除吗？

使用`withpath => false`没有帮助。

木偶 2.7.17。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:08:46.043

将 --logdest 设置为`syslog`. `console`默认情况下。

```
--logdest:
  Where to send messages. Choose between syslog, the console, and a log
  file. Defaults to sending messages to the console. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:34:16.937

[也许尝试使用 notify() 函数而不是根据http://www.puppetcookbook.com/posts/simple-debug-messages.html](http://www.puppetcookbook.com/posts/simple-debug-messages.html)的通知类型

使用notice() 函数mesagee 将被写入puppetmaster 的日志而不是客户端，但是不会有回显线回显。

# android - 使用 LinearLayouts 替代嵌套权重

> ID：11241426
> 
> 赞同：7
> 
> 时间：2012-06-28T09:11:45.257
> 
> 标签：android, android-layout

我想实现以下目标：

![在此处输入图像描述](../Images/32a08408725768794ce771d7907742b1.png)

它适用于以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <LinearLayout
        android:layout_weight="3"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <fragment 
            android:name="com.bobjohn.DetailsMenuFragment"
            android:id="@+id/detailsMenuFragment"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="6"
            />

        <fragment 
            android:name="com.bobjohn.SummaryFragment"
            android:id="@+id/summaryFragment"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_margin="10dp"
            android:layout_weight="4"/>
    </LinearLayout>

    <TextView 
        android:layout_width="0dp"
        android:layout_weight="7"
        android:layout_height="fill_parent"
        android:text="Test Text"/>
</LinearLayout> 
```

但是，我收到有关嵌套权重不利于性能的警告。我理解这个错误，但我不知道如何用另一种方式表达这个布局。什么是替代方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T09:32:43.690

## 支持库中有新的更新，请也检查已接受的答案。

更新答案：-

每当您创建任何视图时，它都会调用它的测量事件来了解屏幕上视图的高度宽度，如果您不使用 WRAP_CONTENT 或 FILL_PARENT 或 FIXEDSIZE 并使用权重，那么在屏幕上呈现布局会变得更加复杂。

方法，

首先，您的主布局被渲染并将其称为度量。然后根据权重，所有子视图递归地调用它的度量事件，因此它会消耗更多的时间来加载。

因此，**应避免嵌套 weights**。

替代嵌套权重：-

您应该考虑使用针对不同尺寸的不同布局和可绘制文件夹。用特定的高度-宽度在 XML 中编写您的视图，或者将其设置为 wrap_content 并使用特定的背景图像，或者将其设置为 fill_parent。

我相信，作为开发人员，我们可能会多次出错，但作为 Android (Lint) 的创建者，他们可能只会在极少数情况下出错，应该听取这些警告以使您的代码更好。

* * *

**下面的答案是在缺乏关于安卓布局的知识的情况下写的**

AFAIK，我认为你做得对，这是最好的 XML 编写。您已经完美地使用了 weight 属性，因为它应该被使用。你只是忽略警告。

> 什么是替代方案？

我在我的项目中以相同的方式对我的所有 XML 进行了编码，所以这对我来说是最好的选择，所以我认为没有任何其他替代方法可以对 XML 进行编码以获得这样的布局，除非你使用`RelativeLayout` *一些作为父布局子视图的固定尺寸高度和宽度*。我仍然建议您保持原样。

* * *

*我会删除这个答案，因为我仍然不完全了解 Android 布局，但会保留它以接收基于此的新评论和答案*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-06T07:36:04.617

`LinearLayout` `weight`是的，我们有android嵌套的替代方案`percent support library`

[代码和概念在这里！](http://code2concept.blogspot.in/2015/08/android-percent-support-lib-sample.html)

[GitHub 项目在这里！](https://github.com/nitiwari-dev/android-percent-layout-sample)

考虑这个简单的布局，我完全避免了重量属性`LinearLayout`

[![百分比支持库](../Images/8f5a23441b74a77dbe1f8f717c6fb182.png)](https://i.stack.imgur.com/xl0zJ.png)

```
<android.support.percent.PercentRelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
        android:id="@+id/fifty_huntv"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="#ff7acfff"
        android:text="20% - 50%"
        android:textColor="@android:color/white"
        app:layout_heightPercent="20%"
        app:layout_widthPercent="50%" />
    <TextView
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_toRightOf="@id/fifty_huntv"
        android:background="#ffff5566"
        android:text="80%-50%"
        app:layout_heightPercent="80%"
        app:layout_widthPercent="50%"
        />

</android.support.percent.PercentRelativeLayout> 
```

非常棒 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T22:27:20.870

我认为（我可能会为此感到愤怒），但我再次认为我的手机有一个四核处理器，可以与大多数人的家用电脑相媲美（如果不是完全摧毁的话）。

我也认为这种硬件能力是手机的未来。

所以我得出一个结论，只要你不被嵌套冲昏头脑（在 MHO 中，布局的深度不应该超过 4 层，如果是你可能做错了），你的手机就不会在意关于有重量。

您可以做很多事情，这将对性能产生更深远的影响，然后担心您的处理器会做一些额外的数学运算。

（请注意，我有点幽默，所以不要对这篇文章太认真，除了你应该首先优化其他东西的想法，担心 2-3 级深度权重没有帮助你的健康）

# html - 如何对齐块内的两个内联元素

> ID：11241427
> 
> 赞同：1
> 
> 时间：2012-06-28T09:11:45.337
> 
> 标签：html, css, xml, pdf, xsl-fo

我正在使用 xsl-fo 呈现 PDF。我需要为我的目录创建一个表头，其中左侧有一个元素（“章节内容”），右侧有另一个元素（“页面”），这两个元素出现在同一行。

目前，我创建了两个 fo:inline 元素来包装文本，然后将它们包装在 fo:block 元素下。我的 xslfo 代码如下所示：

```
 <fo:block text-align="left">
        <fo:inline color="#0082C8"   font-size="8pt" font-family="serif" font-weight="normal" >Chapter Contents:  </fo:inline> 
        <fo:inline  font-size="8pt" font-family="serif" font-weight="normal" alignment-adjust="alphabetic" >Page    </fo:inline>   
 </fo:block> 
```

此代码将简单地将两个元素放在左侧。如果我确实将两个内联元素放入两个单独的块中，它们将位于不同的行上！此外，将 text-align="right" 添加到第二个中将无效。

专家可以提供一些帮助吗？我希望两个元素出现在同一行，一个在最右边，另一个在左边。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:21:23.560

我对 xsl-fo 一无所知，但在“正常”html/css 中，您会给第一个元素一个 float:left 和一个 float:right 给第二个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:19:10.793

和

**<fo:leader/>**

您可以在左侧，中间和右侧输出文本；并定义“间隔”（如点等）。虽然它不是很直观，但效果很好。

# java - TCP 数据包在网络级别合并

> ID：11241430
> 
> 赞同：3
> 
> 时间：2012-06-28T09:11:52.300
> 
> 标签：java, networking, tcp, tcpdump

有谁知道对方如何以及为什么会收到合并的 TCP 数据包而不是单独的数据包？我已经在套接字级别将 TCP Nodelay 设置为 true，但 tcpdump 仍然看到一些数据包已合并。在成功发送 4 个大小为 310 字节的数据包后，我得到了 3 x 1400 字节而不是 15 x 310 字节。这导致了一些重要的延迟。谢谢。

[http://www.2shared.com/photo/_bN9UEqR/tcpdump2.html](http://www.2shared.com/photo/_bN9UEqR/tcpdump2.html)

```
s = new Socket(host, port);
s.setTcpNoDelay(true);
s.getOutputStream().write(byteMsg); 
s.getOutputStream().flush() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:25:34.763

TCP 是一种基于流的协议。它不保留`send`/`recv`调用的边界。唯一保证的是 's 的串联`send`将与 's 的串联相同`recv`（在正常情况下）。

如果您正在实现自定义协议并且需要某种方式将数据拆分为多个逻辑*消息*，则需要为此进行编码。

一个简单的编码是将每条消息编码为一个 32 位无符号整数，表示消息有效负载的长度，然后是实际的消息有效负载。然后，在接收端，根据此编码正确解码输入。为此，您将需要一个缓冲区来存储部分接收到的消息。如果处理原始整数有问题，您可以用其他方式对长度进行编码，例如作为十进制数字后跟换行符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T09:19:38.360

合并可以在许多地方发生

*   发件人应用程序缓冲
*   发件人操作系统缓冲
*   发送方网络适配器缓冲区
*   路由器缓冲区
*   接收器网络适配器缓冲区
*   接收器操作系统缓冲
*   接收器应用程序缓冲区/队列

从您所说的看来，发送者网络适配器和接收者的操作系统之间存在合并。（因为 tcp-no-delay 指示操作系统不要在应用程序之前缓冲和 tcpdump 读取）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T09:40:54.557

您可以尝试在使用的套接字上启用 TCP_NODELAY 选项（`setTcpNoDelay()`方法）。

默认情况下它是禁用的，这意味着传输的数据针对发送的最小数量的包进行了优化（请参阅[Nagle 的算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T10:59:00.460

> 有谁知道对方如何以及为什么会收到合并的 TCP 包而不是单独的包？

因为那是 TCP 专门设计的。

# logging - 如何减少码头中的服务器日志大小

> ID：11241432
> 
> 赞同：0
> 
> 时间：2012-06-28T09:12:09.297
> 
> 标签：logging, size, jetty, reduce

我想知道当文件大小达到 10MB 时如何拆分码头服务器日志并在运行时进行备份？

我正在使用码头 8 网络服务器。

提前致谢。

伊梅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:48:04.767

感谢杰西的回复，但我没有尝试你提到的方式。我以这种方式解决了这个问题。下载了码头源并获得了命名的日志文件，`RolloverFileOutputStream.java`然后我更改了`maxFileLenth`方法中的值`RollTaskBySize()`。

```
long maxFileLenth  = 1048576*10L;    //(10MB) 
```

我将此文件放在我的源代码中并更改了 jetty-loggin.xml 中的值。设置路径以从我的项目中获取修改后的 RolloverFileOutputStream.java，如下所示。

```
<Configure id="Server" class="org.eclipse.jetty.server.Server">
<New id="ServerLog" class="java.io.PrintStream">
  <Arg>
      <!-- ****** THIS IS THE CHANGE THAT I MADE ***** -->
      <New class="rezg.gdsws.util.RolloverFileOutputStream">
      <Arg>
<Property name="jetty.logs" default="/var/log/rezg/app/jetty"/>/yyyy_mm_dd.Server.log
      </Arg>
      <Arg type="boolean">false</Arg>
      <Arg type="int">90</Arg>
      <Arg><Call class="java.util.TimeZone" name="getTimeZone"><Arg>GMT</Arg></Call></Arg>
      <Get id="ServerLogName" name="datedFilename"/>
    </New>
  </Arg>
</New> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:43:30.923

将 slf4j api jar 放入 lib 目录，然后 slf4j 将用于从那时起进行日志记录..放入您想要的日志记录 impl 并进行相应配置

您可以在此处查看使用 logback 进行繁重工作的基本设置：

[http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback](http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback)

# facebook - 默认情况下，iframed Facebook 按钮会在 IE6 中出现怪癖吗？

> ID：11241434
> 
> 赞同：0
> 
> 时间：2012-06-28T09:12:25.367
> 
> 标签：facebook, iframe, styles

我已经通过 iframe 将这个漂亮的 Facebook 按钮集成到了我的 WordPress 网站。尽管我关心跨浏览器的兼容性以及我无法以常规方式影响 iframe 内容的事实，但我想知道为什么在 IE6 中查看时会出现这种怪癖。

我是不是做错了什么，还是默认情况下可以想象的东西怪癖而 Facebook 不关心这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:44:22.403

Facebook 正式*不再*支持 IE 6。

（我很高兴。只是想知道*你*为什么还在关心？）

# sql - JDBC SQL 传输大小（以字节为单位）？

> ID：11241435
> 
> 赞同：1
> 
> 时间：2012-06-28T09:12:40.047
> 
> 标签：sql, jdbc

有没有任何简单的方法可以使用普通 JDBC 获取从数据库传输到客户端的数据量？有问题的数据库是 Oracle、MSSQL 和 Firebird。

我需要的是，在执行语句后，我需要检查数据量是否在客户端没有溢出。问题是，数据库可以包含可变大小的 BLOB。所以有些数据适合，有些则不适合。我无法更改数据库结构，并且额外的 SQL 查询也不是选项。我需要它来进行测试，以确定有问题的用例。

到目前为止，我提出了这个伪代码解决方案：

```
 totalSize = 0;
   foreach(Result in ResultSet){
        totalSize = getFieldSizeInBytes();
   } 
```

TL;DR：如何获取从 DB 传输到客户端的确切字节数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:27:48.667

您不能从 JDBC 执行此操作。您要么需要监控机器本身的流量，要么引入一个代理来为您进行监控。

# delphi - 在 Indy 中使用 cookie

> ID：11241439
> 
> 赞同：1
> 
> 时间：2012-06-28T09:12:56.163
> 
> 标签：delphi, delphi-7, session-cookies, indy

我正在尝试使用 Indy 组件从站点获取数据。（这是在 Delphi 7 中，但很高兴使用任何有效的东西。）

如果您进入普通浏览器并输入路径： http: [//inventory.data.xyz.com/provide_data.aspx](http://inventory.data.xyz.com/provide_data.aspx?ID=41100&Mixed=no?fc=true&lang=en) ?ID=41100&Mixed=no?fc=true&lang=en 它会让您在重定向到之前勾选免责声明实际站点。这会创建一个 cookie，如果我在 Firefox 中查看它是这样的：http: [//inventory.data.xyz.com](http://inventory.data.xyz.com) 名称：ASP.NET_SessionId 内容：vm4l0w033cdng5mevz5bkzzq 路径：/发送：任何类型的连接过期：结束会话的

我无法使用编程完成免责声明部分，但我想如果我手动签署免责声明，我可以将 cookie 的详细信息输入到我的代码中并直接连接到数据页面。我尝试使用下面的代码来执行此操作，但它只返回免责声明页面的 html，这往往意味着它没有使用我给它的 cookie 数据。我究竟做错了什么？

```
procedure TfmMain.GetWebpageData;
var
  http: TIdHTTP;
  cookie: TIdCookieManager;
  sResponse: String;
begin
  try
    http := TIdHTTP.Create(nil);
    http.AllowCookies := True;
    http.HandleRedirects := True;
    cookie := TIdCookieManager.Create(nil);
    cookie.AddCookie('ASP.NET_SessionId=vm4l0w033cdng5mevz5bkzzq', 'inventory.data.xyz.com');
    http.CookieManager := cookie;

    sResponse := http.Get('http://inventory.data.xyz.com/provide_data.aspx?ID=41100&Mixed=no?fc=true&lang=en');
    ShowMessage(sResponse);  // returns text of disclaimer
  except

  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T02:44:23.377

由于您没有提供真实的 URL，我只能推测，但很可能您提供的 cookie 值是错误的或在尝试使用它`TIdCookieManager`时已过时，或者更有可能是完全拒绝 cookie（如果事件未触发，则 cookie 未被接受）。`TIdHTTP.Get()``TIdCookieManager.AddCookie()``TIdCookieManager.OnNewCookie`

# xcode - 在应用内购买之外的应用内实现支付的 iOS 指南

> ID：11241444
> 
> 赞同：0
> 
> 时间：2012-06-28T09:13:29.873
> 
> 标签：xcode, in-app-purchase, payment, bank

我们公司想知道是否可以在 iOS 应用程序内实现应用内购买之外的支付，即使用客户在银行的账户进行银行交易和支付银行服务。明知这种支付方式不在应用内购买范围内，苹果会拒绝这种应用吗？谢谢。

# c++ - push_back 常量字符*

> ID：11241448
> 
> 赞同：1
> 
> 时间：2012-06-28T09:13:43.860
> 
> 标签：c++, string, pointers, vector, constants

我正在尝试将 a 推回`const char*`forloop 中的向量中。`char_temp`是一个名为 的结构体`segment`，并且`chars_temp`是结构体的向量。请参阅下面的代码：

```
for (int bg = 0; bg < str.size(); bg++) {
    string sym(1, str[bg]);
    const char* bg_cc;
    bg_cc = sym.c_str();

    char_temp.symbol_first = bg_cc;
    char_temp.symbol_second = "*";

    chars_temp.push_back(char_temp);
} 
```

问题是 push backed char 是一个指针，因此`char_temp.symbol_first`由相同的地址组成。该结构需要一个`const char*`for `char_temp.symbol_first`，那么如何在 forloop 中用不同的地址填充这个向量？

我`const char* bg_cc = new char`在forloop中尝试过，但`bg_cc`始终使用相同的地址。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:17:26.537

> 我在 forloop 中尝试了 const char* bg_c​​c = new char ，但 bg_c​​c 保持相同的地址。

还好，有点期待。重要的是它*指向*不同的地址。

您需要使用`char* bg_cc = new char`然后`strcpy`从`sym.c_str()`创建副本，而不仅仅是将指针分配给`sym.c_str()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:32:08.693

1) sym 对象将在每次“for”迭代后被销毁。和指针`bg_cc`变得`char_temp.symbol_first`无效。您需要在每个“for”迭代中为`bg_cc`指针分配内存。可与`new`操作员一起使用。你确定你需要`const char*`这里吗？可能单身`char`就够了？

2）看起来您将相同的对象放入`chars_temp`容器中。`char_temp`您需要在每次循环迭代中为对象分配内存。

# android - 带有按钮的 ListView 项目，并知道单击后按钮在里面的项目

> ID：11241455
> 
> 赞同：1
> 
> 时间：2012-06-28T09:14:04.180
> 
> 标签：android, android-layout, android-widget

我有一个列表视图，其中项目有一个文本视图和一个按钮。我已经设法使列表视图 onclick 和 button on click 一起工作。问题是当我单击按钮时，我真的不知道它也属于哪个列表视图项索引。有什么办法知道吗？我需要将其传递给“CRUD”进行编辑等...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T09:20:32.793

这里可以使用setTag和getTag来获取ListView中被点击的Button的位置，

就像是，

`button.setTag(position);`// 在你的 getView() 方法中

进而，

`int cur_pos = (Integer)v.getTag();`// 在getView()方法中Button的onClick内部

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T09:20:12.023

一些选项：

*   您可以`OnClickListener`为每个按钮设置单独的实例。

*   您可以调用`setTag()`您的按钮来存储任意数据（例如索引或标识符）并稍后检索它`getTag()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T13:46:46.443

另一种解决方案是在用户点击按钮时重现按钮单击其父级：http: [//developer.android.com/reference/android/view/View.html#performClick()](http://developer.android.com/reference/android/view/View.html#performClick())

# emacs - Emacs：用于自动完成的 ac-slime

> ID：11241460
> 
> 赞同：4
> 
> 时间：2012-06-28T09:14:21.393
> 
> 标签：emacs, autocomplete, common-lisp, slime

我正在尝试为 *.lisp 文件添加自动完成功能。我的粘液设置是：

```
(add-to-list 'load-path "~/.emacs.d/plugins/slime/")
(setq slime-lisp-implementations
      '((sbcl ("/opt/sbcl/bin/sbcl" "--core" "/opt/sbcl/lib/sbcl/sbcl.core")
              :coding-system utf-8-unix
              :env ("SBCL_HOME=/opt/sbcl/lib/sbcl"))
        (ccl ("/opt/ccl/lx86cl64")
             :coding-system utf-8-unix)))
(require 'slime-autoloads)
(slime-setup '(slime-fancy)) 
```

ac-slime 设置为：

```
(require 'ac-slime)
(add-hook 'slime-mode-hook 'set-up-slime-ac)
(add-hook 'slime-repl-mode-hook 'set-up-slime-ac)
(eval-after-load "auto-complete"
  '(add-to-list 'ac-modes 'slime-repl-mode)) 
```

每次我在 *.lisp 文件中键入一个单词时，自动完成弹出一些候选但在第二个 minibuffer 输出之后

```
error in process filter: Reply to canceled synchronous eval request 
tag=slime-result-6-19579 
sexp=(swank:simple-completions "de" (quote "COMMON-LISP-USER")) 
```

并且弹出窗口停留了一段时间。之后我可以继续我的选择。

我的问题是如何消除此错误并卡住？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:06:04.067

*（评论太长了）*

我还不知道这一切是如何工作的，但我遇到了同样的问题，我总是可以重现它......我找到了一个解决方法。

我不知道*“回复已取消的同步评估请求”*是什么意思，也不知道是否真的有两个同步评估请求。

如果有两个这样的请求，我不知道是什么原因造成的......

**但是**，通过更改自动完成菜单和弹出窗口出现之前的计时器，我已经能够解决这个问题。

如果我对此进行评估（例如从我的*.emacs*文件中）：

```
(setq ac-auto-show-menu 0.1) 
```

然后我可以可靠地重现您遇到的错误（并且它也会阻止我一段时间）。

如果我稍微修改一下值：

```
(setq ac-auto-show-menu 0.3) 
```

然后就没有问题了。

这是一个糟糕的解决方法，我仍然认为某个地方隐藏着一个严重的（尽管可能很容易修复）潜在的错误。

# wix - 每台机器和每用户安装的磁盘成本不变

> ID：11241463
> 
> 赞同：2
> 
> 时间：2012-06-28T09:14:32.370
> 
> 标签：wix, windows-installer, wix3.5, diskspace

我想知道在每个用户或每台机器安装的情况下如何更改或者计算机更改磁盘成本。

当我签入程序文件时，我有一个大小约为 50 MB 的安装程序，但是当我使用 DiskCostDlg 时，它显示为 96 MB，我正在为每个用户和每台机器安装，我很惊讶地看到在这两种情况下，磁盘要求是相同的。

我需要知道是否有可能更改磁盘要求，或者它是否是 Wix 安装程序的默认属性。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:50:17.660

Windows Installer 需要额外空间用于安装过程。这就是为什么它显示的内容超过您的总文件大小。这是一篇更详细的文章：http: [//blogs.msdn.com/b/heaths/archive/2008/07/24/why-windows-installer-may-require-so-much-disk-space.aspx](http://blogs.msdn.com/b/heaths/archive/2008/07/24/why-windows-installer-may-require-so-much-disk-space.aspx)

> 我正在执行每个用户和每台机器的安装，我很惊讶地发现在这两种情况下磁盘要求是相同的。

Per-user 或 per-machine 指的是安装位置，它们与文件大小无关。安装的文件是相同的，并且它们在任何位置都具有相同的大小。

> 我需要知道是否有可能更改磁盘要求

它无法更改，因为它是由 Windows Installer 自动计算的。

# ios - 如何以编程方式触发 uibarbuttonitem 的操作？

> ID：11241468
> 
> 赞同：4
> 
> 时间：2012-06-28T09:14:50.067
> 
> 标签：ios, action, uibarbuttonitem

> **可能重复：**
> [如何以编程方式触发 uibarbuttonitem 点击事件](https://stackoverflow.com/questions/9496761/how-to-fire-uibarbuttonitem-click-event-programmatically)

我已经动态创建了一个`uibarbuttonitem`并且它可以正常工作。我想以`uibarbutton`编程方式触发该项目操作（单击）以进行单元测试。

即使当我在应用程序代码（而不是测试代码）中记录栏按钮项的操作时代码正常工作，它也会给出 null。我使用的代码如下所示。

```
NSLog(@"%@",NSStringFromSelector(barButton.action)); 
```

在测试代​​码中，我创建了一个名为 logout 的条形按钮并将 barbutton 分配给它。要以编程方式单击条形按钮项，我遵循以下代码。

```
[logout.target performSelector:logout.action]; 
```

但它没有用。我记录了注销按钮的操作，它也给出了 null。

```
NSLog(@"%@",logout.action); 
```

我想知道如何以编程方式单击`uibarbuttonitem`动态创建的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T09:26:04.987

这段代码对我有用

```
//in viewDidLoad
item = [[UIBarButtonItem alloc] initWithTitle:@"test" style:UIBarButtonItemStyleDone target:self action:@selector(logout)];    
toolBar.items = [NSArray arrayWithObject:item];

//In viewWillAppear
[item.target performSelector:item.action];

- (void) logout
{
    NSLog(@"Called");
} 
```

我不知道你所说的点击是什么意思，但上面的作品

# php - mysql查询需要145秒

> ID：11241471
> 
> 赞同：2
> 
> 时间：2012-06-28T09:14:53.127
> 
> 标签：php, mysql

我有一个带有 myisam 引擎的 mysql 数据库。与许多其他表一起，我有这个表“et”，它有大约 8137037 条记录。

我已经创建了索引（列 hname 和 pnum 的单独索引，后来创建了 hname 和 pnum 的联合索引并帮助在一秒钟内执行）这样查询如下

```
 select st from et where hname='name' and pnum='1' limit 1 
```

快速执行（在一秒钟内），但问题是我必须执行这个查询

```
select st from et where hname='name' and pnum='1' order by id limit 1 
```

其中 id 是表的主键，此查询有时需要 145 秒 :(

我该如何解决这个问题？

### 表结构

```
mysql> describe et;
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| id         | bigint(20)  | NO   | PRI | NULL    | auto_increment |
| client_id  | int(11)     | YES  | MUL | NULL    |                |
| down_id    | bigint(20)  | YES  | MUL | NULL    |                |
| port_index | int(11)     | YES  |     | NULL    |                |
| date1      | bigint(20)  | YES  | MUL | NULL    |                |
| username   | varchar(50) | YES  |     | NULL    |                |
| hname      | varchar(80) | YES  | MUL | NULL    |                |
| pnum       | varchar(10) | YES  | MUL | NULL    |                |
| status     | int(3)      | YES  | MUL | NULL    |                |
| department | int(2)      | YES  | MUL | NULL    |                |
| comments   | text        | YES  |     | NULL    |                |
| issue      | int(1)      | YES  | MUL | NULL    |                |
+------------+-------------+------+-----+---------+----------------+
12 rows in set (0.06 sec) 
```

### 索引

```
mysql> show indexes from et;
+-----+------------+----------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
|Table| Non_unique | Key_name       | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-----+------------+----------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| et  |          0 | PRIMARY        |            1 | id          | A         |     8137037 |     NULL | NULL   |      | BTREE      |         |
| et  |          1 | status         |            1 | status      | A         |          12 |     NULL | NULL   | YES  | BTREE      |         |
| et  |          1 | down_id        |            1 | down_id     | A         |     4068518 |     NULL | NULL   | YES  | BTREE      |         |
| et  |          1 | issue_idx      |            1 | issue       | A         |     8137037 |     NULL | NULL   | YES  | BTREE      |         |
| et  |          1 | hname_idx      |            1 | hname       | A         |         283 |     NULL | NULL   | YES  | BTREE      |         |
| et  |          1 | pname_idx      |            1 | pnum        | A         |         136 |     NULL | NULL   | YES  | BTREE      |         |
| et  |          1 | clientid_idx   |            1 | client_id   | A         |     8137037 |     NULL | NULL   | YES  | BTREE      |         |
| et  |          1 | date1_idx      |            1 | date1       | A         |     8137037 |     NULL | NULL   | YES  | BTREE      |         |
| et  |          1 | department_idx |            1 | department  | A         |     2712345 |     NULL | NULL   | YES  | BTREE      |         |
| et  |          1 | hp_idx         |            1 | hname       | A         |         283 |     NULL | NULL   | YES  | BTREE      |         |
| et  |          1 | hp_idx         |            2 | pnum        | A         |        4834 |     NULL | NULL   | YES  | BTREE      |         |
+-----+------------+----------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
11 rows in set (0.06 sec) 
```

### 解释计划

```
mysql> explain select status from et where hname='mmah' and port_num='1' limit 1;
+----+-------------+------------+------+----------------------------------+--------------+---------+-------------+------+-------------+
| id | select_type | table      | type | possible_keys                    | key          | key_len | ref         | rows | Extra       |
+----+-------------+------------+------+----------------------------------+--------------+---------+-------------+------+-------------+
|  1 | SIMPLE      | error_trap | ref  | hname_idx,pname_idx,hostport_idx | hostport_idx | 96      | const,const |   37 | Using where |
+----+-------------+------------+------+----------------------------------+--------------+---------+-------------+------+-------------+
1 row in set (0.02 sec)

mysql> explain select status from et where host_name='mmah' and pnum='1' order by id desc limit 1;
+----+-------------+------------+------+----------------------------------+--------------+---------+-------------+------+-----------------------------+
| id | select_type | table      | type | possible_keys                    | key          | key_len | ref         | rows | Extra                       |
+----+-------------+------------+------+----------------------------------+--------------+---------+-------------+------+-----------------------------+
|  1 | SIMPLE      | error_trap | ref  | hname_idx,pname_idx,hostport_idx | hostport_idx | 96      | const,const |   37 | Using where; Using filesort |
+----+-------------+------------+------+----------------------------------+--------------+---------+-------------+------+-----------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:23:41.600

您是否尝试过创建 (id, hname,pnum) 的索引？

如果您的索引包含并且已经按 ID 排序，那么这有效地消除了这种担忧。

没有理由不能在另一个索引中包含 ID，只是因为它也是主索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:20:50.183

在包含 hname 和 pnum 的表中创建索引。

这将导致 MYSQL 创建一个影子表，它只包含这两个参数，并且每当这两个参数在 where 中使用时，它都会在该影子表中查找，并很快找到它们。

# c# - C# 从 Outlook 获取邮件及其附件

> ID：11241473
> 
> 赞同：1
> 
> 时间：2012-06-28T09:15:01.467
> 
> 标签：c#, email, outlook

我制作了一个程序，其中一个目的是打开 OutLook 客户端，用户可以在其中编写电子邮件、添加附件等。发送后我想获取添加到电子邮件中的所有附件，以及我程序中的所有电子邮件。我试图处理关闭事件

```
((Microsoft.Office.Interop.Outlook.ItemEvents_10_Event)email.oMsg).Close += new Microsoft.Office.Interop.Outlook.ItemEvents_10_CloseEventHandler(GetAttachmentsInfo); 
```

进而

```
 if (email.oMsg.Attachments.Count > 0)
    {
        foreach (Microsoft.Office.Interop.Outlook.Attachment at in email.oMsg.Attachments )
        { attachments.Add(at); }
    }

     email is OutlookEMail
oMsg is Email Item
attachments is List<Attachment> 
```

但是当我关闭客户端附件时会抛出找不到对象的异常。以及列表中的这些。

我知道 Microsoft.Office.Interop.Outlook.Attachment 不是文件，而只是包含文件名称和大小的文件路径。所以问题：在我的程序中关闭客户端后是否可以保存附件？（不使用 Email.SaveAttachments os SaveEmail 方法，因为它使用时间和计算机空间）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:39:15.793

您可以尝试以下两个选项：

### 1\. 您可以通过 收听文件夹的`MailItem`添加。`SentItems`[`Folder.ItemAdd`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.itemsevents_event.itemadd.aspx)

```
Outlook.Folder sentItems = Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderSentMail) as Outlook.Folder;
sentItems.ItemAdd += new Outlook.ItemsEvents_ItemAddEventHandler(GetAttachmentsInfo); 
```

### 2.您可以附加到[`MailItem.Send`](http://msdn.microsoft.com/en-us/library/ff866779.aspx)事件。

```
((Outlook.ItemEvents_10_Event)MailItem).Send  += new Outlook.ItemEvents_10_SendEventHandler(GetAttachmentsInfo); 
```

# javascript - 盲人的 JavaScript Speech-to-Text

> ID：11241475
> 
> 赞同：20
> 
> 时间：2012-06-28T09:15:04.030
> 
> 标签：javascript, html, google-chrome, speech-recognition, speech-to-text

我正在开发一个网站，我想帮助盲人通过语音使用它，所以我将使用：

*   文字转语音，为用户提供一些可能性
*   Speech-to-text，允许用户使用她的声音来选择一个

我已经有一些文本到语音的 JavaScript 库（例如[speak.js](http://syntensity.com/static/espeak.html)），但现在我需要一个好的语音到文本的库。为此目的有一些解决方案（如[Speechapi](http://www.speechapi.com/)），但它们使用 Java Applets 或 Flash，我只想依赖 JavaScript，以避免插件。

我正在尝试使用 x-webkit-speech 和 Google Chrome 进行 HTML5 的语音输入，效果很好，但是您需要单击一个图标（而且盲人不能很好地使用鼠标）。是否可以使用 x-webkit-speech 按键？你知道任何替代 API (JavaScript) 吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:40:06.963

*是否可以使用 x-webkit-speech 按键？*

根据这篇[文章](https://stackoverflow.com/questions/9817373/x-webkit-speech-how-to-auto-click-the-mic-icon-to-record-many-words-automatical)和这篇[文章](https://stackoverflow.com/questions/9360822/webkit-speech-jquery-trigger-mic-listen)，您不能通过单击麦克风来覆盖讲话的开始。

x-webkit-speech 正在做的是使用 HTML5 的音频捕获功能，并将音频发送到 Google 的服务器进行处理，以 JSON 格式返回结果。这位[博主对其进行了逆向工程](http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/)。您可以开发一个 JavaScript 库来查找按键以开始在支持 HTML5 的浏览器上捕获音频并将其发送到 Google 的服务或您创建的服务。使用 Google 服务的缺点是它是一个不受支持的 API，并且随时可能更改。开发自己的服务的缺点是开发和维护成本可能很高。

*你知道任何替代 API (JavaScript) 吗？*

这篇[文章](https://stackoverflow.com/questions/2647406/speech-recognition-web-services)和这篇[文章](https://stackoverflow.com/questions/4141893/speech-recognition-api)列出了一些可用于语音识别的服务。我没有看到 Nuance 列出。您可以为此使用[Dragon Mobile SDK](http://www.nuance.com/for-developers/dragon-mobile-sdk/index.htm)。你可能想检查一下[ISpeech](https://www.ispeech.org/developers)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T09:38:55.573

谷歌翻译是非常好的文本到语音引擎。我曾经用它读过一篇文章。例如你有一个文本：`welcome to Stack overflow`你可以这样调用

```
http://translate.google.com/translate_tts?ie=UTF-8&q=Welcome%20to%20stack%20overflow&tl=en&total=1&idx=0&textlen=23&prev=input 
```

然后使用浏览器音频播放它

对于语音输入，您可以手动激活收听过程，请参阅此处 [http://code.google.com/chrome/extensions/experimental.speechInput.html](http://code.google.com/chrome/extensions/experimental.speechInput.html)

# php - 启用/安装 Curl 扩展 (OSX Server/PHP 5.3.3/Apache 2.2)

> ID：11241477
> 
> 赞同：5
> 
> 时间：2012-06-28T09:15:11.303
> 
> 标签：php, macos, apache

在我继承的服务器上让 CURL 与 PHP 一起工作时遇到了一些麻烦。

到目前为止，我已经通过取消注释该`extension=php_curl.dll`行并重新启动 apache 在我的 php.ini 中启用了扩展。

但是，我现在在启动 PHP 时收到以下错误：

`PHP Warning: PHP Startup: Unable to load dynamic library '/opt/local/lib/php/extensions/php_curl.dll`

php_curl.dll 文件在上述目录中不存在，我找不到任何合法的下载位置（似乎不包含在 PHP 或 Curl 中）。

* * *

**更新**
按照[此处](https://stackoverflow.com/questions/6523504/php-warning-unable-to-load-dynamic-library)答案中提供的步骤，我能够编译一个新的 php_curl.so 文件并将其安装到扩展目录。

致敬[弗朗索瓦·德申斯](https://stackoverflow.com/users/577300/francois-deschenes)！！

从头开始编译 curl.so (php_curl.dll) 模块：

1.  下载并提取您的 PHP 版本的新副本。
2.  打开一个终端窗口并转到 curl 目录（类型`cd php-5.3.3/ext/curl/`）。
3.  键入`phpize`。
4.  键入`./configure`。
5.  键入`make`。
6.  键入`sudo make install`。
7.  `extension=curl.so`在您的 php.ini 中取消注释。

您还应该确保在开始进程之前将扩展名注释掉，否则您可能会收到有关模块已存在的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T11:34:48.823

为什么不使用

```
sudo port install php5-curl 
```

（在 php54 上：php54-curl）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-19T02:28:18.330

使用以下 URL 下载“端口”并安装它：

[http://www.macports.org/install.php](http://www.macports.org/install.php)

有不同的版本，您可以为您的 Mac 版本选择一个安装包。

安装完成后，打开终端，输入以下命令直接安装，

```
$ sudo port install php5-curl 
```

否则 - 只需键入即可登录端口终端

```
$ sudo port 
```

并输入

```
> install php5-curl 
```

安装所有依赖项需要几分钟，最后您将看到以下消息

```
--->  No broken files found. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T01:27:50.453

按照[此处](https://stackoverflow.com/questions/6523504/php-warning-unable-to-load-dynamic-library)答案中提供的步骤，我能够编译一个新的 php_curl.so 文件并将其安装到扩展目录中。

致敬[弗朗索瓦·德申斯](https://stackoverflow.com/users/577300/francois-deschenes)！！

从头开始编译 curl.so (php_curl.dll) 模块：

1.  下载并提取您的 PHP 版本的新副本。
2.  打开一个终端窗口并转到 curl 目录（类型`cd php-5.3.3/ext/curl/`）。
3.  键入`phpize`。
4.  键入`./configure`。
5.  键入`make`。
6.  键入`sudo make install`。
7.  `extension=curl.so`在您的 php.ini 中取消注释。

您还应该确保在开始进程之前将扩展名注释掉，否则您可能会收到有关模块已存在的错误。

# frameworks - 哪个框架最适合 Selenium Webdriver

> ID：11241483
> 
> 赞同：1
> 
> 时间：2012-06-28T09:16:08.370
> 
> 标签：frameworks, selenium, webdriver

我开始使用 Selenium webdriver 通过使用 JAVA 为主要在 Chromedriver 上的 ajax 网站编写自动测试脚本。该网站使用HTML 5编码。它实际上是一个主要用于iphone，android等移动设备的网站。

我不知道该选择哪个框架。我看到了TestNG，JUnit。有人建议我使用健身。

我对选择合适的框架感到困惑。

谁能给我一些建议？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:11:58.647

这是一个关于意见的问题，没有明确的答案。您应该选择最适合您的框架。

[JUnit](http://www.junit.org/)通常（在我看来）被认为是 Java 测试的更标准，并且通常集成到 Java IDE 中，但是[TestNG](http://testng.org/doc/index.html)具有一些人们可能喜欢的高级特性（而且它的集成通常也很容易）。[FitNesse](http://fitnesse.org/)是一个不同的故事，其中的测试编写方式完全不同。在 JUnit 和 TestNG 中，您使用纯 Java 编写测试用例，但 FitNesse 的工作方式……不同。这是迄今为止最不常见的。

所有这些框架都可以很好地与 Selenium 配合使用，您可以[在 Internet](https://www.google.com/search?q=webdriver%20fitnesse%20example)上找到[所有](https://www.google.com/search?q=webdriver%20testng%20example)这些框架的[示例](https://www.google.com/search?q=webdriver%20junit%20example)。

如果你真的刚开始使用 WebDriver 和 Java，请选择 JUnit，因为它的使用不会在很长一段时间内限制你，而且[很容易从](http://junit.sourceforge.net/doc/cookbook/cookbook.htm).

# python - 删除 cStringIO.StringIO 的使用部分

> ID：11241484
> 
> 赞同：1
> 
> 时间：2012-06-28T09:16:09.500
> 
> 标签：python, string, exception

```
import os, sys
from cStringIO import StringIO
import traceback

old_stdErr = sys.stderr
sys.stderr = mystdErr = StringIO()

try:
    p = 100/0
except Exception:
     traceback.print_exc(file=sys.stderr)

print mystdErr.getvalue()             ### -- 1st Print statement 

try:
   q = 100/0
except Exception:
   traceback.print_exc(file = sys.stderr)

print mystdErr.getvalue()             ### -- 2nd Print statement 
```

这段代码..输出将是什么

### 第一个打印语句的输出

回溯（最近一次调用最后）：文件“C:\Users\manojtut\Desktop\untitled-1.py”，第 9 行，在 p = 100/0 ZeroDivisionError：整数除法或模除以零

### 第二个打印语句的输出

Traceback（最近一次调用最后一次）：文件“C:\Users\manojtut\Desktop\untitled-1.py”，第 9 行，在 p = 100/0 ZeroDivisionError：整数除法或模除以零 Traceback（最近一次调用最后一次） ：文件“C:\Users\manojtut\Desktop\untitled-1.py”，第 16 行，在 q = 100/0 ZeroDivisionError：整数除法或模除以零

如您所见，在第一个 zerodivision 遇到的异常正在我不想要的第二个 print 语句中再次打印。我可以以某种方式消除/清除第一个异常回溯，以便只能在第二个打印语句中打印第二个异常的回溯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:47:33.303

添加这个：

```
mystdErr.reset()
mystdErr.truncate() 
```

在第二块之前。`reset`将文件位置重置为开头并从那里开始写入。`truncate`删除当前位置之后的所有数据。如果省略 'truncate' - 流中的数据将被后续写入覆盖。

# javascript - 使用 jquery cookie 插件在回发之间保持节点状态

> ID：11241487
> 
> 赞同：0
> 
> 时间：2012-06-28T09:16:11.003
> 
> 标签：javascript, jquery

我有以下 html 表

```
 <table id="{64ED3A94-5833-4CC7-869F-CCE583B498BE}" class="ms-listviewtable"
            width="100%" cellspacing="0" cellpadding="1" border="0" 
            xmlns:o="urn:schemas-microsoft-com:office:office" dir="none">
       <tbody id="tbod23-1__" isloaded="true" style="display: none;"></tbody>
       <tbody id="tbod23-2__" isloaded="true" style=""></tbody>
       <tbody id="tbod23-3__" isloaded="true" style="display: none;"></tbody>
       <tbody id="tbod23-4__" isloaded="true" style=""></tbody>
       <tbody id="tbod23-5__" isloaded="true" style="display: none;"></tbody>
       <tbody id="tbod23-6__" isloaded="true" style="display: none;"></tbody>
       <tbody id="tbod23-7__" isloaded="true" style="display: none;"></tbody>
    </table> 
```

此表由共享点 xsltlistviewwebpart 自动生成（由于问题与 jquery+html 相关，因此未在共享点中发布）。

这是一个带有节点的树视图，当我展开一个折叠的节点时，它会改变样式

```
style="display: none;" 
```

到

```
style="" 
```

问题：webpart 不记得哪些节点被折叠了，所以在每次回发时，它都会将所有节点重置为展开状态。我需要做的是记住 jquery cookie 中的节点状态（展开或折叠），并在回发时检索它（因此，保持节点状态）。

到目前为止，我得到了：

```
<script type="text/javascript">
_spBodyOnLoadFunctionNames.push("RememberClickedState");

function RememberClickedState()
{
var dv = $('.ms-listviewtable');
var items = [];
items = dv.find('tbody[id^="tbod"]');
$.cookie("itemListState", items);
    alert(items[0]);
    alert(items[1]);
 }

 </script> 
```

谁能提供一些有关如何执行此操作的指示。我对事件本身有点茫然和困惑，在 page_load 上我应该保存 cookie，但也应该以某种方式检索它。

“items”数组也存储了所有 7 个元素，这很好，但是当我尝试 alert(items[0]); 我不确定。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:51:27.040

我建议你创建这个字符串，然后解析这个字符串......有点像这样：

```
var items = '';
function RememberClickedState() {
    $('.ms-listviewtable tbody').each(function(){
        tid = $(this).attr('id');
        tvisible = $(this).is(':visible');
        items += tid+':'+tvisible+','
    })
    //$.cookie("itemListState", items);
    $('body').append(items+'<br/>');
}
function RestoreClickedState() {
    //string = $.cookie("itemListState")
    var string = items; //temporary
    var cookies = string.split(',');
    $.each(cookies, function(i, val){
        val = val.split(':');
        show = (val[1] == 'true' ? true:false);
        item = $('.ms-listviewtable').find('#'+val[0]);
        show ? item.show() : item.hide();
        $('body').append('#'+val[0]+' is '+ 'display:'+show+'<br/>');
    })
}
$(document).ready(function(){
    RememberClickedState();
    RestoreClickedState();
}) 
```

这是演示：http: [//jsfiddle.net/MYexv/3/](http://jsfiddle.net/MYexv/3/)

# css - 字体显示有什么区别

> ID：11241490
> 
> 赞同：0
> 
> 时间：2012-06-28T09:16:18.953
> 
> 标签：css, blackberry, browser, fonts, styles

我正在尝试模仿应用程序中使用的字体。我相信我已经尝试了所有CSS 属性，但`font-*`与`text-*`原始应用程序的文本（底部）相比，我的文本（顶部）显得模糊

浏览器：黑莓加粗浏览器

![在此处输入图像描述](../Images/98adc8ed2132260efc9a6fdf1f1ab847.png)

我应该应用什么 CSS 来使我的顶部文本看起来类似于下面的一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:42:34.830

事实证明，`data-position="fixed"`在标题上使用 JQueryMobile 导致了这种模糊性。删除此选项使字体绝对清晰，当然；标题滚开。

# jsf-2 - JSF - SelectItem - 并转换为 &

> ID：11241491
> 
> 赞同：0
> 
> 时间：2012-06-28T09:16:20.003
> 
> 标签：jsf-2

我正在使用`<f:selectItem>`. 它填充了一个值“a 和 b”。In the dropdown list, the value is shown as 'a and b', but when this value is selected, it gets converted to 'a '& amp ;' b'。

xhtml:

```
<f:selectItems name="motivationType" 
               id="motivationTypeOptions"
               value="#{promotionDetailManagedBean.motivationTypeSelectList}">
</f:selectItems> 
```

豆 ：

```
private List<SelectItem> motivationTypeSelectList; 
```

列表的元素填充为

```
selectItemList.add(new SelectItem(key.toString(), paramMap.get(key))); 
```

其中 paramMap 是地图

如何禁用此转换？

# mysql - MySQL：选择逗号分隔列表的第一个元素

> ID：11241492
> 
> 赞同：6
> 
> 时间：2012-06-28T09:16:20.767
> 
> 标签：mysql, sql, split

不幸的是，我有一个字段列，其中包含如下值

*   4
*   12,3
*   8,5,6,7

我将编写一个 SELECT 语句，其结果将是：

*   4
*   12
*   8

由于 MySQL 不提供“拆分”功能，我该如何在实践中做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-28T09:21:11.033

使用 MySQL 的[`SUBSTRING_INDEX`](http://dev.mysql.com/doc/en/string-functions.html#function_substring-index)功能：

```
SELECT SUBSTRING_INDEX(field, ',', 1) 
```

但是，将列表保存在分隔符分隔的字符串中通常是对 MySQL 等关系数据库管理系统的低效使用：通过将此类列表保存在单独的成对表中来[规范化](http://en.wikipedia.org/wiki/Database_normalization)数据结构通常会更好。`(id, value)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T09:22:09.997

您可以使用 MySQL 函数[SUBSTRING_INDEX(str,delim,count)](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)

```
SELECT SUBSTRING_INDEX(value,',',1) As value FROM ... 
```

# c++ - 多重继承，选择调用哪个虚函数

> ID：11241494
> 
> 赞同：1
> 
> 时间：2012-06-28T09:16:23.573
> 
> 标签：c++, multiple-inheritance, virtual-functions

我有以下代码示例：

```
class A
{
public:
    A(int a):AA(a) {};

    int AA;

    virtual int Test() 
    {
        return AA;
    };
};

class B
{
public:
    B(int b):BB(b) {};

    int BB;

    virtual int Test() 
    {
        return BB;
    };
};

class C:public A, public B
{
public:
    C(int a, int b, int c) :A(a),B(b),CC(c) {};

    int CC;
};

int main()
{
    A *a = new C(1,2,3);
    B *b = new C(1,2,3);
    C *c = new C(1,2,3);

    int x = a->Test() ; // this is 1
    int y = b->Test() ; // this is 2
//  int z = c->Test() ; // this does not compile

    return 0;
} 
```

我期望对 a->Test() 和 b->Test() 的调用也是模棱两可的，因为对象 a 是 C，因此从 A 和 B 继承，它们都具有相同的 Test() 函数。但是，它们都调用对应于 delcared 类型的实现，而不是对象实际的类型。

谁能解释为什么这些电话不模棱两可？C++ 总是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:35:39.080

事实上，一个 C 实例既是一个完整的 A 实例又是一个完整的 B 实例（因此拥有 A 方法和 B 方法的副本）

由于 a 是 A* ，编译器将使用 C 实例内部的 A 虚拟表副本 由于 b 是 B* ，编译器将使用 C 实例内部的 B 虚拟表副本

您不能使用 C*，因为编译器现在不会调用您要调用的 A 或 B 的哪个 Test() 方法（因为 C 类同时包含 A::Test 和 B::Test 符号）

如果你实现了一个 C::Test() 方法，那么它将被调用而不是 A::Test() 和 B::Test() 因为方法对于 A 和 B 都是虚拟的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:19:20.327

因为`A`对 的存在一无所知`C`。

考虑一个稍微不同的场景：

**foo.h**

```
class A { public: virtual void Test() {} };

void myFunction(A *a); 
```

**foo.cpp**

```
#include "foo.h"

void myFunction(A *a) {
    a->Test();
} 
```

你会期望这个编译，我猜？但是如果我后来独立地从 A 继承，那会影响这段代码是否编译吗？

# java - iPhone 中的 RESTful Java Web 服务

> ID：11241497
> 
> 赞同：-2
> 
> 时间：2012-06-28T09:16:43.670
> 
> 标签：java, iphone, rest

我需要实现一些 Java 网络服务，有没有在 iPhone 上运行良好的 RESTful Java API？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:19:11.887

这个问题是对这将如何工作的一个很大的误解。

一个安静的 web 服务位于服务器上，iphone 只会向它发送一个 http 请求，请求来自 iphone 的事实与设置没有区别。

这是一个很好的链接，可以开始编写一般的 Web 服务。

[http://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:20:11.230

iPhone 上没有 Java。

但是，如果您正在寻找与 REST Web 服务通信的 API，您可以使用`ASIHTTPRequest`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:22:17.250

这将帮助您更多[教程：获取和解析 JSON](http://www.touch-code-magazine.com/tutorial-fetch-and-parse-json/)

# sql-server - 为什么 SQL Server 不将此代码视为不稳定的？

> ID：11241501
> 
> 赞同：8
> 
> 时间：2012-06-28T09:16:52.697
> 
> 标签：sql-server

这实际上不是我面临的问题。但我只是想知道下面编写的代码中的第一行应该被 SQL Server 视为语法错误，因为列列表末尾有额外的逗号 (,)。但它运行代码很好。有谁知道原因？

```
CREATE TABLE #TEMP(COL1 INT,COL2 VARCHAR,)    
INSERT INTO #TEMP VALUES (1,'A')    
SELECT * FROM #TEMP    
DROP TABLE #TEMP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:27:04.333

它应该被标记为语法错误，但 SQL Server 中存在一个错误，它不会将尾随逗号视为语法错误。

资料来源：[Microsoft 支持](http://support.microsoft.com/kb/161592)（列表中受影响的版本 - 6、6.5 和 2000 - 是旧的，但我想它仍然存在，因为它在 2008 年才对我有用。）

# bash - 使用 gnu-find 的退出状态测试文件是否存在

> ID：11241506
> 
> 赞同：2
> 
> 时间：2012-06-28T09:17:17.067
> 
> 标签：bash, find, file-exists

当`test -e file`不够灵活时，我倾向于使用以下 Bash 习惯用法来检查文件是否存在：

```
if [ -n "$(find ${FIND_ARGS} -print -quit)" ] ; then
   echo "pass"
else
   echo "fail"
fi 
```

但由于我只对布尔值感兴趣，有什么`${FIND_ARGS}`可以让我代替的：

```
if find ${FIND_ARGS} ; ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:07:09.150

我会说不。`man find`...

> 如果所有文件都处理成功，find 以状态 0 退出，如果发生错误，则大于 0。这是特意做一个很笼统的描述，但是如果返回值不为零，就不要依赖 find 结果的正确性。

测试输出可能适合查找。这不是“Bash 习惯用法”。如果这还不够好并且您有可用的 Bash，那么您可以使用*extglobs*和可能的*globstar*进行文件匹配测试`[[`。Find 应该只用于复杂的递归文件匹配，或实际搜索文件，以及其他使用 Bash 功能无法轻松完成的事情。

# android - 加载 WebView 时的 Android ProgessBar

> ID：11241513
> 
> 赞同：55
> 
> 时间：2012-06-28T09:18:00.267
> 
> 标签：android, android-asynctask, android-webview, android-progressbar

在我的应用程序中，我有一个`WebView`从互联网加载任何 URL。现在，有时由于网络速度较慢，页面需要很长时间才能加载，用户只能看到一个空白屏幕。

我想显示加载的`ProgressBar`时间`WebView`并隐藏完全加载的`ProgessBar`时间。`WebView`

我知道如何使用`ProgressBar`and `AsyncTask`s，但这是我的问题。

这是我用来加载我的`WebView`.

```
 mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.setWebViewClient(new HelloWebViewClient());
    mWebView.loadUrl(web_URL); 
```

这是我的自定义`WebViewClient`课程

```
private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
} 
```

现在，如果我尝试**显示`ProgressBar`using `AsyncTask`s**那么我想我将不得不提供代码以在`doInBackGround()`my 的函数中加载 URL`AsyncTask`并显示该函数的进度`onProgressUpdate()`。

但是，我如何在 doInBackground() 中加载 URL，因为**doInBackground()**在**非 UI 线程**上运行，我将无法在`mWebView.loadUrl(web_URL)`其中使用。

有什么建议么？我错过了一些明显的东西吗？请指导我。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-28T09:22:11.563

检查源代码。帮助您并解决您的问题...

```
public class AppWebViewClients extends WebViewClient {
     private ProgressBar progressBar;

    public AppWebViewClients(ProgressBar progressBar) {
        this.progressBar=progressBar;
        progressBar.setVisibility(View.VISIBLE);
    }
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub
        view.loadUrl(url);
        return true;
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        // TODO Auto-generated method stub
        super.onPageFinished(view, url);
        progressBar.setVisibility(View.GONE);
    }
} 
```

我认为它对你有帮助。

谢谢。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-28T09:24:23.397

> 我想在 webView 加载时显示一个 progressBar，并在 webView 完全加载时隐藏 progessBar。

以下代码段将为您提供帮助。

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <WebView android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />
</LinearLayout> 
```

**主类**

```
public class Main extends Activity {
    private WebView webview;
    private static final String TAG = "Main";
    private ProgressDialog progressBar;

    /** Called when the activity is first created. */@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.main);

        this.webview = (WebView) findViewById(R.id.webview);

        WebSettings settings = webview.getSettings();
        settings.setJavaScriptEnabled(true);
        webview.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

        final AlertDialog alertDialog = new AlertDialog.Builder(this).create();

        progressBar = ProgressDialog.show(Main.this, "Showing ProgressDialog", "Loading...");

        webview.setWebViewClient(new WebViewClient() {
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                Log.i(TAG, "Processing webview url click...");
                view.loadUrl(url);
                return true;
            }

            public void onPageFinished(WebView view, String url) {
                Log.i(TAG, "Finished loading URL: " + url);
                if (progressBar.isShowing()) {
                    progressBar.dismiss();
                }
            }

            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Log.e(TAG, "Error: " + description);
                Toast.makeText(Main.this, "Oh no! " + description, Toast.LENGTH_SHORT).show();
                alertDialog.setTitle("Error");
                alertDialog.setMessage(description);
                alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        return;
                    }
                });
                alertDialog.show();
            }
        });
        webview.loadUrl("http://www.google.com");
    }
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-10-30T20:28:48.403

用这种方法传递你的网址

```
private void startWebView(String url) {

            WebSettings settings = webView.getSettings();

            settings.setJavaScriptEnabled(true);
            webView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY);

            webView.getSettings().setBuiltInZoomControls(true);
            webView.getSettings().setUseWideViewPort(true);
            webView.getSettings().setLoadWithOverviewMode(true);

            progressDialog = new ProgressDialog(ContestActivity.this);
            progressDialog.setMessage("Loading...");
            progressDialog.show();

            webView.setWebViewClient(new WebViewClient() {
                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    view.loadUrl(url);
                    return true;
                }

                @Override
                public void onPageFinished(WebView view, String url) {
                    if (progressDialog.isShowing()) {
                        progressDialog.dismiss();
                    }
                }

                @Override
                public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                    Toast.makeText(ContestActivity.this, "Error:" + description, Toast.LENGTH_SHORT).show();

                }
            });
            webView.loadUrl(url);
        } 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-05-19T18:08:49.187

如果您想在每次用户加载页面（而不仅仅是第一次加载）时显示进度条，那么您可以使用这个：

MainActivity.java

```
public class MainActivity extends Activity
{
    private WebView webView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        webView = (WebView) findViewById(R.id.webView);

        final ProgressDialog progressBar = new ProgressDialog(MainActivity.this);
        progressBar.setMessage("Please wait...");

        webView.loadUrl("https://example.org/");
        webView.setWebViewClient(new WebViewClient() {
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                super.onPageStarted(view, url, favicon);
                if (!progressBar.isShowing()) {
                    progressBar.show();
                }
            }

            public void onPageFinished(WebView view, String url) {
                if (progressBar.isShowing()) {
                    progressBar.dismiss();
                }
            }

            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                if (progressBar.isShowing()) {
                    progressBar.dismiss();
                }
            }
        });

    }
} 
```

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="0dp"
    android:paddingLeft="0dp"
    android:paddingRight="0dp"
    android:paddingTop="0dp"
    tools:showIn="@layout/activity_main">

    <WebView
        android:id="@+id/webView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentEnd="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentStart="true"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-02-06T13:48:13.507

1.  使用[WebChromeClient](https://stackoverflow.com/a/8467430/2914140)：

    ```
    webView.webChromeClient = object: WebChromeClient() {
        override fun onProgressChanged(view: WebView?, newProgress: Int) {
            super.onProgressChanged(view, newProgress)

            progressBar?.isVisible = newProgress < 100
            progressBar?.progress = newProgress
        }
    } 
    ```

在这种情况下，您甚至可以显示确定的进度条。

2.  使用`WebViewClient`：

    ```
     String url = "https://stackoverflow.com/questions/11241513/android-progessbar-while-loading-webview";
     setProgressBarVisibility(View.VISIBLE);

     webView.setWebViewClient(new WebViewClient() {
         @Override
         public void onPageStarted(WebView view, String url, Bitmap favicon) {
             super.onPageStarted(view, url, favicon);
             setProgressBarVisibility(View.VISIBLE);
         }

         @Override
         public void onPageFinished(WebView view, String url) {
             super.onPageFinished(view, url);
             setProgressBarVisibility(View.GONE);
         }

         @Override
         public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {
             super.onReceivedError(view, request, error);
             setProgressBarVisibility(View.GONE);
         }
     });

     webView.loadUrl(url); 
    ```

还添加方法：

```
 private void setProgressBarVisibility(int visibility) {
        // If a user returns back, a NPE may occur if WebView is still loading a page and then tries to hide a ProgressBar.
        if (progressBar != null) {
            progressBar.setVisibility(visibility);
        }
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-12-27T08:11:50.900

```
 @SuppressLint("SetJavaScriptEnabled")
private void init() {
    webView = (WebView) findViewById(R.id.kamal);
    webView.setBackgroundColor(0);
    webView.getSettings().setJavaScriptEnabled(true);
    progressDialog = new ProgressDialog(WebView_Ofline.this);
    progressDialog.setMessage("Loading Please wait...");
    progressDialog.setCancelable(false);
    progressDialog.show();
    webView.setWebViewClient(new WebViewClient() {
        public void onPageFinished(WebView view, String url) {
            try {
                progressDialog.dismiss();
            } catch (Exception e) {
                e.printStackTrace();

            }
        }

    });
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-01T08:28:58.270

```
 myThanh.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();

    progressBar = ProgressDialog.show(MainActivity.this,"Đang tải dữ liệu",  "Vui lòng chờ...");

    myThanh.setWebViewClient(new WebViewClient() {

        public void onPageFinished(WebView view, String url) {
            if (progressBar.isShowing()) {
                progressBar.dismiss();
            }
        }
    }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-04T00:16:16.370

这个简单的解决方案在**KOTLIN**中对我有用：

```
private fun setupWebView() {

    val webViewClient: WebViewClient = object: WebViewClient() {

        override fun shouldOverrideUrlLoading(view: WebView?, request: WebResourceRequest?): Boolean {
            view?.loadUrl(request?.url.toString())
            return super.shouldOverrideUrlLoading(view, request)
        }

        override fun onPageStarted(view: WebView?, url: String?, favicon: Bitmap?) {
            showProgressDialog()
            super.onPageStarted(view, url, favicon)
        }

        override fun onPageFinished(view: WebView?, url: String?) {
            hideProgressDialog()
            super.onPageFinished(view, url)
        }
    }
    webView.webViewClient = webViewClient

    webView.settings.javaScriptEnabled = true
    webView.settings.defaultTextEncodingName = "utf-8"
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-17T04:31:12.230

我尝试在方法 onPageFinished() 上取消进度，但效果不佳，渲染 webview 有时间延迟。

尝试使用 onPageCommitVisible() 更好：

```
val progressBar = ProgressDialog(context)
    progressBar.setCancelable(false)
    progressBar.show()

    web_container.webViewClient = object : WebViewClient() {
        override fun shouldOverrideUrlLoading(view: WebView, url: String): Boolean {
            view.loadUrl(url)
            progressBar.show()
            return true
        }

        override fun onPageCommitVisible(view: WebView?, url: String?) {
            super.onPageCommitVisible(view, url)
            progressBar.dismiss()
        }
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-30T06:50:49.637

将此粘贴到您的代码中并添加您的 URL

```
 var progressDialog: ProgressDialog? = null

private fun startWebView(url: String) {

    val settings = webView.getSettings()

    settings.setJavaScriptEnabled(true)
    webView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY)

    webView.getSettings().setBuiltInZoomControls(true)
    webView.getSettings().setUseWideViewPort(true)
    webView.getSettings().setLoadWithOverviewMode(true)

    progressDialog = ProgressDialog(this)
    progressDialog!!.setMessage("Loading...")
    progressDialog!!.show()

    webView.setWebViewClient(object : WebViewClient() {
        override fun shouldOverrideUrlLoading(view: WebView, url: String): Boolean {
            view.loadUrl(url)
            return true
        }

        override fun onPageFinished(view: WebView, url: String) {
            if (progressDialog!!.isShowing()) {
                progressDialog!!.dismiss()
            }
        }

        override fun onReceivedError(view: WebView, errorCode: Int, description: String, failingUrl: String) {
            Toast.makeText(this@MainActivity, "Error:$description", Toast.LENGTH_SHORT).show()

        }
    })
    webView.loadUrl(url)
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-10-04T14:04:32.837

你可以使用类似的东西：

```
override fun onPageStarted(view: WebView?, url: String?, favicon: Bitmap?) {
    super.onPageStarted(view, url, favicon)
    binding.pbLoader.visibility = ProgressBar.VISIBLE
}

override fun onPageCommitVisible(view: WebView?, url: String?) {
    super.onPageCommitVisible(view, url)
    binding.pbLoader.visibility = ProgressBar.GONE
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-27T08:08:45.907

```
 WebView webView;
ProgressDialog progressDialog;

TextView text;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_web_view);

    String message = getIntent().getStringExtra("key").toString();
    setTitle(message);
    Bundle isNetworkAvailable = getIntent().getExtras();

    String value = "file:///android_asset/n/o/i/no_connection.html";
    if (isNetworkAvailable()) {
        value = isNetworkAvailable.getString("keyHTML");
    }
    webView = (WebView) findViewById(R.id.kamal);
    webView.loadUrl(value);
    init();
}

private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null && activeNetworkInfo.isConnected();
}

private void init() {
    webView = (WebView) findViewById(R.id.kamal);
    webView.getSettings().setBuiltInZoomControls(true);
    webView.setBackgroundColor(0);
    webView.getSettings().setJavaScriptEnabled(true);
    progressDialog = new ProgressDialog(WebView_Online.this);
    progressDialog.setMessage("Loading Please wait...");
    progressDialog.setCancelable(false);
    progressDialog.show();
    webView.setWebViewClient(new WebViewClient() {
        public void onPageFinished(WebView view, String url) {
            try {
                progressDialog.dismiss();
            } catch (Exception e) {
                e.printStackTrace();

            }
        }

    });
} 
```

# .net - 调用 Web 服务 401 时出错：未经授权

> ID：11241516
> 
> 赞同：2
> 
> 时间：2012-06-28T09:18:12.090
> 
> 标签：.net, web-services, iis-6

我明白了

> **请求失败，HTTP 状态 401：未授权**

我的 Web 服务是在 IIS6 上运行的 .NET 4。我的客户端是在 IIS6 上运行的 .NET 2

当我在本地主机上运行客户端和服务时，它可以工作。当我将服务移动到 Web 服务器时，出现上述错误。我已经设置了允许

我已经在 IIS 中尝试了匿名访问和集成 Windows 身份验证的所有组合 我可以通过浏览器访问 Web 服务并使用 Web Service Studio 调用它 好的，当我从另一个 .NET 服务调用时它不起作用

**更新**

我检查了 IUSR 帐户是否具有 NTFS 文件权限，并且还作为可以通过网络访问服务器的 USER 添加到本地安全策略中。

当我从 WebService Studio 调用时，它会发出两个请求，首先调用返回 401，然后再次调用传递“授权”并工作。见下文。所以由于某种原因，我的匿名访问不起作用。当我只勾选匿名访问并且未勾选集成 Windows 身份验证时，我什至无法从浏览器访问它

```
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://tempuri.org/HelloWorld"
Host: webdev1
Content-Length: 314
Expect: 100-continue
Connection: Keep-Alive

<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><HelloWorld xmlns="http://tempuri.org/"><echo>sd</echo></HelloWorld></soap:Body></soap:Envelope>

HTTP/1.1 401 Unauthorized
Content-Length: 1539
Content-Type: text/html
Server: Microsoft-IIS/6.0
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM
Date: Thu, 28 Jun 2012 12:26:33 GMT
Proxy-Support: Session-Based-Authentication 
```

呼叫 2（自动发生）

```
POST http://webdev1/CSHRService/CSHR.asmx HTTP/1.1
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://tempuri.org/HelloWorld"
Authorization: Negotiate YIILzQYGKwYBBQUCoIILwTCCC72gJDAiB/EG1WyqaLj3E67GA0......
Host: webdev1
Content-Length: 314
Expect: 100-continue

<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><HelloWorld xmlns="http://tempuri.org/"><echo>sd</echo></HelloWorld></soap:Body></soap:Envelope>
HTTP/1.1 200 OK
Date: Thu, 28 Jun 2012 12:26:34 GMT
Server: Microsoft-IIS/6.0
WWW-Authenticate: Negotiate oYGgMIGdoAMKAQChCwYJKoZIgvcSAQICooGIBI..
X-AspNet-Version: 4.0.30319
Cache-Control: private, max-age=0
Content-Type: text/xml; charset=utf-8
Content-Length: 360 
```

我调用服务的代码只是

```
 CSHRService cshrService = new CSHRService();
  string s = cshrService.HelloWorld("d"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:11:59.137

我的问题是IUSR帐户密码错误我只是更改了密码或创建了一个新帐户来运行应用程序池并修复了它。

# heroku - heroku push play 2 获取 buildpack 失败

> ID：11241518
> 
> 赞同：1
> 
> 时间：2012-06-28T09:18:15.363
> 
> 标签：heroku, playframework-2.0

它曾经工作过。问题是什么？

```
-----> Heroku receiving push
-----> Fetching custom buildpack... failed
 !     Heroku push rejected, error fetching custom buildpack

 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:my-heroku.git' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:19:08.207

看起来您正在使用无法检索的自定义构建包。如果您的应用不需要自定义 buildpack，则只需使用标准 Scala / Play 2 buildpack：

```
heroku config:add BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-scala.git 
```

这应该是 Play 2 应用程序的默认设置。

# php - 使用 Kohana 的 Auth 模块

> ID：11241520
> 
> 赞同：1
> 
> 时间：2012-06-28T09:18:20.237
> 
> 标签：php, kohana

好吧，已经快两个小时了，但我无法让 Kohana 3.1 Auth 模块正常工作。

我关注了这个博客： http: [//jdstraughan.com/post/auth-module-for-kohana-31-using-orm-driver](http://jdstraughan.com/post/auth-module-for-kohana-31-using-orm-driver)我能够弄清楚如何实现登录，但我对注册一无所知部分：如何在 Auth_schema 的表中插入？

我想我可能只需要扩展一些其他模型，但我不知道是哪个。我的另一个选择是手动使用`Auth::instance()->hash()`密码，但我不确定这是否是唯一的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:31:36.607

嗯，你得到什么样的错误？我使用这样的东西，一切都很好：

```
$user = ORM::factory('user');
$user->values($_POST);
$user->save(); 
```

Authe_schema 一样，Kohana 3.1

# python - 为什么 Python 代码在函数中运行得更快？

> ID：11241523
> 
> 赞同：892
> 
> 时间：2012-06-28T09:18:34.850
> 
> 标签：python, performance, profiling, benchmarking, cpython

```
def main():
    for i in xrange(10**8):
        pass
main() 
```

这段 Python 中的代码运行在（注：计时是用 Linux 中 BASH 中的 time 函数完成的。）

```
real    0m1.841s
user    0m1.828s
sys     0m0.012s 
```

但是，如果 for 循环没有放在函数中，

```
for i in xrange(10**8):
    pass 
```

然后它运行更长的时间：

```
real    0m4.543s
user    0m4.524s
sys     0m0.012s 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：681
> 
> 时间：2012-06-28T09:29:12.917

在函数内部，字节码是：

```
 2           0 SETUP_LOOP              20 (to 23)
              3 LOAD_GLOBAL              0 (xrange)
              6 LOAD_CONST               3 (100000000)
              9 CALL_FUNCTION            1
             12 GET_ITER            
        >>   13 FOR_ITER                 6 (to 22)
             16 STORE_FAST               0 (i)

  3          19 JUMP_ABSOLUTE           13
        >>   22 POP_BLOCK           
        >>   23 LOAD_CONST               0 (None)
             26 RETURN_VALUE 
```

在顶层，字节码是：

```
 1           0 SETUP_LOOP              20 (to 23)
              3 LOAD_NAME                0 (xrange)
              6 LOAD_CONST               3 (100000000)
              9 CALL_FUNCTION            1
             12 GET_ITER            
        >>   13 FOR_ITER                 6 (to 22)
             16 STORE_NAME               1 (i)

  2          19 JUMP_ABSOLUTE           13
        >>   22 POP_BLOCK           
        >>   23 LOAD_CONST               2 (None)
             26 RETURN_VALUE 
```

不同之处在于它[`STORE_FAST`](http://docs.python.org/library/dis.html#opcode-STORE_FAST)比 . 快（！）[`STORE_NAME`](http://docs.python.org/library/dis.html#opcode-STORE_NAME)。这是因为在一个函数中，`i`它是一个局部的，但在顶层它是一个全局的。

要检查字节码，请使用[`dis`模块](http://docs.python.org/library/dis.html)。我能够直接反汇编该函数，但要反汇编顶层代码，我必须使用[`compile`内置](http://docs.python.org/library/functions.html#compile)的.

* * *

## 回答 #2

> 赞同：573
> 
> 时间：2012-06-28T10:15:08.067

您可能会问*为什么*存储局部变量比存储全局变量更快。这是一个 CPython 实现细节。

请记住，CPython 被编译为解释器运行的字节码。编译函数时，局部变量存储在固定大小的数组（*不是*a `dict`）中，变量名称分配给索引。这是可能的，因为您不能动态地将局部变量添加到函数中。然后检索局部变量实际上是对列表的指针查找和引用计数的增加，`PyObject`这是微不足道的。

将此与全局查找 ( ) 进行对比，后者是涉及哈希等`LOAD_GLOBAL`的真正搜索。`dict`顺便说一句，这就是为什么您需要指定`global i`是否希望它是全局的：如果您曾经分配给范围内的变量，编译器将发出`STORE_FAST`s 来访问它，除非您告诉它不要这样做。

顺便说一句，全局查找仍然非常优化。属性查找`foo.bar`真的*很*慢！

这是关于局部变量效率的小[插图。](https://wiki.python.org/moin/PythonSpeed/PerformanceTips#Local_Variables)

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2015-04-05T18:45:34.743

除了局部/全局变量存储时间之外，**操作码预测**使函数更快。

正如其他答案所解释的，该函数`STORE_FAST`在循环中使用操作码。这是函数循环的字节码：

```
 >>   13 FOR_ITER                 6 (to 22)   # get next value from iterator
         16 STORE_FAST               0 (x)       # set local variable
         19 JUMP_ABSOLUTE           13           # back to FOR_ITER 
```

通常，当程序运行时，Python 会一个接一个地执行每个操作码，跟踪堆栈并在每个操作码执行后对堆栈帧进行其他检查。操作码预测意味着在某些情况下 Python 能够直接跳转到下一个操作码，从而避免了一些这种开销。

在这种情况下，每次 Python 看到`FOR_ITER`（循环的顶部）时，它都会“预测”`STORE_FAST`它必须执行的下一个操作码。然后 Python 会查看下一个操作码，如果预测正确，它会直接跳转到`STORE_FAST`. 这具有将两个操作码压缩为单个操作码的效果。

另一方面，`STORE_NAME`操作码在全局级别的循环中使用。当Python看到这个操作码时，它***不会*做出类似的预测。**相反，它必须回到评估循环的顶部，这对循环执行的速度有明显的影响。

为了提供有关此优化的更多技术细节，这里引用[`ceval.c`](https://hg.python.org/cpython/file/45b1ae1ef318/Python/ceval.c#l784)文件（Python 虚拟机的“引擎”）：

> 一些操作码往往成对出现，因此可以在运行第一个代码时预测第二个代码。例如， `GET_ITER`通常后面跟着`FOR_ITER`. 并且**`FOR_ITER`经常跟在`STORE_FAST`**or之后`UNPACK_SEQUENCE`。
> 
> 验证预测需要对寄存器变量与常数进行单次高速测试。如果配对良好，那么处理器自己的内部分支预测成功的可能性很高，从而导致到下一个操作码的过渡开销几乎为零。一个成功的预测可以避免 eval 循环，包括它的两个不可预测的分支，`HAS_ARG`test 和 switch-case。结合处理器的内部分支预测，成功`PREDICT`的效果是使两个操作码运行起来，就好像它们是结合了主体的单个新操作码一样。

我们可以在[`FOR_ITER`](https://hg.python.org/cpython/file/45b1ae1ef318/Python/ceval.c#l2493)操作码的源代码中看到预测的确切位置`STORE_FAST`：

```
case FOR_ITER:                         // the FOR_ITER opcode case
    v = TOP();
    x = (*v->ob_type->tp_iternext)(v); // x is the next value from iterator
    if (x != NULL) {                     
        PUSH(x);                       // put x on top of the stack
        PREDICT(STORE_FAST);           // predict STORE_FAST will follow - success!
        PREDICT(UNPACK_SEQUENCE);      // this and everything below is skipped
        continue;
    }
    // error-checking and more code for when the iterator ends normally 
```

该`PREDICT`函数扩展为，`if (*next_instr == op) goto PRED_##op`即我们只是跳转到预测操作码的开头。在这种情况下，我们跳到这里：

```
PREDICTED_WITH_ARG(STORE_FAST);
case STORE_FAST:
    v = POP();                     // pop x back off the stack
    SETLOCAL(oparg, v);            // set it as the new local variable
    goto fast_next_opcode; 
```

局部变量现在已设置，下一个操作码已准备好执行。Python 继续遍历 iterable 直到它到达末尾，每次都进行成功的预测。

[Python wiki 页面](https://wiki.python.org/moin/CPythonVmInternals)有更多关于 CPython 的虚拟机如何工作的信息。

# push-notification - 使用 phonegap 推送通知 - cordova 推送插件和 pushwoosh.com

> ID：11241529
> 
> 赞同：6
> 
> 时间：2012-06-28T09:19:09.500
> 
> 标签：push-notification

我已经测试过使用cordova-1.8.1.js 和push 插件与pushwoosh.com 一起发送推送通知，它应该可以正常工作。我遵循了本教程：[http ://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/](http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/)

推送通知发送到我的 iPhone，它会在手机和应用程序关闭时播放声音并显示通知，好！但是，如果我在通知可见时打开手机，则应用程序会按原样打开......但显示的警报是：Alert "push-notification","{\aps\":\sound\": \"default\",\"alert\":\" 然后是消息....\"}}"</p>

1.  那么有什么问题，它应该只在警报中写入消息而不是其余部分？

此外，如果我删除带有主页按钮的应用程序并重新启动它，我会收到另一个警报，上面写着“registerDevice”、“type”：“7”......等等。2\. 我怎样才能让它消失？

任何输入appeciate，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T10:45:56.097

问题解决了。使用它，它只会在警报中显示消息，而不会显示其他任何内容。

```
document.addEventListener('push-notification', function(event) {
    //console.warn('push-notification!: ' + event.notification);
    //navigator.notification.alert(JSON.stringify(['push-notification1!', event.notification]));
    var notification = JSON.parse(event.notification);
    navigator.notification.alert(notification.aps.alert);
    //pushNotification.setApplicationIconBadgeNumber(0);
    pushNotification.setApplicationIconBadgeNumber(0);
    }); 
```

# c# - 尝试初始化 CrystalReports ReportDocument 时出现异常

> ID：11241530
> 
> 赞同：0
> 
> 时间：2012-06-28T09:19:11.543
> 
> 标签：c#, crystal-reports, .net-2.0

我对 Crystal Reports 有一些问题。每当我尝试初始化 ReportDocument 或填充 ReportViewer 时，我都会遇到以下异常：

> System.TypeInitializationException: {"'CrystalDecisions.CrystalReports.Engine.ReportDocument' 的类型初始化器抛出异常。"}

这行代码产生异常：

```
CrystalDecisions.CrystalReports.Engine.ReportDocument repDoc = new CrystalDecisions.CrystalReports.Engine.ReportDocument(); 
```

我重新安装了 Crystal Reports，但没有任何结果。奇怪的是，它在我们周围的所有其他计算机上都能正常工作。

我还可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:33:20.747

以前发生过这种情况，对我来说，解决方案是我无意中卸载了 Crystal Reports Runtime。

您有一个 .net-2.0 标记，因此请尝试在文件中搜索“CRRedist2008_x86.msi”或 CRRedist2005_x86.msi，具体取决于您使用的 Visual Studio 版本

或重新下载：

*   Visual Studio 2010 运行时：[http ://scn.sap.com/docs/DOC-7824](http://scn.sap.com/docs/DOC-7824)
*   Visual Studio 2008 运行时：[http ://scn.sap.com/docs/DOC-27917](http://scn.sap.com/docs/DOC-27917)
*   Visual Studio 2005 运行时：[http ://scn.sap.com/docs/DOC-27942](http://scn.sap.com/docs/DOC-27942)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-14T06:05:13.023

对我来说，这是由于 Crystal Report 版本 13-0-22 运行时引擎的文件损坏所致。我为解决这个问题所做的是：

1.  卸载 CRforVS13_0_22
2.  卸载 CrRuntimeREngine13_0_22_64bit
3.  重启电脑
4.  安装 CRFORVS13_0_22
5.  安装 CRRuntimeEngine13_0_22
6.  安装 CrRuntimeEngine13_0_24（将 13_0_22 升级为 13_0_24）
7.  重启电脑
8.  在 VS 中打开解决方案
9.  清洁解决方案
10.  构建解决方案

它奏效了……

# iphone - 为 iPhone 应用重新启用定位服务

> ID：11241532
> 
> 赞同：5
> 
> 时间：2012-06-28T09:19:15.427
> 
> 标签：iphone, objective-c, core-location, cllocationmanager, permission-denied

我一直在为我的 iPhone 应用程序的定位服务请求而苦苦挣扎。如果用户说“不允许”，我就会陷入“这个应用程序需要定位服务才能工作”的状态......

所有重新申请定位服务的尝试都没有结果，这里的几个堆栈可以证明这一点。

然后我读到重新启用定位服务的唯一方法是使用以下命令将用户重定向到定位服务设置：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=LOCATION_SERVICES"]]; 
```

但即使这样似乎也不起作用（iPhone 4 和 4S，都在 5.1 上）

除了告诉用户去偏好然后引导他通过之外，真的没有其他方法吗？对我来说，它看起来如此笨重。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:31:03.067

如果用户关闭了定位服务，则没有其他方法可以告诉用户再次打开它们。

您可以尝试重定向，但这仅适用于 iOS 5.0。所以你可以这样做：

```
NSURL *prefsURL = [NSURL URLWithString:@"prefs:root=LOCATION_SERVICES"];

if ([[UIApplication sharedApplication] canOpenURL:prefsURL]) {
   [[UIApplication sharedApplication] openURL:prefsURL];
} else {
  // Can't redirect user to settings, display alert view
  UIAlertView *alertView = ....

} 
```

# c# - 在 .NET 上更快地解析数字

> ID：11241535
> 
> 赞同：23
> 
> 时间：2012-06-28T09:19:24.773
> 
> 标签：c#, performance, parsing, f#

我编写了两个函数，它们将一串以空格分隔的整数转换为一个 int 数组。第一个函数使用`Substring`然后应用于`System.Int32.Parse`将子字符串转换为`int`值：

```
let intsOfString (s: string) =
  let ints = ResizeArray()
  let rec inside i j =
    if j = s.Length then
      ints.Add(s.Substring(i, j-i) |> System.Int32.Parse)
    else
      let c = s.[j]
      if '0' <= c && c <= '9' then
        inside i (j+1)
      else
        ints.Add(s.Substring(i, j-i) |> System.Int32.Parse)
        outside (j+1)
  and outside i =
    if i < s.Length then
      let c = s.[i]
      if '0' <= c && c <= '9' then
        inside i (i+1)
      else
        outside (i+1)
  outside 0
  ints.ToArray() 
```

第二个函数遍历字符串的字符就地累加整数而不创建临时子字符串：

```
let intsOfString (s: string) =
  let ints = ResizeArray()
  let rec inside n i =
    if i = s.Length then
      ints.Add n
    else
      let c = s.[i]
      if '0' <= c && c <= '9' then
        inside (10*n + int c - 48) (i+1)
      else
        ints.Add n
        outside(i+1)
  and outside i =
    if i < s.Length then
      let c = s.[i]
      if '0' <= c && c <= '9' then
        inside (int c - 48) (i+1)
      else
        outside (i+1)
  outside 0
  ints.ToArray() 
```

以空格分隔的整数 1 到 1,000,000 为基准，第一个版本需要 1.5 秒，而第二个版本需要 0.3 秒。

解析此类值可能对性能至关重要，因此通过使用临时子字符串在表上保留 5 倍的性能可能是不可取的。解析整数很容易，但解析浮点数、小数和日期等其他值要困难得多。

那么，是否有内置函数可以直接从字符串中的子字符串解析（即使用给定的字符串开头和长度）以避免生成临时字符串？如果没有，是否有任何库提供有效的功能来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T12:31:08.153

`System.Int32.Parse`最慢，因为它使用了`CultureInfo`，`FormatInfo`等等；性能原因不在临时字符串中。

来自反射的代码：

```
private unsafe static bool ParseNumber(ref char* str, NumberStyles options, ref Number.NumberBuffer number, NumberFormatInfo numfmt, bool parseDecimal)
{
    number.scale = 0;
    number.sign = false;
    string text = null;
    string text2 = null;
    string str2 = null;
    string str3 = null;
    bool flag = false;
    string str4;
    string str5;
    if ((options & NumberStyles.AllowCurrencySymbol) != NumberStyles.None)
    {
        text = numfmt.CurrencySymbol;
        if (numfmt.ansiCurrencySymbol != null)
        {
            text2 = numfmt.ansiCurrencySymbol;
        }
        str2 = numfmt.NumberDecimalSeparator;
        str3 = numfmt.NumberGroupSeparator;
        str4 = numfmt.CurrencyDecimalSeparator;
        str5 = numfmt.CurrencyGroupSeparator;
        flag = true;
    }
    else
    {
        str4 = numfmt.NumberDecimalSeparator;
        str5 = numfmt.NumberGroupSeparator;
    }
    int num = 0;
    char* ptr = str;
    char c = *ptr;
    while (true)
    {
        if (!Number.IsWhite(c) || (options & NumberStyles.AllowLeadingWhite) == NumberStyles.None || ((num & 1) != 0 && ((num & 1) == 0 || ((num & 32) == 0 && numfmt.numberNegativePattern != 2))))
        {
            bool flag2;
            char* ptr2;
            if ((flag2 = (((options & NumberStyles.AllowLeadingSign) == NumberStyles.None) ? false : ((num & 1) == 0))) && (ptr2 = Number.MatchChars(ptr, numfmt.positiveSign)) != null)
            {
                num |= 1;
                ptr = ptr2 - (IntPtr)2 / 2;
            }
            else
            {
                if (flag2 && (ptr2 = Number.MatchChars(ptr, numfmt.negativeSign)) != null)
                {
                    num |= 1;
                    number.sign = true;
                    ptr = ptr2 - (IntPtr)2 / 2;
                }
                else
                {
                    if (c == '(' && (options & NumberStyles.AllowParentheses) != NumberStyles.None && (num & 1) == 0)
                    {
                        num |= 3;
                        number.sign = true;
                    }
                    else
                    {
                        if ((text == null || (ptr2 = Number.MatchChars(ptr, text)) == null) && (text2 == null || (ptr2 = Number.MatchChars(ptr, text2)) == null))
                        {
                            break;
                        }
                        num |= 32;
                        text = null;
                        text2 = null;
                        ptr = ptr2 - (IntPtr)2 / 2;
                    }
                }
            }
        }
        c = *(ptr += (IntPtr)2 / 2);
    }
    int num2 = 0;
    int num3 = 0;
    while (true)
    {
        if ((c >= '0' && c <= '9') || ((options & NumberStyles.AllowHexSpecifier) != NumberStyles.None && ((c >= 'a' && c <= 'f') || (c >= 'A' && c <= 'F'))))
        {
            num |= 4;
            if (c != '0' || (num & 8) != 0)
            {
                if (num2 < 50)
                {
                    number.digits[(IntPtr)(num2++)] = c;
                    if (c != '0' || parseDecimal)
                    {
                        num3 = num2;
                    }
                }
                if ((num & 16) == 0)
                {
                    number.scale++;
                }
                num |= 8;
            }
            else
            {
                if ((num & 16) != 0)
                {
                    number.scale--;
                }
            }
        }
        else
        {
            char* ptr2;
            if ((options & NumberStyles.AllowDecimalPoint) != NumberStyles.None && (num & 16) == 0 && ((ptr2 = Number.MatchChars(ptr, str4)) != null || (flag && (num & 32) == 0 && (ptr2 = Number.MatchChars(ptr, str2)) != null)))
            {
                num |= 16;
                ptr = ptr2 - (IntPtr)2 / 2;
            }
            else
            {
                if ((options & NumberStyles.AllowThousands) == NumberStyles.None || (num & 4) == 0 || (num & 16) != 0 || ((ptr2 = Number.MatchChars(ptr, str5)) == null && (!flag || (num & 32) != 0 || (ptr2 = Number.MatchChars(ptr, str3)) == null)))
                {
                    break;
                }
                ptr = ptr2 - (IntPtr)2 / 2;
            }
        }
        c = *(ptr += (IntPtr)2 / 2);
    }
    bool flag3 = false;
    number.precision = num3;
    number.digits[(IntPtr)num3] = '\0';
    if ((num & 4) != 0)
    {
        if ((c == 'E' || c == 'e') && (options & NumberStyles.AllowExponent) != NumberStyles.None)
        {
            char* ptr3 = ptr;
            c = *(ptr += (IntPtr)2 / 2);
            char* ptr2;
            if ((ptr2 = Number.MatchChars(ptr, numfmt.positiveSign)) != null)
            {
                c = *(ptr = ptr2);
            }
            else
            {
                if ((ptr2 = Number.MatchChars(ptr, numfmt.negativeSign)) != null)
                {
                    c = *(ptr = ptr2);
                    flag3 = true;
                }
            }
            if (c >= '0' && c <= '9')
            {
                int num4 = 0;
                do
                {
                    num4 = num4 * 10 + (int)(c - '0');
                    c = *(ptr += (IntPtr)2 / 2);
                    if (num4 > 1000)
                    {
                        num4 = 9999;
                        while (c >= '0' && c <= '9')
                        {
                            c = *(ptr += (IntPtr)2 / 2);
                        }
                    }
                }
                while (c >= '0' && c <= '9');
                if (flag3)
                {
                    num4 = -num4;
                }
                number.scale += num4;
            }
            else
            {
                ptr = ptr3;
                c = *ptr;
            }
        }
        while (true)
        {
            if (!Number.IsWhite(c) || (options & NumberStyles.AllowTrailingWhite) == NumberStyles.None)
            {
                bool flag2;
                char* ptr2;
                if ((flag2 = (((options & NumberStyles.AllowTrailingSign) == NumberStyles.None) ? false : ((num & 1) == 0))) && (ptr2 = Number.MatchChars(ptr, numfmt.positiveSign)) != null)
                {
                    num |= 1;
                    ptr = ptr2 - (IntPtr)2 / 2;
                }
                else
                {
                    if (flag2 && (ptr2 = Number.MatchChars(ptr, numfmt.negativeSign)) != null)
                    {
                        num |= 1;
                        number.sign = true;
                        ptr = ptr2 - (IntPtr)2 / 2;
                    }
                    else
                    {
                        if (c == ')' && (num & 2) != 0)
                        {
                            num &= -3;
                        }
                        else
                        {
                            if ((text == null || (ptr2 = Number.MatchChars(ptr, text)) == null) && (text2 == null || (ptr2 = Number.MatchChars(ptr, text2)) == null))
                            {
                                break;
                            }
                            text = null;
                            text2 = null;
                            ptr = ptr2 - (IntPtr)2 / 2;
                        }
                    }
                }
            }
            c = *(ptr += (IntPtr)2 / 2);
        }
        if ((num & 2) == 0)
        {
            if ((num & 8) == 0)
            {
                if (!parseDecimal)
                {
                    number.scale = 0;
                }
                if ((num & 16) == 0)
                {
                    number.sign = false;
                }
            }
            str = ptr;
            return true;
        }
    }
    str = ptr;
    return false;
}
public static int Parse(string s)
{
    return Number.ParseInt32(s, NumberStyles.Integer, NumberFormatInfo.CurrentInfo);
}

internal unsafe static int ParseInt32(string s, NumberStyles style, NumberFormatInfo info)
{
    byte* stackBuffer = stackalloc byte[1 * 114 / 1];
    Number.NumberBuffer numberBuffer = new Number.NumberBuffer(stackBuffer);
    int result = 0;
    Number.StringToNumber(s, style, ref numberBuffer, info, false);
    if ((style & NumberStyles.AllowHexSpecifier) != NumberStyles.None)
    {
        if (!Number.HexNumberToInt32(ref numberBuffer, ref result))
        {
            throw new OverflowException(Environment.GetResourceString("Overflow_Int32"));
        }
    }
    else
    {
        if (!Number.NumberToInt32(ref numberBuffer, ref result))
        {
            throw new OverflowException(Environment.GetResourceString("Overflow_Int32"));
        }
    }
    return result;
}

private unsafe static void StringToNumber(string str, NumberStyles options, ref Number.NumberBuffer number, NumberFormatInfo info, bool parseDecimal)
{
    if (str == null)
    {
        throw new ArgumentNullException("String");
    }
    fixed (char* ptr = str)
    {
        char* ptr2 = ptr;
        if (!Number.ParseNumber(ref ptr2, options, ref number, info, parseDecimal) || ((ptr2 - ptr / 2) / 2 < str.Length && !Number.TrailingZeros(str, (ptr2 - ptr / 2) / 2)))
        {
            throw new FormatException(Environment.GetResourceString("Format_InvalidString"));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T12:13:52.033

我已经为双打编写了这个，它不会创建临时子字符串。它打算在 JSON 解析器中使用，因此它限制了自己如何根据[http://www.json.org/](http://www.json.org/)在 JSON 中表示双精度数。

它还不是最佳的，因为它需要您知道数字的开始和结束位置（`begin`以及`end`参数），因此您必须遍历数字的长度两次才能找出它的结束位置。它仍然比它快 10-15 倍左右`double.Parse`，并且可以相当容易地修改它找到`end`函数内部，然后将其作为`out`参数返回，以了解您必须在哪里恢复解析主字符串。

像这样使用：

```
Parsers.TryParseDoubleFastStream("1", 0, 1, out j);
Parsers.TryParseDoubleFastStream("2.0", 0, 3, out j);
Parsers.TryParseDoubleFastStream("3.5", 0, 3, out j);
Parsers.TryParseDoubleFastStream("-4.5", 0, 4, out j);
Parsers.TryParseDoubleFastStream("50.06", 0, 5, out j);
Parsers.TryParseDoubleFastStream("1000.65", 0, 7, out j);
Parsers.TryParseDoubleFastStream("-10000.8600", 0, 11, out j); 
```

代码可以在这里找到：

[https://gist.github.com/3010984](https://gist.github.com/3010984)（在这里发布太长了）。

并且`StandardFunctions.IgnoreChar`对于我的目的来说很简单：

```
public static bool IgnoreChar(char c)
{
  return c < 33;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-06T22:46:39.147

将所有这些代码粘贴到 C# 中并调用`Test()`. 这与您可以直接在字符串数组上操作以使用 C# 解析数字一样接近。它是为速度而不是优雅而构建的。`ParseInt`and函数是为 OpenGL 图形引擎创建的`ParseFloat`，用于从基于文本的 3d 模型中导入矢量。解析浮点数是该过程中的一个重要瓶颈。这是我能做到的最快速度。

```
using System.Diagnostics;

    private void Test()
    {
        Stopwatch sw = new Stopwatch();
        StringBuilder sb = new StringBuilder();
        int iterations = 1000;

        // Build a string of 1000000 space separated numbers
        for (var n = 0; n < iterations; n++)
        {
            if (n > 0)
                sb.Append(' ');
            sb.Append(n.ToString());
        }

        string numberString = sb.ToString();

        // Time the process
        sw.Start();
        StringToInts(numberString, iterations);
        //StringToFloats(numberString, iterations);
        sw.Stop();
        long proc1 = sw.ElapsedMilliseconds;

        Console.WriteLine("iterations: {0} \t {1}ms", iterations, proc1);
    }

    private unsafe int[] StringToInts(string s, int length)
    {
        int[] ints = new int[length];
        int index = 0;
        int startpos = 0;

        fixed (char* pStringBuffer = s)
        {
            fixed (int* pIntBuffer = ints)
            {
                for (int n = 0; n < s.Length; n++)
                {
                    if (s[n] == ' ' || n == s.Length - 1)
                    {
                        if (n == s.Length - 1)
                            n++;
                        // pIntBuffer[index++] = int.Parse(new string(pStringBuffer, startpos, n - startpos));
                        pIntBuffer[index++] = ParseInt((pStringBuffer + startpos), n - startpos); 
                        startpos = n + 1;
                    }
                }
            }
        }

        return ints;
    }

    private unsafe float[] StringToFloats(string s, int length)
    {
        float[] floats = new float[length];
        int index = 0;
        int startpos = 0;

        fixed (char* pStringBuffer = s)
        {
            fixed (float* pFloatBuffer = floats)
            {
                for (int n = 0; n < s.Length; n++)
                {
                    if (s[n] == ' ' || n == s.Length - 1)
                    {
                        if (n == s.Length - 1)
                            n++;

                        pFloatBuffer[index++] = ParseFloat((pStringBuffer + startpos), n - startpos); // int.Parse(new string(pStringBuffer, startpos, n - startpos));
                        startpos = n + 1;
                    }
                }
            }
        }

        return floats;
    }

    public static unsafe int ParseInt(char* input, int len)
    {
        int pos = 0;           // read pointer position
        int part = 0;          // the current part (int, float and sci parts of the number)
        bool neg = false;      // true if part is a negative number

        int* ret = stackalloc int[1];

        while (pos < len && (*(input + pos) > '9' || *(input + pos) < '0') && *(input + pos) != '-')
            pos++;

        // sign
        if (*(input + pos) == '-')
        {
            neg = true;
            pos++;
        }

        // integer part
        while (pos < len && !(input[pos] > '9' || input[pos] < '0'))
            part = part * 10 + (input[pos++] - '0');

        *ret = neg ? (part * -1) : part;
        return *ret;
    }

    public static unsafe float ParseFloat(char* input, int len)
    {
        //float ret = 0f;      // return value
        int pos = 0;           // read pointer position
        int part = 0;          // the current part (int, float and sci parts of the number)
        bool neg = false;      // true if part is a negative number

        float* ret = stackalloc float[1];

        // find start
        while (pos < len && (input[pos] < '0' || input[pos] > '9') && input[pos] != '-' && input[pos] != '.')
            pos++;

        // sign
        if (input[pos] == '-')
        {
            neg = true;
            pos++;
        }

        // integer part
        while (pos < len && !(input[pos] > '9' || input[pos] < '0'))
            part = part * 10 + (input[pos++] - '0');

        *ret = neg ? (float)(part * -1) : (float)part;

        // float part
        if (pos < len && input[pos] == '.')
        {
            pos++;
            double mul = 1;
            part = 0;

            while (pos < len && !(input[pos] > '9' || input[pos] < '0'))
            {
                part = part * 10 + (input[pos] - '0');
                mul *= 10; 
                pos++;
            }

            if (neg)
                *ret -= (float)part / (float)mul;
            else
                *ret += (float)part / (float)mul;

        }

        // scientific part
        if (pos < len && (input[pos] == 'e' || input[pos] == 'E'))
        {
            pos++;
            neg = (input[pos] == '-'); pos++;
            part = 0;
            while (pos < len && !(input[pos] > '9' || input[pos] < '0'))
            {
                part = part * 10 + (input[pos++] - '0');
            }

            if (neg)
                *ret /= (float)Math.Pow(10d, (double)part);
            else
                *ret *= (float)Math.Pow(10d, (double)part);
        }

        return (float)*ret;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T11:53:43.000

> 那么，是否有内置函数可以直接从字符串中的子字符串解析（即使用给定的字符串开头和长度）以避免生成临时字符串？如果没有，是否有任何库提供有效的功能来做到这一点？

似乎您想使用词法分析缓冲区和词法分析器，类似于 OCaml 可以提供`ocamllex`的`Lexbuf`缓冲区。（我无法为 F# 提供参考。）

如果您的基准测试涉及由其他标记分隔的大量整数是您的典型情况，那么它将运行良好。但在其他情况下，这可能是不切实际的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T09:24:05.817

不确定这是否有好处，但是您是否尝试过类似的方法：

```
var stringValues = input.split(" ");

var intValues = Array.ConvertAll(stringValues, s => int.Parse(s)); 
```

# html - 如何使用 AJAX 同时编辑两个 div

> ID：11241539
> 
> 赞同：-1
> 
> 时间：2012-06-28T09:19:41.103
> 
> 标签：html, ajax, forms, jquery

谁能告诉我如何在编辑左侧文本字段并更新右侧文本字段时实现此功能。我的猜测是使用 AJAX。我也想用。我该怎么做。需要做什么。这是链接。[http://printbindaas.com/bjp](http://printbindaas.com/bjp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:21:37.437

只是普通的javascript。在`keyup`事件中，右 div 获得与左 div 相同的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:25:43.727

在每个输入上放置一个`data-`元素，该元素具有与之相关的 div 的 ID，即：

```
<input data-rel="name" type="text" name="name" />
<div id="name" />

$(':input').on('change keyup', function() {
    var rel = $(this).data('rel');
    if (rel) {
        $('#' + rel).text(this.value);
    }
}); 
```

或者，使用`name`输入字段：

```
<input type="text" name="name" />
<div id="field_name" />

$(':input').on('change keyup', function() {
     $('#field_' + this.name).text(this.value);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:25:42.867

给你 - [http://jsfiddle.net/JpUuk/](http://jsfiddle.net/JpUuk/)

HTML：

```
Name: <input type="text" id="name">
<div style="border: 1px solid black">Your name is: <span id="name_out"></span></div> 
```

JavaScript（使用 jQuery）：

```
$('#name').bind('keyup', function() {
    $('#name_out').html(this.value);
}) 
```

或者使用纯 JavaScript：

```
document.getElementById('name').onkeyup = function() {
    document.getElementById('name_out').innerHTML = document.getElementById('name').value;
}; 
```

# templates - 什么情况下 Knockout 原生模板会重新渲染

> ID：11241540
> 
> 赞同：1
> 
> 时间：2012-06-28T09:19:46.020
> 
> 标签：templates, knockout.js, knockout-2.0

我有一个复杂的淘汰页面，它有条件地呈现模板：

```
<!-- ko template: {'if': $root.itemToEdit.SomeObject() === $data, name: 'EditItemTemplate', afterRender: $root.initializeEditPanel } -->
<!-- /ko --> 
```

和模板：

```
<script type="text/html" id="EditItemTemplate">
    <div id="editContainer" class="fd_editContainer">
       //.. lots of markup and knockout bindings ...
       <input class="checkbox" id="questionDisplayOptionOverride" type="checkbox" data-bind="checked: $data.AnObject().ItemText.HasOverrideText" />
       //.. lots of markup and knockout bindings ...
     </div>
</script> 
```

这让我感到困惑。标记中有一堆元素会改变`$data`对象的属性。这些不会导致模板重新渲染。但是，由于某种原因，当单击某个复选框 ( `questionDisplayOptionOverride`) 时，会重新呈现完整模板并调用我的`afterRender`函数`$root.initializeEditPanel`。我不知道为什么会发生这种情况，因为`questionDisplayOptionOverride` 控件仅更改对象`computedObservable`内部的`$data`属性，而不是实际`$data`对象本身。

所以我的问题：

**在什么情况下模板会完全重新渲染？**

很明显，如果模板条件`'if': $root.itemToEdit.SomeObject() === $data`发生了变化，模板会重新渲染，但是还有其他条件会发生这种情况吗？

由于我的页面的复杂性，jsFiddle 不是一个选项。**我对导致模板重新渲染的一般机制更感兴趣。**

* * *

编辑：请参阅[afterRender 模板调用似乎是作为 computedObservables 执行的。为什么以及如何解决它？](https://stackoverflow.com/questions/11796223/the-afterrender-template-call-seems-to-be-executed-as-a-computedobservables-why)作为对此的后续问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:10:17.153

`$root.itemToEdit.SomeObject`您案例中的模板会在更改时重新呈现。如果它包含一个对象，那么仅仅改变它的一个属性是不够的。需要更新整个 observable 才能发生通知。

这是您的模板重新渲染的唯一方法，除了由于父模板而重新渲染之类的事情。

# c# - 访问外部信息的 DDD 方法

> ID：11241541
> 
> 赞同：1
> 
> 时间：2012-06-28T09:19:51.997
> 
> 标签：c#, .net, design-patterns, domain-driven-design, solid-principles

我有一个现有的银行应用程序类，如下所示。银行账户可以是 SavingsBankAccount 或 FixedBankAccount。有一个称为 IssueLumpSumInterest 的操作。对于 FixedBankAccount，仅当帐户所有者没有其他帐户时才需要更新余额。

这要求 FixedBankAccount 对象了解帐户所有者的其他帐户。如何通过遵循**SOLID** /DDD/GRASP/Information Expert 模式来做到这一点？

```
namespace ApplicationServiceForBank
{

public class BankAccountService
{
    RepositoryLayer.IRepository<RepositoryLayer.BankAccount> accountRepository;
    ApplicationServiceForBank.IBankAccountFactory bankFactory;

    public BankAccountService(RepositoryLayer.IRepository<RepositoryLayer.BankAccount> repo, IBankAccountFactory bankFact)
    {
        accountRepository = repo;
        bankFactory = bankFact;
    }

    public void IssueLumpSumInterest(int acccountID)
    {
        RepositoryLayer.BankAccount oneOfRepositroyAccounts = accountRepository.FindByID(p => p.BankAccountID == acccountID);

        int ownerID = (int) oneOfRepositroyAccounts.AccountOwnerID;
        IEnumerable<RepositoryLayer.BankAccount> accountsForUser = accountRepository.FindAll(p => p.BankUser.UserID == ownerID);

        DomainObjectsForBank.IBankAccount domainBankAccountObj = bankFactory.CreateAccount(oneOfRepositroyAccounts);

        if (domainBankAccountObj != null)
        {
            domainBankAccountObj.BankAccountID = oneOfRepositroyAccounts.BankAccountID;
            domainBankAccountObj.AddInterest();

            this.accountRepository.UpdateChangesByAttach(oneOfRepositroyAccounts);
            //oneOfRepositroyAccounts.Balance = domainBankAccountObj.Balance;
            this.accountRepository.SubmitChanges();
        }
    }
}

public interface IBankAccountFactory
{
    DomainObjectsForBank.IBankAccount CreateAccount(RepositoryLayer.BankAccount repositroyAccount);
}

public class MySimpleBankAccountFactory : IBankAccountFactory
{
    public DomainObjectsForBank.IBankAccount CreateAccount(RepositoryLayer.BankAccount repositroyAccount)
    {
        DomainObjectsForBank.IBankAccount acc = null;

        if (String.Equals(repositroyAccount.AccountType, "Fixed"))
        {
            acc = new DomainObjectsForBank.FixedBankAccount();
        }

        if (String.Equals(repositroyAccount.AccountType, "Savings"))
        {
            //acc = new DomainObjectsForBank.SavingsBankAccount();
        }

        return acc;
    }
}

}

namespace DomainObjectsForBank
{

public interface IBankAccount
{
    int BankAccountID { get; set; }
    double Balance { get; set; }
    string AccountStatus { get; set; }
    void FreezeAccount();
    void AddInterest();
}

public class FixedBankAccount : IBankAccount
{
    public int BankAccountID { get; set; }
    public string AccountStatus { get; set; }
    public double Balance { get; set; }

    public void FreezeAccount()
    {
        AccountStatus = "Frozen";
    }

    public void AddInterest()
    {
        //TO DO: Balance need to be updated only if the person has no other accounts.
        Balance = Balance + (Balance * 0.1);
    }
}

} 
```

**阅读**

1.  [将组合用于“是 - 一个”关系的问题](https://stackoverflow.com/questions/11759120/issue-in-using-composition-for-is-a-relationship)

2.  实现业务逻辑 (LINQ to SQL) [http://msdn.microsoft.com/en-us/library/bb882671.aspx](http://msdn.microsoft.com/en-us/library/bb882671.aspx)

3.  构建 LINQ to SQL 应用程序

4.  使用 LINQ to SQL 探索 N 层架构 [http://randolphcabral.wordpress.com/2008/05/08/exploring-n-tier-architecture-with-linq-to-sql-part-3-of-n/](http://randolphcabral.wordpress.com/2008/05/08/exploring-n-tier-architecture-with-linq-to-sql-part-3-of-n/)

5.  [DTO（linq2sql）和类对象之间的混淆！](https://stackoverflow.com/questions/1323070/confusion-between-dtos-linq2sql-and-class-objects)

6.  [领域驱动设计 (Linq to SQL) - 如何删除聚合的一部分？](https://stackoverflow.com/questions/652585/domain-driven-design-linq-to-sql-how-do-you-delete-parts-of-an-aggregate)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:38:46.853

通过阅读您的要求，我将这样做：

```
//Application Service - consumed by UI
public class AccountService : IAccountService
{
    private readonly IAccountRepository _accountRepository;
    private readonly ICustomerRepository _customerRepository;

    public ApplicationService(IAccountRepository accountRepository, ICustomerRepository customerRepository)
    {
        _accountRepository = accountRepository;
        _customerRepository = customerRepository;
    }

    public void IssueLumpSumInterestToAccount(Guid accountId)
    {
        using (IUnitOfWork unitOfWork = UnitOfWorkFactory.Create())
        {
            Account account = _accountRepository.GetById(accountId);
            Customer customer = _customerRepository.GetById(account.CustomerId);

            account.IssueLumpSumOfInterest(customer);

            _accountRepository.Save(account);
        }
    }
}

public class Customer
{
    private List<Guid> _accountIds;

    public IEnumerable<Guid> AccountIds
    {
        get { return _accountIds.AsReadOnly();}
    }
}

public abstract class Account
{
    public abstract void IssueLumpSumOfInterest(Customer customer);
}

public class FixedAccount : Account
{
    public override void  IssueLumpSumOfInterest(Customer customer)
    {
        if (customer.AccountIds.Any(id => id != this._accountId))
            throw new Exception("Lump Sum cannot be issued to fixed accounts where the customer has other accounts");

        //Code to issue interest here
    }
}   

public class SavingsAccount : Account
{
    public override void  IssueLumpSumOfInterest(Customer customer)
    {
        //Code to issue interest here
    }
} 
```

1.  Account 聚合上的**IssueLumpSumOfInterest**方法需要 Customer 聚合来帮助决定是否应该发放利息。
2.  客户聚合包含帐户 ID 列表 -**不是**帐户聚合列表。
3.  基类“Account”有一个多态方法——FixedAccount 检查客户是否有任何其他账户——SavingsAccount 不做这个检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:21:34.257

我注意到的第一件事是银行账户工厂的不当使用。存储库应该使用工厂来根据从数据存储中检索到的数据创建实例。因此，您对 accountRepository.FindByID 的调用将返回 FixedBankAccount 或 SavingsBankAccount 对象，具体取决于从数据存储返回的 AccountType。

如果利息仅适用于 FixedBankAccount 实例，那么您可以执行类型检查以确保您使用正确的帐户类型。

```
public void IssueLumpSumInterest(int accountId)
{
    var account = _accountRepository.FindById(accountId) as FixedBankAccount;

    if (account == null)
    {
        throw new InvalidOperationException("Cannot add interest to Savings account.");
    }

    var ownerId = account.OwnerId;

    if (_accountRepository.Any(a => (a.BankUser.UserId == ownerId) && (a.AccountId != accountId)))
    {
        throw new InvalidOperationException("Cannot add interest when user own multiple accounts.");
    }

    account.AddInterest();

    // Persist the changes
} 
```

注意： FindById 应该只接受 ID 参数而不是 lambda/Func。您已经通过名称“FindById”指明了搜索的执行方式。将“accountId”值与 BankAccountId 属性进行比较的事实是隐藏在方法中的实现细节。如果您想要使用 lambda 的通用方法，请将方法命名为“FindBy”。

如果所有实现都不支持该行为，我也不会将 AddInterest 放在 IBankAccount 接口上。考虑一个公开 AddInterest 方法的单独 IInterestEarningBankAccount 接口。如果您将来添加其他支持此行为的帐户类型，我还将考虑在上述代码中使用该接口而不是 FixedBankAccount 以使代码更易于维护和扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T04:34:34.523

2 min scan answer..

*   Not sure why there is a need for 2 representations of a BankAccount *RepositoryLayer.BankAccount* and *DomainObjectsForBank.IBankAccount*. Hide the persistence layer coupled one.. deal with just the domain object in the service.
*   Do not pass/return Nulls - I think is good advice.
*   The finder methods look like the LINQ methods which select items from a list of collection. Your methods look like they want to get the first match and exit..in which case your parameters can be simple primitives (Ids) vs lambdas.

The general idea seems right. The service encapsulates the logic for this transaction - not the domain objects. If this changes, only one place to update.

```
public void IssueLumpSumInterest(int acccountID)
{
    var customerId = accountRepository.GetAccount(accountId).CustomerId;

    var accounts = accountRepository.GetAccountsForCustomer(customerId);
    if ((accounts.First() is FixedAccount) && accounts.Count() == 1)
    {
       // update interest    
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:21:21.020

让我觉得奇怪的事情：

*   您`IBankAccount`有一个方法`FreezeAccount`，但我认为所有帐户都会有非常相似的行为？也许有一个`BankAccount`实现某些接口的类是有保证的？
*   `AccountStatus`应该是一个枚举？如果一个帐户是“Forzen”，会发生什么？

# android - 如何在 WCF 中获取客户端 IP 地址和 UDP 端口？

> ID：11241543
> 
> 赞同：1
> 
> 时间：2012-06-28T09:20:02.713
> 
> 标签：android, ios, iphone, wcf, ipad

我在 WCf 中开发了一些服务，这些服务由智能设备使用，例如 Android 等

当设备调用它们时，我在 WCF 服务中获取客户端（设备）端点（IpAddress，端口）。之后，我在该 IPAddress 和端口上发送一条 UDP 消息，但该 UDP 消息没有到达目的地。

可能存在一些问题，即从客户端提取端口作为服务可能在 HTTP 上，我得到 HTTP 的端口并在该端口不接受的那个端口上发送 UDP 消息。

请帮忙。

下面是提取客户端 IPAddress 和 PORT 并在该点发送 UDP 消息的代码

```
OperationContext context = OperationContext.Current;
MessageProperties messageProperties = context.IncomingMessageProperties;
var endpointProperty = messageProperties[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;
int nRemotePort = 0;
string sRemoteAddress = "";
if (endpointProperty != null)
{
     sRemoteAddress = endpointProperty.Address;
     nRemotePort = endpointProperty.Port;
} 
```

// 得到 IPAddress 和 Port，现在发送 UDP 消息到地址

```
UdpClient udpClient = new UdpClient();
udpClient.Connect(sRemoteAddress, nRemotePort);
string msgTag = ((DateTime.Now.Month.ToString().PadLeft(2, '0') + DateTime.Now.Day.ToString().PadLeft(2, '0') + DateTime.Now.Year.ToString().PadLeft(4, '0')) + DateTime.Now.Hour.ToString().PadLeft(2, '0') + DateTime.Now.Minute.ToString().PadLeft(2, '0')) + DateTime.Now.Second.ToString().PadLeft(2, '0') + DateTime.Now.Millisecond.ToString().PadLeft(3, '0');

string msgBody = "786022^Successfully Connected to Server, now send Data";
string msg = "8^" + msgTag + "^45^1^0^" + msgBody.Length + Convert.ToChar(2).ToString() + msgBody + Convert.ToChar(4).ToString();
byte[] sendBytes = Encoding.ASCII.GetBytes(msg);
udpClient.Send(sendBytes, sendBytes.Length);
udpClient.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:11:28.987

解决了这个谜，实际上我是从 WCF 服务中提取 TCP 端口并在该端口上发送我的 UDP 消息，这是错误的。

现在我必须在设备应用程序中粘贴一个 UDP 端口，并将我的消息发送到从 WCF 提取的 IPAddress 并确定 UDP 端口。

# asp.net-mvc - 将我的 ASP.NET MVC 寻呼机打包到 NuGet 包中？

> ID：11241548
> 
> 赞同：1
> 
> 时间：2012-06-28T09:20:20.067
> 
> 标签：asp.net-mvc, asp.net-mvc-3, nuget

我在一些 ASP.NET MVC 项目中使用了寻呼机功能。它由几个类和接口（概括不同数据源的分页方法）和`.aspx`/或`.chtml`视图组成。

我可以将我的 C# 代码放入 NuGet 包/库程序集中，但是对于不同项目（例如不同的寻呼机设计）可能不同的视图文件该怎么办？一种方法是将 HTML 放入用 C# 编写的 HTML 帮助程序，但我不喜欢将一些 html 块放入 C# 代码中。

是否可以将视图放入 NuGet 包或我应该使用配方功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:19:30.463

我想推动在 MVC 应用程序中使用 Nuget 以重用 MVC 应用程序本身，而不仅仅是代码 - 视图。我确实设法收拾好它，但它有几十个问题，而且体验很糟糕。

如果您在 ASP.NET MVC Web 应用程序项目中构建了寻呼机功能，那么您只需将其打包，它也会获取视图。在使用 DI、使用区域、使用本地化（资源文件不会被拾取）时，它确实变得更加棘手。例如，Area 路由可能会被编译和包含，另一方面，主 global.asax.cs 将永远不会包含在包中（因此，如果您有路由，则必须手动复制它们）。

但它确实包含样式表，因此您可以将寻呼机设置为包含在包中的默认样式表，这样您还解决了设计修改的问题。

但总而言之，NuGet 并不是最适合打包 MVC（或经典 ASP.NET 网络表单）应用程序。

# gwt - 带有 TreeItem 和 FlexTable 的自定义 GWT 树表

> ID：11241550
> 
> 赞同：3
> 
> 时间：2012-06-28T09:20:24.587
> 
> 标签：gwt

GWT 不包含 TreeTable，但我的项目要求包含树表。所以我使用[Tree](http://examples.roughian.com/index.htm#Widgets~Tree)和[FlexTable](http://examples.roughian.com/index.htm#Widgets~FlexTable)创建了它。

这里 Bean 类：Item

```
class Item
{
ItemType itemType; //Parent,Child Enum type
long parentId;
long amount;
String itemName;
String qty;
String rate;
//Setter / Getter Methods
} 
```

这是在父项和子项之间具有关系的自定义 TreeItem 类。我已经使用 TreeItemNode 创建了一行。

```
 public class TreeItemNode extends TreeItem {
        private FlexTable table; //this will use to access child
        private FlexTable parentTable; //This will use to access parent of particular child.
    //This constructor create parent node
       public TreeItemNode(FlexTable parentTable) {
            setWidget(parentTable);
            this.parentTable=parentTable;
            setState(true); 
        }
     //The method used to add Child items in parent
        public TreeItem addItem(Widget widget)  {
            this.table=(FlexTable) widget;
            TreeItem ret = new TreeItem(widget);
            addItem(ret);
            return ret;
        }
    } 
```

使用项目列表，此方法正在创建具有父节点和子节点关系的树。

```
class CustomTreeTable extends Tree
{
    public void createTreeTable() {
            //This map store parent id and tree item object for letter fetch the parent node and add child node in it
              treeItemMap = new HashMap<Long, BOQTreeItem>();
            for (Item item : itemList) {
                if (item.getParentItemId() == 0) {
                //Create new parent node 
                    TreeItemNode itemTreeItem = new TreeItemNode(addChildItem(item,
                            new FlexTable(), true),
                            "gwt-TreeNode");
                    treeItemMap.put(item.getId(), treeItem);
                    addItem(itemTreeItem);
                } else {
                //Add child node
                    if (treeItemMap.containsKey(item.getParentItemId())
                            && treeItemMap.get(item.getParentItemId()) != null) {
                        FlexTable dataFlextable = treeItemMap.get(
                                item.getParentItemId()).getTable();
                        if (dataFlextable == null) {
                            dataFlextable = new FlexTable();
                            treeItemMap.get(item.getParentItemId()).setTable(
                                    dataFlextable);
                        }
                        FlexTable treeTable = addChildItem(item, dataFlextable,
                                false);
                        treeItemMap.get(item.getParentItemId()).addItem(treeTable);
                    }
                }
            }
        }

} 
```

使用这个我的表如下。+ 是我的树节点打开/关闭，如：

```
ItemName qty rate amount
+ item1   11   1   11   //parent item
---------------------------
- item2   11   2   22
--------------------------------
    SubItemName qty rate amount //child item
     subItem1    5   2    10
     subItem2    8   5    40
------------------------------------ 
```

问题是当我想计算一个原始（子项）中的 qty* 率时，我可以使用行索引来计算，但是如果我想计算所有子项并在父行中显示。然后逻辑变得如此复杂。所以我只想知道我实现的逻辑，比如将实例存储在地图中并进行管理。合适吗？我正朝着正确的方向或错误的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T14:27:55.953

对于您要实现的目标，也许使用 DataGrid Widget 会更简单。

看看 GWT ShowCase：[这里](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCustomDataGrid)

在 DataGrid 上，当您单击 ShowFriends 链接时，您会在父行下显示子项。

希望能帮助到你。:)

# java - Java hashCode() 方法是对象相等性的可靠度量吗？

> ID：11241551
> 
> 赞同：1
> 
> 时间：2012-06-28T09:20:27.640
> 
> 标签：java, compare, hashcode, equality

我目前正在比较两个相同类型的复杂对象，其中多个字段由自定义对象类型的数据结构组成。假设没有一个自定义对象覆盖了该`hashCode()`方法，如果我比较对象中每个字段的哈希码，它们将是相同的，我是否有 100% 的信心认为比较对象的内容是相同的？如果不是，假设我不能使用任何外部库，您会推荐哪种方法来比较两个对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T09:22:53.493

绝对不。您应该*只*使用`hashCode()`第一遍 - 如果哈希码不同，您可以假设对象不相等。如果哈希码相同，则应调用*以*`equals()`检查是否完全相等。

这样想：只有 2 ^(32 个)可能的哈希码。例如， type 有多少种不同的对象`String`？远不止于此。因此*，至少两个*不相等的字符串必须共享相同的哈希码。

Eric Lippert[写的关于哈希码](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)的文章很好- 从 .NET 的角度来看，这是公认的，但原理是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T09:22:49.573

不，没有`hashCode()`碰撞只意味着对象*可能*是相同的，这*绝不*是保证。

唯一的保证是，如果`hashCode()`值不同（并且`hashCode()`/`equals()`实现是正确的），那么对象将**不是**`equal`.

此外，如果您的自定义类型没有`hashCode()`实现，那么该值对于比较对象的*内容**完全没有用*，因为它将是.*[`identityHashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29)*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:24:39.873

如果您没有覆盖该`hashCode()`方法，那么您的所有对象都是不相等的。通过覆盖它，您可以提供比较的逻辑。记住，如果你重写 hashCode()，你肯定应该重写`equals()`. **编辑：** 当然仍然可能发生冲突，但是如果您没有 override `equal()`，您的对象将通过引用进行比较（对象等于自身）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T09:27:37.153

通常的 JVM 实现`Object.hashCode()`是以某种格式返回对象的内存地址，因此从技术上讲，这将用于您想要的（因为没有两个对象可以共享相同的地址）。

但是，实际的规范`Object.hashCode()`并没有保证，也不应该在任何合理或编写良好的代码中用于此目的。

我建议使用 Apache 公共库中提供的 hashCode 和 equals 构建器，或者如果您真的不能使用免费的外部库，请查看它们以获得灵感。不过，使用的最佳方法完全取决于“相等”在您的应用程序域上下文中的实际含义。*

# php - Joomla - 为主页和其他页面使用不同的模板

> ID：11241554
> 
> 赞同：1
> 
> 时间：2012-06-28T09:20:45.413
> 
> 标签：php, joomla, joomla-template

如何为主页使用不同的模板，在内页中使用不同的模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:35:07.833

在 Joomla！您可以将模板分配给菜单选项。

**Joomla！1.5**

在 Joomla！1.5.x 你在模板中做。即选择`Extensions->Templates`然后单击要分配给菜单位置的模板。进入`Template [Edit]`屏幕后，您可以使用左下角的“菜单分配”面板来指定哪些菜单使用模板。

**Joomla！2.5**

在 Joomla！2.5 可以在两个Template中设置模板的使用位置（类似J1.5），在创建的时候可以直接在菜单中选择。

不要忘记在 Joomla 中！2.5 模板可以具有“样式”变体，您可以创建和使用这些变体，就像模板的基础一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T05:41:13.880

在 joomla 中，您可以为内页分配不同的模板。利用

```
Extensions->Template Manager 
```

你可以看到所有的模板文件。选择模板文件以编辑详细信息。您可以看到“菜单分配”之类的选项，选择需要使用所选模板的那些菜单。还要确保在模板索引文件中，您已经加载了组件。否则将不会加载组件。

```
<jdoc:include type="component" /> 
```

# sql - 快照事务

> ID：11241556
> 
> 赞同：0
> 
> 时间：2012-06-28T09:20:51.447
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

我想在快照事务中执行删除和插入。

我这样做的方式：

```
set transaction isolation level snapshot

begin transaction
    Delete from tbl_test
    Insert into tbl_test select * from tbl_source
commit transaction 
```

我希望如果我在事务期间查询表 tbl_test，结果与事务之前一样。在我点击提交后，我希望新数据可用。发生的情况是表内的数据在删除完成之前具有初始值。当插入开始时，快照被删除并且新数据可用。

任何线索如何解决这个问题？

# c# - Selenium WebDriver SubMenu 点击不起作用

> ID：11241557
> 
> 赞同：1
> 
> 时间：2012-06-28T09:20:54.210
> 
> 标签：c#, selenium, webdriver

我无法使用 c# 使用 selenium webdriver 单击 SubMenu 项。我正在使用 IE9 和 FireFox 13。我尝试过 Action Builder，但它不起作用。它给出了一个错误，说元素不能被点击。

```
 WebDriverWait Wait = new WebDriverWait(webDriver, TimeSpan.FromSeconds(5));
    IWebElement menu = Wait.Until((d) => webDriver.FindElement(By.Id("id1")));
    IWebElement menuOption = Wait.Until((d)=>webDriver.FindElement(By.Id("ID2")));
            Actions builder = new Actions(webDriver);
            builder.MoveToElement(menu).Build().Perform();
            Thread.Sleep(5);
            //then click when menu option is visible
            menuOption.Click(); 
```

我什至使用过javascript： js.ExecuteScript("return $(\"a:contains('ID1')\").mouseover();"); // 鼠标悬停到主菜单
webDriver.FindElement(By.Id("ID2")).Click();

请给出一些点击隐藏元素的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:39:53.097

而不是使用语句`Thread.sleep()`。您可以在确保显示元素后尝试单击该元素。

获得要单击的 WebElement 后，使用`isDisplayed()`上一篇文章中@Slanec 所谈论的 ExpectedContition 语句中的方法检查它是否显示。

通过这种方式，您可以确保只有在 Wait.Until() 返回**true**之后才会单击该元素。即`menuOption`显示。

我正在用 java 编写代码，因为我不懂 C#。但我想你能明白我想说什么——

```
 new WebDriverWait(driver, 60).until(new ExpectedCondition<Boolean>() {

        public Boolean apply(WebDriver driver ) {

            return driver.findElement(By.Id("ID2")).isDisplayed();
        }
    }); 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:07:51.317

您可以使用[预期条件](http://seleniumhq.org/docs/04_webdriver_advanced.html#expected-conditions)等待元素在悬停在其上方后可点击（`Thread.sleep()`几乎总是不好的选择。而且 5 毫秒是不够的。）。

我现在可以看到此类（在命名空间中）的[文档](http://selenium.googlecode.com/svn/trunk/docs/api/dotnet/index.html)已损坏，但是如果您可以按照上面链接中的 Java 代码进行操作，[这里](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)是 Java 的预期条件 - 在 C# 中也几乎相同。`ExpectedConditions``OpenQA.Selenium.Support.UI`

# nhibernate - nhibernate：选择父母和最新的孩子

> ID：11241560
> 
> 赞同：1
> 
> 时间：2012-06-28T09:21:01.823
> 
> 标签：nhibernate, parent-child, queryover

我有以下实体

```
public class Vehicle
{
    public virtual string InternalNumber { get; set; }
    public virtual IList<VehicleDriverHistory> DriverHistory { get; set; }
}

public class VehicleDriverHistory : HistoryEntity
{
    public virtual Vehicle Vehicle { get; set; }
    public virtual DriverPerson Driver { get; set; }
    public virtual DateTime Date { get; set; }
} 
```

现在我需要根据“日期”选择每辆车，如果有的话，选择最新的 VehicleDriverHistory-Entry。但是我有点挣扎，我在sql中没有问题，但到目前为止在nhibernate中失败了。

到目前为止我所拥有的：

```
VehicleDriverHistory vdHistory = null;
VehicleDriverHistory vdHistory2 = null;
q.Left.JoinAlias(x => x.DriverHistory, () => vdHistory);
q.Left.JoinAlias(x => x.DriverHistory, () => vdHistory2).Where(x => vdHistory2.Date > vdHistory.Date);
q.Where(x => vdHistory2.Id == null); 
```

这不起作用，这只是我尝试将 sql 查询（产生正确的数据）“翻译”为休眠。

那么，我将如何选择父母和最新的孩子（如果没有，则没有）

谢谢

**更新**

在 Firos 的帮助下，我得到了以下结果：

```
VehicleDriverHistory historyAlias = null;
var maxDateQuery = QueryOver.Of<VehicleDriverHistory>()
                   .Where(h => h.Vehicle == historyAlias.Vehicle)
                   .Select(Projections.Max<VehicleDriverHistory>(h => h.Date));

var vehiclesWithEntry = DataSession.Current.QueryOver(() => historyAlias)
                        .WithSubquery.WhereProperty(h => h.Date).Eq(maxDateQuery)
                        .Fetch(h => h.Vehicle).Eager
                        .Future();

Vehicle VehicleAlias = null;
var vehiclesWithoutEntry = DataSession.Current.QueryOver<Vehicle>(() => VehicleAlias)
                           .WithSubquery
                           .WhereNotExists(QueryOver.Of<VehicleDriverHistory>()
                           .Where(x => x.Vehicle.Id == VehicleAlias.Id).Select(x => x.Id))
                           .Future();

return vehiclesWithEntry.Select(h => new PairDTO { Vehicle = h.Vehicle, NewestHistoryEntry = h }).Concat(vehiclesWithoutEntry.Select(v => new PairDTO { Vehicle = v })).ToList(); 
```

我不得不用子查询子句替换 vehclesWithoutEntry 中的 Any() 语句，因为它引发了异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:28:07.570

使用 Futures 仅进行一次往返的其他想法

```
VehicleDriverHistory historyAlias = null;
var maxDateQuery = QueryOver.Of<VehicleDriverHistory>()
    .Where(h => h.Vehicle == historyAlias.Vehicle)
    .Select(Projections.Max<VehicleDriverHistory>(h => h.Date));

var vehiclesWithEntry = session.QueryOver(() => historyAlias)
    .WithSubquery.WhereProperty(h => h.Date).Eq(maxDateQuery)
    .Fetch(h => h.Vehicle).Eager
    .Select(h => new PairDTO { Vehicle = h.Vehicle, NewestHistoryEntry = h })
    .Future<PairDTO>();

var vehiclesWithoutEntry = session.QueryOver<Vehicle>()
    .Where(v => !v.DriverHistory.Any())
    .Select(v => new PairDTO{ Vehicle = v })
    .Future<PairDTO>();

return vehiclesWithoutEntry.Concat(vehiclesWithEntry); // .ToList() if immediate executing is required 
```

更新：我无法重现异常，但你可以试试这个

```
VehicleDriverHistory historyAlias = null;
var maxDateQuery = QueryOver.Of<VehicleDriverHistory>()
    .Where(h => h.Vehicle == historyAlias.Vehicle)
    .Select(Projections.Max<VehicleDriverHistory>(h => h.Date));

var vehiclesWithEntry = session.QueryOver(() => historyAlias)
    .WithSubquery.WhereProperty(h => h.Date).Eq(maxDateQuery)
    .Fetch(h => h.Vehicle).Eager
    .Future();

var vehiclesWithoutEntry = session.QueryOver<Vehicle>()
    .Where(v => !v.DriverHistory.Any())
    .Select(v => new PairDTO{ Vehicle = v })
    .Future<PairDTO>();

return vehiclesWithoutEntry.Select(h => new PairDTO { Vehicle = h.Vehicle, NewestHistoryEntry = h }).Concat(vehiclesWithEntry); 
```

# open-source - 维基百科网络框架？

> ID：11241562
> 
> 赞同：0
> 
> 时间：2012-06-28T09:21:08.740
> 
> 标签：open-source, wiki, web-frameworks

嘿伙计们，我们想为一个非常精确的知识领域创建一个信息类型的网站，我们希望它采用类似 wiki 的形式。我的意思是每个知识实体的信息都是由用户创建的，在这个意义上它就像维基百科一样工作。是否有可用于开箱即用解决方案的 Web 库。我们不想花太多时间对此进行编程。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:22:24.560

维基百科基于开源[Mediawiki](http://www.mediawiki.org/wiki/MediaWiki)系统。

它易于使用和安装，但对于复杂的管理（尤其是在权限方面）不是很友好。编辑器适合工程师，而不适合所有人。

对于其他解决方案，我建议您在谷歌上搜索“wiki”：这是描述这种系统的通用术语。或“CMS”，用于更广泛的内容。

# scala - 如何使用异常处理未分配的 ID？

> ID：11241565
> 
> 赞同：2
> 
> 时间：2012-06-28T09:21:17.363
> 
> 标签：scala, playframework, anorm

Anorm 具有类型`anorm.Pk`化主键（及其子类`anorm.NotAssigned`）的特殊类型。`NotAssigned`如果数据库负责生成相关键，这允许分配一个值。

外键是否有等效的概念？我现在正在使用类型`Long`。但是，如果还不知道外键，我将不得不分配一个`null`值或将类型替换为`Option[Long]`. 不过，这感觉不是它应该做的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:43:09.150

Anorm 不提供围绕关系的功能。

将 FK 从模型中取出，但接受 FK 作为 CRUD 的参数，例如用于创建属于用户的“人为”：

```
def create(c: Contrived, userId: Long)
  DB.withConnection { implicit connection =>
  val id = SQL("""
      insert into c
      (first, second, login_id)
      values
      ({first}, {second}, {login_id})
      """).on(
    'first -> c.first,
    'second -> c.second,
    'login_id -> userId 
```

...ETC

# php - 无法将 detect_unicode 设置/查找为 Off

> ID：11241568
> 
> 赞同：3
> 
> 时间：2012-06-28T09:21:24.540
> 
> 标签：php, mamp, phpdoc, composer-php

我想开始使用 phpDocumentor 并且手动安装不断抛出一个错误，提示我没有在终端的 php.ini 中设置**detect_unicode = Off**。

当我将它添加到我的 php.ini 时，它不需要，并且在运行安装时遇到同样的问题。似乎没有人有这个问题，对于我的生活，我无法弄清楚。

[https://github.com/phpDocumentor/phpDocumentor2/blob/develop/README.md#installation](https://github.com/phpDocumentor/phpDocumentor2/blob/develop/README.md#installation)

我错过了什么？（我确实在 php.ini 编辑后重新启动了 MAMP 服务器）

终端错误截图...

![在此处输入图像描述](../Images/ccacf32d4a16950258768c57eb61b2f6.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T09:51:23.493

如果您安装了 MAMP/MAMP Pro，那么问题是终端可用的 PHP 版本很可能是位于以下位置的系统版本：

```
/private/etc/ 
```

我遇到了同样的问题，但在我的情况下，我在该目录中没有 php.ini 文件，因此解决它的最佳方法是创建一个指向当前在 MAMP/MAMP Pro 安装中使用的 PHP 版本的符号链接：

```
php.ini -> /Applications/MAMP/bin/php/php5.3.14/conf/php.ini 
```

这解决了这个问题。只需将 php 版本更改为`php5.3.14`您选择在 MAMP 中使用的任何 PHP 版本。

正如@moderndegree 上面提到的那样，您可以选择在将来通过在 bash/zsh/etc 中编辑路径变量来将其提供给终端：

```
export PATH="/Applications/MAMP/bin/php/php5.3.14/bin:$PATH" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T10:02:16.403

如果它仍然被启用，你不能编辑正确的 php.ini。运行`php -i | grep ini`查找所有已加载的 ini 文件。

相关行是那两条：

```
Loaded Configuration File => ...
Additional .ini files parsed => ... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-17T02:34:12.877

问题是您可能遇到了不同的 php 安装。

尝试以下操作：

```
which php 
```

如果您得到的不是 , `/Applications/MAMP/bin/...`，则需要更新您的环境以指向 MAMP 的安装。

为此，您需要将以下内容添加到 .bash_profile（请更新路径以匹配您的设置）：

```
export PATH="/Applications/MAMP/bin/php/php5.3.6/bin:$PATH" 
```

使用以下命令重新加载 .bash_profile：

```
source .bash_profile 
```

完成此操作后，您应该指向正确的 php 安装。`which php`再次尝试确认。现在运行`php -i | grep ini`以确认`php.ini`正在加载正确的文件。正如 Seldaek 所说，相关线路是：

```
Loaded Configuration File => ...
Additional .ini files parsed => ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:02:45.790

我记得，MAMP 使用配置模板。所以你应该编辑 php.ini 模板。每次重新启动 MAMP 时，都会从模板中重新生成实际的 php.ini。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-05T11:14:42.013

我在 composer-php 中遇到了同样的问题，我将这一行手动添加到 php.ini 文件中。像这样：

```
sudo /private/etc/php.ini 
```

然后添加这一行“detect_unicode = Off”

```
detect_unicode = Off 
```

然后它的工作，我安装了作曲家。你可以看到这个 [如何从 php.ini 中禁用“detect_unicode”设置？（尝试安装 Composer）](https://stackoverflow.com/questions/11302593/how-to-disable-detect-unicode-setting-from-php-ini-trying-to-install-compose)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-30T06:49:58.423

如果您无法更改 /usr/local/bin/php/php.ini 文件，请记住对所有 php 调用继续使用“-d detect_unicode=Off”，如下所示：

```
curl -s https://getcomposer.org/installer | php -d detect_unicode=Off

php -d detect_unicode=Off composer.phar install 
```

如果您能够更改 php.ini 文件，则将以下内容添加到您的末尾`php.ini`：

```
detect_unicode = Off 
```

# c# - 在c#中将数据导出到word

> ID：11241571
> 
> 赞同：3
> 
> 时间：2012-06-28T09:21:34.043
> 
> 标签：c#, winforms, ms-word

下面是创建 pdf 来写入文件的代码。每次我调用下面的代码时，它都会创建一个 pdf 文件来写入。空白文档文件，以便我可以将数据导出到其中..

```
public void showPDf() {
  iTextSharp.text.Document doc = new iTextSharp.text.Document(
    iTextSharp.text.PageSize.A4);
  string combined = Path.Combine(txtPath.Text,".pdf");
  PdfWriter pw = PdfWriter.GetInstance(doc, new FileStream(combined, FileMode.Create));
  doc.Open();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T09:24:46.853

**1.互操作API**

它在 Namespace 中可用`Microsoft.Office.Interop.Word`。

您可以使用 Word Interop COM API 使用以下代码执行此操作，

```
// Open a doc file.
    Application application = new Application();
    Document document = application.Documents.Open("C:\\word.doc");

    // Loop through all words in the document.
    int count = document.Words.Count;
    for (int i = 1; i <= count; i++)
    {
        // Write the word.
        string text = document.Words[i].Text;
        Console.WriteLine("Word {0} = {1}", i, text);
    }
    // Close word.
    application.Quit(); 
```

唯一的缺点是您必须安装 Office 才能使用此功能。

**2\. OpenXML** 你可以使用openxml来构建word文档，试试下面的链接，

[http://msdn.microsoft.com/en-us/library/bb264572(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb264572%28v=office.12%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T09:27:06.720

你试过在网上搜索这个吗？

[如何使用 Visual C# 自动化 Microsoft Word 以创建新文档](http://support.microsoft.com/kb/316384)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T08:39:15.163

有一个免费的解决方案可以将数据导出到 word，

[http://www.codeproject.com/Articles/151789/Export-Data-to-Excel-Word-PDF-without-Automation-f](http://www.codeproject.com/Articles/151789/Export-Data-to-Excel-Word-PDF-without-Automation-f)

# php - PHP读取大制表符分隔文件寻找一行

> ID：11241573
> 
> 赞同：0
> 
> 时间：2012-06-28T09:21:45.223
> 
> 标签：php, fopen, tsv

我们从供应商那里得到一份产品清单，通过 ftp 传送到我们的站点。我需要创建一个脚本，通过该文件（制表符分隔）搜索与我们相关的产品，并使用这些信息来更新库存水平、价格等。

该文件本身大约有 38,000 行长，我想知道处理这个问题的最佳方法。我最初能想到的唯一方法是使用`fopen`然后`fgetcsv`循环遍历每条线。将该行放入数组并查找相关产品代码。我希望有一种更有效的方法（尽管我还没有测试过这种方法的效率）

我要阅读的文件是 8.8 Mb。所有这些都需要自动完成，例如由 CRON 每天完成。

编辑 - 更多信息。我已经运行了我的第一次试验，并且基于 2 个答案，我有以下代码： 我有我需要从数组中的数据库中的文本文件中挑选出来的项目`$items[$row['item_id']] = $row['prod_code'];`

```
$catalogue = file('catalogue.txt');
while ($line = $catalogue)
{
$prod = explode("   ",$line);
if (in_array($prod[0],$items))
    {
        echo $prod[0]."<br>";//will be updating the stock level in the db eventually
        }
} 
```

虽然这目前没有给出正确的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:28:24.733

我曾经在每日数据（全英国）中对 Dominos Pizza 做类似的事情。

要么一次性将其全部加载到数据库中。

或者

使用 fopen 并一次将一行加载到数据库中，从而保持较低的内存开销。（我不得不使用这种方法，因为数据的格式不是很好）

然后，您可以在闲暇时查询数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:35:23.237

“我希望有更有效的方法”是什么意思？对什么有效？写代码？执行代码时CPU消耗？磁盘 I/O？内存消耗？

在内存中保存约 9MB 的文本不是问题（除非您的内存限制非常低）。[file()](http://php.net/file)调用将读取整个文件并返回一个数组（按行分割）。这或[file_get_contents()](http://php.net/file_get_contents)将是磁盘 I/O 方面最有效的方法，但会消耗比必要更多的内存。

> 将该行放入数组并查找相关产品代码。

我不确定为什么需要将该文件的内容缓存在数组中。但如果你这样做了，请记住该数组将使用比约 9MB 文本稍多的内存。因此，您可能希望按顺序读取文件，以避免在内存中两次存储相同的数据。

正如@user1487944 已经指出的那样，根据您要对数据执行的操作，将其加载到数据库中也可能是一个可行的解决方案。

# sql - 将组合框添加到 Datagridview

> ID：11241575
> 
> 赞同：0
> 
> 时间：2012-06-28T09:21:53.263
> 
> 标签：sql, vb.net, datagridview, combobox

所以我正在开发一个小程序，我想将数据从 SQL 表导入到 datagridview，这是 ComboBox 从同一数据库中的另一个表填充的列之一。

这是我当前的代码：

```
Public Sub Load_black(Optional ByVal linhas As Integer = 20)
    i = 0
    black.Columns.Clear()
    black.Rows.Clear()
    black.Clear()
    ProdC.Open()
    Query = "SELECT * FROM [plano2] where familia like '%tpa%'ORDER BY ordem"
    myCMD = New SqlClient.SqlCommand(Query, ProdC)
    myDRR = myCMD.ExecuteReader
    If myDRR.HasRows = True Then
        black.Columns.Add("Order", GetType(String))
        black.Columns.Add("Number", GetType(String))
        black.Columns.Add("Name", GetType(String))
        black.Columns.Add("Cut Style", GetType(String))
        black.Columns.Add("Cicles/cm", GetType(String))
        black.Columns.Add("Leght", GetType(String))
        black.Columns.Add("Colors", GetType(String))
        black.Columns.Add("Date", GetType(String))
        While myDRR.Read And i < linhas
            black.Rows.Add(myDRR.Item("ordem").ToString, myDRR.Item("ref").ToString, myDRR.Item("design").ToString, myDRR.Item("tipodecorte").ToString, myDRR.Item("passagenscm").ToString, myDRR.Item("largura").ToString, myDRR.Item("numcores").ToString, myDRR.Item("dataentrada").ToString)
            str_pb_ref(i) = myDRR.Item("ref").ToString
            i = i + 1
        End While
    Else
        MessageBox.Show("Table is empety.")
    End If
    myDRR.Close()
    ProdC.Close()
    grd_black.DataSource = black
End Sub 
```

我想要做的是使用该组合框添加一个新行。

我已经尝试了很多方法，但是要么我在数据库表中有值，要么我有带有其他表值的组合框。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:22:39.730

我之前解决这个问题的方法是在表单设计器中为datagridview设置列，设置特定的组合框列。

然后使用 SELECT DISTINCT 查询填充组合框列选项。

如果需要，您可以隐藏列标题，直到数据位于 datagridview 中。

它有点像在代码中更改列类型，因为每个列类型都是不同的列类型对象你必须创建一个新的实例

```
 System.Windows.Forms.DataGridViewComboBoxColumn 
```

然后将其添加到datagridview

（第一篇文章 - 有什么好处吗？）

# python - Python 访问 JSON 对象中的数据

> ID：11241583
> 
> 赞同：13
> 
> 时间：2012-06-28T09:22:10.720
> 
> 标签：python, json, ffprobe

所以我在我的脚本中这样做：

```
import json
info = json.loads(get_info())
print info 
```

哪个输出：

```
richard@richard-desktop:~/projects/hello-python$ python main.py 
{
    "streams": [
        {
            "index": 0,
            "codec_name": "mpeg2video",
            "codec_long_name": "MPEG-2 video",
            "codec_type": "video",
            "codec_time_base": "1001/48000",
            "codec_tag_string": "[0][0][0][0]",
            "codec_tag": "0x0000",
            "width": 1920,
            "height": 1080,
            "has_b_frames": 1,
            "sample_aspect_ratio": "1:1",
            "display_aspect_ratio": "16:9",
            "pix_fmt": "yuv422p",
            "level": 2,
            "timecode": "00:59:59:00",
            "id": "0x1e0",
            "r_frame_rate": "24000/1001",
            "avg_frame_rate": "10000/417",
            "time_base": "1/90000",
            "start_time": "0.945411"
        },
        {
            "index": 1,
            "codec_name": "pcm_dvd",
            "codec_long_name": "PCM signed 20|24-bit big-endian",
            "codec_type": "audio",
            "codec_time_base": "1/48000",
            "codec_tag_string": "[0][0][0][0]",
            "codec_tag": "0x0000",
            "sample_fmt": "s32",
            "sample_rate": "48000",
            "channels": 2,
            "bits_per_sample": 0,
            "id": "0xa0",
            "r_frame_rate": "0/0",
            "avg_frame_rate": "0/0",
            "time_base": "1/90000",
            "start_time": "0.945411",
            "duration": "600.595000"
        }
    ],
    "format": {
        "filename": "/home/richard/projects/hello-python/tests/test_1.mpg",
        "nb_streams": 2,
        "format_name": "mpeg",
        "format_long_name": "MPEG-PS format",
        "start_time": "0.945411",
        "duration": "600.595000",
        "size": "4033241092",
        "bit_rate": "53723272"
    }
} 
```

如何访问流或格式，然后访问其中的属性？例如如何从第二个流中获取 codec_long_name 或如何从格式中获取持续时间？

我试过：

```
print info[0] 
```

哪个输出：

```
richard@richard-desktop:~/projects/hello-python$ python main.py 
{ 
```

如果我打印 repr(info)，我会得到：

```
richard@richard-desktop:~/projects/hello-python$ python main.py 
'{\n    "streams": [\n        {\n            "index": 0,\n            "codec_name": "mpeg2video",\n            "codec_long_name": "MPEG-2 video",\n            "codec_type": "video",\n            "codec_time_base": "1001/48000",\n            "codec_tag_string": "[0][0][0][0]",\n            "codec_tag": "0x0000",\n            "width": 1920,\n            "height": 1080,\n            "has_b_frames": 1,\n            "sample_aspect_ratio": "1:1",\n            "display_aspect_ratio": "16:9",\n            "pix_fmt": "yuv422p",\n            "level": 2,\n            "timecode": "00:59:59:00",\n            "id": "0x1e0",\n            "r_frame_rate": "24000/1001",\n            "avg_frame_rate": "10000/417",\n            "time_base": "1/90000",\n            "start_time": "0.945411"\n        },\n        {\n            "index": 1,\n            "codec_name": "pcm_dvd",\n            "codec_long_name": "PCM signed 20|24-bit big-endian",\n            "codec_type": "audio",\n            "codec_time_base": "1/48000",\n            "codec_tag_string": "[0][0][0][0]",\n            "codec_tag": "0x0000",\n            "sample_fmt": "s32",\n            "sample_rate": "48000",\n            "channels": 2,\n            "bits_per_sample": 0,\n            "id": "0xa0",\n            "r_frame_rate": "0/0",\n            "avg_frame_rate": "0/0",\n            "time_base": "1/90000",\n            "start_time": "0.945411",\n            "duration": "600.595000"\n        }\n    ],\n    "format": {\n        "filename": "/home/richard/projects/hello-python/tests/test_1.mpg",\n        "nb_streams": 2,\n        "format_name": "mpeg",\n        "format_long_name": "MPEG-PS format",\n        "start_time": "0.945411",\n        "duration": "600.595000",\n        "size": "4033241092",\n        "bit_rate": "53723272"\n    }\n}\n' 
```

我获取 JSON 字符串的方式是运行以下命令：

```
ffmpeg_command = "ffprobe -v quiet -print_format json -show_format -show_streams %s" % self.absolute_path
return subprocess.check_output(ffmpeg_command, shell=True) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T09:24:47.190

JSON 被编码*两次*，结果`json.loads`是一个字符串。python 中的字符串是序列，因此第一个字符是`{`.

再次解码项目：

```
info = json.loads(json.loads(get_info())) 
```

现在您的 main.py 输出应如下所示：

```
>>> result = json.loads(output)
>>> print result
{u'streams': [{u'pix_fmt': u'yuv422p', u'index': 0, u'start_time': u'0.945411', u'codec_tag': u'0x0000', u'sample_aspect_ratio': u'1:1', u'level': 2, u'r_frame_rate': u'24000/1001', u'id': u'0x1e0', u'time_base': u'1/90000', u'codec_tag_string': u'[0][0][0][0]', u'codec_type': u'video', u'has_b_frames': 1, u'width': 1920, u'codec_long_name': u'MPEG-2 video', u'display_aspect_ratio': u'16:9', u'codec_name': u'mpeg2video', u'timecode': u'00:59:59:00', u'height': 1080, u'codec_time_base': u'1001/48000', u'avg_frame_rate': u'10000/417'}, {u'index': 1, u'sample_fmt': u's32', u'codec_tag': u'0x0000', u'bits_per_sample': 0, u'r_frame_rate': u'0/0', u'start_time': u'0.945411', u'time_base': u'1/90000', u'codec_tag_string': u'[0][0][0][0]', u'codec_type': u'audio', u'channels': 2, u'duration': u'600.595000', u'codec_long_name': u'PCM signed 20|24-bit big-endian', u'codec_name': u'pcm_dvd', u'id': u'0xa0', u'sample_rate': u'48000', u'codec_time_base': u'1/48000', u'avg_frame_rate': u'0/0'}], u'format': {u'nb_streams': 2, u'start_time': u'0.945411', u'format_long_name': u'MPEG-PS format', u'format_name': u'mpeg', u'filename': u'/home/richard/projects/hello-python/tests/test_1.mpg', u'bit_rate': u'53723272', u'duration': u'600.595000', u'size': u'4033241092'}} 
```

您可以按名称访问流和格式参数：

```
>>> result['streams']
[{u'pix_fmt': u'yuv422p', u'index': 0, u'start_time': u'0.945411', u'codec_tag': u'0x0000', u'sample_aspect_ratio': u'1:1', u'level': 2, u'r_frame_rate': u'24000/1001', u'id': u'0x1e0', u'time_base': u'1/90000', u'codec_tag_string': u'[0][0][0][0]', u'codec_type': u'video', u'has_b_frames': 1, u'width': 1920, u'codec_long_name': u'MPEG-2 video', u'display_aspect_ratio': u'16:9', u'codec_name': u'mpeg2video', u'timecode': u'00:59:59:00', u'height': 1080, u'codec_time_base': u'1001/48000', u'avg_frame_rate': u'10000/417'}, {u'index': 1, u'sample_fmt': u's32', u'codec_tag': u'0x0000', u'bits_per_sample': 0, u'r_frame_rate': u'0/0', u'start_time': u'0.945411', u'time_base': u'1/90000', u'codec_tag_string': u'[0][0][0][0]', u'codec_type': u'audio', u'channels': 2, u'duration': u'600.595000', u'codec_long_name': u'PCM signed 20|24-bit big-endian', u'codec_name': u'pcm_dvd', u'id': u'0xa0', u'sample_rate': u'48000', u'codec_time_base': u'1/48000', u'avg_frame_rate': u'0/0'}] 
```

专业提示：使用该[`pprint`模块](http://docs.python.org/library/pprint.html)很好地格式化 python 结构：

```
>>> from pprint import pprint
>>> print pprint(result)
>>> pprint(result)
{u'format': {u'bit_rate': u'53723272',
             u'duration': u'600.595000',
             u'filename': u'/home/richard/projects/hello-python/tests/test_1.mpg',
             u'format_long_name': u'MPEG-PS format',
             u'format_name': u'mpeg',
             u'nb_streams': 2,
             u'size': u'4033241092',
             u'start_time': u'0.945411'},
 u'streams': [{u'avg_frame_rate': u'10000/417',
               u'codec_long_name': u'MPEG-2 video',
               u'codec_name': u'mpeg2video',
               u'codec_tag': u'0x0000',
               u'codec_tag_string': u'[0][0][0][0]',
               u'codec_time_base': u'1001/48000',
               u'codec_type': u'video',
               u'display_aspect_ratio': u'16:9',
               u'has_b_frames': 1,
               u'height': 1080,
               u'id': u'0x1e0',
               u'index': 0,
               u'level': 2,
               u'pix_fmt': u'yuv422p',
               u'r_frame_rate': u'24000/1001',
               u'sample_aspect_ratio': u'1:1',
               u'start_time': u'0.945411',
               u'time_base': u'1/90000',
               u'timecode': u'00:59:59:00',
               u'width': 1920},
              {u'avg_frame_rate': u'0/0',
               u'bits_per_sample': 0,
               u'channels': 2,
               u'codec_long_name': u'PCM signed 20|24-bit big-endian',
               u'codec_name': u'pcm_dvd',
               u'codec_tag': u'0x0000',
               u'codec_tag_string': u'[0][0][0][0]',
               u'codec_time_base': u'1/48000',
               u'codec_type': u'audio',
               u'duration': u'600.595000',
               u'id': u'0xa0',
               u'index': 1,
               u'r_frame_rate': u'0/0',
               u'sample_fmt': u's32',
               u'sample_rate': u'48000',
               u'start_time': u'0.945411',
               u'time_base': u'1/90000'}]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:36:18.127

要打印`codec_long_name`并`duration`从第二个流执行以下操作：

```
details = subprocess.check_output(["C:/FFmpeg/bin/ffprobe.exe",
    "-loglevel", "quiet", "-print_format", "json", "-show_streams", 
    file_path])
info = json.loads(details)
print info['streams'][1]['codec_long_name'], info['streams'][1]['duration'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:26:38.417

尝试

```
from StringIO import StringIO
io = StringIO(get_info())
json.load(io) 
```

# drupal-7 - 如何使用 drupal 7 Web 表单模块创建具有文本字段的表格

> ID：11241587
> 
> 赞同：0
> 
> 时间：2012-06-28T09:22:20.577
> 
> 标签：drupal-7

我正在使用 drupal 7 Web 表单模块。我想创建一个带有文本字段的表格的表单。任何人都可以帮我这样做。drupal7 中是否有任何特定模块可以自定义表单以创建表格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:08:14.880

使用**Fieldset**类型创建 webform 表格组件

# c - 如何使用 gstreamer 仅从音频视频文件中捕获视频

> ID：11241589
> 
> 赞同：0
> 
> 时间：2012-06-28T09:22:26.000
> 
> 标签：c, gstreamer

我只想从文件格式为 .webm 的音频-视频文件中捕获视频，我将把它转换为 .mp4 格式，该格式仅包含视频文件。

gst-launch filesrc location=/home/project/teri_meri_kahaani_theatrical_trailer_2.webm ！解码bin2！ffenc_mpeg2video ！mpeg视频解析！队列 ！文件接收器位置=/home/project/h.mp4

我使用了这个管道，但它不起作用。请告诉我如何做到这一点...

谢谢你苛刻

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:14:48.837

您忘记添加混合器。尝试

```
gst-launch filesrc location=/home/project/teri_meri_kahaani_theatrical_trailer_2.webm ! decodebin2 ! ffenc_mpeg2video ! mpegvideoparse ! mp4mux ! filesink location=/home/project/h.mp4 
```

# mysql - 建议每个用户的下一个测验的 SQL 查询

> ID：11241590
> 
> 赞同：0
> 
> 时间：2012-06-28T09:22:27.690
> 
> 标签：mysql, sql

我有 2 张桌子。

```
quiz table 
=================
id, q_name, code

completed_quizes table
======================================================
id, completion_date, user_id, quiz_code, quiz_count 
```

我有 2 种测验

```
Table_name: quiz_names
id     q_name              code
1      grand_quiz          gra
2      normal_quiz         nor

Table_name: completed_quizes
id    completion_date         user_id      q_code   q_count
1     1340841600 (28June2012)    2          gra       0
2     1340755200(27June2012)     2          nor       3
3     1340668800(26June2012)     2          nor       2
4     1340582400(25June2012)     2          nor       1
5     1340496000(24June2012)     2          gra       0
6     1340841600 (28June2012)    3          gra       0
7     1340755200(27June2012)     3          nor       3
8     1340668800(26June2012)     3          nor       2
9     1340582400(25June2012)     3          nor       1
10    1340496000(24June2012)     3          gra       0 
```

规则：

1-首先将进行所有用户的大测验。

2-基于大测验，如果任何用户上次测验是大测验，那么下一个建议将是普通测验 1。

3- 基于普通测验 1，如果任何用户上次测验是普通测验 1，那么下一个建议将是普通测验 2。

4- 基于普通测验 2，如果任何用户上次测验是普通测验 2，那么下一个建议将是普通测验 3。

5-如果任何用户上次测验是正常测验 3，那么大测验将是下一个建议。

**附言**

问题是每个用户的下一个建议都是基于他之前完成的测验。我想要下一个测验的所有用户？

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:30:48.357

您需要[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)来获取每个用户执行的最新测验，然后加 1（[`MOD`](http://dev.mysql.com/doc/en/mathematical-functions.html#function_mod)用于将最近参加测验 3 的人旋转回 0）。要包括尚未参加任何测验的用户，您需要与您的用户表进行[外部联接：](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

```
SELECT user_id, IFNULL((q_count+1) % 4, 0) AS next
FROM   users LEFT JOIN (
  completed_quizes NATURAL JOIN (
    SELECT   user_id, MAX(completion_date) AS completion_date
    FROM     completed_quizes
    GROUP BY user_id
  ) AS t
) USING (user_id) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/86b10/1)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:32:53.570

试试这个 ：：

```
select 
q_code, 
CASE 
WHEN q_code='gra'
THEN 'nor1'
ELSE IF q_code='nor3'
THEN 'gr'
ELSE
CONCAT('nor',CAST(MAX(q_count+1) as CHAR))
END as suggestion

from completed_quizes group by user_id 
```

# java - 在java中占用字符的一些逻辑错误

> ID：11241597
> 
> 赞同：0
> 
> 时间：2012-06-28T09:23:04.287
> 
> 标签：java, string-comparison

这是我的代码...

```
class info{
    public static void main (String[]args) throws IOException{
        char gen;

        while(true) {   //problem occurs with this while
            System.out.print("\nENTER YOUR GENDER (M/F) : ");
            gen=(char)System.in.read();

            if(gen=='M' || gen=='F' || gen=='m' || gen=='f'){
                break;
            }
        }

        System.out.println("\nGENDER = "+gen);
    }
} 
```

这是我的输出...

```
ENTER YOUR GENDER (M/F) : h

ENTER YOUR GENDER (M/F) :
ENTER YOUR GENDER (M/F) :
ENTER YOUR GENDER (M/F) : m

GENDER = m 
```

有人可以帮我理解为什么它这么多次要求性别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T09:25:43.670

您可能正在 Windows 上工作。当您给出答案并按 Enter 时，它会添加两个额外的字符`'\r'`和`'\n'`. `stdin`您只收到一个字符，但额外的两个字符仍保留在缓冲区中。当您给出不正确的答案时，您会循环并自动从缓冲区中读取这两个字符。它们与性别不匹配，因此循环继续。最好的解决方案是分析字符串而不是字符：

```
InputStreamReader converter = new InputStreamReader(System.in);
BufferedReader in = new BufferedReader(converter);
String s = in.readLine(); 
```

请记住使用`equals`方法而不是`==`字符串比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T09:25:33.883

按下后你按下回车`h`；在你这样做之前你不会*看到*`'h'`，但是在你看到下一个字符之前你仍然会看到返回（从它的外观上看，这可能是两个字符，可能是`'\r'`和`'\n'`）。

您可能希望一次读取*一行*文本，而不是单个字符 - 您只会在用户按下 return 时看到输入，这意味着您无需担心这个特定方面。

您可以`Scanner`为此使用，也可以使用`BufferedReader`wrapping `System.in`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T03:14:13.910

采用`Scanner scan = new Scanner(System.in)`

这是您的代码的工作版本....

```
public class Info{

        public static void main (String[]args) throws IOException{

        char gen;
            Scanner scan = new Scanner(System.in);          // Change made here

            while(true) {  

                System.out.print("\nENTER YOUR GENDER (M/F) : ");

                gen= scan.next().charAt(0);             // Change made here

                if(gen=='M' || gen=='F' || gen=='m' || gen=='f'){
                    break;
                }
                else{                                 // Change made here
                    System.out.println();
                    System.out.println("Your Option is not Available, pls try again");
                    continue;
                }
            }

            System.out.println("\nGENDER = "+gen);
        }
    } 
```

# android - 未执行异步任务 doInBackground

> ID：11241600
> 
> 赞同：1
> 
> 时间：2012-06-28T09:23:10.830
> 
> 标签：android, android-asynctask, resume-download

我有一系列 asyncTask 一个接一个地执行以从服务器下载 pdf。但有时当我最小化应用程序然后恢复它（在后台下载）时，下一个 asyncTask 将在当前运行后不久执行asyncTask 卡在 preExcute 中。doInBackground 没有被执行。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:32:00.303

这是 AsyncTasks 上的一个已知问题。AsyncTasks 的默认执行程序是`SERIAL_EXECUTOR`. 您可以在此执行程序的队列中拥有 5 个 AsyncTask。之后，它将停止制作新的`Threads`.

如果你这样做：

```
public void someMethod() {
     new MyAsyncTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} 
```

它会在不同的执行器上运行您的 AsyncTasks，该执行器汇集您的线程。它的限制为 15。但最好的是，它并行运行线程`SERIAL_EXECUTOR`并将它们放入队列中并一个接一个地执行它们。

# javascript - 单击时获取选定锚标记的 id 并相应地设置另一个 div 的 html

> ID：11241603
> 
> 赞同：1
> 
> 时间：2012-06-28T09:23:24.613
> 
> 标签：javascript, html

我有 3 个锚 (a) 标签，它们都共享一个 div 元素来操作。请参阅下面的我的 html。基本上，当您单击锚标记 1 时，我希望它用 html 填充 id="fillDiv" 的 div。当您单击第二个锚标记时，它应该清除该#fillDiv 并将其替换为新的 html。我该如何设置这样的功能。这是我的尝试

HTML：

```
<div>
<a id="a1" href="javascript: changeDiv();">tag1</a>
<a id="a2" href="javascript: changeDiv();">tag2</a>
<a id="a3" href="javascript: changeDiv();">tag3</a>
</div>

<div id="fillDiv"></div> 
```

JS：

```
function changeDiv(){
     if changeDiv().is('#a1'){
         document.getElementById('fillDiv').html('<div>filling 1</div>');
         }

     elseif
         changeDiv().is('#a2'){
         document.getElementById('fillDiv').html('<div>filling 2</div>');
         }

     elseif
         changeDiv().is('#a3'){
         document.getElementById('fillDiv').html('<div>filling 3</div>');
         }
} 
```

请注意：我不想使用显示/隐藏 div 功能，对我来说重要的是填充 Div 只是一个 div，而不是与其他 2 个在开始时具有 display:none 属性的 div 相结合。

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:27:26.217

您的 html 保持不变，只需删除`onclick`事件并在 js 下面尝试 -

```
$("a").click(function(){
   if($(this).attr("id") == "a1") {
      $("#fillDiv").html("<div>filling 1</div>")
   }
   else if($(this).attr("id") == "a2") {
      $("#fillDiv").html("<div>filling 2</div>")
   }
   else if($(this).attr("id") == "a3") {
      $("#fillDiv").html("<div>filling 3</div>")
   }
}); 
```

这是小提琴 - [http://jsfiddle.net/ashwyn/cPZfX/](http://jsfiddle.net/ashwyn/cPZfX/)

如果你的 id 会是这样，`a1, a2, a3`那么你会做一个循环并做更多的优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T09:33:53.170

下面的代码遵循您的示例，但您可以根据 id 使其更通用。

```
var element;
var handler = function( event ) {
    var target = document.getElementById('fillDiv');
    switch this.id {
       case 'a1':
         target.html('<div>filling 1</div>');
         break;
       case 'a2':
         target.html('<div>filling 2</div>');
         break;
       case 'a3':
         target.html('<div>filling 3</div>');
         break;
    }
};
for ( var i = 1; i <= 3; i++ ) {
  element = document.getElementById( 'a' + i );
  element.addEventListener( 'click', handler );
} 
```

# android - Android SDK Manager - 下载 SDK 3.0 到 3.2

> ID：11241605
> 
> 赞同：4
> 
> 时间：2012-06-28T09:23:35.267
> 
> 标签：android, sdk

当我的 Android SDK Manager 打开时，它会显示 SDK 4.0.3，然后是 2.3.3、2.2 和 2.1

为什么没有列出 3.x SDK？

我正在使用 Windows 操作系统

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T20:28:15.337

问题是您的 Android SDK 管理器已过时。旧版本没有列出这些 SDK。我刚刚更新到 Android SDK Tools 修订版 20，您可以通过 Android SDK Manager 进行更新。打开SDK Manager，选择Android SDK Tools，点击右下角的“Install 1 Package”，等待SDK Manager基本自行更新。最后，您必须关闭并重新打开 SDK 管理器，这些 SDK 将被列出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:43:49.670

如果您使用代理网络，请打开 Android SDK 管理器。

转到*工具 -> 选项*并提供代理地址和端口号，然后重新启动 Android SDK 管理器。

它将显示尚未安装的更新和软件包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:00:55.463

在 Eclipse 的工具栏中单击“打开 Android SDK 管理器”，然后弹出一个窗口，然后选择 android 3.* 和其他包，然后单击安装包按钮，然后再显示一个弹出窗口，然后选择全部接受并单击安装按钮并查看下面的链接，对于我糟糕的英语交流感到抱歉。

[添加包](http://developer.android.com/sdk/installing/adding-packages.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:06:26.940

单击 Eclipse 工具栏上显示“打开 Android SDK 管理器”的图标。

您将显示系统中已安装的软件包和缺少的软件包。

选择要安装的包。（在您的情况下为 Android 3.0 和 3.1）。

在接下来的屏幕中，单击“全部接受”和“安装”。

# javascript - 使用 setInterval 调用的 Javascript 绑定

> ID：11241607
> 
> 赞同：14
> 
> 时间：2012-06-28T09:23:40.017
> 
> 标签：javascript, binding, call, setinterval, object-literal

如何使用“call”和“setInterval”来获取对象文字来调用它自己的方法之一？

这是一个例子。这有效，我理解它为什么有效。定时器对象每秒调用一次自己的tick方法

```
var timer =
{ 
  start: function()
  {
    var self = this;
    setInterval(function(){self.tick();}, 1000);

  },

  tick: function()
  {
    console.log("tick!");
  }
};

timer.start(); 
```

我试图通过使用“调用”来简化这段代码。下一个例子是我想出的最好的例子。但它不起作用：tick 方法只被调用一次，然后我得到一个类型错误。

```
var timer =
{ 
  start: function()
  {
    setTimeout.call(this, this.tick(), 1000);
  },

  tick: function()
  {
    console.log("tick!");
  }
};

timer.start(); 
```

我想我真的不明白 call 是如何工作的。谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-28T09:26:08.700

您`.calling` `.setInterval`不是浏览器调用的回调函数：

```
setInterval( this.tick.bind(this), 1000 ); 
```

应该管用。看[`.bind`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-26T20:06:44.350

这就是我最终的结果：

```
 var timer = {
    time: 0,
    start: function() {
      var timerTick = this.tick.bind(this);
      window.setInterval(function() {
        timerTick();
      }, 1000);
    },
    tick: function() {
      this.time += 1;
      console.log(this.time);
    }
  };

  timer.start(); 
```

# php - 在 MYSQL 中使用 ORDER BY 子句对数据进行排序

> ID：11241610
> 
> 赞同：0
> 
> 时间：2012-06-28T09:24:02.733
> 
> 标签：php, mysql, sql

我的表格中有两种类型的交易`1)One way relocation deal and 2)Regular deal`。我的 db -Vehicles 中有一张桌子。

```
vehicles table
=====================================================
id, pickuplocation, returnlocation, included location 
```

现在，当用户`One way relocation deal`在 db 中选择 then 时，只会`id,pickuplocation,returnlocation`插入并且该列`included location`将为空。当用户选择时`Regular deal`，该列将为`pickuplocation,returnlocation`空，只有列`id and included location`将设置。问题是我想使用他们的位置对整个数据进行排序。我试过这个查询 -

```
SELECT * 
FROM vehicles 
where 1=1 
ORDER BY pickuplocation ASC,returnlocation ASC 
```

但它不会给出正确的结果，因为某些数据在包含的位置为空。我如何对所有数据进行排序`pickuplocation,returnlocation,exculded location`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:47:27.847

你想要的`IFNULL`功能

尝试排序

```
 IFNULL(returnlocation, includedlocation) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:47:37.240

得到了解决方案。我使用了这个查询

```
(SELECT id,pickuplocation,returnlocation,deal_type FROM `vehicles` where deal_type = 1)

UNION

(SELECT id,included_location,excluded_location,deal_type FROM `vehicles`  where deal_type = 2)

order by pickuplocation,returnlocation 
```

我希望这对将来可能遇到类似问题的人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:01:02.253

```
SELECT * 
FROM vehicles 
where 1=1 AND ($condition) 
ORDER BY pickuplocation ASC,returnlocation ASC 
```

假设`$condition`将类似于`field01=1`OR`field2 >=1`

# c++ - What differences come out between defining functions as static members and free?

> ID：11241619
> 
> 赞同：1
> 
> 时间：2012-06-28T09:24:26.283
> 
> 标签：c++, overloading

Consider the following code snippet:

```
#include <iostream>

using namespace std;

struct Element {
    void SetVisible(bool) { cout << "Called SetVisible on Element" << endl; }
};

struct ElementQuery {
    ElementQuery(Element * e) : element(e) { }
    Element * Get() const { return element; }
    Element * element;
};

namespace A {

static void SetVisible(ElementQuery const& element, bool show) {
    cout << "Called SetVisible on ElementQuery" << endl;
    SetVisible(element.Get(), show);
}

static void SetVisible(Element * element, bool show) {
    element->SetVisible(show);
}

};

int main() {
    Element * e = new Element();
    ElementQuery q(e);
    A::SetVisible(q, true);
    delete e;
    return 0;
} 
```

When run, program fails because of infinite recursion in call `SetVisible(element.GetFirst(), show)`. As I presume that is so because of function `SetVisible(Element * element, bool show)` is not declared yet at the time of call though it fits overload resolution better.

But when I change `namespace A` to `struct A`, recompile and run, everything works fine. Program prints two lines to `cout` and ends gracefully.

My question is: why does the second call "sees" second declaration of `SetVisible` and what are the differences between such declarations?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:46:27.357

It's because the namespace is processed in order and there exists a conversion between Element and ElementQuery (because your constructor is not explicit).

Here is the corrected code

```
#include <iostream>

using namespace std;

struct Element {
    void SetVisible(bool) { cout << "Called SetVisible on Element" << endl; }
};

struct ElementQuery {
    explicit ElementQuery(Element * e) : element(e) { }
    Element * Get() const { return element; }
    Element * element;
};

namespace A {

static void SetVisible(Element * element, bool show) {
    cout << "Called A::SetVisible on Element" << endl;
    element->SetVisible(show);}

static void SetVisible(ElementQuery const& element, bool show) {
    cout << "Called A::SetVisible on ElementQuery" << endl;
    SetVisible(element.Get(), show);
}

};

int main() {
    Element * e = new Element();
    ElementQuery q(e);
    A::SetVisible(q, true);
    delete e;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:44:27.373

It seems this code should not be compiled at all. Because this call: SetVisible(element.Get(), show); The $void SetVisible(Element * element, bool show) is not visible at moment call. You need to move this function before $void SetVisible(ElementQuery const& element, bool show).

# javascript - window.location.hash，IE，后退和前进：地址栏中的值更改但在 DOM 中没有？

> ID：11241620
> 
> 赞同：0
> 
> 时间：2012-06-28T09:24:28.980
> 
> 标签：javascript, internet-explorer, navigation

尝试通过此示例 javascript 代码检测后退按钮事件：

```
document.location.hash="#1";
document.location.hash="#2";
document.location.hash="#3";

function check() {
    if("#3"!=window.location.hash) {
        alert("Back button clicked");
    }
    setTimeout(check, 100);
}
check(); 
```

在 FF 和 Chrome 中它可以工作，在 IE 中 window.location.hash 始终为“#3”，即使我单击“后退”按钮并观察地址栏中的 URL 如何更改 #2、#1。

有什么方法可以让 IE 在向后和向前按下后看到哈希的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:51:16.463

我假设您正在通过用户或定时事件动态更改哈希。

您不需要使用 setTimeout 来检查哈希，因为有一个 window.onhashchange 事件可以用来触发您的代码。

```
window.onhashchange = function(e) {
  alert('Back button clicked');
} 
```

每次哈希更改时都会触发此代码，无论是通过使用后退/前进历史按钮还是通过代码更改哈希。如果您不希望在使用代码更改哈希时触发代码，则可以使用 if 语句，以便它仅适用于后退/前进历史导航，如下例所示： [https ://stackoverflow.com /a/11545805/1534818](https://stackoverflow.com/a/11545805/1534818)

或者

您可以使用 window.onhashchange 根据哈希值执行所有代码，并使用 onclick 事件更改哈希值，以确保您的代码只执行一次。

html:

```
<a href='#1' class='nav'>1<a/>
<a href='#2' class='nav'>2<a/>
<a href='#3' class='nav'>3<a/> 
```

javascript/jquery：

```
/*$('.nav').click(function() {                 //do this if you aren't
  window.location.hash = '#' + $(this).html(); //changing the hash in your html
});*/
function getLocationHash() {
  return window.location.hash.substring(1);
} 
window.onhashchange = function(e) {
  switch(getLocationHash()) {
    case '1': 
      execute code block 1;
      break;
    case '2':
      execute code block 2;
      break;
    case '3':
      execute code block 3;
      break;
    default: 
      code to be executed if different from case 1, 2, and 3;
  }
} 
```

我在我的网站上做了一些类似的事情：http: [//www.designhandler.com](http://www.designhandler.com)

# javascript - 在窗口调整大小时重新加载 jQuery Carousel 以将方向从垂直更改为水平

> ID：11241621
> 
> 赞同：3
> 
> 时间：2012-06-28T09:24:29.787
> 
> 标签：javascript, jquery, resize, window, carousel

我正在为响应式布局创建一个画廊 - 我正在使用[jQuery Riding Carousels](http://sorgalla.com/projects/jcarousel/)作为缩略图。

当窗口大小重新调整为小于 1024px 时，轮播的方向需要从垂直变为水平......

我目前正在这样做：

```
<script type="text/javascript">
jQuery(document).ready(function() {
  jQuery('#mycarousel').jcarousel({
    vertical: $(window).width() > 1008,
    scroll: 3,
  });
});
</script> 
```

... JS 只是连接一个类，但如果您通过拖动它来重新调整浏览器窗口的大小，它不会这样做 - 您需要刷新页面。

有没有办法销毁脚本并即时重新初始化它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T22:50:42.903

请检查工作示例：[http](http://codebins.com/bin/4ldqpba/1/Jcarousel%20vertical%20on%20resize) ://codebins.com/bin/4ldqpba/1/Jcarousel%20vertical%20on%20resize 在所有浏览器中测试并且工作正常。赏金是我的 :) 在示例中，我给出了阈值宽度 350，您可以通过调整结果窗格的大小来测试它，并且一旦您开始拥有水平滚动条，它将转换为垂直滚动条。

根据您的要求，1 个可能的问题是，如果您在图像上有任何处理程序，它们将在更改显示方式后消失。它的解决方案是将您的#mycarousel 包装在一个 div 中，并使用 Jquery 委托来处理包装器上的事件，因此事件也没有问题。如果您遇到这种情况，请告诉我。

以下代码完全符合您的需要。

当窗口大小调整为小于 1024px 时，轮播的方向需要从垂直变为水平。

这与示例相反，因为对我而言，如果宽度较小使其垂直则更有意义。

```
jQuery(document).ready(function() {
    var widthCheck = 1008;
    var resizeTimer = null,
        verticalFlg = $(window).width() > widthCheck;
    var obj = jQuery('#mycarousel').clone();
    $('#mycarousel').jcarousel({
        vertical: verticalFlg,
        scroll: 2
    });
    jQuery(window).resize(function() {
        resizeTimer && clearTimeout(resizeTimer); // Cleraring old timer to avoid unwanted resize calls.
        resizeTimer = setTimeout(function() {
            var flg = ($(window).width() > widthCheck);
            if (verticalFlg != flg) {
                verticalFlg = flg;
                $('#mycarousel').closest(".jcarousel-skin-tango").replaceWith($(obj).clone());
                $('#mycarousel').jcarousel({
                    vertical: verticalFlg,
                    scroll: 2
                });
            }
        }, 200);
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:29:10.390

或者你可以看看源码。我猜你使用的是 0.2 版

查看源代码 [https://github.com/jsor/jcarousel/blob/0.2/lib/jquery.jcarousel.js](https://github.com/jsor/jcarousel/blob/0.2/lib/jquery.jcarousel.js) 我们可以看到有两行（80 和 81）仅在对象初始化中完成。这些线是

```
this.wh = !this.options.vertical ? 'width' : 'height';
this.lt = !this.options.vertical ? (this.options.rtl ? 'right' : 'left') : 'top'; 
```

这条线也在 149

```
if (!this.options.vertical && this.options.rtl) {
  this.container.addClass('jcarousel-direction-rtl').attr('dir', 'rtl');
} 
```

如果您将这些添加到回调中，您可能会获得更好的结果。

您也可以尝试插件的 0.3 版。

* * *

之前的回答：

现在无法自己测试，但试试这个：

```
<script type="text/javascript">
jQuery(document).ready(function() {
  jQuery('#mycarousel').jcarousel({
    vertical: $(window).width() > 1008,
    scroll: 3,
    reloadCallback: function () {
        this.options.vertical = $(window).width() > 1008;
    },
  });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:05:53.697

```
<script type="text/javascript">
    jQuery(document).ready(function() {
      var sizeCheck = function() {
        return $(window).outerWidth() >= 1024
      }
      jQuery('#mycarousel').jcarousel({
        vertical: sizeCheck(),
        scroll: 3,
      });
      var jCarousel = jQuery('#mycarousel').data('jcarousel');
      window.onresize = function() {
        jCarousel.options.vertical = sizeCheck(); // maybe you have to access the option through jCarousel.plugin.options.vertical
        jCarousel.reset();
      }
    });
    </script> 
```

也许这行得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:31:01.690

我还没有测试过下面的代码，但我很确定下面的代码应该可以工作：

```
<script type="text/javascript">
    var carousel;
    jQuery(window).resize(function() {
        if(carousel !== undefined) carousel.destroy();
        carousel = jQuery('#mycarousel').jcarousel({
            vertical: $(window).width() > 1008,
            scroll: 3,
        });
    });
</script> 
```

甚至更好的东西：

```
<script type="text/javascript">
    var carousel;
    jQuery(document).ready(function() {
        carousel = jQuery('#mycarousel').jcarousel({
            vertical: $(window).width() > 1008,
            scroll: 3,
        });
    });
    jQuery(window).resize(function() {
        //NOT SURE WHICH OF THE BELOW LINES WOULD WORK, try both and check which works
        carousel.options.vertical = $(window).width() > 1008;
        carousel.vertical = $(window).width() > 1008;
        carousel.reload();
    });
</script> 
```

如果没有，您应该`console.log(carousel)`在代码中添加 a 并检查输出值的原型是什么（检查 F12）。应该有一些类似于destroy（或check `console.log($.jcarousel())`）的东西。

# javascript - 显示/隐藏外部 .js 文件的一部分

> ID：11241624
> 
> 赞同：0
> 
> 时间：2012-06-28T09:24:37.767
> 
> 标签：javascript, jquery

如何使用“切换”按钮显示/隐藏以下外部 .js 文件的答案？如果我可以访问代码，我可以将答案包装在一个 div 中，但由于这是一个外部 .js 文件，这可能吗？

这是小提琴和代码：

[http://jsfiddle.net/Wx5mM/](http://jsfiddle.net/Wx5mM/)

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $(".pds-pd-link").hide();
        $(".a2a_dd.pds-share").hide();
        $(".pds-box").width(220);
      });
    </script>
    <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/5968383.js"></script>
    <noscript><a href="http://polldaddy.com/poll/5968383/">This is a test question ?</a></noscript> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:33:38.633

外部 JavaScript 只是将元素添加到 DOM 中，因此可以使用 jQuery 来操作它们，如下所示：

```
$(document).ready(function() {
    $('.pds-question').append('<input type="button" class="showanswer" value="show answer"/>');
    $('.pds-answer').hide();
    $('.showanswer').click(function() {
        $(this).parent().next().show();
    });
});​ 
```

**[这里的工作示例](http://jsfiddle.net/Wx5mM/9/)**

使用[`.append()`](http://api.jquery.com/append/)添加`button`，然后隐藏答案。然后该[`.click()`](http://api.jquery.com/click/)函数显示答案

# sql - 从文件名中删除扩展名

> ID：11241635
> 
> 赞同：14
> 
> 时间：2012-06-28T09:25:08.730
> 
> 标签：sql, tsql

我正在使用 SQL。

在表 tblDemo 中，其中一列是“文件名”。此列的每一行都包含具有任何扩展名的不同文件名。例如。'flower.jpeg'、'batman.mov'、study.pdf 等。

请在查询中向我提出建议，该查询可以帮助我从“文件名”列的每一行中删除扩展名（以及点）。这样我就可以只获取名称 Ex。“花”、“蝙蝠侠”、“学习”等。

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-28T09:47:33.837

试试这个：

```
UPDATE TableName
SET FileName = REVERSE(SUBSTRING(REVERSE(FileName), 
                       CHARINDEX('.', REVERSE(FileName)) + 1, LEN(FileName)) 
```

**[查看 DEMO @ SQLFiddle.com](http://sqlfiddle.com/#!3/05dba/6)**

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-28T09:30:56.073

在 Sql Server 上测试。这显示没有扩展名的文件名，更改为 Update / Set 以修改数据。

```
SELECT left([FileName], len([FileName]) - charindex('.', reverse([FileName]))) 
  FROM tblDemo 
```

**已编辑：**使用反向修改，因此当字段包含多个点时也可以使用。

这里是**更新表**版本：

```
UPDATE Testing 
   Set [FileName] = left([FileName], 
                         len([FileName]) - charindex('.', Reverse([FileName]))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-20T18:45:31.980

我需要摆脱所有扩展名，即：.tar.gz 或 .txt.out。这在 SQL Server 中对我有用：

```
CREATE FUNCTION RemoveFileExt
(
    @fullpath nvarchar(500)
)
RETURNS nvarchar(500)
AS
BEGIN
    IF(CHARINDEX('.', @fullpath) > 0)
    BEGIN
       SELECT @fullpath = SUBSTRING(@fullpath, 1, CHARINDEX('.', @fullpath)-1)
    END
    RETURN @fullpath
END;

CREATE FUNCTION RemoveFileExtAll
(
    @fullpath nvarchar(500)
)
RETURNS nvarchar(500)
AS
BEGIN
    IF(CHARINDEX('.', @fullpath) > 0)
    BEGIN
        SELECT @fullpath = dbo.RemoveFileExt(@fullpath)
    END
    RETURN @fullpath
END;

select dbo.RemoveFileExtAll('test.tar.gz');

OUTPUT> test 
```

作为奖励，只需从 Linux 或 Windows 中的完全限定路径中获取基本名称：

```
CREATE FUNCTION GetBaseName
(
    @fullpath nvarchar(500)
)
RETURNS nvarchar(500)
AS
BEGIN
    IF(CHARINDEX('/', @fullpath) > 0)
    BEGIN
       SELECT @fullpath = RIGHT(@fullpath, CHARINDEX('/', REVERSE(@fullpath)) -1)
    END
    IF(CHARINDEX('\', @fullpath) > 0)
    BEGIN
       SELECT @fullpath = RIGHT(@fullpath, CHARINDEX('\', REVERSE(@fullpath)) -1)
    END
    RETURN @fullpath
END;

select dbo.GetBaseName('/media/drive_D/test.tar.gz');

OUTPUT> test.tar.gz

select dbo.GetBaseName('D:/media/test.tar.gz');

OUTPUT> test.tar.gz

select dbo.GetBaseName('//network/media/test.tar.gz');

OUTPUT> test.tar.gz 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-12T20:49:06.187

这是一个返回所需结果的简单选择语句：

```
 SELECT  [Filename], SUBSTRING([Filename], 1, charindex('.',[Filename])-1) as [New name] FROM [Table] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-30T19:03:40.170

在 MySQL 中，这对我有用。

```
set @file = 'test1.test2.test3.docx';

SELECT      substring(@file, 1, (length(@file) - (length(substring_index(@file, '.', -1)) + 1))) as 'name_file',
            substring_index(@file, '.', -1) as 'extension'; 
```

# shell - 使用 awk 或 sed 根据日期组合 2 个文件

> ID：11241638
> 
> 赞同：0
> 
> 时间：2012-06-28T09:25:21.107
> 
> 标签：shell, sed, awk

我有2个文件，格式如下，

File1 的内容，

```
02-01-12 28.46
02-02-12 27.15
02-03-12 47.54
02-04-12 27.36
02-05-12 47.57
02-06-12 27.01
02-07-12 27.41
02-08-12 27.27
02-09-12 27.39 
```

File2 的内容，

```
02-01-12 11.46
02-02-12 12.15
02-03-12 14.54
02-04-12 15.36
02-05-12 17.57
02-06-12 17.01
02-07-12 17.41
02-08-12 21.27
02-09-12 17.39 
```

我想根据以下日期将它们组合成一个文件，

```
02-01-12 28.46 11.46
02-02-12 27.15 12.15
02-03-12 47.54 14.54
....................
....................
.................... 
```

请帮忙 ！！提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:34:55.290

你想要的是`join`：

*从手册页*：

> join - 在一个公共字段上连接两个文件的行

尝试：

```
$ join file1 file2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:49:19.047

仅使用 sed：

```
/bin/sed -n '
p
R f2
' f1 |
/bin/sed 'N;s/\n[^ ]*//;' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:36:56.397

完整的真实工作示例使用`paste`：

```
paste FILE1 <(cut -d " " -f2 FILE2) 
```

看 ：

```
man 1 paste 
```

# c# - 在 c# windows 应用程序中单击取消按钮时终止正在运行的 exec master..xp_cmdshell bcp 选择会话

> ID：11241644
> 
> 赞同：1
> 
> 时间：2012-06-28T09:25:36.243
> 
> 标签：c#, sql-server, database, bcp

我在 C# windows 应用程序中遇到了一个问题。

在这里，我正在使用 C# Windows 应用程序。

我的问题是，我有一个带有两个按钮的表单提交和取消

在按钮单击中，我正在盯着一个线程。

该线程包含一个具有以下代码部分的存储过程，这里它将从 .csv 文件中选择批量信息并使用 temp_“用户指定的文件名.csv”加载到服务器项目文件夹中。

当进程完成时，我们将 temp_“用户指定的文件名.csv”信息复制到“用户指定的文件名.csv”，最后我们从服务器文件夹中删除 temp_“用户指定的文件名.csv”。它工作正常。

exec master..xp_cmdshell ''bcp "select ''''Column1'''',''''Column2'''',''''Column3'''',''''Column4'''', ''''Column4'''',''''Column5'''',''''Column6'''',''''Column7'''',''''Column8''''" queryout "' + @Parent_Folder + @Transformed_Tbl + '.csv" -c -t, -T -Slocalhost'''

exec master..xp_cmdshell ''bcp Databasename..' + @database table+ ' out "' + @serverfolder+ 'temp_' + @user 指定文件名 + '.csv" -c -t, -T -Slocalhost'''

exec master..xp_cmdshell ''copy /b "' + @serverfolder+ @user 指定文件名 + '.csv" + "' + @serverfolder+ 'temp_' + @user 指定文件名 + '.csv" "' + @serverfolder + @user 指定文件名+ '.csv"'''

它运行完美，但是当我点击取消按钮时，我正在中止正在运行的线程并从文件夹中删除“temp_user指定的文件名.csv”和“用户指定的文件名.csv”并更新数据库。

它中止并关闭所有 sql 会话并更新数据库但它没有删除文件“temp_user 指定的文件名.csv”，为什么因为在服务器文件夹中仍然 bcp 进程仍在运行并且 sql server 有一个活动会话。

如果我关闭应用程序，即使 bcp 进程仍在运行。

单击取消按钮时如何关闭 bcp.exe 会话。

请让我知道紧急解决方案..

# c# - 为什么结构没有析构函数？

> ID：11241647
> 
> 赞同：2
> 
> 时间：2012-06-28T09:25:40.170
> 
> 标签：c#, struct, destructor

> **可能重复：**
> [为什么结构不能有析构函数？](https://stackoverflow.com/questions/8276036/why-structs-cannot-have-destructors)

我知道 .NET 中的结构没有析构函数，但不清楚为什么它们会以这种方式受到限制。

阻止结构具有析构函数的技术原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:27:03.417

[来源：](http://www.jaggersoft.com/pubs/StructsVsClasses.htm#can%20have%20a%20destructor)

> 结构不能有析构函数。析构函数只是 object.Finalize 变相的覆盖，而**作为值类型**的结构不受垃圾回收的影响

另见[析构函数](http://msdn.microsoft.com/en-us/library/66x5fx1b%28v=vs.80%29.aspx)

> 析构函数不能在结构中定义。它们仅与类一起使用。
> 
> 析构函数隐式调用对象基类的 Finalize。

# facebook - 如何将 FB 分享按钮链接到应用程序内的 URL？

> ID：11241648
> 
> 赞同：0
> 
> 时间：2012-06-28T09:25:40.480
> 
> 标签：facebook, url, iframe, share

我的应用程序中有多个共享按钮。当我单击它们时，它会共享 iframe 的链接，例如：

```
www.mypage.com/?whatever=whatelse 
```

但我需要与“周围”的 facebook 页面共享此链接，因此该链接位于我的应用程序内的 facebook iframe 中：

```
www.facebook.com/mypage/app_123456789/????????????????? 
```

是否可以在我的应用程序中设置一些参数以进行深度链接以进行共享？

现在我只是分享我的应用程序的索引页面，里面没有任何参数或特定的 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:30:43.983

您必须使用 signed_request 变量来存储您想要共享的页面。据我所知，其中有一个 app_data 字段，可让您存储自定义值 - [https://developers.facebook.com/docs/authentication/signed_request/](https://developers.facebook.com/docs/authentication/signed_request/)

然后，当请求页面以确定要加载的内容时，您必须从 signed_request->app_data 中提取自定义变量。然后，您显然可以在附加了 signed_request 的情况下共享指向 fb 页面的链接。它仍然只请求一页，但有点模拟深度链接。

# amazon-dynamodb - 如何使用rest api从dynamodb获取数据

> ID：11241653
> 
> 赞同：16
> 
> 时间：2012-06-28T09:25:52.630
> 
> 标签：amazon-dynamodb

如何使用 RESTful API 获取 Amazon DynamoDB 数据？

有没有办法使用 REST url 获取 Amazon DynamoDB 数据，如果有，传递 url 所需的参数是什么？

我们已将 DynamoDB 端点视为 url，并将其附加到`accesskey`和`secretaccesskey`，是否还需要附加到 url？

如果有人用 DynamoDB RESTful API 试过这个，你能给我一个如何获取表数据的例子吗？

一个示例 url 也很好，它显示了如何通过 RESTful API 连接到 DynamoDB。

理想情况下，一个包含所有所需参数的示例 url。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-17T15:42:49.013

有一个 AWS 文档，包括一个示例：

[http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/MakingHTTPRequests.html](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/MakingHTTPRequests.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:24:40.263

这不是 Dynamo 的工作方式，您必须构建自己的 RESTful API（即使用适用于 PHP 的 AWS 开发工具包）来访问 Dynamo，将数据重新格式化为您想要的格式，然后将其返回。很容易做到:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-17T05:05:45.500

您可以使用指向 Lambda 函数的 API 网关从 DynamoDB 中获取数据。您的 API 网关 URL 的端点将是您的休息端点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-05T21:01:35.397

`GetItem`以下是通过 AWS API 对 DynamoDB 表执行操作的最小 JavaScript 示例：

```
const DYNAMODB_ENDPOINT = 'https://dynamodb.us-east-1.amazonaws.com';
let aws = new AwsClient({ accessKeyId: AWS_ACCESS_KEY, secretAccessKey: AWS_SECRET_KEY });

async function dynamoDbOp(op, opBody) {
    let result = await aws.fetch(DYNAMODB_ENDPOINT, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-amz-json-1.0',
            'X-Amz-Target': 'DynamoDB_20120810.' + op
        },
        body: JSON.stringify(opBody)
    });

    return result.json();
}

let dbResponse = await dynamoDbOp('GetItem', {
    TableName: "someTableName",
    Key: {
        someTableKey: {
            S: "someKeyValue"
        }
    }
});

console.log(dbResponse.json()); 
```

请注意，这`AwsClient`是一个由[aws4fetch](https://github.com/mhart/aws4fetch)定义的类，它负责为您签署 AWS 请求。有关更多信息，请参阅[AWS GetItem API 文档](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_GetItem.html)。

# c# - 在两次请求后保存 ObjectContext 依赖的对象 (EF/MVC 3)

> ID：11241654
> 
> 赞同：-1
> 
> 时间：2012-06-28T09:25:53.550
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4

使用 EntityFramework，我正在尝试结合 MVC 3 进行以下操作。

我有一个`ObjectContext`，它在每个请求开始时被初始化，并在请求结束时被处理。很像一个简单的`UnitOfWork`实现。现在考虑有一个`Order`类（EF 生成），它将被初始化。我通过`ObjectContext`重载的构造函数传递要使用的。

```
var order = new Order(myObjectContext); 
```

然后在`Order`类内部保留这个实例（私有字段）。在我设置了这个实例的一些属性之后`Order`（使用相同的`ObjectContext`）。我想将此实例放在用户会话中，因为在准备保存订单之前需要第二个网页来填充一些信息。

这是我被卡住了，在用户提交第二个网页后，我`Order`从会话中检索对象，设置更多属性并点击对象`.SaveChanges()`的`ObjectContext`引用`Order`。所以第一个请求中提出的那个。我认为这是必需的，因为在第一个请求期间（`Order`创建时），一些其他实体被添加到一个订单集合中。所以我必须再次使用相同的上下文。问题是在点击该`.SaveChanges()`方法后没有返回错误或任何错误，但数据没有保存在数据库中。甚至身份值也不会从零开始变化。没有任何承诺。

当我第一次尝试将对象添加到集合中时：

```
this._context.Order.AddObject(this);
this._context.SaveChanges(); 
```

请注意，此代码在一个方法中，放置在部分 Order 类中。这一次，在`.AddObject()`我收到消息：

`An entity object cannot be referenced by multiple instances of IEntityChangeTracker.`

我试图将`Order`对象从它的原始上下文中分离出来，并将其重新附加到第二个请求中的上下文，但当然这不起作用，因为其中一个`Order`属性是其他实体的集合，在第一个请求中检索并添加，因此使用第一个`ObjectContext`。

可能我可以通过`.SaveChanges()`在第一个请求结束时调用来解决这个问题。然后在下一个请求中，我必须使用该请求的`ObjectContext`. 问题是，我不想`Order`在第二个请求结束之前保存。

`ObjectContext`对我来说，会话​​中与实例一起保存的似乎`Order`需要“连接刷新”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:24:40.133

我不确定我是否理解您要执行的操作，但您似乎想对 Order 对象进行一些更改，并且仅在应用所有更改后才保存它。如果我错了，请纠正我，但我认为您将 ObjectContext 作为参数传递给 Order 对象，然后将 Order 对象放入会话中以嵌入连接并将其维护到下一页？

这可能是您的实体对象和 ObjectContext 断开连接的地方。

我建议你看看自我跟踪实体生成器 - [http://msdn.microsoft.com/en-us/library/ff407090.aspx](http://msdn.microsoft.com/en-us/library/ff407090.aspx)。也许这会对你有所帮助 - [http://henrycomputerworld.blogspot.no/2012/01/save-temporary-data-with-entity.html](http://henrycomputerworld.blogspot.no/2012/01/save-temporary-data-with-entity.html)

这应该允许您根据需要执行尽可能多的回发，并让 Order 实例跟踪它自己的更改。然后，您应该能够在单个 ObjectContext 实例上提交更改。

如果这没有帮助，也许您可​​以提供更多代码和解释。

# visual-studio-2010 - 是否可以在 Visual Studio 2010 中运行 VB 6？

> ID：11241656
> 
> 赞同：0
> 
> 时间：2012-06-28T09:26:07.747
> 
> 标签：visual-studio-2010, vb6

我对 Vb 6 有一些疑问。

1.  我想创建一个 VB 6 应用程序并且非常熟悉 Visual Studio。那么我可以使用 Visual Studio 作为编辑器而不是 VB 6 编辑器。

2.  我可以在 vb 6 中使用 dll。所以我可以覆盖 C# 中的最大代码。

请让我知道您对此的建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:54:05.223

不。

1 - 由于 VB.NET 和 VB6 之间的语法变化，编辑器将无法工作。例如，如果你写：

`Set Foo=Bar`VB.NET 编辑器将删除`Set`.

2 - 是的，您可以在 C# 或 VB.NET 项目中使用 VB6 DLL，这应该不是问题，但您无法在 Visual Studio 中编辑或编译它。

注意：您过去可以使用[Visual Studio 升级向导](http://msdn.microsoft.com/en-us/library/0zc22a8x%28v=vs.90%29.aspx)在 2010 之前的 Visual Studio 版本中“转换”VB6 应用程序，但该功能不再可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:44:03.273

请注意，当`.pdb`文件可用时，您可以在 Visual Studio 中调试 VB6 代码，但代码将被语法显示视为 VB.NET 代码。您只需要打开“本机”调试。

# android - 屏幕锁定时如何使服务正常工作？

> ID：11241664
> 
> 赞同：0
> 
> 时间：2012-06-28T09:26:30.883
> 
> 标签：android, service, notifications

我有一个应用程序，有一个服务..它在屏幕打开时正常工作....但是当屏幕锁定时服务不起作用....屏幕锁定时通知不起作用......

```
private void _startService() {
    Toast.makeText(this, "Mulai service", Toast.LENGTH_SHORT).show();
        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() { checkAlarm(); }
        },0, 60000);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:33:48.867

您可以使用唤醒锁。看到这个链接

[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

[使用锁定屏幕的 Android 应用程序](https://stackoverflow.com/questions/9836950/android-application-working-with-locked-screen)

# c# - POJO 到 POCO 的转换

> ID：11241666
> 
> 赞同：2
> 
> 时间：2012-06-28T09:26:39.387
> 
> 标签：c#, java, compact-framework, poco, pojo

我正在创建一个 Compact Framework 3.5 应用程序，它是旧 Java webapp 的客户端。双方的通信协议是REST+JSON。

POJO 序列化为 JSON 不是问题，因为 POJO 已经存在。但是，与其从头开始重写所有 POJO 源的 C# 版本以便能够反序列化 JSON 客户端，我更喜欢使用一些工具的一代。或者至少，使用“标准化”方法手动进行转换。

您知道一些可以满足这些需求的工具吗？还是一些手动方法？

提前致谢

法比安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:42:33.107

我认为这真的取决于你有什么

1.  如果你有一个[WADL](http://wadl.java.net/)，那么可能有一些工具可以从中生成类。
2.  如果您有请求和响应对象的 XSD，您还可以从中生成 C# 类。
3.  [您可以尝试使用将 java 转换为 C# 的工具](https://stackoverflow.com/questions/896867/tool-to-convert-java-to-c-sharp-code)

# linux - 冒号可以用作标识符吗？

> ID：11241667
> 
> 赞同：0
> 
> 时间：2012-06-28T09:26:50.823
> 
> 标签：linux, fork, colon

[我在The Bash command :(){ :|:& };](https://stackoverflow.com/questions/515844/the-following-bash-command-will-spawn-processes-to-kernel-death-can-you-explain)中看到了一段代码：将产生进程导致内核死亡。[你能解释一下语法吗？](https://stackoverflow.com/questions/515844/the-following-bash-command-will-spawn-processes-to-kernel-death-can-you-explain)如下

```
user@host$ :(){ :|:& };: 
```

这里冒号用作函数名称的标识符。冒号可以用作标识符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:35:41.183

根据[文档](http://www.gnu.org/software/bash/manual/bashref.html#index-identifier-11)：

> 姓名
> 
> 仅由字母、数字和下划线组成并以字母或下划线开头的单词。名称用作 shell 变量和函数名称。也称为标识符。

不，冒号在函数名中无效。因此，要么炸弹在 bash 中不起作用，要么文档失败。

我很快想到冒号可能指的是[内置的 operator](http://www.gnu.org/software/bash/manual/bashref.html#index-g_t_003a-107)，但我不明白它如何获得预期的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:35:45.743

是的，它可以。

```
$ :()
> {
> echo "hello from : :)"
> }
$ :
hello from : :) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-19T15:45:59.167

执行似乎不一致。您可以定义和调用包含冒号的函数，Google 甚至在其[样式指南](https://google.github.io/styleguide/shell.xml?showone=Function_Names#Function_Names)中为包建议了这一点。

尽管我注意到您无法导出或取消设置这些功能。

```
#!/usr/bin/env bash

foo:bar() {
  echo "foo:bar called"
}

foo:bar

export -f foo:bar

unset foo:bar 
```

`export`不会抱怨，但如果您之后调用另一个 bash 脚本则不`foo:bar`可用。

unset 甚至会触发错误：

```
/foo/bar: line 11: unset: `foo:bar': not a valid identifier 
```

* * *

```
$ bash --version
GNU bash, version 4.2.46(1)-release (x86_64-redhat-linux-gnu) 
```

# django - 什么是反向（）？

> ID：11241668
> 
> 赞同：286
> 
> 时间：2012-06-28T09:26:52.600
> 
> 标签：django

当我有时阅读 Django 代码时，我会在一些模板中看到`reverse()`。我不太确定这是什么，但它与 HttpResponseRedirect 一起使用。`reverse()`这应该如何以及何时使用？

* * *

## 回答 #1

> 赞同：434
> 
> 时间：2012-06-28T09:43:24.243

[`reverse()`| Django 文档](https://docs.djangoproject.com/en/stable/ref/urlresolvers/#reverse)

* * *

让我们假设在您`urls.py`的定义中：

```
url(r'^foo$', some_view, name='url_name'), 
```

然后，您可以在模板中将此 url 引用为：

```
<!-- django <= 1.4 -->
<a href="{% url url_name %}">link which calls some_view</a>

<!-- django >= 1.5 or with {% load url from future %} in your template -->
<a href="{% url 'url_name' %}">link which calls some_view</a> 
```

这将呈现为：

```
<a href="/foo/">link which calls some_view</a> 
```

现在假设您想在您的中做类似的事情`views.py`- 例如，您正在处理其他一些 URL（not `/foo/`）在其他一些视图（not `some_view`）中，并且您希望将用户重定向到`/foo/`（通常是成功提交表单的情况）。

你可以这样做：

```
return HttpResponseRedirect('/foo/') 
```

但是，如果您将来想更改 URL 怎么办？您必须在代码中更新您`urls.py` *和*所有对它的引用。这违反了[DRY（不要重复自己）](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则和仅在一个地方进行编辑的整个想法——这是值得努力的事情。

相反，你可以说：

```
from django.urls import reverse
return HttpResponseRedirect(reverse('url_name')) 
```

这会在您的项目中定义的所有 URL 中查找使用名称定义的 URL，`url_name`并返回实际的 URL `/foo/`。

这意味着您仅通过其`name`属性引用 URL - 如果您想更改 URL 本身或它所引用的视图，您可以通过仅编辑一个位置来执行此操作 - `urls.py`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-10-22T09:40:54.817

现有的答案很清楚。以防万一您不知道为什么调用`reverse`它：它需要输入一个 url 名称并给出实际的 url，这与先有一个 url 然后给它一个名称相反。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-04-06T09:48:22.707

现有的答案很好地解释了Django 中这个函数的***含义。***`reverse()`

但是，我希望我的回答能阐明***为什么***：为什么`reverse()`在模板视图绑定中使用代替其他更直接、可以说更pythonic的方法，以及这种“重定向*通过* `reverse()`”流行的合理原因是什么？模式”在 Django 路由逻辑中。

正如其他人所提到的，一个关键的好处是 URL 的反向构造。就像您`{% url "profile" profile.id %}`从应用程序的 url 配置文件生成 url 一样：例如`path('<int:profile.id>/profile', views.profile, name="profile")`.

但正如 OP 所指出的，使用`reverse()`也通常与使用 结合使用`HttpResponseRedirect`。但为什么？

> 我不太确定这是什么，但它与 HttpResponseRedirect 一起使用。这个 reverse() 应该如何以及何时使用？

考虑以下内容`views.py`：

```
from django.http import HttpResponseRedirect
from django.urls import reverse

def vote(request, question_id):
    question = get_object_or_404(Question, pk=question_id)
    try:
        selected = question.choice_set.get(pk=request.POST['choice'])
    except KeyError:
        # handle exception
        pass
    else:
        selected.votes += 1
        selected.save()
        return HttpResponseRedirect(reverse('polls:polls-results',
                                    args=(question.id)
        )) 
```

而我们最小的`urls.py`：

```
from django.urls import path
from . import views

app_name = 'polls'
urlpatterns = [
    path('<int:question_id>/results/', views.results, name='polls-results'),
    path('<int:question_id>/vote/', views.vote, name='polls-vote')
] 
```

在`vote()`函数中，我们`else`块中的代码使用`reverse`了`HttpResponseRedirect`以下模式：

```
HttpResponseRedirect(reverse('polls:polls-results',
                                        args=(question.id) 
```

这首先意味着我们不必对 URL 进行硬编码（符合 DRY 原则），但更重要的是，`reverse()`通过处理从参数中解包的值（`args=(question.id)`由 URLConfig 处理）提供了一种构造 URL 字符串的优雅方法。假设有一个包含 value`question`的属性，则从 构造的 URL将是：`id``5``reverse()`

```
'/polls/5/results/' 
```

在普通的模板视图绑定代码中，我们使用`HttpResponse()`or`render()`因为它们通常涉及较少的抽象：一个视图函数返回一个模板：

```
def index(request):
    return render(request, 'polls/index.html') 
```

但在许多合法的重定向案例中，我们通常关心从参数列表构造 URL。这些包括以下情况：

*   `POST`通过请求提交 HTML 表单
*   用户登录后验证
*   通过 JSON Web 令牌重置密码

其中大多数涉及某种形式的重定向，以及通过一组参数构造的 URL。希望这增加了已经有帮助的答案线程！

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-06-02T03:58:28.433

这是一个老问题，但这里有一些可能对某人有帮助的东西。

来自官方文档：

> Django 提供了用于执行 URL 反转的工具，这些工具与需要 URL 的不同层相匹配： 在模板中：使用 url 模板标签。在 Python 代码中：使用 reverse() 函数。在与处理 Django 模型实例的 URL 相关的更高级别代码中： get_absolute_url() 方法。

例如。在模板中（url 标签）

```
<a href="{% url 'news-year-archive' 2012 %}">2012 Archive</a> 
```

例如。在python代码中（使用`reverse`函数）

```
return HttpResponseRedirect(reverse('news-year-archive', args=(year,))) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-09T02:25:33.413

该函数支持干原则 - 确保您不会在整个应用程序中对 url 进行硬编码。一个 url 应该在一个地方定义，而且只有一个地方 - 你的 url conf。之后，您实际上只是在引用该信息。

用于`reverse()`为您提供页面的 url，给定视图的路径或 url conf 中的 page_name 参数。如果在模板中使用`{% url 'my-page' %}`.

您可以在很多地方使用此功能。我发现我使用它的一个地方是在视图中重定向用户时（通常在成功处理表单之后） -

`return HttpResponseRedirect(reverse('thanks-we-got-your-form-page'))`

您也可以在编写模板标签时使用它。

我使用的另一次`reverse()`是模型继承。我在父模型上有一个 ListView，但想从这些父对象中的任何一个获取它的关联子对象的 DetailView。我向父级附加了一个`get__child_url()`函数，该函数标识了一个子级的存在，并使用`reverse()`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-28T09:35:00.940

有一个文档

[https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls)

它可用于为给定视图生成 URL

主要优点是您不会在代码中对路由进行硬编码。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-12-02T17:53:09.217

`reverse()`用于遵守 django DRY 原则，即如果您将来更改 url，那么您可以使用 reverse(urlname) 引用该 url 。

# html - IE 7 和 8 中的 CSS 倾斜转换

> ID：11241674
> 
> 赞同：2
> 
> 时间：2012-06-28T09:27:08.170
> 
> 标签：html, internet-explorer, css

我有菱形样式的菜单，它使用以下代码。它在 Chrome、firefox、ie9 等中运行良好，但我现在需要让它在 IE 7 和 8 中运行！:( 有没有办法在这些旧版浏览器上做到这一点？

[http://jsfiddle.net/C7e7U/](http://jsfiddle.net/C7e7U/)

非常感谢

HTML：

```
<div id = "menu">
        <ul id="nav">
            <li class="rhombusStart">&nbsp;</li>
            <li class="rhombus"><a class="rhlink" href="#"><span>Home</span></a></li>
            <li class="rhombus"><a class="rhlink" href="#"><span>Market <br> Update</span></a></li>
            <li class="rhombus"><a class="rhlink" href="#"><span>Membership</span></a></li>
            <li class="rhombus"><a class="rhlink" href="#"><span>FISC Info</span></a>
            </li>
            <li class="rhombusEnd">&nbsp;</li>
        </ul>
    </div> 
```

CSS

```
/*******************************************
 Menu Styling
*******************************************/
#menu {
    margin: 0 auto;
    padding-left: 2%;
    width: 1024px;
    height: 2.9em;
    position: relative;
    top: 0;
    background-color: rgb(255,194,14);
    border: 1px solid rgb(140,51,61);
}
#nav {
     margin:0;
     padding:0;
     list-style-type:none;
     list-style-position:outside;
     position:relative;
     height:2.9em;
     background-color: rgb(255,194,14);
}

#nav > li {
    float:left;
    position:relative;
}

#nav > li.rhombus {
    float:left;
    position: relative;
    -webkit-transform-origin:0 0;
    -moz-transform-origin:0 0;
    -ms-transform-origin:0 0;
    -o-transform-origin:0 0;
    transform-origin:0 0;
    -webkit-transform:skew(35deg);
    -moz-transform:skew(35deg);
    -ms-transform:skew(35deg);
    -o-transform:skew(35deg);
    transform:skew(35deg);
    border-right: 1px solid rgb(239,89,24);
    border-left: 1px solid rgb(255,244,80);
    background-color: rgb(255,194,14);
    font-family: Georgia;
    color: rgb(131,0,26);
    width: 8em;
    text-align: center;
    height: 2.9em;
}

li.rhombus > a span {
    -webkit-transform:skew(-35deg);
    -moz-transform:skew(-35deg);
    -ms-transform:skew(-35deg);
    -o-transform:skew(-35deg);
    transform:skew(-35deg);
    text-decoration: none;
    vertical-align: middle;
    display: table-cell;     
 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-28T11:25:40.063

[https://github.com/visionmedia/move.js](https://github.com/visionmedia/move.js)刚刚下载了这个并阅读了它的文档以在旧浏览器中使用你的 CSS3

# ios - iOS本地化如何添加带有本地化文件的现有文件夹

> ID：11241675
> 
> 赞同：0
> 
> 时间：2012-06-28T09:27:18.673
> 
> 标签：ios, localization, special-folders

如何添加具有本地化文件的现有文件夹。我有一个以英语为基础的现有项目，然后有 en.lproj。

而且我在文件系统名称中还有其他本地化文件，文件系统名称为 ja.lproj。但是，如果我直接将文件夹 ja.lproj 导入 xcode，似乎不起作用，在项目选项卡中，它显示 0 个本地化文件，并且在启动应用程序时，它会崩溃。

我知道它可以工作，我选择一个英文版本的文件，在文件检查器中添加加号，然后将添加另一个语言版本，但是，这不方便，新文件将位于 en.lproj 子文件夹中，这很奇怪。

有人可以帮助我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:35:37.463

我认为您无法使用文件夹来做到这一点。虽然你可以用文件做到这一点。只需为不同语言定义同一文件的不同版本。像这样：

![在此处输入图像描述](../Images/7dbe1a6064149017d15ca7ae4f933b8f.png)

# joomla - 如何将网站从测试站点转移到根文件夹 Joomla2.5 和美德玛特 2.06

> ID：11241680
> 
> 赞同：0
> 
> 时间：2012-06-28T09:27:26.463
> 
> 标签：joomla, virtuemart

我刚刚将我的测试站点移动到根文件夹.. 我的问题是获取我的站点的主页，当我单击站点中的其他菜单或链接时.. 它再次显示我的主页，但 url 正在根据链接..需要帮助...

Joomla 2.5 Virtuemart 2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:12:58.360

您是否使用安装在您的 joomla 扩展中的 sef 组件，如果是，请禁用 sef 配置并检查，如果它有效，那么这是一个 sef 配置问题，您必须解决这个问题

您还可以使用 akeeba 从测试站点备份并使用 kickstart 将其移至 root

# php - PHP在函数参数中设置第三个可选参数而不设置第二个可选参数？

> ID：11241681
> 
> 赞同：0
> 
> 时间：2012-06-28T09:27:32.287
> 
> 标签：php

有点棘手的问题，但是如果您稍后必须修改脚本以添加第三个可选参数，这可以节省大量时间，而第二个也是可选的，并且大多数情况下它被用作未设置的第二个参数，现在当您添加第三个时参数您必须到处扫描以找到代码片段并添加/设置第二个，然后添加第三个..

有没有简单的方法来做到这一点？

例子 ：

```
 public static function result($sql, $i = 0, $r = 0) {
  //code
  } 
```

如果我们需要添加第三个 $r，稍后和大多数情况下，如果代码被用作

```
 result($sql); 
```

现在到处我不得不扫描和做

```
 result($sql,0,10); 
```

有没有一种简单的方法来设置第三个参数而不设置第二个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:33:57.507

不，这是不可能的，但是您可能需要考虑将可选参数设置为 null，然后在函数中设置默认值。

例如：

```
public static function result($sql, $i = null, $r = null) {
   if(is_null($i)){
       $i="default";
   }
   ... etc
} 
```

这样，您可以在函数中维护默认值，而不必在整个代码库中复制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:33:13.733

添加一组可能的参数

```
public static function result($sql, $settings=null) {
  if(is_array($settings) {
    if(isset($settings['i']) {
       // condition code
    }
    if(isset($settings['r']) {
      // condition code
    }
  }
  // normal code
} 
```

# android - rawQuery，让光标指向列中带有 STRING 的行

> ID：11241683
> 
> 赞同：0
> 
> 时间：2012-06-28T09:27:37.590
> 
> 标签：android, sqlite

我一直在学习 Java，使用 Eclipse for Android，已经 2 个月了，并且刚刚开始学习数据库。我知道我在这里做错了，答案很简单，但我就是不明白。我知道这类问题之前已经被问过 100 万次。不好意思再问。

我有一个名为 TABLE_NAME 的表：

```
|-----|-------|-------|
|._id.|.ITEM..|.LAST..|
|..1..|...A...|.......|
|..2..|...B...|...L...|<--I want the cursor to point to this row which has "L" in column LAST 
|..3..|...C...|.......|
|-----|-------|-------| 
```

我希望光标指向“LAST”列中带有“L”的行。我正在使用以下代码：

```
cursor = db.rawQuery("SELECT * FROM " +TABLE_NAME +" WHERE "+LAST+" LIKE '%"L"%'", null); 
```

但我在代码的最后一点下得到了一条红线。任何人都可以帮忙吗？

刚刚想出了如何回答我自己的问题：

感谢大家的帮助。将 '%"L"%'" 更改为 '%L%'" 后，新代码为：

cursor = db.rawQuery("SELECT * FROM " +TABLE_NAME +" WHERE "+LAST+" LIKE '%L%'", null);

我写道： cursor.moveToFirst();<--- 告诉光标转到查询找到的行，然后：

THESTRING =cursor.getString(cursor.getColumnIndex(LAST));<--- 获取行中的信息

再次感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:31:44.917

```
LIKE '%"L"%'" 
```

应该

```
LIKE '%L%'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:30:37.620

语法上有这个错误：

```
cursor = db.rawQuery("SELECT * FROM " +TABLE_NAME +" WHERE "+LAST+" LIKE '%"+L+"%'", null); 
```

您缺少两个`+`用于连接。或者像这样，如果 L 是实际值而不是变量

```
cursor = db.rawQuery("SELECT * FROM " +TABLE_NAME +" WHERE "+LAST+" LIKE '%L%'", null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:31:35.720

它应该是：

```
cursor = db.rawQuery("SELECT * FROM " +TABLE_NAME +" WHERE "+LAST+" LIKE '%"+L+"%'", null); 
```

用 + 围绕 L 变量..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T09:32:44.047

试试这个：你忘记了`+`

```
 db.rawQuery("SELECT * FROM " + TABLE_NAME + " WHERE " + LAST + " LIKE '%" + L + "%'", null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T09:46:59.063

```
|..2..|...B...|...L...|<--I want the cursor to point to this row which has "L" i 
```

它应该是

cursor = db.rawQuery("SELECT * FROM " +TABLE_NAME +" WHERE "+LAST+" LIKE '%L%'", null);

# java - 用于检查字符串是否是严格字母数字的正则表达式

> ID：11241690
> 
> 赞同：58
> 
> 时间：2012-06-28T09:28:13.847
> 
> 标签：java, regex, alphanumeric

如何检查字符串是否仅包含数字和字母，即。是字母数字的吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-28T09:38:27.570

考虑到您要检查 ASCII 字母数字字符，试试这个： `"^[a-zA-Z0-9]*$"`. 在 中使用这个正则表达式`String.matches(Regex)`，如果字符串是字母数字则返回 true，否则返回 false。

```
public boolean isAlphaNumeric(String s){
    String pattern= "^[a-zA-Z0-9]*$";
    return s.matches(pattern);
} 
```

如果有帮助，请阅读以下内容以获取有关正则表达式的更多详细信息：[http ://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-28T11:48:11.583

为了兼容 unicode：

```
^[\pL\pN]+$ 
```

在哪里

```
\pL stands for any letter
\pN stands for any number 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-03-18T08:38:02.407

现在是 2016 年或更晚，事情有了进展。这匹配 Unicode 字母数字字符串：

```
^[\\p{IsAlphabetic}\\p{IsDigit}]+$ 
```

请参阅[参考资料](https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)（“Unicode 脚本、块、类别和二进制属性的类”部分）。还有这个我发现有帮助的[答案。](https://stackoverflow.com/a/29718900/2535335)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-28T09:36:48.587

[请参阅Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)的文档。

假设 US-ASCII 字母表 (az, AZ)，您可以使用`\p{Alnum}`.

检查一行是否仅包含此类字符的正则表达式是`"^[\\p{Alnum}]*$"`.

这也匹配空字符串。排除空字符串：`"^[\\p{Alnum}]+$"`.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-28T09:33:36.743

使用字符类：

```
^[[:alnum:]]*$ 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-28T09:39:52.683

```
Pattern pattern = Pattern.compile("^[a-zA-Z0-9]*$");
Matcher matcher = pattern.matcher("Teststring123");
if(matcher.matches()) {
     // yay! alphanumeric!
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-28T09:39:54.607

试试这个 [0-9a-zA-Z]+ for `only alpha and num with one char at-least`..

可能需要修改，因此对其进行测试

[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

```
Pattern pattern = Pattern.compile("^[0-9a-zA-Z]+$");
Matcher matcher = pattern.matcher(phoneNumber);
if (matcher.matches()) {

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-19T21:54:49.337

要包含`[a-zA-Z0-9_]`，您可以使用`\w`.

所以`myString.matches("\\w*")`。（`.matches`必须匹配整个字符串，所以`^\\w*$`不需要。`.find`可以匹配子字符串）

[https://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](https://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-11T20:41:43.973

要考虑所有 Unicode 字母和数字，[`Character.isLetterOrDigit`](https://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isLetterOrDigit(int))可以使用。在 Java 8 中，这可以与[`String#codePoints`](https://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html#codePoints--)和结合使用[`IntStream#allMatch`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#allMatch-java.util.function.IntPredicate-)。

```
boolean alphanumeric = str.codePoints().allMatch(Character::isLetterOrDigit); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-04-16T15:30:58.727

如果您还想包含外语字母，您可以尝试：

```
String string = "hippopotamus";
if (string.matches("^[\\p{L}0-9']+$")){
    string is alphanumeric do something here...
} 
```

或者，如果您想允许特定的特殊字符，但不允许其他任何字符。例如对于`#`or `space`，您可以尝试：

```
String string = "#somehashtag";
if(string.matches("^[\\p{L}0-9'#]+$")){
    string is alphanumeric plus #, do something here...
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-08-31T13:32:14.343

100% 字母数字 RegEx（它仅包含字母数字，甚至不包含整数和字符，仅包含字母数字）

**例如：**

> 特殊字符（不允许）
> 123（不允许）
> asdf（不允许）
> 1235asdf（允许）

* * *

```
String name="^[^<a-zA-Z>]\\d*[a-zA-Z][a-zA-Z\\d]*$"; 
```

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2019-03-18T20:03:32.413

要检查字符串是否为字母数字，您可以使用遍历字符串中的每个字符并检查它是否为字母数字的方法。

```
 public static boolean isAlphaNumeric(String s){
            for(int i = 0; i < s.length(); i++){
                    char c = s.charAt(i);
                    if(!Character.isDigit(c) && !Character.isLetter(c))
                            return false;
            }
            return true;
    } 
```

# mysql - 在存储过程中选择特定值作为列

> ID：11241691
> 
> 赞同：1
> 
> 时间：2012-06-28T09:28:16.763
> 
> 标签：mysql, stored-procedures

我正在 MySQL 中编写一个存储过程来获取一组管理信息。问题是：我需要“水平”而不是“垂直”的结果。为了详细说明，这是我要处理的数据库设计：

`users`

*   company_id
*   user_type_id

`companies`

*   company_id

`user_types`

*   user_type_id
*   描述符

所以这是交易：我需要计算按描述符分组的所有用户，然后按公司分组。我可以这样：

```
SELECT
    COUNT(*) AS number,
    ut.descriptor,
    company_id
FROM
    users u

INNER JOIN
    user_types ut
ON ut.user_type_id = u.user_type_id
AND descriptor LIKE 'xyz%'

INNER JOIN
    companies c
ON u.company_id = c.company_id

GROUP BY
    ut.descriptor,
    company_id 
```

然而，这确实给了我正确的结果：这个列表是“垂直的”。我为每个描述符得到一个新行。我实际上希望描述符成为列。行应按公司分组。这就是应用程序逻辑所期望的。

我想先获取描述符，然后再进行计算，但这给我留下了完全相同的问题。我可以为每个描述符执行一个子查询，但这会非常非常难看。

总而言之，预期的结果是这样的，后面的 3 列实际上是 user_types 表中的描述符：

`company`- `admin`- `customer`-`supplier`

`1 - 4 - 1 - 5`

`1 - 7 - 4 - 2`

这将转化为：公司 1 有 4 名管理员、1 名客户、5 名供应商。公司 2 有 7 名管理员、4 名客户、2 名供应商。

我真的觉得我在这里遗漏了一些东西。我忽略了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:44:23.573

你可以这样做，但它不是表格的动态宽度。你可能想用类似的东西替换`IF(ut.descriptor = 'admin'` 你`IF(u.user_type_id = 1` 根本不需要加入 ut

```
SELECT
    company_id AS company,
    COUNT(IF(ut.descriptor = 'admin', 1, NULL) AS admin,
    COUNT(IF(ut.descriptor = 'customer', 1, NULL) AS customer,
    COUNT(IF(ut.descriptor = 'supplier', 1, NULL) AS supplier
FROM
    users u

INNER JOIN
    user_types ut
ON ut.user_type_id = u.user_type_id
AND descriptor LIKE 'xyz%'

INNER JOIN
    companies c
ON u.company_id = c.company_id

GROUP BY
    company_id 
```

# ruby-on-rails - Rails 上的 Internet Explorer 9 版本

> ID：11241696
> 
> 赞同：-3
> 
> 时间：2012-06-28T09:28:28.573
> 
> 标签：ruby-on-rails

> **可能重复：**
> [Internet Explorer 9 中的问题](https://stackoverflow.com/questions/11187196/issues-in-internet-explorer-9)

IE-> 不读取文件，如 firefox----> s(input_id).files 提供文件详细信息，而 IE----> 它为 null 或未定义的值。所以让我知道如何在 IE 中读取文件。如何在 IE9 中获取文件大小、文件名等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:54:21.197

我假设您正在尝试[`FileList`](https://developer.mozilla.org/en/DOM/FileList)使用类似`document.getElementById("input_id").files`.

该`files`方法是 IE9 的一部分，[`File API`](http://dev.w3.org/2006/webapi/FileAPI/)不受 IE9 支持。但是，IE10[支持它](http://msdn.microsoft.com/en-us/library/ie/hh673542%28v=vs.85%29.aspx)。

# windows - 在 MinGW 上安装 ImageMagick

> ID：11241700
> 
> 赞同：0
> 
> 时间：2012-06-28T09:28:41.287
> 
> 标签：windows, imagemagick

当我在 MinGW 上安装 IM 时出现此错误

c:\Users\MumMum\Desktop\MagickCore\ImageMagick-6.7.7-0/magick/nt-base.c:1021：未定义对“IsWow64Process”的引用

我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:40:12.500

您没有指定您的操作系统版本。IsWow64Process（“这是 Windows 64 位进程上的 Windows 吗？”）仅在 XP 和更高版本的桌面操作系统以及 Windows 2008 和 Windows 2003 SP1 中实现。请参阅：http: [//msdn.microsoft.com/en-us/library/ms684139%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms684139%28v=vs.85%29.aspx)

在紧要关头，尝试安装 ImageMagick 的便携式版本：[链接](https://www.imagemagick.org/script/download.php#windows)

# eclipse - Eclipse 3.4 中的嵌套工作集

> ID：11241701
> 
> 赞同：5
> 
> 时间：2012-06-28T09:28:41.337
> 
> 标签：eclipse, nested, working-set

作为 Eclipse 3.4 用户，我想知道是否有办法定义嵌套工作集。谢谢。

# windows-phone-7 - 推送通知基础

> ID：11241706
> 
> 赞同：0
> 
> 时间：2012-06-28T09:29:04.097
> 
> 标签：windows-phone-7, windows-phone-7.1

我正在尝试像这样实现[http://dotnettrain.blogspot.co.uk/2011/07/push-notifications-in-windows-phone-75.html](http://dotnettrain.blogspot.co.uk/2011/07/push-notifications-in-windows-phone-75.html)

我在同一页面发送和接收。A.xaml

我要发送的有效负载：在 GetToastPayLoad

```
string message = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
     "<wp:Notification xmlns:wp=\"WPNotification\">" +
      "<wp:Toast>" +
       "<wp:Text1>New Link Request</wp:Text1>" +
       "<wp:Text2>"+data.Title+"</wp:Text2>" +
      "</wp:Toast>" +
     "</wp:Notification>"; 
```

httpRequest 的标头是：-

```
 .........................................
   var request = (HttpWebRequest)WebRequest.Create(new Uri(channelUri));
                request.Method = "POST";
                request.ContentType = "text/xml";
                payload = GetToastPayload(data);
                request.Headers.Add("X-WindowsPhone-Target", "toast");
                request.Headers.Add("X-NotificationClass", "2");
                } 
```

我能够将 A.xaml 中的响应捕获为 OnToastNotificationReceived 并在消息框中的详细信息中打印。

但是当我删除事件处理程序时，我正在运行的应用程序中没有收到任何通知。

**如何以正常的方式接收和显示正常的 toast 通知？**

***我应该怎么做才能使这个通用，比如说我希望它显示在用户所在的任何地方：A.xaml、B.xaml、C.xaml*等*？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T23:18:51.673

要在任何地方接收通知，请尝试将您的代码放入`App()`构造函数中，`App.xaml.cs`如[在 Windows Phone 7 上发送 toast 通知中所示](http://dotnet.dzone.com/articles/sending-toast-notifications)

当您的应用程序运行时，Toast 通知不会显示，因此您将无法以这种方式显示它们（即使您尝试手动执行[ToastPrompt](http://windowsphonegeek.com/articles/WP7-Toast-Prompt-in-depth)）因此在这种情况下您应该使用[ShellToastNotificationReceived](http://msdn.microsoft.com/en-us/library/microsoft.phone.notification.httpnotificationchannel.shelltoastnotificationreceived%28v=vs.92%29.aspx)来处理通知。

当您的应用未运行时，您应该会看到显示的 toast 通知。

# ruby-on-rails - Ruby on Rails：REST API + 文件上传 + 回形针

> ID：11241709
> 
> 赞同：0
> 
> 时间：2012-06-28T09:29:17.433
> 
> 标签：ruby-on-rails, ruby, api, rest, paperclip

我正在尝试通过 PUT 请求在我的服务器上使用 REST API 上传附件。我可以通过将二进制文件放在请求正文中来做到这一点，但我还想将此文件保存为使用回形针保存附件的模型的附件。

这是我当前涉及的类定义：

```
class Cl < ActiveRecord::Base
  after_update :save_tses
  validates_associated :tses

  has_many :tses

  ...truncated...

  def save_tses
    tses.each do |ts|
      ts.save(false)
    end
  end

end

class Ts < ActiveRecord::Base
  has_attached_file :tsa, :styles => { :thumb => {:geometry => "100x141>", :format => :jpg} }, 
    :path => ":rails_root/public/system/:attachment/:id/:style/:friendly_filename",
    :url => "/system/:attachment/:id/:style/:friendly_filename"

  belongs_to :cl

  def friendly_filename
    "#{self.tsa_file_name.gsub( /[^a-zA-Z0-9_\.]/, '_')}" 
  end
end 
```

我可以使用 html 页面上的文件上传来保存附件。我想在通过 PUT 请求将文件作为二进制数据接收的控制器上执行此操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T05:53:33.313

你也可以使用 -
[https://github.com/jwagener/httmultiparty](https://github.com/jwagener/httmultiparty)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:23:28.197

知道了，

```
# controller.rb

def add_ts
  # params[:id]
  # params[:tsa]

  @cl = Cl.find(params[:id])
  ts = @cl.tses.build(:name => "#{@cl.name}_#{Time.now.to_i}")

  ts.tsa = params[:tsa]
  if ts.save
    render :json => {:status => "OK"}
  else
    render :json => {:status => "ERROR"}
  end
end

# Test

curl -F "tsa=@file.pdf" "http://host/cl/474/add_ts"
=> {"status":"OK"} 
```

# sublimetext2 - Sublime text 2 的 Zen 编码，如何设置快捷方式？

> ID：11241711
> 
> 赞同：2
> 
> 时间：2012-06-28T09:29:48.933
> 
> 标签：sublimetext2, emmet

如你所知，Sublime text 2 是一个很棒的文本编辑器。我们可以使用包控件来安装包。Zen 编码是这些包中最好的一个。但是我怎样才能更改关键设置呢？

现在我只知道展开缩写。以及如何用缩写换行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T03:48:07.077

在 Mac 上，它会`CTRL Option Return`在底部打开 Haiku 栏，您可以输入 Koan 代码。像：`.box{Hello}*5`这将导致：

```
<div class="box">Hello</div>
<div class="box">Hello</div>
<div class="box">Hello</div>
<div class="box">Hello</div>
<div class="box">Hello</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:53:38.497

如果您想更改默认的 zen 编码键设置，您应该查看（在 Windows 中）`AppData\Roaming\Sublime Text 2\Packages\ZenCoding`文件夹。您有一个名为的文件`Default (Windows).sublime-keymap`，其中包含键映射。

如果您想用缩写换行，您应该选择要换行的文本并按`Ctrl + Alt + Enter`。它将在底部打开“输入俳句”栏。在那里你可以输入禅宗编码。

# java - 蓝牙设备（主）启动蓝牙与安卓的连接

> ID：11241712
> 
> 赞同：0
> 
> 时间：2012-06-28T09:29:52.757
> 
> 标签：java, android, bluetooth

我有一个蓝牙（BT）设备（主），必须在蓝牙设备打开后自动连接到安卓设备。
在我看来，这将类似于 BT 耳机设备连接到 android，即当耳机打开时 - 它会自动启动与 android 的连接并连接到它。在 android 上为 BT 连接创建和保持打开的套接字是不可接受的。

我的问题是有可能做到这一点以及如何做到这一点？

如果有一些侦听器/服务在android系统的后台运行并为传入的BT连接创建一些事件/意图，它是什么，我如何从中获取信息/通知？

此外有趣的是 - android 如何知道 BT 耳机想要连接 - 如果它收到消息/数据包或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:57:28.280

好的，我解决了我的问题，这里的代码：
**AndroidManifest.xml：**

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

和

```
<receiver
    android:enabled="true"
    android:name="com.package.name.ConnectionReceiver" >

    <intent-filter>
        <action android:name="android.bluetooth.device.action.ACL_CONNECTED"
            android:name="android.bluetooth.device.action.ACL_DISCONNECT" />
    </intent-filter>
</receiver> 
```

我还实现了一个 BroadcastReceiver 子类的 onReceive 方法，它接收和处理这些动作。

# c# - 订阅 Microsoft Word COM 事件

> ID：11241717
> 
> 赞同：0
> 
> 时间：2012-06-28T09:30:10.150
> 
> 标签：c#, dynamic-typing, word-automation

我正在编写代码以使用 C# 4.0 中的动态类型访问 MS Word 自动化 COM 接口。它工作得很好，而且很容易使用。

我不知道如何订阅事件。我想订阅[Application::Quit](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.applicationevents4_event.quit.aspx)事件。

这是我写的代码：

```
static class Program
{
    [STAThread]
    static void Main()
    {
        Type wordType = Type.GetTypeFromProgID("Word.Application");
        dynamic word = Activator.CreateInstance(wordType);

        var myDoc = word.Documents.Open(@"C:\example.docx");
        word.Visible = true;

        //how can I subscribe to the word.Quit event??
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:51:50.623

这应该有效：

```
((Microsoft.Office.Interop.Word.ApplicationEvents4_Event)word).Quit += OnQuit; 
```

...接着...

```
private void OnQuit()
{
     MessageBox.Show("Quit");
} 
```

# android - 更改模拟器方向时出错

> ID：11241718
> 
> 赞同：0
> 
> 时间：2012-06-28T09:30:14.427
> 
> 标签：android, android-layout

我是安卓新手。我创建了一个 main.xml 文件，例如

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:background="@android:color/white"
     android:paddingTop="5dp"
     android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"       
        android:layout_marginBottom="10dp"
        android:src="@drawable/mazarslogo" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/ic_launcher" />

    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        xmlns:android="http://schemas.android.com/apk/res/android" >

        ....

    </RelativeLayout>

 </LinearLayout> 
```

该文件位于我的 res/layout/main.xml 文件夹中。现在我创建一个名为 layout-land 的新文件夹，并在其中放入一个文件 main.xml。即res/layout-land/main.xml，并在里面放入如下代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"       
        android:layout_marginBottom="10dp"
        android:src="@drawable/mazarslogo" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

这是我的课

```
public class MainActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //---the two buttons are wired to the same event handler---
        Button btn_login = (Button)findViewById(R.id.btn_login );
        btn_login.setOnClickListener(btnListener);

         .....

    } //end of onCreate()

} //end of class MainActivity 
```

但是现在当我运行项目时，项目以纵向模式打开，但是当我按 ctrl+F11 更改模拟器的方向时，我得到了错误。

![在此处输入图像描述](../Images/6cf3fc297f642b97f504084a3101c581.png)

这是人像模式图片

![在此处输入图像描述](../Images/3a5fce1ea105abc09526327132672e59.png)

为什么我在横向模式下收到此错误？我做错了什么？

谢谢

**编辑 - - - - - - - - - - - - - - - - - - - - - - - - - ------------------**

这是我的工作 res/layout-land/main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:background="@color/background"
android:layout_height="fill_parent"
android:layout_width="fill_parent"
android:padding="1dip"
android:orientation="horizontal" > >

<LinearLayout
    android:orientation="vertical"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_gravity="center"
    android:paddingLeft="20dip"
    android:paddingRight="20dip" >

    <ImageView
        android:id="@+id/imageView1" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"       
        android:layout_marginBottom="10dp"
        android:src="@drawable/mazarslogo" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="10dp"
        android:src="@drawable/ic_launcher" />

    <TableLayout
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="center"
        android:stretchColumns="*" >

        <TableRow>

            <Button
                android:id="@+id/btn_login"                 
                android:text="@string/login"                
                android:textSize="12sp" 
                android:textStyle="bold" />

            <Button
                android:id="@+id/btn_aboutUs"                           
                android:text="@string/aboutUs"                  
                android:textSize="12sp" 
                android:textStyle="bold" />

        </TableRow>

        <TableRow>
             <Button
                android:id="@+id/btn_contactUs"                 
                android:text="@string/contactUs"            
                android:textSize="12sp" 
                android:textStyle="bold" />

            <Button
                android:id="@+id/btn_exit"                  
                android:text="@string/exit"         
                android:textSize="12sp" 
                android:textStyle="bold" />
        </TableRow>
    </TableLayout>        
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:46:33.393

首先要记住，两个xml都应该具有相同的数据，无论是imageview，button还是layout，对于potrait和lancaspe布局的布局，id也应该相同，并且您需要在activtiy的menifest中添加以下内容

```
android:configChanges="keyboardHidden|orientation" 
```

# session - 本地 php.ini session.save_path 问题 - 无法识别会话

> ID：11241719
> 
> 赞同：1
> 
> 时间：2012-06-28T09:30:30.487
> 
> 标签：session, php

我有一个正在运行用户管理脚本的客户端。主机提供商阻止了 allow_url_fopen 但正在使用 suPHP，因此我们创建了 php.ini 的本地副本，其中 allow_url_fopen 设置为“on”。

现在唯一的问题是您无法再使用该脚本登录-它说“成功登录”-然后将您直接注销（因为会话要么没有被创建要么位于错误的位置-请原谅我缺少服务器知识）。

这里是本地php.ini中的设置

```
upload_tmp_dir = "/home/aspac124/public_html/tmp"
register_globals = On
memory_limit = 256M
session.save_path = "/home/aspac124/public_html/tmp"
safe_mode = off
upload_max_filesize = 32M
allow_url_fopen = On
zend_extension = "/usr/local/IonCube/ioncube_loader_lin_5.3.so" 
```

我不确定为什么托管服务提供商会为客户端打开 register_globals。但那是 session.save_path 的正确位置吗？我已经检查过该文件夹存在，我还将它设置为 777 只是为了确保但没有快乐。

另一个使用同一系统的客户也遇到了类似的问题，并告诉我他将 tmp/ 文件夹更改为他的主目录，一切都很好。

我尝试将保存路径设置为 /tmp、/home/aspac124/tmp，但没有任何反应 - 只是正常注销。如果我编了一个路径，那么我会收到“没有这样的文件或目录”错误。

当我将其设置为“/home/tmp”时，我收到以下消息

```
Warning: session_start() [function.session-start]: open(/home/tmp/sess_4417d180e599b5f12fc34a28f5467d21, O_RDWR) failed: Permission denied (13) in /home/aspac124/public_html/domainnamehere.com/includes/lightwork_session.php on line 45 
```

这是什么意思，home/tmp 是否是正确的位置，如果是，我应该怎么做 - 文件夹权限是否应该更改？

编辑：我无权访问域根目录之外的文件夹，因此无法更改文件权限 - 必须等待客户端，但在那之前想要尽可能多的信息。

提前致谢

编辑：仅供阅读此书的任何人使用。请确保您的本地 php.ini 文件设置应用于可能需要它的任何子文件夹。我正在向根目录的子文件夹中的文件发出 ajax 请求，这就是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:42:47.630

您应该将会话和上传目录放在文档根目录之外，否则任何人都可以访问这些目录，并可能导致远程脚本注入、会话劫持等。

您也许应该创建一个 tmp 目录`/home/aspac124/tmp`并设置权限，以便 Apache 可以写入该目录。也许将 chmod 设置为 0760。

# objective-c - RestKit 奇怪的错误

> ID：11241725
> 
> 赞同：0
> 
> 时间：2012-06-28T09:30:43.510
> 
> 标签：objective-c, ios, cocoa-touch, restkit

我一直在使用 RestKit for ios，我觉得它很棒。但是，我有一些严重的问题。我正在尝试在应用程序中使用 objectmapper。虽然只有一个视图控制器的测试应用程序可以正常工作并且能够加载数组中的所有数据。但是，我尝试集成到现有的应用程序中，它总是因错误而崩溃；

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x8b55e90' 
```

我有一个核心数据数据模型，但在此之前我还没有将它用于映射。测试应用程序和现有应用程序中的代码是相同的。令人讨厌的是，相同的代码在单个视图控制器上工作得很好，而同样的事情在集成上却不起作用。任何帮助将非常感激 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:06:45.787

“发送到实例的无法识别的选择器”通常意味着您试图在内存中不再存在的对象上调用方法。[首先，您需要通过在 xcode 中启用僵尸](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)来找出这是哪个对象。

然后你必须确保这个对象只要你需要它就一直存在，例如让它成为父视图控制器的一个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:13:07.560

出现错误是因为我正在使用 RestKit 对象加载器和 RestKit 客户端同时从同一个控制器加载两个不同的 url。他们两个都会首先调用请求委托。所以，我期待 requestDidLoad 委托的 json 是不同的，因为它最初也为 objectDidLoad 加载了相同的委托。现在已解决此问题。

# c++ - 运行 c++ 目标文件时出现致命错误

> ID：11241726
> 
> 赞同：-1
> 
> 时间：2012-06-28T09:30:43.873
> 
> 标签：c++, gcc

我在 Red hat Linux 4.1.2 上使用 cmake 实用程序编译了 C++ 项目。

gcc 版本：4.1

当我尝试使用以下命令运行目标文件时，出现异常：

```
./GCVMP ../../dat/settlingsUnix/MPSettings.xml
exception :  Fatal Error: æ¹¥åSä 
```

我无法理解根本原因。请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:35:29.773

我怀疑“致命错误：”部分是您的代码打印的内容。它后面应该有一条解释错误的消息，但传递的消息已损坏，因此会打印垃圾。

您是否尝试过在 gdb 下使用 -ggdb 编译程序？这是关于如何使用调试器的一个很好的入门：http: [//www.ibm.com/developerworks/library/l-gdb/](http://www.ibm.com/developerworks/library/l-gdb/)

# javascript - 原点中间和中心的jquery比例在比例完成后回到原来的位置

> ID：11241729
> 
> 赞同：0
> 
> 时间：2012-06-28T09:30:50.807
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试使用 jquery-ui-1.8.21 来缩放元素

```
$("#star1").effect("scale", {
    percent: 125,
    origin: ['middle', 'center']
}, 1000); 
```

但缩放完成后，元素跳转到原来的左上角

就像在这个小提琴[http://jsfiddle.net/Ncqps/](http://jsfiddle.net/Ncqps/)

我用谷歌搜索了它，发现这是[http://bugs.jqueryui.com/ticket/4316](http://bugs.jqueryui.com/ticket/4316)中的已知错误，我也尝试了那里建议的解决方法，但仍然无法正常工作

有人知道如何解决吗？

谢谢

# android - 如何将流程输出链接到 textview 并实时自动更新？

> ID：11241737
> 
> 赞同：1
> 
> 时间：2012-06-28T09:31:15.533
> 
> 标签：android, multithreading, textview, handler, tcpdump

我不是最好的程序员，实际上，我很糟糕 :( 我需要一些让我发疯的事情的帮助。基本上我有一个 tcpdump 进程，我想提取输出并将其放入一个文本视图中，该文本视图每隔几毫秒，我已经尝试了一切，但无法让它工作。

我没有收到任何错误，它似乎在后台工作，但只有在我转到主屏幕并返回应用程序后才显示文本块。但是，它不会不断更新文本视图，有时会挂起和崩溃。

我创建了一个简单的处理程序，它可以毫无问题地用纯文本更新 textview，但后来我遇到了让它读取进程的主要问题。

**开始按钮**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.capture);

    this.LiveTraffic = (TextView) findViewById(R.id.LiveTraffic);
    this.CaptureText = (TextView) findViewById(R.id.CaptureText);
    ((TextView) findViewById(R.id.ipv4)).setText(getLocalIpv4Address());
    ((TextView) findViewById(R.id.ipv6)).setText(getLocalIpv6Address());

    //Begin button              
    final Button startButton = (Button) findViewById(R.id.start);
    startButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Toast.makeText(getApplicationContext(), "Now Capturing Packets", Toast.LENGTH_LONG).show();
            try {

                process = Runtime.getRuntime().exec("su");
                DataOutputStream os = new DataOutputStream(process.getOutputStream());
                os.writeBytes("/data/local/tcpdump -q\n");
                os.flush();
                os.writeBytes("exit\n");
                os.flush();
                os.close();

                inputStream = new DataInputStream(process.getInputStream());

                Thread.sleep(1000);
                Process process2 = Runtime.getRuntime().exec("ps tcpdump");

                DataInputStream in = new DataInputStream(process2.getInputStream());
                String temp = in.readLine();
                temp = in.readLine();
                temp = temp.replaceAll("^root *([0-9]*).*", "$1");
                pid = Integer.parseInt(temp);
                Log.e("MyTemp", "" + pid);
                process2.destroy();

                CaptureActivity.this.thisActivity.CaptureText.setText("Active");
            } catch (Exception e) {
            }
            ListenThread thread = new ListenThread(new BufferedReader(new InputStreamReader(inputStream)));
            thread.start();
        }
    });
} 
```

**ListenThread 类**

```
public class ListenThread extends Thread {

    public ListenThread(BufferedReader reader) {
        this.reader = reader;
    }
    private BufferedReader reader = null;

    @Override
    public void run() {

        reader = new BufferedReader(new InputStreamReader(inputStream));
        while (true) {
            try {
                CaptureActivity.this.thisActivity.CaptureText.setText("exec");
                int a = 1;
                String received = reader.readLine();
                while (a == 1) {
                    CaptureActivity.this.thisActivity.LiveTraffic.append(received);
                    CaptureActivity.this.thisActivity.LiveTraffic.append("\n");
                    received = reader.readLine();
                    CaptureActivity.this.thisActivity.CaptureText.setText("in loop");

                }
                CaptureActivity.this.thisActivity.CaptureText.setText("out loop");

            } catch (Exception e) {
                Log.e("FSE", "", e);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:22:26.967

我不是安卓专家，但我注意到：

*   您正在 UI 线程中运行 I/O 操作 - 这将冻结您的 GUI，直到 I/O 操作完成 ==> 在单独的线程中运行它们。
*   您从内部的 UI 线程外部更新 UI `ListenThread`，这可能会导致意外结果

[您可以在本教程](http://developer.android.com/guide/components/processes-and-threads.html#WorkerThreads)中阅读有关它的更多信息中阅读更多相关信息（确保您阅读了 2 个示例，因为第一个示例已损坏（故意））。

**编辑**
总之，你应该在你的第一段代码中有这样的东西：

```
startButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        Toast.makeText(getApplicationContext(), "Now Capturing Packets", Toast.LENGTH_LONG).show();
        new Thread(new Runnable() {

            public void run() {
                try {

                    process = Runtime.getRuntime().exec("su");
                    ...
                    CaptureActivity.this.runOnUiThread(new Runnable() {
                        public void run() {
                            CaptureActivity.this.thisActivity.CaptureText.setText("Active");
                        }
                    });
                } catch (Exception e) {
                }
                ListenThread thread = new ListenThread(new BufferedReader(new InputStreamReader(inputStream)));
                thread.start();
            }
        }).start();
    }
}); 
```

在第二个中：

```
 while (true) {
        try {
            CaptureActivity.this.runOnUiThread(new Runnable() {

                public void run() {
                    CaptureActivity.this.thisActivity.CaptureText.setText("exec");
                }
            });

            int a = 1;
            String received = reader.readLine();
            while (a == 1) {
                CaptureActivity.this.runOnUiThread(new Runnable() {

                    public void run() {
                        CaptureActivity.this.thisActivity.LiveTraffic.append(received);
                        CaptureActivity.this.thisActivity.LiveTraffic.append("\n");
                        CaptureActivity.this.thisActivity.CaptureText.setText("in loop");
                    }
                });
                received = reader.readLine();
            }
            CaptureActivity.this.runOnUiThread(new Runnable() {

                public void run() {
                    CaptureActivity.this.thisActivity.CaptureText.setText("out loop");
                }
            });

        } catch (Exception e) {
            Log.e("FSE", "", e);
        }
    } 
```

那应该解决特定的 UI 交互问题。但是您的代码中还有其他逻辑问题超出了这个问题（例如，您从不测试您是否已经到达您正在阅读的文件的末尾，事实上 while(a==1) 是一个无限循环因为你永远不会改变 a 等的值）。

# xml - VBA 中的事件，用于在 word 中填充 XML TAG 后

> ID：11241740
> 
> 赞同：0
> 
> 时间：2012-06-28T09:31:34.047
> 
> 标签：xml, vba, events, ms-word, tags

我有一个带有 xml 标签的 word 文档。这些标签由应用程序填充，打开文档填充它们并将文档转换为 pdf 并将其发送到文件共享应用程序。

我的问题是文档有表格和文本，其中的标签将为空。我想在“填充”事件之后检查这些标签并隐藏包含它的段落，但我没有这样做的事件。

我有下面的代码来检查标签值，所以我可以查看它们是否为空，但我不知道我可以把它放在哪个事件中。到目前为止，我发现执行代码的唯一一个是打开的文档，如下面的代码所示。其他不触发。

```
 Private Sub Document_Open()
        ValidateTags
    End Sub

    Sub ValidateTags()
        Dim r As XMLNodes
        Dim i As Integer

        Set r = ActiveDocument.XMLNodes
        i = 0
        Do While i < 10
            i = i + 1
            If i = 10 Then Exit Do
            MsgBox (r(i).BaseName & "  #  " & r(i).NodeType _
            & "  #  " & r(i).NodeValue & "  #  " & r(i).Text)
        Loop
    End Sub 
```

打开事件发生在它们被填充之前。之后我需要一个，最好没有人工交互，因为我希望这个过程是自动的。

我需要 VBA 解决方案来解决我有标签的文档中的宏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:23:21.723

尝试 documentbeforesave 事件： http: [//msdn.microsoft.com/en-us/library/bb221290 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb221290(v=office.12).aspx)

# list - Struts2 从选择标签中获取对象属性

> ID：11241745
> 
> 赞同：1
> 
> 时间：2012-06-28T09:31:49.240
> 
> 标签：list, object, select, struts2

我的问题是我没有成功获取我的选择标签列表的对象的属性。

我的 .jsp 中有一个选择标签，如下所示：

```
<s:select list="listFonction" listKey="code" listValue="Libelle"
                name="fonctionSelectionne" value="defaultFonction" /> 
```

在我的行动中，我声明了一个数组列表（带有 getter 和 setter）：

```
private ArrayList<Fonction> listFonction = new ArrayList<Fonction>(); 
```

我还有另一个类 Fonction ：

```
public class Fonction {
    private int code;
    private String libelle;

    public Fonction(int code, String libelle)
    {
        this.code = code;
        this.libelle =libelle;
    }
    public Fonction()
    {

    }
    public int getCode() {
        return code;
    }

    public void setCode(int code) {
        this.code = code;
    }

    public String getLibelle() {
        return libelle;
    }

    public void setLibelle(String libelle) {
        this.libelle = libelle;
    }
} 
```

为了在我的操作中获得选定的值，我声明（使用 getter 和 setter）：

```
Private String fonctionSelectionne; 
```

但我只是能够获得`listkey`我的对象的代码（）`getFonctionSelectionne`。我想获取代码属性（`listkey`）和`libelle`属性（`listvalue`）。

有谁知道如何帮助我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:29:58.080

2点：

1.  应该是**libelle**，而不是**Libelle**

    ```
    <s:select list="listFonction" listKey="code" listValue="libelle"
                name="fonctionSelectionne" value="defaultFonction" /> 
    ```

2.  对于 list="listFunction"，您的操作类中需要 getter **Collection getListFunction(){}**

**更新**

我不确定这一点。但你可以试一试。

这是想法，不要提供列表，而是要选择标签的地图

```
Map getListFunction(){
Map<Object, String> map;
Function f = new Function(1, "test");
map.put(f, f.libelle);
return map;
} 
```

然后在jsp中：

```
<s:select list="listFonction" listKey="key" listValue="value"
            name="fonctionSelectionne"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T07:06:15.630

您应该在 ClassAction 上设置属性 listFonction

# cakephp - 在 Cakephp 中保存和读取三个模型

> ID：11241746
> 
> 赞同：0
> 
> 时间：2012-06-28T09:31:52.670
> 
> 标签：cakephp, model, save, has-and-belongs-to-many

我正在努力加入三个模型。我有医院、医生和专科。一家**医院**有很多**医生**，一个**医生**有很多**专业**。因此，一位医生可以在 1 家具有 1 个专业的医院工作，但同一位医生可以在另一家具有其他专业的医院工作。

我需要在数据库中创建一个表，连接 3 个模型，如下所示：

表：医生_医院_专科 字段：id | 医生 ID | 医院 ID | special_id

但这对我不起作用。我在很多论坛中搜索了实现此功能的方法，但我找不到任何东西。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:25:16.147

做一个`DoctorsHospitalsSpecialties`模型。

```
Doctor hasMany DoctorsHospitalsSpecialties
Hospital hasMany DoctorsHospitalsSpecialties
Specialty hasMany DoctorsHospitalsSpecialties

DoctorsHospitalsSpecialties belongsTo Doctor, Hospital, Speciality. 
```

您可能必须自己编写一些代码来管理 DoctorsHospitalsSpecialties 模型中的数据。

# android - Android 中的谷歌云消息服务如何工作？

> ID：11241756
> 
> 赞同：15
> 
> 时间：2012-06-28T09:32:31.240
> 
> 标签：android, android-c2dm, google-cloud-messaging

我想在我的应用程序中使用 GCM 服务。

我参考了以下链接（[Android Developer: Google GCM](http://developer.android.com/guide/google/gcm/index.html)），但无法在我的 Eclipse 中安装 GCM 库。

从 SDK 管理器中，我没有在 Extras 文件夹中获取 GCM 库。

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-28T09:44:47.520

我遇到了类似的问题，一旦我将 Android SDK 工具更新到修订版 20 并将 Android 平台 SDK 工具更新到修订版 12，问题就解决了。Rev 19/11 不会在*SDK Manager中显示***Extras > Google Cloud Messaging for Android Library**。并确保在更新后重新启动 SDK 管理器。

 *然后它应该显示在 SDK 管理器中，如下所示： ![在此处输入图像描述](../Images/d2673d740470bcd707e32cd77718bf7b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:12:07.200

对我来说，只是更新不起作用。但请尝试从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载并安装新的 Android SDK 。安装后，它最终向我展示了额外的新库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:12:59.570

转到Help->Check for updates，然后更新你的eclipse。更新后，您将在 Extras 中获得“Google Cloud Messaging for Android library”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T08:17:37.530

或者在**path-to-android-sdk/tools/ 中使用**

```
./android.bat update sdk 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T16:38:20.713

我遇到了同样的问题，我通过以下方式解决了它：首先关闭 SDK 管理器。然后打开 AVD 管理器点击“工具”>“选项”然后点击“清除缓存”然后关闭 AVD 管理器，然后打开 SDK 管理器并点击“包”>“重新加载”它就是 API 16（Android 4.1 JB）在 Extras “Android 库的 Google Cloud Messaging”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T11:24:02.023

0pen Android Skd 管理器，转到 Extra 并安装适用于 android 的 Google Clouds 消息传递。安装后，打开 Android SKD->Extra->google 并将 gcm 项目导入您的 IDE 现在您的 libs 文件夹中有 gcm.jar。*

# git - 在 git 中，如何增加合并的上下文？

> ID：11241758
> 
> 赞同：7
> 
> 时间：2012-06-28T09:32:34.920
> 
> 标签：git, merge, diff, git-merge

当我合并大的更改时，git 经常会感到非常困惑，因为它没有使用足够的上下文行。它混淆了两个不同子例程的相似结尾，而这两个子例程恰好都以：

```
.
return 1;
.
} 
```

（此处用点表示空行）

当我使用 'git diff' 时，我可以说 -U20 来查看 20 行上下文。但是我可以告诉 git 在合并时也使用这个标志吗？

答案是否与合并策略/选项有关，例如：

```
git merge -s recursive -X patience [branch] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T11:04:00.353

据我所知，在合并期间无法增加上下文行。*耐心差异*算法应该更好地处理您的用例。git-merge(1) 手册页是这样描述的：

> 使用此选项，合并递归会花费一些额外的时间来避免有时由于不重要的匹配行（例如，来自不同函数的大括号）而发生的错误合并。当要合并的分支大相径庭时使用此选项。

由于这看起来与您所描述的情况完全相同，因此耐心似乎是为帮助您而设计的。您可以像这样在一次性分支上试用它：

```
git checkout -b temp_merge_branch master
git merge --strategy-option=patience other_branch 
```

如果合并工作顺利，您可以将结果快进您的主分支。如果没有，您可以丢弃临时分支，并寻找其他替代方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T07:59:40.300

使用这些设置来获得具有五行上下文的耐心差异：

```
git config --global diff.algorithm patience
git config --global diff.context 5 
```

如果您`--color-words`经常使用，这也很有用：

```
git config --global diff.wordRegex '[A-z0-9_]+|[^[:space:]]' 
```

第一个设置需要[Git 1.8.2](https://git-htmldocs.googlecode.com/git/RelNotes/1.8.2.txt "发布时间：2013-03-13")。

# oop - 访客模式 - 添加新的 ConcreteElement 类很难？

> ID：11241761
> 
> 赞同：0
> 
> 时间：2012-06-28T09:32:41.097
> 
> 标签：oop, design-patterns, visitor-pattern

我读了一本关于访客模式的书。[它提供了与oodesign 网站](http://www.oodesign.com/visitor-pattern.html)中相同的类图。

它说添加新的 ConcreteElement 类很难。但我不明白为什么。据我了解，Concretevisitor 定义了具体元素必须使用的一组操作。因此，当我添加一个具有我之前定义的相同操作的新元素时，我不需要添加任何东西（只需 ConcreteElement 本身）。如果我添加一个新元素，它没有我之前在访问者中定义的相同操作，我需要添加一个新访问者。但这是我必须在任何设计模式中做的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:12:32.827

好吧，您必须扩展所有访问者。

您有一个调用者，一些需要访问的元素，以及一个元素 - 访问者 - 对各个元素进行处理。您的目标是保持元素和调用者的实现固定，并通过新访问者扩展功能。

通常你有很多具体的访客。如果添加要处理的新元素类型，则需要更改所有具体访问者以考虑到这一点。

为什么？

好吧，假设调用者是“Factory”，并且您有元素“Car”和“Bike”。

对于“油漆”操作，您必须拥有方法

```
void process(Car c); // Paint a car
void process(Bike b); // Paint a bike 
```

对于“组装”、“包装”、“清洗”等操作也是如此。

如果添加元素“Scooter”，则必须使用新方法扩展所有操作

```
void process(Scooter s); // Handle a Scooter 
```

这有点工作。此外，您可能会遇到您添加的元素与其他元素如此不同的问题，以至于您无法轻松地将它们适合操作。

维基百科（http://en.wikipedia.org/wiki/Visitor_pattern）说

> 本质上，访问者允许在不修改类本身的情况下向类族中添加新的虚函数；相反，我们创建了一个访问者类，它实现了虚函数的所有适当的特化。访问者将实例引用作为输入，并通过双重调度实现目标。

这是一种非常抽象的方式来表达我上面试图说的内容。通常你会将这些方法添加到元素中，但如果你不能，你必须将这些方法添加到其他东西中，并将其传递给进行处理。这是一些额外的工作，但如果情况合适，这可能是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:13:14.537

这是最近出现在一个 SO 问题中的。从[这个](https://stackoverflow.com/questions/11154668/is-the-visitor-pattern-useful-for-dynamically-typed-languages/11157062#11157062)问题引用我自己，更具体地说是[讨论](https://chat.stackoverflow.com/rooms/12920/discussion-between-tcarvin-and-alexis)

> 不更改实体集（您访问的类）的前提条件是因为它迫使您在每个具体访问者中实现一个新的 VisitXYZ。但是我从来没有考虑过这种推理，因为如果你支持持久性访问者、文本搜索访问者、打印访问者和验证访问者，然后你去添加一个新实体，你将要实现所有这些反正功能。访问者模式（具有公共基类）只是让编译器找到您忘记为您实现的那些。

所以是的，人们常说很难实现添加具体元素（或实体），但在我看来，这是胡说八道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:27:45.407

如果您添加一个新的具体元素，那么您的所有访问者类都需要`visit`为新元素添加一个新方法。如果您不使用访问者，则无论如何都必须将等效方法添加到新的具体元素中。

但是为每个访问者添加一个新方法可能比向一个新元素类添加等效的方法集更难。原因是访问者经常需要遍历元素树结构，并且可能需要在这样做时管理自己的状态数据。添加新`visit`方法可能需要修改状态数据，这涉及考虑新方法如何与`visit`其他元素的现有方法交互。

如果您没有访问者，将等效方法添加到您的新元素类可能会更简单，因为您只需要担心更具凝聚力的新具体元素的内部状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T07:11:07.890

从本质上讲，访问者模式是一种数据操纵器，它将

*   遵循一些规则在元素之间遍历
*   对这些元素提供的数据进行一些计算和操作

一言以蔽之，访问者模式将扩展系统功能，而无需触及元素类定义。

但这是否意味着如果添加了新的具体元素类，则必须修改访问者类？我相信，这取决于访问者模式的设计和实现方式。

如果将visitor的所有访问方法拆分成visit functors，并动态绑定在一起，那么在扩展how系统时，无论是visitor还是visitee，都可能会更容易一些。

这是我几年前写的访问者模式的实现，代码有点旧，没有很好的修饰，但不知何故可以工作:)

[https://github.com/tezheng/visitor](https://github.com/tezheng/visitor)

# java - 如何在java中处理Windows和UNIX上不同的file.separator

> ID：11241762
> 
> 赞同：5
> 
> 时间：2012-06-28T09:32:43.017
> 
> 标签：java, file

我正在审查我的代码

我的 Java 应用程序使用 Java 6 在 Windows 和 Unix 上运行并处理文件。我知道我可以使用 file.separator 以独立于文件系统的方式获取文件分隔符，但是如果我曾经直接使用指定 windows 文件分隔符字符，因为 '\' 这也是我无法操作的 Java 转义字符文件路径。因此，在我的代码中，我总是通过将 \' 替换为 '/' 来以 unix 表示法存储文件路径，并且这些路径存储在数据库中，所以我认为那里也存在转义问题。所以我错觉尝试使用 file.separator 也会失败，因为它会返回 '\' 而不是 '\' 但现在意识到只需要 \ 如果我自己明确地在引号中指定它。

现在我认为这一切都是不必要的，只要我总是使用 file.separator 我就不需要进行这种转换，对吗？

编辑：发现一个似乎有问题的案例

```
"C:\Fred\test1.txt".split("\\\\");
"C:\Fred\test1.txt".split(System.getProperty("file.separator")); 
```

如果我想用 \ 分割字符串，我将它加倍，因为 \ 在正则表达式中具有特殊含义，所以使用 file.separator 的行失败了

```
java.util.regex.PatternSyntaxException: Unexpected internal error near index 1
\
 ^
    at java.util.regex.Pattern.error(Pattern.java:1713)
    at java.util.regex.Pattern.compile(Pattern.java:1466)
    at java.util.regex.Pattern.<init>(Pattern.java:1133)
    at java.util.regex.Pattern.compile(Pattern.java:823) 
```

但是在 unix 上没有这样的要求，相应的 '/' 不应该被转义

[编辑 2：在使用系统文件分隔符拆分文件名](https://stackoverflow.com/questions/10336293/splitting-filenames-using-system-file-separator-symbol)之前已经问过这个问题，解决方案归结为在输入周围使用 Pattern.quote() 或尝试使用文件方法而不是正则表达式。如果可以以独立于系统的方式查看文件，我会更喜欢它，我不认为 Java 7 中的路径有同样的问题。

编辑 3：还看到从 db 读取/写入的问题，创建了一个单独的问题，关于[在数据库中存储 Windows 路径并使用 java 使用 Hibernate 检索](https://stackoverflow.com/questions/11242543/storing-windows-path-in-database-and-retrieving-with-hibernate-using-java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T09:36:55.620

是的，你是对的 - 如果你使用 File.Seperator，你不需要任何额外的转义，因为在 Windows 中它已经为你转义了。来自 java[文档](http://docs.oracle.com/javase/8/docs/api/java/io/File.html#separatorChar)。

```
separatorChar

public static final char separatorChar

The system-dependent default name-separator character. 
This field is initialized to contain the first character of the value of the system property file.separator. 
On UNIX systems the value of this field is '/';
on Microsoft Windows systems it is '\\'. 
```

# java - JProfiler7.1.2 在 Windows 上不起作用

> ID：11241764
> 
> 赞同：1
> 
> 时间：2012-06-28T09:32:43.953
> 
> 标签：java, tomcat, jprofiler

我已经在 WINDOWS XP 上安装了 Jprofiler 7.1.2 & tomcat 5.0.19。我创建了一个以 127.0.0.1 作为主机和 8849 作为端口的会话。

单击确定按钮后收到消息

> 无法连接到 127.0.0.1:8849。请确保远程地址正确，远程程序启动正常，网络路由允许socket连接。

我还需要设置什么？我应该在配置的 JVM 设置的启动和停止命令中添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:06:45.787

该会话将连接到已加载分析代理的 JVM。

要对未加载分析代理的 JVM 进行分析，请使用

会话->快速附加

在 JProfiler 主菜单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T12:19:29.100

以下检查列表可用于解决该问题：

*   检查 JAVA_HOME 是否设置为与应用程序相同的版本
*   验证 %JAVA_OPTS% 的正确值/参数
*   将 VM Alive 的复选框设置为 ON（在 Settings -> Profile Settings 下）

# c# - 丢失连接时的 asp.net 会话超时

> ID：11241766
> 
> 赞同：0
> 
> 时间：2012-06-28T09:32:44.097
> 
> 标签：c#, asp.net, timeout

我有一个不需要（无限期地）超时的 Intranet 页面，我正在使用 JS 让它保持这种状态。

但是我遇到了一个问题，当用户失去连接时（由于进出wifi范围而经常发生）会话超时。

如果发生这种情况，我如何保持会话正常运行/刷新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:37:45.490

如何增加 web.config 上的会话超时？

```
<configuration>
  <system.web>
     <sessionState timeout="120"></sessionState>
  </system.web>
</configuration> 
```

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.timeout.aspx)

其他可能的方法是使您的数据库与用户 cookie 连接，并使用与您的用户完全连接的“自定义会话”数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:42:36.977

如果您使用表单身份验证，请尝试在 Web 配置中使用

```
<system.web>
    <authentication mode="Forms">
          <forms timeout="120"/>
    </authentication>

    <sessionState timeout="120"  />
</system.web> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:47:53.307

first 在服务器上设置会话超时是针对所有会话而不是单个会话

wifi范围外是整个网络都坏了所以不能保持活力

您必须使用 cookie 使用 cookie 保持活动状态

# javascript - JavaScript - JSP - 如何正确地将函数附加到现有表单中的按钮？

> ID：11241774
> 
> 赞同：0
> 
> 时间：2012-06-28T09:32:59.147
> 
> 标签：javascript, model-view-controller, google-app-engine, jsp, button

我正在编写几个 JSP 页面，我需要将一个函数附加到现有表单中的按钮上。在此表单中，提交按钮执行到另一个 jsp 视图的导航（我在 Google AppEngine 上使用带有 Slim3 框架的 MVC 模式），并且我需要另一个按钮（在提交按钮旁边）执行到另一个不同 JSP 视图的导航. 因此，为了实现这一点，我在现有表单中创建了另一个“按钮”类型的按钮，创建了一个 .js 文件，在其中放置我的 JavaScript 代码以执行“替代”导航，并将 .js 包含在 JSP 视图中。但是，它不起作用._。这是代码：

包含以下表单的 JSP 页面：

```
...
<body>
    <%@ include file="script.js" %>
    <%@ include file="../header.jsp" %>
    <%@ include file="sidebar.jsp" %> 

    <div id="content">
        <div id="main">
            <p>Hello main admin testimonials edit Index !!!</p>
            <h2><b>Modifica Testimonial</b></h2>
            <form action="update" method="post">
                <h3>Nome: </h3>
                <textarea name="name">${f:h(testimonial.name)}</textarea><br />
                <h3>Cognome: </h3>
                <textarea name="surname">${f:h(testimonial.surname)}</textarea><br />
                <h3>Dettagli: </h3>
                <textarea name="details">${f:h(testimonial.details)}</textarea><br />
                <h3>Progetto:</h3>
                <select name="projectKey" selected="${f:h(testimonial.projectRef.key)}">
                    <c:forEach items="${projectsList}" var="project">
                        <option value="${f:h(project.key)}">${f:h(project.name)}</option>
                    </c:forEach>
                </select>
                <br />
                <input type="submit" value="Aggiorna"/>
                <input type="button" value="Elimina" onclick="delete()"/>
                <input type="hidden" ${f:hidden("key")}/>
            </form>
        </div>
    </div>
</body>
</html> 
```

脚本.js：

```
<script type="text/javascript"> 
        function delete()
        {
            if (confirm('Ask navigation confirm'))
            {
                window.navigate("bla bla new view url");
            }
            else
            {
                return;
            }
        }
</script> 
```

编辑：我更改了函数的名称，替换为原始代码中的真实名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:07:10.120

好的， <%@ include file="script.js" %> 效果很好，将代码放在页面中的script.js中。现在，它工作正常！我更改了函数名称，从“delete()”传递到“fdelete()”，似乎“delete”名称会产生问题，我在想是因为我试图直接在页面中编写 JavaScript（一个非常简单警报）并从按钮调用它，使用“delete（）”函数名称脚本没有运行！我不明白为什么，但就是这样。

编辑：经过多年的网络开发，我再次进入了这个问题。*当然，*一个名为“delete”的函数是行不通的，因为“delete”是一个 JavaScript 保留字！

JavaScript 上帝，请原谅我的罪过，我还年轻，没有经验 :(

# coffeescript - 如何在 CoffeeScript 中缩进列表理解？

> ID：11241776
> 
> 赞同：5
> 
> 时间：2012-06-28T09:33:08.213
> 
> 标签：coffeescript, indentation

我有以下行`CoffeeScript`：

```
names = (mail.folder for mail in @data when mail.service_name is service.name).unique() 
```

这条线太长了，所以它不会通过 linting `CoffeeLint`。

我试图打破它，但我总是得到缩进错误`CoffeeLint`。

缩进的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T01:02:04.120

这是最易读的版本，不会过于冗长：

```
names =
  (for mail in @data when mail.service_name is service.name
    mail.folder).unique() 
```

您不能将列表推导式拆分为多行，但普通的 for 循环也可以返回一个值，因此使用其中之一可以解决问题。如果您愿意授予额外的行，则无需在循环周围使用笨拙的括号：

```
names =
  for mail in @data when mail.service_name is service.name
    mail.folder
names = names.unique() 
```

最后，`for`行的缩进取决于你；我发现我的第一个版本更具可读性，但这也是有效的：

```
names =
(for mail in @data when mail.service_name is service.name
  mail.folder).unique() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T15:10:31.650

这[编译得很好](http://goo.gl/D7wwa)：

```
names = (mail.folder for mail in @data \
         when mail.service_name is service.name).unique() 
```

您还可以反转`for ... when`和表达式：

```
names = (for mail in @data when mail.service_name is service.name
           mail.folder).unique() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:35:54.530

显然不允许将列表理解拆分为多行：

[https://stackoverflow.com/a/8553292](https://stackoverflow.com/a/8553292)

# automation - 从服务器运行 autoit/autohotkey 脚本？或其他自动化替代方案？

> ID：11241778
> 
> 赞同：0
> 
> 时间：2012-06-28T09:33:09.960
> 
> 标签：automation, autoit

我有一些脚本（AutoIt）浏览 YouTube 以获取热门视频列表等。它不涉及鼠标点击（只是击键）。该脚本需要很长时间才能完成，在此期间我无法使用我的电脑（它需要激活窗口才能在上面工作）。

对此我能做些什么吗？这些脚本可以从服务器或类似的东西运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-02T00:05:44.543

我遇到了类似的问题：必须在 Windows Server 上使用 AutoIt 运行自动化，而整个事情必须是无头的。使用远程桌面根本不起作用，因为那时我不得不一直保持客户端打开和最大化。

简短的解决方案：在Windows Server中安装一个VNC服务器，从另一台计算机打开一个客户端，登录并关闭客户端。由于 AutoIt 脚本是由 Jenkins 作业启动的，因此在关闭客户端之前，必须通过 Web 界面启动 Jenkins 小程序。

顺便说一句，我从这篇文章中得到了这个想法：[如何运行远程无头 GUI 自动化](http://autumnator.wordpress.com/2011/11/18/how-to-run-remote-headless-gui-automation/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T05:59:05.013

正如 Johannes 所说，AutoIt 可能不适合（AutoHotkey 也是如此），但您可以查看其他语言存在的许多 GUI 和 Web 测试框架。使用其中一些，您可以运行“无头”浏览器（一种像浏览器一样导航网络的程序，但没有可见窗口）；或者您可以在 Xvfb X11 服务器等虚拟显示器上运行标准浏览器。如果服务器（或将要运行的任何地方）运行类似 Unix 的操作系统，这将是最简单的，但在 Windows 上也可以。

Selenium Webdriver 似乎是编写脚本和测试实际浏览器的一个非常流行的选择。它本机是 Java，但具有对 Ruby 等语言的绑定。它还可以挂接到名为 HtmlUnit 的东西，它也是 Java；这是最流行的无头浏览器之一。另一个（相对较新的）是 phantom.js，它在 Javascript 中，但（再次）具有其他语言的绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:35:16.740

据我所知，除非用户帐户登录，否则这将不起作用。您可以尝试查看是否可以将其转换为 exe 并将其作为服务运行，但即便如此我认为这不会起作用。如果你发现了，请告诉我！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T12:41:57.993

您可以：

隐藏您的窗口（SetWindowState @SW_HIDE）或类似的东西......并使用 ControlClicks（如果它们是原始控件！）

或者

隐藏您的窗口并使用 SendControl

或者

使用 SendKeepActive

或者

使用 ie.au3 之类的 OLEObjects 进行自动化。

祝你好运

# java - 如何使用 JBoss AS 4.2 远程运行 Java EE 项目？

> ID：11241780
> 
> 赞同：0
> 
> 时间：2012-06-28T09:33:33.407
> 
> 标签：java, jakarta-ee, jboss, seam2

我正在`http://localhost:8080/msh/login.seam?cid=1`使用 A JBoss 服务器运行 Java EE 接缝项目。我的电脑名称是`pc-10`。

我想远程访问这个接缝项目`http://pc-10:8080/msh/login.seam?cid=1`。

有人可以指出我正确的方向，以便实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:40:44.157

除非您有防火墙或其他东西，否则它应该可以正常工作。

在我记得的 jboss 中，默认情况下它不可能访问远程服务器。所以在运行 jboss 时你应该定​​义

`-b0.0.0.0`

参数作为 IP 掩码。这将告诉 jboss 接受来自 LAN 中所有服务器的连接。

希望这可以帮助

# python - Jenkins 中的 Python 单元测试？

> ID：11241781
> 
> 赞同：150
> 
> 时间：2012-06-28T09:33:34.157
> 
> 标签：python, unit-testing, jenkins, junit, xunit

你如何让 Jenkins 执行 python 单元测试用例？是否可以从内置`unittest`包中输出 JUnit 样式的 XML？

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2013-10-01T21:32:22.267

# 样品测试：

测试.py：

```
# tests.py

import random
try:
    import unittest2 as unittest
except ImportError:
    import unittest

class SimpleTest(unittest.TestCase):
    @unittest.skip("demonstrating skipping")
    def test_skipped(self):
        self.fail("shouldn't happen")

    def test_pass(self):
        self.assertEqual(10, 7 + 3)

    def test_fail(self):
        self.assertEqual(11, 7 + 3) 
```

# [带有 pytest 的 JUnit](http://pytest.org/latest/usage.html#creating-junitxml-format-files)

运行测试：

```
py.test --junitxml results.xml tests.py 
```

结果.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<testsuite errors="0" failures="1" name="pytest" skips="1" tests="2" time="0.097">
    <testcase classname="tests.SimpleTest" name="test_fail" time="0.000301837921143">
        <failure message="test failure">self = &lt;tests.SimpleTest testMethod=test_fail&gt;

    def test_fail(self):
&gt;       self.assertEqual(11, 7 + 3)
E       AssertionError: 11 != 10

tests.py:16: AssertionError</failure>
    </testcase>
    <testcase classname="tests.SimpleTest" name="test_pass" time="0.000109910964966"/>
    <testcase classname="tests.SimpleTest" name="test_skipped" time="0.000164031982422">
        <skipped message="demonstrating skipping" type="pytest.skip">/home/damien/test-env/lib/python2.6/site-packages/_pytest/unittest.py:119: Skipped: demonstrating skipping</skipped>
    </testcase>
</testsuite> 
```

# [带鼻子的 JUnit](http://nose.readthedocs.org/en/latest/plugins/xunit.html)

运行测试：

```
nosetests --with-xunit 
```

鼻子测试.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="nosetests" tests="3" errors="0" failures="1" skip="1">
    <testcase classname="tests.SimpleTest" name="test_fail" time="0.000">
        <failure type="exceptions.AssertionError" message="11 != 10">
            <![CDATA[Traceback (most recent call last):
File "/opt/python-2.6.1/lib/python2.6/site-packages/unittest2-0.5.1-py2.6.egg/unittest2/case.py", line 340, in run
testMethod()
File "/home/damien/tests.py", line 16, in test_fail
self.assertEqual(11, 7 + 3)
File "/opt/python-2.6.1/lib/python2.6/site-packages/unittest2-0.5.1-py2.6.egg/unittest2/case.py", line 521, in assertEqual
assertion_func(first, second, msg=msg)
File "/opt/python-2.6.1/lib/python2.6/site-packages/unittest2-0.5.1-py2.6.egg/unittest2/case.py", line 514, in _baseAssertEqual
raise self.failureException(msg)
AssertionError: 11 != 10
]]>
        </failure>
    </testcase>
    <testcase classname="tests.SimpleTest" name="test_pass" time="0.000"></testcase>
    <testcase classname="tests.SimpleTest" name="test_skipped" time="0.000">
        <skipped type="nose.plugins.skip.SkipTest" message="demonstrating skipping">
            <![CDATA[SkipTest: demonstrating skipping
]]>
        </skipped>
    </testcase>
</testsuite> 
```

# [带nose2的JUnit](http://nose2.readthedocs.org/en/latest/plugins/junitxml.html)

您将需要使用该`nose2.plugins.junitxml`插件。您可以`nose2`像通常那样使用配置文件进行配置，也可以使用`--plugin`命令行选项进行配置。

运行测试：

```
nose2 --plugin nose2.plugins.junitxml --junit-xml tests 
```

鼻子2-junit.xml：

```
<testsuite errors="0" failures="1" name="nose2-junit" skips="1" tests="3" time="0.001">
  <testcase classname="tests.SimpleTest" name="test_fail" time="0.000126">
    <failure message="test failure">Traceback (most recent call last):
  File "/Users/damien/Work/test2/tests.py", line 18, in test_fail
    self.assertEqual(11, 7 + 3)
AssertionError: 11 != 10
</failure>
  </testcase>
  <testcase classname="tests.SimpleTest" name="test_pass" time="0.000095" />
  <testcase classname="tests.SimpleTest" name="test_skipped" time="0.000058">
    <skipped />
  </testcase>
</testsuite> 
```

# [带有 unittest-xml-reporting 的 JUnit](https://github.com/danielfm/unittest-xml-reporting)

将以下内容附加到`tests.py`

```
if __name__ == '__main__':
    import xmlrunner
    unittest.main(testRunner=xmlrunner.XMLTestRunner(output='test-reports')) 
```

运行测试：

```
python tests.py 
```

测试报告/TEST-SimpleTest-20131001140629.xml：

```
<?xml version="1.0" ?>
<testsuite errors="1" failures="0" name="SimpleTest-20131001140629" tests="3" time="0.000">
    <testcase classname="SimpleTest" name="test_pass" time="0.000"/>
    <testcase classname="SimpleTest" name="test_fail" time="0.000">
        <error message="11 != 10" type="AssertionError">
<![CDATA[Traceback (most recent call last):
  File "tests.py", line 16, in test_fail
    self.assertEqual(11, 7 + 3)
AssertionError: 11 != 10
]]>     </error>
    </testcase>
    <testcase classname="SimpleTest" name="test_skipped" time="0.000">
        <skipped message="demonstrating skipping" type="skip"/>
    </testcase>
    <system-out>
<![CDATA[]]>    </system-out>
    <system-err>
<![CDATA[]]>    </system-err>
</testsuite> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-13T03:12:38.607

我会第二次使用鼻子。现在内置了基本的 XML 报告。只需使用 --with-xunit 命令行选项，它将生成一个 nosetests.xml 文件。例如：

> 鼻子测试--with-xunit

然后添加一个“发布 JUnit 测试结果报告”post build action，并使用nosetests.xml 填写“测试报告XMLs”字段（假设您在$WORKSPACE 中运行nosetests）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-28T23:24:16.207

您可以安装[unittest-xml-reporting](http://pypi.python.org/pypi/unittest-xml-reporting)包以将生成 XML 的测试运行器添加到内置`unittest`.

我们使用[pytest](http://pytest.org/)，它内置了 XML 输出（它是一个命令行选项）。

无论哪种方式，都可以通过运行 shell 命令来执行单元测试。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-28T09:45:07.263

我用鼻子测试。有插件可以为 Jenkins 输出 XML

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-28T09:45:45.990

当我们使用 buildout[`collective.xmltestreport`](https://pypi.python.org/pypi/collective.xmltestreport)来生成 JUnit 风格的 XML 输出时，可能是[源代码](https://github.com/collective/collective.xmltestreport)或模块本身可能会有所帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-08-15T09:23:40.020

```
python -m pytest --junit-xml=pytest_unit.xml source_directory/test/unit || true # tests may fail 
```

从 jenkins 作为 shell 运行它，您可以在 pytest_unit.xml 中获取报告作为工件。

# javascript - 如何取消粗体文本？一个小小的 WYSIWYG 编辑器

> ID：11241787
> 
> 赞同：0
> 
> 时间：2012-06-28T09:33:46.590
> 
> 标签：javascript, editor, wysiwyg, bold, execcommand

嘿 Stackoverflow 社区，

有一种方法`str.bold()`可以将文本包装在`<b></b>`标签中。这对于小型 WYSIWYG 编辑器来说是完美的（我知道有些人会说我应该采用数百个开源解决方案中的一个，但这也是出于学习目的）。

问题是如何取消粗体文本。

这是我的尝试[http://jsfiddle.net/Kxmaf/178/](http://jsfiddle.net/Kxmaf/178/)

我知道有，`editor.execCommand('bold', false, '');`但这会在每个浏览器上产生不同的 HTML 结果。我只需要`<b></b>`, `<i></i>`,`<u></u>`

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:43:54.230

按下特定样式按钮时，如何使用 javascript 循环选择字符串。您只需将几个标签（如**,** , ....）保存在一个数组中，然后循环遍历您选择的特定字符串。因此，您甚至可以在找到任何标签时更改样式按钮的样式，以让用户知道刚刚使用了哪种样式。取消选择样式后，再次循环并从字符串中删除标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:08:36.957

您需要考虑用户的选择跨越段落的情况。例如（用管道表示的选择边界）：

```
<p>One <b>t|wo</b></p>
<p>Thr|ee</p> 
```

要处理此问题，您需要将用户选择中的所有文本节点和部分文本节点包装在`<b>`标签中，同时还要检测哪些文本节点已经是粗体并不理会它们。这不是微不足道的，`document.execCommand()`它会为您处理一切，就像大型 WYSIWYG 编辑器一样。

大多数浏览器允许在样式模式之间切换，允许您在使用元素的样式之间进行选择，例如`<b>`和`<i>`或使用`<span>`具有样式属性的元素进行样式设置。您可以使用“StyleWithCSS”命令执行此操作，在旧浏览器中回退到“UseCSS”。以下切换命令以使用非 CSS 版本：

```
try {
    if (!document.execCommand("StyleWithCSS", false, useCss)) {
        // The value required by UseCSS is the inverse of what you'd expect
        document.execCommand("UseCSS", false, !useCss);
    }
} catch (ex) {
    // IE doesn't recognise these commands and throws.
} 
```

最后，如果你改用 CSS 类而不是`<b>`etc.，你可以使用我[Rangy](http://code.google.com/p/rangy)库的[CSS 类应用程序模块。](http://code.google.com/p/rangy/wiki/CSSClassApplierModule)

# android - 应用程序强制停止时，应用程序中使用 AlarmManager 设置的警报被删除

> ID：11241794
> 
> 赞同：1
> 
> 时间：2012-06-28T09:34:11.527
> 
> 标签：android, alarmmanager

我正在尝试使用`AlarmManager`它创建警报，即使设备被锁定也能正常工作。

但是当我使用杀死应用程序时，我的 `Settings -> Manege App -> MyApp -> Force Stop`警报**会破坏所有设置**。

所以请告诉我**如何在应用程序被强制停止后保存我的警报设置**，它会在正常时间通知我。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T21:51:45.697

从 Android 3.1 开始，如果用户强制关闭您的应用程序，所有警报都将被取消，并且需要从您的代码中重新安排...

来自 Android Docs.... 请注意，系统会将 FLAG_EXCLUDE_STOPPED_PACKAGES 添加到所有广播意图中。这样做是为了防止来自后台服务的广播无意或不必要地启动已停止应用程序的组件。后台服务或应用程序可以通过将 FLAG_INCLUDE_STOPPED_PACKAGES 标志添加到应该允许激活停止的应用程序的广播意图来覆盖此行为。

应用程序在首次安装但尚未启动以及由用户手动停止时（在管理应用程序中）处于停止状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T09:49:51.620

> 但是当我使用 Settings -> Manege App -> MyApp -> Force Stop 杀死应用程序时，我的警报会破坏所有设置。

AlaramManager 是始终运行的关键系统服务。如果您的应用程序安排了某些事情并被杀死，那么 AlarmManager 可能会再次启动应用程序（通过 PendingIntent）。

只需检查[`this`](https://stackoverflow.com/questions/6558694/difference-between-alarmmanager-and-scheduledexecutorservice)StackOverflow 上的答案。

# ruby-on-rails-3.1 - 文件上传在 IE + ROR 中不起作用

> ID：11241795
> 
> 赞同：1
> 
> 时间：2012-06-28T09:34:12.093
> 
> 标签：ruby-on-rails-3.1

我正在使用 valums file_uploader.js 上传文件，我想上传所有类型的文件，如图像、音频、视频等。它在 firefox 和 chrome 中运行良好。在 safari 中上传工作良好，除了多个文件。但在 IE 中没有任何效果。

有一行 input.files 来获取文件详细信息。它在 IE 中给出 null 或 undefined。我尝试了所有版本的 IE，7-9。但是没有用。

如何使用 javascript 在 IE 中获取文件属性。我尝试使用 ajax-uploader，但我不知道如何使用它。

我正在使用 ruby​​ 1.9.2、rails 3.2.1 和 jquery 1.7.2。版本有问题吗？

提前致谢。

# asp.net-mvc - Asp.Net 防伪

> ID：11241796
> 
> 赞同：2
> 
> 时间：2012-06-28T09:34:13.547
> 
> 标签：asp.net-mvc, asp.net-mvc-3, csrf, antiforgerytoken

我有一个问题，我最近在我的所有表单中都放入了防伪令牌，并在我的控制器中放入了`ValidateAntiForgeryToken`属性。

但是我的用户经常填写表格，然后用浏览器按钮返回，纠正他们的一个错误，他们得到无效的防伪令牌。

我可以理解为什么会发生这种情况（我们将返回并使用不再有效的防伪令牌），但是有什么方法可以避免这种行为吗？喜欢强制重新加载此页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:30:13.143

这很奇怪。防伪令牌不是一次性使用令牌。它们通常可以在同一个会话中愉快地重用。您的用户当时是否已登录？令牌基于登录，因此如果他们在此期间重新登录，则令牌可能不再有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:16:11.647

使用 TempData 方法的“redirect-after-post 模式”应该可以解决您的问题。

基本思想是你会`TempData`在你的 Action 中添加一些值并检查该值是否存在。如果用户按下了“后退按钮”或刷新了页面，则该`TempData`值将不再存在 - 您可以检查该值并做出适当的反应（即，如果您愿意，请重新提交该操作）。

我可以更详细地介绍，但Darin Dimitrov 的[这篇文章](https://stackoverflow.com/a/2918659/1026898)总结得恰到好处

# java - 如何将 InputStream 通过管道传输到 ProcessBuilder

> ID：11241800
> 
> 赞同：8
> 
> 时间：2012-06-28T09:34:33.060
> 
> 标签：java, stdin, java-io, wkhtmltopdf, processbuilder

**请移至第二次更新。我不想更改此问题的先前上下文。**

我正在使用来自 Java 应用程序的 wkhtmltoimage。

使用它的标准方式是 - `path-to-exe http://url.com/ image.png`。

根据他们的文档，如果我们编写 a`-`而不是输入 URL，则输入将转移到 STDIN。

我正在使用`ProcessBuilder`-

```
ProcessBuilder pb = new ProcessBuilder(exe_path, " - ", image_save_path);

Process process = pb.start(); 
```

现在我无法弄清楚如何将输入流通过管道传输到这个进程。

我有一个模板文件读入 a `DataInputStream`，并在末尾附加了一个字符串：

```
DataInputStream dis = new DataInputStream (new FileInputStream (currentDirectory+"\\bin\\template.txt"));
byte[] datainBytes = new byte[dis.available()];
 dis.readFully(datainBytes);
 dis.close();

 String content = new String(datainBytes, 0, datainBytes.length);

 content+=" <body><div id='chartContainer'><small>Loading chart...</small></div></body></html>"; 
```

我如何管道`content`到`STDIN`进程？

**更新 - -**

按照 Andrzej Doyle 的回答：

我已经使用了`getOutputStream()`该过程：

```
ProcessBuilder pb = new ProcessBuilder(full_path, " - ", image_save_path);

    pb.redirectErrorStream(true); 

    Process process = pb.start();         

    System.out.println("reading");

    BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(process.getOutputStream()));

    bw.write(content); 
```

这样做会出现错误消息：

```
Exception in thread "main" java.io.IOException: The pipe has been ended 
```

**第二次更新--------**

当前的代码块是这样的：

```
 try {
        ProcessBuilder pb = new ProcessBuilder(full_path, "--crop-w", width, "--crop-h", height, " - ", image_save_path);
        System.out.print(full_path+ "--crop-w"+ width+ "--crop-h"+ height+" "+ currentDirectory+"temp.html "+ image_save_path + " ");
        pb.redirectErrorStream(true); 

        Process process = pb.start(); 
        process.waitFor();
        OutputStream stdin = process.getOutputStream();

        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stdin));
// content is the string that I want to write to the process.

        writer.write(content);
        writer.newLine();  
        writer.flush();
        writer.close();

    } catch (Exception e) {
        System.out.println("Exception: " + e);
        e.printStackTrace();
    } 
```

运行上面的代码给了我一个`IOException: The pipe is being closed.`

我还需要做什么来保持管道畅通？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T13:38:22.137

> 线程“main”java.io.IOException 中的异常：管道已结束

这意味着您启动的进程已经终止。我建议您阅读输出以了解原因。例如，它给你一个错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T09:04:42.423

您使用 DataInputStream 读取简单文本文件是否有原因？来自 Java 文档

> 数据输入流允许应用程序以与机器无关的方式从底层输入流中读取原始 Java 数据类型

您读取文件的方式可能会导致将 EOF 发送到输出流，从而导致管道在到达您的字符串之前结束。

您的要求似乎是在将文件传递给 wkhtmltoimage 进程之前简单地读取文件以附加到它。

您还缺少将输出流关闭到进程的语句。这将导致进程等待（挂起），直到它从输入流中获得 EOF，这永远不会。

我建议改用 BufferedReader，并在附加附加字符串之前将其直接写入输出流。然后调用 close() 关闭流。

```
ProcessBuilder pb = new ProcessBuilder(full_path, " - ", image_save_path);
pb.redirectErrorStream(true);

Process process = null;
try {
    process = pb.start();
} catch (IOException e) {
    System.out.println("Couldn't start the process.");
    e.printStackTrace();
}

System.out.println("reading");

try {
    if (process != null) {
        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(process.getOutputStream()));

        BufferedReader inputFile = new BufferedReader(new InputStreamReader(new FileInputStream(currentDirectory+"\\bin\\template.txt")));

        String currInputLine = null;
        while((currInputLine = inputFile.readLine()) != null) {
            bw.write(currInputLine);
            bw.newLine();
        }
        bw.write("<body><div id='chartContainer'><small>Loading chart...</small></div></body></html>");
        bw.newLine();
        bw.close();
    }
} catch (IOException e) {
    System.out.println("Either couldn't read from the template file or couldn't write to the OutputStream.");
    e.printStackTrace();
}

BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));

String currLine = null;
try {
    while((currLine = br.readLine()) != null) {
        System.out.println(currLine);
    }
} catch (IOException e) {
    System.out.println("Couldn't read the output.");
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T09:51:56.537

创建`Process`对象后，您可以调用[`getOutputStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#getOutputStream%28%29)以获取将其内容发送到进程的标准输入的流。

一旦掌握了这一点，您就可以使用 Java 的标准 IO 将任何字节写入您想要的 this 流（包括将其包装在 Writer 中，添加缓冲等） - 当您编写它们时，它们将被读取冲洗后立即处理。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-10T11:38:55.297

Remove the whitespace from `" - "`-- 正常的空格被 shell 解析器删除，但在 中`ProcessBuilder`，它被解释为以空格开头和结尾的（文字）文件名。

（实际上，按照彼得的建议查看流程的输出可能会告诉你......）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T09:50:41.070

以下代码也适用：

```
import java.io.*;
import java.util.*;

public class ProcessTest {

    public static void main(String[] args) throws Exception {
        ProcessBuilder pb = new ProcessBuilder("/home/me/stdinecho");
        pb.redirectOutput(ProcessBuilder.Redirect.INHERIT);
        Process proc = pb.start();

        // Input file
        DataInputStream din = new DataInputStream((new FileInputStream("/home/me/stdinecho.cp")));
        byte[] dinBytes = new byte[din.available()];
        din.readFully(dinBytes);
        din.close();
        String content = new String(dinBytes, 0, dinBytes.length);
        content = "header\n" + content + "\nfooter";

        BufferedInputStream procStdout = new BufferedInputStream(proc.getInputStream());
        OutputStream stdin = proc.getOutputStream();

        stdin.write(content.getBytes());
        stdin.flush();
    }

} 
```

这里 stdinecho.cpp 是输出在其提示符下输入的行的程序：

```
#include <iostream>
#include <fstream>
#include <cstdio>

using namespace std;

int main()
{
    string strOutput;
    string str;
    while(getline(cin, str)) {
        cout << str << endl;
    }
} 
```

# extjs - 您如何获取所有商店参数？(ExtJS 4.1)

> ID：11241803
> 
> 赞同：2
> 
> 时间：2012-06-28T09:34:50.220
> 
> 标签：extjs, extjs4, extjs4.1

我将如何获取运行 store.load() 时将发送的所有参数？我的意思是，我不会运行 store.load() 但我想获取所有请求参数。我会怎么做？（这是一个网格的商店）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T16:00:18.330

建立在源代码如何产生参数的基础上，这是一个将产生所需结果的函数，只要知道如果您将 Extjs 更新到 4.1 之后，它可能会因后台代码更改的性质而停止工作：

```
function getParamsObject(store){
    var options = {
        groupers:   store.groupers.items,
        page:       store.currentPage,
        start:      (store.currentPage - 1) * store.pageSize,
        limit:      store.pageSize,
        addRecords: false,
        action:     'read',
        filters:    store.filters.items,
        sorters:    store.getSorters()
    };
    var operation = new Ext.data.Operation(options);

    var fakeRequest = store.getProxy().buildRequest(operation);
    var params = fakeRequest.params;

    return params;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:39:13.490

加载商店后，您可以找到以下参数：

```
store.proxy.extraParams 
```

# android - 键盘不显示？

> ID：11241808
> 
> 赞同：1
> 
> 时间：2012-06-28T09:35:01.140
> 
> 标签：android, android-emulator

我使用的是Eclair版本。当时我在我的办公室桌面上安装了Android插件到Eclipse，模拟器在右侧显示键盘。但是现在我在我的笔记本电脑上安装了 ADT 插件，右边没有键盘，笔记本电脑使用的是 windows 7 操作系统。如何解决这个问题呢 ？

# javascript - 我的脚本有什么错误？

> ID：11241813
> 
> 赞同：0
> 
> 时间：2012-06-28T09:35:26.663
> 
> 标签：javascript, onclick, refresh

我有三个按钮 A、B、C。当我单击按钮 A 时，C 按钮应该隐藏（这不是问题），当我单击按钮 B 时，页面应该被刷新（history.go(0)），应该显示 C 按钮并且应该隐藏 B 按钮，我尝试使用以下代码，过程发生（即）C按钮显示，但B按钮没有隐藏（它只隐藏了几秒钟，然后突然显示）......

```
<script>
$(document).ready(function() {
    $("#A").click(function() {
        $("#C").hide()
    });

    $("#B").click(function() {
        history.go(0)
        $("#C").show();
        $("#B").hide();         
    });
});

</script> 
```

可能是，由于页面刷新，它会显示按钮 B，但我不确定。建议我一些想法来克服这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T05:52:29.163

试试这个答案

```
$(document).ready(function() {

    $("#C").show();

    $("#B").hide();

    $("#A").click(function() {
        $("#C").hide();
        $("#B").show();
    });

    $("#B").click(function() {
        history.go(0)

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:39:58.673

只需在文档开头设置默认值

```
$(document).ready(function() {

    $("#C").show();
    $("#B").hide();         

    $("#A").click(function() {
        $("#C").hide()
    });

    $("#B").click(function() {
        history.go(0)
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:40:05.837

`history.go(0)`是页面刷新，您如何期望在页面处于新状态的页面刷新时发生单击操作。

可能会调用 `$("#C").show(); $("#B").hide();`页面加载并 `$("#B").click`刷新页面。

```
$(document).ready(function() {

 $("#C").show();

 $("#B").hide();

    $("#A").click(function() {
        $("#C").hide()
    });

    $("#B").click(function() {
        history.go(0)

    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T09:40:09.770

问题是您正在刷新页面然后进行隐藏。当你刷新一个页面时，你取消了所有的 js 执行，因此 history.go(0) 之后的代码根本不会执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T09:40:29.533

当浏览器解释 history.go() 时，您的页面会被刷新，并且脚本的其余部分不会执行。

# mongodb - _id 上的重复文档（在 mongo 中）

> ID：11241819
> 
> 赞同：5
> 
> 时间：2012-06-28T09:35:45.887
> 
> 标签：mongodb, duplicates

我有一个分片的 mongo 集合，包含超过 150 万份文档。我使用 _id 列作为分片键，并且该列中的值是整数（而不是 ObjectIds）。

我在这个集合上做了很多写操作，使用 Perl 驱动程序（插入、更新、删除、保存）和 mongoimport。

我的问题是，不知何故，我在同一个_id 上有重复的文档。根据我的阅读，这应该是不可能的。

我已经删除了重复项，但其他人仍然出现。

你有什么想法可以从哪里来，或者我应该从什么开始看？（另外，我试图在一个较小的测试集合上复制它，但无论我执行什么写操作，都不会插入重复项）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:34:57.793

这其实不是 Perl 驱动的问题。。这和 sharding 的特性有关。MongoDB 在创建时只能在位于单个分片上的文档之间强制执行唯一性，因此默认索引不需要唯一性。

在[MongoDB: 配置](http://www.mongodb.org/display/DOCS/Configuring+Sharding)分片文档中，特别提到：

*   对集合进行分片时，必须指定分片键。如果集合中有数据，mongo 将要求预先创建一个索引（它加快了分块过程）；否则，将自动为您创建索引。

*   只要唯一索引是分片键的前缀，您就可以使用 {unique: true} 选项来确保基础索引强制执行唯一性。

*   **如果不使用“unique: true”选项，则分片键不必是唯一的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:52:48.780

您是如何实现生成整数 ID 的？

如果您使用 MongoDB 网站上建议的系统，您应该没问题。以供参考：

```
function counter(name) {
    var ret = db.counters.findAndModify({
         query:{_id:name}, 
         update:{$inc:{next:1}}, 
         "new":true, 
         upsert:true});

    return ret.next;
}

db.users.insert({_id:counter("users"), name:"Sarah C."}) // _id : 1
db.users.insert({_id:counter("users"), name:"Bob D."}) // _id : 2 
```

如果您通过读取文档存储中的最新记录来生成您的 ID，然后在 perl 代码中增加数字，然后插入增加的数字，您可能会遇到计时问题。

# apache-flex - Flex DividedBox 子项显示在外面

> ID：11241820
> 
> 赞同：1
> 
> 时间：2012-06-28T09:35:50.357
> 
> 标签：apache-flex, children

我在 Flex 中使用 DividedBox，它最初只包含一个数据网格。当我单击 Datagrid 上的一个项目时，第二个宽度为 0% 的元素（Spark Group）被添加到分割框中以显示图像。

问题是，当第二个元素添加到 DividedBox 时，图像部分显示在 DividedBox 之外，我不希望有这种行为。

这是有趣的代码：

```
<mx:DividedBox direction="horizontal" id="divider" borderColor="red" borderStyle="solid" borderVisible="true" right="10" left="10" top="10" bottom="10">
    <s:Group width="100%" height="100%">
        <!--datagrid-->
    </s:Group>
</mx:DividedBox> 
```

这是添加分框的第二个孩子的代码（简化代码）：

```
private var _pdf_preview:Group = new Group();
[Bindable]
[Embed(source="assets/image/llama.jpg")]
private var imgClass:Class;

protected function itemOnClickHandler(event:MouseEvent):void
{
    _pdf_preview = new Group();
    var img:Image = new Image();
    img.source = imgClass;
    _pdf_preview.addElement(img);
    _pdf_preview.percentWidth = 0;
    divider.addElement(_pdf_preview);
} 
```

这是问题的屏幕（顺便说一句，不要注意到我在 Gimp 上的技能 :)）。作为新用户，我无法将图像绑定到我的帖子：[屏幕显示我](http://i.stack.imgur.com/l2qRH.jpg)的问题红色边框显示了分框的限制

谢谢你。我希望没有太多的错，英语不是我的母语。抱歉任何英语错误。

PS：我无法添加“DividedBox”标签，因为它以前不存在，而且我是“新用户”，所以我无法创建新标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:06:44.530

您可以使用该`clipContent`属性在 DividedBox 的边缘截断图像：

```
<mx:DividedBox clipContent="true" /> 
```

使用 Spark 容器时，`clipAndEnableScrolling`是您实现相同目标所需的属性。

我还想指出，您通常不需要通过 ActionScript 动态添加组件。您可以改用“状态”。例如：

```
<s:states>
    <s:State name="normal" />
    <s:State name="image" />
</s:states>

<mx:DividedBox clipContent="true">
    <s:DataGrid />
    <s:Image includeIn="image" />
</mx:DividedBox> 
```

现在显示图像所需要做的就是`currentState`将`image`.

# algorithm - 如何避免生成所有子序列

> ID：11241833
> 
> 赞同：2
> 
> 时间：2012-06-28T09:37:01.737
> 
> 标签：algorithm, dynamic-programming

> **可能重复：**
> [方形子序列](https://stackoverflow.com/questions/10000226/square-subsequence)

我一直在尝试解决interviewstreet.com 上的“ [Square Subsequences ”问题：](https://www.interviewstreet.com/challenges/dashboard/#problem/4f3067592a7be)

> 如果一个字符串可以通过连接相同字符串的两个副本获得，则该字符串称为方字符串。例如，“abab”、“aa”是方串，而“aaa”、“abba”则不是。
> 
> **给定一个字符串，该字符串有多少个子序列是方串？**

我尝试制定一个 DP 解决方案，但这个约束似乎无法规避：`S will have at most 200 lowercase characters (a-z)`.

据我所知，找到长度列表的所有子序列`n`是**`O(2^n)`**，一旦`n`大于 30 就不再可行。

`n`如果是 200 ，是否真的可以系统地检查所有解决方案？我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:54:36.490

首先，对于每个字母，`a..z`您都会在以下位置获得其索引列表`S`：

```
`p[x] = {i : S[i] = x}`, where `x = 'a',..,'z'`. 
```

然后我们开始DP：

```
S: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
            ^          ^    ^
            r1        l2    r2 
```

让`f(r1,l2,r2)`是任意长度的*方形子序列*（是方形字符串的子序列）的数量`L`，使得

1.  `SS[L-1] = r1`
2.  `SS[L] = l2`
3.  `SS[2L-1] = r2`

即前半部分正好结束于`r1`，后半部分正好开始于`l2`并结束于`r2`。

那么算法是：

让`f[r1,l2,l2] = 1`if `S[r1] = S[l2]`，否则为 0。

```
for (l2 in 1..2L-1 )
    for( r1 in 0..l2-1 )
        for (r2 in l2..2L-1)
            if( f(r1, l2, r2) != 0 )
                for (x in 'a'..'z')
                    for (i,j: r1 < i < l2, r2 < j, S[i] = S[j] = x) // these i,j are found using p[x] quickly
                        f[i, l2, j] += f[r1, l2, r2] 
```

最后，答案是`f[.,.,.]`数组中所有值的总和。

所以基本上，我们将`S`unisg`l2`分成两部分，然后计算公共子序列。

我现在很难提供准确的时间复杂度估计，它肯定低于`n^4`并且`n^4`对于`n = 200`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:52:53.143

有许多算法（例如[Z 算法](http://codeforces.com/blog/entry/3107)）可以在线性时间内生成前缀长度数组。也就是说，对于每个位置 i，它都会告诉您从位置 i 开始可以读取的最长前缀是什么（当然，对于 i = 0，最长的前缀是 n）。

现在请注意，如果您有一个从开头开始的方形字符串，那么在这个前缀长度数组中有一个位置 k，使得最长长度 >=k。所以你可以再次计算线性时间的数量。

然后删除字符串的第一个字母并做同样的事情。总复杂度为 O(n^2)。

# c# - 保存从电子邮件中获取的文件

> ID：11241834
> 
> 赞同：0
> 
> 时间：2012-06-28T09:37:02.203
> 
> 标签：c#, asp.net, email-attachments

我想保存从电子邮件中获取的附件文件。有没有办法实现它？

File.Create(path of file) 只创建一个具有该名称的空白文件。它没有文件的实际内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:40:51.990

你可以看看[http://www.codeproject.com/Articles/6062/A-POP3-Client-in-C-NET](http://www.codeproject.com/Articles/6062/A-POP3-Client-in-C-NET) 看来一切都已经为你完成了......

# sql - 指定列精度大于最大精度 38

> ID：11241835
> 
> 赞同：0
> 
> 时间：2012-06-28T09:37:04.277
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我正在 SQL Server 2008 中创建一个新的 SP（存储过程），它会给我一个错误，即

```
Specified column precision 52 is greater than the maximum precision of 38 
```

我不明白为什么会发生此错误？

请让我解释为什么会发生此错误以及如何解决此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:49:24.447

系统告诉你错误发生的原因。

您要求的精度为 52，但最大默认精度仅为 38。因此系统无法为您提供您要求的精度。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms190476.aspx](http://msdn.microsoft.com/en-us/library/ms190476.aspx)

“在 SQL Server 中，数值和十进制数据类型的默认最大精度为 38。在 SQL Server 的早期版本中，默认最大值为 28。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:14:48.503

我弄错了，这真的是一个愚蠢的错误，是我错误地产生的。我声明了一个数据类型为十进制的参数，并且错误地使用了十进制的长度 52。所以它给出了一个错误，因为十进制最大长度 id 为 38。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-13T11:10:20.060

您正在尝试放置一个比表中存储的精度更高的变量。

检查您的表结构或您的语句/程序。

对于正在寻找使用休眠解决类似问题的解决方案的其他人，请检查您的映射文件。

`*.hbm.xml`就我而言，我在休眠映射文件 ( )中将精度更改为 38 。

# ipad - 手刹编码的 MP4 无法通过 VideoJS 在 iPad 上播放

> ID：11241836
> 
> 赞同：3
> 
> 时间：2012-06-28T09:37:05.913
> 
> 标签：ipad, video, video.js

我有一个“非常”简单的网页，我用 VideoJS 拼凑在一起播放 MP4。这适用于桌面浏览器和 iPhone，但无法在 iPad 上加载/播放。相反，我只得到一个纯黑色矩形。我完全困惑 - 有什么想法吗？

[http://haslams.net/sandbox](http://haslams.net/sandbox)

我猜这可能是一个编码问题，但我很惊讶它在 iPhone 上播放得很好，但在 iPad 上却不行。两台设备都安装了最新的 iOS (5.1.1)。

:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:13:01.183

在您的链接中，没有使用任何[Video.js 设置方法](http://videojs.com/docs/setup/)，因此基本上 Video.js 没有运行。将 data-setup="{}" 作为属性添加到视频标签。我不确定这是否能解决问题，但这是一个开始。

# redis - 一个队列实例与多个 Redis 实例同步

> ID：11241837
> 
> 赞同：5
> 
> 时间：2012-06-28T09:37:07.927
> 
> 标签：redis, message-queue, rabbitmq, amqp, zeromq

**场景：** 我们有多个地理分布的节点，我们希望在这些节点上建立队列来收集该位置的消息。然后我们希望将收集到的数据从每个节点中的每个队列发送到中心位置的相应队列。在中心节点中，我们将提取队列中收集的数据（从其他节点），对其进行处理并持久存储。

约束：

*   数据对我们来说非常重要。因此，我们必须确保在任何情况下都不会丢失数据。
*   因此，我们需要在每个节点上设置持久队列，这样即使节点由于某种随机原因宕机，当我们启动它时，我们可以安全地保存收集到的数据，并且可以将其发送到可以处理的中央节点。
*   同样，如果中心节点宕机，数据必须保留在所有其他节点，这样当中心节点出现时，我们可以将所有数据发送到中心节点进行处理。
*   此外，中心节点上的数据不得重复或再次存储。也就是说，在其中一个节点上收集的数据应该只在中央节点上存储一次。
*   我们正在收集的数据对我们来说非常重要，数据传输到中心节点的顺序不是问题。

**我们的解决方案** 我们已经考虑了几个解决方案，我将列出我们认为最好的解决方案。一个可能的解决方案（在我们看来）是使用 Redis 在任何地方维护队列，因为 Redis 提供持久存储。然后可能在所有地理上分离的节点上运行一个守护进程，它从队列中读取数据并将其发送到中央节点。接收到数据的中心节点向它接收数据的节点发送一个 ACK​​（因为数据对我们来说非常重要），然后在收到 ACK 时，节点从队列中删除数据。当然，会有一个超时时间，在该时间段内必须接收到 ACK。

**问题** 上述解决方案（根据我们的说法）可以正常工作，但问题是我们不想自己实现整个同步协议，原因很简单，我们可能在这里错了。我们无法在 Redis 中找到这种特殊的同步方式。因此，我们对其他基于 AMQP 的队列（如 RabbitMQ、ZeroMQ 等）持开放态度。同样，我们无法确定是否可以使用这些解决方案做到这一点。

*   这些消息队列或任何其他数据存储是否提供了可以解决我们问题的功能？如果是，那么如何？
*   如果不是，那么我们的解决方案是否足够好？
*   任何人都可以提出更好的解决方案吗？
*   有没有更好的方法来做到这一点？
*   使它失效的最佳方法是什么？
*   我们正在收集的数据对我们来说非常重要，数据传输到中心节点的顺序不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:53:19.987

您可以通过将中央节点（或节点集群）设置为来自其他节点的消息的消费者，并使用消息确认功能来使用 RabbitMQ 执行此操作。这个特性意味着中心节点可以确认投递，因此其他节点只删除确认后的消息。参见例如：[http ://www.rabbitmq.com/tutorials/tutorial-two-python.html](http://www.rabbitmq.com/tutorials/tutorial-two-python.html)

如果您还有其他问题，请通过电子邮件发送邮件列表 rabbitmq-discuss。

# java - 建立 P2P 连接，或将套接字“传递”给其他人

> ID：11241839
> 
> 赞同：1
> 
> 时间：2012-06-28T09:37:18.397
> 
> 标签：java, android, sockets

我想更好地了解网络可以做什么，我目前正在开发一些 Android 应用程序，我想以某种方式通过 WiFi 和/或 3G/4G 实现某种 P2P 连接。我知道这样做会遇到很多困难，但我仍然想知道如何开始解决这个问题，或者有一个方向。

我对此有一个想法，我认为如果它有效，我可以避免 NAT 遍历的所有麻烦（我绝对不会假装我是第一个提出这个想法的人）：

![握手然后传输自己的套接字](../Images/d5bdb79422d31fd31671fbd2c22764f7.png)

Jim 和 John 都连接到服务器。服务器将它们放在同一个盒子中，并相互转发彼此的消息。在某些时候，服务器厌倦了浪费他的带宽。他有一个连接到 Jim 的插座，还有一个连接到 John 的插座。所以“不知何故”（也许是神奇地），他把他的 to-John-Socket 给了 Jim，反之亦然。

因此新的场景：Jim 过来说“嘿服务器，给 John 一个套接字”： 服务器：好的，等他来。约翰：嘿服务器，给吉姆一个插座。服务员：哦，你来了！吉姆，拿走约翰的插座。约翰，拿走吉姆的插座。见你们！

服务器回到他的小生意，而吉姆和约翰做他们自己的事情。

我想肯定没有这么简单。那么我该怎么做呢？如果我需要在某个时候遍历 NAT 网关，我该怎么做（我自己，没有库）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:30:15.830

我认为你的尝试是可以实现的，但如果你从零开始，肯定会很困难而且很耗时。我不是网络编程方面的专家，但我知道足以理解会遇到的复杂情况。

如果您想了解一些有关网络编程的背景信息，那么即使您不熟悉 UNIX，我也会推荐这本书[Unix Network Programming 。](http://www.amazon.co.uk/Unix-Network-Programming-Addison-Wesley-Professional/dp/0131411551/)尽管它是非常技术性和详细的 C 代码，但它为套接字等提供了非常好的背景知识，因为它是从 UNIX 中提出套接字的想法的。

如果我正在做类似的事情，那么我会很想尝试查看一些开源项目，例如[此处](http://www.junauza.com/2008/01/freeopen-source-p2p-file-sharing.html)列出的，甚至[Yahoo Messenger SDK](http://developer.yahoo.com/messenger/)。谷歌搜索“开源 p2p”也可能会给出一些指示，尽管我想其中很多是在 C/C++ 中。

# xcode - Xcode 应用程序设计 - 循环更容易？

> ID：11241840
> 
> 赞同：1
> 
> 时间：2012-06-28T09:37:19.100
> 
> 标签：xcode

我对编程很陌生，想要一些关于基本应用程序结构的建议，如果这很明显，请原谅我。

该应用程序的主要部分是一系列 20 对视图，用户按顺序浏览这些视图（1a、1b、2a、2b、3a 等）。每个 a 视图和 b 视图都具有与其他 a/b 相同的布局，但具有不同的图像、音频和文本。

我可以在一长串中列出故事板中的所有 40 个视图，但这似乎是在重复很多工作（以及创建更大尺寸的应用程序），尽管它在概念上非常简单（并且更稳定？）

或者，我可以只有两个视图（a 和 b），其中包含所有内容和某种计数器，以便 Xcode 可以根据用户在序列中的位置知道要提供哪些内容。实现这一点的最简单方法是什么？但是，我担心这也会变得笨拙，也许保持简单确实是要走的路。

感激地收到任何建议。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:44:35.073

设计完全取决于屏幕的复杂性而不是屏幕的数量。如果 Screen 不会有太大变化，那么您可以采用只有 2 个视图并有条件地加载数据的第二种方法。

或者，如果您想先采用方法，则无需重复所有步骤。您可以以编程方式创建两个包含所有功能的超类，并且您可以创建单独的类（继承概念）而变化的部分。这将使事情变得更容易，您可以重用代码并增加应用程序的可维护性。

# ios - iOS 应用程序方向旋转锁定/解锁由应用程序的配置

> ID：11241841
> 
> 赞同：0
> 
> 时间：2012-06-28T09:37:20.520
> 
> 标签：ios, rotation, orientation

你好，

我正在尝试为我的 iOS 应用程序实现方向旋转锁定/解锁切换开关。

锁定是可以的，但解锁是个问题。

假设应用程序的方向和设备的方向不同的情况。如果用户在这种情况下解锁，应用程序的方向应立即跟随设备的方向。但我找不到路。

如何模拟设备的方向旋转？

编辑

我会澄清情况。

应用程序中有一个拨动开关，启用/禁用方向旋转。

一步步：

1\. 开关启用。

2\. 设备旋转到纵向。

3\. UIViewController 的 shouldAutorotateToInterfaceOrientation 对每个方向都返回 YES。

4\. 应用旋转到portlait。

5\. 用户切换开关以禁用。

6\. 设备旋转为横向。

7\. UIViewController 的 shouldAutorotateToInterfaceOrientation 返回 NO 除了 portlait。

8\. 应用不旋转。

9\. 用户切换开关以启用。

10.应用程序应该旋转到横向。这就是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:00:37.857

我还没有尝试过，但是有一个 viewController 方法`attemptRotationToDeviceOrientation`（iOS5）。可能值得一试。有趣的问题。回来报告它是否有效。

```
// call this method when your return value from shouldAutorotateToInterfaceOrientation: changes
// if the current interface orientation does not match the current device orientation, 
// a rotation may occur provided all relevant view controllers now return YES from shouldAutorotateToInterfaceOrientation:
+ (void)attemptRotationToDeviceOrientation __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_5_0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:03:56.077

在这里查看我的答案：[https ://stackoverflow.com/a/13033443/580173](https://stackoverflow.com/a/13033443/580173)

我制作了一个自定义 UINavigationController，在那里您可以检查您所在的视图，并使用正确的掩码进行响应。（我希望根视图是纵向的）

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    if([self.viewControllers count] == 1) return UIInterfaceOrientationMaskPortrait;
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscape;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T10:07:18.503

您可以阅读处理自动旋转的“技术问答 QA1688”，并在每个视图控制器中制作消息 shouldAutorotateToInterfaceOrientation: 根据您的开关设置返回正确的值。您的 info.plist 中还有一个开关。确保您在此处也有正确的设置

# c# - 小数可以表示的第二个最小值是多少？

> ID：11241842
> 
> 赞同：2
> 
> 时间：2012-06-28T09:37:21.593
> 
> 标签：c#, .net, decimal

a可以表示的*第二个最小值是多少？*`decimal`这是大于`Decimal.MinValue`和小于 a`decimal`可以表示的任何其他值的值。如何在 C# 中获取此值？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T09:50:05.083

第二个最小值是`Decimal.MinValue + 1`。

这可以从以下文档中推断出来`decimal`：

> 十进制数是一个浮点值，它由一个符号、一个数值中的每个数字的范围从 0 到 9 以及一个比例因子组成，该比例因子表示分隔整数和小数部分的浮点小数点的位置的数值。
> 
> Decimal 值的二进制表示由 1 位符号、96 位整数和用于划分 96 位整数并指定它的哪一部分是小数部分的比例因子组成。比例因子是隐含的数字 10，指数范围从 0 到 28。因此，十进制值的二进制表示形式为 ((-2^96 到 2^96) / 10^(0 到28))，其中 -2^96-1 等于 MinValue，2^96-1 等于 MaxValue。

从上面我们可以推断，在合法值范围的极端边缘，缩放因子是`1`（10 的 0 次方），因此这是修改十进制值时的最小量。

**[现场证明](http://ideone.com/L5vv4)**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T09:43:38.160

[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)，小数表示为`((-2^96 to 2^96) / 10^(0 to 28))`，其中`-2^96-1`等于`MinValue`和`2^96-1`等于`MaxValue`，所以两个小数之间的最小差是`1/10^28`。
但是，这种差异仅存在于小数之间。通常，随着小数变大（无论符号如何），您都会丢失小数点，直到没有小数点为止。

更新：正如评论中还指出的那样，您实际上不能通过`decimal.MinValue`添加最小的十进制值来改变（如上所述）。Decimal 有 1 位用于符号，96 位用于数字和除以数字的比例因子 (10^x)。

为了得到如此大的负数，必须将比例因子的指数部分设置为`0`(-> 10^0 == 1)，因为将其设置为更高的值会导致数字除以该数字，因此它会变小。

这意味着，对于这样的数字，最小的差异将是`1/10^0`或`1`。

所以你正在寻找这个：

```
decimal.MinValue + 1m; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T09:39:46.633

[http://msdn.microsoft.com/en-us/library/system.decimal.minvalue.aspx](http://msdn.microsoft.com/en-us/library/system.decimal.minvalue.aspx)

```
Decimal.MinValue + 1 
```

所以：-79,228,162,514,264,337,593,543,950,334。

# .net - 与 EWS 绑定时的电子邮件消息未检测到 .MSG 文件

> ID：11241843
> 
> 赞同：0
> 
> 时间：2012-06-28T09:37:23.243
> 
> 标签：.net, exchangewebservices, email-attachments

我正在使用 EWS 1.2 在我的邮箱中搜索带有附件的电子邮件，并将 EmailMessage 对象绑定到 EWS 对象。这工作正常，但没有检测到 .msg 文件（outlook 消息文件）：

```
ItemView mailview = new ItemView (12);
FindItemsResults<Item> resultmail;

resultmail = Service.FindItems(WellKnownFolderName.Inbox, mailview);
foreach (Item item in resultmail.Items)
{                   
    EmailMessage email = EmailMessage.Bind(Service, item.Id,
        new PropertySet(BasePropertySet.FirstClassProperties, 
                        ItemSchema.Attachments));

    if (email.HasAttachments)
    {
        foreach (var attachment in email.Attachments)
        {
            if (attachment is FileAttachment)
            {
                Console.WriteLine("email has : " + email.Attachments.Count
                                + "attachement(s)" + "\n");
                Console.WriteLine("attachment name:" + attachment.Name);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:42:12.060

如果邮件附加到邮件，则不是文件附件，而是项目附件。所以你应该像这样扩展你的代码：

```
...
if (attachment is FileAttachment) 
{ 
    Console.WriteLine("email has : " + email.Attachments.Count + "attachement(s)" + "\n"); 
    Console.WriteLine("attachment name:" + attachment.Name); 
}
else if (attachment is ItemAttachment)
{
    ItemAttachment itematt = (ItemAttachment) attachment;
    //with itematt.Item you can access the properties of the attachment.
} 
```

# c# - 如何在 c# 的 ms word 文档中设置文本方向 RightToLeft？

> ID：11241844
> 
> 赞同：5
> 
> 时间：2012-06-28T09:37:30.143
> 
> 标签：c#, ms-word

我使用 Microsoft.Office.Interop.Word 在 c# 中创建一个 word 文档

我想以 rtl(RightToLeft) 方向显示我的阿拉伯语文本。如何将文本方向设置为 rtl ？

在我下面的代码中，我改变了对齐，但我不能改变方向。请帮我！

```
Word.Application wordApp = new Word.Application();
object objMissing = System.Reflection.Missing.Value;
Word.Document wordDoc = wordApp.Documents.Add(ref objMissing, ref objMissing, ref objMissing, ref objMissing);
Word.Paragraph wordParagraph = wordDoc.Paragraphs.Add(ref objMissing);
wordParagraph.Range.Font.Name = "B Titr";
wordParagraph.Range.Font.Size = 14;
WordParagraph.Range.ParagraphFormat.Alignment =  Word.WdParagraphAlignment.wdAlignParagraphRight;
wordParagraph.Range.Text = "My Arabic text";
wordParagraph.Range.InsertParagraphAfter(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:31:57.880

你试过这个吗？

```
wordParagraph.ReadingOrder = WdReadingOrder.wdReadingOrderRtl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-04T16:29:12.180

尝试

```
oDoc.Paragraphs.ReadingOrder = Word.WdReadingOrder.wdReadingOrderRtl; 
```

实例`oDoc`在哪里`Word._Document`

# powershell - powershell 2.0 从 win server 2003 schtasks /query /fo csv 导入任务

> ID：11241850
> 
> 赞同：0
> 
> 时间：2012-06-28T09:37:39.550
> 
> 标签：powershell, windows-task-scheduler

我需要将任务列表从 Windows 2003 服务器导出到 2008。我使用 schtasks /query /fo csv 将任务从 2003 主机导出到 csv 文件。

现在我需要了解如何将任务导入 2008 服务器。我在这里找到了一些帖子，但它们不是很相关，因为我使用的是 Powershell 2.0，而且我没有任何额外的 powershell 模块可用，也不允许我对 powershell 配置进行任何更改。

有谁知道如何将任务导入 2008 机器？

以下是 csv 文件中任务的示例：

```
"TaskName","Next Run Time","Status"
"backup_task","12:00:00 AM, 6/29/2012",""
"backup_task_montly","2:00:00 AM, 6/30/2012",""
"backup_task_weekly","1:00:00 AM, 7/1/2012","" 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:22:40.363

您是否尝试过直接通过 COM 对象使用调度程序？这是我过去引用的一些示例代码的文章。

[http://www.send4help.net/syncing-scheduled-tasks-with-powershell-901](http://www.send4help.net/syncing-scheduled-tasks-with-powershell-901)

# javascript - 从子窗口更改链接的 onclick 事件和文本

> ID：11241861
> 
> 赞同：0
> 
> 时间：2012-06-28T09:38:27.507
> 
> 标签：javascript, popup, hyperlink

我的父页面上有一个链接。当我单击它时，会打开一个弹出窗口。在弹出窗口上我有一个按钮，当我点击它时，我需要更改父窗口上的链接（点击打开弹出窗口）、文本和 onClick 事件。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:41:40.283

您不能从不同的选项卡/窗口访问选项卡/窗口元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:44:59.733

最好在父窗口上引用一个函数，而不是在弹出窗口上编写代码，所以我会使用 parent.some_function();

这样，如果原始页面发生变化，您也可以在那里更改功能，而无需搜索弹出窗口。

# sql-server - 允许的公用表表达式 (CTE) 表达式的数量是否有限制？

> ID：11241863
> 
> 赞同：2
> 
> 时间：2012-06-28T09:38:29.280
> 
> 标签：sql-server, common-table-expression

我正在编写一个冗长的查询系统，它利用 CTE 构建有效的 SQL。即使是一个简单的系统，它也有可能创建多达一千个表达式，我担心我将来可能会遇到限制，不得不重新设计系统。

我搜索了高低，但我找不到答案。我想知道的是：
**CTE 中允许的最大表达式数是多少？**

注意：我*没有*使用递归。

我最好的猜测是我受到每批允许的字符数的限制（请参阅[SQL Server 查询的最大大小？IN 子句？有更好的方法](https://stackoverflow.com/a/1869810/209668)）

**编辑**

测试代码如下。我的开发机器奇怪地停在了 600 处。

```
DECLARE @i int = 1,  @q varchar(max);

SET @q = 'WITH[0]AS(SELECT 1 AS c)'

WHILE @i < 600
BEGIN
    SET @q = @q + ',[' + CONVERT(varchar, @i) + ']AS(SELECT * FROM[' + CONVERT(varchar, @i-1) + '])';
    SET @i = @i + 1;
END;

SET @q = @q + 'SELECT * FROM[' + CONVERT(varchar, @i-1) + ']';

EXEC (@q); 
```

我会看看如何在生产服务器上进行测试，但这需要一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:46:39.620

您可以在批处理中定义的非递归 CTE 的数量似乎没有直接上限。您应该只受到可用资源和任何其他适用限制的限制。

我花了一段时间研究，[这](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/4aadd7c5-ffe6-463b-afeb-7ed4570bdf87)是我能找到的问题的唯一直接答案。

[但是，在MSDN SQL server maximums 列表](http://msdn.microsoft.com/en-us/library/ms143432.aspx)或 CTE 文档中没有提及 CTE 的最大数量。

问题评论中提到的 Martin 的测试表明对此没有具体限制，因为他遇到了内存不足错误，而不是限制错误。我认为您的测试完全停止在 600 一点都不奇怪，因为您使用的是`WHILE @i < 600`. 尝试提高限制，看看会发生什么。

# iphone - 没有警报的 UILocalNotification

> ID：11241866
> 
> 赞同：1
> 
> 时间：2012-06-28T09:38:41.160
> 
> 标签：iphone, uilocalnotification

是否可以`didReceiveLocalNotification`在后台不显示警报的情况下拨打电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:46:58.067

`didReceiveLocalNotification`仅当您的应用程序位于前台或当用户单击以查看通知并且您的应用程序从后台恢复到前台时才会调用。

您可能可以在`UILocalNotification`没有消息的情况下使用 a ，例如更新您的应用程序图标徽章。但是，`didReceiveLocalNotification`如果您的应用程序不在前台，则不会调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:40:57.177

没有，可悲的是没有办法，`UILocalNotication`旨在通过警报视图通知用户，这就是苹果打算让他们工作的方式

您可以设置`notification.alertBody`为 nil，但是当应用程序未处于活动状态时，您将无法使用此本地通知

# c++ - 转换向量 到带有转换的字符串

> ID：11241867
> 
> 赞同：7
> 
> 时间：2012-06-28T09:38:41.527
> 
> 标签：c++

我想将 a 转换`vector<char>`为 a`std::string`并以一种方式进行转换。

我快到了，但是下面代码的结果是 a `vector<string>`，而我想要一个字符串（向量中所有字符串部分的串联）。

有关详细信息，请参阅我的代码示例。

```
string ConvertHexToAscii(const char input)
{
    std::ostringstream oss;
    oss << std::hex << std::setw(2) << std::setfill('0') << static_cast<int>(input);
    return oss.str();
}

vector<char> readBuffer; // this is my input

readBuffer.push_back(0x1c);
readBuffer.push_back(0x09);

vector<string> resultVec;

std::transform(readBuffer.begin(), readBuffer.end()
    , back_inserter(resultVec)
    , ConvertHexToAscii);

// resultVec[0] = "1C";
// resultVec[1] = "09"; 
```

**我需要的结果是一个包含“1C09”的字符串。如何做到这一点`std::transform`？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T09:46:40.810

你快到*了*；这有效：

```
std::stringstream sstr;
std::transform(
    input.begin(), input.end(),
    std::ostream_iterator<std::string>(sstr, ""),
    ConvertHexToAscii); 
```

但不幸的是，这实例化了相当多的字符串流，效率低下。理想情况下，`ConvertHexToAscii`（顺便说一句，C++ 不知道编码）函数将直接使用底层流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T10:17:30.990

```
#include <iostream>
#include <vector>
#include <iomanip>
#include <sstream>
#include <numeric>

std::string ConvertHexToAscii(std::string acc, char input)
{
  std::ostringstream oss;
  oss << std::hex << std::setw(2) << std::setfill('0') << static_cast<int>(input);
  return acc + oss.str();
}

int main() {
  std::vector<char> readBuffer; // this is my input
  readBuffer.push_back(0x1c);
  readBuffer.push_back(0x09);

  std::cout << std::accumulate(readBuffer.begin(), readBuffer.end()
          , std::string(), ConvertHexToAscii) << std::endl;

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T09:48:49.443

为 operator = 定义为的字符串类型创建自己的 back_insert_iterator

```
template< class string_type, class value_type >
class back_insert_iterator
{
public:
  back_insert_iterator< _string_type >& operator = ( const value_type& val )
  {
    container->append( val )
    return *this;
  }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T09:51:34.757

您可以使用函数输出迭代器执行此操作：

```
#include <iostream>
#include <sstream>
#include <string>
#include <algorithm>
#include <iterator>
#include <iomanip>
#include <boost/function_output_iterator.hpp>

std::string ConvertHexToAscii(const char input)
{
    std::ostringstream oss;
    oss << std::hex << std::setw(2) << std::setfill('0') << static_cast<int>(input);
    return oss.str();
}

int main() {
    std::vector<char> readBuffer; // this is my input

    readBuffer.push_back(0x1c);
    readBuffer.push_back(0x09);

    std::string temp;

    std::transform(readBuffer.begin(), readBuffer.end()
    , boost::make_function_output_iterator([&temp](const std::string& r) {temp.append(r);})
    , ConvertHexToAscii);

    std::cout << temp << std::endl;
} 
```

我使用 lambda 来调用`append()`结果字符串上的函数，但如果你没有可用的函数，它相当容易使用`boost::bind`，或者只需编写一个老式的仿函数来为你做这件事。

使用`boost::bind`函数输出迭代器创建为：

```
boost::make_function_output_iterator(boost::bind(static_cast<std::string& (std::string::*)(const std::string&)>(&std::string::append), &temp, _1)) 
```

反而。它有点笨重，因为您需要为`std::string::append`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T10:51:20.547

虽然 perreal 使用累积的想法并没有那么糟糕，但直接在流上操作而不是创建这么多临时字符串可能会更高效（尽管移动语义可能对此有所帮助）：

```
std::ostringstream os;
std::string temp = std::accumulate(
                       readBuffer.begin(), readBuffer.end(), std::ref(os), 
                       [](std::ostream &os, const char input) 
                       -> std::reference_wrapper<std::ostream> {
                           return os << std::hex << std::setw(2) 
                                     << std::setfill('0') 
                                     << static_cast<int>(input);
                       }).str(); 
```

**编辑：**但是好吧，这可能有点过于复杂了，一个简单的 foreach 也可以完成（即使不像积累那样语义干净）：

```
std::ostringstream os;
std::for_each(readBuffer.begin(), readBuffer.end(), 
              [&os](const char input) mutable {
                  os << std::hex << std::setw(2) << std::setfill('0') 
                     << static_cast<int>(input);
              });
std::string temp = os.str(); 
```

但任何事情都可能比创建一大堆临时字符串更好。

# caching - Java 项目的内存中数据网格

> ID：11241876
> 
> 赞同：0
> 
> 时间：2012-06-28T09:39:16.963
> 
> 标签：caching, datagrid, scalability, distributed

我正在为我的 java 项目使用内存数据网格。我知道有一些相关的产品，例如 VMWare GemFire、GigaSpaces XAP、IBM eXtreme Scale 等。有人可以详细说明他们使用这些工具的经验以及它们之间的比较吗？谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:29:57.160

（免责声明 - 我为 GigaSpaces 工作）

嗨，亚历克斯

有很多标准可供比较，这实际上取决于您要做什么。内存数据网格有很多用例，例如缓存、OLTP、高吞吐量事件处理等。一般来说，您应该关注的主要标准是：

*   编程模型：支持Spring等流行的Java框架（XAP和Gemfire原生支持）
*   查询和索引：如果您想要的不仅仅是简单的键/值数据访问。大多数人需要类似 SQL 的语义，甚至是全文搜索，如果数据网格可以提供开箱即用的功能，那将是一个很大的优势。
*   能够在网格节点上执行代码，甚至将代码与它们放在一起并处理注入到网格的事件（例如，写入或更新的对象）。这是一个巨大的可扩展性优势，允许您实现非常高效的无共享架构。
*   语言和 API 支持：大多数数据网格至少支持基于 Java 和 JVM 的语言（例如 Scala），但其中很多还支持其他语言，并允许您从各种编程语言访问相同的数据。例如，XAP 原生支持 Java、.Net 和 C++，以及使用其 REST 和 memcached 接口的其他语言。就 API 而言，一些网格支持多个 API。在 GigaSpaces，我们支持 Map、Spring/POJO、JPA、JDBC 等。
*   事务：如果您想超越缓存，这也是一个大事务。将内存用作记录系统时，您应该能够回滚状态以防出现错误或错误，否则最终会导致数据损坏。另一个重要的事情是支持哪些类型的事务。许多数据网格只支持“本地”事务。即在单个节点/分区/分片的边界内（出于性能原因，这可能是您在大多数情况下想要做的）。但更高级的网格也支持分布式事务，并且知道如何在需要时从本地无缝升级到分布式。
*   复制：这里有各种模型（同步、异步、混合），您需要确定其中哪一种最适合您的用例。一些网格还明确支持通过 WAN 进行跨集群复制，如果您正在实施 DR，这很重要。
*   数据分区和可扩展性：网格如何分区数据（固定/一致哈希），用户对其的控制级别是什么，是否支持将服务器动态添加到网格以增加容量。
*   管理和监控：最后但并非最不重要的一点 - 开箱即用提供了哪些设施，例如监控和管理挂钩（JMX 或其他管理 API）、用户界面以及与其他 3rd 方系统的集成。

以下链接是一个很好的起点：

1.  [http://gojko.net/2009/06/01/oracle-coherence-vs-gigaspaces-xap/](http://gojko.net/2009/06/01/oracle-coherence-vs-gigaspaces-xap/)。也阅读评论
2.  [http://www.neovise.com/neovise-data-caching-performance-technical-white-paper](http://www.neovise.com/neovise-data-caching-performance-technical-white-paper) - 我认为 GigaSpaces 和 GemFire 之间最近的比较不言自明:)

HTH，乌里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T22:19:14.360

Gartner 对内存数据网格市场进行了总结，称为“竞争格局：内存数据网格”。您可以在以下网址查看副本：[http ://www.gartner.com/technology/reprints.do?id=1-1HCCIMJ&ct=130718&st=sb](http://www.gartner.com/technology/reprints.do?id=1-1HCCIMJ&ct=130718&st=sb)

Oracle Coherence（前身为 Tangosol Coherence）长期以来一直是该领域的市场领导者，但它是一种商业产品。正如我最近在别处解释的那样：

优点：

*   松紧带。只需添加节点。自动发现。自动负载平衡。没有数据丢失。没有中断。每次添加一个节点，您都会获得更多的数据容量和更高的吞吐量。
*   同时使用 RAM 和闪存。透明地。每个 Coherence 节点轻松处理 10 甚至 100 千兆字节（例如，每个物理服务器高达 1 TB 或更多）。
*   自动高可用性 (HA)。杀死一个进程，没有数据丢失。杀死一个服务器，没有数据丢失。
*   数据中心持续可用性 (CA)。杀死一个数据中心，没有数据丢失。
*   可从任何语言获得的 RESTful API。适用于 C/C++、C#、.NET 和 Java 的本机 API 和客户端库。
*   除了简单的键值（K/V）缓存外，还支持查询（包括一些SQL）、并行查询、索引（包括自定义索引）、丰富的事件模型（用于像交易所这样的事件驱动系统）、事务（包括MVCC)、标量 (EntryProcessor) 和聚合 (ParallelAwareAggregator) 函数的并行执行、缓存触发器等。
*   通过通读、预读、直写和后写缓存轻松与数据库集成。当数据库发生更改时，仅自动刷新更改的数据（利用 Oracle GoldenGate 技术）。
*   相干孵化器：相干孵化器
*   memcache 协议支持：github 上 Oracle Coherence 项目的 Memcached 接口
*   成千上万的客户，其中一些客户在生产中使用 Coherence 已有十多年了。

缺点：

*   从 Coherence 12.1.2 开始，缓存本身不是持久的。
*   它要花钱。

*为了全面披露，我在 Oracle 工作。这篇文章中表达的观点和观点是我自己的，并不一定反映我雇主的观点或观点。*

# logging - ffmpeg 设置报告日志文件名

> ID：11241878
> 
> 赞同：4
> 
> 时间：2012-06-28T09:39:41.917
> 
> 标签：logging, ffmpeg

我在命令提示符下运行 ffmpeg.exe。我正在尝试使用该`-report`选项生成报告文件。如何明确指定报告名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T18:26:02.340

看起来只能用环境变量设置 [?]

export FFREPORT=file=/home/someone/log/ffmpeg-$(date +%Y%m%s).log

这是因为，否则，它必须从命令行参数解析输出文件名，这意味着“ffmpeg 已经在运行，所以已经开始记录东西”，显然是一种猫或老鼠游戏。

参考：[https](https://ffmpeg.org/trac/ffmpeg/ticket/1823) ://ffmpeg.org/trac/ffmpeg/ticket/1823和一些邮件列表帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-24T18:26:59.430

Windows 7 上的简单方法是：

> **ffmpeg -i 文件名.mp4 -hide_banner 2> 文件名_Info.txt**

.

我在批处理文件中首选的解决方案是：

```
:: Location of file
SET file=filename

:: Location of FFMPEG
SET ffmpeg=C:\Program Files\FFmpeg\ffmpeg.exe

:: Analyse File
"%ffmpeg%" -i "%file%.mp4" -hide_banner  2> "%file%_Info.txt" 
```

对于我的单个选项“-hide_banner”，您可以用选项/开关的方式将您需要使用的任何内容替换为您想要的命令行。

您可以自行决定报告文件的名称和路径，可以是任何有效的文件路径。

# erlang - Erlang从数据包中解码二进制数据

> ID：11241884
> 
> 赞同：1
> 
> 时间：2012-06-28T09:39:58.030
> 
> 标签：erlang, udp, decode, packet

我收到一个 UDP 数据包，如下所示：

```
<<83,65,77,80,188,64,171,138,30,120,105,0,0,0,10,0,4,0,0,0,84,101,115,116,15,0,0,0,82,101,122,111,110,101,32,82,111,108,101,80,108,97,121,11,0,0,0,83,97,110,32,65,110,100,114,101,97,115>> 
```

如果我知道我可以删除前 11 个字节，并且 12-13 字节包含服务器上在线玩家的数量（字节宽度为 2），我该如何解码数据包，我怎样才能得到这个数量？

**UPD**
也许我发送了不正确的数据包...
[SAMP 查询](http://wiki.sa-mp.com/wiki/Query_Mechanism)
所以，我发送：

```
<<$S,$A,$M,$P,188,64,172,136,7808:16,$i>> 
```

对于服务器 188.64.172.136:7808，我得到

```
<<83,65,77,80,188,64,172,136,30,128,105,0,0,0,10,0,4,0,0,0,84,101,115,116,15,0,0,0,82,101,122,111,110,101,32,82,111,108,101,80,108,97,121,11,0,0,0,83,97,110,32,65,110,100,114,101,97,115>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:12:08.283

您可以使用[位语法](http://www.erlang.org/doc/reference_manual/expressions.html#bit_syntax)和巧妙的模式匹配来获得结果：

```
<<_:11/bytes, NumberOfPlayers:16/integer-big, _/binary>> = <<83,65,77,80,188,64,171,138,30,120,105,0,0,0,10,0,4,0,0,0,84,101,115,116,15,0,0,0,82,101,122,111,110,101,32,82,111,108,101,80,108,97,121,11,0,0,0,83,97,110,32,65,110,100,114,101,97,115>>,
NumberOfPlayers. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:07:19.430

如果您的数据包二进制文件存储在 中`P`，您可以执行以下操作（假设大端）：

```
<<NumberOfPlayersOnline:16/big>> = binary:part(P,11,2). 
```

结果在`NumberOfPlayers`.

# java - Java，计算一年中的分钟数

> ID：11241886
> 
> 赞同：-9
> 
> 时间：2012-06-28T09:39:59.160
> 
> 标签：java

我正在编写一个简单的 java 项目，它将计算并打印一年中的分钟数。你能指导我完成吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:02:37.410

对于正常年和闰年。

```
 public  int getMinutesFromYear(int year)
 {
  return ((year % 400) == 0) ? 366 * 24 * 60 : (year % 100 != 0 && year % 4 == 0) ? 366 * 24 * 60 : 365 * 24 * 60;
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T09:42:30.667

60*24*365 = 525600 - 平年 60*24*366 = 527040 - 闰年

话题结束。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T09:47:02.527

```
 public class Example{
       public static void main(String[]args){
           System.out.println(365*24*60);
       }
    } 
```

# java - 如何使用 WebDriver 编写 JavaScript 提示消息？

> ID：11241887
> 
> 赞同：4
> 
> 时间：2012-06-28T09:40:00.093
> 
> 标签：java, selenium, webdriver, alert

我想在 Javascript Prompt 中写一些文本。我尝试了以下代码来运行 javascript 提示符。如何使用 selenium/webdriver 在提示中填写值？

```
public static void main(String[] args) {

WebDriver driver = new FirefoxDriver();
driver.get("http://www.javascripter.net/faq/prompt.htm#top");
driver.findElement(By.xpath("//input[@value = 'Try it now']")).click();

Alert javascriptprompt = myTestDriver.switchTo().alert();
javascriptprompt.sendKeys("How do I write in a JavaScript prompt message using WebDriver?"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T09:49:24.663

它的记录不是很详尽，但是：

```
driver.switchTo().alert().sendKeys("Some text");
driver.switchTo().alert().accept(); 
```

[`Alert`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Alert.html#sendKeys%28java.lang.String%29)接口，方法[`switchTo()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html#switchTo%28%29)。

# c# - Visual Studio 自动化任务从 C# 类定义生成 UI

> ID：11241891
> 
> 赞同：0
> 
> 时间：2012-06-28T09:40:29.513
> 
> 标签：c#, asp.net, visual-studio-2010, automation

我将如何构建一个从 C# 类定义生成 ASCX UI 控件的自动化任务？

例如，如果我有一堂课：

```
public class Human
{
    public string Name
    {
        get { return this._Name.Trim(); }
        set { this._Name = value; }
    }
    private string _Name = "";

    public DateTime DateOfBirth
    {
        get { return this._DateOfBirth; }
        set { this._DateOfBirth = value; }
    }
    private DateTime _DateOfBirth = new DateTime(1901, 1, 1);

    public int Height
    {
        get { return this._Height; }
        set { this._Height = value; }
    }
    private int _Height = -1;

} 
```

我想上课并生成一些看起来像这样的标记：

```
<p>
    <label for="tbName">Name</label>
    <asp:textbox id="tbName" runat=server" ClientIdMode="static"/>
</p>

<p>
    <label for="tbDateOfBirth">DateOfBirth</label>
    <asp:textbox id="tbDateOfBirth" runat=server" ClientIdMode="static" class="date"/>
</p>

<p>
    <label for="tbHeight">Height</label>
    <asp:textbox id="tbHeight" runat=server" ClientIdMode="static" class="int"/>
</p> 
```

我还想生成 C# 代码隐藏，但我确信一旦我学会了如何反映类`Human`并生成这个标记，这很容易做到。

任何建议都会很棒。到目前为止，我最接近的是使用控制台应用程序作为外部工具，传递文件名，然后使用 a`StreamReader`读取原始 .cs 类定义并在正确的位置生成 .ascx 和 .ascx.cs 文件. 当然，这种方法没有使用反射，我必须手动将文件添加到项目中。

我的首选选项是以某种方式关注类定义，并通过键绑定初始化自动化任务以生成新的 ASCX 用户控件并将其包含在项目中。甚至可能会问 ASCX 控件应该放在项目中的哪个位置。

谢谢你的时间 ：）

**更新**只是说我顺便提到了代码隐藏，但实际上这是我想生成更多 C# 以将文本框与各自的属性连接起来并附加到 DataServer 中公开的插入和更新处理程序的地方班上。

# eclipse - 团队的 Eclipse 快捷方式 - 与存储库同步

> ID：11241894
> 
> 赞同：7
> 
> 时间：2012-06-28T09:40:31.530
> 
> 标签：eclipse

整个项目的上下文菜单操作“团队 -> 与存储库同步”和“团队 -> 更新”的快捷方式是什么？

我已经找到了快捷方式，但这些快捷方式仅在我当前打开的文件上执行。但我想在整个项目上执行它，而不必将项目资源管理器滚动到顶部并右键单击项目。

如果没有这样的快捷方式，我该如何创建它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-11T20:11:28.313

正如 john.k.doe 所指出的那样，这是正确的解决方案，但您还需要执行其他操作才能使快捷方式真正起作用，即转到 Window > Customize Perspective > Command Groups Availability 并选中 SVN 框； )

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T11:12:25.170

你几乎总能得到你想要的快捷键

1.  转到首选项类型“键”或转到常规 - >键
2.  在您单击“键”时显示的字段中
3.  在左窗格中，键入您有兴趣为其设置快捷方式的命令：

下图来自我的 mac，但它在 windows/linux 上的工作方式相同，您只需选择 Cmd-Y 以外的其他东西作为快捷方式修饰符。User 下的 U 表示我是添加该修改的人。

![在此处输入图像描述](../Images/00f260bd45aa0496589f2a86c02666f3.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T14:06:22.887

我编写了一个小型 Eclipse 插件，它在 Package Explorer 中选择活动项目，以便您可以在其上执行其他操作（如“与 repo 同步”和“更新”）。我认为与编写一个选择项目并执行预定义操作的插件相比，这种方法更灵活。

[您可以在http://code.google.com/a/eclipselabs.org/p/eclipse-tweaks/downloads/list](http://code.google.com/a/eclipselabs.org/p/eclipse-tweaks/downloads/list)获得该插件，它被命名为“com.xakcop.select”。下载它并将其放在 Eclipse 安装的 dropins/ 文件夹中。然后当你重新启动 Eclipse 时，你会`Select project`在`Windows->Preferences->Keys`. 默认键绑定是`Ctrl+Shift+Backspace`，但您可以将其更改为您想要的任何内容。

当您在 Java 编辑器中时，只需按`Ctrl+Shift+Backspace`，这将在 Package Explorer 中选择当前文件所属的项目。然后按“与存储库同步”的快捷方式，您就完成了。

该插件的源代码也可作为我的*eclipse-tweaks*项目的一部分获得：[http://code.google.com/a/eclipselabs.org/p/eclipse-tweaks/source/browse/com.xakcop。选择](http://code.google.com/a/eclipselabs.org/p/eclipse-tweaks/source/browse/com.xakcop.select)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T11:29:38.357

我认为这个问题的答案解决了[这个](https://stackoverflow.com/questions/3604999/shortcut-for-update-to-head/6927759#6927759)问题。

在设置快捷键后，我发现更新/同步的最快方法是单击项目/包资源管理器中的最小化按钮，然后按下按键。更新后，只需在编辑器中单击最后使用的文件即可返回之前的工作区状态（前提是选择了项目资源管理器中的“与编辑器链接”按钮）。

我应该澄清一下：我为每个项目使用一个工作集。工作集在包资源管理器中显示为默认的顶级元素，因此，通过单击所需项目的工作集的最小化按钮，它们会折叠并易于选择。*然后*，我在选定的工作集上应用快捷方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T06:19:05.510

From my point of view, the problem is the focus of the commands you execute. The Team commands Snychronize and Update are executed on the current object (In my case). As you noticed, when you execute the command on the project, the project is synchonized - when you do it on a file, only the file is synchronized.

What I did as workaround is the following: I created Key-Bindings for the commands *Show in (Navigator)* (Alt-N), *Go to* (Alt-G), and *Show View (Naviator)* (CTRL+SHIFT+Q, N). With Alt-N I show the current File in the Navigator. I can then use the keys to navigate to the root that I want to synchronize (it's not always the whole project for me). If the root is to far away I use Alt-G and type the Project or Folder where I want to go to and execute afterwards the Synchronize commands. (Go to works only in the current view)

If you have selected the Project once you just have to switch to the navigator (Show View command) and execute your synchronize commands.

You could also use rgerganov's plugin then you would not have to execute as many commands. The procedure works also with other views (package explorer, project explorer)

What about this approach? It should also work for other SCM's or commands you want to execute on any object in the explorer views.

# spring - Spring方法拦截-性能

> ID：11241896
> 
> 赞同：0
> 
> 时间：2012-06-28T09:40:46.753
> 
> 标签：spring

我在我的项目中使用 Spring 方法拦截器。我想知道通过引入方法拦截器是否会出现性能问题。同时，我的理解是Spring会创建代理并重新定义被拦截的方法，并将拦截器逻辑内联在每个被拦截的方法中。在运行时，sp​​ring 使用代理 bean 而不是调用 bean。因此，使用拦截器，需要额外的时间来创建代理 bean 本身。即使添加了更多拦截器，也只是在同一个代理 bean 的方法中添加更多方法调用。这种理解正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:00:54.677

可能术语有点混淆@LearningHuman，拦截器更像是Spring MVC术语，指的是您在调用实际控制器方法之前要采取的行动 - 这里有性能损失，但相比起来往往可以忽略不计以流式数据返回浏览器所涉及的 IO 成本、数据库往返时间为代价。

我认为您指的是[Aspects](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html)，其中 Spring 为每个具有目标切入点的 bean 创建一个动态代理，但在创建代理的情况下它并没有真正内联调用，所以会有一个惩罚，但如果在 Web 应用程序的上下文中，IO 时间可能会高于任何额外方法调用的惩罚。如果性能是一个问题，您可以使用带有 Aspects 的编译时编织，它至少可以内联对通知的调用。

# android - 如何获取特定叠加项目的纬度和经度？

> ID：11241899
> 
> 赞同：0
> 
> 时间：2012-06-28T09:40:55.630
> 
> 标签：android, overlay, android-mapview, itemizedoverlay

我的地图代码是这样的：

```
public class ExampleActivity extends MapActivity {
    private MapView map = null;
    private MyLocationOverlay me = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        map = (MapView) findViewById(R.id.map);

        map.getController().setCenter(getPoint(18.5236296, 73.8478429));
        map.getController().setZoom(17);
        map.setBuiltInZoomControls(true);

        Drawable marker = getResources().getDrawable(R.drawable.marker);

        marker.setBounds(0, 0, marker.getIntrinsicWidth(),
                marker.getIntrinsicHeight());

        map.getOverlays().add(new SitesOverlay(marker));

        me = new MyLocationOverlay(this, map);
        map.getOverlays().add(me);
    }

    @Override
    public void onResume() {
        super.onResume();

        me.enableCompass();
    }

    @Override
    public void onPause() {
        super.onPause();

        me.disableCompass();
    }

    @Override
    protected boolean isRouteDisplayed() {

        return (false);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_S) {

            map.setSatellite(!map.isSatellite());
            return (true);
        } else if (keyCode == KeyEvent.KEYCODE_Z) {

            map.displayZoomControls(true);
            return (true);
        }

        return (super.onKeyDown(keyCode, event));
    }

    private GeoPoint getPoint(double lat, double lon) {

        return (new GeoPoint((int) (lat * 1000000.0), (int) (lon * 1000000.0)));
    }

    private class SitesOverlay extends ItemizedOverlay<OverlayItem> {

        private List<OverlayItem> items = new ArrayList<OverlayItem>();
        private Drawable marker = null;
        private OverlayItem inDrag = null;
        private ImageView dragImage = null;
        private int xDragImageOffset = 0;
        private int yDragImageOffset = 0;
        private int xDragTouchOffset = 0;
        private int yDragTouchOffset = 0;

        public SitesOverlay(Drawable marker) {
            super(marker);
            this.marker = marker;

            dragImage = (ImageView) findViewById(R.id.drag);
            xDragImageOffset = dragImage.getDrawable().getIntrinsicWidth() / 2;
            yDragImageOffset = dragImage.getDrawable().getIntrinsicHeight();

            items.add(new OverlayItem(getPoint(18.5236296, 73.8478429), "Pune",
                    "Wakad"));

            populate();
        }

        @Override
        protected OverlayItem createItem(int i) {

            return (items.get(i));
        }

        @Override
        public void draw(Canvas canvas, MapView mapView, boolean shadow) {
            super.draw(canvas, mapView, shadow);

            boundCenterBottom(marker);
        }

        @Override
        public int size() {

            return (items.size());
        }

        @Override
        public boolean onTouchEvent(MotionEvent event, MapView mapView) {

            final int action = event.getAction();
            final int x = (int) event.getX();
            final int y = (int) event.getY();
            boolean result = false;

            if (action == MotionEvent.ACTION_DOWN) {

                for (OverlayItem item : items) {
                    Point p = new Point(0, 0);

                    map.getProjection().toPixels(item.getPoint(), p);

                    if (hitTest(item, marker, x - p.x, y - p.y)) {

                        result = true;
                        inDrag = item;
                        items.remove(inDrag);
                        populate();

                        xDragTouchOffset = 0;
                        yDragTouchOffset = 0;

                        setDragImagePosition(p.x, p.y);
                        dragImage.setVisibility(View.VISIBLE);

                        xDragTouchOffset = x - p.x;
                        yDragTouchOffset = y - p.y;

                        break;
                    }
                }
            } else if (action == MotionEvent.ACTION_MOVE && inDrag != null) {

                setDragImagePosition(x, y);
                result = true;
            } else if (action == MotionEvent.ACTION_UP && inDrag != null) {

                dragImage.setVisibility(View.GONE);

                GeoPoint pt = map.getProjection().fromPixels(
                        x - xDragTouchOffset, y - yDragTouchOffset);
                OverlayItem toDrop = new OverlayItem(pt, inDrag.getTitle(),
                        inDrag.getSnippet());

                items.add(toDrop);
                populate();

                inDrag = null;
                result = true;
            }

            return (result || super.onTouchEvent(event, mapView));
        }

        private void setDragImagePosition(int x, int y) {

            RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) dragImage
                    .getLayoutParams();

            lp.setMargins(x - xDragImageOffset - xDragTouchOffset, y
                    - yDragImageOffset - yDragTouchOffset, 0, 0);
            dragImage.setLayoutParams(lp);
        }
    }
} 
```

这在地图上显示了一个标记，我可以将此标记拖放到地图上的其他位置....所以现在，我的问题是如何获取标记当前位置的纬度和经度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:08:15.847

在`onTouchListener`拖放代码中，您可以使用下面的代码来获取`GeoPoint`

```
if (action == MotionEvent.ACTION_UP && inDrag != null) {
    GeoPoint pt = map.getProjection().fromPixels(
                        x - xDragTouchOffset, y - yDragTouchOffset);

    taplat = pt.getLatitudeE6() / 1E6; // latitude
    taplon = pt.getLongitudeE6() / 1E6; // longitude
} 
```

# css - 我可以只将 Twitter-Bootstrap 样式添加到原始 GWT 组件吗

> ID：11241901
> 
> 赞同：0
> 
> 时间：2012-06-28T09:41:02.360
> 
> 标签：css, gwt, twitter-bootstrap, resourcebundle

我需要将 Twitter 的 Bootstrap 样式添加到现有的 GWT 组件中......

我发现了不止一个项目，但他们都为此目的创建了新的自定义组件......

**我需要坚持使用 GWT 标准组件，并让我的应用程序 L&F 看起来像 TBootstrap。**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:13:01.223

覆盖 GWT 的默认 css 将做得很好。您的出发点可能是[Developer's Guide - Client Bundle](https://developers.google.com/web-toolkit/doc/2.4/DevGuideClientBundle)。

某些小部件不接受捆绑包，因此您可能也必须在引导 html 文件中覆盖 GWT css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:26:14.377

我相信您可以使用 jQuery 或覆盖 CSS 样式来破解基本样式，但是响应能力、顶部栏和其他东西，我相信那是几乎不可能的......

你可以看看[GWT-Bootstrap](http://gwtbootstrap.github.com)。

希望能帮助到你..

# java - 使用比较器对日期时间对象进行排序问题

> ID：11241903
> 
> 赞同：0
> 
> 时间：2012-06-28T09:41:20.843
> 
> 标签：java

嗨，我有以下日期时间对象

比如喜欢

```
25/06/2012, 11:45 AM
25/06/2012, 12:00 AM
25/06/2012, 12:15 AM 
```

我希望使用比较器类方法的排序顺序与上面完全相同

但是，它返回给我的结果如下：

谁能建议应该使用正确的可比方法？

```
25/06/2012, 12:00 AM
25/06/2012, 12:15 AM
25/06/2012, 11:45 AM 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T09:42:41.690

您的比较器已经给出了合乎逻辑的结果。12:00 AM 是午夜，在 11:45 AM 之前到来。

中午是中午 12:00，然后是下午 1:00。

我当然*希望*这是您想要的顺序，即使它不是这个特定表示的字典顺序。（如果您使用 24 小时表示而不是 12 小时 + am/pm 指示符，则更清晰。）

# c++ - 在 Windows 7 中为 Eclipse 配置 opencv 2.4（预构建）时出错

> ID：11241905
> 
> 赞同：0
> 
> 时间：2012-06-28T09:41:28.130
> 
> 标签：c++, opencv, eclipse-cdt

我正在尝试在 Windows 7 中为 Eclipse 配置 opencv 2.4（预构建）。为此，我执行了以下操作：

1.  在 D:\opencv 中安装 OpenCV-2.4.0.exe

2.  安装的 Eclipse CDT

3.  将 D:\opencv\build\x64\mingw\bin 添加到 windows 系统变量 PATH

4.  在 Eclipse 中创建了一个简单的“Helo World”opencv 项目。

5.  将 D:\opencv\build\include\opencv 和 D:\opencv\build\include\opencv2 添加到 Eclipse 中的包含路径 (-I)

6.  添加了 D:\opencv\build\include\opencv2\core\core_c.h 和 D:\opencv\build\include\opencv2\core\core.hpp 和 D:\opencv\build\include\opencv2\core\types_c。 h 到 Eclipse 中的包含文件 (-include)

7.  将 D:\opencv\build\x64\mingw\lib 添加到 Eclipse 中的库搜索路径 (-L)

当我构建项目时，eclipse 报告：“致命错误：opencv2/core/types_c.h：没有这样的文件或目录”我忘记了什么吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:37:20.503

这有点棘手。如果您确实观察到，缺少的文件路径是“ * *opencv2/* *core/types_c.h” 因此，我在包含路径中添加了这两个： 1.) D:\opencv\build\include\opencv 2.) D: \opencv\build\包括

(2) 将解决路径问题。但是，我认为这不是最好的解决方案。我将此解决方法用于 eclipse 和 netbeans。

这是 openCV 2.2 的链接。它与 2.2 相同的项目设置

[http://opencv.willowgarage.com/wiki/VisualC%2B%2B](http://opencv.willowgarage.com/wiki/VisualC%2B%2B) 请参阅本节：“在 Visual Studio 中使用 OpenCV 2.2 构建您自己的项目” 对于各种 IDE，列出的目录和库设置应该相似

希望这可以帮助！干杯!

# python - 没有找到scapy

> ID：11241911
> 
> 赞同：0
> 
> 时间：2012-06-28T09:41:45.660
> 
> 标签：python, scapy

我已经用 macport 安装了 scapy 2.2.0。[我按照这些说明](http://www.secdev.org/projects/scapy/doc/installation.html#overview)（来自 scapy.all import *）将它导入到我的 python 代码中，并且在运行我的 python 代码时，我有

```
from scapy.all import *
ImportError: No module named scapy.all 
```

但是当我在命令行中运行 scapy 时，它会正常启动。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T19:57:21.350

我相信你可能会遇到这个问题。

[Python scapy导入错误](https://stackoverflow.com/questions/4273936/python-scapy-import-error)

试试这个，让我知道这是否能解决您的问题。

# android - 安卓子活动

> ID：11241912
> 
> 赞同：0
> 
> 时间：2012-06-28T09:41:56.440
> 
> 标签：android

我有一个带有这些按钮的 3 个按钮的主要活动，我将值传递给我的孩子 2 号活动，在孩子 2 中我用这些值做一些事情。

主类：

```
 uopgleuf = (Button) findViewById(R.id.fullslot);
   uopgleuf.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {
    Intent i = new Intent(UopActivity.this, fullslotActivity.class); // Go to child 2.
    Bundle b = new Bundle();
    b.putString("material", mat.getSelectedItem().toString());
        b.putString("dm", freesdia.getSelectedItem().toString());
        b.putString("endm", endmill.getSelectedItem().toString());
        i.putExtras(b);
        startActivity(i);
    }
   }); 
```

……

儿童2班：

```
 public final static int SUCCESS_RETURN_CODE = 1;

  Bundle b = getIntent().getExtras(); 
  mater = b.getString("material");
  d = b.getString("dm");
  endmill = b.getString("endm"); 
```

用这些值做点什么。在同一个孩子 2 类中，我在最后设置了这些代码：

```
 Intent intent = new Intent(fullslotActivity.this, dataActivity.class); // Want to go to child 1 but it return to Main class.               
                Bundle extras = new Bundle(); 
                extras.putString("snedebreedte", "ae");
                intent.putExtras(extras);
                setResult(SUCCESS_RETURN_CODE, intent);
                finish(); 
```

当我按下孩子 2 中的按钮时，我会将值返回给孩子 1 并将值放入 TextViews。

孩子1班：

```
protected static final int SUB_ACTIVITY_REQUEST_CODE = 1; 
```

在同一个班级：

```
 @Override  
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     super.onActivityResult(requestCode, resultCode, data);

     if(requestCode ==  SUB_ACTIVITY_REQUEST_CODE){
    Bundle b = data.getExtras();
    snedeb.setText(b.getString("snedebreedte"));
} 
```

现在我的问题是当我完成孩子 2 时，值会自动返回到主要活动。

这不是我想要的，有解决方案。

我可以放置 startActivityForResult 吗？我不想把它放在主要活动中。

将 startActivityForResult 放在 child 中不起作用。

提前致谢。

# android - 当我尝试在 listView android 中删除一行时，为什么会出现 ArrayIndexOutOfBoundsException？

> ID：11241917
> 
> 赞同：0
> 
> 时间：2012-06-28T09:42:22.403
> 
> 标签：android, android-listview, android-arrayadapter, android-adapter, indexoutofboundsexception

当我尝试从我的 android 应用程序的 listView 中删除一行时，我收到了 ArrayIndexOutOfBoundsException。以下是代码：

```
 String[] items;
FileInputStream fis;
String FILENAME = "rundata";
String collected;
Context context = this;
int itemPosition;
FileOutputStream fos;
ArrayAdapter<String> adapter;
private static LayoutInflater inflater=null;

 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

 @Override
protected void onResume(){
    super.onResume();
    inflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    collected = null;

    try {
        fis = openFileInput(FILENAME);
        byte[] dataArray = new byte[fis.available()];
        while(fis.read(dataArray) != -1){
            System.out.println("in while");
            collected = new String(dataArray);
            if(collected.equals("")){
                System.out.println("break");
                break;
            }else{
                System.out.println("continue");
            }
        }
        fis.close();

        if(collected.contains("NEXTLINE")){
            System.out.println("in if next line");
            items = collected.split("NEXTLINE");
        }else{
            System.out.println("in else next line");
            items = new String[0];
        }

        System.out.println("items.length: "+items.length);

        adapter = new ArrayAdapter<String>(this, R.layout.historyrow, items){

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View vi = convertView;

                if (null == vi) {
                    vi = inflater.inflate(R.layout.historyrow, null);
                } else {
                    vi = convertView;
                }

                TextView text=(TextView)vi.findViewById(R.id.historyTxtTitle);

                JSONObject jObject;
                try {
                    jObject = new JSONObject(items[position]);
                    if(jObject.getString("activityMode").equals("mode1")){
                        text.setText("Mode 1");
                    }else if(jObject.getString("activityMode").equals("mode2")){
                        text.setText("Mode 2");
                    }else if(jObject.getString("activityMode").equals("mode3")){
                        text.setText("Mode 3");
                    }else if(jObject.getString("activityMode").equals("mode4")){
                        text.setText("Mode 4");
                    }else{
                        text.setText("ERROR");
                    }

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    System.out.println("++++++e: "+e);
                }

                return vi;
            }

        };

        setListAdapter(adapter); 
```

当我尝试删除一行时出现以下错误：

```
 06-28 11:15:10.593: E/AndroidRuntime(26639): FATAL EXCEPTION: main
 06-28 11:15:10.593: E/AndroidRuntime(26639): java.lang.ArrayIndexOutOfBoundsException
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at com.eplinovo.runnoandroid.HistoryViewActivity$1.getView(HistoryViewActivity.java:88)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.AbsListView.obtainView(AbsListView.java:1443)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.ListView.makeAndAddView(ListView.java:1793)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.ListView.fillDown(ListView.java:718)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.ListView.fillSpecific(ListView.java:1350)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.ListView.layoutChildren(ListView.java:1624)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.AbsListView.onLayout(AbsListView.java:1294)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.View.layout(View.java:7175)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.View.layout(View.java:7175)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.View.layout(View.java:7175)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.View.layout(View.java:7175)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.View.layout(View.java:7175)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.View.layout(View.java:7175)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.View.layout(View.java:7175)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.View.layout(View.java:7175)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.View.layout(View.java:7175)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.ViewRoot.performTraversals(ViewRoot.java:1146)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.os.Handler.dispatchMessage(Handler.java:99)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.os.Looper.loop(Looper.java:130)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at android.app.ActivityThread.main(ActivityThread.java:3687)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at java.lang.reflect.Method.invokeNative(Native Method)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at java.lang.reflect.Method.invoke(Method.java:507)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
 06-28 11:15:10.593: E/AndroidRuntime(26639):   at dalvik.system.NativeStart.main(Native Method) 
```

有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:48:01.523

因为列表适配器有一个名为的方法`getCount`- 适配器假定项目计数是常量值，由该方法返回。删除一行后，您应该调用`notifyDataSetChanged`适配器的方法，因此它将重新计算数组元素的计数。

# ipad - iOS：动态创建并分配名称给 UIControl

> ID：11241923
> 
> 赞同：0
> 
> 时间：2012-06-28T09:42:37.800
> 
> 标签：ipad, ios5, dynamically-generated, uicontrol

我正在尝试编写数据驱动应用程序，在其中解析 json 字符串以创建 UI。我已经实现了这一点并创建了所需的控件。我根据分配给它们的标签来区分每个控件，这不是有效的方法。无论如何在动态创建 UIControl 时将名称（以下示例中的标签和文本字段除外）分配给它？

```
NSMutableArray *myArray = [[NSMutableArray alloc] initWithCapacity: myArrayCount];
for ( loop = 0;  loop< myArrayCount; loop++ ) {
    NSString *propertyName = [NSString stringWithFormat:@"Label %d", loop];
    [myArray addObject:propertyName];

    CGRect labelFrame = CGRectMake(xLabel, yLabel, widthLabel, heightLabel);
    UILabel *label = [[UILabel alloc] initWithFrame: labelFrame];
    label.tag = loop;
    [label setText:propertyName];
    [label sizeToFit];
    [self.view addSubview:label];

    UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(xTextField, yTextField, widthTextField, heightTextField)];
    textField.tag = loop;
    textField.borderStyle = UITextBorderStyleRoundedRect;
    textField.font = [UIFont systemFontOfSize:15];
    textField.placeholder = @"Enter parameter value";
    textField.autocorrectionType = UITextAutocorrectionTypeNo;
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    textField.returnKeyType = UIReturnKeyDone;
    textField.delegate = self;
    [self.view addSubview:textField];

    yLabel = yLabel+yOffset; 
    yTextField = yTextField+yOffset;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:57:13.707

虽然您无法`UIControl`通过类别添加 iVar，但您可以添加**Associated Objects**，它可用于执行几乎相同的功能。

所以，`UIControl`像这样创建一个类别：

```
static char kControlNameKey;

- (void) setControlName: (NSString *) name
{
    objc_setAssociatedObject(self, &kControlNameKey, name, OBJC_ASSOCIATION_COPY);
}

- (NSString *) controlName
{
    return (NSString *)objc_getAssociatedObject(array, &kControlNameKey);
} 
```

不仅如此，我想您需要在设置新关联之前检查关联是否存在，否则它会泄漏，但这应该给您一个开始。

有关更多详细信息，请参阅[Apple 文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:47:47.497

假设您不想`[self.view viewWithTag:tag]`用来检索控件，通过名称引用动态创建的控件的一种方法是将其放入`NSMutableDictionary`带有动态生成的键的控件中。

所以也许是这样的（修改你的代码，省略了一些细节）：

```
NSMutableDictionary *controlsDictionary = [[NSMutableDictionary alloc] init];
for ( loop = 0;  loop< myArrayCount; loop++ ) {

CGRect labelFrame = CGRectMake(xLabel, yLabel, widthLabel, heightLabel);
UILabel *label = [[UILabel alloc] initWithFrame: labelFrame];
[controlsDictionary setObject:label forKey:[NSString stringWithFormat:@"label%d", loop]];

UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(xTextField, yTextField, widthTextField, heightTextField)];
[controlsDictionary setObject:label forKey:[NSString stringWithFormat:@"textField%d", loop]];

yLabel = yLabel+yOffset; 
yTextField = yTextField+yOffset;

} 
```

然后您可以通过以下语句检索控件`[controlsDictionary objectForKey:@"label1"]`

# android - 使用 Zxing 的条码阅读器

> ID：11241924
> 
> 赞同：0
> 
> 时间：2012-06-28T09:42:37.960
> 
> 标签：android, android-intent

我使用 Zxing 库读取 QR/BarCode，目前我的项目正在从 Sdcard 读取 Qr/Barcode 并对其进行解码

我想使用我的设备相机扫描代码然后解码，我如何更改我的代码以便它在这里工作。

这是我的代码

```
 public static class Global
{
    public static String text=null;
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Bitmap bMap = BitmapFactory.decodeFile("/sdcard/2.gif");
    TextView textv = (TextView) findViewById(R.id.mytext);
    View webbutton=findViewById(R.id.webbutton);
    LuminanceSource source = new RGBLuminanceSource(bMap); 
    BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
    Reader reader = new MultiFormatReader();
    try {
         Result result = reader.decode(bitmap);
         Global.text = result.getText(); 
            byte[] rawBytes = result.getRawBytes(); 
            BarcodeFormat format = result.getBarcodeFormat(); 
            ResultPoint[] points = result.getResultPoints();
            textv.setText(Global.text);
            webbutton.setOnClickListener(this);
    } catch (NotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ChecksumException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (FormatException e) {
        // TODO Auto-generated catch block
e.printStackTrace();

    }   
}

@Override
public void onClick(View v) {
    Uri uri = Uri.parse(Global.text); 
    Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
    startActivity(intent);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:48:58.043

这取决于您是喜欢使用像 zxing 这样的外部应用程序（在这种情况下，您只需发送意图，它会为您扫描条形码并返回结果），还是在您的应用程序中执行所有操作。在这种情况下，您需要代码来管理预览图像、拍摄图片并将数据输入 ZXing（或其他）库。

该项目演示：http: [//sourceforge.net/projects/javaocr/](http://sourceforge.net/projects/javaocr/)

包含解析条形码的所有内容（图像数据被馈送到 OCR 引擎）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:03:30.617

您需要在 Activity 中调用 Zxing Intent 并放松。

首先添加代码来调用 Intent：

```
IntentIntegrator integrator = new IntentIntegrator(yourActivity);
integrator.initiateScan(); 
```

其次，将此添加到您的 Activity 以处理结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
  IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
  if (scanResult != null) {
    // handle scan result
  }
  // else continue with any other code you need in the method
  ...
} 
```

花点时间浏览 Zxing 的 wiki 页面。他们已经很好地解释了。

[http://code.google.com/p/zxing/w/list](http://code.google.com/p/zxing/w/list)

[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

这是演示如何调用 Zxing 意图的示例应用程序。

[http://code.google.com/p/zxing/source/browse/trunk/androidtest/src/com/google/zxing/client/androidtest/ZXingTestActivity.java](http://code.google.com/p/zxing/source/browse/trunk/androidtest/src/com/google/zxing/client/androidtest/ZXingTestActivity.java)

最后测试项目+库位于

[http://code.google.com/p/zxing/source/browse/trunk#trunk%2Fandroid-integration%253Fstate%253Dclose](http://code.google.com/p/zxing/source/browse/trunk#trunk/android-integration%253Fstate%253Dclosed)

# sql - SQLAlchemy 表间约束

> ID：11241927
> 
> 赞同：0
> 
> 时间：2012-06-28T09:42:42.717
> 
> 标签：sql, sqlalchemy

我正在尝试对系统具有用户、公司、组和角色模型的情况进行建模。其中关系如下。

```
class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    email = Column(Unicode(50), unique=True, nullable=False)
    first_name = Column(Unicode(50), nullable=False)
    last_name = Column(Unicode(50), nullable=False)
    company_id = Column(Integer, ForeignKey('companies.id'))

class Company(Base):
    __tablename__ = 'companies'
    id = Column(Integer, primary_key=True)
    name = Column(Unicode(200), unique=True, nullable=False)

    users = relationship("User", backref="company")
    groups = relationship("Group", backref="company")

class Group(Base):
    __tablename__ = 'groups'
    id = Column(Integer, primary_key=True)
    name = Column(Unicode(60), nullable=False)
    company_id = Column(Integer, ForeignKey('companies.id'), nullable=False)
    roles = relationship("Role", backref="group")

class Role(Base):
    __tablename__ = 'roles'
    id = Column(Integer, primary_key=True)
    name = Column(Unicode(60), nullable=False)
    group_id = Column(Integer, ForeignKey('groups.id'), nullable=False) 
```

我的问题是，我不确定如何强制执行约束，即用户不能成为 Group 或 Role 的成员，除非是拥有 Group 的公司的成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:56:05.193

**1）回答评论中的问题：**
以您的模型为起点，我将简单地添加`M-N`用户和角色之间的关系以完成关系模型：

```
class UserRole(Base):
    __tablename__ = 'user_role'
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey('users.id'), nullable=False)
    role_id = Column(Integer, ForeignKey('roles.id'), nullable=False)

class User(Base):
    # ...
    roles = relationship("Role", secondary=UserRole.__table__, backref="users") 
```

**2）回答约束问题：**

简单的答案：在当前模型的数据库级别上，您无法强制执行它（我不知道 RDBMS 提供了除简单 FK 之外的跨表约束工具）。但是，使用一些冗余数据，您可以这样做：

1.  也存放`company_id`在`Role`桌子上；添加复合 FK 指向`Group`
2.  `group_id`也存储`company_id`在`user_role`表中，并将复合 FK 添加到 中`Role`，*这基本上负责您所要求的内容*

修改后的代码：

```
class Role(Base):
    __tablename__ = 'roles'
    id = Column(Integer, primary_key=True)
    name = Column(Unicode(60), nullable=False)
    group_id = Column(Integer, ForeignKey('groups.id'), nullable=False)
    company_id = Column(Integer, ForeignKey('companies.id'), nullable=False)
    __table_args__ = (ForeignKeyConstraint([company_id, group_id], [Group.company_id, Group.id]), {})

class UserRole(Base):
    __tablename__ = 'user_role'
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey('users.id'), nullable=False)
    group_id = Column(Integer, ForeignKey('groups.id'), nullable=False)
    company_id = Column(Integer, ForeignKey('companies.id'), nullable=False)
    role_id = Column(Integer, ForeignKey('roles.id'), nullable=False)
    __table_args__ = (ForeignKeyConstraint([company_id, group_id, role_id], [Role.company_id, Role.group_id, Role.id]), ) 
```

但这还不够，您必须修改更多代码，因为不同表之间有多个 FK，您需要显式配置关系。此外，您还需要添加一些代码（可能使用 ORM 事件）来自动添加父级的父级，等等。

**3）解决方案？**

您绝对可以使用 SA[属性事件](http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#attribute-events)来验证您的模型：

```
from sqlalchemy import event
def append_user_role(target, value, initiator):
    assert target.company, "Cannot validate until the company is set"
    assert target.company == value.group.company#, "Cannot add person %s (from company %s) to a Role %s (from company %s)" % (target, target.company, value, value.group.company)
event.listen(User.roles, 'append', append_user_role) 
```

我可能会将第**3 点）**与一些数据库视图结合起来，这些视图返回所有`user_role`无效的行以便清理那些不是通过 SA 插入的，而是通过其他方式（数据导入脚本等）

# c - vSphere API 和自动化虚拟机管理

> ID：11241929
> 
> 赞同：0
> 
> 时间：2012-06-28T09:42:45.717
> 
> 标签：c, api, vmware

我们正在探索将我们的软件与不同的 VMware 虚拟化产品连接的可能性，尤其是与 vSphere 5 (ESXi) 和 vCloud Director。我们希望在云内外的虚拟机上自动创建（克隆）、删除、启动、停止和安装特定软件。

这些问题与 vSphere (ESXi) 有关，vCloud Director 稍后再讨论。在浏览了 VMware 文档后，我们选择在 Linux 上使用 vCLI 界面为 vSphere 制作概念验证 (POC)。这有点慢，我们以明文形式传递 ip、用户和密码来执行这些任务。

*   有没有更好的方法（更有效和/或更安全）？
*   你会推荐其他 API 吗？
*   任何能够执行这些任务的 C 库？
*   自动化管理虚拟机最常用的 API 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:21:44.253

这可能有点晚了，但我最近一直在寻找替代的 VSphere API。我正在考虑从像 Jenkins 这样的持续集成服务内部进行部署。

我目前正在尝试 [rbvmomi](https://github.com/rlane/rbvmomi)，它是一个“VSphere API 的 Ruby 接口”。在 Linux 世界中，这可能对您更有用。rbvmomi 作者还编写 了值得一试的[Ruby VSphere Console (RVC)](http://labs.vmware.com/flings/rvc)。我不知道这是否支持 VCloud Director。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:09:08.903

我不确定 Linux 上的某些 API（Windows 可能是更好的选择），但我有以下评论：

*   我们正在开发非常相似的系统，我们通过[vSphere Web Services SDK](http://www.vmware.com/support/developer/vc-sdk/)完成的所有任务（我认为 VMware 官方只支持 C# 和 Java，但我听说过许多 PHP、Perl 等社区 SDK）
*   [PowerCLI](http://communities.vmware.com/community/vmtn/server/vsphere/automationtools/powercli)是第二个推荐的 API，它非常易于使用
*   但是，如果您真的想使用 Linux，VSphere 使用 SOAP 进行通信，您只需要知道消息的格式等。在这里我推荐[Onyx 项目](http://communities.vmware.com/community/vmtn/server/vsphere/automationtools/onyx)，它可以作为 VSphere 客户端和 VCenter 之间的某种代理，您只需在 VSphere 客户端中执行操作，它会向您显示它发送到服务器的确切 SOAP 消息

# c# - 如何使用“正则表达式”提取文件名？

> ID：11241935
> 
> 赞同：1
> 
> 时间：2012-06-28T09:43:13.050
> 
> 标签：c#, asp.net, regex

我想`13572_BranchInformationReport_2012-06-28.zip`从以下文本中提取文件名 -

> 1:30","/icons/def13572_BranchInformationReport_2012-06-28.zip","13572_BranchInformationReport_2012-06-28.zip",0,"184296","6 月 28 日

我正在使用的正则表达式代码是：

```
var fileNames = from Match m in Regex.Matches(pageSource, @"[0-9]+_+[A-Za-z]+_+[0-9]+-+[0-9]+-+[0-9]+.+(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm)")
                select m.Value; 
```

哪个应该可以正常工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:51:39.553

你需要逃避 . 在正则表达式的中间，因为 . 匹配任何字符。

```
@"[0-9]+_+[A-Za-z]+_+[0-9]+-+[0-9]+-+[0-9]+\.+(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:48:56.723

试试下面的正则表达式：

```
[0-9]+_+[A-Za-z]+_+[0-9]+-+[0-9]+-+[0-9]+.+(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm)(?=",") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T09:52:46.803

您可以尝试以下正则表达式：

```
\d{5}_\w*_\d{4}-\d{2}-\d{2}\.(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm) 
```

这将匹配任何内容：

1.  以五位数开头
2.  然后是下划线
3.  然后任意数量的字母或数字
4.  然后是下划线
5.  然后是日期部分：四位数字，破折号，两位数字，破折号，最后两位。
6.  然后是一段时间
7.  最后是扩展。

PowerShell 示例：

```
$text = '1:30","/icons/def13572_BranchInformationReport_2012-06-28.zip","13572_BranchInformationReport_2012-06-28.zip",0,"184296","Jun 28'

$regex = '\d{5}_\w*_\d{4}-\d{2}-\d{2}\.(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm)'

$text -match $regex

$matches[0] 
```

# c++ - 如何超载一元和外部类？

> ID：11241940
> 
> 赞同：3
> 
> 时间：2012-06-28T09:43:29.270
> 
> 标签：c++, operator-overloading

您可以将`&`类中的一元运算符重载为：

```
struct X
{
   void* operator &()
   {
      return this;
   }
}; 
```

以便它返回一个地址。你将如何在课堂之外重载它：

```
struct X
{
};

void* operator &(const X& x)
{
    //how?
} 
```

取参数的地址会导致无限递归。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T09:55:52.933

在 C++11 中，有`template< class T > T* std::addressof(T& arg)`.

[标准::地址](http://en.cppreference.com/w/cpp/memory/addressof)

您还可以从[Boost Utility获得 C++03 的相同功能](http://www.boost.org/doc/libs/1_49_0/libs/utility/utility.htm)

# matplotlib - 在 matplotlib 中显示标签的问题

> ID：11241943
> 
> 赞同：3
> 
> 时间：2012-06-28T09:43:50.843
> 
> 标签：matplotlib

我是 python 和 matplotlib 的新用户，所以要温柔。

我有一个更改了 x 和 y 标签的图，因此它们对应于化合物。

但是，例如制作一个 10x10 的图（我认为限制是 8x8）并不是我所有的标签都显示出来。

当然，我希望进行更改，以便所有标签都出现在 8 x 12 图中。

下面是我目前使用的随机数代码。

```
import numpy as np
import matplotlib.pyplot as plt

HOST = ['RuO2', 'IrO2', 'TiO2', 'MnO2','SnO2','MoO2','NbO2','Dummy','Dummy','Dummy']

GUEST = ['Ru','Ir','Ti','Mn','Sn','Fe','Ni','Zn','Mg','D']

data = np.random.random((10,10))

fig = plt.figure()
ax = fig.add_subplot(111)
cax = ax.matshow(data)
fig.colorbar(cax)

ax.set_xticklabels(['']+HOST,rotation=90)
ax.set_yticklabels(['']+GUEST)

plt.show() 
```

这当然会及时修改为我的数据等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:06:11.143

查看该[`matplotlib.pyplot.xticks`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.xticks)函数，它设置或获取 x 轴刻度位置和标签。如果我打电话给这个

```
locs, labels = plt.xticks() 
```

在您的示例代码中，我得到 xticks 位于

```
>>> locs
[ -2.,   0.,   2.,   4.,   6.,   8.,  10.] 
```

请注意，两个点 -2 和 10 有空标签，这对应于 5 个 x 轴刻度位置，因此您不会绘制所有标签，因为 x 轴刻度标签的数量超过 x 轴的数量勾选位置。尝试更换

```
ax.set_xticklabels(['']+HOST, rotation=90) 
```

和

```
ax.xticks(range(len(HOST), HOST, rotation=90) 
```

在这里，我们设置了 xtick 位置和标签。当然，y 轴刻度线也需要类似的替换。

# php - MySQL将select与其他表中的sum结合起来

> ID：11241952
> 
> 赞同：3
> 
> 时间：2012-06-28T09:44:32.663
> 
> 标签：php, mysql, sql, select, sum

我不是很喜欢 MySQL，但我只需要一个声明，我非常感谢你在这方面的帮助。

我有两个表：“用户”和“分数”

这是“用户”的结构：

```
| user_id | user_name |
| 1       | Paul      |
| 2       | Peter     | 
```

这是“分数”的结构：

```
| score_id | score_user_id | score_track_id | score_points | 
| 1        | 2             | 23             | 200          |
| 2        | 2             | 25             | 150          | 
```

现在我需要一个查询来为我提供某种高分列表。结果应包含 user_id、user_name 和与用户相关的所有分数的总和：我应该如下所示：

```
| user_id | user_name | scores |
| 1       | Paul      | 0      |
| 2       | Peter     | 350    | 
```

更好的是，如果按照用户在全球排名中的位置顺序对结果进行排序，如下所示：

```
| position | user_id | user_name | scores |
| 1        | 2       | Peter     | 350    |
| 2        | 1       | Paul      | 0      | 
```

我试过这个说法

```
SELECT user_id as current_user, user_name, SUM(SELECT score_points FROM score WHERE score_user_id = current_user) as ranking FROM user ORDER BY ranking DESC 
```

这会导致语法错误。对我来说，主要问题是将'user'中的user_id连接到每行'score'中的score_user_id。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T09:47:25.050

您只需要按用户对分数进行分组：

```
SELECT @p:=@p+1 AS position, t.*
FROM (
  SELECT   user.user_id,
           user.user_name,
           IFNULL(SUM(score.score_points),0) AS total_points
  FROM     user LEFT JOIN score ON user.user_id = score.score_user_id
  GROUP BY user.user_id
  ORDER BY total_points DESC
) AS t JOIN (SELECT @p:=0) AS initialisation 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/0b853/2)上查看。

# django - 如何使用 django 或原始过滤器

> ID：11241953
> 
> 赞同：1
> 
> 时间：2012-06-28T09:44:32.607
> 
> 标签：django, django-queryset, django-orm

我为标题道歉。

我需要使用`to_char`（或类似的东西）将日期时间字段转换为字符串并`ILIKE`在进行查询时对其应用。

像这样的东西：

```
SELECT ...

FROM mytable
WHERE 
    mytable.type = 'mytype'
 AND (
        mytable.name = 'myname' 
        OR 
        to_char(created_at, 'Mon DD, YYYY, MI:SS') ILIKE '%jun 27,%'
    ) 
```

如您所见，问题在于查询的这一部分必须与某些过滤器进行*OR并与其他过滤器进行**AND*。

注意事项：

*   我不能`extra(select=...)`用来将字段转换为字符串然后过滤它，`filter(..)`因为 django 不支持它
*   我不能使用`extra(where=...)`，因为这会*OR*整个查询
*   我无法创建`ExtraWhere`对象并将其与对象*或*(|)`Q`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:51:06.667

我设法找到了解决方案。

我子类`django.db.models.Q`化并实现了该`add_to_query(self, query, alias)`方法。通过这种方式，我可以毫无问题地对 Q 进行*OR*和*AND 。*

## 示例代码：

**请注意**，这只是一个简化版本，在这里只是为了给您一个想法。

你真的应该添加额外的位（例如支持链 myobj_ *my2ndobj* _my3rdobj__mydatetime_field）

```
from django.db.models import Q
from django.db.models.sql.where import ExtraWhere, OR

class DatetimeQ(Q):
    def __init__(self, *args, **kwargs):
        super(DatetimeQ, self).__init__(*args, **kwargs)
        self.name = kwargs.get('name')
        self.value = kwargs.get('value')

    def add_to_query(self, query, alias):
        where = ExtraWhere(["to_char(" + self.name + ", %s) ILIKE %s"], [
                'Mon DD, YYYY, MI:SS', "%%%s%%" % self.value
            ])
        query.where.add(where, OR) 
```

希望这可以帮助。

# wcf - 从 WSDL 创建服务端点时，我可以强制使用 DataContracts 吗？

> ID：11241954
> 
> 赞同：1
> 
> 时间：2012-06-28T09:44:34.527
> 
> 标签：wcf, wcf-client, datacontract

我正在尝试使用 VS 2010 创建一个 WCF 服务客户端。该服务本身不是 WCF，我无法控制它。由于服务在其响应中使用多态数组，我必须注入`KnownTypes`我的客户端。我想做的是按照[http://msdn.microsoft.com/en-us/magazine/gg598929.aspx](http://msdn.microsoft.com/en-us/magazine/gg598929.aspx)`DataContractResolver`中的描述 添加一个，但这不起作用，因为在我的客户端存根中生成的类不使用s (我的代码永远不会被调用）。有没有可能强制执行？或者我可以做一些类似on 类的事情，只有具有以下属性：`DataContract``DataContractResolver`

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.233")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.SoapTypeAttribute(Namespace="...")] 
```

# mysql - 当一个字段不等于另一个字段时，带有条件的 SQL 查询

> ID：11241958
> 
> 赞同：3
> 
> 时间：2012-06-28T09:44:49.253
> 
> 标签：mysql, sql

假设我们有字段： id | 内容 | 更新时间 | 创建时间

插入完成后，updateTime 和 creationTime 都会被当前时间填充。在更新时，只有 updateTime 字段被更改。当我需要查找在“2012-06-28”上创建的所有数据时，我只需使用：

```
SELECT id, content FROM tbl WHERE creationTime LIKE '2012-06-28%'` 
```

但是要获取所有更新的数据，不包括创建的数据，我需要使用这样的东西：

```
SELECT id, content FROM tbl WHERE creationTime LIKE '2012-06-28%' AND creationTime != updateTime 
```

这显然行不通。虽然我可以通过比较 php 中两个“时间”列的值来找到所有更新的数据，但我仍然喜欢在查询中进行。

UPD：好吧，事实证明我完全不知道 sql 不仅允许将字段的值与给定的变量数字进行比较......而且它还可以将一个字段的值与另一个字段的值进行比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T09:47:35.983

`<>`改为使用`!=`（与某些 DMBS 不兼容）

所以

```
SELECT id, content 
FROM tbl 
WHERE creationTime LIKE '2012-06-28%' AND creationTime <> updateTime 
```

如果你想要一些文档[，你可以在这里找到](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#operator_not-equal)

但是，您的查询必须与`!=`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T09:49:30.857

**您的查询是正确的（在 mySQL¹ 上），不知道您为什么会这么想**

¹`<>`是不等于的 SQL 运算符。但是，它的一些实现（例如 PostgreSQL 或 MySQL）`!=`也可以接受。`<>`如果您曾经在不同的数据库上使用您的代码，那么始终使用它来避免问题是一个很好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T09:48:41.133

只需将 not 运算符从更改`!=`为`<>`

```
SELECT id, content FROM tbl WHERE creationTime LIKE '2012-06-28%' AND creationTime <> updateTime 
```

# backbone.js - 骨干木偶复合视图未触发事件

> ID：11241966
> 
> 赞同：0
> 
> 时间：2012-06-28T09:45:11.483
> 
> 标签：backbone.js, marionette

这是我用来创建树结构的代码复合视图片段。

```
var TreeView = Backbone.Marionette.CompositeView.extend({

    template: "#filterTemplate",
    className:"menuItem",
    tagName: "ul",

    initialize: function(){
      this.collection = this.model.type;
        counter=0;
    },

    events: {
        'click .menuItem': 'show'
    },

    show: function(event) {
        var target = $(event.target);
        console.log(target);

    },

    appendHtml: function(collectionView, itemView){
        // ensure we nest the child list inside of 
        // the current list item
        $(itemView.el).attr("id","innerMenu"+counter);
        $(itemView.el).attr("class","innerMenu");
        collectionView.$("li:first").append(itemView.el);
        counter++;
    }
}); 
```

树呈现完美，但事件未绑定或未触发。永远不会调用 Show 方法。我正在使用 Backbone.Marionette v0.9.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T12:43:55.670

您已将视图本身设置为使用`menuItem`css 类进行渲染。在任何主干视图（这不是 Marionette 特有的）中，如果您想直接处理视图元素上的事件（不是其中的一个子元素），您可以在没有选择器的情况下指定您的事件。

在您的情况下，它将是：

```
events: {
    "click": "show"
} 
```

这将`el`直接使用“click”事件配置视图，并且`show`当您单击该视图的 HTML 的任何部分时将调用该方法。

# magento - 以编程方式更改 Magento 中的管理员密码

> ID：11241968
> 
> 赞同：3
> 
> 时间：2012-06-28T09:45:16.000
> 
> 标签：magento

我试图通过以下方式更改 Magento 管理员密码，

```
Mage::getModel('admin/user')->loadByUsername('admin')->setPassword($password); 
```

但这似乎不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T10:20:22.723

您忘记添加`save()`.

```
Mage::getModel('admin/user')
     ->loadByUsername('admin')
     ->setPassword($password)
     ->save(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T13:34:10.840

如果您想通过 Query 执行此操作，请运行以下查询：

```
UPDATE admin_user SET password=CONCAT(MD5('qXpassword'), ':qX') WHERE username='admin'; 
```

生成的密码将是**'password'**， qX 是您可以使用任何 2 个字母组合的盐。

```
UPDATE admin_user SET password=CONCAT(MD5('bL123456'), ':bL') WHERE username='admin'; 
```

将使密码**123456** ...

# vb.net - 在 IIS 中托管时出现日期解析错误

> ID：11241974
> 
> 赞同：0
> 
> 时间：2012-06-28T09:45:55.003
> 
> 标签：vb.net, date, .net-4.0, type-conversion

我在 vb.net 中有以下日期解析：

```
Dim SDate As Date = Format("yyyy-MM-dd", date1) 
```

它在开发中运行良好，但是当我在 IIS .Net v(4.0) 中托管应用程序时，它给了我以下信息：

```
Conversion from string 2012-06-28 to type 'Date' is not valid. 
```

......

我尝试了多种形式的日期解析，**它们都在开发中运行良好**

但是当我在 IIS 中托管它们时，它总是给我错误

提前致谢，，，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:18:04.063

使用方法之一 - `Date.Parse`, `Date.TryParse`,`Date.ParseExact`将字符串解析为日期类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:07:02.140

我找到了关于我的问题的好文章

[http://lesession.blogspot.com/2008/07/wrong-date-format-on-your-iis-website.html](http://lesession.blogspot.com/2008/07/wrong-date-format-on-your-iis-website.html)

解决方案是将以下内容放在 web.config 中：

```
 <globalization culture="en-GB"/> 
```

# asp.net - 如何在按钮点击进度条？

> ID：11241976
> 
> 赞同：-1
> 
> 时间：2012-06-28T09:46:07.380
> 
> 标签：asp.net

单击按钮后，条目应该进入数据库。在那个时间间隔内，我想向用户显示处理过程。我为此使用了 updateprogress。我在同一页面中有 selectAll 复选框（selectedIndexchange 事件）。当检查 selectAll 时，它显示进度条.我不想要那个。我只想点击按钮。在updatprogress中提到displayafter = 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:50:09.600

使用更新面板和更新进度控件是否合适？

[http://msdn.microsoft.com/en-us/library/bb386421.aspx](http://msdn.microsoft.com/en-us/library/bb386421.aspx)

[更新面板内的更新进度](https://stackoverflow.com/questions/6254774/update-progress-inside-update-panel)

如果您想要更多控制，我会亲自使用此 Jquery 控件来显示进度面板[http://code.google.com/p/jquery-loadmask/](http://code.google.com/p/jquery-loadmask/)，然后使用 Ajax 调用服务器

# c# - XML 清理（从属性值中删除无效字符）

> ID：11241977
> 
> 赞同：1
> 
> 时间：2012-06-28T09:46:21.797
> 
> 标签：c#, xml-parsing

如何从 xml 中删除任何有效字符但保持标准，例如我想从属性值内部字符串中删除所有 < 和 "

```
<log>
  <data id="1" name="No Error"  value="0" />
  <data id="2" name="Error "1" between text" value="0" />
  <data id="3" name="Error <2> between text"  value="0"  />
</log> 
```

我怎样才能自然地删除引号包围“1”和<>包围2

最后的输出应该是

```
<log>
  <data id="1" name="No Error"  value="0"  />
  <data id="2" name="Error 1 between text" value="0" />
  <data id="3" name="Error 2 between text"  value="0"  />
</log> 
```

感谢您的支持

我正在考虑以下解决方案：

1.  以文本形式读取文件
2.  修改任何以 开头`<Name=>`和结尾的 字符串`<value=>`
3.  移除所有`",<,>`
4.  `"`后加`<name=>`和`"`前加`<value=>`

如果这是正确的，我怎么能用 C# 做到这一点，替换方法将不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:00:38.033

为了您的信息，我发现了两种不同的方式，

1-

```
public static void ReplaceInvalidCharFromAttribute(string filePath, string startElement, string nextElement, string[] removeStrings)
        {
            string tempFile = Path.GetTempFileName();

            using (var sr = new StreamReader(filePath))
            {
                using (var sw = new StreamWriter(tempFile))
                {
                    string line;
                    string temp;
                    while ((line = sr.ReadLine()) != null)
                    {
                        temp = RemoveInvalidCharFromAttribute(line, startElement, nextElement, removeStrings);
                        sw.WriteLine(temp??line);
                    }
                }
            }

            File.Delete(filePath);
            File.Move(tempFile, filePath);
        }

public static string RemoveInvalidCharFromAttribute(string input, string startElement, string nextElement, string[] invalidChars)
        {
            if (input.IndexOf(startElement) < 0 || input.IndexOf(nextElement) < 0) return null;
            int start =input.IndexOf(startElement) + startElement.Length;
            int end = input.IndexOf(nextElement);
            StringBuilder res = new StringBuilder(input.Substring(start, (end - start)));
            StringBuilder resCopy = new StringBuilder(res.ToString());

            foreach (string inv in invalidChars)
                res.Replace(inv, "");

            // return the result after surrounding the text with double 
            return
                input.Replace(
                resCopy.ToString(),
                (String.Concat("\"", String.Concat(res.ToString().Trim(), "\" "))));
        } 
```

2- [http://support.microsoft.com/kb/316063](http://support.microsoft.com/kb/316063)

所以太好了，谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T09:52:00.183

在 PHP 中，在数据进入 XML 之前，我使用以下代码对数据进行编码：-

```
function xml_encode($string)
{
    $string=preg_replace("/&/", "&amp;", $string);
    $string=preg_replace("/</", "&lt;", $string);
    $string=preg_replace("/>/", "&gt;", $string);
    $string=preg_replace("/\"/", "&quot;", $string);
    $string=preg_replace("/%/", "&#37;", $string);

    return utf8_encode($string);
} 
```

在您真正查看源代码之前，它看起来就像您在浏览器中建议的那样。

此时您需要检查“& amp;” 和十六进制/八进制代码。

希望能有所帮助。

# php - 在 PHP 中调用没有任何按钮的 Javascript 函数来触发它

> ID：11241978
> 
> 赞同：0
> 
> 时间：2012-06-28T09:46:25.740
> 
> 标签：php, javascript, function

好吧，在我继续我的编码的另一个阶段之前，为了确保我不会在错误的树上吠叫，请问是否可以在 php 中调用 javascript 函数而无需任何按钮单击动作来触发它。我也不考虑 onload() 或 onready() 因为我要在 php 中的 foreach 循环中调用 javascript 函数.. 这个概念在某种程度上是这样的：

```
<script type="text/javascript">
   function callMe(){
      alert('im called!');
   }
</script>

<body>
  <?php
    .....
    foreach($somevar as $var){
     // assuming it will loop 5 times
    callMe();  // well this is the part where im going to call the javascript function
   }
  ?>
</body> 
```

先感谢您。

****** *** ******编辑部分****** ********

 **这是我计划使用的实际代码：

```
function AddCoordinate( lat, long )                                                                                                                                   
{
  var path = LinePath.getPath(); 
  path.push( new google.maps.LatLng( lat, long ) );
}

<?php    
    foreach($arrayOfPlotPoints as $key => $value){ 
        $longitude = round($value['longitude'],5);
        $latitude = round($value['latitude'],5);
        $snrLevel = $value['snr_level'];
        echo '<script         
            type="text/javascript">AddCoordinate('.$latitude.','.$longitude.')</script>

?> 
```

实际上这是正确的答案..它已经奏效了..所以我也会提供一个答案

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T09:49:23.967

只需输出：

```
echo '<script type="text/javascript">callMe()</script>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:09:22.573

感谢Donatas ..现在这就是我所拥有的：

```
function AddCoordinate( lat, long )                                                                                                                                   
{
  var path = LinePath.getPath(); 
  path.push( new google.maps.LatLng( lat, long ) );
}

<?php    
    foreach($arrayOfPlotPoints as $key => $value){ 
        $longitude = round($value['longitude'],5);
        $latitude = round($value['latitude'],5);
        $snrLevel = $value['snr_level'];
        echo '<script         
            type="text/javascript">AddCoordinate('.$latitude.','.$longitude.')</script>

?> 
```

有用 ：）**

# sql-server - 什么返回类型？对于包含返回多行的 LINQ-to-SQL 的“Getter”函数

> ID：11241982
> 
> 赞同：0
> 
> 时间：2012-06-28T09:46:27.990
> 
> 标签：sql-server, vb.net, linq, sql-server-2008, linq-to-sql

我正在开发一个 ASP.NET (VB.NET) Web Forms 网站，该网站从 SQL Server 2008 R2 数据库中检索数据。

以前我会在代码隐藏文件中编写 LINQ-to-SQL 代码。但是，从现在开始，我希望将我所有的 LINQ-to-SQL 代码包含**在“帮助器”类中的共享函数中**。

我知道如果我**只返回一行**，那么我的函数签名可以如下：

```
Public Shared Function GetMainBanner(pageId as Integer) As MainBanner 
```

但是如果我返回**零行或多行怎么办？**以下哪一项是**合适的/最便宜**的：

```
Public Shared Function GetRelatedDls(pageId as Integer) As List(Of RelatedDl)

Public Shared Function GetRelatedDls(pageId as Integer) As IQueryable(Of RelatedDl)

Public Shared Function GetRelatedDls(pageId as Integer) As IEnumerable(Of RelatedDl)

'OR SOMETHING ELSE? 
```

我最初的偏好`List(Of RelatedDl)`纯粹是因为可读性，并且 IQueryable （我认为，但可能是错误的）如果我调用`.Count`并`.First`执行`For Each`? 而且数据库交互很**昂贵，**不是吗？

鉴于以下情况：

*   我的大多数实体的属性都映射到`nvarchar(50)`or`int`或`bit`
*   我的两个实体有一个属性映射到`nvarchar(MAX)`
*   我的“getter”函数一次将返回大约 5 - 25 行
*   在处理 ASPX 页面请求时，将调用大约 10 - 20 个“getter”函数
*   它运行在功能中等的 Windows 2008 服务器上的网站

**哪个是最好的选择，或者是否有上面未列出的替代方案？**

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:08:54.577

如果您将其作为 IQueryable 返回，则一旦从函数调用返回，您的数据库查询将不会执行，并且如果您的 DataContext 在函数中，您将遇到运行时错误，即与您的数据库的连接已关闭（一旦数据上下文超出范围）一旦您尝试使用查询结果。

如果您将其作为 IEnumerable (List、Array.. etc..) 返回。一旦你返回函数调用，对象就会被加载到内存中。

由您的设计决定哪种方法更好、更有效。如果您要从调用方法扩展查询（例如添加过滤器），IQueryable 会更好，因为扩展查询将在数据库级别执行，您将加载更少的数据。

# r - R：数据帧中强制引入的 NA

> ID：11241984
> 
> 赞同：0
> 
> 时间：2012-06-28T09:46:30.277
> 
> 标签：r, dataframe, numeric, coercion

我有一个使用 sql 数据库中的数据构建的数据框。第一列包含日期，另一列包含双精度或字符串，应为双精度。

我需要将字符串转换为真正的双精度。

我试图在另一个数据框中提取带有“数字”的数据，然后：as.numeric 或 class = numeric。

这两个选项都返回错误。

任何想法？

非常感谢，文森特

编辑：这是我遇到问题的功能/

```
 function(Best,Worst,PriceTable){
PnL=data.frame()

#PnL long
for(i in 1:(nrow(Best)-1)){PnL[i,1]=Best[i+1,1];pnl=0;divide=0;for (j in 1:ncol(Best)){if((!is.null(PriceTable[i+1,as.character(Best[i,j])])) && (!is.na(as.numeric(PriceTable[i+1,as.character(Best[i,j])])))){pnl=pnl+as.numeric(PriceTable[i+1,as.character(Best[i,j])]);divide=divide+1}};PnL[i,2]=pnl/divide;PnL[i,3]=0;PnL[i,4]=divide}

#PnL short
for(i in 1:(nrow(Worst)-1)){pnl=0;divide=0;for (j in 1:ncol(Worst)){if((!is.null(PriceTable[i+1,as.character(Worst[i,j])])) && (!is.na(as.numeric(PriceTable[i+1,as.character(Worst[i,j])])))){pnl=pnl+as.numeric(PriceTable[i+1,as.character(Worst[i,j])]);divide=divide+1}};PnL[i,3]=-pnl/divide;PnL[i,5]=divide}

colnames(PnL)[1]='Date'
colnames(PnL)[2]='PnL Long'
colnames(PnL)[3]='PnL Short'
colnames(PnL)[4]='N trade long'
colnames(PnL)[5]='N trade short'

#overall PnL
for (i in 1:nrow(PnL)){PnL[i,6]=PnL[i,3]+PnL[i,2]}
colnames(PnL)[6]='PnL'

return(PnL) 
```

}

我的 TablePrice 看起来（更大）如下：

```
row.names   Date        25179M103   371532102   186905105   382388106
16         2011-01-25   0.08094573   0.001366867    -0.08003574 0.02431649
21         2011-02-01   0.10623324   0.033948941     0.02128497 0.02949376
40         2011-03-01   0.02046414  -0.028119508    -0.16465137 -0.09292013
63         2011-04-01   0.04486064   0.034553366    0.01336088  0.02603872
83         2011-05-02  -0.02220955  -0.016687422    -0.07369759 0.03656137 
```

# php - shell_exec 不显示 php 中的波浪号值

> ID：11241986
> 
> 赞同：0
> 
> 时间：2012-06-28T09:46:36.157
> 
> 标签：php, shell-exec

在我的远程服务器上，我可以使用这个指令

```
$home = `echo ~`; 
```

它工作正常

但是在我的本地网站上，同样的指令没有给出任何东西..我禁用了安全模式，我查看了禁用功能（shell_exec 没有被禁用）。

车轮上的一根小杆子，阻止我在我的发展中走得更远..

**注意**：两台服务器都运行在 Unix 系统上

# multithreading - 线程安全但不可重入

> ID：11241987
> 
> 赞同：1
> 
> 时间：2012-06-28T09:46:36.803
> 
> 标签：multithreading, operating-system

我想知道一个函数是否有可能是线程安全的但不是可重入的。在一些网站上，他们说这是不可能的，而另一些网站则说这是可能的。他们给出的例子说这是可能的并不清楚。那么是否有可能拥有一个线程安全且不可重入的函数？有没有明确的例子可以证明这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T07:33:26.803

本文示例：[http ://en.wikipedia.org/wiki/Reentrancy_%28computing%29](http://en.wikipedia.org/wiki/Reentrancy_%28computing%29)

```
int function()
{
 mutex_lock();
 ...
 function body
 ...
 mutex_unlock();
} 
```

如果中断中断此函数并且中断处理程序调用此函数，系统将永远挂起，因为第一个函数锁定了互斥锁。