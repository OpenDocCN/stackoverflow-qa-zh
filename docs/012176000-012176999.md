# StackOverflow 问答 12176000-12176999

# node.js - 如何在 res.render 函数中指定布局？

> ID：12176004
> 
> 赞同：1
> 
> 时间：2012-08-29T10:35:09.343
> 
> 标签：node.js, express, pug

渲染视图（Expressjs 2.x）时我需要有不同的布局。如何改变它们？
例如：

```
res.render('follow_page', {layout:'layout_2'}, {name:'test'})

res.render('user_page', {layout:'layout_1'}, {user:'test1'}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:43:04.637

对于 Express 2.x 及更早版本，您需要合并 2 个对象，并为其赋予一个`locals`属性：

```
res.render('follow_page', { layout: 'layout_2', locals: { name: 'test' } });
res.render('user_page', { layout: 'layout_1', locals: { name: 'test1' } }); 
```

# html - 如何在具有 100% 宽度的固定位置 div 中居中无序列表

> ID：12176007
> 
> 赞同：0
> 
> 时间：2012-08-29T10:35:12.627
> 
> 标签：html, css

我正在开发一个网页布局，我在顶部有一个导航栏设置为位置：固定；宽度：100%；这样即使用户滚动它也会停留在视口的顶部并占据页面的宽度。我想在其中放置一个居中的水平无序列链接列表（宽度 940px），如下所示：

```
<nav id='nav-bar'>
    <ul>
        <li><a href='#'>text</a></li>
        <li><a href='#'>text</a></li>
        <li><a href='#'>text</a></li>
        <li><a href='#'>text</a></li>
        <li><a href='#'>text</a></li>
    </ul>
</nav> 
```

尝试了显示和位置/浮动等的各种组合后，如果我尝试调整页面大小，我无法将其居中，而列表不会超过两行。我预计可能需要其他一些包装器来包含该列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:46:29.307

要在元素中强制执行单行`li`元素`ul`并将它们居中：

```
#nav-bar {
    white-space: nowrap;
    text-align: center;
} 
```

要让`li`元素遵守这些规则，请*使用* `inline`or `inline-block`：

```
#nav-bar li {
    display: inline-block; /* allows width and height to be set on the element ('inline' does not) */
} 
```

JS小提琴：

*   [`display: inline-block;`](http://jsfiddle.net/davidThomas/FWtFe/)

*   [`display: inline;`](http://jsfiddle.net/davidThomas/FWtFe/1/)

最后，一个演示使用相对宽度（in `%`），并设置一`min-width`组以防止`li`元素变得*太小*：http: [//jsfiddle.net/davidThomas/FWtFe/3/](http://jsfiddle.net/davidThomas/FWtFe/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:50:45.873

您应该将内容包装到`fixed`父级中：

```
<div id="fixed-element">
    <nav id='nav-bar'>
        <ul>
            <li><a href='#'>text</a></li>
            <li><a href='#'>text</a></li>
            <li><a href='#'>text</a></li>
            <li><a href='#'>text</a></li>
            <li><a href='#'>text</a></li>
        </ul>
    </nav>
</div>​ 
```

并将css应用于它：

```
#fixed-element{position:fixed:top:0;}
#nav-bar{position:relative;float:left;left:50%;}
#nav-bar ul{position:relative;float:right;right:50%;}
#nav-bar ul li{float:left;clear:none;display:inline-block;list-style:outside none;margin:0 5px;}​ 
```

[这是jsfiddle的链接](http://jsfiddle.net/HSxLG/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:53:33.307

试试这个[小提琴](http://jsfiddle.net/gajjuthechamp/JuYpT/) [http://jsfiddle.net/gajjuthechamp/JuYpT/](http://jsfiddle.net/gajjuthechamp/JuYpT/)

它只是你需要的`margin:auto`。`display:inline-block`

# java - Java GroupLayout 验证需要的设计和对齐帮助

> ID：12176008
> 
> 赞同：1
> 
> 时间：2012-08-29T10:35:14.607
> 
> 标签：java, swing, layout-manager, grouplayout

我正在使用 GroupLayout 在 Windows 7（64 位）上的 Java 7 中构建我的框架。以下是我在 GroupLayout 上查看 Oracle 示例时使用的布局结构。

所需布局：

```
+------------------------------------------+

|  [Label1] [ComboBox1]                    |

|  [Label2] [TextField1] [Button1]         |

|  [Label3] [TextField2] [Button2]         |

|  [Label4] [ComboBox2]                    |

+------------------------------------------+ 
```

我的代码设计：

```
layout.setHorizontalGroup(layout.createSequentialGroup()

    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING))
        .addComponent(Label1)
        .addComponent(Label2)
        .addComponent(Label3)
        .addComponent(Label4)
    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING))
        .addComponent(ComboBox1)
        .addComponent(TextField1)
        .addComponent(TextField2)
        .addComponent(ComboBox2)                
    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING))
        .addComponent(Button1)
        .addComponent(Button2)

);

layout.linkSize(SwingConstants.HORIZONTAL, Button1, Button2);

layout.setVerticalGroup(layout.createSequentialGroup()

    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE))
            .addComponent(Label1)
            .addComponent(ComboBox1)
    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE))
            .addComponent(Label2)
            .addComponent(TextField1)
            .addComponent(Button1)
    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE))
            .addComponent(Label3)
            .addComponent(TextField2)
            .addComponent(Button2)
    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE))
            .addComponent(Label4)
            .addComponent(ComboBox2)
); 
```

我需要让更有经验的人检查一下。目前，此代码会导致尺寸对齐问题`ComboBox1, ComboBox2`并`TextField2`显着减少。

你有什么建议来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:15:36.520

对于那些类型的布局，我几乎总是选择[`FormLayout`JGoodies](http://www.jgoodies.com/freeware/libraries/forms/)。当然这不包含在标准 JDK 中，所以不确定这是否适合您。

该布局的主要好处之一（imo）是它允许轻松对齐列中的组件，并具有体面且可控的调整大小行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:17:48.860

首先，我个人会避免`GroupLayout`，它并不是真正用于手动编码。

我会改用 GridBagLayout

```
setLayout(new GridBagLayout());
GridBagConstraints gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
add(label1, gbc);
gbc.gridx++;
add(comboBox1, gbc);

gbc.gridx = 0;
gbc.gridy++;
add(label2, gbc);
gbc.gridx++;
add(textField1, gbc);
gbc.gridx++;
add(button1, gbc);

gbc.gridx = 0;
gbc.gridy++;
add(label3, gbc);
gbc.gridx++;
add(textField2, gbc);
gbc.gridx++;
add(button2, gbc);

gbc.gridx = 0;
gbc.gridy++;
add(label4, gbc);
gbc.gridx++;
add(comboBox2, gbc); 
```

# sql - 在Oracle 11g中执行sql查询可以包含多少个参数

> ID：12176017
> 
> 赞同：1
> 
> 时间：2012-08-29T10:35:43.407
> 
> 标签：sql, oracle

如果我写一个查询

```
select * from some_table where some_field in (1, 2, 3 ...) 
```

那么这个列表要多久才能成功执行查询呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:43:06.737

引自

Oracle® 数据库 SQL 语言参考
11g 第 2 版 (11.2)
部件号 E26088-01

“您最多可以在 expression_list 中指定 1000 个表达式。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:42:26.923

[这个问题有](https://stackoverflow.com/questions/4722220/sql-in-clause-1000-item-limit)帮助吗？

看起来它可能限制为 IN 子句中的 1000 个项目，但您可以通过子查询来解决这个问题。请注意 IN 子句中的大量项目，因为它可能会影响性能。

# c# - 使用 Negative lookbehind 和 Negative lookahead assertion 的正则表达式

> ID：12176018
> 
> 赞同：0
> 
> 时间：2012-08-29T10:35:47.430
> 
> 标签：c#, .net, regex, lookahead, lookbehind

> **可能重复：**
> [正则表达式匹配双引号外的左单引号](https://stackoverflow.com/questions/12103448/regex-matching-left-single-quotation-outside-the-double-quotations)

第一个注意事项：

```
&ldquo - left double quote (")
&rdquo - right double quote (")
&lsquo - left single quote (')
&rsquo - right single quote (') 
```

我需要匹配不在左右双引号内的所有“左单引号”。

澄清：

1.  This is a `&ldquo;sample &lsquo string &rsquo &rdquo` -> this 不应该匹配，因为`&lsquo`（单引号）在双引号内

2.  这是`&lsquo sample &rsquo` -> &lsquo 应该匹配，因为它不在双引号内

这是我当前的正则表达式：

```
(?<!.*&ldquo)&lsquo(?!.*&rdquo) 
```

问题在于，它同时查看`&ldquo`and `&rdquo`，如果出现 ldquo 和 rdquo 中的任何一个，它将不匹配

例如：

1.  这是一个`&lsquo sample &rdquo` -> 我需要在这里匹配 &lsquo 但由于 &rdquo 的出现，正则表达式不匹配

2.  这是`&ldquo a string &lsquo sample`->与第一个示例相同的问题

希望有人能帮助我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:19:05.450

未经测试，但试试这个

```
(?<!&ldquo.*)&lsquo(?!.*&rdquo) 
```

# jquery - 如何使用 jquery 和/或 asp.net 处理打印/打印队列？

> ID：12176019
> 
> 赞同：0
> 
> 时间：2012-08-29T10:35:47.947
> 
> 标签：jquery, asp.net, windows, printing

好吧，问题比较理论，所以代码不多。我所拥有的是一个页面`BookingSlip.aspx`和其他页面`BookingDetails.aspx`，其中有一个显示预订详细信息的网格视图，该网格的第一个列是链接到的超链接字段`BookingSlip.aspx`，将预订号作为查询字符串传递。在其中`BookingSlip.aspx`有一个`btn_Print`我简单调用的按钮，它`Window.Print`只是弹出用于打印的 Windows 对话框，当用户执行所需的步骤（单击确定，选择打印机等）时，Windows（或任何操作系统用户正在使用）句柄其余的部分。直到现在一切都很好。

但是我必须做的是允许用户选择多个预订号码`BookingDetails.aspx`（通过在gridview中添加一个复选框列，这不是问题，我已经这样做了），然后对于所有选定的项目，`BookingSlip.aspx`应该执行，也就是说，每个预订单都应该被打印，并且约束条件是，用户只看到一次 Windows 打印对话框，一旦他选择了适当的选项，所有项目（应该打印选择的项目）。

我想到了两件事。

1.  对于网格视图中的每个选定项目，打开`BookingSlip.aspx?BN={theSelectedBookingNumber}`然后一次性打印它们。问题在于，如果用户选择 10、12 或 20，那么在他们的浏览器中同时打开 12 个页面非常令人不快。另一个问题是我必须`window.Print`在单个页面上调用，并且窗口会弹出打印对话框 10、12 或 20 次（取决于选择的项目和打开的页面），这是我不想要的。

2.  其次是用类似的东西打开一个页面`BookingSlip.aspx?BN={theFirstSelectedBookingNumber}`，打印它，然后不要打开另一个页面，只需使用`Server.Transfer`或类似的东西打开`BookingSlip.aspx?BN={theSecondSelectedBookingNumber}`等等。
    问题是，如果我`Window.Print`在每次页面传输时调用，用户每次仍然会出现一个打印对话框，这是我不想要的。

所以，基本上我正在寻找一种方法，用户可以在打印对话框中指定默认值，并且使用这些默认值，将打印来自 gridview 的每个（选定）项目，而不是来自 gridview 的项目，而是页面`BookingSlip.aspx`将是为每个选定的预订号打印。

那么，有没有办法让所有这些打印件排队？或者除了我写的两个之外还有其他方法吗？如果我有点模糊，请发表评论，我会澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:03:49.213

您能否重构该`BookingSlip.aspx`页面，以便您可以传递多个预订号，然后该页面将显示每个提供的预订号的预订单？

这样，您只需打印一个网页而不是多个网页。

为了确保每个预订都出现在它自己的页面上，您可以`page-break-after`在合适的容器元素上使用 CSS 属性（`<div>...</div>`也许是一个）。有关在[此处](http://www.w3schools.com/cssref/pr_print_pageba.asp)`page-break-after`查看的基本教程。

# keyboard-shortcuts - Ctrl+Shift+f（代码格式）在 Eclipse Helios 中无法正常工作

> ID：12176020
> 
> 赞同：0
> 
> 时间：2012-08-29T10:35:49.840
> 
> 标签：keyboard-shortcuts, code-formatting, eclipse-3.6

当我尝试在 Eclipse Helios 中格式化代码时，按`ctrl`++ ，代码正在格式化，但结果非常难看。例如，一行中有两个或三个语句。压痕也很差。`shift``f`

例如：格式化代码后，它看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical" android:layout_width="fill_parent"
 android:layout_height="fill_parent" android:background="@drawable/scannerbg">

 <include android:id="@+id/headerLayout"
  android:layout_alignParentTop="true" layout="@layout/headerlayout" />

 <ListView android:layout_below="@id/headerLayout"
  android:layout_height="fill_parent" android:layout_marginTop="5dp"
  android:listSelector="@android:color/transparent" android:id="@+id/listView"
  android:layout_width="fill_parent">
 </ListView>

</RelativeLayout> 
```

正如您在 中看到的`ListView`，单行中有两到三个语句。

任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:52:30.853

在 Eclipse 中，从*Window*菜单中选择*Preferences*。展开*Android*节点，然后选择*Editors*子节点。在右侧窗格中，确保选中“*使用标准 Android XML 样式格式化 XML 文件。* ”（第一个选项），可能还有其他选项。

`Ctrl`+ `Shift`+`f`和/或`Ctrl`+`i`应该按预期工作并给出以下结果：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/scannerbg"
    android:orientation="vertical" >

    <include
        android:id="@+id/headerLayout"
        android:layout_alignParentTop="true"
        layout="@layout/headerlayout" />

    <ListView
        android:id="@+id/listView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/headerLayout"
        android:layout_marginTop="5dp"
        android:listSelector="@android:color/transparent" >
    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:02:11.900

使用 ADT 版本 20 进行完美格式化。

# c# - TinyMCE.MVC.Jquery 不会显示？

> ID：12176021
> 
> 赞同：3
> 
> 时间：2012-08-29T10:35:50.187
> 
> 标签：c#, asp.net-mvc-3, tinymce, visual-studio-2012, nuget-package

因此，在 Visual Studio 2012 中工作时，我下载了 TinyMCE.MVC.JQuery 包并使用 NuGet 安装它。安装后，我按照本教程进行设置：

[http://www.tugberkugurlu.com/archive/tinymce-html-text-editor-and-asp-net-mvc-setting-it-up-has-become-easy-with-nuget](http://www.tugberkugurlu.com/archive/tinymce-html-text-editior-and-asp-net-mvc-setting-it-up-has-become-easy-with-nuget)

我的项目是 MVC3 并且已经存在，所以有轻微的改动。

这是我的控制器创建功能：

```
 //
    // GET: /Pages/Create

    public ActionResult Create()
    {
        return View();
    } 

    //
    // POST: /Pages/Create

    [HttpPost, ActionName("Create")]
    public ActionResult Create(Database_Table database_table)
    {
        if (ModelState.IsValid)
        {
            db.Database_Table.Add(database_table);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(database_table);
    } 
```

我的编辑：

```
 //
    // GET: /Pages/Edit/5

    public ActionResult Edit(int id)
    {
        Database_Table database_table = db.Database_Table.Find(id);
        return View(database_table);
    }

    //
    // POST: /Pages/Edit/5

    [HttpPost, ActionName("Edit")]
    public ActionResult Edit(Database_Table database_table)
    {
        if (ModelState.IsValid)
        {
            db.Entry(database_table).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(database_table);
    } 
```

这是我的模型类：

```
public class Pages
{
    public int PageID { get; set; }
    public string PageURL { get; set; }

    [UIHint("tinymce_jquery_full"), AllowHtml]
    public string PageHTML { get; set; }

    public class DatabaseContext : DbContext
    {
        public DbSet<Database_Table> Pages { get; set; }
    }
} 
```

这是编辑视图：

```
@using (Html.BeginForm()) {

@Html.ValidationSummary(true)
<fieldset>
    <legend>Pages</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.PageURL)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PageURL)
        @Html.ValidationMessageFor(model => model.PageURL)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PageHTML)
    </div>
    <div class="editor-field">
         @Html.EditorFor(model => model.PageHTML)
        @Html.ValidationMessageFor(model => model.PageHTML)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p> 
```

_Layout.cshtml 中引用了这两个：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/tinymce/jquery.tinymce.js")" type="text/javascript"></script> 
```

抱歉，如果我很愚蠢，但是当我运行编辑页面时，所见即所得编辑器不显示，它只是一个标准文本框。谁能看到我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T23:33:51.167

确保您在页面的头部引用了 jQuery。或者在您的 HTML 编辑器之前的任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:46:10.077

你在你看来错过了这个：

tinyMCE.init({

所以：

```
<script type="text/javascript" src="/js/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
        // General options

.... 
```

或者，如果您使用的是 Jquery 插件，则需要这个（在您看来）：

```
<!-- Load jQuery build -->
<script type="text/javascript" src="../js/tinymce/jscripts/tiny_mce/jquery.tinymce.js"></script>
<script type="text/javascript">
        $(function() {
                $('textarea.tinymce').tinymce({
                        // Location of TinyMCE script
                        script_url : '../js/tinymce/jscripts/tiny_mce/tiny_mce.js',

                        // General options 
```

*记住：你的 textarea 标签需要 'tinymce' 类 =>

```
<textarea id="content" name="content" class="tinymce" style="width:100%">
</textarea> 
```

在他们的网站上查看示例。

# nsis - 在 NSIS 许可证页面上检测设置取消

> ID：12176022
> 
> 赞同：0
> 
> 时间：2012-08-29T10:35:52.180
> 
> 标签：nsis

我正在尝试检测用户在许可证页面上取消设置。我已经尝试过`Function .onInstFailed`，但它仅在安装被进一步中止时才被调用。当用户在许可页面取消时不会触发。这是可行的吗？这是我的脚本的顶部。**只有在点击I Agree**`licleave`时才会调用函数。

 **```
!include nsdialogs.nsh
!include MUI2.nsh
!define MUI_PAGE_CUSTOMFUNCTION_SHOW licshow
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE licleave
!insertmacro MUI_PAGE_LICENSE "license.txt"
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE "English" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:06:03.233

You can define your own `MUI_CUSTOMFUNCTION_ABORT` function to process the page cancel.

As suggested in that [NSIS forum thread](http://forums.winamp.com/showthread.php?t=330627), you could set a flag to 1 when entering the license page, and set it to 0 when leaving the page.

In the abort callback, test the flag: if set then you just canceling the license page.**

# asp.net-mvc-3 - 如果为空，则 webgrid 内的自定义消息使用 Asp.net Mvc3？

> ID：12176025
> 
> 赞同：2
> 
> 时间：2012-08-29T10:35:57.680
> 
> 标签：asp.net-mvc-3, webgrid

我想在下面的 else 语句中的 Web 网格内显示一条消息“未找到记录”。有人可以帮我弄这个吗？

```
<%      
var grid = new WebGrid(source: Model, defaultSort: "ProjectName", rowsPerPage: 5);
using (Html.BeginForm())
{ %> 
    <div class="resourcereprtsmain">
    <%:Html.Label("Project Name") %>
    <%: Html.DropDownList("Projects", (SelectList)ViewBag.Projects, "--Select Project--")%>   
    <br />
    <%:Html.Label("Release Phase") %>
    <%:Html.DropDownList("ReleasePhase", "--Select ReleasePhase--")%>                                      

    <input type="submit" value="search" />                            
    </div>                                                                  
    <div id="grid">
    <%:grid.GetHtml(
     tableStyle: "listing-border_c", headerStyle: "gridhead", footerStyle: "paging", rowStyle: "td-dark", alternatingRowStyle: "td-light",                            
     columns:grid.Columns(
     grid.Column("ProjectName", "Project Name"),
     grid.Column("ReleasePhase", "ReleasePhase"),
     grid.Column("Newbugs", "New Bugs"),
     grid.Column("Assignedbugs", "Assigned Bugs"),
     grid.Column("Fixedbugs", "Fixed Bugs"),
     grid.Column("Reopenedbugs", "Reopened Bugs"),
     grid.Column("Closedbugs", "Closed Bugs"),
     grid.Column("Defferedbugs", "Deffered Bugs"),
     grid.Column("NotaBug", "Not a Bug")                           
      ))%>
    </div>                  
<%} %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:40:47.587

## 在控制器代码中

```
 if (ds.Tables[0].Rows.Count == 0)
            {

                TempData["notice"] = "No Records are Not Found";

            }
            else
            {

            } 
```

## 在查看代码

```
<% if (TempData["notice"] != null) { %>
<p><label id="msgtext" >No Records Are Not found !!!!</label></p>
 <% } %> 
```

我得到了答案

# regex - 我在 GNU sed 中的前瞻正则表达式有什么问题？

> ID：12176026
> 
> 赞同：65
> 
> 时间：2012-08-29T10:36:02.230
> 
> 标签：regex, linux, sed, regex-lookarounds

这就是我正在做的（简化示例）：

```
gsed -i -E 's/^(?!foo)(.*)$/bar\1/' file.txt 
```

我试图把`bar`不以 . 开头的每一行放在前面`foo`。这是错误：

```
gsed: -e expression #1, char 22: Invalid preceding regular expression 
```

怎么了？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-08-29T12:31:16.967

```
sed -i '/^foo/! s/^/bar/' file.txt 
```

*   `-i`就地更改文件
*   `/^foo/!``!`仅对不以*foo*开头的行执行下一个操作 *`^foo`*
**   `s/^/bar/`将行的开头更改为 bar  *

 ** * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-08-29T10:40:22.477

据我所知`sed`，既不是向前看也不是向后看。切换到具有相似语法的更强大的语言，例如`perl`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-29T11:39:47.627

您使用 GNU sed 不支持的 perl 兼容正则表达式 (PCRE) 语法。您应该根据 SED[正则表达式重写您的正则表达式](http://www.gnu.org/software/sed/manual/html_node/Regular-Expressions.html)或`perl`改用它。

请注意，SED 没有前瞻功能，因此不支持您尝试使用的正则表达式功能。正如其他人所提到的，它可以在 SED 中使用其他功能来完成。*

# javascript - 如何查看是否在 Javascript 中定义了变量名

> ID：12176027
> 
> 赞同：0
> 
> 时间：2012-08-29T10:36:07.457
> 
> 标签：javascript, variables

在 Javascript 中，我定义了全局变量 sld_label，其中 label 可以是任何字符串。这些被初始化为具有 setval 函数的对象。我需要在一个名为 qq 的字符串参数中传递标签的函数中检查 sld_label 是否已定义。**如何在不引发错误的情况下执行此操作？**

目前我有以下（有效但在Firebug中产生错误）： -

```
function setclrques(qq,op)
{
  if (typeof(eval('sld_'+qq))=='object') eval('sld_'+qq+'.setval('+op+')');
} 
```

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:38:00.027

如果是全局的，则它最终成为 的成员`window`，因此以下工作：

```
if (typeof window['sld_' + qq] == 'undefined') alert('sld_' + qq + ' is not defined.'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:49:35.767

我实现了这样的东西。

```
function Test()
{
}

Test.prototype.setval = function(options)
{
    alert(options);
}

function setclrques(qq,op)
{
    var obj = window['sld_'+qq];
    if( obj!=undefined && obj.setval!=undefined )
    {
        obj.setval(op);
    }
}

var sld_qwer = new Test();
setclrques("qwer","test!"); 
```

但是，如果可能，我建议您考虑使用关联数组而不是单独的变量来存储对象：

```
function Test()
{
}

Test.prototype.setval = function(options)
{
    alert(options);
}

var sld = [];
sld["qwer"] = new Test();

function setclrques(qq,op)
{
    var obj = sld[qq];
    if( obj!=undefined && obj.setval!=undefined )
    {
        obj.setval(op);
    }
}

setclrques("qwer","test!"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:38:18.673

```
if (typeof window["sld_" + qq] === "object") {
    window["sld_" + qq].setval(op);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:39:21.027

如果要检查变量是否存在

```
if (typeof yourvar != 'undefined') // Any scope
if (window['varname'] != undefined) // Global scope
if (window['varname'] != void 0) // Old browsers 
```

# javascript - 使用css格式化div

> ID：12176028
> 
> 赞同：0
> 
> 时间：2012-08-29T10:36:09.653
> 
> 标签：javascript, css, sencha-touch, extjs

如何在 Sencha 中格式化 html 中的 div？我想在我的 html 上实现以下属性

```
#logo{
    position:absolute;
    top:20%;
    left:0%;
} 
```

我的 Sencha 代码示例在这里

```
Ext.application({
    name: 'Sencha',
    launch: function() {
        Ext.create("Ext.tab.Panel", {
            fullscreen: true,
            tabBarPosition: 'bottom',items: [
                {
                    title: 'Home',
                    iconCls: 'home',
                    cls: 'home',
                    html: [
                       '<div id="logo">My logo here</div>'
                    ].join("")
                }
               ]
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:22:33.490

您可以将其作为内联 css

```
<div id="logo" style="position:absolute;top:20%;left:0%"> 
```

# java - HashMap中的哈希方法

> ID：12176031
> 
> 赞同：1
> 
> 时间：2012-08-29T10:36:12.503
> 
> 标签：java

> **可能重复：**
> [HashMap#hash(int) 方法的解释](https://stackoverflow.com/questions/2414117/explanation-of-hashmaphashint-method)

```
 /**
    * Applies a supplemental hash function to a given hashCode, which
    * defends against poor quality hash functions.  This is critical
    * because HashMap uses power-of-two length hash tables, that
    * otherwise encounter collisions for hashCodes that do not differ
    * in lower bits. Note: Null keys always map to hash 0, thus index 0.
    */
   static int hash(int h) {
       // This function ensures that hashCodes that differ only by
       // constant multiples at each bit position have a bounded
       // number of collisions (approximately 8 at default load factor).
       h ^= (h >>> 20) ^ (h >>> 12);
       return h ^ (h >>> 7) ^ (h >>> 4);
   } 
```

谁能详细解释一下这个方法，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:53:27.307

设计通用哈希码的问题之一是，您将所有这些努力都用于确保比特的良好分布，然后有人出现并以完全撤消的方式使用它。

让我们举一个坐标类的经典例子，它有一个 X 和一个 Y，都是整数。

这是一个经典的例子，因为人们会用它来证明这`X ^ Y`不是一个好的哈希码，因为通常有几个对象 X == Y（所有哈希为 0）或 X 和 Y 是 Y 和 X其他（将散列相同）以及我们最终得到相同散列码的其他情况。

归结为一个事实，虽然整数的可能范围涵盖 40 亿个值，但在 99% 的使用中，它们往往少于几百或最多几万个。我们永远无法避免在 40 亿个可能的结果中分散 18 万亿个可能的值，但我们可以努力使那些我们可能实际看到的结果不太可能发生冲突。

现在，`(X << 16 | X >> 16) ^ Y`在这种情况下做得更好，将来自 X 的位分散得更多。

不幸的是，如果使用这个散列是`% someBinaryRoundNumer`为了索引到一个表中（或者甚至`% someOtherNumber`，在稍微较小的程度上），那么对于下面的 X 值`someBinaryRoundNumber`- 我们可以预期这是最常见的 - 这个散列变得有效`return Y`。

我们所有的努力都白费了！

使用的rehash是用这样的逻辑做一个hash，稍微好一点。

值得注意的是，对这种`(X << 16 | X >> 16) ^ Y`方法过于挑剔是不公平的，因为散列的另一种用途可能使这种形式优于给定的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:54:08.937

好吧，不要进入细节，但是：

*   由于 hascode() 和 equals() 合约，hashcode 函数的糟糕实现可能导致不同的实例具有相同的 hashcode。这意味着您可能有一个具有蹩脚的 hashcode() 方法实现的类，这样该类的 equals() 方法将为 A 和 B 实例返回 false （这意味着它们从业务逻辑的角度来看是不同的）但是 hashcode() 方法为实例 A 和 B 返回相同的值。同样，根据 hashcode() 和 equals() 合约，这在技术上是有效的，但不是很合适

*   在类似 Hashtable 的结构（如 HashMap）中，“桶”用于根据其哈希码将实例放置在地图内。如果两个实例具有相同的 hashcode() （但根据 equas() 方法不同），它们将被放置在同一个桶中。从性能的角度来看，这很糟糕，因为当您遇到很多此类情况时，您会失去一些类似于 Hashtable 的结构固有的检索速度。被称为碰撞。发生的情况是，如果稍后有人使用“搜索”实例从哈希映射中检索某些内容，并且相应的哈希存储桶有多个占用者，则必须使用 equals() 方法检查该存储桶中的每个元素以找出哪个是需要检索的。

*   该 hash(int n) 方法为现有的 hashcode() 值添加了一些额外的东西，以防御这种情况。

# c# - 在连接字符串中使用 App_Data

> ID：12176035
> 
> 赞同：11
> 
> 时间：2012-08-29T10:36:37.203
> 
> 标签：c#, asp.net-mvc, sqlite

简单的东西，我想使用 App_Data 作为我的数据库存储文件夹。

**如何在我的 connString 中引用 App_Data。**

```
<add name="ConnectionString" connectionString="Data Source=mydb.sqlite; ..." /> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-29T10:40:02.757

```
<add name="ConnectionString" 
connectionString="Data Source=|DataDirectory|\MyDb.sqlite;......" /> 
```

该`|DataDirectory|`令牌将扩展为`App_Data`Web 应用程序根目录下的文件夹。

# haskell - ScopedTypeVariables 无法使用嵌套的 where 子句？

> ID：12176037
> 
> 赞同：4
> 
> 时间：2012-08-29T10:36:44.570
> 
> 标签：haskell, type-variables

这是一个非常人为的例子，但无论如何......这个类型检查：

```
newtype Foo c = Foo { runFoo :: c -> Bool }
newtype Bar c = Bar { runBar :: Int -> c }

foo :: Eq c => Bar c -> (c -> [c]) -> Bar (Foo c)
foo bar f = Bar res
 where res n = Foo judge
        where judge c = (c`elem`) . f $ runBar bar n 
```

和作品

> GHCi> let foo0 = foo (Bar id) (\n -> [n, n*2])
> GHCi> map (runFoo $ runBar foo0 4) [1..10]
> [False,False,False,True,False,假，假，真，假，假]

但是如果我将明显的类型签名添加到本地函数`judge`中，

```
foo :: Eq c => Bar c -> (c -> [c]) -> Bar (Foo c)
foo bar f = Bar res
 where res n = Foo judge
        where judge :: c -> Bool
              judge c = (c`elem`) . f $ runBar bar n 
```

它失败了

```
Could not deduce (c ~ c2)
from the context (Eq c)
  bound by the type signature for
             foo :: Eq c => Bar c -> (c -> [c]) -> Bar (Foo c) 
```

等等。在 Haskell 98 中并不令人惊讶，但我认为`ScopedTypeVariables`应该允许编写这样的签名，但显然它没有。这是否有特定原因，是否有意使其不适用于嵌套`where`的 s，如果这出现在可比较的实际问题中，有什么解决方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T10:41:08.330

显然你忘记了将类型变量`c`带入范围`forall`，

```
{-# LANGUAGE ScopedTypeVariables #-}
module Foobar where

newtype Foo c = Foo { runFoo :: c -> Bool }
newtype Bar c = Bar { runBar :: Int -> c }

foo :: forall c. Eq c => Bar c -> (c -> [c]) -> Bar (Foo c)
foo bar f = Bar res
 where res n = Foo judge
        where judge :: c -> Bool
              judge c = (c`elem`) . f $ runBar bar n 
```

编译得很好。

`ScopedTypeVariables`本身不会将签名中的类型变量带入范围，只有那些具有显式的变量才会`forall`带入范围。

# wpf - WPF 异常 WindowStyle.None

> ID：12176039
> 
> 赞同：3
> 
> 时间：2012-08-29T10:36:53.807
> 
> 标签：wpf, xaml, exception, transparency, window-style

我有这样的 MainAppWindow XAML：

```
<local:MyWindow
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
... 
xmlns:local="clr-namespace:MyNamespace" 
xmlns:System="clr-namespace:System;assembly=mscorlib"
x:Class="MyNamespace.MainAppWindow"
x:Name="MyWindow"
....
AllowsTransparency="True"> 
```

最后我得到了这个奇怪的异常：![在此处输入图像描述](../Images/9220aaeaeed249182ac4200a929e3b1b.png)

注意一些重要的事情：

*   在 Watch 窗口中，WindowStyle 是 ThreedBorderWindow
*   MainAppWindow.AllowTransparency 已被 XAML 定义为 True。

这是 WPF 错误吗？原因是什么？有解决办法吗？有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:40:40.593

它没有*准确地*告诉你要求吗？更改`WindowStyle`为`None`，就是这样。

# javascript - 如何以编程方式正确创建 javascript webresource

> ID：12176040
> 
> 赞同：2
> 
> 时间：2012-08-29T10:36:52.977
> 
> 标签：javascript, dynamics-crm-2011, webresource

我是 crm 新手，所以请原谅我的误解或不幸。

我正在尝试使用这样的 OrganizationServiceproxy 以编程方式创建 web 资源（准确地说是 javascript 或 jscript）早期绑定

```
 var context = new OrganizationServiceContext(service);

          var resource = (from wr in context.CreateQuery<WebResource>()
                          where wr.Name == name && wr.ComponentState.Value == 0
                          select wr).FirstOrDefault();

                if (resource == null)
                {
                  WebResource javascriptWebResource = new WebResource()
                        {
                            Name = name,
                            Description = name,
                            LogicalName = name,
                            DisplayName = value,
                            Content = Convert.ToBase64String(fileBytes),
                            WebResourceType = new OptionSetValue(3)

                        };
                    //context.AddObject(javascriptWebResource);
                    //context.SaveChanges();
                     service.Create(javascriptWebResource);
                }
                else
                {
                 //update the webresource
                 } 
```

我的问题是 - 我是否需要设置比当前设置更多的实体元数据才能成功创建 Web 资源？

创建代码没有引发任何错误，但是我在指定解决方案的 crm 服务器上找不到我新创建的 javascript webresource。我猜想它是在将网络资源添加到默认解决方案中，因此我搜索了网络并在 sdk 中发现了一个示例，如下所示

```
 Guid theGuid = _serviceProxy.Create(wr);

                //If not the "Default Solution", create a SolutionComponent to assure it gets
                //associated with the ActiveSolution. Web Resources are automatically added
                //as SolutionComponents to the Default Solution.
                if (ActiveSolution.UniqueName != "Default")
                {
                    AddSolutionComponentRequest scRequest = new AddSolutionComponentRequest();
                    scRequest.ComponentType = (int)componenttype.WebResource;
                    scRequest.SolutionUniqueName = ActiveSolution.UniqueName;
                    scRequest.ComponentId = theGuid;
                    var response = (AddSolutionComponentResponse)_serviceProxy.Execute(scRequest);
                } 
```

我的问题是 - 如果我检索 solutionuniquename 那么它会在适当的解决方案中创建 Web 资源并且我能够在 crm 服务器上看到 javascript Web 资源吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:24:51.030

我知道这已经很晚了，但是如果 js 在 crm 系统中不存在，我会通过发送 createrequest 来解决它，或者如果 js 已经存在，则通过将 js 与特定解决方案相关联来解决它。顺便说一句，当您在 crm 中创建 js 时，它会同时添加到默认解决方案和您要更新的解决方案中。

# t4 - EnvDTE not found in VS2012 适用于 VS2010

> ID：12176042
> 
> 赞同：16
> 
> 时间：2012-08-29T10:36:56.820
> 
> 标签：t4, visual-studio-2012, envdte

我正在使用 EnvDTE 在我的 T4 模板中生成一些代码。

我的代码在 Visual Studio 2010 中正常工作，但是我刚刚开始使用 Visual Studio 2012，现在当我尝试运行我的模板时出现以下错误

```
Compiling transformation: Metadata file 'EnvDTE.dll' could not be found 
```

实际上，我的项目中没有对 EnvDTE 的引用，因为它是 Silverlight 类库，我无法添加 DLL，但是它以某种方式找到了 DLL。

我不确定 10 和 12 之间有什么区别导致这种情况。

以下是我的 ttinclude 文件开头的导入和程序集定义。

```
<#@ template debug="true" hostSpecific="true" #>
<#@ output extension=".generated.cs" #>
<#@ Assembly Name="EnvDTE.dll" #>
<#@ Assembly Name="System.Data" #>
<#@ import namespace="EnvDTE" #>
<#@ import namespace="System.Data" #>
<#@ import namespace="System.Data.SqlClient" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Text.RegularExpressions" #> 
```

有什么我必须做的不同才能让它适用于 Visual Studio 2012

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T16:06:15.880

看来 VS12 无法确定 EnvDTE 在哪里。奇怪的是（正如您在评论中提到的那样）融合并没有接受这一点。也许确实如此，但您没有正确阅读它？

顺便说一句，当融合日志让你失望时，当你无法弄清楚为什么应用程序找不到应该存在的东西时，是时候打破进程监视器了。

您可以为 T4 模板中的程序集引用提供完整路径。在你的情况下，这将是

`<#@ Assembly Name="C:\Program Files (x86)\Common Files\microsoft shared\MSEnv\PublicAssemblies\envdte.dll" #>`

（假设您在正确的位置有 EnvDTE）。我不会认为这是一个真正的解决方案，并且会就此向 MS 提出 Connect 问题。似乎是一个错误。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-24T13:53:04.603

在遇到同样的错误后，我进行了更深入的搜索，发现[了这个 Microsoft Connect 条目](http://connect.microsoft.com/VisualStudio/feedback/details/776194/vs-2012-is-unable-to-locate-envdte-dll-from-t4-template-file)。

要解决此问题，只需`.dll`从程序集名称中删除 ，它就可以按预期工作：

```
<#@ Assembly Name="EnvDTE" #> 
```

还要确保`EnvDTE`程序集位于 GAC 内的`C:\Windows\assembly`. 这通常会在您在计算机上安装 Visual Studio 时自动发生。

### 例子

这是一个开箱即用的示例：

```
<#@ template language="C#" debug="true" hostSpecific="true" #>
<#@ output extension=".txt" #>
<#@ Assembly Name="System.Core" #>
<#@ Assembly Name="System.Design" #>
<#@ Assembly Name="System.Drawing" #>
<#@ Assembly Name="System.Windows.Forms" #>
<#@ Assembly Name="EnvDTE" #>
<#@ import namespace="System" #>
<#@ import namespace="System.CodeDom.Compiler" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.Drawing" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Resources" #>
<#@ import namespace="System.Resources.Tools" #>
<#@ import namespace="EnvDTE" #>
<#@ import namespace="Microsoft.CSharp" #>

All projects currently available within this solution:
<#
    //System.Diagnostics.Debugger.Launch();

    EnvDTE.DTE dte = (EnvDTE.DTE)((IServiceProvider)this.Host)
                       .GetService(typeof(EnvDTE.DTE));

    EnvDTE.Projects projects = dte.Solution.Projects;

    foreach (EnvDTE.Project project in projects)
    {
#>
        <#= project.Name #>
<#
    }
#>

This file was generated at: <#= System.DateTime.Now.ToShortDateString() #> <#= DateTime.Now.ToLongTimeString() #> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-03T16:10:47.650

在加载应用程序时，我在 Visual Studio 2019 上遇到了与 EnvDTE80 相关的问题。错误显示以下消息：“Reference.svcmap：无法加载文件或程序集“'EnvDTE”，版本=8.0.0.0，文化=中性...”

我清理了解决方案并安装了 8.0.0.0 版的 nuget 包。然后重建解决方案。通过这种方式，我的视觉工作室能够加载应用程序。

# php - 如何限制命令行应用程序可以在 Linux 网络服务器上使用的资源

> ID：12176043
> 
> 赞同：2
> 
> 时间：2012-08-29T10:36:56.177
> 
> 标签：php, linux, resources, webserver

这是这种情况：

我有一个（php/mysql）Web 应用程序，它可以进行一些 pdf 处理和缩略图创建。这是通过在服务器上使用一些第 3 方命令行软件来完成的。这两种处理都消耗大量资源，以至于阻塞服务器。我想限制这些应用程序可以使用的资源量，以使服务器能够在没有太多延迟的情况下继续为用户提供服务，因为现在当处理一些繁重的 pdf 时，我的用户没有得到任何响应。

是否可以限制应用程序可以使用的 RAM 和 CPU 量（所有进程组合）？还是有其他方法来处理这些情况？这通常是怎么做的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:37:59.753

用于`ulimit`设置资源限制。“硬”限制是最大的、操作系统强制的资源限制，一旦设置就无法增加。“软”限制是您的进程可以随意更改但不能超过硬限制的建议最大值。

例如，要防止`script.sh`使用超过 256MB 的虚拟内存：

```
ulimit -H -v $((2*1024*1024))
./script.sh 
```

将此构建到您的 PHP 脚本中，该脚本在命令行上执行该过程。

# php - PHP 使用 str_word_count 和 strsplit 在 x 个单词后形成数组

> ID：12176053
> 
> 赞同：1
> 
> 时间：2012-08-29T10:37:42.160
> 
> 标签：php, string, strsplit

我有一个大字符串，我想在每 50 个单词之后放入一个数组。我考虑过使用 strsplit 进行剪切，但意识到不会考虑单词，只是在到达 x char 时拆分。

我已经阅读了有关 str_word_count 的信息，但不知道如何将两者放在一起。

我现在得到的是：

```
$outputArr = str_split($output, 250);

foreach($outputArr as $arOut){

echo $arOut;
echo "<br />";

} 
```

但我想用 50 个单词而不是 250 个字符来替换它以形成数组的每个项目。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:44:01.200

假设这`str_word_count`足以满足您的需求¹，您可以简单地将其`1`作为第二个参数调用，然后用于`array_chunk`将单词分组为 50 个：

```
$words = str_word_count($string, 1);
$chunks = array_chunk($words, 50); 
```

你现在有一个数组数组；将每 50 个单词连接在一起，使其成为您可以使用的字符串数组

```
foreach ($chunks as &$chunk) { // important: iterate by reference!
    $chunk = implode(' ', $chunk);
} 
```

¹ 很可能不是。如果您想在处理书面语言时获得大多数人认为可接受的结果，您将不得不使用[`preg_split`](http://php.net/manual/en/function.preg-split.php)一些合适的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:24:01.177

还有另一种方式：

```
<?php

$someBigString = <<<SAMPLE
  This, actually, is a nice' old'er string, as they said, "divided and conquered".
SAMPLE;

// change this to whatever you need to:     
$number_of_words = 7; 

$arr = preg_split("#([a-z]+[a-z'-]*(?<!['-]))#i", 
  $someBigString, $number_of_words + 1, PREG_SPLIT_DELIM_CAPTURE);

$res = implode('', array_slice($arr, 0, $number_of_words * 2));
echo $res; 
```

[演示](http://codepad.org/GuPiSSnS)。

我认为这里`preg_split`有一个更好的工具（比`str_word_count`）。不是因为后者不灵活（不是：你可以用它的第三个参数定义什么符号可以组成一个词），而是因为`preg_split`在获得 N 个项目后基本上会停止处理字符串。

这个函数很常见的技巧是捕获分隔符，然后使用它们来重建字符串，其中包含前 N 个单词（其中 N 给出）并保存标点符号。

（当然，我的示例中使用的正则表达式并不严格遵守与`str_word_count`语言环境相关的行为。但它仍然限制单词由字母`'`和`-`符号组成，后两者不在任何单词的开头和结尾）。

# java - 必须按两次后退按钮才能转到上一个活动

> ID：12176055
> 
> 赞同：0
> 
> 时间：2012-08-29T10:37:45.250
> 
> 标签：java, android, eclipse

我对Android很陌生，所以请耐心等待。

当您开始一项新活动时，默认情况下，设备上的“后退”按钮应将您带回到上一个活动。
就我而言，我必须按两次后退按钮才能返回上一个活动。

请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:39:41.483

```
private int count = 0;

@Override
public void onBackPressed() {
    count++;
    if (count == 2) {
        //Do your stuff here
        count = 0;
    }    
} 
```

# c++ - OCIDefineByPos() 与 OCINumbers

> ID：12176063
> 
> 赞同：0
> 
> 时间：2012-08-29T10:38:11.057
> 
> 标签：c++, oracle-call-interface

我正在使用 OCI 开发 C++ 应用程序。我需要从数据库中获取数据到 OCINumber。我对如何将 OCIDefineByPos() 函数与 OCINumbers 一起使用感到困惑。有人可以帮我弄这个吗。

下面给出的是我调用 OCIDefineByPos 函数的代码部分。pStmt 是 OCIStmt*，p_Error 是 OCIError*。使用以下函数指针。

```
1\. pf_OCINumberFromReal = function pointer to OCINumberFromReal
2\. pf_OCINumberToReal  = function pointer to OCINumberToReal
3\. pf_DefineByPos = function pointer to OCIDefineByPos.

OCINumber ocinTest;
long double dnum = 0.0;

(*pf_OCINumberFromReal)(p_Error, &dnum, sizeof(dnum), &ocinTest);
int iLength1 = sizeof(ocinTest);

OCIDefine* pDfn = NULL;
iRet = (*pf_DefineByPos)(pStmt, &pDfn, p_Error, 1, (dvoid *) &ocinTest,
    (sword) iLength1, SQLT_NUM, (dvoid *) 0, (ub2 *)0,
        (ub2 *)0, OCI_DEFAULT);
if (iRet == OCI_SUCCESS)
{
    (*pf_OCINumberToReal)(p_Error, &ocinTest, sizeof(dnum), &dnum);
    std::cout <<std::fixed << std::setprecision (10) << dnum << std::endl;
} 
```

尽管 iRet = OCI_SUCCESS 它没有正确获取数据库中的值。（使用 pStmt 定义的 sql 查询的值）。即使在通话之后，dnum 也是 0.0。这个 pf_DefineByPos 适用于其他数据类型，例如 int 、double 等。

所以有人可以帮我找到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:19:23.347

如果您的代码没有完全脱离上下文，那么您缺少几个基本部分。

典型的 OCI 程序包括以下步骤：

1.  准备 SQL 语句 (OCIStmtPrepare)

2.  将结果列或输出参数绑定到将接收结果值的变量 (OCIDefineByPos)

3.  执行语句 (OCIStmtExecute)

4.  对结果做点什么

在我看来，您正在跳过第 3 步，并在第 2 步之后期待一些结果。但是第 2 步没有获取任何数据。它只是在查询结果和您的变量之间创建关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T23:08:41.373

你需要`DefineByPos`for `OCINumber`with `SQLT_VNU`type 而不是`SQLT_NUM`.

# java - Java App 的 System Try 图标在窗口登录后不显示

> ID：12176067
> 
> 赞同：0
> 
> 时间：2012-08-29T10:38:23.363
> 
> 标签：java

> **可能重复：**
> [java 1.6 SystemTray 图标在 Windows 启动时不出现](https://stackoverflow.com/questions/1509158/java-1-6-systemtray-icon-does-not-appear-on-windows-startup)

我有 java 应用程序，它在窗口操作系统中创建系统尝试图标。当我手动启动时，它运行良好。但是现在我把我的应用程序放到窗口启动意味着我的应用程序应该在没有登录的窗口启动时运行。

但问题是我的应用程序已启动并执行那里的任务，但当有人登录时它没有添加系统托盘图标。

甚至我注意到，在窗口启动时，我的应用程序成功创建了 TrayIcon 对象，创建了 MenuItem，添加了弹出窗口，甚至添加了托盘图标，`tray.add(trayIcon);`甚至在窗口启动时没有任何异常，但是当我登录时

它没有显示在系统尝试与时间，土地卡图标。

我希望它应该在某些登录时创建尝试图标，就像我们登录时一样，当我们登录时出现 lancard 托盘图标。

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:50:00.367

我猜你有时间问题。您的应用程序启动速度过快，并在操作系统创建系统托盘之前添加了系统托盘图标。

首先尝试调用`SystemTray.getTrayIcons()`并将其输出打印到日志中。如果您的图标确实没有出现在列表中，那么您很幸运。您可以尝试添加图标，直到它出现在托盘中。

如果它“出现”在列表中但您看不到它，请尝试以下操作。在添加系统托盘之前添加一些延迟。如果它有助于添加更新系统的线程，请定期尝试。这不是很好的解决方案，但即使用户重新启动他的桌面，它仍然可以工作（我不确定在 Windows 中是否可行，但在 linux 上肯定可行）。

# javascript - Javascript setTimeout 函数开始执行太多次

> ID：12176073
> 
> 赞同：4
> 
> 时间：2012-08-29T10:39:06.383
> 
> 标签：javascript, settimeout, intervals

我用 setTimeout 函数创建了一个循环，它在第 2 步或第 3 步后出现问题，它自己调用，因为它同时开始执行两次。这就是我的函数的样子：

```
var value = 70, 
    intervalID = null;

function interval() {
  intervalID = setTimeout(countDown, 1000);
}

function countDown() {
  value--;
  if(value > 0) {
    clearTimeout(intervalID);
    interval();
  } else {
    endInterval();
  }
}

function endInterval() {
  // do something
} 
```

如果我控制台变量值是 69、68，然后它在一个函数调用中开始两次减小变量值。我不会在任何地方调用函数 countDown()，而是从一个地方调用。

![Javascript 间隔](../Images/2bdbf64821c7ff8f475a3d3d318bae82.png) 可能是什么问题呢？

编辑：此代码现在有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T11:17:25.593

我建议您通过停止前一个超时来“清理”超时。

```
function interval() {
  clearTimeout(intervalID);
  intervalID = setTimeout(countDown, 1000);
} 
```

然而，它看起来像是控制症状而不是疾病的原因。因此，最好找出问题的原因。

# android - 带有文本和图像的自定义列表视图

> ID：12176075
> 
> 赞同：0
> 
> 时间：2012-08-29T10:39:17.080
> 
> 标签：android, listview, asynchronous

我开发了一个列表视图，列表视图显示图像和文本。第一次必须从网络服务下载图像和文本，然后必须显示，因为它需要更多时间，所以我们认为第一次在列表视图中绑定文本并使用`AsyncTask`，一旦图像下载图像将显示在活动背景的列表视图中。但我无法做到这一点，我已经完成了一些编码，它下载所有图像，然后绑定图像和文本（在这种情况下，我们需要在 startDownload 之前第一次绑定列表视图两次图像和下载图像后的第二个。所以如果有任何想法请建议我。

**代码**

```
public class LoadImg extends AsyncTask<String, Void, Bitmap> {
    Context context;
    String img;
    InputStream is = null;
    Bitmap bitmap = null;

    public LoadImg(Context context, String img) {
        // TODO Auto-generated constructor stub
        this.context = context;
        this.img = img;
    }

    @Override
    protected Bitmap doInBackground(String... params) {
        // TODO Auto-generated method stub
        Bitmap bitmap = downImg();
        System.out
                .println("Value of bitmap====================================="
                        + bitmap);
        return bitmap;
    }

    private Bitmap downImg() {
        // TODO Auto-generated method stub
        Bitmap bitmap = null;
        if (img == null) {
            bitmap = null;
        } else {

            URL url = null;
            try {
                url = new URL(img);

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

            }
            URLConnection connection = null;
            try {

                connection = url.openConnection();

            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            try {
                is = connection.getInputStream();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            bitmap = BitmapFactory.decodeStream(is);
            System.out.println("TV Image===" + bitmap);
        }

        return bitmap;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:46:37.237

试试这个[例子](http://www.androidchennai.blogspot.in/2012/03/android-listview-example.html)或使用任何这样的适配器

> WeatherAdapter.java

```
public class WeatherAdapter extends ArrayAdapter<Weather>{

Context context;
int layoutResourceId;   
Weather data[] = null;

public WeatherAdapter(Context context, int layoutResourceId, Weather[] data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    WeatherHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new WeatherHolder();
        holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
        holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

        row.setTag(holder);
    }
    else
    {
        holder = (WeatherHolder)row.getTag();
    }

    Weather weather = data[position];
    holder.txtTitle.setText(weather.title);
    holder.imgIcon.setImageResource(weather.icon);

    return row;
}

static class WeatherHolder
{
    ImageView imgIcon;
    TextView txtTitle;
}
} 
```

# vb.net - 杀死进程winword

> ID：12176076
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:39:17.210
> 
> 标签：vb.net, multithreading, ms-word, kill-process

为了检查进程是否挂起 Word，通过 VB.Net 2003 项目，我创建了一个线程来进行进程控制（有问题）。如果在一定数量的毫秒后该进程仍然处于活动状态，我会从线程中终止该进程。系统告诉我“System.ComponentModel.Win32Exception”，“拒绝访问”

代码如下：

这是代码Vb：

```
Imports  System
Imports  System.Threading
Imports  System.Threading.Thread
Imports  System.Security.Permissions
Public Class  ThreadMain
Public  strdotName AsString
Public  strdocName AsString
Public  sXML AsString
Public  idProcesso AsInteger
Public  terminate AsInteger
Public docName AsString
Public  kk AsInteger
Public  finito AsBoolean= False
Public Function LaunchThread() AsInteger
Dim myT2 As Threading.Thread
myT2 = New Threading.Thread(AddressOfMe.DoWork)
myT2.IsBackground = True
myT2.Start()
Try
Console.WriteLine("Finito: {0}", finito)
Catch  Ex As  Exception
End Try
Return terminate
End Function
*-------**
Private Sub DoWork()
Dim  j AsInteger
Dim  errore AsString
Dim  trovato AsBoolean
Dim  colProcess AsProcess
Dim  nomeProcess AsProcess()
Dim  chiusura AsBoolean
Try
For  j = 100 To  20000
colProcess = Process.GetProcessById(idProcesso)
If  Not  colProcess IsNothingThen
j = j + 1000
System.Threading.Thread.Sleep(1)
trovato = True
Else
trovato = False
End If
Next
If  trovato Then
chiusura = colProcess.CloseMainWindow()
colProcess.Close()
Process.GetProcessById(idProcesso).Kill()
terminate = 1
End If
Catch ex As Exception
errore = ex.ToString
terminate = 2
End Try
End Sub 'DoWork 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:19:50.777

“idProcesso”变量未在代码中的任何位置分配。这可能意味着它的价值仍然为零。这意味着您正在尝试终止“系统”进程。这是一个封装了 Windows 内核组件的假进程。像这样杀死 Windows 是不可能的，无论您的用户权限如何，您总是会收到 AccessDenied 异常。

您需要使用 Process.GetProcessesByName() 来定位特定进程。

如果这是在您使用 Microsoft.Office.Interop.Word 命名空间时让 Word 退出的一种解决方法，那么这只是用未处理的异常终止您自己的程序的好方法。或者就此而言，用户正在使用的另一个 Word 实例。她不会很感激失去她的工作。

# python - Python批量空白文件夹创建

> ID：12176078
> 
> 赞同：2
> 
> 时间：2012-08-29T10:39:18.403
> 
> 标签：python, python-3.x

我正在尝试基于简单的文本文件创建批量文件夹。`os.makedir`有助于创建新文件夹，但我不确定如何将 newpath 变量与文件夹列表合并。以下是我正在尝试的。我知道代码有语法错误。所以需要一些帮助来纠正/增强代码。

```
import os.path  
newpath = r'C:\Program Files\test\'  
with open('folders.txt') as f:  
    for line in f:  
        ff = os.makedirs(newpath,line.strip())  
        ff.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:46:54.273

使用[os.path.join](http://docs.python.org/library/os.path.html#os.path.join)加入路径组件。

```
import os.path  
newpath = r'C:\Program Files\test\'  
with open('folders.txt') as f:  
    for line in f:  
        os.makedirs(os.path.join(newpath, line.strip())) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:42:26.910

您可以使用[此处](http://docs.python.org/library/os.path.html)记录的 os.path.join 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T10:43:37.547

也许是这样的？

```
import os, sys
newpath = 'C:\Program Files\test'
with open(open('folders.txt') as f:
  for line in f:
    newdir = os.path.join(newpath, line.strip())
    try:
      os.makedirs(newdir)
    except OSError:  # if makedirs() failed
      sys.stderr.write("ERR: Could not create %s\n" % newdir)
      pass  # continue with next line 
```

笔记：

*   用于[`os.path.join()`](http://docs.python.org/library/os.path.html#os.path.join)组合路径。这将自动使用适合您的操作系统的分隔符。
*   [`os.makedirs()`](http://docs.python.org/library/os.html#os.makedirs)不返回任何东西
*   `os.makedirs()`[`OSError`](http://docs.python.org/library/exceptions.html#exceptions.OSError)如果目录已存在或无法创建，将引发异常。

# jquery - 使用 jquery 验证后无法提交表单（使用 preventDefault()）

> ID：12176080
> 
> 赞同：0
> 
> 时间：2012-08-29T10:39:27.727
> 
> 标签：jquery, validation

```
<script type="text/javascript">
$(document).ready(function(){
$('#addprojectform').live('submit', function (e) {
    e.preventDefault();
     $(".error").remove();   

    var startdate = $("#startdate").val();
    var client = $('#client').val();
    var source_lang= $('#source_lang option:selected').length;
    var targ_lang = $('#targ_lang option:selected').length;
    var qty = $('#qty').val();

    var hasError = false;

   if(startdate == '') {
  $("#startdate").after('<span class="error" style="color: red;">This field is     required.</span>');
  hasError = true;
}

if(client == '') {
  $("#client").after('<span class="error" style="color: red;">This field is required.  </span>');
  hasError = true;
}

if(!(source_lang)) {
  $("#source_lang").after('<span class="error" style="color: red;">This field is required.</span>');
  hasError = true;
}

if(!(targ_lang)) {
  $("#targ_lang").after('<span class="error" style="color: red;">This field is required.</span>');
  hasError = true;
}
if(qty == '') {
  $("#qty").after('<span class="error"  style="color: red;">This field is required.</span>');
  hasError = true;
}
} // if translation

if(hasError == false)
 return true;
    });

 });
 </script> 
```

我有这个代码。我想在提交之前验证表格。我无法控制表单何时没有错误。如果没有发现错误，我想提交表单。我添加了这段代码：

```
if(hasError == false)
 return true; 
```

但不提交表格..请任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:42:02.433

消除

```
e.preventDefault(); 
```

和改变

```
if(hasError == false)
   return true;
}); 
```

进入

```
return !hasError; 
```

作为旁注，`live()`不推荐使用`on()`较新的 jQuery 版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:42:41.137

我所做的，虽然它可能不是很棒的是：

```
$('#form').submit(function(e) 
{
    if(!$(this).hasClass('valid'))
    {
        e.preventDefault();
        var isValid = false;
        // do validation to set isValid true or false;
        if(isValid)
        {
            $(this).addClass('valid');
            $(this).submit();
            // or possibly $(this).addClass('valid').submit();
            return;
        }
    }
}); 
```

这是如何工作的，第一次提交时，它会检查表单是否有一个名为`valid`. 如果不是，它会停止表单验证并进行验证。

如果它有效，它会将类添加到表单并重新提交。由于表单现在具有`valid`类，它将绕过验证并正常提交。

# javascript - Backbone.js - 将数据保存到服务器

> ID：12176081
> 
> 赞同：1
> 
> 时间：2012-08-29T10:39:33.070
> 
> 标签：javascript, jquery, ajax, backbone.js

我正在尝试将我的 Backbone.js 应用程序同步到服务器。我会注意到我覆盖了集合中的同步以使用 jsonp：

```
window.Project = Backbone.Model.extend({

    initialize:function () {

    },

    urlRoot:"http://cshosting.webfactional.com/api/v1/projects",

    defaults:{
        "id":null,
        "completion_state":"0",
        "last_update_datetime":"0"

    }
});

window.ProjectList = Backbone.Collection.extend({

    model: Project,

    url:"http://cshosting.webfactional.com/api/v1/projects/",

    sync: function(method, model, options) {             
        options.dataType = 'jsonp';
        options.url="http://cshosting.webfactional.com/api/v1/projects/?    format=jsonp&callback=moshe";           
        //options.contentType='application/json-p';
        options.error=this.errorr;
        return Backbone.sync(method, model, options);
    },

    parse: function(response) {
         return response.objects;
  }

}); 
```

问题是，虽然“获取”工作正常，但当我尝试为集合“创建”一个新模型时 - 我收到此网络错误：

![在此处输入图像描述](../Images/c7f91e724c0d8cea7230af5e0c586ffd.png) ![在此处输入图像描述](../Images/a18fb2e4d55ec9ca2b57a0db39c3dcb5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:26:50.927

您的应用程序没有使用您的`jsonp`配置，`Collection.create()`这是因为 Collection 委托在`Model.save()`创建*元素*。

检查[Collection.create() 代码](https://github.com/documentcloud/backbone/blob/355c48011a68284b69754aa5a4e0ddabb789b20d/backbone.js#L804)。

您也应该覆盖`Project.sync()`。

# typo3 - 错字3页面上的扩展

> ID：12176082
> 
> 赞同：0
> 
> 时间：2012-08-29T10:39:39.653
> 
> 标签：typo3

我在typo3中创建了一个页面。通过 Extension kickstarter 创建和安装扩展。在我的页面上添加这个新创建的扩展。但是扩展名没有出现。有人知道吗？是否需要定义模板文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:44:59.380

确保你也包含了扩展的 Typoscript。

通常它是通过“包含静态”来完成的，安装的扩展应该在可用的项目中。

![在此处输入图像描述](../Images/20d176f7f0bb1b91d67c3e2c3acfb5bd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:02:46.690

我在页面的设置模板上添加了这一行，它解决了我的问题

page.40 < plugin.tx_test3_pi1

# c# - 在 C# 中的 ExpandoObjects 上优化字典添加

> ID：12176084
> 
> 赞同：1
> 
> 时间：2012-08-29T10:39:46.713
> 
> 标签：c#, .net, optimization, dictionary, add

我有一个高级程序，它从数据库中检索数据并通过 C# 中的 ExpandoObjects 从数据中创建对象。

我现在正在优化我的整个过程，但遇到了一段代码，这是性能方面的瓶颈。我很好奇我可以在多大程度上进一步优化这段代码，并且已经通过执行以下操作将其运行速度提高了 3 倍：

*   在单独的 for 循环中分隔*“查找“类型”部分”*，并且仅在尚未初始化时对其进行迭代。
*   添加了当值为 null 时创建一个空字符串的情况，因为由于某种原因 Dictionary.Add 在添加 Null 值时会减慢很多。

    ```
     // Holds all objects that are created inside the object.
        Dictionary<string, IDictionary<string, dynamic>> objects = new Dictionary<string, IDictionary<string, dynamic>>();

        // This foreach loop is the slowest part!
        foreach (KeyValuePair<string, dynamic> pair in fields)
        {
            string type = pair.Key.Split('_')[0];

            IDictionary<string, dynamic> obj;
            if (!objects.TryGetValue(type, out obj))
            {
                obj = new ExpandoObject();
                objects.Add(type, obj);
            }
            int location = pair.Key.IndexOf(type + "_");
            string key = pair.Key.Remove(location, type.Length + 1);
            if (pair.Value == null)         // If Value is null, replace it with an empty string (dictionary slows quite alot when passing it null values)
                obj.Add(key, "");
            else
                obj.Add(key, pair.Value);         
        }

        if (types == null)
            types = objects.Select(x => x.Key).ToList(); 
    ```

我想知道，在添加 Null 值时字典是如何减慢这么多的，是在底层结构中遇到空值时它会执行特殊操作吗？还有什么我缺少进一步优化代码的东西吗？

再次非常感谢任何帮助。

* * *

**更新**

*   使用我从 SO 收集的最新更改编辑了代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:45:54.273

`TryGetValue`您可以通过使用而不是避免在字典中进行多次查找`ContainsKey`：

```
foreach (KeyValuePair<string, dynamic> pair in fields) 
{ 
    string type = pair.Key.Split('_')[0]; 

    IDictionary<string, dynamic> obj;
    if (!objects.TryGetValue(type, out obj)) 
    { 
        obj = new ExpandoObject(); 
        objects.Add(type, obj); 
    } 
    int location = pair.Key.IndexOf(type + "_"); 
    string key = pair.Key.Remove(location, type.Length + 1); 
    if (pair.Value == null)
        obj.Add(key, ""); 
    else 
        obj.Add(key, pair.Value);            
} 
```

顺便说一句：我没有看到你`types`在第二个`foreach`循环中使用。因此，您可以用这个简单的代码替换第*一个* `foreach`循环：

```
types = objects.Select(x => x.Key).ToList(); 
```

这应该可以节省大量时间，因为它消除了`types`列表中的缓慢搜索和类型的双重解析。

显然，这需要放在`foreach`我上面显示的循环之后。

# matlab - 为什么在 Matlab 中保存并运行 M 文件后第一次没有触发断点？

> ID：12176086
> 
> 赞同：2
> 
> 时间：2012-08-29T10:39:51.297
> 
> 标签：matlab

我注意到 Matlab 中有一个奇怪而烦人的行为。可能我只是做错了什么，但是当我对 M 文件进行一些更改、保存并重新运行它时，我的断点没有按预期触发。如果我第二次执行 M 文件，则会按预期触发断点。为什么会出现这种奇怪的行为，我该如何解决？

**编辑：**

根据要求，我的 Matlab 代码片段：

```
function readCommutingContextData(filename)
fid = fopen(filename);

bufferSize = 5;

format long g
nLines = 0;
tline = fgetl(fid);
while ischar(tline)
    nLines = nLines + 1;
    tline = fgetl(fid);
end
fclose(fid);

timestamps  = zeros(nLines,2,'uint64');
coords      = zeros(nLines,3);
features    = zeros(nLines,12);
labels      = cell(nLines,3);
sources      = cell(nLines,1);
fid = fopen(filename);
tline = fgetl(fid);
i = 1;
while ischar(tline)
    tokens = textscan(tline, '%s', 'delimiter', ',');   
    tokens = tokens{1};
    timestamp           = uint64(str2double(tokens{1}));
    gpsTime             = uint64(str2double(tokens{2}));
    latitude            = str2double(tokens{3});
    longitude           = str2double(tokens{4});
    accuracy            = str2double(tokens{5});
    source              = tokens{6};

    ...
end
fclose(fid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:15:55.763

我观察到在 R2011a 和 R2012a 中编辑文件之前设置的断点的类似行为。我相信这是一个 Matlab 错误。

我发现的解决方法是在编辑和保存文件后重置（清除/设置）至少一个断点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-05T04:13:06.370

当我从“命令窗口”运行代码时，我遇到了同样的问题，并且断点没有工作。之后我上网并有人指导我，我在调用语法前使用了“ **clear all** ”。轻松删除“**全部**”并再次运行您的代码，所有断点都将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-02T06:10:36.630

它很容易处理转到**断点**选项卡并单击那里的箭头，首先单击全部清除，然后单击设置和清除，最后选择错误时停止选项....您的断点开始正常工作

# php - 统计参加者 MYSQL/PHP

> ID：12176087
> 
> 赞同：0
> 
> 时间：2012-08-29T10:39:57.580
> 
> 标签：php, sql, count

**级别**
我是初学者

我有两张桌子：

*events*
具有每个事件唯一 eventid 的所有事件的详细信息。

*users*
列出每个与会者的详细信息，列 eventname1 和 eventname2 包含他们注册的事件的 eventid。（注意：一个特定的 eventid 可以在任一 eventname() 列中，例如 event id 66 可能出现在 eventname1 的一个用户和 eventname 2 的另一个）

**我想做什么我想**
在一个表格中附上我所有活动的详细信息，并在每个活动中包含一个列（#参加者），其中列出了为该活动注册的用户数量。

**到目前为止我所拥有的**

```
 SELECT COUNT( * ) 
    FROM  `users` 
    WHERE  `eventname1` = ( 
    SELECT  `id` 
    FROM  `events` 
    WHERE id =e.g.23 ) 
```

我一直在尝试将它与 join 结合使用，但我没有得到任何结果。任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:43:53.180

创建 3 个表并单独存储它们，您可以轻松计算它

```
events
event_id, event_name, event_desc, etc_column

users
user_id, username, etc_colun

attendess_table
attendd_id, user_id, event_id, 

select e.event_name, u.username
from attendess_table at
INNER JOIN users u ON u.user_id = at.user_id
INNER JOIN events e ON e.event_id = at.event_id
where u.user_id = 2 
```

用于计数

```
select count(user_id) from attendess_table where user_id = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:45:27.597

尝试这个

```
SELECT u.id,u.name,e.name, count(*)   
FROM   users u
left   outer join events e
on     u.id=e.id
group by u.id,u.name,e.name 
```

# concurrency - 用于读取或写入的并发或串行队列

> ID：12176093
> 
> 赞同：1
> 
> 时间：2012-08-29T10:40:22.227
> 
> 标签：concurrency, grand-central-dispatch, serial-processing

我正在编写一个`NSObject`类似于 的子类`NSCache`，它可以将文件缓存到 iOS 设备上的磁盘。

我正在为 (i) 读取 (ii) 写入编写队列，但我想确保我将创建的队列类型是正确的，因此不会导致文件在未来。

对于读取队列，我计划创建一个并发队列，因为可以同时读取多个文件而不会出现任何问题。

然而，对于写入队列，我计划创建一个串行队列以防止一次写入多个文件。

你能告诉我这是否是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T10:54:02.240

`dispatch_sync`为了获得更好的性能，我建议使用用于读取和`dispatch_barrier_async`写入的并发队列。正如迈克·阿什[所说](https://mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html)：

> 因为这使用了屏障功能，所以它确保了在块运行时对缓存的独占访问。它不仅在运行时排除对缓存的所有其他写入，而且还排除所有其他读取，从而使修改安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:16:41.280

根据您的后续评论，我认为您正在寻找的模式/用法是一个串行队列（每个缓存对象/文件一个），其中 dispatch_async()'d 块用于写入缓存条目和 dispatch_sync()（注意差异）阅读它们。串行队列上的写入可以是异步的，这仍然会使它们保持有序，并且执行同步读取将强制完成所有挂起的写入，然后再尝试读取一个值。

# c++ - C++：如何检索已安装的 Firefox 插件列表？

> ID：12176096
> 
> 赞同：1
> 
> 时间：2012-08-29T10:40:28.983
> 
> 标签：c++, firefox, visual-c++

如何检索安装在 C++ 中的 Firefox 插件列表？我有通过 Javascript 获取它的代码，但我不知道如何在 C++ 中使用它。请帮忙。

```
if(navigator.plugins)
{
    for (var i = 0; i < navigator.plugins.length; i++)
    {
        alert(navigator.plugins[i].name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:13:36.723

*   对于插件 DLL，请看这里：[https ://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Plug-in_Basics#Plug-ins%20and%20Platform%20Independence](https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Plug-in_Basics#Plug-ins%20and%20Platform%20Independence)

并搜索“ **Gecko 如何查找插件**”

*   对于插件：

您唯一的选择是枚举 firefox 目录。

适用于所有用户的扩展：

> C:\Program Files\Mozilla Firefox\extensions

每个用户可用的扩展：

> %USERPROFILE%\Application Data\Mozilla\Firefox\Profiles\%PROFILENAME%\extensions (XP)
> 
> %USERPROFILE%\AppData\Roaming\Mozilla\Firefox\Profiles\%PROFILENAME%\extensions（Vista、win7）

请注意，%PROFILENAME% 不是环境变量，而是在配置文件创建期间随机创建的名称。

你应该枚举 Profiles 文件夹来获得这个，基本上大多数用户只有一个配置文件。

当您进入配置文件目录时，请查看**addons.sqlite**。

有关于插件的信息（启用/禁用状态等...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:56:08.210

您需要扫描 Firefox 的配置文件文件夹。通常：C:\Users\login_name\AppData\Roaming\Mozilla\Firefox\Profiles\xxxx.default

如果你想要扩展，只需打开名为**extensions.sqlite**的 sqlite 数据库并读取表**addon**的值。

如果你想要插件，你可以尝试解析文件**pluginreg.dat**

# phptal - phptal - 在 php 条件下使用定义的变量

> ID：12176098
> 
> 赞同：1
> 
> 时间：2012-08-29T10:40:51.557
> 
> 标签：phptal, template-tal

我想在 php 条件下使用 phptal 定义的变量，如下所示：

```
...
<tal:block define="className php: (photoIndex < 10) ? 'thumbItem thumbColumn1' : ( (photoIndex == 10) ? 'thumbItem thumbColumn2 thumbReset' : 'thumbItem thumbColumn2' )">
<tal:block define="defaultVal photo/isDefault">
<tal:block define="classNameWithIndex php: defaultVal ? '${className} modalMegaPhotoSelect' : '${className}'">
<li tal:attributes="class classNameWithIndex">
... 
```

在这里，我的输出是“${className} modalMegaPhotoSelect”，正如我所期望的那样，它是“thumbItem thumbColumn1 modalMegaPhotoSelect”——确切的期望是无关紧要的，这个想法是 className 应该被视为一个变量——

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:17:05.707

而不是`'${className}'`简单地使用`className`.

而不是`'${className} modalMegaPhotoSelect'`使用`className . ' modalMegaPhotoSelect'`（周围有空格`.`）。

# ruby-on-rails - 在 Rails 中采摘和收集有什么区别？

> ID：12176102
> 
> 赞同：131
> 
> 时间：2012-08-29T10:41:07.847
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

这是两个示例代码。

第一个`collect`：

```
User.first.gifts.collect(&:id) 
```

第二个`pluck`：

```
User.first.gifts.pluck(:id) 
```

它们在性能或其他方面有什么区别吗？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2012-08-29T10:43:16.143

`pluck`是在分贝级别。它只会查询特定的字段。[看到这个](http://guides.rubyonrails.org/active_record_querying.html#pluck)。

当你这样做时：

```
 User.first.gifts.collect(&:id) 
```

您拥有加载了所有字段的对象，并且您只需`id`感谢基于 Enumerable 的方法。

所以：

*   如果您**只**需要`id`使用 Rails 4，请使用`ids`：`User.first.gifts.ids`

*   如果您**只**需要 Rails 4 的某些字段，请使用`pluck`：`User.first.gifts.pluck(:id, :name, ...)`

*   如果您**只**需要 Rails 3 的一个字段，请使用`pluck`：`User.first.gifts.pluck(:id)`

*   如果您需要**所有**字段，请使用`collect`

*   如果你需要 Rails 4 的一些字段，仍然使用`pluck`

*   如果您需要 Rails 3 的某些字段，请使用`select`和`collect`

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-06-11T10:43:28.013

是的。[根据 Rails 指南](http://guides.rubyonrails.org/active_record_querying.html#pluck)，`pluck`直接将数据库结果转换为`array`，无需构造`ActiveRecord`对象。这意味着大型或经常运行的查询具有更好的性能。

除了@apneadiving 的答案之外，`pluck`还可以将单个和多个列名作为参数：

```
Client.pluck(:id, :name)
# SELECT clients.id, clients.name FROM clients
# => [[1, 'David'], [2, 'Jeremy'], [3, 'Jose']] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-04T16:15:57.633

基本和主要区别在于 Pluck 适用于数据库级别并收集获取所有数据，然后当您需要所有记录时返回记录使用收集，当少数字段时使用 pluck

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-16T11:01:22.300

如果在某些情况下您使用检索记录的少数属性。在这种情况下，您应该使用`pluck`.

```
User.collect(&:email) 
```

在上面的示例中，如果您只需要电子邮件属性而不是浪费内存和时间。因为它将从数据库中的用户表中检索所有列，为每个属性分配内存（包括您永远不会使用的属性）

注意：`pluck`不返回用户的 ActiveRecord_Relation

# c# - 使用 memcached 缓存和检索数据列表

> ID：12176106
> 
> 赞同：2
> 
> 时间：2012-08-29T10:41:11.480
> 
> 标签：c#, caching, memcached

我需要在缓存中存储数据列表。

有时我需要完整列表，有时我只需要查询结果并从列表中返回一项。

一项的当前逻辑是这样的：

```
User result;
var cachedUsers = _cache.Get<List<User>>(Constants.Cache.UsersKey);
if( cachedUsers != null)
{
    result = cachedUsers.FirstOrDefault(u => u.UserID == userID);

    if (result != null)
        return result;
}

result = GetUserFromDb(userID);

if (cachedUsers != null)
{
    cachedUsers.Add(result);
    _cache.Store(StoreMode.Set, Constants.Cache.UsersKey, cachedUsers);
}

return result; 
```

我可以直接从缓存中访问一个元素而不加载完整的用户列表吗？我还需要在不加载完整列表并覆盖它的情况下将用户添加到缓存中。

编辑：我可以选择将项目与列表分开存储，或者使用不同的方法从头开始编写缓存。

实现此逻辑的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:44:57.950

您可以执行的最精细的操作是检索特定密钥。如果您在该键下存储项目列表，您将获得该列表。要准确获取一个项目，您需要为每个密钥存储一个项目。

对此有多种策略，但请注意，原子性处于键级别，因此跨多个键执行操作可能会导致竞争条件。

就个人而言，我会自定义序列化您的列表（而不是依赖默认的 .NET 序列化），因为这会相当快。但这取决于在谈论更新单个密钥或请求单个密钥时“有时”有多少次。“随用随用”的常识在这里适用。

对于自定义序列化，我们使用[Protobuf-net](http://code.google.com/p/protobuf-net/)并将结果`byte[]`手动存储到缓存中 - 例如，缓存获取并给出 a `byte[]`，然后我们手动进行序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:45:06.737

简短的回答是否定的。您缓存了整个列表，而缓存`dumb`并不知道您缓存了什么，只是因为您缓存了一个数据块。你必须把它全部拉回来。

但是，我曾经通过使用键的设置模式单独缓存项目然后单独缓存列表索引来解决这个问题。然而，管理起来有点乏味，然后你就有了多个对象，它们都有自己的缓存生命周期。

# android - 如何从 ORMLITE 中检索记录？

> ID：12176107
> 
> 赞同：2
> 
> 时间：2012-08-29T10:41:12.133
> 
> 标签：android, ormlite

与我之前的问题类似，[如何](https://stackoverflow.com/questions/12108195/how-to-delete-a-record-from-ormlite)再次从 ormlite 中删除记录我可以按 ID 检索记录为

```
public BO Retrieve(int id) throws SQLException {
        TEntity entity = this.dao.queryForId(id);

        return getBizObject(entity);
    } 
```

但是如何不通过 id 而是通过 user_id 等任何其他字段来检索记录？

我想了解用于检索记录的查询生成器

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T11:55:21.477

这是一个 RTFM 答案。ORMLite[有](http://ormlite.com/) `QueryBuider`很好的文档记录，有一些很好的例子：

> [http://ormlite.com/docs/query-builder](http://ormlite.com/docs/query-builder)

引用手册中的内容，如下所示将查询特定字段。

```
QueryBuilder<Account, String> queryBuilder = dao.queryBuilder();
queryBuilder.where().eq(Account.PASSWORD_FIELD_NAME, "qwerty");
List<Account> accountList = queryBuilder.query(); 
```

用于定义各种比较的[javadocs`QueryBuilder`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/QueryBuilder.html)是在线的，并且用于定义各种比较的[`Where`对象 javadocs](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/Where.html)也提供了很好的信息。手册中还有一个部分是[构建更复杂的查询](http://ormlite.com/docs/building-queries)。

此外，如果您只是查询单个字段，那么[DAO 有一个 queryForEq(...)](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#queryForEq%28java.lang.String,%20java.lang.Object%29)方法可以`QueryBuilder`为您完成这些工作。

`public static final`顺便说一句，如果您指的是在常量中定义它的字段的名称，建议您：

```
public class Account {
    public static final String PASSWORD_FIELD_NAME = "password"; 
    ...
    @DatabaseField(canBeNull = false, columnName = PASSWORD_FIELD_NAME)
    private String password; 
```

# java - Google App Engine UserServiceget.CurrentUser() 在 /_ah/channel/connected/ 的 servlet 处理通道连接中返回 null

> ID：12176113
> 
> 赞同：1
> 
> 时间：2012-08-29T10:41:35.143
> 
> 标签：java, google-app-engine, channel-api

我使用 Google Channel api 并在 adreess /_ah/channel/connected/ 注册了 servlet 来处理用户通道连接。当在发布消息处理程序中发生连接时，我发现 UserServiceget.CurrentUser() 返回 null，而在我的应用程序的其他 servlet 中它返回用户。请问是什么情况告诉我。servlet 代码是这样的：

```
@SuppressWarnings("serial")
public class ConnectServlet extends HttpServlet {
    @Override
    public void doPost(HttpServletRequest req, HttpServletResponse resp)
                    throws IOException {
        UserService userService = UserServiceFactory.getUserService();
        User user = userService.getCurrentUser();

        if( user != null ){        
        String user_name = user.getNickname();
        Logger.getLogger("server").log( Level.WARNING, "User " + user_name + "  connected" );
       }
    }
} 
```

安全约束是：

```
<security-constraint>
    <web-resource-collection>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
</security-constraint> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:03:34.997

调用`/_ah/channel/connected/`是由内部 Google Channel 服务服务器发出的，而不是由用户直接发出的。所以这个请求没有与之关联的用户。

这是一个[如何处理 Channel API 的示例](https://developers.google.com/appengine/docs/java/channel/overview#Example_Tic_Tac_Toe_Application)：

1.  服务器：在服务器上创建一个唯一的客户端 ID。您可以使用用户 ID：

    ```
    String clientId = userService.getCurrentUser().getUserId(); 
    ```

2.  服务器：从客户端 ID 创建通道令牌并将其传递回客户端：

    ```
    ChannelService channelService = ChannelServiceFactory.getChannelService();
    String token = channelService.createChannel(clientId); 
    ```

3.  在客户端的 Javascript 中使用令牌：

    ```
    // --token-- a token received from server
    channel = new goog.appengine.Channel('--token--'); 
    ```

4.  然后在`/_ah/channel/connected/`处理程序中您可以执行以下操作：

    ```
    ChannelService channelService = ChannelServiceFactory.getChannelService();
    ChannelPresence presence = channelService.parsePresence(req);
    String clientId = presence.clientId();
    // clientId equals userId as set in point 1\. 
    ```

# uitableview - UITabBar 覆盖的 UITableView 页脚视图

> ID：12176115
> 
> 赞同：1
> 
> 时间：2012-08-29T10:41:41.700
> 
> 标签：uitableview, uitabbarcontroller, uitabbar, spacing

我正在编写一个 iPhone 应用程序，它显示一个带有页眉和页脚视图的表格视图。此表包含在 TabBar 视图控制器中，该控制器包含在 NavigationView 控制器中。这意味着我的表格视图包含在导航栏和标签栏之间。问题是页脚视图（包括图表）被标签栏部分覆盖。我试图调整 XCode Storyboard 中的模拟指标，但显然这个值只影响表视图而不影响页脚视图。

任何想法？

非常感谢

克劳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:39:05.457

So you want to resize the height of the `UITableView's` footer view right?

Answer(s) is probably [here](https://stackoverflow.com/questions/6672528/uitableview-changing-footer-views-size-programmatically-doesnt-work) then.

# php - 如何获取 PHP 数组中重复元素的数量？

> ID：12176116
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:41:42.273
> 
> 标签：php, arrays

有时我们只需要获取数组中重复元素的计数，或者数组中每个元素的计数

```
 $array = array(123, 'abc', 26, 'swat', 1, 'swat', 83); 
```

我想打印：

```
 123 (1)
    abc (1)
    26 (1)
    swat (2)
    1 (1)
    83 (1) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T10:41:42.273

使用 php 函数[array_count_values](http://in.php.net/manual/en/function.array-count-values.php)

```
<?php
    $array = array(123, 'abc', 26, 'swat', 1, 'swat', 83);
    print_r(array_count_values($array));
?> 
```

输出是：

```
Array
(
    [123] => 1
    [abc] => 1
    [26] => 1
    [swat] => 2
    [1] => 1
    [83] => 1
) 
```

# ruby-on-rails-3 - 使用数据库的分布式服务器中基于令牌的身份验证

> ID：12176120
> 
> 赞同：1
> 
> 时间：2012-08-29T10:41:53.663
> 
> 标签：ruby-on-rails-3, authentication, soa, token, auth-token

我正在使用面向服务的架构开发具有分布式服务器的应用程序，这是[我的系统架构的链接](https://docs.google.com/open?id=0B64IY9K4W3GfSktEY1N4WTNUWG8)。这是一个 Rails 3 应用程序，我有 2 个内容处理服务器和 2 个应用程序服务器。所有用户上传（图像/视频）都进入内容处理服务器，所有网页都通过应用程序服务器提供服务。我正在使用 devise gem 进行身份验证，它是基于令牌的身份验证。与服务器的所有交互都是使用基于 HTTP 的 rest API 完成的。每个请求都会向服务器发送一个 auth_token，然后服务器通过检查数据库中的 auth_token 来验证它，并且一切正常，但我不确定以下事情 -

1.  由于每个请求都使用数据库进行验证，所以当他们的很多用户说 100 万时它不会使数据库服务器过载
2.  我考虑在登录期间使用会话来存储此 auth_token 并在每个请求上验证请求 auth_token，因为我使用多个服务器进行应用程序和内容处理，所以我需要在所有服务器上进行粘性会话或创建会话，我不这样做不想做。

他们是否可以通过其他方式进行基于令牌的身份验证，而无需在分布式服务器环境中对数据库服务器施加负载？

# ruby-on-rails - Rails 中的 Mercury 编辑器不保存更改

> ID：12176130
> 
> 赞同：8
> 
> 时间：2012-08-29T10:42:52.700
> 
> 标签：ruby-on-rails, mercury-editor

我想用一些可视化编辑器改进我的页面，并找到[这个](http://railscasts.com/episodes/296-mercury-editor?autoplay=true)关于 Mercury 编辑器的轨道广播。全部完成，但是当我按下保存时，我已经重定向到我的页面而没有任何更改。没有错误，没有警告，只是未保存的格式。有人可以帮助我吗？
一些代码：
`# routes:`

 ````
mount Mercury::Engine => '/'

resources :tasks do
  resources :comments
  member { post :mercury_update }
end

# My controller:

def mercury_update
  task = Task.find(params[:id])
  task.title = params[:title][:value]
  task.body_task = params[:body_task][:value]
  task.save!
  render text: ""

end

# In views/layouts/mercury.html.erb

new Mercury.PageEditor(saveUrl, {
    saveStyle:  'form', // 'form', or 'json' (default json)
    saveMethod: null, // 'PUT', or 'POST', (create, vs. update -- default PUT)
    visible:    true  // boolean - if the interface should start visible or not
  });
 #when using 'POST' i have alert 'Mercury was unable to save to the url' 
```` 

`PS Rails 3.2.8，水银导轨（0.8.0）`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:29:48.177

我设法通过在您要编辑的页面中使用它来设置 saveURL（例如“pages/show.html.erb”）：

```
<script>
   jQuery(window).on('mercury:ready', function() { Mercury.saveUrl = '/pages/' + <%= @page.id %> + "/mercury_update"; });
</script> 
````

# android - 如何为我的导航应用注册隐式导航意图？

> ID：12176131
> 
> 赞同：2
> 
> 时间：2012-08-29T10:42:58.543
> 
> 标签：android, android-intent, navigation, implicit

我希望通过其他应用程序的隐式意图调用我的导航应用程序。所以我想我需要在其 Manifest 中为此类导航意图“注册”我的应用程序。但是我如何才能“注册”为导航应用程序呢？我猜意图标签必须遵循特定规则，否则它将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:53:27.973

应该是这个： [http ://www.openintents.org/en/node/820](http://www.openintents.org/en/node/820)

我认为您必须在 manifest.xml 中使用以下内容进行注册：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <data android:scheme="google.navigation"/>
</intent-filter> 
```

# css - 在文件夹中组织 Rails SASS 文件

> ID：12176138
> 
> 赞同：0
> 
> 时间：2012-08-29T10:43:18.907
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3.1, sass

我有一个 stock rails 3.1 应用程序，并且一直在努力在文件夹中组织我的 sass 文件。

*   如果我创建一个导入 foo.css.scss 的清单文件，并将 foo.css.scss 放在子文件夹中，则不会导入该文件。

*   如果我将清单和 foo.css.scss 都放在子文件夹中，则找到 foo.css.scss，但是找不到 css 中引用的图像，除非我移回目录。

作为：

```
body {background-image:url('paper.gif');} // Not found.
body {background-image:url('../paper.gif');} // found. 
```

将子文件夹与 SASS 和 Rails 一起使用的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:13:26.743

试试这个：

```
body {background-image:image-url('paper.gif');} 
```

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)第 2.2.2 章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:53:28.163

我将所有图像放在`assets/images`文件夹中，而不是将它们子文件夹放在对其他图像文件隐藏的 css/stylesheets 目录中。

我假设您的要点＃2 将图像移动到我提到的文件夹中，无论您使用什么大锤来使简单的 CSS 复杂化，都应该可以工作。

# python - 如何在python中将以下文本转换为unicode？

> ID：12176139
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:43:19.543
> 
> 标签：python, unicode, encoding

我正在 Python 交互式 shell 上尝试以下代码：

```
>> unicode("�'ам интересна информация") 
```

它给了我以下错误：

```
'ascii' codec can't decode byte 0xef in position 0: ordinal not in range(128) 
```

如何在不丢失任何信息的情况下将此字符串正确转换为 Unicode？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:44:32.460

在字符串前面加上`u`:

```
u"�'ам интересна информация" 
```

你所拥有的只是一堆二进制数据（即一个字节“字符串”）。在任何情况下，您都必须知道编码才能正确读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:06:10.223

我可能会假设它是 UTF-8 .. 谷歌翻译说它的保加利亚语，它通常是用编码的，`('iso_8859_5')`但是当我尝试它时，它只会弄得一团糟。

我正在做的是将字节字符串放入普通（非 unicode）字符串中，如下所示：

```
s = "�'ам интересна информация" 
```

第一个字母具有字节值：

```
>>> s[0]
'\xef'
>>> ord(s[0])
239 
```

然后尝试将其解码为不同的编码方案：

```
>>> from encodings import aliases
>>> print(aliases.aliases.keys())
>>> print s.decode('latin4')
īŋŊ'Đ°Đŧ Đ¸ĐŊŅĐĩŅĐĩŅĐŊĐ° Đ¸ĐŊŅĐžŅĐŧĐ°ŅĐ¸Ņ
>>> print s.decode('iso_8859_5')
яПН'аАаМ аИаНбаЕбаЕбаНаА аИаНбаОбаМаАбаИб
>>> print s.decode('utf_16')
뿯➽냐볐퀠킸톽킂통킀통킁킽₰룐뷐蓑뻐胑볐냐蛑룐近
>>> print s.decode('utf_8')
�'ам интересна информация 
```

所以我能想出的最好的答案是：

> 如何在不丢失任何信息的情况下将此字符串正确转换为 Unicode？

```
>>> uniVersion = "�'ам интересна информация".decode('utf-8')
>>> print uniVersion
�'ам интересна информация 
```

就像@Joey 说的那样，你所拥有的只是一串字节，如果不知道它已经在什么编码中，你就无法真正将它转换为 unicode。

您尝试的代码不起作用，因为它默认假设数据采用 ascii 7 位编码。你可以稍微调整一下：

```
>>> uniVersion = unicode("�'ам интересна информация", 'utf-8') 
```

您只是在告诉 unicode 函数，这些字节以 utf-8 格式编码。

当字体没有该字符的表示时，使用“�”符号。

我希望它不应该是字节流的一部分，或者它在某个时候被损坏了，或者它前面可能有更多的字节丢失，这会给它更多的意义。

请随时在评论中要求任何澄清。

# jquery - KnockOut 用于填充组合时的工作原理

> ID：12176141
> 
> 赞同：0
> 
> 时间：2012-08-29T10:43:29.143
> 
> 标签：jquery, knockout.js

我也得到了一段关于 KnockOut 的代码来使用 jquery 填充下拉列表。我对 KnockOut 一点也不熟悉，所以我现在能够理解它是如何工作的。

所以请告诉我KnockOut相关代码的含义。这是完整的代码

```
<p>
    Your country:
    <asp:DropDownList ID="ddlCountries" runat="server" data-bind="options: countryModel.countries, optionsValue: 'CountryID', optionsText: 'CountryName', optionsCaption: 'Choose...'">
    </asp:DropDownList>
</p>
<input type="button" value="Add" data-bind="click: addCountry" />

<script type="text/javascript">
    function DropDownModel() {
        var self = this;
        self.countries = ko.observableArray();
        self.addCountry = function () {
            $.ajax({
                type: "POST",
                url: "DropDownSolution.aspx/GetCountries",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    self.countries(data.d);
                }
            });
        };
    }
    var countryModel = new DropDownModel()
    ko.applyBindings(countryModel);
</script>

    WebMethod]
    public static List<Country> GetCountries()
    {
        List<Country> countries = new List<Country>();
        countries.Add(new Country { CountryID = "1", CountryName = "India" });
        countries.Add(new Country { CountryID = "2", CountryName = "Singapore" });
        countries.Add(new Country { CountryID = "3", CountryName = "Malaysia" });
        return countries;
    } 
```

所以我担心的是我无法理解 KnockOut 相关代码。

```
ko.applyBindings(countryModel); 
```

**什么是ko？**

```
var self = this;
self.countries = ko.observableArray();
self = this means what....so self hold which reference?

self.countries = ko.observableArray();
what is ko and how ko comes?
what is observableArray() & what is does? 
```

似乎**self.addCountry = function () {** addCountry 会在调用 DropDownModel() 函数时自动触发。如何自动调用函数？

KnockOut 如何填充下拉列表....它将如何理解如何填充下拉列表。

请详细指导我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:49:19.593

> 什么是ko？

`ko`是全局淘汰对象。它是在您包含`knockout.js`脚本时添加的。它就像`$`jquery 的变量。

> 似乎 self.addCountry = function () { addCountry 会在调用 DropDownModel() 函数时自动触发。如何自动调用函数？

该函数不会自动调用。相反，它已通过以下方式连接到添加按钮。

```
<input type="button" value="Add" data-bind="click: addCountry" /> 
```

这将`addCountry`方法绑定到`click`按钮输入的处理程序。

> KnockOut 如何填充下拉列表....它将如何理解如何填充下拉列表。

下拉列表使用`options`绑定填充，如示例中的以下代码所示。

```
// Note that I removed some of the other attributes so that it is 
// easier to see the knockout only attributes.
<asp:DropDownList data-bind="options: countryModel.countries, optionsValue: 'CountryID', optionsText: 'CountryName', optionsCaption: 'Choose...'">
</asp:DropDownList> 
```

[您可以在此处](http://knockoutjs.com/documentation/options-binding.html)找到每个`options`特定绑定值的文档。

您还可以在 knockoutjs.com 上找到所有 knockout 的[文档](http://knockoutjs.com/)。

# r - 在 R 中控制绘图的标题参数

> ID：12176142
> 
> 赞同：5
> 
> 时间：2012-08-29T10:43:30.947
> 
> 标签：r, plot

我试图为 4 个组合子图设置一个通用标题和一个唯一的通用 xy 轴标签：

```
dev.new( width =  9, height = 10)
layout( matrix( c( 0, 1, 1, 2, 3, 4, 2, 5, 6, 0, 7, 7 ), 4, 3, byrow = TRUE), widths = c( 1, 4, 4 ), heights = c( 1, 4, 4, 1 ) )
par( mar = c( 1, 0, 1, 0 ) )
plot( c(1:2), type = "n", xlab = "", ylab = "", axes = F, cex = 0.7 ) #general title 
title( main = "title", ps = 2 )
par( mar = c( 1, 0, 1, 1) )
plot( c(1:2), type = "n", xlab = "", ylab = "", axes = F, las = 2, cex = 0.7 ) #general y-label  
title( main = " y-label ", las = 0 )
par( cex= 0.9,  mar = c( 5, 1, 1, 2 ) )
plot( c(1:10), type="l", xlab = "A", ylab = "", axes = T, las = 1, cex = 0.7 ) # first    subplot 
par( cex= 0.9,  mar = c( 5, 1, 1, 3 ) )
plot( c(10:1), type ="l", xlab = "B", ylab = "", axes = T, las = 1, cex = 0.7 ) # second subplot
par( cex= 0.9,  mar = c( 5, 1, 1, 2 ) )
plot( c(1:10), type="l", xlab = "C", ylab = "", axes = T, las = 1, cex = 0.7 ) # third subplot
par( cex= 0.9,  mar = c( 5, 1, 1, 3 ) )
plot( c(1:2), type="l", xlab = "D", ylab = "", axes = T, las = 1, cex = 0.7 ) # fourth subplot
par(mar = c( 1, 0, 1, 0 ) )
plot( c(1:2), type = "n", xlab = "", ylab = "", axes = F, cex = 0.7 ) #general x-label
title( main = " x-label " ) 
```

如何控制这些标题的字体大小、位置和方向？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T11:31:24.427

您正在寻找的是整个图形的外边距。使用 设置并在其中`par(oma=...)`添加轴标签和标题`mtext(..., outer=TRUE)`。

```
par(mfrow=c(2,2), oma=c(3,3,4,0), mar=c(4,2,1,1), las=1, cex=0.7)
plot(1:10, type="l", xlab="A", ylab="")
plot(10:1, type ="l", xlab="B", ylab="")
plot(1:10, type="l", xlab="C", ylab="")
plot(1:2, type="l", xlab="D", ylab="")
mtext("X-label", 1, 1, outer=TRUE)
mtext("Y-label", 2, 1, outer=TRUE, las=0)
mtext("Title", 3, 1, outer=TRUE, cex=2) 
```

![在此处输入图像描述](../Images/75d9ce591c01a312cde01b5c02315f7c.png)

请注意，这`1:10`等效于`c(1:10)`并且所有`par`跨面板 AD 的恒定设置只需要在`par`调用中设置一次。

# java - 从 gmail 导入朋友并向他们发送消息

> ID：12176149
> 
> 赞同：0
> 
> 时间：2012-08-29T10:43:53.153
> 
> 标签：java, android, gmail

我正在开发向用户发送邀请的应用程序。我已经在朋友的 Facebook 墙上发布了一条消息，但现在我也想向 gmail 用户发送邀请

我想从我的应用程序执行以下任务。

1.  从我的 gmail 导入所有联系人
2.  选择所有这些并向他们发送带有我的应用程序下载链接的消息。

我遵循[本教程](http://android10.org/index.php/articlessecuritypermissions/313-implementing-google-oauth-in-android)，但在此教程的帮助下，我只能导入朋友，它不允许我选择所有朋友并向他们发送带有我的应用程序下载链接的消息

需要前辈的指导。愿我的问题被重复或关闭，但我没有从互联网上找到任何有用的材料。

问候！

阿德南

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:48:25.630

看看[这个](https://developers.google.com/google-apps/contacts/v3/)，它是他们的联系人 API 的链接。特别是在标题为：[检索所有联系人](https://developers.google.com/google-apps/contacts/v3/#retrieving_all_contacts)的部分。下面的部分也可能有所帮助，它们的标题是使用查询参数检索联系人和检索单个联系人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:56:09.863

这是获取所有 gmail 联系人的[示例 示例链接](http://androidwarzone.blogspot.in/2011/07/android-oauth-full-example-with-source.html)，您可以使用他们的邮件 ID 向他们发布消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T08:19:00.897

对于仍然对此感兴趣的任何人，我不建议在 Android 中使用 Google OAuth 2.0 API。要做的工作很多，旨在为所有网络/移动应用程序提供通用解决方案。

我认为 Google Invites API 正是这里所需要的，请查看[本教程](http://code.tutsplus.com/tutorials/how-to-grow-your-audience-with-google-app-invites--cms-25321)。

# count - 黑莓：分别跟踪 GPRS 和 WiFi 数据使用情况

> ID：12176158
> 
> 赞同：4
> 
> 时间：2012-08-29T10:44:48.313
> 
> 标签：count, blackberry, gprs

有人知道以编程方式仅获取 GPRS 数据使用（**不包括**Wifi 数据）的方法吗？

```
RadioInfo.getNumberOfPacketsReceived() 
```

和

```
RadioInfo.getNumberOfPacketsSent() 
```

方法返回接收和发送的**总数据。**[但我想接收和发送 GPRS 数据（可选 Wifi 数据计数）](http://supportforums.blackberry.com/t5/Java-Development/Monitoring-Connection-Changes-WiFi/td-p/1739589)。

一个名为 miniMoni 的示例应用程序似乎可以做到这一点。但我可以找到此任务的任何代码示例。请给我一些指导？

请注意，**我想获取设备的总 GPRS 使用量，而不是单个应用程序的使用量**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:17:14.013

免责声明：我不是 RIM 专家，但是……在上面链接的页面上，有一个可能的方法可以做到这一点，它讨论了 TransportDescripter。

如果您可以获得 TransportDescripter（可从 API v5.0.0 获得），您可能会知道数据当前是通过 GPRS 还是 WiFi 进行路由（注意这与打开任一连接不同）。

如果您知道这一点，您可以使用 RadioInfo.GetNumberOfPacketsSent 和 RadioInfo.GetNumberOfPacketsReceived 来计算当您有 GPRS 连接时发送和接收的数据包。

Connect
Get TransportDescriptor = GPRS
Get PacketsSent/Received
Get PacketsSent/Received
Connection switch to WiFi
Get PacketsSent/Received immediate (I)
GPRS Packets = Packets (I)
Connection switch to GPRS
Get PacketsSent/Received immediate (II)
WiFi Packets = Packets (II ) ) 减去数据包 (I)
等等。

它只给出一个估计，并且涉及一些稍微混乱的代码。正如我所说，这只是阅读文档的猜测......如果有人指出为什么这种方法不起作用，我会很感兴趣。

# virtual-machine - 从外部连接到 Vagrant VM

> ID：12176159
> 
> 赞同：31
> 
> 时间：2012-08-29T10:44:50.403
> 
> 标签：virtual-machine, vagrant

我在开发网站时使用 Vagrant，并且已经使用了大约一年。我想在 iPad 上测试一些功能，但我不知道如何让 iPad 连接到我 Mac 上的 Vagrant 盒子。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-06T00:50:08.697

如果您在 Vagrant 文件中以这种方式配置网络：

```
config.vm.network :forwarded_port, guest: 4000, host: 4000 
```

然后在该端口上提供文件。您将能够从外部击中它。假设您在 Mac 上运行 vagrant box，它将是 (machine).local:4000，例如我是 joe.local:4000

当您在响应式网站上工作时，能够使用 iPad 和 iPhone 作为预览监视器非常方便，如果您有 livereload 或同等功能，您甚至不需要触摸它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-30T06:14:20.427

查看Vagrant 文档中的[桥接网络](http://vagrantup.com/v1/docs/bridged_networking.html)。启用它将允许您的 VM 显示为网络上的设备，并允许您连接到其 IP 地址和 Web 服务器正在侦听的端口。

巨大的警告：您没有提供有关本地网络的任何信息，因此您的 iOS 设备很可能无法访问 VM 的 IP，这可能是通过 WiFi 连接的——而且许多路由器的出厂配置都没有允许在无线连接的设备和通过以太网连接的设备之间进行通信。

但这是可能的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-06T17:58:56.613

这是一个老问题，但对于使用 vagrant 1.5 或更高版本的任何人，您都可以使用[vagrant share](http://www.vagrantup.com/blog/feature-preview-vagrant-1-5-share.html)

# r - 如何替换矩阵的下/上三角元素？

> ID：12176164
> 
> 赞同：2
> 
> 时间：2012-08-29T10:45:03.443
> 
> 标签：r

我的问题：

```
Amat <- diag(4) 
```

我想用我选择的值（例如）替换`Amat`（即`Amat[2,1]`、`Amat[3,1]`、等）的所有下三角值。`Amat[3,2]``NA`

显然我不想一个一个地替换每个元素。

你能告诉我使用单个命令最有效的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T10:53:06.443

这在`upper.tri`.

```
Amat[upper.tri(Amat)] <- NA
Amat
#      [,1] [,2] [,3] [,4]
# [1,]    1   NA   NA   NA
# [2,]    0    1   NA   NA
# [3,]    0    0    1   NA
# [4,]    0    0    0    1 
```

当然，将下三角形转换为s`Amat[lower.tri(Amat)] <- NA`也会这样做。`NA`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T10:53:37.417

你在寻找什么`lower.tri`？`upper.tri`

这些函数在 R 基础中。

# java - Selenium WebDriver，当我在 Firefox 上运行测试时出现 UnreachableBrowserException

> ID：12176168
> 
> 赞同：0
> 
> 时间：2012-08-29T10:45:13.130
> 
> 标签：java, firefox, selenium, webdriver

在 Firefox 14 上运行测试时出现 UnreachableBrowserException。在 IE9 和 Chrome 上测试运行良好。这是什么意思以及如何解决？感谢您的任何回答。

```
FAILED CONFIGURATION: @AfterClass tearDown
org.openqa.selenium.remote.UnreachableBrowserException: Error communicating with the remote browser. It may have died.
Build info: version: '2.24.1', revision: '17205', time: '2012-06-19 16:53:24'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_25'
Driver info: driver.version: RemoteWebDriver 
```

我想补充一点，有时控制台会显示此异常，有时我会出现异常`NoSuchElementException`，因为驱动程序找到了选择组件，但没有找到建议选项。在 IE 和 Chrome 上没有问题，因为总是可以找到元素和选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:13:28.963

上次我们有这个，原因是，一个“封闭”的司机。由于实施不当，我们在“@After”而不是“@AfterClass”中关闭了驱动程序。使用 Chrome 驱动程序可以正常工作，但使用 FF 则失败了。

检查“关闭”是否在调用 @AfterClass 之前出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:42:58.370

将你的 selenium 更新到[2.25](http://seleniumhq.org/download/)版本，它应该与 FF 14 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T07:44:52.650

硒 3.5 版

还要检查以下组合是否未配置：

```
System.setProperty( "webdriver.gecko.driver" ,"C:/PATH_TO_selenium/geckodriver.exe" ); 
```

# java - 如何在 Java 中使用 Selenium WebDriver 单击按钮？

> ID：12176170
> 
> 赞同：6
> 
> 时间：2012-08-29T10:45:23.410
> 
> 标签：java, selenium, selenium-webdriver, automated-tests

以下是按钮的 HTML 代码：

```
<span>
<button class="buttonLargeAlt" onclick="javascript:submitCheckout(this.form);"type="submit">Checkout</button>
</span> 
```

我试过了`driver.findElement(By.xpath("//span[contains(.,'Checkout')]")).click();`

它不工作...

还有其他想法吗？页面上有 2 个同名按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:45:59.440

```
driver.submit() 
```

应该管用。如果 DOM 中按钮的顺序始终相同，这也应该有效：

```
driver.findElements(By.className("buttonLargeAlt")).get(0).click(); 
```

如果它是您页面上的第一个 buttonLargeAlt 按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T14:48:27.290

尝试：

```
//span/button[text()='Checkout' and @class='buttonLargeAlt'] 
```

或者

```
//span/button[text()='Checkout'][1] 
```

此外，如果您知道需要单击 2 个按钮中的哪一个，您可以尝试：

```
//span/button[text()='Checkout'][1] 
```

找到的第一个按钮在哪里`[1]`，文本为`'Checkout'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:26:34.750

以下应该有效：

```
driver.findElement(By.className("buttonLargeAlt")).click();
driver.findElement(By.xpath("//button[contains(@class='buttonLargeAlt')]")).click();
driver.findElement(By.xpath("//button[@class='buttonLargeAlt']")).click(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-01T12:48:48.230

```
 You can achieve this by using XPath with html input element id or by name
    //1\. By XPath indexing option:  
    WebElement loginButtonId = 
    driver.findElement(By.xpath("//*[@id='login']"));
    //Xpath of login button i have get For firefox browser

    loginButtonId.click();

    I hope this work for you 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-15T11:24:05.510

我有添加附件按钮：

我试过这段代码：

```
driver.findElement(By.xpath("//*[@id=\"attachments\"]/div/div/img")).sendKeys("C:\\Users\\NayazPasha\\Desktop\\Ndin selenium Testing outputs\\Collab Schedule onclick.png"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-29T11:58:21.023

该 XPath 只会获得跨度，而不是物理按钮。

在这里工作得很好：

```
//span[contains(.,'Checkout')]/button 
```

或 By.CssSelector：

```
button.buttonLargeAlt 
```

如果仍然不起作用，请解释更多。它在 iFrame 中吗？Selenium 给出了什么错误？

# php - 使用 JavaScript 将压缩文本文件加载到字符串中

> ID：12176171
> 
> 赞同：0
> 
> 时间：2012-08-29T10:45:25.627
> 
> 标签：php, javascript, html

> **可能重复：**
> [使用 JavaScript 解压缩文件](https://stackoverflow.com/questions/2095697/unzip-files-using-javascript)

如果我有一个简单的压缩文本文件（在 .zip/.rar/... 文件中）并且我想用 JavaScript 将它读入字符串，我该怎么办？

换句话说，如果我压缩的 test.txt 文件的内容是“Hello world”，那么我应该怎么做才能将这个“Hello word”文本复制到 String 中？

这个怎么做？我应该使用哪种压缩格式（.zip/.rar/other）？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:49:36.233

假设您成功地将压缩文件加载到 javascript 变量（通过 AJAX？），请按照以下类似问题进行解压缩：

[解压缩文件](https://stackoverflow.com/questions/2095697/unzip-files-using-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:49:17.607

尝试使用 zip.js：[http ://gildas-lormeau.github.com/zip.js/](http://gildas-lormeau.github.com/zip.js/)

示例： http: [//gildas-lormeau.github.com/zip.js/demos/demo2.html](http://gildas-lormeau.github.com/zip.js/demos/demo2.html)

# c# - 在 3D 中绘制椭圆

> ID：12176174
> 
> 赞同：1
> 
> 时间：2012-08-29T10:45:30.260
> 
> 标签：c#, 3d, path, plot, ellipse

不久前，我在 3D 空间中绘制椭圆时遇到了问题。我的解决方案似乎有效，并以我需要的方式（当时）旋转了东西。我的解决方案几乎完美。它将椭圆旋转到正确的方向......但是，椭圆的起点和终点（在图片中由青色和红色十字表示）始终未正确对齐。这里有一些图片来显示正在发生的事情，以及我需要发生的事情。

![在此处输入图像描述](../Images/c36c57e6cb88666970a5103141399fde.png)

![在此处输入图像描述](../Images/59acb71e542a4fed2aebd4ad062c4255.png)

如您所见，第一张图片显示了仅在 y 轴上发生旋转时的结果，青色十字位于脚部，红色位于椭圆的另一端。然而，第二张图片的椭圆方向正确，但十字架似乎没有出现在正确的位置。（它们应该在黑线连接椭圆的点上。

目前它的代码是这样的。

```
public static void DrawEllipse(Vector3 p1, Vector3 p2, float height, Vector3 up)
{
    Quaternion quat = Quaternion.identity;
    int halfPoints = 25;
    int totalPoints = halfPoints*2;
    Vector3[] points1 = new Vector3[halfPoints];
    Vector3[] points2 = new Vector3[halfPoints];
    Vector3 midPoint = (p1 + ((p2 - p1)) * 0.5f);
    Vector3 tmp = Vector3.zero;

    quat *= Quaternion.LookRotation(Vector3.Cross(up,p2-p1));

    for (int i = 0; i < totalPoints; i++)
    {
       // build the coordinates in arbitrary space.
       tmp = Vector3.zero;
       tmp.x = Mathf.Cos(((float)i / totalPoints) * (Mathf.PI * 2)) * (Vector3.Distance(p1, p2) * 0.5f);
       tmp.y = Mathf.Sin(((float)i / totalPoints) * (Mathf.PI * 2)) * height;

       // modify the point for correct orientation.
       tmp = (quat * tmp);

       // push to the arrays (split to show outward and return halves)
       if (i < halfPoints)
         points1[i] = tmp + midPoint;
       else
         points2[i - halfPoints] = tmp + midPoint;
    }
    DrawPath(points1, Color.cyan, false);
    DrawPath(points2, Color.red, false);
    Debug.DrawLine(p1, p2, Color.black);
    DrawCross(points1[0], 0.2f, Color.cyan);
    DrawCross(points2[0], 0.2f, Color.red);
} 
```

'毫无疑问，这是一个愚蠢的问题，我错过了额外的旋转，或者我在旋转之前错过了对椭圆生成的调整，但我已经绕圈子跑了一段时间了是时候问任何可能更了解的人了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-13T16:15:09.870

*Solution from OP.*

The solution now seems obvious, simplify the orientation process. So I tweaked the coordinate generation to force the ellipse to be generated in the z/y plane, with the first point generated at 0,0,0 with this modification, the orientation becomes a simple LookRotation with a specified up vector, and then an offset to put it in the right place. (sometimes you just need a break from the code) This might only be one solution so if anyone has better ideas feel free to post them, but this works for me for now.

**This is the new code that works as desired**

```
public static void DrawEllipse(Vector3 p1, Vector3 p2, float height, Vector3 up)
{
    Quaternion quat = Quaternion.identity;
    int halfPoints = 25;
    int totalPoints = halfPoints*2;
    Vector3[] points1 = new Vector3[halfPoints];
    Vector3[] points2 = new Vector3[halfPoints];
    Vector3 midPoint = (p1 + ((p2 - p1)) * 0.5f);
    Vector3 tmp = Vector3.zero;
    Vector3 firstPoint = Vector3.zero;
    quat *= Quaternion.LookRotation(p2-p1, up);

    for (int i = 0; i < totalPoints; i++)
    {
        tmp = Vector3.zero;

        // build the coordinates in arbitrary space.
        tmp.z = -Mathf.Cos(((float)i / totalPoints) * (Mathf.PI * 2)) * (Vector3.Distance(p1, p2) * 0.5f);
        tmp.y = Mathf.Sin(((float)i / totalPoints) * (Mathf.PI * 2)) * height;

        if (i == 0) firstPoint = tmp;
        tmp -= firstPoint;
        // modify the point for correct orientation.
        tmp = (quat * tmp);

        // push to the arrays (split to show outward and return halves)
        if (i < halfPoints)
        {
            points1[i] = tmp + p1;
        }
        else
        {
            points2[i - halfPoints] = tmp + p1;
        }
    }

    //draw the results.
    DrawPath(points1, Color.cyan, false);
    DrawPath(points2, Color.red, false);
    Debug.DrawLine(p1, p2, Color.black);
    DrawCross(points1[0], 0.2f, Color.cyan);
    DrawCross(points2[0], 0.2f, Color.red);
} 
```

# java - 可以防止 JIT 优化方法调用吗？

> ID：12176175
> 
> 赞同：1
> 
> 时间：2012-08-29T10:45:29.727
> 
> 标签：java, jit, compiler-optimization

我们正在构建一个用于 Java 字节码程序的平均案例运行时分析的工具。其中一部分是测量实际运行时间。因此，我们将采用任意的、用户提供的方法，该方法可能有也可能没有结果，可能有也可能没有副作用（例如快速排序、阶乘、虚拟嵌套循环……）并执行它（使用反射），测量经过的时间。（我们是否正确地进行基准测试并不重要。）

在基准测试代码中，我们显然不对结果做任何事情（有些方法甚至没有结果）。因此，不知道 JIT 可能会做什么，事实上我们观察到它似乎有时会优化整个基准方法调用。由于基准测试方法在现实中并不是孤立地使用的，这使得基准测试毫无用处。

我们如何防止 JIT 这样做呢？我们不想完全关闭它，因为基准测试需要很长时间，并且无论如何我们都希望对“真实”运行时进行基准测试（因此我们希望 JIT 在方法中处于活动状态*）*。

我知道[这个问题](https://stackoverflow.com/questions/4205308/best-way-of-stopping-java-optimising-away-a-method-call-when-performance-testing)，但给定的场景太窄了；我们不知道结果类型（如果有的话），因此不能以 JIT 认为没有用的某种方式使用结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:48:08.853

简单的解决方案是编写一个更实际的基准测试，该基准测试几乎有用，因此不会被优化掉。

有许多技巧可以混淆 JIT，但这些都不太可能对您有所帮助。

这是一个基准示例，其中该方法通过反射、MethodHandle 调用并编译为空。

```
import java.lang.invoke.*;
import java.lang.reflect.*;

public class Main {
    public static void main(String... args) throws Throwable {
        for (int j = 0; j < 5; j++) {
            testViaReflection();
            testViaMethodHandle();
            testWithoutReflection();
        }
    }

    private static void testViaReflection() throws NoSuchMethodException, IllegalAccessException, InvocationTargetException {
        Method nothing = Main.class.getDeclaredMethod("nothing");
        int runs = 10000000; // triggers a warmup.
        long start = System.nanoTime();
        Object[] args = new Object[0];
        for (int i = 0; i < runs; i++)
            nothing.invoke(null, args);
        long time = System.nanoTime() - start;
        System.out.printf("A call to %s took an average of %.1f ns using reflection%n", nothing.getName(), 1.0 * time / runs);
    }

    private static void testViaMethodHandle() throws Throwable {
        MethodHandle nothing = MethodHandles.lookup().unreflect(Main.class.getDeclaredMethod("nothing"));
        int runs = 10000000; // triggers a warmup.
        long start = System.nanoTime();
        for (int i = 0; i < runs; i++) {
            nothing.invokeExact();
        }
        long time = System.nanoTime() - start;
        System.out.printf("A call to %s took an average of %.1f ns using MethodHandle%n", "nothing", 1.0 * time / runs);
    }

    private static void testWithoutReflection() {
        int runs = 10000000; // triggers a warmup.
        long start = System.nanoTime();
        for (int i = 0; i < runs; i++)
            nothing();
        long time = System.nanoTime() - start;
        System.out.printf("A call to %s took an average of %.1f ns without reflection%n", "nothing", 1.0 * time / runs);
    }

    public static void nothing() {
        // does nothing.
    }
} 
```

印刷

```
A call to nothing took an average of 6.6 ns using reflection
A call to nothing took an average of 10.7 ns using MethodHandle
A call to nothing took an average of 0.4 ns without reflection
A call to nothing took an average of 4.5 ns using reflection
A call to nothing took an average of 9.1 ns using MethodHandle
A call to nothing took an average of 0.0 ns without reflection
A call to nothing took an average of 4.3 ns using reflection
A call to nothing took an average of 8.8 ns using MethodHandle
A call to nothing took an average of 0.0 ns without reflection
A call to nothing took an average of 5.4 ns using reflection
A call to nothing took an average of 13.2 ns using MethodHandle
A call to nothing took an average of 0.0 ns without reflection
A call to nothing took an average of 4.9 ns using reflection
A call to nothing took an average of 8.7 ns using MethodHandle
A call to nothing took an average of 0.0 ns without reflection 
```

我曾假设 MethodHandles 比反射更快，但事实并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:54:31.303

我不相信有任何方法可以选择性地禁用 JIT 优化，除了一些实验性的优化（如逃逸分析）。

你这样说：

> 我们不想完全关闭它，因为基准测试需要很长时间，无论如何我们都希望对“真实”运行时进行基准测试。

但你*想要*做的正是那样。在真正的运行时，方法调用*将*被内联，如果它们不做任何事情，它们*将被优化掉。*因此，通过抑制这些优化，您将获得与实际程序中实际发生的情况不匹配的方法执行时间测量值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:01:27.920

基准测试的目的是尽可能接近实际性能，所以我看不出你会在这里获得什么。如果您怀疑 JIT 会做某些事情，并且您不想在正常使用中实际禁用它，那么最好的办法是使用该假设构建基准。如果有办法编写基准测试来强调它并使其在 JIT 下表现不佳，那也可能很有用，因为在分析器下运行基准测试将有助于确定它何时会降低效率。

# ios - Tapjoy 模拟器崩溃：-[NSMutableURLRequest _propertyForKey:]：消息发送到已释放实例

> ID：12176176
> 
> 赞同：0
> 
> 时间：2012-08-29T10:45:34.350
> 
> 标签：ios, ios-simulator, tapjoy

我已将 Tapjoy 添加到 iOS 应用程序中。

它在模拟器上崩溃，但在设备上运行良好。

输出：

```
-[NSMutableURLRequest _propertyForKey:]: message sent to deallocated instance 
```

TapjoyConnect.m 中的具体代码行是：

```
connectConnection_ = [[NSURLConnection alloc] initWithRequest:myRequest delegate:self]; 
```

它在模拟器上崩溃的任何原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:34:58.510

答案是变量“myRequest”并没有被创建它的人保留，所以当这条线被执行时，它已经被释放了。

您解决此问题的方法是跟踪该对象的来源（您的代码？），并确保其保留到进行此调用之后。

您在模拟器上而不是在设备上崩溃的原因（可能相反）是每个环境中回收内存的方式不同，如果对象没有被重用或移出范围，系统会很高兴继续运作。

# javascript - 日期原型属性

> ID：12176177
> 
> 赞同：0
> 
> 时间：2012-08-29T10:45:46.140
> 
> 标签：javascript

当我更深入地使用 Javascript 时，我在尝试测试时得到了这个奇怪的结果。

```
function CustomeObject() {
    this.type = "custom";
};
var node1 = document.createTextNode(Date.prototype);
var node2 = document.createTextNode(CustomeObject.prototype);

document.getElementsByTagName("body")[0].appendChild(node1);
document.getElementsByTagName("body")[0].appendChild(node2); 
```

结果如下：

**无效日期 [object 对象]**

正如我从互联网上的一个来源读到的，它说：**原型**是任何对象的内置**属性**，它实际上是一个对象本身。但是这个测试在日期对象上失败了。你能告诉我测试日期**原型属性**的代码有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:49:24.900

当您传递`Date.prototype`给`document.createTextNode()`它时，它将隐式调用`toString()`传递的对象。

的默认输出`toString()`是`[object Object]`，如您的第二个测试中所示。

但是`Date.prototype`有它*自己的* `toString()`函数，其目的是将当前`Date`对象（即`this`）作为文本返回。

```
var now = new Date();
console.log(now.toString()); // outputs current date
console.log(now);            // does the same due to implicit toString() call 
```

当您直接调用该函数时，它的`this`指针错误地包含`Data.prototype`而不是日期对象，因此`"Invalid Date"`输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:50:59.103

因为`Date.prototype`是一个`.toString()`返回的对象`Invalid Date`。

```
var d = Date.prototype;
console.log(d); // will output 'Invalid Date', because the object doesn't have any date info.
d.setFullYear(2012);
console.log(d); // will output the date string. 
```

# jquery-ui - jquery ui对话框内的dojo下拉按钮

> ID：12176178
> 
> 赞同：0
> 
> 时间：2012-08-29T10:45:47.437
> 
> 标签：jquery-ui, dojo

我在 jquery ui 对话框中放置了 dojo 下拉按钮。按钮的下拉列表不会显示在 jquery ui 对话框中，但会创建 dojo 按钮。我将 z-index 设置为超过 1000。你对这个问题有什么建议吗？

这是我的代码

```
 //links for dojo library
 <script type="text/javascript">

//beginning of TraderView(CDS) Actions Button

require(["dojo/ready", "dijit/form/DropDownButton", "dijit/DropDownMenu", "dijit/MenuItem", "dojo/dom"], function (ready, DropDownButton, DropDownMenu, MenuItem, dom) {
    ready(function () {

        //for document
        var menu = new DropDownMenu();
        var menuItem1 = new MenuItem({
            label: "Export to Excel",

            onClick: function () { alert('Export to Excel'); }
        });
        menu.addChild(menuItem1);

        var menuItem2 = new MenuItem({
            label: "Export to PDF",
            onClick: function () { alert('Export to PDF'); }
        });

        menu.addChild(menuItem2);

        var menuItem3 = new MenuItem({
            label: "Term Sheet",
            onClick: function () { alert('Term Sheet'); }
        });

        menu.addChild(menuItem3);

        var button = new DropDownButton({
            label: "Document",
            name: "dcment",
            dropDown: menu,
            id: "tvButton"
        });

        dom.byId("dropDownButtonDc").appendChild(button.domNode);

      });

   });

//end of TraderView(CDS) Actions Button
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:10:51.330

弹出`z-index`窗口是为每个弹出窗口计算的，因为您可以从弹出窗口打开一个弹出窗口，并且该子弹出窗口应该在父弹出窗口之上。你可以做的是设置`_beginZIndex`aka `dijit/popup`-`PopupManager`即第一个弹出窗口的值 - 1005 的值对我来说很好用 jQuery UI 对话框。

一个有效的 jsFiddle 示例：http: [//jsfiddle.net/phusick/q8V58/](http://jsfiddle.net/phusick/q8V58/)

**编辑：** `z-index: 1005`对话框被 DnD 移动后似乎还不够，所以我放了 10000 以确保安全。

```
require([
    "dojo/ready",
    "dojo/dom",
    "dijit/popup",
    "dijit/form/DropDownButton",
    "dijit/DropDownMenu",
    "dijit/MenuItem"
], function(
    ready,
    dom,
    PopupManager,
    DropDownButton,
    DropDownMenu,
    MenuItem
) {

    ready(function() {

        // set z-index
        PopupManager._beginZIndex = 1005;

        var menu = new DropDownMenu();
        var menuItem1 = new MenuItem({
            label: "Export to Excel",
            onClick: function () { alert('Export to Excel'); }
        });

        var menuItem2 = new MenuItem({
            label: "Export to PDF",
            onClick: function () { alert('Export to PDF'); }
        });

        var menuItem3 = new MenuItem({
            label: "Term Sheet",
            onClick: function () { alert('Term Sheet'); }
        });

        menu.addChild(menuItem1);
        menu.addChild(menuItem2);
        menu.addChild(menuItem3);

        var button = new DropDownButton({
            label: "Document",
            name: "dcment",
            dropDown: menu,
            id: "tvButton"
        });

        button.startup();
        button.placeAt(dom.byId("dropDownButtonDc"));

        $("#dialog1").dialog({ title: "dialog1"});

    }); 
});​ 
```

# android - 屏幕旋转后Android列表视图消失

> ID：12176179
> 
> 赞同：10
> 
> 时间：2012-08-29T10:45:48.993
> 
> 标签：android, listview, android-activity

在我的布局上，我有一些按钮可以做出一些选择，然后是一个按钮来执行对数据库的查询。此查询的结果显示在`ListView`此布局内部。

问题是，如果在我执行查询后旋转屏幕，它`ListView`就会消失并且必须再次执行查询。

我相信这是因为活动重新开始而发生的。按照[此处](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)的建议，我已在清单`android:configChanges="orientation|keyboardHidden"`中的活动和添加的代码中添加：

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {
      super.onConfigurationChanged(newConfig);
      setContentView(R.layout.mylayout);

    } 
```

但这不起作用。

这是我的活动的完整代码：

```
public class MyClass extends ListActivity implements OnClickListener, OnCheckedChangeListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylayout);

        // Creates the buttons and setOnClickListener and setOnCheckedChangeListener
    }

    @Override
    public void onClick(View v) {

        // Manages the buttons and their functions

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {
        // See what group in radio group is checked
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // After pressing one button, a query is made and a listview is shown. 
        // This it to handle the user choice after he clicks an item on the listview

    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
      super.onConfigurationChanged(newConfig);
      setContentView(R.layout.mylayout);

    }
} 
```

这很奇怪，因为我还有其他类似的活动：

```
public class AtoZ extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.atoz);

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);

    }

} 
```

这也会对数据库执行查询，将其显示在 a 上`ListView`，然后处理用户选择。如果我旋转屏幕，`ListView`仍然显示。

我能做些什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-29T17:23:43.943

在清单文件下的活动中使用 configChanges。

```
<activity
...
...
android:configChanges="orientation|screenSize|keyboard">
</activity 
```

这对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T11:37:50.403

有两件事可以解决你的问题：

**求解器 A：**

1.  **添加** `android:configChanges="orientation|keyboardHidden"`清单**xml**文件。
2.  **删除** `onConfigurationChanged(Configuration newConfig)`功能。

因为`onCreate()`每次初始化 Activity 时只调用一次。当您`onConfigurationChanged()`重新加载并使用空数据填充新视图`R.layout.mylayout`时=>您的列表不会与数据绑定。

**求解器 B：**

**将**您在 onCreate() 中编写的数据绑定代码移动**到**覆盖方法**`onStart()`**或**`onResume()`**. 我建议您使用`onStart()`数据绑定的情况。

您应该看到开发页面[**`Android Activity life cycle`**](http://developer.android.com/reference/android/app/Activity.html)

**（更新）：**

因为您`listContent`在单击列表项上的搜索按钮时加载您的，所以您必须维护活动中的数据以从中重建列表（例如：搜索字符串）。然后在`onStart()`你从这些数据中重建你的列表。

但是，单击列表的项目以更改整个列表本身时，您的逻辑很奇怪。请注意：`onListItemClick(..)`单击列表项上的按钮时也会触发。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T11:17:57.487

当您在 onConfigurationChanged 方法中执行 setContentView 时，会重新创建 ListView。您需要再次将数据加载到 ListView 中。如果要将 ListView 绑定到适配器，则需要在 onConfigurationChanged 中进行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-04T01:05:47.507

您必须覆盖`onSaveInstanceState`和`onRestoreInstanceState`

在`onSaveInstanceState`保存`ListView`列表上`Bundle`。

在 上`onRestoreInstanceState`，使用 恢复列表`Bundle`并重新创建适配器。

```
private ArrayList<String> data;

@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putSerializable("d", data);
    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    if (savedInstanceState != null) {
        data = (ArrayList<String>) savedInstanceState.getSerializable("d");
        ListViewAdapter adapter = new ListViewAdapter(this, data);
        ListView listView = (ListView) findViewById(R.id.layout_listview);
        listView.setAdapter(adapter);
    }
    super.onRestoreInstanceState(savedInstanceState);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-29T10:56:21.223

当您进行方向更改时，您将不得不重做查询（如果您不保存它），因为完成此操作后，会再次调用 oncreate。

您可以尝试将列表视图中的数据存储在共享首选项中。

# android - 首次运行后强制关闭

> ID：12176180
> 
> 赞同：0
> 
> 时间：2012-08-29T10:45:52.443
> 
> 标签：android, forceclose

我做了一个基于电话系统的项目。它适用于任何三星 android 设备、HTC 和摩托罗拉。但问题是，当我尝试在索尼爱立信 Android 设备中运行它时，即使我打开应用程序，它也会强制关闭。

`(1st time i open the application it works fine,2nd time open,getting force close....3rd time open, 4th time force close... repeated....)`

这是我的日志猫

```
08-29 16:53:03.346: E/AndroidRuntime(5812): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.excel.extel/com.excel.extel.ExtelMain}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.excel.extel/com.excel.extel.DialerTab}: android.view.InflateException: Binary XML file line #83: Error inflating class <unknown>
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.ActivityThread.access$1500(ActivityThread.java:121)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.os.Looper.loop(Looper.java:123)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.ActivityThread.main(ActivityThread.java:3701)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at java.lang.reflect.Method.invokeNative(Native Method)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at java.lang.reflect.Method.invoke(Method.java:507)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at dalvik.system.NativeStart.main(Native Method)
08-29 16:53:03.346: E/AndroidRuntime(5812): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.excel.extel/com.excel.extel.DialerTab}: android.view.InflateException: Binary XML file line #83: Error inflating class <unknown>
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1499)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:676)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.widget.TabHost.setCurrentTab(TabHost.java:348)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.widget.TabHost.addTab(TabHost.java:238)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at com.excel.extel.ExtelMain.onCreate(ExtelMain.java:67)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
08-29 16:53:03.346: E/AndroidRuntime(5812):  ... 11 more
08-29 16:53:03.346: E/AndroidRuntime(5812): Caused by: android.view.InflateException: Binary XML file line #83: Error inflating class <unknown>
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.Activity.setContentView(Activity.java:1657)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at com.excel.extel.DialerTab.onCreate(DialerTab.java:139)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
08-29 16:53:03.346: E/AndroidRuntime(5812):  ... 20 more
08-29 16:53:03.346: E/AndroidRuntime(5812): Caused by: java.lang.reflect.InvocationTargetException
08-29 16:53:03.346: E/AndroidRuntime(5812):  at java.lang.reflect.Constructor.constructNative(Native Method)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
08-29 16:53:03.346: E/AndroidRuntime(5812):  ... 32 more
08-29 16:53:03.346: E/AndroidRuntime(5812): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:715)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.content.res.Resources.loadDrawable(Resources.java:1713)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.view.View.<init>(View.java:1969)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.widget.ImageView.<init>(ImageView.java:116)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.widget.ImageButton.<init>(ImageButton.java:85)
08-29 16:53:03.346: E/AndroidRuntime(5812):  at android.widget.ImageBu 
```

有谁告诉我什么问题？是我的错还是套装的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:39:21.747

```
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

这意味着设备内存不足并被强制关闭。

现在，既然您说应用程序是第一次运行但以后不再运行，我相信您并没有释放资源。位图有时会占用大量空间，如果您将它们保存在内存中，如果设备出现 OOM，我不会感到惊讶。不同的设备具有不同的内存规格，这就是它在某些设备上运行但在其他设备上不运行的原因。

因此，我的建议是清除位图和您用于临时目的的其他存储。

如果这仍然不能解决您的问题，请将代码发布到您处理图像的位置，我们将尝试查看是否有更高效的内存方式来处理您正在做的事情。

祝你好运！

# actionscript-3 - 如何防止 itemRenderers 被 Flex 中的新实例替换

> ID：12176189
> 
> 赞同：1
> 
> 时间：2012-08-29T10:46:20.777
> 
> 标签：actionscript-3, apache-flex, air, flex4, itemrenderer

这个问题听起来微不足道，只是设置`virtualLayout`为假，但这不是我所追求的。

我有以下情况。我的 Flex 移动应用程序具有预定义的容器，通常是应用程序总宽度的一半。用户可以最大化这些组件，以便它们占据所有可用宽度。

`List`自然，对于以 a或显示数据的组件，`DataGroup`渲染器必须调整大小。开箱即用，但我需要它们在组件最大化时显示附加信息。为此，我创建了一个非常简单的方法来更新渲染器；

```
private function updateRenderer():void {
            _itemRenderer.properties = {isFullScreen: _isFullScreen, headerProperties:_headerProperties, visibleColumns:_visibleColumns, optimalColWidth:_optimalColWidth, grid:this.name, fids:_fids};
            _list.itemRenderer = _itemRenderer;
} 
```

渲染器属性（例如 visibleColumns ）会相应更改，并且由于渲染器在调整大小期间会自动失效，因此它们可以使用新属性重绘。

这一切都很好，但不幸的是，使用这种过程创建了新的渲染器，而不是简单地重用现有的渲染器并让它们重新绘制自己。

有没有办法改变这种行为，或者有人知道更好的方法来完成这样的任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:52:47.960

如果我理解您显示的代码，它将替换 itemRenderer 属性；所以“预计”当这种情况发生时，所有现有的渲染器都将被销毁——因为它们是用“旧”渲染器创建的——然后用“新”渲染器的实例替换。

您可以考虑直接在渲染器上更改属性：

```
 (_list.itemRenderer as ClassFactory).properties = {isFullScreen: _isFullScreen, headerProperties:_headerProperties, visibleColumns:_visibleColumns, optimalColWidth:_optimalColWidth, grid:this.name, fids:_fids}; 
```

然后强制您的 dataProvider 刷新，以便在需要时重绘所有 itemRenderer：

```
(_list.dataProvider as ArrayCollection).refresh() 
```

# objective-c - UItable 单元格溢出 ios

> ID：12176193
> 
> 赞同：6
> 
> 时间：2012-08-29T10:46:36.327
> 
> 标签：objective-c, ios, uitableview, ios-4.2, custom-cell

我正在做一个需要扩展单元格 onclick 以显示更多详细信息的应用程序。我使用了一个自定义单元并将它们添加到 UItableview 中。当我单击单元格时，它的动画效果很好并下降，当我再次单击时它上升，这是通过更改单元格的高度来完成的。实际的自定义单元格大小比我通常显示的单元格大。当我单击单元格时，会显示整个单元格。我遇到的唯一问题是数据溢出。未选择单元格时应隐藏这些数据。只有当它被选中时，才应该显示这些数据。

我参考了不同的文章，尝试更改颜色设置绑定对我不起作用。[我在这个问题iphone uitablecellview overflow](https://stackoverflow.com/questions/4539072/iphone-uitablecellview-overflow)中遇到了同样的问题，尝试了答案，但没有奏效。

我所需要的只是如何在自定义单元格未扩展时隐藏它的底部，并在扩展时显示它......！

这些是我的屏幕截图

![加载时](../Images/6bd1c395c6365fcbea7d1c693ded8765.png) 加载 ![当我点击一个单元格时](../Images/465e0f09128d65c6e880fc2edd6ba27d.png) 时单击单元格 ![当我单击第二个单元格时](../Images/df5211300ae5b9d5e82b35de20f6f4fc.png) 时]单击第二个单元格 ![当我点击展开的单元格时](../Images/b37ae2cd427c8cad2f05dc7a3426624b.png)
时单击已展开的单元格时这些是我使用过的代码片段...。

```
// Declaring the SearchResultTable.
    CGRect filterFrame = CGRectMake(0,31, 320, 400);
    self.searchResultTable = [[UITableView alloc] initWithFrame:filterFrame];
    self.searchResultTable.dataSource = self;
    self.searchResultTable.delegate = self;
    self.searchResultTable.backgroundColor = [UIColor whiteColor];
    self.searchResultTable.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
    self.searchResultTable.separatorColor = [UIColor lightGrayColor];
    [self.view addSubview:self.searchResultTable];

//Adding cells
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"ExpandedSearchResultTableCell";

    ExpandedSearchResultTableCell *cell = (ExpandedSearchResultTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell.contentView.clipsToBounds = YES;
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ExpandedSearchResultTableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

    }

    cell.productNameLable.text = @"Only this should be shown";
    cell.productListLabel.text = @"This Should be hidden.. Only shown when expanded";
    cell.productApplicationLable.text=@"This Should be hidden.. Only shown when expanded";
    cell.productTargetLable.text= @"This Should be hidden.. Only shown when expanded";
    cell.productQuantityLable.text=@"This Should be hidden.. Only shown when expanded";
    cell.productReactivityLable.text=@"This Should be hidden.. Only shown when expanded";;

    return cell;
}

//on click event
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // Deselect cell
    [tableView deselectRowAtIndexPath:indexPath animated:TRUE];

    // Toggle 'selected' state
    BOOL isSelected = ![self cellIsSelected:indexPath];

    // Store cell 'selected' state keyed on indexPath
    NSNumber *selectedIndex = [NSNumber numberWithBool:isSelected];
    [selectedIndexes setObject:selectedIndex forKey:indexPath]; 

    // This is where magic happens...
    [searchResultTable beginUpdates];
    [searchResultTable endUpdates];
}

//Getting the height depending on expanded or not
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    // If our cell is selected, return double height
    if([self cellIsSelected:indexPath]) {
        return kCellHeight * 3.0;
    }

    // Cell isn't selected so return single height
    return kCellHeight;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:10:42.340

如果您正在寻找具有普通 tableview 类型的单元格扩展，

[带有动画扩展单元格的 iPhone UITableView](http://www.roostersoftstudios.com/2011/04/14/iphone-uitableview-with-animated-expanding-cells/)

如果您使用分组表视图并希望扩展节标题的选择，

[表格视图动画和手势](http://disanji.net/iOS_Doc/#samplecode/TableViewUpdates/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010139-Intro-DontLinkElementID_2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:42:29.077

好的，我通过在 didSelectRowAtIndexPath 中使用单个标志和对 cellForRowAtIndexPath 单元格的引用来完成它。并根据折叠和拉伸设置我的标签可见和隐藏。标志会随着单元格是否被选中而相应更新......！！

谢谢大家的帮助..！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:57:05.040

糟糕，大量代码使您的帖子变脏了。

我不会通过你的代码。

我会解释你的逻辑。

1.  只有这个应该显示将进入你的 indexpath.row = 0;
2.  如果选择部分中的行数，则显示的单元格计数+ 1，否则为 1。

> ```
> cell.productNameLable.text = @"Only this should be shown";
> cell.productListLabel.text = @"This Should be hidden.. Only shown when expanded";
> cell.productApplicationLable.text=@"This Should be hidden.. Only shown when expanded";
> cell.productTargetLable.text= @"This Should be hidden.. Only shown when expanded";
> cell.productQuantityLable.text=@"This Should be hidden.. Only shown when expanded";
> cell.productReactivityLable.text=@"This Should be hidden.. Only shown when expanded";; 
> ```

这会使您的代码变脏。如果您要在一个单元格中显示所有数据，并且当您选择一个部分时只添加一个单元格，我建议将所有这些添加到不同的单元格中。

我仍然很困惑您为什么要进行这些长编码，[请参阅此答案以获得更好的解释](https://stackoverflow.com/questions/1938921/expand-collapse-section-in-uitableview)

# javascript - Javascript 嵌套事件

> ID：12176199
> 
> 赞同：1
> 
> 时间：2012-08-29T10:46:43.820
> 
> 标签：javascript, events, nested

我想做一个嵌套事件。通过嵌套事件，我的意思是这样的：

HTML：

```
<input type="text" onFocus='validStartDate()' name="start_date" id="startDate" /> 
```

Javascript：

```
function checkCorrectStart()
{
    document.getElementById("startDate").className = "focus";
    document.getElementById("startDate").onChange = function(){
        validStartDate();   
    };
}

function validStartDate()
{
   re = /^\d{4}\-\d{2}\-\d{2}$/;
   var aux = document.getElementById("startDate").value;
   var valid = false;

   if (aux.match(re))
   {
       document.getElementById("startDate").className = "correct";
       valid = true;
   }
   else
   {
       document.getElementById("startDate").className = "wrong";
   }
   return valid;
} 
```

这个想法是，当用户关注输入框时，它会在输入周围产生黄色阴影。然后当用户更改该输入框的内容时，它将验证它是否正确，如果正确则产生绿色阴影或红色阴影如果不正确。

关于如何做到这一点的任何想法或任何其他建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:46:17.073

如果您不想使用`jQuery`（使用纯 javascript），那么您可以试试这个

```
window.onload=function(){
    var el=document.getElementById("startDate");
    el.onfocus=function(){
        var currentClass=el.parentNode.className;
        if(currentClass!='correct') el.parentNode.className = "wrong";
    }
    el.onchange = validStartDate;   
    el.onkeyup = validStartDate;   
}

function validStartDate()
{
   var el=document.getElementById("startDate");
   var re = /^\d{4}\-\d{2}\-\d{2}$/;
   var aux = el.value;
   var valid = false;

   if (aux.match(re))
   {
       el.parentNode.className = "correct";
       valid = true;
   }
   else
   {
       el.parentNode.className = "wrong";
       valid = false;
   }
   return valid;
} 
```

我没有包括`css`这里，它在演示中可用，但您需要在您的页面中使用。

[**演示**](http://jsfiddle.net/896qz/5/)。

# php - Mysql：在多对多字段中保存数据

> ID：12176200
> 
> 赞同：0
> 
> 时间：2012-08-29T10:46:47.137
> 
> 标签：php, mysql

我来自 Python-Django 背景，现在我正在用 PHP 做我的项目。

我在 MySQL 中有三个表：

**demo_user_selected_tags**

```
+---------+---------+------+-----+---------+----------------+
| Field   | Type    | Null | Key | Default | Extra          |
+---------+---------+------+-----+---------+----------------+
| id      | int(11) | NO   | PRI | NULL    | auto_increment |
| user_id | int(11) | NO   | MUL | NULL    |                |
| tags_id | int(11) | NO   | MUL | NULL    |                |
+---------+---------+------+-----+---------+----------------+ 
```

**演示用户**

```
+--------------------+---------------+------+-----+---------+----------------+
| Field              | Type          | Null | Key | Default | Extra          |
+--------------------+---------------+------+-----+---------+----------------+
| id                 | int(11)       | NO   | PRI | NULL    | auto_increment |
| user_name          | varchar(100)  | NO   |     | NULL    |                |
| first_name         | varchar(100)  | NO   |     | NULL    |                |
| middle_name        | varchar(100)  | NO   |     | NULL    |                |
| last_name          | varchar(100)  | NO   |     | NULL    |                |
| image              | varchar(5000) | YES  |     | NULL    |                |
| password           | varchar(80)   | NO   |     | NULL    |                |
| role               | varchar(20)   | NO   |     | NULL    |                |
| org_name_id        | int(11)       | NO   | MUL | NULL    |                |
| timezone_id        | int(11)       | NO   | MUL | NULL    |                |
| city               | varchar(50)   | YES  |     | NULL    |                |
| state              | varchar(50)   | YES  |     | NULL    |                |
| country            | varchar(50)   | YES  |     | NULL    |                |
| street             | longtext      | YES  |     | NULL    |                |
| pin                | varchar(30)   | YES  |     | NULL    |                |
| user_type          | varchar(30)   | NO   |     | NULL    |                |
| status             | int(11)       | YES  |     | NULL    |                |
| primary_mobile     | varchar(100)  | YES  |     | NULL    |                |
| secondary_mobile   | varchar(100)  | YES  |     | NULL    |                |
| primary_landline   | varchar(100)  | YES  |     | NULL    |                |
| secondary_landline | varchar(20)   | YES  |     | NULL    |                |
| primary_email      | varchar(100)  | YES  |     | NULL    |                |
| secondary_email    | varchar(100)  | YES  |     | NULL    |                |
| notes              | longtext      | NO   |     | NULL    |                |
| date_created       | datetime      | YES  |     | NULL    |                |
| date_modified      | datetime      | YES  |     | NULL    |                |
+--------------------+---------------+------+-----+---------+----------------+ 
```

**演示标签**

```
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| tags  | varchar(150) | NO   |     | NULL    |                |
+-------+--------------+------+-----+---------+----------------+ 
```

在用户注册时，我正在尝试为用户存储标签。一个用户可以有多个标签。

所以我的问题是如何编写 SQL 查询，以便我的`demo_user_selected_tags`表也有一个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:50:33.200

例如，您应该使用像 Doctrine 这样的 ORM。

使用 Doctrine 您可以定义表模型及其与所有主键和外键的关系。之后，创建一个 User 对象就足够了，设置它的属性和标签并保存这个 User 对象 - Doctrine 将为您完成工作并将适当的 ID（值）填充到所有相关表中......

换句话说，假设我们有一个用户对象，它与标签有多对多的关系......我们为这个用户设置一些标签，然后保存用户：

```
$user = new UserModel();
$user->name = 'some name';
$user->email = 'some@email.com';
foreach($tags as $id => $tag)
    $user->tags[$id] = $tag; // in model definition the tags property is a many-to-many relation for Tags table...
$user->save(); // and the work is done... 
```

**这只是**如何完成这项工作的一个例子......

# javascript - 导致 Highcharts 错误 #13 的竞争条件

> ID：12176201
> 
> 赞同：2
> 
> 时间：2012-08-29T10:46:48.487
> 
> 标签：javascript, charts, highcharts, lazy-high-charts

我有一些动态生成的选项卡。单击任何此选项卡可同时加载多个图表（三个或四个），例如饼图、柱形图或折线图。我将此图表附加到动态生成的 html div 中。如果我必须单击一个选项卡并等待所有图表加载，一切都会很好。当我一个接一个地单击选项卡而不是等到所有图表都加载完毕时，就会出现问题。我在 highcharts.js 文件中收到一个 javascript 错误，该文件记录 Highcharts 错误 #13。据我所知，我正在做适当的文档准备检查，然后将我的图表加载到 div 中。似乎是什么问题？是否存在竞争情况或由于我的代码异步运行导致问题？这是代码：

```
//Function called on tablick:
function GetPod(podObj) {

        savedPortletsObj = [];
        var objtab = new Array();
        var htmlMarkup = '';
        $('#podHolder').empty();

        for (v = 0, pCount = podObj.length; v < pCount; v++) {
            htmlMarkup = "";
            // htmlMarkup = htmlMarkup + " <div  class='table-cell'>";
            htmlMarkup = htmlMarkup + " <article class='db-box bigFont' id='" + podObj[v].id + "_art' style='height: 100%;'>";
            htmlMarkup = htmlMarkup + " <div class='box-head' ><span> <strong>" + podObj[v].title.toString() + "</strong></span></div>";
            htmlMarkup = htmlMarkup + " <div class='dashboard-container'>";
            htmlMarkup = htmlMarkup + " <div class='tableContentDiv height250 fadeInBox' id='" + podObj[v].id + "'> "; // Charts are appended into this div
            htmlMarkup = htmlMarkup + " </div>";
            htmlMarkup = htmlMarkup + " </div>";
            htmlMarkup = htmlMarkup + " </article>";
            // htmlMarkup = htmlMarkup + " </div>";
            $(htmlMarkup).appendTo($('#podHolder')); // Finally appending the chart div to the parent div
            buildChart(podObj[v]);
            savedPortletsObj[v] = podObj[v];
        } 
```

// 然后我调用 buildChart

```
function buildChart(podObj) {
        switch (podObj.PodAttributes.type) {
            case "ColumnChart":
                // chartTypes[podObj.id] = podObj.PodAttributes.type;
              //  requirejs(["HTML5SpendDashboard/includes/js/views/column.chart.js"], function () {
                    var objChart = ColumnChart.getInstance();
                    onSuccessLoadChart(podObj, objChart);
              //  });
                break;
            case "dataGrid":
                //  chartTypes[podObj.id] = podObj.PodAttributes.type;
               // requirejs(["HTML5SpendDashboard/includes/js/views/grid.js"], function () {
                    var objChart = DataGrid.getInstance();
                    onSuccessLoadChart(podObj, objChart);
               // });

                break;
            case "lineChart":
               // //  chartTypes[podObj.id] = podObj.PodAttributes.type;
                //requirejs(["HTML5SpendDashboard/includes/js/views/line.chart.js"], function () {
                    var objChart = LineChart.getInstance();
                    onSuccessLoadChart(podObj, objChart);
               // });
                break;
            case "pieChart":
                //  chartTypes[podObj.id] = podObj.PodAttributes.type;
               // requirejs(["HTML5SpendDashboard/includes/js/views/pie.chart.js"], function () {
                    var objChart = PieChart.getInstance();
                    onSuccessLoadChart(podObj, objChart);
              //  });
                break;
        }
    }
    function onSuccessLoadChart(podObj, objChart) {

        objChart.BaseViewRef.Variables.ViewProperties = podObj;
        objChart.Build();

    } 
```

// 最后在为其创建实例后调用Build，例如：柱形图将是（为每个图表创建了单独的js文件）

```
var ColumnChart = (function () {
var instantiated;
var chart;
function init() {
    return {
        "ResultMethodName": "onResultHttpService",
        "Message": "ColumnChartdemo",
        "Build": function () {
            var objServiceLayer = $SL.getInstance();
            var param = {};
            param["QueryID"] = this.BaseViewRef.Variables.ViewProperties.InputParams;
            objServiceLayer.executeMethod("GetPodFilterData", param, "onResultHttpService", this, this.BaseViewRef.Variables.ViewProperties);

        },
        "BaseViewRef": $BV.getInstance(),
        "onResultHttpService": function (result, properties) {
            var json_str = Sys.Serialization.JavaScriptSerializer.deserialize(result);
            var data = [];
            var cat = [];
            var categoryField = properties.PodAttributes.categoryField;
            var valueField = properties.PodAttributes.valueField;
            for (var i in json_str) {
                var serie = new Array(json_str[i][categoryField], json_str[i][valueField]);
                var tmpCat = new Array(json_str[i][categoryField]);
                data.push(serie);
                cat.push(tmpCat);
            }

            $(document).ready(function () {
                chart = new Highcharts.Chart({
                    chart: {
                        renderTo: properties.id,
                        type: 'column'
                    },
                    credits: {
                        enabled: false
                    },
                    title: {
                        text: ''
                    },
                    subtitle: {
                        text: ''
                    },
                    xAxis: {
                        categories: cat
                    },
                    yAxis: {
                        labels: {
                            formatter: function () {
                                return this.value / properties.PodAttributes.divideBy
                            + properties.PodAttributes.dataTipUnitLabel.split('*')[1].toUpperCase();
                            }
                        },
                        min: 0,
                        title: {
                            text: ''
                        }
                    },
                    legend: {
                        layout: 'vertical',
                        backgroundColor: '#FFFFFF',
                        align: 'left',
                        verticalAlign: 'top',
                        x: 100,
                        y: 70,
                        floating: true,
                        shadow: true
                    },
                    tooltip: {
                        formatter: function () {
                            return '' +
                        this.x + ':' + '</br>' + properties.PodAttributes.dataTipUnitLabel.split('*')[0] +
                        Highcharts.numberFormat(this.y / properties.PodAttributes.divideBy, properties.PodAttributes.dPoint) +
                        properties.PodAttributes.dataTipUnitLabel.split('*')[1].toUpperCase();
                        }
                    },
                    plotOptions: {
                        series: {
                            allowPointSelect: true,
                            point: {
                                events: { click: function () {
                                    //                                    alert(this.category + ' : ' + Highcharts.numberFormat(this.y / properties.PodAttributes.divideBy, properties.PodAttributes.dPoint) +
                                    //                            properties.PodAttributes.dataTipUnitLabel.split('*')[1].toUpperCase());
                                    podsToRefresh = html5SpendDashboard.getInstance().getSavedPodObj();
                                    var objBuildChart = html5SpendDashboard.getInstance();
                                    for (var p = 0, pLen = podsToRefresh.length; p < pLen; p++) {
                                        objBuildChart.buildChart(podsToRefresh[p]);
                                    }
                                }
                                }
                            }
                        },
                        column: {
                            pointPadding: 0.2,
                            borderWidth: 0
                        }
                    },
                    series: [{
                        showInLegend: false,
                        data: data
                    }]
                });
            });         
        }

    };
};

return {
    getInstance: function () {
        return instantiated = init();
    }
}; 
```

})();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:41:15.580

我在实时更新图表时遇到了类似的问题。我能够通过在更新图表之前首先检查以确保容器存在来避免这种情况。

在您的情况下，您可以执行以下操作以确保容器存在：

```
if($("#" + properties.id).length == 1) {
    chart = new Highcharts.Chart({
                 //code
            });
} 
```

# jquery - 使用 jQuery Unobtrusive Validation 禁用对元素的验证

> ID：12176205
> 
> 赞同：13
> 
> 时间：2012-08-29T10:46:54.160
> 
> 标签：jquery, unobtrusive-validation

我正在生成页面上的元素列表，它们都附加了验证器。当我查看 HTML 源代码时，我看到如下内容：

```
<input type="text" id="email" name="email" data-val-required="No valid email address!" data-val="true"> 
```

我需要一种方法来动态启用/禁用此类元素的验证。我尝试`data-val`通过将属性设置为`false`然后返回来启用/禁用该属性`true`。但它似乎没有对此做出回应；验证总是存在的！

有谁知道如何动态启用/禁用某些字段的验证器？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-29T13:43:03.033

我实际上找到了一个更适合我需求的解决方案。我可以执行以下操作：

```
$(function() {
    var settngs = $.data($('form')[0], 'validator').settings;
    settngs.ignore = ".ignore";
}); 
```

有了它，我可以通过在元素中添加或删除类名来“切换”我想要的任何`ignore`元素。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-03T15:16:27.557

我认为这会有所帮助。

```
<div class="editor-field">
       @{ Html.EnableClientValidation(false); }
       @Html.TextBoxFor(m => m.BatchId, new { @class = "k-textbox" })
       @{ Html.EnableClientValidation(true); }
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-18T07:54:52.707

我会再添加一个选项，而不会覆盖不显眼的验证器默认值。由于特定元素的验证由`data-val`属性控制，您可以将其设置为`data-val="false"`.

因此，对于 Razor 助手，请使用：

```
@Html.TextBoxFor(model => Model.DateOfBirth, new { @class = "form-control", data_val = false }) 
```

对于新的 .net 核心语法，请使用：

```
<input asp-for="DateOfBirth" class="form-control" data-val="false"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-05T18:09:42.877

这对我来说效果更好：

```
$('#Reference').rules('add', 'required');
$('#Reference').rules('add', 'remove');
$('#Reference').rules('add', { minlength: 2 }); 
```

# objective-c - 适用于 iOS 的全功能文件下载管理器

> ID：12176206
> 
> 赞同：5
> 
> 时间：2012-08-29T10:47:10.260
> 
> 标签：objective-c, ios, download, file-manager

我一直在寻找一个不错的文件下载管理器，我可以在我的应用程序中使用，但找不到任何具有我想要的功能的东西......

*   排队多个异步下载
*   控制同时下载的数量
*   基于块的回调包括成功、失败和进度百分比更新
*   取消和暂停/恢复
*   恢复中断的下载（例如当应用程序被强制关闭时）

以下将是不错的奖金

*   剩余时间估计
*   能够更改队列中的顺序
*   处理长期存储/删除

有谁知道这样的事情？如果那里什么都没有，我想我可以自己推出并开源它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:52:20.297

[这是我的。](https://github.com/H2CO3/HCDownload)虽然回调是基于委托的而不是基于块的，但您可以轻松地调整它。您还可以通过检查当前下载的数量并仅在少于限制时才添加新的代码来轻松添加代码以限制并行下载的数量。它还具有剩余时间估计和很好地格式化数据大小。使用 NSFileHandle，它不会占用你的内存，而是直接写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T18:19:29.550

我正在寻找同样的东西。我还没有尝试过，但这似乎很有希望：

[https://github.com/robertmryan/download-manager](https://github.com/robertmryan/download-manager)

# java - 这里应该使用什么数据类型来接受来自服务器的响应

> ID：12176207
> 
> 赞同：2
> 
> 时间：2012-08-29T10:47:15.783
> 
> 标签：java, android, object, xml-rpc, xmlrpclib

我正在向**服务器发出****请求**，以使用函数获取详细信息。 我在调用该函数方面取得了**成功，因为它****不会**导致任何. `Magento` **`XMLRPC``multiCall()`
**`multiCall()`**`Exception`******

 ******我`Objects`用来**发送数据**，当我`Object` `DataType`用来获取**响应**时，它给出了`Exception`类似 的

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:200)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1019)
Caused by: java.lang.ClassCastException: [Ljava.lang.Object;
at org.xmlrpc.ProductService$doingBackTask.doInBackground(ProductService.java:94)
at org.xmlrpc.ProductService$doingBackTask.doInBackground(ProductService.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:185)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 
```

**我用来调用的代码如下：**

```
Object[] skuid=new Object[product_list.size()];
Object calling[]=new Object[product_list.size()];

for(int m=0;m<product_list.size();m++)
{
    skuid[m]=new Object[]{product_list.get(m).getp_Sku()};
    calling[m]=new Object[]{"catalog_product_attribute_media.list",skuid[m]};   
}

Object b[][];
try 
{
  // The Upcoming line causes Exception : java.lang.ClassCastException 
  b=(Object[][])client.callEx("multiCall",new Object[]{sessionId,calling});  
}
catch (XMLRPCException e) 
{
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:00:15.060

异常几乎是不言自明的：`callEx`方法调用的结果是类型`java.lang.Object`，您正试图将其强制转换为`String[][]`.

显然，返回的值不是 type `String[][]`。你有这个`callEx`方法的来源吗？如果是，我建议你深入研究它，看看它到底返回了什么。******

# java - RestFul Service (spring3) CLIENT java？

> ID：12176209
> 
> 赞同：2
> 
> 时间：2012-08-29T10:47:50.307
> 
> 标签：java, xml, json, spring

我正在尝试在客户端解组 JAXB，但我将**对象的属性设置为 NULL。**

这就是我正在做的解组

```
 URL url = new URL("http://localhost:9191/service/firstName/tony?format=xml");   

    HttpURLConnection conn = (HttpURLConnection) url.openConnection();

    conn.setRequestMethod("GET");
    conn.setRequestProperty("Accept", "application/atom+xml");

    if (conn.getResponseCode() != 200) {
        throw new RuntimeException("Failed : HTTP error code : "
                + conn.getResponseCode());
    }

    BufferedReader br = new BufferedReader(new InputStreamReader(
        (conn.getInputStream())));

    JAXBContext jaxbContext = JAXBContext.newInstance(LDAPUsers.class);
    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();

    LDAPUsers lu =  (LDAPUsers) jaxbUnmarshaller.unmarshal(br);
    ArrayList<LDAPUser> list = new ArrayList<LDAPUser>();

    //list.addAll(lu.getCounty());
    **System.out.println(lu.ldapUser.get(0).getFirstName());//this is giving NULL**

    conn.disconnect(); 
```

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:24:13.923

`ValidationEventhandler`您可以设置on 的一个实例，`Unmarshaller`以便在解组过程中出现任何问题时得到通知。这有助于调试问题：

```
 jaxbUnmarshaller.setEventHandler(new ValidationEventHandler() {

        @Override
        public boolean handleEvent(ValidationEvent event) {
            System.out.println(event.getMessage());
            return true;
        }

    }); 
```

**客户端示例**

*   [http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:15:59.597

检查您的类是否正确序列化并使用**@XmlRootElement**和**@XmlElement**进行注释。

检查[这个例子](https://stackoverflow.com/questions/5325362/jaxb-unmarshalling-multiple-xml-elements-into-single-class)和这个[另一个](http://loianegroner.com/2011/06/jaxb-custom-binding-java-util-date-spring-3-serialization/)。另一个[完整的例子](http://java.dzone.com/articles/spring-30-rest-example)。

放置一些断言来检查**not null** objects 和**list not empty**。

最后，如果您使用的是 spring 3，我不明白您为什么要管理连接和输入流...尝试使用控制器的方法，也许您需要一个自定义解组器：

```
@RequestMapping(method=RequestMethod.GET, value="/myurl")
public ModelAndView getUsers(@RequestBody List<LDAPUsers> users) { 
```

# c# - 潜在的并发问题？

> ID：12176216
> 
> 赞同：2
> 
> 时间：2012-08-29T10:48:14.813
> 
> 标签：c#, asp.net-mvc, multithreading, concurrency

我一直在构建 ASP.NET MVC 应用程序，当我启动它时我担心潜在的多线程问题。一个特别关注的是以下代码：

```
private static IDictionary<string, ISettings> _settingsDictionary = new Dictionary<string, ISettings>();

public T Settings<T>() where T : ISettings, new() {
    var key = typeof(T).FullName;

    if (!_settingsDictionary.ContainsKey(key))
        _settingsDictionary[key] = _settingsService.GetSettings<T>();

    return (T)_settingsDictionary[key];
} 
```

注意字典被定义为静态的。这允许我缓存字典，以便它为应用程序长度的每个请求返回相同的实例。

这在本地测试时效果很好，但我担心数百名用户使用它时可能会受到影响。这导致我调查 ConcurrencyDictionary。请您告诉我是否需要使用它以及如果是这种情况我将如何使用它。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T10:50:29.753

是的，这里存在潜在的数据竞争：

```
if (!_settingsDictionary.ContainsKey(key))
    _settingsDictionary[key] = _settingsService.GetSettings<T>(); 
```

这可能导致两个线程添加相同的键，因为它们可以在任何时候被中断。

您可以改用[ConcurrentDictionary.GetOrAdd](http://msdn.microsoft.com/en-us/library/ee378674.aspx)：

```
private static ConcurrentDictionary<string, ISettings> _settingsDictionary = new ConcurrentDictionary<string, ISettings>();

public T Settings<T>() where T : ISettings, new() {
    var key = typeof(T).FullName;

    return _settingsDictionary.GetOrAdd(key, _settingsService.GetSettings<T>());
} 
```

**编辑**：由于您不想`_settingsService.GetSettings<T>()`每次都被执行，因此可以选择：

```
private static IDictionary<string, ISettings> _settingsDictionary = new Dictionary<string, ISettings>();
private static object locker = new object();

public T Settings<T>() where T : ISettings, new() {
    var key = typeof(T).FullName;
    lock(locker) 
    {
        if (!_settingsDictionary.ContainsKey(key))
            _settingsDictionary[key] = _settingsService.GetSettings<T>();

        return (T)_settingsDictionary[key];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:15:54.323

是的，有一场比赛，因为如果在以下位置找不到钥匙：

```
if (!_settingsDictionary.ContainsKey(key)) 
```

然后在我们运行时：

```
_settingsDictionary[key] = _settingsService.GetSettings<T>(); 
```

可能有一把钥匙。

它甚至比只是不必要地更换更糟糕。如果线程 1 添加键需要调整大小，那么当线程 2 添加并且它被认为需要调整大小时，它可能是部分完成，并且几乎所有的赌注都没有进一步使用该字典。

重要的问题是，“这是我们将有大量线程同时访问字典的情况，还是这种情况很少见但我们需要防范它？”

在第一种情况下，使用 ConcurrentDictionary。在第二种情况下，只需为您当前的代码添加一个锁。ConcurrentDictionary 在并发方面提供了更好的性能（正如人们从名称中所期望的那样），但是当通常只有一个线程实际命中它时，围绕普通字典的锁会更好，但偶尔的并发调用是可能的。

替代两者，如果可能的设置数量很少，只需在开始时加载批次。如果没有更多的写作，字典对多个阅读者来说是安全的，并且零锁定是最快的。

# windows-phone-7 - Bing GeocodeService userState 使用作为自定义附加参数

> ID：12176217
> 
> 赞同：0
> 
> 时间：2012-08-29T10:48:18.800
> 
> 标签：windows-phone-7, request, parameter-passing, geocode, bing-maps

在我的 Windows Phone 7.1 应用程序中，我必须发送一个使用 Bing 地理编码服务的请求（使用地址：[http](http://dev.virtualearth.net/webservices/v1/geocodeservice/geocodeservice.svc/mex) : //dev.virtualearth.net/webservices/v1/geocodeservice/geocodeservice.svc/mex ，**而无需**`Always generate message contracts`在我的服务参考设置）。

我的请求是这样提出的：

```
BingMapGeoCodeService.GeocodeRequest request = new BingMapGeoCodeService.GeocodeRequest();

request.Options = new BingMapGeoCodeService.GeocodeOptions()
{
    Filters = new ObservableCollection<BingMapGeoCodeService.FilterBase>()
    {
        new BingMapGeoCodeService.ConfidenceFilter() { MinimumConfidence = BingMapGeoCodeService.Confidence.High}
    }
};

request.Credentials = ( ...my credentials... )

request.Address = new BingMapGeoCodeService.Address()
{
    AddressLine = String.IsNullOrEmpty(address) ? null : address.Trim(),
    Locality = String.IsNullOrEmpty(city) ? null : city.Trim(),
    PostalCode = String.IsNullOrEmpty(zipCode) ? null : zipCode.Trim()
}; 
```

...现在我必须以这种方式发送我的异步请求：

```
geocodeServiceClient.GeocodeAsync(request); 
```

一切正常，但我有一个小问题（当然有很多解决方法......但我想以最好的方式做到这一点！）：我想在我的请求中发送一个额外的参数（在在我的情况下，它只是一个`Guid`标识符，但也可以是一个`String`值！）当我从服务器获得响应时我会使用它（我需要它进行另一次内部检查）：

```
private void geocodeServiceClient_GeocodeCompleted(object sender, BingMapGeoCodeService.GeocodeCompletedEventArgs e)
{
    // HERE I WANT TO GET BACK MY VALUE, TO CHECK IT!  

    var geoResult = (from r in e.Result.Results
                     orderby (int)r.Confidence ascending
                     select r).FirstOrDefault();

    ... some more logic here ...
} 
```

我四处搜索，但也因为（在我看来）缺乏文档，我发现了该`GeocodeAsync()`方法的这个附加参数：

```
geocodeServiceClient.GeocodeAsync(request, userState); 
```

我可以将此参数用作我的请求的自定义附加参数吗？

将额外参数传递给第三方服务是否正确？

万一这样做不好：这个重载的含义和用法是什么？

为什么这么称呼它（我的意思是*userState*）？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:49:03.347

我终于找到了自己的方式：userState 参数是我正在寻找的。

关注这个关于 WCF 服务的问题： [http ://www.c-sharpcorner.com/uploadfile/prvn_131971/chapter-33-advanced-web-services/](http://www.c-sharpcorner.com/uploadfile/prvn_131971/chapter-33-advanced-web-services/)

# ruby - 迭代比线性代码慢吗？

> ID：12176222
> 
> 赞同：-2
> 
> 时间：2012-08-29T10:48:44.423
> 
> 标签：ruby, coding-style, standards

> **可能重复：**
> [迭代是否比线性代码慢？哪一个更可取？](https://stackoverflow.com/questions/12176893/is-iteration-slower-than-linear-code-which-one-is-preferable)

过去很多天我有一个问题，在用 ruby​​ 编写代码时，线性代码是否比迭代更快、更可取？

让我举个例子。有一个相同功能的代码块以两种不同的方式编写：

方式一：

```
['dog', 'cat', 'tiger'].each do |pet_name|
  puts "I have many pets, one of them is #{pet_name}."
end 
```

方式二：

```
puts "I have many pets, one of them is dog."
puts "I have many pets, one of them is cat."
puts "I have many pets, one of them is tiger." 
```

所以，我想知道哪个更好更可取？根据我的观点，我认为第二个将花费更少的时间和记忆。但我想确认。

# vb.net - 如何选择网络浏览器的下拉菜单项？视觉基础 2008 2010

> ID：12176224
> 
> 赞同：1
> 
> 时间：2012-08-29T10:48:46.763
> 
> 标签：vb.net, visual-studio-2010, combobox, html-select

你好，我所有的朋友和读者。我正在创建一个应用程序，我需要在其中选择 Webbrowser 的组合框/下拉列表选项。实际上，我的程序的工作是它应该匿名评论（发送/提交文本）到我的 blogspot 页面（隐藏页面）。我将在我的其他程序中使用此方法向我发送反馈。我不想使用电子邮件服务，因为某些防病毒软件可以检测到它，并且可能某些专家可能会破解我的电子邮件密码。所以我决定使用这种方法。

我的问题是博主评论框选择的项目是“谷歌帐户”或“选择一个选项”我想将所选项目更改为“匿名”。我用谷歌搜索并尝试了许多代码示例。但 ：-（

这是我的代码：

```
Public Class Form1

 Dim pagepathh As String = "C:\Users\username\Desktop\sample.htm"
Dim posturl As String = "<iframe allowtransparency=""true"" class=""blogger-iframe-colorize blogger-comment-from-post"" frameborder=""0"" height=""234px"" id=""comment-editor"" name=""comment-editor"" src=""http://www.blogger.com/comment-iframe.g?blogID=8713182853230782541&amp;pageID=4831696032518082948&amp;blogspotRpcToken=9354446#%7B%22color%22%3A%22rgb(255%2C%20255%2C%20255)%22%2C%22backgroundColor%22%3A%22rgb(20%2C%2020%2C%2020)%22%2C%22unvisitedLinkColor%22%3A%22rgb(136%2C%20136%2C%20136)%22%2C%22fontFamily%22%3A%22Arial%2C%20Tahoma%2C%20Helvetica%2C%20FreeSans%2C%20sans-serif%22%7D"" width=""100%""></iframe>"
'This Is Bloger Comment Body Url. 
```

Form1 加载：

```
My.Computer.FileSystem.WriteAllText(pagepathh, posturl, False)
    wb1.Navigate(pagepathh) 'WB1 is my webbrowser. 
```

Button1（发布按钮）点击：

```
wb1.Document.GetElementById("commentBodyField").SetAttribute("Value", tb_comment.Text) ' tb_Comment is comment textbox. 
```

`I want To Place Some Code Here To Set Combobox Selected Item "anonymously".`

```
 wb1.Document.GetElementById("postCommentSubmit").InvokeMember("click") 
```

这是 Blogspot 下拉列表 HTML 代码：

```
<select id="identityMenu" name="identityMenu" dir="ltr" onchange="BLOG_CMT_onSelectorChange()" style="display: inline; ">
<option value="NONE" disabled="">Select profile...</option>
<option value="NONE" disabled=""> </option>
<option value="GOOGLE">Google Account</option>
<option value="NONE">LiveJournal</option>
<option value="NONE">WordPress</option>
<option value="NONE">TypePad</option>
<option value="NONE">AIM</option>
<option value="OPENID">OpenID</option>
<option value="NONE" disabled=""> </option>
<option value="NAMEURL">Name/URL</option>
<option value="ANON">Anonymous</option> 
```

附加信息：

```
Platform: Visual Basic Express 2010
.Net Framework is 2.0
Webpage Dropdown List Id: "identityMenu"
Webpage Button Submit Id: "postCommentSubmit"
Webpage Comment Textbox Id: "commentBodyField" 
```

请真的为我糟糕的英语拼写和语法错误感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T20:23:00.793

您需要做的是在 HTML 中使用 select 的 id，即“identityMenu”，然后将“value”属性设置为“ANON”，这是您要选择的 Anonymous 选项的值。您可以使用以下代码执行此操作。希望这可以帮助。

```
wb1.Document.GetElementById("identityMenu").SetAttribute("value","ANON") 
```

# windows - 如何模拟windows服务粉碎

> ID：12176226
> 
> 赞同：0
> 
> 时间：2012-08-29T10:49:00.797
> 
> 标签：windows, service

我有一个非常基本的问题，如何模拟 Windows 服务粉碎，

我找到了一种如何设置服务规则以在失败时重新启动自己的方法，

现在我只想检查一下，

我不想在我的项目中添加代码（我有 3 个）来模拟暗恋，我更喜欢从外部模拟它，

我更喜欢这样通用的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:51:14.690

可能性：

*   在任务管理器中手动找到该`.exe`服务并终止它
*   以编程方式定位服务进程并使用 WINAPI[`TerminateProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)

# java - 插入文档时自动调整图像

> ID：12176228
> 
> 赞同：1
> 
> 时间：2012-08-29T10:49:02.937
> 
> 标签：java, image, itext, rtf

我正在尝试使用 iTextRtf api 将图像插入 rtf 文档。插入部分已完成，但由于图像大小，图像未完全显示在文档中。我在插入图像时设置了恒定的宽度和高度，但在这种情况下，如果插入的图像尺寸较小，则该图像将扩展为指定的恒定宽度和高度。因此图像显得有点模糊。

您能否建议我如何自动调整图像以使其按原样显示。因为当我们在 word 文档中复制和粘贴图像时，它们会按原样插入。

希望这有点道理。

谢谢，阿努杰夏尔马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:02:56.843

您不能使用检查来查看图像是否小于恒定的宽度和高度。如果是这样，您不调整大小，否则您会调整大小？

# sql - 如何在sql server中水平旋转表格

> ID：12176230
> 
> 赞同：10
> 
> 时间：2012-08-29T10:49:10.320
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, pivot

我有列的表：

```
Sr.no  Subject  No of class attended    
-------------------------------------
1       English           3
2       Maths             4
3       SocialScience     5 
```

我想要这种格式的表格

```
English    Maths   SocialScience
---------------------------------
3            4          5 
```

我试过这个：

```
Select case when subject ='Maths' then COUNT(No_of_Candidates) else null  end as Maths 
```

但有了这个我得到这样的数据：

```
 English    Maths   SocialScience
---------------------------------
   3            
               4
                         5 
```

请帮助我应该如何解决这个问题..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T11:21:44.083

正如你所说，你不想要这样的输出：

```
 English    Maths   SocialScience
---------------------------------
   3            
               4
                         5 
```

您需要像这样使用子查询：

```
SELECT English,Maths,SocialScience
FROM (
SELECT Subject,No_of_class_attended
  FROM mytable) up
PIVOT 
(Sum([No_of_class_attended]) 
 for Subject in ([English],[Maths],[SocialScience])) p 
```

输出：

```
English    Maths   SocialScience
---------------------------------
3            4          5 
```

### [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!18/6abdf/2)

有关更多信息，请参阅[SQL SERVER – PIVOT 和 UNPIVOT 表示例](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T10:50:59.227

使用[枢轴](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

```
SELECT *
FROM yourtable
PIVOT 
(Sum([No of class attended]) for Subject in ([English],[Maths],[SocialScience])) p 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T11:20:27.513

podiluska 解决方案是正确的，如果您想将其他主题添加到表中，并且不想更改查询，我只想分享一个动态解决方案。但是它在长度上有一些限制，但是您可以肯定地将它用于某些情况：

```
DECLARE @SQL nvarchar(MAX)
DECLARE @ColNames nvarchar(max)

SET @ColNames = ''

SELECT @ColNames = (CASE WHEN subjects.Subject IS NOT NULL THEN @ColNames + '[' + subjects.Subject + '],' ELSE '' END)
FROM subjects

SET @ColNames = LEFT(@ColNames, LEN(@ColNames) - 1)

EXEC('SELECT *
FROM subjects
PIVOT 
(Sum([classNum]) for Subject in (' + @ColNames + ')) p') 
```

这是一个[SQL Fiddle](http://www.sqlfiddle.com/#!3/6c905/1)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T17:48:08.867

如果你不想使用 PIVOT 关键字，你可以简单地使用 MAX：

```
Select MAX(case when subject ='Maths' then No_of_Candidates else null  end) as Maths
,MAX(case when subject ='English' then No_of_Candidates else null  end) as English
,MAX(case when subject ='SocialScience' then No_of_Candidates else null  end) as SocialScience
from tableName 
```

例如，如果表格包含多个学生的结果，则需要使用 GROUP BY，例如：

```
Select MAX(case when subject ='Maths' then No_of_Candidates else null  end) as Maths
,MAX(case when subject ='English' then No_of_Candidates else null  end) as English
,MAX(case when subject ='SocialScience' then No_of_Candidates else null  end) as SocialScience
from tableName Group By StudentID 
```

任何值都大于 NULL，因此 MAX 将消除 NULL

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-06T14:57:41.203

所以我遇到了将行转换为列的要求，我想根据数据动态增加列（而不是像英语、数学等那样对它们进行硬编码。你明白了）

这是我的 [示例数据](https://i.stack.imgur.com/aqKFn.png)

代码：

```
DECLARE @SQL NVARCHAR(MAX)=''
DECLARE @ColNames NVARCHAR(max)=''

;WITH mycte
AS 
( 
    SELECT *
    ,ROW_NUMBER() OVER ( PARTITION BY SubjectLearnt ORDER BY SubjectLearnt) AS RN
    from STUDENTS
)
SELECT @ColNames = (CASE WHEN mycte.SubjectLearnt IS NOT NULL THEN @ColNames + mycte.SubjectLearnt + ',' ELSE '' END)
FROM mycte
WHERE RN=1
SET @ColNames = LEFT(@ColNames, LEN(@ColNames) - 1)

EXEC('SELECT *
FROM students
PIVOT 
( Sum([subjectMarks]) for SubjectLearnt in (' + @ColNames + ')) p') 
```

# java - 处理java类型

> ID：12176234
> 
> 赞同：0
> 
> 时间：2012-08-29T10:49:22.380
> 
> 标签：java

java 真的以不同于自定义对象的方式处理所有原始类型吗？当我检查并试图“解释”这个简单实验程序的结果时，我提出了这个问题：

```
public class RandomObject {

 String name;
 int value;

public RandomObject(String s, int i){
setName(s);
setValue(i);
}

public int getValue() {
return value;
}

public void setValue(int value) {
this.value = value;
}

public String getName() {
return name;
}
public void setName(String name) {
this.name = name;
 }

}

public static void main(String[] args) {

int x = 2;
int y = x;
System.out.println(y);
x = 4;
System.out.println(y);

RandomObject obj1 = new RandomObject("object1", 4);
RandomObject obj2;

obj2 = obj1;

System.out.println(obj2.getValue());
obj1.setValue(17);
System.out.println(obj2.getValue());

 } 
```

结果是：2 2 4 17

尽管 x 已更改，但 y 的值保持不变，而在对象中，更改会影响它们两者。所有原始类型（整数除外）是否都会发生同样的情况，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:54:13.213

Java*确实*以类似的方式对待存储在`y`和`obj2`变量中的值（`y = x`分别`obj2 =`为 obj1`），但关键区别在于，对于 Objects，变量仅包含对实际对象的*引用*，而不是数据值本身.

```
int x,y;
x = 2;
y = x; //x = 2, y = 2
x = 3; //x = 3, y = 2 - Changing x does not change y

Object a,b;
a = new MyObject("foo"); //Create Object O on the heap, a = [Address of Object O]
b = a; //a = [Address of Object O], b = [Address of Object O]
a.updateValue("barr"); //Update a property of Object O
//a and b still contain [Address of Object O], but Object O has a new value.
a = new MyObject("Bazz"); //Create Object P, a = [Address of Object P]
//a = [Address of Object P], b = [Address of Object O] 
```

需要注意的关键是变量只有在有赋值（`=`）语句时才会更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:59:56.247

在 Java 中，任何类型的对象变量都只包含一个引用（指针），指向它们所代表的数据。当您将 obj2 分配给 obj1 时，您是在说：

> 将 obj2 中的地址放入 obj1 中。

当您使用点运算符“。”时 你是说

> 那个地址的对象，给我那个对象。

任何类型的原语变量实际上都存储数据本身。所以当你说

```
int i = 2;
int j = 3;

j = i; 
```

> 将值 2 存储在 j 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:53:22.907

您只是分配`Obj1 to Obj2` 分配对于两者都是相同的。`Immutable`当您尝试更改值时，概念就会出现。

下面的例子：

```
 String one = "String";
    String two = one;
    System.out.println("equal: " + one.equals(two));
    System.out.println("same:  " + (one == two));
    // Change one
    one = one.concat("concat");
    System.out.println("equal: " + one.equals(two));
    System.out.println("same:  " + (one == two)); 
```

它输出

```
equal: true
same:  true
equal: false
same:  false 
```

因为`String`每次`immutable`操作`String`都会创建新的`String`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:00:55.417

```
RandomObject obj1 = new RandomObject("object1", 4); 
```

此分配首先创建一个对象`RandomObject`并将其引用分配给`obj1`。

```
obj2 = obj1; 
```

现在`obj1`，`obj2`两者都引用同一个对象。运行的任何操作`obj1`都会反映到创建的对象，同时被. 引用`obj2`。因此`obj2`也会显示任何操作对`obj1`直接或间接篡改创建的对象的副作用。

但是删除`obj1`like的引用`obj1=null`不会影响`obj2`，因为引用已更改并且`obj2`现在仅指向创建的对象。

[更多信息在这里](http://www.java-samples.com/showtutorial.php?tutorialid=147)

# java - struts-config.xml 配置映射

> ID：12176238
> 
> 赞同：0
> 
> 时间：2012-08-29T10:49:25.830
> 
> 标签：java, struts

在 struts-config 我有这样的动作：

```
<action
      path="/action/basket"
      type="com.xxx.BasketAction"
      name="basketForm"
      scope="session"
      unknown="false"
      validate="false"
    >
      <forward
        name="displayItems"
        path="EshelfItems"
        redirect="false"
      />
      <forward
        name="displayItems-redirect"
        path="/action/basket.do?fn=display"
        redirect="true"
      />
      <forward
        name="displayBasket"
        path="/basket.jsp"
        redirect="false"
      />
    </action> 
```

在哪里可以找到映射`/action/basket.do?fn=display`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:23:32.970

是的，您的问题不清楚..当您点击`/action/basket.do?fn=display`它时，将在您的 struts 配置中使用以下映射。

```
<action
      path="/action/basket" 
```

然后它将执行

```
com.xxx.BasketAction 
```

并且在那个类中，如果你愿意，你可以阅读参数`fn=display`，然后做一个转发，这将在`<forward>...</forward>`你的 struts 配置映射中工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:13:48.090

根据[http://struts.apache.org/1.x/faqs/works.html](http://struts.apache.org/1.x/faqs/works.html)：

> 在框架配置文件中，您将路径与应用程序的控制器组件相关联，称为操作类（即“登录”==> LoginAction 类）。这告诉 ActionServlet 对于传入请求“http://myhost/myapp/login.do”，它应该调用您的控制器组件 LoginAction。
> 
> 请注意此 URL 中的扩展名 .do。该扩展使您的容器（即Tomcat）调用ActionServlet，它将“登录”一词视为您想要做的事情。配置被引用，你的 LoginAction 被执行。

检查检查请求参数的`BasketAction`类。 如果找不到给定映射的操作类，那么调试 [RequestProcessor 的处理](http://struts.apache.org/1.2.4/api/org/apache/struts/action/RequestProcessor.html#process%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)方法也很有用。`fn=display`

# xml - 如何比较 XML 文件

> ID：12176239
> 
> 赞同：14
> 
> 时间：2012-08-29T10:49:25.870
> 
> 标签：xml, diff

我有两个由某些工具生成的 XML 文件 (XSD)。
该工具不保留元素的顺序，因此尽管内容相同，但比较它，因为文件不同会导致文本。
是否有一些工具可以在比较之前对元素进行排序并启用文档的文本比较？当然，排序需要递归完成。

数据示例：
文件 A：

```
<xml>
  <A/>
  <B/>
</xml> 
```

文件 B：

```
<xml>
  <B/>
  <A/>
</xml> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-12-02T16:39:09.720

我有一个类似的问题，我最终发现：[http ://superuser.com/questions/79920/how-can-i-diff-two-xml-files](http://superuser.com/questions/79920/how-can-i-diff-two-xml-files)

那篇文章建议先做一个规范的 XML 排序，然后再做一个 diff。如果您使用的是 Linux、Mac，或者您的 Windows 安装了 Cygwin 之类的东西，则以下内容应该对您有用：

```
$ xmllint --c14n FileA.xml > 1.xml
$ xmllint --c14n FileB.xml > 2.xml
$ diff 1.xml 2.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T12:36:01.970

查看[Using XSLT to Assist Regression Testing](http://www.xml.com/pub/a/2002/12/04/xsltcookbook.html)描述了使用 xslt 的解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-16T09:34:14.197

对于它的价值，我创建了一个 java 工具（实际上是 kotlin），用于对 xml 文件进行有效且可配置的规范化。

它将永远：

*   按名称对节点和属性进行排序。
*   删除命名空间（是的 - 它可能 - 假设 - 是一个问题）。
*   漂亮地打印结果。

此外，您可以告诉它：

*   删除给定的节点名称列表——也许你不想知道一段元数据的值——比如说`<RequestReceivedTimestamp>`已经改变了。
*   在父项的上下文中对给定的集合列表进行排序-也许您不在乎`<Contact>`条目的顺序`<ListOfFavourites>`已更改。

它使用 XSLT 并使用链接有效地完成上述所有工作。

# 限制

它确实支持排序嵌套列表 - 在外部列表之前排序最里面的列表。但它不能可靠地对任意级别的递归嵌套列表进行排序。

如果您有这样的需求，您可以 - 在使用此工具后 - 比较结果的排序字节数组。如果仅存在列表排序问题，它们将是相等的。

# 在哪里得到它

你可以在这里得到它：[XMLNormalize](https://github.com/JensKrogsboll/xml-normalize)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T22:32:06.650

XML 样本根本不同。即使内容和层次结构可能相同，对等点之间的关系也不同。当 XML 被解析时，它被解析成一个称为 DOM 的结构，其中单元之间的关系非常重要。如果您想忽略对等实体之间关系的性质，那么您可能需要定制软件。我建议找到一些简单的开源 XML 感知差异工具并添加您需要的其他要求。[我在http://prettydiff.com/](http://prettydiff.com/)上写了一篇文章，但我建议您在做出决定之前四处看看有什么可用的，因为编辑别人的算法可能需要一些繁重的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-10T08:24:09.347

您可以使用 perl 模块 DifferenceMarkup [http://metacpan.org/pod/XML::DifferenceMarkup](http://metacpan.org/pod/XML::DifferenceMarkup)或 PHP 中的 xmldiff pecl.php.net/xmldiff 扩展。两者都将生成人类可读的 XML 差异文档。

# asp.net - ASP.NET 会话状态提供程序

> ID：12176242
> 
> 赞同：3
> 
> 时间：2012-08-29T10:49:35.140
> 
> 标签：asp.net, ajax, session, session-state

我们的 ASP.NET 应用程序在同一个会话中并行发送多个 Ajax 请求。`HttpSessionState`我们还在其中一些请求期间读/写。我想要的是所有并发请求出于性能原因并行执行。我得到的是它们由 ASP.NET 序列化。我尝试了配置`enableSessionState="ReadOnly"`，但这破坏了我们的表单身份验证。

有没有办法在一个会话中同时获得会话状态和并发？我需要使用自定义`SessionState`还是`Provider`？有这方面的样本吗？

PS 在访问 SessionState 时，我并不担心线程安全——我可以通过编程方式做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:48:33.433

从 MSDN（[链接](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)）：

> 但是，如果对同一个会话发出两个并发请求（通过使用相同的 SessionID 值），则第一个请求将获得对会话信息的独占访问权。第二个请求仅在第一个请求完成后执行。

因此，至少对于那些需要对 Session 进行写访问的 AJAX 调用，您对默认提供程序不走运。

不确定您是否可以使用自定义提供程序解决此问题。

您*可以*通过`ASP.NET_SessionId`在`HttpModule`. 请参阅我对这个[问题的](https://stackoverflow.com/questions/11250109/rest-wcf-service-locks-thread-when-called-using-ajax-in-an-asp-net-site)[回答](https://stackoverflow.com/a/11324745/1429080)。

**编辑：**为了使这个答案更加独立，我添加了一个稍微修改的版本`HttpModule`和一些讨论（进一步向下）。下面是可用于防止 Session 状态序列化 Ajax 调用的模块代码：

```
using System; 
using System.Web; 

namespace TestModule 
{ 
    public class TestPreventCookie : IHttpModule 
    { 
        public void Dispose() 
        { 
        } 
        public void Init(HttpApplication application) 
        { 
            application.BeginRequest += 
                (new EventHandler(this.Application_BeginRequest)); 
            application.PostAcquireRequestState += 
                (new EventHandler(this.Application_PostAcquireRequestState)); 

        } 
        private void Application_BeginRequest(Object source, EventArgs e) 
        { 
            //prevent session cookie from reaching the service 
            HttpApplication application = (HttpApplication)source; 
            HttpContext context = application.Context; 
            if (BlockCookie(context)) 
            { 
                context.Request.Cookies.Remove("ASP.NET_SessionId"); 
            } 
        } 
        private void Application_PostAcquireRequestState(Object source, EventArgs e) 
        { 
            HttpApplication application = (HttpApplication)source; 
            HttpContext context = application.Context; 
            if (BlockCookie(context)) 
            { 
                var s = context.Session; 
                if (s != null) 
                    s.Abandon(); 
            } 
        }
        private bool BlockCookie(HttpContext context)
        {
            // put code here that determines if the session cookie should be blocked
            // this could be based on the path of the current request for instance
            // only block the cookie when you *know* that access to the Session is not needed
        }
    } 
} 
```

这个模块背后的想法是，使用基于项目要求的一些标准，我们`ASP.NET_SessionId`从当前上下文中删除 cookie（注意，我们不会在客户端将其过期）。

这意味着在请求管道中，服务器将创建一个新会话。为了防止这个新创建的会话破坏`ASP.NET_SessionId`客户端上现有的 cookie，我们在它创建后立即放弃它。

最终结果是每个被模块“拦截”的请求都会像没有会话一样执行。

# oracle11g - 如何提高Oracle select 性能？

> ID：12176244
> 
> 赞同：0
> 
> 时间：2012-08-29T10:49:38.210
> 
> 标签：oracle11g

下面的查询需要超过 1 分钟，如何提高性能。两个表都在进行全扫描。如何避免？

**查询计划：**

```
SELECT STATEMENT  ALL_ROWSCost: 62  Bytes: 14,355  Cardinality: 45          
    3 HASH JOIN  Cost: 62  Bytes: 14,355  Cardinality: 45   
        1 TABLE ACCESS FULL TABLE SYSADM.POSITIONS Cost: 9  Bytes: 520  Cardinality: 4  
        2 TABLE ACCESS FULL TABLE SYSADM.PORTCONSUMPTION Cost: 52  Bytes: 797,202  Cardinality: 4,218  

SELECT     
     a.Consumption    AS Consumption     ,
     a.Cost      AS Cost      ,
     a.CreatedBy     AS CreatedBy     ,
     a.CreatedDate    AS CreatedDate     ,
     a.UpdatedBy     AS UpdatedBy     ,
     a.UpdatedDate    AS UpdatedDate   

   FROM PortConsumption a   

   JOIN Positions b
   ON  a.PortRotationId = b.Id

   WHERE  b.VoyageId ='82A042031E1B4C38A9832A6678A695A4'; 
```

**职位（* *115970****条记录）* *

```
Id - Primary key (indexed)
VoyageId - indexed 
```

**端口消耗（* *1291000****条记录）* *

```
Id - Primary key (indexed)
PortRotationId - indexed 
```

执行后

dbms_stats.gather_table_stats ('SYSADM', 'POSITIONS');
dbms_stats.gather_table_stats ('SYSADM', 'PORTCONSUMPTION');

完全扫描没有发生，但性能仍然相同，需要 50 秒。

计划

```
SELECT STATEMENT  ALL_ROWSCost: 20  Bytes: 16,536  Cardinality: 52                  
    6 NESTED LOOPS              
        4 NESTED LOOPS  Cost: 20  Bytes: 16,536  Cardinality: 52        
            2 TABLE ACCESS BY INDEX ROWID TABLE SYSADM.POSITIONS Cost: 5  Bytes: 520  Cardinality: 4    
                1 INDEX RANGE SCAN INDEX SYSADM.INX_POSITIONS_VOYAGEID Cost: 3  Cardinality: 4  
            3 INDEX RANGE SCAN INDEX SYSADM.INX_PORTCONS_PORTROTID Cost: 2  Cardinality: 12     
        5 TABLE ACCESS BY INDEX ROWID TABLE SYSADM.PORTCONSUMPTION Cost: 4  Bytes: 2,256  Cardinality: 12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:14:00.173

您需要收集表的统计信息，因为 Oracle 目前认为 POSITIONS 有 4 行而不是 115970，而 PORTCONSUMPTION 有 4218 行而不是 120 万行，因此对两者进行全面扫描是回答查询的最佳方式。

此代码将使用默认设置收集 2 个表的统计信息：

```
begin
    dbms_stats.gather_table_stats ('SYSADM', POSITIONS');
    dbms_stats.gather_table_stats ('SYSADM', PORTCONSUMPTION ');
end; 
```

有关如何收集统计信息的更多详细信息，请参阅[DBMS_STATS 文档。](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_stats.htm#autoId51)

# python - 结束python代码没有错误保持Gui打开

> ID：12176248
> 
> 赞同：0
> 
> 时间：2012-08-29T10:49:59.540
> 
> 标签：python, user-interface, tkinter

我有一个 tkinter gui，它有一个启动进程的按钮。在这个过程中有一个if语句，如果这个语句为真那么这个过程结束。当进程结束时，我希望 GUI 保持打开状态并且不显示错误。我试过 os._exit() 但它也关闭了 gui。

```
from Tkinter import *
import tkMessageBox
def Program():
#Process
#Process
    if #something happens#:
       #Stop process but keep gui open and dont show errors
root = Tk()
root.title("GUI")
root.geometry('450x300+200+200')
labelText=StringVar()
labelText.set("Program")
label1=Label(root,textvariable=labelText,height=4)
label1.pack()
mbutton=Button(text='Start Program',command=Model).pack()
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:24:18.813

Python 代码使用 geo_pythoncl 建议使用 return。

```
from Tkinter import * 
import tkMessageBox 
def Program(): 
#Process 
#Process     
 if #something happens#:        
 #Stop process but keep gui open and dont show errors 
 return
root = Tk() 
root.title("GUI") 
root.geometry('450x300+200+200') 
labelText=StringVar() 
labelText.set("Program") 
label1=Label(root,textvariable=labelText,height=4) 
label1.pack() 
mbutton=Button(text='Start Program',command=Model).pack() 
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:25:27.217

您可以在主线程中运行 GUI，并将应该独立终止的部分放在后台线程中。在线程中添加 try/except 以抑制回溯，例如：

```
import threading

def bgthread(gui_ready, result_queue):
    gui_ready.wait()
    while True:
       try:
           # do some work ...
           result_queue.put(result) # GUI gets results e.g., 
                                    # via q.get_nowait() in a
                                    # widget.after() callback 
           if something_happened():
              break # exit
       except: #NOTE: don't use bare except unless it is absolutely necessary
           logger.error() # log to file
           break # exit

# setup logging          
# ...
ready = threading.Event()
q = Queue.Queue()
threading.Thread(target=bgthread, args=(ready,q)).start()

# setup gui here
...
root.mainloop() # call ready.set() in some GUI code then it is ready 
```

# json - JQGrid 在 editRow 上发布 JSON 数据

> ID：12176251
> 
> 赞同：1
> 
> 时间：2012-08-29T10:50:21.663
> 
> 标签：json, jqgrid

我想将 json 数据发布到服务器（REST API）。当我现在双击一行以编辑内联时，会调用“serializeRowData”，并且我的服务器会在正文中收到一条 json 格式的消息。但是当我单击寻呼机中的小“+”图标时，不会调用“serializeRowData”。

我正在使用版本：

*   jQuery 1.5.2
*   JQGrid 4.4.1

我的网格看起来像：

```
$("#dbgrid").jqGrid({ 
    url: 'rest/config/dbs',
    editurl: 'rest/config/db',
    datatype: "json", 
    height: 255, 
    width: 600, 
    colNames:['ID', 'Env', 'Hostname', 'Name', 'Port', 'Service Name', 'SID'], 
    colModel:[ 
        {name:'id',index:'id', width:30, sorttype:'int'}, 
        {name:'env',index:'env', editable:true, width:50}, 
        {name:'hostName',index:'hostName', editable:true, width:200},
        {name:'name',index:'name', editable:true, width:200},
        {name:'port',index:'port', editable:true, width:30},
        {name:'serviceName',index:'name', editable:true, width:30},
        {name:'sid',index:'sid', editable:true, width:30}
    ], 
    jsonReader: {
        repeatitems: false,
        id: "id",
    },
    rowNum:50, 
    rowTotal: 2000, 
    rowList : [20,30,50], 
    loadonce:false, 
    mtype: "GET", 
    rownumbers: true, 
    rownumWidth: 40, 
    gridview: true, 
    pager: '#pdbgrid', 
    sortname: 'id', 
    viewrecords: true, 
    sortorder: "asc", 
    caption: "Database Servers"  ,
    ajaxRowOptions : {
        type :"POST",
        contentType :"application/json; charset=utf-8",
        dataType :"json"
    },
    serializeRowData: function(postdata){     
        return JSON.stringify(postdata);
    }
});
$("#dbgrid").jqGrid('navGrid','#pdbgrid',{edit:true,add:true,del:true} 
```

我错过了什么吗？

任何帮助以及示例将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:01:24.027

因为那不包括在内联编辑中。您可以像这样更改代码的最后一行。

```
$("#dbgrid").jqGrid('navGrid','#pdbgrid',{edit:true,add:true,del:true},
{//edit parameters},

{//add parameters
serializeEditData: function (postdata) {}
},

{//delete parameters}
); 
```

现在，如果您想序列化编辑数据，那么您也可以在编辑参数中写入相同的功能。此功能适用于添加和编辑。对于删除，它将是 serializeDelData。

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T20:56:47.427

如果有人在这里遇到同样的问题，一个可行的解决方案：

```
...
$("#dbgrid").jqGrid('navGrid','#pdbgrid',
    {edit:true,add:true,del:true},
    {
        //edit parameters
        ajaxEditOptions: jsonOptions,
        serializeEditData: createJSON,
        closeAfterEdit: true
    },
    {
        //add parameters
        ajaxEditOptions: jsonOptions,
        serializeEditData: createJSON,
        closeAfterAdd: true
     },
     {
         //delete parameters
         ajaxDelOptions: jsonOptions,
         serializeDelData: createJSON
     }
);

var jsonOptions = {
    type :"POST",
    contentType :"application/json; charset=utf-8",
    dataType :"json"
};

function createJSON(postdata) {
    if (postdata.id === '_empty')
        postdata.id = null; // rest api expects int or null
    return JSON.stringify(postdata)
} 
```

# php - 如何在php中重定向到登录页面？

> ID：12176255
> 
> 赞同：-3
> 
> 时间：2012-08-29T10:50:30.057
> 
> 标签：php

我遇到了一个问题，当我们在登录网站后进入页面时，一段时间后我们从页面注销现在我的问题是，在注销后，如果有人复制 url 并在另一个浏览器中打开它应该是直接的他们到登录页面代码应该包含函数并且该函数应该在另一个php文件中调用，例如调用函数（）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:52:22.163

**在logout.php**上写下代码

 **```
session_start(); 
//or  @session_start() if session already started before this line
session_destroy();
session_unset();
session_write_close();
session_regenerate_id(true);
$_SESSION = array();
header("Location:index.php");
exit(); 
```

更多示例可以在**[会话手册中看到](http://php.net/manual/en/function.session-unset.php)****

# jsf - JSF：如何在每次执行导航规则时执行一些代码？

> ID：12176257
> 
> 赞同：3
> 
> 时间：2012-08-29T10:50:33.340
> 
> 标签：jsf, navigation, jsf-1.2, journey

有什么方法可以在执行 a 时执行一些代码`navigation rule`。基本上我想要做的是拥有一个`JourneyTracker`bean，它将保持旅程的当前状态（如用户所在的当前页面）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:11:40.497

您可以[`NavigationHandler`](http://docs.oracle.com/javaee/5/api/javax/faces/application/NavigationHandler.html)为此使用自定义。基本上，只需按如下方式扩展该抽象类：

```
public class MyNavigationHandler extends NavigationHandler {

    private NavigationHandler wrapped;

    public MyNavigationHandler(NavigationHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public void handleNavigation(FacesContext context, String from, String outcome) {
        // Do your job here. Just check if "from" and/or "outcome" matches the desired rule.

        wrapped.handleNavigation(context, from, outcome); // Important! This will perform the actual navigation.
    }

} 
```

要让它运行，只需在以下位置注册它`faces-config.xml`：

```
<application>
    <navigation-handler>com.example.MyNavigationHandler</navigation-handler>
</application> 
```

# entity-framework-4.1 - 实体框架小数不一致

> ID：12176272
> 
> 赞同：0
> 
> 时间：2012-08-29T10:51:18.097
> 
> 标签：entity-framework-4.1

我正在实施教程[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model) 's-data-from-a-controller

我使用实体框架 4.1。在数据库中映射十进制值 (18,2)。在创建表单中，我输入了 1000，但在详细信息页面中，十进制值输出为 1000,00，并且在编辑页面中也是如此。我`@Html.EditorFor(model => model.Price)`用于输入和输出。当我查看由实体框架创建的数据库时，我的十进制值的价格列是使用以下 SQL 命令创建的：

```
[Price] DECIMAL(18,2) NOT NULL 
```

为什么会出现不一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:29:04.073

你在比较两个不同的东西。映射描述了可以存储在数据库中的精度，但它与 ASP.NET MVC 视图显示十进制数的方式无关 - 它由输出格式处理。

# php - 从一个结果集移动到另一个 php

> ID：12176273
> 
> 赞同：2
> 
> 时间：2012-08-29T10:51:29.930
> 
> 标签：php, mysql

如何在 PHP 中从一个结果集移动到另一个结果集。

我已经通过 mysqli 方法创建了一个数据库连接，即 mysqli('root', 'localhost', 'root', '', 'test', 3306)

**我有一张像下面这样的桌子**

```
    创建表区域（区域名称 VARCHAR（255），
                        密码 VARCHAR(255))

    插入区域（区域名称、密码）
          值（'Teynampet'，'6000018'），
                （'拉马普拉姆'，'6000089'），
                ('TNagar', '6000017'),
                ('Mylapore', '6000014'),
                （'戈帕拉普拉姆'，'6000087'）

```

**我有一个像下面这样的程序**

```
    如果存在 mp_test1，则删除过程；
    创建过程 mp_test1()
    开始
      从区域中选择区域名称；
      从区域中选择密码；
    结尾

```

现在，如果您看到它返回两个结果集的过程。请注意结果集不是记录集。我如何在 PHP 中从一个结果集移动到另一个结果集。

不要建议我使用内部联接进行查询，因为我的要求与我在上面发布的不完全相同。我的问题是在 PHP 中从一个结果集转移到另一个结果集

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:17:39.097

当使用[PDO](http://docs.php.net/pdo)时，这将是[PDOStatement::nextRowset](http://docs.php.net/pdostatement.nextrowset)方法

* * *

使用[mysqli](http://docs.php.net/book.mysqli)时，要使用的函数/方法是[mysqli::next_result](http://www.php.net/mysqli.next-result)

* * *

mysqli 示例：

```
<?php
$mysqli = new mysqli('localhost', 'localonly', 'localonly', 'test');
if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);
}

if (!$mysqli->multi_query('CALL mp_test1')) {
    echo 'error';
}
else {
    do {
        echo "--- result set ---\r\n";
        if ($result = $mysqli->store_result()) {
            while ($row = $result->fetch_row()) {
                echo join(', ', $row), "\n";
            }
            $result->free();
        }
    } while ($mysqli->more_results() && $mysqli->next_result());
} 
```

打印（带有问题中的示例数据）

```
--- result set ---
Teynampet
Ramapuram
TNagar
Mylapore
Gopalapuram
--- result set ---
6000018
6000089
6000017
6000014
6000087
--- result set --- 
```

# magento - 使用 angular.js 在静态下拉列表中选择不同的值

> ID：12176274
> 
> 赞同：0
> 
> 时间：2012-08-29T10:51:34.283
> 
> 标签：magento, javascript-framework, angularjs

我有一个 Magento 产品页面，该页面生成静态选择元素，价格机制与后端相关联，因此我无法触摸这些下拉菜单。我正在使用 angular.js 单选元素来接收用户输入，这反过来会更新静态下拉列表的选定选项。

我不知道如何将两者联系起来，我在这里重新创建了问题：http: [//jsfiddle.net/ldn_tech_exec/smBdC/1/](http://jsfiddle.net/ldn_tech_exec/smBdC/1/)

我希望单选按钮更新下拉列表，但我只能**在创建下拉列表后对其进行**操作，也许使用 jquery 插入所需的任何角度指令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:39:05.567

再次更新：您的选择列表需要一个 ng-model，并且应该使用 ng-options 生成选项。当您选择一个单选按钮时，您触发的控制器方法应该更新该 ng-model，这将导致选择列表更新。请参阅[http://docs.angularjs.org/api/ng.directive:select](http://docs.angularjs.org/api/ng.directive:select)

另一种方法是使用 ng-selected。请参阅 [http://docs.angularjs.org/api/ng.directive:ngSelected](http://docs.angularjs.org/api/ng.directive:ngSelected)

更新#3：我错过了您最初无法修改选择列表的事实。请在下面的评论中查看我的小提琴以获得有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:32:45.303

听起来您有一些产品的价格取决于设置的选项。

如果是这种情况，那么从您的单选按钮更新下拉列表是相对微不足道的 - 或者至少取决于您的原型/jquery 技能。

但是有一个问题：一旦你用“看不见的手”更新了 javascript 中的下拉菜单，就会有更多的 javascript 代码来更新价格和可用性。为此，您需要对事件进行冒泡。如果使用原型，这不会自动发生。

我希望我能弄出“气泡代码”，但我目前手头没有它，此外，你还没有被困在这一点上，但是......

# html - IE7 CSS - 标签背景颜色在选中的单选按钮上没有改变

> ID：12176275
> 
> 赞同：0
> 
> 时间：2012-08-29T10:51:41.197
> 
> 标签：html, css, internet-explorer-7

在 IE7 上检查输入单选时，我在突出显示标签时遇到问题。

代码很简单，你可以看这里：**[JsFiddle](http://jsfiddle.net/toroncino/hXap6/)**

我需要让它在不使用 Javascript 的情况下在 IE7 上运行。

HTML：

```
<ul>
    <li>
        <input id="yes" type="radio" name="name" title="yes" />
        <label for="yes">Yes</label></li>
    <li>
        <input id="no" type="radio" name="name" title="no" />
        <label for="no">No</label>
    </li>
</ul>​ 
```

CSS：

```
input[type="radio"]{
    position: absolute;
    left: -9999px;
}

label{
 background-color: yellow;
 border: 1px solid #777;
 cursor: pointer;
 float: left;
 margin-right: 10px;
 padding: 10px;
 width: 80px;
 height: 30px;   
}

input[type="radio"]:checked + label {
 background-color: green;
 color: #FFF;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:58:47.607

IE 7 不支持 ":checked"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:58:47.617

IE 7 并没有真正做你的 CSS3 选择器，你会想要使用：[http](http://selectivizr.com/) ://selectivizr.com/来为 IE 7 提供 CSS3 支持。

如果没有 JS，这是不可能实现的。

您需要添加：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<!--[if (gte IE 6)&(lte IE 8)]>
  <script type="text/javascript" src="selectivizr.js"></script>
  <noscript><link rel="stylesheet" href="[fallback css]" /></noscript>
<![endif]--> 
```

到您的站点启用 IE7 :selector 支持。

# java - 创建数据库连接的最佳方式

> ID：12176277
> 
> 赞同：1
> 
> 时间：2012-08-29T10:51:44.297
> 
> 标签：java, database, database-connection

在 Java 应用程序中创建数据库连接的最佳方法是什么？使用单例、静态方法、服务定位器、连接池或其他什么？

请您让我知道上述每种方法的优缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:37:03.143

有两种处理连接的方法：

*   每个请求一个连接
*   按需连接

**每个请求一个连接**意味着您在流程开始时获得连接，并在结束时返回它。这对于 Web 请求来说不是一个好主意，因为这意味着您的应用程序只能处理与可用的数据库连接一样多的并发 Web 请求。但是，对于批处理来说，这可能是一个好主意，因为您知道您只需要 N 个连接。

**按需连接**意味着您在即将进行 db 调用时获得连接，然后在 db 调用完成后立即返回。

在这两种情况下，都建议使用连接池，但它对于按需连接策略尤其重要，因为您希望连接在返回后保持打开状态，因为打开连接会产生很大的开销。

处理连接池一般有两种方式：

*   容器管理
*   应用程序管理

容器管理是指应用服务器通过 JNDI 向应用程序提供连接池。这是 JBoss 通常做的事情。如果它在那里，您不妨使用这种方法。否则，您应该使用应用程序托管池。

大多数 DI 框架都会为您提供一个连接池，只需进行少量配置。使用连接池确实没有明显的缺点。java中最常见的两个是DBCP和C3P0，都是非常成熟的库。如果您没有使用 DI 框架，您应该查看这些库的入门指南并实施他们的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:25:50.907

如果您的应用程序将使用许多连接，则最好使用连接池。它已经在 J​​ava 中实现，您可以轻松使用它。这个在使用 tomcat 的 web 应用程序中使用池的示例（如果您编写 web-app 也可以使用 tomcat 的池，这样会更好）

```
package usepool;

import org.apache.tomcat.jdbc.pool.DataSource;
import org.apache.tomcat.jdbc.pool.PoolProperties;

/**
*
* @author brainless
*/
public class ConnectionPool {

private static DataSource datasource;
public static String dbURL = "jdbc:mysql://localhost:3306/"
                + "<YourDataBase>?useUnicode=true&useEncoding=true&characterEncoding=UTF-8";
public static String driverClass = "com.mysql.jdbc.Driver";
public static String userName = "root";
public static String password = "password";
public static boolean jmx = true;
public static boolean testIdle = false;
public static boolean testBorrow = true;
public static boolean testReturn = false;
public static int validationInterval = 30000;
public static int timeBetweenEviction = 30000;
public static int maxActive = 100;
public static int initialSize = 10;
public static int maxWait = 10000;
public static int removeAbandonedTimeout = 60;
public static int minEvictableIdle = 30000;
public static int minIdle = 10;
public static boolean logAbandoned = true;
public static boolean removeAbandoned = true;
public static String jdbcInterceptors = "org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;"
        + "org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer";

private ConnectionPool() {
}

public static synchronized DataSource getInstance() {
    if (datasource == null) {
        PoolProperties p = new PoolProperties();
        p.setUrl(dbURL);
        p.setDriverClassName(driverClass);
        p.setUsername(userName);
        p.setPassword(password);
        p.setJmxEnabled(jmx);
        p.setTestWhileIdle(testIdle);
        p.setTestOnBorrow(testBorrow);
        p.setTestOnReturn(testReturn);
        p.setValidationInterval(validationInterval);
        p.setTimeBetweenEvictionRunsMillis(timeBetweenEviction);
        p.setMaxActive(maxActive);
        p.setInitialSize(initialSize);
        p.setMaxWait(maxWait);
        p.setRemoveAbandonedTimeout(removeAbandonedTimeout);
        p.setMinEvictableIdleTimeMillis(minEvictableIdle);
        p.setMinIdle(minIdle);
        p.setLogAbandoned(logAbandoned);
        p.setRemoveAbandoned(removeAbandoned);
        p.setJdbcInterceptors(jdbcInterceptors);
        datasource = new DataSource();
        datasource.setPoolProperties(p);
    }
    return datasource;
}

public static synchronized void closePool() {
    if (datasource != null) {
        datasource.close();
    }
} 
```

}

这个类是单例的。要在您的代码中获得连接，您需要使用类似这样的东西

```
import usepool.ConnectionPool;
/* 
* code
*/
connect = ConnectionPool.getInstance().getConnection(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:55:23.973

在大多数 Java 应用程序中，这不如使用连接池重要。与使用连接池而不是手动管理连接所获得的便利和收益相比，您的问题更多的是个人喜好问题。

# java - Java >>> 运算符

> ID：12176280
> 
> 赞同：0
> 
> 时间：2012-08-29T10:51:57.857
> 
> 标签：java

> **可能重复：**
> [>>>和>>之间的区别](https://stackoverflow.com/questions/2811319/difference-between-and)

有人可以解释一下`>>>`运算符在 Java 中的作用。我在这个问题中遇到了它，[HashMap 中的 Hash 方法](https://stackoverflow.com/questions/12176031/hash-method-in-hashmap)。`>>>`从它在问题中的用法来看，它似乎是一个移位运算符 -和之间有什么区别`>>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T10:53:58.147

来自[Java教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html "Java 教程")：

> 无符号右移运算符“>>>”将零移到最左边的位置，而“>>”之后的最左边的位置取决于符号扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:57:23.747

您可以通过一个简单的程序看到不同之处：

```
public static void main(String[] args) throws InterruptedException, IOException {
    int i = -1;
    int j = i >> 1;
    int k = i >>> 1;
    System.out.println("i = " + i + "\t\t<=> " + Integer.toBinaryString(i));
    System.out.println("j = " + j + "\t\t<=> " + Integer.toBinaryString(j));
    System.out.println("k = " + k + "\t<=> " + Integer.toBinaryString(k));
} 
```

输出：

```
i = -1          <=> 11111111111111111111111111111111  
j = -1          <=> 11111111111111111111111111111111  
k = 2147483647  <=> 1111111111111111111111111111111 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:57:45.587

有符号右移运算符“>>”将位模式向右移动。无符号右移运算符“>>>”将零移到最左边的位置，

更多信息

[按照这个链接](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

# java - 覆盖异常处理 - Oracle ADF

> ID：12176283
> 
> 赞同：0
> 
> 时间：2012-08-29T10:52:04.473
> 
> 标签：java, exception-handling, oracle-adf

有没有人有在 Oracle ADF 中完成的覆盖异常处理程序的示例？

af:showPrintablePageBehavior 中有一个错误会引发

> java.lang.IllegalStateException: ADF_FACES-60003

我的错误不是致命的，因为它是一个框架错误，除了忽略异常之外，我无能为力。

我在各种论坛上看到了几个类似的建议，但没有一个有覆盖异常处理程序的示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:38:50.980

你的意思是这样的吗？[https://blogs.oracle.com/jdevotnharvest/entry/extending_the_adf_controller_exception_handler](https://blogs.oracle.com/jdevotnharvest/entry/extending_the_adf_controller_exception_handler)在 if 条件中，您检查可抛出的 ADF Faces 错误代码

顺便说一句，*“在 af:showPrintablePageBehavior 中有一个错误”*

你有我的错误编号吗？你提交了这个错误，还是由其他人提交的？这是针对哪个版本的 JDeveloper 提交的？

# c# - 如何使用c#在xml元素下添加一行

> ID：12176288
> 
> 赞同：0
> 
> 时间：2012-08-29T10:52:21.520
> 
> 标签：c#, configuration-files

```
<?xml version="1.0" encoding="utf-8"?>
 <configSections>
    ----------
    ----------
 </configSections>
 <appSettings>
     <add key="Name" Value="XXX">
     <add key="Age" Value="10">
     <!--<add key="Number" value="5"/>--><!--uncomment it-->
     <!--<add key="Class" value="10"/>-->
 </appSettings> 
```

我想取消注释第一个注释行。

到目前为止，这是我的代码：

```
foreach (XmlElement xElement in xmlDoc.DocumentElement)
{
    if (xElement.Name == "appSettings")
    {
        foreach (XmlNode xNodes in xElement.ChildNodes)
        {
            if (xNodes.NodeType == XmlNodeType.Comment)
            {
                if (xNodes.InnerText.Contains("Number"))
                {
                    // Now the commented line is in xNodes.InnerText.
                    // How can i add this line in that xml file under appSettings?
                }
            }
        }
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:30:59.457

您可以使用以下代码：

```
var appSettingsNode = xmlDoc.DocumentElement
                            .ChildNodes
                            .Cast<XmlNode>()
                            .FirstOrDefault(x => x.Name == "appSettings");

if(appSettingsNode == null)
    return;

var commentedNodes = appSettingsNode.ChildNodes
                                    .Cast<XmlNode>()
                                    .Where(x => x.NodeType == XmlNodeType.Comment
                                                && (x.InnerText.Contains("Number")
                                                    || x.InnerText.Contains("Class")))
                                    .ToList();

foreach(var commentedNode in commentedNodes)
{
    var tmpDoc = new XmlDocument();
    tmpDoc.LoadXml(commentedNode.InnerText);
    appSettingsNode.ReplaceChild(xmlDoc.ImportNode(tmpDoc.DocumentElement, true),
                                 commentedNode);

    // Use this instead if you want to keep the commented line:
    // appSettingsNode.AppendChild(xmlDoc.ImportNode(tmpDoc.DocumentElement, true));
} 
```

重要的部分是`foreach`循环内部的部分。
在这里，我们将注释节点加载到一个新的`XmlDocument`( `tmpDoc`) 中，以将其作为“真实”`XmlNode`返回。然后我们只需将评论节点 ( `commentedNode`) 替换为新加载的节点 ( `tmpDoc.DocumentElement`)。

剩下的是你的原始代码，只是美化了。请注意我是如何通过用 LINQ 查询替换循环和 if 来降低圈复杂度的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:00:29.067

如果您想阅读名称键，您可以这样做：

```
string myUsername = System.Configuration.ConfigurationManager.AppSettings["Name"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:17:23.123

在 C# .net 中，您通常会使用`System.Configuration.ConfigurationManager.AppSettings`从配置文件中读取 appSetting。

如果您尝试从 web.config 中读取注释掉的行，那么您将不得不编写一些自定义代码来执行此操作。

[这个答案应该给你一个良好的开端](https://stackoverflow.com/a/6278066/148998)

# javascript - 如何为显示我的 jquery 滑块值的文本框设置默认值

> ID：12176291
> 
> 赞同：2
> 
> 时间：2012-08-29T10:52:31.150
> 
> 标签：javascript, jquery, jquery-ui, jquery-slider

我有一个 jquery 滑块，最小值为 1，最大值为 400。当我移动滑块时，相应的值会显示在文本框上。但是我想在文本框和滑块上都显示 pageLoad 的最小值，请问我该如何实现？这是我的滑块代码

```
/*slider begin*/

    $("#slider").slider({

        value:1,
        max:400,
        min:1,
        /*
         change:function(event,ui){
                     $("input#amt").val(ui.value)
                 }
         */

        slide: function(event, ui) {   $("#amt").val(ui.value) }

    });

     $("#amt").change(function(event) {
   var data = $("#amt").val();
   if (data.length > 0) 
   {
      if (parseInt(data) >= 0 && parseInt(data) <= 400) 
      {
          $("#slider").slider("option", "value", data);
      }
      else
      {
        if (parseInt(data) < 0) 
        {
          $("#amt").val("0");
          $("#slider").slider("option", "value", "0");
        }
        if (parseInt(data) > 400) 
        {
          $("#amt").val("400");
          $("#slider").slider("option", "value", "400");
        }
     }
   }
    else
    { 
      $("#slider").slider("option", "value", "1"); 
    }   
   });

    /*slider end*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:55:09.240

您可以先设置滑块值：

```
$("#slider").slider( "value" , 1); 
```

然后阅读它来设置文本框的值（或者只是将文本框的值也设置为-1，但这不太漂亮）

```
$("#amt").val($("#slider").slider( "value")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:56:56.340

您的滑块应按原样设置为 1 - 滑块的值选项执行以下操作。从 API：

如果只有一个手柄，则确定滑块的值。如果有多个句柄，则确定第一个句柄的值。

**代码示例**

使用指定的值选项初始化滑块。

```
$( ".selector" ).slider({ value: 37 }); 
```

您可以按如下方式设置文本框的值：

```
$("#amt").val(1); 
```

# android - 从数据库中选择，其中 id = 来自微调器的值

> ID：12176293
> 
> 赞同：1
> 
> 时间：2012-08-29T10:52:43.630
> 
> 标签：android, sql, arraylist, spinner

我有以下问题：我有两个微调器，第一个带有 categorie1，第二个是 categorie2。

每个微调器都可以从表 cat1 和 cat2 的数据库中加载它的数据。但这并不是我想要的。我希望第二个微调器从当前选定的微调器 1 加载 cat1_id 等于 cat_id 的数据。

表格是这样的：

```
cat1:
| cat1_id | cat1_name |
=======================
| 1       | animal    |
| 2       | plant     |
| 3       | ...       |

cat2:
| cat2_id | cat1_id | cat2_name |
=================================
| 1       | 1       | fish      |
| 2       | 1       | mammal    |
| 3       | 1       | bird      |
| 4       | 2       | tree      |
| 5       | ...     | ...       | 
```

如何进行此比较或如何知道在 spinner1 中选择了哪个项目。

我的代码是这样的：

DatabaseHandler.class：

```
 public List<String> getCat(){
    labels = new ArrayList<String>();
    db = this.getReadableDatabase();
    cursor = db.rawQuery(SELECT_QUERY_CATEGORIE, null);  // SELECT_QUERY_CATEGORIE = "SELECT  * FROM  cat1";

    if (cursor.moveToFirst()) {
        do {
            labels.add(cursor.getString(1));
        } while (cursor.moveToNext());
    }
    cursor.close();
    db.close();

    return labels;
}

public List<String> getSubcat(){
    labels = new ArrayList<String>();
    db = this.getReadableDatabase();
    //cursor = db.rawQuery(SELECT_QUERY_SUBCATEGORIE, null); // SELECT_QUERY_SUBCATEGORIE = "SELECT  * FROM  cat2";

    if (cursor.moveToFirst()) {
        do {
            labels.add(cursor.getString(2));
        } while (cursor.moveToNext());
    }

    cursor.close();
    db.close();
    return labels;
} 
```

MainActivity.class：

```
...
spCat.setOnItemSelectedListener(this);
spSubcat.setOnItemSelectedListener(this);
loadSpinnerData();

private void loadSpinnerData() {
    List<String> lbCategorie = db.getCat();
    ArrayAdapter<String> catAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, lbCategorie);
    catAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spCat.setAdapter(catAdapter);

    List<String> lbSubcategorie = db.getSubcat();
    ArrayAdapter<String> subcatAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, lbSubcategorie);
    subcatAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spSubcat.setAdapter(subcatAdapter);
}

    public void onItemSelected(AdapterView<?> parent, View view, int position,
        long id) {
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // Spinner2.Visibility should be = GONE;
} 
```

提前致谢。

编辑：好的。我现在使用以下代码加载我的数据库：

```
int position = MainActivity.spCat.getSelectedItemPosition()+1;
cursor = db.rawQuery("SELECT * FROM cat2 WHERE cat_id = ?" + position, null); 
```

但是我的第二个 Spinner 是空的，无论我从第一个 Spinner 中选择什么。在调试时我注意到，加载数据库在开始时只调用了一次。

* * *

编辑2：

删除“？”后现在可以使用 在我的 db.rawQuery 中。但是，在第一个微调器中更改项目后，第二个微调器不是它的内容。调用第一个微调器后如何刷新第二个微调器？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:57:47.693

您可以执行查询：

```
Select * From cat2 where cat1_id==cat_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:25:37.850

`catAdapter.selectedItemPosition`如果项目的顺序与表中的类别相对应，您可以尝试使用，因为所选项目的位置从 0 开始，也许您应该使用`catAdapter.selectedItemPosition + 1`这种方式，您可以知道在 spinner1 上选择了什么值。你也可以使用类似的东西

```
if (Integer.toString(catAdapter.selectedItem)=="1" 
{
  //put some code to tell number 1 is selected on the catAdapter
} 
```

# php - 在javascript中获取json_encoded数组的元素

> ID：12176294
> 
> 赞同：0
> 
> 时间：2012-08-29T10:52:48.273
> 
> 标签：php, javascript, arrays, json

我将一个`json_encode`d 数组传递给 javascript。现在我想访问该数组以获取不同的元素。

我把它打印出来，`console.log()`我得到这个数组：

```
array(1) {
  [16]=>
  array(2) {
    [3488]=>
    array(1) {
      [0]=>
      array(2) {
        ["article_no_internal"]=>
        string(6) "999184"
        ["article_name_internal"]=>
        string(29) "Geschenkbox Kerzenschein 2011"
      }
    }
    [2615]=>
    array(1) {
      [0]=>
      array(2) {
        ["article_no_internal"]=>
        string(6) "700469"
        ["article_name_internal"]=>
        string(29) "Hotelscheck RomantischeTagef2"
      }
    }
  }
} 
```

这差不多。如何访问 ID 为 2615 的第二个数组的 article_name？

[在阅读 jsone object](https://stackoverflow.com/questions/9611747/reading-a-json-encoded-array-in-javascript)时发现了一个相关问题，希望得到更好的解释或答案。谢谢。

编辑：

看来我犯了一个错误，我在控制台中显示了一个 php var_dump。当我尝试在控制台中显示 javascript 数组时，我得到了未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:03:32.210

由于 JSON 表示“JavaScript 对象表示法”，因此您无需执行任何操作即可访问对象的项目。

例如，您可以访问：

```
jsonObject[2615][0]["article_name_internal"] 
```

如果此对象是字符串，则用于`eval`将字符串转换为 JavaScript 对象并以与上一个示例相同的方式访问项目。

```
var jsonObject = eval(jsonstring);
jsonObject[2615][0]["article_name_internal"] 
```

# r - knitr：如何防止输出中的文本换行？

> ID：12176296
> 
> 赞同：48
> 
> 时间：2012-08-29T10:52:54.230
> 
> 标签：r, knitr

编织到 HTML 时，我在 knitr 中的代码输出块中出现文本换行问题。

例如，如果我运行以下命令：

```
matrix(rnorm(60, 5, 2), ncol = 12) 
```

HTML 中的输出将包装表格，给出如下输出，其中第 12 列移动到其余列下方：

```
##       [,1]   [,2]  [,3]  [,4]  [,5]  [,6]  [,7]  [,8]  [,9] [,10] [,11]
## [1,] 3.407 0.8035 2.981 5.269 6.989 5.107 7.143 3.127 3.624 7.220 4.805
## [2,] 3.907 5.5971 5.488 4.995 6.496 5.980 1.576 3.009 6.605 3.440 2.754
## [3,] 1.945 3.7668 4.860 2.945 3.663 5.945 7.168 2.012 5.873 8.190 7.441
## [4,] 4.893 6.2054 4.403 3.967 2.880 7.196 1.813 3.283 5.216 5.699 2.829
## [5,] 5.706 0.9084 5.802 1.404 3.122 1.866 6.613 3.299 4.990 3.645 3.766
##       [,12]
## [1,] 0.3951
## [2,] 4.0866
## [3,] 5.9293
## [4,] 6.4729
## [5,] 2.7172 
```

有没有一种方法可以调整输出块的宽度，这样我就可以有一个表格，其中行全部出现在一行上，就像这样？

```
##       [,1]   [,2]  [,3]  [,4]  [,5]  [,6]  [,7]  [,8]  [,9] [,10] [,11] [,12]
## [1,] 3.407 0.8035 2.981 5.269 6.989 5.107 7.143 3.127 3.624 7.220 4.805 0.3951
## [2,] 3.907 5.5971 5.488 4.995 6.496 5.980 1.576 3.009 6.605 3.440 2.754 4.0866
## [3,] 1.945 3.7668 4.860 2.945 3.663 5.945 7.168 2.012 5.873 8.190 7.441 5.9293
## [4,] 4.893 6.2054 4.403 3.967 2.880 7.196 1.813 3.283 5.216 5.699 2.829 6.4729
## [5,] 5.706 0.9084 5.802 1.404 3.122 1.866 6.613 3.299 4.990 3.645 3.766 2.7172 
```

谢谢！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-29T11:12:35.187

在您的文档中添加类似`options(width=120)`的内容将允许您覆盖默认的换行宽度。

不过要小心不要太宽；转换成PDF或者其他格式的时候，默认的就差不多了！

例如，我使用`Knitr`RStudio，并将我的文档键入为 R markdown 文档。我的文档“ `options`”一开始可能是这样的：

```
```{r set-options, echo=FALSE, cache=FALSE}
options(width=80)
opts_chunk$set(comment = "", warning = FALSE, message = FALSE, echo = TRUE, tidy = TRUE, size="small")
read_chunk("some/script/I/want/to/load.R")
``` 
```

# php - Magento 从外部脚本中获取可用的属性集 ID 和名称

> ID：12176298
> 
> 赞同：6
> 
> 时间：2012-08-29T10:52:58.753
> 
> 标签：php, magento, magento-1.7

我已经尝试了各种各样的事情，但我无处可去。请有人告诉我如何获取所有可用产品属性集的名称和 ID？一个是“默认”...

我正在构建一个自定义报价系统，需要提取属性集，以便用户可以先选择它，然后加载分配给该集的产品。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T11:24:05.473

您可以使用以下方式加载属性集：

```
$attributeSetCollection = Mage::getResourceModel('eav/entity_attribute_set_collection') ->load(); 
```

迭代：

```
foreach ($attributeSetCollection as $id=>$attributeSet) {
  $entityTypeId = $attributeSet->getEntityTypeId();
  $name = $attributeSet->getAttributeSetName();
  Mage::log("ATTRIBUTE SET :".$name." - ".$id);
} 
```

然后，您可以按属性集加载您的集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-10T07:22:25.587

因此，当您尝试获取在管理员的管理属性集部分中显示的属性集时，您可以遵循以下编码：

```
<?php
      require_once('app/Mage.php');
      umask(0);
      Mage::app();//->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);
      $entityType = Mage::getModel('catalog/product')->getResource()->getTypeId();
      $collection = Mage::getResourceModel('eav/entity_attribute_set_collection')->setEntityTypeFilter($entityType);
      $allSet = array();
      foreach($collection as $coll){
         $attributeSet['name'] = $coll->getAttributeSetName();
         $attributeSet['id'] = $coll->getAttributeSetId();
         $allSet[] = $attributeSet;
      }
      echo "<pre>";
      print_r($allSet);
      echo "</pre>";
?> 
```

点击[这里](http://jyotiloppy.blogspot.in/2013/11/magento-get-available-attribute-set-ids.html "有关 Magento 的更多参考")！更多参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T14:00:00.720

如果你想在 Magento 管理系统 > 配置中获得一个属性集选择器，这个类会很有用：

```
class CompanyName_ModuleName_Model_System_Config_Source_Catalog_Product_Attributeset
{

    protected $_options = array();

    public function toOptionArray()
    {
        if (!count($this->_options)) {
            $entityTypeId           = Mage::getResourceModel('catalog/product')->getTypeId();
            $attributeSetCollection = Mage::getResourceModel('eav/entity_attribute_set_collection')
                    ->setEntityTypeFilter($entityTypeId);

            foreach ($attributeSetCollection as $_attributeSet) {
                $this->_options[] = array(
                    'value' => $_attributeSet->getId(),
                    'label' => $_attributeSet->getAttributeSetName()
                );
            }
        }
        return $this->_options;
    }

} 
```

这些属性集受***catalog_product***实体类型的限制。

实际上，您将需要***system.xml***中的字段，如下所示：

```
<select_attribute_set translate="label">
    <label>Default Attribute Set for new importing products</label>
    <frontend_type>select</frontend_type>
    <source_model>companyname_modulename/system_config_source_catalog_product_attributeset</source_model>
    <sort_order>30</sort_order>
    <show_in_default>1</show_in_default>
</select_attribute_set> 
```

# sencha-touch - 从控制器更改 Sencha Touch 中显示的卡片

> ID：12176302
> 
> 赞同：1
> 
> 时间：2012-08-29T10:53:15.493
> 
> 标签：sencha-touch

登录后，我希望将登录页面替换为仪表板页面，但由于某种原因，我无法更改卡，因为我无法获得将接受 setActiveItem 方法的引用。

应用程序.js

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    views: [
        'MainPanel'
    ],
    name: 'MyApp',
    controllers: [
        'MainController'
    ],

    launch: function() {

        Ext.create('MyApp.view.MainPanel', {fullscreen: true});
    }

}); 
```

主控制器.js

```
Ext.define('MyApp.controller.MainController', {
    extend: 'Ext.app.Controller',
    alias: 'controller.mainController',

    config: {
    },

    init: function(application) {
        this.control({
            'button[action=submitSigninemEmail]': {
                tap: 'signinemEmailFnc'
            }
        });
    },

    signinemEmailFnc: function() {

        var email_fld = Ext.getCmp('signinemEmail').getValue();
        var password_fld = Ext.getCmp('signinemPassword').getValue();

        var md5password = MD5(password_fld);

        Ext.data.JsonP.request({
            url: 'http://www.solumac.co.uk/clients/uwana/v2/ajax/sencha.php',
            params: {
                method: 'signinem',
                callback: 'signinem',
                email: email_fld,
                password: md5password
            },
            callback: function(result, params) {
                if (result === true) {
                    if (params.status === true){
                        console.log('signed in');
                        MyApp.views.MainPanel.setActiveItem('dashboard', {type:'slide', direction:'left'});
                    } else {
                        console.log(params.message);
                    }
                }
            }
        });

    }
}); 
```

主面板.js

```
Ext.define('MyApp.view.MainPanel', {
    extend: 'Ext.Panel',
    alias: 'widget.mainPanel',

    config: {
        layout: {
            type: 'card'
        },
        items: [
            {
                xtype: 'container',
                id: 'signinem',
                layout: {
                    type: 'fit'
                },
                items: [
                    {
                        xtype: 'titlebar',
                        docked: 'top',
                        id: 'signinemTitleBar',
                       title: 'Sign In',
                        items: [
                            {
                                xtype: 'button',
                                id: 'signinemButtonBack',
                                ui: 'back',
                                text: 'Back'
                            },
                            {
                                xtype: 'button',
                                align: 'right',
                                id: 'signinemButtonSignUp',
                                text: 'Sign Up'
                            }
                        ]
                    },
                    {
                        xtype: 'container',
                        id: 'signinemPadding',
                        padding: 10,
                        width: '100%',
                        items: [
                            {
                                xtype: 'fieldset',
                                id: 'signinemFacebookSet',
                                title: 'Sign In with Facebook',
                                items: [
                                    {
                                        xtype: 'button',
                                        id: 'signinemFacebook',
                                        margin: 10,
                                        width: '',
                                        text: 'Facebook'
                                    }
                                ]
                            },
                            {
                                xtype: 'fieldset',
                                id: 'signinemEmailSet',
                                title: 'Sign In with Email',
                                items: [
                                    {
                                        xtype: 'textfield',
                                        id: 'signinemEmail',
                                        margin: 10,
                                        label: 'email'
                                    },
                                    {
                                        xtype: 'passwordfield',
                                        id: 'signinemPassword',
                                        margin: 10,
                                        label: 'Password'
                                    },
                                    {
                                        xtype: 'checkboxfield',
                                        action: 'changeField',
                                        id: 'signinemShow',
                                        itemId: 'mycheckbox',
                                        margin: 10,
                                        label: 'show password',
                                        labelWidth: '80%'
                                    },
                                    {
                                        xtype: 'button',
                                       action: 'submitSigninemEmail',
                                        id: 'signinemSubmit',
                                        margin: 10,
                                        text: 'Submit'
                                    }
                                ]
                            }
                        ]
                    }
                ]
           },
            {
                xtype: 'container',
                id: 'dashboard',
                layout: {
                    type: 'fit'
                },
                items: [
                    {
                        xtype: 'titlebar',
                        docked: 'top',
                        id: 'dashboardBar',
                        title: 'Dashboard'
                    }
                ]
            },
        listeners: [
            {
                fn: 'onSigninemShowCheck',
                event: 'check',
                delegate: '#signinemShow'
            },
            {
                fn: 'onSigninemShowUncheck',
                event: 'uncheck',
                delegate: '#signinemShow'
            }
        ]
    },

    onSigninemShowCheck: function(checkboxfield, e, options) {
        alert('show password');
    },

    onSigninemShowUncheck: function(checkboxfield, e, options) {
        alert('hide password');
    }

}); 
```

我相信问题出在线路上......

```
MyApp.views.MainPanel.setActiveItem('dashboard', {type:'slide', direction:'left'}); 
```

...这不起作用，但对于应该替换它的内容完全空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:02:41.170

您不能像上面那样只对 id 字符串执行 setActiveItem ：

```
MyApp.views.MainPanel.setActiveItem('dashboard', {type:'slide', direction:'left'}); 
```

您首先必须使用 Ext.getCmp() 获取对组件的引用。

此外， MyApp.views.MainPanel 是一个类名，而不是一个实例。您需要获取特定的实例对象，然后使用它来设置活动项。

以下是一些适合您的代码：

```
var mypanel = Ext.ComponentQuery('mainPanel')[0];
var active = Ext.getCmp('dashboard');
mypanel.setActiveItem(active, {type: 'slide', direction: 'left'}); 
```

我还包括一个 1 文件应用程序，它可以满足您的需求：

```
Ext.define('MyApp.view.MyPanel', {
    extend: 'Ext.Panel',
    alias: 'widget.mypanel',

    config: {
        layout: {
            type: 'card'
        },
        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                items: [
                    {
                        xtype: 'button',
                        handler: function(button, event) {
                            var comp = Ext.ComponentQuery.query('mypanel')[0];
                            var active = Ext.getCmp('c1');
                            comp.setActiveItem(active);
                        },
                        text: 'one'
                    },
                    {
                        xtype: 'button',
                        handler: function(button, event) {
                            var comp = Ext.ComponentQuery.query('mypanel')[0];
                            var active = Ext.getCmp('c2');
                            comp.setActiveItem(active);
                        },
                        text: 'two'
                    }
                ]
            },
            {
                xtype: 'container',
                html: 'Hello, first container',
                id: 'c1'
            },
            {
                xtype: 'container',
                html: 'hello, second container',
                id: 'c2'
            }
        ]
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:19:09.247

如果你改变

```
Ext.create('MyApp.view.MainPanel', {fullscreen: true}); 
```

至

```
Ext.Viewport.add(Ext.create('MyApp.view.MainPanel')); 
```

在您的 app.js 中，然后在您的控制器中更改

```
MyApp.views.MainPanel.setActiveItem('dashboard', {type:'slide', direction:'left'}); 
```

至

```
Ext.Viewport.setActiveItem(Ext.create('dashboard'),{
// other stuff
}); 
```

并将仪表板添加到 app.js 中的视图数组中，我相信它应该可以工作

# ruby-on-rails - Nginx 1.2、Passenger 3.0、Rails 3：403 禁止错误

> ID：12176303
> 
> 赞同：2
> 
> 时间：2012-08-29T10:53:19.517
> 
> 标签：ruby-on-rails, nginx, amazon-ec2, passenger

我知道这是一个非常著名的错误，但我尝试了我在 StackOverflow 和谷歌上找到的所有东西，但无法解决它。

我有以下配置：

*   Amazon EC2 上的 SLES 11 SP1
*   nginx 1.2.2
*   乘客 3.0.15
*   导轨 3

我安装了 nginx 和乘客，并像这样设置 nginx.conf：

```
http {
    passenger_root /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.15;
    passenger_ruby /usr/bin/ruby;

    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        listen       80;
        server_name  localhost;
        location / {
            root   /root/myapp/public;
            autoindex on;
            passenger_enabled on;
        }
    }

    ... 
```

当我从浏览器访问应用程序时，它一直说 403 禁止。我还在 app 文件夹、/var 和 /opt 上运行 chmod -R 755（nginx 在 /opt/nginx 中）

在日志中，错误是：

```
[error] 5240#0: *1 open() "/root/myapp/public/favicon.ico" failed (13: Permission denied), client: 188.11.5.49, server: localhost, request: "GET /favicon.ico HTTP/1.1", host: "ec2-54-247-18-139.eu-west-1.compute.amazonaws.com" 
```

**更新**：/root/myapp/public/index.html（不存在）也会出现同样的错误

```
[error] 5638#0: *1 "/root/myapp/public/index.html" is forbidden (13: Permission denied), client: 188.11.5.49, server: localhost, request: "GET / HTTP/1.1", host: "ec2-54-247-18-139.eu-west-1.compute.amazonaws.com" 
```

**更新 2**：当我在独立模式下运行乘客时也出现同样的错误：

```
You can stop Phusion Passenger Standalone by pressing Ctrl-C.
===============================================================================
2012/08/30 08:31:34 [error] 7834#0: *4 "/root/myapp/public/index.html" is forbidden (13: Permission denied), client: 127.0.0.1, server: _, request: "HEAD / HTTP/1.1", host: "0.0.0.0" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:45:47.827

好的，解决了。问题是 nginx 需要应用程序文件的读取权限，以及从根到应用程序本身的所有内容的执行权限。

`chmod -R 755`在根上运行解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-13T22:30:00.067

我发现根本原因来自 nginx.conf 设置。

我在同一个块（位置/）中更改了passenger_enabled 和根路径并重新启动nginx。403 禁止错误已解决。

这是我的示例设置：

用户redmine；http {

```
passenger_root /usr/local/lib/ruby/gems/2.1.0/gems/passenger-4.0.45;
passenger_ruby /usr/local/bin/ruby;
access_log logs/host.access.log;

include       mime.types;
default_type  application/octet-stream;

sendfile        on;

keepalive_timeout  65;

# rails server
server {
    listen       80;
    server_name  localhost;

    location / {
       root /usr/local/redmine-2.5.2/public;    
       passenger_enabled on;
       index  index.html index.htm;
    }
}

                                                           Sam Sheen 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T04:45:27.807

您是否缺少 config.ru？

在我的情况下，缺少 config.ru 导致了错误。

**示例 Config.ru：**

```
root_dir = File.dirname(__FILE__)
app_file = File.join(root_dir, 'pantube.rb')
require app_file

set :environment, :production #ENV['RACK_ENV'].to_sym
set :root,        root_dir
set :app_file,    app_file
disable :run

run Sinatra::Application 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T02:11:01.310

如果所有文件夹和文件权限设置正确，请检查配置：

```
location ~ ^/redmine(/.*|$) {
   passenger_base_uri /redmine;
   passenger_app_root /Users/cc/Dropbox/Work/www/redmine;
   passenger_enabled on;
} 
```

您应该添加至少添加三行。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-29T11:39:10.530

根据您发布的错误，仅该文件没有所需的权限。尝试运行`chmod 777 /root/myapp/public/favicon.ico`

# ios - 核心数据：Ubiquity：为事务日志加载比较元数据时出错

> ID：12176305
> 
> 赞同：2
> 
> 时间：2012-08-29T10:53:23.937
> 
> 标签：ios, core-data, icloud

这是我在 StackOverflow 中的第一个问题。

这是我遇到的一个问题：

我正在尝试从 iCloud 访问核心数据数据。在过去的一个月里，它一直在完美运行。但是突然，在没有向项目添加任何代码的情况下，在调试器中测试代码时会出现此错误：

```
 -[_PFUbiquityRecordsImporter createSortedOperationsArrayForLogLocationsInContext:isFirstImport:](252): CoreData: Ubiquity: Error loading comparison metadata for transaction log: (null)
  Error: Error Domain=NSCocoaErrorDomain Code=4 "The operation couldn’t be completed. (Cocoa error 4.)" 
```

那个已经出现在一台设备上的所有记录中。奇怪的是，它不会出现在从另一台设备接管云的记录中。结果，我只能从另一台设备访问记录，而不是出现此错误的设备。有任何想法吗？

# git - git 从远程拉取一个文件

> ID：12176307
> 
> 赞同：3
> 
> 时间：2012-08-29T10:53:25.460
> 
> 标签：git, git-pull

我已经克隆了一个存储库“Rep”并创建了我自己的本地分支“Li”。我已经将一个名为“task.js”的文件提交到本地“Li”分支并将其推送到远程“Li”分支。现在我想通过以下方式恢复此操作：

1.  将原始“task.js”从远程“master”分支拉到本地“Li”分支
2.  将还原的“task.js”从本地“Li”分支推送到远程“Li”分支。

我试图阅读几个“拉”教程，但无法找到一种方法来做到这一点（可能是因为我还不太了解基础知识......）

谢谢，李

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T11:08:45.350

`git reset HEAD~`将还原当前分支的最后一次提交，但是由于您已经将分支 Li 推送到 public，最好`git checkout master task.js`在您的分支 Li 中执行一次并再次提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:05:35.630

您只需使用以下命令恢复 tom first commit，

**git 重置头^1**

然后将更改推送到远程分支。

# javascript - 使用 jquery 过滤逗号分隔的跨度文本

> ID：12176308
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:53:26.663
> 
> 标签：javascript, jquery, jquery-filter

我正在使用 jQuery`.filter()`函数来检查是否在复选框列表中选择了特定值：

```
$("#Control").find("input[type=checkbox]:checked")
             .next("label")
             .filter(function () {
                return $.trim($(this).text()) == "Option 1"; 
             })
             .length != 0'; 
```

如果我在跨度中有一个以逗号分隔的值列表并且我想检查是否存在特定值，我该如何做到这一点？

前任。`Home Phone, Email Address, Mobile Phone`可能是跨度文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:00:55.277

为什么不是这个？使用正则表达式，但我认为还有其他更简单的解决方案。

```
$("#Control").find("input[type=checkbox]:checked")
             .next("label")
             .filter(function () {
                 var regex = /,? *Email Address *,?/;
                 return regex.test($(this).text()); 
             }).length != 0; 
```

与@Richard Dalton 这里的示例相同[http://jsfiddle.net/nFjCn/1/](http://jsfiddle.net/nFjCn/1/) 您必须确保在正则表达式中的文本后面有一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:59:51.047

拆分跨度的文本，`,`然后检查您的字符串是否在结果数组中：

```
$("span").filter(function () {
            return $(this).text().split(/,\s*/).indexOf("Email Address") > -1; 
         }); 
```

示例 - [http://jsfiddle.net/nFjCn/3/](http://jsfiddle.net/nFjCn/3/)

# java - 从同一层级的节点重绘节点

> ID：12176312
> 
> 赞同：0
> 
> 时间：2012-08-29T10:53:27.983
> 
> 标签：java, user-interface, javafx-2

![在此处输入图像描述](../Images/dc94cc6c8c6060c31177fa4c2b074fc3.png)

在上面的应用程序中，我有一个选项卡（带有“年龄”、“性别”和“邮政编码”的选项卡），其中每个选项卡都包含一个 VBox。VBox 分为两部分：

VBox 的上半部分允许您查看列表列表，VBox 的下半部分包含一个允许您更改列表列表的菜单。

VBox 下部的按钮更新上述列表列表。我希望在更改基础列表时重新更新 VBox 中的上层节点。

相关的代码片段可能是

```
Node createHierarchySplitMenu(HierarchiesFromFile hierarchies, String hierarchyName){

    VBox vBox = new VBox();
    vBox.getChildren().add(createHierarchyScrollPane(hierarchies, hierarchyName));
    vBox.getChildren().add(createHierarchyMenu());

    return vBox;
} 
```

当 VBox 下部节点中的按钮（由 createHierarchyMenu() 创建）时，我希望再次调用 createHierarchyScrollPane() 以显示新的列表列表。我怎么做？

是否有从另一个节点更新一个节点的常规模式/方式（当它们处于同一级别时）？

你试过什么？没什么值得一提的——我被困住了。

如果您需要更多信息，请询问。不想让你陷入代码困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:10:14.137

据我了解，下一个解决方案可能是：

1.  创建类来处理 createHierarchyScrollPane()：

    ```
    private class HierarchyScrollPane extends ScrollPane  {

        public void update(HierarchiesFromFile hierarchies, String hierarchyName) {
             // code from createHierarchyScrollPane() which works with "this" instead of new Scroll Pane
        }
    } 
    ```

2.  将实例传递给 createHierarchyMenu()：

    ```
    Node createHierarchySplitMenu(HierarchiesFromFile hierarchies, String hierarchyName){

        VBox vBox = new VBox();

        ScrollPaneUpdate hsp = new HierarchyScrollPane();
        hsp.update(hierarchies, hierarchyName);
        vBox.getChildren().add(hsp);
        vBox.getChildren().add(createHierarchyMenu(hsp));

        return vBox;
    } 
    ```

3.  createHierarchyMenu() 中的某处：

    ```
    public void createHierarchyMenu(final HierarchyScrollPane hsp) {
         // ...
         Button btnSetMin = new Button("Set Min");
         btnSetMinsetOnAction(new EventHandler<ActionEvent>() {
            public void handle(ActionEvent t) {
                 // your code for data update
                 hsp.update(hierarchies, hierarchyName);
            }
         }); 
    } 
    ```

# c# - 将html转换为pdf时itextSharp字体大小不匹配

> ID：12176313
> 
> 赞同：0
> 
> 时间：2012-08-29T10:53:31.703
> 
> 标签：c#, itextsharp

我们在我们的一个项目中使用 itextsharp 库从 html 创建 pdf。一切正常，但 PDF 不会创建 html 文本的精确副本。

例如，如果 html 是这样的：-

```
<font size="3"><font face="Courier New, Courier, monospace">Plesae <strong>enter     
your</strong> text in below editor and click <font size="4">Generate button to view pdf 
from html to publish add in india</font></font> 
```

并且下面的代码用于生成 PDF，然后 itext 没有正确采用字体大小

```
StringReader strReader = new StringReader(content);
arrList = HTMLWorker.parseToList(strReader, null);

Paragraph para = new Paragraph();  
for (int k = 0; k < arrList.size(); ++k) {                   
  para.add((com.lowagie.text.Element)arrList.get(k)); 
} 
```

我们已经在库中进行了更改以映射字体大小，例如如果给定字体大小 3 然后取 12，但仍然没有创建精确的副本，可能对于 Courier 3，我们需要映射 13、14 我真正期待的是，如果有是任何用于设置字体大小的公式。从 CkEditor 生成的 Html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:24:38.227

您需要使用 LoadTagStyle 来处理它。

前任。    

```
StyleSheet styles = new StyleSheet();

styles.LoadTagStyle(HtmlTags.P, HtmlTags.FONTSIZE, "16");

arrList = HTMLWorker.parseToList(strReader, style); 
```

并添加标签

包裹你的整个东西

# java - 一个服务、一个线程、一个活动和一个静态 ArrayList

> ID：12176317
> 
> 赞同：2
> 
> 时间：2012-08-29T10:53:44.480
> 
> 标签：java, android, multithreading

我有一个非粘性服务，它通过广播接收器定期调用，以启动一个执行某些任务的线程。当线程正在运行时，正在进行的通知会显示一些进度信息，以及用于调出状态页面的按钮。

此状态页面显示当前正在处理的项目列表，此列表是线程和此活动都使用的静态 ArrayList。当状态活动开始时，我有一个空检查：

```
if(Global.statusItems == null)
{
    Global.statusItems = new ArrayList<StatusPageItem>();
} 
```

线程仍在运行，并且可以很好地访问 ArrayList，但是一旦启动 Status Activity，它将重新创建 ArrayList，就好像它为空一样。

到目前为止，如果不使用 ObjectOutputStream 保存列表并在状态页面启动时重新加载，我无法解决问题。我可以使用更优雅的解决方案吗？

问候，昆特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:04:21.953

您需要确保 2 行代码（空测试和新列表的创建）是原子的，并且分配对其他线程可见。

最简单的方法是同步那段代码：

```
synchronized(Global.class) {
    if(Global.statusItems == null) {
        Global.statusItems = new ArrayList<StatusPageItem>();
    }
} 
```

但是，如果您需要从一个线程读取列表并从另一个线程写入，则需要在添加/删除/迭代时添加额外的同步，以确保两个线程看到相同的列表 - 如果您不这样做，写入线程可能会将一个项目添加到列表中，但读取线程看不到它。

最简单的方法是使用 list 的线程安全实现：

```
synchronized(Global.class) {
    if(Global.statusItems == null) {
        Global.statusItems = new CopyOnWriteArrayList<StatusPageItem>();
    }
} 
```

如果内存/对象创建是一个问题（从这个角度来看，CopyOnWriteArrayList 不是很有效），您也可以使用同步集合来代替：

```
synchronized(Global.class) {
    if(Global.statusItems == null) {
        Global.statusItems = Collections.synchronizedList(new ArrayList<StatusPageItem>());
    }
} 
```

在这种情况下，请确保在迭代时锁定集合：

```
synchronized(Global.statusItems) {
    for (StatusPageItem item : Global.statusItems) {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:12:51.387

您的服务是否有可能在不同的[进程](http://developer.android.com/guide/topics/manifest/service-element.html#proc)上运行？

# java - pdf转换使用java库

> ID：12176318
> 
> 赞同：6
> 
> 时间：2012-08-29T10:53:49.457
> 
> 标签：java, pdf-generation

我愿意将 xhtml 文件转换为 pdf/a 格式或将 pdf 文件转换为 pdf/a 格式.. 谁能建议我可以使用哪个 java 库.. 谢谢

我会让我的例子更具体

我有一个简单的 html 文件 xyz.html

> ```
> <html><body>
> hello
> <br>
> <font style = "Helvetica">hello</font>
> <br>
> </body></html> 
> ```

爪哇代码：

```
Document document = new Document(PageSize.A4);
FileOutputStream fout = new FileOutputStream(pdffile);
PdfWriter pdfWriter = PdfWriter.getInstance(document, fout);
pdfWriter.setPDFXConformance(PdfWriter.PDFA1B);
FileReader fr = new FileReader(xyz.html);
document.open();
HashMap<String, Object> Provider = new HashMap<String, Object>();
DefaultFontProvider def = new 
Provider.put(HTMLWorker.FONT_PROVIDER, def);
HTMLWorker htmlWorker = new HTMLWorker(document);
htmlWorker.setProviders(Provider);
htmlWorker.parse(fr); 
```

我收到错误 com.itextpdf.text.pdf.PdfXConformanceException：必须嵌入所有字体。这不是：Helvetica

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:58:18.283

试试飞碟：[http ://code.google.com/p/flying-saucer/](http://code.google.com/p/flying-saucer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:57:10.677

检查同时`iText`支持[http://itextpdf.com/的库](http://itextpdf.com/)`Java``.net`

以下链接中的几个例子：http:
[//itextpdf.com/book/examples.php](http://itextpdf.com/book/examples.php)
[http://www.rgagnon.com/javadetails/java-html-to-pdf-using-itext.html](http://www.rgagnon.com/javadetails/java-html-to-pdf-using-itext.html)

~~这是专有的，但~~它确实是一个智能企业库，并且具有良好的客户支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:54:04.810

我在 Expected Behavior 工作，我们开发了一个名为 DocRaptor 的 SaaS 应用程序，它使用 Prince XML 作为我们的渲染引擎将 HTML 转换为 PDF。DocRaptor 使用 HTTP POST 请求来生成 PDF 文件，并且可以与 Java 一起使用。

这是我们的 Java 示例的链接：

[DocRaptor Java 示例](http://docraptor.com/documentation/examples_java)

以及 DocRaptor 主页的链接：

[猛禽博士](http://docraptor.com/)

DocRaptor 是一项基于订阅的服务，但我们的免费计划允许您每月最多创建 5 个文档，并且我们不嵌入水印或限制免费文档的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:56:07.297

考虑[Apache FOP 项目](http://xmlgraphics.apache.org/fop/)，它支持将 xml 文件转换为 pdf 文件。

# css - css类没有级联，在锚标签上

> ID：12176327
> 
> 赞同：0
> 
> 时间：2012-08-29T10:54:25.357
> 
> 标签：css

我的目标是 .menu-item-16 类，因为我想更改仅针对该类的锚文本颜色。但是，浏览器通过我的自定义代码匹配默认主题的 CSS 值。

我的 CSS 文件有主题默认代码

```
.news-entry li a:visited {
    color: #A84949;
} 
```

我的代码

```
.menu-item-16 a, .menu-item-16 a:active, .menu-item-16 a:link, .menu-item-16 a:visited    {
    color: green;
} 
```

但是在浏览器中，当我使用工具包时，它匹配，主题默认代码，我的代码如下所示。

请帮我。我一直在寻找几个小时没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:59:05.090

我认为您缺少“li”：

```
.news-entry li.menu-item-16 a, .news-entry li.menu-item-16 a:active, .news-entry li.menu-item-16 a:link, .news-entry li.menu-item-16 a:visited     
{
    color: green;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:00:54.233

您可以尝试将 id 赋予锚标记，例如：

```
#menu-item-16 a {
    color: green;
} 
```

或者您也可以尝试将“！important”赋予类css。

```
.menu-item-16 a{
    color: green !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:01:28.637

您需要更新特异性以匹配默认主题 CSS。尝试以下操作（注意`li`之前的`a`）：

```
.menu-item-16 li a, 
.menu-item-16 li a:active, 
.menu-item-16 li a:link, 
.menu-item-16 li a:visited    {
    color: green;
} 
```

另请注意，为了使其正确级联您的样式规则，需要在默认主题 CSS 之后。

===>>> 编辑 <<<===

假设 .menu-item-16*是*默认 CSS 中的 li，您将需要使用以下内容。

```
.news-entry li.menu-item-16 a, 
.news-entry li.menu-item-16 a:active, 
.news-entry li.menu-item-16 a:link, 
.news-entry li.menu-item-16 a:visited    {
    color: green;
} 
```

# c++ - 视觉c++程序问题

> ID：12176328
> 
> 赞同：1
> 
> 时间：2012-08-29T10:54:26.360
> 
> 标签：c++, visual-c++

我正在使用 Microsoft Visual Studio 2010。当我在调试模式下构建我的应用程序时，它正在生成一个 EXE 文件（就像它应该做的那样）。但是（这对我来说非常令人惊讶），当我将模式从 Debug 更改为 Release 模式时，编译器会将应用程序构建为 .DLL 文件？

我最近才开始使用 Visual Studio 2010，所以还不知道如何解决它。我该如何解决这个问题，以便在发布模式下编译时，将应用程序构建为 .exe 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T10:59:11.870

将您的项目类型设置为 Windows 应用程序。

在 IDE 中，右键单击您的项目，然后选择属性。配置属性->常规->配置类型设置为“应用程序（.exe）”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:59:21.360

在项目选项中，您应该能够选择是构建 .DLL 还是 .EXE。我认为这些对于所有配置都是相同的，但您可以自己查看。

# php - 使用已在 googledrive api 中检索到的刷新令牌获取新的访问令牌

> ID：12176330
> 
> 赞同：2
> 
> 时间：2012-08-29T10:54:31.707
> 
> 标签：php, google-drive-api

我正在使用带有 php 的 Gooogledrive Api。使用它我已经从凭据部分检索了刷新令牌。访问令牌在 3600 秒后过期。我的问题是如何从这个刷新令牌中获取新的访问令牌。我使用了谷歌 php 客户端中给出的方法library.我已经调用了 apiclient 的 refreshtoken('refreshtoke') 函数。我的代码如下

```
$client = new apiClient();
$client->setClientId('my-client-id');
$client->setClientSecret('my client-secret-key');
$client->setRedirectUri('my redirect uri');

$client->refreshToken('MY-retrieved-refresh-token'); 
```

但是我收到以下错误：- **未捕获的异常 'apiAuthException' 带有消息'刷新 OAuth2 令牌时出错，消息：'{“error”：“invalid_grant”}**。**

请帮助我。一切正常。但访问令牌在 3600 秒后过期并且不刷新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:28:37.003

//在这行代码之后

```
 $client->refreshToken('MY-retrieved-refresh-token'); 
```

//做这个

```
 $token = $client->getAccessToken(); 
```

// 这将为您提供 json 编码字符串，该字符串将具有访问权限、刷新令牌和承载等。

# wcf - 工作流服务可扩展性问题

> ID：12176331
> 
> 赞同：1
> 
> 时间：2012-08-29T10:54:38.663
> 
> 标签：wcf, workflow-foundation-4, wcf-client, workflowservice, wcf-configuration

我目前遇到工作流服务的一些问题。如果我以较短的顺序开始 4、5，它们可以正常工作，但是如果我增加这个值（从 ~10 开始），那么我会得到以下异常：

> 此通道不能再用于发送消息，因为输出会话由于服务器启动的关闭而自动关闭。通过将 DispatchRuntime.AutomaticInputSessionShutdown 设置为 false 来禁用自动关闭，或者考虑使用远程服务器修改关闭协议。

我认为问题在于我创建代理的方式。我使用以下代码提供代理，尝试重用现有的：

```
public abstract class ProxyProvider<TService>
    where TService : class
{
    /// <summary>
    /// Static reference to the current time provider.
    /// </summary>
    private static ProxyProvider<TService> current = DefaultProxyProvider.Instance;

    private TService service;

    /// <summary>
    /// Gets or sets the current time provider.
    /// </summary>
    /// <value>
    /// The current time provider.
    /// </value>
    public static ProxyProvider<TService> Current
    {
        get
        {
            return ProxyProvider<TService>.current;
        }

        set
        {
            if (value == null)
            {
                throw new ArgumentNullException("value");
            }

            ProxyProvider<TService>.current = value;
        }
    }

    /// <summary>
    /// Resets to default.
    /// </summary>
    public static void ResetToDefault()
    {
        ProxyProvider<TService>.current = DefaultProxyProvider.Instance;
    }

    /// <summary>
    /// Loads the proxy.
    /// </summary>
    /// <param name="forceNew">if set to <c>true</c> [force new].</param>
    /// <returns>The instance of the proxy.</returns>
    public virtual TService Provide(bool forceNew = false)
    {
        if (forceNew || !this.IsInstanceValid())
        {
            this.service = this.CreateInstance();
            return this.service;
        }

        return this.service;
    }

    /// <summary>
    /// Internals the load.
    /// </summary>
    /// <returns>The new created service.</returns>
    protected abstract TService CreateInstance();

    private bool IsInstanceValid()
    {
        var instance = this.service as ICommunicationObject;
        if (instance == null)
        {
            return false;
        }

        return instance.State != CommunicationState.Faulted && instance.State != CommunicationState.Closed && instance.State != CommunicationState.Closing;
    }

    /// <summary>
    /// Defines the default <see cref="ProxyProvider&lt;TService&gt;"/> which uses the System DateTime.UtcNow value.
    /// </summary>
    private sealed class DefaultProxyProvider : ProxyProvider<TService>
    {
        /// <summary>
        /// Reference to the instance of the <see cref="ProxyProvider&lt;TService&gt;"/>.
        /// </summary>
        private static ProxyProvider<TService> instance;

        /// <summary>
        /// Gets the instance.
        /// </summary>
        public static ProxyProvider<TService> Instance
        {
            get
            {
                if (DefaultProxyProvider.instance == null)
                {
                    DefaultProxyProvider.instance = new DefaultProxyProvider();
                }

                return DefaultProxyProvider.instance;
            }
        }

        /// <summary>
        /// Loads the specified force new.
        /// </summary>
        /// <returns>A non-disposed instance of the given service.</returns>
        protected override TService CreateInstance()
        {
            var loadedService = Activator.CreateInstance<TService>();
            return loadedService;
        }
    } 
```

使用额外的“惰性”提供程序：

```
public class CustomConstructorProxyProvider<TService> : ProxyProvider<TService>
    where TService : class
{
    private readonly Func<TService> constructor;

    /// <summary>
    /// Initializes a new instance of the <see cref="CustomConstructorProxyProvider&lt;TService&gt;"/> class.
    /// </summary>
    /// <param name="constructor">The constructor.</param>
    public CustomConstructorProxyProvider(Func<TService> constructor)
    {
        this.constructor = constructor;
    }

    /// <summary>
    /// Internals the load.
    /// </summary>
    /// <returns>The new created service.</returns>
    protected override TService CreateInstance()
    {
        var service = this.constructor();
        return service;
    }
} 
```

这样使用：

```
var proxy = ProxyProvider<IWorkflowService>.Current.Provide();
proxy.DoSomething(); 
```

像这样初始化：

```
ProxyProvider<IWorkflowService>.Current = new CustomConstructorProxyProvider<IWorkflowService>(() => new WorkflowServiceProxy("endpoint")); 
```

工作流服务由 IIS 托管，我添加了以下限制设置：

```
<serviceThrottling
                maxConcurrentCalls="512"
                maxConcurrentInstances="2147483647"
                maxConcurrentSessions="1024"/> 
```

这应该足以满足我的需要。

我希望有人可以帮助我配置客户端和服务器以实现所需的可伸缩性（数百个按顺序启动并并行运行，使用 WorkflowInstance sql 存储）。

**更新**：我对所有服务都使用 NetTcpBinding。

**更新 2**：所有服务现在都在本地托管和使用。

谢谢弗朗西斯科

# bash - 有 Jade 和 Stylus 编译时如何管理文件？

> ID：12176337
> 
> 赞同：0
> 
> 时间：2012-08-29T10:54:53.873
> 
> 标签：bash, node.js, coffeescript, pug

我通常在 Jade、Stylus 和 CoffeeScript 中使用白页，所以我使用 shell 脚本来查看它们并进行编译。并在编码后使用 shell 脚本`pkill -f`杀死它们。

但是有问题：

*   如果我从另一个目录调用这个脚本，它会失败
*   如果我忘记运行第二个脚本，它就会运行，

[http://gitcafe.com/jiyinyiyong/weibo-list/blob/master/watch/watch.sh#code](http://gitcafe.com/jiyinyiyong/weibo-list/blob/master/watch/watch.sh#code)

```
jade -O ../page/ --pretty -w ../src/index.jade &
jade -O ../page/ --pretty -w ../src/login.jade &
coffee -o ../page/ -wbc ../src/handle.coffee &
coffee -o ../page/ -wbc ../src/config.coffee &
stylus -o ../page/ -w ../src/page.styl &
doodle ../page/ ../server.coffee &
node-dev ../server.coffee & 
```

是否有更好的解决方案来管理这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:33:42.200

您可以使用 a`Cakefile`来自动执行此类任务。

我的[`Cakefile`](https://github.com/GotEmB/Download-To-Dropbox/blob/master/Cakefile). 我对所有项目都使用同一个。

有关详细信息，请参阅[`cake.coffee`](http://coffeescript.org/documentation/docs/cake.html)。

# jsp - session.setAttribute 一个文本框

> ID：12176343
> 
> 赞同：0
> 
> 时间：2012-08-29T10:55:19.317
> 
> 标签：jsp

有没有办法将会话属性分配给jsp中的文本框？我想在我的所有应用程序中使用一个通用文本框作为参考。否则你能否建议我一种更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:56:52.263

是的 -`<input type="text" value="${sessionScope.yourkey}" />`

# javascript - 由于某种原因没有返回值

> ID：12176346
> 
> 赞同：1
> 
> 时间：2012-08-29T10:55:24.900
> 
> 标签：javascript, jquery

基本上我有一个脚本函数“ `hola ()`”，如果单选按钮的值为1，它应该返回1的值。但是由于某种原因，当我尝试在另一个函数中获取返回值时，我从来没有得到它。

表单完美运行..唯一的问题是它不返回值

谁能告诉我我做错了什么？？谢谢

```
$(document).ready(function(){
    function hola() {
        $("form[name=yN]").show("slow");
        $('input[type=radio]').click( function (){
            var opt = $(this).attr("value");

            if (opt == "1") {
                this.checked = false;
                $("form[name=yN]").hide("slow");
                return 1;
            }

            if (opt == 0) {
                $("p").html ("ok");
                this.checked = false;
            }
        }) 
    }

    $("#iForm").submit( function(event){
        event.preventDefault();

        var user = $("input[name=username]").val();
        var password = $("input[name=password]").val();
        var dbName = $("input[name=dbName]").val();
        var server = $("input[name=server]").val(); 

        $.get("1.php", 
              {username: user, password: password, dbName: dbName, server: server },
              function(data){
                 if (data == "The table PAGE exists" || data == "The table SUBJECTS exists" || data == "The table USERS exists" ) {
                    // CALLING THE hola () function and expecting a return 
                    var opt = hola();
                    $("p").html(data + opt);
                 }
              }
        )
    })
}) 
```

HTML

```
<!-- Yes or No form -->
<form  name="yN" style= "display: none; margin-left: auto; margin-right: auto; width: 6em">
<input type="radio" name="yN" value="1">yes</input>
<input type="radio" name="yN" value="0">no</input>
<button id=1 >click me!</button>
</form>

<!-- Login Form -->
<form id="iForm"  style= "display: show">
<label id="username" >Username</label>
<input id="username" name="username"/>
<label id="password">Password</label>
<input id="password" name="password" />
<label id="server" >Server</label>
<input id="server" name="server"/>
<label id="dbName" >dbName</label>
<input id="dbName" name="dbName"/>

<input type="submit" value="submit" />
</form>
<p> </p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:03:48.257

事件处理程序不能`return`赋值，因为它们被异步调用*。

您现有的`hola()`函数将立即返回，并且处理程序中的`return`语句仅在`click`很久以后才调用，即单击按钮时。

我的方法是这样的，使用 jQuery 延迟对象（jQuery 1.6+）：

```
function hola() {
    var def = $.Deferred();

    // show the popup confirm form
    ...

    $('input[type=radio]').click(function() {
        // determine return value
        ...

        // send it back to anything waiting for it
        def.resolve(retval);
    });

    // return a _promise_ to send back a value some time later
    return def.promise();
}

$.get("1.php", { ... }).done(function(data) {
    if (...) {
        hola().done(function(opt)) { // will be called when the promise is resolved
            $("p").html(data + opt);
        });
    }
}); 
```

`opt`如果您愿意，您可以使用表示“不接受”的值而不是返回值`def.reject()`，然后使用`.fail`处理程序注册要为该条件调用的处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:02:47.437

您仅在单选按钮的单击功能中返回 1。如果你想要一个函数“hola”在选中单选按钮时返回 1，你只需要这样的东西：

```
function hola() {
  return $("input:radio[name='yN']:checked").val();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:02:57.257

`hola`甚至没有返回语句。这就是它不返回任何东西的原因（更准确地说：`undefined`总是返回）。

`function`根本不包含`return`语句或所有`return`语句都在嵌套s 中的 JavaScript`function`将永远不会返回除`undefined`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T11:05:10.587

您正在尝试使用单击回调函数返回值。将回报移到外面：

```
function hola() {
    var result;

    $("form[name=yN]").show("slow");
    $('input[type=radio]').click( function (){
        var opt = $(this).attr("value");

        if (opt == "1") {
            this.checked = false;
            $("form[name=yN]").hide("slow");
            result = 1;
        }
        if (opt == 0) {
            $("p").html ("ok");
            this.checked = false;
        }
    });

    return result;
} 
```

# c# - 如何从代码隐藏中禁用用户控制？

> ID：12176347
> 
> 赞同：0
> 
> 时间：2012-08-29T10:55:26.983
> 
> 标签：c#, asp.net, .net, wpf, user-controls

我在 ASPX 页面中有 2 个用户控件。默认情况下，应禁用第二个用户控件。在该用户控件中，我只有一个文本框。所以我在页面加载事件中找到了这样的控件：

```
TextBox txtLocation = (TextBox)PI_CompLocationTree.FindControl("txtLocation");
txtLocation.Enabled = false; 
```

但我将 txtLocation 设为空。如何从 ASCX 控件中获取 ASPX 页面中的控件？

我更新的代码..在 Aspx 页面..

```
<%@ Register Src="~/UserControl/PI_CompLocationTree.ascx" TagName="PI_CompLocationTree"
TagPrefix="uc1" %>

 <div id="Div2">
   <div class="location">
      <div class="usLocation">
           <uc1:PI_CompLocationTree ID="PI_CompLocationTree1" runat="server"/>
       </div>
   </div>
 </div> 
```

在页面加载...

```
 PI_CompLocationTree PI_CompLocationTree = new PI_CompLocationTree();

 protected void Page_Init(object sender, EventArgs e)
 {
    var userControl = (PI_CompLocationTree)this.FindControl("PI_CompLocationTree1");
    userControl.EnabledTextBox = false;
 } 
```

在 ASCX 页面中...

```
<asp:TextBox ID="txtLocation" CssClass="fadded_text fadded_text_ctrl" Style="width: 260px;
float: left;" runat="server" Text=""></asp:TextBox> 
```

在 ASCX 代码背后...

```
public partial class PI_CompLocationTree : System.Web.UI.UserControl
{
    public bool EnabledTextBox
    {
        get { return txtLoc.Enabled; }
        set { txtLoc.Enabled = value; }
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:19:06.687

使用 FindControl 方法如下..

```
1\.  UserControlClass objOfUserControl = (UserControlClass)Page.FindControl("UserControlID");
    TextBox txtLocation= objOfUserControl.FindControl("txtLocation");
    txtLocation.Enabled = false; 
```

2.您也可以使用公共财产如下

**在用户控制代码隐藏中**

```
public bool TextBoxUSC
{
  set{txtLocation.Enabled = value;}
} 
```

**在 Aspx 代码后面**

```
UserControlClass.TextBoxUSC=false; 
```

**如果您使用母版页**

```
 ContentPlaceHolder cph = (ContentPlaceHolder)this.Page.Master.FindControl("MainContent");//"MainContent" is ContentPlaceHolder's ID

    UserControlClass userCntrl = (UserControlClass)cph.FindControl("UserControlID");
    userCntrl.TextBoxUSC = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:57:52.813

尝试这个

**已编辑**

用aspx制作`Enabled` `false`你可以这样制作：

将属性添加到您的 UC：

```
 public bool EnabledTextBox
 {
    get{return IdTextBox.Enabled;}
    set{IdTextBox.Enabled=value;}
 } 
```

然后在 aspx 中：

```
IdOfYourUserControlWithProperty.EnabledTextBox = false; 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:57:28.537

罗宾 你可以删除

```
TextBox txtLocation = (TextBox)PI_CompLocationTree.FindControl("txtLocation");
txtLocation.Enabled = false; 
```

在您的 aspx 中，添加带有 runat="server" 的表单

也删除

```
PI_CompLocationTree PI_CompLocationTree = new PI_CompLocationTree(); 
```

您不需要，因为您使用 FindControl

你的工作很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:24:49.233

```
PI_CompLocationTree1.EnabledTextBox = false; //from .aspx page.  There's no need to use FindControl if you've added it statically to the webpage. 
```

# string - Magento URL 添加随机字符串

> ID：12176350
> 
> 赞同：1
> 
> 时间：2012-08-29T10:55:47.090
> 
> 标签：string, url, magento

目前正在运行一个 Magento 安装，它似乎在每个产品 URL 的末尾打印 #.UD3vymhSSYV。我以为我可以使用 htaccess 文件将其删除，但是每当这样做时，它都会生成不同的随机代码。

[http://domainname.com/gentlemans-tall-coat-wallet#.UD3vymhSSYV](http://domainname.com/gentlemans-tall-coat-wallet#.UD3vymhSSYV)

正如你在上面看到的。我只是不知道它来自哪里或如何摆脱它。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:12:39.390

**这个答案可能是错误的：**

无害 - 您添加了一些 ADDTHIS 扩展。

他们的网址如下： http: [//www.addthis.com/browser-extensions#.UD4zyRVFcal](http://www.addthis.com/browser-extensions#.UD4zyRVFcal)

无需进一步操作，但您可能希望摆脱“addthis”跟踪代码。

**这个答案大部分是错误的：**

对我来说，这看起来不像是 Magento SID 字符串。

您可能有一个受感染的服务器，有人能够将*内容*写入/注入您的 index.php./.htaccess

在 localhost 上启动该站点并确保安装文件是应有的，尤其是 index.php 和 .htaccess。

服务器可能会受到对盒子上其他任何东西的常见攻击，例如 Wordpress、Expression Engine 或任何其他具有已知漏洞的东西。

至于锚字符串的作用，这对您来说可能并不明显，但可能只是供搜索引擎选择 - 检查您的网站不是 Google 上的“伟哥”网站。

不过不要惊慌 - Magento 的数据库不太可能受到损害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T12:45:05.387

是的，它是通过 addthis 脚本完成的。

查看如何删除： http: [//support.addthis.com/customer/portal/articles/1013558-removing-all-hashtags-anchors-weird-codes-from-your-urls#.UrGWX_QW314](http://support.addthis.com/customer/portal/articles/1013558-removing-all-hashtags-anchors-weird-codes-from-your-urls#.UrGWX_QW314)

# android - 在 Android 的 Twitter 中的 OAuthRequestTokenTask 中的 URL 中获取空值？

> ID：12176352
> 
> 赞同：0
> 
> 时间：2012-08-29T10:56:06.033
> 
> 标签：android, twitter

我正在开发需要在 Twitter 上发布短信的 Android 应用程序。这是一项非常简单的任务，我之前一杆完美地做到了，但现在我遇到了未知的停工。应用程序在“正在验证请稍候”对话框中挂起。

在调试时，我知道在**doInBackground(Void... params)方法期间的****OAuthRequestTokenTask**活动中，URL 变为**空**，并且出现异常。

 ****请在我的代码中建议我，发生了什么？？？？

**已编辑：**我在以下方法中的**OAuthRequestTokenTask类中为空：**

```
@Override
    protected Void doInBackground(Void... params) {

        try {
            **final String url = provider.retrieveRequestToken(consumer, Constants.OAUTH_CALLBACK_URL);**
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
            context.startActivity(intent);
        } catch (Exception e) {
            System.out.println(e+ "========");
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:19:31.780

我在上述任务中取得了成功。

我犯的错误是，没有在我的 Twitter 帐户上提供应用程序的回调 URL。:)****

# jquery - jquery 按钮 - 隐藏的 div 会在显示后刷新或加载

> ID：12176355
> 
> 赞同：0
> 
> 时间：2012-08-29T10:56:09.927
> 
> 标签：jquery

我有一系列显示和隐藏 div 的按钮。我只想在按下按钮后从隐藏的 div 加载数据。因此，基本上所有隐藏的 div 都会在显示后刷新或加载。

有人知道怎么做这个吗？

```
<button class="menubutton" id="1">1</button>
<button class="menubutton" id="2">2</button>
<button class="menubutton" id="3">3</button>
<button class="menubutton" id="4">4</button>

<div id="1" style="display:none;">
DATA
</div>

<div id="2" style="display:none;">
DATA
</div>

<div id="3" style="display:none;">
DATA
</div>

<div id="4" style="display:none;">
DATA
</div>

$("#1").button().click(function() {
$('#1').show();
$('#2').hide();
$('#3').hide();
$('#4').hide();
});

etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:58:59.207

使用 AJAX 加载内容：http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

所以你做这样的事情：

```
$('.menuButton').click(function()) {
    $('.menuButton').hide();
    if ($(this).html() == '') {
        $.get('somepage.html', function(data) {
            $(this).html(data);
        });
    }
    $(this).show();
}); 
```

# c# - 使用 EWS 为退回的电子邮件获取原始邮件标头

> ID：12176360
> 
> 赞同：3
> 
> 时间：2012-08-29T10:56:26.247
> 
> 标签：c#, email, c#-4.0, exchangewebservices

我已经使用 Microsoft Exchange Server 2010 进行了一些研究和一些代码测试，以意识到在退回的电子邮件中，标题正在被删除。我提到的其中一篇文章是这样的：[Detecting bolted messages by return-path header](https://stackoverflow.com/questions/9104404/detecting-bounced-messages-by-return-path-header)。

我遇到的问题是尝试从退回的电子邮件中检索自定义标头，但根据我的研究，这似乎是不可能的。上面文章中提到的另一个解决方案是使用返回路径地址。

但是，当我使用 Microsoft Outlook Web App 访问我的网络电子邮件并检查退回到我的地址的电子邮件时，我能够查看原始邮件标题。那么，是否可以使用 EWS 托管 API 来检索原始邮件标头？

原始消息头如下：

```
管理员诊断信息：

    生成服务器：MXG001.domain.com

    email.that.do.not.exist.1234567890@gmail.com
    gmail-smtp-in.l.google.com ##SMTP#

    原始邮件标题：

    返回路径：sender@domain.com
    收到：来自 IMSA（后缀）的 MXG001.domain.com（未知 [127.0.0.1]）
     使用 ESMTP id 1484C26805C ；
     2012 年 8 月 29 日星期三 20:07:56 +1000 (EST)
    收到：来自 EZY106（未知 [10.32.8.141]）由 MXG001.domain.com
     （后缀）与 ESMTP id 6F7B026805B 为
     email.that.do.not.exist.1234567890@gmail.com；2012 年 8 月 29 日，星期三 20:07:55
     +1000（美国东部标准时间）
    回复：myemail@domain.com
    X-CustomHeader1：0E591306-9997-4E35-954E-F36A069AF8B4
    X-CustomHeader2：1F80DCBF-2F93-49A4-90C0-00E79763B916
    MIME 版本：1.0
    发件人：域 sender@domain.com
    发件人：myemail@domain.com
    收件人：email.that.do.not.exist.1234567890@gmail.com
    日期：2012 年 8 月 29 日，星期三 18:10:13 +0800
    主题：测试电子邮件跟踪 3
    内容类型：文本/html；charset="us-ascii"
    内容传输编码：quoted-printable
    消息 ID：20120829100755.6F7B026805B@MXG001.domain.com
    X-TM-AS-MML：没有
    X-TM-AS-产品版本：IMSA-8.2.0.1520-6.8.0.1017-19146.000
    X-TM-AS-结果：否--0.146-5.0-31-10
    X-imss-scan-details: 否--0.146-5.0-31-10
    X-TM-AS-User-Approved-Sender: 否
    X-TMASE 版本：IMSA-8.2.0.1520-6.8.1017-19146.000
    X-TMASE-结果：10--0.146400-5.000000
    X-TMASE-MatchedRID：wjdoQEOKyrZ7ahiNncA4hJpaQZrxtVBsqS91SjnldFIi7hIFpWx7pqbF
          sETXF+9u5V8fgkZZSCU19vcvk7TH/S8xkUATmhC45BgEdUqqANSV8bCk1I9WfnXA+T8YcZkDP/i
        gW2j9KQ2dtSjAL+46o1q6LJohGEOtW5fzCBTKbRONes9LMglhgLejw9iqfGUKR0givuLhSAhBg2
      NqmDTb6Q+gzceqIagHXcAUO5rYRMutSn//sy4xSbAVy0FQT/1xloKBPsyyeoXpAAWYDGUZn3OxN
            uYzUrAfNmDrdAkjVfe9KhpQKnl6nw==

```

我使用下面的代码编写一个客户端来访问 EWS，它也可以正常工作。所以我唯一的问题是是否可以检索原始邮件头？如果是这样，我该怎么做？谢谢！

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP1);
service.Credentials = new WebCredentials(@"myUsername", "myPassword");
service.Url = new Uri("https://webmail.domain.com/ews/exchange.asmx");

Folder inbox = Folder.Bind(service, WellKnownFolderName.Inbox);
SearchFilter sf = new SearchFilter.IsEqualTo(ItemSchema.ItemClass, "REPORT.IPM.Note.NDR");
SearchFilter searchFilter = new SearchFilter.SearchFilterCollection(LogicalOperator.And, new SearchFilter[] { sf });
ItemView view = new ItemView(20);

FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, searchFilter, view);

foreach (EmailMessage item in findResults)
{
// Can process whatever is necessary here                  
} 
```

# php - 在 FB.Share 之后获取响应/事件句柄

> ID：12176364
> 
> 赞同：0
> 
> 时间：2012-08-29T10:56:35.837
> 
> 标签：php, facebook, fbml, fbconnect

在我的 php 代码中，我使用以下代码共享数据：

```
 <a id="fbshare" class="fbshare" href="#" onclick="fbshare()" name="fb_share" share_url="<?=$dataLink"></a>
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script> 
```

我想要响应/事件回到页面。

任何可观的帮助.. !!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:11:45.847

```
 FB.ui(
   {
     method: 'feed',
     name: 'Facebook Dialogs',
     link: 'http://developers.facebook.com/docs/reference/dialogs/',
     picture: 'http://fbrell.com/f8.jpg',
     caption: 'Reference Documentation',
     description: 'Dialogs provide a simple, consistent interface for applications to interface with users.',
     message: 'Facebook Dialogs are easy!'
   },
   function(response) {
     if (response && response.post_id) {
       alert('Post was published.');
     } else {
       alert('Post was not published.');
     }
   }
 ); 
```

我想你在你的 fbshare 函数中调用 FB.ui 方法，你可以在那里添加一个函数来获得响应，这里是一个示例代码。

# php - 为什么我的变量超出范围？PHP

> ID：12176366
> 
> 赞同：2
> 
> 时间：2012-08-29T10:56:44.057
> 
> 标签：php

语言是 Apache 2.2 服务器上的 PHP 5.4。这是一个由ajax调用的脚本。

```
$usr = new User();

function getMyName(){
    echo $usr->username;
}
getMyName(); 
```

由于某种原因 $name 超出范围。为什么会这样？我也尝试直接调用脚本，结果相同。我尝试使用 use($name) 来解决，但这显然只适用于匿名函数（闭包）？

当我这样做时，它可以工作，但很荒谬：

```
$usr = new User();
$name = $usr->username;

function getMyName($n){
    echo $n;
}
getMyName($name); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:00:38.053

```
$usr = new User();

function getMyName(){
    global $usr;
    echo $usr->username;
}
getMyName(); 
```

或者：

```
$usr = new User();

function getMyName($usr){
    echo $usr->username;
}
getMyName($usr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:05:27.067

这并不荒谬。这就是变量作用域应该如何工作的。您需要将 $usr 变量作为函数参数传递，否则它将超出范围。函数旨在接收输入并发送回结果/输出。你应该坚持你的第二个例子，而不是搞乱全局......

```
$usr = new User();
$name = $usr->username;

function getMyName($n){
    echo $n;
}
getMyName($name); 
```

这是维基百科的引述：

> 在计算机科学中，子例程，也称为过程、函数、例程、方法或子程序，是执行特定任务的较大计算机程序中源代码的一部分，并且相对独立于其余代码。

# c# - 在模型中保存模型

> ID：12176369
> 
> 赞同：1
> 
> 时间：2012-08-29T10:57:09.760
> 
> 标签：c#, asp.net-mvc, razor

所以，我有这个`Property`由`ID` `Name`and定义的类`DataType`。 `DataType`已经填充了静态值，并被用作下拉列表。

现在，当用户从列表中选择某个值（`List`准确地说是值）时，应用程序会打开额外的文本框和按钮，以填充该列表。

模型是这样的。

物业模型

```
public class Property
{
    public int ID {get; set;}
    public string Name {get; set;}

    public int DTypeID {get; set;}
    public virtual DType DTypes {get; set;}
} 
```

列表模型

```
public class DList
{
    public int ID {get; set;}
    public int PropertyID {get; set;}
    public string ListValue {get; set;}
} 
```

这就是我到目前为止所做的。

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <div class="labels tableRow">
            <div class="editor-label tableCell">
                <p>
                    Name
                </p>
                <p>
                    Data Type
                </p>
            </div>
            <div class="editor-field tableCell">
                <p>
                    @Html.TextBoxFor(model => model.Name, new { @class = "textEntry" })
                    @Html.ValidationMessageFor(model => model.Name)
                </p>
                <p>
                    @Html.DropDownList("DTypeID", (SelectList)ViewBag.DTypeID, new { @class = "dropdown", @onchange = "DropDownChange()"})
                    @Html.ValidationMessageFor(model => model.DTypeID)
                </p>
            </div>
        </div>

        <div id="StaticListUI" class="invis">
            <div class="labels tableRow">
                <div class="editor-label tableCell">
                    <p>
                        @*here goes list*@
                    </p>
                </div>
                <div class="editor-field tableCell">
                    <p>
                        @*here goes textbox*@
                        @Html.TextBox("textboxList")
                    </p>
                    <p>
                        @*here goes button*@
                        <button name="button" value="add">Add</button>
                    </p>
                </div>

            </div>

        </div>

        <p class="labels">
            @*<input type="submit" value="Create" />*@
            <button name="button" value="create">Create</button> |
            <input type="button" value="Back" onClick='javascript:location.href = "@Url.Action("Index", "Property")";' />
        </p>
    </fieldset>
} 
```

所以为了捕捉点击了哪个按钮，我为我的控制器做了这个。

```
[HttpPost]
public ActionResult Create(string button, string textboxList, Property property)
{

    if (button == "add")
    {
        var lastProperty = db.Properties.OrderByDescending(p => p.PropertyID).FirstOrDefault();
        int propID;
        if (lastProperty == null)
        {
            propID = 1;
        }
        else
        {
            propID = 1 + lastProperty.PropertyID;
        }

        DList dList = new DList();

        dList.PropertyID = propID;
        dList.ListValue = textboxList;

        db.DLists.Add(dList);

        return View(property);
    }

    string projectID = System.Web.HttpContext.Current.Session["_SelectedProjectID"].ToString();
    int projID = Convert.ToInt32(projectID);
    property.ProjectID = projID;
    property.DateCreated = DateTime.Now;
    property.DateEdited = DateTime.Now;

    if (ModelState.IsValid)
    {
        db.Properties.Add(property);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    ViewBag.DTypeID = new SelectList(db.DType, "ID", "Name", property.DTypeID);
    return View(property);
} 
```

问题是当我点击`Add`按钮时，它仍然会发送一个检查`ModelState.IsValid`，这不应该。我做错了什么，或者我做对了什么:(

注意：其他一切基本上都有效。

**编辑**

所以我改变了控制器以接受来自不同点击按钮的参数。但是还是少了点什么……

```
 [ActionName("Create")]
    [AcceptVerbs(HttpVerbs.Post)]
    [AcceptParameter(Name = "button", Value = "add")]
    public ActionResult Create_Add(string textboxList)
    {
        var lastProperty = db.Properties.OrderByDescending(p => p.PropertyID).FirstOrDefault();
        int propID;
        if (lastProperty == null)
        {
            propID = 1;
        }
        else
        {
            propID = 1 + lastProperty.PropertyID;
        }

        DList dList = new DList();

        dList.PropertyID = propID;
        dList.ListValue = textboxList;

        db.DLists.Add(dList);
        db.SaveChanges();

        return View();
    }

    [AcceptVerbs(HttpVerbs.Post)]
    [AcceptParameter(Name="button", Value="create")]
    public ActionResult Create(Property property)
    {
        string projectID = System.Web.HttpContext.Current.Session["_SelectedProjectID"].ToString();
        int projID = Convert.ToInt32(projectID);
        property.ProjectID = projID;
        property.DateCreated = DateTime.Now;
        property.DateEdited = DateTime.Now;

        if (ModelState.IsValid)
        {
            db.Properties.Add(property);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.DTypeID = new SelectList(db.DType, "ID", "Name", property.DTypeID);
        return View(property);
    }

    public class AcceptParameterAttribute : ActionMethodSelectorAttribute
    {
        public string Name { get; set; }
        public string Value { get; set; }

        public override bool IsValidForRequest(ControllerContext controllerContext, System.Reflection.MethodInfo methodInfo)
        {
            var req = controllerContext.RequestContext.HttpContext.Request;
            return req.Form[this.Name] == this.Value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:34:23.913

您有`db.DLists.Add(dList);`但不将其保存在数据库中，您只需返回视图。你可以把它放在`db.Configuration.ValidateOnSaveEnabled = false;`上面`db.DLists.Add(dList);`，看看它是否有效，但我认为它应该是这样的：

```
db.Configuration.ValidateOnSaveEnabled = false;
db.DLists.Add(dList);
db.SaveChanges();
return View(property); 
```

您可能希望在返回之前重新打开 Validate On Save。

**更新** 也许你可以试试这个：

```
@{
    var textBoxData = form.find('input[name="textboxList"]').val();
}
<input type="button" value="Add"  title="Add"  onclick="location.href='@Url.Action("Create_Add", "Controller", new { textboxList = textBoxData })'" /> 
```

# jakarta-ee - 连接到 Struts 应用程序中的页面 - 如何运行所需的启动？

> ID：12176371
> 
> 赞同：0
> 
> 时间：2012-08-29T10:57:10.550
> 
> 标签：jakarta-ee, struts2, struts-action

我有使用 Struts2 的应用程序。此应用程序具有指向包含表单的页面的链接。这些链接运行在方法启动中准备页面的操作。struts.xml 的波纹管部分：

```
<action name="linkToPage1" class="Bean1Action" method="start">
<result name="succes">/page1.jsp</result>
</action>

<action name="linkToPage2" class="Bean2Action" method="start">
<result name="succes">/page2.jsp</result>
</action> 
```

这些页面非常复杂，因此它们需要在方法启动中启动。

page1.jsp：

```
<s:form action="form1submit">
    ...
    <s:submit ... >
</s:form> 
```

page2.jsp：

```
<s:form action="form2submit">
    ...
    <s:submit ... >
</s:form> 
```

这些表单调用下一步操作：

```
<action name="form1submit" class="Bean1Action" method="submit">
<result name="succes">/succesInfo.jsp</result>
</action>

<action name="form2submit" class="Bean2Action" method="submit">
<result name="succes">/succesInfo.jsp</result>
</action> 
```

我想制作一个包含两个提到的表单的页面，并为每个表单提交。创建新的 .jsp 页面并从 page1.jsp 和 page2.jsp 复制表单是没有问题的，但是带有指向这个新页面的链接。新链接必须同时运行： Bean1Action.start() 和 Bean2Action.start() 方法。如何运行两个启动？我不想改变 Beans。我更喜欢通过 struts.xml 和 .jsp 文件来解决它。

# node.js - Cordova / phonegap & node.js : XMLHttpRequest 返回状态 0

> ID：12176372
> 
> 赞同：1
> 
> 时间：2012-08-29T10:57:13.660
> 
> 标签：node.js, cordova, xmlhttprequest

我在 node.js 中编写了一个 HTTP 服务器

```
var http = require('http');
http.createServer(function (request, response) {
  response.writeHead(200, {'Content-Type': 'text/plain'});
  response.end('Hello World ' + request.url + '\n\n');
  console.log(request.url);
}).listen(8124);
console.log('Server running at http://127.0.0.1:8124/'); 
```

这应该满足来自 phonegap / cordova 应用程序的请求：

```
function testnodejs() {
    xmlHttp=GetXmlHttpObject()
    if (xmlHttp==null)  {
        alert ("Your webbrowser does not support HTTP Request");
        return;
    }
    var url="http://domain.com:8124/i.t?hi=hi!";
    console.log(url);
    document.getElementById("maindiv").innerHTML = "<div id='itembrd' onClick=\"testnodejs();\"><div id='item'>Nodetest</div></div>";
    xmlHttp.open("GET", url, true)
xmlHttp.onreadystatechange=function() {
        document.getElementById("maindiv").innerHTML += xmlHttp.status + " ";
        if (xmlHttp.readyState==4) {
            console.log(xmlHttp.responseText);
            document.getElementById("maindiv").innerHTML += xmlHttp.responseText + '<br />\n';
        }
    }
    xmlHttp.send(null)
} 
```

在 config.xml 我有

```
<access origin=".*" /> 
```

该请求返回一个 readyState 4，但当您期望 200 时返回一个状态 0。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:39:52.920

So, I put this aside for a couple of days. Headed back in with fresh abandon and fixed it. The issue was at the node.js server side which doesn't return 200 but 0\. That's because of allow origin. I rewrote the response header thusly:

```
response.writeHead(200, {
    'Content-Type': 'text/plain',
    'Access-Control-Allow-Origin' : '*'
}); 
```

and voila! tango!

Now I have a very lightweight solution for XHR requests from within cordova / phonegap apps.

# html - 如果我应用固定位置，保证金顶部在 ie7 中不起作用

> ID：12176373
> 
> 赞同：0
> 
> 时间：2012-08-29T10:57:13.410
> 
> 标签：html, css

如果我使用 css 中固定的位置，我在 ie7 中的 margin-top 有问题。

我在网上搜索解决方案并尝试了很多但没有任何效果。

测试 div 的 margin-top 不起作用。

任何帮助，将不胜感激。

这是我的html

```
<!DOCTYPE html>
<html lang="en">
<head>
<title> test </title>
<link rel="stylesheet" href="test.css">

<!--[if IE 7]><link rel="stylesheet" href="ie7.css" type="text/css" media="screen"/><![endif]-->

</head>

<body>
<div id="fixed1">
<div id="fixed"></div>
</div>

<div id="test">
ayhd iaudiuawdyiaudyw
</div>
<div class="clear">
</div>

</body>
</html> 
```

这是我的CSS

```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote,
pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, 
q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, 
form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {
margin : 0;
padding : 0;
border : 0;
outline : 0;
font-weight : inherit;
font-style : inherit;
font-size : 100%;
font-family : inherit;
vertical-align : baseline;}
:focus {
outline : 0;
}
body {
line-height : 1;
color : black;
background : white;
}
ol, ul {
list-style : none;
}
table {
border-collapse : separate;
border-spacing : 0;
}
caption, th, td {
text-align : left;
font-weight : normal;
}

#fixed1 {
position : fixed;
width : 100%;
top : 0;
background-color : red;
}
#fixed {
margin : 0 auto;
height : 20px;
background-color : blue;
width : 980px;
}
#test {
margin : 0 auto;
margin-top : 20px;
margin-bottom : 20px;
height : 2000px;
width : 980px;
background-color : red;
} 
```

这是ie7.css

```
#fixed1{
left:0px;
}

#test{
margin-top:30px;
background-color:grey;
} 
```

谢谢你，基肖尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:00:56.113

检查这个[小提琴](http://jsfiddle.net/S9AVa/1/)。我已经在小提琴中添加了您的代码。它也适用于 ie 7 [http://jsfiddle.net/S9AVa/1/](http://jsfiddle.net/S9AVa/1/)

问题是因为以 2 种方式指定边距，边距：0 自动；又是margin-top 和margin-bottom。IE 考虑第一次调用。

它应该像

```
#test {
margin : 20px auto 20px auto;
float:left;
 height : 2000px;
width : 1040px;
background-color : red;
} 
```

我已经添加`left:0;`到`fixed1`课堂上。

更新了演示[http://jsfiddle.net/S9AVa/2/](http://jsfiddle.net/S9AVa/2/)

# mysql - MySQL 面试，这让我失去了工作资格

> ID：12176374
> 
> 赞同：5
> 
> 时间：2012-08-29T10:57:17.757
> 
> 标签：mysql

我收到了这个 MySQL 面试问题，这让我失去了这份工作的资格。

我去面试，被问到一个我无法回答的问题，我丢了工作。

他们问过。

我们有两个表，第一个表（主表）`CANDIDATES`包含字段：

*   `candidate_id`（首要的关键）
*   `candidate_name`

第二个表（子表）`CANDIDATE_VOTES`包含字段：

*   `v_id`（首要的关键）
*   `candidate_id`（外键）

每次投票时，候选人的candidate_key 都会放在孩子中。

`CANDIDATE`：

```
=================================     
|candidate_id | candidate_Name  |  
|-------------------------------|  
| 1           | abc             |  
|-------------------------------|  
| 2           | xyz             |  
|-------------------------------|  
| 3           | etc             |  
|-------------------------------| 
```

`CANDIDATE VOTES`

```
==========================     
| votes_id | candidate_id |  
|-------------------------|  
| 1        | 1            |  
|-------------------------|  
| 2        | 1            |  
|-------------------------|  
| 3        | 2            |  
|-------------------------| 
```

问题是*您将如何宣布获胜者*？

请帮我怎么做。

我尝试了很多，但找不到逻辑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T11:04:36.690

您应该返回所有得票最多的候选人：

```
SELECT   candidates.*
FROM     candidates JOIN candidate_votes USING (candidate_id)
GROUP BY candidate_id
HAVING   COUNT(*) = (
  SELECT   COUNT(*)
  FROM     candidate_votes
  GROUP BY candidate_id
  ORDER BY votes DESC
  LIMIT    1
) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/77337/1/0)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:00:59.517

您可以使用 a`COUNT()`来获取与每个候选人相关的总票数。通过连接这两个表，您可以返回`candidate_name`，如果您在查询中使用`LIMIT`and `ORDER BY`，它将仅返回确定为获胜者的记录。

```
SELECT count(*) winner, c.candidate_Name
FROM candidates c
INNER JOIN candidate_votes cv
   ON c.candidate_id = cv.candidate_id
GROUP BY c.candidate_Name
ORDER BY winner desc
LIMIT 1  -- remove the LIMIT to see all records 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/36c64/1)

或 MySQL 允许`GROUP BY`对不在`SELECT`

```
SELECT count(*) winner, , c.candidate_Name
FROM candidates c
INNER JOIN candidate_votes cv
   ON c.candidate_id = cv.candidate_id
GROUP BY cv.candidate_id
ORDER BY winner desc
LIMIT 1 -- remove the LIMIT to see all records 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/36c64/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:05:27.113

```
SELECT   CANDIDATE_NAME, count(*)
FROM     CANDIDATES, CANDIDATE_VOTES
WHERE    CANDIDATES.CANDIDATE_ID = CANDIDATE_VOTES.CANDIDATE_ID
GROUP BY CANDIDATE_NAME
ORDER BY count(*) DESC
LIMIT    1 
```

SELECT：您选择候选人姓名+票数

FROM：使用两个表

WHERE：基本上是连接表的连接

GROUP BY：按候选人姓名对选票进行分组，SELECT 中的 count(*) 将显示分组为 1 行的行数（也就是每位候选人的票数）

ORDER BY：按票数从高到低排序

LIMIT：将只返回 1 行，删除此行以查看候选人和投票的完整列表

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T11:08:33.460

有几种方法可以做到这一点。一种是使用 GROUP BY：

```
SELECT TOP 1 C.candidate_id, C.candidate_name, COUNT(1) NoOfVotes
FROM CANDIDATES C
INNER JOIN CANDIDATE_VOTES CV ON C.candidate_id = CV.candidate_id
GROUP BY C.candidate_id, , C.candidate_name
ORDER BY 3 DESC 
```

该语句为每个投票创建一行，然后按候选人对这些行进行分组，并计算每个候选人的行数。然后它按每个候选人的计票排序并选择前 1 名（虽然不处理平局）。

编辑：此答案对 T-SQL (SQL Server) 有效。从其他答案看来，您需要在最后使用“LIMIT 1”而不是在 MySQL 的开头使用“TOP 1”。

# objective-c - Linea pro 设备检测

> ID：12176375
> 
> 赞同：1
> 
> 时间：2012-08-29T10:57:22.970
> 
> 标签：objective-c, ios, barcode-scanner, linea-pro

在我的应用程序中，我需要扫描条形码。为此，我正在使用 iPhone 附带的 Linea pro 条码扫描设备。我需要通过代码知道设备的存在。可能吗？我是目标 C 的新手。帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:37:08.337

对的，这是可能的。

您所要做的就是：

```
int lineaStatus = [[Linea sharedDevice] connstate]; 
```

他们只是将它们与这样的不同连接状态进行比较。

```
 if(lineaStatus == CONN_DISCONNECTED) {
           //Device is connected
   } else if(status == CONN_CONNECTED) {
            //Device is disconnected. 
   } 
```

# opencv - 人脸识别的姿势校正

> ID：12176377
> 
> 赞同：2
> 
> 时间：2012-08-29T10:57:27.477
> 
> 标签：opencv, computer-vision, face-recognition

我有一个带有面孔的图像数据集。对于数据集中的每张脸，我还拥有一组 66 个 2D 点，这些点对应于我的脸标志（鼻子、眼睛、脸的形状、嘴巴）。

所以基本上我有我的脸的形状，就我的图像中的 2D 点而言。

你知道我可以使用什么算法并且可以旋转我的形状以使脸形变直吗？假设平移角度为 30 度，我希望它旋转 30 度，以便将其定位在平移角度的 0 度处。我已经说明了我想说的话。

![在此处输入图像描述](../Images/f0bd4562bd44d5b7328b0dc5efb44ced.png)

![在此处输入图像描述](../Images/8d1c1ba123b7cbfe80325731adebf1dc.png)

基本上，您可以考虑我的图像的上述形状轮廓，它们以 2D 表示。我想旋转我的第一个形状点，使它们看起来像第二个形状。形状由一组`66 2D points which are basically pixel coordinates`. 我要做的就是找到每一个的对应关系，`66 points`以便新形状在平移角度上旋转一定程度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:41:48.873

根据您的问题，我可以假设您具有旋转参数（例如 x，y 中的度数）或点对应关系（因为您有匹配点的数据库）。因此，您需要应用或估计（并应用）用于图像对齐/配准的 2D 相似性变换。另请参阅此问题的回复： [图像上的面部对齐算法](https://stackoverflow.com/questions/12046462/face-alignment-algorithm-on-images/12048097#12048097)

**从旋转角度到新的点位置**：您可以定义一个 2D 旋转矩阵`R`并用它转换您的点坐标。

**从形状 A 和形状 B 之间的点对应到旋转**：使用 3 个或更多匹配点估计 2D 相似性变换（图像对齐）。

**从旋转或点对应到扭曲图像**：从相似变换，使用整个图像网格的基础坐标变换映射图像值（考虑插值或非值）。

![点约束图像变形](../Images/040f725d15a0166b94a045e41c60c104.png) *[（图片由AAM 幻灯片](http://denis.simakov.info/weizmann/slides.php)的 Denis Simakov 提供）*

其中大部分已经在 OpenCV 和 MATLAB 中实现。另请参阅 Active Shape 和[Active Appearance Models](http://personalpages.manchester.ac.uk/staff/timothy.f.cootes/Models/aam.html)的背景和相关方法（Tim Cootes 页面包括二进制文件和背景材料）。

# matplotlib - 在 Matplotlib 直方图中定义 bin 宽度/x 轴比例

> ID：12176385
> 
> 赞同：2
> 
> 时间：2012-08-29T10:58:06.007
> 
> 标签：matplotlib, axis

我正在使用 matplotlib 生成直方图。

我需要垃圾箱的宽度不等，因为我最感兴趣的是最低的垃圾箱。现在我正在这样做：

```
plt.hist(hits_array, bins = (range(0,50,10) + range(50,550,50))) 
```

这创建了我想要的（前 5 个 bin 的宽度为 10，其余 50 个），但是前五个 bin 当然比后一个更窄，因为所有 bin 都显示在同一轴上。

有没有办法影响 x 轴或直方图本身，所以我可以在前 5 个 bin 之后打破比例，所以所有 bin 都显示为同样宽？

（我意识到这会产生一个扭曲的视图，我对此很好，尽管我不介意轴的两个不同比例的部分之间有一点空间。）

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-07T05:28:56.007

我在这里有一个类似的问题，答案是使用肮脏的黑客。 [Matplotlib 直方图与高值收集箱](https://stackoverflow.com/questions/26218704/matplotlib-histogram-with-collection-bin-for-high-values)

因此，使用以下代码，您将获得已经拥有的丑陋直方图。

```
def plot_histogram_04():
    limit1, limit2 = 50, 550
    binwidth1, binwidth2 = 10, 50    
    data = np.hstack((np.random.rand(1000) * limit1, np.random.rand(100) * limit2))

    bins = range(0, limit1, binwidth1) + range(limit1, limit2, binwidth2)

    plt.subplots(1, 1)
    plt.hist(data, bins=bins)
    plt.savefig('my_plot_04.png')
    plt.close() 
```

![在此处输入图像描述](../Images/562e90f1b79cf0564c682e4911b09b55.png)

为了使垃圾箱等宽，您确实必须使它们等宽！这意味着操纵您的数据，使它们都落在等宽的箱中，然后使用 xlabel。

```
def plot_histogram_05():
    limit1, limit2 = 50, 550
    binwidth1, binwidth2 = 10, 50

    data = np.hstack((np.random.rand(1000) * limit1, np.random.rand(100) * limit2))

    orig_bins = range(0, limit1, binwidth1) + range(limit1, limit2 + binwidth2, binwidth2)
    data = [(i - limit1) / (binwidth2 / binwidth1) + limit1 
            if i >= limit1 else i for i in data]
    bins = range(0, limit2 / (binwidth2 / binwidth1) + limit1, binwidth1)

    _, ax = plt.subplots(1, 1)
    plt.hist(data, bins=bins)

    xlabels = np.array(orig_bins, dtype='|S3')
    N_labels = len(xlabels)
    print xlabels
    print bins
    plt.xlim([0, bins[-1]])
    plt.xticks(binwidth1 * np.arange(N_labels))
    ax.set_xticklabels(xlabels)

    plt.savefig('my_plot_05.png')
    plt.close() 
```

![在此处输入图像描述](../Images/202c02706011d7a011cee1d8b03d0186.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T16:27:19.180

您可以使用`bar`并且无需拆分轴。这是一个例子，

```
import matplotlib.pylab as plt
import numpy as np

data = np.hstack((np.random.rand(1000)*50,np.random.rand(100)*500))
binwidth1,binwidth2=10,50
bins=range(0,50,binwidth1)+range(50,550,binwidth2)

fig,(ax) = plt.subplots(1, 1)

y,binEdges=np.histogram(data,bins=bins)

ax.bar(0.5*(binEdges[1:]+binEdges[:-1])[:5], y[:5],width=.8*binwidth1,align='center')
ax.bar(0.5*(binEdges[1:]+binEdges[:-1])[5:], y[5:],width=.8*binwidth1,align='center')
plt.show() 
```

![在此处输入图像描述](../Images/2364192da5c5119c110f539f682a0c15.png)

如果您真的想拆分轴，请查看[此处](https://stackoverflow.com/a/5669301/302369)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-24T09:56:10.837

```
import pandas as pd
import numpy as np

df= data

bins = np.arange(0,0.1,0.001)
df.hist(bins=bins,color='grey') 
```

# javascript - javascript高亮文本字符串

> ID：12176386
> 
> 赞同：0
> 
> 时间：2012-08-29T10:58:06.390
> 
> 标签：javascript, jquery, highlighting

使用一个小插件来突出显示用户在我的应用程序中搜索的一些文本：

[Johann Burkard 文本突出显示](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)

我可以通过获取输入字段的值并将其作为变量传递给插件来使用它来突出显示单个文本字符串：

```
$(function() { 
    var hightLightme = $("input#searchterm").val();
    $('p').highlight(hightLightme);
}); 
```

这适用于“stackoverflow”之类的东西，但我的搜索字段能够搜索多个关键字，即 stackoverflow、web、dave，其中逗号充当“and 运算符”

就插件而言，它正在寻找'stackoverflow，web，dave'作为一个确切的字符串，我不知道如何编码，所以它将关键字分解并将它们作为要突出显示的单个关键字传递给插件?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:00:19.247

改用这个。

```
 $(function() { 

     var arrayOfKeyWords= $("input#searchterm").val().split(',');
    for (var i=0;i<arrayOfKeyWords.length;i++)
     {
          $('p').highlight(arrayOfKeyWords[i]);
        }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:01:40.477

您可以用逗号分隔关键字：

```
$(function() { 
    var query = $("input#searchterm").val(),
        keywords = query.split(','), // split keywords by comma
        targetEls = $('p');

    for(var i = 0, c = keywords.length; i < c; i++) {
        targetEls.highlight(keywords[i].trim());
    }
}); 
```

# iphone - 以色列用户的应用程序崩溃

> ID：12176387
> 
> 赞同：0
> 
> 时间：2012-08-29T10:58:06.430
> 
> 标签：iphone, objective-c, json, special-characters

`enter code here`我面临着过去 4 天以来的一个奇怪现象。我有一个应用程序，它是一种社交网络应用程序。用户可以在其中使用以下信息进行注册。

1.  名
2.  姓
3.  登录邮箱
4.  帕索
5.  当前位置（这是城市名称，使用 MKReverseGeocoder 获取的状态）

用户可以毫无问题地注册，但一旦他们登录应用程序就会崩溃。这只发生在**以色列**用户身上。我无法了解崩溃的问题。**对于其他国家/地区的用户，它运行良好，例如美国、印度等**。

任何人都可以对此有任何想法。

这是崩溃日志：

```
Incident Identifier: 03C1B44D-0630-4F1D-AC8F-C354D0BAA418
CrashReporter Key:   15804dd53bc675e7292476ab76de6b082c74f9a3
Hardware Model:      iPhone4,1
Process:         IWAZ [1031]
Path:            /var/mobile/Applications/08D509AF-9FD2-41D4-888E-A5D76DA11E86/IWAZ.app/IWAZ
Identifier:      IWAZ
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-12 17:38:56.372 +0300
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xe0000008
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x37cc7f78 0x37cc4000 + 16248
1   MapKit                          0x32a1f746 0x32a0c000 + 79686
2   CoreFoundation                  0x358851f4 0x3586d000 + 98804
3   Foundation                      0x35449740 0x353a5000 + 673600
4   CoreFoundation                  0x358faacc 0x3586d000 + 580300
5   CoreFoundation                  0x358fa298 0x3586d000 + 578200
6   CoreFoundation                  0x358f903e 0x3586d000 + 573502
7   CoreFoundation                  0x3587c49e 0x3586d000 + 62622
8   CoreFoundation                  0x3587c366 0x3586d000 + 62310
9   GraphicsServices                0x37518432 0x37514000 + 17458
10  UIKit                           0x33388cce 0x33357000 + 203982
11  IWAZ                            0x0000286c 0x1000 + 6252
12  IWAZ                            0x00002824 0x1000 + 6180

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x361cc3a8 0x361cb000 + 5032
1   libdispatch.dylib               0x347b6f04 0x347b3000 + 16132
2   libdispatch.dylib               0x347b6c22 0x347b3000 + 15394

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x361cc004 0x361cb000 + 4100
1   libsystem_kernel.dylib          0x361cc1fa 0x361cb000 + 4602
2   CoreFoundation                  0x358fa3ec 0x3586d000 + 578540
3   CoreFoundation                  0x358f9124 0x3586d000 + 573732
4   CoreFoundation                  0x3587c49e 0x3586d000 + 62622
5   CoreFoundation                  0x3587c366 0x3586d000 + 62310
6   WebCore                         0x3177bc9c 0x316d2000 + 695452
7   libsystem_c.dylib               0x32ce972e 0x32cdb000 + 59182
8   libsystem_c.dylib               0x32ce95e8 0x32cdb000 + 58856

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x361cc004 0x361cb000 + 4100
1   libsystem_kernel.dylib          0x361cc1fa 0x361cb000 + 4602
2   CoreFoundation                  0x358fa3ec 0x3586d000 + 578540
3   CoreFoundation                  0x358f9124 0x3586d000 + 573732
4   CoreFoundation                  0x3587c49e 0x3586d000 + 62622
5   CoreFoundation                  0x3587c366 0x3586d000 + 62310
6   Foundation                      0x353b5bb2 0x353a5000 + 68530
7   Foundation                      0x353b5a7a 0x353a5000 + 68218
8   Foundation                      0x3544958a 0x353a5000 + 673162
9   libsystem_c.dylib               0x32ce972e 0x32cdb000 + 59182
10  libsystem_c.dylib               0x32ce95e8 0x32cdb000 + 58856

Thread 4 name:  WebCore: CFNetwork Loader
Thread 4:
0   libsystem_kernel.dylib          0x361cc004 0x361cb000 + 4100
1   libsystem_kernel.dylib          0x361cc1fa 0x361cb000 + 4602
2   CoreFoundation                  0x358fa3ec 0x3586d000 + 578540
3   CoreFoundation                  0x358f9124 0x3586d000 + 573732
4   CoreFoundation                  0x3587c49e 0x3586d000 + 62622
5   CoreFoundation                  0x3587c366 0x3586d000 + 62310
6   WebCore                         0x317a50d2 0x316d2000 + 864466
7   libsystem_c.dylib               0x32ce972e 0x32cdb000 + 59182
8   libsystem_c.dylib               0x32ce95e8 0x32cdb000 + 58856

Thread 5 name:  com.apple.CFSocket.private
Thread 5:
0   libsystem_kernel.dylib          0x361dc570 0x361cb000 + 71024
1   CoreFoundation                  0x358fe63a 0x3586d000 + 595514
2   libsystem_c.dylib               0x32ce972e 0x32cdb000 + 59182
3   libsystem_c.dylib               0x32ce95e8 0x32cdb000 + 58856

Thread 6 name:  WebCore: LocalStorage
Thread 6:
0   libsystem_kernel.dylib          0x361dc068 0x361cb000 + 69736
1   libsystem_c.dylib               0x32ce9a46 0x32cdb000 + 59974
2   libsystem_c.dylib               0x32ce97c2 0x32cdb000 + 59330
3   JavaScriptCore                  0x3080d90e 0x30748000 + 809230
4   WebCore                         0x318dcbdc 0x316d2000 + 2141148
5   WebCore                         0x318dcb92 0x316d2000 + 2141074
6   libsystem_c.dylib               0x32ce972e 0x32cdb000 + 59182
7   libsystem_c.dylib               0x32ce95e8 0x32cdb000 + 58856 
```

提前说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:31:04.233

你实施了`reverseGeocoder:didFailWithError:`吗？它是否显示任何错误？也许有些地方没有解决，您面临未设置变量的问题。

# c# - C# lambda 有条件地获取不同的值列表

> ID：12176389
> 
> 赞同：2
> 
> 时间：2012-08-29T10:58:19.410
> 
> 标签：c#, linq, lambda

我有一个用户列表，如下所示：

```
List<User> users = new List<User>();

users.Add(new User(){ UserId = "11", City = "London" });
users.Add(new User(){ UserId = "12", City = "London" });
users.Add(new User(){ UserId = "12", City = "London" });
users.Add(new User(){ UserId = "11", City = "Newyork" });
users.Add(new User(){ UserId = "14", City = "Virginia" }); 
```

在这里，我想通过以下方式获得**具有不同 City**的不同 UserID`C# lambda expression`

因此，在上述情况下，我应该得到一个`List<string>`仅包含 UserId = 11 的项目，因为 UserId 相同，但两个项目的城市不同。

您能否让我知道如何通过 C# lambda 代码执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T11:05:12.537

就像是：

```
var result = users.GroupBy(u => u.UserId)
                  .Where(g => g.Select(u => u.City).Distinct().Count() > 1)
                  .Select(g => g.Key)
                  .ToList(); 
```

应该这样做。

它采用 {UserId,City} 对并转换成由 UserId 索引的那些对的组；然后查找该组中存在多个城市的情况。最后从组中获取结果的关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:06:01.897

```
from u in users group u.City by u.UserId into grp //group on the id
where grp.Distinct().Count() > 1 // we only want those with more than one distinct city
select grp.Key //we want the key 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:43:40.490

```
var list = users.GroupBy(Obj=>new {Obj.UserID,Obj.City}).Distinct(); 
```

# sql - 按条件过滤数据并在 MsAccess 中使用 SQL 显示描述的最佳方法？

> ID：12176393
> 
> 赞同：0
> 
> 时间：2012-08-29T10:58:33.793
> 
> 标签：sql, ms-access, filtering

我在 MS Access 中有一个包含调查结果的数据表，并且我有一个基于调查结果的风险 ID 和风险描述的查找表。

到目前为止，我尝试的是从我的调查表中选择不同的条目，并在我的风险代码查询中输入一个新字段，其数量取决于我确定的标准，然后我将使用它来查找风险。

我的调查表如下所示：

```
Name       | Location | Days spent eating IceCream | Icecream eating location
John Smith | London   | 30                         | Hull 
```

我的风险 ID 表如下所示：

```
RiskID | RiskBool | Description 
1      | Yes      | At risk -  This person eats too much icecream
2      | Yes      | Risk - This person does not eat enough icecream
3      | No       | Sensible amount of icecream eaten
4      | Yes      | It is illegal to eat icecream in Hull 
```

我的查询在访问设计视图中看起来像这样

```
Name       | Location | Risk Code | RiskID | Description 
```

我*想编写 SQL*将风险代码更改为 1、2、3、4（在我的实际案例中最多为**15**），然后我会告诉它只显示风险 ID 和代码匹配时的人员和描述。**我还没有写这个。**

### 实现这一目标的最佳方法是什么？

我看到两种可能性：

1.  为每个风险 ID设置**15 个**查询，将描述添加到这些查询中，然后将这 15 组结果连接在一起。这是我知道该怎么做，但最终可能会很混乱。
2.  使用语句设置一些“检查” `if`，然后设置该条目的风险代码字段。

我当前的 SQL 看起来像这样，但它还没有进行任何检查，我担心 if 语句会*非常非常*长。

```
SELECT DISTINCT 
[At Risk Employee List].Employee AS Name, 
[At Risk Employee List].[DaysIceCream] AS [Days spent eating Icecream], 
[At Risk Employee List].[Base Location],

     [RiskCode] AS [Risk Code], <----is this  where the check would need to go?

RiskDescLookup.RiskBoolean, 
RiskDescLookup.RiskExplanation
FROM RiskDescLookup, 
[Survey Raw Data] 
INNER JOIN 
[At Risk Employee List]
 ON 
[Survey Raw Data].ResID = [At Risk Employee List].[Staff ID]
GROUP BY 
[At Risk Employee List].Employee, 
[At Risk Employee List].[DaysIceCream],
[At Risk Employee List].[Base Location],
RiskDescLookup.RiskID,

     [RiskCode] AS [Risk Code],  <----is this  where the check would need to go?

RiskDescLookup.RiskBoolean, 
RiskDescLookup.RiskExplanation 
```

我想象语句所做的检查`if`很长，看起来像（在伪代码中）：

```
if ( [At Risk Employee List].[Base Location] = Hull, then [RiskCode]=4...., else if (DaysIceCream>42) then.... 
```

这是最好的方法吗？我什至需要有风险代码吗？

对于如何以最佳方式生成此“检查”，我有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:23:06.800

我不完全确定您的意图，但从您发布的内容和后续评论来看，一旦您为每个调查结果确定了风险代码，将风险代码加入风险 ID 的过程似乎相对简单。

真正的问题似乎是如何封装逻辑以识别每个调查结果的风险代码。我建议在您的查询外部“计算”每个调查结果的风险代码值，然后在最终加入风险 ID 之前加入这些结果。

例如，我可能会在`SurveyRisk`包含`Name`和的设计中添加第三个表`Risk Code`。

使用您需要使用的任何标准和逻辑来识别每个调查响应的风险。将这些值输入到`SurveyRisk`表中。然后，您可以简单地加入`Survey`to`SurveyRisk`来`Risk`总结您的结果。

随时澄清我在哪里误解了你想要完成的事情，我会相应地编辑我的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:56:47.890

最好的方法是使用模拟数据结构的查找表。

为每个“案例”添加一行，并在 MS Access 中将相应的字段链接在一起。

![在此处输入图像描述](../Images/93a1fb255392912f5e3dbbdcd555f114.png)

以下是一些链接：

![在此处输入图像描述](../Images/b0576e7fc4ed98050c69ff1b0ec8066b.png)

然后更改 SQL 以配对需要一起使用的任何选项。例如，我所做的每项检查都针对两个单独的位置重复。

这是一个例子：

```
FROM RiskDescLookupReg
 INNER JOIN ([Survey Raw Data]
 INNER JOIN [At Risk Employee List]
 ON [Survey Raw Data].ResID=[At Risk Employee List].[Staff ID])
 ON (RiskDescLookupReg.RegTravelChoice=[Survey Raw Data].RegTravelChoice)

 And (RiskDescLookupReg.MonthChoice2=[Survey Raw Data].MonthChoice2
 And RiskDescLookupReg.PercentageTimeChoice2=[Survey Raw Data].PercentageTimeChoice2
 And RiskDescLookupReg.LimitedDurationChoice2=[Survey Raw Data].LimitedDurationChoice2
 And RiskDescLookupReg.TemporaryPurposeChoice2=[Survey Raw Data].TemporaryPurposeChoice2)

 Or (
RiskDescLookupReg.MonthChoice1=[Survey Raw Data].MonthChoice1
 And RiskDescLookupReg.PercentageTimeChoice1=[Survey Raw Data].PercentageTimeChoice1
 And RiskDescLookupReg.LimitedDurationChoice1=[Survey Raw Data].LimitedDurationChoice1
 And RiskDescLookupReg.TemporaryPurposeChoice1=[Survey Raw Data].TemporaryPurposeChoice1) 
```

不是每个位置都有两个块。如果我只有一个感兴趣的位置，我可以放弃最后一个街区。

如果由于查找表的排列方式而出现重复，则需要指定查找表中的部分包含在 a`LAST`中，而调查中的部分则包含在 中`FIRST`。这是一个例子：

```
SELECT 
[At Risk Employee List].Number,
 FIRST([At Risk Employee List].Employee) AS Name, 
FIRST([At Risk Employee List].[Base Location]) AS BaseLocation, 
LAST(RiskDescLookupReg.RiskBool) AS RiskBool, 
LAST(RiskDescLookupReg.RiskDesc) AS RiskDesc, 
```

的使用`LAST`确保如果有人出现风险而不是风险，则仅`LAST`显示有风险的案例（这些条目稍后出现在该字段中）。这与显示重复项时风险优先出现的事实相反。

# java - Liferay + Vaadin 的 Selenium gui 测试

> ID：12176400
> 
> 赞同：3
> 
> 时间：2012-08-29T10:59:02.317
> 
> 标签：java, testing, selenium, liferay, vaadin

我们尝试通过 Selenium 测试 Liferay 6.0.6 的 portlet。我们几乎没有 liferay mvc portlet 和 vaadin portlet。在第一种方法中，我们创建执行以下步骤的测试：

1.  使用基本结构和 portlet 放置恢复数据库转储
2.  删除“数据”文件夹并将初始数据复制到其中
3.  从“webapps”文件夹中删除适当的 portlet 文件夹
4.  将我们的 portlet (*.war) 复制到“deploy”文件夹
5.  启动liferay
6.  等待 Portlet 已安装
7.  转到控制面板 -> 服务器管理，然后单击“清除此 VM 缓存的内容”、“清除数据库缓存”、“重新索引所有搜索索引”。

在我们开始 selenium 测试之后（测试 portlet 行为、通过 vaadin portlet 上传文件、通过 vaadin portlet 批准工作流（kaleo）任务等）。并且测试在不同的地方失败：

1.  有时在通过我们的 portlet 上传文件时会发生 DuplicateFileException（但在文档管理器中没有文件）
2.  有时 Selenium 在页面上找不到元素
3.  有时 kaleo 工作流程无法无误地批准所有文件

我们在 VM 上的 Jenkins 节点上开始测试时会出现更不稳定的行为。

你如何测试你的portlet？有没有办法稳定测试行为？什么是最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T19:55:31.667

> 有时在通过我们的 portlet 上传文件时会发生 DuplicateFileException（但在文档管理器中没有文件）

查看完整的堆栈跟踪将非常有用

> 有时 Selenium 无法在页面上找到元素。

我看到 2 个可能的原因/解决方案：

1.  如果 portlet 使用 ajax 加载内容，那么您的测试应该等到内容加载完毕，尝试：

    `waitForElementPresent(locator)`

2.  如果您不使用 Vaadin TestBench，请确保为 vaadin 元素设置 debugId：

    `setDebugID("aButton");`

> 你如何测试你的portlet？

我们使用了 selenium 和 cucumber，参见：[https ://projects.savoirfairelinux.com/projects/ctr-liferay/wiki/Portal_-_Testing](https://projects.savoirfairelinux.com/projects/ctr-liferay/wiki/Portal_-_Testing)

# javascript - Javascript将字符串变量作为数组访问

> ID：12176409
> 
> 赞同：0
> 
> 时间：2012-08-29T10:59:24.527
> 
> 标签：javascript, arrays, string

我刚刚在 Chrome 开发者工具中尝试了这段代码：

```
var str = "1111111";
str[0] = 2;
2
console.log(str[0]);
1 
```

如您所见，输出为 1，我预期为 2。我的结论是这并不意味着要那样工作，所以我问我如何让它工作 - 我将如何更改第一个“项目”变量`str`为 2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:03:06.657

那是因为在 JavaScript 中字符串是不可变的对象。你应该使用`substr`功能：

```
String.prototype.replaceAt = function (index, char) {
  return this.substr(0, index) + char + this.substr(index + char.length);
};

var str = '11111';
console.log(str.replaceAt(0, '2')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:03:09.403

来自[犀牛书](http://oreilly.com/catalog/9780596000486/)：

> 在 JavaScript 中，字符串是不可变的对象，这意味着其中的字符可能不会被更改，并且对字符串的任何操作实际上都会创建新的字符串。字符串是按引用分配的，而不是按值分配的。一般来说，当一个对象通过引用分配时，通过一个引用对该对象所做的更改将通过对该对象的所有其他引用可见。但是，由于字符串无法更改，因此您可以对字符串对象进行多次引用，而不必担心字符串值会在您不知情的情况下发生更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:05:00.030

试试这个

```
str.replace(str.charAt(0), "2") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:05:38.637

您需要先拆分字符串。

所以像：

```
str = str.split(''); 
```

然后你可以把它当作一个数组。

# javascript - ExtJS 4.0.7 加载完整的 TreePanel

> ID：12176410
> 
> 赞同：4
> 
> 时间：2012-08-29T10:59:26.740
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我在使用 ExtJS 4.0.7 TreePanel 时遇到了麻烦。我想从 JSON 请求中加载完整的树。该请求返回以下内容：

```
{
  "data": {
    "children": [
      {
        "text": "OS",
        "leaf": false,
        "children": [
          {
            "text": "Hostname",
            "leaf": false,
            "children": [
              {
                "text": "hostname.int.com",
                "leaf": true,
                "children": []
              }
            ]
          }
        ]
      }
    ]
  }
} 
```

它不适用于以下商店配置（或我尝试过的任何其他配置）

```
Ext.define('My.store.SysInfo', {
extend: 'Ext.data.TreeStore',
    model: 'My.model.SysInfo',

    proxy : {
        type : 'ajax',
        url : '/sysinfo/getSysInfo.php',
        reader : {
            root : 'data'
        }
    }
}); 
```

该模型具有以下代码：

```
Ext.define('My.model.SysInfo', {
    extend: 'Ext.data.Model',
    fields: ['text']
}); 
```

使用此配置添加树形面板时，它不起作用：

```
{
    xtype: 'treepanel',
    name : 'sysinfo',
    height: '100%',
    store: 'My.store.SysInfo',
    lines: true,
    autoScroll : true,
    expanded : true,
    rootVisible: false,
    folderSort: true,
    multiSelect: false,
    useArrows: true,
} 
```

通过打开一个节点，ExtJS 总是通过 ajax 请求将整个树从它的根节点加载到子节点中，而不是显示预加载的数据。我怎样才能通过打开“OS”来加载“主机名”节点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:34:30.573

你绝对可以做到这一点。但是您的json似乎有问题。

您的 json 的根是`data`，但为了正确加载嵌套数据，您的根和所有子属性需要相同。由于您已将阅读器的根定义为`data`，因此您应该将`children`json 中的所有内容替换为`data`.

请看[这个问题](https://stackoverflow.com/questions/12040130/)，如果你想更深入地了解这一切，也请看[这个问题](https://stackoverflow.com/questions/12092123/loading-treestore-with-json-that-has-different-children-fields/12092938#12092938)。你也可以看看这个[工作的 JsFiddle](http://jsfiddle.net/Izhaki/3hmfQ/)。

如果你这样定义你的读者：

```
 reader : {
        type: 'json',
        // root : 'children' // no real need for this a children is the default.
    } 
```

此 json 应正确加载：

```
{
  "children":[
     {
        "text":"OS",
        "leaf":false,
        "children":[
           {
              "text":"Hostname",
              "leaf":false,
              "children":[
                 {
                    "text":"hostname.int.com",
                    "leaf":true,
                    "children":[

                    ]
                 }
              ]
           }
        ]
     }
  ]
} 
```

# java - 3 x “令牌上的语法错误” - 基本 Java 声明

> ID：12176416
> 
> 赞同：0
> 
> 时间：2012-08-29T10:59:52.007
> 
> 标签：java, rest

我正在开发一个 Java RESTful Web 服务，出于某种奇怪的原因，我得到了 3 个我完全不确定的 Java 标记。

这是我的代码：

```
package au.com.rest; //self made package
import javax.ws.rs.*; //JaxRS
import javax.ws.rs.core.*;
import au.edu.uts.it.wsd.*; //Package containing the relevant classes

@Path("/feedlist")
public class RESTFeedService {

String name, uri, action, feedFile;
String textReply = "Feed ";
String xmlReply = "<?xml version=\"1.0\"?> \n<feeds> \n";

feedFile = "/tmp/feeds.txt";
action = request.getParameter("action");
name = request.getParameter("feedName");
uri = request.getParameter("uri");

Feed feed = new Feed(name, uri);
FeedList feedList = new FeedListImpl();

feedList.load(feedFile);

@GET
@Produces(MediaType.TEXT_PLAIN)
public String showTextFeeds()
{
    for (Feed f:feedList.list()){
        textReply += "[Feed Name: " + f.getName() + ", ";
        textReply += "[Feed URI: " + f.getURI() + "]"; }
    return textReply;
} 
```

我得到的错误在以下几行：

```
String xmlReply = "<?xml version=\"1.0\"?> \n<feeds> \n"; 
```

**令牌“;”上的语法错误，{ 应在此令牌之后**

```
feedFile = "/tmp/feeds.txt"; 
```

**标记“字符串”的语法错误，@ 预期**

```
public String showTextFeeds() 
```

**令牌上的语法错误，错误的构造**

请指出我做错了什么的正确方向。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:03:23.217

```
String name, uri, action, feedFile;

feedFile = "/tmp/feeds.txt";
action = request.getParameter("action");
name = request.getParameter("feedName");
uri = request.getParameter("uri"); 
```

应该

```
String name = request.getParameter("feedName");
String uri = request.getParameter("uri");
String feedFile  = "/tmp/feeds.txt";
String action = request.getParameter("action"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:04:29.987

你有代码，你只能有字段。您可以将它们移至构造函数。

```
public RESTFeedService(Request request) {
    feedFile = "/tmp/feeds.txt";
    action = request.getParameter("action");
    name = request.getParameter("feedName");
    uri = request.getParameter("uri");

    feed = new Feed(name, uri);
    feedList = new FeedListImpl();

    feedList.load(feedFile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:05:17.083

您不能在类级别上放置任意语句。像赋值这样的语句`feedList.load(feedFile);`必须在方法中，而不是在类级别，在方法之外。

# email - MailServiceUtil.sendEmail() 和 MailEngine.send() 之间的区别

> ID：12176417
> 
> 赞同：3
> 
> 时间：2012-08-29T10:59:55.893
> 
> 标签：email, service, liferay

推荐使用这些方法中的哪一种？

这些方法中的任何一种都过时了吗？

两者都使用门户中设置的内部身份验证属性吗？

我阅读了这两种方法的源代码，而 MailEngine 是典型传输、发送功能等的高级抽象；MailLocalService 将 beanLocator 用于外部服务。

那是哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:32:06.703

`MailEngine`在`util-java.jar`, 在 Liferay's`WEB-INF/lib`中，所以你不能从你的插件中访问它（除了`ext-plugin`）。出于这个原因，将其视为没有保证或暗示稳定性的实现细节。

`MailServiceUtil`是API服务前端类。这是 API 的一部分，您可以合理地期望它非常稳定。你也可以从你的插件中使用它。

# c# - 从 kinect 传感器记录 RGB 流

> ID：12176420
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:59:59.617
> 
> 标签：c#, kinect, aforge

我正在做一个 WPF 应用程序，其中一个功能是从 Kinect 传感器（使用 Aforge 和 SDK 1.5）录制视频（仅 RGB 流）。

在我的应用程序中，我有一个按钮，单击该按钮时，它应该将视频流保存到 avi 文件中。

我添加了引用并将所有 .dll 文件复制到我的项目文件夹中（如其他论坛中所述），但由于某种原因我收到此错误：

```
{"Mixed mode assembly is built against version 'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information.":null} 
```

所以里面`private void button4_Click(object sender, RoutedEventArgs e)`是下面的代码：

```
 int width = 640;
        int height = 480;
        // create instance of video writer
        VideoFileWriter writer = new VideoFileWriter();

        // create new video file
        writer.Open("test.avi", width, height, 25, VideoCodec.MPEG4);

        // create a bitmap to save into the video file
        Bitmap image = new Bitmap (width, height, DrawingColor.PixelFormat.Format24bppRgb);

        for (int i = 0; i < 1000; i++)
        {
            image.SetPixel(i % width, i % height, Color.Red);
            writer.WriteVideoFrame(image);
        }
        writer.Close();
        } 
```

我将非常感谢您的帮助，并且我对记录 RGB 流的方式也很灵活（如果您推荐另一种方式），只要它不复杂，因为我是 C# 新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:59:25.653

视频为红色的原因是因为您将其变为红色

```
 for (int i = 0; i < 1000; i++)
    {
        image.SetPixel(i % width, i % height, Color.Red);
        writer.WriteVideoFrame(image);
    } 
```

您应该做的是转换[`BitmapSource`](https://stackoverflow.com/questions/2284353/is-there-a-good-way-to-convert-between-bitmapsource-and-bitmap)/ `WritableBitmap`* （假设您使用`BitmapSource`或显示 Kinect 的数据`WritableBitmap`然后您可以将该位图添加到您的视频帧。希望这会有所帮助！

**如果您使用的是 a `WritableBitmap`，[请将其转换为 a`BitmapImage`](https://stackoverflow.com/questions/3986638/how-can-i-convert-writeablebitmap-to-bitmapimage)，然后[将其转换为`Bitmap`](https://stackoverflow.com/questions/6484357/converting-bitmapimage-to-bitmap-and-vice-versa)*

# windows - VNC：将 Qt KeyEvent 转换为可用的 X11/RFB 键符

> ID：12176424
> 
> 赞同：0
> 
> 时间：2012-08-29T11:00:18.757
> 
> 标签：windows, qt, vnc, qkeyevent

背景：我目前正在创建一个嵌入在 QWidget 中以在 Windows 上使用的简单 VNC 查看器。为此，我编译了仅 Qt 的 VNC 版本的[KRDC](http://websvn.kde.org/trunk/KDE/kdenetwork/krdc/vnc/)（KDE 的远程桌面查看器）以及它在 windows 上的依赖项 libvncclient。然而，现在出现的问题在于 krdc 通过 vnc 发送键事件的方式：它只是发送 QKeyEvent::nativeVirtualKey() 的值，在 X11 上它已经很方便地是一个有效的 RFB 键符。然而，在 Windows 上，情况并非如此。

现在，为了解决这个问题，我认为最好的（最终也是可移植的）方法是将 Qt 的 QKeyEvent::key() 和 ::modifier() 数据转换回有效的 X11/RFB 键符。尽管考虑到我需要根据修饰符状态（XK_a 与 XK_A，到目前为止我只考虑过 shift）来选择不同的键符，这似乎有些复杂。研究如何在 Qt 的源代码中完成 X11 -> Qt 翻译也没有真正的帮助。

可能已经有一个库或代码片段可以完成这个吗？还是我应该尝试编写自己的（不完整的）翻译程序？如果是这样，解决此问题的最佳方法是什么，还有其他与 X11 相关的警告我应该注意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:28:42.570

好吧，看来我实际上是个盲人；krdc 的代码中有一个引用，就在 e->nativeVirtualKey() 语句的正下方，引用了另一个项目的[类](http://italc.sourcearchive.com/documentation/1.0.9.1/vncview_8cpp-source.html)，他们遇到了与我完全相同的问题：

```
// hmm, either Win32-platform or too old Qt so we have to handle and
// translate Qt-key-codes to X-keycodes 
```

我没有测试他们的解决方案，但它看起来很可靠。正如我现在才发现的那样，我自己已经编写了一个小例程，它应该适用于大多数拉丁键盘（但如果 Qt 团队更改任何 Qt::Key 值可能会中断），如果有人对此感兴趣的话：[关联](http://pastebin.com/ZBYRPUb2)

# android - Android中的日期格式错误

> ID：12176429
> 
> 赞同：2
> 
> 时间：2012-08-29T11:00:32.750
> 
> 标签：android, android-framework

我正在使用`DateFormat.format("EEEE d MMMM", new Date())`，对于阿拉伯语，它显示为：الثلاثاء 29 ٥

谁能告诉我如何在特定的语言环境（已设置）数字中获得 29，或者至少如何忽略当前的语言环境设置并仅针对所有语言环境以英语显示日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:33:08.340

无论语言环境是什么，我终于设法以所需格式获取日期，代码如下：

```
SimpleDateFormat sf = new SimpleDateFormat("EEEE dd MMMM",new Locale("en"));
textViewID.setText(sf.format(new Date()).toString()); 
```

这将显示日期为

> **8月29日星期三**

不要忘记添加

`import java.text.SimpleDateFormat;`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T11:15:48.743

检查您`Locale`的 Android 是否支持或不执行以下代码。

```
 for (Locale locale:Locale.getAvailableLocales()) {
        Log.d(locale.getDisplayCountry(),locale.toString()); 
    } 
```

# php - PHP 表单输出

> ID：12176431
> 
> 赞同：0
> 
> 时间：2012-08-29T11:00:53.583
> 
> 标签：php, html

我正在根据从控制器传回的数据生成此表，我遇到的问题是通常返回的第一条记录[在本例中为 Sephen C. Cox]，“添加员工”按钮不会重定向我，而是它工作的其余记录。有谁知道这个问题？

![在此处输入图像描述](../Images/cabdc5ad7840150f43a8bf5ec39a6e72.png)

```
<fieldset id= "results">                
<?php if (isset($results ) And count($results)) : ?>
<table id="box-table-a" summary="Employee Sheet">
        <thead>
            <tr>
                <th scope="col">Employee</th>
                <th scope="col">Salary</th>
                <th scope="col">Bonus</th>
                <th scope="col">Supervisor</th>
                <th scope="col">Action</th>
                </tr>

    <?php foreach ($results as $result) : ?>
    <tr>
    //Primary key <?php echo $result['Employee_ID!'];?>
    <td><span class="Employee_name"><?php echo $result['Employee']; ?> </span></td>         
    <td><span class="Salary"><?php echo $result['Salary']; ?> </span> </td>
    <td><span class="Bonus"><?php echo $result['Bonus']; ?> </span> </td>
    <td><span class="Supervisor_name"><?php echo $result['Supervisor']; ?> </span></td>
    <form action="welcome.php" method="post">   <td><input type="submit" value="Add employee" name="submit[<?php echo $result['Employee_ID'] ?>]" > </td></form>
    </tr>

        <?php endforeach; ?>
        <?php endif; ?>
        </thead>
        <tbody>
        </fieldset> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:07:49.430

```
<form action="welcome.php" method="post">
  <td>
     <input type="submit" value="Add employee"
     name="submit[<?php echo $result['Employee_ID'] ?>]" > 
 </td></form> 
```

改成

```
<td>
 <form action="welcome.php" method="post">
     <input type="submit" value="Add employee"
     name="submit[<?php echo $result['Employee_ID'] ?>]" >
  </form> 
```

或者甚至将整个表格包装成一个表格，而不是将新表格放入每一行。在您的代码中看不到任何需要这样做的理由

**编辑：** 另外，在 IE 中查看 Firebug (FF)、Chrome 和 Safary 中的 Inspector、开发者工具或它的调用方式等工具。使用其中一种工具打开您的页面并注意到浏览器解析您的代码的方式与您预期的不同，这已经足够了。

# python - 如何在类中声明“列表”的成员？

> ID：12176441
> 
> 赞同：0
> 
> 时间：2012-08-29T11:01:14.417
> 
> 标签：python

我是 python 新手，这让我很困惑。

我想写类似的东西

```
class line :
    points = []

    def add(self, point) :
        self.points.append(point)

line1 = line()
line2 = line()
line1.add("Some point")
print line2.points 
```

输出：`['Some point']`

结果就像它们引用了同一个列表。
但我确实想要一个对象成员而不是类成员。

我试过了，如果 points 是 int 或其他一些简单的类型，它可以正常工作。

此外，我知道如果我写

```
def __init__(self) :
    self.points = [] 
```

它也可以工作，但我不明白为什么他们默认指向同一个列表。

附言。我知道写一个 init 会起作用。

```
class line :
    name = "abc"

    def changename(self, name) :
        self.name = name

line1 = line()
line2 = line()
line1.changename(123)
print line2.name 
```

但是上面的代码输出`"abc"`

所以我不明白为什么同一种声明因类型而异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:04:19.597

第一种语法：

```
class line :
    points = [] 
```

创建`points`一个**类**属性。因此，它将在类的所有实例之间共享。

要确保属性属于某个类，您应该执行以下操作：

```
class line(object) :
    def __init__(self):
        self.points = [] 
```

即，仅在`__init__`创建新实例时创建属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:04:23.040

因为在这种情况下

```
class line :
    points = [] 
```

`points`是*班级*成员。它属于该类，并且由于`line1`和`line2`属于同一*类*，`points`因此是同一个列表。

所以你是对的

```
def __init__(self) :
    self.points = [] 
```

而是创建一个绑定到实例而不是类的*实例成员。*

**回答您的编辑**

如果你写：

```
def changename(self, name) :
    self.name = name 
```

你覆盖你的类成员并使用*创建一个新的实例成员*`self.name = name`。

回到你的第一个例子，就像写：

```
def add(self, point) :
    self.points = self.points + [point] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T11:20:20.460

正如其他人已经解释的那样，并且您显然已经理解，以下创建了一个由每个实例共享的**类**属性：

```
class line:
    points = [] 
```

当您在代码中**引用**此属性时，Python 会尝试在当前范围内查找它，然后跟随封闭范围。所以如果你打电话`self.points.append()`，你确实在改变`points` **类**属性。

当您在代码中**分配**到`self.points`时，您正在定义一个*新的* `points` **实例**属性。因此，在您的第二个示例中，当`points`是一个字符串时，该`changename`函数在调用时实际上会创建一个新的实例属性。

您可以尝试以下方法：

```
print line.name  # prints the class attribute
print line1.name # prints the class attribute
print line2.name # prints the instance attribute 
```

您会注意到调用`changename`确实创建了一个新的实例属性，而类属性保持不变。正如`changename`从未调用过的那样`line1`，对其的引用`name`将解析为`line`类属性。

# mysql - 简单的选择过程

> ID：12176442
> 
> 赞同：0
> 
> 时间：2012-08-29T11:01:20.060
> 
> 标签：mysql, sql

我在 MySQL 中有这个过程

```
DROP PROCEDURE IF EXISTS `AddNotificationOnPosts`;

DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `AddNotificationOnPosts`(from_user INT(11),on_post_id INT(11),in_group_id INT(11))
BEGIN
    DECLARE num_rows INT DEFAULT 0;

    SELECT count(notification_id) FROM notifications_posts 
    WHERE from_user = 1;

END $$
DELIMITER ; 
```

还有这张桌子

```
notification_id from_user   on_post_id  in_group_id date
2   1   162 3   2012-07-11 12:01:08
3   19  163 1   2012-07-11 12:03:26
4   19  164 1   2012-08-10 17:42:36
5   1   165 3   2012-08-29 12:14:01
6   1   165 3   2012-08-29 12:14:29 
```

当我执行：

```
SET @p0 =  '1';
SET @p1 =  '2';
SET @p2 =  '3';
CALL `AddNotificationOnPosts` ( @p0 , @p1 , @p2 ); 
```

它给了我：

```
count(notification_id)
5 
```

为什么？因为它们只是 user_id 1 的 3 条记录

还有我如何使这个程序：

1.  未设置值时给出错误或警告

2.  从过程中获取变量，例如

    ```
    SELECT count(notification_id) FROM notifications_posts 
    WHERE from_user = @from_user; 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:04:37.357

您应该为参数使用不同的名称：

```
CREATE PROCEDURE AddNotificationOnPosts
(arg_from_user INT(11),arg_on_post_id INT(11),arg_in_group_id INT(11))
BEGIN
    DECLARE num_rows INT DEFAULT 0;

    IF(arg_from_user  IS NULL OR arg_from_user = '')
    THEN 
        SELECT "Error:Invalid argument for userID" AS error_code;
    ELSE
        SELECT count(notification_id) 
        INTO num_rows
        FROM notifications_posts 
        WHERE from_user = arg_from_user;
    END IF;

    SELECT num_rows;
END $$ 
```

# linux - dbx : 显示非常大的字符串

> ID：12176460
> 
> 赞同：0
> 
> 时间：2012-08-29T11:02:42.403
> 
> 标签：linux, linux-kernel, solaris, dbx

我想知道如何在“dbx”中显示一个非常大的字符串（> 4K）？我的字符串超过 2MB ？可以在 solaris 中传递的参数大小是否有任何限制？

谢谢阿皮特

# java - 组件运行时绘图

> ID：12176462
> 
> 赞同：2
> 
> 时间：2012-08-29T11:02:47.117
> 
> 标签：java, swing, paint, jcomponent

所以，我的程序中有一个 keyListener。一旦它被激活，它就会在屏幕上绘制另一个组件。

发生的情况是最新的组件被绘制在屏幕上一个不应该或大小不正确的地方（只是一瞬间），然后捕捉到它的指定位置和大小，一切看起来都很棒。

有没有办法指示我的程序在将组件绘制到屏幕上之前计算组件的位置和大小以避免闪烁？

```
package core;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.InputEvent;
import java.awt.event.KeyListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.sql.Array;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Properties;
import java.util.ResourceBundle;

import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.KeyStroke;
import javax.swing.border.Border;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

@SuppressWarnings("serial")
class DefaultFont extends Font
{
    public DefaultFont()
    {
        super("Arial", PLAIN, 20);
    }
}

@SuppressWarnings("serial")
class Page extends JPanel
{
    public JPanel largePage;
    public int content;

    public Page(JPanel panel, int index)
    {
        largePage = new JPanel();
        largePage.setLayout(new BoxLayout(largePage, BoxLayout.Y_AXIS));
        largePage.setMaximumSize(new Dimension(794, 1123));
        largePage.setPreferredSize(new Dimension(794, 1123));
        largePage.setAlignmentX(Component.CENTER_ALIGNMENT);
        largePage.setBackground(Color.WHITE);
        largePage.add(new Box.Filler(new Dimension(0, 96), new Dimension(0, 96), new Dimension(0, 96)));

        setMaximumSize(new Dimension(556, 931));
        setBackground(Color.LIGHT_GRAY);
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        add(new Box.Filler(new Dimension(556, 0), new Dimension(556, 931), new Dimension(556, 931)));

        largePage.add(this);
        largePage.add(new Box.Filler(new Dimension(0, 96), new Dimension(0, 96), new Dimension(0, 96)));

        panel.add(largePage, index);
        panel.add(new Box.Filler(new Dimension(0, 40), new Dimension(0, 40), new Dimension(0, 40)));

        content = 0;

        Main.pages.add(this);
    }
}

@SuppressWarnings("serial")
class Heading extends JTextArea
{
    public boolean type;
    public AbstractDocument doc;
    public ArrayList<JPanel/*Question*/> questions;
    public ArrayList<JPanel/*List*/> list;  

    public Heading(boolean segment, Page page)
    {
        type = segment;

        setBackground(Color.RED);
        setFont(new Font("Arial", Font.BOLD, 20));

        Border in = BorderFactory.createDashedBorder(Color.BLACK);
        Border out = BorderFactory.createMatteBorder(0, 0, 10, 0, Color.WHITE);

        setBorder(BorderFactory.createCompoundBorder(out, in));
        setLineWrap(true);
        setWrapStyleWord(true);

        setText("Heading 1 Heading 1 Heading 1 Heading 1");

        doc = (AbstractDocument)this.getDocument();
        doc.setDocumentFilter(new DocumentFilter()
        {
            public void insertString(FilterBypass fb, int offs,String str, AttributeSet a) throws BadLocationException 
            {
                if ((fb.getDocument().getLength() + str.length()) <= 100)
                {
                    ;
                    fb.insertString(offs, str.replaceAll("\n", " "), a);
                }
                else
                {
                    int spaceLeft = 100 - fb.getDocument().getLength();
                    if (spaceLeft <= 0)
                        return;

                    fb.insertString(offs, str.substring(0,spaceLeft).replaceAll("\n", " "), a);
                }
            }

            public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a) throws BadLocationException 
            {
                if (str.equals("\n"))
                { 
                    str = "";
                }
                if ((fb.getDocument().getLength() + str.length() - length) <= 100)
                {
                    fb.replace(offs, length, str.replaceAll("\n", " "), a);
                }
                else
                {
                    int spaceLeft = 100 - fb.getDocument().getLength() + length;
                    if (spaceLeft <= 0)
                        return;

                    fb.replace(offs, length, str.substring(0,spaceLeft).replaceAll("\n", " "), a);
                }
            }
        });

        page.add(this, 0);
        page.content++;

        if (type)
        {
            questions = new ArrayList<JPanel>();
        }
        else
        {
            list = new ArrayList<JPanel>();
        }
    }
}

@SuppressWarnings("serial")
class Question extends JPanel
{
    public JPanel questionArea, numberArea, answerArea;
    public JLabel number;
    public JTextArea question;
    public AbstractDocument doc;

    public Question(Page page, int pageNum, int index)
    {
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        setBorder(BorderFactory.createMatteBorder(0, 0, 5, 0, Color.WHITE));

        questionArea = new JPanel();
        questionArea.setLayout(new BoxLayout(questionArea, BoxLayout.X_AXIS));
        questionArea.setBorder(BorderFactory.createMatteBorder(0, 0, 8, 0, Color.WHITE));

        numberArea = new JPanel();
        numberArea.setLayout(new BorderLayout());
        numberArea.setBackground(Color.WHITE);

        number = new JLabel(pageNum+".  ", JLabel.RIGHT);
        number.setMinimumSize(new Dimension(100, 20));
        number.setPreferredSize(new Dimension(100, 20));
        number.setMaximumSize(new Dimension(100, 20));
        number.setFont(new Font("Arial", Font.PLAIN, 17));

        numberArea.add(number, BorderLayout.NORTH);

        questionArea.add(numberArea);

        question = new JTextArea();
        question.setFont(new Font("Arial", Font.PLAIN, 17));
        question.setBorder(BorderFactory.createDashedBorder(Color.BLACK));
        question.setLineWrap(true);
        question.setWrapStyleWord(true);
        question.setBackground(Color.GREEN);

        question.setText("Is this the first question?");

        doc = (AbstractDocument)question.getDocument();
        doc.setDocumentFilter(new DocumentFilter()
        {
            public void insertString(FilterBypass fb, int offs,String str, AttributeSet a) throws BadLocationException 
            {
                if ((fb.getDocument().getLength() + str.length()) <= 200)
                {
                    ;
                    fb.insertString(offs, str.replaceAll("\n", " "), a);
                }
                else
                {
                    int spaceLeft = 200 - fb.getDocument().getLength();
                    if (spaceLeft <= 0)
                        return;

                    fb.insertString(offs, str.substring(0,spaceLeft).replaceAll("\n", " "), a);
                }
            }

            public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a) throws BadLocationException 
            {
                if (str.equals("\n"))
                { 
                    str = "";
                }
                if ((fb.getDocument().getLength() + str.length() - length) <= 200)
                {
                    fb.replace(offs, length, str.replaceAll("\n", " "), a);
                }
                else
                {
                    int spaceLeft = 200 - fb.getDocument().getLength() + length;
                    if (spaceLeft <= 0)
                        return;

                    fb.replace(offs, length, str.substring(0,spaceLeft).replaceAll("\n", " "), a);
                }
            }
        });

        questionArea.add(question);

        add(questionArea);

        answerArea = new JPanel();
        answerArea.setLayout(new BoxLayout(answerArea, BoxLayout.Y_AXIS));

        add(answerArea);

        page.add(this, index);
        page.content++;
    }
}

@SuppressWarnings("serial")
class Answer extends JPanel
{
    public JPanel letterArea;
    public JLabel letter;
    public JTextArea answer;
    public char[] letters = {'a', 'b', 'c', 'd', 'e' };
    public AbstractDocument doc;

    public Answer(Question q, int index)
    {
        setLayout(new BoxLayout(this, BoxLayout.X_AXIS));

        letterArea = new JPanel();
        letterArea.setLayout(new BorderLayout());
        letterArea.setBackground(Color.WHITE);

        letter = new JLabel(letters[index-1]+")  ", JLabel.RIGHT);
        letter.setMinimumSize(new Dimension(150, 20));
        letter.setPreferredSize(new Dimension(150, 20));
        letter.setMaximumSize(new Dimension(150, 20));
        letter.setFont(new Font("Arial", Font.PLAIN, 17));

        letterArea.add(letter, BorderLayout.NORTH);

        add(letterArea);

        answer = new JTextArea();
        answer.setFont(new Font("Arial", Font.PLAIN, 17));

        Border in = BorderFactory.createDashedBorder(Color.BLACK);
        Border out = BorderFactory.createMatteBorder(0, 0, 5, 0, Color.WHITE);

        answer.setBorder(BorderFactory.createCompoundBorder(out, in));
        answer.setLineWrap(true);
        answer.setWrapStyleWord(true);

        answer.addKeyListener(new KeyListener()
        {
            @Override
            public void keyPressed(KeyEvent arg0)
            {
                new Answer((Question) ((JTextArea) arg0.getSource()).getParent().getParent().getParent(), 2);
                Main.mWindow.repaint();
                Main.mWindow.validate();
            }

            public void keyReleased(KeyEvent arg0) {}

            public void keyTyped(KeyEvent arg0) {}

        });

        doc = (AbstractDocument)answer.getDocument();
        doc.setDocumentFilter(new DocumentFilter()
        {
            public void insertString(FilterBypass fb, int offs,String str, AttributeSet a) throws BadLocationException 
            {
                if ((fb.getDocument().getLength() + str.length()) <= 200)
                {
                    ;
                    fb.insertString(offs, str.replaceAll("\n", " "), a);
                }
                else
                {
                    int spaceLeft = 200 - fb.getDocument().getLength();
                    if (spaceLeft <= 0)
                        return;

                    fb.insertString(offs, str.substring(0,spaceLeft).replaceAll("\n", " "), a);
                }
            }

            public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a) throws BadLocationException 
            {
                if (str.equals("\n"))
                { 
                    str = "";
                }
                if ((fb.getDocument().getLength() + str.length() - length) <= 200)
                {
                    fb.replace(offs, length, str.replaceAll("\n", " "), a);
                }
                else
                {
                    int spaceLeft = 200 - fb.getDocument().getLength() + length;
                    if (spaceLeft <= 0)
                        return;

                    fb.replace(offs, length, str.substring(0,spaceLeft).replaceAll("\n", " "), a);
                }
            }
        });

        answer.setBackground(Color.PINK);
        add(answer);
        q.answerArea.add(this, index-1);
    }
}

public class Main
{

    public static Properties config;
    public static Locale currentLocale;
    public static ResourceBundle lang;

    public static JFrame mWindow;

    public static JMenuBar menu;
    public static JMenu menuFile, menuEdit;
    public static JMenuItem itmNew, itmClose, itmLoad, itmSave, itmSaveAs, itmExit, itmCut, itmCopy, itmPaste, itmProperties; 

    public static JDialog newDoc;
    public static JLabel newDocText1, newDocText2;
    public static JRadioButton questions, list;
    public static ButtonGroup newDocButtons;
    public static JButton newDocOk;
    public static Boolean firstSegment;

    public static JPanel workspace;
    public static JScrollPane scroll;
    public static ArrayList<Page> pages;

    public static void newDocumentForm()
    {
        //new document dialog
        mWindow.setEnabled(false);

        newDoc = new JDialog(mWindow, "newDoc");
        newDoc.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        newDoc.addWindowListener(new WindowListener ()
        {
            public void windowActivated(WindowEvent arg0) {}
            public void windowClosing(WindowEvent arg0)
            {
                mWindow.toFront();

                newDocText1 = null;
                newDocText2 = null;
                questions = null;
                list = null;
                newDocButtons = null;
                newDocOk = null;
                newDoc.dispose();

                mWindow.setEnabled(true);               
            }

            public void windowClosed(WindowEvent arg0) {}
            public void windowDeactivated(WindowEvent arg0) {}
            public void windowDeiconified(WindowEvent arg0) {}
            public void windowIconified(WindowEvent arg0) {}
            public void windowOpened(WindowEvent arg0) {}   
        });

        newDoc.setSize(400, 200);
        newDoc.setLocationRelativeTo(null);
        newDoc.setResizable(false);
        newDoc.setLayout(null);
        newDoc.setVisible(true);

        newDocText1 = new JLabel("newDocText1");
        newDocText1.setBounds(5, 0, 400, 20);

        newDocText2 = new JLabel("newDocText2");
        newDocText2.setBounds(5, 20, 400, 20);

        newDoc.add(newDocText1);
        newDoc.add(newDocText2);

        firstSegment = true;

        questions = new JRadioButton("questions");
        questions.setSelected(true);
        questions.setFocusPainted(false);
        questions.setBounds(10, 60, 400, 20);
        questions.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent arg0)
            {
                firstSegment = true;
            }
        });

        list = new JRadioButton("list");
        list.setFocusPainted(false);
        list.setBounds(10, 80, 400, 20);
        list.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent arg0)
            {
                firstSegment = false;
            }
        });

        newDoc.add(questions);
        newDoc.add(list);

        newDocButtons = new ButtonGroup();
        newDocButtons.add(questions);
        newDocButtons.add(list);

        newDocOk = new JButton("ok");
        newDocOk.addKeyListener(new KeyListener()
        {
            public void keyPressed(KeyEvent e)
            {
                if (e.getKeyCode() == KeyEvent.VK_ENTER)
                {
                    newDocOk.doClick();
                }
            }

            public void keyReleased(KeyEvent e) {}
            public void keyTyped(KeyEvent e) {}
        });

        newDocOk.setFocusPainted(false);
        newDocOk.setBounds(160, 120, 80, 40);
        newDocOk.setMnemonic(KeyEvent.VK_ACCEPT);
        newDocOk.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent arg0)
            {
                createNewDocument();
            }
        });

        newDoc.add(newDocOk);
        newDocOk.requestFocus();
    }

    public static void createNewDocument()
    {
        //dispose of new document dialog
        mWindow.toFront();

        newDocText1 = null;
        newDocText2 = null;
        questions = null;
        list = null;
        newDocButtons = null;
        newDocOk = null;
        newDoc.dispose();

        mWindow.setEnabled(true);

        //create document display               
        workspace = new JPanel();
        workspace.setLayout(new BoxLayout(workspace, BoxLayout.PAGE_AXIS));
        workspace.add(new Box.Filler(new Dimension(0, 40), new Dimension(0, 40), new Dimension(0, 40)));
        workspace.setBackground(Color.BLACK);

        scroll = new JScrollPane(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        scroll.getVerticalScrollBar().setUnitIncrement(20);
        scroll.setViewportView(workspace);

        pages = new ArrayList<Page>();

        Page p = new Page(workspace, 1);

        new Heading(true, p);

        Question q = new Question(p, 1, 1);

        new Answer(q, 1);

        mWindow.add(scroll, BorderLayout.CENTER);
        mWindow.repaint();
        mWindow.validate();

    }

    public static void main(String[] args) throws FileNotFoundException, IOException
    {   

        //create main window
        mWindow = new JFrame("title");
        mWindow.setSize(1000, 800);
        mWindow.setMinimumSize(new Dimension(1000, 800));
        mWindow.setLocationRelativeTo(null);
        mWindow.setLayout(new BorderLayout());
        mWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        mWindow.setVisible(true);

        //create menu bar
        menu = new JMenuBar();

        menuFile = new JMenu("file");
        menuEdit = new JMenu("edit");

        itmNew = new JMenuItem("new");
        itmNew.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, ActionEvent.CTRL_MASK));
        itmNew.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                newDocumentForm();
            }
        });

        itmClose = new JMenuItem("close");
        itmClose.setActionCommand("Close");
        itmClose.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_W, ActionEvent.CTRL_MASK));

        itmLoad = new JMenuItem("load");
        itmLoad.setActionCommand("Load");
        itmLoad.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_L, ActionEvent.CTRL_MASK));

        itmSave = new JMenuItem("save");
        itmSave.setActionCommand("Save");
        itmSave.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S, ActionEvent.CTRL_MASK));

        itmSaveAs = new JMenuItem("saveAs");
        itmSaveAs.setActionCommand("SaveAs");
        itmExit = new JMenuItem("exit");
        itmExit.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                //Add confirmation window!
                System.exit(0);
            }
        });

        itmCut = new JMenuItem("cut");
        itmCut.setActionCommand("Cut");
        itmCut.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_X, ActionEvent.CTRL_MASK));

        itmCopy = new JMenuItem("copy");
        itmCopy.setActionCommand("Copy");
        itmCopy.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, ActionEvent.CTRL_MASK));

        itmPaste = new JMenuItem("paste");
        itmPaste.setActionCommand("Paste");
        itmPaste.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_V, ActionEvent.CTRL_MASK));

        itmProperties = new JMenuItem("properties");
        itmProperties.setActionCommand("properties");
        itmProperties.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_P, ActionEvent.CTRL_MASK));

        menuFile.add(itmNew);
        menuFile.add(itmClose);
        menuFile.addSeparator();
        menuFile.add(itmLoad);
        menuFile.addSeparator();
        menuFile.add(itmSave);
        menuFile.add(itmSaveAs);
        menuFile.addSeparator();
        menuFile.add(itmExit);

        menuEdit.add(itmCut);
        menuEdit.add(itmCopy);
        menuEdit.add(itmPaste);
        menuEdit.addSeparator();
        menuEdit.add(itmProperties);

        menu.add(menuFile);
        menu.add(menuEdit);

        //create actionListener for menus

        mWindow.add(menu, BorderLayout.NORTH);

        mWindow.repaint();
        mWindow.validate();
    }
} 
```

它不是 SSCCE（它是一整套相互依赖的组件，在新程序中复制它会让人头疼，甚至可能不会那么短），但整个事情都发生在 Answer 类中。你几乎可以忽略其他任何事情。

PS 要得到东西，请按 ctrl+n，然后输入！然后单击粉红色的文本区域，然后按一个按钮...

PPS 如果你按住那个按钮，你会得到非常酷的效果......：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:35:17.003

您可能需要`validate()`然后*在* `repaint()`. [键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)可能是更好的方法。`KeyListener`

# ruby-on-rails - Rails 设计插件定制

> ID：12176467
> 
> 赞同：0
> 
> 时间：2012-08-29T11:03:11.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, change-password

在我当前的 Ruby on Rails 项目中，设计插件已用于身份验证。为了更改密码，我将设计插件的密码/edit.html.erb 文件添加到我项目的用户目录中。除了没有显示错误消息外，一切正常。

这是我目前的`update_password`方法

```
def update_password
    @user = User.find(current_user.id)
    if @user.update_with_password(params[:user])
      sign_in @user, :bypass => true
      redirect_to root_path
    else
      render "edit"  
    end
  end 
```

我在用户模型中提到了需要验证，如下所示

```
validates_presence_of :name, :primary_locale, :current_password, :password, :password_confirmation 
```

这是我的编辑表单代码：

```
<div id="loginForm" class="editPwFormHeight">
    <div id="loginHeader"><h3><%= image_tag("wif_small.png"); %></h3></div>
    <div id="loginContent">
        <%= form_for(@user, :url => { :action => "update_password", :locale => params[:locale] }, :method => "post") do |f| %>
                <%= f.hidden_field :reset_password_token %>
            <p><%= f.password_field :current_password, :class => "login_txt", :placeholder => I18n.t('wi.common.enterCurrentPw'), :autocomplete => "off" %></p>
            <p><%= f.password_field :password, :class => "login_txt", :placeholder => I18n.t('wif.common.newPw'), :autocomplete => "off"  %></p>
            <p><%= f.password_field :password_confirmation, :class => "login_txt", :placeholder => I18n.t('wif.common.confirmPw'), :autocomplete => "off" %></p>
            <p>
                <input id="user_submit" name="commit" type="submit" value="<%= I18n.t('wif.common.updatePw') %>" class="login_btn" /> 
                <input id="user_cancel" name="commit" type="button" value="<%= I18n.t('wif.common.cancel') %>" class="login_btn" />
            </p>
        <% end %>
    </div>
</div> 
```

任何人都可以帮助我解决这个问题。如果用户没有输入当前密码或设备当前支持的任何其他错误，我想显示错误消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:12:44.933

您需要将以下行添加到您的模板中：

```
<%= devise_error_messages! %> 
```

您可以通过编辑 Devise 的翻译文件来自定义消息本身，例如`config/locales/devise.en.yml`

如果您没有使用 devise 的内置控制器，那么您需要使用该方法将[`DeviseHelper`](https://github.com/plataformatec/devise/blob/master/app/helpers/devise_helper.rb)模块注册为控制器中的助手。[`helper`](http://ap.rubyonrails.org/classes/ActionController/Helpers/ClassMethods.html#M000102)

# django - django forms - 外键的访问字段

> ID：12176471
> 
> 赞同：0
> 
> 时间：2012-08-29T11:03:34.240
> 
> 标签：django, django-forms, inline-formset

我想从具有模型 B 外键的模型 A 创建一个模型表单：

```
class A(models.Model):
    a = models.CharField(...)
    b = models.ForeignKey(B)
    c = models.CharField(...)

class B(models.Model):
    a = models.IntegerField(...)
    b = models.CharField(...)
    c = models.BooleanField(...) 
```

所以我这样做了：

```
class AForm(forms.ModelForm):
    class Meta:
        model = A 
```

但我只想要一些领域：

```
class AForm(forms.ModelForm):
    class Meta:
        model = A
        fields = ('a', 'b') 
```

问题就在这里，我不希望 b 成为 B 对象的列表，但我想要字段 Ba 和 Bc （例如）。我尝试了“fields = ('a', 'ba', 'bc')”和“fields = ('a', 'b_ *a', b* _c')”但没有结果。

所以我来到了[内联表单集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#inline-formsets)，但我没有看到任何限制内联字段集的东西。

我该怎么办 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:08:53.553

您可以像这样限制内联字段（当然您仍然需要表单来验证，您可以使用 javascript 或默认值来设置间隙）

```
class MyModelInline(admin.TabularInline):
    model = MyModel
    fields = ["x", "y", "z"]

    #fk_name = "..."
    #max_num = 1
    #extra = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:17:15.383

如果您想在选择字段中显示“B”的正确文本，请在您的模型中`B`添加`__unicode__`方法并使用字段返回字符串`B`，

例如。

```
class B(models.Model):
    a = models.IntegerField(...)
    b = models.CharField(...)
    c = models.BooleanField(...)
    def __unicode__(self):
         return u''+str(self.a) + ':' + self.b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:21:48.437

`inlineformset_factory`接受`form`参数，这是您的“B”对象的模型形式类。`fields = ('a', 'b')`因此，使用in定义一个表单类`Meta`并将其传递给函数应该会有所帮助。

# java - 如何在单个端口上同时运行 tcp 和 udp？

> ID：12176474
> 
> 赞同：3
> 
> 时间：2012-08-29T11:03:34.737
> 
> 标签：java, networking, network-protocols

我有一种情况，比如我必须一次在一个端口上同时运行 UDP 和 TCP。这是因为在我的应用程序中，任何人都可以随时调用任何协议。所以我需要不断检查传入的请求并为请求提供服务。谁能帮我摆脱java中的这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T11:08:53.633

您无法检查请求是 TCP 还是 UDP。相反，您添加了一个 TCP 侦听器和一个 UDP 侦听器。如果您使用广播或多播地址，恕我直言 UDP 更有用。

例如

```
ServerSocket ss = new ServerSocket(12345);
DatagramSocket ds = new DatagramSocket(12345); 
```

或者

```
ServerSocket ss = new ServerSocket(12345);
DatagramSocket ds = new MulticastSocket(new InetSocketAddress("224.224.1.1", 12345)); 
```

在这两种情况下，tcp 连接都到`ServerSocket`udp 数据包到`DatagramSocket`

# javascript - 怪癖模式下的浮动 DIV

> ID：12176475
> 
> 赞同：0
> 
> 时间：2012-08-29T11:03:44.287
> 
> 标签：javascript, css-position, quirks-mode

我正在使用一个编码非常糟糕的 CMS，它只能在 Quirks 模式下工作，我想在页面的右下方放置一个浮动 div。在过去的 2 个小时里，我一直在寻找一种可能的方法来做到这一点。通常我只会： Position:fixed; 但这在怪癖模式下不起作用。

可以用javascript做吗？如果，那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:14:40.500

您是否尝试过更改 DOCTYPE？[如何使用 TRANSITIONAL doctype 让“位置：固定”css 在 IE 7+ 中工作？](https://stackoverflow.com/questions/1628265/how-to-get-positionfixed-css-to-work-in-ie-7-with-transitional-doctype)

并使用 HTML5 文档类型？

```
<!DOCTYPE html> 
```

您是否尝试过绝对位置？将 div 作为 body 标签的子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:15:14.947

IE 7 中的 Quirks 模式也可以在编码 HTML 4.01 文档时触发。在 DTD 之前插入注释将在 IE 6 和 IE 7 中触发这种向后兼容模式。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

或者

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

并且浏览器处于哪种呈现模式并不总是很明显。在 IE 地址行中，输入

```
javascript:alert(document.compatMode) 
```

谢谢，布伦登

# css - CSS 在非索引页面上的行为很奇怪

> ID：12176476
> 
> 赞同：0
> 
> 时间：2012-08-29T11:03:46.307
> 
> 标签：css, menu

出于某种原因，我的 css 在非索引页面上表现得很奇怪。这很奇怪，因为网页的整个顶部是所有人之间的共享包含。

这是问题的图片和相关代码：

![在此处输入图像描述](../Images/3822a3f4b9b417f8df85bbd82a94ba3b.png)

页面顶部：http: [//pastebin.com/qePqZhsE](http://pastebin.com/qePqZhsE)

navbar.php：[http ://pastebin.com/7065Dxcy](http://pastebin.com/7065Dxcy)

导航栏的 CSS：http : [//pastebin.com/79tdQ4eP](http://pastebin.com/79tdQ4eP)

它必须是 CSS 中的东西，因为其余部分是相同的，但我看不到它。（虽然我可能只是睡眠不足：P）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:15:50.733

代替

```
ul.dropdown li.hover a { color: red; } 
```

和

```
ul.dropdown li:hover a { color: red; } 
```

在 css 文件的第 12 行

编辑：

正如下面评论中所说，你有一个这样的结构：“ul.dropdown > li > ul > li > a” qhile 你正在将css应用于“ul.dropdown li a”。

所以，尝试更换

```
ul.dropdown li.hover a 
```

和

```
ul.dropdown > li > ul > li.hover a 
```

或完全删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:33:18.033

简单地说，问题在于您的 PHP 中的导航栏结构`index`不同，这里是您的导航栏结构的屏幕截图`index.php`：

![索引中的导航栏](../Images/ce471f1c00e17012eadd546698604cef.png)

在`empty.php`：

![empty.php 中的导航栏](../Images/fd343d7a47b42cf230f88f28e449fd9e.png)

只要确保你使用相同的结构，我猜；希望有帮助！

# iphone - 如果移动，UIImageView 将缩放而不是旋转，iOS

> ID：12176477
> 
> 赞同：3
> 
> 时间：2012-08-29T11:03:47.793
> 
> 标签：iphone, objective-c, rotation

hy

我想做一个小动画。如果图像是静态的，旋转效果很好。但是当我移动我的图像视图时，它会拉伸图像。如果不旋转图像，则可以移动图像而不会出现问题。

```
-(void)play
{

        CGRect ship=image.frame;
        ship.origin.x=ship.origin.x+move;
        ship.origin.y=ship.origin.y+move2;
        image.frame=ship;
}

-(void)rotate 
{
       int degre=180;
       float radian=degre*(3.14/180);
       image.transform =CGAffineTransformMakeRotation(radian); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:20:27.093

使用 transform 属性时，您不允许通过更改框架来更改位置，您必须使用 center 属性。

所以这应该有帮助：

```
-(void)play
{
    image.center=CGPointMake(image.center.x + move, image.center.y + move2);
} 
```

# postgresql - Postgresql 使用 ST_removePoint 更新多边形几何

> ID：12176479
> 
> 赞同：6
> 
> 时间：2012-08-29T11:03:51.327
> 
> 标签：postgresql, postgis

我有一个名为的表`geofences`，它将 Polygon 类型的几何图形存储在名为 的列中`geometry`。我通过从现有几何图形中仅删除一个点来更新多边形。为此，我使用了以下查询：

```
 UPDATE gfe_geofences
   SET geometry = ST_RemovePoint(geometry, ST_NPoints(ST_GeomFromText(
                     'POINT(23.1446787840563 96.002746420167)', 0) ) - 1)
   WHERE is_active = true
     AND ST_IsClosed(the_geom) = true; 
```

但这给了我错误：

> 错误：lwline_deserialize：尝试反序列化实际上是无效类型的行

你能帮我更新几何吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:10:28.070

ST_RemovePoint 仅适用于线串（请参阅[http://postgis.refractions.net/docs/ST_RemovePoint.html](http://postgis.refractions.net/docs/ST_RemovePoint.html)。我会做什么，使用 ST_Boundary 获取多边形的边界，调用 ST_RemovePoint ，然后使用 ST_MakePolygon 构建一个新的多边形。

# java - 如何在Java中创建一个类的方法数组

> ID：12176487
> 
> 赞同：3
> 
> 时间：2012-08-29T11:04:32.333
> 
> 标签：java, arrays, methods, dynamically-generated

再会。

我有一门课，我将用它来生成用于培训目的的数学练习。该课程由一系列方法组成，每个方法生成一种类型的练习。

然后我想制作一种方法来生成一个随机类型的随机练习。为此，我想将方法​​名称存储在一个数组中，然后调用一个随机条目。

到现在为止还挺好。

由于将来我要添加方法来生成新的练习类型，我想知道是否有一种方法可以动态生成方法数组：一旦加载了类，构造函数将检查可用的方法并将他们的名字存储在一个数组中。

那可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T11:08:57.667

您可以使用反射来发现类的方法。

但是在我看来，这是一个糟糕的架构。处理不同练习的更好方法是创建一个`IExercise`将由`*Exercise`类实现的接口。然后创建这些对象，将它们放入一个数组并随机选择一个。然后从接口或其他东西调用指定的方法......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:07:23.150

您可以存储方法代理，而不是存储名称

```
Method[] methods = getClass().getDeclaredMethods(); 
```

您需要通过这些忽略您添加的任何非测试方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T11:09:40.773

我强烈建议查找策略模式：

[http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

您将如何将其应用于您的问题？只需创建实现通用接口的对象（为您提供创建练习的方法）并使用此对象的列表。

您还将练习一个非常有用的模式！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T11:07:44.150

您可以使用`Reflection API`来检查可用的方法

```
 Method[] methods= Class.forName("ClassTo test").getDeclaredMethods(); 
```

话虽如此，在调用方法时有很多事情可能会出错。

你可以通过只拥有它来避免它

```
interface  IExercise
{
    void createExercise();
}
class Exercise1 implements IExercise
{
    @Override
    public void createExercise()
    {
    }
} 
```

然后你可以使用随机`IExercise[]`生成。`Exercise`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T11:10:34.533

我认为使用命令模式并将每个练习存储为实现标记接口 (ICommand) 的命令类会更安全。之后，您可以使用反射在运行时检测在类路径上实现 ICommand 的所有类，以获得可以运行的练习列表。这也将使您不必在随机选择代码的集合中添加您设计的每种新类型的练习。

[http://en.wikipedia.org/wiki/Command_pattern](http://en.wikipedia.org/wiki/Command_pattern)

这有点类似于下面建议的策略模式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T11:08:11.280

创建对象，例如：

```
MathExample math = new MathExample(); 
```

并将它们添加到`ArrayList<Objects>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T11:11:07.123

我认为，最好在数组中创建[责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)和 stro 命令。随机选择命令并放入链中。

# shell - shell：删除一个巨大的文本日志文件的最后一行

> ID：12176492
> 
> 赞同：16
> 
> 时间：2012-08-29T11:04:40.733
> 
> 标签：shell, tail

我问了一个[关于](https://stackoverflow.com/questions/12175344/php-pop-the-last-line-of-huge-text-log-file)在 PHP 中弹出文本文件的最后一行的问题，现在，是否可以在 shell 脚本中重写逻辑？

我试过这个来获得最后一行：

```
tail -n 1 my_log_file.log 
```

但我不确定如何删除最后一行并保存文件。

PS 鉴于我使用的是 Ubuntu 服务器。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-29T11:11:39.837

要获取没有最后一行的文件内容，您可以使用

```
head -n-1 logfile.log 
```

（我不确定这是否在所有地方都支持）

或者

```
sed '$d' logfile.log 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-29T11:55:12.370

您想要的是在最后一行之前截断文件，而不必完全读取文件。

```
truncate -s -"$(tail -n1 file | wc -c)" file 
```

这是假设文件当前没有被写入。

truncate 是 GNU coreutils 的一部分（通常在最近的 Linux 发行版中找到），并且不是标准化的 Unix 或 POSIX 命令。许多“dd”实现也可用于截断文件。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-29T11:13:42.983

*（解决方案基于[sch 的回答](https://stackoverflow.com/questions/12176492/shell-delete-the-last-line-of-a-huge-text-log-file/12177339#12177339)，因此应归功于他/她）*

这种方法将允许您有效地检索文件的最后一行并截断文件以删除该行。这可以更好地处理大输入，因为文件不是按顺序读取的。

```
# retrieve last line from file
LAST=$(tail -n 1 my_log_file.log)

# truncate file
let TRUNCATE_SIZE="${#LAST} + 1"
truncate -s -"$TRUNCATE_SIZE" my_log_file.log

# ... $LAST contains 'popped' last line 
```

请注意，如果在调用`tail`和之间修改了文件，这将无法按预期工作`truncate`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-29T11:11:00.647

一种方法是：

```
sed '$d' < f1 > f2 ; mv f2 f1 
```

# ios - 原型单元中的 UILabel 未从代码更新

> ID：12176498
> 
> 赞同：1
> 
> 时间：2012-08-29T11:05:14.330
> 
> 标签：ios, uitableview, storyboard, uilabel

我`UILabel`在情节提要中设计的原型单元中有 2 秒。两者都有其指定的`tag`编号（1000 和 1001）。当我编写该`tableView cellForRowAtIndexPath:`方法时，似乎其中一个标签正在接收相关`NSString`的，而另一个则没有。

这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {           

    static NSString *CellIdentifier = @"ContentCell";
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    ContentObject * contentObject =  [contentPackageManager.contentObjectsArray objectAtIndex:[indexPath row]];
//contentPackageManager is a class that holds an NSArray of ContentObjects (it does a few other things, but they are not relevant for this method...)
//ContentObject is a class that holds several attributs such as: NSString*name, NSString*type, etc...

    UILabel *nameLabel = (UILabel *)[cell viewWithTag:1000];
    nameLabel.text = contentObject.name; //this line works OK

    UILabel * typeLabel = (UILabel *)[cell viewWithTag:1001]; 
    typeLabel.text = contentObject.contentType; //this is the PROBLEMATIC one - no effect on the actual UILabel

    return cell;           
} 
```

有人熟悉这个问题吗？

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:46:55.777

请检查是否 `contentObject.contentType`不为空。

# javascript - Jasmine：测试 setTimeout 函数抛出错误

> ID：12176499
> 
> 赞同：4
> 
> 时间：2012-08-29T11:05:16.850
> 
> 标签：javascript, unit-testing, asynchronous, settimeout, jasmine

我想测试一个方法的错误处理，该方法与 setTimeout 一起安排工作。该错误将在预定部分抛出，即：

```
function sutWithSetTimeout() {
    setTimeout(function () { throw new Error("pang"); }, 1);
} 
```

如何测试是否引发了错误以及是否有正确的消息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T15:18:43.070

您需要在 中捕获该函数`setTimeout`并使用`expect(function(){fn();}).toThrow(e);`. 因此，您可以窥探`setTimeout`以获取该功能：

```
spyOn(window, 'setTimeout');
sutWithSetTimeout();
var fn = window.setTimeout.mostRecentCall.args[0];
expect(fn).toThrow('pang'); 
```

# powershell - 如何在 Powershell 中编写并行编程

> ID：12176503
> 
> 赞同：0
> 
> 时间：2012-08-29T11:05:24.317
> 
> 标签：powershell

我有一个用于数据管理的巨大 powershell 脚本，它是按 powershell 顺序编写的，执行时间太长，我无法发布完整的代码....谁能告诉我如何在 powershell 中进行并行脚本编写我可以节省时间，我尝试过开始工作，停止/等待工作，但似乎非常困难。

非常感谢。

问候安舒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:59:55.130

[这](http://www.idera.com/Events/RegisterWC.aspx?EventID=297 "这里")是关于 PowerShell 中的几种多线程策略的网络广播，包括使用 PSJobs 和启动新的运行空间。它很好地说明了每种方法的优缺点。

# android - Android WebView 缓存目录中的文件格式是什么（data_1、f_000001 等）？

> ID：12176507
> 
> 赞同：6
> 
> 时间：2012-08-29T11:05:30.000
> 
> 标签：android, file, caching, webview

我在 WebView 的帮助下创建了一个基本的浏览器。

当我访问一个网站（包含一些文本和一些图像）时，/data/data/com.mayexample/cache/webViewCacheChromium 中的缓存目录被一些称为 index、data_0、data_1、data_2、f_00001、f_00002 等的文件填充.

我想知道，这些文件的格式是什么，它们包含什么？我想“所以，其中一些文件肯定必须是网站的图像”并尝试在文件管理器中打开它们（以图像形式打开）。但是无论我选择什么文件，该过程都会显示“加载失败！”。即使我将其中一些重命名为 .jpg，我仍然无法打开任何东西。我在互联网上读到这对某些人有用（看看 [Android WebView - Load Images from cache](https://stackoverflow.com/questions/11274225/android-webview-load-images-from-cache)，这正是我想要做的），但我不能对缓存的文件做任何事情。

你知道打开 webview 缓存文件的方法吗？例如，一个文件不是代表相应的缓存图像吗？

我真正想要实现的（一旦我了解缓存文件的结构）是以编程方式从它的缓存中获取 webview 的图像，就像上面发布的链接的作者一样（不幸的是，这个帖子的答案没有多大帮助）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-26T12:22:03.810

缓存的文件可能是 CSS 或 JS/image/html 类型之一。在较早的 Android 版本中，一个缓存文件只映射一个 CSS 或 JS/image/html 文件。

* * *

据我所知，浏览器引擎（实际上是 HTTP 模块）以 URL-to-HashKey 的方式维护这些缓存文件。所以你发现的（如“4f42185de3a3a461_1”）可能与任何网络资源文件相关联，如JS/CSS/images/HTML等。

我记得在早期的 Android 版本中，WebView 用于将此类 URL-to-HashKey 映射数据存储在 sqlite3 表中。

这里的问题是你不知道映射关系，所以你很难检索到你想要的文件。一个棘手的方法是阅读 AOSP 源代码，然后您可能能够知道如何通过唯一 URL 生成 HashKey，或者您可以操作 sqlite3 表，如果在 Android 4.4 上仍然存在的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:17:52.423

我能够使用专为 Chrome 桌面浏览器设计的工具查看 webViewCacheChromium 文件夹中的文件：

[http://www.nirsoft.net/utils/chrome_cache_view.html](http://www.nirsoft.net/utils/chrome_cache_view.html)

内容基本上是您对 Web 缓存的期望 - 图像、javascript、css、html。

# jquery - 如何在 zend Studio 的 zend_form 中使用 jquery？

> ID：12176512
> 
> 赞同：-3
> 
> 时间：2012-08-29T11:05:39.167
> 
> 标签：jquery, zend-framework, zend-form

如何以zend形式使用jquery？我使用 zend studio 9 作为编辑器，我将包含 jquery 库，但我不知道如何使用它来验证 zend 表单。我找到了教程，但它们包括 zendx_jquery 但在 zend 工作室中没有这种类型的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:13:57.850

您可以像在任何其他应用程序中一样使用 jQuery。如果您对 ZendX 感兴趣，您必须从[http://framework.zend.com/download/latest](http://framework.zend.com/download/latest)下载完整的 Zend 框架包。然后搜索 ZendX 文件夹并将其添加到您的项目库中。就个人而言，我不使用它，但你可以从那里开始。如果您只是想使用 jQuery 进行表单验证，我强烈推荐以下视频：[http](http://www.zendcasts.com/ajaxify-your-zend_form-validation-with-jquery/2010/04/) ://www.zendcasts.com/ajaxify-your-zend_form-validation-with-jquery/2010/04/ 。这就是我在表单中用于任何客户端验证的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:59:03.940

假设 $form 是您的 Zend_Form。像这样设置 onSubmit 属性：

```
$form->setAttrib('onclick', 'yourJavascriptValidationFunction()'); 
```

或者，或者，给你的表单一个 id 或类名（也用`setAttrib()`），并直接在元素上绑定 JavaScript 中的验证函数。

# installshield - 来自 exe 的 installshield 自定义操作取消事件

> ID：12176513
> 
> 赞同：2
> 
> 时间：2012-08-29T11:05:49.043
> 
> 标签：installshield, custom-action

我正在使用 installshield 2012 春季特快版。我创建了调用在 vb.net 中开发的 exe 的 exe 自定义操作，该 exe 中有取消按钮。如果用户单击取消按钮在 installshield 设置中弹出错误框（错误代码 1722），我知道为什么会出现此错误，但我不希望用户看到此错误并希望取消安装而不向用户显示错误消息。

告诉我是否有人需要更多细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:32:41.730

这里有很多事情在起作用：

1.  不要使用 EXE 自定义操作。他们用完了进程，无法访问 MSI 句柄，并且有各种其他故障点。请参阅：[EXE 自定义操作的集成障碍](http://blogs.msdn.com/b/windows_installer_team/archive/2007/10/20/integration-hurdles-for-exe-custom-actions.aspx)

2.  改用 WiX DTF 编写托管代码自定义操作，该操作作为标准 C++ Win32 DLL 呈现给 Windows 安装程序。请参阅：[WiX 和 DTF：使用自定义操作列出 IIS 上的可用网站](http://blog.torresdal.net/2008/10/24/wix-and-dtf-using-a-custom-action-to-list-available-web-sites-on-iis/)

3.  您的自定义操作根本不应该呈现任何 UI。它应该将消息发布到 Windows 安装程序以显示在进度 dailog 上。如果您的自定义操作提示用户输入信息，这也是错误的。它应该在安装的用户访谈阶段在 UI 序列中完成。

4.  当您将消息传递到进度对话框时，MSI 将为您提供一个返回代码，表明用户已按下取消按钮。然后，您应该使用此按钮来中断自定义操作中的处理。然后 Windows 安装程序将回滚并显示“安装中断”对话框。请参阅：[有关使取消按钮适用于延迟自定义操作的任何提示](http://blogs.msdn.com/b/windows_installer_team/archive/2005/09/12/458939.aspx)

5.  InstallShield Express 是一个非常有限的工具，可能无法直接完成您需要它完成的所有创作。有一些方法可以扩展它。请参阅：[使用 Windows Installer XML 增强 InstallShield - 证书](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

我向您展示的是正确和正确的方法。从 MSI 最佳实践的角度来看，其他任何事情都不是最理想的。

# c - 用于查找对的数组 O(nlogn) 复杂度方法中的元素

> ID：12176518
> 
> 赞同：4
> 
> 时间：2012-08-29T11:06:09.830
> 
> 标签：我在C, , c, complexity-theory

好的，我一直被这里的复杂性所困扰。有一个元素数组，比如说`A[n]`。需要找到所有对以便`A[i]>A[j]`和也`i < j`。

因此，如果是`{10, 8, 6, 7, 11}`，则对将是`(10,8) (10, 6), (10,7) and so on...`

我在 nlogn 时间内进行了合并排序，然后在 nlogn 中再次对整个数组进行二进制搜索，以获取排序数组中元素的索引。

所以`sortedArray={6 7 8 10 11}`和`index={3 2 0 1 4}`

无论我尝试什么，`n^2`当我开始循环比较时，我都会在复杂性中再次获得时间。我的意思是，如果我从第一个元素（即 10）开始，则`index[2]`意味着比它少 2 个元素。因此，如果`index[2]<index[i]`那时它们可以被接受，但这会增加复杂性。有什么想法吗？我不想要代码，只是在正确方向上的提示会有所帮助。

谢谢。[我在C](/questions/tagged/c "show questions tagged 'c'")中所做的一切和时间复杂度在这里都很重要

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:12:01.723

您不能在 under 中执行此操作`O(N^2)`，因为当原始数组按降序排序时算法将产生的对数是`N(N-1)/2`。你根本无法及时产生`O(N^2)`结果`O(N*LogN)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:13:50.007

结果由 O(n^2) 个元素组成，因此任何迭代所有对的尝试都是 O(n^2)。

# matlab - Matlab中有没有一种方法可以确定文件中的行数而无需遍历每一行？

> ID：12176519
> 
> 赞同：25
> 
> 时间：2012-08-29T11:06:22.443
> 
> 标签：matlab, file-io, line-count

显然，可以使用 fgetl 或类似函数遍历文件并增加一个计数器，但是有没有一种方法可以确定文件中的行数*而不*进行这样的循环？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-29T11:22:32.707

我喜欢使用下面的代码来完成这个任务

```
fid = fopen('someTextFile.txt', 'rb');
%# Get file size.
fseek(fid, 0, 'eof');
fileSize = ftell(fid);
frewind(fid);
%# Read the whole file.
data = fread(fid, fileSize, 'uint8');
%# Count number of line-feeds and increase by one.
numLines = sum(data == 10) + 1;
fclose(fid); 
```

如果您有足够的内存一次读取整个文件，则速度非常快。它应该适用于 Windows 和 Linux 风格的行尾。

**编辑：**我测量了迄今为止提供的答案的表现。这是确定包含 100 万个双精度值（每行一个值）的文本文件的行数的结果。平均 10 次尝试。

```
 Author           Mean time +- standard deviation (s)
------------------------------------------------------
 Rody Oldenhuis      0.3189 +- 0.0314
 Edric (2)           0.3282 +- 0.0248
 Mehrwolf            0.4075 +- 0.0178
 Jonas               1.0813 +- 0.0665
 Edric (1)          26.8825 +- 0.6790 
```

使用 Perl 并将所有文件作为二进制数据读取的方法是如此之快。如果 Perl 在内部同时读取文件的大块而不是逐行循环，我不会感到惊讶（只是猜测，对 Perl 一无所知）。

使用简单的`fgetl()`-loop 比其他方法慢 25-75 倍。

**编辑 2：**包括 Edric 的第二种方法，我会说，它**比Perl 解决方案更快且相当。**

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-29T12:00:20.430

我认为循环实际上是最好的——到目前为止，所有其他选项都建议要么依赖外部程序（需要错误检查；需要 str2num；更难调试/跨平台运行等），要么一次性读取整个文件. 循环并不是那么糟糕。这是我的变种

```
function count = countLines(fname)
  fh = fopen(fname, 'rt');
  assert(fh ~= -1, 'Could not read: %s', fname);
  x = onCleanup(@() fclose(fh));
  count = 0;
  while ischar(fgetl(fh))
    count = count + 1;
  end
end 
```

编辑：乔纳斯正确地指出，上面的循环真的很慢。这是一个更快的版本。

```
function count = countLines(fname)
fh = fopen(fname, 'rt');
assert(fh ~= -1, 'Could not read: %s', fname);
x = onCleanup(@() fclose(fh));
count = 0;
while ~feof(fh)
    count = count + sum( fread( fh, 16384, 'char' ) == char(10) );
end
end 
```

它仍然没有那么快`wc -l`，但也不是灾难。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-29T11:14:52.827

[我在这里](http://www.mathworks.com/matlabcentral/newsreader/view_thread/235126)找到了一个不错的技巧：

```
if (isunix) %# Linux, mac
    [status, result] = system( ['wc -l ', 'your_file'] );
    numlines = str2num(result);

elseif (ispc) %# Windows
    numlines = str2num( perl('countlines.pl', 'your_file') );

else
    error('...');

end 
```

perl 脚本在哪里`'countlines.pl'`，包含

```
while (<>) {};
print $.,"\n"; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-29T11:15:50.620

您可以一次读取整个文件，然后计算您已阅读的行数。

```
fid = fopen('yourFile.ext');

allText = textscan(fid,'%s','delimiter','\n');

numberOfLines = length(allText{1});

fclose(fid) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-14T08:57:50.740

我建议为此使用外部工具。例如一个名为 的应用程序`cloc`，您可以[在这里](https://github.com/AlDanial/cloc#apt-get)免费下载。

在 linux 上，您只需键入`cloc <repository path>`并获取

```
YourPC$ cloc <directory_path>
      87 text files.
      81 unique files.                              
      23 files ignored.

http://cloc.sourceforge.net v 1.60  T=0.19 s (311.7 files/s, 51946.9 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
MATLAB                          59           1009           1074           4993
HTML                             1              0              0             23
-------------------------------------------------------------------------------
SUM:                            60           1009           1074           5016
------------------------------------------------------------------------------- 
```

他们还声称它应该在 Windows 上工作。

# boost - 增强 MD5 支持？

> ID：12176520
> 
> 赞同：4
> 
> 时间：2012-08-29T11:06:25.750
> 
> 标签：boost, hash, md5, checksum

Boost 是否支持 MD5 校验和计算？

是的，你如何使用或者你能提供一些教程吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:52:19.983

不，它没有。考虑使用 OpenSSL、Crypto++ 等。

# iphone - 如何使用 phonegap 为 iPhone 编译条码扫描器？

> ID：12176521
> 
> 赞同：0
> 
> 时间：2012-08-29T11:06:30.723
> 
> 标签：iphone, ios, cordova, barcode, barcode-scanner

我目前正在为我的最后一年项目编写一个使用条形码扫描仪的应用程序。

在互联网上进行了一些搜索后，我来到了这个网站：[https ://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)

我的第一个问题是，我应该使用哪个代码？iOS/BarcodeScanner 中的那个，还是 iPhone/BarcodeScanner 中的那个？我都试过了，但我只是希望有人给我一个明确的答案。这就引出了我的第二个问题。

我的第二个问题是，在使用 iOS/BarcodeScanner 中的代码时，我的应用程序编译得很好，但是相机扫描拒绝出现。如何通过 index.html 调用扫描功能？

如果我应该使用 iPhone/BarcodeScanner 中的代码，编译它们会给我一个“PGPlugin.h 文件丢失”错误。我该如何修复它？

我对整个编程场景仍然很陌生，并且已经完成了我相当多的谷歌搜索，所以如果我问的问题已经回答了，请原谅我。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:33:13.147

您好，第一个问题的答案请查看此[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)并按照自述文件进行操作。

回答第二个问题：

```
window.plugins.barcodeScanner.scan(
function(result) {
    if (result.cancelled)
        alert("the user cancelled the scan")
    else
        alert("we got a barcode: " + result.text)
},
function(error) {
    alert("scanning failed: " + error)
} 
```

)

上面的链接解决了所有问题。

# python - 弹性搜索：搜索结果中的 pyes.exceptions.IndexMissingException 异常

> ID：12176524
> 
> 赞同：2
> 
> 时间：2012-08-29T11:06:37.003
> 
> 标签：python, full-text-search, elasticsearch, pyes

这是一个关于 Elastic-Search python API (pyes) 的问题。

我通过 curl 运行了一个非常简单的测试用例，一切似乎都按预期工作。

这是 curl 测试用例的描述：

ES 中唯一存在的文档是：

```
curl 'http://localhost:9200/test/index1' -d '{"page_text":"This is the text that was found on the page!"} 
```

然后我在 ES 中搜索所有存在“ **found** ”一词的文档。结果似乎还可以：

```
curl 'http://localhost:9200/test/index1/_search?q=page_text:found&pretty=true'
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : 0.15342641,
    "hits" : [ {
      "_index" : "test",
      "_type" : "index1",
      "_id" : "uaxRHpQZSpuicawk69Ouwg",
      "_score" : 0.15342641, "_source" : {"page_text":"This is the text that was found on the page!"}

    } ]
  }
} 
```

**但是**，当我通过 python2.7 api (pyes) 运行相同的查询时，出现了问题：

```
>>> import pyes
>>> conn = pyes.ES('localhost:9200')
>>> result = conn.search({"page_text":"found"}, index="index1")
>>> print result
<pyes.es.ResultSet object at 0xd43e50>
>>> result.count()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/pyes/es.py", line 1717, in count
    return self.total
  File "/usr/local/pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/pyes/es.py", line 1686, in total
    self._do_search()
  File "/usr/local/pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/pyes/es.py", line 1646, in _do_search
    doc_types=self.doc_types, **self.query_params)
  File "/usr/local/pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/pyes/es.py", line 1381, in search_raw
    return self._query_call("_search", body, indices, doc_types, **query_params)
  File "/usr/local/pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/pyes/es.py", line 622, in _query_call
    return self._send_request('GET', path, body, params=querystring_args)
  File "/usr/local/pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/pyes/es.py", line 603, in _send_request
    raise_if_error(response.status, decoded)
  File "/usr/local/pythonbrew/pythons/Python-2.7.3/lib/python2.7/site-packages/pyes/convert_errors.py", line 83, in raise_if_error
    raise excClass(msg, status, result, request)
pyes.exceptions.IndexMissingException: [_all] missing 
```

如您所见， pyes 返回结果对象，但由于某种原因，我什至无法获得那里的结果数量。

有人猜到这里可能出了什么问题吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:12:49.113

参数名称变了，不再被调用`index`，被调用`indices`并且是一个列表：

```
>>> result = conn.search({"page_text":"found"}, indices=["index1"]) 
```

# c# - 将列表视图内的组合框绑定到集合

> ID：12176527
> 
> 赞同：0
> 
> 时间：2012-08-29T11:06:42.590
> 
> 标签：c#, wpf, xaml, listview, combobox

这是我的对象模型

```
private class ShellItem
{
    public string Name { get; set; }

    public string Command { get; set; }

    public List<ShellMenu> ShellMenus { get; private set; }

    public ShellItem()
    {
        ShellMenus = new List<ShellMenu>();
    }
}

public class ShellMenu
{
    public string ExtName;

    public string KeyName;

    public string FileType;

    public string MenuName { get; set; }

    public string Command { get; set; }

} 
```

这是我的 xaml。

```
<ListView Name="listViewRightClick" HorizontalAlignment="Stretch" Height="Auto" Margin="10,10,26.667,107.667" VerticalAlignment="Stretch" Width="Auto">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="200" Header="Name" DisplayMemberBinding="{Binding Name}"/>
                    <GridViewColumn Width="600" Header="Command" DisplayMemberBinding="{Binding Command}"/>
                    <GridViewColumn Width="200" Header="FileTypes">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox ItemsSource="{Binding ShellMenus}"
                                          SelectedValue="{Binding MenuName}"
                                          Margin="-6, 0, -6, 0"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView> 
```

我的问题不是显示 shellMenu 的 MenuName，而是在组合框的每个项目上显示 MyNamespace.ShellMenu。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:08:52.487

[`SelectedValue`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue.aspx)仅用于选择，[`DisplayMemberPath`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.displaymemberpath.aspx)用于显示。

```
DisplayMemberPath="MenuName" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:10:23.907

您需要`DisplayMemberPath`在`ComboBox`.

```
<ComboBox 
    ItemsSource="{Binding ShellMenus}"
    SelectedValue="{Binding MenuName}"
    DisplayMemberPath="MenuName"
    Margin="-6, 0, -6, 0"/> 
```

# mongodb - mongodb- $all 查询的列表字段索引

> ID：12176528
> 
> 赞同：1
> 
> 时间：2012-08-29T11:06:50.403
> 
> 标签：mongodb, indexing, pymongo

我正在使用 pymongo 包装器制作一个应用程序，我的架构如下：

```
{
    _id: <some_id>,
    name: <some_name>,
    my_tags: [<list_of_tags>]
} 
```

现在我想返回那些属于用户指定标签的条目。例如，我希望 my_tags 至少应为 [“college”、“USA”、“engineering”] 的条目。为此，我阅读了可以使用 $all 构造。现在我想知道的是，在 my_tags 上建立索引是否有用。对于我的应用程序，这种类型的查询被广泛使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:15:26.153

> 在 my_tags 上建立索引是否有用？对于我的应用程序，这种类型的查询被广泛使用。

是的 $all 将使用一个索引，所以在那里创建一个索引仍然很好，但是仍然可以对其进行优化：[https](https://jira.mongodb.org/browse/SERVER-5331) ://jira.mongodb.org/browse/SERVER-5331和[https://jira。 mongodb.org/browse/SERVER-1000](https://jira.mongodb.org/browse/SERVER-1000)

通常，文档只会在某些内容无法使用索引时向您发出警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:10:24.883

$all 查询的语法是：

```
db.collection.find({'my_tags': {'$all': ['college', 'USA', 'engineering']}}) 
```

文档可在以下位置找到：

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all)

# umbraco - 发布后指向文档的链接为空

> ID：12176529
> 
> 赞同：0
> 
> 时间：2012-08-29T11:06:53.493
> 
> 标签：umbraco

任何人都可以帮助解决以下问题吗？

（Umbraco 版本 4.0.2.1）

发布新站点及其子页面后，文档链接为空白，并且对于每个已发布的页面（包括 root），替代链接只是“N/A”。当我在浏览器中打开 www.123.com 时，它只会显示来自旧站点的旧内容，而不是来自新站点的新内容。

（www.123.com 是一个虚拟网址）

内容树如下：

* * *

内容

-- 新站点（已发布并分配给 www.123.com）

```
 -- New sub folder #1

    -- New sub pages

 -- New sub folder #2

    -- New sub pages 
```

-- 旧网站（未发布且未从 www.123.com 分配）

```
 -- Old sub pages 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:35:37.130

“旧站点”是否在内容窗格中的“新站点”之前直观地列出？如果是这样，您可能需要重新排序。

您也可以尝试重建 Umbraco 缓存。访问：

YOURDOMAIN/Umbraco/dialogs/republish.aspx?xml=true 并单击重新发布

（有关更多信息，请参阅[http://our.umbraco.org/wiki/reference/api-cheatsheet/publishing-and-republishing ）](http://our.umbraco.org/wiki/reference/api-cheatsheet/publishing-and-republishing)

# javascript - 在 Firefox 中自动保存文件

> ID：12176530
> 
> 赞同：0
> 
> 时间：2012-08-29T11:07:02.367
> 
> 标签：javascript, firefox, firefox-addon

我正在尝试找到一种方法，我们可以使用 JS 在 Firefox 中自动保存文件。到目前为止，我在 Windows 桌面上使用 FireShot 的方式是：

```
var element = content.document.createElement("FireShotDataElement");
element.setAttribute("Entire", EntirePage);
element.setAttribute("Action", Action);
element.setAttribute("Key", Key);
element.setAttribute("BASE64Content", "");
element.setAttribute("Data", Data);
element.setAttribute("Document", content.document);
if (typeof(CapturedFrameId) != "undefined")
  element.setAttribute("CapturedFrameId", CapturedFrameId);
content.document.documentElement.appendChild(element);
var evt = content.document.createEvent("Events");
evt.initEvent("capturePageEvt", true, false);
element.dispatchEvent(evt); 
```

但问题是它会打开一个对话框来确认本地驱动器位置的详细信息。有没有办法可以硬编码本地驱动器存储位置并自动保存文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:29:41.767

如果您正在创建 Firefox 插件，那么[FileUtils](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/FileUtils.jsm)和[NetUtil.asyncCopy](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/NetUtil.jsm#asyncCopy%28%29)是您的朋友：

```
Components.utils.import("resource://gre/modules/FileUtils.jsm");
Components.utils.import("resource://gre/modules/NetUtil.jsm");

var TEST_DATA = "this is a test string";
var source = Components.classes["@mozilla.org/io/string-input-stream;1"].
                 createInstance(Components.interfaces.nsIStringInputStream);
source.setData(TEST_DATA, TEST_DATA.length);

var file = new FileUtils.File("c:\\foo\\bar.txt");
var sink = file.openSafeFileOutputStream(file, FileUtils.MODE_WRONLY |
                                               FileUtils.MODE_CREATE);
NetUtil.asyncCopy(source, sink); 
```

这会将字符串异步写入`this is a test string`文件`c:\foo\bar.txt`。请注意，`NetUtil.asyncCopy`自动关闭两个流，您不需要这样做。但是，您可能希望将函数作为第三个参数传递给此方法 - 写入操作完成时将调用它。

另请参阅：[代码片段，写入文件](https://developer.mozilla.org/en-US/docs/Code_snippets/File_I_O#Writing_to_a_file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:09:08.080

每台计算机都有不同的文件结构。但是，还是有办法的。您可以将其保存到 cookie / session，这取决于您的数据想要的“永久”程度。

不要考虑写入物理文件，因为它需要额外的权限。

# python - 从 CDrom 运行 python 程序

> ID：12176533
> 
> 赞同：0
> 
> 时间：2012-08-29T11:07:15.690
> 
> 标签：python, executable

我有一些用 python 2.5.4 编写的程序，在我的计算机上使用 pygame 和 matplotlib/pyplot 库，我想知道是否可以从光盘传输和运行 python（和文件）。我尝试使用程序和 python 库、工具、DLL 等进行拖放。但程序无法运行。有谁知道我如何获得包含 python 并运行这些文件的 CD？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:09:56.640

您必须使用一些工具，例如[py2exe](http://www.py2exe.org/)。

更多信息可以在[这个](https://stackoverflow.com/questions/49146/how-can-i-make-an-exe-file-from-a-python-program)问题中找到。

# url - 我可以为我的 EC2 实例设置一个 URL 而不是 IP 吗？

> ID：12176537
> 
> 赞同：5
> 
> 时间：2012-08-29T11:07:34.837
> 
> 标签：url, amazon-ec2, amazon-web-services

我正在开发一个 AWS EC2 实例，我安装了一个 apache 服务器。是否可以为我的服务器设置网址？

我想在我的浏览器上写：

`http://myServiceWebSite`

代替

`http://23.26.31.178`

我可以通过面部名称隐藏我的服务器的 ip 吗？谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T11:10:06.713

您可以使用[域名注册商](http://en.wikipedia.org/wiki/Domain_name_registrar)（例如[Go Daddy ）设置](http://www.godaddy.com/)[DNS](http://en.wikipedia.org/wiki/Domain_Name_System) 您可以使用免费域名（例如[co.nr](http://www.freedomain.co.nr) ） ，尽管我认为 .com 每年 13 美元是一个下降的价格。

正如 ajay 所写，亚马逊确实提供了默认 DNS，但它“丑陋”，您可能不会使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T11:27:12.460

默认情况下，**每次重启机器时，它可能会分配一个不同的 IP 地址**，并且 DNS 名称很难看，因为它是基于 IP 的，并且在实例关闭时释放。

如果您的服务器被公共互联网使用，您可能至少有 3 个选择：

1.  [通过使用 EC2 控制台中的弹性 IP](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-instance-addressing.html#using-instance-addressing-eips)选项使 IP 地址成为静态，并使用一些 DNS 服务（例如 Go Daddy）注册此 IP。
2.  让您的 IP 动态分配并使用动态 DNS 服务，例如[DynDns](http://dyn.com/dns/)。
3.  如果需要使用弹性负载均衡器，请使用[AWS Route 53](https://console.aws.amazon.com/route53) DNS 服务，而不是创建指向静态 IP 地址的 A 资源记录，您可以使用指向弹性负载均衡器的[别名资源记录](http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/CreatingAliasRRSets.html)，我认为这将是如果您有超过 1 台服务器，这是**最佳选择。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-11T14:53:52.833

如果您想要一个快速而肮脏的解决方案，您可以使用 url 缩短器并使用它从您的默认 AWS DNS 生成的 url。这不是一个长期的解决方案，而只是在例如，您想快速部署一个原型并在不向他们提供 IP 地址的情况下临时将其展示给某人时使用。

# c - Openssl RSA中加密字符串的最大大小

> ID：12176538
> 
> 赞同：0
> 
> 时间：2012-08-29T11:07:36.967
> 
> 标签：c, openssl, rsa

函数 RSA_public_encrypt 要求保存加密文本的变量的长度应为 RSA_size(*rsa) 字节。现在，我需要知道要加密的文本有多大，因为如果我加密一个小字符串（例如“asdasd”），没有问题，但如果我尝试使用更大的字符串，它的一部分就是加密.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:11:21.677

假设您在谈论`[RSA_public_encrypt()](http://www.openssl.org/docs/crypto/RSA_public_encrypt.html)`，文档非常清楚地说明了这一点：

> 对于基于 PKCS #1 v1.5 的填充模式，flen 必须小于 RSA_size(rsa) - 11，对于 RSA_PKCS1_OAEP_PADDING 必须小于 RSA_size(rsa) - 41，对于 RSA_NO_PADDING 必须小于 RSA_size(rsa)。

请记住，这些是块密码，在一般情况下，您需要将输入拆分为块，并一次将一个块提供给加密函数。

# c# - 将数据作为字符串从 C# 发送到 Javascript - 如何检查字符串？

> ID：12176540
> 
> 赞同：1
> 
> 时间：2012-08-29T11:07:46.090
> 
> 标签：c#, javascript

我想将一些日期从 C# 发送到 Javascript。数据 - 它是 html 的代码。但是当我将它发送到 Javascript 时它失败了。当我输入“理想数据”时，它就起作用了。

比我很确定错误是在包含 HTML 代码的文本中。

我这样做：

```
data = data.Replace("\"", "\\\"");
data = data.Replace("\n", "\\\n");
data = data.Replace("\t", " "); 
```

但这仍然无济于事。你知道有什么库可以检查客户端 JS 的字符串是否正常吗？或者我应该怎么做才能检查字符串？

**编辑：**

错误：未捕获的语法错误：意外的令牌非法

我尝试放置的数据（示例）：

Poczta - Najlepsza Poczta, największe załączniki - WP.PL --> --> logowanie Poczta | 头条新闻 | WP.PL na komórkę | Nokaut.pl WP。homepagelink() // Logowanie do poczty WP Logowanie dla Twojego bezpieczeństwa jest szyfrowane (SSL) Login lub adres e-mail: WP.$('#login').focus(); 哈斯洛：» Nie masz konta? Załóż je » Skuteczny antyspam więcej.. Pojemność bez limitów więcej.. Poczta w komórce więcej.. Duże załączniki więcej.. NPB("006"); 北极星：宝塔 | 维兹纳查尼特雷西 | 体重指数 | 塔罗牌 | 节目电视 | 普洛特基 | 魔杰IP | 维多莫希 | 运动 | 公司头条新闻| 拉普拉西| 雷克拉玛| Biznes z WP.PL| Skontaktuj się z WP。PL| 普拉卡| Prywatność| 扎萨迪·科日斯坦| Polityka antyspamowa Zobacz wszystkie serwisy| RSS 版权所有 © 1995-2012 Wirtualna Polska

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:10:38.200

在 .NET4 中有一种新[`HttpUtility.JavaScriptStringEncode`](http://msdn.microsoft.com/en-us/library/system.web.httputility.javascriptstringencode.aspx)方法。对于早期版本，请查看此处： [Embedding JavaScript Strings from an ASP.NET Page](http://www.west-wind.com/weblog/posts/2007/Jul/14/Embedding-JavaScript-Strings-from-an-ASPNET-Page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:12:23.330

使用这个对象，我们在 C# 中序列化和反序列化对象。这是一个快速示例：

一个简单的 Employee 对象：

```
public class Employee
{
    public string Name { get; set; }
    public string Age { get; set; }
    public string ID { get; set; }   
} 
```

将它们的一些实例添加到列表中：

```
Employee oEmployee1 = 
       new Employee{Name="Pini",ID="111", Age="30"};

Employee oEmployee2 = 
      new Employee { Name = "Yaniv", ID = "Cohen", Age = "31" };
Employee oEmployee3 = 
        new Employee { Name = "Yoni", ID = "Biton", Age = "20" };

List<Employee> oList = new List<Employee>() 
{ oEmployee1, oEmployee2, oEmployee3 };

Serializing then:

System.Web.Script.Serialization.JavaScriptSerializer oSerializer = 
         new System.Web.Script.Serialization.JavaScriptSerializer();
string sJSON = oSerializer.Serialize(oList);
And here is the output:

[{"Name":"Pini","Age":"30","ID":"111"},
{"Name":"Yaniv","Age":"31","ID":"Cohen"},
{"Name":"Yoni","Age":"20","ID":"Biton"}] 
```

# rest - 如何在基于 Rails 的 RESTful API 上执行负载测试？

> ID：12176542
> 
> 赞同：2
> 
> 时间：2012-08-29T11:07:53.770
> 
> 标签：rest, load-testing, rails-api

在这里问这可能是错误的，但是谁能建议我一个工具来测试基于 Rails 的 RESTful API？我需要对此 API 执行负载或压力测试，而且我应该能够编写我需要的脚本。基本上我需要的是一个负载测试工具来使用脚本测试基于 Rails 的 REST API。PS：它也应该是免费软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:06:54.720

您可以使用[AgileLoad](http://www.agileload.com)对 RESTful API 进行负载测试。它对脚本和小测试是免费的，但我认为有超过 50 个并发用户需要付费的许可证。支持团队非常积极主动，可以帮助您使用高级脚本功能。他们的网站上还有一些教程和操作方法。

# android - 更新片段中的视图

> ID：12176546
> 
> 赞同：0
> 
> 时间：2012-08-29T11:08:20.270
> 
> 标签：android, view, fragment

> **可能重复：**
> [ViewPager Activity 通知特定事件的 Fragment](https://stackoverflow.com/questions/8956803/viewpager-activity-to-notify-a-fragment-of-a-specific-event)

我正在尝试使用片段，但遇到了这个问题。我有一个在后台运行的服务，我想更新片段中的列表视图。首先，我只是想让片段监听广播，但片段中似乎不允许 registerReceiver ？我该怎么做呢。我是否需要在主要活动中收听广播，然后将其发送到片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:17:15.703

我会为此使用活动。谷歌有一些很好的例子和主题片段和活动通信的描述。你可以在这里阅读：http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

简而言之，片段使用侦听器与活动通信，活动只是使用片段中的公共方法。

# android - Android：如何将一个viewflipper作为一个孩子嵌入到另一个Viewflipper中

> ID：12176548
> 
> 赞同：0
> 
> 时间：2012-08-29T11:08:34.493
> 
> 标签：android, database

我在运行时根据数据库中的记录数为 viewflipper 创建子视图，膨胀视图并添加到 viewflipper。在单击 viewflipper 的每个子视图时，应该有带有一些子项的 newviewflipper。如何做到这一点？

**ViewFlipper.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<ViewFlipper
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/flipper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```

**CustomViewSample.xml**

```
<?xml version="1.0" encoding="utf-8"?>        
<com.sample.MjpegView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fullscreen_video"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

**Java 代码**

```
ViewFlipper viewflipper = (ViewFlipper)findViewById(R.id.flipper);

- **livevideocount** is an integer contains no of records from table.

for(int i=0;i<livevideocount;i++)
{
  MjpegView mv = (MjpegView)inflater.inflate(R.layout.CustomViewSample,null);
  mv.setVisibility(MjpegView.VISIBLE);
  viewflipper.addView(mv);
} 
```

单击此 MjpegView 对象应生成另一个具有 3 个子视图的 viewflipper。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:34:38.560

您不应该直接将动态内容膨胀到 ViewFliper 中。

您应该将**dyna_layout**添加为`<LinearLayout />`或 添加`<RelativeLayout />`到您的`ViewFlipper.xml`中，将`dyna_layout`其视为 ViewGroup：

```
ViewGroup parent = (ViewGroup)(viewflipper.findViewById(R.id.dyna_view));

MjpegView mv = (MjpegView)inflater.inflate(R.layout.CustomViewSample, parent);
mv.setVisibility(MjpegView.VISIBLE); //may use or not
parent.addView(mv); 
```

# ios - UIButton 标签不可见

> ID：12176562
> 
> 赞同：0
> 
> 时间：2012-08-29T11:09:18.697
> 
> 标签：ios, uibutton

我正在制作一个带有 2 张图片的自定义 UIButton，但由于某种原因，标题没有显示，按钮显示正常，但没有任何标题。

```
_button = [UIButton buttonWithType:UIButtonTypeCustom];
_button.frame = CGRectMake(10, 250, 300, 43);
[_button addTarget:self action:@selector(loginClicked:) forControlEvents:UIControlEventTouchUpInside];
[_button setImage:[UIImage imageWithContentsOfFile:normalButtonImg] forState:UIControlStateNormal];
[_button setImage:[UIImage imageWithContentsOfFile:hoverButtonImg] forState:UIControlStateSelected];
[_button setTitle:@"Login" forState:UIControlStateNormal];
[_button setTitle:@"Login" forState:UIControlStateHighlighted];
[_button setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
[_button setTitleColor:[UIColor whiteColor] forState:UIControlStateHighlighted];
[self.view addSubview:_button]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:11:20.927

这两行：

```
[_button setImage:[UIImage imageWithContentsOfFile:normalButtonImg] forState:UIControlStateNormal];
[_button setImage:[UIImage imageWithContentsOfFile:hoverButtonImg] forState:UIControlStateSelected]; 
```

应该

```
[_button setBackgroundImage:[UIImage imageWithContentsOfFile:normalButtonImg] forState:UIControlStateNormal];
[_button setBackgroundImage:[UIImage imageWithContentsOfFile:hoverButtonImg] forState:UIControlStateSelected]; 
```

说明：如果为 UIButton 设置了前景图像，则图像会放置在标题上方，因此它可能会隐藏它。如果要显示图像**和**标题，则必须设置*背景*图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:13:39.100

当您设置图像时，它会覆盖标题。如果您可以将图像设置为背景图像，那将起作用。否则，您将需要通过本质上创建一个新图像来为按钮创建一个合成图像，该图像是您想要的图像，并在其上绘制了标题。

# iphone - 如何使用iphone相机检测人体

> ID：12176563
> 
> 赞同：-1
> 
> 时间：2012-08-29T11:09:25.187
> 
> 标签：iphone, ios, arrays, camera, face-detection

嗨，我想在从 iPhone 应用程序拍照时检测**人体边界。**

是否可以？如果有可能我怎么能做到这一点？有第三方类吗？

如果有人知道，请以正确的方式指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:11:06.167

这是一个大问题，对于 SO 答案来说太大了。您最好的选择是遵循其他人在[身体和面部检测问题](https://stackoverflow.com/questions/11860849/body-and-face-detection-issue)中给出的一些线索。

# java - 在我的应用程序中使用的 Firebug 类库/控件 (php/java/.net)

> ID：12176564
> 
> 赞同：0
> 
> 时间：2012-08-29T11:09:32.490
> 
> 标签：java, php, .net, firebug

是否有任何 PHP/.NET/Java 库可以在我的应用程序中使用，以获取应用于网页元素的最终 CSS 样式（在执行 css 和 js 之后）。例如，我想`<p class="summary">`在加载的 HTML 页面中获取文本颜色。

是否有一种萤火虫类库/控件（php/java/.net）可在我的应用程序中使用。虽然没有 UI 是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:13:21.677

本质上，您需要一个网络浏览器。您可能想研究 Web 浏览器的嵌入选项（我猜是 UI-less），或者您可以采用简单的方法并立即将其实现为 Chrome 或 Firefox 扩展；本质上是在浏览器内部运行，让浏览器为您完成所有解析和 CSS 工作。

# c++ - 多态性测试不起作用

> ID：12176567
> 
> 赞同：0
> 
> 时间：2012-08-29T11:09:54.020
> 
> 标签：c++, polymorphism

以下代码无法编译，但我无法理解错误：

```
#include <iostream>

class FamilyMember {

    int age;
    public:
    virtual int myage () = 0;
};

class Grandfather: public FamilyMember {

    int age;
    public:
    Grandfather (): age(60) {
        std::cout << "Im grandpa" << std::endl;
    }
    ~Grandfather () {
        std::cout << "Oh no! Grandpa is dead!" << std::endl;
    }
    virtual int myage () const {
        return age;
    }
};

class Father: public Grandfather {

    int age;
    public:
    Father (): age(40) {
        std::cout << "Im papa" << std::endl;
    }
    ~Father () {
        std::cout << "Papa is gone, noooooo!" << std::endl;
    }
    virtual int myage () const {
        return age;
    }
};

class Son: public Father {

    int age;
    public:
    Son (): age(20) {
        std::cout << "Im the kid" << std::endl;
    }
    ~Son () {
        std::cout << "Son is dead? He was so young!" << std::endl;
    }
    int myage () const {
        return age;
    }
};

int main () {

    Grandfather G;
    Father F;
    Son S;

   return 0;
} 
```

这是我得到的错误（我将代码减少到破坏它的最小数量，因此行号将不匹配）。

```
main.cc:535: error: cannot declare variable ‘G’ to be of abstract type ‘Grandfather’
main.cc:161: note:   because the following virtual functions are pure within ‘Grandfather’:
main.cc:157: note:  virtual int FamilyMember::myage()
main.cc:536: error: cannot declare variable ‘F’ to be of abstract type ‘Father’
main.cc:177: note:   because the following virtual functions are pure within ‘Father’:
main.cc:157: note:  virtual int FamilyMember::myage()
main.cc:537: error: cannot declare variable ‘S’ to be of abstract type ‘Son’
main.cc:193: note:   because the following virtual functions are pure within ‘Son’:
main.cc:157: note:  virtual int FamilyMember::myage()
make: *** [main.o] Error 1
Compilation failed. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T11:11:33.533

不同的签名。

```
virtual int myage () = 0; 
```

在儿童班。

```
virtual int myage () const 
```

也制作`pure-virtual` `myage` `const`，或`non-const`在孩子中制作此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:21:27.233

除了所有其他答案中所说的之外，C++11 还提供了特殊标识`override`，它会在编译时指出错误：

```
class Grandfather: public FamilyMember {

    // as before ...

    virtual int myage () const override {  // Error! Not overriding.
        return age;
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:12:20.077

您没有`myage`正确覆盖。

`virtual int myage () = 0;`

不是一回事

`virtual int myage () const`

on 方法将`const`使其成为不同的签名，因此是不同的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:12:50.787

这在基础中声明为纯虚拟

```
 virtual int myage () = 0; 
```

但在派生类中，函数原型是

```
 virtual int myage () const 
```

这是一个不同的函数，因此您在基类中的非常量版本没有被覆盖，编译器错误告诉您这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T11:14:39.963

“FamilyMember”和“Grandfather”类中的函数 myage 具有不同的签名。

虚拟 int myage () = 0; // 在家庭成员中

和

virtual int myage () const // 在祖父中

尝试更改类 FamilyMember 的定义如下 class FamilyMember {

```
int age;
public:
virtual int myage () const = 0;
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T11:20:55.453

同样，不要给每个子类一个`age`属性，而只使用超类具有的属性会更有意义。

```
class FamilyMember
{
    protected:
        int age;
    public:
        virtual int myage ()  const = 0;
        FamilyMember(int a) : age(a) {}
};

class Grandfather: public FamilyMember
{
    public:
        Grandfather (): FamilyMember(60) {}
        ~Grandfather () {}
        virtual int myage () const { return FamilyMember::age; }
}; 
```

# file - 批处理文件错误级别

> ID：12176574
> 
> 赞同：0
> 
> 时间：2012-08-29T11:10:29.293
> 
> 标签：file, batch-file

我想确保我的机器在 2 上没有版本所以我尝试在下面的行中获取 3 版本：

```
REG QUERY "HKEY_LOCAL_MACHINE\SOFTWARE\zup\Product" /v 3
if ERRORLEVEL  0 ( //found 3
ECHO error.>>%LogFileName% 
```

但是当它试图从注册表中获取这个字段时，我得到一个错误：“系统无法找到指定的注册表项或值”那么我该如何检查呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:15:28.557

我认为问题在于 Product 是一个 ValueName。

如果 Product 是 ValueName，你应该这样称呼它：

`REG QUERY "HKLM\SOFTWARE\zup" /v Product`

这将呼应 ValueName 产品的详细信息

* * *

你的 if 语句有问题。

`IF ERRORLEVEL 0` 匹配等于或大于 0 的返回码，这将始终匹配。

要检查缺少的 ValueName 使用`IF ERRORLEVEL 1`

注意 REG 有两个返回码。

```
0 - Successful
1 - Failed 
```

* * *

这是一些示例代码，用于检查记事本是否具有可见的状态栏。

记事本是键名，状态栏是值名。

```
@echo off
setlocal

set statusbar=0
set query_command=reg query hkcu\software\microsoft\notepad /v statusbar

:: parse output of reg
for /f "tokens=1,2,3" %%a in ('%query_command%') do (
    :: search for line starting with statusbar
    if /i "statusbar"=="%%a" (
        :: parse hex into int
        set /a statusbar=%%c
        )
    )

if %statusbar% EQU 1 (
    echo notepad's status bar is visable
    ) else (
    echo notepad's status bar isn't visable
    )

endlocal 
```

# c# - `Collection 的替代品是什么 `，对于 Windows 应用商店应用程序？

> ID：12176575
> 
> 赞同：0
> 
> 时间：2012-08-29T11:10:33.177
> 
> 标签：c#, windows-8, microsoft-metro, windows-store

Given[`List<T>`被认为是不好的基类](http://blogs.msdn.com/b/codeanalysis/archive/2006/04/27/faq-why-does-donotexposegenericlists-recommend-that-i-expose-collection-lt-t-gt-instead-of-list-lt-t-gt-david-kean.aspx)，并且`Collection<T>`似乎在~~Metro~~ Windows Store 应用程序可用的框架子集中不可用，应该使用什么基类来代替`Collection<T>`以允许可扩展性，例如在以下情况下引发事件一个项目被添加或删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:12:37.263

使用[`ICollection<T>`](http://msdn.microsoft.com/en-us/library/92t2ye13.aspx)界面。

# c# - 使用 Javascript 创建的 Cookie 无法在 C# 代码中访问....任何原因或其他选项？

> ID：12176580
> 
> 赞同：3
> 
> 时间：2012-08-29T11:10:54.273
> 
> 标签：c#, javascript, asp.net, .net, c#-4.0

我正在使用 cookie，我碰巧使用 JavaScript 创建它，但是当我在我的过程完成后尝试使该 cookie 过期时，使用 C# 代码隐藏文件，我无法找到指定的 Cookie？

这可能是什么原因？我认为在 JavaScript 中创建的 cookie 无法使用 C# 访问/可见...？真的吗？？

这是我在 JS 中创建 cookie 的代码

```
var expiryDate = new Date();
expiryDate.setTime(expiryDate.setDate(expiryDate.getDate() + 1)); // 365 days
document.cookie = "ReferedCookie=" + "clientId=" + UserGuid + "&productId=" + productId + "&Token=" + token + ";" + "expires=" + expiryDate.toGMTString() + ";"; 
```

这是我用于查找和过期 cookie 的 C# 代码

```
public void DeleteCookie(string Name) 
{
    if (System.Web.HttpContext.Current.Request.Cookies["ReferedCookie"] != null)
    {
        HttpCookie myCookie = new HttpCookie(Name);
        myCookie.Expires = DateTime.Now.AddDays(-5d);
        System.Web.HttpContext.Current.Response.Cookies.Add(myCookie);
    }        
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:02:03.800

问题可能与`Path`cookie 的属性有关。

使用 Javascript 设置 cookie 时，cookie 的默认路径将基于设置 cookie 的页面的位置。

为了使该 cookie 过期，您必须指定相同的路径。因此，如果您有一个页面：

```
http://test.foo.com/somepath/default.asxp 
```

并且您使用问题中的 javascript 代码在此页面上设置 cookie，cookie 的默认路径将是：

```
/somepath/ 
```

这意味着浏览器会将此 cookie 发送到该路径下的所有页面。它不会被发送到该路径之外的页面。

要从服务器过期此 cookie，您需要指定 cookie 的路径：

```
HttpCookie myCookie = new HttpCookie(Name);   
myCookie.Expires = DateTime.Now.AddDays(-5d);   
myCookie.Path = "/somepath/";   
System.Web.HttpContext.Current.Response.Cookies.Add(myCookie); 
```

或者，您必须在最初将 cookie 设置为（例如）时指定路径`/`：

```
document.cookie = "ReferedCookie=" + "clientId=" + UserGuid + "&productId=" + productId + "&Token=" + token + ";" + "expires=" + expiryDate.toGMTString() + ";path=/"; 
```

然后在同一路径上过期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:23:29.733

```
DeleteCookie("ReferedCookie");

public void DeleteCookie(string Name) 
{
    if (System.Web.HttpContext.Current.Request.Cookies[Name] != null)
    {
        HttpCookie myCookie = new HttpCookie(Name);
        myCookie.Expires = DateTime.Now.AddDays(-5d);
        System.Web.HttpContext.Current.Response.Cookies.Add(myCookie);
    }        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:24:21.927

很高兴为此使用一个函数，以尽量减少出错的机会：

```
function set_cookie(name, value, expires, path, domain, secure)
{
  var cookie_string = name + "=" + escape ( value );

  if(expires)
  {
    cookie_string += "; expires=" + expires.toGMTString();
  }

  if(path)
        cookie_string += "; path=" + escape ( path );

  if(domain)
        cookie_string += "; domain=" + escape ( domain );

  if(secure)
        cookie_string += "; secure";

  document.cookie = cookie_string;
} 
```

然后在你的情况下这样称呼它：

```
var value = "clientId=" + UserGuid + "&productId=" + productId + "&Token=" + token;
var expiryDate = new Date();
expiryDate.setTime(expiryDate.setDate(expiryDate.getDate() + 1)); // 365 days

set_cookie("ReferedCookie", value, expiryDate); 
```

# django - 通过 request.GET 处理日期

> ID：12176585
> 
> 赞同：1
> 
> 时间：2012-08-29T11:11:18.090
> 
> 标签：django

我通过 request.GET 发送两个日期值以过滤查询集：

```
if 'from_date' in request.GET:    
            from_date = request.GET['from_date']
            if 'to_date' in request.GET:    
                to_date = request.GET['to_date']
            else:
                to_date = datetime.date.today()        
            calls_queryset = calls_queryset.filter(contact_date__range=(from_date, to_date)) 
```

虽然 filter__range 会中断。它似乎不喜欢我发送的日期格式。

```
?from_date=08/08/2012&to_date=08/29/2012 
```

我想我必须在将它们放入范围之前将它们转换为日期，这是正确的吗？最有效的方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:02:54.057

`DateField`支持从格式`'YYYY-mm-dd'`转换为 python `datetime.date`：

```
>>> from django.db import models
>>> models.DateField().to_python('2012-08-22')
datetime.date(2012, 8, 22) 
```

因此`range`查找接受字符串作为参数：

```
>>> from django.contrib.auth.models import User
>>> print User.objects.filter(last_login__range=('1970-01-01', '2012-12-31')).values('pk').query
SELECT "auth_user"."id" FROM "auth_user" WHERE "auth_user"."last_login" 
BETWEEN 1969-12-31 16:00:00 and 2012-12-30 16:00:00 
```

请注意，这`last_login`是一个`DateTimeField`尝试将字符串值转换为`datetime.datetime`（我在 +8 时区，因此默认值`00:00:00`变为`16:00:00`前一天）

在客户端，参考[如何在 JavaScript 中输出 ISO 8601 格式的字符串？](https://stackoverflow.com/questions/2573521/how-do-i-output-an-iso-8601-formatted-string-in-javascript)以 . 格式生成日期字符串`'YYYY-mm-dd'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:17:31.767

不要在 url 中使用斜杠...替换为点或使用 yyymmdd 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:14:01.520

斜杠是不可以的，为了方便，我会转换为[UNIX 时间戳](http://en.wikipedia.org/wiki/Unix_time)

然后要将其转换为 python 可读格式，您可以执行以下操作：

```
import time
time.ctime(int(retrieved_timestamp)) 
```

# ruby - 使用 Ruby 将特定行添加到文件中

> ID：12176602
> 
> 赞同：0
> 
> 时间：2012-08-29T11:12:01.893
> 
> 标签：ruby

我正在尝试使用 ruby​​ 脚本编辑文件以添加 html 标记，例如在文件的开头和换行符，例如。
在每一行的末尾。

找不到一个明确的例子来做到这一点。

任何帮助都感激不尽。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:27:03.470

这是满足您需要的示例代码（您需要调用 modify_file 函数）：

```
def add_tag(tag, str)
  return "<#{tag}>\n#{str}\n</#{tag}>"
end

def modify_file(filename)
  content = ""
  File.open(filename){|file| content = file.read}
  content.gsub(/\n/, "</br>\n")
  content = add_tag("html", content)
  File.open(filename, "w") {|file| file.write(content)}
end 
```

# javascript - 在 Javascript 中向 Ext.form.Formpanel 添加多个按钮

> ID：12176604
> 
> 赞同：0
> 
> 时间：2012-08-29T11:12:13.327
> 
> 标签：javascript, button, handler, formpanel

我在javascript中有以下代码：

```
buttons: [{
                text: 'Yes',
                handler: function()
                        {
                        answer = 'true';
                        w.close();
                        }
            },{
                text: 'No',
                Handler: function()
                        {
                        answer = 'false';
                        w.close();
            }

        }] 
```

但只有标有“是”的按钮才会响应。有任何想法吗？

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:54:42.510

将“处理程序”拼错为“处理程序”。愚蠢的语法错误！

# python - 如何添加照片

> ID：12176607
> 
> 赞同：0
> 
> 时间：2012-08-29T11:12:28.103
> 
> 标签：python, django, django-forms

我有一个简单的模型，女巫被用作一种形式。

```
class Test(models.Model):
    name = models.CharField(max_length=100, unique=True, db_index=True)
    location = models.CharField(max_length=300)
    details = models.TextField()
    def __unicode__(self):
        return self.image.name 
```

我想将以下类 Album 作为外键添加到 Test ：

```
class Album(models.Model):
    title = models.CharField(max_length=60)
    public = models.BooleanField(default=False)
    def __unicode__(self):
        return self.title

class Tag(models.Model):
    tag = models.CharField(max_length=50)
    def __unicode__(self):
        return self.tag

class Image(models.Model):
    title = models.CharField(max_length=60, blank=True, null=True)
    image = models.FileField(upload_to="images/")
    tags = models.ManyToManyField(Tag, blank=True)
    albums = models.ManyToManyField(Album, blank=True)
    created = models.DateTimeField(auto_now_add=True)
    rating = models.IntegerField(default=50)
    width = models.IntegerField(blank=True, null=True)
    height = models.IntegerField(blank=True, null=True)
    user = models.ForeignKey(User, null=True, blank=True)
    def __unicode__(self):
        return self.image.name 
```

问题：

1.  如何将专辑类作为外键添加到类测试？

2.  如何将这种关系放在表格上？- 例如，用户正在选择多个图像进行上传，这会导致与测试类相关的唯一专辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:23:32.193

你的意思是这样的外键

```
class Test(models.Model):
    name = models.CharField(max_length=100, unique=True, db_index=True)
    location = models.CharField(max_length=300)
    details = models.TextField()
    album = models.ForeignKey(Album, null=True, blank=True)
    def __unicode__(self):
        return self.name 
```

# perl - 考虑到月份的不同天数，如何在 Perl 中返回月份？

> ID：12176610
> 
> 赞同：5
> 
> 时间：2012-08-29T11:12:38.133
> 
> 标签：perl, function, date, time, localtime

我想知道是否有一个内置的 Perl 函数可以调整日期，如果你需要一个月的时间。例如，如果日期是 31 日，如果没有 31 天，它将调整为上个月的月底。

如果不是相邻的 31 天（12 月/1 月、7 月/8 月）和 2 月，我会轻松地将其更改为第 30 天。我只想将日期存储在距当前日期一定时间的位置，例如

```
my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);

$current_date = join("-", (1900+$year), ($mon+1), $mday);
$one_month_ago = join("-", (1900+$year), ($mon), $mday);
$one_year_ago = join("-", (1899+$year), ($mon+1), $mday); 
```

我可以处理 2 月的实例，因为它只适用于年份，但如果这是在 2012 年 12 月 31 日拍摄的，那么带走一个月将意味着 2012 年 11 月 31 日，这当然不存在。我想我会在为自己复杂化之前询问是否有一个功能......谢谢:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T11:20:05.547

DateTime 不是一个内置模块，但是一旦你安装了它，它就会使这个数学变得微不足道：

```
#!/usr/bin/perl
use strict;
use warnings;

use feature qw( say );
use DateTime;

my $dt = DateTime->now;
say $dt->ymd;

$dt->truncate( to => month );

say $dt->ymd;

$dt->add( days => -1 );
say $dt->ymd;

foreach ( 1 .. 12 ) { 
    $dt->add( months => -1 );
    say $dt->ymd;
} 
```

当我今天（2012 年 8 月 29 日）运行它时，我得到以下输出：

```
[~] $ perl dt.pl 
2012-08-29
2012-08-01
2012-07-31
2012-06-30
2012-05-31
2012-04-30
2012-03-31
2012-02-29
2012-01-31
2011-12-31
2011-11-30
2011-10-31
2011-09-30
2011-08-31
2011-07-31 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-29T11:59:03.740

其他人提出了建议`DateTime`，但它非常大，非核心，并且可能很慢。

一个更简单的解决方案是使用内置`localtime`和`POSIX::mktime`函数：

```
use POSIX qw( mktime );

my @t = localtime $epoch;
$t[4] -= 2;  # $t[4] is tm_mon
my $two_months_ago = mktime @t; 
```

该`mktime()`函数专门处理非规范化值；它将处理一月减去 2 个月是上一年的十一月等事实。它将保持一天中相同的秒/分钟/小时，以及该月的同一天。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-29T11:20:52.753

如果您有机会安装模块[DateTime](http://search.cpan.org/~drolsky/DateTime-0.76/lib/DateTime.pm)。当您处理日期时，它会给您带来很多好处。

```
use strict;
use DateTime;

my $epoch = ...;
my $dt    = DateTime->from_epoch( epoch => $epoch );
$dt->subract(months => 1);

printf "%s", $dt->datetime(); 
```

# objective-c - 如何对包含abc、abc1、abc2、abc10、xyz112等对象的数组进行排序

> ID：12176616
> 
> 赞同：1
> 
> 时间：2012-08-29T11:12:50.957
> 
> 标签：objective-c, sorting

谁能建议如何对包含对象的数组进行排序，例如：

```
    "abd",
    “kkkkkkkkkkkkkkkkkk”,
    “取 1”，
    “拿 10”，
    “拿 11”，
    “拿 12”，
    “拿 13”，
    “拿 14”，
    “拿 15”，
    “拿 16”，
    “拿 17”，
    “拿 18”，
    “拿 2”，
    “拿 4”，
    “拿 5”，
    “拿 6”，
    “拿8”

```

按升序对数组进行排序，使“Take 2”排在“Take 1”之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:54:36.863

您可以在数组上使用排序选择器：

```
NSArray *sortedArray = [yourArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

# memory-leaks - Jetty 8 服务器上的内存泄漏

> ID：12176622
> 
> 赞同：4
> 
> 时间：2012-08-29T11:13:06.143
> 
> 标签：memory-leaks, jetty, finalizer, jetty-8

我已经进行了内存转储，并使用内存分析器对其进行了分析。它显示了 java.lang.ref.finalizer 对象占用了 73% 的内存。我去看看这个非常大的物体里面有什么。我发现它看起来像对象的递归轨迹。如下所示

```
Finalizer
|__ Finalizer (recursive)
|__ java.io.FileInputStream or org.eclipse.jetty.util.resource.FileResource 
```

在 FileResource 中，我找到了提取 war 文件的路径，但找不到 FileInputStream 对象中的内容。

也可以在此处找到屏幕截图。 [https://lh4.googleusercontent.com/-uZTZ031DlqI/UD33kMskuZI/AAAAAAAABYo/eOrqw65k_Mw/s1179/summary.png](https://lh4.googleusercontent.com/-uZTZ031DlqI/UD33kMskuZI/AAAAAAAABYo/eOrqw65k_Mw/s1179/summary.png)

[https://lh6.googleusercontent.com/-yWBPUV_71js/UD33kAYYDEI/AAAAAAAABYk/J9fF_WwOeO4/s1074/details.png](https://lh6.googleusercontent.com/-yWBPUV_71js/UD33kAYYDEI/AAAAAAAABYk/J9fF_WwOeO4/s1074/details.png)

请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:04:42.483

这本身不是泄漏。请阅读以下内容：[http](http://www.oracle.com/technetwork/articles/javase/finalization-137655.html) ://www.oracle.com/technetwork/articles/javase/finalization-137655.html关于 JVM 中的终结机制。

如果创建了太多 finalazble 对象（在您的情况下为 FileInputStream），终结器可能会成为问题。您可以尝试减少堆大小，以便垃圾收集器更频繁地运行并更快地处理它们。

或者，如果可能，最好减少对 FileInputStreams 的使用。

# rest - 如何使用 REST 或 SOAP 更改 Amazon S3 对象的键/名称？

> ID：12176624
> 
> 赞同：3
> 
> 时间：2012-08-29T11:13:09.630
> 
> 标签：rest, soap, amazon-s3, amazon-web-services

如何使用 REST 或 SOAP 更改 Amazon S3 对象的**键/名称？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:06:34.103

重命名对象的唯一方法是将旧对象复制到新对象，并在新副本上设置新名称。

您需要的 REST 调用在此处进行了详细[说明](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectCOPY.html)。

句法

```
PUT /destinationObject HTTP/1.1
Host: destinationBucket.s3.amazonaws.com
x-amz-copy-source: /source_bucket/sourceObject
x-amz-metadata-directive: metadata_directive
x-amz-copy-source-if-match: etag
x-amz-copy-source-if-none-match: etag
x-amz-copy-source-if-unmodified-since: time_stamp
x-amz-copy-source-if-modified-since: time_stamp
<request metadata>
Authorization: signatureValue
Date: date 
```

> PUT 操作的这种实施会创建已存储在 Amazon S3 中的对象的副本。PUT 复制操作与执行 GET 然后执行 PUT 相同。添加请求标头 x-amz-copy-source 会使 PUT 操作将源对象复制到目标存储桶中。

但是请记住现有的 ACL：

> 复制对象时，您可以保留大部分元数据（默认）或指定新元数据。但是，ACL 不会被保留，而是为发出请求的用户设置为私有的。

# exchangewebservices - EWS 缺少必需的属性“遍历”

> ID：12176625
> 
> 赞同：1
> 
> 时间：2012-08-29T11:13:12.067
> 
> 标签：exchangewebservices, traversal

我遇到了 EWS 问题（*Exchange Webservice*）

### 我发送请求`FindFolders`

```
<?xml version="1.0"?>
<soap12:Envelope xmlns:soap12="http://schemas.xmlsoap.org/soap/envelope" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding" xmlns:M="http://schemas.microsoft.com/exchange/services/2006/messages" soap12:encodingStyle="http://www.w3.org/2003/05/soap-encoding" xmlns:T="http://schemas.microsoft.com/exchange/services/2006/types">
 <soap12:Body>
  <M:FindFolder>
   <request SOAP-ENC:id="1" xsi:type="M:FindFolder" Traversal="Deep">
    <FolderShape xsi:nil="true"/>
    <IndexedPageFolderView SOAP-ENC:id="2" xsi:type="T:IndexedPageViewType" Offset="0" BasePoint="Beginning"/>
    <ParentFolderIds xsi:nil="true"/>
   </request>
   <Impersonation xsi:nil="true"/>
   <S2SAuth xsi:nil="true"/>
   <MailboxCulture xsi:type="xsd:string">de-DE</MailboxCulture>
   <RequestVersion SOAP-ENC:id="3" xsi:type="T:RequestServerVersion"   Version="Exchange2007_SP1"/>
  </M:FindFolder>
 </soap12:Body>
</soap12:Envelope> 
```

### 并从服务器获取以下 xml

```
 <?xml version="1.0"?>
    <soap11:Envelope xmlns:soap11="http://schemas.xmlsoap.org/soap/envelope/">
     <soap11:Header>
      <t:ServerVersionInfo MajorVersion="8" MinorVersion="3" MajorBuildNumber="245" MinorBuildNumber="0" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types" />
     </soap11:Header>
     <soap11:Body>
      <soap11:Fault>
       <faultcode>soap11:Client</faultcode>
       <faultstring>The request failed schema validation: The required attribute 'Traversal' is missing.</faultstring>
       <detail>
        <e:ResponseCode xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors">ErrorSchemaValidation</e:ResponseCode>
        <e:Message xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors">

The required attribute 'Traversal' is missing.

        </e:Message>
        <e:Line xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors">2
        </e:Line>
        <e:Position xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors">446
        </e:Position>
       </detail>
      </soap11:Fault>
     </soap11:Body>
    </soap11:Envelope> 
```

那么为什么服务器说 Traversal 丢失了？

（*我也用`T:Traversal = Deep` T: 测试了它的类型的命名空间条目*）

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:24:58.723

[`Traversal`](http://msdn.microsoft.com/en-us/library/exchange/aa564962%28v=exchg.140%29.aspx)在`FindFolder`元素上[是必需的。](http://msdn.microsoft.com/en-us/library/exchange/aa564962%28v=exchg.140%29.aspx)尝试将其从...

```
<M:FindFolder> 
   <!-- ... --> 
```

对此...

```
<M:FindFolder Traversal="Deep"> 
   <!-- ... --> 
```

该`Traversal`属性[必须遵循以下 XSD 架构](http://www.jarvana.com/jarvana/view/org/jasig/portlet/CalendarPortlet/2.0.0/CalendarPortlet-2.0.0-javadoc.jar!/com/microsoft/exchange/types/FolderQueryTraversalType.html)：

```
<simpleType name="FolderQueryTraversalType">
   <restriction base="{http://www.w3.org/2001/XMLSchema}string">
     <enumeration value="Shallow"/>
     <enumeration value="Deep"/>
     <enumeration value="SoftDeleted"/>
   </restriction>
 </simpleType> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:22:19.400

我试过跟随星座

```
<M:FindFolder M:Traversal="DEEP>
The request failed schema validation: The 'http://schemas.microsoft.com/exchange/services/2006/messages:Traversal' attribute is not declared.

<M:FindFolder T:Traversal="DEEP>
The request failed schema validation: The 'http://schemas.microsoft.com/exchange/services/2006/types:Traversal' attribute is not declared.

<M:FindFolder Traversal="DEEP">

The request failed schema validation: The 'Traversal' attribute is invalid - The value 'DEEP' is invalid according to its datatype 'http://schemas.microsoft.com/exchange/services/2006/types:FolderQueryTraversalType' - The Enumeration constraint failed. 
```

# java - 使用厨师安装java

> ID：12176627
> 
> 赞同：2
> 
> 时间：2012-08-29T11:13:12.477
> 
> 标签：java, ruby, chef-infra

我知道如何使用终端在 linux 机器上安装 java。但我想使用 Chef Framework 自动安装。我有两台机器 M1 和 M2。我在机器 M1 上，想在机器 M2 上安装 java。这就是我在使用终端时所做的......

首先我`SSH`进入机器M2，在我做以下事情之后......（在这里我从第三方存储下载java文件。）

```
Step1:-
cd setup

step2:-
wget http://downloads.company.com/downloads/DevTools/jdk/6.0/jdk-6u31-linux-i586.bin

Step3:-
chmod +x jdk-6u31-linux-i586.bin

Step4:-
yes | ./jdk-6u31-linux-i586.bin

Step5:-
cd /usr/bin

Step6:-
mv java javaorg

Step7:-
cd /usr

Step8:-
ln -s /home/harish/setup/jdk1.6.0_31 java

Step9:-
echo 'export PATH=$PATH:/usr/java/bin' > /etc/profile.d/alljava.sh;echo 'export JAVA_BINDIR=/usr/java/bin' >> /etc/profile.d/alljava.sh;echo 'export JAVA_ROOT=/usr/java' >> /etc/profile.d/alljava.sh;echo 'export JAVA_HOME=/usr/java' >> /etc/profile.d/alljava.sh;echo 'export JRE_HOME=/usr/java/jre' >> /etc/profile.d/alljava.sh

Step10:-
source /etc/profile.d/alljava.sh

Step11:-
echo $JAVA_HOME

Step12:-
java -version 
```

我有以下问题：

1.  问题的类别是什么（chef-solo 或 shef-server）
2.  我需要安装机器 M2 吗？
3.  [我已经从GitHub](https://github.com/opscode/cookbooks/tree/master/java)下载了 JAVA 食谱，但我不知道该怎么做。

我已经编写了一些用于在同一台机器上安装 java 的代码.. 但它也无法正常工作.. 代码：

```
 #cookbook/java/recipe/default.rb    

    *####This will install JAVA on machine M1######*

    execute "copy" do
      cwd "/home/user/setup"
      command "wget http://downloads.company.com/downloads/DevTools/jdk/6.0/jdk-6u31-linux-i586.bin"
    end
    execute "change_mode" do
      command "chmod +x jdk-6u31-linux-i586.bin"
    end
    execute "dont_know" do
      command "yes | ./jdk-6u31-linux-i586.bin"
    end

    execute "make link" do
      command "ln -s /home/harish/setup/jdk1.6.0_31 java"
    end

    java_home = "export JAVA_HOME=/usr/java/jdk1.6.0_31"
    path = "export PATH=$PATH:JAVA_HOME/bin"

    file "/etc/profile" do
      content "#{java_home}\n#{path}"
      owner "root"
    end 
```

但是这段代码给出了一些重要的信息..（错误）。任何人都可以帮助解决这个问题，以及如何使用下载的 JAVA 食谱。谢谢。:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-09T01:26:10.490

这是一个过时的问题，但我会提供一个答案，以防有人偶然发现这个问题。

Opscode 有一本他们维护的 Java 食谱，可以安装 OpenJDK 或 Oracle JDK。它可以在 opscode 社区网站上[找到](http://community.opscode.com/cookbooks/java)。

您可以通过向食谱的 metadata.rb 添加依赖项来使用它：

```
depends "java",     "~> 1.10.2" 
```

并在食谱的 default.rb 中包含食谱：

```
include_recipe "java" 
```

# php - 简单的 afterSave 方法在 Yii 中不起作用

> ID：12176631
> 
> 赞同：3
> 
> 时间：2012-08-29T11:13:38.837
> 
> 标签：php, mysql, activerecord, yii

我想通过方法更新插入的原始字段`afterSave`，所以我在驱动程序模型中开发以下代码

```
protected function afterSave() {
        parent::afterSave();
        if ($this->isNewRecord) {
            $newid = self::newid($this->id);
            $this->updateByPk($this->id, new CDbCriteria(array('condition'=>'driverid = :driverid', 'params'=>array('driverid'=>  $newid))));
        }
} 
```

并在 Controller 中使用 crud 制作的方法：

```
public function actionCreate()
{
    $model=new Driver;

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Driver']))
    {
        $model->attributes=$_POST['Driver'];
        if($model->save())
            $this->redirect(array('view','id'=>$model->id));
    }

    $this->render('create',array(
        'model'=>$model,
    ));
} 
```

## 为什么保存后不起作用？

编辑：

```
 private static function CheckNumber($number) {
        $array = array(10);
        for ($i = 0; $i < 10; $i++)
            $array[$i] = 0;
        do {
            $array[$number % 10]++;
            $number /= 10;
        } while ((int) ($number / 10 ) != 0);
        $array[$number]++;

        for ($i = 0; $i < 10; $i++)
            if ($array[$i] > 1)
                return false;
        return true;
    }

public static function newid($id) {
    while (self::CheckNumber($id) == FALSE) {
        $id++;
    }
    return $id;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:53:01.177

你的 updateByPk 搞砸了..

[检查文档](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#updateByPk-detail)

由于不清楚你想做什么..所以我假设你想通过`self::newid($this->id);`刚刚插入的行的结果更新 driver_id 值..

你应该做的是：

```
protected function afterSave() {
    parent::afterSave();
    if ($this->isNewRecord) {
        $newid = self::newid($this->id);
        $this->driverid = $new_id;
        $this->isNewRecord = false;
        $this->saveAttributes(array('driverid'));
    }
} 
```

是的，你是对的`afterSave()`

> isNewRecord 即使在创建新记录后也为真，但在第一次之后，它总是为假..

[来自 Yii 论坛 由强自己说..](http://www.yiiframework.com/forum/index.php/topic/2982-ar-isnewrecord-and-aftersave/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:24:44.237

正如 Rajat 正确指出的那样，您`updateByPk();`是不正确的。您可以改为使用此行来更新`driverid`新创建记录的字段：

```
$this->updateByPk($this->id,array('driverid'=>$newid)); 
```

所以你的整个`afterSave()`变成了这样：

```
protected function afterSave() {
    parent::afterSave();
    if ($this->isNewRecord) {
        $newid = self::newid($this->id);
        $this->updateByPk($this->id,array('driverid'=>$newid));
    }
} 
```

`saveAttributes()`最终来电`updateByPk()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:22:37.403

如果插入成功，“CActiveRecord”中的 insert 方法将“isNewRecord”属性设置为“false”。

因此，afterSave 方法中的“if ($this->isNewRecord)”条件始终为 false，程序永远不会在此条件下执行 updateByPk 方法。这就是为什么您的 afterSave 不起作用的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-21T05:30:51.023

```
public function afterSave(){
        if($this->isNewRecord) {
            $transaction_entry = new TransactionEntry;
            $transaction_entry->branch_id = 1;
            $transaction_entry->date_of_transaction = $this->bill_date;
            $transaction_entry->account_category_id = 1;
            $transaction_entry->description = $this->student->admission_no ."-".$this->course->course_name."-".$this->fee_month."/".$this->fee_year;
            $transaction_entry->amount = $this->total_amount;
            $transaction_entry->save();
        } 
```

# symfony - FOS BUNDLE 使用 Fr3d Bundle 引发错误

> ID：12176633
> 
> 赞同：1
> 
> 时间：2012-08-29T11:13:41.147
> 
> 标签：symfony, fosuserbundle, fr3dldapbundle

我使用了 FOS USER BUNDLE 和 Fr3d LDAP 包。当我尝试登录时，我收到了错误

> 无法识别的字段：usernameCanonical

我需要你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:59:12.390

似乎您的用户类不是从 FOS 用户的基类扩展而来的。

```
use FOS\UserBundle\Entity\User as BaseUser;
use FR3D\LdapBundle\Model\LdapUserInterface;

class User extends BaseUser implements LdapUserInterface 
```

# sql - 更新触发器未按预期工作

> ID：12176640
> 
> 赞同：-1
> 
> 时间：2012-08-29T11:14:15.953
> 
> 标签：sql, sql-server-2008, triggers

我有以下触发器：

```
 INSTEAD OF UPDATE
AS

BEGIN
SET NOCOUNT ON;

        INSERT INTO [BUCHUNG] (BOOKUID, BOOKVERNR, BUCHUNGSART_ID, VERANSTALTER, PERSONAL_ID, 
        OPTIONSNUMMER, BUCHUNGSSTATUS, PERSONENZAHL, SERIE, THEMA, STORNO, UPDATE_DATE, UPDATE_USER, BEMERKUNG, V_EMAIL, V_TELEFON,
        KOSTENSTELLE, SERIENBOOKUID, THEMA_ENABLED, ABTEILUNG, LIEFERRAUM, ABRECHNUNG, KSTR, RECHKONTO, RECHDST, URSPRUNG_ORIGINAL, ORIGINAL_ID)

        SELECT i.BOOKUID, '0', i.BUCHUNGSART_ID, i.VERANSTALTER, i.PERSONAL_ID,
        i.OPTIONSNUMMER, i.BUCHUNGSSTATUS, i.PERSONENZAHL, i.SERIE, i.THEMA, i.STORNO, GETDATE(), i.UPDATE_USER, i.BEMERKUNG, i.V_EMAIL, i.V_TELEFON,
        i.KOSTENSTELLE, i.SERIENBOOKUID, i.THEMA_ENABLED, i.ABTEILUNG, i.LIEFERRAUM, i.ABRECHNUNG, i.KSTR, i.RECHKONTO, i.RECHDST, i.URSPRUNG_ORIGINAL,
        i.ORIGINAL_ID

        FROM INSERTED i 
        JOIN DELETED d ON i.ID = d.ID
        WHERE i.BOOKVERNR <> d.BOOKVERNR

        IF UPDATE (BOOKVERNR)

        UPDATE b
        SET BOOKVERNR = i.BOOKVERNR 
        FROM BUCHUNG b
        JOIN INSERTED i ON i.ID = b.ID

SET NOCOUNT OFF;      
END 
```

如果原始行发生更改，触发器会复制具有新 ID 的整行。到目前为止，它工作正常。但是出了点问题，因为 PERSONENZAHL_EXTERN 和 RECHKST 不正确。

看图片： [![图片](../Images/482ef656312d57156fe7b853a4790d13.png)](https://i.stack.imgur.com/U4Egr.png)

第一行是旧行。第二行是插入的行。我不知道出了什么问题。也许你可以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:22:17.130

您的插入语句只是缺少这两列。添加它们，您将拥有自己的价值观。

# ruby-on-rails - 回滚一切

> ID：12176641
> 
> 赞同：1
> 
> 时间：2012-08-29T11:14:20.413
> 
> 标签：ruby-on-rails, database, git, heroku, rollback

我将很快对生产应用程序进行更改，我想知道如何回滚对数据库和代码的所有更改。我认为使用 pgbackups 和如果需要 heroku db:push 和 pull 将回滚数据库，但是代码呢？有没有办法使用 git 来做到这一点，或者只是复制整个文件夹并在出现错误时将其复制回来并再次上传所有内容？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:23:53.987

要管理您的代码，请使用[git tags](http://git-scm.com/book/en/Git-Basics-Tagging)。

1.  找到当前生产中的代码的提交并标记它。
2.  向您打算推送到生产的 HEAD 提交添加新标签

如果代码需要回滚，您可以在推送到 heroku 期间定位较旧的标签。

您可以运行`git log`以查看提交的历史记录。查找在您最后一次投入生产之前所做的提交。找到该提交的哈希*（与日志中的 git 消息在同一行）*并标记它

```
git tag -a v0.1 THEHASH 
```

现在标记你的`HEAD`

```
git tag -a v0.2 
```

现在推送到heroku

```
git push -f heroku v0.2^{}:master 
```

如果事情变糟，回滚到`v.0.1`

```
git push -f heroku v0.1^{}:master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:33:04.163

您可以执行纯 git 工作流程，但 heroku 确实支持发布。

`heroku releases`将列出您的所有版本。`heroku releases:rollback v1`将创建一个新版本，其中包含与 v1 版本一样的 slug。

这和基于 git 的回滚都不会对您的数据进行任何更改，因此如果运行数据迁移，它们也必须手动回滚。

# jquery - 用于交互式地图的 Jquery 或 HTML5？

> ID：12176642
> 
> 赞同：-4
> 
> 时间：2012-08-29T11:14:25.827
> 
> 标签：jquery, map, html5-canvas

我想在这里创建一个像这样的可缩放交互式地图[http://www.greekpropertyexchange.com/](http://www.greekpropertyexchange.com/)

最好使用什么，Jquery 或 HTML5，为什么？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:06:12.297

我会使用 OpenLayers，一个 javascript 映射库。然后，您可以拥有一个完全平滑的缩放和平移地图（如谷歌地图，但免费），或者具有与该站点相同的行为，用户单击一个区域以缩放到新区域。

我不知道它是否使用 jQuery 或 HTML5 或 Canvas 或什么。我只知道它有效。查看[http://www.openlayers.org/](http://www.openlayers.org/)上的示例- 需要一些 Javascript 技能才能将这样的应用程序组合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:16:45.250

我会同时使用两者，因为没有 HTML 的 jQuery 不会提供非常好的用户体验。并且在没有 javascript 的情况下使用 HTML 将使这个项目变得不可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:17:36.080

jQuery 和 html5 不是替代品，它们可以一起使用。该示例是在 Flash 中完成的，但我确信它可以使用 html5 画布和 javascript 来完成。

# gitolite - gitolite：如何防止更改管理员仓库的权限？

> ID：12176644
> 
> 赞同：1
> 
> 时间：2012-08-29T11:14:36.773
> 
> 标签：gitolite

有没有办法阻止我希望能够添加存储库和修改权限的用户更改 gitolite-admin 的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:20:01.030

gitolite-admin 存储库通常仅`RW`由 gitolite 管理员帐户提供。

```
repo gitolite-admin
    RW+     =   gitoliteadm 
```

即任何其他用户都看不到它。
因此他们将无法克隆该 repo，并访问`gitolite.conf`允许他们更改任何 repo 权限的文件。

* * *

### 回购创建

现在，使用[Gitolite V3](http://sitaramc.github.com/gitolite/master-toc.html)，您可以授权用户声明新的 repo 并创建它们*，而无需*授予他们访问 gitolite-adm repo 的权限。
这被称为“**[野生回购](http://sitaramc.github.com/gitolite/wild.html)**”。

> wildrepos 功能允许您使用正则表达式模式指定访问控制规则，因此您可以通过配置文件中的一组规则来提供许多实际的 repos。
> **正则表达式模式还可以在其中包含单词 CREATOR，允许您参数化创建 repo 的用户的名称**。

```
@prof       =   u1
@TAs        =   u2 u3
@students   =   u4 u5 u6

repo    assignments/CREATOR/a[0-9][0-9]
    C   =   @students
    RW+ =   CREATOR
    RW  =   WRITERS @TAs
    R   =   READERS @prof 
```

> **注意“ `C`”权限**。
> **这是一个独立的“ `C`”，它赋予指定用户创建 repo 的权利**。不要将这与其他地方描述的“”或其变体
> 混淆，它们是关于*分支*的，*而不是*repos。`RWC`

 *** * *

### 权限管理

它被称为**[委托](http://sitaramc.github.com/gitolite/deleg.html)**：

> 委派允许您将大型 conf 文件划分为较小的 repos 组（称为 subconfs），并将管理它们的责任移交给子管理员。
> Gitolite 可以阻止一个子管理员为任何其他子管理员的存储库设置访问规则。**

# c - netStream.appendBytes() 的 FLV 关键帧的字节偏移量

> ID：12176648
> 
> 赞同：0
> 
> 时间：2012-08-29T11:14:46.933
> 
> 标签：c, actionscript-3, flv, flash-video

**简洁版本：**

我正在寻找 C 或 Actionscript 中的库或示例代码，它允许我在 FLV 文件中找到每个关键帧的字节偏移量。我知道该规范已在[http://download.macromedia.com/f4v/video_file_format_spec_v10_1.pdf](http://download.macromedia.com/f4v/video_file_format_spec_v10_1.pdf)上发布，但通过它并编写可靠的代码有望重新发明轮子；）

**更长的版本：**

在 Actionscript- 我成功地使用 netStream.appendBytes() 播放 flv 文件。但是，现在我想启用搜索。

看来我必须将流偏移更改为文件中关键帧的开头，简单地寻找文件中的任何位置都不起作用（在使用 NetStreamAppendBytesAction.RESET_SEEK 和 NetStreamAppendBytesAction.RESET_BEGIN 时都不行）

但是，我不确定如何确定它在哪里。即使文件使用 CBR 编码并且我知道关键帧的时间码，它仍然需要位于可以是任意长度的标头之后。

因此，我正在寻找 C 或 Actionscript 中的库或解决方案，它允许我在每个关键帧的文件中找到字节偏移量——这样我就可以获得精确的值，甚至可以使用 VBR

（C 将用于事先查找此信息，或者可能在运行时通过炼金术查找）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:52:51.890

使用 netStream onSeekPoint 事件： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#event:onSeekPoint](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#event:onSeekPoint)

# iphone - Iphone：如果未连接互联网，则将用户带到设置菜单

> ID：12176654
> 
> 赞同：0
> 
> 时间：2012-08-29T11:15:16.857
> 
> 标签：iphone, objective-c, settings, apple-push-notifications, reachability

我点击了这个链接[iPhone 可达性检查](https://stackoverflow.com/questions/1861656/iphone-reachability-checking) ，但如果用户没有连接到互联网，任何人都可以帮助我如何将他带到设置菜单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:24:04.427

如果您的应用程序仅支持 iOS 5 及以下目标版本，那么您可以使用以下代码来实现此目的。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

请注意，这在 iOS 5.1 中是禁用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:22:01.493

在 iOS 5.0 和 5.0.1 中，您可以使用：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

但是，在 iOS 4.3 及更早版本**以及**iOS 5.1 及更高版本中，此 URL 方案与设置应用程序无关 - 如果您希望您的应用程序在 AppStore 中被接受，除了询问用户之外，您别无选择转到设置。但是，如果越狱/非 AppStore 开发是替代方案，您可以使用私有函数来打开应用程序：

```
SBSLaunchApplicationWithIdentifier(CFSTR("com.apple.preferences"), false); 
```

该函数位于 SpringBoardServices 私有框架中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:00:24.113

我应该在你的 appdelegate 中创建一个 NSTimer 循环（例如每 30 秒）。当此方法被触发时（每 30 秒），您检查当前的互联网连接。如果此连接失败，则导航到设置视图控制器，否则您什么也不做。

# git - 当提交被压缩时识别过时的分支

> ID：12176657
> 
> 赞同：2
> 
> 时间：2012-08-29T11:15:38.230
> 
> 标签：git

我们在办公室使用监视器来显示有关 git 存储库中所有功能分支的信息。这样做的原因之一是我们知道功能分支何时“过时”（即它们的所有提交都已合并到*master*）。我们用：

```
git log --pretty=format:'%cd %s' --no-merges --abbrev-commit -n 1 --date=short master..origin/<branch> 
```

最近，我们一直在尝试通过在将功能合并回*master*时压缩提交来保持更清晰的历史记录。缺点是我们当前识别“过时”分支的方法不再有效。

是否有一个 git 命令可以用来确定是否可以安全删除分支？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:04:51.903

以下仅适用于尚未被压扁的分支，因此不适用于您的情况。在某些情况下它可能仍然有用。

好吧，你总是可以使用`git branch -d`它自己：

```
git checkout master
git branch -d <branch> 
```

该`-d`标志拒绝删除尚未合并到的分支`HEAD`，在本例中为`master`. 实际上，我将它用作[`cleanup-branches`别名](https://stackoverflow.com/a/11395096/877115)，它只是删除了我的存储库中已经在我们的生产代码库中的任何功能分支：

```
git config --global alias.cleanup-branches \
    '!git branch | grep -v "\*" | awk "{ print $1 }" | xargs git branch -d' 
```

我想出于您的目的，您可以在规范存储库上执行此命令。剩下的任何分支都处于活动状态并正在开发中。

# php - 如何在php中显示有限的单词

> ID：12176660
> 
> 赞同：2
> 
> 时间：2012-08-29T11:15:43.603
> 
> 标签：php, string

> **可能重复：**
> [拆分字符串 PHP](https://stackoverflow.com/questions/10137819/split-a-string-php)

我是 PHP 的新手。我有一个类似的字符串：

```
$string="Once the Flash message has been set, I redirect the user to the form or a list of results. That is needed in order to get the flash working (you cannot just load the view in this case… well, you can but this method will not work in such case). When comparing $result TRUE or FALSE, please notice the different value for type. I am using type=message for successful messages, and type=error for error mesages."; 
```

现在我想显示有限的单词，比如 15 或 20 only.than 我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T11:20:10.603

```
function limit_words($string, $word_limit)
{
    $words = explode(" ",$string);
    return implode(" ", array_splice($words, 0, $word_limit));
}

$content = 'Once the Flash message has been set, I redirect the user to the form or a list of results. That is needed in order to get the flash working (you cannot just load the view in this case… well, you can but this method will not work in such case). When comparing $result TRUE or FALSE, please notice the different value for type. I am using type=message for successful messages, and type=error for error mesages.' ; 

echo limit_words($content,20); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:21:00.383

这样，您可以将字符串拆分为单词，然后提取所需的数量：

```
function trimWords($string, $limit = 15)
{

    $words = explode(' ', $string);
    return implode(' ', array_slice($words, 0, $limit));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:19:37.657

尝试：

```
$string = "Once the Flash message ...";
$words  = array_slice(explode(' ', $string), 0, 15);
$output = implode(' ', $words); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:31:23.310

我之前为此创建了一个函数：

```
<?php
    /**
     * @param string $str Original string
     * @param int $length Max length
     * @param string $append String that will be appended if the original string exceeds $length
     * @return string 
     */
    function str_truncate_words($str, $length, $append = '') {
        $str2 = preg_replace('/\\s\\s+/', ' ', $str); //remove extra whitespace
        $words = explode(' ', $str2);
        if (($length > 0) && (count($words) > $length)) {
            return implode(' ', array_slice($words, 0, $length)) . $append;
        }else
            return $str;
    }

?> 
```

# iphone - AppDelegate UIWindow addSubView 在不同的viewController

> ID：12176666
> 
> 赞同：5
> 
> 时间：2012-08-29T11:15:52.587
> 
> 标签：iphone, ios, uiwindow

我正在尝试从 UIViewController 在 AppDelegate 的 UIWindow 中添加 UILabel。这就是我这样做的方式：

**AppDelegate 代码**：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
    } else {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
    }

    [self.window makeKeyAndVisible];

    self.window.rootViewController = self.viewController;

    return YES;
} 
```

**视图控制器代码**：

```
- (void)viewDidLoad
{

    UILabel *abcd=[[UILabel alloc] initWithFrame:CGRectMake(100.0, 100.0, 200.0, 40.0)];

    abcd.text=@"loading...";

    abcd.backgroundColor=[UIColor clearColor];

    [[[[UIApplication sharedApplication] delegate] window] addSubview:abcd];

    [super viewDidLoad];

} 
```

但我所看到的只是灰屏，但没有标签。我可能哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:21:28.683

你不能将 UILabel 添加到 UIWindow，你应该添加到 UIViewController。更改此行：

```
[[[[UIApplication sharedApplication] delegate] window] addSubview:abcd]; 
```

为了这：

```
[self.view addSubview:abcd]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:58:05.440

将顺序反转为

```
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

然后

尝试使用以下代码首先添加到视图而不是窗口

```
[self.view addSubview:abcd]; 
```

如果这没有显示您的标签，则视图控制器没有被加载。

如果是这样，请检查您的 xib 文件的属性。

如果连接不正确，则删除窗口分配行并检查 mainwindow.xib 文件中窗口的连接，然后它将不会加载视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T11:27:18.587

1）我建议你颠倒你最后两个代表陈述的顺序：

```
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

2）虽然您应该能够将标签添加到窗口，但这样做有点不正统。在任何情况下，尝试将标签添加到 viewController 的视图中，看看是否有效，如果有效，并且您确实想将其添加到窗口（出于某种原因），然后在此处添加注释：

```
[self.view addSubview:abcd]; 
```

如果您仍然看不到标签，则可能是视图控制器存在问题。您是否在笔尖中定义了任何东西——任何在启动时应该可见的元素？如果没有，那么添加一些东西，这样您就可以确定视图实际上正在加载。[我使用的一个技巧是将视图的背景颜色设置为红色或蓝色，因此我可以看到它们实际上已加载。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:21:01.263

也许您的视图控制器的视图覆盖了您添加的视图。将新视图添加到视图控制器的视图中：

```
[self.view addSubview:abcd]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T11:24:53.143

在 UIWindow 中添加 UILabel 后试试这个

```
 [[[[UIApplication sharedApplication] delegate] window] makeKeyAndVisible]; 
```

# objective-c - 访问子类中的主类变量值

> ID：12176668
> 
> 赞同：0
> 
> 时间：2012-08-29T11:15:53.690
> 
> 标签：objective-c, macos

我有`mainClass`和`subClass`。

主类.h：

```
@interface mainClass : NSOpenGLView {
   NSBitmapImageRep *repG;
 }
@property (nonatomic, retain) NSBitmapImageRep *repG;
@end 
```

主类.m：

```
#import "mainClass.h"

@implementation mainClass
@synthesize repG;
.....

-(void)setBitmapRepresentation {
   repG = [[NSBitmapImageRep alloc] initWithCIImage:someMyImage];
}
@end 
```

子类.h

```
#import "mainClass.h"

@interface subClass : mainClass {
   CIImage *someInputImage;
   CIFilter *myFilter;
}
@end 
```

子类.m

```
#import subClass.h

@implementation filteringFrontLayer

.......

-(void)setInputImageForFilter {
    someInputImage = [[CIImage alloc] initWithBitmapImageRep:repG];
    [myFilter setValue:someInputImage forKey:@"inputImage"];
} 
```

它不起作用。它返回空的 CIImage ( `Invalid parameter not satisfying: ciImage != nil`)。如何在我的子类中访问`repG`（位图数据）及其值（值在 mainClass 中设置）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:24:59.310

您还可以使用其访问器访问该属性：

```
someInputImage = [[CIImage alloc] initWithBitmapImageRep:[self repG]]; 
```

# java - 关于使用 onNewIntent 使用

> ID：12176672
> 
> 赞同：-2
> 
> 时间：2012-08-29T11:16:11.647
> 
> 标签：java, android, timer, notifications

如果activity的启动方式是singleTask，这个activity有通知，点击通知启动activity。有什么办法不让他调用 onNewIntent 方法……？或者调用onNewIntent方法，但是不执行我在执行中写的onNewIntent（和onCreate方法中一样）......其他调用，比如定时条件到达调用onNewIntent方法时有执行我写在onNewIntent执行方法（和 onCreate 方法一样）。

我注意到还有调用onNew，定时会调用onNew（定时传参），注意不传参。原因是如果不判断程序退出判断后通知正常启动activity（就是不让他执行我写的onNewintent的执行方法）但是这个计时超时功能失效了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:56:59.693

一直纠结如何判断onNewIntent上的通知事件还是定时事件。

我bundle pass 然后判断，后来发现了一种更简单的action判断方法，而且我刚刚改成功，只要区分通知事件还是定时事件的over使用onNewIntent就行了...

有人回答我的问题后的解决方法： [来自中文网站](http://www.eoeandroid.com/thread-195758-2-1.html)

# matlab - POSIT估计有多准确？

> ID：12176675
> 
> 赞同：0
> 
> 时间：2012-08-29T11:16:34.527
> 
> 标签：matlab, image-processing, opencv, computer-vision

假设我有一个 X 射线成像系统，图像没有失真，获得的图像分辨率为 2048*2048

1) 当我对定义的对象进行估计时，POSIT 算法将为我提供多准确？

2) 比较两个不同的 POSIT 值（通过改变定义对象的方向）是否可以让我衡量相对于对象的旋转和平移值的姿势误差？

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:37:52.767

我假设“无失真”是指源非常近似于第一点。

准确性将受到您检测和匹配对象上的点特征的程度（或者更确切地说，“在”对象中，因为您的图像是不透明度的积分）以及特征本身的深度分离程度的限制。

# javascript - 设置客户端浏览器内存

> ID：12176677
> 
> 赞同：0
> 
> 时间：2012-08-29T11:16:42.220
> 
> 标签：javascript, html, html5-canvas, browser-cache, filereader

我有一个应用程序，用户在其中从计算机上传图像，然后在画布上绘制图像。

在 chrome 和 firefox 中，我使用的是文件阅读器。但是如果用户上传了一个非常大的图像，它就无法正确加载或无法加载并且无法绘制到画布上。

我已经通过直接从计算机访问相同的文件进行了尝试，它工作正常。那么有什么方法可以增加浏览器内存，以便正确加载大图像？

或者还有什么问题！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:20:08.277

根据我的经验，您可以可靠地为您上面提到的平台押注至少 5MB。将您的数据保持在该级别以下，您应该非常安全。

阅读这篇文章。[http://diveintohtml5.ep.io/storage.html](http://diveintohtml5.ep.io/storage.html)它有一些很好的信息块，但并不完全准确，尤其是说你不能达到极限的部分。我知道一个事实，在 iPhone 上，一旦达到限制，手机会询问用户是否要允许更多空间。（有点准确，但不完全）

在 Android 平台上，堆内存限制设置为 12MB。不确定其他平台。由于您将在某种网络容器（Webkit 或其他）中运行，我不会太担心它。容器本身非常擅长管理内存和实现文件缓存以最小化它们的占用空间。

我建议您将内存优化等留到最后。谁知道，你甚至可能不需要它。不要过早优化。

PS：看Phonegap：[http ://phonegap.com/](http://phonegap.com/)

# tridion - 无法从任何其他机器上找到使用核心服务创建的项目，除非安装了 Tridion CMS

> ID：12176679
> 
> 赞同：3
> 
> 时间：2012-08-29T11:16:48.227
> 
> 标签：tridion, tridion-2011

除了安装了 Tridion CMS 的机器上，我无法找到使用核心服务创建的任何项目（模式/组件），但是当我在使用相同控制台应用程序安装了 Tridion CMS 的机器上创建任何项目时，我能够使用 TCM URI 找到该特定项目。是否需要在配置文件中定义任何配置（我认为这个问题与刷新或清除浏览器缓存无关）以及当 TCM URI 也从其他机器生成时，即使从 CMS 服务器所在的位置也无法搜索该项目安装。请建议...

更多信息：-

我正在研究 SDL Tridion 2011 GA，下面是创建我正在使用的组件的示例代码：-

```
public static string CreateComponentStack(string folderUri, string title,
                                          string schemaID)
{
    core_service.ServiceReference1.SessionAwareCoreService2010Client client = 
        new SessionAwareCoreService2010Client();
    client.ClientCredentials.Windows.ClientCredential.UserName = "myUserName";
    client.ClientCredentials.Windows.ClientCredential.Password = "myPassword";
    client.Open();

    ReadOptions readoptions = new ReadOptions();

    string TargetFolderTcmId = folderUri;
    string LinkSchemaTcmId = schemaID;
    ComponentData CurrentMigrationComponent = client.GetDefaultData(
                ItemType.Component, TargetFolderTcmId) as ComponentData;
    LinkToSchemaData SchemaToUse = new LinkToSchemaData();
    SchemaToUse.IdRef = LinkSchemaTcmId.ToString();
    CurrentMigrationComponent.Schema = SchemaToUse;
    CurrentMigrationComponent.Title = title;
    XmlDocument doc = new XmlDocument();

    doc.LoadXml("<Content xmlns='uuid:7289aba9-16de-487c-9142-f6f97dbd2571'>"+
                "</Content>");

    CurrentMigrationComponent.Content = doc.DocumentElement.OuterXml;
    string newTCMID = client.Create(CurrentMigrationComponent, readoptions).Id; 
    Console.WriteLine(CurrentMigrationComponent.Id);
    Console.ReadLine(); 
    return newTCMID; 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T11:19:58.640

该项目要么存在，要么不存在。它不是用任何你似乎正在经历的“创造环境”的知识来创造的。

您确定该项目是在您正在查看的同一出版物中创建的吗？物品是否已托运？

如果不是这样，我建议与我们分享您的代码的关键部分：可能是创建连接并在其上设置用户凭据的部分（当然，删除实际值）以及调用`Save`,`Update`或`Create`上的方法`CoreServiceClient`。

***更新***

您添加的代码对我来说看起来不错。但是您可能需要检查以下几点：

```
string newTCMID = client.Create(CurrentMigrationComponent, readoptions).Id; 
Console.WriteLine(CurrentMigrationComponent.Id); 
```

鉴于您正在***创建***一个新组件，带有的变量`CurrentMigrationComponent`具有。你得到什么价值？如果您搜索该 TCM URI（使用 GUI 中的搜索功能），它会找到任何东西吗？`Id``tcm:0-0-0``newTCMID`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T12:45:08.160

当您说“其他机器”时，您是指运行核心服务客户端控制台应用程序的其他服务器吗？检查机器是否在同一个网络域中，并且您可以从它们连接到 Tridion。还要检查是否有任何网络策略限制阻止服务器机器上的传出 http 请求。

如果您提供您得到的错误输出，这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:41:43.383

请检查您的 app.config 文件中的部分，可能是您映射到 localhost 的端点。

```
<client>
            <endpoint address="http://[ur]/webservices/CoreService.svc/basicHttp_2010"
                binding="basicHttpBinding" bindingConfiguration="basicHttp_2010"
                contract="CoreService.ICoreService2010" name="basicHttp_2010" />
            <endpoint address="http://[ur]/webservices/CoreService.svc/streamDownload_basicHttp_2010"
                binding="basicHttpBinding" bindingConfiguration="streamDownload_basicHttp_2010"
                contract="CoreService.IStreamDownload2010" name="streamDownload_basicHttp_2010" />
            <endpoint address="http://[ur]/webservices/CoreService.svc/streamUpload_basicHttp_2010"
                binding="basicHttpBinding" bindingConfiguration="streamUpload_basicHttp_2010"
                contract="CoreService.IStreamUpload2010" name="streamUpload_basicHttp_2010" />
            <endpoint address="http://[ur]/webservices/CoreService.svc/wsHttp_2010"
                binding="wsHttpBinding" bindingConfiguration="wsHttp_2010"
                contract="CoreService.ISessionAwareCoreService2010" name="wsHttp_2010">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client> 
```

# javascript - ext js网格面板滚动条不适用于jquery

> ID：12176681
> 
> 赞同：0
> 
> 时间：2012-08-29T11:16:58.227
> 
> 标签：javascript, jquery, html, extjs

我正在做一个考勤计划，我有这个要求能够删除用户，所以我决定为此使用 ext js 网格。

我的应用程序我主要使用 jquery，并且我正在使用淡入淡出方法导航到不同的链接。即我的应用程序在单个 url 上运行。
现在，当我在 ext js 网格上执行此操作时，滚动条不会显示。但通常情况下，如果没有渐变导航，则会显示滚动条这是网格的代码：

```
editableGrid = new Ext.grid.GridPanel({
            frame: true,
            id: "employeesGrid",
            renderTo: "emps",
            cm: colModel,
            sm: sm,
            store: store,
            height: 270,
            // inline toolbars
            tbar: [{
                text: 'Delete',
                tooltip: 'Click here to delete schedule billing entries',
                iconCls: 'remove',
                id: 'btnRemoveRow',
                handler: DeleteSelectedRows
            }]

        }); 
```

是的，还有一件事，我会在应用程序启动后立即加载商店。当我使用以下代码时，网格在那里，但 div 被隐藏：

```
 $("#empDetails").fadeOut("slow", function () {
    $("#reportsLink").fadeOut();
    $("#timeInAndOutLink").fadeOut();
    $("#employeeInfoLink").fadeOut();
    $("#employeesLink").fadeOut();

    $("#allEmpsDetails").fadeIn();
}); 
```

滚动条未显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:24:25.630

我面临着类似的问题。通过阅读您的问题，我想出了如何解决我的问题。它可能适用于您的代码。

我的代码在弹出窗口（div）中显示了一个网格。弹出窗口的内容由 jQuery 加载。我正在将内容加载到隐藏的 div，然后显示弹出窗口。

为了解决这个问题，我颠倒了顺序：显示弹出窗口，然后加载其内容（网格）。

# javascript - 模拟用户事件

> ID：12176692
> 
> 赞同：0
> 
> 时间：2012-08-29T11:17:33.450
> 
> 标签：javascript, events, actionscript, flash, filereference

我有一个带有文件 swf 和 HTML 按钮的网页：当我单击按钮时，我想保存（下载到我的磁盘）我的 swf 文件正在显示的当前图像（它是一种图像库）。

当按钮在我的 swf 内时，它完美地工作，但是当我通过 ExternalInterface 从 JavaScript 调用保存图像的方法时它会失败。

我验证了 JS-AS 通信（没问题），我知道`FileReference.save()`只有在用户事件触发时才有效。**可能，单击 HTML 按钮不被视为用户事件**。

除了改变任何东西（例如，在服务器端移动一些代码，将图像发送到服务器，然后下载它......），有没有办法模拟用户事件？任何其他解决方案或提示表示赞赏。

注意：我会使用 Flash 按钮，但 HTML 是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:46:44.013

## 解决方案*（或视情况而定）*

**基于闪存**

目前我会说你最好的选择是坚持在 Flash 中操作你的按钮。如果您需要将按钮从主 Flash 运行时中移出，您可以尝试使用两个 Flash 嵌入，并使用`LocalConnection`. 但是，我不建议这样做，因为`LocalConnection`要正常工作会很痛苦，并且不能保证您不会遇到跨两个实例工作的安全沙箱问题。

**基于服务器端**

您可以实现一个保存系统，该系统将涉及将图像数据发送回服务器并形成前端可以请求的实际 URL。这将允许您指定您想要下载的任何内容。这样做的缺点是它需要一个服务器（因此不适用于离线应用程序），它还需要相当多的麻烦以一种方式发送图像数据，然后才将其拉下来......

我在这里更详细地介绍了这一点：

[画布图像到图像文件](https://stackoverflow.com/questions/12195349/canvas-image-to-an-image-file/12195486#12195486)

**基于 HTML5**

目前我不会像我在评论中建议的那样推荐数据 URL 下载，因为它还不是一个完整的解决方案。但是，从好的方面来说，我会*密切关注*顶级浏览器正在实施的内容，因为这个答案可能很快就会改变。

## 工作

基本上我只是尝试通过数据 URI 实现图像下载（认为这将是解决您的问题的最佳解决方案），一切正常，而且您可以很高兴地从您的 BitmapData 对象中获取您需要的 Base64 数据。但是，问题是无法在下载时指定文件名。因此，您最终会得到相当丑陋的文件名，甚至没有正确的扩展名。

```
<a href="data:image/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEUAAAD///+l2Z/dAAAAM0lEQVR4nGP4/5/h/1+G/58ZDrAz3D/McH8yw83NDDeNGe4Ug9C9zwz3gVLMDA/A6P9/AFGGFyjOXZtQAAAAAElFTkSuQmCC">Click to Download File</a> 
```

经过一番研究后，似乎**没有可行的解决方法**，但是有一些可以实施的规范会有所帮助：

```
<a download="filename.png" href="data:image/octet-stream;...">Download File</a> 
```

下载属性正是针对我上面提到的问题而设计的，并且允许命名下载。不幸的是，我还没有找到实现它的浏览器......

## 参考

*   [关于 a 标签的下载属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#attr-hyperlink-download)
*   [更多关于 a 标签的下载属性](http://developers.whatwg.org/links.html#attr-hyperlink-download)
*   [stackoverflow : 使用数据 uri 时建议一个文件名](https://stackoverflow.com/questions/283956/is-there-any-way-to-specify-a-suggested-filename-when-using-data-uri/283982#comment12391386_6943481)
*   [stackoverflow：使用javascript强制下载图像](https://stackoverflow.com/questions/6796974/force-download-an-image-using-javascript)

# objective-c - 跳到 AVQueuePlayer 上的上一个 AVPlayerItem / 播放队列中的选定项目

> ID：12176699
> 
> 赞同：16
> 
> 时间：2012-08-29T11:17:53.997
> 
> 标签：objective-c, avplayer, skip, avqueueplayer, movieplayer

我正在播放一个电视节目，该节目使用 AVQueuePlayer 在我的项目中被分割成不同的章节。我还想提供在 AVQueuePlayer 已经在播放时跳到上一章/下一章或动态选择不同章节的可能性。

`advanceToNextItem`AVQueuePlayer 提供的跳到下一个项目没有问题，但是从队列中跳回或播放某个项目则没有任何相似之处。

所以我不太确定这里最好的方法是什么：

1.  使用 AVPlayer 而不是 AVQueuePlayer，调用`replaceCurrentItemWithPlayerItem:`at`actionAtItemEnd`播放下一个项目，然后使用“replaceCurrentItemWithPlayerItem”让用户选择某个章节

或者

2.  使用 'insertItem:afterItem:' 和 'removeAllItems' 重新组织队列或当前播放器

附加信息：我按照它们应该出现在 NSArray 中的顺序存储不同视频的路径用户应该通过按下代表章节的按钮跳转到某些章节。按钮有标签，也是数组中相应视频的索引。

希望我能说清楚吗？有没有人遇到过这种情况？如果有人知道在哪里可以买到提供该功能的优质 IOS VideoPlayerFramework，我也将不胜感激该链接。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-31T05:49:16.917

如果您希望您的程序可以播放上一个项目并从您的 playeritems(NSArray) 中播放所选项目，您可以这样做。

```
- (void)playAtIndex:(NSInteger)index
{
    [player removeAllItems];
    for (int i = index; i <playerItems.count; i ++) {
        AVPlayerItem* obj = [playerItems objectAtIndex:i];
        if ([player canInsertItem:obj afterItem:nil]) {
        [obj seekToTime:kCMTimeZero];
        [player insertItem:obj afterItem:nil];
        }
    }
} 
```

编辑： playerItems 是您存储 AVPlayerItems 的 NSMutableArray(NSArray)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T08:59:07.753

第一个答案从 AVQueuePlayer 中删除所有项目，并从作为索引 arg 传递的迭代开始重新填充队列。这将使用前一个项目（假设您传递了正确的索引）以及从该点向前的现有 playerItems 数组中的其余项目开始新填充的队列，但是它不允许多次反转，例如您在第 10 条轨道上并且想要返回并重播曲目 9，然后重播曲目 5，以上您无法完成。但在这里你可以...

```
-(IBAction) prevSongTapped: (id) sender
{
    if (globalSongCount>1){ //keep running tally of items already played
    [self resetAVQueue]; //removes all items from AVQueuePlayer

        for (int i = 1; i < globalSongCount-1; i++){
            [audioQueuePlayer advanceToNextItem];
        }
   globalSongCount--;
   [audioQueuePlayer play];

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-10T13:20:35.280

以下代码允许您跳转到您的任何项目。没有玩家前进。干净利落。playerItemList 是带有 AVPlayerItem 对象的 NSArray。

```
- (void)playAtIndex:(NSInteger)index
{
    [audioPlayer removeAllItems];
    AVPlayerItem* obj = [playerItemList objectAtIndex:index];
    [obj seekToTime:kCMTimeZero];
    [audioPlayer insertItem:obj afterItem:nil];
    [audioPlayer play];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-11T11:25:53.447

[djiovann](https://github.com/djiovann)创建了一个`AVQueuePlayer`提供此功能的子类。

你可以在[github](https://github.com/dgiovann/AVQueuePlayerPrevious)上找到它。

我还没有测试过它，但是通过浏览代码似乎可以完成工作。代码也有很好的文档记录，因此它至少应该作为功能自定义实现的一个很好的参考（我建议使用类别而不是子类化）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-13T13:13:50.960

这应该是 AVQueuePlayer 对象的责任，而不是您的视图控制器本身，因此您应该使其可重用并通过扩展公开其他答案实现，并以类似的方式使用它 advanceToNextItem() ：

```
extension AVQueuePlayer {
func advanceToPreviousItem(for currentItem: Int, with initialItems: [AVPlayerItem]) {
    self.removeAllItems()
    for i in currentItem..<initialItems.count {
        let obj: AVPlayerItem? = initialItems[i]
        if self.canInsert(obj!, after: nil) {
            obj?.seek(to: kCMTimeZero, completionHandler: nil)
            self.insert(obj!, after: nil)
        }
    }
}
} 
```

用法（您只需存储索引和对初始队列播放器项目的引用）：

```
self.queuePlayer.advanceToPreviousItem(for: self.currentIndex, with: self.playerItems) 
```

维护索引的一种方法是观察每个视频项目的 AVPlayerItemDidPlayToEndTime 通知：

```
func addDidFinishObserver() {
    queuePlayer.items().forEach { item in
        NotificationCenter.default.addObserver(self, selector: #selector(playerDidFinishPlaying), name: Notification.Name.AVPlayerItemDidPlayToEndTime, object: item)
    }
}

func removeDidFinishObserver() {
    queuePlayer.items().forEach { item in
        NotificationCenter.default.removeObserver(self, name: NSNotification.Name.AVPlayerItemDidPlayToEndTime, object: item)
    }
}

@objc func playerDidFinishPlaying(note: NSNotification) {
    if queuePlayer.currentItem == queuePlayer.items().last {
        print("last item finished")
    } else {
        print("item \(currentIndex) finished")
        currentIndex += 1
    }
} 
```

这种观察对于其他用例（进度条、当前视频计时器重置......）也非常有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-25T18:13:20.747

**斯威夫特 5.2**

```
var playerItems = [AVPlayerItem]() 
```

```
func play(at itemIndex: Int) {

    player.removeAllItems()

    for index in itemIndex...playerItems.count {
        if let item = playerItems[safe: index] {
            if player.canInsert(item, after: nil) {
                item.seek(to: .zero, completionHandler: nil)
                player.insert(item, after: nil)
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-17T05:33:39.963

如果您想使用 AVQueuePlayer 从任何索引播放歌曲。那么下面的代码可以帮助您。

```
NSMutableArray *musicListarray (add song that you want to play in queue);
AVQueuePlayer *audioPlayer;
AVPlayerItem *item;

-(void) nextTapped
{
  nowPlayingIndex = nowPlayingIndex + 1;

  if (nowPlayingIndex > musicListarray.count)
  {
  }
  else
  {
    [self playTrack];
  }
}

-(void) playback
{
  if (nowPlayingIndex < 0)
  {
  }
  else
  {
    nowPlayingIndex = nowPlayingIndex - 1;
    [self playTrack];
  }
}

-(void) playTrack
{
  @try
  {
    if (musicArray.count > 0)
    {
      item =[[AVPlayerItem alloc] initWithURL: [NSURL URLWithString:musicListarray
      [nowPlayingIndex]]];
      [audioPlayer replaceCurrentItemWithPlayerItem:item];
      [audioPlayer play];
    }
  }
  @catch (NSException *exception)
  {
  }
}

-(void) PlaySongAtIndex
{
  //yore code...
  nowPlayingIndex = i (stating index from queue)[audioPlayer play];
  [self playTrack];
} 
```

当您想播放歌曲时，此处调用 PlaySongAtIndex。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-26T09:47:06.407

@saiday 的回答对我有用，这是他回答的快速版本

```
 func play(at index: Int) {
    queue.removeAllItems()
    for i in index..<items.count {
        let obj: AVPlayerItem? = items[i]
        if queue.canInsert(obj!, after: nil) {
            obj?.seek(to: kCMTimeZero, completionHandler: nil)
            queue.insert(obj!, after: nil)
        }
    }
} 
```

# c# - 如何将 Msctf.dll 添加为 c# 项目的引用路径？

> ID：12176702
> 
> 赞同：-4
> 
> 时间：2012-08-29T11:17:59.540
> 
> 标签：c#, com

我需要在 c# 中编写一个 COM 对象才能利用我需要添加 Msctf.dll 作为对 C# 项目的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:18:58.700

右键单击项目的添加引用并浏览到 Msctf.dll 的路径

链接（注册 COM）：http: [//msdn.microsoft.com/en-us/library/ms859484.aspx](http://msdn.microsoft.com/en-us/library/ms859484.aspx)

# mysql - 重放 Mysql 复制错误

> ID：12176704
> 
> 赞同：0
> 
> 时间：2012-08-29T11:18:02.213
> 
> 标签：mysql, database-replication

我们正在运行一个标准的 Mysql 主/从复制系统，该系统已经运行了几年。事实上，我们能够通过使用从数据库（在将其变为主数据库之后）从服务器中断（导致主数据库离线）中恢复得非常好。

无论如何，导致我们问题的问题发生在我们恢复服务器并将原来的 Master 恢复为 Master 并将原来的 slave 恢复为 Slave 之后。

这是因为我是个白痴——而不是其他任何原因！

基本上，从属服务器上发生了写入——这意味着由于主键重复错误，无法复制主服务器上同一张表上的写入。

正如我所说，我的错。

我可以从从属设备中删除错误写入的记录 - 从而从从属设备中删除冲突的 ID，但我想要来自主数据库的记录。

我的问题是：我知道我可以通过跳过来自 Master 的相关查询（通过将 SQL_SLAVE_SKIP_COUNTER 设置为 1）来“修复”复制——但这意味着我会丢失来自 Master 的记录。

那么，有没有办法“重放”错误的复制写入？基本上将复制指向一个查询？

或者我是否必须经历删除我的从属设备、从我上次成功备份中重新填充它并再次将其设置为从属设备的整个过程？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:27:17.537

答案实际上是盯着我的脸（并非总是如此！）。

重复的主键错误是由我在从属设备上插入并在主设备上插入同一张表引起的 - 这意味着两个新记录具有相同的 ID。

对我来说幸运的是，我不需要在 Slave 上插入，所以我只是删除了它——这意味着只有一条具有主键值的记录。

我只需要一种方法来让复制尝试复制记录 - 这很容易。

只需重新启动奴隶！

所以：

```
mysql root:(none)>START SLAVE;
Query OK, 0 rows affected (0.03 sec)

mysql root:(none)> _ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:38:40.303

如果它是一个简单的修改/更新/...你为什么不简单地在主服务器上播放它（手动或从从属二进制日志中获取它，如果你有的话），关闭从属进程的从属进程，然后设置新的复制指针（文件和位置）在从机上（显示主机状态；在主机上），然后重新启动从机？

# jquery - 页面加载时打开第一个孩子

> ID：12176706
> 
> 赞同：0
> 
> 时间：2012-08-29T11:18:15.130
> 
> 标签：jquery, css, jquery-ui

这是我的手风琴[演示](http://jsfiddle.net/a545y/15/)。我需要默认打开第一个子元素。

使用的代码

```
 $('h3','.horizontalaccordion ul li').on('click',function() {
    $(this).closest('li').toggleClass('hover').siblings().removeClass('hover');
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:21:36.250

在你的**html**上。将类添加`hover`到第一个`li`.

```
<div class="horizontalaccordion">
    <ul>
        <li class="hover">
            <h3>Heading 1</h3>
            <div>Content For Panel 1.</div>
        </li>
        ...
    </ul>
</div> 
```

[演示](http://jsfiddle.net/ricardolohmann/a545y/27/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:23:26.797

这会不会...

```
$('h3','.horizontalaccordion ul li').on('click',function() {
    $(this).closest('li').toggleClass('hover').siblings().removeClass('hover');
});

$('.horizontalaccordion ul li:first').addClass('hover'); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:32:42.433

只需调用点击事件

```
$('h3','.horizontalaccordion ul li:first-child').click(); 
```

​ 见[小提琴](http://jsfiddle.net/gajjuthechamp/a545y/28/) [http://jsfiddle.net/gajjuthechamp/a545y/28/](http://jsfiddle.net/gajjuthechamp/a545y/28/)

我刚刚在 JavaScript 部分添加了最后一个链接

# multithreading - 批处理脚本：循环和标签

> ID：12176707
> 
> 赞同：0
> 
> 时间：2012-08-29T11:18:21.100
> 
> 标签：multithreading, batch-file, wget, simultaneous-calls

我正在尝试制作一个使用 wget 下载 5 个文本文件的脚本（在 Windows 中批处理），并对每个文件执行一些操作，所以我想用这样的循环来执行此操作

```
set i=0
:begin
set /a i=%i%+1
if %i% equ 5 exit
wget ".....file1.txt"
goto operations

:operations
stuff
stuff
goto begin 
```

*   操作包括使用 grep 和 sed 从文本中获取信息并将其保存到文本

好吧，它应该可以工作，但这需要很多时间，我希望批处理以一种有效的方式完成，因为这样它会下载一个（需要一些时间）并进行操作。我想做的是让它成为一个多线程的，我的意思是让它同时做这5个文件（下载+操作）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:26:20.463

如果您使 wget + 处理单独的批处理文件的实际过程，则可以“启动”批处理文件，该批处理文件将生成它作为子进程并在您的主批处理文件中继续，例如。

```
batchfile1.cmd
<do something really long>

batchfile2.cmd

for %%N in (a b c d e f g) do start batchfile1.cmd %%n 
```

你最终会同时运行所有的 ag - 但是你不能很容易地知道什么时候都完成了。

# android - AsyncTask 确实适用于三星 S3，但不适用于 HTC Desire

> ID：12176708
> 
> 赞同：0
> 
> 时间：2012-08-29T11:18:21.787
> 
> 标签：android

我有一个扩展 AsyncTask 的类：

```
package Logic;

public class ReadConfig extends AsyncTask<String, Integer, String> {

 ProgressBar progressBar;
 Context context;
 URL url;
 FileInputStream config;
 static CreateApplicationFolder folders;
 File file;
 DocumentBuilderFactory dbf;
 DocumentBuilder db;
 Document doc;

 SharedPreferences prefs;
 File configFile;

 public ReadConfig(Context context, ProgressBar progressBar)
        throws ParserConfigurationException, SAXException, IOException {

    this.context = context;
    this.progressBar = progressBar;

    folders = new CreateApplicationFolder(context);
    dbf = DocumentBuilderFactory.newInstance();
    db = dbf.newDocumentBuilder();
    configFile = new File(folders.getPathToNode() + "/config.xml");

    prefs = PreferenceManager.getDefaultSharedPreferences(context);
}

protected void onPreExecute() {

    progressBar.incrementProgressBy(1);

}

@Override
protected String doInBackground(String... params) {
    android.os.Debug.waitForDebugger();
    int i;

    if (!configFile.exists()) {
        sleep();
        return "noConfig";
    } else {
        try {
            doc = db.parse(configFile);
        } catch (SAXException e2) {
            Log.e("SAX: ", e2.getMessage());
        } catch (IOException e2) {
            Log.e("IO: ", e2.getMessage());
        }
        doc.getDocumentElement().normalize();

        Log.i("ROOT NODE: ", doc.getDocumentElement().getNodeName());

        NodeList listOfMail = doc.getElementsByTagName("mail");

        int totalMail = listOfMail.getLength();
        Log.i("LENGTH: ", Integer.toString(totalMail));

        for (i = 0; i < totalMail; i++) {

            Node firstMailSetting = listOfMail.item(i);
            Element e = (Element) firstMailSetting;

            if (i == 0) {

                putSharedPrefs("host", getTagValue("host", e));
                putSharedPrefs("mail", getTagValue("account", e));
                putSharedPrefs("port", getTagValue("port", e));
                putSharedPrefs("pw", getTagValue("password", e));
            } else if (i == 1) {
                putSharedPrefs("supportMail", getTagValue("account", e));
            } else if (i == 2) {
                putSharedPrefs("Tomail", getTagValue("account", e));
            }
            sleep();

        }
    }

    return "";
}

protected void onPostExecute(String result) {

    if (result.equals("noConfig")) {
        Toast.makeText(context, "No Config file was found..",
                Toast.LENGTH_LONG).show();
        Intent mainIntent = new Intent(context, MAIN.class);
        context.startActivity(mainIntent);
    } else {
        Intent mainIntent = new Intent(context, MAIN.class);
        context.startActivity(mainIntent);
    }
}

private String getTagValue(String sTag, Element eElement) {
    try {
        NodeList nlList = eElement.getElementsByTagName(sTag).item(0)
                .getChildNodes();
        Node nValue = (Node) nlList.item(0);
        return nValue.getNodeValue();
    } catch (Exception e) {
        return "";
    }

}

public void putSharedPrefs(String tag, String value) {
    SharedPreferences.Editor prefEditor = prefs.edit();
    prefEditor.putString(tag, value);
    prefEditor.commit();
}

public void sleep() {
    for (int j = 0; j < 1; j++) {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }
    }
} 
```

}

“问题”出现在以下代码行中：

```
if (!configFile.exists()) {
        sleep();
        return "noConfig"; 
```

这将向方法返回“noConfig”，该`onPostExecute`方法应显示`Toast`：

```
protected void onPostExecute(String result) {

    if (result.equals("noConfig")) {
        Toast.makeText(context, "No Config file was found..",
                Toast.LENGTH_LONG).show();
        Intent mainIntent = new Intent(context, MAIN.class);
        context.startActivity(mainIntent);
    } else {
        Intent mainIntent = new Intent(context, MAIN.class);
        context.startActivity(mainIntent);
    }
} 
```

此代码适用于三星 S3，但是当我在 HTC 上测试它时，屏幕会变黑，并且`Toast`一直保持显示而无需启动新的`Activity`. 没有错误，没有例外。有任何想法吗？

**编辑**

正在从我的初始屏幕调用 AsyncTask：

```
try {
        new ReadConfig(Splash.this, pd).execute("");
    } catch (ParserConfigurationException e) {
        Log.e("Parser: ", e.getMessage());
    } catch (SAXException e) {
        Log.e("Sax: ", e.getMessage());
    } catch (IOException e) {
        Log.e("IO: ", e.getMessage()); 
    } 
```

`pd`对象`ProgressDialog`来自 my ，下面`Layout`是基本流程：

启动画面初始化。`doInBackground`在方法中解析的 xml 文件中的一些设置。如果配置文件不存在，只需发送一条消息并启动 Main Activity。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:26:58.903

在你的行

```
new Intent(context, this.class); 
```

this.class 代表您的 ReadConfig 类，它**不是**一个 Activity，这很奇怪。你有没有从你的活动中得到这个代码（它可能是一个内部类？）

您应该尝试更改`this.class`为`WhateverActivity.class`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:47:14.097

鉴于问题与手机有关，而手机制造商倾向于改变/修补奇怪的东西，我会看看：

尝试删除： android.os.Debug.waitForDebugger();

另外，你需要 sleep()

专注于您的活动未开始的具体问题，我可能会尝试

```
Intent mainIntent = new Intent(context.getApplicationContext(), MAIN.class);
context.getApplicationContext().startActivity(mainIntent); 
```

消除关于它应该如何处理启动意图的任何歧义。您也可以从 Activity 中调用方法来处理此问题，而不是从 Async 任务中调用。

# mysql - 如何在 MySQL 中模拟数组变量？

> ID：12176709
> 
> 赞同：108
> 
> 时间：2012-08-29T11:18:24.143
> 
> 标签：mysql, arrays, variables, set, temp-tables

[MySQL](https://stackoverflow.com/q/1433978/1593077)似乎没有数组变量。我应该改用什么？

* * *

似乎有两种选择：一个**集合类型的标量**和**临时表**。我链接到的问题暗示了前者。但是使用这些而不是数组变量是一种好习惯吗？或者，如果我使用集合，那么基于集合的成语相当于`foreach`什么？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-21T20:24:30.260

好吧，我一直在使用临时表而不是数组变量。不是最好的解决方案，但它有效。

请注意，您不需要正式定义它们的字段，只需使用 SELECT 创建它们：

```
DROP TEMPORARY TABLE IF EXISTS my_temp_table;
CREATE TEMPORARY TABLE my_temp_table
    SELECT first_name FROM people WHERE last_name = 'Smith'; 
```

（另请参阅[不使用 Create Table 从 select 语句创建临时表](https://stackoverflow.com/q/5859391/1593077)。）

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-08-29T11:24:10.307

`WHILE`您可以使用循环在 MySQL 中实现此目的：

```
SET @myArrayOfValue = '2,5,2,23,6,';

WHILE (LOCATE(',', @myArrayOfValue) > 0)
DO
    SET @value = ELT(1, @myArrayOfValue);
    SET @myArrayOfValue= SUBSTRING(@myArrayOfValue, LOCATE(',',@myArrayOfValue) + 1);

    INSERT INTO `EXEMPLE` VALUES(@value, 'hello');
END WHILE; 
```

编辑：或者，您可以使用`UNION ALL`：

```
INSERT INTO `EXEMPLE`
(
 `value`, `message`
)
(
 SELECT 2 AS `value`, 'hello' AS `message`
 UNION ALL
 SELECT 5 AS `value`, 'hello' AS `message`
 UNION ALL
 SELECT 2 AS `value`, 'hello' AS `message`
 UNION ALL
 ...
); 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-02-14T09:15:54.257

尝试使用 MySql 的 FIND_IN_SET() 函数，例如

```
SET @c = 'xxx,yyy,zzz';

SELECT * from countries 
WHERE FIND_IN_SET(countryname,@c); 
```

注意：如果您使用 CSV 值传递参数，则不必在 StoredProcedure 中设置变量。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2018-02-16T13:10:22.190

现在使用**JSON 数组**将是一个明显的答案。

由于这是一个古老但仍然相关的问题，我制作了一个简短的例子。JSON 函数自 mySQL 5.7.x / MariaDB 10.2.3 起可用

与 ELT() 相比，我更喜欢这个解决方案，因为它实际上更像一个数组，并且这个“数组”可以在代码中重用。

*但要小心：它（JSON）肯定比使用临时表慢得多。它只是更方便。海事组织*

以下是如何使用 JSON 数组：

```
SET @myjson = '["gmail.com","mail.ru","arcor.de","gmx.de","t-online.de",
                "web.de","googlemail.com","freenet.de","yahoo.de","gmx.net",
                "me.com","bluewin.ch","hotmail.com","hotmail.de","live.de",
                "icloud.com","hotmail.co.uk","yahoo.co.jp","yandex.ru"]';

SELECT JSON_LENGTH(@myjson);
-- result: 19

SELECT JSON_VALUE(@myjson, '$[0]');
-- result: gmail.com 
```

这里有一个小例子来展示它在函数/过程中是如何工作的：

```
DELIMITER //
CREATE OR REPLACE FUNCTION example() RETURNS varchar(1000) DETERMINISTIC
BEGIN
  DECLARE _result varchar(1000) DEFAULT '';
  DECLARE _counter INT DEFAULT 0;
  DECLARE _value varchar(50);

  SET @myjson = '["gmail.com","mail.ru","arcor.de","gmx.de","t-online.de",
                "web.de","googlemail.com","freenet.de","yahoo.de","gmx.net",
                "me.com","bluewin.ch","hotmail.com","hotmail.de","live.de",
                "icloud.com","hotmail.co.uk","yahoo.co.jp","yandex.ru"]';

  WHILE _counter < JSON_LENGTH(@myjson) DO
    -- do whatever, e.g. add-up strings...
    SET _result = CONCAT(_result, _counter, '-', JSON_VALUE(@myjson, CONCAT('$[',_counter,']')), '#');

    SET _counter = _counter + 1;
  END WHILE;

  RETURN _result;
END //
DELIMITER ;

SELECT example(); 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-08-31T06:53:29.150

不知道数组，但是有一种方法可以将逗号分隔的列表存储在普通的 VARCHAR 列中。

当您需要在该列表中查找某些内容时，您可以使用[FIND_IN_SET()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)函数。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-01-29T12:46:33.467

```
DELIMITER $$
CREATE DEFINER=`mysqldb`@`%` PROCEDURE `abc`()
BEGIN
  BEGIN 
    set @value :='11,2,3,1,'; 
    WHILE (LOCATE(',', @value) > 0) DO
      SET @V_DESIGNATION = SUBSTRING(@value,1, LOCATE(',',@value)-1); 
      SET @value = SUBSTRING(@value, LOCATE(',',@value) + 1); 
      select @V_DESIGNATION;
    END WHILE;
  END;
END$$
DELIMITER ; 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-05-18T09:50:42.133

我知道这有点晚了，但我最近不得不解决一个类似的问题，并认为这可能对其他人有用。

**背景**

考虑下面名为“mytable”的表格：

[![起始表](../Images/7f715fc4652bd5f336e138a90ef6fb96.png)](https://i.stack.imgur.com/ATQvN.jpg)

问题是只保留最新的 3 条记录并删除 systemid=1 的任何旧记录（表中可能有许多其他记录具有其他 systemid 值）

如果您可以简单地使用语句来做到这一点，那就太好了

```
DELETE FROM mytable WHERE id IN (SELECT id FROM `mytable` WHERE systemid=1 ORDER BY id DESC LIMIT 3) 
```

但是，MySQL 尚不支持此功能，如果您尝试此操作，您将收到类似的错误

```
...doesn't yet support 'LIMIT & IN/ALL/SOME subquery' 
```

因此需要一种解决方法，即使用变量将值数组传递给 IN 选择器。但是，由于变量需要是单个值，我需要*模拟一个数组*。**诀窍是将数组创建为逗号分隔的值列表（字符串）并将其分配给变量**，如下所示

```
SET @myvar = (SELECT GROUP_CONCAT(id SEPARATOR ',') AS myval FROM (SELECT * FROM `mytable` WHERE systemid=1 ORDER BY id DESC LIMIT 3 ) A GROUP BY A.systemid); 
```

存储在@myvar 中的结果是

> 5,6,7

接下来，使用 FIND_IN_SET 选择器*从模拟数组中进行选择*

```
SELECT * FROM mytable WHERE FIND_IN_SET(id,@myvar); 
```

合并后的最终结果如下：

```
SET @myvar = (SELECT GROUP_CONCAT(id SEPARATOR ',') AS myval FROM (SELECT * FROM `mytable` WHERE systemid=1 ORDER BY id DESC LIMIT 3 ) A GROUP BY A.systemid);
DELETE FROM mytable WHERE FIND_IN_SET(id,@myvar); 
```

我知道这是一个非常具体的案例。但是，可以对其进行修改以适应变量需要存储值数组的任何其他情况。

我希望这个对你有用。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-08-01T08:05:52.223

如果你想要关联数组，也许可以创建一个包含列（键、值）的临时内存表。拥有一个内存表是最接近在 mysql 中拥有数组的东西

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-10-07T21:02:05.843

这就是我的做法。

首先，我创建了一个函数来检查 Long/Integer/whatever 值是否在以逗号分隔的值列表中：

```
CREATE DEFINER = 'root'@'localhost' FUNCTION `is_id_in_ids`(
        `strIDs` VARCHAR(255),
        `_id` BIGINT
    )
    RETURNS BIT(1)
    NOT DETERMINISTIC
    CONTAINS SQL
    SQL SECURITY DEFINER
    COMMENT ''
BEGIN

  DECLARE strLen    INT DEFAULT 0;
  DECLARE subStrLen INT DEFAULT 0;
  DECLARE subs      VARCHAR(255);

  IF strIDs IS NULL THEN
    SET strIDs = '';
  END IF;

  do_this:
    LOOP
      SET strLen = LENGTH(strIDs);
      SET subs = SUBSTRING_INDEX(strIDs, ',', 1);

      if ( CAST(subs AS UNSIGNED) = _id ) THEN
        -- founded
        return(1);
      END IF;

      SET subStrLen = LENGTH(SUBSTRING_INDEX(strIDs, ',', 1));
      SET strIDs = MID(strIDs, subStrLen+2, strLen);

      IF strIDs = NULL or trim(strIds) = '' THEN
        LEAVE do_this;
      END IF;

  END LOOP do_this;

   -- not founded
  return(0);

END; 
```

因此，现在您可以在以逗号分隔的 ID 列表中搜索 ID，如下所示：

```
select `is_id_in_ids`('1001,1002,1003',1002); 
```

您可以在 WHERE 子句中使用此函数，如下所示：

```
SELECT * FROM table1 WHERE `is_id_in_ids`('1001,1002,1003',table1_id); 
```

这是我发现将“数组”参数传递给 PROCEDURE 的唯一方法。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-11-02T16:57:43.723

我很惊讶没有一个答案提到 ELT/FIELD。

ELT/FIELD 的工作方式与数组非常相似，尤其是在您有静态数据的情况下。

FIND_IN_SET 的工作方式也类似，但没有内置的补充功能，但编写起来很容易。

```
mysql> select elt(2,'AA','BB','CC');
+-----------------------+
| elt(2,'AA','BB','CC') |
+-----------------------+
| BB                    |
+-----------------------+
1 row in set (0.00 sec)

mysql> select field('BB','AA','BB','CC');
+----------------------------+
| field('BB','AA','BB','CC') |
+----------------------------+
|                          2 |
+----------------------------+
1 row in set (0.00 sec)

mysql> select find_in_set('BB','AA,BB,CC');
+------------------------------+
| find_in_set('BB','AA,BB,CC') |
+------------------------------+
|                            2 |
+------------------------------+
1 row in set (0.00 sec)

mysql>  SELECT SUBSTRING_INDEX(SUBSTRING_INDEX('AA,BB,CC',',',2),',',-1);
+-----------------------------------------------------------+
| SUBSTRING_INDEX(SUBSTRING_INDEX('AA,BB,CC',',',2),',',-1) |
+-----------------------------------------------------------+
| BB                                                        |
+-----------------------------------------------------------+
1 row in set (0.01 sec) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-08-08T14:51:45.123

这适用于值列表：

```
SET @myArrayOfValue = '2,5,2,23,6,';

WHILE (LOCATE(',', @myArrayOfValue) > 0)
DO
SET @value = ELT(1, @myArrayOfValue);
    SET @STR = SUBSTRING(@myArrayOfValue, 1, LOCATE(',',@myArrayOfValue)-1);
    SET @myArrayOfValue = SUBSTRING(@myArrayOfValue, LOCATE(',', @myArrayOfValue) + 1);

    INSERT INTO `Demo` VALUES(@STR, 'hello');
END WHILE; 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-05-18T16:11:19.060

## 数组变量真的有必要吗？

我问是因为我最初来到这里是想添加一个数组作为 MySQL 表变量。我对数据库设计比较陌生，并试图思考如何以典型的编程语言方式来做。

但是数据库不同。我*以为*我想要一个数组作为变量，但事实证明这不是常见的 MySQL 数据库实践。

## 标准实践

数组的替代解决方案是添加一个额外的表，然后使用外键引用您的原始表。

举个例子，让我们想象一个应用程序，它跟踪一个家庭中每个人都想在商店购买的所有物品。

我最初设想的创建表的命令看起来像这样：

```
#doesn't work
CREATE TABLE Person(
  name VARCHAR(50) PRIMARY KEY
  buy_list ARRAY
); 
```

我想我设想 buy_list 是一个逗号分隔的项目字符串或类似的东西。

但是 MySQL 没有数组类型字段，所以我真的需要这样的东西：

```
CREATE TABLE Person(
  name VARCHAR(50) PRIMARY KEY
);
CREATE TABLE BuyList(
  person VARCHAR(50),
  item VARCHAR(50),
  PRIMARY KEY (person, item),
  CONSTRAINT fk_person FOREIGN KEY (person) REFERENCES Person(name)
); 
```

这里我们定义了一个名为 fk_person 的约束。它说 BuyList 中的“person”字段是一个外键。换句话说，它是另一个表中的主键，特别是 Person 表中的“名称”字段，这就是 REFERENCES 所表示的。

我们还定义了 person 和 item 的组合作为主键，但从技术上讲，这不是必需的。

最后，如果你想获取一个人列表中的所有项目，你可以运行这个查询：

```
SELECT item FROM BuyList WHERE person='John'; 
```

这为您提供了 John 列表中的所有项目。不需要数组！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-03-26T13:46:49.047

这是我使用包含元素列表的变量的解决方案。您可以在简单查询中使用它（无需使用存储过程或创建表）。

我在网站的其他地方发现了使用 JSON_TABLE 函数的技巧（它在 mysql 8 中有效，我不知道它在其他版本中有效）。

```
set @x = '1,2,3,4' ;

select c.NAME
from colors c
where 
  c.COD in ( 
    select * 
    from json_table( 
      concat('[',@x,']'),
      '$[*]' columns (id int path '$') ) t ) ; 
```

此外，您可能需要管理一个或多个变量设置为**empty_string**的情况。在这种情况下，我添加了另一个技巧（即使**x**、**y**或**x 和 y**都是空字符串，查询也不返回错误）：

```
set @x = '' ;
set @y = 'yellow' ;

select c.NAME
from colors 
where 
  if(@y = '', 1 = 1, c.NAME = @y)
  and if(@x = '', 1, c.COD) in ( 
    select * 
    from json_table(
      concat('[',if(@x = '', 1, @x),']'),
      '$[*]' columns (id int path '$') ) t) ; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-10-30T10:04:23.897

使用集合的两个版本都不适合我（用 MySQL 5.5 测试）。函数 ELT() 返回整个集合。考虑到 WHILE 语句仅在 PROCEDURE 上下文中可用，我将其添加到我的解决方案中：

```
DROP PROCEDURE IF EXISTS __main__;

DELIMITER $
CREATE PROCEDURE __main__()
BEGIN
    SET @myArrayOfValue = '2,5,2,23,6,';

    WHILE (LOCATE(',', @myArrayOfValue) > 0)
    DO
        SET @value = LEFT(@myArrayOfValue, LOCATE(',',@myArrayOfValue) - 1);    
        SET @myArrayOfValue = SUBSTRING(@myArrayOfValue, LOCATE(',',@myArrayOfValue) + 1);
    END WHILE;
END;
$
DELIMITER ;

CALL __main__; 
```

老实说，我认为这不是一个好习惯。即使它真的有必要，这也很难读，而且速度很慢。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-09-26T21:18:45.330

数组不是要高效吗？如果您只是遍历值，我认为临时（或永久）表上的游标比寻找逗号更有意义，不是吗？也更干净。查找“mysql DECLARE CURSOR”。

对于随机访问具有数字索引主键的临时表。不幸的是，您将获得的最快访问是哈希表，而不是真正的随机访问。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-09-27T20:43:44.970

看到同样问题的另一种方式。希望有帮助

```
DELIMITER $$
CREATE PROCEDURE ARR(v_value VARCHAR(100))
BEGIN

DECLARE v_tam VARCHAR(100);
DECLARE v_pos VARCHAR(100);

CREATE TEMPORARY TABLE IF NOT EXISTS split (split VARCHAR(50));

SET v_tam = (SELECT (LENGTH(v_value) - LENGTH(REPLACE(v_value,',',''))));
SET v_pos = 1;

WHILE (v_tam >= v_pos)
DO
    INSERT INTO split 
    SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(v_value,',',v_pos),',', -1);
    SET v_pos = v_pos + 1;
END WHILE;

SELECT * FROM split;

DROP TEMPORARY TABLE split;

END$$

CALL ARR('1006212,1006404,1003404,1006505,444,'); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-06-20T08:14:27.987

如果我们有一张这样的桌子

```
mysql> select * from user_mail;
+------------+-------+
| email      | user | 
+------------+-------+-
| email1@gmail |     1 | 
| email2@gmail |     2 |
+------------+-------+--------+------------+ 
```

和数组表：

```
mysql> select * from user_mail_array;
+------------+-------+-------------+
| email      | user | preferences |
+------------+-------+-------------+
| email1@gmail |     1 |           1 |
| email1@gmail |     1 |           2 |
| email1@gmail |     1 |           3 |
| email1@gmail |     1 |           4 |
| email2@gmail |     2 |           5 |
| email2@gmail |     2 |           6 | 
```

我们可以使用 CONCAT 函数将第二个表的行选择为一个数组：

```
mysql> SELECT t1.*, GROUP_CONCAT(t2.preferences) AS preferences
     FROM user_mail t1,user_mail_array t2
       where t1.email=t2.email and t1.user=t2.user
     GROUP BY t1.email,t1.user;

+------------+-------+--------+------------+-------------+
| email      | user | preferences |
+------------+-------+--------+------------+-------------+
|email1@gmail |     1 | 1,3,2,4     |
|email2@gmail |     2 | 5,6         |
+------------+-------+--------+------------+-------------+ 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-09-28T18:48:37.723

在 MYSQL 5.7.x 之后的版本中，可以使用 JSON 类型来存储数组。您可以通过 MYSQL 通过键获取数组的值。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-02-02T08:36:47.117

受函数 ELT(index number, string1, string2, string3,…) 的启发，我认为以下示例可以作为数组示例：

```
set @i := 1;
while @i <= 3
do
  insert into table(val) values (ELT(@i ,'val1','val2','val3'...));
set @i = @i + 1;
end while; 
```

希望它有所帮助。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-01-10T12:46:11.957

这是一个用于循环逗号分隔字符串的 MySQL 示例。

```
DECLARE v_delimited_string_access_index INT;
DECLARE v_delimited_string_access_value VARCHAR(255);
DECLARE v_can_still_find_values_in_delimited_string BOOLEAN;

SET v_can_still_find_values_in_delimited_string = true;
SET v_delimited_string_access_index = 0;
WHILE (v_can_still_find_values_in_delimited_string) DO
  SET v_delimited_string_access_value = get_from_delimiter_split_string(in_array, ',', v_delimited_string_access_index); -- get value from string
  SET v_delimited_string_access_index = v_delimited_string_access_index + 1;
  IF (v_delimited_string_access_value = '') THEN
    SET v_can_still_find_values_in_delimited_string = false; -- no value at this index, stop looping
  ELSE
    -- DO WHAT YOU WANT WITH v_delimited_string_access_value HERE
  END IF;
END WHILE; 
```

这使用`get_from_delimiter_split_string`此处定义的函数：[https ://stackoverflow.com/a/59666211/3068233](https://stackoverflow.com/a/59666211/3068233)

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2013-12-26T11:29:26.383

我想我可以改进这个答案。试试这个：

参数“恶作剧”是一个 CSV。IE。'1,2,3,4 ......等'

```
CREATE PROCEDURE AddRanks(
IN Pranks TEXT
)
BEGIN
  DECLARE VCounter INTEGER;
  DECLARE VStringToAdd VARCHAR(50);
  SET VCounter = 0;
  START TRANSACTION;
  REPEAT
    SET VStringToAdd = (SELECT TRIM(SUBSTRING_INDEX(Pranks, ',', 1)));
    SET Pranks = (SELECT RIGHT(Pranks, TRIM(LENGTH(Pranks) - LENGTH(SUBSTRING_INDEX(Pranks, ',', 1))-1)));
    INSERT INTO tbl_rank_names(rank)
    VALUES(VStringToAdd);
    SET VCounter = VCounter + 1;
  UNTIL (Pranks = '')
  END REPEAT;
  SELECT VCounter AS 'Records added';
  COMMIT;
END; 
```

这种方法使搜索到的 CSV 值字符串随着循环的每次迭代而逐渐变短，我相信这对于优化来说会更好。

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2019-01-24T20:15:09.450

我会为多个收藏尝试这样的事情。我是 MySQL 初学者。对函数名称感到抱歉，无法确定最好的名称。

```
delimiter //

drop  procedure init_
//
create procedure init_()
begin
  CREATE TEMPORARY TABLE if not exists 
    val_store(  
    realm  varchar(30) 
    ,  id  varchar(30) 
    ,  val   varchar(255) 
    ,  primary key ( realm , id )
    );
end;
//

drop function if exists get_
//
create function get_( p_realm varchar(30) , p_id varchar(30) )
  returns varchar(255)
  reads sql data
begin 
  declare ret_val varchar(255);
  declare continue handler for 1146 set ret_val = null;
  select val into ret_val from val_store where id = p_id;
  return ret_val;
end;
//

drop procedure if exists set_
//
create procedure set_( p_realm varchar(30) , p_id varchar(30) , p_val varchar(255) )
begin
  call init_(); 
  insert into val_store (realm,id,val) values (p_realm , p_id , p_val) on duplicate key update val = p_val;
end;
//

drop   procedure if exists remove_
//
create procedure remove_( p_realm varchar(30) , p_id varchar(30) )
begin
  call init_();
  delete from val_store where realm = p_realm and id = p_id;
end;
//

drop   procedure if exists erase_
//
create procedure erase_( p_realm varchar(30) ) 
begin
  call init_();
  delete from val_store where realm = p_realm;
end;
//

call set_('my_array_table_name','my_key','my_value');

select get_('my_array_table_name','my_key'); 
```

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2020-04-14T13:57:07.693

而不是将数据保存为数组或仅保存在一行中，您应该为收到的每个值制作不同的行。这将使它更容易理解，而不是放在一起。

* * *

## 回答 #24

> 赞同：-5
> 
> 时间：2013-03-23T13:45:35.620

你试过使用 PHP 的 serialize() 吗？这允许您将变量数组的内容存储在 PHP 理解的字符串中，并且对数据库是安全的（假设您已经先对其进行了转义）。

```
$array = array(
    1 => 'some data',
    2 => 'some more'
);

//Assuming you're already connected to the database
$sql = sprintf("INSERT INTO `yourTable` (`rowID`, `rowContent`) VALUES (NULL, '%s')"
     ,  serialize(mysql_real_escape_string($array, $dbConnection)));
mysql_query($sql, $dbConnection) or die(mysql_error()); 
```

您也可以在没有编号数组的情况下执行完全相同的操作

```
$array2 = array(
    'something' => 'something else'
); 
```

或者

```
$array3 = array(
    'somethingNew'
); 
```

# qt - 将输入从 qdialog 传输到主窗口

> ID：12176711
> 
> 赞同：0
> 
> 时间：2012-08-29T11:18:31.447
> 
> 标签：qt, qdialog, qmainwindow

在 qdialog 中，我在主窗口中输入了一些我需要的输入，我怎样才能得到它们？我的程序是这样的，我有一个必须在主窗口之前打开的 qdialog，我在那里输入一些输入并单击确定，然后使用这些输入打开 mainwinodw。

这是 dialog.cpp 代码：

```
#include "dialog.h"
#include "ui_dialog.h"

#include "vtkBMPReader.h"

// Define the length of the volume
void Dialog::bmprange()
{
// Getting some proprieties for the lenght of the volume
QString XMAX=ui->lineEdit->text();
double xMax=XMAX.toDouble();
QString YMAX=ui->lineEdit_2->text();
double yMax=YMAX.toDouble();
QString ZMAX=ui->lineEdit_3->text();
double zMax=ZMAX.toDouble();
QString XMMAX=ui->lineEdit_4->text();
double xMMax=XMMAX.toDouble();
QString YMMAX=ui->lineEdit_5->text();
double yMMax=YMMAX.toDouble();
QString ZMMAX=ui->lineEdit_6->text();
double zMMax=ZMMAX.toDouble();

if (xMax==0 || yMax==0 || zMax==0 || xMMax==0 || yMMax==0 || zMMax==0)
{
    ui->label_17->setText("Error: invalid measures");
}
else
{
// Using vtkBMPReader to read all the 128 bmp slices
  vtkBMPReader *bmp= vtkBMPReader::New();
    bmp->SetDataByteOrderToLittleEndian();
    bmp->SetFilePrefix ("/home/matt/Desktop/ouBMP/exemplo");
    bmp->SetFilePattern("%s%d.bmp");
    bmp->SetFileNameSliceSpacing(1);
    bmp->SetNumberOfScalarComponents(3);
    bmp->SetDataOrigin(0,0,0);
    bmp->SetDataSpacing(xMMax/(xMax-1.0),xMMax/(yMax-1.0),xMMax/(zMax-1.0));
    bmp->SetDataExtent(0,xMax-1.0,0,yMax-1.0,1,zMax);
    bmp->Update();
    ui->label_17->setText("Valid measures");
}
}

Dialog::Dialog(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Dialog)
{
    ui->setupUi(this);

  // Control volume measures
    // Making the lineedit objects only accept numbers
    ui->lineEdit->setValidator(new QIntValidator(this));
    ui->lineEdit_2->setValidator(new QIntValidator(this));
    ui->lineEdit_3->setValidator(new QIntValidator(this));
    ui->lineEdit_4->setValidator(new QDoubleValidator(this));
    ui->lineEdit_5->setValidator(new QDoubleValidator(this));
    ui->lineEdit_6->setValidator(new QDoubleValidator(this));
    connect(ui->lineEdit, SIGNAL(textChanged(QString)), this, SLOT(bmprange()));
    connect(ui->lineEdit_2, SIGNAL(textChanged(QString)), this, SLOT(bmprange()));
    connect(ui->lineEdit_3, SIGNAL(textChanged(QString)), this, SLOT(bmprange()));
    connect(ui->lineEdit_4, SIGNAL(textChanged(QString)), this, SLOT(bmprange()));
    connect(ui->lineEdit_5, SIGNAL(textChanged(QString)), this, SLOT(bmprange()));
    connect(ui->lineEdit_6, SIGNAL(textChanged(QString)), this, SLOT(bmprange()));
}

Dialog::~Dialog()
{
    delete ui;
}

void Dialog::changeEvent(QEvent *e)
{
    QDialog::changeEvent(e);
    switch (e->type()) {
    case QEvent::LanguageChange:
        ui->retranslateUi(this);
        break;
    default:
        break;
    }
} 
```

我怎样才能得到 bmp, xMax, ... 在主窗口中使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:45:22.317

我不会说 C++，所以很抱歉缺乏细节。这是我要做的：

*   `closeEvent`当你关闭对话框时，抓住你应该拥有的东西。如果你的对话框有一个`OK`按钮，你可以使用它的`clicked`信号。
*   将其连接到特定插槽，其功能是 (1) 检索`QLineEdit`单个对象中所有对话框的文本（`QStringList`例如 a ）和 (2) 实际关闭对话框。
*   将其内容存储`QStringList`为主窗口的属性，或者作为可以从主窗口检索的独立对象。

# c# - 单击按钮时对列表框项目进行排序

> ID：12176713
> 
> 赞同：0
> 
> 时间：2012-08-29T11:18:34.610
> 
> 标签：c#, xml, windows-phone-7

在我的 windows phone 项目中，我有一个来自 xml 的列表框绑定数据

```
<ListBox x:Name="listBox02">
    <ListBox.ItemTemplate>
         <DataTemplate>
              <StackPanel Margin="20" >
                  <TextBlock Text="{Binding Namee}"/>
                   <TextBlock Text="{Binding Examinoo}"/>
                   <TextBlock Text="{Binding Statuss}"/>
                    <!--<TextBlock Text="{Binding Idd}"/>-->
              </StackPanel>
         </DataTemplate>
    </ListBox.ItemTemplate>
 </ListBox> 
```

使用

```
XDocument loadedCustomData = XDocument.Load("PeopleCustom.xml");
var filteredData = 
    from c in loadedCustomData.Descendants("Mathima")
    where c.Attribute("Id").Value == "1"
    select new Iatriki() {
                  Namee = "Ονομα: " + c.Attribute("Name").Value,
                  Examinoo = "Εξάμηνο: " + c.Attribute("Examino").Value,
                  Idd = c.Attribute("Id").Value,
                  Statuss = c.Attribute("Status").Value,
           };

 listBox02.ItemsSource = filteredData; 
```

单击按钮时，我想按“Examinoo”对列表进行排序

这是按钮的事件处理程序：

```
private void btn_sort_Click(object sender, RoutedEventArgs e)
{
    listBox02.Items.SortDescriptions.Add(
                new SortDescription("Content", ListSortDirection.Descending));

} 
```

我收到以下错误：

> System.Windows.Controls.ItemCollection'不包含'SortDescriptions'的定义，并且找不到接受'System.Windows.Controls.ItemCollection'类型的第一个参数的扩展方法'SortDescriptions'（您是否缺少 using 指令或程序集参考？）`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:46:53.780

对于同样的问题，我正在遵循这种方法

在 XDocument 行之后，删除您的列表框行

```
listBox02.ItemsSource = filteredData; //remove this line and add the following 2 lines

ObservableCollection<Iatriki> myCollection = new ObservableCollection<Iatriki>(filteredData);
listBox02.ItemsSource = myCollection; 
```

然后在按钮中单击

```
listBox02.ItemsSource = myCollection.OrderBy(item => item.Examinoo); 
```

# html - 如何阻止来自外部脚本的链接？

> ID：12176714
> 
> 赞同：0
> 
> 时间：2012-08-29T11:18:39.957
> 
> 标签：html, hyperlink, external

对于一个网站，我正在使用来自 mycountdown.org 的倒计时脚本。

所以我把脚本放在我的html代码中，如下所示：

```
<body bgcolor="#CCCCCC">
<!-- Begin of mycountdown.org script --> 
<div align="center"> 
<script   type="text/javascript" src="http://mycountdown.org/countdown.php?cp3_Hex=0F0200&cp2_Hex=04488C&cp1_Hex=F9F9FF&ham=0&img=&hbg=0&hfg=0&sid=0&fwdt=180&lab=1&text1=Conference&text2=Health &group=Event&countdown=Conference&widget_number=3010&event_time=1359273600&timezone=Asia/Muscat">
</script><a> </div> 
<!-- End of mycountdown.org script -->

</body> 
```

它工作正常，但是当我单击小部件时，它会将我重定向到 mycountdown.org 网站。我的问题是，有什么办法可以阻止它。我知道脚本是外部的，因此我无权访问它。但是在 html 中是否有一些事情可以防止它发生。

谢谢，

# javascript - 使用ajax在html中加载html文件时出现问题

> ID：12176717
> 
> 赞同：1
> 
> 时间：2012-08-29T11:18:50.913
> 
> 标签：javascript, ajax, cross-browser, safari

我通过单击按钮将具有以下结构的完整 html（见下文骨架）页面加载到另一个 html 页面中。

```
 <!--START:HTML to be loaded by ajax-->
<head>
<!--START: The content inside this head tag is not processed while the page is loaded via ajax-->
    <link rel="stylesheet" type="text/css" href="css/rrr.css" media="screen, projection, print" />
    <script>
        ...
    </script>
    <script type="text/javascript" src="aaas/xxxx.js"></script>
<!--END: The content inside this head tag is not processed while the page is loaded via ajax-->
</head>

<div id="content">
    <!--Page content on which the above script tags inside head tag to act-->
</div>
<!--END:HTML to be loaded by ajax--> 
```

在safari 5.0.1和5.0.2版本中，head标签里面的内容是不被解析的，但是html里面的内容在所有的IE、FF和chrome和safari 5.1.2中都会被解析。并且 id 等于“内容”的 div 内的内容显示在所有浏览器中，包括 safari 5.0.1 和 5.0.2。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:22:49.823

LINK 元素只能在文档的 HEAD 中使用。

从[参考](http://www.w3.org/TR/html401/struct/links.html)：

> 与 A 不同，它可能只出现在文档的 HEAD 部分，尽管它可能出现多次。

因此，您可以将其加载到 a `iframe`（包含文档）中，但不能加载到 a 中`div`，除非浏览器不遵循规范。

在您的情况下，最简单的解决方法可能是使用`iframe`. 请注意，css 不适用于父文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T17:18:32.360

使用[documentFragment 存储 responseText](https://stackoverflow.com/questions/4404715/jquery-load-mixed-http-https-and-internet-explorer/4404752#4404752)，然后执行以下步骤：

*   去掉不应该应用的 CSS
*   将脚本标签移动到正文中
*   移除`head`标签
*   将结果附加到父页面

# sencha-touch-2 - Sencha Touch 2、嵌套XML解析nodeValue

> ID：12176719
> 
> 赞同：4
> 
> 时间：2012-08-29T11:18:54.690
> 
> 标签：sencha-touch-2

我使用嵌套 XML 并使用“hasMany”解析它。如果有人能告诉我如何读取节点“< **type** >”的值，我将不胜感激。我可以使用映射轻松读取“”的属性“id”和“val”，但我还想读取节点值，例如。257411 in < **type** id="3" val="0">257411 如果有人能提供合适的“映射”，我将不胜感激

XML 数据：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<basics id="744" name="social">
      <number>302221</number>
      <types>
             <type id="3" val="0">257411</type>
             <type id="2" val="1081337">28213</type>
             <type id="1" val="263258">8645</type>
             <type id="5" val="0">3664</type>
             <type id="4" val="0">2246</type>
             <type id="9" val="0">1124</type>
            <type id="10" val="0">918</type>
      </types>
</basics> 
```

模型**基本** Ext.define("ap3.model.Basic",{ 扩展："Ext.data.Model",

```
config: {
    fields: [
             {name: 'id', mapping: '@id'},
             {name: 'name', mapping: '@name'},

             {name: 'number', mapping: 'number'}
             ],

             associations: [
                {
                    type: 'hasMany',
                    model: 'apv3.model.Type',
                    associationKey: 'types'
                }]
} 
```

});

模型**类型** Ext.define("ap3.model.Type",{ 扩展："Ext.data.Model",

```
config: {
    fields: [
             {name: 'id', mapping: '@id'},
             {name: 'val', mapping: '@val'},
             {name: 'type', mapping: 'type'}

             ],

             proxy: {
         type: 'memory',
         reader: {
                type: 'xml',
                record: 'type'
            }
    }
} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T12:01:58.000

“映射”也接受一个函数：

```
{name: 'id', mapping: '@id'},
{name: 'name', mapping: '@name'},
{name: 'number', mapping:  function (node) {
    return (node.firstChild ? node.firstChild.nodeValue : null);
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:57:21.060

不知道这是否算作一个答案，但是在同一个问题上花了很多时间我会说这是框架中的一个错误:(

几个相关链接： [https ://stackoverflow.com/a/11549596/454266](https://stackoverflow.com/a/11549596/454266) [http://www.sencha.com/forum/showthread.php?209025-Nested-XML-reader-problem&p=838952&viewfull=1#post838952](http://www.sencha.com/forum/showthread.php?209025-Nested-XML-reader-problem&p=838952&viewfull=1#post838952)

幸运的是嵌套 JSON 工作正常。我的建议是切换到它或手动处理低级模型的加载（例如，编写自己的方法通过创建存储/阅读器并将 this.raw.types 提供给它来完成 hasMany 关联的工作）。

# java - 使用自定义搜索建议提供程序时获取搜索查询字符串

> ID：12176720
> 
> 赞同：1
> 
> 时间：2012-08-29T11:18:54.933
> 
> 标签：java, android, android-searchmanager

我有一个自定义搜索建议提供程序。*现在，这本身*并没有真正提供建议，而是提供搜索快捷方式。这是我编写的自定义提供程序：

```
public class QuickSearchProvider extends SearchRecentSuggestionsProvider {

  public final static String AUTHORITY = "com.example.testapp.providers.QuickSearchProvider";
  public final static int MODE = DATABASE_MODE_QUERIES | DATABASE_MODE_2LINES;

  public QuickSearchProvider() {
    setupSuggestions(AUTHORITY, MODE);
  }

  public Cursor query(Uri uri, String[] projection, String sel,
      String[] selArgs, String sortOrder) {

      MatrixCursor cursor = new MatrixCursor(new String[] { 
          BaseColumns._ID,
          SearchManager.SUGGEST_COLUMN_TEXT_1,
          SearchManager.SUGGEST_COLUMN_TEXT_2,
          SearchManager.SUGGEST_COLUMN_ICON_1,
          SearchManager.SUGGEST_COLUMN_INTENT_ACTION});

      cursor.addRow(new Object[] { 0, "Plants", "Search Plants", android.R.drawable.ic_menu_search, Search.SEARCH_PLANTS_ACTION});
      cursor.addRow(new Object[] { 1, "Birds", "Search Birds", android.R.drawable.ic_menu_search, Search.SEARCH_BIRDS_ACTION });

      return new MergeCursor(new Cursor[] { cursor });
  }

} 
```

在包含搜索字段的活动中，我在`onNewIntent`方法中编写了一个处理程序。这是一个例子：

```
protected void onNewIntent(Intent intent) {
    if  (Search.SEARCH_PLANTS_ACTION.equals(intent.getAction())) {
        ...
    } else if (Search.SEARCH_BIRDS_ACTION.equals(intent.getAction())) {
        ...         
    }
} 
```

如您所见，我可以轻松检查选择了哪个搜索快捷方式，但我似乎无法弄清楚如何获取原始查询字符串。有什么帮助吗？

（附带说明：如果您发现我对自定义搜索建议提供程序的实现有误或可以改进，请告诉我。）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:09:16.243

在对文档进行了一番头撞和跋涉之后。我懂了！

搜索字符串始终可用作方法`selArgs`参数中的第一个也是唯一一个项目`query()`。

为了在活动的意图处理程序中获取搜索字符串，您需要使用：`intent.getStringExtra(SearchManager.QUERY)`。默认情况下，此值仅在提交搜索时可用，而不是在单击搜索建议时可用。如果您需要使用为搜索建议定义的自定义意图来获取此值，则需要将其添加到光标，如下所示：

```
public class QuickSearchProvider extends SearchRecentSuggestionsProvider {

  public final static String AUTHORITY = "com.example.testapp.providers.QuickSearchProvider";
  public final static int MODE = DATABASE_MODE_QUERIES | DATABASE_MODE_2LINES;

  public QuickSearchProvider() {
    setupSuggestions(AUTHORITY, MODE);
  }

  public Cursor query(Uri uri, String[] projection, String sel,
      String[] selArgs, String sortOrder) {

      MatrixCursor cursor = new MatrixCursor(new String[] { 
          BaseColumns._ID,
          SearchManager.SUGGEST_COLUMN_TEXT_1,
          SearchManager.SUGGEST_COLUMN_TEXT_2,
          SearchManager.SUGGEST_COLUMN_ICON_1,
          SearchManager.SUGGEST_COLUMN_QUERY,
          SearchManager.SUGGEST_COLUMN_INTENT_ACTION});

      cursor.addRow(new Object[] { 0, "Plants", "Search Plants", android.R.drawable.ic_menu_search, selArgs[0], Search.SEARCH_PLANTS_ACTION});
      cursor.addRow(new Object[] { 1, "Birds", "Search Birds", android.R.drawable.ic_menu_search, selArgs[0], Search.SEARCH_BIRDS_ACTION });

      return new MergeCursor(new Cursor[] { cursor });
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:13:07.563

我见过的大多数模式都会从 onCreate 和 onNewIntent() 回调中调用一个名为 handleIntent() 的函数。从那里或在 onNewIntent() 中，通过执行以下操作提取查询字符串：

字符串查询 = intent.getStringExtra(SearchManager.QUERY);

意图上。我不确定您的内容提供商是否可以改进，因为我现在正在追寻同一个目标。

# xpath - xpath 搜索 id 包含特定文本的 div

> ID：12176723
> 
> 赞同：44
> 
> 时间：2012-08-29T11:18:59.470
> 
> 标签：xpath, html-agility-pack

在我的 HTML 页面上，我有 40 个 div，但我只想要一个 div

使用敏捷包搜索并获取所有带有 Ids 的 div 我使用这个

```
"//div[@id]" 
```

但是我如何搜索具有 ID 的 div，其中 id 包含文本“test”

```
<div id="outerdivtest1></div>" 
```

谢谢

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-29T11:23:10.123

使用`contains`功能：

```
//div[contains(@id,'test')] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T11:24:21.460

我已经将它用于 CSS 类：

```
//div[@class = 'atom'] 
```

我认为它与 id 相似。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-19T07:26:28.520

您可以使用 xpath

```
//div[@contains(@id,'test')] 
```

如果您想使用第一次出现，它可以正常工作，但如果它不是第一次出现，则必须使用特定于特定元素的不同 xpath。

# java - 在 preventDefault 之后重新触发事件

> ID：12176724
> 
> 赞同：5
> 
> 时间：2012-08-29T11:19:01.527
> 
> 标签：java, javascript, gwt

我已经用 preventDefault 停止了一个事件。现在我想重新抛出它。我尝试了fireEvent，但没有奏效。有没有办法做到这一点？

**更新** 我创建了一个新的事件实例并使用了 elem.dispatchEvent(clickEvent); 而不是触发事件

```
 Event.addNativePreviewHandler(new Event.NativePreviewHandler()
    {
        public void onPreviewNativeEvent(NativePreviewEvent event) 
        {

            if (event.getTypeInt() == Event.ONMOUSEDOWN)
            {
                Element elem = JSHelper.elementFromPoint(event.getNativeEvent().getClientX(), event.getNativeEvent().getClientY());
                EventListener listener = Event.getEventListener(elem);
                if((listener instanceof ListBox))
                {
                    event.getNativeEvent().preventDefault();

                ////    ((ListBox) listener).fireEvent(event);

                    int y = event.getNativeEvent().getClientY();
                    int x = event.getNativeEvent().getClientX();

                    int screenX = event.getNativeEvent().getScreenX();
                    int screenY = event.getNativeEvent().getScreenY();

                    NativeEvent clickEvent = Document.get().createMouseEvent(
                            "click",true, false,0, screenX, screenY, x, y, false, false,
                            false, false, NativeEvent.BUTTON_LEFT, elem);

                    elem.dispatchEvent(clickEvent);

                }
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-28T07:26:20.530

你为什么要尝试再次开火？只需尝试调用您应该调用的事件处理函数

# javascript - 无需编码即可编辑 HTML5 演示文稿

> ID：12176726
> 
> 赞同：3
> 
> 时间：2012-08-29T11:19:05.360
> 
> 标签：javascript, html, editor, wysiwyg, presentation

有几个库可让您在 Web 浏览器中创建非常复杂的演示文稿：

*   [印象.js](http://bartaz.github.com/impress.js/)
*   [谷歌幻灯片](http://code.google.com/p/html5slides/source/browse/trunk/template/index.html)
*   [甲板.js](http://imakewebthings.com/deck.js/#intro)
*   [Reveal.js](http://lab.hakim.se/reveal-js/)

但编辑这些演示文稿的唯一方法是使用代码。有谁知道用户可以在浏览器中即时进行编辑的地方？

如果是这样，是否有可能获得可以保留的表示形式（即 JSON 格式）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:31:31.643

在 Google 中找到 Aloha 编辑器，看起来可能会这样做（我没有尝试过），允许您使用 WYSIWYG 工具编辑 impress.js 演示文稿，不知道是否可以保存它们，但也许您可以保存原始 HTML 以保留他们。

关于它的博客：http: [//aloha-editor.org/blog/2012/04/impress-js-editable-with-wysiwyg-aloha-editor/](http://aloha-editor.org/blog/2012/04/impress-js-editable-with-wysiwyg-aloha-editor/)

演示：[http ://bit.ly/LZUaZP](http://bit.ly/LZUaZP)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-09T09:36:27.487

结帐[http://strut.io/](http://strut.io/)

它是开源的，支持 Impress、Bespoke 和 Handout。

一旦可以轻松导入/导出 JSON 数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T22:25:30.947

最近为reveal.js 发布了一个浏览器内编辑器，您可以在这里试用：[http ://www.rvl.io/](http://www.rvl.io/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-03T23:07:09.227

老问题，我知道，但我今天也在寻找同样的问题。发现这篇不错的概述文章，涵盖了围绕基于浏览器的演示文稿的工具、编辑器、库和整体技术。

来自：索尔兹伯里大学图书馆 [展示您的研究：基于浏览器的展示](https://libraryguides.salisbury.edu/c.php?g=200778&p=1320229)

# php - 结合 python 和 Php 的 Web 应用程序

> ID：12176728
> 
> 赞同：1
> 
> 时间：2012-08-29T11:19:16.297
> 
> 标签：php, python, web-applications

我有一个完全用通常的 html/css/javascript 和一些使用 jQuery 的附加内容编写的 Web 应用程序。我还有一个用 python 编写的非常庞大的程序，它需要对用户在我的网络应用程序上提供的输入进行操作。目前，我正在将 Php 的输入写入文件并在 python 中读取它以进行操作。有没有更好的方法来实现这种同步？此外，一旦某些用户单击提交按钮，我就需要执行我的 python 程序。如何让 python 等待这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:36:44.823

由于对常规文件的严重 I/O 操作，您的同步方式会产生相当大的开销，您必须处理锁，即使很小的负载增长也会导致整个系统崩溃。

我建议您熟悉通常用于在两个进程之间交换信息的 IPC 技术：

1.  在 Python 中，有一个[subprocess](http://docs.python.org/library/subprocess.html)模块可以帮助您使用 PIPES 在进程之间进行通信，这比使用常规文件更可靠。PHP 还具有[popen](http://php.net/manual/en/function.popen.php)函数，可让您调用 python 进程并将数据传递给它以进行进一步处理（通过 PIPES）。
2.  另一种方法是在两个进程之间从头开始构建套接字通信，其中您的 PHP 部分将是一个套接字客户端，而 Python 部分将是一个套接字服务器（将需要比以前的方式更多的工作）。
3.  您还可以使用更好的数据排队方式进行进一步处理（我的意思是比常规文件更好），例如使用消息服务（其中有很多，[RabbitMQ](http://www.rabbitmq.com/)，[Redis Pub/Sub](http://redis.io/topics/pubsub/)等），这些服务绝对可以使用来自 Python 或 PHP。

也有一些技术超出了范围，但我选择了这 3 种方式来安排 IPC，因为它们是最简单和最快的实现方式。

您可以尝试所有这些或一些，并分析在您的特定情况下什么是最好的方法。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-29T11:24:24.760

如果你的应用程序已经在 python 中，为什么你会用 php 编写网站后端？

回答您的问题 - [http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages](http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages)。

但我建议，你放弃愚蠢的 php 并采用一些像 Django 这样的 python 框架并使用它来构建你的后端。如果你这样做了，那么集成你的 python 代码就是导入一个类/方法的简单问题。

# android - 在自定义屏幕 Android 中打开 URL 或 PDFreader

> ID：12176732
> 
> 赞同：1
> 
> 时间：2012-08-29T11:19:35.610
> 
> 标签：android, pdf, window

我正在开发需要在弹出窗口等自定义屏幕中打开内置应用程序的应用程序，但是当我调用内置应用程序时，屏幕尺寸为全屏，而我需要自定义屏幕尺寸。内置应用程序可以是浏览器或 pdfreader 之类的任何东西。

这是我的代码：-

```
String strurl = "/sdcard/download/28889.pdf"; 

     File file = new File(strurl); 

     if (file.exists()) { 
         Uri path = Uri.fromFile(file); 
      //   Log.e("path of the file",path.toString()); 
         Intent intent = new Intent(Intent.ACTION_VIEW); 

         intent.setDataAndType(path, "application/pdf"); 
         intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 

         try { 
             startActivity(intent); 
         }  
         catch (ActivityNotFoundException e) { 
             Toast.makeText(getApplicationContext(),  
                 "No Application Available to View PDF",  
                 Toast.LENGTH_SHORT).show(); 
         } 
```

这会在我的应用程序中打开新窗口，但我需要 Popup 类型的窗口，我需要在其中显示此 pdfreader 以进行显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:28:41.933

根据设计，Android 不允许一个应用程序在另一个应用程序内部运行（除其他外，出于明显的安全原因）。因此，如果这是您想要做的，那您就不走运了。

但是您可以使用 WebView（我让您查阅此类文档）在您的应用程序中显示网页。那里也有一些 pdf 库。不过需要注意的是，一年前我在 Android 上开发了一个 pdf 阅读器，实现 pdf 阅读器并不是最好的解决方案。在服务器端处理 pdf 解码并提供此图像的视图（或转换为 html）是最好的解决方案。
这样你就不会使用太多的计算能力来阅读 pdf（令人惊讶的是，你需要一些严肃的 cpu 来阅读 pdf）。

自从我进行该开发以来，事情可能已经发生了变化（我确实受到时间因素的限制），但我仍然认为除非您明确需要显示 pdf 文档而不仅仅是文档（例如，合理的原因是您需要在 Android 设备上检查 pdf 的签名），您不应该在手机上使用 pdf 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:35:59.407

对于网页 URL 您可以使用 Webview

对于 PDF

您需要制作您的 pdf 阅读器，或者您可以使用任何开源 pdf 阅读器来制作您自己的自定义版本的 pdf 阅读器，您可以在您的应用程序中使用。

其中一些是

1) [http://www.mupdf.com/](http://www.mupdf.com/)

2) [http://sourceforge.net/projects/pdfedit/](http://sourceforge.net/projects/pdfedit/)

3) 在 Google/SO 上搜索其他链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:51:38.780

这是pdf阅读器的示例代码：

[http://lokeshatandroid.blogspot.in/2012/07/android-pdf-reader.html](http://lokeshatandroid.blogspot.in/2012/07/android-pdf-reader.html)

# iphone - UILabels Marquee + Overlapping 同时为标签设置动画

> ID：12176734
> 
> 赞同：1
> 
> 时间：2012-08-29T11:19:51.303
> 
> 标签：iphone, marquee, uianimation

我编写了以下代码，用于在视图上一一显示的标签上添加选取框效果。

```
- (void)marqueeMessage:(NSString *)messageString
{
UILabel *label = [[UILabel alloc] initWithFrame:(CGRectMake(520, 0, 480, 21))];
label.text = messageString;
[self.view addSubview:label];

[UIView animateWithDuration:0.2

                 animations:^ {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:20];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.view cache:YES];
    label.frame = CGRectMake(-480, 0, 480, 21);
    [UIView commitAnimations];
}
                 completion:^(BOOL finished) {

    NSLog(@"Animation Done!");
    if (array.count > 0)
    {
        nextIndex++;
        NSString *strMessage = [array objectAtIndex:nextIndex];
        [self marqueeMessage:strMessage];
    }
}];
} 
```

不知何故，数组中的字符串以这样的方式显示，即它们在执行动画时重叠。

任何想法，任何人？？？

让我知道，以防需要更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:03:50.507

```
-(void)viewDidLoad {

    [super viewDidLoad];
    array=[[NSArray alloc]initWithObjects:@"Scroll test",@"Scroll test1",@"Scroll test2",@"Scroll test3",@"Scroll test4",nil];
    [self marqueeMessage:[array objectAtIndex:0]];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)marqueeMessage:(NSString *)messageString {
    label = [[UILabel alloc] initWithFrame:(CGRectMake(0, 50, 90, 21))];
    //label.tag=nextIndex;
    label.text = messageString;
    [self.view addSubview:label];
    [UIView beginAnimations:@"LBL" context:nil];
    [UIView setAnimationDuration:3];
    [UIView setAnimationDidStopSelector:@selector(performThis:)];
    [UIView setAnimationDelegate:self];

    label.frame = CGRectMake(360,50,90,21);
    [UIView commitAnimations];
}

- (void) performThis:(id) sender {
    if (i<[array count]) {
        label.text = [array objectAtIndex:i];
        i++;
    }
    else
    {
        i=0;
        label.text = [array objectAtIndex:i];
    }
    label.frame = CGRectMake(-90,50,90,21);
    [UIView beginAnimations:@"LBL" context:nil];
    [UIView setAnimationDuration:3];
    label.frame = CGRectMake(360,50,90,21);
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(performThis:)];
    [UIView commitAnimations];
} 
```

可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:47:38.707

在我看来，您的第一个动画（持续 0.2 秒）完成并调用完成，这会在持续 20 秒的嵌套动画之上为您的视图添加另一个标签，因此仍在屏幕上等，等等。你最终会得到一堆重叠的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:22:59.550

我认为您永远不会从 superview 中删除标签...您需要保留对标签的引用并这样做：

```
[old_label removeFromSuperview]; 
```

# c# - 在 Html.DropDownlistFor 中获取多个选定值

> ID：12176735
> 
> 赞同：38
> 
> 时间：2012-08-29T11:19:53.243
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, html.dropdownlistfor

```
@Html.DropDownListFor(m => m.branch, CommonMethod.getBranch("",Model.branch), "--Select--", new { @multiple = "multiple" })

@Html.DropDownListFor(m => m.division, CommonMethod.getDivision(Model.branch,Model.division), "--Select--", new { @multiple = "multiple" }) 
```

我有两个 DropDownListFor 实例。我想为那些先前存储了 Model.branch 和 Model.division 值的那些设置为 true。这些是存储 id 的字符串数组

```
class CommonMethod
{
    public static List<SelectListItem> getDivision(string [] branchid , string [] selected)
    {
        DBEntities db = new DBEntities();
        List<SelectListItem> division = new List<SelectListItem>();
        foreach (var b in branchid)
            {
                var bid = Convert.ToByte(b);
                var div = (from d in db.Divisions where d.BranchID == bid select d).ToList();
                foreach (var d in div)
                {
                    division.Add(new SelectListItem { Selected = selected.Contains(d.DivisionID.ToString()), Text = d.Description, Value = d.DivisionID.ToString() });
                }
            }
        }

        return division;
    }
} 
```

对于模型中的选定项，div的返回值被选择为true，但在视图侧它没有被选中。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-29T11:40:54.260

使用 a`ListBoxFor`代替`DropDownListFor`：

```
@Html.ListBoxFor(m => m.branch, CommonMethod.getBranch("", Model.branch), "--Select--")

@Html.ListBoxFor(m => m.division, CommonMethod.getDivision(Model.branch, Model.division), "--Select--") 
```

`branch`和`division`属性显然必须是包含所选值的集合。

以及使用视图模型构建多选下拉列表的正确方法的完整示例：

```
public class MyViewModel
{
    public int[] SelectedValues { get; set; }
    public IEnumerable<SelectListItem> Values { get; set; }
} 
```

将在控制器中填充：

```
public ActionResult Index()
{
    var model = new MyViewModel();

    // preselect items with values 2 and 4
    model.SelectedValues = new[] { 2, 4 };

    // the list of available values
    model.Values = new[]
    {
        new SelectListItem { Value = "1", Text = "item 1" },
        new SelectListItem { Value = "2", Text = "item 2" },
        new SelectListItem { Value = "3", Text = "item 3" },
        new SelectListItem { Value = "4", Text = "item 4" },
    };

    return View(model);
} 
```

在视图中：

```
@model MyViewModel
...
@Html.ListBoxFor(x => x.SelectedValues, Model.Values) 
```

HTML 助手会自动预选其值与`SelectedValues`属性值匹配的项目。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-12-02T14:45:37.783

对我来说，它也适用于`@Html.DropDownListFor`：

**模型：**

```
public class MyViewModel
{
    public int[] SelectedValues { get; set; }
    public IEnumerable<SelectListItem> Values { get; set; }
} 
```

**控制器：**

```
public ActionResult Index()
{
    var model = new MyViewModel();

    // the list of available values
    model.Values = new[]
    {
        new SelectListItem { Value = "2", Text = "2", Selected = true },
        new SelectListItem { Value = "3", Text = "3", Selected = true },
        new SelectListItem { Value = "6", Text = "6", Selected = true }
    };

    return View(model);
} 
```

**剃刀：**

```
@Html.DropDownListFor(m => m.SelectedValues, Model.Values, new { multiple = "true" }) 
```

**控制器中提交的 SelectedValues 如下所示：**

[![在此处输入图像描述](../Images/ebe7c790a1b6a87f65bb616b469d7667.png)](https://i.stack.imgur.com/r0Aha.png) [![在此处输入图像描述](../Images/a1791a910f086aeff10341bd0607a9b3.png)](https://i.stack.imgur.com/dH07c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-24T16:06:51.627

虽然很老的线程，但在此处遵循其他答案后发布了此答案，不幸的是，这对我不起作用。因此，对于那些最近或不久的将来可能在这里偶然发现的人来说，以下是对我有用的方法。

[这对我有帮助](https://www.codeproject.com/Questions/1194907/Razor-mutliselect-dropdown-set-values-as-selected)

对我来说最重要的是`MultiSelectList`上课，我正在使用`SelectList`.

不知道 2012 年或 2015 年的情况。但是，现在这些辅助方法`@Html.DropDownListFor`和`@Html.ListBoxFor`辅助方法都接受`IEnumerable<SelectListItem>`了，因此您不能传递任何随机`IEnumerable`对象并期望这些辅助方法完成这项工作。

这些辅助方法现在还接受对象`SelectList`和`MultiSelectList`类，您可以在其中创建对象时直接传递选定的值。

例如，请参阅下面的代码我如何创建我的多选下拉列表。

```
@Html.DropDownListFor(model => @Model.arrSelectUsers, new MultiSelectList(Model.ListofUsersDTO, "Value", "Text", @Model.arrSelectUsers),
                                                    new
                                                    {
                                                        id = "_ddlUserList",
                                                        @class = "form-control multiselect-dropdown",
                                                        multiple = "true",
                                                        data_placeholder = "Select Users"
                                                    }) 
```

# symfony - 无法连接数据库

> ID：12176744
> 
> 赞同：0
> 
> 时间：2012-08-29T11:20:17.127
> 
> 标签：symfony

我已经下载了一些`symfony`from的代码`github`。我已经配置了所有的东西。我已经使用命令创建了数据库

```
 php app/console doctrine:database:create 
```

我也创建了数据库，但是当我尝试登录或注册时，当我查看时我没有注册，`profiler`然后它表明没有执行任何查询。我应该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:27:12.283

检查config里面的parameters_dev.ini文件，确认设置是否正确？你已经创建数据库了吗？您可以上传更多代码以获取详细信息吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:40:58.007

检查您的端口并尝试在参数文件中输入 127.0.0.1 而不是 localhost，这很奇怪，但它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T03:17:55.573

创建数据库后是否创建了模式？

```
php app/console doctrine:schema:create 
```

日志（`app/logs/dev.log`或`app/logs/prod.log`）说什么？

# c# - 在 ASP.net 解决方案中使用 Unity IOC Container

> ID：12176745
> 
> 赞同：2
> 
> 时间：2012-08-29T11:20:19.417
> 
> 标签：c#, asp.net, multithreading, inversion-of-control, unity-container

我们在 ASP.Net 解决方案中使用 Microsoft 的 Unity IOC 容器。

在顶层之一中，我们使用 RegisterInstance 方法。然后我们用 Resolve 方法把它放低。

在查看另一个问题时，我们看到 ASP.Net 具有线程敏捷性，即请求可以跳转线程。

那么问题来了，如果我们在一个线程上注册了一个实例，并且在我们解析实例之前请求跳转线程，我们会取回正确的实例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T11:35:21.883

1.  如果您在已注册的同一容器（或其子容器）上解析您的类型，您将获得正确的实例。

2.  据我所知，不需要在每次请求时在容器中注册类型，这通常在应用程序启动时完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:41:47.037

基于[此](https://unity.codeplex.com/discussions/27496)

> [...] **Resolve、ResolveAll 和 BuildUp 都是线程安全**的。看起来我们在文档中错过了它。
> 
> 容器上的其他方法都不是线程安全的，因此如果要配置容器，则需要进行锁定。此外，如果您有一个线程配置和另一个线程解析，则会出现线程问题。

AFAIK，您的方法是正确的，您不必担心在 ASP.NET 应用程序中获得不正确的实例。

# c# - 给定相应的 int“值”，如何从 SelectList 中的 SelectListItem 返回“文本”？

> ID：12176755
> 
> 赞同：0
> 
> 时间：2012-08-29T11:20:57.950
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, http-post, selectlist

我有一个`SelectList`看起来像的。. .

```
new SelectList(new[]
    {
        new { Value = "1", Text = "AK" },
        new { Value = "2", Text = "AL" },
        new { Value = "3", Text = "AR" },
        new { Value = "4", Text = "AZ" },
        etc. . . 
```

给定一个 int 我需要能够选择相应的`Value`，以便我可以返回关联的`Text`. 所以如果我有 int 3，我想最终返回字符串“AR”——我该怎么做？

我似乎不明白 SelectLists 是如何工作的，我一直在尝试类似的东西：

```
var stringValue = mySelectList.Where(m => m.Value == myInt).Text; 
```

-- 这不起作用有几个原因：

*   .Text 不是我可以放在请求末尾的东西，因为它无法解决
*   `m.Value - myInt`告诉我`I cannot convert the source type 'int' to target type 'string'`，如果我将 int 更改为字符串，我会收到错误：`cannot convert expression type 'string' to return type 'bool'`。

我觉得我在这里把事情复杂化了。我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:35:22.180

你也可以使用这样的东西

```
 var stringValue = mySelectList.Find(match => match.Value == myInt.ToString()).Text; 
```

由于 Find 返回列表中找到的第一个匹配项。

您的代码不起作用的另一件事是您在比较中只输入了一个“=”，它应该类似于“==”您的：

```
mySelectList.Where(m => m.Value = myInt).Text 
```

应该是这样的：

```
mySelectList.Where(m => m.Value == myInt).Text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:26:36.013

你可能需要这样的东西：

```
var stringValue = mySelectList.Where(m => m.Value == myInt.ToString())
                              .First()
                              .Text; 
```

*   该`Where`方法不返回 SelectListItem，它返回一个查询。您需要使用该方法强制执行查询，并获得第一个结果`First()`。
*   您正在使用`=`（分配一个值）而不是`==`（比较两个值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T11:26:53.940

做这个;

```
 mySelectList.First(m => m.Value == myInt.ToString()).Text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:49:52.133

```
var lst = mySelectList.Where(o=> o.Value ==myInt.ToString()).Select(o=> o.Text).First(); 
```

# css - 使用 fitText 动态适应宽度 flex 4.6 的百分比

> ID：12176759
> 
> 赞同：1
> 
> 时间：2012-08-29T11:21:03.210
> 
> 标签：css, actionscript-3, apache-flex, dynamic, text

弹性 4.6

我有一个模块，其中包含一个带有标签的边框容器。我正在动态加载文本，并希望文本将标签填充到 100% 宽度。我在下面找到了对 fitText 函数的引用，但不知道如何/在何处包含此代码。

我也尝试过使用css。我可以使用标签的填充和边距来获取文本的百分比宽度吗？

如果没有，有人可以提供如何包含/调用该函数的代码。

我收到几个错误/？在下面的 fitText 中也是如此，例如

```
Access of undefined property FormattedTextField
Access of undefined property autoSize
Access of undefined property text
Access of undefined property width
Access of undefined property width
Access of undefined property numLines 
```

谢谢

艺术

模块

```
<s:BorderContainer x="27" y="19" width="404" height="67" backgroundColor="#111">
        <s:Label id="hlText" x="54" y="5" width="307" height="55"  fontSize="55" styleName="HeadBanner"
                 text="{Mytext.heading}"/>
    </s:BorderContainer> 
```

fitText 根据[http://fld-as3-samples-cn.googlecode.com/svn-history/r29/trunk/NewsLayout/src/com/example/programmingas3/newslayout/HeadlineTextField.as](http://fld-as3-samples-cn.googlecode.com/svn-history/r29/trunk/NewsLayout/src/com/example/programmingas3/newslayout/HeadlineTextField.as)

```
package com.v1
{
import flash.text.TextFieldAutoSize;
import flash.text.TextFormat;
import flash.text.TextFormatAlign;
import flash.text.TextLineMetrics;
import flash.text.TextField;

/**
 * Changes the size of the text to fit a given width and number of lines.
 * Useful for news headlines that should extend across a full column.
 *
 * We need to know:
 * - which font family, weight, and style to use
 * - the max width of the headline
 * - the max height in pixels of the headline
 * - the max number of lines
 * 
 * Algorithm 1:
 * - figure out the N-width of a character that should work based on pixelWidth / numChars
 * - translate that N-width into a point size
 * - try the point size, if outside of tolerance,; 
 *   - if too wide, adjust down a point, try again
 *   - if too small, adjust up a point, try again
 *   - if too wide last time, too small this time or vice versa, stick with the too small size
 * 
 * Pixels per character (width-wise) is roughly 1/2 the point size, so that's a good starting
 * point. So to get a starting point size, divide the overall width by the number of characters
 * to get pixels-per-character, then double to get the point size.
 */
public class fitText extends FormattedTextField
{

    public static var MIN_POINT_SIZE:uint = 6;
    public static var MAX_POINT_SIZE:uint = 128;

    public function HeadlineTextField(tf:TextFormat = null) 
    {
        super(tf);
        this.autoSize = TextFieldAutoSize.LEFT;
    }

    public function fitText(msg:String, maxLines:uint = 1, toUpper:Boolean = false, targetWidth:Number = -1):uint
    {
        this.text = toUpper ? msg.toUpperCase() : msg;

        if (targetWidth == -1)
        {
            targetWidth = this.width;
        }

        var pixelsPerChar:Number = targetWidth / msg.length;

        var pointSize:Number = Math.min(MAX_POINT_SIZE, Math.round(pixelsPerChar * 1.8 * maxLines));

        if (pointSize < 6)
        {
            // the point size is too small
            return pointSize;
        }

        this.changeSize(pointSize);

        if (this.numLines > maxLines)
        {
            return shrinkText(--pointSize, maxLines);
        }
        else
        {
            return growText(pointSize, maxLines);
        }
    }

    public function growText(pointSize:Number, maxLines:uint = 1):Number
    {
        if (pointSize >= MAX_POINT_SIZE)
        {
            return pointSize;
        }

        this.changeSize(pointSize + 1);

        if (this.numLines > maxLines)
        {
            // set it back to the last size
            this.changeSize(pointSize);
            return pointSize;
        }
        else
        {
            return growText(pointSize + 1, maxLines);
        }
    }

    public function shrinkText(pointSize:Number, maxLines:uint=1):Number
    {
        if (pointSize <= MIN_POINT_SIZE)
        {
            return pointSize;
        }

        this.changeSize(pointSize);

        if (this.numLines > maxLines)
        {
            return shrinkText(pointSize - 1, maxLines);
        }
        else
        {
            return pointSize;
        }
    }
}
} 
```

# java - 在 Java 中查找操作消耗的内存

> ID：12176761
> 
> 赞同：2
> 
> 时间：2012-08-29T11:21:06.937
> 
> 标签：java, memory-management

假设我在 Java 中做了一个类似下面的冒泡排序示例：

```
package testing;

public class bubbleSort {
public static void main(String a[]) {
    int i;
    int array[] = { 12, 9, 4, 99, 120, 1, 3, 10 };
    System.out.println("Values Before the sort:\n");
    for (i = 0; i < array.length; i++)
        System.out.print(array[i] + "  ");
    System.out.println();
    bubble_srt(array, array.length);
    System.out.print("Values after the sort:\n");
    for (i = 0; i < array.length; i++)
        System.out.print(array[i] + "  ");
    System.out.println();
    System.out.println("PAUSE");
}

public static void bubble_srt(int a[], int n) {
    int i, j, t = 0;
    for (i = 0; i < n; i++) {
        for (j = 1; j < (n - i); j++) {
            if (a[j - 1] > a[j]) {
                t = a[j - 1];
                a[j - 1] = a[j];
                a[j] = t;
            }
        }
    }
}
} 
```

有没有办法查出

(a) 元素数组的数据结构消耗多少 RAM？

(b) 如果没有 - 有没有办法比较该进程与普通 HelloWorld 相比消耗了多少 RAM？

```
package testing;

public class Testing {
public static void main(String[] args) {
    System.out.println("Hello World!");
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:24:39.207

> 元素数组的数据结构消耗多少 RAM？

不容易。它将大约 40-48 字节长，这不值得担心。

> 如果没有 - 有没有办法比较该进程与普通 HelloWorld 相比消耗了多少 RAM？

猜测一下，我会说您的第一个示例比第二个示例使用多达 100 KB。`int`这是因为在加载额外的类并将值转换`String`为大部分内存消耗的感觉背后进行分配。相比之下，您的数组微不足道。

无论如何，100 KB 也不值得担心。在台式机中，100 KB 的成本不到 1 美分，并且可以重复使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:26:21.740

您可以使用它`getRunTime()`来查找当前程序的运行时间。并且`totalmemory`属性将帮助您找到使用的内存。

```
 // Get the Java runtime
    Runtime runtime = Runtime.getRuntime();
    // Run the garbage collector
    runtime.gc();
    // Calculate the used memory
    long memory = runtime.totalMemory() - runtime.freeMemory(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:31:52.110

您必须分析您的应用程序以获取真实的内存使用情况。试试[YourKit](http://www.yourkit.com/)。在调用 sort 之前向您的应用程序添加暂停。在运行排序之前和完成之后创建内存快照并进行比较。

调用所有 GC 不会给你带来“真实”的结果。VM本身分配了很多对象。可能会被清理，你会得到错误的图片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:35:30.430

使用这个公式；

```
 static long memoryUsed() {
        return runtime.totalMemory() - runtime.freeMemory();
     }

     static final Runtime runtime = Runtime.getRuntime(); 
```

# c# - 写入模型时出现 ArgumentOutOfRangeException

> ID：12176763
> 
> 赞同：0
> 
> 时间：2012-08-29T11:21:19.680
> 
> 标签：c#, asp.net-mvc

我第一次尝试写入模型以在我的视图中使用：第一次写入模型时，我得到一个`ArgumentOutOfRangeException`.

首次写入数组时出错：

```
private IAdditionalQuestionsService _service;
private SelectedAdditionalQuestionAnswerModel _model;
private void InitializeController()
{
    _service = GetObject<IAdditionalQuestionsService>();
    //GetPageHeaderText(inst);
    ViewBag.GetPageTitle = "Additional Questions";
}

[HttpGet]
public virtual ActionResult Edit()
{
    Institution inst = _service.GetInstitution(State.GetInstitutionRecordId());
    _model = GetObject<SelectedAdditionalQuestionAnswerModel>();
    _model.AddQuestAnswModel = new List<AdditionalQuestionAnswerModel>();
    GetPageConfiguration1(inst);
    return View(_model);
}

AdditionalQuestionAnswerModel m = GetObject<AdditionalQuestionAnswerModel>();
int c = 0;
foreach (var x in inst.AdditionalQuestions)
{
    foreach (var y in x.AdditionalQuestionAnswers)
    {
        // Error is happening on next line *************
        _model.AddQuestAnswModel[c].QuestionText = x.QuestionText;
        _model.AddQuestAnswModel[c].InstitutionId = x.InstitutionId;
        _model.AddQuestAnswModel[c].AdditionalQuestionId = x.Id;
        _model.AddQuestAnswModel[c].AnswerText = y.AnswerText;
        _model.AddQuestAnswModel[c].IsSelected = false;
        c++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:42:53.947

您无法使用`_model.AddQuestAnswModel[c]`，因为您从未将任何项目添加到您的列表中。

取而代之的是，创建一个新对象并设置其值，然后将该项目添加到您的列表中。

像这样的东西：

```
AdditionalQuestionAnswerModel newItem = new AdditionalQuestionAnswerModel();

//set the values here to newItem

_model.AddQuestAnswModel.Add(newItem); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:43:28.210

您首先要实例化您的列表

```
_model.AddQuestAnswModel = new List<AdditionalQuestionAnswerModel>(); 
```

然后你尝试访问第一个元素

```
_model.AddQuestAnswModel[c] // c == 0 
```

不向列表中添加任何元素。

在尝试按索引访问列表之前添加一个元素，或者更简单：

```
foreach (var y in x.AdditionalQuestionAnswers)
{
    AdditionalQuestionAnswerModel newObj = new AdditionalQuestionAnswerModel
    {
         QuestionText = x.QuestionText;
         InstitutionId = x.InstitutionId;
         AdditionalQuestionId = x.Id;
         AnswerText = y.AnswerText;
         IsSelected = false;
    };

    _model.AddQuestAnswModel.Add(newObj);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:44:23.963

Ir 表示您的指定位置没有项目`_model.AddQuestAnswModel`，并且从您的代码中，我看到它`_model.AddQuestAnswModel`仅以开头`new List<AdditionalQuestionAnswerModel>()`，因此它不包含项目（除非您在构造函数中执行此操作）。

你需要像这样填写它：

```
_model.AddQuestAnswModel.Add(item); 
```

# c# - 当设备使用电池，未连接到互联网时更新应用程序磁贴，

> ID：12176772
> 
> 赞同：1
> 
> 时间：2012-08-29T11:22:00.573
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我正在尝试为 Windows8 Metro 用户界面创建一个特定的日历。

我现在要做的就是**在上午 12:00 更新我的磁贴**（在磁贴上显示当前日期），即使**程序没有运行**。

WinRT 为此类任务提供了多种解决方案，但由于各种原因，我无法使用其中的任何一种：

1.  可以，`Register a Maintenance Background Task`但它们仅在设备使用交流电源时运行。
2.  有可能，`Register a Periodic Cloud URI`但它们只有在计算机连接到互联网时才会运行。
3.  有可能，`Register a Background Task on Timer`但它们只有在用户将它们添加到锁定屏幕时才会运行。
4.  这是可能的，`Register a ScheduledTileNotification`但它是对磁贴的单一、非重复的预定更新。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:44:06.600

您无需在锁定屏幕上。研究使用计划的磁贴通知：

代码示例在这里： [http ://code.msdn.microsoft.com/windowsapps/Scheduled-notifications-da477093](http://code.msdn.microsoft.com/windowsapps/Scheduled-notifications-da477093)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:36:20.253

我认为这里的答案是你**必须**被添加到锁定屏幕——这不是需要用户深入了解 PC 设置的东西。[您可以使用支持的api](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.background.backgroundexecutionmanager.requestaccessasync.aspx)提示添加到锁定屏幕。示例代码包含在文档中——它是一个简单的调用，也是一个处理结果的案例。

# asp.net - 如何为 Entity Framework 实现其他实体属性？

> ID：12176775
> 
> 赞同：0
> 
> 时间：2012-08-29T11:22:15.330
> 
> 标签：asp.net, asp.net-mvc, entity-framework, multi-tenant

我们需要允许自定义我们的核心产品并在每个客户的基础上添加其他字段，例如人员实体，一些客户想要记录他们最喜欢的颜色等。据我所知，我们无法在运行时根据需要向 EF 添加属性启动时定义的类。每个客户都有自己的数据库，但我们使用所有附加代码为所有客户部署相同的解决方案。然后我们检测他们是哪个客户并运行客户特定的服务等。

现在我想要的最后一件事是分叉我的项目，或者为所有客户添加所有字段。这似乎很可能成为一场噩梦。此外，通常只在非常有限的地方需要额外的字段。也许一些报告，几个屏幕等。

[我从 Jermey Miller http://codebetter.com/jeremymiller/2010/02/16/our-extension-properties-story/](http://codebetter.com/jeremymiller/2010/02/16/our-extension-properties-story/)找到这篇文章，描述了他们如何添加扩展属性并让它们从域到 Web 前端。

有没有其他人使用 EF 实现过类似的东西？效果如何？是否有任何人看过的博客/示例？我不确定我是否正在寻找正确的东西，即使有人可以告诉我我们想要做的事情的通用名称会有所帮助。我猜这是其他人会遇到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:39:47.740

链接的问题仍然需要在单个解决方案中进行一些分叉或实现所有可能的扩展，因为您仍在预先创建强类型扩展（= 您预先知道客户想要什么扩展）。它通常不是可扩展的解决方案。如果您想要通用的可扩展解决方案，您必须离开强类型世界并将扩展描述为数据。

您将需要使用一些元模型。您的实体类将仅包含所有客户使用的属性和导航属性到特殊扩展实体（每个可扩展实体的附加表），您可以在其中将附加属性作为名称/值对（您可以添加其他列，如类型、验证等，如果需要）。

这通常会将您的模型的一部分从硬编码场景移动到基于配置的场景，您的客户甚至可以在运行时定义扩展（如果您实现了此类功能）。

# apache-flex - Flex DataGrid 列降序排序不起作用

> ID：12176784
> 
> 赞同：0
> 
> 时间：2012-08-29T11:22:44.237
> 
> 标签：apache-flex, sorting, datagrid

我有一个奇怪的问题。

在 Flex 4 中，我有一个 Spark DataGrid，并为其中一列定义了一个项目渲染器和一个排序比较函数。奇怪的是，该列不会按降序排序。

数据原本没有排序。单击列标题会显示“向上”箭头，并且数据按升序排序。但是，再次单击列标题不会执行任何操作。“向上”箭头保持不变，数据保持升序排序。

我已经调试了代码，发现排序比较函数中的 column.sortDescending 总是错误的（当降序排序应该发生时，这应该是真的吗？）。

我已经用谷歌搜索了很长时间并在这里搜索但没有找到任何东西。

有人有想法么？

提前致谢。

**//编辑**

简单示例代码：

CreationComplete 函数使用一些随机值初始化数据：

```
protected function application1_creationCompleteHandler(event:FlexEvent):void
            {
                arrayData = new ArrayCollection();

                var obj:Object;
                for(var i:Number=0; i < 10; i++) {
                    obj = new Object();
                    obj.value1 = i;
                    obj.value2 = Math.floor(Math.random() * (1 + 100 - 1)) + 1;
                    obj.value3 = Math.floor(Math.random() * (1 + 100 - 1)) + 1;

                    arrayData.addItem(obj);
                }
            } 
```

Datagrid 定义了第 4 列的列，其中定义了项目渲染器和排序比较函数。

```
<s:DataGrid x="122" y="142" width="391" height="223" requestedRowCount="4" dataProvider="{arrayData}">
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="value1" headerText="Value 1"></s:GridColumn>
                <s:GridColumn dataField="value2" headerText="Value 2"></s:GridColumn>
                <s:GridColumn dataField="value3" headerText="Value 3"></s:GridColumn>
                <s:GridColumn headerText="Value 3" sortable="true" itemRenderer="ItemRendererTest" sortCompareFunction="sortCompareFunc"></s:GridColumn>
            </s:ArrayList>
        </s:columns>
        <s:typicalItem>
            <fx:Object dataField1="Sample Data" dataField2="Sample Data" dataField3="Sample Data"></fx:Object>
        </s:typicalItem>
    </s:DataGrid> 
```

项目渲染器代码：

```
override public function prepare(hasBeenRecycled:Boolean):void {
                var columnString:String = data["value1"] + ":" + data["value2"] + ":" + data["value3"];

                lblData.text = columnString;
            } 
```

排序比较功能：

```
private function sortCompareFunc(obj1:Object, obj2:Object, col:GridColumn):int {
                var obj1String:String = obj1["value1"] + ":" + obj1["value2"] + ":" + obj1["value3"];
                var obj2String:String = obj2["value1"] + ":" + obj2["value2"] + ":" + obj2["value3"];

                var collator:SortingCollator = new SortingCollator();

                return collator.compare(obj1String, obj2String);
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:28:42.097

我自己也有类似的东西似乎火花网格控件需要一个 dataField 定义，即使你有一个自定义的排序比较功能，只需尝试在你的第 4 列添加 dataField="value1" 即使你不打算使用它，看看是否这有帮助。

# java - 运行通过 JNLP 启动的小程序时如何解决“AWT-EventQueue-0”异常

> ID：12176790
> 
> 赞同：0
> 
> 时间：2012-08-29T11:23:02.253
> 
> 标签：java, awt, jnlp

我正在`Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException`运行通过 JNLP 启动的小程序。

我的小程序代码是

```
package com.oprs.common;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.MalformedURLException;
import java.net.URL;

import javax.jnlp.*;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

import org.jfree.util.Log;
/**
 *
 * @date Aug 29, 2012 11:33:16 AM
 * @version 1.0
 */
public class OprsJNLP {

    /**
     * @param args
     */
    static BasicService basicService = null;

    public static void main(String[] args) {
    JFrame frame = new JFrame("OPRS");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JLabel label = new JLabel();
    Container content = frame.getContentPane();
    content.add(label,BorderLayout.CENTER);
    String message = "Download OPRS Application";
    label.setText(message);

    try {
        basicService = (BasicService)ServiceManager.lookup("javax.jnlp.BasicService");
    } catch (UnavailableServiceException e) {
        Log.error("service not available", e);
    }

    JButton button = new JButton("http://google.com/");

    ActionListener listener = new ActionListener() {

        public void actionPerformed(ActionEvent event) {
        URL url;
        try {
            url = new URL(event.getActionCommand());
            basicService.showDocument(url);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }       
        }
    };

    button.addActionListener(listener);

    content.add(button, BorderLayout.SOUTH);
    frame.pack();
    frame.show();
    }
} 
```

我尝试调试，发现 basicService 总是返回 null。代替 google.com，我尝试使用其他网址，但仍然遇到相同的错误。该行`basicService.showDocument(url);`是它抛出空指针的地方，因为我的 basicService 为空。有人能指出我到底哪里出错了吗？

包括我的 .jnlp

```
<?xml version='1.0' encoding='UTF-8' ?>
<jnlp spec='1.0'
      codebase='http://localhost:9999/'
      href='oprs.jnlp'>
  <information>
    <title>OPRS</title>
    <vendor>OPRS</vendor>
    <description kind='one-line'>
      OPRS WEB START
    </description>
    <shortcut online='false'>
      <desktop/>
    </shortcut>
  </information>
  <resources>
    <j2se version='1.4+' />
    <jar href='oprs.jar' main='true' />
  </resources>
  <application-desc main-class='com.oprs.OprsJNLP' />
</jnlp> 
```

# actionscript-3 - 为什么我的带有可排序列的 AS3 DataGrid 在排序后显示错误的影片剪辑加载到单元格中？

> ID：12176794
> 
> 赞同：4
> 
> 时间：2012-08-29T11:23:11.803
> 
> 标签：actionscript-3, datagrid, cellrenderer, flash-cs6

我的 AS3 项目中有一个 datagrid 组件，并有一个自定义单元格渲染器分配给一个列，该列根据单元格数据的值将影片剪辑加载到单元格中。例如，如果单元格数据是数字 1 我加载movieclip1，如果2 我加载movieclip2。这很好用。在 CustomCellRenderer 类中，我使用

```
 public function set data(value:Object):void {
   _data = value;
   // value.Number is the value that I use to determine which movie clip to show in this cell 
   source = "movie"+value.Number;
 } 
```

当 DataGrid 加载时，正确的影片剪辑被加载到单元格中。但是，当用户通过单击列的标题对列进行排序时，某些影片剪辑不会加载。我检查了数据是否正常排序，当我追踪 "movie"+value.Number 时，会显示正确的字符串。

我想也许我需要在再次设置源之前卸载每个单元格中的影片剪辑？我该怎么做呢？

我注意到的另一件事是，当 DataGrid 需要滚动时，因为屏幕上的行数超过了（呃！），那么一次只会显示一组影片剪辑，就好像有一个“活动”或“在focus' 单元格，其中将显示唯一的影片剪辑。同样，我猜测 Flash 正在尝试仅显示可滚动 DataGrid 的可见部分中的影片剪辑，并在每次滚动时尝试刷新。然而，只有 1 个单元格显示影片剪辑，而不是所有可见部分（大约 8 行）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:34:06.587

可能它与数据网格单元虚拟化有关，因为它试图优化滚动性能并回收单元布局。尝试将虚拟布局设置为 false，也许会有所帮助。

# jquery - 当需要几秒钟来获取返回的数据时，jQuery .ajax() 在 Safari 中不起作用

> ID：12176795
> 
> 赞同：4
> 
> 时间：2012-08-29T11:23:16.083
> 
> 标签：jquery, ajax, post, safari, get

我正在使用 jQuery ajax() 方法将（GET）数据传递到另一个 ExportData 页面，并在该页面处理后获取返回的数据（“成功/失败”）。ExportData 页面在返回“成功/失败”之前大约需要 10 秒。

我使用的代码在其他浏览器（FF/IE/Chrome）中运行良好，但在 Safari 中却不行。在 Safari 的代码检查器中，显示的状态代码是 -1001，并且没有收到任何数据。虽然还有其他 ajax() 请求（只要此页面返回数据就不需要）并且它们确实有效（状态为 200）。

我猜测发送和接收数据之间的长时间间隔会导致 Safari 出错。但是我也发现 -1001 错误显示得非常快，这可能意味着 ExportData.php 没有执行。

有人知道这个问题吗？对你的帮助表示感谢！

代码是：

```
ExportData: function (date,view) {
    ajaxcall.data = {};
    ajaxcall.url = 'ExportData.php?Date='+date+'&View='+view;
    ajaxcall.callbackfunction = UserEvents.ExportSuccess;
    ajaxcall.Call();
}, 
```

“ajaxcall”在另一个文件中：

```
var ajaxcall = {
    SitePath: '',
    data: '',
    url: '',
    callbackfunction: '',
    fileElementClass: '',
    AjaxRequest: false,
    callback: true,
    Call: function () {
        if (ajaxcall.AjaxRequest == true) {
            alert(ajaxcall.AjaxRequest);
            return;
        }
        else {
            try {
                ajaxcall.AjaxRequest == true;
                $.ajax({
                    type: "GET", 
                    url: ajaxcall.url,
                    data: ajaxcall.data,
                    dataType: "json",
                    async: false,
                    success: function (data) {
                            if (ajaxcall.callback == true) {
                                ajaxcall.callbackfunction(data);
                            }
                    },
                    error: function (request, status, error) {},
                    complete: function () {
                        ajaxcall.AjaxRequest = false;
                    }
                });
            }
            catch (e) {
                ajaxcall.AjaxRequest == false;
            }
        }
    },
}; 
```

谢谢，肖恩刘

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-31T16:33:40.337

这是一个老问题，我不确定你是否找到了答案，但我们最近遇到了同样的问题。经过大量研究和测试，我们发现 Safari 会忽略同步 AJAX 调用的超时设置，限制为 10 秒。我想这被认为是用户体验的事情，因为同步调用会使页面看起来挂起，并且他们可能会认为长时间这样做不是用户友好的，或者是无响应的页面。

因此，您基本上有两个选择，您可以修改代码以使用输出缓冲区定期发回数据。这应该会触发 Safari 识别该请求至少处于活动状态并做出响应，并且通常不会强制它超时。我们从未尝试过，所以我不能保证，但我在这里和那里看到了一些不同的成功故事。另一种选择是将 AJAX 调用更改为异步调用。这可能是更简单的方法，但如果您的应用程序依赖于同步调用，您可能需要实现一些承诺来“模拟”同步响应。

作为参考，这里是我们开始追踪问题的地方：[http](https://web.archive.org/web/20150223082529/http://propercode.com/wordpress/?p=32) ://propercode.com/wordpress/?p=32 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:50:14.453

Try setting a `timeout` in your [settings](http://api.jquery.com/jQuery.ajax/) object.

> Set a timeout (in milliseconds) for the request. This will override any global timeout set with [$.ajaxSetup()](http://api.jquery.com/jQuery.ajaxSetup). The timeout period starts at the point the $.ajax call is made; if several other requests are in progress and the browser has no connections available, it is possible for a request to time out before it can be sent. In jQuery 1.4.x and below, the XMLHttpRequest object will be in an invalid state if the request times out; accessing any object members may throw an exception. In Firefox 3.0+ only, script and JSONP requests cannot be cancelled by a timeout; the script will run even if it arrives after the timeout period.

# objective-c - layoutSubviews 在 ios4 中可用吗？

> ID：12176796
> 
> 赞同：0
> 
> 时间：2012-08-29T11:23:17.923
> 
> 标签：objective-c, xcode, ios4, uiscrollview

我在 Xcode 3.2 和 ios 4.1 中工作。我需要在 layoutSubviews 上工作，但我在 Windows 和基于视图的应用程序中都没有找到该功能。谁能告诉我ios4x中是否有“layoutSubviews”。如果有的话，告诉我在哪里。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:26:59.480

来自[Apple 的文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/layoutSubviews)

```
- (void)layoutSubviews 
```

> 在 iOS 2.0 及更高版本中可用。
> 
> 子类可以根据需要重写此方法，以对其子视图执行更精确的布局。仅当子视图的自动调整大小行为不提供您想要的行为时，您才应该覆盖此方法。您可以使用您的实现直接设置子视图的框架矩形。您不应直接调用此方法。如果要强制更新布局，请在下一次绘图更新之前调用 setNeedsLayout 方法。如果您想立即更新视图的布局，请调用 layoutIfNeeded 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:26:22.100

是的。

这是苹果文档链接：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

# silverlight - Silverlight 中的 ItemsControl Grid.Row Grid.Column 绑定

> ID：12176798
> 
> 赞同：0
> 
> 时间：2012-08-29T11:23:25.880
> 
> 标签：silverlight, windows-phone-7, binding, grid, itemscontrol

我正在尝试使用 ItemsControl 为 Grid.Row 和 Grid.Column 使用不同的 X 和 Y 值填充网格，我从我的 WPF 项目中复制了它，但无法让它在 Silverlight (Windows Phone) 中工作。

这是它的简化版本：

DataContext 设置为的 ViewModel：

```
public class ViewModel
{
    public ObservableCollection<GridItem> Data { get; set; }

    public ViewModel()
    {
        Data = new ObservableCollection<GridItem>();
        FillData();
    }

    // fill Data property with some random color GridItems
    private void FillData()
    {
        string[] colors = { "Red", "Green", "Yellow", "Blue" };
        Random r = new Random();

        for (int i = 0; i < 10; i++)
        {
            Data.Add(new GridItem(i, i, colors[r.Next(colors.Length)]));
        }
    }
}

public class GridItem
{
    public int X { get; set; }
    public int Y { get; set; }
    public string Color { get; set; }

    public GridItem(int x, int y, string color)
    {
        X = x;
        Y = y;
        Color = color;
    }
} 
```

XAML：

```
<Grid x:Name="LayoutRoot" Background="Transparent">

    <ItemsControl ItemsSource="{Binding Data}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>                    
            <Grid Background="Orange">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
            </Grid>
        </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Ellipse 
                    Grid.Row="{Binding Y}" 
                    Grid.Column="{Binding X}"
                    Fill="{Binding Color}"
                    Stroke="White" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

这是结果（它将所有椭圆放在彼此之上）：

![结果](../Images/dd385cf6de944857518196796349af44.png)

虽然它应该这样做：

![意图](../Images/90f0f1c54f331a324f60581d9661457a.png)

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:04:21.787

尝试在 ContentPresenter 中设置 Grid.Row 和 Grid.Column 的绑定，而不是作为定义 Ellipse 的 DataTemplate 的一部分：

```
 <ItemsControl.Resources>
        <Style TargetType="ContentPresenter">
            <Setter Property="Grid.Row" Value="{Binding Y}"/>
            <Setter Property="Grid.Column" Value="{Binding X}"/>
        </Style>
    </ItemsControl.Resources>
    <ItemsControl.ItemTemplate> 
        <DataTemplate> 
            <Ellipse  
                Fill="{Binding Color}" 
                Stroke="White" /> 
        </DataTemplate> 
    </ItemsControl.ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T03:07:59.487

这是因为`DataTemplate`将其内容包装在`ContentPresenter`. 和属性仅适用于直接后代`Grid.Row`，`Grid.Column`因此在这种情况下它们不相关，因为它们在控制层次结构中处于两个层次。

是在渲染`ContentPresenter`时在运行时动态添加的。`DataTemplate`要完成这项工作，您需要挂钩项目的动态生成并在包含项目上设置`Row`和`Column`附加属性。

有一篇博客文章显示了一种实现此功能的方法：[http ://www.scottlogic.co.uk/blog/colin/2010/11/using-a-grid-as-the-panel-for-an-项目控制/](http://www.scottlogic.co.uk/blog/colin/2010/11/using-a-grid-as-the-panel-for-an-itemscontrol/)

# .net - 通过 SQLDMO 连接 SQL 服务器

> ID：12176808
> 
> 赞同：2
> 
> 时间：2012-08-29T11:24:04.720
> 
> 标签：.net, sql, vb.net, connection, sqldmo

我能够通过驻留在我的托管服务器上的 SQLDMO 连接到远程 SQL 服务器。没有问题。现在，由于我刚刚切换到新的托管服务提供商，我可以通过 SQL Server Management Studio 连接到数据库服务器，但 SQLDMO 我无法再连接。

这是我的 VB.NET 代码：

```
 Dim oServer as New SQLDMO.SQLServer2
    oServer.EnableBcp = True
    oServer.Connect(pServer, pUserName, pPassword) 
```

在第三行弹出一个错误说：

“[Microsoft][ODBC SQL Server Driver][DBNETLIB]Invalid connection。[Microsoft][ODBC SQL Server Driver][DBNETLIB]ConnectionOpen（Invalid Instance()）。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:44:26.200

您需要检查您的连接字符串中是否使用了正确的数据源名称。如果您使用的是 localhost，请尝试使用服务器的 IP 地址。如果您有带有实例的 SQL 服务器，则在连接字符串中使用带有服务器 Ip 的实例名称。

[http://forums.esds.co.in/f4/dbnetlib-connectionopen-invalid-instance-invalid-connection-4139/](http://forums.esds.co.in/f4/dbnetlib-connectionopen-invalid-instance-invalid-connection-4139/)

# wcf - 单例模式下的 WCF 实例化，使用负载均衡器

> ID：12176820
> 
> 赞同：2
> 
> 时间：2012-08-29T11:24:59.323
> 
> 标签：wcf

在 WCF 实例化模式方面，目前我们使用的是单例，我认为这应该是错误的，因为我们使用负载均衡器来接近 Web 服务。我知道，如果 WCF 处于 Singleton 模式，那么将只有一个实例负责“无论我们指向哪个端点”的所有请求。所以当负载均衡器决定选择这个模式的端点应该是错误的！你对此有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:31:09.697

如果您没有在服务类中保留任何交叉请求状态（您不应该！），只需切换到 PerCall（您应该这样做）。拥有一个无状态 Web 服务，所有可变状态都在数据库中、缓存中或封装在某个特殊用途的类中。

有状态的 Web 应用程序必须经过精心设计才能正确。例如，如果您重新部署应用程序会发生什么？在此过程中，所有状态都将被删除。所以无论如何你都不能拥有那种状态。

# ebay-api - 如何使用 eBay 交易 API 完成购买

> ID：12176822
> 
> 赞同：5
> 
> 时间：2012-08-29T11:24:59.907
> 
> 标签：ebay-api

我能够使用 PlaceOfferRequest (XML) 提供报价。我应该怎么做才能完成购买并将送货地址更新到他/她应该运送物品的地方？

我正在使用 XML 来发布请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:48:47.957

While I can't find any official resource stating that completing purchases isn't possible, I'm 99% sure that its simply not possible. All you can do is redirect the user to the payments page, using this template for the URL:

`http://payments.${DOMAIN}/ws/eBayISAPI.dll?CheckoutProcessor&item=${Item.ItemID}&transactionId=${TransactionID}`

Where DOMAIN could be, for example, "sandbox.ebay.de" or just "ebay.com".

# mysql - 使用 LIKE 进行 SQL 更新

> ID：12176824
> 
> 赞同：8
> 
> 时间：2012-08-29T11:25:09.883
> 
> 标签：mysql, database

我试图通过使用类似这样的语句来更新表中的大约 20,000 条记录，但是，我收到消息说它`0 row(s) affected`不起作用。

```
UPDATE nc_files SET title ="Worklog details" WHERE "log_name" LIKE "%PC01%" 
```

该`log_name`字段具有混合文件扩展名和大小写的所有文件名，例如

```
PC01.TXT | Worklog details

PC02.txt | Project Summary

PC03.DOC| Worklog details

PC04.doc| Project Summary 
```

我需要使用的原因`LIKE`是更新的文件只有文件名没有扩展名，例如

```
PC01 | Worklog details

PC02 | Project Summary 
```

如何使用 更新记录`LIKE`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T11:30:25.357

这`log_name`是一个字段名称，从中删除文字引号 -

```
UPDATE nc_files SET title ="Worklog details" WHERE log_name LIKE "%PC01%" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:30:11.300

这是因为您的列名`log_name`不应该用`'`引号引起来。

`"log_name" LIKE "%PC01%"`条件总是会失败并且零行会被更新，试试这个：

```
UPDATE nc_files 
SET title ="Worklog details" 
WHERE log_name LIKE "%PC01%"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:05:13.640

默认情况下，MySQL 允许将双引号名称理解为*标识符*（如列名）或字符串文字。

这是为了方便，但我发现语义上的歧义令人沮丧。MySQL 必须解决歧义，并且不能像您发现的那样总是神奇地猜测编码器的意图。

```
-- In default sql_mode under 5.5
--
SELECT "foo"           -- "foo" is a *column* if tbl.foo exists, otherwise a string 
  FROM "tbl"           -- Oops!  ER_PARSE_ERROR (1064)  Can't do this in default mode.
 WHERE "foo" = "foo";  -- Both of these are strings 
```

因此，解决它的方法是强制对标识符进行明确的解释：

1.  不要引用简单的标识符
2.  使用 MySQL 特定的反引号进行引用
    （这是 ODBC 的 SQL_IDENTIFIER_QUOTE_CHAR）
3.  始终覆盖更改`sql_mode`以包含[ANSI_QUOTES](http://dev.mysql.com/doc/refman/5.6/en/server-sql-mode.html#sqlmode_ansi_quotes)（或其超集）
    然后双引号专门用于标识符，单引号用于字符串。

#3 是我个人最喜欢的，因为它具有可读性和可移植性。问题是它往往会让只知道 MySQL 的人感到惊讶，并且您必须记住覆盖默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:30:48.527

```
"log_name" should not be in quotes 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-09T16:24:57.980

我遇到了类似的麻烦。问题是引号“我修正了我的代码如下。

UPDATE Table SET Table.Field = "myreplace" WHERE (((Table.Field) Like '%A-16%'));

问候， Alexwin1982

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-10T07:01:00.317

尝试替换关键字 UPDATE `nc_files`SET `title`= REPLACE( `title`, 'PC01', 'Worklog details') WHERE log_name LIKE '%PC01%'

# django - 登录表单的问题

> ID：12176825
> 
> 赞同：0
> 
> 时间：2012-08-29T11:25:24.910
> 
> 标签：django, django-views

我正在 django 中制作登录表单。当我运行应用程序并填写用户名和密码字段时。页面总是重定向到一个条件（无论用户名是否正确）。

代码如下：

```
def home(request):

   if request.method == 'POST':
      username = request.POST.get('user_name')
      password = request.POST.get('password')
      user = authenticate(user_name=username, password=password)
      if user is not None:
        if user.is_active:
           login(request, user)
        # success
           return render_to_response('registration/main_page.html',{'form':login},context_instance=RequestContext(request))
        else:
         #user was not active
           return render_to_response('registration/q.html')
      else:
        # not a valid user
           return render_to_response('registration/home.html')

   else:
       # URL was accessed directly
           return render_to_response('registration/w.html') 
```

它总是重定向到 home.html

```
else:
             #user was not active
              return render_to_response('registration/home.html') 
```

为什么会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:32:08.707

`authenticate()`函数`username`不需要`user_name`。

尝试这个：`user = authenticate(username=username, password=password)`

另外，`if user is not None:`你可以写`if user :`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:32:05.153

看来您的函数在这里返回一个 None 对象：

```
if user is not None 
```

您可以添加打印语句来固定它，

```
if request.method == 'POST':
      username = request.POST.get('user_name')
      password = request.POST.get('password')

      print username # what does it return?

      user = authenticate(user_name=username, password=password)

      print user # what does it return?

      if user is not None:
          #... 
```

# iphone - IP 地址的可达性不起作用。

> ID：12176829
> 
> 赞同：1
> 
> 时间：2012-08-29T11:25:37.140
> 
> 标签：iphone, xcode, ip-address, reachability

输入 Apple 提供的 Rechability 类后。同样在输入后，ReachabilityreachabilityWithAddress:(const struct sockaddr_in *)hostAddress。我们应该如何在这一行输入我们要检查的 IP 地址？这是我真正迷失的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:57:35.643

`struct sockaddr_in`是 BSD 套接字使用的低级“套接字地址”类型。我们通常不会在 Cocoa 级别处理它们，但它们会不时出现，包括在 Apple 的演示类中。原因是因为在其创建功能之一中`SCNetworkReachability`使用了 a 。`struct sockaddr_in`

然而，幸运的是，您可以在`+reachabilityWithHostName:`方法中提供一个字符串，其中包括 IP 地址（与主机名一样，底层网络 API 将自动为您解析这些地址。）

```
Reachability *r = [Reachability reachabilityWithHostName:@"1.2.3.4"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:53:14.757

请尝试以下方法：

```
if ([[Reachability reachabilityForInternetConnection] currentReachabilityStatus] == NotReachable) {
        // do somehting meaningful!
} 
```

或者更具体地说：

```
Reachability* reachability = [Reachability sharedReachability];
[reachability setHostName:@"www.google.com"]; // set your host name/ip here
NetworkStatus remoteHostStatus = [reachability remoteHostStatus];

if (remoteHostStatus == NotReachable) { NSLog(@"no"); }
else if (remoteHostStatus == ReachableViaWiFiNetwork) { NSLog(@"wifi"); }
else if (remoteHostStatus == ReachableViaCarrierDataNetwork) { NSLog(@"cellular"); } 
```

# clojure - Clojure 中的快速排序

> ID：12176832
> 
> 赞同：29
> 
> 时间：2012-08-29T11:25:41.223
> 
> 标签：clojure

我试图证明 Clojure 的性能可以与 Java 平起平坐。我发现的一个重要用例是快速排序。我写了一个实现如下：

```
(set! *unchecked-math* true)

(defn qsort [^longs a]
  (let [qs (fn qs [^long low, ^long high]
             (when (< low high)
               (let [pivot (aget a low)
                     [i j]
                     (loop [i low, j high]
                       (let [i (loop [i i] (if (< (aget a i) pivot)
                                             (recur (inc i)) i))
                             j (loop [j j] (if (> (aget a j) pivot)
                                             (recur (dec j)) j))
                             [i j] (if (<= i j)
                                     (let [tmp (aget a i)]
                                       (aset a i (aget a j)) (aset a j tmp)
                                       [(inc i) (dec j)])
                                     [i j])]
                         (if (< i j) (recur i j) [i j])))]
                 (when (< low j) (qs low j))
                 (when (< i high) (qs i high)))))]
    (qs 0 (dec (alength a))))
  a) 
```

此外，这有助于调用 Java 快速排序：

```
(defn jqsort [^longs a] (java.util.Arrays/sort a) a)) 
```

现在，为了基准。

```
user> (def xs (let [rnd (java.util.Random.)] 
        (long-array (repeatedly 100000 #(.nextLong rnd)))))
#'user/xs
user> (def ys (long-array xs))
#'user/ys
user> (time (qsort ys))
"Elapsed time: 163.33 msecs"
#<long[] [J@3ae34094>
user> (def ys (long-array xs))
user> (time (jqsort ys))
"Elapsed time: 13.895 msecs"
#<long[] [J@1b2b2f7f> 
```

性能是天壤之别（一个数量级，然后是一些）。

有什么我遗漏的，我可能使用过的任何 Clojure 功能吗？我认为性能下降的主要来源是当我需要从循环中返回多个值并且必须为此分配一个向量时。这可以避免吗？

[顺便说一句，运行 Clojure 1.4。另请注意，我已多次运行基准测试以预热 HotSpot。这些是他们安定下来的时候。]

# 更新

我的代码中最可怕的弱点不仅仅是向量的分配，而是它们强制装箱并破坏原始链的事实。另一个弱点是使用结果，`loop`因为它们也会破坏链条。是的，Clojure 中的性能仍然是一个雷区。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-29T16:27:46.127

这个版本基于@mikera，速度一样快，不需要使用丑陋的宏。在我的机器上，java.util.Arrays/sort 需要 ~12ms 而 ~9ms：

```
(set! *unchecked-math* true)
(set! *warn-on-reflection* true)

(defn swap [^longs a ^long i ^long j]
  (let [t (aget a i)]
    (aset a i (aget a j))
    (aset a j t)))

(defn ^long apartition [^longs a ^long pivot ^long i ^long j]
  (loop [i i j j]
    (if (<= i j)
      (let [v (aget a i)]
        (if (< v pivot)
          (recur (inc i) j)
          (do 
            (when (< i j) 
              (aset a i (aget a j))
              (aset a j v))
            (recur i (dec j)))))
      i)))

(defn qsort 
  ([^longs a]
     (qsort a 0 (long (alength a))))
  ([^longs a ^long lo ^long hi]    
     (when
         (< (inc lo) hi)
       (let [pivot (aget a lo)
             split (dec (apartition a pivot (inc lo) (dec hi)))]
         (when (> split lo)
           (swap a lo split))
         (qsort a lo split)
         (qsort a (inc split) hi)))
     a))

(defn ^longs rand-long-array []
  (let [rnd (java.util.Random.)] 
    (long-array (repeatedly 100000 #(.nextLong rnd)))))

(comment
  (dotimes [_ 10]
    (let [as (rand-long-array)]
      (time
       (dotimes [_ 1] 
         (qsort as)))))
  ) 
```

从 Clojure 1.3 开始，几乎不需要手动内联。仅在函数参数上提供一些类型提示，JVM 将为您执行内联。对于数组操作，不需要将索引参数强制转换为 int - Clojure 会为您执行此操作。

需要注意的一件事是嵌套循环/递归确实会给 JVM 内联带来问题，因为循环/递归（此时）不支持返回原语。所以你必须把你的代码分解成单独的 fns。这是最好的，因为无论如何嵌套循环/递归在 Clojure 中变得非常丑陋。

要更详细地了解如何始终如一地实现 Java 性能（当您真正需要它时），请检查并理解[test.benchmark](http://github.com/clojure/test.benchmark)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-29T13:48:55.003

由于宏，这有点可怕，但是使用这段代码，我认为您可以匹配 Java 速度（基准测试大约需要 11 毫秒）：

```
(set! *unchecked-math* true)

(defmacro swap [a i j]
  `(let [a# ~a
         i# ~i
         j# ~j
         t# (aget a# i#)]
     (aset a# i# (aget a# j#))
     (aset a# j# t#)))

(defmacro apartition [a pivot i j]
  `(let [pivot# ~pivot]
     (loop [i# ~i
            j# ~j]
       (if (<= i# j#)
         (let [v# (aget ~a i#)]
           (if (< v# pivot#)
             (recur (inc i#) j#)
             (do 
               (when (< i# j#) 
                 (aset ~a i# (aget ~a j#))
                 (aset ~a j# v#))
               (recur i# (dec j#)))))
         i#))))

(defn qsort 
  ([^longs a]
    (qsort a 0 (alength a)))
  ([^longs a ^long lo ^long hi]    
    (let [lo (int lo)
          hi (int hi)]
      (when
        (< (inc lo) hi)
        (let [pivot (aget a lo)
              split (dec (apartition a pivot (inc lo) (dec hi)))]
          (when (> split lo) (swap a lo split))
          (qsort a lo split)
          (qsort a (inc split) hi)))
      a))) 
```

主要技巧是：

*   用原始算术做所有事情
*   对数组索引使用整数（这可以避免一些不必要的强制转换，没什么大不了的，但每一点都有帮助....）
*   使用宏而不是函数来分解代码（避免函数调用开销和参数装箱）
*   在内部循环中使用循环/递归以获得最大速度（即分区子阵列）
*   避免在堆上构造任何新对象（因此避免使用向量、序列、映射等）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-29T15:32:34.557

[Clojure 的乐趣](http://joyofclojure.com/)，第 6.4 章描述了一种惰性快速排序算法。惰性排序的美妙之处在于它只会做尽可能多的工作来找到第一个 x 值。所以如果 x << n 这个算法是 O(n)。

```
(ns joy.q)

(defn sort-parts
  "Lazy, tail-recursive, incremental quicksort.  Works against
   and creates partitions based on the pivot, defined as 'work'."
  [work]
  (lazy-seq
   (loop [[part & parts] work]
     (if-let [[pivot & xs] (seq part)]
       (let [smaller? #(< % pivot)]
         (recur (list*
                 (filter smaller? xs)
                 pivot
                 (remove smaller? xs)
                 parts)))
       (when-let [[x & parts] parts]
         (cons x (sort-parts parts)))))))

(defn qsort [xs]
    (sort-parts (list xs))) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-29T14:13:57.510

通过检查 mikera 回答的要点，您可以看到它们主要集中在消除使用惯用的（而不是经过调整的）Clojure 引入的开销，这在惯用的 Java 实现中可能不存在：

*   *原始算术*- 在 Java 中稍微更容易和更惯用，你更可能使用`int`s 而不是`Integer`s
*   *数组索引*的整数 - 相同
*   *使用宏而不是函数来分解代码（避免函数调用开销和装箱）* - 修复了使用语言引入的问题。Clojure 鼓励函数式风格，因此函数调用开销（和装箱）。
*   *在内部循环中使用循环/递归以获得最大速度*- 在 Java 中，您会习惯性地使用普通循环（据我所知，无论如何循环/递归都是编译成的）

话虽如此，实际上还有另一个简单的解决方案。编写（或找到）快速排序的有效 Java 实现，用这样的签名说一些东西：

`Sort.quickSort(long[] elems)`

然后从 Clojure 调用它：

`(Sort/quickSort elems)`

清单：

*   与 Java 一样高效 -**是的**

*   Clojure 中的惯用语 -**可以说是**的，我会说 Java 互操作是 Clojure 的核心功能之一。

*   可重用 -**是**的，您很有可能很容易找到已经编写的非常高效的 Java 实现。

[我不是要拖钓，我理解你想通过这些实验找出什么我只是为了完整起见添加这个答案。让我们不要忽视显而易见的！:)]

# eclipse - Eclipse 查找和替换

> ID：12176833
> 
> 赞同：2
> 
> 时间：2012-08-29T11:25:40.963
> 
> 标签：eclipse

有没有一种快速的方法来替换它：

```
public static String ACCESSDENIED = Resources.strings.getString(Resources.ACCESS_DENIED); 
```

和：

```
public stattic String getAccessDenied(){
 return Resources.strings.getString(Resources.ACCESS_DENIED);
} 
```

我需要在大约 100 个变量中替换所有对 getter 的静态引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:33:29.783

使用*右键单击 --> Refactor --> Encapsulate Field... --> (new getter created)*，一切都会自动完成（这是一个防弹的解决方案）。

您还可以在*预览*窗口中验证结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:39:39.823

我设法通过使用正则表达式的查找和替换来做到这一点。

```
Find: = (.+);
Replace: () { return $1; } 
```

# php - 通过 jquery 的 php 测试脚本，将值传递给 php 文件

> ID：12176836
> 
> 赞同：0
> 
> 时间：2012-08-29T11:25:48.307
> 
> 标签：php, jquery

主题不清楚，但我会尝试解释。

我正在编写 php 测试测验脚本。我想用 jquery 和 php 来做。我在表格中列出问题和答案。

当您提交表单时，我将它们发送到`test.php`via`$.ajax()`并随身携带，`$_SERVER['QUERY_STRING']`但问题是如果有人不选择回答，它不会传递空值。所以我可以计算刚刚回答的问题。

这是我的代码：

```
$data=$_SERVER['QUERY_STRING']; 
```

我正在处理这些数据，但它不包括未回答的问题，所以我无法计算点。

html+php部分：

```
<form id="form1" name="form1" method="post" action="" class="form">

 <?php 

$sorgu=mysql_query("select * from question");
         $i=1;
                while($s=mysql_fetch_array($sorgu))
                {

                    $id=$s["id"];
                    $soru=$s["soru"];

                        $csorgu=mysql_query("select * from answer where q_id='$id'");

                        echo $i."-) ".$Question;
                        $i+=1;
                            while($c=mysql_fetch_array($csorgu))
                                {

                                    $soru_id=$c["soru_id"];
                                    $answer=$c["cevap"];
                                    $d=$c["d"];
                                    $cid=$c["id"];

                            ?>  

  <p>
    <label>
      <input type="radio" name="<?php echo $soru_id; ?>" value="<?php echo $cid; ?>"  />
      <?php echo $answer; ?></label>
    <label>

  </p>

<?php
}

                }
                ?>
                </form> 
```

jQuery：

```
$('#form1').submit(function(){

var myRadio = $("#form1 input[type='radio']:checked").val();
var form=($('#form1').serialize());

    $.ajax({
          type:"get",           
          url: "test.php?do=test",
          data:form,
          success: function(result){

            alert(result);
                                    }   
    }); 
```

你不需要我的积分计算系统：

```
$data=$_SERVER['QUERY_STRING'];

$data2=explode("&",$data); 

for ($i=0;$i<count($data2);$i++)
{
    $seri = explode("=", $data2[$i]);
    $seri_dizi[$i]=$seri[1];
}
unset($seri_dizi[0]);

$answer = array_count_values($seri_dizi);
@$false_answer=($answer["0"]);
$total_question=count($seri_dizi);

if($false_answer=" ") $false_answer=0;

$correct_answer=$total_question-$false_answer; 
```

我知道正确答案和错误答案，但我不知道有多少问题没有回答

如果你有任何解决方案我在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:31:08.717

最简单的方法可能是为您的问题添加“未回答”回复，默认选中，如下所示：

例如 ：

```
 <input type="radio" name="my_question_1" value="0" checked/> Not answered
 <input type="radio" name="my_question_1" value="1"/> The first answer
 <input type="radio" name="my_question_1" value="2"/> The second answer 
```

# javascript - 使用传单和 geoJson 监控对象

> ID：12176838
> 
> 赞同：1
> 
> 时间：2012-08-29T11:25:53.283
> 
> 标签：javascript, geojson, leaflet

**任务是：**

*根据现有地理数据（一组纬度/经度值）在地图上显示对象（标记）。地理数据会定期更新，就像是对地图上对象的一种交互式监控。*

我正在使用传单框架来实现目标。此外，我正在使用 geoJson 输出 geoData（具有纬度/经度坐标的对象）。这是我的一段代码：

```
// for a start make it as a template
var geoData = {
  "type": "FeatureCollection",
  "features": []
};

// add a feature, assign an id and properties
function addFeature(id, latitude, longitude, properties) {
  // first of all check if the feature have already exists
  var index = IndexOfItem(id);
  if (index >= 0) {
    // if exists then update only coordinates and properties
    geoData.features[index].geometry.coordinates = [longitude, latitude];
    geoData.features[index].properties.popupContent = properties;
  } else {
    // add new feature
    var feature = {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [longitude, latitude]
      },
      "properties": {
        "popupContent": properties
      },

      "id": id
    };
    geoData.features.push(feature);
  }
}

// search and return the index of feature if exists
function IndexOfItem(id) {
  for (var i = 0; i < geoData.features.length; i++) {
    if (id == geoData.features[i].id) {
      return i;
    }
  };
  return -1;
} 
```

这段代码工作正常。之后，我添加了这些特征的新层，当数组更新时（一些特征改变了坐标），我必须从地图中删除层并创建一个新的 L.geoJson(geoData) 对象。该过程一遍又一遍地重复，而要素的坐标会更新。

实际上我不擅长 JavaScript，只有这样我才能解决这个任务。但在我看来，这就像一个硬编码，可能有一些 JavaScript 方法可以更优雅地解决问题。有人可以给我一些建议（或想法）如何更好地做到这一点甚至获得更多性能吗？我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T20:34:22.953

您应该只使用 L.layerGroup 并从该集合中添加和删除以进行管理。也许还可以使用数据绑定框架来缓存地图视图，以便它可以实时更改，而不必刷新。

# javascript - 未捕获的类型错误：对象函数 getElementById() { [native code] } 没有方法“addEventListener”

> ID：12176839
> 
> 赞同：0
> 
> 时间：2012-08-29T11:26:04.317
> 
> 标签：javascript, extjs

我对 extJs 和 JavaScript 很陌生。我的 JavaScript 代码出现错误。我创建了一个 ExtJs 按钮并为其分配了一个处理程序。处理程序创建一个 ExtJs 消息框。问题是，单击按钮时，未创建消息框。当我使用 Chrome 进行调试时，我得到了这个错误：

> “未捕获的 TypeError：对象函数 getElementById() { [native code] } 没有方法 'addEventListener'”

我已经四处寻找，但到目前为止一无所获。下面是代码：

```
var fBtn1 = new Ext.Button({
    text: 'Forward',
    tooltip: 'Send this message to more recipients',
    handler : getBox
});

function getBox() {      
    Ext.MessageBox.confirm('hello', 'how is it');
} 
```

# c++ - 如何在 C++/wxWidgets 中将字符串保存到文件中

> ID：12176842
> 
> 赞同：-4
> 
> 时间：2012-08-29T11:26:13.083
> 
> 标签：c++, file, save, wxwidgets

我想知道如何在 wxWidgets 中保存文件。没有向导！

特别是，我想将一个字符串保存`Hello world!`到文件中。希望你能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:02:30.667

[wxTextFile](http://docs.wxwidgets.org/trunk/classwx_text_file.html)应该对此有所帮助。 [示例代码](http://wiki.wxwidgets.org/Reading_text_from_a_file)。

# java - Java TCP 套接字

> ID：12176853
> 
> 赞同：0
> 
> 时间：2012-08-29T11:26:40.170
> 
> 标签：java, sockets, tcp, inputstream

尝试从套接字读取 InputStream 时遇到阻塞问题。
这是服务器端的代码：

```
public static void main(String[] args) throws Exception {
    if (args.length != 1) {
        throw new IllegalArgumentException("Parameter : <Port>");
    }

    int port = Integer.parseInt(args[0]); // Receiving port

    ServerSocket servSock = new ServerSocket(port);
    String s;
    Socket clntSock = servSock.accept();
    System.out.println("Handling client at "
            + clntSock.getRemoteSocketAddress());
    in = new BufferedReader(
            new InputStreamReader(clntSock.getInputStream()));
    out = new PrintWriter(clntSock.getOutputStream(), true);

    while (true) {
        s = in.readLine();
        System.out.println("s : " + s);
        if (s != null && s.length() > 0) {
            out.print(s);
            out.flush();
        }
    }
} 
```

这是我发送和接收数据（字符串）的客户端部分：

```
while (true) {
    try {
        // Send data
        if (chatText.getToSend().length() != 0) {
            System.out.println("to send :"
                    + chatText.getToSend().toString());
            out.print(chatText.getToSend());
            out.flush();
            chatText.getToSend().setLength(0);
        }

        // Receive data
        if (in.ready()) {
            System.out.println("ready");
            s = in.readLine();
            System.out.println("s : " + s);
            if ((s != null) && (s.length() != 0)) {
                chatText.appendToChatBox("INCOMIN: " + s + "\n");
            }
        }

    } catch (IOException e) {
        cleanUp();
    }
} 
```

readLine 方法正在阻塞运行上述代码的客户端线程。我怎样才能避免这个问题？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:32:42.463

> readLine 方法正在阻塞运行上述代码的客户端线程。我怎样才能避免这个问题？

readLine 是一个阻塞操作。如果您使用多个线程，这不一定是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:37:19.960

您`readLine()`在期望以 EOL 令牌结尾的行的客户端上使用，但您的服务器端代码未编写 EOL 令牌。使用`println()`而不是`print()`.

为了支持并发客户端，您需要在服务器上分离线程来处理接受的连接：

```
while (true) {
    // Accept a connection
    Socket socket = servSock.accept();

    // Spin off a thread to deal with the client connection
    new SocketHandler(socket).start();
} 
```

# hibernate - 我在 tomcat 控制台中遇到内存泄漏异常

> ID：12176861
> 
> 赞同：2
> 
> 时间：2012-08-29T11:27:18.490
> 
> 标签：hibernate, tomcat, jdbc, memory-leaks, struts2

```
Aug 29, 2012 12:47:44 PM org.apache.coyote.http11.Http11Protocol pause
INFO: Pausing Coyote HTTP/1.1 on http-443
Aug 29, 2012 12:47:44 PM org.apache.coyote.http11.Http11Protocol pause
INFO: Pausing Coyote HTTP/1.1 on http-80
Aug 29, 2012 12:47:45 PM org.apache.catalina.core.StandardService stop
INFO: Stopping service Catalina
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [] registered the JBDC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [] registered the JBDC driver [oracle.jdbc.driver.OracleDriver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0] but has failed to stop it. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1] but has failed to stop it. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2] but has failed to stop it. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [Timer-1] but has failed to stop it. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [MultiThreadedHttpConnectionManager cleanup] but has failed to stop it. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [Timer-2] but has failed to stop it. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [Timer-3] but has failed to stop it. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@3d1848]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@1055eb1]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@1720e5c]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@10cc503]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@15a82f7]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@14c4cc7]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@44aeeb]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@137fac1]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@2fa904]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@1016caf]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@867ca8]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@162062c]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@8345e0]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.commons.lang.builder.ToStringStyle$1] (value [org.apache.commons.lang.builder.ToStringStyle$1@60994a]) and a value of type [java.util.HashSet] (value [[]]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@1eff48d]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@a05e2e]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@872ebe]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@10dbc37]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@bfd4f6]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@366c17]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@f2938f]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@1b593d2]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@1fbe9e6]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@1b9305f]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@116d3cf]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@1abf1f6]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@19a61d3]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@8c6891]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@254464]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@ad40e8]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@807a29]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@d440fc]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@f663e4]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@183b5d]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [null] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@67272d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@e16306]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
Aug 29, 2012 12:47:45 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1] (value [org.apache.xml.security.utils.UnsyncByteArrayOutputStream$1@18bbe2b]) and a value of type [byte[]] (value [[B@12c4f94]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:56:51.187

Tomcat 内置了对某些永久代内存泄漏情况的检测。这是我前段时间写的一篇博文，解释了这个 PermGen 泄漏是什么：http: [//plumbr.eu/blog/what-is-a-permgen-leak](http://plumbr.eu/blog/what-is-a-permgen-leak)。您应该检查您的应用程序以找出 Tomcat 发现的问题的原因。恕我直言，这些日志是不言自明的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:34:28.877

大概这不会在您的 webapp 运行时引起问题，只是当您使用 Tomcat 管理器停止 webapp 时会看到这些错误。

Tomcat 不能释放你的 webapp 使用的所有内存，所以在某些时候，如果你反复重启你的 webapp，Tomcat 会耗尽内存。看起来您创建了许多未清理的 ThreadLocals。

您的选择是：

*   找出为什么这些 ThreadLocals 没有被清理。有很多关于在 Tomcat 中跟踪这种内存泄漏的信息，例如[http://wiki.apache.org/tomcat/MemoryLeakProtection](http://wiki.apache.org/tomcat/MemoryLeakProtection)
*   不要使用 Tomcat 管理器重新启动 webapp，而是重新启动 Tomcat 本身。如果您在该 Tomcat 实例中有任何其他实时 web 应用程序，这不是一个好的选择，但如果您的 web 应用程序是唯一的，则完全可以接受。
*   上面的一个变体：使用管理器重新启动你的 webapp，但要注意它使用了多少内存（泄漏可能不是特别严重）。然后在必要时重新启动 Tomcat。您可能会发现在需要完全重新启动 Tomcat 之前，您可以安全地重新启动 webapp 很多次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T04:47:26.880

我不确定您使用的是哪个版本的 struts2，请确保使用 struts2 标签标记您的 Struts2 问题，否则您将无法得到适当的关注。

这是 struts2 先前版本中的已知错误之一，已在`2.3.3`.The localContext ThreadLocal 中得到修复。停止/取消部署/重新部署 S2 应用程序时未正确清理。在大多数情况下，这将导致 Web 应用程序 ClassLoader 不会被垃圾收集，从而导致重新部署内存泄漏。

请交叉检查您正在使用的 Struts2 的 whihc 版本，如有必要，请将其升级到最新版本。

有关更多详细信息，请参阅[XWork ContainerImpl 导致 ThreadLocal 内存泄漏](https://issues.apache.org/jira/browse/WW-3768)

# javascript - 如何从UIWebView 中的标签获取图像数据

> ID：12176862
> 
> 赞同：1
> 
> 时间：2012-08-29T11:27:20.850
> 
> 标签：javascript, ios, uiwebview

.php 文件返回图像文件，建议在桌面浏览器中使用对话框保存，`UIWebView`仅在页面上显示图像。HTML源代码如下：

```
<html>
   <body style="margin: 0px;">
       <img style="-webkit-user-select: none" 
              src="http://www.freestockphotos.biz/download_small.php">
   </body>
</html> 
```

尝试使用 js 脚本，例如：

```
"var canvas = document.createElement('canvas');"
"canvas.width = img.width;"
"canvas.height = img.height;"
"var ctx = canvas.getContext('2d');"
"ctx.drawImage(img, 0, 0);"
"var dataURL = canvas.toDataURL();" 
```

并`canvas.toDataURL()`通过安全错误

> SECURITY_ERR：DOM 异常 18

**解决方案：**通过提取请求（它具有与 .php 文件请求一起传输以获取正确图像的 POST 参数）从某个下载器（您自己的基于类或其他类）中提取`NSURLRequest`和`UIWebView`下载`NSURLConnection`图像。`AFNetworking`找不到直接从`UIWebView`.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-06T13:01:21.240

通过提取的请求（它具有与 .php 文件请求一起传输以获取正确图像的 POST 参数）从某个下载器（您自己的基于类或其他类）中提取`NSURLRequest`和`UIWebView`下载`NSURLConnection`图像。`AFNetworking`找不到直接从`UIWebView`.

# objective-c - 数组为 nil 时崩溃

> ID：12176864
> 
> 赞同：0
> 
> 时间：2012-08-29T11:27:28.963
> 
> 标签：objective-c, arrays, gdb

当 NSMutableArray、myArray 为 nil 时，试图避免崩溃。

这是我检查数组是否为零的代码行：

```
if (!self.myArray || !self.myArray.count){ 
```

我在这一行之前设置了一个断点，为了使其为零，我进入 gdb 并执行以下操作：

```
(gdb) set self.myArray = nil
(gdb) po self.myArray
0x11064e8 does not appear to point to a valid object. 
```

当我越过**如果**我得到一个 EXC_BAD_ACCESS。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:29:27.330

这将检查您的数组是否为 nil 并且有一个元素。

```
if (myArray != nil && [self.myArray count] > 0){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:31:46.513

检查您的数组是 nil 还是没有任何项目

```
if (!myArray || myArray.count==0) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:32:44.500

很可能两个测试都完成了，或者第二个测试首先完成，在这种情况下，它会尝试从 nil 对象访问 count 并引发错误。

# asp.net - 将参数传递给报表查看器

> ID：12176865
> 
> 赞同：3
> 
> 时间：2012-08-29T11:27:35.810
> 
> 标签：asp.net, reporting-services, reportviewer

我想将参数传递给我的报告视图。我有一个包含数据库值的下拉列表和一个用于在从下拉列表中选择项目后显示报告的按钮。

这是我为添加参数而编写的代码

```
protected void Button1_Click(object sender, EventArgs e)
{
    RenderReport();
}

protected void RenderReport()
{
    try
    {
        ServerReport serverReport = ReportViewer1.ServerReport;
        ReportViewer1.ProcessingMode = ProcessingMode.Remote;
        try
        {
            serverReport.ReportServerUrl = new Uri("http://hedinaily-pc/Reports_HEDI");
        }
        catch (Exception ex)
        {
            Logger.Error(ex.Message, "");
        }
        serverReport.ReportPath = "~/Diagrammes/PresenceTotale.rdlc";
        ReportParameter employe = new ReportParameter();
        employe.Name = "Employe";
        employe.Values.Add(DropDownList1.SelectedValue);
        ReportViewer1.ServerReport.SetParameters( new ReportParameter[] { employe });
        ReportViewer1.Visible = true;               
    }

    catch (Exception ex)
    {
        Logger.Error(ex.Message, "");

    }

} 
```

这是我报告的数据集

![在此处输入图像描述](../Images/aacab72fe4bdc472371137c8012a557e.png)

当我检查我的日志文件时，我发现了这个错误：

```
The attempt to connect to the report server failed.  Check your connection information and that the report server is a compatible version. 
```

谁能告诉我这个错误来自哪里。我花了几个小时在谷歌上搜索我找到了这个[LINK](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/530ed56d-7c84-4d13-8998-80a8bf142197/)但我无法解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:48:38.200

试试这样...

```
ReportViewer1.ServerReport.ReportPath = "FooReport.rdlc";
ReportParameter[] reportParameter = new ReportParameter[2];
reportParameter[0] = new ReportParameter("fooFromDate", dateFrom.ToShortDateString());
reportParameter[1] = new ReportParameter("fooDateTo", dateTo.ToShortDateString());
ReportViewer1.ServerReport.SetParameters(reportParameter);
ReportViewer1.ServerReport.Refresh(); 
```

还`.Refresh()`必须调用方法以便...显示报告..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T15:09:46.267

对于“连接到报表服务器的尝试失败。请检查您的连接信息以及报表服务器是否为兼容版本。” 错误尝试：

`serverReport.ReportPath = "/Diagrammes/PresenceTotale";`

代替：

`serverReport.ReportPath = "~/Diagrammes/PresenceTotale.rdlc";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:42:43.673

一种方法是使用“报告参数”对话框为在本地模式下处理的报告定义参数。您可以定义参数以支持条件格式或在表达式或代码中使用。您不能使用“报表参数”对话框将报表参数映射到查询参数或在数据源过滤器中使用它们。

因此，您可以通过使用 sqlParameters 将参数传递给 SP，就像我们在正常操作中所做的那样。然后执行 SP 将其绑定到报表查看器数据源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:31:53.817

您可以使用此代码进行测试

```
 ReportParameter[] yourParams = new ReportParameter[1];
    yourParams [0] = new ReportParameter("Employe", DropDownList1.SelectedValue);//Adjust value

    this.ReportViewer1.ServerReport.SetParameters(yourParams  ); 
```

# asp.net - asp.net Entity Framework/从数据库更新/表/视图没有定义主键，无法推断出有效的主键

> ID：12176868
> 
> 赞同：1
> 
> 时间：2012-08-29T11:27:41.693
> 
> 标签：asp.net, entity-framework, edmx

我尝试使用实体框架导入的数据库视图之一仅包含两列，一列是整数类型的列，另一列是聚合函数。我收到以下错误。

```
The table/view does not have a primary key defined and no valid primary key could be inferred. This table/view has been excluded. To use the entity, you will need to review your schema, add the correct keys, and uncomment it. 
```

我知道这是一个已知场景，可以通过在视图中包含 Key 列或手动修改 edmx 文件来修复它。

我只是想知道除了上述两个之外是否还有其他解决方案？我不想在我的查询中包含一个额外的列，并且在 edmx 中进行更改是不可行的，因为 DB 更改非常频繁，并且每次我从 db 更新时 edmx 都会被覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:52:01.967

您可以直接在设计器中将这两个属性标记为实体键，但您必须确保这两个属性的复合值始终是唯一的。如果您不能确保无论如何都必须添加另一个唯一列，或者在使用此类实体集时可能会遇到一些其他问题。

# java - HTTP 请求和 IP 地址

> ID：12176870
> 
> 赞同：-1
> 
> 时间：2012-08-29T11:28:11.650
> 
> 标签：java, http, http-headers, netty

我从 HTTP 请求对象中获得了 IP 地址，使用

request.getRmeoteAddr() => 127.0.0.0

但是我使用 netty 并且当我使用

```
SocketAddress socketAddress = channel.getRemoteAddress();
InetSocketAddress inetAddr = (InetSocketAddress)socketAddress;
ipAddress = inetAddr.getAddress().toString();

=> 0.0.0.0.0.1 
```

这在尝试比较时给我带来了问题，我希望它们采用相同的格式......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:33:10.780

当你有一个类表示可以表示为许多不同字符串的东西时，不要比较字符串；比较该类的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:32:03.320

使用 getHostAddress(); 应该这样做。

```
InetSocketAddress inetAddr = (InetSocketAddress)socketAddress;
String address = inetAddr.getAddress().getHostAddress(); 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html#getHostAddress](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html#getHostAddress) ()

# xml - 使用 Xerces 进行 XML 验证中的“&”

> ID：12176873
> 
> 赞同：0
> 
> 时间：2012-08-29T11:28:24.217
> 
> 标签：xml, html-entities, xerces

我正在使用 Xerces 来验证 XML，但是对于具有枚举的标签`{Profit &amp; Loss}`

当我给出值时`Profit &amp; Loss`，Xerces 给出错误：

```
The entity name must immediately follow the '&' in the entity reference.
<in-ab:TypeOfReport>Profit &amp; Loss</in-ab:TypeOfReport> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:33:14.080

你应该使用一个 CDATA 来避免尝试解析 & 符号

# licensing - GPL：你知道它是怎么做的，但是你没有看过代码，那么你自己的代码是 GPL 吗？

> ID：12176875
> 
> 赞同：1
> 
> 时间：2012-08-29T11:28:35.003
> 
> 标签：licensing, gpl

请想象这样一种情况：

1.  你找到了一些 GPL 软件。该软件执行“A”操作。
2.  不用看“A”的源代码，自己实现“A”的相同功能，放入“MyA.cpp”。
3.  在这种情况下，您是否必须将“MyA.cpp”许可为 GPL？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:43:15.893

**我不是律师，这不是法律建议。**

GPL 适用于软件，即受版权保护的材料，而不适用于知识产权法中受专利保护的*想法。*如果您从未见过原始软件的源代码并制作了一个全新的“[无尘室](https://en.wikipedia.org/wiki/Clean_room_design)”实现，那么您拥有该实现的版权，并且*通常*可以(*) 随意许可它。但是，如果您看过原始程序的源代码，事情就会变得复杂*。*当然，证明你没有看到公开的代码本身就足够困难了。

事实上，GNU 项目本身就是这样开始的：他们聘请程序员逐个重写 Unix 操作系统，只关注系统应该如何工作的公开可用描述（手册、书籍），而不是其实际源代码。

(*) 可能存在专利算法等例外情况。我对专利法知之甚少，无法对此发表任何明智的看法。

# ruby-on-rails - 将 Capybara 与 Cucumber 一起使用时未定义的方法“应该”

> ID：12176878
> 
> 赞同：4
> 
> 时间：2012-08-29T11:28:51.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cucumber, capybara, testunit

我正在尝试在我的 Rails 应用程序中同时使用 Capybara 和 Cucumber。所以，这就是我所做的：

*   需要安装的 gem 并将它们添加到`Gemfile`
*   跑了`rails generate capybara:install --cucumber`
*   为黄瓜创建了一个特征及其步骤定义

这是我的功能（是的，我正在创建博客应用程序）：

```
Feature: Browse posts
    So that I can browse through the posts
    As a visitor
    I want to see all and/or particular posts

    Scenario: Viewing all the posts
        Given Posts exist
        When I navigate to the website home
        Then I should see all the posts

    Scenario: Viewing particular post
        Given Post #1 exists
        When I navigate to /posts/view/1
        Then I should see the post with id=1 
```

这是它的步骤定义：

```
Given /^Posts exist$/ do
    assert (not Post.all.empty?), "No posts found at all"
end

Given /^Post #(\d+) exists$) do |id|
    assert Post.find_by_id(id).valid?, "Post ##{ id } was not found at all"
end

When /^I navigate to (.+)$/ do |url|
    if url =~ /^the website home$/ then
        visit '/'
    else
        visit url
    end
end

Then /^I should see all(.+)posts$/ do |delimiter|
    posts = Post.all

    posts.each do |post|
        page.should have_content post.title
    end
end

Then /^I should see the post with id([^\d]{1,})(\d+)$/ do |delimiter, id|
    post = Post.find_by_id id

    page.should have_content post.title
end 
```

运行时`rake cucumber`我收到此消息：

```
Then I should see all the posts     # features/step_definitions/browsing_posts.rb:13
  undefined method `should' for #<Capybara::Session> (NoMethodError)
  ./features/step_definitions/browsing_posts.rb:17:in `block (2 levels) in <top (required)>'
  ./features/step_definitions/browsing_posts.rb:16:in `each'
  ./features/step_definitions/browsing_posts.rb:16:in `/^I should see all(.+)posts$/'
  features/browsing_posts.feature:9:in `Then I should see all the posts' 
```

我究竟做错了什么？是的，我的功能有什么错误吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-29T12:19:17.470

替换`page.should have_content post.title`为`assert page.has_content?(post.title)`。如果可行，请将其应用于其他`have_content`语句

编辑：那些[涉及的语句`should`](https://github.com/jnicklas/capybara#querying)是基于[rspec 期望](https://www.relishapp.com/rspec/rspec-expectations/v/2-11/docs)的，只有当你已经在使用 rspec 或其他一些测试框架时才应该使用 responds_to `should`。从 test::unit 角度来看，这可能只是另一种`assert`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T12:23:29.597

你能试一下吗

```
page.has_content?('foo') 
```

代替

page.should have_content post.title

如果它有效，那么你可以将它与断言一起使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-01T06:12:52.537

在遇到同样的问题后，我尝试过

```
expect(page).to have_content('foo') 
```

这对我来说很好

# python - python M2Crypto HMAC SHA1

> ID：12176886
> 
> 赞同：2
> 
> 时间：2012-08-29T11:29:13.437
> 
> 标签：python, openssl, hmac

我必须以以下方式创建 HMAC_SHA1 哈希：

```
auth_reponse = HMAC_SHA1(key=session_id, data=decypted_challenge) 
```

我怎么能用 M2Crypto 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:59:53.167

尝试：

```
from M2Crypto.EVP import HMAC
import base64

hmac = HMAC(session_id,'sha1')
hmac.update(decypted_challenge)

auth_response = base64.encodestring(hmac.digest()) #Base64 format 
```

或者：

```
auth_response = hmac.digest() #Binary format 
```

问候！

# android - 空指针异常，触摸事件上的 Webview

> ID：12176889
> 
> 赞同：2
> 
> 时间：2012-08-29T11:29:30.657
> 
> 标签：android, webview, nullpointerexception, touch-event

人们最近开始对我的应用程序有问题。当他们在 webview 中滚动页面时强制关闭。下面是他们发给我的堆栈跟踪。**请注意，空指针异常发生在系统提供的 WebView 代码**中。有人知道可能出了什么问题吗？如果需要，我将附上我的应用程序中可能与 WebView 代码中的故障相关的任何部分的代码。

```
 java.lang.NullPointerException  at
 android.webkit.WebView.onTouchEvent(WebView.java:5351)  at
 android.view.View.dispatchTouchEvent(View.java:3952)  at
 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:995)  at
 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)  at
 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)  at
 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)  at
 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)  at
 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1034)  at
 com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1711) at
 com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1145)
 at android.app.Activity.dispatchTouchEvent(Activity.java:2096)  at
 com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1695)
 at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2217)  at
 android.view.ViewRoot.handleMessage(ViewRoot.java:1901)  at
 android.os.Handler.dispatchMessage(Handler.java:99)  at
 android.os.Looper.loop(Looper.java:130)  at
 android.app.ActivityThread.main(ActivityThread.java:3701)  at
 java.lang.reflect.Method.invokeNative(Native Method)  at
 java.lang.reflect.Method.invoke(Method.java:507)  at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)  at
 dalvik.system.NativeStart.main(Native Method) 
```

谢谢你的任何提示。

编辑：

我在页面加载时禁用触摸侦听器并在页面完成时启用它。

```
webView = new WebView(this);
        webView.addJavascriptInterface(this, "DragonLords");
        webView.setWebViewClient(webViewClient);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setScrollBarStyle(1);
        webView.loadData("<body style='background-color: black'>&nbsp</body>", "text/html", "UTF-8");
        webView.setOnTouchListener(this.disablingTouchListener);

private final OnTouchListener disablingTouchListener = new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return webviewDisabled;
        }
    }; 
```

# coding-style - 迭代比线性代码慢吗？哪一个更可取？

> ID：12176893
> 
> 赞同：-2
> 
> 时间：2012-08-29T10:51:16.710
> 
> 标签：coding-style, ruby, standards

过去很多天我有一个问题，在用 ruby​​ 编写代码时，线性代码是否比迭代更快、更可取？

让我举个例子。有一个相同功能的代码块以两种不同的方式编写：

方式一：

```
['dog', 'cat', 'tiger'].each do |pet_name|
  puts "I have many pets, one of them is #{pet_name}."
end 
```

方式二：

```
puts "I have many pets, one of them is dog."
puts "I have many pets, one of them is cat."
puts "I have many pets, one of them is tiger." 
```

所以，我想知道哪个更好更可取？根据我的观点，我认为第二个将花费更少的时间和记忆。但我想确认。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:11:35.723

顺序逻辑更快（请参阅下面的基准），但它几乎不重要。应始终选择更清晰、更易于维护的代码。只有一个被*证明*的需要应该导致一个人停止为程序员优化并开始为机器优化。通过演示，我的意思是测量 - 你运行它并发现它太慢了。

第二个例子违反了[DRY（Don't Repeat Yourself）](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则，是一个小维护问题。

* * *

```
require 'benchmark'

LOOPS = 100000

Benchmark.bm(10) do |x|
  x.report('iteration') do
    LOOPS.times do
      ['dog', 'cat', 'tiger'].each do |pet_name|
        "I have many pets, one of them is #{pet_name}."
      end
    end
  end
  x.report('sequence') do
    LOOPS.times do
      "I have many pets, one of them is dog."
      "I have many pets, one of them is cat."
      "I have many pets, one of them is tiger."
    end
  end
end

# =>                  user     system      total        real
# => iteration    0.200000   0.000000   0.200000 (  0.202054)
# => sequence     0.010000   0.000000   0.010000 (  0.012195) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:56:41.133

在这两种情况下，运行实际 Ruby 代码所花费的时间将完全由将文本打印到屏幕所花费的时间支配。记住：控制台输出很*慢*。*真的很*慢。痛苦的慢。

由于在这两种情况下，代码都会在屏幕上打印相同数量的文本（实际上是*相同*的文本），因此任何可能存在或可能不存在的微小性能差异都会在噪音中消失。

> 我认为第二个将花费更少的时间和内存。

不要想。看。

这是一个疯狂的想法：如果您想知道哪个跑得更快，请运行它们，看看哪个跑得更快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:01:20.597

如果这两个选项中的一个明显更好并因此更可取，那么该语言将不会同时提供这两个选项。与往常一样，这取决于具体情况。你应该问决定的问题包括

*   哪种解决方案更具可读性？（对于习惯 Ruby 的程序员来说，第一个是。）可读性越高越好。
*   哪个解决方案更快？（你只能通过测量来决定这一点。注意使用一个现实的例子——只有三只动物的时间差甚至可能无法可靠地测量。）越快越好。
*   “展开”更惯用的版本会引入多少重复？（在这种情况下，不是很多 -`puts`字符串文字的 and 部分。）您引入的重复越少越好。

如您所见，答案相互矛盾，因此您必须了解您所做决定的背景并正确权衡因素以找出总体上最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:03:34.790

我意识到您的示例非常简化，在现实世界中不太可能发生，但从字面上理解：

第一个示例将创建中间对象（字符串和数组），因此您可能会说实际上它会占用更多内存。然而，这些对象稍后会被垃圾收集，所以你会找回你的记忆。（如果您定义了符号数组，则不会出现这种情况，因为符号不是垃圾收集的）。

它也更快，因为它不需要在每次迭代期间从数组内部获取对象。但如果明显不明显，则不应考虑这种差异。这里应该考虑的是可读性。

如果你是一个性能狂，你可能应该定义你的方法，不要在参数周围加上括号，因为这会导致 Ruby 解释器创建的解析树更小。

```
# slower
def meth(arg)
end

# faster
def meth arg
end 
```

但认为这是一个正当的理由当然是愚蠢的。

编辑：如果您正在寻找一个好的 Ruby 风格指南，请检查：[https ://github.com/bbatsov/ruby-style-guide](https://github.com/bbatsov/ruby-style-guide)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T10:58:21.880

调用函数、创建数组或创建循环总是有成本的。然而，这就是编程语言的目的，所以回答你的问题：是的，第二个代码会更快，可能是纳秒。但第一个代码更笼统，你永远不知道什么时候会买一只新宠物。它更有用，也许有人会给你他们的宠物清单，你会想谈谈它们？一般来说，第二个代码更快，但第一个更好，更可取。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T10:56:33.500

严格来说，是的，迭代涉及开销。您使用的任何语言都会有（尽管有些使用编译器技巧来减少这种情况）。由于迭代成本和构建您定义的数组的成本，您的代码的第一个版本将运行得更快一些。此外，弦乐建设可能还会增加一小部分成本。

话虽如此，这是一个如此微小的差异，你必须非常挑剔才能注意到，甚至关心其中的任何一个。这是微不足道的。尝试自己进行基准测试，您不会注意到显着差异。

我不准备为某种方法写这样的 10,000 行，是吗？我发现迭代看起来更干净，特别是对于非平凡的代码，并且在可读性和干净的代码方面通常更可取。更不用说它更[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)了。

# android - 布局重量问题

> ID：12176899
> 
> 赞同：0
> 
> 时间：2012-08-29T11:30:11.650
> 
> 标签：android, android-linearlayout, android-layout-weight

这个问题与我[之前的问题有关](https://stackoverflow.com/questions/12164814/imageview-weights-in-linearlayout)。我没有以正确的方式找到解决方案 - 我以编程方式获取屏幕宽度并以这种方式向 ImageView 添加边距。

现在我有新问题。
这是权重正常工作的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center_vertical" >

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="0.3"
        android:padding="5dp"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/txt_dir_fl_time_go"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_dir_fl_time_go_back"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_dir_fl_duration"
            style="@style/WrapContent.ListItem.Isdirect"/>
        <TextView 
            android:id="@+id/txt_dir_fl_is_direct"
            style="@style/WrapContent.ListItem.Isdirect"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="0.3"
        android:padding="5dp"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/txt_ret_fl_time_go"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_ret_fl_time_go_back"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_ret_fl_duration"
            style="@style/WrapContent.ListItem.Isdirect"/>
        <TextView 
            android:id="@+id/txt_ret_fl_is_direct"
            style="@style/WrapContent.ListItem.Isdirect"/>
    </LinearLayout>

    <TextView 
        android:id="@+id/txt_airline_name"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="0.2"
        android:textSize="15sp"/>

    <ImageView 
        android:id="@+id/img_airline"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="0.2"
        android:scaleType="fitCenter"
        android:adjustViewBounds="true"
        android:src="@drawable/ic_launcher"
        android:visibility="gone"/>

    <TextView
        android:id="@+id/btn_buy"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="0.2"/>
</LinearLayout> 
```

几乎相同的布局，权重不起作用！再次！（结果和我之前的问题一样，见文章开头）。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center_vertical">

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="0.4"
        android:padding="5dp"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/txt_airline_name"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_airline_plus_number"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_duration"
            style="@style/WrapContent.ListItem"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="0.3"
        android:padding="5dp"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/txt_go_start_date"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_go_start_time"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_go_start_city"
            style="@style/WrapContent.ListItem"
            android:text="@string/txt_loading"/>
        <TextView 
            android:id="@+id/txt_go_start_city_iata"
            style="@style/WrapContent.ListItem"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="0.3"
        android:padding="5dp"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/txt_go_finish_date"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_go_finish_time"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_go_finish_city"
            style="@style/WrapContent.ListItem"
            android:text="@string/txt_loading"/>
        <TextView 
            android:id="@+id/txt_go_finish_city_iata"
            style="@style/WrapContent.ListItem"/>
    </LinearLayout>

</LinearLayout> 
```

我想知道是否有人可以帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:47:32.747

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center_vertical">

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_weight="0.4"
        android:padding="5dp"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/txt_airline_name"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_airline_plus_number"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_duration"
            style="@style/WrapContent.ListItem"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_weight="0.3"
        android:padding="5dp"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/txt_go_start_date"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_go_start_time"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_go_start_city"
            style="@style/WrapContent.ListItem"
            android:text="@string/txt_loading"/>
        <TextView 
            android:id="@+id/txt_go_start_city_iata"
            style="@style/WrapContent.ListItem"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_weight="0.3"
        android:padding="5dp"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/txt_go_finish_date"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_go_finish_time"
            style="@style/WrapContent.ListItem"/>
        <TextView 
            android:id="@+id/txt_go_finish_city"
            style="@style/WrapContent.ListItem"
            android:text="@string/txt_loading"/>
        <TextView 
            android:id="@+id/txt_go_finish_city_iata"
            style="@style/WrapContent.ListItem"/>
    </LinearLayout>

</LinearLayout> 
```

请试试这个

# ribbon - 保存/加载 QuickAccessToolBar

> ID：12176901
> 
> 赞同：1
> 
> 时间：2012-08-29T11:30:18.803
> 
> 标签：ribbon, ribboncontrolslibrary

我正在使用 Microsoft.Windows.Controls.Ribbon，我想保存和加载 QuickAccessToolBar。

如何在功能区控件中找到 QuickAccessToolBar 项目？

这是我保存功能区 QuickAccessToolBar 的想法

1.  OnClosing 应用程序：获取 QuickAccessToolBar 项目，并在 Ribbon 项目上定位。然后序列化
2.  OnLoad : 读取序列化对象，并添加插入项 QuickAccessToolBar

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T09:14:46.333

最后我做到了！

我基于[WPF Ribbon Sample](http://www.microsoft.com/en-us/download/details.aspx?id=11877)来保存/加载。它使用 datacontext 来本地化 RibbonControl 上的控件，我不喜欢，所以我使用 QuickAccessToolBarId 来本地化控件。

这是解决方案： - **OnClosing Application：** 我保存 QuickAccessToolBar，通过 QuickAccessToolBar 搜索功能区控件上的项目，并保存路径。注意：当项目在应用程序菜单中时，第一个路径是 -1.A - **OnLoadApplication：**

加载项目，并通过路径搜索功能区控件。

这是代码：

**功能区助手：**

```
 class RibbonHelper
    {
        Ribbon ribbon;
        public RibbonHelper(Ribbon ribbon)
        {
            this.ribbon = ribbon;

        }
        string _qatFileName = "qat.xml";

        internal void Save()
        {
            try
            {
                SaveQatItems();
            }
            catch { }

        }

        internal void Load()
        {
            try
            {
                LoadQatItems();
            }
            catch
            {
            }
        }

        #region Save Qat

        private void SaveQatItems()
        {

           QatItemCollection qatItems = GetQatItemsToSave(ribbon.QuickAccessToolBar);

           if (qatItems != null)
           {

               QatItemCollection remainingItems = new QatItemCollection();
               remainingItems.AddRange(qatItems);
               SaveQatItemsOfApplicationMenu(remainingItems);
               SaveQatItemsOfTabs(remainingItems);

               SaveQatItems(qatItems);

           }

        }

        private void SaveQatItems(QatItemCollection qatItems)
        {
            XmlWriter xmlWriter = XmlWriter.Create(_qatFileName);
            XamlWriter.Save(qatItems, xmlWriter);
            xmlWriter.Close();
        }

        private void SaveQatItemsOfApplicationMenu(QatItemCollection remainingItems)
        {
            if (ribbon.ApplicationMenu != null)
            {
                if (remainingItems != null)
                {
                    remainingItems.ForEach(qat =>
                    {
                        qat.ControlIndices.Add(-1);
                    });
                    for (int index = 0; index < ribbon.ApplicationMenu.Items.Count && remainingItems.Count > 0; index++)
                    {
                        SaveQatItemsAmongChildren(remainingItems, ribbon.ApplicationMenu.Items[index],index);
                    }
                    remainingItems.ForEach(qat =>
                    {

                        qat.ControlIndices.Clear();
                    });
                }
            }
        }

        private void SaveQatItemsOfTabs(QatItemCollection remainingItems)
        {
            if (ribbon.Items != null)
            {
                if (remainingItems != null)
                {
                    for (int tabIndex = 0; tabIndex < ribbon.Items.Count && remainingItems.Count > 0; tabIndex++)
                    {
                        RibbonTab tab = ribbon.Items[tabIndex] as RibbonTab;
                        SaveQatItemsAmongChildren(remainingItems, tab, tabIndex);

                    }

                }
            }
        }

        private void SaveQatItemsAmongChildren(QatItemCollection remainingItems, object control, int controlIndex)
        {
            if (control == null)
            {
                return;
            }

            //Añaidmos el control index a los pendientes
            remainingItems.ForEach(qat =>
            {
                qat.ControlIndices.Add(controlIndex);
            });

            SaveQatItemsAmongChildrenInner(remainingItems, control);

            //Eliminamos el control index de los pendientes ya que no estan dentro de ese control
            remainingItems.ForEach(qat =>
           {
               int last = qat.ControlIndices.Count - 1;
               qat.ControlIndices.RemoveAt(last);
           });

        }

        private void SaveQatItemsAmongChildrenInner(QatItemCollection remainingItems, object parent)
        {
            SaveQatItemsIfMatchesControl(remainingItems, parent);

            if (remainingItems.Count == 0 || IsLeaf(parent))
            {
                return;
            }            

            int childIndex = 0;
            DependencyObject dependencyObject = parent as DependencyObject;
            if (dependencyObject != null)
            {
                IEnumerable children = LogicalTreeHelper.GetChildren(dependencyObject);
                foreach (object child in children)
                {
                    SaveQatItemsAmongChildren(remainingItems, child, childIndex);
                    childIndex++;
                }
            }
            if (childIndex != 0)
            {
                return;
            }

            // if we failed to get any logical children, enumerate the visual ones
            Visual visual = parent as Visual;
            if (visual == null)
            {
                return;
            }
            for (childIndex = 0; childIndex < VisualTreeHelper.GetChildrenCount(visual); childIndex++)
            {
                Visual child = VisualTreeHelper.GetChild(visual, childIndex) as Visual;
                SaveQatItemsAmongChildren(remainingItems, child, childIndex);
            }

        }

        private bool IsLeaf(object element)
        {
            if ((element is RibbonButton) ||
            (element is RibbonToggleButton) ||
            (element is RibbonRadioButton) ||
            (element is RibbonCheckBox) ||
            (element is RibbonTextBox) ||
            (element is RibbonSeparator))
            {
                return true;
            }

            RibbonMenuItem menuItem = element as RibbonMenuItem;
            if (menuItem != null &&
                menuItem.Items.Count == 0)
            {
                return true;
            }

            return false;
        }

        private bool SaveQatItemsIfMatchesControl(QatItemCollection remainingItems, object control)
        {
            bool matched = false;
            FrameworkElement element = control as FrameworkElement;
            if (element != null)
            {
                object getQuickAccessToolBarId = RibbonControlService.GetQuickAccessToolBarId(element);
                if (getQuickAccessToolBarId != null)
                {
                    int remove = remainingItems.RemoveAll(qat => qat.QuickAccessToolBarIdHashCode == getQuickAccessToolBarId.GetHashCode());
                    matched = remove > 0;
                }
            }

            return matched;
        }

        private  QatItemCollection GetQatItemsToSave(RibbonQuickAccessToolBar qat)
        {
            QatItemCollection qatItems = new QatItemCollection();
            if (qat != null && qat.Items != null && qat.Items.Count > 0)
            {
                foreach (var item in qat.Items)
                {

                    FrameworkElement element = item as FrameworkElement;

                    if (element != null)
                    {
                        object getQuickAccessToolBarId = RibbonControlService.GetQuickAccessToolBarId(element);
                        if (getQuickAccessToolBarId != null)
                        {

                            QatItem qatItem = new QatItem(getQuickAccessToolBarId.GetHashCode());
                            qatItems.Add(qatItem);

                        }
                    }

                }
            }
            return qatItems;
        }
        #endregion

        #region load qat
        private void LoadQatItems()
        {
            if (ribbon.QuickAccessToolBar == null)
            {
                ribbon.QuickAccessToolBar = new RibbonQuickAccessToolBar();
            }
            QatItemCollection qatItems = GetQatItemsToLoad();
            if ((qatItems != null) && (qatItems.Count > 0))
            {

                SearchInApplicationMenu(qatItems);
                SearchInTabs(qatItems);

                qatItems.Where(qat => qat.Owner != null).ToList().ForEach(qat =>
                {
                    if (RibbonCommands.AddToQuickAccessToolBarCommand.CanExecute(null, qat.Owner))
                    {
                        RibbonCommands.AddToQuickAccessToolBarCommand.Execute(null, qat.Owner);
                    }
                });

            }

        }

        private void SearchInApplicationMenu(QatItemCollection qatItems)
        {
            if (qatItems != null)
            {

                int remainingItemsCount = qatItems.Count(qat=>qat.Owner==null);
                QatItemCollection matchedItems = new QatItemCollection();

                for (int index = 0; index < ribbon.ApplicationMenu.Items.Count && remainingItemsCount > 0; index++)
                {
                    matchedItems.Clear();
                    matchedItems.AddRange(qatItems.Where(qat => qat.ControlIndices[0] == -1)); //-1 is applicationMenu

                    //remove -1
                    matchedItems.ForEach(qat =>
                    {
                        qat.ControlIndices.RemoveAt(0);
                    }
                   );

                    object item = ribbon.ApplicationMenu.Items[index];
                    if (item != null)
                    {

                        if (!IsLeaf(item))
                        {
                            LoadQatItemsAmongChildren(matchedItems, 0, index, item, ref remainingItemsCount);
                        }
                        else
                        {

                            LoadQatItemIfMatchesControl(matchedItems, new QatItemCollection(), 0, index, item, ref remainingItemsCount);
                        }
                    }
                    //Add -1
                    matchedItems.ForEach(qat =>
                   {
                       qat.ControlIndices.Insert(0, -1);
                   });

                }
            }

        }

        private void SearchInTabs(QatItemCollection qatItems)
        {

            int remainingItemsCount = qatItems.Count(qat => qat.Owner == null);
            QatItemCollection matchedItems = new QatItemCollection();

            for (int tabIndex = 0; tabIndex < ribbon.Items.Count && remainingItemsCount > 0; tabIndex++)
            {
                matchedItems.Clear();
                matchedItems.AddRange(qatItems.Where(qat => qat.ControlIndices[0] == tabIndex)); 

                RibbonTab tab = ribbon.Items[tabIndex] as RibbonTab;
                if (tab != null)
                {
                    LoadQatItemsAmongChildren(matchedItems, 0, tabIndex, tab, ref remainingItemsCount);
                }
            }
        }

        private void LoadQatItemsAmongChildren(
                    QatItemCollection previouslyMatchedItems,
                    int matchLevel,
                    int controlIndex,
                    object parent,
                    ref int remainingItemsCount)
        {
            if (previouslyMatchedItems.Count == 0)
            {
                return;
            }
            if (IsLeaf(parent))
            {
                return;
            }

            int childIndex = 0;
            DependencyObject dependencyObject = parent as DependencyObject;
            if (dependencyObject != null)
            {
                IEnumerable children = LogicalTreeHelper.GetChildren(dependencyObject);
                foreach (object child in children)
                {
                    if (remainingItemsCount == 0)
                    {
                        break;
                    }

                    QatItemCollection matchedItems = new QatItemCollection();
                    LoadQatItemIfMatchesControl(previouslyMatchedItems, matchedItems, matchLevel + 1, childIndex, child, ref remainingItemsCount);
                    LoadQatItemsAmongChildren(matchedItems, matchLevel + 1, childIndex, child, ref remainingItemsCount);
                    childIndex++;
                }
            }
            if (childIndex != 0)
            {
                return;
            }

            // if we failed to get any logical children, enumerate the visual ones
            Visual visual = parent as Visual;
            if (visual == null)
            {
                return;
            }
            for (childIndex = 0; childIndex < VisualTreeHelper.GetChildrenCount(visual); childIndex++)
            {
                if (remainingItemsCount == 0)
                {
                    break;
                }

                Visual child = VisualTreeHelper.GetChild(visual, childIndex) as Visual;
                QatItemCollection matchedItems = new QatItemCollection();
                LoadQatItemIfMatchesControl(previouslyMatchedItems, matchedItems, matchLevel + 1, childIndex, child, ref remainingItemsCount);
                LoadQatItemsAmongChildren(matchedItems, matchLevel + 1, childIndex, child, ref remainingItemsCount);
            }
        }

        private void LoadQatItemIfMatchesControl(
                 QatItemCollection previouslyMatchedItems,
                 QatItemCollection matchedItems,
                 int matchLevel,
                 int controlIndex,
                 object control,
                 ref int remainingItemsCount)
        {
            for (int qatIndex = 0; qatIndex < previouslyMatchedItems.Count; qatIndex++)
            {
                QatItem qatItem = previouslyMatchedItems[qatIndex];
                if (qatItem.ControlIndices[matchLevel] == controlIndex)
                {
                    if (qatItem.ControlIndices.Count == matchLevel + 1)
                    {
                        qatItem.Owner = control as Control; ;
                        remainingItemsCount--;
                    }

                    else
                    {
                        matchedItems.Add(qatItem);
                    }
                }
            }
        }

        private QatItemCollection GetQatItemsToLoad()
        {
            try
            {
                if (File.Exists(_qatFileName))
                {

                    using (XmlReader xmlReader = XmlReader.Create(_qatFileName))
                    {
                        QatItemCollection qatItems = (QatItemCollection)XamlReader.Load(xmlReader);
                        xmlReader.Close();
                        return qatItems;
                    }
                }
            }
            catch
            {
                //Do nothing, return null;
            }

            return null;
        }
        #endregion
    } 
```

要序列化的类：

```
 public class QatItem    {
        public QatItem()
        {

        }

        public QatItem(int qatbIdHashCode)
        {
            QuickAccessToolBarIdHashCode = qatbIdHashCode;

        }

        public Int32Collection ControlIndices
        {
            get
            {
                if (_controlIndices == null)
                {
                    _controlIndices = new Int32Collection();
                }
                return _controlIndices;
            }
            set
            {
                _controlIndices = value;
            }
        }
        Int32Collection _controlIndices;

        [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
        public int QuickAccessToolBarIdHashCode { get; set; }

        //Is only for load
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
        public Control Owner { get; set; }

    }
  public class QatItemCollection : List<QatItem>
    {
    } 
```

这是从窗口保存/加载的代码

```
 RibbonHelper helper;
        protected override void OnClosing(CancelEventArgs e)
        {
            helper.Save();
            base.OnClosing(e);

        }

        private void RibbonWindow_Loaded(object sender, RoutedEventArgs e)
        {
            helper = new RibbonHelper(ribbon);
            helper.Load();
        } 
```

# jquery - 测试以查看 2 个输入是否与 jQuery Bassistance 一起为空

> ID：12176904
> 
> 赞同：1
> 
> 时间：2012-08-29T11:30:26.150
> 
> 标签：jquery, forms, validation

我正在使用 Bassistance jQuery 验证插件，我需要测试 2 个输入是否为空，如果是，则显示错误消息，否则如果两个字段之一已完成，那很好。

这是表单字段：

```
<label for="para_comp_name">Your name *</label>
<input id="para_comp_name" name="para_comp_name" type="text" value="">

<label for="para_comp_code">Inside track unique code *</label>
<input id="para_comp_code" name="para_comp_code" type="text" value="">

<label for="para_comp_message">Message</label>
<textarea id="para_comp_message" name="para_comp_message" cols="" rows=""></textarea>

<label for="para_comp_image">Upload image</label>
<input id="para_comp_image" name="para_comp_image" type="file" value="" size="16"> 
```

只有需要的字段是名称和唯一代码，然后用户可以填写消息和图像字段中的一个或两个。我只需要验证它们是否都是空的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:37:50.980

这通常是：

```
if (! $('#para_comp_name').val() && ! $('#otherFieldHere').val()){
 // do something f it's empty
}else{
 // do something else if it's not empty
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:42:02.773

您可以添加自定义验证方法：

```
$(document).ready(function() {

    $.validator.addMethod("custom-rule", function() {
        return $('#para_comp_message').val().trim() + 
               $('#para_comp_image').val().trim() != '';
    }, "custom message");

    $("#form1").validate({
        rules: {
            para_comp_name: "required",
            para_comp_code: "required",
            para_comp_image: "custom-rule"
        }
    });

});​ 
```

试试[这里](http://jsfiddle.net/y7MQc/1/)的演示。

# c++ - 如何在 Watch 窗口中查看本地类成员的值？

> ID：12176905
> 
> 赞同：0
> 
> 时间：2012-08-29T11:30:26.437
> 
> 标签：c++, visual-studio-2010, visual-c++

在 Visual C++ 2010 中，请考虑以下事项：

```
#include "stdafx.h"

int _tmain(int argc, _TCHAR* argv[])
{
  struct MyClass
  {
    MyClass() : mMember(0)
    {}

  void Func()
  {
    int tmp = 0;
    tmp++;
  }

  private:
    int mMember;
  };

  MyClass inst;
  inst.Func();

    return 0;
} 
```

进入 Func() 并转到 Watches 窗格并观察成员变量`mMember`。而不是看到它的价值，你会看到错误

> CXX0033：错误：OMF 类型信息中的错误

是否可以让调试器显示成员的值？如果是这样，如何？我知道这可能是一个错误，我已经在 Microsoft Connect 上报告了它，我现在正在寻找一种解决方法（不涉及将定义移到函数范围之外），并解释为什么会发生这种情况。我提交的错误报告可以在这里找到： [https ://connect.microsoft.com/VisualStudio/feedback/details/760149/visual-c-2010-cant-view-local-class-members-in-debugger-cxx0033- omf 类型信息中的错误错误](https://connect.microsoft.com/VisualStudio/feedback/details/760149/visual-c-2010-cant-view-local-class-members-in-debugger-cxx0033-error-error-in-omf-type-information)

编辑：我完全知道在函数范围之外定义的类可以正常工作。

编辑 2：在此问题上对已向 Microsoft 提交并确认的错误的引用将大大有助于成为公认的答案。我已经搜索了一个，但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:57:34.880

这是一个错误，VS2008 也有，但在 VS2012 中已修复，因此他们肯定会很快关闭您的反馈文章。

解决方法将很困难，调试器没有**this**的类型信息。这也让它放弃了手表表情上的鬼魂。从技术上讲，您可以使用 Debug + Windows + Memory + Memory1 并在地址表达式中键入“this”。“somevarname”是第一个成员，并且该结构没有 v-table，因此您可以轻松找到该值。显然，这不能很好地扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:38:29.897

将您的`MyClass`结构放在主循环之外。否则，无法为其正确生成调试信息。通过移动它，您可以正常调试它的成员。如果不这样做，我不相信有任何方法可以调试该类的成员。因此，要回答您的问题，不，据我所知，没有其他方法可以调试本地类/结构。

```
struct MyClass
{
   MyClass(/*int & aY*/) : 
//y(aY)
somevarname(0)
{}

void abc()
{
   int asdf = 0;
   asdf++;
}

private:
   //int & y;
   int somevarname;
} ;

int _tmain(int argc, _TCHAR* argv[])
{

   MyClass implInst;
   implInst.abc();

   return 0;
} 
```

# c# - 使用 QueryOver/ICriteria 在 NHibernate 中聚合左连接

> ID：12176907
> 
> 赞同：3
> 
> 时间：2012-08-29T11:30:42.163
> 
> 标签：c#, nhibernate, queryover

我有两个简单的课程

```
public class Blog
{
  public Blog(){
    Comments=new List<Comment>();
  }
  public virtual Guid Id { get; set; }
  public virtual string Title { get; set; }
  public virtual string Text { get; set; }
  public virtual DateTime CreatedDate { get; set; }
  public virtual IList<Comment> Comments { get; set; }
} 
```

和

```
public class Comment
{
  public virtual Guid Id { get; set; }
  public virtual string Author { get; set; }
  public virtual string Text { get; set; }
} 
```

使用 AutoMap 进行映射，世界上一切都很好。我可以毫无问题地添加和保存实体。

我想做的是使用 QueryOver 来获取每个博客的评论数，但包括那些没有评论的博客，所以在 SQL 中：

```
SELECT b.Title,COUNT(c.ID) AS Comments
FROM Blogs b LEFT JOIN Comments c ON b.ID=c.BlogID 
```

并得到

```
标题评论
博客 1 0
博客 2 0
博客 3 0
博客 4 4
博客 5 0

```

我最接近的是

```
var results=session.QueryOver<Blog>()
.Left.JoinQueryOver<Comment>(b=>b.Comments)
.TransformUsing(new DistinctRootEntityResultTransformer())
.List<Blog>()
.Select(b => new {
Id = b.Id,
Title = b.Title,
Comments=b.Comments.Count
}); 
```

得到正确答案，但 SQL 运行为

```
SELECT b.Id,b.Title,c.ID,c.Author,etc... AS Comments
FROM Blogs b LEFT JOIN Comments c ON b.ID=c.BlogID 
```

然后在客户端进行计数，这似乎不是最有效的方法。

这可以用 QueryOver 或 ICriteria 来完成吗？如果可能的话，我宁愿不使用 hql。

如果您想查看所有配置等，可​​以在[https://github.com/oharab/NHibernateQueriesSpike](https://github.com/oharab/NHibernateQueriesSpike)获得整个解决方案。

干杯

B.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:44:06.977

Why do you always find the answer just after you've posted the question?

The answer was the JoinAlias method, with an alias placeholder:

```
Comment comment=null;
var results=session.QueryOver<Blog>()
    .Left.JoinAlias(b=>b.Comments,()=>comment)
    .SelectList(
        list=>list
        .SelectGroup(b=>b.Id)
        .SelectGroup(b=>b.Title)
        .SelectCount(b=>comment.Id)
    )
    .List<object[]>()
    .Select(b => new {
                Id = (Guid)b[0],
                Title = (string)b[1],
                Comments=(int)b[2]
               }); 
```

This does exactly as I expected it to.

B.

# c - c内存分配与malloc

> ID：12176910
> 
> 赞同：0
> 
> 时间：2012-08-29T11:30:49.797
> 
> 标签：c, malloc

我有这些变量：

```
uint32_t fsize;
char *filebuffer = NULL;
fsize = fileStat.st_size; 
```

如果我想*malloc*正确的内存，我必须编写的代码是这样的：

```
malloc(fsize); 
```

或这个：

```
malloc(fsize * sizeof(char *)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T11:32:41.090

`sizeof(char*)`是指针的大小，这可能不是您想要的。按名称，我假设这`fsize`是文件的大小（以字节为单位），所以很老

```
malloc(fsize); 
```

很好。

`malloc()`分配指定的字节数。如果您要调用`malloc(fsize * sizeof(char *))`，您将分配太多内存，因为您将所需的字节数 ( `fsize`) 乘以一个额外的因子，`sizeof(char*)`即存储指针所需的字节数（通常为 4 或 8 个字节） .

`char*`在决定分配多少字节时，您最终将分配的内存分配给指针这一事实无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:03:03.537

你写了：

> 如果我想 malloc 正确的内存，我必须编写的代码是这样的：
> 
> malloc(fsize); 或这个：
> 
> malloc(fsize * sizeof(char *));

这两个语句之间的区别是 malloc(fsize) 给你足够的内存来存储文件中的字符， malloc(fsize * sizeof(char *)) 给你足够的内存来存储足够多的指针的地址来指向每个字符在文件中。

我想你要问的是：

“或者这个：malloc(fsize * sizeof(char));”

换句话说，我是否想将文件中的字符数乘以每个字符的大小，这是一个合理的问题，但对于字符来说它是无关紧要的，因为 sizeof(char) = 1。所以让我们说你的文件是文本和里面有4个字母：

```
malloc(fsize) == malloc(4)
malloc(fsize * sizeof(char)) == malloc(4 * 1) == malloc(4)
malloc(fsize * sizeof(char *)) == malloc(4 * 4) == malloc(16) 
```

它是 4 的原因是因为您没有获得数据的大小，而是以字节为单位的地址大小（例如：0x0035F900）。

希望这有助于澄清答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:35:44.473

malloc(size) 函数分配一个 size 字节的内存块，返回一个指向块开头的指针。像这样：

```
uint32_t fsize = fileStat.st_size;
char* filebuffer = (char*)malloc(fsize); 
```

不要忘记

```
free(filebuffer); 
```

# java - Quartz cron 计划输出不符合预期

> ID：12176912
> 
> 赞同：3
> 
> 时间：2012-08-29T11:31:01.083
> 
> 标签：java, cron, quartz-scheduler

我想仅在工作日（周一至周五）的 23:59:59 安排日常工作。

我使用这个 cron 表达式

“59 59 23 ? * 周一至周五”，

但是周一的输出值不高

周三 8 月 29 日 23:59:59 ICT 2012
周四 8 月 30 日 23:59:59 ICT 2012
周五 8 月 31 日 23:59:59 ICT 2012
**周一 9 月 3日 23:59:59 ICT 2012 周一 9
月 3 日 23:59:59 ICT 2012 2012 年 9
月 3 日星期一 23:59:59 ICT 2012**
9 月 04 日星期二 23:59:59 2012 年9 月 5 日
星期三 23:59:59 ICT 2012 年9 月 6 日
星期四 23:59:59 ICT 2012
9 月 07 日星期五 23:59:59 ICT 2012

表达错了吗？需要帮忙。

我通过特定日期循环获取此输出，这里是代码

```
`try {
    CronExpression ce = new CronExpression(59 59 23 ? * MON-FRI);

    Calendar start = Calendar.getInstance();
    start.setTime(new Date());

    Calendar end = Calendar.getInstance();
    Date endDate = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy").parse("Fri Sep 29 23:59:59 ICT 2012");
            end.setTime(endDate);

    for (; !start.after(endDate); start.add(Calendar.DATE, 1)) {
       Date current = start.getTime();

         System.out.println(ce.getNextValidTimeAfter(current));

     }
 } catch (ParseException ex) {
            Logger.getLogger(HelloJob.class.getName()).log(Level.SEVERE, null, ex);
        }

}` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:09:17.577

问题不在于您的规则或 Quartz，没关系，您可以使用它。

问题出在您的测试代码中。

```
for (; !start.after(endDate); start.add(Calendar.DATE, 1)) {
     Date current = start.getTime();
     System.out.println(ce.getNextValidTimeAfter(current));
} 
```

您不是在有效日期上迭代，而是在`startDate`和之间的所有日子`endDate`。

循环内容也被称为无效日期，对于这 2 个无效日期中的每一天，当前日期之后的“下一个有效时间”是星期一。所以你有三次星期一，这是完全合乎逻辑的。

因此你的日志。

# jquery - 如何将隐藏的输入附加到另一个输入的文本

> ID：12176914
> 
> 赞同：1
> 
> 时间：2012-08-29T11:31:03.893
> 
> 标签：jquery, forms, dom-manipulation

我一直在努力解决这个问题，我想做的是首先根据选择的内容从文本中创建第二个隐藏输入字段，这就是我尝试过的：

```
 <script>
   var $extraval = $('#citycode option:selected').text();
   var input = $("<input>").attr("type", "hidden").attr("name", "city").val("$extraval");
   $('#form').append($(input));
  </script> 
```

这是第一个选择的样子

```
<select id="citycode" name="citycode">
  <option value="3439389">Asuncion</option>
  <option value="3439352">Bella Vista</option>
  <option value="3439101">Ciudad Del Este</option>
  <option value="3438735">Encarnacion</option>
</select> 
```

所以基本上我想要做的是创建第二个隐藏表单输入，当提交时这个选择的文本作为输入的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:34:10.657

假设它在里面`#form`，我发现了两个错误：

*   `"`当您尝试将`input`值传递设置`$extraval`为参数时，您不必使用。
*   input 已经是一个 jQuery 对象，因此要附加它，您必须执行以下操作：`.append(input)`

尝试以下操作：

```
var extraval = $('#citycode option:selected').text();
var $input = $("<input>", {
    'type': 'hidden',
    'name': 'city',
    'value': extraval
});
$('#form').append($input); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/UsD24/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:38:31.723

[http://jsfiddle.net/pWkDR/](http://jsfiddle.net/pWkDR/) .. 这是你应该做的

代码：

```
var $extraval = "yourtext";
var input = $("<input>").attr("type", "hidden").attr("name", "city").val($extraval);
$('body').append(input);

// check in inspect element your  hidden field is there with data 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T11:33:17.323

写`.val($extraval)`而不是`.val("$extraval")`. 这不是 PHP。

[jsFiddle Demo](http://jsfiddle.net/FnBDP/)（创建文本输入而不是隐藏 - 出于可见性目的）

此外，选择器`'#form'`需要您的代码中具有 id 的表单`form`。`select`您可以使用以下方法之一来获取它所属的表单：

```
$('#citycode').closest('form').append(input); 
```

或者

```
input.appendTo($('#citycode').prop('form')); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T11:34:53.487

```
 <script>
   var extraval = $('#citycode option:selected').text();
   var input = $("<input>").attr("type", "hidden").attr("name", "city").val(extraval);
   $('#form').append($(input));
  </script> 
```

试试这个代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:16:48.270

好的，谢谢大家的帮助，这就是我的工作方式

```
<script>
  $('#form').submit(function() {
  var extraval = $('#citycode option:selected').text();
  var $input = $("<input>", {
   'type': 'hidden',
   'name': 'city',
   'value': extraval
   });
  $('#form').append($input);
 });
</script> 
```

放在表格末尾效果很好

# delphi-7 - Delphi为showmodal返回自定义结果

> ID：12176916
> 
> 赞同：3
> 
> 时间：2012-08-29T11:31:08.903
> 
> 标签：delphi-7, vcl, delphi

我有一个带有 2 个按钮的表单（1 是 mrOK - 1 是 mrCancel）。无论如何，只要我单击其中一个按钮，表单就会关闭（调用 OnClose）。

我想返回一个自定义值。像这样：

```
procedure OpenForm;
var
 MyForm : TMyForm;
begin
 MyForm := TMyForm.Create (NIL);
 try 
  if MyForm.ShowModal = 1337 then begin
   // [...]
  end;
 finally
  MyForm.Free
 end;
end; 
```

模态形式：

```
 procedure TMyForm.Button1Click(Sender: TObject); // mrOK
 begin
  if Edit1.Text = '' then abort; // Don't close here?!
 end;

 procedure TExecutePrompt.FormClose(Sender: TObject;
 var Action: TCloseAction);
 begin
  if Edit1.Text = '' then abort; // Works but if the user clicks the X it should return mrCancel
 end; 
```

希望你明白我想做什么。这是一个带有编辑控件的提示窗口。如果控件中没有文本，则表单应保留到输入文本（除非单击 X）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T11:33:35.850

要关闭具有某些特定模态结果值的模态窗口，只需指定

```
ModalResult := MyVal; // This will close this modal window
                      // and the modal result will be MyVal 
```

也就是说，确保`Button1`has `ModalResult = mrNone`，然后你可以做类似的事情

```
procedure TMyForm.Button1Click(Sender: TObject); // mrOK
begin
  if Edit1.Text <> '' then ModalResult := 1337;
end; 
```

如果编辑框不为空，这将关闭表单，并且模态结果将为`1337`.

# java - 春季独立应用程序中的计划方法

> ID：12176923
> 
> 赞同：4
> 
> 时间：2012-08-29T11:31:36.570
> 
> 标签：java, spring, scheduled-tasks

我有一个方法需要每天 07:00 执行。为此，我使用该方法创建了一个 bean 并使用`@Scheduled(cron="0 0 7 * * ?")`. 在这个 bean 中，我创建了一个`main`函数 - 它将初始化 spring 上下文，获取 bean 并调用方法（至少是第一次），如下所示：

```
public static void main(String[] args) {
    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(args[0]);
    SchedulerService schedulerService = context.getBean(SchedulerService.class);
    schedulerService.myMethod();
} 
```

这工作得很好 - 但只有一次。我想我明白为什么 - 这是因为`main`线程结束 - 弹簧上下文也是如此，所以即`myMethod`使用它进行注释`@Scheduled`也不会起作用。

我想到了一种方法来传递这个——意思是不要让`main`线程死掉，也许是这样的：

```
while (true){
   Thread.currentThread().sleep(500);
} 
```

我认为，这就是应用程序上下文将保持不变的方式，我的 bean 也是如此。

我对吗？

有没有更好的方法来解决这个问题？

我正在使用弹簧 3.1.2。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:00:40.277

主线程应保持活动状态，直到任何非守护线程处于活动状态。如果你`<task:annotation-driven/>`的应用程序中有一个标签，那么 Spring 应该为你启动一个带有一小部分非守护线程池的执行程序，并且主应用程序不应该终止。

您唯一需要做的就是注册一个关闭挂钩以确保在 VM 结束时进行清理。

`context.registerShutdownHook()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:08:53.143

join 方法非常适合：

```
 try {
        Thread.currentThread().join();
    } catch (InterruptedException e) {
        logger.warn("Interrupted", e);
    } 
```

或者，这是老式的等待方法：

```
 final Object sync = new Object();
    synchronized (sync) {
        try {
            sync.wait();
        } catch (InterruptedException e) {
            logger.warn("Interrupted", e);
        }
    } 
```

# c# - 正则表达式为：567,"这是一个字符，称为A"

> ID：12176924
> 
> 赞同：0
> 
> 时间：2012-08-29T11:31:37.693
> 
> 标签：c#, regex, c#-4.0

帮我找到字符串的单个正则表达式：

1.  567，“这是一个字符，称为A。”
2.  567，这是一个字符，称为A。
3.  567,"这是一个字符，称为 (/r) A."

我为此尝试了以下正则表达式：

1.

```
^([0-9]+)[ ?]*,[ ?]*(?(?=")(("(?:[^"]|"")*"|[^,]*)(,("(?:[^"]|"")*"|[^,]*))*)|([a-z, a-z]*))$ 
```

2.

```
^([0-9]+),(["]{1}[a-z,a-z]*["]{1})$ 
```

评论：**正则表达式 1 工作正常，但提供 6 个组**，因为应该只有 2 个组。

尝试以下**链接检查** [http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx) 选择 MultiLine 进行检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:53:59.320

试试下面的。它假定句点是模式结束的一致指示，并且开始和结束报价是可选的。

```
^(\d+),["]?([^.]*[.])["]? 
```

这个的c#版本将是......

```
 var data = @"567,""this is a character, known as A.""
567,This is a character, known as A.
567,""this is a character, known as 
 A.""";
        var pattern = @"^(\d+),[""]?([^.]*[.])[""]?";

        foreach (Match mx in Regex.Matches(data, pattern, RegexOptions.Multiline))
        {
            Console.WriteLine("Group Count: {0}:  Group[1]: {1}, Group[2]: {2}", 
                         mx.Groups.Count, mx.Groups[1].Value, mx.Groups[2].Value);
        } 
```

（注意：你实际上会得到 3 个组，因为第 0 组总是整场比赛，否则你会得到你期望的两个组）

顺便说一句，这种模式是故意通用的。它也适用于输入数据，如......

```
678, This is a character, known as 1. 
```

这不在原始要求中。但是可以合理地假设您给出的数据示例非常有限，并且可以在数据中搜索其他字符类型。编写一个足够具体的模式以排除误报，同时不遗漏任何合法匹配，这是一种平衡行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:36:31.807

这`regex`应该做！

```
^(\d+),("?[\p{L}\p{P}\s\r]*"?)$ 
```

\p{L}-> 匹配所有大小写字母

\p{P}-> 将匹配所有标点符号..

\s-> 匹配空格

\r-> 匹配回车符

# angularjs - AngularJS - 重置 $scope.value 不会改变模板中的值（随机行为）

> ID：12176925
> 
> 赞同：11
> 
> 时间：2012-08-29T11:31:40.423
> 
> 标签：angularjs

看看[http://jsfiddle.net/2NJ7y/3/](http://jsfiddle.net/2NJ7y/3/)上的例子（AngularJS 1.0.1 的版本）。有一个简单的应用程序，正在等待输入幸运数字。如果数字等于 7，我将幸运数字重置为空。如果我多次输入数字 7，有时/随机幸运数字会留在输入字段中。为什么？这种行为如何解决？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T14:02:45.067

我做了一些调试。

首先对我来说幸运数字不是随机地留在输入字段中。

`enter 3 (model==3, input==3)`=>`enter 7 (alert, model==null, input="")`

=> `enter 3 (model==3, input==3)`=>`remove 3 (model=="", input=="")`

=>`enter 7 (alert, model==null, input="")`

=>`enter 7 (alert, model==null, input="7")`

7 仅当先前的模型值为空时才留在输入字段中。

**会发生什么**：当您输入 7 触发的输入事件时，该事件由输入指令的侦听[器](https://github.com/angular/angular.js/blob/2af0348cea016e7081eab3189ae89f13f0e08213/src/ng/directive/input.js#L747)[函数](https://github.com/angular/angular.js/blob/2af0348cea016e7081eab3189ae89f13f0e08213/src/ng/directive/input.js#L372)处理。侦听器函数调用[$setViewValue](https://github.com/angular/angular.js/blob/2af0348cea016e7081eab3189ae89f13f0e08213/src/ng/directive/input.js#L968)。$setViewValue 设置 $viewValue、$modelValue、模型值并调用 $viewChangeListeners（ngChangeDirective[只是将处理程序添加](https://github.com/angular/angular.js/blob/2af0348cea016e7081eab3189ae89f13f0e08213/src/ng/directive/input.js#L1122)到 $viewChangeListeners）。显示警报，luckynumber 设置为空。毕竟，如果luckynumber 与先前脏检查的先前值不同，则调用[$watch 处理程序](https://github.com/angular/angular.js/blob/2af0348cea016e7081eab3189ae89f13f0e08213/src/ng/directive/input.js#L998)和[$render](https://github.com/angular/angular.js/blob/2af0348cea016e7081eab3189ae89f13f0e08213/src/ng/directive/input.js#L409)。

在我的示例中，如果先前的模型值为“3”或“”，则调用 $render。如果之前的模型值为 null，则不会调用 $render。

**为什么具有 0 延迟的 $timeout 有效：当您调用具有 0 延迟的 $timeout 函数并将 luckynumber 更改为 null 时，会在**[事件队列](http://ejohn.org/blog/how-javascript-timers-work/)的末尾推迟（浏览器中的所有 javascript 在单个线程上执行）。$viewChangeListener 不会将模型值从 7 更改为 null。$digest 完成。然后调用 $timeout 处理程序。模型值设置为空。$watch 处理程序和 $render 被调用。$render 将输入值设置为“”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T00:53:06.843

终于有办法了。使用 $watch 而不是 ng-change：

```
$scope.$watch('luckynumber', function() {
    if ($scope.luckynumber == 7) {
        alert('The lucky number mustn\'t be equal 7.');
        $scope.luckynumber = null;
    }
}) 
```

[小提琴](http://jsfiddle.net/mrajcok/3QtjQ/)。

@Valentyn 的另一个[SO 回答](https://stackoverflow.com/a/14420062/215945)让我想到尝试解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T16:38:53.983

如果你简单地说

```
$scope.luckynumber = undefined; 
```

在警报之前，您并没有消除竞争条件，但您确实更改了它，以便正确清除 7，但有时您会收到两次警报。

如果警报代码被幂等的东西代替，比如改变 DOM 以显示错误，那么这个问题就不重要了。

# android - 使用 FLAG_ACTIVITY_CLEAR_TOP|FLAG_ACTIVITY_SINGLE_TOP 启动活动时，活动仍在后台堆栈中

> ID：12176931
> 
> 赞同：2
> 
> 时间：2012-08-29T11:32:01.850
> 
> 标签：android, android-intent

我正在使用[此处描述](https://stackoverflow.com/a/5453239/111777)的`ActivityA`技术启动一个活动 () 。如果后台堆栈上的所有活动仍在内存中，则此方法有效。显示，如果我点击返回，应用程序将退出。`FLAG_ACTIVITY_CLEAR_TOP|FLAG_ACTIVITY_SINGLE_TOP``ActivityA`

如果我[`SetAlwaysFinish`](https://github.com/bricolsoftconsulting/SetAlwaysFinish)习惯于让暂停的活动立即完成并重复我的测试，那么当我重新点击时`ActivityA`，我会被带到上一个活动。这不应该发生。

我在使用时是否在测试实际条件`SetAlwaysFinish`？如果是这样，我该如何配置和启动`ActivityA`，以便真正清除后台堆栈并且我的测试在这两种情况下都有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T16:11:56.050

使用“设置始终完成活动”不会模拟任何现实情况。它应该用作调试帮助，但由于 Android 在需要恢复资源时实际上并没有完成活动（它实际上是杀死主机进程），因此在调试或测试现实世界条件时几乎没有帮助。

# javascript - 仅使用 CSS 创建可折叠菜单或快速菜单

> ID：12176935
> 
> 赞同：0
> 
> 时间：2012-08-29T11:32:15.420
> 
> 标签：javascript, html, css, spry

我想创建一个可折叠的菜单，甚至更好的是只使用 css/HTML 的 spry 菜单。我想在 eBay 上使用它，但不允许使用 javascript/jquery。我在其他人的 eBay 上看到过。

一个简洁的菜单是最好的，但如果没有 javascript，这可能是不可能的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:04:07.863

如果您正在寻找基于纯 CSS 的菜单，那么

**试试这个** [小提琴](http://jsfiddle.net/gajjuthechamp/xYFmh/) [http://jsfiddle.net/gajjuthechamp/xYFmh/](http://jsfiddle.net/gajjuthechamp/xYFmh/)

**来源： http:** [//purecssmenu.com/](http://purecssmenu.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:16:39.917

你可以看看**[100 个很棒的 CSS 菜单教程](http://www.noupe.com/css/100-great-css-menu-tutorials.html)**

# vb.net - VB 代码不会在断点处停止

> ID：12176937
> 
> 赞同：0
> 
> 时间：2012-08-29T11:32:30.997
> 
> 标签：vb.net, visual-studio-2010, debugging

所以，我正在编写一个 Office 2010 加载项。我的代码可以正常运行，但想单步执行一段代码。我添加了断点并点击调试。Word 启动时加载了加载项。这是我在调试窗口中看到的：

> 'WINWORD.EXE'（托管 (v4.0.30319)）：已加载 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll' 程序 '[3280] WINWORD .EXE: Managed (v4.0.30319)' 已退出，代码为 -1073740791 (0xc0000409)。

我可以与加载项（自定义功能区）交互，但代码永远不会在断点处停止。我一直在网上搜索并尝试多种方法，但似乎无法使其正常工作。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:11:10.877

我不知道为什么它认为这个过程已经结束——我从来没有调试过 Office 加载项——但是，如果他们没有其他选择，你总是可以求助于向`Debugger.Break()`你的代码添加一个调用。这将强制该进程在遇到该行时调出您的调试器并让您跟踪已经运行的进程。但是，在编译程序集的发布版本之前，您必须小心删除该行。

# javascript - 如何调整网页的滚动位置？

> ID：12176938
> 
> 赞同：1
> 
> 时间：2012-08-29T11:32:31.227
> 
> 标签：javascript, html, css, scroll, anchor

我的页面有一个应该启用搜索的弹出窗口： ![在此处输入图像描述](../Images/c5fbf71acfc778ef73d818309c106ab6.png)

问题是弹出窗口位于页面的向下滚动部分，当重新加载带有搜索结果的页面时，弹出窗口是“打开的”，但整个页面再次从顶部开始，因为它是一个新的点击。如何使页面直接“中途”向下滚动以使结果视图与窗口匹配？我应该使用某种锚吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:44:24.593

您在这里有两个选择：

**A)**使用锚。为具有您的搜索框的 ID 提供一个 ID `div`（假设它是`searchdiv`），然后`http://yoursite.com/page.html#searchdiv`会自动滚动到`searchdiv`。这是一个小演示来详细说明这一点：[little link](http://jsfiddle.net/HKsSB/show/#id)。（注意浏览器地址栏中的 URL）。

**B）**如果你想更花哨一点并为滚动设置动画，请使用 jQuery

```
var tp = $("#searchdiv").offset().top; //get the element's top
$('html, body').animate({scrollTop: tp}, 500); //animate for 500ms 
```

这个方法的一个小演示：[little link](http://fiddle.jshell.net/B466F/3/show/)。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:38:54.367

您可以使用#tag

所以它`<a name="xyz"></a>`在想要显示的位置

重定向到

index.php#xyz

# wpf - 使用 MVVM 的自定义 WPF 命令的问题

> ID：12176939
> 
> 赞同：0
> 
> 时间：2012-08-29T11:32:33.080
> 
> 标签：wpf

我尝试了两种不同的从 ViewModel 在 WPF 中进行命令的方法，但都失败了。如果我将其放入视图中，顶级方法效果很好，但有人告诉我这是不好的做法。我被告知的第二种方法是在 MVVM 中执行自定义命令的正确方法，但是我陷入了如何从视图中实际调用/绑定命令的问题。

查看型号：

```
class MainViewModel : INotifyPropertyChanged
{

    #region INPC
    public event PropertyChangedEventHandler PropertyChanged;

    public void RaisePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    #endregion

     public readonly static RoutedUICommand myCommand;

    static MainViewModel()
    { 
        myCommand = new RoutedUICommand("customCommand","My Command",typeof(MainViewModel));

    }

    private void ExecutemyCommand(object sender, ExecutedRoutedEventArgs e)
    {

        MessageBox.Show("textBox1 cleared");
    }

    private void myCommandCanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        e.CanExecute = true;
    }
} 
```

在我的视图中，我有这个代码，这给了我一个错误

```
<Window x:Class="ConfigManager2.View.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:con="clr-namespace:ConfigManager2.Converters"
    xmlns:vm="clr-namespace:ConfigManager2.ViewModel"
    xmlns:local="clr-namespace:ConfigManager2.View"
.
.
.
<Window.CommandBindings>
    <CommandBinding
        Command="{x:Static vm:MainViewModel.myCommand}"
        CanExecute="myCommandCanExecute"
        Executed="ExecutemyCommand" />
</Window.CommandBindings>
.
.
.
 <Button Content="COMMAND ME" Height="50px"  Command="{x:Static vm:MainViewModel.myCommand}" /> 
```

我得到的错误是“ConfigManager2.View.MainView”不包含“ExecutemyCommand”的定义，并且找不到接受“ConfigManager2.View.MainView”类型的第一个参数的扩展方法“ExecutemyCommand”（您是否缺少使用指令还是程序集引用？）

我尝试了另一种使用 ICommand 的方法，但对于如何将其绑定到 XAML 中的上述按钮感到困惑

视图模型：

```
 public ICommand ClearCommand { get; private set; }
public MainViewModel()
{
    ClearCommand= new ClearCommand(this);
}

class ClearCommand : ICommand
{
    private MainViewModel viewModel;

    public ClearCommand(MainViewModel viewModel)
    {
        this.viewModel = viewModel;
    }

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        viewModel.vmTextBox1 = String.Empty;
        MessageBox.Show("Textbox1 Cleared");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:40:33.837

使用 ICommand 版本（我更喜欢），您可以直接绑定到命令：

```
<Button Command="{Binding ClearCommand}"/> 
```

没有必要的 Window.CommandBinding。如果将 MainViewModel 的实例设置为窗口或按钮的 ，则此方法有效`DataContext`。

# android - 将图像从移动设备（iOS 或 Android）上传到服务器的最佳方式是什么

> ID：12176941
> 
> 赞同：2
> 
> 时间：2012-08-29T11:32:37.017
> 
> 标签：android, ios, image, base64, file-transfer

我想将图片从我的手机发送到我的服务器，并且我知道如何使用**base64**发送它，但我听说不建议使用 base64，因为 base64 编码会将图像的大小增加 37%，以防减慢降低服务器性能，因为服务器上用户共享的图像过多。

任何人都可以向我推荐基于移动图像共享应用程序的比 base64 编码更有效的技术`(client-server app)`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:44:49.447

您可以简单地发布您的图像（以常规 UTF-8 编码），如下所述：[NSData and Uploading Images via POST in iOS](https://stackoverflow.com/questions/8042360/nsdata-and-uploading-images-via-post-in-ios)。您将需要一些服务器端 servlet 或 php 页面来解码图像并保存它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:51:20.333

您可以使用 FTP 从 iPhone 上传和下载图像。与其他方法相比，使用 FTP 的主要优点是我们可以将每秒字节宽度设置为某个限制，并且可以检测到特定事件之前已经传输了多少数据。

这是苹果文档提供的代码，用于说明通过 FTP 上传和下载任何数据（图像、pdf、视频或音频）。

[http://developer.apple.com/iphone/library/documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html#//apple%5Fref/doc/uid/TP30001132-CH9-SW1](http://developer.apple.com/iphone/library/documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html#//apple%5Fref/doc/uid/TP30001132-CH9-SW1)

另请参阅此 PDF 以更好地理解

[http://developer.apple.com/iphone/library/documentation/Networking/Conceptual/CFNetwork/CFNetwork.pdf](http://developer.apple.com/iphone/library/documentation/Networking/Conceptual/CFNetwork/CFNetwork.pdf)

# sql - 为什么数据库设计者不让 IDENTITY 列从最小值而不是 1 开始？

> ID：12176944
> 
> 赞同：40
> 
> 时间：2012-08-29T11:32:40.600
> 
> 标签：sql, sql-server, database, database-design

众所周知，在 Sql Server 中，`IDENTITY (n,m)`表示值将从 开始`n`，增量值为`m`，但我注意到所有数据库设计人员都将 Identity 列设置为`IDENTITY(1,1)`，而没有利用所有来自 int 数据类型的值`(-2,147,483,648) to (2,147,483,647)`，

我计划将所有身份列设为`IDENTITY (-2,147,483,648, 1)`,（身份列对应用程序用户隐藏）。

这是一个好主意吗 ？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-29T11:35:50.700

如果你发现 20 亿的价值还不够，你会发现 40 亿也不够（在项目的整个生命周期内需要比最初设计的多两倍以上的*任何东西*，这几乎是稀有*），因此您需要完全采用不同的方法（可能是长值，可能是完全不同的东西）。

否则，您只会变得陌生和难以理解，没有任何收获。

此外，谁没有一个数据库，他们知道例如项目 312 是具有一些用于测试特定事物的好特性的数据库？我知道我脑子里有一些任意的身份。他们可能会称其为“太好了，他们将其命名了两次”，但我永远都知道纽约是“657 号城市，涵盖了我们大部分的测试用例”。这只是一个简写，但 -2147482991 不会那么方便。

*补充一点。有些事情你可能会说“啊，大约 100”，然后发现它实际上是 110，好吧。与其他人一起，您会发现实际上它实际上是 100,000 - 您超出了数量级。数字越高，这种错误就越多，因为最终估计数十亿的问题与最终得到数十亿答案的问题不同。如果您估计 200 是给定情况下的最大值，那么您可能应该留出空间再增加几百个。如果您在给定情况下估计 20 亿，您可能应该多留出几万亿的空间。也就是说，我唯一一次看到有人实际上以负 20 亿开始 id，他们最终有大约 3,000 行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-29T14:33:06.877

如果您的代码中有一个代表您的表的类（这很可能会发生），那么每次您将创建一个新对象时，默认情况下都会为其分配 ID 0。如果已经分配了 ID 0，则可能导致覆盖数据库中的数据的错误。这也可以很容易地确定一个对象是否是新的，或者它是否来自数据库，只需执行`if (myObject.ID != 0)`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-29T11:50:51.360

在 SQL Server 端，负 ID 是可以的，像正数一样处理，所以你可以这样做。

其他的都是对的，你应该考虑不同的建议，但主要问题是连接到数据库的应用程序。

假设以 MS 环境为例。下面是一个示例： **.NET DataSet在***自动递增*的 id-s 上使用**负 ID** -s来跟踪代码中的更改。所以可能你会遇到麻烦，因为：

 *否定键用于行的临时实例。

这是参考：[MSDN](http://msdn.microsoft.com/en-us/library/33y2221y%28v=vs.71%29.aspx)

因此，在 MS 环境中为 MSSQL 设计这样的数据库绝对不是一个好主意。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-29T11:46:15.920

使用接近于零的整数的“好”副作用之一是它们易于使用，并且易于开发人员、测试人员等记住，尤其是在考虑调试和单元测试的情况下。

此外，代理键有一个潜入业务术语的讨厌习惯，例如，用户可能能够在浏览器顶部的 URL 查询字符串中看到 PK - 数字中的数字越多，他们就越有可能错误引用某些内容在帮助台查询中。

所以这就是为什么我很乐意将我的身份设置为 1 而**不是**-2147483231 的原因之一，相反，正如@Jon 所建议的那样，`BIGINT`我可能需要超过 2的任何时间我的表中有十亿行。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-17T20:10:33.927

当您从负数转换为正数时，您将越过零。这意味着（假设您实际上插入了数十亿行）您最终将拥有一个零标识符。这本质上并不是坏事，但可能会为 ORM 工具提供潜在的边缘情况，或者只是草率的应用程序代码难以区分零和空值。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-05T00:02:29.660

负 ID 可用于在实时环境中进行测试，其中虚拟数据需要与真实数据混合以进行测试，然后在测试完成后处理掉。这样做应该有很好的理由——我只使用过一次该技术。

在单行只读表（即，没有事务，没有在表上运行的可执行 SQL）中，负 ID 也可用于管理员目的。

除了这些特定目的之外，标识值 <= 0 会产生比光更多的热量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-18T23:11:33.607

根据 MS Docs ( [https://docs.microsoft.com/en-us/sql/relational-databases/in-memory-oltp/implementing-identity-in-a-memory-optimized-table? view=sql-server-2014](https://docs.microsoft.com/en-us/sql/relational-databases/in-memory-oltp/implementing-identity-in-a-memory-optimized-table?view=sql-server-2014) ), IDENTITY(1, 1) 在内存优化表上受支持。但是，内存优化表不支持定义为 IDENTITY(x, y) 其中 x != 1 或 y != 1 的标识列。

因此，在我看来，以及其他用户提到的其他原因，IDENTITY(1, 1) 对于内存优化表来说更实用且内存效率更高。

从 INT IDENTITY(1, 1) 开始，然后当您达到最大值时，您可以按照以下步骤“升级”到 BIGINT：

1.  **删除当前 PK 约束：** ALTER TABLE [dbo].[tbName] DROP CONSTRAINT [PK_tbName_Id] GO
2.  **将 PK 升级到 BIGINT：** ALTER TABLE [dbo].[tbName] ALTER COLUMN [dbo.Id] BIGINT

3.  **重新创建 PK 约束：** ALTER TABLE [dbo].[tbName] ADD CONSTRAINT [PK_tbName_Id] PRIMARY KEY CLUSTERED ([Id] ASC)

希望这会有所帮助，祝你好运！*

# python - 重命名内置函数以进行测试

> ID：12176951
> 
> 赞同：3
> 
> 时间：2012-08-29T11:32:55.587
> 
> 标签：python, unit-testing, testing

我正在考虑重命名我的测试套件中的一些内置函数，但是我发现这样做会产生全局影响（当我希望它们只在本地产生影响时）。例如：

```
import time
def test():
    time.sleep = "hello" #woah there! time is mutable so this won't just apply locally!

print time.sleep #prints <built-in function sleep>
test()
print time.sleep #prints hello (!) 
```

我必须`time.sleep`在结束时恢复到以前的状态`test()`吗？

这是**不鼓励**的事情......我*应该*如何进行这种测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:34:44.827

如果你有一个想要以这种方式测试的对象，你应该使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)和[模拟](http://en.wikipedia.org/wiki/Mock_object)。从程序的“顶部”传入一个对象（在这种情况下是时间）。然后您可以通过传入模拟版本来对单个函数或对象进行单元测试。

例子：

```
# Function to be tested
def callSleep(timer):
    timer.sleep(5)

# Example usage
def main():
    import time
    timer = time

    callSleep(timer)

# Example test
def testFunction():

    class MockTimer:
        numCalled = 0
        withValue = 0
        def sleep(self, val):
            self.numCalled += 1
            self.withValue = val

    mockTimer = MockTimer()

    callSleep(mockTimer)

    print "Num called:", mockTimer.numCalled, "with value", mockTimer.withValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:41:37.697

我会遵循上面@Joe 的建议，但下面是针对您的问题的快速解决方法。至于为什么会这样，对time.sleep的引用是在全局范围内，所以替换它的效果并不局限于本地范围。

```
import time
def test():
    old_sleep = time.sleep # Save a reference to the builtin
    time.sleep = "hello" #shouldn't this just set time.sleep locally?
    print 'Inside test:', time.sleep
    time.sleep = old_sleep # replace the reference

print time.sleep #prints <built-in function sleep>
test()
print time.sleep  #prints <built-in function sleep> 
```

# ruby-on-rails - 如何干掉涉及视图代码的控制器代码？

> ID：12176952
> 
> 赞同：2
> 
> 时间：2012-08-29T11:33:04.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refactoring

在我的 Rails 3 应用程序中，我有许多带有 boolean field 的模型`disabled`。在这些模型的控制器中，我使用自定义操作来使用 Ajax`disable`切换字段。`disabled`

示例（对于客户），

```
# routes.rb
resources :clients do
  member do
    get :toggle_disable, to: 'clients#disable', as: :disable
  end
end

# clients_controller.rb
def disable
  @client = Client.find(params[:id])
  @client.update_attribute :disabled, !@client.disabled
  render 'clients/update_client', format: :js
end

# update_client.js.erb
$('#client-<%= @client.id %>-details').html("<%= escape_javascript(render 'clients/client', client: @client) %>"); 
```

我的应用程序中有至少十个资源的此代码。

**问题**

我如何着手干燥此代码并为这些布尔字段动态添加操作？我本可以创建一个父控制器或模块，但我不确定我将如何处理视图代码。

我应该能够做这样的事情

```
#clients_controller.rb
class ClientsController < ApplicationController
  add_toggle_action :disable
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:47:00.797

Two main ways to share methods:

*   inheritance: define your action in `ApplicationController`

*   mixins: add your method in a module and include the module in the appropriate controllers

Since you want only some controllers to get the method, I'll head towards mixin.

Your controller action must use a view with a full path, not relative, something like:

```
render '/shared/clien/update', format: :js 
```

Lastly, you'll have to define all routes.

# c++ - 如何将多个 char 读取组合到 std::vector 中？

> ID：12176960
> 
> 赞同：3
> 
> 时间：2012-08-29T11:33:20.490
> 
> 标签：c++

我正在将 HID 设备中的多个报告读取`unsigned char`到`std::vector`. 我还将数据写入一个文件以进行十六进制分析，当我查看它时，其内容似乎是正确的。但是，`std::vector`当我将其转储到控制台时，它似乎不包含正确的数据。

这是代码：

```
typedef vector<unsigned char> buffer_t;

buffer_t sendCommand (hid_device *devh, const unsigned char cmd[], int reports) {
    unsigned char outbuf[0x40];
    buffer_t retbuf(0x40 * reports);

    hid_write(devh, cmd, 0x41);

    int i;
    FILE *file = fopen("test.out", "w+b");
    while (i++ < reports) {
       hid_read(devh, outbuf, 0x40);
       fwrite(outbuf, 1, sizeof(outbuf), file);
       retbuf.push_back(*outbuf);
    }
    fclose(file);
    cout << &retbuf[0];
    return retbuf;
} 
```

我有一种感觉，我在这里离题了；我对 C/C++ 相当陌生，而且我已经坚持了一段时间了。谁能告诉我我做错了什么，或者为我指出一个更好的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T11:43:07.193

您想向`unsigned char`矢量添加多个对象，但`push_back`只添加一个。

因此，替换`retbuf.push_back(*outbuf);`为：

```
for (size_t i = 0; i < sizeof(outbuf); ++i) {
    retbuf.push_back(outbuf[i]);
} 
```

或者

```
std::copy(outbuf, outbuf+sizeof(outbuf), std::back_inserter(retbuf)); 
```

或者

```
retbuf.insert(retbuf.end(), outbuf, outbuf+sizeof(outbuf)); 
```

它们都做同样的事情。

您创建具有一定大小的矢量：

```
buffer_t retbuf(0x40 * reports); 
```

但是`push_back`通过在末尾添加一个元素来增加向量的大小。您应该将其创建为空：

```
buffer_t retbuf; 
```

或者，您可以安排向量分配足够的空间，为要添加的元素做好准备：

```
retbuf.reserve(0x40 * reports); 
```

这纯粹是一个性能问题，但有时对于大型向量或`unsigned char`当向量用完内部空间并且必须分配更多空间时复制/移动（与 不同）类型的向量来说是一个重要问题。

关于样式的注释：您将文字值重复`0x40`几次，并使用`sizeof(outbuf)`. 通常最好定义一个常量，并在整个过程中使用该名称：

```
const int report_size = 0x40; 
```

这部分是为了以防将来数字发生变化，但也与代码的可读性有关——如果有人看到`0x40`他们可能会或可能不会立即理解为什么这是正确的值。如果有人看到`report_size`了，那么在他们查找之前他们不知道实际上是什么值，但他们确实知道您为什么使用该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:45:43.870

问题出在这一行：`buffer_t retbuf(0x40 * reports);`这意味着您创建的向量中的`0x40 * reports`元素填充了 unsigned char（零）的默认值。然后`push_back()`只需将新元素添加到向量的末尾，而不影响现有元素。

您需要以这种方式重写它：

```
buffer_t retbuf;                  // Empty vector
retbuf.reserve(0x40 * reports);   // Preallocate memory for known element count 
```

这种方式`push_back()`将按预期工作，并从头开始向空向量添加元素。

当然，您应该 push_back() 的所有元素`outbuf`，而不仅仅是第一个 ( `*outbuf`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-25T03:56:33.950

要推回多个值，请使用 std::vector 的函数分配。例如：

```
std::vector<char>vec1;
char array[3] = {'a', 'b', 'c'};
vec1.assign(array, array+3); 
```

如果我不得不这样做，我目前正在做一个项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:42:11.963

您的向量是 type `unsigned char`，这意味着它的每个元素都是这种类型。你`outbuf`是一个无符号字符*数组*。

唯一将`push_back()`一个项目附加到向量的末尾，因此`push_back(*outbuf)`只会将第一个元素添加`outbuf`到向量，而不是全部。

要将所有数据放入向量中，您需要将`push_back`它们一一放入，或使用`std::copy`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T11:51:39.040

请注意，由于 outbuf 是一个 char 数组，因此 *outbuf 将是 char 数组的第一个元素，因为数组/指针具有二元性。

我想你可能想做：

```
typedef vector<string> buffer_t; // alternatively vector<unsigned char*>
...
retbuf.push_back(outbuf);
... 
```

或者

```
typedef vector<unsigned char> buffer_t;
...
for (size_t i = 0; i < sizeof(outbuf); i++)
     retbuf.push_back(outbuf);
... 
```

# objective-c - 使用积木的目的是什么

> ID：12176961
> 
> 赞同：26
> 
> 时间：2012-08-29T11:33:22.500
> 
> 标签：objective-c, cocoa-touch, block, objective-c-blocks

我想在我的应用程序中使用块，但我对块一无所知。谁能解释我应该如何以及为什么在我的代码中使用块？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-29T11:36:26.567

块是[闭包（或 lambda 函数](http://en.wikipedia.org/wiki/Lambda_calculus)，但你喜欢叫它们）。他们的目的是使用块，程序员不必在全局范围内创建命名函数或提供目标操作回调，而是他/她可以创建一个未命名的本地“函数”，该函数可以访问其封闭的变量范围并轻松执行操作。

例如，当你想调度一个异步操作，比如一个视图动画，没有块，并且你想被通知竞争，你必须写：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(animationDidStop:context:)];
.... set up animation ....
[UIView commitAnimations]; 
```

这是很多代码，而且它意味着存在一个有效`self`指针 - 这可能并不总是可用（我在开发 MobileSubstrate-tweaks 时遇到过这样的事情）。因此，您可以使用 iOS 4.0 及更高版本的块来代替这个：

```
[UIView animateWithDuration:1.0 animations:^{
    // set up animation
} completion:^{
    // this will be executed on completion
}]; 
```

或者，例如，使用 NSURLConnection 加载在线资源... B. b. （块之前）：

```
urlConnection.delegate = self;

- (void)connection:(NSURLConnection *)conn didReceiveResponse:(NSURLResponse *)rsp
{
    // ...
}

- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data
{
    // ...
}

// and so on, there are 4 or 5 delegate methods... 
```

AB（纪元块）：

```
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *rsp, NSData *d, NSError *e) {
   // process request here
}]; 
```

更容易，更清洁，更短。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-29T11:36:27.753

引用[Ray Wenderlich 的教程](http://www.raywenderlich.com/9438/how-to-use-blocks-in-ios-5-tutorial-part-2)

> 块是一等函数，这是一种奇特的说法，块是常规的 Objective-C 对象。由于它们是对象，它们可以作为参数传递，从方法和函数返回，并分配给变量。块在 Python、Ruby 和 Lisp 等其他语言中称为闭包，因为它们在声明时封装了状态。块创建在其范围内引用的任何局部变量的 const 副本。在块之前，当你想调用一些代码并让它稍后给你回电时，你通常会使用委托或 NSNotificationCenter。这工作得很好，除了它把你的代码分散到各处——你在一个地方开始一个任务，然后在另一个地方处理结果。

例如，在视图动画中使用块可以让您不必执行所有这些操作：

```
[UIView beginAnimations:@"myAnimation" context:nil];
[UIView setAnimationDelegate:self];
[UIView setAnimationDuration:0.5];
[myView setFrame:CGRectMake(30, 45, 43, 56)];
[UIView commitAnimations]; 
```

只需要这样做：

```
[UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    [myView setFrame:CGRectMake(54, 66, 88, 33)];
}completion:^(BOOL done){
    //
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-13T19:19:28.643

Objective-C 类定义了一个将数据与相关行为相结合的对象。有时，仅表示单个任务或行为单元而不是方法的集合是有意义的。

# javascript - global.getElementById('...') 为 null 或不是对象

> ID：12176962
> 
> 赞同：1
> 
> 时间：2012-08-29T11:33:26.023
> 
> 标签：javascript

在我的项目中，我设计了一个 JavaScript 页面来呈现 HTML 数据，但出现上述错误。我的代码是：

```
global.getElementById('divPartnerGrid').innerHTML = "<table width='100%'><tr><td align='middle' style='vertical-align:middle; position:centre;'><img src='../Content/images/ajax-loader(2).gif'/></td></tr><tr><td align='middle' style='vertical-align:middle; position:centre;'>"+loadingLabel+"...</td></tr></table>" 
```

在运行项目时，它将在这一行中断。谁能告诉我，是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:47:39.667

替换`global`为`document`，即使 global 是您创建的指向`window`（或`this`在全局范围内）的变量，您仍然需要一个要在其中搜索元素的文档。

此外，请确保在此脚本运行之前加载页面：如果尚未加载，则无法获取元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:37:55.763

我也不知道是什么`global`，但`getElementById`方法是在定义的，`document`所以你可能只是想要

```
document.getElementById('divPartnerGrid').innerHTML = "..."; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:50:37.647

您可能已经从一个封装了全局变量的示例中复制了全局事物，而您没有这样做。

这是在以下示例中完成的，其中将文档发送到自调用函数的文档（这可能是您想要使用的，正如其他人指出的那样），以便该范围内的全局实际上将引用文档。

```
;(function(global) {

    global.getElementById(/* */);

})(document); 
```

这对于可以在服务器上使用的库来说是典型的，其中全局值可能与浏览器中的不同。

# asp.net - ASP.NET WebAPI 请求限制

> ID：12176963
> 
> 赞同：3
> 
> 时间：2012-08-29T11:33:30.247
> 
> 标签：asp.net, asp.net-web-api

我想知道请求限制如何与 WebApi 自托管一起工作？这将是您必须自己实施的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:36:04.240

是的，您必须实施它。如果它不是自托管服务，您实现它的方式相同。这是一篇[博客文章](http://blog.developers.ba/post/2012/03/03/Request-throttling-in-ASPNET-Web-API.aspx)，它通过一个实现此任务的自定义委托处理程序的示例来说明它。

# android - 如何在gridview中仅显示当前月份的日期？

> ID：12176968
> 
> 赞同：0
> 
> 时间：2012-08-29T11:33:41.630
> 
> 标签：android, android-gridview, android-calendar

![在此处输入图像描述](../Images/59bdc1c941f3eb84f38e9c38eb7394ca.png) 这是图像，我只想显示当前月份的日期，而不是下一个日期，而不是前几天。这是我的适配器代码，我从适配器管理和设置天数。在类文件中，我在 gridview 中设置了适配器。你能帮忙吗？

包 com.ManageMyTimeTableAdapter；

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import android.content.Context;
import android.graphics.Color;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;
import com.ManageMyTimeTable.CalendarView;
import com.ManageMyTimeTable.DaliyScreenActivity;
import com.ManageMyTimeTable.DateUtils;
import com.ManageMyTimeTable.R;

public class CalendarAdapter extends BaseAdapter{
private Date[] calendarGrid;
private Context mContext;
private LayoutInflater inflater;
private static Calendar mCal;   
private String today;
SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy");

public CalendarAdapter(Context context){
    mContext = context;
    inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mCal = Calendar.getInstance();
    CalendarView.dateStore.clear();
    initCalendar(mCal);     
}   
private void initCalendar(Calendar cal){

    Calendar c = Calendar.getInstance();
    c.setTime(cal.getTime());
    c.set(c.get(Calendar.YEAR), c.get(Calendar.MONTH), 1);

    int startOfWeek = c.get(Calendar.DAY_OF_WEEK);
    Log.e("fdfdfdf",""+startOfWeek);
    Log.e("-1 vagar nu",""+c.get(Calendar.DAY_OF_WEEK));

    c.add(Calendar.DATE, -startOfWeek);

    calendarGrid = new Date[6 * 7];
    int gridCount = 0;
    for (int week = 0; week < 6; week++) {
        for (int day = 0; day < 7; day++) {
            Date dt = c.getTime();
            dt.setHours(0);
            dt.setMinutes(0);
            dt.setSeconds(0);
            calendarGrid[gridCount++] = dt;
            c.add(Calendar.DATE, 1);
            }
        }
    }

public void nextMonth() {

    mCal.set(mCal.get(Calendar.YEAR), mCal.get(Calendar.MONTH) + 1, mCal.get(Calendar.DATE));
    initCalendar(mCal);
    notifyDataSetChanged();
}

public void prevMonth() {

    mCal.set(mCal.get(Calendar.YEAR), mCal.get(Calendar.MONTH) - 1, mCal.get(Calendar.DATE));
    initCalendar(mCal);
    notifyDataSetChanged();
}

public Calendar getCurrentCalendar() {
    return mCal;
}

@Override
public int getCount() {
    return calendarGrid.length;
}

@Override
public Date getItem(int position) {
    return calendarGrid[position];
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    if (convertView == null) {

        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.raw_my_calendar, null);
        holder.txtDate = (TextView) convertView.findViewById(R.id.txtCalDate);
        holder.txtEventCount = (TextView) convertView.findViewById(R.id.txtEventCount);
        convertView.setTag(holder);

    }else{
        holder = (ViewHolder) convertView.getTag();
    }
    Date date = getItem(position);

    holder.txtDate.setText(String.format("%2d", date.getDate()));
    holder.txtDate.setTag(format.format(date).toString());
    String keyDate = DateUtils.formatDate(DateUtils.DB_DATE_FORMAT, date);
    setStyle(keyDate, position, holder.txtDate, convertView);

    if(CalendarView.dateStore.size()>= position+1){

        Log.d(" Calender Adapter "," Clear arrayList ****  "+CalendarView.dateStore.size());
        CalendarView.dateStore.clear();         
    }       
    CalendarView.dateStore.add(format.format(date).toString());     
    return convertView;
}

private void setStyle(String dateKey, int position, TextView txt, View convertView){

    if (dateKey.equals(today))
        convertView.setBackgroundColor(Color.parseColor("#88D23218"));
    else
        convertView.setBackgroundColor(Color.parseColor("#88CCCCCC"));

    if (getItem(position).getMonth() != mCal.get(Calendar.MONTH))
        txt.setTextColor(Color.parseColor("#FF787878"));
    else

        txt.setTextColor(Color.parseColor("#FF000000"));

        if(DaliyScreenActivity.month_member_id_arr.contains(txt.getText().toString())){             

            convertView.setBackgroundColor(Color.YELLOW);
            convertView.setBackgroundColor(android.graphics.Color.rgb(230, 187, 60));               
        }       
    }   
static class ViewHolder {
    TextView txtDate;
    TextView txtEventCount;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:14:57.130

检查，不在当前月份的单元格在哪里设置它们的灰色文本颜色，或者将文本颜色设置为与背景相同的颜色，或者更好地为这些单元格设置空文本。

```
if (getItem(position).getMonth() != mCal.get(Calendar.MONTH))
    txt.setTextColor(Color.parseColor("#88CCCCCC")); 
```

或者

```
if (getItem(position).getMonth() != mCal.get(Calendar.MONTH))
    txt.setText(""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T07:20:21.347

在你的`getView`方法中......改变你的最后一个`if..else`

对此，

```
 if (getItem(position).getMonth() != mCal.get(Calendar.MONTH))
 {
        txt.setTextColor(Color.parseColor("#FF787878"));
 }
 else
 {
        txt.setTextColor(Color.parseColor("#FF000000"));

          if(DaliyScreenActivity.month_member_id_arr.contains(txt.getText().toString())){             

            convertView.setBackgroundColor(Color.YELLOW);
            convertView.setBackgroundColor(android.graphics.Color.rgb(230, 187, 60));               
        }       
 } 
```

我的意思是说保留您的代码以在部分中将背景更改为黄色`else`。

# amazon-web-services - 如何在 Amazon Route53 中将 http 请求转发到 https？

> ID：12176969
> 
> 赞同：39
> 
> 时间：2012-08-29T11:33:43.260
> 
> 标签：amazon-web-services, https, amazon-route53, forwarding

我在 Amazon Route53 中有一个子域。比方说secure.example.com

如果请求来得`https://secure.example.com`很好，但我想强制`http`请求通过 https。当用户键入`http://secure.example.com`时，它需要被转发到`https://secure.example.com`.

是否有域级别的重定向/转发请求通过`http`到`https`in `Amazon Route53`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-06-15T09:43:02.267

只是这个问题的快速更新。在回答您的问题时，您不能使用路由 53 来强制使用 HTTPS，这会导致一些人相信在 AWS 托管上强制使用 https 是不可能的。

您可以在证书管理器中创建 SSL 证书（或导入您自己的证书），将您的网站托管在任何位置（S3/EC2），然后您需要为您的站点设置 CloudFront 分配并导入您的 SSL 证书，然后您可以使用该选项`Redirect HTTP to HTTPS`通过 CloudFront 控制台中的行为选项卡。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-08-13T15:54:54.853

## 2019 +

*@Jamaurice Holt 解决方案让我找到了方向，但有点短*

## 经典负载均衡器

此解决方案仅适用于应用程序负载均衡器，不适用于经典负载均衡器，但您可以在 EC2 > 负载均衡器 > 您的负载均衡器 > 迁移中迁移以使用更新的应用程序均衡器

## 应用程序负载均衡器

在控制台上转到**EC2 > 负载均衡器 > 你的负载均衡器 > 侦听器**

在这里你应该有 2 条规则：HTTP：80 和 HTTPS：443

你只需要：

*   编辑 HTTP : 80 规则

*   删除转发规则并添加重定向规则到端口 443

*   保存，您应该会看到如下内容： [![在此处输入图像描述](../Images/54ef6ce4eb79775d0d187904322bbd69.png)](https://i.stack.imgur.com/idKdP.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-22T20:00:03.847

不，没有办法做到这一点——因为它不是强制任何特定协议或将值从一个协议推送到另一个协议的 DNS 功能。在 Apache、IIS 或 NGINX 中，您可以在 Web 服务器级别轻松完成此操作。

在任何一种情况下，将特定记录指向特定地址（无论是 IP 还是其他主机名）的 A 或 CNAME 值都是相同的，它只是通过端口 80 或端口 443 进行连接。

在 Apache 中，您可以简单地使用重写（`mod_rewrite`首先启用）：

```
RewriteEngine On
RewriteCond %{SERVER_PORT} !^443$
RewriteRule (.*) https://www.host.com/$1 [R] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-05-14T11:06:50.703

我使用（ELB）应用程序负载平衡器完成了它，并将流量重定向到 ELB 编辑部分中的端口 443。当然，我正在使用 ec2 实例来托管我的应用程序和网站。

[![aws elb 编辑屏幕截图](../Images/e8000425cedef7b6fa41c53666f1579d.png)](https://i.stack.imgur.com/vSd0t.png)

# objective-c - 在另一个 UIViewControllers 视图中访问 UITextField

> ID：12176970
> 
> 赞同：0
> 
> 时间：2012-08-29T11:33:47.157
> 
> 标签：objective-c, xcode

这就是我在 MainViewController 中使用 XIB 视图控制器视图作为子视图的方式：

```
UIViewController *nameController = [[NameSubViewController alloc] initWithNibName:@"NameSubViewController" bundle:nil];
nameSubView = [nameController view];
[self.view addSubview:nameSubView]; 
```

`nameController view`包含一个`UITextField`属性。我可以从 MainViewController 以某种方式访问​​此属性吗？

编辑：

如果我也在 View Controller 中为 textField 创建一个属性，我仍然无法在 MainViewController 中获取它。认为这是因为 UIView 子类化导致问题？

NameSubViewController.h:

```
#import <UIKit/UIKit.h>

@interface NameSubViewController : UIViewController

@property (nonatomic, strong) IBOutlet UITextField *textField;

@end 
```

NameSubView.h:

```
#import <UIKit/UIKit.h>

@interface NameSubView : UIView

@property (nonatomic, strong) IBOutlet UITextField *textField;

- (IBAction)textFieldReturn:(id)sender;

@end 
```

NameSubViewController 在 IB 中的连接：

[连接，名称子视图控制器](http://www.flickr.com/photos/80427098@N07/7886810298/in/photostream)

NameSubView 在 IB 中的连接：

[连接，NameSubView](http://www.flickr.com/photos/80427098@N07/7886810190/in/photostream)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:36:30.660

您是否为 nameController 中的文本字段创建了一个出口？这样做，然后您可以使用检索值

```
nameController.textField.text 
```

在 nib 文件中，单击文件的所有者图标（在 nib 左侧），然后使用右侧的检查器将其类设置为 UIView 的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:34:33.250

为什么要在控制器 B 中从控制器 A 添加视图。仅使用其 xib 文件创建视图并将该视图添加到控制器视图不是更好吗？对于访问字段，您可以为您的文本字段分配一个标签，并且在您需要它的代码中的任何地方，调用 self.view viewWithTag:<#(NSInteger)#> 方法。

# c++ - 使用 auto 作为模板参数

> ID：12176972
> 
> 赞同：0
> 
> 时间：2012-08-29T11:33:56.740
> 
> 标签：c++, templates, c++11, auto

我正在尝试使用带有`-std=c++11`标志集的 GCC 4.7.1 编译以下内容：

```
std::map<std::string, auto> myMap; 
```

我正在尝试创建一个对象以包含大量各种类型的 Json 数据（int string、bool）以及子结构（list、map），因此我无法在编译时声明字段值的类型时间，所以我想我会使用`auto`关键字。

但是，当我尝试编译它时，我得到以下

```
error: invalid use of ‘auto’
error: template argument 2 is invalid
error: template argument 4 is invalid
error: unable to deduce ‘auto’ from ‘&lt;expression error>’ 
```

有没有一种特殊的方法可以`auto`用作模板参数，还是不可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T11:43:12.953

我认为您正在寻找的是[boost::any](http://www.boost.org/libs/any/)。

```
std::map<std::string, boost::any> myMap; 
```

`auto`在编译时评估，不能用作动态运行时类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:36:47.580

这根本不可能。后面的类型`auto`必须从某事中推断出来。最接近的方法是使用`decltype`一些表达式。

```
std::map<std::string, decltype(some expression)> myMap; 
```

但`decltype`这里解析为一个类型，你不能在编译时更改它。

# jquery - Phonegap Build：如何处理Android中的后退按钮？

> ID：12176975
> 
> 赞同：0
> 
> 时间：2012-08-29T11:34:02.407
> 
> 标签：jquery, cordova

有人可以解释一下如何使用[Phonegap Build](https://build.phonegap.com/apps)处理 Android 中的后退按钮吗？我使用 Jquery 但不是 Jquery Mobile。我只是希望后退按钮重新加载页面。

我尝试了在[Phonegap 的文档](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#backbutton)中创建的示例，方法是使用他们提供的“完整示例”构建一个 APK，并在 onBackKeyDown() 函数中添加“Alert(“Hello!”)”行，它没有显示任何内容。

我的 webapp 是一个 HTML 文件，它使用 .load 函数从 MySQL dB 加载数据并将内容附加到 DIV。由于应用程序是单个文件，当用户点击后退按钮时，应用程序当然会退出。要返回主页，必须重新加载 Web 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:30:37.203

也许您包含了错误的 cordova.js 文件？（它们是特定于平台的）此代码应该可以解决问题：

```
function onBackButtonTapped() {
    document.location.reload(true);
}

function onDeviceReady() {
    document.addEventListener("backbutton", onBackButtonTapped, false);
}

document.addEventListener("deviceready", onDeviceReady, false); 
```

# java - 如何在基于Tomcat的java项目中使用UTF-8编码

> ID：12176979
> 
> 赞同：0
> 
> 时间：2012-08-29T11:34:20.107
> 
> 标签：java, jsp, tomcat, encoding, utf-8

我有一个使用 Tomcat 作为服务器的 java web 项目。我的问题是当我想使用 UTF-8 字符时，它不能正确显示它们。

我的意思是，当我使用 UTF-8 字符并运行我的 servlet 时，浏览器中的字符不正确。当我想在 xml 页面中使用时，页面无法显示。我用 firefox 和 internet explorer 都做到了但我没有看到任何变化。

谁能告诉我我应该在 Tomcat 和我的项目中做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:59:21.230

有很多事情要看：

*   jsp 编码应该是 UTF-8（文件的编码 - 在你的 IDE/编辑器中检查）
*   您必须发送适当的标头 -`response.setCharacterEncoding(..)`在 servlet 和`<%@ page pageEncoding="utf-8" %>`
*   如果你想在 URL 中使用 utf，你需要`URIEncoding="utf-8"`在 tomcat 的 server.xml中配置
*   如果您有数据库访问权限，请通过将 utf-8 设置为通信编码，确保您与它正确通信。另外，请确保您的数据库使用的是 utf-8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:21:52.013

我通过以下方式解决了这个问题：

1.  向我的项目添加一个过滤器，使用以下方法将请求和响应字符串编码为 UTF-8：

    ```
    request.setCharacterEncoding("utf-8");
    response.setCharacterEncoding("utf-8"); 
    ```

2.  在Tomcat`URIEncoding="utf-8"`的`server.xml`.

感谢所有帮助我解决问题的人。

# javascript - 窗口管理

> ID：12176980
> 
> 赞同：-1
> 
> 时间：2012-08-29T11:34:23.050
> 
> 标签：javascript

我在管理窗口方面需要帮助。

如何将对象从父窗口传递到子窗口。

`ChildWindow`使用打开`parentWindow.open()`。

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:38:37.907

您可以在子窗口中分配一个变量，就像任何其他对象一样：

```
var myValue = { foo: 'bar' };
var childWindow = window.open("URL_SAME_DOMAIN");
childWindow.Variable = myValue; 
```

# android - 如何在片段中使用 ProgressDialog 和 webview

> ID：12176982
> 
> 赞同：1
> 
> 时间：2012-08-29T11:34:23.173
> 
> 标签：android, android-fragments, android-webview

现在我试图在 webview 中显示一个页面，加载需要一些时间，同时我想显示一个 progressDialog。我能做的最好的是下面的代码，但问题是我在 onCreateView 中执行此操作，因此 progressDiealog 仅在创建视图之前显示，这不是我想要的。我知道我必须在 onActivityCreated 中使用它，但我不知道该怎么做，提前谢谢大家

```
public class someFragment extends SherlockFragment {
Context context;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved)
    {
    View v = inflater.inflate(R.layout.some_layout, group, false);
    final ProgressDialog pd = ProgressDialog.show(getActivity(),  "", "Loading", true);

    final WebView myWebView = (WebView) v.findViewById(R.id.webViewsome);
    myWebView.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
            pd.dismiss();
        }
    });

    myWebView.getSettings().setPluginsEnabled(true);
    myWebView.getSettings().setBuiltInZoomControls(false); 
    myWebView.getSettings().setSupportZoom(false);
    myWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);   
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.getSettings().setAllowFileAccess(true); 
    myWebView.getSettings().setDomStorageEnabled(true);
    myWebView.setInitialScale(25);

    myWebView.getSettings().setDefaultZoom(ZoomDensity.FAR);

    myWebView.loadUrl("http://www.test.com/test-0.jpg");

    return v;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:56:59.200

试试这个`SomeFragment`：

```
private class MyWebViewClient extends WebViewClient {

    @Override
    public void onPageFinished(WebView view, String url) {
        //remove your progressdialog here
        super.onPageFinished(view, url);
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        //show your progressdialog here
        super.onPageStarted(view, url, favicon);
    }

} 
```

然后：

```
webView.setWebViewClient(new MyWebViewClient()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:58:43.650

您可以做的一件事是，以a`onCreateView`开头。在（网页完全加载后）中，取消该任务。希望它有用。`AsyncTask``progressDialog``onPageFinished``webView`

# android-intent - 将我的应用添加到 gmail 附件的“使用完成操作”列表中

> ID：12176983
> 
> 赞同：4
> 
> 时间：2012-08-29T11:34:33.493
> 
> 标签：android-intent, gmail, android-manifest, intentfilter

我希望我的应用出现在 gmail 的列表中。当我单击 Gmail 应用程序中的预览按钮时，会出现此列表。

我想知道在意图过滤器中需要添加哪些条目？

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T16:10:37.500

看看 Intent 过滤器：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

具体来说，我认为您会发现 Note Pad Example 很有帮助：http: [//developer.android.com/guide/components/intents-filters.html#npex](http://developer.android.com/guide/components/intents-filters.html#npex)

就个人而言，几个小时前我遇到了同样的问题。我需要用我的应用程序打开文本文件。为此，我必须将其添加到我的清单中：

```
<activity
    android:name=".(ActivityName)"
    android:label="@string/app_name"
    android:exported="true" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="com.google.android.apps.drive.DRIVE_OPEN" />
        <action android:name="android.intent.action.VIEW" />
        <action android:name="android.intent.action.EDIT" />
        <action android:name="android.intent.action.INSERT" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/*" />
    </intent-filter>
</activity> 
```

就这样，我能够让我的应用程序出现在可用应用程序列表中，以从 Astro 打开文本文件，并允许它启动。

要让它真正处理打开文件，您需要在活动中的 onCreate 中添加类似这样的内容：

```
Intent intent = getIntent();
Action action = intent.getAction();
if (action.equals("com.google.android.apps.drive.DRIVE_OPEN")) {
    // Handle the intent from google drive...
} else if (action.equals("android.intent.action.VIEW")) {
    // Handle the intent to view the file...
} else // And so on... 
```

# javascript - 如何使用 jquery 滑块增加日期

> ID：12176985
> 
> 赞同：0
> 
> 时间：2012-08-29T11:34:36.870
> 
> 标签：javascript, jquery, jquery-ui, jquery-slider

我有一个最小值为 1 和最大值为 41 的 jquery 滑块。当我拖动滑块时，我希望能够根据文本框中显示的滑块值显示相应的日期。这是我的滑块代码 /*slider2 开始 */

```
$("#slider2").slider("value",1);
$("#slider2").slider({
    max:41,
    min:1,
     /*
    change:function(event,ui){
        $("input#days").val(ui.value)
    }
    */
    slide: function(event, ui) {   $("#days").val(ui.value) }
});

$("#days").val($("#slider2").slider("value"));

$("#days").change(function(event) {
  var data = $("#days").val();
  if (data.length > 0)
  {
     if (parseInt(data) >= 0 && parseInt(data) <= 41)
     {
         $("#slider2").slider("option", "value", data);
     }
     else
     {
        if (parseInt(data) < 1)
        {
            $("#days").val("1");
            $("#slider2").slider("option", "value", "1");
        }
        if (parseInt(data) > 41)
        {
            $("#days").val("41");
            $("#slider2").slider("option", "value", "41");
        }
     }
  }
  else
  {
    $("#slider2").slider("option", "value", "1");
  } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:57:01.850

如果您只想将天数添加到当前日期，可以使用如下函数：

```
function addDaysToDate(days) {
  var d = new Date();
  d.setHours(d.getHours() + (24 * days));
  return d;
} 
```

您只需传入数字天数参数（在示例中将是来自#days 的值），您将获得未来许多天的日期。

# python - 标准输出与哈希结果的比较（python）

> ID：12176988
> 
> 赞同：1
> 
> 时间：2012-08-29T11:34:48.960
> 
> 标签：python

使用 python 我为一个文件创建一个哈希结果。我从其他地方检索哈希结果，但我必须使用标准输出检索它，我想比较两者。但是检索到的标准输出作为列表检索，并`\n`在末尾有一个。例如，如果我打印它，它可能看起来像这样：`[6d52f\n]`

我知道问题在于，如果我`\n`尝试`\n`将可以比较两者。我知道答案可能正盯着我看，但我将不胜感激。

我的代码是：

```
if ("%s\n" % thishash == otherhash):
    print "they are the same"
else:
    print "they are not the same" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:37:01.803

只需从以下内容中删除换行符`stdin`：

```
>>> x = ['6d52f\n']
>>> x[0].rstrip('\n')
'6d52f' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:48:57.290

> 我必须使用标准输出来检索它

您可能指的是“stdin”，而不是“stdout”。

```
other_hash = raw_input() # no trailing newline
if this_hash == other_hash: 
   "same" 
```

或者您可以`other_hash.rstrip()`不带参数调用以删除所有尾随空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:50:39.990

只需将[条](http://docs.python.org/library/string.html#string.strip)应用于其他哈希：

```
if thishash == otherhash.strip():
    print "they are the same"
else:
    print "they are not the same" 
```

一些额外的建议：

1.  不要使用无关紧要的括号。是pythonic。
2.  可能[小写](http://docs.python.org/library/string.html#string.lower)otherhash 可能是一个好主意。

# android - 检测方向变化，当 Android 上只允许纵向时

> ID：12176991
> 
> 赞同：4
> 
> 时间：2012-08-29T11:34:57.760
> 
> 标签：android, android-orientation

我必须解决以下问题：我有一个`Activity`which's `android:screenOrientation="portrait"`。即使，当设备在`Activity`可见的情况下旋转到横向时，我必须启动另一个，并且当设备旋转回纵向时，我必须`finish()`在横向进行活动。我尝试使用 来执行此`BroadcastReceiver`操作，但由于`android:screenOrientation="portrait"`. 任何帮助都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-28T09:03:48.837

Philipp 在[获取手机方向但将屏幕方向固定为纵向](https://stackoverflow.com/questions/9021890/get-phone-orientation-but-fix-screen-orientation-to-portrait)工作的解决方案非常适合我：

您可以使用 SensorManager 类来获取 Android 设备的方向，即使在 Manifest 中通过 android:screenOrientation="portrait" 禁用自动方向切换时也是如此

请参阅此代码（由 Philipp 提供，请参阅上面的链接）：

```
SensorManager sensorManager = (SensorManager) this.getSystemService(Context.SENSOR_SERVICE);
    sensorManager.registerListener(new SensorEventListener() {
        int orientation=-1;;

        @Override
        public void onSensorChanged(SensorEvent event) {
            if (event.values[1]<6.5 && event.values[1]>-6.5) {
                if (orientation!=1) {
                    Log.d("Sensor", "Landscape");
                }
                orientation=1;
            } else {
                if (orientation!=0) {
                    Log.d("Sensor", "Portrait");
                }
                orientation=0;
            }
        }

        @Override
        public void onAccuracyChanged(Sensor sensor, int accuracy) {
            // TODO Auto-generated method stub

        }
    }, sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_GAME); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T11:35:35.410

当 android:screenOrientation="portrait" 或 "landscape" 在清单文件中设置时，如果您想这样做，仍然不会触发侦听器，请尝试以编程方式在您的 onConfigurationChanged() 中处理仅纵向模式，在这里您也可以开始再次活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T09:35:18.130

您始终可以使用传感器找出您的方向；

```
public static final int PORTRAIT        = 0;
public static final int PORTRAIT_REV    = 2;
public static final int LANDSCAPE       = 1;
public static final int LANDSCAPE_REV   = 3;

private final SensorEventListener mListener = new SensorEventListener() {

   public void onSensorChanged(SensorEvent event) {

            azimuth = event.values[0];
            pitch   = event.values[1];
            roll    = event.values[2];

            {
                if (pitch < -45 && pitch > -135) {
                    orient = PORTRAIT;
                } else if (pitch > 45 && pitch < 135) {
                    orient = PORTRAIT_REV;
                } else if (roll > 45) {
                    orient = LANDSCAPE;
                } else if (roll < -45) {
                    orient = LANDSCAPE_REV;
                }

            }

           // if(orient!=lastOrient && !orientChanging)
           // {
           //   orientChangeStart = System.currentTimeMillis();
           //   orientChanging = true;
           // }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-29T06:27:05.563

经过一番挣扎，我发现最好的方法是像这样使用 OrientationEventListener ：

```
private void addOrientationListener()
    {
        OrientationEventListener listener=new OrientationEventListener(getActivity(), SensorManager.SENSOR_DELAY_UI)
        {
            public void onOrientationChanged(int orientation) {

                if( (orientation>=230 && orientation<=290) || (orientation>=70 && orientation<=90))
                {
                    isLandscape=true;
                }
                else if(orientation==-1){
                    //KEEP THE CURRENT SATTE
                }
                else
                {
                    isLandscape=false;
                }
            }
        };
        if(listener.canDetectOrientation())
            listener.enable();
    } 
```

你应该在 OnPause() 上调用 disable()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T21:00:11.470

你用过方向监听器吗？我不确定这是否正是您所需要的，但我收集到您想知道方向何时来回变化：

> [http://developer.android.com/reference/android/view/OrientationListener.html](http://developer.android.com/reference/android/view/OrientationListener.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T21:35:13.237

您需要使用的类是[OrientationEventListener](http://developer.android.com/reference/android/view/OrientationEventListener.html)，假设您可以检测到旋转。如果您使用 强制屏幕进入特定方向`android:screenOrientation="portrait"`，则不会触发这些事件。

相反，我建议制作两个 layout.xml 文件并使用配置限定符来确定应该显示哪一个。（[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)）

```
res/layout-land/my_layout.xml
res/layout-port/my_layout.xml 
```

然后使用`OrientationEventListener`来检测屏幕何时旋转。当屏幕从横向旋转到纵向时，您可以`finish();`或调用您想要的任何功能。

祝你好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T12:49:41.593

您可以通过多种方式进行操作，一种是收听其他帖子中讨论的广播消息，另一种方法如下。

在清单中为活动设置`android:configChanges="orientation"`，这将使您可以控制方向更改。通过这样做，您可以覆盖该`onConfigurationChanged()`方法并开始您的新活动活动。

# java - 如何将字符串“[quote]”替换为仅“，将[/quote]替换为”

> ID：12176997
> 
> 赞同：0
> 
> 时间：2012-08-29T11:35:05.213
> 
> 标签：java, android, regex

我需要替换所有`[quote]`to`"`和`[/quote]`to`"`以下字符串：

```
[quote]fgfhfgh [quote] vbbb[/quote]ghhhhjj[/quote] 
```

结果应该是这样的：

```
"fghfdgfdh "gghj vbbb"ghhhhjj" 
```

我使用了这个但无法做到：

```
finalRecieveString = (String) uivdHashTable.get("pendingString");
String ReplaceQuote=finalRecieveString.replaceAll("[quote]", "\"");
ReplaceFinalQuoteString=ReplaceQuote.replaceAll("[/quote]", "\""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:51:23.120

您必须转义方括号，正如`replaceAll()`正则表达式所期望的那样，括号是语法的一部分。所以试试：

```
finalRecieveString = (String) uivdHashTable.get("pendingString");
String ReplaceQuote=finalRecieveString.replaceAll("\[quote\]", "\"");
ReplaceFinalQuoteString=ReplaceQuote.replaceAll("\[/quote\]", "\""); 
```

您还可以链接替换：

```
ReplaceFinalQuoteString = finalRecieveString.replaceAll("\[quote\]", "\"").replaceAll("\[/quote\]", "\""); 
```

PS：在“=”周围添加空格会增加代码的可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:52:07.633

String string = "[quote]mucho grando 写道：[quote]mucho grando 写道：vbbb[/quote]ghhhhjj[/quote]";

String tmp_str = string.replace("\[quote]", "\"");

字符串 str_ans = tmp_str.replace("\[/quote]", "\"");

你的 ans **str_ans** = "mucho grando 写道："mucho grando 写道：vbbb"ghhhhjj"

# java - 比较java变量和打印

> ID：12176998
> 
> 赞同：0
> 
> 时间：2012-08-29T11:35:09.220
> 
> 标签：java, variables

假设，我有一些变量：

```
String x="abcd";
String y="qwert";
String z="mnvji"; 
```

和更多...

我接受用户的输入。如果用户输入 'x' ，我打印该字符串，即我打印 "abcd" 如果用户输入 'y' ，我打印 "qwert" 等等......有没有办法在没有开关或 ifs 的情况下做到这一点？

提前谢谢各位朋友。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T11:37:10.023

您可以创建从输入字符串到结果的映射。初始化地图：

```
Map<String, String> map = new HashMap<String, String>();
map.put("x", "abcd");
map.put("y", "qwert");
map.put("z", "mnvji"); 
```

当您想从用户的输入中打印结果时：

```
Scanner s = new Scanner(System.in);

while (s.hasNextLine())
    System.out.println(map.get(s.nextLine())); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T11:38:12.087

局部变量名称在运行时不可用，并且读取字段知道它的名称需要一些反思（请参阅[@amit 的答案](https://stackoverflow.com/a/12177161/605744)）。你需要一张地图：

```
Map<String, String> map = new HashMap<>();
map.put("x", "abcd");
map.put("y", "qwert");
map.put("z", "mnvji"); 
```

现在只需从该地图中获取价值：

```
String value = map.get(userInput); 
```

`value`如果`null`它不匹配任何`x/y/z`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T12:05:45.153

As we can approach like that also,

```
String input[]=new String['z'];
 input['X']="abcd";
 input['Y']="qwert";
 input['Z']="mnvji";
 System.out.println(input['X']); 
```

But it will come under some limitation

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T11:39:00.900

使用键值对实现的地图集合解决了您的问题。

将变量 x,y,z 作为键和 "abcd" ,.. 作为值。

根据输入值从特定键中检索值。

```
Map<String, String> map = new HashMap<String, String>();
map.put("x", "abcd");
map.put("y", "qwert");
map.put("z", "mnvji"); 
```

获得价值

字符串值 = 地图 .get(inputValue)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T11:40:10.963

创建一个字符串数组，其中 x,y,z 应该是索引并相对存储内容...

获取用户输入并将其作为索引传递给数组..你会得到它..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T11:43:53.967

如果您别无选择，只能使用对象变量（*fields*）而不是 a`Map`其他答案所建议的 - 您可能想要使用**[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)**，特别是[`Class.getField()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getField%28java.lang.String%29)and[`Class.getDeclaredField()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredField%28java.lang.String%29)方法 -

```
Field f = MyClass.class.getDeclaredField("x");
System.out.println(f.get(myObject)); 
```

`MyClass`您的类名在哪里，并且`myObject`是您想要从中获取值的对象。

请注意，使用这种方法 - 您无法添加字段 - 您只能获取现有字段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T11:48:17.047

如果您真的不想使用开关或 ifs（我假设您在其中包含地图），那么您必须使用反射来获取所有变量的名称并决定在它们上打印哪些。这是基础知识：

```
Class yourClass = Class.forName("yourpackagename.YourClassName")
Field[] allFields = yourClass.getDeclaredFields();
String[] fieldNames = new String[allFields.length];
for(int i = 0; i < fieldNames.length; i++)
{
   fieldNames[i] = allFields [i].getName();
}

//Get name of field user wants to display, and look it up in
//the fieldNames array to get the index of it, store this index

Object instance = yourClass.newInstance();
System.out.println(allFields[indexToDisplay].get(instance)); 
```

当然，这很可能是矫枉过正。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T12:17:06.463

```
Map<String, String> map = new HashMap<>();
map.put("x", "abcd");
map.put("y", "qwert");
map.put("z", "mnvji");
Scanner s = new Scanner(System.in);
while (s.hasNextLine())
System.out.println(map.get(s.nextLine())); 
```

可能会工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-29T11:38:02.650

将您的变量集作为（键，值）对放入 HashMap 中，并在用户输入键时检索特定键的值。

# java - GridBagLayout 最大单元格大小

> ID：12176999
> 
> 赞同：1
> 
> 时间：2012-08-29T11:35:16.840
> 
> 标签：java, swing, size, cell, gridbaglayout

是否可以限制 GridBagLayout 中的单元格大小（高度/宽度）？

我的意思是.. 我有 2 行具有相同的 weightx = 0.5，但是当我调整大小时，我不希望第一行高于 300 像素。

如果它小于 300，我也不希望它不占用任何可用空间。（将 weightx 设置为 0）。在单元格中为我的组件设置最大大小是没有意义的，因为当我调整所有可用空间的大小时，所有可用空间都被组件填充（组件被调整大小以填充单元格）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:32:51.200

据我所知，GridBagLayout 无法做到这一点。幸运的是，还有其他选择。[`MiGLayout`](http://www.miglayout.com)工作原理类似，`GridBagLayout`但更强大，更具表现力。它也是基于单元格的，可让您设置单元格的最小、首选和最大大小以及单元格的行/列

虽然我建议您制定自己的解决方案，因为这个解决方案过于依赖行约束，并且基于一些关于您想要什么的假设，但这里有一个示例：

```
JPanel panel = new JPanel(new MigLayout("flowy, fillx, filly", "[fill, grow]", "[fill, 0:100:300][fill, 0:100:max(100%,300)]"));
JPanel redPanel = new JPanel();
redPanel.setBackground(Color.RED);
JPanel bluePanel = new JPanel();
bluePanel.setBackground(Color.BLUE);

panel.add(redPanel);
panel.add(bluePanel);

JFrame frame = new JFrame();
frame.add(panel);
frame.pack();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setVisible(true); 
```