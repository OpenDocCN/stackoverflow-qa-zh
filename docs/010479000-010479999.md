# StackOverflow 问答 10479000-10479999

# android - 九个补丁图像在我的设备上不起作用？

> ID：10479001
> 
> 赞同：1
> 
> 时间：2012-05-07T08:34:03.193
> 
> 标签：android, nine-patch

这是我第一次在我的 android 应用程序上使用九补丁图像。太愚蠢了。当我在 Eclipse 布局编辑器上预览时，它可以工作。但是当我在真实设备（HTC Inspire 4g、HTC Explorer、...）上构建应用程序时，情况并非如此。

```
<LinearLayout
                        android:layout_width="0dip"
                        android:layout_height="fill_parent"
                        android:layout_margin="5dp"
                        android:layout_weight="1"
                        android:background="@drawable/shadow_border"
                        android:gravity="center"
                        android:padding="0dip" >

                        <TextView
                            android:id="@+id/itemdetail_textview_price"
                            style="@style/textview_nomalBold"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="$10"
                            android:textColor="#F00"
                            android:textSize="32dp" />

                        <TextView
                            android:id="@+id/itemdetail_textview_originalPrice"
                            style="@style/textview_nomalBold"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="15dp"
                            android:text="$20"
                            android:textSize="32dp" />
                    </LinearLayout> 
```

![九点补丁工具](../Images/7af838bb11c65016a4d3c67e10daeb78.png)

![在 Eclipse 布局编辑器上预览](../Images/1f1aaf6ac4456467f1ae10c6a0cfdcd2.png)

![在真实设备上](../Images/23adac9f363cb6e57ecb5a77bf73e584.png)

这里有什么问题吗？

更新：

*   我正在为 Android 2.2 及更高版本编写应用程序。

*   我的手机使用 Android 2.3

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T09:42:50.113

从底部和右侧删除两个点，因为这些边决定了您的内容应该显示多少空间。

这是九个补丁在android中的工作方式

![九个补丁](../Images/ddd3b2b2f6a7db9c712bf6f7c8664a5f.png)

当您创建九个补丁图像时，请按照[本教程进行操作。](http://android10.org/index.php/articlesother/279-draw-9-patch-tutorial)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T09:08:46.213

我自己解决了它，但我不明白它为什么会起作用。

在九个补丁中，我在图像的顶部和左侧画了两条线（见图片中的两条黑线） ![在此处输入图像描述](../Images/af4da717ecda4c5fcf1449a2c37ae5a7.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:17:47.353

我更深入地测试了一下，似乎draw9patch工具，Eclipse中的图形编辑器和设备有不一致的地方。九个补丁，似乎在前两个中工作，在设备上不起作用 - 它们默默地退回到 BitmapDrawable，而不报告错误。在我的 2.3.5 设备以及 4.1 模拟器上重现。看到这个 android 错误：[http ://code.google.com/p/android/issues/detail?id=38941](http://code.google.com/p/android/issues/detail?id=38941)

解决方法是绘制单行像素，而不仅仅是点。

提示：您的图像应尽可能小。如果将两个点放在左侧或顶部区域，则意味着您有两个拉伸区域，并且它们之间的区域保持未拉伸。您可以从第一个点（不包括）到第二个点（包括）的区域切出，并且只有一个点，图像更小，结果相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-14T22:26:42.507

我正在使用的图像有一个阴影，我很聪明地假设它在到达图像的最后一个像素之前就结束了......所以没有费心将图像放大一个像素......（我知道 9补丁工具正在为我执行此操作，但我正在编辑图像，所以我只是将它添加到那里）

所以问题是预览可以处理带有alpha的像素，9-patch工具也可以处理，但设备不能！

# android - 水平可滚动 ViewPager

> ID：10479007
> 
> 赞同：1
> 
> 时间：2012-05-07T08:34:16.977
> 
> 标签：android, android-layout, android-fragments, android-viewpager, android-scrollview

我想创建一个水平滚动的 ViewPager。我的 ViewPager 包含片段。每个 Fragment 的宽度都大于屏幕，因此必须启用滚动。

我为我的片段项目使用以下布局：

```
<HorizontalScrollView
        android:id="@+id/view_horizontal_scroll"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:isScrollContainer="true" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:orientation="horizontal" >

            <View
                android:layout_width="100dp"
                android:layout_height="fill_parent"
                android:background="#AABBCC" />

            <View
                android:id="@+id/test"
                android:layout_width="1500dp"
                android:layout_height="fill_parent" />

            <View
                android:layout_width="100dp"
                android:layout_height="fill_parent"
                android:background="#ccBBaa" />
        </LinearLayout>
    </HorizontalScrollView> 
```

我还创建了一个允许水平滚动的自定义 ViewPager：

```
public class ScrollableViewPager extends ViewPager {

    private GestureDetector mGestureDetector;

    public ScrollableViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        mGestureDetector = new GestureDetector(getContext(),
                new YScrollDetector());
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        // Tell our parent to stop intercepting our events!
        getParent().requestDisallowInterceptTouchEvent(true);

        return super.onInterceptTouchEvent(ev)
                && mGestureDetector.onTouchEvent(ev);
    }
} 
```

YScrollDetector 只覆盖 onScrollMethod。到目前为止，一切都很好。水平滚动工作正常。

**但是现在我有一个问题：**

假设我有一个 ViewPager，其中包含 5 个片段 ([0]、[1]、[2]、[3]、[4])，并且想要从项目 [2] 开始。当我向后 siwpe 时，我希望前一项 [1] 的滚动位置处于右侧最大值而不是 0。

我的 Fragents 看起来像这样：

```
public class AbstractFragment extends Fragment {

    private static final String _ID = "ID";
    private int _id;
    private ScrollableViewPager mPager;

    public AbstractFragment() {

    }

    public AbstractFragment(int id, int colorId) {
        this._id = id;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d(getClass().getSimpleName(), "[" + _id + "]: onCreate");
        super.onCreate(savedInstanceState);

        if (savedInstanceState != null) {
            _id = savedInstanceState.getInt(_ID);
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View fragmentView = inflater.inflate(R.layout.fragment_menu_container,
                container, false);

        setUpScrollView(fragmentView);

        return fragmentView;
    }

    @Override
    public void onResume() {
        Log.d(getClass().getSimpleName(), "[" + _id + "]: onResume");
        setUpScrollView(getView());
        super.onResume();
    }

    private void setUpScrollView(View fragmentView) {
        if (fragmentView == null) {
            return;
        }
        HorizontalScrollView scrollView = (HorizontalScrollView) fragmentView
                .findViewById(R.id.view_horizontal_scroll);

        if (scrollView != null) {
            int currentItem = getCurrentPagerItem();
            if (_id < currentItem) {
                // previous Item : X Scroll: width of content
                View content = scrollView.getChildAt(0);
                int width = content.getRight();
                width = width - scrollView.getRight();
                scrollView.scrollTo(width, 0);
                Log.d(getClass().getSimpleName(), "[" + _id + "] width: "
                        + width);
                // scrollView.fullScroll(View.FOCUS_RIGHT);
            } else if (_id > currentItem) {
                // next Item - X Scroll: 0
                scrollView.fullScroll(View.FOCUS_LEFT);
            } else {
                // current Item - Nothing to do her
            }

        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        if (outState == null) {
            return;
        }

        outState.putInt(_ID, _id);
    }

    private ScrollableViewPager getPager() {
        PagerActivity activity = (PagerActivity) getActivity();
        return activity.getViewPager();
    }

    private int getCurrentPagerItem() {
        if (mPager == null) {
            mPager = getPager();
        }

        return mPager.getCurrentItem();
    }
} 
```

在我的片段中，我想设置前一个片段的滚动位置。但这不起作用，因为 ScrollView 和 ContentView 的宽度都是 0。

有人知道答案吗？谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:33:40.223

I found a solution by myself:

```
private void setUpScrollView(final ViewGroup fragmentView) {
        if (fragmentView == null) {
            return;
        }

        fragmentView.getViewTreeObserver().addOnGlobalLayoutListener(
                new OnGlobalLayoutListener() {
                    @Override
                    public void onGlobalLayout() {
                        HorizontalScrollView scrollView = (HorizontalScrollView) fragmentView
                                .findViewById(R.id.view_horizontal_scroll);

                        if (scrollView != null) {
                            int currentItem = getCurrentPagerItem();
                            if (_id < currentItem) {
                                // previous Item
                                View content = scrollView.getChildAt(0);
                                int width = content.getWidth();
                                width = width - scrollView.getWidth();
                                scrollView.scrollTo(width, 0);
                            } else if (_id > currentItem) {
                                // next Item
                                scrollView.scrollTo(0, 0);
                            } else {
                                // current Item
                            }

                        }
                    }
                });

    } 
```

# java - 在Java中，匿名类可以扩展另一个类吗？

> ID：10479010
> 
> 赞同：28
> 
> 时间：2012-05-07T08:34:31.280
> 
> 标签：java, class, nested, extend, anonymous

代码如：

```
protected Interface1 varClass1 = new Interface1() { 
```

但我也希望这个匿名嵌套类也扩展类`Base`，例如：

```
protected Interface1 varClass1 = new Interface1() extends Base {
.... 
```

这在Java中可能吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-07T08:38:21.373

匿名类既可以只实现一个接口*，也*可以扩展一个类。

一种解决方法是创建一个扩展`Base`和实现的命名类，`Interface1`然后将其用作匿名类的基类：

```
public abstract class Base1 extends Base implements Interface1 {}

...

protected Interface1 varClass1 = new Base1() {
   ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T08:45:33.910

虽然不可能同时扩展一个类并实现一个接口，但您可能要做的事情可以使用[delegate](http://en.wikipedia.org/wiki/Delegation_%28programming%29)来实现。

只需在匿名类的初始化程序中创建一个实例，`Base`并使用您实现的方法中的方法`Interface1`。

**编辑**：我的回答假设您只想从`Base`它的实现继承，而不是因为它的接口。这是一个有效的假设，因为`Base`在将对象分配给`Interface1`变量后接口不可见。因此，我认为这里最好使用委托而不是创建一个新类。

# asp.net - 如何避免 .aspx.designer.cs 文件中的 CA1051:DoNotDeclareVisibleInstanceFields？

> ID：10479013
> 
> 赞同：1
> 
> 时间：2012-05-07T08:34:54.827
> 
> 标签：asp.net, .net, visual-studio-2010, code-analysis, fxcop

使用 Visual Studio 2010 中的内置代码分析，我在 aspx 文件的设计器文件中的所有字段上都获得了 CA1051。

```
Warning 111 
CA1051 : Microsoft.Design : Because field 'Product.PageTitle' is visible 
        outside of its declaring type, change its accessibility to private 
        and add a property, with the same accessibility as the field has 
        currently, to provide access to it. 
Product.aspx.designer.cs    22 
```

我不想删除其他文件的规则。
我不想手动编辑生成的设计器文件。

我可以以某种方式避免此消息，然后在错误列表中逐个字段地抑制消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:58:30.353

将 Product.PageTitle 设为私有。如果您想在 Product 类之外公开它，请为其创建一个属性。

现在的情况：

```
public/internal string PageTitle; 
```

期望的情况：

```
public/internal string PageTitle { get; set; } 
```

# javascript - Facebook iFrame 应用程序 javascript 未运行

> ID：10479021
> 
> 赞同：1
> 
> 时间：2012-05-07T08:35:24.677
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我有一个网站/facebook 应用程序，可在以下位置访问：

[http://www.vibecompass.com/](http://www.vibecompass.com/) && [https://www.facebook.com/pages/Promethius/302783119739394?sk=app_236915563048749](https://www.facebook.com/pages/Promethius/302783119739394?sk=app_236915563048749)（测试脸书页面申请）

我的“登录”按钮出现在普通网站上（在确定用户是否登录后通过 javascript 插入）但是这在 facebook iframe 上不起作用。谁能给我一些关于可能发生的事情的提示？谢谢！

* * *

编辑1：

似乎与 facebook 的 all.js 的问题有关：“d.onload 不是函数”

这可以防止触发 getLoginStatus 回调。我正在异步加载 facebook js sdk。

# active-directory - 如何与 ActiveDirectory 服务器交互？

> ID：10479025
> 
> 赞同：0
> 
> 时间：2012-05-07T08:35:28.580
> 
> 标签：active-directory, python-3.x

我想编写一个与 ActiveDirectory 服务器（运行程序的客户端进行身份验证的服务器）交互的应用程序，特别是我需要通过应用程序更改 AD 用户的密码。

我已经修改了 pywin32，但我不确定它是否能让我改变事物，只是为了检索已经配置的选项。

有人知道可以让我这样做的模块或任何其他功能吗？

我发现[了这个](https://github.com/dfwarden/ActiveDirectory-Python)，但它似乎是一个实验，有没有更标准化的东西？

正如我所提到的，我也知道 Java，我可以用 Java 编写该程序，尽管我不喜欢这样做，但如果我不得不这样做，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:07:53.663

active_directory 模块支持 Python 3：[https ://github.com/tjguk/active_directory](https://github.com/tjguk/active_directory)

# actionscript-3 - 覆盖外部 swf 中的类

> ID：10479029
> 
> 赞同：0
> 
> 时间：2012-05-07T08:35:55.917
> 
> 标签：actionscript-3

我对加载另一个第 3 方组件 swf（我们称之为 Y）的第 3 方组件（我们称之为 X）有疑问。但是 Y 在与 X 一起使用时有一个错误，我需要修复它。

X 加载 Y 使用：

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListerner(Event.Complete, this.onLoadCom);
loader.load(new URLRequest(config.path));
addChild(loader);
...
private function onLoadCom(event:Event) {
   this.swf = event.target.content;
   addChild(this.swf);
   this.swf.blabla.connect();
} 
```

事实上，我可以选择指定另一个`config.path`，从而加载另一个文件。但是我不知道如何制作一个可以加载的 swf Y2，而不是原始文件，而不需要对 X 进行任何更改，并且仍然保持相同的 api。

一旦我弄清楚如何做到这一点，我还需要弄清楚第二件事：

为了修复这个错误，我必须在 Y 的初始化期间调用 X 中的一个函数，我猜想这可以使用 来完成`getDefinitionByName`，但不清楚我如何处理应用程序域。

# facebook-graph-api - Facebook FQL 查询和多查询的限制是什么（多查询的最大数量和速率限制）

> ID：10479031
> 
> 赞同：7
> 
> 时间：2012-05-07T08:36:34.333
> 
> 标签：facebook-graph-api, facebook-fql, fql.multiquery

是否有一些关于 Facebook 查询和多查询限制的文档？我通过尝试和测试发现多查询开始在每个请求大约 250 个多查询时给出错误，但这不是标准的，因为有时249 多查询工作，有时不工作。
另外，查询是否有一些速率限制系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T12:17:34.013

[Facebook 平台政策](https://developers.facebook.com/policy)规定“如果您超过或计划超过以下任何阈值，请联系我们，因为您可能会受到附加条款的约束：（>5M MAU）或（>100M API 调用/天）或（>每天 5000 万次展示）。” - 这意味着只要您每天不超过 100,000,000 次 API 调用，就可以了。

您应该检查您的多查询是否有其他限制原因，例如脚本超时或服务器的容量限制。发布有关您正在运行的内容的更多详细信息，以便我们查看。

# c# - 整数通过 TempData @ C# ASP.NET MVC3 EntityFramework

> ID：10479033
> 
> 赞同：2
> 
> 时间：2012-05-07T08:36:47.160
> 
> 标签：c#, asp.net-mvc, entity-framework-4, tempdata

我从 TempData 探测整数时遇到了这个问题，因为它将 DempData["sth"] 视为对象，而不是整数本身。这是我将整数发送到 TempData 的 Create 方法：

```
public ActionResult Create(int CustomerId, int qSetId, int Count)
{
    qSet qset = db.qSets.Find(qSetId);
    TempData["qSetId"] = qset.Id;
    Customer customer = db.Customers.Find(CustomerId);
    TempData["CustomerId"] = customer.Id;
    List<Relation> relations = db.Relations.Where(r => r.qSetId.Equals(qSetId)).ToList<Relation>();
    Question question = new Question();
    List<Question> questions = new List<Question>();
    foreach (Relation relation in relations)
    {
        question = db.Questions.Find(relation.QuestionId);
        if (questions.Contains<Question>(question).Equals(false))
            questions.Add(question);
    }
    if (questions.Count<Question>().Equals(Count).Equals(false))
    {
        TempData["QuestionId"] = questions[Count].Id;
        TempData["QuestionType"] = questions[Count].Type;
        ViewBag["QuestionContent"] = questions[Count].Content;
        TempData["Count"] = Count + 1;
        return View();
    }
    else
    {
        return RedirectToAction("ThankYou");
    }
} 
```

这是另一种方法，探测这些数据：

```
[HttpPost]
public ActionResult Create(Answer answer)
{                               
    answer.QuestionId = TempData["QuestionId"];
    answer.CustomerId = TempData["CustomerId"];

    if (ModelState.IsValid)
    {
        db.Answers.Add(answer);
        db.SaveChanges();
        return RedirectToAction("Create", new { CustomerId = TempData["CustomerId"], qSetId = TempData["qSetId"], Count = TempData["Count"] });
    }

    ViewBag.CustomerId = new SelectList(db.Customers, "Id", "eAdress", answer.CustomerId);
    ViewBag.QuestionId = new SelectList(db.Questions, "Id", "Name", answer.QuestionId);
    return View(answer);
} 
```

错误出现在：

```
answer.QuestionId = TempData["QuestionId"];
answer.CustomerId = TempData["CustomerId"]; 
```

像这样去：

> 无法将类型“object”隐式转换为“int”。存在显式转换（您是否缺少演员表？）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T08:38:30.900

对此的解决方案称为“拆箱”。这是从*object*到*int*的直接转换：

```
answer.QuestionId = (int)TempData["QuestionId"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-16T22:15:51.887

我的代码中有同样的问题。

这两种解决方案都有效：

```
 answer.QuestionId = Convert.ToInt32(TempData["QuestionId"]; 
```

和

```
 answer.QuestionId = (int)TempData["QuestionId"]; 
```

但是，(int) 强制转换并非在每个实例中都有效，因为并非每个对象都可以隐式强制转换为 int。因此，使用 Convert.ToInt32() 更安全

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T20:31:47.113

```
int id = Convert.ToInt32(TempData["QuestionId"].ToString()); 
```

# iphone - 带有电子邮件正文的 NSMutableArray 数据附件？

> ID：10479036
> 
> 赞同：0
> 
> 时间：2012-05-07T08:37:10.270
> 
> 标签：iphone, xcode, nsmutablearray, nsdata, mfmailcomposeviewcontroller

我的 NSMutableArray 数据采用 NSData 格式。我正在尝试将 NSMutableArray 数据附加到电子邮件正文。这是我的 NSMutableArray 代码：

```
 NSUserDefaults *defaults1 = [NSUserDefaults standardUserDefaults];
   NSString *msg1 = [defaults1 objectForKey:@"key5"];
   NSData *colorData = [defaults1 objectForKey:@"key6"];
   UIColor *color = [NSKeyedUnarchiver unarchiveObjectWithData:colorData];
   NSData *colorData1 = [defaults1 objectForKey:@"key7"];
   UIColor *color1 = [NSKeyedUnarchiver unarchiveObjectWithData:colorData1];
   NSData *colorData2 = [defaults1 objectForKey:@"key8"];
   UIFont *color2 = [NSKeyedUnarchiver unarchiveObjectWithData:colorData2];
   CGFloat x =(arc4random()%100)+100;
   CGFloat y =(arc4random()%100)+250;  
   lbl = [[UILabel alloc] initWithFrame:CGRectMake(x, y, 100, 70)];
   lbl.userInteractionEnabled=YES;
   lbl.text=msg1;
   lbl.backgroundColor=color;
   lbl.textColor=color1;
   lbl.font =color2;
   lbl.lineBreakMode = UILineBreakModeWordWrap;
   lbl.numberOfLines = 50;
   [self.view addSubview:lbl];
   [viewArray addObject:lbl ]; 
```

viewArray 是我的 NSMutableArray。viewArray 中的所有数据存储都在 NSData 格式中。那么如何将这个 viewArray 数据附加到电子邮件正文中。这是我的电子邮件代码。

```
 - (IBAction)sendEmail
{

if ([MFMailComposeViewController canSendMail])
{
  NSArray *recipients = [NSArray arrayWithObject:@"example@yahoo.com"];
  MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] 
  init];
  controller.mailComposeDelegate = self;
  [controller setSubject:@"Iphone Game"];

   NSData *data = [NSKeyedArchiver archivedDataWithRootObject:viewArray];
   NSLog(@"testing: %@", data);
  [controller addAttachmentData:data mimeType:@"application/octet-stream";  
  fileName:nil]; 

  NSString *emailBody = @"Happy Valentine Day!";
  [controller setMessageBody:emailBody isHTML:NO
  [controller setToRecipients:recipients];
  [self presentModalViewController:controller animated:YES];
  [controller release];

  }
 else 
 {
  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert"
   message:@"Your device is not set up for email." 
                                           delegate:self 
                                  cancelButtonTitle:@"OK" 
                                  otherButtonTitles: nil];

 [alert show];

 [alert release];
}

 } 
```

我得到 NO Error .viewArray 在这里显示存储在其中的对象，当我将 viewArray 转换为 NSData 时，它在控制台中显示字节。但不在电子邮件正文中显示任何数据..在 viewArray 中。请任何一个指南我怎么可能用电子邮件附加我的 viewArray 数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T19:28:53.840

从[MFMailComposeViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)`addAttachmentData:mimeType:fileName:`参考：

> 文件名
> 
> 与数据关联的首选文件名。这是将文件传输到其目的地时应用到文件的默认名称。文件名中的任何路径分隔符 (/) 字符在传输之前都将转换为下划线 (_) 字符。此参数不得为 nil。

因此，您似乎必须指定要在邮件正文中显示的正确文件名。任何字符串都可以。

编辑：

恐怕我无法理解您的评论......正如我所说，我已经成功发送了一封包含您的代码的电子邮件：我得到的是一个 plist 文件，所以一切都按预期工作。这是我正在使用的代码：

```
NSUserDefaults *defaults1 = [NSUserDefaults standardUserDefaults];
NSString *msg1 = [defaults1 objectForKey:@"key5"];
UIColor *color = [UIColor grayColor];
UIColor *color1 = [UIColor grayColor];
UIFont *color2 = [UIFont systemFontOfSize:12];
CGFloat x =(arc4random()%100)+100;
CGFloat y =(arc4random()%100)+250;  
UILabel* lbl = [[UILabel alloc] initWithFrame:CGRectMake(x, y, 100, 70)];
lbl.userInteractionEnabled=YES;
lbl.text=msg1;
lbl.backgroundColor=color;
lbl.textColor=color1;
lbl.font =color2;
lbl.lineBreakMode = UILineBreakModeWordWrap;
lbl.numberOfLines = 50;
[self.view addSubview:lbl];
NSMutableArray* viewArray = [NSMutableArray arrayWithCapacity:1];
[viewArray addObject:lbl ];

if ([MFMailComposeViewController canSendMail]) {
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
    mailer.mailComposeDelegate = self;
    [mailer setSubject:@"Hello"];
    [mailer setToRecipients:[NSArray arrayWithObjects:@"mailAddress@mailAddress", nil]];
    NSString *emailBody = @"";
    [mailer setMessageBody:emailBody isHTML:NO];

    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:viewArray];
    [mailer addAttachmentData:data mimeType:@"application/octet-stream" fileName:@"prova.plist"]; 

    [self presentModalViewController:mailer animated:YES];
    [mailer release];
} 
```

在你的情况下，我会走的路是：

1.  暂时忘记附件，尝试给您发送一封简单的文本电子邮件；

2.  如果可行，请添加发送附件的 2 行：

    ```
    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:viewArray];
    [mailer addAttachmentData:data mimeType:@"application/octet-stream" fileName:@"prova.plist"]; 
    ```

在这两种情况下，在您的委托方法中设置断点`- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error`并查看执行了哪个分支：

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {
switch (result) {
        case MFMailComposeResultCancelled:
        case MFMailComposeResultSaved:
        case MFMailComposeResultSent:
        case MFMailComposeResultFailed:
        default:
        break;
    }
[self dismissModalViewControllerAnimated:YES];
} 
```

# python - Python - 直接从硬盘读取

> ID：10479040
> 
> 赞同：4
> 
> 时间：2012-05-07T08:37:45.400
> 
> 标签：python, hard-drive

我想直接从硬盘读取字节，最好使用 python。如果可能的话，我怎么能做到这一点。另外，我可以直接写入硬盘吗？如何？

我想这样做是为了对硬盘驱动器进行完整克隆，然后从该备份中恢复。我很确定有更简单的方法可以完成我想做的事情，这部分只是出于好奇；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T08:40:19.250

在 Linux 上，您可以`open('/dev/sdX', 'r')`.

但是，更简单的方法是使用`dd`命令行实用程序（但只有在两个磁盘完全相同的情况下才能正常工作）。

# sql - 在 select 语句中使用多个 and 的查询性能不佳

> ID：10479043
> 
> 赞同：0
> 
> 时间：2012-05-07T08:37:56.690
> 
> 标签：sql, performance, sql-server-2008

您好我正在使用 SQL 管理工作室 2008R2。

我有一个查询来获取 tblScan 的扫描 ID，其中一些 varbinary(max) 字段为空。我的查询是：

```
select SCANID 
from tblScan 
where scanFileFace is null 
  and scanFileAvatar is null 
  and hair is null 
```

当我在 SQL 中执行查询时，第一次运行此查询需要一分半钟。在我的客户端，这给出了超时异常。如果我没有在 SQL 管理工作室中运行过 1 次查询。

优化此查询的最佳方法是什么？或者可以只增加我的连接字符串中的超时时间吗？

编辑：

这是我的桌子设计：

**SCANID** - int
**scanDate** - datetime
**scanFileMeasurements** - varbinary(MAX)
**MEMBERID** - int
**scanFileFace** - varbinary(MAX)
**scanFileAvatar** - varbinary(MAX)
**头发**- varbinary(MAX)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:40:27.690

请在 scanFileFace 、scanFileAvatar 和 hair 字段上使用索引。

创建一个计算列，该列将在目标字段中更改值时自动计算，并在此计算字段上创建索引。我会大大提高查询性能。

```
alter table tblScan
add ContentLength as ISNULL(DATALENGTH(scanFileFace ),0) persisted

CREATE NONCLUSTERED INDEX [IX_tblScan_ContentLength] ON [dbo].[tblScan] 
(
    [ContentLength] ASC
)

select scanid from tblScan where ContentLength > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:59:20.207

也许您想要一个带有索引的计算布尔字段。

插入时，让布尔字段成为您现有的条件；更新时，您可以使用触发器执行此操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:58:27.763

您可能会尝试使用[物化视图](http://msdn.microsoft.com/en-us/library/ms191432%28v=sql.105%29.aspx)。简而言之，它是一个索引视图，其行为类似于表并随着基础数据的变化而变化，但它不需要执行 select，因为在基础表的 CRUD 操作期间已经准备好数据。

```
create view EmptyScans with schemabinding
as
    select SCANID 
      from dbo.tblScan 
     where scanFileFace is null 
       and scanFileAvatar is null 
       and hair is null
GO
create unique clustered index ix_empty_scans on EmptyScans (ScanID)
GO

select scanid 
  from EmptyScans (noexpand) 
```

从物化视图中选择时不要忘记添加 noexpand 提示，否则它将充当普通视图（至少在我使用 Sql Server 2005 的经验中）。

# c# - 在 c# 上表示通配符

> ID：10479044
> 
> 赞同：4
> 
> 时间：2012-05-07T08:38:09.907
> 
> 标签：c#, regex, oracle, wildcard

我正在尝试使用 Regex 类在我的 c# 程序上实现两个 oracle 通配符“%”和“_”。问题是当我有通配符“_”时，因为我只需要接受一个字符，但每次我有至少一个字符时它都会返回 true。你能帮我么？

这是我的代码：

```
string filter, string1;

string wildcard1 = "[" + "\\d | " + "\\n | " + "\\s |" + "\\w]+";
string wildcard2 = "[" + "\\d | " + "\\n |" + "\\s | " + "\\w]{1}";

filter = Regex.Replace(filter, "%", wildcard1);
filter = Regex.Replace(filter, "_", wildcard2);

Regex regex1 = new Regex(filter, RegexOptions.IgnoreCase);

MatchCollection a = regex1.Matches(string1);

if (regex1.IsMatch(string1))
{
    return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:28:10.397

您必须进行以下两种转换：

*   `%`to `.*`，意思是“任意字符，任意次数”
*   `_`这`.`意味着“任何字符（如果您没有另外指定，则默认一次）”

您还必须`^`在开头和`$`结尾添加，以强制匹配整个字符串，而不是其中的一部分。

最后，这非常重要，您必须[转义原始字符串](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)。如果您不这样做，任何特殊字符都将由正则表达式处理。即`.`原始字符串中的点将在正则表达式中被解释为“任何字符”。

例如，如果你有这个 SQL LIKE 字符串：

```
 Hello, %, is your inital _? 
```

您必须将其转换为：

```
 ^Hello, .*, is your inital .\?$ 
```

（这将匹配诸如“Hello, John, is your initial J?”之类的字符串）

首先，您必须对其进行转义，以便`?`使用反斜杠转义 the 和任何其他特殊字符`\`。

然后替换`%`and`_`并添加字符串字符的开头和结尾（`^`and `$`）。

另请注意，您可以使用选项创建正则表达式，其中一个选项可让您指定它是否区分大小写。这也是模仿 Oracle 行为所必需的。

最后，使用[IsMatch(string)](http://msdn.microsoft.com/en-us/library/3y21t6y4.aspx)方法代替 Match。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:51:29.773

使用这样的正则表达式，如果任何子字符串匹配，您将获得匹配。因此，如果您要求`abc_`输入字符串是`abcde`，它也会匹配，因为子字符串`abcd`匹配。`^`用and包裹你的过滤器`$`以避免这种情况。

除此之外，在构建正则表达式时进行初始替换，如下所示：

```
filter = Regex.Replace(filter, "%", wildcard1);
filter = Regex.Replace(filter, "_", wildcard2); 
```

正在自找麻烦，除非您确保您替换的字符不是正则表达式特殊字符。只需为此使用普通字符串替换即可。

另外，您可以只使用`regex.IsMatch`而不是`Matches`.

# c# - 为什么 IEnumerable 只有“out”协变标志而不是“in”c#？

> ID：10479046
> 
> 赞同：2
> 
> 时间：2012-05-07T08:38:28.513
> 
> 标签：c#, .net, .net-4.0, ienumerable, covariance

我想知道，为什么`IEnumerable<T>`只有`out`和没有 `in`逆变标志？

```
public interface IEnumerable<out T> 
```

我可以`out`通过这个例子理解：

```
IEnumerable<string> strings = new List<string>(){"a","b","c"};
IEnumerable<object> objects = strings; 
```

`object`大于`string`，所以编译器害怕做类似的事情：

```
 objects = objects.First().Select(x=>5);// ( we cant insert int to string...) 
```

很好理解。

但是如果我想使用 IEnumerable 作为**插入**呢？

就像是 ：

```
IEnumerable<object> objects = ...;
IEnumerable<string> strings = objects 
```

所以我也可以插入到对象中......

但问题是没有`IEnumerable<in T>`...

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T08:46:56.690

你不能插入到`IEnumerable`. 不幸的是，没有“IInsertable”。

没有界面告诉您只能将项目添加到集合中。这将是一个`in`泛型类型。因为您可以在每个集合接口上获取项目，所以不可能有`in`通用参数。

**编辑**

该接口`IEnumerable<T>`只有 getter，因此您不能使用该接口向集合中插入任何元素。因此，`out`在 的声明中是允许的`IEnumerable<out T>`。它告诉编译器，类型`T`的值只在一个方向上，正在“出来”。这使它在一个方向上兼容。您可以`IEnumerable<string>`用作`IEnumerable<object>`，因为您只是从中读取。您可以将字符串读取为对象。但是你不能写入它，你不能将对象作为字符串传递。它可能是整数或任何其他类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T08:58:09.260

在介绍 C# 中的协/逆变之前， Eric Lippert 有[一系列](http://blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)关于此的帖子，值得一读。

一个简单的例子是

```
public class Animal(){
...
}

public class Giraf(){
   public void LookAboveTheClouds(){}
}

IEnumerable<Animal> animals = new list<Animal>{
                                    new Elephant(),
                                    new Tiger(), 
                                    new TinyMouse()};
IEnumerable<Giraf> girafs = animals;

foreach(var giraf in girafs){
   //elephants,tigers and tiny mice does not suuport this
   giraf.LookAboveTheClouds() 
} 
```

换句话说，编译器无法保证您可以安全地使用您`IEnumerable<Animal>`的`IEnumerable<Giraf>`. 所有的长颈鹿都是动物，但不是所有的动物都是长颈鹿

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T09:03:57.180

我在这里看不到你的问题。使用时`IEnumerable`你不能插入，那不是你在做什么。您正在尝试做的是分配`IEnumerable<string>`一个值，`IEnumerable<object>`这是行不通的。当您为您分配`IEnumerable<string>`一个类型的对象时，`IEnumerble<object>`您不能保证列表中的所有对象都是字符串类型。这就是为什么不能这样做。

协变，`out`关键字，interfaces 确保输出总是可以被消费部分理解，也就是说，`IEnumerable<string>`可以将 an 转换为`IEnumerable<object>`since列表，`string : object`并且消费列表的人`object`必须知道如何处理 a `string`，但不能反过来。

逆变，`in`关键字，接口使您能够将对象转换为较少指定的泛型，也就是说，`IComparer<object>`可以转换为，`IComparer<string>`因为实现的类`IComparer<object>`现在必须如何处理`string`，因为它是逆变的，但不是相反。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/dd799517.aspx](http://msdn.microsoft.com/en-us/library/dd799517.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T08:46:44.600

我认为输入安全性是严格意义上的：如果你在你的列表中
`IEnumerable<object> {"Hello", 2.34d, new MyCoolObject(), enumvalue}`怎么办？

运行时应该如何处理这些转换？

如果`string`它可能是一个简单的案例，因为它*应该*足以调用覆盖（如果有的话）`ToString()`，但框架设计者不能依赖自定义案例并且应该提供通用解决方案。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T09:19:53.817

正如评论中已经提到的，您不能使用 IEnumerable 来修改集合。

由于您提到的类型安全问题（将 int 插入字符串列表），编译器将不允许像下面这样的代码，因为您可以在此处使用对象修改字符串列表

IEnumerable 只是一个集合的迭代器。

```
static void Main(string[] args)
{
    IList<string> strings = new List<string> { "a", "b", "c" };
    IList<object> objects = strings;  ** // This will give an error because compiler does not want you to do the line below **
    objects.Add(5);  // Type safety violated for IList<string> hence not allowed

    // The code below works fine as you cannot modify the strings collection using IEnumerable of object
    //IEnumerable<string> strings = new List<string> { "a", "b", "c" };
    //IEnumerable<object> objects = strings;
} 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T12:18:07.353

您不能分配给`IEnumerable<Parent>`，`IEnumerable<Child>`因为它可能包含**不是** `Child`.

> 但是如果我想使用 IEnumerable 作为插入呢？就像是 ：

```
IEnumerable<object> objects = ...;
IEnumerable<string> strings = objects 
```

**在编译时**无法知道`IEnumerable<object>`不包含非`string`. 但是，如果您（程序员）知道那里只有`string`s，您可以在运行时进行强制转换：

```
IEnumerable<string> strings = objects.Cast<string>(); 
```

顺便说一句，您可能想看看标签[covariance的](/questions/tagged/covariance "show questions tagged 'covariance'")[描述](https://stackoverflow.com/tags/covariance/info)。

# visual-studio - 使用 Visual Studio 生成事件一次替换多个文件中的字符串

> ID：10479047
> 
> 赞同：1
> 
> 时间：2012-05-07T08:38:29.833
> 
> 标签：visual-studio, visual-studio-2010, command-line, batch-file, command-prompt

我需要一个预构建事件命令，它将在目录层次结构中递归地遍历一组特定类型的文件，并用另一个字符串替换一个字符串。

我设想使用该命令的方式如下：

```
replace [ROOTPATH] [FILETYPE] [TARGETSTRING] [REPLACEMENTSTRING] 
```

因此，如果我要将此命令放在我的预构建事件中：

```
replace "$(ProjectDir)Views" "*.cs" "~/Views" "~/Areas/Admin/Views" 
```

views 文件夹下的每个扩展名为 .cs 的文件都将被更改，以将“~/Views”替换为“~/Areas/Admin/Views”。请注意，我希望更改文件，而不是将结果通过管道传输到新文件中。

[我知道 unix 有一个名为 replace 的命令](http://www.cyberciti.biz/tips/how-do-i-replace-text-string-in-many-files-at-once.html)，如果我要将它构建到脚本中，它会执行我正在寻找的操作。

dos 中是否有可用的命令来执行此操作，或者已经构建的脚本可以为我执行此功能？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T08:45:52.950

我认为这批很难找到，所以我想我会在这里发布。您可以通过添加参数 [ROOTPATH] 和 [FILETYPE] 或其他参数来增强此批处理，并增强此批处理以仅对文件进行字符串更改。

我的帖子被删除了，因为这不是您问题的直接答案，但我认为它可以帮助您真正实现目标。

您的问题的答案是：不存在这样的命令，您必须创建自己的批处理文件（如我的链接文件）才能达到目标。

有关更多信息，请查看以下链接，这应该可以帮助您通过 DOS 替换文件中的字符串：http: [//www.dostips.com/? t=batch.findandreplace](http://www.dostips.com/?t=batch.findandreplace)

# c# - 使用 ASP.NET MVC 操作方法

> ID：10479055
> 
> 赞同：6
> 
> 时间：2012-05-07T08:38:48.280
> 
> 标签：c#, wpf, asp.net-mvc, wcf

当前情况：一个 ASP.NET MVC 网站，其中包含许多控制器和操作方法，以及允许添加配方的视图。

现在，我必须创建一个 WPF 应用程序，它充当 UI 以添加食谱（与网站相同）。

我的问题是：我可以使用 ASP.NET MVC 站点来公开 WPF 应用程序使用的服务操作（以及如何做到这一点）？或者我应该更好地为此创建专用的 WCF 服务，并让 WPF 和 ASP.NET MVC 站点使用这些服务？

谢谢，路德维希

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T08:47:12.820

我已经成功地使用 MVC 控制器和操作来为来自浏览器的 HTML 视图以及外部应用程序提供服务。它运作良好，但就目前而言，您需要一些工具：

1.  我有一个动作过滤器，它以客户端请求的格式返回由动作产生的模型（通过检查 Accepts 标头，查找 application/json 或 text/xml）。因此，我可以将生成的模型序列化为 JSON 或 XML（我更喜欢 JSON）。
2.  您将需要在您的客户端应用程序中找到或创建一个简单的 API 来为您的操作创建 WebRequest，然后处理结果。我创建了一个可以 POST 或 GET 的简单 API，然后将任何生成的 JSON 反序列化为一个对象（使用 JSON.NET）。您可以使用 REST 客户端 API。

但是，如果您采用 WCF-REST 路线，则可以避免使用这些额外的工具。更好的是，我会研究 ASP.NET MVC 4 的 WebApi 功能（这是我将迁移到的功能）。

郑重声明，我认为 WCF 功能强大，但我们的组织已经厌倦了转动所有旋钮并按下所有开关以使其正常工作以及从一个安装到另一个安装轻松设置是多么复杂。另一方面，MVC 可以正常工作……而且由于我们已经使用它来为我们的 HTML 视图提供服务，因此只需添加一些额外的代码就可以让它处理服务调用，这真是一种乐趣。当然，只是个人喜好。

# javascript - OR 运算 ( || ) 与 inArray() 的性能

> ID：10479056
> 
> 赞同：7
> 
> 时间：2012-05-07T08:38:49.187
> 
> 标签：javascript, jquery, performance

假设您要检查用户在表单字段中输入的输入字符串。哪一种方法是根据可能值列表检查此输入的最快方法？

以下示例使用**jQuery**。

第一种方法：使用`||`

```
if (input == "firstValue" || input == "secondValue" || ... ) {
    ...
} 
```

第二种方法：使用`inArray()`

```
if ($.inArray(input, array) >= 0) {
    ...
} 
```

这两种方法之间有什么显着差异吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-07T08:42:19.937

你不想要最快但最易读的方式。这就是`in_array()`(JavaScript: `array.indexOf(value) >= 0`) 超过 2 或 3 个值。

性能差异可以忽略不计——虽然函数调用和数组创建肯定有一些开销，但与文件访问、数据库访问、网络访问等昂贵的操作相比，这并不重要。所以最终没有人会注意到差异.

这是一个简短的[基准](https://paste.aeum.net/show/77/)，每个都有 100 万次迭代：

```
5.4829950332642 - in_array, the array is recreated everytime
2.9785749912262 - in_array, the array is created only once
0.64996600151062 - isset(), the array way created only once and then the values were turned to keys using array_flip()
2.0508298873901 - || 
```

所以，最快但仍然非常易读的方式是这个。除非您`$arr`只创建一次并多次使用它**，**否则没有必要这样做，您可以简单地使用`in_array()`.

```
$arr = array_flip(array('your', 'list', 'of', 'values'));
if(isset($arr[$value])) ... 
```

* * *

如果您*确实*要求使用 JavaScript（在这种情况下**摆脱那些`$`前缀！**），最好的解决方案是使用`Array.indexOf()`：

```
['a', 'b', 'c'].indexOf(value) >= 0 
```

然而，并不是所有的浏览器都已经支持`Array.indexOf()`，所以你可能想使用 Underscore.js 中的[函数](http://documentcloud.github.com/underscore/)：

```
_.contains(['a', 'b', 'c'], value) 
```

jQuery 也有一个功能：

```
$.inArray(value, ['a', 'b', 'c']) 
```

最快的方法是使用对象和`in`运算符，但对象定义的可读性不如数组定义：

```
value in {'a':0, 'b':0, 'c':0} 
```

这是各种解决方案的 JSPerf 基准测试：http://jsperf.com/inarray-vs-or [-](http://jsperf.com/inarray-vs-or)但同样，在大多数情况下，相当大的性能差异可以忽略不计，因为您不会在一次代码中执行数百万次环形。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T08:42:06.523

答案是，*这取决于*...

如果只有几种可能性，请使用`if (a || b || c)`.

如果可能多达 10 个，请使用`Array.indexOf()`

请注意，对于上面的两个建议，选择应该取决于*可读性*，而不是真正的性能。

如果有（很多）更多，请使用`Object`与值相等的键，然后您可以使用`if (myVar in myKeyObj)`. 这应该给出最差的`O(log n)`性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T08:42:18.577

执行 javascript 时，性能通常不是什么大问题，而且通常是很难回答的问题。

在此示例中，解决方案之间的主要区别在于缩放。第一个解决方案将始终进行预定数量的比较，inArray 解决方案的扩展性更差，因为如果有更多的值，它将进行更多的比较。

但是我仍然会选择 inArray，99.99% 的机会表现真的无关紧要。你想让你的代码保持可维护性，这更重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T08:55:07.543

在大多数语言中，inArray() 是这样实现的：

```
function inArray(needle, haystack) {
  for (i = 0; i < length; i++) {
    if (haystack[index] == needle) {
      return true;
    }
  }

  return false;
} 
```

如果你要展开那个循环，你最终会做

```
if (haystack[0] == needle) {
  return true;
} 
if (haystack[1] == needle) {
  return true;
}
if (haystack[3] == needle) {
  return true;
}
// and so on 
```

可以浓缩为

```
if (haystack[0] == needle || haystack[2] == needle || … ) {
  return true;
} 
```

在不改变引擎盖下发生的事情的情况下。

* * *

如果您反复查找类似的东西，我建议您了解地图。代替

```
var haystack = ['hello', 'world', 'how', 'is', 'life'];
if (inArray("life", haystack)) {
  // …
} 
```

你做

```
var haystack = {'hello' : true, 'world' : true, 'how' : true, 'is' : true, 'life' : true};
if (haystack["life"]) {
  // …
} 
```

必须检查的元素越多，与数组相比，地图的性能就越好。

# xml - 如何在 Marklogic Server 中创建数据库字段？

> ID：10479058
> 
> 赞同：3
> 
> 时间：2012-05-07T08:39:01.173
> 
> 标签：xml, field, marklogic

我有以下xml结构

```
 <patent-assignors>
        <patent-assignor>
          <name>VOLPENHEIN, ROBERT A.</name>
          <execution-date>
        <date>19841204</date>
          </execution-date>
        </patent-assignor>
 </patent-assignors>

    <patent-assignees>
        <patent-assignee>
          <name>PROCTER &amp; GAMBLE COMPANY, THE</name>
          <address-2>A CORP. OF  OHIO</address-2>
          <city>CINCINNATI</city>
          <state>OHIO</state>
        </patent-assignee>
   </patent-assignees> 
```

我想在 Marklogic Server 中为`patent-assignor`&创建一个数据库字段，`patent-assignee` 以便我可以使用`cts:field-word-query`. 但我想搜索专利转让人和专利受让人的姓名（都包含相同的元素“ `name`”）。谁能告诉我如何将专利转让人的字段映射到专利转让人的姓名，将专利受让人的字段映射到专利受让人的姓名，以便我可以`cts:field-word-query`在专利转让人和专利受让人的姓名上使用。我想要一个精确的匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:04:34.667

这听起来不像是字段索引的用例。只需在元素''上放置一个索引`name`，两种情况都将在同一个索引中进行索引。为了进行区分，请为相应的父元素包装 a`word-query`或`value-query`用 an 。`element-query`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T19:19:47.167

我认为上面关于确保您了解可用选项的评论都很重要。如果我正确理解您的问题，MarkLogic 可能只使用“通用索引”来回答您的搜索。

因为assignor 和assignee 都使用名为“ `name`”的元素，所以查询两者的精确匹配非常简单（精确匹配通常意味着a `value-query`not a `word-query`）

```
cts:element-value-query(xs:QName("name"), "VOLPENHEIN, ROBERT A.") 
```

但是，如果您的数据中除了转让人和受让人之外还有更多“ `name`”元素，并且您需要将点击范围缩小到仅来自这些而不是其他“ `name`”字段，您可以使用它`element-queries`来限制搜索（为了使其能够很好地扩展，请确保您已将数据库中`element-word-positions`的`element-value-positions`设置设置为 true）

```
cts:or-query((

    cts:element-query( xs:QName("patent-assignor"), 
                       cts:element-value-query(
                           xs:QName("name"), 
                           "VOLPENHEIN, ROBERT A.")),

    cts:element-query( xs:QName("patent-assignee"), 
                       cts:element-value-query(
                           xs:QName("name"), 
                           "VOLPENHEIN, ROBERT A."))
)) 
```

字段在隔离特定元素方面可能非常强大，尤其是当需要遵循复杂的“包含”和“排除”逻辑时。我认为您很可能只需使用“通用索引”在查询时进行过滤就可以使事情变得更加灵活。

# android - 发送值位置在 10 分钟后继续

> ID：10479059
> 
> 赞同：1
> 
> 时间：2012-05-07T08:39:03.463
> 
> 标签：android, database, latitude-longitude

我想将我的位置发送到我的数据库中。我有这样的代码来获取位置（经度和纬度）

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LocationManager locationManager;
    String context = Context.LOCATION_SERVICE;
    locationManager = (LocationManager)getSystemService(context);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    String provider = locationManager.getBestProvider(criteria, true);

    //Location location = locationManager.getLastKnownLocation(provider);
    updateWithNewLocation(null);

    locationManager.requestLocationUpdates(provider, 2000, 10,
                                           locationListener);

}
private final LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
      updateWithNewLocation(location);
    }

    public void onProviderDisabled(String provider){
      updateWithNewLocation(null);
    }

    public void onProviderEnabled(String provider){ }
    public void onStatusChanged(String provider, int status, 
                                Bundle extras){ }
  };
  private void updateWithNewLocation(Location location) {
        //EditText etlat=(EditText)findViewById(R.id.lat);
        //EditText etlong=(EditText)findViewById(R.id.lng);

        if (location != null) {
            double lat = location.getLatitude();
            System.out.println(lat);
             double lng = location.getLongitude();
             System.out.println(lng);
             double alt = location.getAltitude();
             System.out.println(alt);
             etlat.setText(String.valueOf(lat));
             etlng.setText(String.valueOf(lng));
             etalt.setText(String.valueOf(alt));
        } 
  } 
```

然后我想将我的位置保存到数据库中，间隔 10 分钟..
我该怎么做？谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:00:42.857

```
 locationManager.requestLocationUpdates(provider,(10*60*1000),10,
                                           locationListener); 
```

你可以试试这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:28:36.387

编写一个扩展 Service 的类并在清单文件中添加适当的标签。

编写服务运行时要执行的代码，例如获取位置并将其保存在 onCreate() 方法中的数据库中。

可以参考本教程： [http ://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T08:53:36.090

只需以 10 分钟的间隔启动计时器.. 和 make requestLocationUpdate();

然后你将获得一组纬度，每个 GPS 定位的日志值.. 通过 location.getAccuracy() 从中获得最佳值.. 并编写用于数据库插入的代码。

# mysql - 从SqlDeveloper连接成功时无法通过redhat中的mysql -u root连接到mysql

> ID：10479062
> 
> 赞同：0
> 
> 时间：2012-05-07T08:39:20.157
> 
> 标签：mysql, linux, oracle-sqldeveloper

我最近安装了**SQLDeveloper**并通过它连接到 mysql，之后我遇到以下错误：

```
[root@tborl01 LATER]# mysql -u root -p
Enter password:
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)
[root@tborl01 LATER]# 
```

**虽然通过 SQLDeveloper**与相同凭据的连接是成功的，这意味着**mysqld 正在运行**。我已经通过**SQLDeveloper**关闭了连接，并再次尝试通过命令提示符进行连接，但面临同样的错误。

我也尝试过启动/重启 mysql 服务：

```
service mysql restart

MySQL manager or server PID file could not be found!       [FAILED]
Starting MySQL.................................................................................................../etc/init.d/mysql: line 159: kill: (21944) - No such process
                                                           [FAILED]

Listing running process gives following output( shows mysqld as running)

[root@tborl01 init.d]# ps -eaf | grep mysqld
root      4849     1  0  2011 ?        00:00:00 /bin/sh /usr/bin/mysqld_safe --datadir=/var/lib/mysql --pid-file=/var/lib/mysql/tborl01.pid

mysql     4878  4849  0  2011 ?        02:39:06 /usr/sbin/mysqld --basedir=/ --datadir=/var/lib/mysql --user=mysql --pid-file=/var/lib/mysql/tborl01.pid --skip-external-locking

root     19572 21368  0 13:42 pts/6    00:00:00 grep mysqld 
```

**SQLDeveloper**是否更改了某些设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:44:40.873

1.  mysql 不是服务它是 mysqld

2.  你需要用mysql连接

    mysql -h 127.0.0.1 -u root -p

试着让我知道

# python - 如何使用 python fabric 自动回答提示？

> ID：10479078
> 
> 赞同：32
> 
> 时间：2012-05-07T08:40:34.007
> 
> 标签：python, command-prompt, fabric

我想运行一个命令，提示我输入 yes/no 或 y/n 或其他任何内容。如果我只是运行命令`local("my_command")`，那么它会停止并要求我输入。当我输入需要的内容时，脚本继续工作。如何自动响应提示？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-08-19T07:39:55.263

从 version 开始`1.9`，Fabric 包含了一种正确管理它的方法。

Fabric 文档中[有关提示](http://docs.fabfile.org/en/1.9/usage/env.html#prompts)的部分说：

> 提示字典允许用户控制交互式提示。如果在命令的标准输出流中找到字典中的键，Fabric 将自动以相应的字典值回答。

你应该能够让 Fabric 自动回答这样的提示：

```
with settings(prompts={'Do you want to continue [Y/n]? ': 'Y'}):
    run('apt-get update')
    run('apt-get upgrade') 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-07T13:57:58.927

我使用简单的回声管道来回答 Fabric 的提示。

```
run('echo "yes\n"| my_command') 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-07T13:38:08.937

**注意：这个答案已经有几年的历史了，与此同时，fabric 已经（有趣地相似）实现了这个。请参阅下面@timothée-jeannin 的答案。**

见[https://stackoverflow.com/a/10007635/708221](https://stackoverflow.com/a/10007635/708221)

`pip install fexpect`

```
from ilogue.fexpect import expect, expecting, run 

prompts = []
prompts += expect('What is your name?','John')
prompts += expect('Are you at stackoverflow?','Yes')

with expecting(prompts):
    run('my_command') 
```

[Fexpect 使用 pexpect 添加对提示的回答](http://ilogue.com/jasper/blog/fexpect--dealing-with-prompts-in-fabric-with-pexpect/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-21T16:38:09.897

为了扩展[Timothée 的出色答案](https://stackoverflow.com/a/25378036/456550)，这里是 Fabric 在检查字典时使用[的代码。](https://github.com/fabric/fabric/blob/5d2e61cc78fe7a86f8ef4c6a167d7207ac1c4839/fabric/io.py)`prompts`

```
def _get_prompt_response(self):
    """
    Iterate through the request prompts dict and return the response and
    original request if we find a match
    """
    for tup in env.prompts.iteritems():
        if _endswith(self.capture, tup[0]):
            return tup
    return None, None 
```

Fabric`.endswith`用于检查，因此请确保在用作`prompts`字典键的字符串中包含尾随空格。

例如 - 假设您正在尝试自动化 Django 测试数据库提示

> 如果您想尝试删除测试数据库“test_my_app”，请输入“yes”，或者输入“no”以取消：

我们所需要的只是提示符的结尾，使其具有唯一性。包括尾随空格。

```
django_test_database_prompt = "or 'no' to cancel: "
#         won't work without this trailing space ^

with settings(
    prompts={django_test_database_prompt : 'yes'}
):
    run('%s %s' % (virtualenv_python_path,
                   test_runner_file_path,
                  )
       ) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-29T08:45:51.160

在[Fabric 2.1](http://docs.fabfile.org/en/2.1/)中，这可以使用通过调用包（Fabric 2.1 的依赖项）提供的[自动响应示例来完成：](http://docs.fabfile.org/en/2.1/getting-started.html?highlight=watchers#superuser-privileges-via-auto-response)

```
>>> from invoke import Responder
>>> from fabric import Connection
>>> c = Connection('host')
>>> sudopass = Responder(
...     pattern=r'\[sudo\] password:',
...     response='mypassword\n',
... )
>>> c.run('sudo whoami', pty=True, watchers=[sudopass])
[sudo] password:
root
<Result cmd='sudo whoami' exited=0> 
```

请注意，这不仅限于 sudo 密码，并且可以在您有匹配模式和预设响应（可能不是密码）的任何地方使用。

有几个提示：

1.  `pty=True`不是**必需**的，但可能很重要，因为它使流程看起来更真实。例如，如果您有一个提示，期待一个**是/否**的答案继续进行，没有它（`pty=True`）您的命令仍然会运行；**除了**，您的选择/输入（由 指定`response`）**不会像**预期的那样显示为答案
2.  can中`pattern`指定的`Responder`通常在行尾包含空格，因此当`watcher`似乎不匹配时尝试添加空格。
3.  [根据观察者文档](http://docs.pyinvoke.org/en/latest/concepts/watchers.html)末尾讨论的注释：

    *Responder 的模式参数被视为正则表达式，需要更加小心（注意在上面的示例中我们必须如何转义方括号），但也提供了更多的功能。*

    因此，不要忘记在必要时转义（使用反斜杠）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-29T00:14:19.350

尽管这是@BobNadler 的评论，但将其作为答案

运行（“是|我的命令”）；

# visual-studio-2008 - 在 OpenCV 中转换为单通道图像

> ID：10479085
> 
> 赞同：0
> 
> 时间：2012-05-07T08:41:01.090
> 
> 标签：visual-studio-2008, image-processing, opencv, runtime-error

我正在使用 openCV，并且正在尝试将图像转换为单通道图像。我加载了图像： `IplImage* img=cvLoadImage(“abc.pbm”);` 我不确定我应该如何转换为单通道，所以我使用了：

`IplImage* temp = cvCreateImage(cvGetSize(img), img->depth, 1); cvSetImageCOI(img, 1); cvCopy(img, temp);`

它编译得很好，但它在运行时崩溃说“opencv error: assertion failed (src.channels()==dst.channels()) in unknown function ...”

谁能帮我吗？？我能得到任何更好的建议来转换为单通道图像吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:26:32.340

您也可以将其加载为灰度：

```
IplImage* img=cvLoadImage(“abc.pbm”,CV_LOAD_IMAGE_GRAYSCALE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:24:28.293

你需要使用[`cvCvtColor()`](http://docs.opencv.org/trunk/modules/imgproc/doc/miscellaneous_transformations.html?highlight=cvcvtcolor#void%20cvCvtColor%28const%20CvArr*%20src,%20CvArr*%20dst,%20int%20code%29).

# c# - 如何切换到带有特定文档的进程

> ID：10479095
> 
> 赞同：1
> 
> 时间：2012-05-07T08:42:02.057
> 
> 标签：c#, .net, windows

假设我们有一个文本编辑器应用程序，每个表单使用一个单独的进程运行。该应用程序是单个文档（即没有选项卡或 MDI）。

我们打开了三个表单，其中包含三个文档，A.txt、B.txt 和 C.txt。现在用户双击他桌面上的 B.txt 文件。这将启动相关应用程序的新实例。这个已启动的编辑器实例现在应该退出并聚焦/将已加载此文件的已运行进程置于前面，以便用户不会最终以两个单独的表单加载相同的文档。

我怎样才能最容易地做到这一点？换句话说，我怎样才能找到哪个进程已经在显示一个文档？

文件一旦打开就不会被应用程序打开，所以我不能依靠枚举进程的文件句柄来查找进程。我认为这需要进程之间进行某种形式的通信。理想情况下，我正在寻找 .NET 解决方案，但问题实际上与 Windows 相关/与语言无关。

编辑：我应该提到，出于各种原因，我试图使用单独的进程，而不是在一个进程中运行所有表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:50:33.693

解决此问题的一个好方法是使用互斥锁：使用互斥锁 [运行应用程序的单个实例](https://stackoverflow.com/questions/819773/run-single-instance-of-an-application-using-mutex)

您可以使用当前应用程序名称+文件名（或其他内容）打开一个互斥锁，然后在它已经打开时切换到该进程。

第二种解决方案是使用带有管道绑定的 WCF。在服务上调用某种“激活”方法以使应用程序自行激活。[此链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)提供了一些进行进程间通信的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:37:27.813

我将发布使用的解决方案：当应用程序实例打开文档时，我在文档旁边转储一个 .pid/.lock 文件，其中包含进程的 pid。这样我可以切换到打开文档的进程，或者如果该进程不再存在则清除锁定。

# sql-server-2005 - 更新sql server中的表

> ID：10479099
> 
> 赞同：0
> 
> 时间：2012-05-07T08:42:18.397
> 
> 标签：sql-server-2005, jsp

我正在尝试以下代码。

```
String sym=request.getParameter("symbol");
Statement st1=con.createStatement();
String symIns="UPDATE "+tblname+" SET Symbol='+sym+'";
int m=st1.executeUpdate(symIns);
if(m==0)
    out.println("m is zero");
else 
if(m!=0)
    out.println("Inserted"); 
```

我从上一页收到 sym 和 tblname 的值。但是在执行此代码后，它将 m 打印为零，因此不更新表。此代码不适用于没有任何记录（仅包含空值）的表。但是为其中有一些记录的表工作。我也尝试直接在数据库中执行它。它正在显示`query executed successfully`，但将消息发送为`(0 row(s) affected)`。这是在数据库中成功运行的查询。`

> UPDATE 6 SET SYMBOL='eq' WHERE SYMBOL='be';

正如我所说，它适用于该表，并且该表的 SYMBOL 列的值为“be”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:48:33.097

查询行为正确。如果您有匹配的记录，它将更新行。

因此，在您的查询 `UPDATE six SET SYMBOL='eq' WHERE SYMBOL='be';`中，它将更新`six`您具有字段值为“be”的行的表。但它不会更新你有NULL的地方。

查询将执行但不更新任何记录，因此返回零行受影响。

因此，如果要更新包含`NULL`字段值的行。

添加`IS NULL`

`UPDATE six SET SYMBOL='eq' WHERE SYMBOL IS NULL`

# php - 我怎么知道有多少用户在线

> ID：10479104
> 
> 赞同：-5
> 
> 时间：2012-05-07T08:42:38.577
> 
> 标签：php

> **可能重复：**
> [检测用户何时离开网页的最佳方法](https://stackoverflow.com/questions/147636/best-way-to-detect-when-user-leaves-a-web-page)
> [检查用户是否在 PHP 中关闭了页面？](https://stackoverflow.com/questions/1992753/check-if-user-closed-the-page-in-php)

我没有通过查看其他问题找到我的答案。

因为我想为我的网站制作在线聊天应用程序

许多答案说将用户状态存储为1，以便我们可以识别谁在登录

在 Logut 上，我会将状态设为 0

是的，这是个好主意，但我的困惑是，如果有人没有注销并关闭浏览器或用户的会话无论如何都会过期，我该如何将状态设置为 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:49:25.897

看看这里：[http](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/324675/help-needed-please-update-database-on-browser-close) ://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/324675/help-needed-please-update-database-on-browser-close 。我想这就是你所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:43:11.110

使服务器定期 ping 客户端。

# facebook - 应用程序权限请求使用 IE 无休止地重定向

> ID：10479106
> 
> 赞同：1
> 
> 时间：2012-05-07T08:42:46.773
> 
> 标签：facebook, internet-explorer, redirect, facebook-apps

此代码适用于除 Internet Explorer 之外的所有浏览器。

基本上，当重定向发送到 IE 时，它只是再次从我的服务器请求完全相同的 URL，它只是忽略重定向。

使用 Naitik Shah 的 3.1.1 代码

这是代码：

```
// $g_facebook is declared earlier and given app id and secret
$par[ 'scope' ] = array( 'publish_stream' , // publish to the user's stream
                                 'offline_access' , // access these functions when the user is offline
                                 // 'user_status'    , // get the user's latest status
                                 // 'read_stream'    , // read the user's stream
                                 'email'          , // provides the user's email address
                                 'user_groups'    , // provides the user's groups
                                 // 'sms'            , // send and receive txt w/ user
                                 'publish_actions', // publish scores and achievements
                                 );
header( 'Location: ' . $g_facebook->getLoginUrl( $par ) );
exit( ); 
```

这是电线上发生的事情（使用 tcpdump 拾取）：

```
GET /fork HTTP/1.1
Accept: image/gif, image/jpeg, image/pjpeg, image/pjpeg, application/x-shockwave-flash, application/x-ms-application, application/x-ms-xbap, application/vnd.ms-xpsdocument, application/xaml+xml, */*
Accept-Language: en-us
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C)
Accept-Encoding: gzip, deflate
Host: fbar.toolsteam.com
Connection: Keep-Alive
Cookie: PHPSESSID=7f32d7e4acd63696bd8d0998913f608c; PHPSESSID=e30076106b21e40142397219283fd55f

HTTP/1.0 302 Moved Temporarily
Date: Mon, 07 May 2012 07:36:12 GMT
Server: Apache
X-Powered-By: PHP/5.3.10
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=a9f17a1119dc262bef693d2d39a15317; expires=Tue, 07-May-2013 07:36:12 GMT; path=/
Location: http://www.facebook.com/dialog/oauth?client_id=336243633108439&redirect_uri=http%3A%2F%2Ffbar.toolsteam.com%2Ffork&state=b52dd5dd08e0058e28ae8734f269cd77&scope=publish_stream%2Coffline_access%2Cemail%2Cuser_groups%2Cpublish_actions
Content-Length: 0
Content-Type: text/html
X-Cache: MISS from base
X-Cache-Lookup: MISS from base:3128
Via: 1.1 base:3128 (squid/2.7.STABLE9)
Connection: keep-alive 
```

当 IE 看​​到 302 它只是一次又一次地发送原始请求。它从不跟随重定向到 facebook。

如前所述，Chrome 和 Firefox 没有问题。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:23:20.690

答案在请求标头中：

```
Cookie: PHPSESSID=7f32d7e4acd63696bd8d0998913f608c; PHPSESSID=e30076106b21e40142397219283fd55f 
```

此 facebook 身份验证涉及两台服务器，一台是原始网站，第二台是协商 facebook 权限的中间服务器。facebook 服务器是主站点的子域。

结果他们俩都开始了php会话。facebook 服务器的 cookie 在子域范围内，主站点的 cookie 在顶级域范围内。

无论出于何种原因，IE 都无法处理两次向 facebook 服务器的请求发送相同的 cookie - 它处理事务很好，但无论出于何种原因，它只会重新请求相同的 URL 并忽略 302 重定向。IE就是这样。

我在 facebook 服务器上切换了会话变量名称，问题就消失了。

# android - 如何为列表视图中的每一行设置不同的背景颜色？

> ID：10479108
> 
> 赞同：10
> 
> 时间：2012-05-07T08:42:58.407
> 
> 标签：android, listview

我想在 listview 的每一行中设置不同的背景颜色？[我为listview](http://developer.android.com/reference/android/widget/ListView.html)使用了自定义适配器。它应该在活动加载时出现。静态不同颜色的行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T08:45:53.277

在`getView(...) method`

```
if (position == 0) {
    view.setBackgroundResource(R.drawable.bg_list_even);
} else if (position == 1) {
    view.setBackgroundResource(R.drawable.bg_list_odd);
} else... 
```

**更新：：**

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View view = convertView;
    ViewHolder holder;

    if (view == null) {
        LayoutInflater inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        view = inflater.inflate(R.layout.row, null);

        holder = new ViewHolder();
        view.setTag(holder);

    } else {
        holder = (ViewHolder) view.getTag();
    }

    holder.title = (TextView) view.findViewById(R.id.txttitle);
    holder.description = (TextView) view.findViewById(R.id.txtdesc);

    holder.title.setText("Title" + position);
    holder.description.setText("Desc" + position);

    //here set your color as per position

    if (position == 0) {
        view.setBackgroundResource(R.drawable.bg_list_even);
    } else if (position == 1) {
        view.setBackgroundResource(R.drawable.bg_list_odd);
    }
    return view;
} 
```

**持有人等级**

```
public class ViewHolder {

    public TextView title;
    public TextView description;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T09:13:33.827

制作一个如下所示的数组作为列表项的编号我想你有五个项目

```
 int[] color_arr={Color.BLUE,Color.CYAN,Color.DKGRAY,Color.GREEN,Color.RED}; 
```

然后在您的自定义适配器的 getView 方法中执行如下操作

```
 public View getView(int position, View convertView, ViewGroup parent)
     {

     LayoutInflater inflater = getLayoutInflater();
     View row=convertView;

     row = inflater.inflate(R.layout.listview_custome, parent, false);
     row.setBackgroundColor(color_arr[position]);// this set background color

     TextView textview = (TextView) row.findViewById(R.id.tv_list);
     ImageView imageview = (ImageView) row.findViewById(R.id.iv_list);

     textview.setText(data_text[position]);
     imageview.setImageResource(data_image[position]);

     return (row);

    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T08:47:31.117

正如您所说，您已经为列表视图使用了自定义适配器，那么您需要做的如下。在`getView`适配器的方法中，您需要设置列表行 xml 父视图的背景颜色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-16T10:07:45.720

```
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = getLayoutInflater();
    View rowView = convertView;

    rowView = inflater.inflate(R.layout.listview_custome, parent, false);
    rowView.setBackgroundColor(color_arr[position]);// this set background color

    TextView textview = (TextView) rowView.findViewById(R.id.tv_list);
    ImageView imageview = (ImageView) rowView.findViewById(R.id.iv_list);

    textview.setText(data_text[position]);
    imageview.setImageResource(data_image[position]);
    if (position == 0) {
        rowView.setBackgroundColor(Color.BLUE);
    }
    else if (position % 2 == 1) {
        rowView.setBackgroundColor(Color.RED);
    }
    else if (position % 2 == 0) {
        rowView.setBackgroundColor(Color.BLUE);
    }
    return (rowView);

} 
```

# css - 是否可以屏蔽一个 ，或者用蒙版图像覆盖文本？

> ID：10479109
> 
> 赞同：1
> 
> 时间：2012-05-07T08:43:01.120
> 
> 标签：css, image

我几乎可以肯定这是不可能的，但只是想问我是否正确。

我有一个具有纯色背景颜色和其中包含文本的容器。这漂浮在图像上。目前，文本颜色是黑色，但我想要的是文本变得透明，这样我可以透过 s 背景颜色看到它后面的图像。我知道这听起来不可能，所以我认为如果我用相同的图像覆盖文本但以某种方式掩盖它以便只有覆盖文本的部分可见，我可以达到相同的效果。

我希望我的意思很清楚。如果有人知道我该如何做到这一点，我会很高兴，如果不能做到，请指出一些证据为什么不能做到:)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:54:41.660

基于 webkit 的浏览器有一个名为`-webkit-background-clip: text`. 像这样写：

```
p{
    background-image:;
    background:  url(http://2.bp.blogspot.com/-NSwhl6hv41Y/Th5EIJL_zZI/AAAAAAAAFc4/UGUNfb--tGc/s1600/vector_wallpaper_by_seppoftw.jpg);
    -webkit-background-clip: text; 
    -webkit-text-fill-color: transparent;
    font-size:100px;
    margin:40px;
}​ 
```

检查这个[http://jsfiddle.net/yvYG8/](http://jsfiddle.net/yvYG8/)

阅读更多[http://trentwalton.com/2011/05/19/mask-image-text/](http://trentwalton.com/2011/05/19/mask-image-text/)

# javascript - 无法在 JavaScript 中获取字符串的子字符串

> ID：10479110
> 
> 赞同：0
> 
> 时间：2012-05-07T08:43:04.197
> 
> 标签：javascript, substring, undefined

当内容长度超过 120 个字符时，我试图从变量中获取子字符串。

```
$.ajax({
          url: url,
          dataType: 'json',
          async: false,
          success: function(data){
              $.each(data, function(i, item) {
                      var name = item.name;
                      var itemId = item.itemId;

                    if(name.length >= 120) {
                        selectHTML += '<option value=' + itemId + '>' + name.substr(0, 120) + '</option>';
                      } else {
                      selectHTML += '<option value=' + itemId + '>' + name + '</option>';
                    }
            });
          }
    }); 
```

但结果，我总是得到这个：

```
name is undefined 
```

当我不这样做时`substring()`，它可以正常工作。有什么建议么？

* * *

**编辑：** 此行引发错误：

```
if(name.length >= 120) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:57:45.743

尝试更改`if (name.length >= 120)`为`if (name && name.length >= 120)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:57:48.697

该错误意味着其中一个`item`s 不包含 a `name`。

用于`console.log(data)`确定您实际收到的内容 - 您的 JavaScript 代码没有任何问题。

如果您无法更改服务器端代码，则可以回退到空名称：

```
var name = item.name || ''; 
```

# javascript - javascript中模块内的新模块

> ID：10479113
> 
> 赞同：1
> 
> 时间：2012-05-07T08:43:13.747
> 
> 标签：javascript

这是我的模块：

```
MyModule = (function () {

    var myModule = function MyModule(strInput) {
        if (false === (this instanceof MyModule)) {
            return new MyModule();
        }

        str = strInput;
    }

    var str;
    myModule.prototype.getStr = function () {
        return str;
    }

    myModule.prototype.test = function () {
        var testModule = new MyModule("testInside");
        console.log(testModule.getStr());
        console.log(str);
    }

    return myModule;
}()); 
```

这是我测试模块的方法：

```
document.getElementById("Button").onclick = function () {    
        var module = new MyModule("input");    
        module.test();    
    } 
```

此代码返回：

```
testInside   
testInside 
```

到console.log，但我期望的是：

```
testInside    
input 
```

当我在同一个类中构建一个新类时，就像我在 c# 或 java 中所做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:50:34.753

`str`是一个存储在返回的闭包内的变量`MyModule`。它不是任何对象的属性，它在 的所有实例之间共享`MyModule`。

当你打电话时`.test()`，你会覆盖它。

如果您希望它与对象相关联，则将其放在对象上：

```
//...
var myModule = function MyModule(strInput) {
    // ...
    this.str = strInput;
}
//...
myModule.prototype.getStr = function () {
    return this.str;
//...
    console.log(testModule.getStr());
    console.log(this.str);
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:51:51.510

如果你想保持`str`私有，你可以这样：

```
MyModule = (function () {

    var myModule = function MyModule(strInput) {
        if (false === (this instanceof MyModule)) {
            return new MyModule();
        }

        var str = strInput;

        this.getStr = function () {
            return str;
        };

        this.test = function () {
            var testModule = new MyModule("testInside");
            console.log(testModule.getStr());
            console.log(str);
        };
    };

    return myModule;
}()); 
```

通过这种方式，`str`它位于内部闭包中，因此它就像其他语言中的实例/对象变量。如果你把它放在外部闭包中，它将像一个静态/类变量一样。在这两种情况下，myModule 对象的方法仍然可以访问它，但是从外部看不到它。

# php - 在 PHP 中从此 XML 加载和读取元素

> ID：10479116
> 
> 赞同：0
> 
> 时间：2012-05-07T08:43:38.937
> 
> 标签：php, xml

[http://pastebin.com/hXuHpcUQ](http://pastebin.com/hXuHpcUQ)

是我有的吗。。

如何加载和读取数据？

所以对于每个节点，我可以做类似的事情：

```
foreach($nodes as $node)
{
    echo $node->getElementsByTagName("url") . "<br />";
} 
```

但是应该如何定义 $nodes 来获取所有的`<node type="link">`'s？

这是我已经开始并且目前得到的：

```
 $doc = new DOMDocument();
    try
    {
        $doc = new DOMDocument();
        $doc->loadXml(file_get_contents('new.xml'));
    }catch(Exception $e)
    {
        continue;
    } 
```

我想`<url>`在每个`<node></node>`元素内部输出值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:47:57.237

我会使用 SimpleXML - 应该是这样的。

```
$xml = simplexml_load_file('new.xml');
foreach ($xml->node as $node) {
  echo $node->url;
} 
```

（未经测试..）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:54:18.447

你应该阅读[DOMXPath](http://www.php.net/manual/en/class.domxpath.php)

您的查询将如下所示（未经测试）：

```
$nodes = $xpath_obj->query("//node[type='link']/url"); 
```

# c - 我仍然对 free() 和 malloc() 感到困惑

> ID：10479117
> 
> 赞同：-1
> 
> 时间：2012-05-07T08:43:43.137
> 
> 标签：c

在下面的程序中，据我所知，一旦我们分配了一些内存，那么如果我们正在从 chaging 地址 `ptr to ptr++`，那么当我们`free`使用`ptr`ie调用时`free(ptr)`。然后程序应该崩溃。但在这个程序中工作正常。这个怎么运作？我在 Windows XP 中使用 Code::Bocks。请帮我。

```
int main()
{
    int *ptr;
    ptr = malloc(1);
    *ptr = 6;
    printf("The value at *ptr = %d \n", *ptr);
    ptr++;      //Now ptr is address has been changed
    free(ptr); // Program should crash here
    ptr = NULL;
    /* *ptr = 5;*/ // This statement is crashing
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T08:47:36.613

从您通过指向单个字节存储值的那一刻起，该程序的行为就**未定义。**`int*`不能保证会崩溃。

具体来说，您`free`似乎没有（也许不能）正确检查其论点。尝试使用`malloc`调试库运行此程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T08:46:54.303

没有崩溃并不一定意味着您的代码很好。在另一个平台上，它可能会崩溃。顺便说一句：你应该更喜欢 malloc(sizeof(int))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T08:47:28.000

程序不一定会崩溃，行为是未定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T08:51:31.107

它只因运气而起作用；代码仍然是错误的。

要理解为什么，首先需要熟悉 malloc 库本身的实现。malloc 不仅分配它返回的空间供您使用，它还为它自己的元数据分配空间，用于管理堆（我们称之为 malloc 管理的内存区域）。通过更改 ptr 并将错误的值传递给 free，元数据不再是 free 所期望的，因此它现在使用的数据本质上是垃圾并且堆已损坏。

这并不一定意味着它会因为段错误而崩溃，因为它不一定取消引用错误的指针。该错误仍然存​​在，并且可能会在具有更多堆使用的更长程序中表现出来。

# php - Wordpress 多语言绝对链接

> ID：10479119
> 
> 赞同：0
> 
> 时间：2012-05-07T08:43:53.743
> 
> 标签：php, wordpress, plugins, multilingual

我正在开发一个 WordPress 网站，需要添加一个多语言插件。

这是我的问题：我不想要任何自动翻译，而是需要导致绝对链接的标志，因为每种语言都将位于不同的域名上。

我找不到任何这样做的现有插件，而且我无法制作自己的插件，因为我没有足够的时间并且我的 PHP 技能很低。

您是否考虑过我可以为此使用的插件？或者我可以下载和修改的插件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:52:56.640

[WPML](http://wpml.org/)允许您为多种语言使用多个域。它非常可靠，并提供了许多其他可能性。

他们的页面上有一个教程：[Multilingual Site Network with Domain Mapping](http://wpml.org/documentation/essential-multilingual-plugins/multilingual-site-network-with-domain-mapping/)。

# wpf - 如何首先使用 Windsor 和 ViewModel 编写 MVVM

> ID：10479121
> 
> 赞同：0
> 
> 时间：2012-05-07T08:44:02.093
> 
> 标签：wpf, mvvm, castle-windsor

是否有任何将 Windsor 用于 WPF 应用程序的示例代码？I am interested to see how the Mainwindow is created when the selected approach is ViewModel first? 我无法让它工作，因为首先创建 VM，我无权访问 View，所以我无法将它添加到主窗口（视图是由 Windsor 创建的，因此我无权访问它，我只有访问不是窗口或控件的 IView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:44:45.167

Windsor wiki [http://stw.castleproject.org/Windsor.Silvertlight_Sample_App_Customer_contact_manager.ashx上有 Silverlight 的示例](http://stw.castleproject.org/Windsor.Silvertlight_Sample_App_Customer_contact_manager.ashx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:58:26.000

我使用了标记界面、自定义激活器和自定义工具的组合来连接我在 Windsor 中的 WPF 视图、视图模型和依赖项。[我在Visual Studio Magazine 的专栏中](http://visualstudiomagazine.com/articles/2011/10/01/wpf-and-inversion-of-control.aspx)写过它。它可能会帮助你。

# php - 检查facebook用户是否可以在他的朋友墙上发帖

> ID：10479123
> 
> 赞同：0
> 
> 时间：2012-05-07T08:44:12.663
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

据我所做的研究，我可以想出在 fql 查询中使用 can_post 。现在我怎样才能找出用户的 can_post 值。我正在使用 php-sdk 并已获得发布到朋友墙上的权限，但是因为如果朋友禁用在他的墙上发帖，它会返回一个异常，这会使脚本停止。所以，如果我可以使用这个 can_post 值来检查他是否可以在发布之前发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:01:16.570

您可以使用 fql 获取**[can_post](http://developers.facebook.com/docs/reference/fql/user/)**字段，该字段将返回 true 或 false。因此，如果朋友禁用了在他的墙上发帖，那么在这种情况下**can_post**字段也将返回 false。因此，这将有助于根据 can_post 进行墙贴...

# php - javascript推送键值

> ID：10479124
> 
> 赞同：2
> 
> 时间：2012-05-07T08:44:24.100
> 
> 标签：php, javascript, jquery, arrays, key-value

在我看来，我想在数组上推送一个键值。

例如，在 PHP 中是这样完成的：

```
$err = array();
function check($k,$v) {
  $err[$k] = $v; 
} 
```

这在 JavaScript/jQuery 中是如何完成的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T08:47:25.053

***[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)***中的 Javascript 键/值对支持，而不是***[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)***

**插入元素：**

```
var arr= [1,2,3],
    result = {};

for(var key in arr) {
   result[key] = arr[key]; // in this case key will be 0,1,2 i.e index of array element
} 
```

**检查密钥是否存在：**

```
function checking(k, v) {
  if(result.k != null || result.k !=  undefined) {
    // do something
  }
} 
```

根据您的功能：

```
var err = {}; // not array, should be object
function check(k,v) {
  err[k] = v; // or err.k = v;
} 
```

**更多关于插入：**

```
var x = [];

x.some = 'some'; // OK; arrays are objects
x['some'] = 'some'; // exactly the same 
```

**获取价值：**

```
x.home; // give 'some'
x['home']; // give 'some' 
```

**计数长度：**

如果要获取数组的长度，则必须使用`.length`.

例如：

```
x.length; // will return 1 
```

如果你想计算一个对象的长度：

```
var obj = {a: 'XYZ', b: 'PQR'};

Object.keys(obj).length; // will return 2 
```

**要删除项目：**

如果要从对象中删除项目：

```
delete obj[key]; 
```

从数组中删除一个项目：

```
delete arr[index]; // index is position of the element within array 
```

还可以删除数组元素

```
arr.splice(0,2); // splice(index, howmany, [item1, item2, ...., itemx])
                 // in this example from start 2 items will delete 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T08:46:02.243

你使用一个对象。并以大致相同的方式进行。

```
var $err = {};
function check($k, $v) {
     $err[$k] = $v;
} 
```

当然，这不是一个数组。

请注意，您实际上可以在 Javascript 数组中执行此操作，并且解释器会允许您这样做。

```
var $err = []; // an array
function check($k, $v) {
    $err[$k] = $v;
} 
```

但是您并没有真正推动数组，而是扩展数组**对象**。你可以用这个检查一下：

```
var foo = [];
foo['hello'] = 'world';

console.log(foo);            // []
console.log(foo['hello']);   // 'world'
console.log(foo.hello);      // 'world'
console.log(foo.length);     // 0 
```

...所以最好注意这个问题。:D

# php - 我需要不注册具有相同用户名的用户的 PHP 脚本

> ID：10479125
> 
> 赞同：-5
> 
> 时间：2012-05-07T08:44:33.477
> 
> 标签：php

我需要 PHP 脚本，它不注册具有相同用户名的用户。我编写脚本，它工作正常，但它注册具有相同 USERNAME 的用户。我希望我的脚本检查用户名，如果它可用继续注册，如果它不可用停止注册。对不起，我的英语不好 :d :D PLZ 写这个脚本。

这是我的脚本，请告诉如何编辑它

[我的脚本](http://forums.digitalpoint.com/showthread.php?t=2468043#)

剧本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<?php require_once('Connections/tourname_regcs16.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
  $insertSQL = sprintf("INSERT INTO members (team_name, team_member1, team_member2, team_member3, team_member4, team_member5, email, phone_number, emoney, password,win ,defeat ,score , tour_status_complete, tour_status_progress, tour_status_willstart, team_status_payed, team_status_notpayed, team_place_1, team_place_2, team_place_3, team_place_4, team_place_5, team_place_6, team_place_7, team_place_8, team_place_9, team_place_10, team_place_11, team_place_12, team_place_13, team_place_14, team_place_15, team_place_16, team_place_17, team_place_18, team_place_19, team_place_20, team_place_final, `data`) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)",
                       GetSQLValueString($_POST['team_name'], "text"),
                       GetSQLValueString($_POST['team_member1'], "text"),
                       GetSQLValueString($_POST['team_member2'], "text"),
                       GetSQLValueString($_POST['team_member3'], "text"),
                       GetSQLValueString($_POST['team_member4'], "text"),
                       GetSQLValueString($_POST['team_member5'], "text"),
                       GetSQLValueString($_POST['email'], "text"),
                       GetSQLValueString($_POST['phone_number'], "text"),
                       GetSQLValueString($_POST['emoney'], "text"),
                       GetSQLValueString($_POST['password'], "text"),
                       GetSQLValueString($_POST['win'], "text"),
                       GetSQLValueString($_POST['defeat'], "text"),
                       GetSQLValueString($_POST['score'], "text"),
                       GetSQLValueString($_POST['tour_status_complete'], "text"),
                       GetSQLValueString($_POST['tour_status_progress'], "text"),
                       GetSQLValueString($_POST['tour_status_willstart'], "text"),
                       GetSQLValueString($_POST['team_status_payed'], "text"),
                       GetSQLValueString($_POST['team_status_notpayed'], "text"),
                       GetSQLValueString($_POST['team_place_1'], "text"),
                       GetSQLValueString($_POST['team_place_2'], "text"),
                       GetSQLValueString($_POST['team_place_3'], "text"),
                       GetSQLValueString($_POST['team_place_4'], "text"),
                       GetSQLValueString($_POST['team_place_5'], "text"),
                       GetSQLValueString($_POST['team_place_6'], "text"),
                       GetSQLValueString($_POST['team_place_7'], "text"),
                       GetSQLValueString($_POST['team_place_8'], "text"),
                       GetSQLValueString($_POST['team_place_9'], "text"),
                       GetSQLValueString($_POST['team_place_10'], "text"),
                       GetSQLValueString($_POST['team_place_11'], "text"),
                       GetSQLValueString($_POST['team_place_12'], "text"),
                       GetSQLValueString($_POST['team_place_13'], "text"),
                       GetSQLValueString($_POST['team_place_14'], "text"),
                       GetSQLValueString($_POST['team_place_15'], "text"),
                       GetSQLValueString($_POST['team_place_16'], "text"),
                       GetSQLValueString($_POST['team_place_17'], "text"),
                       GetSQLValueString($_POST['team_place_18'], "text"),
                       GetSQLValueString($_POST['team_place_19'], "text"),
                       GetSQLValueString($_POST['team_place_20'], "text"),
                       GetSQLValueString($_POST['team_place_final'], "text"),
                       GetSQLValueString($_POST['data'], "date"));

  mysql_select_db($database_tourname_regcs16, $tourname_regcs16);
  $Result1 = mysql_query($insertSQL, $tourname_regcs16) or die(mysql_error());

  $insertGoTo = "cs16_reg_complete.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo));
}

?>
<style type="text/css">
#form1 table tr td p {
    text-align: center;
}
</style>

<form action="<?php echo $editFormAction; ?>" method="post" name="form1" id="form1">
  <table width="493" align="center">
    <tr valign="baseline">
      <td width="120" align="right" nowrap="nowrap">გუნდის სახელი:</td>
      <td width="250"><p><input type="text" name="team_name" value="" size="32" /></p></td>
      <td>&nbsp;</td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">გუნდის წევრი №1:</td>
      <td><p><input type="text" name="team_member1" value="" size="32" /></p></td>
      <td>&nbsp;</td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">გუნდის წევრი №2:</td>
      <td><p><input type="text" name="team_member2" value="" size="32" /></p></td>
      <td>&nbsp;</td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">გუნდის წევრი №3:</td>
      <td><p><input type="text" name="team_member3" value="" size="32" /></p></td>
      <td>&nbsp;</td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">გუნდის წევრი №4:</td>
      <td><p><input type="text" name="team_member4" value="" size="32" /></p></td>
      <td>&nbsp;</td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">გუნდის წევრი №5:</td>
      <td><p><input type="text" name="team_member5" value="" size="32" /></p></td>
      <td>&nbsp;</td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">Emoney:</td>
      <td><p><input type="text" name="emoney" value="" size="32" /></p></td>
      <td>&nbsp;</td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">ელ. ფოსტა:</td>
      <td><p><input type="text" name="email" value="" size="32" /></p></td>
      <td>&nbsp;</td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">მობ. ნომერი:</td>
      <td><p><input type="text" name="phone_number" value="" size="32" /></p></td>
      <td>&nbsp;</td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">პაროლი:</td>
      <td><p><input type="password" name="password" value="" size="32" /></p></td>

    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">&nbsp;</td>
      <td><p><br><input type="submit" value="რეგისტრაცია" /></p></td>
      <td>&nbsp;</td>
    </tr>
  </table>
  <input type="hidden" name="win" value="0" />
  <input type="hidden" name="defeat" value="0" />
  <input type="hidden" name="score" value="0" />
  <input type="hidden" name="tour_status_complete" value="Complete" />
  <input type="hidden" name="tour_status_progress" value="In Progress" />
  <input type="hidden" name="tour_status_willstart" value="Is Starting" />
  <input type="hidden" name="team_status_payed" value="Payed" />
  <input type="hidden" name="team_status_notpayed" value="Not Payed" />
  <input type="hidden" name="team_place_1" value="Round I" />
  <input type="hidden" name="team_place_2" value="Round II" />
  <input type="hidden" name="team_place_3" value="Round III" />
  <input type="hidden" name="team_place_4" value="Round IV" />
  <input type="hidden" name="team_place_5" value="Round V" />
  <input type="hidden" name="team_place_6" value="Round VI" />
  <input type="hidden" name="team_place_7" value="Round VII" />
  <input type="hidden" name="team_place_8" value="Round VIII" />
  <input type="hidden" name="team_place_9" value="Round IX" />
  <input type="hidden" name="team_place_10" value="Round X" />
  <input type="hidden" name="team_place_11" value="Round XI" />
  <input type="hidden" name="team_place_12" value="Round XII" />
  <input type="hidden" name="team_place_13" value="Round XIII" />
  <input type="hidden" name="team_place_14" value="Round XIV" />
  <input type="hidden" name="team_place_15" value="Round XV" />
  <input type="hidden" name="team_place_16" value="Round XVI" />
  <input type="hidden" name="team_place_17" value="Round XVII" />
  <input type="hidden" name="team_place_18" value="Round XVIII" />
  <input type="hidden" name="team_place_19" value="Round XIX" />
  <input type="hidden" name="team_place_20" value="Round XX" />
  <input type="hidden" name="team_place_final" value="Final" />
  <input type="hidden" name="data" value="<?php 
echo "Server time: ".date("M d, Y - g:i:s A"); 
?>" />
  <input type="hidden" name="MM_insert" value="form1" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:47:53.833

看起来您正在寻找教程，因为您自己没有尝试过这个问题。假设您使用 MySQL，[这里有一个简洁的教程](http://www.exforsys.com/tutorials/php/user-registration.html)。

将来，我建议您展示您的一些工作，因为这不是一个为您工作的社区，我们在这里为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:49:19.557

火; php mysql 查询**用户名**ex。`select * from users where username='$username'`. 如果它返回任何行，则用户名已经分配，​​否则您可以注册该用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T08:53:11.167

您只需在注册阶段，当用户按下注册按钮时，查看数据库并尝试找到输入用户名的用户：

```
SELECT * FROM users WHERE username = ? 
```

如果找到记录，则只需显示注册错误“使用此用户名的用户已存在”如果未找到记录 - 在数据库用户表中创建新记录：

```
INSERT INTO users SET username = ?, ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T08:55:07.713

您可以在 PHP 中的表单提交操作中检查它。例如..

```
if(isset($_POST) && (!empty($_POST)){
  $username = $_POST['username'];
   $username_exist_query  = "SELECT * from usertable where username = '".$usernae."' WHERE conditions";
   $username_result = mysql_query($username_exist_query) or die(mysql_error());
   if($username_result){
      if(mysql_num_rows($username_result) == 0){
            //Do Registration operation
     }else{
         echo "Username already exist!";
     }
  }

} 
```

希望此示例代码对您有所帮助。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T08:47:26.113

在某些时候，您将带有用户名字符串的 AJAX 请求（即通过 jQuery）发送到一些简单的 PHP 脚本，该脚本接受用户名，运行 SQL 查询以检查用户名是否已经在数据库中并返回结果。

# jquery - 将 .draggable() 和 resizable() 分配给动态创建的 div

> ID：10479127
> 
> 赞同：1
> 
> 时间：2012-05-07T08:44:38.170
> 
> 标签：jquery

昨天我得到了如何制作具有不同 id 的 div 的答案。但是这些 div 需要可拖动和调整大小。我用 jqueryUI 做到了这一点，但我找不到在下一段代码中实现它的方法（因此，对于每个生成的 div，它需要双向添加 .resizable 和可拖动）：

```
var c = 0;
$('#add_txt').on('click', function(){
    $('#vk_main').append('<div id="vk_text_'+ (c++) +'">TEST</div>');
}); 
```

因此，对于每个 div “vk_text_somenumber”，必须分配属性：.draggable().resizable(); . 我试图这样做，但我得到的只是#vk_main 可拖动，仅此而已。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T08:58:46.963

```
var c = 0;
$('#add_txt').on('click', function(){
    var $div = $('<div id="vk_text_'+ (c++) +'">TEST'+c+'</div>');
    $('#vk_main').append($div);
    $div.draggable();
    $div.resizable();
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:49:53.847

页面加载完成后，您需要将 Draggable 事件附加到该 div。这样您就可以轻松拖动它。（我不知道你什么时候调用点击方法。但你需要在页面加载中附加事件）

```
$(document).ready(function() 
{
var c = 0;
$('#add_txt').on('click', function(){
    $('#vk_main').append('<div id="vk_text_'+ (c++) +'">TEST</div>');
    $('#vk_text_' + (c++)).draggable(); // (c++) is your random number which is concated with Div
});
} 
```

# linux - Beagleboard Angstrom Linux，图像捕获脚本流媒体替代品

> ID：10479128
> 
> 赞同：1
> 
> 时间：2012-05-07T08:44:38.547
> 
> 标签：linux, webcam, beagleboard, image-capture, angstrom-linux

我想从我的罗技网络摄像头以所需的分辨率拍摄快照，并使用 linux bash 脚本保存图像。我需要在我的 beagleboard 上使用 Angstrom 图像进行操作。在我的 beagleboard 中，我可以使用奶酪进行捕捉。但我不知道如何使用脚本在终端中捕获。

在我的主机中，我正在使用流媒体

```
streamer -c /dev/video0 -b 16 -o outfile.jpeg 
```

但我不知道如何在 Angstrom 中拍摄快照。你能提出建议吗？如何使用命令行捕获？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-23T13:39:42.197

我使用 mjpg-streamer 取得了一些成功。它通过端口 8080 发送视频流，但您可以通过编辑启动脚本来更改它。

我使用了[此处](http://shrkey.com/installing-mjpg-streamer-on-beaglebone-black/)的说明，尽管我跳过了*make install*部分，只是从我的主目录中运行它。使用默认的 Angstrom 映像和运行 SD 卡（即非闪存）的 Debian。

您可以通过将浏览器（本地或通过 LAN）指向[http://beagle.address:8080/?action=](http://beagle.address:8080/?action=) *x*来查看流，其中*x*是流或快照。我相信这些参数是不言自明的:)。

您可以使用基于文本的浏览器（例如链接）打开 URL，然后链接会提示您输入图像的文件名。那是为了测试，然后我想如果您打算从脚本中使用它，您可以找到一种无需人工干预即可保存快照的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:58:07.433

我正在使用 gstreamer 使用罗技网络摄像头在 Beaglebone 上捕获网络摄像头输入。您需要安装了 gstreamer-utils 的 gstreamer。我正在使用 Ubuntu，它们可以从标准存储库中找到。这是 CLI 命令：

```
gst-launch v4l2src num-buffers=1 ! ffmpegcolorspace ! video/x-raw-yuv,width=320,height=240 ! jpegenc ! filesink location=test.jpg 
```

不幸的是，由于管道在 v4l2src 上冻结，我在一些图像之后遇到了一些问题。也许你的设置会更好。

# c# - c# 在 FTP 服务器中上传一个 byte[]

> ID：10479131
> 
> 赞同：3
> 
> 时间：2012-05-07T08:44:42.900
> 
> 标签：c#, ftp, bytearray

我需要在里面上传一些数据和 FTP 服务器。

在关于如何在内部上传文件和 FTP 的 stackoverflow 帖子之后，一切正常。

现在我正在尝试改进我的上传。

而是收集数据，将它们写入文件，然后将文件上传到 FTP 中，我想收集数据并在不创建本地文件的情况下上传它们。

为此，我执行以下操作：

```
string uri = "ftp://" + ftpServerIp + "/" + fileToUpload.Name;
System.Net.FtpWebRequest reqFTP;
// Create FtpWebRequest object from the Uri provided
reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" + ftpServerIp + "/" + fileToUpload.Name));
// Provide the WebPermission Credintials
reqFTP.Credentials = new NetworkCredential(ftpUserID, ftpPassword);
// By default KeepAlive is true, where the control connection is not closed after a command is executed.
reqFTP.KeepAlive = false;
// Specify the command to be executed.
reqFTP.Method = WebRequestMethods.Ftp.UploadFile;
// Specify the data transfer type.
reqFTP.UseBinary = true;
byte[] messageContent = Encoding.ASCII.GetBytes(message);
// Notify the server about the size of the uploaded file
reqFTP.ContentLength = messageContent.Length;
int buffLength = 2048;
// Stream to which the file to be upload is written
Stream strm = reqFTP.GetRequestStream();
// Write Content from the file stream to the FTP Upload Stream
int total_bytes = (int)messageContent.Length;
while (total_bytes > 0)
{
    strm.Write(messageContent, 0, buffLength);
    total_bytes = total_bytes - buffLength;
}
strm.Close(); 
```

现在发生的情况如下：

1.  我看到客户端连接到服务器
2.  文件已创建
3.  没有数据被传输
4.  在某些时候线程终止连接关闭
5.  如果我检查上传的文件是空的。

我要传输的数据是一个字符串类型，这就是为什么我做 byte[] messageContent = Encoding.ASCII.GetBytes(message);

我究竟做错了什么？

此外：如果我用 ASCII.GetBytes 编码日期，在远程服务器上我会有一个 TEXT 文件还是一个带有一些字节的文件？

谢谢你的任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T08:58:32.407

我在代码中看到的一个问题是，您在每次迭代时都将**相同**的字节写入服务器：

```
while (total_bytes > 0)
{
    strm.Write(messageContent, 0, buffLength); 
    total_bytes = total_bytes - buffLength;
} 
```

您需要通过执行以下操作来更改偏移位置：

```
while (total_bytes < messageContent.Length)
{
    strm.Write(messageContent, total_bytes , bufferLength);
    total_bytes += bufferLength;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:03:33.497

您正在尝试写入比您拥有的更多的数据。您的代码一次写入 2048 个字节的块，如果数据较少，您将告诉该`write`方法尝试访问数组外部的字节，当然不会。

您只需要写入数据：

```
Stream strm = reqFTP.GetRequestStream();
strm.Write(messageContent, 0, messageContent.Length);
strm.Close(); 
```

如果需要分块写入数据，则需要跟踪数组中的偏移量：

```
int buffLength = 2048;
int offset = 0;

Stream strm = reqFTP.GetRequestStream();

int total_bytes = (int)messageContent.Length;
while (total_bytes > 0) {

  int len = Math.Min(buffLength, total_bytes);
  strm.Write(messageContent, offset, len);
  total_bytes -= len;
  offset += len;
}

strm.Close(); 
```

# regex - 如何使用正则表达式和 R 正确编辑字符串？

> ID：10479132
> 
> 赞同：2
> 
> 时间：2012-05-07T08:44:45.973
> 
> 标签：regex, r, list, vector, dataframe

我将制表符分隔的文本文件中的数据导入到 data.frame 中。现在我想调整和编辑一个名为 C1 的列的内容。为此目的向我推荐了正则表达式。起初我使用：

```
for (rn in 1:length(C1))
C1s <- strsplit(as.character(C1[rn]), "; ", fixed = TRUE)[[1]] 
```

将示例中的各个条目分开，例如：

*   [张俊玲] 中国农业大学, 科尔资源与环境科学, 北京 100094, 人民共和国; [Zhang, Junling] Univ Hohenheim, Inst Plant Nutr, D-7000 Stuttgart, Germany；[George, Eckhard] Humboldt Univ, Inst Crop Sci, Dept Plant Nutr, D-14979 Grossbeeren, Germany；[George, Eckhard] Leibniz Inst 蔬菜和观赏作物 Theodor, D-14979 Grossbeeren, Germany
*   UNIV DORTMUND，INST PHYS，D-44221 DORTMUND，德国；洪堡大学，INST PHYS，D-15738 ZEUTHEN，德国
*   UNIV KEELE，DEPT CHEM，KEELE ST5 5BG，STAFFS，英格兰；MT SINAI HOSP,MT SINAI SCH MED,DR AA FISHBERG CTR NEUROBIOL,NEW YORK,NY 10029; 柏林洪堡大学，慈善医院，病理学和临床生化部，柏林，德国
*   NIFAD，分子微生物实验室，BETHESDA，MD

然后我想

*   将所有内容设置为大写
*   将字符串“Humboldt...Germany”替换为“HUMBOLDT” 将字符串“England”、“Scotland”、“Wales”和“North Ireland”替换为“UNITED KINGDOM”
*   用“USA”替换美国州缩写和邮政编码的组合
*   用“USA”替换美国的州缩写

此外，我想删除除分号（包括它们后面的空格）、它们前面的单词以及上面示例中的最后一个单词之外的所有内容。
我用了

```
gsub('[.*\\] ', ''(toupper(C1s)) 
```

和

```
gsub(',\\s*', ','(toupper(C1s)) 
```

，例如，但无法使其正常工作。
我想得到以下输出：

*   中国人民；德国; 洪堡；德国
*   德国; 洪堡
*   英国; 美国; 洪堡
*   美国

所以我的问题是：我怎样才能达到我想要的结果？
非常感谢您的考虑！

**更新和附加问题**

感谢 mrdwab 的有用回复和评论，我取得了很大进展。

不幸的是，直到现在我才意识到，也有这样的地址，其中方括号中的作者不止一位。不幸的是，mrdwab 提出的算法不适用于这些。

```
> test = c("[Bocquet, F. C.; Giovanelli, L.; Abel, M.; Porte, L.; Themlin, J. -M.] Aix Marseille Univ, Inst Mat Microelect & Nanosci Prov IM2NP, F-13397 Marseille 20, France; [Bocquet, F. C.; Giovanelli, L.; Abel, M.; Porte, L.; Themlin, J. -M.] CNRS, Inst Mat Microelect & Nanosci Prov IM2NP, UMR 6242, Marseille, France; [Amsalem, P.; Koch, N.] Humboldt Univ, Inst Phys, D-12489 Berlin, Germany; [Petaccia, L.; Topwal, D.; Gorovikov, S.; Goldoni, A.] Sincrotrone Trieste, I-34149 Trieste, Italy") 
```

这是我得到的结果：

```
> test
[1] "[BOCQUET,  F. C." "GIOVANELLI,  L."  "ABEL,  M."        "PORTE,  L."      
[5] "FRANCE"           "[BOCQUET,  F. C." "GIOVANELLI,  L."  "ABEL,  M."       
[9] "PORTE,  L."       "FRANCE"           "[AMSALEM,  P."    "HUMBOLDT"        
[13] "[PETACCIA,  L."   "TOPWAL,  D."      "GOROVIKOV,  S."   "ITALY" 
```

这是我想要得到的结果：

```
[1] "FRANCE"; "FRANCE"; "HUMBOLDT"; "ITALY" 
```

我尝试使用它来单独删除每个方括号及其内容：

```
C1s = gsub("(.*)[(.*)]", "\\2", C1s) 
```

但不是第一个左括号和最后一个右括号之间的所有内容都被删除了......如果我先用逗号替换方括号内的所有分号，也许它会起作用？我试过了

```
C1s = gsub("[(.*);(.*)]", "[(.*),(.*)]", C1s) 
```

来实现这一点，但它没有奏效。
所以我很感激你在这方面的帮助！

除此之外，我仍然陷入另一个障碍，我似乎无法自己解决，不幸的是......
这是我目前的输出：

```
> C1s
[1] "PEOPLES R CHINA" "GERMANY"         "HUMBOLDT"         "GERMANY"
[5] "GERMANY"         "HUMBOLDT"        "UNITED KINGDOM"   "USA"
[9] "HUMBOLDT"        "USA"
> dims
[1] 4 2 3 1
> is.list(C1)
[1] FALSE
> is.vector(C1)
[1] TRUE 
```

但是我究竟如何使用*dims*中的信息来创建所需的输出？：

```
[1] "PEOPLES R CHINA"; "GERMANY"; "HUMBOLDT"; "GERMANY"
[2] "GERMANY"; "HUMBOLDT"
[3] "UNITED KINGDOM"; "USA"; "HUMBOLDT"
[4] "USA" 
```

非常感谢您的支持！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:33:43.957

Assuming your data looks something like this:

```
test = c("[Zhang, Junling] China Agr Univ, Coll Resources & Environm Sci, Beijing 100094, Peoples R China", 
         " [Zhang, Junling] Univ Hohenheim, Inst Plant Nutr, D-7000 Stuttgart, Germany", 
         " [George, Eckhard] Humboldt Univ, Inst Crop Sci, Dept Plant Nutr, D-14979 Grossbeeren, Germany", 
         " [George, Eckhard] Leibniz Inst Vegetable & Ornamental Crops Theodor, D-14979 Grossbeeren, Germany"
) 
```

First, let's make it all upper case:

```
test = toupper(test) 
```

Then, let's change `HUMBODT`...`GERMANY` to `HUMBOLDT`

```
test = gsub("(.*)(HUMBOLDT)(.*)", "\\2", test) 
```

Then, let's just extract the last part of the string.

```
test = gsub("(.*), +([A-Z ]+$)", "\\2", test)
> test
[1] "PEOPLES R CHINA" "GERMANY"         "HUMBOLDT"        "GERMANY" 
```

If I had a more complete example from you, I might be able to help you with the other parts too.

## Update

Here's a mostly worked solution that should help you figure out what to do.

Using "scan" to copy your data from your post, we can get data that looks like this:

```
test = c("[Zhang, Junling] China Agr Univ, Coll Resources & Environm Sci, Beijing 100094, Peoples R China; [Zhang, Junling] Univ Hohenheim, Inst Plant Nutr, D-7000 Stuttgart, Germany; [George, Eckhard] Humboldt Univ, Inst Crop Sci, Dept Plant Nutr, D-14979 Grossbeeren, Germany; [George, Eckhard] Leibniz Inst Vegetable & Ornamental Crops Theodor, D-14979 Grossbeeren, Germany", 
         "UNIV DORTMUND,INST PHYS,D-44221 DORTMUND,GERMANY; HUMBOLDT UNIV,INST PHYS,D-15738 ZEUTHEN,GERMANY", 
         "UNIV KEELE,DEPT CHEM,KEELE ST5 5BG,STAFFS,ENGLAND; MT SINAI HOSP,MT SINAI SCH MED,DR A A FISHBERG CTR NEUROBIOL,NEW YORK,NY 10029; HUMBOLDT UNIV BERLIN,CHARITE HOSP,DEPT PATHOL & CLIN BIOCHEM,BERLIN,GERMANY", 
         "NIFAD,MOLEC MICROBIOL LAB,BETHESDA,MD") 
```

You'll need to go step-by-step to be able to make the transformations you want. Here's how I did it.

```
test.orig = test # A backup, just in case
test = toupper(test) # To uppercase
test = strsplit(test, ";") # Split everything up into a list
dims = sapply(test, length) # We might need this later
test = unlist(test) # Now, a single vector
test = gsub(",", " , ", test) # Pad those commas with some space
# Replace any 'HUMBOLDT'...'GERMANY' stuff with 'HUMBOLDT'
test = gsub("(.*)(HUMBOLDT)(.*)(GERMANY$)", "\\2", test)
# Replace a bunch of stuff with 'UNITED KINGDOM'
test = gsub("ENGLAND|SCOTLAND|WALES|NORTH IRELAND", "UNITED KINGDOM", test)
# Search for a pair of letters followed by a space followed by five digits
# and replace it with USA
test = gsub(" [A-Z]{2} [0-9]{5}", " USA", test)
# Find the item following the last comma
test = gsub("(.*), ([A-Z ]+)$", "\\2", test)
# Remove any whitespace
test = gsub("^ | $", "", test)
> test
[1] "PEOPLES R CHINA" "GERMANY"         "HUMBOLDT"        "GERMANY"        
[5] "GERMANY"         "HUMBOLDT"        "UNITED KINGDOM"  "USA"            
[9] "HUMBOLDT"        "MD"                  
# Unlist it if you need to
> split(test, rep(dims, dims))
$`1`
[1] "MD"

$`2`
[1] "GERMANY"  "HUMBOLDT"

$`3`
[1] "UNITED KINGDOM" "USA"            "HUMBOLDT"      

$`4`
[1] "PEOPLES R CHINA" "GERMANY"         "HUMBOLDT"        "GERMANY" 
```

But, I'll leave you the task of figuring out how to replace state abbreviations with USA, and how to put it back in the same line order.

# c# - 如何读取richtextbox行并将其放入c#中的字节数组

> ID：10479136
> 
> 赞同：0
> 
> 时间：2012-05-07T08:45:11.217
> 
> 标签：c#, visual-studio-2010, c#-4.0

我正在使用此代码从`RichTextBox`控件中读取行并将其放入字符串数组中。但它不起作用。给我一个错误。有任何想法吗？谢谢

```
for (int i = 0; i <= Observations.Lines.Length; i++ )
{
    Variables.ObservationsArray [i] = Observations.Lines[i].ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:42:54.597

您可以使用它来获取一个字节[]

```
 System.Text.Encoding.UTF8.GetBytes(string.Join( "", Observations.Lines )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:03:16.527

这里有两个问题。`i = Observations.Lines.Length`首先，当您声明时，将出现索引超出范围异常`i <= Observations.Lines.Length`

```
for (int i = 0; i <= Observations.Lines.Length; i++ ) 
```

相反，你应该做

```
for (int i = 0; i < Observations.Lines.Length; i++ ) 
```

因为数组索引是基于 0 的。

其次，如果`Variables.ObservationsArray [i] == null`对于任何元素，您将获得空引用异常。所以你应该先检查一下

```
if(Observations.Lines[i] != null
    Variables.ObservationsArray [i] = Observations.Lines[i].ToString(); 
```

要将字符串转换为字节数组（在 ASCII 编码的情况下），您可以使用

```
byte[] b2 = System.Text.Encoding.ASCII.GetBytes (myString); 
```

# android - 为紧急呼叫者或短信检测 android 广播接收器中的关键事件？

> ID：10479137
> 
> 赞同：1
> 
> 时间：2012-05-07T08:45:20.713
> 
> 标签：android, broadcastreceiver, keyevent

我需要在 Android 中检测板投接收器中的按键，我如何在 Android 中实现这一点。我已经浏览了一些 git hub，example 但没有找到解决方案，我[在这里尝试这个站点](http://piergiu.wordpress.com/2011/08/02/android-broadcastreceiver-headset-controls/)

但没有找到我需要实施紧急呼叫者的解决方案，也就是说，如果一个人处于危险境地并且他需要呼叫帮助按下任何按钮，以便他可以发送短信或呼叫特定的号码。即它可以只能通过手机中的keyevent发生，如果可以的话怎么办？

# jsf - Dojo Splitter 在 TabContainer 中不起作用

> ID：10479139
> 
> 赞同：1
> 
> 时间：2012-05-07T08:45:25.457
> 
> 标签：jsf, dojo, richfaces, splitter

使用以下代码片段，拆分器可以在转换到当前页面后出现的第一个选项卡上正常显示，但是拆分器不会在后续选项卡中正确显示。

```
<div dojoType="dijit.layout.TabContainer" class="fitToHeight fitToWidth" tabStrip="true">
<div dojoType="dijit.layout.ContentPane" class="fitToHeight fitToWidth" title="Tab_1">              
    <a4j:include
        viewId="/view/syllabus/syllabusManagement.xhtml"
        id="container_syllabus">
    </a4j:include>
</div>
<div dojoType="dijit.layout.ContentPane" class="fitToHeight fitToWidth" title="Tab_2">
    <a4j:include
        viewId="/view/student/studentManagement.xhtml"
        id="container_student">
    </a4j:include>
</div> 
```

这是 employeeManagement.xhtml/syllabusManagement.xhtml 的片段

```
<div dojoType="dijit.layout.BorderContainer" design="sidebar"
    liveSplitters="true" class="fitToHeight fitToWidth">

    <div class="leftPanel" dojoType="dijit.layout.ContentPane"
            minSize="5%" splitter="true" region="leading">
            Source Code Goes Here
    </div>
    <div class="targetPanel" dojoType="dijit.layout.ContentPane"
            minSize="400" region="center">
            Target Code Goes Here
    </div>
 </div> 
```

当页面加载时，默认为 syllabusManagement.xhtml，拆分器根据需要运行，但是当我将选项卡切换到 employeeManagement.xhtml 时，拆分器会折腾，给出真正不可预测的行为。

My observation is that the splitter is rendered well when the tab is loaded on transition.

如何解决此拆分器渲染问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:54:30.000

我建议使用 dojox.layout.ContentPane 并设置 href 属性，而不是首先加载所有选项卡。

您的布局需要 100% 100% 才能让 tabcontainer 和 bordercontainer 正确计算大小。

[如果此处未设置宽度/高度，请查看此处](http://jsfiddle.net/seeds/aWWFL/1/)发生的情况

# c# - 防止数据包注入

> ID：10479141
> 
> 赞同：1
> 
> 时间：2012-05-07T08:45:43.677
> 
> 标签：c#, c++, code-injection, packet

我想开发一个用 C/C++/C# 编写的应用程序，可以防止特定应用程序的数据包注入。它类似于反作弊软件。

在作弊者方面，情况是这样的：打开应用程序（游戏），然后打开欺骗游戏发送的数据包的作弊应用程序，向它们注入虚构数据并将这些数据包传输到服务器。

我的目标是设计一个可以防止特定游戏的数据包注入的应用程序，但我不知道从哪里开始。

任何人都可以给出一个起点吗？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T08:55:16.217

让游戏使用 SSL（例如 HTTPS）。您的游戏客户端和服务器之间将建立一个加密的通信通道。

# shell - 如何将我文件中的日期替换为 shell 脚本中的当前日期并将其发送到邮件的主题中

> ID：10479148
> 
> 赞同：0
> 
> 时间：2012-05-07T08:46:28.390
> 
> 标签：shell, unix

嗨，我试过了，想增强下面的脚本以发送以当前日期为主题的邮件，还想用当前日期 (TodayDate)07/30/2012(/TodayDate) 替换我的 out.txt 中已经存在的日期标签将是这样的，并希望将其替换为当前日期

```
grep -i "<returnMessage>" out.txt |mailx -s " we are fine on $date" xyz@yahoo.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T07:36:07.303

插入

```
sed "s,(TodayDate)../../....(/TodayDate),`date +%m/%d/%Y`," | 
```

之前`mailx`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:41:47.227

可以使用 sed 来完成。创建一个 sh 文件，例如 temp.sh 具有以下内容 -

```
CURR_DT=`date +"%m/%d/%Y"`
echo `sed "s;..\/..\/....;$CURR_DT;g" out.txt` 
```

现在，运行以下命令 -

```
sh temp.sh | mail -s `date +"%m/%d/%Y"` xyz@yahoo.com 
```

虽然，它没有使用 (TodayDate) 标签。

# macos - MacOS 和 F6 导致实际窗口失去焦点

> ID：10479149
> 
> 赞同：29
> 
> 时间：2012-05-07T08:46:30.200
> 
> 标签：macos

我在 MacOS (Lion) 中的 F6 键有问题。我已经为所有功能键设置了正常行为，并使用“首选项”>“键盘”>“快捷方式”中的功能键禁用了每个快捷方式。我仍然不能使用 F6 键，因为它会导致实际窗口失去焦点。我已经搜索了 MacOS 快捷方式中的所有设置，并且没有启用使用 F6 的设置，但是没有任何设置只使用这个键。我已经绝望了，因为我无法正确使用午夜指挥官。有什么方法可以确定什么在使用这个键并禁用它？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-11T13:20:12.790

# javascript - jQuery inArray() 的返回值

> ID：10479152
> 
> 赞同：3
> 
> 时间：2012-05-07T08:46:47.470
> 
> 标签：javascript, jquery

我正在阅读[有关 inArray 方法的 jQuery 文档，但](http://api.jquery.com/jQuery.inArray/)我无法真正理解一句话的含义。如果元素不在数组中，则该方法返回 -1，否则返回 0，其内容如下：

> 因为 JavaScript 将 0 视为松散地等于 false（即 0 == false，但 0 !== false），如果我们要检查数组中是否存在值，我们需要检查它是否不等于（或大于) -1。

我无法理解 JavaScript 将 0 视为松散地等于 false 的事实与检查方法返回值的需要有什么关系。即使 JavaScript 不能以这种方式工作，我也不需要这样做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T08:50:14.130

这基本上意味着您需要像这样编写测试：

```
if ($.inArray(value, array) > -1) {
    // the element is inside the array
} 
```

代替：

```
if ($.inArray(value, array)) {
    // the element is inside the array
} 
```

您不应该使用第二个构造的原因是，如果该值是数组的第一个元素，则`inArray`函数将返回 0（因为这是数组第一个元素的索引），并且如文档中所述，`0`意味着`false`：

```
if (0) {
    // this will never run
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T08:51:04.053

他们只是掩盖了该函数^(1的)*可怕*错误命名的背后。

换句话说，他们说你不能这样做：

```
if ($.inArray(a, b) == false) {
   // will fail if the element is in index 0
} 
```

¹一个名为的函数`inArray`在逻辑上（没有双关语）被期望返回一个布尔值，而不是一个位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T09:01:27.553

它只是意味着`inArray`应该真的被命名`indexInArray`。

这使得它`0`意味着它在第一个元素中被发现，而不是它没有被发现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T08:50:05.487

他们告诉你不要检查`0`它是否像`false`或`null`等等'
如果值在`0`数组的索引中（== false）将是一个问题

检查值是否大于`-1`或`!=-1`

**问题示例：**

```
if ($.inArray(20, [20]))
    // won't run the value is in index - 0

if ($.inArray(20, [20]) > -1)
    // Will run! 
```

[**演示**](http://jsfiddle.net/PSheC/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T08:50:45.750

索引以 开头`0`，因此`0`在这种情况下是有效值

```
​var arr = ['foo']​​;
​console.log($.inArray('foo', arr));​​​​​ 
```

所以 jQuery 开发人员决定使用`-1`而不是`false`来防止明显的错误，以防开发人员检查值的存在，例如

```
if (!$.inArray(..)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T08:53:20.890

在 javascript 中，0 为假，1 为真，或者您可以使用真或假。零是数组的位置是数组的第一项。

如果你在 if 语句中比较 if(0) 它被认为是错误的。

但是您在数组上下文中的答案是该项目位于零位置。

# ruby-on-rails - （未定义的方法“名称”用于# ) 设计；Ruby on Rails 3.2.1

> ID：10479156
> 
> 赞同：1
> 
> 时间：2012-05-07T08:47:03.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我在heroku日志中有这个错误： ![heroku 日志中的错误](../Images/3af398b8db5f5650cc9ef84135d751f8.png)

也许这是因为我在注册时添加了姓名、姓氏和电话字段？在本地，我的项目运行良好，没有问题。

用户型号：

```
class User < ActiveRecord::Base
# Include default devise modules. Others available are:
# :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and   :omniauthable
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

# Setup accessible (or protected) attributes for your model
attr_accessible :email, :password, :password_confirmation, :remember_me, :name, :surname, :phone
end 
```

制定登记表：

```
<div id="content">  
<h1 class="title">Reģistrēt jaunu profilu.</h1>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
<%= devise_error_messages! %>
<div class="virslauks"> 
    <span class="text2">
        <%= f.label :name, "Vārds:" %><br />
        <%= f.text_field :name %><br />
        <%= f.label :surname, "Uzvārds:" %><br />
        <%= f.text_field :surname %><br />
    </span>
</div>
<div class="virslauks"> 
    <span class="text2">
        <%= f.label :phone, "Telefona Nr.:" %><br />
        <%= f.phone_field :phone %>
    </span>
</div>
<div class="virslauks"> 
    <span class="text2">
        <%= f.label :email, "E-pasts:" %><br />
        <%= f.email_field :email %>
    </span>
</div>
<div class="virslauks"> 
    <span class="text2">
        <%= f.label :password, "Parole:" %><br />
        <%= f.password_field :password %><br />
        <%= f.label :password_confirmation, "Vēlreiz parole:" %><br />
        <%= f.password_field :password_confirmation %>
    </span>
</div>
<%= f.submit "Reģistrēties" %>
<% end %> 
```

设计创建用户：

```
class DeviseCreateUsers < ActiveRecord::Migration
  def change
create_table(:users) do |t|
  ## User details
  t.string :name,               :null => false, :default => ""
  t.string :surname,            :null => false, :default => ""
  t.integer :phone,            :null => false, :default => ""

  ## Database authenticatable
  t.string :email,              :null => false, :default => ""
  t.string :encrypted_password, :null => false, :default => ""

  ## Recoverable
  t.string   :reset_password_token
  t.datetime :reset_password_sent_at

  ## Rememberable
  t.datetime :remember_created_at

  ## Trackable
  t.integer  :sign_in_count, :default => 0
  t.datetime :current_sign_in_at
  t.datetime :last_sign_in_at
  t.string   :current_sign_in_ip
  t.string   :last_sign_in_ip

  ## Encryptable
  # t.string :password_salt

  ## Confirmable
  # t.string   :confirmation_token
  # t.datetime :confirmed_at
  # t.datetime :confirmation_sent_at
  # t.string   :unconfirmed_email # Only if using reconfirmable

  ## Lockable
  # t.integer  :failed_attempts, :default => 0 # Only if lock strategy is :failed_attempts
  # t.string   :unlock_token # Only if unlock strategy is :email or :both
  # t.datetime :locked_at

  ## Token authenticatable
  # t.string :authentication_token

  t.timestamps
end

add_index :users, :email,                :unique => true
add_index :users, :reset_password_token, :unique => true
# add_index :users, :confirmation_token,   :unique => true
# add_index :users, :unlock_token,         :unique => true
# add_index :users, :authentication_token, :unique => true
  end
end 
```

**问题解决了：**

我已经解决了这个问题。我只是添加了

> add_index :users, :name, :surname, :phone

在 devise_create_users

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:51:52.147

`name`您的数据库中有列吗？请注意，默认情况下它不存在`devise`。如果是这样，你跑了`rake db:migrate`吗？

# c++ - 关于结构选择的模板错误

> ID：10479158
> 
> 赞同：0
> 
> 时间：2012-05-07T08:47:10.837
> 
> 标签：c++, templates

我的结构有问题……或类似的东西。我有 2 个数组，一个被定义为`Array <Student> DBst`和一个 `Array <Assignment> DBas`。事情在某个地方它被遗漏了，因为我的一个函数（以模板形式）弹出一个错误，它告诉我`Class Assignment`没有函数`setStudent(...)`，但我不知道为什么它将我的结构读取`DBst`为 Assigment 对象的集合。

域.h：

```
template <class T>
void addStudent(int a, int b, std::string c,Array <T> &A){
    A.M[a].setStudent(a,b,c);
    cout<<"here";
} 
```

控制器.h：

```
template <class T1>
void _addStudent(Array <T1> &A){
    int a,b;
    string c;
    cout<<"Enter ID:"<<endl;
    cin>>a;
    cout<<"Enter Group:"<<endl;
    cin>>b;
    cout<<"Enter Name:"<<endl;
    cin>>c;

    addStudent(a,b,c,A);
} 
```

Menuc.cpp：

```
void Menu::mainMenu(Array <Student> &DBst,Array <Assignment> &DBas){
showMainMenu();
int ret = Menu::intInputHandler();

switch(ret){
case 1:studentMenu(DBst,DBas);break;
case 2:assignmentMenu(DBas,DBst);break;
case 3:statsMenu(DBst,DBas);break;
case 4:_printAll(DBst,DBas);break;
case 0:break;
default:cout<<"Wrong option selected!";break;
}
Menu::mainMenu(DBst,DBas);

    void Menu::studentMenu(Array <Student> &DBst,Array <Assignment> &DBas){
    showStudentMenu();
    int ret = Menu::intInputHandler();

    switch(ret){
    case 1:_addStudent(DBst);break;
    case 2:_removeStudent(DBst);break;
    case 3:_editStudent(DBst);break;
    case 4:_printStudent(DBst);break;
    case 5:_printAllStud(DBst);break;
    case 6:_searchByID(DBst);break;
    case 0:mainMenu(DBst,DBas);break;
    default:cout<<"Wrong option selected!";break;
    }
    Menu::studentMenu(DBst,DBas);
} 
```

菜单.h：

```
class Menu{

    public:
        string stringInputHandler();
        int intInputHandler();
        void mainMenu(Array <Student> &,Array <Assignment> &);
        void studentMenu(Array <Student> &,Array <Assignment> &);
        void assignmentMenu(Array <Assignment> &,Array <Student> &);
        void statsMenu(Array <Student> &,Array <Assignment> &);
}; 
```

学生.cpp：

```
void Student::setStudent(int a,int b,string c){
this->ID = a;
    this->group = b;
    this->name = c;
} 
```

我得到的错误是：

```
D:\c++\Begin\Lab6-8_UML/Domain.h:70:2: error: 'class Assignment'
                                       has no member named 'setStudent'` 
```

编辑：

```
template <class T>
struct Array{
    int lenght;
    T * M;

    Array( int size ) : lenght(size), M(new T[size])
    {
    }
    ~Array()
    {
       delete[] M;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:13:51.900

它在您提供的代码中不可见，但我怀疑您正在使用参数（最后一个）调用某个`addStudent<T>`函数并且该类没有方法。`Array<Assignment>``Assignment``setStudent`

# android - 为什么我得到“不幸的是拨号器已停止工作”？

> ID：10479162
> 
> 赞同：1
> 
> 时间：2012-05-07T08:47:17.457
> 
> 标签：android, android-layout, android-emulator, android-widget

当我运行以下代码时，我看到“不幸的是拨号器已停止工作”。

这是我的代码片段：

DialerActivity.java

```
package com.test;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.net.Uri;
import android.widget.Button;
import android.view.*;

public class DialerActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button callButton=(Button) findViewById(R.id.callButton);
        callButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) 
            {
                try {

                   Intent CallIntent = 
                      new Intent(Intent.ACTION_CALL,Uri.parse("tel:9563460376"));
                   CallIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(CallIntent);
               }
               catch(Exception e)
               {

               }
           }
        });
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <button android:id="@+id/callButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="ShowDialer"         
        android:background="#d3d3d3">
    </button>
</LinearLayout> 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="hell">sanjoy</string>
    <string name="app_name">Test</string>
    <string name="button">ShowDialer</string>    
</resources> 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:40:24.877

```
Intent serviceIntent = new Intent(context, YourClass.class);
serviceIntent.setAction("android.intent.action.NEW_OUTGOING_CALL");
serviceIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(serviceIntent); 
```

试试这个，别忘了在 Manifest 中添加权限。

# php - 通用 MySQL 全选函数

> ID：10479163
> 
> 赞同：0
> 
> 时间：2012-05-07T08:47:18.530
> 
> 标签：php, mysql

我在我的网站上写了很多 SELECT * FROM... 类型的查询。我想编写一个函数来为我处理这个问题，这样我就可以更快地调用它，而无需使用 PDO 和 OOP 等更高级的技术。我只是对如何调用从数据库中检索到的数据感到困惑，尤其是在遍历数组结果时。

我喜欢这样的东西：

```
function selectAll($tableName, $limitAmount) {
    global $dbConnection;
    $query = mysql_query("SELECT * FROM $tableName ORDER BY id LIMIT $limitAmount");
    $row_result = mysql_fetch_assoc($query);
    return $row_result;
} 
```

说这是一堆新闻帖子。我想以一种典型的方式遍历结果：

```
// CALL THE FUNCTION
selectAll('news_table', '10');

// SOMEHOW LOOP THROUGH RESULTS??
do {
    echo "<h2>".$row_result['title']."</h2>";
} while ($row_result = mysql_fetch_assoc($query)); 
```

显然，这不是我遍历函数的定制结果的方式。我什至不确定我的功能是否正确。

任何帮助是极大的赞赏。

编辑：忘记在函数内返回结果并调用实际函数。我的错。现在更新了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:03:03.197

像你这样调用这样的函数是没有意义的。

就这样吧

```
function fetchAll($query) {
  $res = mysql_query($query) or trigger_error("db: ".mysql_error()." in ".$query);
  $a   = array();
  if ($res) {
    while($row = mysql_fetch_assoc($res)) $a[]=$row;
  }
  return $a;
} 
```

并将其与任何查询一起使用：

```
$data = fetchAll("SELECT * FROM news_table ORDER BY id LIMIT 10");
foreach ($data as $row) {
    echo $row['title'];
} 
```

SQL 查询本身就是一个**强大的程序**。不要将它的力量降低到愚蠢的选择上。
使用 SQL 表示数据处理逻辑和此辅助函数以避免重复。

# emacs - Emacs, describe-key 命令, Ch k

> ID：10479164
> 
> 赞同：4
> 
> 时间：2012-05-07T08:47:21.683
> 
> 标签：emacs

当我想找到绑定到 Cu M- 的命令时。使用 Ch k，事实证明 emacs 给了我与 Cu 绑定的命令。我应该怎么办 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T08:49:37.577

`C-u`is 为在它之后调用的函数提供了一个前缀参数（如您从其文档中看到的那样）。访问文档`M-.`，然后查看函数接收到前缀参数时会发生什么。没有单独的文档，`C-u M-.`因为它不是单独的功能。

# flash - Flash Stage3d 使用了多少 GPU RAM？

> ID：10479174
> 
> 赞同：0
> 
> 时间：2012-05-07T08:47:57.873
> 
> 标签：flash, stage3d

有谁知道在 Flash 中使用 Stage3D 时如何测量 GPU 内存使用情况？

我知道有`System.*Memory`计数器，但我找不到 GPU 一个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:16:45.900

您可以使用[Adob​​e Scout](http://gaming.adobe.com/technologies/scout/)，目前它是免费的。据我所知，它是目前最好的 AS 分析工具。关于 GPU，它显示内存、绘制调用计数、Stage3D 指令及其每一帧的结果。您甚至可以编辑着色器并实时查看结果。这是[指南](http://www.adobe.com/devnet/flashruntimes/articles/adobe-scout-getting-started.html)。

唯一的问题是您必须使用新的[ASC 2](http://labs.adobe.com/technologies/asc2/)编译器来编译您的项目。如果由于某种原因无法实现（例如，您的项目使用 Flex），您可以使用[SWFScoutEnabler](https://github.com/renaun/ActionScriptExamples/tree/master/SWFScoutEnabler)工具在已编译的 SWF 上启用遥测。

# php - PHP 选项图讨论

> ID：10479177
> 
> 赞同：1
> 
> 时间：2012-05-07T08:48:08.670
> 
> 标签：php, map

每个站点都应该有选项，可以通过控制面板进行更改。我的新项目将有这个。但是，我很好奇哪种方法是存储这些选项的最佳方法。

## 这是我已知的方法：

我已经测试了这些，虽然不是很彻底，因为很可能我不会发现长期的问题或好处。

1.  使用带有字段`key`和的 MySQL 表`value`，其中每列是一个新的键/值对。这样做的缺点是 MySQL 可能很慢，事实上，在每个页面之前都需要一个循环来从数据库中获取选项并将其解析为数组。

2.  使用 MySQL 表，每个值都有一个字段和一条记录。这样做的缺点是每个新选项都需要一个新字段，这不是 MySQL 表的标准用法，但一个很大的好处是它需要一个函数来将它带入 PHP 索引数组。

3.  使用包含序列化形式的选项数组的平面文件，使用 PHP 函数`serialize`和`unserialize`. 这种方法的主要问题是我必须首先遍历文件，读取整个文件，并且序列化可能很慢，因此随着创建更多选项它会变得更慢。它还为数据提供了一个小的混淆层。

4.  使用ini文件。Ini 解析器相当快，并且此选项可以轻松传递站点配置。但是，如上所述，我将不得不遍历到 ini，而且，在 PHP 中使用 ini 文件通常是未使用的。

5.  其他格式，例如`XML`和`JSON`，也都被考虑过。但是，它们都需要某种存储，我主要对每种存储的好处感到好奇。

## 这些是我具体的理想主义要求：

所以我要寻找的基本东西是速度、安全性和便携性。我希望配置不是人类可读的（因此，未加密的平面文件很糟糕），易于移植（排除 MySQL），并且几乎为零但持续的性能影响（排除大多数选项）。

我并不是要让人们为我编写代码，或者类似的东西。我只需要对这个问题再看一眼，可能会提出我从未考虑过的问题。谢谢你的帮助

谢谢你-丹尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T07:53:22.490

> 使用带有字段键和值的 MySQL 表，其中每列是一个新的键/值对。这样做的缺点是 MySQL 可能很慢，事实上，在每个页面之前都需要一个循环来从数据库中获取选项并将其解析为数组。

那是错误的。除非您计划存储几亿个配置对，否则您会很好。如果您担心使用此方法的性能，只需缓存查询（仅当您在表内进行更改时才擦除缓存）。这也将为您提供最大的灵活性、易用性等。

# mysql - 将 csv 简单导入 MySQL 数据库的问题（加载数据 infile 不起作用）

> ID：10479179
> 
> 赞同：1
> 
> 时间：2012-05-07T08:48:22.840
> 
> 标签：mysql, ruby

Ruby 相对较新，正在运行：Ruby 1.9.2 和 MySQL 5.5.19

我有一个充满数据的 csv 文件，我想将这些数据添加到 mysql 数据库上的现有表中。csv 文件没有标题。是的，我知道关于这个话题已经有多个问题了。以下是它的分解方式：

答案 #1：使用 LOAD DATA INFILE 不幸的是，LOAD DATA INFILE 给了我以下错误：“无法获取 'filename.csv' 的统计信息（错误代码：2）”这似乎是某种权限问题。我已经直接在 mysql 提示符下（以 root 身份）和通过 Ruby 脚本进行了尝试。我在 csv 文件上尝试了各种 chmod 选项，以及将 csv 文件移动到其他用户说它适用于他们的各种目录。没运气。无论如何，此时大多数人都建议...

答案 #2：使用 LOAD DATA local INFILE 不幸的是，这也会返回错误。显然本地 infile 是默认关闭的 mysql 选项，因为它存在安全风险。我试过打开它，但除了错误什么都没有，例如：ERROR 1148 (42000): The used command is not allowed with this MySQL version and also undefined method `execute' for # (NoMethodError)

答案 #3：我可以找到各种涉及 Rails 的答案，但不适合这种情况。这不适用于 Web 应用程序（尽管 Web 应用程序可能稍后会访问它），我现在只是尝试将数据添加到数据库中，作为一次性的事情来进行一些数据分析。

Ruby 文件应该非常简单：

```
require 'rubygems'
require 'csv' (or fastercsv?)
require 'mysql'

db = mysql.connect('localhost','root','','databasename')

CSV.foreach('filename.csv') do |row|
   ?????
   db.execute("INSERT INTO tablename ?????")
end 
```

PS 非常感谢提前。请不要回答指向使用 LOAD DATA INFILE 或 LOAD DATA LOCAL INFILE 的答案。已经浪费了足够多的时间试图让它发挥作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T23:08:59.450

广告 mysql：

```
LOAD DATA INFILE '/complete/path/csvdata.csv' INTO TABLE mytable(column1,column2,...); 
```

红宝石

```
require 'csv'
require 'mysql'

db = mysql.real_connect('localhost','root','password','database')

file=CSV::Reader.parse('filename.csv')
file.each do |row|
  values = row.inject([]){|k,v| k<<"'#{v}'";k}.join(',')
  db.query("insert into table(column, column ...) values(#{values})")
end

db.close 
```

它假设 csv 文件包含所需的所有列..

# user-interface - JuiceUI 组件不保存视图状态

> ID：10479183
> 
> 赞同：0
> 
> 时间：2012-05-07T08:48:52.647
> 
> 标签：user-interface, datepicker, postback, viewstate, juice-ui

使用 DatePicker JuiceUI 控件时，用于存储值的文本字段在回发时不会保留其值。DatePicker 控件设置如下；

```
<asp:TextBox ID="txt_DueDate" Type="date" MaxLength="50" CssClass="requiredField" Width="75" runat="server" />
<Juice:Datepicker ID="dp_DueDate" TargetControlID="txt_DueDate" ButtonImage="/images/signs/ico_calendar.gif" DateFormat="dd/mm/yy" ButtonImageOnly="true" ShowOn="both" ButtonText="Select date" runat="server" /> 
```

除了将 DatePicker 控件和 Type="date" 属性添加到文本框之外，此文本框还存储了来自以前仅 javascript 的日期选择器的值，并在回发后保持它的值。

我在这些控件中的任何一个上是否缺少使视图状态再次起作用的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:43:14.457

我使用单个按钮测试了您在新页面中提供的代码，并且文本框保留了由 asp:button 发起的回发时 datepicker 设置的值。您的代码中必须有其他内容重置文本框的值。

# php - MySQL 3000 行中的 PHP INSERT

> ID：10479186
> 
> 赞同：-2
> 
> 时间：2012-05-07T08:49:03.303
> 
> 标签：php, mysql

向 MySQL 数据库写入 3000 行。

```
INSERT INTO test (id, test) VALUES ("1", "test");
INSERT INTO test (id, test) VALUES ("2", "test");
INSERT INTO test (id, test) VALUES ("3", "test");

...

INSERT INTO test (id, test) VALUES ("3000", "test"); 
```

如何共享对数据库未挂起的部分的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:58:13.193

您可以将多个`INSERT`语句组合成一个语句，如下所示。

```
INSERT INTO test (id, test) VALUES ("1", "test"), ("2", "test"), ("3", "test"); 
```

这应该会减少发送到服务器的查询数量。

此外，如果它挂起您的数据库，您可以使用关键字`DELAYED`( [MySQL docu](http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html) )。这会缓存插入，直到数据库有能力插入它们。更直接的查询可以先于您的插入，从而延迟它们。这里需要注意的重要一点是，您最终只会将数据保存在表中，而不是立即保存。

```
INSERT DELAYED INTO test (id, test) VALUES ("1", "test"), ("2", "test"), ("3", "test"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:54:23.517

我不确定这是否是您所要求的，但是要将多个插入组合到一个查询中，您可以执行以下操作：

```
INSERT INTO test (id, test) VALUES
  ("1", "test"),
  ("2", "test"),
  ("3", "test"); 
```

这应该会大大加快您的脚本速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:00:05.073

是不是您有 3000 行要插入但又不想全部写出来？如果是这样，请使用：

```
$insert = '';
$count = 1;
while ($count <= 3000) {
  $insert .= "('$count', 'test'), ";
  $count++;
}

$insert = substr($insert, 0, -2);

INSERT INTO test (`id`, `test`) VALUES $insert; 
```

# ios - 如何为 iOS 视网膜显示设置 Flot

> ID：10479191
> 
> 赞同：3
> 
> 时间：2012-05-07T08:49:29.187
> 
> 标签：ios, ipad, flot, retina-display

我在 iPad（第 3 代）上对此进行了测试。折线图看起来非常平滑。

[http://justindarc.github.com/flot.touch/example/index.html](http://justindarc.github.com/flot.touch/example/index.html)

我已经尝试使用我的浮点代码来区分代码，并且看不到任何会导致它在视网膜模式下运行的显着差异。我的 flot 是 0.7 版，和他的代码一样。无论我尝试什么，我自己的图表都在非视网膜模式下运行。

**运行视网膜模式的技巧是什么？**

我的设置代码相当长。

```
function setup_chart0(setup_options) {
    var point_data = [];
    if(setup_options.use_sample_data_for_chart0) {
        point_data = generate_dummy_data(
            setup_options.timestamp_generate_min,
            setup_options.timestamp_generate_max
        );
    }
    var average_data = henderson23(point_data);
    var datasets = make_chart0_datasets(point_data, average_data);

    if(is_dualaxis_detail_mode) {
        datasets = make_chart0_dual_datasets(
            [], 
            [],
            [], 
            []
        );
    }

    var options = default_plot_options();
    options.xaxis.min = setup_options.timestamp_visible_min;
    options.xaxis.max = setup_options.timestamp_visible_max;
    options.xaxis.panRange = [setup_options.timestamp_pan_min, setup_options.timestamp_pan_max];
    options.yaxis.min = -0.025;
    options.yaxis.max = 1.025;
    options.yaxis.panRange = [-0.025, 1.025];
    options.legend = { container: '#legend0', noColumns: 2 };
    options.grid.markings = compute_markings_with_alertlevels;

    if(is_dualaxis_detail_mode) {
        options.y2axis = {};
        options.y2axis.position = "right";
        options.y2axis.min = -0.025;
        options.y2axis.max = 1.025;
        options.y2axis.panRange = [-0.025, 1.025];
        options.legend = { container: '#legend_hidden', noColumns: 2 };
    }

    //save_as_file({ samples: point_data, average: average_data });

    var el_placeholder0 = $("#placeholder0");
    if(el_placeholder0.length){
        //console.log('plotting chart 0');
        var fade = false;
        var el = el_placeholder0;
        var el_outer = $("#placeholder0_outer");
        var original_offset = el_outer.offset();
        if(fade) {
            el_outer.offset({ top: -5000, left: 0 });  // move plot container off screen 
        }
        chart0 = $.plot(el, datasets, options);
        if(fade) {
            el.hide();  // hide plot - must do *after* creation 
            el_outer.offset(original_offset); // put plot back where it belongs 
            el.fadeIn('slow'); // fade in
        }

        /*var s = '   width: ' + chart0.width() + ' height: ' + chart0.height();
        $('#label0').append(s);*/

        if(solo_pan_mode) {
            el.bind('plotpan', function (event, plot) {
                set_data_should_redraw_chart0 = true;
                set_data_should_redraw_chart1 = false;
                set_data_should_redraw_chart2 = false;
                fetch_data_for_chart(chart0, setup_options.timestamp);
                show_loading_empty('#loader1');
                show_loading_empty('#loader2');
            }); 
            el.bind('plotpanend', function (event, plot) {
                set_data_should_redraw_chart0 = true;
                set_data_should_redraw_chart1 = true;
                set_data_should_redraw_chart2 = true;
                copy_min_max(chart0, chart1, '#placeholder1');
                copy_min_max(chart0, chart2, '#placeholder2');
                hack_hide_loading_wheels = true;
                maybe_hide_loading_wheels();
            }); 
        } else {
            el.bind('plotpan', function (event, plot) {
                fetch_data_for_chart(chart0, setup_options.timestamp);
                sync_with_chart0();
            }); 
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:29:34.897

我已经像这样修改了 jquery.flot.js：

在顶部我添加了

```
retinaMode = (window.devicePixelRatio > 1), 
```

我已经扩展了这些功能

```
function makeCanvas(skipPositioning, cls) {
    var c = document.createElement('canvas');
    c.className = cls;
    c.width = canvasWidth;
    c.height = canvasHeight;

    if (!skipPositioning)
        $(c).css({ position: 'absolute', left: 0, top: 0 });

    $(c).appendTo(placeholder);

    if(retinaMode) {
        c.width = canvasWidth * 2;
        c.height = canvasHeight * 2;
        c.style.width = '' + canvasWidth + 'px';
        c.style.height = '' + canvasHeight + 'px';
    }

    if (!c.getContext) // excanvas hack
        c = window.G_vmlCanvasManager.initElement(c);

    // used for resetting in case we get replotted
    c.getContext("2d").save();

    if (retinaMode) {
         c.getContext("2d").scale(2,2);
    }

    return c;
}

function getCanvasDimensions() {
    canvasWidth = placeholder.width();
    canvasHeight = placeholder.height();

    if (canvasWidth <= 0 || canvasHeight <= 0)
        throw "Invalid dimensions for plot, width = " + canvasWidth + ", height = " + canvasHeight;
}

function resizeCanvas(c) {
    // resizing should reset the state (excanvas seems to be
    // buggy though)
    if (c.width != canvasWidth) {
        c.width = canvasWidth;
        if(retinaMode) {
            c.width = canvasWidth * 2;
        }
        c.style.width = '' + canvasWidth + 'px';

    }

    if (c.height != canvasHeight) {
        c.height = canvasHeight;
        if(retinaMode) {
            c.height = canvasHeight * 2;
        }
        c.style.height = '' + canvasHeight + 'px';
    }

    // so try to get back to the initial state (even if it's
    // gone now, this should be safe according to the spec)
    var cctx = c.getContext("2d");
    cctx.restore();

    // and save again
    cctx.save();

    if(retinaMode) {
        cctx.scale(2, 2);
    }
} 
```

# ssl - 验证公司签署的本地主机证书

> ID：10479200
> 
> 赞同：1
> 
> 时间：2012-05-07T08:50:07.317
> 
> 标签：ssl, openssl

是否可以拥有 verisign、comodo 等签名证书而不是在本地主机上拥有自签名证书？

# iphone - 使用 Core Graphics 进行绘图

> ID：10479213
> 
> 赞同：3
> 
> 时间：2012-05-07T08:51:03.507
> 
> 标签：iphone, ios, drawing, core-graphics

我正在构建一个 iOS 应用程序用于第一次绘图。现在我可以使用核心图形绘制直线和曲线，但无法撤消绘图。我在绘制时保存了所有点，并尝试将它们重用于 UNDO 和 REDO，但没有成功。谁能帮忙知道我做错了什么？

非常感谢任何帮助。

这是我的代码

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [tempPathArray removeAllObjects];
    UITouch *touch = [touches anyObject];

    previousPoint1 = [touch previousLocationInView:self];
    previousPoint2 = [touch previousLocationInView:self];
    currentPoint = [touch locationInView:self];

}

    -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch  = [touches anyObject];

    previousPoint2  = previousPoint1;
    previousPoint1  = [touch previousLocationInView:self];
    currentPoint    = [touch locationInView:self];

    // calculate mid point
    CGPoint mid1    = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2    = midPoint(currentPoint, previousPoint1);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, mid1.x, mid1.y);
    CGPathAddQuadCurveToPoint(path, NULL, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGRect bounds = CGPathGetBoundingBox(path);
    CGPathRelease(path);

    drawBox = bounds;

    //Pad our values so the bounding box respects our line width
    drawBox.origin.x        -= self.lineWidth * 2;
    drawBox.origin.y        -= self.lineWidth * 2;
    drawBox.size.width      += self.lineWidth * 4;
    drawBox.size.height     += self.lineWidth * 4;

    UIGraphicsBeginImageContext(drawBox.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    curImage = UIGraphicsGetImageFromCurrentImageContext();
    [curImage retain];
    UIGraphicsEndImageContext();

    [tempPathArray addObject:[NSValue valueWithCGRect:drawBox]];

    [self setNeedsDisplayInRect:drawBox];

}

    - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

    [pathArray addObject:tempPathArray];
    NSLog(@"path array count %d", [pathArray count]);
}

    - (void)drawRect:(CGRect)rect
{
    NSLog(@"draw rect");
    [curImage drawAtPoint:CGPointMake(0, 0)];
    CGPoint mid1 = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    context = UIGraphicsGetCurrentContext(); 

    [self.layer renderInContext:context];

    CGContextMoveToPoint(context, mid1.x, mid1.y);
    // Use QuadCurve is the key
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 

    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

    CGContextStrokePath(context);
    [super drawRect:rect];

}

    -(void)undoButtonClicked
{

    KidsPhotoBookAppDelegate *appDelegate = (KidsPhotoBookAppDelegate*)[[UIApplication sharedApplication]delegate];

    if([pathArray count]>0){
        [bufferArray addObject:[pathArray lastObject]];
        [pathArray removeLastObject];

        for (NSMutableArray *tempArray in pathArray) {
            for (int i  = 0; i < [tempArray count]; i++) {
                CGRect draw = [[tempArray objectAtIndex:i] CGRectValue];
                [self setNeedsDisplayInRect:draw];
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T23:27:22.893

尝试这个：

1.  画一条线。
2.  在第一条线上再画一条线。
3.  撤消。

我怀疑你会看到它大部分工作 - 第二行与第一行重叠的部分会消失，只有没有的部分会保留。

问题是您正在设置需要显示在您仍然拥有的绘图部分上，而不是您刚刚腾出的部分。这与您应该做的恰恰相反：您仍然拥有的部分不需要重新绘制，因为它们没有改变，而您腾出的部分确实需要重新绘制，因为它已经改变了。

因此，设置需要显示在您要删除的路径区域中，就在您删除它之前。您不需要设置其他任何内容的需求显示。

# objective-c - iOS：如何使接口无法实例化？

> ID：10479215
> 
> 赞同：0
> 
> 时间：2012-05-07T08:51:05.897
> 
> 标签：objective-c, ios

首先我设计了一个协议作为我的基类，它不能被实例化。后来我发现符合这个协议的类之间应该有一些共享方法，所以我想在协议中添加一些*默认实现*。
AFAIK，Obj-C 不支持具有默认行为的协议，因此我必须将其设为接口。然后提出了我的问题，如何使接口无法实例化？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:56:48.170

接口永远不能被实例化。也许您正在考虑抽象类，这在 Objective-C 中并不真正可用。也许你应该重新考虑你的程序结构并尝试使用更多的继承。如果您要继承的类符合某个协议（这在一定程度上相当于 Objective-C 的 Java 接口），那么您可以实例化它，或者子类化它然后实例化它。

在这里查看有关继承的更多信息：[http ://www.techotopia.com/index.php/Objective-C_Inheritance](http://www.techotopia.com/index.php/Objective-C_Inheritance)

# javascript - 从作为哈希映射键的对象中检索值

> ID：10479216
> 
> 赞同：0
> 
> 时间：2012-05-07T08:51:09.373
> 
> 标签：javascript, map, hashmap

我有一个返回 MAP<Employee, Double>的**DWR调用。**Employee 是一个具有属性、**employeeId**和**employeeName**的类。

在我的 javascript 中，我正在做这样的事情。

```
for (var k in employees) {
    if (employees.hasOwnProperty(k)) {                  
        alert("EmployeeId : " + k.employeeId);
    }
} 
```

它向我展示了`undefined`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:52:39.337

钥匙？这`k`是关键。也许您的意思是访问密钥的值：

```
var employee = employees[k] 
```

如果`employees[k]`包含带有 的对象`employeeId`，则：

```
for (var k in employees) {
    if (employees.hasOwnProperty(k)) {                   
        alert("EmployeeId : " + employees[k].employeeId);
    }
} 
```

# c# - 管理员重定向到管理站点和用户到用户站点

> ID：10479217
> 
> 赞同：0
> 
> 时间：2012-05-07T08:51:11.087
> 
> 标签：c#, asp.net-mvc-3

我正在尝试授权，如果您是管理员，您将被重定向到管理站点。如果您是会员，它会将您重定向到会员网站。

这是我在控制器上的代码：

```
public ActionResult Index(Login model)
    {
        if (ModelState.IsValid)
        {
            if (model.IsUserExist(model.EmailId, model.Password))
            {

                if (Roles.IsUserInRole("Admin"))
                {
                    ViewBag.UserName = model.EmailId; 
                    FormsAuthentication.RedirectFromLoginPage(model.EmailId, false);

                    return RedirectToAction("AdminSite", "Home");
                }
                if (Roles.IsUserInRole("Member"))
                {
                    ViewBag.UserName = model.EmailId; 
                    FormsAuthentication.RedirectFromLoginPage(model.EmailId, false); 
                    return RedirectToAction("MemberSite", "MobileHome"); 
                }
            }
            else
            {
                ModelState.AddModelError("", "Wrong Email or Password!");
            }
        }

        return View(model);
    } 
```

我不知道出了什么问题，但该网站只是停留在登录页面上。当我以会员或管理员身份登录时，它只会刷新。它没有把我带到管理站点或成员站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:59:06.210

使用

```
RedirectFromLoginPage(
    string userName,
    bool createPersistentCookie
) 
```

方法你必须在查询字符串中有 ReturnURL 变量名。见[规格](http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx=)。所以它不会到达`return RedirectToAction("MemberSite", "Home")`or `return RedirectToAction("AdminSite", "Home")`。如果您将注释掉该方法，它会将您重定向到给定的操作。

# javascript - 挂钩到 XMLHttpRequest 打开和发送方法

> ID：10479228
> 
> 赞同：3
> 
> 时间：2012-05-07T08:52:08.277
> 
> 标签：javascript, ajax

我正在使用以下代码挂钩 XMLHttpRequest 打开/发送方法：

```
var lastParams = '';
var send = XMLHttpRequest.prototype.send;
XMLHttpRequest.prototype.send = function(data){
   lastParams = data;
   send.call(this, data);
};

var open = XMLHttpRequest.prototype.open;
XMLHttpRequest.prototype.open = function(method, uri, async, user, pass) {
    this.addEventListener("readystatechange", function(event) {  
    if(this.readyState == 4){
       var self = this;
       var response = {
         method: method,
         uri: uri,
         params: lastParams,
         responseText: self.responseText
      };
      console.log(response);  
    }
  }, false);
  open.call(this, method, uri, async, user, pass);
}; 
```

在一次单个ajax请求的情况下它工作正常。

当一次触发多个 ajax 请求时，lastParams 可能包含错误的数据（意味着 lastParams 可能包含来自其他 ajax 请求的数据）。我想将 lastParams 与请求的其他属性唯一关联吗？

XMLHttpRequest 中是否有任何 id 属性，以便我可以唯一标识 ajax 请求实例？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T14:38:02.577

看看[https://github.com/jpillora/xhook](https://github.com/jpillora/xhook)和[演示](http://jpillora.com/xhook/#vanilla)

```
//modify 'responseText' of 'example2.txt'
xhook.after(function(request, response) {
  if(request.url.match(/example\.txt$/)) {
    response.text = response.text.replace(/[aeiou]/g,'z');
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:22:58.703

为了将某些数据与指定的 XMLHttpRequest 实例唯一关联，您可以简单地将属性添加到 XMLHttpRequest 实例中并将数据保存到属性中。例如：

```
// generating data for request
var data=generateData();

// sending data
var xhr=new XMLHttpRequest();
xhr.open("POST","/yourpage.php",true);
xhr.onreadystatechange=function(event){
  if(this.readyState===4){
    console.log(this.mySendedData);
  }
};
/** if you need to preserve 'data' variable value for each xhr **/
xhr.mySendedData=data;
/***************************************************************/
xhr.send(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:29:24.470

为什么不将“lastParams”作为一个数组，并且您总是推送数据，而不是每次都覆盖它。

# scala - 电梯。MappedText vs MappedTextarea？

> ID：10479231
> 
> 赞同：0
> 
> 时间：2012-05-07T08:52:46.647
> 
> 标签：scala, orm, lift

根据消息来源，它们的不同之处在于`MappedText`不与`StringValidators`and混合`HasApplyBoxString`（尽管它的方法`apply(ov: Box[String])`已被弃用）。长度似乎也是`MappedText`无限的（至少在 Lift/Scala 层）。

使用这两个相似（乍一看）类的使用指南是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:23:22.857

一个将呈现为输入 type="text" 标记，另一个将呈现为 html 输出中的 textarea 标记。

# javascript - 在 Raphael.js 中转换文本元素相对于路径的位置

> ID：10479232
> 
> 赞同：0
> 
> 时间：2012-05-07T08:52:51.833
> 
> 标签：javascript, svg, raphael

我正在使用[Raphael.js](http://raphaeljs.com)构建一个自定义图表，其中包括弧线和百分比。圆弧的文本标签需要随圆弧移动。我通过使用 onAnimation 回调并获取外弧的点并相应地定位文本标签来实现这一点：

```
var paper = Raphael("paper", 200, 200);
var centerX = paper.width / 2;
var centerY = paper.height / 2;

// This is a dummy percentage; in real app this corresponds to actual value
var percentage = 0;

paper.customAttributes.arc = function(centerX, centerY, startAngle, endAngle, innerR, outerR) {
  var radians = Math.PI / 180,
    largeArc = +(endAngle - startAngle > 180),
    outerX1 = centerX + outerR * Math.cos((startAngle - 90) * radians),
    outerY1 = centerY + outerR * Math.sin((startAngle - 90) * radians),
    outerX2 = centerX + outerR * Math.cos((endAngle - 90) * radians),
    outerY2 = centerY + outerR * Math.sin((endAngle - 90) * radians),
    innerX1 = centerX + innerR * Math.cos((endAngle - 90) * radians),
    innerY1 = centerY + innerR * Math.sin((endAngle - 90) * radians),
    innerX2 = centerX + innerR * Math.cos((startAngle - 90) * radians),
    innerY2 = centerY + innerR * Math.sin((startAngle - 90) * radians);

  var path = [
    ["M", outerX1, outerY1],
    //move to the start point
    ["A", outerR, outerR, 0, largeArc, 1, outerX2, outerY2],
    //draw the outer edge of the arc
    ["L", innerX1, innerY1],
    //draw a line inwards to the start of the inner edge of the arc
    ["A", innerR, innerR, 0, largeArc, 0, innerX2, innerY2],
    //draw the inner arc
    ["z"]
    //close the path
  ];

  return {
    path: path
  };
};

var arc = paper.path().attr({
  'fill': "#cccccc",
  'stroke': 'none',
  'arc': [centerX, centerY, 0, 0, 60, 80]
});
arc.toBack();

var percentagesStart = 0;
var percentagesEnd = 0;
var percentagesDelta = 0;

var label = paper.text(
  arc.attrs.path[1][6],
  arc.attrs.path[1][7],
  "0").toFront();

label.attr({
  'font-size': 16,
  'fill': "#000000",
  'font-family': 'sans-serif',
  'text-anchor': 'middle'
});

arc.onAnimation(function(anim) {
  console.log("test");
  label.attr({
    x: this.attrs.path[1][6],
    y: this.attrs.path[1][7],
    text: (percentage++)
  });
});

arc.animate({
  'arc': [centerX, centerY, 0, 220, 60, 80]
}, 1000, 'easeInOut');
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js"></script>

<div id="paper"></div>
```

但是，文本标签必须位于圆弧结束的位置，并留有一些很好的边距。文本元素位置必须相对于弧进行转换。

我试过用

```
label.transform("t-10,10"); 
```

并尝试了其他一些 x、y 值，但这不起作用，因为在某些时候 x 值必须为负，而在某些时候 x 值必须为正，具体取决于弧的角度。

有没有办法正确定位它？

# java - 重载原始变量

> ID：10479234
> 
> 赞同：1
> 
> 时间：2012-05-07T08:53:03.320
> 
> 标签：java

代码是

```
public class TestOverload {

    public static void print(Float f, double d) {
        System.out.println("Float,double");
    }

    public static void print(float f, double d) {
        System.out.println("float,double");
    }

    public static void print(int f, double d) {
        System.out.println("int,double");
    }
//  public static void print(int f, float d) {
//      System.out.println("int,float");
//  }

    public static void print(double d1, double d) {
        System.out.println("double,double");
    }

    public static void print(float d1, float d) {
        System.out.println("float,float");
    }

    public static void main(String[] args) {
        TestOverload.print(2, 3.0);

        TestOverload.print(2, 3.0f);//Compiler error:The method print(float, double) is ambiguous for the type TestOverload
    }
} 
```

为什么它给出错误，而不是它应该选择 print(float d1, float d)

PS：在上面的代码中，如果我评论：

```
//  public static void print(int f, double d) {
//      System.out.println("int,double");
//  } 
```

然后调用 print(float d1, float d)...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T08:57:47.130

```
print(2, 3.0f); 
```

可能两者兼而有之`print(int, float)`，`print(float, double)`因为隐式类型转换是在后台完成的。可以`int`转换为`float`. Javac（或编译器）无法确定您指的是哪一个。

如果您想为自己选择，您可以添加演员表：

```
print((float) 2, (float) 3.0f); 
```

*（请注意，不需要第二次强制转换 (float => float)。）*

# jquery - 带有jQuery-Mobile的webview IOS中的href属性

> ID：10479237
> 
> 赞同：1
> 
> 时间：2012-05-07T08:53:16.800
> 
> 标签：jquery, ios, jquery-mobile, uiwebview, safari

一个简单的代码...

此代码位于 html 头标签内。jquery-mobile 和 jQuery 的包含是正确的。

```
$(document).ready(function() {           
    $("a").click(function () {       
       var t = $(this).attr('href');
    });
}); 
```

但不适用于 webview IOS，但在 Chrome 中可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:59:45.090

尝试[vclick](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)事件：

```
$(document).ready(function() {
    $("a").vclick(function (){        
       var t = $(this).attr('href');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:57:12.597

还没有真正检查过，但`click`iOS 中的事件的处理（和行为）与桌面对应物有点不同。

你[试过这个](https://stackoverflow.com/questions/9585689/ios-not-recognising-click-events)吗？

# google-drive-api - 如何生成保存在谷歌驱动器中的文档的预览？

> ID：10479239
> 
> 赞同：3
> 
> 时间：2012-05-07T08:53:24.460
> 
> 标签：google-drive-api

我正在尝试使用谷歌查看器创建保存在谷歌驱动器中的文档的预览 -

[https://docs.google.com/viewer?authuser=0&srcid=](https://docs.google.com/viewer?authuser=0&srcid=) {一些文档 id}&pid=explorer&a=v&chrome=false&embedded=true

不幸的是，它仅适用于 pdf 文件。另一个重要的一点是，我想在不公开上传文件的情况下这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-15T10:24:08.660

要获取 PDF 文件预览，您可以使用以下链接：

[https://lh3.google.com/u/0/d/]](https://lh3.google.com/u/0/d/]) {FILEID} [=w200-h150-pk-nu-iv1](https://lh3.google.com/u/0/d/%7BFILEID%7D=w200-h150-p-k-nu-iv1)

例如：[https ://lh3.google.com/u/0/d/0BwVBMmQvtcsJUkNSVFllbjRLMzZab0haTEtLajE1M2haekZj=w200-h150-pk-nu-iv1](https://lh3.google.com/u/0/d/0BwVBMmQvtcsJUkNSVFllbjRLMzZab0haTEtLajE1M2haekZj=w200-h150-p-k-nu-iv1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:06:52.273

Drive/docs 仅支持导入 Word 文档，据我了解，它不支持以原生形式预览它们。因此，您必须使用 Google Documents List API 将它们导入并转换为原生 Google Document 文本格式。这样做的问题是您没有往返（您无法在 Word 中重新打开该文档）。这里唯一真正的选择是从word导出为pdf并保存。而且，如果您希望公众能够预览它，那么将其公开是唯一的解决方案。我认为您使用的技术与您要解决的问题不匹配...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T02:22:33.763

尝试使用此 URL 获取 PDF：[http](http://docs.google.com/viewer?url=https%3A%2F%2Fdocs.google.com%2Fuc%3Fexport%3Ddownload%26id%3D) : //docs.google.com/viewer?url=https%3A%2F%2Fdocs.google.com%2Fuc%3Fexport%3Ddownload%26id%3D {fileID}&embedded=true

以及其他文件的 URL：[https](https://docs.google.com/viewer?url=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F) ://docs.google.com/viewer?url=https %3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F {fileID}%2Fexport%3Fformat=pdf&embedded=true

请记住，文件应该是公开的。

# virtuemart - Slimbox 与 Virtuemart 2、Joomla 2.5 的集成

> ID：10479240
> 
> 赞同：0
> 
> 时间：2012-05-07T08:53:28.643
> 
> 标签：virtuemart, slimbox

我正在尝试将默认灯箱“modal”替换为“slimbox”，因为“modal”没有导航箭头。

[带导航的 slimbox 演示](http://demo.gavick.com/joomla15/may2010/index.php?page=shop.product_details&flypage=flypage.tpl&product_id=22&category_id=1&option=com_virtuemart&Itemid=203)

[没有导航的模态演示](http://roxzen.com/shop10/index.php/2011-09-01-12-44-00/virtuemart/product-page?virtuemart_product_id=1&virtuemart_category_id=1)

我正在使用这些路径来修改 slimbox 的调用

[模板名称]/html/com_virtuemart/productdetails/default.php components/com_virtuemart/productdetails/default.php

Joomla v2.5 Virtuemart 2.0.6 Slimbox2

以下是我的尝试：

```
 //Enable Slimbox2 plugin
        $front = JURI::root(true).'/components/com_virtuemart/assets/';
        $document = JFactory::getDocument();
        $document->addStyleSheet($front.'js/slimbox/slimbox.css');
        $document->addScript($front.'js/slimbox/slimbox2.js');      
        $js = 'jQuery(document).ready(function($) { $("a.lightbox").slimbox(); });';
        $document->addScriptDeclaration($js);
        //output thumbnail
        echo $this->product->images[0]->displayMediaThumb('class="product-image"',true,'class="lightbox" rel="lightbox"'.$this->product->virtuemart_product_id.'"',true,true);
        //unset first image not to be show amont additional ones
        unset ($this->product->images[0]);
        ?> 
```

但它仍然无法正常工作，我想知道怎么了？

[参考][3]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:30:02.707

您没有将 slimbox 类应用于图像引用，而是将其应用于图像的容器，不是吗？在我看来，您需要直接处理图像文件的 url。

```
// get the file_url of the first image
$imgPath = $this->product->images[0]->file_url;

// output the image
<a class="slimbox" href="<?php echo $imgPath; ?>">
<img src="<?php echo $imgPath; ?>" alt="" />
</a> 
```

# c - C中未定义的struct timeval声明

> ID：10479244
> 
> 赞同：1
> 
> 时间：2012-05-07T08:53:50.600
> 
> 标签：c, struct, mpi, declaration

我在下面有一个代码

```
#include <stdio.h>
#include "mpi.h"
#define NRA 512    /* number of rows in matrix A */
#define NCA 512   /* number of columns in matrix A */
#define NCB 512         /* number of columns in matrix B */
#define MASTER 0      /* taskid of first task */
#define FROM_MASTER 1  /* setting a message type */
#define FROM_WORKER 2  /* setting a message type */

MPI_Status status;

double a[NRA][NCA],   /* matrix A to be multiplied */
     b[NCA][NCB],       /* matrix B to be multiplied */
     c[NRA][NCB];      /* result matrix C */

main(int argc, char **argv)
{
int numtasks,   /* number of tasks in partition */
  taskid,       /* a task identifier */
  numworkers,   /* number of worker tasks */
  source,       /* task id of message source */
  dest,        /* task id of message destination */
  nbytes,         /* number of bytes in message */
  mtype,          /* message type */
  intsize,   /* size of an integer in bytes */
  dbsize,       /* size of a double float in bytes */
  rows,                       /* rows of matrix A sent to each worker */
  averow, extra, offset,      /* used to determine rows sent to each worker */
  i, j, k,   /* misc */
  count;

struct timeval start, stop;

intsize = sizeof(int);
dbsize = sizeof(double);

MPI_Init(&argc, &argv);
MPI_Comm_rank(MPI_COMM_WORLD, &taskid);
MPI_Comm_size(MPI_COMM_WORLD, &numtasks);
numworkers = numtasks-1;

//printf("   size of matrix A = %d by %d\n",NRA,NCA);
//printf("   size of matrix B = %d by %d\n",NRA,NCB);
/*---------------------------- master ----------------------------*/
if (taskid == MASTER) {
printf("Number of worker tasks = %d\n",numworkers);
for (i=0; i<NRA; i++)
  for (j=0; j<NCA; j++)
    a[i][j]= i+j;
for (i=0; i<NCA; i++)
  for (j=0; j<NCB; j++)
    b[i][j]= i*j;

gettimeofday(&start, 0);

/* send matrix data to the worker tasks */
averow = NRA/numworkers;
extra = NRA%numworkers;
offset = 0;
mtype = FROM_MASTER;
for (dest=1; dest<=numworkers; dest++) { 
  rows = (dest <= extra) ? averow+1 : averow;  
  //printf("   Sending %d rows to task %d\n",rows,dest);
  MPI_Send(&offset, 1, MPI_INT, dest, mtype, MPI_COMM_WORLD);
  MPI_Send(&rows, 1, MPI_INT, dest, mtype, MPI_COMM_WORLD);
  count = rows*NCA;
  MPI_Send(&a[offset][0], count, MPI_DOUBLE, dest, mtype, MPI_COMM_WORLD);
  count = NCA*NCB;
  MPI_Send(&b, count, MPI_DOUBLE, dest, mtype, MPI_COMM_WORLD);

  offset = offset + rows;
  }

/* wait for results from all worker tasks */
mtype = FROM_WORKER;
for (i=1; i<=numworkers; i++) { 
  source = i;
  MPI_Recv(&offset, 1, MPI_INT, source, mtype, MPI_COMM_WORLD, &status);
  MPI_Recv(&rows, 1, MPI_INT, source, mtype, MPI_COMM_WORLD, &status);
  count = rows*NCB;
  MPI_Recv(&c[offset][0], count, MPI_DOUBLE, source, mtype, MPI_COMM_WORLD,
             &status);

  }

#ifdef PRINT
printf("Here is the result matrix\n");
for (i=0; i<NRA; i++) {
  printf("\n");
  for (j=0; j<NCB; j++)
    printf("%6.2f   ", c[i][j]);
  }
printf ("\n");
#endif

gettimeofday(&stop, 0);

fprintf(stdout,"Time = %.6f\n\n",
       (stop.tv_sec+stop.tv_usec*1e-6)-(start.tv_sec+start.tv_usec*1e-6));

}  /* end of master section */

/*---------------------------- worker (slave)----------------------------*/
if (taskid > MASTER) {
mtype = FROM_MASTER;
source = MASTER;
#ifdef PRINT
printf ("Master =%d, mtype=%d\n", source, mtype);
#endif
MPI_Recv(&offset, 1, MPI_INT, source, mtype, MPI_COMM_WORLD, &status);
#ifdef PRINT
printf ("offset =%d\n", offset);
#endif
MPI_Recv(&rows, 1, MPI_INT, source, mtype, MPI_COMM_WORLD, &status);
#ifdef PRINT
printf ("row =%d\n", rows);
#endif
count = rows*NCA;
MPI_Recv(&a, count, MPI_DOUBLE, source, mtype, MPI_COMM_WORLD, &status);
#ifdef PRINT
printf ("a[0][0] =%e\n", a[0][0]);
#endif
count = NCA*NCB;
MPI_Recv(&b, count, MPI_DOUBLE, source, mtype, MPI_COMM_WORLD, &status);
#ifdef PRINT
printf ("b=\n");
#endif
for (k=0; k<NCB; k++)
  for (i=0; i<rows; i++) {
    c[i][k] = 0.0;
    for (j=0; j<NCA; j++)
      c[i][k] = c[i][k] + a[i][j] * b[j][k];
    }

//mtype = FROM_WORKER;
#ifdef PRINT
printf ("after computer\n");
#endif
//MPI_Send(&offset, 1, MPI_INT, MASTER, mtype, MPI_COMM_WORLD);
MPI_Send(&offset, 1, MPI_INT, MASTER, FROM_WORKER, MPI_COMM_WORLD);
//MPI_Send(&rows, 1, MPI_INT, MASTER, mtype, MPI_COMM_WORLD);
MPI_Send(&rows, 1, MPI_INT, MASTER, FROM_WORKER, MPI_COMM_WORLD);
//MPI_Send(&c, rows*NCB, MPI_DOUBLE, MASTER, mtype, MPI_COMM_WORLD);
MPI_Send(&c, rows*NCB, MPI_DOUBLE, MASTER, FROM_WORKER, MPI_COMM_WORLD);
#ifdef PRINT
printf ("after send\n");
#endif
}  /* end of worker */

MPI_Finalize();
} /* end of main */ 
```

当我尝试编译它时，警告是：

> matriks.c(43): 错误 C2079: 'start' 使用未定义的结构 'timeval'
> matriks.c(43): 错误 C2079: 'stop' 使用未定义的结构 'timeval'
> matriks.c(65): 警告 C4013: 'gettimeofday ' 不明确的; 假设 extern 返回 int
> matriks.c(111): error C2224: left of '.tv_sec' must have struct/union type
> matriks.c(111): error C2224: left of '.tv_usec' must have struct/union type
> matriks。 c(111): 错误 C2224: '.tv_sec' 的左边必须有结构/联合类型
> matriks.c(111): 错误 C2224: '.tv_usec' 的左边必须有结构/联合类型

请帮忙，我不知道错误在哪里。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T08:58:49.807

我想您可能会发现`timeval`需要您将其包含`sys/time.h`在 POSIX 系统下（它不是标准的 C）。有关详细信息，请参阅[POSIX SUSv2](http://pubs.opengroup.org/onlinepubs/7908799/xsh/systime.h.html)页面。

# php - PHP：从数组生成类别/子类别 UL 列表？

> ID：10479245
> 
> 赞同：1
> 
> 时间：2012-05-07T08:53:54.343
> 
> 标签：php

我有一个充满“类别”对象的数组，每个对象都包含一个 id 和一个 parent_id 值。它们的访问方式如下：

```
$category->get("id"); //gets category id
$category->get("parent_id"); gets parent category id 
```

我想制作一个这样的 HTML UL 列表：

```
<ul>
    <li>Category</li>
    <li>Category
        <ul>
            <li>Child Category</li>
            <li>Child Category</li>
            <li>Child Category
                <ul>
                    <li>Child Category</li>
                    <li>Child Category</li>
                    <li>Child Category</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Category</li>
    <li>Category</li>
    <li>Category</li>
    <li>Category</li>
</ul> 
```

必须做什么样的循环来生成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:20:07.357

在不知道您使用的是什么库的情况下，它更像是伪代码而不是工作代码，但您应该了解如何使用递归来获取树

首先检索主类别（例如，您可以将其设置为类别 0 是顶级类别。然后遍历所有项目并获取子项。如果节点有子项，则递归调用自身

```
showCategory($rootcategory) 
function showCategory($category) {
    $children=fetchChildren();
    if($children) //if category has children
    {
      echo('<ul>');
      foreach($children as $child) {
          showCategory($child);
      }
      echo('</ul>');
    }
    else {
      echo('<li>' . $child['title'] . '</li>');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:12:23.867

MPTT 树逻辑可能有用

[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

# macos - 有没有办法在 Qt 中添加 NSColorWell 颜色选择器？

> ID：10479253
> 
> 赞同：1
> 
> 时间：2012-05-07T08:54:25.553
> 
> 标签：macos, qt, qt4

Mac OS X 有一个标准的颜色选择按钮（Cocoa 类：NSColorWell）。

有没有办法在 Qt 中将这些用于我的产品的 Mac 版本？

我在 Mac OS X 10.6 上使用 Qt 4.8.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:32:10.217

[QMacCocoaViewContainer](http://qt-project.org/doc/qt-4.8/qmaccocoaviewcontainer.html)可以处理这样的场景。基本用法是：

```
class MacControl : public QMacCocoaViewContainer {
  Q_OBJECT

 public:
  explicit MacControl(QWidget *parent = NULL)
    : QMacCocoaViewContainer(NULL, parent) {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSColorWell *colors = [[NSColorWell alloc] init];
    // set properties on color well
    setCocoaView(color);
    [colors release];
    [pool release];
  } 
```

实际上，如果您正在为多个平台进行编译，您可能无法将它们全部放在一个文件中。您将拥有一个头文件，该文件声明可以从任何平台调用的方法，一个`cpp`通过调用非 Mac 的正常 Qt 颜色对话框来实现该方法的`mm`文件，以及一个创建 Mac 特定小部件并显示它的文件。

# batch-file - 如何从属性文件中读取值并将其存储在批处理文件中的变量中

> ID：10479254
> 
> 赞同：0
> 
> 时间：2012-05-07T08:54:31.253
> 
> 标签：batch-file

我有一个属性文件，其中包含以下键值对：

```
version 1 = test
version 2 = qa
version 3 = prd 
```

我想在批处理文件的变量中使用这些值。

我在 DOS 中使用了一个 for 循环命令，但它取的是`version`ie `prd`( `version 3`) 的最后一个值。

以下是代码：

```
set total=3
for /f %%a in (1 2 %total%) do (
    echo %%a
    FOR /F "eol=; tokens=2,2 delims==" %%i IN ('findstr /i "version%%a" test.txt') DO (
        set version%%a=%%i
    )
) 
```

所有变量`version 1`，`version 2`取值。`version 3``prd`

有人可以为此提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:11:16.177

您需要查看 FOR 命令的文档（键入 HELP FOR）。有许多看起来相似但行为不同的变体。我看不出您发布的代码如何给出您描述的结果，但无论如何......

如果您的文本文件名为“test.txt”，其内容如下所示

```
version1=test
version2=qa
version3=prd 
```

那么根据需要获取 3 个变量会很简单。

```
@echo off
for /f "delims=" %%A in (test.txt) do set %%A 
```

但是您的文件有我认为您不需要的额外空格。变量名中会有空格，每个值中也会有前导空格。我认为以下内容将为您提供所需的内容。它将消除变量名中的空格，并消除值中的前导空格。

```
@echo off
setlocal enableDelayedExpansion
for /f "tokens=1* delims==" %%A in (test.txt) do (
  set name=%%A
  set "name=!name: =!"
  for /f "tokens=*" %%C in ("%%B") do set "!name!=%%C"
)
set version 
```

针对此文本文件运行上述脚本：

```
version 1 = test
version2=qa
 version 3 = two words
version 4 = a = b 
```

给出这些结果：

```
version1=test
version2=qa
version3=two words
version4=a = b 
```

# android - 菜单项不会显示在操作栏中

> ID：10479255
> 
> 赞同：0
> 
> 时间：2012-05-07T08:54:33.720
> 
> 标签：android, android-activity, menu, android-actionbar

**更新：** 它在标签上工作，但在手机上由于某种原因它被覆盖了

我有一个关于 android 用于 ActionBar 的菜单项的问题，我有一个自定义背景用于我的 actionbar（图片）并在此处的代码中设置它。那段代码工作正常。但是当我尝试添加一个菜单项时，它失败了。

我想要的很简单，我想要一个在屏幕底部显示“将产品另存为收藏”的按钮，例如底部操作栏。但是当我尝试将按钮添加为菜单项时，它不会显示，没有任何变化。

日志告诉我 onCreateOptionsMenu() 方法实际上已执行。有任何想法吗？

这是我想要菜单的活动：

```
package com.x;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.app.LocalActivityManager;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.drawable.BitmapDrawable;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;
import android.widget.TextView;

import com.x.R;
import com.x.products.fragments.*;
import com.x.tasks.ZoekQueryTask;
import com.x.util.Helper;
import com.x.util.UnscaledBitmapLoader;

public class ProductActivity extends Activity {

    private Bundle save;

    /** Called when the activity is first created. */
    @SuppressWarnings("rawtypes")
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.product);

        @SuppressWarnings("deprecation")
        LocalActivityManager manager = new LocalActivityManager(this, false);

        Helper helper = new Helper();
        save = null;
        String id = (String) getIntent().getExtras().get("id");
        String score = (String) getIntent().getExtras().get("score");
        String profileId = (String) getIntent().getExtras().get("profileId");

   //     String id = "138946";
    //    String profileId = "28";
    //    String score = "100%";
        String query  = "SELECT * FROM products WHERE id = "+id;
        ArrayList<HashMap> result = null;

        try {
            ZoekQueryTask zoekQueryTask = new ZoekQueryTask(query);
            result = zoekQueryTask.getResults();
        }

        catch(Exception e) {
            Log.e("Afgevangen error", e.getMessage());
        }

        TabHost tb = (TabHost) findViewById(R.id.tabs);
        manager.dispatchCreate(savedInstanceState);
        tb.setup(manager);

        Intent info = new Intent();
        info.setClass(this, InfoFragment.class);
        info.putExtra("result", result);
        info.putExtra("profileId", profileId);

        TabSpec tsInfo = tb.newTabSpec("info");
        tsInfo.setContent(info);
        tsInfo.setIndicator("info");

        Intent specs = new Intent();
        specs.setClass(this, SpecsFragment.class);
        specs.putExtra("result", result);

        TabSpec tsSpecs = tb.newTabSpec("specs");
        tsSpecs.setContent(specs);
        tsSpecs.setIndicator("specs");

        Intent prijs = new Intent();
        prijs.setClass(this, PrijsFragment.class);
        prijs.putExtra("result", result);

        TabSpec tsPrijs = tb.newTabSpec("Prijs");
        tsPrijs.setContent(prijs);
        tsPrijs.setIndicator("Prijs");

        TabSpec tsFotos = tb.newTabSpec("Fotos");
        tsFotos.setContent(info);
        tsFotos.setIndicator("Fotos");

        tb.addTab(tsInfo); 
        tb.addTab(tsSpecs);
        tb.addTab(tsPrijs);
        tb.addTab(tsFotos);

            final ActionBar actionBar = getActionBar(); 
            actionBar.setDisplayShowHomeEnabled(false);
            actionBar.setDisplayShowTitleEnabled(false);

            Bitmap bm = UnscaledBitmapLoader.loadFromResource(getResources(), R.drawable.logo, null);
            BitmapDrawable background = new BitmapDrawable(this.getResources(), bm);
            background.setTileModeX(android.graphics.Shader.TileMode.CLAMP); 
            actionBar.setBackgroundDrawable(background);

            TextView nameText = (TextView) findViewById(R.id.name);
            TextView scoreText = (TextView) findViewById(R.id.score);

            nameText.setText(result.get(0).get("name").toString());
            scoreText.setText(score);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        Log.i("hallo", "hoi");
        inflater.inflate(R.layout.product_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.save:
                Log.i("menu", "werkt");
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

} 
```

这是菜单 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/save"
          android:title="Opslaan in favorieten" >

    </item>
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:52:56.007

如果您想在操作栏中显示您的菜单项，`android:showAsAction`请在 product_menu.xml 中设置您的菜单项的属性；

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
        android:id="@+id/item1" 
        android:title="Save"
        android:showAsAction="always" />
</menu> 
```

您可以将此属性设置为：

*   房间
*   绝不
*   带文本
*   总是
*   折叠动作视图

我希望这可以帮助你！

史蒂芬

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:59:42.047

我认为你需要解决这个问题：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    Log.i("hallo", "hoi");
    inflater.inflate(R.layout.product_menu, menu);  //  <- this is wrong
    return true;
} 
```

而不是`R.layout.product_menu`，它应该指`R.menu.your_desired_menu`

# rendering - 分布式渲染最佳选择

> ID：10479268
> 
> 赞同：0
> 
> 时间：2012-05-07T08:55:43.983
> 
> 标签：rendering, blender

请推荐一些分布式渲染的好选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:38:20.313

如果您不担心“泄露”专有信息，请尝试使用社区 [http://www.renderfarm.fi/](http://www.renderfarm.fi/)

# php - 如何在数据库中绘制名称

> ID：10479270
> 
> 赞同：1
> 
> 时间：2012-05-07T08:56:13.027
> 
> 标签：php, mysql

我的数据库中有名字，我想为比赛画一个名字。

有人对此有想法吗？

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:58:37.337

像这样的查询可以工作

```
SELECT * FROM `table` WHERE id >= (SELECT FLOOR( MAX(id) * RAND()) FROM `table` ) ORDER BY id LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T08:59:48.867

```
SELECT * FROM table WHERE num_value >= RAND() * (SELECT MAX(num_value) FROM table) LIMIT 1 
```

如果对 num_value 进行了索引，则无论表大小如何，这都会在恒定时间内起作用。一个警告：这假设 num_value 在 0..MAX(num_value) 范围内均匀分布。如果您的数据集严重偏离此假设，您将得到偏斜的结果（某些行会比其他行更频繁地出现）。

# gwt - 接口的 Gwt Editor 框架

> ID：10479276
> 
> 赞同：-1
> 
> 时间：2012-05-07T08:56:30.223
> 
> 标签：gwt, gwt-editors

我正在尝试实现 gwt 编辑器框架。

我创建了一个驱动程序如下：

```
final Driver driver = GWT.create(Driver.class); 
```

ABC 是我的班级，我将 ABC 班级的对象传递给

```
driver.edit(); 
```

功能。

现在我想使用接口而不是类。但是既然我们不能创建一个接口的实例，我该如何继续呢？我们可以在上述情况下使用接口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:59:31.720

编辑器框架永远不会实例化任何东西（当然除了它自己的内部东西），所以使用接口是安全的，就像使用类一样。

试试看，它只是工作。

# multithreading - 在多线程应用程序中使用 MPI

> ID：10479278
> 
> 赞同：1
> 
> 时间：2012-05-07T08:56:41.800
> 
> 标签：multithreading, mpi

我正在尝试在多线程应用程序中使用 MPI。在主线程中，我初始化 MPI 环境并创建一个 Manager 对象。Manager 对象启动两个额外的线程，一个用于接收对象，一个用于 GUI 线程。每当用户单击发送按钮时，都应该将对象发送到相应的等级。有时操作会成功，但在某些情况下我会收到此错误：

```
Unhandled Exception: System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
      at MPI.Unsafe.MPI_Recv(IntPtr buf, Int32 count, Int32 datatype, Int32 source, Int32 tag, Int32 comm, MPI_Status& status)
      at MPI.Communicator.Receive[T](Int32 source, Int32 tag, T& value, CompletedStatus& status)
      at MPI.Communicator.Receive[T](Int32 source, Int32 tag, T& value)
      at MPI.Communicator.Receive[T](Int32 source, Int32 tag) 
```

代码：

```
public Manager(String managerID)
{
        //other actions...
        (new Thread(new ThreadStart(startGUIThread))).Start();
        ReceiverThread = new Thread(new ThreadStart(MachineReceiver));
        ReceiverThread.Start();
}
public void MachineReceiver()
{
        while (IsRunning)
        {
            System.Console.Out.WriteLine("initiated");
            Data data = Communicator.world.Receive<Data>(source, 100);
            System.Console.Out.Write("Received");
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:19:28.823

您是否使用 MPI_Init() 初始化了 MPI？如果是这样，那对于多线程程序来说是错误的。您需要改用 MPI_Init_thread()。见[http://www.mpi-forum.org/docs/mpi-20-html/node165.htm](http://www.mpi-forum.org/docs/mpi-20-html/node165.htm)

# javascript - 警告 Javascript 作为操作的返回响应

> ID：10479283
> 
> 赞同：3
> 
> 时间：2012-05-07T08:57:07.197
> 
> 标签：javascript, asp.net-mvc-3, alert

我该怎么做，例如，我在 users.cshtml 视图中创建一个用户，它验证 ActionResult Create(RegisterModel um) 如果一切正常，我想在 users.cshtml 返回，但总是使用一个 javascript 警报或类似的, 带有来自动作的变量的值。我可以做这个吗？

我有这个在我看来..

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Crear Usuario</legend>

     <div class="editor-label">
        Username:
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.UserName)
        @Html.ValidationMessageFor(model => model.UserName)
    </div>

    <div class="editor-label">
        Password:
    </div>
    <div class="editor-field">
        @Html.PasswordFor(model => model.Password)
        @Html.ValidationMessageFor(model => model.Password)
    </div>

            <div class="editor-label">
        Repite Password:
    </div>
    <div class="editor-field">
        @Html.PasswordFor(model => model.ConfirmPassword)
        @Html.ValidationMessageFor(model => model.ConfirmPassword)
    </div>
    </div>
    <p>
        <input type="submit" value="Crear" />
    </p>
</fieldset> 
```

这在我的控制器动作中..

```
public ActionResult Create(RegisterModel um)
{

    if (um.Password == um.ConfirmPassword)
    {
        // Attempt to register the user
        MembershipCreateStatus createStatus;
        Membership.CreateUser(um.UserName, um.Password, um.Email, um.PasswordAnswer, um.PasswordQuestion, true, null, out createStatus);

        if (createStatus == MembershipCreateStatus.Success)
        {
            var alert = MembershipCreateStatus.Success.ToString();
        }
        else
        {
            ModelState.AddModelError("", ErrorCodeToString(createStatus));

            var alert = ErrorCodeToString(createStatus);
        }
    }
        //HERE IS WHERE I WANT TO RETURN TO /ADMIN/USERS BUT WITH AN ALERT WITH CONTAINING THE VALUE OF alert IN A JAVASCRIPT OR SIMILAR ALERT WINDOW

    return RedirectToAction("Users", "Admin"); ??????? 
```

我可以这样做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T09:48:44.837

您可以`TempData`在重定向到操作之前将消息存储在其中`Users`：

```
TempData["message"] = "some message that you want to display";
return RedirectToAction("Users", "Admin"); 
```

然后在`Users.cshtml`视图内部（由`Users`您重定向到的操作返回）测试此消息的存在并显示`alert`：

```
@if (TempData["message"] != null) {
    <script type="text/javascript">
        alert(@Html.Raw(Json.Encode(TempData["message"])));
    </script>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T16:02:10.743

我试图在同一个视图中显示错误，而不是尝试达林的答案，我尝试了其他类似的[使用](http://forums.asp.net/t/1957583.aspx?Show+alert+from+controller+in+its+View)，`ViewBag`这[通过](https://stackoverflow.com/questions/21089917/how-to-return-partial-view-of-another-controller-by-controller)返回在另一个页面中显示错误`Partial View`

最后我尝试使用`TempData`, 在发布期间维护消息，这里我使用引导程序显示错误

**动作方法：**

```
[HttpPost]
public ActionResult RegDetail(User_table usob, FormCollection col)
{
 // some other code here
if (!sqlReader.HasRows)
{
TempData["message"] = "Contains some message";
return RedirectToAction("Registration");
}
return RedirectToAction("Index");
} 
```

**我的注册视图：**

```
@if (TempData["message"] != null)
{
<link href="~/css/boostrap.css" rel="stylesheet" />
<script src="~/js/boostrap.min.js"></script>

<div class="alert alert-danger">

<a class="close" data-dismiss="alert">&times;</a>

<strong style="width:12px">Error!</strong> Thats wrong code no, try entering correct!

</div>

} 
```

如果您需要使用 Tempdata 进行更多探索，您可以查看Mr.James 使用引导消息解释的地方，希望对某人[有所帮助](http://jameschambers.com/2014/06/day-14-bootstrap-alerts-and-mvc-framework-tempdata/)

# xamarin.ios - PanGestureRecognizer 的有限区域

> ID：10479284
> 
> 赞同：2
> 
> 时间：2012-05-07T08:57:11.283
> 
> 标签：xamarin.ios, uipangesturerecognizer

是否可以为 PanGestureRecognizer 设置边框，使其只能在有限区域/视图中平移图像？

非常感谢 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T04:12:56.340

您可以实现 UIPanGestureRecognizer 的委托方法。检查手势的位置是否在您感兴趣的范围内。对于 should* 方法，您可以返回 false 以取消手势。手势开始后，您可以通过将 State 属性设置为 Cancelled 来取消它。

```
public class GestureView: UIView
{
    RectangleF _bounds;

    public GestureView (RectangleF rect) : base (rect)
    {
        this.BackgroundColor = UIColor.Brown;

        UIPanGestureRecognizer pan = new UIPanGestureRecognizer (this, new Selector ("panViewWithGestureRecognizer:"));
        this.AddGestureRecognizer (pan);
        pan.WeakDelegate = this;
        _bounds = new RectangleF (0,0,200, 100);
    }

    [Export("panViewWithGestureRecognizer:")]
    void PanGestureMoveAround (UIPanGestureRecognizer p)
    {
        if (_bounds.Contains (p.LocationInView (this)))
        {
            Console.WriteLine ("PanGestureMoveAround true");
            return;
        }
        Console.WriteLine ("PanGestureMoveAround false");
        p.State = UIGestureRecognizerState.Cancelled;
        return;
    }

    [Export ("gestureRecognizerShouldBegin:")]
    bool ShouldBegin (UIGestureRecognizer recognizer)
    {
        if (_bounds.Contains (recognizer.LocationInView (recognizer.View)))
        {
            Console.WriteLine ("ShouldBegin true");
            return true;
        }
        Console.WriteLine ("ShouldBegin false");
        return false;
    }

    [Export ("gestureRecognizer:shouldReceiveTouch:")]
    public bool ShouldReceiveTouch (UIGestureRecognizer recognizer, UITouch touch)
    {
        if (_bounds.Contains (touch.LocationInView (recognizer.View)))
        {
            Console.WriteLine ("ShouldReceiveTouch true");
            return true;
        }
        Console.WriteLine ("ShouldReceiveTouch false");
        return false;
    }
} 
```

# java - 自动监控 HTTP 资源

> ID：10479287
> 
> 赞同：1
> 
> 时间：2012-05-07T08:57:24.557
> 
> 标签：java, http, monitoring

我正在构建一个 Java 应用程序，它使用 HTTP 从大量来源收集信息。我正在寻找一个可以帮助我跟踪哪些资源在线、没有响应或响应错误代码的框架。最好还可以检测资源何时再次上线。

这是为了避免轮询未正确响应的服务器。有谁知道有没有这样的框架？我没有找到任何合适的东西。轻量级的选择会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:07:30.717

一般来说，为了在 Java 中使用 HTTP，我可以推荐 Apache 的[HTTPClient](http://hc.apache.org/httpcomponents-client-ga/index.html)库。它有一个很好的文档并且易于使用。

使用[DefaultHttpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DefaultHttpClient.html)类的[execute(...)](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html#execute%28org.apache.http.client.methods.HttpUriRequest%29)方法可以轻松找出资源是否在线。您可以通过检查响应的[状态行](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpResponse.html#getStatusLine%28%29)来找到状态代码。

编辑：如果你使用这个库，你将不得不手工编码你的问题的具体方面：资源的重复轮询和某种基于事件的通知，当资源下降或再次出现时。

但是，我认为这可以很快完成，例如使用计时器。这样，您不必包含额外的框架。HTTPClient 库是相当轻量级的，尽管这当然取决于您对这个词的定义。请注意，它依赖于 HTTPCore、commons-logging 和 commons-codec。

# android - appwidget没有响应用户触摸

> ID：10479292
> 
> 赞同：1
> 
> 时间：2012-05-07T08:57:45.383
> 
> 标签：android

我创建了一个显示数字时钟的简单 appwidget，并为该时钟设置了 PendingIntent。（即）当用户点击 textview 时，拨号盘被打开。它完美地工作。但是，当我打开一些应用程序（例如 Car Home）然后从 Car Home 退出时，我的主屏幕只会闪一下。我的小部件现在进入无响应状态。我不知道我错了。过去 2 天我在谷歌上搜索这个。任何人请帮忙。

**爪哇代码：**

```
 @Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    context.startService(new Intent(UpdateService.ACTION_UPDATE));
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.main);
    Intent dial = new Intent();
    dial.setAction("android.intent.action.DIAL");
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, dial, 0);
    remoteViews.setOnClickPendingIntent(R.id.Time, pendingIntent);
    for (int i = 0; i < appWidgetIds.length; i++) {
        appWidgetManager.updateAppWidget(appWidgetIds[i], remoteViews); 
    }
} 
```

**应用小部件提供者：**

```
<?xml version="1.0" encoding="utf-8"?>

<appwidget-provider
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="150dip" 
    android:minHeight="72dip"
    android:initialLayout="@layout/main" /> 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="#00000000"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true" >
            <TextView
                android:id="@+id/Time"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:singleLine="true"
                android:ellipsize="none"
                android:textSize="56sp"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:shadowColor="#C0000000"
                android:shadowDx="0"
                android:shadowDy="0"
                android:shadowRadius="3.0" />
    </RelativeLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:31:01.097

请尝试您的`AppwidgetManager.updatewidget()`方法。`onupdate``AppWidgetManager`

# c# - SerializationBinder 中泛型类型名称的格式

> ID：10479301
> 
> 赞同：0
> 
> 时间：2012-05-07T08:58:21.140
> 
> 标签：c#, .net, generics, serialization, reflection

如果类型名称发生更改，我正在使用 a`SerializationBinder`绑定到当前类型。因此，我有一个将旧类型名称绑定到新名称的字典。

```
dict.Add("Old.Namespace.OldTypeName", "New.Namespace.NewName"); 
```

我可以使用这本字典来获取`Type BindToType(string assemblyName, string typeName)`. `SerializationBinder`如果这个类型用在泛型类型中，我还必须找到泛型的新类型。[这个答案](https://stackoverflow.com/a/8015241/498298)解释了如何为`List<T>`. 我想知道是否有通用类型名称的标准化格式，以便我可以使用某种正则表达式来获取所有类型的泛型的新类型。

```
public class TypeDictionary
{
    private Dictionary<string, Type> bindings_ =
        new Dictionary<string, Type>();

    public void AddBinding(string oldTypeString, Type newType)
    {
        bindings_.Add(oldTypeString, newType);
    }

    public Type NewType(string oldTypeString)
    {
        // How should this be implemented:
        if (IsGeneric(oldTypeString))
            return NewGenericType(oldTypeString);

        Type newType;
        if (bindings_.TryGetValue(oldTypeString, out newType))
            return newType;
        return null;
    }
 } 
```

到目前为止我见过的大多数字符串都是`List<T>`这样的

```
 Namespace.TypeName`1[[MyAssembly.MyClass, MyAssembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] 
```

只寻找`"[[MyAssembly.MyClass,"`检测通用类型是否可以节省？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:12:41.320

泛型类型的全名包含一个反引号字符 (`)，后跟一个指定类型参数数量的数字，后跟一个包含每个类型参数的方括号（可能在附加的方括号中）。

所以`List<String>`写成

```
 List`1[[String]] 
```

和`Dictionary<String, Object>`喜欢

```
 Dictionary`2[[String],[Object]] 
```

和`Func<String, Object, Guid>`喜欢

```
 Func`3[[String],[Object],[Guid]] 
```

除了为泛型类型提供了完整的命名空间，并且为每个类型参数提供了完整的命名空间、程序集、版本、文化和公钥标记。

另一方面，非泛型类型的全名既不包含反技巧也不包含方括号。也许您可以考虑到这一点来编写您的正则表达式？

PS！如果你使用`oldType.ToString()`而不是`oldType.FullName`你得到一个不包括汇编、文化等的更短的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:22:11.863

大概，您想替换对 的所有引用`MyClass`，无论它们是否是其他类的泛型类型参数。

因此，您只需要在类型名称字符串中的任何位置查找您的类型名称。

如果您替换字典中的所有类型名称，您会得到一个新字符串，您可以将其传递给[Type.GetType(string typeName)](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)。这为您提供了`Type`可以从中返回的新实例`BindToType`。

当您要替换的类型本身是通用的时，它会变得有点棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-29T10:58:27.247

您不需要任何复杂的程序。假设您要反序列化这样的类型名称：

```
System.Collections.Generic.List`1[[Myclass, MyNameSpace, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] 
```

简单地说，处理`AppDomain.AssemblyResolve`事件，然后调用`Type.GetType`具有上述类型名称的方法。它会引发事件，在那里，您可以返回任何您想要的程序集。

# android - 当单击 TabGroupActiviy 中的逐项叠加时，Toast 工作但警报对话框不起作用？

> ID：10479303
> 
> 赞同：0
> 
> 时间：2012-05-07T08:58:30.973
> 
> 标签：android, google-maps

这是我的 NearMe 活动。我想在谷歌地图上做标记。然后有人单击标记或覆盖我想显示一个警报对话框。这是我从 MapGroupActivity 调用的 MapActivity

```
public class NearMeActivity extends MapActivity implements OnClickListener {
    private Button imgbtn_map_filter;
    private MapView mapView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.nearme_layout);

        setMapNOverlay();
        setUI();
        imgbtn_map_filter.setOnClickListener(this);

        final TabGroupActivity parentActivity = (TabGroupActivity) getParent();
        parentActivity.closeAllChildsExceptLastOne();
    }

    private void setUI() {
        imgbtn_map_filter = (Button) findViewById(R.id.btn_map_filter);
    }

    private void setMapNOverlay() {
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.balloon);
        MyItemizedOverlay itemezedOverlay = new MyItemizedOverlay(drawable,
                this);

        GeoPoint point = new GeoPoint(19240000, -99120000);
        OverlayItem overlayitem = new OverlayItem(point, "Holaaaa! !!",
                "Go away");

        itemezedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemezedOverlay);

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btn_map_filter:
            //start activity for result da var onlar incelenecek
            Intent intent = new Intent(getParent(), TestActivity.class);
            TabGroupActivity parentActivity = (TabGroupActivity) getParent();
            parentActivity.startChildActivity ("TestActivity", intent);
            break;
        default:
            break;
        }

    }
} 
```

这是 ItemizedOverlay 类。我正在尝试显示一个警报对话框。

```
public class MyItemizedOverlay extends ItemizedOverlay {
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    Context mContext;
    public MyItemizedOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    //bir Overlay'e dokunduğu zaman olaylar olaylar 
    @Override
    protected boolean onTap(int index) {
        OverlayItem item =mOverlays.get(index);
        AlertDialog.Builder dialog= new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        try{
        dialog.show();
        }catch(Exception el){
           Log.d("Error: ---->" + e.toString)
        }
return super.onTap(index); 
```

}

```
 public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        // ne zaman bir overlay eklesek populate methodunu çalıştırmamız
        // gerekmektedir. Yen bir overlay
        // nesnesi eklemek için
        // populate methodu çalıştığı zaman overlay createItem çalıştıracaktır
        populate();
    }

    // eklenen overlay'in yerini verir.
    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    // eklenen yeni overlayın seize'ını almamız gerekmektedir
    @Override
    public int size() {
        return mOverlays.size();

    }
} 
```

当我写 Toast.makeText(mContext,"Bla bla",Toast.LENght_LONG).show() --> 运行成功但警告对话框构建器在点击方法中不起作用。

**我正在接受此错误：android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@40532be8 无效；您的活动正在运行吗？**

返回 super.onTap(index);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:06:47.810

在 NearMeActivity 中复制此代码，

```
 @Override
protected Dialog onCreateDialog(int id) {

    // TODO Auto-generated method stub

    switch (id) {
        case 0:
            return new AlertDialog.Builder(this).setTitle("Hello").setIcon(
                    R.drawable.ic_launcher).setPositiveButton("Yes",
                    new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog ,
                                int which) {

                            // TODO Auto-generated method stub

                        }
                    }).setCancelable(true).setNegativeButton("Cancel",
                    new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog ,
                                int which) {

                            // TODO Auto-generated method stub

                        }
                    })

            .setOnCancelListener(new OnCancelListener() {

                @Override
                public void onCancel(DialogInterface dialog) {

                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Dismiss",
                            Toast.LENGTH_SHORT).show();
                }

            }).create();

        default:
            break;
    }
    return null;
} 
```

并从 com.google.android.maps.ItemizedOverlay 子类的 onTap 方法调用此方法以显示对话框：

```
 @Override
    protected boolean onTap(int index) {

        // TODO Auto-generated method stub

        switch (index) {
            case 0:
                showDialog(0);
                                    break;
                     }
            } 
```

# sqlite - SQLite 识别缺失的索引

> ID：10479304
> 
> 赞同：4
> 
> 时间：2012-05-07T08:58:31.067
> 
> 标签：sqlite, indexing, identify

您能否告诉我是否可以使用 SQLite 数据库识别选择查询的缺失索引？

或者有什么工具可以提供帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-01T06:07:03.733

使用[EXPLAIN QUERY PLAN](https://www.sqlite.org/eqp.html)命令来识别给定 SQL 查询的缺失索引。例如，以下结果表明您可能需要表 t1 中的 a 的索引。

```
sqlite> EXPLAIN QUERY PLAN SELECT a, b FROM t1 WHERE a=1;
SCAN TABLE t1 
```

如果你有很多 SQL 查询并且想快速识别丢失的索引，我写了一个[工具](https://github.com/RodChen/analyze-sqlite-index)来帮助分析许多 SQL 查询并在重复过程中为你节省大量时间。

# c# - 在图例框中添加垂直滚动（ChartPlotter）WPF

> ID：10479311
> 
> 赞同：1
> 
> 时间：2012-05-07T08:59:05.573
> 
> 标签：c#, wpf, dynamic-data-display

我是 WPF 应用程序的新手。我正在开发一个传感器读取 WPF 应用程序。在此应用程序中，我必须从 170 个传感器中选择传感器。选择传感器后，当我单击查看报告时，图表绘图仪会绘制所选传感器的图形。它对我来说很好。

**问题 ：**

这里由于页面大小限制，我有固定的图形高度。但是当传感器的数量超过图形的高度时，所选传感器的图例会隐藏那些未在图形高度中调整的传感器。我如何将滚动添加到图例框以便用户可以滚动并检查所有传感器图例。

请给出一些想法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:24:01.173

我在网上搜索了很多这个问题，但我没有解决这个问题。所以为了解决这个问题，我按照以下步骤操作。

1.）首先我通过 plotter.LegendVisible = false 使绘图仪图例可见性为假；

2.）其次，我在出现绘图仪图例的图形上添加了一个列表视图控件。

```
 <ListView Height="Auto" HorizontalAlignment="Center" Margin="1100,139,0,0" Name="listview" ItemsSource="{Binding Items}" HorizontalContentAlignment="Stretch" VerticalAlignment="Top" Width="75" Grid.RowSpan="2" MaxHeight="260">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Text}" Foreground="{Binding BackgroundColor}">
                                    </TextBlock>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                            <ListView.BorderBrush>
                                <SolidColorBrush />
                            </ListView.BorderBrush>
                        </ListView> 
```

3.）然后我在后端做一些工作 -

-添加 ItemVM.cs ：

```
 class ItemVM : INotifyPropertyChanged
{
    private string TextValue = String.Empty;
    private Brush BackgroundColorValue = null;

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    public ItemVM(Brush color, string objectData)
    {
        BackgroundColor = color;
        Text = objectData;
    }
    public string Text
    {
        get
        {
            return this.TextValue;
        }

        set
        {
            if (value != this.TextValue)
            {
                this.TextValue = value;
                NotifyPropertyChanged("Text");
            }
        }
    }
    public Brush BackgroundColor
    {
        get
        {
            return this.BackgroundColorValue;
        }

        set
        {
            if (value != this.BackgroundColorValue)
            {
                this.BackgroundColorValue = value;
                NotifyPropertyChanged("BackgroundColor");
            }
        }
    }

} 
```

-在 mainform.xaml.cs 中：

```
 List<ItemVM> Items;
               List<string> lst = new List<string> {"item1","item2","item3" };
               var converter = new System.Windows.Media.BrushConverter();
  Color[] colors = ColorHelper.CreateRandomColors(3);
  Items = new List<ItemVM>();
 for(int i=0;i<lst.count;i++)
 {
 Items.Add(new ItemVM((Brush)converter.ConvertFromString(colors[i].ToString()), SelectedItems[i]));
}
 plotter.LegendVisible = false;
 listview.ItemsSource = Items; 
```

现在我在图表绘图仪上得到了带有滚动和重新生成前景色的图例框也反映了图表线条的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:16:46.280

使用 ScrollViewer：

```
<ScrollViewer Height="whatever your graph height is">
  <ListView>
          ...Dynamically place all your sensors here from your Presenter or code-behind
  </ListView>
</ScrollViewer> 
```

这应该会为您解决。

# android - Android 中的 AsyncTask 和内存不足问题

> ID：10479313
> 
> 赞同：0
> 
> 时间：2012-05-07T08:59:10.427
> 
> 标签：android, asynchronous, bitmap, android-asynctask

根据我的应用程序，首先我将所有图像从我的资源复制到内部存储器，然后在图像向左或向右滑动上，我从内存中获取图像及其索引并将其显示在那里。我正在用 AsynTask 做这件事。在显示大约 10 张图像后，应用程序进入黑屏，并且 log cat 说“外部分配对于这个过程来说太大了”。根据我在这里阅读的内容，我认为问题出在 AsyncTask 上，我无法释放已用于这些任务的内存。我有三个不同的活动，用于将图像显示为图库，并且每个活动都使用 asyncTask 来显示图像。

下面是我的一些代码，任何帮助将不胜感激，在此先感谢。这是我用来根据滑动图像执行图像下载器的 Activity。

```
lid1 = new LocalImageDownloader(imageSwitcher, myContext, path, nameList.get(curIndex) );
            lid1.execute();

            imageSwitcher.setOnTouchListener(new OnTouchListener() {
                public boolean onTouch(View v, MotionEvent event) {

                    if (event.getAction() == MotionEvent.ACTION_DOWN) {
                        downX = (int) event.getX(); 
                        Log.i("event.getX()", " downX " + downX);
                        return true;
                    } 

                    else if (event.getAction() == MotionEvent.ACTION_UP) {
                        upX = (int) event.getX(); 
                        Log.i("event.getX()", " upX " + downX);
                        if (upX - downX > 100) {

                            //curIndex  current image index in array viewed by user
                            curIndex--;
                            if (curIndex < 0) {
                                curIndex = imageList.size()-1;
                            }

                            imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(Activities.this,R.anim.slide_in_left));
                            imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(Activities.this,R.anim.slide_out_right));

                            lid1.cancel(true);
                            lid1 = new LocalImageDownloader(imageSwitcher, myContext, path, nameList.get(curIndex) );
                            lid1.execute();
                        }

                        else if (downX - upX > -100) {

                            curIndex++;
                            if (curIndex == imageList.size() ) {
                                curIndex = 0;
                            }

                            imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(Activities.this,R.anim.slide_in_right));
                            imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(Activities.this,R.anim.slide_out_left));

                            lid1.cancel(true);
                            lid1 = new LocalImageDownloader(imageSwitcher, myContext, path, nameList.get(curIndex) );
                            lid1.execute();
                        }
                        return true;
                    }
                    return false;
                }
            }); 
```

这是我的 AsyncTask 从内存中获取图像，

```
public class LocalImageDownloader extends AsyncTask<String, Void, Bitmap> {

String url;
Drawable d;
Context myContext;

String path;
String fileName;

ProgressDialog dialog;
int REQUIRED_SIZE=600;

private final WeakReference<ImageSwitcher> imageViewReference;

public LocalImageDownloader(ImageSwitcher imageSwitcher,Context myContext, String path, String fileName) {
    this.myContext = myContext;
    this.path = path;
    this.fileName = fileName;
    imageViewReference = new WeakReference<ImageSwitcher>(imageSwitcher);
}

@Override
protected Bitmap doInBackground(String... urls) {
    publishProgress();
    return null;
}

@Override
protected void onPreExecute() {
    dialog = ProgressDialog.show(myContext, "", "Loading Images...", true);
    super.onPreExecute();
}

@Override
protected void onPostExecute(Bitmap result) {

    try {
        if (imageViewReference != null) {
            ImageSwitcher imageSwitcher = imageViewReference.get();
            if (imageSwitcher != null) {
                imageSwitcher.setImageDrawable(getLocalImage());
            }
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    dialog.dismiss();
}

public Drawable getLocalImage() throws IOException {

    File file = new File(path,fileName);

    //Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(new FileInputStream(file),null,o);

    //The new size we want to scale to

    //Find the correct scale value. It should be the power of 2.
    int scale=1;
    while(o.outWidth/scale/2>=this.REQUIRED_SIZE && o.outHeight/scale/2>=this.REQUIRED_SIZE)
        scale*=2;

    //Decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize=scale;
    o.inJustDecodeBounds = false;

    return new BitmapDrawable(BitmapFactory.decodeStream(new FileInputStream(file), null, o2));
}

} 
```

**编辑：** 我已经应用了一些方法来更有效地使用位图，现在我将它们推送到内存中，但我仍然遇到几乎相同的错误。一些图像存储在内存中后，对于一些图像，我会黑屏并出现相同的错误。“此过程的外部分配太大。” 知道怎么做吗？

下面是内存缓存代码，我将 MemoryCache 对象作为参数发送到 AsyncTask。

```
public class MemoryCache {

private static final String TAG = "MemoryCache";
private Map<String, Bitmap> cache=Collections.synchronizedMap(
        new LinkedHashMap<String, Bitmap>(10,1.5f,true));//Last argument true for LRU ordering
private long size=0;//current allocated size
private long limit=1000000;//max memory in bytes

public MemoryCache(){
    //use 50% of available heap size
    setLimit(Runtime.getRuntime().maxMemory()/2);
}

public void setLimit(long new_limit){
    limit=new_limit;
    Log.i(TAG, "MemoryCache will use up to "+limit/1024./1024.+"MB");
}

public Bitmap get(String id){
    try{
        if(!cache.containsKey(id))
            return null;
        //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
        return cache.get(id);
    }catch(NullPointerException ex){
        return null;
    }
}

public void put(String id, Bitmap bitmap){
    try{
        if(cache.containsKey(id))
            size-=getSizeInBytes(cache.get(id));
        cache.put(id, bitmap);
        size+=getSizeInBytes(bitmap);
        checkSize();
    }catch(Throwable th){
        th.printStackTrace();
    }
}

private void checkSize() {
    Log.i(TAG, "cache size="+size+" length="+cache.size());
    if(size>limit){
        Iterator<Entry<String, Bitmap>> iter=cache.entrySet().iterator();//least recently accessed item will be the first one iterated  
        while(iter.hasNext()){
            Entry<String, Bitmap> entry=iter.next();
            size-=getSizeInBytes(entry.getValue());
            iter.remove();
            if(size<=limit)
                break;
        }
        Log.i(TAG, "Clean cache. New size "+cache.size());
    }
}

public void clear() {
    cache.clear();
}

long getSizeInBytes(Bitmap bitmap) {
    if(bitmap==null)
        return 0;
    return bitmap.getRowBytes() * bitmap.getHeight();
}

public boolean contains(String key) {

    if(cache.containsKey(key)) {
        return true;
    }

    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:12:16.497

它与 AsyncTask 无关。您将不得不更有效地使用位图。搜索位图OOM；对您下载的图像进行一些采样。如[这里](https://stackoverflow.com/a/9462901/665561)

同时搜索 Android SoftReference。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:55:22.843

试试这个链接来管理你的位图缓存，有很多解决方案可以防止 outofMemory 异常。[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:21:12.400

我找到了一种方法，现在效果很好，现在我不是通过文件流和位图获取图像，而是通过使用下面的代码设置可绘制对象来做到这一点。至于从互联网下载的图像，任何想做类似事情的人，只需下载图像并将其保存在内部存储器或外部存储器中，然后只需提供图像的路径即可。

```
ImageView imageView = (ImageView) findViewById(R.id.image); 
File filePath = getFileStreamPath(fileName);
imageView.setImageDrawable(Drawable.createFromPath(filePath)); 
```

# google-drive-api - 为 Android 应用程序使用 Google Drive API

> ID：10479314
> 
> 赞同：-3
> 
> 时间：2012-05-07T08:59:13.420
> 
> 标签：google-drive-api

我想在 Android 应用程序上集成 Google Drive。

看起来可以使用 Google Drive API 和 Google Document List API 集成 Google Drive。

集成 Google Drive 是否有任何问题，例如指南或规则？

我从 Branding Guide Line 下载了 Google Drive 图标的资产。可以使用其中的任何图标吗？

是否有任何指南可以将 Google Drive 集成到 Android 应用程序上？

我检查了 Google Drive 的开发者文档。它为 Chrome Web 应用程序描述了它们。我找不到任何有关 Android 应用程序的文档。Android 应用程序的文档和指南何时发布？

我对 Google 云端硬盘政策有一些疑问。我在哪里可以获得这些政策问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:56:51.133

[本文档](https://developers.google.com/drive/branding)中描述了我们的大多数品牌指南，只要您遵循它们，您就可以使用资产和 Drive 品牌。

对于您的政策问题，只需在此处询问。如果他们有法律含义，请发送电子邮件至 legal@google.com，您也可以尝试 policy@google.com

# python - 可以从列表理解中返回两个列表吗？

> ID：10479319
> 
> 赞同：54
> 
> 时间：2012-05-07T08:59:33.170
> 
> 标签：python, list-comprehension

是否可以从列表理解中返回两个列表？好吧，这显然行不通，但是类似于：

```
rr, tt = [i*10, i*12 for i in xrange(4)] 
```

所以`rr`和`tt`都是列表，结果分别来自`i*10`和`i*12`。非常感谢

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-07T09:01:19.457

```
>>> rr,tt = zip(*[(i*10, i*12) for i in xrange(4)])
>>> rr
(0, 10, 20, 30)
>>> tt
(0, 12, 24, 36) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-03-12T10:31:35.760

创建两个理解列表更好（至少对于长列表）。请注意，**最佳投票答案**比传统的 for 循环更慢。***列表推导更快更清晰***。

```
python -m timeit -n 100 -s 'rr=[];tt = [];' 'for i in range(500000): rr.append(i*10);tt.append(i*12)' 
10 loops, best of 3: 123 msec per loop

> python -m timeit -n 100 'rr,tt = zip(*[(i*10, i*12) for i in range(500000)])' 
10 loops, best of 3: 170 msec per loop

> python -m timeit -n 100 'rr = [i*10 for i in range(500000)]; tt = [i*10 for i in range(500000)]' 
10 loops, best of 3: 68.5 msec per loop 
```

很高兴看到列表推导支持一次创建多个列表。

# 然而，

***如果您可以利用传统循环（准确地说是中间计算），***那么您可能会更好地使用循环（或`iterator`/`generator`using`yield`）。这是一个例子：

```
$ python3 -m timeit -n 100 -s 'rr=[];tt=[];' "for i in (range(1000) for x in range(10000)): tmp = list(i); rr.append(min(tmp));tt.append(max(tmp))" 
100 loops, best of 3: 314 msec per loop

$ python3 -m timeit -n 100 "rr=[min(list(i)) for i in (range(1000) for x in range(10000))];tt=[max(list(i)) for i in (range(1000) for x in range(10000))]"
100 loops, best of 3: 413 msec per loop 
```

当然，***这些情况下的比较是不公平的***；在示例中，代码和计算并不等效，因为在传统循环中存储了一个临时结果（参见`tmp`变量）。因此，列表推导执行了更多的内部操作（它计算了两次 tmp 变量！但它只慢了 25%）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-07T09:17:40.950

如果元素是列表，列表推导可能会返回多个列表。例如：

```
>>> x, y = [[] for x in range(2)]
>>> x
[]
>>> y
[]
>>> 
```

函数的技巧`zip`可以完成这项工作，但如果您只是使用循环将结果收集到列表中，实际上会更加简单和易读。

# java - JTextPane：突出显示注释行

> ID：10479320
> 
> 赞同：3
> 
> 时间：2012-05-07T08:59:36.370
> 
> 标签：java, swing, editor, highlight, jtextpane

请看以下三个文件。

```
Form.java 

  package Normal;      

import Keywords.JavaKeywords;    
import java.awt.Color;    
import java.awt.Dimension;    
import java.awt.FlowLayout;    
import java.awt.event.ActionEvent;    
import java.awt.event.ActionListener;    
import java.util.ArrayList;    
import java.util.List;    
import java.util.logging.Level;    
import java.util.logging.Logger;    
import javax.swing.*;    
import javax.swing.text.*;    

    public class Form extends JEditorPane      
    {      
        private JTextPane textPane;      
        private JPanel south;    
        private JScrollPane scroll;      
        private List<String> keywords, literals;     
        private String  content;      
        public String documentType;                
        private Style style, style2;               
        private KeywordConnector java;               
        private DefaultStyledDocument document;          
        int start, end, offset1,length1;         
        private JButton button;             
        JFrame frame;    

        public Form()      
        {      
            super();    
              frame = new JFrame();    

            //Declaring the instance variables      
            textPane = new JTextPane();      
            textPane.setMinimumSize(new Dimension(100,100));      

            button = new JButton("Save");      
            button.addActionListener(new Action());     

            document = (DefaultStyledDocument) textPane.getDocument();        
            document.setDocumentFilter(new HighlightFilter());      

            keywords = new ArrayList();       
            literals = new ArrayList();       

            //Adding Styles      
            style = document.addStyle("blue", null);        
            StyleConstants.setForeground(style, Color.BLUE);                    
            style2 = document.addStyle("red", null);      
            StyleConstants.setForeground(style2, Color.RED);                

            //Creating the main window     
            south = new JPanel();      
            south.setLayout(new FlowLayout());      
            south.add(button);                          
            scroll = new JScrollPane(textPane);      

            frame.getContentPane().add(scroll,"Center");      
            frame.getContentPane().add(south,"South");                  
            frame.setVisible(true);    
            frame.setSize(800,600);    
            frame.validate();    
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);                          
        }     

        private class HighlightFilter extends DocumentFilter       
        {        

        public void insertString(FilterBypass fb, int offset, String string, AttributeSet attr)        
                throws BadLocationException {        
          if (string.isEmpty()) {        
            fb.insertString(offset, string, attr);            

          } else {        
            super.insertString(fb, offset, string, attr);        
             offset1 = offset;    
            length1 = string.length()+offset;    
            System.out.println(string.length());    

            System.out.println("Offset: "+offset1+" Length: "+length1);    
            highlight();        
          }        
        }        

        public void remove(FilterBypass fb, int offset, int length)        
                throws BadLocationException {        
          if (length == 0) {        
            fb.remove(offset, length);        
          } else {        
            super.remove(fb, offset, length);        
            offset1 = offset;    
            length1 = length;    
             System.out.println("Offset: "+offset1+" Length: "+length1);    
            highlight();        
          }        
        }        

        public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs)        
                throws BadLocationException {        
          if (length == 0 && text.isEmpty()) {        
            fb.replace(offset, length, text, attrs);        
          } else {        
            super.replace(fb, offset, length, text, attrs);        
             offset1 = offset;    
            length1 = length;    
             System.out.println("Offset: "+offset1+" Length: "+length1);    
             highlight();      
          }  } }      

        private void highlight()       
        {        
              SwingUtilities.invokeLater(new Runnable()       
              {        
                  int next=0; int end=0;    

                @Override        
                public void run() {        
                  try {        
                        //content = document.getText(0, document.getLength());     

                        int preWord =Utilities.getPreviousWord(textPane, offset1);    

                        if(preWord<0)    
                        {    
                            preWord=preWord*-1;    
                        }    
                        System.out.println("Previous Word: "+preWord);    

                        int wordEnd = Utilities.getWordEnd(textPane, offset1);    

                        System.out.println("Word End: "+wordEnd);    

                       System.out.println("The Text: "+document.getText(preWord,wordEnd-preWord));    

                       content = document.getText(preWord,(wordEnd-preWord)-1);    

                       System.out.println("Length: "+(wordEnd-preWord));    

                    for (String word : content.split("\\s")) {        
                    next = content.indexOf(word, next);        
                     end = next + word.length();        

                     document.setCharacterAttributes(preWord, word.length(),        
                     textPane.getStyle(keywords.contains(word) ? "blue" : literals.contains(word)? "red":"default"),true);        
                     next = end;        
                }        
              } catch (BadLocationException ex) {        
                ex.printStackTrace();        
              }        
            }        
          });        
            }      

        private class Action implements ActionListener      
        {      
            public void actionPerformed(ActionEvent ae)      
            {                     
                java = new JavaKeywords();              
                keywords = java.getKeywords();      
                literals = java.getLiterals();      

                int next=0; int end=0;    
            try {    
                content = document.getText(0, document.getLength());    
            } catch (BadLocationException ex) {    
                Logger.getLogger(Form.class.getName()).log(Level.SEVERE, null, ex);    
            }    

                for (String word : content.split("\\s")) {        
                    next = content.indexOf(word, next);        
                     end = next + word.length();        

                     document.setCharacterAttributes(next, end,        
                     textPane.getStyle(keywords.contains(word) ? "blue" : literals.contains(word)? "red":"default"),true);        
                     next = end;        
                }        
            }      
        }      

       public static void main(String[] args) throws Exception {       
            SwingUtilities.invokeLater(new Runnable()       
            {        
              @Override        
              public void run() {        
               Form f = new Form();      
              }        
            });        
          }       
    } 
```

关键字.java

```
 package Keywords;    

    import Normal.KeywordConnector;    
    import java.util.ArrayList;    
    import java.util.List;    
    import keywords.Literals;    

    public class JavaKeywords implements KeywordConnector     
    {    
        private ArrayList list, literals;    

        public JavaKeywords()    
        {    
            //Default Keywords    
            list = new ArrayList();    

            list.add("abstract");    
            list.add("assert");            
            list.add("break");    
            list.add("byte");    
            list.add("case");    
            list.add("catch");    
            list.add("char");    
            list.add("class");    

            //Literals    
            String string = "String";    

            literals = new ArrayList();    
            literals.add(string);    
            literals.add("bool");    
            literals.add("int");    
            literals.add("Double");    
            literals.add("float");    
            literals.add("char");    
            literals.add("long");    
            literals.add("byte");    

        }    

        @Override    
        public ArrayList getKeywords()    
        {    
            return list;    
        }    

        @Override    
        public List<String> getLiterals()     
        {    
            return literals;    
        }    

        @Override    
        public List getOthers() {    
            throw new UnsupportedOperationException("Not supported yet.");    
        }    

    } 
```

关键字连接器.java

```
package Normal;  
import java.util.List;  

public interface KeywordConnector  
{  
    public List<String> getKeywords();  
    public List<String> getLiterals();  
    public List<String> getOthers();  
} 
```

这里发生的是，当用户单击保存按钮时，程序将搜索 Java 关键字并开始突出显示它们。如您所见，该程序无法突出显示注释行！我正在努力实现这一目标一个多星期。

我可以将 '//' 符号和 '/*' '*' 符号添加到关键字列表中，但是接下来会发生什么，

1.  输入注释行时，我必须检查注释中的字母数。然后只有我可以突出显示所有这些（或者我可以突出显示整行，但你知道它最后的样子）。但是如果我将它添加到关键字中，我就无法做到。

2.  当评论“符号”被删除时，整个彩色评论字母必须更改为“无颜色”

那么，如何添加评论突出显示支持以实现上述两个提及？

请帮我解决这个问题！！谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:59:29.497

将此添加到 Form.actionPerformed(ActionEvent) 方法的末尾

```
Pattern singleLinecommentsPattern = Pattern.compile("\\/\\/.*");
Matcher matcher = singleLinecommentsPattern.matcher(content);

while (matcher.find()) {
    document.setCharacterAttributes(matcher.start(), 
      matcher.end() - matcher.start(), textPane.getStyle("red"), true);
}

Pattern multipleLinecommentsPattern = Pattern.compile("\\/\\*.*?\\*\\/",
                        Pattern.DOTALL);
matcher = multipleLinecommentsPattern.matcher(content);

while (matcher.find()) {
    document.setCharacterAttributes(matcher.start(), 
      matcher.end() - matcher.start(), textPane.getStyle("red"), true);
} 
```

# sql - 为父表中的每一行从子表中选择单行

> ID：10479323
> 
> 赞同：5
> 
> 时间：2012-05-07T08:59:41.083
> 
> 标签：sql, ms-access

我试图从包含子字段的每个父行的子表中只获取一行，我一直在尝试使用 GRUOP BY 但没有成功:(这是我最初的 SELECT

```
SELECT pID, lastname 
 FROM parent 
  LEFT JOIN 
   (SELECT cID, pID, phone, company, title FROM child) as child 
   ON parent.pID = child.pID 
```

这是表格结构

```
CREATE TABLE parent (
    pID Counter(1,1) PRIMARY KEY,
    firstname VarChar(24) DEFAULT '',
    lastname VarChar(20) DEFAULT ''
);

CREATE TABLE child (
    cID Counter(1,1) PRIMARY KEY,
    pID int DEFAULT '0',
    phone VarChar(16) DEFAULT '',
    company VarChar(24) DEFAULT '',
    title VarChar(24) DEFAULT '',
    address TEXT
); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T11:07:11.497

*“对于包含子字段的每个父行，仅从子表中获取一行”*

这听起来像`child`表可以有不止一行相同的`pID`值。而且您只希望`child`每个`pID`.

```
SELECT pID, Min(cID) AS MinOfcID
FROM child
GROUP BY pID; 
```

再次将该`GROUP BY`查询连接回`child`表以检索每个目标值的其他列`cID`。将此查询另存为`qryChild`.

```
SELECT
    c.pID,
    c.cID,
    c.phone,
    c.company,
    c.title,
    c.address
FROM
    (
        SELECT pID, Min(cID) AS MinOfcID
        FROM child
        GROUP BY pID
    ) AS map
    INNER JOIN child AS c
    ON c.cID = map.MinOfcID; 
```

最后，要包含`lastname`值，请将`parent`表连接到`qryChild`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T09:07:29.240

您没有说明您的 DBMS，所以这是一个标准的 ANSI 解决方案：

```
SELECT pID, lastname 
FROM parent 
  LEFT JOIN (
         SELECT pID, 
                row_number() over (partition by pid order by cid) as rn
         FROM child
         ) as child 
         ON parent.pID = child.pID and child.rn = 1 
```

您将哪些行定义为“第一”行取决于您。除非您对行进行排序，否则没有诸如“第一”行之类的行 - 这就是该部分`order by cid`在分区子句中所做的事情。因此，如果您想要与“第一”行不同的东西，则需要对其进行更改。

顺便说一句：如果您不使用子表，则无需从子表中选择所有列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:04:47.283

你必须更换

```
SELECT cID, pID, phone, company, title FROM child 
```

每个pid只返回一行。正确的选择取决于您的要求。简单的是`group by`：

```
SELECT min(cID), pID, min(phone), min(company), min(title) FROM child group by cID 
```

但是不同的列将来自不同的行，因此您可能想要“第一行”之类的内容，这取决于您使用的 RDBMS，因此请将该信息添加到您的问题中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T09:11:54.990

```
SELECT cID ChildID, 
       pID ParentID, 
       phone, 
       company, 
       title, 
       (SELECT lastname FROM parent WHERE id = ParentID) as LastName
FROM child
GROUP BY ParentID 
```

# android - android中的JSON解析-来自资源文件夹

> ID：10479328
> 
> 赞同：14
> 
> 时间：2012-05-07T09:00:12.047
> 
> 标签：android, json

我在 Eclipse的**res/raw文件夹中保留了一个文本文件。**我在这里显示该文件的内容：

```
{
    "Categories": {
        "Category": [
            {
                "cat_id": "3",
                "cat_name": "test"
            },
            {
                "cat_id": "4",
                "cat_name": "test1"
            },
            {
                "cat_id": "5",
                "cat_name": "test2"
            },
            {
                "cat_id": "6",
                "cat_name": "test3"
            }
        ]
    }
} 
```

我想解析这个 JSON 数组。我怎样才能做到这一点？

有人可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-07T09:25:01.570

```
//Get Data From Text Resource File Contains Json Data.    
InputStream inputStream = getResources().openRawResource(R.raw.json);
ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

int ctr;
try {
    ctr = inputStream.read();
    while (ctr != -1) {
        byteArrayOutputStream.write(ctr);
        ctr = inputStream.read();
    }
    inputStream.close();
} catch (IOException e) {
    e.printStackTrace();
}
Log.v("Text Data", byteArrayOutputStream.toString());
try {
    // Parse the data into jsonobject to get original data in form of json.
    JSONObject jObject = new JSONObject(
            byteArrayOutputStream.toString());
    JSONObject jObjectResult = jObject.getJSONObject("Categories");
    JSONArray jArray = jObjectResult.getJSONArray("Category");
    String cat_Id = "";
    String cat_name = "";
    ArrayList<String[]> data = new ArrayList<String[]>();
    for (int i = 0; i < jArray.length(); i++) {
        cat_Id = jArray.getJSONObject(i).getString("cat_id");
        cat_name = jArray.getJSONObject(i).getString("cat_name");
        Log.v("Cat ID", cat_Id);
        Log.v("Cat Name", cat_name);
        data.add(new String[] { cat_Id, cat_name });
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:10:32.890

这是你的代码：

```
String fileContent;
            JSONObject jobj = new JSONObject(fileContent);
            JSONObject categories = jobj.getJSONObject("Categories");
            JSONArray listCategory = categories.getJSONArray("Category");
            for( int i = 0; i < listCategory.length(); i++ ) {
                JSONObject entry = listCategory.getJSONObject(i);
                //DO STUFF
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-07T12:40:17.617

Android框架[在android.util包中有一个助手](http://developer.android.com/intl/ru/reference/android/util/JsonReader.html)[**JsonReader**](http://developer.android.com/intl/ru/reference/android/util/JsonReader.html)

像魅力一样工作，提供了很好的例子。在缺少方括号“}”的第一个块中出现小错误：

```
public List readJsonStream(InputStream in) throws IOException {
     JsonReader reader = new JsonReader(new InputStreamReader(in, "UTF-8"));
     try {
       return readMessagesArray(reader);
     } finally {
       reader.close();
     }
} 
```

还存在来自 google-devs **GSON**的优秀库，它使您可以将 json 结构直接映射到 Java 模型：看看[这里](https://github.com/google/gson)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T09:10:13.140

1.  把它读成一个`String`
2.  `JSONArray`用检索到的创建一个`String`
3.  使用 get() 方法检索其数据

# c# - 获取通过 json 从 Controller 作为 Hashtable 接收的 javascript 中的对象属性值

> ID：10479330
> 
> 赞同：3
> 
> 时间：2012-05-07T09:00:22.047
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3

我在这里阅读了一些如何从对象获取属性值的主题。

就我而言，我在控制器中有一些东西：

```
[HttpPost]
public ActionResult GetSomething() {

return Json( new {
     data = AModel.Get()
     }, JsonRequestBehavior.AllowGet );

} 
```

在模型中：

```
public static List<Hashtable> Get() {
    List<Hashtable> list = new List<Hashtable>( 0 );
    Hashtable table = new Hashtable();
    table.Add( "ITEM_1", "Value1" );
    table.Add( "ITEM_2", "Value 32" );
    list.Add( table );

    table = new Hashtable();
    table.Add( "ITEM_1", "Value22" );
    table.Add( "ITEM_2", "Other" );
    list.Add( table );

   return list;
} 
```

在 Javascript 中：

```
var test;
 $.ajax({
    type: "post",
    url: "Action/Controller",
    data: {},
    dataType: "json",
    async: false,
    success: function (data) {
            test = data.data;
         },
    complete: function () {
            console.log(test);              
 }); 
```

我进入控制台，如下图所示：

![在此处输入图像描述](../Images/866f641e305f4a8c4dff72e6b0d6db16.png)

我想获得财产的价值`ITEM_1`和结果：Value1，Value22。

我试过了

```
for(var key in test) {
console.log(test[key].ITEM_1);
//console.log(test[key].ITEM1);
} 
```

但它不起作用。

当然，我将`ITEM_1`键重命名为`ITEM1`（在模型中）但结果相同：`undefined`但在控制台中我看到了所有对象的值。

![在此处输入图像描述](../Images/a3bca2de2c85f3115ec15f7d55057254.png)

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:02:58.990

`test`是一个数组而不是一个对象。遍历数组，如：

```
var testLength = test.length;            //caching length, performance benefit
    i, item1;

for(i=0;i<testLength;i++){
    item1 = test[i].Properties.ITEM1;
} 
```

# visual-studio - '/fp:fast' 和 '/Za' 不兼容 Visual C++

> ID：10479331
> 
> 赞同：4
> 
> 时间：2012-05-07T09:00:25.183
> 
> 标签：visual-studio, visual-c++, compiler-options

我在 Visual 2008 SP1 中遇到问题。

编译器产生：

> '/fp:fast' 和 '/Za' 不兼容

问题是我没有在属性中使用 /Za .. 所以我不明白为什么在未设置选项时会发生冲突。

这是我的项目属性中生成的命令行：

```
/Od /I "..\..\..\..\..\tools\gsoap-soapcpp-2.7.6\src" /I "..\..\..\..\..\platform\vs2008\win32\gsoap-soapcpp-2.7.6\src"   
/D "WIN32" /D "_DEBUG" /D   
"_CONSOLE" /D "YY_NO_UNISTD_H" /D "_WIN32_WCE=0x700" /D "UNDER_CE" /D "WINCE" /D   
"DEBUG" /D "ARM" /D "_ARM_" /D "_UNICODE" /D "UNICODE" /Gm /EHsc /MTd /fp:fast /GR-   
/Fo"Freescale i.MX53 QSB - WEC7 (ARMv4I)\Debug IMX53/" /Fd"Freescale i.MX53 QSB - WEC7   
(ARMv4I)\Debug IMX53/vc80.pdb" /W3 /nologo /c /TP /wd4996 
```

如您所见，设置了 /fp:fast 但未设置 /Za。

是否有另一种可能间接引用 /Za 的选项？

在深入挖掘之后，我意识到 BuildLog.htm 文件在说：

```
Creating temporary file "(...)\Freescale i.MX53 QSB - WEC7 (ARMv4I)\Debug IMX53\RSP00000341365424.rsp" with content  

[{CORRECT COMMAND LINE}

{list of source files paths}
]  

Creating command line "cl.exe @"(...)\Freescale i.MX53 QSB - WEC7 (ARMv4I)\Debug IMX53\RSP00000341365424.rsp" /nologo"
Creating temporary file "(...)\Freescale i.MX53 QSB - WEC7 (ARMv4I)\Debug IMX53\RSP00000441365424.rsp" with content
[  
{WRONG COMMAND LINE containing /Za}  
{list of source files paths}
]
Creating command line "cl.exe @"(...)\Freescale i.MX53 QSB - WEC7 (ARMv4I)\Debug IMX53\RSP00000441365424.rsp"/nologo" 
```

您知道为什么会创建第二个临时文件吗？我的项目中是否有我必须修复的属性？

[编辑] 感谢汉斯，我找到了问题所在。我在项目中的一个文件有一个不同的编译器选项，我不知道是哪个导致了问题。由于 buildlog.htm 文件，我找到了它是哪一个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:33:52.857

多次看到编译器启动是对问题根源的强烈暗示。您可能在项目中有一些单独打开 /Za 的源代码文件。一个快速的解决方法是使用 Shift+Click 选择项目中的所有文件并重置该选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-14T08:22:01.193

在 Visual Studio 2008 中，项目 -> 属性 -> 配置属性 -> C/C++ -> 语言，将“禁用语言扩展”从“是(/Za)”更改为“否”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:55:35.940

我的猜测是您在 VS2008 中使用了错误版本的 WinCE - 您似乎在这里为 ARM 编译，是吗？`vc80.pdb`VS2005 老式符号文件表面上的引用引起了我的怀疑。也许这是您要移植的 VS2005 项目？

[这里](https://stackoverflow.com/questions/7467546/how-to-set-preprocessor-defination-of-win32-wce-in-vs08)的问题表明您不应该手动定义`_WIN32_WCE`，您可以尝试它提供的建议，以便将其与正确的 Platform SDK 定义相关联。

# android - Android Ftp 从设备到服务器的文件

> ID：10479333
> 
> 赞同：1
> 
> 时间：2012-05-07T09:00:33.467
> 
> 标签：android, ftp, noclassdeffounderror

我想将文件从设备发送到 ftp 服务器。我正在使用模拟器 Api 级别 15 Android 4.0.3

我试过这个教程： [http ://androiddev.orkitra.com/?p=28&cpage=2#comment-40](http://androiddev.orkitra.com/?p=28&cpage=2#comment-40)

但我不断收到“无法连接”

谁能帮助我了解如何使用它，或者帮助我以不同的方式连接？

# ruby-on-rails-3 - Rails SSL 仅在一个特定路径上

> ID：10479338
> 
> 赞同：3
> 
> 时间：2012-05-07T09:01:01.627
> 
> 标签：ruby-on-rails-3, ssl

我正在尝试在一个特定路径上启用 rails SSL。网站的其余部分应以 http 呈现。

这种连接也是在 rails 服务器和安卓设备之间建立的。android 设备应该使用自己创建的证书在 SSL 中发送他的信息。

这在 Rails 中是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:22:39.870

您应该尝试[ssl_requirement](https://github.com/bartt/ssl_requirement) gem。它使特定操作能够在 SSL 下运行。

# python - 请求分支时对 SVN ROOT 的 pysvn 请求

> ID：10479339
> 
> 赞同：0
> 
> 时间：2012-05-07T09:01:07.557
> 
> 标签：python, svn, pysvn

问题：当使用 pysvn.Client 更新分支 (http://svn.exemple.com/root/workspace/branch) 时，它请求 svn root(http://svn.exemple.com/root)，并收到值得ClientError（403 禁止）。

它发生在 linux-2.6(redhat-5.6-Final) 上，当我在 Windows 7 上测试时，代码运行良好。

像这样的代码：

```
def _initClient(self):
    self._client = pysvn.Client()
    self._client.exception_style = 1
    self._client.set_default_username(self.configObj.SVN_USER)
    self._client.set_default_password(self.configObj.SVN_PASSWD)
    try:
        self.cur_revision_number = self._client.info(self._workcopy)["revision"].number
    except pysvn.ClientError:
        self.cur_revision_number = self._client.checkout(self.configObj.SVN_SERVER,self._workcopy).number

def update(self, pathname=None, **kwargs):
    '''
    Update workcopy

    Extra kwargs are:
        recurse=True,
        revision=version("head"),
        ignore_externals=False,
        depth=depth
    '''

    if not pathname:
        path = self._workcopy
    elif os.path.isabs(pathname):
        path = pathname
        if self._workcopy not in path:
            raise ValueError("Unkown workcopy \"%s\"" % pathname)
    else:
        path = os.path.join(self._workcopy, pathname)

    self.cur_revision_number = self._client.update(
            path, **kwargs
        )[-1].number 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:12:05.943

我发现文件导致了这个问题：
media/portal/images/favicon.ico with svn version: 1.6.11 pysvn version: 1.7.6

它可能被 Apache 重定向到 /favicon.ico。

# html - Bash：发送带有附件的 HTML？

> ID：10479340
> 
> 赞同：0
> 
> 时间：2012-05-07T09:01:13.203
> 
> 标签：html, linux, bash, email, attachment

我正在寻找一种从 bash 发送带有附件的 HTML 电子邮件的方法。我已经尝试了以下行，但它不能 100% 工作。以下行发送了一封 HTML 电子邮件，但没有附加文件：

```
( cat body.html ; uuencode in-attachfile.txt out-attachfile.txt ) | mail -s "$(echo -e "my subject\nContent-Type: text/html")" foo@example.com 
```

如果我删除`Content-Type: text/html`以表明这是一封 HTML 电子邮件，则附件有效：

```
( cat body.html ; uuencode in-attachfile.txt out-attachfile.txt ) | mail -s "$(echo -e "my subject")" foo@example.com 
```

我怎么能两者兼得？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:32:16.260

尝试这个：

```
( cat body.html; uuencode in-attachfile.txt out-attachfile.txt ) | mail -s "my subject" -a "Content-Type: text/html" foo@example.com 
```

您可能希望使用 MIME 发送附件（例如，通过 mutt）。有关更多信息，请参阅[此](http://www.shelldorado.com/articles/mailattachments.html)。

# objective-c - TableView：didSelectRowAtIndexPath，如何捕获行名

> ID：10479341
> 
> 赞同：-1
> 
> 时间：2012-05-07T09:01:15.387
> 
> 标签：objective-c, ios, uitableview

我用随机数据填充我的 tableView。所以我不知道我有多少行以及如何将它重定向到我想要的屏幕。我填满了：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyClass *currentScreenElement = [self.tableRows objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:currentScreenElement.objectName];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:currentScreenElement.objectName];

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    }

    cell.textLabel.text = currentScreenElement.objectName;

    return cell;
} 
```

这很好用。我有一个填充行的 tableView。现在我想重定向到新屏幕，我这样做：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NewScreenClass *myScreen = [[NewScreenClass alloc] init];

    self.detailViewController = [[CreateView alloc] initWithScreenDef:[myScreen returnScreenFromName:@"second"]];

    [self.navigationController pushViewController:self.detailViewController animated:YES];

} 
```

当然我知道我实际上在这里所做的是为每一行创建相同的屏幕。但是我怎样才能重定向到我想要的屏幕？我的`currentScreenElement`对象包含属性：`objectName`（tableView 中的显示名称）和`objectTarget`（屏幕定义）。两者都是 NSString。

我的问题是我应该以某种方式将我的 currentScreenElement 保存到行补丁，或者我应该从显示名称中捕获一个 objectName 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:07:40.920

在 didSelectRowAtIndexPath 中，您可以使用

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath]; 
```

然后从单元格中获取文本。

```
cell.textLabel.text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:14:41.973

为什么不能再次使用 self.tableRows 数组？

```
MyClass *currentScreenElement = [self.tableRows objectAtIndex:indexPath.row];
NSString *title = [currentScreenElement objectName]; 
```

这与您设置该行所做的相同，只需再次使用它。

# ruby - 在 simple_aws 中使用 get_metric_statistics 使用 ruby

> ID：10479344
> 
> 赞同：1
> 
> 时间：2012-05-07T09:01:19.447
> 
> 标签：ruby, amazon-web-services, amazon-cloudwatch, cloudwatch

我正在尝试探索 simple_aws gem。当我连接到 cloudwatch 以获取指标统计信息时，我收到如下错误：

```
cw.get_metric_statistics(
 :metric_name => metric_name,
 :period => period,
 :start_time => start_time,
 :end_time => end_time,
 :statistics => "Average",
 :namespace => "AWS/EC2"
) 
```

* * *

```
SimpleAWS::UnsuccessfulResponse: MissingParameter (400):

   The parameter Namespace is required.
   The parameter MetricName is required.  
   The parameter StartTime is required.  
   The parameter EndTime is required.  
   The parameter Period is required.  
   The parameter Statistics is required. 
```

后来，我尝试了这个：

```
cw.get_metric_statistics(
options => [
  {:metric_name=>"CPUUtilization",
   :period=>60,
   :start_time => Time.now()-86400,
   :end_time => Time.now()-3600,
   :statistics => "Average"
  }
]
) 
```

但出现以下错误：

```
URI::InvalidComponentError: bad component(expected query component): 

Action=GetMetricStatistics&{:metric_name=>"CPUUtilization"}.1.metric_name=CPUUtilization&{:metric_name=>"CPUUtilization"}.1.period=60&{:metric_name=>"CPUUtilization"}.1.start_time=2012-05-06%2014%3A25%3A28%20%2B0530&{:metric_name=>"CPUUtilization"}.1.end_time=2012-05-07%2013%3A25%3A28%20%2B0530&{:metric_name=>"CPUUtilization"}.1.statistics=Average&AWSAccessKeyId=AccessKey&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-05-07T08%3A55%3A28Z&Version=2010-08-01&Signature=Signature 
```

再试一次：

```
cw.get_metric_statistics(
namespace: 'AWS/EC2',
measure_name: 'CPUUtilization',
statistics: 'Average',
start_time: time-1000,
dimensions: "InstanceId=#{instance_id}" 
```

## )

ArgumentError：Array 与 Array 的比较失败

任何人都可以帮助找到发出此命令的正确语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-15T07:10:16.273

```
result = cw.get_metric_statistics(step,
      start_time,
      end_time,
      metric,
      'AWS/RDS',
      'Average',
      dimensions={'DBInstanceIdentifier': [indentifier]}) 
```

这也对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T23:53:48.060

我发现这行得通；

```
lat = cw.get_metric_statistics(
  'MetricName' => 'Latency',
  'Period' => 60,
  'StartTime' => (Time.now() - 3600).iso8601,
  'EndTime' => Time.now().iso8601,
  'Statistics.member.1' => "Average",
  'Namespace' => "AWS/ELB",
  'Unit' => 'Seconds'
) 
```

首先需要ISO8601格式的日期时间，其次需要正确大小写参数，第三需要Unit参数，最后Statistics需要一个命名空间（？）。

希望这会有所帮助，即使它有点晚了。

# c# - 使用 API 管理 i18n 的良好做法是什么？

> ID：10479348
> 
> 赞同：2
> 
> 时间：2012-05-07T09:02:01.567
> 
> 标签：c#, .net, internationalization

我创建了一个小型助手框架，我希望它是多语言的。所以我使用这些`.resx`文件进行翻译。

但是，当我的框架用于拥有自己的应用程序时，我担心卫星 dll 会变得一团糟`.resx`。

所以我想知道避免*资源地狱的最佳实践*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:58:25.590

最佳做法是遵循 Microsoft 指南。因此 *.resx 文件，或者更准确地说是 Satellite Assemblies 正是您应该使用的。

然而，这种方法的问题在于您如何处理依赖关系。据我了解，您不想用其他库污染磁盘。因此，您希望您的客户只安装所需的文件而不安装其他文件。

好消息是，您可以做到这一点，并且您仍然可以使用卫星组件。您所要做的就是将程序集打包到您的 DLL 中并覆盖程序集解析事件，以便它将使用内部文件而不是在磁盘上搜索它。然而，所有的优点也是缺点。当您这样做时，您的客户将不得不安装一个文件（相当大的一个），但他们将被迫从您提供的语言中进行选择。他们将来无法删减任何内容，也无法添加其他语言。

我希望你现在明白为什么 Satellite Assembly 方法是最好的解决方案——它可以让你控制本地化过程。没有更好的处理方法，抱歉。
顺便提一句。DLL 地狱与不同客户端所需的同一库的多个版本有关。在你的情况下不会发生。当然，额外的文件意味着额外的安装程序条目，但人们创造合并模块的概念是有原因的。我不会为此担心太多，我只会提供框架作为合并模块，并让人们自己定制它，如果他们真的必须这样做的话。

# python - Python 错误，'bool' 类型不可调用

> ID：10479351
> 
> 赞同：1
> 
> 时间：2012-05-07T09:02:22.233
> 
> 标签：python, plot, matplotlib, boolean

我在 Python 中有很长的代码，所以我不能在这里全部写出来。无论如何，问题是我正在使用`semilogx`命令在代码中绘制一个函数，并且一切正常。但是，如果我切换到`plot`命令，我会收到此错误：

TypeError：'bool' 对象不可调用

您认为可能导致问题的原因是什么？

似乎我在代码中使用 plot 命令的任何地方都会遇到相同的错误。我尝试绘制我在代码中使用的第一个变量：

```
 f=loadtxt(folder_out+"stars/stars"+str(output)+".txt",skiprows=2)
 ids=f[:,0]
 mass_star=f[:,1] # mass in Msun
 x=f[:,2]
 y=f[:,3]
 z=f[:,4]
 age=f[:,5] # age in Myr

 plot(x,y,'.') 
```

最后一行给了我错误。我确定我从文件中读取了变量，它们具有相同的尺寸。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T09:37:41.187

您的错误表明这`plot`不是您认为的函数，而是一个`bool`（即。`True`or `False`，布尔表达式的结果）。这可能有几个原因：

*   您将 a 显式分配给`bool`名为的变量`plot`（可能在循环中 - 请记住`if`Python 中的循环和语句不会创建新范围）
*   您有一堆`from whatever import *`语句，其中一个导入了一个名称，该名称`plot`正在破坏该名称`pylab`（它甚至可能是`from whatever import plot`您没有注意到的）

您可以尝试通过简单的文本搜索来缩小范围，`plot`看看您是否明确地这样做。您还可以删除导入并删除您的脚本，直到它按预期工作，并尝试识别有问题的行。

# blackberry - 如何在黑莓中找到应用程序的启动和关闭时间戳？

> ID：10479352
> 
> 赞同：0
> 
> 时间：2012-05-07T09:02:27.913
> 
> 标签：blackberry

我需要在黑莓中获取任何应用程序的启动和关闭时间。我怎么能这样做？

# machine-learning - 梯度下降似乎失败了

> ID：10479353
> 
> 赞同：27
> 
> 时间：2012-05-07T09:02:28.693
> 
> 标签：machine-learning, octave, gradient-descent

我实现了梯度下降算法来最小化成本函数，以获得确定图像是否具有良好质量的假设。我在 Octave 中做到了。这个想法在某种程度上基于Andrew Ng的[机器学习课程中的算法](https://class.coursera.org/ml/lecture/)

因此，我有 880 个值“y”，其中包含从 0.5 到 ~12 的值。我在“X”中有 50 到 300 的 880 个值，应该可以预测图像的质量。

遗憾的是，该算法似乎失败了，经过一些迭代后，theta 的值非常小，以至于 theta0 和 theta1 变为“NaN”。我的线性回归曲线有奇怪的值......

这是梯度下降算法的代码： ( `theta = zeros(2, 1);`, alpha= 0.01, iterations=1500)

```
function [theta, J_history] = gradientDescent(X, y, theta, alpha, num_iters)

m = length(y); % number of training examples
J_history = zeros(num_iters, 1);

for iter = 1:num_iters

    tmp_j1=0;
for i=1:m, 
    tmp_j1 = tmp_j1+ ((theta (1,1) + theta (2,1)*X(i,2)) - y(i));
end

    tmp_j2=0;
for i=1:m, 
    tmp_j2 = tmp_j2+ (((theta (1,1) + theta (2,1)*X(i,2)) - y(i)) *X(i,2)); 
end

    tmp1= theta(1,1) - (alpha *  ((1/m) * tmp_j1))  
    tmp2= theta(2,1) - (alpha *  ((1/m) * tmp_j2))  

    theta(1,1)=tmp1
    theta(2,1)=tmp2

    % ============================================================

    % Save the cost J in every iteration    
    J_history(iter) = computeCost(X, y, theta);
end
end 
```

这是成本函数的计算：

```
function J = computeCost(X, y, theta)   %

m = length(y); % number of training examples
J = 0;
tmp=0;
for i=1:m, 
    tmp = tmp+ (theta (1,1) + theta (2,1)*X(i,2) - y(i))^2; %differenzberechnung
end
J= (1/(2*m)) * tmp
end 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2017-02-19T18:02:24.433

如果您想知道如何将看似复杂的`for`循环**向量化**并压缩为单行表达式，请继续阅读。向量化形式为：

`theta = theta - (alpha/m) * (X' * (X * theta - y))`

下面给出了我们如何使用梯度下降算法得到这个向量化表达式的详细解释：

这是微调 θ 值的梯度下降算法： [![在此处输入图像描述](../Images/fc9822065fa0a03ec4c5794fe98424e8.png)](https://i.stack.imgur.com/kFsJC.png)

假设给定以下 X、y 和 θ 值：

*   m = 训练示例数
*   n = 特征数 + 1

[![在此处输入图像描述](../Images/758e3af71ac83b3727c7260aa6d18f77.png)](https://i.stack.imgur.com/Cdilc.png)

这里

*   m = 5（训练示例）
*   n = 4（特征+1）
*   X = mxn 矩阵
*   y = mx 1 向量矩阵
*   θ = nx 1 向量矩阵
*   x ^i是第 i^个训练样例
*   x [j]是给定训练示例中的第 j^(个特征)

更远，

*   `h(x) = ([X] * [θ])`（我们训练集的预测值的 mx 1 矩阵）
*   `h(x)-y = ([X] * [θ] - [y])`（mx 1 我们预测中的错误矩阵）

*机器学习的整个目标是最小化预测中的错误。*基于以上推论，我们的Errors矩阵是`m x 1`向量矩阵，如下：

[![在此处输入图像描述](../Images/f9f70076e5fea7c050c3492aa4d04217.png)](https://i.stack.imgur.com/W8ath.png)

**要计算 θ [j]的新值，我们必须得到所有误差的总和（m 行）乘以训练集 X 的第 j^个**特征值。也就是说，取 E 中的所有值，将它们分别与第 j^个特征相乘**对应**的训练样例，并将它们加在一起。这将帮助我们获得 θ [j]的新值（希望是更好的） 。对所有 j 或特征数量重复此过程。在矩阵形式中，这可以写成：

[![在此处输入图像描述](../Images/01a94573a25acfb32ddec06945d8aa1a.png)](https://i.stack.imgur.com/hqhDl.png)

这可以简化为： [![在此处输入图像描述](../Images/5ae26f8eb02ac99e72a5fd16f0374f1a.png)](https://i.stack.imgur.com/TZ96A.png)

*   `[E]' x [X]`会给我们一个行向量矩阵，因为 E' 是 1 xm 矩阵，X 是 mxn 矩阵。但是我们有兴趣得到一个列矩阵，因此我们转置了结果矩阵。

更简洁地说，它可以写成： [![在此处输入图像描述](../Images/427034a8304d899b5a1205bf4dda9d15.png)](https://i.stack.imgur.com/pzwQL.png)

因为`(A * B)' = (B' * A')`, 和`A'' = A`, 我们也可以把上面写成

[![在此处输入图像描述](../Images/a39dd73c200150aff38df9bda9ff3eaf.png)](https://i.stack.imgur.com/z0xA3.png)

这是我们开始使用的原始表达式：

```
theta = theta - (alpha/m) * (X' * (X * theta - y)) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-28T18:50:30.670

我矢量化了 theta 的东西......可能可以帮助某人

```
theta = theta - (alpha/m *  (X * theta-y)' * X)'; 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-05-07T17:32:58.677

我认为你的`computeCost`功能是错误的。我去年参加了 NG 的课程，我有以下实现（矢量化）：

```
m = length(y);
J = 0;
predictions = X * theta;
sqrErrors = (predictions-y).^2;

J = 1/(2*m) * sum(sqrErrors); 
```

其余的实现对我来说似乎很好，尽管您也可以对它们进行矢量化。

```
theta_1 = theta(1) - alpha * (1/m) * sum((X*theta-y).*X(:,1));
theta_2 = theta(2) - alpha * (1/m) * sum((X*theta-y).*X(:,2)); 
```

之后，您将临时 theta（此处称为 theta_1 和 theta_2）正确设置回“真实”theta。

通常，矢量化而不是循环更有用，阅读和调试也不那么烦人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-29T14:53:54.383

如果您可以使用最小二乘成本函数，那么您可以尝试使用正规方程而不是梯度下降。它要简单得多——只有一行——而且计算速度更快。

这是正规方程： http: [//mathworld.wolfram.com/NormalEquation.html](http://mathworld.wolfram.com/NormalEquation.html)

并以八度音阶形式：

```
theta = (pinv(X' * X )) * X' * y 
```

这是一个解释如何使用正规方程的教程：[http ://www.lauradhamilton.com/tutorial-linear-regression-with-octave](http://www.lauradhamilton.com/tutorial-linear-regression-with-octave)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-02T07:29:58.150

虽然不像矢量化版本那样可扩展，但基于循环的梯度下降计算应该会产生相同的结果。在上面的示例中，梯度下降最有可能无法计算出正确的 theta 的情况是 alpha 的值。

使用一组经过验证的成本和梯度下降函数以及一组与问题中描述的数据相似的数据，`alpha = 0.01`如果 然而，当设置为 时`alpha = 0.000001`，梯度下降按预期工作，即使经过 100 次迭代。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-16T12:43:44.990

此处仅使用向量是 Mathematica 中具有梯度下降的 LR 的紧凑实现：

```
Theta = {0, 0}
alpha = 0.0001;
iteration = 1500;
Jhist = Table[0, {i, iteration}];
Table[  
  Theta = Theta - 
  alpha * Dot[Transpose[X], (Dot[X, Theta] - Y)]/m; 
  Jhist[[k]] = 
  Total[ (Dot[X, Theta] - Y[[All]])^2]/(2*m); Theta, {k, iteration}] 
```

注意：当然假设 X 是一个 * 2 矩阵，其中 X[[,1]] 仅包含 1s'

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-13T14:06:26.103

这应该工作： -

```
theta(1,1) = theta(1,1) - (alpha*(1/m))*((X*theta - y)'* X(:,1) ); 

theta(2,1) = theta(2,1) - (alpha*(1/m))*((X*theta - y)'* X(:,2) ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-18T09:06:15.747

这样更干净，也矢量化了

```
predictions = X * theta;
errorsVector = predictions - y;
theta = theta - (alpha/m) * (X' * errorsVector); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-12T16:46:40.860

如果您还记得梯度下降形式机器学习课程的第一个 Pdf 文件，那么您会注意学习率。这是来自上述pdf的注释。

实施说明：如果您的学习率太大，J(theta) 可能会发散，而`blow up', resulting in values which are too large for computer calculations. In these situations, Octave/MATLAB will tend to return NaNs. NaN stands for`不是一个数字，这通常是由涉及无穷大和 + 无穷大的未确定运算引起的。

# ios - 以编程方式加载 UITableViewController 并将视图添加为子视图

> ID：10479354
> 
> 赞同：0
> 
> 时间：2012-05-07T09:02:43.327
> 
> 标签：ios, uitableview, uistoryboard

我想在 UIView 中加载 UITableViewController 因为我想更改按钮单击时的视图（如 UITabBar 但使用我自己的按钮）。我正在使用情节提要并定义了一个具有自定义类“InitialTableViewController”和标识符“InitialView”的 TableViewController。

我的代码如下所示：

```
#import "MyViewController.h"
#import "InitialTableViewController.h"

@interface MyViewController ()

@end

@implementation MyViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    InitialTableViewController *tableControl = [self.storyboard instantiateViewControllerWithIdentifier:@"InitialView"];

    [[self view] addSubview:[tableControl view]];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

@end 
```

视图开始，我可以看到我的表，但“InitialTableViewController”中的代码不起作用。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:12:22.103

好吧，将一个普通`UIViewController`的 a`UIView`作为 Nib 的根，然后放一个`UITableView`. 我的回答是基于你需要有按钮`UIView`。

# jquery - Jquery UI同时使用Accent-map和多个值自动完成

> ID：10479355
> 
> 赞同：1
> 
> 时间：2012-05-07T09:02:52.470
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我必须对代码进行哪些更改？

这是多个值的代码

```
<script>
    $( "#tags" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            minLength: 0,
            source: function( request, response ) {
                // delegate back to autocomplete, but extract the last term
                response( $.ui.autocomplete.filter(
                    availableTags, extractLast( request.term ) ) );
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;
            }
        });
});
</script> 
```

这是口音地图的代码..

```
<script>
$(function() {
    $( "#developer" ).autocomplete({
        source: function( request, response ) {
            var matcher = new RegExp( $.ui.autocomplete.escapeRegex( request.term ), "i" );
            response( $.grep( names, function( value ) {
                value = value.label || value.value || value;
                return matcher.test( value ) || matcher.test( normalize( value ) );
            }) );
        }
    });
});
</script> 
```

我想做一个自动完成，它也可以处理重音和多个值。

# java - 如何将 Activity 引用传递给我自己的组件

> ID：10479357
> 
> 赞同：0
> 
> 时间：2012-05-07T09:03:08.180
> 
> 标签：java, android, dialog, android-activity

我创建了一个 datetime 组件，但它是自动构建的（我在 XML 布局中拥有它，我不想手动创建它）但我需要传递对 an 的引用`Activity`才能创建对话框。我怎样才能做到这一点？之后我尝试了一个二传手，`findViewById`但这不是一个好的解决方案......

```
public class DateTimeComponent extends RelativeLayout {

    private Activity activity;

    public DateComponent(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
        // rest ommited
        initFields();
    }

    private void initFields() {
        dateEditText = (EditText) findViewById(R.id.dateEditText);
        dateEditText.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                activity.showDialog(DATE_PICKER_DIALOG);
            }
        });

        timeEditText = (EditText) findViewById(R.id.timeEditText);
        timeEditText.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                activity.showDialog(TIME_PICKER_DIALOG);
            }
        });
    }

    // rest ommited

    public Dialog getDatePickerDialog() {
        int year = selectedDateTime.get(YEAR);
        int month = selectedDateTime.get(MONTH);
        int day = selectedDateTime.get(DAY_OF_MONTH);
        return new DatePickerDialog(activity, onDateSetListener, year, month, day);
    }

    public Dialog getTimePickerDialog() {
        int hour = selectedDateTime.get(HOUR_OF_DAY);
        int minute = selectedDateTime.get(MINUTE);
        return new TimePickerDialog(activity, onTimeSetListener, hour, minute, true);
    }

    private final OnDateSetListener onDateSetListener = new OnDateSetListener() {
        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            // do something
        }
    };

    private final OnTimeSetListener onTimeSetListener = new OnTimeSetListener() {
        @Override
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            // do something
        }
    };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:24:16.313

您的构造函数接收的上下文是一个活动。因此，您可以将其投射到它上面。例如像这样

```
MyActivity a = (MyActivity) getContext(); 
```

PS您不需要在自己的字段中存储活动：

```
private Activity activity; // not needed 
```

里面已经存储了，可以通过[http://developer.android.com/reference/android/view/View.html#getContext](http://developer.android.com/reference/android/view/View.html#getContext) ()获取

**证明**

自定义文本视图：

```
public class MyTextView extends TextView {

public MyTextView(Context context) {
    super(context);
    setText(Integer.toString(System.identityHashCode(context)));
}

public MyTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    setText(Integer.toString(System.identityHashCode(context)));
}

} 
```

活动：

```
public class ContextActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView textView = (TextView) findViewById(R.id.textView);

    textView.setText( Integer.toString(System.identityHashCode(this)) );
}
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/textView" />

<com.inthemoon.incubation.MyTextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

显示的代码相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:07:58.403

也许这可以帮助你：

**选项1：**

```
public class DateTimeComponent extends RelativeLayout {
    private Activity activity;

    public DateTimeComponent(Activity act){
        activity = act;
    }

    public void someListener() {
        activity.showDialog(...);
    }

} 
```

**选项 2：**

```
public class DateTimeComponent extends RelativeLayout {

    public void someListener(Activity act) {
        act.showDialog(...);
    }

} 
```

**选项 3：**

```
...
    private Activity activity;

    public DateComponent(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);

        activity = (Activity) getContext();

        // rest ommited
        initFields();
    }

... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:16:59.420

两种方式——

1.  创建一个接受 Context 参数的构造函数，并拥有一个 Context 类型的（私有？）类变量，您可以随时使用它。

2.  为每个需要它的方法添加一个额外的 Context 上下文参数。在某些情况下，您可能需要进行最终处理。

# mysql - MYSQL - 插入一个空值，如何避免？

> ID：10479361
> 
> 赞同：1
> 
> 时间：2012-05-07T09:03:31.363
> 
> 标签：mysql, insert, exists

我有一个 SQL 查询，它看起来像这样：

```
insert into tableA(order_id, contractnotenumber, shipmentdate, comment) 
    values ((select entity_id from tableb where increment_id = '12345678'), 
    '', '1970-01-01', ''); 
```

现在，如果子查询 ((select entity_id from tableb where increment_id = '12345678')) 返回 null，则插入不起作用。我想要的是一种简单的方式，即如果子查询返回 null，则不执行任何操作。我尝试插入忽略，但这会插入 0 而不是 null 的行，这有效，但它不是我想要的。在 SQL Server 中，我使用了*if not exists(select...)*，但这不适用于 MYSQL。

想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:05:52.793

```
insert into tableA(order_id, contractnotenumber, shipmentdate, comment)
select entity_id, '', '1970-01-01', '' from tableb where increment_id = '12345678' 
```

如果在中找不到该行，这将不会插入任何内容`tableb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:28:33.970

你也可以试试 mysql> insert ignore

# visual-studio-2010 - ClickOnce 完成卸载

> ID：10479363
> 
> 赞同：0
> 
> 时间：2012-05-07T09:03:39.690
> 
> 标签：visual-studio-2010, clickonce, uninstallation

如果我卸载 clickonce 应用程序 - 用户设置文件将保留在原处。如果我希望所有用户都更新配置，我该怎么办？这样所有用户都获得默认配置（即 app.config），而不是他们的自定义配置一个又一个更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:50:07.790

您在谈论哪些用户设置文件？如果它们位于 ClickOnce 缓存中，则应在卸载时删除所有文件。

这是由 ClickOnce scavenger 服务完成的，并不总是立即发生。

# git - git log 无效的字符集名称

> ID：10479368
> 
> 赞同：0
> 
> 时间：2012-05-07T09:04:31.470
> 
> 标签：git

我在win7中使用msysgit，使用一些命令失败。例如

```
git log 
```

不是无效的，响应

```
invalid charset name 
```

有人告诉我编辑环境，我做到了

```
LANG=en_US.UTF-16
LC_ALL=en_US.UTF-16 
```

但是没用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T11:39:40.293

我通过设置在我的系统上解决了它`LESSCHARSET=utf-8`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:43:16.450

我的设置为

```
LANG=en_US.UTF-8 
```

[`.exports`](http://github.com/svnpenn/dotfiles/blob/a3603e4/.exports#L9)

# java - jPanel 在鼠标位置可见

> ID：10479371
> 
> 赞同：0
> 
> 时间：2012-05-07T09:04:57.293
> 
> 标签：java, applet, mouse, jpanel

我有一个小程序，我希望在鼠标悬停时显示一个 jPanel。那部分被覆盖了。我真正希望的是 jPanel 出现在当前鼠标位置。

我怎样才能做到这一点？

我正在使用 NetBeans，如果您认为它是相关的。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:14:22.887

```
private void yourMouseMoveMethod(java.awt.event.MouseEvent evt) {
      yourJPanel.setLocation(evt.getX(),evt.getY());
} 
```

如果您不希望它随光标移动，则必须为其添加一些条件

# c# - 如何使用 C# 将 .TXT 文件重命名为 .OLD？

> ID：10479377
> 
> 赞同：-8
> 
> 时间：2012-05-07T09:05:25.690
> 
> 标签：c#, .net, file, text-files, rename

我需要将我的文本文件重命名为 .old 格式。
我是 C# 新手，不知道。
我还没有尝试过，因为我什至不知道从哪里开始，所以请不要评论“你到目前为止尝试了什么”？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T09:08:32.373

不要抄袭，浪费时间！

改用它，它等于重命名文件名：

```
File.Move(oldFileName, newFileName); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T09:09:29.703

```
System.IO.File.Move(oldFileName, Path.ChangeExtension(oldFileName, 'old')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T09:11:48.893

您也可以使用 Dos rename 命令，但请记住设置工作目录

```
string command = @"/c ren *.txt *.old";
ProcessStartInfo cmdsi = new ProcessStartInfo("cmd.exe");
cmdsi.WorkingDirectory = @"d:\test"; //set your working directory
cmdsi.Arguments = command;
Process cmd = Process.Start(cmdsi); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T09:10:01.867

我不打算为你做，但你可以使用 System.IO.Path 和 System.IO.File 上的静态方法来实现这一点，现在开始编写一个探索性控制台应用程序。

# javascript - 从计数功能启动灯箱

> ID：10479378
> 
> 赞同：0
> 
> 时间：2012-05-07T09:05:29.070
> 
> 标签：javascript, lightbox

我在 JavaScript 方面的经验相当有限，更多的是真正创建的复制/编辑。

使用 Beej Jorgensen 的 HTML5 画布刮刀构建比赛。用户需要刮 X 数量的刮板，如果找到 3 个中奖符号，则需要加载参赛表格。

我已经得到计数和触发器与定时定位功能正常工作。1.25 秒后，页面加载了输入表单，有人提到在灯箱中使用此表单，但该决定尚未最终确定。

这是有效的，很容易。

```
function countDiamonds(count) {
    if (count==3) {
        setTimeout(function() { location = 'congrats.php' }, 1250);
    }
} 
```

我将如何触发灯箱而无需用户单击某些链接，因此在上述函数中将“setTimeout ...”替换为灯箱触发器/调用。

# c# - 在 Ninject 中使用 ToFactory 时出现 ActivationException

> ID：10479384
> 
> 赞同：6
> 
> 时间：2012-05-07T09:05:53.480
> 
> 标签：c#, ninject, factory, ninject-extensions

当我尝试在 Ninject 中使用 ToFactory 时，我得到 Ninject.ActivationException

```
var test = new StandardKernel();
test.Bind<IFoo>().To<Foo>();
test.Bind<IFooFactory>().ToFactory();
var factory = test.Get<IFooFactory>();
var foo = factory.GetFoo();           //<--Ninject.ActivationException 
```

工厂：

```
public interface IFooFactory
{
    IFoo GetFoo();
} 
```

例外：

```
Ninject.ActivationException was unhandled
  Message=Error activating IFoo
No matching bindings are available, and the type is not self-bindable.
Activation path:
  1) Request for IFoo

Suggestions:
  1) Ensure that you have defined a binding for IFoo.
  2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
  3) Ensure you have not accidentally created more than one kernel.
  4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
  5) If you are using automatic module loading, ensure the search path and filters are correct.

  Source=Ninject
  StackTrace:
       at Ninject.KernelBase.Resolve(IRequest request) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 359
       at Ninject.ResolutionExtensions.GetResolutionIterator(IResolutionRoot root, Type service, Func`2 constraint, IEnumerable`1 parameters, Boolean isOptional, Boolean isUnique) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 263
       at Ninject.ResolutionExtensions.Get(IResolutionRoot root, Type service, String name, IParameter[] parameters) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 164
       at Ninject.Extensions.Factory.Factory.InstanceResolver.Get(Type type, String name, Func`2 constraint, ConstructorArgument[] constructorArguments, Boolean fallback) in c:\Projects\Ninject\ninject.extensions.factory\src\Ninject.Extensions.Factory\Factory\InstanceResolver.cs:line 75
       at Ninject.Extensions.Factory.StandardInstanceProvider.GetInstance(IInstanceResolver instanceResolver, MethodInfo methodInfo, Object[] arguments) in c:\Projects\Ninject\ninject.extensions.factory\src\Ninject.Extensions.Factory\Factory\StandardInstanceProvider.cs:line 78
       at Ninject.Extensions.Factory.FactoryInterceptor.Intercept(IInvocation invocation) in c:\Projects\Ninject\ninject.extensions.factory\src\Ninject.Extensions.Factory\Factory\FactoryInterceptor.cs:line 57
       at Castle.DynamicProxy.AbstractInvocation.Proceed()
       at Castle.Proxies.IFooFactoryProxy.GetFoo() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T12:35:08.157

您的方法的[命名会触发约定，因此生成的工厂正在请求`IFoo`命名的“Foo”](https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface%3a-Referencing-Named-Bindings)，但配置尚未使用该名称注册该类型的服务。

# c# - AS3 中的 Md5 密码

> ID：10479385
> 
> 赞同：1
> 
> 时间：2012-05-07T09:06:01.530
> 
> 标签：c#, actionscript-3, passwords, md5

我在重新创建在 C# 中散列的密码时遇到问题。在一个在线项目中，当用户进行注册过程时，他的密码在通过此功能后被保存：

```
private static string ToMD5Hash(string inputString)
{
   using (MD5 md5 = MD5.Create())
   {
      byte[] data = Encoding.Unicode.GetBytes(inputString);
      byte[] hash = md5.ComputeHash(data);

      return Convert.ToBase64String(hash);
   }
} 
```

我正在开发一个离线版本，该版本有时会与在线版本同步，但我无法在 AS3 (Adobe Air) 上重现相同的结果。例如，传递给 C# 代码后的密码“1234”将是“DwN1hMmef9T0+MWVUPj1Bw==”。

有人可以帮我吗？

我的 AS3 代码是这样的：

```
private function encode():void
{
var ba:ByteArray = new ByteArray();
ba.writeMultiByte("1234","unicode");
var str:String = MD5.hash(ba.toString());

var ba2:ByteArray = new ByteArray();
ba2.writeMultiByte(str.toString(),"unicode");

var encoder:Base64Encoder = new Base64Encoder();
encoder.encodeUTFBytes(ba2.toString());
    trace(encoder.toString());
} 
```

当我这样做时，`ba.writeMultiByte("1234","unicode");`我得到的结果与`ByteArray`C# 中的完全一样，但是当我这样做时`MD5.hash(ba.toString());`，新`ByteArray`的就不同了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:45:28.923

所以看起来这可能是 as3corelib 将位写入`digest` `ByteArray`.

它似乎以[大端](http://en.wikipedia.org/wiki/Endianness)格式而不是小端格式编写它们。或者更具体地说，它将位写入 4 个整数的集合而不是字节的集合，并且在此过程中它会破坏位的字节顺序（这就是您看到不同 Base64 结果的原因——字节位于不同的顺序）。

[您可以通过在 MD5.as的第 184 行](https://github.com/mikechambers/as3corelib/blob/master/src/com/adobe/crypto/MD5.as#L184)添加解决此错误，在 as3corelib 中，插入以下一行代码：

```
digest.endian = Endian.LITTLE_ENDIAN; 
```

还要确保在文件顶部为`import flash.utils.Endian`. 我在[此处创建了可用更改的公共要点](https://gist.github.com/2637849)

然后它应该生成与 c# 相同的字节顺序，然后它应该以相同的方式进行 Base64 编码。我使用以下 as3 函数对其进行了验证：

```
 private function encode():void 
    { 
        var ba:ByteArray = new ByteArray();
        ba.endian = Endian.BIG_ENDIAN
        ba.writeMultiByte("1234","unicode");
        var str:String = MD5.hashBytes(ba);

        var encoder:Base64Encoder = new Base64Encoder();
        encoder.encodeBytes(MD5.digest);
        trace(encoder.toString()); // DwN1hMmef9T0+MWVUPj1Bw==
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:14:40.590

[看看这个](http://www.kirupa.com/forum/showthread.php?295966-MD5-in-AS3-0)。

请注意，该站点中提到的原始下载有一些错误，因此您必须使用可以在同一篇文章中找到的更正版本。

如果您使用的是 AS3CoreLib，请这样做：

[与 as3corelib 不同的 MD5](https://stackoverflow.com/questions/3883688/different-md5-with-as3corelib)。

# javascript - 使用 wsHttpbinding 调用 WCF Web 服务，使用 javascript 或 Jquery 调用 x509 证书

> ID：10479388
> 
> 赞同：3
> 
> 时间：2012-05-07T09:06:29.693
> 
> 标签：javascript, jquery, web-services, x509, wshttpbinding

我正在编写一个 Web 应用程序，我需要使用现有的 Web 服务。此 Web 服务使用`wsHttpBinding`x509 证书。

我浏览了整个网络，但没有找到可行的解决方案。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:25:46.017

客户端证书的选择将由浏览器在建立连接时进行。JavaScript 和 jQuery 在这方面没有太多发言权。

您可以配置 Firefox（例如）询问您选择哪个证书或自动选择一个（首选项 -> 高级 -> 加密 -> 证书）。如果您选择“总是询问”，这可能会从浏览器触发一个弹出窗口，但这不能通过 JavaScript 访问。

您将要使用的客户端证书（及其私钥）首先需要可供浏览器使用。

# ruby-on-rails-3 - Rails 3 语言环境 - 语言环境标记的路径太长？

> ID：10479390
> 
> 赞同：0
> 
> 时间：2012-05-07T09:06:36.400
> 
> 标签：ruby-on-rails-3, internationalization, translation, locale, i18n-gem

我刚刚注意到语言环境的愚蠢错误-当特定语言环境标记的路径太长时，例如`t('placeholders.organization.participantsNo')`出现`locale translation missing`错误，但是当我在我的站点和语言环境文件中修改语言环境时，`t('placeholders.org.partNo')`它可以正常工作-为什么？这是否意味着语言环境标记路径使用的字符有限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:45:21.140

翻译的键不受字符数的限制——甚至鼓励使用有意义的嵌套命名空间模式。

难道是`placeholders.organization`已经有翻译，因此不能有子翻译`participantsNo`？

在任何情况下，您的翻译缺失错误的根源都不是来自键中的字符数。

# google-app-engine - 无法在 eclipse indigo 中创建新的 Web 应用程序项目？

> ID：10479393
> 
> 赞同：0
> 
> 时间：2012-05-07T09:06:53.027
> 
> 标签：google-app-engine, gwt, eclipse-plugin

谁能帮助我。我无法创建新的网络应用程序。我的意思是我找不到它的菜单选项。我下载了 eclipse indigo (java) 将其解压缩，开始使用它，我还下载了谷歌应用引擎 SDK、谷歌插件和 GWT。并安装了它们，但我在工具栏和菜单选项中都找不到创建新的 Web 应用程序项目选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:08:21.580

**文件**->**新建**-> **Web 应用程序项目**

如果您没有此选项，那么您在安装这些插件时会遇到问题。尝试重新启动 Eclipse。

执行官方[安装说明](https://developers.google.com/eclipse/docs/install-eclipse-3.7)的所有步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-16T19:03:08.513

我自己刚刚解决了这个完全相同的问题。强烈建议您将插件包下载到您的机器并在本地安装。你可以在这里下载：

[https://developers.google.com/eclipse/docs/install-from-zip](https://developers.google.com/eclipse/docs/install-from-zip)

有要遵循的说明，它完美无缺。希望它可以帮助其他迷失插件安装的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:35:15.090

安装 Google App Engine SDK 后，您应该能够按照以下说明查看 Web 应用程序

从 Eclipse 菜单中选择**File > New > Web Application Project 。**

如果没有，请遵循此

选择**文件 > 新建 > 其他 > Google > Web 应用程序项目**

官方[说明](https://developers.google.com/web-toolkit/usingeclipse#installing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-27T16:30:30.447

取决于你使用的是什么我有 Eclipse 开普勒，我找不到“网络应用程序项目”但是当你去那里并开始使用插件时，有一个小谷歌图标是谷歌插件的 Eclipse，你可以找到网络应用程序和所有选项谷歌应用引擎也可以找到“网络应用”创建项目和部署应用。

# apache - Apache CXF - 设置 HTTP 标头

> ID：10479396
> 
> 赞同：18
> 
> 时间：2012-05-07T09:07:03.823
> 
> 标签：apache, header, cxf, interceptor

我必须在 Apache CXF 客户端中设置一些 http 标头字段：

我通过拦截器尝试过：

```
 public class HttpHeaderInterceptor extends AbstractPhaseInterceptor<Message> {

    private String userId;
    private String xAuthorizeRoles;
    private String host;

    public HttpHeaderInterceptor() {
        super(Phase.POST_PROTOCOL);
    }

    @Override
    public void handleMessage(Message message) throws Fault {
        Map<String, List> headers = (Map<String, List>) message.get(Message.PROTOCOL_HEADERS);
        try {
            System.out.println("HttpHeaderInterceptor Host: " + host + " UserId: " + userId + " X-AUTHORIZE-roles: " + xAuthorizeRoles);
            headers.put("Host", Collections.singletonList(host));
            headers.put("UserId", Collections.singletonList(userId));
            headers.put("X-AUTHORIZE-roles", Collections.singletonList(xAuthorizeRoles));
        } catch (Exception ce) {
            throw new Fault(ce);
        }
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public void setxAuthorizeRoles(String xAuthorizeRoles) {
        this.xAuthorizeRoles = xAuthorizeRoles;
    }

    public void setHost(String host) {
        this.host = host;
    }
} 
```

在我的动态客户端类中，方法：

```
public void setHttHeaderInterceptor(String userId, String xAuthorizeRoles){
    Client cxfClient = ClientProxy.getClient(this.abgWebServicePort);
    HttpHeaderInterceptor httpHeaderInterceptor = new HttpHeaderInterceptor();
    httpHeaderInterceptor.setHost("example.org");
    httpHeaderInterceptor.setUserId(userId);
    httpHeaderInterceptor.setxAuthorizeRoles(xAuthorizeRoles);
    cxfClient.getOutInterceptors().add(httpHeaderInterceptor);
} 
```

在我调用远程服务之前调用：

对于每个调用，userId 和 xAuthorizeRoles 应该有所不同，但是当我通过 tcpdump 调用进行检查时，所有调用在标头字段中都具有相同的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T06:49:46.437

我已经解决了我的问题：

通过xml配置添加拦截器：

```
<jaxws:client id="clientBean" serviceClass="org.example.service.ServicePortType"
              address="example.org/src/service/ServicePort">
    <jaxws:outInterceptors>
        <bean class="org.example.interceptor.HttpHeaderInterceptor"/>
    </jaxws:outInterceptors>
    <jaxws:properties>
        <entry key="mtom-enabled" value="true"/>
    </jaxws:properties>
</jaxws:client> 
```

在客户端类中，我将 setHttpHeaderInterceptor 更改为

```
public void setHttpHeaderInterceptor(String userId, String xAuthorizeRoles){
    Client cxfClient = ClientProxy.getClient(this.servicePort);
    cxfClient.getRequestContext().put("HTTP_HEADER_HOST", "example.org");
    cxfClient.getRequestContext().put("HTTP_HEADER_USER_ID", userId);
    cxfClient.getRequestContext().put("HTTP_HEADER_X_AUTHORIZE-ROLES", xAuthorizeRoles);
} 
```

拦截器类

```
@Override
    public void handleMessage(Message message) throws Fault {
        Map<String, List> headers = (Map<String, List>) message.get(Message.PROTOCOL_HEADERS);
        try {
            headers.put("Host", Collections.singletonList(message.get("HTTP_HEADER_HOST")));
            headers.put("KD_NR", Collections.singletonList(message.get("HTTP_HEADER_KD_NR")));
            headers.put("X-AUTHORIZE-roles", Collections.singletonList(message.get("HTTP_HEADER_X_AUTHORIZE-ROLES")));
        } catch (Exception ce) {
            throw new Fault(ce);
        }
    } 
```

现在它工作了。

使用这种方法，我可以在运行时设置 HTTP-Header 字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T21:00:21.293

您应该使用 :`Phase.POST_LOGICAL`而不是`Phase.POST`. 这对我有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T14:06:57.957

这是一个代码片段，用于在单个 CXF 输出拦截器的响应中复制自定义 HTTP 标头（来自请求）。

```
public void handleMessage(SoapMessage message) throws Fault {
    // Get request HTTP headers
    Map<String, List<String>> inHeaders = (Map<String, List<String>>) message.getExchange().getInMessage().get(Message.PROTOCOL_HEADERS);
    // Get response HTTP headers
    Map<String, List<String>> outHeaders = (Map<String, List<String>>) message.get(Message.PROTOCOL_HEADERS);
    if (outHeaders == null) {
        outHeaders = new HashMap<>();
        message.put(Message.PROTOCOL_HEADERS, outHeaders);
    }
    // Copy Custom HTTP header on the response
    outHeaders.put("myCustomHTTPHeader", inHeaders.get("myCustomHTTPHeader"));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-10T05:53:14.550

如果需要设置标准 HTTP 标头，那么也可以使用 http 管道来完成。

```
<http-conf:conduit
        name="*.http-conduit">
<http-conf:client AllowChunking="false" AcceptEncoding="gzip,deflate" Connection="Keep-Alive"
 Host="myhost.com"/>
</http-conf:conduit> 
```

# java - 生成有序的随机值

> ID：10479397
> 
> 赞同：0
> 
> 时间：2012-05-07T09:07:07.693
> 
> 标签：java, random

如何生成在 0 和 1 之间**排序**`if`的随机值而不在每次迭代时进行测试？

```
0.01
0.12
0.2
0.33
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:12:50.473

您可以使用[树集](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)

> 进一步提供对其元素的总排序的 Set。元素使用它们的自然顺序进行排序，或者由通常在排序集创建时提供的比较器进行排序。集合的迭代器将按元素升序遍历集合

例如

```
public static void main(String[] args) {
    SortedSet<Float> randoms = new TreeSet<Float>();
    Random random = new Random();
    while(randoms.size() < 5) {
        randoms.add(random.nextFloat());
    }
    for(Float r: randoms) {
        System.out.println(r);
    }
} 
```

输出

```
0.017743647
0.1998645
0.37926406
0.39519936
0.7745726 
```

编辑：如果按顺序生成随机数，其中下一个随机数取决于前一个数字，我认为它不是随机数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:15:33.540

以下代码保证每个下一个数字都将大于上一个。而且数量是随机的。对你有好处吗？

```
Random r = new Random();
double[] results = new double[n];
double prev = 0;
for (int i = 0;  i < n;  i++) {
    double next = prev + r.nextDouble();
    results[i] = next;
    prev = next;
} 
```

缺点是数量不受任何预定义阈值的限制。如果您需要这个，我建议您只生成数字数组，然后使用`Arrays.sort()`（正如许多其他人推荐的那样）对其进行排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T09:09:38.183

取决于你想要什么：

a) 生成 n 个随机数并对它们进行排序

b）为了使下一个随机数创建一个随机数，乘以（1-最后一个数字）并加上最后一个数字。

请注意，生成的分布非常不同

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T09:10:22.230

假设通过有序你的意思是排序，你可以创建一系列随机数，将它们添加到集合中，然后对其进行排序。

# prototype - 使用独立的 DLL 文件验证序列密钥 - 转换函数 NSIS => Prototype => Pascal

> ID：10479398
> 
> 赞同：3
> 
> 时间：2012-05-07T09:07:11.063
> 
> 标签：prototype, inno-setup, nsis, verification, serial-number

您能帮我创建基于 DLL 文件的串行检查功能吗？不幸的是我没有函数原型。

我所拥有的是该功能的 NSIS 版本：

```
SetOutPath $PLUGINSDIR
  File "serialtest.dll"
   System::Call "serialtest::_sn_serialtest(t r1) i .r2 ?u"
  ${If} $2 == 0
   Messagebox MB_OK|MB_ICONSTOP \
    "Invalid Serial Number!"
   Abort
  ${Endif} 
```

`t`- 文本，字符串（LPCSTR，指向第一个字符的指针）

`r1-r9`- 这些对于 NSIS 来说是 1-9 美元（可以输入或输出）。在这种情况下，r1 是 $1，$1 是带有分隔符“-”的序列号。

`i`- int（包括 char、byte、short、句柄、指针等）

`.`- 表示没有输入

`u`- 卸载 DLL

附加信息：NSIS 脚本是用 ANSI 编写的，我使用的是 Unicode 版本的 Inno Setup。

如果可能，应该从编辑框导入序列号 - 我在这里问了一个关于自定义序列页面的问题：[Inno Setup 中序列号的自定义页面](https://stackoverflow.com/questions/10385319/custompage-for-serial-number-in-inno-setup)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:06:55.780

我根本不知道NSIS，所以下面只是一个脚本解释的尝试：

```
serialtest::_sn_serialtest(t r1) i .r2 ?u 
```

我是这样理解的：

> serialtest.dll - 是从
> t 导入函数的库 - 输入字符串类型为 LPCSTR
> i - 整数结果放入无输入变量（所以只是输出变量）

所以你的原型可能看起来像这样：

```
int _sn_serialtest(
  __in LPCSTR sn
); 
```

我在这里缺少的是一些调用约定符号，所以下面的原型可能不起作用，如果你知道这个库是用 C 编写的（我用谷歌搜索的大多数 NSIS 插件是什么），那么它可能是 cdecl，比如下面，但这只是我的猜测，可能会有所不同：

```
function _sn_serialtest(sn: AnsiString): Integer;
  external '_sn_serialtest@files:serialtest.dll cdecl'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:16:56.357

在我有机会回复之前，另一个答案已被接受，因此我将添加一些其他信息：

虽然 NSIS 插件使用 cdecl 作为其导出函数，但 System::Call 默认为 stdcall，因为它通常用于调用 WinAPI。（对于 cdecl 你`?c`最后需要）

t 类型取决于 NSIS 版本，在正常构建中它是`char*`，在 unicode 构建中它是`WCHAR*`（t 就像`TCHAR`，你也有 w 和 m 用于`WCHAR`and `char`）。

您问题中函数的 C 原型是`int WINAPI _sn_serialtest(LPCTSTR);`，在您的情况下`LPCTSTR`=`LPCSTR`和`WINAPI`= `__stdcall`。

# mysql - 如何合并mysql数据库备份

> ID：10479399
> 
> 赞同：0
> 
> 时间：2012-05-07T09:07:12.153
> 
> 标签：mysql, database, merge

我有从 2 台机器（相同的数据库）获取的数据库备份。（大约 75 个表）一个备份包含从开始到 2012 年 4 月 27 日的数据，另一个备份从开始到今天，除了从 2012 年 4 月 27 日到 5 月 5 日的数据现在我想合并这些数据库。我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:16:19.560

我认为最好在同一台机器上导入两个数据库并通过 SQL 命令进行合并。假设您将一个转储导入 d1 并将另一个转储导入 d2，只需执行

```
insert into d1.mytable (select * from d2.mytable where id not in (select id from d1.mytable)); 
```

或者

```
replace into d1.mytable (select * from d2.mytable); 
```

我不完全确定语法，也没有测试过。但我相信它至少会帮助你继续前进。

# c# - 远程桌面用户名密码认证

> ID：10479404
> 
> 赞同：0
> 
> 时间：2012-05-07T09:07:54.577
> 
> 标签：c#, authentication, rdp

如何使用远程桌面 API 和 C# 代码检查是否可以在远程计算机上远程登录用户名和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:42:31.300

我相信这就是您正在寻找的：

[http://www.codeproject.com/Articles/43705/Remote-Desktop-using-C-NET](http://www.codeproject.com/Articles/43705/Remote-Desktop-using-C-NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T19:34:46.900

```
Process rdcProcess = new Process();
rdcProcess.StartInfo.FileName = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\cmdkey.exe");
rdcProcess.StartInfo.Arguments = "/generic:TERMSRV/192.168.0.217 /user:" + "username" +  " /pass:" + "password";
rdcProcess.Start();

rdcProcess.StartInfo.FileName = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\mstsc.exe");
rdcProcess.StartInfo.Arguments = "/v " + "192.168.0.217"; // ip or name of computer to connect
rdcProcess.Start(); 
```

上面的代码启动了与 .217 的连接，并且没有提示我提供密码。

如果您不想将存储的凭据保留在存储库中，则在此代码之后，您可以使用参数再次调用 cmdkey.exe

```
/delete:TERMSRV/192.168.0.217 
```

# git - 让 git 用外部工具合并不同的文件类型？

> ID：10479406
> 
> 赞同：3
> 
> 时间：2012-05-07T09:08:07.880
> 
> 标签：git, merge, conflict, automerge

我们正在开发一个项目，由于 git 无法正确合并文件，我们经常遇到相同的冲突。但是，可以使用外部脚本轻松修复这些冲突。现在是否有可能让 git 始终处理具有特定扩展名的文件与外部脚本的合并冲突？脚本需要来自 git 的 >>>> 和 <<<< 标记来查找文件中更改的部分，因此 git 应该在完成自己的合并后调用我们的脚本。

有人知道我们是否可以使用一个钩子，或者您可以告诉 git 运行此脚本以解决指定文件中的冲突吗？

最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:36:22.260

如果合并冲突解决始终相同，请查看**[`git rerere`](http://schacon.github.com/git/git-rerere.html)**.
它在“ [Rerere Your Boat...](http://git-scm.com/2010/03/08/rerere.html) ”和“ [gitster's journal - Fun with rerere](http://gitster.livejournal.com/41795.html) ”中有描述

> 该名称代表“**重用记录的解决方案**”，顾名思义，它允许您让 Git 记住您是如何解决大块冲突的，以便下次遇到相同的冲突时，Git 可以自动为您解决。

您将需要激活它：

```
git config --global rerere.enabled 1 
```

# ios - performSegueWithIdentifier 阻塞 UIAlertView 甚至 [activityImageView startAnimating]

> ID：10479410
> 
> 赞同：1
> 
> 时间：2012-05-07T09:08:29.803
> 
> 标签：ios, uialertview, uistoryboardsegue

我想在调用 segue 之前启动等待动画/显示 UIAlertView，以便用户知道他们必须等待几秒钟，同时处理 segue，下一个 ViewController 会填充相关数据并显示！

问题是 performSegueWithIdentifier 阻止任何类型的动画/UIAlertView 出现。只有在 segue 完成后，动画才有机会弹出！

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:15:00.770

您应该能够在该`prepareForSegue`方法中实现动画逻辑。该方法在 segue 执行之前被调用并完成。

此外，如果此流程不适合，请在动画结束或用户响应您已触发的 UIAlertView 时触发 performSegue 方法。

或者，如果您没有使用过`MBProgressHUD`，请看一下。当我处理外部数据并希望用户知道正在发生的事情（从 Web 服务获取数据）时，我会使用它。它易于实施。

# css - 如何选择后面有一些文本的元素？

> ID：10479414
> 
> 赞同：2
> 
> 时间：2012-05-07T09:08:40.583
> 
> 标签：css, css-selectors

我使用`<div>`标签在我的页面中插入图标​​：

```
<div class="icon warning"></div>There is a warning in the page 
```

问题是图标太靠近文本：

![在此处输入图像描述](../Images/9f066fa8ced3adcb6460391961266d79.png)

这是图标的代码：

```
div.icon{
    display:inline-block;
    width:16px;
    height:16px;
    background-color:transparent;
    background-image:url(/images/icons.png);
    background-repeat:no-repeat;
    vertical-align:text-top;
    background-position:0 0;
}

div.icon.warning{
    background-position:-48px 0;
    cursor:help;
} 
```

**只有当**图标后面跟着一些文本时，我才想在图标和文本之间放置几个像素的距离。换句话说，如果图标后面没有文字，我不想要那个空间。换句话说，对于以下代码，我希望 div#icon1 和文本“页面中有警告”之间有 5px 的距离，但我不希望 div#icon2 和后面的元素之间有任何距离：

`<li><div id="icon1" class="icon warning"></div>There is a warning in the page</li>`

`<li><div id="icon2" class="icon warning"></div></li>`

请注意，图标**并不**总是出现在`<li>`元素中，因此您建议的选择器不能依赖于图标可能出现的上下文。关于图标唯一可以确定的是，如果它们后面跟着一些文本，它们和文本之间必须有一些空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:15:36.910

您可以将文本包装在 a 中`span`并对其应用填充：

```
<div class="icon warning"></div><span class="warning-text">There is a warning in the page</span>

.warning-text {
  padding-left: 5px;
} 
```

**更新：** 根据下面的评论，我决定从 using`span`而不是`div`. 可以使用`div`, 但带有附加`display: inline;` `CSS`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:22:35.610

如果您愿意稍微重组您的标记（不添加任何额外的大小）：

[http://jsfiddle.net/8kcQv/](http://jsfiddle.net/8kcQv/)

关键线是：

```
.icon:empty{ padding-left: 20px; } 
```

这适用于 IE 9、Chrome 等。其他浏览器会在空元素之间添加额外的空间。这是一个替代版本，在`:empty`不受支持时会以不同的方式降级（图标和文本之间的空间更小）：

[http://jsfiddle.net/8kcQv/1/](http://jsfiddle.net/8kcQv/1/)

## HTML

```
<div class="icon">This message has text.</div>
<br>
<br>
<div class="icon"></div><div class="icon"></div><div class="icon"></div><div class="icon"></div><div class="icon"></div> 
```

## CSS

```
.icon{
 padding: 4px 4px 4px 32px; /* 32px adds extra space to pad against text */
 height: 24px;
 line-height: 16px;
 font-family: sans-serif;
 font-size: 16px;
 background:url(http://icons.iconarchive.com/icons/pixelmixer/basic/16/warning-icon.png) no-repeat 4px 4px;
 display: inline-block;
}

/* empty matches elements with no children (including text nodes) */
.icon:empty{ padding-left: 20px; } 
```

`:empty`或者，如果您使用以下样式，则可能完全不用：

```
.icon{
    padding: 4px 8px 4px 24px;
    ...
} 
```

这会在图标的两侧放置相等的距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:17:09.130

我建议使用 addClass jQuery。添加某个类，如果它后面有文本将添加一个空格，否则不要放置任何类。您应该设置没有空格的默认项目。

# entity-framework - 如何动态绑定实体框架中替换表达式节点中的参数

> ID：10479417
> 
> 赞同：2
> 
> 时间：2012-05-07T09:08:49.487
> 
> 标签：entity-framework, parameters, lambda, expression-trees, expressionvisitor

我正在尝试`Utility.GetString(MyEntity.SomePropertyWithRelatedEntity)=="abc"`用表达式访问者替换（简化）之类的函数调用，例如`p => p.SubRelatedEntities.FirstOrDefault(sre => sre.SomeFlag==true).SomePropertyWithRelatedEntity`.

这意味着，数据模型如下： MyEntity -> RelatedEntity -> SubRelatedEntity

我正在尝试`SubRelatedEntity`根据 中的一些规则从 中返回一个字符串值`RelatedEntity`，因此我不必在每次使用中重新编写/复制/粘贴整个过滤规则；这就是为什么我放入一个“调用签名”，所以我的表达式访问者可以识别它并将假调用替换`Utility.GetString`为一些复杂的 lambda 表达式。

我的表达式访问者包含以下内容：

```
 public override Expression Visit(Expression node)
    {
        if (node == null)
            return null;

        Expression result = null;

        if (node.NodeType == ExpressionType.Call)
        {
            MethodCallExpression mce = node as MethodCallExpression;
            if (mce.Method.DeclaringType == typeof(Utility) && mce.Method.Name == "GetString")
            {
                Expression<Func<RelatedEntity, string>> exp = re => re.SubRelatedEntities.FirstOrDefault(sre => sre.SomeFlag == true).SomeStringValue;
                result = exp.Body;

            }
            else
                result = base.Visit(node);
        }
        else
            result = base.Visit(node);

        return result;

    } 
```

现在，问题是，当调用注入的 lambda 表达式时，“sre”参数没有绑定。经过大量研究，我看到 lambda 参数应该替换为另一个表达式访问者，特别是搜索新参数并用旧参数替换它们。然而，在我的情况下，我没有“旧参数”——我有一个表达式`MyEntity.SomePropertyWithRelatedEntity`（例如，一个填充了相关实体的属性），我需要以某种方式将其插入到生成的 lambda 中。

我希望我的问题是可以理解的。感谢您的任何见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:14:52.420

在长时间没有答案并努力寻找解决方案之后，我最终解决了它：o）！它是这样的：

新注入的 lambda 表达式得到一个 ParameterExpression - 嗯，这是一个“助手”，在直接调用 lambda 时使用，这是我不想要的（因此，调用 ToEnumerable 时出现“参数未绑定”异常）。所以，线索是制作一个专门的 ExpressionVisitor，用原始表达式替换这个帮助器，这当然在方法调用的 Arguments[] 中可用，我试图替换它。

像魅力一样工作，像这样您可以重用相同的 LINQ 表达式，例如可重用的子查询，而不是一直编写所有相同的 LINQ 内容。还要注意，在 EF 中不允许调用方法的表达式，在 Linq2Sql 中它可以工作。此外，所有提议的网络文章仅替换参数实例，当构造/合并更多 LINQ 表达式时 - 在这里，我需要用伪造的方法调用参数替换参数，例如不应该调用该方法，它只代表对于代码标记，我需要在其中放置 LINQ 子查询。

希望这对某人有所帮助，最后它非常简单和合乎逻辑，当人们知道如何构造表达式树时;-)。

再见，安德烈

# variables - 动态创建范围内的变量

> ID：10479418
> 
> 赞同：0
> 
> 时间：2012-05-07T09:08:55.057
> 
> 标签：variables, random, new-operator, dynamically-generated

在任何编程语言（如 php、java、javascript 等）中，是否可以在给定的名称空间内动态创建循环中不断变化的变量数量？

例如，如果我想创建 N 个具有 1 到 5 之间随机数的变量，它们将被称为 random1、random2 .. randomN，是否可以执行以下操作：

```
loop ( N ){<br>
  create variable randomN = random(1,5);<br>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:25:19.243

或者您可以使用 $$，请参阅[变量变量](http://php.net/manual/en/language.variables.variable.php)。

```
for ($n = 1; $n <= 5; $n++) {
    $varName = 'random' . $n;
    $$varName = rand(1, 5);
}

$vars = get_defined_vars();
var_dump($vars); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:17:17.227

在 PHP 中，您可以使用可变变量：

```
$N = 5;
for ($i = 0; $i != $N; ++$i) {
    ${"random$i"} = rand(1, 5);
} 
```

在 JavaScript 中，同样的事情：

```
var N = 5;
for (var i = 0; i != N; ++i) {
    window['random' + i] = Math.round(Math.random() * 5);
} 
```

不过，我建议使用“容器”来保存这些变量，这样它们就不会在全局范围内创建。

# jquery - jQuery：一个带有参数的非常奇怪的行为

> ID：10479420
> 
> 赞同：0
> 
> 时间：2012-05-07T09:09:08.533
> 
> 标签：jquery, if-statement, arguments

* * *

[更新]我的错..我没有正确查看代码..我应该发现这么小的错误..真可惜..我现在想删除这个问题但无济于事......这将是如果有人可以帮我删除它，那就太好了。我认为这样一个愚蠢的问题不应该出现在这里。

* * *

我有这个功能：function magic(a,b,c){

```
 $("#a").on("mouseover", "."+a, function() { 

    $("#a").css("background", b).css("left", c);
    alert(a); 

    if(a="a"){
         b = "b";
         c = "10%";
    }else{
         b = "a";
         c = "0%";
    }
    alert(b);
    alert(c);

    $("#a").animate({
         "top":c
    },{
         duration:2000,
         complete:function(){
         $("."+a).addClass(b).removeClass(a);
         }
    });
  });
}
        After I execute it twice with different arguments `onLoad`        
  magic("a","black","10px");
  magic("b","red","2px"); 
```

第**一次** `mouseover` `.a`，它应该**`alert`是“a”，“b”，然后是“10%”，** * *，它确实如此。** 但是，**第二次** `mouseover` 是过去的- `.a`（`.b`现在）， **而不是`alert`“b”，“a”，“0%”，** **奇怪的是，它是`alert`“b”，然后是“b”，然后是“ 10%”。** 我可以给出的结论是，当通过 if(a="a"){ b = "b"; c = "10%"; }else{ b = "a"; c = "0%"; **`a``"a"``"b"`**`alert` **如果有人能解释它并提供解决方案，我将不胜感激。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:11:08.813

比较运算符 is `==`, not`=`

所以

```
if(a == "a"){ ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:14:36.520

它不是一个非常奇怪的行为，你使用赋值运算符`=`而不是比较运算符`==`，它总是`true`：

```
if(a == "a"){
     b = "b";
     c = "10%";
} else {
     b = "a";
     c = "0%";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:11:23.947

```
if(a = "a"){ 
```

不是

```
if(a == "a"){ 
```

-- 前者赋值给`"a"`a，然后“返回”`a`作为表达式值，第二个进行比较并返回`true`or `false`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T09:19:09.593

```
if(a = "a"){..} 
```

应该

```
if(a == "a"){...} 
```

或者

```
if(a === "a"){...} 
```

# c# - 通过图形对象绘制用户控件

> ID：10479425
> 
> 赞同：0
> 
> 时间：2012-05-07T09:09:36.677
> 
> 标签：c#, winforms, gdi

我在一个控件上有一个事件，它只提供一个要绘制的图形对象。是否可以加载用户控件并将其绘制到特定的图形对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:01:39.920

“加载用户控件”没有任何意义。如果该“用户控件”是另一个窗口，则必须创建它，但这只能在对话框或窗口的初始化/创建期间完成，而不是在绘画期间完成。

# java - 服务器返回 HTTP 响应代码：401 用于 URL：https

> ID：10479434
> 
> 赞同：18
> 
> 时间：2012-05-07T09:10:24.320
> 
> 标签：java, tomcat, https, http-status-code-401

我正在使用 Java 访问一个 HTTPS 站点，该站点以 XML 格式返回显示。我在 URL 本身中传递登录凭据。这是代码片段：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
requestURL = "https://Administrator:Password@localhost:8443/abcd";

try { 
    InputStream is = null;
    URL url = new URL(requestURL);
    InputStream xmlInputStream =new URL(requestURL).openConnection().getInputStream();
    byte[] testByteArr = new byte[xmlInputStream.available()];
    xmlInputStream.read(testByteArr);
    System.out.println(new String(testByteArr));
    Document doc = db.parse(xmlInputStream);
    System.out.println("DOC="+doc);
} catch (MalformedURLException e) {
} 
```

我在程序中创建了一个不验证签名/未签名证书的信任管理器。但是，在运行上述程序时，我收到错误 Server returned HTTP response code: 401 for URL: [https://Administrator:Password@localhost:8443/abcd](https://Administrator:Password@localhost:8443/abcd)

我可以在浏览器上使用相同的 url，它会正确显示 xml。请让我知道如何在 Java 程序中完成这项工作。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-07T10:16:15.007

401 表示“未经授权”，因此您的凭据中一定有一些东西。

我认为 java`URL`不支持您显示的语法。您可以改用身份验证器。

```
Authenticator.setDefault(new Authenticator() {

    @Override
    protected PasswordAuthentication getPasswordAuthentication() {          
        return new PasswordAuthentication(login, password.toCharArray());
    }
}); 
```

然后只需调用常规 url，无需凭据。

另一种选择是在标头中提供凭据：

```
String loginPassword = login+ ":" + password;
String encoded = new sun.misc.BASE64Encoder().encode (loginPassword.getBytes());
URLConnection conn = url.openConnection();
conn.setRequestProperty ("Authorization", "Basic " + encoded); 
```

PS：不建议使用 Base64Encoder ，但这只是为了展示一个快速的解决方案。如果您想保留该解决方案，请寻找一个库。有很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T08:04:01.380

试试这个。您需要通过身份验证才能让服务器知道它是一个有效用户。您需要导入这两个包，并且必须包含一个 jersy jar。如果你不想包含 jersy jar 然后导入这个包

```
import sun.misc.BASE64Encoder;

import com.sun.jersey.core.util.Base64;
import sun.net.www.protocol.http.HttpURLConnection; 
```

进而，

```
String encodedAuthorizedUser = getAuthantication("username", "password");
URL url = new URL("Your Valid Jira URL");
HttpURLConnection httpCon = (HttpURLConnection) url.openConnection();
httpCon.setRequestProperty ("Authorization", "Basic " + encodedAuthorizedUser );

 public String getAuthantication(String username, String password) {
   String auth = new String(Base64.encode(username + ":" + password));
   return auth;
 } 
```

# .net - 部署具有 COM 依赖关系的 .NET 可执行文件时，安装项目不包含 Interop.*.dll

> ID：10479436
> 
> 赞同：0
> 
> 时间：2012-05-07T09:10:42.233
> 
> 标签：.net, visual-studio-2010, com-interop, setup-project

我有一个依赖于第三方 COM OCX 文件的 .NET Windows 窗体可执行文件。COM DLL 是自带安装程序的应用程序的一部分。

我创建了一个 VS2010 安装项目，并从 Windows 窗体项目中选择了输出以放置在应用程序文件夹中。我注意到 Interop.*.dll 程序集没有与主输出一起复制。为什么不复制 Interop.*.dll？我该如何解决？

# tfs - TFS：恢复已删除的文件夹和项目

> ID：10479441
> 
> 赞同：87
> 
> 时间：2012-05-07T09:11:02.000
> 
> 标签：tfs

我删除了 TFS 中的一些文件和一些文件夹。许多签入后我发现我需要在我的项目中恢复已删除的功能。

如何恢复已删除的文件和文件夹？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-05-07T09:37:54.133

在团队资源管理器中（在 Visual Studio 中）：工具 | 选项 | 源代码管理 | Visual Studio Team Foundation Server 并选择显示已删除项目...

然后在源代码管理资源管理器中，您会看到项目变灰。您可以右键单击它们并取消删除。（只有在取消删除后，它们将包含在您当前的工作区中时，此选项才可用）。

注意。在较新版本的 Visual Studio（例如 2013）中，现在有一个按钮可以在源代码管理资源管理器的工具栏中打开已删除项目的显示。它的第二个按钮（这里是 VS 深色主题）：

![在此处输入图像描述](../Images/692078292739cfd4f89355c64aaee982.png)

或者使用 TFS PowerToys，您可以查看历史并右键单击以选择“回滚整个变更集”：这将创建挂起的更改以恢复所选变更集的更改。

编辑：在新版本的 VS 上添加了段落。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-04T20:17:46.350

假设您按照@Richard 的回答成功取消删除，解决方案资源管理器中出现的项目可能仍然存在问题（至少它对我来说是使用 Visual Studio 2015）。也就是说，该文件已恢复到您的硬盘驱动器上，位于项目文件夹结构中的适当位置 - 但它没有显示在 VS 中。

要解决此问题，请单击解决方案资源管理器中的显示所有文件按钮：

[![在此处输入图像描述](../Images/20571ebc767651d755a1857842223f1c.png)](https://i.stack.imgur.com/wZUe6.png)

你会看到你的文件，在一个幽灵般的白色图标中。右键单击它并选择“包含在项目中”。保存并签入更改。你又回来做生意了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-29T06:47:38.583

最近我遇到了这个问题，不小心删除了一些没有签入的类，我在我的项目目录中搜索了类的名称（我正在处理 D365 项目在 C:\AOSService\PackagesLocalDirectory\bin 中有一个 bin 文件夹\XppSource）并看到它们存在于 bin 文件夹中，因此我创建了具有相同名称的新类并复制了逻辑。另外我应该提到回收站中没有文件。

# php - 在php中解析文本

> ID：10479445
> 
> 赞同：0
> 
> 时间：2012-05-07T09:11:23.730
> 
> 标签：php, parsing

我有以下格式的字符串：

**XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX**

现在每个部分都可以是以下任何值：abc, "abc", (abc), NIL

其中 abc 是一个字符串，它也可能包含空格、括号、引号。

**示例字符串：**

TEXT "PLAIN" ("NAME" "file(1).txt") 无

将这样的字符串解析为数组的最佳方法是什么？IE

数组[0] = 文本

数组[1] = "平原"

数组[2] = ("名称" "文件 (1).txt")

数组[3] = NIL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:32:06.407

此正则表达式将帮助您：

```
 $result=array();
    $subject = 'TEXT "PLAIN" (string with spaces) "string with other spaces" ("NAME" "file(1).txt") NIL';
    $regex = '
    /"([^"])+"                   # Match quote, followed by multiple non-quotes, ended by a quote.
    |(\([\w ]+\))                # Or match multiple words and spaces between parentheses
    |\(((?=")([^)]|(?>"|.))+)\)  # Or Match text between parentheses, ignore ending parenthese if inside a quote
    |\w+                         # Or match single words
    /x';

    preg_match_all($regex, $subject, $result, PREG_PATTERN_ORDER);
    $result = $result[0];
    print_r($result);

    print_r($result); 
```

测试字符串：

```
 TEXT "PLAIN" (string with spaces) "string with other spaces" ("NAME" "file(1).txt") NIL 
```

结果 ：

```
 Array
    (
        [0] => TEXT
        [1] => "PLAIN"
        [2] => (string with spaces)
        [3] => "string with other spaces"
        [4] => ("NAME" "file(1).txt")
        [5] => NIL
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:30:31.197

试试这个：

```
$input = 'TEXT "PLAIN" ("NAME" "file(1).txt") NIL';
$output = array();

$open = 0;
$parts = explode(' ', $input);
for ($i = $j = 0; $i < count($parts); $i++) {
    $open += substr_count($parts[$i], '(');
    $open -= substr_count($parts[$i], ')');

    $output[$j] .= $parts[$i];

    if ($open == 0) {
        $j++;
    }
}

var_dump($output); 
```

我所做的很简单：通过切割空格将字符串分解成部分，然后确定我们是否在对偶内，或者在需要时重新组装零件。

# c - 我应该怎么做才能从命令行获取 c-program 的整个返回值？

> ID：10479446
> 
> 赞同：6
> 
> 时间：2012-05-07T09:11:26.730
> 
> 标签：c, bash, unix, return

我有一个简单的 C 程序`"./my_program"`

```
#include <stdio.h>

int main (int argc , char **argv) {

   unsigned int return_result = 0x474;
   printf("return_result = %d = 0x%x \n",return_result,return_result);
   return return_result;

} 
```

结果，该程序打印：

```
return_result = 1140 = 0x474 
```

我想在 bash 脚本中获取 c 程序的返回值。根据这个链接 [无论如何要从命令行获取c程序的返回值？](https://stackoverflow.com/questions/8230265/anyway-to-get-return-value-of-c-program-from-command-line) 我应该从 $?

但是当我启动这样的命令结果时：

```
./my_program
echo $? 
```

我明白了

```
116 
```

很明显，116 = 0x74（最低字节）。但我想获得整个 unsigned int 值。怎么了？我应该怎么做才能从命令行获取 c-program 的整个返回值？这不仅仅是“无符号整数”类型。如果我创建了一些复杂的类型，例如 - 结构，我应该怎么做。

我试过这个：

```
return ((unsigned int) return_result_section_size); 
```

它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T09:15:20.007

Unix 上的退出代码[仅限于单个字节](http://en.wikipedia.org/wiki/Exit_status#Unix)。如果要输出更多，可以将其写入标准输出或文件。

那么为什么C标准法令`main`返回`int`而不是`char`？我不知道...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:22:39.297

从 main 返回的值可以使用 echo $? 打印出来。在你完成执行之后。main 的返回值一般用来表示执行状态。最大值限制为 512。如果您尝试返回大于 512 的值，则会在 $? 中设置 512%val。

# linux - 如何杀死Linux上正在运行的for循环？

> ID：10479457
> 
> 赞同：7
> 
> 时间：2012-05-07T09:12:31.200
> 
> 标签：linux, pid

我在 Linux 上工作，我在 Linux 终端上执行了 for 循环，如下所示：

```
for i in `cat fileName.txt`
do
echo $i
vim $i
done 
```

fileName.txt 是一个文件，其中包含我在 vim 编辑器中一一打开的大量文件条目。现在我必须跳过在两者之间打开其他文件。（即我必须打破 for 循环）。任何建议如何获得运行循环的PID？并杀死同样的。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T14:21:31.650

You want to kill the running **job**. Press `Ctrl``Z`. Bash will show something like:

```
[1]+  Stopped                 vim $i 
```

Use that number with `kill` to send the `KILL` signal:

```
kill -9 %1 
```

and it should be killed afterwards:

```
[1]+  Killed                  vim $i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:20:36.013

这也可以解决问题：

```
while true ; do killall vim ; done 
```

你可以像往常一样用 ^C 中止这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:27:29.950

找到vim进程的父进程的进程id（PID），应该是执行for循环的shell。尝试使用“pstree -p”。然后，使用“kill”杀死该进程ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-29T16:48:04.120

要终止 vim 进程的创建，您必须停止 for 循环。此循环由 bash 进程管理。所以找到进程的PID并杀死它。为此，请找到 vim 进程的 PPID，即其父进程的 PID，然后终止父进程： `ps -elf | tr -s ' ' | grep vim | cut -f5 -d ' ' | xargs kill`

您可以将此命令与第二个命令一起使用，这将杀死所有 vim 进程，以确保没有 vim 实例保留： `ps -elf | tr -s ' ' | grep vim | cut -f4 -d ' ' | xargs kill`

我看到您遇到了“不允许的权限”的问题。这可能是由于缺少权限造成的，因此为了确保它会终止进程，您可以使用 sudo 调用 xargs kill ：`ps -elf | tr -s ' ' | grep vim | cut -f5 -d ' ' | sudo xargs kill`

# android - 带有按钮的android画廊动画

> ID：10479462
> 
> 赞同：0
> 
> 时间：2012-05-07T09:12:51.160
> 
> 标签：android, android-layout

我想创建像[这个](http://arunkumarpd.blogspot.com/2012/03/android-gallery-imageview-example.html)例子中所示的 android 动画。我这里只需要一个改变。我想创建两个按钮（上一个和下一个）。我想查看下一个图像以单击下一个按钮和上一个上一个按钮。有没有办法做到这一点或还有其他例子？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:14:56.837

在按钮`OnClickListener`中增加你想要显示的图像的位置

```
imageView.setImageResource(position); 
```

[更多的](http://developer.android.com/reference/android/widget/ImageView.html#setImageResource%28int%29)

更新

```
imgView.setImageResource(Imgid[position]); 
```

您可以使用您给出的示例中提供的方法获取图像的当前位置。

# c - 将 va_list 传递给多个函数而不调用 va_arg

> ID：10479469
> 
> 赞同：-1
> 
> 时间：2012-05-07T09:13:20.953
> 
> 标签：c, variadic-functions

我需要按如下方式实现此代码：

```
#include<stdarg.h>
#include<stdio.h>

typedef struct desc{
    void (*function)(void*)  //Function address
    int no_arg;              // Number of arguments
    va_list arg;             //arguments list
} desc;

desc* creater(void(*func)(), int no_arg1,...){
      desc *new_desc;
      va_list arg1;
      new_desc = (desc*)malloc(sizeof(struct desc));
      new_desc->function = func;
      new_desc->no_arg = no_arg1;
      va_start(arg1 , no_arg1);
      va_copy(new_desc->arg,arg1);
      va_end(arg1);
}

void start(void(*func)(), va_list varg){
      func(&varg);
}

void strat_work(struct desc *desc1){
      start( desc1->function,desc1->arg);
}

int test_func(int x, int y){
      printf(" The value is =",x + y);
}

int main(void){
          desc *desc2;
          desc = creater(test_func, 2, 1, 3);

          start_work(&desc);
          return 0;
} 
```

**任何人都可以阐明这个实现吗？**我可以模糊地看到一个答案，它也只接受了一个论点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:47:10.497

一旦`creator()`返回，`va_list`变量和它指向的所有变量参数都是无效的。`creator()`您必须在返回之前提取这些参数。恐怕你必须使用`va_arg()`.

# objective-c - 带提示的导航栏 - 替换为图像

> ID：10479475
> 
> 赞同：0
> 
> 时间：2012-05-07T09:13:51.847
> 
> 标签：objective-c, ios, ios5

如何用相同大小的图像替换“带提示的导航栏”？我在其他应用程序中看到了这一点。我所能做的就是在没有提示的情况下单独替换导航栏。我想要带有提示的尺寸，以便我可以放置一个高大的徽标。

感谢您提供任何资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:32:06.107

我希望这对你有用。

```
self.navigationItem.prompt = @"";
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"YOUR IMAGE NAME"]];
imageView.frame = CGRectMake(self.view.frame.size.width/2, 0, 10, 10); //change height and width accordingly
[self.navigationController.navigationBar addSubview:imageView]; 
```

快乐编码:)

# python - 如何将字符串列表转换为字典？

> ID：10479480
> 
> 赞同：0
> 
> 时间：2012-05-07T09:14:09.143
> 
> 标签：python, list, dictionary

我的清单是这样的，

```
['"third:4"', '"first:7"', '"second:8"'] 
```

我想把它转换成这样的字典......

```
{"third": 4, "first": 7, "second": 8} 
```

我如何在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T09:17:32.977

以下是两种可能的解决方案，一种为您提供字符串值，另一种为您提供 int 值：

```
>>> lst = ['"third:4"', '"first:7"', '"second:8"']
>>> dict(x[1:-1].split(':', 1) for x in lst)
{'second': '8', 'third': '4', 'first': '7'}
>>> dict((y[0], int(y[1])) for y in (x[1:-1].split(':', 1) for x in lst))
{'second': 8, 'third': 4, 'first': 7} 
```

但是，为了便于阅读，您可以将转换分为两个步骤：

```
>>> lst = ['"third:4"', '"first:7"', '"second:8"']
>>> dct = dict(x[1:-1].split(':', 1) for x in lst)
>>> {k: int(v) for k, v in dct.iteritems()} 
```

当然，这有一些开销，因为您创建了两次 dict - 但对于一个小列表，这并不重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T09:18:34.893

```
>>> data
['"third:4"', '"first:7"', '"second:8"']
>>> dict((k,int(v)) for k,v in (el.strip('\'"').split(':') for el in data))
{'second': 8, 'third': 4, 'first': 7} 
```

或者

```
>>> data = ['"third:4"', '"first:7"', '"second:8"']
>>> def convert(d):
        for el in d:
            key, num = el.strip('\'"').split(':')
            yield key, int(num)

>>> dict(convert(data))
{'second': 8, 'third': 4, 'first': 7} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:35:37.163

```
def listToDic(lis):
    dic = {}
    for item in lis:
        temp = item.strip('"').split(':')
        dic[temp[0]] = int(temp[1])
    return dic 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:30:38.893

有了`map and dict`它非常简单。

## 地图的语法

`map(func, iterables)`

`to_dict`将返回`key, value`将被消耗`dict`

```
def to_dict(item):  
      return item[0].replace('"',''), int(item[1].replace('"', ''))

>>> items
6: ['"third:4"', '"first:7"', '"second:8"']
>>> dict(map(to_dict, [item.split(':') for item in items]))
7: {'first': 7, 'second': 8, 'third': 4} 
```

`help(dict)`

```
class dict(object)   
     dict() -> new empty dictionary
     dict(mapping) -> new dictionary initialized from a mapping object's
     (key, value) pairs

     dict(iterable) -> new dictionary initialized as if via:
     d = {}
     for k, v in iterable:
         d[k] = v
    dict(**kwargs) -> new dictionary initialized with the name=value pairs
       in the keyword argument list.  For example:  dict(one=1, two=2) 
```

## 最终代码

```
>>> dict(map(to_dict, [item.split(':') for item in items])) 
```

# java - 从流中读取对象时出现 Java ClassNotFoundException

> ID：10479481
> 
> 赞同：3
> 
> 时间：2012-05-07T09:14:13.323
> 
> 标签：java, serialization, objectinputstream

从 ObjectInputStream 读取对象时出现 ClassNotFoundException。正在发送的对象是读取代码引用的“WorkUnit”的子类。接收端似乎在抱怨，因为它不知道具体的实现。当我只在接收端引用对象的超类：“WorkUnit”时，它为什么会关心这个？

从 Stream 读取的代码：

```
private Object readObject() {
    Object object = null;
    try {
        object = objectIn.readObject();
    } catch (SocketException | EOFException e) {
        // Socket was forcedly closed. Probably means client was
        // disconnected
        System.out.println("[NetworkHandler] SOCKET CLOSED");
        shouldContinue = false;
        if (!isClient)
            server.clientDisconnected(clientID);
    } catch (ClassNotFoundException | IOException e) {
        // If shouldContinue is true, we haven't said that we want to close
        // the connection
        if (shouldContinue) {
            e.printStackTrace();
            System.err
                    .println("[NetworkHandler] Error: Couldn't read object correctly");
        }
    }
    return object;
} 
```

工作单位实施：

```
import java.util.LinkedList;
import java.util.List;

import Application.WorkUnit;

public class WorkUnitImplementation extends WorkUnit<Integer, Integer> {

private static final int INPUT_LENGTH = 1000;

public WorkUnitImplementation() {
    super();

    setInputLength(INPUT_LENGTH);
}

@Override
public Integer doWork(Integer input) {
    wait(50);
    return (input % 2 == 1) ? input : null;
}

@Override
public List<Integer> inputFactory(int begin, int end) {
    List<Integer> result = new LinkedList<>();
    for (int i = begin; i < end; i++) {
        result.add(i);
    }
    return result;
}

private void wait(int time) {
    try {
        Thread.sleep(time);
    } catch (Exception e) {

    }
}
} 
```

发送工作单元的代码：

```
 public void uploadWorkUnit(WorkUnit workUnit) {
    try {
        objectOut.writeObject(new UploadWorkUnit(workUnit));
        objectOut.flush();
        System.out.println("[NetworkHandler] Uploaded workUnit");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

异常跟踪：

```
java.lang.ClassNotFoundException: WorkUnitImplementation
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:622)
at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1593)
at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at Networking.NetworkHandler.readObject(NetworkHandler.java:188)
at Networking.NetworkHandler.run(NetworkHandler.java:90)
at java.lang.Thread.run(Thread.java:722) 
```

[NetworkHandler] 错误：无法正确读取对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:24:35.843

> 接收端似乎在抱怨，因为它不知道具体的实现。当我只在接收端引用对象的超类：“WorkUnit”时，它为什么会关心这个？

这是因为流由*实现*类的字段组成。

来自[`ObjectOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)javadoc：

> 对象的默认序列化机制写入对象的类、类签名以及所有非瞬态和非静态字段的值。

反序列化过程读取流以发现应该自动重组的类。它尝试创建该类的新实例，以便随后可以使用流中包含的字段填充它。

如果接收端没有编写的相同类，它将无法工作——你会得到一个`ClassNotFoundException`.

（也就是说，被序列化的类可以使用`writeReplace()`，但这可能超出了这个问题的范围）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:19:58.640

我有时遇到同样的问题，我通过将要通过网络发送的类放在它自己的包中（在发送端和接收端）然后将其导入到发送它的类中来解决它或已收到。请注意，两端的包结构应该相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:22:50.337

作为猜测，您在不同的机器上运行发送者和接收者。您是否检查过他们在每个字段上都有相同版本的此类？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-23T16:29:21.867

是的，我有同样的问题。我已经通过在同一个包上使用相同的序列化类来解决它。将 ObjectOutputStream 和 ObjectInputStream 函数放在同一个包中，分别执行输出、输入或调用。

# ruby - 如何将此数组中的日期转换为 Ruby 中的日期类型对象

> ID：10479482
> 
> 赞同：0
> 
> 时间：2012-05-07T09:14:20.107
> 
> 标签：ruby, date

我有以下数组：

```
open_emails = [["2012-04-21", 5], ["2012-04-20", 1], ["2012-04-22", 4]]; 
```

但我希望它采用以下格式：

```
open_emails = [[4545446464, 5], [35353535, 1], [353535353535, 4]]; 
```

IE。以毫秒为单位的日期

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T09:28:09.917

您可以使用`to_time`和`to_i`方法

```
require 'date' # not required if you're using rails
open_emails = [["2012-04-21", 5], ["2012-04-20", 1], ["2012-04-22", 4]]
open_emails.map { |s, i| [Date.parse(s).to_time.to_i, i] }
# => [[1334959200, 5], [1334872800, 1], [1335045600, 4]] 
```

在 Ruby 1.8 中没有`to_time`方法，您可以使用`Time.mktime`：

```
open_emails.map { |s, i| [Time.mktime(*s.split('-')).to_i, i] } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T10:21:20.980

如果您没有`#to_time`方法（旧 Ruby），您可以手动转换它（使用`Time#local`），或者执行以下操作：

```
Date.parse(s).strftime('%s').to_i 
```

或者，完全跳过`Date`，并使用

```
Time.local(*s.split('-').map{|e| e.to_i}).to_i 
```

# wpf - 如何绑定可见性属性

> ID：10479490
> 
> 赞同：-1
> 
> 时间：2012-05-07T09:14:37.480
> 
> 标签：wpf, visibility, show-hide, adorner

XAML 代码如下：

```
<Helper:BooleanVisibilityValueConverter x:Key="BoolToVisible" />
   <Control x:Name="ResizeDecorator" MouseMove="ResizeDecorator_MouseMove" Template=" {StaticResource ResizeDecoratorTemplate}" Visibility="{Binding IsButtonVisible,Converter= {StaticResource ResourceKey=BoolToVisible},RelativeSource={RelativeSource  TemplatedParent}}" />
<Helper:BooleanVisibilityValueConverter x:Key="BoolToVisible" />
<Control x:Name="ResizeDecorator"  MouseMove="ResizeDecorator_MouseMove" Template="{StaticResource ResizeDecoratorTemplate}" Visibility="{Binding IsButtonVisible,Converter={StaticResource ResourceKey=BoolToVisible},RelativeSource={RelativeSource TemplatedParent}}"  /> 
```

视图模型代码：

```
private bool _IsButtonVisible;
public bool IsButtonVisible
{
    get { return _IsButtonVisible; }
    set
    {
        _IsButtonVisible = value;
        NotifyPropertyChanged("IsButtonVisible");
    }
}

IsButtonVisible =false; 
```

谁能告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:02:12.553

我猜问题是您在模板化父级上绑定到 IsButtonVisible。相反，您需要绑定到模板化父级的 ViewModel/DataContext 上的 IsButtonVisible - 即

```
Visibility="{Binding DataContext.IsButtonVisible,Converter={StaticResource ResourceKey=BoolToVisible},RelativeSource={RelativeSource TemplatedParent}}" 
```

# java - 实现 JNI 时类型指针错误

> ID：10479496
> 
> 赞同：0
> 
> 时间：2012-05-07T09:14:59.050
> 
> 标签：java, c, java-native-interface

当我运行以下命令时：

```
#include<stdio.h>
#include"Package_HelloWorld.h"
#include"Package_Prompt.h"

jstring Java_Package_Prompt_getLine
 (JNIEnv *env, jobject obj,jstring prompt) {
  char buf[128];
  const jbyte *str;
  str = (*env)->GetStringUTFChars(env,prompt,NULL);
  if(str == NULL) {
      return NULL;
  }
  printf("%s",str);
  (*env)->ReleaseStringUTFChars(env,prompt,str);
  scanf("%s",buf);
  return (*env)->NewStringUTF(env,buf); 
```

生成 dll 文件我得到以下错误。

![在此处输入图像描述](../Images/82ceb740650d6872475fdacf64ee496a.png)

我的 IDE 是代码：块。我收到这些错误的原因是什么？

# jsf - 用于 facelets 的 JSF 2 Restful Paths

> ID：10479504
> 
> 赞同：0
> 
> 时间：2012-05-07T09:15:28.850
> 
> 标签：jsf, jsf-2, web.xml, friendly-url

我的 JSF 2.0 基本（可选）web.xml 结构是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app …  version="2.5">
<servlet>
<servlet-name>Faces Servlet</servlet-name>
<servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<context-param>
<param-name>javax.faces.PROJECT_STAGE</param-name>
<param-value>Development</param-value>
</context-param>
<welcome-file-list>
<welcome-file>index.html</welcome-file>
</welcome-file-list>
</web-app 
```

因此，如果我调用 /mypage.jsf 我会得到 mypage.xhtml 这很好，但是：

*   我怎样才能有像**"/mypage" => mypage.xhtml** (没有 *.jsf 扩展名) 这样的行为？

我确定我能做到，我在不记得的地方看到过。将无扩展 uri 与 jsf 映射相关联的 url 模式是什么？

谢谢

# c++ - MAC OS X 10.7 (Lion) 中的网络更改事件注册失败

> ID：10479508
> 
> 赞同：3
> 
> 时间：2012-05-07T09:15:37.883
> 
> 标签：c++, macos, networking, osx-lion

我尝试通过以下代码在 MAC OS X 10.7 (lion) 中注册 network_change 事件：

```
#define kNotifySCNetworkChange "com.apple.system.config.network_change"
void init()
{

   status = notify_register_check(kNotifySCNetworkChange, &token);
   if (status != NOTIFY_STATUS_OK)
   {
       cout << "Event Registration failed" <<endl;
   }
   cout << "Event Registration Success" << endl;

} 
```

......

如果我在示例程序中使用此代码，则它已成功注册。如果我在我的应用程序中使用它，notify_register_check() 函数返回**状态**1000000 (NOTIFY_STATUS_FAILED)。此外，返回的 errno 为 0。

注意：我的应用程序在 Leopard 和 Snow Leopard 中运行没有任何问题（注册成功）

我用谷歌搜索了这个状态，但找不到相关信息。谁能告诉我这个 NOTIFY_STATUS_FAILED 在哪些情况下返回？

* * *

我最近观察到的另一件事是：我们在我的应用程序中使用了**fork()**系统调用。当我尝试在父进程中注册时，事件注册成功。但是子进程中的事件注册失败。为什么它在子进程中失败？？？任何想法！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:58:29.717

errno 为 0 因为通知 API 不是系统调用，而是 Mach API 调用。使用 mach_error () 了解更多细节。叉子不应该是一个问题（它也克隆了马赫端口，在大多数情况下）。事实上，以下代码在 Mountain Lion 上运行良好：

```
#include <notify.h>
#include <iostream>

#define kNotifySCNetworkChange "com.apple.system.config.network_change"

void init()
{

   int token;
   int status = notify_register_check(kNotifySCNetworkChange, &token);
   if (status != NOTIFY_STATUS_OK)
   {
       std::cout << "Event Registration failed" <<std::endl;
   }
   std::cout << "Event Registration Success" << std::endl;

}

int main()
{
 int rc = fork();
 init();

} 
```

# python - 从条目 PYTHON 3 中获取变量

> ID：10479509
> 
> 赞同：0
> 
> 时间：2012-05-07T09:15:45.010
> 
> 标签：python, function, user-interface, variables, tkinter

所以我正在编写这个 GUI 程序（使用 tkinter）并且我在同一个函数中使用了三个 Entryboxes。我想在主函数中使用它们的值，那么如何将这些值放入某种全局变量中，或者以一种可以在不同函数中使用它们的方式？

```
def options():

    options_root = Tk()

    textFrame = Frame(options_root)
    textFrame.grid()

    widthlabel = Label(textFrame, text="w:", justify=LEFT)
    widthlabel.grid(column="0", row="0")
    widthinput = Entry(textFrame)
    widthinput.grid(column="1", row="0")

    heightlabel = Label(textFrame, text="h:", justify=LEFT)
    heightlabel.grid(column="0", row="1")
    heightinput = Entry(textFrame)
    heightinput.grid(column="1", row="1")

    mlabel = Label(textFrame, text="m:", justify=LEFT)
    mlabel.grid(column="0", row="2")
    minput = Entry(textFrame)
    minput.grid(column="1", row="2")

    width = widthinput.get()
    height = heightinput.get()
    m = minput.get()

    start_game_button = Button(options_root, text="Start", justify=LEFT, command=lambda:tabort(options_root))
    start_game_button.grid(column="0",row="3")
    exit_button = Button(options_root, text = "Exit", justify=LEFT, command=exit)
    exit_button.grid(column="1", row="3")

    mainloop()

def main():

    options()

    w = widthinput.get()
    h = heightinput.get()
    m = minput.get()

main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:04:05.863

保留对小部件的引用，然后使用该`get()`方法。如果您将应用程序设计为一个类，这将变得容易得多：

```
import tkinter as tk

class SampleApp(tk.Tk):
    def __init__(self, ...):
        ...
        self.width_entry = tk.Entry(...)
        self.height_entry = tk.Entry(...)
        self.minput_entry = tk.Entry(...)
        ...
    def main(...):
        w = self.width_entry.get()
        h = self.height_entry.get()
        m = self.input_entry.get()
        ...

...
app = SampleApp()
app.mainloop() 
```

# hibernate - Hibernate 标准一对多与嵌入式表

> ID：10479510
> 
> 赞同：2
> 
> 时间：2012-05-07T09:15:47.557
> 
> 标签：hibernate, hibernate-criteria

我有表 A、B、C，其中 B 是添加列的关联表

| 一个 | 1 .. * | 乙| * .. 1 | C |

实体 A 和 B 实体列表

```
@Entity
@Table(name = "a")
public class A {
    //id

    @OneToMany(mappedBy="bPK.a", cascade={CascadeType.ALL})
    private List<B> listB; 

    // getters, setters
} 
```

实体 B 已嵌入 PK

```
@Entity
@Table(name = "b")
public class B {
    @EmbeddedId
    private BPK bPK; 

    // added columns
    // getters, setters
} 
```

嵌入式主键类：

```
@Embeddable
public class BPK implements Serializable {
    private static final long serialVersionUID = 1L;

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="i_a", nullable=false)
    private A a;

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="i_c", nullable=false)
    private C c;

    // getters, setters
} 
```

实体 C

```
@Entity
@Table(name = "c")
public class C {
    @Column(name = "i_c")
    private Long iC;

    @Column(name="name")
    private String name; 

    // getters, setters
} 
```

...并且我想获得这样的对象 A 与具体名称相关联的对象 C

我试图这样做，但它不起作用

```
Criteria criteria = session.createCriteria(A.class);  
criteria.createAlias("listB", "bList")
criteria.add(Restrictions.like("bList.bPK.c.name", "name", MatchMode.ANYWHERE)); 
```

我有以下异常：

org.springframework.orm.hibernate3.HibernateQueryException：无法解析属性：bPK.c.name

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:26:26.627

似乎这个问题被报告为一个错误。

[https://hibernate.atlassian.net/browse/HHH-6963](https://hibernate.atlassian.net/browse/HHH-6963)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:08:03.897

`bPk.c.name`你得到这个的原因是 Hibernate 正在你的 中寻找列`bList (A class)`，显然没有这样的列。您想要实现的目标可以通过我的多个别名来完成（创建别名时，Criteria 也在您当前的表上与该表进行连接）。

因此：

```
Criteria criteria = session.createCriteria(A.class);  
criteria.createAlias("listB", "bList")
    .createAlias("bList.bPk", "bPk")
    .createAlias("bPk.c", "c")
    .add(Restrictions.like("c.name", "name", MatchMode.ANYWHERE)); 
```

我认为 MatchMode.ANYWHERE 是没有必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-31T07:33:46.690

我试图找到一种方法来在一`@CollectionTable`整天的休眠条件下引用集合元素！最后我发现了这个：

[休眠 API 中的 ElementCollection createAlias](https://stackoverflow.com/questions/4873021/elementcollection-createalias-in-hibernate-api)

我需要在集合中引用一个基本元素（整数），希望它也适用于非基本元素。万一有人像我一样迷路了，不要放弃转向HQL，因为有解决办法！！！:)

# inputstream - Java 邮件 getInputStream 左收件人

> ID：10479511
> 
> 赞同：0
> 
> 时间：2012-05-07T09:15:48.050
> 
> 标签：inputstream, jakarta-mail

我正在用 javamail 编写邮件发送方法。我不明白为什么我得到错误：未设置收件人。这是我的代码：

```
public static void sendMail(String to, String subj, String body, String attachmentName, byte[] attachment, String mime) throws Exception {
    Properties p = System.getProperties();
    Session session = Session.getInstance(p);
    MimeMessage dummyMessage = new MimeMessage(session);
    dummyMessage.setFrom(new InternetAddress(LovProvider.getOpzioni().get("mail.address")));
    dummyMessage.setSubject(subj);
    String[] tos = to.split(";");
    Address[] tosAddr = new InternetAddress[tos.length];
    for (int i = 0; i < tos.length; i++) {
        tosAddr[i] = new InternetAddress(tos[i]);
    }
    dummyMessage.setRecipients(Message.RecipientType.TO, tosAddr);
    Multipart mp = new MimeMultipart();
    MimeBodyPart bp = new MimeBodyPart();
    bp.setText(body);
    mp.addBodyPart(bp);
    if (attachmentName != null && attachment != null) {
        DataSource dataSource = new ByteArrayDataSource(attachment, mime);
        MimeBodyPart attachBodyPart = new MimeBodyPart();
        attachBodyPart.setDataHandler(new DataHandler(dataSource));
            attachBodyPart.setFileName(attachmentName);
            mp.addBodyPart(attachBodyPart);
        }
        dummyMessage.setContent(mp);
        //***** DEBUGGING here I find the recipient
        sendMail(dummyMessage.getInputStream());
    }

    public static void sendMail(InputStream emlFile) throws Exception {
        Properties props = System.getProperties();
        props.put("mail.host", LovProvider.getOpzioni().get("mail.out.host"));
        props.put("mail.transport.protocol", LovProvider.getOpzioni().get("mail.out.protocol"));
        props.put("mail." + LovProvider.getOpzioni().get("mail.out.protocol") + ".port", LovProvider.getOpzioni().get("mail.out.port"));
        Session mailSession = Session.getDefaultInstance(props, PasswordAuthentication.getAuth(LovProvider.getOpzioni().get("mail.out.user"), LovProvider.getOpzioni().get("mail.out.password")));
        MimeMessage message = new MimeMessage(mailSession, emlFile);
        //***** DEBUGGING here I CAN NOT find the recipient
        Transport.send(message);
    } 
```

正如我在调试模式下的评论中所写的，我可以看到在第一部分中正确设置了收件人，如果我将其转换为 InputStream 到第二种方法，我再也找不到收件人了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:02:38.757

我无法调试您的代码，但也许这个示例可以帮助您：有关通过/来自 gmail 发送/接收邮件的示例

[http://famulatus.com/component/search/?searchword=gmail&searchphrase=all&Itemid=9999](http://famulatus.com/component/search/?searchword=gmail&searchphrase=all&Itemid=9999)

# opengl-es - GLSL OpenGL ES 2.0 (iOS) 中是否有噪声函数？

> ID：10479521
> 
> 赞同：5
> 
> 时间：2012-05-07T09:16:38.610
> 
> 标签：opengl-es, random, glsl, noise, fragment-shader

或者任何对应物？如何生成便宜的随机数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T10:10:33.437

GLSL ES 没有自带噪音功能，桌面 GLSL 噪音功能几乎*没有*实现。

但是，有一些[免费软件噪音功能可用](https://github.com/ashima/webgl-noise/wiki)。他们应该相当体面和快速。我自己从未使用过它们，但它们应该可以工作。如果你担心的话，这是 MIT 许可的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:28:22.490

定义“便宜”。

随机数在计算机中的工作方式是，它们并不是真正随机的。您从一个数字（种子）开始，对于您想要的每个随机数，您对该数字进行一些花哨的计算以获得另一个看起来随机的数字，然后将该数字用作您的随机数和下一个随机数的种子数字。有关血腥细节，请参见[此处](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)。

问题是，该过程本质上是顺序的，这对着色器不利。

从理论上讲，您可以在片段着色器中编写一个函数，该函数可以从片段位置和可能的每帧递增的一些统一 int 中产生一些散列，但这对于片段着色器来说是一项非常多的工作，只是为了产生一些东西看起来像噪音。

在 OpenGL 中产生噪声效果的常规技术是创建噪声纹理并让着色器以各种方式使用它。您可以简单地将纹理作为标准纹理应用到您的表面，或者您可以拉伸它或钳制它的颜色值。对于随时间变化的效果，您可能想要使用 3D 纹理，或者拥有更大的 2D 纹理，并通过统一将随机纹理坐标偏移量传递给每帧的片段着色器阶段。

另请查看[perlin noise](http://www.google.com/url?sa=t&rct=j&q=perlin%20noise&source=web&cd=1&ved=0CGQQFjAA&url=http://en.wikipedia.org/wiki/Perlin_noise&ei=JpWnT9S1AYi0iQeU3pW6Aw&usg=AFQjCNEg-ZxRBMKgV6RsWZbCySp0ibuePA&cad=rja)，它基本上使用了上述效果的变体。

# java - 从 cmd 运行 .class java 文件。问题

> ID：10479523
> 
> 赞同：-5
> 
> 时间：2012-05-07T09:16:41.080
> 
> 标签：java

使用以下命令从 cmd 生成类文件，我得到输出：

![在此处输入图像描述](../Images/ccbd6d4d47265f703c1ebe4b84998606.png)

错误是：“错误：无法找到或加载主类 CustomerManager.class”

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T09:18:01.843

`java CustomerManager`

没有`.class`扩展名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:19:51.680

只需输入 cmd `java CustomerManager`，无需添加`.class`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T09:22:01.417

在`java`命令`.`字符中显示一个`/`字符并用于目标类的路径。为了解决您的问题，请执行不带`.class`扩展名的命令，如下所示：

`java CustomerManager`

（你可以在网上搜索一下，非常有解释它的页面。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T09:26:01.990

在您的代码中，将您的类保持为 Public 然后执行

```
java CustomerManager 
```

如果在 class 之前或之后没有任何空格，还请在 IDE 中进行交叉检查。

希望这可以帮助 。

# android - 片段中的 getView 有时返回 null

> ID：10479525
> 
> 赞同：6
> 
> 时间：2012-05-07T09:16:55.547
> 
> 标签：android, android-fragments

我有一个带有 ViewPager 的应用程序，其中包含两个片段：一个主片段和一个列表片段。如果选择了列表中的某些内容，则会引发在活动中处理的事件。活动切换到主片段并调用“setSelectedItem”方法。在该方法中，我使用 getView() 来查找特定视图以根据所选项目更改文本。

大多数情况下它都有效，但有时 getView 返回 null 我不知道为什么。

pagerAdapter 在活动的 OnCreate 中创建：

```
this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager());
ViewPager pager = (ViewPager)super.findViewById(R.id.viewpager);
pager.setAdapter(this.mPagerAdapter); 
```

寻呼机适配器在其构造函数中创建两个片段的实例：

```
public PagerAdapter(FragmentManager fm) {
    super(fm);
    this.main = MainFragment.newInstance();
    this.list = ListFragment.newInstance();
} 
```

这是在选择列表中的项目时调用的活动中的方法：

```
ViewPager pager = (ViewPager)super.findViewById(R.id.viewpager);
pager.setCurrentItem(0, true);
((MainFragment)mPagerAdapter.getItem(0)).setSelectedItem(id); 
```

最后，这是 MainFragment 中 setSelectedItem 方法中导致问题的行：

```
TextView s = (TextView)getView().findViewById(R.id.CurrentSelection); 
```

我尝试了几件事，但问题仍然不规律地发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T16:31:49.933

首先，我不是 100% 确定，但我有几点需要提及。首先，我不喜欢您的使用方式`this`，并且`super`喜欢那样，它们似乎含糊不清，我认为考虑到预编译您知道它们的值，更好的方法是更准确。我认为如果您将代码更改为以下内容，它会有所帮助（只是预感）。

```
// No need for 'this' and 'super' here, you are within the activity
mPagerAdapter  = new PagerAdapter(getSupportFragmentManager());
ViewPager pager = (ViewPager)findViewById(R.id.viewpager);
pager.setAdapter(mPagerAdapter); 
```

* * *

```
public PagerAdapter(FragmentManager fm) {
    super(fm);
    // No need for 'this' here, you are within the class
    main = MainFragment.newInstance();
    list = ListFragment.newInstance();
} 
```

* * *

```
// No need for 'super' here, you are within the activity
ViewPager pager = (ViewPager)findViewById(R.id.viewpager);
pager.setCurrentItem(0, true);
((MainFragment)mPagerAdapter.getItem(0)).setSelectedItem(id); 
```

* * *

```
// Here use 'getActivity()' instead of 'getView()'
TextView s = (TextView)getActivity().findViewById(R.id.CurrentSelection); 
```

让我知道会发生什么，干杯。

# ruby-on-rails - Ruby - 验证.. 登录问题

> ID：10479527
> 
> 赞同：0
> 
> 时间：2012-05-07T09:16:59.867
> 
> 标签：ruby-on-rails, ruby, login, authentication

您好我想用 Ruby on Rails 创建一个身份验证。我没有错误 - 消息但我无法登录。

在我的本地主机上出现这张图片（抱歉我不能发布屏幕）

* * *

**我的工作时间**

2011 年 | 登录

* * *

登录 - 按钮不起作用。

这是我的代码：

**应用程序.html.erb**

```
<!DOCTYPE html>
<html>
<head>
  <title>Mytimes</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
<div id="container">
    <div id="header">
        <h1> My Workingtimes </h1>
    </div>
    <div id="content">
        <% if flash[:notice] %>
        <p id="notice">
            <%= flash[:notice] %>
        </p>
        <% end %>

        <% if flash[:alert] %>
        <p id= "alert">
            <%= flash[:alert] %> 
        </p>
        <% end %>
    </div>
    <div id="footer">
        &copy; 2012 |
        <% if user_signed_in? %>
        <%= link_to "logout", logout_path, method: :delete %> 
        <% else %>
        <%= link_to "login", login_path %>
        <% end %> 
    </div>
</div>
</body>
</html> 
```

**路线.rb**

```
Mytimes::Application.routes.draw do
  resources :mytimes
  resources :users, :only => [:new, :create]
  resources :sessions, :only => [:create]

  get "login" => "sessions#new", as: "login"
  post "sessions" => "sessions#create", as: "sessions"
  delete "logout" => "sessions#destroy", as: "logout" 
```

**application_controller.rb**

类 ApplicationController < ActionController::Baseprotect_from_forgery

```
private

  def current_user
    if session[:user_id]
      @current_user ||= User.find(session[:user_id])
    end
  end

  def user_signed_in?
    current_user.present?
  end

  helper_method :user_signed_in?
end 
```

**session_controller.rb**

```
class SessionsController < ApplicationController
  def new
end

  def create
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password])
        session[:user_id] = user.id
        redirect_to mytimes_path,
          notice: "Your are signed!"
    else
      flash.now.alert = "Failed Email or Password!"

      render "new"
    end
end

  def destroy
    session[:user_id] = nil
    redirect_to mytimes_path,
      notice: "You are logged out!"
end

end 
```

**会话/new.html.erb**

```
<h2> Log In </h2>

<%= form_tag sessions_path do %>
    <p> 
        <%= label_tag :email %>
        <%= text_field_tag :email, params[:email] %>
    </p>
    <p> 
        <%= label_tag :password %>
        <%= password_field_tag :password %>
    </p>
    <p><%= submit_tag "Log In" %></p>

<% end %> 
```

我很感谢你的帮助。

**用户/new.html.erb**

```
<h2>New User</h2>
<%= form_for @user do |f| %>
    <% if @user.errors.any? %>
        <ul>
            <% @user.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
        </ul>
    <% end %>

<p>
    <%= f.label :email %>
    <%= f.text_field :email %>
</p>
<p>
    <%= f.label :password %>
    <%= f.password_field :password %>
</p>
<p>
    <%= f.label :password_confirmation %>
    <%= f.password_field :password_confirmation %>
</p>
<p><%= f.submit %></p> 
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:21:57.890

`yield`你的`application.html.erb`. 因此不会显示视图。

# wordpress - wordpress -> 自定义分类法 -> 分层（false，表示类似标签）-> 模板

> ID：10479529
> 
> 赞同：0
> 
> 时间：2012-05-07T09:17:08.733
> 
> 标签：wordpress, custom-taxonomy

我想显示自定义分类法。但是当我尝试只显示分类法时，wordpress 会将我带到 404 页。

我有电视连续剧分类，我可以通过使用模板 {taxonomy-tv_series.php} “tv_series” 是分类名称来显示电视连续剧分类中的所有术语。贝娄是工作网址。

[http://mysite.com/tv-series/lost/](http://mysite.com/tv-series/lost/)

我可以在 {taxonomy-tv_series.php} 上显示所有丢失的帖子。但我想显示/列出所有电视剧本身

tv-series-template.php 并显示。

a) 迷路 b) 越狱 c) 绝命毒师等。

通过使用这样的网址

[http://mysite.com/tv-series/](http://mysite.com/tv-series/)

如果我的问题对你们来说不清楚，请告诉我，我会努力使它更有用。

我正在使用漂亮的永久链接“%spost_name%s”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:15:51.513

目前 WordPress 不提供显示分类中标记的所有内容的存档。

您可以创建一个名为“TV Series”的[自定义页面模板并](http://codex.wordpress.org/Pages#Page_Templates)[手动查询](http://codex.wordpress.org/Class_Reference/WP_Query)与您的分类相关的所有帖子。

或者，您可以创建一个[自定义帖子类型](http://codex.wordpress.org/Post_Types#Custom_Types)，例如称为“电视节目”并将其连接到您的分类。然后，您将使用 archive-{post-type}.php 显示您的分类中的所有帖子。

您可以在 codex 页面上阅读有关模板层次结构的更多信息：http: [//codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

# asp.net-mvc - 在 ASP.Net MVC 中仅编辑部分模型

> ID：10479542
> 
> 赞同：2
> 
> 时间：2012-05-07T09:17:59.310
> 
> 标签：asp.net-mvc, razor

我对 MVC 很陌生，偶然发现了一个问题。我用谷歌搜索了很多，但找不到解决方案。

我正在使用带有角色的 ASP.Net Membership。

假设我有一个具有属性的产品模型：

*   姓名
*   艺术编号
*   类别

我怎样才能实现这一点，所以只允许不同的角色 cab 编辑对象的一部分？（例如，假设一个角色不能更改产品的类别。）

同一个模型可以有不同的视图，或者同一个对象可以有不同的模型吗？

如果我遗漏了一些属性，当我保存它们时它们将具有 NULL 值。我尝试使用`@HTML.HiddenFor(...)`，但随后对这些字段的验证失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:35:52.997

ViewModel 听起来可以解决问题。对于除了最琐碎的场景之外的所有场景，当您将模型和视图紧密耦合时，您都会遇到问题。

如果您以前没有使用过它们，ViewModel 只是您正在渲染的特定视图的一个类（模型）。您可以在 ViewModel 上自定义所需的属性和验证，然后将其绑定到 Model，因此该结构更加灵活且易于使用。

[ViewModels http://kazimanzurrashid.com/posts/asp-dot-net-mvc-viewmodel-usage-and-pick-your-best-pattern](http://kazimanzurrashid.com/posts/asp-dot-net-mvc-viewmodel-usage-and-pick-your-best-pattern)有详细介绍

编辑

然后，您可以为每个角色拥有一个 ViewModel，但如果您只是希望保护某个属性不被某些角色更新，则应该有其他解决方案，例如将 html 输入设置为禁用，然后在服务器上测试该类别value 仍处于其原始状态（请注意，您应该始终执行这样的测试，因为 Post 请求可以更改）。

# java - 如何在“主”线程上运行 DefaultMessageListenerContainer

> ID：10479547
> 
> 赞同：2
> 
> 时间：2012-05-07T09:18:19.700
> 
> 标签：java, spring, asynchronous, jms, spring-integration

我有一个案例，我想在同一个“主”线程中运行 DefaultMessageListenerContainer。现在它使用 SimpleAsyncTaskExecutor 每次收到消息时都会产生新线程。

我们有一个测试用例，它连接到不同的分布式系统并进行处理，最后它断言了一些事情。由于 DefaultMessageListenerContainer 在单独的线程中运行，主线程在 DefaultMessageListenerContainer 完成之前返回并开始执行断言。这会导致测试用例的失败。作为解决方法，我们让主线程休眠了几秒钟。

示例配置

```
 <int-jms:message-driven-channel-adapter
        id="mq.txbus.publisher.channel.adapter"
        container="defaultMessageListenerContainer"
        channel="inbound.endpoint.publisher"
        acknowledge="transacted"
        extract-payload="true" />

  <beans:bean id="defaultMessageListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <beans:property name="connectionFactory" ref="mockConnectionFactory"/>
    <beans:property name="destination" ref="publisherToTxmQueue"/>
    <beans:property name="taskExecutor" ref="taskExecutor"/>
    <beans:property name="maxMessagesPerTask" value="10"/>
    <beans:property name="sessionTransacted" value="true"/>
</beans:bean>

<beans:bean id="taskExecutor" class="org.springframework.scheduling.timer.TimerTaskExecutor" /> 
```

我在这里尝试使用 TimerTaskExecutor，因为它创建了单个线程，但该线程与主线程分开，因此问题未解决。我尝试使用 SyncTaskExecutor 但这也不起作用（或者我可能会提供正确的属性值？）。

**答：**
我们通过使用 SimpleMessageListenerContainer 解决了这个问题。这是新配置

```
 <int-jms:message-driven-channel-adapter
        id="mq.txbus.publisher.channel.adapter"
        container="messageListenerContainer"
        channel="inbound.endpoint.publisher"
        acknowledge="transacted"
        extract-payload="true" />

<beans:bean id="messageListenerContainer" class="org.springframework.jms.listener.SimpleMessageListenerContainer">     
    <beans:property name="connectionFactory" ref="mockConnectionFactory"/>     
    <beans:property name="destination" ref="publisherToTxmQueue"/>
    <beans:property name="sessionTransacted" value="true"/>
    <beans:property name="exposeListenerSession" value="false"/>
</beans:bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:26:26.613

首先你必须明白[jms](/questions/tagged/jms "显示标记为“jms”的问题")本质上是异步的，不会阻塞。这意味着一旦您将消息发送到队列，它将由另一个线程处理，可能在另一台机器上，如果消费者关闭，可能会在几分钟或几小时后处理。

阅读测试用例的描述，您似乎正在做一些系统/集成测试。不幸的是，除了等待，您无能为力，但是您不应盲目等待，因为这会使您的测试变慢但也不是很稳定 - 无论您等待多长时间，在繁忙的系统或一些冗长的 GC 过程中，您的测试可能仍然需要时间即使没有错误。

因此，与其休眠固定的秒数，不如休眠约 100 毫秒并检查仅在消息处理完成时才满足的某些条件。例如，如果处理消息将一些记录插入数据库，请定期检查数据库。

更优雅的方式（无需忙于等待）是实现[请求/回复模式](http://www.eaipatterns.com/RequestReplyJmsExample.html)，请参阅[*如何使用 JMS 实现请求响应？*](http://activemq.apache.org/how-should-i-implement-request-response-with-jms.html)实施细节。基本上，在发送消息时，您定义一个回复队列并阻止等待该队列中的消息。处理完原始消息后，消费者应将回复消息发送到定义的队列。当您收到该消息时 - 执行所有断言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:58:34.747

如果它用于测试目的，那么为什么不使用 CyclicBarrier 在 jms 活动完成后运行断言。

# objective-c - 在选择单元格时防止蓝色背景

> ID：10479549
> 
> 赞同：0
> 
> 时间：2012-05-07T09:18:30.483
> 
> 标签：objective-c, uitableview

我想删除当我触摸表格视图中的单元格时出现的选择颜色。

在 IB 中有一个“显示选择”复选框，它什么都不做，据我所知，这似乎只是 IB 中的一个错误。

但是还有 [cell setSelectionStyle:UITableViewCellSelectionStyleNone]; 我可以设置到每个单元格。

这也无济于事，所以这就是我被卡住的地方，所有文档都说如果我设置了这个属性，它不应该出现，但它确实出现了。

我在 UINavigationController 上推送另一个 UIViewController，当我返回有问题的视图时，单元格上的蓝色背景被卡住，直到我触摸另一个。

唯一特别的是我在故事板的帮助下实例化了这个 UITableViewController 并且我使用了原型单元格。然后我把它放在 UIScrollView 中，以便在多个 UITableViewControllers 之间进行水平分页。执行此操作时无法访问导航控制器，因此我将 UINavigationController 传递给 UITableView。

抱歉，我不能让关键字显示为代码，它说我应该按 Tab 键然后输入 $ 但这会将我的光标移动到标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:07:07.447

您可以尝试`selectedBackgroundView`像这样设置您的单元格：

```
customCell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]]; 
```

在委托方法中`cellForRowAtIndexPath`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:24:09.290

从您可以使用的代码中（例如灰色）：

```
cell.selectionStyle = UITableViewCellSelectionStyleGray; 
```

并将其放在：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

在您的视图控制器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:18:35.590

解决方案是在 IB 中的原型单元格上设置样式。关于原型单元，许多事情都很奇怪。

# java - 游戏框架中的 Cron Job

> ID：10479556
> 
> 赞同：2
> 
> 时间：2012-05-07T09:19:20.763
> 
> 标签：java, asynchronous, playframework, cron, playframework-1.x

我正在尝试使用 Play Framework 创建 Web 服务，并且我想通过[调度](http://www.playframework.org/documentation/1.2.3/jobs#scheduling)加入它，每分钟都会调用`getRunJob()`.

它在直接调用时有效`http://localhost:9000/run`，但是当我尝试从我的`Scheduler`班级使用`WS.WSRequest resp = WS.url("localhost:9000/run");`它调用时会出错`java.lang.IllegalArgumentException: Illegal URL: localhost://null`。

我的代码有什么问题吗？请指教，谢谢...

**应用程序.java**

```
public class Application extends Controller {

    public static void index() {
        render();
    }

    public static void getRunJob() {
        SimpleDateFormat format = new SimpleDateFormat("HH:MM");
        renderText("Running... " + format.format(new Date()));
    }

} 
```

**调度程序.java**

```
@On("1 * * * * ?")
public class Scheduler extends Job {

    @Override
    public void doJob() {
        System.out.println("Test");
        WS.WSRequest resp = WS.url("localhost:9000/run");
        System.out.println(resp.get().getString());
    }
} 
```

**路线**

```
GET     /                                       Application.index
GET     /run                                    Application.getRunJob 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:58:23.703

将协议添加到 WS.url：

```
WS.WSRequest resp = WS.url("http://localhost:9000/run"); 
```

# javafx - 拖动时绘制圆角矩形失败

> ID：10479560
> 
> 赞同：0
> 
> 时间：2012-05-07T09:19:34.863
> 
> 标签：javafx, javafx-2

我试图在拖动鼠标时在 javafx 中绘制一个带有圆角的简单矩形。第一个问题：我不能让左上角变圆。第二个问题：我希望我的应用程序能够绘制漂亮且完整的圆角矩形，而不像我图片中的第二个。请问，我该如何解决这些问题？在此先感谢您的帮助。

这是我的代码：

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;

public class Main extends Application {
  public static void main(String[] args) {
      launch(args);
  }

  public void start(Stage stage){
      stage.setTitle("Test");        
      root = new BorderPane();     
      Scene scene = new Scene(root, 400, 400);
      paintings = new Group();
      stage.setScene(scene);

      canvas = new Rectangle(0, 0, stage.getScene().getWidth(), stage.getScene().getHeight());
      canvas.setFill(Color.WHITE);

      addHandlers();

      root.setCenter(canvas);  
      root.getChildren().add(paintings);
      stage.show();
   }

  private void paintRectangle(){
      roundedRect = new Rectangle(pressedX, 
                    pressedY, 
                    draggedX - pressedX, 
                    draggedY - pressedY);
      roundedRect.setFill(Color.RED);
      roundedRect.setArcHeight(40);
      roundedRect.setArcWidth(40);        
      paintings.getChildren().add(roundedRect);
  }

  private void addHandlers(){
     canvas.setOnMousePressed(new EventHandler<MouseEvent>() {

          @Override
          public void handle(MouseEvent me) {                
              pressedX = me.getX();
              pressedY = me.getY();
          }
      });

     canvas.setOnMouseReleased(new EventHandler<MouseEvent>() {

          @Override
          public void handle(MouseEvent me) {                
              /* If I make the drawing in here, I get round corners, but it doesn't get drawn while dragging*/
              //paintRectangle();
          }
      });

      canvas.setOnMouseDragged(new EventHandler<MouseEvent>() {

          @Override
          public void handle(MouseEvent me) {                
              draggedX =  me.getX();
              draggedY =  me.getY();
              paintRectangle();

          }
      });
  }
  double pressedX, pressedY;
  double draggedX, draggedY;
  Rectangle canvas;
  Group paintings;
  Rectangle roundedRect;
  BorderPane root;

} 
```

这是我的照片： ![不是我期望的圆角矩形](../Images/6b30e2ff716e747180aeb5b3bd7be0e5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:46:28.270

我无法检查您的代码，但这是另一种方法。您可以将其与您的代码合并：

```
import javafx.application.Application;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;

public class Daer extends Application {

    BorderPane pane;
    Rectangle rect;
    SimpleDoubleProperty rectinitX = new SimpleDoubleProperty();
    SimpleDoubleProperty rectinitY = new SimpleDoubleProperty();
    SimpleDoubleProperty rectX = new SimpleDoubleProperty();
    SimpleDoubleProperty rectY = new SimpleDoubleProperty();

    @Override
    public void start(Stage stage) {

        pane = new BorderPane();
        Scene scene = new Scene(pane, 800, 600);
        stage.setScene(scene);

        scene.setOnMouseDragged(mouseHandler);
        scene.setOnMousePressed(mouseHandler);
        scene.setOnMouseReleased(mouseHandler);

        rect = getNewRectangle();
        rect.widthProperty().bind(rectX.subtract(rectinitX));
        rect.heightProperty().bind(rectY.subtract(rectinitY));
        pane.getChildren().add(rect);
        stage.show();
    }

    EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent mouseEvent) {

            if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {
                rect.setX(mouseEvent.getX());
                rect.setY(mouseEvent.getY());
                rectinitX.set(mouseEvent.getX());
                rectinitY.set(mouseEvent.getY());
            } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED) {
                rectX.set(mouseEvent.getX());
                rectY.set(mouseEvent.getY());
            } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_RELEASED) {
                // Clone the rectangle
                Rectangle r = getNewRectangle();
                r.setX(rect.getX());
                r.setY(rect.getY());
                r.setWidth(rect.getWidth());
                r.setHeight(rect.getHeight());
                pane.getChildren().add(r);

                // Hide the rectangle
                rectX.set(0);
                rectY.set(0);
            }
        }
    };

    private Rectangle getNewRectangle() {
        Rectangle r = new Rectangle();
        r.setFill(Color.web("blue", 0.1));
        r.setStroke(Color.BLUE);
        r.setArcHeight(40);
        r.setArcWidth(40);
        return r;
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

# c++ - C++0x 中的 Lambda：错误：请求从非标量类型转换

> ID：10479564
> 
> 赞同：3
> 
> 时间：2012-05-07T09:19:47.360
> 
> 标签：c++, qt, lambda

我在编译 lambda 函数时遇到了问题：

```
... (int level = 3) ...
QString str = [level] {QString s;for(int i=0;i++<level;s.append(" "));return s;}; 
```

错误内容：

```
error: conversion from 'GainStatistic::getWidgetAndProps(QObject*, int)::<lambda()>' to non-scalar type 'QString' requested 
```

我试过这个变种：

```
... (int level = 3) ...
QString str ([level] {QString s;for(int i=0;i++<level;s.append(" "));return s;});

error: no matching function for call to 'QString::QString(GainStatistic::getWidgetAndProps(QObject*, int)::<lambda()>)' 
```

但是函数中的 lambda 表达式只是某种类型的值？是对的吗？因此，`QString(lambda-that-returns-QString)`必须调用`QString::QString(const QString& ref)`构造函数，这必须工作：

```
... (int level = 3) ...
QString str([level] {const QString& ref = "123";return ref;}); //leads to the same error 
```

另一种变体：

```
QString str = [level]->QString {QString s;for(int i=0;i++<level;s.append(" "));return s;};

error: expected token ';' got 'str' 
```

MinGW 4.6.1

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T09:21:32.307

您尝试将 lambda 分配给 a `QString`。你期望会发生什么？不带参数的 lambda 是一个空函数。你需要调用它来获取它的返回值。

例如

```
int x = [] { return 23; }();
                         ^^
                        call 
```

另外，感谢您向我展示了无参数 lambda 的语法。我不知道这是可能的。我也有点不确定它是否真的合法。

**编辑：**这是合法的。5.1.2

```
lambda-expression:
    lambda-introducer lambda-declarator{opt} compound-statement

lambda-declarator:
    (parameter-declaration-clause) mutable{opt} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:24:38.077

Lambda 是具有基本结构的匿名函数`[capture](arguments){code}`。您没有将参数传递给您的 lambda。我想你想要

```
QString str = [](int x){QString s;for(int i=0;i++<x;s.append(" "));return s;} (level);
//            ^^ lambda starts here                         argument to lambda ^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:28:11.617

来自 C++11 标准，5.1.2.2（由我缩短）

> *lambda 表达式*的类型（也是闭包对象的类型）是唯一的、未命名的非联合类类型 - 称为*闭包类型*- 其属性如下所述。[更多文字如下]

所以，其他人说`QString`的和 lambda 的类型是不兼容的。

# android - Android - 拍照小

> ID：10479567
> 
> 赞同：0
> 
> 时间：2012-05-07T09:19:52.900
> 
> 标签：android, camera, resize, image

我需要为我的 Android 应用程序，用相机拍摄一张小尺寸 (> 1MB) 的照片。但是我无法调整用相机获得的文件的大小，然后将其保存到手机中。如果有人想裁剪照片或要求用户更改相机设置。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:40:55.340

获得位图后，使用

```
File imageFile = new File(pathToSaveYourNewFile, whateverNameForNewSmallPicture.jpg);
OutputStream out = null;
out = new FileOutputStream(imageFile);
yourBitmapFromTheOriginalFile.compress(Bitmap.CompressFormat.JPG, 80, out);
out.flush();
out.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:24:54.583

```
/* Set bitmap options to scale the image decode target */
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;

    /* Decode the JPEG file into a Bitmap */
    Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);

    /* Test compress */
    File imageFile = new File(picturePath);
    try{
        OutputStream out = null;
        out = new FileOutputStream(imageFile);
        //Bitmap bitmap = BitmapFactory.decodeFile(picturePath);

        bitmap.compress(Bitmap.CompressFormat.JPEG,80,out);
        out.flush();
        out.close();
    }catch(Exception e){
        Log.e("Dak","Erreur compress : "+e.toString());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:26:45.810

如果你能拍照，你可能知道它的名字。然后您可以简单地再次打开图像并调整图像大小，请参阅[http://www.anddev.org/resize_and_rotate_image__-_example-t621.html](http://www.anddev.org/resize_and_rotate_image_-_example-t621.html)

# c# - WCF 服务 (.NET 4.0) 可以有一个 .NET 2.0 客户端吗？

> ID：10479569
> 
> 赞同：0
> 
> 时间：2012-05-07T09:19:58.480
> 
> 标签：c#, wcf, .net-4.0, .net-2.0

场景是这样的：
我有一个运行良好的 .NET 4.0 客户端-服务器应用程序。
我需要创建一个可以访问服务器的 UserControl，但需要在 .NET 2.0 中创建（因为客户应用程序是 .NET 2.0）

是否存在从 2.0 客户端访问 .NET 4.0 WCF 服务的方法？

注意：
它不是一个 Web 服务，而是一个独立的 .exe 服务器
没有使用验证
传输的数据几乎是基本的（包含数组和基本类型的类）
它使用客户端回调，因此协议 il net.tcp
可以选择我可以更改协议仍然可以使用回调

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:57:48.557

您需要将 WCF 公开为 Web 服务：

*   [如何：将 WCF 服务也公开为 ASMX Web 服务](http://kjellsj.blogspot.com.es/2006/12/how-to-expose-wcf-service-also-as-asmx.html)
*   [将 WCF 服务公开为传统样式的 Web 服务 .asmx](http://sliong.wordpress.com/2011/09/21/expose-wcf-service-as-traditional-style-web-service-asmx/)

您的工作就像它是一个很好的旧 .asmx 服务（添加参考等）。

如果您的 WCF 服务托管在 .exe、Web 应用程序、Windows 服务中，则无关紧要......

在带有 .asmx 服务的 .NET 2.0 中支持回调是不可能的，因此您必须使用TcpListener和[TcpClient之类的东西来模拟](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient%28v=vs.80%29.aspx)[callbak](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener%28v=vs.80%29.aspx)。

不幸的是，这必须从头开始，但您可以使用 WCF 实现中的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:36:42.693

如果您的 WCF 4.0 服务使用基本的 http 绑定，您可以在 .NET 2.0 或任何其他语言中使用它。

只需使用 WSDL.exe 生成代理并在 .NET 或任何其他语言中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:27:20.323

是的，您可以通过在您的客户端项目中添加 .cs 文件（代理类）的引用，在 .net 2.0 客户端中使用 WCF 服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T13:14:42.797

问题前一阵子解决了。嗯，还真没解决……

在看了一篇关于 .NET WCF 性能的文章后，我决定使用 .NET 远程处理。它更快、兼容本机 .NET 2.0 并且可以正常工作。

# iphone - 基于 uitextview 中的行数获取子字符串

> ID：10479573
> 
> 赞同：0
> 
> 时间：2012-05-07T09:20:37.223
> 
> 标签：iphone, ios

从 UITextview 我可以获取给定文本的行数，如果超过 4 行我想截断其余的，那么如何获取子字符串的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:05:44.790

它将限制用户在 UITextview 中输入超过 4 行

```
 - (BOOL)textView:(UITextView *)aTextView shouldChangeTextInRange:(NSRange)aRange replacementText:(NSString*)aText
    {

        if (textView.contentSize.height/textView.font.lineHeight>4) {
            return NO;
        }
        else
            return YES;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:12:55.880

```
NSMutableString *str = [[NSMutableString alloc] initWithString:textView.text];
static int numberOfLines = 0;
int nOC = 1;
while (nOC < [textView.text count] && numberOfLines < 4) {
    if ([[str substringWithRange:NSMakeRange(nOC,1)] isEqualToString:@"\n"];  ) {
        numberOfLines++;
    }
    nOC++;
}

NSString *finalString = [str substringWithRange:NSMakeRange(1,nOC)]; 
```

我希望这对你有用。我计算了直到第 4 个“\n”的字符数，并使用 substringWithRange 来提取所需的字符串。我没有尝试这段代码，但这个逻辑应该可以工作，或者至少可以帮助你编写代码。快乐编码:)

# php - 仅当 LiveValidation 成功时，在表单提交后打开 Fancybox

> ID：10479576
> 
> 赞同：0
> 
> 时间：2012-05-07T09:20:57.480
> 
> 标签：php, javascript, fancybox, livevalidation

我在涉及 1-4 个图像上传字段的提交表单上使用 LiveValidation。客户不耐烦的是，一旦点击提交，表单就开始上传图片，根据图片的大小需要时间。

我想要实现的是，一旦用户提交表单并且 LiveValidation 通过，就会出现一个 Fancybox 弹出窗口，其中包含加载图像和一些文本。我不想要加载进度条，因为客户端的主机没有 PECL 上传进度扩展或 APC，并且出于兼容性原因我不想使用 AJAX。

我只想让加载图像在屏幕上旋转，以便用户知道他们必须等待。

我尝试为其创建一个函数并将其设置为在“onSubmit”和“onClick”事件上执行，但无论哪种情况，即使LiveValidation指出的表单中存在错误，也会出现弹出窗口.

此外，我假设一旦图像上传并提交表单，页面将自动重定向到确认。

我不擅长 javascript，因此无法操纵脚本来达到预期的效果。

对此的任何帮助将不胜感激。另外，如果有人有更好的解决方案，那也很棒！

谢谢 ：）

* * *

对于实时验证，我直接从网站使用脚本：http: [//livevalidation.com/](http://livevalidation.com/)

这是 livevalidation 和 fancybox 启动：

```
 <script type="text/javascript">
    $(document).ready(function () { 
        $(".form-validate-label").validate();
        $(".form-validate-p").validate({errorElement: "p"});
        $(".popup").fancybox();
    });

    </script> 
```

表单本身非常大，但这里是字段区域：

```
 <form name="frmsubmission" id="frmsubmission" method="post" class="form-validate-p" enctype="multipart/form-data" action="">
    ...
    ...
    <div class="regrow1">
            <div>
                <label class="label-large"><span class="required">*</span>Headshot Image File:</label>
                <input class="required"  name="head_shot" id="head_shot" size="40" type="file" />
            </div>
        </div>
        <div class="regrow2">
            <div>
                <label class="label-large">Attach Resume:</label>
                <input name="txtcv" id="txtcv" size="40" type="file" />
            </div>
        </div>
        <div class="regrow1">
            <div>
                <label class="label-large">Full body shot Image File:</label>
                <input  id="body_shot" name="body_shot" size="40" type="file" />
            </div>
        </div>
        <div class="regrow2">
            <div>
                <label class="label-large">Sanpshot Image File:</label>
                <input id="snap_shot" name="snap_shot" size="40" type="file" />
            </div>
        </div>

        <br /><br />

        <div id="submitrow">
        <button id="submit" name="submit" value="Submit" type="submit">Submit</button>
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:45:55.473

而不是使用fancybox和其他方法。如果您使用 plupload，我认为它会很好的 uload 界面和上传状态功能。以下是链接。请参阅这可能对您有所帮助。

[http://www.plupload.com/example_queuewidget.php](http://www.plupload.com/example_queuewidget.php)

我没有显示fancybox，而是添加了一个带有loadingId 的div。最初它会在您单击时隐藏，提交按钮它显示 div，在此 div 内，您旋转图像路径。这是完整的代码。

我正在使用 jquery 进行隐藏显示。如果你不想使用 jquery，你也可以使用 javascript 来隐藏和显示。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
                <title></title>

                <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.5.1.min.js" type="text/javascript"></script>

                <script src="Js/LiveValidation.js" type="text/javascript"></script>

                <script type="text/javascript">
                    $(document).ready(function() {
                        $(".form-validate-label").validate();
                        $(".form-validate-p").validate({ errorElement: "p" });
                        $(".popup").fancybox();
                    });
                    function showloading() {
                        $("#loadingId").show();
                    }
                </script>

            </head>
            <body>
                <form name="frmsubmission" id="frmsubmission" method="post" class="form-validate-p"
                enctype="multipart/form-data" action="">
                <div class="regrow1">
                <div id="loadingId" style="display:none;">Loading....</div>
                    <div>
                        <label class="label-large">
                            <span class="required">*</span>Headshot Image File:</label>
                        <input class="required" name="head_shot" id="head_shot" size="40" type="file" />
                    </div>
                </div>
                <div class="regrow2">
                    <div>
                        <label class="label-large">
                            Attach Resume:</label>
                        <input name="txtcv" id="txtcv" size="40" type="file" />
                    </div>
                </div>
                <div class="regrow1">
                    <div>
                        <label class="label-large">
                            Full body shot Image File:</label>
                        <input id="body_shot" name="body_shot" size="40" type="file" />
                    </div>
                </div>
                <div class="regrow2">
                    <div>
                        <label class="label-large">
                            Sanpshot Image File:</label>
                        <input id="snap_shot" name="snap_shot" size="40" type="file" />
                    </div>
                </div>
                <br />
                <br />
                <div id="submitrow">
                    <button id="submit" name="submit" value="Submit" type="submit" onclick="showloading();">Submit</button>
                </div>
                </form>
            </body>
            </html> 
```

# jquery - 如何使用 jnotify 或任何其他方式实现提醒功能？

> ID：10479580
> 
> 赞同：0
> 
> 时间：2012-05-07T09:21:10.200
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jnotify

我有一个具有`is_reminder`字段的事件模型。因此，当用户单击 dis 复选框时，应每 2-3 分钟向他显示一次通知。

我听说过 jnotify 插件，但我找不到任何在 Rails 中使用它的示例或教程......

我如何使用 jnotify 或任何其他方式来完成提醒功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:35:45.140

You don't clarify about `is_remainder` field, but to show a notification after 2/3 minutes after a checkbox click can be done like following:

```
$('ID_OR_CLASS_OF_YOUR_CHECKBOX').on('change', function() {

  setTimeout(function() {

     alert('you  have a notification');

  }, 1000 * 60 * 2); // here I set the time for 2 minutes

}); 
```

# ruby-on-rails - 橡胶宝石和时区

> ID：10479586
> 
> 赞同：4
> 
> 时间：2012-05-07T09:21:38.230
> 
> 标签：ruby-on-rails, amazon-web-services

Rubber.yml 文件中的默认时区是

```
timezone: US/Eastern 
```

还支持哪些其他时区格式？可以使用UTC吗？对于欧洲来说，这是正确的吗？

```
timezone: Europe/Paris 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:19:22.757

我使用 UTC 就好了：

```
timezone: UTC 
```

欧洲/巴黎应该可以工作，[这个列表](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)上的任何时区也应该工作。

# nhibernate - Nhibernate QueryOver - 如何按月分组？

> ID：10479589
> 
> 赞同：3
> 
> 时间：2012-05-07T09:22:18.153
> 
> 标签：nhibernate, queryover

试图获得按月分组的总行数并与 QueryOver 作斗争。从我发现的有限资源来看，似乎线索是 Projections.SqlGroupProjection 但我无法正确理解。

这是我到目前为止所拥有的：

```
var jobs = _statelessSession.QueryOver<Job>()
                .SelectList(list => list
                                        .Select(Projections.SqlGroupProjection("MONTH(DateCreated) AS Month", "MONTH(DateCreated)",new string[]{"DateCreated"},new[]{NHibernateUtil.Int32}))
                                        .SelectCount(m => m))
                .List<object>(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T12:27:23.340

最终得到以下内容以供将来参考：

```
 var startDate = DateTime.Now.AddMonths(-6);
            startDate = new DateTime(startDate.Year,startDate.Month,1);
            var jobs = _session.QueryOver<Job>()
                .WhereRestrictionOn(c => c.DateCreated).IsBetween(startDate).And(DateTime.Now)
                .SelectList(list => list
                    .Select(Projections.SqlGroupProjection(
                        "YEAR(DateCreated) As [Year]",
                        "YEAR(DateCreated)",
                        new[] { "YEAR" },
                        new IType[]{NHibernateUtil.Int32}))
                    .Select(Projections.SqlGroupProjection(
                        "MONTH(DateCreated) As [Month]",
                        "MONTH(DateCreated)",
                        new[] { "Month" },
                        new IType[] { NHibernateUtil.Int32 }))
                    .SelectCount(x=>x.Id))
                .OrderBy(Projections.SqlFunction(
                       "YEAR",
                       NHibernateUtil.Int32,
                       Projections.Property<Job>(item=>item.DateCreated))).Desc
                .ThenBy(Projections.SqlFunction(
                       "MONTH",
                       NHibernateUtil.Int32,
                       Projections.Property<Job>(item => item.DateCreated))).Desc
                .List<object>(); 
```

其中产生：

```
SELECT YEAR(DateCreated)  As [Year],
       MONTH(DateCreated) As [Month],
       count(this_.Id)    as y2_
FROM   Jobs this_
WHERE  this_.DateCreated between '2011-11-01T00:00:00.00' /* @p0 */ and '2012-05-07T14:23:52.00' /* @p1 */
GROUP  BY YEAR(DateCreated),
          MONTH(DateCreated)
ORDER  BY datepart(year, this_.DateCreated) desc,
          datepart(month, this_.DateCreated) desc 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T10:53:48.803

您可以使用 datepart 函数，[看看这里](http://www.felicepollano.com/2011/09/27/NHibernateQueryOverUsingDatepart.aspx)看一个例子。只是在这里写一些行：

```
var result = session.QueryOver<Item>()
                .Where(
                Restrictions.Eq(
                Projections.SqlFunction("month"
                , NHibernateUtil.Int32
                , Projections.Property<Item>(item => item.StartDate)
                ) 
                ,1)).List(); 
```

该示例假设 Item 实体为名为 StartDate 的属性。在[帖子](http://www.felicepollano.com/2011/09/27/NHibernateQueryOverUsingDatepart.aspx) 中也给出了一个例子，说明如何在读取数据时使用 datepart 投影。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:29:30.527

我没有尝试自己，只是将[其他](https://stackoverflow.com/a/10021177/27343) [问题](https://stackoverflow.com/a/6381133/27343)的答案放在一起：

```
session.QueryOver<...>()
   .SelectList(list => list
      .Select(GroupProperty(Projections.SqlProjection(...)))
      .SelectSum(x => x.Price)
   ); 
```

+

```
group post by new { post.Date.Year, post.Date.Month } into grouped 
```

=

```
.Select(GroupProperty(Projections.SqlProjection(
    new 
    { 
        post.Date.Year, 
        post.Date.Month 
    }))) 
```

**编辑**：

另一个尝试：

```
 .SelectList(list => list
       .SelectGroup(c => c.Date.Year),
       .SelectGroup(c => c.Date.Month),
       .SelectCount(m => m)) 
```

# android - 如何在 Android 2.3.3 SDK 中以编程方式确定屏幕方向和大小桶

> ID：10479590
> 
> 赞同：0
> 
> 时间：2012-05-07T09:22:21.397
> 
> 标签：android, screen-orientation

我的应用程序应该使用以下逻辑决定是在双窗格还是单窗格中显示：

1.  对于所有屏幕尺寸，如果在单窗格中纵向显示
2.  对于 SMALL 和 NORMAL 屏幕尺寸，如果在 SINGLE-PANE 中横向显示
3.  对于 LARGE 和 XLARGE 屏幕尺寸，如果在双窗格中横向显示

我正在为 Android 2.3.3 SDK 开发，所以 Android 3.0 SDK 的好功能在这里不适用。我在下面开发的函数总是为所有屏幕尺寸和方向组合返回 SINGLE-PANE。这里可能出了什么问题？

```
/**
 * Determine if a dual pane is appropriate.
 * 
 * @param null
 * @return boolean
 */

public boolean isDualPane() {

    boolean dualPane    = false;

    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {

        if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE) {

            dualPane    = true;
        }
    }

    Log.d("ORIANTATION", (dualPane) ? "DUAL PANE" : "SINGLE PANE");

    return dualPane;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:41:19.237

我找到了答案。**上面的功能没有任何问题！**问题出在我的模拟器的配置上。我创建了一个 WVGA800 设备，并将 LCD 密度设置为 240 而不是 160。这使它成为正常尺寸而不是大尺寸。所以statememnt`Configuration.SCREENLAYOUT_SIZE_LARGE`总是评估为2而不是3。所以`if statement`每次都失败了。它现在工作正常。

还有一件事，**这个**：

```
 if ((getResources().getConfiguration().screenLayout 
           & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE) {

            dualPane    = true;
        } 
```

需要**改为：**

```
 if ((getResources().getConfiguration().screenLayout 
            & Configuration.SCREENLAYOUT_SIZE_MASK) >= Configuration.SCREENLAYOUT_SIZE_LARGE) {

            dualPane    = true;
        } 
```

为了满足 XLARGE 屏幕的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:02:01.787

我对双窗格不太了解，但我建议您从 XML 控制配置 Small-Normal-Large-Xlarge 布局。

例子 ：

1.  所有屏幕尺寸 - 纵向。它采用默认布局文件夹： ***res/layout***
2.  小屏幕尺寸 - 横向： ***res/layout-small-land***
3.  大 Xlarge 屏幕尺寸 - 横向：***res/layout-large-land***

它可能会帮助你。:)

参考：[屏幕尺寸](http://developer.android.com/guide/topics/resources/providing-resources.html#ScreenSizeQualifier)

# java - 无法为 com.adobe.adept.client.XMLUtil 的受信任 CA 设置证书

> ID：10479592
> 
> 赞同：0
> 
> 时间：2012-05-07T09:22:28.387
> 
> 标签：java, adobe, policy, jce

我有下一个例外::

```
 Exception in thread "main" java.lang.ExceptionInInitializerError
     at javax.crypto.Mac.getInstance(DashoA13*..)
     at com.adobe.adept.client.XMLUtil.createHMAC(XMLUtil.java:815)
     at com.adobe.adept.client.XMLUtil.hmac(XMLUtil.java:788)
     at com.adobe.adept.upload.UploadTest.makeContent(UploadTest.java:1454)
     at com.adobe.adept.upload.UploadTest.<init>(UploadTest.java:1769)
     at com.adobe.adept.upload.UploadTest.main(UploadTest.java:1806) Caused
 by: java.lang.SecurityException: Cannot set up certs for trusted CAs
     at javax.crypto.SunJCE_b.<clinit>(DashoA13*..)
     ... 6 more Caused by: java.lang.SecurityException: Cannot locate policy or framework files!
     at javax.crypto.SunJCE_b.i(DashoA13*..)
     at javax.crypto.SunJCE_b.g(DashoA13*..)
     at javax.crypto.SunJCE_b$1.run(DashoA13*..)
     at java.security.AccessController.doPrivileged(Native Method)
     ... 7 more 
```

它在线上发生：

```
 Mac mac = Mac.getInstance("HmacSHA1"); 
```

我尝试了下一个解决方案： - [NoSuchAlgorithmException：算法 HmacSHA1 不可用](https://stackoverflow.com/questions/2856248/nosuchalgorithmexception-algorithm-hmacsha1-not-available)- 我的本地 java.security 文件处于实际状态
- [https://forums.oracle.com/forums/thread.jspa?threadID=316839](https://forums.oracle.com/forums/thread.jspa?threadID=316839)

可能有人有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:11:46.393

固定的。问题出在我的代码中，我无法使用：

```
System.setProperties(props); 
```

where props - 配置文件的属性

# wcf - iPhone 硬件上的 Monotouch/WCF 错误

> ID：10479599
> 
> 赞同：1
> 
> 时间：2012-05-07T09:22:56.237
> 
> 标签：wcf, xamarin.ios

我使用类似于[http://docs.xamarin.com/ios/tutorials/Working_with_Web_Services#Consuming_WCF_Services](http://docs.xamarin.com/ios/tutorials/Working_with_Web_Services#Consuming_WCF_Services)的 Silverlight SLSvcUtil.exe 工具在 Monotouch 上创建了一个 WCF 客户端。

在模拟器上一切正常，但是当我在 iPhone 4S 上启动它时出现错误：

在使用 --aot-only 运行时尝试 JIT 编译方法 '(wrapper delegate-begin-invoke) :begin_invoke_IAsyncResult_ *this __TimeSpan_AsyncCallback_object (System.TimeSpan,System.AsyncCallback,object)'。*

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:21:11.610

我已经从 monotouch 调用了一些 wcf 服务，而没有遇到任何这样的问题——所以它可以完成。

monotouch 中的 jit 错误通常表明链接器删除了某些内容，或者调用了某些虚拟抽象方法（至少在我最近的经验中）。

你能检查你真正的 iPhone 项目的链接器设置吗？如果您将其设置为 -nolink，问题是否会消失 - 请参阅[http://docs.xamarin.com/ios/advanced_topics/linker](http://docs.xamarin.com/ios/advanced_topics/linker)

如果这确实有帮助，那么下一步就是查看 wcf 生成的文件 - 在这种情况下，您能否找到并发布更多关于回调方法的代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:36:20.010

此类问题很少与链接器相关，如果签名是包装器则更少。但是，您可以通过 Stuart 的说明轻松确认这一点。

IMO 您可能会遇到 AOT 编译器无法预测所需代码的情况。混合泛型和值类型时会发生这种情况（并且您在生成的签名中有一个**TimeSpan ）。**这将适用于模拟器（使用 JIT），但不适用于 AOT 应用程序。

解决此类问题的最佳方法是在[http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)上打开错误报告并附上允许我们复制问题的测试用例。

# php - 在控制器 Symfony 2 中制作类似于构造函数的东西

> ID：10479601
> 
> 赞同：1
> 
> 时间：2012-05-07T09:23:02.473
> 
> 标签：php, routing, symfony

我正在为一个项目使用 symfony 2。我有一个控制器，在每个函数之前我都会进行几次检查，我想要的是让 symfony 在对该控制器的每个请求时触发该函数。例如

```
class ChatController extends Controller
{
    public function put()
    {
        $user = $this->getUser();
        $this->checkSomething(); //just a custom function
        $this->checkSomethingElse(); //another custom function
        // do something
    }

    public function get()
    {
        $user = $this->getUser();
        $this->checkSomething(); //just a custom function
        $this->checkSomethingElse(); //another custom function
        // do something
    }
}` 
```

我想实现与以下相同的目标：

```
class ChatController extends Controller
{
    private $user;

    public function init()
    {
        $this->user = $this->getUser();
        $this->checkSomething(); //just a custom function
        $this->checkSomethingElse(); //another custom function
    }

    public function put()
    {
        //here i can access $this->user          
        // do something
    }

    public function get()
    {
        //here i can access $this->user
        // do something
    }
}` 
```

所以基本上我想要的是让一个函数表现得像一个构造函数。这可以在 Symfony2 中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:43:06.567

至少有两种惯用的方法可以实现这一点：

1.  [事件监听器](http://symfony.com/doc/current/book/internals.html#events)和
2.  [AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming) — 在 Symfony2 中使用[JMSAopBundle](https://github.com/schmittjoh/JMSAopBundle/blob/master/Resources/doc/index.rst)。

对这个用例使用构造函数是一个坏主意™。侵入构造函数或设置器以进行与实例化对象或设置值无关的检查就是这样 - 黑客。在任何意义上，这都不合逻辑也不惯用语。这就像用头敲钉子一样——可行，但存在更好的选择。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-07T10:46:52.453

您可以覆盖 setContainer ，它的用途与构造相同。

```
public function setContainer(ContainerInterface $container = null)
{
    parent::setContainer($container);

    // Your stuff
} 
```

但你可能真的不需要这样做。我认为随着您的设计的发展，您真的不需要检查，或者最好使用事件侦听器来完成功能。但这可以让你开始。

# android - 访问现有的 Amazon S3 存储桶

> ID：10479603
> 
> 赞同：1
> 
> 时间：2012-05-07T09:23:05.537
> 
> 标签：android, amazon-s3

我正在尝试制作一个将图像上传到 S3 服务的应用程序。从我在文档和示例项目中读到的内容，我看到创建一个存储桶并将图像上传到它是相当容易的，这没问题，但是我如何测试存储桶是否已经存在并连接到它如果是吗？

我的代码取自亚马逊示例项目，但无论如何我都会添加它：

```
 case R.id.button_upload:
        if (flag && fileUri != null) {
            Uri selectedImage = fileUri;
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();

            // Put the image data into S3.
            try {
                s3Client.createBucket(Constants.getPictureBucket());
                // I DON"T WANT TO CREATE ONE, I WANT TO CONNECT TO ONE

                PutObjectRequest por = new PutObjectRequest(
                        Constants.getPictureBucket(),
                        Constants.PICTURE_NAME, new java.io.File(filePath)); // Content
                                                                                // type
                                                                                // is
                                                                                // determined
                                                                                // by
                                                                                // file
                                                                                // extension.
                s3Client.putObject(por);
            } catch (Exception exception) {
                displayAlert("Upload Failure", exception.getMessage());
            }
        }
        break; 
```

关于如何连接到现有存储桶的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:27:02.100

您不应该创建很多存储桶。一个就足够了，然后里面只有文件夹。

```
 String bucket = "foo";
 File file = new File(fileName);
 //Just set your directory 
 PutObjectRequest request = new PutObjectRequest(bucket,"thumbnails/" +  fileName, file)
 .withCannedAcl(CannedAccessControlList.PublicRead)
 .withMetadata(meta);
 client.putObject(request); 
```

# ruby-on-rails - 将修改后的供应商资产部署到 Heroku

> ID：10479608
> 
> 赞同：0
> 
> 时间：2012-05-07T09:24:06.047
> 
> 标签：ruby-on-rails, heroku

我安装了 Jquery-datatables-rails gem。当您通过 bundle 安装 gem 时，会在下面创建一个文件夹`.rvm/gems/RUBY@GEMSET/gems/jquery-datatables-rails`

在此文件夹中，您可以浏览到 vendor/assets 文件夹并修改 CSS 等。

唯一的问题是，在部署时，远程生产实例上安装了 gem 的远程版本，这不反映本地更改。

有什么方法可以确保将本地修改推送到 Heroku？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:23:48.733

如前所述，您可以分叉 gem 并在 github 上指向它，或者您可以对本地资产目录进行更改，这将加快在 Heroku 上编译您的应用程序所需的时间。

# extjs - ExtJs 滑块条形图

> ID：10479614
> 
> 赞同：3
> 
> 时间：2012-05-07T09:24:17.323
> 
> 标签：extjs, extjs-chart

我正在尝试在 ExtJs 中找到滑块条形图功能，就像我们在下面的链接中给出的 Google 财务图表一样：

[http://www.google.com/ig/directory?type=gadgets&url=www.google.com/ig/modules/finance_chart.xml](http://www.google.com/ig/directory?type=gadgets&url=www.google.com/ig/modules/finance_chart.xml)

例如：我们有可滚动的长图表，当我们滚动或滑动图表的一部分时，它会在真正的大视图中显示为图表。

如果我们在 ExtJs 中有这个图表，请告诉我。如果没有，那么请让我知道我们是否在融合图表或任何第三方库中有这个图表，我们可以将它集成到 ExtJS 中。

# ruby-on-rails - 带有回调的 HTTParty.get 会导致 MultiJson::DecodeError。

> ID：10479616
> 
> 赞同：0
> 
> 时间：2012-05-07T09:24:23.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json, httparty

我正在使用 HTTParty 调用 API。当我在 url 中有回调时，它会导致 MultiJson::DecodeError：

```
MultiJson::DecodeError in PagesController#home

756: unexpected token at '12345({"label":"daydata","data":[[1335484800883,69586],
[1335571201001,17725]]}); 
```

我的 get 调用如下所示：

```
@data = HTTParty.get("http://powermeters.appspot.com/getdays?id=1234567890&from=2012-04-24&to=2012-04-29&callback=12345") 
```

有谁知道是什么原因造成的，以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:41:18.457

问题是响应是 javascript，而不是 JSON。要修复它，您可以执行以下操作：

```
response.gsub! /^\d+\((.*)\);?$/m, '\\1' 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T23:06:42.923

您还可以覆盖解析器。下面是一个简单的例子。

`if MultiJson...`直接从 HTTParty 的 json 解析器中提取

```
class Foo
  include HTTParty
  base_uri "http://foo.bar"

  parser lambda { |body,_|
    new_body = body.gsub(/^\d+\((.*)\)$/, '\1')
    if MultiJson.respond_to?(:adapter)
      MultiJson.load(new_body)
    else
      MultiJson.decode(new_body)
    end
  }
end 
```

# java - 在 java 脚本中调用 Java 方法 - Oracle ADF

> ID：10479617
> 
> 赞同：0
> 
> 时间：2012-05-07T09:24:24.677
> 
> 标签：java, javascript, jsf, partial

当用户提交一页时，我需要在提交前更新隐藏字段值。我怎样才能做到这一点？

```
<af:button text="Continue" action="#{addAccount_backing.addBankAccountConfirm}" partialSubmit="true" onclick="goSubmit(this);"/> 
```

在 goSubmit java 脚本函数中，我需要在发布之前更新隐藏字段值。我正在使用 ADF 框架和 JSF 进行查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:44:28.177

你可以使用`f:ajax`和做你需要的东西，见[这个](https://stackoverflow.com/questions/5852890/how-to-update-a-value-displayed-in-the-page-without-refreshing)例子

# java - 如何在java中打印图像

> ID：10479621
> 
> 赞同：5
> 
> 时间：2012-05-07T09:24:35.143
> 
> 标签：java, image

我们如何在java中打印缓冲图像？我们可以将 FileInputStream 发送到打印服务，但我需要将缓冲的图像发送给它。

```
FileInputStream fin = new FileInputStream("YOurImageFileName.PNG");
Doc doc = new SimpleDoc(fin, DocFlavor.INPUT_STREAM.GIF, null);
job.print(doc, pras); 
```

是否可以？

[在此处](http://www.java2s.com/Code/Java/2D-Graphics-GUI/PrintanImagetoprintdirectly.htm)查看完整代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-25T09:34:11.443

```
PrinterJob printJob = PrinterJob.getPrinterJob();
printJob.setPrintable(new Printable() {
        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
                if (pageIndex != 0) {
                    return NO_SUCH_PAGE;
                }
                graphics.drawImage(image, 0, 0, image.getWidth(), image.getHeight(), null);
                return PAGE_EXISTS;
        }
});     
try {
    printJob.print();
} catch (PrinterException e1) {             
    e1.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:58:39.293

您可以使用 iText 库。有一个简单的示例将图像打印到 pdf 。

[将 IText 图像添加到 PDF 文档](http://tutorials.jenkov.com/java-itext/image.html)

# c# - 在 ToList() 方法调用时调用数据库

> ID：10479626
> 
> 赞同：1
> 
> 时间：2012-05-07T09:24:47.107
> 
> 标签：c#, linq, linq-to-entities, entity-framework-4.2

从我的存储库中，我使用 ToList() 方法返回不同的列表。

问题是，当我对这个返回的结果（即 List 类型）运行更多 LINQ 时，它也会为此生成一个数据库调用。显然，这第二个 linq calll 是纯 LINQ to Entity，不应调用数据库。请参阅下面我在做什么。

```
List<User> us = userRepository.GetMany(u => filterStatusIds.Contains(u.UserStatus.Id));
if (!string.IsNullOrEmpty(name))
us = (from u in us
      where u.DisplayName.Contains(name)
      select u).ToList(); // this ToList should not call database 
```

有什么帮助或想法来阻止这个额外的数据库调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:28:06.530

返回`IEnumerable<User>`或`IQueryable<T>`从存储库返回，它不会查询数据库。

在 ToList() 之后，只有第二次调用会执行此操作。

# php - 缓慢的mysql查询 - 选择

> ID：10479630
> 
> 赞同：1
> 
> 时间：2012-05-07T09:25:03.287
> 
> 标签：php, mysql, performance, select

此查询第一次执行大约需要 10 秒，然后每次连续执行需要一分钟以上：

```
SELECT qQuoteDateTime, 
       qLastSalePrice, 
       qNetChangePrice, 
       qNetChangePct,
       qShareVolumeQty 
  FROM quotes 
  WHERE qSymbol='GE' 
```

我正在使用的表有大约 2300 条记录。我见过有人实现了一个相当快速的查询来显示所有记录，但我无法访问他使用的代码。

我怎样才能加快速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T09:27:48.587

对查询运行[EXPLAIN](http://dev.mysql.com/doc/refman/5.5/en/explain.html)以查看为什么它很慢。最可能的原因是该`qSymbol`列缺少索引。如果缺少一个列，则在列上创建一个索引，您应该会看到性能的显着提升，因为 MySQL 不必扫描表中的每一行，而只需从索引中查找相应的行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T09:30:40.037

你的数据库有问题。或者你在吠叫错误的树。
对于给定的行数，您在此处发布的查询应该非常快。

首先确保它是一个查询，而不是其他任何原因。
您是否尝试从控制台运行此查询？PHPMyAdmin？结果是一样的吗？您是否偶然在循环内运行它？
行数真的是 2300，而不是 230 万吗？

# javascript - 我如何知道ajax请求何时完成

> ID：10479631
> 
> 赞同：2
> 
> 时间：2012-05-07T09:25:14.377
> 
> 标签：javascript, ajax

如何知道所有 ajax 调用何时完成？，现在我只是使用延迟超时来等待请求完成，这是更好的方法？我想确保 ajax 请求完成......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T09:28:24.937

该`XMLHttpRequest`对象具有`readyState`属性`onreadystatechange`，您可以像这样操作：

```
var xmlhttp;
if (window.XMLHttpRequest) { 
    xmlhttp = new XMLHttpRequest();
}
else { 
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4) { // xmlhttp.status==200 == successful request
        // What you want here
    }
}
xmlhttp.open("GET", "foo_url.php", true);
xmlhttp.send();
}​ 
```

如果您使用的是该库，则可以使用**jQuery**更简单地进行操作：

```
$.ajax({
    url: 'foo_url.php',
    complete: function() {
        // What you want here
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T09:29:40.333

如果您使用 jQuery 的 AJAX，它有一个完整的选项，请参阅[文档](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
    url: 'foo.php',
    complete: function(jqXHR, textStatus) {
        alert('AJAX call complete');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:40:04.477

如果您使用 xmlhttp 对象进行 ajax 调用，那么当 xmlhttp.readyState==4 时，则认为 ajax 请求已完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:25:00.183

```
$.ajax({
url: 'abc.php',
data: "&id=" + id ;
complete: function(data) {
    alert(data.responseText);
}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T09:27:58.030

```
 xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    // This is when your Ajax request is complete 
                }
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T09:30:41.223

这取决于您的图书馆；例如，如果您使用的是 jquery，那么您可以使用`success:`参数，如果是 javascript，那么您可以使用`if (xmlhttp.readyState==4 && xmlhttp.status==200)`语句。

# java - XOM + java 检索非元素值

> ID：10479636
> 
> 赞同：1
> 
> 时间：2012-05-07T09:25:42.363
> 
> 标签：java, xom

在这里，我试图恢复不是元素的扩展值（AnyType），因此“element.getchild（）”和 co 不起作用。你知道如何解决这个问题吗？谢谢。

```
<xsd:extension base="AnyType">
    <xsd:attribute name="Critical" type="xsd:boolean" use="required"/>
</xsd:extension> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:18:29.613

Are you trying to get the value of the `base` attribute (`"AnyType"` in this case)? Use the [`Element.getAttributeValue(String)`](http://www.xom.nu/apidocs/nu/xom/Element.html#getAttributeValue%28java.lang.String%29) method:

```
String baseAttrValue = element.getAttributeValue("base"); 
```

# http - Nginx 响应大小

> ID：10479639
> 
> 赞同：2
> 
> 时间：2012-05-07T09:26:01.333
> 
> 标签：http, tcp, nginx, response

如何模拟 nginx 服务器中的不良连接？我想测试客户端不是在一个包中接收所有数据，而是分成几个包。

也许，我可以设置响应包的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:42:06.227

看看：[limit_rate](http://wiki.nginx.org/HttpCoreModule#limit_rate)

如果将其设置为总响应大小的一小部分，nginx 会将其拆分为几个数据包。

# php - 如何使大型数组在具有良好性能的函数中可用

> ID：10479641
> 
> 赞同：1
> 
> 时间：2012-05-07T09:26:03.847
> 
> 标签：php, performance, refactoring

我有一个在循环中执行的程序代码的平静。这种代码和平需要一个大数组，但仅用于读取而不是操作目的。我在循环之前生成一次这个数组。

现在我想将此代码移动到一个函数中以便再次使用它是一些其他脚本，但我不知道如何以一种干净的方式进行操作，但仍然具有良好的性能：

*   每次在函数本身中生成这个大数组会很糟糕，因为它总是相同的数组并且会产生不必要的开销。
*   我不想使用全局数组，因为这是不好的做法
*   因此，我想每次调用该函数时最好将其作为参数传递。

我也不太喜欢最后一个选项，因为它会使参数列表变得混乱，而且我不确定由此引起的开销。据我了解，每次都会复制数组 - 因此通过引用传递它是一个好主意（通过使用 & 运算符）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:44:38.110

一个真正关心性能的人应该

## 避免在性能关键代码中处理大型数组。

而不是玩加速本质上缓慢的过程的技巧。

因此，在不知道**真实案例**（数组的目的、处理和内容）的情况下，唯一的答案可能是：

## 因此，将您的数组转换为数据库并仅选择必要的数据。

这是对这样一个一般问题的一般答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:37:33.883

您可以序列化您的数组并在文件中写入序列化。因此，读取该文件、反序列化并稍后在代码中使用它会更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T10:56:41.540

使用OO-Programming，创建一个具有两种方法的类，一种用于生成数组，第二种用于使用数组进行计算。使用像 Singleton 这样的模式来确保您的对象是唯一的实例或使用静态变量。制作一个包以在不同的脚本/项目之间共享这个类。

既然问题很笼统，答案就很抽象。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-07T09:47:35.770

我想通过引用传递它已经足够了，但有时会通过引用警告生成时间调用传递.. 以后可能会给您带来麻烦。

# android - SecurityException 在新的空活动的开始意图

> ID：10479643
> 
> 赞同：0
> 
> 时间：2012-05-07T09:26:08.057
> 
> 标签：android, android-intent, android-manifest, android-activity

我只使用一个活动开发了一个小项目，现在，我正在尝试添加一个新活动，但是，当我尝试在我的设备上启动该项目时收到此错误：

> 正在运行 com.android.gl2jni/.TestActivity... 1> 开始：Intent { cmp=com.android.gl2jni/.TestActivity } 1> 1> java.lang.SecurityException：权限被拒绝：开始 Intent { flg=0x10000000 cmp= com.android.gl2jni/.TestActivity } from null (pid=2935, uid=2000) 需要 null

我没有尝试调用新的 Activity，我开发了一个空的 Activity 来检查为什么我无法启动该应用程序。

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.gl2jni">

  <uses-feature android:glEsVersion="0x00020000"/>

  <uses-sdk android:minSdkVersion="9"/>

  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

  <uses-permission android:name="android.permission.CAMERA"/>
  <uses-feature android:name="android.hardware.camera" />
  <uses-feature android:name="android.hardware.camera.autofocus" />

  <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
  <uses-permission android:name="android.permission.BLUETOOTH" />

  <application
          android:label="@string/gl2jni_activity">

    <!--main activity-->

    <activity android:name=".GL2JNIActivity"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:launchMode="singleTask"
        android:configChanges="keyboardHidden"
        android:screenOrientation="landscape"
            >
      <intent-filter>
          <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </activity>

    <!--BT device list activity-->

    <activity android:name=".TestActivity"
              >
      <intent-filter>
      </intent-filter>
    </activity>

    <!--
      <activity android:name=".BluetoothDeviceListActivity"
                  android:label="@string/select_device"
                  android:theme="@android:style/Theme.Dialog"
                  android:configChanges="keyboardHidden" 
                          android:screenOrientation="landscape"
                  />
    -->

  </application>

</manifest> 
```

这是空的活动类：

```
package com.android.gl2jni;

import android.app.Activity;
import android.util.Log;
import android.os.Bundle;

public class TestActivity extends Activity {

    @Override protected void onCreate(Bundle icicle) {
        LogConsole.print( "HI, I AM TestActivity" );
    }

} 
```

我想我必须修改其他内容，但我不知道是什么......提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:24:29.073

您为 TestActivity 指定了一个空的意图过滤器。一个空的意图过滤器不匹配任何意图。从 TestActivity 的块中删除这些行：

```
 <intent-filter>
  </intent-filter> 
```

另外，`onCreate()`你`TestActivity`必须调用`super.onCreate()`，否则Android会崩溃。

# c++ - C ++指向另一个函数中的数组

> ID：10479645
> 
> 赞同：0
> 
> 时间：2012-05-07T09:26:15.843
> 
> 标签：c++, arrays

我有 Function1 用户输入数据的地方`array1`。我必须`array2`在 Function2 中设置为等于 Function1 中的 array1。

我如何“告诉它”它应该`array1`从 Function1 使用？

我试过了

```
array2[50] = array1[50]; 
```

但这当然行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:27:52.507

您需要按元素复制`array1`到`array2`，例如

```
for (unsigned i=0; i<array1_size; ++i) {
    array2[i] = array1[i];
} 
```

您也可以`std::copy`从`algorithm`标题中使用。

```
std::copy(array1, array1 + array1_size, array2); 
```

对于这两种方法，您都需要知道`array1`(`array1_size`在示例中) 中的元素数量。此外，`array2`需要至少与`array1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:29:30.527

遍历一个数组中的所有元素并将它们分配给第二个数组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T09:34:40.257

memcpy(second_array, first_array, sizeof(second_array));

【原文出处】【http://www.devx.com/tips/Tip/13291】

# apache - 实时服务器上的 rvm

> ID：10479646
> 
> 赞同：1
> 
> 时间：2012-05-07T09:26:15.863
> 
> 标签：apache, ruby-on-rails-3.1, rvm

我在我的开发机器上为我的 Ruby on Rails 应用程序使用 RVM，它运行良好。我的问题是我应该（我可以）在我的实时服务器上使用 RVM 进行部署吗？

我已经使用Passenger 在实时服务器上安装了Web 应用程序，但我刚刚安装了Ruby 和系统上的所有gem。

RVM 是否存在任何性能问题，我需要对我的 Apache Web 服务器做很多事情来启动和运行它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:47:19.077

手动编译和使用 RVM 编译的 ruby​​ 的性能应该是相同的（除非您使用类似`patchexpress`or的补丁`falcon`）。

您可以使用 RVM 进行部署 - 您可以与更新 ruby​​ 版本/补丁级别一起进行，使用最新的补丁级别非常重要，因为它包含对 ruby​​ 的重要修复 - 包括安全修复。

至于 RVM 编译的红宝石的集成 - 阅读文档：[https ://rvm.io/integration/passenger/](https://rvm.io/integration/passenger/)

# java - 恢复 Google App Engine 数据存储

> ID：10479651
> 
> 赞同：3
> 
> 时间：2012-05-07T09:26:21.790
> 
> 标签：java, google-app-engine, google-cloud-datastore, restore, database-backups

我正在尝试用 Java 实现我们在这里讨论的内容： [恢复 appengine 数据存储数据的选项？](https://stackoverflow.com/questions/10420007/options-for-restoring-appengine-datastore-data)

..但我有一些问题。这是我的代码： [https](https://github.com/micheleorsi/manage-gae-backup/blob/master/src/test/java/com/map2app/manage/test/ReadFileTest.java) ://github.com/micheleorsi/manage-gae-backup/blob/master/src/test/java/com/map2app/manage/test/ReadFileTest.java ..我得到这个错误： com.google.appengine.api.files.RecordReadChannelImpl readRecord 警告：校验和在运行此行时未验证：

```
ByteBuffer bf = rrc.readRecord(); 
```

我要恢复的文件是：120424.060000_production.sql3，它与此处解释的系统一起备份： [https](https://developers.google.com/appengine/docs/python/tools/uploadingdata#Downloading_and_Uploading_All_Data) ://developers.google.com/appengine/docs/python/tools/uploadingdata#Downloading_and_Uploading_All_Data （原始格式，无特殊配置集）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:30:58.713

[用于恢复 appengine 数据存储数据的选项中](https://stackoverflow.com/questions/10420007/options-for-restoring-appengine-datastore-data)描述的方法？[用于使用管理控制台中可访问的备份和恢复工具](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin)创建的文件。

SDK 附带的[命令行工具使用不同的格式 (sqlite)。](https://developers.google.com/appengine/docs/python/tools/uploadingdata#Downloading_and_Uploading_All_Data)

# web-services - WSDL 可以传输 FILE 类型吗？

> ID：10479654
> 
> 赞同：0
> 
> 时间：2012-05-07T09:26:31.507
> 
> 标签：web-services, soap, wsdl

部署在节点机器上的“checkResult”服务被定义为将节点上的结果返回给发送请求的集群控制器。节点上的结果，以文件的形式，在长度上可能会有很大的不同，这通常是每日日志文件的情况。

起初，我认为只使用一个字符串来打包文件的全部内容可能没问题，所以我定义了

```
checkResult(inType *in,OutType *out) 
```

其中 OutType* 是 char*。然后我意识到这个字符串可能是 KB 长度甚至更多。所以我想知道在这里使用字符串是否合适。

我用谷歌搜索了很多，找不到 wsdl 中允许的最大长度（可能也与本地最大缓冲区长度冲突），也没有找到任何有关传输文件类型参数的信息。

可能建议使用 struct 类型，但是当内部的某些元素可能为 nil 且不存在时，它可能会嵌套在文件中并且难以解析。

当您需要在 Web 服务中返回文件类型结果或大量数据时，您会怎么做？

ps 服务器和客户端都在 C 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:15:00.973

在 (SOAP) Web 服务请求或响应中传输大量数据时，使用附件机制通常比将数据包含在正文中更好。可能考虑附件机制的顺序（从最广泛到最窄的采用）：

*   **消息传输优化机制 (MTOM)** - 许多主流语言都支持这些规范中的最新规范 (http://www.w3.org/TR/soap12-mtom/)。
*   **带有附件的 SOAP** - 这个规范 (http://www.w3.org/TR/SOAP-attachments) 已经存在很多年了，并且支持多种语言，但微软尤其不支持。
*   **直接 Internet 消息封装 (DIME)** - 此规范 (http://bgp.potaroo.net/ietf/all-ids/draft-nielsen-dime-02.txt) 由 Microsoft 推送，并已提供多种语言的支持/框架，包括 java 和 .NET。

理想情况下，您将能够使用框架直接从指示基于 MTOM 的 Web 服务的 WSDL 生成代码存根。

这种 WSDL 文档的关键部分包括：

1.  MTOM 政策声明
2.  绑定中的策略应用
3.  类型（模式）部分中对附件的引用的占位符

如果您使用合同优先并且手头有 WSDL，那么本网站 (http://www.w3.org/Submission/WS-MTOMPolicy/) 的第 1.2 节中的示例显示了要声明和应用 MTOM 策略。同一站点的附录 I 显示了模式元素的示例，它允许 Web 服务客户端或服务器识别对 MTOM 附件的引用。

我没有在 C 中实现 Web 服务或客户端，但对最近更新的软件包的简要扫描显示 gSoap (http://www.cs.fsu.edu/~engelen/soap.html) 可以帮助您努力。

看看这些文件，看看它们是否有助于推进您的项目。

# opencl - OpenCL 中的 GPU 使用中内存

> ID：10479657
> 
> 赞同：1
> 
> 时间：2012-05-07T09:26:44.733
> 
> 标签：opencl

无论如何查询GPU设备以使用OpenCL查找正在使用的内存？我想分配尽可能多的内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:27:50.783

没有获取此类信息的标准方法。一些替代品（相当糟糕的替代品，但无论如何）：

*   CUDA 通过以下方式提供此类功能`cuMemGetInfo`
*   `GL_ATI_meminfo`和`NVX_gpu_memory_info`OpenGL 扩展
*   `nvidia-smi`应用

# c - 如何在 libcurl 中终止 http 连接。从总共 50 MB 下载 ax MB 后？

> ID：10479659
> 
> 赞同：0
> 
> 时间：2012-05-07T09:26:58.327
> 
> 标签：c, http, curl

从 500 mb 文件下载前 10 mb 后，我在终止连接时遇到问题，我收到分段错误，同时终止连接这里使用回调函数从 curl 获取数据

# objective-c - iOS 上 Exif 数据中的缩略图 - 相机胶卷

> ID：10479668
> 
> 赞同：3
> 
> 时间：2012-05-07T09:27:54.893
> 
> 标签：objective-c, thumbnails, exif

我想知道是否可以修改相机胶卷上的缩略图？在保存之前无法将其保存在标题上，没有与缩略图有关的键。

# javascript - 使用 JavaScript 在 HTML 页面中处理会话

> ID：10479676
> 
> 赞同：6
> 
> 时间：2012-05-07T09:28:19.413
> 
> 标签：javascript, html, session

我们可以在 javascript 的帮助下在 HTML 页面中进行会话处理吗？

如果是，如何？如果不是，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:36:04.620

javascript only support cookies. You can set them up to keep track of a user session but they do not support the use of sessions.

```
function createCookie(name,value,days) {
    var expires = "";
    if (days) {
       var date = new Date();
       date.setTime(date.getTime()+(days*24*60*60*1000));
       expires = "; expires="+date.toGMTString();
    }
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') {
            c = c.substring(1,c.length);
        }
        if (c.indexOf(nameEQ) == 0) {
            return c.substring(nameEQ.length,c.length);
        }
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

Source: [http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/19283/how-to-save-session-values-in-javascript](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/19283/how-to-save-session-values-in-javascript)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T09:32:24.107

会话是一种服务器端机制，因此您需要一个服务器逻辑来启动和管理会话。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-20T21:38:32.237

今天（2017 年 9 月）我建议使用 HTML5 Web 存储功能。

引用 W3C：

> HTML网络存储；比饼干好。什么是 HTML Web 存储？
> 
> 借助 Web 存储，Web 应用程序可以在用户浏览器中本地存储数据。
> 
> 在 HTML5 之前，应用程序数据必须存储在 cookie 中，包含在每个服务器请求中。Web存储更安全，大量数据可以存储在本地，不影响网站性能。
> 
> 与 cookie 不同，存储限制要大得多（至少 5MB），并且信息永远不会传输到服务器。
> 
> Web 存储是按来源（按域和协议）的。来自一个来源的所有页面都可以存储和访问相同的数据。

有关它如何工作以及如何在此处实施的更多详细信息：[https ://www.w3schools.com/html/html5_webstorage.asp](https://www.w3schools.com/html/html5_webstorage.asp)

此外，MDN 文档是获取更多详细信息的好来源：[https ://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage)

显然，加密存储在 Web Storage 中的数据不会受到伤害。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T09:51:13.500

而术语“会话”通常用于服务器端机制，如果没有一些服务器端脚本自然不能使用，如果你只想有一个登录跟踪，你可以在 JS 中实现一个伪会话：

*   实现一个隐藏字段，以用户登录的时间戳为值
*   每次用户进行重要操作时，使用新时间戳更新此字段
*   使用 运行伪 cronjob `setinterval()`，检查隐藏字段中的值是否早于允许的会话时间
*   如果它较旧，请执行您的会话超时代码

不过要小心，

1.  这种机制可能会对您的客户端浏览器造成一些压力，具体取决于您的站点和参数（观看的操作、检查间隔的频率）
2.  如果用户关闭浏览器窗口/选项卡，这将无法生存

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T09:35:07.960

Sessions can't be accessed by JS directly. It's stored on server, while javascript is running on client. But can be done indirectly, e.g., store it in a hidden filed, submit it to the server, and retrieve and assign the values in hidden filed to session.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T09:36:53.047

> 我们可以在 javascript 的帮助下在 HTML 页面中进行会话处理吗？

间接的。使用 AJAX 调用可识别会话的服务器端 HTTP 处理程序。`jQuery.ajax()`使 AJAX 变得简单，并且有很多示例。

例如，这是在 .Net 中通过调用 WCF 端点、Web 服务或什至可以访问维护会话状态的同一进程的页面来完成的。

您可以通过这种方式在会话中获取/设置值。

# google-chrome - 如何使用 JavaScript 打开我的扩展程序的弹出窗口？

> ID：10479679
> 
> 赞同：56
> 
> 时间：2012-05-07T09:28:30.667
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试编写一个 JavaScript 函数来打开我的扩展程序，就像单击扩展程序图标时一样。我知道如何在新标签页中打开我的扩展程序：

```
var url = "chrome-extension://kelodmiboakdjlbcdfoceeiafckgojel/login.html";
window.open(url); 
```

但是我想在浏览器的右上角打开一个弹出窗口，就像单击扩展图标时一样。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-07T15:28:22.737

Chromium 开发团队已明确表示他们不会启用此功能。请参阅[功能请求：以编程方式打开扩展弹出气泡](http://code.google.com/p/chromium/issues/detail?id=30491)：

> 浏览器和页面操作弹出窗口的理念是它们必须由用户操作触发。我们的建议是使用新的 html 通知功能...

[桌面通知](http://code.google.com/chrome/extensions/notifications.html)可用于以编程方式向用户呈现一个小的 HTML 页面，就像您的弹出窗口一样。这不是一个完美的替代品，但它可能会提供您需要的功能类型。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-03-04T12:42:57.687

Chrome 团队*确实*创建了一种以编程方式打开弹出窗口的方法，但它仅作为私有 API 启用，并且由于安全问题[，使其普遍可用的计划已经停滞。](https://bugs.chromium.org/p/chromium/issues/detail?id=436489)

所以，~~截至 2018 年 3 月~~到目前为止，您仍然无法做到。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-08T07:54:16.710

简短的回答是您无法以`browserAction`编程方式打开。但是您可以[`dialog`](http://jqueryui.com/demos/dialog/)使用您的内容脚本创建一个模拟您的内容`browserAction`并显示它的脚本（以编程方式）。但是，您将无法`background page`像从`popup.html`. 您将不得不`pass message`改为您的分机。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-27T21:18:17.950

**如前所述，没有用于此的公共 API。**

我想出的一种解决方法是通过单击按钮将扩展作为[内容脚本](https://developer.chrome.com/extensions/content_scripts)`iframe`内部启动。因此，后台脚本将扩展 URL 发送到内容脚本以设置为 iframe 的，如下所示。`src`

*背景.js*

```
browser.runtime.onMessage.addListener((request) => {
  if (request.open) {
    return new Promise(resolve => {
      chrome.browserAction.getPopup({}, (popup) => {
        return resolve(popup)
      })
    })
  }
}) 
```

*内容-scipt.js*

```
const i = document.createElement('iframe')
const b = document.createElement('button')
const p = document.getElementById('some-id')

b.innerHTML = 'Open'
b.addEventListener('click', (evt) => {
  evt.preventDefault()
  chrome.runtime.sendMessage({ open: true }, (response) => {
    i.src = response
    p.appendChild(i)
  })
})
p.appendChild(b) 
```

这将在运行脚本的页面的 DOM 中打开扩展。您还需要将以下内容添加到清单中。

*清单.json*

```
....
"web_accessible_resources": [
  "popup.html"
]
.... 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2017-11-11T18:37:34.150

我有同样的要求：当用户点击扩展图标时，应该会打开一个小弹出窗口。就我而言，我正在编写一个扩展程序，该扩展程序将在单击图标时提供选择性股票的更新。这就是我的弹出窗口的样子。

[![在此处输入图像描述](../Images/fe7f70e1307328171396efde7c24096e.png)](https://i.stack.imgur.com/phIrR.png)

如果您有相同的要求，请阅读下面的答案。

这就是我的`manifest.json`文件的样子。

[![在此处输入图像描述](../Images/82c5994dbb45905f00545c38ca821bdc.png)](https://i.stack.imgur.com/jl2kp.png)

所有繁重的工作`manifest.json`仅由文件处理。有一个部分`browser_action`，其中有一个名为 的键`default_popup`，只需输入您希望弹出窗口显示的 HTML 文件的名称。

我希望我的扩展能够在所有页面上工作，这就是我`matches`在`content_scripts`. 我真的不需要将 jquery 文件`jquery-3.2.1.js`放在`js`数组中，但是扩展管理器不允许我将该数组保持为空。

希望这会有所帮助，如果您对答案有任何疑问，请发表评论。

# objective-c - 如何为字符串构造构建一个不错的通用 API？

> ID：10479681
> 
> 赞同：1
> 
> 时间：2012-05-07T09:28:32.627
> 
> 标签：objective-c, trampolines

在我们的应用程序中，我经常需要为按钮等 UI 元素加载图像。每个图像都有几种变体，例如横向/纵向、禁用/启用、推送/常规，甚至是白色/红色/灰色等颜色。加载代码有一些变量告诉它要加载哪个变体。例如，看一下以下示例按钮类：

```
enum {
    SampleImageButtonRed,
    SampleImageButtonWhite
} SampleImageButtonStyle;

@interface SampleImageButton : NSObject
@property(assign) SampleImageButtonStyle style;
@property(assign) BOOL landscape;
@property(assign) BOOL disabled;
@property(assign) BOOL pushed;
@end 
```

这里加载代码必须根据按钮类型查看属性和 load`button_white_pushed.png`等等。`button_red_landscape.png`代码在概念上很简单（只是一些字符串格式和`[UIImage imageNamed:]`调用），但同时有很多噪音和样板。

我试图想出一个简单的帮助类来让这更容易。该类将采用将属性映射到结果图像名称的规则，然后它将采用手头的实际属性值并返回适当的图像。就像是：

```
ImageBuilder *builder = [[ImageBuilder alloc] init];

[[[builder record] setPathTag:@"button_red"] setButtonStyle:SampleImageButtonRed];
[[[builder record] setPathTag:@"button_white"] setButtonType:SampleImageButtonWhite];

[[[builder record] setPathTag:@"disabled"] setDisabled:YES];
[[[builder record] setPathTag:@"enabled"] setDisabled:NO];

[[[builder record] setPathTag:@"landscape"] setLandscape:YES];
[[[builder record] setPathTag:@"portrait"] setLandscape:NO]; 
```

然后我会这样称呼：

```
// would load “button_red_enabled.png”
UIImage *texture = [[[builder image]
    setButtonStyle:SampleImageButtonRed]
    setDisabled:NO]; 
```

目前我对增加的复杂性是否值得感兴趣，我对 API 的设计和实现感兴趣。我认为“记录”API 可以工作，但“查询”API 不行，因为`setButtonStyle:`返回`void`，因此我无法链接调用或返回图像。

你有想法为这个问题提供一个很好的通用 API 吗？

# java - 删除用户选择的记录？

> ID：10479684
> 
> 赞同：0
> 
> 时间：2012-05-07T09:28:36.887
> 
> 标签：java, mysql

我在编码

```
String Name = txtName.getText();
String Surname = txtSurname.getText();  
st.executeUpdate("DELETE from list WHERE Name=@Name and Surname=@Surname"); 
```

但它不会删除记录。语法有问题吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:31:11.493

您需要用实际值替换`@name`和。`@surname`

并添加`'`您的价值观：

```
DELETE from list WHERE Name='@Name' and Surname='@Surname'

String Name = txtName.getText().Trim();
String Surname = txtSurname.getText().Trim();  
String query = "DELETE from list WHERE Name='" + Name + "' and Surname='" + Surname + "'";
st.executeUpdate(query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:31:13.317

尝试：

```
st.executeNonQuery("DELETE from list WHERE Name=?e and Surname=?"); 
```

并将姓名和姓氏作为参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:32:47.617

用这个

如果表列表存在。

这将起作用。

```
String Name = txtName.getText();
String Surname = txtSurname.getText();  

st.executeUpdate("DELETE from list WHERE Name='"+Name"' and Surname='"+Surname"'"); 
```

我这样修复它：

```
st.executeUpdate("DELETE from list WHERE Name='"+txtName.getText()+"'" + "and Surname='" + txtSurname.getText()+"'"); 
```

谢谢你们

# java - 停止特定时间间隔的警报

> ID：10479686
> 
> 赞同：0
> 
> 时间：2012-05-07T09:28:45.440
> 
> 标签：java, android, alarmmanager

我在我的应用程序中设置了每日闹钟。到目前为止一切都很好。但现在我想要的是警报在特定的时间间隔内保持沉默。我疯狂的警报活动每 30 分钟调用一次。现在例如，如果我将晚上 11 点设置为凌晨 4 点，则警报应在晚上 11 点至下午 4 点之间保持静音。代码如下：

```
Calendar currentTime = new GregorianCalendar();
        currentTime.set(Calendar.HOUR,Hour);// EXtra Added
        currentTime.set(Calendar.MINUTE,Minute);
        currentTime.set(Calendar.SECOND, Calendar.SECOND);
        currentTime.set(Calendar.DATE, Calendar.DATE);
        currentTime.set(Calendar.MONTH, Calendar.MONTH);

        Calendar start_time = new GregorianCalendar();
        start_time.set(Calendar.HOUR, sHour);// EXtra Added
        start_time.set(Calendar.MINUTE, sMinute);
    //  start_time.set(Calendar.SECOND, Calendar.SECOND);
    //  start_time.set(Calendar.DATE, Calendar.DATE);
    //  start_time.set(Calendar.MONTH, Calendar.MONTH);

        Calendar end_time = new GregorianCalendar();
        end_time.set(Calendar.HOUR, eHour);// EXtra Added
        end_time.set(Calendar.MINUTE, eMinute);
    //  end_time.set(Calendar.SECOND, Calendar.SECOND);
    //  end_time.set(Calendar.DATE, Calendar.DATE);
    //  end_time.set(Calendar.MONTH, Calendar.MONTH);

if(!SILENCE)
{

    fireAlarm(Hour, Minute);
}
else if((start_time.getTimeInMillis()<=System.currentTimeMillis())&& (System.currentTimeMillis()<=end_time.getTimeInMillis() ) )
{
    System.out.println("You Are in Silent Mode");
    SIlent",Toast.LENGTH_SHORT).show();

}else{
    fireAlarm(Hour,Minute);
} 
```

所以给我一个我可以解决的解决方案。谢谢。

# jakarta-ee - 将 j_security_check 从 JBOSS 移植到 Websphere

> ID：10479688
> 
> 赞同：0
> 
> 时间：2012-05-07T09:28:54.707
> 
> 标签：jakarta-ee, websphere, jboss5.x, j-security-check

我正在使用`j_security_check`我的 struts web 项目，并将它部署在 jboss 中。

在我`web.xml`定义的角色中`testuser`，创建了一个 jar 文件，其中包含`users.properties`jar名称`roles.properties`作为应用程序的名称。`TestUserInfo.jar``Test`

我的`web.xml`：

```
<security-constraint>
    <display-name>To secure Test site</display-name>
    <web-resource-collection>
        <web-resource-name>test_actions</web-resource-name>
        <url-pattern>*.action</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>testuser</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>test offshore realm</realm-name>
    <form-login-config>
        <form-login-page>/login_form.jsp</form-login-page>
        <form-error-page>/login_error.jsp</form-error-page>
    </form-login-config>
</login-config>

<security-role>
    <role-name>testuser</role-name>
</security-role> 
```

`users.properties`文件具有`username=password`名称值对，`roles.properties`并将`username=role`（在我的情况下`user=testuser`）作为名称值对。

`users.properties`当应用程序部署在 JBoss中时，我可以使用文件中的用户名和密码登录。`TestUserInfo.jar`保存在`jboss-5.1.0.GA\jboss-5.1.0.GA\server\default\lib`.

我必须在 websphere 中做什么才能实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T23:39:24.993

WebSphere 支持许多注册中心，如今联合存储库已成为 WAS 中的标准。

联合存储库可以由基于文件（文件系统中存储用户/密码、组等的文件、LDAP 服务器、数据库等）组成。

归根结底，用户信息存储在某个注册表中。JBoss/tomcat 将它们保存在不同的文件中（如您提到的名称），并且还支持 LDAP 和可能的其他用户注册表。类似地，WAS 支持多个这样的用户注册表。

您可以挑选最适合您环境的产品。

阅读此内容以更好地了解该空间

[http://www.ibm.com/developerworks/websphere/techjournal/0701_ilechko/0701_ilechko.html](http://www.ibm.com/developerworks/websphere/techjournal/0701_ilechko/0701_ilechko.html)

简而言之，如果你想存储你的用户，最简单的选择就是**fileRegistry.xml**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:18:39.310

您必须使用“基于文件的自定义用户注册表”。以下链接提供了有关如何配置它的详细信息（此示例中的 users.props 和 groups.props 文件将包含与您的 users.properties 和 roles.properties 文件中相同的信息）。该链接适用于 WAS v6。如果您使用的是其他版本，您可以在信息中心搜索与您的版本相同的概念。

[配置自定义用户注册表](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Ftsec_tdaman.html)

# jsp - java中的保存按钮功能

> ID：10479694
> 
> 赞同：-1
> 
> 时间：2012-05-07T09:29:38.290
> 
> 标签：jsp, spring-mvc, dao

我创建了一个显示登录用户详细信息的个人资料页面。提供了一个编辑按钮，它将我带到不同的 jsp。在这个jsp中，在编辑详细信息时，提供了一个保存按钮。现在在更改任何值时，我如何保存完整的表单。冷杉保存的功能是什么？我正在使用 DAO 来显示数据库中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:25:58.290

出色地...

1 DAO：创建具有添加/获取/更新/删除方法的DAO。

2 在 jsp 中使用用户字段创建表单。

```
<form name="userEditForm" method="post" action="...">
    <input type="text" name="userName" value="..."/>
</form> 
```

3 创建 Servlet/Controller (Spring) 来处理您在表单操作中将请求发布到指定地址。

4 从请求中获取表单数据并将其传递给 DAO 以添加/更新使用：

```
String userName = request.getParameter("userName");
User user = new User();
user.setName(userName);
userDao.update(user); 
```

这是常见的流程。

# c# - Trimstart 和 TrimEnd 无法正常工作

> ID：10479696
> 
> 赞同：0
> 
> 时间：2012-05-07T09:29:49.073
> 
> 标签：c#

我正在测试通过 C# 剪切字符串，但我没有得到正确的结果。它仍然显示全文exactString。

```
String exactString = ABC@@^^@@DEF
char[] Delimiter = { '@', '@', '^', '^', '@', '@' };
string getText1 = exactString.TrimEnd(Delimiter);
string getText2 = exactString.TrimStart(Delimiter);
MessageBox.Show(getText1);
MessageBox.Show(getText2); 
```

输出：

`ABC@@^^@@DEF`对于 getText1 和 getText2。

正确的 OUTPUT 应该是 getText1 的 ABC 和 getText2 的 DEF。

我如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T09:36:18.177

你想**分割**你的字符串，而不是**修剪**它。因此，正确的使用方法是[`String.Split`](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)：

```
String exactString = "ABC@@^^@@DEF";
var result = exactString.Split(new string[] {"@@^^@@"}, StringSplitOptions.None);
Console.WriteLine(result[0]);  // outputs ABC
Console.WriteLine(result[1]);  // outputs DEF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:31:41.923

您正在寻找[String.Replace](http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx)，而不是 Trim。

```
char[] Delimiter = { '@', '^' };
string getText1 = exactString.Replace(Delimiter,''); 
```

Trim 只删除开头的字符，Replace 会查看整个字符串。

[您可以使用（方便命名的） String.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法将字符串分成两部分。

```
char[] Delimiter = { '@', '^' };
string[] text = exactString.Split(Delimiter, StringSplitOptions.RemoveEmptyEntries);
//text[0] = "ABC", text[1] = "DEF 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:40:08.867

你可以使用[String.Split 方法](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)

```
String exactString = "ABC@@^^@@DEF";
string[] splits = exactString.Split(new string[]{"@@^^@@"}, StringSplitOptions.None);
string getText1 = splits[0];
string getText2 = splits[1];
MessageBox.Show(getText1);
MessageBox.Show(getText2); 
```

# wpf - 如何将属性传递给 WPF 样式

> ID：10479697
> 
> 赞同：2
> 
> 时间：2012-05-07T09:30:12.973
> 
> 标签：wpf

我正在尝试为 WPF ItemContainerStyle 编写一个可重用的模板。

这个模板改变了 TabControl 的 Item 的外观。此模板旨在用于应用程序中的多个位置。

在每个使用它的地方，我希望能够向它传递不同的参数。例如：要更改项目的边框的边距：

```
 <Style x:Key="TabItemStyle1" TargetType="{x:Type TabItem}">

                <Setter Property="Margin" Value="10,0"/>

                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TabItem}">
                            <Grid SnapsToDevicePixels="true">
                                <Border x:Name="Bd" Width="80"  
                                  Background="Gray" 
                                   Margin="{TemplateBinding Margin}">
                                    <ContentPresenter x:Name="Content" 
                                        ContentSource="Header" />
                                </Border>
                            </Grid>
                            <ControlTemplate.Triggers>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
...
<TabControl ItemContainerStyle="{DynamicResource TabItemStyle1}"> 
```

在使用样式的地方，我想写一些类似的东西：

```
ItemContainerStyle="{DynamicResource TabItemStyle1 Margin='5,0'}" 
```

或者

```
<TabControl Margin="78,51,167,90" ItemContainerStyle="{DynamicResource TabItemStyle1}"
            ItemContainerStyle.Margin="5,0"> 
```

动机是在具有不同边距的不同地方使用此模板。有没有办法做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T03:16:18.223

您可以使用附加的属性来做到这一点。我写了一篇博客文章解释了如何做到这一点：

[http://www.thomaslevesque.com/2011/10/01/wpf-creating-parameterized-styles-with-attached-properties/](http://www.thomaslevesque.com/2011/10/01/wpf-creating-parameterized-styles-with-attached-properties/)

另一种选择是使用`DynamicResource`和重新定义派生样式中的资源

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-02T09:10:04.227

在我的情况下，我必须在应用模板的深处更改一些参数（所以我不能只使用 setter）。而且我不想编写一些遍历可视化树的类或注册附加属性来进行更改。

但是，可以在基本样式中定义资源并在派生定义中覆盖这些值。因此，对于原始示例，这将如下所示：

```
<Style x:Key="AbsTabItemStyle" TargetType="{x:Type TabItem}">
    <!-- Override these default values in derived style definitions -->
    <Style.Resources>
        <s:Double x:Key="GridBorderMargin">10</s:Double>
        <Color x:Key="GridBorderColor">Grey</Color>
    </Style.Resources>

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabItem}">
                <Grid SnapsToDevicePixels="true">
                    <Border x:Name="Bd"
                            Width="80"
                            Background="{DynamicResouces GridBorderColor}"
                            Margin="{DynamicResouces GridBorderMargin}"
                            >
                        <ContentPresenter x:Name="Content" 
                            ContentSource="Header" />
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="BigMarginTabItemStyle" TargetType="{x:Type TabItem}" BasedOn="{StaticResource AbsTabItemStyle}">
    <!-- Set different values in this derived style definition -->
    <Style.Resources>
        <s:Double x:Key="GridBorderMargin">20</s:Double>
    </Style.Resources>
</Style>

<Style x:Key="RedTabItemStyle" TargetType="{x:Type TabItem}" BasedOn="{StaticResource AbsTabItemStyle}">
    <!-- Set different values in this derived style definition -->
    <Style.Resources>
        <c:Color x:Key="GridBorderColor">Red</Color>
    </Style.Resources>
</Style> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T03:16:20.157

好的，在戴夫的帮助下，我找到了一种方法。

解决方案是创建一个派生模板并在其中设置属性。这样可以重复使用原始模板。

```
<Style x:Key="TabItemStyle2" TargetType="{x:Type TabItem}" 
    BasedOn="{StaticResource TabItemStyle1}">
    <Style.Setters>
        <Setter Property="Margin" Value="40,0"></Setter>
    </Style.Setters>
</Style> 
```

并将 TabControl 的 ItemContainerStyle 设置为派生样式：

```
<TabControl ItemContainerStyle="{DynamicResource TabItemStyle2}"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:23:03.467

解决它的一种方法是向要显示的对象/ViewModel 添加一个 Margin 属性，并（数据）绑定到模板中的该值。

据我所知，不支持参数化样式/模板。

# android - Intent.getAction 结果为 NULL

> ID：10479698
> 
> 赞同：0
> 
> 时间：2012-05-07T09:30:18.743
> 
> 标签：android, android-intent, nfc

我试图从 android 开发人员那里实现 NFC 查看器的示例代码，但我没有从我的意图中收到任何操作，这是我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tag_viewer);
    mTagContent = (LinearLayout) findViewById(R.id.list);
    mTitle = (TextView) findViewById(R.id.title);

    final Intent queryIntent = getIntent();  
    final String queryAction = queryIntent.getAction(); 

    if (Intent.ACTION_SEARCH.equals(queryAction)) {  
         onNewIntent(getIntent());
   }  
   else {  
       //nothing
   }

   // resolveIntent(getIntent());

}

void resolveIntent(Intent intent) {
    // Parse the intent
    final String action = intent.getAction();

    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)) {
        // When a tag is discovered we send it to the service to be save. We
        // include a PendingIntent for the service to call back onto. This
        // will cause this activity to be restarted with onNewIntent(). At
        // that time we ryead it from the database and view it.
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        NdefMessage[] msgs;
        if (rawMsgs != null) {
            msgs = new NdefMessage[rawMsgs.length];
            for (int i = 0; i < rawMsgs.length; i++) {
                msgs[i] = (NdefMessage) rawMsgs[i];
            }
        } else {
            // Unknown tag type
            byte[] empty = new byte[] {};
            NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, empty, empty);
            NdefMessage msg = new NdefMessage(new NdefRecord[] {record});
            msgs = new NdefMessage[] {msg};
        }
        // Setup the views
      //  setTitle(R.string.);
        buildTagViews(msgs);
    } else {
        Log.e(TAG, "Unknown intent " + intent);
        finish();
        return;
    }
}
@Override
public void onNewIntent(final Intent newIntent) {
    super.onNewIntent(newIntent);
    final Intent queryIntent = getIntent();
    setIntent(queryIntent);
    resolveIntent(queryIntent);
} 
```

和意图过滤器：

```
 <activity android:name="TagReader_BuiltIn" 
         android:launchMode="singleTop">
        <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter> 
```

意图.getAction(); 总是导致 NULL，有什么想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:56:56.997

首先检查您的设备是否提供 NFC 功能。

您是否在清单文件中使用了以下权限

```
<uses-feature android:name="android.hardware.nfc" android:required="false" />
<uses-permission android:name="android.permission.NFC"/> 
```

使用`<action android:name="android.nfc.action.NFC_DISCOVERED"/>`而不是使用

```
<action android:name="android.nfc.action.TAG_DISCOVERED"/> 
```

并且不要手动调用 onNewIntent() 方法。像这样在 onResume 中调用方法 resolveIntent(Intent intent)

```
 super.onResume();      
        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) 
        {
          resolveIntent(getIntent());
         } 
```

希望这有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:39:02.747

确保您的活动清单中有 android:launchMode="singleTop" 。

```
public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        final Intent queryIntent = getIntent();  
        final String queryAction = queryIntent.getAction();  
        if (Intent.ACTION_SEARCH.equals(queryAction)) {  
             //do something
        }  
        else {  
            //do something
        }  
    }
    void resolveIntent(Intent intent) {
    // Parse the intent
    final String action= intent.getAction();

    .......
}

 @Override  
    public void onNewIntent(final Intent newIntent) {  
        super.onNewIntent(newIntent);  
        final Intent queryIntent = getIntent(); 
        setIntent(queryIntent);
        resolveIntent(queryIntent);
    } 
```

代替

```
String action = intent.getAction();
   @Override
public void onNewIntent(Intent intent) {
    setIntent(intent);
    resolveIntent(intent);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T13:19:00.537

如果您的 NFC 芯片有标签，您应该运行以下检查：

```
if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {
// Do something
} 
```

# facebook - 如何在其他用户的墙上分享链接

> ID：10479701
> 
> 赞同：0
> 
> 时间：2012-05-07T09:30:30.867
> 
> 标签：facebook, facebook-graph-api

使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)，我尝试发布以下内容：`/[another_user_id]/links`和链接字段
，但我收到此错误：

> (#240) 需要指定有效用户（通过会话或通过用于指定用户的 API 参数。

我在这里想念什么？使用`/[another_user_id]/feed`作品，但我希望它是一个共享链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:12:28.337

用户朋友墙中的以下代码帖子。

```
try {
    $newStatus = $facebook->api("/$FRIENDSUSERID/feed", 'POST',
    array(
      'link' => "https://apps.facebook.com/XXXXXXXXX",
      'picture' => "https://XXXXXXXXX", //colour
      'name' => "XXXXXXXXX",
      'description' => "XXXXXXXXX",
      'access_token' => $access_token
     ));
     //echo '<pre>Post ID: ' . $newStatus['id'] . '</pre>';
} catch(FacebookApiException $e) {
        error_log($e->getType());
        error_log($e->getMessage());
        //echo '<textarea style="width: 300px; height: 200px;">' . $e->getMessage() . '</textarea>';
} 
```

# python - 如何轻松知道python中是否实现了win32 api以及如何知道要导入哪个模块

> ID：10479704
> 
> 赞同：0
> 
> 时间：2012-05-07T09:30:45.330
> 
> 标签：python, winapi

[我使用来自http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)的 pywin32-216.win32-py2.7.exe ，并希望使用 Win32 API GetCPInfoEx()。但是，`import win32api`似乎没有提供该功能。

BTW：还有更多官方的python win32 api包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:31:48.553

> 有没有更多官方的python win32 api包？

您正在寻找的是[`pywin32`](http://sourceforge.net/projects/pywin32/).

# web-services - Magento 1.7.0.0 上的 SOAP V2 url 是什么

> ID：10479705
> 
> 赞同：11
> 
> 时间：2012-05-07T09:30:55.217
> 
> 标签：web-services, magento, soap

访问 Magento SOAP V2 的 url 是否在 1.7.0.0 版本中更改？当我尝试在浏览器中访问“ [http://www.somedomain.com/api/v2_soap?wsdl=1](http://www.somedomain.com/api/v2_soap?wsdl=1) ”上的服务时，会出现错误“指定的 Web 服务适配器无效”。这是一个错误还是我错过了什么？谢谢你的帮助

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-20T10:06:46.250

采用

```
http://www.somedomain.com/index.php/api/v2_soap?wsdl=1 
```

代替

```
http://www.somedomain.com/api/v2_soap?wsdl=1 
```

在 1.7 上只有第一个 url 有效，在 1.6 或更低版本上，第二个 url 也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:30:07.067

如果您想保持与旧 API 调用的兼容性，可以使用不同的方法。看看这里[https://stackoverflow.com/a/15897296/469995](https://stackoverflow.com/a/15897296/469995)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:09:27.870

```
http://xxxx.com/api/v2_soap?wsdl=1 
```

或者

```
http://127.1.1.1/magentohost/api/v2_soap?wsdl=1 
```

* * *

写[在这里](http://www.magentocommerce.com/api/soap/introduction.html)

# ruby-on-rails - 如何在phonegap中为跨平台使用组织移动应用程序的结构

> ID：10479707
> 
> 赞同：2
> 
> 时间：2012-05-07T09:30:59.163
> 
> 标签：ruby-on-rails, jquery-mobile, cordova, backbone.js, project-management

我想用包含后端的rails和json响应构建一个简单的应用程序，用于一个backbone.js应用程序，它将集成jquery-mobile的ui框架

（灵感来自这篇[文章](http://coenraets.org/blog/2012/03/employee-directory-sample-app-with-backbone-js-and-jquery-mobile/)和[ryan bates 网站](http://railscasts.com/episodes/323-backbone-on-rails-part-1?autoplay=true)的视频）

在我做一些完全错误的事情之前，我想问你是否更好：

构建backbone.js/jquery-mobile 应用程序除了rails 结构，但使用eco 模板更好地与phonegap 集成，以便在Apple Store 上发布应用程序

或者

是否有可能 像 ryan 在 2 个视频中说明的那样，在使用 phonegap 和特定步骤编译所有结构之后，将所有结构都与[骨干轨道 gem一起维护？](http://backbone-on-rails%20gem)

我希望这个问题很清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:10:46.040

我个人会先熟悉两者中的一个，然后移植我的知识来整合第二个。首先，最好将 Rails 保留为您的服务器 REST API 和数据库。您可以使用骨干网和 Rails 开发您的应用程序，就像您看到 Ryan 所做的那样。其次，一旦您熟悉了 Backbone 并且您的结构可以正常工作，那么使用 PhoneGap 编译一个简单的应用程序应该会容易得多。一步一步，更好的测试，更好的理解。

# sql - 如何在sql developer中将varchar转换为数字

> ID：10479708
> 
> 赞同：0
> 
> 时间：2012-05-07T09:31:05.017
> 
> 标签：sql, plsql, oracle-sqldeveloper

我试图使用这样的数字列表。

```
SELECT *
FROM users
WHERE id in (list_of_ids) 
```

这是 sql 过程的一部分，变量“list_of_ids”是 varchar，它包含如下 id：1,2,3,4,5........我如何使用这个列表和这个查询

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T09:46:28.770

试试这个。这可能是更好的解决方案，因为它不需要创建任何额外的功能。oracle regexp_substr 会将逗号分隔的值拆分为不同的行并传递给查询。

```
SELECT *
FROM users
WHERE id in 
(SELECT regexp_substr(list_of_ids,'[^,]+', 1, level) FROM dual
connect by regexp_substr(list_of_ids, '[^,]+', 1, level) is not NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:48:29.610

您可以使用 ref 游标来构造 sql 查询，就像在这个 pl/sql 块中一样：

```
declare
  list_of_ids    varchar2(100) := '1,3,4'; -- example
  c_cursor       sys_refcursor;
  result         number;
begin
  open c_cursor for ( 'SELECT id '||
                      'FROM   users '||
                      'WHERE  id in ('||list_of_ids||')'
                    );
  fetch c_cursor into result;
  while c_cursor%found
  loop
    dbms_output.put_line('ID='||to_char(result)); 
    fetch c_cursor into result;
  end loop;
  close c_cursor;
end;
/ 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-07T10:08:23.483

在您的项目中尝试此解决方案。
添加一个返回表的新用户函数。
代码如下：

```
CREATE   FUNCTION [dbo].[fn_Split](@text varchar(8000), @delimiter
 varchar(20) = ' ')
RETURNS @Strings TABLE
(    
  position int IDENTITY PRIMARY KEY,
  value varchar(8000)   
)
AS
BEGIN
DECLARE @index int 
SET @index = -1 
WHILE (LEN(@text) > 0) 
 BEGIN  
    SET @index = CHARINDEX(@delimiter , @text)  
    IF (@index = 0) AND (LEN(@text) > 0)  
      BEGIN   
        INSERT INTO @Strings VALUES (@text)
          BREAK  
      END  
    IF (@index > 1)  
      BEGIN   
        INSERT INTO @Strings VALUES (LEFT(@text, @index - 1))   
        SET @text = RIGHT(@text, (LEN(@text) - @index))  
      END  
    ELSE 
      SET @text = RIGHT(@text, (LEN(@text) - @index)) 
    END
  RETURN
END 
```

然后从您的存储过程中调用它，如下所示。

```
DECLARE @list_of_ids AS VARCHAR(100)

SET @list_of_ids = '1,2,3,4,5,6,7,8,9,10,'

SELECT *
FROM users
WHERE id in (SELECT value FROM dbo.fn_Split(@list_of_ids,',')) 
```

# mysql - 重复向表的字段添加值

> ID：10479716
> 
> 赞同：0
> 
> 时间：2012-05-07T09:31:32.533
> 
> 标签：mysql, text, add, field

我正在尝试将文本值插入到我的数据库`img`中调用的表的字段中。`counterimg`现在，表格如下所示：

```
id  img
1   0.jpg
2   1.jpg
3   3.jpg
4   4.jpg
5   5.jpg
6   6.jpg
7   7.jpg
8   8.jpg
9   9.jpg
10  0.jpg
11  1.jpg
12  2.jpg
13  3.jpg
... 
```

我想做的是继续添加，例如对于 id = 30 到 40 之间的每 10 个值，img 值应该是 0.jpg 到 9.jpg。这应该一直持续到 id = 999。

如何在 MySQL 中或使用 MySQL 查询（在某种循环中）执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:41:40.750

您可以使用[模运算 ( `%`)](http://en.wikipedia.org/wiki/Modulo_operation)。在您的情况下，它将是模 10：

```
0 % 10 = 0
9 % 10 = 9
10 % 10 = 0
19 % 10 = 9
... 
```

例如，您案例中的典型算法可能是：

```
for each i in [0 999] do
    id  <- i
    img <- (i % 10) + ".jpg"
    save (id, img) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:44:50.607

只需参考此内容并根据您的要求自定义查询。

[http://forums.mysql.com/read.php?10,89453](http://forums.mysql.com/read.php?10,89453)

# android - android中的图像幻灯片放映

> ID：10479717
> 
> 赞同：5
> 
> 时间：2012-05-07T09:31:33.860
> 
> 标签：android, json, image

我想在 android 中将图像显示为幻灯片放映。这些图像将以 json 数据格式来自服务器。你能告诉我如何在将显示图像的图像滑块中传递这些图像吗？来自服务器的 json 图像数量，它是完全动态的，一组图像......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T09:44:24.210

最初，您需要做的是计算来自 json 的图像的数量。当您获得所有图像时，您可以使用水平页面向用户显示它。它有助于更​​改每次滑动中的图像，就像在这个[链接](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)中一样。否则您可以使用两个帧，可以设置两个动画并像滑块一样显示它。我认为这段代码会对您有所帮助。

```
if (imagesetflag == true) {
                Right_to_left_in = AnimationUtils.loadAnimation(this,
                        R.anim.right_to_left_in);
                Right_to_left_out = AnimationUtils.loadAnimation(this,
                        R.anim.right_to_left_out);
                left_to_Right_in = AnimationUtils.loadAnimation(this,
                        R.anim.left_to_right_in);
                Left_to_Right_out = AnimationUtils.loadAnimation(this,
                        R.anim.left_to_right_out);

                frame1.setImageBitmapReset(decryptedimage, 0, true);
                TVpagenum.setText("Page no:" + Currentpage + "/"
                        + countOfPages);
                frame1.bringToFront();
                frame1.setVisibility(View.VISIBLE);
                frame2.setVisibility(View.INVISIBLE);
                frame1.setAnimation(Right_to_left_in);
                frame2.setAnimation(Right_to_left_out);                                     
                imagesetflag = false;
            } else {
                Right_to_left_in = AnimationUtils.loadAnimation(this,
                        R.anim.right_to_left_in);
                Right_to_left_out = AnimationUtils.loadAnimation(this,
                        R.anim.right_to_left_out);
                left_to_Right_in = AnimationUtils.loadAnimation(this,
                        R.anim.left_to_right_in);
                Left_to_Right_out = AnimationUtils.loadAnimation(this,
                        R.anim.left_to_right_out);

                frame2.setImageBitmapReset(decryptedimage, 0, true);
                TVpagenum.setText("Page no:" + Currentpage + "/"
                        + countOfPages);
                frame2.bringToFront();
                frame2.setVisibility(View.VISIBLE);
                frame1.setVisibility(View.INVISIBLE);
                frame2.setAnimation(Right_to_left_in);
                frame1.setAnimation(Right_to_left_out);                 
                imagesetflag = true;
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:41:07.600

您应该解析即将到来的 Json 数据并获取图像 url。有了这些数据，您可以使用 ViewPager，在其适配器中，您可以执行 asyncTask 以在 ViewPager 的项目布局中显示图像。

或者，您可以为滑块使用带有动画（如淡入、淡出）的 ViewFlipper。逻辑应该是一样的

# arrays - Postgresql 将查询结果保存在二维数组中

> ID：10479718
> 
> 赞同：0
> 
> 时间：2012-05-07T09:31:39.303
> 
> 标签：arrays, postgresql, 2d

我想在函数内创建二维数组并用 select 语句中的值填充它。我尝试这段代码并最终得到一维数组。我究竟做错了什么？

```
select array(select a from t a)
=====================================
"{"(1,stxt,varchar)","(2,sint,int)"}"

create or replace function __test(
) returns text
language 'plpgsql' as
$$
declare
  _dat varchar[][];

begin

  _dat = (select array(select a from t a));

  return array_dims(_dat);

end;
$$;

select __test();
===========
"[1:2]" 
```

我希望最后一个命令为两行三列返回 [1:2][1:3]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:19:25.097

PostgreSQL 仅支持一种类型的数组 - 因此您只能采用行数组/您不能采用 2D 数组。现在没有办法做好。

# android - 安卓时间跟踪器

> ID：10479720
> 
> 赞同：0
> 
> 时间：2012-05-07T09:31:42.023
> 
> 标签：android, timer

我找到了几个在 Android 中制作计时器/秒表的教程。尽管做出了这些努力，我还是无法让它们发挥作用。该应用程序应包含 10 个计时器，用于跟踪在某项任务上花费的时间。如果一个人花费了由计时器跟踪的 x 时间量，则应将其添加到花费在此任务上的总时间量中。

如果看过 [http://developer.android.com/resources/articles/timed-ui-updates.html](http://developer.android.com/resources/articles/timed-ui-updates.html) http://steve.odyfamily.com/?p=12 和其他一些谷歌点击当然。

在这种情况下最好使用什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:45:04.660

看看[System.nanoTime()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#nanoTime%28%29)方法。这是测量经过时间的首选解决方案。

# development-environment - 如何通过网络设置编码环境

> ID：10479722
> 
> 赞同：0
> 
> 时间：2012-05-07T09:31:44.403
> 
> 标签：development-environment

我需要设置团队编码环境，即两个或更多人，通过本地网络可以在一个项目上一起编码（PHP 编码）。我该怎么开始...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:33:57.803

您真的不希望人们处理*相同*的文件。

让他们两个都处理自己的文件（本地或服务器上的单独文件夹），并让他们使用 VCS，例如[Git](http://git-scm.com/)。这确保了冲突的修改不会简单地覆盖其他人的代码，而是必须正确解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:35:57.613

您应该考虑使用任何类型的[SCM](http://en.wikipedia.org/wiki/Revision_control)（Git、SVN ...）和支持此 SCM（[netbeans](http://netbeans.org/features/php/)、eclipse）的 IDE。

Git 和[Github](https://github.com/)似乎是当下的趋势。你应该看看

# windows - 如何更新 Perl 脚本以在 MS Windows 上运行

> ID：10479724
> 
> 赞同：2
> 
> 时间：2012-05-07T09:31:49.927
> 
> 标签：windows, perl

我在 MS Windows 上使用 Strawberry Perl 5.14.2。以下代码在 Linux Perl 5.10.1 上运行良好，但在 MS Windows 上失败。我需要更新它以在两者上运行。

```
sub read_dict {
    open F, "<:utf8", "$dictfile" || die "Dictonary file $dictfile not found";
    while (<F>) {
        chomp;
        s/^ *//;
        split;
        $freq{$_[1]}  = $_[0];
        $header = substr($_[1],0,$wd);
        if ($freq{"m,$header"}) {
            if ($freq{"m,$header"} < length($_[1])) {
                $freq{"m,$header"} = length($_[1]);
            }
        } else {
            $freq{"m,$header"} = length($_[1]);
        }
        $freq{total} += $_[0];
    }
    close(F);
} 
```

它在 MS Windows 上找到并解析 $dictfile，但未能累积 $freq{total}，这会导致其他地方出现被零除的错误。$dictfile 是一个加权字典，其数据如下所示：

```
8 永垂不朽
8 震耳欲聋
85 罗马里奥
891 澳大利亚
9 埃芬贝格 
```

我在两个平台之间的故障排除表明它在拆分时失败了；或以下行，但我不知道足够的 Perl 来修复它。是否需要更改代码，还是应该使用特定的命令行选项启动 Perl？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:04:04.347

根据 ArtM 的建议，这是工作代码。

```
sub read_dict {
    open F, "<:utf8", "$dictfile" || die "Dictonary file $dictfile not found";
    while (<F>) {
        chomp;
        s/^ *//;
        my @entry = split(/ /, $_);
        $freq{$entry[1]}  = $entry[0];
        $header = substr($entry[1],0,$wd);
        if ($freq{"m,$header"}) {
            if ($freq{"m,$header"} < length($entry[1])) {
                $freq{"m,$header"} = length($entry[1]);
            }
        } else {
            $freq{"m,$header"} = length($entry[1]);
        }
        $freq{total} += $entry[0];
    }
    close(F);
} 
```

# android - 用户点击通知后完成当前活动

> ID：10479725
> 
> 赞同：0
> 
> 时间：2012-05-07T09:31:51.447
> 
> 标签：android, notifications

在我的 android 客户端程序中，只要用户有更新，就会收到通知。当用户点击通知时，他会被带到显示通知的新活动。现在的问题是，当用户正在查看更新时，如果收到另一个通知，并且如果他单击该通知，则不会创建新活动。
显示上一个活动。活动没有刷新。<我怀疑这是因为当前活动尚未完成。我应该如何克服这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:37:35.573

将其放在清单中的活动代码中（可以使用参数以更好地适应您的应用程序）。

> android:launchMode="singleTop"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:58:42.757

尝试在清单上的活动标签上添加此属性：

```
android:launchMode=["multiple" | "singleTop" |
                    "singleTask" | "singleInstance"] 
```

使用 value `singleTop`，它不会创建其他活动，而是调用潜在活动的 onNewIntent 方法（如果存在）。

[活动元素文档](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:39:44.747

为什么要使用 onResume() 方法用新的通知数据更新 ui，而不是完成当前活动。编写更新 ui 组件的方法并从 onResume() 中调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T05:17:51.697

为什么不在代码中尝试 onWindowFocusChanged (boolean hasFocus)。在您的情况下发生的是活动窗口已经处于聚焦状态所以当您单击通知栏并移动到同一个活动窗口时不会发生任何事情。
每次您进入该活动时，都会执行 onWindowFocusChanged (boolean hasFocus)。所以把你的整个代码放进去。即使第一次调用活动，它也会被执行。因此，将您的代码从 public void onCreate(Bundle savedInstanceState) 复制到

```
 public void onWindowFocusChanged (boolean hasFocus)
    {
       super.onWindowFocusChanged(hasFocus);
       setContentView(R.layout.layout_name);

           //Your code to be executed here
    } 
```

是的，您还需要具有 Oncreate() 函数，因此您将其声明为

```
@Override
   public void onCreate(Bundle savedInstanceState)
   {
    super.onCreate(savedInstanceState);
   } 
```

试试这个。**我希望这个对你有用**

# iphone - NSXMLParser 错误代码 201

> ID：10479726
> 
> 赞同：2
> 
> 时间：2012-05-07T09:31:58.040
> 
> 标签：iphone, xcode

我有一个名为

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
        <OfflineDealModel>
            <DealUri>http://www.upto75.com/Therapy_Ayurveda/m/5505/Sale_Offer.html</DealUri>
            <DealCode i:nil="true"/>
        </OfflineDealModel> 
```

当我解析这些数据时，我在该行收到名为 201 的错误代码。 `<DealCode i:nil="true"/>`请帮助我如何解决这个问题。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:20:52.350

你需要添加`xmlns:i="http://www.w3.org/2001/XMLSchema-instance"`

试试这个：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
   <OfflineDealModel xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <DealUri>http://www.upto75.com/Therapy_Ayurveda/m/5505/Sale_Offer.html</DealUri>
        <DealCode i:nil="true" />
</OfflineDealModel> 
```

可能是它的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:54:13.893

似乎是您的标签未正确关闭。

```
<DealCode i:nil="true">
</DealCode> 
```

# php - 在 Symfony2 表单中创建按钮

> ID：10479727
> 
> 赞同：1
> 
> 时间：2012-05-07T09:31:59.613
> 
> 标签：php, symfony

symfony2 是否有用于表单的简单按钮类型（不是提交或文件）？我看了那里（http://symfony.com/doc/current/reference/forms/types.html）但找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T18:07:48.377

作为对这个问题的更新，从 Symfony 2.3（2013 年 5 月底发布）开始，它们现在确实有按钮类型 [http://symfony.com/doc/current/reference/forms/types/button.html](http://symfony.com/doc/current/reference/forms/types/button.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:47:28.657

不。由于您没有将数据绑定到按钮，因此为其设置类型是没有意义的。使用纯 HTML 执行此操作。

# html - 以下箭头如何在没有图像的情况下显示？

> ID：10479736
> 
> 赞同：-1
> 
> 时间：2012-05-07T09:32:38.717
> 
> 标签：html, css, twitter-bootstrap

我这里有一个模型

[http://jsfiddle.net/yug3Q/1/](http://jsfiddle.net/yug3Q/1/)

如果你点击一个日期，你会得到前进和后退箭头。这些似乎不是我想知道它们是如何渲染的图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T09:37:14.637

如果您查看 CSS，您会注意到以下行：

```
background-image: url(../img/glyphicons-halflings.png); 
```

所以，这些按钮确实是图像。 `glyphicons-halflings.png`是一个包含许多不同图像的图像文件，并且使用该`background-position`属性选择特定图像。如：

`background-position: 14px 14px;`

来自[这些图标的 twitter 引导页面](http://twitter.github.com/bootstrap/base-css.html#icons)：
**构建为 sprite**
我们没有将每个图标都作为额外的请求，而是将它们编译成一个 sprite——在一个文件中的一堆图像，该文件使用 CSS 来定位具有背景位置的图像。这与我们在 Twitter.com 上使用的方法相同，并且对我们来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:37:32.087

它们是属于 CSS [Sprite](http://www.eyecon.ro/bootstrap-datepicker/img/glyphicons-halflings.png)一部分的图像。

# objective-c - UIButton 显示 BackgroundImage、Image 和 Title

> ID：10479738
> 
> 赞同：0
> 
> 时间：2012-05-07T09:32:52.507
> 
> 标签：objective-c, ios, cocoa-touch, uibutton, setbackground

我想创建一个`UIButton`使用它的`setBackgroundImage`,`setImage`和`setTitle`属性的，但是当我添加时`setTitle`，`setImage`标题`setBackgroundImage`不会出现。

我试过以下。

```
[button setBackgroundImage:[UIImage imageNamed:@"image3.jpg"] forState:UIControlStateNormal]; 
[button setImage:[UIImage imageNamed:@"month_pct_general.png"] forState:UIControlStateNormal];
[button setTitle:[NSString stringWithFormat:@"%d",[button tag]] forState:UIControlStateNormal]; 
[button setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal]; 
[button.titleLabel setFont:[UIFont boldSystemFontOfSize:20.0f]]; 
[button setTitleEdgeInsets:UIEdgeInsetsMake(45, 0, 0, 25)]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:55:05.510

您在按钮上的标题和标题上的所有图像都在那里，所以像这样在图像上添加标签。

```
UIButton *myButton = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
[myButton setFrame:CGRectMake(0,3,70,32)];
[myButton setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
[myButton addTarget:self action:@selector(compete) forControlEvents:UIControlEventTouchUpInside];
UILabel *Label=[[UILabel alloc]initWithFrame:CGRectMake(6, 5, 60, 20)];
[Label setText:@"label"];

Label.backgroundColor=[UIColor clearColor];
[Label setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
Label.textColor=[UIColor whiteColor];
[myButton addSubview:Label]; 
```

您的所有图像仅在标题上方，因此您的标题在背景中，因此请在图像视图上使用标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:59:34.880

如果您使用界面生成器制作 GUI，则单击标签并转到编辑器-> 排列-> 发送到前面。

# javascript - 在 Google Charts BarChart (JavaScript API) 中显示值标记

> ID：10479741
> 
> 赞同：0
> 
> 时间：2012-05-07T09:33:13.020
> 
> 标签：javascript, charts, google-visualization

我正在尝试在条形图上或旁边呈现带有值标签的 Google Charts BarChart。默认情况下，当用户将鼠标悬停在条上时会显示这些值。我想在图表中永久显示这些值。

据我所知，这可以使用 Image Charts API，但不能使用 JavaScript API。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:29:22.860

为什么不在图例中添加值（它是我如何解决相同问题的）在您设置每列名称的位置添加它旁边的值。

例如跟踪仓库中的库存：

```
var sold = 300;
var missing = 7;
var reserved = 5;
var available = 143;

var data = google.visualization.arrayToDataTable([
    [' Available (' + available + ')', 'Missing (' + missing+ ')', 'Reserved (' + reserved+ ')', 'Sold (' + sold+ ')'],
    [available, missing, reserved, sold]
    ]); 
```

输出：

*   可用 (143)
*   失踪 (7)
*   保留 (5)
*   已售出 (300)

# php - 我想在不创建对象的情况下初始化属性

> ID：10479742
> 
> 赞同：0
> 
> 时间：2012-05-07T09:33:14.793
> 
> 标签：php, oop, static

当我运行下面的代码时，我在行`echo $attribute;` 中出现错误错误代码：“可捕获的致命错误：类 SomeShape 的对象无法转换为字符串”：这段代码有什么问题？谢谢。

```
<?php

   class Shape
    {
      static public $width;
      static public $height;
    }

 class SomeShape extends Shape
    {
         public function __construct()
      {
        $test=self::$width * self::$height;
        echo $test;
        return $test;
      }
    }

    class SomeShape1 extends Shape
    {
         public function __construct()
      {
        return self::$height * self::$width * .5;
      }
    }

    Shape::$width=60;
    Shape::$height=5;
    echo Shape::$height;
    $attribute = new SomeShape;
    echo $attribute;
    $attribute1 = new SomeShape1;
    echo $attribute1;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:38:14.367

不要`return`在构造函数中执行 a 。

如果要回显一个值，请尝试添加一个`__toString()`函数（[手动](http://us.php.net/manual/en/language.oop5.magic.php#object.tostring)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:09:47.477

`__toString`如果不实现该方法，则无法回显对象。

或者你可以`var_dump`对象：

```
var_dump($attribute); 
```

但我认为你实际上想要做的更像是这样的：

```
class Shape {
    public $width;
    public $height;

    public function __construct($width, $height) {
        $this->width = $width;
        $this->height = $height;
    }
}

class SomeShape extends Shape {
    public function getArea() {
        return $this->width * $this->height;
    }
}

class SomeShape1 extends Shape {
    public function getHalfArea() {
        return $this->width * $this->height * .5;
    }
}

$shape = new SomeShape(10, 20);
echo $shape->getArea();

$shape = new SomeShape1(10, 20);
echo $shape->getHalfArea(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:40:49.440

你想要做的是回显一个对象，就像你在回显一个数组（比回显一个数组更糟糕，因为回显一个对象会引发错误），而你应该做的是访问它的属性或方法等。但是如果你想c 你的对象中有什么，你必须使用 var_dump 而不是 echo 。

简而言之，echo $attribute 是错误的。使用 var_dump($attribute)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T04:19:19.993

我找到的解决方案是：我不想为类形状添加更多属性，但这解决了我希望的问题。可能有更多类似的解决方案我很乐意看到。但这是我在类形状“public $attribute;”中定义的想法 在 SomeShape 类中，我写在“public function __construct()”“$this->attribute=self::$width * self::$height;”上 在主范围内，我写了“echo $object->attribute”。
“;”

```
<?php

   class Shape
    {
      static public $width;
      static public $height;
      public $attribute;
    }

 class SomeShape extends Shape
    {

         public function __construct()
      {
        $this->attribute=self::$width * self::$height;
      }
    }

    class SomeShape1 extends Shape
    {
         public function __construct()
      {
        $this->attribute=self::$width * self::$height * .5;
      }
    }

    Shape::$width=60;
    Shape::$height=5;

    $object = new SomeShape;
    echo $object->attribute."<br />";

    $object1 = new SomeShape1;
    echo $object1->attribute;
?> 
```

# android - Local Host Refused

> ID：10479743
> 
> 赞同：2
> 
> 时间：2012-05-07T09:33:15.637
> 
> 标签：android, httpconnection

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

                        nameValuePairs.add(new BasicNameValuePair(
                                "product_name", product_name));
                        nameValuePairs.add(new BasicNameValuePair("brand",
                                brand_product));
                        nameValuePairs.add(new BasicNameValuePair("reference_price",
                                mrp_product));
                        nameValuePairs.add(new BasicNameValuePair("model",
                                model_product));

                        HttpPost httppost = new HttpPost(
                                "http://10.0.2.2/wic3/wic2/product/doadd");

                        httppost.setEntity(new UrlEncodedFormEntity(
                                nameValuePairs));
                        ResponseHandler<String> responseHandler = new BasicResponseHandler();
                        String response = SignUpActivity.httpclient.execute(
                                httppost, responseHandler);
                        Log.d("response", response);

                        Intent intent = new Intent(ShareProductActivity.this, ShareActivity.class);
                        startActivity(intent); 
```

this gives me an exception:

`05-07 14:56:19.105: D/exception(1137): org.apache.http.conn.HttpHostConnectException: Connection to http://localhost refused`

i searched for this and everyone says change `127.0.0.1` to `10.0.2.2`, but i am not using `127.0.0.1` I guess the problem is at this step:

```
String response = SignUpActivity.httpclient.execute(httppost, responseHandler); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:45:49.700

根据定义，本地主机是指托管系统 - android 设备本身。除非您尝试联系在 android 设备上运行的服务器，否则它对您不起作用。

听从那些建议您将 127.0.0.1（这是 localhost 的名称）更改为托管模拟器的机器的转发别名的建议。

但是请注意，**这仅适用于模拟器**，不适用于真实设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:29:20.840

有两件事要做。

使用 1`http://10.0.2.2:8080/`代替您的 IP 地址

关闭您的`eclipse`并`avd`重新启动它们。

# mysql - Sql Sub查询需要添加两个查询

> ID：10479745
> 
> 赞同：2
> 
> 时间：2012-05-07T09:33:38.727
> 
> 标签：mysql, sql

我有一个查询，昨天运行得很好，由 Shaikh Farooque [Link 回答了那个问题](https://stackoverflow.com/questions/10461209/sub-sql-query-please-help-me)

现在我有另一个问题，我需要过滤那些在同一个美食 ID 下的 foodjoint_id 细节。 **用户要提交 lat long 和 food_id 我需要过滤那些 FoodJoint**

正如我告诉你的那样，我已经通过正在运行的 Lat Long 搜索 Food Joint，我需要添加美食过滤器。

正在运行的查询是

```
SELECT foodjoint_id,foodjoint_name,open_hours,cont_no,address_line,city, 
( 3959 * acos( cos( radians('".$userLatitude."') ) * 
   cos( radians( foodjoint_latitude) ) * cos( radians( foodjoint_longitude) - 
   radians('".$userLongitude."') ) + sin( radians('".$userLatitude."') ) * 
   sin( radians( foodjoint_latitude) ) ) ) AS distance,
 (SELECT AVG(customer_ratings) 
 FROM customer_review 
 WHERE foodjoint_id=provider_food_joints.foodjoint_id) AS customer_rating 
 FROM provider_food_joints 
 HAVING distance < '3' ORDER BY distance 
```

我已经添加了它：

```
SELECT foodjoint_id FROM menu_item WHERE cuisine_id=''.$userGivenCuisineId.'' 
```

**很遗憾的说问题还是没有解决**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:59:47.593

```
SELECT foodjoint_id,foodjoint_name,open_hours,cont_no,address_line,city, 
( 3959 * acos( cos( radians('".$userLatitude."') ) * 
   cos( radians( foodjoint_latitude) ) * cos( radians( foodjoint_longitude) - 
   radians('".$userLongitude."') ) + sin( radians('".$userLatitude."') ) * 
   sin( radians( foodjoint_latitude) ) ) ) AS distance,
(select AVG(customer_ratings) from customer_review where 
foodjoint_id=provider_food_joints.foodjoint_id) as customer_rating 
FROM provider_food_joints 
where  foodjoint_id in 
(SELECT foodjoint_id FROM menu_item WHERE cuisine_id='".$userGivenCuisineId."')
HAVING distance < '3' ORDER BY distance 
```

# jquery - adding .resizable to div ids

> ID：10479750
> 
> 赞同：2
> 
> 时间：2012-05-07T09:33:59.113
> 
> 标签：jquery, css, jquery-ui, jquery-ui-resizable

I found this code in one of the other questions on here. It's exactly what i'm looking for (draggable and it neatly stacks the divs based on which one was clicked last) except I also want the div ids to be resizable but I can't figure out how to do it without messing the code up.

[http://jsfiddle.net/LQ4JT/7/](http://jsfiddle.net/LQ4JT/7/)

```
$(document).ready(function() {
    var a = 3;
    $('#box1,#box2,#box3,#box4').draggable({
        start: function(event, ui) { $(this).css("z-index", a++); }
    });
    $('#dragZone div').click(function() {
        $(this).addClass('top').removeClass('bottom');
        $(this).siblings().removeClass('top').addClass('bottom');
        $(this).css("z-index", a++);

    });
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:37:43.823

只需调用`.resizable()`，它们就会变得可调整大小。

```
$('#box1,#box2,#box3,#box4').draggable({
   start: function(event, ui) { $(this).css("z-index", a++); }
}).resizable(); 
```

您看不到它的原因：在 jsFiddle 中，jQuery UI 包含在没有主题的情况下。如果您检查这些框，您可以看到它们具有`ui-resizable`类，并且它们内部也有调整大小的句柄，如下所示：

```
<div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 1001; "></div> 
```

，但它们根本没有样式。它们是不可见的。如果您给它们提供尺寸，您将能够拖动它们并调整框的大小。

这是一个[简单的演示](http://jsfiddle.net/LQ4JT/269/)，显示了我在说什么。

这些是我改变的东西：

*   添加`.ui-resizable-se { width: 20px; height: 20px; background: cyan; position: absolute; bottom: 0; right: 0; }`到 CSS 中，这将为**外部**处理程序设置样式**。**

***   添加了`.resizable()`通话

    *   更改了这个选择器：`'#dragZone div'`这样`'#dragZone > div'`它就不会弄乱处理程序，并且只应用于真正的盒子，而不是区域中的每个 div**

# facebook-like - Why does the 'like' count in my page rollback?

> ID：10479752
> 
> 赞同：1
> 
> 时间：2012-05-07T09:34:27.293
> 
> 标签：facebook-like, facebook-likebox

I'm attempting to implement facebook "likes" and having a bit of trouble. The count keeps rolling back after a page refresh.

**Steps to reproduce**

1.  Navigate to [http://bookmill.co.kr/books/9/quotations/79](http://bookmill.co.kr/books/9/quotations/79) (*note: this page is in Korean*)
2.  Click Like
3.  Notice the like count increments
4.  Refresh your browsers

Notice that after step #4 the count is rolled back? The like is posted to my Facebook wall. I'm not clear what's going wrong.

I attempted the same thing with: [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)
and it's rollback too.

Any idea what's going on? `og` tag is wrong? incorrect `AppId`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:54:14.053

[facebooklikes](http://www.socialmediamarketingmall.com/facebook-likes)：嗯，developer.facebook 有限制。所以你可能需要聘请一位编程专家。

# java - Can I replace a class file in compiled Java project?

> ID：10479753
> 
> 赞同：6
> 
> 时间：2012-05-07T09:34:27.730
> 
> 标签：java

This may, and should be, a question that has been asked and answered many times over, but I just cant find the answer.

If I have a compiled application running on a server, can I compile the application on my local machine, and swap a class that I compiled on my local machine, with the one on the server?

In other words, can I replace a file that has been compiled and is on the server side, with a file **almost** identical that has been compiled, and is located, on my local machine?

Since the version on the server side has some hard-coded connections in other files, and I dont know all of the places, I would prefer to only swap the one file that I need, instead of doing a recompile for the application as a whole.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T09:38:54.013

您的问题的答案是肯定的，您可以替换一个类文件，但这有点复杂，因为您必须确保没有其他依赖项发生更改。

例如，如果您正在编译的类涉及更改其他类中使用的方法的方法签名，那么您也需要替换它们。只要不更改公共、受保护或默认方法的方法签名，就应该没问题。

附带说明一下，如果这是你经常做的事情，你会很快意识到为什么对象经常被传递给方法而不是单个参数。

```
public MyObject getObject(MyObject2 mySecondObject) 
```

对比

```
public MyObject getObject(int a, int b, int c) 
```

当您需要为传递给方法的对象添加新属性时，方法签名不会更改，但是当您在方法签名本身上添加或删除参数时，它会在所有依赖项上产生连锁反应，要求您编译和替换这些类文件。

最后要强调的一点是，值得注意的是，您对私有方法或私有变量甚至方法的定义所做的更改对其他类文件没有影响或影响。唯一重要的是您维护您的方法与其他类的约定，因为输入和输出始终采用和返回相同的数据类型。

这突出了实例变量封装的重要性以及这些依赖项如何对其他类隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:37:40.143

是的，你可以做到。此外，由于热点，该类甚至会在运行时重新加载，因此您不必重新启动服务器。这在开发周期中非常有用。

但要小心替换一个单独的类。如果该类在您的环境中更改了对其他类的引用，则替换将在服务器上失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:38:49.343

我假设您正在谈论“离线”替换（我的意思是您可以重新启动服务器）。

在这种情况下，以下解决方案可能是可行的：Java 使用**类路径**变量。在那里，您定义了一系列 jars/文件夹，您的进程将在其中查找文件。

因此，您可以执行以下操作：

1.  创建您的新类（它应该具有相同的名称并位于同一个包中）并编译。
2.  在服务器上创建您计划存储更新类的文件夹。

3.  更新**类路径**变量（可能在应用程序的启动脚本中），使该文件夹出现**在**其他类之前。

4.  重新启动您的服务器。现在您的新课程将在旧课程之前解决并加载。

警告：这适用于“独立”应用程序，通常适用于那些不使用自定义类加载器的应用程序（例如，应用程序服务器就是这种情况）。

更复杂的解决方案可以基于定义您的类加载器，该类加载器将查看这样的文件夹（如我所描述的）并尝试从那里加载资源。

希望这可以帮助。

# asp.net - Putting the cursor in text box after validating in ASP.NET

> ID：10479762
> 
> 赞同：-1
> 
> 时间：2012-05-07T09:35:39.550
> 
> 标签：asp.net

I have a basic ASP.NET website which has a register page with the user name, password and email as text boxes. Only one of them, the email, has a validation which is the default email validation from ASP.NET. After the validation, I want the cursor to be in the email textbox if the validation fails. Currently the message is displayed but the cursor is not on the page.

```
 <tr>
                                                <td>
                                                    <asp:TextBox ID="txtPassword" runat="server" CssClass="cpTextBox" TextMode="Password"
                                                        TabIndex="7" ToolTip="Password must be at least six characters in length"></asp:TextBox>
                                                    <asp:RequiredFieldValidator ID="rfvPassword" runat="server" ControlToValidate="txtPassword"
                                                        ErrorMessage="Please enter password" Display="None">*</asp:RequiredFieldValidator>
                                                    <asp:RegularExpressionValidator ID="revPassword" runat="server" ControlToValidate="txtPassword"
                                                        ErrorMessage="Password must be at least six characters in length" ValidationExpression=".{6,50}"
                                                        Display="None">*</asp:RegularExpressionValidator>
                                                </td>
                                                <td>
                                                    <asp:TextBox ID="txtTitle" runat="server" CssClass="cpTextBox" TabIndex="11"></asp:TextBox>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <asp:Label ID="lblVerifyPassword" runat="server" CssClass="cpLabel" Text="Verify password"></asp:Label>
                                                    <asp:Label ID="Label4" runat="server" ForeColor="Red" Text="*"></asp:Label>
                                                </td>
                                                <td>
                                                    <asp:Label ID="lblPhone" runat="server" CssClass="cpLabel" Text="Phone"></asp:Label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <asp:TextBox ID="txtVerifyPassword" runat="server" CssClass="cpTextBox" TextMode="Password"
                                                        TabIndex="8"></asp:TextBox>
                                                    <asp:RequiredFieldValidator ID="rfvConfirmPassword" runat="server" ControlToValidate="txtVerifyPassword"
                                                        ErrorMessage="Please verify the password" Display="None">*</asp:RequiredFieldValidator>
                                                    <asp:CompareValidator ID="cvVerifyPassword" runat="server" ControlToCompare="txtPassword"
                                                        ControlToValidate="txtVerifyPassword" ErrorMessage="Please verify the password"
                                                        Display="None">*</asp:CompareValidator>
                                                </td> 
```

Can someone guide me on how to do this?

Regards.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:59:51.613

对于验证器控件，请设置`SetFocusOnError="true"`

# c# - How to get the connection String from a database

> ID：10479763
> 
> 赞同：252
> 
> 时间：2012-05-07T09:35:41.517
> 
> 标签：c#, sql-server, visual-studio

I have created a database with SQL Server Management Studio, I would like to now use it in my C# application. I need the connection string?

Where can I find the connection string, and where is my database stored?

Do I have to publish it or something like that, or is it in my documents somewhere?

```
using (var conn = new SqlConnection("your connection string to the database")) 
```

How do I obtain the **connection string**? Where can I find the connection string to copy paste into the above section?

How to I publish my database so that Visual Studio can pick it up? Then I can just pull the connection string of there?

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-05-07T09:47:11.497

获取连接字符串的最简单方法是使用 Visual Studio 中的“服务器资源管理器”窗口（菜单*View*、*Server Explorer*）并从该窗口连接到服务器。

然后您可以在已连接服务器的属性中看到连接字符串（选择连接并按 F4 或 Alt+Enter 或在右键菜单中选择属性）。

**高级连接字符串设置：**创建连接时，您可以通过单击底部的“高级...”按钮修改任何高级连接字符串选项，如 MARS、弹性、超时、池配置等。添加连接”对话框。您可以稍后通过右键单击数据连接并选择“修改连接...”来访问此对话框。可用的高级选项因服务器类型而异。

如果您使用 SQL Server Management Studio 创建数据库，则该数据库将在服务器实例中创建，因此，要部署您的应用程序，您必须备份数据库并将其部署在部署 SQL Server 中。或者，您可以使用使用 SQL Server Express（SQL Server 2012 中的 localDB）的数据文件，该文件将与您的应用程序一起轻松分发。

即，如果它是一个 ASP.NET 应用程序，则有一个 App_Datafolder。如果您右键单击它，您可以添加一个新元素，它可以是 SQL Server 数据库。该文件将位于该文件夹中，可与 SQL Express 一起使用，并且易于部署。你需要在你的机器上安装 SQL Express / localDB 才能工作。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2012-05-07T09:52:38.003

检索连接字符串的一种非常简单的方法是创建一个文本文件，将扩展名从*.txt*更改为*.udl*。

双击*.udl*文件将打开*数据链接属性*向导。

配置并测试与数据库服务器的连接。

关闭向导并使用您选择的文本编辑器打开 .udl 文件，然后只需复制连接字符串（不包括该`Provider=<driver>`部分）即可在您的 C# 应用程序中使用它。

**示例 udl 文件内容**

```
[oledb]
; Everything after this line is an OLE DB initstring
Provider=SQLNCLI11.1;Integrated Security=SSPI;Persist Security Info=False;User ID="";Initial Catalog=YOURDATABASENAME;Data Source=YOURSERVERNAME;Initial File Name="";Server SPN="" 
```

**你需要从中复制什么**

```
Integrated Security=SSPI;Initial Catalog=YOURDATABASENAME;Data Source=YOURSERVERNAME; 
```

如果您想指定用户名和密码，您可以从其他答案中采用。

教程：[https ://teusje.wordpress.com/2012/02/21/how-to-test-an-sql-server-connection/](https://teusje.wordpress.com/2012/02/21/how-to-test-an-sql-server-connection/)

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2019-06-17T16:49:37.780

如果您已安装并设置 MS SQL Server 和 Management Studio，请转到 Visual Studio（Visual Studio 不是 SQL Server Management Studio）。

> **1]**在 Visual Studio 中，转到**Tools -> Connect to Database**。
> 
> **2]**在服务器名称下选择您的数据库服务器名称（如果需要时间，让列表填充）。
> 
> **3]**在 Connect to a Database 下，选择**Select or enter a database name**。
> 
> **4]**从下拉列表中选择您的数据库。
> 
> **5]**选择数据库后尝试测试连接。
> 
> **6]**如果测试连接成功，请单击确定。
> 
> **7]**在 Visual Studio 中，转到**View -> Server Explorer**。
> 
> **8]**在服务器资源管理器窗口中，在数据连接下选择您的数据库。**右键单击您的数据库 -> 单击 Properties**。
> 
> **9]**在**属性**窗口中，您将看到您的**连接字符串**。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-05-07T09:41:09.227

在[connectionstrings.com 上](http://www.connectionstrings.com)，您可以找到每个 DB 提供程序的连接字符串。连接字符串由某些属性/属性及其值构成。对于 SQL Server 2008，它看起来像这样（标准，这是您在此处需要的）：

```
Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

在 上`myServerAddress`，写下您已安装实例的名称（默认`.\SQLEXPRESS`为 SQL Server Express 版本）。初始目录 = 您的数据库名称，连接后您将在左侧的 SSMS 中看到它。其余的不言自明。

**编辑**

您需要省略 Windows 身份验证的用户名和密码，并添加`Integrated Security=SSPI`.

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2021-02-12T06:50:30.997

打开 SQL Server Management Studio 并运行以下查询。您将获得连接字符串：

```
select
    'data source=' + @@servername +
    ';initial catalog=' + db_name() +
    case type_desc
        when 'WINDOWS_LOGIN' 
            then ';trusted_connection=true'
        else
            ';user id=' + suser_name() + ';password=<<YourPassword>>'
    end
    as ConnectionString
from sys.server_principals
where name = suser_name() 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-10-12T18:37:33.767

我的解决方案是使用[excel](/questions/tagged/excel "显示标记为“excel”的问题") (2010)。

在新工作表中，选择一个单元格，然后：

```
Data -> From Other Sources -> From SQL Server 
```

输入**服务器名称**，**选择表**等，

> 当您进入“导入数据”对话框时，
> 单击`Properties`“连接属性”对话框中
> 的“定义”选项卡。

Excel 可以很好地显示用于复制的连接字符串
（甚至*导出连接文件...*）

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-05-13T17:03:59.827

如果使用 Linqpad 工具，在从连接中连接到目标数据库后，可以获取要使用的连接字符串。

1.  右键单击数据库连接。
2.  选择`Properties`
3.  选择`Advanced`
4.  选择`Copy Full Connection String to Clipboard`

结果：`Data Source=.\jabberwocky;Integrated Security=SSPI;Initial Catalog=Rasa;app=LINQPad`

[![在此处输入图像描述](../Images/a6ab5a523b24212555b167a13929bf20.png)](https://i.stack.imgur.com/eoJnI.png)

* * *

删除`app=LinqPad`依赖驱动程序和其他项目，例如`Server`代替源，您可能需要调整驱动程序以适应目标操作；但它给了一个发射台。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-07T12:11:21.890

在配置节点的 web.config 文件中放置以下标记

```
 <connectionStrings>
<add name="NameOFConnectionString" connectionString="Data Source=Server;Initial Catalog=DatabaseName;User ID=User;Password=Pwd"
  providerName="System.Data.SqlClient" /> 
```

那么你可以使用上面的连接字符串，例如

```
SqlConnection con = new SqlConnection();
            con.ConnectionString = ConfigurationManager.ConnectionStrings["NameOFConnectionString"].ToString(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-07T09:39:56.393

[sql server 数据库会](http://yousaiditnow.blogspot.in/2010/10/sql-server-2008-database-storage.html)默认存放在以下路径

```
<drive>:\Program Files\Microsoft SQL Server\MSSQL.X\MSSQL\Data\ 
```

，其中`<drive>`是安装驱动器，X 是实例编号（数据库引擎的第一个实例为 MSSQL.1）。为了提供连接字符串，您应该知道 sql server 数据库的服务器名称是什么，您存储的位置以及数据库服务器的实例。

服务器名称一般是数据库所在机器的IP地址，默认实例是**SqlExpress**

连接[字符串](http://www.connectionstrings.com/sql-server-2005)包含**数据源**名称即服务器名称、**初始目录**即数据库名称、**用户id**即数据库的登录用户id、**密码**即数据库的登录密码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-18T20:33:15.583

我的朋友们，最简单的方法是在 Visual Studio 2019 上打开服务器资源管理器选项卡（在我的情况下），然后尝试创建与数据库的连接。创建成功连接后，只需右键单击它并转到属性。在那里你会发现一个具有正确语法的字符串连接字段！...这对我有用，因为我事先知道我的服务器的名称....只是无法找出正确的语法来运行我的 ef 脚手架...

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-09-21T09:41:46.897

如果您在项目中创建了连接管理器，那么您可以简单地从那里拉出连接字符串。

```
String connection = this.dts.connections["<connection_manager_name>"]; 
```

并在以下情况下使用此连接：

```
using (var conn = new SqlConnection(connection)) 
```

如果我错了，请纠正我。

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2013-05-15T10:37:18.980

```
SqlConnection con = new SqlConnection();
con.ConnectionString="Data Source=DOTNET-PC\\SQLEXPRESS;Initial Catalog=apptivator;Integrated Security=True"; 
```

# android-layout - Removing a layout in android dynamically?

> ID：10479766
> 
> 赞同：1
> 
> 时间：2012-05-07T09:35:56.080
> 
> 标签：android-layout

I am working in android. i wanted to cleara layout each time i press a button and start everything again(as in doing "Reset") . Its not working with the following code.

```
 final TableLayout rel=(TableLayout)findViewById(R.id.tab1);
int k=rel.getChildCount();
                    System.out.print("k is"+k);
                                for(int x=0;x<k; x++)
                          {
                             View v1 = rel.getChildAt(x);
                            rel.removeView(v1);

                         } 
```

So i tried to print the value of k and i got it like 0101100 where i expected an integer. Any help is appreciated ..Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:16:39.873

rel.removeAllViews(); 帮助过我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:20:33.327

为什么不让它不可见

```
v1.setVisibility(int) 
```

# multithreading - Multiple threads modifying a collection

> ID：10479771
> 
> 赞同：1
> 
> 时间：2012-05-07T09:36:08.540
> 
> 标签：multithreading, c#-4.0

I'm trying to learn about threads for an assignment for school, and I'm trying to get two threads to empty a collection. The code I came up with so far throws an exception, saying that the collection got modified.

First I had a while loop in the locked code part, but then (of course ;-)) only one thread empties the collection.

My question is, how can I have a loop in which the threads both take turns in emptying the collection?

```
class Program
{
    private static List<int> containers = new List<int>();

    static void Main(string[] args)
    {
        for (int i = 0; i < 100; i++)
        {
            containers.Add(i);
        }

        Thread t1 = new Thread(() => { foreach (int container in containers) { GeefContainer(); } });
        t1.Name = "Kraan 1";
        t1.Start();

        Thread t2 = new Thread(() => { foreach (int container in containers) { GeefContainer(); } });
        t2.Name = "Kraan 2";
        t2.Start();

        Console.Write("Press any key to continue...");
        Console.Read();
    }

    static void GeefContainer()
    {
        lock (containers)
        {
            int containerNummer = containers.Count - 1;

            //Container container = containers[containerNummer];

            //Console.Write("Container {0} opgehaald... Overladen", containerNummer);
            Console.WriteLine("Schip: Container {0} gegeven aan {1}", containerNummer, Thread.CurrentThread.Name);

            //Gevaarlijk, want methode aanroepen kan klappen
            containers.RemoveAt(containerNummer);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:57:39.067

我假设您不允许使用 System.Collections.Concurrent 命名空间中的任何 ThreadSafe 集合。

在检查是否还有条目时，您需要获得对容器集合的独占访问权限。但是，您不希望 1 个线程在释放其锁定之前采取独占控制删除所有条目。Monitor.Pulse 可用于允许等待锁定容器的其他线程“先行”。尝试 GeefContainers 的以下实现：

```
static void GeefContainer()
{
    lock (containers)
    {
        while (containers.Any()) // using linq, similar to: while(container.Count > 0)
        {
            containers.RemoveAt(0); // remove the first element

            // allow other threads to take control
            Monitor.Pulse(containers); // http://msdn.microsoft.com/en-us/library/system.threading.monitor.pulse.aspx
                            // Wait for a pulse from the other thread
                            Monitor.Wait(container);
        }
    }
} 
```

哦，并从以下位置删除您的循环逻辑：

```
Thread t2 = new Thread(() => { foreach (int container in containers) { GeefContainer(); } }); 
```

只需调用 GeefContainer 就足够了。

这可以通过以下方式可视化：

*   线程 1 获得对“集合”的锁定
*   线程 2 被阻塞，因为它正在等待“集合”的独占锁
*   线程 1 从“集合”中删除一个条目
*   线程 1 释放它对“集合”的锁定并尝试获得新的独占锁定
*   线程 2 获得对“集合”的锁定
*   线程 2 从 'collections' 中删除一个条目
*   线程 2 释放它对“集合”的锁定并尝试获得新的排他锁
*   线程 1 获得对“集合”的锁定

ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:10:53.307

您看到的异常是由枚举器抛出的。标准集合上的枚举器进行检查以确保集合没有在枚举操作中间被修改（`foreach`在您的情况下是通过）。

由于您希望让线程交替从集合中删除，因此您将需要某种机制来允许线程相互发送信号。我们还必须注意不要同时从多个集合中访问该集合。如果没有同步，即使该`Count`属性也不能安全使用。[Barrier](http://msdn.microsoft.com/en-us/library/system.threading.barrier.aspx)类使信号发送变得非常容易。一个简单`lock`的同步就足够了。这是我将如何做到这一点。

```
public class Program
{
    public static void Main(string[] args)
    {
        var containers = new List<int>();

        for (int i = 0; i < 100; i++)
        {
            containers.Add(i);
        }

        var barrier = new Barrier(0);

        var t1 = new Thread(() => GeefContainers(containers, barrier));
        t1.Name = "Thread 1";
        t1.Start();

        var t2 = new Thread(() => GeefContainers(containers, barrier));
        t2.Name = "Thread 2";
        t2.Start();

        Console.Write("Press any key to continue...");
        Console.Read();
    }

    private static void GeefContainers(List<int> list, Barrier barrier)
    {
        barrier.AddParticipant();
        while (true)
        {
            lock (list)
            {
                if (list.Count > 0)
                {
                    list.RemoveAt(0);
                    Console.WriteLine(Thread.CurrentThread.Name + ": Count = " + list.Count.ToString());
                }
                else
                {
                    break;
                }
            }
            barrier.SignalAndWait();
        }
        barrier.RemoveParticipant();
    }

} 
```

该`Barrier`课程基本上导致这种情况一遍又一遍地发生。

```
|----|                 |----|                 |----|
| T1 |-->|         |-->| T1 |-->|         |-->| T1 |
|----|   |         |   |----|   |         |   |----|
         |-->(B)-->|            |-->(B)-->|         
|----|   |         |   |----|   |         |   |----|
| T2 |-->|         |-->| T2 |-->|         |-->| T2 |
|----|                 |----|                 |----| 
```

在上图中`T1`，`T2`分别表示线程 1 和 2 上的删除操作。`(B)`表示对 的调用`Barrier.SignalAndWait`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:47:49.643

首先，更改您的 thred 定义如下：

```
new Thread(() => { while(containers.Count>0) { GeefContainer(); } }); 
```

然后，重写 GeefContainer() 如下以避免异常：

```
static void GeefContainer()
{
    lock (containers)
    {
        int containerNummer = containers.Count - 1;

        if(containerNummer>=0) 
        {
            //Container container = containers[containerNummer];

            //Console.Write("Container {0} opgehaald... Overladen", containerNummer);
            Console.WriteLine("Schip: Container {0} gegeven aan {1}", containerNummer, Thread.CurrentThread.Name);

            //Gevaarlijk, want methode aanroepen kan klappen
            containers.RemoveAt(containerNummer);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T09:44:22.490

如果你修改你的线程如下？这样，两个线程都应该有一些时间来对集合执行操作。

```
Thread t1 = new Thread(() => { 
        while (containers.Count > 0)
        {
            GeefContainer(); 
            Thread.Sleep(150);
        }});
t1.Name = "Kraan 1";
t1.Start();

Thread t2 = new Thread(() => { 
        while (containers.Count > 0)
        {
            GeefContainer(); 
            Thread.Sleep(130);
        }});
t2.Name = "Kraan 2";
t2.Start(); 
```

# javascript - Trigger submit event created with codeigniter with backbone.js

> ID：10479772
> 
> 赞同：0
> 
> 时间：2012-05-07T09:36:12.310
> 
> 标签：javascript, codeigniter, backbone.js

Am learning my first steps on backbone.js..

Building an app in codeigniter, submit button triggers the function in application controller to send the data to the database..

```
<?php echo form_open('welcome/process_form','myform') . "\n"; ?>
<p><label for="value">Value: </label><?php echo form_input('value'); ?></p>
<p><label for="tags">Tags: </label><?php echo form_input('tags'); ?></p>
<?php echo form_submit('submit', 'Submit'); echo form_close();  ?> 
```

As simple as that.. a simple codeigniter form and submit button..

Now i want to include backbone.js in the scenario and want it to perform the action obviously reload..

What features of backbone do i look for and get started..??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:54:29.500

该文档可能是寻找的最佳功能......

[http://documentcloud.github.com/backbone/#Model](http://documentcloud.github.com/backbone/#Model)

试着掌握你需要做的事情。查看一些（许多）示例。试着做一些事情，然后回来问一个关于你遇到的特定问题的问题（如果有的话）。

您的问题听起来好像您在 CI 中创建了一个表单，现在想使用backbone.js 也许这里有人*会*为您编写应用程序，但通常当它是一个团队的努力时，这个过程效果最好。即自己尝试；如果您遇到问题，请回来寻求帮助。

# sql-server-2005 - SQL Server 2005 DbMail not sending

> ID：10479775
> 
> 赞同：2
> 
> 时间：2012-05-07T09:36:34.780
> 
> 标签：sql-server-2005, email, dbmail

I have a SQL Server 2005 DB Mail profile set up on my server that successfully sends a test email. However, when I queue an email in the `msdb.dbo.sysmail_mailitems` table, it does not ever try to send it. The status of the item stays at 0 (unsent).

In the Database Mail Log, the following entries are shown:

```
event_type  log_date                description                             process_id  mailitem_id  account_id  last_mod_date              last_mod_user
0           2012-05-07 10:07:00.887 Activation successful.                  NULL        NULL         NULL        2012-05-07 10:07:00.887    sa
1           2012-05-07 10:07:06.323 DatabaseMail process is started         6504        NULL         NULL        2012-05-07 10:07:06.323    NT AUTHORITY\SYSTEM
3           2012-05-07 10:07:07.213 Could not retrieve item from the queue. 6504        NULL         NULL        2012-05-07 10:07:07.213    NT AUTHORITY\SYSTEM
1           2012-05-07 10:12:07.453 DatabaseMail process is shutting down   6504        NULL         NULL        2012-05-07 10:12:07.453    NT AUTHORITY\SYSTEM 
```

There are no exceptions in the windows event viewer. Can someone direct me to where I can find more info regarding the error? "Could not retrieve item from the queue." doesn't help me much.

Thanks

# java - java socket disconnected from server side

> ID：10479779
> 
> 赞同：2
> 
> 时间：2012-05-07T09:36:52.390
> 
> 标签：java, sockets

I am facing a problem regarding sockets on the server side. My code is client side. Whenever I am sending a second message (whether it's a heartbeat or any other message) it will fail on the server, and the server side logs an 'error in message format' but the same message will succeed the first time. Please help me out with this. my client code :

```
 public class Main {

        String Host = "";
        int port = 1111;
        Socket ss;
        BufferedReader in;
        BufferedWriter out;
        String recv;

        public void connection() {
            try {

                ss = new Socket(Host, port);
                ss.setSoTimeout(30000);

                in = new BufferedReader(new InputStreamReader(ss.getInputStream()));
                out = new BufferedWriter(new OutputStreamWriter(ss.getOutputStream()));

            } catch (UnknownHostException ex) {
                Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

        public void sender(String regTag) {

            if (ss == null || !ss.isConnected()) {
                connection();
            }
            try {

                if (out != null && regTag != null) {
                    out.write(regTag + "\n");
                    System.out.println("message::" + regTag);
                    out.flush();
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        public String Reciver() {

            try {

                recv = in.readLine();
                if (ss != null && recv != null) {
                    return recv;
                } else {
                    disconnect();
                    String Str = "nothing...Sorry";
                    return Str;
                }
            } catch (Exception e) {
                e.printStackTrace();
                return "Exception";
            }
        }

        public void disconnect() {
            try {
                System.out.println("socket discoonected.");
                ss.close();
                in.close();
                out.close();
                connection();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        public static void main(String[] args) {

            Main me = new Main();
            me.connection();
            String hbhb = "`SC`0004HBHBB7BDB7BD";
            String login = "`SC`00581.000000CRBTSRVM    00000001DLGLGN    00000002 TXBEG    LOGIN:USER=cvbs,PSWD=password   DEB2CCA8";
            String cut = "`SC`00631.000000CRBT00PPSPHS00000002DLGCON    00000003 TXBEG    CUT PPS FEE:MDN=9610023,CUTFEE=1000,REASON=1   BDB7DA88";
            me.sender(hbhb.trim());
            String str = me.Reciver();
            System.out.println("Response :::" + str);
            me.sender(login.trim());
            String str1 = me.Reciver();
            System.out.println("Response hb:::" + str1);
} 
```

It receives null ... all the time on every second message

logs from serverside

```
[121_SERVER] 2012-05-03 14:26:37:213 [ERROR] [ServerAccptor.java:254] ->
errorCode = [UIP-80015] errorDesc = [Uip server has a exception when receiving data from the client,will remove the client,Server [adapter id=121],.]
        at com.ztesoft.zsmart.bss.uip.adapter.socket.server.ServerAccptor.listenMsg(ServerAccptor.java:252)
        at com.ztesoft.zsmart.bss.uip.adapter.socket.server.ServerAccptor.run(ServerAccptor.java:117)
Caused by: errorCode = [UIP-9102] errorDesc = []  Describing= [read client message error,will remove client.]
        at com.ztesoft.zsmart.bss.uip.adapters.socket.server.mml.MMLServerAdapter.readByteField(MMLServerAdapter.java:784)
        at com.ztesoft.zsmart.bss.uip.adapters.socket.server.mml.MMLServerAdapter.reciveWholeMsg(MMLServerAdapter.java:671) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:08:48.400

您的代码体现了许多不良做法和谬误。

1.  您正在记录异常并以其他方式忽略它们，并做一些奇怪的事情，例如让程序继续，返回“异常”等。这是糟糕的编程。有例外可以帮助您，而不是用创可贴来隐藏血液。代码在创可贴下不会自我修复。例如，您应该只声​​明`connection()`throw`IOException`并让调用者处理它。

2.  作为（1）的结果，你有很多`ss != null`测试。您甚至不应该处于需要进行 I/O 的状态并且`ss`可能是`null`. 再次正确的异常处理和传播将避免这种情况。

3.  作为 (1) 的进一步结果，您进行了大量`!ss.isConnected()`测试，显然错误地认为该 API 会告诉您连接是否已断开。它不会。它只会告诉您是否已连接`Socket`。在您的代码中，当您调用`ss = new Socket(...)`时，您已经连接了它，否则您还没有执行该代码。调用`isConnected()`不会增加任何价值。

4.  您在输出流之前关闭套接字输入流。这是不正确的。您应该*只*在 finally 块中关闭输出流和套接字本身。这样输出流就会被刷新。关闭输入流会关闭套接字和输出流而不刷新它。不要那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T07:50:46.067

实际上正确的答案是响应中`\n`没有`MML`。所以这永远不会奏效：

```
recv = in.readLine(); 
```

您必须阅读响应的消息头部分中给出的消息长度并读取到该长度。

**更新：**

1.  `MML`您的命令中有语法错误。您似乎使用的是协议的 1.00 版本，因此这是一个有效的示例（查找差异）：

    ```
    `SC`00741.00CRBT    PPS     00000001DLGCON    00000004TXBEG     PPS CUT FEE:mdn=93784050910,fee=300,id=20140812165011003    F3E0ADDF 
    ```

您必须用数字填充多余的空格，`0`在其他地方您必须用空格填充它们。

# android - Android如何测试Webservices（异步）

> ID：10479781
> 
> 赞同：0
> 
> 时间：2012-05-07T09:36:59.223
> 
> 标签：android, web-services, testing, asynchronous

我想制作一个套件来测试我在 Android 应用程序中的 web 服务调用。它们扩展了 AsynchTask。

我不想更改我的 api 以提供同步调用。

我已经尝试过 JUnit / Android 测试项目。方法已运行，但回调从未执行。

为了使用测试项目设置，至少可以很好地添加原始项目的依赖项，我做了一些修改。继续使用 TestCase 子类，但不使用测试方法，而是从 setUp() 方法中手动调用自定义测试方法，而不是使用 JUnit 的断言，我将调试消息输出到日志。我什至添加了一个调用 Thread.sleep(10000) 的测试方法，以防回调没有执行，因为类完成速度很快。你猜怎么着，也没用。回调仍然从未执行。我以前收到日志消息，但回调中的日志消息从未出现。

我还尝试了一个普通的 Java 项目。但这也不起作用，因为 AsynchTask 和其他一些 Android 类。将 Android 作为库添加到 Java 项目中不起作用，因为 Android 库是“存根的”并且只应该在 Android 项目中使用，据我阅读研究。

那么我该怎么做才能测试这些网络服务呢？我可以使用纯 Java 项目单独测试 Web 服务。但我想测试我的包装类，它构建参数等等。但是这些包装类与 android 库和 AsynchTask 相结合，没有办法改变它。

# ruby-on-rails - Warble 自定义战争文件名

> ID：10479783
> 
> 赞同：1
> 
> 时间：2012-05-07T09:37:09.097
> 
> 标签：ruby-on-rails, rake, war, warbler

我正在使用 Wabler gem 为我们的 Ruby on Rails 应用程序生成 war 文件。默认情况下，它会生成一个名为 Rails 项目主目录名称的 WAR 文件。

我想知道是否可以指定自定义战争文件名而不是默认项目主目录名称。

谢谢诺曼 A。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:30:24.220

找到了我的问题的答案，因此与所有可能需要它的人分享。

要修改的文件：

啁啾.rb

对于我们的应用程序，它位于 [project_dir]/config/ 中

该文件将具有如下部分：

```
 Warbler::Config.new do |config|
   .....
   .....
 end 
```

添加以下行以指定自定义 war/jar 文件名（不带扩展名）：

```
 config.jar_name = "testname" 
```

因此，该段将如下所示：

```
 Warbler::Config.new do |config|
   .....
   .....
   config.jar_name = "testname" 
 end 
```

**注意**：上面显示的“ **....** ”不是实际配置的一部分，出于示例目的，我已经替换了原始值。

现在，当我运行 warble war/rake war 时，它会生成 war 文件为“testname.war”

希望这可以帮助像我这样的新手！

谢谢

诺曼 A.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T05:37:34.300

添加 config/warble.rb 文件。

```
Warbler::Config.new do |config|
  config.war_name = "test_war_name"
end 
```

编辑：`config.war_name`已弃用，请参阅[此处记录](https://github.com/jruby/warbler/blob/master/lib/warbler/config.rb?246)

```
# Deprecated
def war_name
  $stderr.puts "config.war_name deprecated; replace with config.jar_name" #:nocov:
  jar_name                  #:nocov:
end 
```

使用以下内容：

```
 Warbler::Config.new do |config|
  config.jar_name = "test_war_name"
 end 
```

# objective-c - iPad应用程序中的垂直UINavigationBar

> ID：10479786
> 
> 赞同：0
> 
> 时间：2012-05-07T09:37:20.317
> 
> 标签：objective-c, ios, uinavigationbar

我正在开发一个 iPad 应用程序，我想有一个垂直`UINavigationBar`（在我的视图左侧），这可能吗？我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:22:06.407

您不能这样做，而是可以使用`UIImage`相同的外观`UINavigationBar`和 Button 并将它们垂直放置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:35:08.087

我认为您正在谈论一个类似于一个 tweetbot 实现的工具。如果是这样，您将不得不使用图像和视图创建自己的，或者旋转导航栏。或者您可以检查[FSVerticalTabBarController](https://github.com/futuresimple/FSVerticalTabBarController)并根据需要对其进行编辑。

![在此处输入图像描述](../Images/ba324996d8b34a38ea6aeaef82d376d0.png)

# datetime - 这是什么类型的日期时间？

> ID：10479790
> 
> 赞同：1
> 
> 时间：2012-05-07T09:37:39.533
> 
> 标签：datetime, date

我从 Paypal 的一个函数中收到了这些详细信息。它显示`2012-05-07T07:00:00Z`. 但是我不知道这是什么类型的日期时间。我需要知道，因为我会将其转换为 UNIX 时间戳。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:38:16.350

该时间戳采用[ISO 8601 格式](https://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations)。中间`T`的分隔日期部分（左侧，格式为 yyyy-mm-dd）和时间（右侧，格式为 hh:mm:ss）。`Z`表示时间戳采用 UTC 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:44:48.547

这是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式。

示例：1336346440 (2012-05-06 23:20:40Z)

# c# - C# 像 python 中的扩展函数？

> ID：10479795
> 
> 赞同：0
> 
> 时间：2012-05-07T09:37:48.737
> 
> 标签：c#, python

最后写了很多：

```
lines = [l.strip() for l in lines] 
```

是否有一种可读的 Pythonista 方式来做到这一点：`lines.stripped()`返回剥离的行？（在 C# 中，您可以将“扩展方法”添加到字符串列表中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:41:28.377

不，你不能猴子补丁`list`类型。您可以使用这样的方法创建一个子类`list`，但这可能是一个糟糕的主意。

捕获经常重复的代码位的 Pythonic 方法是编写一个函数：

```
def stripped(strings):
    return [s.strip() for s in strings] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-12T17:15:39.087

有[https://github.com/clarete/forbiddenfruit](https://github.com/clarete/forbiddenfruit)

你是否认为它可读 Pythonista 是个人选择。但它确实有效。

我真希望 Python 有像 CSharp、Kotlin、Scala、Ruby “扩展方法”这样的东西。在那之前，禁止水果或它使用的技术（可以大大简化）是我知道的唯一方法。

# asp.net - 发布编译时忽略 WCF .SVC Debug="true"？

> ID：10479798
> 
> 赞同：2
> 
> 时间：2012-05-07T09:37:55.100
> 
> 标签：asp.net, wcf

默认情况下，.SVC 文件包含 Debug="true"，我想知道如果您编译发布时是否会忽略它，或者它是否仍使用调试符号编译？

前任。

```
<%@ ServiceHost Language="C#" Debug="true" Service="WebPages.Interfaces.example" CodeBehind="example.svc.cs" Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:39:35.050

`Debug=true``@ServiceHost`仅当您将服务编写为.svc 文件中的**内联**代码或在“ **App_Code** ”文件夹中实施服务时，指令中的属性才适用。*（如果已经编译成程序集并将其放入 \bin 目录，则不适用。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T10:46:32.753

## 在 IIS 8 上发布 WCF 服务

我遇到了这个问题，我发现这是解决方案。这对我来说非常有用（IIS 8）

所有的功劳都**归于 György Balássy**

WCF 服务不会在默认配置的 IIS 8 上运行，因为 Web 服务器不知道如何处理以 .svc 文件为目标的传入请求。你可以分两步教它：

1.  添加新的 MIME 类型：扩展名：.svc MIME 类型：application/octet-stream [添加新的 MIME 类型](https://i.stack.imgur.com/UiYki.png)

2.  添加新的托管 HTTP 处理程序：请求路径：*.svc 类型：System.ServiceModel.Activation.HttpHandler 名称：svc-Integrated [添加新的托管 HTTP 处理程序](https://i.stack.imgur.com/7LrkV.png)

就是这样！

# jsf - 在 View JSF 中找不到带有标识符的组件

> ID：10479799
> 
> 赞同：0
> 
> 时间：2012-05-07T09:37:56.697
> 
> 标签：jsf, primefaces

我试图使用像这样的 ap:growl 来显示消息。要像这样在数据表延迟加载的 OnRowSelect 方法上进行更新

```
<p:growl id="applyMessages" showDetail="false" global="true" /> and     <p:ajax event="rowSelect" listener="#{editBean.onRowSelect}" update=":studyPlanEditForm:display applyMessages"/> 
```

但得到这样的错误找不到标识符为“applyMessages”的组件。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:50:12.813

在浏览器中检查页面的源代码。然后识别`p:growl`标记及其生成的客户端 ID。它肯定比 长`applyMessages`并且具有类似于 的前缀`containerID:applyMessages`。`update`在 ajax 调用的属性中使用此 id 。

# mysql - 如何在rails 3中的两个不同模型上应用分页

> ID：10479805
> 
> 赞同：-1
> 
> 时间：2012-05-07T09:38:28.473
> 
> 标签：mysql, ruby, ruby-on-rails-3, pagination

我想在两张桌子上应用分页。

消息

```
Id    Message         Created at
1     Message One     2012-04-23 13:11:23
2     Message Two     2012-04-23 13:11:26
3     Message Three   2012-04-23 13:11:27 
```

出价

```
Id    Comment         Created at
1     Comment One     2012-04-23 13:11:24
2     Comment Two     2012-04-23 13:11:25
3     Comment Three   2012-04-23 13:11:28 
```

我想使用一个查询获得以下结果（两个最新的出价或消息）

```
 Id    Content         Created at
    3     Comment Three   2012-04-23 13:11:28
    3     Message Three   2012-04-23 13:11:27 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:17:15.657

退后一步，我可以问一下为什么您需要两个单独的表格用于消息和投标。对我来说，两者看起来都存储某种形式的文本通知。我猜你应该使用单表继承或多态关联（以防将来会有其他业务逻辑出现）。

请查看[此博客](http://code.alexreisner.com/articles/single-table-inheritance-in-rails.html)以了解更多信息。

我认为您的分页跨越两个表格的这种要求是一种设计气味。我没有完整的上下文，我不确定您现在是否有更改设计的自由。但是，只是一个想法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:41:57.173

有一个名为**will_paginate**的奇妙宝石。我在我的应用程序中使用它。

观看[此](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)railscast 以了解如何安装它们。它非常简单而且很棒。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T07:06:41.887

首先，从**多个表**中分页记录是一种代码味道。

不过，如果您想采用这种 BAD 方法，以下代码可能对您有所帮助：

```
records = [Message, Comment, Post].inject([]) do |record, with_class|
  record+with_class.order('created_at DESC')#you can add limit, offset here
end

#Now paginate those records

@records = WillPaginate::Collection.create(current_page, per_page, records.size) do         |pager|
            pager.replace(@records)
           end 
```

# java - 无法使用 Java 打印服务打印 PNG 文件（其他一切正常）

> ID：10479807
> 
> 赞同：0
> 
> 时间：2012-05-07T09:38:30.973
> 
> 标签：java, printing

我正在使用 Java 打印服务打印 PNG 文件，但是它正在向打印机发送错误的输出。实际打印的内容（当我使用 PNG 时）是一些文字：

```
ERROR: /syntaxerror in --%ztokenexec_continue--
                Operand stack:
                              --nostringval- 
```

似乎还有一些文本，但这有点丢失了页边距。我将 DocFlavor 设置为`DocFlavor.INPUT_STREAM.PNG`，指定的文件实际上是一个`InputStream`（只需将 DoccFlavor 更改为`DocFlavor.INPUT_STREAM.PDF`并使用 pdf 文件即可）。

我也尝试过使用不同的 PNG 文件，但问题仍然存在。就其价值而言，即使是 PostScript 似乎也能正常工作。

正在打印的错误看起来与`gd`（或 ImageMagick？）错误非常相似。所以，我现在最好的假设是从 PNG -> PS 的转换失败。

代码如下：

```
PrintService printService = this.getPrintService("My printer name");

final Doc doc = new SimpleDoc(document, DocFlavor.INPUT_STREAM.PNG, null);
final DocPrintJob printJob = printService.createPrintJob(); 
```

在这里，`getPrintService`获取打印服务并获取有效服务。至于`document`，这是我得到它的方式：

```
File pngFile = new File("/home/rprabhu/temp/myprintfile.png");
FileInputStream document = new FileInputStream(pngFile); 
```

我不知道为什么会出错，而且我也没有看到任何错误输出到控制台。

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:48:10.707

打印总是一件麻烦事——这是不可避免的，因为您必须担心繁琐的细节，例如页面大小、边距大小以及输出需要多少页。正如您所料，打印图像的过程与打印文本的过程不同，并且您可能还会遇到具有不同功能的多台打印机的额外复杂性，因此对于某些类型的文档，您需要选择合适的打印机。

请参阅以下链接：

[http://vineetreynolds.wordpress.com/2005/12/12/silent-print-a-pdf-print-pdf-programmatically/](http://vineetreynolds.wordpress.com/2005/12/12/silent-print-a-pdf-print-pdf-programmatically/) [http://hillert.blogspot.com/2011/12/java-print-service-挫折感.html](http://hillert.blogspot.com/2011/12/java-print-service-frustrations.html)

# sql - ORA-01843 不是 Oracle SQL 的有效月份

> ID：10479809
> 
> 赞同：0
> 
> 时间：2012-05-07T09:38:33.743
> 
> 标签：sql, oracle, date

我在我的程序中使用 sql 语句。

```
stringBuffer sql=new StringBuffer();
sql.append("insert into customer (id,createddate) ");
sql.append("values (1,");
sql.append("'"+new Timestamp(System.currentTimeMillis())+"'");

String results=jdbcTemplate.update(sql.toString(); 
```

当我执行上面的命令时，我得到了这个异常嵌套异常是 java.sql.SQLException: ORA-01843: not a valid month

我应该绑定当前日期，我该如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T09:53:11.860

如果您可以使用数据库的日期，请使用`sysdate`ie：

```
stringBuffer sql=new StringBuffer();
sql.append("insert into customer (id,createddate) ");
sql.append("values (1,sysdate)"); 
```

或者您可以`to_date`在查询中添加一个：

```
stringBuffer sql=new StringBuffer();
sql.append("insert into customer (id,createddate) ");
sql.append("values (1,to_date(");
sql.append("'"+<your TimeStamp converted to a String like yyyyMMddHHmmss>+"', 'yyyymmddhh24miss'"); 
```

或者在[这里](https://stackoverflow.com/questions/2858182/preparedstatement-and-settimestamp-in-oracle-jdbc)使用**PreparedStatement**

# android - 在特定的 x\y 坐标上绘制自定义视图

> ID：10479820
> 
> 赞同：1
> 
> 时间：2012-05-07T09:39:10.687
> 
> 标签：android, user-interface

我想创建一个自定义视图（将从 XML 膨胀），它将在给定的 x\y 坐标处绘制。我知道我可以创建一个将实现的自定义视图`onDraw(Canvas canvas)`，但我希望这个视图从 XML 膨胀。

在`Canvas`我只能画线、矩形等..但我想膨胀整个 XML 布局..

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:01:16.827

您可以使用 FrameLayout 作为主要布局。

膨胀你想要的布局。

将其添加到 FrameLayout。

然后使用 LayoutParams 添加填充/边距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:26:49.743

我最终使用`RelativeLayout`了这里提到的：

[设置视图的绝对位置](https://stackoverflow.com/questions/3294590/set-the-absolute-position-of-a-view-in-android)

感谢您的回答！

# iphone - 按下表格视图时单击按钮以记住值

> ID：10479822
> 
> 赞同：0
> 
> 时间：2012-05-07T09:39:20.357
> 
> 标签：iphone, ios, twitter, tableview

我有一个视图控制器，上面有 6 个按钮。这些按钮中的每一个都推动一个表格视图控制器，该控制器将根据按钮的值与项目一起传播。假设按钮是“汽车”、“货车”等。当按下表格视图时是否可以记住按钮的值，以便推特搜索可以基于按钮传递的值，即#car？我可以使用 6 个不同的表视图来执行此操作，因为我可以`viewDidLoad`根据搜索为每个视图分配一个方法，但我宁愿只执行一次并允许表视图自动“填充”按钮上的值。这是我的代码：

```
- (void)fetchTweets
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"https://api.twitter.com/1/statuses/public_timeline.json"]];

        NSError* error;

        tweets = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *tweet = [tweets objectAtIndex:indexPath.row];
    NSString *text = [tweet objectForKey:@"text"];
    NSString *name = [[tweet objectForKey:@"user"] objectForKey:@"name"];

    cell.textLabel.text = text;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:50:25.803

容易相处的人。在该 TableViewController 上设置一个公共属性以保存该值：

在 TVC .h 文件中：

```
@property(nonatomic,strong) NSString *selectedButtonText; 
```

并在 TVC .m 文件中合成

```
@synthesize selectedButtonText; 
```

如果您使用 Storyboard，只需确保将 segue 连接到 ViewController 本身而不是按钮，然后在每个按钮中 IBActions 执行以下操作：

```
[self performSegueWithIdentifier@"mySegueID" sender:sender]; 
```

在`prepareForSegueMethod`（如果您还没有实现，请执行：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"mySegueID"]) {
        // Cast the sender as a UIButton to get the text
        UIButton *tappedButton = (UIButton *)sender

        MyTableViewController *mtvc = segue.destinationViewController;
        mtvc.selectedButtonText = tappedButton.titleLabel.text;
    }
} 
```

然后在 TableViewController 中使用该值做任何你想做的事情

*** 编辑 ***

对于对象（如 UIButton）的自定义属性。将一个新文件添加到您的项目中（我将它们放在一个名为 Custom Subclasses 的组中）。该文件应属于 UIButton 类。将其命名为 TweetButton。

然后用这个替换你在 TweetButton.h 中的内容：

# 进口

@interface TweetButton : UIButton @property(nonatomic, strong) NSString *buttonName; @结尾

TweetButton.m 应如下所示：

# 导入“TweetButton.h”

@implementation TweetButton @synthesize buttonName; @结尾

然后只需将每个按钮的父类更改为 TweetButton 而不是 UIButton（这将在 Interface Builder 中完成）。

然后在每个 IBActions 中，将该按钮转换为 TweetButton 类型并访问/设置 name 属性。

在经历了这一切之后，另一个想法是在 ViewController 中添加一个属性（NSString）来调用 segue（带有按钮的那个）并将其设置为您想要的任何内容，然后使用它发送到目的地风险投资。

# python - Python：subprocess.call 损坏的管道

> ID：10479825
> 
> 赞同：8
> 
> 时间：2012-05-07T09:40:01.560
> 
> 标签：python, bash, subprocess

我试图在 python 中调用一个 shell 脚本，但它一直在报告损坏的管道错误（结果是好的，但我不想在 STDERR 中看到错误消息）。我已经查明了原因，并且可以将其复制为以下代码段：

`subprocess.call('cat /dev/zero | head -c 10 | base64', shell=True)`

啊啊啊啊啊啊==

猫：写错误：断管

`/dev/zero`是一个无限流，但`head -c 10`只有从它读取 10 个字节并退出，然后 cat 将获得 SIGPIPE 因为对等方已关闭管道。当我在 shell 中运行命令时没有损坏管道错误消息，但为什么 python 显示它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T21:58:33.810

SIGPIPE 信号的默认操作是终止程序。Python 解释器将其更改为 SIG_IGN 以便能够以异常的形式向程序报告损坏的管道错误。

当您`cat ... |head ...`在 shell 中执行时，`cat`具有默认的 SIGPIPE 处理程序，并且操作系统内核只是在 SIGPIPE 上终止它。

当您`cat`使用`subprocess`它从其父级（python 解释器）派生 SIGPIPE 处理程序执行时，SIGPIPE 只是被忽略并通过检查变量和打印错误消息`cat`来处理错误本身。`errno`

为避免来自您的错误消息，`cat`您可以使用`preexec_fn`subprocess.call 的参数：

```
from signal import signal, SIGPIPE, SIG_DFL
subprocess.call(
    'cat /dev/zero | head -c 10 | base64',
    shell = True,
    preexec_fn = lambda: signal(SIGPIPE, SIG_DFL)
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T10:30:02.650

在这种微不足道的情况下，至少您没有通过使用 shell 命令获得任何好处——而且您正在失去可移植性和速度。

Python 2 代码：

```
>>> import base64
>>> base64.b64encode(open('/dev/zero', 'rb').read(10))
'AAAAAAAAAAAAAA=='
>>> base64.b64encode('\0' * 10)
'AAAAAAAAAAAAAA==' 
```

在 Python 3 中（代码也将在 2.6+ 中运行，尽管它会返回`str`而不是`bytes`实例）：

```
>>> import base64
>>> base64.b64encode(open('/dev/zero', 'rb').read(10))
b'AAAAAAAAAAAAAA=='
>>> base64.b64encode(b'\0' * 10)
b'AAAAAAAAAAAAAA==' 
```

在每种情况下，第一个示例都保留了`/dev/zero`（本身不可移植，但没关系）的用法，第二个产生了效果，尽管我想这不是您想要的？

# iphone - 获取 iPhone 唯一 id 作为 long long 值

> ID：10479831
> 
> 赞同：0
> 
> 时间：2012-05-07T09:40:29.940
> 
> 标签：iphone, objective-c, string, hex, long-long

我是 Iphone 开发的新手。我有下一个问题：

我需要为每个运行我的应用程序的 iPhone 获取唯一的 ID。

我在 github 上找到了这个很棒的项目： [https](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5) ://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5 这些函数返回代表一些十六进制值的 32 个字符的字符串。

有人知道我怎么能从这个字符串中得到 unsigned long long 值（64 位整数值）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:32:10.993

请注意，对于 iOS 5，获取设备的 UUID 已被 Apple 弃用，除非您正在处理内部项目，否则您不应该这样做。苹果显然开始无缘无故地拒绝这样做的应用程序。

唯一标识用户的最佳方法是在启动时生成 GUID。请参阅此 SO 线程：[UIDevice uniqueIdentifier 已弃用 - 现在该怎么办？](https://stackoverflow.com/questions/6993325/uidevice-uniqueidentifier-deprecated-what-to-do-now)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:40:48.300

您不能将 32 个 unicode 字符（每个字符有 2 个字节，总共 64 个字节）放入只有 8 个字节的 long long 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:51:44.647

Luzal 是对的……获取设备的 UDID 已被 Apple 弃用。

您还可以使用**OPEN UDID**来唯一标识您的用户。

从这里下载课程 - [https://github.com/ylechelle/OpenUDID](https://github.com/ylechelle/OpenUDID)

导入类 -

```
#import "OpenUDID.h" 
```

并使用以下代码获取 OPEN UDID

```
NSString * uniqueStr = [OpenUDID value];
NSLog(@"%@",uniqueStr); 
```

# c# - 初学者测试一个方法的返回

> ID：10479832
> 
> 赞同：0
> 
> 时间：2012-05-07T09:40:40.687
> 
> 标签：c#, rhino-mocks

我刚刚开始使用 Rhino-Mock，我想测试一个检查伪和密码是否不为空的基本方法......

这是我的测试方法：

```
 public void ValidateLoginTest()
    {
        // Arrange
        var stubConnectionToTfs = MockRepository.GenerateStub<IConnectionToTfs>();
        stubConnectionToTfs.Expect(x => x.ValidateLogin()).Return(false);

        stubConnectionToTfs.Pseudo = "testPseudo";
        stubConnectionToTfs.Password = "testPasswordl";
        stubConnectionToTfs.Expect(x => x.ValidateLogin()).Return(true);

        // Act

        // Assert
        stubConnectionToTfs.VerifyAllExpectations();

} 
```

也许我不明白 rhino-mock 是如何工作的，但我坚信如果我在没有设置 Pseudo 和 Password 属性的情况下调用我的 ValidateLogin 方法，然后调用 VerifyAllExpectations() 就足以测试我的方法......

问题是，如果我评论我的 Setters，无论如何测试都会通过......

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:50:09.163

如果你想设置期望值，你必须使用 Mock，而不是 stub。

# javascript - 表格不同单元格的工具提示

> ID：10479834
> 
> 赞同：0
> 
> 时间：2012-05-07T09:40:47.837
> 
> 标签：javascript, jquery

我需要在表格的不同单元格上显示工具提示。

基本上我想要的是在那个单元格上增加一层新的工具提示。细胞必须可以在任何地方。

我已经看到一些 jQuery 库将工具提示应用于表格的最后一列，这对我不起作用，因此工具提示应该出现在表格中间或末尾的任何位置。

任何人都可以向我推荐我可以使用的任何 jQuery 库吗？或者任何JavaScript方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:44:23.903

嗨，这就是你要找的**演示** [http://jsfiddle.net/UXR8u/](http://jsfiddle.net/UXR8u/)

虽然有一个工具提示插件你也可以看看。[http://docs.jquery.com/Plugins/Tooltip](http://docs.jquery.com/Plugins/Tooltip) **链接**可能会有所帮助：（包含工具提示和 qtip 的演示）[jquery 工具提示/随鼠标移动/随鼠标位置移动的工具提示](https://stackoverflow.com/questions/5795078/jquery-tooltip-moves-with-mouse-move-tooltip-with-mouse-position)

**jQuery代码**

```
$(function () {
    $(".test").hover(
        function () {
            var toolTipHtml = $("#ToolTipDIv").clone();
            $(this).append(toolTipHtml);
            toolTipHtml.show("slow");
        },
        function () {
            var toolTipHtml = $(this).find(".tooltip");
            toolTipHtml.hide();
            toolTipHtml.remove();
        }
    );
});

​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:44:49.233

您可以使用 qTip2 插件：

[http://craigsworks.com/projects/qtip2/](http://craigsworks.com/projects/qtip2/)

# android - Android：来自静态类的活动生命周期侦听器

> ID：10479843
> 
> 赞同：1
> 
> 时间：2012-05-07T09:41:17.017
> 
> 标签：android, android-activity, addeventlistener

我有一个活动应用程序和一个静态类。

我希望班级知道活动状态何时更改，如 onPause onResume 事件。

我正在将活动上下文传递给类，但我找不到在状态更改时让它调用函数的方法。

活动代码：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    ...
    MyStaticClass.setup(this, ...);
} 
```

类代码：

```
public class MyStaticClass
{
    public static void setup(Context context, ...)
    ...
    // Code for status events

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:45:46.337

你检查[OnPause](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)，[OnResume](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)功能了吗？

# c# - 在哪里可以找到模仿 iTunes 堆栈/填充/进度条的 WinForms 控件？

> ID：10479846
> 
> 赞同：2
> 
> 时间：2012-05-07T09:41:38.273
> 
> 标签：c#, .net, winforms, custom-controls, controls

我只想要一个 100% 的堆栈栏控件，而不是大多数提供的 CHARTS。类似于表示 iTunes 的硬盘空间使用情况...

![](../Images/27691679a6513bdc7feefc6b88849ed8.png)

基本上，我必须能够定义有多少项目，每个项目的百分比值。指定颜色只是一种奢侈功能，默认情况下它应该为每个项目自动定义不同的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:12:08.683

你原来的标题有点让我失望。我不认为我会称之为“堆栈栏”控件。但是看了截图之后，我想我明白你的意思了……

有人已经准确地编写了您为 WinForms 寻找的控件，它可以[在 CodeProject](http://www.codeproject.com/Articles/17763/iTunes-Bar-Look-a-Like)上找到。

它看起来很像 iTunes 控件，但渐变效果可能稍微不那么夸张：

![](../Images/1d49052627032645c57bb5bbd3a4ef9e.png)

它以 DLL 的形式提供，因此开始使用它所需要做的就是将对该 DLL 的引用添加到您的项目中。[该许可证非常宽松](http://www.codeproject.com/Articles/17763/iTunes-Bar-Look-a-Like?msg=2272344#xx2272344xx)，因此您还可以对控件进行任何您想要的自定义（例如，添加圆角或更多阴影），并重新编译 DLL，甚至将代码直接包含到您的项目中。

# c++ - QT 小部件与 QT GUI

> ID：10479848
> 
> 赞同：3
> 
> 时间：2012-05-07T09:41:41.090
> 
> 标签：c++, xml, qt, user-interface, widget

我是 QT 的新手，实际上我还没有开始，但我打算从 QT 用户界面创建一个 xml 文件（标记和节点以及所有内容......）。

例如，用户可以在我的界面文本字段中找到他可以插入员工姓名、id 和年龄的位置，我的程序会将其转换为我的输出 xml 文件中的员工节点，其属性为 name、id、age。因此，由于我使用 c++ 进行编码，因此我想将此界面创建为 QT GUI，但我发现 QT 创建者提供了一个名为 QT Widget 的项目，该项目具有相同的选项。

所以我现在有点困惑，我不知道它们之间有什么区别，所以我可以选择。我会感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:58:08.090

你的意思是 Qt Quick 与 Qt 小部件？

Qt Quick 是一种较新的 Qt GUI 类型，它是由称为 QML 的声明性标记语言创建的。QML 源代码在运行时被解释，而 Qt Widgets 则从 C++ 源代码编译为本机可执行代码。除了 QML，Qt Quick 还使用内联 Javascript 编写 UI 脚本，但它可以（并且通常是）与 C++ 接口以进行更复杂的处理。

编辑：Qt Quick 也非常面向触摸（至少在当前状态下），而 Qt Widget GUI 提供了更丰富的 UI 元素集。因此，如果您正在制作桌面应用程序，您可能希望不考虑 Qt Quick。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T10:10:38.910

如果我正确理解了您的问题：Qt Widget 是一个很小的元素，是 gui 中的众多项目之一（按钮、组合框都是小部件）。Qt Widget，项目类型用于创建一个，您可以在单独的项目界面中使用它。

Qt Gui 更可能是您想要的项目类型，它允许您拖入许多小部件以创建您的“界面文本字段”。

如果您需要进行更高级的自定义或创建自己的文本字段控件，您将使用 Qt Widget 项目类型。

# java - 使用 jpa ， jboss7.1 插入数据库。@OneToMany 注释

> ID：10479853
> 
> 赞同：0
> 
> 时间：2012-05-07T09:41:55.523
> 
> 标签：java, hibernate, jpa, jpa-2.0

我正在使用 Jboss7.1 和 jpa ，ejb 我想将具有 OneToMany 关系的数据插入到我的 mysql 数据库中。

我有两个实体 personne 和 voiture。我想在我的数据库中保存一个人并为他关联 voiture。问题是当我测试我的代码（测试）时，我发现`personne`我的数据库中添加了一个新的并且表中没有`voiture`添加`voiture`

请你帮帮我。

代码 ：

实体人

```
package com.domain;

import java.io.Serializable;
import javax.persistence.*;
import java.util.Set;

/**
 * The persistent class for the personne database table.
 * 
 */
@Entity
public class Personne implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int idpersonne;

private String nom;

//bi-directional many-to-one association to Voiture
@OneToMany(mappedBy="personne")
private Set<Voiture> voitures;

public Personne() {
}

public Personne(String nom) {
    super();
    this.nom = nom;
}

public int getIdpersonne() {
    return this.idpersonne;
}

public void setIdpersonne(int idpersonne) {
    this.idpersonne = idpersonne;
}

public String getNom() {
    return this.nom;
}

public void setNom(String nom) {
    this.nom = nom;
}

public Set<Voiture> getVoitures() {
    return this.voitures;
}

public void setVoitures(Set<Voiture> voitures) {
    this.voitures = voitures;
}

} 
```

实体声音

```
package com.domain;

import java.io.Serializable;
import javax.persistence.*;

/**
 * The persistent class for the voiture database table.
 * 
*/
@Entity
public class Voiture implements Serializable {
private static final long serialVersionUID = 1L;

@Id
private int idvoiture;

private String type;

//bi-directional many-to-one association to Personne
@ManyToOne
private Personne personne;

public Voiture() {
}

public Voiture(String type) {
    super();
    this.type = type;
}

public int getIdvoiture() {
    return this.idvoiture;
}

public void setIdvoiture(int idvoiture) {
    this.idvoiture = idvoiture;
}

public String getType() {
    return this.type;
}

public void setType(String type) {
    this.type = type;
}

public Personne getPersonne() {
    return this.personne;
}

public void setPersonne(Personne personne) {
    this.personne = personne;
}

 } 
```

这是界面

```
 package com.DAO;

import javax.ejb.Remote;

import com.domain.Personne;

@Remote
public interface PersonneDAO {

public void save(Personne personne);
public String sayhello();
} 
```

实现包com.DAO.Impl；

```
 import javax.ejb.Stateless;
 import javax.persistence.EntityManager;
 import javax.persistence.PersistenceContext;

 import com.DAO.VoitureDAO;
 import com.domain.Voiture;
 @Stateless
 public class VoitureDAOImpl implements VoitureDAO {
@PersistenceContext(name = "JPADD")
EntityManager em;

@Override
public void save(Voiture voiture) {
    em.persist(voiture);
}
} 
```

实现包com.DAO.Impl；

```
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import com.DAO.PersonneDAO;
import com.domain.Personne;

@Stateless
public class PersonneDAOImpl implements PersonneDAO {
@PersistenceContext(name = "JPADD")
EntityManager em;

@Override
public String sayhello() {
    // TODO Auto-generated method stub
    return "helllllllllllllllllo";
}

@Override
public void save(Personne personne) {
    em.persist(personne);
}
} 
```

这是测试

```
package test;

import java.util.HashSet;
import java.util.Properties;
import java.util.Set;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

import com.DAO.PersonneDAO;
import com.domain.Personne;
import com.domain.Voiture;

public class Test {

/**
 * @param args
 */

public static void main(String[] args) {

    Context intialcontext;
    Properties properties = new Properties();
    properties.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
    try {
        intialcontext = new InitialContext(properties);
        PersonneDAO dao = (PersonneDAO) intialcontext
                .lookup("ejb:/projetweb/PersonneDAOImpl!com.DAO.PersonneDAO");
        // /----------------------------objet voiture-------------
        Voiture voiture = new Voiture("216");
        Set<Voiture> voitures = new HashSet<Voiture>();
        voitures.add(voiture);
        // -------------------------------------------------------
        Personne personne = new Personne("slatnia");
        personne.setVoitures(voitures);
        dao.save(personne);
    } catch (NamingException e) {
        e.printStackTrace();

    }
}

} 
```

这是我的 jboss-ejb-client.properties

```
remote.connectionprovider.create.options.org.xnio.Options.SSL_ENABLED=false
remote.connections=default
remote.connection.default.host=localhost   
remote.connection.default.port = 4447
remote.connection.default.connect.options.org.xnio.Options.SASL_POLICY_NOANONYMOUS=false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:50:01.043

尝试将以下属性添加到 @OneToMany 注释

```
@OneToMany(cascade=CascadeType.ALL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:50:09.457

你应该`cascade = CascadeType.PERSIST`在`@OneToMany`

**CascadeType.PERSIST**

> 持久化实体时，还要持久化该字段中持有的实体。我们建议自由应用此级联规则，因为如果 EntityManager 在刷新期间发现引用了新实体的字段，并且该字段未使用 CascadeType.PERSIST，则会出现错误。

例子：

```
@OneToMany(cascade = CascadeType.PERSIST)
private Set<Voiture> voitures; 
```

[CascadeType](http://docs.oracle.com/javaee/6/api/javax/persistence/CascadeType.html)的Javadoc和[此处](http://openjpa.apache.org/builds/1.0.1/apache-openjpa-1.0.1/docs/manual/jpa_overview_meta_field.html#jpa_overview_meta_cascade)的其他文档。

# core-plot - ［核心情节］如何改变 CPTTextStyle.color 的值？

> ID：10479858
> 
> 赞同：3
> 
> 时间：2012-05-07T09:42:07.253
> 
> 标签：core-plot

我正在使用 core plot 。当我尝试自定义 CPTTextStyle.color 的值时，我发现它是只读的！谁能告诉我如何更改颜色属性的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T23:08:21.327

使用`CPTMutableTextStyle`. Core Plot 遵循一些类的可变和不可变版本的通用 Cocoa 约定。线型、阴影和绘图范围也遵循这种模式。

# json - Sencha Touch 2 从嵌套 JSON 中的键和值读取值

> ID：10479860
> 
> 赞同：2
> 
> 时间：2012-05-07T09:42:28.283
> 
> 标签：json, sencha-touch, sencha-touch-2

我正在尝试加载一些 JSON，其中存储了许多关于儿科患者的大约 100 种麻醉药物的变量。

实际值是根据患者的体重、年龄等计算得出的：

例子：

```
var propofolInductionTitle = propofolName + ' ' + propofol0PercentConcentration + '- Induktion';
var propofol0InductionDosageMG = (Math.round(kg * 2 * 10) / 10) + ' - ' + (Math.round(kg * 5 * 10) / 10); 
```

然后，我将我的药物创建为一个 json 块，其中包含我需要的变量，这些变量稍后将被计算值替换。我特别尝试避免 JSON 中的字符串，以便在数学块中定义所有变量时更容易本地化为英语和法语。

```
var hypnotikaJSON = {
            "thiopentalTitle": [
                {"thiopentalBrandName": ""},
                {"vialContentTitle": "thiopentalVialContent"},
                {"solutionTitle": "thiopentalSolution"},
                {"concentrationTitle": "thiopentalConcentration"},
                {"dosageString": "thiopentalDosageString"},
                {"atWeight": "thiopentalDosageMG"},
                {"thiopentalAtConcentration": "thiopentalDosageML"}
            ],
            "propofolInductionTitle": [
                {"propofolInductionBrandName": ""},
                {"propofolVialContentTitle": "propofolInductionVialContent"},
                {"propofolSolutionTitle": "propofolSolution"},
                {"propofolConcentrationTitle": "propofolInductionConcentration"},
                {"propofolInductionDosageStringTitle": "propofolInductionDosageString"},
                {"atWeight": "propofolInductionDosageMG"},
                {"propofolAtInductionConcentration": "propofolInductionDosageML"}
            ],
            "propofolSedationTitle": [
                {"propofolSedationBrandName":""},
                {"propofolVialContentTitle":"propofolSedationVialContent"},
                {"propofolSolutionTitle":"propofolSolution"},
                {"propofolConcentrationTitle":"propofolSedationConcentration"},
                {"propofolSedationDosageStringTitle":"propofolSedationDosageString"},
                {"atWeight":"propofolSedationDosageMG"},
                {"propofolAtSedationConcentration":"propofolSedationDosageML"}
            ],
            "laryngealMaskTitle": [
                {"laryngealMaskSizeTitle":"laryngealMaskSize"},
                {"laryngealMaskCuffSizeTitle":"laryngealMaskCuffSize"},
                {"laryngealMaskBiggestETTTitle":"laryngealMaskBiggestETT"},
                {"laryngealMaskBronchoscopeSizeTitle":"laryngealMaskBronchoscopeSize"}
            ]
    }; 
```

我的具体需求是 JSON 阅读器必须给我每个对象的键和值，因为我需要两者来填充模板。原因是药物的领域在部分不同。有些有额外的给药途径，所以我有另一个键：不同药物没有的值对。有些既作为推注又作为每次滴注给予，有些则不是。所以不可能有方便的 json 结构。[我在这里](https://stackoverflow.com/questions/10304941/reading-json-with-keyvalue-in-ext-store-in-sencha-touch-2)找到了 rdougan 的答案，部分允许我这样做：

模型：

```
Ext.define('my.model.Drug', {
        extend: 'Ext.data.Model',
        config: {
            fields: ['name', 'value']
        }
    }); 
```

自定义 Json 阅读器：

```
Ext.define('Ext.data.reader.Custom', {
        extend: 'Ext.data.reader.Json',
        alias: 'reader.custom',
        getRoot: function (data) {
            if (this.rootAccessor) {
                data = this.rootAccessor.call(this, data);
            }

            var values = [],
                name;

            for (name in data) {
                values.push({
                    name: name,
                    value: data[name]
                });
            }

            return values;
        }
    }); 
```

店铺：

```
var store = Ext.create('Ext.data.Store', {
        fields: ['name', 'value'],
        data: hypnotikaJSON,
        autoLoad: true,
        proxy: {
            type: 'memory',
            reader: {
                type: 'custom'
            }
        }
    }); 
```

控制板：

```
this.viewport = new Ext.Panel({
        fullscreen: true,
        layout: 'fit',
        items: [{
            xtype: 'list',
            itemTpl: '<p class="description">{name}</p><p class ="values">{value}</p>',
            store: store
        }]
    }); 
```

不幸的是，我是一名医生而不是程序员，经过大量阅读后，我无法将其应用于嵌套的 JSON。自定义阅读器似乎只适用于第一级。我可以在没有阅读器的情况下做到这一点，没有商店，每个条目周围只有很多计划 html，但事实证明这非常慢，所以我想在从 Sencha Touch 1.1 更新时避免它。这次最好做对。

能否请您指出一种解析这种丑陋数据结构的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:20:50.410

我对扩展 JSON 阅读器知之甚少，所以只是猜测，但也许您应该覆盖“读取”方法？然后您可以根据需要检查 JSON

此外，如果您可以控制 JSON，则应该考虑更改它。
通常，JSON 中的键在数组中的所有项中都应该是相同的。
键不是数据，它们是元数据。
因此，如果您在不同药物之间确实具有不同的特性，那么这样的解决方案可能是一个解决方案：

> [{
> 
> > 名称：'异丙酚 1%'，
> > 性质：[
> > 
> > > {title：'induction'，value：'22-56g'}，
> > > {title： 'Sedation'，value：'22'}
> > > 等
> > > ]}，
> > > {name：'nextDrug'}
> > > 等。

# c# - ConcurrentDictionary Keys 或 Values 属性是线程安全的吗

> ID：10479867
> 
> 赞同：45
> 
> 时间：2012-05-07T09:42:50.270
> 
> 标签：c#, .net, multithreading

有一个关于线程安全的问题`ConcurrentDictionary`。从 API 中，我看到枚举器是线程安全的，但对于键和值属性，我看不到相同的。我的问题是：

当有其他线程同时修改它时，遍历`Keys`or集合是否安全？`Values`

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-07-10T12:06:20.180

虽然我确实喜欢文档，但当有疑问或我觉得我可能假设太多时，我倾向于用一个小程序来验证事情。

以下代码验证您确实可以安全地枚举值集合，同时将键从单独的线程添加或删除到进行枚举的线程。这不会导致通常的集合被修改异常。更详细地说，这里有几个测试用例

**案例 1：枚举值和删除键**

如果您遵循以下顺序：

*   开始从线程枚举值集合
*   从我们尚未枚举的不同线程中删除密钥
*   继续枚举原线程

观察到的行为是删除的键确实会被枚举，因为当我们开始枚举时它存在于值集合中。不会引发异常。

**案例 2：枚举值并添加键**

*   开始从线程枚举值集合
*   从我们尚未枚举的不同线程添加一个新密钥
*   继续枚举原线程

观察到的行为是添加的键不会被枚举，因为当我们开始枚举它时它在值集合中不存在。无论我们使用 TryAdd 还是通过直接分配给字典即字典 [key] = value 来添加，都不会引发异常。

**示例代码**

这是演示这两种情况的示例程序：

```
ConcurrentDictionary<int, int> dictionary = new ConcurrentDictionary<int, int>();

// Seed the dictionary with some arbitrary values; 
for (int i = 0; i < 30; i++)
{
    dictionary.TryAdd(i, i);
}

// Reader thread - Enumerate the Values collection
Task.Factory.StartNew(
        () =>
        {
            foreach (var item in dictionary.Values)
            {
                Console.WriteLine("Item {0}: count: {1}", item, dictionary.Count);
                Thread.Sleep(20);
            }

        }
);

// writer thread - Modify dictionary by adding new items and removing existing ones from the end
Task.Factory.StartNew(
        () =>
        {
            for (int i = 29; i >= 0; i--)
            {
                Thread.Sleep(10);
                //Remove an existing entry 
                int removedValue;
                if (dictionary.TryRemove(i, out removedValue))
                    Console.WriteLine("Removed item {0}", removedValue);
                else
                    Console.WriteLine("Did not remove item {0}", i);

                int iVal = 50 + i*2;
                dictionary[iVal] = iVal;
                Thread.Sleep(10);
                iVal++;
                dictionary.TryAdd(iVal, iVal);
            }
        }
);

Console.ReadKey(); 
```

这是**发布模式下的输出**：

![控制台输出](../Images/a30299c568dbd4c6d5b2a1b6d36f263f.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-07T09:44:40.393

> ConcurrentDictionary 表示可由多个线程同时访问的键值对的**线程安全集合。**

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/dd287191.aspx)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-07-07T04:42:17.673

是的，它的线程安全。*但是*，即使它是线程安全的，您也不应该使用`Keys`,`Values`和 also `Count`。

尤其是当您使用时，`ConcurrentCollections<T>`因为您希望最大限度地减少锁争用、线程阻塞和内存分配。如果您关心性能和效率，您确实想要这些东西。

查看[参考源](https://referencesource.microsoft.com/#mscorlib/system/Collections/Concurrent/ConcurrentDictionary.cs.html)以了解原因 -`Keys`立即调用`GetKeys()`帮助程序并在继续之前*获取每一个锁。*一旦它拥有了锁，它会将*每一个密钥*复制到一个`new List<TKey>`中，并返回一个只读视图——这样就不会有人意外地改变实际上只是密钥集合的临时副本的内容。这需要分配相当大的数组，并且如果你的集合变得很大的话，需要持有锁相当长的时间！

`Values`锁定并复制每个值，类似于`Keys`. 甚至`Count`获取所有锁，不是为了复制，而是为了求和所有内部表段长度。所有这些只是为了获得集合中对象的瞬时“一致”计数，这仅在释放锁后用作粗略估计或历史脚注。

所以是的，*叹息*，如果你需要原子一致性，我想这可能是你必须付出的代价。但！也许你比那更幸运。然后，您可能会意识到您的场景实际上并不需要一致性，并且您可以掌握针对那些坏的 API 的更多高性能 API - 比如使用`GetEnumerator()`来大致了解您的集合中有哪些项目！`GetEnumerator()`的文档中的注释：

> 从字典返回的枚举器可以安全地与字典的读取和写入同时使用，但它并不代表字典的即时快照。通过枚举器公开的内容可能包含调用 GetEnumerator 后对字典所做的修改。

换句话说，它根本不需要锁定或复制，因为它不需要确保一致性。万岁！

# windows-phone-7 - 从 XML 获取单个值并将其绑定到文本块？

> ID：10479869
> 
> 赞同：0
> 
> 时间：2012-05-07T09:43:03.900
> 
> 标签：windows-phone-7, windows-phone

试图为奥斯陆的祈祷时间创建一个祈祷时间应用程序。我在应用程序中有一个 XML 文件。我想做的事情：根据月份和日期，为早祷，晚祷等获得价值。

我一次想要一个值，并将其显示在文本块中。我该怎么做？我目前正在列表框中获取信息，但我更希望单个值显示在文本块中。还是我应该使用其他东西？

```
public class PrayerTime
 {   
   public string Fajr { get; set; }
   public string Sunrise { get; set; }

} 
```

要获取值：

```
XDocument loadedCustomData = XDocument.Load("WimPrayerTime.xml");
var filteredData = from c in loadedCustomData.Descendants("PrayerTime")
       where c.Attribute("Day").Value == myDay.Day.ToString()
       && c.Attribute("Moth").Value == myDay.Month.ToString()

        select new PrayerTime()
            {
                Fajr = c.Attribute("Fajr").Value,
                 Soloppgang = c.Attribute("Soloppgang").Value,
             };
listBox1.ItemsSource = filteredData; 
```

我还想知道为此目的应该如何最好地设置 XML。

像这样：

```
<PrayerTime>
<Day>1</Day>
<Month>5</Month>
<Fajr>07:00</Fajr>
<Sunrise>09:00</Sunrise>
</PrayerTime> 
```

或者像这样：

```
<PrayerTime
Day ="1" 
Month="5" 
Fajr="07:00" 
Sunrise="09:00" 
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:53:30.767

```
 yourTextBox.Text = filteredData.First().Fajr; 
```

至于是否最好将信息作为属性或节点放在 XML 文件中，这是一个反复出现的问题，没有明确的答案。在大多数情况下，这只是口味问题。

# javascript - 捕获浏览器缓存数据下拉列表onclick

> ID：10479874
> 
> 赞同：0
> 
> 时间：2012-05-07T09:43:24.323
> 
> 标签：javascript, jquery, jquery-events

我在使用 jQuery 添加带有 ajax 和东西的下拉列表时遇到了一些问题。当您单击或在输入文本上键入时，将调用创建 jQuery 下拉列表的方法。但是，如果您已经提交了此表单，则当您键入时，您会看到典型的浏览器简单下拉列表，其中包含以前提交的数据。我很难弄清楚什么事件会触发单击该下拉列表元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:52:39.423

只需添加

```
autocomplete="off" 
```

属性到您的输入字段，例如：

```
<input type="text" name="myField" autocomplete="off"> 
```

# linux - 用于计算应用程序内存的 Bash 脚本

> ID：10479876
> 
> 赞同：2
> 
> 时间：2012-05-07T09:43:44.090
> 
> 标签：linux, bash, memory, memory-management

我想要一个 bash 脚本来计算特定应用程序或命令使用的内存量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:05:20.090

`ps o rss= -p PID`将输出给定进程的驻留集大小。

使用`size`而不是`rss`获取代码+数据+堆栈大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:50:37.297

可能的方式：

在终端中使用`top`，然后将输出通过管道传输到文件中并获取您需要的行（grep）

# jquery - 如何使用选择器返回 jQuery 对象数组

> ID：10479879
> 
> 赞同：4
> 
> 时间：2012-05-07T09:43:51.093
> 
> 标签：jquery

我正在尝试从选择器中检索 jquery 对象数组，因此我不必再次重新查询它们以便稍后进行修改。

但是，当我使用代码进行测试时，我发现如果 jquery 选择器不查询特定元素，它会将数组作为 html 元素返回。

```
//HTML
<div id='nav'>
    <div class='menu'>menu 1</div>
    <div class='menu'>menu 2</div>
    <div class='menu'>menu 3</div>
    <div class='menu'>menu 4</div>
    <div class='menu'>menu 5</div>
</div>​

//JS

//this works
$('#nav .menu:eq(0)').html('haha');

//this does not    
$('#nav .menu').get(0).html('halo w');​ 

-> Uncaught TypeError: Object #<HTMLDivElement> has no method 'html' 
```

我的问题是为什么它返回 html 元素而不是 jquery 对象。如何从选择器中检索 jquery 对象数组。

这是 JSFiddle 示例。

[http://jsfiddle.net/mochatony/K5fJu/7/](http://jsfiddle.net/mochatony/K5fJu/7/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T09:44:55.880

`.get(i)`返回 DOM 元素。你想要的是其中之一：

```
$('#nav .menu').first()
$('#nav .menu').eq(0) 
```

请参阅[http://api.jquery.com/category/traversing/filtering/](http://api.jquery.com/category/traversing/filtering/)以获取可能的过滤器函数列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T12:03:01.873

`$('#nav .menu')`确实返回匹配元素的数组。但是要使用它，您必须正确访问它。考虑以下代码

```
var x = $('#nav .menu'); //returns the matching elements in an array

//(recreate jQuery object)
$(x[1]).html('Hello'); //you can access the various elements using x[0],x[1] etc. 
```

以上与

```
$($('#nav .menu')[1]).html('Hello');​ 
```

如果你这样做，`alert(x.length)`你会得到 5 作为警报，它根据你的示例指示数组的长度。

[JSFIDDLE 示例](http://jsfiddle.net/lonewolfs/PvRem/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:47:30.797

```
$('#nav .menu:eq(0)'); 
```

或者

```
$('#nav .menu:first'); 
```

或者

```
$('#nav .menu').first(); 
```

或者

```
$('#nav .menu').eq(0); 
```

# swing - 无法刷新 JTabbedPane

> ID：10479881
> 
> 赞同：1
> 
> 时间：2012-05-07T09:43:52.700
> 
> 标签：swing, jpanel, jtabbedpane

我正在使用 JTabbedPane 和 JPanel 在一个选项卡上显示 JTable，在另一个选项卡上显示文本、下拉菜单和 jbutton。第一次它工作正常，但如果我最小化或切换屏幕到其他应用程序并返回到我的应用程序，它会正确显示数据，但 JTabbedPane 中的选项卡更改存在严重问题。现在选项卡屏幕变为蓝色并且不显示数据。（我希望数据在那里，但它不是重新绘制或刷新完整的窗口）。现在在蓝屏的情况下，我执行相同的程序并更改 JTabbedPane 中的选项卡，它显示正确的数据。我使用了重绘，但它不起作用。需要帮助才能正确刷新窗口或选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:35:41.037

您使用 jdic.dll 可能是浏览器的问题。尝试使用任何其他浏览器重新加载选项卡式窗格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-08T17:40:10.347

我想这个“问题”是常青树。我假设，大多数人可能在错误的事件方法中实现 JTabbedPane 更改（删除和添加选项卡）时偶然发现了这个问题：

例如，如果您想删除一个选项卡并根据 JComboBox 中的选择在选项卡式窗格中添加一个新选项卡，您必须将您的逻辑放入添加到此组合框中的 ItemListener 的“itemStateChanged”事件中。如果您将选项卡更改逻辑例如放入 propertyChangeEvent (PropertyChangeListener)，那么您做错了，并且重新绘制/刷新选项卡式窗格 UI 元素的时间总是搞砸了！

如果您使用正确的事件方法，您甚至不必调用 setVisible、重新验证或重新绘制。一切都会完美的。

这是一个简单的例子：

```
JComboBox<String> c_editor = new javax.swing.JComboBox<String>();

c_editor.setModel(new javax.swing.DefaultComboBoxModel<>(
            new String[] { "CSV", "EXCEL", "HTML" }
        ));

c_editor.addItemListener(new java.awt.event.ItemListener() {
        public void itemStateChanged(java.awt.event.ItemEvent evt) {
            c_editorItemStateChanged(evt);
        }
    });

...

protected void c_editorItemStateChanged(ItemEvent evt) {

    // get the value selected in the combo box
    final String val = c_editor.getSelectedItem().toString();

    if (tabbed_pane.getTabCount() > 1) {
        // remove the panel which is at position 1
        tabbed_pane.removeTabAt(1);
    }

    if (val.equals("CSV")) {
        // add the panel for viewing CSV files
        tabbed_pane.addTab("CSV Editor", p_csv);
    } else if (val.equals("EXCEL")) {
        // add the panel for viewing Excel files
        tabbed_pane.addTab("Excel Editor", p_excel);
    } else if (val.equals("HTML")) {
        // add the panel for viewing HTML files
        tabbed_pane.addTab("HTML Editor", p_html);
    }
} 
```

仅此而已，无需其他任何东西 - UI 将自行更新。PS：这个问题与浏览器无关，正如这个线程中“喜欢”的答案所建议的那样，这都是关于 Java Swing GUI 的。

# gmaps4rails - 如何删除 gmaps4rails 中的路线

> ID：10479882
> 
> 赞同：2
> 
> 时间：2012-05-07T09:43:54.680
> 
> 标签：gmaps4rails

我有一个显示动作，我显示这样的方向：

```
= gmaps({"direction"   => { "data" => { "from" => "#{@ride.latitude},#{@ride.longitude}", "to" => "#{@ride.spot.latitude},#{@ride.spot.longitude}" } }}) 
```

我希望用户编辑模型并通过 javascript 更新方向。所以我在这里有一个咖啡脚本，看起来像这样：

```
$('#ride_address').autocomplete {
    select: (event,ui) ->

      Gmaps.map.direction_conf.destination = "#{spot_lat},#{spot_lng}"
      Gmaps.map.direction_conf.origin = "#{ride_lat},#{ride_lng}" 
      Gmaps.map.create_direction()

} 
```

现在新的方向在地图上呈现，但在现有方向的顶部。

我怎样才能先删除以前的方向？

# php - php 将文件的内容放入一个数组中，然后将该数组的每个字符串拆分为一个单独的数组

> ID：10479892
> 
> 赞同：0
> 
> 时间：2012-05-07T09:44:29.667
> 
> 标签：php, arrays

这可能是一个荒谬的问题，但我正在学习 php，所以如果可以，请提供帮助。

我有一个名为“res_example.txt”的文件，它看起来像这样：

```
>chr1:2198584545754_genome_1000+ 511 66 (+) nan full_model
>chr2:2198581212154_genome_1000+ 649 70 (+) nan full_model
>chr3:2115151215754_genome_1000+ 666 80 (+) nan full_model
>chr4:2198584545754_genome_1000+ 750 90 (+) nan full_model
>chr5:1218455145754_genome_1000+ 800 100 (+) nan full_model
>chr6:1231354645454_genome_1000+ 850 110 (+) nan full_model
>chr7:1231213211134_genome_1000+ 900 120 (+) nan full_model 
```

我想打开这个文件。将每一行放入一个数组 $resArray 中，因此每一行都是一个单独的字符串。所以它会是这样的：

```
$resArray= array(' >chr1:2198584545754_genome_1000+ 511 66 (+) nan full_model',  '>chr2:2198581212154_genome_1000+ 649 70 (+) nan full_model') 
```

ETC

然后使用 $resArray 中的每个键，我想创建另一个数组 $ArrayResults，在字符串中的每个空间爆炸每个字符串。这将让我分别处理每个字符串的每个部分。

我希望这是有道理的。我可能没有以正确的方式问这个问题，所以道歉。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T09:48:38.763

> 我想打开这个文件。将每一行放入一个数组

[`file()`](http://php.net/manual/en/function.file.php)

> 使用 $resArray 中的每个键，我想创建另一个数组 $ArrayResults 在字符串中的每个空间爆炸每个字符串

[`explode()`](http://php.net/manual/en/function.explode.php)

所以它会变成这样：

```
$resArray = file('res_example.txt');
$resSplit = array();

foreach ($resArray as $res)
{
    $resSplit[] = explode(' ', $res);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:49:30.030

首先，获取文件的内容，并将它们放入变量`contents`.

```
$f = fopen('filename.txt', 'r+');
$contents = fread($f, filesize("filename.txt"));
fclose($f); 
```

接下来，在换行符上拆分内容`\n`（或者`\r\n`如果您在 Windows 机器上）。

```
$resArray = explode("\n",$contents); 
```

最后，循环遍历数组以拆分空格字符上的每个值。

```
foreach($resArray as $r) {
   $ArrayResults[] = explode(" ",$r);
} 
```

我希望这就是你要找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:51:24.670

你可能想看看explode()，你可以在[这里](http://www.php.net/manual/en/function.explode.php)找到它。干杯。

# xaml - 如何在 Windows 8 XAML 中为控件的高度设置动画

> ID：10479903
> 
> 赞同：14
> 
> 时间：2012-05-07T09:45:00.410
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我在 Windows 8 上的 Metro 风格 C#/XAML 应用程序中执行简单的基于情节提要的控件高度动画时遇到问题。

以下琐碎的 XAML 和代码片段背后的代码在 Silverlight 5 和 Windows Phone 7 中运行良好，但在 Windows 8 中没有任何作用（至少对我而言）：

```
<Page.Resources>
    <Storyboard x:Name="expandAnimation">
        <DoubleAnimation Storyboard.TargetName="scaleButton" Storyboard.TargetProperty="Height" From="50" To="200" Duration="0:0:1"/>
    </Storyboard>
</Page.Resources>

<StackPanel Width="200">
    <Button x:Name="scaleButton" Click="scaleButton_Click" Content="Scale"/>
    <Button Content="Another button"/>
    <Button Content="Yet another button"/>
</StackPanel> 
```

C#代码：

```
private void scaleButton_Click(object sender, RoutedEventArgs e)
{
    expandAnimation.Begin();
} 
```

可以更改相同的代码来为控件的其他属性设置动画，例如按预期工作的不透明度。

我可以为 ScaleTransform 设置动画以进行缩放，但它会改变控件的内部渲染，并且不会影响相邻控件的布局，这对我来说是个问题。

希望我在这里没有遗漏任何明显的东西，但这不应该有效吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-07T18:42:43.683

您只需要添加`EnableDependentAnimation="True"`，然后它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-14T21:15:27.720

依赖动画是一种会导致 Xaml 重新布局的动画。昂贵的; 因此需要“选择加入”。

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.media.animation.pointanimation.enabledependentanimation.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.media.animation.pointanimation.enabledependentanimation.aspx)

如果可能，您应该使用渲染转换并缩放元素的视觉效果。这是独立的意思是页面上的其余元素不需要移动来适应。

# powershell - 在生产环境中添加 snapin/Import 模块的指导方针是什么？

> ID：10479904
> 
> 赞同：1
> 
> 时间：2012-05-07T09:45:02.650
> 
> 标签：powershell, powershell-2.0

我正在尝试在 powershell 中执行 IIS 操作。我们的客户可能拥有 windows 2008 R2 或 Sp2。

不幸的是，在 Windows 2008 Sp2 中，Webadministration 是一个管理单元，而在 R2 中，它是一个模块。

如果我们的脚本要在生产环境的 diff 服务器中使用，如何确保我们的脚本不会在其中一台机器上中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:57:58.993

您可以测试 pssnapin 是否存在：

```
if ( [bool]((Get-PSSnapin -Registered) -match 'Webadministration') )
{
  add-pssnapin Webadministration
}
else
{
   import-module Webadministration
} 
```

您还可以测试模块的存在：

[`bool]((get-module -ListAvailable) -match "Webadministration")`

或者您可以使用 wmi 测试操作系统：

```
 (gwmi Win32_OperatingSystem ).caption 
```

并根据标题值添加 pssnapin 或 mudule

编辑：

快捷方式：

```
if (!(import-module Webadministration -ea silentlycontinue) #on error return $false
{
 add-pssnapin Webadministration
} 
```

# php - 从加载到 div 的多个页面切换到存储在一个页面上的所有 div

> ID：10479907
> 
> 赞同：0
> 
> 时间：2012-05-07T09:45:13.587
> 
> 标签：php

大家好，我目前正在使用一个基本的 div 框架，它将其他页面中的数据加载到 div 中。但现在我想转向一种解决方案，在一个**HTML**页面上存储和访问所有 div 内容。我一直在考虑使用 jQuery 选项卡。我将如何实施此解决方案。

这是我目前正在使用的代码：

```
<?php
if(isset($_GET['page'])){
  $page=$_GET['page'];
}else{
  $page='home';
}
?>

<div class="container">
  <div class="header">
  A Basic Div Framework
  </div>
  <div class="nav">
    <div class="<?php if($page=='home'){echo 'nav-button-mark';}else{echo 'nav-button';} ?>"><a href='?page=home'>首页 home</a></div>
    <div class="<?php if($page=='page1'){echo 'nav-button-mark';}else{echo 'nav-button';} ?>"><a href='?page=page1'>网页一 page 1</a></div>
    <div class="<?php if($page=='page2'){echo 'nav-button-mark';}else{echo 'nav-button';} ?>"><a href='?page=page2'>网页二 page 2</a></div>
    <div class="<?php if($page=='page3'){echo 'nav-button-mark';}else{echo 'nav-button';} ?>"><a href='?page=page3'>网页三 page 3</a></div>
  </div>
  <div class="content">
  <?php
  switch($page){
  case 'home':
    echo '<h1>Home Page Content</h1>';
    echo '<h3>$_GET</h3><pre>';print_r($_GET);echo '</pre>';
    echo '<h3>$_POST</h3><pre>';print_r($_POST);echo '</pre>';
    echo '<h3>$_SESSION</h3><pre>';print_r($_SESSION);echo '</pre>';
    break;
  case 'page1':
    echo '<h1>Page 1 Content</h1>';
    echo '<h3>$_GET</h3><pre>';print_r($_GET);echo '</pre>';
    echo '<h3>$_POST</h3><pre>';print_r($_POST);echo '</pre>';
    echo '<h3>$_SESSION</h3><pre>';print_r($_SESSION);echo '</pre>';
    break;
  case 'page2':
    echo '<h1>Page 2 Content</h1>';
    ?>
    <form method="post" action="?page=page3" />
    <input type='text' size='40' name='user-input' />
    <input type='submit' name='mysubmit' />
    </form>
    <?php
    echo '<h3>$_GET</h3><pre>';print_r($_GET);echo '</pre>';
    echo '<h3>$_POST</h3><pre>';print_r($_POST);echo '</pre>';
    echo '<h3>$_SESSION</h3><pre>';print_r($_SESSION);echo '</pre>';
    break;
  case 'page3':
    if(isset($_POST['mysubmit'])){
      $_SESSION['user-input']=$_POST['user-input'];}
    echo '<h1>Page 3 Content</h1>';
    echo '<h3>$_GET</h3><pre>';print_r($_GET);echo '</pre>';
    echo '<h3>$_POST</h3><pre>';print_r($_POST);echo '</pre>';
    echo '<h3>$_SESSION</h3><pre>';print_r($_SESSION);echo '</pre>';
    break;
  default:
    echo '<h1>Error: Unknown Page!!</h1>';
    break;
  }
  ?>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:09:53.550

如果我了解您想要做的是将所有“页面”加载到一个 html 文档中，并使用 javascript 允许用户单击菜单链接来显示页面，就好像它们可能是单独的 html 文档一样。

如果每个“页面”的内容最少，那么就有理由将其全部加载到一个文档中，以让用户立即满意，而不是点击和等待……我已经在各种网站上使用过这种技术。在所有情况下，我都使用了 CSS 和 javascript 的组合来帮助我完成它......我不知道 jquery 选项卡是否是正确的解决方案 - 也许是，但我发现大型库是获取的霰弹枪方法事情已经完成 - 也许您可能会同意我将在下面提供的严格解决方案：

1.  每个“页面”都应该有自己的 div，但理想情况下，共享同一个类。

2.  您定义的类应该使用 css 的 display:none 指令隐藏那些 div

3.  您的主页可以有一个内联样式指令 display:block 来覆盖隐藏它的类指令

4.  每个“页面”，不包括主页，都应该将其 id 设置为一个简短的单词或 Pascal 大小写的短语

5.  这些“页面”的锚标记应该共享一个类，以便 javascript 例程可以找到它们并对其进行操作

6.  此外，这些锚标记应该设置带有指向适当“页面”的片段标识符（http://en.wikipedia.org/wiki/Fragment_identifier）的href，即。如果您有一个 id 设置为“AboutUs”的“页面”，则相应的锚点可能如下所示：<a href="#AboutUs" >关于我们</a>。您将希望在您的 url 中使用片段标识符，以便 google 和其他搜索引擎可以在您的 html 文档中处理这种“页面”的概念。此外，人们将能够从外部链接到这些页面，您只需要一点 javascript 即可使其全部工作（下一步）。

7.  好的，我们需要一些 javascript，这样当用户单击指向您的某个页面的外部链接时，它就会显示出来。它将需要在文档的加载时运行...您可以将其放入 body.onload 中：

    ```
    // the hash has the hash mark which we can parse away using String.substr()
    var hash = document.location.hash.substr(1);
    // now to call a function to display the desired page
    ShowPage(hash); 
    ```

8.  不要忘记，我们需要显示所需页面的函数：

    ```
    function ShowPage(hash) {
    // iterate the pages and show/hide
    var pages = document.getElementsByClassName('page');
    for (var p in pages) {

        if (pages[p].id == hash) pages[p].style.display = block;
        else pages[p].style.display = none;
    } 
    ```

注意：较旧的浏览器不支持 document.getElementsByClassName ...有一些很棒的跨浏览器技术可以在不支持时添加该功能。像 jQuery 这样的库也确保了所有浏览器的功能 - 再说一次，我不喜欢猎枪方法，如果我发现它丢失了，我会用我自己的 getElementsByClassName 函数重载文档 dom 节点。

更有趣的东西：如果你想使用 CSS3，而不是使用 display:block|none 来显示|隐藏页面，你可以将页面设置为绝对定位和透明。使用 CSS3 过渡，您可以在不透明到透明之间设置动画，以在用户单击链接时产生淡入效果……或者，如果您喜欢模态窗口，您可以使用像 nyromodal 之类的库（或编写更紧密的脚本您自己的需求，这是我的偏好）

可以在以下位置找到一个功能齐全的示例：[http ://reinpetersen.com/examples/intlnk/#PageThree](http://reinpetersen.com/examples/intlnk/#PageThree)

# windows-phone-7 - WP7 市场报告“应用例外：无”？

> ID：10479908
> 
> 赞同：0
> 
> 时间：2012-05-07T09:45:14.460
> 
> 标签：windows-phone-7, exception, report, marketplace

Wp7 市场结果 pdf 在摘要中显示“应用的异常：无”。这是什么意思。我应该编写代码来处理未处理的异常还是我正在做的事情是正确的。该应用程序并没有因此而被拒绝，但我想知道这意味着什么。

谢谢，金谷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:51:52.483

这意味着您没有申请任何技术例外。这些是要求您的应用程序不根据某些市场政策标准进行测试的请求。您可以在常见问题解答的[认证](http://msdn.microsoft.com/en-us/library/hh202928%28v=vs.92%29.aspx "认证")部分（在第 3 和第 4 部分下）查看有关此的一些详细信息，以及如何申请例外。

# coldfusion - Coldfusion循环查询

> ID：10479912
> 
> 赞同：0
> 
> 时间：2012-05-07T09:45:33.013
> 
> 标签：coldfusion

我有一个类似的查询结果

```
ID IDParent Name    Title
--------------------------------------
1  -1   Test1       Test1_Title 
2  -1       Test2       Test2_Title
3  -1       Test3       Test3_Title
4   2   SubTest2    SubTest2_Title
5   2   SubTest3    SubTest3_Title
6   2   SubTest4    SubTest4_Title
7   3   SubTest6    SubTest8_Title
8   3   SubTest8    SubTest10_Title 
```

带有菜单和子菜单选项。我想循环遍历 -1 的菜单选项`IDParent`和 -1 的每个菜单项之后，`IDParent`我想循环其子项。

循环查询时，coldfusion 是否提供这样的分组？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:56:34.207

CFOUTPUT 也支持查询分组。

```
<cfquery name="qGetTests" datasource="#DSN#">
  SELECT   ID, IDParent, Name, Title
  FROM     Menu
  ORDER BY IDParent, Name
</cfquery>

<cfoutput query="qGetTests" group="IDParent">
    #IDParent#<br />
    <cfoutput>
       #ID# #Name# #Title#<br />
    </cfoutput>
</cfoutput> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T10:01:34.843

使用 Query of Queries (QoQ) 和一点递归非常容易：

```
<!-- database query, sorted in the way you want to display the results -->
<cfquery name="Menu" datasource="#YourDSN#">
  SELECT   ID, IDParent, Name, Title
  FROM     Menu
  ORDER BY Name
</cfquery>

<!-- output menu -->
<cfset OutputQueryRecursive(Menu, -1)>

<!-- support function -->
<cffunction name="OutputQueryRecursive">
  <cfargument name="BaseQuery" type="query"   required="yes">
  <cfargument name="ParentId"  type="numeric" required="yes">

  <cfquery name="CurrLevel" dbtype="query">
    SELECT * FROM BaseQuery WHERE IDParent = #ParentId#
  </cfquery>

  <cfif CurrLevel.RecordCount gt 0>
    <ul>
      <cfoutput query="CurrLevel">
        <li id="menu_#ID#">
          <span title="#HTMLEditFormat(Title)#">#HTMLEditFormat(Name)#</span>
          <cfset OutputQueryRecursive(BaseQuery, ID)>
        </li>
      </cfouptut>
    </ul>
  </cfif>
</cffunction> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:35:42.687

如果您对生成该查询结果的 SQL 有任何控制权，则可以考虑让数据库首先以正确的格式为您取回数据。这里介绍了 Oracle 和 SQL 服务器的方法，[这里](http://dbbest.net/blog/?p=44)有一些适用于 mySQL 的[选项](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)

如果您的菜单数据总是很小，那么 Tomalak 的解决方案将没有问题，但如果您将拥有大量菜单项，那么我会测试它是否仍然可以正常运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-23T12:51:01.367

考虑`qTestQuery`包含值

```
<cfset qTestQuery1 = qTestQuery>
<cfloop query="qTestQuery">
    <cfif qTestQuery.IDParent eq -1>
        <span class="main-menu">#qTestQuery.name#</span>
    </cfif>
    <cfset local.parentId = qTestQuery.IDParent>
    <cfloop query="qTestQuery1">
         <cfif qTestQuery1.IDParent eq local.parentId>
              <span class="sub-menu">#qTestQuery1.name#</span>
         </cfif>
    </cfloop>
</cfloop> 
```

# android - 为什么不能将多个图像加载到列表视图中？

> ID：10479913
> 
> 赞同：1
> 
> 时间：2012-05-07T09:45:33.683
> 
> 标签：android, bitmap, imageview

我正在从网站下载图像并附加到列表视图中。

```
URL aURL;
        try {
                aURL = new URL(//"http://www.orientaldaily.com.my/"+
                        imagepath[i]);
                URLConnection conn = aURL.openConnection();
                conn.connect();
                InputStream is = conn.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);
                Bitmap bm = BitmapFactory.decodeStream(bis);
                bis.close();
                is.close();

                imageview = (ImageView) findViewById(R.id.image_alllatestnewstitle);
                imageview.setVisibility(View.VISIBLE);
                imageview.setScaleType(ScaleType.CENTER_CROP);
                imageview.setImageBitmap(bm);
            } catch (IOException e) {
                Log.e("DEBUGTAG", "Remote Image Exception", e);
            } 
```

当我只下载 1 张图片时，它没有问题，但是当我下载多个或超过 5 张图片并加载到 listview 时，它会导致问题。

问题是

```
bitmap size exceeds VM budget 
```

如何避免这个问题？

注意：这不是重复任何问题！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:04:03.827

加载很多图像会导致应用程序内存不足并强制关闭。我认为这是您的应用程序发生的情况。内存问题是 android 在开发应用程序时的一个复杂问题。这可以通过手动清除未使用的位图和通过使用垃圾收集器。

*   尝试使用 System.gc();

*   尝试使用回收位图

*   位图.recycle();

*   使所有未使用的位图为空。

*   释放所有未使用的内存。

这一切都会对你有很大帮助，也可以通过这个[链接](https://stackoverflow.com/questions/9022679/memory-and-activities-outofmemory)。使用内存分析器它会帮助你找出 Deallocated 内存>试试这个[链接](http://www.vogella.com/articles/EclipseMemoryAnalyser/article.html)

```
public void deAllocateAllMemory() 
{
    try 
    {

        mGallery.imgLoader1.disposeImages();
        unbindDrawables(findViewById(R.id.magazineGrid));
        mGallery=null;  

        back.getBackground().setCallback(null);
        back.setOnClickListener(null);
        store.getBackground().setCallback(null);
        store.setOnClickListener(null);
        quickAction.setOnActionItemClickListener(null);
        settings.getBackground().setCallback(null);
        settings.setOnClickListener(null);
    }
    catch (Exception e) 
    {
    }

}

private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
        try {
            view.getBackground().setCallback(null);
            ((BitmapDrawable) view.getBackground()).getBitmap().recycle();
            view.destroyDrawingCache();
            view.notifyAll();
        } catch (Exception e) {
        }

    } 
```

这段代码可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:02:26.983

[高效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)教程可以帮助您。

# c# - 日期时间过滤不起作用

> ID：10479914
> 
> 赞同：0
> 
> 时间：2012-05-07T09:45:44.180
> 
> 标签：c#, sql, datetime, sql-server-ce

我在 Visual Studio（SQL Server Compact Edition）中有一个本地数据库，其中有一个包含几列的表。其中一列具有 datatype `DateTime`。当我插入一行时，我`DateTime.Now`在 C# 中使用添加日期/时间值。

当我做一个

```
SELECT * FROM ... 
```

我看到 DateTime 格式是`7-5-2012 11:41`.

但现在我需要使用 where 子句进行选择查询，以便结果介于特定日期之间。我找不到在日期/时间之间进行过滤的方法，当我使用该`DateTime.Now`函数设置之间时，我得到了 0 行。但是当我通过设置手动设置之间

```
WHERE date BETWEEN '7-5-2012 00:00' AND '8-5-2012 00:00' 
```

即便如此，我也得到了 0 个值。

我也尝试过这样做，`SqlCeCommands`但给出了同样的问题，0 行返回。

有谁我做错了什么或我如何让它工作？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:23:24.690

可能是你的日期格式错误，你应该使用查询命令参数：

```
command.CommandText = "SELECT * FROM ... WHERE date BETWEEN @lowb AND @highb";
command.Parameters.Add( "@lowb", SqlDbType.DateTime, new DateTime(...));
command.Parameters.Add( "@highb", SqlDbType.DateTime, new DateTime(...)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:13:01.283

试试这个：

```
"..spRis_GetListaDocs @DateFilter = '" + Convert.ToDateTime(txtDate.Text).ToString("yyyy-MM-dd") + "'" 
```

# visual-studio-2010 - 来自 VS 服务参考的 OData Web 服务查询

> ID：10479916
> 
> 赞同：2
> 
> 时间：2012-05-07T09:45:51.997
> 
> 标签：visual-studio-2010, odata, tridion, tridion-content-delivery

我想发送这样的请求：

```
/odata.svc/Pages(ItemId=27,PublicationId=1) 
```

这是我正在使用的代码：

```
CdService.ContentDeliveryService cdService = new ContentDeliveryService(new Uri("http://xxx.xx:81/odata.svc"));
var pages = cdService.Pages;
pages = pages.AddQueryOption("ItemId", "270");
pages = pages.AddQueryOption("PublicationId", "2");
var result = pages.Execute(); 
```

我的问题是这段代码正在发送这样的请求：

```
/odata.svc/Pages()?ItemId=270&PublicationId=2 
```

这个请求的问题是它返回了所有页面，而不仅仅是我需要的页面。

我可以使用 LINQ：

```
result.Single(page => page.ItemId == 27 && page.PublicationId == 1); 
```

但问题是所有页面仍将通过网络发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:58:47.123

你可以试试这个：

```
EntityDescriptor entityDescriptor = service.Entities.Where(c => 
               c.Entity is CDService.Page 
               && ((CDService.Page)c.Entity).ItemId == pageId.ItemId 
               && ((CDService.Page)c.Entity).PublicationId == pageId.PublicationId)
            .FirstOrDefault();

if (entityDescriptor != null)
{
   return (CDService.Page)entityDescriptor.Entity;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:01:33.353

我找到了一个解决方案，虽然不是很好：

```
ContentDeliveryService cdService1 
                = new ContentDeliveryService(new Uri("http://xxx.xx:81/odata.svc"));
var page = cdService1.Execute<Page>(
             new Uri("http://xxx.xx:81/odata.svc/Pages(ItemId=27,PublicationId=1)")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:15:30.647

我用 LINQ 做了一个快速测试，它似乎在做正确的查询：

```
ContentDeliveryService.ContentDeliveryService service = 
    new ContentDeliveryService.ContentDeliveryService(new Uri("http://localhost:99/odata.svc"));
var page = from x in service.Pages
            where x.ItemId == 2122
                    && x.PublicationId == 16
            select x;
foreach (var page1 in page)
{
    Console.WriteLine(page1.Title);
}
Console.Read(); 
```

# php - 在子文件夹中使用 spl_autoload_register 进行 PHP 自动加载

> ID：10479922
> 
> 赞同：4
> 
> 时间：2012-05-07T09:46:23.167
> 
> 标签：php, namespaces, spl

我的目录结构如下所示

```
> Root
> -Admin // admin area
> --index.php // admin landing page, it includes ../config.php
> -classes // all classes
> ---template.php 
> ---template_vars.php // this file is used inside template.php as $template_vars = new tamplate_vars();
> -templates // all templates in different folder
> --template1
> -index.php
> -config.php 
```

在我用过的 config.php 文件中

```
<?php
.... // some other php code
spl_autoload_register(NULL, FALSE);
spl_autoload_extensions('.php');
spl_autoload_register();

classes\template::setTemplate('template/template1');
classes\template::setMaster('master');
 .... // some other php code
?> 
```

我已经设置了正确的命名空间（仅在类中），并且在我的根目录下的 index.php 中我访问了这些类

```
<?php 

require 'config.php';
$news_array = array('news1', 'news1'); // coming from database

$indexTemplate = new \classes\template('index');
$indexTemplate->news_list = $news_array; // news_list variable inside index template is magically created and is the object of template_vars class
$indexTemplate->render();
?> 
```

到目前为止它工作完美，它呈现模板并填充模板变量，

但是当我在管理文件夹中打开索引文件时，它会出现以下错误

> 致命错误：在第 47 行的 /home/aamir/www/CMS/classes/template.php 中找不到类“classes\template_vars”

任何想法如何解决这个问题。它适用于root，但从管理面板内部它不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:51:42.453

你必须为此使用一个技巧：

```
set_include_path(get_include_path() . PATH_SEPARATOR . '../'); 
```

包括之前`../config.php` **OR**

```
set_include_path(get_include_path() . PATH_SEPARATOR . __DIR__ . '/'); 
```

里面`config.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T18:44:14.023

我遇到了同样的问题（在 Windows 上），我想我可以解释一下。

例如，让我们采用两个简单的脚本，第一个在`namespace`名为`root`的目录中的调用中创建一个类`root`：

- `root\sampleClass.php`：

```
namespace root;

class sampleClass
{
    public function __construct()
    {
        echo __CLASS__;
    }

    public function getNameSpace()
    {
        return __NAMESPACE__;
    }
} 
```

第二个脚本位于此处`root\index.php`，仅包含这两行：

```
spl_autoload_register();
$o = new sampleClass; 
```

那么如果你运行这个`root\index.php`脚本，你会得到一个像这样的致命错误：

```
( ! ) SCREAM: Error suppression ignored for
( ! ) Fatal error: spl_autoload(): Class sampleClass could not be loaded in C:\wamp\www\root\test.php on line 4 
```

如果您删除 上的命名空间关键字`root\sampleClass.php`，错误就会消失。

所以我不会对核心 php 的行为做出任何结论，因为我不是 php 核心开发人员，但会发生这样的事情：

如果您没有指定命名空间，该`spl_autoload_register();`函数还将在当前目录（即`root\`）中查找并找到被调用的类，`sampleClass.php`但如果您`root`在我们的示例中指定一个命名空间，该`spl_autoload_register();`函数将尝试加载位于某个位置的文件，例如“root\根”。

所以此时你有两个解决方案：

**1）**首先不正确的是创建一个名为的子目录`root`，其中还包含`sampleClass.php`

**2）**`index.php`第二个更好的是在脚本中添加一种技巧：

```
set_include_path(get_include_path().PATH_SEPARATOR.realpath('..')); 
```

这将告诉`spl_autoload_register()`函数检查父目录。

就这样

# iphone - 处理 json 数据

> ID：10479932
> 
> 赞同：1
> 
> 时间：2012-05-07T09:46:57.823
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我有以下代码来解析从服务器接收到的 JSON 数据：

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection {

NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];
NSArray *array_webdata=[[NSArray array] init];

NSString *searchStatus = [[NSString alloc] initWithData:webData encoding:NSUTF8StringEncoding];    

array_webdata = [parsedata objectWithString:searchStatus error:nil];

NSDictionary *usersList = [array_webdata valueForKey:@"results"]; 
```

//我认为这不是真正的 NSDictionary，因为如果我写**NSArray *keys = [usersList allKeys];** 执行崩溃

```
NSLog(@"\n usersList =\n %@ \n", usersList);

[searchStatus release];
[connection release];
[webData release];
[pool drain];} 
```

存储在 usersList 中的 json 数据具有以下结构：

```
(
{

  createTime = "date hour";

  fullname = "user name";

  "prof_id" = number;

   thumb = "image.jpg";

 },
 {
      data of rest of users...
 }
 ) 
```

我想创建一个类来存储每个用户的数据，并在我想使用特定用途时使用“prof_id”。我需要这个，因为该应用程序需要一个包含所有用户的列表（不是 tableview），我认为这是最简单的方法。

有人能帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:08:35.280

请使用[JsonKit](https://github.com/johnezang/JSONKit)框架解析从 web 服务接收到的 json 数据。

使用 JSONKit 读取数据并解析：

```
NSData* jsonData = [NSData dataWithData:webData];
JSONDecoder* decoder = [[JSONDecoder alloc]
                             initWithParseOptions:JKParseOptionNone];
NSArray* json = [decoder objectWithData:jsonData];
```

之后，您必须使用 for 循环遍历 json 变量。
使用继承自 NSObject 类的名称`User`(file->new->file) 创建新类，在 .h/.m 文件中创建所需参数。（进行综合以生成属性的 getter/setter）

在您的连接类中导入 User.h 并在迭代器循环中创建 User 实体的对象并将这些对象添加到全局范围数组中。

```
for(NSDictionary *userInfo in json) {
   User* user=[[User alloc] init];
   user.fullName=[userInfo valueForKey:@"fullname"];
   user.prof_id=[[userInfo valueForKey:@"prof_id"] integerValue];
   // Add into your global array
  [usersList addObject:user];
  [user release];// if ARC is not enable
}
// Check for successful object creation
NSLog(@"USER LIST contain User class Objects- %@",userList); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:51:31.510

如果我没记错的话，你唯一需要做的就是：

```
NSMutableArray *yourArray = usersList; 
```

然后使用 for 循环

```
for(int i = 0;i<[usersList count] ;i++)
{
NSMutableDictionary *yourDictionary = [usersList objectAtIndex:i];
int prof_id = [yourDictionary valueForKey:@"prof_id"];
} 
```

你可以像这样得到你的 prof_id。

我希望这有帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T10:30:58.450

使用 JSON 框架，并使用以下代码解析数据。

```
NSString* newStr = [[NSString alloc] initWithContentsOfURL:[NSURL URLWithString:@"yout link to json file"] encoding:NSUTF8StringEncoding error:nil];

NSLog(@"new str - %@",newStr);

NSArray *response = [newStr JSONValue];

NSLog(@"json array - %@",response); 
```

使用响应数组来显示您的结果。

# android - 通过 Android 帐户管理器添加帐户

> ID：10479934
> 
> 赞同：2
> 
> 时间：2012-05-07T09:47:06.103
> 
> 标签：android

我需要将 google 帐户添加到 Android 帐户管理器。我尝试使用帐户管理器的 addAccountExplicitly API。但它会引发安全异常说

```
java.lang.SecurityException: caller uid xxxxx is different than the authenticator's uid 
```

此外，我尝试使用 addAccount API 但我在 Dialog 中获得了谷歌帐户登录。我什至不想要这个 dailog。

是否可以添加指定用户名和密码的谷歌帐户。以便该帐户直接添加到帐户管理器中而无需任何用户操作？

非常感谢

巴瓦尼

# c++ - 在 Windows Phone 7 中调用 C++ DLL

> ID：10479938
> 
> 赞同：1
> 
> 时间：2012-05-07T09:47:24.897
> 
> 标签：c++, windows-phone-7, dll

全部，我看过以下两个关于这个话题的问题

[将c++ dll导入windows phone项目](https://stackoverflow.com/questions/4730774/import-c-dll-to-windows-phone-project)

[在 windows phone 7 中使用 C dll](https://stackoverflow.com/questions/6019922/use-c-dll-in-windows-phone-7)

但他们都一岁多。以下是

1.  不支持来自用户代码的 P/Invoke。
2.  也不支持 C++/CLI。

陈述仍然正确？目前有没有其他方法可以从 WP7 应用程序调用 C++ DLL。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:54:18.097

是的，该声明仍然正确，您不能使用它们中的任何一个。只允许托管 SL 代码。

# javascript - JavaScript 和 HTML5 中的图像放大

> ID：10479939
> 
> 赞同：1
> 
> 时间：2012-05-07T09:47:25.117
> 
> 标签：javascript, jquery, html, css

我需要使用 JavaScript 和 HTML5 开发图像放大功能。哪种策略会更好——</p>

1.  拍摄单张图像并应用缩放级别 - 我们可以下载图像以获得更高的缩放级别 - 4x 和加载页面以 1x 显示图像。通过这种方法，如果图像有很多文本，图像是否会特别失真？

2.  不同缩放级别的不同图像 - 这肯定会增加页面加载时间，希望避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:53:28.937

我认为最好的方法是为不同的缩放级别创建不同的图像（这样可以确保它们总是看起来不错）并仅在请求时加载不同的缩放级别（使用 ajax）——这样可以避免页面加载时间的增加.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:53:51.617

我建议选择第**一个选项。**

如果图像具有良好的分辨率，则文字不会扭曲。使用 PNG，或者如果可能的话，使用 SVG。

在您的第二个选项中，缩放效果不会平滑，因为您只会在不同级别拥有不同的图像。

即使您不需要它那么平滑但为了避免在缩放效果上加载图像的时间，您应该在缩放完成之前加载所有图像。但是在这种情况下，将一张重图像加载一次并平滑缩放比将多张不同尺寸的图像更轻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:55:27.967

第二种选择肯定会增加网络流量的开销，从而导致性能下降。因此，使用一张图像然后对其应用缩放级别会更好，但是这样您就可以选择图像类型，如 png、gif 等（更适合您的）。

在实践中，png 质量很好，适合这种操作。

# c# - 如何设置物理路径以在 Asp.Net 中上传文件？

> ID：10479942
> 
> 赞同：3
> 
> 时间：2012-05-07T09:47:33.293
> 
> 标签：c#, asp.net, visual-studio-2010, file-upload

我想在物理路径中上传文件，例如**`E:\Project\Folders`**.

我通过在网上搜索得到了以下代码。

```
//check to make sure a file is selected
if (FileUpload1.HasFile)
{
    //create the path to save the file to
    string fileName = Path.Combine(Server.MapPath("~/Files"), FileUpload1.FileName);
    //save the file to our local path
    FileUpload1.SaveAs(fileName);
} 
```

但在那方面，我想给出我上面提到的物理路径。这个怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T09:50:06.173

`Server.MapPath("~/Files")`根据相对于您的应用程序的文件夹返回绝对路径。前导`~/`告诉 ASP.Net 查看应用程序的根目录。

要在应用程序之外使用文件夹：

```
//check to make sure a file is selected
if (FileUpload1.HasFile)
{
    //create the path to save the file to
    string fileName = Path.Combine(@"E:\Project\Folders", FileUpload1.FileName);
    //save the file to our local path
    FileUpload1.SaveAs(fileName);
} 
```

当然，您不会在生产应用程序中对路径进行硬编码，但这应该使用您描述的绝对路径保存文件。

关于保存文件后定位文件（根据评论）：

```
if (FileUpload1.HasFile)
{
    string fileName = Path.Combine(@"E:\Project\Folders", FileUpload1.FileName);
    FileUpload1.SaveAs(fileName);

    FileInfo fileToDownload = new FileInfo( filename ); 

    if (fileToDownload.Exists){ 
        Process.Start(fileToDownload.FullName);
    }
    else { 
        MessageBox("File Not Saved!"); 
        return; 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:50:17.787

出色地，

您可以通过使用[VirtualPathUtility来完成此操作](http://msdn.microsoft.com/en-US/library/ms150160.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-20T05:31:48.357

```
// Fileupload1 is ID of Upload file
if (Fileupload1.HasFile)
{
    // Take one variable 'save' for store Destination folder path with file name
    var save = Server.MapPath("~/Demo_Images/" + Fileupload1.FileName);
    Fileupload1.SaveAs(save);
} 
```

# java - 装饰多客户端 webapp

> ID：10479944
> 
> 赞同：3
> 
> 时间：2012-05-07T09:47:40.560
> 
> 标签：java, struts2, sitemesh

我有一个 Java、Spring、Struts 2 和 Hibernate 的网络应用程序，它为多个客户端提供服务。每个客户端都有多个用户。为了为每个客户创造个人感觉，我想为每个客户定制标题。我正在使用 sitemesh 作为装饰器，并且正在寻找提示或示例或可以为我指出正确方向的人，以了解如何在最佳实践中实现这一目标。

你会怎么想？我应该直接在 header.jsp 中对其进行编码吗？提取有关登录用户的信息并从中通过代码创建自定义标头？还是有更聪明的解决方案？

谢谢！

**更新：**

为了进一步明确我想要的：每个客户端的不同属性文件不是一个选项。我们正在寻找潜在的数百个客户。它需要是数据库驱动的。但这是容易的部分。将信息存储在 db 中并在需要时提取它是没有问题的。

我想弄清楚的是是否有某种标准的方法来做到这一点。在站点网格装饰器之前运行的某种过滤器或操作将为装饰器提供正确的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:37:05.770

Struts2 为应用程序的全局变量提供应用程序范围。

将所有客户特定的字符串加载到#application 范围内（我会在应用程序启动时使用 spring 来执行此操作）。从那里引用字符串将非常明显：`#application.greeting`我不喜欢使用拦截器的想法，因为没有什么可以拦截的。我会说你正在做的应用范围是完美的地方。如果它是单个客户端系统，我看不出任何东西会存储在应用程序范围内的原因。

**另外**：Tiles 使用与站点网格不同的模板范例，它们的用途略有不同。因此，两者可以互补。依赖于 XML 定义的图块可以将其定义存储在数据库中，并且计算密集度肯定较低，但是在不同 UI 组件之间存在相互作用的情况下......或者页面上出现的不同元素需要使用 sitemesh。因此，对于基本模板需求，tile 可以做所有事情，而且很容易理解，但是说你想在页面中间添加一个依赖于 JS 的小部件，它需要添加到标题中，这样做会很棘手Tiles（尽管显而易见的解决方案是将 JS 功能整合到一个 JS 文件中，以供站点特定部分的所有可能用途使用）。

**旁白 2**：通过使用诸如速度或 freemarker 之类的视图技术与瓦片结合，可以将整个视图层移动到数据库中。我只是想我会提到一些可能非常有益的维护问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:01:15.687

Sitemesh 根据请求的 URL 字符串决定使用什么装饰，因此除非您在每个 url 中都有对客户端的引用 - 作为主 url 字符串的一部分或作为已知参数，否则 Sitemesh 开箱即用不会帮忙的。

这为实现您想要的目标留下了一些可能性；

1) 编写一个在 Sitemesh 之前运行的过滤器，例如，将“&clientId="xx" 添加到每个传入请求中。

2) 深入研究 Sitemesh 的源代码并寻找 Sitemesh 最终决定使用哪些装饰器并覆盖它的地方。我从来没有尝试过，所以我不知道这可能有多实用。

3) 使您的 jsp 页面中的样式表定义成为 OGNL 表达式，并在您的所有操作都扩展的基本操作类中提供该信息。通过这种方式，您最终（可能）为每个客户端使用不同的 CSS 文件，并通过 CSS 提供自定义。

希望这会有所帮助。

# c# - 通过 PrintToPrinter 打印我的水晶报告后丢失数据

> ID：10479945
> 
> 赞同：2
> 
> 时间：2012-05-07T09:47:44.853
> 
> 标签：c#, .net, crystal-reports

使用 PrintToPrinter 打印文档后所有数据都丢失了，不知道为什么？？？？

这段代码还有一个问题，我已经通过添加纠正了这个问题：

```
rpt.SetDatabaseLogon("u","p"); 
```

现在我打印了空文档。

这是我的代码：

```
protected void btnPrintToPrinter_Click(object sender, EventArgs e)
{
    int empno = Convert.ToInt32(Session["AnyVal"]);

    SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);

    string strQuery = "SELECT [View_EmplDetail].[Uni-Code], [View_EmplDetail].[FacultyCode], [View_EmplDetail].[EmpIDstr], [View_EmplDetail].[EngGivenName], [View_EmplDetail].[position_eng], [View_EmplDetail].[Emp_no], [View_EmplDetail].[GivenName], [View_EmplDetail].[position_name], [View_EmplDetail].[DariName], [Tbl_Dept].[EName], [View_EmplDetail].[photo] FROM   [MoHEDatabase].[dbo].[View_EmplDetail] [View_EmplDetail] INNER JOIN [MoHEDatabase].[dbo].[Tbl_Dept] [Tbl_Dept] ON [View_EmplDetail].[DepCode]=[Tbl_Dept].[DepCode] WHERE  [Emp_no] = @empno";
    SqlCommand command = new SqlCommand(strQuery, connection);
    command.CommandType = System.Data.CommandType.Text;

    command.Parameters.AddWithValue("@empno", empno);
    command.Connection = connection;
    command.Connection.Open();

    SqlDataAdapter da = new SqlDataAdapter(command);
    DataTable dt = new DataTable();
    da.Fill(dt);

    ReportDocument rpt = new ReportDocument();
    string _reportPath = Server.MapPath("..\\Student\\cardFinal.rpt");
    //rpt.Load(AppDomain.CurrentDomain.BaseDirectory + "\\" + @"\\Student\\CardFinal.rpt");
    rpt.Load(_reportPath);

    rpt.SetDataSource(dt);
    emp_card_report_viewer.ReportSource = rpt;

    string sq = "";

    //{View_OrgStr1.Uni-Code}=0 and {View_OrgStr1.FacultyCode}=119 
    //sq = "{View_StudentAddNew.Student_ID}=" + Session["AnyVal"];
    if (Session["AnyVal"].ToString() != "")
    {
        sq = "{View_EmplDetail.Emp_no}=" + int.Parse(Session["AnyVal"].ToString());
    }

    //emp_card_report.Report.FileName = "../Student/CardFinal.rpt";
    emp_card_report_viewer.SelectionFormula = sq;
    //ConnectionInfo connInfo = new ConnectionInfo();
    //connInfo.ServerName = "172.16.0.15";
    //connInfo.DatabaseName = "MoHEMISDatabase";
    //connInfo.UserID = "hemis_admin";
    //connInfo.Password = "hemis@sabir";
    //TableLogOnInfos crtt = new TableLogOnInfos();
    //TableLogOnInfo crtto = new TableLogOnInfo();
    //Tables crtables;
    //crtables = rpt.Database.Tables;
    //foreach (CrystalDecisions.CrystalReports.Engine.Table crtable in crtables)
    //{
    //    crtto = crtable.LogOnInfo;
    //    crtto.ConnectionInfo = connInfo;
    //    //crtable.ApplyLogInInfo(crtto);
    //}
    ConnectionInfo connInfo1 = new ConnectionInfo();
   // connInfo1.ServerName = "server";

    setDBLOGONforReport(connInfo1);

    //emp_card_report_viewer.RefreshReport();

    //ConnectionInfo connInfo = new ConnectionInfo();
    //connInfo.ServerName = "server";
    //connInfo.DatabaseName = "MoHEDatabase";
    //connInfo.UserID = "hemis_admin";
    //connInfo.Password = "hemis@sabir";

    //setDBLOGONforReport(connInfo);

    CrystalDecisions.Shared.PageMargins pageMargins = new
    CrystalDecisions.Shared.PageMargins(0, 0, 0, 0);
    rpt.PrintOptions.ApplyPageMargins(pageMargins);

    rpt.PrintOptions.PrinterName = printerList.SelectedItem.Value;
    emp_card_report_viewer.RefreshReport();

    rpt.PrintToPrinter(1, false, 1, 1);

    rpt.Close();
    rpt = null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:33:04.477

答案：

我在水晶报告中使用 Select Expert Record ，我删除了 Select Expert 中的所有公式，它起作用了.... :)

# java - 将字符串转换为 byte[] 并将 byte[] 转换为字符串

> ID：10479948
> 
> 赞同：2
> 
> 时间：2012-05-07T09:47:53.367
> 
> 标签：java

以下代码是将字符串转换为字节[]的代码

```
byte[] feedback;
feedback = "Your answer is correct and submit on time".getBytes(); 
```

但我发现 byte[] 包含一系列数字，我如何转换回字符串“您的答案正确并按时提交”？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:52:01.080

```
String s = new String(feedback) 
```

但请注意，两者`getBytes()`都有采用编码的版本，在阅读[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最小值（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)`new String()`之后，你真的真的应该使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:50:21.947

您应该能够使用[此](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28byte%5B%5D%29)构造函数来取回您的字符串： `String newString = new String(feedback);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:50:27.130

```
String s = new String(feedback); 
```

您应该先尝试搜索文档... [http://docs.oracle.com/javase/7/docs/api/java/lang/String.html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T11:02:35.220

尝试这个

```
String u = new String(feedback, "UTF8"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T09:50:59.200

```
byte[] feedback = "Your answer is correct and submit on time".getBytes ();

String backtoString = new String (feedback); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T10:44:07.070

您可以使用 String 构造函数将字节数组转换回字符串：

```
String yourString = new String(feedback); 
```

请记住，两种转换都基于默认字符结尾（UTF8，...）。其他方法允许设置特定的编码；此外，还有一个 toCharArray() 方法为您提供与编码无关的 char[] 而不是 byte[]。

# ios - 循环动画 - 不去

> ID：10479949
> 
> 赞同：2
> 
> 时间：2012-05-07T09:48:03.313
> 
> 标签：ios, core-animation, cabasicanimation

我试图在一个循环内重复一系列动画，在每个循环中随机改变一些参数。这是代码。请问有人知道为什么它不起作用吗？如果我用按钮操作调用它一次，它可以工作，但循环它不会。非常感谢！朱塞佩

```
-(IBAction)startLoop:(id)sender {
    for (int i=1;i<10; i++) {
        [self animation2];
    }
}

-(id) animation2 {

    int max=500;
    UIImage *myImage = [UIImage imageNamed:@"coccinella2.png"];
    CALayer *myLayer = [CALayer layer];
    myLayer.contents = (id)myImage.CGImage;
    myLayer.bounds = CGRectMake(0, 0, 50, 60);
    [myLayer setPosition:CGPointMake(arc4random()%(max), arc4random()%(max))];
    [myLayer setBounds:CGRectMake(0.0, 0.0, 50.0, 60.0)];
    [self.view.layer addSublayer:myLayer];

    //translation1
    CGPoint startPt = CGPointMake(arc4random()%(max),arc4random()%(max));
    CGPoint endPt = CGPointMake(arc4random()%(max),arc4random()%(max));
    CABasicAnimation *transl1 = [CABasicAnimation animationWithKeyPath:@"position"];
    transl1.removedOnCompletion = FALSE;
    transl1.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    transl1.fromValue = [NSValue valueWithCGPoint:startPt];
    transl1.toValue = [NSValue valueWithCGPoint:endPt];
    transl1.duration = 2.0;
    transl1.fillMode = kCAFillModeForwards;
    transl1.beginTime = 0;

    //scale 1
    CABasicAnimation *scale1 = [CABasicAnimation 
                                animationWithKeyPath:@"transform.scale"];
    scale1.removedOnCompletion = FALSE;
    [scale1 setToValue:[NSNumber numberWithInt:3]];
    [scale1 setDuration:2.0f];
    scale1.fillMode = kCAFillModeForwards;
    scale1.beginTime = 0;

    //rotation1
    CABasicAnimation *rotation1 = [CABasicAnimation 
                                   animationWithKeyPath:@"transform.rotation.z"];
    rotation1.removedOnCompletion = FALSE;
    [rotation1 setFromValue:DegreesToNumber(0)];
    [rotation1 setToValue:DegreesToNumber(90)];
    //rotation1.repeatCount = HUGE_VALF;
    [rotation1 setDuration:2.0f];
    rotation1.fillMode = kCAFillModeForwards;
    rotation1.beginTime = 0;

    //group
    CAAnimationGroup* group = [CAAnimationGroup animation];
    [group setDuration: 6.0];
    group.removedOnCompletion = FALSE;
    group.fillMode = kCAFillModeForwards;
    [group setAnimations: [NSArray arrayWithObjects:scale1, transl1, rotation1, nil]];
    [myLayer addAnimation: group forKey:  nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:59:50.833

您的代码不会重复注释 10 次，而是立即启动 10 个动画。如果您的目标是在前一个动画结束后开始动画，您应该尝试使用`NSTimer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T00:10:24.520

您可以使用 NSTimer 在不同的时间触发每组动画，也可以在每组上设置 beginTime，代码如下：

```
group.beginTime = CACurrentMediaTime() + delay; 
```

对于动画，使用 beginTime 可以提供更准确的计时，因为 CA 在单独的线程上运行，并且不会像 NSTimers 那样在您的应用程序繁忙时停止。

# objective-c - 日程更新问题

> ID：10479950
> 
> 赞同：3
> 
> 时间：2012-05-07T09:48:19.093
> 
> 标签：objective-c, cocos2d-iphone, game-physics, schedule

这听起来很简单。我创建了一个方法，并在 init 方法中按如下方式调用它。

```
[self createNewSpr:ccp(s.width * 0.25,s.height-200)];
[self createNewSpr:ccp(s.width * 0.50,s.height-200)];
[self createNewSpr:ccp(s.width * 0.75,s.height-200)];
[self scheduleUpdate]; 
```

我在我的更新方法中定义了一个 for 循环，它对精灵施加高于世界重力的重力。只有最后一个调用受新引力影响，但第一个和第二个作用于世界引力。我不确定出了什么问题，但我怀疑它是 scheduleUpdate。请帮忙。

编辑：更新方法：

```
-(void) update: (ccTime) dt 
{
 int32 velocityIterations = 8;
 int32 positionIterations = 1; 
 world->Step(dt, velocityIterations, positionIterations);
 for (b2Body* b = world->GetBodyList(); b; b = b->GetNext())
   {
     if (b == sprite)
        {
         b->ApplyForce( b2Vec2(0.0,20*b->GetMass()),b->GetWorldCenter());
        }
   }
}

the createNewSpr:
-(void) createNewSpr:(CGPoint)pos {
//CGSize s = [CCDirector sharedDirector].winSize;
b2Vec2 startPos = [self toMeters:pos];
CGFloat linkHeight = 0.24;
CGFloat linkWidth = 0.1;

b2BodyDef bodyDef;
bodyDef.type = b2_dynamicBody;
bodyDef.position = startPos;
b2FixtureDef fixtureDef;
fixtureDef.density = 0.1;
b2PolygonShape polygonShape;
polygonShape.SetAsBox(linkWidth,linkHeight);
fixtureDef.shape = &polygonShape;

//first
b2Body* link = world->CreateBody( &bodyDef );
link->CreateFixture( &fixtureDef );

PhysicsSprite* segmentSprite = [PhysicsSprite spriteWithFile:@"sg.png"];
[self addChild:segmentSprite];
[segmentSprite setPhysicsBody:link];

b2RevoluteJointDef revoluteJointDef;
revoluteJointDef.localAnchorA.Set( 0,  linkHeight);
revoluteJointDef.localAnchorB.Set( 0, -linkHeight);

for (int i = 0; i < 10; i++) {

    b2Body* newLink = world->CreateBody( &bodyDef );
    newLink->CreateFixture( &fixtureDef );
    PhysicsSprite* segmentSprite = [PhysicsSprite spriteWithFile:@"sg.png"];
    [self addChild:segmentSprite];
    [segmentSprite setPhysicsBody:link];

    revoluteJointDef.bodyA = link;
    revoluteJointDef.bodyB = newLink;
    world->CreateJoint( &revoluteJointDef );

    link = newLink;//next iteration
}

PhysicsSprite* circleBodySprite = [PhysicsSprite spriteWithFile:@"cb.png"];
[self addChild:circleBodySprite z:1];

b2CircleShape circleShape;
circleShape.m_radius = circleBodySprite.contentSize.width/2 / PTM_RATIO;
fixtureDef.shape = &circleShape;
b2Body* chainBase =world->CreateBody( &bodyDef );
chainBase->CreateFixture( &fixtureDef );
[circleBodySprite setPhysicsBody:chainBase];
sprite = chainBase;

revoluteJointDef.bodyA = link;
revoluteJointDef.bodyB = chainBase;

revoluteJointDef.localAnchorA.Set(0,linkWidth);

revoluteJointDef.localAnchorB.Set(0,linkWidth);
world->CreateJoint( &revoluteJointDef );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:16:59.313

问题在于`createNewSpr`方法...

你已经分配`sprite`给一个身体......所以当你三次调用这个方法时，`sprite`只指第三个对象......

当您在`update`方法中进行比较时，它只是将重力放在第三个对象上......

希望这可以帮助.. ：）

# packaging - 访问子包声明

> ID：10479955
> 
> 赞同：3
> 
> 时间：2012-05-07T09:48:45.623
> 
> 标签：packaging, ada

是否可以从父包访问子包声明？

```
-- parent.ads
package Parent is
   procedure F(A : Child_Type);
end Parent;

-- parent-child.ads
package Parent.Child is
   type Child_Type is (A, B, C);
end Parent.Child; 
```

嵌套版本工作正常：

```
-- parent.ads
package Parent is
   package Child is
      type Child_Type is (A, B, C);
   end Child;
   use Child;

   procedure F(A : Child_Type);
end Parent; 
```

也许还有另一种方法可以做到这一点，因为我认为使用子包是不可能的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:09:34.710

一般来说，没有；第二个示例有效，因为 的规范在中声明`Child`时是已知的。根据您[之前](https://stackoverflow.com/q/10434117/230513)关于此主题的问题，您可能想要一种干净的方法来分离通用规范的多个实现。这个相关[的问答](https://stackoverflow.com/q/10408459/230513)讨论了两种方法：一种使用继承，另一种在编译时使用基于库的机制。`F``Parent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:38:56.540

我认为您正在寻找的是一个`private`子包，这通常与您的嵌套示例的行为方式相同，但您无法在其父主体之外访问它。

所以 ：

```
private package Parent.Child is
   type Child_Type is (A,B,C);
end Parent.Child; 
```

...

```
package Parent is
   procedure F;
end Parent; 
```

...

```
with Ada.Text_Io;
with Parent.Child;
package body Parent is
   procedure F is
   begin
      for A in Parent.Child.Child_Type'Range loop
         Ada.Text_Io.Put_Line (Parent.Child.Child_Type'Image (A));
      end loop;
   end F;
end Parent; 
```

可以编译，但请记住，如果您在父规范中使用孩子（就像您使用参数 to 一样`F`），您将获得循环依赖，因为孩子需要他们的父母首先存在！

因此，这实际上取决于您想向父母*和孩子公开**什么，**这*是否是您问题的实际解决方案。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:34:15.330

Julio，在规范文件 (mytypes.ads) 中声明的类型

```
package Mytypes is

   type Fruit is (Apple, Pear, Pineapple, Banana, Poison_Apple);
   subtype Safe_Fruit is Fruit range Apple .. Banana;

end Mytypes; 
```

...在其他几个中使用它：

```
with Mytypes;
package Parent is

   function Permission (F : in Mytypes.Fruit) return Boolean;

end Parent; 
```

...

```
package body Parent is

   function Permission (F : in Mytypes.Fruit) return Boolean is
   begin
      return F in Mytypes.Safe_Fruit;
   end Permission;

end Parent; 
```

...

```
package Parent.Child is

   procedure Eat (F : in Mytypes.Fruit);

end Parent.Child; 
```

...

```
with Ada.Text_Io;
package body Parent.Child is

   procedure Eat (F : in Mytypes.Fruit) is
   begin
      if Parent.Permission (F) then
         Ada.Text_Io.Put_Line ("Eating " & Mytypes.Fruit'Image (F));
      else
         Ada.Text_Io.Put_Line ("Forbidden to eat " & Mytypes.Fruit'Image (F));
      end if;
   end Eat;

end Parent.Child; 
```

...

```
with Mytypes;
with Parent.Child;

procedure Main is

begin

   for I in Mytypes.Fruit'Range loop
      Parent.Child.Eat (I);
   end loop;

end Main; 
```

它编译：

```
$ gnatmake main.adb
gcc-4.4 -c parent-child.adb
gnatbind -x main.ali
gnatlink main.ali 
```

它运行：

```
$ ./main
Eating APPLE
Eating PEAR
Eating PINEAPPLE
Eating BANANA
Forbidden to eat POISON_APPLE 
```

这是你试过的吗？*

# google-app-engine - 如何修复此 TypeError？

> ID：10479956
> 
> 赞同：3
> 
> 时间：2012-05-07T09:48:58.457
> 
> 标签：google-app-engine

我是 python 和 Google App Engine 的新手。我正在尝试从 Nick Johnson 博客重构这段代码以使用 webapp2 和 python 2.7。 [http://blog.notdot.net/2009/10/Blogging-on-App-Engine-part-1-Static-serving](http://blog.notdot.net/2009/10/Blogging-on-App-Engine-part-1-Static-serving)

无论如何，当我运行下面的代码时，我得到了这个错误。

> TypeError: get() 正好接受 2 个参数（1 个给定）

我认为这可能与未定义路径变量有关，但我不知道如何定义它。

```
import webapp2
from google.appengine.ext import webapp
from google.appengine.ext import db

class StaticContent(db.Model):
    body = db.BlobProperty()
    content_type = db.StringProperty(required=True)
    last_modified = db.DateTimeProperty(required=True, auto_now=True)

def get(path):
    return StaticContent.get_by_key_name(path)

def set(path, body, content_type, **kwargs):
    content = StaticContent(
        key_name=path,
        body=body,
        content_type=content_type,
        **kwargs)
    content.put()
    return content

class MainHandler(webapp2.RequestHandler):

    def get(self, path):
        content = get(path)
        if not content:
            self.error(404)
            return
app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:52:00.327

引发错误是因为类的`get`方法`MainHandler`需要一个`path`参数。
您应该在路由定义中向正则表达式添加*分组*`path`，以将参数传递给`get`方法：

```
app = webapp2.WSGIApplication([('(/.*)', MainHandler)],
                              debug=True) 
```

# java - 流已打开 - 异常

> ID：10479957
> 
> 赞同：-1
> 
> 时间：2012-05-07T09:49:12.363
> 
> 标签：java, blackberry

```
private static void fileChunking() throws IOException {
    InputStream is = null;
    OutputStream os = null;
    byte[] buffer;
    int maxBufferSize = 102400;
    int bytesRead, bytesAvailable, bufferSize;
    int responsecode = 0;
    String responsemessage = null;
    bufferSize = Math.min(content.length, maxBufferSize);
    buffer = new byte[bufferSize];
    bytesRead = is.read(buffer, 0, bufferSize);
    while (bytesRead > 0) {
        os.write(buffer, 0, bufferSize);
        bytesAvailable = is.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        bytesRead = is.read(buffer, 0, bufferSize);
    }

    is.close();
    os.flush();
    responsecode = con.getResponseCode();
    responsemessage = con.getResponseMessage();
    System.out.print(responsemessage);

} 
```

代码在读取 bytesRead = is.read(buffer, 0, bufferSize); 时抛出异常 'Stream already open'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:03:51.727

您可能已经`getReader()`在其他地方调用过与`getInputStream()`. 很难从这段代码中说出来，而且这个答案有点不太可能。

您更有可能从 servlet 字段或某个公共变量中获取 InputStream，并且有两个请求进行读取。

# php - 如何使用 PHP cURL 发布 html 多部分表单数据

> ID：10479958
> 
> 赞同：1
> 
> 时间：2012-05-07T09:49:17.007
> 
> 标签：php, html, post, curl

请帮助我使用 PHP cURL 发布以下多部分表单数据

```
url = "http://smssheep.com/sendsms.php";
reffer="http://smssheep.com/";

POSTDATA =-----------------------------187161971819895
Content-Disposition: form-data; name="country"

0091
-----------------------------187161971819895
Content-Disposition: form-data; name="no"

00918714349616
-----------------------------187161971819895
Content-Disposition: form-data; name="msg"

hggggggggggggggggggggggggggggggggggggggggg
-----------------------------187161971819895
Content-Disposition: form-data; name="x_form_secret"

bqu9hv488bxu
-----------------------------187161971819895
Content-Disposition: form-data; name="saveForm"

SEND
-----------------------------187161971819895
Content-Disposition: form-data; name="comment"

-----------------------------187161971819895
Content-Disposition: form-data; name="idstamp"

Ds11xxs27YzNm/r/vf I rmQbz2TS1yaMNXeuHD6ozI=
-----------------------------187161971819895-- 
```

任何帮助都会是很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:59:13.303

[它的工作原理与 PHP 手册中的解释](http://php.net/manual/function.curl-setopt.php)完全相同：

```
$data = 'url = "http://smssheep.com/sendsms.php";
reffer="http://smssheep.com/";

POSTDATA =-----------------------------187161971819895
Content-Disposition: form-data; name="country"

...

Ds11xxs27YzNm/r/vf I rmQbz2TS1yaMNXeuHD6ozI=
-----------------------------187161971819895--'

curl_setopt($ch, CURLOPT_POSTFIELDS, $data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:56:07.550

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

```
CURLOPT_POSTFIELDS 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T11:59:52.807

像这样

```
$url = "http://smssheep.com/sendsms.php";
$reffer="http://smssheep.com/";
$data = array(
        'country' => '0091',
        'no' => '00918714349616',
        'msg' => 'hggggggggggggggggggggggggggggggggggggggggg'       
        );

$data2 = http_build_query($data);

curl_setopt ($ch, CURLOPT_URL,$url); 
curl_setopt ($ch, CURLOPT_POST, 1); 
curl_setopt ($ch, CURLOPT_POSTFIELDS, $data2); 
curl_setopt ($ch, CURLOPT_REFERER, $reffer); 
```

注意：数组中必须是所有post数据。

# jboss - 一个简单的 JMX 监控工具，也可以保存数据

> ID：10479961
> 
> 赞同：0
> 
> 时间：2012-05-07T09:49:39.050
> 
> 标签：jboss, monitoring, jmx, visualvm

我使用 Java Visual VM 通过 JMX 监控我的 App Server (JBoss)。问题是我只能看到实时数据。

我想永久捕获信息，以便随时查看历史记录。即使 Java Visual VM 已重新启动。

问题：有没有办法让 Java Visual VM 定期记录统计信息。是否有任何其他工具可以记录 JMX 统计信息？

我尝试了一些像 Zabbix 这样的东西，但它对于这个需求来说太复杂了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:04:27.420

在我看来，[JavaMelody](https://github.com/javamelody/javamelody/wiki)适合您的需要。
数据被持久化。随着时间的推移会有图形（使用的内存、cpu、http会话、活动线程......）。
它易于安装（无需在服务器上安装代理）。安装后它是自动化的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:11:40.820

有一个非常酷的工具叫做 RHQ 用于完整的 JBoss 监控：[http ://rhq-project.org/display/RHQ/Home](http://rhq-project.org/display/RHQ/Home)

# php - Imagick透明的兼容问题？

> ID：10479962
> 
> 赞同：2
> 
> 时间：2012-05-07T09:49:42.153
> 
> 标签：php, image, imagemagick, transparent

我的本地版本为 ImageMagick 6.7.3-10 (PHP 5.2.10)，服务器端版本为 ImageMagick 6.5.4-7 (PHP 5.3.9)。碰巧服务器端没有生成透明背景，但其他颜色仍然有效。然而，透明背景下本地效果很好。无论如何我可以解决以便在服务器端使用透明背景？

```
$canvas  = new Imagick();
$canvas->newImage( $size, $size, new ImagickPixel( 'transparent' ) ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:25:08.183

对我来说，“无”或“透明”都不起作用，但“rgba(250,15,150,0)”用 Imagick 真正稀疏的文档结束了我长期的痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T11:20:39.587

您是否尝试过不透明而不是透明？

Stackoverflow 的另一个答案：[在构建 ImagickPixel 时设置 Alpha 通道](https://stackoverflow.com/questions/10103763/setting-an-alpha-channel-when-constructing-an-imagickpixel)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T22:23:58.407

确保将结果保存为实际支持透明度的格式……因此不是 JPG，而是 GIF 或 PNG……听起来很简单，但经常被遗忘（尤其是在未明确定义时）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-29T23:51:07.660

我在本地开发的代码中遇到了同样的问题，但在透明像素的生产环境中却没有。我尝试了上述所有解决方案，但透明度根本不起作用。最后我换`$im->setImageFormat( 'png24' );`了`$im->setImageFormat( 'png' );`，一切又开始工作了。“png24”格式必须是后来添加的。

# asp.net - ASP.NET：如何在多行上重新排列 GridView 单元格

> ID：10479963
> 
> 赞同：3
> 
> 时间：2012-05-07T09:49:42.460
> 
> 标签：asp.net, gridview

我有一个应用程序，其中包含一个包含两列的表：`messageid`和`messageDesc`. 列内`messageDesc`有消息说明。当我尝试将 GridView 绑定到`messageDesc`列时，它将整个列呈现在一行上，要求用户水平滚动以查看完整的文本。我想通过多行描述来防止这种情况。我该怎么做呢？

我曾尝试使用 ItemStyle 属性，但它不起作用。请提出解决方案。除此之外，我无法更改数据库消息内容。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:52:46.487

Warp label insdie div 元素，然后尝试一下，这肯定对您有用

```
 <asp:TemplateField> 
        <ItemTemplate>
             <div style="width:100px;">
                 <asp:Label ID="Label2" runat="server" Text="<%# Eval("description") %>"></asp:Label>
             </div>
         </ItemTemplate>
     </asp:TemplateField> 
```

或者

```
<ItemStyle Wrap="true" Width="100px" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:55:25.463

您可以使用模板字段而不是绑定字段在文本框中显示数据。见下文，文本框代码。您的 TemplateField 将如下所示：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:TextBox ID="TextBox1" runat="server" ReadOnly="True" Text='<%# Eval("MessageDesc") %>'
            TextMode="MultiLine"></asp:TextBox>
    </ItemTemplate>
</asp:TemplateField> 
```

ReadOnly 设置可防止用户在仍为他们启用数据的同时编辑数据。在编辑模式下，您当然会将 ReadOnly 设置为 false。

# android - Activity中如何销毁之前的activity？

> ID：10479965
> 
> 赞同：1
> 
> 时间：2012-05-07T09:49:51.603
> 
> 标签：android, android-activity, destroy, activity-finish

我有四个活动，即A，B，C和D。A启动B，B启动C，C启动D。当C启动D时，我想根据情况销毁活动B（逻辑将保留在活动C），这样当我从D返回时，它将遵循D->C->A路径。所以我想从 C 中破坏活动 B。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:11:45.703

当您调用 Activity C 时完成 Activity B 取决于您的逻辑。例如

```
if(true){
Intent in = new Intent(B.this,c.class);
startActivity(c);
}
else
{
Intent in = new Intent(B.this,c.class);
startActivity(c);
finish();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:58:29.030

根据您想要的逻辑，从**C**返回时只需调用`finish();`活动**B** `onActivityResult`

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:56:43.520

完成活动（请求代码）；

这个方法可以帮助你..

要做的是使用来自 B 的一些**请求代码**启动活动 C ... 并相应地使用此请求代码完成活动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:03:47.233

好的，那么您可以调用 startActivityForResult(in,5); 启动 Activity C. 并在 Activity B 中实现覆盖方法，如

```
 @Override 
   protected void onActivityResult(int requestCode, int resultCode, Intent intent)       {                
super.onActivityResult(requestCode, resultCode, intent); 
    if(resultCode==0)
    { 
      finish(); 
    }
    else
   {

    } 
    } 
```

并在调用 Activity D 时在 Activity 中设置结果代码

```
Intent backintent = getIntent(); 
  setResult(0); 
  Intent in = new Intent(C.this,D.class); 
  startActivity(in); 
```

而已....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T10:02:15.437

我认为您可以做的是，您可以在每个课程中注册一个广播，并且无论何时您想要完成 sendbroadcast 并完成该活动。

```
 // REGISTER IN ONCREATE
        BroadcastReceiver form_filled = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String received_action = intent.getAction();

                if (received_action.equals("finish_a")) {
                    finish();
                }
            }
        };
        registerReceiver(form_filled, new IntentFilter("finish_a"));

        // THIS YOU HAVE TO DO WHEN YOU WANT TO FINISH
        Intent temp_intent = new Intent();
        temp_intent.setAction("finish_a");
        sendBroadcast(temp_intent); 
```**

# .net - 提供的 URI 方案“http”无效；预期“https”

> ID：10479966
> 
> 赞同：0
> 
> 时间：2012-05-07T09:49:56.117
> 
> 标签：.net, wcf, windows-services

我有一个win服务配置文件如下

```
 <system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_webservice" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="102400000" maxBufferPoolSize="102400000" maxReceivedMessageSize="102400000"
      messageEncoding="Mtom" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="102400000"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Basic" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://systemname/ProxyService/Service.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_webservice"
    contract="ABC.webservice" name="BasicHttpBinding_webservice" />
</client> 
```

我收到以下错误。提供的 URI 方案“http”无效；预期的“https”。参数名称：通过
我应该更改绑定或安全设置吗？顺便说一句，SSL 证书被禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:17:31.007

看起来您已经在安全设置中配置了 UserNameOverTransport --> 在 WCF 中，这仅允许使用 HTTPS 绑定，因为使用此设置以明文形式传输密码。

安全性是一个很好的功能，在开发时可能会有点讨厌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:28:56.677

同意格奥尔格。如果您有正当理由发送不安全的用户/密码，您可以通过 ClearUsernameBinding 在消息级别执行此操作：[http ://webservices20.blogspot.com/2008/11/introducing-wcf-clearusernamebinding.html](http://webservices20.blogspot.com/2008/11/introducing-wcf-clearusernamebinding.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T05:36:44.160

我遇到了同样的错误并用于`set as start project`该`.web`项目，现在它工作正常。

# algorithm - 在 O(1) 中查找插入删除和 getMin 的数据设计问题

> ID：10479973
> 
> 赞同：0
> 
> 时间：2012-05-07T09:50:09.647
> 
> 标签：algorithm, data-structures, hash

正如标题中所说，我需要定义一个数据结构，它只需要 O(1) 时间来插入删除和 getMIn 时间......没有空间限制......

我已经搜索过相同的内容，而我发现的只是在 O(1) 时间内进行插入和删除......即使是堆栈也是如此。我在堆栈溢出中看到了以前的帖子，他们所说的都是散列......

通过我在 O(1) 时间内对 getMIn 的分析，我们可以在 O(1) 时间内使用堆数据结构
进行插入和删除，我们有堆栈......

所以为了实现我的目标，我认为我需要围绕堆数据结构和堆栈进行调整......我将如何在这种情况下添加散列技术......

如果我使用哈希表，那么我的哈希函数应该是什么样子如何在哈希方面分析情况......任何好的参考将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:31:00.460

如果您最初假设插入和删除是 O(1) 复杂性（如果您只想插入顶部并从顶部删除/弹出，那么堆栈可以正常工作），那么为了让 getMin 返回最小值在恒定时间内，您需要以某种方式存储最小值。如果您只有一个成员变量来跟踪 min 那么如果将其从堆栈中删除会发生什么？您将需要下一个最小值，或相对于堆栈中剩余内容的最小值。为此，您可以让堆栈中的元素包含它认为的最小值。堆栈在代码中由链表表示，因此链表中节点的结构如下所示：

```
struct Node
{
  int value;
  int min;
  Node *next;
} 
```

如果您查看示例列表：7->3->1->5->2。让我们看看这将如何构建。首先将值 2 推入（到空堆栈），这是最小值，因为它是第一个数字，跟踪它并在构造它时将其添加到节点：{2, 2}。然后你将 5 压入堆栈，5>2 所以最小值是相同的压入 {5,2}，现在你有 {5,2}->{2,2}。然后你推入 1，1<2 所以新的最小值是 1，推 {1, 1}，现在是 {1,1}->{5,2}->{2,2} 等等。到最后你有：

{7,1}->{3,1}->{1,1}->{5,2}->{2,2}

在这个实现中，如果你弹出 7、3 和 1，你的新最小值应该是 2。而且您的所有操作仍处于恒定时间，因为您只是向节点添加了一个比较和另一个值。（您可以使用 C++ 的 peek() 之类的东西，或者只使用指向列表头部的指针来查看堆栈顶部并在那里获取最小值，它会在恒定时间内为您提供堆栈的最小值）。

这个实现的一个折衷是你的节点中有一个额外的整数，如果你在一个非常大的列表中只有一两分钟，那就是浪费内存。如果是这种情况，那么您可以在单独的堆栈中跟踪分钟，只需将要删除的节点的值与该列表的顶部进行比较，如果匹配，则将其从两个列表中删除。要跟踪的事情更多，因此这实际上取决于情况。

免责声明：这是我在这个论坛上的第一篇文章，所以如果它有点令人费解或罗嗦，我很抱歉。我也不是说这是“一个真实的答案”，而是我认为最简单且符合问题要求的答案。总是有权衡，根据情况需要不同的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T21:02:21.027

这是一个设计问题，这意味着他们想看看你能多快地扩充现有的数据结构。

从你知道的开始：

*   O(1)更新，即插入/删除，在尖叫`hashtable`
*   O(1) getMin 也在尖叫哈希表，但这次是有序的。

在这里，我提出了一种方法。你可能会找到你喜欢的其他东西。

*   创建一个HashMap，调用它`main`，存储所有元素的地方
*   创建一个 LinkedHashMap（java 有一个），调用它`mins`来跟踪最小值。
*   第一次将元素插入到`main`中时，也将其添加到`mins`。
*   对于每个后续插入，如果新值小于地图头部的值`mins`，则将其添加到地图中，与`addToHead`.
*   当您从 中删除一个元素时`main`，也将其从 中删除`mins`。2*O(1) = O(1)
*   请注意，这`getMin`只是偷看而不删除。所以只是偷看的头`mins`。

编辑：

[摊销算法](http://en.wikipedia.org/wiki/Amortized_analysis)：

（感谢@Andrew Tomazos - Fathomling，让我们玩得更开心！）

我们都知道插入哈希表的成本是 O(1)。但实际上，如果您曾经构建过哈希表，您就会知道必须不断将表的大小增加一倍以避免溢出。每次将包含 n 个元素的表的大小加倍时，都必须重新插入元素，然后添加新元素。通过这种分析，将元素添加到哈希表的最坏情况成本似乎是 O(n)。那么为什么我们说它是 O(1) 呢？因为并非所有元素都采取最坏的情况！实际上，只有发生加倍的元素才会出现最坏情况。因此，插入 n 个元素会`n+summation(2^i where i=0 to lg(n-1))`得到`n+2n = O(n)`这样的结果`O(n)/n = O(1)`！

为什么不对linkedHashMap 应用同样的原则呢？无论如何，您必须重新加载所有元素！因此，每次加倍时，也要以分钟为`main`单位放入所有元素，并将它们排序为. 然后对于所有其他情况，按上述方法进行（项目符号步骤）。`main``mins`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:04:42.610

哈希表让您在 O(1) 中插入和删除（堆栈没有，因为堆栈中不能有孔）。但是您也不能在 O(1) 中使用 getMin ，因为对元素进行排序不能比 O(n*Log(n)) 快（这是一个[定理](http://en.wikipedia.org/wiki/Comparison_sort#Lower_bound_for_the_average_number_of_comparisons)），这意味着每个元素的 O(Log(n))元素。

您可以保留一个指向最小值的指针以使 getMin 在 O(1) 中。这个指针可以很容易地为插入而更新，但不能为 min 的删除而更新。但取决于您使用删除的频率，这可能是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:10:47.263

严格来说，您所说的问题可能是不可能的，但请考虑以下事项：

给定一个类型 T 对该类型的所有可能元素进行枚举，使得当 T(i) < T(j) 时值 i 小于值 j。（即按顺序编号 T 类型的所有可能值）

创建一个该大小的数组。

制作数组的元素：

```
struct PT
{
   T t;
   PT* next_higher;
   PT* prev_lower;
} 
```

将元素插入和删除元素到维护双链表的数组中（按索引顺序，因此按排序顺序）存储

这将为您提供恒定的 getMin 和删除。

对于插入，您需要在恒定时间内找到数组中的下一个元素，所以我会使用一种基数搜索。

如果数组的大小为 2^x，则维护 x 个“跳过”数组，其中数组 i 的元素 j 指向要索引的主数组的最近元素 (j << i)。

然后，这将始终需要固定 x 数量的查找来更新和搜索，因此这将提供恒定的时间插入。

这使用指数空间，但这是问题要求所允许的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T10:21:53.240

您可以使用**trie**。trie 对于插入、删除和 getmin 都有 O(L) 复杂性，其中 L 是您要查找的字符串（或其他）的长度。它相对于 n（元素的数量）具有恒定的复杂性。

但是，它需要大量的内存。当他们强调“没有空间限制”时，他们可能正在考虑尝试。:D

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-08T10:56:56.463

在您的问题陈述中“在 O(1) 时间内插入和删除我们有堆栈......”所以我假设在这种情况下删除 = pop()，使用另一个堆栈来跟踪 min

algo: Stack 1 -- 普通栈；堆栈 2 -- 最小堆栈

## 插入

推入堆栈 1。如果堆栈 2 为空或新项目 < stack2.peek()，则也推入堆栈 2

目标：在任何时候 stack2.peek() 应该给你最小 O(1)

## 删除

从堆栈 1 中弹出（）。如果弹出的元素等于 stack2.peek（），则从堆栈 2 中弹出（）

# iphone - UIButton setTitleColor 和 setImage 不起作用

> ID：10479977
> 
> 赞同：7
> 
> 时间：2012-05-07T09:50:24.507
> 
> 标签：iphone, uitableview, uibutton

我正在为我的 iPhone 项目使用 StoryBoard 功能。在情节提要中，我有一个使用原型单元格的带有表格视图的视图控制器。在原型单元内，我有一个 UIButton（圆角矩形）连接到一个子类 UIButton 类。tableview 从数组中获取数据，数据在 cellForRowAtIndexPath 中打印出来。

在 cellForRowAtIndexPath 中，我有条件地修改了单元格的外观。这是我开始遇到问题的时候。我能够成功更改按钮的文本。但是，如果我尝试更改按钮的图像，请使用：

```
[cell.myButton setImage:[UIImage imageNamed:@"mynewimage.png"] forState:UIControlStateNormal]; 
```

图像已更改，但文本消失。

如果我尝试更改按钮的文本颜色，请使用：

```
[cell.myButton setTitleColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:.77] forState:UIControlStateNormal] 
```

什么都没有发生。颜色保持不变（除非我也尝试更改图像，在这种情况下它会完全消失）。

我感觉到我在这里做了一些根本错误的事情——你有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T09:59:55.863

利用

```
- (void)setBackgroundImage:(UIImage *)image forState:(UIControlState)state; 
```

用左边的文字改变图像

利用

```
btn.titleLabel.textColor = yourcolor; 
```

更改文本颜色

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T09:56:16.473

如下定义 myButton 并检查。这可能是您的代码错误。代码是：

```
myButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

这是新编辑的部分：

```
[myButton setBackgroundImage:yourimage forState:UIControlStateNormal];
    [myButton setTitleColor:yourcolor forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T12:09:13.387

这是为自定义按钮设置不同属性的方法...您还可以在此处找到 setBackgroudimage 和 setTitleColor 属性...

```
 UIButtin  *myButton = [UIButton buttonWithType:UIButtonTypeCustom];
   [myButton setFrame:CGRectMake(165, 205, 65, 40)];
   [myButton setTitleColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:.77]  forState:UIControlStateNormal];
   [myButton setTitle:@"Hi....." forState:UIControlStateNormal];
   [myButton addTarget:self action:@selector(btnClicked:)     forControlEvents:UIControlEventTouchUpInside];
   [myButton setBackgroundImage:[UIImage imageNamed:@"mynewimage.png"] forState:UIControlStateNormal];
   [cell  addSubview:myButton]; 
```

感谢你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T10:32:50.287

您的文本消失了，因为您已将按钮正面的图像设置为按钮主图像。

```
[cell.myButton setImage:[UIImage imageNamed:@"mynewimage.png"] forState:UIControlStateNormal]; 
```

您需要设置按钮背景图像，以便您的文本可见，因为图像将绘制在 UIButton 上下文的后侧。

所以只需将上面的代码行替换为：

```
[cell.myButton setBackgroundImage:[UIImage imageNamed:@"mynewimage.png"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T10:13:15.183

我想你想要的是改变你的按钮背景：

```
[cell.myButton setBackgroundImage:[UIImage imageNamed:@"mynewimage.png"] forState:UIControlStateNormal]; 
```

# javascript - Facebook Like 按钮无法为页面点赞

> ID：10479979
> 
> 赞同：0
> 
> 时间：2012-05-07T09:50:27.120
> 
> 标签：javascript, html, facebook, facebook-like

在[http://www.btandthetenants.com](http://www.btandthetenants.com)上，除了照片部分，每个页面都可以被点赞。我使用 AJAX 来更改当前页面的点赞按钮，并且该脚本在包括此页面在内的每个页面上都能完美执行。但是，如果您尝试在此页面上点赞，它将立即撤消您的操作。头部打开图的代码（如果是 y，则生成 HTML）是：

```
<meta property="og:site_name"            content="Brandon Taylor & The Tenants" />
<meta property="fb:admins"               content="100000142903767,1290840046" />
<meta property="fb:app_id"               content="162010397258435" />
<meta property="og:url"                  content="http://www.btandthetenants.com/photos" />
<meta property="og:title"                content='Brandon Taylor & The Tenants | Photos' />
<meta property="og:type"                 content="band" />
<meta property="og:image"                content="http://www.btandthetenants.com/img/gi.png" />
<meta property="og:description"          content="See all of Brandon Taylor & The Tenants' pictures streamed straight from their Facebook page." /> 
```

以及动态like按钮的代码：

```
<div id="fb-like"><div class="fb-like fb_edge_widget_with_comment fb_iframe_widget" data-layout="box_count" data-send="false" data-width="35" data-show-faces="false" data-font="arial" data-href="http://www.btandthetenants.com/photos"><span style="height: 62px; width: 45px; "><iframe id="f1603dc7e8" name="f11a7f8ffc" scrolling="no" style="overflow: hidden; height: 62px; width: 45px; border: none; " title="Like this content on Facebook." class="fb_ltr" src="https://www.facebook.com/plugins/like.php?api_key=162010397258435&channel_url=http://static.ak.facebook.com/connect/xd_arbiter.php?version=5#cb=f1d41deae&origin=http://www.btandthetenants.com/f3e64780fc&domain=www.btandthetenants.com&relation=parent.parent&extended_social_context=false&font=arial&href=http://www.btandthetenants.com/photos&layout=box_count&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=false&width=55"></iframe></span></div></div> 
```

我真的很难过。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:07:52.487

这是我尝试单击“赞”按钮时页面返回的内容：

```
for (;;);{"__ar":1,"payload":{"requires_login":false,"success":false,"already_connected":false,"is_admin":false,"show_error":true,"error_info":{"brief":"Cannot see this page","full":"This page is either disabled or not visible to the current user.","errorUri":"\/connect\/connect_to_node_error.php?title=Cannot+see+this+page&body=This+page+is+either+disabled+or+not+visible+to+the+current+user.&hash=AQCKE3RqZ24PrqLg"}}} 
```

这似乎是一个已在[此处](http://bugs.developers.facebook.net/show_bug.cgi?id=19916)报告的错误。另请查看报告相同问题的[this question 。](https://stackoverflow.com/questions/7288770/like-button-error-this-page-is-either-disabled-or-not-visible-to-the-current-us)

# delphi - delphi 7，安装时隐藏已安装的组件

> ID：10479981
> 
> 赞同：3
> 
> 时间：2012-05-07T09:50:27.380
> 
> 标签：delphi, components, delphi-7, custom-component

我正在开发一个`delphi 7`用于快速安装的组件，而无需触摸`IDE`我正在根据 [Marjan Venema](https://stackoverflow.com/a/6813090/1051198)的这个 SO 答案制作一个简单的安装程序。

```
 procedure TForm1.Button1Click(Sender: TObject);
    var
      sDelphi7PackageName : string;
      sDelphi7Path,fileSource,fileDest : string;
      sDelphi7packBPL,sDelphi7PathMenuBPL  : string;
    begin
       sDelphi7Path:=ReadRegistryValues('\Software\Borland\Delphi\7.0',FALSE,'RootDir',1,TRUE);{<-- returns the 'C:\Program Files\Borland\Delphi7' }

      {#1\. Install .bpl}
      sDelphi7BPL:=sDelphi7Path+'\Projects\Bpl\Pack.bpl';
      WriteValueToRegisTry('\Software\Borland\Delphi\7.0\Known   Packages',FALSE,sDelphi7BPL,'Delphi 7 compo Bpl File'); {<-- writes to the registry}

      fileSource:=ExtractFilePath(Application.ExeName)+'\Packages\comPack.bpl';
      fileDest:=sDelphi7BPL;
      CopyFile(PChar(fileSource), PChar(fileDest), False);
      end; 
```

这很好用！[在此处输入图像描述][2] `C:\Program Files\Borland\Delphi7\Projects\Bpl\Pack.bpl`。但是组件安装了id`hidden`

谁能告诉我如何`unhide`安装`component`？

**编辑**

可能有用：

1）我已经有了`bpl`组件的文件，所以我直接复制到`delphi 7`目录`C:\Program Files\Borland\Delphi7\Projects\Bpl`并修改注册表`HKEY_CURRENT_USER\Software\Borland\Delphi\7.0\Known Packages`。

2）`register`组件的过程

```
 implementation
 procedure Register;
  begin
      RegisterComponents('comp', [Tcomp]);
  end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T11:28:53.720

在注册表中`HKEY_CURRENT_USER\Software\Borland\Delphi\7.0\Palette`，找到名为的条目`'comp.Hidden'`并对其进行编辑以删除组件的类名（或完全删除该条目）。

# ios - UITableView 出现空单元格

> ID：10479985
> 
> 赞同：4
> 
> 时间：2012-05-07T09:50:55.020
> 
> 标签：ios, objective-c, xcode, uitableview, cocoa-touch

我在显示时遇到问题`UITableView`：某些单元格是空的，单元格中的内容只有在滚动后才可见（如果空单元格滚动出屏幕然后返回）。我不明白可能是什么问题。

**这是我的代码：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self updateFilesList];
    [tableView reloadData];
}

- (void) viewDidAppear:(BOOL)animated
{
    animated = YES;
    [self updateFilesList];
    [self.tableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    [self.filesList retain];

    NSString *title = [self.filesList objectAtIndex:indexPath.row];
    title = [title stringByDeletingPathExtension];
    title = [title lastPathComponent];
    if (title.length >33) {
        title = [title substringFromIndex:33];
    }

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    [cell.imageView setImage:[UIImage imageNamed:@"oie_png-1.png"]];
    cell.textLabel.text = title;

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    return cell;
} 
```

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T09:53:34.520

好吧，您拥有在创建单元之前发生的单元自定义代码。

像这样改变它：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    [self.filesList retain];

    NSString *title = [self.filesList objectAtIndex:indexPath.row];
    title = [title stringByDeletingPathExtension];
    title = [title lastPathComponent];
    if (title.length >33) {
        title = [title substringFromIndex:33];
    }

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // This part creates the cell for the firs time
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // This part customizes the cells
    [cell.imageView setImage:[UIImage imageNamed:@"oie_png-1.png"]];
    cell.textLabel.text = title;

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T09:54:29.373

问题是你让

```
[cell.imageView setImage:[UIImage imageNamed:@"oie_png-1.png"]];
cell.textLabel.text = title; 
```

前

```
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
} 
```

更改顺序。发生的事情是，第一次执行表视图时，您从未在分配之前执行标题。当您重用单元格时，它会起作用，因为单元格！= nil

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:54:46.280

你需要把这些行

```
[cell.imageView setImage:[UIImage imageNamed:@"oie_png-1.png"]];
cell.textLabel.text = title; 
```

条件后`if(){...}`。

在第一遍中，单元格为零。将这些行放在`if`什么都不做之前。这就是您看到空单元格的原因。

*一个简单的问题*

你为什么打电话`[self.filesList retain]`？

希望能帮助到你。

# winforms - 如何使用 c# 将数据动态绑定到 Word Dcoument

> ID：10479990
> 
> 赞同：1
> 
> 时间：2012-05-07T09:51:18.203
> 
> 标签：winforms, c#-4.0

我遇到了将数据绑定到 Word 文档作为动态的问题。我有一个 Windows 应用程序，我将数据从数据库获取到数据集，当我单击按钮时，数据集值将绑定到 Word 文档.请帮帮我，如何才能完成这项任务请..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:41:34.400

您可能想看看这些 MSDN 文章 -

1.  [http://msdn.microsoft.com/en-us/library/cc668208.aspx](http://msdn.microsoft.com/en-us/library/cc668208.aspx)
2.  [http://msdn.microsoft.com/en-us/library/wfk2wb04.aspx](http://msdn.microsoft.com/en-us/library/wfk2wb04.aspx)

# c# - 将 DateTime 转换为 Swatch Internet 时间（节拍时间）

> ID：10479991
> 
> 赞同：2
> 
> 时间：2012-05-07T09:51:18.423
> 
> 标签：c#, .net, datetime, datetime-conversion

我正在寻找在 C# 中将 DateTime 转换为 Swatch 互联网时间。我什么也没找到。如何将 DateTime 转换为节拍？

编辑：找到解决方案，将尽快将其发布为答案：

```
var time = DateTime.Now;  //get the current time
var utc1 = time.ToUniversalTime().AddHours(1); //convert the given DateTime to universal time and add one hour (internet time is based on UTC+1)
var beats = utc1.TimeOfDay.TotalMilliseconds / 86400d; //get the milliseconds of the given day and divide it to the number of seconds of a day 
```

在一行中：

```
var beats = DateTime.Now.ToUniversalTime().AddHours(1).TimeOfDay.TotalMilliseconds / 86400d 
```

作为日期时间扩展：

```
public static class DateTimeExtensions
{
    public static double ToInternetTimeDouble(this DateTime time)
    {
        return time.ToUniversalTime().AddHours(1).TimeOfDay.TotalMilliseconds / 86400d;
    }

    public static int ToInternetTimeInt(this DateTime time)
    {
        return Convert.ToInt32(Math.Floor(time.ToInternetTimeDouble()));
    }

    public static string ToInternetTimeStr(this DateTime time)
    {
        return time.ToInternetTimeStr(false);
    }

    public static string ToInternetTimeStr(this DateTime time, bool decimals)
    {
        return string.Format(CultureInfo.InvariantCulture, "@{0}", decimals ? string.Format(CultureInfo.InvariantCulture, "{0:0.00}", time.ToInternetTimeDouble()) : time.ToInternetTimeInt().ToString(CultureInfo.InvariantCulture));
    }
} 
```

# c# - 无法以编程方式覆盖 IIS 虚拟目录/应用程序中的文件（文件始终被锁定）

> ID：10479998
> 
> 赞同：2
> 
> 时间：2012-05-07T09:51:40.313
> 
> 标签：c#, iis, file-locking

起初我以为我面临着一个非常简单的任务。但是现在我意识到它不像我想象的那样工作，所以现在我希望你们能帮助我，因为我现在几乎陷入困境。

我的场景是这样的（在 Windows 2008 R2 服务器上）：

1.  一个文件每天上传 3 次到 FTP 目录。文件名始终相同，这意味着现有文件每次都会被覆盖。
2.  我编写了一个简单的 C# 服务，它正在监视 FTP 上传目录，为此我使用 FileSystemWatcher 类。
3.  文件的上传需要几分钟，所以一旦文件观察器注册更改，我会定期尝试打开文件，查看文件是否仍在上传（或锁定）
4.  一旦文件不再被锁定，我会尝试将文件移动到我的 IIS 虚拟目录中。我必须先删除旧文件，然后将新文件移过来。这就是我的问题开始的地方。该文件似乎总是被 IIS（w3wp.exe 进程）锁定。

经过一番研究，我发现我必须终止锁定文件的进程（在这种情况下为 w3wp.exe）。为此，我创建了一个新的应用程序池并将虚拟目录转换为应用程序。现在我的目录在一个单独的 w3wp.exe 进程下运行，据推测我可以安全地杀死并将新文件移到那里。

现在我只需要找到正确的 w3wp.exe 进程（总共运行 3 个 w3wp.exe 进程，每个进程都在一个单独的应用程序池下运行），它锁定了我的目标文件。但这似乎是 C# 中几乎不可能完成的任务。我在这里发现了很多关于“查找锁定特定文件的过程”的问题，但没有一个答案对我有帮助。例如，进程资源管理器准确地告诉我哪个进程正在锁定我的文件。

接下来我不明白的是，我可以毫无问题地通过 Windows 资源管理器删除目标文件。只是我的 C# 应用程序收到“文件正在被另一个进程使用”错误。我想知道这里有什么区别......

以下是关于锁定文件和 C# 的最值得注意的问题：

[Win32：如何获取拥有互斥锁的进程/线程？](https://stackoverflow.com/questions/1947312/win32-how-to-get-the-process-thread-that-owns-a-mutex)

^^ 此处的示例代码确实有效，但这会输出每个活动进程的打开句柄 ID。我只是不知道如何搜索特定的文件名，或者至少将句柄 ID 解析为文件名。这个 WinAPI 的东西超出了我的想象。

[使用 C#，如何确定是哪个进程锁定了文件？](https://stackoverflow.com/questions/860656/how-does-one-figure-out-what-process-locked-a-file-using-c)

^^ 这里的示例代码正是我所需要的，但不幸的是我无法让它工作。它总是抛出一个我无法弄清楚的“AccessViolationException”，因为示例代码广泛使用了 WinAPI 调用。

简单的任务，做不到？我很感激任何帮助。

**编辑** 这里是我的服务器代码的一些相关部分：

检测文件是否被锁定的辅助函数：

```
 private bool FileReadable(string file, int timeOutSeconds)
    {
        DateTime timeOut = DateTime.Now.AddSeconds(timeOutSeconds);

        while (DateTime.Now < timeOut)
        {
            try
            {
                if (File.Exists(file))
                {
                    using (FileStream fs = File.Open(file, FileMode.Open, FileAccess.Read, FileShare.None))
                    {
                        return true;
                    }
                }
                return false;
            }
            catch (Exception)
            {
                Thread.Sleep(500);
            }
        }

        m_log.LogLogic(0, "FileReadable", "Timeout after [{0}] seconds trying to open the file {1}", timeOutSeconds, file);
        return false;
    } 
```

这是我的 FileSystemWatcher 事件中的代码，它正在监视 FTP 上传目录。filepath是新上传的文件，targetfilepath是我的IIS目录下的目标文件。

```
 // here I'm waiting for the newly uploaded file to be ready
        if (FileReadable(filepath, FWConfig.TimeOut))
        {
            // move uploaded file to IIS virtual directory
            string targetfilepath = Path.Combine(FWConfig.TargetPath, FWConfig.TargetFileName);

            if(File.Exists(targetfilepath))
            {
                m_log.LogLogic(4, "ProcessFile", "Trying to delete old file first: [{0}]", targetfilepath);
                // targetfilepath is the full path to my file in my IIS directory
                // always fails because file is always locked my w3wp.exe :-(
                if(FileReadable(targetfilepath, FWConfig.TimeOut))
                    File.Delete(targetfilepath);
            }

            File.Move(filepath, targetfilepath);
        } 
```

**EDIT2：** 在客户端下载文件时终止 w3wp.exe 进程对我们来说没有问题。我只是很难找到锁定文件的正确 w3wp.exe 进程。

此外，我的客户端应用程序正在客户端上下载文件，它正在检查 HTTP HEAD 的 Last-Modified 日期。客户每 10 分钟检查一次日期。因此，文件可能被 IIS 锁定，因为有客户端不断检查文件的 HTTP HEAD。尽管如此，我不明白为什么我可以通过 Windows 资源管理器手动删除/重命名/移动文件而没有任何问题。为什么这行得通，为什么我的应用程序会出现“被另一个进程锁定”异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:52:43.970

我遇到的一个问题是一个文件在它还在被写入的时候就存在了，这意味着它也会被锁定。如果此时调用了 FileReadable() 函数，它将返回 false。

我的解决方案是，在写入文件的 proc 中，将文件写入 OUTPUT1.TXT，然后在完全写入并关闭 FileStream 后，将其重命名为 OUTPUT2.TXT。这样，OUTPUT2.TXT 的存在表明文件已写入并且（希望）已解锁。只需在 FileReadable() 循环中检查 OUTPUT2.TXT。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T20:37:42.330

大家说...

## “做一个更好的方法”

### 没人说怎么做！！！

就是这样。因为您提到了“我的客户端应用程序”，所以如果您无法控制读取文件的应用程序，您将不会拥有一个关键机会。

### 每次只需使用新的文件名。

您可以控制程序读取和写入文件。在文件名中添加一个递增的#，让客户选择最大的#（实际上是最新的日期，然后你的数字可以环绕）。*如果可以*的话，让编写程序清理旧文件；如果没有，他们不会伤害任何东西。IIS 最终会放过它们。如果没有，请每周打开资源管理器并自己动手！

使这项工作的其他关键是更新频率低（文件不会建立得太糟糕），以及 FTP+网络服务器在同一个驱动器上的事实（否则 MOVE 不是原子的，客户端可能会得到一个半-复制的文件。如果 FTP 驱动器不同，解决方案是复制到网络服务器上的临时驱动器，然后移动）。

**但是如果您不能更改客户端或者它只能读取一个名称怎么办？**

使用脚本对其进行前端处理。让客户端点击设置正确 HTTP 标头并具有“选择正确文件”逻辑的 ASPX，然后输出文件内容。这是一种非常流行的技巧，页面用于将存储在数据库中的图像写入浏览器，而 img 标签似乎是从文件中读取的。（谷歌沿着这条线获取示例代码）。

**听起来像一个黑客**，它不是。现代无锁内存缓存系统做类似的事情。不可能发生锁定或损坏；直到“写”完成，读者才能看到旧版本。

*另外*，这很简单，从脚本小子到穿孔卡片老手的每个人都会确切地知道您在做什么。去低科技！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T03:39:18.747

您正在解决问题的症状而不是解决根本原因。如果你想沿着这条路走下去，这里是杀死进程的代码[http://www.codeproject.com/Articles/20284/My-TaskManager](http://www.codeproject.com/Articles/20284/My-TaskManager) - 但更好的主意是正确执行并找出问题所在。我在 FileReadable 的 Catch Exception 中建议：

```
catch (Exception ex) {
if (ex is IOException && IsFileLocked(ex)) {
//Confirm the code see's it as a FileLocked issue, not some other exception
//its not safe to unlock files used by other processes, because the other process is likely reading/writing it. 
}
}

private static bool IsFileLocked(Exception exception)
{
    int errorCode = Marshal.GetHRForException(exception) & ((1 << 16) - 1);
    return errorCode == 32 || errorCode == 33;
} 
```

1.  关闭任何防病毒软件并重新测试
2.  增加轮询超时时间，看看它是否只是一个计时的事情
3.  检查 FTP 日志文件并查看已断开客户端的状态并将状态代码与[此处](http://support.microsoft.com/kb/969061)的状态代码进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T15:17:11.187

我没有在您的示例代码中看到您关闭文件流的位置。保持文件流打开将保持对文件的锁定。关闭流是个好主意。正如其他人在这里提到的那样，您可能不想杀死您的 w3wp.exe 进程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-28T11:21:17.893

重新启动 IIS 可以解锁 w3wp.exe 获取的文件。

> cmd（以管理员身份运行）-> iisreset /stop -> 在 Windows 资源管理器中更新/删除文件 -> iisreset /start